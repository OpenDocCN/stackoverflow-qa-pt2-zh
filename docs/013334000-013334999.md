# StackOverflow 问答 13334000-13334999

# git - 执行 git pull 时未提交的本地文件导致错误，如何正确取消暂存它们？

> ID：13334001
> 
> 赞同：1
> 
> 时间：2012-11-11T18:18:34.220
> 
> 标签：git

我结帐以开发分支，在其中存储我的干净代码版本：

```
git checkout develop 
```

然后我尝试拉：

```
git pull origin develop 
```

在那里，我收到了这条消息：

```
error: Your local changes to the following files would be overwritten by merge:
    MyApp.xcodeproj/project.pbxproj
    Podfile
    Podfile.lock
Please, commit your changes or stash them before you can merge.
Aborting 
```

我不想提交这些文件更改，那么最好的处理方法是什么？文件的重置 HEAD 是否有效，如下所示：

```
git reset HEAD MyApp.xcodeproj/project.pbxproj 
git reset HEAD Podfile 
git reset HEAD Podfile.lock 
```

提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T18:21:42.987

尝试

```
git stash 
```

然后做拉动和

```
git stash pop 
```

但首先阅读相应的手册页;-)

# android - Android：在活动之间切换时崩溃

> ID：13334005
> 
> 赞同：0
> 
> 时间：2012-11-11T18:19:01.013
> 
> 标签：android, android-activity

所以我一直在关注关于开始 android 的 wrox 书，我似乎无法弄清楚为什么我的程序在活动之间切换时会崩溃。当我单击编辑框和按钮之外的中心 d_pad 时发生崩溃。

```
The error logcat describe is as follows.
11-11 11:03:50.700: W/dalvikvm(334): threadid=1: thread exiting with uncaught exception (group=0x40015560)
11-11 11:03:50.949: E/AndroidRuntime(334): FATAL EXCEPTION: main
11-11 11:03:50.949: E/AndroidRuntime(334): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.activites/com.example.activites.Activity2}: java.lang.NullPointerException
11-11 11:03:50.949: E/AndroidRuntime(334):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
11-11 11:03:50.949: E/AndroidRuntime(334):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
11-11 11:03:50.949: E/AndroidRuntime(334):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
11-11 11:03:50.949: E/AndroidRuntime(334):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
11-11 11:03:50.949: E/AndroidRuntime(334):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-11 11:03:50.949: E/AndroidRuntime(334):  at android.os.Looper.loop(Looper.java:123)
11-11 11:03:50.949: E/AndroidRuntime(334):  at android.app.ActivityThread.main(ActivityThread.java:3683)
11-11 11:03:50.949: E/AndroidRuntime(334):  at java.lang.reflect.Method.invokeNative(Native Method)
11-11 11:03:50.949: E/AndroidRuntime(334):  at java.lang.reflect.Method.invoke(Method.java:507)
11-11 11:03:50.949: E/AndroidRuntime(334):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-11 11:03:50.949: E/AndroidRuntime(334):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-11 11:03:50.949: E/AndroidRuntime(334):  at dalvik.system.NativeStart.main(Native Method)
11-11 11:03:50.949: E/AndroidRuntime(334): Caused by: java.lang.NullPointerException
11-11 11:03:50.949: E/AndroidRuntime(334):  at com.example.activites.Activity2.onCreate(Activity2.java:17)
11-11 11:03:50.949: E/AndroidRuntime(334):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-11 11:03:50.949: E/AndroidRuntime(334):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
11-11 11:03:50.949: E/AndroidRuntime(334):  ... 11 more 
```

这是xml文件

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Please enter you name" />
<EditText
    android:id="@+id/txt_username"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    />
<Button
    android:id="@+id/btn_OK"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="OK" />

</LinearLayout> 
```

这是两个相互交互的类。首先是主要

```
package com.example.activites;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.KeyEvent;
import android.widget.Toast;

public class MainActivity extends Activity {
    String tag = "Events";
    int request_Code = 1;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.activity_main);
        Log.d(tag, "In the onCreate() event");
    }

//  @Override
//  public boolean onCreateOptionsMenu(Menu menu) {
//      getMenuInflater().inflate(R.menu.activity_main, menu);
//      return true;
//  }

    public boolean onKeyDown(int keyCode, KeyEvent event)
    {
        if (keyCode== KeyEvent.KEYCODE_DPAD_CENTER)
        {
            startActivityForResult(new Intent("com.example.ACTIVITY2"),request_Code);
        }
        return false;

    }

    public void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        if(requestCode == request_Code){
            if(resultCode==RESULT_OK){
                Toast.makeText(this, data.getData().toString(), Toast.LENGTH_SHORT).show();
            }
        }
    }
} 
```

二等舱

```
package com.example.activites;
import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
public class Activity2 extends Activity {

    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity2);
        Button btn = (Button) findViewById(R.id.btn_OK);

    btn.setOnClickListener (new View.OnClickListener(){
        public void onClick (View view){
            Intent data = new Intent();
            EditText txt_username = (EditText) findViewById(R.id.txt_username);

            data.setData(Uri.parse(txt_username.getText().toString()));
            setResult(RESULT_OK, data);
            finish();
        }
    });
}
} 
```

这是清单文件

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.activites"
    android:versionCode="1"
    android:debuggable="true"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Activity2"
            android:label="Activity 2" >
            <intent-filter>
                <action android:name="com.example.ACTIVITY2" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

    </application>
</manifest> 
```

再次提前感谢您的帮助/我很惊讶这些 android 应用程序的调试与 .net 开发的不同之处。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T18:21:00.830

我猜你的`activity2`布局没有带有 id 的 Button `btn_OK`，所以`btn`是`null`：

```
Button btn = (Button) findViewById(R.id.btn_OK);
btn.setOnClickListener( ... ); // Crash here with an NPE 
```

`findViewById()`只能定位传递给的当前布局中的视图`setContentView()`，否则返回`null`。

* * *

这是重要的 LogCat 信息：

```
Caused by: java.lang.NullPointerException
    at com.example.activites.Activity2.onCreate(Activity2.java:17) 
```

注意最后一位`Activity2.java:17`，即发生错误的文件和行号。我猜是：`btn.setOnClickListener( ... );`出于上述原因。

# mysql - mySQL 以压缩格式存储数据

> ID：13334009
> 
> 赞同：0
> 
> 时间：2012-11-11T18:19:21.313
> 
> 标签：mysql

我正在尝试将本质上是日志数据的内容存储在 mySQL 中——可能是大量未压缩形式的数据（25GB+ 月）。

每行仅包含两列，一个作为主键的日期时间列，以及一个`data`包含 8k - 16k 未压缩数据的列。

我尝试使用 innoDB `ROW_FORMAT=compressed`，但它似乎对数据库的大小没有任何实际影响。使用我的示例数据，它的 0.53GB 没有使用压缩行格式，但它仍然是 0.53GB 使用压缩行格式。

我正在使用以下查询检查存储数据的大小（它在测试数据库中，因此我的测试表将始终是“最大的”）：

```
SELECT CONCAT(table_schema, '.', table_name),
       CONCAT(ROUND(table_rows / 1000000, 2), 'M')                                    rows,
       CONCAT(ROUND(data_length / ( 1024 * 1024 * 1024 ), 2), 'G')                    DATA,
       CONCAT(ROUND(index_length / ( 1024 * 1024 * 1024 ), 2), 'G')                   idx,
       CONCAT(ROUND(( data_length + index_length ) / ( 1024 * 1024 * 1024 ), 2), 'G') total_size,
       ROUND(index_length / data_length, 2)                                           idxfrac
FROM   information_schema.TABLES
ORDER  BY data_length + index_length DESC
LIMIT  10; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:03:12.983

`ARCHIVE`存储引擎可以做你想做的事。这是一个特殊的引擎，以压缩的平面文件格式存储行。它最适合一次写入但不经常使用，因为它没有被索引。但它非常快速且非常节省空间。

[http://dev.mysql.com/doc/refman/5.5/en/archive-storage-engine.html](http://dev.mysql.com/doc/refman/5.5/en/archive-storage-engine.html)

# mongodb - Mongodb - 分片时_id必须是全局唯一的

> ID：13334017
> 
> 赞同：1
> 
> 时间：2012-11-11T18:19:57.563
> 
> 标签：mongodb, indexing, unique, sharding

我想通过他们的“外键”（userID）而不是他们的 id 字段来分片集合。我只需要 userID 和 id 的组合是唯一的。但我不确定 mongodb 是否可以。

> 警告在您不按 _id 字段分片的任何分片集合中，您必须确保 _id 字段的唯一性。确保 _id 始终唯一的最佳方法是使用 ObjectId 或其他通用唯一标识符 (UUID)。

这取自：[http ://docs.mongodb.org/manual/tutorial/enforce-unique-keys-for-sharded-collections/#enforce-unique-keys-for-sharded-collections](http://docs.mongodb.org/manual/tutorial/enforce-unique-keys-for-sharded-collections/#enforce-unique-keys-for-sharded-collections)

我必须确保 _id 是唯一的吗？或者如果我总是通过 userID 和 _id 查询就足够了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T18:58:52.100

除非您手动替换它们，否则自动生成的 _id 是 UUID，根据[文档](http://www.mongodb.org/display/DOCS/Object+IDs#ObjectIDs-The%5CidField)，它由“4 字节时间戳（自纪元以来的秒数）、3 字节机器 ID、2 字节进程 ID 和3 字节计数器”。

如您所见，唯一的机器 ID 是 UUID 的一部分。这确保了分片中没有两台机器独立创建相同的 UUID（除非它们具有相同的机器 ID - 可能性为 1:16777215 并且当它发生时可以很容易地验证）。理论上你可以拥有重复 UUID 的唯一情况是单个进程在一秒钟内创建超过 2^24（超过 1600 万）个 UUID。

**tl; dr：**您不必担心重复的 UUID - 正如文档所述，它们“设计为在分配时具有相当高的唯一性”。

# php - Jquery ajax 不调用不工作

> ID：13334019
> 
> 赞同：-2
> 
> 时间：2012-11-11T18:20:18.643
> 
> 标签：php, javascript, jquery, ajax, forms

我的目录中有 2 个文件：一个是`js/form-validation-reg.js`，一个是`HTML/registeruser.php`. javascript 文件验证我已经检查过的另一个 html 文件中的表单；所有值都一直传递到ajax，但这些值似乎没有发送到`registeruser.php`我的数据库中。

```
form-validation-reg.js:
//data string creation
var dataString = 'name='+ name
                    + '&pass=' + pass     
                    + '&nationality=' + nationality
                    + '&contactno=' + contactno
                    + '&dateofbirth=' + dateofbirth
                    + '&eaddress=' + eaddress
                    + '&address=' + address
                    + '&gender=' + gender
                    + '&monthlysub=' + monthlysub;      
        //ajax
        $.ajax({
        type:"POST",
        url: "HTML/registeruser.php",
        data: dataString,
        success: success(),
           error:function(jqXHR, textStatus, errorThrown){
                               alert("Error type" + textStatus + "occured, with value " + errorThrown);
                           }

    });
}); 
```

没有显示错误，我也尝试将 url 设置为“../HTML/registeruser.php”，但它仍然不起作用。PHP 文件（注意：我还确保我的数据库详细信息是正确的。）：

```
$name = stripslashes(strip_tags($_POST['name']));
$pass = stripslashes(strip_tags($_POST['pass']));
$nationality = stripslashes(strip_tags($_POST['nationality']));
$contactno = stripslashes(strip_tags($_POST['contactno']));
$dateofbirth = stripslashes(strip_tags($_POST['dateofbirth']));
$eaddress = stripslashes(strip_tags($_POST['eaddress']));
$address = stripslashes(strip_tags($_POST['address']));
$gender = stripslashes(strip_tags($_POST['gender']));
$monthlysub = stripslashes(strip_tags($_POST['monthlysub']));

$mysqli = new mysqli("localhost", "root", "","testdb")or exit("Error connecting to the database.");
$stmt = $mysqli->prepare("INSERT INTO user 
            (name, password, nationality, contactno, dateofbirth, email, address, gender, monthlysub) 
            VALUES (?,?,?,?,?,?,?,?,?)");
$stmt->execute();
$stmt->bind_param("sssssssss", $name, $pass, $nationality, $contactno, $dateofbirth, $eaddress, $address, $gender, $monthlysub);
$stmt->fetch();
$stmt->close();
$mysqli->close(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T18:21:42.667

尝试：

```
success: success, 
```

代替 ：

```
success: success(), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T18:57:15.723

不确定这是否有帮助，但您的 dataString 变量看起来就像您正在构建它以进入一个使用 get 而不是 post 的 URL。可能是您的 php 脚本不知道如何解析传递给它的内容，因为它正在查看 post 变量。由于您要传递密码，但出于安全原因，您不想使用 get 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T03:30:02.097

您可以使用自动执行此操作的库，例如[http://phery-php-ajax.net](http://phery-php-ajax.net)已经自动在 jQuery 和 PHP 之间建立了桥梁

```
phery.remote('registeruser', {
'name': name,
'pass': pass,     
'nationality': nationality,
'contactno': contactno,
'dateofbirth': dateofbirth,
'eaddress': eaddress,
'address': address,
'gender': gender,
'monthlysub': monthlysub,
}); 
```

```
Phery::instance()->set(array(
    'registeruser' => function($data){
      $data = array_map('strip_tags', $data);
      /* rest of mysql code */
      return PheryResponse::factory(); // do any DOM manipulation, redirect, etc
    }
))->process(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T19:33:41.320

您需要在 $stmt->execute(); 之前调用 $stmt->bind_param;

如果仍然存在问题，那么您需要将其分解以查看问题所在：

1) 确保 Javascript 被调用。在您的 Javascript 中放置一个 alert() 并重新加载页面。如果弹出警报，那么您在那里很好，您可以排除任何包含 URL 问题。

2) 如果您使用的是 Firefox，请安装 firebug，然后按 F12 并查看控制台。您将看到 HTML/registeruser.php 被调用，您还可以看到正在发送的参数和其他信息。您也可以在 Chrome 中执行此操作。如果 URL 被调用并且您收到 200 响应，那么那里没有问题，这是您可以排除的另一件事。

3）此时我们已经排除了Javascript和Ajax调用。所以现在我们专注于数据库连接，然后是 SQL 查询。在 registeruser.php 上连接后，对您知道有记录的表执行 select 语句，将它们回显以确保您确实有连接并且连接到正确的数据库。

4) 回显您的 SQL 语句以确保它具有所有参数。

顺便说一句，您还应该检查您的错误处理，而不是使用 exit 您应该检查 mysqli 错误，因此在新的 mysqli 调用之后添加以下内容：

```
if (mysqli_connect_errno()) {
  printf("Error connecting to the database: %s\n", mysqli_connect_error());
  exit();
} 
```

# python - 如何使用 Winforms 在 IronPython 中画线？

> ID：13334024
> 
> 赞同：1
> 
> 时间：2012-11-11T18:20:39.103
> 
> 标签：python, winforms, ironpython, sharpdevelop

我已经开始在#Develop 中使用 IronPython，并且我喜欢与 IronPython 和 Windows 窗体的集成，它可以让您创建类似于 Visual Basic 或 C# 的 GUI

我的问题很简单，单击时如何在 PictureBox 中画一条线？我找到了有关绘制线条的代码，但我知道如何将其调整为 PictureBox。

这是我找到的代码： [http ://www.zetcode.com/tutorials/ironpythontutorial/painting/](http://www.zetcode.com/tutorials/ironpythontutorial/painting/)

那么，我应该在“def PictureBox1Click（self，sender，e）：”中输入什么？

任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:03:15.083

这是一个简单的示例，当单击图片框时，它会在图片框上画一条线。

```
import System.Drawing
import System.Windows.Forms

from System.Drawing import *
from System.Windows.Forms import *

class MainForm(Form):
  def __init__(self):
    self.InitializeComponent()
    self.pen = System.Drawing.Pen(System.Drawing.Color.Black);

  def InitializeComponent(self):
    self._pictureBox1 = System.Windows.Forms.PictureBox()
    self._pictureBox1.BeginInit()
    self.SuspendLayout()
    # 
    # pictureBox1
    # 
    self._pictureBox1.Location = System.Drawing.Point(13, 13)
    self._pictureBox1.Name = "pictureBox1"
    self._pictureBox1.Size = System.Drawing.Size(259, 237)
    self._pictureBox1.TabIndex = 0
    self._pictureBox1.TabStop = False
    self._pictureBox1.Click += self.PictureBox1Click
    # 
    # MainForm
    # 
    self.ClientSize = System.Drawing.Size(284, 262)
    self.Controls.Add(self._pictureBox1)
    self.Name = "MainForm"
    self.Text = "PyWinForm"
    self._pictureBox1.EndInit()
    self.ResumeLayout(False)

  def PictureBox1Click(self, sender, e):
    g = self._pictureBox1.CreateGraphics()
    g.DrawLine(self.pen, 10, 10, 400, 200) 
```

# c++ - 指导编译器如何优化我的代码

> ID：13334025
> 
> 赞同：1
> 
> 时间：2012-11-11T18:20:50.097
> 
> 标签：c++, optimization, compiler-construction

我如何对编译器说如何优化某些东西或调用什么函数。我的意思是像创建分配方法并让编译器优化它，因为它使用`malloc`or优化它`new`。

或者就像代码中某处调用函数 X 并且未使用它的返回值然后删除此调用。（来自 .lib 的函数，编译器对此一无所知）

有这方面的选择吗？

例如：

```
auto val=X(); //Use the return value
X(); //Don't use
auto t=allocate<T>(); //Allocate on heap
t->Show(val); //Run single function and don't use it's pointer somewhere (Save it after the function is exit) 
```

并将其优化为：

```
X(); //First line, just call it
T().Show(val); //Combines third and fourth lines, Allocate on stack and run the single function 
```

如果您问“为什么需要这个？” 我正在使用自己的 GC 和堆创建编程语言。（还有很多东西）

它翻译成 C++ 然后我不想在翻译时优化代码。（这会很痛苦）因为我可以在一些地方随机调用函数。（我无法检测它们的值是否被使用）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T18:48:09.347

优化是特定于编译器的，因此您需要查看编译器的文档以查看它允许您将哪些优化“提示”放入代码中。例如，以下是 GCC 的一些[函数属性](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Function-Attributes.html)：

*   该`malloc`属性告诉编译器如果函数返回一个非空指针，它总是一个“新”的内存区域，而不是另一个指向已经分配的东西的指针。您可能希望在包装真实的函数上使用它`malloc()`。
*   属性（与`const`普通`const`关键字不同）表示函数的返回值仅取决于其参数并且没有副作用，因此编译器可以安全地消除具有相同参数的重复调用。
*   该`noreturn`属性告诉编译器一个函数永远不会返回；你可以在终止程序的函数上使用它，比如 C 的`exit()`.

属性继续在函数的声明中，通常在头文件中，因此即使函数的实现在稍后链接的已编译库中，您也可以使用它们。但是请记住，函数属性是您对编译器的承诺：`noreturn`例如，如果您使用该属性声明一个函数，然后用实际上可以返回的代码实现它，那么运行时可能会发生奇怪的事情。

* * *

您还可以使用函数属性来帮助进行正确性检查：

*   该`nonnull`属性告诉编译器某些（指针）参数不应该为空，因此如果它检测到它们可能是，它可以发出警告。
*   该`format`参数告诉编译器该函数采用像 C's 这样的格式字符串`printf()`，因此它可以检查可变参数的类型是否与格式字符串中的相应格式代码匹配。（例如，您不应该`%s`在格式字符串中写入“”，然后传递一个整数作为其值。）

# php - PHP编码问题

> ID：13334026
> 
> 赞同：1
> 
> 时间：2012-11-11T18:20:59.330
> 
> 标签：php, xml, utf-8, simplexml

在 webhook (XML) 触发器之后，我有一个 PHP 代码进行以下处理：

```
$xmlData = fopen('php://input' , 'rb'); 
while (!feof($xmlData)) { $xmlString .= fread($xmlData, 4096); }
fclose($xmlData);

file_put_contents('orders/order' . date('m-d-y') . '-' . time() . '.xml', $xmlString, FILE_APPEND); 
```

我还将这些信息传输到数据库：

```
$xml = new SimpleXMLElement($xmlString);
$address1 = trim($xml->{'billing-address'}->address1);
$sql="INSERT INTO `Customers`(`address1`)
VALUES
('$address1')"; 
```

我的问题是 xml 文件和数据库的字符没有正确传输。

原始声明：圣保罗

保存在服务器上的 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
 <address1>S&#xE3;o Paulo</address1> 
```

数据库信息（utf8_general_ci）：

圣保罗

一切似乎都正确设置为 UTF-8，但我仍然有这个字符问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T18:26:08.787

当您建立数据库连接时，运行查询：

```
SET NAMES 'utf8 
```

那应该有帮助。还要确保来自“网络挂钩”的数据采用该格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T18:35:57.613

我认为您使用的 php 函数并非旨在管理多字节字符串。试着放

```
mb_internal_encoding("UTF-8"); 
```

在您的 php 代码的开头并查看 php.net 上的[多字节字符串函数](http://php.net/manual/en/ref.mbstring.php)页面以了解您是否需要更改某些函数以支持其相应的多字节版本。

作为最后的机会，您可以尝试在将字符串插入数据库之前对其进行图标化：

```
$address1 = trim($xml->{'billing-address'}->address1);
$address1 = iconv(iconv_get_encoding($string), "UTF-8", $address1); 
```

# excel - 化学工程师编程

> ID：13334032
> 
> 赞同：-1
> 
> 时间：2012-11-11T18:21:20.327
> 
> 标签：excel, user-interface, vba

我是一名对编程感兴趣的化学工程专业的学生。我的大部分编程经验来自 Excel VBA。我的目标是开发带有 GUI 的桌面应用程序，主要是数字运算、读/写文件和一些命令行（在 windows 和 linux 上）。我想知道我应该学习的最好的编程语言和工具是什么。

更多背景信息：在我所在的地区进行编程是很少有人考虑花时间的事情（至少在我学习的地方）。大多数人只是使用 Excel 和其他商业软件。但是使用 GUI 编写简单的应用程序将是惊人的，因为有许多“老教师编写的”FORTRAN 程序在其他情况下不容易获得。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T19:44:11.727

我建议您使用 Visual Basic .NET。

*   由于您已经了解 VBA，因此很容易上手，因此您必须了解 .NET Framework，但不能同时学习新的语言语法。
*   [Visual Studio 2012 Express for Windows Desktop](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-windows-desktop)是一个非常棒的 VB.NET 免费 IDE。
*   由于它基于 .NET，因此您可以使用用 C# 编写的 .NET 库，并且如果您需要，可以使用在线工具将您的代码转换为 C#。
*   在您的领域中用 VB.NET 编写的一个很好的例子是[DWSIM 化学过程模拟器](http://dwsim.inforside.com.br/wiki/index.php?title=Main_Page)。DWSIM 是开源软件，因此您可以通过自己探索代码来学习。（它使用 Mono 运行时在 Linux 和 Mac OS X 上运行 - 向您展示您的 VB.NET 代码也可以是跨平台的。）
*   您可以使用[Excel-DNA](http://exceldna.codeplex.com)将您的 VB.NET 代码与 Excel 集成- 甚至[将您的 Excel VBA 加载项迁移到 VB.NET](http://sysmod.wordpress.com/2012/11/06/migrating-an-excel-vba-add-in-to-a-vb-net-xll-with-excel-dna-update/)，只需进行最少的更改。因此，您可以为其他 Excel 用户制作实用程序。
*   .NET 还通过 P/Invoke 功能很好地集成到本机代码库。因此，您也可以从您的 VB.NET 代码中调用这些 FORTRAN 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T18:34:04.587

例如，您可以使用 c++、Java 或 C# 做任何事情。这不是一个“什么更好”的问题，而是一个问题——你知道什么。同时，如果你会做Java，你也可以马上做C#。因此，学习任何语言并做到这一点。Java 是跨平台的，C# 与 Visual Studio 相得益彰，PHP 可以帮助您基于 Web 进行。

# asp.net - 内存泄漏 - SQLCommand 对象？

> ID：13334034
> 
> 赞同：-4
> 
> 时间：2012-11-11T18:21:33.690
> 
> 标签：asp.net, vb.net, memory-leaks

请看下面的代码，这是我作为测试编写的。它不会使 ASP.NET 进程增长太多：

```
Private Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Try

            Dim Test As Integer

            For Test = 0 To 1000000
                Test1()
            Next
            Dim Test2 As String = "Test"
        Catch ex As Exception

        End Try
    End Sub

    Public Sub Test1()
        Try

            Dim objCommand As New SqlCommand
            Dim strConString As String = "Data Source=IANSCOMPUTER;Initial Catalog=Test;Integrated Security=True"
            Dim objCon As New SqlConnection
            objCon.ConnectionString = strConString
            objCon.Open()
            objCommand.Connection = objCon
            objCommand.CommandText = "select * from person "
            Dim objDR As SqlDataReader = objCommand.ExecuteReader
            If objDR.HasRows Then
                Using objCon

                End Using
            End If
        Catch ex As Exception
          'I don't swallow exceptions. 
        End Try
    End Sub
End Class 
```

我正在尝试检测内存泄漏。我在受影响的项目中发现了与上述类似的代码。我注意到 objCommand.dispose 没有被调用。有问题的项目连接到一个 Oracle 数据库和一个 SQL 数据库。连接到 SQL 数据库时，使用上述代码。连接到 Oracle 数据库时使用 Oracle.dataaccess.dll，代码看起来不同以反映这一点。

我的具体问题是：如果我避免调用 sqlcommand.dispose 那么这会随着时间的推移导致内存泄漏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T18:58:26.650

如果一个类有一个没有被调用的 Dispose 方法，那么它很可能是内存泄漏的来源。使用 Using，它会为你调用 Dispose 方法。

您的第二个示例应如下所示，其中所有一次性对象都包裹在 using 块中。

```
Dim strConString As String = "Data Source=IANSCOMPUTER;" +
                              "Initial Catalog=Test;Integrated Security=True"
Dim sqlStr as String = "select * from person "
Using objCon As New SqlConnection(strConString)
    Using objCommand As New SqlCommand(sqlStr, objCon)
        objCon.Open()
        Using objDR As SqlDataReader = objCommand.ExecuteReader
            If objDR.HasRows Then
            End If
        End Using
     End Using
End Using 
```

# java - 位置组件 java

> ID：13334040
> 
> 赞同：0
> 
> 时间：2012-11-11T18:22:01.463
> 
> 标签：java, frame, contentpane

现在我已经有一个带有 25 个 Jbutton 的面板及其在框架上的显示，但是我需要其他带有其他信息的面板，所以我创建了另一个面板并添加了一个按钮。但是这个位置不知道怎么设置。对此的一些建议。请记住，我还有其他面板，我希望面板左侧的新面板带有按钮

```
JPanel panel = new JPanel();
panel.setSize(100,100);
jPanel.setBorder(new TitledBorder(new EtchedBorder(), "hi"));
JButton b = new JButton("test");
panel.add(b);
frame.getContentPane().add(panel); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T18:36:01.637

要将新面板添加到 的左侧`JFrame`，您只需将其添加到该`BorderLayout.WEST`位置：

```
frame.add(panel, BorderLayout.WEST); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T18:39:22.217

你好，现在我已经知道如何设置它了，现在添加到内容面板添加 .setlocation(x,y) 它对我有用。使用像素并根据需要制作框架

# c# - C# 在 foreach 中使用 if

> ID：13334043
> 
> 赞同：0
> 
> 时间：2012-11-11T18:22:12.307
> 
> 标签：c#, if-statement, foreach

下面的代码将表单标签重置为“0”。出于好奇，我试图弄清楚如何仅访问某些项目而不是列表中的每个项目。foreach 函数在这里工作得很好，但在代码的其他部分我想以不同的方式访问和修改这些对象

例如，我如何将所有其他字段设置为“0”或仅将最后三个或前三个设置为某个值等。

```
// Set the form Labels to "0"
private void btnClear_Click(object sender, EventArgs e)
{
    // Create List of Labels for modifying form
    new List<Label>() { lbl1, lbl2, lbl3, lbl4, lbl5, lbl6 }.ForEach(p => p.Text = "0");
} 
```

谢谢你

更新：

经过大量阅读和测试后，我回到了选择列表中所有其他项目的最基本方法。

```
 // Set the form Labels to "0"
    private void btnClear_Click(object sender, EventArgs e)
    {
        // Create List of Labels for modifying form
        List<Label> lbl = new List<Label>() { lbl1, lbl2, lbl3, lbl4, lbl5, lbl6 };
        int x =1; //  Set to get every other label. 0 = even, 1 = odd
        while (x < lbl.Count)
        {
            lbl[x].Text = "0";
            x = x + 2;
        } 
```

@Jonathan Wood 有没有办法做到这一点 `items.ForEach(p => { some code(), p.Text = "0"; });`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T18:26:09.303

您传递给的委托`ForEach()`可以用大括号括起来，这样您就可以定义更复杂的逻辑，例如`if`语句。

```
items.ForEach(p => { if (p != null) p.Text = "0"; }); 
```

您甚至可以将您的委托定义为一个单独的方法并传递它。

但是，我想知道您的方法。这是一个winforms应用程序吗？为什么不做一个循环通过表单控件的常规循环呢？然后就不需要额外的表了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T18:44:21.503

要将所有其他字段设置为“0”，您可以尝试将当前元素的索引传递给谓词的[IEnumerable.Where重载。](http://msdn.microsoft.com/en-us/library/bb549418.aspx)

假设您要处理具有奇数索引的元素：

```
new List<Label>() { lbl1, lbl2, lbl3, lbl4, lbl5, lbl6 }.Where((p, i) => (i & 1) == 1).ToList().ForEach(p => p.Text = "0"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T18:24:48.127

您可以使用 Linq：

前三个：

```
var labels = new List<Label>() { lbl1, lbl2, lbl3, lbl4, lbl5, lbl6 };
foreach(Label lbl in labels.Take(3))
    lbl.Text = someValue; 
```

最后三个：

```
foreach(Label lbl in labels.Reverse().Take(3))
    lbl.Text = someValue; 
```

其他标签：

```
var allLabels = this.Controls.OfType<Label>();
var otherLabels = allLabels.Except(labels);
foreach(Label lbl in otherLabels)
    lbl.Text = "0"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T18:25:45.207

将前 3 设置为 0

```
new List<Label>() { lbl1, lbl2, lbl3, lbl4, lbl5, lbl6 }.Take(3).ForEach(p => p.Text = "0"); 
```

将最后 3 设置为 0

```
new List<Label>() { lbl1, lbl2, lbl3, lbl4, lbl5, lbl6 }.Skip(3).Take(3).ForEach(p => p.Text = "0"); 
```

# python - 使用htmlparser python获取标签下的html

> ID：13334044
> 
> 赞同：4
> 
> 时间：2012-11-11T18:22:19.517
> 
> 标签：python, html-parsing

我想在标签下获取整个 html 并使用 HTMLParser。我目前能够获取标签之间的数据，以下是我的代码

```
class LinksParser(HTMLParser):
  def __init__(self):
    HTMLParser.__init__(self)
    self.recording = 0
    self.data = ''

  def handle_starttag(self, tag, attributes):
    if tag != 'span':
      return
    if self.recording:
      self.recording += 1
      return
    for name, value in attributes:
      if name == 'itemprop' and value == 'description':
        break
    else:
      return
    self.recording = 1

  def handle_endtag(self, tag):
    if tag == 'span' and self.recording:
      self.recording -= 1

  def handle_data(self, data):
    if self.recording:
      self.data += data 
```

例如，我还想要输入中的 html 标签

```
<span itemprop="description">
<h1>My First Heading</h1>
<p>My first <br/><br/>paragraph.</p>
</span> 
```

当作为输入提供时，只会给我没有标签的数据。有什么方法可以让我在标签之间获取整个 html 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T19:22:20.247

可以使用[`xml.etree.ElementTree.TreeBuilder`](http://docs.python.org/2/library/xml.etree.elementtree#treebuilder-objects)etree API 来查找/操作`<span>`元素：

```
import sys
from HTMLParser import HTMLParser
from xml.etree import cElementTree as etree

class LinksParser(HTMLParser):
  def __init__(self):
      HTMLParser.__init__(self)
      self.tb = etree.TreeBuilder()

  def handle_starttag(self, tag, attributes):
      self.tb.start(tag, dict(attributes))

  def handle_endtag(self, tag):
      self.tb.end(tag)

  def handle_data(self, data):
      self.tb.data(data)

  def close(self):
      HTMLParser.close(self)
      return self.tb.close()

parser = LinksParser()
parser.feed(sys.stdin.read())
root = parser.close()
span = root.find(".//span[@itemprop='description']")
etree.ElementTree(span).write(sys.stdout) 
```

### [输出](http://ideone.com/bKl0pC)

```
<span itemprop="description">
<h1>My First Heading</h1>
<p>My first <br /><br />paragraph.</p>
</span> 
```

要在没有父（根）`<span>`标签的情况下打印：

```
sys.stdout.write(span.text)
for child in span:
    sys.stdout.write(etree.tostring(child)) # add encoding="unicode" on Python 3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T18:44:17.340

这是根据您提供的测试数据完成工作的方法，只需对现有代码进行最少的更改（假设它基本上已经在执行您想要的操作）。您可能希望将其扩展为以更强大的方式处理自闭合标签：

```
from HTMLParser import HTMLParser

class LinksParser(HTMLParser):
    def __init__(self):
        HTMLParser.__init__(self)
        self.recording = 0
        self.data = ''
        self.self_closing_tags = ("br",)

    def handle_starttag(self, tag, attributes):
        if tag not in ('span',) + self.self_closing_tags:
            self.data += "<%s" % (tag,)
            if attributes:
                self.data += " " + " ".join('%s="%s"' % (k, v) for k, v in attributes)
            self.data += ">"
            return
        if self.recording:
            self.recording += 1
            return
        for name, value in attributes:
            if name == 'itemprop' and value == 'description':
                break
        else:
            return
        self.recording = 1 

    def handle_endtag(self, tag):
        if tag == 'span' and self.recording:
             self.recording -= 1
        elif tag in self.self_closing_tags:
             self.data += "<%s/"> % (tag,)
        else:
             self.data += "</%s>" % (tag,)

    def handle_data(self, data):
        if self.recording:
            self.data += data 
```

鉴于此作为输入：

```
<span itemprop="description">
<h1>My First Heading</h1>
<p>My first <br/><br/>paragraph.</p>
</span> 
```

输出是：

```
<h1>My First Heading</h1>
<p>My first <br/><br/>paragraph.</p> 
```

# haskell - 如何在使用 haskellDB 创建表时指定主键？

> ID：13334045
> 
> 赞同：2
> 
> 时间：2012-11-11T18:22:19.343
> 
> 标签：haskell, haskelldb

目前我正在使用这样的东西：

```
dbCreateTable db "MyTable" [ ("Col1", (StringT, False)), ("Col2", (StringT, False)) ] 
```

效果很好，但我想让“Col1”成为主键。我需要回到原始 SQL 吗？

编辑：这似乎仍然成立：“从 Haskell 本身创建数据库的部分不是很有用，例如，您不能表达外键和主键、索引和约束。即使是最简单的数据库也需要其中之一。”

来自[http://www.mijnadres.net/published/HaskellDB.pdf](http://www.mijnadres.net/published/HaskellDB.pdf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:39:02.703

正如编辑所指出的，HaskellDB 目前还不太擅长创建表。最好先建一个数据库，然后再提取信息。

# java - 在eclipse中将参数传递给文件java

> ID：13334046
> 
> 赞同：0
> 
> 时间：2012-11-11T18:22:21.137
> 
> 标签：java, readfile

> **可能重复：**
> [在 Eclipse 中运行 java 代码时如何添加命令行参数？](https://stackoverflow.com/questions/8319939/how-to-add-command-line-parameters-when-running-java-code-in-eclipse)

当我在 tux 上运行我的程序并执行 make 运行时，我的程序完美执行，make 文件中的命令是：

```
STS_ARGS = attributes.txt ts

run:
    java -ea -cp $(STS_CP) STS $(STS_ARGS) 
```

现在当我尝试在 Eclipse 中运行文件时

```
Input in = new Input("Attributes.txt "); 
```

我如何在 Eclipse 中将“ts”作为参数传递？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T18:26:16.853

运行配置 -> 参数 - 程序参数

然后在那里输入你的程序的参数。

# node.js - 将 Node App 分成不同的文件

> ID：13334051
> 
> 赞同：5
> 
> 时间：2012-11-11T18:23:17.450
> 
> 标签：node.js, socket.io

我正在使用 Socket.IO 开发我的第一个 Node.js 应用程序，一切都很好，但现在应用程序正在慢慢变大，我想将应用程序代码分成不同的文件以便更好地维护。

例如，我在主文件中定义了我所有的猫鼬模式和路由。下面是 socket.IO 连接的所有函数。但是现在我想要一个额外的模式文件，一个额外的路由文件和一个函数文件。

当然，我知道编写自己的模块或使用 require 加载文件的可能性。这对我来说没有意义，因为我不能使用 app、io 或 db 等变量而不使它们成为全局变量。如果我将它们传递给我模块中的函数，我将无法更改它们。我错过了什么？我想看看一个例子，这是如何在不使用全局变量的情况下在实践中完成的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-11T19:13:50.067

听起来您有一个[高度耦合](http://en.wikipedia.org/wiki/Coupling_(computer_programming))的应用程序；您很难将代码拆分为模块，因为不应该相互依赖的应用程序片段会这样做。研究OO[设计的原则](https://stackoverflow.com/a/399737/62082)可能会有所帮助。

例如，如果您要将数据库逻辑从主应用程序中分离出来，您应该能够这样做，因为数据库逻辑不应该依赖于`app`或者`io`-- 它应该能够独立工作，并且您`require`可以将其放入应用程序的其他部分来使用它。

这是一个相当基本的示例——它比实际代码更像是伪代码，因为重点是通过示例演示模块化，而不是编写工作应用程序。它也只是您决定构建应用程序的众多方式中的一种。

```
// =============================
// db.js

var mongoose = require('mongoose');
mongoose.connect(/* ... */);

module.exports = {
  User: require('./models/user');
  OtherModel: require('./models/other_model');
};

// =============================
// models/user.js (similar for models/other_model.js)

var mongoose = require('mongoose');
var User = new mongoose.Schema({ /* ... */ });
module.exports = mongoose.model('User', User);

// =============================
// routes.js

var db = require('./db');
var User = db.User;
var OtherModel = db.OtherModel;

// This module exports a function, which we call call with
// our Express application and Socket.IO server as arguments
// so that we can access them if we need them.
module.exports = function(app, io) {
  app.get('/', function(req, res) {
    // home page logic ...
  });

  app.post('/users/:id', function(req, res) {
    User.create(/* ... */);
  });
};

// =============================
// realtime.js

var db = require('./db');
var OtherModel = db.OtherModel;

module.exports = function(io) {
  io.sockets.on('connection', function(socket) {
    socket.on('someEvent', function() {
      OtherModel.find(/* ... */);
    });
  });
};

// =============================
// application.js

var express = require('express');
var sio = require('socket.io');
var routes = require('./routes');
var realtime = require('./realtime');

var app = express();
var server = http.createServer(app);
var io = sio.listen(server);

// all your app.use() and app.configure() here...

// Load in the routes by calling the function we
// exported in routes.js
routes(app, io);
// Similarly with our realtime module.
realtime(io);

server.listen(8080); 
```

这一切都是在我对各种 API 的文档进行最少检查的情况下写下来的，但我希望它为你如何从应用程序中提取模块埋下种子。

# php - Heroku 是否支持 PHP？

> ID：13334052
> 
> 赞同：19
> 
> 时间：2012-11-11T18:23:17.877
> 
> 标签：php, mysql, heroku, mamp

我正在为我的网站寻找托管，该网站是用 PHP 构建的。过去我使用过 GoDaddy（前几个网站），但想使用更高级的托管公司。

Heroku 是否支持 PHP 网站？有很多关于 Facebook 应用程序的答案，但没有关于 PHP + MySQL 网站的答案。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-11T18:28:30.033

Heroku 事实上支持 PHP。他们最初专门为 Facebook 应用程序支持 PHP，但现在托管了许多不是 Facebook 应用程序的生产 PHP 站点。（来源——今年早些时候与 Heroku 销售人员直接沟通。）

有一个[官方的 PHP buildpack](https://github.com/heroku/heroku-buildpack-php)（有关什么是 buildpack 以及它们如何工作的信息，请参阅[文档](https://devcenter.heroku.com/articles/buildpacks)）。

还有许多非官方的 PHP buildpacks 对原始版本进行了改进。官方的 PHP buildpack 有一个阻塞的 Apache 工作者，并且对附加组件的支持很少。它也不使用 Vulcan 来构建二进制文件。请参阅[我的 buildpack](https://github.com/andrewsg/heroku-buildpack-php-foundry)，它适用于 Wordpress 或其他内存密集型应用程序，或者我的 buildpack 的父[级 Winglian buildpack](https://github.com/winglian/heroku-buildpack-php)。

**更新：Heroku 现在[正式支持 PHP](https://devcenter.heroku.com/changelog-items/462)并提供了一个大大改进的官方 buildpack。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T18:27:20.233

您可以在 Cedar 堆栈上启动 dyno 并直接推送 PHP 文件。

# c# - 如何在 C# 中为泛型派生类实现抽象的非泛型基类？

> ID：13334053
> 
> 赞同：0
> 
> 时间：2012-11-11T18:23:23.643
> 
> 标签：c#

这就是我希望我的类看起来的样子，但是这段代码不会编译。我如何使它工作？

```
public interface ISomeInterface
{
    string AMember { get; }
}
public abstract class BaseClass
{
    public abstract ISomeInterface AObject { get; }
    public abstract IEnumerable<ISomeInterface> AMethod();
}

public class DerivedClass<T> : BaseClass where T : ISomeInterface
{
    public T AObject { get; private set; }
    public IEnumerable<T> AMethod()
    {
        return null;
    }
} 
```

**编译器错误**

'Delfin.Accountancy.DerivedClass' 没有实现继承的抽象成员 'Delfin.Accountancy.BaseClass.AObject.get'

'Delfin.Accountancy.DerivedClass' 没有实现继承的抽象成员 'Delfin.Accountancy.BaseClass.AMethod()'

在 c# 5.0 上运行。

**笔记**

我已经尝试过最明显的实现，但其中任何一个都允许我实现基类并立即公开强类型成员。

我不想使基类通用，因为我将在基类上创建静态方法，并创建可能适用于派生类的每种情况的扩展方法。

我还需要派生类是通用的，因为在现实世界的情况下，T 的成员比 ISomeInterface 多。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T19:00:29.333

您所要求的称为返回类型协方差，而 C# 不支持这一点（有关更多详细信息，请参阅[此](https://stackoverflow.com/a/5709191/517852)答案）。你必须以某种方式修改你的类，但你没有指出什么是可以接受的。这是一种不更改公共 API，而是将抽象方法更改为受保护方法的方法。

```
public interface ISomeInterface
{
    string AMember { get; }
}

public abstract class BaseClass
{
    public ISomeInterface AObject { get { return GetAObjectImpl(); } }     
    public IEnumerable<ISomeInterface> AMethod() { return AMethodImpl(); }

    protected abstract ISomeInterface GetAObjectImpl();
    protected abstract IEnumerable<ISomeInterface> AMethodImpl();
}

public class DerivedClass<T> : BaseClass where T : ISomeInterface
{
    public new T AObject { get; private set; }

    public new IEnumerable<T> AMethod() { return Enumerable.Empty<T>(); }

    protected override ISomeInterface GetAObjectImpl() 
    {
        return AObject;
    }

    protected override IEnumerable<ISomeInterface> AMethodImpl()
    {
        return AMethod();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T18:56:55.930

为什么不：

```
public interface ISomeInterface
{
    string AMember { get; }
}
public abstract class BaseClass
{
    public abstract ISomeInterface AObject { get; protected set; }
    public abstract IEnumerable<ISomeInterface> AMethod();
}

public class DerivedClass : BaseClass
{
    public override ISomeInterface AObject { get; protected set; }
    public override IEnumerable<ISomeInterface> AMethod()
    {
        return null;
    }
} 
```

您可以返回任何在属性中实现`ISomeInterface`接口的类型，`AObject`并且因为`IEnumearable<T>`是协变的，您可以返回任何可枚举的已`ISomeInteface`实现类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T18:33:59.673

不确定您要在这里实现什么。您的 DerivedClass AObject 和 IEnumerable 有效地隐藏了基类的声明。您希望派生类的签名将接口作为其通用参数的理由是什么？

这将编译：

```
 public interface ISomeInterface
    {
        string AMember { get; }
    }
    public abstract class BaseClass
    {
        public abstract ISomeInterface AObject { get; protected set; }
        public abstract IEnumerable<ISomeInterface> AMethod();
    }

    public class DerivedClass<T> : BaseClass where T : ISomeInterface
    {
        public override ISomeInterface AObject { get; protected set; }
        public override IEnumerable<ISomeInterface> AMethod()
        {
            return null;
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T18:34:00.147

为了使其工作，您可以使您的基类通用：

```
public interface ISomeInterface
{
    string AMember { get; }
}
public abstract class BaseClass<T> where T : ISomeInterface
{
    public abstract T AObject { get; protected set; }
    public abstract IEnumerable<T> AMethod();
}

public class DerivedClass<T> : BaseClass<T> where T : ISomeInterface
{
    public override T AObject { get; protected set; }
    public override IEnumerable<T> AMethod()
    {
        return null;
    }
} 
```

# textmate - 在 TextMate 中找到两行并替换为第一行？

> ID：13334056
> 
> 赞同：1
> 
> 时间：2012-11-11T18:23:53.807
> 
> 标签：textmate

在 Textmate（或使用 sed）中，如何找到以“日期：”开头的两行并将这两行替换为第一行？这是我在 TextMate 中使用的搜索表达式：

```
Date+.+?$\n^Date:+.+?$ 
```

**示例文本：**

```
blah 
blah blah 
Date: Fri,  9 Jan 2009 16:20:59 -0800 (PST) 
Date:     2009-01-09 16:20:59 -0800 (Fri, 09 Jan 2009) 
blah 
```

**变成：**

```
blah
blah blah
Date: Fri,  9 Jan 2009 16:20:59 -0800 (PST)
blah 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:20:28.387

使用括号捕获第一个日期：

```
(Date+.+?)$\n^Date:+.+?$ 
```

然后将其用作您的替换字段：

```
$1 
```

（`$1`只是意味着使用在查找字符串的第一组括号中捕获的文本。）

# objective-c - “没有已知的选择器类方法”混淆

> ID：13334057
> 
> 赞同：1
> 
> 时间：2012-11-11T18:24:00.127
> 
> 标签：objective-c, cocoa-touch, cocoa

可能是一个菜鸟问题，但在这里。我让我的 AppDelegate 从“应用程序 didFinishLaunchingWithOptions”中的文件实例化一个新字典。我有一个 addViewController，我想传递一个新对象以添加到 AppDelegate 的字典中，以便稍后保存到磁盘。这是我所拥有的一些片段。

```
//
//  AppDelegate.m
//  PersonLibraryiOS
//
//  Created by Joey on 11/7/12.
//  Copyright (c) 2012 Joey. All rights reserved.
//

#import "AppDelegate.h"
#import "AddViewController.h"
#import "Person.h"
@implementation AppDelegate
@synthesize PersonDict;

-(void)addtoDict:(Person *)newPerson
{
    [PersonDict setObject:@"newPerson" forKey:[newPerson name]];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    return YES;
    PersonDict = [NSMutableDictionary dictionaryWithContentsOfFile:@"diskDict"]; 
```

和 AddViewController：

```
//
//  AddViewController.m
//  personLibraryiOS
//
//  Created by Joey on 11/8/12.
//  Copyright (c) 2012 Joey. All rights reserved.
//

#import "AddViewController.h"
#import "TableViewController.h"
#import "person.h"
#import "AppDelegate.h"

@implementation AddViewController
@synthesize nameLabel;
@synthesize ageLabel;
@synthesize heightLabel;
@synthesize weightLabel;
@synthesize hairColorLabel;
@synthesize eyeColorLabel;

- (IBAction)saveButton:(id)sender
{
    person *newperson = [[person alloc]init];

    newperson.name = [nameLabel text];
    newperson.age = [ageLabel text];
    newperson.height = [heightLabel text];
    newperson.weight = [weightLabel text];
    newperson.hairColor = [hairColorLabel text];
    newperson.eyeColor = [eyeColorLabel text];

    [AppDelegate addtoDict:newperson];  <---- the error is here

     } 
```

我知道这可能是基本的，但我真的很困惑。我在 addViewController 中导入 AppDelegate.h 文件，所以它应该知道所有关于 AppDelegate 的方法。

谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T18:34:45.880

AppDelegate 是一个类。您可能想与用作应用程序委托的类的特定实例交谈，这将是`[[UIApplication sharedApplication] delegate]`. 一个类不能与其实例互换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T18:34:56.200

该行：

```
[AppDelegate addtoDict:newperson]; 
```

正在尝试调用名为`addtoDict:`的类上的类方法`AppDelegate`。您很可能希望`addtoDict:`在应用的应用委托实例上调用实例方法（而不是类方法）。

你可能想要：

```
[(AppDelegate *)[NSApplication sharedApplication].delegate addtoDict:newperson]; 
```

# javascript - jQuery keydown/keypress 无法正常工作

> ID：13334060
> 
> 赞同：1
> 
> 时间：2012-11-11T18:24:32.807
> 
> 标签：javascript, jquery

所以我有一个输入：

```
<input type="text" name="in" /> 
```

而且我需要在键入时获取`value`输入的当前值，我面临的问题是，如果我键入`pass`并执行 console.log，我将得到的内容将`pas`丢失最后一个字符；但我需要整个字符串`pass`

你可以在这里看到一个现场演示：http: [//jsfiddle.net/HjVHV/1/](http://jsfiddle.net/HjVHV/1/)有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T18:25:50.303

您应该使用该`keyup`事件：

```
$('input[name=in]').keyup(function()
{
  // $(this).val()
}); 
```

在里面你得到你刚刚输入的值

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T18:26:01.800

你应该使用 `keyup`：

```
$('input').keyup(function(){... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T18:30:50.583

如果需要，您可以继续使用`.keydown()`，只需使用 追加按下的字符`.fromCharCode()`，如下所示：

```
$('input').keydown(function(e){
    $('.output').html($('input').val() + String.fromCharCode(e.which).toLowerCase());
}); 
```

查看工作[**演示**](http://jsfiddle.net/gnel/HjVHV/8/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T18:32:42.483

您应该使用 key up 事件。

这是基于您的 js fiddle 的示例代码

```
$('input').keyup(function(){
    $('.output').html($('input').val());
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T20:09:34.250

这是你想要的？

[http://jsfiddle.net/qr59c/1/](http://jsfiddle.net/qr59c/1/)

[我从http://forum.jquery.com/topic/can-change-handle-immediate-text-changes#14737000000967875](http://forum.jquery.com/topic/can-change-handle-immediate-text-changes#14737000000967875)复制并修改了以下代码块

```
$('#input').each(function() {
 // Save current value of element
 $(this).data('oldVal', $(this));

 // Look for changes in the value
 $(this).bind("propertychange keyup input paste", function(event){
    // If value has changed...
    if ($(this).data('oldVal') != $(this).val()) {
     // Updated stored value
     $(this).data('oldVal', $(this).val());

     // Do action
     $('.output').html($('#input').val());
    }
 });
}); 
```

# coffeescript - 为什么我的发射没有被调用？

> ID：13334064
> 
> 赞同：-1
> 
> 时间：2012-11-11T18:24:57.470
> 
> 标签：coffeescript, socket.io

客户端和服务器连接得很好。由于某种原因，我的客户端上的发射没有正确触发。我正在尝试让 testEmit 和 testEmit2 正常工作。

这是我的服务器：

```
express = require 'express'
mongo = require 'mongodb'
app = express()
server = (require 'http').createServer(app)
io = (require 'socket.io').listen(server)

server.listen(8080)

app.use(express.static(__dirname + '/public'))

# db = new mongo.Db("documentsdb", new mongo.Server("localhost", 27017, auto_reconnect: true), {safe:true})

io.sockets.on 'connection', (socket) ->
    console.log 'Socket.io is connected!'
    #This returns an array of documents sorted via date by decreasing order. (Most recent documents first.)
    socket.on 'loadRecentDocuments', ->
        console.log 'Loading most recent documents.'
        db.collection 'documents', (err, collection) ->
            collection.find().sort(dateAdded: -1).toArray (err, documents) ->
                #This emit is recieved at index.html where a javascript function sendDocuments manages the documents.
                socket.emit 'sendDocuments', documents
                return

    #The index.html provides the code data from the search box via a javascript.
    io.sockets.on 'findDocuments', (code) ->
        #Returns an array of documents with the corresponding class code.
        documentCodeToSearch = code
        console.log 'Retreaving documents with code: ' + documentCodeToSearch
        db.collection 'documents', (err, collection) ->
            collection.find(code:documentCodeToSearch).toArray (err, documents) ->
                socket.emit 'sendDocuments', documents
                return

    #Uploads a document to the server. documentData is sent via javascript from submit.html
    io.sockets.on 'addDocument', (documentData) ->
        console.log 'Adding document: ' + documentData
        db.collection 'documents', (err, collection) ->
            collection.insert documentData, safe: true
            return

    #Test socket.io
    io.sockets.on 'testEmit', ->
        console.log('Emit recieved.')
        socket.emit 'testEmit2', 'caca'
        return

app.listen 1337
console.log "Listening on port 1337..." 
```

这是我的客户：

```
<!doctype HTML>
<html>
<head>
    <title>ProjectShare</title>
    <script src="http://localhost:8080/socket.io/socket.io.js"></script>
    <script src = "http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script>
        //Make sure DOM is ready before mucking around.
        $(document).ready(function()
        {
            console.log('jQuery entered!');
            var socket = io.connect('http://localhost:8080');   
            socket.emit('testEmit');
            socket.on('testEmit2', function(data)
            {
                console.log('Emit recieved at browser.');
                console.log(data);
            });
            console.log('jQuery exit.');
        });
    </script>
</head>
<body>
    <ol>
        <li><a href="index.html">ProjectShare</a></li>
        <li><a href="guidelines.html">Guidelines</a></li>
        <li><a href="upload.html">Upload</a></li>
        <li>
            <form>
                <input type = "search" placeholder = "enter class code"/>
                <input type = "submit" value = "Go"/>
            </form>
        </li>
    </ol>
    <ol id = "documentList">
    </ol>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:56:53.747

尝试将 io.sockets 更改为 socket on

```
io.sockets.on 'findDocuments', (code) -> 
```

&&

```
 io.sockets.on 'testEmit', -> 
```

这应该够了吧

# powershell - 如果不合格，如何制作扩展文件名参数以包含其路径的 powershell 函数？

> ID：13334065
> 
> 赞同：3
> 
> 时间：2012-11-11T18:24:58.117
> 
> 标签：powershell, glob

在 Windows 中启动 notepad++ 或许多其他 GUI 应用程序，它们将在命令行上接受文档的完全限定文件名，但如果它们不是完全限定的，则不接受它们，通常在 DOS/Windows 批处理文件中完成，如下所示：

```
 @echo off
 start "notepad++" "C:\Program Files (x86)\Notepad++\notepad++.exe" %* 
```

上面，如果保存为“npp.cmd”将让你输入“npp foo.txt”，它会工作。请注意，如果没有 npp.cmd，即使输入 exe 的完整路径，但不完全限定要编辑的文件也不起作用，如下所示：

```
 "C:\Program Files (x86)\Notepad++\notepad++.exe" foo.txt 
```

然而，这确实有效：

```
 "C:\Program Files (x86)\Notepad++\notepad++.exe" c:\users\warren\foo.txt 
```

轻松解决此限制的一种方法是制作一个批处理文件 (.cmd)，如该文件顶部所示。我正在学习 PowerShell，并试图在顶部的批处理文件中找到与“start .... %*”咒语等效的魔法。我相信它必须是一个“powershell函数”。

这是我到目前为止所拥有的：

```
new-item -path alias:nppapp -value "C:\Program Files (x86)\Notepad++\notepad++.exe"
function npp { nppapp $args } 
```

上面是等价的，最后只是一个别名，因为`$args`真的不等价`%*`，因为它不做参数扩展。我想我需要这样的东西：

```
new-item -path alias:nppapp -value "C:\Program Files (x86)\Notepad++\notepad++.exe"
function npp { nppapp globexpand($args) } 
```

`globexpand`当然，它是一个占位符，用于某种扩展/通配例程，我还没有在 PowerShell 中找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:40:44.850

试试这个：

```
new-item -path alias:nppapp -value "C:\Program Files (x86)\Notepad++\notepad++.exe"

function npp { nppapp (join-path -Path $pwd -ChildPath $args[0]) } 
```

`$pwd`是一个自动变量，当前工作`path`作为值

编辑：

```
function npp { 
if ($args[0] -match '.:\\.+')
{
nppapp $args[0]
}
else
{
nppapp (join-path -Path $pwd -ChildPath $args[0]) }
} 
```

# android - onTouchEvent Action_Move 断断续续的交互

> ID：13334066
> 
> 赞同：2
> 
> 时间：2012-11-11T18:24:59.650
> 
> 标签：android, surfaceview, touch-event

我有以下代码：

```
public boolean onTouchEvent(MotionEvent event) {

            fingerSize = event.getSize();
            fingerPosX = event.getX();
            fingerPosY = event.getY();
            switch (event.getAction()) {

            case MotionEvent.ACTION_DOWN: {

                start = true;
                break;

            }

            }
            return true;
        } 
```

我使用了fingerSize、fingerPosX和fingerPosY这三个变量来画一个圆：

```
canvas.drawCircle(fingerPosX, fingerPosY, fingerSize
                    * fingersizeCorrection, paint); 
```

所以基本上，当我用手指在屏幕上移动时，圆圈会跟随我的手指。问题是圆圈在试图跟随我的手指时的运动非常不稳定。

如何改进以使其更加流畅？

这一切都发生在 SurfaceView 中，我还添加了这样的 fps 限制器：

```
int FRAMES_PER_SECOND = 60;
        int SKIP_TICKS = 1000/FRAMES_PER_SECOND;
        long next_game_tick = timer.getElapsedTimeMil();
        int sleep_time = 0;

next_game_tick += SKIP_TICKS;
                sleep_time = (int) (next_game_tick-timer.getElapsedTimeMil());
                if(sleep_time >= 0){
                    try {
                        Thread.sleep(sleep_time);
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
                else{

                } 
```

# sql-server - SQL Server 2005：中止查询导致死锁

> ID：13334071
> 
> 赞同：-1
> 
> 时间：2012-11-11T18:25:33.680
> 
> 标签：sql-server, tsql, sql-server-2005

在具有默认配置的 SQL Server 2005 中，read_committed 隔离级别和 read_committed 快照关闭。查询会因为死锁而中止吗？如果是这样，为什么？

如果我将隔离级别提高到可重复读取会怎样？

根据 msdn 文件，任何级别的隔离都可能出现这种情况：

```
Transaction T_1 acquires a share lock on row 1.
Transaction T_2 acquires a share lock on row 2.
Transaction T_1 now requests an exclusive lock on row 2 ( because it wants to change it), and is blocked until transaction T_2 finishes and releases the share lock it has on row 2.
Transaction T_2 now requests an exclusive lock on row 1 ( because it wants to change it), and is blocked until transaction T_1 finishes and releases the share lock it has on row 1. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:44:12.863

SQL Server 使用几种类型的锁——如果它**需要写入数据**（例如插入新数据或更新现有行），它将需要使用**排他锁——总是在任何隔离级别**。

由于您有独占锁在起作用，因此总是有可能发生死锁 - 进程 A 持有资源 A 的独占锁并需要对资源 B 的独占访问，而另一个进程 B 拥有资源 B 的独占锁并想要访问到资源 A。

这可能发生在**任何隔离级别**（即使使用`READ UNCOMMITTED`，SQL Server 将取出排他锁来写入数据！）我的观点是：隔离级别越严格，这些锁往往会停留的时间越长，因此机会就越高变成可能发生死锁。

如果您还没有 - 您应该阅读、重新阅读和重新阅读以下文章，直到您充分了解 SQL Server 锁定机制：

*   [MSDN：了解 SQL Server 中的锁定](http://msdn.microsoft.com/en-us/library/aa213039%28v=sql.80%29.aspx)
*   [SQL Server 中的锁定简介](http://www.sqlteam.com/article/introduction-to-locking-in-sql-server)
*   [了解 SQL Server 锁定](http://www.mssqltips.com/sqlservertip/1968/understanding-sql-server-locking/)
*   [处理 SQL Server 中的死锁](http://www.simple-talk.com/sql/database-administration/handling-deadlocks-in-sql-server/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:24:14.120

我建议您阅读文档以大致了解锁。

唯一不获取锁的语句类型是未提交读（脏）。
出于这个原因，我经常使用 read uncommitted 。

已提交的读取不使用排他锁，但它确实阻止了排他锁。
会不会导致死锁？
理论上它不会，因为更新总是可以等待读取提交的锁被清除。
在现实生活中，如果查询非常慢，等待排他锁可能会超时，但从技术上讲可能不是死锁。

所以查询可能会因为死锁而中止，但我认为查询不会直接导致死锁。

如果您有可能死锁的更新，那么大量读锁的存在会增加更新死锁的机会。考虑一个非常活跃的表。当更新 A 等待页面上的 readlock 清除时，更新 B 在同一页面上发挥作用。更新 A 和更新 B 死锁。如果更新 A 没有等待读取锁被清除，它就会进出。

# drupal - Drupal 7 - 删除自己的帐户

> ID：13334072
> 
> 赞同：0
> 
> 时间：2012-11-11T18:25:36.613
> 
> 标签：drupal, drupal-7

我刚刚安装了 drupal-7.16。我想拥有以下功能： 作为非管理员用户，我想删除/阻止我自己的帐户。

可能吗？我找到了用户删除模块，但没有 drupal 7.x 的版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T18:55:26.290

好的，我发现它可能来自drupal属性。

只需以管理员身份登录，转到人员 -> 权限并为经过身份验证的用户启用“取消自己的用户帐户”权限。

# sql-server - EXECUTE AS vs SELECT FROM 链接服务器

> ID：13334073
> 
> 赞同：0
> 
> 时间：2012-11-11T18:25:37.730
> 
> 标签：sql-server, oracle, oracle11g, linked-server

我有一个与 MS SQL 集成的 Oracle 服务器作为链接服务器。目前我正在研究查询优化。我发现查询如下：

```
SELECT colName1, colName2, .. 
  FROM ORACLE.TBL_TBLENAME 
 WHERE something = @something 
```

工作非常缓慢。另一方面，同样的查询写成：

```
EXECUTE ('SELECT colName1, colName2, .. 
            FROM TBL_TBLENAME 
           WHERE something :something',@something) at ORACLE 
```

工作得更快。

我关心的是执行计划。对于第一个查询，估计子树成本是 0.16，第二个是 3.36。第二个查询执行“远程扫描”。我不知道这是好还是不好。

该查询应该经常运行（1 分钟内大约有 20 个查询）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:38:45.680

给定你的执行计划（我是一个 oracle 人而不是 sql server 人），第一个似乎是在 sql server 端进行全表扫描和过滤（计算标量？），而第二个是 sumiting过滤器到 oracle 和这么快。

oracle 表上的统计信息是最新的（也许它认为表中只有几行，所以 sql server 决定最好只获取整个表并在本地进行处理？）并且是否有任何直方图参与“某事”？

如果第二个对你有好处，真的有问题吗？

# haskell - Haskell 中的基本 I/O 性能

> ID：13334074
> 
> 赞同：4
> 
> 时间：2012-11-11T18:25:44.407
> 
> 标签：haskell, ghc

另一个微基准：为什么这个“循环”（用`ghc -O2 -fllvm`7.4.1 编译，Linux 64bit 3.2 内核，重定向到`/dev/null`）

```
mapM_ print [1..100000000] 
```

`C`比使用`write(2)`非缓冲系统调用的简单 for 循环慢约 5 倍？我正在尝试收集 Haskell 陷阱。

*即使是这种缓慢的 C 解决方案也比 Haskell 快得多*

```
int i;
char buf[16];
for (i=0; i<=100000000; i++) {
    sprintf(buf, "%d\n", i);
    write(1, buf, strlen(buf));
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-11T19:04:03.200

好的，在我的机器上，每次编译的 C 代码`gcc -O3`运行大约需要 21.5 秒，原始的 Haskell 代码大约需要 56 秒。所以不是 5 的因数，略高于 2.5。

第一个重要的区别是

```
mapM_ print [1..100000000] 
```

使用`Integer`s，这有点慢，因为它涉及预先检查，然后使用装箱`Int`的 s，而转换的`Show`实例`Int`在未装箱`Int#`的 s 上工作。

添加类型签名，以便 Haskell 代码在`Int`s 上工作，

```
mapM_ print [1 :: Int .. 100000000] 
```

将时间缩短到 47 秒，略高于 C 代码所用时间的两倍。

现在，另一个很大的区别是它`show`产生了一个链表，`Char`并且不只是填充一个连续的字节缓冲区。那也比较慢。

然后使用 s 的链表`Char`填充字节缓冲区，然后将其写入`stdout`句柄。

因此，Haskell 代码比 C 代码做了更多、更复杂的事情，因此花费更长的时间也就不足为奇了。

诚然，希望有一种简单的方法可以更直接（因此更快）输出这些东西。但是，处理它的正确方法是使用更合适的算法（也适用于 C）。一个简单的改变

```
putStr . unlines $ map show [0 :: Int .. 100000000] 
```

所花费的时间几乎减半，如果想要真正快速，可以使用更快的`ByteString`I/O 并有效地构建输出，如[applicative 的答案](https://stackoverflow.com/a/13340501/1011995)所示。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-11T22:46:34.467

在我的（相当缓慢和过时的）机器上，结果是：

```
$ time haskell-test > haskell-out.txt
real    1m57.497s
user    1m47.759s
sys     0m9.369s
$ time c-test > c-out.txt
real    7m28.792s
user    1m9.072s
sys     6m13.923s
$ diff haskell-out.txt c-out.txt
$ 
```

（我已经修复了列表，以便 C 和 Haskell 都以 0 开头）。

是的，你没看错。Haskell 比 C 快几倍。或者更确切地说，通常缓冲的 Haskell 比具有 write(2) 非缓冲系统调用的 C 快。

（当测量输出到 /dev/null 而不是真正的磁盘文件时，C 大约快 1.5 倍，但谁在乎 /dev/null 性能？）

技术数据：Intel E2140 CPU，2 核，1.6 GHz，1M 缓存，Gentoo Linux，gcc4.6.1，ghc7.6.1。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-12T08:37:39.627

将巨型字节串交给操作系统的标准 Haskell 方法是使用构建器 monoid。

```
import Data.ByteString.Lazy.Builder  -- requires bytestring-0.10.x
import Data.ByteString.Lazy.Builder.ASCII -- omit for bytestring-0.10.2.x
import Data.Monoid
import System.IO

main = hPutBuilder stdout $ build  [0..100000000::Int]

build = foldr add_line mempty
   where add_line n b = intDec n <> charUtf8 '\n' <> b 
```

这给了我：

```
 $ time ./printbuilder >> /dev/null
 real   0m7.032s
 user   0m6.603s
 sys    0m0.398s 
```

与您使用的 Haskell 方法相反

```
$ time ./print >> /dev/null
real    1m0.143s
user    0m58.349s
sys 0m1.032s 
```

`mapM_ print`也就是说，与丹尼尔菲舍尔令人惊讶的失败主义相比，做得比 好九倍是孩子的游戏 。您需要知道的一切都在这里：[http](http://hackage.haskell.org/packages/archive/bytestring/0.10.2.0/doc/html/Data-ByteString-Builder.html) ://hackage.haskell.org/packages/archive/bytestring/0.10.2.0/doc/html/Data-ByteString-Builder.html我不会将它与您的 C 进行比较，因为我的结果比 Daniel 和 nm 慢得多，所以我认为出了点问题。

编辑：使导入与所有版本一致。`bytestring-0.10.x`在我看来，以下内容可能更清楚——`Builder`相当于`unlines . map show`：

```
main = hPutBuilder stdout $ unlines_ $ map intDec [0..100000000::Int]
 where unlines_ = mconcat . map (<> charUtf8 '\n') 
```

# c# - c# 使用 Skydrive REST API 的 PUT 请求出现问题

> ID：13334076
> 
> 赞同：1
> 
> 时间：2012-11-11T18:25:46.323
> 
> 标签：c#, rest, onedrive

我正在尝试通过 REST API 将文件上传到 SkyDrive。我一直在使用以下代码，但我不断收到“（415）不支持的媒体类型”。错误：

```
 var requestUriFile =
                             new StringBuilder("https://apis.live.net/v5.0/<folderid>/files/testfile.txt");
        requestUriFile.AppendFormat("?access_token={0}", accessTokenM);

        byte[] arr = System.IO.File.ReadAllBytes("C:\\temp\\testFile.txt");
        HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(requestUriFile.ToString());
        request.Method = "PUT";
        request.ContentType = "text/plain";
        request.ContentLength = arr.Length;
        Stream dataStream = request.GetRequestStream();
        dataStream.Write(arr, 0, arr.Length);
        dataStream.Close();
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        string returnString = response.StatusCode.ToString(); 
```

我也尝试过使用 RestSharp 来做到这一点，但我遇到了类似的问题。当我运行下面的代码时，我收到异常“提供的 Content-Type 标头 'multipart/form-data;boundary\u003d--------------------- --------28947758029299' 不受支持”。

```
 byte[] arr = System.IO.File.ReadAllBytes("C:\\temp\\testFile.txt");

        var client = new RestClient("https://apis.live.net/v5.0/");
        var request = new RestRequest(Method.PUT);
        request.Resource = "<folderId>/files/testfile.txt?access_token=" + accessTokenM;
        request.AddHeader("content-type", "text/plain;");
        request.AddFile("filename", arr, "testfile.txt", "text/plain");

        var responseIn = client.Execute(request); 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T19:00:59.373

好的，我解决了。显然，我需要做的就是将 ContentType 留空并且它可以工作。谢谢 ：）

# css - 为什么我似乎无法定位这个 asp:button？

> ID：13334079
> 
> 赞同：2
> 
> 时间：2012-11-11T18:25:51.320
> 
> 标签：css, css-selectors

我目前正在设计一个网站的样式，并且遇到了一些常规。

我正在尝试定位和设置样式：

```
<asp:Button ID="cmdUpdate" runat="server" Text="Update Details" CssClass="update_btn" /> 
```

使用这个 CSS：

```
div#account .update_btn {
width:108px;
height:27px;
background:url("/furniture/images/buttons/update.jpg") no-repeat 0 0;
clear:both;
float:left;
} 
```

但是，当我检查 firebug 中的按钮时，它不会出现。它目前由下面的代码设置样式，但上面的代码甚至没有出现。

```
div#account input {
border: 1px solid #ccc;
width:150px;
padding:5px 0 5px 10px;
margin: 0 0 10px 0;
float:right;
} 
```

我不了解 ASP，因此无法进行更改，也无法使用 input.button[type="submit"]，因为 IE7 不支持它。

任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T18:31:45.530

在你的风格中加上一个逗号，它应该可以正常工作。

```
div#account, .update_btn { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T18:38:55.293

尝试这个

```
div#account input.update_btn {
width:108px;
height:27px;
background:url("/furniture/images/buttons/update.jpg") no-repeat 0 0;
clear:both;
float:left;
} 
```

# php - 需要帮助来改进我的聊天系统

> ID：13334081
> 
> 赞同：0
> 
> 时间：2012-11-11T18:26:07.950
> 
> 标签：php, jquery, mysql, chat

我已经使用 jQuery、PHP/MySQL 开发了一个像“omegle.com”这样的随机聊天系统，但我想改进这个网站。在当前阶段，它向 PHP 文件发送请求以显示新消息。jQuery代码如下

```
function load_msg(){

   $.ajax({
        url: 'show_msg.php',
        success: function(result){
            $("#wait").css("display","none");  
            $("#chat_canvas").html(result);
        }
    });

}

setInterval("load_msg()",3000); 
```

但它显示所有消息，我希望能够只显示新消息。但我无法理解如何做到这一点。

我举个例子，

假设我在文本区域中写了“Hello xyz”。它会将消息“Hello xyz”发送到一个 php 文件，该 php 文件会将其存储在数据库中。接下来，通过向 php 文件发送请求来显示此消息并返回结果。结果，它显示“Hello xyz”。还行吧。但是如果我发送“你好吗？”，那么它将同时加载“你好 xyz”和“你好吗？”。我不想再次加载“Hello xyz”，因为它之前已经加载过了。我只想加载尚未加载的新消息。我怎样才能做到这一点？？？

我很抱歉我的英语不好，英语不是我的母语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T18:33:40.993

您可以发送上次查看的消息或 ID 的时间戳。使用 json 重写您的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T18:28:49.453

您可以向表中添加另一列，以指定（通过布尔值）消息是否已显示。例如，当第二个 PHP 文件发出获取消息的请求时，它可以为它刚刚发送到客户端的每一列将该列设置为 1（其中 1 = 显示），并忽略已经设置为 1 的每一列。

详细地说，您可能有一个这样的查询，它会更新数据库中满足所有术语的那一行（以确保它被显示给正确的客户端）。之后，您可以获得所有受影响的行，然后在页面上返回它们（然后由 Javascript 检索并显示给客户端）。

```
UPDATE `table` SET `displayed` = 1 WHERE /* search terms here */ 
```

重要的部分是让所有受影响的人，最好使用`PDO`or `mysqli`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T18:36:52.987

您也可以 `limit 0,1`输入您当前的查询

# bash - 用于创建多个目录的 Shell 脚本

> ID：13334086
> 
> 赞同：3
> 
> 时间：2012-11-11T18:26:23.233
> 
> 标签：bash, shell

我正在尝试创建一个文件层次结构来存储数据。我想为每个数据采集会话创建一个文件夹。该文件夹有五个子文件夹，名称如下。我在下面的代码尝试给出了一个错误，但我不知道如何纠正它。

**代码**

```
 #!/bin/sh
 TRACES = "/Traces"
 LFPS = '/LFPS'
 ANALYSIS = '/Analysis' 
 NOTES = '/Notes'
 SPIKES = '/Spikes'

 folders=($TRACES $LFPS $ANALYSIS $NOTES $SPIKES)
 for folder in "${folders[@]}"
  do
    mkdir $folder
  done 
```

**错误** 声明变量时出现错误。如上所述，`bash`翻转错误`Command not found`。相反，如果我将文件名声明为`TRACES = $('\Traces')`，`bash`则翻转错误`No such file or directory`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T18:29:50.900

删除变量名称和值之间的空格：

```
#!/bin/sh
TRACES="/Traces"
LFPS='/LFPS'
ANALYSIS='/Analysis' 
NOTES='/Notes'
SPIKES='/Spikes'

folders=($TRACES $LFPS $ANALYSIS $NOTES $SPIKES)
for folder in "${folders[@]}"
 do
   mkdir $folder
 done 
```

使用空格，`bash`将其解释为

```
COMMAND param1 param2 
```

与`=`作为`param1`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-11T19:00:59.593

我将修复的“变量分配周围没有空格”部分作为给定的。

使用数组表示法似乎有点矫枉过正。允许名称中可能存在空格，您可以使用：

```
for dir in "$TRACE" "$LFPS" "$NOTES" "$PASS"
do mkdir "$dir"
done 
```

但即使这样也很浪费：

```
mkdir "$TRACE" "$LFPS" "$NOTES" "$PASS" 
```

如果您担心目录可能存在，您可以通过以下方式避免错误消息：

```
mkdir -p "$TRACE" "$LFPS" "$NOTES" "$PASS" 
```

`-p`如果路径较长并且可能缺少某些中间目录，该选项也很有价值。如果您确定名称中不会有空格，则双引号成为可选的（但它们安全且便宜，因此您不妨使用它们）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-11T18:37:49.630

此外，如果文件夹存在或不存在，您还需要事先检查。您也可以随时使用 set -x 调试 shell 脚本，您可以使用“mkdir -p”来解决问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-11T18:33:38.447

我进行了以下更改以使您的脚本运行。

作为评论评论，创建挂在根文件系统之外的此类文件夹是不寻常的。

```
#!/bin/sh
TRACES="/Traces"
LFPS='/LFPS'
ANALYSIS='/Analysis'
NOTES='/Notes'
SPIKES='/Spikes'

folders="$TRACES $LFPS $ANALYSIS $NOTES $SPIKES"
for folder in $folders
do
   mkdir $folder
done 
```

从初始变量分配中删除了空格，我还简化了 for 循环，以便迭代`folders`字符串中的单词。

# mootools - 在 Mootools 中加载时加载 ID

> ID：13334089
> 
> 赞同：0
> 
> 时间：2012-11-11T18:26:36.173
> 
> 标签：mootools

我创建了一个 mootool 灯箱，当我们点击时我的灯箱出现

```
<a id="HitIt">Click Here</a> 
```

我希望我的灯箱在页面加载时打开....请帮助我...谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:53:21.817

当您单击链接时，您在 JavaScript 中所做的任何事情都将其移动到 domReady 函数中。

```
window.addEvent ('domready', function(){
     // add code
}); 
```

# java - 如何显示来自 JButton 的报告

> ID：13334091
> 
> 赞同：0
> 
> 时间：2012-11-11T18:27:12.047
> 
> 标签：java, swing, jasper-reports

我正在开发一个简单的数据库应用程序，其中*Java*作为前端，*MySQL*作为我的后端数据库。我正在尝试使用*iReport*。现在我有一个使用*Netbeans IDE创建的**Java*表单。我想在该表单中有一个*JButton*，当我按下该按钮时，我应该得到一个报告，上面显示一些值。

 **请帮助我实现这一目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T18:41:48.593

只需添加`ActionListener`一个`JButton`：

```
JButton btn=new JButton("Do something");

btn.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            // do something for button 
        }
}); 
```

如果您希望 Netbeans 为您执行此操作：

*   将 a`JButton`从*调色板*拖到您的容器中（如果您没有看到它，请选择 Windows > Palette 打开 Palette。您使用 Palette 将 UI 组件拖放到设计区域）

*   只需在设计器视图中双击有`JButton`问题的，它就会自动创建一个`ActionListener`并覆盖`actionPerformed`. 在它创建的方法中，您可以在这里完成工作。它应该生成如下内容：

    ```
    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
         //TODO: Add your handling code here:
    } 
    ```**

# c - 如何编写makefile以使用-S和-c进行编译？

> ID：13334093
> 
> 赞同：3
> 
> 时间：2012-11-11T18:27:32.293
> 
> 标签：c, gcc, makefile

我有一个源文件`test.c`和它的头`test.h`文件，一个文件`main.c`和`makefile`. 我想设置我的makefile，以便它（1）编译`test.c`以构建可执行文件`test.o`，并且（2）编译`test.c`以打印汇编代码以`test.s`使用`-S`标志。

我尝试按照我认为正确的方式设置生成文件，但这当然不会实际运行最后`test.s`一行。

```
FLAGS = -c -Wall
CC = gcc
ASM = -S

all : optimize
optimize: main.o test.o
    $(CC) main.o test.o -o optimize
main.o: main.c test.h
    $(CC) $(FLAGS) main.c
test.o: test.h test.c
    $(CC) $(FLAGS) test.c
test.s: test.h test.c
    $(CC) $(ASM) -Wall test.c 
```

谁能告诉我我应该如何以不同的方式构建它来创建**test.s**和 test.o？

我尝试将`optimize:`行和以下行更改为：

```
optimize: main.o test.o test.s
    $(CC) main.o test.o test.s -o optimize 
```

但链接器给出了错误`multiple definition of 'test'`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T18:28:53.210

只需将 test.s 添加到以 . 开头的行`optimize:`。

这样做是将规则添加`test.s`到优化行的依赖项中。

您也可以按照 Vaughn Cato 的建议将其添加到 all 行。

重要的是要知道规则 test.s 和文件 test.s 之间存在差异

您可以将任何您想要的名称作为规则的名称，但按照惯例，您通常只使用文件名。

这是一个示例 Makefile ，它将执行您想要的操作。我把 dep 放在 all 下，这样你就可以了`make asm`，为了清楚起见，我还将规则名称更改为 asm。

```
FLAGS = -c -Wall
CC = gcc
ASM = -S

all : optimize asm
optimize: main.o test.o
    $(CC) main.o test.o -o optimize
main.o: main.c test.h
    $(CC) $(FLAGS) main.c
test.o: test.h test.c
    $(CC) $(FLAGS) test.c
asm: test.h test.c
    $(CC) $(ASM) -Wall test.c -o test.s 
```

最后，因为您似乎对 Makefiles 的工作方式有点不放心，（老实说，我不怪您），我建议阅读本教程： http: [//mrbook.org/tutorials/make/](http://mrbook.org/tutorials/make/)

# php - htaccess 和 css 文件

> ID：13334095
> 
> 赞同：3
> 
> 时间：2012-11-11T18:28:04.767
> 
> 标签：php, html, css, .htaccess, xampp

我有这个项目：

![在此处输入图像描述](../Images/31436301e9e738d7e8325cdb2326ae8c.png)

在索引中，我使用以下代码检查 url：

```
if( isset( $_GET['url'] ) ) {
   if( file_exists( 'classes/layout/'.$_GET['url'].'.php' ) ) {
    require_once 'classes/layout/'.$_GET['url'].'.php';
   } 
} 
```

在我的 .htacces 中：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule .* - [L]
RewriteRule ^(.*?)$ index.php?url=$1&%{QUERY_STRING} [L] 
```

这很好用。何时转到示例：127.0.0.1/test/pages/edit 索引包括 edit.php 但在索引中我使用了一个名为 test.css 的 css 文件，它使整个 html 背景变为红色。

如果我去 127.0.0.1/test/ 我看到整个背景都是红色的。但是当我去 127.0.0.1/test/pages/edit 它是白色的。我检查了css文件的url，我得到了这个：

127.0.0.1/test/ = 127.0.0.1/test/cache/css/test.css

127.0.0.1/test/pages/edit = 127.0.0.1/test/pages/cache/css/test.css

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:26:44.823

问题是你没有给出正确的css路径。始终尝试从基本 url 调用样式/脚本，如下所示：希望这会有所帮助。

```
 <?php 
if($_SERVER['REMOTE_ADDR'] == '127.0.0.1')
   define("SITEROOT","http://localhost/test/"); // base to your web directory ie,www or htdocs
    ?>
    //call style in this manner
    <link href="<?php echo SITEROOT; ?>Sourcefiles/cache/css/test.css" rel="stylesheet" type="text/css" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T20:35:48.557

您需要使 css 链接成为绝对链接（以 a 开头`/test/`）或通过将其添加到页面标题来为所有相对链接添加基础：

```
<base href="/test/"> 
```

（基本 URI 可能需要调整，但看起来像您想要的那样`/test/`）

发生这种情况的原因是浏览器会根据加载的 URL 猜测 URI-base 是什么。当您放入`http://127.0.0.1/test/`浏览器时，浏览器假定 URI 基础是`/test/`并且所有相关链接都将其附加到前面。但是，当您放入`http://127.0.0.1/test/pages/edit`浏览器时，它会假定基础是`/test/pages/`，因此您的相对链接会在前面附加错误的基础。

# java - 弹簧依赖

> ID：13334103
> 
> 赞同：2
> 
> 时间：2012-11-11T18:29:01.337
> 
> 标签：java, spring, maven, maven-3, dependency-management

我刚刚发现一件令人生畏的事情。spring 依赖坐标​​有两个版本。

项目依赖于 spring mvc 和 spring flow。有两组并行的依赖项。

Spring MVC 具有以下方案的依赖项：`org.springframework:spring-asm`.

Spring Flow 具有以下方案的依赖项：`org.springfrmaework:org.springframework.asm`.

为什么有两组不同的相同依赖项？如何克服？

```
<dependency>
        <groupId>org.springframework.webflow</groupId>
        <artifactId>org.springframework.webflow</artifactId>
        <version>2.3.1.RELEASE</version>
    </dependency>

<dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>3.0.4.RELEASE</version>
    </dependency> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T18:43:01.563

这基本上是您正在使用的工件的问题：

```
<dependency>
    <groupId>org.springframework.webflow</groupId>
    <artifactId>org.springframework.webflow</artifactId>
    <version>2.3.1.RELEASE</version>
</dependency> 
```

是来自[SpringSource Enterprise Bundle Repository](http://ebr.springsource.com/repository/app/)的工件，并且这些工件符合 OSGi。我引用：

> 欢迎来到 SpringSource Bundle 存储库。在这里，您会发现开发 Spring 应用程序时常用的数百个开源企业库的 OSGi 就绪版本。

另一方面，你有：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-webmvc</artifactId>
    <version>3.0.4.RELEASE</version>
</dependency> 
```

是来自[maven 存储库](http://mvnrepository.com/artifact/org.springframework/spring-webmvc/3.0.4.RELEASE)的标准工件。

[org.springframework.asm](http://ebr.springsource.com/repository/app/bundle/version/detail?name=org.springframework.asm&version=3.0.4.RELEASE&searchType=bundlesBySymbolicName&searchQuery=org.springframework.asm)

是用于 OSGi 的 asm 工件的修补版本。

解决此问题的最佳解决方案是仅使用 SEBR 存储库工件。

我推荐这个，因为有一次我对来自 maven 中央仓库的 jars 有问题（它们已损坏），所以我尝试将 SEBR 用于任何 spring 依赖项。[但我从文档中](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/overview.html#dependency-management)引用：

> 如果 OSGi 对您来说不重要，那么任何一个地方都可以，尽管它们之间存在一些优点和缺点。一般来说，为您的项目选择一个地方或另一个地方；不要混合它们。这一点尤其重要，因为 EBR 工件必须使用与 Maven Central 工件不同的命名约定。

# java - 在java中，可以在不使用数组的情况下在另一个方法的循环中调用/调用方法吗？

> ID：13334105
> 
> 赞同：0
> 
> 时间：2012-11-11T18:29:15.460
> 
> 标签：java, loops, methods, return-value

```
public static double numBeers()
{
    String numBeersStr;
    double numBeers;

    numBeersStr = JOptionPane.showInputDialog("How many beers would you like?");

    numBeers = Double.parseDouble(numBeersStr);

    if (numBeers < 3 || numBeers > 6)
    {
        numBeersStr = JOptionPane.showInputDialog("You must pick 3-6 beers");
        numBeers = Double.parseDouble(numBeersStr);
    }

    return numBeers;
}

public static double beerPrice(double theBeerBrand)
{

    double beer = 0;
    final double LAGIMRED = 1.90;  
    final double DESINIPA = 2.00;
    final double BELBEBRN = 1.80;
    final double SCHOATST = 2.50;
    final double BOULFHSAISN = 2.75;
    final double GANDANCPRTR = 1.75;

    if (theBeerBrand == 1)
        beer = LAGIMRED;

    else if (theBeerBrand == 2)
        beer = DESINIPA;

    else if (theBeerBrand == 3)
        beer = BELBEBRN;

    else if (theBeerBrand == 4)
        beer = SCHOATST;

    else if (theBeerBrand == 5)
        beer = BOULFHSAISN;

    else 
        beer = GANDANCPRTR;        

    return beer;

}

public static double beerBrand(double theNumBeers )
{   
    String beerTypeStr;
    double count = 1, total = 0, beerType, beeer = 0;

    while (count <= theNumBeers)
    {    
        beerTypeStr = JOptionPane.showInputDialog("Please choose between these fine selections:\n1 - Lagunitas Imperial Red - $1.90\n2 - Deschutes Inversion IPA - $2.00\n3 - Bell's Best Brown Ale - 1.80\n4 - Schlafly's Oatmeal Stout - $2.50" +"\n5 - Boulevard's Farmhouse Saison - $2.75\n6 - Gandy Dancer Porter - $1.75");

            beerType = Double.parseDouble(beerTypeStr);
            // method to be invoked/called------> beeer = beerPrice(beerType);

        count++;
    }    

    total += beeer;

    return total; 
```

我正在尝试在 beerBrand 方法 while 循环中调用 beerPrice 方法。每次程序提示用户他们想要什么类型的啤酒时，都会将该类型的啤酒添加到总数中，然后再次询问该问题的次数与用户想要的啤酒数量相同。我很确定我解决了提示用户与他们想要的啤酒数量相同的次数的问题，我只是没有得到我想要的输出。

如果有人知道如何捕获这种类型的啤酒并将其添加到总数中，我将不胜感激，这样我就可以使用折扣价和最终价格的总数。我不想使用任何数组或更复杂的东西，因为这是一个没有涉及数组等的章节测试的练习程序。非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T18:31:49.920

您可以保留该行有效：

```
beeer = beerPrice(beerType); 
```

但是，您需要在每次循环时将价格添加到总价格中，因此将相应的行带回您的 while：

```
while (count <= theNumBeers) {    
    beerTypeStr = JOptionPane.showInputDialog(...);
    beerType = Double.parseDouble(beerTypeStr);
    beeer = beerPrice(beerType);
    total += beeer;

    count++;
} 
```

尽可能限制变量的范围也是一个好习惯——而且你`for`确实是 a，我想你通常会订购整瓶啤酒，所以你可以使用 a`int`而不是 a`double`来表示啤酒的数量。因此，您可以像这样重构您的方法：

```
public static double beerBrand(int theNumBeers) {   
    double total = 0;

    for (int count = 0; count < theNumBeers; count++) {    
        String beerTypeStr = JOptionPane.showInputDialog(...);
        double beerType = Double.parseDouble(beerTypeStr);
        total += beerPrice(beerType);
    }

    return total;
} 
```

注意：我尚未检查您的其余代码。

# android - 通过单击通知下拉菜单中的选项卡打开（警报）对话框

> ID：13334106
> 
> 赞同：1
> 
> 时间：2012-11-11T18:29:22.610
> 
> 标签：android, notifications, push-notification, google-cloud-messaging

我已经从示例中成功实现了 gcm，并且可以收到通知消息，但是当我从栏中向下拖动时，部分文本会出现在选项卡中。

单击选项卡并显示整个消息时，我无法弄清楚如何打开（警报）对话框。

任何人？来自荷兰的感谢！

```
protected void onMessage(Context arg0, Intent arg1) {
Log.i(TAG, "new message= ");
String ticker=arg1.getExtras().getString("ticker");
String subject=arg1.getExtras().getString("subject");
String message=arg1.getExtras().getString("message");

Vibrator vibrator = (Vibrator) arg0.getSystemService(Context.VIBRATOR_SERVICE);
vibrator.vibrate(1000);

String ns = Context.NOTIFICATION_SERVICE;
NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);
int icon = R.drawable.ic_launcher;
CharSequence tickerText = ticker;
long when = System.currentTimeMillis();
Notification notification = new Notification(icon, tickerText, when);
Context context = getApplicationContext();
CharSequence contentTitle = subject;
CharSequence contentText = message;
Intent notificationIntent = new Intent(this, FragmentActivity.class);
PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);
notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
final int HELLO_ID = 1;
mNotificationManager.notify(HELLO_ID, notification); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T04:37:15.747

`PendingIntent`需要 SystemUI 可以从包外部开始，因此请确保在清单中声明了该类。

更多信息可以在[通知指南](https://developer.android.com/guide/topics/ui/notifiers/notifications.html#NotificationResponse)中找到。

# list - Html 敏捷包标签选择

> ID：13334108
> 
> 赞同：0
> 
> 时间：2012-11-11T18:29:33.320
> 
> 标签：list, html-agility-pack

我需要处理列表标签以便从中提取数据。问题是我需要分别分析每个列表。我试过这样的事情：

```
List<HtmlAgilityPack.HtmlNode> tl = new List<HtmlNode (doc1.DocumentNode.SelectNodes("//ul")); 
```

我原以为每个 tl 元素都是单独的 ul 列表，但事实证明 tl 只有一个元素包含 html 文档中的所有 li 标签。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:00:26.653

我已经用以下代码解决了这个问题：

```
 foreach (HtmlAgilityPack.HtmlNode node in tk)
                                    {

                                        if (node.ParentNode.Name == "ul" || node.ParentNode.Name == "ol")
                                        {
                                            List<string> sh=new List<string>();
                                            var t = node.ParentNode.Elements("li");
                                            for(int i=0;i <t.Count();i++)
                                             sh.Add(t.ElementAt(i).InnerText);

                                            uoList.Add(sh);
                                        }
                                    } 
```

现在每个 uoList 列表成员代表一个 ul 或 ol 元素，其中包含该元素内的所有 li 元素。

# json - 使用 scala 玩框架 2：美化 json

> ID：13334111
> 
> 赞同：2
> 
> 时间：2012-11-11T18:29:51.477
> 
> 标签：json, scala, playframework-2.0

我正在使用对 json (http://www.playframework.org/documentation/latest/ScalaJson) 的 play framework 2 本机支持，并且我有一个 JsValue，我将其转换为字符串以将其保存到文本文件中，例如这个

```
val json: JsValue = [....]
Json.stringify(json) 
```

哪个工作正常，但会生成如下内容：

```
{"tokens":[{"id":"1000","token":"DON... 
```

我想知道是否有一种简单的方法可以生成这样的格式化 json

```
{
  "tokens":
    [
      {
        "id":"1000",
        "token":"DON... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T22:09:13.847

我使用 Liftweb JSON 包及其[`Printer`](http://scala-tools.org/mvnsites/liftweb-2.4/#net.liftweb.json.Printer%24)对象/特征。工作“相当”好：

```
import play.api._
import play.api.mvc._
import play.api.libs._, concurrent._, json._

import com.mongodb.casbah.Imports.{MongoConnection, MongoCursor, WriteConcern}
import com.mongodb.casbah.query.Imports._
import com.novus.salat.json._

import net.liftweb.json.{render => jsonRender, _}    

class Application extends Controller {

def getJson(id: String) = Action { implicit request =>
  val objPromise = Akka.future(Database.getById(id))
  Async {
    objPromise.orTimeout("Error", 1000).map { o =>
      o.fold(
         hit => Ok(hit.map{ o: DBObject => pretty(jsonRender(ToJValue(o)))}.getOrElse("")).as("text/json"),
         timeout => InternalServerError(timeout)
      )
    }
  }
} 
```

# sql-server - 用 count 和 where 连接两个表不会返回 count 为 0 的行

> ID：13334112
> 
> 赞同：0
> 
> 时间：2012-11-11T18:30:13.727
> 
> 标签：sql-server, sql-server-2012

我有一个 SQL 问题。我的查询看起来像：

```
Select 
    s.idseminar, count(p.seminar)
From 
    Seminar as s 
LEFT OUTER JOIN 
    Predbiljezba AS p ON p.seminar = s.idSeminar 
WHERE 
    p.obradjena = 1
Group by 
    s.idSeminar

idseminar: 1, 2
count....: 2, 2 
```

它应该显示课程（研讨会）的已接受申请数量（`predbiljezba`具有`obradjena = 1`<== 已接受状态）。它几乎可以满足我的需要。

我想要的是它显示所有课程，即使接受的订阅数量为 0。如果我省略 where 子句：

```
Select 
    s.idseminar, count(p.seminar)
From 
    Seminar as s 
LEFT OUTER JOIN 
    Predbiljezba AS p ON p.seminar = s.idSeminar
Group by 
    s.idSeminar

idSeminar: 1,2,3,4       
count....: 2,2,1,0 
```

即使它有 0 个申请，它也会显示所有课程，但在这些申请中，有一些未处理或被拒绝，我不希望它们在我的查询中弹出。我找到了这个链接

[在 SQL Server 中显示 COUNT = 0 的行](https://stackoverflow.com/questions/6615904/displaying-rows-in-sql-server-where-count-0)

但那里的解决方案似乎不起作用。我正在使用 SQL Server 2012。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:22:06.653

将条件移动到 LEFT JOIN

```
Select s.idseminar, count(p.seminar)
From Seminar as s
LEFT OUTER JOIN Predbiljezba AS p ON p.seminar = s.idSeminar AND p.obradjena = 1
Group by s.idSeminar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T23:14:17.960

您可以在主选择子句中使用子选择

```
Select s.idseminar, 
   (select count(p.seminar) 
   from Predbiljezba p
   where p.seminar = s.idSeminar and p.obradjena = 1) as seminarCount
from Seminar s 
```

# ios - 找不到包含我的保存数据的文件

> ID：13334114
> 
> 赞同：0
> 
> 时间：2012-11-11T18:30:24.677
> 
> 标签：ios

我有一个清单应用程序，我想保存项目的名称以及它们是否被选中。
Xcode 告诉我我保存的文件必须在这里：

```
2012-11-11 20:24:42.726 Checklists[1459:c07] Documents directory /Users/astanciu/Library/Application Support/iPhone Simulator/6.0/Applications/F4A90B71-A8CF-4EF8-B628-508C8B50CAD0/Library/Documentation  
2012-11-11 20:24:42.728 Checklists[1459:c07] File path /Users/astanciu/Library/Application Support/iPhone Simulator/6.0/Applications/F4A90B71-A8CF-4EF8-B628-508C8B50CAD0/Library/Documentation/Checklists.plist 
```

但是在库文件夹中，我只有缓存和首选项。无法使用 Finder 在任何地方找到 Checklists.plist 文件。

我正在使用 Mountain Lion 10.8 和 Xcode 4.5.2。

代码：

```
-(void)saveChecklistItems
{
    NSMutableData *data = [[NSMutableData alloc] init];
    NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];
    [archiver encodeObject:items forKey:@"ChecklistItems"];
    [archiver finishEncoding];
    [data writeToFile:[self dataFilePath] atomically:YES];
}

-(id)initWithCoder:(NSCoder *)aDecoder
{
    if(self = [super initWithCoder:aDecoder])
    {
        [self loadChecklistItems];
    }

    return self;
}

-(void)loadChecklistItems
{
    NSString *path = [self dataFilePath];
    if([[NSFileManager defaultManager] fileExistsAtPath:path])
    {
        NSData *data = [[NSData alloc] initWithContentsOfFile:path];
        NSKeyedUnarchiver *unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:data];
        items = [unarchiver decodeObjectForKey:@"ChecklistItems"];
    }
    else
    {
        items = [[NSMutableArray alloc] initWithCapacity:20];
    }
} 
```

任何人都知道这里有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T18:44:29.687

您没有显示用于确定的代码`self dataFilePath`。它似乎引用`Library/Documentation`了哪个是非标准目录。

要么你打算使用`NSDocumentDirectory`常量而不是`NSDocumatationDirectory`在你必须确定路径的代码中，要么你需要确保目录存在，然后再尝试写入它。

# sql - 取非聚合表达式中遇到的第一行的值

> ID：13334119
> 
> 赞同：2
> 
> 时间：2012-11-11T18:31:09.693
> 
> 标签：sql, sqlite, group-by

我有一个这样的查询：

```
SELECT PlayerID, COUNT(PlayerID) AS "MatchesPlayed", Name, Role, Team,
       SUM(Goals) As "TotalGoals", SUM(Autogoals) As "TotalAutogoals",
       SUM(...)-2*SUM(...)+2*SUM(...) AS Score, ...
FROM raw_ordered
GROUP BY PlayerID
ORDER BY Score DESC 
```

其中`raw_ordered`每一行描述了一些球员在一些比赛中的表现，按时间倒序排列。

因为我是`PlayerID`按照从这个查询中得到的信息进行分组，所以我是一个表格，其中每一行都提供了关于某个玩家的累积数据。现在，具有聚合函数的列没有问题；我的问题出在`Team`专栏上。

球员可以在一个赛季中更换球队；我在这里感兴趣的是他玩的*最后一个* `Team`，所以我想有一种方法来告诉`SELECT`每个组中遇到的第一个值对于`Team`列（或者，一般来说，对于非聚合函数列）。

不幸的是，我似乎没有在 SQLite 中找到任何（简单的）方法来做到这一点：文档[说](http://www.sqlite.org/lang_select.html#resultset)`SELECT`：

> 如果表达式是聚合表达式，则会在组中的所有行中对其进行评估。否则，***将根据组内任意选择的单个行对其进行评估***。

没有关于如何改变这种行为的建议，而且我在聚合函数之间找不到任何只接受它遇到的第一个值的东西。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:44:40.430

SQLite 没有“第一”聚合函数；你必须自己实现它。

但是，文档已过时。从 SQLite [3.7.11 开始](http://www.sqlite.org/releaselog/3_7_11.html)，如果有`MIN()`or `MAX()`，则保证选择来自该最小值/最大值的记录。

因此，只需添加`MAX(MatchDate)`到`SELECT`列列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T18:39:01.663

```
SELECT PlayerID, COUNT(PlayerID) AS "MatchesPlayed", Name, Role, 
(SELECT Team FROM raw_ordered GROUP BY PlayerID ORDER BY some_date) AS team,
SUM(Goals) As "TotalGoals", SUM(Autogoals) As "TotalAutogoals",
SUM(...)-2*SUM(...)+2*SUM(...) AS Score, ...
FROM raw_ordered
GROUP BY PlayerID
ORDER BY Score DESC 
```

大概您在表中有某种方式可以对输出进行排序，以便您可以使用子查询来实现您的目标。

# javascript - 使用 jQuery 隐藏 div 直到选中多个复选框

> ID：13334120
> 
> 赞同：1
> 
> 时间：2012-11-11T18:31:10.853
> 
> 标签：javascript, jquery

我需要使用 jQuery 隐藏一个 div，直到选中下面的所有五个复选框。我知道如何为单个复选框执行此操作，但不知道如何为多个复选框执行此操作。

这就是我到目前为止所拥有的。

```
<input type=checkbox id="cb1" name="cb1">
<input type=checkbox id="cb2" name="cb2">
<input type=checkbox id="cb3" name="cb3">
<input type=checkbox id="cb4" name="cb4">
<input type=checkbox id="cb5" name="cb5">

<div id="hidden">some stuff</div> 
```

如果未选中/选中一个复选框，则下面的 jQuery 仅隐藏/显示 div。

```
('#hidden').hide();
$('#cb1').click(function() {
    if($('#cb1').is(':checked'))
    {
        $('#hidden').show();
    }
    else
    {
        $('#hidden').hide();
    }   
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T18:41:43.907

如果您向复选框添加一个通用类，如果页面中存在其他复选框可能会有所帮助。为简化起见，我使用 $(':checkbox') 选择器

```
var $checks=$(':checkbox').change(function(){
      var allChecked= $checks.filter(':checked').length == $checks.length;
    $('#hidden').toggle( allChecked); /*passing a boolean will tell whether to hide or show*/

}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T18:38:29.157

在这里，我们单击任何以 cb 开头的检查 - 从其他答案切换

```
$(function() {
  var CBS = $('input[name^="cb"]');
  CBS.click(function() {
    var show = $('input[name^="cb"]:checked').length==CBS.length;
    $('#hidden').toggle(show); // better solution than show/hide
  }​);​
}​);​ 
```

[演示](http://jsfiddle.net/mplungjan/8uxTW/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T18:38:42.210

如果应选中所有复选框，请使用以下代码：

```
if ($('input:checked').length === 5 /* number of checkboxes */) { ... } 
```

如果其中一些应该是：

```
var checkedIds = $('input:checked').map(function() {
   return this.id;
}).get();
var neededIds = ['ch1', 'ch2' /*, ... */];
if (checkedIds.toString() === neededIds.toString()) { ... } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T18:38:54.043

做就是了：

```
$('[id^=cb]').click(function() {
    if(! $('[id^=cb]:not(:checked)').length)
    {
        $('#hidden').show();
    }
    else
    {
        $('#hidden').hide();
    }   
}); 
```

在这里，我们使用``[id^=cb]`以“cb”字符串开头的 id 选择所有元素，然后对于它们的任何单击，我们只检查是否有任何未选中的元素，如果没有，则显示您的 div。

**更新：**`:unchecked`更新了我上面的代码以支持jQuery 中没有选择器的事实，而是`:not(:checked)`必须使用。感谢 KirillIvlev 注意到这一点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-11T18:39:18.983

如果我没看错，您只想在选中所有复选框时才显示 div。我创建了一个jsfiddle，代码如下：

[http://jsfiddle.net/jyw9n/](http://jsfiddle.net/jyw9n/)

```
<input type=checkbox id="cb1" name="cb1">
<input type=checkbox id="cb2" name="cb2">
<input type=checkbox id="cb3" name="cb3">
<input type=checkbox id="cb4" name="cb4">
<input type=checkbox id="cb5" name="cb5">

<div id="hidden">some stuff</div>

$('#hidden').hide();
$('input:checkbox').click(function() {
    if(!$('input:checkbox:not(:checked)').length)
    {
        $('#hidden').show();
    }
    else
    {
        $('#hidden').hide();
    }   
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-11T18:44:57.707

根据您的逻辑，这样的事情也应该起作用，但 mplungjan Idea 比这更好。

```
$(function() {

$("input").click(function() { 
    if($("#cb1").is(":checked") && $("#cb2").is(":checked")  && $("#cb3").is(":checked") &&  $("#cb4").is(":checked") && $("#cb5").is(":checked"))
    {
        $('#hidden').hide();
    }
    else
    {
        $('#hidden').show();
    }   
});

  }) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-11T18:49:59.883

我的理解是你想通过比较多个复选框来隐藏或显示一个 div。假设您只想在选中 3 个复选框时显示 div。

简单的方法是，为您要检查的所有复选框提供相同的名称，并在单击时绑定函数以检查所有 3 个复选框是否被选中。如果所有三个都选中显示 div 否则隐藏。

```
<input type=checkbox id="cb1" name="cb1">
<input type=checkbox id="cb2" name="cb1">
<input type=checkbox id="cb3" name="cb1">
<input type=checkbox id="cb4" name="cb2">
<input type=checkbox id="cb5" name="cb3">
<div id="hidden">some stuff</div>  

<script>
var $hiddenDiv=$('#hidden');
var hideOrShowDivFlag=false
$('input[name=cb1]').click(function(){
    $("input['cb1']").each(function(){
    hideOrShowDivFlag=($(this).is(":checked"))?true:false
    })
    (hideOrShowDivFlag)?$hiddenDiv.show():$hiddenDiv.hide();
}); 
```

您可以为任何一组给定的复选框运行此代码。确保你给了他们相同的名字或任何共同的属性，

# java - Java 软件测试

> ID：13334125
> 
> 赞同：1
> 
> 时间：2012-11-11T18:31:53.173
> 
> 标签：java, junit

我正在使用以前的考试问题为本周即将到来的考试进行修改，但我无法获得 100% 的覆盖率，我的程序是：

```
public int computeInsurance(boolean SportsEquipment, boolean MusicEquipment)
{
int insurance;
if(SportsEquipment == true && MusicEquipment==true)
insurance = 20;
else if((SportsEquipment == true && MusicEquipment == false)||(SportsEquipment == false        && MusicEquipment == true))
        insurance = 10;
    else
        insurance= 5;

    return insurance;
}

} 
```

我正在使用以下测试用例：

```
public class Lab5CarTest {

@Test
public void testComputeInsurance() {
    Lab5Car t = new Lab5Car();

    int result = t.computeInsurance(true, true);
    assertEquals(20,result);

    int i = t.computeInsurance(true,false);
    assertEquals(10,i);

    int u = t.computeInsurance(false,false);
    assertEquals(5,u);

}

} 
```

但是我在代码的 else if 行中缺少 8 个分支中的 3 个！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T18:34:34.273

你为什么不测试：

```
int ip = t.computeInsurance(false,true);
assertEquals(10,ip); 
```

像这样，您应该涵盖所有内容。

你可以像这样简化你的代码：

```
if (SportsEquipment && MusicEquipment)
    insurance = 20;
else if (SportsEquipment != MusicEquipment)
    insurance = 10;
else
    insurance= 5; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T18:43:42.573

4 个中有 1 个（=2²）您丢失了（不是 2³），`t.computeInsurance(false, true);`

```
S M  I
------
t t 20
t f 10
f t 10
f f  5

if (SportsEquipment  && MusicEquipment)
    insurance = 20;
else if (SportsEquipment != MusicEquipment)
    insurance = 10;
else
    insurance= 5; 
```

# iphone - IOS UIAlertview 宽度不够

> ID：13334126
> 
> 赞同：0
> 
> 时间：2012-11-11T18:32:13.717
> 
> 标签：iphone, ios, uialertview

我有一个 UIAlertView，它的内容非常狭窄。结果，整个消息不可读。当消息超出通常大小时，该区域变为白色而不是默认的蓝色。

另外，我总共有 3 个按钮。它们都出现在垂直而不是水平线上。

我怎样才能改变这个？我有非常简单的要求，并且不想尽可能地对其进行子类化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T18:45:54.497

您不能通过默认警报视图执行此操作，因为其中的文本区域不可访问，

您必须对其进行子类化才能获得所需的内容，请阅读此演示以将 uialertview 子类化，这很容易直接指出

> [http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-uialertview-custom-graphics/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-uialertview-custom-graphics/)

# java - 从Java中的多个字节数组中逐行读取字符串

> ID：13334128
> 
> 赞同：4
> 
> 时间：2012-11-11T18:32:26.730
> 
> 标签：java

我有一个 JNI 函数“byte[] read()”，它从特定的硬件接口读取一些字节，并在每次调用它时返回一个新的字节数组。读取的数据始终是 ASCII 文本数据，并以 '\n' 表示行终止。

我想将从函数中读取的这些 MULTIPLE 字节数组转换为 InputStream，以便我可以逐行打印它们。

就像是：

```
while(running) {
    byte[] in = read(); // Can very well return in complete line
    SomeInputStream.setMoreIncoming(in);
    if(SomeInputStream.hasLineData())
        System.out.println(SomeInputSream.readline());
} 
```

我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T18:44:24.517

您可以选择类[java.io.Reader](http://docs.oracle.com/javase/7/docs/api/java/io/Reader.html)作为基类，覆盖抽象方法[int read(char[] cbuf, int off, int len)](http://docs.oracle.com/javase/7/docs/api/java/io/Reader.html#read%28char%5B%5D,%20int,%20int%29)来构建您自己的面向字符的流。

示例代码：

```
import java.io.IOException;
import java.io.Reader;

public class CustomReader extends Reader { // FIXME: choose a better name

   native byte[] native_call(); // Your JNI code here

   @Override public int read( char[] cbuf, int off, int len ) throws IOException {
      if( this.buffer == null ) {
         return -1;
      }
      final int count = len - off;
      int remaining = count;
      do {
         while( remaining > 0 && this.index < this.buffer.length ) {
            cbuf[off++] = (char)this.buffer[this.index++];
            --remaining;
         }
         if( remaining > 0 ) {
            this.buffer = native_call(); // Your JNI code here
            this.index  = 0;
         }
      } while( this.buffer != null && remaining > 0 );
      return count - remaining;
   }

   @Override
   public void close() throws IOException {
      // FIXME: release hardware resources
   }

   private int     index  = 0;
   private byte[]  buffer = native_call();

} 
```

# r - 用于`apply`的while循环构造

> ID：13334130
> 
> 赞同：1
> 
> 时间：2012-11-11T18:32:29.513
> 
> 标签：r, while-loop

我有一个`df`这样的data.frame：

```
df <- data.frame (x=1:5,y=1:5) 
```

`apply`我想对这个数据框逐行使用函数，在其中检查一个依赖于`x`and的条件，`y`然后更改`x`and`y`元素，直到它们满足我的条件。在这个例子中，如果`x`加起来`y`不等于 8，我会不断为它们挑选新的随机数，然后再试一次。

我认为`apply`使用`while`循环的函数是最好的。所以我尝试了以下方法：

```
checkchange <- function(x) while(x[1] + x[2] < 8) 
              { 
              x[1] <- sample(5,1)
              x[2] <- sample(5,1)
              return(cbind(x[1],x[2]))
      } 
```

然后我打算这样做：

```
newdf <- apply(df,1,checkchange) 
```

这行不通。我应该使用`repeat`and a`break`还是需要`return`更清楚地指定一个值。`while`非常感谢循环语法帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T18:41:04.383

您缺少匿名函数的花括号

这对我有用：

```
checkchange <- function(x) 
              { 
              while((x[1] + x[2]) < 8)
                {
                x[1] <- sample(5,1)
                x[2] <- sample(5,1)
                }
              return(cbind(x[1],x[2]))
              } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T18:58:22.150

正如@Nico 指出的那样，该函数将使用额外的大括号。

```
checkchange <- function(x) {      
  while (sum(x) < 8) { 
    # no need to sample from 1:5 if the sum has to be at least 8 
    x <- sample(3:5, 2, TRUE)        
  }
  return(x)
} 
```

输出`apply`需要转置以匹配数据的原始排列。

```
t(apply(df, 1, checkchange)) 
```

* * *

顺便说一句，您不需要该函数的循环：

```
checkchange <- function(x) {
 if (sum(x) < 8) {
    x[1] <- sample(3:5, 1)
    x[2] <- ifelse(x[1] == 3, 5, sample(seq(8 - x[1], 5), 1))
  }
  return(x)
} 
```

# android - Tabhost 内容在切换选项卡时附加

> ID：13334131
> 
> 赞同：1
> 
> 时间：2012-11-11T18:32:35.593
> 
> 标签：android, android-tabhost

我在使用 TabHost 并在选项卡之间切换时遇到问题。我已将选项卡放在底部，并为每个选项卡提供了单独的意图，如下所示：-

```
Resources res = getResources(); // Resource object to get Drawables
    TabHost tabHost = getTabHost();  // The activity TabHost
    TabHost.TabSpec spec;  // Resusable TabSpec for each tab
    Intent intent;  // Reusable Intent for each tab

    intent = new Intent().setClass(this,BottomTabs.class);
    // Initialize a TabSpec for each tab and add it to the TabHost
    spec = tabHost.newTabSpec("search").setIndicator("Home",
                      res.getDrawable(R.drawable.home))
                  .setContent(intent);
    tabHost.addTab(spec);

    // Create an Intent to launch an Activity for the tab (to be reused)
    intent = new Intent().setClass(this,BottomTabWebsite.class);
    // Initialize a TabSpec for each tab and add it to the TabHost
    spec = tabHost.newTabSpec("search").setIndicator("Website",
                      res.getDrawable(R.drawable.website1))
                  .setContent(intent);
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, MSIDates.class);
    spec = tabHost.newTabSpec("social").setIndicator("Dates",
                      res.getDrawable(R.drawable.memory_lane))
                  .setContent(intent);
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, BottomTabExit.class);
    spec = tabHost.newTabSpec("contact").setIndicator("Exit",
                      res.getDrawable(R.drawable.exit))
                  .setContent(intent);
    tabHost.addTab(spec);

    tabHost.setCurrentTab(0); 
```

没有从一个选项卡切换到另一个选项卡，下一个选项卡的内容显示在前一个选项卡的内容下方。简而言之，第一个选项卡的内容没有被清除。虽然我已将与下一个选项卡相关的活动的内容视图设置为其他布局。我需要注意什么以确保早期选项卡的内容被已选择的选项卡内容覆盖吗？

# zend-framework2 - ZF2 with Doctrine 2 - 在实体中注入依赖项

> ID：13334136
> 
> 赞同：9
> 
> 时间：2012-11-11T18:33:05.830
> 
> 标签：zend-framework2

我在 Zend Framework 2 应用程序中使用 Doctrine 2。有没有办法使用 ZF2 将依赖项注入到 Doctrine 返回的实体中？当从数据库中检索实体时，实体由 Doctrine 构建。据我所知，要在 ZF2 中注入依赖项，我需要使用 Service Locator 实例化实体。我看不出如何在无需修改 Doctrine 代码库的情况下将其与 Doctrine 集成。我现在能看到的唯一可行的解​​决方案是编写一个小服务，它获取从 Doctrine 返回的结果并注入所需的依赖项。有没有更优雅的解决方案？

最好的问候克里斯蒂安

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-11T22:23:25.270

查看 Doctrine [EventManager](http://docs.doctrine-project.org/en/2.0.x/reference/events.html)，特别是[postLoad](http://docs.doctrine-project.org/en/2.0.x/reference/events.html#lifecycle-events)生命周期事件，每次从数据库加载实体时，EventManager 都会触发该事件。

要将其全部连接到 ZF2，您需要做几件事。

首先，编写一个 Doctrine-Flavored 事件监听器：

```
<?php
class InjectStuffListener {
   private $sl;

   public function __construct($serviceLocator){
      $this->sl = $serviceLocator;
   }

   public function postLoad($eventArgs){
       $entity = $eventArgs->getEntity;
       $entity->setThingToBeInjected($this->sl->get('some.thing'));
   }
} 
```

然后，在某个 Module.php 之类的地方（也许有比 onBootstrap 更好的地方，但无论如何）：

```
<?php
public function onBootstrap(){
    $sm = $e->getApplication()->getServiceManager();
    $em = $sm->get('doctrine.entitymanager.orm_default');
    $dem = $em->getEventManager();
    $dem->addEventListener(array( \Doctrine\ORM\Events::postLoad ), new InjectStuffListener( $sm ) );

} 
```

# java - Shapes、Drawable“Shapename”、Shape继承与接口

> ID：13334138
> 
> 赞同：0
> 
> 时间：2012-11-11T18:33:22.093
> 
> 标签：java, interface, abstract, implements

这是我在 headfirst 书中的最后一个练习，但是当我运行应用程序时，没有绘制形状，我很困惑，因为没有错误。

```
public class ShapesDriver extends Frame{ //You said Frame in the Tutorial4 Document
    private ArrayList<Drawable> drawable;
    public static void main(String args[]){
        ShapesDriver gui = new ShapesDriver();

        gui.addWindowListener(new WindowAdapter(){
            @Override
            public void windowClosing (WindowEvent e){
                System.exit(0);
            }
        });    
    }

    public ShapesDriver(){
        super("Shapes");
        setSize(500, 500);
        setResizable(false);
        setVisible(true);
        show();
    }

    public void Paint (Graphics g){
        DrawableRectangle rect1 = new DrawableRectangle(150, 100);
        drawable.add(rect1);
        for(int i = 0; i < drawable.size(); i++){
            drawable.get(i).draw(g);
        }        
    }
} 
```

DrawableRectangle 类

```
public class DrawableRectangle extends Rectangle implements Drawable{
    private int x, y;
    public DrawableRectangle(int height, int width){
        super(height, width);
    }

    @Override
    public void setColour(Color c) {
        this.setColour(c);
    }

    @Override
    public void setPosition(int x, int y) {
        this.x = x;
        this.y = y;
    }

    @Override
    public void draw(Graphics g) {
        g.drawRect(x, y, width, height);
    }
} 
```

矩形类

```
public abstract class Rectangle implements Shape {
    public int height, width;

    Rectangle(int Height, int Width){
        this.height = Height;
        this.width = Width;
    }

    @Override
    public double area() { return width * height; }
} 
```

形状类

```
public interface Shape {
    public double area();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:47:55.893

让我们开始吧，Java 是区分大小写的，所以`public void Paint (Graphics g){`永远不会被 Java 调用，因为方法名是`paint`

然后让我们继续，你应该很少，如果有的话，扩展一个顶级容器`JFrame`，特别是覆盖该`paint`方法。`paint`做了很多非常重要的工作，你应该总是打电话`super.paint`

相反，您应该从某些东西扩展`JPanel`并覆盖该`paintComponent`方法（记住调用`super.paintComponwnt`）

然后我会包括 Rohit 的建议。

您可能想通读

*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)

# cocoa - NSTableView 单元格中的 Cocoa NSView

> ID：13334140
> 
> 赞同：6
> 
> 时间：2012-11-11T18:33:39.317
> 
> 标签：cocoa, nstableview, nsview

我是可可的新手，我很沮丧，我花了将近半天的时间试图找出如何将 NSView 添加到 NSTableView 单元格，但我还没有找到一个很好的指南来帮助我做什么我想实现，也许有人可以看看我尝试过的东西并告诉我为什么它不起作用以及如何让它起作用......

```
-(NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row{
NSTableCellView *view = [tableView makeViewWithIdentifier:@"MyView" owner:self];
NSTextField *textfield = [[NSTextField alloc]initWithFrame:NSMakeRect(0, 0, 100, 30)];
[textfield setStringValue:predictate_search[row]];
[textfield setBackgroundColor:[NSColor redColor]];
[view addSubview:textfield];
[view setNeedsDisplay:YES];
return view;
} 
```

我想要实现的是让两个 NSTextFields 在彼此之上，并且表格单元格具有自定义背景。以上是我只是想让一个 NSTextField 工作，但没有运气......

NSTableView 正在以编程方式创建：

```
NSScrollView *scrollView = [[NSScrollView alloc]initWithFrame:bg];
    [scrollView setHasVerticalScroller:YES];
    [self addSubview:scrollView];

    search_results = [[NSTableView alloc]initWithFrame:bg];
    NSTableColumn *column = [[NSTableColumn alloc] initWithIdentifier:@"id"];
    [[column headerCell] setStringValue:@"Cities"];
    [column setWidth:1000.0];

    [search_results addTableColumn:column];
    [search_results setDelegate:(id)self];
    [search_results setDataSource:(id)self];
    [search_results reloadData];

    [scrollView setDocumentView:search_results]; 
```

我有点困惑该放什么`makeViewWithIdentifier:`，我已经在 NSTableViews 上观看了[WWDC 2011](https://developer.apple.com/videos/wwdc/2011/)视频，但我仍然不确定。

如果您需要更多信息，请询问

谢谢

**编辑** 第一次回答后：

```
-(NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row{
NSTableCellView *view = [tableView makeViewWithIdentifier:[tableColumn identifier] owner:self];
if(view == nil){
    NSTableCellView *view = [[NSTableCellView alloc]initWithFrame:[tableView frame]];
    view.identifier = [tableColumn identifier];
}
NSTextField *textfield = [[NSTextField alloc]initWithFrame:NSMakeRect(0, 0, 100, 30)];
[textfield setStringValue:predictate_search[row]];
[textfield setBackgroundColor:[NSColor redColor]];
[view addSubview:textfield];
[view setNeedsDisplay:YES];
return view; 
```

}

但是它仍然无法正常工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T20:08:21.997

下面的代码解决了我的问题：

```
-(NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row{
NSView *view = [tableView makeViewWithIdentifier:@"MyView" owner:self];

if (view == nil) {
    view = [[NSView alloc]initWithFrame:NSMakeRect(0, 0, 100, 30)];
    NSTextField *result = [[NSTextField alloc] initWithFrame:NSMakeRect(0, 25, 800, 25)];
    NSTextField *result2 = [[NSTextField alloc] initWithFrame:NSMakeRect(0, 0, 800, 25)];
    result.stringValue = [predictate_search objectAtIndex:row];
    result2.stringValue = @"UnitedKingdom";
    [view addSubview:result];
    [view addSubview:result2];
    [view setNeedsDisplay:YES];
}

return view;

} 
```

感谢您的帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T18:53:42.100

如果它不是可取消队列的，则返回单元格的方法必须使该单元格（因为不存在）

```
// There is no existing cell to reuse so we will create a new one
if (result == nil) {

     // create the new NSTextField with a frame of the {0,0} with the width of the table
     // note that the height of the frame is not really relevant, the row-height will modify the height
     // the new text field is then returned as an autoreleased object
     result = [[[NSTextField alloc] initWithFrame:...] autorelease];

     // the identifier of the NSTextField instance is set to MyView. This
     // allows it to be re-used
     result.identifier = @"MyView";
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-23T14:13:28.427

好吧，看看这个，我将添加一个答案，以防将来有人偶然发现这个问题。

view 在代码片段的第二行中定义。如果它为 nil，它会落入 if 语句并再次定义视图。in 语句产生的视图消失了，因为它是在方括号的范围内定义的，并且当程序离开该范围时死掉，留下原始的 nil。

现在可能会有更多的问题，但这很突出。我正在对该主题进行一些研究，发现了这个问题并注意到了范围界定问题。

# android - Android web-client (phone, table) 不支持 IIS 7

> ID：13334142
> 
> 赞同：2
> 
> 时间：2012-11-11T18:33:48.690
> 
> 标签：android, asp.net, iis

我在 Windows 2008 上有一个 IIS7 网站。从 java-script 我通过 http-handler 编写 mp3 文件：

```
var audio = document.getElementById("audio");
audio.src = GetMultimedia.ashx?F=" + filename;
audio.load();
audio.play(); 
```

获取多媒体.ashx：

```
 Response.ClearHeaders();
 Response.ClearContent();
 Response.Clear();
 Response.ContentType = "audio/mp3";
 Response.AddHeader("content-length", FileLength().ToString());
 Response.AddHeader("Connection", "keep-alive");
 Response.BufferOutput = true;

   GetFile(ref FileBuffer);  // I get buffer of mp3-file for writing to Response
   if (FileBuffer != null)
   {
     ms = new MemoryStream(FileBuffer, 0, FileBuffer.Length, true);
     if (Response.IsClientConnected == true)
     {
       ms.CopyTo(Response.OutputStream);
       Response.Flush();
      }
   } 
```

问题：在 Windows 上任何浏览器都可以正常工作，但在 Android（Opera，内部浏览器）上 http-handler 工作 12 次（日志如下）。IIS 在此处理程序调用 11 次后写入 retcode 200 0 64。因此，响应中的 mp3 文件与原始文件不同，因为 http-handler 多次调用。

```
2012-11-11 15:54:13 GET /GetMultimedia.ashx V=f.mp3 HTTP/1.1 stagefright/1.2+(Linux;Android+4.0.3) 200 0 64 1069317 261 8626
2012-11-11 15:54:13 GET /GetMultimedia.ashx V=f.mp3 HTTP/1.1 stagefright/1.2+(Linux;Android+4.0.3) 200 0 0 2236677 261 8330
2012-11-11 15:56:15 GET /GetMultimedia.ashx V=f.mp3 HTTP/1.1 stagefright/1.2+(Linux;Android+4.0.3) 200 0 0 255 284 140
2012-11-11 15:56:18 GET /GetMultimedia.ashx V=f.mp3 HTTP/1.1 stagefright/1.2+(Linux;Android+4.0.3) 200 0 0 255 284 140
2012-11-11 15:56:22 GET /GetMultimedia.ashx V=f.mp3 HTTP/1.1 stagefright/1.2+(Linux;Android+4.0.3) 200 0 0 255 284 296
2012-11-11 15:56:25 GET /GetMultimedia.ashx V=f.mp3 HTTP/1.1 stagefright/1.2+(Linux;Android+4.0.3) 200 0 0 255 284 124
2012-11-11 15:56:29 GET /GetMultimedia.ashx V=f.mp3 HTTP/1.1 stagefright/1.2+(Linux;Android+4.0.3) 200 0 0 255 284 249
2012-11-11 15:56:32 GET /GetMultimedia.ashx V=f.mp3 HTTP/1.1 stagefright/1.2+(Linux;Android+4.0.3) 200 0 0 255 284 171
2012-11-11 15:56:35 GET /GetMultimedia.ashx V=f.mp3 HTTP/1.1 stagefright/1.2+(Linux;Android+4.0.3) 200 0 0 255 284 140
2012-11-11 15:56:38 GET /GetMultimedia.ashx V=f.mp3 HTTP/1.1 stagefright/1.2+(Linux;Android+4.0.3) 200 0 0 255 284 140
2012-11-11 15:56:41 GET /GetMultimedia.ashx V=f.mp3 HTTP/1.1 stagefright/1.2+(Linux;Android+4.0.3) 200 0 0 255 284 140
2012-11-11 15:56:44 GET /GetMultimedia.ashx V=f.mp3 HTTP/1.1 stagefright/1.2+(Linux;Android+4.0.3) 200 0 0 255 284 109 
```

# web-services - Gatling 工具关闭超时异常

> ID：13334147
> 
> 赞同：0
> 
> 时间：2012-11-11T18:34:06.457
> 
> 标签：web-services, http, exception, testing, gatling

你能告诉我如何在模拟中更改或关闭超时吗？
我想到了这个例外：

> 19:27:49.951 [WARN] ceeghaGatlingAsyncHandler - 请求“长请求”失败 java.util.concurrent.TimeoutException：60000 后未收到响应

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:51:36.197

在此处查看相关文档：[https ://github.com/excilys/gatling/wiki/Configuration#wiki-config-files](https://github.com/excilys/gatling/wiki/Configuration#wiki-config-files)

# eclipse - eclipse 工作区同步设置 - 同步什么？

> ID：13334150
> 
> 赞同：14
> 
> 时间：2012-11-11T18:34:23.150
> 
> 标签：eclipse

我知道它已经一次又一次地出现，但我的具体问题是：我有多个使用 wpt、cdt 和 jdt 扩展（和其他扩展）的工作区。我想创建从所有工作区到设置文件子集的硬链接（我在 Windows 上），这些设置文件管理快捷方式、工作区首选项等。例如，当我在一个工作区中更改快捷方式时，更改将传播到所有其他工作区。问题是 .metadata/.plugins 文件夹一团糟（我相信设置都在那里）。例如，我知道我必须链接文件：

```
<workspace>\.metadata\.plugins\org.eclipse.core.runtime\.settings\org.eclipse.jdt.core.prefs
<workspace>\.metadata\.plugins\org.eclipse.core.runtime\.settings\org.eclipse.jdt.ui.prefs 
```

我相信我不应该尝试链接整个 .metadata/.plugins 文件夹，因为它包含特定于工作空间的数据。

*   *硬链接目录是否**安全**且**足够**`\.metadata\.plugins\org.eclipse.core.runtime\.settings`？*

*   有人可以向我指出一些关于里面所有这些`.index`和`.dat`二进制文件的文档`\.metadata\.plugins\`吗？

*   如果这是不可能的，我至少会感谢目录中各种`.prefs`文件的参考`\.metadata\.plugins\*\.settings`，尤其是`.metadata\.plugins\org.eclipse.core.runtime\.settings`那个

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T02:12:57.773

好吧，我所做的（Windows 7 上的 Eclipse Juno）是：

*   创建了一个新的 eclipse 工作区，比如说`test`，运行它然后关闭它

*   把它变成了一个 git repo

*   将 eclipse 创建的文件连同这个 .gitignore 一起提交：

    ```
    # binary files
    *.dat
    *.tree
    *.index
    .metadata/.plugins/org.eclipse.jdt.core/invalidArchivesCache
    .metadata/.plugins/org.eclipse.jdt.core/nonChainingJarsCache
    .metadata/.mylyn/repositories.xml.zip
    *.resources

    # logs
    *.log

    .metadata/.lock

    # later additions
    .metadata/.plugins/org.eclipse.pde.core/.cache/
    *.running 
    ```

*   切换到新分支

    启动我的一个工作区，导出所有设置，然后启动`test`工作区并导入它们。在 Beyond Compare 的帮助下比较了工作空间的 .metadata/ 目录。除了文件之外，这些文件`.metadata\.plugins\org.eclipse.core.runtime\.settings\`夹是相同的`org.eclipse.ui.workbench.prefs`- 但差异似乎并不重要（即特定于工作区）。在关闭工作区时，该文件`org.eclipse.jdt.launching.prefs`也被修改了。切换到 master 并在我的其他工作区重复。

* * *

有并发症 - 例如：

*   该文件`org.eclipse.jdt.core.prefs`存在于`test`工作区中，而在原始工作区中（从我导入）有（二进制相同）`org.eclipse.jdt.core.prefs.bak`。

*   文件`org.eclipse.pde.core.prefs`未导入

*   文件`org.eclipse.jdt.launching.prefs`和`org.eclipse.ui.workbench.prefs`不同。

在第五个工作区之后，我确定了文件

```
.metadata/.plugins/org.eclipse.jdt.launching/libraryInfos.xml 
.metadata/.plugins/org.eclipse.jdt.launching/.install.xml 
```

在导入设置时创建（在新工作区中），文件`.metadata\.plugins\org.eclipse.core.runtime\.settings\org.eclipse.pde.core.prefs`未导出/导入，文件在导入`.settings\org.eclipse.ui.workbench.prefs`时*合并*（即 *ENABLED_DECORATORS* var 保持原样）并`org.eclipse.jdt.launching.prefs`在关闭 Eclipse 时进行编辑。

还有其他复杂情况，例如包含项目引用的文件：

*   例如，该文件`org.eclipse.wst.sse.core.prefs`包含工作区中的项目名称 - 我将其报告为[错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=395009)（修复得非常快！）。

*   CDT 创建了一堆文件，例如：

    ```
    .settings/org.eclipse.cdt.core.prj-<projectName>.prefs
    .settings/org.eclipse.cdt.ui.prj-<projectName>.prefs 
    ```

在导出/导入时盲目同步。这实际上是一个比之前[报道](https://bugs.eclipse.org/bugs/show_bug.cgi?id=395223)的要复杂得多的案例。

实际上，您在`.settings`目录中的任何内容都会被复制（我想只要它有`.prefs`后缀）。这需要另一个错误报告。

在其他包含工作区特定选项的文件中会遇到类似的情况 - 例如`org.eclipse.ui.ide.prefs`其中包含对工作集的引用 - 这是相当工作区特定的 - 或`org.eclipse.ui.browser.prefs`其中包含 internalWebBrowserHistory - 通常也是工作区特定的。

* * *

无论如何，我决定使用硬链接 - 所以我规范了我的偏好（从一个新的工作区开始会容易得多）并复制了除`org.eclipse.wst.sse.core.prefs`, the`cdt`和 the之外的所有设置`org.eclipse.pde.core.prefs`（因为某些原因它没有被导入.`org.eclipse.ui.workbench.prefs`比较特别的还包含快捷键）。然后我运行：

```
REM move_settings.bat
set SETTINGS_DIR=C:\path\to\tempalte\workspace\.metadata\.plugins\org.eclipse.core.runtime\.settings
set WORKSPACE_SETTINGS_DIR=C:\path\to\actual\workspace\.metadata\.plugins\org.eclipse.core.runtime\.settings
mkdir %WORKSPACE_SETTINGS_DIR%\zBackups
pause
FOR /F %%G IN ('DIR^ %%SETTINGS_DIR%%^ /b') DO (
    move %WORKSPACE_SETTINGS_DIR%\%%G %WORKSPACE_SETTINGS_DIR%\zBackups
    mklink /H %WORKSPACE_SETTINGS_DIR%\%%G %SETTINGS_DIR%\%%G
)
pause 
```

对于我的工作空间。

猜猜看：*eclipse 会破坏硬链接*。我尝试了软链接 ( `mklink %WORKSPACE_SETTINGS_DIR%\%%G %SETTINGS_DIR%\%%G`)，但也没有任何乐趣。

# 最后

我不得不硬链接（连接）整个设置目录（以及我提到的所有有问题的文件）——这真的不是一个解决方案。在这些日子里，必须解决这种情况。无论如何，这是`.bat`我使用的：

```
:: Change to the directory that this batch file is in
:: NB: it must be invoked with a full path!
:: run the bat from the dir you want to backup your prefs to
for /f %%i in ("%0") do set curpath=%%~dpi
cd /d %curpath%

set WORKSPACES=javaEE\ javaSE\ c++\ python\ android\

set TEMPLATE_WORKSPACE=name_of_the_template_workspace\
set WORKSPACES_DIR=C:\Dropbox\eclipse_workspaces\
set SETTINGS_DIR=.metadata\.plugins\org.eclipse.core.runtime\.settings
REM set SETTINGS_DIR=.metadata\.plugins\org.eclipse.core.runtime\.settings\ WONT DO
set TEMPLATE_SETTINGS_DIR=%WORKSPACES_DIR%%TEMPLATE_WORKSPACE%%SETTINGS_DIR%

for %%G in (%WORKSPACES%) do (call :subroutine_needed %%G)
GOTO :eof

:subroutine_needed
    set WORKSPACE=%1
    set WORKSPACE_SETTINGS_DIR=%WORKSPACES_DIR%%WORKSPACE%%SETTINGS_DIR%
    set BACKUP_DIR=%CD%\zBackups\%WORKSPACE%
    mkdir %BACKUP_DIR%
    pause

    move %WORKSPACE_SETTINGS_DIR% %BACKUP_DIR%
    pause

    junction  %WORKSPACE_SETTINGS_DIR% %TEMPLATE_SETTINGS_DIR%
    pause 
```

我会根据需要更新这篇文章

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-27T23:09:14.707

你也可以看看workspace mechanic，一个由谷歌开发的小插件：[http ://code.google.com/a/eclipselabs.org/p/workspacemechanic/](http://code.google.com/a/eclipselabs.org/p/workspacemechanic/)

**28/11/12 更新**

据我了解，您需要保持同步一些插件首选项。

维基解释[得](http://code.google.com/a/eclipselabs.org/p/workspacemechanic/w/list)很好。我向您推荐的步骤如下：

*   安装工作区机制（仅以下步骤 1 和 2）：[http ://code.google.com/a/eclipselabs.org/p/workspacemechanic/wiki/GettingStarted](http://code.google.com/a/eclipselabs.org/p/workspacemechanic/wiki/GettingStarted)
*   然后从一个新的工作区开始，并使用偏好记录器并根据需要设置您的偏好：[http](http://code.google.com/a/eclipselabs.org/p/workspacemechanic/wiki/PreferenceRecorder) ://code.google.com/a/eclipselabs.org/p/workspacemechanic/wiki/PreferenceRecorder （我建议您保留偏好小的分隔文件，即一个插件的一个 .epf 文件）
*   如果您的偏好记录不能满足全部需求，您可以查看如何创建自己的偏好：[http](http://code.google.com/a/eclipselabs.org/p/workspacemechanic/wiki/PreferenceTasks) ://code.google.com/a/eclipselabs.org/p/workspacemechanic/wiki/PreferenceTasks ，还可以在这里查看一些示例：[http ://code.google.com/a/eclipselabs.org/p/workspacemechanic/wiki/PreferenceExamples](http://code.google.com/a/eclipselabs.org/p/workspacemechanic/wiki/PreferenceExamples)
*   如果还不够，那么您可以编写自己的[任务](http://code.google.com/a/eclipselabs.org/p/workspacemechanic/wiki/WhatIsATask)：参见此处以获取示例[http://code.google.com/a/eclipselabs.org/p/workspacemechanic/wiki/ClassTasks](http://code.google.com/a/eclipselabs.org/p/workspacemechanic/wiki/ClassTasks)

有了它，您应该能够处理同步您的工作区首选项。

奖励：我喜欢将工作区机制首选项放在 Dropbox 上，以便在团队成员和/或我的计算机之间共享，您可以在这里找到一个小的操作方法：[https ://gist.github.com/3090900](https://gist.github.com/3090900)

希望这可以帮助。

问候

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-08T11:27:30.367

遗憾的是，仍然必须有解决方法。我做了与你类似的步骤，但我首先尝试硬链接，然后做了 git 存储库。

对我来说，git 存储库是更好的选择，因为我想在多个工作站上同步我的工作空间。所以对于所有仍在寻找解决方案的人，我就像你一样开始：

*   创建一个干净的工作空间
*   在 .metadata 中创建 git-Repo
*   重启 Eclipse 看看有什么变化
*   创建另一个工作区，看看有什么变化
*   等等 ..

到目前为止，我设法拥有一个`.gitignore`包含所有不需要或不重要的东西。我的工作空间仍然不是 100% 可移植的，但几乎..

当我启动一个新的 Eclipse 工作区时，我必须做的就是这么`git clone`简单。缺点是有些设置没有被跟踪。这些主要是 GUI 设置，几乎也包含特定于工作区的设置。

所以使用这个 .gitignore 你可以有一个手动同步的工作区，它适用于大多数设置。但是需要保养。。

```
/.lock
*.log
*.index
/.plugins/org.eclipse.core.resources/.projects
/.plugins/org.eclipse.epp.usagedata.recording
/.plugins/org.eclipse.core.resources/.history
/.plugins/org.eclipse.ltk.core.refactoring/.refactorings
/.mylyn
/.plugins/org.eclipse.core.resources/.root/
/.plugins/org.eclipse.core.resources/.safetable/org.eclipse.core.resources
/.plugins/org.eclipse.core.runtime/.settings/org.eclipse.egit.core.prefs
/.plugins/org.eclipse.core.runtime/.settings/org.eclipse.epp.usagedata.recording.prefs
/.plugins/org.eclipse.core.runtime/.settings/org.eclipse.ui.ide.prefs
/.plugins/org.eclipse.core.runtime/.settings/org.eclipse.wst.sse.core.prefs
/.plugins/org.eclipse.jdt.core/
/.plugins/org.eclipse.jdt.ui/OpenTypeHistory.xml
/.plugins/org.eclipse.jdt.ui/QualifiedTypeNameHistory.xml
/.plugins/org.eclipse.jdt.ui/jdt-images/
/.plugins/org.eclipse.ui.workbench/workingsets.xml
/.plugins/org.eclipse.wb.discovery.core/
/.plugins/org.eclipse.wb.core/
/.plugins/org.eclipse.wst.internet.cache/cache.xml
/.plugins/org.eclipse.team.ui/syncParticipants.xml
/.plugins/org.eclipse.team.cvs.core/.running
/.plugins/org.eclipse.ui.workbench/workbench.xml
/.plugins/org.eclipse.core.runtime/.settings/org.eclipse.egit.ui.prefs
/.plugins/org.eclipse.m2e.core/nexus/
/.plugins/org.eclipse.m2e.core/workspaceState.ser
/.plugins/org.eclipse.debug.core/.launches/
/.plugins/org.eclipse.debug.ui/launchConfigurationHistory.xml
/.plugins/org.eclipse.core.runtime/.settings/org.eclipse.mylyn.java.ui.prefs
dialog_settings.xml
/.plugins/org.eclipse.core.resources
/.plugins/org.eclipse.recommenders.rcp
/.plugins/org.eclipse.e4.workbench/workbench.xmi
/.plugins/org.eclipse.recommenders.completion.rcp.calls
/.plugins/org.eclipse.recommenders.completion.rcp.overrides
/.plugins/org.eclipse.core.runtime/.settings/org.eclipse.jdt.ui.prefs
/.plugins/org.eclipse.wst.sse.core 
```

我的提示是，您可以查看每次关闭 Eclipse 后发生的变化。这就是帮助我创建这个 gitignore 文件的原因，它比插件更有效。

# java - 使用其他框架中的类是不是很糟糕？

> ID：13334151
> 
> 赞同：2
> 
> 时间：2012-11-11T18:34:26.023
> 
> 标签：java, jakarta-ee, jpa

使用其他框架中的类、枚举等是不是很糟糕？我的存储库中有一些基于 JPA 的查找器方法，我想传递 fetch 类型（是否应该延迟或急切地加载对象）并且`FetchType`来自 JPA 框架的枚举适合目的。但是创建自己的枚举/类会更好吗？我知道它在我的应用程序和框架之间建立了耦合，但我的应用程序已经在使用 JPA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T18:35:27.237

看来您已经回答了自己的问题。

> ...`FetchType`来自 JPA 框架的枚举适合目的。

如果 JPA 已经是您的应用程序的依赖项，并且它们的类型适合您的用例，那么您没有理由重新发明轮子来避免使用 JPA 类型。

[PS Gamb 在他的回答中提出了一个非常好的观点，他建议将类型的使用限制在持久层上。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T18:41:21.793

事实上，您可以使用`FetchType`枚举，但请考虑您在哪里使用它。如果您有分层设计，请避免在除 Persistence 层之外的任何层中使用该枚举，否则您必须在更高层中从 JPA 导入引用（如果需要）。

另一种方法（因为您只有`EAGER`and `LAZY`）是定义是否应获取字段并为该条件分配一个`boolean`值，例如`lazyLoad`标志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T18:39:19.143

就像 robjb 已经说过的，没有必要重新发明轮子。这就是框架的全部目的：为开发人员提供工具和助手来简化标准任务。所以我建议使用框架类。如果它们不能满足您 100% 的需求，您可以随时扩展它们以满足您的需求 - 同样，如果缺少的只是一个小螺丝，就没有理由重新发明整个轮子：-P

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T18:41:42.580

即使您已经在使用该框架，我也会尽可能让您的逻辑的上层不受它的影响。原因：

*   阅读您的代码并看到您使用框架中的类的人会假设它用于为您的框架进行通信（好吧，这很弱）。

*   如果您想更改，如果您只使用框架中的类与它进行交互会更容易。

不过，这一切都不是一成不变的。如果自己开发课程需要花费大量时间，您可以决定去做，并希望没有人愿意更改引擎。

# c# - c#表单返回值？

> ID：13334156
> 
> 赞同：-1
> 
> 时间：2012-11-11T18:34:59.757
> 
> 标签：c#, winforms, forms

我有一个表格，可以打开另一个表格。用户在这里写一些信息。在关闭第二个表单时，在第一个表单上，我需要使用之前添加的信息。

（添加的信息是一个字符串 - 一个电子邮件地址，我会将其添加到第一个表单中的列表框项中。）

我尝试了 Close() 或 Hide()。但无论顺序是什么，我都会遇到新表单在打开时关闭的问题，或者根本没有打开。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T18:36:52.153

您可以将字符串属性添加到将包含该值的表单。它只会公开私人电子邮件字段的值。

例如：

```
public class SomeForm : Form
{
    public string Email
    {
        get
        {
            return txtEmail.Text;
        }
    }
} 
```

然后从一些外部表单中，您可以显示表单并在表单关闭后读取在电子邮件字段中输入的值：

```
using (var form = new SomeForm())
{
    if (form.ShowDialog() == DialogResult.OK)
    {
        string email = form.Email;
        // do something with the email
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T18:53:41.280

从构造函数中获取值`form1`并传递。`parameter`参见`form2`下面的代码

```
private void button1_Click(object sender, EventArgs e)
{
      string email = listBox1.SelectedItem.ToString();
      Form2 secondForm = new Form2(email);
      this.Hide();
      secondForm.Show();
} 
```

在 Form2 构造函数中：

```
 public Form2(string email)
 {
       textbox2.text = email;
 } 
```

# java - 在 ViewPager 中滚动背景图像？

> ID：13334160
> 
> 赞同：3
> 
> 时间：2012-11-11T18:35:27.860
> 
> 标签：java, android

我正在寻找是否有任何方法可以使用 ViewPager 实现背景图像滚动。我想要实现的内容显示在以下[视频](http://www.youtube.com/watch?feature=player_detailpage&v=2UnydjgfonA#t=35s)中。

我[对此](https://stackoverflow.com/questions/4775650/android-moving-background-image-while-navigating-through-views)进行了研究，但它的工作原理有点问题（它也使用自己的 ViewPager 实现）。

提前感谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T18:04:27.020

[在那里](https://stackoverflow.com/a/14713965/347565)看到我的答案。

我不认为没有扩展 ViewPager 有任何方法可以做到，原始实现不支持这种功能。

# c# - Listview grouptemplate - 代码隐藏

> ID：13334167
> 
> 赞同：1
> 
> 时间：2012-11-11T18:36:17.770
> 
> 标签：c#, asp.net, listview, code-behind

我希望以编程方式加载组模板和布局模板，但我收到以下错误消息：

**定义 GroupTemplate 时，必须在 ListView 'Listview1' 上指定组占位符。通过将其 ID 属性设置为“ListView_GC$groupPlaceHolder1”来指定组占位符。组占位符控件还必须指定 runat="server"。**

```
 protected void Listview1_Init(object sender, EventArgs e)
    {
        System.Diagnostics.Debug.WriteLine("in init");
        Listview1.ItemPlaceholderID = "ListView_UC$itemPlaceHolder1";
        Listview1.GroupPlaceholderID = "ListView_GC$groupPlaceHolder1";
        Listview1.GroupItemCount = 3;
        Listview1.LayoutTemplate = LoadTemplate("~/Controls/ThumbnailView_LayoutTemplate.ascx");
        Listview1.GroupTemplate = LoadTemplate("~/Controls/ThumbnailView_GroupTemplate.ascx");
        Listview1.ItemTemplate = LoadTemplate("~/Controls/ThumbnailView_ItemTemplate.ascx");

    }

    void Listview1_LayoutCreated(object sender, EventArgs e)
    {
       Listview1.Controls.RemoveAt(0);

        Control newLayoutContainer = new Control();

        Listview1.LayoutTemplate.InstantiateIn(newLayoutContainer);
        Listview1.GroupTemplate.InstantiateIn(newLayoutContainer); 
        var userControl = newLayoutContainer.Controls[0];
        var usergControl = newLayoutContainer.Controls[1];

        userControl.ID = "ListView_UC";
        usergControl.ID = "ListView_GC";

        Listview1.Controls.Add(newLayoutContainer);

    } 
```

任何人都可以帮忙吗？

编辑：

控件的标记...

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="ThumbnailView_GroupTemplate.ascx.cs" Inherits="myproject.Controls.ThumbnailView_GroupTemplate" %>
<tr>
    <asp:PlaceHolder ID="itemPlaceHolder1" runat="server" />
</tr>

<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="ThumbnailView_LayoutTemplate.ascx.cs" Inherits="myproject.Controls.ThumbnailView_LayoutTemplate" %>
<table>
    <asp:PlaceHolder ID="groupPlaceHolder1" runat="server" />
</table> 
```

# c++ - 比较分数而不溢出

> ID：13334169
> 
> 赞同：7
> 
> 时间：2012-11-11T18:36:38.960
> 
> 标签：c++, overflow, fractions

我正在用 C++ 编码。我得到 2 个分数，a/b 和 c/d，其中 a、b、c、d 是整数。有谁知道没有溢出的 a/b>c/d 方法。例如，如果我将 a、b、c、d 设置为小于 2147483647 的 4 个最大素数。我将如何确定 a/b>c/d 是否为真。我不允许使用除 int 以外的任何其他类型（即，我无法转换为 long long 或 double）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T19:14:38.763

这是一种适用于正整数的方法：

```
bool greaterPositiveFraction(int a,int b,int c,int d);

bool greaterOrEqualPositiveFraction(int a,int b,int c,int d)
{
  if (b == 0) return true;
  if (d == 0) return false;
  if (a/b > c/d) return true;
  if (a/b < c/d) return false;
  return !greaterPositiveFraction(b,a%b,d,c%d);
}

bool greaterPositiveFraction(int a,int b,int c,int d)
{
  if (d == 0) return false;
  if (b == 0) return true;
  if (a/b > c/d) return true;
  if (a/b < c/d) return false;
  return !greaterOrEqualFraction(b,a%b,d,c%d);
} 
```

这个想法是，如果整数除法更小或更大，那么你就知道答案了。如果整数除法给出相同的结果，这只是棘手的。在这种情况下，您可以只使用余数，并查看 a%b/b > c%d/d 是否。但是，我们知道 a%b/b > c%d/d if b/(a%b) < d/(c%d)，所以我们可以把问题转过来再试一次。

带有余数的负值的整数除法有点混乱，但这些情况可以很容易地处理：

```
bool greaterFraction(int a,int b,int c,int d)
{
  if (b<0) { b = -b; a = -a; }
  if (d<0) { d = -d; c = -c; }
  if (a<0 && c<0) return greaterPositiveFraction(-c,d,-a,b);
  if (a<0) return false;
  if (c<0) return true;
  return greaterPositiveFraction(a,b,c,d);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T18:45:20.183

您可以使用标准算法（将 a*d 与 b*c 进行比较），但使用 64 位乘法以外的方法进行乘法运算。就像将您的数字分成 16 位块并使用标准的大整数乘法例程来计算结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T19:05:48.897

您可以使用学校长除法来获得被除数和商，并像下面的伪代码一样继续递归除法：

```
bool compare(a,b,c,d)
    a/b = n + r/b
    c/d = m + q/d
    if (n == m) 
        if (r == 0 && q == 0) return false
        if (r == 0) return false
        if (q == 0) return true
        if (a < b && c < d)
            if (c/a == d/b && c%a == 0 && d%b == 0) return false
            return !compare(b,r,d,q)  //flip it to continue
    if (n > m) return true       //a/b > c/d
    else if (n < m) return false //a/b < c/d
    else return compare(r,b,q,d) //need to continue comparing 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T19:33:46.973

只需像这里一样进行 std int 除法：[http](http://en.wikipedia.org/wiki/Division_algorithm) ://en.wikipedia.org/wiki/Division_algorithm （请参阅带余数的整数除法（无符号））。Div int by int 不会溢出，你会得到商和提醒。现在如果 Q1 > Q2 或 Q1 < Q2 很清楚，如果 Q1==Q2 那么你比较 R1/b 和 R2/d。

例如，采用复杂的 Q1==Q2 情况，25/12 和 44/21，Q1=2 和 R2=1，Q2=2 和 R2=2，因此 Q1==Q2，您现在需要比较 1/12 和 2/ 21\. 现在你做一个 12*21 的公约数，但你不需要将它们相乘，你只需要比较 1*21 和 2*12。即你比较 (1*21)/(12*21) 和 (2*12)/(12*21) 但由于除数相同，这意味着只比较 1*21 和 2*12。

嗯，但是 1*21 和 2*12 都可以溢出（如果不是 12 而是 maxint）。好吧，无论如何，也许它会给出一些想法。

要获得更好的解决方案，只需实现您自己的 128 位（或 N 位）整数类。这并不难做到，也许半天。您只需将高低 64 位部分分开并重载运算符 +-*/>><<。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T20:27:39.857

(a/b > c/d) 可以部分写成在许多情况下避免算术运算，然后在其余情况下避免算术上溢和下溢。请注意，最后一个案例留给读者作为练习。

```
bool fractioncompare(int a, int b, int c, int d) {
    bool cd_negative = (c < 0 && d > 0) || (c > 0 && d < 0);
    bool ab_negative = (a < 0 && b > 0) || (a > 0 && b < 0);

    // if c/d negative and a/b positive then a/b is larger
    if(cd_negative && !ab_negative) return true;

    // if c/d postive and a/b negative then a/b is not larger
    if((!cd_negative && ab_negative) return false;

    bool both_negative = cd_negative && ab_negative;

    // limited cases were a/b > c/d can be determined without needing to 
    // do arithmetic calculations (so no risk of overflow / underflow)
    if(a > c && b < d) return !both_negative;
    if(a < c && b > d) return both_negative;

    int ab = a/b;
    int cd = c/d;

    bool no_trunc = a % b && c % d;
    if(no_trunc) return ab > cd;

    // No risk of overflow with divide and skipping the equal case avoids 
    //truncation issues
    if(ab > cd) return true;
    if(ab < cd) return false;

    // truncation may mean ab and cd aren't actually equal so do some
    // comparisons on differences to determine the result
    if(!both_negative)
    {
        // use subtraction only to avoid overflow
        if(ab == 0) return (b-(b-a) > d-(d-c));
        else return (b-(b-a) < d-(d-c));
    }
    else
    {
        // TODO subtract values with same sign and add with 
        // different signs and compare appropriately to determine result
    }

} 
```

# ruby-on-rails-3 - Rails：测试更新操作放置请求

> ID：13334170
> 
> 赞同：0
> 
> 时间：2012-11-11T18:36:50.217
> 
> 标签：ruby-on-rails-3, rspec, request, action, put

我正在尝试通过更新操作手动更新用户。

我在 spec/requests/user_request_spec.rb 中尝试了以下代码行：

```
user = create(:user, username: "username", password: "secret", password_confirmation: "secret") #Factory Girl
attr = { username: "newusername" }
put :update, :id => user.id, :user => attr 
```

我收到以下错误：

```
Failure/Error: put :update, :id => user.id, :user => attr
ArgumentError:
  bad argument (expected URI object or URI string)
# ./spec/requests/users_request_spec.rb:55:in `block (3 levels) in <top (required)>' 
```

如何通过 rspec 发送更新用户的请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:40:20.300

我不确定“put”是在哪里定义的，我本来希望没有方法错误。您必须包含定义 put 的其他内容。

无论如何，`Rack::Test::Methods`在你的测试中，它应该提供你所追求的：

```
describe Foo do
  include Rack::Test::Methods # provides get, post, put, etc

  ...
end 
```

# android - Android序列号（ro.serialno）的长度是多少？

> ID：13334175
> 
> 赞同：0
> 
> 时间：2012-11-11T18:37:29.727
> 
> 标签：android, android-hardware

我从那里得到序列号

```
Class<?> c = Class.forName("android.os.SystemProperties");           
Method get = c.getMethod("get", String.class, String.class );       
String serialNo = (String) (get.invoke(c, "ro.serialno", "")); 
```

但是最大值是多少。的长度`ro.serialno`？

来自文档：http: [//developer.android.com/reference/android/os/Build.html](http://developer.android.com/reference/android/os/Build.html)

好像不见了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-19T03:34:52.010

依赖 cts 套件，`ro.serialno`应该遵循这个模式：

```
Pattern SERIAL_NUMBER_PATTERN = Pattern.compile("^([0-9A-Za-z]{6,20})$"); 
```

在`BuildTest.java`撰写本文时的第 159 行：[https ://android.googlesource.com/platform/cts/+/master/tests/tests/os/src/android/os/cts/BuildTest.java#159](https://android.googlesource.com/platform/cts/+/master/tests/tests/os/src/android/os/cts/BuildTest.java#159)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T18:44:12.330

如源代码所示，我会说 103。

变量名是`PROP_VALUE_MAX`

如果你在谈论变量名的长度，那么寻找`PROP_NAME_MAX`它的长度是 31。

[来源。](https://gitorious.org/0xdroid/frameworks_base/blobs/1ecf4985903139c6e60ff74f189cc9a700d24412/core/java/android/os/SystemProperties.java)

# sql - 只有一个外键可以引用一个主键吗？

> ID：13334189
> 
> 赞同：2
> 
> 时间：2012-11-11T18:39:02.750
> 
> 标签：sql, oracle, database-design, foreign-keys, data-modeling

在创建表和数据库时，外键是否需要唯一？

例如

表：**清单**

```
Manifest_Barcode - PK
Vehicle_reg - FK
weight
description 
```

表：**车辆**

```
vechicle_reg - PK
employee_ID - FK
make
model 
```

表：**驱动程序**

```
employee_ID - PK
vechicle_reg - FK
name
adress
phone_Number
year 
```

或者，我可以在 2 个不同的表中使用相同的外键吗？和上面一样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T18:42:58.613

拥有多个引用相同 PRIMARY KEY 的 FOREIGN KEY 是完全合适且非常正常的。它们不是*相同*的FOREIGN KEY（它们将各自构建一个单独的索引以用于执行密钥），它们是具有相似定义的不同 FOREIGN KEY。

请注意，您必须`vehicle1`在声明任何一个 FOREIGN KEY 之前创建表。

# asp.net - 使用 jquery Ajax 访问 asp.net 类

> ID：13334190
> 
> 赞同：1
> 
> 时间：2012-11-11T18:39:11.040
> 
> 标签：asp.net, jquery

我使用 Jquery.Ajax 来访问本文中所写的页面方法：

[http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

但我想知道是否有一种方法可以直接访问类文件（.cs）而无需通过后面的代码

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T18:40:32.613

不，没有办法。AJAX 在客户端上运行并且与服务器端无关。这意味着 AJAX 不知道`.cs`文件的含义。AJAX 将 HTTP 请求发送到服务器端处理程序。如果您在服务器上使用 ASP.NET，则此处理程序可以是通用处理程序 ( `IHttpHandler`) 或 WebForm。

因此，公开此 .cs 文件中包含的功能的最简单方法是编写自定义通用处理程序，然后向该处理程序发送 AJAX 请求。

例如：

```
public class MyHandler : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        var response = context.Response;
        response.ContentType = "application/json";
        response.Write(new JavaScriptSerializer().Serialize(new
        {
            result = SomeClass.GetResult()
        }));
    }

    public bool IsReusable
    {
        get { return true; }
    }
} 
```

现在您可以将 AJAX 请求发送到`/myhandler.ashx`.

# java - Java：showInputDialog 中的自定义按钮

> ID：13334198
> 
> 赞同：19
> 
> 时间：2012-11-11T18:40:20.367
> 
> 标签：java, swing, joptionpane

如何将自定义文本添加到 JOptionPane.showInputDialog 的按钮？

我知道这个问题[JOptionPane showInputDialog with custom buttons](https://stackoverflow.com/questions/4223983/joptionpane-showinputdialog-with-custom-buttons)，但它没有回答提出的问题，它只是将它们引用到 JavaDocs，它没有回答它。

到目前为止的代码：

```
Object[] options1 = {"Try This Number",
                 "Choose A Random Number",
                 "Quit"};

JOptionPane.showOptionDialog(null,
                 "Enter a number between 0 and 10000",
                 "Enter a Number",
                 JOptionPane.YES_NO_CANCEL_OPTION,
                 JOptionPane.PLAIN_MESSAGE,
                 null,
                 options1,
                 null); 
```

![我希望它看起来如何](../Images/7f8e8c1ccea657feda5651df50ae23a3.png)

我想为此添加一个文本字段。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-11T19:45:39.273

您可以使用自定义组件而不是字符串消息，例如：

```
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class TestDialog {

    public static void main(String[] args) {
        Object[] options1 = { "Try This Number", "Choose A Random Number",
                "Quit" };

        JPanel panel = new JPanel();
        panel.add(new JLabel("Enter number between 0 and 1000"));
        JTextField textField = new JTextField(10);
        panel.add(textField);

        int result = JOptionPane.showOptionDialog(null, panel, "Enter a Number",
                JOptionPane.YES_NO_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE,
                null, options1, null);
        if (result == JOptionPane.YES_OPTION){
            JOptionPane.showMessageDialog(null, textField.getText());
        }
    }
} 
```

![在此处输入图像描述](../Images/00ec0cd934bcb61cbcfd8002eaf1ff1b.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-11T19:03:59.097

看看[如何制作对话框：自定义按钮文本](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html#button)。

下面是一个例子：

![在此处输入图像描述](../Images/364ef1d48ecdb711ba72d83ccf73618f.png)

```
Object[] options = {"Yes, please",
                    "No, thanks",
                    "No eggs, no ham!"};
int n = JOptionPane.showOptionDialog(frame,//parent container of JOptionPane
    "Would you like some green eggs to go "
    + "with that ham?",
    "A Silly Question",
    JOptionPane.YES_NO_CANCEL_OPTION,
    JOptionPane.QUESTION_MESSAGE,
    null,//do not use a custom Icon
    options,//the titles of buttons
    options[2]);//default button title 
```

# javascript - 数据库在 Meteor 中的什么位置？

> ID：13334202
> 
> 赞同：0
> 
> 时间：2012-11-11T18:40:38.007
> 
> 标签：javascript, client-side, meteor

我无法理解流星数据库的位置（客户端还是服务器？）。还特别是我有以下两个问题。

1.  如果我做一个复杂的查询，计算是在哪里进行的，在服务器上还是在客户端上？
2.  是否可以在没有服务器的情况下拥有一个流星应用程序（它是否有数据库支持或有任何限制）

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T05:07:23.413

Meteor 使用 MongoDB 作为服务器端数据库，使用[minimongo](https://github.com/meteor/meteor/tree/master/packages/minimongo)（内存中的 JavaScript MongoDB 模拟）在客户端上执行许多操作，同时将它们发送到服务器，这样客户端就不必等待用于服务器往返。这就是延迟补偿（核心[七项原则](http://docs.meteor.com/#sevenprinciples)之一）的实现方式。

1.  [Minimongo 目前有很多限制](http://docs.meteor.com/#collections)，所以在客户端的复杂查询方面你不能做太多。如果您有复杂的查询，您可能需要[调用服务器方法](http://docs.meteor.com/#methods_header)。
2.  您可以在客户端上创建不订阅任何服务器数据的集合，因此理论上您可以拥有一个没有服务器的流星应用程序；虽然服务器与流星捆绑在一起（这也是一个 http 服务器），但我认为这不是一个真正的问题。

强烈推荐阅读流星文档 - [http://docs.meteor.com](http://docs.meteor.com)

# ios - 退出应用程序后无法在钥匙串中保存凭据

> ID：13334203
> 
> 赞同：2
> 
> 时间：2012-11-11T18:40:41.583
> 
> 标签：ios, keychain

我编写了一个应用程序，它使用 KeychainItemWrapper 类将用户凭据保存在 iOS 钥匙串中。一切正常，但如果该应用程序因企业用途而辞职，则保存凭据将不再起作用。

我收到以下错误，但应用程序没有崩溃：

```
SecItemCopyMatching: missing entitlement
securityd[2314] <Error>: Directory[2312] SecItemCopyMatching: missing entitlement
securityd[2314] <Error>: Directory[2312] SecItemAdd: missing entitlement
securityd[2314] <Error>: Directory[2312] SecItemCopyMatching: missing entitlement
securityd[2314] <Error>: XYZ[2312] SecItemAdd: missing entitlement 
```

我开始上课如下：

```
KeychainItemWrapper *wrapper = [[KeychainItemWrapper alloc] initWithIdentifier:@"MYAPP_credentials" accessGroup:nil];
[keychain setObject:userName forKey:(__bridge id)kSecAttrAccount];
[keychain setObject:password forKey:(__bridge id)kSecValueData]; 
```

我还尝试创建一个 Entitlements.plist（使用 XCode 4.5.2）

![在此处输入图像描述](../Images/4c65e2a24b8634c0cd55266fb89242ab.png)

和以下代码：

```
KeychainItemWrapper *wrapper = [[KeychainItemWrapper alloc] initWithIdentifier:@"p7s1_dictionary" accessGroup:@"net.XYZ.directory"];
[keychain setObject:userName forKey:(__bridge id)kSecAttrAccount];
[keychain setObject:password forKey:(__bridge id)kSecValueData]; 
```

执行此操作时，我收到应用程序崩溃并显示以下消息：

```
Assertion failure in -[KeychainItemWrapper writeToKeychain],  /Users/omid/Documents/Workspace/Xcode workspace/Directory/KeychainItemWrapper.m:305
2012-11-11 19:51:48.860 Directory[4162:907] *** Terminating app due to uncaught exception  'NSInternalInconsistencyException', reason: 'Couldn't add the Keychain Item.'
First throw call stack:
(0x32c7c2a3 0x33b3a97f 0x32c7c15d 0x348252af 0x32cbf 0x3230f 0x43aad 0x3488aef5 0x347ca9f1  0x347ca90d 0x39d9d5df 0x39d9cccb 0x39dc5133 0x32bc274d 0x39dc5593 0x39d2915d 0x32c51683  0x32c50ee9 0x32c4fcb7 0x32bc2ebd 0x32bc2d49 0x3a9c02eb 0x3a47e2f9 0x1ac69 0x1a140) 
```

更新：这是我用来辞职的脚本

```
IPA="path to the .ipa file"
PROVISION="path to the .mobileprovision file"
CERTIFICATE="iPhone Distribution: a name"
export CODESIGN_ALLOCATE="/Applications/Xcode.app/Contents/Developer/usr/bin/codesign_allocate"
unzip -q "$IPA"
rm -rf Payload/*.app/_CodeSignature Payload/*.app/CodeResources
cp "$PROVISION" Payload/*.app/embedded.mobileprovision
/usr/bin/codesign -f -s "$CERTIFICATE" --resource-rules Payload/*.app/ResourceRules.plist Payload/*.app
zip -qr resigned.ipa Payload
rm -rf Payload 
```

我会感谢任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T18:48:37.213

看起来您没有正确地对应用程序进行代码签名。该代码对权利没有影响。

确保包标识符正确且代码设计有效

# javascript - 如何将事件从子窗口发送到其父窗口

> ID：13334204
> 
> 赞同：13
> 
> 时间：2012-11-11T18:40:46.350
> 
> 标签：javascript, tabs, postmessage, window.opener

我的主要目标是：

**转到我的应用程序，在新选项卡中打开一个链接，在新选项卡中创建一些内容并将事件发送到父主选项卡以刷新。**

我学到了 2 种不能完全满足我需要的技术：

1.  postMessage - 据我所知，仅适用于 iframe 而不是标签
2.  window.opener - 仅适用于仅打开新窗口而非新标签的 window.open(url)。

如何使用标签将事件从孩子传递给父母？对于父母和孩子中的 javascript 代码的具体示例，我会很高兴。它应该适用于跨域（例如：www.mydomain.com 和 bills.mydomain.com）。

我缺少一个 jQuery 解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T19:48:11.670

以下适用于我在 chrome、firefox 中，即（没有测试更多浏览器）

假设 3 个文件

1.  ( **www.mydomain.com/parent.html** ) 包含带有链接的“主”文档的页面
2.  ( **bills.mydomain.com/child.html** ) 链接将打开的页面
3.  ( **www.mydomain.com/dispatcher.html** ) 稍后解释

首先将所有 3 个文档的域属性设置为 mydomain.com

```
<script>
document.domain="mydomain.com";
</script> 
```

在 parent.html 中创建一个隐藏的 iframe，其名称属性为“hiddenframe”。还要创建一些稍后可能会收到响应的函数。

parent.html 现在应该如下所示：

```
<script>
document.domain="mydomain.com";
function fx(msg)//receives the response
{
  alert(msg)
}
</script>
<iframe name="hiddenframe" style="display:none"></iframe>
<a href="http://bills.mydomain.com/child.html" target="_blank">click</a> 
```

* * *

在 child.html 中，您现在可以将文档加载到 parent.html 内的隐藏 iframe 中

```
<script>
document.domain="mydomain.com";
window.open('http://www.mydomain.com/dispatcher.html','hiddenframe');
</script> 
```

（不要对`window.open()`这里的使用感到困惑，这里不会打开新窗口，页面会加载到parent.html中的iframe中）

* * *

在 dispatcher.html 中你现在可以调用 parent.html 中的函数

```
<script>
document.domain="mydomain.com";
parent.fx('you just got some response');
</script> 
```

* * *

**当您只需要重新加载 parent.html 时，它会更容易一些。**

再次在 parent.html 和 child.html 中设置 document.domain-property（您不需要 parent.html 和 dispatcher.html 中的 iframe）

在 parent.html 中还设置窗口的名称属性，例如

```
<script>
  window.name="parentTab";
</script> 
```

在 child.html 中，您现在可以访问 -window `parentTab`(tab)

```
<script>
    document.domain="mydomain.com";
    window.open('http://www.mydomain.com/parent.html','parentTab');
</script> 
```

...或者简单地使用“parentTarget”作为 child.html 中链接或表单的目标属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T19:11:10.370

我为自己做了什么，我实现了一些 ajax 将更改从 window2 提交到数据库。我实现了 JSON 以将新数据从数据库中拉回 window1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T04:37:11.823

通过查看[类似的问题](https://stackoverflow.com/q/87359/1615483)如何只谈论`window.open`（您不想使用）并且作为afaik，没有简单的方法可以[让所有窗口都在同一个域上](https://stackoverflow.com/q/7905887/1615483)，对于您想要的，您可能需要编写自己的框架来做这个使用[`window.sessionStorage`](https://developer.mozilla.org/en-US/docs/DOM/Storage#sessionStorage).
不过，我认为您不会使用它访问子域，当然也不会访问其他域。

* * *

`sessionStorage`使用..传递特定于窗口的消息的实用想法。
您可以在 URL (GET) 中传递东西，因此传递消息的一种方法可能是让父级为自己生成一个唯一的 id，为其子`parentID`级生成一个唯一的 id `childID`（插入`parentID`如果您使用的是，则与点击一起进入 URL `<a>`，或者如果您不介意 a ，则使用隐藏字段`<form method="GET">`），然后`sessionStorage`使用键将消息保存到父`parentID.childID.timeStamp`级以窗口 ID 开头的`sessionStorage` *键*`.`，然后是匹配的, （即父级查找`parentID.`），将键和值复制到新的 var，删除（因此不会再次找到），然后根据需要进行解析。

我知道这有点罗嗦，但我认为作为一个概念来解释可能比编写工作示例代码要容易得多。

# java - 使用“notify()”和“wait()”代替“suspend()”和“resume()”来控制线程

> ID：13334207
> 
> 赞同：3
> 
> 时间：2012-11-11T18:41:04.557
> 
> 标签：java, multithreading, applet, synchronization, synchronized

我正在尝试学习如何在 java 中暂停和恢复线程。我正在使用`Applet`具有`implements Runnable`2 个按钮“开始”和“停止”的按钮。

```
public void init(){
  th = new Thread(this);
  th.start();

  btn_increment = new Button("Start");
  btn_increment.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent ev){
      th.notify();
    }
  });
  add(btn_increment);

  btn_decrement = new Button("Stop");
  btn_decrement.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent ev){
      try{
        th.wait();
      } catch(InterruptedException e) {
        e.printStackTrace();
      }
    }
  });

  add(btn_decrement);                               
} 
```

线程的run方法：

```
public void run(){
  while(true){
    repaint();
    try{
      Thread.sleep(20);
    } catch(InterruptedException e) {
      e.printStackTrace();
    }
  }
} 
```

现在，每当我尝试暂停或恢复线程时，都会引发异常：

`Exception in thread "AWT-EventQueue-1" java.lang.IllegalMonitorStateException`

笔记：

如果我使用不推荐使用的方法`suspend()`and ，前面的代码可以完美运行`resume()`，但是文档指出使用`notify()`and`wait()`而不是同步。我尝试将单词添加`synchronized`到`actionPerformed`方法中，但它仍然抛出异常。

有人可以解释**为什么**这不起作用以及如何解决同步问题吗？很少有解释点真的会有很大帮助；）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-11T19:17:39.777

你误解了它的`wait()`工作原理。调用对象不会暂停该线程`wait`；`Thread`相反，它告诉当前正在运行的线程等待其他事情发生。为了解释原因，我需要备份一下并解释`synchronized`实际做了什么。

当您输入一个`synchronized`块时，您将获得与对象关联的*监视器。*例如，

```
synchronized(foo) { 
```

获取与对象关联的监视器`foo`。

一旦你有了监视器，在你退出同步块之前，没有其他线程可以获取它。这就是进来的`wait`地方。`notify`

`wait`是 Object 类上的一个方法，它告诉当前正在运行的线程暂时释放它持有的监视器。这允许其他线程在`foo`.

```
foo.wait(); 
```

`notify`在其他人调用或`notifyAll`打开`foo`（或线程被中断）之前，该线程不会恢复。一旦发生这种情况，该线程将尝试重新获取监视器`foo`，然后继续。请注意，如果任何其他线程正在等待获取监视器，那么它们可能会先进入 - 无法保证 JVM 分发锁的顺序。请注意，`wait()`如果没有人打电话`notify`或`notifyAll`. 通常最好使用`wait`需要超时的其他形式。`notify`当有人呼叫/`notifyAll`或超时到期时，该版本将唤醒。

所以，你需要一个线程来做等待，另一个线程来做通知。两者都`wait`必须`notify`将监视器保持在他们试图等待或通知的对象上；这就是您看到 IllegalMonitorStateException 的原因。

一个例子可以帮助你理解：

```
class RepaintScheduler implements Runnable {
    private boolean paused = false;
    private final Object LOCK = new Object();

    public void run() {
        while (true) {
            synchronized(LOCK) {
                if (paused) {
                    try {
                        LOCK.wait();
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                } else {
                    repaint();
                }
            }
            try {
                Thread.sleep(20);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }

    public void pause() {
        synchronized(LOCK) {
            paused = true;
            LOCK.notifyAll();
        }
    }

    public void resume() {
        synchronized(LOCK) {
            paused = false;
            LOCK.notifyAll();
        }
    }
} 
```

然后您的 Applet 代码可以执行以下操作：

```
public void init() {
    RepaintScheduler scheduler = new RepaintScheduler();
    // Add listeners that call scheduler.pause and scheduler.resume
    btn_increment.addActionListener(new ActionListener() {public void actionPerformed(ActionEvent e) {
        scheduler.resume();
    }});
    btn_decrement.addActionListener(new ActionListener() {public void actionPerformed(ActionEvent e) {
        scheduler.pause();
    }});
    // Now start everything up
    Thread t = new Thread(scheduler);
    t.start();
} 
```

请注意，Applet 类不关心调度程序如何暂停/恢复，并且没有任何同步块。

所以这里可能发生的一系列事件是：

*   线程 A 开始运行重绘调度程序。
*   线程 A 休眠 20 毫秒。
*   线程 B（事件调度线程）接收到按钮点击；称为“暂停”。
*   线程 B 获得 LOCK 上的监视器。
*   线程 B 更新“暂停”变量并调用 LOCK.notifyAll。
*   没有线程正在等待 LOCK，因此没有任何有趣的事情发生。
*   线程 B 在 LOCK 上释放监视器。
*   线程 A 被唤醒，再次通过它的循环。
*   线程 A 获得 LOCK 上的监视器。
*   线程 A 看到它应该暂停，所以它调用 LOCK.wait。
*   此时线程 A 挂起，等待有人调用 notifyAll。线程 A 在 LOCK 上释放监视器。
*   一段时间后，用户单击“恢复”。
*   线程 B 调用 scheduler.resume。
*   线程 B 获得 LOCK 上的监视器。
*   线程 B 更新“暂停”变量并调用 LOCK.notifyAll。
*   线程 A 看到“notifyAll”并唤醒。它试图获取 LOCK 上的监视器，但它由线程 B 持有，因此线程 A 阻塞。
*   线程 B 在 LOCK 上释放监视器。
*   线程A获得监视器并进行。

这一切有意义吗？

不需要单独的 LOCK 变量；我这样做是为了强调您没有在`Thread`实例上调用等待/通知这一事实。同样，RepaintScheduler 内部的逻辑并不理想，只是用来说明如何使用等待/通知。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T18:47:42.417

你不能只打电话`notify`和`wait`。你必须等待*一些东西*。在调用之前`notify`，您必须先成功，这样就没有什么可等待的了。

如果您的模块尚未同步，则说明您的设计有问题。

`wait`除非你有事要等，否则怎么打电话？如果你没有检查，你怎么知道有什么要等的呢？如果不与控制那件事是否已经发生的代码同步，你怎么能检查呢？

`notify`除非刚刚发生需要通知线程的事情，否则如何调用？如果您不持有可以告诉该线程的锁，那么另一个线程关心的事情怎么可能发生？

你应该`wait`这样使用：

```
while (something_to_wait_for()) wait(); 
```

这`something_to_wait_for`应该检查受同步保护的东西。而且你不能`something_to_wait_for`同步，因为你有一个竞争条件 - 如果在`something_to_wait_for`返回之后但在你进入之前发生了一些事情`wait`怎么办？然后，您正在等待已经发生的事情！因此，您从根本上*需要*同步。如果您只是在最后添加它，那么您的设计就会被破坏。

在您的情况下，解决方案可能是添加一些等待的东西。也许您只需要一个简单的布尔变量。那么您的代码可以是`while (should_wait) wait();`,`should_wait = true;`和`should_wait = false(); notifyAll()`. 您需要`synchronized`保护布尔值和`wait`/`notify`逻辑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T18:46:54.323

我认为您必须在线程上同步才能调用等待和通知。尝试使用

```
synchronized (th) {
    th.notify();
} 
```

和一样`wait()`。

# vb.net - VB.net 中的绘图图形消失

> ID：13334210
> 
> 赞同：3
> 
> 时间：2012-11-11T18:41:21.107
> 
> 标签：vb.net, visual-studio-2010, graphics, draw, paint

我有一个简单的程序，您可以使用 FillEllipse 和 FillRectangle 在屏幕上进行绘制。我的问题是，当您在屏幕的一小部分上拖动另一个窗口时，该部分将被删除。当您将另一个窗口拖过去，放开，然后将其拖回时，就会发生这种情况。有没有什么办法解决这一问题？

```
Dim MyFormObject As Graphics = Me.CreateGraphics
        Select Case shape
            Case "Ellipse"
                MyFormObject.FillEllipse(brush, e.X - CInt(brushWidth / 2), e.Y - CInt(brushHeight / 2), brushWidth, brushHeight)
            Case "Rectangle"
                MyFormObject.FillRectangle(brush, e.X - CInt(brushWidth / 2), e.Y - CInt(brushHeight / 2), brushWidth, brushHeight)
        End Select 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T18:50:52.927

您可以在表单上放置一个 PictureBox 控件并绘制到该控件上，并且当其他窗口在其上绘制时它不会被删除：

在 form_load 或其他东西上执行一次：

```
pictureBox1.Image = new Bitmap(Width, Height); 
```

画：

```
Graphics.FromImage(pictureBox1.Image).FillRectangle(Brushes.Black, 0, 0, 100, 100);
pictureBox1.Refresh(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T18:43:55.943

您需要在`Paint`事件中完成所有绘图，每次重新绘制控件时都会触发该事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T02:39:43.277

以下代码允许您使用鼠标（单击并拖动）绘制一个矩形。将 a 添加`PictureBox`到表单中。

```
Public Class Form1
  Private mpntMouseDown As Point

  Private Sub Form1_Load(sender As Object, e As System.EventArgs) Handles Me.Load
    Dim w As Integer = PictureBox1.Width
    Dim h As Integer = PictureBox1.Height
    Dim bmp As New Bitmap(w, h, System.Drawing.Imaging.PixelFormat.Format32bppArgb)
    Using g As Graphics = Graphics.FromImage(bmp)
      Dim rct As New RectangleF(0, 0, w, h)
      Dim b As Brush = New System.Drawing.Drawing2D.LinearGradientBrush(rct, Color.White, Color.Blue, 0)
      g.FillRectangle(b, rct)
      g.DrawEllipse(Pens.Blue, New RectangleF(CInt(0.1 * w), CInt(0.2 * h), CInt(0.8 * w), CInt(0.6 * h)))
      g.FillEllipse(Brushes.Yellow, New RectangleF(CInt(0.1 * w) + 1, CInt(0.2 * h) + 1, CInt(0.8 * w) - 2, CInt(0.6 * h) - 2))
      Dim sft As New StringFormat
      sft.Alignment = StringAlignment.Center
      sft.LineAlignment = StringAlignment.Center
      g.DrawString("Sample Image", New Font(System.Drawing.FontFamily.GenericSerif, 14, FontStyle.Italic, GraphicsUnit.Point), Brushes.Red, rct, sft)
    End Using
    PictureBox1.Image = bmp
  End Sub

  Private Sub PictureBox1_MouseDown(sender As Object, e As System.Windows.Forms.MouseEventArgs) Handles PictureBox1.MouseDown
    If e.Button = Windows.Forms.MouseButtons.Left Then
      mpntMouseDown = e.Location
    End If
  End Sub

  Private Sub PictureBox1_MouseUp(sender As Object, e As System.Windows.Forms.MouseEventArgs) Handles PictureBox1.MouseUp
    If mpntMouseDown = Nothing Then Exit Sub
    Using g As Graphics = Graphics.FromImage(PictureBox1.Image, Bitmap)
      Dim rct As New Rectangle
      If mpntMouseDown.X < e.X Then
        rct.X = mpntMouseDown.X
        rct.Width = e.X - mpntMouseDown.X + 1
      Else
        rct.X = e.X
        rct.Width = mpntMouseDown.X - e.X + 1
      End If
      If mpntMouseDown.Y < e.Y Then
        rct.Y = mpntMouseDown.Y
        rct.Height = e.Y - mpntMouseDown.Y + 1
      Else
        rct.Y = e.Y
        rct.Height = mpntMouseDown.Y - e.Y + 1
      End If
      g.DrawRectangle(Pens.Black, rct)
    End Using
    mpntMouseDown = Nothing
    PictureBox1.Invalidate()
  End Sub
End Class 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T15:33:47.647

@SLaks 已经告诉您在 OnPaint 方法中进行所有绘画。这里有更多信息。如果您尝试在表单上绘图，您将覆盖 OnPaint 方法并使用传递给该方法的 Graphics 实例完成所有绘画。以下是有关该主题的更多信息：

*   [如何使用 CreateGraphics 方法](https://web.archive.org/web/20141006045615/http://bobpowell.net/creategraphics.aspx)
*   [创建图形。是福还是祸？](https://web.archive.org/web/20131226033137/http://bobpowell.net/picturebox.aspx)

```
Protected Overrides Sub OnPaint(e As System.Windows.Forms.PaintEventArgs)
    MyBase.OnPaint(e)
    e.Graphics.FillEllipse(Brushes.Red, Me.ClientRectangle)

End Sub 
```

# javascript - 流星异步代码以更新视图

> ID：13334216
> 
> 赞同：3
> 
> 时间：2012-11-11T18:42:09.053
> 
> 标签：javascript, asynchronous, meteor

所以我想做的是发出一个 HTTP 获取请求，然后用响应更新一个视图。由于某种原因，它不起作用。这就是我所拥有的。

我一直在关注这个要点：[https ://gist.github.com/3443021](https://gist.github.com/3443021)

在客户端：

```
Template.search.items = function() {
    var query = Session.get("query");
    console.log(query);
    var resp;
    Meteor.call("search", query, function(err, res) {
        console.log(res);
        //return res;
        return [1,2,4];
    });
}; 
```

在服务器上：

```
Meteor.methods({
    search: function(query) {
        var fut = new Future();
        // var onComplete = fut.resolver();

        Meteor.http.get("http://localhost:4242/autocomplete/"+query, function(err, res) {
            var content = res.content;
            var resp = JSON.parse(content);
            console.log(resp);
            fut.ret(resp)
        });
        return fut.wait();
    }
}); 
```

在我正在做的观点上：

```
<template name="search">
<h1>test</h1>
<table class="table table-hover">
<tbody>
  {{#each items}}
    {{> searchItem}}
  {{/each}}
</tbody> 
```

如果我从 Meteor.call 函数内部返回，似乎没有任何东西被发送到视图。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T19:30:00.360

在客户端，没有纤程或任何东西，`Meteor.call`是异步的，模板不会从助手那里获得返回值。

从[文档](http://docs.meteor.com/#meteor_call)中：

> 在客户端，如果你不传递回调并且你不在存根中，调用将返回 undefined，你将无法获取方法的返回值。那是因为客户端没有纤程，所以实际上没有任何方法可以阻止远程执行方法。

您可以[`rendered`](http://docs.meteor.com/#template_rendered)在模板更改后使用回调手动操作模板。

```
Template.search.rendered = function() {
  var query = Session.get("query"),
      table = this.find('.table-container');
  console.log(query);
  var resp;
  Meteor.call("search", query, function(err, res) {
    console.log(res);
    table.innerHTML = Template.search_items(res); // render the table with another template
  });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-05T22:11:40.953

我正在使用这个解决方案，更复杂，但没有会话。但更好的方法是在背景上使用一些**模型**（可以使用模型调用模板 - 使用 {{#with}} 车把）。 *我只会展示这个原理......*

```
Template.search.items= function() {

 //todo: move this 'Promiss' class to shared code.
 var Promiss = function (iniValue) {

    var self = this;

    //-- Reactive Property Result, setter & getter
    this._result = iniValue;
    this._resultDeps = new Deps.Dependency;
    this.setResult = function(value) {

        self._result = value;
        self._resultDeps.changed();
        //at this moment template will be recomputed, because we have
        // changed '_resultDeps'
    };

    this.getResult = function() {
        Deps.depend(self._resultDeps);
        return self._result;
    };

  }; //end of Promiss class

//after recompution we take saved result
if (this._backupSearchPromiss)
    return this._backupSearchPromiss;

var promiss = new Promiss([/*ini value untill server response*/]);
this._backupSearchPromiss= promiss;

//call server..
Meteor.call("search", function (err, result) {
    //todo: handle error
    promiss.setResult(result);

});
return promiss;

};//end of template method 
```

在html中：

```
{{#each search.getResult}}
  {{>searchItem}}
{{/each}} 
```

# python - 运算符在哪里映射到 python 中的魔术方法？

> ID：13334218
> 
> 赞同：11
> 
> 时间：2012-11-11T18:42:17.993
> 
> 标签：python

我一直在阅读有关 python 中的魔术方法的信息，并且我发现了很多关于覆盖它们以及它们服务的目的的信息，但是我无法找到在语言中特定的运算符和操作映射到那些的位置方法（`+`查找`__add__`、`+=`查找`__iadd__`、从类中创建新对象可能会调用`__new__`和`__init__`等）是否有什么地方可以看到当 python 解释器（或任何较低级别的机制）遇到加号时会发生什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T18:56:33.770

你的问题有点笼统。有一个完整的“特殊方法”[列表](http://docs.python.org/2/reference/datamodel.html#specialnames)，即使它错过了一些 stdlib 特定的方法（例如`__setstate__`和`__getstate__`使用`pickle`等。但它是模块的协议而`pickle`不是语言协议）。

如果你想确切地知道解释器做了什么，你可以使用`dis`模块来反汇编字节码：

```
>>> import dis
>>> def my_func(a):
...     return a + 2
... 
>>> dis.dis(my_func)
  2           0 LOAD_FAST                0 (a)
              3 LOAD_CONST               1 (2)
              6 BINARY_ADD          
              7 RETURN_VALUE 
```

您可以看到 intereper`BINARY_ADD`在进行加法时执行了一个字节码。如果你想确切地看到`BINARY_ADD`你可以下载 Python 的源代码并检查`ceval.c`文件的操作：

```
 case BINARY_ADD:
        w = POP();
        v = TOP();
        if (PyInt_CheckExact(v) && PyInt_CheckExact(w)) {
            /* INLINE: int + int */
            register long a, b, i;
            a = PyInt_AS_LONG(v);
            b = PyInt_AS_LONG(w);
            /* cast to avoid undefined behaviour
               on overflow */
            i = (long)((unsigned long)a + b);
            if ((i^a) < 0 && (i^b) < 0)
                goto slow_add;
            x = PyInt_FromLong(i);
        }
        else if (PyString_CheckExact(v) &&
                 PyString_CheckExact(w)) {
            x = string_concatenate(v, w, f, next_instr);
            /* string_concatenate consumed the ref to v */
            goto skip_decref_vx;
        }
        else {
          slow_add:
            x = PyNumber_Add(v, w);
        }
        Py_DECREF(v);
      skip_decref_vx:
        Py_DECREF(w);
        SET_TOP(x);
        if (x != NULL) continue;
        break; 
```

所以在这里我们可以看到 python 特殊情况 int 和 string 添加，并最终回退到`PyNumber_Add`，它检查第一个操作数是否实现`__add__`并调用它，最终它尝试`__radd__`右侧，如果没有任何效果则引发 a `TypeError`。

请注意，字节码是特定于版本的，因此`dis`在不同版本上会显示不同的结果：

```
# python2.7
>>> def my_func():
...     return map((lambda x: x+1), range(5))
... 
>>> dis.dis(my_func)
  2           0 LOAD_GLOBAL              0 (map)
              3 LOAD_CONST               1 (<code object <lambda> at 0x16f8c30, file "<stdin>", line 2>)
              6 MAKE_FUNCTION            0
              9 LOAD_GLOBAL              1 (range)
             12 LOAD_CONST               2 (5)
             15 CALL_FUNCTION            1
             18 CALL_FUNCTION            2
             21 RETURN_VALUE        
# python3
>>> dis.dis(my_func)
  2           0 LOAD_GLOBAL              0 (map) 
              3 LOAD_CONST               1 (<code object <lambda> at 0x7f1161a76930, file "<stdin>", line 2>) 
              6 LOAD_CONST               2 ('my_func.<locals>.<lambda>') 
              9 MAKE_FUNCTION            0 
             12 LOAD_GLOBAL              1 (range) 
             15 LOAD_CONST               3 (5) 
             18 CALL_FUNCTION            1 (1 positional, 0 keyword pair) 
             21 CALL_FUNCTION            2 (2 positional, 0 keyword pair) 
             24 RETURN_VALUE 
```

同样的字节码可能会在未来的版本中进行优化，因此即使字节码相同，不同版本的python实际上也会执行不同的指令。

如果您有兴趣了解 python 如何在幕后工作，我建议您编写一些 C 扩展，遵循您可以在官方 python 网站上找到的教程和文档。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T20:28:37.923

由于涉及的抽象级别，将 CPython 源映射运算符中的单个位置精确定位`+`到特殊方法并非易事。`__add__`

正如其他人回应的那样，`+`是用[`BINARY_ADD`](https://github.com/python/cpython/blob/36c41bc2017921321dbb19557f616a6bb7572c83/Python/ceval.c#L1380)操作码实现的，它调用[`PyNumber_Add`](https://github.com/python/cpython/blob/36c41bc2017921321dbb19557f616a6bb7572c83/Objects/abstract.c#L955)（在一些特别优化的情况下除外）。`PyNumber_Add`另一方面，查看[类型对象的](http://docs.python.org/2.7/c-api/typeobj.html)[`tp_as_number`成员](http://docs.python.org/2.7/c-api/typeobj.html#tp_as_number)以获取其成员指向实现加法的 C 函数的结构。[`PyNumberMethods`](http://docs.python.org/2.7/c-api/typeobj.html#number-object-structures)`nb_add`

[这对于直接定义](https://github.com/python/cpython/blob/36c41bc2017921321dbb19557f616a6bb7572c83/Objects/longobject.c#L3245) [自己的](https://github.com/python/cpython/blob/36c41bc2017921321dbb19557f616a6bb7572c83/Objects/floatobject.c#L534) 内置类型来说很简单`nb_add`，但对于在 Python 中定义的类型来说有点复杂`__add__`，需要将其转换为适当的`nb_add`. 这部分由以下方式处理`typeobject.c`：当您定义一个实现 的类时`__add__`，其中的机器`typeobject.c` [安装](https://github.com/python/cpython/blob/36c41bc2017921321dbb19557f616a6bb7572c83/Objects/typeobject.c#L7531)到`object->type->tp_as_number->nb_add`一个通用函数中，该函数查找`__add__`对象并调用它来实现加法。对于 的情况`__add__`，这个通用函数被调用`slot_nb_add`并使用[宏](https://github.com/python/cpython/blob/36c41bc2017921321dbb19557f616a6bb7572c83/Objects/typeobject.c#L6129)[定义](https://github.com/python/cpython/blob/36c41bc2017921321dbb19557f616a6bb7572c83/Objects/typeobject.c#L6297)。[`SLOT1BIN`](https://github.com/python/cpython/blob/36c41bc2017921321dbb19557f616a6bb7572c83/Objects/typeobject.c#L6129)

至于`__new__`and `__init__`，它们是[从对象`__call__``type`](https://github.com/python/cpython/blob/36c41bc2017921321dbb19557f616a6bb7572c83/Objects/typeobject.c#L922)本身的[运算符](https://github.com/python/cpython/blob/36c41bc2017921321dbb19557f616a6bb7572c83/Objects/typeobject.c#L922)`tp_call`中调用的（用 CPython 实现的术语）。这只是合乎逻辑的，因为在 Python 中，您正在调用类型来构造对象。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-11T18:51:29.593

[`dis`](http://docs.python.org/2/library/dis.html)模块可以在这方面为您提供一些帮助：

让我们举一个简单列表的例子：

```
In [12]: def func():
    lis=[1,2,3]
    for i in range(5):
        lis+=[i]
   ....:         

In [13]: def func1():
    lis=[1,2,3]
    for i in range(5):
        lis =lis + [i]
   ....:         

In [14]: dis.dis(func)
  2           0 LOAD_CONST               1 (1)
              3 LOAD_CONST               2 (2)
              6 LOAD_CONST               3 (3)

             #removed some lines of code

  4          34 LOAD_FAST                0 (lis)
             37 LOAD_FAST                1 (i)
             40 BUILD_LIST               1
             43 INPLACE_ADD                       # += means inplace add is used
                                                  #     i.e `__iadd()__`
             44 STORE_FAST               0 (lis)
             47 JUMP_ABSOLUTE           28
        >>   50 POP_BLOCK           
        >>   51 LOAD_CONST               0 (None)
             54 RETURN_VALUE        

In [15]: dis.dis(func1)
  2           0 LOAD_CONST               1 (1)
              3 LOAD_CONST               2 (2)
              6 LOAD_CONST               3 (3)
              9 BUILD_LIST               3
             12 STORE_FAST               0 (lis)
             #removed some lines of code    
  4          34 LOAD_FAST                0 (lis)
             37 LOAD_FAST                1 (i)
             40 BUILD_LIST               1
             43 BINARY_ADD                          #normal binary add was used
                                                    #i.e __add__
             44 STORE_FAST               0 (lis)
             47 JUMP_ABSOLUTE           28
        >>   50 POP_BLOCK           
        >>   51 LOAD_CONST               0 (None)
             54 RETURN_VALUE 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-11T18:50:35.673

[http://docs.python.org/2/library/dis.html](http://docs.python.org/2/library/dis.html)

```
class x:
     def __add__(self,other):
          return "asd"

def test():
     return x() + "aaaa"

import dis
dis.dis(test) 
```

它返回类似的东西

```
 2           0 LOAD_GLOBAL              0 (x)
              3 CALL_FUNCTION            0
              6 LOAD_CONST               1 ('aaaa')
              9 BINARY_ADD
             10 RETURN_VALUE 
```

那是你最接近“低水平”的地方

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-11T19:00:14.000

您可能需要查看文档的这一部分：

[http://docs.python.org/3/reference/datamodel.html#special-method-names](http://docs.python.org/3/reference/datamodel.html#special-method-names)

# zend-framework2 - Zend 2 - TableGateway Where 子句

> ID：13334220
> 
> 赞同：2
> 
> 时间：2012-11-11T18:42:48.840
> 
> 标签：zend-framework2, tablegateway

嗨，我正在尝试掌握 Zend 2，但我在表网关中的 where 子句方面遇到了一些问题。

下面是我的表类：

```
//module\Detectos\src\Detectos\Model\OperatingSystemTable.php
namespace Detectos\Model;

use Zend\Db\TableGateway\TableGateway;

class OperatingSystemsTable
{

    public function findOs($userAgent)
    {

        $resultSet = $this->tableGateway->select();

        foreach ($resultSet as $osRow)
        {
            //check if the OS pattern of this row matches the user agent passed in
            if (preg_match('/' . $osRow->getOperatingSystemPattern() . '/i', $userAgent)) {
                return $osRow; // Operating system was matched so return $oses key
            }
        }
        return 'Unknown'; // Cannot find operating system so return Unknown
    }
} 
```

模型是这样的：

```
class Detectos
{
    public $id;
    public $operating_system;
    public $operating_system_pattern;

    public function exchangeArray($data)
    {
        $this->id                       = (isset($data['id']))                              ? $data['id']                       : null;
        $this->operating_system         = (isset($data['operating_system  ']))              ? $data['operating_system  ']       : null;
        $this->operating_system_pattern = (isset($data['operating_system_pattern']))        ? $data['operating_system_pattern'] : null;

    }

    public function getOperatingSystemPattern()
    {
        return $this->operating_system_pattern;
    }
} 
```

我有什么作品，但我真的应该能够做类似的事情：

```
public function findOs($userAgent)
{

    $resultSet = $this->tableGateway->select()->where('operating_system_pattern like %' . $userAgent . '%';

} 
```

但我想不出正确的方法来做到这一点。

编辑（2012 年 12 月 11 日 07:53）：我从 Sam 的回答中尝试了以下内容，但出现错误：

```
$spec = function (Where $where) {
    $where->like('operating_system_type', '%' . $this->userAgent . '%');
};

$resultSet = $this->tableGateway->select($spec); 
```

但出现以下错误：

```
Catchable fatal error: Argument 1 passed to Detectos\Model\OperatingSystemsTable::Detectos\Model\{closure}() must be an instance of Detectos\Model\Where, instance of Zend\Db\Sql\Select given. 
```

我还想补充一点，我已经阅读了文档并遵循了教程。没有提到在那里使用 Zend\Db\Sql。我无法在 tableGateway 中使用高级 where 子句的示例。我可能遗漏了一些东西，但我认为这并不明显。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-12T06:29:01.687

为什么人们忽略[官方文档](http://framework.zend.com/manual/2.0/en/modules/zend.db.table-gateway.html#basic-usage)？最简单的例子是这样的：

```
$artistTable = new TableGateway('artist', $adapter);
$rowset = $artistTable->select(array('id' => 2)); 
```

However, you can give the select() function an argument of type `Zend\Db\Sql\Where`. Again [this part of the official documentation](http://framework.zend.com/manual/2.0/en/modules/zend.db.sql.html#where-having) helps a lot. With `Where` you can do cleaner code things like:

```
$where = new Where();    
$where->like('username', 'ralph%');

$this->tableGateway->select($where) 
```

Hope this helps you a bit. Don't ignore the docs! ;)

# android - 页面卷曲效果中的android内存不足问题

> ID：13334224
> 
> 赞同：0
> 
> 时间：2012-11-11T18:43:09.457
> 
> 标签：android, 2d, out-of-memory, page-curl

在我的应用程序中，我试图使用 100 个图像显示页面卷曲效果，如以下 github 链接中所述 -[这里](https://github.com/MysticTreeGames/android-page-curl/blob/master/src/com/mystictreegames/pagecurl/AndroidPageCurlActivity.java)

在示例代码中，他们只使用了两个图像，但在我的应用程序中，我使用了大约 90 个图像。这会导致应用程序崩溃，在 logcat 中出现以下问题

```
E/dalvikvm-heap(603): Out of memory on a 5529616-byte allocation. 
```

当我尝试使用 7 张图片时，效果很好。当我尝试增加超过 7 个时，它会崩溃。我所有的图像都在 drawable 文件夹中。

在那个 github 代码中，drawable 中的图像如下所示

```
mPages.add(BitmapFactory.decodeResource(getResources(),R.drawable.page9));
        mPages.add(BitmapFactory.decodeResource(getResources(),R.drawable.page10));
        mPages.add(BitmapFactory.decodeResource(getResources(),R.drawable.page11));
        mPages.add(BitmapFactory.decodeResource(getResources(),R.drawable.page12));
        mPages.add(BitmapFactory.decodeResource(getResources(),R.drawable.page13));
        mPages.add(BitmapFactory.decodeResource(getResources(),R.drawable.page14));
        mPages.add(BitmapFactory.decodeResource(getResources(),R.drawable.page15)); 
```

如何解决此问题并加载所有图像，任何更好的建议......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T19:02:53.043

您必须意识到每个应用程序的堆在 Android 中是非常有限的，因此您不能像在台式 PC 上使用那么多内存。所以这里是您可能想要使用的解决方案：

1.  使用较小尺寸的图像。
2.  优化您的应用程序行为，这意味着您不应加载任何`Bitmaps`暂时未使用的内容，并在它们变得不需要时立即正确回收它们。
3.  限制 的数量`Bitmaps`，这已经为您工作了。

希望您将实现其中之一以使您的应用程序更好地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T21:00:52.473

使用延迟加载机制。不要一次把所有的位图都加载到内存中，把id保存在一个.里面`ArrayList`，需要的时候加载，用完后卸载位图，这样内存就可以释放了。

# google-app-engine - 尝试使用 API 密钥访问 BigQuery 时出错（简单 API 访问）

> ID：13334226
> 
> 赞同：2
> 
> 时间：2012-11-11T18:43:14.300
> 
> 标签：google-app-engine, google-api, google-bigquery

```
 401 Unauthorized

- Show headers -

{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "required",
    "message": "Login Required",
    "locationType": "header",
    "location": "Authorization"
   }
  ],
  "code": 401,
  "message": "Login Required"
 }
} 
```

我在尝试使用 API 密钥（简单 API 访问）访问 BigQuery 时遇到上述错误有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T21:41:37.573

您要构建什么类型的应用程序？

BigQuery 不支持通过 API 密钥进行访问，但它支持各种授权流程，包括使用服务帐号授权。详细了解[要选择的 BigQuery API 授权流程](https://developers.google.com/bigquery/docs/authorization)。

# entity-framework - 实体框架 + Java 脚本客户端

> ID：13334230
> 
> 赞同：2
> 
> 时间：2012-11-11T18:43:51.933
> 
> 标签：entity-framework, backbone.js, asp.net-web-api, jaydata, breeze

我正在尝试开发具有以下层的应用程序：

1.  实体框架模型
2.  数据服务（WCF 或 Web API，但我更喜欢 Web API）
3.  Java 脚本 + HTML + CSS 客户端

该模型包含继承和多态集合：

```
public class Master
{
    public virtual ICollection<BaseDetail> Details { get; set; }
}

public abstract class BaseDetail
{
    public virtual Master Master { get; set; }
}

public class Detail1 : BaseDetail { }
public class Detail2 : BaseDetail { }
public class Detail3 : BaseDetail { } 
```

问题是我找不到适合我需要的 Java Script 框架：

1.  击退
    *   优点：
        *   很好地支持继承和多态集合
        *   支持 Web API & JSON (我认为它比 WCF & oData 更简单)
    *   缺点：
        *   不支持 EF 元数据。您必须手动在 java 脚本中复制模型
        *   对 JSON 序列化 EF 模型的理解不够好。您必须对 JSON 进行预处理和后处理
2.  微风.js
    *   优点：
        *   很好地支持 EF 元数据。动态生成 JS 模型
    *   缺点：
        *   不支持继承
        *   不支持 WebAPI + JSON
3.  杰达
    *   优点：
        *   足够好地支持 EF 元数据
    *   缺点：
        *   好像支持继承，但不支持多态集合
        *   不支持 WebAPI + JSON

还有其他替代的 JS 框架吗？或者也许我对命名框架有误？你能举个例子吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T04:33:46.180

**编辑**：从 v 1.3.1 起，Breeze 现在支持继承。

--

关于 Breeze，你说得对，它（还）不支持继承。那是在微风路线图上，你可能想[投票赞成](http://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions/suggestions/3083057-support-inheritence-in-the-object-model)。

它确实支持 ASP.NET Web API 和 JSON。考虑到几乎所有 BreezeJS 示例都是完全依赖于 JSON 内容类型的 Web API 示例，您会觉得奇怪。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T08:10:51.900

JayData 对 WebAPI 的支持可通过[Microsoft Web API OData 扩展](http://blogs.msdn.com/b/alexj/archive/2012/11/02/odata-in-webapi-microsoft-asp-net-web-api-odata-0-2-0-alpha-release.aspx)获得。虽然它需要您根据控制器、路由等设置服务器端。

我们很乐意优先处理多态集合，我们目前正处于实施 OData V3 的过程中。[在http://github.com/jaydata](http://github.com/jaydata)上打开一个问题，以便我们可以就详细信息与您联系。

# scala - Scala 中的模式匹配

> ID：13334237
> 
> 赞同：5
> 
> 时间：2012-11-11T18:44:32.580
> 
> 标签：scala, pattern-matching, bigint

```
scala> (1,5) == BigInt(12) /% 7
res3: Boolean = true

scala> BigInt(12) /% 7 match {
 | case (1,5) => true
 | }

<console>:9: error: type mismatch;
found   : Int(1)
required: scala.math.BigInt
          case (1,5) => true
                ^ 
```

有人可以解释一下如何在这里进行模式匹配吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T18:55:44.143

`match`比平等更具体；你不能只是平等，你也必须有相同的类型。

在这种情况下，`BigInt`它不是一个案例类，并且`unapply`它的伴生对象中没有方法，所以你不能直接匹配它。你能做的最好的就是

```
 BigInt(12) /% 7 match {
    case (a: BigInt,b: BigInt) if (a==1 && b==5) => true
    case _ => false
  } 
```

或其一些变体（例如`case ab if (ab == (1,5)) =>`）。

或者，您可以使用适当类型的 unapply 方法创建一个对象：

```
object IntBig { def unapply(b: BigInt) = Option(b.toInt) }

scala> BigInt(12) /% 7 match { case (IntBig(1), IntBig(5)) => true; case _ => false }
res1: Boolean = true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T18:56:02.987

`1`并且`5`是`Int`类型。模式匹配需要一个`scala.math.BigInt`. 因此，通过为 1 和 5 声明几个 val 来实现这一点。

```
scala> val OneBig = BigInt(1)
oneBig: scala.math.BigInt = 1

scala> val FiveBig = BigInt(5)
fiveBig: scala.math.BigInt = 5

scala> BigInt(12) /% 7 match {
     | case (OneBig, FiveBig) => true
     | }
res0: Boolean = true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T18:55:37.317

问题是`1`and`5`返回`/%`are s，因此即使方法（由 调用）返回 true `BigInt`，也不匹配文字s。这可行，但有点不雅：`Int``equals``==`

```
scala> BigInt(12) /% 7 match { case (x, y) if x == 1 && y == 5 => true }
res3: Boolean = true 
```

# linux - Bash：将对象添加到 json 文件

> ID：13334238
> 
> 赞同：0
> 
> 时间：2012-11-11T18:44:37.270
> 
> 标签：linux, bash, shell

我知道如何在文件末尾回显/添加文本：

```
echo "{ "fruit":"apple" , "amount":"10" }" >> file.txt 
```

我的问题是如何将对象添加到下面的 json 文件中：

文件 - file.txt（空）：

```
{
"fruit": [

]
} 
```

预期结果：

```
{
"fruit": [
{ "fruit":"apple" , "amount":"10" } #object to add

]
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T18:52:52.063

`ed`是标准的文本编辑器。

```
#!/bin/bash

{
ed -s file.json <<EOF
/\"fruit\": \[
a
{ "fruit":"apple" , "amount":"10" } #object to add
.
wq
EOF
} &> /dev/null 
```

不知道为什么要为此使用 bash，但是，周围有更好的工具！

完毕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T21:05:23.860

试试这个：

> $ sed -e '/"fruit":/a{ "fruit":"apple" , "amount":"10" }' file.txt

这将在“fruit”之后添加一行。如果你想用修改后的文本替换文件：

> $ sed -i.bak -e '/"fruit":/a{ "fruit":"apple" , "amount":"10" }' file.txt

将添加该行并将文件替换为修改后的内容。旧文件将保存为备份`file.txt.bak`。

# java - iCal4j 解析来自 ICS 的会议请求

> ID：13334239
> 
> 赞同：0
> 
> 时间：2012-11-11T18:44:38.953
> 
> 标签：java, icalendar, ical4j

我想解析从 Exchange 收到的 ics 文件，`iCal4j`用于创建`VEvent`用于本地处理的文件，并修改它们以创建新的时间建议（`COUNTER`方法）以将它们发送回 Exchange。问题是我只能构建`Calendar`对象（参见下面的代码），没有`VEvent`.

```
File file = new File(PATH);
CalendarBuilder builder = new CalendarBuilder();
net.fortuna.ical4j.model.Calendar cal = null;
try {
    FileInputStream fis = new FileInputStream(file);
    cal = builder.build(fis);
} catch (Exception e) {
    e.printStackTrace();
} 
```

最有可能的是，我可以从头开始创建回复，但如果我可以直接从邀请中创建回复，我想结果更有可能奏效。另外，我真的很想避免手动解析文件并使用字符串匹配之类的东西来破解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:19:11.253

似乎解决方案相当简单，只是在我寻求帮助的 iCal4j 示例中没有详细说明。（对不起，我是新手程序员）。但是在查看了[iCal4j 的 API 参考之后](http://m2.modularity.net.au/projects/ical4j/apidocs/)，我发现了以下内容：

如果您将 ics 文件解析为一个对象，在我们的例子中`Calendar`，它将只有几个`Properties`、 like和。但它也可能（并且很可能会）有一些[组件](http://m2.modularity.net.au/projects/ical4j/apidocs/net/fortuna/ical4j/model/Component.html)，例如,等，这是 ics 文件的实际内容。您可以通过以下方式获取组件列表`METHOD``PRODID``VERSION``VEvent``VTodo`

```
ComponentList cl = cal.getComponents(); 
```

对我们来说，解析、修改和发送它们将比从头开始创建它们要容易得多。

# .net - 在 Windows 8 DESKTOP 应用程序中使用 SQLite

> ID：13334240
> 
> 赞同：4
> 
> 时间：2012-11-11T18:44:43.633
> 
> 标签：.net, wpf, sqlite, windows-8, desktop

嗨，有谁知道如何配置 Visual Studio 2012 Desktop 以在桌面应用程序中使用 SQLite？

我花了很长时间尝试使用它 - 我让它在 Visual Studio 2012 Metro Apps 中运行，但 VS 2012 Desktop 中没有扩展，所以它似乎有点不同。

我尝试添加对 SQLite3.dll 的引用，但 VS 拒绝承认它是一个库。

我一直在尝试使用 Tim Heurs 指令但没有成功。

任何指向正确方向的指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:26:12.200

你试过[System.Data.SQLite](http://system.data.sqlite.org/index.html/doc/trunk/www/index.wiki)吗？

[这](http://www.codeproject.com/Articles/153407/WPF-and-SQLite-Database)是 CodeProject 上使用相同 SQLite 库的示例 WPF 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:37:05.133

是的，你应该使用这个二进制文件，以便与 .NET 一起使用，

[http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki) ,

您的项目中的 .net 版本是什么？4.0 还是 4.5？

# android - 无法在 Android 设备上使用 asmack 15 登录 Google Talk

> ID：13334242
> 
> 赞同：2
> 
> 时间：2012-11-11T18:45:12.273
> 
> 标签：android, xmpp, smack, asmack

我们正在尝试建立连接。我们建立了一个连接，但是当我们尝试登录时，我们得到了大量的错误。

我们正在尝试使用 XMPPConnection 对象登录 Google Talk，并向其传递对主机名、端口号、用户名、密码和资源的引用。连接已正确创建和设置，但是当我们尝试使用已创建的连接登录 Google Talk 时，会出现很多错误，并且 Android 应用程序会崩溃。

我们的代码：

```
class BackgroundConnection extends AsyncTask<String, Void, XMPPConnection> {

        @Override
        protected XMPPConnection doInBackground(String... arg0) {

            String host = "talk.google.com"; //getText(R.id.host); //"talk.google.com"
                String port = "5222"; //getText(R.id.port); //"5222"
                String service = "gmail.com"; //getText(R.id.service); //"gmail.com"
                String username = "username@gmail.com"; //getText(R.id.userid);
                String password = "password"; //getText(R.id.password);
                String resource = "web"; //"smack"

                // Create a connection
                ConnectionConfiguration connConfig =
                    new ConnectionConfiguration(host, 5222, service);
                //connConfig.setLoginInfo(username, password, resource);
                XMPPConnection connection = new XMPPConnection(connConfig);

                try {
                    connection.connect();
                    Log.i("XMPPClient", "[SettingsDialog] Connected to " + connection.getHost());
                } catch (Exception ex) {
                    Log.e("XMPPClient", "[SettingsDialog] Failed to connect to " + connection.getHost());
                    Log.e("XMPPClient", ex.toString());
                    xmppClient.setConnection(null);
                }
                try {
                            // ***FAILS HERE***
                    connection.login(username, password, resource);
                    Log.i("XMPPClient", "Logged in as " + connection.getUser());

                    // Set the status to available
                    Presence presence = new Presence(Presence.Type.available);
                    connection.sendPacket(presence);
                    xmppClient.setConnection(connection);
                } catch (Exception ex) {
                    Log.e("ERROR","Failed to login: " + ex.toString());
                    Log.e("XMPPClient", "[SettingsDialog] Failed to log in as " + username);
                    Log.e("XMPPClient", ex.toString());
                        xmppClient.setConnection(null);
                }

            return null;
        }

    } 
```

错误：

```
11-11 13:17:35.829: I/XMPPClient(6075): [SettingsDialog] Connected to talk.google.com
11-11 13:17:40.534: I/dalvikvm(6075): Could not find method javax.security.sasl.SaslClient.hasInitialResponse, referenced from method org.jivesoftware.smack.sasl.SASLMechanism.authenticate
11-11 13:17:40.534: W/dalvikvm(6075): VFY: unable to resolve interface method 3710: Ljavax/security/sasl/SaslClient;.hasInitialResponse ()Z
11-11 13:17:40.534: D/dalvikvm(6075): VFY: replacing opcode 0x72 at 0x0003
11-11 13:17:40.534: W/dalvikvm(6075): VFY: unable to resolve exception class 680 (Ljavax/security/sasl/SaslException;)
11-11 13:17:40.534: W/dalvikvm(6075): VFY: unable to find exception handler at addr 0x29
11-11 13:17:40.544: W/dalvikvm(6075): VFY:  rejected Lorg/jivesoftware/smack/sasl/SASLMechanism;.authenticate ()V
11-11 13:17:40.544: W/dalvikvm(6075): VFY:  rejecting opcode 0x0d at 0x0029
11-11 13:17:40.544: W/dalvikvm(6075): VFY:  rejected Lorg/jivesoftware/smack/sasl/SASLMechanism;.authenticate ()V
11-11 13:17:40.544: W/dalvikvm(6075): Verifier rejected class Lorg/jivesoftware/smack/sasl/SASLMechanism;
11-11 13:17:40.544: W/dalvikvm(6075): Class init failed in Constructor.constructNative (Lorg/jivesoftware/smack/sasl/SASLPlainMechanism;)
11-11 13:17:55.680: W/System.err(6075): java.io.EOFException: no more data available - expected end tag </stream:stream> to close start tag <stream:stream> from line 1, parser stopped on END_TAG seen ...</mechanisms></stream:features>... @1:335
11-11 13:17:55.680: W/System.err(6075):     at org.xmlpull.mxp1.MXParser.fillBuf(MXParser.java:3035)
11-11 13:17:55.690: W/System.err(6075):     at org.xmlpull.mxp1.MXParser.more(MXParser.java:3046)
11-11 13:17:55.690: W/System.err(6075):     at org.xmlpull.mxp1.MXParser.nextImpl(MXParser.java:1144)
11-11 13:17:55.730: W/System.err(6075):     at org.xmlpull.mxp1.MXParser.next(MXParser.java:1093)
11-11 13:17:55.730: W/System.err(6075):     at org.jivesoftware.smack.PacketReader.parsePackets(PacketReader.java:325)
11-11 13:17:55.730: W/System.err(6075):     at org.jivesoftware.smack.PacketReader.access$000(PacketReader.java:43)
11-11 13:17:55.730: W/System.err(6075):     at org.jivesoftware.smack.PacketReader$1.run(PacketReader.java:70)
11-11 13:18:49.928: W/dalvikvm(6075): threadid=11: thread exiting with uncaught exception (group=0x40c63a68)
11-11 13:18:49.988: E/AndroidRuntime(6075): FATAL EXCEPTION: AsyncTask #1
11-11 13:18:49.988: E/AndroidRuntime(6075): java.lang.RuntimeException: An error occured while executing doInBackground()
11-11 13:18:49.988: E/AndroidRuntime(6075):     at android.os.AsyncTask$3.done(AsyncTask.java:278)
11-11 13:18:49.988: E/AndroidRuntime(6075):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
11-11 13:18:49.988: E/AndroidRuntime(6075):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
11-11 13:18:49.988: E/AndroidRuntime(6075):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
11-11 13:18:49.988: E/AndroidRuntime(6075):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
11-11 13:18:49.988: E/AndroidRuntime(6075):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
11-11 13:18:49.988: E/AndroidRuntime(6075):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
11-11 13:18:49.988: E/AndroidRuntime(6075):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
11-11 13:18:49.988: E/AndroidRuntime(6075):     at java.lang.Thread.run(Thread.java:856)
11-11 13:18:49.988: E/AndroidRuntime(6075): Caused by: java.lang.VerifyError: org/jivesoftware/smack/sasl/SASLMechanism
11-11 13:18:49.988: E/AndroidRuntime(6075):     at java.lang.reflect.Constructor.constructNative(Native Method)
11-11 13:18:49.988: E/AndroidRuntime(6075):     at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
11-11 13:18:49.988: E/AndroidRuntime(6075):     at org.jivesoftware.smack.SASLAuthentication.authenticate(SASLAuthentication.java:315)
11-11 13:18:49.988: E/AndroidRuntime(6075):     at org.jivesoftware.smack.XMPPConnection.login(XMPPConnection.java:203)
11-11 13:18:49.988: E/AndroidRuntime(6075):     at com.hemelix.xmppClient.SettingsDialog$BackgroundConnection.doInBackground(SettingsDialog.java:108)
11-11 13:18:49.988: E/AndroidRuntime(6075):     at com.hemelix.xmppClient.SettingsDialog$BackgroundConnection.doInBackground(SettingsDialog.java:1)
11-11 13:18:49.988: E/AndroidRuntime(6075):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
11-11 13:18:49.988: E/AndroidRuntime(6075):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
11-11 13:18:49.988: E/AndroidRuntime(6075):     ... 5 more
11-11 13:24:00.369: I/Process(6075): Sending signal. PID: 6075 SIG: 9 
```

关于什么是错的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:11:58.410

您需要将 SSL 信任库类型更改为 bks。（忽略 facebook 连接，注意 bks 的东西）。

请参阅：[setConnection](http://code.google.com/p/asmack/issues/attachmentText?id=78&aid=780000003&name=XMPPClient.java&token=e6oYDd3z2RIas5JxhZe80IP0_2A:1347952935661)

# playframework - 没有连接列

> ID：13334248
> 
> 赞同：2
> 
> 时间：2012-11-11T18:46:07.263
> 
> 标签：playframework, persistence, ebean

我是 Ebeans / Play 2.0.4 的新手，我正在尝试对以下内容进行建模：

```
One question has many answers 
```

所以我的课程看起来像这样：

**问题模型：**

```
package models;

import java.util.ArrayList;
import java.util.List;

import javax.persistence.CascadeType;
import javax.persistence.Entity;
import javax.persistence.OneToMany;

import play.db.ebean.Model;

@Entity
public class Question extends Model {
    @OneToMany(cascade=CascadeType.ALL)
    public List<Answer> answers = new ArrayList<Answer>();
} 
```

**答案型号：**

```
package models;

import javax.persistence.Entity;
import javax.persistence.Id;

import play.db.ebean.Model;

@Entity
public class Answer extends Model {
    @Id
    public Integer id;
} 
```

但是，这给了我以下错误：

```
java.lang.RuntimeException: No join columns 
```

我究竟做错了什么？在生成的 DDL 中，我需要“更新级联”- CascadeType.ALL 是正确的类型吗？谢谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:38:14.997

将 ID 添加到问题实体：

```
@Entity
public class Question extends Model {
    @Id
    Integer id;

    @OneToMany(cascade=CascadeType.ALL)
    public List<Answer> answers = new ArrayList<Answer>();
} 
```

在后台，访问问题属性的 Ebean 会生成如下查询：

```
select * from question q join answer a where q.id = 123 
```

在您的实体中缺少 q.id

# ios - 播放视频 Ipad Ios6

> ID：13334253
> 
> 赞同：1
> 
> 时间：2012-11-11T18:46:55.793
> 
> 标签：ios, xcode, video, ios6, media-player

我需要在应用程序启动时播放视频

我的代码非常适合 Iphone Ipad Simulator

但物理上不在设备上的 Ipad

怎么了？？

```
- (void)viewDidLoad
    {

         if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {

            NSURL* url = [[NSBundle mainBundle] URLForResource:@"Intro3" withExtension:@"mp4"];

            m_player = [[MPMoviePlayerController alloc] initWithContentURL:url];
            [m_player.backgroundView setBackgroundColor:[UIColor blackColor]];
            [m_player.view setBackgroundColor:[UIColor blackColor]];
            [m_player setControlStyle:MPMovieControlStyleNone];
            [[m_player view] setFrame:[self.view bounds]];

            [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayBackDidFinish:) name:MPMoviePlayerPlaybackDidFinishNotification object:nil];
            [m_player play];
            [self.view addSubview:[m_player view]];

            }
            else{
               ---play video in iphone---
            }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T19:47:33.650

该代码完美运行！

问题是视频的分辨率太大了。

调整大小并工作 =)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T19:05:32.727

我建议您改用[MPMoviePlayerViewController](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/mpmovieplayerviewcontroller_class/Reference/Reference.html)。

```
 if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {

            NSURL* url = [[NSBundle mainBundle] URLForResource:@"Intro3" withExtension:@"mp4"];

            MPMoviePlayerViewController * controller = [[MPMoviePlayerViewController alloc]initWithContentURL:url];
            [self  presentMoviePlayerViewControllerAnimated:controller];
            [controller release];
} 
```

# c# - 将 dateTImePicker 值转换为字符串

> ID：13334254
> 
> 赞同：0
> 
> 时间：2012-11-11T18:47:13.883
> 
> 标签：c#, .net, sql, string

我正在使用 dateTimePicker 从 Windows 表单中的用户收集日期以插入 SQL Server 数据库但是当我调试它时它说“不能将 dateTime 转换为字符串”这是代码

```
string Agent = FieldAgentCombo.Text;
            string Query = "INSERT INTO Comittment(Date,Field_Staff_Date,Detail,Priority,company_name,Name) values('" + Client + "','" + Agent + "','" + Date + "','" + FieldStaffDate + "','" + Detail + "','" + Priority + "')";

            SqlCommand cmd = new SqlCommand(Query, conn);

            int status = cmd.ExecuteNonQuery();
            if (status > 0)
                MessageBox.Show("record inserted"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T18:54:01.337

您的代码容易受到[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)的攻击。我建议您使用参数化查询。同样在您的 SQL 查询中，您似乎混合了参数。确保它们匹配。例如：

```
// load the values that you want to insert into standard .NET types
DateTime date = ...
DateTime fieldStaffDate = ...
string detail = ...
string priority = ...
string companyName = ...
string name = ...

// now connect to the database to execute the SQL query
using (var conn = new SqlConnection(ConnectionString))
using (var cmd = conn.CreateCommand())
{
    conn.Open();
    cmd.CommandText = 
    @"INSERT INTO Comittment(
          Date, 
          Field_Staff_Date, 
          Detail, 
          Priority, 
          company_name, 
          Name) 
      VALUES (
          @Date, 
          @Field_Staff_Date, 
          @Detail, 
          @Priority, 
          @company_name, 
          @name)";

    cmd.Parameters.AddWithValue("@Date", date);
    cmd.Parameters.AddWithValue("@Field_Staff_Date", fieldStaffDate);
    cmd.Parameters.AddWithValue("@Detail", detail);
    cmd.Parameters.AddWithValue("@Priority", priority);
    cmd.Parameters.AddWithValue("@company_name", companyName);
    cmd.Parameters.AddWithValue("@name", name);

    cmd.ExecuteNonQuery();
} 
```

这样，查询就不再容易受到 SQL 注入的攻击，此外，ADO.NET 还将负责将 .NET 类型正确格式化为相应的 SQL 类型，这样您就不需要进行任何字符串解析和日期操作.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T18:52:08.350

如果要将当前日期插入sql，而不是进行转换，只需`now()`直接添加到查询

除此之外，请查看此链接：[http ://www.csharp-examples.net/string-format-datetime/](http://www.csharp-examples.net/string-format-datetime/)

```
// create date time 2008-03-09 16:05:07.123
DateTime dt = new DateTime(2008, 3, 9, 16, 5, 7, 123);

String.Format("{0:y yy yyy yyyy}", dt);  // "8 08 008 2008"   year
String.Format("{0:M MM MMM MMMM}", dt);  // "3 03 Mar March"  month
String.Format("{0:d dd ddd dddd}", dt);  // "9 09 Sun Sunday" day
String.Format("{0:h hh H HH}",     dt);  // "4 04 16 16"      hour 12/24
String.Format("{0:m mm}",          dt);  // "5 05"            minute
String.Format("{0:s ss}",          dt);  // "7 07"            second
String.Format("{0:f ff fff ffff}", dt);  // "1 12 123 1230"   sec.fraction
String.Format("{0:F FF FFF FFFF}", dt);  // "1 12 123 123"    without zeroes
String.Format("{0:t tt}",          dt);  // "P PM"            A.M. or P.M.
String.Format("{0:z zz zzz}",      dt);  // "-6 -06 -06:00"   time zone 
```

# java - 如何预先加载实体列表？

> ID：13334260
> 
> 赞同：0
> 
> 时间：2012-11-11T18:48:02.730
> 
> 标签：java, hibernate, jakarta-ee, jpa

当您拥有实体列表时，您将如何预先加载特定实体具有的所有关系，例如：

```
List<Question> questions = query.getResultList(); 
```

查询在哪里：`SELECT q FROM Question q;`

我知道你可以使用`Hibernate.initialize()`，但这是否意味着我需要遍历存储层中的列表？还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T18:56:56.037

您可以使用[10.2.3.5.3。JPQL 获取连接](http://docs.oracle.com/html/E24396_01/ejb3_langref.html#ejb3_langref_fetch_joins)。

> FETCH JOIN 允许获取关联作为执行查询的副作用。FETCH JOIN 在实体及其相关实体上指定。

从上面的链接借来的一个例子：

```
SELECT mag FROM Magazine mag LEFT JOIN FETCH mag.articles WHERE mag.id = 1 
```

我认为它的一个优点`FETCH JOIN`是您的默认设置可以是惰性的。

# android - 按钮不会在更大的屏幕上调整大小

> ID：13334265
> 
> 赞同：0
> 
> 时间：2012-11-11T18:48:29.970
> 
> 标签：android, xml, layout

所以我有 16 个大小为 80dp 的按钮，它们在 3.0" - 4.5" 显示器中看起来不错。[（来源：][[gyazo.com](http://gyazo.com/458c5060f56ef2e5ecb408387f07783e.png?1352659265)][）][![](../Images/7ee0973e648f1c7b045b7d5315e95609.png)](https://i.stack.imgur.com/hd2wG.png)

当我得到像平板电脑这样更大的屏幕时，它看起来像这样[（来源：][[gyazo.com](http://gyazo.com/a4f4dd5a0aae2d610c2909e0c96ee6aa.png?1352659024)][）]
[![](../Images/215e2c999031275fcdc2430a09083f0e.png)](https://i.stack.imgur.com/DX8fi.png)

我的自定义按钮图像是：ldpi 36x36,mdpi 48x48,hdpi 72x72,xhdpi 96x96 这是我的 xml 代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_gravity="center"
android:background="@drawable/background"
android:orientation="vertical" >

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button1"
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:background="@drawable/custom_button"
        android:onClick="id1"
        android:textColor="#FFF"
        android:textSize="15dp" 
        android:digits="1"
    />

    <Button
        android:id="@+id/button2"
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:background="@drawable/custom_button"
        android:onClick="id2"
        android:textColor="#FFF"
        android:textSize="15dp" />

    <Button
        android:id="@+id/button3"
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:background="@drawable/custom_button"
        android:onClick="id3"
        android:textColor="#FFF"
        android:textSize="15dp" />

    <Button
        android:id="@+id/button4"
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:background="@drawable/custom_button"
        android:onClick="id4"
        android:textColor="#FFF"
        android:textSize="15dp" />
</LinearLayout>

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button5"
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:background="@drawable/custom_button"
        android:onClick="id5"
        android:textColor="#FFF"
        android:textSize="15dp" />

    <Button
        android:id="@+id/button6"
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:background="@drawable/custom_button"
        android:onClick="id6"
        android:textColor="#FFF"
        android:textSize="15dp" />

    <Button
        android:id="@+id/button7"
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:background="@drawable/custom_button"
        android:onClick="id7"
        android:textColor="#FFF"
        android:textSize="15dp" />

    <Button
        android:id="@+id/button8"
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:background="@drawable/custom_button"
        android:onClick="id8"
        android:textColor="#FFF"
        android:textSize="15dp" />
</LinearLayout>

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button9"
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:background="@drawable/custom_button"
        android:onClick="id9"
        android:textColor="#FFF"
        android:textSize="15dp" />

    <Button
        android:id="@+id/button10"
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:background="@drawable/custom_button"
        android:onClick="id10"
        android:textColor="#FFF"
        android:textSize="15dp" />

    <Button
        android:id="@+id/button11"
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:background="@drawable/custom_button"
        android:onClick="id11"
        android:textColor="#FFF"
        android:textSize="15dp" />

    <Button
        android:id="@+id/button12"
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:background="@drawable/custom_button"
        android:onClick="id12"
        android:textColor="#FFF"
        android:textSize="15dp" />
</LinearLayout>

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/Button01"
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:background="@drawable/custom_button"
        android:onClick="id13"
        android:textColor="#FFF"
        android:textSize="15dp" />

    <Button
        android:id="@+id/Button02"
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:background="@drawable/custom_button"
        android:onClick="id14"
        android:textColor="#FFF"
        android:textSize="15dp" />

    <Button
        android:id="@+id/Button03"
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:background="@drawable/custom_button"
        android:onClick="id15"
        android:textColor="#FFF"
        android:textSize="15dp" />

    <Button
        android:id="@+id/Button04"
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:background="@drawable/custom_button"
        android:onClick="id16"
        android:textColor="#FFF"
        android:textSize="15dp" />
</LinearLayout>

<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button13"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="18dp"
        android:layout_marginTop="47dp"
        android:background="@drawable/custom_button"
        android:onClick="numbers" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T18:56:57.737

对于不同的屏幕，屏幕的大小`dp`是不同的。要确保每`Button`行中的每一个都占用相同数量的空间，请`android:layout_width="0dip"`与 结合使用`android:layout_weight="1"`。无论屏幕大小如何，这都会产生相同的效果。希望这可以帮助。

# c# - xml 命名空间 clr-namespace 中不存在标记“xxx”。无法发布 WPF 可视化 c# 项目

> ID：13334266
> 
> 赞同：2
> 
> 时间：2012-11-11T18:48:31.297
> 
> 标签：c#, wpf, wpf-controls, visual-c#-express-2010

我是 C# 应用程序开发的新手。我目前正在使用 Visual c# express 2010 开发一个项目。我能够在没有任何错误的情况下运行该项目，并且一切正常。但是当我尝试将项目发布到目录时，我收到以下错误，我无法找出解决方案。请帮忙。

> 错误 6 XML 命名空间“clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Input.Toolkit”中不存在标记“AutoCompleteBox”。第 20 行位置 10\. C:\Users\Thangamani\Desktop\BACKSTROKE LABS\DILRAJ\DILRAJ BETA VERSION\WpfApplication_BETA\WpfApplication_BETA\Cust_Profile_View.xaml 20 10 WpfApplication_BETA
> 
> 错误 5 XML 命名空间“clr-namespace:Neodynamic.WPF;assembly=Neodynamic.WPF.Barcode”中不存在标记“BarcodeProfessional”。第 13 行位置 10\. C:\Users\Thangamani\Desktop\BACKSTROKE LABS\DILRAJ\DILRAJ BETA VERSION\WpfApplication_BETA\WpfApplication_BETA\Cust_IDCard.xaml 13 10 WpfApplication_BETA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-19T05:42:42.127

在我的情况下，请转到**配置管理器**以检查每个项目是否使用您用于构建的平台，例如，如果您使用`Release`Mode 和 using发布`Any CPU`，请检查每个项目到`Any CPU`.

[![在此处输入图像描述](../Images/bbb98c8c4b2d022eaf33714fec018fb5.png)](https://i.stack.imgur.com/FUgqM.png)

# x86 - 术语“amd64”、“x64”和“x86”是什 么意思？

> ID：13334271
> 
> 赞同：4
> 
> 时间：2012-11-11T18:49:18.263
> 
> 标签：x86, 64-bit, x86-64

我有这个 ：

> 根据您的处理器，下载的文件具有以下名称之一：
> 
> *   xxx-macosx- **amd64** .dmg
> *   xxx-macosx- **x64** .dmg
> *   xxx-macosc- **x86** .dmg

我需要一劳永逸地理解这些术语。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T18:51:31.510

这些是不同的处理器架构。

*   amd64 是 AMD 64 位处理器。
*   x64 是 Intel 64 位处理器。
*   x86 是 32 位 Intel 处理器。

# javascript - 检查服务器状态时延迟。用 jquery

> ID：13334273
> 
> 赞同：0
> 
> 时间：2012-11-11T18:49:40.027
> 
> 标签：javascript, jquery, ajax, file, status

我有一个项目，我需要检查我的应用程序的服务器是否仍然在线。经过长时间的搜索，我找到了一个有效的脚本。但并不完美。当我从服务器上拔下网络电缆时，我的应用程序需要 15 秒才能识别出服务器已关闭。

该脚本查找文件 ping.html 并且出于缓存原因，我需要在它之后放置随机变量：p

有谁知道如何解决延迟问题？

```
function ping(){
           $.ajax({ 
           cache: false,
              url: 'ping.html?myRand=' + guid(), 
              success: function(result){ 
                 $('.conmessage').hide(); 
                 enable();

              },     
              error: function(result){ 
                  $('.conmessage').show();  
                  disable();
              }
           });
        }

    function s4() {
           return (((1+Math.random())*0x10000)|0).toString(16).substring(1);
    }

    function guid() {
           return s4()+s4()+"-"+s4()+"-"+s4()+"-"+s4()+"-"+s4()+s4()+s4();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T18:52:39.547

我想您应该在 ajax 调用中使用 timeout 属性（以毫秒为单位）：

```
$.ajax({ 
              cache: false,
              url: 'ping.html?myRand=' + guid(), 
              timeout: 1000,
              success: function(result){ 
                 $('.conmessage').hide(); 
                 enable();

              },     
              error: function(result){ 
                  $('.conmessage').show();  
                  disable();
              }
           }); 
```

# django - Django QuerySet 上的 InnerJoin 查询

> ID：13334274
> 
> 赞同：0
> 
> 时间：2012-11-11T18:49:43.130
> 
> 标签：django, postgresql, django-queryset

我在 django 中有这些数据模型：

```
class User(models.Model):
     type = models.CharField()

class Tmp1(models.Model):
     var1 = models.ForeignKey(User)

class Tmp2(models.Model):
     var2 = models.ForeignKey(Tmp1)

class Tmp3(models.Model):
     user = models.ForeignKey(User)
     var3 = models.ForeignKey(Tmp2) 
```

我想要一个查询集，它选择等于`Tmp3`的实例`Tmp3``Tmp3.var3.var2.var1.id``Tmp3.user.id.`

我知道我应该如何在 PostgreSQL 中使用 InnerJoin，但我不知道如何使用 Django 查询集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:43:26.243

据我了解，您希望获取`Tmp3`其`user`属性与表中相关用户匹配的对象`Tmp1`（对于当前`Tmp3`对象）-听起来您可以使用[F 表达式](https://docs.djangoproject.com/en/dev/topics/db/queries/#query-expressions)

```
from django.db.models import F
Tmp3.objects.filter(var3__var2__var1=F('user')) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-11T19:35:31.057

尝试以下操作：

```
object_q = 1
tmp3_pk = Tmp3.objects.get(pk=object_q).user.pk
queryset = Tmp3.objects(var3__var2__var1__pk=tmp3_pk) 
```

（`__`双下划线）将引用相关模型的属性。

也可以直接引用对象：

```
object_q = 1
tmp3_user = Tmp3.objects.get(pk=object_q).user
queryset = Tmp3.objects(var3__var2__var1=tmp3_user) 
```

在此处查看跨相关对象执行查询的完整详细信息： [https ://docs.djangoproject.com/en/dev/topics/db/queries/#related-objects](https://docs.djangoproject.com/en/dev/topics/db/queries/#related-objects)

# apache-flex - Flex：有什么方法可以控制 JSON.stringify 排序？

> ID：13334278
> 
> 赞同：0
> 
> 时间：2012-11-11T18:50:13.410
> 
> 标签：apache-flex, flex4, flash-builder, flex4.5

有什么方法可以控制 Flex 中的序列化顺序`JSON.serialize()`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:20:37.423

如果这是关于 Adob​​e (pre-Fex 4.8) JSON - 也许覆盖该方法会做，但我建议使用一些免费的 JSON 实现项目，并替换顺序以最符合您的需求，或者只是关闭来自 Apache 的 Flex 4.8 和创建一个镜像类，并将您的替换项放入实现中。

# jquery - 使用自动页面滚动单击时将 div 浮动到窗口顶部

> ID：13334279
> 
> 赞同：0
> 
> 时间：2012-11-11T18:50:21.163
> 
> 标签：jquery, html, css, scroll, jquery-animate

在用户单击链接后，我正在尝试为 div 元素设置动画以在浏览器窗口顶部滑出屏幕。当用户向下滚动页面超过某个点时，会出现此链接。当单击 div 时，浏览器窗口会动画并滚动到页面顶部，因为“Back to top” div 会淡出。我需要让这个“回到顶部”的 div 不仅淡出，而且在淡出时滑到屏幕外的浏览器窗口顶部。到目前为止，这是我所拥有的：

**Javascript：**

```
$(function(){
    $("#back-to-top").hide();

    $(function() {
        $(window).scroll(function() {
            if($(this).scrollTop() > 100) {
                $('#back-to-top').fadeIn('slow');
            } else {
                $('#back-to-top').fadeOut('slow');
            }
        });

        $('a#back-to-top').click(function() {
            $('body,html').animate({
                scrollTop: 0
            }, 800);
            return false;

            $('#back-to-top').animate({  // The part that doesn't work
                margin: '-800px 0 0 0'
                // top: '-800px' 
            });
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:04:26.753

我认为问题可能出在`return false`

```
 $('a#back-to-top').click(function() {
            $(this).animate({ bottom: '1000px', opacity: 0 }, 2000, function(){
                $('a#back-to-top').hide(function(){
                    $(this).css({ bottom: '40px', opacity: 1 });
                });
            });
            $('body,html').animate({
                scrollTop: 0
            }, 1500);
            return false;
        }); 
```

我更新了代码。它可以完美地满足您的要求。动画完成后，您需要恢复链接的位置和不透明度。

# android - 启动新 Intent 时让 MediaPlayer 继续播放

> ID：13334282
> 
> 赞同：2
> 
> 时间：2012-11-11T18:50:48.867
> 
> 标签：android, android-intent, android-mediaplayer

当用户打开新的 Intent 以访问菜单时，我不希望我的 mediaPlayer 继续播放。

我认为这可以这样处理：

*   暂停播放器
*   将播放器放入额外的捆绑包中
*   将捆绑包传递给新的 menueIntent
*   让 menueIntent 调用 player.start()

但即使这会奏效，我想它也会受到滞后的影响。当前意图暂停时，有什么方法可以继续播放背景声音？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T18:53:56.483

当你有一个叫做 的东西时，为什么要这么麻烦`Service`？只需创建一个`Service`，将您的播放代码放入其中并与您想要的`Service`任何人进行通信。[您可以在此处](http://developer.android.com/guide/components/services.html)`Activity`阅读更多信息。希望这可以帮助。`Services`

# android - Android游戏不会在手机上显示scene2d阶段

> ID：13334289
> 
> 赞同：1
> 
> 时间：2012-11-11T18:52:07.707
> 
> 标签：android, libgdx, scene2d

我正在练习为 android 制作游戏，在 Eclipse 中使用 libgdx。在我的第一个屏幕中，我在舞台上添加了一个 TextButton 和一个 Label。当我启动桌面应用程序时，会显示带有标签和按钮的舞台。但是，当我在手机（Android 2.2）或模拟器（Andorid 2.2 和 4.03）上启动 Android 应用程序时，什么都没有显示，只显示一个空白屏幕。我在 logcat 或控制台中看不到任何错误。

logcat 显示一个复制位“打开帧缓冲区时出错 errno=13（权限被拒绝）”，但我认为这不是原因。

我检查了我的 java 构建路径，一切似乎都很好。在到处谷歌搜索之后，这是我发现的唯一一个类似的帖子：[libgdx 游戏在 android 手机中不起作用](https://stackoverflow.com/questions/11346331/libgdx-game-not-working-in-android-phones)。在投票最多的答案中，用户“nEx.Software”评论“不工作是指只显示一个空白屏幕吗？这是因为桌面启动器创建了一个新的 ScreenTest() 实例，而 Android 启动器创建了一个新的 ScreenGame( )。” 我认为这可以解决我的问题，但是我不完全理解他/她的评论。

下面是我的 android 入门类的代码：

```
public class MainActivity extends AndroidApplication {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        AndroidApplicationConfiguration cfg = new AndroidApplicationConfiguration();
        cfg.useGL20 = true;
        cfg.useAccelerometer = false;
        cfg.useCompass = false;

        initialize(new FirstGame(), cfg);
    }
} 
```

**编辑**

下面是我的游戏 Main.java 类的代码：

```
public class FirstGame extends Game {

    @Override
    public void create() {  
        this.setScreen(new MainMenu(this));
    }
        @Override
    public void dispose() {
    }

    @Override
    public void resize(int width, int height) {
    }

    @Override
    public void pause() {
    }

    @Override
    public void resume() {
    }
} 
```

任何帮助将不胜感激。

**更新**

我发现它在我的手机上显示，但是舞台不在屏幕上，无论如何谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T23:19:59.933

您可以发布您的 Android 启动器的副本吗？Eclipse ADT 最近的一个问题也意味着有时项目会不同步。尝试清理所有项目。

*项目*->*清理*-> 选择所有与游戏相关的项目 ->*确定*

另外我假设使用Eclipse，是这样吗？

# r - 无法解释来自 R 中“mda”包的混淆矩阵的结果

> ID：13334297
> 
> 赞同：0
> 
> 时间：2012-11-11T18:53:04.790
> 
> 标签：r, confusion-matrix

我有一个森林多边形数据集，我正在尝试使用混淆矩阵将字段分类与地图分类进行比较。我能找到的唯一一个可以在更大的数据集（超过 2 个分类选项）上运行并且可以比较文本值的包位于“mda”包中。我已经运行了包'mda'并使用了'confusion'的代码。

随包提供的示例是...

```
data(iris)
irisfit <- fda(Species ~ ., data = iris)
confusion(predict(irisfit, iris), iris$Species)
                 Setosa       Versicolor       Virginica
Setosa            50              0               0
Versicolor         0             48               1
Virginica          0              2              49

attr(, "error"):
[1] 0.02 
```

我简单地运行我的

```
data(Habitat)
confusion(Habitat$Field,Habitat$Map) 
```

这给了我一个与提供的代码示例类似（但不那么整洁）的混淆矩阵输出。在这一点上，我迷路了。我有 2 个结果。

```
attr(,"error")
[1] 0.3448276
attr(,"mismatch")
[1] 0.889313 
```

错误我理解，不匹配但是，我似乎在网上或包装随附的文献中找不到任何提示。我怀疑有这么高的“不匹配”值是好的，但我不知道如何解释它。我认为这可能是一个相当具体的问题，也许只能由以前使用过这个包的人来回答，但如果有人知道，或者有如何找到的提示，我将不胜感激。

谢谢，艾登

**编辑**- 包括我的数据集的剪辑，显示可能不匹配的内容（怀疑这意味着一致的错误分类）。显示最一致的错误分类的剪辑。

```
structure(list(Field = structure(c(7L, 7L, 7L, 7L, 7L, 7L, 7L, 
7L, 7L, 7L, 7L, 7L, 7L, 8L), .Label = c("Black Spruce ", "Clearcut ", 
"Deciduous ", "Jack Pine ", "Lowland Conifer ", "Marshwillow ", 
"Mixed Conifer ", "Open Muskeg ", "Rock ", "Treed Muskeg ", "Upland Conifer ", 
"Young Conifer", "Young Deciduous"), class = "factor"), Map = structure(c(7L, 
7L, 7L, 11L, 11L, 11L, 11L, 11L, 11L, 12L, 13L, 13L, 13L, 6L), .Label = c("Black     Spruce", "Clearcut", "Deciduous", "Jack Pine", "Lowland Conifer", "Marshwillow", 
"Mixed Conifer", "Open Muskeg", "Rock", "Treed Muskeg", "Upland Conifer", 
"Young Conifer", "Young Deciduous"), class = "factor")), .Names = c("Field", 
"Map"), row.names = 143:156, class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T02:01:44.493

这似乎意味着变量不共享一组共同的值。如果一个人在预测另一个人，那么它就是在预测不存在的值（或相反）。不匹配似乎是分配了另一个变量水平中不存在的值的案例的比例。

在您发布的 iris 数据集示例中，如果我们为混淆矩阵中的一个变量引入一个新值，我们可以得出相同的输出。由于它们是因子，我们需要首先创建一个新的因子水平。

```
data(iris)
irisfit <- fda(Species ~ ., data = iris)
iris$Predict<-predict(irisfit, iris)
iris$Predict=factor(iris$Predict,levels= c("setosa", "versicolor",
      "virginica","monsterosa"))  #adding a new level 'monsterosa'
iris$Predict[1]<-"monsterosa"  #assign it to one of the observations 
```

现在我们可以重新运行混淆函数并得到不匹配：

```
confusion(iris$Predict, iris$Species)
            true
predicted    setosa versicolor virginica
  setosa         49          0         0
  versicolor      0         48         1
  virginica       0          2        49
  monsterosa      1          0         0
attr(,"error")
[1] 0.02013423
attr(,"mismatch")
[1] 0.006666667 
```

如果我们重构另一个变量以包含两个变量中存在的所有级别，那么不匹配就会消失：

```
iris$Species=factor(iris$Species,levels= c("setosa", "versicolor",
      "virginica","monsterosa"))
confusion(iris$Predict, iris$Species)
            true
predicted    setosa versicolor virginica monsterosa
  setosa         49          0         0          0
  versicolor      0         48         1          0
  virginica       0          2        49          0
  monsterosa      1          0         0          0
attr(,"error")
[1] 0.02666667 
```

我会比较`as.character(unique(Habitat$Field))`并`as.character(unique(Habitat$Map))`追踪它。as.character 不是必需的，但它易于阅读。

现在您已经添加了数据，我发现问题似乎是您在某些变量的末尾有尾随空格，而在其他变量的单词之间有双空格。

```
# see problem
as.character(levels(Habitat$Field))
as.character(levels(Habitat$Map))

# fix problem

# unfactor them for now so we can replace spaces
Habitat$Field<-as.character(Habitat$Field)
Habitat$Map<-as.character(Habitat$Map)

# replace unwanted spaces
Habitat$Field <- gsub("[[:space:]]*$","",Habitat$Field) #gets ending spaces
Habitat$Map <- gsub("[[:space:]]*$","",Habitat$Map) #gets ending spaces
Habitat$Map <- gsub("[[:space:]]{2,}"," ",Habitat$Map) # gets double spaces
Habitat$Field <- gsub("[[:space:]]{2,}"," ",Habitat$Field) # gets double spaces

# factor them again
Habitat$Field <-factor(Habitat$Field)
Habitat$Map<-factor(Habitat$Map) 
```

# gcc - 如何使用内置 rpath 构建和安装 gcc？

> ID：13334300
> 
> 赞同：11
> 
> 时间：2012-11-11T18:53:35.100
> 
> 标签：gcc, build, centos, shared-libraries

我正在尝试在 /usr/local 中构建和安装我自己的 gcc 4.7.2 以代替 /usr 中的 gcc 4.4.6。（这是在 CentOS 6.3 上。）

gcc 生成动态链接到它自己的动态库的可执行文件和动态库，例如 libstdc++.so。如何构建和安装 gcc，以便生成的二进制文件自动获取链接器 -rpath 选项（-rpath /usr/local/lib64），该选项导致链接 /usr/local/lib64 中的动态库而不是 /usr/ 中的动态库lib64 还是 /lib64？

如果它工作正常，在我使用 gcc 构建可执行文件而不指定“-Wl,-rpath=/usr/local/lib64”后，当我 ldd 可执行文件时，它应该显示 /usr/local/lib64/libstdc++.so。 6 而不是 /usr/lib64/libstdc++.so.6。对于 libgcc_s.so.1 也是如此。

我尝试了不同的方法，包括在“配置”命令行上指定 LDFLAGS_FOR_TARGET=-Wl,-rpath=/usr/local/lib64,-rpath=/usr/local/lib，但没有任何效果。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-10-15T01:58:53.690

如果您不想导出路径，还有另一种解决方案：

使用您的工具链`PATH`：

```
gcc -dumpspecs > specsfile 
```

编辑`specsfile`并在该部分`link`添加您的`-rpath`示例：

```
*link:
%{!static:--eh-frame-hdr} -m %(link_emulation) %{shared:-shared}   %{!shared:     %{!static:       %{rdynamic:-export-dynamic}       -dynamic-linker %(dynamic_linker)}       %{static:-static}} -rpath /usr/local/lib64 
```

此时您可以测试它是否适用于：

```
g++ -specs=specsfile test.cpp
readelf -d a.out |grep RPATH 
```

如果它有效，您可以使其永久化（无需`-specs`每次都通过）

```
strace -fF -o /tmp/g++.log g++ test.cpp
grep specs /tmp/g++.log 
```

grep 应该显示`gcc`查找默认`specs`文件的路径。

[规格](https://gcc.gnu.org/onlinedocs/gcc/Spec-Files.html)文件足够灵活，可以根据变量进行条件链接，例如：

```
{!static: %{mabi=n32:-rpath-link %R/lib32:%R/usr/lib32} %{mabi=64:-rpath-link %R/lib64:%R/usr/lib64} %{mabi=32:-rpath-link %R/lib:%R/usr/lib}} 
```

应该使用不同的和多个路径，具体取决于 mabi（尚未测试），`%R`应该是`sysroot`路径，可以使用所需的完整路径进行更改。

还有一个`--with-specs=`选项[gcc configure](https://gcc.gnu.org/install/configure.html)最终将在构建时使用~~，我还不清楚如何与该`link`部分一起使用（正在处理它）~~。

```
--with-specs="%{shared:-Wl,-rpath -Wl,$(DESTDIR)/lib}%{!shared:-Wl,-rpath -Wl,$(DESTDIR)/lib}" 
```

它可以工作，我同时使用了这两种方法`shared`，而`!shared`不仅仅是用于测试，可能应该使用一些更智能的条件，注意它没有报告为`-dumpspecs`.

阅读 gcc 邮件列表的一些线程，我的印象`specs`并不是每个人都喜欢（但如果我没记错的话 4.9 添加另一个选项`--with-extra-specs`）相反，进行此类自定义的首选方式似乎是`configure.host`，但我已经完成了而不是研究它，玩得开心！:-)

另请参阅：[gcc 常见问题解答 rpath](https://gcc.gnu.org/faq.html#rpath)

**以上更新**

我不知道你是否可以设置一个 pre-defined `rpath`，如果你可以的话，可能会在not in的链接器`ld`中，但你为什么要这样做？`binutils``gcc/g++`

只需`LD_LIBRARY_PATH`在运行时和`LD_RUN_PATH`构建时导出

```
export LD_LIBRARY_PATH=/usr/local/lib64:$LD_LIBRARY_PATH
ldd a.out 
```

`ldd`应该显示您导出的路径。

引用使用 libtool 构建共享库时给出的消息：

> 如果您碰巧想要链接给定目录 LIBDIR 中已安装的库，则必须使用 libtool 并指定库的完整路径名，或者在链接期间使用“-LLIBDIR”标志并至少执行以下操作之一下列的：
> 
> *   在执行期间将 LIBDIR 添加到“LD_LIBRARY_PATH”环境变量中
> *   在链接期间将 LIBDIR 添加到 `LD_RUN_PATH' 环境变量
> *   使用 `-Wl,--rpath -Wl,LIBDIR' 链接器标志
> *   让您的系统管理员将 LIBDIR 添加到 `/etc/ld.so.conf'
> 
> 有关更多信息，请参阅有关共享库的任何操作系统文档，例如 ld(1) 和 ld.so(8) 手册页。

**为了完整**起见 ，`Makefile`我用于测试的所有配置选项、环境变量（请参阅引导 ldflags）我试过的都不起作用，`--enable-rpath`包括在内。

将以下`mkdir ~/gcc`内容复制`Makefile`到`~/gcc`then中使用`cd ~/gcc && make build-gcc`

**请注意**，使用的选项仅用于此测试用例，请勿用作参考。

```
FETCH = aria2c --file-allocation=none -c -d dl
NICE = nice -n 19
PARALLEL = -j4
DESTDIR = $(HOME)/gcc/install
SRCDIR = $(HOME)/gcc/src

all:

# if more downloads are added just remove {dl,src}/*-my-stamp not the .bak
# the .bak should avoid to rebuild targets because of timestamp
touch_stamp = if [ -f $@.bak ]; then \
        touch -r $@.bak $@; \
    else \
        touch $@ $@.bak; \
    fi

dl/dl-my-stamp:
    $(FETCH) https://ftp.gnu.org/gnu/gcc/gcc-4.7.2/gcc-4.7.2.tar.bz2
    $(FETCH) http://ftp.gnu.org/gnu/gmp/gmp-4.3.2.tar.bz2
    $(FETCH) ftp://gcc.gnu.org/pub/gcc/infrastructure/mpc-0.8.1.tar.gz
    $(FETCH) https://ftp.gnu.org/gnu/mpfr/mpfr-2.4.2.tar.bz2
    $(FETCH) --check-certificate=false http://www.mirrorservice.org/sites/sourceware.org/pub/binutils/snapshots/binutils-2.24.51.tar.bz2 \
        ftp://sourceware.org/pub/binutils/snapshots/binutils-2.24.51.tar.bz2
    $(touch_stamp)

untar_dep = src/untar-my-stamp
src/untar-my-stamp: dl/dl-my-stamp
    mkdir -p src
    tar -C src -xjf dl/gcc-4.7.2.tar.bz2
    tar -C src -xjf dl/gmp-4.3.2.tar.bz2
    tar -C src -xzf dl/mpc-0.8.1.tar.gz
    tar -C src -xjf dl/mpfr-2.4.2.tar.bz2
    tar -C src -xjf dl/binutils-2.24.51.tar.bz2
    $(touch_stamp)

define configure-rule
$(1)_install = $(DESTDIR)/$(1)-install-my-stamp
$(1)_builddir = $$($(1)_dir)/build
$(DESTDIR)/$(1)-install-my-stamp: $$($(1)_deps)
    mkdir -p $$($(1)_builddir)
    cd $$($(1)_builddir) && \
        $$($(1)_env) ../configure --cache-file=$(SRCDIR)/$(1)-config.cache \
            $$($(1)_configure)
    $(NICE) make -C $$($(1)_builddir) $$($(1)_make_target) $(PARALLEL)
ifneq ($$($(1)_post_make),)
    $$($(1)_post_make)
endif
    touch $$@
.PHONY: build-$(1) clean-$(1)
build-$(1): $$($(1)_install)
clean-$(1):
    -rm -fr $$($(1)_builddir)
endef

gmp_dir = src/gmp-4.3.2
gmp_env =   CONFIG_SITE=$(SRCDIR)/config.site
gmp_configure = --prefix=$(DESTDIR) \
                --disable-shared --enable-static --enable-cxx
gmp_deps = $(untar_dep)
gmp_make_target = install
$(eval $(call configure-rule,gmp))

mpfr_dir = src/mpfr-2.4.2
mpfr_env =  CONFIG_SITE=$(SRCDIR)/config.site
mpfr_configure = --prefix=$(DESTDIR) \
                --disable-shared --enable-static \
                --with-gmp=$(DESTDIR)
mpfr_deps = $(untar_dep) $(gmp_install)
mpfr_make_target = install
$(eval $(call configure-rule,mpfr))

mpc_dir = src/mpc-0.8.1
mpc_env =   CONFIG_SITE=$(SRCDIR)/config.site
mpc_configure = --prefix=$(DESTDIR) \
                --disable-shared --enable-static \
                --with-gmp=$(DESTDIR) --with-mpfr=$(DESTDIR)
mpc_deps = $(untar_dep) $(gmp_install) $(mpfr_install)
mpc_make_target = install
$(eval $(call configure-rule,mpc))

gcc_dir = src/gcc-4.7.2
gcc_env =   CONFIG_SITE=$(SRCDIR)/config.site \
    CFLAGS="-I/usr/include/i386-linux-gnu" \
    CXXFLAGS="-I/usr/include/i386-linux-gnu"
gcc_configure = --prefix=$(DESTDIR) \
                --libdir=$(DESTDIR)/lib \
                --with-local-prefix=$(DESTDIR) \
                --with-gmp=$(DESTDIR) --with-mpfr=$(DESTDIR) \
                --with-mpc=$(DESTDIR) \
                --disable-bootstrap \
                --enable-languages=c,c++ \
                --disable-libgomp --disable-multilib \
                --disable-libmudflap --disable-libssp \
                --disable-libquadmath \
                --enable-rpath \
                MAKEINFO=missing
gcc_deps = $(untar_dep) $(gmp_install) $(mpfr_install) $(mpc_install)
gcc_make_target = 
gcc_post_make = make -C $(gcc_builddir) install
$(eval $(call configure-rule,gcc))

binutils_dir = src/binutils-2.24.51
#binutils_env = LDFLAGS=-Wl,-rpath\ $(DESTDIR)/lib
binutils_env = CONFIG_SITE=$(SRCDIR)/config.site \
    CFLAGS="-I/usr/include/i386-linux-gnu" \
    BOOT_LDFLAGS="-rpath-link=$(DESTDIR)/lib -rpath=$(DESTDIR)/lib"
binutils_configure = --prefix=$(DESTDIR) \
                --libdir=$(DESTDIR)/lib \
                --with-gmp=$(DESTDIR) \
                --enable-rpath
binutils_deps = $(untar_dep) $(gmp_install)
#binutils_make_target = install
binutils_post_make = make -C $(binutils_builddir) install
$(eval $(call configure-rule,binutils))

.PHONY: env
env:
    @echo export PATH=$(DESTDIR)/bin:\$$PATH
    @echo export LIBRARY_PATH=/usr/lib/i386-linux-gnu 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-08T19:04:33.023

我正在安装 httpd-2.4.51 并且需要指定 -rpath 来编译程序。我使用链接器标志`-Wl,-rpath -Wl,LIBDIR`。

使用命令：

```
sudo mv httpd.c /usr/lib #create a .c file and move it to the default directory for the library file
sudo gcc -o httpd httpd.c -L$--prefix=/usr/lib -lhttpd -Wl,-rpath=$--prefix=/usr/lib 
```

您可以检查 gcc 的安装位置：

```
whereis gcc 
```

`gcc: /usr/bin/gcc /usr/lib/gcc /usr/share/man/man1/gcc.1.gz`

# jquery - 使用服务器日期设置 datepicker mindate

> ID：13334301
> 
> 赞同：1
> 
> 时间：2012-11-11T18:53:36.693
> 
> 标签：jquery, jsp, date, datepicker

我想用明天的日期（服务器端，而不是客户端）设置日期选择器。

我从jsp尝试了这个[jquery datepicker set minDate和maxDate，](https://stackoverflow.com/questions/4086825/jquery-datepicker-set-mindate-and-maxdate-from-jsp)并添加了：

```
<% 
try { 
    Date now = new Date();  
    Calendar cal = Calendar.getInstance();  
    cal.setTime(now);  
    cal.add(Calendar.DAY_OF_YEAR, 1); 
    Date tomorrow = cal.getTime(); 
    SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");

}   catch (Exception e) {
      System.out.println(e.getStackTrace());               
}
%>
<script type="text/javascript">
    var date = '<%=sdf.format(tomorrow) %>'; 
```

但我同时获得了`sdf cannot be resolved`例外`tomorrow cannot be resolved`。

我在jsp页面中`java.util.*`都导入了：`java.text.SimpleDateFormat`

```
<%@ page import="java.text.SimpleDateFormat" %>
<%@ page import="java.util.*" %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T19:36:45.510

你可以使用[jstl](http://www.java2s.com/Code/Java/JSTL/JSTLFormatDate.htm)吗？

```
<%@ taglib uri="http://java.sun.com/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jstl/core-rt" prefix="c-rt" %>
<%@ taglib uri="http://java.sun.com/jstl/fmt" prefix="fmt" %>

<c-rt:set var="now" value="<%=new java.util.Date()%>" />

<script type="text/javascript">
    var date = '<fmt:formatDate value="${now}" type="both" timeStyle="long" dateStyle="long" />'; 
.... 
```

# python - 用于数据表操作的 .txt 与 .csv 文件格式

> ID：13334304
> 
> 赞同：3
> 
> 时间：2012-11-11T18:53:42.670
> 
> 标签：python

我正在开发一个程序，该程序需要从 excel 表中读取值，然后对它们进行一些操作并将结果另存为新文件。

由于 python 无法直接读取 excel 文件，我首先必须将文件转换为 .txt 或 .csv。这让我想到这两种文件格式之间是否有任何真正的区别。第一个只是用 \t 分隔两列，另一列用分号分隔（在 python 中使用 .read() 函数时）。如果没有，为什么一个人更喜欢 .txt 而不是另一个，反之亦然？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:33:29.670

正如 TokenMacGuy 所指出的，TXT 不是一种文件格式，它在不同的上下文中可能意味着多种东西。通常，您以 CSV（逗号分隔值）或 TSV（制表符分隔值）导出表格。您应该选择哪个主要取决于您的数据：如果您的数据中有逗号但没有制表符，您应该选择 TSV。大多数程序应该引用您的单元格（在每个单元格的开头和结尾插入引号）。

最后，关于如何在 python 中实际读取这些文件，您可以手动完成并冒险升级办公室，或者使用[stdlib 中的正确模块，该模块具有出色的文档](http://docs.python.org/2/library/csv.html)

# c# - 创建编号 RichtextBox 的最佳方法是什么？

> ID：13334306
> 
> 赞同：0
> 
> 时间：2012-11-11T18:53:45.110
> 
> 标签：c#, wpf, richtextbox

目标是将一列段落编号添加到 RichTextBox（数字显示该richtextbox.Document.Blocks 中的段落索引）。目前，我在 RichTextBox 的 LayoutUpdated 事件中使用了这段代码：

```
bool _added=false
void onLayoutUpdated(object sender, EventArgs e)
{
   if (!_added)
   {
      _added= true;
      scv = Helper.GetFind.FindChild<ScrollViewer>(this, null);
      if (scv != null)
      {
         FrameworkElement  documentView = scv.Content as FrameworkElement;
         scv.ClearValue(ScrollViewer.ContentProperty);
         Grid grid= new Grid(); 
```

...我会谈谈我在这里添加的内容...

```
 scv.Content = grid;
         UpdateLayout();
      }
   }
} 
```

在**grid**中，我添加了两列，第一列是 StackPanel，第二列是**documentView**。对于每个段落，我将 TextBlock 添加到 StackPanel.Children，并使用 Paragraph.ElementStart.GetCharacterRect(LogicalDirection.Forward) 方法和返回的*Rect* (s) 的顶部和底部属性设置每个文本块的高度。

一切都很好，当段落少于 500 时，编号会快速更新，但是随着文本变大，它会变慢。我怎样才能使它更有效率？我应该使用 Canvas 而不是 StackPanel 吗？或者有没有更好的方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T20:00:48.203

列表视图网格视图。支持虚拟化。我在一些非常大的文档中为每一行使用文本块，效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:22:17.863

我使用了我在问题中提到的程序，然后是`Dispacher.BeginInvoke(...)`方法。我设置`DispatcherPriority`为`ApplicationIdle`. 我在 Width 更改或`Paragraph`添加新时调用它。像这样：

```
 _updateIfWidthChangedDispacherO= _ownerTextBox.Dispatcher.BeginInvoke((Action)(() =>
        {
            updateIfWidthChanged();
        }),
        DispatcherPriority.ApplicationIdle); 
```

# jsp - 执行更新（）不起作用

> ID：13334310
> 
> 赞同：0
> 
> 时间：2012-11-11T18:54:02.307
> 
> 标签：jsp

```
Class.forName("com.ibm.db2.jcc.DB2Driver"); 

Connectioncon=DriverManager.getConnection("jdbc:db2://localhost:50000/TEST","db2admin","db2admin"); 

Statement stmt=con.createStatement();

String v=request.getParameter("val");

String query="insert into value values('"+v+"')";

stmt.executeUpdate(query);               

stmt.close();

con.close(); 
```

****我收到一条错误消息，指出服务器在为 executeUpdate() 命令提供服务时遇到错误。似乎无法弄清楚问题所在。我正在使用 IBM DB2。请帮忙...****

 *****在这里，这是我不断收到的错误***

```
HTTP Status 500 -

type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

org.apache.jasper.JasperException: An exception occurred processing JSP page /check.jsp at line 26

23:         String read = "insert into `value` values(?)";
24:         PreparedStatement p = (PreparedStatement) con.prepareStatement(read);
25:         p.setString(1, request.getParameter("val"));
26:         p.executeUpdate();             
27:         p.close();
28:         con.close();
29:         out.println("Everything done..."); 

Stacktrace:
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:567)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:456)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
root cause

javax.servlet.ServletException: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-7, SQLSTATE=42601, SQLERRMC=`;insert into , DRIVER=3.62.56
    org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:911)
    org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:840)
    org.apache.jsp.check_jsp._jspService(check_jsp.java:99)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:433)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
root cause

com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-7, SQLSTATE=42601, SQLERRMC=`;insert into , DRIVER=3.62.56
    com.ibm.db2.jcc.am.fd.a(fd.java:676)
    com.ibm.db2.jcc.am.fd.a(fd.java:60)
    com.ibm.db2.jcc.am.fd.a(fd.java:127)
    com.ibm.db2.jcc.am.jn.c(jn.java:2614)
    com.ibm.db2.jcc.am.jn.d(jn.java:2602)
    com.ibm.db2.jcc.am.jn.a(jn.java:2094)
    com.ibm.db2.jcc.am.kn.a(kn.java:6720)
    com.ibm.db2.jcc.t4.cb.g(cb.java:141)
    com.ibm.db2.jcc.t4.cb.a(cb.java:41)
    com.ibm.db2.jcc.t4.q.a(q.java:32)
    com.ibm.db2.jcc.t4.rb.i(rb.java:135)
    com.ibm.db2.jcc.am.jn.gb(jn.java:2064)
    com.ibm.db2.jcc.am.kn.pc(kn.java:3214)
    com.ibm.db2.jcc.am.kn.b(kn.java:3999)
    com.ibm.db2.jcc.am.kn.dc(kn.java:746)
    com.ibm.db2.jcc.am.kn.executeUpdate(kn.java:729)
    org.apache.jsp.check_jsp._jspService(check_jsp.java:85)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:433)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T19:03:42.233

您是否尝试过硬编码该值并查看它是否有效？您是否尝试过直接在数据库上执行您的 sql 语句以确保您具有正确的语法？请参阅下面的安全插入示例。

```
 Class.forName("com.mysql.jdbc.Driver").newInstance();
        Connection con = (Connection) DriverManager.getConnection(DBurl, user, password);
        String read = "insert into `value` values(?)";
        PreparedStatement p = (PreparedStatement) con.prepareStatement(read);
        p.setString(1, request.getParameter("val"));
        p.executeUpdate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T18:16:10.707

如果您尝试插入的数据类型是 BIGINT，那么`p.setString`将不起作用，因为 setString 用于设置字符数据类型。

你必须使用

```
p.setLong(1, request.getParameter("val")); 
```

[请参阅此处](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=%2Fcom.ibm.db2.luw.apdv.java.doc%2Fsrc%2Ftpc%2Fimjcc_rjvjdata.html)的文档**

# matlab - 绘制复杂函数

> ID：13334311
> 
> 赞同：3
> 
> 时间：2012-11-11T18:54:08.813
> 
> 标签：matlab, plot

Matlab中如何绘制复杂的函数？例如：

```
Y[e^jx] = 1 / (1 - cosx + j4) 
```

我尝试了一些代码，但我认为正确的方法是分别绘制实部和虚部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T20:30:53.890

有一些特定于绘制复杂地图的 MATLAB 函数：

```
z = cplxgrid(60);
cplxmap(z, 1./(1 - cos(z) + 4*i)); 
```

另请参阅[MATLAB 文档中的复变量函数](http://www.mathworks.com/products/matlab/examples.html?file=/products/demos/shipping/matlab/cplxdemo.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T19:34:35.423

```
x = linspace(-pi, pi, 1e3);
y = 1./(1 - cos(x) + i*4);

% Plot absolute value and phase
figure;
subplot(2,1,1); plot(x, abs(y));
subplot(2,1,2); plot(x, angle(y));

% Plot real and imaginary parts
figure;
subplot(2,1,1); plot(x, real(y));
subplot(2,1,2); plot(x, imag(y)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-05T08:15:06.077

也许不适合你，但适合其他想要绘制复杂函数的人。我们建立了一个网站，您可以在其中快速渲染并下载它们（reflex4you.com，reflex = 复杂函数的表示）

我可以以丰富多彩的方式在 2D 中显示复杂的功能。您的功能可以在 [此处](http://www.reflex4you.com/?name=.formula&formula=1%2F(1%20-%20cos(z)%20%2B%20i*z))和下方可见：

请注意，黑色是零，白色是无限的，它用与复数相关的颜色覆盖复平面，例如红色 = 1，青色 = -1，i = 绿色，-i = 紫色。

![他要求的功能的反射。](../Images/60e7d1f934b13b8786429195c948e0b3.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T18:58:42.770

您可以使用以下方法之一：

*   `plot(real(Y))`
*   `plot(imag(Y))`
*   `plot(real(Y),imag(Y))`
*   `plot(abs(Y))`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T23:33:36.687

默认情况下，`plot(X)`将绘制实数与虚数，因此它等于`plot(real(X), imag(X))` 例如，尝试：

```
>> r = sort(rand(10, 1)) + 1i * rand(10, 1);
>> figure, plot(r) 
```

如果您在 y 轴上都需要它们，请使用：

```
plot([real(X), imag(X)]) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-11T19:42:04.120

```
plot(re(Y),im(Y)) 
```

但请记住，在您的情况下，有一个与复杂函数相关联的域有效：cos(x)-4j < 1

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-26T12:21:13.180

作为 Python 的替代方案，您可以使用我编写的工具：[cplot](https://github.com/nschloe/cplot)。它使用[域着色](https://en.wikipedia.org/wiki/Domain_coloring)来进行复杂的绘图，即它将 的绝对值`f(z)`与亮度相关联，将色相与复杂的角度相关联。

你的功能：

```
import cplot
import numpy as np

plt = cplot.plot(lambda z: 1 / (1 - np.cos(z) + 4j), (-10, +10, 400), (-10, +10, 400))
plt.show() 
```

[![在此处输入图像描述](../Images/3e0bb71d8dd6ae0fd0faef7881a61dd0.png)](https://i.stack.imgur.com/7cnj9.png)

# android - 根据设备/屏幕大小定义不同的 XML 布局？

> ID：13334313
> 
> 赞同：0
> 
> 时间：2012-11-11T18:54:15.910
> 
> 标签：android, xml, android-layout, screen-size, android-screen-support

我在这个论坛和其他论坛上阅读了很多关于根据所使用的设备使用不同布局的帖子。

下面是我的布局文件夹的截图：

![布局文件夹](../Images/e358bd3accf9d92893687c818ec2cbe9.png)

现在，我尝试了许多不同的变体来尝试改变 XML 布局。该项目是使用手机设计的，我现在正在 10.1 英寸三星 Galaxy 平板电脑上进行测试。

尽管有所有这些布局，我的应用程序仍然使用默认的 .xml 文件。

有什么想法我会出错或尝试其他变体吗？

我应该说我将用户锁定为纵向模式，因此使用 -port 进行了一些布局。

任何帮助都会很棒

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T19:12:20.037

您需要将 layout-large、layout-sw400dp-port、... 文件夹与布局文件夹放在同一级别，而不是将它们放在布局文件夹中。您的文件夹结构应如下所示 -

> ```
> /res/layout/
> /res/layout-large/
> /res/layout-sw400dp-port/main.xml 
> ... 
> ```

# c# - 获取 umbraco 选项卡上的所有属性

> ID：13334319
> 
> 赞同：2
> 
> 时间：2012-11-11T18:54:59.210
> 
> 标签：c#, user-controls, umbraco

我试图在这里找出 umbraco API。在一段代码中，我试图列出选项卡上的所有属性。我知道我可以通过以下方式获得这些：

```
 MyTab.PropertyTypes 
```

但是这个属性被声明为“过时的”（不推荐使用），它指的是函数 GetPropertyTypes(int)。然而，这个函数需要一个参数“ContentTypeId”，我不确定我应该指定什么。我想要所有属性，而不仅仅是某种类型的属性。

我尝试查找有关此功能的文档，但找不到任何文档。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:03:36.117

希望这可以帮助：

```
DocumentType dt = new DocumentType(1051); //id of documenttype
        foreach (ContentType.Tab x in dt.getVirtualTabs)
        {
            List<PropertyType> Properties = x.GetAllPropertyTypes();

            foreach (var propertyType in Properties)
            {
                propertyType.Name;
            }      
 } 
```

# mediawiki - 在 MediaWiki 中查找所有“此页面不存在”

> ID：13334320
> 
> 赞同：2
> 
> 时间：2012-11-11T18:55:07.437
> 
> 标签：mediawiki

我在我的 wiki 上写了一些文章，但链接到我稍后要创建的页面。现在当您查看页面时，“页面不存在”

有没有办法在 wiki 的每个页面上获取所有“页面不存在”的列表？

我尝试了损坏的重定向，但我得到的只是

> 损坏的重定向跳转到：导航，搜索以下重定向链接到不存在的页面：
> 
> 此报告没有结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T19:20:18.803

您正在寻找的内容在 Mediawiki 中被称为“想要的页面”。查看您的`Special:WantedPages`页面。一个特别有用的功能是页面按链接最多的页面排序，因此最“想要”的页面位于顶部。在标准安装中，它看起来像[这样](https://en.wikipedia.org/wiki/Special:WantedPages)。

# c# - 检查是否列表 元素包含具有特定属性值的项目

> ID：13334321
> 
> 赞同：3
> 
> 时间：2012-11-11T18:55:08.247
> 
> 标签：c#, linq

```
public class Item
{
    public List<int> val { get; set; }
    public double support { get; set; }
} 
```

我声明变量：

```
List<Item> t = new List<Item>();
t.Add(new Item(){val = new List<int>(){1,2,3};support=.1);
var b = new Item();
b.val = t[0].val;
b.support=t[0].support;
t.Contain(b) // return false??? 
```

我正在尝试使用 linq

```
t.Any(a=>a.val==b.val) // I'm get error Expression cannot contain lambda expressions 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T19:05:19.257

想到3种可能性：

你可以实现[`IEquatable<T>`](http://msdn.microsoft.com/en-us/library/ms131187.aspx)：

```
public class Item: IEquatable<Item>
{
    public List<int> val { get; set; }
    public double support { get; set; }

    public bool Equals(Item other)
    {
        return
            this.support == other.support &&
            this.val.SequenceEqual(other.val);
    }
} 
```

现在`t.Contains(b)`将返回 true。

* * *

如果你不能修改`Item`类，你可以编写一个自定义[EqualityComparer](http://msdn.microsoft.com/en-us/library/ms132123.aspx)：

```
public class ItemEqualityComparer : IEqualityComparer<Item>
{
    private ItemEqualityComparer()
    {
    }

    public static IEqualityComparer<Item> Instance
    {
        get
        {
            return new ItemEqualityComparer();
        }
    }

    public bool Equals(Item x, Item y)
    {
        return
            x.support == y.support &&
            x.val.SequenceEqual(y.val);
    }

    public int GetHashCode(Item obj)
    {
        int hash = 27;
        hash += (13 * hash) + obj.support.GetHashCode();
        foreach (var item in obj.val)
        {
            hash += (13 * hash) + item.GetHashCode();
        }
        return hash;
    }
} 
```

然后`t.Contains(b)`也会返回`true`。

* * *

或者，如果您更喜欢简单地做它：

```
List<Item> t = new List<Item>();
t.Add(new Item { val = new List<int>(){1,2,3}, support=.1 });

var b = new Item();
b.val = t[0].val;
b.support = t[0].support;

bool equals = t.All(item => item.support == b.support && item.val.SequenceEqual(b.val));
Console.WriteLine(equals); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T19:02:49.393

你`t.Any(a=>a.val == b.val)`是正确的。

您得到的错误来自调试器中的快速监视或表达式窗口，而不是来自编译器。Visual Studio 的表达式求值器不处理 lambda。但是，它仍然是有效的 c# 代码，并且会做你想做的事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T19:03:50.940

这是您之前的问题：

```
t.Add(new Item(){val = new List<int>(){1,2,3};support=.1); 
```

这是各种不同语法位的混合。它应该是：

```
t.Add(new Item(){val = new List<int>(){1,2,3}, support=.1}); 
```

...尽管最好使用更好的属性名称等。然后其余的应该可以工作-尽管您需要对`Any`. `Any`调用本身是有效的。这是一个简短但完整的程序，它可以工作：

```
using System;
using System.Collections.Generic;
using System.Linq;

public class Item
{
    public List<int> Values { get; set; }
    public double Support { get; set; }
}

class Test
{
    static void Main()
    {
        List<Item> list = new List<Item>
        {
            new Item { Values = new List<int>{1, 2, 3},
                       Support = 0.1 }
        };

        var check = new Item { Values = list[0].Values,
                               Support = list[0].Support };

        bool found = list.Any(a => a.Values == check.Values);
        Console.WriteLine(found);
    }
} 
```

请注意，这是在两个列表之间执行*参考*比较 - 如果您创建了具有相同值（1、2、3）的不同列表，则不会找到该列表。你需要使用`a.Values.SequenceEqual(b.Values)`或类似的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T19:06:57.153

你的`Item`类应该实现`IEquatable`接口：

```
class Item : IEquatable<Item>{
    public List<int> val { get; set; }
    public double support { get; set; }

    public bool Equals(Item item){
       return this.support.Equals(item.support) && this.val.SequenceEqual(item.val);          
    }
} 
```

那么这个`Contains()`方法应该很好用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T19:09:18.257

您可以将您的
“ `t.Contain(b)`”更正
为您的课程
`t.Contains(b, new ItemEqualityComparer())`从`System.Linq`
哪里开始`ItemEqualityComparer`，这将实施`IEqualityComparer<Item>`

# flash - 当鼠标悬停在 swf 上时开始？

> ID：13334323
> 
> 赞同：0
> 
> 时间：2012-11-11T18:55:13.957
> 
> 标签：flash, flash-builder, tween

嗨，我一直试图让它工作很长时间，但没有运气。我希望当您滚动 swf 时，它会开始补间直到完成（即使您将鼠标从 swf 上移开），如果您再次将鼠标悬停在它上面，它会从头开始。正如您在下面看到的那样，我已经尝试过这样做......我在鬃毛场景中有三层：

> **带有代码的操作**（直到最后一帧）：

```
'var Tragic:URLRequest = new URLRequest("MM_openBrWindow('http://tragicclothing.co.uk/playlist.html','','scrollbars=yes,width=750,height=10000000')");

btn.addEventListener(MouseEvent.ROLL_OVER, btnOver);
btn.addEventListener(MouseEvent.ROLL_OUT,btnOut);
btn.addEventListener(MouseEvent.CLICK,btnClick);

function btnOver(event:MouseEvent):void{
btn.gotoAndPlay("Over");
}
function btnOut(event:MouseEvent):void{
btn.gotoAndPlay("Out");
}
function btnClick(event:MouseEvent):void{
navigateToURL(Tragic)
}
btn.buttonMode=true;' 
```

.

> **基础**（帧直到结束）与补间

.

> **标签**，在其命名为 Over 的末尾有一个帧，在命名为 Out 的末尾有 1 个帧

我为影片剪辑（在 Base 上使用）提供了实例名称“btn”

（这都是使用 Adob​​e Flash CS6 完成的）

谢谢

最大限度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:46:50.320

```
stop(); 

stage.addEventListener(MouseEvent.MOUSE_OVER, playMovie); 

function playMovie(event) { play(); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T13:43:29.317

这是一个焦点问题，而是在舞台上添加您的事件，如下所示：

```
stage.addEventListener(MouseEvent.ROLL_OVER, btnOver);
stage.addEventListener(MouseEvent.ROLL_OUT,btnOut);
stage.addEventListener(MouseEvent.CLICK,btnClick); 
```

# c - 使用 GCC 将 warn_unused_result 应用于所有函数

> ID：13334324
> 
> 赞同：10
> 
> 时间：2012-11-11T18:55:20.580
> 
> 标签：c, gcc, compiler-construction, compiler-warnings

即使没有相应的属性，是否可以告诉 GCC 对所有函数使用**warn_unused_result标志？**因为如果我忘记检查返回值，我也会忘记添加 GCC 特定属性。

我已经看到它可以与其他一些编译器一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T19:08:27.720

不，您只能告诉 gcc 忽略所有`warn_unused_result`标志，`-Wno-unused-result`但各自`-Wunused-result`仅设置默认值（仅在标志上发出警告）。如果它可以被激活但它没有被激活，那么编译`-Wall -Wextra -pedantic`应该会触发一个警告，所以它不能。

除此之外，我想知道你为什么想要这个，忽略函数的结果并不少见，所有库都可能产生大量警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-19T20:59:22.623

虽然 GCC 似乎不可能，但您可以运行静态分析器（如 Coverity 和 lint）来捕获这些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-12T14:28:04.000

在[elfs-clang-plugins](https://github.com/sinelaw/elfs-clang-plugins)（由我自己编写，开源）中有一个 clang 插件可以提供帮助。

虽然不适用于 GCC，但它仍然很有用，例如，如果您可以将其添加到 CI 把关流程（如果您有的话）或只是偶尔手动运行一次。

**warn_unused_result 插件将为缺少 warn_unused_result 属性**的函数发出警告。该插件仅考虑在当前编译单元中声明或定义的函数，因此外部库不会添加噪音。

该插件接受一个可选参数 --static-only ，这会导致它仅警告静态函数（因为更改外部 API 的工作量太大）。

例子：

```
int foo(void); 
```

编译器输出：

```
/tmp/test.c:1:5: warning: missing attribute warn_unused_result
int foo(void); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-27T03:29:43.413

使用 objc 时，您可以`warn_unused_result`像这样抑制警告，

```
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Wunused-result"
    [YPKWhatsNewContainerViewModel checkWhatsNew]; // return value should be ignored
#pragma clang diagnostic pop 
```

# android - “构建您的第一个应用程序”应用程序未出现在启动器中

> ID：13334326
> 
> 赞同：0
> 
> 时间：2012-11-11T18:55:32.920
> 
> 标签：android, android-sdk-2.3

重新 android-sdk_r20.0.3-linux（在 Debian Squeeze 上）

我正在尝试使用命令行工具遵循“构建您的第一个应用程序”教程。apk 文件成功创建，“adb install”也报告“成功”，安装到模拟器和 razr maxx (Android 4.0.4) 上。但在这两种情况下，应用程序都不会出现在启动器或应用程序管理器中。

细节：

该应用程序是使用命令创建的

> android\
> 创建项目\ --target
> android-16\--
> name AAP1\
> --path ~xxx/AAP1\
> --activity MainActivity\
> --package com.aap1

清单（由“android create”创建）是

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.aap1"
      android:versionCode="1"
      android:versionName="1.0">
    <application android:label="@string/app_name" android:icon="@drawable/ic_launcher">
        <activity android:name="MainActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

我很感激对此的任何想法。我怀疑有一些小的变化可以解决这个问题，但我没有发现任何东西表明它可能是什么。

仅供参考，我也使用 eclipse 插件尝试过这个并遇到了同样的问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T19:05:19.163

改变

`<activity android:name="MainActivity" android:label="@string/app_name">` 至

```
<activity android:name=".MainActivity"
          android:label="@string/app_name"> 
```

注意“。” 在 MainActivity 之前

# php - 选项根据来自 db 和 php 的值选择

> ID：13334332
> 
> 赞同：0
> 
> 时间：2012-11-11T18:56:29.447
> 
> 标签：php, mysql, html

如何根据 db 和 php 的值选择选项。例如；

```
<select>
  <option value="1">Val1</option>
  <option value="2">Val2</option>
  <option value="3">Val3</option>
  <option value="4">Val4</option>
  <option value="5">Val5</option>
</select> 
```

当 value=3 改变

```
<option value="3" selected="selected">Val3</option> 
```

我怎样才能用 php&mysql 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T19:00:18.643

你需要类似的东西

```
<?
   $values = array(); // array from DB
   $selectedKey = 10; // some key
?>
<select>
   <? foreach ($values as $key => $value) { ?>
      <option value="<?=$key?>" <?= $key==$selectedKey ? 'selected' : ''?>> <?=$value?> </option>
   <? } ?>
</select> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T19:13:07.460

希望这可以帮助

```
<select>
    <?php
    $value = 3; // Desired Value
    $sql ='' ;// sql to get values from mysql
    $res = mysql_query($sql);
    while($row=mysql_fetch_array($res))
    {?>
     <option value="<?php echo $row['id'];?>" <?phh if($row['id']==$value)echo "selected='selected'"  ; ?> ><?php echo $row['name']; ?></option>
    <?php }
    ?>
</select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T18:58:56.143

在打印出可能值的循环中，将每个值与从数据库获取的值进行比较。如果它们匹配，则添加`selected`属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T19:24:55.317

首先给选择标签一个名字。

```
     <选择名称=“名称”>

```

通过 mysql_query 获取表行到 $row_set 数组
如果说要搜索的值是 $search

```
而($row = mysql_fetch_array($row_set))
if($row['column_name']==$search) echo "<option value='{$row['value']}' selected='selected'>{$row['name']}</option> ";

```

# api - 是否可以在一次通话中获得具有foursquare id 的位置的instagram 媒体？

> ID：13334334
> 
> 赞同：0
> 
> 时间：2012-11-11T18:56:35.313
> 
> 标签：api, foursquare, instagram

我有一堆foursquare id，我希望能够使用这些foursquare id 提取instagram 媒体。

目前我只看到一种方法来做到这一点，它需要两个 API 调用。您必须首先使用foursquare_v2_id（[示例调用](https://api.instagram.com/v1/locations/search?access_token=%3CACCESS_TOKEN%3E&foursquare_v2_id=447bf8f1f964a520ec331fe3)）调用搜索API。这将返回 Instagram ID。然后我必须使用 instagram id 对媒体 API 进行第二次调用以检索媒体（[示例调用](https://api.instagram.com/v1/locations/3000299/media/recent?access_token=%3CACCESS_TOKEN%3E)）。

有谁知道如何仅通过一个 api 调用来实现这些结果（仅基于foursquare_id 获取位置的媒体）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T21:18:22.977

您可以通过foursquare API 和venues/photos 端点获取此信息。[请参阅此处](https://developer.foursquare.com/docs/venues/photos)的文档。

这将返回场地的照片列表，包括它们的来源。您可以使用它来返回场地的所有图像，或仅返回来自 instagram 的图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T19:46:59.527

联系 Instagram 后，很明显目前无法执行此操作。如果情况发生变化，我会回来并用正确的解决方案重新回答这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-06T06:18:48.067

我认为您必须使用以下 api 用户才能获取 instagram 图片：

```
https://api.foursquare.com/v2/venues/423a1a00f964a5202f201fe3/photos?oauth_token=Z5RRDGQUWEAFCANX2OT0R2O5QUWYOP1EMOCNXT1PQWKMHVNG&v=20130706&limit=200 
```

使用foursquare id 和foursquare ourh 令牌，您可以获得特定的场地图像。

作为回应，您可以检查“来源”：{“名称”：“Instagram”，“url”：“http://instagram.com”}。源名称是 Instagram 意味着它是 Instagram 图像。

```
Refer: https://developer.foursquare.com/docs/venues/photos 
```

# python - 如何在python中有效地加载大文本文件

> ID：13334344
> 
> 赞同：3
> 
> 时间：2012-11-11T18:57:57.117
> 
> 标签：python, file, search, file-io, full-text-search

我有一个包含 7000 行字符串的文本文件。我必须根据几个参数搜索特定的字符串。

有人说下面的代码效率不高（速度和内存使用）。

```
f = open("file.txt")
data = f.read().split() # strings as list 
```

1.  首先，如果连列表都没有，我怎么会开始搜索呢？
2.  加载整个文件是否有效？如果没有，怎么办？
3.  要过滤任何内容，我们需要搜索我们需要正确阅读的内容！

有点迷茫

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T18:59:29.730

遍历文件的每一行，而不存储它。这将使程序内存高效。

```
with open(filname) as f:
   for line in f:
      if "search_term" in line:
           break 
```

# c - 为什么 C 程序返回一个 int？

> ID：13334346
> 
> 赞同：1
> 
> 时间：2012-11-11T18:58:05.573
> 
> 标签：c

如果我告诉编译器返回任何其他内容，我通常会收到编译器的警告。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T18:59:00.973

这是提供给调用程序的人的退出代码。非零值通常表示错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-11T19:03:28.777

简短的回答：因为这就是 C 标准所说的：

### 5.1.2.2.1 程序启动

> 1 程序启动时调用的函数名为`main`。实现没有声明这个函数的原型。**它应该被定义为返回类型`int`**和不带参数：
> 
> `int main(void) { /* ... */ }`
> 
> 或有两个参数（这里称为`argc`和`argv`，尽管可以使用任何名称，因为它们对于声明它们的函数是局部的）：
> 
> `int main(int argc, char *argv[]) { /* ... */ }`
> 
> 或等效的；^(9))或以其他一些实现定义的方式。（强调我的）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T19:07:28.903

C 标准要求它，因为没有机制可以与环境通信，您将返回除整数值之外的其他内容。因此，`int`是唯一可能的类型；它涵盖了所有平台以及他们期望进程返回给他们的预期数字范围。

# qt - CmakeMakeFiles 中不存在的旧版本 Qt

> ID：13334351
> 
> 赞同：1
> 
> 时间：2012-11-11T18:58:29.723
> 
> 标签：qt, caching, makefile, cmake

我正在尝试在 Windows 7 上使用 mingw32 编译我使用 Qt、ITK、VTK 构建的软件。我已经在许多计算机上成功完成了此操作，但我的笔记本电脑遇到了问题。

我第一次在这台机器上安装 Qt 时犯了一个错误，因为我安装了 Qt 的“msvc2010”或 Visual Studio 版本。我安装了VS，这是它的默认设置，我没有更改它。意识到我的错误，我卸载了这个Qt的所有痕迹，并安装了Mingw32版本。我下载的确切版本是：Qt libraries 4.8.3 for Windows (minGW 4.4, 317 MB)

我安装了mingw32，安装了qt，一切都很好，花花公子，现在我正在编译我的软件。它构建得很漂亮，但是在链接阶段我收到以下令人讨厌的错误：

```
mingw32-make[2]: *** No rule to make target 'C:/QtSDK/Desktop/Qt/4.8.1/msvc2010/
lib/QtOpenGL4.dll', needed by 'x.exe'.  Stop.
CMakeFiles\Makefile2:62: recipe for target 'CMakeFiles/x.dir/all' failed
mingw32-make[1]: *** [CMakeFiles/x.dir/all] Error 2
Makefile:74: recipe for target 'all' failed
mingw32-make: *** [all] Error 2 
```

其中 x 是我的项目的名称。

注意 make 目标：**C:/QtSDK/Desktop/Qt/4.8.1/msvc2010/lib/QtOpenGL4.dll**。这不是查找 DLL 的正确位置。它正在查看我**第一次**安装 Qt 的 lib 位置。QtSDK 文件夹甚至不存在了，新版本在不同的文件夹下。

遗憾的是，这也反映在由 cmake 在 build 文件夹中生成的 CMakeFiles 下的 link.txt 中。其中一项是：C:\QtSDK\Desktop\Qt\4.8.1\msvc2010\lib\QtGui4.dll 以及许多其他 DLL。

显然，问题在于 Cmake 正在**为先前版本的 Qt 生成目标。**

**我怎样才能擦除它所源自的任何荒谬的缓存，以便它不会这样做？** 我已经重新安装了 Cmake，我已经重新安装了 Qt，我已经做了我能想到的一切。我已经验证 Cmake 变量都指向正确的 Qt 文件夹（另一个不存在，所以如果它们不正确，我们将无法进入链接阶段）。

太感谢了。

编辑：

我收到了这个非常相关的警告，其中包含糟糕的文件路径：

```
CMake Warning (dev) at CMakeLists.txt:22 (ADD_EXECUTABLE):
 Policy CMP0003 should be set before this line.  Add code such as

if(COMMAND cmake_policy)
  cmake_policy(SET CMP0003 NEW)
   endif(COMMAND cmake_policy)

 as early as possible but after the most recent call to
 cmake_minimum_required or cmake_policy(VERSION).  This warning appears
 because target "x" links to some libraries for which the linker must
 search:

comctl32, vfw32, ws2_32, wsock32, -lgdi32, opengl32

 and other libraries with known full path:

C:/Qt/4.8.3/lib/libQtGui4.a
C:/ITK/lib/libitksys-4.1.dll.a
C:/VTK/bin/libQVTK.a
C:/QtSDK/Desktop/Qt/4.8.1/msvc2010/lib/QtOpenGL4.dll

 CMake is adding directories in the second list to the linker search path in
 case they are needed to find libraries from the first list (for backwards
 compatibility with CMake 2.4).  Set policy CMP0003 to OLD or NEW to enable
 or disable this behavior explicitly.  Run "cmake --help-policy CMP0003" for
 more information.
 This warning is for project developers.  Use -Wno-dev to suppress it. 
```

我添加了“新”策略，警告消失了，但我仍然遇到同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:38:36.797

问题原来是我在安装旧 Qt（为安装 VS2010 配置）时安装了 VTK。当我包含 VTK 的库时，它还包含来自 Qt 的 DLL——但它仍然指向旧的 Qt。

我重新安装了VTK，我们通过了这一步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T19:05:30.843

尝试重新生成`cmake`文件，：

```
mingw32-make clean
cmake . 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T10:51:48.277

短版：您需要删除`CMakeCache.txt`构建目录中的文件。

长版本：每当 CMake 搜索外部库/程序等时（例如，`FIND_LIBRARY`在搜索 Qt 时调用它），它会将结果保存在缓存中。在随后的运行中，它只是使用缓存的值（如果有的话）而不是再次搜索库。因此，您需要删除这些缓存条目，以便 CMake 真正再次*搜索*这些库。只需删除`CMakeCache.txt`并重新开始。如果两个版本并行安装，请确保`QTDIR`环境变量设置正确且路径包括`<QTDIR>/bin`，因为 CMake 依赖于`qmake`查找相关库。

*注意：*如果您不想删除整个缓存，也可以删除 Qt 相关变量。

```
cmake -U *QT_* . 
```

应该做的伎俩。

但是，删除整个缓存是最干净的解决方案。

# c - 如何将字符串数组附加到共享内存？C

> ID：13334352
> 
> 赞同：0
> 
> 时间：2012-11-11T18:58:40.617
> 
> 标签：c, arrays, string, ipc, shared-memory

第一次使用共享内存，我的项目是让读取器和写入器访问共享字符串并修改或读取它们等。我知道 malloc 不起作用但不确定如何将二维字符串数组附加到内存，我继续从编译器那里得到这个：

警告：赋值从没有强制转换的指针生成整数

```
 int array_id;                         // id for the shared memory segment
    char records[10][50];                // the shared memory segment array

    // attach the reader to the shared segment
    fread(&newrecord, sizeof(id_record), 1, id_file);
    array_id = newrecord.id;

    printf("%d\n", array_id);

    records[0][0] = (char**) shmat(array_id, (void*) 0, 0);
    if (records[0] == (void*)-1) {
            perror("Array Attachment Reader");
    } 
```

arrayid 是正确的，我已经三重检查了它没有提出来。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T19:08:36.363

您将需要附加共享内存，但存储指针：

```
char (*records)[10][50];   // Pointer to an array

records = shmat(array_id, (void *)0, 0);

if ((void *)records == (void *)-1) ...error...

strcpy((*records)[0], newrecord); 
```

您试图更改`records`存储数组的地址；C不允许这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T19:07:45.083

不要这样使用，因为`records[0][0]`它的`char`类型不是`(char**)`

# objective-c - componentsSeparatedByString 无法将字符串与值进行比较

> ID：13334355
> 
> 赞同：1
> 
> 时间：2012-11-11T18:58:50.387
> 
> 标签：objective-c, arrays, string

当我使用 xcode 中的 componentsSeparatedByString 函数将字符串分成数组时，我遇到了这个问题。

所以我从这个字符串创建一个数组：

```
theDataObject.stringstick = @"1 0 0 0 0 0 0 0 1 0 1 1 1 0 0 0";

stickerarray = [[NSMutableArray alloc] initWithArray:[theDataObject.stringstick componentsSeparatedByString:@" "]]; 
```

所以在我看来，我期望：

```
stickerarray = {@"1",@"0",@"0",@"0",@"0",@"0",@"0",@"0",@"1",@"0",@"1",@"1",@"1",@"0",@"0",@"0"} 
```

所以当我通过 if 语句检查索引是否 = 1

```
for ( int n = 0; n <= 15; n++) {
    if ([stickerarray objectAtIndex:n] == @"1") {
        NSLog(@"this works %i", n);
    } else {
                NSLog(@"this did not work on %@", [stickerarray objectAtIndex:n]);
    }
} 
```

这就是我得到的：

```
 this did not work on 1
 this did not work on 0
 this did not work on 0
 this did not work on 0
 this did not work on 0
 this did not work on 0
 this did not work on 0
 this did not work on 0
 this did not work on 1
 this did not work on 0
 this did not work on 1
 this did not work on 1
 this did not work on 1
 this did not work on 0
 this did not work on 0
 this did not work on 0 
```

当我发现这不起作用时，我很惊讶，所以我尝试应用一些查询：

```
NSLog(@"ns array value of %@",[stickerarray objectAtIndex:2] );
ns array value of 0

NSLog(@"%@", stickerarray);
(
1,
0,
0,
0,
0,
0,
0,
0,
1,
0,
1,
1,
1,
0,
0,
0 
```

)

```
NSLog(@"%@", theDataObject.stringstick);
1 0 0 0 0 0 0 0 1 0 1 1 1 0 0 0 
```

当我在 if 语句中比较它时，我怀疑它是 @"1" 。如果你能帮我解决这个问题，那就帮大忙了。谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T19:06:54.760

您对 componentsSeparatedByString 的使用可能有效，但您的测试存在缺陷。在objective-c 中你需要使用NSString 的isEqualToString。"==" 比较两个字符串的指针，只有当它们指向同一个字符串实例时才会相等。你应该使用更多类似的东西：

```
[item isEqualToString:@"1"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T19:10:21.820

您没有正确比较字符串..

```
for ( int n = 0; n <= 15; n++) {
    if ([[stickerarray objectAtIndex:n] isEqualToString:@"1"]) {
        NSLog(@"this works %i", n);
    } else {
        NSLog(@"this did not work on %@", [stickerarray objectAtIndex:n]);
    }
} 
```

额外的建议..你也应该以不同的方式循环你的数组。（一个块将是最快的）

```
for (id obj in stickerarry){
//do stuff with obj
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T19:12:59.943

运算符`==`比较两个*值*- 整数、浮点数、引用等。当您编写时：

```
[stickerarray objectAtIndex:n] == @"1" 
```

您在问由返回的*引用*`objectAtIndex:`是否等于由文字表达式返回的引用`@"1"`，这不太可能是真实的或您想要的。

要比较对象实例是否代表相同的值，请使用以下方法`isEqual:`：

```
[[stickerarray objectAtIndex:n] isEqual:@"1"] 
```

这适用于任何类型的对象，对于通常更常用的字符串`isEqualToString:`- 它产生完全相同的答案，但速度更快一些。

# soundcloud - redirect_uri 以及如何在 SoundCloud 上托管 callback.html？

> ID：13334361
> 
> 赞同：4
> 
> 时间：2012-11-11T18:59:25.433
> 
> 标签：soundcloud

我正在尝试从笔记本电脑上的本地 HTML 页面访问 Soundcloud。我被困在将“callback.html”作为redirect_uri托管的部分。我尝试运行的脚本是 Soundcloud 文档页面中的基本身份验证 JavaScript：

```
<script src="http://connect.soundcloud.com/sdk.js"></script>
<script>
// initialize client with app credentials
SC.initialize({
  client_id: 'my_client_id',
  redirect_uri: 'http://127.0.0.1/Users/Maria/Documents/SoundcloudClient/callback.html'
});

// initiate auth popup
SC.connect(function() {
  SC.get('/me', function(me) { 
    alert('Hello, ' + me.username); 
  });
});
</script> 
```

当我在 Chrome 和 Firefox 中启动页面时，这个脚本让我进入连接弹出窗口。但是，一旦我以 Soundcloud 用户身份登录，就会收到以下错误：

```
Oops! Google Chrome could not connect to 127.0.0.1 
```

如果我将我的 redirect_uri 更改为 localhost 我会得到同样的错误。

如果我尝试：

```
files:///C:/Users/Maria/Documents/SoundcloudThinClient/callback.html 
```

我收到类似的错误。

我也试过：

```
ocalhost:3000 
```

和：

```
localhost:8080 
```

即使我不确定在这些端口上会监听什么。

所以，基本上，我在问我应该为 callback.html 放置什么路径才能使其正常工作？

我承认我不知道 redirct_uri 的实际功能。我查看了 Oauth 页面，但我不明白。我开始认为我不能简单地创建一个 HTML 页面、粘贴 JavaScript、创建一个 callback.html 文件并进行这项工作，即使 SC 文档似乎说这是可能的。如果是这样，我错过了哪些步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T02:53:58.860

I am beginning to attempt this. I believe you have to go to the developer site and sign up as having an app. The redirect uri is asked for and the form gives you an API key you can use in your app.

I'm using drupal so, perhaps adding the oath module and using Php to add the api key might work well.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-25T05:34:03.963

我有同样的问题，我想我解决了。

编辑后的早晨：我在通宵努力解决问题后发布了这个累死人的帖子。现在，后天，我意识到你说的是一般问题，而我面临一个非常特殊的例子。以下仅适用于注册 soundcloudlabs 的*soundcloud-group-recorder*：[https://github.com/soundcloudlabs/soundcloud-group-recorder](https://github.com/soundcloudlabs/soundcloud-group-recorder)。不过，这背后可能隐藏着一个更普遍的原则：

首先：是的，您必须在 Soundcloud 上将应用程序注册为您自己的应用程序。至少我是这么认为的。这样做，您必须正确注册您将在服务器上放置 callback.html 文件的位置。获取分配给您的应用程序的*ClientID并在 API 初始化过程中使用它。*

现在，我是一个新手，对编码知之甚少。但我开始查看主文件 application.js。

1.  在文件的顶部，每个都有两个*client_id*和*redirect_uri*实例。我不确定这是否有目的，或者是否在技术上是多余的。通过反复试验，我发现用我自己的数据替换每个实例的第二个实例是有效的。

2.  然后是*groupId*和*groupUrl*，它们都应该包含您的信息，用引号括起来。

3.  经过大量的试验和错误后，仍然无法让程序运行，我环顾四周，发现，在文件的早期，*client_id*被挂在 SC.initialize 中，*redirect_uri*没有。下线：

`client_id: CLIENT_ID`

我补充说：

`redirect_uri: REDIRECT_URI`

– 中间有一个习惯性的逗号。就是这样。它运行。

# python - Python Subprocess stdout 和communicate()[0] 不打印终端的输出

> ID：13334366
> 
> 赞同：2
> 
> 时间：2012-11-11T19:00:00.493
> 
> 标签：python, terminal, popen, subprocess

这是我的代码。

```
import subprocess

bashCommand = "./program -s file_to_read.txt | ./awk_program.txt"
process = subprocess.Popen(bashCommand.split(), stdout=subprocess.PIPE)
output = process.communicate()[0]
output2 = process.stdout
print output
print output2 
```

在终端中单独使用此 bash 命令时，会打印 awk_program 的输出（仅打印到标准输出）。但在 python 中，输出什么也不打印，而 output2 打印

```
<closed file '<fdopen>', mode 'rb' at 0x2b5b20> 
```

我需要做什么才能返回输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T19:04:06.497

您需要使用该选项`shell=True`来`Popen()`使管道正常工作。

请注意，如果您不知道`Popen`输入的确切来源，则`shell=True`存在[安全风险](http://docs.python.org/2/library/subprocess.html#frequently-used-arguments)。

此外，您不需要在`bashCommand`这里拆分。例如：

```
>>> import subprocess as sp    
>>> cmd = 'echo "test" | cat'
>>> process = sp.Popen(cmd,stdout=sp.PIPE,shell=True)
>>> output = process.communicate()[0]
>>> print output
test 
```

# python - 带有 postgresql 的 Django - manage.py syncdb 返回错误

> ID：13334370
> 
> 赞同：3
> 
> 时间：2012-11-11T19:00:30.627
> 
> 标签：python, django, postgresql

我从 Django 开始。我设置了一些使用 SQLite 工作的站点，但是在将 DB 引擎更改为 postgresql manage.py syncdb 后返回错误。我已经用谷歌搜索了 2 天，但对我仍然没有任何作用。Postgres 用户 'joe' 具有超级用户权限和本地 'joe ' 数据库存在。

Postgresql 正在运行：

```
/etc/init.d/postgresql status
Running clusters: 9.1/main 
```

这是我的部分 settings.py

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2',  #
        'NAME': 'joe',                                       # 
        'USER': 'joe',                                       # 
        'PASSWORD': 'asdf',                                  # 
        'HOST': 'localhost',                                 # 
        'PORT': '5432',                       .
    }
} 
```

和错误：

```
$ python manage.py syncdb
Syncing...
Traceback (most recent call last):
  File "manage.py", line 11, in <module>
    execute_manager(settings)
  File "/home/m/.virtualenvs/mayan/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 438, in execute_manager
    utility.execute()
  File "/home/m/.virtualenvs/mayan/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 379, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/home/m/.virtualenvs/mayan/local/lib/python2.7/site-packages/django/core/management/base.py", line 191, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/home/m/.virtualenvs/mayan/local/lib/python2.7/site-packages/django/core/management/base.py", line 220, in execute
    output = self.handle(*args, **options)
  File "/home/m/.virtualenvs/mayan/local/lib/python2.7/site-packages/django/core/management/base.py", line 351, in handle
    return self.handle_noargs(**options)
  File "/home/m/.virtualenvs/mayan/local/lib/python2.7/site-packages/south/management/commands/syncdb.py", line 90, in handle_noargs
    syncdb.Command().execute(**options)
  File "/home/m/.virtualenvs/mayan/local/lib/python2.7/site-packages/django/core/management/base.py", line 220, in execute
    output = self.handle(*args, **options)
  File "/home/m/.virtualenvs/mayan/local/lib/python2.7/site-packages/django/core/management/base.py", line 351, in handle
    return self.handle_noargs(**options)
  File "/home/m/.virtualenvs/mayan/local/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 59, in handle_noargs
    tables = connection.introspection.table_names()
  File "/home/m/.virtualenvs/mayan/local/lib/python2.7/site-packages/django/db/backends/__init__.py", line 792, in table_names
    return self.get_table_list(cursor)
  File "/home/m/.virtualenvs/mayan/local/lib/python2.7/site-packages/django/db/backends/postgresql/introspection.py", line 31, in get_table_list
    AND pg_catalog.pg_table_is_visible(c.oid)""")
  File "/home/m/.virtualenvs/mayan/local/lib/python2.7/site-packages/django/db/backends/util.py", line 34, in execute
    return self.cursor.execute(sql, params)
  File "/home/m/.virtualenvs/mayan/local/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py", line 44, in execute
    return self.cursor.execute(query, args)
django.db.utils.DatabaseError: current transaction is aborted, commands ignored until end of transaction block 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T22:26:33.283

我的建议是去`django.db.backends.postgresql_psycopg2.base`插入一个`print query`看起来`CursorWrapper`像的。

```
class CursorWrapper:
    ...
    def execute(self, query, args=None):
        print query # New print statement here
        try:
            return self.cursor.execute(query, args) 
```

这将打印出每个查询到数据库，并希望允许您在尝试运行时识别有问题的 SQL 查询`python manage.py syncdb`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T19:12:26.900

首先，您的数据库是否正确同步？尝试运行`python manage.py syncdb`。如果这没有帮助，请继续阅读...

当查询产生错误并且您尝试运行另一个查询而不首先回滚事务以防出错时，这就是 postgres 所做的。因此，当出现问题时，您应该首先查看`rollback` 数据库状态。由于它是基于事务的，它会导致问题。要修复它，您需要找出在代码中执行错误查询的位置。

在您的 postgresql 服务器中使用[log_statement](http://www.postgresql.org/docs/current/static/runtime-config-logging.html#GUC-LOG-STATEMENT)选项进行调试可能会有所帮助。

以下解决方案是我遇到相同错误时提出的。

```
from django.db import transaction

@transaction.commit_manually
def db_insert():
    try:
        YourModel(name='hello world').save() #trying to save
    except: #any error rollback
        transaction.rollback()
    else: #if all fine, commit
        transaction.commit() 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-09T00:15:48.767

就我而言，我不得不禁用一些应用程序，执行同步数据库，再次启用应用程序并再次同步数据库。

# java - 我需要在 Java 中传递 GQL 查询请求

> ID：13334382
> 
> 赞同：1
> 
> 时间：2012-11-11T19:02:44.823
> 
> 标签：java, google-app-engine

我需要`Entity`从我的表中获取一个特定的信息，即 python GQL 查询。

```
SELECT * FROM table1
WHERE id='12345' 
```

这个查询的 Java 版本是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:22:57.437

```
DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
Query query = new Query("table1");
query.addFilter("id", FilterOperator.EQUAL, "12345");
PreparedQuery pq = datastore.prepare(query);
Entity customer = pq.asSingleEntity(); 
```

这对我有用

# java - Mapview 上的按钮

> ID：13334387
> 
> 赞同：5
> 
> 时间：2012-11-11T19:03:09.767
> 
> 标签：java, android, android-layout, openstreetmap, osmdroid

我正在我的 MapActivity.java 中创建一个 OSMdroid 地图视图，我想添加按钮和弹出窗口 - 我只知道这是如何在 .xml 中完成的，但由于这个 MapView 没有使用任何 .xml，我很困惑如何放置（图片）我的java代码中的按钮。

```
@Override
public void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Setup base map
    final RelativeLayout rl = new RelativeLayout(this);

    CloudmadeUtil.retrieveCloudmadeKey(getApplicationContext());

    final MapView osmv = new MapView(this, 256);

    myMapController = osmv.getController();  

    rl.addView(osmv, new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT,
            LayoutParams.FILL_PARENT));
    osmv.setBuiltInZoomControls(true);
    osmv.setMultiTouchControls(true);

    myLocationoverlay = new MyLocationOverlay(this, osmv);

//*snip* setup of map, mapcontrollers, tiles etc...
    osmv.getOverlays().add(tilesOverlay);
    osmv.getOverlays().add(myLocationoverlay);  

    this.setContentView(rl);
} 
```

编辑：我说的是像这样的按钮

```
<ImageButton
    android:id="@+id/map_goto_location"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/goto_location"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true" 
    android:id="@+id/goto_location" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T20:47:25.070

感谢 MH 的提示，我发现了如何以编程方式将 ImageButton 添加到我的代码中，如下所示：

```
 ImageButton goto_location = new ImageButton(this);
    goto_location.setOnClickListener(new OnClickListener()
    {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            showMylocation();
        }           
    });

    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(40, 40);
    params.rightMargin = 10;
    params.topMargin = 10;
    rl.addView(goto_location, params); 
```

如果有人能提示我一些关于自定义按钮和以编程方式添加 UI 元素的优秀教程/示例，我将非常高兴。

# python-3.x - 如何在python中从行中追加字符串

> ID：13334390
> 
> 赞同：0
> 
> 时间：2012-11-11T19:03:27.163
> 
> 标签：python-3.x

在做作业时，我遇到了一个问题，即如何从行中创建一个字符串，我遇到了以下问题

```
def make_str_from_row(board, row_index): 

make_str_from_row([['A', 'N', 'T', 'T'], ['X', 'S', 'O', 'B']], 0) 

str = "".join[(make_str_from_row[0][0])] 

print(str) 
```

答案应该是“ANTT”

但我收到一个错误

> TypeError：“函数”对象不可下标

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T19:13:10.690

利用`"".join(['A', 'N', 'T', 'T'])`

所以在你的例子中：

```
a = ([['A', 'N', 'T', 'T'], ['X', 'S', 'O', 'B']], 0)
str = "".join(a[0][0])
print(str) 
```

从最初的问题开始，我假设您使用了一个元组。

根据您的评论：

```
def make_str_from_row(board, row_index):
    return "".join(board[row_index]) 
```

# c# - 在 Visual Studio C# Windows 窗体中使用 JavaScript

> ID：13334394
> 
> 赞同：1
> 
> 时间：2012-11-11T19:03:36.403
> 
> 标签：c#, javascript, winforms, visual-studio-2010, timeout

我正在制作一个需要计时器的测验应用程序。我想知道是否可以在 Visual Studio Windows 窗体上使用 JavaScript 计时器？使用图形计时器而不是倒数计数会更好看。

如果是，那么有人可以给我一个关于如何在 ac# windows 窗体中使用 JavaScript 代码的示例代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T19:10:07.933

Windows 窗体本身不支持 javascript 执行。您通常会使用 Windows 控件或 GDI+ 在 Windows 窗体应用程序中创建图形计时器 - 或者可能通过嵌入 WPF 控件。

但是，您*可以*在 Windows 窗体应用程序中嵌入 WebBrowser 控件。WebBrowser 可以显示 HTML 并执行 javascript。它实际上只是一个嵌入式 IE 控件。

以下是在 Windows 窗体应用程序中使用 GDI+ 绘制模拟时钟的一些示例：

*   [http://www.codeproject.com/Articles/42955/A-Simple-Clock-Using-GDI](http://www.codeproject.com/Articles/42955/A-Simple-Clock-Using-GDI)
*   [http://www.codeproject.com/Articles/4951/A-Resizable-Analog-Clock-in-C-using-GDI-Windows-Fo](http://www.codeproject.com/Articles/4951/A-Resizable-Analog-Clock-in-C-using-GDI-Windows-Fo)
*   [http://social.msdn.microsoft.com/forums/en-US/Vsexpressvb/thread/39c4b146-ddb3-4b4c-b229-9d4239ac73ad](http://social.msdn.microsoft.com/forums/en-US/Vsexpressvb/thread/39c4b146-ddb3-4b4c-b229-9d4239ac73ad)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T18:52:05.997

虽然这篇文章不一定要问如何在正确的上下文中以 Windows 形式使用 Visual Studio，但有一种方法可以使用 WebBrowser 控件。最有可能的是，您已经拥有一个 WebBrowser 控件并且只想在 WebBrowser 文档和主机 winform 之间进行通信。

秘密在于“您的脚本代码可以通过 window.external 对象访问您的应用程序，该对象是为主机访问提供的内置 DOM 对象，它映射到您为 ObjectForScripting 属性指定的对象。”

[http://www.codeproject.com/Tips/127356/Calling-JavaScript-function-from-WinForms-and-vice](http://www.codeproject.com/Tips/127356/Calling-JavaScript-function-from-WinForms-and-vice)

如果您正在寻找如何在 web 表单中使用 javascript，您可以考虑使用 WebBrowser 控件和 hmtl 文档。

# javascript - 启动图像（启动画面）和应用程序主页之间出现白色闪烁

> ID：13334397
> 
> 赞同：10
> 
> 时间：2012-11-11T19:03:44.357
> 
> 标签：javascript, iphone, html, ios, web-applications

我有一个非常简单的 HTML5 iPhone Web 应用程序，几乎可以完美运行；只有一个问题：在启动图像和应用程序主屏幕之间，出现大约一秒钟的全白屏幕（即闪烁）。

我正在使用“添加到主屏幕”按钮将应用程序从网络下载到我的手机。javascript 文件 ( `functions.js`) 和样式表都是非常小的文件。

有人遇到过这个问题吗？有没有办法解决/修复它？

**索引.html**

```
<!doctype html>
<html manifest="demo.manifest">
<head>
<meta charset="UTF-8">
<title>HTML5 Application</title>
<link rel="stylesheet" type="text/css" href="style.css" />
<link rel="apple-touch-icon-precomposed" href="Icon@2x.png" />
<link rel="apple-touch-startup-image" href="Default@2x.png" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="viewport" content="user-scalable=no, width=device-width" />
</head>

<body>
    <div id="wrapper">...</div>
</body>
<script type="text/javascript" src="function.js"></script>
</html> 
```

**演示清单**

```
CACHE MANIFEST
index.html
Default@2x.png
functions.js
style.css 
```

**.htaccess**

```
AddType text/cache-manifest .manifest 
```

* * *

**编辑＃1**：我做了更多的研究并得出了[这个答案](https://stackoverflow.com/questions/7535643/content-disappears-for-fraction-of-a-second-on-offline-web-app-load)：

> 由于 HTML 的渐进性，在渲染时清除屏幕和其他工件是 HTML 渲染的常见问题。这个概念是浏览器应该尽可能早地和经常地绘制，并在样式/脚本/内容可用时呈现它们。标记可能存在一个问题，即所有渲染都会延迟，直到某些内容或脚本可用。如果出现以下情况，可能会发生这种情况：
> 
> *   您有基于图像尺寸的动态高度，但您没有在标记或 CSS 中设置图像尺寸。
> *   您的布局基于表格，并且您没有在 CSS 中使用“table-layout:fixed”。
> *   您的 HTML 使用带有 document.write() 的内联脚本。
> *   您有某种 onLoad() 函数可以显示/修改内容。
> *   您链接到外部样式表。
> *   您正在使用不可缓存的外部内容，或者您​​已禁用缓存。
> *   您正在使用返回 404 或无法离线使用的外部内容。

我已遵循此答案中的所有建议，但它并没有消除我的网络应用程序的白色闪烁。有什么技巧可以解决这个问题吗？

* * *

**编辑#2**：我尝试不使用 Javascript 和样式表，只使用：

```
body { background-color: black } 
```

但仍有白色闪烁。由于这似乎是所有此类 Web 应用程序的问题，我的问题是：是否有任何黑客可以解决此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T22:38:54.910

CSS 选择器在 iOS 上非常慢（贪婪的 CSS 重置脚本的性能也很糟糕）。

头部启动的 javascript 自加载 DOM-ready 脚本和 CSS 选择器一起运行使问题更加复杂。由于您在头部同时有 CSS 和 javascript 请求，因此处理正文会有一个小但明显的延迟，尤其是正文的背景颜色。

大多数 HTML5 框架正在转向延迟脚本加载。至少您希望先加载样式表，然后再担心 javascript。尝试将[css 放在顶部](http://developer.yahoo.com/performance/rules.html#css_top)，将脚本放在底部，然后内联默认背景*颜色*（不是图像 - iOS 5 渲染缩放的背景图像和 CSS 渐变有明显的延迟）。

你也可以试试[iOS5+](http://css-tricks.com/thinking-async/)上的 async 属性，不过我自己没试过。

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T23:13:10.767

好吧，这似乎是一个基本而烦人的问题。我认为解决这个问题的最好方法是通过 AJAX（异步 JavaScript 和 XML）。我敢肯定您可能已经知道这是什么，但这只是一种基本上从 JavaScript 向其他地方发送文件请求然后将其加载到页面中或按照您的意愿解析它的方法。

### 更高级的方法

对于您的示例，我建议您注释掉具有如下背景图像的 CSS 行：

```
.bg-container {
    /* background-image: url(img/bg.png); /* commented out */
} 
```

请注意，第二条注释只是让在调试代码时更容易注释和取消注释一行。

现在只需在你的 body 中添加一个简单的 img 标签，并将它的 src 设置为 ajax 加载器（你可以在任何地方找到纺车生成器）。从这里您可以编写一些 JavaScript 来加载图像、摆脱微调器并替换它。

### 两种更简单的方法

这个解决方案对我没有吸引力，我认为大多数人无论如何都不会喜欢它。这就是我使用[“Bootloader.js”](http://github.com/karimsa/Bootloader.js)的原因，它是我几个月前编写的一个小 AJAX 加载工具，用于帮助人们解决这些问题。

它很容易使用，除了脚本包含，只需添加这个元标记：

```
<meta name="bootloader" content="enabled,forms('selectorOfForms'),a('selectorOfAnchors')"> 
```

*表单和锚点是可选的，如果您使用它，它将使您的所有表单和链接异步（尚未*跨域使用）。表格不容易设置，如果您愿意，可以阅读相关文档。

最后，像这样设置你的身体：

```
<body>
    <div id="body">
        <!-- All the content should go here -->
    </div>

    <!-- This will disappear on first ajax load -->
</body> 
```

你有它，它会为你处理一切。

最终建议

如果您不喜欢这些选项中的任何一个，或者想要一个有限但可定制的选项，我建议您使用 Mika Tuupola 的 Image LazyLoader（包含在 Bootloader.js 中），也可以在以下网址获得：http: [//www.appelsiini.net/项目/延迟加载](http://www.appelsiini.net/projects/lazyload)

告诉我它是怎么回事，你用什么！XD

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-27T18:53:48.580

即使是简单的站点也会出现此问题。

以这个为例：它显示了一个背景为 的网站，带有iphone 7`#ccc`的闪屏。`#ccc`

```
<!doctype html>
<html style="background-color: #ccc;">
<head>
  <title>iOS web app</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="iOS web app">
  <meta name="viewport" content="initial-scale=1">
  <link href="https://placehold.it/750x1294" media="(device-width: 375px) and (device-height: 667px)
                 and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image">
</head>
<body style="background-color: #ccc;">
  <h1>iOS web app</h1>
</body>
</html> 
```

[https://imgur.com/a/tGiREVM](https://imgur.com/a/tGiREVM)

加载应用程序时，您会看到白色闪烁。

更快的加载应用程序感觉更糟，有点癫痫，白色闪烁。如果启动画面很暗，它看起来又更糟了。

# c# - ... 隐藏继承的成员 ... 使用 new 关键字

> ID：13334404
> 
> 赞同：0
> 
> 时间：2012-11-11T19:04:21.190
> 
> 标签：c#, user-controls, windows-runtime

我收到一个奇怪的警告，我不明白。

我有两个`UserControls`。第一个`BaseControl`继承自`Button`，第二个`SecondControl`继承自`BaseControl`。我没有改变任何东西，所以两个 UserControls 就像 VS2012 创建它们（默认构造函数等）我只删除了`sealed`关键字 of`BaseControl`为了继承它。

现在，如果我构建项目，则会发出以下警告：

```
'MyProject.Controls.SecondControl.Connect(int, object)' hides inherited member
'MyProject.Controls.BaseControl.Connect(int, object).' Use the new keyword if hiding was intended. 
```

当我点击这个警告时，VS2012 会打开一个名为的文件`'SecondControl.g.cs'`并显示：

```
partial class SecondControl: global::MyProject.Controls.BaseControl, global::Windows.UI.Xaml.Markup.IComponentConnector
{
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.Windows.UI.Xaml.Build.Tasks"," 4.0.0.0")]
    [global::System.Diagnostics.DebuggerNonUserCodeAttribute()]

    public void Connect(int connectionId, object target)
    {
        this._contentLoaded = true;
    }
} 
```

这是什么意思？`Connect()`除了这个，我没有调用任何方法，`SecondControl.g.cs`但这不是我的方法。任何提示如何解决这个问题？即使它只是一个警告并且我的应用程序运行良好，我也不希望在输出窗口中有任何警告/错误:)

我在 SO 上找到了一些关于此错误的文章，但这些文章都没有帮助我:(

编辑：添加上面提到的整个类。

基本控制：

```
namespace MyProject.Controls
{
    public partial class BaseControl : Button
    {
        public BaseControl()
        {
            this.InitializeComponent();
        }
    }
} 
```

第二控制：

```
namespace MyProject.Controls
{
    public sealed partial class SecondControl: BaseControl
    {
        public SecondControl()
        {
            this.InitializeComponent();
        }
    }
} 
```

我检查了 Windows.UI.Xaml.Controls.Button 的整个继承链，没有 Connect(int, object) 或任何其他 Connect()。我也没有添加任何 Connect() 方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T20:31:20.763

您不能从 a 创建控件`UserControl`并使其成为`Button`AND 派生控件。BaseControl 必须是密封的 UserControl。您可以使 UserControl 像一个按钮一样工作和/或包含一个按钮。

[IComponentContainer](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.markup.icomponentconnector)的文档部分是关于为什么会出错的线索。

它正在尝试使用为 s 添加到生成的类的 Connect 方法连接 UI `UserControl`。但是，通过为相同的 XAML（或不同的 XAML）定义多个类，它会为每个类（在您的示例中为 BaseControl 和 SecondControl）生成 Connect 方法。这就是为什么它一开始就被密封：防止这种情况发生。您不能可靠地让一个类使用 XAML 中的 UI，然后轻松地创建派生类。如您所见，构建和 VS 搞砸了（WinForms、WPF、ASP.NET WebForms 和 Silverlight 多年来一直存在这个问题）。

您可能想要做的是创建一个模板化控件。这使您能够在 XAML 中定义 UI（并可能在子类中对其进行修改）。这就是按钮最初在 WinRT（及其祖先 Silverlight 和 WPF）中创建的方式。

您最终将在 ResourceDictionary 中创建样式：

```
<Style TargetType="local:CustomControl1">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="local:CustomControl1">
                <Border
                    Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}">
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

还有一个使用该样式的类：

```
public sealed class CustomControl1 : Control
{
    public CustomControl1()
    {
        this.DefaultStyleKey = typeof(CustomControl1);
    }
} 
```

# h2 - H2 控制台从不是我的 IP 地址开始

> ID：13334407
> 
> 赞同：0
> 
> 时间：2012-11-11T19:04:46.597
> 
> 标签：h2

如果我跑

H2JAR=/common/home/jjs/.m2/repository/com/h2database/h2/1.3.168/h2-1.3.168.jar java -cp $H2JAR org.h2.tools.Server $*

我明白了

```
Web Console server running at http://68.178.232.99:8082 (only local connections)
TCP server running at tcp://68.178.232.99:9092 (only local connections)
PG server running at pg://68.178.232.99:5435 (only local connections) 
```

但是我有

```
1004 ~\>traceroute 68.178.232.99
traceroute to 68.178.232.99 (68.178.232.99), 30 hops max, 60 byte packets
 1  190.33.189.161 (190.33.189.161)  9.145 ms  9.023 ms  9.467 ms
 2  172.31.36.254 (172.31.36.254)  171.169 ms  171.083 ms  170.976 ms   
 3  10.255.6.9 (10.255.6.9)  170.811 ms  170.641 ms  170.529 ms
 4  ge-0-0-0.bal1-int-1.jf1-agr-1.cwpanama.net (201.224.254.237)  170.416 ms  170.306 ms  170.193 ms
 5  so-7-1-3.mia11.ip4.tinet.net (216.221.158.49)  185.066 ms  186.763 ms  188.797 ms
 6  xe-2-2-0.mia10.ip4.tinet.net (89.149.184.254)  189.751 ms xe-8-0-0.mia10.ip4.tinet.net (89.149.180.185)  202.777 ms xe-1-0-0.mia10.ip4.tinet.net  (89.149.183.21)  202.611 ms
 7  ge-0-2-2.mpr2.mia1.us.above.net (64.125.13.81)  211.130 ms  215.839 ms  217.518 ms
 8  xe-4-0-0.cr2.iah1.us.above.net (64.125.30.202)  219.719 ms  221.003 ms  228.238 ms
 9  xe-1-1-0.mpr4.phx2.us.above.net (64.125.30.149)  219.337 ms  225.518 ms  228.868 ms
 10  209.66.64.6.t01121-04.above.net (209.66.64.6)  228.763 ms  214.909 ms  215.359 ms 
```

我的主机文件是：127.0.0.1 localhost.localdomain localhost ::1 localhost6.localdomain6 localhost6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T20:11:27.873

H2 尝试检测您计算机的 IP 地址。在您的情况下，它似乎无法正常工作。你能运行H2数据库的网络测试吗？您需要下载 H2 的 .zip 文件，展开`chmod`该`build.sh`文件，然后运行：

```
./build.sh testNetwork 
```

在我的情况下，结果是：

```
Target: testNetwork
localhost:
  localhost/127.0.0.1
  localhost/127.0.0.1
  localhost/0:0:0:0:0:0:0:1
  localhost/fe80:0:0:0:0:0:0:1%1
getLocalHost:Thomass-MacBook-Pro.local/192.168.0.104
  /192.168.0.104
byName:/192.168.0.104
ServerSocket[addr=0.0.0.0/0.0.0.0,port=0,localport=63498]
time: 0
server accepting
client:/192.168.0.104:63498
time: 8
server accepted:Socket[addr=/192.168.0.104,port=63499,localport=63498]
client:Socket[addr=/192.168.0.104,port=63498,localport=63499]
time: 2
server read:123
client read:234
server closing
server done
time: 202
done
Done in 1626 ms 
```

这不会解决问题，但会提供有关 H2 尝试检测 IP 地址的更多信息。

# ios - 我可以删除重复的 6.0 iOS DeviceSupport 吗？

> ID：13334417
> 
> 赞同：20
> 
> 时间：2012-11-11T19:05:44.263
> 
> 标签：ios, xcode, macos, xcode4

为什么我会得到 iOS 6.0 设备支持的副本？我可以删除某人吗？ ![在此处输入图像描述](../Images/3c7d30c7e250d446c53ce06768d41754.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-02-12T06:30:01.107

您会得到这些副本，因为（正如您所猜测的）它们用于硬件和软件的不同组合。

这些用于符号化来自您的设备或现场客户设备的崩溃报告中的系统符号。

删除您不支持的版本是安全的，并且不会从现场获得崩溃报告。

Xcode.app 包和用户的 Library 文件夹中通常有一个 iOS DeviceSupport 文件夹。当您将新设备连接到 Mac 时，其中的符号文件将放置在用户的 Library 子文件夹中。(~/Library/Developer/Xcode/"iOS DeviceSupport")。

如果您对删除它们感到不舒服，您可以随时将这些文件夹复制到外部驱动器。

# c# - ISpy C#插件中的客户端套接字连接到Java服务器套接字

> ID：13334419
> 
> 赞同：2
> 
> 时间：2012-11-11T19:06:23.737
> 
> 标签：c#, java, sockets, networking

我试图从 ISpy C# 插件仅向我的 Java 应用程序发送一个简单的字符串。

我的 C# 插件的客户端代码来自这个网站... [http://msdn.microsoft.com/en-us/library/bew39x2a.aspx](http://msdn.microsoft.com/en-us/library/bew39x2a.aspx)

我的 Java 代码是

```
 ServerSocket serverSocket;
    try {
                serverSocket = new ServerSocket(8888);
                System.out.println("Server is up");

                Socket clientSocket = null;
                try 
                {
                    System.out.println("Waiting for incoming connections");
                    clientSocket = serverSocket.accept();
                    System.out.println("Accepted incoming connection");
                } 
                catch (IOException e) 
                {
                    System.out.println("Accept failed: 8888");
                    System.exit(-1);
                }
            } 
            catch (IOException e) {
                System.out.println("Could not listen on port: 8888");
                System.exit(-1);
            } 
```

当我在加载插件的情况下启动 ISpy 应用程序时，插件的其余部分按预期执行，但 Java 服务器套接字从未收到来自 C# 插件的连接。C# 插件的客户端代码在此代码调用的单独线程中运行...

```
_networker = new Thread(() => SendTest()) { Name = "networker thread", IsBackground = false }; 
```

其中 _networker 是线程对象的句柄。

我的问题是，为什么 C# 客户端没有连接到 Java 服务器套接字？当 Windows 提示我时，Java 服务器套接字是允许的。我在 Windows 8 64 位。

如果这似乎是解决我的问题的不好方法，我已经尝试过管道，但这在通过 jvm 和 windows os 进行通信之间提出了更大的问题。

如果我可以在这些程序之间读取/写入文件，我也不会反对。无论工作如何，我都不是在这里寻找速度或效率。

# java - Java selector.select() 阻塞线程？

> ID：13334420
> 
> 赞同：-1
> 
> 时间：2012-11-11T19:06:32.557
> 
> 标签：java, multithreading, sockets, nio

我正在尝试在它自己的线程中运行 NIO 服务器。

在我的运行函数中，我定义了：

```
while(running)
{
   System.out.println("Server running!");
   try
   {
      this.selector.select();
   }
   catch (IOException e)
   {
      e.printStackTrace();
   }
} 
```

运行循环只运行一次，然后就卡住了。如果没有整个 try 块，它就可以工作。

它的 selector.select() 以某种方式阻塞？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T19:10:59.180

文件说，

> 此方法执行阻塞选择操作。它仅在至少选择一个通道、调用此选择器的唤醒方法或当前线程被中断（以先到者为准）后才返回。

所以它应该阻塞，直到选择一个通道。

对于非阻塞选择/忙碌循环，请尝试*selectNow*方法。

# java - 到 Environment.getExternalStorageDirectory() 还是不到？

> ID：13334421
> 
> 赞同：2
> 
> 时间：2012-11-11T19:06:33.447
> 
> 标签：java, android, environment

我不明白我在 Eclipse 中收到的消息。我添加了一个“/sdcard”作为目录，我收到了警告：

```
Do not hardcode "/sdcard/"; use Environment.getExternalStorageDirectory().getPath() instead 
```

于是，乖乖的按要求改了，结果报错：

```
The method getExternalStorageDirectory() is undefined for the type Environment 
```

所以？？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T19:17:00.000

有些手机以不同的方式命名他们的 sd 文件夹，例如：

在三星手机中，它被命名为`external_sd`，您的代码将失败。

control+shift+o --> 在eclipse中添加导入，否则它应该在[那里](http://developer.android.com/reference/android/os/Environment.html)，

# certificate - PFX 到 JKS 密钥工具的转换：别名 <*> 不存在

> ID：13334422
> 
> 赞同：10
> 
> 时间：2012-11-11T19:06:34.337
> 
> 标签：certificate, ssl-certificate, keytool, pfx, jks

我正在尝试使用 keytool 将 x.PFX 文件转换为 x.JKS 文件，但出现以下错误：

```
keytool error: java.lang.Exception: Alias <2> does not exist 
```

此错误之前的操作是：

**列出 x.PFX 文件内容（只是为了读取别名）：**

```
keytool -v -list -storetype pkcs12 -keystore x.pfx

Enter keystore password: x

Keystore type: PKCS12   
Keystore provider: SunJSSE

Your keystore contains 1 entry

Alias name: 2
Creation date: 11-nov-2012

Entry type: PrivateKeyEntry
Certificate chain length: 3
Certificate[1]:
Owner: CN=x, OU=x, C=x
Issuer: CN=x, O=x, C=x
Serial number: x
Valid from: Wed Oct 24 11:46:10 CEST 2012 until: Fri Dec 13 09:28:40 CET 2013
Certificate fingerprints:

etc. 
```

**使用“2”作为源别名将 x.PFX 文件转换为 x.JKS 文件**

```
keytool -importkeystore -srckeystore x.pfx -srcstoretype pkcs12 -srcalias 2 -destkeystore x.jks -deststoretype jks -destalias xyz
Enter destination keystore password: y
Re-enter new password: y
Enter source keystore password: x
keytool error: java.lang.Exception: Alias <2> does not exist 
```

我不确定我做错了什么？PFX 文件仅包含一个条目和一个别名 (2)。我还尝试使用这些 srcalias 值：2、“2”、“2”。有没有其他方法可以在不知道源别名的情况下使用 keytool 将 PFX 转换为 JKS？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-09-05T16:07:58.707

我有同样的问题。我已经解决了使用 '1' 而不是 2。不知道为什么，但它有效。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-12-12T07:11:15.840

如果在 pkcs12 中设置别名：

```
openssl pkcs12 -export -in certificate.pem -inkey private_key.pem -out keystore.p12 -name "myalias" 
```

aftet 别名设置成功：

```
keytool -importkeystore -srckeystore keystore.p12 -srcstoretype pkcs12 -destkeystore keystore.jks -deststoretype JKS -alias myalias 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-24T18:15:49.067

你的命令应该看起来更像这样

```
keytool -importkeystore -srckeystore x.pfx -srcstoretype pkcs12 -***alias*** 2 -destkeystore x.jks -deststoretype jks -destalias xyz 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-24T11:31:05.927

可能找不到“2”，因为包含空格（例如“2”）

如果您不想更改别名，只需删除选项*-srcalias*和*-destalias*，它将使用原始别名导入。

# c++ - Asio 编译器错误（Win7 64 位 + VC11）

> ID：13334423
> 
> 赞同：0
> 
> 时间：2012-11-11T19:06:36.800
> 
> 标签：c++, visual-studio, visual-studio-2012, boost-asio

前几天我从 Win7 32Bit + Visual Studio 2008 升级到 Win7 64Bit + Visual Studio 2012 (VC11)。现在我在编译我的应用程序时遇到了问题。我收到以下错误：

```
1>...\asio-1.5.3\include\asio/detail/impl/win_thread.ipp(51): error C2664: 'QueueUserAPC': cannot convert parameter 1 from 'void (__cdecl *)(ULONG)' to 'PAPCFUNC'
1>...\asio-1.5.3\include\asio/detail/impl/win_iocp_io_service.ipp(119): error C2664: 'GetQueuedCompletionStatus': cannot convert parameter 3 from 'DWORD *' to 'PULONG_PTR'
1>...\asio-1.5.3\include\asio/detail/impl/win_iocp_io_service.ipp(349): error C2664: 'GetQueuedCompletionStatus': cannot convert parameter 3 from 'DWORD *' to 'PULONG_PTR' 
```

我在最新版本的 boost::asio (Boost 1.52) 中遇到了同样的错误

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:45:51.883

将 WINVER 设置为 0x0501 它正在工作 - 非常感谢 Hans Passant 的提示！

# php - JSON 输出的 Array_Merge

> ID：13334430
> 
> 赞同：2
> 
> 时间：2012-11-11T19:07:25.223
> 
> 标签：php, arrays, json

我正在组合两个数组，然后编码为 JSON 以供输出。在第二个数组的开头，我在 JSON 输出中得到了一个时髦的值。这是`"0":`项目。我不知道这是从哪里来的。

组合数组和输出 json：

```
$combine = array_merge(array('array1'=>$bay_events, array('array2'=>$key_events)));
$finish = json_encode($combine);

$callback = $_GET['callback'];
echo $callback.$finish; 
```

JSON输出：

```
{
    "array1": [
        {
            "event_id": "3914",
            "event_name": "Test"
        }
    ],
    "0": {  <--- this should not be here
        "array2": [
            {
                "event_id": "3913",
                "event_name": "Testssdgs This Is how"
            }
        ]
    }
} 
```

我不知道`"0":`是从哪里来的。帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T19:10:50.023

正是因为这条线

```
$combine = array_merge(array('array1'=>$bay_events, array('array2'=>$key_events))); 
```

试试这样

```
$combine = array_merge(array('array1'=>$bay_events, 'array2'=>$key_events)); 
```

刚刚根据你的数据进行了测试，这里是

```
$bay_events = array('event_id' => '3914', 'event_name' => 'Test'); 
$key_events = array('event_id' => '3913', 'event_name' => 'Testssdgs This Is how');
$combine = array_merge(array('array1'=>$bay_events, 'array2'=>$key_events));
echo json_encode($combine);die;

{
"array1":{"event_id":"3914","event_name":"Test"},
"array2":{"event_id":"3913","event_name":"Testssdgs This Is how"}
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T19:12:24.203

你没有使用`array_merge`正确的方法

**问题**

*   你试图**只合并一个数组**
*   唯一数组中的**第二个元素**引用另一个数组，导致另一个索引`0`

解释

```
$combine = array_merge(array('array1'=>$bay_events, array('array2'=>$key_events)))
                         ^      ^                    ^
                         |      |                    |       
      Only One array ----+  Fist Index           Second Index Another array 
```

这是**正确**的使用方法`array_merge`

```
$combine = array_merge(array('array1'=>$bay_events), array('array2'=>$key_events)); 
```

或者**完全删除它**

```
$combine = array('array1'=>$bay_events, 'array2'=>$key_events); 
```

# php - 如何编辑此插件以在今天在线和现在在线显示帖子计数大 1 - MYBB onlinetoday

> ID：13334440
> 
> 赞同：0
> 
> 时间：2012-11-11T19:09:34.537
> 
> 标签：php, mysql, fetch, mybb

我正在使用这个插件

[http://mods.mybb.com/download/online-today-1.2.2](http://mods.mybb.com/download/online-today-1.2.2)

以下部分是查询

```
 $queries[] = $db->simple_select(
        "users u LEFT JOIN ".TABLE_PREFIX."sessions s ON (u.uid=s.uid)", 
        "s.sid, s.ip, s.time, s.location, u.uid, u.username, u.invisible, u.usergroup, u.displaygroup",
        "u.lastactive > $timesearch ORDER BY u.username ASC, s.time DESC"
    );
    $queries[] = $db->simple_select(
        "sessions s LEFT JOIN ".TABLE_PREFIX."users u ON (s.uid=u.uid)",
        "s.sid, s.ip, s.uid, s.time, s.location, u.username, u.invisible, u.usergroup, u.displaygroup",
        "s.time>'$timesearch' ORDER BY u.username ASC, s.time DESC"
    ); 
```

现在我想修改这个查询，以便只获取帖子计数大于 0 的用户。所以至少1个帖子及以上

谢谢你

php、mybb

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T21:10:48.580

试试这个代码：

```
 $queries[] = $db->simple_select(
    "users u LEFT JOIN ".TABLE_PREFIX."sessions s ON (u.uid=s.uid)", 
    "s.sid, s.ip, s.time, s.location, u.uid, u.username, u.invisible, u.usergroup, u.displaygroup",
    "u.lastactive > $timesearch AND u.postnum > 0 ORDER BY u.username ASC, s.time DESC"
    );
    $queries[] = $db->simple_select(
    "sessions s LEFT JOIN ".TABLE_PREFIX."users u ON (s.uid=u.uid)",
    "s.sid, s.ip, s.uid, s.time, s.location, u.username, u.invisible, u.usergroup, u.displaygroup",
    "s.time>'$timesearch' AND u.postnum > 0 ORDER BY u.username ASC, s.time DESC"
    ); 
```

我刚刚添加了一个附加`WHERE`子句来检查该`postnum`字段以确保它大于 0。

# c# - 错误：无法隐式转换类型'System.Collections.Generic.LinkedListNode >'到'边缘 '

> ID：13334443
> 
> 赞同：2
> 
> 时间：2012-11-11T19:09:37.203
> 
> 标签：c#

我正在使用以下代码获取链表工作列表的第一个元素，但在第 2 行出现错误

> `Cannot implicitly convert type System.Collections.Generic.LinkedListNode<Edge<T>>' to 'Edge<T>'`

1.  `LinkedList<Edge<T>> worklist = new LinkedList<Edge<T>>();`
2.  `Edge<T> curr = worklist.First;`

根据 .First 的定义，上面的代码应该可以工作。请帮我解决这个问题。

Edge 类的定义如下

```
private sealed class Edge<T>
{

            public  T start;
            public  T end;

    /// <summary>
    /// Constructs a new edge between the two indicated endpoints.
    /// </summary>
    /// <param name="start"> The edge's starting point. </param>
    /// <param name="end"> The edge's endpoint. </param>
    public Edge(T start, T end)
    {
        this.start = start;
        this.end = end;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T19:13:03.033

用这个：

```
Edge<T> curr = worklist.First.Value; 
```

`worklist.First`返回一个`LinkedListNode<Edge<T>>`。您需要访问第一个节点的值才能获得`Edge<T>`.

# oracle - 如何找到有条件的两行之间的差异

> ID：13334444
> 
> 赞同：5
> 
> 时间：2012-11-11T19:09:37.937
> 
> 标签：oracle

```
name      point
----------
steve     207
Mary      203
steve     205
steve     200
steve     139
Mary      300 
```

我想得到条件 eqn = [ (row + 1) - row] 其中 name = steve 的行之间的差异，所以我理想情况下希望它是，

```
steve 2   //207 - 0
steve 5   //205 - 207
steve 61  //200 - 205
steve 139 //139 - 200 
```

有代码可用于查找连续行之间的差异。但是添加条件时它将不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T19:25:28.433

**已编辑应有的 OP 评论**我已更改查询以完全匹配您的请求。

[LAG](http://www.oracle-base.com/articles/misc/lag-lead-analytic-functions.php)可以帮助您：

```
 select name, 
    coalesce( 
        point - lag( point , 1, Null ) over (order by point),
        point)
    as diff,
    point || '-' ||
    LEAD( point , 1, 0 ) over (order by point) as prev_point
  from t   
  where name = 'steve'  
  order by point desc 
```

[结果](http://sqlfiddle.com/#!4/6fb32/19/0)：

```
|  NAME | DIFF | PREV_POINT |
-----------------------------
| steve |    2 |      207-0 |
| steve |    5 |    205-207 |
| steve |   61 |    200-205 |
| steve |  139 |    139-200 | 
```

# c++ - 重用后 DLL 使应用程序崩溃

> ID：13334453
> 
> 赞同：2
> 
> 时间：2012-11-11T19:10:51.350
> 
> 标签：c++, c, winapi, dll, crash

我使用了一个使用 mdi 的应用程序，并且可以将脚本附加到 mdi 窗口或从 mdi 窗口分离，以便按需运行/停止；这个脚本加载我的 dll 做一些工作；这样做很好；但是，当我分离脚本时，一切都很好，应用程序应该卸载 dll（并使用适当的 thread_attach/detach 和 process_attach/detach 操作调用 dllmain）。现在，如果我尝试将脚本重新附加到 winow，或将其附加到另一个窗口，在 dll 已使用一次之后 - 主应用程序崩溃。我已将问题隔离到由 dll 创建的线程；踏板打开了一扇窗户；所以，我像这样创建线程：

```
if (!hThread) hThread = CreateThread(NULL, 0, ThreadProc, NULL, 0, NULL); 
```

并且，当脚本分离时，它会像这样关闭线程（无论注释掉的行是否未注释掉）：

```
SendMessage(hWnd, WM_DESTROY, 0, 0);
//TerminateThread(hThread, 0);
//WaitForSingleObject(hWndThread, INFINITE);
CloseHandle(hThread);
hThread = NULL; 
```

我不知道为什么主应用程序崩溃了。一个不同的线程（即一个简单地休眠一秒钟并循环的线程，不会造成伤害。什么给了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T22:20:53.490

好的，这里有一些想法：你说你的线程打开了一个窗口。您是在线程函数中运行消息循环，还是希望您的窗口由其他消息循环提供服务？如果您在线程中运行自己的消息循环，则退出循环可能会发生也可能不会发生，具体取决于您编写它的方式。如果你使用类似的东西：

```
while(GetMessage(&msg, ...) // msg loop in the thread function
{
  .... 
}
DestroyWindow(hWnd);  // see comment below 
```

那么这需要 WM_QUIT 而不是 WM_DESTROY 退出。无论如何，最好的方法是向您的窗口发送 WM_QUIT 并在退出消息循环后调用 DestroyWindow() 以正确销毁它。引用 MSDN：

> **DestroyWindow 函数** 销毁指定的窗口。该函数向窗口发送 WM_DESTROY 和 WM_NCDESTROY 消息以将其停用并从中移除键盘焦点。该函数还销毁窗口的菜单，刷新线程消息队列，销毁计时器，删除剪贴板所有权，并中断剪贴板查看器链（如果窗口位于查看器链的顶部）

将 WM_QUIT 消息发布到您的窗口后，您的主线程应该等待窗口线程退出。以下是一些相关代码：

```
SendMessage(hWnd, WM_QUIT, 0, 0);  // send your quit message to exit the msg loop
if (WaitForSingleObject(hThread, 5000) != WAIT_OBJECT_0) // wait up to 5 seconds
{
    TerminateThread(hThread, -1); // bad! try to never end here
} 
```

我希望这有帮助。我在使用窗口显示日志消息的线程日志查看器中使用它。

# css - 样式：链接上的活动状态

> ID：13334457
> 
> 赞同：0
> 
> 时间：2012-11-11T19:12:05.887
> 
> 标签：css

我只是想创建一个简单的菜单。因此，当您单击一个链接时，它会将您定向到另一个页面，并通过更改颜色向您显示您选择了该链接。

我遇到的问题是当我单击列表中的链接时，页面加载并且由于某种原因列表元素都进入了该`a:visited`字段。将它们设置为红色。我有[JSFIDDLE Here](http://jsfiddle.net/sR3Ub/2/)。我知道它很简单，但它让我很紧张。

CSS 代码：

```
ul.nav_style{list-style: none;}

ul.nav_style li {padding-left: 1em; text-indent: -.7em;}

ul.nav_style li:before {
    content: "•  ";
    color: #C0C0C0; /* or whatever color you prefer */
}

ul.nav_style li a:link { color: #C0C0C0; text-decoration: none;}
ul.nav_style li a:visited { color: #FF0000; text-decoration: none;}
ul.nav_style li a:hover { color: #58595B; text-decoration: none;}
ul.nav_style li a:active { color: #E6BD13; text-decoration: none;}​ 
```

HTML 代码：

```
<ul class="nav_style">
    <li><a href="#">Link 1</a></li>
    <li><a href="#">Link 2</a></li>
    <li><a href="#">Link 3</a></li>
    <li><a href="#">Link 4</a></li>
</ul> 
```

提前致谢。

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:17:04.200

解释很简单：所有链接都有相同的href。假设您将更改 href，这在您的最终站点上不会是问题。:)

看我的小提琴。我所做的就是更改hrefs。它现在是否按您的预期工作？[http://jsfiddle.net/TheNix/sR3Ub/3/](http://jsfiddle.net/TheNix/sR3Ub/3/)

**编辑：**
现在，如果您只是希望确保链接看起来相同，无论它是否被访问过，您所要做的就是对`:link`and`:visited`状态应用相同的样式，如下所示：

```
ul.nav_style li a:link,
ul.nav_style li a:visited { color: #C0C0C0; text-decoration: none;}
ul.nav_style li a:hover { color: #58595B; text-decoration: none;}
ul.nav_style li a:active { color: #E6BD13; text-decoration: none;} 
```

现在链接在空闲时应该是灰色的（即使它被访问过），当你将鼠标悬停在它上面时应该是深灰色，当你点击它时应该是金色的。见小提琴：http: [//jsfiddle.net/TheNix/sR3Ub/5/](http://jsfiddle.net/TheNix/sR3Ub/5/)

**EDIT v2**
看起来你对链接的状态有点困惑，所以这里是低调：

`:link`是标准的空闲链接（也可以简单地定位为`a`）
`:hover`是用光标悬停在元素上的行为。
`:visited`应用于已经访问过的链接。
`:active`是链接在用户界面中处于活动状态时的状态 - 例如，当您将鼠标悬停在链接上并按下鼠标左键 (onmousedown) 时，或者使用`TAB`突出显示链接时。当您释放鼠标按钮 (onmouseup) 或 tab out 时，它将恢复到之前的状态。

`:active`因此与确定它是否是活动页面无关，它仅在您按住鼠标按钮时适用。

不幸的是，您尝试做的事情仅靠 CSS 是不可能的。这是一个简单的例子，说明如何使用 jQuery 来实现。[http://jsfiddle.net/TheNix/sR3Ub/6/](http://jsfiddle.net/TheNix/sR3Ub/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T19:16:48.687

这可能是浏览器安全的原因，[http](http://dbaron.org/mozilla/visited-privacy) ://dbaron.org/mozilla/visited-privacy Mozilla [http://blog.mozilla.org/security/2010/03/31/plugging-the-css-history-泄漏/](http://blog.mozilla.org/security/2010/03/31/plugging-the-css-history-leak/)也告知了这一点。大多数最新的浏览器都采取了这种措施来保护用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T19:24:25.973

您必须将目标网址放在 href 或 data-href 等中，点击链接并加载新页面后，您必须检查窗口位置并将链接颜色设置为红色：

```
$(function(){
   var url = window.location.href;
   $("ul.nav_style li").each(function(i,e){
      var $this = $(e);
      if ($this.attr("href") == url){
         $this.css("color","red");
      }
   };
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T20:51:29.423

问题解决了，我决定只使用 PHP 来生成我的列表，使用数组和 if 语句为当前页面提供其 css 类。

PHP代码：

```
if($title == "Enter"){

              $enterArrayPages = array("competition.php","full_detail.php", "judges.php", "get_involved.php", "employers.php");
              $enterArrayText = array("The Competition","Full Detail","The Judges","Get Involved", "Employers");

              echo '<ul class="nav_style">';
              for($i=0; $i<sizeof($enterArrayPages); $i++){

                if($proper_title == $enterArrayText[$i]){
                  echo '<li><a class="linkChange" href="'.$enterArrayPages[$i].'">'.$enterArrayText[$i].'</a></li>';
                }
                else{
                  echo '<li><a class="menu_links" href="'.$enterArrayPages[$i].'">'.$enterArrayText[$i].'</a></li>';
                }
              }
              echo '</ul>';
            } 
```

如您所见，代码循环遍历存储在数组中的每个页面，如果页面的标题等于数组中的标题，我更改其类，使链接的颜色与其他链接的颜色不同。

这是CSS：

```
a.menu_links:link { color: #58595B; text-decoration: none;}
a.menu_links:visited  { color: #58595B; text-decoration: none; }
a.menu_links:active { color: #E6BD13; text-decoration: none; }
a.menu_links:hover  { color: #E6BD13; text-decoration: none; }

.linkChange {
   color: #E6BD13;
   text-decoration: none;
} 
```

这真的很简单，我只需要通过 PHP 来思考逻辑。我认为用纯 css 实现它就足够了，但随着时间的推移，我求助于 PHP。

这是代码输出的图像：

![代码输出，您可以看到我的代码如何获取当前页面并更改链接的颜色，在这种情况下，Mentor 和 What is Service 被突出显示。](../Images/f64ea58fb23d93c906e307f54048f0a4.png)

感谢大家的评论！非常感激！

# php - JpGraph 在 Localhost 上工作，但在网站上传时不起作用

> ID：13334460
> 
> 赞同：1
> 
> 时间：2012-11-11T19:12:21.347
> 
> 标签：php, web, localhost, jpgraph

我将 JpGraph 用于我的一个项目。JpGraph 在本地主机上完美运行。但是，当我将网站上传到网站托管时，不会出现相同的图表。它显示为损坏的图像。

没有返回错误消息（我使用了 ini_set('display_errors', 1); error_reporting(E_ALL | E_STRICT);）。我还尝试制作一个简单的页面，在其中回显 < img src="example2.php" >

但它是一样的。它适用于本地主机，但不适用于网络。

任何想法？

# windows - 获取 windows 代理用户名/密码

> ID：13334463
> 
> 赞同：7
> 
> 时间：2012-11-11T19:12:38.960
> 
> 标签：windows, proxy, credentials

我可以访问预配置的 Windows XP 32 位工作站。它在防火墙下，并且要使用 http 代理服务器才能到达外部。要获得代理设置，我需要主机、端口、用户名和密码。

> HTTP：//用户名：密码@服务器：端口

我能够找到代理 url 和端口（来自 PAC - 自动配置文件），但我不知道如何获取用户名/密码。有没有办法以某种方式阅读它？至少用户名？我可能会获得管理员权限。

你知道任何可以提供帮助的工具吗？

我只找到了这些 MS 文档关于获取代理配置连接的一些方法，但我不知道如何确定提供的凭据是什么：

[WinHttpGetIEProxyConfigForCurrentUser 函数](http://msdn.microsoft.com/en-us/library/aa384096%28VS.85%29.aspx)

[WINHTTP_CURRENT_USER_IE_PROXY_CONFIG 结构](http://msdn.microsoft.com/en-us/library/aa384250%28v=vs.85%29.aspx)

[WinHttpGetProxyForUrl 函数](http://msdn.microsoft.com/en-us/library/aa384097%28v=vs.85%29.aspx)

我也找到了这个库，但它更适合解析 PAC： [http ://code.google.com/p/pacparser/](http://code.google.com/p/pacparser/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T23:37:50.573

在 Windows 中，您无法获取密码。要获得连接抛出代理，您必须使用 SSPI，检查 libcurl，您可以获得连接的套接字抛出代理，使用 enable-sspi 和 openssl 构建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-09T21:27:37.170

迭代费尔南多桑切斯的回答和罗伯特的评论，您需要通过[SSPI](https://en.wikipedia.org/wiki/Security_Support_Provider_Interface)进行身份验证。就我而言，我使用[此链接使用 NTLM 进行了连接](https://isc.sans.edu/forums/diary/curl+and+SSPI/25812/)

使用ntlm[卷曲：](/questions/tagged/curl "显示标记为“卷曲”的问题")

```
curl.exe --proxy <proxy_name>:<proxy_port> --proxy-ntlm -U : https://www.google.com 
```

还要部分回答您的问题，`-U :`使用[curl 手册页](https://curl.haxx.se/docs/manpage.html)的方法：

> 如果您使用启用了 Windows SSPI 的 curl 二进制文件并执行协商或 NTLM 身份验证，那么您可以通过使用此选项指定单个冒号来告诉 curl 从您的环境中选择用户名和密码：“-U :”。

您可以从 Windows 注册表 (regedit) 获取代理名称和端口。引用罗伯特的评论：

> [HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet 设置]

它可以使用手动方式显示，也可以`REG_SZ ProxyServer`使用自动配置脚本使用`REG_SZ AutoConfigURL = https://<configuration_url>`

如果上面的[curl](/questions/tagged/curl "显示标记为“卷曲”的问题")命令失败，`Failure when receiving data from the peer`可能你有一个没有 NTLM、SSPI 或 OpenSSL的[curl版本。](/questions/tagged/curl "显示标记为“卷曲”的问题")尝试使用最新的[curl 版本](https://curl.haxx.se/windows/)

# c++ - Win32 ListBox WNDPROC 从未调用过

> ID：13334466
> 
> 赞同：0
> 
> 时间：2012-11-11T19:13:01.500
> 
> 标签：c++, winapi, listbox, wndproc

我正在围绕 Win32 控件/对话框/窗口编写一个相当简单的包装器。

我遇到的问题是 ListBox 和 ComboBox 的行为似乎完全不同。

在我继承的基础 Widget 类中，我为控件覆盖现有的 WNDPROC，然后在新的 WNDPROC 中处理消息，主要将它们提升为 boost::signal 事件。

问题是，虽然 ComboBox 的 WndProc 收到 CBN_SELCHANGE - 正如预期的那样 - ListBox 的 WndProc 没有收到 LBN_SELCHANGE 命令。

我意识到拥有该控件的对话框/窗口可能会收到这个，但我已经进入了这个兔子洞，感觉就像一个非常简洁的解决方案。我需要退出并让控件的所有者处理 WM_COMMAND 消息（并从那里将其提升为控件本身的事件）。

这是一个学习练习，所以请不要提醒我有关 MFC 或评论这样做的价值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:19:17.250

通知消息通常发送到控件的父级。大概所有的窗口（即父窗口和控件）都使用相同的窗口过程？在这种情况下，通常的解决方案是：在窗口过程的通知处理程序中检查通知是否来自当前窗口。如果是，请提出一个事件；如果它没有将消息重新发送回它来自的控件（它将作为事件引发）。

# c# - Storyboard DoubleAnimation 不适用于 StackPanel Height 属性

> ID：13334470
> 
> 赞同：5
> 
> 时间：2012-11-11T19:13:45.247
> 
> 标签：c#, xaml, windows-8, windows-runtime

我正在尝试使用 DoubleAnimation 来更改 StackPanel 的 Height 属性。该代码不会引发任何异常。但是动画不起作用。

```
 <StackPanel x:Name="FlyoutContent">

                <StackPanel.Resources>
                    <Storyboard x:Name="HideStackPanel">
                        <DoubleAnimation Storyboard.TargetName="ChangePasswordPanel" Storyboard.TargetProperty="Height" From="190" To="0" Duration="0:0:1">
                            <DoubleAnimation.EasingFunction>
                                <PowerEase EasingMode="EaseIn"></PowerEase>
                            </DoubleAnimation.EasingFunction>
                        </DoubleAnimation>
                    </Storyboard>
                    <Storyboard x:Name="ShowStackPanel">
                        <DoubleAnimation Storyboard.TargetName="ChangePasswordPanel" Storyboard.TargetProperty="Height" From="0" To="190" Duration="0:0:1">
                            <DoubleAnimation.EasingFunction>
                                <PowerEase EasingMode="EaseIn"></PowerEase>
                            </DoubleAnimation.EasingFunction>
                        </DoubleAnimation>
                    </Storyboard>
                </StackPanel.Resources>

                <TextBlock Margin="0, 20, 0, 0" FontWeight="Bold" Text="Change Current Password" TextWrapping="Wrap" Style="{StaticResource BasicTextStyle}" HorizontalAlignment="Left" IsTapEnabled="True" Tapped="ChangePasswordHeader_Tapped"/>
                <StackPanel x:Name="ChangePasswordPanel" Margin="0, 5, 0, 0" Height="0"> 
```

C# 事件处理程序

```
private void ChangePasswordHeader_Tapped(object sender, TappedRoutedEventArgs e)
{
    if (ChangePasswordPanel.Height == 0)
    {
        ShowStackPanel.Begin();
    }
    else
    {
        HideStackPanel.Begin();
    }
} 
```

它确实命中了 ChangePasswordHeader_Tapped 事件处理程序并按预期执行 ShowStackPanel.Begin 或 HideStackPanel.Begin 语句。但这对输出没有任何影响。StackPanel 的高度保持在 0。

关于发生了什么的任何想法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-12T06:04:02.043

我自己想通了。我所要做的就是在 DoubleAnimation 上启用依赖动画 (EnableDependentAnimation)，因为此动画会影响布局。然后它完美地工作了。

```
 <Storyboard x:Name="HideChangePasswordPanel">
                            <DoubleAnimation EnableDependentAnimation="True" Storyboard.TargetName="ChangePasswordPanel" Storyboard.TargetProperty="Height" From="190" To="0" Duration="0:0:0.2">
                                <DoubleAnimation.EasingFunction>
                                    <PowerEase EasingMode="EaseIn"></PowerEase>
                                </DoubleAnimation.EasingFunction>
                            </DoubleAnimation>
                        </Storyboard>
                        <Storyboard x:Name="ShowChangePasswordPanel">
                            <DoubleAnimation EnableDependentAnimation="True" Storyboard.TargetName="ChangePasswordPanel" Storyboard.TargetProperty="Height" From="0" To="190" Duration="0:0:0.2">
                                <DoubleAnimation.EasingFunction>
                                    <PowerEase EasingMode="EaseIn"></PowerEase>
                                </DoubleAnimation.EasingFunction>
                            </DoubleAnimation>
                        </Storyboard> 
```

希望它可以节省一些时间！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T20:46:35.407

通常在 XAML（和 Silverlight/WPF）中为 UI 组件的大小设置动画的最简单方法是使用 RenderTransform。根据布局，您可能需要做一些技巧，但对于快速动画，它通常看起来非常漂亮。

```
<Storyboard x:Name="Storyboard1">
<DoubleAnimation Duration="0:0:2" 
        To="0" 
        Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleY)"
        Storyboard.TargetName="StatListView" d:IsOptimized="True"/>
<DoubleAnimation Duration="0:0:2" 
        To="0" 
        Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)" 
        Storyboard.TargetName="StatListView" d:IsOptimized="True"/>
</Storyboard> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T19:18:07.967

堆栈面板的高度取自其内容的组合高度。明确设置高度没有任何意义。

您需要更改堆栈面板内容的高度/可见性。

# javascript - 具有动态长度的正则表达式

> ID：13334471
> 
> 赞同：0
> 
> 时间：2012-11-11T19:13:45.780
> 
> 标签：javascript, regex

我有 2 或 3 个单词的字符串：

```
'apple grape lemon'
'apple grape' 
```

我需要从所有单词中获取第一个字符。我的正则表达式：

```
/^(\w).*?\ (\w).*?\ ?(\w?).*?$/ 
```

对于所有字符串，此正则表达式仅获得 2 个单词的第一个字符。

怎么修？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T19:21:35.307

您不能使用一个正则表达式来执行此操作（除非您使用的是 .NET）。但是您可以使用匹配单词的第一个字符的正则表达式**，**然后获取所有匹配项，并将它们连接在一起：

```
var firstLetters = '';
var match = str.match(/\b\w/g)
if (match)
    firstLetters = match.join(''); 
```

当然，如果您只想自己获取字母，则不需要`join`，因为`match`将只是一个包含所有这些字母的数组。

你不应该，这`\w`不仅是字母，还有数字和下划线。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T19:23:24.943

如果你使用 javascript，你不需要为了一个简单的问题而使用正则表达式。

要获得第一个字母，只需执行以下操作：

```
var aString = 'apple bee plant';
var anArray = aString.split(' ');

for(var aWord in anArray) {
    var firstLetter = aWord.charAt(0);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T21:05:16.550

在正则表达式中，“单词”不仅仅意味着字母。在 JavaScript`\w`中是等于`[A-Za-z0-9_]`。因此，如果您只想要结果中的字母，您可以使用`[A-Za-z]`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T19:19:23.160

正则表达式是一种[正则语言](http://en.wikipedia.org/wiki/Regular_language)，因此您不能在其中出现这种重复。您想要的是将字符串切割成单独的标记（可以通过正则表达式来匹配分隔符），然后在每个标记上应用正则表达式。要从每个单词中获取第一个字符，使用子字符串操作而不是正则表达式会更快。

您的正则表达式的问题在于，`.*?`第二个单词之后的所有内容都吃光了，因为之后的所有内容都是可选的。这可以解决，但我个人认为它使事情变得比要求的更复杂。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T19:59:13.920

最简单的方法是：

```
firstLetters = (m = str.match(/\b\w/g))? m.join('') : ''; 
```

# javascript - 如何在 JavaScript 中进行原型继承？

> ID：13334476
> 
> 赞同：2
> 
> 时间：2012-11-11T19:14:47.817
> 
> 标签：javascript, inheritance, prototype

我尝试了几种方法，但我做不到。

在下一个示例中，我希望 Soldier 获取 Person 的所有属性，并允许添加更多属性。如何正确执行？

```
function Person(name, age) {
    this.name = name;
    this.age = age;
}

Person.prototype.hi = function (message) {
    console.log(message + "!!!");
};

var Soldier = new(Person); // it is not the way to do it

Soldier.prototype.good_hi = function (message) {
    console.log("Sir! " + message + ", sir!");
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T19:18:36.170

你没有`Soldier`构造函数。你需要先做到这一点。然后您将`Person`构造函数应用于新`Soldier`实例。

```
function Person(name, age) {
    this.name = name;
    this.age = age;
}

Person.prototype.hi = function (message) {
    console.log(message + "!!!");
};

function Soldier(name, age) {
    Person.apply(this, arguments);
}

Soldier.prototype = Object.create(Person.prototype); // is better
Soldier.prototype.constructor = Soldier;

Soldier.prototype.good_hi = function (message) {
    console.log("Sir! " + message + ", sir!");
}; 
```

* * *

然后像这样使用它：

```
var s = new Soldier("Bob", 23);

s.good_hi("Hello"); 
```

***演示：http:*** [//jsfiddle.net/3kGGA/](http://jsfiddle.net/3kGGA/)

# gwt - 带有 gwt uibiner 的 bootsrap 页脚贴纸

> ID：13334481
> 
> 赞同：0
> 
> 时间：2012-11-11T19:15:16.883
> 
> 标签：gwt, twitter-bootstrap, uibinder

我正在尝试获取 BS 贴纸页脚，如本例所示[http://twitter.github.com/bootstrap/examples/sticky-footer.html](http://twitter.github.com/bootstrap/examples/sticky-footer.html) 我将 css 和 html 添加到我的 gwt Uibinder xml 文件中，但它似乎是包装css 选择器没有效果。我不确定这是否是 b/ci 需要重新定义将包含在 'wrap' div 下的 css 元素。我不确定为什么 GWT 中的 BS 贴纸页脚不起作用。你有 BS 贴纸页脚的 GWT uibinder 示例吗？

- -更新 - -

```
 <!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
    <ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
        xmlns:g="urn:import:com.google.gwt.user.client.ui">
        <ui:style >

    /* Wrapper for page content to push down footer */
      #wrap {
        min-height: 100%;
        height: auto !important;
        height: 100%;
        /* Negative indent footer by it's height */
        margin: 0 auto -30px;
      }
    #footer {
        min-height: 40px;
 /* padding-left:250px;*/

  background-color: #f2f2f2;

      }
      /* Set the fixed height of the footer here */
      #push, #footer {
        height: 30px;
      }
       /* Custom page CSS
      -------------------------------------------------- */
      /* Not required for template or sticky footer method. */

      .container2 {
        width: auto;
        max-width: 680px;
      }
       .credit {
        margin-left: auto;
        margin-right: auto;
        width:580px;
      }

#main
{
overflow:auto;
padding-bottom:150px; /* this needs to be bigger than footer height*/
}

        </ui:style>
        <g:HTMLPanel >
    <!-- Part 1: Wrap all page content here -->

             <div class="navbar navbar-inverse navbar-fixed-top">
          <div class="navbar-inner">
            <div class="container">
              <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </a>
              <a class="brand" href="#">GND</a>
              <div class="nav-collapse collapse">
                <ul class="nav">
                  <li class="active"><a href="#">Home</a></li>
                  <li><a href="#browseinfo">Search</a></li>
                  <li><a href="#maintain">Maintain</a></li>
                  <li><a href="#add">Add Data</a></li>
                  <li class="dropdown">
                    <!-- <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                      <li><a href="#">Action</a></li>
                      <li><a href="#">Another action</a></li>
                      <li><a href="#">Something else here</a></li>
                      <li class="divider"></li>
                      <li class="nav-header">Nav header</li>
                      <li><a href="#">Separated link</a></li>
                      <li><a href="#">One more separated link</a></li>
                    </ul> -->
                  </li>
                </ul>
                <!-- <form class="navbar-form pull-right">
                  <input class="span2" type="text" placeholder="Email"></input>
                  <input class="span2" type="password" placeholder="Password"></input>
                  <button type="submit" class="btn">Sign in</button>
                </form> -->
                    <form class="navbar-search pull-right">
                    <input type="text" class="search-query" placeholder="Search"></input>
                    </form>
              </div><!--/.nav-collapse -->
            </div>
          </div>
        </div>
    <div id="wrap">
        <div id="main" class="container clear-top">

          <!-- Main hero unit for a primary marketing message or call to action -->
          <div class="row">
            <div class="span12">
            <p>&nbsp;</p>
            </div>
    </div>
          <div class="well well-small">
            <h2 align="center">Welcome To The Geospatial Network Database!</h2>
            <p align="center">This is a demo for gwt and Bootsrap library integration</p>
            <!-- <p><a class="btn btn-primary btn-large">Learn more &raquo;</a></p> -->
          </div>

          <!-- Example row of columns -->
          <div class="row">
            <div class="span3">
              <h2>How It works</h2>
              <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
              <p><a class="btn" data-content="And here's some amazing content. It's very engaging. right?" rel="popover" href="#" data-original-title="A Title" >View details &raquo;</a></p>
            </div>
            <div class="span3">
              <h2>Who It Is For</h2>
              <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
              <p><a class="btn" href="#">View details &raquo;</a></p>
           </div>
            <div class="span3">
              <h2>Get Support</h2>
              <p>Donec sed odio dui. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Vestibulum id ligula porta felis euismod semper. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</p>
              <p><a class="btn" href="#">View details &raquo;</a></p>
            </div>
            <div class="span3">
              <h2>Find Out More</h2>
              <p>Donec sed odio dui. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Vestibulum id ligula porta felis euismod semper. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</p>
              <p><a class="btn" href="#">View details &raquo;</a></p>
            </div>
          </div>
          <div class="row">
          <div class="span6">
          <div class="well">
              <ul class="nav nav-list" ui:field="recentDocumentList">
        <li class="nav-header">What's New</li>
         <!-- <li class="active" ui:field='moreItem'><a href="#"></a></li> -->
         <!--
        <li><a href="#">Document2</a></li>
        <li><a href="#">Document3</a></li>
        <li><a href="#">Document4</a></li>
        <li><a href="#">Document5</a></li>
        <li><a href="#">Document6</a></li> -->

        </ul>
        </div>
          </div>
          <div class="span6">
          <div class="well">
          <h2>Section</h2>
              <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
              <!-- <p>&nbsp;</p> -->
             <!--  <br></br> -->
              <p>
               <!-- <a class="btn btn-primary" id="myButton" data-content="And here's some amazing content. It's very engaging. right?" rel="popover" href="#" data-original-title="A Title">Click to toggle popover</a> </p> -->
              <g:Button  styleName="btn btn-primary"  ui:field="myButton">Click to toggle popover &raquo;</g:Button>  </p>
          </div>
          </div>

         </div>

        </div> <!-- /container -->
       <div id="push"></div> 
        </div>

         <footer>

            <p align="center" >&copy; 2012 <a href="">Ian Mayo </a> and <a href="">othman El Moulat</a>.</p>

         </footer>

        </g:HTMLPanel>
    </ui:UiBinder> 
```

# c# - 在 C# 中寻找 SpanIncluding 等价物

> ID：13334484
> 
> 赞同：-4
> 
> 时间：2012-11-11T19:15:53.323
> 
> 标签：c#, c++, string, mfc

我正在将 C++ 类移植到 C#，但遇到了困难。

我想找到一个相当于 SpanIncluding 的东西。

这是我的 cpp 代码：

```
while (Notes.Mid(j,1).SpanIncluding("0123456789").IsEmpty()!=NULL){} 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T19:29:32.527

我相信`SpanIncluding`从字符串的开头开始匹配，当找到第一个不匹配的字符时停止。

因此，一般情况下的一种表述是：

```
string match = new string(someString.ToCharArray().
               TakeWhile(c => "0123456789".Contains(c)).ToArray()); 
```

（或使用正则表达式的等价物）。

但是，在问题中给出的示例中，**只有一个字符**，因此整个事情可能归结为测试该字符是否为`>= '0'`and `<= '9'`：

```
while(char.IsDigit(Notes[j])) { ... }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T19:26:49.330

我找到了[SpanIncluding](http://msdn.microsoft.com/en-us/library/2fhyz756%28v=vs.80%29.aspx)的 MSDN 页面，这似乎是一个可笑的特定功能。我无法真正理解它试图解决什么，因为它有一些奇怪的警告。

LINQ 将是实现它的一种方式：

```
string text = "2334562";
IEnumerable<char> spannedChars = text.TakeWhile(c => "1234567890".Contains(c)); 
```

如果我正确理解了 MSDN 页面，这是`SpanIncluding`比queen3 选项更直接的端口，因为结果集应该在它遇到不在跨越字符串中的字符时停止。

# java - jogl/applet 不满意的类路径

> ID：13334485
> 
> 赞同：0
> 
> 时间：2012-11-11T19:16:05.850
> 
> 标签：java, applet, classpath, jogl, worldwind

我有一个使用 Nasa WorldWind 和 jogl 的小程序。如果我从 Netbeans 运行它，它可以工作，但是当从浏览器启动时，我得到这个异常：

```
Exception in thread "AWT-EventQueue-2" java.lang.UnsatisfiedLinkError: no jogl in java.library.path
    at java.lang.ClassLoader.loadLibrary(Unknown Source)
    at java.lang.Runtime.loadLibrary0(Unknown Source)
    at java.lang.System.loadLibrary(Unknown Source)
    at com.sun.opengl.impl.NativeLibLoader.loadLibraryInternal(NativeLibLoader.java:189)
    at com.sun.opengl.impl.NativeLibLoader.access$000(NativeLibLoader.java:49)
    at com.sun.opengl.impl.NativeLibLoader$DefaultAction.loadLibrary(NativeLibLoader.java:80)
    at com.sun.opengl.impl.NativeLibLoader.loadLibrary(NativeLibLoader.java:103)
    at com.sun.opengl.impl.NativeLibLoader.access$200(NativeLibLoader.java:49)
    at com.sun.opengl.impl.NativeLibLoader$1.run(NativeLibLoader.java:111)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.opengl.impl.NativeLibLoader.loadCore(NativeLibLoader.java:109) 
```

[这就是我在 Html 中嵌入小程序的方式，我从 Nasa WW 小程序示例](http://worldwind.arc.nasa.gov/java/demos/index_applet_fullscreen.html)中复制了它

```
<Html>
<Head>
<Title>Java Example</Title>
</Head>
    <Body>

<applet code="occ_client_v1.appletLauncher" width="100%", height="100%",
        archive="bigJar.jar,http://worldwind.arc.nasa.gov/java/jogl/webstart/jogl.jar, http://worldwind.arc.nasa.gov/java/jogl/webstart/gluegen-rt.jar">
</applet>

</Body>
</Html> 
```

我坚持使用 jogl 1.1 因为 WorldWind 不支持 jogl 2 。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:05:56.590

World Wind src 中的 gov.nasa.worldwindx.examples.applet 包有一个很好的作为小程序运行的示例。 [http://worldwind31.arc.nasa.gov/svn/tags/1.4.0/WorldWind/src/gov/nasa/worldwindx/examples/applet/](http://worldwind31.arc.nasa.gov/svn/tags/1.4.0/WorldWind/src/gov/nasa/worldwindx/examples/applet/)

我相信您看到的错误源于没有 jogl.jnlp。示例指向[http://worldwind.arc.nasa.gov/java/jogl/webstart/jogl.jnlp中的一个](http://worldwind.arc.nasa.gov/java/jogl/webstart/jogl.jnlp)

# java - 真的与java像素操作混淆

> ID：13334489
> 
> 赞同：0
> 
> 时间：2012-11-11T19:17:00.807
> 
> 标签：java

这部分我很困惑这 3 个十六进制的作用，例如 00ff0000，以及为什么它们被位移 16 或 8 位

```
 // Getting pixel color by position x=100 and y=40 
    int clr=  image.getRGB(100,40); 
    int  red   = (clr & 0x00ff0000) >> 16;
    int  green = (clr & 0x0000ff00) >> 8;
    int  blue  =  clr & 0x000000ff; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T19:25:51.630

像素的颜色信息以单个 32 位整数编码。最低 8 位存储蓝色信息，第 8 到 15 位存储绿色信息，第 16 到 23 位存储红色信息。位 24 到 31 存储 alpha 值。您首先显示的代码通过使用 and 操作屏蔽它们来选择正确的位。为了对它们进行计算，它们被移动以表示它们的实际值。

```
clr & 0x0000ff00 
```

选择位置 8 到 15 的位，

```
(clr & 0x0000ff00) >> 8 
```

将结果向右移动 8 个位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T19:26:52.933

在

```
int  red   = (clr & 0x00ff0000) >> 16; 
```

`&`会将所有位清零，除了那些需要的位：

```
0x00123456 & 0x00ff0000 == 0x00120000 
```

位移会将这些位放置在所需的位置：

```
0x00120000 >> 16 == 0x00000012 == 0x12 
```

其他两个通道也是如此。

```
0x00123456 & 0x0000ff00 == 0x00003400
0x00003400 >> 16 == 0x34

0x00123456 & 0x000000ff == 0x56 
```

原因是 ARGB 格式将四个字节（alpha、red、green、blue）填充到一个 int:`0xAaRrGgBb`中。RGB 格式类似，只是它不使用 alpha（不透明度）通道。移位背后的重点是分离这些字节`clr == 0x123456`：`red == 0x12` `green == 0x34` `blue == 0x56`

请注意，每个字节（8 位）用十六进制表示法中的两个十六进制数字（每个 4 位）表示，因此移位 16 位移位 4*4 位 = 4 个十六进制数字 = 2 个字节。

# php - 从数组中获取唯一值

> ID：13334499
> 
> 赞同：0
> 
> 时间：2012-11-11T19:18:00.540
> 
> 标签：php, arrays, multidimensional-array

我目前有一个看起来像下面的数组，但我只想在数组中显示显示结果，其中是唯一的（描述），我假设使用 array_unique？但我一直得到相同的结果？

这是我的数组：

```
$taglist = array(5) { 
[0]=> array(5) { 
    ["id"]=> string(2) "27" 
    ["page_id"]=> string(2) "18" 
    ["description"]=> string(10) "Web Design" 
    ["slug"]=> string(10) "web-design" 
    ["visibility"]=> string(7) "visible"
} 
[1]=> array(5) { 
    ["id"]=> string(2) "29" 
    ["page_id"]=> string(2) "18" 
    ["description"]=> string(3) "Tutorials" 
    ["slug"]=> string(3) "tutorials" 
    ["visibility"]=> string(7) "visible"
}
[2]=> array(5) {
    ["id"]=> string(2) "31"
    ["page_id"]=> string(2) "21"
    ["description"]=> string(3) "tag" 
    ["slug"]=> string(3) "tag"
    ["visibility"]=> string(7) "visible"
}
[3]=> array(5) { 
    ["id"]=> string(2) "32" 
    ["page_id"]=> string(2) "21" 
    ["description"]=> string(10) "Web Design" 
    ["slug"]=> string(10) "web-design" 
    ["visibility"]=> string(7) "visible"
}
} 
```

这是我的时间：

```
$items      = array();
$results    = $taglist;

foreach ($results as $result)
{
$items[]= $result['description'];
$items  = array_unique($items);
}

echo '<ul>';
while ($tag_item = current($items))
{
echo '<li><a href="/'.$page['slug'].'/tag/'.$tag_item['slug'].'/">'.$tag_item['description'].'</a></li>';
    next($items);
}
echo '</ul>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T19:35:43.070

```
$taglist = array(
0 => array('description'=>'one'),
1 => array('description'=>'two'),
2 => array('description'=>'one'),
3 => array('description'=>'three'),
4 => array('description'=>'one'),
);

// echo var_export($taglist, 1);  // uncomment to see the diff vs var_dump()

foreach($taglist as $tag){
$new[] = $tag['description'];

}

var_dump(array_unique($new)); 
```

# java - MySQL 连接超过 3 个表

> ID：13334504
> 
> 赞同：0
> 
> 时间：2012-11-11T19:18:43.503
> 
> 标签：java, mysql

好的，所以我有一组表，我正在尝试创建一个语句，该语句将返回某个员工教授的模块名称。我知道联接是附加这些表以便我可以查询它们的最有效方式。

**职员**

```
+---------+-------------+-----------------+
|Staff Id |Staff Name   |Grade            |
+---------+-------------+-----------------+
|E10010   |Alan Turing  |Senior Lecturer  |
|E10011   |Tony Hoare   |Reader           |
|E10012   |Seymour Cray |Lecturer         |
+---------+-------------+-----------------+ 
```

**教**

```
+---------+-----------+
|Staff Id | Module Id |
+---------+-----------+
|E10010   |CS101      |
|E10011   |CS203      |
|E10012   |CS204      |
|E10010   |CS204      |
|E10011   |M101       |
|E10011   |CS101      |
+---------+-----------+ 
```

**模块**

```
+----------+-------------------------------+-------+
|Module Id |Module Name                    |Credits|
+----------+-------------------------------+-------+
|CS101     |Introduction to Computing      |10     |
|CS203     |Data Structures and Algorithms |10     |
|CS204     |Computer Architecture          |10     |
|M101      |Mathematics I                  |20     |
+----------+-------------------------------+-------+ 
```

本质上，我想要一个看起来像这样的查询：

```
SELECT Module Name FROM Staff, Teaches, Module WHERE Staff Id = 'E10010'; 
```

这将返回 Alan Turing 教授的模块的所有模块名称：

```
+--------------------------+
|Introduction to Computing |
|Computer Architecture     |
+--------------------------+ 
```

我知道该语句没有以正确的方式加入字段，并且我需要使用 JOIN 语句，但不确定如何继续。如果有人可以解释这一点，那就太好了。提前干杯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:31:18.440

查询本身是这样的：

```
SELECT ModuleName FROM module
JOIN teaches ON module.ModuleId = module.ModuleId
JOIN staff ON teaches.StaffId = staff.StaffId
WHERE staff.StaffId = "E10010" 
```

您必须同时加入“teaches”和“staff”这两个表，而顺序很重要！首先，您需要“m:n”-连接表“teaches”并在“module”表和“teaches”-表之间建立链接。之后，您加入“员工”表并连接所有内容。

请注意，您必须在属性前面加上它们所属的表名，因为它们在表中是不明确的。

连接有一些注意事项，我会推荐[这个](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)优秀的资源作为学习它们的开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T19:25:37.213

这可能应该这样做：

```
select `Module Name` from `Module` m
join `Teaches` t on t.`Module Id` = m.`Module id`
where t.`Staff Id` = `E10010`; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T19:29:03.997

您需要使用生成的 Id，最好是数字，这样会更快。这是您可以使用mysql的一种方式：

```
create table staff (
   staff_id int auto_increment,
   staff_name varchar(32),
   grade varchar(32),
   PRIMARY KEY (staff_id)
)
create table module (
   module_id int auto_increment,
   module_name varchar(32) not null,
   PRIMARY KEY (module_id)
)
create table staff_module (
   staff_id int not null,
   module_id int not null,
   PRIMARY KEY (staff_id, module_id),
   CONSTRAINT `staff_module_fk_1` FOREIGN KEY staff_id REFERENCES staff(staff_id),
   CONSTRAINT `staff_module_fk_2` FOREIGN KEY module_id REFERENCES module(module_id)
) 
```

可以查询如下

```
select s.staff_name, m.module_name
from staff s, module m, staff_module r
where s.staff_id = r.staff_id
   and m.module_id = r.module_id 
```

您可以使用关键字`join`重写上述查询，但如果您有兴趣，请在线查找。

请注意，上面的语法未经测试。

希望这可以帮助

# python - 使用 Python 到 sqlite 的文件名列表

> ID：13334507
> 
> 赞同：3
> 
> 时间：2012-11-11T19:18:59.717
> 
> 标签：python, sqlite

我正在尝试使用 Python 使用目录中的文件名列表填充 sqlite3 数据库。我不确定为什么这不起作用：

```
conn = sqlite3.connect( "databasefile.db" )
cur = conn.cursor()
cur.execute('CREATE TABLE IF NOT EXISTS filenames (filename TEXT)')
for root, dirnames, filenames in os.walk(directory):
    for filename in filenames:
        if filename.endswith(".ext"):
            cur.executemany('INSERT INTO filenames (filename) VALUES (?)', (filename))
            conn.commit() 
```

我希望它在数据库文件中生成这个：

```
 Column
1  1st.ext
2  2nd.ext
3  3rd.ext 
```

但结果却是：

```
 Column
1  1
2  r
3  s
4  t
5  .
6  e
7  x
8  t
9  2
10 n
11 d
12 .

etc. 
```

谁能帮我理解我哪里出错了？

**编辑：**谢谢，我没有意识到迭代字符串会给出单个字符。添加逗号以使“文件名”成为元组并解析。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T19:25:17.867

首先，您不需要使用 executemany，因为实际上您一次不会执行多个插入操作。其次，更改`(filename)`为`(filename,)`. 字符串和元组都支持迭代器协议，如果没有逗号，executemany 函数会将变量解释`filename`为要迭代的东西。当你遍历一个字符串时，你会得到单个字符。

您可能会做的另一件事如下：

```
for root, dirnames, filenames in os.walk(directory):
    cur.executemany("INSERT INTO filenames (filename) VALUES (?)",
                    [(filename,) for filename in filenames if filename.endswith(".ext")])
    conn.commit() 
```

现在，您实际上正在利用 executemany，而且通常来说，对数据库的短途旅行越少越好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T19:25:31.447

我认为您的`filename`变量不是元组，我认为 sqlite 将其视为字符串。要制作一个元组，不要忘记在尾随逗号：

```
(filename,) 
```

请记住，构成元组的是**逗号，而不是括号！**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T19:25:46.213

尝试：

```
 if filename.endswith(".ext"):
       cur.executemany('INSERT INTO filenames (filename) VALUES (?)', filename) 
```

你的问题肯定是你在某个地方迭代一个字符串。

在普通的 python IDE 中，您可以按如下方式复制它：

```
>>> s = "my string"
>>> for x in s: print x
... 
m
y

s
t
r
i
n
g
>>> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T19:28:23.853

我相信这是因为`executemany`期望执行的项目*列表*。在您的脚本中，您有以下行：

```
cur.executemany('INSERT INTO filenames (filename) VALUES (?)', (filename)) 
```

这简化为：

```
cur.executemany('INSERT INTO filenames (filename) VALUES (?)', filename) 
```

然后`executemany`将您的文件名解释为单个字符的列表。

要修复它，您可以将表达式转换为元组：

```
cur.executemany('INSERT INTO filenames (filename) VALUES (?)', (filename,)) 
```

...或者一次完成所有操作：

```
conn = sqlite3.connect( "databasefile.db" )
cur = conn.cursor()
cur.execute('CREATE TABLE IF NOT EXISTS filenames (filename TEXT)')
for root, dirnames, filenames in os.walk(directory):
    allowedFilenames = [f for f in filenames if f.endswith(".ext")]
    cur.executemany('INSERT INTO filenames (filename) VALUES (?)', allowedFilenames)
    conn.commit() 
```

# c# - 如何使用 C# 在 asp.net 中连接到 LDAP 服务器

> ID：13334508
> 
> 赞同：0
> 
> 时间：2012-11-11T19:19:01.127
> 
> 标签：c#, asp.net, ldap

我正在制作一个应用程序是 asp.net 来检查一些交易报告。我想使用银行 ldap 服务器，因为银行员工只能访问该应用程序并检查这些报告。所以请指导我使用 c#（Windows 身份验证）在 asp.net 中进行 ldap 连接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T19:48:04.257

如果您使用的是 .NET 3.5 及更高版本，则应查看`System.DirectoryServices.AccountManagement`(S.DS.AM) 命名空间。在这里阅读所有相关信息：

*   [在 .NET Framework 3.5 中管理目录安全主体](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)
*   [System.DirectoryServices.AccountManagement 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)

基本上，您可以定义域上下文并在 AD 中轻松找到用户和/或组：

```
// set up domain context
PrincipalContext ctx = new PrincipalContext(ContextType.Domain);

// validate credentials
bool isValid = ctx.ValidateCredentials("myuser", "mypassword");

// find a user
UserPrincipal user = UserPrincipal.FindByIdentity(ctx, "SomeUserName");

if(user != null)
{
   // do something here....     
} 
```

新的 S.DS.AM 使得在 AD 中与用户和组一起玩变得非常容易！

此外，在 ASP.NET 中，您可能需要确保您的网站在其下运行的帐户（在 IIS 中）具有读取 AD 的权限，或者您可能需要使用以下方法之一为 AD 访问提供单独的凭据几个重载的构造函数`PrincipalContext`

# javascript - Win8/JS - 检测快照视图然后更改 CSS 文件

> ID：13334509
> 
> 赞同：0
> 
> 时间：2012-11-11T19:19:08.640
> 
> 标签：javascript, html, windows-8

我刚刚阅读了 Win8 应用程序开发要求，发现它需要能够捕捉。

那么，有没有一种简单的方法来检测它是否被捕捉然后更改 CSS 文件？你能帮忙吗？

我需要它来检测宽度是否为 320px（捕捉窗格的宽度）以及 SCREEN_WIDTH-320px（将应用捕捉到它旁边时的宽度）

有人做过吗？你能提供一些代码吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T19:20:56.667

使用 CSS 媒体查询：

```
@media screen and (-ms-view-state: fullscreen-landscape) {
}

@media screen and (-ms-view-state: filled) {
}

@media screen and (-ms-view-state: snapped) {
}

@media screen and (-ms-view-state: fullscreen-portrait) {
} 
```

# python - Python + pygtk 从数据库生成复选框表

> ID：13334513
> 
> 赞同：2
> 
> 时间：2012-11-11T19:19:45.107
> 
> 标签：python, mysql, checkbox, gtk, pygtk

我正在做一个项目，我想从 MySQL 数据库加载数据并将其显示在 PyGTK 应用程序中，以便于概览和配置。我的目标是让程序根据数据库内容自动添加新行，即。如果我向数据库添加一个新命令，我不需要对我的 GTK 应用程序进行任何更改。

这是我的测试数据库：

```
+----+----------+---------+----+--------+
| id | name     | enabled | op | desc   |
+----+----------+---------+----+--------+
|  1 | !help    |       1 |  0 | blabla |
|  2 | !version |       1 |  1 | blabla |
|  3 | !tp      |       0 |  1 | blabla |
+----+----------+---------+----+--------+ 
```

我想（动态）创建一个看起来像这样的 GTK 应用程序：http: [//i.imgur.com/EMhkz.png](http://i.imgur.com/EMhkz.png)

我以前有一些使用 python 的经验，但没有那么多 GTK，我不确定如何解决这个问题。有人可以给我一个工作的例子吗？

问候奥斯卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:51:30.043

你可以试试这个。我会让你填写细节，比如 MySQL 的东西。这里重要的部分，使小部件看起来均匀分布是参数

```
gtk.HBox(homogeneous=True) 
```

否则他们会到处都是，只占用他们需要展示自己的空间。

希望这就是你所追求的。

```
import pygtk
pygtk.require20()
import gtk

data = [['1', '!help',    '1', '0', 'blabla'], 
        ['2', '!version', '1', '1', 'blabla'], 
        ['3', '!tp',      '0', '1', 'blabla']]

def main():
    window = gtk.Window()
    window.set_title('Dynamic controls')
    window.connect("delete_event", gtk.main_quit)

    vbox = gtk.VBox()
    window.add(vbox)

    for row in data:
        hbox = gtk.HBox(homogeneous=True)
        hbox.pack_start(gtk.Label(row[1]))
        enabled_checkbox = gtk.CheckButton('Enabled')
        enabled_checkbox.set_active(row[2] is '1')
        hbox.pack_start(enabled_checkbox)
        op_checkbox = gtk.CheckButton('OP')
        op_checkbox.set_active(row[3] is '1')
        hbox.pack_start(op_checkbox)
        hbox.pack_start(gtk.Label(row[4]))
        vbox.pack_start(hbox)

    window.show_all()
    gtk.main()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T10:49:35.010

使用**libgda**。它为您提供自动绑定到数据库内容的树模型。

# html - 目标体与兄弟

> ID：13334514
> 
> 赞同：0
> 
> 时间：2012-11-11T19:19:49.580
> 
> 标签：html, css, css-selectors, siblings

我有一个包含内容（div、h1、...）的 HTML 页面。通过对这些内容之一的互动，我想影响我的身体。我查看了 CSS 的 ~ 和 + 兄弟符号，但没有成功。

有没有办法实现我想做的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T19:21:44.553

CSS 没有提供任何允许您根据其子元素或跟随它的元素来修改元素的方法。

为此，您需要查看 JavaScript。

# data-structures - 以多面体图为键的映射

> ID：13334516
> 
> 赞同：2
> 
> 时间：2012-11-11T19:20:04.877
> 
> 标签：data-structures, graph, dictionary, map, graph-theory

我想要一个数据结构，其中键是多面体（无向 3 连通平面图；在我的情况下，它们可能主要是 <30 个顶点），查找使得相等是同构的。有没有一种有效的方法来实现这个映射？

我已经研究并反映了一点，但没有提出解决方案。似乎解决方案很可能是其中之一

*   使用图形本身来查找数据的自定义数据结构

*   二叉搜索树（或其他类似的树），需要明确的排序。（我怀疑是否存在这样的顺序）

*   一个哈希表，需要一个好的哈希。我不能立即想出一个比“顶点数”或类似的更好的方法。

如何获得有效的查找？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T14:10:52.493

每个多面体图都是平面的。平面图的同构问题是多项式时间。它没有一般图同构问题的未知但被认为很大的复杂性。尽管效率很高，但这些算法并不简单，并且依赖于一些相当深的数学来进行分析。

原始论文（据我所知）是 Hopcroft 1971 年的论文*An N log N Algorithm for Isomorphism of Planar Triple Connected Graphs*，可从斯坦福获得[扫描副本](ftp://reports.stanford.edu/pub/cstr/reports/cs/tr/71/192/CS-TR-71-192.pdf)。在这个问题上有相当多的工作。最近的一篇论文是[*Algorithm and Experiments in Testing Planar Graphs for Isomorphism*](http://www.emis.de/journals/JGAA/accepted/2004/KuklukHolderCook2004.8.3.pdf)，它引用了许多现有算法以及它们之间的运行时间比较。本文提出了一种算法，它为每个图分配一个唯一的代码，顺便说一下，它还生成了一个定义良好的排序。他们在那篇论文中关于小图的最佳结果是 Brendan McKay 在[*Practical Graph Isomorphism*](http://cs.anu.edu.au/~bdm/papers/pgi.pdf)中的算法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T14:50:31.433

由于图同构不是那么容易检查的，我建议尽量减少同构检查的数量。您的哈希表似乎是一个好的开始。您需要一把好钥匙来最大化分辨率

假设您使用`[V,out_1,in_1,out_2,in_2,...]` 具有`V`=nr 个顶点、`out_i`=ith 最高出度、`in_1`=indegree 的具有最高出度的节点的数组（首先对出度排序，然后对入度进行排序）。这会比你的 nr 顶点更有效（但你可能已经想到了类似的东西）。

上面是一个相当粗略的示例，您实际上可以使用任何（组合）[图形不变量](http://en.wikipedia.org/wiki/Graph_property#Graph_invariants_and_graph_isomorphism)作为表的键。根据您拥有的图的数量及其相似性，您应该选择给您最大差异/分辨率能力的一个（如果您的所有图都具有相同数量的顶点，则使用 nr 顶点是无用的）。

使用不变量，您可以构造一棵树，也可以使用它们来创建您需要的排序。可以使用上面的数组示例，因为它定义了一个完整的顺序，但您可以再次使用任何不变量

# paypal - 无论银行如何，paypal、authorize.net 和许多其他支付网关服务都可以访问 Visa 卡处理？

> ID：13334521
> 
> 赞同：5
> 
> 时间：2012-11-11T19:21:25.683
> 
> 标签：paypal, payment-gateway, payment, authorize.net, payment-processing

我们知道有很多支付网关服务提供商，即 paypal、moneybrookers、authorize.net 以及许多国内和国际支付网关提供商。现在，我的问题是开发我们自己的支付网关服务以处理任何签证和万事达卡的步骤，而不管世界上的任何银行。我应该从哪个组织获得授权来开发我自己的支付网关服务。www.visa.com 和 www.mastercard.com 提供哪些api和协议来开发自己的支付网关服务。我不知道支付网关服务提供商的api必须与visa卡品牌网站、发卡行和收单行交互..??请给我指导...提前谢谢大家的回答..

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-11T20:28:08.330

A [payment gateway](http://en.wikipedia.org/wiki/Payment_gateway) and a [payment processor](http://en.wikipedia.org/wiki/Payment_processor) are two different things. A payment gateway, like [Authorize.Net](http://www.authorize.net/), allows a website or software to send payment information to a payment processor to process the payment. The payment processor does the actual handling of the payment (e.g. checks to see if funds are available on the card, is it approved, [AVS](http://en.wikipedia.org/wiki/Address_Verification_System), [CVV verification](http://en.wikipedia.org/wiki/Card_Verification_Value), etc).

To get a relationship with Visa and MasterCard you need to become a [Member Service Provider (MSP)](http://www.mastercard.com/za/merchant/en/acquirers/communications/msp_rules.html) and Independent Sales Organization (ISO). This costs about $10,000 up front and then $5,000 a year *if you are approved*. A background check and review is involved. This is done by your sponsoring bank, which you also have to find.

To build a payment gateway you have a lot of work ahead of you. This isn't a project you would write with a language like PHP. You would need to use a higher level language such as C or C++. Something compiled that will be much faster and more robust then PHP. You can power your web based front end with PHP (i.e. user control panel) but the backend stuff, including payment processing, will need to be in the higher level language. You'll also need an enterprise level database as open source databases could never handle a task like this. Basically you're looking at using an Oracle database which is expensive but also designed for this sort of thing.

Your first major issue will be [PCI DSS compliance](https://www.pcisecuritystandards.org). You will have to secure your system from top to bottom with regular compliance checks. This is *a lot* more difficult then it sounds. And expensive, too.

Your second major issue will be getting certified by the processing networks. To be a successful payment gateway you must be certified on every processing platform and there are at least 16 of them that I can think of off of the top of my head. Being certified takes about two months for each. You can do them simultaneously but you would be looking at at least a year to be certified on all of them. And each one has a different API so you will need to code your payment gateway to work with all of them.

Your third major issue will be the data you store. Not only do you have the PCI DSS issues to deal with, but you will need to capture and store every transaction that runs through your system for years. That kind of data will require tons of storage space (that will also need to be secured).

Your fourth major issue will be processing volume. A gateway must be able to perform transactions in a second or less. This means your hardware solutions must be able to scale for heavy traffic especially over the holiday season. It will need to be able to handle hundreds of transactions per second (thousands if you become successful). That is a big reason why you'll need to use a higher level language over PHP.

Your fifth major issue is that you will need to create a powerful yet easy to use API for web developers to use to connect to your payment gateway. They need to be able to do everything a credit card terminal can do through code. Documenting that should be fun! ;)

Minor issues include:

*   Making sure you are ECI compliant ([Electronic Commerce Indicator](http://www.merchant-account-services.org/blog/electronic-commerce-indicator/) is required for all Internet transactions)

*   Securing all data transfer (SSL)

*   Offering a user control panel

*   If you want to be successful you will also need to have anti-fraud tools available

Building a payment processor is an even more herculean task. It will require relationships with banks (a friend just went through this process for their new venture and it took over a year just to get a bank to agree to work with them). I suspect it will require you having a lot of money set aside to deal with potential processing issues that result in your customers being owed money. I'm talking at least six figures.

The technical stuff would be at least as complex as building a payment gateway. You'll need to be interfacing with banks. Lots of them. And your uptime must be 100%. I have not been this deep in the technical aspects of it all so I can't give you anything more specific then that.

The payment gateway is a huge project but doable. It becomes easier if you limit the networks it will work with. Maybe stick to the most popular to start and go from there. A better idea might be to partner with a processing bank and sell merchant accounts through them. Then make your payment gateway work only for them at first. Then you can launch quicker and also make money on the credit card processing. The payment processor part is huge and probably beyond the scope of what you want to do. If not, it's a huge undertaking that goes way beyond a handful of programmers. You're gonna need lawyers, too.

# android - Android : 片段线程

> ID：13334523
> 
> 赞同：0
> 
> 时间：2012-11-11T19:21:36.553
> 
> 标签：android, multithreading

我是 android 和 java 多线程领域的新手。在我的片段中有这段代码，但它没有在 Run 函数中调用我的方法（refreshNewsFeed）可能真的很愚蠢，我忽略了......任何帮助都会非常感激。

```
Thread t = new Thread(new Runnable() {
public void run(){    
    refreshNewsFeed();
}
});
t.start(); 
```

谢谢，谭

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T19:49:46.857

您的`Thread`对象`t`可能在 thead 真正有机会启动和执行代码之前被删除。

尝试将`Thread t`声明从此方法（看起来您使用局部变量）移至类成员。

```
public class A extends B
{
  Thread _t;
  public void someMethod()
  {
    _t = new Thread(new Runnable() {
      public void run(){    
        refreshNewsFeed();
      }
    });
    _t.start();    
} 
```

# ruby-on-rails-3 - EMBERJS：我无法从 PostController 中检索标题和正文

> ID：13334526
> 
> 赞同：0
> 
> 时间：2012-11-11T19:21:50.003
> 
> 标签：ruby-on-rails-3, ember.js

我正在尝试按照此处的指南进行操作：

[http://emberjs.com/guides/outlets/#toc_templates-controllers-and-views](http://emberjs.com/guides/outlets/#toc_templates-controllers-and-views)

我看到了这段：

```
This connectOutlet call does a few things for us:

It creates a new instance of App.PostsView, using the posts.handlebars template.
It sets the content property of postsController to a list of all of the available posts (App.Post.find()) and makes postsController the controller for the new App.PostsView.
It connects the new view to the outlet in application.handlebars. 
```

我相信我仍然需要手动创建这些文件，对吧？如果是，那么后续问题是，对于 PostController，它应该是什么样子？

顺便说一句，我正在使用 ember-rails 并将生成器用于结构。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:01:38.673

如果您使用的是 ember-rails，您可以使用`rails g ember:view Posts`它一次生成 PostsController、PostsView 和 posts.handlebars 模板。

# java - 如何使用 Gradle 在 Eclipse 中将文件夹设置为源文件夹？

> ID：13334527
> 
> 赞同：18
> 
> 时间：2012-11-11T19:22:07.273
> 
> 标签：java, eclipse, gradle

我创建了一个 Java 项目并使用 Gradle 使用源文件夹和包含生成文件的构建文件夹来构建它。

然后我使用 Git 签入项目并在另一台计算机上签出。但是在第二台计算机上，我无法运行这个 Java 项目，因为我的`src/`文件夹没有被选为源文件夹。我怎样才能做到这一点？我应该使用 Gradle 对项目设置做任何不同的事情吗？

我`build.gradle`只包含以下几行：

```
apply plugin: 'eclipse'
apply plugin: 'java' 
```

当我尝试在第二台计算机上运行我的计算机时，我收到以下错误消息：

> 选择不包含主要类型

但它在我的第一台电脑上运行良好。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-11T19:32:38.227

默认情况下，Java 插件假定生产源位于`src/main/java/`. 如果它们位于 下`src/`，您必须让 Gradle 知道：

```
sourceSets {
    main {
        java {
            srcDirs = ["src"]
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-16T15:31:49.733

在 Eclipse 中，右键单击您的项目 => 比例 => java 构建路径 => 在源代码中检查您的文件夹享受

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T02:04:17.370

之前的两个答案都是正确的，但我也建议采用 Gradle 的约定（真的是 Maven 的），因为只要保持一致，它就会在未来为您节省大量时间。

当然，您可以始终保持一致并将自定义 srcDirs 添加到每个项目中，但是很容易以以下方式开始每个项目：

`$ mkdir -p src/{main,test}/{java,resources}`

深思熟虑。:)

# android - 删除项目时，指定的 ListView 的重量会减小

> ID：13334528
> 
> 赞同：4
> 
> 时间：2012-11-11T19:22:14.277
> 
> 标签：android, listview, android-linearlayout, android-layout-weight

我正在研究android中的一个对话框，我打算为不同的手机分辨率制作非常灵活的对话框。因此，我在构建 xml 文件时使用了 layout_weight 属性。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/newGame_linearLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="0dp"
        android:layout_gravity="center_horizontal"
        android:layout_weight="3"
        android:orientation="horizontal" >

        <ListView
            android:id="@+id/newGame_InvitedPlayers"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_margin="5dp"
            android:layout_weight="1"
            android:background="@color/ListView_Background"
            android:cacheColorHint="#00000000" >
        </ListView>

        <ListView
            android:id="@+id/newGame_Plugins"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_margin="5dp"
            android:layout_weight="1"
            android:background="@color/ListView_Background"
            android:cacheColorHint="#00000000" >
        </ListView>
    </LinearLayout>

    <Button
        android:id="@+id/newGame_sendInvite"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:text="Invite Players" />

    <TextView
        android:id="@+id/newGame_textViewOnlinePlayers"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:text="Online Players:" />

    <ListView
        android:id="@+id/newGame_onlinePlayers"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_margin="5dp"
        android:layout_weight="2"
        android:background="@color/ListView_Background"
        android:cacheColorHint="#00000000" >
    </ListView>

</LinearLayout> 
```

这是它的外观：

[![期望的结果](../Images/e1f00a4af7724a3228de0afc6a913557.png)](https://junk.zomis.net/stackoverflow/withnames.png)

事实上，它看起来像我想要的。

但是当我单击底部 Listview 中的项目时，将它们从底部 ListView 中删除并将它们添加到左上角 ListView，底部 Listview 的大小会减小，直到我删除最后一个项目并且它完全消失并且看起来像这样：

[![目前的结果](../Images/2147a792cd86d25048dfd1f6c7d3512c.png)](https://junk.zomis.net/stackoverflow/nonames.png)

我希望它根本不改变大小。即使它是空的。

尽管 dp 是一个非常灵活的尺寸单位，但我不想在这种情况下使用它，顶部的两个 ListView 应该占据屏幕的 3/5，底部的一个占据剩余的 2/5，而 Button 和TextView 应该在两者之间占用尽可能少的空间。

我尝试将最后一个 Listviews 高度更改为 match_parent，它不会改变任何东西。当我单击项目时，列表视图仍然消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:16:25.277

修复最后一个 ListView 的高度，并为左右 ListViews 父级的布局设置 android:layout_weight="1"

# php - 某些选择器语法在 Symfony2 的 CssSelector 组件中不起作用（在 DomCrawler 中）

> ID：13334533
> 
> 赞同：2
> 
> 时间：2012-11-11T19:22:41.547
> 
> 标签：php, dom, symfony, css-selectors, symfony-components

我有一个关于 dom 爬虫的问题，或者更具体地说，是 CssSelector 组件。当我跑

```
$descendants = $crawler->filter('ul > li'); 
```

在一个多维列表上，我得到了所有的直接孩子。但是当我跑步时

```
$descendants = $crawler->filter('ul li'); 
```

我希望得到所有的后代，但我什么也没得到。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:35:49.220

Wouter J 是对的，这是不可能的。但这是一个可接受的解决方法：

```
$descendants = $crawler->filter('ul')->filter('li'); 
```

# python - python标准库的哪些部分保证可用？

> ID：13334536
> 
> 赞同：11
> 
> 时间：2012-11-11T19:23:11.747
> 
> 标签：python, portability

我很想知道 python 标准库的哪些部分绝对保证可用，哪些部分可能不会安装，具体取决于分发。

我已经看到[了这个问题](https://stackoverflow.com/questions/3807111/is-the-python-standard-library-really-standard)，但它并没有完全提供我正在寻找的答案。

我知道[这些模块](http://docs.python.org/3.3/library/someos.html)并不总是可用，[而数学模块总是](http://docs.python.org/3.3/library/math.html). 其他模块呢？除了数学之外，还有什么模块可以保证可用吗？

编辑：[sys 模块也总是可用的](http://docs.python.org/3.3/library/sys.html)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T20:10:04.827

如果您谈论的是标准 Python 实现（CPython），那么[http://docs.python.org/3/library/index.html](http://docs.python.org/3/library/index.html)页面列出了它提供的模块（您可以在顶部选择 Python 版本）页）。

这些是 Python 实现中包含的标准模块，但其中一些是特定于操作系统的，或者可能依赖于其他一些平台组件。这通常在具有这种依赖关系的模块的文档中注明。例如： [http](http://docs.python.org/3/library/posix.html) ://docs.python.org/3/library/posix.html – 顶部有“Platform: POSIX”注释。

其他依赖项可能不是那么明确 ——http: [//docs.python.org/3/library/sqlite3.html](http://docs.python.org/3/library/sqlite3.html)并没有说这个模块只有在 Python 构建期间 sqlite3 可用时才会构建，但这是可以的预计。

无论如何，Python 标准库参考总是最好的起点。如果一个模块文档没有说明任何关于平台的信息并且没有任何迹象表明它依赖于任何外部库或平台特定机制，那么您可能会认为它可以安全使用。但是我们其他人说过——任何人都可以自由地从他的 Python 构建中删除任何东西。

在任何 Python 安装中，任何非标准库中的内容都必须被视为可选，但来自[http://pypi.python.org/pypi](http://pypi.python.org/pypi)的“纯 Python”模块可能比标准库中的一些二进制模块更适合目标受众.

# perforce - Perforce 2008 升级到 2012

> ID：13334537
> 
> 赞同：1
> 
> 时间：2012-11-11T19:23:16.487
> 
> 标签：perforce, fogbugz

我在从 2008 年到 2012 年的 Perforce 版本升级中遇到了这个问题。升级 Perforce 服务器 (p4d) 后，Fogbugz 系统上的“签入”链接（其中列出了所有代码签入，涉及特定的 Fogbugz 问题编号）无法正常工作. 现在，如果我单击“签入”链接，它会列出发生的所有签入，但是当我单击任何更改列表编号时，它会打开一个空白浏览器窗口而不是 P4Web 用户界面。

请帮忙。

谢谢。

# vb.net - Windows 服务无法连接到本地主机上的 SQL Server

> ID：13334540
> 
> 赞同：0
> 
> 时间：2012-11-11T19:23:31.553
> 
> 标签：vb.net, sql-server-2008, windows-services, windows-server-2012

我编写了一个 VB.Net Windows 服务，用于从 Windows Server 2012 机器上的两个本地 SQL Server 2008 数据库中检索和插入一些行。在我的本地开发机器上，该服务运行完美，但是当我尝试在服务器上运行它时，该服务显示以下错误：

> *建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例） - 2012 年 11 月 11 日上午 11:50:37*

在同一台服务器机器上，我安装了带有连接到相同 SQL Server 数据库的 Web 应用程序的 IIS。此应用程序运行良好（SQL Server 使用 Windows 和 SQL 身份验证设置，我使用特定用户访问 SQL Server）

当然，我为应用程序和服务使用相同的连接字符串。

有谁知道我可能仍然做错了什么？

在此先感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:14:12.453

为了解决这个问题，我在服务器机器上创建了一个新的本地用户，这样我就可以在没有域规则麻烦的情况下运行服务，检查我的连接字符串，系统几乎立即正确运行。

感谢所有试图提供帮助的人！

# java - 路由器后面的android套接字编程

> ID：13334545
> 
> 赞同：8
> 
> 时间：2012-11-11T19:24:06.250
> 
> 标签：java, android, sockets, p2p, router

我有一个问题或问题。我正在尝试在两部安卓手机之间建立 p2p 连接。我让每部电话都连接到我的服务器，并获得了它们的私有 (192.168.1.1) 和公共 (76.123.288.22) IP 以及它们连接到我的服务器的端口。当电话连接到服务器以打开具有特定端口的服务器套接字时，我会发送响应。我还向另一部手机发送了开放套接字的公共 IP 和端口，但它没有连接。我在这里阅读了多个线程，如果手机或计算机都位于两个不同的路由器后面，则无法进行 p2p 连接。我的问题是，如果这是真的，那么 LogMeIn 或其他 p2p 应用程序如何在不同的路由器后面工作？是编程错误还是网络架构不允许？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T19:33:10.103

有几种技术可以实现这一点[——STUN](http://en.wikipedia.org/wiki/STUN)、[TURN](http://en.wikipedia.org/wiki/Traversal_Using_Relay_NAT)、[ICE](http://en.wikipedia.org/wiki/Interactive_Connectivity_Establishment)等等。您可以阅读它们中的每一个，并且诸如 skype、gtalk（现为 google talk 2018 年 3 月）等软件使用这些技术。

但这里要理解的主要概念是，

1.  您需要一个可*公开访问的 ip，以便您可以连接到它*。如果它位于专用网络上的路由器后面，那么您需要在*路由器上进行端口转发，*即您需要向该路由器添加一条规则，以将在特定端口上接收到的流量转发到路由器后面的服务器。在一定程度上，上述技术隐含地或通过涉及外部 3rd 方服务器来实现这一点。

2.  您需要在最初连接的机器上*允许传入连接*。通常 windows 或 linux 防火墙会阻止所有传入连接，除非添加了例外。您的两个节点可能都需要这样做。

对于最后一部分，我不在android上编程，所以我不确定它是否允许为传入连接添加规则等。但我知道gtalk有一个android客户端，gtalk使用XMPP，它在内部可以使用任何技术我在上面指出。所以没有理由相信为什么它不能用于安卓手机。

添加一些更有用的参考：

[libjingle](https://developers.google.com/talk/libjingle/developer_guide)（2018 年 3 月更新了链接）是 google 的一个开源库，可用于编写 p2p 应用程序，包括文本、音频和视频。

它似乎也在[这里为 android 编译](http://code.google.com/p/libjingle/issues/detail?id=156)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T19:36:05.490

“我的问题是，如果这是真的，那么 LogMeIn 或其他 p2p 应用程序如何在不同的路由器后面工作？”

这里的区别在于，两台机器的连接都通过中央服务器进行——它们不直接相互连接（特殊情况除外）。

根据设计，您想做的事情不起作用。如果 TCP 可以做到这一点，那么任何人都可以连接到任何人。

您需要让中央服务器将流量从一部手机传递到另一部手机与服务器建立的连接。

或者设置一个 VPN，或者使用谷歌浏览器来打电话（名称可能已经改变），这是一种向手机发送小消息的方法，无论网络拓扑如何。

# sql-server - Webmatrix 无法将 SQL Server 数据库发布到 Azure

> ID：13334546
> 
> 赞同：2
> 
> 时间：2012-11-11T19:24:24.017
> 
> 标签：sql-server, azure, sql-server-2008-express, webmatrix-2

我设置了一个免费的 Azure 帐户来测试它是否适合托管我的个人网站。我的站点通过 Webmatrix 在本地运行——它是带有 SQL Server 2008 Express 数据库的 .NET。

我已经在 Azure 门户中设置了一个“网站”，并且还为该网站创建了一个数据库。我已经下载了该站点的发布配置文件并将其加载到 Webmatrix。我最终设法将所有站点文件发布到 Azure，这很有效，但我现在正在尝试发布数据库。

然而，每次我尝试，我就是不工作。它最初似乎连接（虽然它很慢），但最终只是开始提供这样的日志（为了安全起见略有改变）：

```
11/11/2012 18:59
19:00:24: Using ID 'f3c9890f-dc4c-49e7-ad3d-b54e41c0x34d' for connections to the remote server.
19:00:55: Adding ACL's for path (my-site/App_Data)
19:01:49: Using ID '80039cec-bb4c-4e8f-c429-9f32922249f7' for connections to the remote server.
19:02:25: Adding ACL's for path (my-site/App_Data)
19:03:25: Adding database (MSDeploy.Continous/dbFullSql[@path='data source=tcp:p8my6ar10o.database.windows.net,1433;initial catalog=my-site_db;user id=mysite@p8my6ar10o']/sqlScript)
19:03:25: Opening SQL Connection with connection string 'data source=tcp:p8my6ar10o.database.windows.net,1433;initial catalog=my-site_db;user id=mysite@p8my6ar10o;pooling=False'. The 'transacted' setting for this connection is 'True'.
19:08:10: Retrying the sync because a socket error (10054) occurred.  
19:08:10: Retrying operation 'Serialization' on object MSDeploy.Continous (sourcePath). Attempt 1 of 25.
19:08:10: Using ID '83398aba-3463-4e67-bd72-ef26db54ffa5' for connections to the remote server.
19:08:52: Adding ACL's for path (my-site/App_Data)
19:09:22: Adding database (MSDeploy.Continous/dbFullSql[@path='data source=tcp:p8my6ar10o.database.windows.net,1433;initial catalog=my-site_db;user id=mysite@p8my6ar10o']/sqlScript)
19:09:22: Opening SQL Connection with connection string 'data source=tcp:p8my6ar10o.database.windows.net,1433;initial catalog=my-site_db;user id=mysite@p8my6ar10o;pooling=False'. The 'transacted' setting for this connection is 'True'. 
```

如果我尝试从 Management Studio 执行标准的“脚本数据库”以这种方式迁移它，那么该数据库被大量索引（很多键等），所以这不是一个选项。无论如何，由于 Webmatrix 应该能够做到这一点，我想尝试通过 Webmatrix 发布让它工作。

有谁知道如何解决这个问题或可能出了什么问题？

谢谢各位...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:53:07.867

Azure (PaaS) 中的 SQL DB 存在许多来自本地 SQL Server 或 IaaS的[限制。](http://msdn.microsoft.com/en-us/library/windowsazure/ee336245.aspx)我还建议您通过[SQL 数据库迁移向导](http://sqlazuremw.codeplex.com/)运行您的数据库，以检查您的数据库中是否有任何不受支持的项目

还请检查您是否已在数据库上添加必要的防火墙设置以允许远程连接。Azure 门户 (manage.azure.com) -> SQL 数据库 -> 管理允许的 IP 地址...

我个人还没有测试过来自 WebMatrix 的 SQL DB 连接......

# android - 动态布局中imageview的宽度和高度

> ID：13334549
> 
> 赞同：0
> 
> 时间：2012-11-11T19:24:25.767
> 
> 标签：android, android-layout, android-view

我正在使用动态布局，我想设置`ImageView`. 代码如下。如何`ImageView`在给定布局中设置高度和宽度？非常感谢任何帮助。

```
 RelativeLayout layout = new RelativeLayout(mContext);
    TextView text1 = new TextView(mContext);
    text1.setText(Constants.vctrCategory.elementAt(counter).toString());
    LayoutParams params1 = new    LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
    params1.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
    text1.setLayoutParams(params1);
    text1.setTextSize(20);
    layout.addView(text1);
    ImageView image = new ImageView(mContext);
    image.setImageBitmap(bitmap);
    layout.addView(image);
    counter++;
    return layout; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:28:14.833

> 我设置了图像视图，但它不显示

尝试这样的事情：

```
RelativeLayout layout = new RelativeLayout(this);

LayoutParams params1 = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
params1.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
TextView text1 = new TextView(this);
text1.setText(Constants.vctrCategory.elementAt(counter).toString());
text1.setTextSize(20);
layout.addView(text1, params1);

LayoutParams params2 = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
params2.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
ImageView image = new ImageView(this);
image.setImageBitmap(bitmap);
layout.addView(image, params2);

count++;
return layout; 
```

还有很多其他的 LayoutParams 类，请确保导入 RelativeLayout.LayoutParams。如果这仍然“不显示”，那么`bitmap`可能是罪魁祸首。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T19:35:32.247

`addView()`可以只使用调用`ImageView`，您可以使用宽度和高度也采用两个整数的版本：

[addView(View child, int width, int height)](http://developer.android.com/reference/android/view/ViewGroup.html#addView%28android.view.View,%20int,%20int%29)

或者，您可以直接在视图上设置宽度和/或高度`LayoutParams`，即`layout.addView(image)`在您自己的代码段中调用之后：

```
layout.addView(image);
layout.getLayoutParams().width = width;
layout.getLayoutParams().height = height; 
```

基本上它类似于你已经为`TextView`.

# opengl-es - 如何使 GLSL 将透明纹理视为白色而不是黑色？

> ID：13334551
> 
> 赞同：0
> 
> 时间：2012-11-11T19:24:32.367
> 
> 标签：opengl-es, opengl-es-2.0, glsl

我正在使用 ES 2.0 学习 GLSL，并且正在尝试编写发光片段着色器。

这就是我现在所拥有的：

```
for(float x = startX; x < endX; x += w) {
    for(float y = startY; y < endY; y += h) {
        px = texture2D(u_texture, vec2(x, y));
        extra += px;
        count++;
    }
}
extra = clamp(extra / count, 0.0, 1.0); 
```

我遇到的问题是纹理边缘附近出现暗像素。我相信这是因为像素计为 (0.0, 0.0, 0.0, 0.0)，这是一个透明的黑色像素，它会使我的图像边缘变暗。是否可以将透明像素视为白色？或者有没有更好的方法来实现发光？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:49:45.287

看起来我正在使用预乘 alpha。切换到普通纹理，效果很好

抱歉，添麻烦了！

# android - 在两个窗格模式下保持列表视图中的选择

> ID：13334555
> 
> 赞同：0
> 
> 时间：2012-11-11T19:25:03.523
> 
> 标签：android, listview

我正在尝试创建一个类似 gmail 的界面，用户单击左侧的列表并在右侧显示一些内容。我已经到了左侧有一个列表的地步，用户可以单击并突出显示该项目（我是初学者）。问题是，如果用户单击暂时空白的右侧，突出显示的项目将不再突出显示。

```
public class profileListFragment extends ListFragment {

    String[] countries = new String[] {"USA", "China"};

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(inflater.getContext(),
                android.R.layout.simple_list_item_1,countries);
        setListAdapter(adapter);
//      View listView = getActivity().findViewById(R.id.list));
        View retView = inflater.inflate(R.layout.fragment_load_profile_list_layout,container, false);
        ListView lv = (ListView) retView.findViewById(android.R.id.list);
        lv.setSelector(android.R.color.holo_orange_light);
        lv.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
//      lv.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

        return retView;
//      return super.onCreateView(inflater, container,  savedInstanceState);
    }

    @Override
    public void onPause(){

    }
} 
```

如果您需要查看更多代码，请告诉我。提前致谢

### 编辑

我已将代码编辑如下：

```
lv.setSelector(R.drawable.profile_list_selector); 
```

profile_list_selector.xml 位于“drawable”文件夹中，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >

    <item android:state_enabled="false"
        android:drawable="@android:color/holo_green_dark" />

    <item android:state_pressed="true"
        android:drawable="@android:color/holo_blue_dark" />

    <item android:state_focused="true" android:state_enabled="true"
        android:drawable="@android:color/holo_blue_bright" />

    <item android:state_enabled="true"
        android:drawable="@android:color/holo_orange_dark" />

</selector> 
```

我现在注意到的是，在右侧屏幕上，只有当我单击右侧的文本框时，突出显示才会丢失……如果我单击复选框，则突出显示的项目会被保留。完全对这一切感到困惑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-15T02:16:48.587

这个问题很老，但我最近遇到了这个问题。我有一个两窗格的平板电脑布局。一个窗格有一个 ListView 项目，第二个窗格显示在第一个窗格中选择的项目。当 ListView 中的一个项目被选中时，我想将其标记为，并更改第二个窗格。当用户旋转设备时，我想保留当前选择的标记。这是我的解决方案：

在我的列表片段中，我保留了一个位置。这保存在 onSavedInstanceState 并在 onCreate 中恢复。该位置在单击期间更新，并且也传递给适配器。在 onListItemClick 中，我也相应地更改了视图的背景颜色。

```
public class MyListFragment extends ListFragment {

    private static final String LIST_ITEM_SELECTED = "list_item_selected";

    // keep the item selected to handle rotation
    private int mPositionSelected = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        if (savedInstanceState != null) {
            mPositionSelected = savedInstanceState.getInt(LIST_ITEM_SELECTED, 0);
        }

        mAdapter = new MyAdapter(getActivity());
        mAdapter.setPositionSelected(mPositionSelected);
        setListAdapter(mAdapter);

    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        if (Utils.isTablet(getActivity())) {
            outState.putInt(LIST_ITEM_SELECTED, mPositionSelected);
        }
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
        // If this is a tablet layout the inspections list is visible.
        // so send an event to change them.
        if (Utils.isTablet(getActivity())) {
            // set the old view's bg back to black
            l.getChildAt(mPositionSelected).setBackgroundColor(Color.BLACK);
            // set the selected view's bg
            v.setBackgroundColor(Color.BLUE);
            // keep the selected position
            mPositionSelected = position;
            // tell the adapter the currently selected position
            mInspectionsByMonthAdapter.setPositionSelected(mPositionSelected);
            // let the other fragment know the items it should display
            EventBus.getInstance().post(...);
        } else {
            // else, we need to navigate to a new fragment.
        }
    }

} 
```

在适配器中，我也保持选中的位置。当设备旋转时，在 getView 方法中，选中的项目会被高亮显示。

```
public class MyAdapter extends BaseAdapter {

    private LayoutInflater mInflater;
    private int mPositionSelected;
    private Context mContext;

    static class MyViewHolder {
        TextView yearMonth;
        TextView number;
    }

    public MyAdapter(Context context) {
        mContext = context;
        mInflater = LayoutInflater.from(context);
    }

    public void setPositionSelected(int positionSelected) {
        mPositionSelected = positionSelected;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        MyViewHolder myViewHolder;

        if (convertView == null) {  // if it's not recycled, initialize some attributes
            convertView = mInflater.inflate(R.layout.my_layout, null);
            myViewHolder = new MyViewHolder();

            myViewHolder.yearMonth = (TextView) convertView.findViewById(R.id.yearMonthInspections);
            myViewHolder.number = (TextView) convertView.findViewById(R.id.numberOfInspections);

            convertView.setTag(myViewHolder);

        } else {
            myViewHolder = (MyViewHolder) convertView.getTag();
        }

        myViewHolder.yearMonth.setText(...);
        myViewHolder.number.setText(...);

        // set background color to the selected position.
        // this is used rotations. The position is maintained here and
        // in the fragment
        if (mPositionSelected == position) {
            convertView.setBackgroundColor(Color.BLUE);
        }

        return convertView;
    }
} 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T19:28:38.710

不幸的是，AFAIK 没有简单的答案。

您必须执行类似自定义适配器的操作，以不同方式绘制当前选定的项目。您还需要跟踪所选项目的状态。

有关可能的解决方案，请参阅此博客文章。

[http://bestsiteinthemultiverse.com/2009/12/android-selected-state-listview-example/](http://bestsiteinthemultiverse.com/2009/12/android-selected-state-listview-example/)

# regex - 正则表达式匹配括号后的所有内容

> ID：13334557
> 
> 赞同：2
> 
> 时间：2012-11-11T19:25:16.920
> 
> 标签：regex, file

我正在尝试批量重命名大约 10,000 个文件。我有一个工具可以使用正则表达式来做到这一点。

我只需要一个正则表达式匹配`" ("`以及之后的所有内容（空格、括号、所有内容）。

任何人都能够快速帮助解决这个非常简单的问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T19:29:14.783

如果您希望匹配中包含开放括号：

```
/ \(.*/ 
```

如果不是，请使用积极的向后看：

```
/(?<= \().*/ 
```

在此处查看实际操作： [http ://regexr.com?32p42](http://regexr.com?32p42)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-11T19:27:37.207

你真的应该看看[一个教程](http://www.regular-expressions.info/tutorial.html)，因为这可能是你可以用正则表达式做的最简单的事情。这应该这样做：

```
[ ]\(.* 
```

方括号只是为了可视化空间。它们可以（但不是必须）被省略。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T19:31:25.460

括号是正则表达式中的元字符，即它们意味着一些特殊的东西。如果要表示恰好是元字符的文字字符，则需要使用反斜杠 ( `\`) 对其进行转义。例如，考虑插入符号 ( `^`)，它是一个匹配字符串开头的元字符。

```
^abcd
matches strings beginning with the sequence of characters "abcd"

\^abcd
matches the sequence of characters "^abcd" 
```

您可以阅读正则表达式中特殊字符和文字字符之间的区别以及如何在此处转义它们：[http ://www.regular-expressions.info/characters.html](http://www.regular-expressions.info/characters.html)

# php - 扩展具有相同功能的类

> ID：13334568
> 
> 赞同：0
> 
> 时间：2012-11-11T19:26:19.397
> 
> 标签：php, codeigniter

如果我有一个具有索引函数的类并且我扩展它并创建另一个索引函数。扩展中的索引函数会覆盖父索引函数吗？另外， parent::__construct() 在构造的第二个类中到底在做什么？

```
class someclass
{
    public function index()
    {
        //do something
    }
}

class newclass extends someclass
{
    function __construct()
    {
        parent::__construct();
    }

    public function index()
    {
        //do something
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:32:59.030

你可以做一些简单的测试

```
echo "<pre>";
$b = new B();
$b->index();

echo PHP_EOL;

$c = new C();
$c->index(); 
```

输出

```
A.A::__construct
B.B::index <-------------- Parent index overwrite 

A.A::__construct   <------ Still calls it anyway
A.A::index         <------ Calls A:index
C.C::index         <------ Calls B:index 
```

课程

```
class A {

    function __construct() {
        echo __CLASS__, ".", __METHOD__, PHP_EOL;
    }

    public function index() {
        echo __CLASS__, ".", __METHOD__, PHP_EOL;
    }
}
class B extends A {

    function __construct() {
        parent::__construct();
    }

    public function index() {
        echo __CLASS__, ".", __METHOD__, PHP_EOL;
    }
}
class C extends A {

    public function index() {
        parent::index();
        echo __CLASS__, ".", __METHOD__, PHP_EOL;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T19:38:33.053

代码将像这样工作：

```
$someClass = new someClass;
$newClass = new newClass;

$someClass->index(); //this will output what is written in the index function found in someClass
$newClass->index(); //this will output what is written in the index function found in newClass 
```

所以newClass 中的方法只有在被调用时`index()`才会覆盖 someClass 中的方法`index()``index()``newClass`

要回答您的第二个问题，`parent::__construct()`将从`someClass`何时调用构造类`newClass`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T20:03:17.860

> 如果我有一个具有索引函数的类并且我扩展它并创建另一个索引函数。扩展中的索引函数会覆盖父索引函数吗？

是的。如果你愿意，你需要调用 's 的`parent::index()`定义。`newclass::index`

> 另外， parent::__construct() 在构造的第二个类中到底在做什么？

这将导致 PHP 错误，因为您没有`__construct`在父类中定义方法。

如果您不确定父类是否有方法（例如在[trait 中](http://php.net/trait)），您可以在方法中使用`is_callable('parent::method')`.

# r - 在列表中查找重复项，包括排列

> ID：13334570
> 
> 赞同：4
> 
> 时间：2012-11-11T19:26:21.770
> 
> 标签：r, list, duplicates

我想确定一个列表是否包含任何重复的元素，同时将排列视为等效。所有向量的长度相等。

完成此任务的最有效方法（最短运行时间）是什么？

```
## SAMPLE DATA
a  <- c(1, 2, 3)
b  <- c(4, 5, 6)
a.same <- c(3, 1, 2)

## BOTH OF THSE LISTS SHOULD BE FLAGGED AS HAVING DUPLICATES
myList1 <- list(a, b, a)
myList2 <- list(a, b, a.same)

# CHECK FOR DUPLICATES
anyDuplicated(myList1) > 0  # TRUE
anyDuplicated(myList2) > 0  # FALSE, but would like true. 
```

现在，我在检查重复项之前对列表中的每个成员进行排序

```
anyDuplicated( lapply(myList2, sort) ) > 0 
```

我想知道是否有更有效的选择。此外，在`?duplicated`文档中，它表示“将其用于列表可能很慢”。还有其他更适合列表的功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:49:37.987

你可以使用`setequal`：

```
myList1 <- list(a, b, a)
myList2 <- list(a, b, a.same)
myList3 <- list(a,b)

test1 <- function(mylist) anyDuplicated( lapply(mylist, sort) ) > 0

test1(myList1)
#[1] TRUE
test1(myList2)
#[1] TRUE
test1(myList3)
#[1] FALSE

test2 <- function(mylist) any(combn(length(mylist),2,
                           FUN=function(x) setequal(mylist[[x[1]]],mylist[[x[2]]])))

test2(myList1)
#[1] TRUE
test2(myList2)
#[1] TRUE
test2(myList3)
#[1] FALSE

library(microbenchmark)

microbenchmark(test1(myList2),test2(myList2))
#Unit: microseconds
#            expr     min       lq   median       uq     max
#1 test1(myList2) 142.256 150.9235 154.6060 162.8120 247.351
#2 test2(myList2)  63.306  70.5355  73.8955  79.5685 103.113 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T19:54:55.383

那这个呢...？

```
a  <- c(1, 2, 3)
b  <- c(4, 5, 6)
a.same <- c(3, 1, 2)
myList1 <- list(a, b, a)
myList2 <- list(a, b, a.same)

# For exact duplicated values: List1
DF1 <- do.call(rbind, myList1)  # From list to data.frame
ind1 <- apply(DF1, 2, duplicated) # logical matrix for duplicated values
DF1[ind1] # finding duplicated values  
[1] 1 2 3

# For permutations: List2
DF2 <- do.call(rbind, myList2)
ind2 <- apply(apply(DF2, 1, sort), 1, duplicated)
DF2[ind2] # duplicated values
[1] 3 1 2 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-11T20:02:58.000

```
 a=[1,2,3]
    b=[4,5,6]
    samea=[3,2,1]

 list1=list(a+b+a) and list(a+b+sames) both of this will create a list with same element
   [1, 2, 3, 4, 5, 6, 3, 2, 1]

   ####so finding duplicate Function

   def findDup(x):
         for i in x:
               if x.count(i)>1: return True

         return False 
```

# eclipse - Grails 项目结构中的文件夹未显示

> ID：13334572
> 
> 赞同：3
> 
> 时间：2012-11-11T19:26:41.407
> 
> 标签：eclipse, grails, sts-springsourcetoolsuite

我一直在从事一个 grails 项目，并将源代码提交给 git。

然后我安装了新版本的 IDE（GGTS 3.1）并将项目从 GIT 拉到我的工作区。项目运行良好，但域和服务文件夹未显示在 eclipse 界面中。

![域和服务文件夹丢失](../Images/8853183b749dd08211611d1a59c2c8fe.png)

我试过删除并重新导入项目。我试过清理和编译项目。我试过刷新依赖项。我试过重启IDE。

我已将类添加到域和服务文件夹并检查以确保它们在那里，但 Eclipse 将无法识别这些文件夹。

如何让这些文件夹显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-13T00:23:50.480

对我来说，切换到 Java 包视图，然后将“域”作为源文件夹添加到构建路径然后切换回来，它按预期在 Grails 视图中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T21:43:32.363

这里有两种可能：

1.  Java 模型不将服务和域文件夹识别为源文件夹
2.  抛出了一些异常并且它们被识别，但只是没有被显示。

以下是您可以执行的操作：

1.  打开类型 (CTRL+Shift+T)。你看到那里缺少的课程吗？
2.  打开 Eclipse 错误日志。任何相关的错误？
3.  打开包资源管理器视图。您在那里看到缺少的源文件夹吗？
4.  运行 Grails 刷新依赖项

使用下面的答案和评论编辑您的回复，让我知道。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-04T15:37:34.090

我遇到了同样的问题，服务文件夹没有显示。我所做的是：

1.  右键单击项目>属性
2.  Java 构建路径 > 源代码
3.  添加文件夹 > 选择缺少的文件夹
4.  行

这应该将缺少的文件夹添加到您的项目资源管理器栏中。

# c - 使用命令行参数声明结构

> ID：13334579
> 
> 赞同：1
> 
> 时间：2012-11-11T19:26:56.787
> 
> 标签：c

我正在尝试从命令行参数中获取某个值。然后使用这个值，我将在我的结构中设置一个整数数组的大小。

我的代码：

```
int main( int argc, char* argv[])
{
    int size_of_heap = atoi(argv[1]);

    struct s_status
    {
        int block_size[size_of_heap];
        char status[size_of_heap];
    }; 
```

它给了我“可变长度数组的无效声明”的错误。

我不明白为什么它不起作用，因为在通过 atoi() 从字符串转换后 size_of_heap 现在应该是一个整数，所以 block_size[size_of_heap] 应该与具有 block_size[any number] 相同。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T19:34:21.870

[可变长度数组](http://en.wikipedia.org/wiki/Variable-length_array)是在 C99 中引入的。如果您不能使用支持 ANSI C 以外标准的编译器，请声明您的结构，如下所示：

```
struct s_status {
    int *block_size;
    char *status;
} 
```

并`malloc()`用于在运行时为结构成员分配内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T19:31:04.173

您正在使用不允许可变长度数组大小的 C 标准（或编译器）。它必须是一个常量，否则您应该使用创建`block_size`and`status`数组`malloc(size_of_heap * sizeof(arr_datatype))`。

```
struct s_stats
{
    int *block_size;
    char *status;
};

struct s_stats my_stats;
my_stats.block_size = malloc(sizeof(int) * size_of_heap);
my_stats.status = malloc(size_of_heap); // sizeof(char) is always 1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T19:32:14.127

它不起作用，因为编译器不知道您的数组将具有的大小（`size_of_heap`仅在运行时才知道）。

您应该在运行时分配必要的内存，请参阅[`malloc()`](http://linux.die.net/man/3/malloc).

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-11T19:34:20.680

你在使用 GCC 吗？如果是，您可以使用 GCC 的`-std=c99`or`-std=gnu99`选项在 C99 模式下编译它。默认情况下，GCC 只支持旧的 C89 标准，不支持变长自动数组。如果您使用的是其他编译器，请查看其文档以了解如何使其支持 C99 而不是 C89。

“新”（现在已经是旧的）C99 标准已经存在 13 年了。尽可能使用它是个好主意。

# ruby-on-rails - NilClass的未定义方法“model_name”：Rails 3中的类

> ID：13334583
> 
> 赞同：0
> 
> 时间：2012-11-11T19:28:19.640
> 
> 标签：ruby-on-rails, paperclip

当我在新操作中使用表单上传照片时，我在视图中的第 3 行出现此错误。我试图上传多张照片。照片附在项目上，项目被添加到投票中。相关代码为：

```
-# new view
%h1 Upload item pictures
= form_for(@poll, :html => {:multipart => true }) do |f|
  - @poll.errors.full_messages.each do |msg|
    %p = msg
  %fieldset
    = f.label :title
    = f.text_field :title
  %fieldset
    Pending Attachments: (Max of #{Item::Max_Attachments}) each under #{Item::Max_Attachment_Size/1.megabyte} MB)
    - if @poll.items.count >= Item::Max_Attachments
      <input id="newfile_data" type="file" disabled />
    - else 
      %input{:id => "newfile_data", :type => "file"}
    #attachment_list
      %ul{:id => "pending_files"}
  %fieldset
    = f.submit "Create"

class PollsController < ApplicationController
  # POST /polls
  def create
    @poll = Poll.new(params[:poll])   
    process_file_uploads(@poll)
    if @poll.save
      flash[:notice] = 'poll was successfully created.'
      redirect_to(@poll)
    else
      render :action => "new" 
    end
  end
  private
  def process_file_uploads(poll)
    i = 0
    while params[:attachment]['file_'+i.to_s] != "" && !params[:attachment]['file_'+i.to_s].nil?
      poll.items.build(:photo => params[:attachment]['file_'+i.to_s])
      i += 1
    end
  end
end

class Poll < ActiveRecord::Base
  has_many :items, :dependent => :destroy
  accepts_nested_attributes_for :items  
end 
```

我的代码有什么问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T19:34:44.517

我得到了它。只需要在 polls_controller 中定义 new 就像

```
def new
  @poll = Poll.new 
end 
```

它有效！

# jquery - 取消选择数据表上的多行

> ID：13334591
> 
> 赞同：2
> 
> 时间：2012-11-11T19:28:51.767
> 
> 标签：jquery

我使用 jQuery 数据表插件创建了一个表，该插件允许选择多行。我想知道如何使用按钮一次性取消选择所有行。这是我的代码：http: [//jsfiddle.net/v6VTB/5/](http://jsfiddle.net/v6VTB/5/)

```
$(document).ready(function() {    
$('#example5').dataTable( {
        "bPaginate": true,
        "bLengthChange": false,
        "bFilter": true,
        "bSort": true,
        "bInfo": true,
        "bAutoWidth": false
    } );
    /* Add/remove class to a row when clicked on */
    $('#example5 tr').click( function() {
        $(this).toggleClass('row_selected');
    } );
 } );
 $('#example5').css('min-height','300');  
​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:32:30.263

只需删除类。

```
$('.btn_r').click(function() {
    $('.row_selected').removeClass('row_selected')
}) 
```

[http://jsfiddle.net/EfFA2/](http://jsfiddle.net/EfFA2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-14T15:48:17.430

I know I'm a bit late to the party but just incase anyone comes across this, DataTables has a plugin called TableTools which has built in buttons for selecting, de-selecting entire rows. As well as for printing and other functionality.

Quick example taken from the datatables website:

```
 $(document).ready(function() {   
$('#example').DataTable( {        
    dom: 'T<"clear">lfrtip',        
    tableTools: {            
        "sRowSelect": "multi",            
        "aButtons": [ "select_all", "select_none" ]       
    }    
} ); 
```

} );

Here's the link: [https://datatables.net/release-datatables/extensions/TableTools/examples/select_multi.html](https://datatables.net/release-datatables/extensions/TableTools/examples/select_multi.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T04:54:32.437

[在这个小提琴](http://jsfiddle.net/jRG4C/)中尝试这样的事情

```
 $('.btn_r').click( function() {
     $('#example5 tr').each(function(){
          if ( $(this).hasClass('row_selected') )
            $(this).removeClass('row_selected');

     })
}); 
```

# java - 如何在 javascript 页面中添加我的 java 业务代码？

> ID：13334592
> 
> 赞同：0
> 
> 时间：2012-11-11T19:28:53.540
> 
> 标签：java, javascript, html, bing-maps

给定一个“地址”列表（字符串），我可以在我的 Java 代码（协调类）中获取地理编码（纬度和经度）。

有了地理编码结果，我的目标是将坐标放在 HTML 页面中。使用 bing 地图，我正在写这样的东西：

```
 function GetMap()
     {
        // Initialize the map
        map = new Microsoft.Maps.Map(document.getElementById("myMap"), {credentials:"MY_KEY_COMES_HERE"}); 

        // Retrieve the location of the map center 
        var center = map.getCenter();

        var pins = new Microsoft.Maps.EntityCollection();

         //[PASTE] this code is outputed by my java business code and later copy-paste here
        var position = new Microsoft.Maps.Location(21.1833927,-71.147288);
        var pin = new Microsoft.Maps.Pushpin(position);
        pins.push(pin)

        var position = new Microsoft.Maps.Location(21.1822191,-71.182732);
        var pin = new Microsoft.Maps.Pushpin(position);
        pins.push(pin)

        var position = new Microsoft.Maps.Location(22.1188265,-73.1515302);
        var pin = new Microsoft.Maps.Pushpin(position);
        pins.push(pin)

        var position = new Microsoft.Maps.Location(22.1901809,-72.9447259);
        var pin = new Microsoft.Maps.Pushpin(position);
        pins.push(pin)

        var position = new Microsoft.Maps.Location(21.1194505,-71.92582259999999);
        var pin = new Microsoft.Maps.Pushpin(position);
        pins.push(pin)

          //..rest of code comes here 
      } 
```

javascript中的代码区域是手动完成的；也就是我system.out这个词下的代码[PASTE]。此刻，我这样做只是为了看看我的坐标是正确的（我知道，效率低下而且是假的）。

这让我想到了我的问题：如何在没有上述手动工作的情况下直接写入 HTML 页面（或 javascript）。或者，如何将我的 java 业务代码与 javascript 结合起来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:46:29.600

最简单的解决方案是使用将 for 循环从 javascript 移动到 java（在 jsp 页面中），它会吐出评估的位置。`myLocations`此示例假设您有一个预先填充了所有位置数据的数组。

```
<% for (int i=0; i < myLocations.length; i++) { %>
       ///...get the coordinates (l1,l2)
       var position = new Microsoft.Maps.Location(<%= myLocations[i].l1 %>, <%= myLocations[i].l2 %>);

       // Creates a Pushpin
       var pin = new Microsoft.Maps.Pushpin(position);
       pins.push(pin);
<% } %> 
```

这种方法的缺点是，由于生成的 javascript 不断变化，您无法将其缓存在客户端浏览器中，从而导致效率低下。为避免这种情况，您可以向提供当前需要添加的位置的 jsp 页面创建 AJAX 请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T19:49:28.733

如果 java 业务代码可以在浏览器中运行并从客户端浏览器访问它需要的所有资源，您可以将您的 java 代码部署为小程序：[Javascript 到 Java Applet 通信](https://stackoverflow.com/questions/7278626/javascript-to-java-applet-communication)

您的用例看起来更像是您希望它在后端服务器上的应用程序服务器中运行，并让您的浏览器通过 http 调用与其通信。在 JavaScript 中，最好使用 JavaEE6 的 JAX-RS 功能来完成，Jersey 是其参考实现： [Access Jersey based RESTful service using jQuery](https://stackoverflow.com/questions/6796520/access-jersey-based-restful-service-using-jquery)

在您的应用程序服务器中，您有：

```
class Result{
    public List<Pair<Long,Long>> getList();
    ...
}

@Path("/coordinates")
public class CoordinatesResource {

    @GET
    @Produces
    public Result getCoordinates(String location){
        return ...;
    }
} 
```

在 html 页面中，您有类似的内容：

```
$.getJSON("http://my.server.com/coordinates/?location=" + location,
  function(json) {
    for(var i = 0; i < json.list.length; i++){
      position = new Microsoft.Maps.Location(json.list[i].left,json.list[i].right);
      var pin = new Microsoft.Maps.Pushpin(position);
      pins.push(pin)
    }
} 
```

# mysql - MySQL select with 语句

> ID：13334594
> 
> 赞同：3
> 
> 时间：2012-11-11T19:29:07.420
> 
> 标签：mysql, sql, select

我正在学习更多的 SQL，并遇到了一个“问题”，

我有两个表格，如下面的链接 [http://www.sqlfiddle.com/#!2/403d4/1](http://www.sqlfiddle.com/#!2/403d4/1)

编辑：由于我这个周末完成的所有 SQL 测试现在都很迟钝，所以我问错了......对不起，伙计们......

我真正想要的：

如果我有请求的语言，我想获取所有记录，如果请求的语言不在标题表中，我希望它说“”或 null...

就像我要求'de'中的所有记录一样，我想要：

```
1  |  ACHTUNG
2  |  NULL 
```

如果我要'en'中的所有记录，我想要

```
1  |  WARNING
2  |  Ambulance 
```

真的很抱歉问错了问题。

/* 我想要做什么：我有记录的 ID 和请求的语言。如果所选语言不存在，我希望它采用另一种语言。

就像我有：语言 = 'de' 和 id = 1 我想要'ACHTUNG'，

如果我有：语言 = 'de' 和 id = 2 我想要“救护车”，因为没有 'de'... */

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:37:53.793

[http://www.sqlfiddle.com/#!2/403d4/89](http://www.sqlfiddle.com/#!2/403d4/89)

```
SELECT rec.id, title.name
FROM Records rec
LEFT JOIN Titles title ON title.record_id = rec.id and title.language='de';

SELECT rec.id, title.name
FROM Records rec
LEFT JOIN Titles title ON title.record_id = rec.id and title.language='en';

ID  NAME
1   ACHTUNG
2   (null)

ID  NAME
1   Warning
2   Ambulance 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T19:40:33.070

您可以应用自定义订单并仅返回第一行，如下所示：

```
SELECT
    rec.id,
    title.language,
    title.name

FROM Records rec

LEFT JOIN Titles title
ON title.record_id = rec.id

WHERE rec.id = 1
ORDER BY Field(title.language, "de") DESC
LIMIT 1 
```

此查询首先返回具有所需语言的记录（如果存在）。如果没有，它只会返回找到的内容。您可能想看看[这个答案](https://stackoverflow.com/questions/7024854/mysql-custom-order-by-and-alphabetical-order-by)。

# git - Git 工作流和部署，同步

> ID：13334596
> 
> 赞同：1
> 
> 时间：2012-11-11T19:29:15.837
> 
> 标签：git, workflow, rsync

我一直在寻找适合我们的工作流程，但仍然找不到完整的工作流程。希望您能帮助我们，一个由两个开发人员组成的简单团队！

据我了解，最好的工作流程是使用 git 将所有更改推送和拉取到公共开发服务器，然后将这些更改上传到部署服务器。

这方面有很多指南，如果所有更改都是由我们开发人员进行的，则很容易解决。我认为很常见的问题是部署服务器上也发生了很多变化。一种常见的情况是最终用户在其 CMS 中上传新图像。一些最终用户甚至通过 CMS 界面编辑 CSS 文件。我们如何让我们的开发服务器和部署服务器同步？吉特？同步？组合？

/马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:38:11.237

不通过 git 跟踪与用户相关的更改是一种常见的做法，因此您永远不需要从生产服务器端更新存储库。

例如，用户图像应放置在单独的目录、中央资产服务器或 Amazon S3 上。将与 CMS 相关的更改存储在数据库中也是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T19:45:30.960

从概念上讲，您必须将代码更改与内容更改（尤其是用户生成的内容）分开。Git 不适合进行整个站点的备份，因此索引快速变化的用户内容只会创建一个过大的存储库，效率低下，最重要的是，不可移植。

使用 Git 跟踪对*允许*用户编辑/贡献/维护其内容的文件的更改。为您的工作流程使用集中式服务器（我们使用 gitolite）。正如@iltempo 提到的，将用户生成的内容分开，并使用`.gitignore`.

使用 Git 存储库，您可以使用 git 挂钩来执行脚本 - 很多人使用这些来自动部署，但您可以轻松地使用`rsync`它来自动备份和同步您的服务器。rsync 非常适合这一点，因为您可以选择仅添加新内容，从而降低交易时间。因此，从概念上讲，git 负责代码，rsync 负责其他所有事情，而 git 钩子使之成为现实。

我们将它与我们的 CMS 一起使用，它是一个救星。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T20:41:31.850

粗略地说，您需要从源代码树和/或部署过程中排除一些文件夹/文件。Rsync 可以。

您是否正在寻找[持续集成](http://en.wikipedia.org/wiki/Continuous_integration "持续整合")？

为了自动化您的工作流程，我建议使用[Jenkins](http://jenkins-ci.org/ "詹金斯")。

使用 Jenkins，您可以自动化构建、自动化测试（如果可能），您甚至可以在将提交推送到 Git 存储库、登台服务器或生产时部署您的应用程序。

Jenkins 不仅限于 Java 项目，您可以使用它构建任何项目。

# javascript - 在 iOS 6 上嵌入 PhoneGap 的 YouTube iframe 仅显示空白广告屏幕

> ID：13334600
> 
> 赞同：1
> 
> 时间：2012-11-11T19:29:30.313
> 
> 标签：javascript, cordova, video, youtube, ios6

我正在尝试为 PhoneGap 应用程序实现一个 youtube 视频，所以我使用的是谷歌推荐的 iFrame 实现。在 iOS 5、Android 2.3 和 4.0 上，此解决方案完美运行，但在 iOS 6 上却失败了。它显示了一个空的广告框，没有进一步的点击，就好像 youtube 代码没有将带有 iOS 6 的 iPhone 5 识别为移动设备一样。

我附上了截图和应用的代码。有没有其他人有这个问题或如何解决它的想法？

![iOS6 上的 PhoneGap YouTube iframe 实现](../Images/3d928a227e44ff1b45b349d71e48ad5d.png)

```
 <iframe class="youtube-player" type="text/html" width="100%"  src="http://www.youtube.com/embed/zG59U7asvCE" frameborder="0">
           </iframe> 
```

# java - 不承诺供应商锁定的 GAE 框架

> ID：13334603
> 
> 赞同：3
> 
> 时间：2012-11-11T19:29:49.437
> 
> 标签：java, spring, google-app-engine, jakarta-ee, frameworks

我正在寻找一个可以在 Goggle App Engine 上运行的框架（首选 Java），但也可以切换到另一个云供应商，比如 AWS-Beanstalk 或 OpenStack。当然，您将不得不更改一些属性文件和东西，但我不想更改我的大部分代码。

而且我也非常关心性能，即使在免费 GAE 报价中，该应用程序也应该具有不错的性能。随着规模的扩大，我可能会承诺付款，但是没有计划作为起点付款。

所以我的第一个想法是 Spring Framework，但我没有使用它的经验，所以我不确定它是否符合我的需求？即使是商业应用程序，也有任何严重的竞争对手吗？

最后一点，如果必须声明我在开发 Java 方面非常有经验，但还没有对 Java 框架（在应用程序框架方面）做过任何事情。到目前为止，我使用的唯一框架是 Symfony。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:18:33.133

您可以检查不同 Java 框架的兼容性：[它会在 GAE 中运行吗？](http://code.google.com/p/googleappengine/wiki/WillItPlayInJava)

Spring由不同的模块组成。其中一些将开箱即用，其中一些需要一些补丁。这实际上取决于您可以在 GAE 中运行的类，在[Google 类白名单](https://developers.google.com/appengine/docs/java/jrewhitelist)中定义。

恕我直言，每次我必须修复一个库以使其在 GAE 上运行时，我都觉得很烦人，所以如果有可能，我会使用完整的 Java 规范支持 PaaS，比如[Heroku](http://www.heroku.com)。

# jquery-mobile - 页面更改期间按钮变丑

> ID：13334606
> 
> 赞同：1
> 
> 时间：2012-11-11T19:30:02.770
> 
> 标签：jquery-mobile

我已经用 jquery mobile 组合了一个简单的 webapp。当用户访问主页时，他们会看到一个按钮列表，他们可以单击这些按钮来确定去哪里。

这些按钮是从对 php 脚本的 ajax 调用生成的，该脚本调用数据库以确定哪些选项可用。

有几个页面，每个页面在 on 时都会进行自己的 ajax 调用`pageshow`。每个按钮都是一个链接，`data-role="button"`因此它们看起来不错。

但是我面临的一个问题是，在页面更改之间，有一个轻微的延迟，导致按钮在页面更改之前变得丑陋。

这在速度较慢（或繁忙）的计算机上更为明显。如果设置页面需要很长时间（可能从数据库返回大量数据），也会出现延迟，并且按钮会变丑。

这可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T13:44:01.003

有（至少）三种方法来处理这个问题：

*   在显示页面之前添加内容：通过将动态内容的添加绑定到在`pagecreate`jquery mobile 增强页面之前触发的事件。显然，如果您的调用是异步的，您可能没有机会在页面增强之前检索和插入动态内容。
*   在元素显示之前隐藏元素：这就是我的做法（在带有 jqm 列表的列表中，不必使用按钮）。我使用归结为的 css 类创建元素`display:none;`，并在手动调用增强功能后删除该类
*   一个接一个地增强按钮：为了不必等待整个元素都被插入，它们开始看起来不错，您可以`.button()`在插入后调用每个单独的元素（如果您将它们插入 DOM 之一在另一个之后）。对于每个元素，您可能仍然会从丑陋到漂亮地轻微“眨眼”，但这应该几乎不会引起注意。

# c - 支持扩展的文件通配符

> ID：13334610
> 
> 赞同：0
> 
> 时间：2012-11-11T19:30:28.483
> 
> 标签：c

对于我的学校项目，我正在尝试为 *.jpg、*.c 等扩展名实现文件通配。为此，我必须使用 readdir(2) 和 getdents(3) 等函数从当前目录读取所有文件，然后使用 strstr(3) 匹配它们，然后将它们添加到传递给 exec(2) 的参数列表中。我不应该使用 glob (3)。我应该如何实现这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T19:56:51.460

POSIX 提供了支持通配符的函数；标准 C 没有，微软的做法完全不同。

标题[`<fnmatch.h>`](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/fnmatch.h.html)和功能[`fnmatch()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fnmatch.html)可能是答案的一部分；这允许您使用`opendir()`,`readdir()`和`closedir()`函数来扫描目录并将文件名与您的 glob 模式匹配。

如果不是因为问题中的禁止，您可能会发现[`<glob.h>`](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/glob.h.html)标题和[`glob()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/glob.html)功能更合适。

您可以查看[`<wordexp.h>`](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/wordexp.h.html)标题和[`wordexp()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/wordexp.html). 这对你来说比做的工作更多`glob()`，但如果不被禁止，会为你节省很多精力。

通常，`glob()`最有可能满足您的需求。但是，既然排除了这一点，也许您可​​以使用`fnmatch()`which 期望您从中获取文件名……好吧，实际上，它并不关心您从哪里获取名称；它只是验证您提供的名称是否与您指定的文件名模式匹配。

如果您不打算使用其中任何一个，那么您将必须实现足够的正则表达式来匹配您期望识别的 shell glob，并且仍然使用`readdir()`etc 来检查可用名称。

# java - 创建抽象类的对象 - 错误

> ID：13334611
> 
> 赞同：0
> 
> 时间：2012-11-11T19:30:39.133
> 
> 标签：java

我有一个名为`A`.

```
public abstract class A {
 protected String name;
 A(String name){
  this.name=name;
 }
} 
```

上面的类在`com.goog.product.demo`包包中

现在，我需要从另一个包中加载一些测试数据，方法是创建一个对象，如下所示；

以下类在包中`com.goog.product.test`。

```
public class Test {

 public void loadData(){
  A a =new A("NAME");
 }
} 
```

但是，我最终得到一个错误：

> 无法实例化类型 A

原因是因为；你不能创建抽象类的对象。有没有其他方法可以加载一些测试值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T19:33:34.160

抽象类不能被实例化。您应该阅读[此](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)内容以更好地理解它。

您可以扩展您的抽象类或使其成为非抽象类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T19:35:44.373

尝试扩展你的课程......

公共类 B 扩展 A {

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T19:35:10.973

我相信您要做的是构建一个新课程。在这种情况下，您所要做的就是：

```
public class Aclass {

    private String name;

    public Aclass(String name) {
        this.name = name;
    }
} 
```

# javascript - jQuery youtube video 更新视频

> ID：13334620
> 
> 赞同：0
> 
> 时间：2012-11-11T19:31:42.267
> 
> 标签：javascript, jquery, youtube-api

我正在尝试实时更改 youtube 视频，但我无处可去；在我的代码中，当我第一次单击“li”元素时，视频会正确加载，但如果我再次尝试单击，视频不会更新；这是我的代码：

```
function loadv(v)
  {
   var params = {
          allowScriptAccess: "always"
      };

      var atts = {
          id: "ytplayer1"
      };

    swfobject.embedSWF("http://www.youtube.com/v/"+v+"?rel=0&enablejsapi=1&playerapiid=ytplayer1",
                       "play", "480", "295", "9", null, null, params, atts);

  }

     $('#playlist li').click(function()
     {

           var video = $(this).attr('id');
           loadv( video );
           console.log(video); //shows the correct id

      }); 
```

和 html ：

```
 <div id="play">You need Flash and JavaScript in order to view the video.</div>
    <div id="videoStatus">status</div>

       </br>
       <ul id="playlist">
     <li id="C0DPdy98e4c">1</li>
    <li id="zM0k99OpiXM">2</li>
    <li id="0ScsDReUTxw">3</li>
    <li id="crgB4TyzyXM">4</li>
    </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T19:42:54.717

创建对象时不能更改参数。但您可以改用**Youtube Javascript Player API**。看看[https://developers.google.com/youtube/js_api_reference](https://developers.google.com/youtube/js_api_reference)

您想要的功能的参考（更改生成的播放器中的视频）在这里：[https ://developers.google.com/youtube/js_api_reference#loadVideoById](https://developers.google.com/youtube/js_api_reference#loadVideoById)

# html - CSS3 中的@font-face 不起作用

> ID：13334622
> 
> 赞同：1
> 
> 时间：2012-11-11T19:32:12.457
> 
> 标签：html, css, font-face

我正在尝试为我的网站做@font-face，但不幸的是它不起作用。我试过了：

```
@font-face {
    font-family: BN Shirly; /*Adding a custom font*/
    src: url('Fonts/BN Shirly.ttf');  /*Source of font*/
} 
```

然后在跨度中我想使用文本到：

```
#categories span {
    color: white;
    font-family: 'BN Shirly';
    font-size: 30px; 
} 
```

我该如何解决这个问题，以便我的自定义字体可以工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T19:36:19.903

```
@font-face {
   font-family: BN-Shirly; /*Adding a custom font*/
   src: url('Fonts/BN-Shirly.ttf');  /*Source of font*/
}

#categories span {
    color: white;
    font-family: BN-Shirly;
    font-size: 30px; 
} 
```

我只是在字体系列中看到一个空格，只需删除空格并尝试一下。并删除声明类中的引号。

更新

```
@font-face {
    font-family: 'BN-Shirly';
    src:    url('Fonts/BN-Shirly.ttf') format('truetype');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T19:36:47.537

首先转到此服务并转换您的字体： [http ://www.font2web.com/](http://www.font2web.com/)

然后执行以下 CSS：

```
@font-face {
    font-family: 'Conv_ae_Sindbad';
    src: url('fonts/ae_Sindbad.eot#iefix') format('embedded-opentype'),
    url('fonts/ae_Sindbad.woff') format('woff'), url('fonts/ae_Sindbad.ttf') format('truetype'), url('fonts/ae_Sindbad.svg') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

当然替换你的字体名称。

# c# - LightSwitch 应用程序中默认菜单项的显示问题

> ID：13334630
> 
> 赞同：0
> 
> 时间：2012-11-11T19:33:10.350
> 
> 标签：c#, .net, visual-studio, visual-studio-lightswitch

正如您在下面看到的，菜单的背景是透明的，您可以看到它背后的任何内容。我们如何解决这个问题？

我正在项目中的某处寻找一些代码，但我什么也看不到。

![在此处输入图像描述](../Images/fc1bcba085a7278621e9a81ac5defdca.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:03:52.630

如果您创建一个快速测试应用程序，会发生这种情况吗？

我还在使用2011，所以我无法测试它。我还没有听说过它发生了。

# python - os.system 和子进程调用的区别

> ID：13334634
> 
> 赞同：8
> 
> 时间：2012-11-11T19:33:36.620
> 
> 标签：python, subprocess

我创建了一个程序，该程序在本地服务器中创建 Web 架构，然后加载必要的浏览器以在 localhost 上显示 html 和 php 页面。

该`os.system`调用会杀死 python 进程但不会杀死其他进程——例如，`httpd.exe`和`mysqld.exe`

该`subprocess`调用会杀死`httpd.exe`和`mysqld.exe`程序，但会继续运行 python 代码，并且在`subprocess`调用之后不会执行任何代码。

在执行 python 代码后，我将如何杀死或隐藏所有必要的进程？

这是我的代码。

```
os.makedirs(dr + x + '/admin' + '/css')
dobj = open(dr + x + '/admin' + '/css' + '/style.css', 'w')
dobj.close()
del dobj
os.makedirs(dr + x + '/admin' + '/js')
os.makedirs(dr + x + '/admin' + '/img')
################################################################################
## THE OS SYSTEM CALLS CLOSE THE APP BUT OPEN THE PROCESSES
## AND THE SUBPROCESS CALLS CLOSE BOTH PROCESSES AND LEAVES THE APP OPEN
## CANT WIN!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
os.makedirs(dr + x + '/admin' + '/conf')
#os.system(r'C:\\xampp\\apache\\bin\\httpd.exe')
#os.system(r'C:\\xampp\\mysql\\bin\\mysqld.exe')
subprocess.Popen(['C:\\xampp\\apache\\bin\\httpd.exe'], shell=True, creationflags=subprocess.SW_HIDE)
subprocess.Popen(['C:\\xampp\\mysql\\bin\\mysqld.exe'], shell=True, creationflags=subprocess.SW_HIDE)
webbrowser.open('localhost/' + x)
sys.exit()
################################################################################

else:
    backmaybe = raw_input('Already Exists... Try Again? (Y/N) ')
if backmaybe == 'y':
    start()
else:
    sys.exit() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T21:39:10.060

`os.system`和之间的区别在于`subprocess.Popen`Popen 实际上打开了一个[管道](http://en.wikipedia.org/wiki/Pipeline_%28Unix%29)，并`os.system`启动了一个[子shell](http://en.wikipedia.org/wiki/Shell_%28computing%29)，很像`subprocess.call`. Windows 仅支持 *nix 操作系统的一些管道/外壳功能，但差异应该基本相同。子shell 不允许您像管道那样与另一个进程的标准输入和输出进行通信。

您可能想要的是像您一样使用子进程，然后在应用程序终止之前调用管道对象上的 kill() 方法（[来自文档）。](http://docs.python.org/2/library/subprocess.html)这将让您决定何时终止该进程。`pipe.communicate()`您可能需要通过调用和关闭管道的文件句柄来满足进程想要执行的任何 i/o 。

# backbone.js - 骨干路由器不接功能

> ID：13334636
> 
> 赞同：3
> 
> 时间：2012-11-11T19:33:41.113
> 
> 标签：backbone.js, backbone-routing

我尝试使用带有 pushstate 的骨干：

```
$(document).ready(function(){
    var App = Backbone.Router.extend({
        routes: {
            "/":            "homepage",
            "/questions":   "questions"
        },
        homepage: function() {
            console.log('why');
        },
        questions: function() {
            console.log('this is not working?');
        }
    });
    var the_app = new App();
    $("a").click(function(ev) {
        the_app.navigate( $(this).attr("href"), true);
        return false;
    });
    Backbone.history.start({pushState: true});
}) 
```

问题是，每当我单击这样的链接之一时：

```
<a href="/"> home </a>
<a href="/questions"> questions</a>
<a href="/justlink"> just link</a> 
```

浏览器中的位置更改而无需重新加载，但与它相关联并且我已经在路由中定义的功能不会执行。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T19:51:50.207

来自[精美手册](http://backbonejs.org/#Router-extend)：

> **延长** `Backbone.Router.extend(properties, [classProperties])`
> 
> [...] 请注意，您需要避免在路由定义中使用前导斜杠：

你希望你`routes`看起来像这样：

```
routes: {
    "":            "homepage",
    "questions":   "questions"
} 
```

演示：http: [//jsfiddle.net/ambiguous/ybPcg/](http://jsfiddle.net/ambiguous/ybPcg/)

# image - 鼠标悬停在文本上 - 图像显示在固定位置

> ID：13334637
> 
> 赞同：0
> 
> 时间：2012-11-11T19:33:41.660
> 
> 标签：image, text, hover, mouse, mouseover

当有人将鼠标悬停在文本上时，我希望显示图像

例如：www.hiphopking.nl

我不知道它叫什么。有人知道我应该用谷歌搜索什么来获得类似的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T19:54:08.020

你到底想达到什么目的？任务本身可以用几行 jQuery 轻松完成，看看我刚刚为你创建的这个示例：

```
$(document).ready(function()
{
    $("#myText").hover(
      function () {
        $("#myImage").show();
      },
      function () {
        $("#myImage").hide();
      }
    );    
});​ 
```

在这里演示：http: [//jsfiddle.net/umn9F/](http://jsfiddle.net/umn9F/)

# objective-c - 我可以用颜色和不同颜色的边框描边路径吗？

> ID：13334641
> 
> 赞同：1
> 
> 时间：2012-11-11T19:33:59.917
> 
> 标签：objective-c, ios, core-graphics, cgcontext

是否可以描边路径以使描边线具有不同颜色的边框？可以通过以 5 的线宽将路径划为黑色，然后在其上绘制相同的路径，以 3 的线宽将其划为白色，从而实现相同的效果，因此该线将是黑色的，并且在任一路径上都带有一条细白线边。我宁愿不使用这种方法，因为我已经绘制了大量的折线并且不想不必要地减慢速度。我希望它可以用模式或其他东西来完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:23:40.017

只是一个想法：使用`CGContextReplacePathWithStrokedPath`路径轮廓替换您的路径。然后你可以用不同的颜色填充和描边新路径。

# php - [SQL/PHP]Fieldname 是一个数字，类型为“int”

> ID：13334648
> 
> 赞同：1
> 
> 时间：2012-11-11T19:34:40.070
> 
> 标签：php, mysql, numbers, int, addition

我正在一个网站上工作，该网站将显示游戏服务器的不同统计数据，问题是创建数据库的人在武器 ID 之后命名了很多字段，以检查某人使用该特定武器获得了多少杀戮（例如字段AK47 称为“31”）。

现在，我想分组展示这些，以火箭发射器为一组，近战武器为一组，以此类推。

```
$result = mysql_query("SELECT *, (kills/deaths) as ratio, SEC_TO_TIME(timePlayed) as time, race1+race2+race3 as podiums, 35+36 as RPGs FROM `exm_player_sts_data` where accID = '$aid'") or die(); 
```

在这里，您可以看到“race1+race2+race3 as podiums”可以很好地将某人完成第 1、2 和 3 名的次数显示为“podiums”，但“35+36 as RPGs”只会将其显示为 71。

我怎样才能使它像“字段名+字段名”而不是“数字+数字”一样工作？我试过用括号，但这不想工作（我对此很陌生）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:37:53.107

您是否尝试使用反引号？

```
`35` + `36` 
```

# wcf - Silverlight 4 WCF 轮询双工在 IIS Express 中不起作用

> ID：13334652
> 
> 赞同：1
> 
> 时间：2012-11-11T19:34:45.290
> 
> 标签：wcf, silverlight, iis-express, pollingduplexhttpbinding

我有一个silverlight 4 聊天程序，它使用带有pollingDuplexHttpBinding 的WCF 服务。

该程序工作正常： * Cassini * IIS 本地 Web 服务器 * 所有非双工 WCF 服务在任何设置下都可以正常工作

但它在 IIS 7.5 Express 中不起作用。进行了调用，但给出了 500 HTTP 错误，并且没有任何反应（没有抛出异常，程序只是忽略它）

这是我的 Web.Config

```
<configuration>
<system.web>

    <compilation debug="true" strict="false" explicit="true" targetFramework="4.0" />
</system.web>
<system.webServer>
    <defaultDocument enabled="true">
        <files>
            <add value ="DuelPortalOnlineTestPage.html"/>
            <add value="ClientBin/DuelPortalOnline.xap"/>
        </files>
    </defaultDocument>
</system.webServer>
<system.serviceModel>
    <services>
        <service name="DuelPortalOnline.Web.ChatService" >
            <host>
                <baseAddresses>
                 </baseAddresses>
            </host>
            <endpoint address="" binding="pollingDuplex" bindingConfiguration="myPollingDuplex"
                contract="DuelPortalOnline.Web.ChatService"  behaviorConfiguration="duplexBehavior" />
            <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        </service>
        <service name="DuelPortalOnline.Web.SQL_Webclient_Service">
            <endpoint address="" binding="customBinding" bindingConfiguration="DuelPortalOnline.Web.SQL_Webclient_Service.customBinding0"
                contract="DuelPortalOnline.Web.SQL_Webclient_Service" />
            <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        </service>

    </services>
    <extensions>
        <bindingExtensions>
            <!--
            <add name="pollingDuplex" type="System.ServiceModel.Configuration.PollingDuplexHttpBindingCollectionElement,System.ServiceModel.PollingDuplex, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
            -->
        </bindingExtensions>
    </extensions>
    <behaviors>
        <serviceBehaviors>
            <behavior name="duplexBehavior">
                <serviceMetadata httpGetEnabled="true"  />
                <serviceDebug includeExceptionDetailInFaults="true" />    
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <bindings>
        <customBinding>
            <binding name="DuelPortalOnline.Web.SQL_Webclient_Service.customBinding0" >
                <binaryMessageEncoding />
                <httpTransport />
            </binding>
        </customBinding>
        <pollingDuplex>
            <binding name="myPollingDuplex" duplexMode="MultipleMessagesPerPoll" >
            </binding>
        </pollingDuplex>
    </bindings>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"
        multipleSiteBindingsEnabled="true" />
</system.serviceModel> 
```

# wireshark - Wireshark抓包魔包配置

> ID：13334656
> 
> 赞同：0
> 
> 时间：2012-11-11T19:35:22.243
> 
> 标签：wireshark, packets, wake-on-lan

我有一台运行 Wireshark 的笔记本电脑。我想了解如何配置wireshark 来捕获魔术包。

我已经选择了界面，选项，捕获过滤器，主机 192.168.168.19 ，好的，在笔记本电脑上启动。

笔记本电脑的 IP 为 192.168.168.14。我想在 192.168.168.19 启动 PC。

我有一个程序可以发送名为 WON Magic Packet Sender 的 Magic Packets。我运行它并选择发送。我没有在 Wireshark 中看到任何内容。我有另一个名为 VNC 控制的程序。我选择唤醒。我收到一条消息说已发送唤醒信号。我仍然没有在 Wireshark 中捕获任何内容。我删除了 Wireshark 中的捕获过滤器。我开始捕捉。我得到了网络上的一切。我添加一个过滤器：

```
ip.src == 192.168.168.19 and ip.dst == 192.168.168.19 
```

运行这两个程序后，我什么也没有捕获。
我删除了最后一个过滤器并添加了一个新过滤器：

```
ip.addr == 192.168.168.19 
```

运行这两个程序后，我什么也没有捕获。

如何配置 Wireshark 以捕获魔术数据包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T02:35:50.673

鉴于 WON 帧模式的定义（并且不知道它是如何封装的），我希望像下面这样的*显示*过滤器可以工作：

`frame contains ff:ff:ff:ff:ff:ff:mm:mm:mm:mm:mm:mm`

其中`mm:mm:mm:mm:mm:mm`是目标 PC 的 MAC 地址（WON 消息被发送到的那个）。

# google-app-engine - Objectify - 如何@Load 列表 >?

> ID：13334662
> 
> 赞同：6
> 
> 时间：2012-11-11T19:35:53.227
> 
> 标签：google-app-engine, objectify

我有一个实体，其中一个字段包含一个引用其他实体的列表（总是 4）。我正在尝试获取一些实体，并将它们分派给 jsp 进行显示。我希望该字段中的所有 Refs 也被加载，并在 jsp 中访问它们。

这是我的基本结构：

```
@Entity
public class Question {
    @Id Long id;
    @Index String question;
    @Load List<Ref<Answer>> answers = new ArrayList<Ref<Answer>>();
} 
```

当我获取这样的问题时，显然jsp中有错误。有道理，因为 answers 字段不是答案列表，而是参考：

```
ObjectifyService.register(Question.class);
ObjectifyService.register(Answer.class);

List<Question> questions = ofy().load().type(Question.class).limit(50).list();

req.setAttribute("questions", questions);
try { 
    getServletContext().getRequestDispatcher("/admin/view-questions.jsp").forward(req, resp); 
} catch (ServletException e) {
    System.out.println (e.getMessage());
} 
```

那么如何访问jsp中的答案呢？是手动循环问题并为答案字段执行 get() 的唯一方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T17:20:32.240

您可能会发现这很方便：

```
public class Deref {
    public static class Func<T> implements Function<Ref<T>, T> {
        public static Func<Object> INSTANCE = new Func<Object>();

        @Override
        public T apply(Ref<T> ref) {
            return deref(ref);
        }
    }

    public static <T> T deref(Ref<T> ref) {
        return ref == null ? null : ref.get();
    }

    @SuppressWarnings({ "unchecked", "rawtypes" })
    public static <T> List<T> deref(List<Ref<T>> reflist) {
        return Lists.transform(reflist, (Func)Func.INSTANCE);
    }
} 
```

使用它，您可以提供如下方法：

```
@Entity
public class Question {
    @Id Long id;
    @Index String question;
    @Load List<Ref<Answer>> answers = new ArrayList<Ref<Answer>>();
    public List<Answer> getAnswers() { return Deref.deref(answers); }
} 
```

一个警告是它是一个只读列表。通过一点创意，您可以创建一个可写列表，但它需要创建一个 ReversibleFunction 和一个新的 List.transform() 方法。如果您只想为 JSP 提供一些简单的东西，您可能不想担心它。

或者，您可以在大多数表达式语言中使用 Ref 的“值”属性。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-09T15:57:34.650

像这样的东西怎么样：

```
@Entity
public class Question {
    @Id Long id;
    @Index String question;
    @Load List<Ref<Answer>> answers = new ArrayList<Ref<Answer>>();

    public List<Answer> loadAnswers()
    {
        return new ArrayList<Answer>(ofy().load().refs(answers).values());
    }
} 
```

由于您已经使用 @Load 注释加载了实体，我认为 objectify 只会从会话缓存中提取它们（它们不会被加载 2 次）。

如果您没有使用 @Load 注释，那么此方法将执行批量加载，这可能比遍历 Refs 并单独调用 get() 性能更好。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-08T17:04:02.857

如果更改 List 类型会发生什么？

```
@Entity
public class Question {
    @Id Long id;
    @Index String question;
    @Load List<Answer> answers = new ArrayList<Answer>();
} 
```

我检查了一下，一切顺利，但在文档（[https://code.google.com/p/objectify-appengine/wiki/Entities#Ref](https://code.google.com/p/objectify-appengine/wiki/Entities#Ref) _s）中没有任何关于这种情况的参考。

这样做安全吗？

# ruby-on-rails - 如何找到 Rails 部分的文件名？

> ID：13334671
> 
> 赞同：1
> 
> 时间：2012-11-11T19:36:49.687
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在 Rails 3 中，如何找到将由 呈现的部分的文件名`render 'foo'`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T01:22:43.063

为了清楚起见，如果您`render`从控制器内调用，以及`render`从视图中的标记内调用，您会得到两个不同的结果。

在控制器中`bar`调用`render 'foo'`将导致呈现文件`<project>/app/views/bar/foo.html.erb`。

在*视图*中，例如`<project>/app/views/bar/show.html.erb`调用`<% render 'foo' %>`将导致将部分`<project>/app/views/bar/_foo.html.erb`包含在`show.html.erb`视图中。部分取自与视图相同的目录。

为了让事情变得更复杂一点，如果您将文件夹名称放入渲染中，例如`render 'shared/foo'`这是相对于`<project>/app/views`.

所以：

```
Controller: render 'foo'              = <project>/app/views/<controller name>/foo.html.erb
            render 'shared/foo'       = <project>/app/views/shared/foo.html.erb
View:       <% render 'foo' %>        = _foo.html.erb in directory of view
            <% render 'shared/foo' %> = <project>/app/views/shared/_foo.html.erb 
```

`:format`PS如果您在命令中指定不同`render`，则`html.erb`需要相应地更改（例如`js.erb`，`js.coffee.erb`等）。

[http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)

# php - 用于 SSL 安全 (OVH) 的糟糕 CakePHP webroot

> ID：13334672
> 
> 赞同：1
> 
> 时间：2012-11-11T19:36:51.670
> 
> 标签：php, cakephp

我正在使用 OVH 来托管我的网站。最近有人要求我使用 SSL 保护整个 CakePHP 网站。实际上，OVH 使用其绝对路径提供 SSL 安全性：[https ://sslX.ovh.net/~login](https://sslX.ovh.net/~login)

所以我将网站移到 www/sitename 目录中，像这样访问它：[HTTPS HOST]/~login/sitename

我的问题来了：我所有的链接都是这样的：[HTTPS HOST]/sitename/XX/YY

而不是 [HTTPS HOST]/~login/sitename/XX/YY

我的问题如下：如何更改 webroot 以创建良好的链接？

非常感谢。

# c# - 在 C# 中创建三级嵌套字典

> ID：13334677
> 
> 赞同：5
> 
> 时间：2012-11-11T19:37:24.517
> 
> 标签：c#, dictionary

我想创建以下类型的字典，

```
var data = new Dictionary<string, Dictionary<string, Dictionary<string, int>>>(); 
```

当我尝试通过以下方式向字典添加值时，我得到一个 KeyNotFound 异常。

```
data[key1][key2][key3]= 3; 
```

我在这里做错了什么？我假设如果在字典中找不到键，它会自动添加到其中。

否则有没有办法在运行时添加密钥？

我期望以下类型的输出：

```
 [male,[animal,[legs,4]

               [eyes,2]]
       [human,[hands,2]
               [ears,2]]

[female,[animal,[nose,1]

                 [eyes,2]]
         [bird,[wings,2]
                 [legs,2]] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T19:39:25.947

这里的问题是您只是试图分配给最里面的字典。但是外在的两个层次是不存在的。

您需要明确每个级别：

```
if (!data.ContainsKey(key1))
    data[key1]  = new Dictionary<string, Dictionary<string, int>(); 
```

... 等等。写起来可能有点麻烦，所以如果你经常需要它，我建议你在字典上创建一个扩展方法，让你轻松做到这一点。

如果您分配给字典中的键，则会创建该条目。但是，如果您从字典中的某个键中*读取*，并且该键不存在，则会出现异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T19:52:06.287

`Tuple<string, string, string>`根据您的密钥分配和条目数，使用 a作为密钥可能更容易：

```
var data = new Dictionary<Tuple<string, string, string>, int>();
data[Tuple.Create("key1", "key2", "key3")] = 1;
var itemFromDictionary = data[Tuple.Create("key1", "key2", "key3")]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T19:46:07.660

当您需要声明每个级别时，您只声明 1 级字典：

```
var data = new Dictionary<string, new Dictionary<string, new Dictionary<string, int>>>(); 
```

希望这会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T19:47:20.840

您正在尝试仅分配内部级别值。您必须分配给所有级别。

试试这个：

```
data["male"] = new[] {
                 {"animal", new[] {
                              {"legs",4}, 
                              {"eyes", 2}
                            },
                 {"human", new[] {
                             {"hands", 2}
                 }
              }; 
```

我这里没有编译器，所以我不确定它是否会工作。

# html - HTML5：如何从网络摄像头捕获图片？

> ID：13334678
> 
> 赞同：0
> 
> 时间：2012-11-11T19:37:23.787
> 
> 标签：html

在浏览器中从用户的网络摄像头捕获图片的最简单（对于编码人员和用户）和最向后兼容/牢不可破的方法是什么？

更多问题：是否有这样做的事实上的标准网络服务？是否有任何相关标准，如“最佳实践”指示的微格式或其他可选代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T02:53:07.997

So you have a couple of options on this...

1.  getUserMedia() which is the new HTML5 method for accessing a users webcam and doing things with the image data. This is ONLY for modern browsers and currently is supported in Chrome, but I expect you will see it soon in the others. The method works great and is SUPER easy to use once you read through the docs.

2.  Flash. Flash has always been good at this stuff and you can easily create a method for snapping a photo and sending the data to javascript or php for processing.

# java - 有人可以说 DeckIterator 类有什么问题吗？

> ID：13334679
> 
> 赞同：0
> 
> 时间：2012-11-11T19:37:28.903
> 
> 标签：java

我可以用 Iterator 类做什么？它说“DeckIterator 不是抽象的，并且不会覆盖 java.util.Iterator 中的抽象方法 remove()”

```
import java.util.*;
import java.io.Serializable;

public class Deck implements Iterable<Card>, Serializable {

// The field for a List
private List<Card> deck;

/**
 * Constructor creates the list, initializes all the cards in the deck and
 * shuffles them
 */
public Deck() {

    deck = new ArrayList<Card>();

    for (Card.Rank r : Card.Rank.values()) {
        for (Card.Suit s : Card.Suit.values()) {
            deck.add(new Card(r, s));
        }
    }

    shuffle();

    // Converting to a LinkedList
    List<Card> list = new LinkedList<Card>();
    for (int i = 0; i < deck.size(); i++) {
        list.add(deck.get(i));
    }
    deck = list;
}

/**
 * Method to randomize the cards
 */
public void shuffle() {

    Collections.shuffle(deck);
}

/**
 * Method that removes the top card from the deck
 *
 * @return the top card
 */
public Card deal() {

    return deck.remove(0);
}

/**
 * Number of cards remaining in the deck
 *
 * @return number of cards in the deck
 */
public int size() {

    return deck.size();
}

/**
 * Reinitializes the deck.
 */
public void newDeck() {

    List<Card> newList = new LinkedList<Card>();
    for (int i = 0; i < deck.size(); i++) {
        newList.add(deck.get(i));
    }
    deck = newList;

}

      public Iterator<Card> iterator(){

           Iterator<Card> aDeck = deck.iterator();
            return aDeck;
        } 
```

它说“DeckIterator 不是抽象的，并且不会覆盖 java.util.Iterator 中的抽象方法 remove()”

```
public class DeckIterator implements Iterator<Card> {

    public List<Card> reverseIterator(){

        List<Card> reverseList = new LinkedList<Card>();
        for(int i = deck.size()-1; i >= 0; i--){
            reverseList.add(deck.get(i));
        }

        return reverseList;
    }

}

public static void main(String[] args){

    Deck myDeck = new Deck();
    System.out.println("The card " + myDeck.deal() + " is not in the deck now");

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:40:11.003

您的方法`newDeck()`应在添加新条目之前清除/清空列表。或者更确切地说，只是重新初始化`deck`为一个新的`List`. 事实上，构造函数中的大部分（全部？）代码都应该移到`newDeck()`方法中，构造函数可以简单地调用它。

# iphone - iPhone 上的软字幕

> ID：13334681
> 
> 赞同：0
> 
> 时间：2012-11-11T19:37:40.947
> 
> 标签：iphone, ffmpeg, mp4

我知道这个问题（或类似的问题）已经在整个网络上被问过，但我仍然找不到一个直接的答案：

1.  是否可以将软字幕混合到 iPhone 实际显示在屏幕上的 mp4 视频文件中（快速，无需重新编码视频流）？我尝试过 ffmpeg、MP4Box、Subler、Submerge 和 mp4v2，但它们都没有成功地生成可以在 iPhone 上显示字幕的 mp4 文件（尽管其中一些在 VLC 或 iTunes 中播放视频时有字幕）。

2.  如果 iPhone 不支持 mp4 文件中的软字幕，那么是否有任何命令行实用程序（如问题 1 中提到的那些）可以将硬字幕渲染到视频流上？（我想这个过程需要几个小时，因为视频必须重新编码）

3.  最后，如果没有可以制作硬字幕的命令行实用程序，那么基于 GUI 的实用程序有哪些选择？手刹是最佳选择吗？

如果可能，请提供命令行示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:11:26.813

1.  不，有隐藏式字幕，但它与字幕不同
2.  播放器
3.  在 superuser.com 上询问 :)

# linux - shell代码脚本中的&是什么意思，将stderr重定向到stdout（2>&1）？

> ID：13334685
> 
> 赞同：2
> 
> 时间：2012-11-11T19:37:55.267
> 
> 标签：linux, shell, stdout, stderr

我知道这`2>&1`使您可以重定向`stderr`到任何地方`stdout`。

*   但是`&`这个shell代码是什么意思？不是附加运算符吗？
*   是否可以将所有描述符流式传输到标准输出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T19:49:52.913

绝对准确 - 运算符`>&`确实将在运算符之前记录的描述符合并到在运算符之后写入的描述符。

因此，如上所述，操作员是`>&`并且询问`&`其中的含义是没有任何意义的。

对于您的第二个问题-我认为一个操作员不可能/您需要为您需要的每个操作重复它。

控制台应用程序的标准/默认描述符是：

```
0 - stdin
1 - stdout
2 - stderr 
```

任何其他都可以由应用程序定义...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T19:51:05.393

当您编写“控制台”程序时，您有 2 个不同的流可以将输出发送到 stdout 和 sterr。

stout 用于正常输出，sterr 用于打印错误消息，默认情况下两者都打印在控制台上。什么是“输出”和什么是“错误”并没有明确的划分，无论如何，如果您想重定向到一个文件，您可以将输出和错误重定向到两个不同的文件 - 但如果您希望两者都在同一个文件上（或管道）您最好的选择是将标准错误重定向到标准输出，然后将标准输出转储到文件中

&符号的含义请参见[http://en.wikipedia.org/wiki/Ampersand#Unix_shells](http://en.wikipedia.org/wiki/Ampersand#Unix_shells)

# python - Python图像库两色图像转黑白

> ID：13334693
> 
> 赞同：0
> 
> 时间：2012-11-11T19:38:56.807
> 
> 标签：python, python-imaging-library

我有一系列大小相同的图像，并且都是用黑色书写的标志，它们都非常简单（+，-，x，/，1-9）在一个颜色背景上，背景色改变它有时是绿色有时是蓝色，有时是红色，但始终是统一的颜色。

我正在尝试将这些图像转换为标志为黑色且背景始终为白色的黑白图像。

我这样做是为了能够比较图像以找到重复的符号。

那么如何使用 PIL 进行灰度转换。

有没有更好的方法来进行比较？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:45:17.450

因此，只需将其转换为黑白

```
black_and_white = im.convert('1') 
```

啊，你也可以使用`im.getcolors(maxcolors)`

[http://effbot.org/imagingbook/image.htm](http://effbot.org/imagingbook/image.htm) - 这是文档

如果您的图片真的只有两种颜色，请使用`im.getcolors(2)`，您将在此列表中只看到两个项目，然后您将能够用白色和黑色替换图像中的它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T20:00:44.293

这是我要做的：

*   计算图像颜色的中值。如果颜色真的很均匀，它应该能够正确分割它（注意不要在对图像进行阈值处理时反转黑/白颜色）。否则，对图像的颜色直方图使用更稳健的方法，例如 2-means 算法
*   对于符号比较，我会使用 2D-crosscorralation（scipy 和 openCV 有很多有用的方法可以做到这一点）。一些提示：[如何量化两个图像之间的差异？](https://stackoverflow.com/questions/189943/how-can-i-quantify-difference-between-two-images)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T00:11:19.663

你可能想看看，`scipy.ndimage`因为`skimage`这两个 python 库会让你更轻松地处理这种简单的图像比较。
让您简要了解这两个库可以做什么。

```
>>> from scipy.ndimage import find_objects,label
>>> import scipy.misc          
>>> img=scipy.misc.imread('filename.jpg')  
>>> labeled,number=label(img) # (label) returns the lebeled objects while  
                              # (number) returns the numer ofthe labeled signs  
>>> signs=find_objects(labeled)  #this will extract the signs in your image  
#once you got that,you can simply determine  
# if two images have the same sign using sum simple math-work. 
```

但是要使用上面的代码，您需要将背景设置为黑色，以便标签方法可以工作。如果您不想打扰自己将背景反转为黑色，那么您应该使用替代库`skimage`

```
>>> import skimage.morphology.label  
>>> labeled=skimage.morphology.label(img,8,255) #255 for the white background
                                                #in the gray-scale mode  
#after you label the signs you can use the wonderful method  
#`skimag.measure.regionprops` as this method will surely  
# help you decide which two signs are the same. 
```

# java - 在 GWT 上自定义信息窗口

> ID：13334694
> 
> 赞同：1
> 
> 时间：2012-11-11T19:39:15.057
> 
> 标签：java, gwt, customization, infowindow

我正在尝试自定义我在 GWT 上使用的信息窗口。我正在使用 Java 进行编码，但不确定如何获取所有信息窗口选项。是否可以在 java 中执行此操作，或者我必须使用 javascript 来获取选项？如果是这样，当我用java实现所有东西时，我不熟悉如何使用javascript。

# android - 如何在android中做这个表格布局？

> ID：13334695
> 
> 赞同：1
> 
> 时间：2012-11-11T19:39:18.457
> 
> 标签：android, tablelayout, tablerow

我必须制作这样的表格布局。我一直在尝试很多方法，但我做不到。

这是我要实现的目标的屏幕截图。

![在此处输入图像描述](../Images/72113cb88a65501c6ca76219234235ac.png)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T19:46:10.563

我相信[RelativeLayout](http://developer.android.com/reference/android/widget/RelativeLayout.html)可以轻松实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:22:41.697

好吧，您可以根据您的要求进行一些修改。

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/background_light" >

    <LinearLayout
        android:id="@+id/first_row"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:weightSum="2" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Nombre : "
            android:textColor="@android:color/black" />

        <EditText
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:hint="Enter your field"
            android:textColor="@android:color/black" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/second_row"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/first_row"
        android:orientation="horizontal"
        android:weightSum="3" >

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Localizame" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Nombre : "
            android:textColor="@android:color/black" />

        <EditText
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:hint="Enter your field"
            android:textColor="@android:color/black" />
    </LinearLayout>

        <LinearLayout
            android:layout_below="@id/second_row"
        android:id="@+id/third_row"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:weightSum="2" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Latitud : "
            android:textColor="@android:color/black" />

        <EditText
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:hint="Enter your field"
            android:textColor="@android:color/black" />
    </LinearLayout>

            <LinearLayout
        android:id="@+id/fourth_row"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/third_row"
        android:orientation="horizontal"
        android:weightSum="2" >

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Anadir Amigo" />

        <EditText
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:hint="Enter your field"
            android:textColor="@android:color/black" />
    </LinearLayout>
</RelativeLayout> 
```

# c - 程序运行但要求输入两次

> ID：13334698
> 
> 赞同：4
> 
> 时间：2012-11-11T19:39:42.323
> 
> 标签：c, eclipse-cdt

我已经编写了以下程序，但是每次我运行它时，for 循环都不起作用，直到我输入另一个数字。然后使用输入的第二个数字运行 for 循环。为什么会这样？似乎没有人遇到这个问题......这是程序：

```
#include <stdio.h>
#include <math.h>

int main(void)
{

float limit;
float count;
float series1, series2;

printf("Enter a limit for the series ");
scanf ("%f", &limit);
while (scanf ("%f", &limit) == 1) 
{
    for (series1 = 1, count = 2; count <= limit; count++)
            series1 += 1.0/count;
            printf ("\nThe sum of the first infinite series is %.4f", series1);
    for (series2 = 1, count = 2; count <= limit; count++)
            series2 += (1.0/count) * pow ((-1),(count - 1));
            printf ("\nThe sum of the second infinite series is %.4f", series2);

        printf("\n\nEnter a limit for the series (q to quit) ");
        scanf ("%f", &limit);
}
return 0;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T19:42:05.597

你的问题就在这里：

```
scanf ("%f", &limit);
while (scanf ("%f", &limit) == 1) 
```

while 循环每次启动时都会执行该 scanf，因此只需丢失第一个 scanf。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T19:41:47.850

当您运行 while 循环`while (scanf ("%f", &limit) == 1)`时，它会`scanf ("%f", &limit) == 1`在您已经运行它之后再次运行。尝试将第一个设置`scanf`为输出变量并在 while 循环中运行该变量。

# php - 这可以在 PHP 中完成吗？可能的全局变量

> ID：13334699
> 
> 赞同：0
> 
> 时间：2012-11-11T19:40:02.030
> 
> 标签：php, class, zend-framework, variables, global-variables

所以我有这样的事情：

```
class SomeClass{
    //do some stuff
}

$variable  = new SomeClass(); 
```

现在，例如在一个名为 SomeClass.php 的 php 文件中，我想在另一个名为 OtherClass.php 的类中执行以下操作：

```
class OtherClass{
    function doSomething(){
        $variable->call_some_method();
    }
} 
```

我将如何实现这一目标？我曾考虑过全局变量，但后来我看到像 Zend 这样的框架在做这样的事情： $this->view->what_i_want_to_pass_to_the_view = 'hello apple sauce';

所以什么是好方法，本质上是我想做的。

注意：有些人假设我想做全局变量，这是不正确的。我试图复制 Zend 如何在类中执行类似 $this->view 的操作以将某些内容发送到视图，然后在视图中调用 $this->view 以获取发送的内容。我以为这是通过全局变量完成的...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T19:45:08.317

这个概念被称为“依赖注入”，被认为是做到这一点的最佳实践。

```
class SomeClass{
    //do some stuff
}

$some  = new SomeClass();

class OtherClass{
    function doSomething(SomeClass $some){
        $some->call_some_method();
    }
}

$otherclass = new OtherClass();
$otherclass->doSomething($some); 
```

或者，您可以只注入对构建时间的依赖：

```
class OtherClass{
    private $some = null;

    function __construct(SomeClass $some){
        $this->some = $some;
    }

    function doSomething(){
        $this->some->call_some_method();
    }
} 
```

取决于您想要实现的目标以及您需要依赖项的频率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T19:44:36.187

首先，我要祝贺您找到一种将全局变量引入 Zend 框架的方法，因为它破坏了 Zend 框架的所有内容（OOP、MVC 架构等）。

其次，这是不好的做法。这是可能的，但也很糟糕。如果您发现自己在努力使用该语言做某事，那么很可能有一种更简单的方法来完成您正在尝试做的事情。

尽管这不是答案，但我恳请您更多地了解您的问题以及*为什么*要在另一个类中使用全局定义的类实例而不是抽象示例。很有可能，我们可以通过提供替代方法而不是灌输不良做法来帮助您成为更好的程序员来构建您的网站和 Web 应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T19:50:40.583

我相信您需要的是“扩展”，我会给您举个例子。

```
class Hello {

    public function world() {
        echo 'Hello World!';
    }

}

class someClass extends Hello {

    public function doSomething() {
        $this->world();
    }
}

$obj = new someClass();
$obj->doSomething(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-11T19:57:47.433

有几种方法可以做到：

1) 扩展 SomeClass

```
class OtherClass extends SomeClass
{

 function doSomething(){
     $this->call_some_someclass_method();
 }

} 
```

2）将SomeClass实例传递给OtherClass（不好的编码习惯）

```
$a = new SomeClass();
$b = new OtherClass();
$b->someInstance($a);

class OtherClass extends SomeClass
{
 function someInstance($someClass){
    $this->someClass = $someClass;
 }
 function doSomething(){
     $this->someClass->call_some_method();
 }

} 
```

3) 在 OtherClass 中创建一个实例

```
class OtherClass extends SomeClass
    {
     function someInstance(){
        $this->someClass = new SomeClass;
     }
     function doSomething(){
         $this->someInstance();
         $this->someClass->call_some_method();
     }

    } 
```

# html - HTML5：有没有办法控制硬件的帧缓冲？

> ID：13334700
> 
> 赞同：1
> 
> 时间：2012-11-11T19:40:08.803
> 
> 标签：html

我有兴趣为带有电子墨水（双稳态）屏幕的设备编写大量 HTML5 应用程序。

但是，当屏幕内容发生变化时，双稳态屏幕会显示出许多奇怪且令人不安的视觉伪影，尤其是当浏览器在加载页面时绘制和重绘布局或某些 javascript 修改 DOM 时。

所以....有什么办法让我的 HTML 代码告诉浏览器及其操作系统推迟重绘屏幕上的任何内容，直到它完成了新布局的计算？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T19:46:05.733

这可能是一个肮脏的黑客，但你可以考虑`div`在顶层放置一个完整的页面不透明的白色 - 然后在页面完全加载后使用 javascript 将其删除

# c++ - C++ Cast的实现

> ID：13334703
> 
> 赞同：11
> 
> 时间：2012-11-11T19:40:28.283
> 
> 标签：c++, casting, unions

我正在浏览 CodeProject 中的一些代码，并遇到了以下用于 C++ 转换的代码。

```
template <class OutputClass, class InputClass>
union horrible_union{
    OutputClass out;
    InputClass in;
};
template <class OutputClass, class InputClass>
inline OutputClass horrible_cast(const InputClass input){
    horrible_union<OutputClass, InputClass> u;
    u.in = input;
    return u.out;
} 
```

为什么演员表以上述方式实施。为什么我们不能只进行手动转换。有人可以举一个普通演员何时不起作用的例子吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T19:53:01.453

这种方法基本上可以让您摆脱任何强制转换，尽管它依赖于未定义的行为。

在不相关的类型之间进行转换时，正常的转换会抱怨，而这不会。

```
struct A{};
struct B{};

template <class OutputClass, class InputClass>
union horrible_union{
    OutputClass out;
    InputClass in;
};
template <class OutputClass, class InputClass>
inline OutputClass horrible_cast(const InputClass input){
    horrible_union<OutputClass, InputClass> u;
    u.in = input;
    return u.out;
}

int main()
{
    A a;
    B b;
    a = horrible_cast<A,B>(b);   //this compiles
    a = reinterpret_cast<A>(b);  //this doesn't
} 
```

底线：这太可怕了，不要这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T19:54:37.157

以这种方式使用联合通常大致相当于硬`reinterpret_cast`指针。但是，这不会复制对象，您的示例确实如此（事实上，即使使用 RVO 也会复制两次；将其作为参数会更有效`const InputClass& input`）。因此，您可以直接对其结果进行操作，而无需改变原始对象。

这到底有什么用处……嗯。我不认为有任何真正好的用例，应始终避免未经检查的强制转换，正如大卫哈门所说，这实际上是完全未定义的（尽管如果“正确”使用它通常会起作用）。

# c++ - 在二叉搜索树中打印左右子树

> ID：13334706
> 
> 赞同：0
> 
> 时间：2012-11-11T19:40:39.023
> 
> 标签：c++

我的讲师对二叉树的打印方式有特定的输出要求。他希望输出是这样的：

根 { left_subtree }-{ right_subtree }

IE：

12 {18} --{24}

18 {6} --{14}

6 {NULL} --{NULL}

ETC...

直到今天我才意识到这一点，我已经很兴奋我的程序可以运行了。

```
template<class elemType>
struct nodeType
{
    elemType info;
    nodeType<elemType> *lLink;
    nodeType<elemType> *rLink;
};

template<class elemType>
void bSearchTreeType<elemType>::printPreOrder(nodeType<elemType> *root1)
{
    if(root1 != NULL) {
        cout<<root1->info<<" "<<"{"<<root1->lLink<<"}"<<endl;//this is where I get the errors 
        printPreOrder(root1->lLink);
        printPreOrder(root1->rlink);
    }
}

template <class elemType>void bSearchTreeType<elemType>::insert(const elemType&  insertItem){

    nodeType<elemType> *current; //pointer to traverse the tree
    nodeType<elemType> *trailCurrent; //pointer behind current
    nodeType<elemType> *newNode;  //pointer to create the node

    newNode = new nodeType<elemType>;    newNode->info = insertItem;
    newNode->lLink = NULL;
    newNode->rLink = NULL;

    if (root1 == NULL)
        root1 = newNode;
    else {   
        current = root1;
        while (current != NULL)
        {
            trailCurrent = current;
            if (current->info == insertItem)
            {
                cout << "The item to be inserted is already "; 
                cout << "in the tree -- duplicates are not allowed." << endl;
                return;        
            }
            else if (current->info > insertItem)
                current = current->lLink;
            else
                current = current->rLink;
        }//end while

        if (trailCurrent->info >insertItem)
            trailCurrent->lLink = newNode;       
        else
            trailCurrent->rLink = newNode;    
    }
} 
```

如何让我的函数打印出左子树和右子树。每次我尝试某些东西时，都会出现分段错误或输出奇怪的内存地址。

我正在寻找指导和帮助，从伪代码到如何做的任何事情都会很棒。我只是困惑

已编辑：包括插入功能以及出现错误时的操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:59:18.840

您可以尝试以下方法：

```
template<class elemType>
void bSearchTreeType<elemType>::printPreOrder(nodeType<elemType> *root) {
   if( root ) { 
        cout << root->info << " " << endl;

        cout << "{";
        if( root->left ) {
            cout << root->left->info;
        }
        else {
            cout << "NULL";
        }
        cout << "} -- ";

        cout << "{";
        if( root->right ) {
            cout << root->right->info;
        }
        else {
            cout << "NULL";
        }
        cout << "}";

        cout << endl;

        printPreOrder( root->left );

        printPreOrder( root->right );
   }
} 
```

# javascript - 如何调试特定的 JavaScript 点击事件？

> ID：13334709
> 
> 赞同：18
> 
> 时间：2012-11-11T19:40:57.437
> 
> 标签：javascript, dom-events, javascript-debugger

在雅虎天气页面上，有一个链接标记为`C`将温度单位从 更改`Fahrenheit`为`Celsius`。

![小麦雅虎](../Images/76ccdacc5930a9683769977e8cc0cb39.png)

我正在调试此操作并了解将 F 转换为 C 的幕后执行的 JavaScript。调试此类事情的方法是什么？

**链接**：[http ://weather.yahoo.com/?w=2295401](http://weather.yahoo.com/?w=2295401)

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-11T20:24:03.463

使用谷歌浏览器，

1.  当您要调试的操作发生时，右键单击正在“视觉”更改的项目，然后单击“检查元素”。在这种情况下，我们可以检查温度值

2.  再次右键单击 DOM 视图中的元素并选择 Break on -> Attributes modify

3.  现在执行您要调试的操作（在这种情况下，单击°C 项）

![检查元素](../Images/1587661b8bec176c7f5c34d46deb21a6.png)

您会注意到代码将“暂停”，您可以在调试器中调试代码

![调试器](../Images/6c322750339b021a622acae46f8a07f3.png)

然而，在这种情况下，代码被压缩/缩小，因此很难理解实际发生了什么，但同样的方法可以用于其他类似的情况

**更新**：

观看此 Chrome 开发工具视频，了解许多有用的调试技巧： [http ://www.youtube.com/watch?v=BaneWEqNcpE](http://www.youtube.com/watch?v=BaneWEqNcpE)

# datagrid - 确定是否在 DataGrid 中选择了行

> ID：13334711
> 
> 赞同：0
> 
> 时间：2012-11-11T19:41:40.267
> 
> 标签：datagrid, vb6

所以我有一个带有几个字段的简单 DataGrid，我想放置一个“删除行”按钮。我知道如何做所有事情，但检查 DataGrid 中是否没有选择任何行。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:53:12.247

网格的`.Row`属性将返回网格中当前选定行的索引。如果它 < 0，则没有选择。

# c - 单选按钮未在旧程序中选择

> ID：13334713
> 
> 赞同：1
> 
> 时间：2012-11-11T19:41:55.710
> 
> 标签：c, windows, api, windows-xp

大约 20（！）年过去了，我编写了一个大型复杂的 C 程序。据我所知，它当时在各个方面都运行良好——它可能在 Windows 95 上运行。

现在我需要再次使用它。不幸的是，其中的单选按钮似乎不再正常工作（普通按钮都正常工作）。当我单击单选按钮时，我收到一些反馈，即 Windows 正在确认我的点击，就像我看到按钮文本周围出现一条虚线并且只要我的手指在按钮上，按钮的圆圈就会变灰，但是当我松开手指时，我看到所选按钮没有改变。

我的怀疑是，当时我可能正在摆脱一些不良做法，这些做法适用于 Windows 95，但不再适用于较新版本的 Windows，但我正在努力找出我做错了什么。有任何想法吗？

**编辑：**很难提取相关代码，因为该程序中的消息处理是一场纠结的噩梦。许多按钮是在运行时以编程方式创建的，当程序处于不同的操作模式时，会有不同的消息循环工作。该程序是一个可定制的环境，用于运行某些类型的实验。它甚至有自己的内置解释语言！所以我不期待像“你应该在第 47 行有一个逗号而不是分号”这样的答案，但可能更像是“我在我的程序中观察到类似的症状一次，结果是......” ..或者也许“虚线矩形出现的事实意味着过程AAA已经发生，但可能步骤BBB出错了”。

**编辑：**我设法提取了一些我包含错误的关键代码......

```
char *process_messages_one_at_a_time()
{
    MSG msg;
    int temp;

    temp = PeekMessage(&msg,winh,0,0,PM_NOREMOVE);

    if (temp)
    {
        GetMessage (&msg, NULL, 0, 0);
        if (msg.message == WM_LBUTTONUP)
        {
            mouse_just_released_somewhere = TRUE;
        }

        TranslateMessage (&msg);
        DispatchMessage (&msg);
    }

    if (button_command_waiting)
    {
        button_command_waiting = FALSE;
        return (button_command_string);
    }
    else
    {
        return (NULL);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T23:33:13.863

使用单选按钮时有两件简单的事情需要检查。首先是确保每个都设置了 BS_AUTORADIOBUTTON 属性。第二个是确保选项卡顺序中的第一个按钮和按钮集（通常是组框）之后的下一个控件设置了 WS_GROUP 属性，而其他按钮则设置了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T20:45:33.583

几点建议：

*   我会尝试使用 spy++ 来监视该对话框中的消息，特别是与单选按钮控件之间的消息。我想知道您是否会看到您的程序正在发送的 BM_SETCHECK（即，您以编程方式取消选中按钮的某个地方）。
*   您的代码有没有机会检查 Windows 版本号？我已经被 == 烧了几次，我应该使用 >= 来确保版本检查兼容性。
*   您是否对任何控件进行子类化？我不记得了，但在我看来，子类化可能会出现一些错误（并且在新版本的 Windows 推出之前效果不会立即明显）。
*   所有者绘制控件？所有者很容易不使用较新的 Windows GUI 样式。

使用这样的旧代码，记忆会零零碎碎地回到我的脑海中，而不是洪水泛滥，所以通常需要一段时间才能让我明白我当时在做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T17:45:18.170

如果您只是想让程序运行以使用它，我可能会建议“兼容模式”。

[http://www.howtogeek.com/howto/windows-vista/using-windows-vista-compatibility-mode/](http://www.howtogeek.com/howto/windows-vista/using-windows-vista-compatibility-mode/)

但是，如果您有一个更大的、预期的软件使用寿命，您可能需要考虑重写它。由于以下几个因素，重写它并不接近初始写入的复杂性或工作：

*   开发程序的需求是制作软件包所需工作的重要组成部分（需求已经完成）
*   很多代码已经写好了，只有部分可能需要稍微重构才能更新
*   新的库组件可能是现有代码库部分的更稳定的替代品
*   您将学习如何使用当前的库设施编写当前的应用程序
*   您将有机会评论或只是一般地重构和清理代码（从而使其在预期的延长寿命中更易于维护）
*   代码库将更易于维护/兼容，以应对需求和操作系统的其他更改（既因为它已更新，也因为您有机会重新理解整个代码库）

希望有帮助...

# python - 在 IDLE 中运行有时什么也不返回 & 优化

> ID：13334718
> 
> 赞同：0
> 
> 时间：2012-11-11T19:42:32.323
> 
> 标签：python

有时当我在 IDLE 中运行它时，shell 只会显示

> >>

但是，当我关闭窗口并终止程序时，它会在关闭前一瞬间正常显示。大多数时候它会工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T20:22:19.273

对于您在 IDLE 中的问题，我会尝试定期[刷新标准输出](https://stackoverflow.com/questions/230751/how-to-flush-output-of-python-print)，看看它是否有帮助。

关于您的代码的一些评论如下：

*   关于全局变量的使用，在大多数情况下，您可以简单地用函数参数替换它们的使用。当您（认为您）需要修改全局变量时，通常您选择了错误的函数来编写。例如，绝对不需要在 generate() 中设置guesses 变量，您可以在 play() 中设置。

*   而不是`allowed = ('0','1','2','3','4','5','6','7','8','9','0','+','*')`，考虑`import string ; allowed= list(string.digits+'+'+'*')`。在解释器中执行一个`dir(string)`以获得更多有用的变量。

*   没有必要评估布尔值的相等性。`while (numguesses < maxguesses) and flag==True:`应该`while (numguesses < maxguesses) and flag:`

*   `play_again()`是不必要的递归。

*   `s1 = secret[0] ; s2 = secret[1]`可能`s1,s2=secret[:2]`

*   `for i in range(max): ; num = num + str(randint(0,9))`可以改写为`"".join([str(randint(0,9)) for i in range(max)])`. 有些人会争辩说第一个更具可读性，由您决定。

最后这个：

```
if (i%2 == 0): 
    evaluated = evaluated + s1
else:
    evaluated = evaluated + s2 
```

可以简单地替换为`evaluated= (evaluated+s1) if not(i%2) else (evaluated + s2)`. 我认为您实际上并不需要括号，但它们增加了可读性，恕我直言

显然，关于代码的一般结构还有很多话要说，我试图专注于你目前可能不知道的 Python 语言特性

# javascript - Javascript - 如何在程序设置变量后更新变量？

> ID：13334720
> 
> 赞同：0
> 
> 时间：2012-11-11T19:43:06.467
> 
> 标签：javascript, jquery, procedural-programming

我在函数顶部定义了一个变量，并在其下方直接引用了该变量的 JSON 对象。单击事件、几个循环和一个匿名函数稍后我更新第一个变量的值，然后引用 JSON 对象的属性，期望它具有新值，但这不起作用。

我的代码看起来像这样：

```
var errorval = "Not set";
var rules = {
    firstRule : {
        name : 'example',
        message : 'Needs to be '+errorval+' characters long'
    }
}
$('.button').on('click', function(){
    for(var foo in bar) {
        $.each(foo, function(){
            errorval = 3;
            // ALERTS "Needs to be Not set characters long"
            alert(rules.firstRule.message);
        });
    }
}); 
```

所以我问我如何`errorval`在我的代码中更新，以便`rules`对象在属性中具有新的值`message`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T19:47:46.930

这可能会解决您的问题

```
var errorval = "Not set";
var rules = {
    firstRule : {
        name : 'example',
        getMessage : function() {
          return 'Needs to be '+errorval+' characters long';
        }
    }
}
$('.button').on('click', function(){
    for(var foo in bar) {
        $.each(foo, function(){
            errorval = 3;
            // ALERTS "Needs to be Not set characters long"
            alert(rules.firstRule.getMessage());
        });
    }
}); 
```

您调用 getMessage 方法而不是字符串属性，该方法根据 errorval 的当前值返回一个字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T19:57:34.737

这是另一种解决方案，请阅读评论：

```
var errorval = "Not set";
set(errorval);
$('.button').on('click', function(){
    //for(var foo in bar) {
    //    $.each(foo, function(){
            errorval = 3;
            // you must recall set(errorval) at here for uodate rules object
            alert(rules.firstRule.message);                            
    //    });
    //}
});

function set(errorval){
  rules = {
    firstRule : {
        name : 'example',
        message : 'Needs to be '+errorval+' characters long'
    }
  }
} 
```

[演示](http://jsfiddle.net/TBJsU/1/)

# python - 列表列表的总和

> ID：13334722
> 
> 赞同：2
> 
> 时间：2012-11-11T19:43:15.327
> 
> 标签：python, list, methods

我正在寻找python中的方法来对仅包含整数的列表列表求和。我看到该方法`sum()`仅适用于列表，但不适用于列表列表。有什么适合我的吗？

谢谢你

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T19:44:31.557

您可以`sum()`在此处使用生成器表达式：

```
In [18]: lis = [[1, 2], [3, 4], [5, 6]]

In [19]: sum(sum(x) for x in lis)
Out[19]: 21 
```

**或者：**

```
In [21]: sum(sum(lis, []))
Out[21]: 21 
```

`timeit`比较：

```
In [49]: %timeit sum(sum(x) for x in lis)
100000 loops, best of 3: 2.56 us per loop

In [50]: %timeit sum(map(sum, lis))
100000 loops, best of 3: 2.39 us per loop

In [51]: %timeit sum(sum(lis, []))
1000000 loops, best of 3: 2.21 us per loop

In [52]: %timeit sum(chain.from_iterable(lis))       # winner 
100000 loops, best of 3: 1.43 us per loop

In [53]: %timeit sum(chain(*lis))
100000 loops, best of 3: 1.55 us per loop 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-11T19:46:18.663

```
import itertools

sum(itertools.chain.from_iterable([[1,2],[3,4],[5,6]])) 
```

`itertools.chain`展平一级可迭代（这是您在这里所需要的），因此`sum`获取包含子列表的列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T19:44:40.210

`sum(map(sum, my_list))`

这将对第一个列表的每个元素运行 sum，然后将结果再次放入 sum 中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T19:44:52.997

```
l = [[1,2,3], [3,4,5], [3,5,6]]
total = sum([sum(x) for x in l]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-05T16:02:54.157

```
import re
#print sum( [ ****** *** * in **********('[0-9]+',**************************.read()) ] )

name = raw_input("Enter file:")
if len(name) < 1 : name = "sam.txt"
handle = open(name)
#handle = handle.read()
num = list()
total = 0
for line in handle:
    line = line.rstrip()
    if len(re.findall('([0-9]+)', line))== 0: continue
    num.append(re.findall('([0-9]+)', line))

print sum(sum(num,[])) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-20T02:01:54.267

```
import re
print sum( [int(i) for i in re.findall('[0-9]+', open("regex_sum_301799.txt").read()) ] ) 
```

示例文件来源： http: [//python-data.dr-chuck.net/regex_sum_301799.txt](http://python-data.dr-chuck.net/regex_sum_301799.txt)

# c++ - Vim 转到标准库方法/函数定义

> ID：13334724
> 
> 赞同：3
> 
> 时间：2012-11-11T19:43:32.023
> 
> 标签：c++, vim, autocomplete, std, go-to-definition

我喜欢与 vim 相关的一些插件，并且我将它们中的大多数安装为 git 子模块（clang_complete、cvim、fugitive、NerdTree、pathogen、snipMate、supertab、taglist）但是有两个基本功能我无法使用。IE

1）示例->如果我编译以下示例

```
// basic file operations
#include <iostream>
#include <fstream>
using namespace std;

int main () {
  ofstream myfile;
  myfile.open ("example.txt");
  myfile << "Writing this to a file.\n";
  myfile.close();
  return 0;
} 
```

例如，我不知道如何从 std 跳转到函数 open 即“myfile.open”。图书馆。如果我将代码粘贴到 Visual Studio 并单击转到定义，它会将我直接带到那个地方。我已经读过这可以用 ctags 完成，但是我问自己自动完成是否已经工作，即当我输入“myfile”时。我看到了一大堆 clang 给我的方法，所以我想它应该是从 vim 跳转到类似于 (ctrl + ]) 的定义的其他更好的方法，它应该可以开箱即用。

2) 每当我键入 dot 时，在 Visual Studio/.net 中。我看到了方法，当我向下滚动该方法时，它提供了简短的描述该方法在做什么。有没有办法在vim中启用类似的东西。据我所知，这应该是 std 库的一个属性，但是我在 std 中看不到任何这样的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T20:44:40.187

我认为您将 Vim 与 IDE 混淆了。

您**不能指望任何 IDE 功能都可以在（非常强大的）***文本编辑器*中使用，至少不费吹灰之力。

1.  Vim 相当于“转到声明”，`<C-]>`或者`:tag foo<cr>`依赖于[exuberant-ctags](http://ctags.sourceforge.net/)或某些兼容程序针对您的代码库和任何标准库`tags`生成的一个或多个的可用性。因为 Vim 没有为 (AFAIK) 任何语言提供这样的文件，所以你必须自己[生成一个](https://web.archive.org/web/20160411015911/http://design.liberta.co.za/articles/code-completion-intellisense-for-cpp-in-vim-with-omnicppcomplete/)并告诉 Vim 在哪里可以找到它。甚至还有一个[专门为此编写](http://www.drchip.org/astronaut/src/)[的程序，](http://www.drchip.org/astronaut/src/)不过我从未使用过。`tags`[`hdrtag`](http://www.drchip.org/astronaut/src/)

2.  我想我已经看到一些自动完成插件在弹出菜单中显示方法的签名，其他一些（PHP、Python）打开一个小的“预览”窗口。这就是你所能得到的。`<C-w>}`如果您有最新的`tags`文件，还有。

再说一遍：*Vim 不是 IDE。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T21:28:40.043

确保生成索引时 ctags 可以找到 std lib 中的源代码，您应该没问题。

默认情况下，这些索引工具仅在当前目录（及其子文件夹）中添加代码，因此您需要手动告诉他该代码安装在系统上的什么位置。

# java - 在java中创建一个通用数组以与哈希表一起使用

> ID：13334726
> 
> 赞同：1
> 
> 时间：2012-11-11T19:43:46.417
> 
> 标签：java, generics, hash, nullpointerexception

我理解哈希表背后的想法，但实现变得令人沮丧。我做了一些阅读并得到了不同的答案。我读过我可以实现一个通用的对象数组，如下所示：

```
TableContainer[] classTable = 
    (TableContainer<Object,Object>[]) new TableContainer[256]; 
```

其中 tableContainer 是：

```
class TableContainer<key,val>{
    Object key = null;
    Object val = null;
} 
```

我遇到的问题是，当我尝试在函数中传递以下代码时：

```
classTable[i].key = x 
```

我得到一个空指针异常。我知道在 java 中创建泛型数组会因为类型擦除而变得混乱，但我认为上面的实现会起作用。有没有办法创建一个泛型列表或数组以用作哈希表？（不允许哈希表/哈希图类）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T19:48:48.217

您仍然必须先初始化数组中的对象引用，然后才能使用它们。像这样

```
tableContainer[] a = new tableContainer<Whatever, SomeClass>[SIZE];
for ( int i = 0 ; i < a.length; i++ ) {
     a[i] = new tableContainer<Whatever, SomeClass>();
} 
```

当然，您必须将数组初始化为大于 0 的大小，这与您的示例不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T19:49:10.360

首先，您正在创建一个空数组：

```
new TableContainer[0] 
```

而且由于您无法随着时间的推移调整数组的大小，因此没有多大意义。如果您实际上创建了一个正数大小的数组，您必须记住一件事：您创建了一个引用数组。默认情况下，每个数组都被初始化为默认（零）值，这恰好是`null`用于引用。

因此你需要这样的东西：

```
classTable = new TableContainer[8];
classTable[0] = new TableContainer();
//...later
if(classTable[0] != null) {  //will pass for [0], but not for [1]
  classTable[0].key
} 
```

# android - 将联系人导入安卓应用

> ID：13334730
> 
> 赞同：1
> 
> 时间：2012-11-11T19:44:27.637
> 
> 标签：android, text, message, contacts

我正在尝试为 android 制作一个短信应用程序。我希望布局与本机应用程序的布局非常相似，但它会包含其他功能。我需要创建一个与 Android 联系人自动同步的联系人屏幕。关于从哪里开始的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T19:53:02.123

您将需要查看从 android 设备读取联系人，可以在此处找到 -

*   [如何在 Android 2.0 上读取联系人](https://stackoverflow.com/questions/1721279/how-to-read-contacts-on-android-2-0)

我会将它们显示在列表视图中，您可以在此处查看 -

*   [http://developer.android.com/guide/topics/ui/layout/listview.html](http://developer.android.com/guide/topics/ui/layout/listview.html)

*   [http://www.mkyong.com/android/android-listview-example/](http://www.mkyong.com/android/android-listview-example/)

# android - DialogFragment 中的 ViewPager + FragmentPagerAdapter 得到“IllegalArgumentException:No view found...”

> ID：13334733
> 
> 赞同：39
> 
> 时间：2012-11-11T19:44:39.147
> 
> 标签：android, android-fragments, android-viewpager, fragmentpageradapter, android-nested-fragment

我试图显示一个 FragmentDialog （创建并显示为一个对话框，而不是作为视图层次结构中的内容添加），其中有一个 ViewPager，其内容由 FragmentPagerAdapter 给出（提供由图像组成的片段）。

该代码在从 FragmentActivity 显示 ViewPager + FragmentPagerAdapter 时完美运行，但在从 FragmentDialog 执行此操作时会出现以下异常：

“IllegalArgumentException：没有为片段 SimpleFragment 找到 id 0x7f040077 的视图...”

这是我的代码：

一个带有按钮的 SherlockFragmentActivity，用于创建和显示对话框。

```
public class BorrameActivity extends SherlockFragmentActivity{
    @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);  
    setContentView(R.layout.one_act);

    Button button = (Button) findViewById(R.id.button);
    button.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View arg0) {
            showTheDialog();

        }});
   }

   private void showTheDialog(){
       AchGalleryDialog newFragment = AchGalleryDialog.newInstance(achs);
       newFragment.show(getSupportFragmentManager(), "dialog");
   } 
```

片段对话框：

```
public class AchGalleryDialog extends DialogFragment{
    public AchGalleryDialog(){  
}

    public static AchGalleryDialog newInstance(){       
        AchGalleryDialog f = new AchGalleryDialog();
        return f;       
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);  
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.dialog_user_result, container);
        getDialog().setTitle("Hola tronco");

        //content to show in the fragments
        int[] images = new int[]{R.drawable.d1, R.drawable.d2, R.drawable.d3};

        ViewPager pager = (ViewPager) view.findViewById(R.id.pager);
        MyFragmentAdapter adapter = new MyFragmentAdapter(getFragmentManager(),images);  
        pager.setAdapter(adapter);

        return view;
    }
} 
```

这是非常简单的 MyFragmentPagerAdapter，我只放了 getItem() 方法，并且 nullPointer 检查：

```
@Override
public Fragment getItem(int position) {
    return MySimpleFragment.newInstance(images[position]); 

} 
```

最后是 SimpleFragment：

```
public class SimpleFragment extends Fragment{
    int id;
    public static SimpleAchFragment newInstance(int imgId){
        SimpleFragment f = new SimpleFragment();
        Bundle args = new Bundle();
        args.putLong(ID_BUNDLE, imgId);
        f.setArguments(args);

        return f;
    }

    public SimpleAchFragment(){
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        this.id = getArguments() != null ? getArguments().getInt(ID_BUNDLE) : 0;    
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    // Inflate the layout for this fragment
        View v =  inflater.inflate(R.layout.simple_fragment, container, false);
        FragmentActivity mAct = getActivity();

        ImageView img = (ImageView) v.findViewById(R.id.image);
        img.setImageDrawable(mAct.getResources().getDrawable(id));

        return v;
    }

} 
```

更多信息，如果传递给适配器的内容（具有 3 个整数的 int 数组）的长度为零，则适配器不会尝试创建任何片段，因此对话框正确显示但为空（如预期的那样）。膨胀时在 SimpleFragment.onCreateView() 抛出异常。异常中引用的 id（未找到）对应于 ViewPager 的 id，并在 R.layout.simple_fragment 中正确定义。

我还尝试使用 AlertDialog.builder 以及直接使用 Dialog() 构造函数构建 Dialog，但得到相同的行为。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-12-03T13:21:12.277

试试这个：

在课堂**上 AchGalleryDialog**

```
MyFragmentAdapter adapter = new MyFragmentAdapter(getChildFragmentManager(),images); 
```

代替

```
MyFragmentAdapter adapter = new MyFragmentAdapter(getFragmentManager(),images); 
```

因为这：

[http://developer.android.com/about/versions/android-4.2.html#NestedFragments](http://developer.android.com/about/versions/android-4.2.html#NestedFragments)

希望这会有所帮助！

# postgresql - 考虑到道路和公共交通的可用性，如何计算从 A 点到 B 点的距离？

> ID：13334738
> 
> 赞同：2
> 
> 时间：2012-11-11T19:45:14.407
> 
> 标签：postgresql, gis, openstreetmap, postgis, opentripplanner

想象一下，我有一个 PostGIS 数据库，其中包含以下信息

1.  一个城市的 OSM（OpenStreetMap），
2.  城市内的道路/街道和
3.  那个城市的公共交通路线。

我想

1.  **计算该城市通过街道/道路**从 A 楼到 B 楼的距离（对于有车的人）和
2.  **估计使用可用公共交通工具**从 A 楼到 B 楼所需的时间（对于没有汽车的人）。

是否有任何现成的（开源或商业）软件可以在 PostGIS 中执行此类计算？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T06:43:22.667

[PgRouting](http://pgrouting.org/)似乎正是这样做的。这是一个[介绍](http://underdark.wordpress.com/2011/02/07/a-beginners-guide-to-pgrouting/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T09:01:35.357

对于公共交通规划，您也应该查看[OpenTripPlanner](https://github.com/openplans/OpenTripPlanner/wiki/Demos)。链接后，您将看到各种示例，并非所有示例都有效，但雅典可以。

# craigslist - Craigslist 或 Kijiji - 是否可以提取海报电子邮件地址？

> ID：13334741
> 
> 赞同：-4
> 
> 时间：2012-11-11T19:45:38.870
> 
> 标签：craigslist

嗨，提前感谢您帮助我解决我的问题。

是否可以编写一个脚本，在提供 craigslist 或 kiji 帖子时提取以下信息，即[http://toronto.en.craigslist.ca/tor/atq/3346994296.html](http://toronto.en.craigslist.ca/tor/atq/3346994296.html)：

1.  电子邮件地址（默认由 craigslist 提供）
2.  帖子中的项目
3.  海报地址

以上 1-3 是可以手动获取的信息，但希望只输入发布或广告 ID 并能够提取此信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:19:27.407

这个问题的简短回答是......
是的，可以通过一个相对简单的脚本来自动提取从网页中列出的信息，类似于作为示例提供的信息。

一般来说，这种 [从网页中自动提取信息] 的活动被称为*Web Scraping*，一种特殊形式的[***Data Scraping***](http://en.wikipedia.org/wiki/Data_scraping)。
既有可以使用的现成产品（不涉及或只涉及很少的编程；所需页面的参数化和页面内的所需字段通过配置指定。），以及可以使用的软件库与脚本语言（例如 python 或 java）相关，它们有助于解析 HTML 页面，并且更普遍地为与此活动相关的各种任务提供支持。

除了技术方面的考虑之外，您还需要维护执行这种抓取的礼仪和合法性。由于某些数据和站点可能受到明确的版权保护，因此在低流量时间执行大型抓取工作并通过限制请求以免给主机站点造成过度负担总是一个好主意。此外，许多站点可能会提供 API 或数据转储，以更简单、更可控的方式提供相同的信息。

# unit-testing - 未定义 Angular 返回模块中的测试服务

> ID：13334749
> 
> 赞同：128
> 
> 时间：2012-11-11T19:46:16.060
> 
> 标签：unit-testing, angularjs, karma-runner

我正在尝试在我的项目中运行默认服务单元测试（取自 GitHub 上的 Angular Seed 项目），但我不断收到错误“模块未定义”。

我已经读到这可能与[引用的 JavaScript 文件](https://github.com/vojtajina/testacular/issues/66)的顺序有关，但我似乎无法让它工作，所以希望你们中的一个人能够提供帮助。

我的测试配置如下所示：

> basePath = '../';
> 
> 文件 = [
> 'public/javascripts/lib/jquery-1.8.2.js'、
> 'public/javascripts/lib/angular.js'、
> 'public/javascripts/lib/angular- *.js'、
> 'public/app.js '、
> 'public/controllers/* .js'、
> 'public/directives.js'、
> 'public/filters.js'、
> 'public/services.js'、
> JASMINE、
> JASMINE_ADAPTER、
> 'public/javascripts/lib/angular-mocks。 js',
> 'test/unit/*.js' ];
> 
> 自动监视 = 真；
> 
> 浏览器 = ['Chrome'];
> 
> junitReporter = { outputFile：'test_out/unit.xml'，套件：'unit'};

该服务如下所示：

```
angular.module('myApp.services', []).
  value('version', '0.1'); 
```

测试看起来像这样：

```
'use strict';

describe('service', function() {
  beforeEach(module('myApp.services'));

  describe('version', function() {
    it('should return current version', inject(function(version) {
      expect(version).toEqual('0.1');
    }));
  });
}); 
```

通过 testacular 运行测试时的错误是：

> ReferenceError：未定义模块

* * *

## 回答 #1

> 赞同：260
> 
> 时间：2012-11-15T15:15:10.527

您缺少**angular-mocks.js**文件。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-08-06T08:24:59.553

我遇到了同样的问题，并且我理解它为什么不起作用：**必须在**angular-mocks.js 文件之前引用 jasmine.js javascript。实际上，angular-mocks.js 会检查 Jasmine 是否已加载，只有加载时才会将模块功能添加到窗口中。

这是Angular Mocks 代码的**摘录：**

*（在我下面关于“黑客”的几条评论之后进行编辑：这只是代码的摘录，这不是你需要自己编写的东西，它已经存在了！）*

```
window.jasmine && (function(window) {

[...]

  window.module = angular.mock.module = function() {
    var moduleFns = Array.prototype.slice.call(arguments, 0);
    return isSpecRunning() ? workFn() : workFn;
    /////////////////////
    [...]
  }; 
```

*简而言之：*只需在angular-mocks.js**之前** 引用您的 jasmine.js 即可。

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2013-01-05T01:27:08.190

该`window.module`函数来自[angular-mocks.js](https://github.com/angular/angular.js/blob/f0c6ebc07653f6267acec898ccef5677884e3081/src/ngMock/angular-mocks.js#L1654-L1685)，是`angular.mock.module`. 如[文档](https://docs.angularjs.org/api/ngMock/function/angular.mock.module)中所述，该`module`功能仅适用于 Jasmine。

使用[Testacular](http://vojtajina.github.com/testacular/)，将加载以下示例配置文件`angular-mocks.js`。

```
/** example testacular.conf.js */

basePath = '../';
files = [
  JASMINE,
  JASMINE_ADAPTER,
  'path/to/angular.js',
  'path/to/angular-mocks.js',   // for angular.mock.module and inject.
  'src/js/**/*.js',             // application sources
  'test/unit/**/*.spec.js'      // specs
];
autoWatch = true;
browsers = ['Chrome']; 
```

而且，正如其他地方所建议的，您可以使用调试日志运行 Testacular 以查看加载了哪些脚本（您也可以在检查器中看到相同的内容）：

```
testacular --log-level debug start config/testacular.conf.js 
```

[`angular.mock.inject`文档](https://docs.angularjs.org/api/ngMock/function/angular.mock.inject)包含一个非常完整的示例。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-11-15T03:49:39.873

我们在单元测试中使用没有“角度”的“模块”，它工作正常。

咖啡脚本：

```
describe 'DiscussionServicesSpec', ->
    beforeEach module 'DiscussionServices'
    beforeEach inject ... etc. 
```

编译为

JavaScript：

```
describe('DiscussionServices', function() {
    beforeEach(module('DiscussionServices'));
    beforeEach(inject(function ... etc. 
```

我唯一一次看到类似于您描述的错误的情况是，如果在 testacular.conf.js 文件中，angular-mocks.js 文件未在规范尝试使用“模块”之前的文件部分中列出。如果我把它放在“文件”列表中的测试之后，我会得到

```
ReferenceError: Can't find variable: module 
```

（我们的测试是通过 PhantomJS 运行的）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-05-30T21:53:21.907

我在我的业力配置中包含了 angular-mocks.js，但仍然出现错误。事实证明，文件数组中的顺序很重要。(duh) 就像在 html 文档的头部一样，如果脚本在定义之前调用 angular，则会发生错误。所以我只需要在 angular.js 和 angular-mocks.js 之后包含我的 app.js。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-31T09:01:03.193

如果您使用 Yeoman 及其角度生成器，您可能会收到此错误。特别是当你做教程（._.）
时，我通过将 angular-mocks.js 文件从 bower_components/angular-mocks 目录复制到 test/mock 目录来修复它。当然，您必须确保您的 karma.conf.js 文件配置正确。
问候！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-18T14:51:30.010

当我做类似的事情时，我遇到了同样的问题`var module = angular.module('my',[])`。我需要确保它被 IIFE 包围

# node.js - 使用 express/ejs 呈现非特定数量的结果

> ID：13334753
> 
> 赞同：0
> 
> 时间：2012-11-11T19:46:33.093
> 
> 标签：node.js, express, ejs

我正在尝试创建一个基本的博客平台来帮助我用 node 弄湿我的脚。我使用 Express 作为框架，使用 ejs 作为渲染引擎。在我的主页上，我想显示最后十个博客。到目前为止，我有：

```
"use strict";
var mongo = require("mongodb")
    , server = new mongo.Server("localhost", mongo.Connection.DEFAULT_PORT, {auto_reconnect: true, safe:true})
    , mdb = new mongo.Db("blog", server)
    , querystring = require("querystring")
    , express = require('express')
    , app = express();

app.configure(function() {
    app.set('view engine', 'ejs');
});

module.exports = {
    home: function home(req, res) {
        var blogs;
        //Load blogs from db
        mdb.open(function(err, db) {
            db.collection("blogs", function(err, collection) {
                var stream = collection.find({}, {"limit": 10, "sort": {"created": -1}}).stream();
                stream.on("data", function(item) {
                    app.render('blogItem', {title: item.title, content: item.content}, function(err, html) {
                        if(err) { console.error(err);   return; }
                        blogs += html;
                    });
                });
                //Render the finished page
                stream.on("end", function() {
                    res.render('home', {title: "AwesomeBlog", content: blogs});
                    db.close();
                });
            });
        });
    }
}; 
```

ejs 文件：

> 主页.ejs

```
<!DOCTYPE html>
<head>
<title><%= title %></title>
</head>
<body>
<h1><%= title %>!</h1>
<%= content %>
<a href="/admin">Admin section</a>
</body> 
```

> blogItem.ejs

```
<h4><%= title %></h4>
<p><%= content %></p> 
```

虽然这在技术上“有效”，但每个博客呈现的 HTML 被解释为纯文本，从而导致

```
AwesomeBlog!

<h4>Hi</h4> <p>test 123</p> <h4>Awesome title</h4> <p>Awesome text</p> <h4>FIRST</h4> <p>POST!</p> Admin section 
```

在这种情况下我该如何解决这个问题？

我正在尝试做的最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:03:13.130

这是 EJS 内置的安全功能。它阻止您的用户在您的页面中嵌入包含 javascript 漏洞 (XSS) 的 html。（他们仍然可以在表单请求等中提交不安全的字符串，但是您的模板会对其进行转义以防止浏览器漏洞。）

要关闭它（对于您可以信任的 HTML 内容）：

```
Escapes html by default with <%= code %>
Unescaped buffering with <%- code %> 
```

只需像这样切换模板中的标签：

```
<h4><%= title %></h4>
<p><%- content %></p> 
```

# android - 无法实现 60fps 渲染简单四边形，Android，Opengl ES 2.0

> ID：13334754
> 
> 赞同：6
> 
> 时间：2012-11-11T19:46:44.687
> 
> 标签：android, optimization, opengl-es-2.0

我正在开发一个简单的 pong 类型游戏来掌握 opengl 和 android，并且在性能方面似乎已经碰壁了。

我将游戏逻辑放在一个单独的线程上，绘制命令通过阻塞队列发送到 gl 线程。问题是我卡在 40fps 左右，而且我尝试过的任何方法似乎都无法提高帧率。

为了简单起见，我设置了opengl：

```
GLES20.glDisable(GLES20.GL_CULL_FACE);
GLES20.glDisable(GLES20.GL_DEPTH_TEST);
GLES20.glDisable(GLES20.GL_BLEND); 
```

opengl 程序和绘图的设置由以下类处理：

```
class GLRectangle {
private final String vertexShaderCode =
        "precision lowp float;" +
        // This matrix member variable provides a hook to manipulate
        // the coordinates of the objects that use this vertex shader
        "uniform lowp mat4 uMVPMatrix;" +

        "attribute lowp vec4 vPosition;" +
        "void main() {" +
        // the matrix must be included as a modifier of gl_Position
        "  gl_Position = vPosition * uMVPMatrix;" +
        "}";

private final String fragmentShaderCode =
        "precision lowp float;" +
        "uniform lowp vec4 vColor;" +
        "void main() {" +
        "  gl_FragColor = vColor;" +
        "}";

protected static int mProgram = 0;

private static ShortBuffer drawListBuffer;
private static short drawOrder[] = { 0, 1, 2, 0, 2, 3};//, 4, 5, 6, 4, 6, 7 }; // order to draw vertices

// number of coordinates per vertex in this array
private static final int COORDS_PER_VERTEX = 3;
private static final int vertexStride = COORDS_PER_VERTEX * 4; // bytes per vertex

GLRectangle(){

    int vertexShader = GameRenderer.loadShader(GLES20.GL_VERTEX_SHADER, vertexShaderCode);
    int fragmentShader = GameRenderer.loadShader(GLES20.GL_FRAGMENT_SHADER, fragmentShaderCode);

    mProgram = GLES20.glCreateProgram();             // create empty OpenGL ES Program
    GLES20.glAttachShader(mProgram, vertexShader);   // add the vertex shader to program
    GLES20.glAttachShader(mProgram, fragmentShader); // add the fragment shader to program
    GLES20.glLinkProgram(mProgram);                  // creates OpenGL ES program executables

    // initialize byte buffer for the index list
    ByteBuffer dlb = ByteBuffer.allocateDirect(
    // (# of coordinate values * 2 bytes per short)
            drawOrder.length * 2);
    dlb.order(ByteOrder.nativeOrder());
    drawListBuffer = dlb.asShortBuffer();
    drawListBuffer.put(drawOrder);
    drawListBuffer.position(0);  
}

protected static void Draw(Drawable dObj, float mvpMatrix[])
{   
    FloatBuffer vertexBuffer = dObj.vertexBuffer;

    GLES20.glUseProgram(mProgram);
    //GameRenderer.checkGlError("glUseProgram");

    // get handle to fragment shader's vColor member
    int mColorHandle = GLES20.glGetUniformLocation(mProgram, "vColor");
    //GameRenderer.checkGlError("glGetUniformLocation");

    // get handle to shape's transformation matrix
    int mMVPMatrixHandle = GLES20.glGetUniformLocation(mProgram, "uMVPMatrix");
    //GameRenderer.checkGlError("glGetUniformLocation");

    // get handle to vertex shader's vPosition member
    int mPositionHandle = GLES20.glGetAttribLocation(mProgram, "vPosition");
    //GameRenderer.checkGlError("glGetAttribLocation");

    // Apply the projection and view transformation
    GLES20.glUniformMatrix4fv(mMVPMatrixHandle, 1, false, mvpMatrix, 0);
    //GameRenderer.checkGlError("glUniformMatrix4fv");

    // Set color for drawing the quad
    GLES20.glUniform4fv(mColorHandle, 1, dObj.color, 0);
    //GameRenderer.checkGlError("glUniform4fv");

    // Enable a handle to the square vertices
    GLES20.glEnableVertexAttribArray(mPositionHandle);
    //GameRenderer.checkGlError("glEnableVertexAttribArray");

     // Prepare the square coordinate data
    GLES20.glVertexAttribPointer(mPositionHandle, COORDS_PER_VERTEX,
                                    GLES20.GL_FLOAT, false,
                                    vertexStride, vertexBuffer);
    //GameRenderer.checkGlError("glVertexAttribPointer");

    // Draw the square
    GLES20.glDrawElements(GLES20.GL_TRIANGLES, drawOrder.length,
                              GLES20.GL_UNSIGNED_SHORT, drawListBuffer);
    //GameRenderer.checkGlError("glDrawElements");

    // Disable vertex array
    GLES20.glDisableVertexAttribArray(mPositionHandle);
    //GameRenderer.checkGlError("glDisableVertexAttribArray");
}
} 
```

我已经做了很多分析和谷歌搜索，但找不到任何东西可以让这项工作更快......我已经包含了 DDMS 输出的屏幕截图：

![DDMS 输出](../Images/468d3888aaa7dd2748c76ff812763c54.png)

对我来说，看起来 glClear 正在导致 GLThread 休眠 23 毫秒……尽管我怀疑情况是否真的如此。

我完全不知道如何才能提高效率，没有什么特别的事情发生。为了寻求更好的渲染性能，我切换到了我描述的多线程方法，关闭了 alpha 混合和深度测试，更改为批处理绘制方法（不适用于这个简单的示例），并将着色器中的所有内容都切换为 lowp .

任何帮助将其提高到 60fps 将不胜感激！

布鲁斯

**编辑**好吧谈谈想太多的问题。事实证明，我在过去一周开启了省电模式……它似乎将渲染锁定为 40fps。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T11:44:39.017

当使用 Galaxy S3 打开省电模式时会发生此行为。

看来省电模式将帧速率锁定为 40fps。将其关闭即可轻松实现所需的 60fps。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T10:50:22.217

不确定您是否可以控制设备表面的 EGL 设置，但如果可以的话，有一种方法可以将更新设置为在“非同步”模式下运行。

```
egl.eglSwapInterval( dpy, 0 ) 
```

这并非在所有设备上都可用，但允许您对渲染进行一些控制。

# ruby-on-rails - Rails 中的一对一关系

> ID：13334757
> 
> 赞同：1
> 
> 时间：2012-11-11T19:47:19.313
> 
> 标签：ruby-on-rails, activerecord

我试图在 Rails 3 中实现简单的 1 对 1 关系，用户可以在其中连接银行帐户。

```
class User < ActiveRecord::Base
  has_one :bank
  accepts_nested_attributes_for :bank
  attr_accessible :bank_attributes
end

class Bank < ActiveRecord::Base
   belongs_to :user
end 
```

路线

```
resources :users do
  resources :bank 
```

现在，当我在 users/1/bank/new 中为用户构建一个新的银行对象时，如下所示：

```
def new
  @user = User.find(current_user.id)
  @bank = @user.build_bank
end 
```

我收到一个错误，如下所示：

```
<%= simple_form_for(@bank) do |f| %> 
```

错误是：

```
undefined method `banks_path' for #<#<Class:0x007fa7bd090f08>:0x007fa7c0545b40> 
```

我的目标是有一个单独的表格供用户添加银行帐户信息。希望有人可以在正确的方向上帮助我做到这一点。我也使用 ActiveAdmin，并且与表单等的关系在那里工作得很好。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:04:48.840

由于银行嵌套在用户下，您需要将用户提供给表单：

```
<%= simple_form_for([@user, @bank]) do |f| %> 
```

此外，您的路线文件应该是

```
resources :users do
  resource :bank 
```

这将为您提供用户的 user_bank_path

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:20:32.143

无论关联类型如何，您都需要以复数形式声明资源。

所以，你的资源声明

```
resources :users do
  resource :banks
end 
```

# android - android 4.0 设备无法启动

> ID：13334761
> 
> 赞同：2
> 
> 时间：2012-11-11T19:47:42.603
> 
> 标签：android

我是这个论坛的新手。我的设备无法启动。我安装了 android-sdk 并使用 Logcat 找到了这个：

```
W/Zygote  (  257): Class not found for preloading: android.media.AudioManager$2
W/dalvikvm(  257): Exception Ljava/lang/UnsatisfiedLinkError; thrown while initializing Landroid/media/CameraProfile;
E/Zygote  (  257): Error preloading android.media.CameraProfile.
E/Zygote  (  257): java.lang.ExceptionInInitializerError
E/Zygote  (  257):  at java.lang.Class.classForName(Native Method)
E/Zygote  (  257):  at java.lang.Class.forName(Class.java:217)
E/Zygote  (  257):  at java.lang.Class.forName(Class.java:172)
E/Zygote  (  257):  at com.android.internal.os.ZygoteInit.preloadClasses(ZygoteInit.java:285)
E/Zygote  (  257):  at com.android.internal.os.ZygoteInit.preload(ZygoteInit.java:232)
E/Zygote  (  257):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:520)
E/Zygote  (  257):  at dalvik.system.NativeStart.main(Native Method)
E/Zygote  (  257): Caused by: java.lang.UnsatisfiedLinkError: Cannot load library: link_image[1936]:   257 could not load needed library 'libstagefright.so' for 'libmedia_jni.so' (reloc_library[1285]:   257 cannot locate '_ZN7logging10LogMessageC1EPKcii'...
E/Zygote  (  257): )
E/Zygote  (  257):  at java.lang.Runtime.loadLibrary(Runtime.java:391)
E/Zygote  (  257):  at java.lang.System.loadLibrary(System.java:535)
E/Zygote  (  257):  at android.media.CameraProfile.<clinit>(CameraProfile.java:92)
E/Zygote  (  257):  ... 7 more
D/AndroidRuntime(  257): Shutting down VM
W/dalvikvm(  257): threadid=1: thread exiting with uncaught exception (group=0x40a611f8)
I/Netd    (  266): Netd 1.0 starting
E/Netd    (  266): Unable to create netlink socket: Protocol not supported
E/Netd    (  266): Unable to open quota2 logging socket 
```

提到的两个库（libmedia_jni.so 和 libstagefright.so）都在 /system/lib 中。我也尝试使用音量键启动它，但没有任何变化。

谢谢

# java - 如何在eclipse中设置spring源代码进行调试

> ID：13334766
> 
> 赞同：7
> 
> 时间：2012-11-11T19:48:08.123
> 
> 标签：java, eclipse, spring

我正在尝试在 Eclipse 项目中设置 spring 源代码，以便我可以使用调试器逐步完成它。

目前，我试图进入的特定代码行是这一行：

```
ApplicationContext context=new ClassPathXmlApplicationContext("classpath:spring.xml"); 
```

ApplicationContext 和 ClassPathXmlApplicationContext 是 org.springframework.context 的一部分：

```
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext; 
```

在“Java Build Path”=>“Libraries”下，我为 org.springframework.context-3.1.3.RELEASE.jar 指定了文件 org.springframework.context-sources-3.1.3.RELEASE.jar 的路径.

![在此处输入图像描述](../Images/30bdc5d1182d2b52e817e508a56992a6.png)

我正在使用带有 eclipse indigo 3.7.2 的 spring 3.1.3。

更新：

我尝试将*源*.jar 文件添加到“调试配置”下的源选项卡中，但 eclipse 仍然找不到源。

![在此处输入图像描述](../Images/6633903cadd0ad5b49d3c6ce22d196ba.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:59:07.210

试试下面：

```
Menu Option Run -> Debug Configurations -> Java Application 
   Provide required inputs in "main" tab
   Add source jar file in source tab 
```

按 OK 并运行这个新创建的选项进行调试。

如果运行远程，则`Remote Java Application`在调试配置的左窗格中选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-08T19:41:31.457

在维护一个非常旧的系统时，我发现必须下载包含源代码的特定 jar 文件以进行调试。 [http://central.maven.org/maven2/org/springframework/batch/spring-batch-core/{release number}](http://central.maven.org/maven2/org/springframework/batch/spring-batch-core)。正如上面的答案中提到的那样，将该 jar 添加到调试配置的源选项卡中

# android - 初学者使用加速度计指南？

> ID：13334768
> 
> 赞同：1
> 
> 时间：2012-11-11T19:48:11.667
> 
> 标签：android, accelerometer

我正在计划一个我将为 android 编写的游戏，加速度计是我不熟悉的东西。获得倾斜度并为玩家创建矢量是游戏中非常重要的部分。我已经阅读了文档和各种教程。这样做有点令人困惑，因为我读到的内容都与游戏编程无关。所以我有几个问题：

如何从 onSensorChange 事件中获取向量？

当倾斜减少/前进时，如何以一种看起来很自然的方式更改此向量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:29:52.053

有许多示例和教程将对您有所帮助。

[链接 1](http://www.techrepublic.com/blog/app-builder/a-quick-tutorial-on-coding-androids-accelerometer/472)

[链接 2](http://www.edumobile.org/android/android-development/accelerometer-example/)

[示例项目](https://github.com/commonsguy/cw-andtutorials/tree/master/38-Sensors)

[链接 3](http://webhole.net/2011/08/20/android-sdk-accelerometer-example-tutorial/)

我确定其中一些你以前见过，但希望它对你有帮助。我相信这两个会帮助您了解 onSensorChange 到底做了什么：-

[调用 onSensorChanged() 时会发生什么](https://stackoverflow.com/questions/12872844/what-happens-when-onsensorchanged-in-called-before-it-can-finish-the-current-e)

[好答案](https://stackoverflow.com/questions/11068571/getting-direction-vector-in-android)

# c# - 如何从 Windows 8 照片应用程序中获取路径作为共享目标？

> ID：13334769
> 
> 赞同：1
> 
> 时间：2012-11-11T19:48:26.070
> 
> 标签：c#, windows, windows-8, windows-store-apps

当我尝试从 Windows 8 照片应用程序共享时从共享目标的 GetStorageItemsAsync() 调用传回给我的 IStorageItems 的路径时，返回的所有项目的路径属性为空。名称（文件名）已正确填充。但是，我需要实际的路径，而且似乎没有办法获得它。

这是 Windows 8 的照片应用程序中的错误，还是我做错了什么？

我获取项目列表的代码：

```
this.sharedStorageItems = await this.shareOperation.Data.GetStorageItemsAsync(); 
```

我的代码遍历列表：

```
// Display the name of the files being shared.
var files = new List<String>();
for (int index = 0; index < this.sharedStorageItems.Count; index++)
    files.Add(String.Concat(this.sharedStorageItems[index].Path, "\\", this.sharedStorageItems[index].Name)); 
```

上面的路径总是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:35:24.237

你确定你需要路径吗？不能保证您可以自己访问这些文件。例如，如果您没有照片库访问权限，则无法访问那里的物理图像。如果您无法访问互联网，您将无法访问来自 Facebook 和 Flickr 的内容。有些也可能来自 SkyDrive，而您可能根本无法直接访问这些内容。

某些应用程序可能会即时生成图像，只需使用结果创建一个 StorageItem。

StorageItem 旨在将您从中抽象出来。你得到的是被共享的实际文件，而不是其他一些间接的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T05:10:27.337

您可能还想通过您的 Windows 帐户检查您的共享设置。可能是您的问题的更简单的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T17:14:33.570

看来 IStorageItem 只是基类。真正返回的是一个 IStorageFile，其中包括作为共享过程的一部分创建的临时文件的基本流。

因此，将 IStorageItem 转换为 IStorageFile，您将可以很好地处理返回的文件。

# skinning - Assimp 骨骼动画 gpu 蒙皮和混合

> ID：13334777
> 
> 赞同：2
> 
> 时间：2012-11-11T19:49:42.113
> 
> 标签：skinning, gpu

有谁知道任何开源项目可以让我用 assimp 加载文件并制作一个简单的 API，例如 LoadModel()、PlayAnimation(int keyframe_start, int keyframe_end)、BlendAnimation(int seconds, int id)？它需要使用矩阵托盘或双四元数进行 GPU 蒙皮。我在这里找到了一些东西：http: [//files.zylinski.se/skeletal_animation/](http://files.zylinski.se/skeletal_animation/)但我不确定它是否支持混合多个动画。有人可以看看那个链接并告诉我是否可以吗？如果没有，那么很难添加混合吗？抱歉，我对 3D 编程真的很陌生，只学习了 2 个月。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T13:32:17.893

[SmartBody](http://smartbody.ict.usc.edu/)是一个角色动画平台，我认为它支持过渡（从一个动作淡入另一个动作）和混合（组合多个动画）。

不知道皮肤是否是在 GPU 上完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:48:17.110

这是一些示例代码：

*   [OGLDev 38：Assimp 动画](http://ogldev.atspace.co.uk/www/tutorial38/tutorial38.html)，
*   Abdallah Dib 的[iOS GLES 教程](http://www.virtual-vision.net/4.html)。

OGRE 还支持[骨骼动画](http://www.ogre3d.org/docs/manual/manual_76.html)。

# c# - 为什么我的破坏者示例如此缓慢？

> ID：13334778
> 
> 赞同：2
> 
> 时间：2012-11-11T19:49:43.927
> 
> 标签：c#, disruptor-pattern

我从 Stack Overflow 问题*[Disruptor.NET 示例](https://stackoverflow.com/questions/8860684/disruptor-net-example)*中获取了代码示例，并将其修改为“测量”时间。完整清单如下：

```
using System;
using System.Diagnostics;
using System.Linq;
using System.Threading;
using System.Threading.Tasks;
using Disruptor;
using Disruptor.Dsl;

namespace DisruptorTest
{
    public sealed class ValueEntry
    {
        public long Value { get; set; }

        public ValueEntry()
        {
            Console.WriteLine("New ValueEntry created");
        }
    }

    public class ValueAdditionHandler : IEventHandler<ValueEntry>
    {
        public void OnNext(ValueEntry data, long sequence, bool endOfBatch)
        {
            Program.sw.Stop();
            long microseconds = Program.sw.ElapsedTicks / (Stopwatch.Frequency / (1000L * 1000L));
            Console.WriteLine("elapsed microseconds = " + microseconds);
            Console.WriteLine("Event handled: Value = {0} (processed event {1}", data.Value, sequence);
        }
    }

    class Program
    {
        public static Stopwatch sw = Stopwatch.StartNew();

        private static readonly Random _random = new Random();
        private static readonly int _ringSize = 16;  // Must be multiple of 2

        static void Main(string[] args)
        {
            var disruptor = new Disruptor.Dsl.Disruptor<ValueEntry>(() => new ValueEntry(), _ringSize, TaskScheduler.Default);

            disruptor.HandleEventsWith(new ValueAdditionHandler());

            var ringBuffer = disruptor.Start();

            while (true)
            {
                var valueToSet = _random.Next();
                long sequenceNo = ringBuffer.Next();

                ValueEntry entry = ringBuffer[sequenceNo];

                entry.Value = valueToSet;

                sw.Restart();
                ringBuffer.Publish(sequenceNo);

                Console.WriteLine("Published entry {0}, value {1}", sequenceNo, entry.Value);

                Thread.Sleep(1000);
            }
        }
    }
} 
```

输出是：

```
New ValueEntry created
New ValueEntry created
New ValueEntry created
New ValueEntry created
New ValueEntry created
New ValueEntry created
New ValueEntry created
New ValueEntry created
New ValueEntry created
New ValueEntry created
New ValueEntry created
New ValueEntry created
New ValueEntry created
New ValueEntry created
New ValueEntry created
New ValueEntry created
Published entry 0, value 1510145842
elapsed microseconds = 2205
Event handled: Value = 1510145842 (processed event 0
Published entry 1, value 1718075893
elapsed microseconds = 85
Event handled: Value = 1718075893 (processed event 1
Published entry 2, value 1675907645
elapsed microseconds = 32
Event handled: Value = 1675907645 (processed event 2
Published entry 3, value 1563009446
elapsed microseconds = 75
Event handled: Value = 1563009446 (processed event 3
Published entry 4, value 1782914062
elapsed microseconds = 34
Event handled: Value = 1782914062 (processed event 4
Published entry 5, value 1516398244
elapsed microseconds = 50
Event handled: Value = 1516398244 (processed event 5
Published entry 6, value 76829327
elapsed microseconds = 50
Event handled: Value = 76829327 (processed event 6 
```

因此，将数据从一个线程传递到另一个线程大约需要 50 微秒。但它一点也不快！“当前版本的 Disruptor 可以在线程之间以每秒 100 万条消息的速度执行约 50 ns。” 所以我的结果比预期的慢 1000 倍。

我的示例有什么问题，如何实现 50 ns 的速度？

我已经修改了上面的程序，现在收到 1 微秒的延迟，这要好得多。但是，我仍在等待`disruptor`模式专家的回复。我正在寻找一个可以证明我实际上可以在 50 ns 内传递数据的示例。

`BlockingCollection`此外，我使用平均 14 微秒编写了相同的测试，这证明它`Disruptor`更快：

使用 BlockingCollection：

```
average = 14 minimum = 0 0-5 = 890558, 5-10 = 1773781, 10-30 = 6900128, >30 = 435433 
```

使用干扰器：

```
average = 0 minimum = 0 0-5 = 9908469, 5-10 = 64464, 10-30 = 19902, >30 = 7065 
```

BlockingCollection 代码：

```
using System;
using System.Collections.Concurrent;
using System.Diagnostics;
using System.Linq;
using System.Threading;
using System.Threading.Tasks;

namespace DisruptorTest
{
    public sealed class ValueEntry
    {
        public int Value { get; set; }

        public ValueEntry()
        {
            //   Console.WriteLine("New ValueEntry created");
        }
    }

    //public class ValueAdditionHandler : IEventHandler<ValueEntry>
    //{
    //    public void OnNext(ValueEntry data, long sequence, bool endOfBatch)
    //    {

    //        long microseconds = Program.sw[data.Value].ElapsedTicks / (Stopwatch.Frequency / (1000L * 1000L));
    //        Program.results[data.Value] = microseconds;
    //        //Console.WriteLine("elapsed microseconds = " + microseconds);
    //        //Console.WriteLine("Event handled: Value = {0} (processed event {1}", data.Value, sequence);
    //    }
    //}

    class Program
    {
        public const int length = 10000000;
        public static Stopwatch[] sw = new Stopwatch[length];
        public static long[] results = new long[length];

        static BlockingCollection<ValueEntry> dataItems = new BlockingCollection<ValueEntry>(150);

        static void Main(string[] args)
        {
            for (int i = 0; i < length; i++)
            {
                sw[i] = Stopwatch.StartNew();
            }

            // A simple blocking consumer with no cancellation.
            Task.Factory.StartNew(() =>
            {
                while (!dataItems.IsCompleted)
                {

                    ValueEntry ve = null;
                    try
                    {
                        ve = dataItems.Take();
                        long microseconds = sw[ve.Value].ElapsedTicks / (Stopwatch.Frequency / (1000L * 1000L));
                        results[ve.Value] = microseconds;

                        //Console.WriteLine("elapsed microseconds = " + microseconds);
                        //Console.WriteLine("Event handled: Value = {0} (processed event {1}", ve.Value, ve.Value);
                    }
                    catch (InvalidOperationException) { }
                }
            }, TaskCreationOptions.LongRunning);

            for (int i = 0; i < length; i++)
            {
                var valueToSet = i;

                ValueEntry entry = new ValueEntry();
                entry.Value = valueToSet;

                sw[i].Restart();
                dataItems.Add(entry);

                //Console.WriteLine("Published entry {0}, value {1}", valueToSet, entry.Value);
                //Thread.Sleep(1000);
            }

            // Wait until all events are delivered
            Thread.Sleep(5000);

            long average = 0;
            long minimum = 10000000000;
            int firstFive = 0;
            int fiveToTen = 0;
            int tenToThirty = 0;
            int moreThenThirty = 0;

            // Do not count first 100 items because they could be extremely slow
            for (int i = 100; i < length; i++)
            {
                average += results[i];
                if (results[i] < minimum)
                {
                    minimum = results[i];
                }
                if (results[i] < 5)
                {
                    firstFive++;
                }
                else if (results[i] < 10)
                {
                    fiveToTen++;
                }
                else if (results[i] < 30)
                {
                    tenToThirty++;
                } else
                {
                    moreThenThirty++;
                }
            }
            average /= (length - 100);
            Console.WriteLine("average = {0} minimum = {1} 0-5 = {2}, 5-10 = {3}, 10-30 = {4}, >30 = {5}", average, minimum, firstFive, fiveToTen, tenToThirty, moreThenThirty);
        }
    }
} 
```

破坏者代码：

```
using System;
using System.Diagnostics;
using System.Linq;
using System.Threading;
using System.Threading.Tasks;
using Disruptor;
using Disruptor.Dsl;

namespace DisruptorTest
{
    public sealed class ValueEntry
    {
        public int Value { get; set; }

        public ValueEntry()
        {
            //   Console.WriteLine("New ValueEntry created");
        }
    }

    public class ValueAdditionHandler : IEventHandler<ValueEntry>
    {
        public void OnNext(ValueEntry data, long sequence, bool endOfBatch)
        {

            long microseconds = Program.sw[data.Value].ElapsedTicks / (Stopwatch.Frequency / (1000L * 1000L));
            Program.results[data.Value] = microseconds;
            //Console.WriteLine("elapsed microseconds = " + microseconds);
            //Console.WriteLine("Event handled: Value = {0} (processed event {1}", data.Value, sequence);
        }
    }

    class Program
    {
        public const int length = 10000000;
        public static Stopwatch[] sw = new Stopwatch[length];
        public static long[] results = new long[length];

        private static readonly Random _random = new Random();
        private static readonly int _ringSize = 1024;  // Must be multiple of 2

        static void Main(string[] args)
        {
            for (int i = 0; i < length; i++)
            {
                sw[i] = Stopwatch.StartNew();
            }

            var disruptor = new Disruptor.Dsl.Disruptor<ValueEntry>(() => new ValueEntry(), _ringSize, TaskScheduler.Default);

            disruptor.HandleEventsWith(new ValueAdditionHandler());

            var ringBuffer = disruptor.Start();

            for (int i = 0; i < length; i++)
            {
                var valueToSet = i;
                long sequenceNo = ringBuffer.Next();

                ValueEntry entry = ringBuffer[sequenceNo];

                entry.Value = valueToSet;

                sw[i].Restart();
                ringBuffer.Publish(sequenceNo);

                //Console.WriteLine("Published entry {0}, value {1}", sequenceNo, entry.Value);

                //Thread.Sleep(1000);
            }

            // wait until all events are delivered
            Thread.Sleep(5000);

            long average = 0;
            long minimum = 10000000000;
            int firstFive = 0;
            int fiveToTen = 0;
            int tenToThirty = 0;
            int moreThenThirty = 0;

            // Do not count first 100 items because they could be extremely slow
            for (int i = 100; i < length; i++)
            {
                average += results[i];
                if (results[i] < minimum)
                {
                    minimum = results[i];
                }
                if (results[i] < 5)
                {
                    firstFive++;
                }
                else if (results[i] < 10)
                {
                    fiveToTen++;
                }
                else if (results[i] < 30)
                {
                    tenToThirty++;
                }
                else
                {
                    moreThenThirty++;
                }
            }
            average /= (length - 100);
            Console.WriteLine("average = {0} minimum = {1} 0-5 = {2}, 5-10 = {3}, 10-30 = {4}, >30 = {5}", average, minimum, firstFive, fiveToTen, tenToThirty, moreThenThirty);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:32:02.807

在这里，我修复了您的代码：

```
using System;
using System.Diagnostics;
using System.Linq;
using System.Threading;
using System.Threading.Tasks;
using Disruptor;
using Disruptor.Dsl;

namespace DisruptorTest
{
    public sealed class ValueEntry
    {
        public int Value { get; set; }

        public ValueEntry()
        {
         //   Console.WriteLine("New ValueEntry created");
        }
    }

    class Program
    {
        public const int length = 1000000;
        public static Stopwatch sw;

        private static readonly Random _random = new Random();
        private static readonly int _ringSize = 1024;  // Must be multiple of 2

        static void Main(string[] args)
        {
            sw = Stopwatch.StartNew();

            var disruptor = new Disruptor.Dsl.Disruptor<ValueEntry>(() => new ValueEntry(), _ringSize, TaskScheduler.Default);

            var ringBuffer = disruptor.Start();

            for (int i = 0; i < length; i++)
            {
                var valueToSet = i;
                long sequenceNo = ringBuffer.Next();

                ValueEntry entry = ringBuffer[sequenceNo];

                entry.Value = valueToSet;

                ringBuffer.Publish(sequenceNo);

                //Console.WriteLine("Published entry {0}, value {1}", sequenceNo, entry.Value);

                //Thread.Sleep(1000);
            }

            var elapsed = sw.Elapsed.Miliseconds();
            // wait until all events are delivered
            Thread.Sleep(10000);

            double average = /(double)length;
            Console.WriteLine("average = " + average);
        }
    }
} 
```

这应该正确测试每个项目需要多长时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-28T06:36:34.633

我阅读了 BlockingCollection 代码，您`Console.WriteLine`在 Disruptor 中添加了很多，但在 BlockingCollection 中没有添加，`Console.WriteLine`很慢，它里面有一个锁。

你`RingBufferSize`的太小了，这个影响性能，应该是1024或者更大。

并且`while (!dataItems.IsCompleted)`可能有一些问题，BlockCollection 并不总是处于添加状态，它会导致线程提前结束。

```
Task.Factory.StartNew(() => {
    while (!dataItems.IsCompleted)
    {

        ValueEntry ve = null;
        try
        {
    ve = dataItems.Take();
    long microseconds = sw[ve.Value].ElapsedTicks / (Stopwatch.Frequency / (1000L * 1000L));
    results[ve.Value] = microseconds;

    //Console.WriteLine("elapsed microseconds = " + microseconds);
    //Console.WriteLine("Event handled: Value = {0} (processed event {1}", ve.Value, ve.Value);
        }
        catch (InvalidOperationException) { }
    }
}, TaskCreationOptions.LongRunning);

for (int i = 0; i < length; i++)
{
    var valueToSet = i;

    ValueEntry entry = new ValueEntry();
    entry.Value = valueToSet;

    sw[i].Restart();
    dataItems.Add(entry);

    //Console.WriteLine("Published entry {0}, value {1}", valueToSet, entry.Value);
    //Thread.Sleep(1000);
} 
```

我已经重写了你的代码，Disruptor 比具有多个生产者（10 个并行生产者）的 BlockingCollection 快 10 倍，比具有单个生产者的 BlockingCollection 快 2 倍：

```
using System;
using System.Collections.Concurrent;
using System.Diagnostics;
using System.Threading;
using System.Threading.Tasks;
using Disruptor;
using Disruptor.Dsl;
using NUnit.Framework;

namespace DisruptorTest.Ds
{
    public sealed class ValueEntry
    {
        internal int Id { get; set; }
    }

    class MyHandler : IEventHandler<ValueEntry>
    {
        public void OnEvent(ValueEntry data, long sequence, bool endOfBatch)
        {
        }
    }

    [TestFixture]
    public class DisruptorPerformanceTest
    {
        private volatile bool collectionAddEnded;

        private int producerCount = 10;
        private int runCount = 1000000;
        private int RingBufferAndCapacitySize = 1024;

        [TestCase()]
        public async Task TestBoth()
        {
            for (int i = 0; i < 1; i++)
            {
                foreach (var rs in new int[] {64, 512, 1024, 2048 /*,4096,4096*2*/})
                {
                    Console.WriteLine($"RingBufferAndCapacitySize:{rs}, producerCount:{producerCount}, runCount:{runCount} of {i}");
                    RingBufferAndCapacitySize = rs;
                    await DisruptorTest();
                    await BlockingCollectionTest();
                }
            }
        }

        [TestCase()]
        public async Task BlockingCollectionTest()
        {
            var sw = new Stopwatch();
            BlockingCollection<ValueEntry> dataItems = new BlockingCollection<ValueEntry>(RingBufferAndCapacitySize);

            sw.Start();

            collectionAddEnded = false;

            // A simple blocking consumer with no cancellation.
            var task = Task.Factory.StartNew(() =>
            {
                while (!collectionAddEnded && !dataItems.IsCompleted)
                {
                    //if (!dataItems.IsCompleted && dataItems.TryTake(out var ve))
                    if (dataItems.TryTake(out var ve))
                    {
                    }
                }
            }, TaskCreationOptions.LongRunning);

            var tasks = new Task[producerCount];
            for (int t = 0; t < producerCount; t++)
            {
                tasks[t] = Task.Run(() =>
                {
                    for (int i = 0; i < runCount; i++)
                    {
                        ValueEntry entry = new ValueEntry();
                        entry.Id = i;
                        dataItems.Add(entry);
                    }
                });
            }

            await Task.WhenAll(tasks);

            collectionAddEnded = true;
            await task;

            sw.Stop();

            Console.WriteLine($"BlockingCollectionTest Time:{sw.ElapsedMilliseconds/1000d}");
        }

        [TestCase()]
        public async Task DisruptorTest()
        {
            var disruptor =
                new Disruptor.Dsl.Disruptor<ValueEntry>(() => new ValueEntry(), RingBufferAndCapacitySize, TaskScheduler.Default,
                    producerCount > 1 ? ProducerType.Multi : ProducerType.Single, new BlockingWaitStrategy());
            disruptor.HandleEventsWith(new MyHandler());

            var _ringBuffer = disruptor.Start();

            Stopwatch sw = Stopwatch.StartNew();

            sw.Start();

            var tasks = new Task[producerCount];
            for (int t = 0; t < producerCount; t++)
            {
                tasks[t] = Task.Run(() =>
                {
                    for (int i = 0; i < runCount; i++)
                    {
                        long sequenceNo = _ringBuffer.Next();
                        _ringBuffer[sequenceNo].Id = 0;
                        _ringBuffer.Publish(sequenceNo);
                    }
                });
            }

            await Task.WhenAll(tasks);

            disruptor.Shutdown();

            sw.Stop();
            Console.WriteLine($"DisruptorTest Time:{sw.ElapsedMilliseconds/1000d}s");
        }
    }
} 
```

## 具有共享 ValueEntry 实例的 BlockingCollectionTest（for 循环中没有新的 ValueEntry()）

*   RingBufferAndCapacitySize:64, producerCount:10, runCount:1000000 of 0

    干扰器测试时间：16.962s

    BlockingCollection测试时间：18.399

*   RingBufferAndCapacitySize:512, producerCount:10, runCount:1000000 of 0 DisruptorTest Time:6.101s

    BlockingCollection测试时间：19.526

*   RingBufferAndCapacitySize:1024, producerCount:10, runCount:1000000 of 0

    干扰器测试时间：2.928s

    BlockingCollection测试时间：20.25

*   RingBufferAndCapacitySize:2048, producerCount:10, runCount:1000000 of 0

    干扰器测试时间：2.448s

    BlockingCollection测试时间：20.649

## BlockingCollectionTest 在 for 循环中创建一个新的 ValueEntry()

*   RingBufferAndCapacitySize:64, producerCount:10, runCount:1000000 of 0

    干扰器测试时间：27.374s

    BlockingCollection测试时间：21.955

*   RingBufferAndCapacitySize:512, producerCount:10, runCount:1000000 of 0

    干扰器测试时间：5.011s

    BlockingCollection测试时间：20.127

*   RingBufferAndCapacitySize:1024, producerCount:10, runCount:1000000 of 0

    干扰器测试时间：2.877s

    BlockingCollection测试时间：22.656

*   RingBufferAndCapacitySize:2048, producerCount:10, runCount:1000000 of 0

    干扰器测试时间：2.384s

    BlockingCollection测试时间：23.567

[https://www.cnblogs.com/darklx/p/11755686.html](https://www.cnblogs.com/darklx/p/11755686.html)

# css - 使用 XPath 和 CSS 定位元素

> ID：13334784
> 
> 赞同：1
> 
> 时间：2012-11-11T19:49:58.467
> 
> 标签：css, xpath, selenium

您将如何使用 XPATH 和 CSS 使用其“点击付款历史”文本定位该元素？

```
<html> 
    <head> 
        <title>My Account</title>
    </head>

    <body> 
        <table> 
            <tr><td>John</td></tr>
            <tr><td>Shield</td></tr> 
        </table> 

        <div>Click Payment History</div> 
    </body> 
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:07:34.427

在 CSS 中：

```
div 
```

在 xpath 中：

```
//div 
```

不可维护，但它们适用于您的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:15:59.460

找到 xpath 的一种方法是[Firepath](https://addons.mozilla.org/nl/firefox/addon/firepath/)是 Firebug 的扩展。

# iphone - 将图像数组添加到 UIScrollView ObjectiveC

> ID：13334789
> 
> 赞同：1
> 
> 时间：2012-11-11T19:50:56.903
> 
> 标签：iphone, objective-c, ios, xcode, drag-and-drop

我进行了数周的搜索，终于在 Github 上找到了一个适合我需要的示例。这是一个垃圾拖动示例。我现在已经根据我的需要编辑了这个例子。

我现在只有一个问题。在我的 Scrollview 中，我有 5 张图片，但它们都是一样的。

我想知道如何使每个缩略图成为不同的图像，因此当我将图像从 Scrollview 拖动到顶部的 Imageview 时，它会更改为我从滚动视图中拖动的图像。

基本上我希望我的滚动视图中的不同图像与我所拥有的不同。

我快到了，我被困在完成战斗所需的最后一件事上。

一如既往，我们将不胜感激任何帮助，下面是一些示例图像和我的示例项目的链接。

谢谢你。

[我的样品项目](http://www.blakeloizides.co.za/project.zip)

![在此处输入图像描述](../Images/5ff949ed49e2327ddae155b76cc6581a.png) ![在此处输入图像描述](../Images/f0863c5e1a223f34f814cc742c17242b.png) ![在此处输入图像描述](../Images/564fbaaac37d11451d7d9a54c09947d8.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T20:13:56.503

这就是我所做的：

一。像这样重写类的`- initWithFrame:`方法`GalleryButton`：

```
- (id)initWithFrame:(CGRect)frame imageName:(NSString *)imgName
{
    self = [super initWithFrame:frame];
    if (self) {
        isInScrollview  = YES;

        CGRect myImageRect = CGRectMake(0, 0, 64, 64);
        images = [[UIImageView alloc] initWithFrame:myImageRect];

        // here's the change:
        // instead of a constant name, use the `imgName` parameter
        [images setImage:[UIImage imageNamed:imgName]];
        [self addSubview:images];

        self.backgroundColor = [UIColor blackColor];
        self.layer.borderWidth = 2;
        self.layer.borderColor = [UIColor blackColor].CGColor;
        self.layer.masksToBounds = YES;
        self.layer.cornerRadius = 5;
    }
    return self;
} 
```

然后，像这样重写类的`- addAttachment:`方法`GalleryScrollView`：

```
- (void) addAttachment:(AttachmentItem *)attachment withImageNamed:(NSString *)imgName
{
    // everything stays the same (!), except this line:
    GalleryButton *btnAttachment = [[GalleryButton alloc] initWithFrame:CGRectMake(startX, startY, width, height)];
    // is to be extended to:
    GalleryButton *btnAttachment = [[GalleryButton alloc] initWithFrame:CGRectMake(startX, startY, width, height) imageName:imgName];
    ...
} 
```

然后，在 中`- [HegakaDragAndDropRecycleBinViewController viewDidLoad]`，指定要使用的图像的文件名：

```
[self.gallery addAttachment:item withImageNamed:@"recyclebin"];
[self.gallery addAttachment:item withImageNamed:@"canadian-maple"];
[self.gallery addAttachment:item withImageNamed:@"light-cherry"];
[self.gallery addAttachment:item withImageNamed:@"mozambique-wenge"];
[self.gallery addAttachment:item withImageNamed:@"canadian-maple"]; 
```

结果：

![在此处输入图像描述](../Images/5deb9e583ad4584bd1393b0501f3d69d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:09:17.080

**注意：** *将来，提供您认为与问题特别相关的代码片段对您会有所帮助。发布整个项目和您遇到的问题有点懒惰。你试过什么？在您在这里问之前尝试过什么，什么不起作用？*

在您的`GalleryButton.m`课程中，该`initWithFrame:`方法具有以下代码：

```
CGRect myImageRect = CGRectMake(0, 0, 64, 64);
images = [[UIImageView alloc] initWithFrame:myImageRect];
[images setImage:[UIImage imageNamed:@"light-cherry.png"]];
[self addSubview:images]; 
```

变量名称`images`令人困惑，因为它实际上是**单个**UIImageView，但这是分配按钮图像的位置。

解决方案是：

1.  更改`initWithFrame:`初始化程序以也接受`UIImage`可以传递给`UIImageView`
2.  `GalleryButton`向您的被调用`setImage:(UIImage*)image`或类似方法添加一个新方法，以设置`image`您的`UIImageView`对象。

老实说，如果是我，我会两者都做，除非您不希望在创建按钮后修改该图像，在这种情况下，您应该只实施选项 1。

# php - PHP没有插入MySQL数据库所有语句都在那里

> ID：13334796
> 
> 赞同：0
> 
> 时间：2012-11-11T19:51:37.083
> 
> 标签：php, mysql

我想知道是否有人输入了为什么这个语句没有插入到我的 MySQL 数据库中。它没有显示任何错误，当我手动输入 SQL 语句时，它会插入信息。

```
<?php

$host="mysql16.000webhost.com";
$user_name="a1611480_akaash";
$pwd="*****";
$database_name="a1611480_akaash";
$db=mysql_connect($host, $user_name, $pwd);

$sql = "INSERT INTO mydata VALUES ('dude1', 'dude2', 'dude3', 'dude4', 'dude5')";

mysql_query($sql);

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T19:55:14.337

这是因为 mysql 不知道该 SQL 语句使用哪个数据库。包括`mysql_select_db`.

```
mysql_select_db($database_name); 
```

要在 php 中获取任何类型的错误（致命错误除外），请将您的代码用 try 块括起来

```
try{
    // db code
}catch(Exception $e){
    // something is wrong
    echo "Oh God! I got this ". $e->getMessage();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T19:53:10.657

要查看错误，请执行以下操作：

```
mysql_query($sql) or die("Error:".mysql_error()); 
```

从您的查询中，我假设您有一列并且您想添加多个值所以这可能是格式：

```
$sql = "INSERT INTO mydata VALUES 
        ('dude1'), ('dude2'), ('dude3'), ('dude4'), ('dude5);"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T19:54:50.110

那是因为你没有提到列名 - 见[http://www.w3schools.com/php/php_mysql_insert.asp](http://www.w3schools.com/php/php_mysql_insert.asp) 你也忘了选择数据库 - mysql_select_db("my_db");

因此，您的查询必须类似于“INSERT INTO mydata (column1, column2, column3, column4, column5) VALUES ('dude1', 'dude2', 'dude3', 'dude4', 'dude5')";

编辑：当然科里是对的。我认为这只是一种更好的做法-我总是这样做:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T19:55:11.440

您正在连接到远程主机，您确定您有权这样做吗？这段代码在哪里执行？

输出结果`mysql_error()`会很有用！

# jquery - jQuery：使用删除（）；对于行

> ID：13334797
> 
> 赞同：2
> 
> 时间：2012-11-11T19:51:45.570
> 
> 标签：jquery, removeclass

**我需要删除`<tr>`表格类中呈现页面中的几行，`"form-table"`使用`remove();`** *请参阅下面的注释标记*。

问题是在呈现的页面中还有其他几个具有“form-table”类的表*（为清楚起见，下面未显示其他表）*。这些其他表格中的每一个都有不同的`<h3>`标题。

是否可以针对`<tr>`下表中的最后两行而忽略具有相同类别的其他表`form-table`？可以使用此表的标题来`<tr>`定位这两个吗？`<h3>Name</h3>`

IE：

```
 jQuery(document).ready(function( $ ){
    $("*target <tr>'s here*").remove();

  }); 
```

**渲染标记：**

```
<h3>Name</h3>

<table class="form-table">
    <tr>
        <th><label for="user_login">Username</label></th>
        <td><input type="text" name="user_login" id="user_login" value="subscriber" disabled="disabled" class="regular-text" /> <span class="description">Usernames cannot be changed.</span></td>
    </tr>

<tr>
    <th><label for="first_name">First Name</label></th>
    <td><input type="text" name="first_name" id="first_name" value="subscriber" class="regular-text" /></td>
</tr>

<tr>
    <th><label for="last_name">Last Name</label></th>
    <td><input type="text" name="last_name" id="last_name" value="" class="regular-text" /></td>
</tr>

<!-- Need to display:none or remove the two <tr>'s below: -->

<tr>
    <th><label for="nickname">Nickname <span class="description">(required)</span></label></th>
    <td><input type="text" name="nickname" id="nickname" value="subscriber" class="regular-text" /></td>
</tr>

<tr>
    <th><label for="display_name">Display name publicly as</label></th>
    <td>
        <select name="display_name" id="display_name">
                    <option  selected='selected'>subscriber</option>
                </select>
    </td>
</tr>

<!-- Need to display:none or remove the two <tr>'s above: -->

</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T19:59:24.747

怎么样：

```
$('h3:contains("Name") + table tr:gt(2)') 
```

或者

```
$('h3:contains("Name")').next().find('tr:gt(2)') 
```

编辑：

演示：http: [//jsfiddle.net/kMYY3/1/](http://jsfiddle.net/kMYY3/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T19:57:12.007

您可以使用[:first](http://api.jquery.com/first-selector/)或[nth-child()](http://api.jquery.com/nth-child-selector/)函数来定位特定表，然后您可以使用`gt()`函数来定位所有大于 2 的 TR。

示例 1：

```
// assuming that your target table is the first one among the other tables with the same class
var myTable = $("h3 :first").next(".form-table").find("tr:gt(2)").remove() 
```

示例 2：

```
// assuming that your target table's h3 has the text "Name" inside

var myTable = $("h3:contains('Name')").next(".form-table").find("tr:gt(2)").remove() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T19:55:48.193

关于什么：

```
$('.form-table tr:gt(2)');  //note the index is 0 based 
```

[jQuery gt 选择器](http://api.jquery.com/gt-selector/)

# php - 使用布局时，Zend Framework View Helper 在模块中不可用

> ID：13334799
> 
> 赞同：0
> 
> 时间：2012-11-11T19:51:48.273
> 
> 标签：php, zend-framework, view, module, view-helpers

我开始使用 zend 框架 1.12，但遇到了一个我似乎无法解决的小问题。

到目前为止，我已经完成了应用程序中的所有工作，但现在我想构建一个模块来处理与设置相关的所有内容。

因此，我创建了一个新模块并在其中添加了一个控制器。该模块自动从应用程序中获取布局，这正是我想要的。

在这个布局中，我使用了一个视图助手，它在我加载应用程序文件夹中的控制器/动作时起作用。但是，当我尝试在模块内的控制器周围加载布局时，视图助手不可用。

我希望我说得通，我会感谢你在这方面的帮助！

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T02:43:06.530

如果我理解正确，您需要在 bootstrap 或 application.ini 中设置您的视图助手路径，我在 bootstrap 中进行：

```
 protected function _initView()
    {
        //Initialize view
        $view = new Zend_View();
        //add custom view helper path
        $view->addHelperPath('/../library/Namespace/View/Helper');

        //do more stuff if needed

        //add it to the view renderer
        $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper(
                'ViewRenderer');
        $viewRenderer->setView($view);
        //Return it, so that it can be stored by the bootstrap
        return $view;
    } 
```

还要确保你的模块包含它自己的引导文件，这样可以将资源加载到模块：

```
//at /application/modules/module/bootstrap.php
class Module_Bootstrap extends Zend_Application_Module_Bootstrap
{
    //just an empty class is enough
} 
```

希望这可以帮助

# javascript - Xcode 中非传统 JavaScript 方法的函数列表

> ID：13334805
> 
> 赞同：0
> 
> 时间：2012-11-11T19:52:15.417
> 
> 标签：javascript, xcode

在 xcode 中处理 .js 文件时，方法浏览器工作并列出传统函数。如：

```
function OBj (e){
        for (var i in e) {
            enyo.log("element ", i, " is ", e[i])
        }
    }; 
```

或者...

```
var OBj = function(e) {
        for (var i in e) {
            enyo.log("element ", i, " is ", e[i])
        }
    }; 
```

但是其他模式呢？....例如：

```
Obj.method({

    init: function() {},
    data: function() {},

}) 
```

这就是 xcode 对我来说不足的地方。因此，在这篇问答文章中，我展示了一个我编写的 shell 脚本，以提供我使用的 javascript 模式类型所需的方法导航类型。利用 xcode 中的标记`???`功能，shell 脚本简单地遍历指定文件夹中的所有 .js 文件，并通过模式匹配找出所有符合该模式的方法：

```
init: function() {}, 
```

它注入一个带*注释*的匹配标记，因此您现在将拥有：

```
Obj.method({

//???:init
    init: function() {},
//???:data
    data: function() {},

}) 
```

很高兴地出现在 xcode 的方法下拉列表中：

![在此处输入图像描述](../Images/e6e89290037aea041b24062312ad84cc.png)

* * *

我已提供脚本作为我问题的答案部分。只需复制并粘贴到文件中。将该文件放在 JS 文件所在的文件夹中。从终端`cd`到该文件夹​​并运行 shell 脚本：`./scriptname`

金的！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T19:52:15.417

```
#!/bin/bash
# ***WARNING: BACK UP YOUR FILES BEFORE RUNING THIS SCRIPT ON THEM

# JS function pattern
v1=': function'

# Change these to point to the paths of your own JS files
temp_file='/Users/.../Documents/.../www/.../'
jsfolder='/Users/.../Documents/.../www/.../'

# Do not change anything below unless you know what you doing,
# as it will likely break the script.   
v2="\/\/\?\?\?\:"
temploc='temp_file'
for i in "${jsfolder}"*.js
do
sed -e  's/'"${v2}"'.*//' -e 's/ *\([^: ]*\)'"${v1}"'.*/'"${v2}"'\1\
&/' $i > $temp_file$temploc
mv $temp_file$temploc $i
done 
```

# ruby - 正则表达式的 o 修饰符是什么意思？

> ID：13334807
> 
> 赞同：14
> 
> 时间：2012-11-11T19:52:20.053
> 
> 标签：ruby, regex

Ruby regexp 有一些选项（例如`i`, `x`, `m`, `o`）。`i`例如，表示忽略大小写。

选项是什么`o`意思？在`ri Regexp`中，它表示只`o`执行`#{}`一次插值。但是当我这样做时：

```
a = 'one'  
b = /#{a}/  
a = 'two' 
```

`b`不会改变（它保持不变`/one/`）。我错过了什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-11T19:53:27.327

直接来自[正则表达式的首选源](http://www.regular-expressions.info/ruby.html)：

> `/o`导致`#{...}`特定正则表达式文字中的任何替换只执行一次，即第一次评估它。否则，每次文字生成 Regexp 对象时都会执行替换。

我也可以打开[这个用法示例](http://pleac.sourceforge.net/pleac_ruby/patternmatching.html)：

```
# avoid interpolating patterns like this if the pattern
# isn't going to change:
pattern = ARGV.shift
ARGF.each do |line|
    print line if line =~ /#{pattern}/
end

# the above creates a new regex each iteration. Instead,
# use the /o modifier so the regex is compiled only once

pattern = ARGV.shift
ARGF.each do |line|
    print line if line =~ /#{pattern}/o
end 
```

所以我想这对于编译器来说是一件相当重要的事情，对于被执行多次的**单行。**

# jquery - 意外的令牌：基本点击功能上的非法，jQuery

> ID：13334810
> 
> 赞同：0
> 
> 时间：2012-11-11T19:52:28.400
> 
> 标签：jquery, syntax-error

我只是在做一个非常简单的点击功能，但在第 6 行出现错误。即使我删除了点击功能以外的所有内容 - 仍然是一个错误。该对象肯定在 HTML 中，我已提醒 $("p#backButton") 进行检查。

```
$(document).ready(function() {

    var windowWidth = $(document).width();
    if(windowWidth < 767){
        $("p#backButton").css("display","block");
        $("p#backButton a").click(function(e) {
            e.preventDefault();
            history.back();
            return false;
        });
     }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:12:42.133

我认为您的问题源于`history.back()`在该范围内使用 which 可能未定义。尝试使用`window.history.back()`

还可以尝试将您的代码隔开一点

```
$(document).ready(function() {

    var windowWidth = $(document).width();
    if ( windowWidth < 767 ) {
        $("p#backButton").css("display","block");
        $("p#backButton a").click( function(e) {
            e.preventDefault();
            window.history.back();
            return false;
        });
     }
}); 
```

祝你好运。让我知道发生什么事

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T20:37:49.450

添加：

```
<a href="#back" onclick="history.back(); return false;" title="Go Back">Back</a> 
```

由于内联 javascript 是解决此问题的一种方法 - 这不是一个理想的修复方法，但它是我发现修复它的唯一方法。

# linux - Raspberry Pi/Raspbian 错误上的 Clang？

> ID：13334813
> 
> 赞同：2
> 
> 时间：2012-11-11T19:52:45.120
> 
> 标签：linux, linker, debian, clang, raspberry-pi

当我尝试将 clang 作为我的 C 编译器运行时，出现错误（我认为是链接器错误）

```
Compilation started at Sun Nov 11 14:34:55

make -k 
clang -std=c99 -ggdb  -o0 -Wall -Werror helloworld.c -o helloworld
clang: warning: unknown platform, assuming -mfloat-abi=soft
/usr/bin/ld: cannot find crt1.o: No such file or directory
/usr/bin/ld: cannot find crti.o: No such file or directory
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [helloworld] Error 1

Compilation exited abnormally with code 2 at Sun Nov 11 14:34:56 
```

我实际上重新安装了 Raspbian 图像，以为问题会消失，但它仍然存在。Raspbian 版本是最新的 Raspbian Wheezy 硬浮点 ABI (2012-10-28)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T22:24:16.087

正如您基本上已经发现的那样，已安装的 clang 已无法使用。如果您是通过包管理器安装的，请向分发该包的人投诉，因为他们显然没有费心对其进行测试。

# c# - Sqlparameters - 将它们传递给方法

> ID：13334815
> 
> 赞同：2
> 
> 时间：2012-11-11T19:52:50.563
> 
> 标签：c#, sql, methods, parameters

我有一个像这样的方法：

```
private void SetDataSet(string sqlString, params SqlParameter[] parameters)
    {
        DataSet ds = new DataSet();
        using (SqlConnection conn = new SqlConnection(cs))     
        {
            using (SqlCommand cmd = new SqlCommand())
            {
                cmd.Connection = conn;
                //cmd.CommandType = CommandType.
                cmd.CommandText = sqlString;

                if (parameters != null)
                {
                    foreach (SqlParameter parm in parameters)
                    {
                        cmd.Parameters.Add(parm);
                    }
                }

                if (conn.State == ConnectionState.Closed)
                {
                    conn.Open();
                }
                using (SqlDataAdapter da = new SqlDataAdapter(cmd))
                {
                     cmd.ExecuteScalar();
                }
            }
        }

    } 
```

现在，从另一个名为 testMethod 的方法中，我想用所有需要的参数调用“SetDataSet”。不幸的是，我不知道如何“构造”所需的 sqlparameters 以及稍后如何将信息传递给它们“SetDataSet”方法。

```
private void testMethod()
{
  string sqlString = .... .

  //here should be the code, which will create sql parameters

  //and now we call the SetDataSet with all needed arguments:
  SetDataSet(sqlString, ?!);
} 
```

我正在考虑某种循环，它可以在 testMethod 中创建 sqlparameters 数组（？），然后将其传递给 SetDataSet 方法，但不知道如何实现。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T19:57:39.787

您所要做的就是提供参数。该`params`参数将自动创建数组。

```
 SetDataSet(sqlString, param1, param2, param3, ..., paramN); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:55:24.047

所以你想要做的是这样的：

```
private void testMethod() 
{
    string sqlString = .....

    //here should be the code, which will create sql parameters

    // An varchar(80) parameter called @Name with the value "Chuck".
    SqlParameter paramName = new SqlParameter("@Name", SqlDbType.VarChar, 80);
    paramName.Value = "Chuck";

    // An int parameter called @Age with the value 49.
    SqlParameter paramAge = new SqlParameter("@Age", SqlDbType.Int);
    paramAge.Value = 49;

    // Create more parameters here, as many as you want.
    // You could also create a SqlParameter[] array and send in instead.

    //and now we call the SetDataSet with all needed arguments:
    SetDataSet(sqlString, paramName, paramAge); // just add all parameters one after another.
} 
```

由于您使用的是`params`参数，`SetDataSet(string sqlString, params SqlParameter[] parameters)`因此您可以在参数后添加零或您想要的`sqlString`参数数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T20:00:54.940

您需要创建 SQL 参数吗？

像这样：

```
SqlParameter SqlParm = new SqlParameter("ID", SqlDbType.Int);
SqlParm.Value = 100; 
```

如果您认为您正在使用某种通用方法来处理所有数据库内容，那么您最终将创建一个新层，但无法避免访问数据库的具体细节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T20:33:10.603

您需要创建 SQL 参数吗？

像这样：

```
SqlParameter sqlP1= new SqlParameter("Id", SqlDbType.Int);
sqlP1.Value = 200; 
```

# jpanel - 根据点击交换两个 JLabel

> ID：13334816
> 
> 赞同：1
> 
> 时间：2012-11-11T19:52:51.363
> 
> 标签：jpanel, jlabel, swap

如何使用此代码单击 JPanel 中的一个 JLabel，然后再次单击单独面板中的另一个 JLabel 并交换两个 JLabel？我正在创建一个面板网格，每个面板都包含一个带有图像图标的 JLabel。我想单击一个图标，然后单击另一个面板并交换内容。我究竟做错了什么？

```
package testcomponentat;

import java.awt.Color;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.*;

public class TestComponentAt extends JPanel {
   private static final int ROW_COUNT = 8;
   private static final int W = 60;
   private static final int H = W;
   private static final Dimension PREF_SIZE = new Dimension(W, H);
   protected static final Color SELECTION_COLOR = Color.pink;
   private JPanel selectedPanel = null;
   private Color originalColor = null;
   private static int r, c = 0;
   private static final ImageIcon im1 = new ImageIcon("image1.jpg");
   private static final ImageIcon im2 = new ImageIcon("image2.jpg");
   private static boolean swap = false;
   private static JPanel panel1, panel2;

   public TestComponentAt() {
      setLayout(new GridLayout(ROW_COUNT, ROW_COUNT, 1, 1));
      setBackground(Color.black);

      for (int i = 0; i < ROW_COUNT * ROW_COUNT; i++) {
        JPanel panel = new JPanel();
        JLabel jlab = new JLabel();
        String name = String.format("[%d, %d]", i / ROW_COUNT, i % ROW_COUNT);
        panel.setName(name);
        if (i == 0) {
           originalColor = panel.getBackground();
        }

        r = i % ROW_COUNT;
        c = i  % ROW_COUNT;

        if(c == 1){ jlab.setIcon(im1); }
        if(c == 6){ jlab.setIcon(im2); }

        panel.add(jlab);
        panel.setPreferredSize(PREF_SIZE);
        add(panel);
      }

      addMouseListener(new MouseAdapter() {
         @Override
         public void mousePressed(MouseEvent e) {
            if(swap == false){
                 panel1 = (JPanel) getComponentAt(e.getPoint());
                 //panel1 = (JPanel) e.getComponent();
                if (panel1 == null || panel1 == TestComponentAt.this) {
                   return;
                }
                if (selectedPanel != null) {
                   selectedPanel.setBackground(originalColor);
                   //selectedPanel.removeAll();
                   selectedPanel.revalidate();
                   selectedPanel.repaint();
                }
                selectedPanel = panel1;
                selectedPanel.setBackground(SELECTION_COLOR);
                selectedPanel.add(new JLabel(selectedPanel.getName()));
                selectedPanel.revalidate();
                selectedPanel.repaint();
                swap = true;
            }
            else{
                JPanel temp = new JPanel();
                panel2 = (JPanel) getComponentAt(e.getPoint());
                if (panel2 == null || panel2 == TestComponentAt.this) {
                   return;
                }
                if (selectedPanel != null) {
                   selectedPanel.setBackground(originalColor);
                   //selectedPanel.removeAll();
                   selectedPanel.revalidate();
                   selectedPanel.repaint();
                 }
                selectedPanel = panel2;
                selectedPanel.setBackground(SELECTION_COLOR);
                selectedPanel.add(new JLabel(selectedPanel.getName()));
                temp = panel1;
                panel1 = panel2;
                panel2 = panel1;
                selectedPanel.revalidate();
                selectedPanel.repaint();
                swap = false; 
            }
         }
      });
   }

   private static void createAndShowGui() {
      JFrame frame = new JFrame("TestComponentAt");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(new TestComponentAt());
      frame.pack();
      frame.setLocationRelativeTo(null);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
          @Override
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:56:55.703

我编写了自己的代码来尝试弄清楚您要做什么...这是我想出的，希望对您有所帮助...尽管我只是注意到这是一个月前发布的...

Java 文件名“SplashScreen.java”：

```
import java.awt.*;
import javax.swing.*;
import javax.swing.event.*;
import java.awt.event.*;

public class SplashScreen extends JFrame {

JPanel[] p1 = new JPanel[9];
JPanel mainP = new JPanel();
JLabel[] l1 = new JLabel[9];
boolean[] l1Clicked = new boolean[9];
boolean bufferFull = false;
String temp;

public SplashScreen() {
    createSplash();
}

public void createSplash() {
    mainP.setLayout(new FlowLayout());
    mouseHandler mh = new mouseHandler();
    for (int i = 0; i < p1.length; i++) {
        l1[i] = new JLabel("" + i);
        p1[i] = new JPanel();
        p1[i].add(l1[i]);
        p1[i].setBorder(BorderFactory.createLineBorder(Color.BLACK, 2));
        p1[i].addMouseListener(mh);
        l1Clicked[i] = false;
        mainP.add(p1[i]);
    }
    add(mainP);
    //add(p2);
}

public class mouseHandler extends MouseAdapter {

    @Override
    public void mousePressed(MouseEvent e) {
        if (e.getSource() == p1[0]) {
            if (bufferFull == false) {
                temp = l1[0].getText();
                bufferFull = true;
                l1Clicked[0] = true;
            } else {
                for (int i = 0; i < l1Clicked.length; i++) {
                    if (l1Clicked[i] == true) {
                        l1[i].setText(l1[0].getText());
                        l1Clicked[i] = false; 
                        bufferFull = false;
                    }

                }
                l1[0].setText(temp);

            }
        } else if (e.getSource() == p1[1]) {
            if (bufferFull == false) {
                temp = l1[1].getText();
                bufferFull = true;
                l1Clicked[1] = true;
            } else {
                for (int i = 0; i < l1Clicked.length; i++) {
                    if (l1Clicked[i] == true) {
                        l1[i].setText(l1[1].getText());
                        l1Clicked[i] = false;
                        bufferFull = false;
                    }
                }
                l1[1].setText(temp);

            }
        } else {
            System.out.println("You get the point");
        }

    }
}
} 
```

Java 文件名“ImageTest.java”：

```
import javax.swing.JFrame;

public class ImageTest extends JFrame {

public static void main(String[] args) {
    SplashScreen ss = new SplashScreen();
    ss.setVisible(true);
    ss.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    ss.setSize(500,500);
}
} 
```

工作正常！:) 简单地制作了两个数组。一个用于 JPanel，另一个用于 JLabels。您为每个 JPanel 添加一个鼠标侦听器。现在，当用户单击一个时，它将检查之前是否单击过另一个，如果没有，它会获取标签文本并将其添加到临时字符串中。运行它，看看它是怎么回事

# magento - Magento：不同商店视图的不同货币

> ID：13334821
> 
> 赞同：0
> 
> 时间：2012-11-11T19:53:10.610
> 
> 标签：magento, currency

我有几个商店视图（德国，爱尔兰，瑞士......），所有这些都应该有不同的货币。但是，当我在配置中的商店视图级别设置正确的*默认货币时 - 没有任何反应。*我希望有人熟悉这个问题。谢谢！

如果有人能告诉我在哪里可以找到在产品页面中打印出货币符号的代码行，它也会对我有所帮助！

*更新我在 /app/design/frontend/default/THEME/template/catalog/product 中找到了 list.phtml，可以找到以下行：

```
 <?php echo $this->getPriceHtml($_product, true) ?> 
```

有谁知道这个函数（getPriceHtml）在哪里？

//@Bixi：是的，我做到了。

//@Piotr：谢谢，可惜函数：

```
public function getPriceHtml($product, $displayMinimalPrice = false, $idSuffix='')
{
    return $this->_getPriceBlock($product->getTypeId())
        ->setTemplate($this->_getPriceBlockTemplate($product->getTypeId()))
        ->setProduct($product)
        ->setDisplayMinimalPrice($displayMinimalPrice)
        ->setIdSuffix($idSuffix)
        ->setUseLinkForAsLowAs($this->_useLinkForAsLowAs)
        ->toHtml();
} 
```

没有帮助我找到错误。定义显示哪种货币的函数在哪里？我已经快要放弃了……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:27:00.660

这种方法在`Mage_Catalog_Block_Product_Abstract`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T21:36:32.713

也可以查看中的方法`convertPrice`。`Mage_Core_Model_Store`通常价格转换由`Zend_Currency`

# google-apps-script - 根据第一列的访问更新第二列

> ID：13334824
> 
> 赞同：0
> 
> 时间：2012-11-11T19:53:32.443
> 
> 标签：google-apps-script

如果更改了 I 或 J 列中的任何一个，我需要将当前日期和时间（基于单独的行）放在我的 google docs 电子表格的 K 列中。这是我第一次尝试使用谷歌脚本。

我找到了一个可以计算时间的函数（我希望我能弄清楚如何计算日期），但我不知道如何检查单元格中的更改并更新其他单元格。因此，例如，如果第 10 行的 I 或 J 列发生变化，则第 10 行的 K 列应该获取当前日期和时间。

```
function myFunction() {
  var d = new Date();
  var timeStamp = d.getTime();  // Number of ms since Jan 1, 1970

  // OR:

  var currentTime = d.toLocaleTimeString(); // "12:35 PM", for instance
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:13:25.783

您可以试一试 - 它使用字符串格式将当前日期设置为正确的格式（您可以根据需要进行调整）。需要注意的一件重要事情：无论您在此处做什么，该值都将根据您在电子表格本身中指定的任何格式显示。因此，如果您什么都不做，结果将看起来像传统的日期时间表示。**如果您希望它以您指定的格式出现，您可以做两件事：1.) 使用电子表格的格式**菜单将整列转换为文本；或 2.) （我的选择）在你写的值前面加上 a `'`，这实际上会将它变成一个字符串（这就是在下面的代码中所做的）。希望这可以帮助。

```
function onEdit() {
  var s = SpreadsheetApp.getActiveSheet();
  // This was "MySheet" for me - change to whichever sheet you want to test
  if( s.getName() == "MySheet" ) {
    var r = s.getActiveCell();
    // Check if the column is either I or J
    var currColumn = r.getColumn();
    if( currColumn == 9 || currColumn == 10) {
      // If so, set dateCell = the current row at column J
      var dateCell = s.getRange(r.getRow(), 11);
      // Format the current date into datetime format (adjust to display how you want)
      var dateTime = Utilities.formatDate(new Date(), "GMT-8", "MMM-dd-yyyy h:mm a");
      // Set the cell
      dateCell.setValue("'" + dateTime);
    }
  }
}; 
```

# ruby - 通过 telnet/ssh 实现 nCurses

> ID：13334827
> 
> 赞同：2
> 
> 时间：2012-11-11T19:53:59.460
> 
> 标签：ruby, telnet, ncurses, curses, tty

我目前正在尝试实现一个小型 telnet 服务器，它在来自客户端的连接上生成一个 PTY，并将一个小型 nCurses 应用程序的输出传输到客户端。我在 ruby​​ 工作，但问题与语言无关。我的用例不需要应用程序的用户登录用户帐户，因此我不希望将屏幕的正确传输委托给 telnetd 等系统工具。

给定 TCP 连接，通过 telnet 或 ssh 传输文本 nCurses 接口的要求是什么？为了确保客户端的屏幕刷新正确呈现应用程序，需要哪些类型的缓冲或编码？这显然是在典型的 ssh 会话期间处理的，但是它是如何完成的？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-30T15:31:04.930

您需要设置 TERM、LINES 和 COLUMNS 环境变量（您可以通过[NVT 协议](http://www.hw-group.com/support/nvt/index_en.html)获得正确的值）。然后您就可以开始并简单地生成一个 ncurses 应用程序（使用您的 PTY，因为它显然是标准输入/标准输出）。您不需要缓冲或以其他方式篡改字符流（在您的 NVT 实现中除外）。

# java - Hibernate 抛出 MultipleBagFetchException

> ID：13334831
> 
> 赞同：15
> 
> 时间：2012-11-11T19:54:20.640
> 
> 标签：java, hibernate, jpa, jakarta-ee, jpql

我想在我的存储库层中有一个选项来急切加载实体，所以我尝试添加一个应该急切加载具有所有关系的问题实体的方法，但它会抛出 MultipleBagFetchException。我怎样才能解决这个问题？我正在使用休眠 4.16。

```
@NamedQuery(name = Question.FIND_BY_ID_EAGER, query = "SELECT q FROM Question q LEFT JOIN FETCH q.answers LEFT JOIN FETCH q.categories LEFT JOIN FETCH q.feedback LEFT JOIN FETCH q.participant WHERE q.id = :id"), 
```

如何获得最初延迟加载的问题对象，以便急切加载所有关系？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-11T20:30:34.823

这是 Hibernate 中的一个相当讨厌的问题，实际上是一般的 ORM。

发生的情况是许多（获取）连接导致创建一个相当大的笛卡尔积。即永远其他连接新列和新行出现在结果中，导致（相当）大的“方形”结果。

Hibernate 需要从这个表中提取一个图形，但它不够聪明，无法将正确的列与正确的实体匹配。

例如

假设我们有结果

```
A B C
A B D 
```

需要变成：

```
 A
 |
 B
 /\
C  D 
```

Hibernate 可以从主键和一些编码魔法中推断出图形必须是什么，但实际上它需要明确的帮助才能实现这一点。

一种方法是在关系上指定 Hibernate 特定`@IndexColumn`或 JPA 标准`@OrderColumn`。

例如

```
@Entity
public class Question {

    @ManyToMany
    @JoinTable(
        name = "question_to_answer",
        joinColumns = @JoinColumn(name = "question_id"),
        inverseJoinColumns = @JoinColumn(name = "answer_id")
    )
    @IndexColumn(name = "answer_order")
    private List<Answer> answers;

    // ...
} 
```

在这个例子中，我使用了一个带有额外列的连接表`answer_order`。通过此列，每个问题/答案关系都有一个唯一的序号，Hibernate 可以区分结果表中的条目并创建所需的对象图。

顺便说一句，如果它涉及多个实体，那么使用如此多的急切连接可能会导致结果集比您根据所涉及的实体数量所想象的要大得多。

进一步阅读：

*   [Hibernate 异常 - 同时取多个包 1](http://blog.eyallupu.com/2010/06/hibernate-exception-simultaneously.html)
*   [Hibernate Exception - 同时取多个包 2](http://www.jroller.com/eyallupu/entry/hibernate_exception_simultaneously_fetch_multiple)
*   [解决同时提取多个包 - 使用 @IndexColumn](http://www.jroller.com/eyallupu/entry/solving_simultaneously_fetch_multiple_bags)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-11-12T19:12:54.423

Hibernate 不允许获取多个包，因为这会生成[笛卡尔积](http://en.wikipedia.org/wiki/Cartesian_product)，并且对于在 Hibernate 术语中称为**baggs**的无序列表，即使基础集合没有那些重复的行，这也会导致重复条目。因此，Hibernate 只是在编译 JPQL 查询时阻止了这种情况。

现在，您会发现很多答案、博客文章、视频或其他资源告诉您在收藏中使用 a`Set`而不是 a `List`。

**这是可怕的建议。不要那样做！**

使用`Sets`而不是`Lists`将使`MultipleBagFetchException`消失，但笛卡尔积仍然存在。

## 正确的修复

`JOIN FETCH`而不是在单个 JPQL 或 Criteria API 查询中使用多个：

```
List<Post> posts = entityManager
.createQuery(
    "select p " +
    "from Post p " +
    "left join fetch p.comments " +
    "left join fetch p.tags " +
    "where p.id between :minId and :maxId", Post.class)
.setParameter("minId", 1L)
.setParameter("maxId", 50L)
.getResultList(); 
```

您可以执行以下技巧：

```
List<Post> posts = entityManager
.createQuery(
    "select distinct p " +
    "from Post p " +
    "left join fetch p.comments " +
    "where p.id between :minId and :maxId ", Post.class)
.setParameter("minId", 1L)
.setParameter("maxId", 50L)
.setHint(QueryHints.PASS_DISTINCT_THROUGH, false)
.getResultList();

posts = entityManager
.createQuery(
    "select distinct p " +
    "from Post p " +
    "left join fetch p.tags t " +
    "where p in :posts ", Post.class)
.setParameter("posts", posts)
.setHint(QueryHints.PASS_DISTINCT_THROUGH, false)
.getResultList(); 
```

只要您使用 最多获取一个集合`JOIN FETCH`，就可以了。通过使用多个查询，您将避免笛卡尔积，因为任何其他集合，但第一个集合是使用辅助查询获取的。

# php - 登录时更改语言

> ID：13334832
> 
> 赞同：2
> 
> 时间：2012-11-11T19:54:21.307
> 
> 标签：php, symfony, fosuserbundle

*   Symfony 2.1.3-dev
*   SonataUserBundle
*   SonataAdminBundle
*   JMSI18nRoutingBundle

默认情况下，语言是法语，但我启用了“en”

我安装了这个捆绑包，大多数事情都很好。

但我想做以下事情：

*   用户 XXX (SonataUserBundle) 在“locale”字段中具有值“en”
*   当该用户登录时，我想以英文显示页面。
*   用户不必手动切换。

我认为这应该在认证过程中完成。

问题是 SonataUserBundle（基于 FOSUser）不进行身份验证（见[这里](https://stackoverflow.com/questions/10531129/fos-user-bundle-authentication)）

所以我尝试这样做[，](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html)但肯定有一些配置问题。

将 wsse_secured 应用于整个站点时：

```
wsse_secured:
    pattern:   ^/
    wsse:      true 
```

我收到以下错误：**在 SecurityContext 中找不到令牌。**

将匿名添加到我的 config.yml 时：

```
firewalls:
    ....
    main:
        pattern: ^/
        wsse:      true
        anonymous:       true 
```

我可以访问主页，但是在尝试登录时出现此错误： **您必须在安全防火墙配置中使用 form_login 配置要由防火墙处理的检查路径。**

为 FOS 添加检查路径时，它可以工作，但系统不能与我的 wsse-provider 一起工作（我在 WsseProvider.php 中添加了代码让我知道）

所以我的问题是：我怎样才能得到这个 WSSE 身份验证的工作。我严格按照文档中的指示进行操作。

**编辑 ：**

我可能通过在自己的包中实现 wsse 安全文件而犯了错误。现在我把它移到奏鸣曲用户包，我得到以下错误：

> ErrorException：可捕获的致命错误：传递给 Application\Sonata\UserBundle\Security\Authentication\Provider\WsseProvider::__construct() 的参数 1 必须实现接口 Symfony\Component\Security\Core\User\UserProviderInterface，给定字符串，在..中调用\app\cache\dev\appDevDebugProjectContainer.php 在第 4413 行并在 ..\src\Application\Sonata\UserBundle\Security\Authentication\Provider\WsseProvider.php 第 17 行中定义

我在 WsseProvider.php 中的 UserProviderInterface 有什么问题：

```
<?php

namespace Application\Sonata\UserBundle\Security\Authentication\Provider;

use Symfony\Component\Security\Core\Authentication\Provider\AuthenticationProviderInterface;
use Symfony\Component\Security\Core\User\UserProviderInterface;
use Symfony\Component\Security\Core\Exception\AuthenticationException;
use Symfony\Component\Security\Core\Exception\NonceExpiredException;
use Symfony\Component\Security\Core\Authentication\Token\TokenInterface;
use Application\Sonata\UserBundle\Security\Authentication\Token\WsseUserToken;

class WsseProvider implements AuthenticationProviderInterface
{
    private $userProvider;
    private $cacheDir;

    public function __construct(UserProviderInterface $userProvider, $cacheDir)
    {
        $this->userProvider = $userProvider;
        $this->cacheDir     = $cacheDir;
    }
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:12:51.390

我用一个简单的 KernelRequestListener 解决了这个问题：

```
<?php
namespace ACME\DemoBundle\Listener;

use Symfony\Component\HttpKernel\Event\GetResponseEvent;
use Symfony\Component\DependencyInjection\ContainerInterface;

class RequestListener
{
protected $container;

public function __construct(ContainerInterface $container)
{
    $this->container = $container;
}

public function onKernelRequest(GetResponseEvent $event)
{
    $userlocale = null;
    $request = $event->getRequest();
    $user = $this->container->get('security.context')->getToken()->getUser();

    if (!is_object($user)) {
        return;
    }

    $userlocale = $user->getLocale();
    if($userlocale !== NULL AND $userlocale !== '')
    {
        $request->setLocale($userlocale);
    }
}
} 
```

在 Acme/Demo/Resources/service.yml 中注册服务：

```
ACME.demo.listener.request:
      class: ACME\DemoBundle\Listener\RequestListener
      arguments: [ @service_container ]
      tags:
        - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest } 
```

我在那里找到的其他解决方案：[这里](https://groups.google.com/forum/#!topic/sonata-users/FOf0J5hfK6Q)

# .net - DotNet.Highcharts 添加另一个系列

> ID：13334835
> 
> 赞同：1
> 
> 时间：2012-11-11T19:54:35.750
> 
> 标签：.net, highcharts

假设我已经创建了图表，并且正在尝试向其中添加另一个系列。

我有以下代码用于设置第一个系列。这是一个返回字符串的 WebMethod，它工作得很好：

```
 .SetSeries(new Series
        {

          Data = new Data(new object[] {FrequencyAnalysisWS.Calculate(TextBox1.Text)})

        }) 
```

但我不知道如何在这个系列旁边添加另一个系列。

到目前为止，它看起来像这样： http: [//postimage.org/image/8ydmck507/](http://postimage.org/image/8ydmck507/)

但我想要这样的东西（每个字母两列）：[http ://www.highcharts.com/demo/column-basic](http://www.highcharts.com/demo/column-basic)

感谢帮助 ：））

# c# - c# WebRequest不会发布整个长度的数据

> ID：13334838
> 
> 赞同：0
> 
> 时间：2012-11-11T19:54:43.603
> 
> 标签：c#, php, post, httpwebrequest, webrequest

我目前遇到问题。我正在尝试将我的数据发布到 PHP 文档，但它没有获得全部价值。它在中间的某个地方停止发布。

有谁知道问题出在哪里？字节数组的长度为 7401。这不能太长了吧？

我的代码如下：

```
public string RecieveData(string url, string postData = "")
    {

            WebRequest request = WebRequest.Create(url);
            // If required by the server, set the credentials.

            NetworkCredential nc = new NetworkCredential("user", "pass");
            Stream dataStream;  

            if (postData != "")
            {
                // Set the Method property of the request to POST.
                request.Method = "POST";
                // Create POST data and convert it to a byte array.string postData = "This is a test that posts this string to a Web server.";
                byte[] byteArray = Encoding.UTF8.GetBytes(postData);
                // Set the ContentType property of the WebRequest.
                request.ContentType = "application/x-www-form-urlencoded";
                // Set the ContentLength property of the WebRequest.
                request.ContentLength = byteArray.Length;
                // Get the request stream.
                dataStream = request.GetRequestStream();
                // Write the data to the request stream.
                dataStream.Write(byteArray, 0, byteArray.Length);
                // Close the Stream object.
                dataStream.Close();
            }

            request.Credentials = nc;
            // Get the response.
            HttpWebResponse response = (HttpWebResponse)request.GetResponse();
            // Display the status.
            Console.WriteLine(response.StatusDescription);
            // Get the stream containing content returned by the server.
            dataStream = response.GetResponseStream();
            // Open the stream using a StreamReader for easy access.
            StreamReader reader = new StreamReader(dataStream);
            // Read the content. 
            string responseFromServer = reader.ReadToEnd();
            // Display the content.
            Console.WriteLine(responseFromServer);
            // Cleanup the streams and the response.
            reader.Close();
            dataStream.Close();
            response.Close();

            return responseFromServer;
        /*
        }
        catch (Exception)
        {
            MessageBox.Show("Er is iets fout gegaan met verbinden");
            return "";
        }
        */

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T00:29:21.783

7401不会太长。

我的猜测是您发布的数据不是完全的 URL 编码的，例如字节数组中的一个字符会导致 PhP 解析器停止。确保您正在查看原始数据（例如使用 Wireshark）。

# c++ - Boost shared_ptr 的嵌入式引用计数

> ID：13334840
> 
> 赞同：1
> 
> 时间：2012-11-11T19:54:49.823
> 
> 标签：c++, boost, smart-pointers

我喜欢 Boost 的 smart_ptr 功能以及与 and 相互转换的能力`shared_ptr`，`weak_ptr`但是由于引用计数不包含在指向的类本身中，因此以下代码不起作用（而且它不应该）。

```
A *a = new A;
shared_ptr<A> aPtr1(a);

{
    shared_ptr<A> aPtr2(a);

    // The reference counts of aPtr1 and aPtr2 are both 1.
}   // At this point, `a` is destructed by aPtr2.

aPtr1->foo();   // And... SIGTERM 
```

我相信[JUCE](http://www.rawmaterialsoftware.com/about.php)框架有这个功能。[[`ReferenceCountedObject`](http://www.rawmaterialsoftware.com/juce/api/classReferenceCountedObject.html)和[`ReferenceCountedObjectPtr`](http://www.rawmaterialsoftware.com/juce/api/classReferenceCountedObjectPtr.html)] 但是，我宁愿在我的应用程序中使用 Boost。是否可以允许 Boost smart_ptrs 在指向的类而不是私有`boost::detail::shared_count`实例中查找引用计数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:08:33.363

[boost::intrusive_ptr](http://www.boost.org/doc/libs/1_52_0/libs/smart_ptr/intrusive_ptr.html)可能符合您的要求。

但是要注意，对于 shared_ptr，您应该按如下方式构造它们：

```
shared_ptr<A> aPtr1 = boost::make_shared<A>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T20:11:01.467

简单的解决方案：

```
A *a = new A;
shared_ptr<A> aPtr1(a);
{
    // construct new shared pointer from old one.
    shared_ptr<A> aPtr2(aPtr1);
}
aPtr1->foo(); 
```

如果您想要更复杂的东西，请参阅[http://www.boost.org/libs/smart_ptr/enable_shared_from_this.html](http://www.boost.org/libs/smart_ptr/enable_shared_from_this.html)：

> 标题`<boost/enable_shared_from_this.hpp>`定义了类模板`enable_shared_from_this`。它用作允许`shared_ptr`从成员函数中获取当前对象的基类。

* * *

**编辑：**我应该提到`enable_shared_from_this`推导有一些不幸的问题。但是，以下适用于 c++11；我没有尝试使用 boost，但我想它也应该在那里工作。我认为这有点骇人听闻。使用 shared_ptr 时使用原始指针必然会以泪水告终：

```
struct X : std::enable_shared_from_this {
  /* stuff */
};

struct Y : X {
  /* stuff */
  void yonly() {};
};

int main() {
  Y* y = new Y;
  shared_ptr<Y> sy(y);
  sy->yonly();
  {
    auto sy2 = std::shared_ptr<Y>(y->shared_from_this(), y);
    sy2->yonly();
  } 
  std::cout << "Block ended" << std::endl;
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T20:41:16.517

这不是异常安全的：

```
// call this as in shared_ptr<T> foo = create_intrusive_shared( new T(blah) );
// This takes ownership of the pointer you pass it.
template<typename T>
std::shared_ptr<T> create_intrusive_shared( T* t )
{
  auto retval = std::shared_ptr<T>( t, []( T* cleanup )
  {
    if (cleanup)
      cleanup->RemoveRef();
  });
  return retval;
}

// Call this if you have an existing instance of T, whose ownership is being
// maintained elsewhere.  Do not call it with new T() as an argument, unless
// new instances of T are created with a 0 ref count
template<typename T>
std::shared_ptr<T> make_intrusive_shared( T* t )
{
  if (t)
    t->AddRef();
  auto retval = create_intrusive_shared(t);
  return retval;
} 
```

使它们异常安全需要更多的工作。您将需要重新实现，但使用清理功能`make_shared`标记结果。`shared_ptr`

# html - Joomla H1/H2标签

> ID：13334841
> 
> 赞同：0
> 
> 时间：2012-11-11T19:54:50.977
> 
> 标签：html, joomla, html-heading

谁能向我解释一下为什么 Joomla 3.0 中标题的标题标签是 H2 而不是 H1？

还有谁知道如何改变这个？考虑到没有 H1 标签，但是一旦您使用 H2 放置子标题，这对旧的 SEO 肯定没有好处？

我搜索了全局配置和谷歌，这适用于文章标题和菜单标题

![在此处输入图像描述](../Images/1f107351202f62a1b3d5edbc57dcd27b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:34:11.750

页面标题为 H1。页面标题可以在任何菜单项中设置，或者有时会退回到令人讨厌的默认值，如联系人。

# java - 如何使这种方法更有效？

> ID：13334847
> 
> 赞同：1
> 
> 时间：2012-11-11T19:55:29.107
> 
> 标签：java, loops, for-loop

所以我正在编写一个名为`getThanksgiving`. 它按原样工作，并且是更大课程的一部分，但我需要有关如何提高效率的建议。该`getWeekDay`方法只返回用户输入的年份 11 月 1 日是星期几。

```
public String getThanksgiving(){
String a = getWeekDay(11, 1);
int offset = 0;

    if(a.equals("Friday")){
    offset = 7;
    }

    if(a.equals("Saturday")){
    offset = 6;
    }

    if(a.equals("Sunday")){
    offset = 5;
    }

    if(a.equals("Monday")){
    offset = 4;
    }

    if(a.equals("Tuesday")){
    offset = 3;
    }

    if(a.equals("Wednesday")){
    offset = 2;
    }

    if(a.equals("Thursday")){
    offset = 1;
    }   

 int date = 21 + offset;
 thanksgiving = "Thursday, November " + date; 

 return thanksgiving;
} 
```

我尝试将其重写为 for 循环，但它不起作用。

```
public String getThanksgiving(){
String a = getWeekDay(11, 1);
int offset = 8;

String[] wTable = {"Friday", "Saturday", "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday"};
    for(int i = 1; i < 8; i++){
        if(a.equals(wTable[i - 1])){
        offset --; 
        }
    }
 } 
```

此外，偏移和添加 21 的想法只是我的老师希望我们做的事情。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:57:45.780

你可以使用开关盒

喜欢

```
switch(a )

{
   case "Monday":
    offset = 4;
    break;

  case "Tuesday":
    offset = 3;
    break;

} 
```

参考

```
switch(n)
{
case 1:
  execute code block 1
  break;
case 2:
  execute code block 2
  break;
default:
  code to be executed if n is different from case 1 and 2
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T21:03:53.163

我不认为你可以让它“更高效”（即运行时性能）。如果你想让你的代码~~更具可读性~~更短，我想你快到了

```
String[] wTable = {null, "Thursday", "Wednesday", "Tuesday", "Monday", "Sunday", "Saturday", "Friday"};
for(int i = 1, n = wTable.lenght; i < n; i++) {
    if(a.equals(wTable[i])){
        offset = i;
        break; 
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T22:09:48.450

为了专门解决您关于“如何使这种方法更有效”的问题，需要注意的一点是，`if`即使在您已经找到解决方案的情况下，该方法也会评估每个语句。使用'bare bone' java if's 你可以添加一个条件来检查何时以这种方式找到这一天：

```
int offset = 0;
boolean found = false;
if(!found && a.equals("Friday")){
    offset = 7;
    found = true;
}

if(!found && a.equals("Saturday")){
    offset = 6;
    found = true;
} 
```

由于`&&`(and) 运算符的快捷评估，此标志将略微减少运行时间，仅执行字符串比较直到找到匹配项。`break`当您找到匹配的元素时，您可以使用 for 和 using 来实现类似的性能结果。

更好的选择是使用 Map 数据结构：

```
Map<String, Integer> daysByOffset = new HashMap<String,Integer>();
// this 'setup' part you only do once
daysByOffset.put("Friday", 7);
daysByOffset.put("Saturday", 6);
... 
```

然后查找部分非常有效，因为在 hashmap 中查找是 O(1)：

```
int offset = daysByOffset.get(day); 
```

一个优雅的替代方案是使用封装偏移信息的枚举：

```
public enum DaysWithOffset {
    FRIDAY(7), SATURDAY(6),..., THURSDAY(1);
    private final offset;
    private DaysWithOffset(int offset) {
        this.offset = offset;
    }

    public int getOffset() {
        return offset;
    }
} 
```

枚举定义后，每个枚举常量都会包含相应的偏移量信息：

```
FRIDAY.getOffset() // = 7 
```

您可以通过从提供的 String 解析枚举并从中询问偏移值来计算偏移量：

```
...
String a = getWeekDay(11, 1);
int offset = DaysWithOffset.valueOf(day.toUpperCase()).getOffset();
... 
```

回到哪个选项更有效的问题，map 和 enum 都有 O(1) 查找，（通过优化的内部枚举字典，枚举查找稍微好一点。然而，枚举操作需要 toUpperCase()，而地图没有）这两个选项的性能都比 if 列表（原始版本）或 for 循环要好得多。

我包含这些选项是为了让答案完整，也让您可以“先睹为快”Java 语言提供的可能性。

现在是一个预告：如果你在 Scala 中这样做，你会写这样的东西： val daysByOffset = Map("Friday" -> 7, "Saturday" -> 6,...,"Thursday" ->1) def ThanksGiving(day:String):String = "11 月星期四" + (daysByOffset(day)+21)

如果我今天学习一门语言，那一定是 Scala。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T22:15:06.060

这个怎么样？

```
private final static Map<String, int> dayMap = new HashMap<String,int>() 
{
dayMap.put("Monday", 0);
// do for the rest
};

in your method:

public String getThanksgiving(){
    String a = getWeekDay(11, 1);
    //do a lookup
    int result = dayMap.get(a);
    // do somthing with it. and return
    return "blah "+ result;
} 
```

# django - django loaddata DeserializationError: [u"'127' value must be either None, True or False."]

> ID：13334849
> 
> 赞同：1
> 
> 时间：2012-11-11T19:55:52.493
> 
> 标签：django, django-database

尝试加载数据库时，我不断收到以下回溯。我在我的生产服务器上做了一个`./manage.py dumpdata appname data.json`然后在本地尝试运行`./manage.py loadata`

```
Problem installing fixture 'donor.json': Traceback (most recent call last):
  File "/Library/Python/2.7/site-packages/django/core/management/commands/loaddata.py", line 190, in handle
    for obj in objects:
  File "/Library/Python/2.7/site-packages/django/core/serializers/json.py", line 47, in Deserializer
    raise DeserializationError(e)
DeserializationError: [u"'127' value must be either None, True or False."] 
```

在我的模型中，我所有的布尔字段都是 NullBooleanField，设置了 blank=True,null=True。我不明白这是在生气什么。我以前从未尝试过这个过程。我只是想在本地获取一份生产副本以用于测试目的。我的数据库是 MySQL 顺便说一句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T23:50:26.090

这个错误意味着 Django 正在尝试将值`127`导入 a`BooleanField`并且它不能，因为`127`它既不是布尔值也不是空值。

您确定这些模型在生产和开发中是相同的吗？是否有可能在生产中，您的一个模型中的某些字段是整数，但是在开发后期您将其更改为布尔值。如果模型不相同，那么您不能只将生产中转储的固定装置导入您的开发环境。在这种情况下，您将不得不进行迁移。对于 Django，[South](http://south.aeracode.org/)是一个很好的工具。

# sharepoint-2010 - SharePoint Web 和站点之间有什么区别

> ID：13334852
> 
> 赞同：5
> 
> 时间：2012-11-11T19:56:24.663
> 
> 标签：sharepoint-2010, spweb, spsite

谁能解释 SP.Web 和 SP.Site 实体之间的区别？据我了解，SP.Site 包含代表 SiteCollections 的不同 SP.Web。这是正确的吗？您能否分享任何链接以更好地理解这种方法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-12T07:38:41.260

基本上：

```
UI Term          API Class Name
-------          --------------
Site Collection  SPSite
Site             SPWeb 
```

有关详细信息，请参阅以下内容：

[SPWeb.Webs，站点与子站点](https://stackoverflow.com/questions/2549530/spweb-webs-site-vs-subsite)

[让我的头脑围绕 spsite vs spweb vs 其他任何东西](https://sharepoint.stackexchange.com/questions/23241/getting-my-head-round-spsite-vs-spweb-vs-anything-else)

[SPSite 与 SPWeb，网站集与网站](http://blog.mediawhole.com/2009/02/spsite-vs-spweb-site-collection-vs-site.html)

# cakephp - 使用传入参数重定向 - CakePHP

> ID：13334853
> 
> 赞同：2
> 
> 时间：2012-11-11T19:56:25.580
> 
> 标签：cakephp, cakephp-2.2

我正在使用基于 url 的语言，并且我在 URL 中有一个带有传入参数的页面。

我不喜欢 URL 中的查询字符串 ('?x=y') 或命名参数 ('x:y')，所以我使用**http://localhost/cakeapp/us/controller/action/param1/param2/param3**

在我的*AppController*中，我正在检查 URL 是否定义了语言，如果没有定义语言（例如用户请求*http://localhost/cakeapp/controller/action/param1/param2/param3*），那么我想简单地重定向用户到具有相同参数的语言定义的 URL。

简而言之：我想重定向：

*http://localhost/cakeapp/controller/action/param1/param2/param3*

至

*http://localhost/cakeapp/us/controller/action/param1/param2/param3*

我用;

> $this->重定向（
> 
> > Router::url(array('language' => $this->Session->read('Config.language'), 'base' => false))
> 
> );

但它会将用户重定向到*http://localhost/cakeapp/us/controller/action*而没有参数。

有没有办法使用 Router::url 和传入的*$this->passedArgs*变量来构建 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:14:29.193

我认为您需要确保将参数传递给重定向方法：

```
function controllerAction($param1, $param2, $param3) {

    $this->redirect(

        Router::url(array('language' => $this->Session->read('Config.language'), 'base' => false)),
        $param1,
        $param2,
        $param3
    );

} 
```

或者至少以某种方式将您的参数传递给重定向方法，无论哪种方式最适合您。我认为你也可以这样做，如果你不直接将参数作为参数传递给你的控制器操作方法：

```
$this->redirect(

    Router::url(array('language' => $this->Session->read('Config.language'), 'base' => false)),
    $this->request->params['named'][0],
    $this->request->params['named'][1],
    $this->request->params['named'][2]
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T13:46:31.350

这应该有效：

```
Router::connect(
    '/cakeapp/:language/:controller/:action/*',
    array(), 
    array('language'=>'[a-z]{2}')
);
Router::redirect(
    '/*', 
    '/cakeapp/us/'.substr(Router::url(null, false), 
    strpos(Router::url(null, false), '/', 1))
); 
```

如果您没有应用前缀，则可以省略第二行中的字符串操作；像这样：

```
Router::connect(
    '/:language/:controller/:action/*', 
    array(), 
    array('language'=>'[a-z]{2}')
);
Router::redirect('/*', '/us/'.Router::url(null, false)); 
```

# php - 用于预测的 mktime、date() 或 mysql 时间戳？

> ID：13334855
> 
> 赞同：0
> 
> 时间：2012-11-11T19:56:59.720
> 
> 标签：php, mysql, mktime

我有一个带有一些日志数据的简单 MySql DB。我想获得在工作日重复 +-30 分钟的事件的预测。例如：我比较符合条件的 3 个事件并发出警报。

现在的问题是：比较时间的最佳方法是什么？我可以通过 PHP 将 mktime 或 date() 放入数据库中，或者直接使用 mysql 进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:03:17.673

考虑到性能，可以在数据库级别完成的工作肯定应该在那里完成。

```
SELECT * FROM tbl WHERE mytime >= DATE_SUB(NOW(), INTERVAL 30 MINUTE) 
```

这将搜索最多 30 分钟之前和更新的所有内容。随意修改此查询以满足您的需求。

# html - 垂直对齐稍微偏离中心...任何想法是为什么？ 我试图在另一个 div 中垂直居中一个表格，但我得到的结果似乎垂直偏离了几个像素（至少在 FF 中）。 是否有一些默认值会导致垂直对齐关闭？ 例子： http://jsfiddle.net/9hRnp/ 注意：代码由 Jquery 生成，仅用于显示问题， 问问题 问问题 2012-11-11T19:57:20.350 467 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我试图在另一个 div 中垂直居中一个表格，但我得到的结果似乎垂直偏离了几个像素（至少在 FF 中）。 是否有一些默认值会导致垂直对齐关闭？ 例子： http://jsfiddle.net/9hRnp/ 注意：代码由 Jquery 生成，仅用于显示问题，这就是为什么我在每个代码上都有宽度和高度值 将 vertical-align:middle 添加到 findpath-content id 应该可以解决您的问题。 #findpath-content { display: inline-block; text-align: left; vertical-align: middle; }htmlcssvertical-alignment 4 1 回答 1 This answer is useful 1 将 vertical-align:middle 添加到 findpath-content id 应该可以解决您的问题。 #findpath-content { display: inline-block; text-align: left; vertical-align: middle; }于 2012-11-11T20:09:07.527 回答 Related 2 python - 暂停（序列化）和恢复递归生成器堆栈的解决方法？ 1 php - memached 开箱即用的后备解决方案 6 java - 如何同时迭代这些列表？ 4 ruby - 用于在引号之间的特定单词之后提取文本的正则表达式 1 ios - 圆形蒙版视图动画太快，不可点击 2 security - 在 JBoss 7.1.1Final 中添加新的安全域 3 python - 如何在 Pydev 中读取文本文件？ 1 exception - 处理由“and”分隔的多个函数后的异常 0 python - 用于移动设备的 python os.walk 2 javascript - 如何将可拖动属性分配给所有实例 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13334859
> 
> 赞同：0
> 
> 时间：
> 
> 标签：html, css, vertical-alignment

我试图在另一个 div 中垂直居中一个表格，但我得到的结果似乎垂直偏离了几个像素（至少在 FF 中）。

是否有一些默认值会导致垂直对齐关闭？

例子：

[http://jsfiddle.net/9hRnp/](http://jsfiddle.net/9hRnp/)

注意：代码由 Jquery 生成，仅用于显示问题，这就是为什么我在每个代码上都有宽度和高度值`<TD>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:09:07.527

将 vertical-align:middle 添加到 findpath-content id 应该可以解决您的问题。

```
#findpath-content {
display: inline-block;
text-align: left;
vertical-align: middle; 
```

}​</p>

# gwt - 如何在填充样式上设置不透明度？

> ID：13334862
> 
> 赞同：0
> 
> 时间：2012-11-11T19:57:34.717
> 
> 标签：gwt, canvas, html5-canvas

（我正在使用 GWT，它包装了 javasciprt / html，所以认为它也适用于这里）。

我想在画布元素上使用具有不同不透明度的颜色。看起来我必须一遍又一遍地创建一个 CssColor，因为我看不到 setOpacity() 方法：

```
// fade in
for (int i = 0; i < 255; i++) {
    CssColor clr = CssColor.make("rgba(" + 255 + ", " + 0 + "," + 0 + ", " + i + ")");
    canvas.setFillStyle(clr);
    canvas.fillRect(...);
} 
```

有没有办法只修改构造颜色的 alpha 值，而不是创建所有这些新对象？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:28:13.433

您可以使用 setGlobalAlpha(double alpha)

# coq - 我可以将 Coq 证明提取为 Haskell 函数吗？

> ID：13334863
> 
> 赞同：28
> 
> 时间：2012-11-11T19:57:36.543
> 
> 标签：coq

*   自从我学了一点 Coq 之后，我就想学习写一个所谓的除法算法的 Coq 证明，这实际上是一个逻辑命题：`forall n m : nat, exists q : nat, exists r : nat, n = q * m + r`
*   我最近使用从[Software Foundations](http://www.cis.upenn.edu/~bcpierce/sf/)中学到的知识完成了这项任务。
*   Coq 是一个用于开发建设性证明的系统，我的证明实际上是一种从值`q`和.`r``m``n`
*   Coq 有一个有趣的工具，可以将 Coq 的算法语言 (Gallina) 中的算法“提取”为包括 Haskell 在内的通用函数式编程语言。
*   另外，我设法将 divmod 操作编写为 Gallina`Fixpoint`并提取它。我想仔细指出，该任务不是我在这里考虑的。
*   Adam Chlipala 在[Certified Programming with Dependent Types](http://adam.chlipala.net/cpdt/)中写道：“Curry-Howard 通信的许多粉丝都支持从证明中提取程序的想法。实际上，很少有 Coq 和相关工具的用户会做这样的事情。”

甚至有可能提取我对 Haskell 的证明中隐含的算法吗？如果可能，将如何实现？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-13T23:53:31.773

感谢[Pierce 教授的 2012 年夏季视频 4.1](http://www.cs.uoregon.edu/Research/summerschool/summer12/curriculum.html)，正如[Dan Feltey 所](https://stackoverflow.com/users/1447178/dan-feltey)建议的那样，我们看到关键是要提取的定理必须提供一个成员`Type`而不是通常的命题类型，即`Prop`.

对于特定定理，受影响的构造是归纳 Prop`ex`及其符号`exists`。与 Pierce 教授所做的类似，我们可以陈述我们自己的替代定义，`ex_t`并将`exists_t`出现的 替换为`Prop`的出现`Type`。

这是通常的重新定义，`ex`并且与`exists`Coq 标准库中的定义类似。

```
Inductive ex (X:Type) (P : X->Prop) : Prop :=
ex_intro : forall (witness:X), P witness -> ex X P.

Notation "'exists' x : X , p" := (ex _ (fun x:X => p))
(at level 200, x ident, right associativity) : type_scope. 
```

以下是替代定义。

```
Inductive ex_t (X:Type) (P : X->Type) : Type :=
ex_t_intro : forall (witness:X), P witness -> ex_t X P.

Notation "'exists_t' x : X , p" := (ex_t _ (fun x:X => p))
(at level 200, x ident, right associativity) : type_scope. 
```

现在，有点不幸的是，有必要使用这些新定义重复定理的陈述*和证明*。

> > ## 世间有什么？？
> > 
> > 为什么有必要对定理进行重复陈述和对定理的重复证明，仅通过使用量词的替代定义而有所不同？
> > 
> > 我曾希望在 中使用现有`Prop`的定理再次证明该定理`Type`。当 Coq在环境中拒绝`inversion`a的证明策略时，该策略失败了，而目标是 a that uses 。Coq 报告“错误：反转将需要对排序集进行案例分析，这在归纳定义中是不允许的。” 这种行为发生在 Coq 8.3 中。我不确定它是否仍然出现在 Coq 8.4 中。`Prop``Prop``exists``Type``exists_t`
> > 
> > 我认为重复证明的需要实际上是深刻的，尽管我怀疑我个人是否能够很好地理解它的深刻性。它涉及的事实`Prop`是“隐含的”，`Type`不是隐含的，而是默认的“分层”的。预测性是（如果我理解正确的话）对罗素悖论的脆弱性，即不是自身成员的集合 S 既不能是 S 的成员，也不能是 S 的非成员。`Type`通过默认创建包含低级类型的高级类型序列来避免罗素的悖论。因为 Coq 浸透在 Curry-Howard 对应的公式即类型解释中，如果我理解正确，我们甚至可以将 Coq 中的类型分层理解为避免哥德尔不完备性的一种方式，即某些公式表达的现象对诸如它们本身的公式的约束，因此对于它们的真假变得不可知。

回到地球上，这里是使用“exists_t”的定理的重复陈述。

```
Theorem divalg_t : forall n m : nat, exists_t q : nat,
  exists_t r : nat, n = plus (mult q m) r. 
```

由于我省略了 的证明`divalg`，我也将省略 的证明`divalg_t`。我只想提一下，我们确实很幸运，包括“exists”和“inversion”在内的证明策略与我们的新定义“ex_t”和“exists_t”一样有效。

最后，提取本身很容易完成。

```
Extraction Language Haskell.

Extraction "divalg.hs" divalg_t. 
```

生成的 Haskell 文件包含许多定义，其核心是下面相当不错的代码。我对 Haskell 编程语言几乎完全一无所知，这让我有点受不了。请注意，这`Ex_t_intro`会创建一个类型为`Ex_t`;的结果。`O`并且`S`是Peano算术的零和后继函数；`beq_nat`测试Peano数是否相等；`nat_rec`是一个高阶函数，在其参数中递归函数。的定义在`nat_rec`这里没有显示。无论如何，它是由 Coq 根据 Coq 中定义的归纳类型“nat”生成的。

```
divalg :: Nat -> Nat -> Ex_t Nat (Ex_t Nat ())
divalg n m =
  case m of {
   O -> Ex_t_intro O (Ex_t_intro n __);
   S m' ->
    nat_rec (Ex_t_intro O (Ex_t_intro O __)) (\n' iHn' ->
      case iHn' of {
       Ex_t_intro q' hq' ->
        case hq' of {
         Ex_t_intro r' _ ->
          let {k = beq_nat r' m'} in
          case k of {
           True -> Ex_t_intro (S q') (Ex_t_intro O __);
           False -> Ex_t_intro q' (Ex_t_intro (S r') __)}}}) n} 
```

2013-04-24 更新：我现在了解更多 Haskell。为了帮助其他人阅读上面提取的代码，我提供了以下手写代码，我声称它们是等效的并且更具可读性。我还展示了我没有删除的提取定义 Nat、O、S 和 nat_rec。

```
-- Extracted: Natural numbers (non-negative integers)
-- in the manner in which Peano defined them.
data Nat =
   O
 | S Nat
   deriving (Eq, Show)

-- Extracted: General recursion over natural numbers,
-- an interpretation of Nat in the manner of higher-order abstract syntax.
nat_rec :: a1 -> (Nat -> a1 -> a1) -> Nat -> a1
nat_rec f f0 n =
  case n of {
   O -> f;
   S n0 -> f0 n0 (nat_rec f f0 n0)}

-- Given non-negative integers n and m, produce (q, r) with n = q * m + r.
divalg_t :: Nat -> Nat -> (Nat, Nat)
divalg_t n      O = (O, n)      -- n/0: Define quotient 0, remainder n.
divalg_t n (S m') = divpos n m' -- n/(S m')
  where
        -- Given non-negative integers  n and m',
        -- and defining m = m' + 1,
        -- produce (q, r) with n = q * m + r
        -- so that q = floor (n / m) and r = n % m.
        divpos :: Nat -> Nat -> (Nat, Nat)
        divpos n m' = nat_rec (O, O) (incrDivMod m') n
        -- Given a non-negative integer m' and
        -- a pair of non-negative integers (q', r') with r <= m',
        -- and defining m = m' + 1,
        -- produce (q, r) with q*m + r = q'*m + r' + 1 and r <= m'.
        incrDivMod :: Nat -> Nat -> (Nat, Nat) -> (Nat, Nat)
        incrDivMod m' _ (q', r')
          | r' == m'  = (S q', O)
          | otherwise = (q', S r') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T19:57:36.543

日期为 2012 年 7 月 25 日的当前版本的 Software Foundations 在后面的章节“ [Extraction2](http://www.cis.upenn.edu/~bcpierce/sf/Extraction2.html) ”中非常简洁地回答了这个问题。答案是肯定可以做到的，就像这样：

```
Extraction Language Haskell
Extraction "divalg.hs" divalg 
```

还需要一个技巧。而不是 a `Prop`， divalg 必须是 a `Type`。否则会在提取过程中被删除。

哦，@Anthill 是正确的，我没有回答这个问题，因为我不知道如何解释 Pierce 教授是如何在他的 Norm.v 和 MoreStlc.v 的 NormInType.v 变体中实现这一点的。

好的，无论如何，这是我的部分答案的其余部分。

在上面出现“divalg”的地方，有必要提供一个以空格分隔的所有命题列表（必须将每个命题重新定义为 a`Type`而不是 a `Prop`），divalg 依赖于这些命题。有关证明提取的全面、有趣和有效的示例，可以参考上面提到的提取章节。该示例提取到 OCaml，但将其改编为 Haskell 只是`Extraction Language Haskell`如上所述使用的问题。

我花了一些时间不知道上述答案的部分原因是我一直在使用 2010 年 10 月 14 日的 Software Foundations 副本，该副本是我在 2011 年下载的。

# mysql - Sphinx 错误：未能合并索引

> ID：13334866
> 
> 赞同：0
> 
> 时间：2012-11-11T19:57:39.943
> 
> 标签：mysql, linux, merge, sphinx

在 Sphinx 上将索引与 delta 合并时，出现此错误：

```
~: /usr/local/bin/indexer --merge myindex myindexDelta --rotate;
Sphinx 2.0.6-release (r3473)
Copyright (c) 2001-2012, Andrew Aksyonoff
Copyright (c) 2008-2012, Sphinx Technologies Inc ( http://sphinxsearch.com )

using config file '/usr/local/etc/sphinx.conf'...
merging index 'myindexDelta' into index 'myindex'...
read 414.6 of 414.6 MB, 100.0% done
FATAL: failed to merge index 'myindexDelta' into index 'myindex': failed to open /server/sphinx/data/myindex.sps: No such file or directory 
```

我在 sphinx.conf 上的配置如下

```
source myindex
{
     type = mysql
     sql_host = localhost
     sql_user = db
     sql_pass =
     sql_db     = db
     sql_query_pre = SET SESSION query_cache_type=OFF
     sql_query_pre  = REPLACE INTO sph_counter SELECT 1, MAX(id) FROM mytable
     sql_query_pre  = SET NAMES utf8

     sql_query = \
                 SELECT  id,title FROM mytable \
                 WHERE id<=( SELECT max_doc_id FROM sph_counter WHERE counter_id=1 )
     sql_ranged_throttle = 0
}

source myindexDelta : myindex
{
     sql_query_pre = SET SESSION query_cache_type=OFF
     sql_query_pre = SET NAMES utf8
     sql_query = \
             SELECT  id,title FROM mytable \
             WHERE id > ( SELECT max_doc_id FROM sph_counter WHERE counter_id=1 )
}

index myindex
{
     source = myindex
     path = /server/sphinx/data/myindex
     min_word_len = 3
     min_infix_len = 0
}

index myindexDelta : myindex
{
     source = myindexDelta
     path = /server/sphinx/data/myindexDelta
     min_word_len = 3
     min_infix_len = 0
} 
```

索引具有权限的文件列表：

```
~: ls -lh /server/sphinx/data/
-rw-r--r-- 1 root root    0 Nov 11 21:40 myindexDelta.spa
-rw-r--r-- 1 root root 290K Nov 11 21:40 myindexDelta.spd
-rw-r--r-- 1 root root  328 Nov 11 21:40 myindexDelta.sph
-rw-r--r-- 1 root root 106K Nov 11 21:40 myindexDelta.spi
-rw-r--r-- 1 root root    0 Nov 11 21:40 myindexDelta.spk
-rw------- 1 root root    0 Nov 11 21:40 myindexDelta.spl
-rw-r--r-- 1 root root    0 Nov 11 21:40 myindexDelta.spm
-rw-r--r-- 1 root root 223K Nov 11 21:40 myindexDelta.spp
-rw-r--r-- 1 root root    1 Nov 11 21:40 myindexDelta.sps
-rw-r--r-- 1 root root    0 Jul  3 21:17 myindex.spa
-rw-r--r-- 1 root root 7.0G Jul  3 23:54 myindex.spd
-rw-r--r-- 1 root root  290 Jul  3 23:54 myindex.sph
-rw-r--r-- 1 root root 397M Jul  3 23:54 myindex.spi
-rw-r--r-- 1 root root    0 Jul  3 23:54 myindex.spk
-rw------- 1 root root    0 Nov 11 21:08 myindex.spl
-rw-r--r-- 1 root root    0 Jul  3 21:17 myindex.spm
-rw-r--r-- 1 root root 9.2G Jul  3 23:54 myindex.spp 
```

我确信代码解释了一切，不需要添加描述。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:49:15.523

我猜原来的'myindex'是由不同版本的狮身人面像制作的。（即认为 2.0.6-release 不会在 7 月发布）

在该版本更新的某个地方，对 .sps 文件的要求发生了变化——新版本需要它，而旧版本不需要。您没有字符串属性，因此文件在增量中不包含数据。

我建议使用您当前版本的索引器重建 myindex - 所以它们的版本是相同的。

或者，也许您可​​以尝试将**myindexDelta.sps**复制到**myindex.sps**。它不包含任何数据（1 个虚拟字节！），因此它不应该损坏任何东西。只需要这样做一次。

# facebook - Facebook API：从 Facebook 帖子中获取评论

> ID：13334867
> 
> 赞同：1
> 
> 时间：2012-11-11T19:57:44.923
> 
> 标签：facebook, facebook-graph-api, facebook-fql, facebook-comments

我正在尝试检索共享 LINK 上的所有评论。

我已经在评论表上尝试过 FQL，但这不起作用，因为评论表是用于评论插件的。

让我举个例子： - CNN 在他们的页面上分享了一个链接，该链接有 60 个赞和 30 个评论。- 我试过这个 FQL 查询，但它没有返回任何内容，因为它不是来自 Comments 插件：FQL: SELECT post_fbid, fromid, object_id, text, time FROM comment WHERE object_id IN (SELECT comments_fbid FROM link_stat WHERE url = 'http:// google.com/')

那么对此有什么解决方案吗？

# assembly - 组装说明 mov

> ID：13334870
> 
> 赞同：0
> 
> 时间：2012-11-11T19:57:50.413
> 
> 标签：assembly, x86, 32-bit, mov

我可以在汇编中这样做`mov eax, [ax]`还是必须指定尺寸`mov eax, dword [ax]`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T22:33:04.247

`[ax]`不是有效的 16 位寻址模式。将其更改为`mov ebx, [bx]`，您可以做到。决定了操作的`ebx`大小，所以你不需要说`dword`. 在 32 位模式下，`[bx]`不太可能是“有用”的地址，但它是“有效”的代码。在 32 位模式下`mov al, [eax]`，`mov ax, [eax]`和`mov eax, [eax]`都是有效的，大小由目标寄存器的大小决定，但为了清楚起见，您可能想说“字节”、“字”或“双字”。在这种（！）情况下，大小不必匹配。

FWIW，可以在 16 位代码中使用 32 位指令和 32 位寻址模式。整个地址需要在段限制之内——通常是 64k——但是`mov eax, [eax + ecx * 4]`是有效的代码。Nasm（或其他“有能力的”汇编程序）将生成所需的“操作数大小覆盖前缀”和“地址大小覆盖前缀”（0x66 和 0x67）。

不要害怕尝试这些事情......虽然可能不清楚为什么 Nasm 拒绝，如果 Nasm 接受它并不意味着它会按照您的意愿行事......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T20:44:17.897

不，这些操作数不匹配。在可以访问 EAX 的 32 位系统上，您还必须对地址使用相同的大小。

```
mov eax, [eax] 
```

将用它指向的值替换 EAX 中的指针。

# api - 分离度

> ID：13334871
> 
> 赞同：1
> 
> 时间：2012-11-11T19:57:53.703
> 
> 标签：api, facebook-graph-api

给定facebook上的两个人X和Y，有没有办法（有效或不有效）找到这样定义的数字。如果 X 和 Y 是朋友，则 1\. 否则，如果 X 有一个朋友是 Y 的朋友，则 2\. 否则，如果 X 是朋友 Y 的朋友的朋友，则 3\. 等等。

澄清：
执行此操作的程序将 facebook 上任意两个人的姓名 X 和 Y 作为输入。然后如果他们在彼此的好友列表中，程序输出 1。
如果不是，但他们都有一个共同的朋友，则输出 2。
如果他们不是朋友，也没有共同的朋友，但每个人都有一个朋友是朋友，那么输出 3.
如果不是，但是 X 有一个朋友 x，Y 有一个朋友 y，并且 x 和 y 有一个共同的朋友，那么输出 4\. 等等...

如果好友之间没有联系，则输出0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T22:07:03.547

你正在寻找一种叫做[分离度的](http://en.wikipedia.org/wiki/Six_degrees_of_separation)东西。

填写每个案例的唯一方法是列出尽可能多的朋友的朋友的朋友......基本上尽可能接近您的应用程序允许覆盖 Facebook 图表。然后，您将 Facebook 用户表示为图上的节点并计算从 A 到 B 的路径。因此，除非您拥有来自 Facebook 的所有数据，否则对于一个完整的工作应用程序来说实际上是不可能的。假设你这样做了，你可以只使用[Dijkstra's algorithm](http://en.wikipedia.org/wiki/Dijkstra's_algorithm)。

对于淡化版本，您可以只检查您的朋友，用它制作图表并找到任何大于 1 的度数。

您将需要查询，例如

*   `me/friends`用于初始化图的构建

*   `SELECT uid1, uid2 FROM friend WHERE uid1 = ' + uid1 + ' AND uid2 IN (SELECT uid2 FROM friend WHERE uid1=me())`用于查找您的哪些朋友在网络中连接

如果您只需要它来显示当前用户的用户路径，JS SDK [http://www.fbrell.com/saved/12bd86306fe69a2af6134fe2a9e645e3中有一个隐藏插件](http://www.fbrell.com/saved/12bd86306fe69a2af6134fe2a9e645e3)

```
<fb:degrees href="http://facebook.com/zuck"> 
```

![分离度](../Images/7715463847d0c1e57b0aec68673aa1e7.png)

# list - 返回嵌套列表的嵌套深度 n 上的所有元素

> ID：13334872
> 
> 赞同：0
> 
> 时间：2012-11-11T19:58:08.713
> 
> 标签：list, scheme, nested, racket, depth

我真的很困惑如何做到这一点......我什至不知道如何开始，我知道如何为二叉树做这件事，但我希望能够用任何形式的嵌套列表来做，谁能帮帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:27:13.660

对于这个，您需要使用模板来遍历任意嵌套的元素列表。例如，研究这个复制任意嵌套列表的过程：

```
(define (copy lst)
  (cond ((null? lst)                ; if list is empty
         '())                       ; return the empty list
        ((not (list? (car lst)))    ; if current element is not a list
         (cons (car lst)            ; cons current element
               (copy (cdr lst))))   ; with the rest of the list
        (else                       ; if current element is a list
         (cons (copy (car lst))     ; cons recursive call over current element
               (copy (cdr lst)))))) ; with recursive call over rest of the list 
```

先来个小约定。假设这`1`是基本级别，并且所有返回的元素都将位于一个平面输出列表中（不保留输入列表的原始结构）。例如：

```
(elements-level '(1 2 3) 1)
; => '(1 2 3)

(elements-level '(1 (2) 3) 2)
; => '(2) 
```

记住上面的模板，让我们看看如何修改它来解决手头的问题。我会让你填空，因为这个问题看起来像家庭作业：

```
(define (elements-level lst lvl)
  (cond ((or (null? lst) (< lvl 1))        ; if list is empty or below level
         '())                              ; return the empty list
        ((not (list? (car lst)))           ; if current element is not a list
         (if (= lvl <???>)                 ; if `lvl` is the base level
             (cons <???>                   ; cons current element in list
               (elements-level <???> lvl)) ; and advance recursion over cdr part
             (elements-level <???> lvl)))  ; else advance recursion over cdr part
        (else                              ; if current element is a list
         (append                           ; use `append` for flattening the list
          (elements-level <???> <???>)     ; recur over car, decrease one level
          (elements-level <???> <???>))))) ; recur over cdr, keep the same level 
```

使用此列表测试过程，它必须返回`'(1)`level `1`、`'(2)`for level`2`等：

```
(elements-level '(1 (2 (3 (4 (5))))) 1)
; => '(1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:05:40.063

I think you can use recursion with steps as below:

1.  Define a list to hold all elements at nth depth.
2.  create a recursion function, which takes `nested list`, `new list` and `n` as argument
3.  For each element of the nested loop, call the recursion function itself by passing the child list and depth as n-1.
4.  Add all elements of the `nested list` to `new list` when n = 0\.

Once this method is done, you will all elements of depth `n` in the `new list`.

**Possible Enhancement:** If it is possible the some of the list elements don't extend up to nth level, then you may want to check the type of elements before calling the recursion method. If it's of type leaf, then simply add the element in the new list.

# javascript - javascript 如何动态获取高度（当我调整浏览器大小时）

> ID：13334873
> 
> 赞同：0
> 
> 时间：2012-11-11T19:58:15.810
> 
> 标签：javascript, css, height

我试图`height`从可调节中获取，`div`因为我想`css`在高度值大于设定值时添加溢出样式。当您调整此 div 的窗口高度时，会发生变化。我将用一些图片来解释这一点：

![http://imageshack.us/a/img801/2113/somethingo.png](../Images/96366d238cc5d4f3c5a49ad3f48065e5.png)

![http://imageshack.us/a/img7/7503/blebvle.png](../Images/a4947730233b4e5823ffa0777b554b74.png)

主要问题是如何动态获取它？我的意思是，当你调整自己的窗口等时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T20:10:47.360

如果您能够使用 jQuery，我建议您使用 window.onresize 方法并计算 div 的高度。

```
$(document).ready(function()
{
   $(window).on("resize", function()
   {
        $("#myDiv").text("My height is " + $("#myDiv").height());
   });                                                           
});​ 
```

看看我为你创建的这个小提琴：http: [//jsfiddle.net/9ftGe/](http://jsfiddle.net/9ftGe/)

我希望这是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:07:03.517

I think you're looking for monitoring the browser variables...

```
window.innerHeight

window.innerWidth 
```

Whenever you check/call these variables you should get the exact window inner size and take it from there.

NB: These variables (constants to us) are case sensitive.

# jquery - 为什么这个处理程序会在两次按钮点击时触发？

> ID：13334874
> 
> 赞同：1
> 
> 时间：2012-11-11T19:58:21.110
> 
> 标签：jquery

我想知道为什么这个处理程序会在两次按钮点击时触发？

```
<script type="text/javascript">
   $(document).ready("#testbutton").click(function () {
        $.ajax({
            url: '@Url.Action("RenderBlogComments","Home")',

            success: function (data) {
                // your data could be a View or Json or what ever you returned in your action method 
                // parse your data here
                alert(data);
            }
        });
    });
</script>

<input type="submit" name="testbutton" value="submit" id="testbutton" />

<input type="submit" name="testbutton" value="submit" id="testbutton2" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:00:11.780

尝试

```
 $(document).ready(function(){

      $(""#testbutton"").click(function () {
        $.ajax({
            url: '@Url.Action("RenderBlogComments","Home")',

            success: function (data) {
                // your data could be a View or Json or what ever you returned in your action method 
                // parse your data here
                alert(data);
            }
        });
   });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T20:22:36.627

使用此解决方案，只有第一个按钮触发 ajax 调用。

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf8" />
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
        <script type="text/javascript">
            $(document).ready(function(){
                $("#testbutton").click(function() {
                    $.ajax({
                        url: 'http://www.google.de',
                        success: function (data) {
                            // your data could be a View or Json or what ever you returned in your action method 
                            // parse your data here
                            alert(data);
                        }
                    });
                });
            });
        </script>
    </head>
    <body>
        <input type="submit" name="testbutton" value="submit" id="testbutton" />
        <input type="submit" name="testbutton" value="submit" id="testbutton2" />
    </body>
</html> 
```

# android - Spotify for Android 是否广播元数据？

> ID：13334875
> 
> 赞同：0
> 
> 时间：2012-11-11T19:58:28.333
> 
> 标签：android, spotify

我正在尝试在我的音乐可视化应用程序中找到一种支持 Spotify 元数据的方法。每次播放新歌时，许多其他应用程序都会广播自己的动作，并且动作包括带有歌曲元数据的附加内容。

此外，许多应用程序使用 Last.fm 的元数据操作进行广播。他们这样做是为了让 Last.fm 可以对它们进行乱码，但对我来说获取元数据也很有用。

Spotify 是否支持元数据广播？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T20:59:57.480

不幸的是，不 - Spotify Android 应用程序不这样做。

# c# - 对 C++ 向量和 C# 列表进行排序

> ID：13334883
> 
> 赞同：1
> 
> 时间：2012-11-11T19:59:13.927
> 
> 标签：c#, c++, list, vector, compare

我决定在排序测试中将速度 C++ std::vector 与 C# List 进行比较。所以我用 2 700 000 个相同的字符串填充它们并测量排序时间。

它看起来像这样：

C++：

```
std::vector<std::string> CPPList;
std::ifstream file("words-back.txt");

std::string word;
while(std::getline(file, word))
{
    CPPList.push_back(word);
}

file.close();

Profiler profiler;
profiler.Start();

std::sort(CPPList.begin(),CPPList.end ());

profiler.Stop(); 
```

C＃：

```
string[] lista = File.ReadAllLines("words-back.txt").ToArray();

List<string> CSList = new List<string>();
foreach (string element in lista)
{
    CSList.Add(element);
}

Stopwatch timer = Stopwatch.StartNew();
    CSList.Sort( );
timer.Stop(); 
```

结果让我大吃一惊，以至于我不得不问你发生了什么事。C++ 需要 0.7 秒，而 C# 需要 25 秒。我确实输出了带有排序字符串的文件，以确保排序正确完成并且是正确的。

我的问题是：为什么 C# 比 C++ 长这么多。

对不起，在我吃一个零之前，这个文件中的字符串不是 270 000 而是 2 700 000，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T21:50:09.567

因为我喜欢把时间浪费在这样毫无意义的事情上，所以这是*我*的基准测试结果（使用相同的“guids.txt”，大小约为 100mb，两种语言都有 270 万个 GUID）：

使用 C#：

```
static void Main(string[] args)
{
    int numStrings = 2700000;
    List<string> strings = new List<string>(numStrings);

    // pre-jit the generic type
    new List<string>(new[] { "str1", "str2" }).Sort();

    using (var fs = File.Open("C:\\guids.txt", FileMode.Open))
    using (var r = new StreamReader(fs))
    {
        Console.WriteLine("Loading strings...");
        string str;
        while ((str = r.ReadLine()) != null)
        {
            strings.Add(str);
        }
    }

    Console.WriteLine("Beginning sort...");

    var sw = Stopwatch.StartNew();
    strings.Sort();
    sw.Stop();

    Console.WriteLine(sw.Elapsed.TotalSeconds + " seconds, or " + sw.Elapsed.TotalMilliseconds + " milliseconds");
} 
```

在发布版本中，我得到了大约 15 秒。

在 C++ 中：

```
int _tmain(int argc, _TCHAR* argv[])
{
    cout << "Loading strings..." << endl;

    int numStrings = 2700000;
    vector<string> vec;
    vec.reserve(numStrings);

    ifstream file("C:\\guids.txt");

    string line;
    while (getline(file, line))
    {
        vec.push_back(line);
    }

    cout << "Starting sort..." << endl;

    unsigned start = clock();
    sort(vec.begin(), vec.end());
    unsigned ms = clock() - start;

    int seconds = ms / 1000;

    cout << "Result: " << seconds << " seconds, or" << endl << ms << " milliseconds" << endl;

    return 0;
} 
```

我得到了大约 5 秒。

所以 C++ 大约快 3 倍。C# 速度慢的原因可能是对内部使用的数组的每次访问进行边界检查`List<T>`，而 C++ 不这样做，或者可以更轻松地优化掉。

# ios - iPad 使用 UIImagePickerController 拍照

> ID：13334886
> 
> 赞同：0
> 
> 时间：2012-11-11T19:59:24.157
> 
> 标签：ios, ipad, camera

我正在尝试拍摄，它有效，但有 2 个问题。首先，弹出控制器以最小尺寸显示（它不服从 setPopoverContentSize），其次也是最重要的，捕获的镜头只有 640x640 像素，而我想成为可用的最大尺寸（5MP）。

下面的代码有什么问题？

```
imgPicker = [[UIImagePickerController alloc] init];
imgPicker.delegate = self;
imgPicker.sourceType = UIImagePickerControllerSourceTypeCamera;
imgPicker.showsCameraControls = YES;

pop = [[UIPopoverController alloc] initWithContentViewController:imgPicker];
pop.delegate = self;
CGRect re = CGRectMake(50,20,100,20);
CGRect re2 = CGRectMake(0,0,500,500);
[pop setPopoverContentSize:re2.size];
[pop presentPopoverFromRect:re inView:[self view] permittedArrowDirections:UIPopoverArrowDirectionAny  animated:YES]; 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T21:11:09.437

您设置的内容大小不正确。您不会调用`setPopoverContentSize:`弹出框，而是在弹出框中显示的视图控制器上调用它。在您的情况下，设置图像选择器的内容大小。

从图像选择器接收到的图像是全尺寸图像。也许您正在获取编辑后的图像而不是原始图像。

# functional-programming - 用纯函数式语言实现 Prolog

> ID：13334892
> 
> 赞同：1
> 
> 时间：2012-11-11T20:00:12.763
> 
> 标签：functional-programming, prolog, logic, pseudocode, language-implementation

我将非常感谢用于实现 Prolog 的简单伪代码算法，其中伪代码被视为纯函数式语言。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T20:19:54.800

著名[的](https://en.wikipedia.org/wiki/Structure_and_Interpretation_of_Computer_Programs)[SICP](https://mitpress.mit.edu/sites/default/files/sicp/index.html)书有一章是关于逻辑编程的

# ios - 如何摆脱表格单元格的 selectionStyle 但仍然收到 setSelected/setHighlighted 调用

> ID：13334900
> 
> 赞同：0
> 
> 时间：2012-11-11T20:01:06.693
> 
> 标签：ios, cocoa-touch, uitableview

我已经尝试过[这里](https://stackoverflow.com/a/899925/1064869)介绍的方法，除了我不能使`selectedBackgroundView`透明，它保持白色之外，一切正常。在我的自定义`UITableViewCell`课程中，我有：

```
-(void)awakeFromNib {
    UIView *bkgView = [[UIView alloc]initWithFrame:self.frame];
    bkgView.alpha = 0.5;
    bkgView.backgroundColor = [UIColor clearColor];
    self.selectedBackgroundView = bkgView;
} 
```

我也调用`[self setNeedsDisplay];`了`setSelected`方法。

我想要的是删除蓝色突出显示（从`UITableViewCellSelectionStyleBlue` ，我不想将其设置为，`UITableViewCellSelectionNone`因为它会禁用`setHighlight/Selected`调用）并且仍然调用突出显示/选择方法。我非常接近那里，只是`selectedBackgorundView`遗骸是白色的！如果我将它设置为`redColor`or `blueColor`，它会显示为红色或蓝色，但是当我设置它时，它会`clearColor`显示为白色。我考虑过`colorWithPatternImage`使用透明的 PNG 图像设置背景，但我想避免这种情况。

我更喜欢尝试解决这个问题，因为依赖这两个方法调用要干净得多，而且我还想保留公开指示符的使用，该指示符在选择时变为白色，否则如果我使用`UITableViewCellSelectionNone`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:44:58.597

我建议使用 tableView:willSelectRowAtIndexPath: 并返回 nil。这样，当要选择单元格时，您仍然会收到通知。但是，它实际上不会被选中，您可以从那里自己管理选择，而无需处理控件的默认样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:15:08.353

您使用 selectedBackgroundView 覆盖蓝色

在 viewForRow: 方法中：

```
 UIView *v = [[UIView alloc] initWithFrame:CGRectZero];
    v.backgroundColor = [UIColor clearColor];
    cell.selectedBackgroundView = v; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T23:06:06.780

设置背景视图和 selectedBackgroundView：

```
 UIView *view = [[UIView alloc] initWithFrame:CGRectZero];
    view.backgroundColor = [UIColor whiteColor];
    self.backgroundView = view;

    view = [[UIView alloc] initWithFrame:CGRectZero];
    view.backgroundColor = [UIColor clearColor];
    self.selectedBackgroundView = view; 
```

然后覆盖`- (void)setHighlighted:(BOOL)highlighted animated:(BOOL)animated`

```
- (void)setHighlighted:(BOOL)highlighted animated:(BOOL)animated
{
    [super setHighlighted:highlighted animated:animated];
    self.backgroundView.hidden = highlighted;
} 
```

# linux - 是否可以向属于不同用户的进程发送信号？

> ID：13334902
> 
> 赞同：7
> 
> 时间：2012-11-11T20:01:35.333
> 
> 标签：linux, signals, posix

我需要向不同的进程发送信号以进行一些实时通信，但是该进程属于不同的用户。

例如

```
PID   user   group
1234  foo    foobar   
4321  bar    foobar 
```

我希望进程 1234 和 4321 能够相互发送信号吗？

如果我使用套接字或管道，我可以将它们的掩码设置为`rw-rw-r--`并且通信将起作用。但是我需要使用信号（普通或实时，不重要）进行通信。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T20:22:09.840

引用 kill(2):

```
For a process to have permission to send a signal it must either be privileged
(under Linux: have the CAP_KILL capability), or the real or effective user ID
of the sending process must equal the real or saved set-user-ID of the target
process.  In the case of SIGCONT it suffices when the sending and receiving
processes belong to the same session. 
```

您会发现 capabilities(7) 和 setcap(8) 很有用。

# android - 如何将速度从 LocationManager 传递给 Activity？

> ID：13334905
> 
> 赞同：0
> 
> 时间：2012-11-11T20:02:31.417
> 
> 标签：android, android-intent, locationmanager

我正在做我的最后一个项目，并且是 Android 新手。我想将速度从 LocationManager 传递给 Activity ，我试图用 Intent 传递它，我的意思是 ( `Intent j = new Intent(this, CallblockingActivity.class)`) 但它不起作用。请帮帮我。

```
public class ShowLocationActivity extends Activity {
    private TextView latituteField;
    private TextView longitudeField;
    private TextView speed;
    public float a;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.locationmanager);
        latituteField = (TextView) findViewById(R.id.TextView02);
        longitudeField = (TextView) findViewById(R.id.TextView04);
        speed = (TextView)findViewById(R.id.textspeed);
        LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        LocationListener ll = new mylocationlistener();
        lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, ll);
    }

    private class mylocationlistener implements LocationListener {
        @Override
        public void  onLocationChanged(Location location) {
            if (location != null) {
                float lat = (float) (location.getLatitude());
                float lng = (float) (location.getLongitude());
                latituteField.setText(String.valueOf(lat));
                longitudeField.setText(String.valueOf(lng));
                a=location.getSpeed();
                speed.setText("current speed" + a);

                *** **My problwm is here,I just want to pass a**

                Log.d("LOCATION CHANGED", location.getLatitude() + "");
                Log.d("LOCATION CHANGED", location.getLongitude() + "");
                Toast.makeText(ShowLocationActivity.this,
                        location.getLatitude() + "" + location.getLongitude(),
                        Toast.LENGTH_LONG).show();
            }
        }
        @Override
        public void onProviderDisabled(String provider) {
        }
        @Override
        public void onProviderEnabled(String provider) {
        }
        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:09:10.573

只需使用`Intent#putExtra()`：

```
Intent j = new Intent(ShowLocationActivity.this, CallblockingActivity.class);
j.putExtra("Speed", a);
startActivity(j); 
```

在您的新活动中读取速度：

```
Intent intent = getIntent();
float speed = intent.getFloatExtra("Speed", 0); // 0 is the default case 
```

# storage - 本地存储不适用于下拉菜单

> ID：13334914
> 
> 赞同：2
> 
> 时间：2012-11-11T20:03:36.967
> 
> 标签：storage, local

我在将数据保存到存储时遇到问题。

我正在使用文本字段和下拉菜单。

文本字段在保存时工作正常，但下拉菜单不起作用。

如您所见，我正在使用 html 5 的本地存储来保存所有内容

有谁知道问题是什么？

Woonplaats 和 favomuziek 带有下拉菜单

```
$(document).ready(function(){ 
    if (!window.localStorage){
        function createCookie(name,value,days) {
            if (days) {
                var date = new Date();
                date.setTime(date.getTime()+(days*24*60*60*1000));
                var expires = "; expires="+date.toGMTString();
            }
            else var expires = "";
            document.cookie = name+"="+value+expires+"; path=/";
        }

        function readCookie(name) {
            var result = ""
            var nameEQ = name + "=";
            var ca = document.cookie.split(';');
            for(var i=0;i < ca.length;i++) {
                var c = ca[i];
                while (c.charAt(0)==' ') c = c.substring(1,c.length);
                    if (c.indexOf(nameEQ) == 0){
                        result = c.substring(nameEQ.length,c.length);
                    }else{
                        result = "";
                    }
                }
                return(result);
            }
            localStorage = (function () {
            return {
                setItem: function (key, value) {
                    createCookie(key, value, 3000)
                },

                getItem: function (key) {
                    return(readCookie(key));
                }
            };
        })();
    }

    load_settings();

    $('#gebruikersprofiel').submit(function(event){
        event.preventDefault();
        save_settings();
    });
});

function save_settings(){
    localStorage.setItem("voornaam", $("#voornaam").val());
    localStorage.setItem("achternaam", $("#achternaam").val());
    localStorage.setItem("woonplaats", $("#woonplaats").val());
    localStorage.setItem("favomuziek", $("#favomuziek").val());

    apply_preferences_to_page();
}

function apply_preferences_to_page(){
    $("body").css("voornaam", $("#voornaam").val());
    $("body").css("achternaam", $("#achternaam").val());
    $("body").css("woonplaats", $("#woonplaats").val() );
    $("body").css("favomuziek", $("#favomuziek").val() );
}

$(document).ready(function(){

    if (!window.localStorage){
        function createCookie(name,value,days) {
            if (days) {
                var date = new Date();
                date.setTime(date.getTime()+(days*24*60*60*1000));
                var expires = "; expires="+date.toGMTString();
            }
            else var expires = "";
            document.cookie = name+"="+value+expires+"; path=/";
        }

        function readCookie(name) {
            var result = ""
            var nameEQ = name + "=";
            var ca = document.cookie.split(';');
            for(var i=0;i < ca.length;i++) {
                var c = ca[i];
                while (c.charAt(0)==' ') c = c.substring(1,c.length);
                if (c.indexOf(nameEQ) == 0){
                    result = c.substring(nameEQ.length,c.length);
                }else{
                    result = "";
                }
            }
            return(result);
        }
        localStorage = (function () {
            return {
                setItem: function (key, value) {
                    createCookie(key, value, 3000)
                },

                getItem: function (key) {
                    return(readCookie(key));
                }
            };
        })();
    }

    load_settings();

    $('#gebruikersprofiel').submit(function(event){
        event.preventDefault();
        save_settings();
    });
});

function save_settings(){
    localStorage.setItem("voornaam", $("#voornaam").val());
    localStorage.setItem("achternaam", $("#achternaam").val());
    localStorage.setItem("woonplaats", $("#woonplaats").val());
    localStorage.setItem("favomuziek", $("#favomuziek").val());

    apply_preferences_to_page();
}

function apply_preferences_to_page(){
    $("body").css("voornaam", $("#voornaam").val());
    $("body").css("achternaam", $("#achternaam").val());
    $("body").css("woonplaats", $("#woonplaats").val() );
    $("body").css("favomuziek", $("#favomuziek").val() );
} 
```

# javascript - 我的菜单按钮没有对齐

> ID：13334917
> 
> 赞同：0
> 
> 时间：2012-11-11T20:04:04.953
> 
> 标签：javascript, html, css

[http://www.spencedesign.netau.net/singaporehomemenu.html](http://www.spencedesign.netau.net/singaporehomemenu.html) 这是我页面的链接。当您单击菜单时，它会关闭或打开菜单，将您带到没有菜单的其他页面。但是，在另一页上，菜单按钮没有排列。即使每个页面上的按钮代码都相同。有人可以告诉我我能做些什么来解决这个问题。另外，我不知道任何javascript，所以我不得不制作两个页面，而不是让菜单按钮作为实际按钮工作并在一页上打开/关闭菜单。如果有人知道javascript，并且知道一种使上述场景成为可能的简单方法，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T21:23:00.017

你可以使用javascript来做到这一点。将此添加到您的 <head> 标记中：

```
<script type="text/javascript">
    function showMenu() {
        if (menu.style.display != "none") {
            menu.style.display = "none";
        }
        else {
            menu.style.display = "block";
        }
    }
</script> 
```

并在你的 <body> 部分写下：

```
<div id="menuButton" onclick="showMenu()">Menu
</div> 
```

这应该可以解决问题。:)

# php - Actionscript3/PHP：Swf 未加载到我的网站

> ID：13334918
> 
> 赞同：-1
> 
> 时间：2012-11-11T20:04:16.017
> 
> 标签：php, actionscript, flash

我不知道为什么，但 SWF 没有在[我的网站上](http://www.ourvision.co.cc)打开。您可以看到 swf 没有加载。如果您尝试在新页面中打开图像，它可以工作。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:09:46.200

您正在尝试使用`<img>`标签加载 SWF 文件，这就是它未加载的原因。要嵌入 SWF 文件，您必须将`<img>`标签替换为以下内容：

```
<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="550" height="400" id="movie_name" align="middle">
    <param name="movie" value="header.swf"/>
    <!--[if !IE]>-->
    <object type="application/x-shockwave-flash" data="header.swf" width="550" height="400">
        <param name="movie" value="header.swf"/>
    <!--<![endif]-->
        <a href="http://www.adobe.com/go/getflash">
            <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player"/>
        </a>
    <!--[if !IE]>-->
    </object>
    <!--<![endif]-->
</object> 
```

注意标签的宽度和高度。它们必须与您的 SWF 文件匹配。

# c++ - 您知道任何使用非递归 make 方法管理构建的构建工具吗？

> ID：13334922
> 
> 赞同：4
> 
> 时间：2012-11-11T20:04:34.767
> 
> 标签：c++, scripting, build, makefile, non-recursive

我一直在搜索stackoverflow，但我没有找到一个令人满意的答案来解决我的问题。

Miller 的论文[Recursive Make Considered Harmful](http://miller.emu.id.au/pmiller/books/rmch/)在社区中广为人知。基本上，多年来我一直在使用[非递归 make](http://evbergen.home.xs4all.nl/nonrecursive-make.html)来管理我的项目的构建。到目前为止，我在非递归 make 方面的经验非常积极。

为了给其他人一些启发，我已经成功构建了包含大约 200 万行代码的 C++ 代码库。我能够正确管理依赖项。非递归方法的好处是我们可以利用并行构建。

我已经证明，[这份报告](https://stackoverflow.com/questions/559216/what-is-your-experience-with-non-recursive-make)中的数据与至少 5 个大型项目是一致的。但是我一直在手动编写/移植非递归make的makefile。

正如您可能想象的那样，对于大型项目，这涉及大量工作。此外，主要挑战是新团队成员很难理解/修改/调试现有的 makefile。

所以我的问题是：社区中是否有人知道任何可以进行非递归生成但在更高抽象级别管理生成文件的工具/脚本？我想了解是否有人编写了一些脚本或工具来从一些简单的输入规范生成最终的非递归生成文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T05:49:13.883

我正要阅读这篇论文，但似乎主要问题是微小更改导致的构建时间很长。

虽然构建系统一般都很糟糕（我有自己制作的幻想），但我不得不建议 CMake（就像 hyde 所做的那样）。

虽然不完美，但对于多个文件的项目，它优于普通制作。脚本语言有些丑陋，但比 make 的要好。这需要一点时间来适应，因为它抽象出了很多你会在 make 中手动编写的内容，但我建议这样做： [http ://web.cs.swarthmore.edu/~adanner/tips/cmake.php](http://web.cs.swarthmore.edu/~adanner/tips/cmake.php)

# linux - 禁用回溯

> ID：13334927
> 
> 赞同：3
> 
> 时间：2012-11-11T20:05:37.257
> 
> 标签：linux, exploit

我正在我的 backtrack 5 笔记本电脑上训练堆溢出漏洞。但是，回溯似乎可以防止这些攻击。这是我尝试破坏 malloc 分配块的元数据时得到的结果。

```
Starting program: /root/exploit/basicheap `python -c 'print "A"*1024+"\xff\xff\xff\xff"+"\x01\x02\x03\x04"'`
buf1=0x804b008 buf2=0x804b410
*** glibc detected *** /root/exploit/basicheap: double free or corruption (out): 0x0804b410 ***
======= Backtrace: =========
/lib/tls/i686/cmov/libc.so.6(+0x6b591)[0xb7edf591]
/lib/tls/i686/cmov/libc.so.6(+0x6cde8)[0xb7ee0de8]
/lib/tls/i686/cmov/libc.so.6(cfree+0x6d)[0xb7ee3ecd]
/root/exploit/basicheap[0x80484ee]
/lib/tls/i686/cmov/libc.so.6(__libc_start_main+0xe6)[0xb7e8abd6]
/root/exploit/basicheap[0x80483f1]
======= Memory map: ========
08048000-08049000 r-xp 00000000 08:01 13377588   /root/exploit/basicheap
08049000-0804a000 r--p 00000000 08:01 13377588   /root/exploit/basicheap
0804a000-0804b000 rw-p 00001000 08:01 13377588   /root/exploit/basicheap
0804b000-0806c000 rw-p 00000000 00:00 0          [heap]
(ETC...)

Program received signal SIGABRT, Aborted.
0xb7fe2430 in __kernel_vsyscall () 
```

有没有办法禁用这种保护？它是由内核处理还是在编译期间由 gcc 设置（我希望我可以使用 -fno-stack-protector 之类的选项禁用它以删除 gcc 中的堆栈溢出保护）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T21:04:36.603

该消息来自 glibc 的实现`free`，它检测堆损坏。它不是程序中的编译时选项，也不是内核检查。

尝试：

```
MALLOC_CHECK_=0 /root/exploit/basicheap ... 
```

glibc的`malloc(3)`手册页说，将该环境变量设置为 0，“任何检测到的堆损坏都会被静默忽略”，因此它可能只是忽略您的堆损坏并继续运行，但它可能会成功崩溃。

另请参阅 的`M_CHECK_ACTION`选项`mallopt(3)`，它提供了有关此检查代码的更多详细信息。

# javascript - JavaScript 打印数组到 id

> ID：13334933
> 
> 赞同：0
> 
> 时间：2012-11-11T20:06:18.167
> 
> 标签：javascript

我正在尝试将数组打印到页面中的特定 id。我的数组打印得很好，但不知道如何让它打印到那个 id。

这打印出我想要的内容：

```
for(var i=0;i<playerCards.length;i++){
    document.write('<img src="images/cards/card-' + playerCards[i] + '.jpg" width="58" height="79" alt="playercards" /> ');
} 
```

我试图让它像这样工作：

```
document.getElementById("player").innerHTML="THE ABOVE LOOP"; 
```

我曾尝试将两者结合起来并四处移动，但似乎无法弄清楚如何将其打印出来。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:08:56.240

```
var str = '';
for(var i = 0; i < playerCards.length; i++){
    str += '<img src="images/cards/card-' + playerCards[i] + '.jpg" width="58" height="79" alt="playercards" />';
}

document.getElementById("player").innerHTML = str; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:32:48.270

这里：

```
document.getElementById( 'player' ).innerHTML = playerCards.map(function ( card ) {
    return '<img src="images/cards/card-' +card + '.jpg" width="58" height="79" alt="playercards"> ';
}).join( '' ); 
```

请注意，为了能够选择`#player`元素，您必须在 DOM 准备好*后*执行此代码，方法是将其放入“DOMContentLoaded”事件处理程序中。

# php - How to add uri segment as parameter into a function?

> ID：13334934
> 
> 赞同：0
> 
> 时间：2012-11-11T20:06:19.303
> 
> 标签：php, codeigniter, url-routing

I will try to illustrate what I am trying to do :

I want my url's like :

```
www.mysite.com/abc-university
              /def-university
              /fde-university 
```

Before "-university" is the name of university. All my segment(1) ends with university.

I have a class called `University`.In it; there is `get_university()` function.

In routes.php, I wrote:

```
$route['(:any)'] = "university/get_university"; 
```

Here is what my class looks like:

```
class University extends CI_Controller {

  function __construct() {
    parent::__construct();
    $this->load->model('university_model');
  }

  function get_university($university_segment){

    $query = $this->university_model->get_from_university($university_segment);

    $row = $query->row();

    echo "Welcome to " . $row->university_name . "page";                

   } 
} 
```

`$university_segment` is "/abc_university.

I want to take segment-1(abc_university) into `get_university($university_segment)` function as parameter and fetch information from database according to that university.

I tried even `_remap()` function but I couldn't. Thank you...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:38:27.160

```
function get_university(){
$university_segment=$this->uri->segment(1);
$query = $this->university_model->get_from_university($university_segment);

$row = $query->row();

echo "Welcome to " . $row->university_name . "page";                

} 
```

# java - Python Java Integration

> ID：13334937
> 
> 赞同：3
> 
> 时间：2012-11-11T20:06:33.920
> 
> 标签：java, python, voice-recognition, jpype

I'm developing a program completely written in Python but I need to integrate a Java code inside the file console.py. I want to integrate Sphinx4's program to give GNS3 the capability of voice recognition.

Is it possible? What do I need to do this?

# .net - AutoMapper flattening of nested mappings asks for a custom resolver

> ID：13334938
> 
> 赞同：13
> 
> 时间：2012-11-11T20:06:46.480
> 
> 标签：.net, mapping, automapper, dto

I'm somewhat new to AutoMapper and wanted to map a POCO-ish object to a perhaps more complex DTO, the latter tries to be a representation of a [Google Books API's Volume](https://developers.google.com/books/docs/v1/reference/volumes) resource:

**Book.cs**

```
public class Book
{
    public string Isbn10 { get; set; }
    public string Isbn13 { get; set; }
    public string Title { get; set; }
    public string Author { get; set; }
    public string Publisher { get; set; }
    public DateTime Publication { get; set; }
    public int Pages { get; set; }
    public string Description { get; set; }
    public bool InStock { get; set; }
} 
```

**BookDto.cs**

```
public class BookDto
{
    public string Kind { get; set; }
    public string Id { get; set; }
    public VolumeInfo VolumeInfo { get; set; }
}

public class VolumeInfo
{
    public string Title { get; set; }
    public List<string> Authors { get; set; }
    public string Publisher { get; set; }
    public string PublishedDate { get; set; }
    public string Description { get; set; }
    public int PageCount { get; set; }
    public List<IndustryIdentifier> IndustryIdentifiers { get; set; }
}

public class IndustryIdentifier
{
    public string Type { get; set; }
    public string Identifier { get; set; }
} 
```

So according to the [documentation](https://github.com/AutoMapper/AutoMapper/wiki/Nested-mappings) *we could simply flatten* the nested type:

**AutoMapperConfigurator.cs**

```
public static class AutoMapperConfigurator
{
    public static void Configure()
    {
        Mapper.CreateMap<Book, BookDto>()
            .ForMember(dto => dto.Id, options => options.Ignore())
            .ForMember(dto => dto.Kind, options => options.Ignore())
            .ForMember(dto => dto.VolumeInfo.Title, options => options.MapFrom(book => book.Title))
            .ForMember(dto => dto.VolumeInfo.Authors, options => options.MapFrom(book => book.Author.ToArray()))
            .ForMember(dto => dto.VolumeInfo.Publisher, options => options.MapFrom(book => book.Publisher))
            .ForMember(dto => dto.VolumeInfo.PublishedDate, options => options.MapFrom(book => book.Publication))
            .ForMember(dto => dto.VolumeInfo.Description, options => options.MapFrom(book => book.Description))
            .ForMember(dto => dto.VolumeInfo.PageCount, options => options.MapFrom(book => book.Pages))
            ;
    }
} 
```

But unfortunately when running the `Mapper.AssertConfigurationIsValid()` Test I'm getting the following error:

> System.ArgumentException : Expression 'dto => dto.VolumeInfo.Title' must resolve to top-level member and not any child object's properties. Use a custom resolver on the child type or the AfterMap option instead. Parameter name: lambdaExpression

So now following that advice trying with AfterMap:

```
public static class AutoMapperConfigurator
{
    public static void Configure()
    {
        Mapper.CreateMap<Book, BookDto>()
            .ForMember(dto => dto.Id, options => options.Ignore())
            .ForMember(dto => dto.Kind, options => options.Ignore())
            .AfterMap((book, bookDto) => bookDto.VolumeInfo = new VolumeInfo 
                { 
                    Title = book.Title,
                    Authors = new List<string>(){ book.Author },
                    Publisher = book.Publisher,
                    PublishedDate = book.Publication.ToShortDateString(),
                    Description = book.Description,
                    PageCount = book.Pages
                });
    }
} 
```

When running the test again I'm now getting this message:

> Unmapped members were found. Review the types and members below. Add a custom mapping expression, ignore, add a custom resolver, or modify the source/destination type Book -> BookDto (Destination member list) Dotnet.Samples.AutoMapper.Book -> Dotnet.Samples.AutoMapper.BookDto (Destination member list) VolumeInfo

Should I create additional mappings between the nested classes? Any guidance will be sincerely appreciated, thanks much in advance.

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-11T23:31:32.487

在将 .ForMember 与 VolumnInfo 映射的内部映射一起使用之前，我已经做了类似的事情：

```
public static class AutoMapperConfigurator
{
    public static void Configure()
    {
        Mapper.CreateMap<Book, VolumeInfo>()
            .ForMember(dto => dto.Authors, options => options.MapFrom(book => book.Author.Split(',')))
            .ForMember(dto => dto.PublishedDate, options => options.MapFrom(book => book.Publication))
            .ForMember(dto => dto.PageCount, options => options.MapFrom(book => book.Pages))
            .ForMember(dto => dto.IndustryIdentifiers, options => options.Ignore());

        Mapper.CreateMap<Book, BookDto>()
            .ForMember(dto => dto.Id, options => options.Ignore())
            .ForMember(dto => dto.Kind, options => options.Ignore())
            .ForMember(dto => dto.VolumeInfo, options => options.MapFrom(book => Mapper.Map<Book, VolumeInfo>(book)));
    }
} 
```

以下是一些验证功能的单元测试：

```
[TestFixture]
public class MappingTests
{
    [Test]
    public void AutoMapper_Configuration_IsValid()
    {
        AutoMapperConfigurator.Configure();
        Mapper.AssertConfigurationIsValid();
    }

    [Test]
    public void AutoMapper_MapsAsExpected()
    {
        AutoMapperConfigurator.Configure();
        Mapper.AssertConfigurationIsValid();

        var book = new Book
            {
                Author = "Castle,Rocks",
                Description = "Awesome TV",
                InStock = true,
                Isbn10 = "0123456789",
                Isbn13 = "0123456789012",
                Pages = 321321,
                Publication = new DateTime(2012, 11, 01),
                Publisher = "Unknown",
                Title = "Why I Rock"
            };

        var dto = Mapper.Map<Book, BookDto>(book);

        Assert.That(dto.Id, Is.Null);
        Assert.That(dto.Kind, Is.Null);
        Assert.That(dto.VolumeInfo, Is.Not.Null);
        Assert.That(dto.VolumeInfo.Authors, Is.Not.Null);
        Assert.That(dto.VolumeInfo.Authors.Count, Is.EqualTo(2));
        Assert.That(dto.VolumeInfo.Authors[0], Is.EqualTo("Castle"));
        Assert.That(dto.VolumeInfo.Authors[1], Is.EqualTo("Rocks"));
        Assert.That(dto.VolumeInfo.Description, Is.EqualTo("Awesome TV"));
        Assert.That(dto.VolumeInfo.IndustryIdentifiers, Is.Null);
        Assert.That(dto.VolumeInfo.PageCount, Is.EqualTo(321321));
        Assert.That(dto.VolumeInfo.PublishedDate, Is.EqualTo(new DateTime(2012, 11, 01).ToString()));
        Assert.That(dto.VolumeInfo.Publisher, Is.EqualTo("Unknown"));
        Assert.That(dto.VolumeInfo.Title, Is.EqualTo("Why I Rock"));
    }
} 
```

# ios - Different XIB files for iPhone 5 automatically

> ID：13334939
> 
> 赞同：1
> 
> 时间：2012-11-11T20:06:56.480
> 
> 标签：ios, xib

I am updating my app to support the new iPhone 5.

I was wondering if there's any sort of way that you can create a different XIB file for the iPhone 5 that will load automatically, like when images with "@2x" in the end are loaded automatically when an iPhone 4 is used, without having to make any changes to the code itself.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T04:12:24.413

据我所知，没有任何简单的方法可以在没有额外代码的情况下为 iPhone5 加载正确的 xib。但是，我可以建议[这个简单的类](https://github.com/eagle-dan1349/EDDeviceHardware)来检测 iPhone5。此外，这里还有一个为 iPhone5 选择正确图像的[类别](http://www.sourcedrop.net/FY53a14b0127f)。您可以对 initWithNibName:bundle: 方法执行相同的操作。

# objective-c - Detect Overlapping Windows

> ID：13334941
> 
> 赞同：0
> 
> 时间：2012-11-11T20:07:05.577
> 
> 标签：objective-c, macos, cocoa

Is there any way I can detect if windows from my application are overlapping ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:27:09.323

在 NSApp 中使用窗口

```
//find overlaps
for (NSWindow *w in [NSApp windows]) {
   for (NSWindow *w2 in [NSApp windows]) {
      if (CGRectIntersectsRect(w.frame, w2.frame) || CGRectIntersectsRect(w2.frame, w.frame)) {
          // add the pairs w & w2 up in a NSDictionary with w as key and an array of w2s it intersects 
          // ....
      }
   }
}

//handle all the queued overlaps.... 
```

# wpf - How can I bind to tag from style in wpf?

> ID：13334943
> 
> 赞同：3
> 
> 时间：2012-11-11T20:07:10.320
> 
> 标签：wpf, binding

I'm implementing a search textbox; could you please help me with binding to TextBox.Tag?

Style

```
<Style x:Key="SearchTextBox" TargetType="{x:Type TextBox}">
      <Style.Resources>
       <VisualBrush x:Key="CueBannerBrush" AlignmentX="Left" AlignmentY="Center" Stretch="None">
          <VisualBrush.Visual>
            <Label Content="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Tag}" Foreground="{StaticResource SearchTextBox.Foreground}" FontSize="{StaticResource SearchTextBox.FontSize}"/>
          </VisualBrush.Visual>
        </VisualBrush>
      </Style.Resources>
      <Setter Property="FontSize" Value="{StaticResource SearchTextBox.FontSize}" />
      <Setter Property="Foreground" Value="{StaticResource SearchTextBox.TextForeground}" />
      <Setter Property="MinWidth" Value="200" />
          <Style.Triggers>
            <Trigger Property="Text" Value="{x:Static sys:String.Empty}">
              <Setter Property="Background" Value="{StaticResource CueBannerBrush}" />
            </Trigger>
            <Trigger Property="Text" Value="{x:Null}">
              <Setter Property="Background" Value="{StaticResource CueBannerBrush}" />
            </Trigger>
            <Trigger Property="IsKeyboardFocused" Value="True">
              <Setter Property="Background" Value="White" />
            </Trigger>
          </Style.Triggers>
    </Style> 
```

Usage

```
<TextBox Style="{StaticResource SearchTextBox}" Tag="Search templates" /> 
```

How can I get the binding to work?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T21:27:44.257

这篇文章与你的非常相似：[WPF Bind to parent property from within nested element using style](https://stackoverflow.com/questions/3639537/wpf-bind-to-parent-property-from-within-nested-element-using-style)

虽然，它并没有真正提供代码示例，所以这里有一些 xaml 可以用作当前方法的替代方法。

```
<Style x:Key="SearchTextBox" BasedOn="{StaticResource {x:Type TextBox}}" TargetType="{x:Type TextBox}">
  <Style.Setters>
    <Setter Property="Tag" Value=""/>
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type TextBox}">
          <Grid>
            <ScrollViewer x:Name="PART_ContentHost" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
            <TextBlock x:Name="textBlock" Opacity="0.345" Text="{TemplateBinding Tag}" TextWrapping="Wrap" Visibility="Hidden" />
          </Grid>
          <ControlTemplate.Triggers>
            <MultiTrigger>
              <MultiTrigger.Conditions>
                <Condition Property="IsFocused" Value="False" />
                <Condition Property="Text" Value="" />
              </MultiTrigger.Conditions>
              <Setter Property="Visibility" TargetName="textBlock" Value="Visible" />
            </MultiTrigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style.Setters>
</Style> 
```

而且你仍然会用你已经拥有的方式编写你的文本框代码：

```
<TextBox Style="{StaticResource SearchTextBox}" Tag="Search templates" /> 
```

# php - jQuery: .get() callback accepting multiple parameters

> ID：13334949
> 
> 赞同：0
> 
> 时间：2012-11-11T20:08:28.577
> 
> 标签：php, jquery

I am making a comics website... it will have two sub sites: Comics and Artwork.

When someone clicks on a specific sub site, a "site" parameter will be passed in (comics or artwork) which specifies from which table (comics or artwork) images should be queried.

That all works... except I am trying to add this extra parameter to this search function which currently only accepts the input string, but doesn't know which table to search.

So, I have a search function that accepts input from an input box:

```
<span class="search"><input type="text" onkeyup="search(this.value)" name="input" value="" /></span> 
```

JQuery:

```
function search() {     
 $.get("./scripts/search.php", {"_input" : $('input[name=input]').val()},
    function(returned_data) {
                $("#output").html(returned_data);
    }
  );
} 
```

PHP search script... gets search string input

```
 $input = (isset($_GET['_input']) ? ($_GET['_input']) : 0); 
```

But I'd also like to pass in a "_site" parameter that specifies from which subsite on my website images should be returned from:

```
function search() {     
 $.get("./scripts/search.php", {"_input" : $('input[name=input]').val(), "_site" :     $('input[name=site]'.val()},
    function(returned_data) {
                $("#output").html(returned_data);
    }
); 
```

}

So the PHP search script would get search string, but also know which site it's on:

```
$input = (isset($_GET['_input']) ? ($_GET['_input']) : 0); 
$site = (isset($_GET['_site']) ? ($_GET['_site']) : null); 
```

Is it possible to send in multiple parameters through the JQuery? Is that even the right way to do it?

------------EDIT This is how the "site" search param is affecting the search query

```
$site = (isset($_GET['_site']) ? ($_GET['_site']) : null);
echo "SEARCH SITE = " . $site;

if($site == "artwork") {
        $id = "artid";
        $title = "arttitle";
        $path = "artpath";
        $thumb = "artthumb";
        $catid = "artcatidFK";
        $table = "artwork";

        $thumbpath = "./images/Artwork/ArtThumbnails/";
}
else {
        $id = "imgid";
        $title = "imgtitle";
        $path = "imgpath";
        $thumb = "imgthumb";
        $catid = "imgcatidFK";
        $table = "comics";

        $thumbpath = "./images/Comics/ComicThumbnails/";
}

$imgpaths = $mysqli->query("SELECT $id, $title, $path, $thumb, $catid FROM $table");
mysqli_close($mysqli); 
```

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:11:51.347

是的，就像使用逗号一样简单

```
$.get("test.php", { name: "John", time: "2pm" } ); 
```

从 JQuery 站点复制和粘贴。

[参考： http](http://api.jquery.com/jQuery.get/#entry-examples) ://api.jquery.com/jQuery.get/#entry-examples

所以你所做的是正确的，检查你的 () 标签，因为你错过了一个

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T20:12:49.717

是的，这是可能的。您在第二个示例中做得恰到好处，希望您`)`在代码中忘记了一个`$('input[name=site]')`

```
function search() {     
 $.get("./scripts/search.php", {"_input" : $('input[name=input]').val(), "_site" :     $('input[name=site]').val()},
    function(returned_data) {
                $("#output").html(returned_data);
    }
);
} 
```

# ruby-on-rails - Rails nested form field counter

> ID：13334951
> 
> 赞同：2
> 
> 时间：2012-11-11T20:08:38.060
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-forms

I'm using [https://github.com/ryanb/nested_form](https://github.com/ryanb/nested_form) for my nested form. The nested form works fine, I'm now looking to have a sort of counter as I want to store the nested attributes in running number sequence. It should count+1 when a link_to_add is used and count-1 when link_to_remove

The nested portion:

```
<%= f.fields_for :instructions do |instruction| %>
  <%= instruction.label :"instruction #{instruction}" %>
  <%= instruction.text_field :instruction %>
  <%= instruction.link_to_remove "Remove this instruction" %>
<% end %>
<p>
<%= f.link_to_add "Add instruction", :instructions, class: "btn btn-small btn-primary"  %>
</p> 
```

I'm thinking of using a variable to do a simple count, but i'm not sure how to trigger the increment. I've tried adding to the link_to_add, link_to_remove field but it stop with error. I'm still new to rails and pardon me if this a elementary question

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:39:59.150

如果你需要一个序列，你可以使用一个序列化 gem ，[例如](https://github.com/birkirb/acts_as_serializable)或者有一个 sequence_no 字段。如果您只需要一个柜台并且不关心订单（或已在控制器/模型中订购），尽管我只会在“展示”中这样做......

```
<% just_a_counter = 0 %> #creates counter and sets to 0
<%= f.fields_for :instructions do |instruction| %>
  <% just_a_counter += 1 %> #increments counter
  S/No : <%= just_a_counter %> #displays
  #your other code
<% end %> 
```

# android - Graphing a LinkedList in Android with AChartEngine (dynamic)

> ID：13334953
> 
> 赞同：2
> 
> 时间：2012-11-11T20:08:47.000
> 
> 标签：android, graph, linked-list, achartengine, waveform

We are building an app that is supposed to do several things based on an input text file. First it parses the data in the text file and extracts the useful information and builds a linkedList. The Linked List is a group of BinaryBlock objects. From there we want to dynamically graph the getwfs() function of the BinaryBlocks. At this point, we have got the graph somewhat working but instead of graphing over time it graphs in one big clump and scrolls all the way to the end.

BinaryBlock is listed here:

This is fully tested and functional and really only important in the larger context of the program:

```
// BinaryBlock.java

public class BinaryBlockLite {

private int pwda[], wfs[];

String lineData;

public BinaryBlockLite( String data ){ // class constructor
    lineData = data;
    pwda = new int[5];
    wfs = new int[4];

    setWfs();

}//end constructor

    public String WfsToString(){
    if (wfs.length == 0)
        return "";

    String data = "Channel 2: ";
    for(int i = 0; i < wfs.length; ++i ){
        data = data + "wfs[" + i + "]=" + wfs[i] + " ";
    }
    return data + "\n";
}

  //===========================================================
 //    Setters
//=============================================================

//read the 5 individual bytes of the Pwda from LineData and into the pwda[] array  
private void setPwda(){
    int location = 13;
    for(int i = 0; i < 5; ++i){

        String temp = "" + lineData.charAt(++location) + lineData.charAt(++location);

        pwda[i] = Integer.parseInt(temp, 16);
    }
}

//logically manipulate the 5 bytes of the PWDA into 4 10-bit WFSs
private void setWfs(){
    setPwda();
    int j = 0;

    for (int i = 0; i < 4; ++i){
        wfs[i] = ((pwda[j] << 2) | (( pwda[j + 1] >> 6) & 0x03)) & 0x03ff;
        wfs[++i] = ((pwda[j + 1] << 4) | (( pwda[j + 2] >>> 4) & 0x0f)) & 0x03ff;
        wfs[++i] = ((pwda[j + 2] << 6) | (( pwda[j + 3] >>> 2) & 0x3f)) & 0x03ff;
        wfs[++i] = ((pwda[j + 3] << 8) | (( pwda[j + 4] >>> 0) & 0xff)) & 0x03ff;
    }
}

  //===========================================================
 //    Getters
//=============================================================

public int[] getPwda(){
    return pwda;
}
public int[] getWfs(){
    return wfs;
}

}//end BinaryBlock Class 
```

The main harness is listed here: The problem is simply that instead of repainting each time and graphing it across the screen, it graphs all of the point at one time.

```
//MainActivity.java

import android.os.Bundle;
import android.app.ActionBar.LayoutParams;
import android.app.Activity;
import android.content.Context;
import android.content.res.AssetManager;
import android.graphics.Color;
import android.view.Menu;

import android.view.View;
import android.widget.Button;
import android.widget.LinearLayout;

import com.smith.fsu.wave.BinaryBlockLite;

import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.LinkedList;
import java.util.ListIterator;

import org.achartengine.ChartFactory;
import org.achartengine.GraphicalView;
import org.achartengine.model.XYMultipleSeriesDataset;
import org.achartengine.model.XYSeries;
import org.achartengine.renderer.XYMultipleSeriesRenderer;
import org.achartengine.renderer.XYSeriesRenderer;

public class MainActivity extends Activity {

    public static LinkedList<BinaryBlockLite> list;
    Button btnMain;
    Boolean fileLoaded = false;
    int xTick = 0,
        lastMinX = 0; 
    Context context = this;

    //

    ////////////////////////////////////////////////////////////////
    //import test

    private XYMultipleSeriesDataset WFDataset = new XYMultipleSeriesDataset();
     private XYMultipleSeriesRenderer WaveFormRenderer = new XYMultipleSeriesRenderer();
     private XYSeries WFCurrentSeries;
     private GraphicalView WFChartView;

    //////////////////////////////////////////////////////////////////////////

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        list = new LinkedList<BinaryBlockLite>();
        btnMain=(Button)findViewById(R.id.btnMain);
        WaveFormRenderer.setAxisTitleTextSize(16);
        WaveFormRenderer.setChartTitleTextSize(20);
        WaveFormRenderer.setLabelsTextSize(15);
        WaveFormRenderer.setLegendTextSize(15);
        WaveFormRenderer.setMargins(new int[] {20, 30, 15, 0});
        WaveFormRenderer.setAxesColor(Color.YELLOW);

        String seriesTitle = "Input Data";
        XYSeries series = new XYSeries(seriesTitle);

        WFDataset.addSeries(series);
        WFCurrentSeries = series;

        XYSeriesRenderer renderer = new XYSeriesRenderer();
        renderer.setColor(Color.GREEN);
        WaveFormRenderer.addSeriesRenderer(renderer);
        WaveFormRenderer.setXAxisMin(0.0);
        WaveFormRenderer.setXAxisMax(500);

//      renderer.setFillBelowLine(true) ;
//      renderer.setFillBelowLineColor(Color.BLUE);
    }

    public void chartClick(View view) throws IOException{

                String strData = "";
                AssetManager amInput = context.getAssets();
                BufferedReader reader;
                InputStream is = null;
                try {
                    is = amInput.open("Dinamap-Data.txt");
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                reader = new BufferedReader(new InputStreamReader(is));

                try {
                    while( (strData = reader.readLine()) != null ) {

                        addBlock( strData ); //call to paint line

                    }
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }//while loop
                try {
                    reader.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

   }//end mainClick() method for btnMain

    public void writeClick(View view){
        //write decimal data for wfs out to file from LinkedList<BinaryBlock>
        //using WfsToString() method of BinaryBlock class in separate thread
        (new Thread(new Runnable() {
            @Override
            public void run() {
                FileOutputStream fos = null;
                try {
                    fos = openFileOutput("wfs.txt", Context.MODE_WORLD_READABLE);
                } catch (FileNotFoundException e1) {
                    e1.printStackTrace();
                }
                ListIterator<BinaryBlockLite> itr = list.listIterator();
                while (itr.hasNext()){
                    String temp = itr.next().WfsToString();
                    try {
                        fos.write(temp.getBytes());
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }
                try {
                    fos.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }

            }
        })).start();
        btnMain.setEnabled(false);
    }

    private void addBlock(final String strData) {
        new Thread(new Runnable() { 
          public void run() { 

                int wfs[];

                //read line into binaryBlockLite object and store object in Linked List
                BinaryBlockLite bb = new BinaryBlockLite(strData);
                list.add(bb);

                //get the wfs data from the BinaryBlockLite object
                wfs = new int[bb.getWfs().length];
                wfs = bb.getWfs();

                //grab each wfs individually and paint to the chart, and increment xTick
                for (int k = 0; k < wfs.length; ++k){
                    /* check if we need to shift the x axis */
                    if (xTick > WaveFormRenderer.getXAxisMax()) {
                        WaveFormRenderer.setXAxisMax(xTick);
                        WaveFormRenderer.setXAxisMin(++lastMinX);
                    }

                    if (wfs[k] > 1000){
                        WFCurrentSeries.add(xTick, WFCurrentSeries.getY(xTick - 1));
                    }   
                    else{
                        WFCurrentSeries.add(xTick, wfs[k]);
                    }   
                    ++xTick;    
                }
                WFChartView.repaint();

            } 
        }).start(); 

    }

    @Override
    protected void onResume() {

        super.onResume();
        if (WFChartView == null) {
            LinearLayout layout = (LinearLayout) findViewById(R.id.WFchart);
            WFChartView = ChartFactory.getLineChartView(this, WFDataset, WaveFormRenderer);

            layout.addView(WFChartView, new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
//          boolean enabled = WFDataset.getSeriesCount() > 0;
//          setSeriesEnabled(enabled);
          } else {
              WFChartView.repaint();
          }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

I think it's either super simple or a threading issue which is something that I haven't played with enough. Any help would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:12:47.417

查看代码，我看到您将所有数据添加到系列中，然后调用`repaint`.

如果您希望数据逐渐添加，则将循环内部移动`repaint`并`for`放入`Thread.sleep()`内部，以让 UI 线程有机会实际执行`repaint`.

# java - how to pass java-script array into JAVA array using AJAX

> ID：13334954
> 
> 赞同：0
> 
> 时间：2012-11-11T20:08:48.887
> 
> 标签：java, javascript, ajax, json, jsp

I am trying to post an array of JavaScript into an array of Strings in Java. It goes like this...

My JavaScript code:

```
var quantity_arr = new Array();

for (var i=0; i< <%= cart.size() %>; i++) {
    quantity_arr[i] = document.getElementsByClassName("quantity")[i].value;
}
xmlhttp.send("sum_of_order="+sum_of_order+"&credits_number="+credits_no+"&credit_card_number="+credit_card_number+"&quantity_arr="+quantity_arr); 
```

This is my Java code:

```
String[]  myParams =new String[cart.size()];
String order_id=Integer.toString(temp);
String customer_id="'"+session.getAttribute("user_id")+"'";
String date= "15/29/12";
String sum=request.getParameter("sum_of_order");
String credit_card= "'"+request.getParameter("credit_card_number")+"'";
String credits="'"+request.getParameter("credits_number")+"'";
myParams = request.getParameterValues("quantity_arr"); 
```

All the params works fine except the `myParams array` that gets nothing. Can someone help me with this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T20:21:42.130

请看： http: [//support.dataweb.com/Help/default.view](http://support.dataweb.com/Help/default.view?Topic=Request.getParameterValues) ?Topic=Request.getParameterValues ()

基本上，你不能直接通过，`"quantity_arr="+quantity_arr`但你必须使用：

```
"quantity_arr="+quantity_arr[0]+"&quantity_arr="+quantity_arr[1]+"&quantity_arr="+quantity_arr[2]+ ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:13:52.340

尝试

```
String[]  myParams = request.getParameterValues("quantity_arr").split(","); 
```

# java - Deserialize / unmarshal generic list from XML to list in Android

> ID：13334956
> 
> 赞同：7
> 
> 时间：2012-11-11T20:08:54.433
> 
> 标签：java, android, web-services, jaxb, marshalling

I made a webservice in java with a method that returns a string (a generic list in XML format). I consume this webservice from Android, and I get this string, but after several tries the Android emulator just crashes when trying to deserialize the string. This is an example for the string I get:

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<peliculas>
    <pelicula>
        <id>18329</id>
        <poster>http://cache-cmx.netmx.mx/image/muestras/5368.rrr.jpg</poster>
        <titulo>007 Operaci&amp;oacute;n Skyfall</titulo>
    </pelicula>
...
</peliculas> 
```

This is the class in the webservice:

```
@XmlRootElement
public class Peliculas{

    @XmlElement(name="pelicula")
    protected List<Pelicula> peliculas;
    public Peliculas(){ peliculas = new ArrayList<Pelicula>();}

    public Peliculas(List<Pelicula> pe){
        peliculas = pe;
    }

    public List<Pelicula> getList(){
        return peliculas;       
    }

    public void add(Pelicula pelicula) {
        peliculas.add(pelicula);
    }
} 
```

****__*_*__*_*__***EDIT****_*__*_*__*_*__*_*__*_*_****

 **Seems like you can't use JAXB with Android, and there's better/lighter libraries for that. so I tried Simple XML. This is the method:

```
public Peliculas unmarshal(String xml) throws Exception{            
    Peliculas peliculas = new Peliculas();  
    Serializer serializer = new Persister();
    StringBuffer xmlStr = new StringBuffer( xml );
    peliculas = serializer.read(Peliculas.class, ( new StringReader( xmlStr.toString() ) )  );
    return peliculas;
} 
```

BUT I get this exception, seems like it can't save data in object:

```
11-12 20:30:10.898: I/Error(1058): Element 'Pelicula' does not have a match in class app.cinemexservice.Pelicula at line 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T01:44:07.587

我认为你做得对，试试 API 中给出的这段代码。

```
JAXBContext jc = JAXBContext.newInstance( "add your class's full qualified class name here" );
Unmarshaller u = jc.createUnmarshaller();
Object o = u.unmarshal( xmlSource ); 
```

我认为您可以将 Object o 转换为您的类型。请参考这里。[http://jaxb.java.net/nonav/2.2.4/docs/api/javax/xml/bind/Unmarshaller.html](http://jaxb.java.net/nonav/2.2.4/docs/api/javax/xml/bind/Unmarshaller.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:22:56.450

我使用 SAX 解析文件，然后手动将其转换为对象。这是代码：

```
public List<Pelicula> unmarshal(String xml) throws Exception{           
        List<Pelicula> peliculas = new ArrayList<Pelicula>();       
        InputStream is = new ByteArrayInputStream(xml.getBytes("UTF-8"));
        XmlPullParser parser = Xml.newPullParser(); 
        char[] c;
        String id="", titulo="", poster="", atributo="";
        int datos =0;
        try{ 
            parser.setInput(is, "UTF-8"); 
            int event = parser.next();  
        while(event != XmlPullParser.END_DOCUMENT) { 
            if(event == XmlPullParser.START_TAG) { 
                Log.d(TAG, "<"+ parser.getName() + ">"); 
                atributo = parser.getName();
                for(int i = 0; i < parser.getAttributeCount(); i++) { 
                    Log.d(TAG, "\t"+ parser.getAttributeName(i) + " = "+ parser.getAttributeValue(i)); 
                } 
            } 
            if(event == XmlPullParser.TEXT&& parser.getText().trim().length() != 0) 
            {
                Log.d(TAG, "\t\t"+ parser.getText());
                if (atributo=="id"){id=parser.getText(); datos++;}
                else if(atributo=="titulo"){titulo=parser.getText(); datos++;}
                else if(atributo=="poster"){poster=parser.getText(); datos++;}
                if(datos==3){peliculas.add(new Pelicula(id, titulo, poster)); datos=0;} 
            }
                if(event == XmlPullParser.END_TAG) 
                    Log.d(TAG, "</"+ parser.getName() + ">");               
                event = parser.next(); 

            is.close();
        }
        } catch(Exception e) { Toast.makeText(this, e.getMessage(), Toast.LENGTH_LONG).show(); }        
        for (Pelicula p : peliculas){
            Log.d("Película en lista: ", p.titulo);
        }           
        return peliculas;
    } 
```

这对我的口味来说太长了，但我就是想不出简单的 XML 来匹配我的类。**

# objective-c - 从其他类访问 NSStrings

> ID：13334959
> 
> 赞同：-3
> 
> 时间：2012-11-11T20:08:58.737
> 
> 标签：objective-c, ios, xcode, cocoa-touch, cocoa

我希望你能帮我解决我的实际问题：

我已经建立了一个带有导航控制器的新项目。对于项目的表格视图，我为其添加了一个新类，称为“TableViewController.h”和“TableViewController.m”。

在这个类中，我在 .ha 属性中声明了一个 NSString 以从其他类访问它，如下所示：

```
 @property (strong, nonatomic) NSString *testString; 
```

在 .m 中，我将其合成如下：

```
 @synthesize testString; 
```

现在我在表视图控制器的 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath-Method 中设置如下：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {
     testString = @"Hello, World!";
    } 
```

现在为下一个视图创建了一个新的 UIViewController 类，当我点击一个单元格时它应该出现（到目前为止所有这些都有效）。在这个名为“SecondView”的 UIViewController 中，我导入了 TableViewController 的 .h 文件。此外，我在 SecondView.m 中有此代码：

```
 -(void) viewDidLoad
    {
     [super viewDidLoad];
     TableViewController *demoObject = [TableViewController alloc] init]
     NSLog (@"Teststring is: %@" [demoObject.testString]);
    } 
```

现在，当我启动模拟器时，我得到这个输出：Teststring is: (null)

当我在 TableViewController 中对 testString 进行 NSLog 记录时，我得到“Hello, World”，但为什么它没有“转移”到 SecondView 类并生成所需的输出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T20:11:28.183

您正在将字符串记录在 中，该字符串在表视图的方法`viewDidLoad`中设置之前很久就被调用了。`didSelectRow`您还应该使用`self.testString = ...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:34:19.460

您如何期望数据“传输”？你必须**通过**它..在 tableView:didSelectCellAt:row （你推第二个视图）你必须说：

```
2ndView.testString = self.testString; 
```

# postgresql - 带有 Heroku Postgres 数据库的 Aws 应用程序

> ID：13334965
> 
> 赞同：5
> 
> 时间：2012-11-11T20:09:22.153
> 
> 标签：postgresql, amazon-ec2, amazon-web-services

是否可以在 aws EC2 上运行应用程序并在 heroku 的 postgres 上运行它的数据库？
如果是这样，我应该考虑哪些缺点？
由于 heroku 托管在 AWS 上，有没有办法知道运行我的数据库的机器的位置在哪里？
将我的应用程序托管在数据库的同一区域将有助于保持性能？
我想听听一些关于这个的意见，我一直在搜索这个话题，但没有成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T01:29:28.280

您可以在任何给定时间使用 ... 确定 Heroku DB 的面向公众的位置，`traceroute`但不能保证它会留在那个位置，或者不会进行任何内部重新路由。您可能想直接与 Heroku 支持人员讨论如何确保您的 Heroku 数据库实例位于 AWS 应用程序实例的本地，因为这肯定会提高性能。看看您是否可以找出他们在哪个可用区或至少哪个主要区域运行数据库，以及您是否可以将您的数据库实例“固定”到给定的区域/区域。

Amazon 的 RDS 看起来不错，但不支持 PostgreSQL。请继续唠叨他们。

如果性能不是特别重要，我可能会在 AWS 上运行数据库。在 EBS 优化实例上使用预置 IOPS EBS 卷的 raid10，您将获得不错的性能（但价格非常高）；或者，您可以使用非崩溃安全的基于 ssd 的实例存储服务器，并依靠复制和备份来确保数据安全。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T21:10:56.567

我对 Heroku PostgreSQL 没有任何经验。一般来说，当然您可以在 Amazon EC2 上运行自己的服务并使用 Heroku 的托管数据库服务。

缺点可能是

*   没有人保证，Heroku 只使用 AWS，您可能无法确定云中的物理 Heroku 服务位置，因此您将不得不处理网络延迟
*   除了您的外部流量费用之外，您还必须为数据库流量付费，除非您与同一地区同一可用区中的服务器通信

我的建议（不知道有关 Heroku 优点的任何细节）

如果您不想自己运行数据库服务器，请查看 Amazon RDS。

[http://aws.amazon.com/de/rds/](http://aws.amazon.com/de/rds/)

我在 AWS 上运行了大约 70 个服务器实例，包括 RDS 和 EC2 一年多，我无法想象有任何更简单的方法来保持你的东西运行

# regex - 正则表达式贪婪：缩小长路径

> ID：13334967
> 
> 赞同：2
> 
> 时间：2012-11-11T20:09:25.473
> 
> 标签：regex, perl, shell, path, sed

请看看我的心碎。

我坚持使用正则表达式缩小一些漫长的路径，如下所示：

```
/12345/123456/1234/123/12/1/1234567/13245678/123456789/1234567890 
```

我想将此路径转换为以下形式：

```
/123/123/123/123/12/1/123/123/123/123 
```

路径中的每个“目录”仅缩写为前 3 个字符

```
LONG_PATH="/12345/123456/1234/123/12/1/1234567/13245678/123456789/1234567890"
perl -pe "s#/(.{1,3})[^/]*?(/|$)#/\1\2#g" <<<$LONG_PATH 
```

/123/123456/123/123/12//1234567/132/123456789/123

```
sed -E "s#/(.{1,3})[^/]*?(/|$)#/\1\2#g" <<<$LONG_PATH 
```

/123/123456/123/123/12//1234567/132/123456789/123

我也试过：

```
perl -pe "s,/(.)(.)?(.)?[^/]*+,/\1\2\3,g" <<<$LONG_PATH
/123/123/123/123/12//123/132/123/123 
```

还有很多其他的，没有“运气”——我仍然不知道。

请为我指出一条通往成功的正确道路。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T20:12:00.420

最多匹配三个非斜线字符并捕获它们。然后匹配其余的直到下一个斜线。替换为捕获：

```
"s#(/[^/]{3})[^/]*#\1#g" 
```

`/`这里不需要不贪心或任何东西，因为否定字符类与or是互斥的`$`。

**编辑：**虽然您似乎知道这一点，但我可能应该向未来的访问者澄清，这将适用于您在问题中使用过的`perl -pe...`任何一个。`sed -E...`正则表达式也可以与`sed -r...`. 如果您省略`-E`or`-r`选项，那么（像往常一样）您将需要同时转义括号和大括号：

```
sed "s#\(/[^/]\{3\}\)[^/]*#\1#g" filename 
```

另请注意，ikegami 指出，在 Perl 中，您应该`$1`在替换中使用而不是`\1`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T20:42:18.140

你可以这样做：

```
perl -pe's#[^/]{3}\K[^/]*##g'
/12345/123456/1234/123/12/1/1234567/13245678/123456789/1234567890
/123/123/123/123/12/1/123/132/123/123 
```

找到 3 个非斜线，并保留 ( `\K`) 它们，删除以下字符直到下一个斜线。

正如 ikegami 所指出的，不需要匹配少于三个字符，在这种情况下，可以使用后向断言代替`\K`. 好处是`\K`需要 perl v5.10，而且我相信环视断言早于此。

```
perl -pe 's#(?<=[^/]{3})[^/]*##g' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T18:22:49.503

最好的方法似乎是使用[`File::Spec`](https://metacpan.org/module/File%3a%3aSpec)模块来拆分和重组路径。中间调用`map`将减少每个路径段的前三个字符。这个程序演示

```
use strict;
use warnings;

use File::Spec;

my $path = '/12345/123456/1234/123/12/1/1234567/13245678/123456789/1234567890';

my $newpath = File::Spec->catdir(map substr($_, 0, 3), File::Spec->splitdir($path));

print $newpath; 
```

**输出**

```
/123/123/123/123/12/1/123/132/123/123 
```

# javascript - 从 iframe 重新加载父页面上的 div

> ID：13334968
> 
> 赞同：0
> 
> 时间：2012-11-11T20:09:30.803
> 
> 标签：javascript, jquery

所以，我正在制作一个小应用程序，但我遇到了一个问题。基本上，我有一个由标题和 iframe 组成的页面。应用程序本身在 iframe 中运行，而标头保持不变，但这就是问题所在。标题显示来自应用程序更新的数据库中的一些数据。为了使标题中的数据保持最新，我需要在 iframe 中单击按钮时刷新它。所以我的问题是——有可能吗？是否可以从 iframe 重新加载父页面中的 div 元素？我现在只有这个 jQuery：

```
var auto_refresh = setInterval(function()
     $('#stats').load('reload.php');
}, 5000); 
```

它每 5 秒重新加载我的 div，但我不知道在一段时间后自动重新加载 div 是否是个好主意。好吧，我希望你们能理解我的问题。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T20:25:21.683

您可以从 iframe 访问父窗口（=主窗口），这不是问题。

```
<html>
<body>
    <div id="myDiv"></div>
    <iframe src="myFrame.htm"></iframe>
</body>
</html> 
```

myFrame.htm:

```
<script>
    parent.document.getElementById('myDiv').innerHTML = "whatever you want";
</script> 
```

如果您愿意，您可以执行 ajax 请求和您需要的所有其他操作，只要不违反某些来源策略（域、端口和协议必须匹配）。

# c++ - 在 C++ 中的 Windows 上使用 SendInput 发送同时键盘事件

> ID：13334971
> 
> 赞同：2
> 
> 时间：2012-11-11T20:09:53.513
> 
> 标签：c++, c, windows, sendinput

我想使用**SendInput**在 C++ 中模拟键盘按下，虽然单个按钮可以工作，但尝试同时发送键（快捷方式）不起作用。

我尝试了一切，但没有任何效果，如果我单独发送**VK_LWIN**它会显示，但无法同时组合键。

**这是我的代码：**

```
#include <windows.h>
#include <stdlib.h>
#include <stdio.h>

void setInput(INPUT * inp,uint index, WORD keycode,BOOL kUp);
void showRun();

int main(void)
{
    showRun();
    return 0;
}

void setInput(INPUT * inp,uint index, WORD keycode,BOOL kUp)
{
    inp[index].type = INPUT_KEYBOARD;
    inp[index].ki.wVk = keycode;
    inp[index].ki.wScan = MapVirtualKey(keycode, 0);
    inp[index].ki.time = 0;
    inp[index].ki.dwExtraInfo = 0;

    if (kUp == 1)
    {
        inp[index].ki.dwFlags = KEYEVENTF_KEYUP | KEYEVENTF_EXTENDEDKEY;
    }else
    {
        inp[index].ki.dwFlags =  0 | KEYEVENTF_EXTENDEDKEY;
    }
}

//this doesn't do anything
void showRun()
{
    INPUT *inp = (INPUT*) malloc(sizeof(INPUT) * 4);
    memset(inp,0,sizeof(INPUT));

    setInput(inp,0,VK_LWIN,0);
    setInput(inp,1,VK_RBUTTON,0);
    setInput(inp,2,VK_RBUTTON,1);
    setInput(inp,3,VK_LWIN,1);

    SendInput(4,inp,sizeof(INPUT));

    free(inp);
} 
```

**虽然这很好用：**

```
void showStart()
{
    INPUT *inp = (INPUT*) malloc(sizeof(INPUT) * 2);
    memset(inp,0,sizeof(INPUT));

    setInput(inp,0,VK_LWIN,0);
    setInput(inp,1,VK_LWIN,1);

    SendInput(2,inp,sizeof(INPUT));

    free(inp);
} 
```

提前感谢任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:00:25.297

啊，愚蠢的我，我应该使用 VkKeyScan('r') 而不是 VK_RBUTTON 现在它可以工作了！

# ruby-on-rails - :silence:Symbol 错误的未定义方法“调用”

> ID：13334975
> 
> 赞同：2
> 
> 时间：2012-11-11T20:10:29.827
> 
> 标签：ruby-on-rails, heroku, render, partial

我有一个 Rails 应用程序，在我的开发机器上运行良好，但是当我将它部署到 Heroku 时，在部署页面后尝试加载页面时收到以下错误消息。

```
ActionView::Template::Error (undefined method `call' for :silence:Symbol):

31: <div id="tickets">
32:      <div id="subline">Tickets open for trading</div>
33:           <% if not @tickets.blank? %>
34:                <%= render( :partial => '/choices/choice.html.erb', :locals => { :choice => @tickets} ) %>
35:           <% end %>
36:      </div>

app/views/home/index.html.erb:34:in `_app_views_home_index_html_erb___4151329774010405498_38984040'
app/controllers/home_controller.rb:108:in `index' 
```

我似乎无法弄清楚出了什么问题，因为它在我自己的机器上工作得很好，所以任何帮助都会非常有用:)

编辑1：

这是我的家庭控制器的一部分，与上述相关..

```
class HomeController < ApplicationController

  def index
    @tickets  = Choice.betable(current_user).where("choices.created_at > ?", Time.at(params[:after].to_i + 1).utc).order("choices.created_at DESC")

    respond_to do |format|
      format.html      
      format.json do
        @html_choice            = render_to_string( :partial => '/choices/choice.html.erb', :locals => { :choice => @tickets} )
        @html_active_choices    = render_to_string( :partial => '/shared/active_choices.html.erb', :locals => { :active_choices => @active_choices} )
        @html_active_bets       = render_to_string( :partial => '/shared/active_bets.html.erb', :locals => { :active_bets => @active_bets} )
        @html_spotprices_today  = render_to_string( :partial => '/shared/spotprices_today.html.erb', :locals => { :spotprices_today => @spotprices_today} )

        render :json => { :success => true, :html_choice => @html_choice, :html_active_choices => @html_active_choices, :html_active_bets => @html_active_bets, :html_spotprices_today => @html_spotprices_today  }
      end
    end
  end
end 
```

json 响应被 [Pusher][1] 用于将更新数据的 websocket 推送到站点。

您可以在下面找到日志文件：

```
2012-11-12T06:04:20+00:00 app[web.1]: => Booting Thin
2012-11-12T06:04:20+00:00 app[web.1]: => Rails 3.2.8 application starting in production on http://0.0.0.0:40112
2012-11-12T06:04:20+00:00 app[web.1]: => Call with -d to detach
2012-11-12T06:04:20+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-11-12T06:04:20+00:00 app[web.1]: >> Thin web server (v1.3.1 codename Triple Espresso)
2012-11-12T06:04:20+00:00 app[web.1]: >> Maximum connections set to 1024
2012-11-12T06:04:20+00:00 app[web.1]: >> Listening on 0.0.0.0:40112, CTRL+C to stop
2012-11-12T06:04:24+00:00 app[web.1]: 
2012-11-12T06:04:24+00:00 app[web.1]: 
2012-11-12T06:04:24+00:00 app[web.1]: Started GET "/rails/info/properties" for 157.55.34.32 at 2012-11-12 06:04:24 +0000
2012-11-12T06:04:24+00:00 heroku[router]: GET mydomain.com/rails/info/properties dyno=web.1 queue=0 wait=0ms service=51ms status=404 bytes=728
2012-11-12T06:04:24+00:00 heroku[nginx]: 157.55.34.32 - - [12/Nov/2012:06:04:24 +0000] "GET /rails/info/properties HTTP/1.1" 404 728 "-" "Mozilla/5.0 (compatible; bingbot/2.0; +http://www.bing.com/bingbot.htm)" mydomain.com
2012-11-12T06:04:24+00:00 app[web.1]: 
2012-11-12T06:04:24+00:00 app[web.1]: ActionController::RoutingError (No route matches [GET] "/rails/info/properties"):
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/content_length.rb:14:in `call'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/connection.rb:80:in `block in pre_process'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/connection.rb:78:in `catch'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/connection.rb:78:in `pre_process'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/connection.rb:53:in `process'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/connection.rb:38:in `receive_data'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run_machine'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/backends/base.rb:61:in `start'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/server.rb:159:in `start'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/handler/thin.rb:13:in `run'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:55:in `block in <top (required)>'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:265:in `start'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands/server.rb:70:in `start'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:50:in `tap'
2012-11-12T06:04:24+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:50:in `<top (required)>'
2012-11-12T06:04:24+00:00 app[web.1]:   script/rails:6:in `require'
2012-11-12T06:04:24+00:00 app[web.1]:   script/rails:6:in `<main>'
2012-11-12T06:04:24+00:00 app[web.1]: 
2012-11-12T06:04:24+00:00 app[web.1]: 
2012-11-12T08:56:34+00:00 heroku[router]: GET www.mydomain.com/ dyno=web.1 queue=0 wait=0ms service=607ms status=500 bytes=643
2012-11-12T08:56:34+00:00 heroku[nginx]: 87.60.190.9 - - [12/Nov/2012:08:56:34 +0000] "GET / HTTP/1.1" 500 643 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:14.0) Gecko/20100101 Firefox/14.0.1" www.mydomain.com 
```

希望这有助于找到错误的原因:)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:46:31.783

尝试改变：
`... :partial => '/choices/choice.html.erb'`

到：
`... :partial => '/choices/choice'`

在您的视图和控制器中。为了帮助您更清楚，请检查[Using Partial](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T19:30:15.590

我在我的网络应用程序中遇到了同样明显的误导性错误，仅在生产环境中出现，但在开发中一切正常。

我的日志如下：

```
NoMethodError (undefined method `call' for :silence:Symbol):
  app/controllers/users_controller.rb:77:in `block in XXX'
  app/controllers/users_controller.rb:77:in `each'
  app/controllers/users_controller.rb:77:in `XXX'
  app/controllers/users_controller.rb:32:in `YYY'
  app/controllers/application_controller.rb:46:in `ZZZ' 
```

请注意，调试器指出的上下文是完全不同的。而且由于这个错误只出现在生产环境中，我不认为它可能是由一些编码错误引起的。所以我开始查看开发和生产设置之间的差异，最终发现我添加了以下行来摆脱一些嘈杂的 Heroku 弃用警告：

```
config.active_support.deprecation = :silence 
```

但由于 DEFAULT_BEHAVIORS[:silence] 中尚未定义“:silence”符号（请查看[https://github.com/rails/rails/pull/5986](https://github.com/rails/rails/pull/5986)），因此导致了问题。既然您还说您正在使用 Heroku，您能否检查一下这是否确实是您的错误的原因？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-04T13:11:57.780

**一定是：**

**集** **`formats`**和**`handlers`**

**示例**：

```
@html_choice = render_to_string( \
  partial: '/choices/choice', \
  formats: [:html], handlers: [:erb], \
  locals: {choice: @tickets}) 
```

# asp.net-mvc - DbUpdateConcurrencyException 即使在删除视图中传递键

> ID：13334979
> 
> 赞同：0
> 
> 时间：2012-11-11T20:10:48.927
> 
> 标签：asp.net-mvc, exception, ef-model-first

我很困惑为什么会发生这种情况，因为我已经解决了这个问题。当这个问题第一次发生时，我没有`@Html.HiddenFor(model => model.OrganizationID)`通过表单的 POST 操作。在我把它放进去之后——它工作得很好。

现在，它不再工作了。当我尝试删除某些内容时，会引发 DbUpdateConcurrencyException。我的编辑视图工作得很好。

我按照[本教程](http://msdn.microsoft.com/en-us/data/gg685489.aspx)创建了模型优先方法。

这些是我的控制器 OrganizationController 中的删除操作：

```
public ActionResult Delete(int id)
{
    using (var db = new VAGTCEntities())
    {
        return View(db.Organizations.Find(id));
    }
}

//
// POST: /Organization/Delete/5

[HttpPost]
public ActionResult Delete(int id, Organization organization)
{
    try
    {
        // TODO: Add delete logic here
        using (var db = new VAGTCEntities())
        {
            db.Entry(organization).State = System.Data.EntityState.Deleted;
            db.SaveChanges();
        }

        return RedirectToAction("Index");

    }
    catch
    {
        return View();
    }
} 
```

这是我的删除视图：

```
@model VAGTC.Models.Organization

@{
    ViewBag.Title = "Delete";
}

<h2>Delete</h2>

<h3>Are you sure you want to delete this?</h3>
<fieldset>
    <legend>Organization</legend>

    <div class="display-label">
         @Html.DisplayNameFor(model => model.Name)
    </div>
    <div class="display-field">
        @Html.DisplayFor(model => model.Name)
    </div>
</fieldset>
@using (Html.BeginForm()) {
    @Html.HiddenFor(model => model.OrganizationID)
    <p>
        <input type="submit" value="Delete" /> |
        @Html.ActionLink("Back to List", "Index")
    </p>
} 
```

我对其进行了调试以查看是否正在传递 id 并且它确实正在传递给 POST 操作。我不确定从这里去哪里。正如我搜索的任何内容一样，只需添加`HiddenFor`声明即可。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T20:22:32.057

此异常表明由于某种原因，您的查询没有影响任何行（即未删除该行）。尝试使用以下方法，而不是设置条目的状态：

```
db.Remove(organization);
db.SaveChanges(); 
```

**根据评论编辑**

当您回发组织对象时，它将由视图的表单元素中包含的字段填充。在您的情况下，这只是 OrganisationId。您更改发布到控制器的实体对象的状态并保存它。如果您在任何 EF 实体上设置了并发模式属性（例如在 .edmx 中），如果您为该字段传递的值与数据库值不一致，EF 将引发并发异常。这可能是它需要 Name 字段值的原因。

更好的方法（如果您不关心删除期间的并发）是删除方法签名中的对象，并重命名 Id 参数以接收 OrganisationId。然后在设置其状态并保存之前直接从数据库中读取对象。

# actionscript-3 - 用按钮打开不同帧率的swf文件

> ID：13334984
> 
> 赞同：0
> 
> 时间：2012-11-11T20:11:55.707
> 
> 标签：actionscript-3, flash, frame-rate

我有 6 个 swf 文件。在每个 swf 动画结束后会出现一个按钮，单击它会打开下一个 swf 文件。但是，其中 3 个 swf 文件具有不同的帧速率。其中 3 个以 24fps 工作，3 个以 48fps 工作。当我播放 swf 文件时，所有动画都以相同的帧速率 (24fps) 工作。有没有办法以自己的帧速率组合和打开两个文件？在这里，我附上我在按下按钮时用来打开文件的代码

非常感谢你 ！

```
stop();
//This creates a new instance of the loader object and adds it to the stage.

var my_Loader:Loader = new Loader();
addChild(my_Loader);

 //This creates a new instance of the URLRequest object that contains the path   
//to the external swf. The load method then loads the SWF file into the loader
//object.
var my_url:URLRequest=new URLRequest("Sinus for adults.swf");
my_Loader.load(my_url); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:21:51.857

不，这是不可能的。

您可以做的是使用计时器提前帧，但如果您有多个级别的带有时间线的 MovieClip，则必须单独推进它们。您还会错过任何代码执行，尤其是在您覆盖它们时停止和播放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:08:29.780

谷歌搜索给出了这个简单的响应：

[http://www.sitepoint.com/forums/showthread.php?284196-merging-two-swf-movies-with-different-FPS](http://www.sitepoint.com/forums/showthread.php?284196-merging-two-swf-movies-with-different-FPS)

我还没有尝试过，但据我所知，它应该可以工作。

# java - 反向对角线布局

> ID：13334987
> 
> 赞同：0
> 
> 时间：2012-11-11T20:12:15.763
> 
> 标签：java, swing, layout-manager

我目前正在研究 Oracle 的示例类[DiagonalLayout](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/layout/CustomLayoutDemoProject/src/layout/DiagonalLayout.java)。

此类创建对角线布局（从左到右）。我会通过选择 JCheckBox 来反转方向（从右到左）。

如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T20:26:25.573

`DiagonalLayout`具有从左到右布局组件的固定行为。

`ReverseDiagonalLayout`为了以反向对角线顺序获得组件，您必须使用所需的`layoutContainer`实现来开发自己的组件。然而，原始布局可以作为指南。

# ios - AppDelegate 到 UIViewController

> ID：13334989
> 
> 赞同：4
> 
> 时间：2012-11-11T20:12:28.187
> 
> 标签：ios, xcode

我有一个带有标头和实现文件以及两个 appDelegate 文件的示例代码。我想将项目的功能添加到我的应用程序中。前两个文件是一个ViewController文件，所以我只要把它拖进去，但另外两个是`AppDelegate`，我显然不能有两个app delegate。但是在这个示例应用程序的情况下，应用程序委托被用作适当的视图控制器，因为在文件的 .m 文件中`UIViewController`，有以下代码：

```
AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate]; 
```

由于`AppDelegate`没有实现 applicationWillBecomeActive: 等方法，我如何将文件转换为 UIViewController 文件？我需要在上面的代码中更改什么来调用控制器而不是委托（我的 AppDelegate 将保持不变）。

代码在[GitHub 上](https://github.com/fbsamples/ios-3.1-howtos/tree/master/SendRequestsHowTo)

这就是我所做的（代码需要包含 Facebook API）。转到下载选项卡并下载 Archive.zip 和[AppDelegate.zip：https://github.com/Alexmitico45/FacebookRequests/downloads](https://github.com/Alexmitico45/FacebookRequests/downloads)

基本上，控制器`ContactFBSViewController`链接到情节提要中的视图控制器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T20:46:02.430

如果我理解正确，您希望`AppDelegate`示例中的功能出现在您的应用中。但是您不想替换您应用的现有 AppDelegate？

AppDelegate 类与另一个类并没有什么不同。它的不同之处在于它实现了`UIApplicationDelegate`，并且在 中明确提到`main.m`，作为您的应用程序的启动类。

如果你想把它变成另一个类，我会：

1.  重命名类（.h、.m、接口和实现名称），然后将其放入您的项目中。
2.  在 NewName.h 中，删除顶部的 UIApplicationDelegate 的实现。
3.  在 NewName.m 中，您希望查看**UIApplication 方法**部分中的任何功能，因为这是专门分配给 AppDelegate 类执行的功能，并查看是否需要或如何将其合并到现有的 AppDelegate 类中。然后从 NewName.m 中删除那些 UIApplicationDelegate 方法，因为它们只能在您实现 UIApplicationDelegate 时存在。

由于`ViewController`利用了预期的 AppDelegate 是 UIApplication 层次结构中的一个长期存在的类这一事实，因此您需要复制该行为。这可能最容易通过`NewName`在 ViewController.h 中创建一个新的弱属性来引用来实现：

**视图控制器.h**

```
@class NewName;
@property (nonatomic, weak) NewName *newNameDelegate; 
```

**视图控制器.m**

```
#import "NewName.h"

...

@implementation ViewController
@synthesize newNameDelegate;

...

- (IBAction)sendRequestButtonAction:(id)sender {
    if (FBSession.activeSession.isOpen) {
        [newNameDelegate sendRequest];
    }
} 
```

**新名字.m**

```
...

self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
self.viewController.newNameDelegate = self;

... 
```

希望这能让您知道从哪里开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T16:55:53.340

我解决了这个问题。我必须做的是使视图控制器成为单例：

```
+ (FacebookViewController *) sharedManager; 
```

..然后使用此代码访问它：

```
FacebookManager *manager = [FacebookManager sharedManager]; 
```

经过几天的反复试验，它终于奏效了！！

# notepad++ - 在多行复制和粘贴中保留相对于第一行的缩进

> ID：13334994
> 
> 赞同：3
> 
> 时间：2012-11-11T20:13:45.883
> 
> 标签：notepad++, indentation, copy-paste, lines-of-code

抱歉，如果这个问题已经得到解答，但谷歌或堆栈的搜索没有任何内容。

当我在 Notepadd++ 中复制和粘贴多行时，所有行都保留它们的相对缩进，但它们与第一行无关。

有谁知道使 n+1 行相对于粘贴的第一行保持缩进的设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:28:51.630

I'm not sure if this is actually possible, not without a plugin anyway!

You could use an auto-indentation plugin like the following: [http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=Plugin_Central](http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=Plugin_Central)

A quick way to adjust indentation as well is to highlight the whole misaligned section and press **Tab** to move it all to the **right**, and press **Shift + Tab** if you want it all to move to the **left**!

# c# - 在 Visual Studio 2010 中编辑启动代码

> ID：13334997
> 
> 赞同：0
> 
> 时间：2012-11-11T20:13:54.417
> 
> 标签：c#

我可能有一个新手问题，但我可能在一周前开始了关于 c# 的课程，并且我们正在使用 Visual Studio，所以每次我们打开一个新项目（控制台应用程序）时，都会显示一个带有代码的页面：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
        }
    }
} 
```

和讲座希望我们删除一些部分，所以开始的代码应该是这样的：

```
using System;

class NameOfApp
{
    static void Main()
    {

    }
} 
```

我的问题是：有没有办法从菜单的某个地方删除这些部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:16:00.333

没有什么可以自动做出讲师想要的所有更改。

您可以做的是为新项目创建自己的模板并使用该模板。

这是一个很大的主题 - 开始在 MSDN上的[Visual Studio 模板](http://msdn.microsoft.com/en-us/library/6db0hwky.aspx)上阅读它-[自定义现有模板](http://msdn.microsoft.com/en-us/library/ms247119.aspx)可能是最简单的入门方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:21:49.047

您可以像 Oded 建议的那样为 Visual Studio 创建一个新的项目模板，但您也可以删除不需要的模板代码并将其替换为讲师想要的。

# objective-c - 具有非 ARC 静态库的启用 ARC 的项目

> ID：13334999
> 
> 赞同：0
> 
> 时间：2012-11-11T20:14:06.870
> 
> 标签：objective-c, cocoa, automatic-ref-counting

我有一个启用了 ARC 的 Mac 项目和一个未启用 ARC 的框架，所有编译都很好，但是一旦运行非 ARC 框架就会显示一个表单，但是当你点击一个按钮时，会抛出一个错误，比如......

```
2012-11-10 23:32:11.191 TestApp[20691:303] -[__NSCFType next:]: unrecognized selector sent to instance 0x101c13070
2012-11-10 23:32:11.193 TestApp[20691:303] -[__NSCFType next:]: unrecognized selector sent to instance 0x101c13070
2012-11-10 23:32:11.198 TestApp20691:303 doesNotRecognizeSelector:] + 186
3 CoreFoundation 0x00007fff8e63a5ce forwarding + 414
4 CoreFoundation 0x00007fff8e63a3b8 _CF_forwarding_prep_0 + 232
5 AppKit 0x00007fff8ff78a59 -[NSApplication sendAction:to:from:] + 342
6 AppKit 0x00007fff8ff788b7 -[NSControl sendAction:to:] + 85
7 AppKit 0x00007fff8ff787eb -[NSCell _sendActionFrom:] + 138
8 AppKit 0x00007fff8ff76cd3 -[NSCell trackMouse:inRect:ofView:untilMouseUp:] + 1855
9 AppKit 0x00007fff8ff76521 -[NSButtonCell trackMouse:inRect:ofView:untilMouseUp:] + 504
10 AppKit 0x00007fff8ff75c9c -[NSControl mouseDown:] + 820
11 AppKit 0x00007fff8ff6d60e -[NSWindow sendEvent:] + 6853
12 AppKit 0x00007fff8ff69744 -[NSApplication sendEvent:] + 5761
13 AppKit 0x00007fff8fe7f2fa -[NSApplication run] + 636
14 AppKit 0x00007fff8fe23cb6 NSApplicationMain + 869
15 AppSim 0x00000001000026f2 main + 34
16 libdyld.dylib 0x00007fff97c6c7e1 start + 0
17 ??? 0x0000000000000003 0x0 + 3 
```

将主项目转换为非 ARC 问题出在......是什么导致了问题，我该如何解决？

我宁愿不将现有项目转换为使用非 ARC...

重现问题的步骤...

从以下位置下载“OS X Lion 的示例项目，~250 KB”

[https://github.com/eternalstorms/ESSVideoShare-for-OS-X-Lion](https://github.com/eternalstorms/ESSVideoShare-for-OS-X-Lion)

将主项目转换为 ARC，将以 ... [yt uploadVideoAtURL:[NSURL fileURLWithPath 开头的行指向您拥有的任何 mov 文件，然后运行。

单击取消或登录将导致错误...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T21:33:21.367

您的示例代码存在内存泄漏：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    // Insert code here to initialize your application
    ESSYouTube *yt = [[ESSYouTube alloc] initWithDelegate:self
                                             developerKey:@""];
    [yt uploadVideoAtURL:[NSURL fileURLWithPath:@"/path/to/mov"]];
} 
```

`yt`永远不会被释放。

当您通过添加 a`release`或转换为 ARC 来堵住泄漏时，您将遇到崩溃，因为当 UI 仍在屏幕上时， `ESSYouTube`and实例已被释放。`ESSYouTubeWindowController`

示例代码需要修复，并且`ESSYouTube`应该在其 UI 在屏幕上时保留自身，或者在解除分配时拆除其 UI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T20:29:47.180

You can have a project that has ARC and non-ARC assets. If you haven't already, I would set any classes that are not ARC enabled to not compile using ARC. Refer to here: [How can I disable ARC for a single file in a project?](https://stackoverflow.com/questions/6646052/how-can-i-disable-arc-for-a-single-file-in-a-project)