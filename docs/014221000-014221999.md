# StackOverflow 问答 14221000-14221999

# php - 如何在第一次请求时生成和响应 cookie？

> ID：14221002
> 
> 赞同：0
> 
> 时间：2013-01-08T17:45:21.093
> 
> 标签：php, codeigniter, session, cookies, unity3d

我正在尝试在我的游戏中实现类似 cookie/会话功能的浏览器以用于登录系统。

据我了解，cookie 是如何工作的；

```
1 - Client request page without cookie in requestheader.
2 - Server receives requestheader without cookie in it and generates cookie for client.
3 - Server responds with a cookie for first request.
4 - In further requests server includes cookie in header.
5 - Client copies cookie info from second respond and adds it into requestheader later on. 
```

问题是，我需要能够在第一次请求时发送 cookie，因为在 unity3d 中，我的客户端的每个请求 SessionId 都会发生变化。

除非我在第一次请求时没有的 requestheader 中包含 cookie，否则它不会像浏览器一样工作。所以它卡在1-3个步骤之间。

**更新：** 这是我在 Chrome 中使用以下 codeigniter 代码的经验。

```
public function getcookie()
{
    echo $this->input->get_request_header('Cookie', TRUE);
} 
```

**当我调用此页面时： [http://mydomainaddr.com/srv/index.php/Srv/getcookie](http://mydomainaddr.com/srv/index.php/Srv/getcookie) 它在第一次请求时不会打印任何内容。当我刷新它开始打印...**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:48:20.040

为什么服务器不会用 cookie 响应`3`？大多数网站会在您第一次访问时为您提供会话 ID。至少我一直都是这样做的。

实际上，如果您没有在第一次请求时发送 cookie，那么您怎么知道访问者正在接受第二次请求呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:59:40.210

首先响应服务器在 SET-COOKIE 或 Set-Cookie 标头中发送 cookie 信息，（不在 Cookie 标头中）在我应该稍后包含在我的请求标头中的响应标头中。

这就解释了为什么第一个请求中没有名为“Cookie”的标头。

# java - 如何侦听窗口大小更改事件

> ID：14221003
> 
> 赞同：3
> 
> 时间：2013-01-08T17:45:23.117
> 
> 标签：java, swing, events, jframe, componentlistener

> **可能重复：**
> [Java AWT/Swing：在我的窗口位置/大小更改时收到通知](https://stackoverflow.com/questions/1697966/java-awt-swing-get-notified-on-change-of-position-size-of-my-window)

是否有 JFrame 大小更改的事件？我试过

```
addWindowStateListener(new java.awt.event.WindowStateListener() {
          public void windowStateChanged(WindowEvent e) {
              System.out.println("Size Changed");
     }
   }); 
```

但它只适用于`minimizing`and `maximizing`。我什至想通过拖动边缘来触发一个小窗口（JFrame）大小的变化。谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T17:48:35.750

您可以使用`ComponentListener`：

```
myJFrame.addComponentListener(new ComponentAdapter() {
            public void componentResized(ComponentEvent e) {
                System.out.println("Size Changed");
            }
        }); 
```

# c# - 使用 linq 转换对象

> ID：14221006
> 
> 赞同：0
> 
> 时间：2013-01-08T17:45:28.907
> 
> 标签：c#, linq-to-objects

A 类具有以下属性：

```
public int A_Id { get; set; }
public IEnumerable<int> B_Ids { get; set; } 
```

A 的集合包含：

A_Id = 1，B_Ids = {101、102、103}

A_Id = 2，B_Ids = {104}

A_Id = 3，B_Ids = {105, 106}

从上面的集合中，我想创建一个包含以下内容的新集合：

A_Id = 1，B_Id = 101

A_Id = 1，B_Id = 102

A_Id = 1，B_Id = 103

A_Id = 2，B_Id = 104

A_Id = 3，B_Id = 105

A_Id = 3，B_Id = 106

我怎么能通过使用 linq 做到这一点？

问候，迈克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T17:55:09.367

使用`SelectMany`：

```
var result = list.SelectMany(a => a.B_Ids.Select(b => new { a.A_Id, B_Id = b })); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-08T17:51:06.093

```
class ClassA
{
    public int A_Id { get; set; }
    public IEnumerable<int> B_Ids { get; set; }
}

var newAs = (from a in As from bId in a.B_Ids select new ClassA() {A_Id = a.A_Id, B_Ids = new int[] {bId}}); 
```

# javascript - 在javascript中隐藏Mozilla鼠标左键单击的子菜单

> ID：14221008
> 
> 赞同：0
> 
> 时间：2013-01-08T17:45:52.903
> 
> 标签：javascript, html, web

在网页中，一个由 div 组成的“上下文菜单/subMneu”在悬停在单独的 div 上时显示。当用户单击文档中的其他位置时，此子菜单将关闭，这意味着鼠标单击文档将导致子菜单关闭。在 IE8 中，Chrome12 和 Firefox 子菜单在单击鼠标左键时关闭。

发生了什么。在 Internet Explorer8 和 Chrome12 中，当我们按下鼠标右键时，它并没有关闭。浏览器的默认菜单正在打开，这是一个正确的功能。但是在 Mozilla Firefox 中单击鼠标右键子菜单正在关闭。

我的问题是为什么这只发生在 Mozilla 中以及如何解决它？

下面是代码片段。我使用了 detachEvent/deatchEventListener 和 attachEvent/attachEventListener ，因为在 IE8 中不支持 deatchEventListener/attachEventListener

代码：

```
function hideSubMenu(){
  doument.getElementById("elem").style.display = none;
  if(document.detachEvent){
     document.detachEvent('onclick',hideSubMenu);
  }
  else(document.detachEventListener){
     document.detachEventListener('click',hideSubMenu,true);
  }
}
#in which Event is attached
function displayMenu(){
   if(document.attachEvent){
      document.attachEvent('onclick',hideSubMenu);
   }
   else(document.attachEventListener){
      document.attachEventListener('click',hideSubMenu,true);
   }
} 
```

注意：我只能使用 javascript。所以请大家记住这一点。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:57:40.413

似乎FF`click`也用鼠标右键触发。你可以尝试这样的事情：

```
function hideSubMenu (e) {
    var menu = document.getElementById('elem');
    if (document.detachEvent) {
        menu.style.display = 'none';
        document.detachEvent('onclick', hideSubMenu);
    } else {
        if (e.which === 1) { // Checks left-click
            document.removeEventListener('click', hideSubMenu);
            menu.style.display = 'none';
        }
    }
    return;
}

function displayMenu () {
    if (document.attachEvent) {
        document.attachEvent('onclick', hideSubMenu);
    } else {
        document.addEventListener('click', hideSubMenu, false);
    }
    return;
} 
```

[jsFiddle](http://jsfiddle.net/KeLAw/1/)中的工作演示。

# sql - 验证 SQL Server 2000 的新创建触发器

> ID：14221009
> 
> 赞同：0
> 
> 时间：2013-01-08T17:45:53.357
> 
> 标签：sql, tsql, triggers, sql-server-2000

我被告知要为我们的 SQL Server 2000 上的**插入创建触发器。**

我以前从未编写过触发器，而且我们的旧服务器似乎没有定义任何触发器。

[在 SQL Server](http://www.mindstick.com/Articles/8a50890e-16b5-4fc6-8970-54ae61a898f9/?Triggers%20in%20SQL%20Server)教程中的触发器之后，我创建了这个尚未执行的触发器：

```
create trigger trgAfterMachine1Insert on Test_Results
after insert
as
  declare @sn varchar(20), @sysID varchar(50),
          @opID varchar(50), @testResult varchar(255)
  select @sn=Serial_Number from inserted
  select @sysID=System_ID from inserted
  select @opID=Op_ID from inserted
  select @testResult=Test_Result from inserted

  exec sp1_AddSnRecord(@sn, @sysID, @opID, @testResult)

  print 'Machine1 After Insert Trigger called AddSnRecord'

go 
```

首先，请注意我已经编写了一个存储过程，调用该存储过程`sp1_AddSnRecord`将这些数据插入到一个新表中（所以我不会弄乱现有的表）。我当然希望可以在触发器上调用存储过程，因为它在将任何内容插入其他表之前对数据执行数据验证和枚举。

我真的看不到在 SQL Server 2000 中测试这是否可行的方法，而且我对在 Management Studio 中点击**执行按钮有点紧张。**

所以，我已经研究了一段时间，并尝试阅读其他一些 SO 技术。

从[Aaron Bertrand](https://stackoverflow.com/users/61305)的示例[HERE](https://stackoverflow.com/a/10339246/153923)看来，我可以将所有选择调用合并到一行中：

```
create trigger trgAfterMachine1Insert on Test_Results
after insert

as

  declare @sn varchar(20), @sysID varchar(50),
          @opID varchar(50), @testResult varchar(255)

  select @sn=Serial_Number, @sysID=System_ID,
         @opID=Op_ID, @testResult=Test_Result 
  from inserted

  exec sp1_AddSnRecord(@sn, @sysID, @opID, @testResult)

  print 'Machine1 After Insert Trigger called AddSnRecord'

go 
```

否则，我在任何地方都看不到任何更有启发性的东西，或者看到有人询问在创建触发器之前测试触发器的技术。

我在这里工作的一所大学做的 SQL 工作比我多，但他承认他从未编写过触发器。他只能告诉我，*“伙计，如果你搞砸了，你可能会在服务器上造成很多问题！”* 所做的只是让我紧张，这就是我在这里的原因。（我所做的 98% 是为 Windows 窗体和旧的 Windows Mobile 设备编写 C# 代码）。

那么，我将如何验证此触发器是否有效并且在创建之前不会在服务器上引起任何问题？我的机器上有一个本地 SQL Server Express，但它比 SQL 2000 更新得多，并且没有从我们的生产车间运行的实时数据。

如果事后证明触发器有故障，我可以用简单的方法将其移除`delete trigger trgAfterMachine1Insert`吗？我对“删除触发器”的搜索似乎主要返回了`AFTER DELETE`.

提前致谢。

**更新：**包括马丁要求的存储过程：

```
ALTER PROCEDURE [dbo].[sp1_AddSnRecord](
    @serial_Number varchar(20), 
    @system_ID varchar(50), 
    @op_ID varchar(50), 
    @test_Result varchar(255)) as begin
  set NOCOUNT ON;
  declare @sn as VarChar(20);
  set @sn=dbo.fn_ValidSN(@serial_Number);
  if (7<Len(@sn)) begin
    declare @badge varchar(50), @result varchar(50), @sysID varchar(50);
    set @badge=dbo.fn_GetBadge(@op_ID);
    set @result=dbo.fn_GetTestResult(@test_Result);
    set @sysID=dbo.fn_GetSysType(@system_ID);
    if ((0<Len(@badge)) and (0<Len(@result)) and (0<Len(@sysID))) begin
      declare @id int;
      select @id=ID from Serial_Numbers where Serial_Number=@sn;
      if (@id<1) begin -- this serial number has not been entered
        insert into Serial_Numbers (Serial_Number) values (@sn);
        select @id=@@IDENTITY from Serial_Numbers;
      end
      if (0<@id) begin -- now insert into SN_Records
        insert into SN_Records (SN_ID, SYS_ID, OP_ID, Date_Time, Test_Result)
          values (@id, @sysID, @badge, GetDate(), @result);
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T19:36:11.100

所以，让我重新表述你所说的：

*   你没有编写触发器的经验
*   公司里没有其他人有编写触发器的经验
*   你只有一个生产环境，没有其他地方可以测试你的代码
*   管理层告诉你今晚之前完成这项工作

这肯定是灾难的秘诀。

首先，您需要反对您唯一选择失败的请求。告诉管理层他们的数据太重要了，如果没有适当的测试就不能做这样的事情。

然后得到一个合适的测试环境。如果您的公司是 MSDN 订阅者，您将可以访问 SQL Server 2000 Developer Edition 的副本，您可以将其安装在笔记本电脑上，或者更好地安装在某些虚拟机中。

在等待安装时，请阅读有关软件开发中的专业行为的信息。[从http://en.wikipedia.org/wiki/Robert_Cecil_Martin](http://en.wikipedia.org/wiki/Robert_Cecil_Martin)开始，然后转到软件工艺。

* * *

但是，我知道今晚不会发生这种情况，您可以在此期间执行此操作：

1）在生产服务器上新建数据库

2）复制有问题的表：`SELECT TOP(10) * INTO NewDb.dbo.Table FROM OldDb.dbo.Table;` 您不需要更多数据，因为这是一个插入触发器

3）以相同的方式复制您需要的其他表

4) 将触发器应用于 NewDb 中的表

5) 测试

6）修复并返回5

7）如果您满意，将触发器复制到OldDb

需要考虑的一些事项：

*   确保您测试多于一行的插入
*   不要在触发器中调用过程。并不是说这本身就是错误的，但是您将无法使用它进行多行插入
*   永远不要使用@@IDENTITY。那是命令。（原因和解决方法在这里：[http](http://sqlity.net/en/351/identity-crisis/) ://sqlity.net/en/351/identity-crisis/ ）

* * *

毕竟，这里开始研究数据库中的 TDD：[tSQLt.org](http://tsqlt.org) （大多数想法在 SQL 2000 中有效，但框架却没有。）

希望有帮助。

# ios - 使用 iOS MFMailComposeViewController 进行奇怪的文本对齐

> ID：14221010
> 
> 赞同：1
> 
> 时间：2013-01-08T17:46:07.020
> 
> 标签：ios, mfmailcomposeviewcontroller

我有一个可以发送消息的应用程序（包含诊断转储）。MFMailComposeViewController 在模拟器上看起来不错，但在“旧”iPad 上看起来很奇怪（还没有在较新的 iPad 上尝试过）。iPad 运行 5.1.1，声称型号为 MC349LL。

这是屏幕截图：

![在此处输入图像描述](../Images/81cb71119c56b83cf968350b83edc9fe.png)

如您所见，“收件人”文本显示得很低并被截断（抄送/密件抄送文本也是如此）。并且“主题”文本明显低于应有的水平。在模拟器上，文本正确对齐，没有任何内容被切断。

知道是什么原因造成的吗？

# c++ - 如何替换“模板 用什么宏可以用更短的东西替换“模板...”样板？即：而不是这些： template <typename nodedatat,="" typename="" arcdatat="">/*constructor*/ GraphDirected:: GraphDirected() { } template <typename 0="" 356="" nod="" 问问题="" 2013-01-08t17:46:06.467="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 用什么宏可以用更短的东西替换“模板...”样板？即：而不是这些：="" template="" <typename="" nodedatat,="" typename="" arcdatat="">/*constructor*/ GraphDirected:: GraphDirected() { } template <typename nodedatat,="" typename="" arcdatat="">/*destructor*/ GraphDirected:: ~GraphDirected() { clear(); } template <typename nodedatat,="" typename="" arcdatat="">void GraphDirected:: clear() { nodes.clear(); arcs.clear(); } 我想写这个： boilerplate(/*constructor*/) GraphDirected() { } boilerplate(/*destructor*/) ~GraphDirected() { clear(); } boilerplate(void) clear() { nodes.clear(); arcs.clear(); } 当然最后我需要一些保护（？#undef？），这样其他文件就不会被弄乱。 如果它不是更复杂，如何处理这样的丑陋？： template <typename elemtype="">typename BST<elemtype>::nodeT * BST<elemtype>:: recFindNode(nodeT *t, ElemType & key) { ... } 根据屏幕尺寸在android中强制纵向或横向模式 在过去的几个小时里，我一直在做一些研究，以及一些试验和错误，但是我无法为这个问题找到一个完全有效的解决方案。我只想强制我的 android 应用程序保持纵向模式，除非屏幕尺寸足够大（平板电脑），这将迫使应用程序处于横向模式。 到目前为止我已经尝试过： <activity android:screenorientation="portrait" android:configchanges="orientation|keyboardHidden">也： setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_NOSENSOR); 在我的 onCreate 和 onResume 中。 第一个示例确实有效，但是如果它是平板电脑，这将不允许我检查屏幕尺寸和强制横向模式。此外，如果我在执行异步任务时将手机保持在横向模式，则应用程序将在任务完成后进入横向模式，然后只要我留在屏幕上，我就可以再次在纵向和横向之间切换相同的活动。 所以，我不确定处理这个问题的正确方法是什么？如果我使用第二个示例（其中包含更多代码允许我检查屏幕大小，然后根据大小选择布局）只要我在活动中就可以工作。但是，如果我在开始活动时将手机保持在横向模式，那么一切都会崩溃（所以看起来代码一开始就无效）。 任何可能完全没有任何“错误”的建议，现在就是这种情况，我们将不胜感激！ c++templatesmacrosc-preprocessorboilerplate 4 4 回答 4 This answer is useful 3 我不建议您使用 MACRO 来避免使用少量令牌。由于类模板成员的定义必须在同一个文件中，因此您必须在同一个文件中定义它们，即使您在类之外执行此操作。 更好的解决方案是在类本身内部定义成员，这样就不必每次定义成员时都重复标记。 请记住，模板会生成丑陋的错误消息，而 MACRO 是邪恶的。如果将两者结合起来，当出现问题时，您会看到更丑陋和疯狂的错误消息。 于 2013-01-08T17:53:38.580 回答 This answer is useful 0 好吧，如果您可以通过以下方式美化您的模板样板，我认为没有错： #define pretty ugly 只要你觉得没有害处。 对于类型，你总是可以做一个 typedef 于 2013-01-08T18:27:09.270 回答 This answer is useful 0 如果你真的不喜欢打字，你可以用 替换typename，class为你的应用程序域使用标准化的模板名称，写struct而不是class避免打字public:，最后使类只有标题： template <class n,="" class="" a="">struct GraphDirected { GraphDirected() {} // default constructor // rest of the class definition private: // helpers and data go here }; 于 2013-01-08T18:29:07.837 回答 This answer is useful 0 C++ 预处理器对其正在处理的代码知之甚少。因此，您需要#define使用您想要使用的术语。 但是，类似： template <typename nodedatat,="" typename="" arcdatat="">/*constructor*/ GraphDirected:: GraphDirected() { } template <typename nodedatat,="" typename="" arcdatat="">/*destructor*/ GraphDirected:: ~GraphDirected() { clear(); } template <typename nodedatat,="" typename="" arcdatat="">void GraphDirected:: clear() { nodes.clear(); arcs.clear(); } 可以很容易地在一些标题中用这个重写： #define boilerplate(rType) boilerplate_template rType boilerplate_class:: 然后在类定义的顶部： #define boilerplate_class GraphDirected #define boilerplate_template template <typename nodedatat,="" typename="" arcdatat="">那么你可以使用： boilerplate(/*constructor*/) GraphDirected() { } boilerplate(/*destructor*/) ~GraphDirected() { clear(); } boilerplate(void) clear() { nodes.clear(); arcs.clear(); } 注意：正如其他人所指出的，这是一个坏主意。对于像示例这样的简单情况，#define文件顶部的两个 s 将向任何试图维护它的人解释代码。但是，请注意，这可能会迅速导致无法读取和无法维护的代码。一个更好的解决方案是使用一个编辑器，它既可以为你完成这些，也可以将它们折叠起来，这样你就看不到它们了。这样，实际文件在下次编辑时保持更标准的格式（无论是您还是其他人）。 于 2017-09-22T06:04:51.640 回答 Related 2 search - 内网搜索引擎前端？ 1 android - 是否可以将 XOR 数据发送到 MediaPlayer？ 1 android - Android - 将文件或字节数组转换为 Blob 2 php - 使用 PHP 解析/编辑 docx 文件 2 css - 如何在锁定的 Intranet 中使用 google webfonts？ 1 c# - .NET 4.5 服务器端 WebSocket 是否使用 IOCP？ 1 javascript - 从 PhoneGap 中的 Urban Airship 推送通知中提取“额外” 0 version-control - 如何最好地在 TFS 2010 中的项目之间移动文件，同时保持对原始文件的更改？ 2 python - Python（奇怪）舍入值 1 c# - 在 C# 中编辑绘图形状内的文本 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</typename></typename></typename></typename></class></activity></elemtype></elemtype></typename></typename></typename></typename></typename>

> ID：14221011
> 
> 赞同：0
> 
> 时间：
> 
> 标签：c++, templates, macros, c-preprocessor, boilerplate

用什么宏可以用更短的东西替换“模板...”样板？即：而不是这些：

```
template <typename NodeDataT, typename ArcDataT>
/*constructor*/ GraphDirected::
GraphDirected()
{
}
template <typename NodeDataT, typename ArcDataT>
/*destructor*/ GraphDirected::
~GraphDirected()
{
    clear();
}    
template <typename NodeDataT, typename ArcDataT>
void GraphDirected::
clear()
{
    nodes.clear();
    arcs.clear();
} 
```

我想写这个：

```
boilerplate(/*constructor*/)
GraphDirected()
{
}
boilerplate(/*destructor*/)
~GraphDirected()
{
    clear();
}
boilerplate(void)
clear()
{
    nodes.clear();
    arcs.clear();
} 
```

当然最后我需要一些保护（？#undef？），这样其他文件就不会被弄乱。

如果它不是更复杂，如何处理这样的丑陋？：

```
template <typename ElemType>
typename BST<ElemType>::nodeT * BST<ElemType>::
recFindNode(nodeT *t, ElemType & key) { ... } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T17:53:38.580

我不建议您使用 MACRO 来避免使用少量令牌。由于类模板成员的定义必须在同一个文件中，因此您必须在同一个文件中定义它们，即使您在类之外执行此操作。

更好的解决方案是*在类本身内部**定义*成员，这样就不必每次定义成员时都重复标记。

 *请记住，模板会生成丑陋的错误消息，而 MACRO 是邪恶的。如果将两者结合起来，当出现问题时，您会看到更丑陋和疯狂的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:27:09.270

好吧，如果您可以通过以下方式美化您的模板样板，我认为没有错：

```
#define pretty ugly 
```

只要你觉得没有害处。

对于类型，你总是可以做一个 typedef

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T18:29:07.837

如果你真的不喜欢打字，你可以用 替换`typename`，`class`为你的应用程序域使用标准化的模板名称，写`struct`而不是`class`避免打字`public:`，最后使类只有标题：

```
template <class N, class A>
struct GraphDirected
{
    GraphDirected() {} // default constructor
    // rest of the class definition

private:
    // helpers and data go here
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-22T06:04:51.640

C++ 预处理器对其正在处理的代码知之甚少。因此，您需要`#define`使用您想要使用的术语。

但是，类似：

```
template <typename NodeDataT, typename ArcDataT>
/*constructor*/ GraphDirected::
GraphDirected()
{
}
template <typename NodeDataT, typename ArcDataT>
/*destructor*/ GraphDirected::
~GraphDirected()
{
    clear();
}    
template <typename NodeDataT, typename ArcDataT>
void GraphDirected::
clear()
{
    nodes.clear();
    arcs.clear();
} 
```

可以很容易地在一些标题中用这个重写：

```
#define boilerplate(rType) boilerplate_template rType boilerplate_class:: 
```

然后在类定义的顶部：

```
#define boilerplate_class GraphDirected
#define boilerplate_template template <typename NodeDataT, typename ArcDataT> 
```

那么你可以使用：

```
boilerplate(/*constructor*/)
GraphDirected()
{
}
boilerplate(/*destructor*/)
~GraphDirected()
{
    clear();
}
boilerplate(void)
clear()
{
    nodes.clear();
    arcs.clear();
} 
```

**注意：**正如其他人所指出的，这是一个坏主意。对于像示例这样的简单情况，`#define`文件顶部的两个 s 将向任何试图维护它的人解释代码。但是，请注意，这可能会迅速导致无法读取和无法维护的代码。一个更好的解决方案是使用一个编辑器，它既可以为你完成这些，也可以将它们折叠起来，这样你就看不到它们了。这样，实际文件在下次编辑时保持更标准的格式（无论是您还是其他人）。*

# android - 根据屏幕尺寸在android中强制纵向或横向模式

> ID：14221013
> 
> 赞同：2
> 
> 时间：2013-01-08T17:46:15.210
> 
> 标签：android, landscape, mode, portrait

在过去的几个小时里，我一直在做一些研究，以及一些试验和错误，但是我无法为这个问题找到一个完全有效的解决方案。我只想强制我的 android 应用程序保持纵向模式，除非屏幕尺寸足够大（平板电脑），这将迫使应用程序处于横向模式。

到目前为止我已经尝试过：

```
<activity android:screenOrientation="portrait" android:configChanges="orientation|keyboardHidden"> 
```

也：

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_NOSENSOR); 
```

在我的 onCreate 和 onResume 中。

第一个示例确实有效，但是如果它是平板电脑，这将不允许我检查屏幕尺寸和强制横向模式。此外，如果我在执行 asynctask 时将手机置于横向模式，则应用程序将在任务完成后进入横向模式，然后只要我留在屏幕上，我就可以再次在纵向和横向之间切换相同的活动。

所以，我不确定处理这个问题的正确方法是什么？如果我使用第二个示例（使用更多代码允许我检查屏幕大小，然后根据大小选择布局）只要我在活动中就可以工作。但是，如果我在开始活动时将手机保持在横向模式，那么一切都会崩溃（所以看起来代码一开始就无效）。

任何可能*完全*没有任何“错误”的建议，现在就是这种情况，我们将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-09T22:20:08.837

我意识到这已经很晚了，但这是我的答案，以防它可能对其他人有所帮助。

我走的是程序化路线，在横向或纵向位置启动应用程序时没有遇到任何问题。

忽略清单选项。如您所述，在 onCreate() 中使用 setRequestedOrientation() 。检查屏幕大小，例如：

```
private boolean screenIsLarge()
{
    int screenMask = getResources().getConfiguration().screenLayout;
    if ( ( screenMask & Configuration.SCREENLAYOUT_SIZE_MASK) == 
            Configuration.SCREENLAYOUT_SIZE_LARGE) {
        return true;
    }

    if ( (screenMask & Configuration.SCREENLAYOUT_SIZE_MASK) == 
            Configuration.SCREENLAYOUT_SIZE_XLARGE) {
                return true;
    }

    return false;

} 
```

您可以对其进行修改以包含 中列出的其他屏幕尺寸`Configuration`。根据此结果，您可以选择是否将屏幕设置为横向。

```
if( screenIsLarge() )
{
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
} 
```

# google-sheets - 搜索值并在下一列中查找值

> ID：14221014
> 
> 赞同：1
> 
> 时间：2013-01-08T17:46:19.590
> 
> 标签：google-sheets, google-drive-api

我有一个与分数相关的数字列表：

```
 Number   Score
    1        1
    2        2
    3        4
    4        7
    5        10
    6        15 
```

我有这些在他们自己的工作表上。假设另一张纸上的单元格 A1 的值为 5，我想在另一张纸上查找 5 并返回 10。我该怎么做？我发现了很多功能，例如 CHOOSE 和 INDEX，但没有工作示例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T17:49:31.970

[VLOOKUP](https://support.google.com/docs/answer/3093318?hl=en)是您的朋友，可以满足您的需求。

在您的情况下，您可以将其用作：

```
=vlookup(A1, Sheet2!A2:Sheet2!B7, 2) 
```

但在您的情况下，如果您经常使用此映射表，我会将其定义为命名范围，以便在其他工作表上更容易使用。更改数据或调整大小仍然可以在不更改对它的任何引用的情况下工作，因为您只需更改命名范围。

# cookies - 如何使用 Phantomjs 的 cookie API？

> ID：14221030
> 
> 赞同：7
> 
> 时间：2013-01-08T17:47:34.393
> 
> 标签：cookies, phantomjs

我正在尝试使用 phantomjs 的示例文件夹中的 rasterize.js 将网页捕获为 PDF。我遇到的问题是网页需要用户登录。然后我看到 Phantomjs 有一个 cookie 选项。该网站由 Django 驱动，以防万一。

所以我很有礼貌地登录了网站，打开了萤火虫，然后输入`document.cookie`了萤火虫。我得到了 cookie 设置并放入了我的 cookies.txt。

```
[http://localhost:7000]
csrftoken: f3da886168fae33b840e7f6c93240dff
sessionid: 27e90c3214b0ec94dadc739665724708
django_language: en 
```

然后我使用 rasterize.js 创建如下 pdf：

```
phantomjs --cookies-file=cookies.txt examples/rasterize.js http://localhost:7000/reports /tmp/report.pdf 
```

但结果仍然是登录页面。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T20:56:40.393

您是否尝试过在 PhantomJS 中自动化登录过程，确保包含 cookie 参数？这样 phantomjs 可以像浏览器一样使用 cookie 对用户进行身份验证。

另一种选择是使用像 fiddler 这样的代理检查请求，比较从有效的 firefox 发出的请求和从 phantomjs 发出的未经过身份验证的请求。标题中的信息应该告诉您缺少什么。

您可以使用 phantomjs 提供的功能添加 cookie：

[http://phantomjs.org/api/webpage/method/add-cookie.html](http://phantomjs.org/api/webpage/method/add-cookie.html)

# maven - 使用 surefire 报告手动运行测试

> ID：14221042
> 
> 赞同：3
> 
> 时间：2013-01-08T17:48:27.383
> 
> 标签：maven, automated-tests, maven-surefire-plugin

我有一系列需要从 Maven 运行的测试。测试通过一系列自定义创建的脚本运行，这些脚本运行类似 qunit 的东西，输出一个 junit 样式的 xml 文件，然后我将其复制到 target/surefire-reports 目录中。我想做的是让surefire插件打印我自己运行的测试结果。目前，surefire 报告没有运行测试（正确，因为它实际上没有运行测试）。

```
-------------------------------------------------------
 T E S T S
-------------------------------------------------------
There are no tests to run.

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0 
```

我希望肯定能够找到由我的测试系统创建的 junit 样式输出文件并报告它们。关于如何实现这一点的任何想法？我知道我可以运行 surefire-report 插件来生成 html 报告，但这不是我要找的我已经有一个聚合器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T20:16:33.387

Surefire 用于运行测试然后报告它们。由于您计划自己运行测试，而且它们甚至不是用 Java 编写的，所以我认为它不适合您。

你想要的是[Surefire Report Plugin](http://maven.apache.org/surefire/maven-surefire-report-plugin/)。有一个名为[surefire-report:report-only](http://maven.apache.org/surefire/maven-surefire-report-plugin/report-only-mojo.html)的目标，这应该是您所需要的。

# java - 为什么 NoClassDefFoundError 的名称错误

> ID：14221045
> 
> 赞同：0
> 
> 时间：2013-01-08T17:48:39.963
> 
> 标签：java, exception

我在包含此代码的`List.java`文件夹中创建了一个文件`UtilityPack`

```
package Utilities;
public class List
{
    private class node{}
    public void insert(int data){}
    public void print(){}
    public static void main(String[] s){}
} 
```

编译我做了

```
C:\UtilityPack>javac List.java 
```

但是当我尝试运行时

```
C:\UtilityPack>java -classpath . List 
```

或者

```
C:\UtilityPack>java List 
```

我收到错误

```
Exception in thread "main" java.lang.NoClassDefFoundError: List (wrong name: Uti
lities/List)
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:14
2)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
        at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
        at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:482) 
```

我一直在尝试从过去 3 个小时开始**执行**此程序，但没有任何效果..请帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T17:51:02.383

您需要完全限定的名称，例如

```
java -cp . Utilities.List 
```

即，您告诉 JVM 从当前的直接 ( `-cp .`) 中查找一个类`Utilities.List`，它会在文件中找到该类`Utilities\List.class`。

为了更加一致，您应该将 .java 文件放在一个`Utilities`目录下（是的 - 这是重复的 - 包指定了这一点，但它是一致的做法）。

我也会避免打电话给你的班级`List`。在某个阶段，您要导入 a `java.util.List`，这一切都会变得非常混乱！

最后，一旦你获得了两个以上的类，就研究[ant](http://ant.apache.org)或其他构建工具，并将你的`source`和`target`目录分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T17:49:38.853

使用类的完整名称来启动您的程序：

```
 java Utilities.List 
```

但文件夹名称也应与包名称匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T17:55:45.727

您的目录结构需要遵循您的 Java 包路径。IOW，如果该类`List`在包中`Utilities`，则需要将其放在名为 Utilities 的目录中，该目录应位于项目的根级别，即源文件的路径应为**C:\UtilityPack\Utilities\List。爪哇**_ 当您在**C:\UtilityPack**（项目根目录）中时，您可以`List`通过将其引用为`Utilities.List`.

您也可以考虑使用 Eclipse，它会阻止此类事情的发生，或者任何其他 Java IDE。

# ios - Flex/Flash Builder/Actionscript/AIR/Mobile iOS 如何使用相机拍摄视频和/或浏览和查看/访问存储在“相机胶卷”中的视频

> ID：14221052
> 
> 赞同：2
> 
> 时间：2013-01-08T17:49:14.610
> 
> 标签：ios, apache-flex, mobile, video, actionscript

我目前的理解是：

**相机界面**

1.  我可以使用**CameraUI**访问**MediaType.VIDEO**的内置摄像头，并委托给内置摄像机应用程序并让我录制视频。我的应用程序现在可以做到这一点。

2.  当我停止录制并单击“使用”按钮时，我将返回到我的应用程序，理论上我有一个有效的**MediaPromise**。

3.  iOS 没有为录制的视频（或照片）提供有效/可用的 url/文件名，所以我必须使用**加载器**来引入/使用/访问“录制的”视频......**和**.. . iOS 实际上并没有在设备上的任何地方创建文件，最重要的是，在使用系统本机相机/视频应用程序时正常行为所期望的**相机胶卷中。**

4.  文档说**Loader**可以加载各种图像类型和 SWF，但对视频数据一无所知，因此我得出结论，我实际上不能使用**CameraUI**生成有效的**MediaPromise**，然后我可以将其传递给**Loader**类或类似的类以读取系统摄像头创建的信息然后进行操作（上传、保存到**applicationStorageDirectory**和/或显示在 API 中可用的两个视频播放器组件之一中）。

**相机胶卷**

1.  我可以在**iOS 相机胶卷**中有视频实体，但 AS3/Air3.5 **CameraRoll**类不允许我以任何方式查看/访问/引用它们。

**普通文件 I/O**

1.  我所有尝试使用 Air3.5 **File**类浏览到**iOS 相机胶卷**的存储位置的尝试都被拒绝了。

**- - - - 问题 - - - -**

1.  我是否认为有一种方法可以拍摄视频但无法使用已捕获的视频。（无法成功使用生成的 MediaPromise）。

2.  我相信您可以使用 Android 拍摄视频并访问它，但文档中没有任何内容表明您不能使用 iOS。

3.  我是否正确地相信 iOS 沙盒应用程序使它们无法使用标准文件 I/O 浏览到视频/照片存储，但只能通过我尝试过的明显不可行的方式（CameraUI 和 CameraRoll）

4.  我是否错误地认为这些应该是相当明显的需求，人们可以使用 XCode Objective C++ 等路由来实现，但由于 Apple 阻止功能或 Adob​​e 未能满足合理的期望，AIR Mobile Framework 不允许？

要传达的讽刺意味。如果我使用 iOS 系统相机应用程序录制视频，则该视频的缩略图会出现在 Gallery/Camera Roll 中，当然，我可以共享或查看它，或者其他...如果我使用 AIR 的 CameraRoll。 browseForImage()，如果我没有使用相机拍摄另一张图像，当它向我显示存储图片的文件夹时，文件夹图标使用最后添加的对象的缩略图......在这种情况下，我的视频拍了，但是如果我再进入文件夹，就找不到视频了。它在戏弄我们。它知道它在那里，但它显然是禁果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T19:01:43.673

我无法回答您的所有问题，因此此条目可能不可接受，但我在搜索您描述的一些问题的解决方案时找到了此页面，并认为其他人可能会发现此答案（部分）有用。

要保存您刚刚拍摄的电影，您需要打开并读取 promise 中的数据。
iOS 不会保存文件，所以`MediaPromise.file`总是为空。

这是我对问题的解决方案：

```
private var camera:CameraUI;
private var dataInput:IDataInput;

public function recordVideo():void
{
    // Start the camera and ask for a video
    camera = new CameraUI();
    camera.addEventListener(MediaEvent.COMPLETE, onCameraComplete);
    camera.launch(MediaType.VIDEO);
}

private function onCameraComplete(event:MediaEvent):void
{   
    // event.data is a MediaPromise and MediaPromise.open() returns a IDataInput
    // Let's cast it to a dispatcher and check when it's complete
    dataInput = event.data.open();
    var dispatcher:IEventDispatcher = IEventDispatcher(dataInput);
    dispatcher.addEventListener(Event.COMPLETE, onDataInputComplete);
}

private function onDataInputComplete(event:Event):void 
{
    // We can do whatever we want with the data, so we'll store it in a File
    var file:File = new File();
    var bytes:ByteArray = new ByteArray();
    var stream:FileStream = new FileStream();

    // Reading the data from the opened MediaPromise
    dataInput.readBytes(bytes);

    stream.open(file, FileMode.WRITE);
    stream.writeBytes(bytes, 0, bytes.bytesAvailable);
    stream.close();
} 
```

另外，我仍在寻找将电影放入 CameraRoll 的方法

# python - 在 eyeD3 中的 find_header()，mp3.py 只找到几个帧头

> ID：14221053
> 
> 赞同：1
> 
> 时间：2013-01-08T17:49:17.157
> 
> 标签：python, header, mp3

我拿了一个大小为 405.9 kB 的 mp3 文件并运行以下命令：

```
# Here fp points to the audio file
# find_header has been imported
def test(fp):
    start_pos = 0
    sync_pos, header, header_bytes = find_header(fp)
    i = 0
    while i < 30:
        start_pos += sync_pos
        sync_pos, header, header_bytes = find_header(fp, start_pos)
        print sync_pos
        i += 1

Output:
102
519
937
1773
3445
14312
21417
85365
127997
None 
```

如果 mp3 文件具有没有任何标题的连续帧，我会感到困惑。这是否也意味着除了以下链接中描述的格式之外，还有其他帧头格式？ [http://www.mpgedit.org/mpgedit/mpeg_format/mpeghdr.htm](http://www.mpgedit.org/mpgedit/mpeg_format/mpeghdr.htm)

# sproutcore - SproutCore 命名空间

> ID：14221056
> 
> 赞同：1
> 
> 时间：2013-01-08T17:49:28.117
> 
> 标签：sproutcore

我想知道如何使用 SproutCore 的 OOP 实现来创建命名空间对象。我过去曾与 Joose 合作过，命名空间是自动生成的，例如：

```
Class('MyNamespace.AnotherNamespace.ClassName',{}) 
```

但是在 SproutCore 中，您可能必须自己创建单个对象？我觉得这有点乏味。我错过了什么吗？

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T17:55:27.333

我认为你是用`SC.Application`对象来做的。

```
YourApp = SC.Application.create({
    AnotherNamespace: SC.Object.create(), // use objects if you want to hook in observers/bindings
    SimpleNotSCObjectNS: {} // for simple stuff
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:33:15.937

SproutCore 类同样易于创建：SC.Object.extend({...})。并且任何对象的任何未保留属性都可以被视为命名空间。只需放入一个 SC.Object (SC.Object.create)。根据 hvg 的回答，您可以在实例化应用程序时声明它，或者稍后在另一个文件中声明它：

```
MyApp.SubNamespace = SC.Object.create({
  ClassName: SC.Object.extend({...}),
  OtherClassName: SC.Object.extend({...})
}); 
```

这并不比您的 Joosie 示例多多少代码。您观察到命名空间不会自动为您创建是正确的，但这具有语义上的好处：您可以在创建命名空间的同时定义所有命名空间的内容，这鼓励了代码的集中化；它可以防止您不小心自动定义拼写错误的命名空间的错误。

这里的关键见解是您的应用程序对象不仅仅是一个名称空间，它是一个提供应用程序功能的类的活动、动态实例。您的应用程序的所有代码都应该放在应用程序对象中的事实创建了一种自然命名空间，我发现大多数时候我的子命名空间以相同的方式工作（myApp.mainPage、myApp.contentController、myApp.remoteDataSource、 myApp.statechart）。当然欢迎您通过 SC.Object 的专用实例将您的代码组织到专用的命名空间中，我经常这样做，但 SC 应用程序倾向于高度自组织。

# java - 创建模块化 Web 项目 (JAVA)

> ID：14221059
> 
> 赞同：0
> 
> 时间：2013-01-08T17:49:35.387
> 
> 标签：java, struts

我有一个使用 Java 6、Struts 1.1 开发并部署在 Tomcat 6 服务器中的非常复杂的 Web 项目。（Eclipse 作为 IDE）

现在，我需要开始开发更多的功能，但是我想在新的模块中开始这个，独立于大项目，所以这个模块可以单独部署，而且这将有助于我管理更多并行工作的开发人员.

我知道该怎么做，如果模块只有逻辑，我可以创建一个新项目并导出为 jar？但在这种情况下，我也会有 JSP 页面.. 有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:25:08.193

您应该考虑迁移到[Apache Maven](http://maven.apache.org/)，它可以管理您的依赖项并鼓励您将代码构建到父项目和子模块中。它还将帮助您的项目由多个开发人员并行工作。

Sonatype 有几本很好地介绍 Maven 的在线书籍：

*   [Maven 示例](http://www.sonatype.com/books/mvnex-book/reference/public-book.html)
*   [Maven 完整参考](http://www.sonatype.com/books/mvnref-book/reference/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T17:57:14.360

ear 格式支持将多个应用程序（war 文件）部署为一个单元。不过，不确定这对您的情况是否有帮助。

# java - Java - 多个 if 语句，但只有最后一个被执行

> ID：14221061
> 
> 赞同：0
> 
> 时间：2013-01-08T17:49:37.483
> 
> 标签：java, if-statement, string-substitution

我有一个简单的替换应用程序，用户输入一个字符串，该字符串分为子字符串，然后将每个字符替换为一个数字。

我遇到的麻烦是只有最后一组替换被执行，或者至少如果前两个正在工作，它们被清空并返回“0”。

所以对于“abc”的输入，我需要一个“123”的输出，但我得到的是“003”，或者如果输入是“bcd”，那么输出应该是“234”，但我得到的是“004”。

我哪里错了？

```
JButton button_1 = new JButton("Substitute");
button_1.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {

    String str = textField_1.getText();

    String str0 = str.substring(0);
    int val1 = 0;
        if (str0.equalsIgnoreCase("a")) { val1 += 1; }
        if (str0.equalsIgnoreCase("b")) { val1 += 2; }
        if (str0.equalsIgnoreCase("c")) { val1 += 3; }
        if (str0.equalsIgnoreCase("d")) { val1 += 4; }

    String str1 = str.substring(1);
    int val2 = 0;
        if (str1.equalsIgnoreCase("a")) { val2 += 1; }
        if (str1.equalsIgnoreCase("b")) { val2 += 2; }
        if (str1.equalsIgnoreCase("c")) { val2 += 3; }
        if (str1.equalsIgnoreCase("d")) { val2 += 4; }

    String str2 = str.substring(2);
    int val3 = 0;
        if (str2.equalsIgnoreCase("a")) { val3 += 1; }
        if (str2.equalsIgnoreCase("b")) { val3 += 2; }
        if (str2.equalsIgnoreCase("c")) { val3 += 3; }
        if (str2.equalsIgnoreCase("d")) { val3 += 4; }

    textField_2.setText(""+Integer.toString(val1)+(val2)+(val3));
    }
});
button_1.setBounds(315, 50, 90, 25);
panel.add(button_1); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T17:51:02.327

`String str0 = str.substring(0);`返回从位置 0 开始并在原始字符串末尾结束的子字符串。因此，在您的情况下，它返回“abc”，您将其与“a”进行比较。

你可以`String str0 = str.substring(0,1);`改用。

或者如评论所述，您可以单独查看每个字符：

```
String str = textField_1.getText();

int[] vals = new int[3];

//you should check that your string is at least 3 characters long
String lower = str.toLowerCase(); //no need to equalsIgnorCase any more
for (int i = 0; i < 3; i++) { //loop over the first 3 characters
    char c = lower.charAt(i);
    if (c >= 'a' && c <= 'd') vals[i] = c - 'a' + 1; //populate the array
}
textField_2.setText("" + Integer.toString(vals[0]) + (vals[1]) + (vals[2])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T17:52:25.520

这为您提供了从第一个字符开始的所有内容，例如“abc”，它不等于“a”

```
String str0 = str.substring(0); 
```

你的意图可能是

```
String str0 = str.substring(0, 1); 
```

顺便说一句，做同样事情的更简单的方法。

```
String str = "abc";
StringBuilder sb = new StringBuilder();
for (char ch : str.toCharArray())
    sb.append(ch % 32);
System.out.println(sb.toString()); 
```

印刷

```
123 
```

# c# - 将 ListBox ItemsSource 绑定到对象内的 ObservableCollection

> ID：14221065
> 
> 赞同：1
> 
> 时间：2013-01-08T17:49:42.873
> 
> 标签：c#, wpf, binding, observablecollection

我在绑定`ListBox.ItemSource`到窗口包含`ObservableCollection`的对象内的对象时遇到问题。`DataContext`

主窗口.xaml

```
<ListBox Name="resourcesListBox"
     ItemsSource="{Binding MyObj.MyCollection}"
     Height="366"
     DockPanel.Dock="Top"

     Margin="10,5,10,0"
     VerticalContentAlignment="Top"
     >

     <ListBox.ItemTemplate>
        <DataTemplate>
           <Grid Margin="5">

               <Grid.ColumnDefinitions>
                   <ColumnDefinition Width="50" />
                   <ColumnDefinition Width="*" />
               </Grid.ColumnDefinitions>
               <Grid.RowDefinitions>
                   <RowDefinition Height="40" />
               </Grid.RowDefinitions>
               <Image Source="{Binding Image}"
                      Grid.Column="0"
                      Grid.Row="0"
                      Margin="0,0,5,0" />
               <TextBlock Grid.Row="0"
                          Grid.Column="1"
                          Text="{Binding Name}"
                          Margin="0,10,0,0" />
          </Grid>
       </DataTemplate>
     </ListBox.ItemTemplate>
</ListBox> 
```

MainWindow.xaml.cs 构造函数

```
dataContextObj= new DataContextObject();
this.DataContext = dataContextObj; 
```

数据上下文对象.cs

```
private MyObj myObj;
    public MyObj MyObj
    {
        get
        {
            return myObj;
        }
        set
        {
            myObj= value;
            OnPropertyChanged("MyObj");
        }
    } 
```

`MyObj`包含名为 的 ObservableCollection `MyCollection`。它没有约束力:(当我试图把一切都完美`MyCollection`地工作时`DataContextObject`。为什么？

**编辑**

```
 public class MyObj: INotifyPropertyChanged
    {
        private ObservableCollection<O> myCollection;
        public ObservableCollection<O> MyCollection
        {
            get
            {
                return myCollection;
            }
            set
            {
                myCollection= value;
                OnPropertyChanged("MyCollection");
            }
         }
        public event PropertyChangedEventHandler PropertyChanged;

        public virtual void OnPropertyChanged(string propertyName)
        {
            if (this.PropertyChanged != null)
                this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
...
} 
```

**编辑 2** 输出

```
System.Windows.Data Warning: 55 : Created BindingExpression (hash=41973697) for Binding (hash=27212573)
System.Windows.Data Warning: 57 :   Path: 'MyObj.MyCollection'
System.Windows.Data Warning: 59 : BindingExpression (hash=41973697): Default mode resolved to OneWay
System.Windows.Data Warning: 60 : BindingExpression (hash=41973697): Default update trigger resolved to PropertyChanged
System.Windows.Data Warning: 61 : BindingExpression (hash=41973697): Attach to System.Windows.Controls.ListBox.ItemsSource (hash=36139932)
System.Windows.Data Warning: 66 : BindingExpression (hash=41973697): Resolving source 
System.Windows.Data Warning: 69 : BindingExpression (hash=41973697): Found data context element: ListBox (hash=36139932) (OK)
System.Windows.Data Warning: 70 : BindingExpression (hash=41973697): DataContext is null
System.Windows.Data Warning: 64 : BindingExpression (hash=41973697): Resolve source deferred 
```

...

```
System.Windows.Data Warning: 66 : BindingExpression (hash=41973697): Resolving source 
System.Windows.Data Warning: 69 : BindingExpression (hash=41973697): Found data context element: ListBox (hash=36139932) (OK)
System.Windows.Data Warning: 77 : BindingExpression (hash=41973697): Activate with root item DataContextObject (hash=30369281)
System.Windows.Data Warning: 107 : BindingExpression (hash=41973697):   At level 0 - for DataContextObject.MyObj found accessor RuntimePropertyInfo(ResourcesListViewModel)
System.Windows.Data Warning: 103 : BindingExpression (hash=41973697): Replace item at level 0 with DataContextObject (hash=30369281), using accessor RuntimePropertyInfo(MyObj)
System.Windows.Data Warning: 100 : BindingExpression (hash=41973697): GetValue at level 0 from DataContextObject (hash=30369281) using RuntimePropertyInfo(MyObj): MyObj (hash=60716890)
System.Windows.Data Warning: 107 : BindingExpression (hash=41973697):   At level 1 - for MyObj.MyCollection found accessor RuntimePropertyInfo(MyCollection)
System.Windows.Data Warning: 103 : BindingExpression (hash=41973697): Replace item at level 1 with MyObj(hash=60716890), using accessor RuntimePropertyInfo(MyCollection)
System.Windows.Data Warning: 100 : BindingExpression (hash=41973697): GetValue at level 1 from MyObj(hash=60716890) using RuntimePropertyInfo(MyCollection): <null>
System.Windows.Data Warning: 79 : BindingExpression (hash=41973697): TransferValue - got raw value <null>
System.Windows.Data Warning: 88 : BindingExpression (hash=41973697): TransferValue - using final value <null> 
```

# android - 将 TextView 中心水平和底部与父级对齐

> ID：14221066
> 
> 赞同：1
> 
> 时间：2013-01-08T17:49:47.663
> 
> 标签：android, xml, android-layout, android-relativelayout

在这个布局中，我有两个视图 - 右下角的 ImageButton 和底部中心的 TextView。当`android:visibility`两个视图都设置为`visible`- 时，所有视图都根据需要对齐。但是，如果我将`android:visibility`ImageButton 设置为`gone`- EditText 会转到布局的左边缘。

问题：

1）为什么会这样？；

2）如何实现不改变`EditText`设置`ImageButton`可见性的位置`gone`？我需要获得与左图相同的布局（见下文），但没有 ImageButton。（我知道，一种可能性是不设置`visibility`为`gone`，而是设置为`invisible`，但我对使用 的解决方案更感兴趣`visibility = "gone"`）

Ps：前两个布局 -`RelativeLayout`并且`FrameLayout`是强制性的 - 它们用于其他内容，我只是删除了所有与问题无关的内容。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <FrameLayout
        android:id="@+id/mForSearchFragment"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@id/mForAdMediation"
        android:layout_alignWithParentIfMissing="true" >

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <EditText
                android:id="@+id/mSearchEditText"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_centerHorizontal="true"
                android:ems="5"
                android:imeOptions="actionSearch"
                android:inputType="text"
                android:visibility="visible" >

                <requestFocus />
            </EditText>

            <ImageButton
                android:id="@+id/mSearchButton"
                android:layout_width="48dp"
                android:layout_height="48dp"
                android:layout_alignParentBottom="true"
                android:layout_alignParentRight="true"
                android:background="@drawable/dark_button"
                android:src="@drawable/tab_search"
                android:visibility="visible" />
        </RelativeLayout>
    </FrameLayout>

</RelativeLayout> 
```

以下是布局： ![布局](../Images/0a61a59ece82a3c18f54ce07eb3328e3.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T17:57:32.907

问题是您的内部 RelativeLayout 位于宽度设置为 wrap_content 的 FrameLayout 内部。因此，当 ImageView 消失时，RelativeLayout 的宽度会缩小到 EditText 的宽度。因此，EditText 仍然在 RelativeLayout 中居中，但 RelativeLayout 仅与 EditText 一样宽。

也许你可以像这样简化你的布局？

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <EditText
        android:id="@+id/mSearchEditText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:ems="5"
        android:imeOptions="actionSearch"
        android:inputType="text"
        android:visibility="visible" >

        <requestFocus />
    </EditText>

    <ImageButton
        android:id="@+id/mSearchButton"
        android:layout_width="48dp"
        android:layout_height="48dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:background="@drawable/dark_button"
        android:src="@drawable/tab_search"
        android:visibility="visible" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T17:56:26.777

嗯，看来我找到了解决方案：

我需要`layout_width`先`FrameLayout`设置`"match_parent"`

# android - 无法为 Android 开发设置 Eclipse

> ID：14221067
> 
> 赞同：0
> 
> 时间：2013-01-08T17:49:54.450
> 
> 标签：android, eclipse, installation

我无法安装 Eclipse 来开发 Android 应用程序。我已经安装了 android-sdk-windows 以及 Eclipse Juno（在 Windows 8 上运行）。

当我启动 Eclipse 时，我收到消息“此版本的 ADT 需要 Android SDK 工具修订版 21.0.0.rc9 或更高版本。当前版本是 15.0.0。请将您的 SDK 工具更新到最新版本”

然后我打开我的 SDK 管理器，并选择更新和安装包。但是我根据下面的图片收到错误消息 ![在此处输入图像描述](../Images/95b64d01bc5046a62c9601f01d07e5c1.png) ![在此处输入图像描述](../Images/ec4bdfd8f3b361a12c880ce419ec66cb.png)

任何人都可以帮忙解决这个问题，因为它让我发疯。我在这里寻找解决方案，但很多解释都非常技术性或跳过“明显”的步骤，我被卡住了。我已经安装和卸载了很多次，但没有运气。我已根据第二条错误消息手动尝试更改文件名，但它说该文件正在使用中，因此我无法重命名它。尝试此操作时，我已经关闭了所有 Internet Explorer 应用程序，并禁用了 Norton 防病毒软件，但仍然没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:54:04.193

在打开 SDK 管理器的同时退出 Eclipse。然后按是。我认为这是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:23:50.280

从此链接[获取 SDK](http://developer.android.com/sdk/index.html)进行下载。它已经配置了 IDE Eclipse 和 SDK 的安装。也许这对你有帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-09T05:26:40.233

您不需要下载 sdk 或其他东西。以下步骤

预请求：安装 Jdk 并设置 JAVA_HOME 并安装 eclipse

1.  启动 Eclipse，然后选择帮助 --> 安装新软件
2.  点击右上角的添加
3.  在 Add Repository 对话框中，为 Name 输入“ADT Plugin”，为 Location [https://dl-ssl.google.com/android/eclipse/输入以下 URL](https://dl-ssl.google.com/android/eclipse/)
4.  点击确定
5.  在可用的软件对话框中，检查开发工具并单击下一步。
6.  阅读许可证并接受它。
7.  那它。结束。

希望你有办法。

# c# - 不与 live.com 合作

> ID：14221076
> 
> 赞同：0
> 
> 时间：2013-01-08T17:50:37.747
> 
> 标签：c#, .net, watin

我正在尝试使用 watin 来模拟使用 c# 登录 live.com。代码如下。

```
IE myIE = new IE("http://login.live.com/");  
myIE.TextField(Find.ByName("login")).TypeText("abc@abc.com"); 
myIE.TextField(Find.ByName("passwd")).TypeText("1234"); 

myIE.Button(Find.ByValue("Sign in")).Click(); 
```

但是它总是找不到文本字段：

> WatiN.Core.Exceptions.ElementNotFoundException：找不到 INPUT（隐藏）或 INPUT（密码）或 INPUT（文本）或 INPUT（文本区域）或 TEXTAREA 元素标记匹配条件：属性“名称”等于“登录”`http://login.live.com/`

主页中的示例代码`http://watin.org/`适用于`www.google.com`.

我是否错过了什么或者有什么特别的东西`http://login.live.com`阻止了 watin 工作？

PS：我正在运行 Windows 7 64 位。VS 2008 与 .net 3.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:05:06.617

您遇到问题是因为您尝试输入的电子邮件字段是 HTML5 元素。

创建此 SO 问题中定义的 TextFieldExtended 类： [WatiN support for HTML5 tags](https://stackoverflow.com/questions/10024178/watin-support-for-html5-tags)

然后您的代码将如下所示：

```
ie.GoTo("http://login.live.com/");
ie.ElementOfType<TextFieldExtended>(Find.ByName("login")).TypeText("thisismyusername@here.com");
ie.TextField(Find.ByName("passwd")).TypeText("thisismypassword");
ie.Button(Find.ByValue("Sign in")).Click(); 
```

在 Watin2.1、IE9、Win7-64 上测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T17:53:58.377

你可能想试试这个：我让它在我的最终工作：

```
ie.Div(Find.ByCustom("innertext","someone@example.com")).Click();
ie.TextField(Find.ById("i0116")).TypeText("hello");
ie.TextField(Find.ById("i0118")).Click();
ie.TextField(Find.ById("i0118")).TypeText("Hello!"); 
```

我推荐使用这个测试记录器。它将为您提供要在源代码中使用的元素名称：

[http://www.codeproject.com/Articles/19180/WatiN-Test-Recorder](http://www.codeproject.com/Articles/19180/WatiN-Test-Recorder)

编辑：

通过 divID 查找时，我也能够让它工作。

```
ie.Element(Find.ById("idDiv_PWD_UsernameExample")).Click() 
```

# cuda - 异常（第一次机会）...内存中的 cudaError_enum

> ID：14221083
> 
> 赞同：3
> 
> 时间：2013-01-08T17:51:07.227
> 
> 标签：cuda, cublas

因此，在一些研究表明问题出在 cublas 库之后，我正在研究一个将我吐出错误的项目。

所以现在我有以下“最小”问题：

我从 NVIDIA CUDA SDK (4.2) 中打开了 simpleCUBLAS 示例，以测试是否可以重现该问题。

该程序本身可以工作，但 VS2010 给了我类似的输出：

`Eine Ausnahme (erste Chance) bei 0x75e3c41f in simpleCUBLAS.exe: Microsoft C++-Ausnahme: cudaError_enum an Speicherposition 0x003bf704..`

7次

所以我的规格：

我使用 GTX 460 进行计算，使用 sm_20 在 Windows 7 64 位上使用 VS2010 进行编译，并且 nvcc --version 给了我：

nvcc：NVIDIA (R) Cuda 编译器驱动程序 版权所有 (c) 2005-2011 NVIDIA Corporation 建立于 Fri_Jan_13_01:18:37_PST_2012 Cuda 编译工具，版本 4.1，V0.2.1221

这是我第一次在这里发帖，所以我为它发布的可怕格式道歉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T12:49:31.570

您所做的观察与在 CUDA 库中正确捕获和处理的异常有关。在某些情况下，这是 CUDA GPU 操作的正常部分。正如您所观察到的，您的应用程序没有返回任何 API 错误并且可以正常运行。如果您不在可以报告此问题的 VS 环境中，则根本不会观察到这一点。

这被认为是 CUDA 下的正常行为。我相信在 CUDA 5.5 中有一些消除它的尝试。您可能希望尝试这样做，尽管这两种方式都不被视为问题。

# linq - Linq 查询，在单个字段上返回不同并返回数据子集

> ID：14221086
> 
> 赞同：1
> 
> 时间：2013-01-08T17:51:15.730
> 
> 标签：linq

我有一个返回三个数据元素的 Linq 查询。

```
var billingDateResults = from s in Subscriptions
            .Where(s => (s.ProductCode.Contains("myCode")))
      select { g.ID, BillingDate =s.BILL_THRU, s.ProductCode}; 
```

我想对此进行不同类型的查询，以将结果限制为每个 ID 一条记录。

```
var billingDateResults = from s in Subscriptions
            .Where(s => (s.ProductCode.Contains("myCode")))
group s by s.ID into g
select g.FirstOrDefault(); 
```

这可行，但现在返回记录中的所有字段，我想通过将结果限制为仅第一个示例中的 3 个字段来最小化数据量。

有什么好方法可以做到这一点？

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T17:54:30.583

然后按这三个字段分组。

```
var billingDateResults =
    from s in Subscriptions
    where s.ProductCode.Contains("myCode")
    group new
    {
        g.ID,
        BillingDate = s.BILL_THRU,
        s.ProductCode
    } by s.ID into g
    select g.First(); // FirstOrDefault is not necessary, the groups will be non-empty 
```

# java - jmdns 在 IPv4 接口上注册，但广播 IPv6

> ID：14221088
> 
> 赞同：5
> 
> 时间：2013-01-08T17:51:36.390
> 
> 标签：java, android, networking, jmdns

所以我试图在 Android 3.2.1 (HTC Flyer) 上使用 jmdns，并且我正在使用 jmdns 进行服务发现。除了我的三台设备中的一台（其余设备正常）正在广播 IPv6 地址而不是 IPv4 之外，一切都运行良好。这很奇怪，因为它们都通过 DHCP 连接到我的家庭网络，所以它们都被分配了 IPv4 地址。

所以在我的设备上我运行

```
 android.net.wifi.WifiManager wifi = (android.net.wifi.WifiManager) getSystemService(android.content.Context.WIFI_SERVICE);
    multicastLock = wifi.createMulticastLock("mylockthereturn");
    multicastLock.setReferenceCounted(true);
    multicastLock.acquire();
    try {
        jmdns = JmDNS.create();

        jmdns.registerServiceType(jmdnsType);
        String jmdnsName = /* Read from db */;
        serviceInfo = ServiceInfo.create(jmdnsType, huggler_id, server.getLocalPort(), " blah blah");

        jmdns.registerService(serviceInfo);
        Log.d(TAG, "JMDNS service registered on ip " + jmdns.getInterface());
    } catch (IOException e) {
        Log.e(TAG, "Error creating JMDNS service (" + e.getMessage() + ")");
        e.printStackTrace();
    } 
```

它打印出漂亮的 IPv4 IP，它实际上与我的网络分配的 IP 匹配（成功）。

但是当我运行在其他设备上发现服务的代码时。

```
for(ServiceInfo si : jmdns.list(jmdnsType, 6000)) { // timeout: 6s
        if (si.getName().equals(jmdnsNAme))
            continue;
        try {
            Log.d(TAG, "Host has " + si.getInet4Addresses().length + "  v4 addresses. ");
            Log.d(TAG, "Host has " + si.getInet6Addresses().length + " v6 addresses. ");

} 
```

当它发现 Flyer 时，它只显示一个 v6 地址。

任何人都可以建议可能发生了什么吗？

我正在使用 Jmdns 3.4.0（3.4.1 根本不起作用！）而且我是一个 zeroconf 新手。

更新：

一些新信息：

```
 D/Huggler ( 5691): Host has 0 v4 addresses. 
    D/Huggler ( 5691): Host has 1 v6 addresses. 
    D/Huggler ( 5691): Host IPv6 address is fe80::66a7:69ff:feeb:9083
    D/Huggler ( 5691): Host IPv6 hostname is fe80::66a7:69ff:feeb:9083
    D/Huggler ( 5691): Host is linklocal true 
```

任何人都可以帮助解释这些吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-21T12:19:28.020

看到了同样的问题，但是在对 jmDNS.create 的调用中传入 InetAddress 似乎可以解决问题。

所以尝试类似：

```
WifiManager wifi =   (WifiManager)getActivity().getSystemService(android.content.Context.WIFI_SERVICE);
String ip = Formatter.formatIpAddress(wifi.getConnectionInfo().getIpAddress());
jmdns = JmDNS.create(InetAddress.getByName(ip)); 
```

# javascript - ExtJS 组件上的 Twitter 按钮

> ID：14221103
> 
> 赞同：0
> 
> 时间：2013-01-08T17:52:30.747
> 
> 标签：javascript, html, extjs, twitter, share

我有一个 ExtJS 组件，我想在上面添加一个 twitter 按钮；这个组件是一个简单面板的项目。

这是我的代码：

```
{
xtype:'container',
id:'tweet-button'
html:'<div><a href="https://twitter.com/share" class="twitter-share-button"' +
     'data-url="http://myPage.com" data-text="newpage" data-via="myTwitterAccount"'+ 
     'data-size="large">Tweet</a>' +
     '<script>!function(d,s,id){' +
     'var js,fjs=d.getElementsByTagName(s)[0];'+
     'if(!d.getElementById(id)){'+
          'js=d.createElement(s);'+
          'js.id=id;'+
          'js.src="http://platform.twitter.com/widgets.js";'+
          'fjs.parentNode.insertBefore(js,fjs);'+
     '}'+
    '}(document,"script","twitter-wjs");</script></div>'
} 
```

Twitter按钮似乎可以正常工作，唯一缺少的是渲染；请提前帮助和感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:09:49.013

这是集成 twitter 按钮的示例 -

```
Ext.onReady(function() {
    Ext.create('Ext.Viewport', {
        layout:'anchor',
        items:[{
    xtype:'panel',
    height: 700,
    width: 700,
    id:'tweet-button',
    html:'<div><a href="https://twitter.com/share" class="twitter-share-button"' +
         'data-url="http://myPage.com" data-text="newpage" data-via="myTwitterAccount"'+ 
         'data-size="large">Tweet</a></div>' 
    }]
    }); 
});

!function(d,s,id){
    var js,fjs=d.getElementsByTagName(s)[0];
    if(!d.getElementById(id)){
        js=d.createElement(s);
        js.id=id;
        js.src="https://platform.twitter.com/widgets.js";
        fjs.parentNode.insertBefore(js,fjs);
    }
}(document,"script","twitter-wjs"); 
```

# android - Android 录制音频没有 SDCARD

> ID：14221104
> 
> 赞同：0
> 
> 时间：2013-01-08T17:52:39.063
> 
> 标签：android, audio, sd-card, audio-recording

我正在阅读有关如何在 android 中录制音频的信息，我想知道是否可以录制音频而不将其存储在 SD 卡中。没有sd卡的终端怎么了？另外，在我的应用程序中，我只想录制声音并上传到我的服务器......所以也许没有必要在 sd o 内部存储器中录制。

我需要在同一个活动中拍照、写文本和录制音频，以将三个发送到我的服务器并存储在数据库中以在其他终端中使用。

有人知道吗？？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:31:21.563

```
 String fileName = "test.3gp"; 
        MediaRecorder mRecorder = mRecorder = new MediaRecorder();
        mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);        
        mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        mRecorder.setOutputFile(context.getCacheDir().getAbsolutePath + "/" + fileName); 
```

标准路径是 /data/data/YOUR_APP_PACKAGE_NAME/cache/ 你还需要确保你有足够的内部存储空间

# sql - 将数据从 SQL Server 数据库加载到 DataTable 并在 MVC3 中显示图表

> ID：14221106
> 
> 赞同：0
> 
> 时间：2013-01-08T17:52:46.557
> 
> 标签：sql, asp.net-mvc-3, datatable, ef-code-first, poco

我对 MVC 和一般编程非常陌生，并且在将数据从 SQL Server 数据库加载到我的 MVC3 应用程序中时遇到了麻烦。我无法让它与模型一起使用，所以我只有一个控制器和一个视图。代码如下所示：

控制器：

```
public ActionResult Datatable()
{
    string conn = System.Configuration.ConfigurationManager.ConnectionStrings["SampleDBConn"].ToString();
    SqlConnection connect = new SqlConnection(conn);
    connect.Open();

    SqlCommand RID = new SqlCommand("SELECT Request_ID FROM SampleDB.dbo.Transactions", connect);
    SqlCommand Tdate = new SqlCommand("SELECT Trans_Date FROM SampleDB.dbo.Transactions", connect);
    SqlCommand MID = new SqlCommand("SELECT Merchant_ID FROM SampleDB.dbo.Transactions", connect);
    SqlCommand Ttype = new SqlCommand("SELECT Trans_Type FROM SampleDB.dbo.Transactions", connect);
    SqlCommand Tamt = new SqlCommand("SELECT Total_Amt FROM SampleDB.dbo.Transactions", connect);

    DataTable dt = new DataTable("MyTable");
    dt.Columns.Add(new DataColumn("Request_ID", typeof(SqlCommand)));
    dt.Columns.Add(new DataColumn("Trans_Date", typeof(SqlCommand)));
    dt.Columns.Add(new DataColumn("Merchant_ID", typeof(SqlCommand)));
    dt.Columns.Add(new DataColumn("Trans_Type", typeof(SqlCommand)));
    dt.Columns.Add(new DataColumn("Total_Amt", typeof(SqlCommand)));

        DataRow row = dt.NewRow();
        row["Request_ID"] = RID;
        row["Trans_Date"] = Tdate;
        row["Merchant_ID"] = MID;
        row["Trans_Type"] = Ttype;
        row["Total_Amt"] = Tamt;
        dt.Rows.Add(row);

    connect.Close();
    return View(dt);
} 
```

看法：

```
 @model System.Data.DataTable

    @{
        ViewBag.Title = "Datatable";
        Layout = "~/Views/Shared/_Layout.cshtml";
    }

   < h2 > Datatable < /h2 >

   < div id="header" >< /div >

   < br / >

   < style type"text/css" >

         #DT1{display:inline}

   < /style >

   < table border="1" id="DT1" style="background-color: Lime" >

        < thead style="background-color:Olive" >
            < tr >

             @foreach (System.Data.DataColumn col in Model.Columns)
             {
                    < th >@col.Caption< /th >
             }
            </tr>

        < /thead >

        < tbody >

           @foreach (System.Data.DataRow row in Model.Rows)
           {
                <tr>
                    @foreach (var cell in row.ItemArray)
                    {
                       <td>@cell.ToString()</td>
                    }
               </tr>
             }
       </tbody>
    </table> 
```

结果表显示每一列，如下所示：

```
Request_Id      
System.Data.SqlClient.SqlCommand 
```

其中“Request_Id”是列标题，“System.Data.SqlClient.SqlCommand”是数据应该存放的位置

我从另一个 stackoverflow 解决方案中使用了这种方法： [Displaying standard DataTables in MVC](https://stackoverflow.com/questions/2243898/displaying-standard-datatables-in-mvc)

我的应用程序的最终目标是通过复选框或下拉列表动态查询我的数据库以显示图表，并且我还需要能够将数据导出到 Excel 文件。如果有人对我应该如何处理这个问题有任何想法或建议，将不胜感激。

我已经能够使用存储过程通过此方法静态创建图表：

```
 @{
        ViewBag.Title = "Chart1"; 
     }

    < h2 >Chart1< /h2 >
    @{
          var db = Database.Open("SampleDBConn");
          var dbdata = db.Query("August2012byMerch");

          var myChart = new Chart(width: 1100, height: 600, theme: ChartTheme.Green)
          .AddTitle("Merchant Totals by Transaction Type: August 2012")
          .AddSeries("Default",
           xValue: dbdata, xField: "Transaction Type",
           yValues: dbdata, yFields: "Total")
           .Write();
           db.Close();
       } 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:39:21.167

就 DataTable 而言，我找到了一个对我有用的解决方案。

根据 Kevin 在评论部分的建议，我使用了带有实体框架代码优先设计的 POCO 模型。研究也让我在这里找到了一个很棒的教程-> [http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-4](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-4)

我的模型基于本教程，然后对其进行了一些修改以满足我的需要。

这是模型：

```
 namespace Example_1.Models
    {
        public class Transaction
        {
            [Key]
            public int TID { get; set; }
            public DateTime TDate { get; set; }   
            public decimal TAmt { get; set; }
            public string Trans_Type { get; set; }
            public int MID { get; set; }
        }
    }

    namespace Example_1.Models
    {
         public class Merchants
         {
            [Key]
            public int MID { get; set; }
            public string Merchant { get; set; }
            public List<Transaction> Transactions { get; set; }
         }
    }
    namespace Example_1.Models
    {
        public class SampleDBEntities : DbContext
        {
            public DbSet<Transaction> Transactions { get; set; }
            public DbSet<Merchants> Merchants { get; set; }
        }
    } 
```

SampleDBEntities 类必须与 web.config 文件中的连接字符串匹配。而 Transactions 类和 Merchants 类必须与我的数据库中设置的变量相匹配。

这是控制器：

```
 public ActionResult Browse(string Merchant)
    {
        var mercmodel = sampledb.Merchants.Include("Transactions")
            .SingleOrDefault(g => g.Merchant == Merchant);
        return View(mercmodel);
    } 
```

Merchant 变量必须与您的 URL 中采用的路径相匹配。例如，我的 URL 是“ [http://localhost:64269/Transaction/Browse?Merchant=ISCO_CA](http://localhost:64269/Transaction/Browse?Merchant=ISCO_CA) ”

然后在视图中，我构建了一个表，我将数据传递到：

```
 <script src="@Url.Content("~/Scripts/sorttable.js")" type="text/javascript">   </script>

   @model Example_1.Models.Merchants

    @{
        ViewBag.Title = "Browse";
    }

    <h2>Browse</h2>

      <h3>Transactions: @Model.Merchant</h3>
     <table class="sortable">
     <tr>
     <th>ID</th>
     <th>Date</th>
     <th>Merchant</th>
     <th>Amount</th>
     </tr>
        @foreach (var transaction in Model.Transactions)
         {
            <tr>
              <td>
                @transaction.TID
             </td>
             <td>
               @transaction.TDate
             </td>
             <td>
               @transaction.Trans_Type
             </td>
             <td>
               $@transaction.TAmt
            </td>
          </tr>
        }
     </table> 
```

这显示了一个漂亮的表格，如下所示：

![我的表](../Images/13993860239ecea2aca6a021dca8410a.png)

# objective-c - CFStringRef 似乎坚持 NSString 没有强引用只是 __bridge (ARC)

> ID：14221107
> 
> 赞同：1
> 
> 时间：2013-01-08T17:52:57.620
> 
> 标签：objective-c, automatic-ref-counting, core-foundation

在 ARC 中， __bridge 应该只暗示没有所有权转移的演员表。但以下代码片段不会崩溃：

```
 int i = 8;
    NSString* str = [[NSString alloc] initWithFormat:@"abc%d",i];
    Employee* e = [Employee newEmployee];
    CFStringRef cfStr = (__bridge CFStringRef)(str);
    str = nil;
    printf("%s\n",CFStringGetCStringPtr(cfStr, kCFStringEncodingMacRoman)); 
```

当我将 nil 分配给 str 时，理想情况下应该释放字符串并且 printf 行应该崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:50:46.997

引用 Josh 的评论：“内存还没有被重用。如果你打开 malloc scribble 或 guard，你会崩溃。”

# safari - Kendo UI - 在 Safari 浏览器中隐藏按钮栏

> ID：14221109
> 
> 赞同：0
> 
> 时间：2013-01-08T17:53:08.263
> 
> 标签：safari, kendo-ui

我们可以使用 Kendo UI api 在 Safari 浏览器中隐藏按钮栏吗？找到隐藏地址栏的api，但找不到隐藏按钮栏的api。

# .net - 使用 VS 2012 在托管 C++ 项目中定位框架时遇到问题

> ID：14221113
> 
> 赞同：1
> 
> 时间：2013-01-08T17:53:26.007
> 
> 标签：.net, visual-studio-2012, managed-c++

我正在尝试将我的所有项目转换并在 VS 2012 下运行。我仍然遇到需要保留在 2.0 框架上的托管 C++ 项目的问题。

我能够编辑 vcxproj 文件并将目标框架版本设置为 v2.0。一旦我这样做了，项目中引用它的警告图标就会消失。在该项目的框架和引用属性窗口中，它甚至显示目标框架：.NETFramework,Version=v2.0。

问题是引用它的项目仍然无法解析命名空间，并且它给出了关于缺少程序集引用的错误。当我查看参考库的属性时，我看到运行时版本仍然显示为 v4.0.30319。

因此，要让这个托管的 C++ 项目真正面向 v2.0，缺少一些东西。我还缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:18:11.947

我不知道 2012 年是否相同，但 2010 年还需要安装 2008 才能构建 3.5 及更早版本。需要将平台工具集更改为 v90

# php - 获取最后一个子节点的值

> ID：14221114
> 
> 赞同：4
> 
> 时间：2013-01-08T17:53:27.433
> 
> 标签：php, xml, xmlnode

这个问题可能看起来很愚蠢，但我无法找到关于如何使用 PHP 找到最后一个孩子的节点值的帮助，即使它对 JS 来说是小菜一碟。这是我的 XML 目前的样子：

```
<?xml version="1.0"?>
<files>
 <file>.DS_Store</file>
 <file>ID2PDF_log_1.xml</file>
 <file>ID2PDF_log_12.xml</file>
 <file>ID2PDF_log_15.xml</file>
</files> 
```

这是php代码：

```
$filename = 'files.xml'; //my xml file name
$dom = new DomDocument();
$dom->load($filename);

$elements = $dom->getElementsByTagName('file');
echo $elements->lastChild(); // This is obviously not working
/*I get an error that I am trying to access an undefined method in DOMNodeList. Now, I know
that lastChild is a property of DOMNode. But I can't figure out how I can change my code to 
get this to work.*/ 
```

我试图呼应

```
ID2PDF_log_15.xml 
```

谁能告诉我如何完成这项工作？

PS：我不想更改xml文件结构，因为我是通过脚本创建的，而且我是一个懒惰的程序员。但是，我确实做了我的研究来得到这个。没有帮助。

我确实尝试获取节点“文件”中的元素数量，然后使用 item(#)，但这似乎也不起作用。

谢谢

**解决方案**

```
$filename = 'files.xml';
$dom = new DomDocument();

$dom->load($filename);

$elements = $dom->getElementsByTagName('file')->length;
echo 'Total elements in the xml file:'.$elements."\n";

$file = file_get_contents('files.xml');
$xml = simplexml_load_string($file); 

$result = $xml->xpath('file');
echo "Last element".$result[$elements-1]."\n"; 
```

稍后我会让这个更整洁。但是，只是认为我应该在未来的任何新用户中分享答案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-08T17:55:19.713

这应该有效：

```
$elements->xpath('root/child[last()]'); 
```

[阅读有关 xpath 的信息](http://uk3.php.net/manual/en/simplexmlelement.xpath.php)

或者，我建议计算元素的数量，然后使用该计数定位最后一个元素：

```
$file_count = $elements->getElementsByTagName('file')->length;
$elements[$file_count]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-18T16:51:21.690

我是这样做的：

```
$elements = $dom->getElementsByTagName('file')->item(0);
echo $elements->lastChild->nodeValue; 
```

# ios - CALayer似乎保留了它的内容——如何释放资源？

> ID：14221119
> 
> 赞同：0
> 
> 时间：2013-01-08T17:53:43.273
> 
> 标签：ios, memory-management, core-animation, calayer

> **可能重复：**
> [使用多层时无法释放未使用的 CALayer 内存](https://stackoverflow.com/questions/10494980/cant-release-unused-calayer-memory-when-using-multiple-layers)

我有一个应用程序，它允许用户浏览一系列 CALayers 图像。我发现在屏幕上添加超过 20 个后，iPad 2 会崩溃 - 显然我需要在屏幕上可见时动态加载它们。

因此，我通过在不再需要时从其 SuperLayer 中删除 CALayer 来实现这一点。然而，我发现在“活动监视器”中查看时内存并没有消失。但是，当我在模拟器中“模拟内存警告”时，它确实会被释放。你可能会想 - 这就是内存警告的用途。*但是*- 当我浏览图像时，我仍然发现 iPad 内存不足，内存使用量不断上升直到崩溃。有谁知道强制 CALayer 释放其资源的方法？

这是我的代码，**请注意，如果我省略分配图层内容**，那么内存使用率仍然很低（但当然你看不到图像）

```
 UIImage* image = [UIImage imageNamed:@"imageName"];

    frontLayer = [CALayer layer];
    frontLayer.bounds = CGRectMake(0, 0, 952, 650);
    frontLayer.contents = (id) image.CGImage; 
```

注意我**没有使用 ARC**，在我从它的超层中删除该层后，我释放它（它由一个属性保留）。内存似乎被低内存警告回收的事实让我认为这不是我保留/释放方式的问题，但我对想法持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:46:03.300

我发现这实际上是这篇文章的副本

[UIImage imageNamed:@""]; 使用缓存，当我使用 [UIImage imageWithContentsOfFile:@""] 时，问题就消失了。

[使用多层时无法释放未使用的 CALayer 内存](https://stackoverflow.com/questions/10494980/cant-release-unused-calayer-memory-when-using-multiple-layers)

# http - GWT：无法访问 xml

> ID：14221122
> 
> 赞同：0
> 
> 时间：2013-01-08T17:53:50.840
> 
> 标签：http, gwt, xml-parsing

我正在尝试从 GWT 中的客户端访问 XML 文件。但看起来 sendRequest 方法根本没有被触发。

我可以在浏览器中看到 xml。我需要在服务器端做任何事情吗？

任何帮助表示赞赏。

这是我的代码

```
 String xmlurl = "http://localhost:8888/test.xml";
    RequestBuilder builder = new RequestBuilder(RequestBuilder.GET, URL.encode(xmlurl));

    try {
      Request request = builder.sendRequest(null, new RequestCallback() {
        public void onError(Request request, Throwable exception) {
            System.out.println(exception);
        }

        public void onResponseReceived(Request request, Response response) {
          if (200 == response.getStatusCode()) {
              System.out.println(response.getText());
          } else {
              System.out.println(response.getStatusCode());
          }
        }       
      });
    } catch (RequestException e) {
        System.out.println("exception"+e);  
    } 
```

我也尝试了以下代码，但遇到了同样的问题。开发人员工具显示响应状态为 200 和正确的响应文本。只是，它在代码中不起作用。

```
 String xmlurl = "http://127.0.0.1:8888/test.xml";
       httpGetFile(xmlurl, new AsyncCallback<String>() {
        public void onFailure(Throwable caught) {
            xmlData = "Error";
        }

        public void onSuccess(String xmlText) {
            xmlData = xmlText;
        }
    });

   public static void httpGetFile(final String url, final AsyncCallback<String> callback) {
    final RequestBuilder rb = new RequestBuilder(RequestBuilder.GET, url);
    rb.setCallback(new RequestCallback() {
        public void onResponseReceived(Request request, Response response) {
            try {
                System.out.println("dafadfdf");
                final int responseCode = response.getStatusCode() / 100;
                if (url.startsWith("file:/") || (responseCode == 2)) {
                    callback.onSuccess(response.getText());
                } else {
                    callback.onFailure(new IllegalStateException("HttpError#" + response.getStatusCode() + " - " + response.getStatusText()));
                }
            } catch (Throwable e) {
                callback.onFailure(e);
            }
        }

        public void onError(Request request, Throwable exception) {
            callback.onFailure(exception);
        }
    });
    try {
        rb.send();
    } catch (RequestException e) {
        callback.onFailure(e);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:50:16.827

您根本不需要 RequestBuilder 来访问 XML 文件。您可以为此使用 ExternalTextResource：

[https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle#TextResource](https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle#TextResource)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T17:19:35.630

始终使用日志记录而不是 System.out.print 语句[https://developers.google.com/web-toolkit/doc/latest/DevGuideLogging](https://developers.google.com/web-toolkit/doc/latest/DevGuideLogging)

第 1 步 - 将日志记录语句添加到失败、成功和尝试捕获语句。清理异常。

第 2 步 - “解析 XML”应该在 rb 回调的“onSuccess”方法中完成。

# c - “int”类型的参数与“segment*”类型的参数不兼容 - 为什么它不接受该对象？

> ID：14221131
> 
> 赞同：0
> 
> 时间：2013-01-08T17:54:23.663
> 
> 标签：c, parameters

我正在尝试初始化一个数组来存储蛇游戏的蛇段

“段”类型的结构在这里定义

```
 typedef struct snakeSegment {
    int x,y;
    }segment 
```

然后我声明蛇的结构（由段组成）

```
struct snakeSegment snake[200]; 
```

下面的代码是snake数组的初始化

```
/*****************************************/
/* Create snake array of length snake_length */
void initSnake(segment snake[], int snake_length)
{
  int x = 50;
  int y = 50;
  snake[0].x= x;
  snake[0].y= y;
   for (int i = 1; i < 21; i++ ) 
  {
    snake[i].x= snake[i-1].x;
    snake[i].y= snake[i-1].y;
    x++;
  }
} 
```

每当它到达 main 方法并尝试运行 initSnake() 函数时，它就会遇到问题

这是主要功能

```
int main() { 
  initDevices();
  remainingSnakes = initGame();
  while ( remainingSnakes ) {
   // waitForStart();
    snakeInPlay= 1;
    currentDirection= 'N';
    initSnake(snake_length, snake );
    renderSnake(snake_length);
  }} 
```

在 initSnake() 代码行上，它在编译时产生此错误：“int”类型与“segment *”类型的参数不兼容

我问过周围的同龄人，有些人似乎遇到了这个问题。我们会寻找另一种解决方案，但我们提供了一个不会有很大改变的主要功能。任何反馈都将不胜感激，因为我不知道为什么会收到此错误。谢谢！

这是我们用来建模的主要功能：

```
initialiseDevices();
remainingSnakes= initialiseGame();
while ( remainingSnakes ) {
waitForStart();
snakeInPlay= 1;
currentDirection= N;
snakeLength= 10;
initialiseSnake( snake, snakeLength );
renderSnake( snake, snakeLength );
while ( snakeInPlay ) {
newDirection= ReadBoardAngle();
currentDirection= moveSnake ( snake, newDirection, snakeLength );
snakeInPlay= testSnakeCollision( snake, snakeLength );
delay();
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T17:56:33.737

这不是您的函数采用的参数：`initSnake(snake_length, snake );`

你可能是说`initSnake(snake, snake_length);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T17:56:44.340

你写它的方式，参数`snake`和`snake_length`被颠倒，所以你试图在它期望蛇*的地方传递一个 int。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T17:58:18.723

您以错误的顺序传递参数。

您的方法签名是：

```
void initSnake(segment snake[], int snake_length) 
```

你正在通过：

```
 initSnake(snake_length, snake ); 
```

您将`int`值作为第一个参数而不是`segment`数组传递

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T17:56:20.460

看起来您在定义函数和调用它之间将参数切换为 initSnake。

# mysql - 我使用哪种 JOIN 类型在此查询中显示 NULL 值？

> ID：14221133
> 
> 赞同：0
> 
> 时间：2013-01-08T17:54:31.390
> 
> 标签：mysql

我正在尝试加入三个表。

第一个表**`transactions`**包含学生获得的“积分”的详细信息。这里的相关字段是`Recipient_ID`（学生获得分​​数）。

第二个表**`purchases`**包含学生购买的“奖励”的详细信息。这里的相关字段是`Student_ID`和`Reward_ID`。

最终表格**`rewards`**详细说明了购买的奖励。这里的相关字段是`Reward_ID`，`Cost_to_User`（学生为每个奖励支付的价格；我目前根本没有使用它）和`Title`。

* * *

我正在尝试做的，提供特定的学生 ID 列表，显示学生积分列表和三个最昂贵的奖励购买。

到目前为止，我编写的 SQL 语句是：

```
SELECT
  t.Recipient_ID AS  `ID` ,
  SUM( t.Points ) AS  `Points Earned`,
  SUBSTRING_INDEX( GROUP_CONCAT(DISTINCT r.Title SEPARATOR ', '),', ',3 ) as `Rewards`
FROM  `transactions` t
JOIN `purchases` p ON t.Recipient_ID = p.Student_ID
JOIN `rewards` r ON p.Reward_ID = r.Reward_ID
WHERE  T.`Recipient_ID` 
  IN ( 90128, 90163, 34403, 35501 )
GROUP BY  t.`Recipient_ID` 
```

这在一定程度上有效 - 显示两名学生，以及他们的总分和最新奖励。

但是，他们的总分大错特错，我相信如果学生没有购买任何东西，他们就不会显示。

**如果学生没有购买，我仍然想展示他们。**

* * *

我怀疑是我的 JOIN 不正确，但我也怀疑`GROUP_CONCAT`不够强大，无法列出三个最昂贵的奖励。我需要更改我的 JOIN，还是需要使用某种子查询？

提前致谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T17:56:30.270

我认为您应该考虑使用`LEFT JOIN`（请参阅[联接的视觉解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)）：

```
SELECT
  t.Recipient_ID AS  `ID` ,
  SUM( t.Points ) AS  `Points Earned`,
  SUBSTRING_INDEX( GROUP_CONCAT(DISTINCT r.Title SEPARATOR ', '),', ',3 ) as `Rewards`
FROM  `transactions` t
LEFT JOIN `purchases` p 
   ON t.Recipient_ID = p.Student_ID
LEFT JOIN `rewards` r 
  ON p.Reward_ID = r.Reward_ID
WHERE  T.`Recipient_ID` 
  IN ( 90128, 90163, 34403, 35501 )
GROUP BY  t.`Recipient_ID` 
```

即使or表中没有记录， A`LEFT JOIN`也会返回表中的所有记录。`transactions``purchases``rewards`

# android - Android位图致命信号11（SIGSEGV）

> ID：14221136
> 
> 赞同：3
> 
> 时间：2013-01-08T17:54:41.047
> 
> 标签：android, bitmap, ocr

我正在开发一个可以拍照并对其进行 OCRed 处理的 android 应用程序。
我有时会在不更改代码的情况下收到此错误，

错误 ：`01-08 20:41:59.940: A/libc(10967): Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1)`

我有一种裁剪图像的方法，让用户突出显示文本：

```
private void performCrop(){

    File file = new File(_path);
    Uri outputFileUri = Uri.fromFile(file);

    try{

        //call the standard crop action intent (the user device may not support it)
        Intent cropIntent = new Intent("com.android.camera.action.CROP");
        cropIntent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
        //indicate image type and Uri
        cropIntent.setDataAndType(picUri, "image/*");
        //set crop properties
        cropIntent.putExtra("crop", "true");
        //indicate aspect of desired crop
        cropIntent.putExtra("aspectX", 5);
        cropIntent.putExtra("aspectY", 1);
        //indicate output X and Y
        cropIntent.putExtra("outputX", 500);
        cropIntent.putExtra("outputY", 100);
        //retrieve data on return
        cropIntent.putExtra("return-data", true);
        //start the activity - we handle returning in onActivityResult
        startActivityForResult(cropIntent, 2);

    }catch(ActivityNotFoundException anfe){
         //display an error message
         String errorMessage = "Whoops - your device doesn't support the crop action!";
         Toast toast = Toast.makeText(this, errorMessage, Toast.LENGTH_SHORT);
         toast.show();
    } catch (Exception ex) {
        Log.v(TAG, ex.toString());
    }
} 
```

这是执行 OCR 的方法：

```
protected void onPhotoTaken() {
    _taken = true;

    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inSampleSize = 2;

    Bitmap bitmap = BitmapFactory.decodeFile(_path, options);

    try {
        ExifInterface exif = new ExifInterface(_path);
        int exifOrientation = exif.getAttributeInt(
                ExifInterface.TAG_ORIENTATION,
                ExifInterface.ORIENTATION_NORMAL);

        Log.v(TAG, "Orient: " + exifOrientation);

        int rotate = 0;

        switch (exifOrientation) {
        case ExifInterface.ORIENTATION_ROTATE_90:
            rotate = 90;
            break;
        case ExifInterface.ORIENTATION_ROTATE_180:
            rotate = 180;
            break;
        case ExifInterface.ORIENTATION_ROTATE_270:
            rotate = 270;
            break;
        }

        Log.v(TAG, "Rotation: " + rotate);

        if (rotate != 0) {

            // Getting width & height of the given image.
            int w = bitmap.getWidth();
            int h = bitmap.getHeight();

            // Setting pre rotate
            Matrix mtx = new Matrix();
            mtx.preRotate(rotate);

            // Rotating Bitmap
            bitmap = Bitmap.createBitmap(bitmap, 0, 0, w, h, mtx, false);
        }

        // Convert to ARGB_8888, required by tess
        bitmap = bitmap.copy(Bitmap.Config.ARGB_8888, true);

    } catch (IOException e) {
        Log.e(TAG, "Couldn't correct orientation: " + e.toString());
    }

    // _image.setImageBitmap( bitmap );

    Log.v(TAG, "Before baseApi");

    TessBaseAPI baseApi = new TessBaseAPI();
    baseApi.setDebug(true);
    baseApi.init(DATA_PATH, lang);
    baseApi.setImage(bitmap);

    String recognizedText = baseApi.getUTF8Text();

    baseApi.end();

    // You now have the text in recognizedText var, you can do anything with it.
    // We will display a stripped out trimmed alpha-numeric version of it (if lang is eng)
    // so that garbage doesn't make it to the display.

    Log.v(TAG, "OCRED TEXT: " + recognizedText);

    if ( lang.equalsIgnoreCase("eng") ) {
        recognizedText = recognizedText.replaceAll("[^a-zA-Z0-9]+", " ");
    }

    recognizedText = recognizedText.trim();

    if ( recognizedText.length() != 0 ) {
        _field.setText(_field.getText().toString().length() == 0 ? recognizedText : _field.getText() + " " + recognizedText);
        _field.setSelection(_field.getText().toString().length());
    }

    // Cycle done.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:57:22.810

一个建议是 ExifInterface 初始化问题。

ExifInterface 的构造函数有一个严重的错误。它不会检查参数文件名字符串是否为空，也不会抛出异常，因此在 JNI 上崩溃会导致 SIGSEGV。

以下帖子将对您有所帮助（对不起，此帖子是日文...） [http://alpha.mixi.co.jp/2013/11572/](http://alpha.mixi.co.jp/2013/11572/) [http://alpha.mixi.co.jp/images/android- compat-jni-crash-exif.png](http://alpha.mixi.co.jp/images/android-compat-jni-crash-exif.png)

所以你应该在初始化 ExifInterface 对象之前检查 _path 的值。

# database - 增量备份解决方案（Sqlite、MySQL、SQL Server）

> ID：14221142
> 
> 赞同：0
> 
> 时间：2013-01-08T17:55:00.323
> 
> 标签：database, backup

我在一个项目中使用 Sqlite。目前我已经收集了 3000 万个样本，数据库文件的大小约为 2 GB！。我还使用 sqlite3.exe 应用程序每 12 小时自动执行一次备份。数据库的大小正在增加，我应该切换到增量备份解决方案。我想问一下sqlite DB是否有办法做到这一点？

如果没有，我可以迁移到另一个 DBMS（如 MySQL 或 Microsoft SQL Server，...）。我可以使用哪个软件来自动化这个增量备份过程。有没有这方面的免费软件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:19:11.680

假设您的表中有必要的字段，您可以简单地将完整备份更改为提取上次拉取*后创建的所有内容的内容：*

```
-- export.sql.template
sql='SELECT * FROM YourTable WHERE SampleID > $lastSampleID' 
```

然后您可以在每次备份后存储最后一个 SampleID：

```
# in pseudo-code - this will not work as-is
cd /path/to/db
lastSampleID=$(cat lastIDFile)
. export.sql.template
echo $sql > export.sql
sqlite db.sqlite --run-script export.sql > backups/$currentDate
lastSampleID=$(get-last-id-from-file backups/$currentDate)
echo $lastSampleID > lastIDFile 
```

# c# - Linq 扩展方法

> ID：14221143
> 
> 赞同：7
> 
> 时间：2013-01-08T17:55:07.137
> 
> 标签：c#, linq, linq-to-sql, extension-methods

我经常需要通过字段来限制选择`publishStart`，`publishEnd`例如`active`

我在几个不同的表中有这些字段。所以应该只选择行，即

```
a: active == true;
b: publishStart < now;
c: publishEnd > now; 
```

因此，例如：

```
db.myTable.SingleOrDefault(a => (a.ID == _theID 
          //now the active and start-end part:            
                      && ((a.publishEnd > DateTime.Now) || (a.publishEnd == null))
                      && ((a.publishStart <= DateTime.Now) || (a.publishStart == null))
                      && a.active == true)); 
```

这有点冗长，所以我想知道是否可以创建一个（扩展？）方法，例如：

```
db.myTable.SingleOrDefault(a => (a.ID == _theID).isActive() 
```

其中`isActive()`提供了上述代码段的 3 行。

我怎么能这样做？有没有更好的方法来清理代码？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-08T18:01:48.920

要定义扩展，您需要一个静态类。您可以将它放在您喜欢的任何名称空间中，只需记住将其包含在您的使用中。

```
public static class Extensions
{
    public static IQueryable<T> Active<T>(this IQueryable<T> source)
        where T : YourEntityType
    {
        return source.Where(a => ((a.publishEnd > DateTime.Now) || (a.publishEnd == null))
                          && ((a.publishStart <= DateTime.Now) || (a.publishStart == null))
                          && a.active == true);
    }
} 
```

注意`YourEntityType`里面。这用于确保方法知道 、 和`publishStart`的`publishEnd`存在`active`。这应该是实现这些字段的类或定义它们的协定（接口）。

然后你会这样称呼它：

```
var item = db.myTable.Active().SingleOrDefault(...); 
```

更多关于扩展方法的信息：http: [//msdn.microsoft.com/en-us/library/bb383977.aspx](http://msdn.microsoft.com/en-us/library/bb383977.aspx)

* * *

由于到处弹出很多评论，我将在此处添加对界面解决方案的简要说明...

不清楚三个过滤字段是否有通用实现或定义它们的接口。如果没有，为了上述工作，您也不会：

1.  实现这些字段的基类。在这种情况下，您将替换`YourEntityType`为`YourBaseEntityType`.
2.  定义字段的接口。在这种情况下，您需要让您的类实现这些字段。如果类是自动生成的（例如，首先是实体框架模型/数据库），那么您可以实现部分类，让它们实现接口。在这种情况下，您将替换`YourEntityType`为`IYourContract`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T18:02:13.333

像这样定义一个接口

```
public interface IHaveAActivityPeriod 
{
    Boolean active { get; }

    DateTime? publishStart { get; }

    DateTime? publishEnd { get; }
} 
```

并将其添加到所有相关类。

```
public class Foo : IHaveAActivityPeriod { [...] }

public class Bar : IHaveAActivityPeriod { [...] } 
```

现在您可以使用此扩展方法

```
public static class Extensions
{
    public static Boolean IsActive(this IHaveAActivityPeriod item)
    {
        var now = DateTime.Now;

        return item.active &&
               (item.publishStart <= now)
               (!item.publishEnd.HasValue || (item.publishEnd > now));
    }
} 
```

在每个实例上实现`IHaveAActivityPeriod`.

```
var foo = new Foo();

var isFooActive = foo.IsActive();

var bar = new Bar();

var isBarActive = bar.IsActive(); 
```

我完全错过了构建一个执行序列过滤而不是一次查看单个实体的扩展方法的可能性。只需将 flem 的答案中的扩展方法作为类型约束在接口中抛出即可。

```
public static class Extensions
{
    public IQueryable<T> IsActive<T>(this IQueryable<T> sequence)
        where T : IHaveAActivityPeriod
    {
        return source.Where(item =>
                   item.active &&
                   (item.publishStart <= now) &&
                   (!item.publishEnd.HasValue || (item.publishEnd > now));

    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-08T18:00:40.307

```
public static class Extensions
{
    public static IEnumerable<MyClass> isActive(this IEnumerable<MyClass> list)
    {
        return list.Where(a =>  
               ((a.publishEnd > DateTime.Now) || (a.publishEnd == null))
                 && ((a.publishStart <= DateTime.Now) || (a.publishStart == null))
                 && a.active == true);
    }
} 
```

# c++ - 找不到 operator= 的匹配项（在向量中查找值 )

> ID：14221145
> 
> 赞同：2
> 
> 时间：2013-01-08T17:55:13.630
> 
> 标签：c++, vector, find

我显然在这里遗漏了一些东西，但是什么？

定义（`...`表示有效代码，不是实际的三点）：

```
class CrmxFile {
private:
    const std::vector<std::string> validValues;
    int value;

public:
    void setValue(std::string _value);

...
}

std::vector<std::string> CrmxFile = {...}; 
```

在代码中我有这个：

```
void Crmx::SetValue(std::string _value) {
    std::vector<std::string>::iterator idx;
    if((idx = std::find(validValues.begin(), validValues.end(), _value)) == validValues.end()) {
        value = 0;
    }
    else {
        value = idx - validValues.begin();
    }
} 
```

我编译这个，`gcc -c -std=c++0x`我得到这个错误：

```
CrmxFile.cpp: In member function ‘void CrmxFile::SetValue(std::string)’:
CrmxFile.cpp:24:64: error: no match for ‘operator=’ in ‘idx = std::find [with _IIter = __gnu_cxx::__normal_iterator<const std::basic_string<char>*, std::vector<std::basic_string<char> > >, _Tp = std::basic_string<char>](Id3V1::validValues.std::vector<_Tp, _Alloc>::begin [with _Tp = std::basic_string<char>, _Alloc = std::allocator<std::basic_string<char> >, std::vector<_Tp, _Alloc>::const_iterator = __gnu_cxx::__normal_iterator<const std::basic_string<char>*, std::vector<std::basic_string<char> > >, typename std::_Vector_base<_Tp, _Alloc>::_Tp_alloc_type::const_pointer = const std::basic_string<char>*](), Id3V1::validValues.std::vector<_Tp, _Alloc>::end [with _Tp = std::basic_string<char>, _Alloc = std::allocator<std::basic_string<char> >, std::vector<_Tp, _Alloc>::const_iterator = __gnu_cxx::__normal_iterator<const std::basic_string<char>*, std::vector<std::basic_string<char> > >, typename std::_Vector_base<_Tp, _Alloc>::_Tp_alloc_type::const_pointer = const std::basic_string<char>*](), (*(const std::basic_string<char>*)(& _value)))’
CrmxFile.cpp:24:64: note: candidates are:
/usr/include/c++/4.6/bits/stl_iterator.h:702:11: note: __gnu_cxx::__normal_iterator<std::basic_string<char>*, std::vector<std::basic_string<char> > >& __gnu_cxx::__normal_iterator<std::basic_string<char>*, std::vector<std::basic_string<char> > >::operator=(const __gnu_cxx::__normal_iterator<std::basic_string<char>*, std::vector<std::basic_string<char> > >&)
/usr/include/c++/4.6/bits/stl_iterator.h:702:11: note:   no known conversion for argument 1 from ‘__gnu_cxx::__normal_iterator<const std::basic_string<char>*, std::vector<std::basic_string<char> > >’ to ‘const __gnu_cxx::__normal_iterator<std::basic_string<char>*, std::vector<std::basic_string<char> > >&’
/usr/include/c++/4.6/bits/stl_iterator.h:702:11: note: __gnu_cxx::__normal_iterator<std::basic_string<char>*, std::vector<std::basic_string<char> > >& __gnu_cxx::__normal_iterator<std::basic_string<char>*, std::vector<std::basic_string<char> > >::operator=(__gnu_cxx::__normal_iterator<std::basic_string<char>*, std::vector<std::basic_string<char> > >&&)
/usr/include/c++/4.6/bits/stl_iterator.h:702:11: note:   no known conversion for argument 1 from ‘__gnu_cxx::__normal_iterator<const std::basic_string<char>*, std::vector<std::basic_string<char> > >’ to ‘__gnu_cxx::__normal_iterator<std::basic_string<char>*, std::vector<std::basic_string<char> > >&&’ 
```

我错过了什么？或者，是否有更好的方法来查找向量中给定值的索引？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T17:59:21.077

`idx`必须是一个，`const_iterator`因为 `validValues`是一个`const vector<...>`。

```
std::vector<std::string>::const_iterator idx; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T18:02:04.830

由于`validValues`is `const`, `begin()`, `end()`, 因此 , 的这个实例化`std::find`都返回`std::vector<std::string>::const_iterator`, not `std::vector<std::string>::iterator`。为了 const 安全， a`const_iterator`不能转换为`iterator`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T18:02:23.023

`validValues`定义为`const std::vector<std::string>`。因此`begin()`and`end()`将返回`const_iterator`，但您正试图将结果分配给 a `iterator`。将 a 转换`const_iterator`为 an`iterator`会破坏 const 的正确性（因为您可以继续更改底层对象），因此是不允许的。

更改`idx` to be的定义，`std::vector<std::string>::const_iterator`它应该可以工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T18:41:24.990

“我错过了什么？”

您的第一个 validValues 无效吗？

我建议：

```
void Crmx::SetValue(std::string _value) {

        value = std::find(validValues.begin(), validValues.end(), _value) - validValues.begin();

} 
```

并使用 validValues.size 作为无效值，而不是 0

# elasticsearch - 在 ElasticSearch 中，我应该为单独但相关的实体使用多个索引吗？

> ID：14221159
> 
> 赞同：12
> 
> 时间：2013-01-08T17:56:21.023
> 
> 标签：elasticsearch

添加索引的开销是有据可查的，但我无法找到关于何时使用多个索引来处理被索引的各种文档类型的良好信息。

**这是一个说明问题的通用示例：**

**假设我们有以下实体**

*   产品（名称、ProductID、ProductCategoryID、商店列表）
*   产品类别（名称、ProductCategoryID）
*   商店（名称、商店 ID）

我应该将这三种不同类型的文档转储到一个索引中，每个索引都有适当的`elasticsearch type`吗？

我很难确定在一个索引与多个索引上画线的位置。

如果我们添加一个不相关的实体“网页”会怎样。绝对是一个单独的索引？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-13T12:27:44.643

一段非常有趣的视频，解释了 Shay Banon 的 elasticsearch **“数据设计模式”**：

[http://vimeo.com/44716955](http://vimeo.com/44716955)

这个确切的问题在 13:40 得到回答，通过查看**类型、过滤器**和**路由的概念来检查不同的数据流**

问候

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-18T09:41:47.223

我最近从头开始对 ElasticSearch 后端进行建模，从我的角度来看，最好的选择是将所有相关文档类型放在同一个索引中。

我读到[有些人有太多并发索引的问题](http://elasticsearch-users.115913.n3.nabble.com/More-indices-vs-more-types-tp3999423p4002051.html)（每种类型 1 个索引）。将相关类型统一在同一个索引中对性能和健壮性更好。

此外，如果类型在同一个索引中，您可以使用“ [_parent](http://www.elasticsearch.org/guide/reference/mapping/parent-field.html) ”字段创建分层模型，允许您使用有趣的功能进行搜索，如“ [has_child](http://www.elasticsearch.org/guide/reference/query-dsl/has-child-query.html) ”和“ [has_parent](http://www.elasticsearch.org/guide/reference/query-dsl/has-parent-filter.html) ”，当然您不必在模型中复制数据。

# android - 有没有办法从地图视图中删除国家和城市名称？

> ID：14221162
> 
> 赞同：2
> 
> 时间：2013-01-08T17:56:28.463
> 
> 标签：android, google-maps, android-mapview

我正在寻找显示没有国家或城市名称的谷歌地图的方法。我正在使用 android.maps.MapView 来显示地图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:45:26.930

文本标签内置于 Google 的数据中，遗憾的是无法删除它们。

[Google Maps v2 框架](https://developers.google.com/maps/documentation/android/map#map_types)让您可以在没有文本标签的情况下显示卫星数据。

# sql - 查询以更新具有多个值的单行

> ID：14221165
> 
> 赞同：-2
> 
> 时间：2013-01-08T17:56:33.567
> 
> 标签：sql, oracle, oracle10g

我需要运行以下更新脚本

```
update table1 set col1 = 'xxxx', 
col2 = (select cc.client_type
        from table2 t2, table3 t3, table1 t1
        where t2.col3='YYY' 
        AND t3.col4 != 'aaa'
        AND t3.col5 = 'Y'
) 
```

我收到以下错误

```
Error report:
SQL Error: ORA-01427: single-row subquery returns more than one row
01427\. 00000 -  "single-row subquery returns more than one row" 
```

我正在使用 Oracle 10g。**这有什么帮助吗？？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:58:51.863

```
update table1 t set col1='xxx',
col2= (select cc.client_type from table2 t2, table3 t3
where t2.col3='YYY' 
    AND t3.col4 != 'aaa'
    AND t3.col5 = 'Y'
    AND t2.random_col=t3.random_col) 
```

将更新必要的记录（假设内部查询只返回一行）。但是，它将是一个常量值（其中 random_col 是可以与 table2 和 table3 关联的某个列，random_col2 是可以与 table3 和 table1 关联的某个列）

另一种可能性是：-

```
update table1 t set col1='xxx',
    col2= (select cc.client_type from table2 t2, table3 t3
    where t2.col3='YYY' 
        AND t3.col4 != 'aaa'
        AND t3.col5 = 'Y'
        AND t2.random_col=t3.random_col
        AND t3.randome_col2=t.random_col2) 
```

以上将根据 table2 和 table3 使用不同（或相同）的值更新 table1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:05:55.620

您得到的错误是因为，正如它所说，子查询返回不止一行。您的查询当前正在使用相同的数据更新整个 table1。我建议以某种方式加入外部 table1 引用，以便您在子查询中为外部查询中的每一行获取一行。就像是

```
update table1 t0 set col1 = 'xxxx', 
col2 = (select cc.client_type
    from table2 t2, table3 t3, table1 t1
    where t2.col3='YYY' 
    AND t3.col4 != 'aaa'
    AND t3.col5 = 'Y'
    AND t0.colx = t1.colx
) 
```

# linux - 如何将文件从 Windows 传输到 Linux 服务器，使用 shell 脚本对其进行处理，然后将结果下载回来

> ID：14221166
> 
> 赞同：2
> 
> 时间：2013-01-08T17:56:39.400
> 
> 标签：linux, windows, shell, sftp, scp

我通常使用 WinSCP 执行此操作：我将`.tex`文件从本地 Windows 机器传输到 Linux 服务器。我为我运行一个脚本（在服务器上）到`pdflatex`该文件。我再次使用 WinSCP 将输出再次复制`.pdf`到我的本地 Windows 机器。我想在我的脚本中自动化复制过程。

所以第一步是`file.tex`从`C:\Doc...\source`to复制`~/Documents`。我想我需要使用该`scp`命令，但服务器将我的本地机器视为远程机器。这就是为什么我对如何指定第一个目录感到困惑：

```
$scp C:\Doc...\source\file.tex ~/Documents 
```

不起作用，因为服务器不知道如何与我的本地机器通信。`scp`对于我需要用来复制`file.pdf`回本地 Windows 机器的命令，我遇到了同样的问题。

有人可以帮我处理这两个 scp 命令吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-09-05T05:55:26.200

您可以[在脚本模式下使用 WinSCP](https://winscp.net/eng/docs/guide_automation)。它（自然）支持上传/下载。但它也可以使用[`call`命令](https://winscp.net/eng/docs/scriptcommand_call)在服务器上执行 shell 脚本（有一些限制，在您的简单情况下应该无关紧要）：

```
winscp.com /log=winscp.log /command ^
    "open scp://username:password@example.com/" ^
    "cd /remote/path" ^
    "put my.tex" ^
    "call pdflatex ..." ^
    "get my.pdf" ^
    "exit" 
```

*（我是WinSCP的作者）*

# svn - 如何使用 master.cfg 文件获取 Buildbot 中已完成构建的最新 SVN 修订号？

> ID：14221167
> 
> 赞同：2
> 
> 时间：2013-01-08T17:56:40.113
> 
> 标签：svn, buildbot

我正在寻找一种方法或示例代码，以根据 Builder 名称获取先前完成的 SVN 修订号。我的目的是使用数字的差异来查询 SVN 并为构建所做的更改创建报告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T17:40:03.723

每个构建都已经具有它使用的 SVN 修订版（“got_revision”）。您可以直接从 Build 的状态中使用它。

如果您只想要该构建器上的最后一个构建，您可以查询构建器以获取最后一个构建。构建状态有“getLastFinishedBuild”来帮助解决这个问题。

# validation - cakephp 网址验证

> ID：14221170
> 
> 赞同：0
> 
> 时间：2013-01-08T17:56:53.393
> 
> 标签：validation, cakephp

我的一个模型有一个“url”字段。我正在使用默认的 url 验证规则。尝试添加特定 url 时，它不会被验证。

导致验证失败的 url 是[http://careers2.hiredesk.net/ViewJobs/JobDetail.asp?Comp=I3&TP_ID=1&PROJ_ID=](http://careers2.hiredesk.net/ViewJobs/JobDetail.asp?Comp=I3&TP_ID=1&PROJ_ID=) {BDA01FCD-5703-4D40-9197-CCF688633951}

该`{`字符导致验证失败。我在这里有什么解决方法？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-08T18:04:30.290

您是否首先通过[URL 编码函数](http://php.net/manual/en/function.rawurlencode.php)传递给定的 URL ？有关示例，请参见链接页面。

# android - onbackpressed 退出应用程序

> ID：14221172
> 
> 赞同：0
> 
> 时间：2013-01-08T17:57:00.537
> 
> 标签：android, back-button, oncreate, ondestroy, start-activity

我有一个应用程序，它有一个主菜单（MainMenu.java），它在按下菜单按钮时启动一个活动（ActivityBlah）：

```
public void onClick(View v) {
 switch (v.getId()) {
 case R.id.AcitivityBlahButton:
   startActivity(new Intent(MainMenu.this, AcitivityBlah.class));
   break;
 }
} 
```

ActivityBlah.java 不应调用 onDestroy，而应在按下后退按钮时调用 onResume，此按钮也应通向主菜单。

试过这个：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event)  
{
      if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0)
      {
        this.moveTaskToBack(true);
           return true;
      }
      return super.onKeyDown(keyCode, event);
} 
```

和这个：

```
@Override
public void onBackPressed() {
  onPause();
  startActivity(new Intent(ActivityBlah.this, MainMenu.class));
} 
```

..还有一些关于这个网站的建议 - 他们都没有奏效。

1）当 ActivityBlah 处于前台时，只要我按下后退按钮，它就会关闭应用程序并显示手机的主屏幕。在这种情况下，如何确保返回 MainMenu？

2）一旦我在 1）中成功，我如何确保 MainMenu.java 中的 StartActivity 不会“创建”ActivityBlah，而是“恢复”它，因为我会通过按下后退按钮“暂停”它而不是“破坏”它？

# regex - 使用 MVC 3 的正则表达式和其他验证

> ID：14221175
> 
> 赞同：1
> 
> 时间：2013-01-08T17:57:11.473
> 
> 标签：regex, asp.net-mvc, asp.net-mvc-3, validation, asp.net-mvc-validation

我需要在 MVC 中实现以下验证

**1\. 日期字段**

1.  字段只能接受 mm/dd/yyyy 格式，并且应该在 1753-9999 之间的年份范围内以及其他基本检查，例如叶年和 30、31 天

2.  有时字段可以接受文本“N/A”（不适用）

3.  日期也应该大于开始日期。

**2\. 数值字段**

1.  应该接受从 1 到 100 的有效数字，如果是十进制 0.1 到 99.99

2.  可以接受 N/A

**3.依赖字段**

仅当另一个字段具有值时才需要此字段。

**4\. 触发器**

1.  如果此字段值是 A->B，那么它应该会影响其他可编辑的字段值。

    ***是否有任何 MVC 3 支持所有库？还是我将 [万无一失](http://foolproof.codeplex.com/)和标准 MVC 验证结合起来？对实现我的上述需求有什么建议吗？***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:24:14.747

为什么不利用 HTML5

时间

```
 @Html.TextBox("timeFrom", DateTime.Now.AddHours(2).ToString("HH:mm"), new { type = "time", size = 3, step = "1" }) 
```

日期

```
@Html.TextBox("Mydate", new { required = "required", type="date" }) 
```

对于号码

```
<input type="number" name="quantity" min="1" max="100">
@Html.TextBox("number", new {type="number" name="quantity" min="1" max="100"}) 
```

对于依赖字段，您可以使用 system.componentmodel。数据注释

# c# - 将纯 HTML 网格改造为 c# 网格

> ID：14221184
> 
> 赞同：2
> 
> 时间：2013-01-08T17:57:53.753
> 
> 标签：c#, asp.net, html, webforms

我意识到这是一个奇怪/简单的问题。我有组成网格的 HTML（表格和行）。我需要生成的网格看起来与 HTML 完全一样，数据从`DataTable`.

我该怎么做呢？如果我用 a 替换 HTML，`GridView`结果看起来与我需要的不同。我是否创建一个吐出表格和行的自定义网格类？

澄清一下：我得到了一个 HTML 网格......

```
<div>
    <table>
        <tr>
            <td>row 1 col 1</td>
            <td>row 1 col 2</td>
        </tr>
        <tr>
            <td>row 2 col 1</td>
            <td>row 2 col 2</td>
        </tr>
    </table>
</div> 
```

...我现在需要用表格中的数据填充，并保留原始 HTML。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T18:37:07.143

如果您想使用 ASP.Net 数据绑定功能，请使用[Repeater](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater%28v=vs.110%29.aspx)。标记将如下所示：

```
<table>
    <thead>
         <tr>
             <th>Heading</th>
         </tr>
    </thead>
    <tbody>
         <asp:Repeater runat="server">
             <ItemTemplate>
                 <tr>
                     <td><%# Eval("SomeFieldName") %></td>
                 </tr>
             </ItemTemplate>
         </asp:Repeater>
    </tbody>
</table> 
```

您还可以通过实例化表/行/单元格对象并将它们添加到页面、控件或父容器控件的控件集合中，在代码隐藏中手动构建标记。这往往很耗时，但在某些情况下它是一个有效的选项，例如当您希望拥有不易在中继器中表达的高度动态的内容时。

第三种选择是将服务器标记与客户端标记混合，例如

```
<table>
    <thead>
         <tr>
             <th>Heading</th>
         </tr>
    </thead>
    <tbody>
         <% foreach( var obj in someCollection ){ %>
             <tr>
                 <td><%= obj.Property %></td>
             </tr>
         <% } %>
    </tbody>
</table> 
```

最后一个选项与ASP.Net MVC 视图中使用的[Razor](http://razorengine.codeplex.com/)语法非常相似（尽管更冗长） 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T18:09:13.447

我认为你最好的选择是中继器。下方链接。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater(v=vs.100).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T23:11:35.347

另一种选择是使用带有 HTML 表设置的 ListView 作为 LayoutTemplate。

快速示例：

```
 <asp:ListView ID="MyListView" runat="server">                                        
            <LayoutTemplate>                                        
                <table id="Table1" cellpadding="1" width="100%" runat="server">                                        
                    <tr id="Tr1" runat="server">                                        
                        <th id="Th1" style="font-weight: bold; text-align: left" runat="server">                                        
                           Header1                                        
                        </th>                                        
                        <th id="Th2" style="font-weight: bold; text-align: left" runat="server">                                        
                            Header2                                         
                        </th>                                                                                                            
                    </tr>                                        
                    <tr runat="server" id="itemPlaceholder" />                                        
                </table>                                        
            </LayoutTemplate>                                        
            <ItemTemplate>                                        
                <tr id="Tr2" runat="server">                                        
                    <td style="text-align: left">                                        
                        <%# Eval("Field1")%>                                        
                    </td>                                        
                    <td style="text-align: left">                                        

                         <%# Eval("Field2")%>                                        
                    </td>                                      

                </tr>
            </ItemTemplate>
        </asp:ListView> 
```

# objective-c - 何时最好执行 iCloud 同步

> ID：14221187
> 
> 赞同：0
> 
> 时间：2013-01-08T17:58:07.257
> 
> 标签：objective-c, ios, icloud

我正在通过 iCloud 同步表格视图项目列表。何时最好执行同步。这是我对各种选项的理解。

**didFinishLaunchingWithOptions** - 这只会在应用程序启动时被调用。由于大多数用户将应用程序发送到后台而不是退出，因此很可能不会经常调用此方法。

**applicationWillEnterForeground** - 每次从后台打开应用程序时都会发生这种情况，如果互联网连接速度很慢，这可能会导致 UI 显示暂停？

**applicationDidEnterBackground** - 我相信我们只有 5 秒的时间来执行任何操作，所以慢速连接可能意味着我们无法同步。

您的想法最佳同步时间是什么时候？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:05:56.423

好吧，除了文档每隔几秒钟保存一次这一事实之外，与 iCloud 同步的最佳时间很大程度上取决于具体情况。

例如，如果您创建了一个如果不存储到 iCloud 就会丢失的全新对象，那么立即与 iCloud 进行同步可能是个好主意。

相反，如果您创建了一个全新的对象，如果由于它保存在 Core Data 中而未存储到 iCloud，则该对象不会丢失，那么您可能可以将保存的内容合并到其他地方，因为您担心同步将占用的速度和 CPU。

# android - 是否可以在扩展视图的类中使用意图？

> ID：14221188
> 
> 赞同：1
> 
> 时间：2013-01-08T17:58:09.427
> 
> 标签：android, class, android-intent, view

我正在为 Android 制作一个回合制 RPG 游戏。我有一个扩展视图的类，我需要启动另一个也扩展视图的类。第一类是玩家在地图上走动的地方，第二类是战斗画面。我试图让它工作，但我得到了这个错误。

```
The constructor Intent(GameView, Class<BattleView>) is undefined 
```

我之前使用过意图完全没有任何问题，但我从未尝试在扩展视图的类中使用意图。我想这就是我遇到问题的原因。是否可以在扩展视图的类中使用意图？

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T18:13:55.047

[您正在寻找的Intent](http://developer.android.com/reference/android/content/Intent.html#Intent%28android.content.Context,%20java.lang.Class%3C?%3E%29)的构造函数需要一个上下文，然后是您要启动的类（一个活动）。

从您的视图类中，您应该能够做到这一点：

```
Intent intentToLaunch = new Intent(getContext(), BattleView.class); 
```

这将正确创建您的 Intent，但您将无法从您的视图中启动 Activity，除非您将 Activity 传递给您的视图，这是一个非常糟糕的主意。确实这是一个糟糕的设计，因为您的视图不应该启动其他活动。相反，您的视图应该调用该视图的创建者将响应的接口。

它可能看起来像这样：

```
public class GameView extends View {

  public interface GameViewInterface {
    void onEnterBattlefield();

  }
  private GameViewInterface mGameViewInterface;
  public GameView(Context context, GameViewInterface gameViewCallbacks) {
      super(context);
      mGameViewInterface = gameViewCallbacks;
  }

  //I have no idea where you are determining that they've entered the battlefield but lets pretend it's in the draw method
  @Override
  public void draw(Canvas canvas) {

     if (theyEnteredTheBattlefield) {
       mGameViewInterface.onEnterBattlefield();
     } 
  }

} 
```

现在很可能您正在从 Activity 类创建此视图，因此在该类中，只需创建 GameViewInterface 的实例。当您在 Activity 中调用 onEnterBattlefield() 时，按照我向您展示的意图调用 startActivity。

# css - CSS：无法在 chrome 中加载资源

> ID：14221189
> 
> 赞同：1
> 
> 时间：2013-01-08T17:58:13.613
> 
> 标签：css, django, google-chrome

我有一个本地运行的 django 站点。除了 Chrome 无法加载的 CSS 文件外，一切似乎都很好。我可以`Failed to load resource`在控制台中看到一个错误。

*   该网站在firefox中没问题
*   如果我不是从本地服务器而是从生产服务器获取 css，该站点就可以了
*   可以正确查看css源
*   我没有安装特殊的拦截器插件
*   css 相当大，但如果我使用非常短的文件，我仍然会遇到问题
*   我对一些 js 文件有类似的问题（ckeditor）
*   它适用于其他一些 css 和 js（例如管理员 css）
*   django 应用程序是使用 1.0 开发的，我正在将其移至 1.4。css 和 js 文件用作媒体

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:42:55.507

没有找到真正的原因，但问题已经解决。也许是因为它被用作媒体，现在它被用作静态。

# internationalization - 德语有标准的计算机词汇吗？西班牙语？

> ID：14221191
> 
> 赞同：1
> 
> 时间：2013-01-08T17:58:25.090
> 
> 标签：internationalization, terminology, vocabulary

我的任务是为我们的软件的德语版本提出更短的德语单词。

这让我想到在某处应该有某种信息技术的标准词汇。就像大多数（如果不是全部）德国计算机用户使用的“必须”术语一样，英语使用者称之为*file* , *database* , *record* , *search* , *search terms* , *search hits* , *find and replace* , *delete* , *OCR* ... you明白了。

我在 ISO 网站上找到了 ISO 2382，但它似乎只是将英语和法语标准化。德语有同等标准吗？西班牙语或其他语言怎么样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-04T23:35:08.307

我会给出答案，“不”。

即使在英语中，也没有像您介绍的那样描述计算机操作的标准词。当然可以“删除”一个文件，但他们也可以“删除”它，“删除”它，（不寒而栗）“把它移到垃圾桶”。

与其试图解决大问题，我建议你解决小问题。建立一个常用德语单词的词汇表，每当有机会扩展词汇表时，首先查看现有条目并尽力重用当前术语。

在某种程度上，优秀的英文文档之所以能运作良好，是因为优秀的英语作者明确或隐含地使用了类似词汇表的技术。如果您的大部分文档来自单一来源或相关的一组来源，您可以制作“当他们说 X，我们说 Y”的“翻译图”。但是，即使是这样的简化通常也需要母语读者在上下文中重新阅读翻译，因为语言几乎没有足够的规则来进行简单的替换而没有很多陷阱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T04:45:37.397

我可能会建议这本书，虽然已经过时了，但它试图提出一套标准的计算机术语，用于从德语翻译成英语并返回：

[Grosses IWT-Wörterbuch der Computertechnik und der Wirtschaftsinformatik。英语-德语。德语-英语](http://www.amazon.de/s?_encoding=UTF8&search-alias=books-de&field-author=Axel%20Griessmann)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-18T22:47:28.587

作为起点，The Open Group (www.opengroup.org) 似乎已将词汇表定义为他们在 The Open Group Architecture Framework (TOGAF) 上的工作的一部分，这似乎是我需要的那种东西。例如，这些文档编号和标题直接取自他们的网站：

*   **C148** TOGAF® 9.1 翻译词汇表：英语 – Hrvatski（克罗地亚语）
*   **C149** TOGAF® 9.1 翻译词汇表：英语 – 卡斯蒂利亚西班牙语
*   **C146** TOGAF® 9.1 翻译词汇表：英语 - 葡萄牙语（葡萄牙）
*   **C13H** TOGAF® 9.1 翻译词汇表：英语 – 斯洛伐克语

# php - 两个wordpress安装冲突

> ID：14221192
> 
> 赞同：0
> 
> 时间：2013-01-08T17:58:26.117
> 
> 标签：php, wordpress

我们现在正尝试在我们的网站上运行两个独立的 wordpress 博客并遇到一些问题。

我们在 www.example.com/updates/ 和 www.example.com/blogs/ 上安装了 word press

/blogs/ 是我们最初的安装并且一直运行良好。我在我们的 /updates/ 目录中重新安装了最新版本的 WP，安装似乎很顺利。

我们遇到的问题是一些可怕的重定向/会话混乱和其他我似乎无法控制的疯狂。因为我们正在尝试像 /blogs/ 一样获得最新安装，所以我经常登录它们以检查和复制设置等。

很多时候我会登录到 wp-admin 的博客，它突然间把我踢了出去，让我进入 /updates/ 的登录页面

同样，当我从非管理员端浏览网站时，如果我登录到 /updates/ 并查看 /blogs/，它会尝试将我重定向到 /updates/！

显然有一些设置或某些东西让这一切变得混乱，有人能指出我在哪里寻找问题的正确方向吗？

.htaccess 文件添加：//更新-----------------

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /updates/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /updates/index.php [L]
</IfModule> 
```

//对于博客---------------------

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /blogs/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /blogs/index.php [L]
</IfModule> 
```

# android - Android 主屏幕小部件大小（以像素为单位）

> ID：14221194
> 
> 赞同：1
> 
> 时间：2013-01-08T17:58:31.657
> 
> 标签：android, android-widget

这是在 Jelly Bean 上，因此用户可以调整小部件的大小。我的小部件中唯一的东西是图像视图。每当我通过远程视图设置到图像视图本身的小部件更新时，我都会创建一个位图。创建和绘制的位图会根据小部件的大小及其占用的空间而变化。

我遇到的问题是确定创建位图的大小，我理解必须使用像素。有没有办法从小部件提供者那里找到这个？以像素为单位的可用空间或凹陷都可以，因为我应该能够从一个到另一个计算出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:39:01.853

可以使用以下公式计算小部件的倾角大小：`70 × n − 30`其中`n`是宽度或高度的单元格数。

您可以根据屏幕密度将 dp 值转换为像素。

阅读更多：http: [//developer.android.com/guide/practices/ui_guidelines/widget_design.html](http://developer.android.com/guide/practices/ui_guidelines/widget_design.html)

# php - PHP Header() 重定向触发 IE9 Quirk 模式

> ID：14221195
> 
> 赞同：2
> 
> 时间：2013-01-08T17:58:33.250
> 
> 标签：php, internet-explorer, quirks-mode

如果我使用`header( 'Location: http://www.example.com/test.php' );`将用户发送到`test.php`. 我在 IE9 控制台中注意到了这一点：

```
HTML1113: Document mode restart from Quirks to IE9 Standards 
test.php

HTML1115: X-UA-Compatible META tag ('IE=9') ignored because document mode is already finalized. 
test.php 
```

这完全弄乱了我的代码`test.php`。

**问题**

我已经在使用`<!DOCTYPE html><html><head><meta http-equiv="X-UA-Compatible" content="IE=9">`，但我猜测使用 PHP header() 重定向会导致问题。

使用 PHP header() 重定向用户时，有没有办法阻止 IE9 进入怪癖模式？

**附加信息**

它进入了 Quirks 模式并返回到 Standard 模式，这似乎破坏了我在页面上的代码。

用户从 test.php 开始，单击验证码上的提交，将其 POST 到 verify.php -`<?php if (condition){ change some session variables; header(etc); exit();} ?>`开头是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:19:50.153

使用 php 来回显元刷新重定向而不是 php 标头似乎已经解决了这个问题。所有代码都有效，不会进入 quirks 模式并返回 IE9 模式，并且 meta 不会被忽略。

**附加信息**

我亲自与软件/网络程序员交谈，他不知道为什么会发生此错误。但是，他的观点是，如果 meta refresh 代替 php headers 起作用，那么使用它就没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:43:30.410

我想了更多，并有一个想法：

对于任何不以`<!DOCTYPE>`.

重定向之后仍然可以有进一步的`header(...)`输出，这将被视为一个页面。

所以......如果在发送之后有任何输出`header()`，并且该输出不是以有效的开头`<!DOCTYPE>`，IE9 可能会跳转到怪癖模式。

在 PHP 中，如果代码在`header()`调用后继续运行，并且后续代码中的某些内容会产生某种输出，则可能会发生这种情况。

如果这是正在发生的事情，并且您不需要代码在重定向后继续运行（这将是不寻常的），那么在应该修复它`die();`之后立即添加一个调用。`header()`

希望有帮助。

# html - HTML5 - AVC/MP3 视频可播放？

> ID：14221197
> 
> 赞同：1
> 
> 时间：2013-01-08T17:58:37.727
> 
> 标签：html, video

我有一个视频文件（带有 avc+mp3 的 avi）。是否可以通过 HTML5 视频标签播放？

我已经在 Internet Explorer 9 中对其进行了测试，但它不起作用！是因为不支持音频编解码器 mp3 还是“视频编解码器配置文件“HighL3.0”？

![视频信息](../Images/71f6c6e38a667e6a01fa1303966cdf00.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:14:55.773

编辑以纠正误解

我建议您阅读有关正在进行的编解码器大战的信息，或[查看此表](http://en.wikipedia.org/wiki/HTML5_video#Browser_support)。基本上，一些浏览器只接受带有 MP4 容器的视频、H.264 编码的视频和 AAC 编码的音频（低复杂度配置文件）；一些浏览器只接受带有 WebM 容器、VP8 编码的视频和 ogg-vorbis 编码的音频的视频。

MP4/H.264 似乎正在赢得这场战争，但目前您需要两者来获得完整的浏览器支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:14:47.447

[支持](http://caniuse.com/#search=video) `<video>`使用 WebM、MP4/H.264 和 OGG 视频格式的现代浏览器。因此，您不能将 AVI 用于 HTML5 视频。没有所有浏览器都支持的唯一格式。唯一的解决方案是将文件转换为支持的格式并`<video>`像这样使用：

```
<video width="320" height="240" controls>
  <source src="movie.mp4" type="video/mp4">   <!-- IE, Chrome, Safari, Android -->
  <source src="movie.ogg" type="video/ogg">   <!-- Firefox, Chrome, Opera -->
  <source src="movie.webm" type="video/webm"> <!-- Firefox, Chrome, Opera, Android -->
  Your browser does not support the video tag.
</video> 
```

# c++ - 设置通用返回类型

> ID：14221201
> 
> 赞同：0
> 
> 时间：2013-01-08T17:58:54.667
> 
> 标签：c++, c++11

我有一个对我很有效的功能：

```
template <typename __container, typename __callback = std::function <
    void (typename __container::value_type, typename __container::value_type)>
>
int reduce(__container &&container, __callback &&callback)
{
    auto current = container.begin();

    for (auto value : container)
        *current = callback(*current, value);

    return *current;
};

int result = functional::reduce(vector, [](const int current, const int next) -> int {
    return current + next;
});

std::cout << result; // 10 
```

现在，我要统一一个：

```
template <typename __container, typename __callback = std::function <
    void (typename __container::value_type, typename __container::value_type)>
>
auto reduce(__container &&container, __callback &&callback) ->
 decltype(__container::value_type); 
```

但是我收到以下错误：

```
reduce.cpp:61:9: error: no matching function for call to 'reduce'
int i = reduce(vector, [](const int current, const int next) -> int {
        ^~~~~~~~~~~~~~~~~~
reduce.hpp:69:7: note: candidate template ignored: substitution failure [with __container = std::__1::list<int, std::__1::allocator<int>> &, __callback = <lambda at
      nott.cpp:61:36>]
        auto reduce(__container &&container, __callback &&callback) -> decltype(__container::value_type)
             ^
1 error generated.
make: *** [build] Error 1 
```

如何设置通用返回类型？

**更新：**

```
template <typename __container, typename __callback>
auto reducef(const __container& input, __callback callback) ->
decltype(callback(std::declval<typename __container::value_type>(), std::declval<typename __container::value_type>()))
{
    decltype(
        callback(
            std::declval<typename __container::value_type>(),
            std::declval<typename __container::value_type>()
        )
    ) result{};

    return std::accumulate(input.begin(), input.end(), result, callback);
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T18:09:19.357

这个签名是错误的：

```
auto reduce(__container &&container, __callback &&callback) ->
 decltype(__container::value_type); 
```

`value_type`是一个类型，你 decltype 它。这就像`decltype(int)`. 但是，`__container::value_type`也不起作用，因为编译器不知道这`value_type`是一种类型。你必须明确地使用`typename`：

```
auto reduce(__container &&container, __callback &&callback) ->
 typename __container::value_type; 
```

还有一些可以改进的地方：修改编译器的前端元素以减少它。我想你想做这样的事情：

```
auto current = *container.begin(); // added *

for (auto value : container)
    current = callback(*current, value); // removed *

return current; // removed * 
```

还有另一个错误：第一个值减少了两次。

```
assert(!container.empty());
auto current = *container.begin();

for (auto it=container.begin()+1; it!=container.end(); ++it)
    current = callback(current, *it);

return current; 
```

进一步改进：使用迭代器代替范围：

```
template <typename Iter, typename Callback>
T reduce(Iter start, Iter end, Callback&& F)
{
    assert(start != end);
    auto current = *start;
    while (++start != end)
      current = callback(current, *it);
    return *current;
}; 
```

下一个问题：为什么限制不接受空范围？为此使用初始值。

```
template <typename Iter, typename T, typename Callback>
T reduce(Iter start, Iter end, T init, Callback&& F)
{
    while (start != end)
      init = callback(init, *it++);
    return init;
}; 
```

而且，令人惊讶的是，这正是 的定义`std::accumulate`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T18:18:17.373

正如其他人所指出的，您不需要`decltype`. 你也不需要`auto`. 保持代码与您的代码接近（因为风格不是手头的问题），这是一个工作版本：

```
#include <iostream>
#include <vector>

template <typename Container, typename Callback>
typename Container::value_type reduce(Container &container, Callback &&cb) {
    auto current = container.begin();

    for (auto value : container)
        *current = cb(*current, value);

    return *current;
}

int main() {
    std::vector<int> v = {1, 2, 3};

    int result = reduce(v, [](const int current, const int next) -> int {
         return current + next;
    }); 

    std::cout << "result = " << result << std::endl;
} 
```

# android - 通过代码定义 XML 的视图

> ID：14221205
> 
> 赞同：0
> 
> 时间：2013-01-08T17:59:14.347
> 
> 标签：android, xml, layout

我有一个类似于活动框架的 XML 文件。我想设置我在 XML 中添加的视图，但是当我尝试它时没有显示任何内容。

```
<View
    android:id="@+id/marco_container"
    style="@style/wrapFull"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

这是我的活动代码：

```
setContentView(R.layout.marco);
LinearLayout li = (LinearLayout) findViewById(R.id.marco_container);
View view = View.inflate(getApplicationContext(), R.layout.prueba, null);
li.addView(view); 
```

如何将视图添加到 XML？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T18:05:58.067

您必须使用`LayoutInflater`. 就像是：

```
setContentView(R.layout.marco);
LinearLayout li = (LinearLayout) findViewById(R.id.marco_container);
View view = getLayoutInflater().inflate(R.layout.prueba, li, false);
li.addView(view); 
```

# python - 使用文件中的文本

> ID：14221215
> 
> 赞同：0
> 
> 时间：2013-01-08T17:59:59.650
> 
> 标签：python

当我想从文件中提取一些标签时遇到问题。我说的是 2000 个标签，我想从文件中使用它们并给它们一些尺寸特征。

```
with open("filename") as f:
    content = f.readlines()

nsize= { "Mary": 1, "John": 1, "Jack": 1, "Ted": 5 } 
```

这是 4 个标签的示例。我在 2000 年都需要它。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T18:05:23.367

使用 dict 理解：

```
with open("filename") as f:
    nsize = {el.strip(): len(el.strip()) for el in f} 
```

这会将 中的每一行`f`，`strips()`去掉空格，将其转换为键，并将标签的长度作为值。

如果您打算*计算*它们，请使用[`collection.Counter`](http://docs.python.org/2/library/collections.html#collections.Counter)：

```
from collections import Counter

with open("filename") as f:
    nsize = Counter(el.strip() for el in f) 
```

这会从文件中获取每个标签（再次`strip()`删除额外的空格），并且`Counter`dict 将为您提供文件中每个标签的计数（因此，如果标签`foo`出现两次，`nsize['foo']`则为 2）。

# javascript - Javascript 弹出窗口 打开 SHOW 工具栏并在 Chrome 中编辑 URL

> ID：14221216
> 
> 赞同：3
> 
> 时间：2013-01-08T18:00:04.837
> 
> 标签：javascript, google-chrome, toolbar, window.open

我正在尝试创建一个显示浏览器工具栏并允许像普通浏览器窗口一样编辑 URL 的弹出窗口。这是用于自定义 CMS 后端的链接，以使用户能够查看移动格式的网站。我知道 window.open() 的默认行为是工具栏 = 是，位置 = 是和菜单栏 = 是，但是当使用 Chrome 时，我得到一个弹出窗口有一个无法编辑的 URL 字段并且没有无论我使用什么设置，后退、前进、重新加载按钮。在 Firefox 和 Safari 中运行良好。

这是我正在使用的代码：

```
<script>
function popupwindow(url, title, w, h) {
  var left = (screen.width/2)-(w/2);
  var top = (screen.height/2)-(h/2);
  return window.open(url, title, 'toolbar=yes, location=yes, directories=no, status=no, menubar=yes, scrollbars=yes, resizable=no, copyhistory=no, width='+w+', height='+h+', top='+top+', left='+left);
} 
</script>
<a href="/?format=mobile" onclick="popupwindow('/?format=mobile', 'Mobile App', 336, 480); return false;">
    Launch App
</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:23:06.710

`window.open`尽管您没有添加任何参数 ( )，但Chrome 在使用时仅支持一小组窗口功能，`resizable=yes,scrollbars=yes,toolbar=yes, menubar=no,location=no,directories=no, status=yes`它总是忽略这些参数。

# flash - YouTube 视频未加载到 AS2 Flash

> ID：14221217
> 
> 赞同：0
> 
> 时间：2013-01-08T18:00:06.333
> 
> 标签：flash, youtube, actionscript-2

我正在尝试制作一个 Flash 电影，它会在其自身中加载一个 Flash 视频。这是我正在使用的代码，它一直在工作，但自从更改视频 URL 后，它不再加载。

```
this.createEmptyMovieClip("youTube_mc", this.getNextHighestDepth());
this.youTube_mc.loadMovie("https://www.youtube.com/v/22RBuZJ6J7k?version=3&autoplay=1"); 
```

有人可以提供任何帮助吗？这让我有些恼火。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T05:50:43.567

您可以通过使用 HTML 嵌入 Youtube 视频并将其加载到文本框的 HTMLText 中来使其工作。当我无法让它工作时，我一直这样做 0:) 这也是我从 URLS 导入图像的方式哈哈！

```
myTextObject.htmlText ="/*YouTube embed code here (iFrame may not work.. try their old embed code if you can find it online)*/"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T17:06:24.640

在 AS2 中使用适用于我的播放器版本 2，默认版本不起作用，因此需要 "?version=2" 部分

```
 box.loadMovie("http://youtube.googleapis.com/v/VIDEO_ID?version=2");
    or
    box.loadMovie("http://www.youtube.com/v/VIDEO_ID?version=2"); 
```

只需在上述命令中输入 VIDEO_ID 也检查一下 [https://developers.google.com/youtube/flash_api_reference_as2](https://developers.google.com/youtube/flash_api_reference_as2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T22:47:46.310

youtube 播放器是基于 AS3 的，这是您的问题。我建议转移到 AS3 并检查他们的 API。

# ios - “addChildViewController:”在 iPad 上崩溃，但在 iPhone 上不崩溃

> ID：14221219
> 
> 赞同：1
> 
> 时间：2013-01-08T18:00:12.493
> 
> 标签：ios, ipad, crash

我有一个 iPhone 应用程序，在手机上运行时运行良好，但在 iPad 上以兼容模式运行时在启动时崩溃。我在我的项目中使用 iAd，特别是我正在使用

> Bannerviewcontroller.h 和 .m

从 iAd 套件以编程方式呈现横幅。

在我的 App Delegate 中，我包装了一些视图控制器，如下所示。

```
 self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
UIViewController *viewController1, *viewController2, *catVC3, *otherVC4;
UINavigationController *navController, *dognav, *catnav, *othernav;
    viewController1 = [[FirstViewController alloc] initWithNibName:@"FirstViewController_iPhone" bundle:nil];
    viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController_iPhone" bundle:nil];
    catVC3 = [[catViewController alloc]initWithNibName:@"catViewController_iPhone" bundle:nil];
    otherVC4 = [[otherViewController alloc]initWithNibName:@"otherViewController_iPhone" bundle:nil];

    navController = [[UINavigationController alloc]initWithRootViewController:viewController1];
    dognav = [[UINavigationController alloc]initWithRootViewController:viewController2];
    catnav = [[UINavigationController alloc]initWithRootViewController:catVC3];
    othernav = [[UINavigationController alloc]initWithRootViewController:otherVC4];

_tabBarController = [[UITabBarController alloc] init];
 NSArray *controllers = [NSArray arrayWithObjects:navController,dognav,catnav,othernav,nil];
_tabBarController.viewControllers = controllers;

//wrap tabbar controller in adbanner controller
_bannerViewController = [[BannerViewController alloc] initWithContentViewController:_tabBarController];
self.window.rootViewController = _bannerViewController;
[self.window makeKeyAndVisible];
return YES; 
```

然后崩溃发生在我的

> Bannerviewcontroller.m

```
 #import "BannerViewController.h"

@implementation BannerViewController
{
    ADBannerView *_bannerView;
    UIViewController *_contentController;
}

- (id)initWithContentViewController:(UIViewController *)contentController
{
    self = [super init];
    if (self != nil) {
        _bannerView = [[ADBannerView alloc] init];
        _bannerView.delegate = self;
        _contentController = contentController;
    }
    return self;
}

- (void)loadView
{
    UIView *contentView = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    [contentView addSubview:_bannerView];
    [self addChildViewController:_contentController];
    [contentView addSubview:_contentController.view];
    [_contentController didMoveToParentViewController:self];
    self.view = contentView;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return [_contentController shouldAutorotateToInterfaceOrientation:interfaceOrientation];
}

- (void)viewDidLayoutSubviews
{
    if (UIInterfaceOrientationIsPortrait(self.interfaceOrientation)) {
        _bannerView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierPortrait;
    } else {
        _bannerView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierLandscape;
    }
    CGRect contentFrame = self.view.bounds;
    CGRect bannerFrame = _bannerView.frame;
    if (_bannerView.bannerLoaded) {
        contentFrame.size.height -= _bannerView.frame.size.height;
        contentFrame.origin.y = _bannerView.frame.size.height;
        bannerFrame.origin.y = contentFrame.size.height - contentFrame.size.height;
    } else {
        bannerFrame.origin.y = contentFrame.size.height;
    }
    _contentController.view.frame = contentFrame;
    _bannerView.frame = bannerFrame;
}

- (void)bannerViewDidLoadAd:(ADBannerView *)banner
{
    [UIView animateWithDuration:0.35 animations:^{
        [self.view setNeedsLayout];
        [self.view layoutIfNeeded];
    }];
}

- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error
{
    [UIView animateWithDuration:0.35 animations:^{
        [self.view setNeedsLayout];
        [self.view layoutIfNeeded];
    }];
}

@end 
```

并抛出此异常： *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“*** -[__NSArrayM insertObject:atIndex:]: object cannot be nil”

这里发生了什么？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T22:57:53.663

错误告诉，`_contentController`没有初始化。你在哪里/如何分配它？我在 AppDelegate 代码中看不到它。

# javascript - 通过 text() 使用 jquery 设置元素的内容会复制文本

> ID：14221221
> 
> 赞同：0
> 
> 时间：2013-01-08T18:00:22.287
> 
> 标签：javascript, jquery, text, slideshow

我有一个显示投资组合的单页网站。[基本上它由一个图像列表组成，这些图像使用sudoslider](http://webbies.dk/SudoSlider/)显示为幻灯片

加载新幻灯片（在本例中为图像）后，应更新图像的描述。

出于某种原因，描述会显示两次，正如您[在通过 wordpress 创建的这个版本中](http://haendehoch.nl/wp)看到的那样。奇怪的是，我有[这个网站的静态版本，](http://haendehoch.nl/test)似乎不会产生这个问题，而 html/javascript/css 结构*完全相同*（只要我没有忽略某些东西）。

相关代码：

html列表：

```
<section id="portfolio">
    <ul id="portfolio-ontwerpen" class="noscript">
        <li>
            <figure><img width="800" height="569" src="http://haendehoch.nl/wp/wp-content/uploads/2013/01/klinch1.jpg" class="attachment-large wp-post-image" alt="klinch1" /></figure>
            <figcaption>Klinch poster</figcaption>
        </li>
        <li>
            <figure><img width="800" height="565" src="http://haendehoch.nl/wp/wp-content/uploads/2013/01/hh_grid.jpg" class="attachment-large wp-post-image" alt="hh_grid" /></figure>
            <figcaption>Grid</figcaption>
        </li>
    </ul>
</section> 
```

javascript:

```
var sudoSlider = $("#portfolio").sudoSlider({
    afterAniFunc:   $("aside figcaption").text($(this).find('figcaption').text()); },
}); 
```

$(this) 在这种情况下是指*当前*幻灯片（当前列表项）

afterAniFunc 的 sudoslider 描述（基本上是在下一张幻灯片动画完成后执行的函数）

> 在AniFunc 之后：假。与之前的 AniFunc 相同。它只是在动画（仍然是任何动画）完成后运行。如果使用淡入淡出，beforeAniFunc 不会执行多次，但如果使用 Continuous，仍然可以执行多次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:58:09.820

我不确定它是如何/为什么会发生的，但您似乎正在使用语句选择多个元素：

```
$(this).find('figcaption').text() 
```

只选择第一个元素为我提供了正确的结果：

```
$(this).find('figcaption').first().text() 
```

# javascript - 有什么方法可以禁用javascript中的突出显示？

> ID：14221222
> 
> 赞同：0
> 
> 时间：2013-01-08T18:00:30.087
> 
> 标签：javascript, image

> **可能重复：**
> [在 jQuery 中双击禁用文本突出显示](https://stackoverflow.com/questions/2132172/disable-text-highlighting-on-double-click-in-jquery)

我在这里有一个程序，当您单击时，它会发射炮塔。但是每次双击它都会突出显示所有图片。有什么办法可以解决吗？谢谢！！

![这是它的样子：](../Images/2a666eea75ffe456191988d75c84796e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T18:03:27.450

您可以使用 css 禁用用户选择：

```
-webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none; 
```

# ruby - 扩展 Faker gem 本地未初始化常量 Faker::xxx

> ID：14221223
> 
> 赞同：2
> 
> 时间：2013-01-08T18:00:35.217
> 
> 标签：ruby, ruby-on-rails-3, faker

我想扩展rails的faker gem以生成其他随机日期（在我的情况下是计算机游戏名称）

```
#lib/extended_faker.rb
require 'faker'
require 'extended_faker/game'

#lib/extended_faker/game.rb
Module Faker
    class Game < Faker::Base
        class << self
            def name
                fetch('game.name')
            end
        end
    end
end

#config/locals/faker_en.yml
en:
  faker:
    game:
      name: ["a", "b", "c"]

#config/application.rb
...
config.autoload_paths += Dir["#{config.root}/lib/**/"]
... 
```

然后当我在 Rails 控制台中运行它时，我得到以下信息

```
Loading development environment (Rails 3.2.9)
1.9.3p194 :001 > Faker::Game.name
LoadError: Expected /home/enermis/School/Projects/IG/test/lib/extended_faker/game.rb to define Game
    from /home/enermis/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:503:in `load_missing_constant'
    from /home/enermis/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:192:in `block in const_missing'
    from /home/enermis/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:190:in `each'
    from /home/enermis/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:190:in `const_missing'
    from /home/enermis/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:514:in `load_missing_constant'
    from /home/enermis/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:192:in `block in const_missing'
    from /home/enermis/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:190:in `each'
    from /home/enermis/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:190:in `const_missing'
    from (irb):1
    from /home/enermis/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.9/lib/rails/commands/console.rb:47:in `start'
    from /home/enermis/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.9/lib/rails/commands/console.rb:8:in `start'
    from /home/enermis/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.9/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

当我将 lib/extended_faker/game.rb 文件更改为此

```
require 'faker'
require 'extended_faker/game'
include 'extended_faker/item'
include 'extended_faker/team' 
```

我在控制台中出现奇怪的行为

```
Loading development environment (Rails 3.2.9)
1.9.3p194 :001 > Faker::Game.name
 => "b" 
1.9.3p194 :002 > Faker::Game.name
NameError: uninitialized constant Faker::Game
    from (irb):2
    from /home/enermis/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.9/lib/rails/commands/console.rb:47:in `start'
    from /home/enermis/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.9/lib/rails/commands/console.rb:8:in `start'
    from /home/enermis/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.9/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

我不明白的奇怪的事情是，我第一次运行生成器时，我得到了一个有效的结果，但第二次我得到了一个错误......

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:16:36.130

你应该把它放在
`lib/faker/game.rb`
lib 目录中，rails 约定是最外层的模块名称-> 是文件夹名称。然后实际的类/模块名称是文件名，下划线为驼峰式。
**另一个例子**

```
module Foo
  module Bar
    class BazParty
      def self.hello
        puts "hello"
      end
    end
  end
end 
```

会进去`lib/foo/bar/baz_party.rb`

# html - iframe 中的链接在父窗口中打开

> ID：14221226
> 
> 赞同：0
> 
> 时间：2013-01-08T18:00:47.677
> 
> 标签：html, forms, url, iframe, breakout

我正在使用 html 表单向特定 URL 提交信息，该 URL 在我的域中的一个网站页面上的 iframe 中加载。html 表单输入之一是在我提交表单时将发布在 iframed 页面中的 URL。但是当我点击链接（我在 html 表单中指定 URL 的那个）时，我需要它跳出 iframe，并加载到父窗口（iframe 当前所在的窗口）。这是我的表格，你可以看到“producturl”的输入......这就是我遇到麻烦的地方......

```
<form action="http://ww#.aitsafe.com/cf/add.cfm" method="post"> 
<input type="hidden" name="userid" value="#######">
<input type="hidden" name="nocart"> 
<input type="hidden" name="return" value="www.fruitfulfarm.net/cart_2.html"> 
<input type="hidden" name="producturl" value=<a href="www.fruitfulfarm.net" target="_top"</a>
<input type="hidden" name="product" value="Product">
<input type="hidden" name="price" value="49.95">
<input class="rounded" type="submit" name="Submit" value="Add To Cart">
</form> 
```

有人可以通过使用“producturl”语法中的某个目标/值代码向我展示一种让 URL 脱离 iframe 的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:40:36.760

我会使用一些 JavaScript。

```
this.top.location = "www.fruitfulfarm.net"; 
```

看看[css-tricks](http://css-tricks.com/snippets/javascript/break-out-of-iframe/)。

# sql-server - C#中的Entity Framework Code First映射浮点数能否在SQL Server中转换为小数

> ID：14221227
> 
> 赞同：5
> 
> 时间：2013-01-08T18:00:54.343
> 
> 标签：sql-server, entity-framework

是否可以强制 Entity Framework Code First 在 C# 实体中使用浮点数（或双精度数），并将它们映射到 SQL Server 中的小数？需要进行转换，并且从十进制到浮点或双精度可能会有精度损失，但假设由于特定域是可以避免的，EF 会让你这样做吗？

例如，我想拥有

```
public class House
{
    ...
    public float Width { get; set; }
} 
```

映射到

```
CREATE TABLE [dbo].[Houses] (
    ...
    [Width] [decimal](12, 4) NOT NULL
) 
```

这可以通过 EF 属性、Fluent API 或其他方式来完成吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T18:45:12.313

不，不可能创建这样的映射。`decimal`SQL Server 和`float`/或.NET 上的类型`double`不兼容。当您尝试像这样的映射时，这就是异常所说的

```
modelBuilder.Entity<House>()
    .Property(h => h.Width)
    .HasColumnType("decimal"); // Does not work ! 
```

不幸的是，EF 不支持不同原始类型之间的任何映射。您被迫在 .NET 中使用与 SQL Server 中的列类型兼容的类型。

一种可能（不是很好）的解决方法是在模型类中使用*两个*属性并仅将一个属性映射到数据库：

```
public class House
{
    // ...

    private decimal _width;
    public decimal Width // mapped to database column as decimal
    {
        get { return _width; }
        set { _width = value; }
    }

    [NotMapped] // <- not mapped to a database column
    public float WidthAsFloat
    {
        get { return (float)_width; }
        set { _width = (decimal)value; }
    }
} 
```

如果源编号不适合目标类型，则类型转换可能会引发异常，因此可能需要进行更复杂的转换。

# grails - 同一工作空间中的 Grails 不同版本项目

> ID：14221229
> 
> 赞同：1
> 
> 时间：2013-01-08T18:01:00.763
> 
> 标签：grails, sts-springsourcetoolsuite

我正在使用**STS**（Spring 源工具套件）。是否可以在同一工作空间中拥有不同版本的 Grails 项目。
当我尝试时，他们总是升级到更新版本的 Grails。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:08:50.263

只要两个版本的 grails 使用相同版本的 groovy，这当然是可能的（允许安装多个 grails，但一次只能安装一个 groovy）。

在您的项目 -> 属性 -> Grails 中，单击“启用项目特定设置”。并选择您需要的 grails 版本。

# javascript - 查找图像标签javascript的相对路径

> ID：14221231
> 
> 赞同：7
> 
> 时间：2013-01-08T18:01:24.367
> 
> 标签：javascript, html, css

我为此经历了很多问题，但找不到明确的答案。我有这样的图像标签

```
<img src="images/abc.jpg"/> 
```

但是当我调用侧javascript时，

```
var imgs = document.getElementsByTagName("img");
alert(imgs[0].src); 
```

它将 src 显示为“http://localhost/myProject/images/abc.jpg”但我只需要获取相对路径（“images/abc.jpg”）。来人帮帮我...

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-08T18:04:03.373

您可以尝试获取元素`src`属性值，而不是`src`属性：

```
imgs[0].getAttribute("src");  // "images/abc.jpg" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:04:54.240

您可以使用`document.location.href`分割出图像的相对路径。

# types - 在 F# 中，如何将类型名称作为函数参数传递？

> ID：14221233
> 
> 赞同：3
> 
> 时间：2013-01-08T18:01:33.953
> 
> 标签：types, parameters, f#

我想将类型名称（例如`int`，或`string`，甚至用户定义类型的名称）作为函数参数传递。目前我正在做以下事情：

```
type IntegerOrIntegerList =
    | Integer of int
    | IntegerList of int list

let f (n : int) (d : 'T) : IntegerOrIntegerList =
    match (box d) with
    | :? int as i -> Integer(n)
    | _ -> IntegerList([0 .. n]) 
```

但是`d`上面的存在是偶然的。表达上述逻辑的惯用 F# 方式是什么？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T18:24:59.533

您可以使用类型 arg：

```
let f<'T> (n : int) =
  if typeof<'T> = typeof<int> then Integer(n)
  else IntegerList([0 .. n]) 
```

# php - print_r 返回值不正确

> ID：14221236
> 
> 赞同：4
> 
> 时间：2013-01-08T18:01:39.963
> 
> 标签：php, debugging

我的`print_r`功能有点麻烦。毫无疑问，我在其操作中存在误解......基本上，我在一个类中有一个对象数组，如下所示：

```
public $fields = array(); 
```

像这样分配：

```
$oField = new Field();
/* property assignments to $oField omitted for brevity */
$this->fields[$i] = $oField; 
```

现在在初级课程中，我正在尝试捕获调试信息：

```
$this->debuginfo = print_r($this->fields, true); 
```

输出 的值时`$this->debuginfo`，它只是说“数组”——基本上不会爆炸数组。如果我做一个常规的`print_r($this->fields);`，它会给出预期的结果。

这是我第一次尝试使用`print_r`它来返回结果而不是输出到屏幕，所以我确信我只是遗漏了一些东西，但是在阅读 php 文档时，这*似乎*是它的实现方式。我错过了什么？

感谢您的帮助！

**更新：** `print_r($var, true)`确实像我写的那样正确地返回了“exploded”变量。感谢*dev-null*的评论，这给了我一些思考，让我找到了我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:37:49.253

尝试**var_export()**代替。var_export() 获取有关给定变量的结构化信息。

例子：

```
$this->debuginfo = var_export($this->fields, true); 
```

参考： http: [//php.net/manual/en/function.var-export.php](http://php.net/manual/en/function.var-export.php)

# javascript - img src 属性改变

> ID：14221241
> 
> 赞同：-1
> 
> 时间：2013-01-08T18:01:46.607
> 
> 标签：javascript, jquery

我有一张空白图片表，点击后我想更改。所以，我正在创建一个表：

```
table_string = "<center><table border=1>";
for( i = 0 ; i < 8 ; i++ )
{
    table_string += "<tr>";
    for( j = 0 ; j < 8 ; j++ )
    {
        table_string += "<td><img name=image"+i+"_"+j+" src=games/graphics/atoms/blank.jpg onclick='OnClick("+i+","+j+")'></td>";
    }
    table_string+="</tr>";
}
table_string+= "</table></center>";
$("#atoms_board").append(table_string); //appending the html code to atoms_board div, 
```

现在是我试图更改 src 属性的 OnClick 函数：

```
function OnClick( i, j )
{
    $('input[name=image"+i+"_"+j+"]').attr('src');
} 
```

我的问题是函数 OnClick 不会改变 img 的 src ;/. 我在这里看到了许多类似的问题，但在任何地方我都只找到了这个答案。任何帮助表示赞赏：}。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T18:06:28.317

请注意底部代码段中突出显示的语法。看看这都是一种颜色吗？您正在将逻辑编码到字符串中。这意味着你的字符串是这样的：

```
'input[name=image"+i+"_"+j+"]' 
```

而不是这个：

```
'input[name=image1_2]' 
```

尝试：

```
$("input[name=image"+i+"_"+j+"]").attr('src');
//^ big quote                  ^ big quote 
```

看看现在语法高亮中的变量是如何变黑的吗？这意味着它们不再被视为字符串的一部分。

如果您没有使用带有语法高亮功能的编辑器，我强烈建议您找到一个。他们帮助你找到这类问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T18:06:48.863

使用“this”传递对自身的引用。

```
onclick="OnClick(this)"

OnClick function(element) {
      alert(element.src)

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T18:07:38.517

您的代码中有一个问题。修改为

```
function OnClick( i, j )
{
    $('input[name=image'+i+'_'+j+']').attr('src');
} 
```

# jquery - 盒子阴影效果不适用于幻灯片

> ID：14221244
> 
> 赞同：0
> 
> 时间：2013-01-08T18:02:00.600
> 
> 标签：jquery, css, html, slider, slideshow

我有一个非常简单的滑块，我正在尝试在此链接[http://www.paulund.co.uk/creating-different-css3-box-shadows-effects](http://www.paulund.co.uk/creating-different-css3-box-shadows-effects)上为幻灯片中的所有图像实现#5。我运气不太好！我根本没有什么可以出现的。感谢您提前提供任何帮助。

幻灯片CSS：

```
.blueberry { margin: 0 auto; padding-bottom:25px; width:auto;}

.blueberry .slides {
    display: block;
    position: relative;
    overflow: hidden;
}

.blueberry .slides li {
    position: absolute;
    top: 0;
    left: 0;
    overflow: hidden;
}

.blueberry .slides li img {
    display: block;
    width: 100%;
    max-width: none;
}

.blueberry .slides li.active { display: block; position: relative; }
.blueberry .crop li img { width: auto; }

.blueberry .pager {
    height: 40px;
    text-align: center;
}

.blueberry .pager li { display: inline-block; }
.blueberry .pager li a,
.blueberry .pager li a span {
    display: block;
    height: 4px;
    width: 4px;
}

.blueberry .pager li a {
    padding: 18px 8px;
    -webkit-border-radius: 6px;
    -moz-border-radius: 6px;
    -o-border-radius: 6px;
    -ms-border-radius: 6px;
    -khtml-border-radius: 6px;
    border-radius: 6px;

}

.blueberry .pager li a span {
    overflow: hidden;
    background: #c0c0c0;
    text-indent: -9999px;
    -webkit-border-radius: 2px;
    -moz-border-radius: 2px;
    -o-border-radius: 2px;
    -ms-border-radius: 2px;
    -khtml-border-radius: 2px;
    border-radius: 2px;

}

.blueberry .pager li.active a span { 
background: #404040; 

}

.shadow:before, .shadow:after
{
  z-index: -1;
  position: absolute;
  content: "";
  bottom: 25px;
  left: -25px;
  width: 50%;
  top: 80%;
  max-width:400px;
  background: #777;
  -webkit-box-shadow: 0 35px 20px #777;
  -moz-box-shadow: 0 35px 20px #777;
  box-shadow: 0 35px 20px #777;
  -webkit-transform: rotate(-8deg);
  -moz-transform: rotate(-8deg);
  -o-transform: rotate(-8deg);
  -ms-transform: rotate(-8deg);
  transform: rotate(-8deg);
}

.shadow:after {

  -webkit-transform: rotate(8deg);
  -moz-transform: rotate(8deg);
  -o-transform: rotate(8deg);
  -ms-transform: rotate(8deg);
  transform: rotate(8deg);
  right: 10px;
  left: auto;
} 
```

HTML：

```
<div class="blueberry">
  <ul class="slides shadow">
    <li><img src="images/avatar.jpg" /></li>
    <li><img src="images/ironman.jpg" /></li>
    <li><img src="images/tron.jpg" /></li>
    <li><img src="images/greenhornet.jpg" /></li>
  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:28:38.473

在此处尝试[演示](http://jsfiddle.net/CWTHD/2/)

在这里，我修改了类的 CSS`box`

```
.box {
    width:70%;
    height:200px;
    background:#FFF;
    margin:40px auto;
    background-image:url('http://unleashthefanboy.s3.amazonaws.com/wp-content/uploads/2012/05/MARK2.jpg');
    background-color:#cccccc;
    background-size:100%; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:19:08.967

您需要将“活动”类应用到其中一个 li 才能看到任何内容。然后返回该站点并查看阴影效果的之前/之后代码。目前它不在您的 CSS 中的任何位置

好的，酷。查看 Wolf 的 jsfiddle，注意阴影被应用于 h3，而不是图像或 li 本身。如果你把它应用到 li 你会得到一些非常时髦的怪异。

# android - ArrayAdapter - 资源$未找到

> ID：14221253
> 
> 赞同：0
> 
> 时间：2013-01-08T18:02:40.167
> 
> 标签：android, android-layout, android-arrayadapter, android-adapterview

我有一个填充 4 个文本字段的数组适配器。在 getView 方法中，当它尝试使用值填充文本字段时。我收到错误 android.content.res.Resources$NotFoundException：字符串资源 ID #0x11。请您指导一下需要更正的地方。

以下是 ArrayAdapter 代码

```
public class AdapterTicketList extends ArrayAdapter<POJO_Ticket> {
Context context;
ArrayList<POJO_Ticket> ticketArray;
LayoutInflater vi;

public AdapterTicketList(Context context , ArrayList<POJO_Ticket> ticketArray) {    
    super(context, 0, ticketArray );    
    this.ticketArray = new ArrayList<POJO_Ticket>();    
    this.ticketArray.addAll(ticketArray);  
    this.context =context;

    vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);  
    }  

private class ViewHolder {
    TextView tvTicketID;  
    TextView tvCreationHour;  
    TextView tvTableNumber;     
    TextView tvAmount;    
    } 

public View getView(final int position, View convertView, ViewGroup parent) {      
    ViewHolder holder;    
    holder = new ViewHolder();
    if (convertView == null) {                   
        convertView = vi.inflate(R.layout.rowticket,  null);  
        holder.tvTicketID = (TextView) convertView.findViewById(R.id.tvTicketID); 
        holder.tvCreationHour = (TextView) convertView.findViewById(R.id.tvCreationHour); 
        holder.tvTableNumber = (TextView) convertView.findViewById(R.id.tvTableNumber); 
        holder.tvAmount = (TextView) convertView.findViewById(R.id.tvQuantity);  
        convertView.setTag(holder); 
    } else {
        holder = (ViewHolder) convertView.getTag();  
    }       
    Ticket ticket =ticketArray.get(position).getTicketObject();

    Log.i("AdapterTicketList"," ticket id : " + ticket.getId()); 
    holder.tvTicketID.setText(String.valueOf(ticket.getId())) ;  
    holder.tvCreationHour.setText(String.valueOf(ticket.getCreationHour())) ;  
    holder.tvTableNumber.setText(String.valueOf(ticket.getTableNumber())) ;   
    holder.tvAmount.setText( String.valueOf((ticket.getTotalAmount())))  ; 
    return convertView; 
    } 
```

}

```
01-09 00:11:15.337: E/AndroidRuntime(10204): FATAL EXCEPTION: main
01-09 00:11:15.337: E/AndroidRuntime(10204): java.lang.NullPointerException
01-09 00:11:15.337: E/AndroidRuntime(10204): at com.example.restaurent.AdapterTicketList.getView(AdapterTicketList.java:59)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.widget.AbsListView.obtainView(AbsListView.java:2040)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.widget.ListView.makeAndAddView(ListView.java:1772)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.widget.ListView.fillDown(ListView.java:672)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.widget.ListView.fillFromTop(ListView.java:732)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.widget.ListView.layoutChildren(ListView.java:1625)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.widget.AbsListView.onLayout(AbsListView.java:1870)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.view.View.layout(View.java:11418)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.view.ViewGroup.layout(ViewGroup.java:4328)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1652)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.widget.LinearLayout.layoutHorizontal(LinearLayout.java:1641)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.widget.LinearLayout.onLayout(LinearLayout.java:1417)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.view.View.layout(View.java:11418)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.view.ViewGroup.layout(ViewGroup.java:4328)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1652)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1510)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.widget.LinearLayout.onLayout(LinearLayout.java:1415)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.view.View.layout(View.java:11418)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.view.ViewGroup.layout(ViewGroup.java:4328)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.widget.FrameLayout.onLayout(FrameLayout.java:443)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.view.View.layout(View.java:11418)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.view.ViewGroup.layout(ViewGroup.java:4328)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1652)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1510)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.widget.LinearLayout.onLayout(LinearLayout.java:1415)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.view.View.layout(View.java:11418)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.view.ViewGroup.layout(ViewGroup.java:4328)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.widget.FrameLayout.onLayout(FrameLayout.java:443)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.view.View.layout(View.java:11418)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.view.ViewGroup.layout(ViewGroup.java:4328)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1489)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.os.Handler.dispatchMessage(Handler.java:99)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.os.Looper.loop(Looper.java:137)
01-09 00:11:15.337: E/AndroidRuntime(10204): at android.app.ActivityThread.main(ActivityThread.java:4441)
01-09 00:11:15.337: E/AndroidRuntime(10204): at java.lang.reflect.Method.invokeNative(Native Method)
01-09 00:11:15.337: E/AndroidRuntime(10204): at java.lang.reflect.Method.invoke(Method.java:511)
01-09 00:11:15.337: E/AndroidRuntime(10204): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-09 00:11:15.337: E/AndroidRuntime(10204): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-09 00:11:15.337: E/AndroidRuntime(10204): at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:08:06.613

此行是正确的，因为您将数值转换为字符串：

```
holder.tvAmount.setText(Double.toString(ticketArray.get(position).getTicketObject().getTotalAmount())) ; 
```

这些有潜在的问题，因为它们似乎获取数值：

```
holder.tvTicketID.setText(ticketArray.get(position).getTicketObject().getId()) ;  
holder.tvCreationHour.setText(ticketArray.get(position).getTicketObject().getCreationHour()) ;  
holder.tvTableNumber.setText(ticketArray.get(position).getTicketObject().getTableNumber()) ; 
```

**解决方案：**您*必须*将字符串或适当的`R.string.xxx`整数传递给`setText()`.

所以使用：

```
holder.tvTicketID.setText(String.valueOf(ticketArray.get(position).getTicketObject().getId()));
// etc 
```

（您还应该考虑保存`ticketArray.get(position).getTicketObject()`在局部变量中，而不是重复获取它。）

# php - 在 PHP 中解析 Wordpress XML 文件

> ID：14221254
> 
> 赞同：1
> 
> 时间：2013-01-08T18:02:43.457
> 
> 标签：php, xml, wordpress

我正在将大型 Wordpress 页面迁移到自定义 CMS。我需要从 Wordpress 导出的大 (20MB+) XML 文件中提取信息。

1.  我对 PHP 下的 XML 没有任何经验，也不知道如何开始读取文件。

2.  Wordpress 文件包含如下结构：

    ```
    <excerpt:encoded><![CDATA[Encoded text here]]></excerpt:encoded> 
    ```

而且我不知道如何在 PHP 中处理这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T18:05:09.660

你可能会用 simplexml 做得很好：

```
$xml = simplexml_load_file('big_xml_file.xml');
foreach ($xml->element as $el) {
    echo $el->name;
} 
```

有关更多信息，请参见[php.net](http://php.net/simplexml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T18:06:11.400

> 我对PHP下的XML没有任何经验

看看[`simplexml_load_file()`](http://php.net/manual/en/function.simplexml-load-file.php)或[`DomDocument`](http://php.net/manual/en/class.domdocument.php)。

> `<excerpt:encoded><![CDATA[Encoded text here]]></excerpt:encoded>`

这对于 XML 解析器来说应该不是问题。但是，您会遇到 WordPress 导出的内容的问题。例如，它可以包含[WordPress 短代码](http://codex.wordpress.org/Shortcode_API)，它们将以原始格式出现，而不是展开。

### 更好的方法

确定您要迁移到的内容是否支持从 WordPress 功能导出。许多其他系统都可以 - Drupal、Joomla、Octopress 等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T18:23:07.910

不幸的是，您的 XML 示例没有通过。

PHP5 附带了两个用于处理 XML 的扩展[——DOM](http://php.net/manual/en/intro.dom.php)和“ [SimpleXML](http://php.net/manual/en/intro.simplexml.php) ”。
一般来说，我建议首先研究 SimpleXML，因为它是两者中更易于访问的库。

对于初学者，使用“ [simplexml_load_file()](http://php.net/manual/en/function.simplexml-load-file.php) ”将 XML 文件读入对象以进行进一步处理。
您还应该查看“ [php.net 上的 SimpleXML 基本示例页面](http://php.net/manual/en/simplexml.examples-basic.php)”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-14T01:10:49.717

尽管亚当是绝对正确的，但他的回答需要更多细节。这是一个简单的脚本，应该可以帮助您。

```
$xmlfile  = simplexml_load_file('yourxmlfile.xml');
foreach ($xmlfile->channel->item as $item) {
    var_dump($item->xpath('title'));
    var_dump($item->xpath('wp:post_type'));
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-04-09T05:16:36.470

simplexml_load_file() 是创建对象的方法，但您还需要使用 xpath，因为 WordPress 使用名称空间。如果我没记错的话，SimpleXML 不能很好地处理名称空间，或者根本不能处理。

`$xml = simplexml_load_file( $file ); $xml->xpath('/rss/channel/wp:category');`

我建议查看 WordPress 用于导入文件的内容。

[https://github.com/WordPress/WordPress/blob/master/wp-admin/includes/class-wp-importer.php](https://github.com/WordPress/WordPress/blob/master/wp-admin/includes/class-wp-importer.php)

# ios - NSUserDefaults 中的新键/值

> ID：14221255
> 
> 赞同：0
> 
> 时间：2013-01-08T18:02:57.360
> 
> 标签：ios, nsuserdefaults

我有一个简单的问题，我无法找到答案。

我可以通过

```
[userdefaults setBool:YES forKey:@"onSwitch"] 
```

还是必须先在 defaults.plist 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:06:33.467

是的，您可以向用户默认值添加新的键/值。

如果存在，它将覆盖它，否则将创建一个新的键/值对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:04:32.223

如果该值不存在，它将创建并设置它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-08T18:19:56.323

是的你可以。:)

在用户默认值中添加任何键/值时，请确保添加此代码：

```
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

# java - java性能问题-正则表达式VS内部String方法

> ID：14221257
> 
> 赞同：0
> 
> 时间：2013-01-08T18:03:04.347
> 
> 标签：java, android, regex

我遇到以下问题：我的应用程序中某处有一些字符串要检查 - 检查该字符串是否包含不同于`" "`（空白）的字符`/n`，`/r` 例如：

*   `" g"` - 包含
*   `" /n "` - 不包含
*   `" "` - 不包含

我想在 reg 表达式中执行此操作，但我不想使用通用模式`.*[a-zA-Z0-9]+.* .`相反，我想要类似`.*[!" ""/n"/r"]`. （每个不同于`" "` `"/r"`and的字符`"n"`）。

我的问题是

1.  我不知道这种模式是否有效（以上不起作用）
2.  我不确定它是否会比使用常规字符串方法快得多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T18:19:04.740

首先，您的意思是`\n`and `\r`，在 Java 中，这意味着使用`\\n`and转义反斜杠`\\r`。

其次，如果您只是想捕捉任何非空白，只需使用模式`\\S*`或`[^\\s]`. `\S`是非空白，或者`\s`是空白，`[^<charset>]`意思是“匹配任何不是其中之一的东西”。

第三，如果这是重复检查，请确保只编译一次正则表达式，然后多次使用它。

第四，遵循通常的分析策略。首先，这是否在您的应用程序中的关键地带？如果是这样，那么对自己进行基准测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T18:12:39.663

这正是你想要的东西，但是（就像我上面所说的那样），它会更快地遍历字符：

```
Pattern NOT_WHITESPACE_DETECTOR = Pattern.compile("[^ \\n\\r]");
Matcher m = NOT_WHITESPACE_DETECTOR.matcher("  \n       \r      bla        ");
if (m.find()) {
   //string contains a non-white-space
} 
```

另请注意，java中空格的定义比您指定的要宽得多，即使这样，unicode中也有java无法检测到的空格（但是有些库可以）

# packagemaker - PackageMaker 命令行选项需要重新启动

> ID：14221259
> 
> 赞同：0
> 
> 时间：2013-01-08T18:03:20.107
> 
> 标签：packagemaker

我正在创建一个构建脚本来自动化 PackageMaker 以安装 kext，但是我看不到需要重新启动的命令行选项。有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:44:41.663

您需要在包的分发文件中提供以下属性。

```
<pkg-ref ...... onConclusion="RequireRestart"> ...... </pkg-ref> 
```

有关该属性的更多详细信息：onConclusion

可选属性。指定安装完成后要执行的操作。值，从最低到最高：

```
 None (default), RequireLogout, RequireRestart, or RequireShutdown. 
```

安装程序从所有启用的包中获取最高值，并需要相关的操作。

# mysql - 在查询中加入 COUNT

> ID：14221262
> 
> 赞同：1
> 
> 时间：2013-01-08T18:03:32.563
> 
> 标签：mysql

如何使用 COUNT 获取与 LIKE 查询匹配的所有记录的计数？

我有一个表`keywords`定义为

```
+------+-------+-----------------+
| id   | photo | keyword         |
+------+-------+-----------------+
| 3504 |   664 | 2013            |
| 3505 |   664 | bl elfring      |
| 3506 |   664 | indoor track    |
| 3507 |   664 | people          |
| 3508 |   664 | 1-5_it_0128.jpg |
+------+-------+-----------------+ 
```

并`photo`部分定义为

```
+-----+-------------------+-------------+--------------+------------+
| ID  | name              | photo_width | photo_height | date_taken |
+-----+-------------------+-------------+--------------+------------+
| 760 | 12-8_mbb_0072.jpg |         425 |          600 | 2012-12-08 |
| 759 | 12-8_mbb_0071.jpg |         459 |          600 | 2012-12-08 |
| 758 | 12-8_mbb_0069.jpg |         457 |          600 | 2012-12-08 |
| 757 | 12-8_mbb_0057.jpg |         395 |          600 | 2012-12-08 |
| 756 | 12-8_mbb_0050.jpg |         800 |          468 | 2012-12-08 |
+-----+-------------------+-------------+--------------+------------+ 
```

`keywords.photo`引用 photos.ID 并且`keywords.keyword`是与该图像关联的 IPTC 关键字。

我想计算与特定关键字相关的所有图像

至今，

```
SELECT COUNT(keywords.photo) AS keyword_count, keywords.keyword 
FROM keywords INNER JOIN photos ON keywords.photo = photos.ID
WHERE keywords.keyword LIKE '%nic%' 
```

返回

```
+---------------+-------------+
| keyword_count | keyword     |
+---------------+-------------+
|            31 | nicole **** |
+---------------+-------------+ 
```

然而，

```
SELECT DISTINCT keyword
FROM keywords
WHERE keyword LIKE '%nic%' 
```

返回

```
+----------------+
| keyword        |
+----------------+
| nicole ****    |
| nicole ******* |
| bonny **nic*   |
| nicole ******  |
+----------------+ 
```

如何获得包含第二个查询结果的计数字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T18:06:34.277

如果我理解正确，您想要与给定关键字匹配的照片数量？如果是这种情况，您可以使用该[`GROUP BY`](http://dev.mysql.com/doc/refman/5.0/en//group-by-functions.html)子句：

```
SELECT
    COUNT(keywords.photo) AS keyword_count, keywords.keyword 
FROM
    keywords INNER JOIN photos ON keywords.photo = photos.ID
WHERE
    keywords.keyword LIKE '%nic%'
GROUP BY
    keywords.keyword 
```

这将按`keywords.keyword`列对结果进行分组，并计算每个结果的使用次数。请注意，以这种方式匹配/分组的“关键字”是唯一的 - 它不会按部分匹配分组（即`"bonny **nic*`不同于`nicole ******`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T18:05:59.377

您想按唯一关键字分组：

```
SELECT COUNT(keywords.photo) AS keyword_count, keywords.keyword 
FROM keywords INNER JOIN photos ON keywords.photo = photos.ID
WHERE keywords.keyword LIKE '%nic%'
GROUP BY keywords.keyword 
```

# joomla - 有没有办法在 joomla 文章中显示作者图像

> ID：14221263
> 
> 赞同：0
> 
> 时间：2013-01-08T18:03:36.203
> 
> 标签：joomla

我目前正在为客户设计一个网站，客户要求在每篇文章上显示作者图片和姓名。我搜索过，但找不到执行此操作的选项。

有没有办法在每篇文章上显示作者图片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:34:19.463

有许多扩展可以让您与 Gravatar 和其他服务集成。

就 Joomla 核心而言，您已经可以将作者链接到带有图像的联系人页面（当作者是链接用户时），并且您可以编写一个插件来从联系人记录中提取图像，因为您已经有了记录 ID . 您还可以将图像位置存储为用户配置文件的一部分并为此编写插件。

# google-apps-script - 按名称打开 Google Docs 电子表格

> ID：14221264
> 
> 赞同：11
> 
> 时间：2013-01-08T18:03:44.983
> 
> 标签：google-apps-script, google-sheets, google-drive-api, google-apps

我有一个脚本正在获取输入数据并将其发送到电子表格的情况。过了一会儿，这个电子表格变得太大了。

现在，我们必须手动将项目从主电子表格移动到新电子表格。原因是不是每个人都熟悉代码，愿意更改代码中的ID。

我想知道是否有办法按名称打开电子表格。如果没有，是否有更好的方法来实现我们所需要的（如上所述）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-05-01T15:39:51.397

答案之一中使用的 DocsList 服务不再起作用，因为它已被折旧。我更新了我的脚本，使其看起来更像以下内容。

```
// Open the file
  var FileIterator = DriveApp.getFilesByName(FileNameString);
  while (FileIterator.hasNext())
  {
    var file = FileIterator.next();
    if (file.getName() == FileNameString)
    {
      var Sheet = SpreadsheetApp.open(file);
      var fileID = file.getId();
    }    
  } 
```

DocsList 的替代品是 DriveApp [https://developers.google.com/apps-script/reference/drive/drive-app](https://developers.google.com/apps-script/reference/drive/drive-app)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T23:31:24.730

更新：DocsList 现已[日落](https://developers.google.com/apps-script/sunset)。改为使用[`DriveApp.getFilesByName(name)`](https://developers.google.com/apps-script/reference/drive/drive-app#getFilesByName(String))。

* * *

David 提供了一些很好的代码来改变你的数据。如果您真正需要的只是按名称打开电子表格，那么这将起到作用：

```
function getSpreadsheetByName(filename) {
  var files = DocsList.find(filename);

  for(var i in files)
  {
    if(files[i].getName() == filename)
    {
      // open - undocumented function
      return SpreadsheetApp.open(files[i]);
      // openById - documented but more verbose
      // return SpreadsheetApp.openById(files[i].getId());
    }
  }
  return null;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T18:38:39.360

我做类似于您要求的事情的方式是首先让脚本复制我的电子表格（我将其称为冻结备份）变得太大。一旦我安全地获得了副本，我就会使用相同的脚本从太大的电子表格中删除不再需要的所有行。（我相信拥有多个冻结备份不会花费谷歌帐户任何费用，所以这是可行的）

请注意，我一一删除行；这需要时间。我这样做是因为我不会删除某个点以下的所有行，而只会删除某些符合条件的行。

就我而言，除了上述之外，我还有另一个小程序，即让脚本将我将要删除的所有行复制到第三个电子表格中（除了冻结的备份），但这似乎更多你所要求的。

这是我的代码（请注意，在我们要从中删除行的工作表中，名为“原始”的主电子表格中，每行的 A 列作为时间戳；单元格 A1 称为时间戳）：

```
 function ssCopy() {
  var id = "0ArVhODIsJ2....  spreadsheet key of the master spreadsheet";            
  var smsSS = SpreadsheetApp.openById(id);  

  var recordingSS = SpreadsheetApp.openById("0AvhOXv5OGF.... spreadsheet key of archive spreadsheet");//  you probably wont be using this

  var recordingSMSCopiesSheet = recordingSS.getSheets()[0];

  var outgoingSMSsheet = smsSS.getSheetByName("Original"); 
  outgoingSMSsheet.getRange("A1").setValue("Time Stamp");

  var startRow = 2;
  var numRows = outgoingSMSsheet.getDataRange().getLastRow();
  var numCols = 13;
  var dataRange = outgoingSMSsheet.getRange(startRow, 1, numRows, numCols);
  var objects = getRowsData(outgoingSMSsheet, dataRange); // Create one JavaScript object per row of data.

  var rowDataNumberArray = [];
  var rowToDeleteIndex = [];
  for (var i = 0; i < objects.length; ++i) { // Get a row object
    var rowData = objects[i];
    if(  Date.parse(rowData.timeStamp)  > Date.parse(ScriptProperties.getProperty('lastDate'))  && (rowData.done == 1) ){  //these are not used if these same 2 lines are inserted instead of here, downbelow
      var rowStuff = []
      rowToDeleteIndex.push(i);
      for(n in objects[i]){
        rowStuff.push(  objects[i][n]  )}
      rowDataNumberArray.push( rowStuff )};
    Logger.log("rowData.number1 = " + rowStuff);

  }

  Logger.log(" rowDataNumberArray ~ " + rowDataNumberArray);

  if(rowDataNumberArray.length > 0)
  {
     for(row in rowDataNumberArray)
    {recordingSMSCopiesSheet.appendRow(rowDataNumberArray[row]);}

  }

  spreadsheetFrozenBackup(id)

  for( var i = rowToDeleteIndex.length-1; i >= 0; i-- ) //backwards on purpose
  outgoingSMSsheet.deleteRow(rowToDeleteIndex[i]+ 0 + startRow); //so we don't have to re-calculate our row indexes (thanks to H. Abreu)

}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

function spreadsheetFrozenBackup(id) {

  // Get current spreadsheet.
  var ss = SpreadsheetApp.openById(id);                    

  // Name the backup spreadsheet with date.
  var bssName = " Frozen Spreadsheet at: " + Utilities.formatDate(new Date(), "GMT+1:00", "yyyy-MM-dd'T'HH:mm:ss") + " : " + ss.getName() ;
  var bs = SpreadsheetApp.openById((DocsList.copy(DocsList.getFileById(ss.getId()), bssName)).getId());

}

//////////////////////////////////////////////////////////////////////////////////////////
//
// The code below is reused from the 'Reading Spreadsheet data using JavaScript Objects'
// tutorial.
//
//////////////////////////////////////////////////////////////////////////////////////////

// getRowsData iterates row by row in the input range and returns an array of objects.
// Each object contains all the data for a given row, indexed by its normalized column name.
// Arguments:
//   - sheet: the sheet object that contains the data to be processed
//   - range: the exact range of cells where the data is stored
//   - columnHeadersRowIndex: specifies the row number where the column names are stored.
//       This argument is optional and it defaults to the row immediately above range; 
// Returns an Array of objects.
function getRowsData(sheet, range, columnHeadersRowIndex) {
  columnHeadersRowIndex = columnHeadersRowIndex || range.getRowIndex() - 1;
  var numColumns = range.getEndColumn() - range.getColumn() + 1;
  var headersRange = sheet.getRange(columnHeadersRowIndex, range.getColumn(), 1, numColumns);
  var headers = headersRange.getValues()[0];
  return getObjects(range.getValues(), normalizeHeaders(headers));
}

// For every row of data in data, generates an object that contains the data. Names of
// object fields are defined in keys.
// Arguments:
//   - data: JavaScript 2d array
//   - keys: Array of Strings that define the property names for the objects to create
function getObjects(data, keys) {
  var objects = [];
  for (var i = 0; i < data.length; ++i) {
    var object = {};
    var hasData = false;
    for (var j = 0; j < data[i].length; ++j) {
      var cellData = data[i][j];
      if (isCellEmpty(cellData)) {
        continue;
      }
      object[keys[j]] = cellData;
      hasData = true;
    }
    if (hasData) {
      objects.push(object);
    }
  }
  return objects;
}

// Returns an Array of normalized Strings.
// Arguments:
//   - headers: Array of Strings to normalize
function normalizeHeaders(headers) {
  var keys = [];
  for (var i = 0; i < headers.length; ++i) {
    var key = normalizeHeader(headers[i]);
    if (key.length > 0) {
      keys.push(key);
    }
  }
  return keys;
}

// Normalizes a string, by removing all alphanumeric characters and using mixed case
// to separate words. The output will always start with a lower case letter.
// This function is designed to produce JavaScript object property names.
// Arguments:
//   - header: string to normalize
// Examples:
//   "First Name" -> "firstName"
//   "Market Cap (millions) -> "marketCapMillions
//   "1 number at the beginning is ignored" -> "numberAtTheBeginningIsIgnored"
function normalizeHeader(header) {
  var key = "";
  var upperCase = false;
  for (var i = 0; i < header.length; ++i) {
    var letter = header[i];
    if (letter == " " && key.length > 0) {
      upperCase = true;
      continue;
    }
    if (!isAlnum(letter)) {
      continue;
    }
    if (key.length == 0 && isDigit(letter)) {
      continue; // first character must be a letter
    }
    if (upperCase) {
      upperCase = false;
      key += letter.toUpperCase();
    } else {
      key += letter.toLowerCase();
    }
  }
  return key;
}

// Returns true if the cell where cellData was read from is empty.
// Arguments:
//   - cellData: string
function isCellEmpty(cellData) {
  return typeof(cellData) == "string" && cellData == "";
}

// Returns true if the character char is alphabetical, false otherwise.
function isAlnum(char) {
  return char >= 'A' && char <= 'Z' ||
    char >= 'a' && char <= 'z' ||
    isDigit(char);
}

// Returns true if the character char is a digit, false otherwise.
function isDigit(char) {
  return char >= '0' && char <= '9';
}

// setRowsData fills in one row of data per object defined in the objects Array. // https://developers.google.com/apps-script/storing_data_spreadsheets
// For every Column, it checks if data objects define a value for it.
// Arguments:
//   - sheet: the Sheet Object where the data will be written
//   - objects: an Array of Objects, each of which contains data for a row
//   - optHeadersRange: a Range of cells where the column headers are defined. This
//     defaults to the entire first row in sheet.
//   - optFirstDataRowIndex: index of the first row where data should be written. This
//     defaults to the row immediately below the headers.
function setRowsData(sheet, objects, optHeadersRange, optFirstDataRowIndex) {
  var headersRange = optHeadersRange || sheet.getRange(1, 1, 1, sheet.getMaxColumns());
  var firstDataRowIndex = optFirstDataRowIndex || headersRange.getRowIndex() + 1;
  var headers = normalizeHeaders(headersRange.getValues()[0]);

  var data = [];
  for (var i = 0; i < objects.length; ++i) {
    var values = []
    for (j = 0; j < headers.length; ++j) {
      var header = headers[j];
      values.push(header.length > 0 && objects[i][header] ? objects[i][header] : "");
    }
    data.push(values);
  }

  var destinationRange = sheet.getRange(firstDataRowIndex, headersRange.getColumnIndex(),
                                        objects.length, headers.length);
  destinationRange.setValues(data);
} 
```

# c# - 如何为列表视图中的项目设置焦点？

> ID：14221265
> 
> 赞同：0
> 
> 时间：2013-01-08T18:03:47.387
> 
> 标签：c#, winforms

我有一个名为`_listAvailable`. 我想刷新列表视图我的意思是`(FillOutListViewCtrl())`仅当列表视图中的项目没有焦点时才在列表视图中填充数据，我需要在现有代码中进行哪些修改

```
 public class ResourcePolicySystemsLVI : System.Windows.Forms.ListViewItem
{
            if (_refresh )
            {
                FillOutListViewCtrl();
                _refresh = false;
            }
} 
```

我做了以下检查`if (_refresh && _listAvailable.Focus()==false)`，但这不起作用，因为当项目没有焦点而不是列表视图时，我需要填充列表视图。任何人都可以帮助我我需要做什么修改吗？我们是否有 listviewitem 而不是 listview 的焦点属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:09:24.067

我通过使用做到了`Listview.SelectedItems.Count`

# android - 为 Android 应用程序实现 getLocation 的最简单方法

> ID：14221268
> 
> 赞同：0
> 
> 时间：2013-01-08T18:03:49.760
> 
> 标签：android, python, gps, location

我的小组正在构建一个将消息与位置联系起来的应用程序。所以基本上，应用程序应该获取当前坐标，然后将坐标与消息一起保存到 mongodatabase。在同一位置使用该应用程序的任何人都可以看到存储在该位置的所有消息。

我以前使用 python 制作 HTML 网站。

问题是，这是我第一次使用 android。现在，我不知道如何将坐标从 android 传输到 app.py

使用android的GPS和LocationManager会更容易吗？我小组中有人说要改用 google maps api，而 json? 怎么样？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:24:12.433

从 Android 设备获取位置通过以下方式：

[在应用启动期间获取当前位置](https://stackoverflow.com/questions/12286152/get-current-location-during-app-launch/12286444#12286444)

**Process Initiated from device ：** 现在您的应用程序中现在有了坐标，因此您可以在启动 Web 时执行 AsyncTask 以通过这些经度和纬度访问 Web 服务并获取相应的消息作为响应。

**Process Initiated from server：** 为此，您需要在应用程序中实现 GCM 推送功能，服务器需要执行的操作会将消息推送到设备，并在收到推送后执行与从设备启动的流程中提到的相同的操作。

# php - 如何从（日期时间）文本字段中减去小时数并在第二个文本字段中显示结果

> ID：14221271
> 
> 赞同：-2
> 
> 时间：2013-01-08T18:04:15.533
> 
> 标签：php, javascript, datetime

我有一个日期时间文本字段（文本字段 1），用户在其中输入 Ymd H:i:s 格式的日期时间。我想从文本字段 1 中输入的值中减去 8 小时，并在第二个文本字段（文本字段 2）中显示结果

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:57:45.087

```
var datetime=window.document.getElementById("field1").value; //store date string
datetime=new Date(datetime.replace(" ","T")+"Z");
datetime.setHours(-8);
datetime=datetime.toISOString().replace("T"," ").split(".")[0];
window.document.getElementById("field2").value=datetime; 
```

# image-processing - 运行 OpenCV 时，Raspberry Pi 变得无响应

> ID：14221274
> 
> 赞同：2
> 
> 时间：2013-01-08T18:04:18.870
> 
> 标签：image-processing, opencv, webcam, raspberry-pi

我已经在我的 Raspberry Pi 上成功安装了 OpenCV，并且一直在玩一些简单的网络摄像头流、实时精明边缘检测等等，所有这些都使用基本的 C 和 C++ 代码。

但是，我正在使用的两个网络摄像头遇到问题。第一个，我坐过的一个非常基本、便宜的罗技，工作正常，但图像质量还有很多不足之处。但是当我切换到我的 Logitech 510c 相机时，图像要好得多，但 Pi 会冻结。

相反，流媒体程序继续运行良好，但我无法退出程序 - Raspberry Pi 停止响应键盘和鼠标，退出的唯一方法是拔下 Raspberry Pi。这是一些代码的示例：

```
#include <cv.h>
#include <highgui.h>
#include <stdio.h>

int main(){

  int c, i, j;

  //Capture frame from camera
  CvCapture* capture = cvCaptureFromCAM(CV_CAP_ANY);
  if(!capture){
    fprintf(stderr, "Error: capture is NULL \n");
    getchar();
    return -1;
  }

  //Set resolution of capture
  cvSetCaptureProperty(capture, CV_CAP_PROP_FRAME_WIDTH, 256);
  cvSetCaptureProperty(capture, CV_CAP_PROP_FRAME_HEIGHT, 192);

  //Create window for display
  cvNamedWindow("canny");

  while(true){

    //Find/mark edges using canny
    IplImage* frame = cvQueryFrame(capture);
    IplImage* grey = cvCreateImage(cvGetSize(frame), 8, 1);
    cvCvtColor(frame, grey, CV_RGB2GRAY);
    IplImage* frame2 = cvCreateImage(cvSize(grey->width+6, grey->height+6), grey->depth, grey->nChannels);

    CvPoint offset = cvPoint(3,3);
    cvCopyMakeBorder(grey, frame2, offset, IPL_BORDER_REPLICATE, cvScalarAll(0));
    IplImage* edges = cvCreateImage(cvGetSize(frame2), IPL_DEPTH_8U, frame2->nChannels);
    cvCanny(frame2, edges, 4900, 39200, 7);

    cvShowImage("canny", edges);

    //Wait for a keypress
    int c = cvWaitKey(10);
    if (c!=-1)
        break;
  } //End while

  cvReleaseCapture (&capture);
  cvDestroyWindow("canny");
  return 0;
} //End main 
```

我的代码有问题吗？我需要使用不同的网络摄像头吗？我已经超频了树莓派；它不能用质量更好的相机处理流吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-29T16:53:55.360

我认为 Raspberry Pi 将其 USB 端口上的电流限制为 700 mA，因此如果您的相机在 700 mA 或更低的电流下工作，它应该可以正常工作。如果没有，您应该购买有源 USB 集线器。我有一台额定电流为 700 mA 的 Logitech C170 相机，它在没有供电 USB 集线器的情况下也能正常工作。

我想知道你是如何在你的 Raspberry Pi 上安装 OpenCV 的，这样你就可以将它与 C/C++ 一起使用，如果你使用 IDE 来制作你的程序，我也想知道你是怎么做的。我已经搜索了如何执行此操作的教程，但我只找到了如何安装 OpenCV 以将其与 Python 一起使用的教程。我需要使用C/C++，因为我尝试过Python，我认为它对于图像处理来说真的很慢。我正在使用 Debian 6.0 (Squeeze) 操作系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T00:01:17.290

Raspberry Pi 上的摄像机存在[已知问题，归结为 USB 处理。](https://stackoverflow.com/questions/12748115/why-would-an-opencv-program-capturing-video-frames-freeze-after-a-few-seconds/15595962#15595962)您可以尝试升级到最新内核，尽管到目前为止大多数修复都没有影响相机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-28T14:49:24.660

原因可能是您的相机消耗更多电流，导致 Raspberry Pi 无响应。检查相机的电流额定值，并尝试使用电流额定值不大于 100 mA 的相机。

# css - 如何在响应式缩略图库中制作：悬停效果

> ID：14221278
> 
> 赞同：-1
> 
> 时间：2013-01-08T18:04:29.387
> 
> 标签：css, thumbnails

我正在尝试制作`:hover`类似[http://studionudge.com/work](http://studionudge.com/work)的效果。

我有三个缩略图，每个缩略图的宽度为 30%，边距为 5%。由于百分比的原因，我没有固定的宽度，使它工作起来要困难得多。我无法使悬停出现或使文本居中。

那可能吗？

这是我的 HTML：

```
<div id="thumnails">
  <div class="thumb1">
    <div id="mask">
      <div class="thumb-title"><h3>Project title</h3></div>
    </div>
    <img src="images/work.jpg">
  </div> 
</div><!-- #thumbnails --> 
```

还有我的 CSS：

```
#thumbnails {
  border-bottom: 1px solid #b2b2b2;
  overflow: hidden;
}

#thumb1 {
  width: 30%;
  height: auto;
  margin-right: 5%;
}

#mask {
  position: absolute;
  background-color: #fff;
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
  filter: alpha(opacity=0);
  opacity: 0;
}

#thumb1:hover #mask {
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
  filter: alpha(opacity=100);
  opacity: 1;
}

#thumb1 img {
  max-width: 100%;
  height: auto;
}

.thumb-title {
  position: absolute;
  text-align: center;
  margin-top: 150px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:10:37.587

将鼠标悬停在遮罩上时，您没有悬停在 thumb1 上，这可能是它不起作用的原因。您所崇敬的网站是如何做到这一点的一个很好的例子。百分比应该不是问题。

# ms-access - MS Access MailMerge 和 MS Word 文档

> ID：14221286
> 
> 赞同：0
> 
> 时间：2013-01-08T18:04:46.637
> 
> 标签：ms-access, ms-word, ms-office

我正在更新其他人编写的代码，以便独立于驱动器。我正在从访问数据库中获取数据并将邮件合并到单词中。真正的问题是当 word 模板文档打开时，它开始尝试邮件合并，但它给了我一个错误，因为驱动器是静态分配的，而不是通过网络共享分配的。

我需要做的是重新分配邮件合并以使用驱动器共享，而不是字母。我对这个词有点陌生。visual basic中没有事件（我认为它可能在文档打开触发下），所以它必须是word中的一些设置。同样，由于它在文档打开时触发，我认为它也必须是一个设置。感谢您的任何建议。

# javascript - Json 数据上 Linq.js 的功能在哪里不起作用

> ID：14221290
> 
> 赞同：1
> 
> 时间：2013-01-08T18:05:04.577
> 
> 标签：javascript, underscore.js, linq.js

如何更正以下代码以获得所需的输出，

```
var Data = [{ "A": -27, "B": -39 }, { "A": 28, "B": 0}]

var filter = "x[A]==28";

var findItem = Enumerable.From(Data)
 .Where(function (x) { return filter ; })
 .ToArray();

alert(findItem.length);

$.each(findItem, function (i, value) {
alert(value["A"]);
}); 
```

它应该给我一个值 A:28 或完成一个记录 { "A": 28, "B": 0}，为什么我得到两个值，如何获得正确的结果？

从以下路径使用“linq.js”：[ [https://raw.github.com/gist/1175460/fb7404d46cab20e31601740ab8b35d99a584f941/linq.js](https://raw.github.com/gist/1175460/fb7404d46cab20e31601740ab8b35d99a584f941/linq.js) ]

JSfiddle 的代码：http: [//jsfiddle.net/Irfanmunir/gLXNw/2/](http://jsfiddle.net/Irfanmunir/gLXNw/2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T18:13:31.897

您的过滤器是一个始终评估为真的字符串。将您的过滤器放在一个函数中：

```
var filter = function(x) { return x['A'] === 28 }; 
```

并使用这个：

```
.Where(filter) 
```

查看更新的小提琴：http: [//jsfiddle.net/gLXNw/4/](http://jsfiddle.net/gLXNw/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T18:12:35.230

您要么必须传递谓词函数，要么必须传递表示此类函数的字符串。您正在传递一个函数，因此 linq.js 不需要另一个函数/字符串。

对于 Linq.js，您必须对字符串使用以下语法：

```
var filter = "x => x['A']==28";  // also note the quotes surrounding A 
```

然后将此函数字符串传递给`.Where`：

```
.Where(filter) 
```

你当然也可以内联这个：

```
.Where("x => x['A']==28") 
```

[http://jsfiddle.net/gLXNw/3/](http://jsfiddle.net/gLXNw/3/)

# mysql - 使 Zend\Db (zf2) between 子句包含

> ID：14221292
> 
> 赞同：1
> 
> 时间：2013-01-08T18:05:12.350
> 
> 标签：mysql, zend-framework2, between

我目前正在使用 Zend Framework 2 和一个带有日期范围的查询来从 MySQL 数据库中获取数据，我遇到了之前在 ZF1 中不可用的 between 子句。

但是，我看起来像这样的代码无法正常工作：

```
 $dateStart = '2012-12-20';
   $dateEnd = '2012-12-31';

   $sql = new Sql($_db);
   $select = $sql->select()
                ->from(array("t" => $table))
                ->columns(array("col1" => "col_as_1", "col2" => "col_as_2"));

 $select->where->between("date", $dateStart, $dateEnd);
 $stmt = $sql->prepareStatementForSqlObject($select);
 $result = $stmt->execute()->getResource()->fetchAll(\PDO::FETCH_ASSOC); 
```

显然 between 子句不包含在内，我只能在 2012-12-30 之前得到结果，有没有办法让它包含在内？我一直在查看 ZF2 文档，但它们不是很有帮助，并且在 MySQL 查询浏览器上运行相同的查询会返回我需要的所有数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-04-10T14:25:26.213

```
$from_date = date('Y-m-d', strtotime($AppCleaner->from_date ));
$to_date = date('Y-m-d', strtotime($AppCleaner->to_date ));

  $select->where->between('appointment_date', $from_date . ' 00:00:00', $to_date . ' 23:59:59'); 
```

另外，使用 between 子句，如下所示：

```
 $sql = new Sql($this->adapter);
        $select = $sql->select();
        $select->from('app_posts');
        $select->where->NEST->between( 'id', 30,40);
        $select->group('app_posts.id');
 //     echo $select->getSqlString($this->adapter->getPlatform());
//      exit;
        $statement = $sql->prepareStatementForSqlObject($select);
        $result = $statement->execute();
        $resultSet = new ResultSet();
        $resultSet->initialize($result);
        $posts = $resultSet->buffer()->toArray();
        return $resultSet; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T18:11:49.990

所以你可以尝试`lessThanOrEqualTo`和`greaterThanOrEqualTo`.

之间似乎不提供此功能：`between($identifier, $minValue, $maxValue)`

如果您跟踪查询，`$select->__toString()`您可以将查询视为字符串。

我的电脑上没有 ZF2 但我可以想象`between`在 ZF2 中会输出`date > '2012-12-20' AND date < '2012-12-31'`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-18T09:00:24.513

**注意：`between`在 Mysql 上使用时**

```
date_column_name between 'startDate' AND 'endDate' 
```

**注意：**您应该想在 endDate 中插入**+1****日期**。因为当您在**endDate**中插入 2015-05-18 日期时，您无法获取 2015-05-18 的数据。因此您需要在**endDate中****加上一个日期**。

 ******你可以用这个来做

```
$plusToDate = date('Y-m-d H:i:s', strtotime($toDate . ' + 1 day')); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T15:52:12.810

The BETWEEN should be inclusive, are you sure there are no hours, minutes and seconds after the date, that would cause it not to select dates on 2012-12-31 since 2012-12-31 00:00:01 would technically be > 2012-12-31

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-17T12:33:50.637

格式必须相同，使用mysql DATE函数

`$select->where->between("DATE(date)", DATE('.$dateStart.'), DATE('.$dateEnd.'));`******

# python - 如何使用 Python 脚本在 gimp 中为文本层添加下划线

> ID：14221294
> 
> 赞同：0
> 
> 时间：2013-01-08T18:05:19.917
> 
> 标签：python, gimp

我正在尝试使用 gimp 的 python API 将文本层添加到图像中。也许有人知道我如何在这个文本层中为文本添加下划线。

```
textlayer=pdb.gimp_text_fontname(
                            newimage,
                            None, #layer,
                            0,
                            0,
                            'some underlined text',
                            -1,   #border
                            True, #anitalias
                            20,   #size
                            0, #GIMP_PIXELS
                            'Sans') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:35:36.920

不幸的是，从 GIMP 2.8 开始没有办法做到这一点——可以在程序浏览器上看到：有一个“gimp_text_layer_get_markup 调用允许从文本层检索文本格式属性，但没有相应的 gimp_text_layer_set_markup。

尝试使用 gimp_text_layer_set_text 调用设置标记将引用标签，并将它们呈现为纯文本。

您的解决方法是使用函数获取图层和文本范围，并使用绘图函数绘制下划线。

# mysql - 反向使用 tac、grep 和 sed...从 MySQL 转储中提取表

> ID：14221302
> 
> 赞同：2
> 
> 时间：2013-01-08T18:05:46.900
> 
> 标签：mysql, sed, grep

我正在按照[本指南](http://spin.atomicobject.com/2010/12/13/extracting-a-table-from-a-mysql-dump/)使用 grep 从 mysql 转储中提取表，因此我不必恢复所有 50GB 数据即可查看一个表。拉表的两个主要命令是：

```
 grep -n "Table structure" [MySQL_dump_filename].sql 
```

获取表定义的行号，然后

```
 sed -n '[starting_line_number],[ending_line_number] p' [MySQL_dump_filename].sql > [table_output_filename].sql 
```

不过，我想以相反的顺序搜索 .sql 转储，因为我需要的是接近文件的末尾，并且需要相当长的时间来 grep 前 48GB 的​​数据。我在 OS X 上并安装了 tac（通过 brew 如此[处](https://github.com/mxcl/homebrew/issues/6426)所述）。但是是否可以设置命令来完成此操作并在 sed 获取所需的行后让它退出？如果不是，我还不如从一开始就 grep 而不是 tac，就等着吧。或 ctrl-c 一旦我看到文件填充在另一个终端中。

示例运行：

```
$ tac dump.sql | grep -n "Table structure"
...
751:-- Table structure for table `answer`
779:-- Table structure for table `template`
806:-- Table structure for table `resource`
... 
```

但是当然这些是相反的行号，所以如果你需要'模板'表，你需要 sed -n '752,779 p'，但是从文件末尾开始，否则你会得到错误的行号（sed将从文件的开头开始计算）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:22:20.550

一些快速指示：

*   `dd`**可以帮助您快速**跳过N 个字节/块/如果您确定那些第一个 N gb 没有用处

*   跳过后，无需 1)`grep`查找行号，然后 2)`sed`跳过直到第 n 行（读取剩余的两倍）：您可以直接：

    `awk '/beginningpattern/,/endpattern/ { print $0 ; }'`#warning：语法不完整，更好地了解 awk 及其威力。你可以做各种整洁的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:54:00.883

这是了解所有表定义从哪里开始和结束的更简化的方法。

对于给定的文件`rolando.sql`，创建一个执行以下操作的脚本：

```
DAT=rolando.sql
TBLMAP=tblmap.txt
TBLLST=${TBLLST}.lst
TBLTMP=${TBLMAP}.tmp
RUNMAP=DisplayTables.sh
grep -n "^-- Table structure" ${DAT} |sed 's/:/ /'| awk '{print $1}'  > ${TBLTMP}
grep -n "^) ENGINE="          ${DAT} |sed 's/:/ /'| awk '{print $1}' >> ${TBLTMP}
sort -n < ${TBLTMP} > ${TBLLST}
rm -f ${TBLTMP}
rm -f ${TBLMAP}
POS=1
for X in `cat ${TBLLST}`
do
    (( POS = 1 - POS ))
    if [ ${POS} -eq 0 ]
    then
        (( Y = X - 2 ))
    fi
    if [ ${POS} -eq 1 ]
    then
        echo "${Y},${X}" >> ${TBLMAP}
    fi
done
rm -f ${TBLLST}
echo "Table Structures From ${DAT}"
for XY in `cat ${TBLMAP}`
do
    echo "sed -n '${XY}p' ${DAT}" >> ${RUNMAP}
done
chmod +x ${RUNMAP}
./${RUNMAP} 
```

该脚本将为您输出每个创建表语句。它还将包括`DROP TABLE`声明。如果你不想要 drop table 语句，你这个：

```
DAT=rolando.sql
TBLMAP=tblmap.txt
TBLLST=${TBLLST}.lst
TBLTMP=${TBLMAP}.tmp
RUNMAP=DisplayTables.sh
grep -n "^CREATE TABLE" ${DAT} | sed 's/:/ /' | awk '{print $1}'  > ${TBLTMP}
grep -n "^) ENGINE="    ${DAT} | sed 's/:/ /' | awk '{print $1}' >> ${TBLTMP}
sort -n < ${TBLTMP} > ${TBLLST}
rm -f ${TBLTMP}
rm -f ${TBLMAP}
POS=1
for X in `cat ${TBLLST}`
do
    (( POS = 1 - POS ))
    if [ ${POS} -eq 0 ]
    then
        (( Y = X ))
    fi
    if [ ${POS} -eq 1 ]
    then
        echo "${Y},${X}" >> ${TBLMAP}
    fi
done
rm -f ${TBLLST}
echo echo "Table Structures From ${DAT}" > ${RUNMAP}
for XY in `cat ${TBLMAP}`
do
    echo "sed -n '${XY}p' ${DAT}" >> ${RUNMAP}
done
chmod +x ${RUNMAP}
./${RUNMAP} 
```

试试看 ！！！

# asp.net - 如何使用 SQL Server 和 Reporting Services 构建包含总计和细分列的报表

> ID：14221307
> 
> 赞同：1
> 
> 时间：2013-01-08T18:06:01.727
> 
> 标签：asp.net, sql-server, reporting-services

我有一个数据结构，其中有两个表 Alpha 和 Beta，它们是一对多的。举个例子，假设表 alpha 有一个“状态”列，表 B 有“你喜欢的颜色”，你可以选择多个。我想构建一个包含如下列的报告：

```
STATE          TOTAL     RED     GREEN     BLUE
Alaska         5         1       3         1
Florida        2         2       2         0
New York       10        5       8         1 
```

TOTAL 列将是 Alpha 中记录的计数，正如您所见，由于一对多的关系，颜色的总和可能超过计数。我想如果人们不喜欢颜色，它可能会更少。

您将如何构建这样的报告。我将在 .NET 中使用 SQL Server 和 Reporting Services，因此它可能是一个复杂的查询，我只是转储到数据表报告中，也可能是一个不太复杂的查询，由报告完成一些计数和总计。我真的不知道解决这个问题的最佳方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T18:16:46.833

由于您不知道哪些颜色将成为列，您应该使用[矩阵控件](http://msdn.microsoft.com/en-us/library/ms157334%28v=SQL.100%29.aspx)

您需要设置查询

```
SELECT 
    a.State,
    b.ColorName,
    COUNT(b.ColorID) ColorCount
FROM
    alpha a
    LEFT JOIN beta b
    ON a.id = b.a_id
GROUP BY 
    a.State,
    b.ColorName 
```

只需拖动行的状态，列的颜色和数据的 ColorCount（`Count(ColorID)`将显示在数据字段中））

注意：`LEFT JOIN`如果要`0`正确显示值，则需要使用 and Count(ColorID) 而不是 Count(*)。

如果您确实知道可以使用的颜色`PIVOT`或求和技术

`SELECT state SUM(CASE WHEN Color = 'RED' THEN 1 ELSE 0 END) as Red, ...`

# linux - 如何编写全屏 Linux 控制台应用程序/脚本？

> ID：14221317
> 
> 赞同：15
> 
> 时间：2013-01-08T18:06:44.553
> 
> 标签：linux, shell, command-line-interface

我什至很难用谷歌搜索这个，因为我不知道正确的关键字。一些命令行应用程序（例如 vi 和 less）占据整个控制台屏幕并向用户呈现交互式界面。退出此类应用程序后，屏幕将返回到应用程序启动前的状态。我想编写一个以这种方式运行的程序，但同样，我什至不知道它叫什么，所以我找不到任何关于它是如何完成的文档。

所以，我的问题有三个：

1.  我可以使用哪些关键字来查找相关文档？
2.  如果您愿意，指向此类文档的链接会有所帮助。
3.  最后，我可以用像 Ruby 甚至 bash 这样的脚本语言来完成这个任务吗？我对 C 没有问题，但我工作的环境更适合解释语言。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T18:12:47.073

正如一些评论中所说，您正在寻找 ncurses。Linux 文档项目有一个非常好的关于 C 的 ncurses 的 HOWTO，我用自己来开始它

[https://tldp.org/HOWTO/NCURSES-Programming-HOWTO/](https://tldp.org/HOWTO/NCURSES-Programming-HOWTO/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T18:12:34.250

您描述的功能是[备用屏幕缓冲区](http://www.xfree86.org/current/ctlseqs.html#The%20Alternate%20Screen%20Buffer)。我认为 [N]Curses 将默认启用此功能。Ruby、Python 和其他脚本语言当然有 curses 绑定。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T21:08:52.260

您甚至可以使用 tput 程序在 bash 中访问 ncurses。整个 ncurses 库（就像之前的 curses）通过向终端发送转义序列来工作。xterm 程序模拟一个 vt100 终端（也是一个 Tektronic 终端），并且有各种字符组合可以移动光标、清除屏幕、绘制各种字符等。这些通常以转义字符开头，因此得名：escape顺序。您有时还会在人们的 PS1 shell 变量中看到这些转义序列，其中 \e 提供转义字符；常用于为提示着色或设置窗口标题。

tput 引用 terminfo 数据库来确定转义序列是什么来执行您要求它执行的功能。

请参阅手册页，键入：

```
man 5 terminfo 
```

更多细节

# c++ - GLEW 库在链接时似乎有问题

> ID：14221320
> 
> 赞同：0
> 
> 时间：2013-01-08T18:07:09.520
> 
> 标签：c++, glew

我现在对尝试链接这个 glew 库感到非常沮丧

这是构建日志：

```
g++ -o test.exe "src\\test.o" -lglew32 -lglfw -lglu32 -lopengl32 
src\test.o: In function `main':
C:\dev\test\Debug/../src/test.cpp:31: undefined reference to `_imp__glewInit@0'
C:\dev\test\Debug/../src/test.cpp:41: undefined reference to `_imp____glewGenVertexArrays'
C:\dev\test\Debug/../src/test.cpp:42: undefined reference to `_imp____glewBindVertexArray' 
```

我已经尝试在构建命令中移动哪些库首先出现。

这似乎是互联网上其他人遇到的问题，但我似乎无法找到任何已修复它的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:45:19.810

好的，我知道回答我自己的问题有点奇怪，但问题是：

显然错误发生在两个方面

*   首先，我不需要glu32，只需要opengl32，因为我相信glew自己处理了这个
*   其次，出于某种奇怪的原因，我不得不打电话给

    ```
    #define GLEW_STATIC 
    ```

    在我导入之前手动

# c++ - C++ 图像流/滑块

> ID：14221321
> 
> 赞同：0
> 
> 时间：2013-01-08T18:07:17.837
> 
> 标签：c++, mfc, coverflow, imageflow

我有一个在屏幕底部显示小图像缩略图的软件：

![在此处输入图像描述](../Images/c37845a70ad1db8f6739cfc802b06a06.png)

但这些样本 5 只是所有可用样本的一小部分。我正在寻找库的想法或仅可用的开源代码，当按下箭头按钮或用户像在 ipod 上一样向左/向右轻拂它们时，它们可以让我在它们切换到列表中的上一个/下一个时为它们设置动画。

我没有使用 Qt（因为另一个答案建议使用它）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:00:44.723

嘿，我的你需要这个，有很好的动画和它的原生

[http://www.codeproject.com/Articles/21006/Not-just-a-image-list-control-Neat-3D-iTunes-style](http://www.codeproject.com/Articles/21006/Not-just-a-image-list-control-Neat-3D-iTunes-style)

# java - 扩展对象未保存在数据库中

> ID：14221325
> 
> 赞同：0
> 
> 时间：2013-01-08T18:07:39.097
> 
> 标签：java, database, inheritance, persistence, entity

我有两个班级：`Furniture`和`Painting`。那些正在扩展`Item`。

项目具有以下代码：

```
@Entity
public class Item implements Comparable, Serializable {

    @Id @GeneratedValue(strategy= GenerationType.AUTO)
    private Long id;
    @ManyToOne 
    private User seller;
    @Embedded
    @AttributeOverrides({
     @AttributeOverride(name = "description",
        column = @Column(name = "c_description"))})
    private Category category;
    private String description;

    public Item() {
    }

    public Item(User seller, Category category, String description) {
        this.seller = seller;
        this.category = category;
        this.description = description;
        this.seller.addItem(this);
    } 
```

绘画有以下代码：

```
@Entity
public class Painting extends Item {

    private String title;
    private String painter;

    public Painting() {

    }

    public Painting(String title, String painter, User seller, Category category, String description) {
        super(seller, category, description);
        this.title = title;
        this.painter = painter;
    } 
```

家具有以下代码：

```
@Entity
public class Furniture extends Item {

    private String material;

    public Furniture() {

    }

    public Furniture(String material, User seller, Category category, String description) {
        super(seller, category, description);
        this.material = material;
    } 
```

之前，我尝试了一些持久化`Item`对象的代码。那工作得很好。现在我正在尝试持久化一个`Painting`-object，通过实体管理器持久化它。我收到以下错误：

> 对象：auction.domain.Furniture@5d3468fd 不是已知的实体类型。

好像我忘记了什么或做错了什么，可能是在`Painting`课堂上。会是什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:49:29.963

我忘了更新我的持久性单元。添加`Furniture`和`Painting`类后，信息进入数据库。上面的代码是正确的。

# jquery - 使用多个脚本时，JQuery Image changer 停止工作

> ID：14221326
> 
> 赞同：0
> 
> 时间：2013-01-08T18:07:43.543
> 
> 标签：jquery

我正在玩 JQuery（我是个初学者），我遇到了一个问题。

我正在制作一个带有缩略图的简单图片库，单击该缩略图可以更改正在显示的主图像。除此之外，我还添加了在缩略图集和较大图像之间滑动的箭头。

所有脚本单独工作，滑动箭头脚本一起工作，但每当我一起使用这三个脚本时，图像转换器最初工作，然后在您使用其他脚本之一时停止工作。

我无法弄清楚为什么会发生这种情况，有人可以帮忙吗？

下面的代码：

[http://jsfiddle.net/ugPX7/](http://jsfiddle.net/ugPX7/)

查询：

```
function thumbClick() {
/*$('#gallery img').click(function() {
    var imgSrc = $(this).attr('src').replace('thumbs/','')
    $('#largeImage').fadeOut(750, function(){
          $(this).attr('src',imgSrc).bind('onreadystatechange load', function(){
             if (this.complete) $(this).fadeIn(750);
          });  
    });
});*/

$("#gallery img").click(function () {
    var imgSrc = $(this).attr("src").replace('thumbs/', '');
    $("#largeImage").attr("src", imgSrc);
});
}

function thumbGallery() {
if ($("#gallery").length) {

    // Declare variables
    var totalImages = $("#gallery > li").length,
        imageWidth = $("#gallery > li:first").outerWidth(true),
        totalWidth = imageWidth * totalImages,
        visibleImages = Math.round($("#gallery-wrap").width() / imageWidth),
        visibleWidth = visibleImages * imageWidth,
        stopPosition = (visibleWidth - totalWidth);

    // Set gallery to width of all images    
    $("#gallery").width(totalWidth);

    // Navigation buttons   
    $("#gallery-prev").click(function (event) {
        if ($("#gallery").position().left < 0 && !$("#gallery").is(":animated")) {
            $("#gallery").animate({
                left: "+=" + imageWidth * 2 + "px"
            }, 1000);
        }
        event.preventDefault();
    });

    $("#gallery-next").click(function (event) {
        if ($("#gallery").position().left > stopPosition && !$("#gallery").is(":animated")) {
            $("#gallery").animate({
                left: "-=" + imageWidth * 2 + "px"
            }, 1000);
        }
        event.preventDefault();
    });
}
}

function mainGallery() {
if ($("#panel").length) {

    // Declare variables
    var totalI = $("#panel > li").length,
        imageW = $("#panel > li:first").outerWidth(true),
        totalW = imageW * totalI,
        visibleI = Math.round($("#panel-wrap").width() / imageW),
        visibleW = visibleI * imageW,
        stopP = (visibleW - totalW);

    // Set gallery to width of all images    
    $("#panel").width(totalW);

    // Navigation buttons   
    $("#panel-prev").click(function (event) {
        if ($("#panel").position().left < 0 && !$("#panel").is(":animated")) {
            $("#panel").animate({
                left: "+=" + imageW + "px"
            }, 1000);
        }
        event.preventDefault();
    });

    $("#panel-next").click(function (event) {
        if ($("#panel").position().left > stopP && !$("#panel").is(":animated")) {
            $("#panel").animate({
                left: "-=" + imageW + "px"
            }, 1000);
        }
        event.preventDefault();
    });
}
}

$(document).ready(function () {
    thumbClick();
    mainGallery();
    thumbGallery();

}); 
```

提前致谢！

# grails - 每秒请求一次 HTTP 500 响应

> ID：14221327
> 
> 赞同：0
> 
> 时间：2013-01-08T18:07:53.370
> 
> 标签：grails

我已经使用一个过滤器实现了一个自定义身份验证方案，该过滤器在我所有控制器的前拦截器中调用一个`authenticate()`方法。`AuthService`该`authenticate()`方法使用`groovy.sql.Sql`UserCredentialsDataSourceAdapter[来](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/jdbc/datasource/UserCredentialsDataSourceAdapter.html)尝试连接到数据库，然后检查以确保数据库用户具有适当的角色。该数据库是 Oracle 并且是旧版 ERP 的一部分，因此这是我进行身份验证的唯一方法。

当我提交带有无效凭据的请求时，会出现我遇到的问题。`"ORA-01017: invalid username/password; logon denied"`按预期抛出包含 an 的 SQLException 。我的 try/catch 块捕获并抑制它，并且代码在拒绝请求时正确进行。但是，无论提供什么凭据，下一个请求总是在 500 响应中返回 SQLException。关于为什么会这样以及我能做些什么来解决它的任何想法？

```
def authenticate(def username, def password) {
    def authorized = false
    Sql sql

    if (username != null && !username.equals('')) {
        try {
            dataSource.setCredentialsForCurrentThread(username, password)

            sql = Sql.newInstance(dataSource)
            def row = sql.firstRow("**SQL removed for privacy**")

            if (row != null && row.has_permission == 1) {
                authorized = true
            }
        } catch (Exception e) {

        } finally {
            sql.close() 
        }
    }

    return authorized
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:51:30.530

我认为 dataSource 是应用程序的单例，因此在您设置此不正确的用户名和密码后第一次尝试获取连接（通过任何地方）时会遇到无效的用户名和密码。

所以当异常发生时，你必须回到默认的用户名和密码。

# sesame - 多个客户端同时在芝麻存储库上

> ID：14221328
> 
> 赞同：1
> 
> 时间：2013-01-08T18:07:53.667
> 
> 标签：sesame

我将 sesame 用于项目，并使用本地 nativestore 文件存储库。一切都很好，但是当多个客户端同时使用我的应用程序时，存储库会锁定。我该如何处理并行连接问题；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T02:59:24.770

Sesame Native Store 假定它对其数据目录具有唯一的、唯一的访问权限。这意味着您不能创建两个使用相同数据目录的 NativeStore 对象，因为这会导致不一致和潜在的死锁。因此，您需要共享一个 NativeStore 对象。

在单个 JRE 中，这可以通过使用`RepositoryManager`. 有关说明和代码示例，请参阅[本文。](http://rivuli-development.com/further-reading/sesame-cookbook/the-repositorymanager/)如果您的设置需要多个独立的客户端应用程序来连接到 Sesame，您将必须实现自己的服务器应用程序以供这些客户端连接，或者您可以使用 Sesame Server 并让每个客户端通过`HTTPRepository`.

# javascript - 如果多次按下同一个按钮或阻止点击，如何删除内容模型？

> ID：14221329
> 
> 赞同：0
> 
> 时间：2013-01-08T18:07:54.793
> 
> 标签：javascript, jquery, backbone.js

我正在使用 Backbone.js 开发一个应用程序。如果我有一个按钮并按下它，则会添加一个内容模块（视图和模型）。如果我按下其他按钮，内容将被删除（视图和模型）。如果我反复按下按钮添加，内容的视图被显示并重写，但以前的模型不会被删除。如果多次按下要添加的相同按钮，如何删除内容模型？

```
 var tabsContents = Backbone.View.extend({
el: "body", 
events: {
    "click .addAll": "addContentAll"    
},
initialize: function() {
    _.bindAll(this); 
    this.model = new ContentCollection();
    this.model.on("add", this.contentAdded);
    this.model.on("remove", this.contentRemoved);
},          
addContentAll: function(event) {
            this.model.add({name: "all"});          
contentAdded: function(content) {
    if (content.view == null) {
        var template_name;              
        switch(content.get("name")){        
            case 'all': template_name = 'home'; break;  
        }                                       
        content.view = new ContentView({model: content,template: $.trim($("[data-template-name='"+ template_name +"'] div").html() || "Template not found!")});
        $(".box2").empty();             this.$el.find(".content").find("div.box").append(content.view.render().el);                                                 
    }       
},  
contentRemoved: function(content) {
    if (content.view != null) { 
        content.view.remove();              
    }
    content.clear();  //Clear the properties of the model               
}   
});
var ContentView = Backbone.View.extend({
    tagName: "div",
    template: null,
    events: {
          "click .Close": "removeView"
    },
    initialize: function() {
        _.bindAll(this);
        this.template = this.options.template; 
    },
    render: function() {        
        this.$el.html(Mustache.render(this.template, this.model.toJSON())); 
        return this; 
    },
    removeView: function() {
        this.model.collection.remove(this.model); //Remove the model of the coll
        }
});     
var tabsview = new tabsContents(); 
```

我也不知道如何删除模型单击按钮添加另一个模型

# installation - NSIS 通过 IP 检测国家代码

> ID：14221335
> 
> 赞同：0
> 
> 时间：2013-01-08T18:08:29.520
> 
> 标签：installation, nsis

我是 nsis 安装程序的新手。我想检测用户的国家（通过 ip），然后根据国家想要做一些动作。我在 nsis plugins 目录中搜索，但只找到了一个检测 ip 的插件。

如何通过 ip in nsis 获取国家代码？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T18:23:32.697

从 IP 检测国家意味着您需要：

1.  网络连接
2.  一种确定外部 IP 的方法（不计算代理？）
3.  访问 IP/地理数据库

为什么不在本地机器上使用 Windows 配置：

```
!include LogicLib.nsh
!define LOCALE_SCOUNTRY 6 ; Localized
!define LOCALE_SENGCOUNTRY 4098
!define LOCALE_SENGLANGUAGE 0x00001001
!define GEOCLASS_NATION 16
!define GEOID_NOT_AVAILABLE -1
!define GEO_ISO2 4
!define GEO_ISO3 5

Section

System::Call 'KERNEL32::GetUserDefaultLangID()i.r0'
DetailPrint LANGID=$0
System::Call 'KERNEL32::GetLocaleInfo(i$0,i${LOCALE_SENGCOUNTRY},t.r1,i1000)'
DetailPrint LOCALE_SENGCOUNTRY=$1
System::Call 'KERNEL32::GetLocaleInfo(i$0,i${LOCALE_SCOUNTRY},t.r1,i1000)'
DetailPrint LOCALE_SCOUNTRY=$1
System::Call 'KERNEL32::GetLocaleInfo(i$0,i${LOCALE_SENGLANGUAGE},t.r1,i1000)'
DetailPrint LOCALE_SENGLANGUAGE=$1

System::Call 'KERNEL32::GetUserGeoID(i${GEOCLASS_NATION})i.r0'
DetailPrint GEOID=$0
${If} $0 <> ${GEOID_NOT_AVAILABLE} ; Only available if the user has set a country/location
${AndIf} $0 != "error" ; GetUserGeoID is WinXP+
    System::Call 'KERNEL32::GetGeoInfo(i$0,i${GEO_ISO2},t.r1,i1000,i0)'
    DetailPrint GEO_ISO2=$1
    System::Call 'KERNEL32::GetGeoInfo(i$0,i${GEO_ISO3},t.r1,i1000,i0)'
    DetailPrint GEO_ISO3=$1
${EndIf}

SectionEnd 
```

# php - 从现有数组创建新数组 (php)

> ID：14221336
> 
> 赞同：0
> 
> 时间：2013-01-08T18:08:33.680
> 
> 标签：php, arrays

好的，我对 C# 非常有经验，但对 PHP 很陌生，所以请多多包涵。

我有一个看起来有点像这样的现有数组

```
Array
(
[0] => Array
    (
        [author] => Gavin
        [weighting] => 2743
    )

[1] => Array
    (
        [author] => Bob
        [weighting] => 2546
    )

[2] => Array
    (
        [author] => Gavin
        [weighting] => 2227
    )
) 
```

现在我想做的是循环遍历它并最终得到一个新数组，该数组有 2 个键 ( `Gavin`and `Bob`) 并且`Bob`'s 的值是`2546`while `Gavin`'s is `4970`。

现在我有这个几乎可以工作，但最后一位作者得到一个重复的值，我无法对其进行排序？

```
if (array_key_exists($authorName, $Authors)) {
    foreach ($Authors as $key_name => &$key_value) {
        if ($key_name == $authorName)
        {
                $key_value = $key_value + $weight;
        }
    }
}
else {
    $Authors[$authorName] = $weight;
} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T18:12:23.843

这应该可以解决问题

```
$newarray = array();
foreach($yourarray as $a) {
    //create array if not created
    if(!isset($newarray[$a['author']])) {
        $newarray[$a['author']] = 0;
    }
    //put value in array
    $newarray[$a['author']] += $a['weighting'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:13:46.343

```
$Authors = array();

foreach($array as $entry) {
    if ( array_key_exists($entry['author'], $Authors) ) {
        $Authors[ $entry['author'] ] += $entry['weighting'];
    } else {
        $Authors[ $entry['author'] ] = $entry['weighting'];
    }
} 
```

在此处查看实际操作：[http ://codepad.viper-7.com/LUx1r5](http://codepad.viper-7.com/LUx1r5)

# php - require_once 内部 require_once 创建路径问题

> ID：14221338
> 
> 赞同：4
> 
> 时间：2013-01-08T18:08:48.113
> 
> 标签：php

我有这个条件：

*   一个文件：`/public_html/folderX/test.php`有一行：`require_once '../functions/sendemail.php'`
*   另一方面，`/public_html/functions/sendemail.php`有一行：`require_once '../config.php'`

`config.php`在这种情况下完美加载。

当我尝试将其添加到`functions/sendemail.php`不在文件夹 X 中的文件上时，会出现问题，例如：

当我尝试添加`require_once 'functions/sendemail.php'`时，`public_html/test.php`我收到此错误消息：

> 警告：require_once(../config-min.php) [function.require-once]：打开流失败：public_html/test.php 中没有这样的文件或目录

如何使`require_once '../config.php'`内部函数/sendemail.php“独立”工作，因此无论它包含在任何文件中，这个“require_once”问题都不会再发生。

我试图更改为“include_once”，但仍然无法正常工作。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T18:13:55.353

尝试类似的东西

```
require_once( dirname(__FILE__).'/../config.php') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T18:22:52.843

尝试使用`__DIR__`来获取脚本的当前路径。

```
require_once(__DIR__.'../config.php'); 
```

`__DIR__`仅适用于 php 5.3

```
 __DIR__ 

The directory of the file. If used inside an include, the directory of 
the included file is returned. This is equivalent to dirname(__FILE__). 
This directory name does not have a trailing slash unless it is the root directory. 
(Added in PHP 5.3.0.) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T18:16:40.777

您必须了解 PHP 会将目录更改为*最外层*脚本的目录。当您使用相对路径时（例如，以`./`、开头的`../`或不以 开头`/`的路径），PHP 将使用当前目录来解析相对路径。当您在代码中复制粘贴包含行时，这会导致问题。考虑这个目录结构：

```
/index.php
/admin/index.php
/lib/include.php 
```

假设两个索引文件包含以下行：

```
include_once("lib/include.php"); 
```

上面的行在`/index.php`被调用时有效，但在`/admin/index.php`被调用时无效。

解决方案是不要复制粘贴代码，在包含调用中使用正确的相对文件路径：

```
/index.php       -> include_once("lib/include.php");
/admin/index.php -> include_once("../lib/include.php"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T18:14:59.980

我相信相对路径名在这里咬你。相对路径（据我所知）基于当前活动脚本的目录。PHP 不`chdir`进入文件夹时`including`或`requiring`文件。最好的建议（以我有限的经验）是尽可能使用绝对路径。所以像：

```
require_once('../config.php'); 
```

会成为：

```
require_once('/home/myuser/config.php'); // Or wherever the file really is 
```

[dirname](http://us3.php.net/manual/en/function.dirname.php)函数可以在这种情况下提供帮助。

# sockets - 侦听器套接字上的 epoll_wait() 和虚假故障

> ID：14221339
> 
> 赞同：2
> 
> 时间：2013-01-08T18:08:51.440
> 
> 标签：sockets, listener, epoll

我看到`epoll_wait()`了监听器套接字之间的以下交互。创建侦听器套接字的事件顺序是：

1.  称呼`socket()`
2.  称呼`bind()`
3.  调用`fcntl()`并设置为非阻塞
4.  打电话`epoll_ctl()`和`EPOLL_CTL_ADD`_`EPOLLET | EPOLLONESHOT | EPOLLIN`
5.  称呼`listen()`

有后台线程调用`epoll_wait()`此套接字和其他线程，如果碰巧在第 4 步和第 5 步之间这样做，`EPOLLHUP`则为侦听器套接字接收一个事件。将顺序更改为：

1.  称呼`socket()`
2.  称呼`bind()`
3.  调用`fcntl()`并设置为非阻塞
4.  称呼`listen()`
5.  打电话`epoll_ctl()`和`EPOLL_CTL_ADD`_`EPOLLET | EPOLLONESHOT | EPOLLIN`

解决了这个问题，但现在我看到了建立连接`EPOLLIN`但未收到侦听器套接字的事件的虚假故障。

我知道可以选择使用电平触发模式，但我想让它适用于边缘触发模式。

关于这个问题可能是什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:35:02.980

的语义`EPOLLONESHOT`是，一旦`epoll_wait()`为某个描述符提取了通知，您将不得不调用`epoll_ctl()`with`EPOLL_CTL_MOD`以*重新启用*该描述符上的通知。因此，您可能只是因为`EPOLLONESHOT`禁用了被动/侦听套接字上的通知而丢失了连接。（一般情况下，除特殊情况外`EPOLLONESHOT`不应使用；自动添加到代码中不是样板或巫术。*）*

此外，对于非阻塞边缘触发语义，在通知侦听套接字已准备好输入时，`accept()`需要在循环中调用，直到`EAGAIN`报告错误为止。仅调用`accept()`一次可能会将其他连接留在队列中，此外，在`EPOLLIN`将全新的连接添加到该队列之前，不会发生另一个边缘触发的事件。（即假设`EPOLLONESHOT`未指定，或者每次调用之前都重新启用描述符`epoll_wait()`。）

**附录**消除 EPOLLONESHOT 当然值得一试。为什么你还需要它？

# python - 全屏导致 Python OpenCV 中的 AttributeError

> ID：14221340
> 
> 赞同：1
> 
> 时间：2013-01-08T18:08:55.403
> 
> 标签：python, opencv

这是一件奇怪的小事。我正在使用 OpenCV 2.4.2（在 OSX 10.7 上构建 brew）、cv2 绑定，并且通过 OpenCV 文档，我都尝试了：

```
cv2.setWindowProperty("Image", cv2.WND_PROP_FULLSCREEN, cv2.WINDOW_FULLSCREEN)
cv2.setWindowProperty("Image", cv2.CV_WND_PROP_FULLSCREEN, cv2.CV_WINDOW_FULLSCREEN) 
```

两者都返回 cv2 没有这个属性。我假设它们还没有被添加到 cv2 绑定中。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:34:35.007

如您所见，只有`cv2.CV_WINDOW_AUTOSIZE`可用的属性。要使用`FULLSIZE`属性，您需要使用`cv2.cv`模块。

```
cv2.setWindowProperty("Image", cv2.WND_PROP_FULLSCREEN, cv2.cv.CV_WINDOW_FULLSCREEN) 
```

# magento - Magento 购物车规则不适用于美国

> ID：14221342
> 
> 赞同：1
> 
> 时间：2013-01-08T18:08:57.533
> 
> 标签：magento, discount, magento-rules

我有一个问题，将具有固定价格折扣 (74.99) 的直接优惠券代码应用于几个 sku 中的任何一个。

我以前从未见过这种情况，但代码适用于欧盟的任何地址，但在区域之外，代码显示为已应用，然后不显示。

![在此处输入图像描述](../Images/c03ff7d4edd4be6556cdc53a76aa7131.png) ![在此处输入图像描述](../Images/0454e32d066819d097e317cc481e6d3d.png)

我考虑了此讨论中的信息：[Magento：应用了购物车价格规则，但未从小计中减去折扣，](https://stackoverflow.com/questions/7908513/magento-shopping-cart-price-rule-gets-applied-but-discount-not-subtracted-from)但它并不真正适用，因为在同一家商店中，我可以将其应用于西班牙和英国的测试地址。

有没有人见过这种行为？

# php - 更改导航栏“主页”链接

> ID：14221343
> 
> 赞同：0
> 
> 时间：2013-01-08T18:09:00.980
> 
> 标签：php, html, wordpress

所以我想在我的 wordpress 主题中添加一个主页按钮，这样当用户转到另一个页面时，通过按下“主页”按钮，他们可以返回主页。但是，要将页面链接添加到导航栏，我必须在 wordpress 上创建一个名为 home 的页面，但是当您单击它时，它会转到`www.example.com/home`而不是`www.example.com`（我理解它为什么这样做）

通常我只会将`href`and ' `home`' 添加到 a`nav bar`以使其执行我需要的操作。然而，我的主题获取导航栏的方式是通过一些 php 代码：

```
<?php wp_nav_menu( array('depth' => 3)); ?> 
```

这将获取`nav bar`并在源代码中显示为：

```
<div class="menu"><ul>
        <li class="page_item page-item-101">
            <a href="http://www.louismoore.net/wordpress/home/">HOME</a></li>
        <li class="page_item page-item-64">
            <a href="http://www.louismoore.net/wordpress/photos/">PHOTOS</a></li>
        <li class="page_item page-item-65">
            <a href="http://www.louismoore.net/wordpress/projects/">PROJECTS</a></li>
</ul></div> 
```

我需要做的就是从`href`主页链接中删除主页，它会转到我想要的页面。但是我不确定如何执行此操作，因为它`nav bar`通过 php 获取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:23:00.733

您根本不需要创建主页。

做这个：

1.  转到外观 > 菜单
2.  创建一个新菜单（您必须为其命名，只需将其命名为“主菜单”或您想要的任何名称）。
3.  从左栏中选择您想要在新菜单中使用的页面，但不要选择您创建的主页。
4.  添加这些页面后，创建一个名为“主页”的自定义菜单选项，并使用域 URL 作为链接（例如[http://www.mydomain.com/](http://www.mydomain.com/)）
5.  将新链接添加到您的菜单并单击并拖动到顶部位置
6.  单击保存菜单，否则您将丢失它
7.  从左上角下拉菜单中的选项中选择新菜单。

您现在应该有一个带有主页链接的自定义菜单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:20:55.730

您应该能够全局更改设置。登录到您的管理部分并浏览到设置 > 阅读。在“首页显示”中选择“静态页面”并选择您的主页作为“首页”下拉项（见屏幕截图）。

您应该能够确认您页面（编辑视图）中的永久链接现在指向您的根域。

![在此处输入图像描述](../Images/76c4d6944b2fd5964b4e2e727f52f983.png)

# javascript - 用 Restify 抽象 Mongoose

> ID：14221345
> 
> 赞同：4
> 
> 时间：2013-01-08T18:09:02.433
> 
> 标签：javascript, node.js, mongodb, mongoose, restify

我很好奇是否有人可以提供一些关于抽象使用 Node.js + Restify + Mongoose 构建的 API 的最佳方法的见解。在来自 MVC / PHP 背景之后，有趣的是发现 Node 应用程序没有字符串/定义的结构。

到目前为止，我的 app.js 文件会自动加载我的 routes.js 文件、所有模型 js 文件等。

困惑主要在于我的路线应该如何与来自 Mongo 的数据进行交互。这是我的代码布局的基本概要。

**应用程序.js**：

```
/**
 * Require Dependencies
 */
var restify    = require('restify')
    , mongoose = require('mongoose')
    , config   = require('./config')
    , routes   = require('./routes');

/**
 * Create Server & Define Settings
 */
var server = restify.createServer({
    name: config.name,
    version: config.version
});

/**
 * Common Handlers
 */
server.use(restify.acceptParser(server.acceptable));
server.use(restify.queryParser());
server.use(restify.bodyParser());
server.use(restify.jsonp());

/**
 * Connect to Mongo Database
 */
 mongoose.connect(config.mongo.uri, function(err) {

    // assign connection to var so we can pass it down the chain
    var db = mongoose.connection;

    // handle connection error
    db.on('error', console.error.bind(console, 'connection error:'));

    // handle connection success
    db.once('open', function callback () {

        /**
         * Start Routing API Calls
         */
        routes.route(server, db);

    });

});

/**
 * Start Server & Bind to Port
 */
server.listen(config.port, function () {
    console.log('%s v%s listening on port %s in %s mode.', server.name, server.version,          config.port, config.env);
}); 
```

**路线.js**：

```
module.exports.route = function(server, db) {

    var Users = require('./models/users.js');

    /**
     * Users
     */

    server.get('/users', function (req, res, next) {

        res.send(Users.list(db, req, res));

        return next();

    });

    server.get('/users/:user_id', function (req, res, next) {

        res.send(Users.get(db, req, res));

        return next();

    });

} 
```

**模型/users.js**：

```
// fake database
var users = [
    {
        name: 'Nick P',
        email: 'nick@domain.com'
    },
    {
        name: 'Zack S',
        email: 'zack@domain.com'
    }
];

exports.list = function(db, req, res) {

return users;

};

exports.get = function(db, req, res) {

    return users[req.params.user_id];

}; 
```

如您所见，我使用的是一个简单对象的“假数据库”。我在哪里/如何引入 Mongoose 层来与我们的数据库通信？我主要关心我应该如何使用[模式](http://mongoosejs.com/docs/guide.html)和导出。任何代码示例或方向都会很棒。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T20:43:10.490

这是我通常使用的一个简单示例`Express`，它与`Restify`. 您可以`Mongoose`以相同的方式管理您的模式，但在您的`Restify`路线中。

**应用程序.js**：

```
var express = require('express');     
var app = express();

app.configure(function () {
    app.use(express.logger('dev'));
    app.use(express.bodyParser());
});

// connection to mongoDB
var mongoose = require('mongoose');
mongoose.connect('mongodb:mongoURI');    

var user = require('./routes/users');

app.get('/users/list', user.list);

app.listen(3000); 
```

**模型/user.js**：

```
var mongoose = require('mongoose')
   ,Schema = mongoose.Schema
   ,ObjectId = Schema.ObjectId;

var userSchema = new Schema({
    id: ObjectId,
    name: {type: String, default: ''},
    email: {type: String, default: ''}
});

module.exports = mongoose.model('User', userSchema); 
```

**路线/users.js**：

```
var User = require('../models/user.js');

exports.list = function(req, res) {
    User.find(function(err, users) {
        res.send(users);
    });
}; 
```

# atk4 - 安装后 Agile Toolkit 500 错误

> ID：14221349
> 
> 赞同：1
> 
> 时间：2013-01-08T18:09:12.527
> 
> 标签：atk4, agiletoolkit

我在 CentOS 6(php 5.3) 灯堆栈上安装了敏捷工具包，当我打开 index.php 起始页时，它给了我 500 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:36:38.230

我想通了。进入错误日志，发现以下错误。

Application.cpp:256 中的 SoftException：文件：/public_html/index.php" 可按组写入

基本上这意味着 index.php 文件的权限需要更改。我将它们更改为 644 并且一切正常。

# c# - asp:textbox.text 不显示

> ID：14221351
> 
> 赞同：0
> 
> 时间：2013-01-08T18:09:19.047
> 
> 标签：c#, asp.net

我有`asp:textbox`一个`id=login`

我正在尝试显示从发布请求中检索到的用户 ID：

```
 protected void Page_Load(object sender, System.EventArgs e)
    {
        login.Text = Request["user"];
    } 
```

在调试期间，我可以看到它`login.Text`填充了用户 ID，但文本从未显示在页面上。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:16:00.480

尝试：

```
protected void Page_Load(object sender, System.EventArgs e)
{
    if (!this.IsPostBack)
    {
        login.Text = Request["user"];
    }
} 
```

# c# - 机器特定的 HttpWebResponse 超时

> ID：14221352
> 
> 赞同：2
> 
> 时间：2013-01-08T18:09:21.643
> 
> 标签：c#, ssl, httpwebrequest, timeout

我有一个非常奇怪的特定于机器的问题。在某些机器上，下面的代码有效，在其他机器上它会冻结，直到 GetResponse() 调用引发超时异常。

```
string url = "https://myserver/myimage.png";

System.Net.ServicePointManager.ServerCertificateValidationCallback = ((sender, certificate, chain, sslPolicyErrors) =>
{
     return true;
});

HttpWebRequest req = (HttpWebRequest)HttpWebRequest.Create(url);
req.Method = "GET";
req.AllowAutoRedirect = false;

try
{
    using (HttpWebResponse resp = (HttpWebResponse)req.GetResponse())
    {
        Console.WriteLine("Success");
    }
}
catch (Exception ex)
{
    Console.WriteLine("Error: " + ex.ToString());
}

Console.ReadKey(); 
```

我在正常工作的机器和失败的机器之间找不到任何操作系统/配置模式。这是一个以管理员用户身份运行的控制台应用程序。

唯一特别的一点是，被访问的 URL 是运行到使用自颁发 SSL 证书的测试服务器中的图像，因此它需要使用上面代码中显示的 ServerCertificateValidationCallback 的解决方法。

我测试的其他 URL 工作正常。

谁能帮我确定此问题的可能原因和解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:21:21.947

像往常一样，一旦弄清楚就很简单了：不存在问题的机器安装了 .Net Framework 4.5。

这很可能是因为 4.5 是4.0[的就地更新](http://www.hanselman.com/blog/NETVersioningAndMultiTargetingNET45IsAnInplaceUpgradeToNET40.aspx)，并且包括对核心库的几个错误修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T13:10:30.533

我在**Win7 和 VS2010**上遇到过同样的问题，它已**通过 windows update** - **update to .NET 4.5.1**
解决了 另一件事值得一提的是它也只发生在特定的服务器上，**而不仅仅是**特定的客户端。
（我会发表评论但没有足够的评级）
**有没有人在不使用 Windows 更新的情况下解决了这个问题？**

# objective-c - 如何在从目标视图控制器返回之前执行操作

> ID：14221357
> 
> 赞同：2
> 
> 时间：2013-01-08T18:09:49.380
> 
> 标签：objective-c, ios, xcode, viewcontroller

我有以下问题：源视图控制器 A 触发目标视图控制器 B
A->B
依次打开相机并开始扫描条形码。
现在，用于推送目标视图控制器 (B) 的 segue 是推送的，因此，我有一个标签栏导航按钮，允许我返回到源视图控制器 (A)。我需要确保在返回源视图控制器 (A) 之前**关闭相机**。
现在不会发生这种情况（我可以在控制台中看到，尽管将控制权传递给了源视图控制器 (A)，但相机仍在重新聚焦）。我怎么做？非常感谢，彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:13:22.470

在视图控制器 B 中，将关闭相机的代码添加到`viewWillDisappear`方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T19:08:15.023

viewWillDisappear 是一种选择。另一种选择是使用`UITabBarController`委托方法

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T18:16:49.920

无论哪种方式 viewDidDisappar 或 viewWillDisappear 都会为您完成，请确保在需要时释放 dealloc 中的 imagepickercontroller 对象。

# javascript - D3.js 的切换按钮

> ID：14221359
> 
> 赞同：2
> 
> 时间：2013-01-08T18:10:01.987
> 
> 标签：javascript, onclick, d3.js, toggle

我有一个按钮，可以在图表上画一条线和该线上的一些点。我有第二个按钮可以删除线和点。我正在尝试对这两个功能使用相同的按钮。

我有一些困难。有没有人见过这样的事情？

这是我的两个功能。提前致谢！

```
 //Draws line and dots
 d3.select(".button1").on("click", function(){
  var path = svg.append("path")   // Add the valueline path. 
          .attr("class", "line")
          .attr("d", valueline(data))
          .attr("stroke", "steelblue")
          .attr("stroke-width", "5")
          .attr("fill", "black");

svg.selectAll("dot")
    .data(data)
.enter().append("circle")
    .attr("class", "firstDots")
    .attr("r", 5)
    .attr("cx", function(d) { return x(d.date); })
    .attr("cy", function(d) { return y(d.close); })

      var totalLength = path.node().getTotalLength();

  path
    .attr("stroke-dasharray", totalLength + "30" * 30)
    .attr("stroke-dashoffset", totalLength)
    .transition()
      .duration(2000)
      .ease("linear")
      .attr("stroke-dashoffset", 0);

     //Removes line and dots
     d3.select(".button2").on("click", function(){
      path.remove();

  var removeDot = svg.selectAll(".firstDots")
                .remove();

     });

}); 
```

起初我尝试在每个点击事件上来回传递按钮的类，它适用于绘制和删除。但只有一次，所以我无法第二次画线。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T18:54:19.387

您可以将`path`变量移到事件处理程序之外：

```
<!DOCTYPE html>
<html>
<head>
    <script src='http://d3js.org/d3.v3.min.js'></script>
</head>
<body>
    <button>Toggle path</button>
    <script>
    var svg = d3.select('body')
        .append('svg')
        .attr('width', 500)
        .attr('height', 250);   

    var path;

    d3.select('button').on('click', function() {

        if ( path ) {
            path.remove();
            // Remove dots
            path = null;
        } else {
            path = svg.append('path')
                .attr('class', 'line')
                .attr('d', 'M100,150 Q200,25 300,150 T500,150')
                .attr('stroke', 'steelblue')
                .attr('stroke-width', '5')
                .attr('fill', 'black');
            // Add dots etc.
        }        
    });
    </script>
</body>
</html> 
```

# python - 为什么“import simplejson”在 Python 2.7.3 代码中失败，但在解释器中却没有？

> ID：14221360
> 
> 赞同：3
> 
> 时间：2013-01-08T18:10:08.873
> 
> 标签：python, python-2.7, simplejson

有两个实例运行 uwgsi 和 nginx 服务器。每个托管一个 Flask 应用程序。两者都在 Python 2.7.3 路径上运行。其中一台服务器为“import simplejson”语句引发 ImportError。两台服务器上的解释器都会毫无怨言地接受这个导入语句。

这是应用程序A的来源：

```
 1 from flask import Flask, request, session, g, redirect, url_for, abort, render_template, flash, views                                                                                                   
  2 import sys
  3 print sys.version
  4 print sys.path
  5 
  6 import os
  7 import functools
  8 import urllib,urllib2
  9 import simplejson
 10 from datetime import datetime, timedelta 
```

以及应用B的来源：

```
 1 from flask import Flask, request, session, g, redirect, url_for, abort, render_template, flash, views                                                                                                   
  2 
  3 import sys
  4 print sys.version          
  5 print sys.path             
  6 
  7 import simplejson  
  8 
  9 import functools 
```

这是服务器 A 的 sys.version 和 sys.path 日志输出：

```
2.7.3 (default, Aug  1 2012, 05:25:23) 
[GCC 4.6.3]
['/srv/www/A/env/local/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg',     
'/srv/www/A/env/local/lib/python2.7/site-packages/pip-1.2.1-py2.7.egg',
'/srv/www/A/env/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg', 
'/srv/www/A/env/lib/python2.7/site-packages/pip-1.2.1-py2.7.egg', 
'/srv/www/A/env/lib/python2.7', 
'/srv/www/A/20120910/src', 
'/usr/lib/python2.7', 
'/usr/lib/python2.7/plat-linux2', 
'/usr/lib/python2.7/lib-tk', 
'/usr/lib/python2.7/lib-old', 
'/usr/lib/python2.7/lib-dynload', 
'/srv/www/A/env/local/lib/python2.7/site-packages', 
'/srv/www/A/env/lib/python2.7/site-packages']
WSGI app 0 (mountpoint='notimportant.com|') ready in 1 seconds on interpreter 0x1b20420 pid: 11069 
```

这是服务器 B 的 sys.version 和 sys.path 日志输出：

```
2.7.3 (default, Aug  1 2012, 05:25:23) 
[GCC 4.6.3]
['/srv/www/B/env/local/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg', 
'/srv/www/B/env/local/lib/python2.7/site-packages/pip-1.2.1-py2.7.egg', 
'/srv/www/B/env/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg', 
'/srv/www/B/env/lib/python2.7/site-packages/pip-1.2.1-py2.7.egg', 
'/srv/www/B/env/lib/python2.7', 
'/srv/www/B/20130105/src', 
'/usr/lib/python2.7', 
'/usr/lib/python2.7/plat-linux2', 
'/usr/lib/python2.7/lib-tk', 
'/usr/lib/python2.7/lib-old', 
'/usr/lib/python2.7/lib-dynload', 
'/srv/www/B/env/local/lib/python2.7/site-packages', 
'/srv/www/B/env/lib/python2.7/site-packages']

Traceback (most recent call last):
  File "/srv/www/B/20130105/src/B.py", line 7, in <module>
    import simplejson
ImportError: No module named simplejson
unable to load app 0 (mountpoint='notimportant.com|') (callable not found or import error) 
```

任何建设性的想法将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T18:11:55.743

`simplejson`是一个外部库；[`json`它作为模块](http://docs.python.org/2/library/json.html)与 Python 2.6 及更高版本捆绑在一起。

只需使用`import json`而不是`import simplejson`，*或者也*安装`simplejson`在服务器 B 上。

如果您将`simplejson`导入替换为`json`，请记住修复文件中的所有引用。或者，像这样导入它：

```
try:
    import simplejson
except ImportError:
    import json as simplejson 
```

它将使用 stdlib`json`模块，重命名，并且您对的所有引用都`simplejson`将继续工作。

# java - Android：以编程方式备份 消息和文件

> ID：14221366
> 
> 赞同：10
> 
> 时间：2013-01-08T18:10:37.670
> 
> 标签：java, android, backup

是否可以备份消息（SMS、MMS、电子邮件）和文件（在内部和外部存储器上）然后使用相同的应用程序恢复它而无需 root/越狱设备？无论可能与否，我会考虑什么方法？[请支持SSCCE，谢谢]

我认为 Android 2.2 (Froyo) 作为我的基础平台。

* * *

更新：2013 年 1 月 30 日

更新我的问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T01:47:38.880

仅仅为了赏金而引用这个问题是不是太过分了？

[如何在 Android 中读取彩信数据？](https://stackoverflow.com/questions/3012287/how-to-read-mms-data-in-android)

请务必在清单中请求 READ_SMS 权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T15:18:47.183

> 是否可以备份消息（SMS、MMS、电子邮件）和文件（在内部和外部存储器上）然后使用相同的应用程序恢复它而无需 root/越狱设备？

并非所有这些。事实上，甚至大部分都不是。

有些东西具有公开的、记录在案的加载和保存数据的方法，例如 Android SDK 中记录的内容提供程序。其中许多并非设计用于备份/恢复目的。例如，如果您尝试备份和恢复联系人，因为其中许多联系人实际上是从其他来源（例如 Facebook）同步的，您可能会搞砸事情。

有些东西具有未记录的、不受支持的加载和保存数据的方法，例如 SMS 内容提供程序。由于您无法准确预测跨多个设备的行为，因此尝试使用这些来源实施备份/恢复机制是不切实际的恕我直言。

出于明显的隐私和安全原因，您无法访问内部存储上的所有其他内容。

# batch-file - 从批处理文件中的可变参数函数返回变量列表

> ID：14221369
> 
> 赞同：3
> 
> 时间：2013-01-08T18:10:42.880
> 
> 标签：batch-file, variadic-functions

我有一个接受可变数量参数的函数。每个参数都是函数将直接修改的引用。这是我调用该函数的方式：

```
set "A=" && set "B=" && set "C="
call :variadic_func A B C
echo [%A%][%B%][%C%]

goto :eof 
```

如果我不使用 setlocal 来限制变量范围，则该函数可以正常工作。该函数创建引用 X、Y 和 Z 并为它们分配 1、2 和 3。当函数返回时，调用者看到它的变量 A、B 和 C 分别为 1、2 和 3。很好。假设这是一个可变参数函数，它会计算出它在运行时有多少个参数。

```
:variadic_func
set "x=%1" && set "y=%2" && set "z=%3"
set "%x%=1" && set "%y%=2" && set "%z%=3"
goto :eof 
```

输出：

```
C:\scratch\variadic_batch>variadic.bat
[1][2][3] 
```

但我想用`setlocal`. 所以这意味着我写给 X、Y 和 Z 的任何值都会在`endlocal`. 如何从函数中获取值？

```
:variadic_func
setlocal
set "x=%1" && set "y=%2" && set "z=%3"
set "%x%=1" && set "%y%=2" && set "%z%=3"

endlocal && (
    call set "%x%=%%%%x%%%%"
    call set "%y%=%%%%y%%%%"
    call set "%z%=%%%%z%%%%"
)

goto :eof 
```

不幸的是，调用上下文接收值`%x%`、`%y%`和`%z%`。我以为上面的代码会这样展开： 1.`%x%`先展开得到`call set A=%%A%%`. 然后调用被执行，它会评估`A=%A%`. 但我最终只是将文本分配给`%A%`变量 A 而不是对其进行评估。

```
C:\scratch\variadic_batch>variadic.bat
[%x%][%y%][%z%] 
```

为什么它不像我预期的那样工作，我该如何解决？

（我只是想`setlocal EnableDelayedExpansion`在函数调用之前做一个，所以当我在函数中执行 endlocal 时，延迟扩展可能仍然可用，但即使这样可行，如果函数不依赖调用者，那就太好了在延迟扩展块中......我什至不知道延迟扩展块是否堆叠）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T23:34:53.080

非常有趣的问题，我很惊讶它是多么容易解决:-)

***编辑*** *- 正如 Aacini 在他的评论中指出的那样，我的原始答案并没有完全回答这个问题。在底部，我有一个可以直接回答问题的版本。我还更新了我的原始答案，以包含我发现的更多限制*

如果您规定要返回的所有变量的名称都以常量前缀开头，则可以非常轻松地返回任意数量的变量。返回变量前缀可以作为参数之一传入。

只需以下行：
`for /f "delims=" %%A in ('set prefix.') do endlocal & set "%%A"`

`set prefix`在任何迭代发生之前，命令的全部结果都会被缓冲。第一次迭代执行返回到 CALL 之前存在的环境状态所需的唯一 ENDLOCAL。随后的 ENDLOCAL 迭代不会造成任何损害，因为 CALLed 函数中的 ENDLOCAL 仅适用于在 CALL 中发出的 SETLOCAL。额外的冗余 ENDLOCAL 将被忽略。

这个非常简单的解决方案有一些非常好的功能：

*   理论上返回的变量数量没有限制。
*   返回的值可以包含几乎任何字符组合。
*   返回值可以接近 8191 字节的理论最大长度。

还有一些限制：

*   返回值不能包含换行符
*   如果返回值的最后一个字符是回车，那么最后的回车将被删除。
*   如果在进行 CALL 时启用了延迟扩展，则包含的任何返回值都`!`将被破坏。
*   我还没有想出一个优雅的方法来将返回的变量设置为未定义。

这是一个返回可变数量值的可变参数函数的简单示例

```
@echo off
setlocal
set varBeforeCall=ok

echo(
call :variadic callA 10 -34 26
set callA
set varBeforeCall

echo(
call :variadic callB 1 2 5 10 50 100
set callB
set varBeforeCall

exit /b

:variadic  returnPrefix  arg1  [arg2 ...]
  @echo off
  setlocal enableDelayedExpansion
  set /a const=!random!%%100

  :: Clear any existing returnPrefix variables
  for /f "delims==" %%A in ('set %1\. 2^>nul') do set "%%A="

  :: Define the variables to be returned
  set "%~1.cnt=0"
  :argLoop
  if "%~2" neq "" (
    set /a "%~1.cnt+=1"
    set /a "%~1.!%~1.cnt!=%2*const"
    shift /2
    goto :argLoop
  )

  :: Return the variables accross the ENDLOCAL barrier
  for /f "delims=" %%A in ('set %1\. 2^>nul') do endlocal & set "%%A"
exit /b 
```

这是一个示例运行结果：

```
callA.1=40
callA.2=-136
callA.3=104
callA.cnt=3
varBeforeCall=ok

callB.1=24
callB.2=48
callB.3=120
callB.4=240
callB.5=1200
callB.6=2400
callB.cnt=6
varBeforeCall=ok 
```

**这是启用延迟扩展时可以安全调用的版本**

通过一些额外的代码，可以消除在启用延迟扩展并且返回值包含时调用函数的限制`!`。

返回值会根据需要进行操作，以`!`在启用延迟扩展时进行保护。代码经过优化，使得相对昂贵的微型计算（特别是 CALL）仅在启用延迟扩展且值包含时才执行`!`。

返回的值仍然不能包含换行符。`!`一个新的限制是，如果返回值包含并且在进行 CALL 时启用了延迟扩展，则所有回车将被删除。

这是一个演示。

```
@echo off
setlocal
set varBeforeCall=ok

echo(
echo Results when delayed expansion is Disabled
call :variadic callA 10 -34 26
set callA
set varBeforeCall

setlocal enableDelayedExpansion
echo(
echo Results when delayed expansion is Enabled
call :variadic callB 1 2 5 10 50 100
set callB
set varBeforeCall

exit /b

:variadic  returnPrefix  arg1  [arg2 ...]
  @echo off

  :: Determine if caller has delayed expansion enabled
  setlocal
  set "NotDelayed=!"

  setlocal enableDelayedExpansion
  set /a const=!random!%%100

  :: Clear any existing returnPrefix variables
  for /f "delims==" %%A in ('set %1\. 2^>nul') do set "%%A="

  :: Define the variables to be returned
  set "%~1.cnt=0"
  :argLoop
  if "%~2" neq "" (
    set /a "%~1.cnt+=1"
    set /a "%~1.!%~1.cnt!=%2*const"
    shift /2
    goto :argLoop
  )
  set %~1.trouble1="!const!\^^&^!%%"\^^^^^&^^!%%
  set %~1.trouble2="!const!\^^&%%"\^^^^^&%%

  :: Prepare variables for return when caller has delayed expansion enabled
  if not defined NotDelayed for /f "delims==" %%A in ('set %1\. 2^>nul') do (
    for /f delims^=^ eol^= %%V in ("!%%A!") do if "%%V" neq "!%%A!" (
      set "%%A=!%%A:\=\s!"
      set "%%A=!%%A:%%=\p!"
      set "%%A=!%%A:"=\q!"
      set "%%A=!%%A:^=\c!"
      call set "%%A=%%%%A:^!=^^^!%%" ^^!
      set "%%A=!%%A:^^=^!"
      set "%%A=!%%A:\c=^^!"
      set "%%A=!%%A:\q="!"
      set "%%A=!%%A:\p=%%!"
      set "%%A=!%%A:\s=\!"
    )
  )

  :: Return the variables accross the ENDLOCAL barrier
  for /f "delims=" %%A in ('set %1\. 2^>nul') do endlocal & endlocal & set "%%A"
exit /b 
```

以及一些示例结果：

```
Results when delayed expansion is Disabled
Environment variable callA not defined
callA.1=780
callA.2=-2652
callA.3=2028
callA.cnt=3
callA.trouble1="78\^&!%"\^&!%
callA.trouble2="78\^&%"\^&%
varBeforeCall=ok

Results when delayed expansion is Enabled
Environment variable callB not defined
callB.1=48
callB.2=96
callB.3=240
callB.4=480
callB.5=2400
callB.6=4800
callB.cnt=6
callB.trouble1="48\^&!%"\^&!%
callB.trouble2="48\^&%"\^&%
varBeforeCall=ok 
```

请注意，无论在进行 CALL 时是否启用了延迟扩展，返回的故障值的格式都是一致的。如果不是因为`!`.

***编辑：这是一个直接回答问题的版本***

原始问题规定每个返回变量的名称都应该在参数列表中提供。我修改了我的算法，在函数中为每个变量名加上一个点。然后我稍微修改了最后的返回 FOR 语句以去除前导点。有一个限制，返回的变量的名称不能以点开头。

此版本包括安全返回技术，允许在启用延迟扩展时调用。

```
@echo off
setlocal disableDelayedExpansion

echo(
set $A=before
set $varBeforeCall=ok
echo ($) Values before CALL:
set $
echo(
echo ($) Values after CALL when delayed expansion is Disabled:
call :variadic $A $B
set $

setlocal enableDelayedExpansion
echo(
set #A=before
set #varBeforeCall=ok
echo (#) Values before CALL:
set #
echo(
echo (#) Values after CALL when delayed expansion is Enabled:
call :variadic #A #B #C
set #

exit /b

:variadic  arg1  [arg2 ...]
  @echo off

  :: Determine if caller has delayed expansion enabled
  setlocal
  set "NotDelayed=!"

  setlocal enableDelayedExpansion

  :: Clear any existing . variables
  for /f "delims==" %%A in ('set . 2^>nul') do set "%%A="

  :: Define the variables to be returned
  :argLoop
  if "%~1" neq "" (
    set /a num=!random!%%10
    set ^".%~1="!num!\^^&^!%%"\^^^^^&^^!%%"
    shift /1
    goto :argLoop
  )

  :: Prepare variables for return when caller has delayed expansion enabled
  if not defined NotDelayed for /f "delims==" %%A in ('set . 2^>nul') do (
    for /f delims^=^ eol^= %%V in ("!%%A!") do if "%%V" neq "!%%A!" (
      set "%%A=!%%A:\=\s!"
      set "%%A=!%%A:%%=\p!"
      set "%%A=!%%A:"=\q!"
      set "%%A=!%%A:^=\c!"
      call set "%%A=%%%%A:^!=^^^!%%" ^^!
      set "%%A=!%%A:^^=^!"
      set "%%A=!%%A:\c=^^!"
      set "%%A=!%%A:\q="!"
      set "%%A=!%%A:\p=%%!"
      set "%%A=!%%A:\s=\!"
    )
  )

  :: Return the variables accross the ENDLOCAL barrier
  for /f "tokens=* delims=." %%A in ('set . 2^>nul') do endlocal & endlocal & set "%%A"
exit /b 
```

和样本结果：

```
($) Values before CALL:
$A=before
$varBeforeCall=ok

($) Values after CALL when delayed expansion is Disabled:
$A="5\^&!%"\^&!%
$B="5\^&!%"\^&!%
$varBeforeCall=ok

(#) Values before CALL:
#A=before
#varBeforeCall=ok

(#) Values after CALL when delayed expansion is Enabled:
#A="7\^&!%"\^&!%
#B="2\^&!%"\^&!%
#C="0\^&!%"\^&!%
#varBeforeCall=ok 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T22:24:15.527

这是一个有趣的话题！如果您事先知道该函数将获得*多少个*变量，您可以在末尾组装适当的行以通过这种方式将值返回给调用者的环境：

```
:variadic_func
setlocal EnableDelayedExpansion
set "x=%1" & set "y=%2" & set "z=%3"
set "%x%=1" & set "%y%=2" & set "%z%=3"
for /F "tokens=1-3" %%a in ("!%x%! !%y%! !%z%!") do (
   endlocal
   set "%x%=%%a" & set "%y%=%%b" & set "%z%=%%c"
)
exit /B 
```

但是，如果变量个数未知，则不能使用以前的方法。

（我曾经`exit /B`终止子程序并且`goto :EOF`仅用于主文件）

无论如何，您的示例并不精确，因为如果您不知道有多少变量，则不能使用固定名称作为“x”、“y”或“z”。处理这种情况的唯一方法是将名称存储在*数组*中，然后处理数组元素。

这样，在函数结束之前，我们可以组装一个“var=value”对列表，这些对将在 endlocal 之后的 FOR 中执行，因此变量将在调用者的环境中定义：

```
@echo off

call :variadic_func One Two Three
echo THREE VARS: One=[%One%] Two=[%Two%] Three=[%Three%] Four=[%Four%] Five=[%Five%]
call :variadic_func One Two Three Four Five
echo FIVE VARS:  One=[%One%] Two=[%Two%] Three=[%Three%] Four=[%Four%] Five=[%Five%]
goto :EOF

:variadic_func
setlocal EnableDelayedExpansion
rem Collect the list of variable names in "var" array:
set i=0
:nextVar
   if "%1" equ "" goto endVars
   set /A i+=1
   set var[%i%]=%1
   shift
goto nextVar
:endVars
rem Assign random numbers to the variables (for example):
for /L %%i in (1,1,%i%) do (
   set !var[%%i]!=!random!
)
rem Assemble the list of "var=value" assignments that will be executed at end:
set assignments=
for /L %%i in (1,1,%i%) do (
   for %%v in (!var[%%i]!) do (
      set assignments=!assignments! "%%v=!%%v!"
   )
)
rem Execute the list of variable assignments in the caller's environment:
endlocal & for %%a in (%assignments%) do set %%a
exit /B 
```

输出：

```
THREE VARS: One=[29407] Two=[21271] Three=[5873] Four=[] Five=[]
FIVE VARS:  One=[30415] Two=[2595] Three=[22479] Four=[13956] Five=[26412] 
```

**编辑：**

我从 dbenham 的解决方案中借用了该方法来返回任意数量的变量，没有任何限制，除了他指出的那些。这是新版本：

```
@echo off

call :variadic_func One Two Three
echo THREE VARS: One=[%One%] Two=[%Two%] Three=[%Three%] Four=[%Four%] Five=[%Five%]
call :variadic_func One Two Three Four Five
echo FIVE VARS:  One=[%One%] Two=[%Two%] Three=[%Three%] Four=[%Four%] Five=[%Five%]
goto :EOF

:variadic_func
setlocal EnableDelayedExpansion
rem Assemble the list of variable names in "var" array:
set i=0
:nextVar
   if "%1" equ "" goto endVars
   set /A i+=1
   set var[%i%]=%1
   shift
goto nextVar
:endVars
rem Assign random numbers to the variables (for example):
for /L %%i in (1,1,%i%) do (
   set !var[%%i]!=!random!
)
rem Complete "var[i]=name" array contents to "var[i]=name=value"
for /L %%i in (1,1,%i%) do (
   for %%v in (!var[%%i]!) do (
      set "var[%%i]=%%v=!%%v!"
   )
)
rem Execute the list of variable assignments in the caller's environment:
for /F "tokens=1* delims==" %%a in ('set var[') do endlocal & set "%%b"
exit /B 
```

安东尼奥

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T20:26:13.130

从值中删除一对百分比。 `call set "%x%=%%%%x%%%%"`进入`call set "%x%=%%%x%%%"`

目前评估如下：

```
:: Here is the base command
call set "%x%=%%%%x%%%%"
:: The single percents are evaluated and the doubles are escaped.
set "A=%%x%%"
:: The doubles are escaped again leaving literal % signs
"A=%x%" 
```

你想要如下：

```
:: Here is the base command
call set "%x%=%%%x%%%"
:: The single percents are evaluated and the doubles are escaped.
set "A=%A%"
:: The single percents are evaluated.
"A=1" 
```

使用该命令进行变量扩展时，由于批处理转义，首先计算`call`单个百分比`%`，然后是双百分比秒。`%%`

批处理命令从左到右读取。因此，当有偶数个`%`符号时`%%%%`，第一个和第三个百分号将用作第二个和第四个的转义字符，没有留下任何百分号用于变量评估。

# android - 如何将连接意图与套接字相关联？

> ID：14221371
> 
> 赞同：4
> 
> 时间：2013-01-08T18:10:50.573
> 
> 标签：android, sockets, network-interface

在 android... 给定一组活动套接字 (<10)，我的广播接收器从 ConnectivityManager 获得一个意图，指示连接状态已更改。如何将意图与受影响的套接字相关联？

我可以从意图中获取 NetworkInfo。

```
final ConnectivityManager cm = 
   (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
final NetworkInfo netinfo = 
   ConnectivityManagerCompat.getNetworkInfoFromBroadcast(cm, aIntent); 
```

这给了我接口类型。我也可以使用套接字来获取网络接口。

```
final InetAddress sourceAddr = socket.getLocalAddress();
final NetworkInterface ninterface = 
     NetworkInterface.getByInetAddress(sourceAddr); 
```

但我认为没有办法从这里开始。

有没有办法让 NetworkInfo 与套接字关联？

我正在考虑手动构建接口名称和网络类型之间的映射。此映射将加载固化初始化。当我运行 ip 或 netstat 命令时，这基本上是我在视觉上所做的。

# email - php邮件未发送到电子邮件

> ID：14221373
> 
> 赞同：2
> 
> 时间：2013-01-08T18:11:06.557
> 
> 标签：email, php

```
 <!DOCTYPE html>

<html>

<head>

    <link href="aadab.css" rel="stylesheet" type="text/css">
    <link rel="icon" href="images/favicon.png">

</head>

<body>

<h2>REGISTRATION FORM</h2>

<div id="form">

<?php

if(isset($_POST['submit']))
    {

        $name= $_POST['name'];
        $phone= $_POST['phone'];
        $email= $_POST['email'];
        $college= $_POST['namecolg'];
        $team= $_POST['team'];
        $im= $_POST['im'];
        $detail= $_POST['detail'];
        $subject= 'Registration for aadab 2013';

        if ( (empty($name)) || (empty($phone)) || (empty($email)) || (empty($college)) || (empty($detail)) )
            {
                echo '<p id="fillall">It is necessary that you fill at least the required fields that are marked with a star</p>';
            }
        else
            {
                $to= 'xyz@gmail.com';
                $con= "<b>Registration Details:</b><br>"."Name: $name<br>"."Contact: $phone<br>"."Email: $email<br>"."College: $college<br>"."Team(if any): $team<br>"."Instant message: $im<br>"."Details of the event(s): $detail<br>";

                $emsg= "Registration Details:\n\n"."Name: $name\n"."Contact: $phone\n"."Email: $email\n"."College: $college\n"."Team(if any): $team\n"."Instant message: $im\n"."Details of the event(s): $detail\n";   

                $msg = wordwrap($emsg,70);

                $mailsend= mail($to, $subject, $msg);

                if ($mailsend)
                {
                    echo "<div class=\"regdet\"><b>Here is what you've submitted:</b><br><br>$con";
                    echo '<br>Congratulations! You have successfully registered! Click <a href="index.html">here</a> to continue.</div>';
                }
                else
                {
                    echo '<div class="regdet"><br>OOPS! Something went wrong. Click <a href="form.php">here</a> to try again.</div>';
                }
            }
    }
else
    {?>
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" autocomplete="on" method="post">

    <table>

        <tr>
            <th><label for="name">Your fullname*</label></th>
            <td><input type="text" id="name" name="name" value="<?php echo $name; ?>" required></td>
        </tr>

        <tr>
            <th><label for="phone">Your contact number*</label></th>
            <td><input type="tel" id="phone" name="phone" value="<?php echo $phone; ?>" required></td>
        </tr>

        <tr>
            <th><label for="email">Your email-id*</label></th>
            <td><input type="email" id="email" name="email" value="<?php echo $email; ?>" required></td>
        </tr>

        <tr>
            <th><label for="namecolg">Name of your college*</label></th>
            <td><input type="text" id="namecolg" name="namecolg" value="<?php echo $college; ?>" required></td>
        </tr>

        <tr>
            <th><label for="team">The name of your team<br>(if registering for a team event)</label></th>
            <td><input type="text" id="team" name="team" value="<?php echo $team; ?>" ></td>
        </tr>

        <tr>
            <th><label for="im">Bbm pin/iMessage id/Whatsapp<br>(if any, separate each id by a comma)</label></th>
            <td><input type="text" id="im" name="im" value="<?php echo $im; ?>" ></td>
        </tr>

        <tr>
            <th><label for="detail">Details of the event(s) you want to register for*</label></th>
            <td><input type="text" id="detail" name="detail" value="<?php echo $detail; ?>" required></td>
        </tr>

        <tr><td colspan="2" style="text-align: center; padding: 40px 0px 0px 0px;"><input type="submit" name="submit" value="Register"></td</tr>

    </table>

</form>

<?php } ?>

</div>

</body>

</html> 
```

这段剧本让我困惑了两天！我找不到不允许我向我的电子邮件 ID 发送电子邮件的错误

firebug 也没有显示任何警告或错误我检查了 phpcodechecker.com 是否有可能的语法错误，但没有出现

在这两种情况下，我都无法从实时服务器和本地 zend 服务器接收邮件，我得到“else”回显语句..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T18:23:17.360

如果您知道您**的**服务器上已设置**并**允许邮件，请尝试发送测试电子邮件以确保您的变量不会产生错误。做这样的事情：

```
$test = mail('your@email.com', 'Test Email', 'Hope this works!');
if ( $test ) { echo 'Yay it worked!'; }
else { echo 'Oh no mail failed!'; } 
```

如果您不知道邮件已设置并启用，请执行以下操作：首先，运行`phpinfo();`并查看 php.ini 文件的路径。接下来，查找表示`disabled_functions`并查看它是否包含单词的行`mail`。如果是这样，只需`mail`从该行中删除关键字，它就会启用 mail() 函数。如果您无法访问您的 php.ini，您可能希望联系您的虚拟主机并询问他们是否可以为您手动启用它。

但是，如果没有设置发送路径，那么让 mail() 工作将变得更加困难。如果是这种情况，您可能需要考虑使用 3rd 方邮件程序，例如[SwiftMailer](http://swiftmailer.org/)。就我个人而言，即使为我启用了 php 的 mail() 功能，我也使用*SwiftMailer*。在我看来，它使标题和其他事情变得更容易。

基于失败的邮件（）功能更新：

在这种情况下，运行`phpinfo();`并查看第 6 行。应该说`Configuration File (php.ini) Path`。然后使用提供的路径来显示 php.ini 文件的内容，方法是：

```
echo str_replace("\n", '<br />', file_get_contents('/PATH_TO_CONFIG/php.ini')); 
```

现在，只需将 PATH_TO_CONFIG 替换为`phpinfo()`函数提供的路径。或者，您可以依靠该`php_ini_loaded_file()`函数返回路径并以这种方式检索它。所以你也可以这样做：

```
echo str_replace("\n", '<br />', file_get_contents(php_ini_loaded_file())); 
```

然后，搜索文档`disabled_functions`并查看是否`mail`在其中。如果没有，我猜你的服务器上没有设置发送路径。

WIN64 更新：尝试将其放入您的配置中：

```
[mail function]
SMTP = mail.yourdomain.com
sendmail_from = admin@yourdomain.com 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T18:43:33.383

首先`mail()`功能无法检查电子邮件是否到达邮箱。但是你的脚本返回了一个错误，`mail()`所以它在服务器端。

*   您的（本地）服务器上是否有运行邮件服务器？
*   php 可以连接到这个邮件服务器吗（如果您正在运行 Windows 服务器，请参阅 php.ini smtp 部分或查看您的 linux 邮件服务器的错误日志）？
*   看看php的错误日志

是的，看看`phpinfo()`两台服务器上的禁用功能。有时，如果您在共享服务器上，则不允许您发送邮件。很可能您无法将邮件从本地域发送到另一个邮件服务器，因为这可能是不合格或非法的域（将被标记为垃圾邮件）

最后但并非最不重要的一点是，下载一个[phpmailer 类](http://sourceforge.net/projects/phpmailer/)，它更易于使用，您不必担心邮件标题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T18:21:41.420

这是在 PHP 中发送邮件的函数：

```
mail(to,subject,message,headers,parameters) 
```

`to`,`subject`并且`message`都是必需的参数。你错过了一个主题。

`headers`并且`parameters`是可选的

有关如何使用该`mail()`功能的更多详细信息，请参阅： http: [//php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

# java - 如何在 File Java 中保留 2 个制表符格式

> ID：14221379
> 
> 赞同：0
> 
> 时间：2013-01-08T18:11:18.850
> 
> 标签：java, string, file-io

我目前正在从文本文件中替换一行中的一些字符串。该文件具有以下内容：

```
public class MyC{
public void MyMethod() {
    System.out.println("My method has been accessed");
    System.out.println("hi");
}
} 
```

我的代码如下：程序只是替换数组中定义的特定行中的字符串。我必须保持原来的缩进。

```
public class ReadFileandReplace {

/**
 * @param args
 * @throws IOException 
 */
public static void main(String[] args) throws IOException {
        boolean l1;
        int num[] = {1, 2, 3};
        String[] values = new String[]{"AB", "BC", "CD"};

        HashMap<Integer,String> lineValueMap = new HashMap();
        for(int i=0 ;i<num.length ; i++) {
            lineValueMap.put(num[i],values[i]);
        }

        FileInputStream fs = new FileInputStream("C:\\Users\\Antish\\Desktop\\Test_File.txt");
        BufferedReader br = new BufferedReader(new InputStreamReader(fs));

        FileWriter writer1 = new FileWriter("C:\\Users\\Antish\\Desktop\\Test_File1.txt");

        int count = 1;
        String line = br.readLine();
        while (line != null) {

             l1 = line.contains("\t");
             System.out.println(l1);
            String replaceValue = lineValueMap.get(count);
            if(replaceValue != null) {
                if(l1==true){
                writer1.write("\t"+replaceValue);}
                 writer1.write(replaceValue);
            } else {
                writer1.write(line);
            }
            writer1.write(System.getProperty("line.separator"));
            line = br.readLine();
            count++;
        }
        writer1.flush();
    }
} 
```

我得到这个输出：

![输出](../Images/573da91ccebaa727f92b92bbbd5b1677.png)

CDCD 的缩进已经丢失，它应该从它在原始文本文件中的原始位置开始。

有人可以指导我如何解决这个问题。1 代码中的 Tabspace 检查工作正常，但如何检查 2 个或更多制表位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:34:06.940

我会将 println() 语句从字符串转换为 char[] 数组并在循环内检查当前字符是否为转义字符 '\t'（制表符）。

可以说，直到'S'的所有字符......

```
System.out.println("My method has been accessed"); 
```

...是选项卡，那么存储在变量中的值等于选项卡的数量，然后应用这些选项卡数量。请记住，当您编写“Test_File”时，您按空格而不是按制表符，您将无法识别那里有多少个制表符。

请将此代码与您的代码进行比较以遵循 Java 约定。

***代码：***

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
/**
 *
 * @author Deathstar
 */
public class MyC
{ 

public static void main(String[] args)
{

  BufferedReader br = null;

  boolean isLineMatched = false;
  int c1 = 0, lineNumArrLength, lineCount = 0;
  int lineNums[] = {1,2};
  char[] toCharArr;
  String sCurrentLine, oldText, addSpaces = "";
  String[] valuesToOverwrite = new String[] {"AB","BC","CD"};

    try 
    {

      lineNumArrLength = lineNums.length;

      br = new BufferedReader(new FileReader("C:\\Users\\jtech\\Documents\\NetBeansProjects\\HelpOthers\\src\\textFiles\\Test_File.txt"));

      FileWriter writer1 = new FileWriter("C:\\Users\\jtech\\Desktop\\Test_File1.txt");

      for (int i = 0;i < (valuesToOverwrite.length -1) ;i++ ) //Loop 3 Times
      { 
          writer1.append(valuesToOverwrite[i]+System.lineSeparator()+System.lineSeparator());
      }

      while ((sCurrentLine = br.readLine()) != null )
      {
          oldText = sCurrentLine; 
          lineCount++;        
          isLineMatched = false;      
          toCharArr = sCurrentLine.toCharArray();

          while (c1 < lineNumArrLength) 
          {
              if (lineCount == lineNums[c1])   
              {
                for (int c2 = 0; c2 < toCharArr.length; c2++)
                {
                    if (toCharArr[c2] == ' ')
                    {
                        addSpaces += " ";
                    }
                }
                      String newText = sCurrentLine.replace(oldText, addSpaces+valuesToOverwrite[lineCount]);
                      writer1.append(newText+System.lineSeparator());
                      isLineMatched = true;
                      addSpaces = "";
              } 
              c1++; 

          }

          if (isLineMatched == false)
          {
            writer1.append(oldText+System.lineSeparator());
          }

          c1 = 0;
      }

      writer1.close();

    } 
    catch (IOException e) 
    {
      e.printStackTrace();
    } 
    finally 
    {
      try 
      {
        if (br != null)
        {
              br.close();
        }
      } 
      catch (IOException ex) 
      {
        ex.printStackTrace();
      }
    }    
  }        

} 
```

# neo4j - Neo4j - Java 堆空间错误 - TraversalDescription.traverse(Node);

> ID：14221381
> 
> 赞同：0
> 
> 时间：2013-01-08T18:11:29.113
> 
> 标签：neo4j

如果 maxDepth 为 3 代码运行良好，如果 maxDepth = 4 此代码挂起@对 td.traverse(start) 的调用（~第 38 行）& 然后我得到：

线程“主”java.lang.OutOfMemoryError 中的异常：java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:100) 处 java.util.Arrays.copyOf(Arrays.java:2882) 处的 Java 堆空间。 AbstractStringBuilder.append(AbstractStringBuilder.java:515) at java.lang.StringBuilder.append(StringBuilder.java:189) at com.sun.jersey.core.util.ReaderWriter.readFromAsString(ReaderWriter.java:172) at com.sun .jersey.core.util.ReaderWriter.readFromAsString(ReaderWriter.java:157) 在 com.sun.jersey.core.provider.AbstractMessageReaderWriterProvider.readFromAsString(AbstractMessageReaderWriterProvider.java:114) 在 com.sun.jersey.core.impl.provider .entity.StringProvider.readFrom(StringProvider.java:73) 在 com.sun.jersey.core.impl.provider.entity.StringProvider.readFrom(StringProvider.java:58) 在 com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:552) 在 com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:505) 在 org.neo4j.rest .graphdb.RequestResult.extractFrom(RequestResult.java:87) 在 org.neo4j.rest.graphdb.ExecutingRestRequest.post(ExecutingRestRequest.java:138) 在 org.neo4j.rest.graphdb.ExecutingRestAPI.traverse(ExecutingRestAPI.java:486 ) 在 org.neo4j.rest.graphdb.traversal.RestTraversal.traverse(RestTraversal.java:162) 在 com.tr.cmg.alloy 的 org.neo4j.rest.graphdb.RestAPIFacade.traverse(RestAPIFacade.java:202)。 dao.psd.RelationalPathSearchDAO.executeRelationalPathSearch(RelationalPathSearchDAO.java:38) 在 com.tr.cmg.alloy.dao.psd.RelationalPathSearchDAO.main(RelationalPathSearchDAO.java:115)java:552) 在 com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:505) 在 org.neo4j.rest.graphdb.RequestResult.extractFrom(RequestResult.java:87) 在 org.neo4j.rest .graphdb.ExecutingRestRequest.post(ExecutingRestRequest.java:138) 在 org.neo4j.rest.graphdb.ExecutingRestAPI.traverse(ExecutingRestAPI.java:486) 在 org.neo4j.rest.graphdb.RestAPIFacade.traverse(RestAPIFacade.java:202 ) 在 org.neo4j.rest.graphdb.traversal.RestTraversal.traverse(RestTraversal.java:162) 在 com.tr.cmg.alloy.dao.psd.RelationalPathSearchDAO.executeRelationalPathSearch(RelationalPathSearchDAO.java:38) 在 com.tr。 cmg.alloy.dao.psd.RelationalPathSearchDAO.main(RelationalPathSearchDAO.java:115)java:552) 在 com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:505) 在 org.neo4j.rest.graphdb.RequestResult.extractFrom(RequestResult.java:87) 在 org.neo4j.rest .graphdb.ExecutingRestRequest.post(ExecutingRestRequest.java:138) 在 org.neo4j.rest.graphdb.ExecutingRestAPI.traverse(ExecutingRestAPI.java:486) 在 org.neo4j.rest.graphdb.RestAPIFacade.traverse(RestAPIFacade.java:202 ) 在 org.neo4j.rest.graphdb.traversal.RestTraversal.traverse(RestTraversal.java:162) 在 com.tr.cmg.alloy.dao.psd.RelationalPathSearchDAO.executeRelationalPathSearch(RelationalPathSearchDAO.java:38) 在 com.tr。 cmg.alloy.dao.psd.RelationalPathSearchDAO.main(RelationalPathSearchDAO.java:115)extractFrom(RequestResult.java:87) at org.neo4j.rest.graphdb.ExecutingRestRequest.post(ExecutingRestRequest.java:138) at org.neo4j.rest.graphdb.ExecutingRestAPI.traverse(ExecutingRestAPI.java:486) at org.neo4j .rest.graphdb.RestAPIFacade.traverse(RestAPIFacade.java:202) 在 org.neo4j.rest.graphdb.traversal.RestTraversal.traverse(RestTraversal.java:162) 在 com.tr.cmg.alloy.dao.psd.RelationalPathSearchDAO .executeRelationalPathSearch(RelationalPathSearchDAO.java:38) 在 com.tr.cmg.alloy.dao.psd.RelationalPathSearchDAO.main(RelationalPathSearchDAO.java:115)extractFrom(RequestResult.java:87) at org.neo4j.rest.graphdb.ExecutingRestRequest.post(ExecutingRestRequest.java:138) at org.neo4j.rest.graphdb.ExecutingRestAPI.traverse(ExecutingRestAPI.java:486) at org.neo4j .rest.graphdb.RestAPIFacade.traverse(RestAPIFacade.java:202) 在 org.neo4j.rest.graphdb.traversal.RestTraversal.traverse(RestTraversal.java:162) 在 com.tr.cmg.alloy.dao.psd.RelationalPathSearchDAO .executeRelationalPathSearch(RelationalPathSearchDAO.java:38) 在 com.tr.cmg.alloy.dao.psd.RelationalPathSearchDAO.main(RelationalPathSearchDAO.java:115)202) 在 org.neo4j.rest.graphdb.traversal.RestTraversal.traverse(RestTraversal.java:162) 在 com.tr.cmg.alloy.dao.psd.RelationalPathSearchDAO.executeRelationalPathSearch(RelationalPathSearchDAO.java:38) 在 com.tr .cmg.alloy.dao.psd.RelationalPathSearchDAO.main(RelationalPathSearchDAO.java:115)202) 在 org.neo4j.rest.graphdb.traversal.RestTraversal.traverse(RestTraversal.java:162) 在 com.tr.cmg.alloy.dao.psd.RelationalPathSearchDAO.executeRelationalPathSearch(RelationalPathSearchDAO.java:38) 在 com.tr .cmg.alloy.dao.psd.RelationalPathSearchDAO.main(RelationalPathSearchDAO.java:115)

```
package com.tr.cmg.alloy.dao.psd;

import java.util.ArrayList;

import org.neo4j.graphdb.Direction;
import org.neo4j.graphdb.Node;
import org.neo4j.graphdb.Path;
import org.neo4j.graphdb.Relationship;
import org.neo4j.graphdb.traversal.TraversalDescription;
import org.neo4j.rest.graphdb.index.RestIndex;
import org.neo4j.rest.graphdb.traversal.RestTraversalDescription;

import com.tr.cmg.alloy.aspects.audit.DaoTierAuditAspect;
import com.tr.cmg.alloy.dao.psd.relationship.RelationType;
import com.tr.cmg.alloy.dao.support.neo4j.Neo4jDaoSupport;
import com.tr.cmg.alloy.domain.psd.NodeType;
import com.tr.cmg.alloy.services.psd.rps.RelationalPathSearch;
import com.tr.cmg.alloy.services.psd.rps.RelationalPathSearchResult;

public class RelationalPathSearchDAO extends Neo4jDaoSupport{

public RelationalPathSearchResult executeRelationalPathSearch(
        RelationalPathSearch rps) {

    RestIndex<Node> personIndex = API.getIndex(NodeType.PERSON.name());

    Node start = personIndex.get("KEY", rps.getPerson1PermId()).getSingle();
    Node end = personIndex.get("KEY", rps.getPerson2PermId()).getSingle();

    Iterable<Node> nodes = null;
    Iterable<Relationship> relationships = null;

    if (start != null && end != null) {

        TraversalDescription td = createTraversalDescription(rps);
        nodes = null;
        relationships = null;
        for (Path position : td.traverse(start)) {

            // Log audit record info
            DaoTierAuditAspect
                    .storeSqlStatement("Relational Path Neo4j Query: "
                            + rps.getPerson1PermId() + " -> "
                            + rps.getPerson2PermId());
            DaoTierAuditAspect.storeSqlParameters("");

            System.out.println(position);

            if (position.endNode().equals(end)) {
                nodes = position.nodes();
                relationships = position.relationships();
                break;
            }
        }

        if(nodes == null) {
            ArrayList<Node> x = new ArrayList<Node>();
            x.add(start);
            x.add(end);
            nodes = x;
        }
    }

    return new RelationalPathSearchResult(nodes, relationships);

}

private TraversalDescription createTraversalDescription(RelationalPathSearch rps) {

    RestTraversalDescription rtd = (RestTraversalDescription) API.createTraversalDescription();
    rtd.maxDepth(4);

    return  rtd
            .depthFirst()
            .relationships(RelationType.IsDirector, Direction.BOTH)
            .relationships(RelationType.HasGraduatedFrom, Direction.BOTH)
            .relationships(RelationType.IsOfficer, Direction.BOTH)
            .relationships(RelationType.IsUnknownOfficerDirectorAt, Direction.BOTH)
            .relationships(RelationType.IsInsiderAt, Direction.BOTH)
            .relationships(RelationType.IsEquityAnalystAt, Direction.BOTH)
            .relationships(RelationType.IsMemberOrChairmanOf, Direction.BOTH)
            .relationships(RelationType.IsChiefInvestmentOfficerAt, Direction.BOTH)
            .relationships(RelationType.IsDirectorOfResearchAt, Direction.BOTH)
            .relationships(RelationType.IsPortfolioManagerAt, Direction.BOTH)
            .relationships(RelationType.IsTraderAt, Direction.BOTH)
            .relationships(RelationType.IsEconomistAt, Direction.BOTH)
            .relationships(RelationType.IsSalesProfessionalAt, Direction.BOTH)
            .relationships(RelationType.IsStrategistAt, Direction.BOTH)
            .relationships(RelationType.IsExecutiveOfficerAt, Direction.BOTH)
            .relationships(RelationType.IsShariahSupervisoryAt, Direction.BOTH)
            .relationships(RelationType.IsNonExecutiveAt, Direction.BOTH)
            .relationships(RelationType.IsVEExecutive, Direction.BOTH)
            .relationships(RelationType.IsProvidingResearchOn, Direction.BOTH)
            .relationships(RelationType.IsAnalystAt, Direction.BOTH)
            .relationships(RelationType.IsReuterMessengerUserAt, Direction.BOTH)
            .relationships(RelationType.IsProvidingAssetClassCoverageOn, Direction.BOTH)
            .relationships(RelationType.IsSpeakingLanguageOf, Direction.BOTH)
            .relationships(RelationType.IsProvidingGeographyCoverageOf, Direction.BOTH)
            .relationships(RelationType.IsUnknownSellSideBuySideAt, Direction.BOTH)
            .relationships(RelationType.IsUnknownInsiderAt, Direction.BOTH)
            .relationships(RelationType.IsUnknownResearchAnalystAt, Direction.BOTH)
            .relationships(RelationType.IsUnknownVEExecutiveAt, Direction.BOTH)
            .relationships(RelationType.IsUnknownReutersMessengerUserAt, Direction.BOTH)
            .relationships(RelationType.IsUnknownStreetEventsUserAt, Direction.BOTH);
}

public static void main(String[] args) {

    RelationalPathSearchDAO dao = new RelationalPathSearchDAO();

    RelationalPathSearch rps = new RelationalPathSearch();
    rps.setPerson1PermId("34414591164");
    rps.setPerson2PermId("34414710307");

    RelationalPathSearchResult result = dao.executeRelationalPathSearch(rps);
    result.toJSON();

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:00:16.873

您需要增加 JVM[最大堆内存大小](https://stackoverflow.com/questions/5374455/what-does-java-option-xmx-stand-for)。

您当前的 JVM 内存设置是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:33:18.167

看起来您正在尝试查找两个节点之间的路径，对吧？如果您通过 REST API 使用 allPaths 或 allSimplePaths 算法，它会更快并且需要更少的内存，因为它是双向遍历。

不确定 RestGraphDatabase 是否支持它。无论哪种方式，您都可以查看[http://docs.neo4j.org/chunked/stable/rest-api-graph-algos.html](http://docs.neo4j.org/chunked/stable/rest-api-graph-algos.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T14:35:11.540

解决了，采用的方法将整个数据库拉入 json 并通过网络执行应该在 db 内运行的操作。

已在此[GitHub 问题](https://github.com/neo4j/java-rest-binding/issues/32)中解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T09:24:27.247

您可以使用“-XMX”参数增加堆空间的内存。你也可以参考这个...[如何为java增加内存中的堆空间](https://stackoverflow.com/questions/5374455/what-does-java-option-xmx-stand-for)

# jquery - 使用 :not 选择器进行 jQuery 定位

> ID：14221382
> 
> 赞同：2
> 
> 时间：2013-01-08T18:11:30.197
> 
> 标签：jquery, targeting

我正在尝试获取一个元素的 html，但它的一个子元素除外。

我已经根据其他问题[[1]](https://stackoverflow.com/questions/1467226/jquery-target-all-except) [[2]](https://stackoverflow.com/questions/1535331/how-to-hide-all-elements-except-one-using-jquery)（等）进行了尝试，但是 :not selected 似乎不适用于我的情况。

看到这个：http: [//jsfiddle.net/GyKr6/1/](http://jsfiddle.net/GyKr6/1/)

在这种情况下，这按预期工作

```
$("#previewLink .toRemove").remove(); 
```

但我想要生成的html。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T18:12:52.140

```
$("#previewLink").clone().find(".toRemove").remove().end().html(); 
```

# php - 将日期插入 MySQL 的最佳方法

> ID：14221384
> 
> 赞同：2
> 
> 时间：2013-01-08T18:11:41.047
> 
> 标签：php, mysql

我得到一个文本文件转储，我正在通过 PHP 处理到 MySQL，日期格式看起来像“2012 年 7 月”或“2012 年 12 月”等。我想以一种我可以选择记录的方式将这些插入数据库在未来按日期。有什么方法可以先将这些转换为正确的格式，或者有什么方法可以让 SQL 通过函数自动转换？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T18:13:14.877

> 有什么方法可以先将这些转换为正确的格式，或者有什么方法可以让 SQL 通过函数自动转换？

使用 MySQL 将其保持在数据库级别[`STR_TO_DATE()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_str-to-date)。

例如：

```
SELECT STR_TO_DATE('Dec 2012','%b %Y'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:14:22.283

如果我没记错的话，日期时间 SQL 列的格式是

```
date( "Y-m-d H:i:s", strtotime( $date ) ); 
```

例如，$date 是 2012 年 12 月。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T18:14:31.003

这个：

```
<?php
echo date("Y/m/d") . "<br>";
echo date("Y.m.d") . "<br>";
echo date("Y-m-d");
?> 
```

会输出如下内容：

```
2009/05/11
2009.05.11
2009-05-11 
```

以前尝试过，只是问...有时会有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T18:20:47.507

最好的方法是根据 MySQL 的标准格式生成数据时间：`date("Y-m-d H:i:s")`

下面是一个转换

```
$datetime = strtotime('Dec 2012');
$mysqldate = date("m/d/y", $datetime); 
```

# python - Jinja2 的 HTML 内迭代错误

> ID：14221391
> 
> 赞同：0
> 
> 时间：2013-01-08T18:12:03.177
> 
> 标签：python, google-app-engine, jinja2

我正在为我正在开发的应用程序进行联合登录。代码已经以不那么漂亮的方式工作了，但是当我尝试通过进行 in-html 迭代而不是迭代来美化事情时，html 我一直在收到这个错误。

```
 File "/home/wes/PycharmProjects/Unit3/templates/login.html", line 26, in top-level    template code
{% for p in new_providers.keys() %}
 UndefinedError: 'new_providers' is undefined 
```

这是代码（提供者是一个单独的键：值字典）

```
new_providers = {}
for name in providers.keys():
    new_providers[name] = users.create_login_url(federated_identity=providers[name])

else:
     error = "You are not logged in"
     self.render("login.html", error=error, new_providers = new_providers) 
```

最后，这里是渲染字典的 HTML 和 Jinja。这就是我怀疑有问题的地方，但对我来说似乎没有什么明显的......

```
{% for p in new_providers.keys() %}
        <a href="{{ new_providers[p] }}">{{ p }}</a>
        <br>
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:48:18.803

好的，所以我不知道为什么会这样，但这是解决问题的更改（更改在 IF 条件的 self.render

原始代码：

```
class Login(Handler):
def get(self):
    user = users.get_current_user()

    if user:
        username = user.nickname()
        log_out = users.create_logout_url(self.request.uri)
        self.write(users.create_login_url(federated_identity='https://www.google.com/accounts/o8/id'))

        self.render("login.html", log_out=log_out, username=username)
    else:
        error = "You are not logged in"
        self.render("login.html", error=error, new_providers=new_providers) 
```

修改后的代码

```
class Login(Handler):
def get(self):
    user = users.get_current_user()

    if user:
        username = user.nickname()
        log_out = users.create_logout_url(self.request.uri)
        self.write(users.create_login_url(federated_identity='https://www.google.com/accounts/o8/id'))

        self.render("login.html", log_out=log_out, username=username, **new_providers=new_providers**)
    else:
        error = "You are not logged in"
        self.render("login.html", error=error, new_providers = new_providers) 
```

# javascript - 我将如何使用 AngularJS ng-repeat 来重复这个结构

> ID：14221392
> 
> 赞同：2
> 
> 时间：2013-01-08T18:12:04.327
> 
> 标签：javascript, angularjs

我将如何使用 AngularJS ng-repeat 来重复这个结构？

```
<div class=black></div>
<div class=white></div>
<div class=black></div>
<div class=white></div> 
```

...等（不带标签）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T18:29:25.970

如果您正在迭代一系列项目并且需要交替的黑色/白色背景，那么您可以这样做：

```
<div ng-repeat="item in items" ng-class-odd="'black'" ng-class-even="'white'">
</div> 
```

[http://jsfiddle.net/fNCnr/1/](http://jsfiddle.net/fNCnr/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:21:07.513

```
<div ng-repeat="color in ['black','white']" class="{{color}}"></div> 
```

输出：

```
<div ng-repeat="color in ['black','white']" class="black"></div>
<div ng-repeat="color in ['black','white']" class="white"></div> 
```

或者（更详细）：

```
<div ng-repeat="color in ['black','white']" ng-class="color"></div> 
```

输出：

```
<div ng-repeat="color in ['black','white']" ng-class="color" class="ng-scope black"></div>
<div ng-repeat="color in ['black','white']" ng-class="color" class="ng-scope white"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T18:23:24.693

在您的控制器中，您定义了一个颜色列表：

```
$scope.colors = ['black', 'white', 'black', 'white', 'black', 'white', ...]; 
```

html:

```
<div ng-repeat="color in colors" ng-class="color"></div> 
```

请参阅[jsFiddle](http://jsfiddle.net/asgoth/GKMuC/)。

# python - 浏览器与 python 脚本交互

> ID：14221395
> 
> 赞同：0
> 
> 时间：2013-01-08T18:12:20.100
> 
> 标签：python, user-interaction

我正在开发用户编写程序并从浏览器执行它们的小型应用程序。首先想到使用 PHP，但我没有找到与正在运行的程序进行交互的方法。然后我找到了 Python，现在我正在使用 subprocess.Popen。现在一切都在 Python Interpreter 中运行良好。现在如何将输出发送到浏览器并从中获取输入并将其发送到解释器？

正在考虑管道，但一旦我调用通信（）管道关闭。所以这是最好的方法。

我想到的另一种方法是使用 HTML 为现有程序创建 GUI。可能吗？

# flash - 使用 Flash IDE 而不是 Flash Builder 编译 Starling

> ID：14221402
> 
> 赞同：0
> 
> 时间：2013-01-08T18:12:37.230
> 
> 标签：flash, flash-builder, starling-framework

我构建的几乎所有应用程序都设计繁重，因此使用 Flash IDE 编译对我来说是有意义的。然而，我见过的大多数 Starling 演示都需要使用嵌入的 png 来创建纹理对象，并且是在 Flash Builder 中编译的。有什么理由我不能（或不应该）使用 Flash IDE 编译 Stage3d (Starling) 项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:40:02.060

不，没有理由不应该使用 Flash IDE 来构建 Stage3d 应用程序（除了 Flash IDE 对于处理复杂项目非常不方便，但这只是我的看法）。

是的，您将无法使用 [Embed] 元标记嵌入资产。但实际上这不是必需的——这只是最简单的方法。您可以从外部文件加载资产（这是一种首选方式，因为它可以减少 RAM 消耗，请参阅移动 Starling 应用程序示例）。或者您可以使用 Flash 库（当然，对于每个资产，您应该检查“Export for ActionScript”选项并在“属性”对话框中分配唯一的类名）。

但是，我认为在编译设计繁重的应用程序中使用 Flash IDE 不会简化您的工作，因为无论如何您都必须将所有纹理收集到单个图集（或多个图集）中。从库中获取图集（这只是一个图像，因为 GPU 不支持矢量纹理）或从外部文件加载它并没有太大的区别。就个人而言，我使用 Flash IDE 来制作资产，使用 IntelliJ IDEA 来编写、构建和调试代码。

# javadoc - Javadoc 链接限定

> ID：14221403
> 
> 赞同：0
> 
> 时间：2013-01-08T18:12:38.570
> 
> 标签：javadoc

我正在寻找一种构建配置，它可以通过以下方式修改默认的 Javadoc 链接呈现。希望答案是灵活的，可以满足 Ant、Maven 和其他可能正在寻找相同解决方案的用户的需求。

对于`Foo`包含（或继承）字段的类中的文档`bar`，以下 Javadoc 标记正确解析为文档中的链接。

*   `{@link Foo#bar}`呈现为[`Foo.bar`](https://stackoverflow.com/questions/14221403/javadoc-link-qualification)
*   `{@link Foo#bar bar}`呈现为[`bar`](https://stackoverflow.com/questions/14221403/javadoc-link-qualification)
*   `{@link #bar}`呈现为[`Foo.bar`](https://stackoverflow.com/questions/14221403/javadoc-link-qualification)
*   `{@link #bar Foo.bar}`呈现为[`Foo.bar`](https://stackoverflow.com/questions/14221403/javadoc-link-qualification)

相反，我有兴趣根据以下规则生成带有链接呈现的文档。

*   `{@link Foo#bar}`呈现为[`Foo.bar`](https://stackoverflow.com/questions/14221403/javadoc-link-qualification)
*   `{@link Foo#bar bar}`呈现为[`bar`](https://stackoverflow.com/questions/14221403/javadoc-link-qualification)
*   `{@link #bar}`呈现为**← 此规则已更改**[`bar`](https://stackoverflow.com/questions/14221403/javadoc-link-qualification)
***   `{@link #bar Foo.bar}`呈现为[`Foo.bar`](https://stackoverflow.com/questions/14221403/javadoc-link-qualification)**

# regex - 如何使用 REGEX 创建 Salesforce 时间验证？

> ID：14221410
> 
> 赞同：0
> 
> 时间：2013-01-08T18:13:06.497
> 
> 标签：regex, validation, salesforce

我正在尝试在 Salesforce 中构建一种打孔卡/调度系统。我已经获得了使用单个输入屏幕创建多个记录的“可视化工作流程”。

我现在需要通过添加 REGEX 验证规则来强制以单一格式**(HH:MM am/pm)**输入时间来证明它是白痴。

我为 SLQ 找到了这段 REGEX

```
((([0]?[1-9]|1[0-2])(:|\.)[0-5][0-9]((:|\.)[0-5][0-9])?( )?(AM|am|aM|Am|PM|pm|pM|Pm))|(([0]?[0-9]|1[0-9]|2[0-3])(:|\.)[0-5][0-9]((:|\.)[0-5][0-9])?)) 
```

（我删除了开头的 ^ 和结尾的 $）

但是在 Salseforce 中输入它时出现错误

> 公式表达式无效：语法错误。成立 '['。

任何帮助将不胜感激。（对不起，如果这有点长）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:19:27.297

那里发布的正则表达式旨在处理许多不同的时间格式。看起来你的目标是不那么灵活，所以也许对你来说更好的正则表达式会更简单，比如

```
[0-1]?[0-9]:[0-5][0-9] [A|P]M" 
```

这将允许像

09:08 PM

上午 12 点 49 分

下午 1 点 32 分

但会不允许这样的事情

23:42

下午 23:42

下午 1 点 09 分

一般来说，使用正则表达式，最好从像这样简单的东西开始，然后对其进行扩展。

现在，因为您想在验证规则中使用它，所以您必须记住，当正则表达式*不*匹配时，您希望此规则触发（因为那是您想要抛出错误的时候，当有人输入了无效的时间格式时）。所以你的规则实际上看起来像

```
NOT(REGEX( Time__c , "[0-1]?[0-9]:[0-5][0-9] [A|P]M")) 
```

# iphone - 使用其他项目的资源

> ID：14221416
> 
> 赞同：0
> 
> 时间：2013-01-08T18:13:15.667
> 
> 标签：iphone, objective-c, xcode

**用例**

1.  带有自定义 UI 控件集合的静态库
2.  自定义 UI 的 PNG 是静态 Lib 项目的一部分
3.  另一个可执行项目与静态库链接以使用它的 UI 集合

**问题**

IDE 似乎不~知道~ 自动嵌入与静态库关联的资源（例如 PNG 文件）。

*   除了直接将它们添加到项目中之外，还有什么方法可以将这些静态 Lib 资源嵌入到主可执行项目中？
*   IDE 有什么方法可以自动检测依赖关系并将资源包含在生成的可执行文件中？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:03:57.377

没有任何方法可以仅通过链接到该库来自动将资源从静态库复制到另一个目标（就像您可以使用框架一样）。

我能找到的最佳解决方法是将库的资产放在以“.bundle”结尾的目录中（例如，MyLibraryResources.bundle）。Xcode（和 Finder）会将此目录视为一个单元。然后，使用该库的目标只需将单个资源（即包）添加到项目中。这并不完美，但很容易。

在您的库中，当引用包中的资源时，您只需执行以下操作：

```
NSString *pathToSomeImage = [[NSBundle mainBundle] pathForResource:@"MyLibraryResources.bundle/SomeImage.png" ofType:nil]; 
```

由于 Finder 对待它们的方式与普通目录不同，因此使用 Bundle 可能会有些痛苦。您可以通过在库项目中添加一个目标来更轻松地处理它们，该目标通过复制您的资源来组装捆绑包。

# android - Android - 跨设备/制造商的 Stagefright 框架一致性

> ID：14221419
> 
> 赞同：3
> 
> 时间：2013-01-08T18:13:23.457
> 
> 标签：android, h.264, stagefright

`Stagefright`跨制造商和/或设备 的使用是否有任何保证的一致性？

尽管 Android`Stagefright`是在 2.x 中引入的，但有什么东西阻止了制造商对其进行更改？从 ICS 开始，Android 已经正式添加了对（至少是其中的一个子集）的[原生 API 支持](http://developer.android.com/about/versions/android-4.0-highlights.html#DeveloperApis)`OpenMAX AL 1.0.1`，但我希望能够支持旧设备。

我正在尝试从 H.264 视频中获取`SEI`( `NAL`) 用户数据，并且我正在尝试找出获取它的最佳方法。是`Stagefright`一种体面的方法，还是不能保证跨设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T09:22:33.607

我不知道是否体面，但它是可行的。如果使用 sw dec，您可以从 h264bsd 中捕获 SEI，否则是从 AAVCAssembler 或其他来源捕获 NAL，另一个问题是您要将抓取的 SEI 发送到哪里（或者如何 - 我猜这个不太体面的部分开始了）。

# version-control - Visual Studio 2012 项目已修改外部环境提示

> ID：14221420
> 
> 赞同：11
> 
> 时间：2013-01-08T18:13:23.470
> 
> 标签：version-control, tfs, visual-studio-2012

我有一个包含多个项目的解决方案，其中一个是网站。每次打开解决方案，VS都会抱怨网站项目在环境外被修改了。我已尝试按照链接问题中的建议删除 .suo 文件，并在下次打开解决方案时修复它，但之后我每次都会收到提示。

这里有一个[类似的问题](https://stackoverflow.com/questions/12166007/visual-studio-2012-says-website-projects-project-file-is-edited-outside-of-envi)，但那里的建议对我不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-01T11:45:38.383

您的解决方案是否放置在映射的**网络驱动器上**？

**解决方案：将您的项目/解决方案移动到本地驱动器。**

我遇到了类似的问题，从我的本地驱动器打开它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-19T13:57:46.563

我知道这是一个老问题，但考虑到我们的行业如何朝着远程通勤方向发展，我想我会把它扔在那里。

我在一家 97% 的时间都在家工作的国家机构工作。我使用 VPN，我们几乎所有事情都使用 o365。我们目前正在使用 VSS，并且最终将转向 VSTS 进行源代码控制，这非常棒......但是如果机器出现故障，我们会使用 OneDrive 来同步/保护我们的本地代码实例，这样如果我们的笔记本电脑死机并且我们忘记登记了……这不是世界末日。

即使它在技术上不是网络位置（它位于我的用户配置文件中的文件夹中），它仍然会在文件夹同步时定期给我“检测到文件更改”消息。

由于每 10 分钟左右处理一次真的很烦人，我实际上已经关闭了它。（VS2012 工具 > 选项 > 环境 > 文档）

# php - 合并来自两个查询输出的数据

> ID：14221423
> 
> 赞同：2
> 
> 时间：2013-01-08T18:13:41.207
> 
> 标签：php, mysql, sql

我想在我的网站上创建一个类似分享的功能。我有这些桌子

用户

1.  用户身份
2.  全名
3.  用户名等

帖子

1.  post_id
2.  用户身份
3.  邮政
4.  orig_post_id
5.  日期

USER_FOLLOWERS

1.  follow_id
2.  用户身份
3.  追随者ID
4.  日期

我有这个查询来从当前用户关注的用户中选择帖子。

```
//user_id from session data
$user_id = $this->session->userdata('user_id');

$sql = "SELECT  p.*,u.fullname,u.username
        FROM    (
                 SELECT  user_id
                 FROM    user_followers
                 WHERE   follower_id = $user_id
                 UNION ALL
                 SELECT  $user_id
                ) uf
        JOIN    posts p
        ON      p.user_id = uf.user_id
        JOIN users u
        ON     u.user_id = p.user_id
        ORDER BY p.post_date DESC";

$query = $this->db->query($sql);

 if ($query) {

            foreach ($query->result() as $row) {
                $branch_id = $row->orig_post_id;
                $post_array[] = array(
                    'post_id' => $row->post_id,
                    'user_id' => $row->user_id,
                    'post' => $row->post,
                    'is_branch_of_id' => $branch_id,
                    'post_date' => $row->post_date,
                    'fullname' => $row->fullname,
                    'username' => $row->username
                );

             #i would explain what i'm tying to do here below

      if ($branch_id != 0) {
            $branch_array = array();
            #this contains the orignal posts user id
            $user_branch_id = $this->postid_return_user_id($branch_id);
            $branch_data = $this->branch_query($user_branch_id, $branch_id);
            $branch_array[] = array(
                'branch_uname' => $branch_data->username,
                'branch_fname' => $branch_data->fullname,
                'orig_post' => $branch_data->post
            );

            $post_obj = (object)array_merge($branch_array, $post_array);
        } else {
            $post_obj = (object)$post_array;
        }

            }
            return $post_obj; 
```

然后分支查询

```
 public function branch_query($orig_post_user_id, $orig_post_id)
    {
        $sql = "SELECT  users.username,users.fullname,posts.post,posts.post_id
                FROM   users u
                JOIN    posts p
                ON      p.user_id = u.user_id
                WHERE   u.user_id = $orig_post_user_id
                AND     p.post_id = $orig_post_id";
        $q = $this->db->query($sql);
        return ($q)?$q->result():array();
    } 
```

第一，在 post_array 中获取我需要的数据。

如果字段 orig_post_id 不为 0，则表示该帖子是由另一个帖子的用户分享的。我创建了另一个名为 branch_array 的数组，分支数组旨在包含原始帖子的用户用户名、全名和原始帖子本身。这就是分支查询的用武之地。通过分支查询，我传递原始用户用户 ID 和原始帖子 ID，然后它返回原始帖子用户用户名、全名和帖子本身。然后我在分支数据变量中得到它并将其放入分支数组中。

现在我尝试将分支数据合并到 post_array 并将合并的数组转换为对象。我想要的输出看起来像这样；

场景 1，当 orig_post_id 不为 0 时

```
$post_obj = new stdClass([post_id] => 4,
                        [user_id] => 2,
                        [post] => ok ginny,
                        [orid_post_id] => 3,
                        [post_date] => some timestamp,
                        [fullname] => Harry Potter,
                        [username] => avadakedevra,
                        [branch_uname] => ginny,
                        [branch_fname] => Ginny Potter
                        [orig_post] => stop it harry
) 
```

如您所见，分支数据已合并。场景 2，当 orig_post_id = 0 时

```
$post_obj = new stdClass([post_id] => 3,
                        [user_id] => 1,
                        [post] => stop it harry,
                        [orid_post_id] => 0,
                        [post_date] => some timestamp,
                        [fullname] => Ginny Potter,
                        [username] => ginny
) 
```

现在它只获取一个分支数据并将其放在对象之外。任何帮助将不胜感激。对不起，长度。正如你可以从哈利波特的帖子中看出的那样，我真的要哭了，哈哈，再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T01:08:14.887

这只是让事情变得比它应该的更复杂。试试这个

```
 foreach ($query->result() as $row) {
                $branch_id = $row->is_branch_of_id;
                $user_branch_id = $this->postid_return_user_id($branch_id);
                $post_array[] = array(
                    'post_id' => $row->post_id,
                    'user_id' => $row->user_id,
                    'post' => $row->post,
                    'is_branch_of_id' => $branch_id,
                    'post_date' => $row->post_date,
                    'fullname' => $row->fullname,
                    'username' => $row->username,
                    'file_path_thumb' => $row->file_path_thumb, 
```

* * *

```
 'data' => $this->branch_query($user_branch_id, $branch_id) 
```

* * *

```
 );
                    $post_obj = $this->array_to_object($post_array);

            } 
```

由于 post_array 是多维的，因此您将需要此函数将其转换为对象。

```
 public function array_to_object($array) {
        $obj = new stdClass;
        foreach($array as $k => $v) {
            if(is_array($v)) {
                $obj->{$k} = $this->array_to_object($v);
            } else {
                $obj->{$k} = $v;
            }
        }
        return $obj;
    } 
```

# c# - IFormattable 的参考实现

> ID：14221424
> 
> 赞同：13
> 
> 时间：2013-01-08T18:13:45.120
> 
> 标签：c#, .net, iformattable

[IFormattable](http://msdn.microsoft.com/en-us/library/system.iformattable.aspx)是否有一个很好的参考实现？我计划为我的对象至少有一个自定义`IFormatProvider`，并且我想确保对于传递给`IFormattable.ToString(string, IFormatProvider)`.

到目前为止我所拥有的：

```
public class MyDataClass : IFormattable
{
    /// <seealso cref="IFormattable.ToString(string, IFormatProvider)"/>
    public string ToString(string format, IFormatProvider formatProvider)
    {
        ICustomFormatter formatter = (ICustomFormatter)formatProvider.GetFormat(typeof(ICustomFormatter));
        return formatter.Format(format, this, formatProvider);
    }
} 
```

但似乎还有其他潜在的情况应该包括在内，即：

1.  如果`formatProvider`为空，我应该回退到`this.ToString()`吗？
2.  如果`formatProvider.GetFormat(typeof(ICustomFormatter))`返回`null`，我应该抛出一个特殊的异常吗？

任何博客文章/代码示例/MSDN 参考都表示赞赏。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-10T23:10:06.560

您似乎误解了 .NET Framework 格式化基础结构的设计。`ICustomFormatter`永远不应在 的实现中引用`IFormattable.ToString`，因为这与该接口的预期目的相冲突。

# `IFormattable`

一个对象只有`IFormattable`在知道如何格式化自己的情况下才应该实现（理想情况下，它当然应该将其委托给另一个类，但这里会有故意的耦合）。一个对象可能知道如何以多种不同的方式格式化自己，因此格式字符串允许您在它们之间进行选择。即使这样，仍然可能缺少信息，这些信息因文化而异。因此，有第二个参数可以间接提供此类信息。

传递给的类型`IFormatProvider.GetFormat`旨在成为特定`IFormatProvider`于提供给的类的类型或接口。

例如，内置数字类型希望能够检索 的实例`System.Globalization.NumberFormatInfo`，而`DateTime`相关类希望能够检索`System.Globalization.DateTimeFormatInfo`.

## 实施`IFormattable`

所以让我们想象我们正在创建一些新的自格式化类。如果它只知道一种格式化自己的方法，它应该简单地覆盖`object.ToString()`，仅此而已。如果该类知道不止一种格式化自身的方法，则应该实现`IFormattable`.

### `format`参数_

根据格式字符串（代表通用格式）[的文档](http://msdn.microsoft.com/en-us/library/system.iformattable.tostring.aspx)，**必须**支持。建议 null 或空格式字符串等效于. 确切的含义取决于我们。`IFormattable.ToString``"G"`**`"G"`**

 **### `formatProvider`参数_

如果我们需要任何特定于文化的东西，或者会有所不同，我们需要使用该`IFormatProvider`参数。我们会使用`IFormatProvider.GetFormat`. 如果`IFormatProvider`为空，或者如果`IFormatProvider.GetFormat`我们想要的类型返回空，我们应该回退到这个变化信息的一些默认源。

默认源不必是静态的。可以想象，默认来源可能是应用程序中的用户设置，并且`formatProvider`用于预览选项更改和/或序列化需要固定格式时。

格式化也可能涉及格式化某些子对象。在这种情况下，您可能想要传递`IFormatProvider`下去。MSDN 有一个[很好](http://msdn.microsoft.com/en-us/library/26etazsy.aspx#IFormattable)的实现示例`IFormattable`，说明了这种情况。

## 其他`ToString`重载

在实现时，以等同于以下方式的方式被覆盖`IFormattable`是很重要的`Object.ToString()`

```
public override string ToString()
{
    return this.ToString(null, System.Globalization.CultureInfo.CurrentCulture);
} 
```

这样做可以确保它`somestring + yourobject`等同于`string.Format("{0}{1}",somestring, yourobject)`，您的用户期望它是正确的。

为了方便您的用户，您可能应该提供`string ToString(string format)`. 此外，如果您的默认格式有任何可以从中受益的不同组件`IFormatProvider`，您可能还需要提供`public string ToString(IFormatProvider provider)`.

# `ICustomFormatter`

那么如果我们想格式化一个不知道如何格式化自己的类，或者我们想使用一些类本身不支持的格式，我们该怎么办。这就是 ICustomFormatter 变得相关的地方。可以`IFormatProvider`提供`ICustomFormatter`类型的 可以作为 和 等方法中的参数`IFormatProvider`传递。`string.Format``StringBuilder.AppendFormat`

提供的每个格式都调用了`ICustomFormatter`它的方法。如果不熟悉使用的格式字符串或不支持该类型，则它只是委托给or 。如果您正在格式化尚未提供格式化支持的对象，该[文档](http://msdn.microsoft.com/en-us/library/system.icustomformatter.aspx)提供了所需内容的列表，以及如果您只想向现有的. 它还提供了添加额外格式案例的示例。`Format``string.Format``ICustomFormatter``IFormattable.ToString``Object.ToString`[`ICustomFormatter`](http://msdn.microsoft.com/en-us/library/system.icustomformatter.aspx)`IFormattable`

# 参考

[这个 MSDN 页面](http://msdn.microsoft.com/en-us/library/26etazsy.aspx)提供了 .NET 格式化系统的一个很好的概述，并提供了指向 MSDN 中几乎所有其他相关页面的链接。这是几乎所有与格式相关的问题的最佳起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:17:19.920

对于此类问题，可以在[Mono](http://www.mono-project.com)源代码中找到很好的信息*来源。*[您可能会在它的mscorlib.dll](https://github.com/mono/mono/tree/master/mcs/class/corlib)代码中找到很多这样的用法。**

# asp.net - 如何从 ASP.NET Web 服务生成 JSONP 以进行跨域调用？

> ID：14221429
> 
> 赞同：20
> 
> 时间：2013-01-08T18:13:59.150
> 
> 标签：asp.net, jquery, cross-domain, jsonp

我编写了一个返回 JSON 的 web 服务，并尝试使用 jQuery 调用它，如下所示：

```
$.ajax({
    contentType: "application/json; charset=utf-8",
    url: "http://examplewebsite.com/service.asmx/GetData",
    data: { projectID: 1 },
    dataType: "jsonp",
    success: function () {alert("success");}
}); 
```

然而，代码从不调用成功函数，尽管在使用 Fiddler 查看 HTTP 流量时 Web 服务调用成功。我认为这是因为我的 Web 服务返回的是原始 JSON 而不是 JSONP。

如何生成 JSONP 作为来自标准 .NET Web 服务方法的响应，如下所示：

```
[WebMethod(), ScriptMethod(UseHttpGet = true, ResponseFormat = ResponseFormat.Json)]
public Project GetData(int projectID)
{
    Project p = new Project();
    p.Name = "foobar";
    return p;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-09T13:39:38.637

好的，我最终自己弄清楚了。由于我发现很难在网络上找到完整的工作解决方案，因此我决定在此处记录我的工作解决方案。

JSONP 响应只是包装在函数调用中的标准 JSON 字符串。ASP.NET 似乎没有提供任何直接以这种格式返回响应的方法，但是自己执行此操作非常简单。但是，您必须覆盖 JSON 编码的默认方法。

下面是 JSONP 的示例。

`functionName({ name: 'value';});`

..现在这一点： `{ name: 'value';}` 只是任何 JSON 序列化程序都会给你的标准 JSON，所以我们需要做的就是添加函数调用包装器。不幸的是，这样做意味着我们必须“取消连接”（或绕过）现有的 JSON 编码，当您从 Web 服务函数返回对象时，该编码由框架透明地处理。

这是通过使用我们自己的代码将 JSONP 写入输出流（响应）来完全覆盖来自 Web 服务功能的响应来完成的。这实际上非常简单，我在下面提供了一个示例。

您可以使用内置的[DataContractJsonSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer(v=vs.90).aspx)（来自 ASP.NET 3.5+ 中的 System.Runtime.Serialization.Json 命名空间）或[NewtonSoft JSON](http://nuget.org/packages/newtonsoft.json)序列化程序，两个示例如下所示。我更喜欢使用[NewtonSoft JSON](http://nuget.org/packages/newtonsoft.json)（从 nuget 安装）而不是内置的 JSON 序列化程序，因为我发现它可以为您提供更多控制，并且还可以输出格式良好的人类可读 JSON 以进行调试。它在纸上也快得多！

```
[WebMethod()]
[ScriptMethod(UseHttpGet = true, ResponseFormat = ResponseFormat.Json)]
public void GetData(int projectID, string callback)
{
    List<Video> videos = null;
    // <code here to populate list on line above>

    // Method 1: use built-in serializer:
    StringBuilder sb = new StringBuilder();
    JavaScriptSerializer js = new JavaScriptSerializer();
    sb.Append(callback + "(");
    sb.Append(js.Serialize(videos));
    sb.Append(");");    

    // Method 2: NewtonSoft JSON serializer (delete as applicable)
    // StringBuilder sb = new StringBuilder();
    // sb.Append(callback + "(");
    // sb.Append(JsonConvert.SerializeObject(videos, Formatting.Indented)); // indentation is just for ease of reading while testing
    // sb.Append(");");     

    Context.Response.Clear();
    Context.Response.ContentType = "application/json";
    Context.Response.Write(sb.ToString());
    Context.Response.End();
} 
```

然后可以使用以下 JQuery 代码调用此方法：

```
$.ajax({
    crossDomain: true,
    contentType: "application/json; charset=utf-8",
    url: "http://examplewebsite.com/service.asmx/GetData",
    data: { projectID: 1 }, // example of parameter being passed
    dataType: "jsonp",
    success: onDataReceived
});

function onDataReceived(data)
{
    alert("Data received");
    // Do your client side work here.
    // 'data' is an object containing the data sent from the web service 
    // Put a JS breakpoint on this line to explore the data object
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-06T01:06:50.130

谢谢尼克，这是一个很好的答案，我最初在网上也很难找到这个问题。对我也很好。

想确保这行帖子得到应有的关注。

只是想补充一点，我使用了内置的序列化程序（System.Runtime.Serialization.Json），它也很有吸引力。

```
 List<orderHistory> orderHistory = null;

        StringBuilder sb = new StringBuilder();
        JavaScriptSerializer js = new JavaScriptSerializer();
        sb.Append(callback + "(");
        sb.Append(js.Serialize(orderHistory));
        sb.Append(");");

        Context.Response.Clear();
        Context.Response.ContentType = "application/json";
        Context.Response.Write(sb.ToString());
        Context.Response.End(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-25T14:21:41.027

如果有人正在寻找如何`JSONP`从`ASP.NET` `Web API`行动中返回的样本：

```
// GET api/values
public JsonpResult Get()
{
    var values = new string[] { "value1", "value2" };
    return new JsonpResult(values);
} 
```

`JsonpResult`封装包装的助手类`JSONP`。

```
public class JsonpResult : JsonResult
{
    object _data = null;

    public JsonpResult(object data)
    {
        _data = data;
    }

    public override void ExecuteResult(ControllerContext controllerContext)
    {
        if (controllerContext != null)
        {
            var response = controllerContext.HttpContext.Response;
            var request = controllerContext.HttpContext.Request;

            var callBackFunction = request["callback"];
            if (string.IsNullOrEmpty(callBackFunction))
            {
                throw new Exception("Callback function name must be provided in the request!");
            }
            response.ContentType = "application/x-javascript";
            if (_data != null)
            {
                var serializer = new JavaScriptSerializer();
                response.Write(string.Format("{0}({1});", callBackFunction, serializer.Serialize(_data)));
            }
        }
    }
} 
```

# events - 为什么这个 onclick 事件处理程序不起作用？

> ID：14221430
> 
> 赞同：1
> 
> 时间：2013-01-08T18:14:01.100
> 
> 标签：events, event-handling, onclick, inline, outline

我是 JS 新手，正在尝试学习事件处理程序。我已经看了好几个小时了，我认为它比我发现的要简单得多。有谁知道为什么当我单击按钮时没有任何反应？

```
<script>
    function buttonClick(){
        document.getElementById("testButton").onclick = document.write("The button has been clicked!!!");
    }
    window.onload=buttonClick;
</script> 
```

```
<input type="button" id="testButton" value="click me" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T18:16:55.100

这是因为您需要一个函数来分配 onclick ，所以这会起作用

```
 document.getElementById("testButton").onclick = function(){document.write("The button has been clicked!!!");} 
```

那是一个匿名函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T18:19:42.647

您的脚本正在加载页面加载时的 buttonClick 事件。您需要删除该行并将 onClick 添加到您的输入中。你可以这样写：

```
<script>
function buttonClick(){
    document.write("The button has been clicked!!!");
}
</script>

<input type="button" id="testButton" value="click me" onClick="buttonClick()" /> 
```

# matlab - 计算整数中设置的位数？

> ID：14221438
> 
> 赞同：1
> 
> 时间：2013-01-08T18:14:38.480
> 
> 标签：matlab, binary, lookup-tables

我正在尝试使用 x*x-1 检查整数是否为 2 的幂，然后对其进行计数。

```
long count_bits(long n) {
unsigned int c;
for c = 0:n
n = n * (n - 1);  %Determines if an integer is a power of two!
c=c+1;
end

disp(c); 
```

在这里找到了我的答案：[在matlab中有效地计算汉明权重](https://stackoverflow.com/questions/1024904/calculating-hamming-weight-efficiently-in-matlab)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T07:14:50.697

使用`bitget`：

```
% generate a random int number
>> n = uint32( randi( intmax('uint32'), 1, 1 ) )

n = 

   3771981510

>> count = sum(bitget(n,1:32))

count = 

   18 
```

或者，如果您关心性能，您可以使用查找表 (LUT) 来计算位数：

为 8 位整数构建 LUT（仅 256 个条目）：

```
function lut = countBitsLUT()
for ii = 0:255
    lut(ii+1) = sum(bitget(uint8(ii),1:8));
end 
```

您只需构建 LUT 一次。

获得 LUT 后，您可以使用以下方法计算位数：

```
count = lut( bitand(n,255)+1 ) + ...      % how many set bits in first byte
        lut( bitand( bitshift(n,-8), 255 ) + 1 ) + ... % how many set bits in second byte
        lut( bitand( bitshift(n,-16), 255 ) + 1 ) + ... % how many set bits in third byte
        lut( bitand( bitshift(n,-24), 255 ) + 1 ); % how many set bits in fourth byte 
```

我还做了一个小“基准”：

```
lutCount = @( n ) lut( bitand(n,255)+1 ) + ...      % how many set bits in first byte
        lut( bitand( bitshift(n,-8), 255 ) + 1 ) + ... % how many set bits in second byte
        lut( bitand( bitshift(n,-16), 255 ) + 1 ) + ... % how many set bits in third byte
        lut( bitand( bitshift(n,-24), 255 ) + 1 ); % how many set bits in fourth byte

t = [ 0 0 ];
for ii=1:1000
    n = uint32( randi( intmax('uint32'), 1, 1 ) );
    tic;
    c1 = sum(bitget(n,1:32));
    t(1) = t(1) + toc;
    tic;
    c2 = lutCount( n );
    t(2) = t(2) + toc;
    assert( c1 == c2 );
end 
```

运行时间是：

```
t = [0.0115    0.0053] 
```

`sum`也就是说，LUT 的速度是的两倍`bitget`。

# c# - 使用 xml 文件将数据绑定到多个 ComboBox

> ID：14221440
> 
> 赞同：0
> 
> 时间：2013-01-08T18:14:39.240
> 
> 标签：c#, xml, winforms, data-binding, combobox

我需要编写一个包含 4 个组合框的程序。

第**一个**组合框包含一个函数列表，每个选择（组合框索引的任何更改）都会更改**第二个**组合框的内容。

第二**个**组合框包含一个函数列表，每个选择（组合框索引的任何更改）都会更改**第三个**组合框的内容。

所以我应该对其余的组合框做同样的事情。

我需要在 XML 支持中建立一个层次结构。

我的程序看起来像这样

![在此处输入图像描述](../Images/0b8b5cd20a918d227421c0bb1050a6b6.png) 四个组合框的任意组合都会改变`textbox`（我有大约 900 种组合）。

知道如何制作文件的 A 层次结构，以便组合框索引中的每次更改都会更改其余组合框并将文本更改为`textbox`适合当前组合的文本？

而且我需要了解组合框的*选定索引更改事件处理函数*与我应该如何从 XML 文件中获取信息之间的关系。

# virtualbox - 即使它是动态大小，也无法使用 vboxmanage 缩小 virtualbox HD

> ID：14221443
> 
> 赞同：3
> 
> 时间：2013-01-08T18:14:48.410
> 
> 标签：virtualbox

```
 > vboxmanage showhdinfo mydisk.vdi
 UUID:                 ff4e397d-f2c8-4c19-ac03-1d4ee31d9004
 Accessible:           yes
 Logical size:         569189 MBytes
 Current size on disk: 198771 MBytes
 Type:                 normal (base)
 Storage format:       VDI
 Format variant:       dynamic default
 ...
 .. 
 .

 > vboxmanage modifyhd mydisk.vdi --resize 100000
 0%...
 Progress state: VBOX_E_NOT_SUPPORTED
 VBoxManage: error: Resize hard disk operation for this format is not implemented yet!

> vboxmanage --version
4.1.12_Ubuntur77245 
```

我究竟做错了什么？我发现数百个线程说它必须是动态驱动才能工作，但这个驱动是动态的！

编辑：这是我的错误。resize 不会缩小虚拟 HD，只会扩大它。来自 vboxmanage 的错误消息是神秘的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:28:35.877

100000 小于 569189。Resize 不支持缩盘。这个错字是在这里还是在您的系统中？

# php - 使用数据库表中的值生成下拉列表输入

> ID：14221444
> 
> 赞同：7
> 
> 时间：2013-01-08T18:14:51.310
> 
> 标签：php, laravel

我正在尝试使用 Laravel 生成一个包含来自 MySQL 表的值的下拉列表。该表很简单，两列 -`id`和`category`。

以下将检索所有记录（类别），但返回一个对象而不是数组，这是我需要的下拉代码 -

```
$categories = Category::all(); 
```

下拉菜单的代码是：

```
{{ Form::select('category', $categories, $post->category_id) }} 
```

想法？

**更新**

bgallagh3r 建议使用 foreach 循环将每个类别转换为数组。他们的代码让我很接近，但生成了一堆时髦的嵌套`optgroup`标签。我能够把它降到只有一个`optgroup`，但这是一个太多了..

```
$categories = Category::all();
foreach ($categories as $cat)
{
    $category = $cat->to_array();
    $id = $category['id'];
    $value = $category['category'];
    $cats[] = array($id => $value);
} 
```

然后，以以下形式：

```
{{ Form::select('categories', $categories)}} 
```

我最终得到了这个 HTML：

```
 <select name="categories">
    <optgroup label="0">
    <option value="1">Department News</option>
    </optgroup>
    <optgroup label="1">
    <option value="2">General</option>
    </optgroup>
   ...
    </select> 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-08T22:32:18.200

您可以尝试“列表”功能：

`$categories = Category::lists('category', 'id');`

（仅适用于 Laravel 3）甚至省略 'id' 参数，因为它将默认为 Model 键，请参阅[http://laravel.com/api/source-class-Laravel.Database.Query.html#596](http://laravel.com/api/source-class-Laravel.Database.Query.html#596)

`$categories = Category::lists('category');`

（对于 Laravel 4，您确实需要第二个参数，请参阅[http://laravel.com/api/source-class-Illuminate.Database.Query.Builder.html#1034-1063](http://laravel.com/api/source-class-Illuminate.Database.Query.Builder.html#1034-1063)）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T18:19:08.043

根据您是否在模型中使用 Eloquent，Category 将返回一个对象数组，您需要先将对象转换为数组，然后再将它们传递给 Form 类。

```
foreach (Category::all() as $cat)
{
    $categories[] = array($cat->id => $cat->category);
}
{{ Form::select('categories', $categories)}} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-30T20:10:25.723

在 Laravel 4 中，您可以轻松尝试如下

```
//Query category and pass it  to the view that you want to show your category
$category = Category::lists('category_name', 'category_id'); 
```

在您看来，只需添加`{{ Form::select('category', $category) }}`. 结果将是您想要的，如下所示

```
<select name="category">
        <option value="category_id">category_name</option>
</select> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-28T06:32:53.547

How about this ?

```
foreach (Category::all() as $cat)
{
    $categories[$cat->id] = $cat->category;
}
{{ Form::select('categories', $categories)}} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-10T09:56:57.280

只需将 bgallagh3r 的代码稍微调整一下以下内容即可：

```
foreach (Category::all() as $cat)
{
    $categories[$cat->id] = $cat->category);
}
{{ Form::select('categories', $categories)}} 
```

...虽然我更喜欢（在 L4 中）：

```
foreach (Category::select('id', 'category')->orderBy('id','asc')->get() as $cat)
{
  $categories[$cat->id] = $cat->category;
}
{{ Form::select('categories', $categories)}} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-12T16:48:13.760

对于 Laravel 5.3.x

在控制器中

```
$categories = Category::pluck('name', 'id'); 
```

在视图中

```
{{ Form::select('categories', $categories)}} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-03T18:26:21.090

对于 laravel 5.2

在控制器中

```
$mechanics = User::where('role_id','3')->lists('name', 'id'); 
```

在视野中

```
{{   Form::select('mechanic_id', 
    [''=>'please select'] + $mechanics->toArray(), $order->mechanic_id , 
     array('id' =>'material-select2','class' => 'form-control'))  }} 
```

# c++ - 编织内联类型转换（python）

> ID：14221450
> 
> 赞同：4
> 
> 时间：2013-01-08T18:15:34.977
> 
> 标签：c++, python, casting, numpy, scipy

2013 年最美好的祝愿！

我正在使用 SciPy 的内联编织和我的一些 C++ 代码来转置巨大的矩阵（大约 200.000 x 15）。它就像一个魅力，但我有一个关于类型转换的问题：

我的输入矩阵是从文件中读取的，以逗号分隔等，因此所有条目都是字符串而不是浮点数（'0.551' 而不是 0.551）。这不会影响转置函数的工作方式，但后来我必须将某些行转换为 numpy 浮点数组，所以我想知道这是否可以在 C++ 代码中完成。让我用一些代码解释一下：

```
def transpose(lines, N, x):
    code =  """
            py::list matrix;
            for(int i = 0; i < x; i++) {
                py::list line;
                if(i == 1) { continue; }
                for(int j = 0; j < N; j++) {
                    line.append(lines[j][i]);
                }
                matrix.append(line);
            }
            return_val = matrix;
            """
    return weave.inline(code, ['lines', 'N', 'x'])

matrix = [['0.5','0.1'],['0.2','0.2']]
matrixT = transpose(matrix, len(matrix), len(matrix[0]))
final_result = np.array(matrixT[0], dtype=float) 
```

在示例中，我的小矩阵将被转置，我的示例结果将转置矩阵的第一行转换为 dtype 浮点数的 numpy 数组。这可以用 C++ 代码来完成吗？我尝试过使用`double x = (double) lines[j][i]`类似的东西，但它不适用于附加到 py::list 对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:07:08.193

以下内容可以完成您所追求的全部工作：

```
def transpose(lines):
    code =  """
            for(int i = 0; i < x; i++) {
                for(int j = 0; j < N; j++) {
                    out[j + i * N] = atof(lines[j][i]);
                    // OUT2(i, j) = atof(lines[j][i]);
                }
            }
            """
    N = len(lines)
    x = len(lines[0])
    out = np.empty((x, N), dtype=np.float64)
    weave.inline(code, ['lines', 'N', 'x', 'out'])
    return out

>>> matrix = [['0.5', '0.1', '0.7'],['0.2','0.2', '0.4']]
>>> matrix
[['0.5', '0.1', '0.7'], ['0.2', '0.2', '0.4']]
>>> transpose(matrix)
array([[ 0.5,  0.2],
       [ 0.1,  0.2],
       [ 0.7,  0.4]]) 
```

除了`;`在 6 年没有写任何 C 之后不断忘记之外，我在弄清楚`out`C++ 代码中变成了什么时遇到了很多麻烦，最后它是指向数据本身的指针，而不是[文档](http://docs.scipy.org/doc/scipy/reference/tutorial/weave.html#type-conversions)`PyArrayObject`中的a状态。weave 定义了两个可供使用的变量，和，它们的类型分别是和。`out_array``py_out``PyArrayObject*``PyObject*`

我留下了一个替代版本的赋值注释：weave 自动定义宏`<VAR>1`, `<VAR>2`,`<VAR>3`和`<VAR>4`来访问相应维数的数组项。

# struct - 驱动程序linux：通过struct资源传递platform_data

> ID：14221451
> 
> 赞同：3
> 
> 时间：2013-01-08T18:15:39.220
> 
> 标签：struct, linux-kernel, resources, driver

我在编写设备驱动程序时遇到问题。由于不同的用例，platform_data 结构中的字段数量变得太大。我已经有 14 个字段，我必须添加至少 5 个其他字段。代码变得不可读。

我的经理坚持要我使用“结构资源”来传递参数。但我找不到一个教程或至少一个例子来告诉我如何做到这一点。

你能帮我做这件事吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T23:00:16.290

我同意平台设备的内核文档并不能完全解释一切，希望这会有所帮助。

在板文件中：

```
static struct resource mydevice_resource[] = {
    [0] = {
        .start  = MYDEVICE_REG_START,
        .end    = MYDEVICE_REG_STOP,
        .flags = IORESOURCE_MEM,
    },
    [1] = {
        .start = MYDEVICE_IV,
        .end   = MYDEVICE_IV,
        .flags = IORESOURCE_IRQ,
    },
};

...

static struct platform_device mydevice_device = {
    .name = "mydevice",
    .id = MYDEVICE_ID_1,
    .num_resources = ARRAY_SIZE(mydevice_resource),
    .resource = mydevice_resource,
    .dev = {
            /* .platform_data = ... if needed */
    },
}; 
```

在驱动程序中：

```
static int __devinit mydevice_probe(struct platform_device *pdev)
{
        struct resource *res;

        ...

        res = platform_get_resource(pdev, IORESOURCE_MEM, 0);
        if (!res)
                return -ENODEV;

        ... 
```

# eclipse - 在 Eclipse 中处理 Maven 多模块项目

> ID：14221452
> 
> 赞同：1
> 
> 时间：2013-01-08T18:15:44.150
> 
> 标签：eclipse, maven, module, project, m2e

我正在 Eclipse 中创建我的第一个分层多模块项目：

```
 /project
    pom.xml
      (...)
      <groupId>a.b.c</groupId>
      <artifactId>myProject</artifactId>
      <version>1.0-SNAPSHOT</version>
      <packaging>pom</packaging>
      <modules>
        <module>x</module>
        <module>y</module>
      </modules>
    /x
      pom.xml
        (...)
        <parent>
          <artifactId>myProject</artifactId>
          <groupId>a.b.c</groupId>
          <version>1.0-SNAPSHOT</version>
        </parent>    
      /src
      .project
    /y
      pom.xml
        (...)
        <parent>
          <artifactId>myProject</artifactId>
          <groupId>a.b.c</groupId>
          <version>1.0-SNAPSHOT</version>
        </parent>    
      /src
      .project 
```

理想情况下，我希望在我的 Eclipse 工作区中看到三个文件夹：

```
 /project
    pom.xml
  /x
    pom.xml
    src
    .project
  /y
    pom.xml
    src
    .project 
```

*   x 和 y 会在项目文件夹中找到父 pom.xml。我将能够作为 maven 项目独立处理它们。

*   项目将只包含父 pom.xml

至少这是我对在这个项目上工作如何实用的直觉。

我在 SVN 中提交了我的代码，我可以通过使用“在所选资源的子项中查找项目”选项进行 SVN 检出来接近该结构（只要父项目文件夹中没有 .project 就可用）。这会在我的工作区中创建项目 x 和 y，但由于缺少父 pom.xml，我会遇到编译错误。我可以通过将父 pom.xml 单独放在工作区中来消除这些错误，但这似乎不是一个干净的解决方案。

我想我的问题的一种解决方案是将我的结构展平一些并在与 x 和 y 以及我的父 pom.xml 和 .project 文件相同的级别创建一个“父”文件夹，但看起来很奇怪为了让 Eclipse 开心，将父母与孩子置于同一水平。我在网上找到的最接近答案的是[http://warpedjavaguy.wordpress.com/2011/08/08/how-i-defeated-the-maven-release-plugin-in-a-flat-structured-multi- module-project/](http://warpedjavaguy.wordpress.com/2011/08/08/how-i-defeated-the-maven-release-plugin-in-a-flat-structured-multi-module-project/)，它似乎以类似的方式解决了这个问题。

我缺少更好的方法吗？

PS：我有m2e。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:08:02.597

我想我在这里回答我自己的问题。

*   我检查了 Eclipse 之外的项目。
*   然后我作为 Maven 项目导入

我得到了我所期望的视图：即我的工作区中有 4 个文件夹（一个用于父级，3 个用于每个子级）。不知何故，我记得有一个选项可以在我以前版本的 Eclipse 中一步完成（即检出和导入）。它被称为“Check out as maven project”，它似乎随着 Juno 消失了。或者也许我错过了正确的插件（我安装了 m2e 以及 Subversive；可能是另一个 svn 插件而不是颠覆性的）。

# c# - 关闭父表单Y时如何选择子表单X中的值？+1

> ID：14221454
> 
> 赞同：0
> 
> 时间：2013-01-08T18:15:53.597
> 
> 标签：c#

这是自定义 winform 类的一部分：

```
public partial class frmFindAppointments {
    public virtual void Init(int patientId, bool booleanValue) {
        // will receive the patientId
    }

    public delegate void goToCalendarHandler();
    public goToCalendarHandler goToCalendar;
} 
```

在父窗口中，我添加了雇主的名称，当我关闭父窗口时`y`，我想在子窗口中选择它。`x``y`

我试过了

```
using(frmFindAppointments frm=new frmFindAppointments()) {
    frm.goToCalendar+=new frmFindAppointments.goToCalendarHandler(GoToCalendar);
    frm.Init(Patient.Id, false);
    frm.ShowDialog(this);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:24:04.803

好吧，我很难理解你的代码片段。但实现这一点的简单方法是创建一个 SelectedEmployer 属性，您在 y 表单的 Close 处理程序中将其设置为 UI 上的当前选定值。然后在 X 表单中，即使表单 y 已关闭，只要您保持对 y 表单的引用，您始终可以检索此值。这对你有用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:25:58.613

使用您需要返回的一些公共属性创建子窗口。喜欢：

```
public CForm : Form {
    public string Result { get; private set; } } 
```

然后在完成后设置该属性：

```
public CForm : Form {
    public void Finished() { Result = "all okay"; } } 
```

然后只需打开 is as dialog 并获得您需要的结果：

```
using (CForm form = new CForm)
{
    form.ShowDialog();
    string dialogResult = form.Result; // Here you are.
} 
```

# azure - 删除 blob 容器“（我的容器名称）”时出错：详细信息

> ID：14221455
> 
> 赞同：3
> 
> 时间：2013-01-08T18:15:56.020
> 
> 标签：azure, azure-storage

我不能删除它，我认为这个存储之间没有任何链接

这是屏幕截图

![在此处输入图像描述](../Images/941ecee93c22a024438a25b7be87a977.png)

它说移除容器

![在此处输入图像描述](../Images/df1e030e5e6022a7e06240654aa3107d.png)

我尝试删除容器，但它说有租约并且没有其他服务工作，

但我不明白，有人帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:24:52.883

找到了答案

感谢 msdn 中的 navcode 在[这里查看答案](http://social.msdn.microsoft.com/Forums/en-US/windowsazuretroubleshooting/thread/10c60757-b47f-4462-9518-4bddcec690dc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T01:46:43.677

启动（或尝试启动）多个虚拟机后，我遇到了同样的问题。终止虚拟机后，磁盘映像仍然存在。您可以在存储容器中看到它，但不能从那里删除它，因为它仍然是“租用的”。

在虚拟机下检查并根据此图像单击“磁盘”链接：

![天蓝色虚拟机磁盘](../Images/6ba20ad3db9933634863c0c67b563165.png)

您可以从那里删除磁盘映像。确保您不删除某天可能需要的虚拟机的映像。

# java - 扩展 KeyListener 的类不响应按键

> ID：14221458
> 
> 赞同：1
> 
> 时间：2013-01-08T18:16:05.633
> 
> 标签：java, swing, jframe, keylistener, setfocus

很抱歉它是重复的——我写这篇文章的时候很着急，没有时间检查。虽然我认为它会更快，但现在我想到它......

* * *

> **可能重复：**
> [JFrame 的 Java KeyListener 没有响应？](https://stackoverflow.com/questions/286727/java-keylistener-for-jframe-is-being-unresponsive)

我一直在写一个应用程序，并正在尝试制作热键。我决定使用`KeyListener`，因为这是我所知道的。但是，班级对按键没有反应。我将如何修复这个错误？如果有替代方案`KeyListener`可以做同样的事情，请告诉我，最好提供一个例子来说明它是如何工作的。

### 主班

```
import java.awt.BorderLayout;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import javax.swing.*;
import panels.TabBar;

public class __mn implements KeyListener {
    static JFrame disp = new JFrame("dat app");

    static TabBar tabs = new TabBar();

    public static void main(String[] args) {
        disp.setLayout(new BorderLayout());
        disp.add(tabs, BorderLayout.PAGE_START);
        disp.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        disp.setSize(TabBar.PREF_WIDTH, 500);
        disp.setResizable(false);
        disp.setLocationRelativeTo(null);
        disp.addKeyListener(new __mn());
        disp.setVisible(true);
    }

    @Override
    public void keyPressed(KeyEvent e) {
        System.out.println(e.paramString());
    }

    //Unused
    @Override public void keyReleased(KeyEvent e) {
        System.out.println(e.paramString());
    } 
    @Override public void keyTyped(KeyEvent e) {
        System.out.println(e.paramString());
    }
} 
```

### TabBar 类

```
package panels;

import java.awt.Color;
import java.awt.FlowLayout;
import java.awt.LayoutManager;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JPanel;

//http://www.dreamincode.net/forums/topic/245148-java-key-binding-tutorial-and-demo-program/

public class TabBar extends JPanel implements ActionListener {
    private static final long serialVersionUID = 1L;

    public static final int NONE = -1;
    public static final int INBOX = 0;
    public static final int SEND_MSG = 1;
    public static final int PRIVATE_CHAT = 2;
    public static final int FEEDBACK = 3;

    public static final int PREF_WIDTH = 425;

    private static final String[] tabNames = {"Inbox", "Send a message", "Private chat", "Feedback"};

    private static final JButton btnInbox = new JButton(tabNames[INBOX]);
    private static final JButton btnSendMSG = new JButton(tabNames[SEND_MSG]);
    private static final JButton btnPrivChat = new JButton(tabNames[PRIVATE_CHAT]);
    private static final JButton btnFeedback = new JButton(tabNames[FEEDBACK]);

    public int currentTab = -1;

    public TabBar() {
        this(new FlowLayout());
    }

    public TabBar(LayoutManager layout) {
        super(layout);

        add(btnInbox);
        add(btnSendMSG);
        add(btnPrivChat);
        add(btnFeedback);

        btnInbox.addActionListener(this);
        btnSendMSG.addActionListener(this);
        btnPrivChat.addActionListener(this);
        btnFeedback.addActionListener(this);

        setBackground(Color.BLACK);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        System.out.println(e.paramString());
        if (e.getSource() == btnInbox)
            currentTab = INBOX;
        else if (e.getSource() == btnSendMSG)
            currentTab = SEND_MSG;
        else if (e.getSource() == btnPrivChat)
            currentTab = PRIVATE_CHAT;
        else if (e.getSource() == btnFeedback)
            currentTab = FEEDBACK;
        else currentTab = NONE;
    }

    public void hotkeyPressed(char pressed) {
        pressed = Character.toLowerCase(pressed);
        System.out.println("Hotkey pressed: " + pressed);
        switch (pressed) {
        case 'i':
            setTab(INBOX);
            break;
        case 's':
            setTab(SEND_MSG);
            break;
        case 'p':
            setTab(PRIVATE_CHAT);
            break;
        case 'f':
            setTab(FEEDBACK);
            break;
        default:
            break;
        }
    }

    private void setTab(int tab) {
        System.out.println("Somthing pressed! tab=" + tab);
        currentTab = tab;
        switch (tab) {
        case INBOX:
            btnInbox.requestFocusInWindow();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T19:33:10.703

> 我将如何修复这个错误？

与其说是不兼容，不如说是真正的错误。

> 如果有替代 KeyListener 的方法可以做同样的事情，请告诉我，最好提供一个例子来说明它是如何工作的。

不要将`KeyListener`/`KeyAdapter`用于 Swing 组件，因为存在焦点问题，这可以通过`requestFocusInWindow()`在组件可见后调用组件来解决，以确保它具有焦点，当然*如果*`setFoucsable(true);`组件不能像.*`JLabel`*

 *Swing 组件应该使用[`KeyBinding`s](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html) ，它通过自动调用添加`setFocusable(true)`到的组件等来克服上述问题。`KeyBinding`

这是一个小例子：

```
void addKeyBinding(JComponent jc) {
        jc.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke(KeyEvent.VK_A, 0, false), "A pressed");
        jc.getActionMap().put("esc pressed", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                System.out.println("A pressed");
            }
        });

        jc.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke(KeyEvent.VK_A, 0, true), "A released");
        jc.getActionMap().put("A released", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                System.out.println("A released");
            }
        });
} 
```

您可以使用要添加的`JComponent`ie等实例调用此方法：`JPanel``Keybinding`

```
JPanel p=new JPanel();

addKeyBinding(p); 
```

**其他代码建议：**

*   `Event Dispatch Thread`始终在via`SwingUtilities.invokeXXX`块上创建 Swing 组件

*   不要在类本身上实现`Listener`like `ActionListener`，除非这个类将被用作`Listener` **only**，或者您想将实现类/`Listeners`方法公开给其他类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T18:27:27.167

JFrame 由许多不同的组件组成，因此，它本身不是可聚焦的。没有焦点，它不能接收关键事件。有很多解决方案。我只推荐这个：

[JFrame 的无响应 KeyListener](https://stackoverflow.com/questions/286727/java-keylistener-for-jframe-is-being-unresponsive)

我会建议你谷歌“keylistener on jframe java”来查找更多信息。就像我说的，有很多方法可以解决这个问题。*

# sqlite - 查询中的 SQLite 操作顺序

> ID：14221465
> 
> 赞同：2
> 
> 时间：2013-01-08T18:16:38.937
> 
> 标签：sqlite, user-defined-functions

我有一个表格查询：

```
SELECT akey, avalue, expensiveop(akey) FROM atable WHERE avalue < SOME_CONSTANT; 
```

看起来昂贵的op()——这是一个用户定义的函数，需要相当长的时间来执行——被表中的所有行调用。出于性能原因，我只希望它对结果集中的每一行执行一次。

我尝试了以下方法，但似乎没有什么不同：

```
SELECT akey, avalue, expensiveop(akey) FROM (SELECT * FROM atable WHERE avalue < SOME_CONSTANT) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:23:27.657

解决方法的想法：

```
SELECT akey, avalue, CASE avalue < SOME_CONSTANT WHEN 0 THEN NULL ELSE expensiveop(akey) END FROM avalue WHERE avalue < SOME_CONSTANT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:38:55.977

另一个想法是：

```
SELECT akey, avalue, expensiveop(akey)
FROM atable
WHERE avalue < SOME_CONSTANT
group by akey, avalue 
```

SQL 应该在执行昂贵的操作*之前*`where`执行and ，因为它使用聚合的“akey”。如果查询有类似的东西，那么它将为每一行执行它。`group by` *`min(expensiveop(akey))`*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T18:39:24.777

您可以在此页面上了解 SQLite 的优化器，尤其是子查询扁平化部分： [http ://www.sqlite.org/optoverview.html#flattening](http://www.sqlite.org/optoverview.html#flattening)

它包含一个包含 19 个条件的列表，所有这些条件都必须满足才能允许子查询展平。选择一个，并按照它所说的完全相反，例如一些随机示例（未经测试）：

```
 SELECT akey, avalue, expensiveop(akey)
 FROM (SELECT * FROM atable WHERE avalue < SOME_CONSTANT LIMIT 99999999)
 LIMIT 99999999

 SELECT akey, avalue, expensiveop(akey) FROM
(SELECT * FROM atable WHERE avalue < SOME_CONSTANT
 UNION
 SELECT * FROM atable WHERE 0 GROUP BY avalue)

 SELECT akey, avalue, expensiveop(akey) FROM
(SELECT * FROM atable WHERE avalue < SOME_CONSTANT LIMIT -1 OFFSET 0) 
```*

# c# - C# - 尝试从 double 转换为 int，但失败

> ID：14221472
> 
> 赞同：1
> 
> 时间：2013-01-08T18:17:00.667
> 
> 标签：c#, casting

我尝试用 2 来计算一个数字。我写道：

```
int xy = y - x;
double xx = (double)xy;
distance = Math.Pow(xx, (double) 2.0); 
```

`x`,`y`是整数。

我收到此错误：

> 不能将类型“double”隐式转换为“int”。存在显式转换（您是否缺少演员表？）

为什么会出现这个错误？两个参数都是`double`输入的。

此代码下方绘制的错误红线： `Math.Pow(xx, (double) 2.0);`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T18:18:19.937

我猜`distance`被宣布为`int`

```
 distance = (int)Math.Pow(xx, (double) 2.0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T18:31:38.140

> 为什么会出现这个错误？

因为[Math.Pow](http://msdn.microsoft.com/en-us/library/system.math.pow.aspx)返回**double**并且您试图将其分配给`distance`具有**int**类型的变量 ( )。

将双精度浮点数（**double**类型）转换为整数（**int**类型）时，您会丢失信息。这就是编译器不允许隐式转换并因此抛出您在上面发布的错误消息的原因。在这种情况下，您必须告诉编译器您知道潜在的信息丢失，并且您可以通过应用显式转换来做到这一点：

```
int distance = (int)Math.Pow(xx, (double)2.0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T18:21:00.533

试试这样；

```
int xy = y - x;
double xx = (double)xy;
double distance = Math.Pow(xx, (double)2.0); 
```

因为在这种情况下`Math.Pow`返回`double`. 来自元数据；

```
public static double Pow(double x, double y); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T18:20:18.320

2.0 已经是`Double`. 好像距离是`int`

```
 distance = (int)Math.Pow(xx, 2.0); 
```

# xcode - 如果变量不满足要求，则显示 AlertView (Xcode)

> ID：14221475
> 
> 赞同：0
> 
> 时间：2013-01-08T18:17:28.437
> 
> 标签：xcode, variables, if-statement, alert, alertview

如果变量 x 高于 1000，我想让警报视图弹出。在 iPhone 的 Xcode 中，Xcode 给出错误：“if”前面的预期表达式

到目前为止，这是我的代码：

```
if (x>1000) {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Title", nil)
                                message:NSLocalizedString(@"Message", nil)
                                delegate:nil
                                cancelButtonTitle:NSLocalizedString(@"OK", nil)
                                otherButtonTitles:nil];
    [alert show];
    [alert release];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:37:18.590

这就是我自己的问题的答案：

```
- (void)textFieldDidEndEditing:(UITextField *)textField {

float x = ([numberOfPeople.text floatValue]);

if (x>1000) {
    UIAlertView *objAlert = [[UIAlertView alloc] 
initWithTitle:@"Fehler" message:@"The entered Number should not be higher than 1000." 
delegate:nil 
cancelButtonTitle:nil 
otherButtonTitles:@"Close",nil];
    [objAlert show];

    textField.text=@""; // clears the text field
} 
```

}

# matlab - OpenCV - 在 MouseOver 上查看像 Matlab 一样的像素值

> ID：14221477
> 
> 赞同：1
> 
> 时间：2013-01-08T18:17:39.917
> 
> 标签：matlab, image-processing, opencv, mouseover

我一直在徒劳地寻找OpenCV中的一个实用程序，它像Matlab的图像查看器一样工作，不像matlab那样功能齐全，但至少显示具有放大/缩小功能的像素值。

非常感谢任何指导/方向/链接

谢谢

瓦吉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T12:42:24.617

实际上，如果您使用 qt 构建 opencv，您想要的功能已经可用。有关示例图像，请参见[此处](http://docs.opencv.org/modules/highgui/doc/qt_new_functions.html)，有关如何使用 qt 构建 opencv 的详细信息，请参见[此处。](http://www.slideshare.net/luigidr/installing-opencv-231-with-qt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-15T14:36:09.790

MS-Visual Studio 有一个扩展名为[Image Watch](http://docs.opencv.org/doc/tutorials/introduction/windows_visual_studio_image_watch/windows_visual_studio_image_watch.html)。它使您能够在运行时查看调试窗口中的图像。

您可以通过将鼠标移到像素上来查看图像和值。

# visual-studio-2012 - Windows 应用认证工具包在徽章徽标尺寸上失败

> ID：14221478
> 
> 赞同：3
> 
> 时间：2013-01-08T18:17:40.980
> 
> 标签：visual-studio-2012, windows-store-apps, app-certification-kit

在 Visual Studio 2012（11.0.51106.01 更新 1）中，我的 Windows 应用商店应用程序的 .appxmanifest 具有 140% 大小的徽章徽标的图像槽，列为 34x34（像素）。

当我针对该应用运行 Windows App Certification Kit 2.2 时，它失败并显示：

> “图像 'Assets\BadgeLogo.scale-140.png' 未达到 33 X 33 的大小限制。”

我将图像大小调整为 33x33，但 Visual Studio 失败并显示：

> > “应用清单引用了无效尺寸的徽章徽标图像 'Assets\BadgeLogo.scale-140.png'。它必须是 34x34 像素。”

其他人有这个问题吗？如果是这样，您能否提供解决问题的任何指导？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T10:55:29.157

这是 Microsoft 解决方法的直接链接，您可以从评论中的 twitter 链接中找到：

[您不能在 Visual Studio 2012 Update 1 中使用 Scale-140 徽章徽标](http://support.microsoft.com/kb/2792380)

# html - 将滑块浮动到其父 div 之外

> ID：14221480
> 
> 赞同：0
> 
> 时间：2013-01-08T18:18:11.840
> 
> 标签：html, css

我想知道是否有可能从它的父级中浮出一个 DIV ？我有这个使用模板的 PHP CMS。layout.cpl 是所有页面的通用模板。在其中，我有这段代码来显示页面的主体......

```
<div class="boxmain">Content here</div> 
```

我添加了一个 jQuery 滑块，它只应该出现在某些页面上，因此它位于 boxmain div 内，因为它是父级。滑块的问题是，它应该是一个水平的整页宽度横幅，因此我需要它浮动。如果我不这样做，它会改用“boxmain”div 的 100% 宽度。

我希望我把这一点说清楚，这可能有点令人困惑，但我的基本目标是从它的父 div 中取出一个子 div，以满足滑动横幅的整页宽度。

这是另一个模板中滑块的代码，它基本上显示了其中一个子页面：

```
<div class="slicebox-wrapper">
    <ul id="sb-slider" class="sb-slider" style="margin-top: -12px; min-width: 100%; max-width: 100%;">
        <li><img src="<?php echo SITE_URL?>/lib/skins/flyeuro/scripts/slicebox/img/ab1.jpg" alt="image1"/></li>
        <li><img src="<?php echo SITE_URL?>/lib/skins/flyeuro/scripts/slicebox/img/ab2.jpg" alt="image2"/></li>
    </ul>   
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:45:26.057

听起来您希望滑块包含在小于 100% 的东西中时，它是屏幕尺寸的 100%。如果是这样的话，我会强烈反对。将滑块和内容 div 包装在 100% 宽度的包装器中会更实用：

```
 <div class='mainWrapper'>
        //100% Width Wrapper
        <div class="slicebox-wrapper">
           <ul id="sb-slider" class="sb-slider" style="margin-top: -12px; min-width: 100%; max-width: 100%;">
              <li><img src="<?php echo SITE_URL?>/lib/skins/flyeuro/scripts/slicebox/img/ab1.jpg" alt="image1"/></li>
              <li><img src="<?php echo SITE_URL?>/lib/skins/flyeuro/scripts/slicebox/img/ab2.jpg" alt="image2"/></li>
              </ul> 
        </div>
        //Fixed Width Wrapper
        <div class='content'>

        </div>
  </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:33:16.337

我对你的问题有点不清楚，所以我可能是错的，但在我看来，你可能有兴趣从当前 div 中删除元素并将其放置在正文中的其他位置。您可以使用 remove() 和 append()、prepend()、after() 等来更改该 div 在文档中的位置。

您必须在加载滑块时触发该功能才能执行移动。如果页面是静态的，你可以在 $(document).ready 上做。但是，如果您使用 AJAX 加载该 div，请在 HTML 中嵌入一个脚本标记，该标记将在调用该函数的响应中传递。

页：

```
<body>
    <div class="boxmain">
        <div class="parent">
            <div class="slicebox-wrapper">...</div>
        </div>
    </div>
</body> 
```

jQuery：

```
jQuery(document).ready(function() {
    jQuery('.slicebox-wrapper').remove().appendTo('.boxmain');
}); 
```

将像这样重新组织页面：

```
<body>
    <div class="boxmain">
        <div class="parent"></div>
        <div class="slicebox-wrapper">...</div>
    </div>
</body> 
```

# android - Android SQLite ORDER BY 带有丹麦字符的 VARCHAR 列

> ID：14221485
> 
> 赞同：-1
> 
> 时间：2013-01-08T18:18:34.037
> 
> 标签：android, android-sqlite

我正在使用 SQLite 开发丹麦 Android 应用程序。现在我面临一个问题，我有一个包含“id”和“name”列的表“Category”。我想在列表视图中显示按字母顺序排序的类别。但由于类别名称包含丹麦字符，因此其排序不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:29:23.953

您可以尝试添加`COLLATE LOCALIZED`到该`ORDER BY`子句。例如

```
SELECT id, name FROM Category ORDER BY name COLLATE LOCALIZED 
```

将获取所有具有升序名称的类别

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-30T19:42:15.933

当您设置数据库时，只需执行

```
database.setLocale(new Locale("da_DK")); 
```

一切都会按预期进行。实际上，事情会比预期的要好，因为 aa 也被选为 å 并被订购。

# scala - 什么是 fp 风格的“naive hashmap”方式

> ID：14221488
> 
> 赞同：3
> 
> 时间：2013-01-08T18:18:56.463
> 
> 标签：scala, functional-programming

我有一个格式对列表`(a: A, x: Int)`，并且`x`不在列表中重复。现在我知道`x`在一定范围内`0 until n`，我想做一个大小数组`n`，其`i`第 th 元素是类型`Option[A]`。如果`(a, i)`原始列表中有一对，则为`Some(a)`，否则为`None`。一个简单的例子：

```
Original List (n = 6):
(a1, 1)
(a2, 2)
(a3, 5)
Desired Output:
(0, None)
(1, Some(a1))
(2, Some(a2))
(3, None)
(4, None)
(5, Some(a3)) 
```

当然，我们可以得到一个可变数组，遍历原始列表并填写相应的元素。**但是考虑到时间复杂度不应该是超线性的，`n`**那么 fp 风格的做法是什么？也许这是一个简单的问题，但我就是想不通......希望有人能帮忙。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T18:26:45.890

如果你有一个大集合和许多/大的间隙，这将浪费内存。我建议您改用 a`Map[Int,B]`并使用`get`返回 a 的操作`Option[B]`。交换可以如下进行：

```
scala> List("a1"->1, "a2"->2, "a3"->5)
res3: List[(java.lang.String, Int)] = List((a1,1), (a2,2), (a3,5))

// swap the elements and create a Map
scala> res3.map(_.swap).toMap
res4: scala.collection.immutable.Map[Int,java.lang.String] = Map(1 -> a1, 2 -> a2, 5 -> a3)

scala> res3.map(_.swap).toMap.get(3)
res5: Option[java.lang.String] = None

scala> res3.map(_.swap).toMap.get(1)
res6: Option[java.lang.String] = Some(a1) 
```

# jquery - jquery变量传递错误

> ID：14221490
> 
> 赞同：-2
> 
> 时间：2013-01-08T18:19:00.457
> 
> 标签：jquery, jquery-ui

我有一个按钮名称“修改”，单击时通过以下方式获取它的值

```
 $('button[name=modify]').click(function() {

        alert("button value that you click "+$(this).val());
        mybuttonvalue=$(this).val();
        alert("mybuttonvalue @ button click "+mybuttonvalue);
        $( "#mydialog" ).dialog( "open" );

    }) 
```

并且在文档准备好后声明名为“mybuttonvalue”的变量，并在模型对话框表单的打开方法中使用如下

```
 open:function(){
                alert(mybuttonvalue);
                alert($('#ztitle'+mybuttonvalue).val());
                alert($('#znews'+mybuttonvalue).val());
            $('#title').val($('#ztitle'+mybuttonvalue).val());              
            $('#news').val($('#znews'+mybuttonvalue).val());
        }, 
```

此时变量的值始终为0。有人可以指出我在哪里做错了。请？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:24:12.250

不要在一个函数中设置变量并在另一个函数中使用它们。

相反，在您需要的函数中查询值：

```
$('button[name=modify]').click(function() {
  $( "#mydialog" ).dialog( "open" );
}); 
```

和

```
open:function(){
  var mybuttonvalue = $('button[name=modify]').val();

  alert($('#ztitle'+mybuttonvalue).val());
  alert($('#znews'+mybuttonvalue).val());

  $('#title').val($('#ztitle'+mybuttonvalue).val());              
  $('#news').val($('#znews'+mybuttonvalue).val());
}, 
```

这里讨论了另一个变体：[jquery-ui, Use dialog('open') and pass a variable to the DIALOG](https://stackoverflow.com/questions/2889877/jquery-ui-use-dialogopen-and-pass-a-variable-to-the-dialog)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T18:24:52.493

试试这个：-

```
open:function(){
                alert($('button[name=modify]').val())
            $('#title').val($('#ztitle'+mybuttonvalue).val());              
            $('#news').val($('#znews'+mybuttonvalue).val());
        }, 
```

# vb.net - 为什么 now.tobinary 给出两个不同的结果？

> ID：14221513
> 
> 赞同：1
> 
> 时间：2013-01-08T18:20:18.853
> 
> 标签：vb.net

下面是我在 VS2010 中的即时窗口中的复制和粘贴。请注意，Now 函数的字符串表示形式相同，但它们的二进制表示形式大不相同。从 CDate 展开 Now 函数没有任何区别。为什么？

```
?CDate(Now)

1/8/2013 10:06:46 AM

?CDate(Now.ToString)

1/8/2013 10:06:52 AM

?CDate(Now.ToString).ToBinary

634932364230000000

?CDate(Now).ToBinary

-8588439384563815032

?Now.ToBinary

-8588439380551725996 
```

请注意，我现在在每一行都使用完全相同的时间。为什么我在使用 ToString 函数时会得到“异常”的数值结果？

```
?Now.ToBinary

-8588439366264255565

?datetime.FromBinary(-8588439366264255565)

1/8/2013 10:37:39 AM

?datetime.FromBinary(-8588439366264255565).ToBinary

-8588439366264255565

?cdate(datetime.FromBinary(-8588439366264255565).ToString ).ToBinary 

634932382590000000

?CDate(datetime.FromBinary(-8588439366264255565)).ToBinary

-8588439366264255565 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:25:34.697

“现在”保持不断变化的当前日期/时间。如果您希望值保持不变 - 首先将其分配给一个变量，然后在其余代码中使用该变量。

编辑

如果您想看到类似毫秒的小变化，请尝试使用类似`Now.ToFileTime`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:49:09.550

这是因为 DateTime.Now 具有毫秒精度，但是当您调用 ToString 时，不会打印毫秒。这两个日期不再相同。

如果您使用包含毫秒的格式打印日期，您将得到相同的结果：

```
Dim testDate = DateTime.Now()
Console.WriteLine(testDate.ToBinary)
Dim testDateToString = CDate(testDate.ToString("O"))
Console.WriteLine(testDateToString.ToBinary) 
```

输出：

```
-8588439319484221453
-8588439319484221453 
```

# c# - Windows 服务看不到文件

> ID：14221519
> 
> 赞同：3
> 
> 时间：2013-01-08T18:20:34.480
> 
> 标签：c#, nhibernate, windows-services

我创建了一个**Windows 服务**来为我管理一些文件。出于调试目的，我还编写了一个控制台入口点，因此我的所有实际服务代码都是一个独立于 Windows 服务的类。我正在使用带有流利**NHibernate的****SQLite** DB来存储设置等。

 **当我运行控制台模式时，它运行良好，但在尝试启动进程时却没有。我已经在我的进程开始时进行了调试，发现当 NHibernate 尝试创建会话时，即使它确实存在，它也看不到 db 文件。

我已经将该进程设置为以管理员身份运行，并且还尝试将其作为`Allow access to desktop`启用“”的本地系统帐户运行，但它仍然无法获取数据库文件。这意味着**NHibernate**无法加载该文件，因此它会创建一个新文件，并且当我的服务尝试从数据库加载数据时，它会失败，因为它加载了一个空白数据库文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:13:18.247

所以事实证明，即使我的进程文件在特定文件夹中，它在 Windows 目录的上下文中运行，我已经添加了以下代码，现在它可以完美运行：

```
System.IO.Directory.SetCurrentDirectory(System.AppDomain.CurrentDomain.BaseDirectory); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T20:03:59.760

可能是文件权限问题。检查服务执行用户是否可以读/写 db 文件。

或者，它可能是工作目录问题： [Windows 服务在哪个目录中运行？](https://stackoverflow.com/questions/884963/what-directory-does-a-windows-service-run-in)

您可以使用绝对路径来查找文件。

您可以在启动服务时尽早使用 SetCurrentDirectory()，并将从服务可执行文件的路径中提取的内容传递给它。另一方面，通常修改的数据不应该在服务的安装目录中，而是在例如 ProgramData 文件夹下。

app.config 仍照常加载，因此可用于根据需要配置任何安装相关路径。**

# iphone - 当我在 iPhone 设置中切换到另一种语言时，应用程序没有更改语言

> ID：14221520
> 
> 赞同：0
> 
> 时间：2013-01-08T18:20:38.007
> 
> 标签：iphone, xcode, sdk, localization, programming-languages

我的应用程序“Apnea Trainer”有一个奇怪的问题。这个应用程序有多种语言，默认本地化是英语。自从我向 Apple 发送了最后一次更新（2012 年 11 月）以来，我没有接触过应用程序、Xcode 或我的 Mac OS。昨天我决定从新的更新开始，但是当我今年第一次尝试在模拟器或 iPhone 上运行该应用程序时，它以德语开始。我对所有语言都使用了可本地化的字符串，但我无法通过在 iOS 设置中更改语言来更改语言（发生在 iPhone 和模拟器上）。

我尝试了什么： - 重新启动所有内容 - 将设备和模拟器的语言多次更改为德语，然后再改回英语 - 删除 Xcode 并再次安装 - 检查 Xcode 更新（有最新版本） - 将 iPhone 从 iOS 6.0 更新到 6.0。 1 - 检查了我发送给 Apple 的应用程序......正常工作

* * *

编辑：尝试更改区域格式后...所有文件现在都是红色的，但我没有收到任何错误并且应用程序正在运行，但仍然是德语（[http://i.stack.imgur.com/NoZRi .jpg](http://i.stack.imgur.com/NoZRi.jpg) )

* * *

编辑二：

我试图在另一台 Mac 上运行该应用程序。相同的操作系统，相同的 Xcode 版本，相同的问题。第一次构建没问题，当我第二次以德语运行应用程序时

我能做些什么？？？

* * *

编辑三：

我什至设置了一个新项目，但是当我复制故事板的内容时，问题又回来了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-28T08:50:43.147

XCODE 6 完全忽略了 iPhone 的设置。

在 XCODE 中转到“编辑方案”（在“停止”按钮旁边）。

运行/选项/应用程序语言。

在这里更改设置。

确保你没有设置任何东西

运行/参数/启动时传递的参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:31:21.953

你试过换地区吗？设置 -> 常规 -> 国际 -> 区域格式

# c# - 用 40K 个对象查找 2 个集合的差异

> ID：14221523
> 
> 赞同：3
> 
> 时间：2013-01-08T18:20:43.493
> 
> 标签：c#, linq, plinq

我有 2 个集合都包含相同类型的对象，并且两个集合每个都有大约 40K 对象。

每个集合包含的对象的代码基本上就像一个字典，除了我重写了 equals 和 hash 函数：

```
public class MyClass: IEquatable<MyClass>
{
    public int ID { get; set; }
    public string Name { get; set; }

    public override bool Equals(object obj)
    {
        return obj is MyClass && this.Equals((MyClass)obj);
    }

    public bool Equals(MyClass ot)
    {
        if (ReferenceEquals(this, ot))
        {
            return true;
        }

        return 
         ot.ID.Equals(this.ID) &&
         string.Equals(ot.Name, this.Name, StringComparison.OrdinalIgnoreCase); 
    }

    public override int GetHashCode()
    {
         unchecked
         {
             int result = this.ID.GetHashCode();
             result = (result * 397) ^ this.Name.GetSafeHashCode();
             return result;
         }
    }
} 
```

我用来比较集合并获取差异的代码只是一个使用 PLinq 的简单 Linq 查询。

```
ParallelQuery p1Coll = sourceColl.AsParallel();
ParallelQuery p2Coll = destColl.AsParallel();

List<object> diffs = p2Coll.Where(r => !p1Coll.Any(m => m.Equals(r))).ToList(); 
```

有人知道比较这么多对象的更快方法吗？目前在四核计算机上大约需要 40 秒 +/- 2 秒。根据数据进行一些分组，然后并行比较每组数据可能会更快吗？如果我首先根据名称对数据进行分组，我最终会得到大约 490 个唯一对象，如果我首先按 ID 对数据进行分组，我最终会得到大约 622 个唯一对象。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-08T18:21:58.100

您可以使用[except](http://msdn.microsoft.com/en-us/library/bb300779.aspx "可枚举。除外")方法，该方法将为您提供`p2Coll`不在`p1Coll`.

```
var diff = p2Coll.Except(p1Coll); 
```

* * *

**更新**（一些性能测试）：

免责声明：

实际时间取决于多种因素（例如集合的内容、硬件、机器上运行的内容、哈希码冲突的数量等），这就是我们使用复杂性和大 O 表示法的原因（参见 Daniel Brückner 的评论）。

以下是在我 4 岁的机器上运行 10 次的一些性能统计数据：

```
Median time for Any(): 6973,97658ms
Median time for Except(): 9,23025ms 
```

[我的测试的源代码](https://gist.github.com/4486992 "源代码")可在 gist 上找到。

* * *

**更新 2：**

如果您想从第一个和第二个集合中获得不同的项目，您必须在这两个集合上实际执行[Expect](http://msdn.microsoft.com/en-us/library/bb300779.aspx "可枚举。除外")并且该[Union](http://msdn.microsoft.com/en-us/library/bb341731.aspx "可枚举的联合")结果：

```
var diff = p2Coll.Except(p1Coll).Union(p1Coll.Except(p2Coll)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:24:01.267

[相交](http://msdn.microsoft.com/en-us/library/bb460136.aspx)

```
int[] id1 = { 44, 26, 92, 30, 71, 38 };
int[] id2 = { 39, 59, 83, 47, 26, 4, 30 };

IEnumerable<int> both = id1.Intersect(id2);

foreach (int id in both)
    Console.WriteLine(id);

/*
This code produces the following output:

26
30
*/ 
```

# c++ - GCC 4.7.2 的 shared_ptr（模板化）赋值运算符的实现是否存在错误？

> ID：14221524
> 
> 赞同：15
> 
> 时间：2013-01-08T18:20:44.467
> 
> 标签：c++, gcc, stl, c++11, smart-pointers

我的问题涉及`shared_ptr`GCC 4.7.2 中的赋值运算符模板的实现，我怀疑它包含一个错误。

**前提 1：C++11 标准**

这是我正在谈论的赋值运算符模板的签名：

```
template<class Y> shared_ptr& operator=(const shared_ptr<Y>& r) noexcept; 
```

来自 C++11 标准（20.7.2.2.3）：

*“相当于* `shared_ptr(r).swap(*this)`*。”*

换句话说，赋值运算符模板是根据构造函数模板定义的。构造函数模板的签名如下：

```
template<class Y> shared_ptr(const shared_ptr<Y>& r) noexcept; 
```

来自 C++11 标准（20.7.2.2.1）：

*“要求：除非 Y* 可隐式转换为 T*，否则 [...] 构造函数不得参与重载决议。”*

**前提 2：GCC 4.7.2 的实现：**

现在 GCC 4.7.2 的构造函数模板的实现对我来说似乎是正确的（`std::__shared_ptr`是的基类`std::shared_ptr`）：

```
template<typename _Tp1, typename = 
typename std::enable_if<std::is_convertible<_Tp1*, _Tp*>::value>::type>
__shared_ptr(__shared_ptr<_Tp1, _Lp>&& __r) noexcept
    : 
    _M_ptr(__r._M_ptr), 
    _M_refcount()
{
    _M_refcount._M_swap(__r._M_refcount);
    __r._M_ptr = 0;
} 
```

但是，GCC 4.7.2 对赋值运算符模板的实现如下：

```
template<typename _Tp1>
__shared_ptr& operator=(const __shared_ptr<_Tp1, _Lp>& __r) noexcept
{
    _M_ptr = __r._M_ptr;
    _M_refcount = __r._M_refcount; // __shared_count::op= doesn't throw
    return *this;
} 
```

让我印象深刻的是，这个操作**不是**根据构造函数模板定义的，也不是`swap()`. 特别是，普通赋值`_M_ptr = __r._M_ptr`不会产生与类型`_Tp1*`和`_Tp*`通过`std::is_convertible`（*可以是专门*的）显式检查可转换性时相同的结果。

**前提 3：VC10 实现**

我注意到 VC10 在这方面确实有一个更符合标准的实现，我认为这是正确的，并且在我的测试用例中表现得和我预期的一样（而 GCC 没有）：

```
template<class _Ty2>
_Myt& operator=(const shared_ptr<_Ty2>& _Right)
{
    // assign shared ownership of resource owned by _Right
    shared_ptr(_Right).swap(*this);
    return (*this);
} 
```

**问题**：

GCC 4.7.2 的实现中是否确实存在错误`shared_ptr`？我找不到有关此问题的任何错误报告。

**后脚本**：

如果你想问我我的测试用例是什么，我*为什么要*关心这个看似不重要的细节，为什么我似乎暗示我需要专攻`std::is_convertible`，请在聊天中这样做。这是一个很长的故事，没有办法在不被误解的情况下总结它（及其所有令人不快的后果）。先感谢您。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-08T18:43:19.730

> 让我印象深刻的是，这个操作**不是**根据构造函数模板定义的，也不是`swap()`.

它不需要，它只需要表现得*好像*它是用这些术语定义的。

> 特别是，普通赋值`_M_ptr = __r._M_ptr`不会产生与类型`_Tp1*`和`_Tp*`通过`std::is_convertible`（*可以是专门*的）显式检查可转换性时相同的结果。

我不同意：**[meta.type.synop]/1** *除非另有说明，否则为本小节中定义的任何类模板添加特化的程序的行为是未定义的。*

所以你不能改变`is_convertible<Y*, T*>`and if `Y*`is convertible to `T*`then 赋值将起作用，因为（指针和 refcount 对象的）两个赋值都是`noexcept`最终结果等价于交换。如果指针不可转换，则赋值将无法编译，但 也是如此`shared_ptr(r).swap(*this)`，因此它仍然是等价的。

如果我错了，请提交错误报告，我会修复它，但我认为符合标准的程序无法检测 libstdc++ 实现与标准要求之间的差异。也就是说，我不会反对将其更改为以`swap`. `shared_ptr`当前的实现直接来自[Boost 1.32](http://svn.boost.org/svn/boost/tags/release/Boost_1_32_0/boost/boost/shared_ptr.hpp)，我不知道 Boost 是否仍然以相同的方式执行它，或者它`shared_ptr(r).swap(*this)`现在是否使用。

[完全披露，我是 libstdc++ 维护者，主要负责`shared_ptr`代码，该代码最初由作者慷慨捐赠，`boost::shared_ptr`然后被我肢解。]

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-08T18:43:08.393

GCC 中的实现符合标准中的要求。当标准定义一个函数的行为等同于一组不同的函数时，这意味着前者的效果等同于标准中定义的后者函数的效果（而不是实现的）。

该标准不要求使用 `std::is_convertible`for 该构造函数。构造函数需要 SFINAE，但赋值运算符不需要 SFINAE。类型可转换的要求放在程序上，而不是在实现上`std::shared_ptr`，这是您的责任。如果传入的类型是不可转换的，那么它是你程序中的一个错误。如果它们是，那么即使您想通过专门化`is_convertible`模板来禁用使用，实现也必须接受代码。

再说一次，专门`is_convertible`限制**指针**的转换是未定义的行为，因为您正在更改基本模板的语义，这在标准中是明确禁止的。

这导致了您不想回答的原始问题：什么是让您思考此解决方案的用例。或者换一种说法，为什么人们不断地询问解决方案而不是他们想要解决的真正问题？

# c# - ASP.NET:HttpContext.Current.User.Identity.Name 似乎在 page_load 上随机失去其价值

> ID：14221528
> 
> 赞同：0
> 
> 时间：2013-01-08T18:20:56.177
> 
> 标签：c#, asp.net, login

基本上，我在 Default.aspx 页面上有一个登录控件，我在其中验证用户，并且在有效的用户名和密码上，我将它们导航到另一个页面 Upload.aspx。

在页面 Upload.aspx 上，我想将用户名值存储在一个全局变量中，然后在 SQL 过程的数量中传递这个全局变量。

要获取页面 Upload.aspx 上的用户名值，我在 page_load 事件下有此代码

```
public partial class Upload : System.Web.UI.Page 
{   
    public static string uname;
    public static string un;

        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                un = HttpContext.Current.User.Identity.Name;
                uname = un;

                clsClass find_user_type = new clsClass();
                user_Type = find_user_type.Find_UserType_Of(uname).Trim();
            }
            else
            {
                uname = un;  //the first If condition will be true atleast 1st, 
                             //so that one `un` is set i can copy it into `uname` 
                             //when its postback
            }
        }
} 
```

> Find_UserType_Of(uname) 是 clsClass 中采用字符串参数 (uname) 的方法。

现在，当服务器是我的本地主机时，当我在本地机器上运行这段代码时，它运行得很好。但是当我将它上传到网络服务器时，它开始表现得很有趣，并告诉我一个程序在

> Find_UserType_Of(uname) 方法需要一个未传递的参数！

任何想法，发生了什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T18:26:05.463

你最大的问题是`static`你的变量，这将导致它的值发生变化，这取决于页面上的谁，因为该变量是为所有请求共享的。您没有在本地注意到，因为您是唯一提出请求的人：

```
public static string uname;
public static string un; 
```

而应该是

```
private string uname;
private string un; 
```

更多解释可以在我在[Ajax PageMethod 访问页面级私有静态属性的回复中找到](https://stackoverflow.com/questions/13497680/ajax-pagemethod-accessing-page-level-private-static-property/13497805#13497805)

您可能还想[阅读有关私有变量](http://msdn.microsoft.com/en-us/library/st6sy9xe%28v=vs.110%29.aspx)以及相关的内容：[Why should I use a private variable in a property accessor?](https://stackoverflow.com/questions/1961536/why-use-private-variables-when-we-can-use-properties)

**更新**：您在 Postback 上也有问题，因为您没有设置`un`. 回发后，您仍然需要设置`un`，或者只需使用`HttpContext.Current.User.Identity.Name`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:10:50.550

在这种情况下，*对*ASP.NET应用程序的每个请求都会创建. 这意味着必须在每个将使用它的*请求上设置**每个变量。*您可以通过使用使您的网页表现得像它有状态一样来解决这个限制。`System.Web.UI.Page``Upload`**[`ViewState`](http://msdn.microsoft.com/en-us/library/ms972976.aspx)**

 **或者，对于全局变量，使用`Application`字典：`Application["uname"] = HttpContext.Current.User.Identity.Name`或者对于用户，使用`Session`字典`Session["uname"] = HttpContext.Current.Identity.Name`。**

# android - android nfc设置切换监听器

> ID：14221535
> 
> 赞同：3
> 
> 时间：2013-01-08T18:21:26.857
> 
> 标签：android, toggle, nfc

我想在设置首选项中收听 nfc 启用/禁用，所以我在我的活动中添加以下代码

```
 IntentFilter filter = new IntentFilter("android.nfc.action.ADAPTER_STATE_CHANGE");
    BroadcastReceiver receiver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            tv.setText("broadcast received :" + NfcAdapter.getDefaultAdapter(MainActivity.this).isEnabled());
            Toast.makeText(MainActivity.this, "broadcast received", Toast.LENGTH_LONG).show();
        }
    };
    registerReceiver(receiver, filter); 
```

但看起来 ADAPTER_STATE_CHANGE 不起作用。

任何人都可以有一个想法来听 nfc 的状态吗？请帮忙..！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-12T11:08:27.897

这个 Intent 的名称是“android.nfc.action.ADAPTER_STATE_CHANGED”，而不是“android.nfc.action.ADAPTER_STATE_CHANGE”。请注意**CHANGED**上的**D**。

# android - 为 android 构建 ANE Share/SMS/Toast 扩展

> ID：14221548
> 
> 赞同：0
> 
> 时间：2013-01-08T18:22:36.490
> 
> 标签：android, actionscript, air, air-native-extension

我是 AIR for Android 开发的新手，似乎无法通过在 AIR for Android 上的 ActionScript 中为我的 android 开发构建 ANE 共享/SMS/Toast 本机扩展。我已经从[http://extensionsforair.com/extensions/ssd-android-extensions/](http://extensionsforair.com/extensions/ssd-android-extensions/)下载了 ANE 源代码。我有 3 个文件夹：AndroidExtensions、AndroidExtensions_Demo 和 AndroidExtensions_Native。

虽然 AndroidExtensions 文件夹包含我已成功链接到并在我的 ActionScript 文档中引用的 ActionScript 文件，但我认为我需要将 AndroidExtensions_Native 文件夹的内容构建到 ANE 文件中，以将其放置在我的应用程序的 ActionScript 文档类路径中建造。

我已经下载并设置了 Adob​​eAIRSDK，所以我可以使用 adt.bat 来构建 ane。通过文档并运行

```
adt -package -target ane myext.ane 
```

产生一个错误 - “没有足够的参数”。

如果有人可以帮助我，我将不胜感激，因为我手头没有太多时间，尤其是那些使用 ANE 共享/SMS/Toast 在 Android 上进行 ActionScript AIR 开发的人。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T04:54:03.010

您在打包命令中需要的信息比您指定的要多得多。

您可能应该通读 Adob​​e 提供的以下[帮助指南](http://help.adobe.com/en_US/air/extensions/WSf00ab63af761f170-168f6f2a129378b935d-8000.html)。最终的命令应该看起来更像这样：

```
adt -package <signing options> -target ane MyExtension.ane MyExt.xml -swc MyExtension.swc 
    -platform iPhone-ARM -platformoptions platformiOSARM.xml 
        foo.a abc/x.framework lib.o -C platform/ios . 
    -platform default -C platform/default library.swf 
```

# debugging - 调试器如何知道源代码中的行号？

> ID：14221554
> 
> 赞同：5
> 
> 时间：2013-01-08T18:23:07.010
> 
> 标签：debugging, line-numbers

调试器，如 Eclipse、NetBeans、Visual Studio 等中的调试器

我想知道，因为调试器在执行机器代码时对其进行工作......他们如何跟踪源代码中的行号？

跟踪行号是不是很困难，因为一个高级指令可能有一堆机器语言指令而另一个可能没有机器语言指令（可能是因为它只是支持另一个高级指令）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T18:26:15.627

当您使用调试标志（例如`gcc -g ...`）编译代码时，编译器会将有关源文件和行号的信息插入到编译后的二进制文件中，以便调试器可以在运行时使用这些信息。 [这个答案](https://stackoverflow.com/questions/89603/how-does-the-debugging-option-g-change-the-binary-executable)更详细地讨论了调试符号。

# templates - 如何创建自定义 IntelliJ 项目模板？

> ID：14221556
> 
> 赞同：7
> 
> 时间：2013-01-08T18:23:09.283
> 
> 标签：templates, intellij-idea, projects-and-solutions

我希望在 IntelliJ IDEA（社区版 12.0）中有一个自定义项目模板

我需要的是项目在创建时复制一些标准文件，然后将一些值插入这些文件中。

我可能可以自己使用一点 bash 魔法来做到这一点，但是在创建新项目时选择模板并一次性完成所有工作会非常好和整洁。

MSVS 对自定义项目有很好的支持，我有点希望 IntelliJ 也有一些相同的功能，尽管我找不到它。

我发现的唯一东西是插件工具，但我无法开始使用它——当我将应用程序组件添加到插件项目时，IntelliJ 只是告诉我包 com.intellij.openapi.components 不存在。

干杯!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T17:09:33.080

我发现你可以很容易地创建项目模板，你所做的就是进入菜单，工具，将项目保存为模板。不幸的是，这并没有为我提供我需要的功能，所以我制作了一个 bash 脚本来做我需要的事情。

# python - 以编程方式设置区域时，在 boto 中连接弹性豆茎的好方法是什么？

> ID：14221557
> 
> 赞同：2
> 
> 时间：2013-01-08T18:23:09.860
> 
> 标签：python, amazon-web-services, boto

我正在使用 boto (http://docs.pythonboto.org/en/latest/) 并希望在连接到弹性 beanstalk 时以编程方式选择一个区域。到目前为止，我所能想到的只是：

```
import boto
from boto.beanstalk.layer1 import Layer1
Layer1.DefaultRegionName = 'us-west-1'
Layer1.DefaultRegionEndpoint = 'elasticbeanstalk.us-west-1.amazonaws.com'
ebs = boto.connect_beanstalk() 
```

虽然我理论上可以打电话

```
boto.connect_beanstalk(region=<something>) 
```

我不知道如何构造一个 boto.regioninfo.RegionInfo，这显然是 Layer1 类所期望的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T23:32:54.520

在我看来，这绝对是一个错误——但仔细观察代码，似乎从未使用过 RegionInfo 上的连接参数。在构建自己的 RegionInfo 并将其传递给构造函数时将其设置为 None 似乎对我有用。

```
regionInfo = boto.regioninfo.RegionInfo(None, 'us-west-1', 'elasticbeanstalk.us-west-1.amazonaws.com')
beanstalk = boto.connect_beanstalk(region=regionInfo)
mt.describe_applications() 
```

对于它的价值，我很确定在建立连接时只使用完整的区域端点参数 - 例如“elasticbeanstalk.us-west-1.amazonaws.com”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-13T13:52:53.980

我一直这样做的方式是使用`connect_to_region`，如下所示：

```
import boto
ebs = boto.beanstalk.connect_to_region('us-west-1') 
```

这将负责正确初始化（和缓存）所需的`RegionInfo`对象。

# amazon-s3 - 存储桶文件上的 Amazon AWS 分页

> ID：14221565
> 
> 赞同：0
> 
> 时间：2013-01-08T18:23:24.150
> 
> 标签：amazon-s3

我将图像存储在 Amazon S3 存储桶中。假设存储桶有 3,000 张图像。当我调用`list_objects`它时，它会返回一个数组中的所有 3,000 个图像。所以我的问题是我们可以在桶上进行分页吗？例如返回 100 张图片，当用户点击第二页时，`list_objects`应该返回其他 100 张图片。这样，请求会更快，并且可以在较慢的 Internet 连接上正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:43:01.240

`Amazon S3`支持分页，你必须使用`keyMarker`and `maxResults`in`listObjects()`方法来实现分页 -

了解更多关于这个 -

[http://www.barneyb.com/barneyblog/2010/12/23/amazon-s3-cfc-paged-lists/](http://www.barneyb.com/barneyblog/2010/12/23/amazon-s3-cfc-paged-lists/)

# c# - Mongodb Array ElemMatch 有 2 个条件

> ID：14221567
> 
> 赞同：1
> 
> 时间：2013-01-08T18:23:25.327
> 
> 标签：c#, mongodb, mongodb-.net-driver

我有一个集合“foo”：

```
db.foo.insert({a:[1, 10]})
db.foo.insert({a:[4, 6]}) 
```

和一个查询：

```
db.foo.find({a: {$elemMatch: {$gte: 5, $lte: 7}}}) 
```

结果是：

```
{a: [4, 6]} 
```

我的问题是如何`Query.ElemMatch()`在这种情况下使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:20:05.003

您可以使用 C# 的集合初始化器语法对其进行清理：

```
Query.ElemMatch("a", new QueryDocument {
    {"$gte", 5}, 
    {"$lte", 7}
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T19:10:55.533

我找到了解决我的问题的方法，希望它对某人有用

```
Query.ElemMatch("a", Query.And(new QueryDocument("$gte", 5), new QueryDocument("$lte", 7))) 
```

# css - CSS - div 内的 div，IE 中没有背景颜色

> ID：14221568
> 
> 赞同：2
> 
> 时间：2013-01-08T18:23:24.853
> 
> 标签：css, internet-explorer, html, background-color

我在 HTML 中有这个简单的布局：

```
<body>
    <div class="container">
        <p class="title1">Title 1</p>
        <div class="content">
            <p class="title2">Title 2</p>
        </div>
    </div>
</body> 
```

以及以下 CSS：

```
body {
    background-image:url(masthead.gif);
    margin: 0;
    padding: 0;
}

.container {
    position:absolute;
    width: 960px;
    height:600px;
    left: 50%;
    margin-left: -480px;
    margin-top: -300px;
    top: 50%;
    -moz-box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    -webkit-box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    border: 1px solid #81a1b7;
    zoom: 100%;
    background-color: rgba(117,161,180,0.5);
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#7f75A1B4,endColorstr=#7f75A1B4);
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#7f75A1B4,endColorstr=#7f75A1B4)";
}

.content {
    background-color: rgba(255,255,255,0.8);
    border-radius: 15px 15px 15px 15px; 
    padding: 10px 0;
    margin: 15px;
    -moz-box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    -webkit-box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    height: 500px;  
}

.title1 {
    font-family:Arial, Helvetica, sans-serif;
    font-size:20px;
    color:#FFF;
    margin-top: 15px;
}
.title2 {
    font-family:Arial, Helvetica, sans-serif;
    font-size:18px;
    color:#000;
    margin-top: 0px;
} 
```

我期待在内部“内容”div 中看到白色背景和圆角......我在 Firefox 和 Chrome 中使用它，但在 Internet Explorer 中没有背景颜色。我究竟做错了什么？

查看[JsFiddle上的代码](http://jsfiddle.net/SRJ6U/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:32:36.147

IE8 及更低版本不支持 rgba 和边框半径。
所以`.content {background-color: rgba(255,255,255,0.8);}`不会在这些浏览器中显示任何内容：S

您将需要使用十六进制颜色或 png 来代替。

# c# - MassTransit 和简单注射器

> ID：14221571
> 
> 赞同：4
> 
> 时间：2013-01-08T18:23:41.783
> 
> 标签：c#, inversion-of-control, masstransit, simple-injector

我正在审查[.NET 的 MassTransit 分布式应用程序框架](http://masstransit-project.com/)。根据该网站的说法， [MassTransit 从一开始就构建了涉及 IoC 容器的概念，](http://docs.masstransit-project.com/en/latest/configuration/containers.html)并为少数更“主流”的 IoC 容器提供支持库。（目前）有适用于 Autofac、StructureMap、Castle Windsor、Ninject 和 Unity 的 NuGet 包。

[出于性能原因](http://www.palmmedia.de/Blog/2011/8/30/ioc-container-benchmark-performance-comparison)，我选择了[Simple Injector](https://simpleinjector.org)作为我选择的 IoC 容器，但我无法找到一个集成库，可以为 MassTransit 添加对 Simple Injector 的支持。

有没有人试过这个，让它工作并且有一些代码可以让我开始？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T19:12:26.217

我对 MassTransit 不熟悉，但是在查看[了其他容器的配置示例](http://docs.masstransit-project.com/en/latest/usage/containers/index.html)后，我想到了：

```
public static void main(string[] args)
{
    var container = new Container();

    var consumers = container.GetTypesToRegister(typeof(IConsumer),
        applicationAssemblies);

    foreach (Type consumer in consumers)
        container.Register(consumer);

    IServiceBus bus = ServiceBusFactory.New(sbc => {
        //other configuration options

        sbc.Subscribe(subs => {
            foreach (var consumer in consumers)
                subs.Consumer(consumer);
        });
    });

    container.RegisterSingle<IServiceBus>(bus);

    container.Verify();
} 
```

# javascript - 定期更改标签文本 Javascript

> ID：14221577
> 
> 赞同：0
> 
> 时间：2013-01-08T18:23:57.727
> 
> 标签：javascript, sleep

我尝试使用以下代码定期更改标签的文本：

```
 function sleep(milliSeconds) {
        var startTime = new Date().getTime();
        while (new Date().getTime() < startTime + milliSeconds); 
    }
    function showMap() {
        var str = document.getElementById("lbPoints").firstChild.nodeValue;
        var lbl = document.getElementById("my");
        var strs = str.split("-");
        var millisecondsToWait = 500;

        for (var i = 0; i < strs.length-1; i++) {
            lbl.innerHTML = strs[i];
            sleep(500);
        }     
    } 
```

我的“str”和“strs”是对的。代码有效，但等待 5 秒并将 strs 中的最终字符串打印到屏幕上，仅此而已。我可以做些什么来定期更改它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T18:26:49.067

这不是你睡觉的方式。在任何语言中重复测试直到某个日期是正确的。

改为这样做：

```
function showMap() {
    var str = document.getElementById("lbPoints").firstChild.nodeValue;
    var lbl = document.getElementById("my");
    var strs = str.split("-");
    var millisecondsToWait = 500;
    var i=0;
    var interval = setInterval(function(){
        if (i==strs.length-2) clearInterval(interval); 
        lbl.innerHTML = strs[i++];
    }, millisecondsToWait);   
} 
```

**[示范](http://jsfiddle.net/fkBAd/)**

这使用[setInterval](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)重复调用一个函数，并在数组末尾使用[clearInterval来停止调用该函数。](https://developer.mozilla.org/en-US/docs/DOM/window.clearInterval)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T18:25:42.140

只需使用`setInterval`，这就是它的用途。从[文档](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)中：

> 重复调用函数或执行代码片段，每次调用该函数之间有固定的时间延迟。

# linq - EF 和 LINK 查询未在“选择”中提供所有表值

> ID：14221578
> 
> 赞同：1
> 
> 时间：2013-01-08T18:23:58.913
> 
> 标签：linq, entity-framework

如何使用“选择”中未包含的“位置”中的列？“where”方法没有显示我的 SQL Server 表中的所有列，只显示了 select 语句中的 3。我需要根据表中的不同列进行选择：

```
using (var context = new URIntakeEntities())
{
    return context.Claims.Select(
        u => new Models.Claim
        {
            ClaimNumber = u.ClaimNumber,
            DateOfInjury = u.DateOfInjury,
            Denied = u.Denied
        }).Where(u => u.?????).ToList();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T18:27:51.270

你应该把你的`where`陈述移到`select statement`.

```
using (var context = new URIntakeEntities())
{
    return context.Claims.Where(u=> u.?????).Select(
        u => new Models.Claim
        {
            ClaimNumber = u.ClaimNumber,
            DateOfInjury = u.DateOfInjury,
            Denied = u.Denied
        }).ToList();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T18:27:55.730

> 如何使用“选择”中未包含的“位置”中的列？

你不能。Where 应用于当前类型的序列。因此，您应该在投影结果之前应用过滤器：

```
using (var context = new URIntakeEntities())
{
    return context.Claims
                  .Where(u => u.?????)
                  .Select(u => new Models.Claim 
                   {
                       ClaimNumber = u.ClaimNumber,
                       DateOfInjury = u.DateOfInjury,
                       Denied = u.Denied
                   }).ToList();
} 
```

# comments - 如何为 package.json 添加注释以进行 npm 安装？

> ID：14221579
> 
> 赞同：475
> 
> 时间：2013-01-08T18:23:59.907
> 
> 标签：comments, npm

我有一个简单的 package.json 文件，我想添加评论。有没有办法做到这一点，或者有任何黑客可以做到这一点？

```
{
  "name": "My Project",
  "version": "0.0.1",
  "private": true,
  "dependencies": {
    "express": "3.x",
    "mongoose": "3.x"
  },
  "devDependencies" :  {
    "should": "*"
    /* "mocha": "*" not needed as should be globally installed */
  }
} 
```

上面的示例注释在 npm 中断时不起作用。我也尝试过 // 样式注释。

* * *

## 回答 #1

> 赞同：523
> 
> 时间：2013-01-08T18:36:43.673

这最近在[Node.js 邮件列表中](https://groups.google.com/d/msg/nodejs/NmL7jdeuw0M/yTqI05DRQrIJ)进行了讨论。

根据创建 npm 的 Isaac Schlueter 的说法：

> ...“//”键永远不会被 npm 用于任何目的，并保留用于注释 ...如果要使用多行注释，可以使用数组或多个“//”键。

使用常用工具（npm、yarn 等）时，将删除多个“//”键。这幸存下来：

```
{ "//": [
  "first line",
  "second line" ] } 
```

这将无法生存：

```
{ "//": "this is the first line of a comment",
  "//": "this is the second line of the comment" } 
```

* * *

## 回答 #2

> 赞同：188
> 
> 时间：2017-08-22T10:38:46.707

在复杂和 hacky 解决方案上浪费了一个小时后，我找到了简单而有效的解决方案来评论我在`package.json`. 像这样：

```
{
  "name": "package name",
  "version": "1.0",
  "description": "package description",
  "scripts": {
    "start": "npm install && node server.js"
  },
  "scriptsComments": {
    "start": "Runs development build on a local server configured by server.js"
  },
  "dependencies": {
    "ajv": "^5.2.2"
  },
  "dependenciesComments": {
    "ajv": "JSON-Schema Validator for validation of API data"
  }
} 
```

当以相同的方式排序时，我现在可以很容易地在 Git 提交差异或编辑器中跟踪这些依赖项/注释对，同时使用 file `package.json`。

并且不涉及额外的工具，只是简单有效的 JSON。

* * *

## 回答 #3

> 赞同：125
> 
> 时间：2013-08-04T22:18:33.233

免责声明：你可能不应该使用这个黑客。请参阅下面的评论。

* * *

这是在 JSON 中添加评论的另一个技巧。自从：

```
{"a": 1, "a": 2} 
```

相当于

```
{"a": 2} 
```

您可以执行以下操作：

```
{
  "devDependencies": "'mocha' not needed as should be globally installed",
  "devDependencies" :  {
    "should": "*"
  }
} 
```

* * *

## 回答 #4

> 赞同：46
> 
> 时间：2018-06-15T14:55:51.233

我一直在这样做：

```
{
  ...
  "scripts": {
    "about": "echo 'Say something about this project'",
    "about:clean": "echo 'Say something about the clean script'",
    "clean": "do something",
    "about:build": "echo 'Say something about building it'",
    "build": "do something",
    "about:watch": "echo 'Say something about how watch works'",
    "watch": "do something",
  }
  ...
} 
```

这样，我既可以阅读脚本本身中的“伪注释”，*也*可以运行以下内容，以在终端中查看某种帮助：

```
npm run about
npm run about:watch 
```

如果您使用`yarn`.

```
yarn about:clean 
```

此外，正如@Dakota Jang 在评论中指出的那样，您可以使用 like 键`//something`来更清楚地表明这是一条评论。
像这样：

```
{
  ...
  "scripts": {
    "//clean": "echo 'Say something about the clean script'",
    "clean": "do something",
    "//build": "echo 'Say something about building it'",
    "build": "do something",
    "//watch": "echo 'Say something about how watch works'",
    "watch": "do something",
  }
  ...
} 
```

然后运行：

```
npm run //build
# or
yarn //build 
```

您的终端中将有一个辅助输出，并且您的 package.json 中也会有一个“注释”。

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2017-07-14T12:24:32.430

NPS（节点包脚本）为我解决了这个问题。它允许您将 NPM 脚本放入单独的 JavaScript 文件中，您可以在其中添加大量注释和任何其他所需的 JavaScript 逻辑。 [https://www.npmjs.com/package/nps](https://www.npmjs.com/package/nps)

`package-scripts.js`我的一个项目的样本

```
module.exports = {
  scripts: {
    // makes sure e2e webdrivers are up to date
    postinstall: 'nps webdriver-update',

    // run the webpack dev server and open it in browser on port 7000
    server: 'webpack-dev-server --inline --progress --port 7000 --open',

    // start webpack dev server with full reload on each change
    default: 'nps server',

    // start webpack dev server with hot module replacement
    hmr: 'nps server -- --hot',

    // generates icon font via a gulp task
    iconFont: 'gulp default --gulpfile src/deps/build-scripts/gulp-icon-font.js',

    // No longer used
    // copyFonts: 'copyfiles -f src/app/glb/font/webfonts/**/* dist/1-0-0/font'
  }
} 
```

我刚刚进行了本地安装`npm install nps -save-dev`并将其放入我的`package.json`脚本中。

```
"scripts": {
    "start": "nps",
    "test": "nps test"
} 
```

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2019-05-12T10:42:42.443

受此线程的启发，这是[我们正在使用](https://github.com/c-hive/guides/blob/8dd6863feb69208c2d49fc8d5356cf8e775bde1d/js/best-practices.md#comment-dependencies-in-the-packagejson)的内容：

```
{
  "//dependencies": {
    "crypto-exchange": "Unified exchange API"
  },
  "dependencies": {
    "crypto-exchange": "^2.3.3"
  },
  "//devDependencies": {
    "chai": "Assertions",
    "mocha": "Unit testing framwork",
    "sinon": "Spies, Stubs, Mocks",
    "supertest": "Test requests"
  },
  "devDependencies": {
    "chai": "^4.1.2",
    "mocha": "^4.0.1",
    "sinon": "^4.1.3",
    "supertest": "^3.0.0"
  }
} 
```

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2014-05-21T18:32:57.743

您总是可以滥用重复键被覆盖的事实。这是我刚刚写的：

```
"dependencies": {
  "grunt": "...",
  "grunt-cli": "...",

  "api-easy": "# Here is the pull request: https://github.com/...",
  "api-easy": "git://..."

  "grunt-vows": "...",
  "vows": "..."
} 
```

但是，尚不清楚 JSON 是否允许重复键（请参阅 [JSON 语法是否允许在对象中重复键？](https://stackoverflow.com/q/21832701/783510)。它似乎与 npm 一起工作，所以我冒险。

推荐的 hack 是使用`"//"`密钥（来自[nodejs 邮件列表](https://groups.google.com/forum/#!msg/nodejs/NmL7jdeuw0M/yTqI05DRQrIJ)）。但是，当我对其进行测试时，它不适用于“依赖项”部分。此外，帖子中的示例使用了多个`"//"`键，这意味着 npm 不会拒绝具有重复键的 JSON 文件。换句话说，上面的 hack 应该总是没问题的。

**更新：**重复密钥破解的一个恼人的缺点是它会`npm install --save`默默地消除所有重复项。不幸的是，它很容易被忽视，你善意的评论也不见了。

`"//"`看起来，黑客仍然是最安全的。但是，多行注释也将被删除`npm install --save`。

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2019-10-15T00:00:24.373

由于大多数开发人员都熟悉基于标签/注释的文档，因此我开始使用的约定是相似的。这是一个味道：

```
{
  "@comment dependencies": [
    "These are the comments for the `dependencies` section.",
    "The name of the section being commented is included in the key after the `@comment` 'annotation'/'tag' to ensure the keys are unique.",
    "That is, using just \"@comment\" would not be sufficient to keep keys unique if you need to add another comment at the same level.",
    "Because JSON doesn't allow a multi-line string or understand a line continuation operator/character, just use an array for each line of the comment.",
    "Since this is embedded in JSON, the keys should be unique.",
    "Otherwise JSON validators, such as ones built into IDEs, will complain.",
    "Or some tools, such as running `npm install something --save`, will rewrite the `package.json` file but with duplicate keys removed.",
    "",
    "@package react - Using an `@package` 'annotation` could be how you add comments specific to particular packages."
  ],
  "dependencies": {
    ...
  },
  "@comment scripts": {
    "build": "This comment is about the build script.",
    "start": [
      "This comment is about the `start` script.",
      "It is wrapped in an array to allow line formatting.",
      "When using npm, as opposed to yarn, to run the script, be sure to add ` -- ` before adding the options.",
      "",
      "@option {number} --port - The port the server should listen on."
    ],
    "test": "This comment is about the test script.",
  },
  "scripts": {
    "build": "...",
    "start": "...",
    "test": "..."
  }
} 
```

注意：对于`dependencies`,`devDependencies`等部分，注释注释不能直接添加到配置对象内的单个包依赖项之上，因为`npm`期望键是 npm 包的名称。因此`@comment dependencies`.

我喜欢向 JSON 添加注释的注释/标签样式方式，因为该`@`符号从普通声明中脱颖而出。

**较早的建议**

以下是我之前的推荐。它内嵌了脚本的注释，但我开始意识到这些注释在某些工具中显示为“命令”（在 VS Code > Explorer > NPM 脚本部分）。最新的建议不受此问题的影响，但脚本注释不再位于同一位置。

```
{
  "@comment dependencies": [
    ...
  ],
  "dependencies": {
    ...
  },
  "scripts": {
    "@comment build": "This comment is about the build script.",
    "build": "...",

    "@comment start": [
      "This comment is about the `start` script.",
      "It is wrapped in an array to allow line formatting.",
      "When using npm, as opposed to yarn, to run the script, be sure to add ` -- ` before adding the options.",
      "",
      "@option {number} --port - The port the server should listen on."
    ],
    "start": "...",

    "@comment test": "This comment is about the test script.",
    "test": "..."
  }
} 
```

注意：在某些上下文中，例如在`"scripts"`对象中，一些编辑器/IDE 可能会抱怨数组。在脚本上下文中，VS Code 需要一个字符串作为值，而不是数组。

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2016-05-13T10:07:55.240

我有一个有趣的黑客想法。

例如，在文件*package.json*中适当地创建一个 npm 包名称作为注释分隔符`dependencies`和块`devDependencies`*`x----x----x`*

 *```
{
    "name": "app-name",
    "dependencies": {
        "x----x----x": "this is the first line of a comment",
        "babel-cli": "6.x.x",
        "babel-core": "6.x.x",
        "x----x----x": "this is the second line of a comment",
        "knex": "^0.11.1",
        "mocha": "1.20.1",
        "x----x----x": "*"
    }
} 
```

**注意**：您必须添加具有有效版本的最后一个注释分隔线，就像`*`在块中一样。

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2017-04-04T05:03:19.700

到目前为止，这里的大多数“黑客”都建议滥用 JSON。但是，为什么不滥用底层脚本语言呢？

**编辑**最初的反应是把描述放在右边`# add comments here`用来包装它；但是，这在 Windows 上不起作用，因为标志（例如`npm run myframework -- --myframework-flags`）将被忽略。我更改了我的回复以使其适用于所有平台，并添加了一些缩进以提高可读性。

```
{
 "scripts": {
    "help": "       echo 'Display help information (this screen)';          npm run",
    "myframework": "echo 'Run myframework binary';                          myframework",
    "develop": "    echo 'Run in development mode (with terminal output)';  npm run myframework"
    "start": "      echo 'Start myFramework as a daemon';                   myframework start",
    "stop":  "      echo 'Stop the myFramework daemon';                     myframework stop"
    "test": "echo \"Error: no test specified\" && exit 1"
  }
} 
```

这会：

1.  不破坏 JSON 合规性（或者至少它不是一个 hack，你的 IDE 不会因为你做了奇怪、危险的事情而给你警告）
2.  跨平台工作（在 macOS 和 Windows 上测试，假设它可以在 Linux 上正常工作）
3.  不妨碍跑步`npm run myframework -- --help`
4.  运行时将输出有意义的信息`npm run`（这是运行以获取有关可用脚本信息的实际命令）
5.  提供更明确的帮助命令（以防某些开发人员不知道 npm run 提供此类输出）
6.  运行命令本身时将显示命令*及其描述*
7.  刚打开时有点可读性`package.json`（使用`less`或您最喜欢的 IDE）

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2015-02-07T09:27:23.150

这是我对`package.json`/中的评论的看法`bower.json`：

我有`package.json.js`一个文件，其中包含一个导出实际`package.json`. 运行脚本会覆盖旧的`package.json`并告诉我它做了哪些更改，非常适合帮助您跟踪所做的自动更改`npm`。这样我什至可以以编程方式定义我想要使用的包。

最新的 Grunt 任务在这里： [https ://gist.github.com/MarZab/72fa6b85bc9e71de5991](https://gist.github.com/MarZab/72fa6b85bc9e71de5991)

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2020-05-20T16:48:39.567

总结所有这些答案：

1.  添加一个名为的*顶级*字段`//`，其中包含注释字符串。这行得通，但它很糟糕，因为你不能把评论放在他们评论的东西附近。

2.  添加多个*以 开头的**顶级*字段，例如包含注释字符串。这更好，但它仍然只允许您进行顶级评论。您不能评论单个依赖项。 *`//``//dependencies`*

**   将`echo`命令添加到您的`scripts`. 这行得通，但很糟糕，因为你只能在`scripts`.* 

 *这些解决方案也都不是很可读。它们添加了大量的视觉噪音，并且 IDE 不会在语法上将它们突出显示为注释。

我认为唯一合理的解决方案是`package.json`从另一个文件生成。最简单的方法是将 JSON 编写为 JavaScript 并使用 Node.js 将其写入`package.json`. 将此文件另存为`package.json.mjs`,`chmod +x`它，然后您可以运行它来生成您的`package.json`.

```
#!/usr/bin/env node

import { writeFileSync } from "fs";

const config = {
  // TODO: Think of better name.
  name: "foo",
  dependencies: {
    // Bar 2.0 does not work due to bug 12345.
    bar: "^1.2.0",
  },
  // Look at these beautify comments. Perfectly syntax highlighted, you
  // can put them anywhere and there no risk of some tool removing them.
};

writeFileSync("package.json", JSON.stringify({
    "//": "This file is \x40generated from package.json.mjs; do not edit.",
    ...config
  }, null, 2)); 
```

它使用`//`密钥警告人们不要对其进行编辑。`\x40generated`是故意的。它变成`@generated`并`package.json`意味着一些代码审查系统默认情况下会折叠该文件。

这是构建系统中的一个额外步骤，但它击败了这里的所有其他黑客。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2018-03-04T14:43:43.327

我最终得到了`scripts`这样的结果：

```
 "scripts": {
    "//-1a": "---------------------------------------------------------------",
    "//-1b": "---------------------- from node_modules ----------------------",
    "//-1c": "---------------------------------------------------------------",
    "ng": "ng",
    "prettier": "prettier",
    "tslint": "tslint",
    "//-2a": "---------------------------------------------------------------",
    "//-2b": "--------------------------- backend ---------------------------",
    "//-2c": "---------------------------------------------------------------",
    "back:start": "node backend/index.js",
    "back:start:watch": "nodemon",
    "back:build:prod": "tsc -p backend/tsconfig.json",
    "back:serve:prod": "NODE_ENV=production node backend/dist/main.js",
    "back:lint:check": "tslint -c ./backend/tslint.json './backend/src/**/*.ts'",
    "back:lint:fix": "yarn run back:lint:check --fix",
    "back:check": "yarn run back:lint:check && yarn run back:prettier:check",
    "back:check:fix": "yarn run back:lint:fix; yarn run back:prettier:fix",
    "back:prettier:base-files": "yarn run prettier './backend/**/*.ts'",
    "back:prettier:fix": "yarn run back:prettier:base-files --write",
    "back:prettier:check": "yarn run back:prettier:base-files -l",
    "back:test": "ts-node --project backend/tsconfig.json node_modules/jasmine/bin/jasmine ./backend/**/*spec.ts",
    "back:test:watch": "watch 'yarn run back:test' backend",
    "back:test:coverage": "echo TODO",
    "//-3a": "---------------------------------------------------------------",
    "//-3b": "-------------------------- frontend ---------------------------",
    "//-3c": "---------------------------------------------------------------",
    "front:start": "yarn run ng serve",
    "front:test": "yarn run ng test",
    "front:test:ci": "yarn run front:test --single-run --progress=false",
    "front:e2e": "yarn run ng e2e",
    "front:e2e:ci": "yarn run ng e2e --prod --progress=false",
    "front:build:prod": "yarn run ng build --prod --e=prod --no-sourcemap --build-optimizer",
    "front:lint:check": "yarn run ng lint --type-check",
    "front:lint:fix": "yarn run front:lint:check --fix",
    "front:check": "yarn run front:lint:check && yarn run front:prettier:check",
    "front:check:fix": "yarn run front:lint:fix; yarn run front:prettier:fix",
    "front:prettier:base-files": "yarn run prettier \"./frontend/{e2e,src}/**/*.{scss,ts}\"",
    "front:prettier:fix": "yarn run front:prettier:base-files --write",
    "front:prettier:check": "yarn run front:prettier:base-files -l",
    "front:postbuild": "gulp compress",
    "//-4a": "---------------------------------------------------------------",
    "//-4b": "--------------------------- cypress ---------------------------",
    "//-4c": "---------------------------------------------------------------",
    "cy:open": "cypress open",
    "cy:headless": "cypress run",
    "cy:prettier:base-files": "yarn run prettier \"./cypress/**/*.{js,ts}\"",
    "cy:prettier:fix": "yarn run front:prettier:base-files --write",
    "cy:prettier:check": "yarn run front:prettier:base-files -l",
    "//-5a": "---------------------------------------------------------------",
    "//-5b": "--------------------------- common ----------------------------",
    "//-5c": "---------------------------------------------------------------",
    "all:check": "yarn run back:check && yarn run front:check && yarn run cy:prettier:check",
    "all:check:fix": "yarn run back:check:fix && yarn run front:check:fix && yarn run cy:prettier:fix",
    "//-6a": "---------------------------------------------------------------",
    "//-6b": "--------------------------- hooks -----------------------------",
    "//-6c": "---------------------------------------------------------------",
    "precommit": "lint-staged",
    "prepush": "yarn run back:lint:check && yarn run front:lint:check"
  }, 
```

我在这里的目的不是澄清一行，只是为了在我的后端、前端、所有等脚本之间有某种分隔符。

我不是 1a, 1b, 1c, 2a 的忠实拥护者……但是按键不同，我完全没有这样的问题。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2019-02-18T10:47:57.570

正如[这个答案](https://stackoverflow.com/a/14221781/3731501)所解释的，`//`密钥是保留的，因此它可以按惯例用于评论。注释的问题`//`在于它不实用，因为它不能多次使用。*package.json*自动更新时会删除重复的键：

```
"//": "this comment about dependencies stays",
"dependencies": {}
"//": "this comment disappears",
"devDependencies": {} 
```

另一个问题是`//`不能在内部使用注释`dependencies`，`devDependencies`因为它被视为常规依赖项：

```
"dependencies": {
  "//": "comment"
} 
```

> npm 错误！代码 EINVALIDPACKAGENAME
> 
> npm 错误！无效的包名“//”：名称只能包含 URL 友好字符

一种适用于 NPM 但不适用于 Yarn 的解决方法是使用非字符串值：

```
"dependencies": {
  "foo": ["unused package"],
} 
```

在 NPM 和 Yarn 中有效的解决方法是作为[语义版本控制](https://semver.org/)的一部分添加的注释：

```
"dependencies": {
  "bar": "^2",
  "foo": "^2 || should be removed in 1.x release"
} 
```

请注意，如果之前的第一部分`OR`不匹配，则可以解析来自评论的版本，例如`1.x`.

需要注释但未安装的软件包应移至另一个键，例如`dependencies //`：

```
"dependencies //": {
  "baz": "unused package",
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-06-06T07:36:12.230

由于运行 package.json 工具（npm、yarn 等）删除了重复的注释键，我开始使用散列版本，它允许更好地读取多行和键，例如：

```
"//": {
  "alpaca": "we use the bootstrap version",
  "eonasdan-bootstrap-datetimepicker": "instead of bootstrap-datetimepicker",
  "moment-with-locales": "is part of moment"
}, 
```

根据我的 IDE 作为根键，这是“有效的”，但在`dependencies`其中抱怨期望字符串值。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-01-30T11:02:58.083

对于 npm 的 package.json，我找到了两种方法（阅读此对话后）：

```
 "devDependencies": {
    "del-comment": [
      "some-text"
    ],
    "del": "^5.1.0 ! inner comment",
    "envify-comment": [
      "some-text"
    ],
    "envify": "4.1.0 ! inner comment"
  } 
```

但是使用“--save”或“--save-dev”更新或重新安装软件包时，会出现“^4.1.0 之类的评论！相应位置的“评论”将被删除。这一切都会破坏 npm 审计。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-07-03T18:43:46.433

我做了一些你们可能喜欢的事情：

名称中的 // 这个 // 意味着它是对我的评论：

```
 "//":"Main and typings are used till ES5",
  "//main": "build/index",
  "//typings": "build/index", 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-03-03T20:18:07.280

### 另一个黑客

我创建了一个脚本来读取文件*package.json*作为车把模板的上下文。

代码如下，以防有人发现这种方法有用：

```
const templateData = require('../package.json');
const Handlebars = require('handlebars');
const fs = require('fs-extra');
const outputPath = __dirname + '/../package-json-comments.md';
const srcTemplatePath = __dirname + '/package-json-comments/package-json-comments.hbs';

Handlebars.registerHelper('objlist', function() {
  // The first argument is an object, and the list is a set of keys for that obj
  const obj = arguments[0];
  const list = Array.prototype.slice.call(arguments, 1).slice(0,-1);

  const mdList = list.map(function(k) {
    return '* ' + k + ': ' + obj[k];
  });

  return new Handlebars.SafeString(mdList.join("\n"));
});

fs.readFile(srcTemplatePath, 'utf8', function(err, srcTemplate){
  if (err) throw err;
  const template = Handlebars.compile(srcTemplate);
  const content = template(templateData);

  fs.writeFile(outputPath, content, function(err) {
    if (err) throw err;
  });
}); 
```

车把模板文件`package-json-comments.hbs`

```
### Dependency Comments
For package: {{ name }}: {{version}}

#### Current Core Packages
should be safe to update
{{{objlist dependencies
           "@material-ui/core"
           "@material-ui/icons"
           "@material-ui/styles"
}}}

#### Lagging Core Packages
breaks current code if updated
{{{objlist dependencies
           "amazon-cognito-identity-js"
}}}

#### Major version change
Not tested yet
{{{objlist dependencies
           "react-dev-utils"
           "react-redux"
           "react-router"
           "redux-localstorage-simple"

}}} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-06-18T19:25:02.300

我喜欢这个：

```
 "scripts": {
    "⏬⏬⏬ Jenkins Build - in this order ⏬⏬⏬                                                                                                  ": "",
    "purge": "lerna run something",
    "clean:test": "lerna exec --ignore nanana"
} 
```

命令名称中有多余的空格，因此在 Visual Studio Code 的*NPM Scripts*插件中您可以更好地查看。

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2018-05-30T22:30:55.037

我对 JSON 中没有评论感到沮丧。我创建了新节点，以它们引用的节点命名，但带有下划线前缀。这是不完美的，但很实用。

```
{
  "name": "myapp",
  "version": "0.1.0",
  "private": true,
  "dependencies": {
    "react": "^16.3.2",
    "react-dom": "^16.3.2",
    "react-scripts": "1.1.4"
  },
  "scripts": {
    "__start": [
        "a note about how the start script works"
    ],
    "start": "react-scripts start",
    "build": "react-scripts build",
    "test": "react-scripts test --env=jsdom",
    "eject": "react-scripts eject"
  },
  "__proxy": [
    "A note about how proxy works",
    "multilines are easy enough to add"
  ],
  "proxy": "http://server.whatever.com:8000"
} 
```**

# seo - 没有索引，跟随？

> ID：14221587
> 
> 赞同：0
> 
> 时间：2013-01-08T18:24:35.787
> 
> 标签：seo, noindex

这只是一个简单的 SEO 问题。我有一个具有此选项的 wordpress SEO 插件：

元机器人：[复选框] noindex，关注

如果我希望我的页面在 Google 上可用，是否应该选中此选项？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:55:15.707

Noindex 意味着该页面可能不会被编入索引，因此受此机器人排除协议指令影响的页面将不会出现在包括 Google 在内的主要搜索引擎中。跟随指令与页面是否出现在搜索引擎的结果中没有太大关系。

有关更多信息，请参阅此内容（适用于大多数搜索引擎）： [控制抓取/索引](https://developers.google.com/webmasters/control-crawl-index/)

# eclipse - 如何仅过滤项目某个子路径中的资源文件夹？

> ID：14221589
> 
> 赞同：10
> 
> 时间：2013-01-08T18:24:44.683
> 
> 标签：eclipse

[我在 Open Resource 对话框中](https://stackoverflow.com/questions/569032/eclipse-hide-svn-files-in-open-resource-dialog)找到了问题和答案Eclipse :: Hide .svn files，但不想过滤所有具有给定名称的资源，比如“work”，这太笼统了。我只想在一个特定的子文件夹“sub”中排除工作文件夹。我看到了“文件和文件夹属性”选项“项目相对路径”和“位置”，但它们都不适用于类似的想法：

`sub/work`

任何想法如何让资源过滤器仅在某个子路径中工作？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-09T08:17:00.003

找到了设置的解决方案：

*   适用于：文件和文件夹
*   所有孩子（递归）激活
*   文件和文件夹属性：
    项目相对路径匹配“子/工作”

现在排除所有低于此的子文件和子目录。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-05-12T10:42:45.763

当您想过滤掉整个文件夹时，请注意尾部斜杠，即。采用

```
path/to/exclude 
```

不是

```
path/to/exclude/ 
```

# linux - 从 kprobe 获取 args 未找到 regs->rdi x86_64

> ID：14221590
> 
> 赞同：3
> 
> 时间：2013-01-08T18:24:48.050
> 
> 标签：linux, kernel, kprobe

我正在 Scientific Linux 6.3 x86_64 下编写一个内核模块，我希望使用 kprobes。在这个模块中，我需要在返回时访问函数的第一个参数，所以 jprobes 出来了。

我发现这篇文章很有帮助：[Getting function arguments using kprobes](https://stackoverflow.com/questions/10563635/getting-function-arguments-using-kprobes)

但是，当我尝试访问`regs->rdi`我的探针时，编译器会抱怨

```
error: ‘struct pt_regs’ has no member named ‘rdi’ 
```

在我的模块初始化期间，我运行此检查没有问题：

```
#ifndef CONFIG_X86_64
 printk(KERN_ALERT "Error: this module only supports x86_64!\n");
 return -EINVAL;
#endif 
```

还有什么我应该看的吗？ `uname -r`返回`2.6.32-279.14.1.el6.x86_64.debug`

这是一个MWE：

```
#include <linux/module.h> 
#include <linux/kernel.h>
#include <linux/kprobes.h>
#include <linux/blkdev.h>

static int kprobe_test(struct kprobe *p, struct pt_regs *regs) {
  printk(KERN_INFO "rdi: %p\n", regs->rdi);
  return 0;
}

static struct kprobe myprobe = {
  .pre_handler = NULL,
  .post_handler = kprobe_test,
  .fault_handler = NULL,
  .addr = (kprobe_opcode_t *) generic_make_request,
};

int init_module(void) {
  register_kprobe(&myprobe);
  return 0;
}

void cleanup_module(void) {
  unregister_kprobe(&myprobe);
} 
```

结果是：

```
...
/home/user/kmod/kprobe_64_mwe/kprobe_mwe.c:7: error: ‘struct pt_regs’ has no member named ‘rdi’
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T18:57:16.243

定义时`pt_reg`更改`__KERNEL__`的定义。尝试`di`改用。

# c++ - 检测方opencv和c++

> ID：14221591
> 
> 赞同：3
> 
> 时间：2013-01-08T18:24:50.073
> 
> 标签：c++, opencv, computer-vision

嗨，我正在研究计算机视觉项目，并尝试使用相机中的 openCV/C++ 来检测正方形。我已经从 openCV 库下载了源代码，但似乎很难丢失 fps。有人知道如何解决这个问题吗？下面有一个关于我的测试的视频链接，请查看： http: [//magicbookproject.blogspot.co.uk/2012/12/detect-paper-demo.html](http://magicbookproject.blogspot.co.uk/2012/12/detect-paper-demo.html)

这是代码，刚刚在另一篇文章中找到：

```
void find_squares(Mat& image, vector<vector<Point> >& squares)
{
// blur will enhance edge detection
Mat blurred(image);
medianBlur(image, blurred, 9);

Mat gray0(blurred.size(), CV_8U), gray;
vector<vector<Point> > contours;

// find squares in every color plane of the image
for (int c = 0; c < 3; c++)
{
    int ch[] = {c, 0};
    mixChannels(&blurred, 1, &gray0, 1, ch, 1);

    // try several threshold levels
    const int threshold_level = 2;
    for (int l = 0; l < threshold_level; l++)
    {
        // Use Canny instead of zero threshold level!
        // Canny helps to catch squares with gradient shading
        if (l == 0)
        {
            Canny(gray0, gray, 10, 20, 3); // 

            // Dilate helps to remove potential holes between edge segments
            dilate(gray, gray, Mat(), Point(-1,-1));
        }
        else
        {
                gray = gray0 >= (l+1) * 255 / threshold_level;
        }

        // Find contours and store them in a list
        findContours(gray, contours, CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE);

        // Test contours
        vector<Point> approx;
        for (size_t i = 0; i < contours.size(); i++)
        {
                // approximate contour with accuracy proportional
                // to the contour perimeter
                approxPolyDP(Mat(contours[i]), approx, arcLength(Mat(contours[i]), true)*0.02, true);

                // Note: absolute value of an area is used because
                // area may be positive or negative - in accordance with the
                // contour orientation
                if (approx.size() == 4 &&
                        fabs(contourArea(Mat(approx))) > 1000 &&
                        isContourConvex(Mat(approx)))
                {
                        double maxCosine = 0;

                        for (int j = 2; j < 5; j++)
                        {
                                double cosine = fabs(angle(approx[j%4], approx[j-2], approx[j-1]));
                                maxCosine = MAX(maxCosine, cosine);
                        }

                        if (maxCosine < 0.3)
                                squares.push_back(approx);
                }
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T21:48:36.387

如果您不介意失去准确性，则可以加快速度。例如

```
// find squares in every color plane of the image
for (int c = 0; c < 3; c++) 
```

您正在循环三个颜色平面。只需检查一种颜色（就好像图像是灰度的），它的速度应该是原来的三倍。

也可以尝试不使用 Canny，这很慢。设置一个 use_canny 参数，

```
 if (l == 0 && use_canny)
     {
        Canny(gray0, gray, 10, 20, 3); // 
```

比较有无。我得到了可以接受的结果，而且速度要快得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T22:19:51.753

计算机视觉的一个好的经验法则是在进行任何密集处理之前将图像转换为灰度。仅在您认为绝对必要时才循环遍历颜色通道。我推荐以下对象识别模式：

1.  将图像转换为灰度
2.  将灰度图像过滤为更简单的格式（canny、阈值、边缘检测）
3.  进行重加工（检测方形）
4.  使用处理后的值重建原始图像（绘制/存储您的正方形）

请记住，您正在为每一帧执行所有这些步骤，因此请务必删除您发现的任何不必要的内容。由于这段代码会经常运行，即使是很小的优化，您也会看到巨大的性能优势，因此值得花一些时间进行优化。

# sql-server-2008 - 在 Sql Server 中编写 TRANSFORM 语句

> ID：14221593
> 
> 赞同：1
> 
> 时间：2013-01-08T18:24:57.210
> 
> 标签：sql-server-2008, tsql, ms-access, pivot

我正在将 Web 应用程序后端从 Access 迁移到 MSSQL，但是我无法在 MSSQL 中重现以下查询，有什么想法吗？

```
TRANSFORM First(FollowUp.FUData) AS FirstOfFUData
SELECT FollowUp.MRN
FROM FollowUp
GROUP BY FollowUp.MRN
PIVOT FollowUp.FU; 
```

请注意，此查询将数据从 EAV 表`Followup`转换为普通表。这是桌子的设计`Followup`：

![在此处输入图像描述](../Images/6b4f4eec8197175bacc69f7d7d0f5d03.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T18:29:59.177

在 SQL Server 中，您可以使用该[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)函数，并且您的查询将以这种方式设置：

```
select MRN, Value1, Value2
from
(
  select MRN, FUData, FU
  from FollowUp
) src
pivot
(
  max(FUData)
  for FU in (Value1, Value2)
) piv 
```

您可以将 , 等替换为`Value1`您`Value2`现在应该是列的任何值。

SQL Server 2008 没有`FIRST()`函数，因此您必须使用另一个聚合函数或以这种方式查询数据，以返回`FU`.

另一种编写方法是使用带有`CASE`语句的聚合函数：

```
select MRN, 
  max(case when FU = 'value1' then FUData else null end) Value1,
  max(case when FU = 'value2' then FUData else null end) Value2
from FollowUp
group by MRN 
```

如果您将已知数量的值转换为列，则上述版本将非常`FU`有用，但如果您没有，则需要使用类似于以下的动态 SQL：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(FU) 
                    from FollowUp
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT MRN,' + @cols + ' from 
             (
                select MRN, FUData, FU
                from FollowUp
            ) x
            pivot 
            (
                max(FUData)
                for FU in (' + @cols + ')
            ) p '

execute(@query) 
```

# html - 当浏览器从右向左移动时，浏览器右侧的元素保持不变

> ID：14221595
> 
> 赞同：-1
> 
> 时间：2013-01-08T18:24:59.420
> 
> 标签：html, css

说我有这样的东西

```
#navbot {right:20px;
         position:absolute;
         top:50px} 
```

当用户将浏览器大小从右向左移动时，我怎样才能让该元素保持在那里并且在浏览器移动时不移动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:29:14.890

绝对定位使用定位的父对象来设置其原点。如果未定义，则使用 BODY。

如果您的页面有包装器，请将其设置为`position:relative`，然后将 navbot 作为包装器的子级。这样，元素使用包装器作为其原点，而不是浏览器主体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T18:39:46.157

尝试`position:fixed;`而不是`position:absolute;` 我认为它会很好用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T18:40:13.300

您应该考虑不要将其定位为`right`so with `left`。如果你有一个站点容器，考虑给它一个固定的宽度，然后 #navbot 相对于容器。

我的经验是，每次发生在我身上时，都是对结构的糟糕规划。

# regex - 使用 RegEx 过滤提要中的特定链接

> ID：14221597
> 
> 赞同：1
> 
> 时间：2013-01-08T18:25:09.613
> 
> 标签：regex, yahoo-pipes

好的，所以我有一个 RSS 提要。每篇文章都包含多个 HTML 链接。他们都是同一个主机（例如youtube.com），而不是有一个不同的主机。我正在尝试过滤这个链接。

所以目前，我有一个最常见主机（imgur、减号、tumblr 等）的规则列表，如下所示：

```
(?i).*?href="(https?://[^"]*host1[^"]*).*
(?i).*?href="(https?://[^"]*host2[^"]*).*
(?i).*?href="(https?://[^"]*host3[^"]*).* 
```

问题是：总是有与未知主机的链接。所以我想要做的是，将主机从所有其他链接（都是相同的）“列入黑名单”。我读过`(?!regex)`但它似乎不起作用：

```
(?i).*?href="(https?://[^"]*(?!youtube)[^"]*).* 
```

我希望你能理解我的问题，并为我（可能）糟糕的英语感到抱歉！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T20:13:15.660

你似乎想要的是相当于“grep -v”，但也许你不能用 Yahoo Pipes 做到这一点。如果您要使用否定前瞻，您的表达式需要准确定义它正在寻找的位置。

让我们从字符串开头的简单“youtube”开始：

```
 $ echo youtubexyz | perl -lne  'print $1 if /(?!youtube)^(.+)/'
   $ echo ourtubexyz | perl -lne  'print $1 if /(?!youtube)^(.+)/'
   ourtubexyz 
```

现在让我们创建一个正则表达式，针对您要过滤的一些 URL：

```
 $ echo www.youtube | perl -lne  'print $1 if /(www\.(?!youtube).+)/'
   $ echo www.ourtube | perl -lne  'print $1 if /(www\.(?!youtube).+)/'
   www.ourtube 
```

您可以继续使您的正则表达式匹配更多网址，但仍排除“youtube”网址：

```
 $ echo www.youtube | perl -lne  'print $1 if /((?:www|\/\/)\.(?!youtube).+)/' 
```

注意：我使用捕获括号和 'print $1' 来说明匹配的内容。您可能不需要在过滤器中捕获。

# c++ - C和C++中long double和double的区别

> ID：14221612
> 
> 赞同：32
> 
> 时间：2013-01-08T18:26:10.783
> 
> 标签：c++, c, long-double

> **可能重复：**
> [long double vs double](https://stackoverflow.com/questions/3454576/long-double-vs-double)

我是编程新手，我无法理解 C 和 C++ 中 long double 和 double 之间的区别。我试图谷歌它，但无法理解它并感到困惑。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-08T18:43:56.043

引用 C++ 标准，§3.9.1 ¶8：

> 有三种浮点类型：float、double 和 long double。double 类型提供的精度至少与 float 一样，long double 类型提供的精度至少与 double 一样。float 类型的值集是 double 类型的值集的子集；double 类型的值集是 long double 类型的值集的子集。浮点类型的值表示是实现定义的。整数和浮点类型统称为算术类型。标准模板 std::numeric_limits (18.3) 的特化应指定实现的每种算术类型的最大值和最小值。

也就是说，`double`它的表示占用至少与 一样多的内存，`float`并且`long double`至少与 一样多`double`。额外的内存用于更精确地表示数字。

在 x86 系统上，`float`通常是 4 字节长，可以存储大约 3×10³⁸ 和 1.4×10⁻⁴⁵ 的数字。它是一个 IEEE 754[单精度数](https://en.wikipedia.org/wiki/Single_precision)，存储大约 7 个小数位的小数。

同样在 x86 系统上，`double`长度为 8 个字节，可以以 IEEE 754[双精度格式](https://en.wikipedia.org/wiki/Double-precision_floating-point_format)存储数字，该格式具有更大的范围并以更高的精度存储数字，大约 15 个十进制数字。在其他一些平台上，`double`可能不是 8 字节长，并且可能确实与单精度相同`float`。

该标准只要求它`long double`至少与. 但是，在大多数 x86 芯片上，10 字节[扩展精度格式](https://en.wikipedia.org/wiki/Extended_precision#x86_Extended_Precision_Format)的 80 位数字可通过 CPU 的浮点单元获得，它提供比 64 位更高的精度，精度约为 21 位十进制数字。`double``long double``double``double`

一些编译器改为支持 16 字节（128 位）IEEE 754[四倍精度数字格式](https://en.wikipedia.org/wiki/Quadruple-precision_floating-point_format)，具有更精确的表示和更大的范围。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-08T18:37:05.067

这取决于您的编译器，但以下代码可以显示每种类型所需的字节数：

```
int main() { 
    printf("%d\n", sizeof(double)); // some compilers print 8
    printf("%d\n", sizeof(long double)); // some compilers print 16
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-08T18:38:13.503

取决于编译器，数据`long <type>`类型**可能**比数据类型拥有更大的值。`<type>`

# objective-c - 如何自动在其中一个注释引脚上显示地图标注？

> ID：14221613
> 
> 赞同：-1
> 
> 时间：2013-01-08T18:26:11.347
> 
> 标签：objective-c, ios, mkmapview, mkannotation

我有一个视图，它在表格视图中列出了几个位置。如果用户单击任何单元格，则应用程序需要显示带有标注单击位置的 Mapview。到目前为止，我已经能够在地图视图上显示所有位置，但不知道如何在单击的位置上显示标注。

请帮忙。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:06:15.477

我假设您有办法知道表格视图中的哪一行对应于哪个 MKAnnotation。在这种情况下，您可以使用

```
- (void)selectAnnotation:(id < MKAnnotation >)annotation animated:(BOOL)animated 
```

以编程方式选择您感兴趣的注释。

# ruby-on-rails - 如何将 TZInfo 标识符转换为 Rails 时区名称/键

> ID：14221615
> 
> 赞同：30
> 
> 时间：2013-01-08T18:26:17.933
> 
> 标签：ruby-on-rails, ruby-on-rails-3, timezone, activesupport, tzinfo

**如何将作为 TZInfo 标识符接收的 js 值转换为 Rails TimeZone 名称/键？**

**FROM：`"America/New_York"`从 JavaScript TZinfo 检测返回**
**TO：`"Eastern Time (US & Canada)"`Rails TimeZone 中使用的约定**

或另一个例子：
`"Pacific/Honolulu"`=> 转换为 =>`"Hawaii"`

两者都在`ActiveSupport::TimeZone < Object`映射中可用，但 rails `"Eastern Time (US & Canada)"`在下拉、验证和存储到`Time.use_zone()`.

根据我对这一点的理解，`ActiveSupport::TimeZone.us_zones`这似乎很重要，尤其是在 DayLights 节省时间（轨道声音处理得很好）和仅匹配偏移量的情况下。如果未使用 rails TimeZone 名称将其存储到 DB，则验证失败，并且在用户的配置文件设置页面中与下拉列表不匹配`ActiveSupport::TimeZone.zones_map`

这样做的目标是用户不必在注册时选择他们的时区，或者在注册后在他们的设置中进行更改。浏览器检测到它并在注册时将其传递给 hidden_​​field。在极少数情况下，他们会在不同于家庭/工作的地方注册。他们可以稍后在其帐户设置中手动覆盖。

尝试摄取 js 时区检测时似乎是一个常见的差距。这甚至可能成为次要问题，如何将返回的信息从 js 传递到 rails 进行转换，然后返回 js 以存储回表单的 hidden_​​field 中？希望我正确地提出了这个问题并且诚然有点绿色，所以可能有一个简单的解决方案......

非常感谢所有的帮助！
-E

* * *

ActiveSupport Time.zone 文档
[http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html#method-i-parse](http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html#method-i-parse)

```
MAPPING = {"Eastern Time (US & Canada)" => "America/New_York" 
```

使用 js 打包 gem 'temporal-rails' 检测用户时区：
[https ://github.com/jejacks0n/temporal](https://github.com/jejacks0n/temporal)

用户 Time_Zone 实现如图所示：
[http ://railscasts.com/episodes/106-time-zones-revised](http://railscasts.com/episodes/106-time-zones-revised)

*使用设计和设计-不可避免

* * *

### 注册查看脚本

```
 <script>
    $(function() {
        var detected_zone = Temporal.detect();
        console.log(detected_zone);  // returns object
        detected_zone = detected_zone.timezone.name;
        console.log(detected_zone);  // returns "America/New_York"
        $('#user_time_zone').val(detected_zone);  // ! need to convert this to rails TimeZone name !
    });
    </script> 
```

### 用户模型

```
 validates_inclusion_of :time_zone, in: ActiveSupport::TimeZone.zones_map(&:name) 
```

### 用户帐户设置表单

```
 <%= f.label :time_zone, label: "Time Zone" %><br />
    <%= f.time_zone_select :time_zone, ActiveSupport::TimeZone.us_zones %> 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-08T23:55:15.197

时间包含所需的逻辑，但要回答您的问题：

`Time.zone = ActiveSupport::TimeZone.new("America/New_York")`

编辑，我想我的答案不完整。你想从“美国/纽约”到“东部时间（美国和加拿大）”，对吗？如果是这种情况，这是我拥有的最好的解决方案——尽管有人可能会提供更好的解决方案。

`ActiveSupport::TimeZone::MAPPING.select {|k, v| v == "America/New_York" }.keys.first`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-02-02T20:45:48.630

我相信每个人都真正追求的魔法，并解决了@ajbraus 提出的问题，是一个单行字，可能是在任何地方讨论的最奇怪的事情之一：

```
timezone = ActiveSupport::TimeZone[TZInfo::Timezone.get('America/Vancouver').period_for_utc(Time.now.utc).utc_offset]
 => #<ActiveSupport::TimeZone:0x00007fc2baa6d900 @name="Pacific Time (US & Canada)", @utc_offset=nil, @tzinfo=#<TZInfo::TimezoneProxy: America/Los_Angeles>> 
```

否则，如果您尝试搜索 ActiveSupport 的整个区域数据库，您会得到 nada：

```
ActiveSupport::TimeZone.all.find{ |tz| tz.tzinfo == ActiveSupport::TimeZone.find_tzinfo('America/Vancouver') }
 => nil 
```

复杂性归结为以下几点：

*   TZInfo gem 严格遵守 IANA 时区规范
*   Rails 的 ActiveSupport 决定尝试简化区域的显示/使用，但并不是一个详尽的区域数据库
*   如果您给它一个偏移量，ActiveSupport 可以查找适当的区域
*   除非您在感兴趣的区域中创建 TZInfo::TimezonePeriod，否则 TZInfo 不会为您提供偏移量
*   Ruby 2.6 显然正在重新审视时区支持以清理这项业务

# c# - 如何检查 2 个通用列表之间的公共对象

> ID：14221616
> 
> 赞同：1
> 
> 时间：2013-01-08T18:26:18.893
> 
> 标签：c#, generic-list

我有 2 个列表需要检查传递给通用包装器的常见对象。

第一个列表 ( `selList`) 是一个类型化的实体列表。此列表中的`ID`字段会有所不同，具体取决于所创建列表的基本类型。

第二个列表 ( `masterList`) 是一个匿名列表`IList`，我知道它有 2 个属性 {ID, DESC} - ID（可以是 int 或字符串）和描述（字符串）。我可以在此列表中获取 ID 属性的值。

我想返回一个主列表的扩展，它有一个布尔字段，指示主列表中的项目是否包含在`selList`.

我在想我在访客模式的某个地方。

```
 public class SelectionCriteria<T> : where T : class
 {
    public IList<T> EligibleList { get; private set; }
    public IList LookupList { get; private set; }
 }
 LookupList = new List<object>
              {
                  new { ID = "fid", DESC = "Record 1"},
                  new { ID = "Record2", DESC = "Record 2"},
                  new { ID = "Record3", DESC = "Record 3"},
                  new { ID = "Record4", DESC = "Record 4"},
              };
  EligibleList = new List<AssetClass>
                 {
                     new AssetClass { FEE_ID = "fid", ASSET_CLASS = "A" },
                 }; 
```

我应该得到以下结果：

```
 LookupList[0] == true
  LookupList[1] == false
  LookupList[2] == false
  LookupList[3] == false 
```

有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T18:33:16.110

```
var results = LookupList.Select(l => EligibleList.Any(e => e.FEE_ID==l.ID))
                       .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:48:35.783

用这个作为定义`SelectionCriteria<T>`

```
public class SelectionCriteria<T>
    where T : class
{
    public IList<T> EligibleList { get; private set; }
    public IList LookupList { get; private set; }

    public SelectionCriteria(IList lookupList, IList<T> eligibleList)
    {
        LookupList = lookupList;
        EligibleList = eligibleList;
    }

    public bool this[int index]
    {
        get
        {
            var element = LookupList[index];

            foreach (var item in EligibleList)
            {
                if (item.Equals(element))
                {
                    return true;
                }
            }

            return false;
        }
    }
} 
```

这作为一个定义`AssetClass`

```
public class AssetClass : IEquatable<AssetClass>
{
    public string FEE_ID { get; set; }

    public string ASSET_CLASS { get; set; }

    public bool Equals(AssetClass other)
    {
        return !ReferenceEquals(other, null) && other.FEE_ID == FEE_ID && other.ASSET_CLASS == ASSET_CLASS;
    }

    //Check to see if obj is a value-equal instance of AssetClass, if it's not, proceed
    //  to doing some reflection checks to determine value-equality
    public override bool Equals(object obj)
    {
        return Equals(obj as AssetClass) || PerformReflectionEqualityCheck(obj);
    }

    //Here's where we inspect whatever other thing we're comparing against
    private bool PerformReflectionEqualityCheck(object o)
    {
        //If the other thing is null, there's nothing more to do, it's not equal
        if (ReferenceEquals(o, null))
        {
            return false;
        }

        //Get the type of whatever we got passed
        var oType = o.GetType();
        //Find the ID property on it
        var oID = oType.GetProperty("ID");

        //Get the value of the property
        var oIDValue = oID.GetValue(o, null);

        //If the property type is string (so that it matches the type of FEE_ID on this class
        //   and the value of the strings are equal, then we're value-equal, otherwise, we're not
        return oID.PropertyType == typeof (string) && FEE_ID == (string) oIDValue;
    }
} 
```

您可以获得在查找项列表中存在的合格项列表中找到的元素，如下所示：

```
for (var i = 0; i < assetClassSelectionCriteria.LookupList.Count; ++i)
{
    Console.WriteLine("LookupList[{0}] == {1}", i, assetClassSelectionCriteria[i]);
} 
```

如果您不喜欢看到反射的好处，`PerformReflectionEqualityCheck`您也可以使用以下内容`AssetClass`

```
private bool PerformReflectionEqualityCheck(object o)
{
    if (ReferenceEquals(o, null))
    {
        return false;
    }

    dynamic d = o;

    try
    {
        return FEE_ID == (string) d.ID;
    }
    catch
    {
        return false;
    }
} 
```

如果通过“主列表的扩展”您的意思是扩展方法，那么，而不是声明一个索引器`SelectionCriteria<T>`来获得结果，你可以做这样的事情：

```
public static class SelectionCriteriaExtensions
{
    public static bool IsLookupItemEligible<T>(this SelectionCriteria<T> set, int index)
        where T : class
    {
        var element = set.LookupList[index];

        foreach (var item in set.EligibleList)
        {
            if (item.Equals(element))
            {
                return true;
            }
        }

        return false;
    }
} 
```

并这样称呼它：

```
assetClassSelectionCriteria.IsLookupItemEligible(0); 
```

# java - 更新 Swing 时等待线程

> ID：14221617
> 
> 赞同：2
> 
> 时间：2013-01-08T18:26:25.777
> 
> 标签：java, multithreading, swing, real-time

我在处理应用程序中的线程时遇到问题。它创建 JFrame 并启动一个新线程。最后一个将执行外部应用程序并更新 GUI。然后

我有问题让 Main 类等待第二个线程完成，但也要同时更新 GUI。

这是我的示例（缩短）：

```
class Main {

    public int status;

    public Main() {

        // Creating GUI etc.

        SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                JDialog id = new JDialog();
                id.button.addMouseListener(new MouseListener()); // Calls generate() method
            }

        });

    }

    public void generate() {

        SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                // Make changes to GUI
            }

        });

        GeneratorThread genTest = new GeneratorThread(this, 1, 1, 1);
        genTest.start();

        //while (status == 0);

        System.out.println("Next step.");

    }

} 
```

和线程类：

```
public class GeneratorThread extends Thread {

protected Main main;
protected int setSize, minValue, maxValue;

public GeneratorThread(Main main, int setSize, int minValue, int maxValue) {
    this.main = main;
    this.setSize = setSize;
    this.minValue = minValue;
    this.maxValue = maxValue;
}

public void run() {

    // Execute program etc.
    // Change GUI from main in the same time
            // About 3 seconds

    main.status = 1;

}

} 
```

我正在进行中，我想检查它到目前为止是如何工作的。虽然工作得很好，但它以某种方式锁定了 Swing，并且只有在`GeneratorThread`完成时才能看到任何更改。我想实时更新 GUI。

我试过`join()`了，效果是一样的。我也试过`wait()`（on `Main`），但后来我得到了 IllegalStateMonitorException。

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:41:50.400

使用 SwingUtilitied.invokeLater 从线程内更新您的 GUI，或者同步主变量！

[http://www.vogella.com/articles/JavaConcurrency/article.html#concurrencyjava](http://www.vogella.com/articles/JavaConcurrency/article.html#concurrencyjava)

也许让“状态”变得不稳定就足够了？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T22:44:43.397

Swing 是一个单线程环境。也就是说，有一个线程负责管理 Swing UI 的所有交互和更新——事件调度线程。

Swing 的黄金法则包括...

*   不要阻塞 EDT（永远不应从 EDT 中调用`Thread.sleep`、`Thread#join`、`Object#wait`、阻塞 IO 和/或耗时的任务（等等）），这样做会阻止 EDT 调度事件和绘制更新（等等）
*   仅在 EDT 中创建/更新 Swing UI 元素。

这就提出了一个问题……你如何“等待”一个线程？

最好的方法是使用观察者模式。基本上，您提供`Thread`某种引用，它将调用以提供事件通知，例如错误和完成......

这将要求您非常仔细地考虑应用程序的设计，因为您不能依赖简单的 A 到 B 执行代码。

例如...

```
public class TestThreadCallBack {

    public static void main(String[] args) {
        new TestThreadCallBack();
    }

    public TestThreadCallBack() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public interface ThreadCallBack {

        public void threadCompleted(Runnable source);

        public void threadFailed(Runnable source);
    }

    public class TestPane extends JPanel implements ThreadCallBack {

        private JLabel message;
        private JLabel dots;
        private int count;

        private Timer timer;

        public TestPane() {
            setLayout(new GridBagLayout());
            message = new JLabel("Running background task, please wait");
            dots = new JLabel("   ");
            add(message);
            add(dots);

            timer = new Timer(250, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    count++;
                    if (count > 3) {
                        count = 0;
                    }
                    StringBuilder sb = new StringBuilder(3);
                    for (int index = 0; index < count; index++) {
                        sb.append(".");
                    }
                    for (int index = count; index < 3; index++) {
                        sb.append(" ");
                    }
                    dots.setText(sb.toString());
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();

            Thread thread = new Thread(new BackgroundTask(this));
            thread.start();

        }

        @Override
        public void threadCompleted(Runnable source) {
            timer.stop();
            message.setText("Task completed successfully");
        }

        @Override
        public void threadFailed(Runnable source) {
            timer.stop();
            message.setText("Task failed");
        }
    }

    public class BackgroundTask implements Runnable {

        private ThreadCallBack callBack;

        public BackgroundTask(ThreadCallBack callBack) {
            this.callBack = callBack;
        }

        @Override
        public void run() {
            System.out.println("Background task underway...");
            try {
                Thread.sleep(2000);
            } catch (InterruptedException interruptedException) {
            }
            int result = (int) Math.round((Math.random() * 1));
            if (result == 0) {
                callBack.threadCompleted(this);
            } else {
                callBack.threadFailed(this);
            }
        }
    }
} 
```

从`Thread`另一个内部更新 UI，然后是 EDT，嗯，很混乱。一个更简单的解决方案实际上是使用[`SwingWorker`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html). 它具有可轻松更新 UI 的发布/处理方法和可用于提供有关当前任务进度的反馈的进度方法。

您可以使用它的`done`方法在工作人员完成时通知相关方。

# java - 如何将我的 Java 程序变成可以发送推送通知的“应用程序”？

> ID：14221619
> 
> 赞同：1
> 
> 时间：2013-01-08T18:26:30.983
> 
> 标签：java, iphone

免责声明：我不是专业的开发人员；我只是一个业余爱好者，并且在这方面相对缺乏经验，所以对于一些非常基本的问题，我很抱歉。（是的，我已经搜索了论坛）

我最近一直在开发一个“deal finder”程序，它是使用 Java 和 R 的组合编写的。到目前为止，我完成的基本步骤是：

1.  使用特定的电子商务 API 将各种交易的数据加载到 Java 中
2.  将我需要的数据写入一系列文本文件
3.  将文本文件中的数据加载到 R
4.  处理 R 中的数据并为每笔交易分配一个“分数”
5.  按分数排序以生成交易排名列表

这是我需要帮助的地方：我目前正在通过在 Eclipse 中运行我的 Java 程序并随后运行 R 脚本来手动运行该程序。这显然不方便（而且有点上瘾），所以我想做的是：

1.  连续运行程序或以某个预定义的时间间隔（比如每分钟）运行程序
2.  每当有新交易的得分高于某个阈值时，就会向我的 iPhone 或（如果这太难的话）我的桌面发送通知。

问题：我不知道从哪里开始上面的两个任务。我的编码经验仅限于一点 Java 和数学/统计语言，如 R 和 MATLAB。我在网络/移动开发、服务器等方面的经验为零，但我愿意学习。我希望从这个论坛得到的不是一个完全指定的解决方案，而只是一些大方向。如果有人能告诉我应该如何完成这项工作，需要做多少工作，我需要什么语言等等，那将非常有帮助。

还有两件事我可能应该提到：1）这个程序仅供我个人使用，所以生成的应用程序，无论是在我的手机还是桌面上，除了发送/接收通知的能力之外，它的功能非常少。2）如果它使事情变得更容易，我想我可以消除对 R 的依赖并用 Java 编写一切。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:29:16.293

> 还有两件事我可能应该提到：1）这个程序仅供我个人使用，所以生成的应用程序，无论是在我的手机还是桌面上，除了发送/接收通知的能力之外，它的功能非常少。

[然后，您可能希望为此使用Boxcar 及其 Provider API](http://boxcar.io/help/api/providers)之类的第三方通知应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:58:05.170

1.  根据您的操作系统，有些程序允许您安排任务运行。例如，Linux 或 Windows 任务计划程序中的 Cron。您可以在网上轻松找到这些指南。

2.  您是否考虑过使用电子邮件？从 java 做起来相当简单，而且不是特定于平台的。

# wpf - WPF - Datagrid中的复选框以设置行的背景颜色

> ID：14221620
> 
> 赞同：1
> 
> 时间：2013-01-08T18:26:33.470
> 
> 标签：wpf, datagrid, checkbox

我正在尝试根据选中的两个复选框中的哪一个来更改网格的背景颜色。一旦我在网格中选择了行，我想使用数据插入到不同的表中，其中一个字段的值取决于在网格中选择了两个复选框中的哪一个。以下是我当前的代码。我尝试了几件事但没有成功。

XAML：

```
<Window x:Class="TESTWPF.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:col="clr-namespace:System.Collections;assembly=mscorlib"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <Button Content="Button" HorizontalAlignment="Left" Margin="43,35,0,0" VerticalAlignment="Top" Width="75" Click="Button_Click_1" RenderTransformOrigin="0.507,0.545"/>
    <DataGrid Name="dg"
              HorizontalAlignment="Left" 
              Margin="10,81,0,0" 
              VerticalAlignment="Top" 
              Height="214"                   
              AutoGenerateColumns="False"
              ScrollViewer.VerticalScrollBarVisibility="Auto" Width="497">
        <DataGrid.Columns>
            <DataGridTemplateColumn Header="OK" Width="40">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <CheckBox Name="OKCCheckBox" 
                                  HorizontalAlignment="Center" 
                                  IsChecked="{Binding Path=NONC, UpdateSourceTrigger=PropertyChanged}"
                                  />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
                            <DataGridTextColumn Header="RMA ID"
                                Width="80"
                                Binding="{Binding Path=RMA_ID}"
                                />
            <DataGridTextColumn Header="SERIAL #"
                                Width="80"
                                Binding="{Binding Path=SERIAL_ID}"
                                />
            <DataGridTextColumn Header="PART #"
                                Width="150"
                                Binding="{Binding Path=INV_ITEM_ID_ORDERED}"
                                />
            <DataGridTextColumn Header="QTY"
                                Width="50"
                                Binding="{Binding Path=QTY}"
                                />
            <DataGridTemplateColumn Header="NonC" Width="40">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <CheckBox Name="NONCCheckBox" 
                                  HorizontalAlignment="Center" 
                                  IsChecked="{Binding Path=NONC, UpdateSourceTrigger=PropertyChanged}"
                                  />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
        <DataGrid.RowStyle>
            <Style TargetType="DataGridRow">
                <Setter Property="Background" Value="Beige"/>
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="true">
                        <Setter Property="Background" Value="Bisque"/>
                    </Trigger>
                    <Trigger Property="IsSelected" Value="true">
                        <Setter Property="Background" Value="Bisque"/>
                    </Trigger>
                    <DataTrigger Binding="{Binding Path=RMA_ID}" Value="HJRA0000P4">
                        <Setter Property="Background" Value="Green"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </DataGrid.RowStyle>
    </DataGrid>
</Grid> 
```

后面的 C# 代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Data;
using Oracle.DataAccess.Client;

namespace TESTWPF
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    public DataSet GetItemInformationRMAID()
    {
        string _connstring = "Data Source=ORCL;User Id=TEST;Password=TEST;";
        string _sql;
        DataSet _ds = new DataSet();
        try
        {
            OracleConnection _connObj = new OracleConnection(_connstring);
            _connObj.Open();
            _sql = "select rma_id, serial_id, inv_item_id_ordered, qty from return_line";
            OracleDataAdapter _adapterObj = new OracleDataAdapter();
            OracleCommand cmd = new OracleCommand(_sql, _connObj);
            _adapterObj.SelectCommand = cmd;
            _adapterObj.Fill(_ds);
            _connObj.Close();
            _connObj.Dispose();
            _connObj = null;
            return _ds;
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
            return _ds;
        }
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        dg.ItemsSource = GetItemInformationRMAID().Tables[0].DefaultView;
    }
}
} 
```

我敢肯定我错过了一些明显的东西，但作为一个新手，我只是没有看到它。任何帮助表示赞赏。

谢谢，

马格努斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:08:42.003

为什么两个复选框都绑定到一个属性 Binding Path=NONC ？

# wordpress - 重写 IIS URL 以指向 Wordpress 的子文件夹

> ID：14221623
> 
> 赞同：1
> 
> 时间：2013-01-08T18:26:44.320
> 
> 标签：wordpress, iis, url-rewriting, web-config

我在同一台服务器上安装了三个 Wordpress，它们的布局如下：

```
Site1
Site1\Site2
Site1\Site3 
```

我有四个网址 www.site1.com、www.site2.co.uk、www.site2.com 和 www.site3.co.uk。我想在 web.config 文件中设置 URL 重写，以便 URL 指向它们对应的文件夹。我还需要安装 Wordpress 才能使用永久链接。

这是我目前的设置（完全不起作用）：

```
<rule name="site1" patternSyntax="Wildcard" stopProcessing="true">
            <match url="*"/>
            <action type="Rewrite" url="index.php"/>
            <conditions logicalGrouping="MatchAll">
                <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true"/>
                <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true"/>
                <add input="{HTTP_HOST}" matchType="Pattern" pattern="*www.site2.co*" ignoreCase="true" negate="true"/>
                <add input="{HTTP_HOST}" matchType="Pattern" pattern="*www.site3.co*" ignoreCase="true" negate="true"/>
                <add input="{PATH_INFO}" pattern="*site2*" negate="true"/>
                <add input="{PATH_INFO}" pattern="*site3*" negate="true"/>
            </conditions>
        </rule>v
        <rule name="site2" patternSyntax="Wildcard" stopProcessing="true">
            <match url="*"/>
            <action type="Rewrite" url="site2/index.php"/>
            <conditions>
                <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true"/>
                <add input="{HTTP_HOST}" matchType="Pattern" pattern="*www.site2.co*" ignoreCase="true" negate="false"/>
                <add input="{PATH_INFO}" pattern="*site2*" ignoreCase="true" negate="false"/>
                <add input="{PATH_INFO}" pattern="*wp-admin*" negate="true"/>
                <add input="{PATH_INFO}" pattern="*wp-content*" negate="true"/>
                <add input="{PATH_INFO}" pattern="*wp-login*" negate="true"/>
            </conditions>
        </rule>
        <rule name="site2-content" enabled="true" patternSyntax="Wildcard" stopProcessing="true">
            <match url="*"/>
            <action type="Rewrite" url="site2/{R:0}"/>
            <conditions>
                <add input="{HTTP_HOST}" pattern="*www.site2.co*"/>
                <add input="{PATH_INFO}" pattern="*wp-content*"/>
            </conditions>
        </rule>
        <rule name="site2-admin" enabled="true" patternSyntax="Wildcard" stopProcessing="true">
            <match url="*"/>
            <action type="Rewrite" url="site2/{R:0}"/>
            <conditions>
                <add input="{HTTP_HOST}" pattern="*www.site2.co*"/>
                <add input="{PATH_INFO}" pattern="*wp-admin*"/>
            </conditions>
        </rule>
        <rule name="site2-login" enabled="true" patternSyntax="Wildcard" stopProcessing="true">
            <match url="*"/>
            <action type="Rewrite" url="site2/{R:0}"/>
            <conditions>
                <add input="{HTTP_HOST}" pattern="*www.site2.co*"/>
                <add input="{PATH_INFO}" pattern="*wp-login*"/>
            </conditions>
        </rule>
    <rule name="site3" patternSyntax="Wildcard" stopProcessing="true">
            <match url="*"/>
            <action type="Rewrite" url="site3/index.php"/>
            <conditions>
                <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true"/>
                <add input="{HTTP_HOST}" matchType="Pattern" pattern="*www.site3.co*" ignoreCase="true" negate="false"/>
                <add input="{PATH_INFO}" pattern="*site3*" ignoreCase="true" negate="false"/>
                <add input="{PATH_INFO}" pattern="*wp-admin*" negate="true"/>
                <add input="{PATH_INFO}" pattern="*wp-content*" negate="true"/>
                <add input="{PATH_INFO}" pattern="*wp-login*" negate="true"/>
            </conditions>
        </rule>
        <rule name="site3-content" enabled="true" patternSyntax="Wildcard" stopProcessing="true">
            <match url="*"/>
            <action type="Rewrite" url="site3/{R:0}"/>
            <conditions>
                <add input="{HTTP_HOST}" pattern="*www.site3.co*"/>
                <add input="{PATH_INFO}" pattern="*wp-content*"/>
            </conditions>
        </rule>
        <rule name="site3-admin" enabled="true" patternSyntax="Wildcard" stopProcessing="true">
        <match url="*"/>
        <action type="Rewrite" url="site3/{R:0}"/>
        <conditions>
            <add input="{HTTP_HOST}" pattern="*www.site3.co*"/>
            <add input="{PATH_INFO}" pattern="*wp-admin*"/>
        </conditions>
        </rule>
        <rule name="site3-login" enabled="true" patternSyntax="Wildcard" stopProcessing="true">
            <match url="*"/>
            <action type="Rewrite" url="site3/{R:0}"/>
            <conditions>
                <add input="{HTTP_HOST}" pattern="*www.site3.co*"/>
                <add input="{PATH_INFO}" pattern="*wp-login*"/>
            </conditions>
        </rule>
        <rule name="wordpress" patternSyntax="Wildcard" stopProcessing="true">
            <match url="*"/>
            <conditions>
                <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true"/>
                <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true"/>
            </conditions>
            <action type="Rewrite" url="index.php"/>
        </rule> 
```

非常感谢任何帮助。

# r - 如何绘制时间 cdf？

> ID：14221627
> 
> 赞同：2
> 
> 时间：2013-01-08T18:26:54.437
> 
> 标签：r, statistics, ggplot2, visualization

我有以下价值观：

```
Day 1: X11 X12 X13 X14 X15 ...
Day 2: X21 X22 X23 X24 X25 ...
Day 3: X31 X32 X33 X34 X35 ...
...
... 
```

我可以使用每天的值来绘制不同的 CDF，但是有没有办法可以可视化所有日子的 CDF，以查看分布如何随时间变化？我可以绘制类似 3D 变体的东西吗？

实际值：

```
structure(list(Time = structure(c(1354348800, 1354435200, 1354521600, 
1354608000, 1354694400, 1354780800, 1354867200, 1354953600, 1355040000, 
1355126400, 1355212800, 1355299200, 1355385600, 1355472000, 1355558400, 
1355644800, 1355731200, 1355817600, 1355904000, 1355990400, 1356076800, 
1356163200, 1356249600, 1356336000, 1356422400, 1356508800, 1356595200, 
1356681600, 1356768000, 1356854400, 1356940800, 1354348800, 1354435200, 
1354521600, 1354608000, 1354694400, 1354780800, 1354867200, 1354953600, 
1355040000, 1355126400, 1355212800, 1355299200, 1355385600, 1355472000, 
1355558400, 1355644800, 1355731200, 1355817600, 1355904000, 1355990400, 
1356076800, 1356163200, 1356249600, 1356336000, 1356422400, 1356508800, 
1356595200, 1356681600, 1356768000, 1356854400, 1356940800, 1354348800, 
1354435200, 1354521600, 1354608000, 1354694400, 1354780800, 1354867200, 
1354953600, 1355040000, 1355126400, 1355212800, 1355299200, 1355385600, 
1355472000, 1355558400, 1355644800, 1355731200, 1355817600, 1355904000, 
1355990400, 1356076800, 1356163200, 1356249600, 1356336000, 1356422400, 
1356508800, 1356595200, 1356681600, 1356768000, 1356854400, 1356940800, 
1354348800, 1354435200, 1354521600, 1354608000, 1354694400, 1354780800, 
1354867200, 1354953600, 1355040000, 1355126400, 1355212800, 1355299200, 
1355385600, 1355472000, 1355558400, 1355644800, 1355731200, 1355817600, 
1355904000, 1355990400, 1356076800, 1356163200, 1356249600, 1356336000, 
1356422400, 1356508800, 1356595200, 1356681600, 1356768000, 1356854400, 
1356940800, 1354348800, 1354435200, 1354521600, 1354608000, 1354694400, 
1354780800, 1354867200, 1354953600, 1355040000, 1355126400, 1355212800, 
1355299200, 1355385600, 1355472000, 1355558400, 1355644800, 1355731200, 
1355817600, 1355904000, 1355990400, 1356076800, 1356163200, 1356249600, 
1356336000, 1356422400, 1356508800, 1356595200, 1356681600, 1356768000, 
1356854400, 1356940800, 1354348800, 1354435200, 1354521600, 1354608000, 
1354694400, 1354780800, 1354867200, 1354953600, 1355040000, 1355126400, 
1355212800, 1355299200, 1355385600, 1355472000, 1355558400, 1355644800, 
1355731200, 1355817600, 1355904000, 1355990400, 1356076800, 1356163200, 
1356249600, 1356336000, 1356422400, 1356508800, 1356595200, 1356681600, 
1356768000, 1356854400, 1356940800), class = c("POSIXct", "POSIXt"
), tzone = ""), Value = c(430664.239261698, 490234.194921927, 
526998.520971122, 536602.462982633, 258691.669906957, 11829.8290116318, 
12650.9461086689, 2720.1227453922, 6148.95630258592, 2680.86993550808, 
2678.03258008561, 2665.03710105507, 2704.83781604574, 2704.99305811391, 
2742.7040489269, 2802.16126409598, 2835.37392203882, 2822.02107441536, 
2816.32800725421, 2798.97376034702, 2796.01930330326, 2754.58930695667, 
2745.58482436398, 2729.8646537471, 2706.30089379909, 2657.97901504968, 
2755.8939918735, 2756.32635948648, 2703.73644754399, 2595.09862261747, 
2583.96164402217, 1103.38595759987, 1410.11179619836, 4758.52642632149, 
4799.73333750023, 3881.64395298922, 2769.52071665839, 2777.36511823707, 
2728.37598724549, 2732.36209370411, 2695.9513678436, 2686.83499265917, 
2681.5743717285, 2720.45290857566, 2732.73841594837, 2760.53934947503, 
2811.42766223853, 2844.41105991693, 2825.55269421361, 2820.7691523964, 
2807.55312109634, 2804.11955879203, 2757.32663905538, 2745.86930679521, 
2739.23425025641, 2715.98260303707, 2692.68857278371, 3527.71521116871, 
4262.25327731706, 4533.9804534, 4481.65508241964, 4421.37186792114, 
19613453.922832, 124804222.41819, 141787648.586654, 130924910.79881, 
168814882.872211, 11894959.6456705, 8774239.566537, 16080698.3234849, 
17161993.52566, 22336448.9385156, 15252276.6007502, 10331573.337916, 
8976597.77324162, 17169136.7951364, 12183504.3046438, 6957562.92857611, 
12930867.2067763, 10663528.8499475, 8969032.06072141, 12857780.0335602, 
10766886.886599, 14795620.653363, 9825272.66156014, 11044813.0699568, 
10367171.6540806, 9610185.60847421, 10931660.4285495, 8394075.58812457, 
8993089.38056002, 8026650.35585018, 7946595.12661373, 114329906.004844, 
137475638.687273, 148815385.289035, 135307862.23453, 184737114.110537, 
119730959.539068, 69757385.6095225, 90614972.0916845, 86831718.3941103, 
119775130.022637, 88442212.7020717, 58451067.337829, 65388376.2367906, 
63443348.7417144, 57280954.523376, 45166897.0970657, 83554097.8501678, 
66201693.7873501, 70795197.9863679, 84221546.3400137, 72983744.7919536, 
79897785.2230573, 69847018.9176478, 73346675.6554418, 64914201.3793851, 
63947528.2287373, 65351437.5297966, 59076239.7375999, 42688084.2661814, 
42066287.169797, 39734565.1701957, 90506964.9337797, 100149152.452364, 
120257643.646244, 111528999.398328, 138621214.049053, 9371.8136697, 
56524340.9066957, 73183012.7386646, 73134499.5072141, 91844218.5996012, 
59462704.401716, 46340856.9647138, 49809994.4841905, 52046927.2065564, 
43534299.417627, 37959416.2194319, 64876408.0181902, 55169784.3656278, 
55637721.2148036, 64303390.999086, 55469744.4302739, 59472270.8402672, 
52495047.7346662, 59934890.0182395, 57773465.6418628, 57227960.3434529, 
58180354.3542921, 50719237.2638962, 33168848.2017861, 33850765.333152, 
33841026.2326982, 110504056.059923, 133797335.531811, 148626502.57032, 
130569007.27317, 163603482.922618, 110945447.425452, 67150219.14672, 
85584433.1881761, 76873561.2170393, 117860559.12102, 84629012.3662336, 
54204572.2980234, 58898821.9609343, 62180038.7679437, 53059333.3332883, 
43914570.1205393, 79475697.2825237, 64196704.372024, 66182175.1487631, 
80851142.6092836, 65475805.206847, 68931230.2593625, 59859872.3417313, 
65228418.926433, 61498299.9737327, 60767088.8695188, 62752189.9148476, 
56770234.222601, 40910036.2385198, 39235601.7774785, 37635952.1705463
)), .Names = c("Time", "Value"), row.names = c(NA, -186L), class = "data.frame") 
```

**编辑**：结果图像

![在此处输入图像描述](../Images/f69646b0c1d7adee93d0790c86ddb6e6.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T20:06:35.127

当然。检查`rgl.surface()`包中的功能`rgl`：

```
library(rgl)
data <- lapply(seq(0,2,by=0.1),function(i){rnorm(100)+i})  # a list with example data vectors
m <- sapply(data,function(i){ecdf(i)(seq(-3,5,by=0.1))})   # a matrix with the empirical CDF for each vector in the list, over a given range -3 to 5
rgl.surface(1:nrow(m), 5*(1:ncol(m)), m*20)    # play with the coefficients to get a better result 
```

你甚至可以旋转这个表面！有关更多信息，请查看[此问题](https://stackoverflow.com/questions/1896419/plotting-a-3d-surface-plot-with-contour-map-overlay-using-r)。

更新：您可以对数据执行以下操作：

```
values.per.day <- lapply(unique(data$Time), function(x)data$Value[data$Time==x])
m <- sapply(values.per.day, function(x) ecdf(x)(seq(min(data$Value), max(data$Value), length.out=1000)) )
rgl.surface(1:nrow(m), 5*(1:ncol(m)), m*20) 
```

# hibernate - 如何使用 RequestFactory 处理 ConstraintViolationException 引起的 RollbackException

> ID：14221629
> 
> 赞同：1
> 
> 时间：2013-01-08T18:27:05.373
> 
> 标签：hibernate, gwt, jpa, bean-validation, requestfactory

我正在尝试使用 JPA 和 Hibernate with RequestFactory (GWT 2.5) 在字段上实现唯一值约束。我的其他约束是使用 JSR303 实现的，我想以相同的方式向客户端报告违规行为（`onConstraintViolation`在 中调用`Receiver`）。据我了解，实现此类约束的最佳选择是`unique = true`在使用`@Column`属性时进行设置。然后在提交事务时由数据库强制执行此操作，并避免与通过查询断言唯一性相关的任何竞争条件。

我按照[这个线程的](https://groups.google.com/d/msg/google-web-toolkit/puAoYMDqdF0/FKHh41RH5OAJ)建议实现了一个用事务的开始和提交`ServiceLayerDecorator`来包装方法。`invoke`如果违反唯一性约束，提交操作将抛出一个`RollbackException`.

如何处理此异常，以便将其作为约束违规而不是一般故障传播到客户端？

据我看`SimpleRequestProcessor`，验证与调用分开进行，似乎没有一种明显的方法可以`invoke`以这种方式传播失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:04:49.070

您可以尝试实现一个自定义约束来检查唯一性。另请参阅[https://community.jboss.org/wiki/AccessingTheHibernateSessionWithinAConstraintValidator](https://community.jboss.org/wiki/AccessingTheHibernateSessionWithinAConstraintValidator)。

# java - GWT - 无法使用 Eclipse 找到工作目录

> ID：14221631
> 
> 赞同：1
> 
> 时间：2013-01-08T18:27:07.870
> 
> 标签：java, gwt

我需要在我的面板上显示工作目录。

我用`String value = System.getProperty("user.dir")`. 之后我将此字符串放在标签上，但我在控制台上收到此消息：

```
The method getProperty(String, String) in the type System is not applicable for the arguments (String). 
```

我使用日食。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T18:34:55.653

## 问题

我猜你还没有经历过 GWT 101 - 你不能盲目地在客户端使用 JAVA CODE。

## 解释

您可以从 JAVA 中找到 GWT 支持的类和方法的列表。 [https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation](https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation)

对于 System，仅支持以下内容。

```
err, out,
System(), 
arraycopy(Object, int, Object, int, int), 
currentTimeMillis(), 
gc(), 
identityHashCode(Object), 
setErr(PrintStream),
setOut(PrintStream) 
```

## 解决方案

在您的情况下，在您的服务器端代码中执行 System.getProperty("user.dir") 并使用 RPC 或任何其他服务器端 gwt 通信技术访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T00:07:47.247

不支持 System.getProperty("key")，但支持 System.getProperty("key", "default")，尽管它只会返回默认值，因为本身没有系统属性。

如果在 gwt 编译期间需要工作目录，则需要使用自定义链接器或生成器，在构建时获取系统属性，并将其作为公共资源文件发出。

对于链接器，您必须导出 gwt 可以下载的外部文件并获取所需的编译时数据。对于生成器，您只需将所需的字符串注入编译的源代码。

这是一个关于链接器的幻灯片，实际上非常有趣。
[http://dl.google.com/googleio/2010/gwt-gwt-linkers.pdf](http://dl.google.com/googleio/2010/gwt-gwt-linkers.pdf)

如果您不想使用链接器和额外的 http 请求，您也可以使用生成器，这可能更容易（而且更快）：

```
interface BuildData {
  String workingDirectory();
}
BuildData data = GWT.create(BuildData.class);
data.workingDirectory(); 
```

然后，您需要制作一个生成器：

```
public class BuildDataGenerator extends IncrementalGenerator {
  @Override
 public RebindResult generateIncrementally(TreeLogger logger, 
     GeneratorContext context, String typeName){
  //generator boilerplate
  PrintWriter printWriter = context.tryCreate(logger, "com.foo", "BuildDataImpl");
  if (printWriter == null){
    logger.log(Type.TRACE, "Already generated");
    return new RebindResult(RebindMode.USE_PARTIAL_CACHED,"com.foo.BuildDataImpl");
  }
  SourceFileComposerFactory composer =
      new SourceFileComposerFactory("com.foo", "BuildDataImpl");
  //must implement interface we are generating to avoid class cast exception
  composer.addImplementedInterface("com.foo.BuildData");
  SourceWriter sw = composer.createSourceWriter(printWriter);
  //write the generated class; the class definition is done for you
  sw.println("public String workingDirectory(){");
  sw.println("return \""+System.getProperty("user.dir")+"\";");
  sw.println("}");
  return new RebindResult(RebindMode.USE_ALL_NEW_WITH_NO_CACHING
       ,"com.foo.BuildDataImpl");

  }
} 
```

最后，您需要告诉 gwt 在您的界面上使用您的生成器：

```
<generate-with class="dev.com.foo.BuildDataGenerator">
    <when-type-assignable class="com.foo.BuildData" />
</generate-with> 
```

# java - 如何从相同的值生成唯一 ID

> ID：14221634
> 
> 赞同：2
> 
> 时间：2013-01-08T18:27:12.200
> 
> 标签：java, database, algorithm, hash

我需要找到一种方法，一组值将始终生成相同的 ID，并且它必须是唯一的。

这样做的主要原因是在我需要进行大量连接之前加快查询速度，只进行一次比较。我知道我的领域，遗憾的是这些价值观并没有封闭（即，它们可以是任何东西）。

我尝试使用散列，但根据定义，散列函数不能保证唯一性。有办法吗？

**编辑：更多上下文**

我正在一个与来自不同设备集的事件相关联的系统中工作。

相关性是通过一些事件属性计算的：

*   从哪里来。
*   这是一个什么样的事件。
*   来自它的价值观和不同群体中相同类型的事件不同。

例如，想想这样的事情。想象一下我的设备是一台冰箱。它发送有关内部温度和食物的事件。因此，假设我们按以下顺序接收事件：

```
Event1: {type: temperature, values: [{temperature: -1]}
Event2: {type: food, values: [{group: vegetable, name: brocollis, quantity: 2, weight: 0.1]}
Event3: {type: food, values: [{group: vegetable, name: lettuce, quantity: 1,  weight: 0.1]}
Event4: {type: temperature, values: [{temperature: -5]} 
```

所有类型的事件都`temperature`必须是相关的，但类型`food`的相关性也由其`name`和给出`group`。即，相关标识符的数量是可变的。

这种相关性保存在这样的结构中

```
@Entity
public class EventCorrelation {
    @Id @GeneratedValue
    @Audit
    private Long id;

    @ElementCollection
    @CollectionTable(
       name = "evt_corr_extra_id",
       joinColumns = @JoinColumn(name = "correlation_id"))
    @Column(name = "extra_id")
    @LazyCollection(LazyCollectionOption.TRUE)
    @Cache(usage = CacheConcurrencyStrategy.NONSTRICT_READ_WRITE)
    private Collection<String> identifiers;
    // getters/setters
} 
```

在标识符数组中，我保存了标识相关性的值。我想加快搜索事件相关性的查询，我的第一个想法是从相关性中创建一个唯一的 id `identifiers`。

我有一个知识数据库，它知道从给定事件中，某个属性是一个相关标识符。

有小费吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T18:37:48.953

一种可能的解决方案是将您的值转换为字符串并使用某种保留的分隔符将它们连接起来，确保保留顺序。字符串成为您的唯一 ID。

例如，值 1、“Bob”、7383.234、“{asdf}”和 2013-01-08 将具有以下唯一 ID：

```
"1|Bob|7383.234|{asdf}|2013-01-08" 
```

这是一种[记忆](http://en.wikipedia.org/wiki/Memoization)技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T19:36:30.657

例如两个食物事件：

```
Event11: {type: food, values: [{group: vegetable, name: brocollis, quantity: 2, weight: 0.1]}
Event12: {type: food, values: [{group: vegetable, name: brocollis, quantity: 3, weight: 0.27]} 
```

难道这两个事件都是针对 brocollis 的，但是数量和重量不是 ID 的一部分？我假设这是由您的*知识数据库回答的，该数据库知道从给定事件中，某些属性是相关标识符*

一旦你为 ID 设置了属性，比如说 {type, group, name}，你可以对它们进行排序并从中构建 ID。例如“{group:vegetable,name:broccolis,type:food}” = ID 为字符串，属性按属性名排序。

顺便说一句，您提到您的域没有关闭，但是您拥有知识数据库这一事实应该意味着这将允许*类型*仅限于已知集。因此，至少对于类型，如果您想让 ID 更短，您应该能够找到一些表示类型的数值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T18:48:14.717

唯一的方法是创建字符串字典。对于每个唯一**字符串**，您将在此字典中获得一个唯一**ID 。**但是这种方法会导致性能下降并增加内存使用量。

**编辑 1**：顺便说一下，一个可能的想法是使用 native`String`的对象 ID。我的意思是，在 Java 中，所有字符串都是本地缓存的。因此，您可以尝试使用其本机哈希，这些哈希与其对象的内存地址相关联。像使用`System.identityHashCode()`.

**编辑 2：**在我之前的陈述中，我对字符串的缓存不太准确。无论如何，您都可以手动（使用`HashMap`）创建这样的缓存，然后在`System.identityHashCode()`

# wpf - WPF中PropertyMetaData、UIPropertyMetadata和FrameworkMetaData有什么区别

> ID：14221636
> 
> 赞同：13
> 
> 时间：2013-01-08T18:27:35.887
> 
> 标签：wpf

我知道这些类之间的基本区别是，当我们备份属性时使用 PropertyMetadata，当我们想要支持动画时使用 UIPropertyMetadata，以及在用户控件中使用框架属性时使用 FrameworkMetadata。

但我只了解理论部分。如果您解释一个使用所有这 3 个类在 3 个不同的依赖属性中清楚地区分它们的最简单示例，那将是一个很好的帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-05-18T18:13:54.097

资料来源：[PropertyMetadata 与 FrameworkPropertyMetadata](http://wpf.2000things.com/2012/06/07/575-propertymetadata-vs-frameworkpropertymetadata/)

> 当您[实现自定义依赖属性](http://wpf.2000things.com/2012/06/06/574-complete-example-of-implementing-a-dependency-property/)并通过调用注册该属性时`DependencyProperty.Register`，您可以通过将`PropertyMetadata`. 这可以是`PropertyMetadata`该类的一个实例，也可以是其子类之一的实例。差异如下所示。
> 
> **`PropertyMetadata`**– 与依赖属性相关的基本元数据
> 
> *   `CoerceValueCallback`- 设置时强制值
> *   `DefaultValue`– 属性的默认值
> *   `PropertyChangedCallback`– 响应物业的新有效价值
> 
> **`UIPropertyMetadata`**– 源自`PropertyMetadata`并添加：
> 
> *   `IsAnimationProhibited`– 禁用此属性的动画？
> 
> **`FrameworkPropertyMetadata`**– 源自`UIPropertyMetadata`并添加：
> 
> *   `AffectsArrange`, `AffectsMeasure`, `AffectsParentArrange`, `AffectsParentMeasure`, `AffectsRender`– 属性值更改后是否应该重新运行布局计算？
> *   `BindsTwoWayByDefault`, `DefaultUpdateSourceTrigger`, `IsDataBindingAllowed`, `IsNotDataBindable`– 规定属性如何参与数据绑定
> *   `Inherits`, `OverridesInheritanceBehavior`– 继承是否适用于此属性？
> *   `Journal`– 记录时存储这个值？
> *   `SubPropertiesDoNotAffectRender`– 当布局改变时检查这个对象的属性？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T19:33:40.793

PropertyMetadata 和 FrameworkPropertyMetadata 之间的一个重要实际区别是后者允许指定一组[FrameworkPropertyMetadataOptions](http://msdn.microsoft.com/en-us/library/system.windows.frameworkpropertymetadataoptions.aspx)。

例如，指定`FrameworkPropertyMetadataOptions.AffectsRender`关心启动属性已更改的 UIElement 的重新呈现。如果没有此标志，您将不得不在 PropertyChangedCallback 中手动执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-28T03:44:37.723

所有的行为都由记录在基类中声明的单个（32 位）**字段**中的标志位公开`FrameworkPropertyMetadata`并由其控制，即使没有任何标志实际上是从那里公开公开的。这是该声明：`UIPropertyMetadata``enum``uint`**`_flags``PropertyMetadata``enum`**

 **```
内部枚举 MetadataFlags : uint
{
 DefaultValueModifiedID /**/= 0b_00000000_00000000_00000000_00000001, //0x00000001
 SealedID /**/= 0b_00000000_00000000_00000000_00000010, //0x00000002
 继承 /**/= 0b_00000000_00000000_00000000_00010000, //0x00000010
 UI_IsAnimationProhibitedID /**/= 0b_00000000_00000000_00000000_00100000, //0x00000020
 FW_AffectsMeasureID /**/= 0b_00000000_00000000_00000000_01000000, //0x00000040
 FW_AffectsArrangeID /**/= 0b_00000000_00000000_00000000_10000000, //0x00000080
 FW_AffectsParentMeasureID /**/= 0b_00000000_00000000_00000001_00000000, //0x00000100
 FW_AffectsParentArrangeID /**/= 0b_00000000_00000000_00000010_00000000, //0x00000200
 FW_AffectsRenderID /**/= 0b_00000000_00000000_00000100_00000000, //0x00000400
 FW_OverridesInheritanceBehaviorID /**/= 0b_00000000_00000000_00001000_00000000, //0x00000800
 FW_IsNotDataBindableID /**/= 0b_00000000_00000000_00010000_00000000, //0x00001000
 FW_BindsTwoWayByDefaultID /**/= 0b_00000000_00000000_00100000_00000000, //0x00002000
 FW_ShouldBeJournaledID /**/= 0b_00000000_00000000_01000000_00000000, //0x00004000
 FW_SubPropertiesDoNotAffectRenderID /**/= 0b_00000000_00000000_10000000_00000000, //0x00008000
 FW_SubPropertiesDoNotAffectRenderModifiedID= 0b_00000000_00000001_00000000_00000000, //0x00010000
 FW_InheritsModifiedID /**/= 0b_00000000_00010000_00000000_00000000, //0x00100000
 FW_OverridesInheritanceBehaviorModifiedID = 0b_00000000_00100000_00000000_00000000, //0x00200000
 FW_ShouldBeJournaledModifiedID /**/= 0b_00000001_00000000_00000000_00000000, //0x01000000
 FW_UpdatesSourceOnLostFocusByDefaultID /**/= 0b_00000010_00000000_00000000_00000000, //0x02000000
 FW_DefaultUpdateSourceTriggerModifiedID/**/= 0b_00000100_00000000_00000000_00000000, //0x04000000
 FW_ReadOnlyID /**/= 0b_00001000_00000000_00000000_00000000, //0x08000000
 FW_DefaultUpdateSourceTriggerEnumBit1 /**/= 0b_01000000_00000000_00000000_00000000, //0x40000000
 FW_DefaultUpdateSourceTriggerEnumBit2 /**/= 0b_10000000_00000000_00000000_00000000, //0x80000000
};
```

还要注意以下三个属性（均由 声明`FrameworkPropertyMetadata`）如何交互。也就是说***，***`IsDataBindingAllowed`不等于; 前者增加了排除对“只读”属性使用不正确绑定*方向的附加限制。**`!IsNotDataBindable`*

 **```
private bool ReadOnly => (_flags & FW_ReadOnlyID) != 0;

public bool IsDataBindingAllowed =>
                     (_flags & FW_IsNotDataBindableID) == 0 && !this.ReadOnly;

public bool IsNotDataBindable => (_flags & FW_IsNotDataBindableID) != 0; 
```

* * *

**[编辑：]警报/警告：由于某种****未知**原因，上面显示的标志与相应`FrameworkPropertyMetadataOptions`标志指定的值不同！

```
[Flags]
public enum FrameworkPropertyMetadataOptions
{                                  //         FPMO            MetadataFlags
                                   //     ----------           ----------
                                   //                          0x00000010 ←┐
    None                           /**/ = 0x00000000, //                   │
    AffectsMeasure                 /**/ = 0x00000001, //  << 6 0x00000040  │
    AffectsArrange                 /**/ = 0x00000002, //  << 6 0x00000080  │
    AffectsParentMeasure           /**/ = 0x00000004, //  << 6 0x00000100  │
    AffectsParentArrange           /**/ = 0x00000008, //  << 6 0x00000200  │
    AffectsRender                  /**/ = 0x00000010, //  << 6 0x00000400  │
    Inherits                       /**/ = 0x00000020, //  >> 1   →  →  ────┘
    OverridesInheritanceBehavior   /**/ = 0x00000040, //  << 5 0x00000800
    NotDataBindable                /**/ = 0x00000080, //  << 5 0x00001000
    BindsTwoWayByDefault           /**/ = 0x00000100, //  << 5 0x00002000
    Journal                        /**/ = 0x00000400, //  << 4 0x00004000
    SubPropertiesDoNotAffectRender /**/ = 0x00000800, //  << 4 0x00008000
}; 
```****

# python - Python中的递归：我做错了什么？

> ID：14221641
> 
> 赞同：1
> 
> 时间：2013-01-08T18:27:55.787
> 
> 标签：python, recursion, simulation, vpython

我正在用 python 编写我的第一个程序，它必须模拟粒子（两种气体）的混合。我不知道我在这个功能上做错了什么。我不希望粒子离开某个区域，即容器的墙壁。我使用 VPython。

```
def poruszanie(lista,pozycja,numCell):
    flaga = 0
    pozycjaTmp = (pozycja[0]+choice([-1,0,1]),pozycja[1]+choice([-1,0,1]),0)
    for i in range( 0, len(lista) ):
        if pozycjaTmp==lista[i].pos:
            flaga=1

    if flaga==1:
        return poruszanie(lista,(pozycja[0]+choice([-1,0,1]),pozycja[1]+choice([-1,0,1]),0),numCell)
    elif pozycjaTmp[0]==0 or pozycjaTmp[0]==numCell or pozycjaTmp[0]==-numCell or pozycjaTmp[1]==numCell or pozycjaTmp[1]==-numCell:
        return poruszanie(lista,(pozycja[0]+choice([-1,0,1]),pozycja[1]+choice([-1,0,1]),0),numCell)

    return pozycjaTmp 
```

poruszanie - 函数名称

pozycja - 球体的位置

0,numCell,-numCell - 容器的边界（0 是中间的墙，用于分隔开始时的气体）

所有这些都在 x,y 平面上，z 始终为 0 这就是我开始使用这个函数的地方：

```
while 1:
        rate(20)
        for i in range(0,len(self.listBalls)):
            self.listBalls[i].pos=poruszanie(self.listBalls,self.listBalls[i].pos,self.numCell) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T18:35:25.407

我认为您每次都将其称为完全相同并且没有正确返回：

```
if flaga==1:
    return poruszanie(lista,(pozycja[0]+choice([-1,0,1]),pozycja[1]+choice([-1,0,1]),0),numCell)
else:
    if pozycjaTmp[0]==0 or pozycjaTmp[0]==numCell or pozycjaTmp[0]==-numCell:
        poruszanie(lista,(pozycja[0]+choice([-1,0,1]),pozycja[1]+choice([-1,0,1]),0),numCell)
    elif pozycjaTmp[1]==numCell or pozycjaTmp[1]==-numCell:
        poruszanie(lista,(pozycja[0]+choice([-1,0,1]),pozycja[1]+choice([-1,0,1]),0),numCell) 
```

从第一个电话您返回，但从接下来的两个电话，您没有。此外，您传递的参数看起来完全相同。

**编辑**

考虑编辑和您的新错误（达到最大深度）。

该错误意味着您的函数比python允许的递归更远。

我仍然不确定你在做什么，但无论递归将停止什么，你都需要一个基本条件。如果`if ... elif ...`每次调用函数时都满足语句的任一分支，则递归将永远不会停止。你需要一些总是会坏的东西，最好你应该把它放在`if .. elif ...`块之前。

# php - eclipse pdt 中的代码完成和工厂模式

> ID：14221642
> 
> 赞同：8
> 
> 时间：2013-01-08T18:27:56.097
> 
> 标签：php, eclipse, factory, code-completion, eclipse-pdt

假设我在 PHP 代码中有一个典型的工厂模式：

```
abstract class Model
{
    function m()
    {
    }
}

class model_A
{
    function a()
    {
    }
}

class model_B
{
    function b()
    {
    }
}

function modelFactory($name)
{
    $className = 'model_' . $name;
    $object = new $className();
    // ... do some magic stuff ...
    return $object;
} 
```

我知道@var 和@return phpdoc 标签，但是在输入以下内容后有什么神奇的方法：

```
$x = modelFactory('A'); 
```

Eclipse 会知道 $x 是 model_A 的一个实例吗？

我可以在某处定义一个固定的字符串向量，如下所示：

```
"modelFactory('A')" => "new model_A()"
"modelFactory('B')" => "new model_B()" 
```

让 Eclipse 在使用代码完成进行处理之前替换内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:44:30.123

简短的回答，这是不可能的，你想要的方式。

正如您已经在另一条评论中正确指出的那样，您应该`@var`手动使用来实现代码完成的好处，因为编辑器本身不可能理解编程模式的概念

尽管在理论上是可行的，但手动编写类型推断的规则似乎倒退了恕我直言（更不用说对 Docblock 表示法本身进行必要的更改了）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-10T11:38:24.487

唯一支持此功能的 IDE 是 PHPStorm（通过 .phpstorm.meta.php 文件）。

我提交了一个功能请求，要求支持这一点。您可以在[https://bugs.eclipse.org/bugs/show_bug.cgi?id=463110为它投票](https://bugs.eclipse.org/bugs/show_bug.cgi?id=463110)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T15:20:22.763

Currently, I'm not aware of an IDE/Editor that does this either, but I'm keeping track of the same functionality for PhpStorm (they're currently 'working' on it): [http://youtrack.jetbrains.com/issue/WI-6027](http://youtrack.jetbrains.com/issue/WI-6027)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T06:22:11.053

我使用 eclipse 和 pdt 近 3 年多了，但对你的问题没有完美的答案

我认为 Zend Studio 9 可以解决你的问题，对于代码完成它比 pdt 好得多。

[http://www.zend.com/en/products/studio/downloads](http://www.zend.com/en/products/studio/downloads)

# android - Android 上的 Context 和 GetSharedPreferences

> ID：14221649
> 
> 赞同：0
> 
> 时间：2013-01-08T18:28:13.937
> 
> 标签：android, andengine, android-context

我在 Android 上使用 Andengine。我有两个类（主要和函数），如下所示。

主要的：

```
private Context myContext;
.
.
if (functions.Sonido(myContext)) {
   mSound.play();
} 
```

功能：

```
 public boolean Sonido(Context C) {
    prefs =  C.getSharedPreferences(Filename, Context.MODE_PRIVATE);
    valor = prefs.getString("Sound", null);

    if (valor == "YES") {
        return true;
    }else{
        return false;
    }
    } 
```

编辑器没有给出任何错误，但我得到了运行时错误。请协助我解决它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T18:36:18.190

为什么这么复杂？

```
public boolean Sonido(Context context) {
    prefs =  context.getSharedPreferences(Filename, Context.MODE_PRIVATE);
    return prefs.getBoolean("Sound", false);;
} 
```

由于您的错误日志（**类型函数中的方法 Sonido(Context) 不适用于参数**（new TiledSprite(){}）），您必须像这样调用 Sonido：

```
if (functions.Sonido(MainActivity.this)) {
   mSound.play();
} 
```

如果它不起作用，请在 ddms 中向我们展示您的 logcat。

另一件事：不要像这样匹配字符串：

```
if (valor == "YES") 
```

最好这样：

```
if (valor.equals("YES")) /*OR in your case*/ "YES".equals(valor) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T18:34:02.473

您需要检查 valor 是否不为空，因为这是默认的 SharedPreferences 值。尝试将您的功能代码修改为：

```
public boolean Sonido(Context C) {
prefs =  C.getSharedPreferences(Filename, Context.MODE_PRIVATE);
valor = prefs.getString("Sound", null);

if (valor != null){
    if (valor.equals("YES")) {
        return true;
    }else{
        return false;
    }
} else {
return false;
}
} 
```

还要检查上下文是否正确发送。如果您在 Activity/Fragment 中，通常可以使用 this.getApplicationContext() 发送当前上下文

# r - 如何计算两行之间的差异

> ID：14221654
> 
> 赞同：2
> 
> 时间：2013-01-08T18:28:27.713
> 
> 标签：r

基本上我在 R 数据框中有一列，我想找到一个代码来计算以下函数：

```
(i - (i-1)) - ((i+1) - i) 
```

换句话说，对于函数的左侧，我想从 中减去前一行的值，`(i-1)`对于`i`函数的右侧，我想`i`从下一行的值中减去`(i+1)`

如果有人可以提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T18:39:03.653

像这样？

```
x <- (1:5)^2
#[1]  1  4  9 16 25
as.vector(filter(x,c(-1,2,-1),sides=1))    
#[1] NA NA -2 -2 -2 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-08T18:41:30.833

还是像这样？边界上应该发生什么？

```
x <- (1:5)^2
-diff(diff(x))
# [1] -2 -2 -2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T18:44:11.720

你的描述不清楚。如果`a`是一个向量，您所要求的将由以下人员提供：

```
f <- diff(a[-length(a)]) - diff(a[-1]) 
```

并且将被定义为 1 < i < length(a)，因此 length(f) = length(a) - 2

将 a 替换为您的 data.frame 列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T18:41:44.110

我以前也有过类似的情况。理想情况下，您应该坚持使用矢量化代码，因为它要快得多。我所做的是创建两个新向量，一个将所有内容向上移动一个 (i-1) 或向下移动一个 (i+1)，然后在计算中使用它们：

```
i <- (1:5)^2

i.next     <- c(i[2:length(i)],NA)
i.previous <- c(NA,i[1:length(i)-1])

i.calculation <- (i - i.previous) - (i.next - i)

cbind(i,i.next,i.previous,i.calculation)

# i i.next i.previous i.calculation
# [1,]  1      4         NA            NA
# [2,]  4      9          1            -2
# [3,]  9     16          4            -2
# [4,] 16     25          9            -2
# [5,] 25     NA         16            NA 
```

# null - 隐藏 NULL 行组 JasperReports

> ID：14221656
> 
> 赞同：2
> 
> 时间：2013-01-08T18:28:32.487
> 
> 标签：null, jasper-reports, crosstab

有没有办法在 Crosstab 中隐藏具有 NULL 值的行组？

# php - 将元表与主表合并

> ID：14221659
> 
> 赞同：1
> 
> 时间：2013-01-08T18:28:43.263
> 
> 标签：php, sql, pdo

我有两个表，一个主表，一个支持主表，与 wordpress 的posts 和posts_meta 非常相似。

主表：

id 标题、内容

```
id  | title     | content
1   | one       | content one
2   | two       | content two 
```

元表：

id item_id 键值

```
id  | item_id   | key       | value
1   | 1         | template  | single
2   | 1         | group     | top
1   | 2         | template  | page
2   | 2         | group     | bottom 
```

最后，我的目标是拥有一个包含主表数据的数组，并与元表合并。例子：

```
$data = array(
    array(
        'id' => 1,
        'title' => 'one',
        'content' => 'content one',
        'template' => 'single',
        'group' => 'top'
    ),
    array(
        'id' => 2,
        'title' => 'two',
        'content' => 'content two',
        'template' => 'page',
        'group' => 'bottom'
    )
); 
```

以良好的方式实现这一目标的最佳方法是什么？

我正在使用 PDO 连接到我的数据库，而我现在的做法是，我首先查询第一个表上的数据，然后对于每个结果，我查询元表，为此我使用准备好的语句，因为它是 suposed要快，但即便如此，它也会损害我的脚本的性能。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:34:57.983

而不是从第一个查询中查询每个结果的元表

您应该从第一个结果中提取 id：

```
$rows = q('SELECT * FROM posts');
$byIds = [];
foreach ($rows as &$row)
{
    $byIds[$row['id']] =& $row;
} 
```

并运行第二个查询：

```
$rows2 = q('SELECT * FROM posts_meta WHERE item_id IN (' . implode(',', array_keys($byIds)) . ')'); 
```

然后在 PHP 中循环结果并与第一个查询结果合并。

```
foreach ($rows2 as $row2)
{
    $byIds[$row2['item_id']][$row2['key']] = $row2['value'];
} 
```

您现在在 $rows 变量中获得了合并结果：

```
var_dump($rows); 
```

这样，您将只有 2 个数据库请求。

请注意，我使用 $byIds 作为引用数组，因此我不必在第二个循环中搜索具有特定 ID 的行。这样，$rows 中元素的顺序就被保留了。

# objective-c - Checking if iTunes is shuffling is not working

> ID：14221662
> 
> 赞同：2
> 
> 时间：2013-01-08T18:28:52.050
> 
> 标签：objective-c, macos, cocoa, itunes, shuffle

I'm developing a Mac App and I need to check if Itunes (11.0) is shuffling my music so, to check that, I'm using `iTunes.h` and the following code:

```
if([iTunes.currentPlaylist shuffle]){
    NSLog(@"yes");
}else{
    NSLog(@"no");
} 
```

Even though I have my iTunes shuffling, it always outputs "no".
Any ideas why is this happening or am I checking it the wrong way?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T20:09:12.687

This I know: in iTunes 11 some things changed. One of them is that the "shuffle"-option is playlist-independent...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:30:29.553

Good luck with that.

I reported a bug about a month ago, like tons of other developers.
Didn't hear anything, and probably won't.

Like DigiMonk wrote, it a change in iTunes 11, but they don't update their API.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T23:58:45.663

A long way around for the time being might be to listen for NSDistributedNotifications and check whether the attributes for the currently playing track match the previous or next one. It's not the cleanest solution, but it should work if what's being shuffled is an album or artist. Just check whether the track numbers go in sequence, or if the artist name is the same, etc.

# asp.net - 如何在多视图内的 1 个视图上触发 updateprogess 控件

> ID：14221664
> 
> 赞同：0
> 
> 时间：2013-01-08T18:28:56.337
> 
> 标签：asp.net, updatepanel, multiview, updateprogress

我有一个带有 6 个面板的多视图控件。

多视图包含在更新面板中。

当面板 6 处于活动状态时，将调用一个 Web 服务，这可能需要一分钟。我想显示一个进度面板 - 阻止 ui，显示一个集中面板，通知用户正在发生的事情。

我已经在更新面板之外的页面上放置了更新进度控件，但是如果有延迟，这将触发所有面板。

如何在渲染第 6 个面板时显示更新进度控件？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:12:02.843

在测试了一些变体后，我解决了这个问题。

我将 updateprogress 控件放在视图 6 中，当只显示该视图时，它似乎启动了。

# android - 按背景颜色分割图像 - OpenCV Android

> ID：14221668
> 
> 赞同：6
> 
> 时间：2013-01-08T18:29:08.137
> 
> 标签：android, opencv

我正在尝试分割名片并按背景颜色拆分它们，以将它们视为不同的感兴趣区域。

例如这种卡片： ![样本名片](../Images/f395aa74c1c8af78263b306893b6946c.png)

应该能够被分成两个图像，因为有 2 种背景颜色。关于如何解决这个问题有什么建议吗？我试过做一些轮廓分析，但结果不太成功。

其他示例卡： ![在此处输入图像描述](../Images/beafdb7821557ec8362b02f9a0562a67.png)

这张卡片应该给出 3 个分段，因为即使它只有 2 种颜色也有 3 个部分（尽管 2 种颜色也可以）。

![在此处输入图像描述](../Images/42926f392c419cdb107a9d4267f30326.png)

上面的卡片应该只给出一个分割，因为它只是一种背景颜色。

我还没有尝试考虑渐变背景。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T20:12:27.707

这取决于其他卡的外观，但是如果图像都具有那么高的质量，那应该不会太难。

在您发布的示例中，您可以只收集边框像素的颜色（最左列、最右列、第一行、最后一行）并将您找到的内容视为可能的背景颜色。也许检查是否有足够的像素具有大致相同的颜色。你需要某种距离测量。一种简单的解决方案是仅使用 RGB 颜色空间中的欧几里得距离。

一个更通用的解决方案是在整个图像的颜色直方图中找到簇，并将具有超过总像素量 x% 的每种颜色（再次带有公差）视为背景颜色。但是您定义为背景的内容取决于您想要实现的目标以及图像的外观。

如果您需要进一步的建议，您可以发布更多图像并标记您希望将图像的哪些部分检测为背景颜色，哪些部分不是。

-

编辑：您的两个新图像也显示相同的模式。背景颜色占据了图像的很大一部分，没有噪点，也没有颜色渐变。所以一个简单的方法可能如下所示：

*   计算图像的直方图：参见[http://docs.opencv.org/modules/imgproc/doc/histograms.html#calchist](http://docs.opencv.org/modules/imgproc/doc/histograms.html#calchist)和[http://docs.opencv.org/doc/tutorials/imgproc/histograms/histogram_calculation/ histogram_calculation.html](http://docs.opencv.org/doc/tutorials/imgproc/histograms/histogram_calculation/histogram_calculation.html)

*   在直方图中找到最突出的颜色。如果您不想自己迭代 Mat，您可以使用 minMaxLoc ( [http://docs.opencv.org/modules/core/doc/operations_on_arrays.html#minmaxloc](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html#minmaxloc) )，如 calchist 文档中所示（见上文），以及如果颜色占像素数的足够百分比，则保存它并将直方图中的相应 bin 设置为零。重复直到不再达到您的百分比。然后，您将保存最突出的颜色列表，即您的背景颜色。

*   为您拥有的每种背景颜色设置图像阈值。见：[http ://docs.opencv.org/doc/tutorials/imgproc/threshold/threshold.html](http://docs.opencv.org/doc/tutorials/imgproc/threshold/threshold.html)

*   在生成的 threadholded 图像上找到每种背景颜色的对应区域。见：[http ://docs.opencv.org/doc/tutorials/imgproc/shapeescriptors/find_contours/find_contours.html](http://docs.opencv.org/doc/tutorials/imgproc/shapedescriptors/find_contours/find_contours.html)

如果您有不适用于此方法的示例，请发布它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T12:01:20.527

作为一种在其中也找到具有颜色渐变的背景的方法，可以使用 canny。以下代码（是的，不是 android，我知道，但如果移植它，结果应该是相同的）适用于您迄今为止发布的三个示例图像。如果您有其他不适用于此的图像，请告诉我。

```
#include <opencv2/opencv.hpp>

using namespace cv;
using namespace std;

Mat src;
Mat src_gray;
int canny_thresh = 100;
int max_canny_thresh = 255;
int size_per_mill = 120;
int max_size_per_mill = 1000;
RNG rng(12345);

bool cmp_contour_area_less(const vector<Point>& lhs, const vector<Point>& rhs)
{
    return contourArea(lhs) < contourArea(rhs);
}

void Segment()
{
    Mat canny_output;
    vector<vector<Point> > contours;
    vector<Vec4i> hierarchy;

    Canny(src_gray, canny_output, canny_thresh, canny_thresh*2, 3);

    // Draw rectangle around canny image to also get regions touching the edges.
    rectangle(canny_output, Point(1, 1), Point(src.cols-2, src.rows-2), Scalar(255));
    namedWindow("Canny", CV_WINDOW_AUTOSIZE);
    imshow("Canny", canny_output);

    // Find the contours.
    findContours(canny_output, contours, hierarchy, CV_RETR_TREE, CV_CHAIN_APPROX_SIMPLE, Point(0, 0));

    // Remove largest Contour, because it represents always the whole image.
    sort(contours.begin(), contours.end(), cmp_contour_area_less);
    contours.resize(contours.size()-1);
    reverse(contours.begin(), contours.end());

    // Maximum contour size.
    int image_pixels(src.cols * src.rows);
    cout << "image_pixels: " << image_pixels << "\n";

    // Filter the contours, leaving just large enough ones.
    vector<vector<Point> > background_contours;
    for(size_t i(0); i < contours.size(); ++i)
    {
        double area(contourArea(contours[i]));
        double min_size((size_per_mill / 1000.0) * image_pixels);
        if (area >= min_size)
        {
            cout << "Background contour " << i << ") area: " << area << "\n";
            background_contours.push_back(contours[i]);
        }
    }

    // Draw large contours.
    Mat drawing = Mat::zeros(canny_output.size(), CV_8UC3);
    for(size_t i(0); i < background_contours.size(); ++i)
    {
        Scalar color = Scalar(rng.uniform(0, 255), rng.uniform(0,255), rng.uniform(0,255));
        drawContours(drawing, background_contours, i, color, 1, 8, hierarchy, 0, Point());
    }

    namedWindow("Contours", CV_WINDOW_AUTOSIZE);
    imshow("Contours", drawing);
}

void size_callback(int, void*)
{
    Segment();
}

void thresh_callback(int, void*)
{
    Segment();   
}

int main(int argc, char* argv[])
{
    if (argc != 2)
    {
        cout << "Please provide an image file.\n";
        return -1;
    }

    src = imread(argv[1]);

    cvtColor(src, src_gray, CV_BGR2GRAY);
    blur(src_gray, src_gray, Size(3,3));

    namedWindow("Source", CV_WINDOW_AUTOSIZE);
    imshow("Source", src);

    if (!src.data)
    {
        cout << "Unable to load " << argv[1] << ".\n";
        return -2;
    }

    createTrackbar("Canny thresh:", "Source", &canny_thresh, max_canny_thresh, thresh_callback);
    createTrackbar("Size thresh:", "Source", &size_per_mill, max_size_per_mill, thresh_callback);

    Segment();
    waitKey(0);
} 
```

# javascript - 编辑网格时，如何按行禁用特定字段？

> ID：14221670
> 
> 赞同：4
> 
> 时间：2013-01-08T18:29:14.543
> 
> 标签：javascript, kendo-ui, telerik, grid

我有一个剑道网格，其中包含数据和多列（例如 col 1、2 和 3）。第 1、2、3 列需要能够根据彼此的值进行编辑（或阻止编辑）。这是特定于行的。

例如，如果第 1 列（日期）< 第 2 列（日期），则不允许编辑第 3 列。

我知道禁用或启用整个列很简单，但我的要求是特定于行的。因此，第 1 行可以启用第 3 列，第 2 行可以禁用第 3 列。

有什么想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-09T00:02:40.093

我的建议是创建一个验证条件的编辑器函数。这当然具有临时解决方案的缺点，但是......它有效！

让我们有以下条目（数据源的数据）：

```
var entries = [
    { id:1, col1: new Date(2012, 11, 31), col2: new Date(2013, 0, 1), col3: "Yes" },
    { id:2, col1: new Date(2013, 0, 1), col2: new Date(2013, 0, 1), col3: "No" },
    { id:3, col1: new Date(2013, 0, 2), col2: new Date(2013, 0, 1), col3: "No" }
]; 
```

然后我将网格定义为：

```
var grid = $("#grid").kendoGrid({
    dataSource : {
        data    : entries,
        schema  : {
            model: {
                id    : "id",
                fields: {
                    col1: { type: "date"},
                    col2: { type: "date"},
                    col3: { editable: true }
                }
            }
        },
        pageSize: 3
    },
    columns    : [
        { field: "col1", title: "Col1", format: "{0:yyyy-MM-dd}" },
        { field: "col2", title: "Col2", format: "{0:yyyy-MM-dd}" },
        { field: "col3", title: "Edit?", editor: checkAndEdit }
    ],
    editable   : "incell",
    navigatable: true,
    pageable   : true
}).data("kendoGrid"); 
```

where `col1`and `col2`are dates and是一个字符串，*当且仅当*小于时才`col3`可以编辑。 *`col1``col2`*

 *我定义`checkAndEdit`功能如下：

```
function checkAndEdit(container, options) {
    if (options.model.col1 < options.model.col2) {
        $('<input data-bind="value:' + options.field + '" ' +
                'data-format="' + options.format + '" ' +
                'class="k-input k-textbox"/>')
                .appendTo(container);
    } else {
        grid.closeCell(container);
    }
} 
```

如果<则在哪里生成相应的`input`字段，否则为退出模式调用。`col1``col2``closeCell``edit`

你可以看到它在[这里运行](http://jsfiddle.net/OnaBai/vrMzS/2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-13T04:42:42.220

保持简单，只需使用（在网格列中绑定）

`[Editable(false)]
public string ob_name { get; set; }`

在用于 Kendo Ui Grid 的服装类中。

有关详细信息，您还可以[查看此](http://atikpassion.blogspot.com/2013/05/how-to-disable-specific-grid-column-in.html)*

# iphone - 用手指拖动在 UITableView 中选择多行

> ID：14221676
> 
> 赞同：0
> 
> 时间：2013-01-08T18:29:39.543
> 
> 标签：iphone, ios, xcode, uitableview

我想问是否可以通过在我要选择的单元格上拖动手指来选择多个单元格。例如，当您裁剪图片时，您正在用手指拖动一条线，我希望有类似的效果。

我也可以考虑使用其他 UI 元素而不是 UITableView，欢迎提出建议。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:49:35.570

`view.backgroundColor = [UIColor clearColor]`当您想要选择时，您可以在表格视图上方放置一个透明（ ）覆盖视图。

在这个透明视图中，您应该`UIPanGestureRecognizer`通过观​​察这个识别器的事件，特别是 、 和 的事件来设置`Began`,和。目标对象会知道要选择的范围。`Changed``Ended``Cancelled`

# ios - ios企业发行版未安装在另一部iphone上

> ID：14221677
> 
> 赞同：0
> 
> 时间：2013-01-08T18:29:42.467
> 
> 标签：ios, distribution, enterprise

任何人都知道为什么我可以通过带有用于企业部署的清单文件的 url 在我的手机上成功安装我的 iphone 应用程序，但其他人都会收到“无法下载应用程序。此时无法安装。完成，重试”消息。我想知道是否是因为在我的钥匙串应用程序中，它显示了附加到私钥的分发证书，其中只有我的名字。但是，我的开发证书有一个名为“IOS Developer and my name”的私钥。所有这些证书和配置文件都让我感到困惑。我是否可以通过某种方式将错误的私钥附加到此分发证书？

# android - SQLite Database Android - 在其他活动中使用、打开和查询数据库

> ID：14221679
> 
> 赞同：0
> 
> 时间：2013-01-08T18:29:50.023
> 
> 标签：android, sql, database, sqlite, android-activity

我在创建的其他活动中打开创建的数据库时遇到问题。其实我不知道该怎么做。在创建数据库的 Activity 中插入和查询方法效果很好。但我想在其他活动中打开该数据库并使用我的查询。我阅读了有关`openOrCreateDatabase()`方法，但我不知道如何使用它。我想我应该`createDataBase()`在课堂上使用方法，`Baza`但是（以防万一`openOrCreateDatabase()`）我不知道如何使用它。有人可以帮我解决我的问题吗？

巴扎代码：

```
import java.util.ArrayList;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class Baza extends SQLiteOpenHelper {

SQLiteDatabase db;
static final String dbName ="cookBook.db";
static final int dbVersion = 2;

// tabela przepisy
static final String TabelaPrzepisyNazwa = "Przepisy";
static final String TabPrzepisyCol1 = "_id";            static final int    TabPrzepisyCol1Number = 1;
static final String TabPrzepisyCol2 = "Nazwa";          static final int    TabPrzepisyCol2Number = 2;  
static final String TabPrzepisyCol3 = "Kategoria";      static final int    TabPrzepisyCol3Number = 3;
static final String TabPrzepisyCol4 = "Cena";           static final int    TabPrzepisyCol4Number = 4;
static final String TabPrzepisyCol5 = "Przygotowanie";  static final int    TabPrzepisyCol5Number = 5;
static final String TabPrzepisyCol6 = "Kalorycznosc";   static final int    TabPrzepisyCol6Number = 6;
static final String TabPrzepisyCol7 = "Czas";           static final int    TabPrzepisyCol7Number = 7;

static final String TabelaPrzepSkladNazwa = "PrzepSklad";
static final String TabPrzepSkladCol1 = "_id";          static final int    TabPrzepSkladCol1Number = 1;
static final String TabPrzepskladCol2 = "Nazwa";        static final int    TabPrzepskladCol2Number = 2;    
static final String TabPrzepskladCol3 = "Ilosc";        static final int    TabPrzepskladCol3Number = 3;
static final String TabPrzepskladCol4 = "IdDania";      static final int    TabPrzepskladCol4Number = 4;

static final String przepisyTabCreate = "CREATE TABLE " + TabelaPrzepisyNazwa + "(" + 
        TabPrzepisyCol1+ " INTEGER PRIMARY KEY, " +
        TabPrzepisyCol2+ " TEXT, " + 
        TabPrzepisyCol3+ " TEXT, " +
        TabPrzepisyCol4+ " INTEGER, " +
        TabPrzepisyCol5+ " TEXT, " +
        TabPrzepisyCol6+ " INTEGER, " +
        TabPrzepisyCol7+ " INTEGER)";

static final String przepSkladTabCreate = "CREATE TABLE " + TabelaPrzepSkladNazwa + "(" + 
        TabPrzepSkladCol1+ " INTEGER PRIMARY KEY, " +
        TabPrzepskladCol2+ " TEXT, " +
        TabPrzepskladCol3+ " INTEGER, " +
        TabPrzepskladCol4+ " INTEGER)"; 

public Baza(Context context) {

    super(context, dbName, null, dbVersion);
    // TODO Auto-generated constructor stub
}

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub
    db.execSQL(przepisyTabCreate);
    db.execSQL(przepSkladTabCreate);

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub
    db.execSQL("DROP TABLE IF EXISTS "+ TabelaPrzepisyNazwa);
    db.execSQL("DROP TABLE IF EXISTS "+ TabelaPrzepSkladNazwa);

}

public void onOpen(SQLiteDatabase db) {

}

public long dodajDanieDoBazy(String name, String cat, int price, String opis, int kcal, int czas)
{
    db = super.getWritableDatabase();
     ContentValues cv=new ContentValues();

       cv.put(TabPrzepisyCol2, name);
       cv.put(TabPrzepisyCol3, cat);
       cv.put(TabPrzepisyCol4, price);
       cv.put(TabPrzepisyCol5, opis);
       cv.put(TabPrzepisyCol6, kcal);
       cv.put(TabPrzepisyCol7, czas);

       return (db.insert(TabelaPrzepisyNazwa, null, cv));
}

public long dodajSkladnikDoDania(String nazwaSkladnika, int iloscSkladnika, int idDania)
{
    db = super.getWritableDatabase();
     ContentValues cv=new ContentValues();

       cv.put(TabPrzepskladCol2, nazwaSkladnika);
       cv.put(TabPrzepskladCol3, iloscSkladnika);
       cv.put(TabPrzepskladCol4, idDania);

       return (db.insert(TabelaPrzepSkladNazwa, null, cv));     
}

public ArrayList<String> znajdzIdOpisDania (String phraze)
{
    ArrayList<String> ListaDoZwrotu = new ArrayList<String>();
    db=super.getReadableDatabase();
    String[] ktoreKolumny = {TabPrzepisyCol1, TabPrzepisyCol2, TabPrzepisyCol4, TabPrzepisyCol5, TabPrzepisyCol6, TabPrzepisyCol7};
    String WHERE = TabPrzepisyCol2 + " =?";
    String[] wyszukiwanie = {phraze};
    Cursor c = db.query(TabelaPrzepisyNazwa,ktoreKolumny,WHERE, wyszukiwanie, null, null, null);
    try {
        if(c.moveToFirst()) {
            String temp = new String();
            temp = c.getString(c.getColumnIndex(TabPrzepisyCol1));
            ListaDoZwrotu.add(temp);
            temp = c.getString(c.getColumnIndex(TabPrzepisyCol2));
            ListaDoZwrotu.add(temp);
            temp = c.getString(c.getColumnIndex(TabPrzepisyCol4));
            ListaDoZwrotu.add(temp);
            temp = c.getString(c.getColumnIndex(TabPrzepisyCol5));
            ListaDoZwrotu.add(temp);
            temp = c.getString(c.getColumnIndex(TabPrzepisyCol6));
            ListaDoZwrotu.add(temp);
            temp = c.getString(c.getColumnIndex(TabPrzepisyCol7));
            ListaDoZwrotu.add(temp);
            return ListaDoZwrotu;
        }
        else return null;
    }
    catch (Exception e)     {
        return null;
    }
}

public ArrayList<String> znajdzSkladnikiDania (String phraze)
{
    ArrayList<String> listaSkladnikow = new ArrayList<String>();
    db=super.getReadableDatabase();
    String[] ktoreKolumny = {TabPrzepskladCol2, TabPrzepskladCol3};
    String WHERE = TabPrzepskladCol4 + " =?";
    String[] wyszukiwanie = {phraze};
    Cursor c = db.query(TabelaPrzepSkladNazwa,ktoreKolumny,WHERE, wyszukiwanie, null, null, null);
    try {
        if(c.moveToFirst()) {
            do {
                String temp = c.getString(c.getColumnIndex(TabPrzepskladCol2)) + " - " 
                        + c.getString(c.getColumnIndex(TabPrzepskladCol3));
                listaSkladnikow.add(temp);
                } while (c.moveToNext());

            return listaSkladnikow;
        }
        else return null;
        }
        catch (Exception e)     {
            return null;
        }
}

public ArrayList<String> find(String phraze)
{
    ArrayList<String> listaWyszukan = new ArrayList<String>();
    db=super.getReadableDatabase();
    String[] ktoreKolumny = {TabPrzepisyCol2};
    String WHERE = TabPrzepisyCol3 + " =?";
    String[] wyszukiwanie = {phraze};
    Cursor c = db.query(TabelaPrzepisyNazwa,ktoreKolumny,WHERE, wyszukiwanie, null, null, null);
    //String zwr = Integer.toString(c.getCount());
    try {
    if(c.moveToFirst()) {
        do {
        String temp = c.getString(c.getColumnIndex(TabPrzepisyCol2));
        listaWyszukan.add(temp);
        } while (c.moveToNext());

        return listaWyszukan;
    }
    else return null;
    }
    catch (Exception e)     {
        return null;
    }
}

public ArrayList<String> findByPrice(int price)
{
    ArrayList<String> listaWyszukan = new ArrayList<String>();
    db=super.getReadableDatabase();
    String[] ktoreKolumny = {TabPrzepisyCol2};
    String WHERE = TabPrzepisyCol4 + " <?";
    String[] wyszukiwanie = {Integer.toString(price)};
    Cursor c = db.query(TabelaPrzepisyNazwa,ktoreKolumny,WHERE, wyszukiwanie, null, null, null);
    try {
    if(c.moveToFirst()) {
        do {
        String temp = c.getString(c.getColumnIndex(TabPrzepisyCol2));
        listaWyszukan.add(temp);
        } while (c.moveToNext());

        return listaWyszukan;
    }
    else return null;
    }
    catch (Exception e)     {
        return null;
    }
}

public void deleteAll()
{
     db=super.getReadableDatabase();
     db.delete(TabelaPrzepisyNazwa, null, null);
     db.delete(TabelaPrzepSkladNazwa, null, null);

}
} 
```

第一个活动代码：

```
bazaDanych = new Baza(getApplicationContext());
bazaDanych.deleteAll();
bazaDanych.dodajDanieDoBazy("Ex 1", "Cat1", 4, "description", 280, 40); 
```

第二个活动代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_wyszukiwarkaprzepisow);

    tytul = (TextView) findViewById(R.id.textView1);
    blabla = (TextView) findViewById(R.id.textView2);
    ustawCzcionke(tytul);

    Baza bazaDanych = new Baza(getApplicationContext());
String wyborSpinnerDania = "3";
ArrayList<String> szukaneDanie = new ArrayList<String>();
szukaneDanie = bazaDanych.znajdzIdOpisDania(wyborSpinnerDania);
blabla.setText(szukaneDanie.get(0));
//blabla.setText("exa");

} 
```

当我切换到我想要访问我的数据库的活动时出现 Logcat 错误：

```
W/dalvikvm(14576): threadid=1: thread    Exiting with uncaught    Exception (group=0x4001d5a0)
E/AndroidRuntime(14576): FATAL    EXCEPTION: main
E/AndroidRuntime(14576): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.kajsmig.cookBook/com.kajsmig.cookBook.WyszukiwarkaPrzepisowActivity}: java.lang.NullPointerException
E/AndroidRuntime(14576):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1872)
E/AndroidRuntime(14576):    at android.app.ActivityThread.startActivityNow(ActivityThread.java:1692)
E/AndroidRuntime(14576):    at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
E/AndroidRuntime(14576):    at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
E/AndroidRuntime(14576):    at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:656)
E/AndroidRuntime(14576):    at android.widget.TabHost.setCurrentTab(TabHost.java:326)
E/AndroidRuntime(14576):    at com.kajsmig.cookBook.ExtendActivity.przlaczAktywnosc(ExtendActivity.java:90)
E/AndroidRuntime(14576):    at com.kajsmig.cookBook.PrzepisyActivity.onGesturePerformed(PrzepisyActivity.java:293)
E/AndroidRuntime(14576):    at android.gesture.GestureOverlayView.fireOnGesturePerformed(GestureOverlayView.java:728)
E/AndroidRuntime(14576):    at android.gesture.GestureOverlayView.access$400(GestureOverlayView.java:55)
E/AndroidRuntime(14576):    at android.gesture.GestureOverlayView$FadeOutRunnable.run(GestureOverlayView.java:743)
E/AndroidRuntime(14576):    at android.os.Handler.handleCallback(Handler.java:587)
E/AndroidRuntime(14576):    at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime(14576):    at android.os.Looper.loop(Looper.java:150)
E/AndroidRuntime(14576):    at android.app.ActivityThread.main(ActivityThread.java:4385)
E/AndroidRuntime(14576):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(14576):    at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime(14576):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
E/AndroidRuntime(14576):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
E/AndroidRuntime(14576):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(14576): Caused by: java.lang.NullPointerException
E/AndroidRuntime(14576):    at com.kajsmig.cookBook.WyszukiwarkaPrzepisowActivity.onCreate(WyszukiwarkaPrzepisowActivity.java:50)
E/AndroidRuntime(14576):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
E/AndroidRuntime(14576):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1836)
E/AndroidRuntime(14576):    ... 19 more 
```

我应该更改、添加或删除什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:38:59.017

创建新界面“已定义”，如下所示：

```
import android.provider.BaseColumns;

public interface Stale extends BaseColumns {
public static final String NAZWA_TABELI1 = "konta"; 
public static final String NAZWA_TABELI2 = "notatki"; 
public static final String NAZWA_TABELI3 = "logowania"; 

//TABELA 1 
public static final String INT1 = "id1";
public static final String LOGIN = "login"; 
public static final String HASH = "hash";

// TABELA 2
public static final String INT2 = "id2";
public static final String TYTUL = "tytul";
public static final String TRESC = "tresc";
public static final String KIEDY = "kiedy"; 
public static final String KTO = "kto"; 

// TABELA 3
public static final String INT3 = "id3";
public static final String KTORY = "ktory";
public static final String WANN = "wann"; 
```

}

在此创建新类扩展 SQLiteOpenHelper 之后。这是示例：

```
public class Bazodanowiec extends SQLiteOpenHelper {

    public static final String NAZWA_BAZY = "database.db";
    public static final int WERSJA_BAZY = 1;

    public Bazodanowiec(Context kon)
    {
        super(kon, NAZWA_BAZY, null, WERSJA_BAZY );
    }

    public void onCreate(SQLiteDatabase bd)
    {
        bd.execSQL("CREATE TABLE IF NOT EXISTS " + NAZWA_TABELI1 + " (" + INT1 + " INTEGER PRIMARY KEY AUTOINCREMENT, " + LOGIN + " VARCHAR(60) NOT NULL, " + HASH + " VARCHAR(64) NOT NULL);");
        bd.execSQL("CREATE TABLE IF NOT EXISTS " + NAZWA_TABELI2 + " (" + INT2 + " INTEGER PRIMARY KEY AUTOINCREMENT, " + TYTUL + " VARCHAR(60) NOT NULL, " + TRESC + " TEXT NOT NULL, " + KIEDY + " TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, " + KTO + " INTEGER NOT NULL, FOREIGN KEY(kto) REFERENCES konta(id1));");
        bd.execSQL("CREATE TABLE IF NOT EXISTS " + NAZWA_TABELI1 + " (" + INT3 + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KTORY + " INTEGER NOT NULL, " + WANN + " TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY(ktory) REFERENCES konta(id1));");
    }

    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

      db.execSQL("DROP TABLE IF EXISTS " + NAZWA_TABELI1 + ";");
      db.execSQL("DROP TABLE IF EXISTS " + NAZWA_TABELI2 + ";");
      db.execSQL("DROP TABLE IF EXISTS " + NAZWA_TABELI3 + ";");
      onCreate(db);
    }

} 
```

您必须导入静态创建的接口。现在再试一次

# php - 使用 jquery ajax 将字符串传递给 php

> ID：14221680
> 
> 赞同：2
> 
> 时间：2013-01-08T18:29:52.040
> 
> 标签：php, jquery, ajax, json

我想向我的 php 文件发送一个哈希字符串。但失败了，有人可以帮帮我吗？

我的 javascript 是这样的：

```
var hashString = "#support_form";

$.ajax ({
   type: "POST",
   url:"index.php",
   data: hashString,
   success: function() {
      console.log("message sent!");
   }
}); 
```

和PHP：

```
<?php
$theHash = $_POST['hashString'];
?> 
```

我应该怎么办？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T18:32:04.233

您需要指定数据的名称/值

```
data: {hashString:hashString}, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T18:32:11.043

你必须这样做-

```
$.ajax ({
   type: "POST",
   url:"index.php",
   data: "hashString=value",
   success: function() {
      console.log("message sent!");
   }
}); 
```

所以你可以得到价值——

```
$theHash = $_POST['hashString'];
echo $theHase; //will print value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T18:31:52.890

利用：

```
data: 'hashString=' + encodeURIComponent(hashString), 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T18:32:31.060

如果您使用对象而不是字符串，您的代码将起作用。尝试这个：

```
var hashString = {hashString: "#support_form"};

$.ajax ({
   type: "POST",
   url:"index.php",
   data: hashString,
   success: function() {
      console.log("message sent!");
   }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T18:32:55.973

你的 JS 应该是这样的：

```
var hashString = "#support_form";

$.ajax ({
   type: "POST",
   url:"index.php",
   data: {hashString: hashString},
   success: function() {
      console.log("message sent!");
   }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T18:33:14.223

数据键必须是对象类型这对你有用

```
var hashString = "#support_form";

$.ajax ({
   type: "POST",
   url:"index.php",
   data: {'hashString':hashString},
   success: function() {
      console.log("message sent!");
   }
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-08T18:35:08.577

```
$.ajax ({
   type: "POST",
   url:"index.php",
   data: {"hashString":hashString},
   success: function() {
      console.log("message sent!");
   }
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-16T12:05:13.660

```
var queryString = "f_name=" + f_name + "&l_name=" + l_name + "&contact_no=" + contact_no + "&email=" + email;
$.ajax({
    type:'POST',
    url:'insert1.php',
    data:queryString,
    dataType:'json',
    success: function(success){
console.log("message sent!");
}
}); 
```

# javascript - 使用 Underscorejs，如何判断一个数组是否包含另一个数组？

> ID：14221683
> 
> 赞同：22
> 
> 时间：2013-01-08T18:30:09.103
> 
> 标签：javascript, underscore.js

我有这个

```
var matches = bookmarks.filter(function(x) {
    return _.contains(x.get("tags"), 'apple');
}); 
```

这将返回具有苹果标签的书签对象

我想在那里放一个数组来拉取所有具有匹配值的书签，类似于这个

```
var matches = bookmarks.filter(function(x) {
    return _.contains(x.get("tags"), ['apple','orange']);
}); 
```

这不工作，有什么办法让它工作？

编辑：对不起，书签是一个集合，我试图返回具有苹果和橙色标签的模型

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-08T18:33:51.653

**如果标签是一个字符串，你的代码就是**

```
return _.indexOf(x.get("tags"), ['apple','orange']) > -1; 
```

indexOf 示例：[jsFiddle](http://jsfiddle.net/H9LHX/)

**如果标签是一个数组，你可以使用交集**

```
return _.intersection(['apple','orange'], x.get("tags")).length > 0; 
```

交集示例：[jsFiddle](http://jsfiddle.net/jRxtW/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T18:34:04.937

下划线似乎没有这个功能。但是，您可以轻松地结合其他功能来完成此操作：

```
_.mixin({
  containsAny: function(arr, values) {
    // at least one (.some) of the values should be in the array (.contains)
    return _.some(values, function(value) {
      return _.contains(arr, value);
    });
  }
}); 
```

# c# - 创建一个 ViewModel 类

> ID：14221685
> 
> 赞同：2
> 
> 时间：2013-01-08T18:30:17.397
> 
> 标签：c#, wpf, mvvm, viewmodel

我想创建一个 ViewModel 类来从数据库中检索值。我的目标是从我的数据库表中检索 RAM 的使用值（RAM 总数和可用的 RAM），然后将其显示在我的视图中。

这就是我迄今为止在我的 ViewModel 类上所做的

```
public class RamViewModel : INotifyPropertyChanged
{
    float _ramTotal;
    float _ramUsed;

    public float RamTotal
    {
        get { return _ramTotal; }
        set { _ramTotal = value; RaisePropertyChanged("RamTotal"); }
    }

    public float RamUsed
    {
        get { return _ramUsed; }
        set { _ramUsed = value; RaisePropertyChanged("RamUsed"); }
    }

    private void RaisePropertyChanged(string p)
    {
        throw new NotImplementedException();
    }
  } 
```

当我构建这个类时，我得到了这个错误，“ViewModel.RamViewModel 没有实现接口成员'System.ComponentModel.INotifyPropertyChanged.PropertyChanged'”

如何克服这个错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T18:37:52.140

您的类不会公开[`PropertyChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.propertychanged.aspx)事件，这对于实现的类是必需的`INotifyPropertyChanged`（它是该接口的唯一成员）。

所以你应该添加：

```
public event PropertyChangedEventHandler PropertyChanged;

private void RaisePropertyChanged(string propertyName)
{
    var handler = this.PropertyChanged;
    if (handler != null) {
        handler(this, new PropertyChangedEventArgs(propertyName);
    }
} 
```

`ObservableCollection`与此无关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T18:38:40.627

INotifyPropertyChanged 是一个接口，其中一个成员需要包含在您的类定义中：

```
 public event PropertyChangedEventHandler PropertyChanged; 
```

You should also change the code in `RaisePropertyChanged` to not throw an exception, by implementing the actual functionality:

```
 private void RaisePropertyChanged(string p)
    {
        if (null != PropertyChanged) PropertyChanged(this, new PropertyChangedEventArgs(p));
    } 
```

# permissions - 为 Orchard CMS 手动设置文件夹权限

> ID：14221690
> 
> 赞同：3
> 
> 时间：2013-01-08T18:30:59.593
> 
> 标签：permissions, orchardcms

自从我的应用程序池用户更改后，我需要重新对 app_data 下的文件夹应用权限。当我查看另一个站点时，我得到了它的特殊权限——不仅仅是读/写。

是否有脚本可以重新应用它 - 或者我需要应用什么特殊权限？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:24:38.450

[`Orchard`文档](http://docs.orchardproject.net/Documentation/Manually-installing-Orchard-zip-file#RunningtheSiteUsingIIS)中有说明指定哪些文件夹应具有哪些权限。

从文件：

> 您可能必须在以下文件夹中为配置为 IIS 应用程序池标识的帐户设置读/写权限：
> 
> - 模块。如果您想从库中安装模块，这是必需的。（我们建议您删除生产站点的读/写权限。）
> - 主题。如果您想从图库中安装主题，这是必需的。（我们建议您删除生产站点的读/写权限。）
> - AppData_。这个文件夹是 Orchard 存储站点设置的地方。
> - 媒体。此文件夹是 Orchard 存储媒体文件（图像等）的位置。

# c++ - 在 C 或 C++ 源文件中扩展单个宏

> ID：14221691
> 
> 赞同：8
> 
> 时间：2013-01-08T18:31:04.377
> 
> 标签：c++, c, c-preprocessor

我有大量的 c++ 源文件，我想通过扩展我指定的单个函数宏来转换它们，并保持所有其他预处理指令不变。宏的参数通常会涉及括号和大括号以及括号保护的逗号，因此使用 sed 和 kin 执行此操作似乎并不直接。

更新：我们的代码大量使用宏来生成样板（例如 swig 的帮助代码）。当我们更好地弄清楚如何做某些事情时，各种宏不再做任何非常有趣的事情（例如，只是声明一些函数），许多人抱怨它们使代码更难阅读。我想扩展不那么有趣的宏，这些宏扩展到简单的 C++ 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T18:42:24.080

我通过在 python 中使用正则表达式来完成这类事情。您可以编写一个相当短的脚本来处理大量文件并在每个文件上运行一些正则表达式。正则表达式可能是最耗时的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-22T14:37:32.200

我也有类似的需求：摆脱（扩展）那些用于处理古老的 C89 之前的编译器的无用的原型隐藏宏，同时保留其他所有内容。

示例来自`<stdio.h>`：

```
int     _EXFUN(vfprintf, (FILE *__restrict, const char *__restrict, __VALIST)
               _ATTRIBUTE ((__format__ (__printf__, 2, 0))));
int     _EXFUN(vprintf, (const char *, __VALIST)
               _ATTRIBUTE ((__format__ (__printf__, 1, 0))));
int     _EXFUN(vsprintf, (char *__restrict, const char *__restrict, __VALIST)
               _ATTRIBUTE ((__format__ (__printf__, 2, 0))));
int     _EXFUN(fgetc, (FILE *));
char *  _EXFUN(fgets, (char *__restrict, int, FILE *__restrict));
int     _EXFUN(fputc, (int, FILE *)); 
```

在这里，我需要将宏扩展`_EXFUN(name,proto)`为`name proto`. 请注意，某些宏调用跨越多行。

解决方案是使用宏处理器，`m4`因为它与 #include 指令和其他宏处理无关（与`cpp`or不同`gcc -E`）：

```
$ m4 '-D_EXFUN=$1$2' stdio.h
int     vfprintf(FILE *__restrict, const char *__restrict, __VALIST)
               _ATTRIBUTE ((__format__ (__printf__, 2, 0)));
int     vprintf(const char *, __VALIST)
               _ATTRIBUTE ((__format__ (__printf__, 1, 0)));
int     vsprintf(char *__restrict, const char *__restrict, __VALIST)
               _ATTRIBUTE ((__format__ (__printf__, 2, 0)));
int     fgetc(FILE *);
char *  fgets(char *__restrict, int, FILE *__restrict);
int     fputc(int, FILE *); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-09T15:12:13.407

*   创建`undef.h`文件
*   用 's 填充`#undef`你不想扩展的所有宏
*   包括`extern int LandMarkSoYouCanFindThis;`作为最后一行
*   对于每个文件
    *   `#include "undef.h"`在文件中最后一个包含之后注入。
    *   通过运行文件`cpp`
    *   使用`LandMark`切断包含的所有内容
    *   合并回原始文件。

您可以通过从`#undef`ing 刚刚选择的宏和`#undef`ing 所有宏之间的差异生成补丁来自动化最后一步。

# c# - XNA 模型无法编译？

> ID：14221694
> 
> 赞同：1
> 
> 时间：2013-01-08T18:31:18.620
> 
> 标签：c#, model, 3d, xna

我正在 XNA 中开发游戏，并且正在从搅拌机加载模型。该模型直到现在还没有纹理，当它尝试编译时出现此错误：

> 使用 BasicEffect 的网格“”包含缺少通道 0 纹理坐标的几何体。

在此之前加载的模型。我知道我必须将纹理文件添加到与我的内容中的 .x 文件相同的位置，我做到了。.x 文件包含引用纹理的段。

> ```
>  Material ShipMat {
>        0.640000; 0.552144; 0.594688; 1.000000;;
>        96.078431;
>        0.500000; 0.500000; 0.500000;;
>        0.000000; 0.000000; 0.000000;;
>       TextureFilename {"shipTexture.jpg";}
>     } 
> ```

我正在使用用于搅拌机的附加 DirectX 导出器，因为当我尝试将我的模型导出为 .fbx 时，它没有加载纹理并且它以奇怪的方向旋转。有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:29:53.597

为了使纹理起作用，每个模型顶点都需要纹理坐标。

听起来模型没有从搅拌器中导出每个顶点的纹理坐标元素。最有可能的是，您的模型顶点只有位置、颜色和可能只有法线元素。

只需返回搅拌机，应用您想要的任何旧纹理，然后重新导出它并在 Xna 中换出纹理，您将得到您现在所期望的。

# linux - 在 MacOS 中使用 mount_ftp 命令

> ID：14221695
> 
> 赞同：1
> 
> 时间：2013-01-08T18:31:18.220
> 
> 标签：linux, macos, command-line, ftp, mount

我想通过执行以下命令将 ftp 共享包含到我的正常文件系统中：

```
$ mkdir /Volumes/myfolder
$ mount_ftp ftp://user:password@ftp.domain.tld /Volumes/myfolder 
```

我没有收到错误消息，但是当我打开文件夹时，文件夹只是空的。我也尝试按照[此处](https://igppwiki.ucsd.edu/groups/publichelpwiki/wiki/d0cc0/How_to_Mount_an_FTP_Server_on_Mac_OSX.html)列出的说明进行操作，但收到错误消息“服务器上不存在共享。请检查共享名称，然后重试。”。但是，我可以通过在地址栏中键入[ftp://user:password@ftp.domain.tld](ftp://user:password@ftp.domain.tld)来访问共享。

有什么想法我会做错什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T22:29:46.683

正如您将在 中看到的`man mount_ftp`，`mount_ftp`可以设置多个返回值。获得返回值的一种方法是在命令`echo $?`之后立即说。`mount_ftp`

# .net - 多线程环境中的 OperationContext.Current.SessionId

> ID：14221698
> 
> 赞同：0
> 
> 时间：2013-01-08T18:31:27.517
> 
> 标签：.net, multithreading, wcf, operationcontext

我有一个连接到多个客户端的 WCF 服务。服务配置如下：

```
ServiceBehavior(
        InstanceContextMode = InstanceContextMode.Single,
        UseSynchronizationContext = false,
        ... 
```

在我使用的服务中，使用 OperationContext.Current.SessionId 识别客户端。

```
public void Register()
{
        Debug.WriteLine(OperationContext.Current.SessionId);
} 
```

想象一下以下场景： - Client1 调用 Register - 服务在 Thread1 中运行 Register - 在一段时间后 Client2 调用 Register - 服务也在 Thread1 中运行 Register（理论上是可能的，不是吗？）

知道 OperationContext.Current 是 ThreadStatic，显示第二个调用的内容：

*   会话 1，因为 OperationContext.Current 已在第一次调用中设置
*   还是第 2 节 ..？

先感谢您 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:33:10.240

您将获得 Session2。会话和实例化在 WCF 中是两个不同的东西。我建议您阅读以下 2 个博客条目，它们将帮助您理解 WCF 会话和实例化的概念。

[http://www.dotnetconsult.co.uk/weblog2/PermaLink,guid,af6e6325-2e30-42e3-acb9-57e1363fa51e.aspx](http://www.dotnetconsult.co.uk/weblog2/PermaLink,guid,af6e6325-2e30-42e3-acb9-57e1363fa51e.aspx)

[http://www.dotnetconsult.co.uk/weblog2/PermaLink,guid,1efac821-2b89-47bb-9d27-48f0d6347914.aspx](http://www.dotnetconsult.co.uk/weblog2/PermaLink,guid,1efac821-2b89-47bb-9d27-48f0d6347914.aspx)

您也可以使用客户端对此进行测试。我更改了您的 WCF 方法以返回 sessionID 并在客户端中使用它。

```
static void Main(string[] args)
{
      ServiceReference1.Service1Client client = new ServiceReference1.Service1Client();
      Console.WriteLine(client.Regster());
      Console.ReadLine();
      client.Close();
} 
```

# java - NetBeans Java GUI 构建器

> ID：14221702
> 
> 赞同：0
> 
> 时间：2013-01-08T18:31:31.437
> 
> 标签：java, user-interface, netbeans

我有一个 Java 应用程序，我可以选择*源*旁边的*设计*选项并使用 GUI 构建器，但有些没有该选项*设计*，我不能在它们上使用 GUI 构建器。如果该选项不存在，有没有办法使用 GUI builder？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:43:47.687

如果您通过NetBeans的“*新建文件”*窗口将该文件创建为**Swing GUI 表单**，则只能在**Source**和**Design之间切换。**这是我的意思的窗口：

 ***![在此处输入图像描述](../Images/a53c7c911ef749aab8ada3bfcef79b88.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:45:49.613

我认为您只能在选择 JForm 而不是 Java Class 时进行选择*****

# java - 将外部库添加到android项目

> ID：14221705
> 
> 赞同：0
> 
> 时间：2013-01-08T18:31:47.513
> 
> 标签：java, android

在日志中它写道该应用程序看不到外部库，但我通过在文件夹“库”中添加库并写入属性来添加它。请帮助我，谁知道

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:36:00.593

**右键单击****libs 文件夹**中的**外部 jar 文件**，然后选择**Build Path -> Add to Build Path**。

 ****[在这里](http://geekswithblogs.net/cyberycon/archive/2011/05/17/using-external-libraries-with-android.aspx)查看详细说明。****

# powershell - 从 ps 脚本调用 powershell cmdlet

> ID：14221706
> 
> 赞同：1
> 
> 时间：2013-01-08T18:31:48.643
> 
> 标签：powershell, cmdlets

我有一个具有以下定义的 cmdlet：

```
[CmdletBinding(DefaultParameterSetName="Path",
               SupportsShouldProcess=$TRUE)]
param(
  [parameter(Mandatory=$TRUE,Position=0)]
    [String] $Pattern,
  [parameter(Mandatory=$TRUE,Position=1)]
    [String] [AllowEmptyString()] $Replacement,
  [parameter(Mandatory=$TRUE,ParameterSetName="Path",
    Position=2,ValueFromPipeline=$TRUE)]
    [String[]] $Path,
  [parameter(Mandatory=$TRUE,ParameterSetName="LiteralPath",
    Position=2)]
    [String[]] $LiteralPath,
    [Switch] $CaseSensitive,
    [Switch] $Multiline,
    [Switch] $UnixText,
    [Switch] $Overwrite,
    [Switch] $Force,
    [String] $Encoding="ASCII"
) 
```

我将 cmdlet .ps1 文件与调用 cmdlet 的 powershell 脚本文件放在同一文件夹中，如下所示：

> Invoke-Expression -Command .\Replace-FileString.ps1 "9595" "NewPort" "c:\temp" -Overwrite

但是，当我执行我的 ps 脚本时，我收到以下错误：

> 调用表达式：找不到接受参数“9595”的位置参数。我怎样才能让它工作？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T18:43:42.217

尝试：

```
Invoke-Expression -Command '.\Replace-FileString.ps1 "9595" "NewPort" "c:\temp" -Overwrite' 
```

您的命令包含使用引号的参数，因此 PS 认为您的命令已经结束并且这些是新参数（不是 -Command 参数的一部分）。

# google-app-engine - 应用引擎允许每个项目有多少开发人员？

> ID：14221708
> 
> 赞同：0
> 
> 时间：2013-01-08T18:31:53.660
> 
> 标签：google-app-engine

我正在与 Google-App-Engine 合作，我有一个由 25 名开发人员组成的团队，我想知道我是否可以将他们全部注册到一个项目中。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:49:00.750

参加人数没有具体限制。

# jquery - jQuery根据工具栏的选择更改容器中的内容

> ID：14221715
> 
> 赞同：0
> 
> 时间：2013-01-08T18:32:11.687
> 
> 标签：jquery

这是我正在使用的屏幕截图：

![在此处输入图像描述](../Images/b440870e7781f93add7fb8034101cb5f.png)

**应该发生的事情：**默认情况下，社交提要设置为 Twitter 流。当用户从工具栏中单击任何其他流时，下面的内容应该切换到其他内容。我不太清楚如何切换显示的内容。

这是我的 jQuery：

```
$(function() {
    // Sets the default stream to Twitter and selects it in the toolar
    $("#feedFilter li").first().addClass("selected");
    $("#socialFeed .twitterFeed").show();

    $("#feedFilter li").click(function() {
        // Clears the white background on the toolbar selection
        $(this).parent().find("li").removeClass("selected");

        // Toggles the white background on the toolbar selection
        $(this).toggleClass("selected");

        // Clears out all socialFeed lists
        $("#socialFeed").fadeOut();

        // Gets the index of the stream selected in the toolbar and shows the stream
        var x = $(this).index();
        switch(x) {
            case 0: $("#socialFeed .twitterFeed").fadeIn(); break;
            case 1: $("#socialFeed .facebookFeed").fadeIn(); break;
            case 2: $("#socialFeed .newsFeed").fadeIn(); break;
            case 3: $("#socialFeed .linkedInFeed").fadeIn(); break;
        }
    }); 
```

这是我的代码，因此您可以看到层次结构：

```
[...]

<div class="containerSubHeader">
    <ul id="feedFilter">
        <li>Twitter</li>
        <li>Facebook</li>
        <li>Google News</li>
        <li>LinkedIn</li>
    </ul>
</div>
<div class="mainContainer grad-lt-grey">
    <ul id="socialFeed" class="twitterFeed">
        <?php
            [Gets the Twitter content here and puts in <li> items]
        ?>
    </ul>
    <ul id="socialFeed" class="facebookFeed">
        <?php
            [Gets the Facebook content here and puts in <li> items]
        ?>
    </ul>
    <ul id="socialFeed" class="newsFeed">
        <?php
            [Gets the Google News content here and puts in <li> items]
        ?>
    </ul>
    <ul id="socialFeed" class="linkedInFeed">
        <?php
            [Gets the LinkedIn content here and puts in <li> items]
        ?>
    </ul>
</div>

[...] 
```

* * *

这不起作用，但我不确定我的问题是什么。有没有更好的方法来代替它？我只会使用 jQuery 将正确的 PHP 附加到无序列表标签，但这会变得混乱，这似乎“更容易”（或者我认为）。

有什么帮助吗？

[**这是实时站点，因此您可以看到，如果您切换到 Facebook，它可以正常工作，但之后就失败了。**](http://jonathonmoore.com/mkt/index2.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T18:37:46.050

修改你的开关如下

```
// Gets the index of the stream selected in the toolbar and shows the stream
        var x = $(this).index();
        switch(x) {
            case 0: $(".twitterFeed").fadeIn(); break;
            case 1: $(".facebookFeed").fadeIn(); break;
            case 2: $(".newsFeed").fadeIn(); break;
            case 3: $(".linkedInFeed").fadeIn(); break;
        } 
```

选择器`$("#socialFeed .twitterFeed")`将搜索`.twitterFeed`属于#socialFeed id 的子类的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T18:40:07.293

它不起作用，因为您的`UL`标签有重复的 ID 值。在给定的 HTML 页面上，ID 应该是唯一的。

如果您从您`ul`的 's 中删除 ID 属性并编辑您的 javascript 它应该可以工作。我正在删除 ID socialfeed 并将其添加为一个类：

```
 <ul class="socialFeed twitterFeed">
        <?php
            [Gets the Twitter content here and puts in <li> items]
        ?>
    </ul>
    <ul class="socialFeed facebookFeed">
        <?php
            [Gets the Facebook content here and puts in <li> items]
        ?>
    </ul>
    <ul class="socialFeed newsFeed">
        <?php
            [Gets the Google News content here and puts in <li> items]
        ?>
    </ul>
    <ul class="socialFeed linkedInFeed">
        <?php
            [Gets the LinkedIn content here and puts in <li> items]
        ?>
    </ul> 
```

在 jquery 中，我将选择器更改为使用类而不是 id。

```
$(function() {
    // Sets the default stream to Twitter and selects it in the toolar
    $("#feedFilter li").first().addClass("selected");
    $(".socialFeed.twitterFeed").show();

    $("#feedFilter li").click(function() {
        // Clears the white background on the toolbar selection
        $(this).parent().find("li").removeClass("selected");

        // Toggles the white background on the toolbar selection
        $(this).toggleClass("selected");

        // Clears out all socialFeed lists
        $(".socialFeed").fadeOut();

        // Gets the index of the stream selected in the toolbar and shows the stream
        var x = $(this).index();
        switch(x) {
            case 0: $(".socialFeed.twitterFeed").fadeIn(); break;
            case 1: $(".socialFeed.facebookFeed").fadeIn(); break;
            case 2: $(".socialFeed.newsFeed").fadeIn(); break;
            case 3: $(".socialFeed.linkedInFeed").fadeIn(); break;
        }
    }); 
```

# android - 使用列表视图的 Android 语音到文本

> ID：14221720
> 
> 赞同：1
> 
> 时间：2013-01-08T18:32:41.010
> 
> 标签：android, listview, speech-to-text

下面的代码用于将语音转换为 android 应用程序上的文本。此代码在按下语音按钮并将您所说的任何内容转换为文本时起作用。当语音功能关闭时，文本正在显示。如果再次点击语音按钮，之前的文本将被清除，新的文本会显示在页面上。我想要做的是每次我点击说话按钮时，我想在页面上显示单词..然后如果我再次点击说话按钮，我希望下一个单词以列表格式出现在第一个单词下。我正在寻找使用 listview 但我正在苦苦挣扎。这是原始代码和我尝试编写以使其成为列表视图的代码。有人可以帮忙吗？

XML:

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_above="@+id/textView1"
android:layout_toLeftOf="@+id/textView1"
android:gravity="center"
android:orientation="vertical" >

<ImageButton
    android:id="@+id/btnSpeak"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="10dp"
    android:layout_marginRight="10dp"
    android:layout_marginTop="10dp"
    android:contentDescription="@string/speak"
    android:src="@android:drawable/ic_btn_speak_now" />

<TextView
    android:id="@+id/txtText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
    android:layout_marginTop="10dp"
    android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout> 
```

代码：

```
import java.util.ArrayList;

import android.app.Activity;
import android.content.ActivityNotFoundException;
import android.content.Intent;
import android.os.Bundle;
import android.speech.RecognizerIntent;
import android.view.Menu;
import android.view.View;
import android.widget.ImageButton;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {

protected static final int RESULT_SPEECH = 1;

private ImageButton btnSpeak;
private TextView txtText;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    txtText = (TextView) findViewById(R.id.txtText);

    btnSpeak = (ImageButton) findViewById(R.id.btnSpeak);

    btnSpeak.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            Intent intent = new Intent(
                    RecognizerIntent.ACTION_RECOGNIZE_SPEECH);

            intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, "en-US");

            try {
                startActivityForResult(intent, RESULT_SPEECH);
                txtText.setText("");
            } catch (ActivityNotFoundException a) {
                Toast t = Toast.makeText(getApplicationContext(),
                        "Ops! Your device doesn't support Speech to Text",
                        Toast.LENGTH_SHORT);
                t.show();
            }
        }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    switch (requestCode) {
    case RESULT_SPEECH: {
        if (resultCode == RESULT_OK && null != data) {

            ArrayList<String> text = data
                    .getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);

            txtText.setText(text.get(0));
        }
        break;
    }

    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:02:46.313

在您的 onActivityResult 中，您仅使用第一个单词（索引 0）覆盖您的 TextView。您必须像这样遍历 String 数组列表：

```
 String words = "";
    for ( String word : text ) {
        words += " " + word;
    }
    txtText.setText(words); 
```

这是一篇很好的文章，可以帮助您实现 ListView： [ListView 教程](http://www.vogella.com/articles/AndroidListView/article.html)

所以现在当你发现你在列表视图中添加单词值时。

希望这会有所帮助，干杯

# ajax - 通过 CORS 使用 Ajax 请求在浏览器上设置 Cookie

> ID：14221722
> 
> 赞同：48
> 
> 时间：2013-01-08T18:32:50.467
> 
> 标签：ajax, http, cookies, cors

试图实现一个 ajax 登录/注册过程（没有刷新站点的身份验证）。使用 cookie 来保存状态。我想我现在已经有了这个，但由于某种原因，浏览器在从服务器取回 cookie 后没有设置 cookie。任何人都可以帮忙吗？以下是请求和响应标头：

```
Request URL:http://api.site.dev/v1/login
Request Method:POST
Status Code:200 OK 
```

**请求标头**

```
Accept:application/json, text/plain, */*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Content-Length:57
Content-Type:application/json;charset=UTF-8
Host:api.site.dev
Origin:http://site.dev
Referer:http://site.dev/
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.101 Safari/537.11
withCredentials:true
X-Requested-With:XMLHttpRequest
Request Payload
{"email":"calvinfroedge@gmail.com","password":"foobar"} 
```

**响应标头**

```
Access-Control-Allow-Credentials:true
Access-Control-Allow-Headers:X-Requested-With, Content-Type, withCredentials
Access-Control-Allow-Methods:GET, POST, PUT, DELETE, OPTIONS
Access-Control-Allow-Origin:http://site.dev
Connection:Keep-Alive
Content-Length:19
Content-Type:application/json
Date:Tue, 08 Jan 2013 18:23:14 GMT
Keep-Alive:timeout=5, max=99
Server:Apache/2.2.22 (Unix) DAV/2 PHP/5.4.7 mod_ssl/2.2.22 OpenSSL/0.9.8r
Set-Cookie:site=%2B1THQQ%2BbZkEwTYFvXFVV5fxi00l2K%2B6fvt9SuHACTNsEwUGzDSUckt38ZeDsNbZSsqzHmPMWRLc84eDLZzh8%2Fw%3D%3D; expires=Thu, 10-Jan-2013 18:23:14 GMT; path=/; domain=.site.dev; httponly
X-Powered-By:PHP/5.4.7 
```

我还在 chrome 网络工具中看到了从服务器返回的 cookie：

**响应 Cookie**

```
Name: site
Value: %2B1THQQ%2BbZkEwTYFvXFVV5fxi00l2K%2B6fvt9SuHACTNsEwUGzDSUckt38ZeDsNbZSsqzHmPMWRLc84eDLZzh8%2Fw%3D%3D
Domain: .site.dev
Path: /
Expires: Session
Size: 196
Http: ✓ 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2015-11-12T09:05:00.257

您的 AJAX 请求必须在“withCredentials”设置为 true 的情况下进行（仅在 XmlHttpRequest2 和 fetch 中可用）：

```
 var req = new XMLHttpRequest();
    req.open('GET', 'https://api.bobank.com/accounts', true); // force XMLHttpRequest2
    req.setRequestHeader('Content-Type', 'application/json; charset=utf-8');
    req.setRequestHeader('Accept', 'application/json');
    req.withCredentials = true; // pass along cookies
    req.onload = function()  {
        // store token and redirect
        let json;
        try {
            json = JSON.parse(req.responseText);
        } catch (error) {
            return reject(error);
        }
        resolve(json);
    };
    req.onerror = reject; 
```

如果您想详细了解 CORS、API 安全性和 cookie，答案不适合 StackOverflow 评论。看看我写的关于这个主题的这篇文章：[http ://www.redotheweb.com/2015/11/09/api-security.html](http://www.redotheweb.com/2015/11/09/api-security.html)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-05-19T13:06:37.070

我遇到了类似的问题，结果是浏览器设置阻止了第三方 cookie（Chrome > 设置 > 高级设置 > 隐私 > 内容设置 > 阻止第三方 cookie 和站点数据）。解封解决了问题！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-12T00:31:32.117

我需要使用 AJAX 和 PHP 并正确处理 CORS 将 cookie 从多个子域传递到单个 API 域。

这是挑战和解决方案：

1 - api.example.com 上的后端 PHP。

2 - 多个 JS 前端，例如 one.example.com、two.example.com 等。

3 - Cookie 需要双向传递。

4 - 从多个前端到 api.example.com 上的 PHP 后端的 AJAX 调用

5 - 在 PHP 中，我不喜欢使用 $_SERVER["HTTP_ORIGIN"]，在我看来并不总是可靠/安全的（我有一些浏览器，其中 HTTP-ORIGIN 总是为空的）。

在具有单个前端域的 PHP 中执行此操作的正常方法是使用以下命令开始 PHP 代码：

```
header('Access-Control-Allow-Origin: https://one.example.com');  
header('Access-Control-Allow-Headers: Origin, Content-Type, X-Auth-Token');  
header('Access-Control-Allow-Credentials: true'); 
```

在 one.example.com 域的 JS 中：

```
jQuery.ajax({
    url: myURL,
    type: "POST",
    xhrFields: {withCredentials: true},
    dataType: "text",
    contentType: "text/xml; charset=\"utf-8\"",
    cache: false,
    headers: "",
    data: myCallJSONStr,
    success: function(myResponse) {.....} 
```

但是，这不可行，因为我使用多个子域来调用我的 API 域。

而且这个解决方案将**不起作用**，因为我想传递 cookie：

```
header('Access-Control-Allow-Origin: *'); 
```

它与 JS 站点上的 pass on cookie 设置冲突：

```
xhrFields: {withCredentials: true} 
```

这是我所做的：

1 - 使用 GET 参数传递子域。

2 - 在 PHP 中硬编码主域，因此只允许（所有）子域。

这是我的解决方案的 JS/JQuery AJAX 部分：

```
function getSubDomain(){

    let mySubDomain = "";

    let myDomain = window.location.host;
    let myArrayParts = myDomain.split(".");
    if (myArrayParts.length == 3){
        mySubDomain = myArrayParts[0];
    }

    return mySubDomain;

} 
```

在 AJAX 调用中：

```
let mySubDomain = getSubDomain();
if (mySubDomain != ""){
    myURL += "?source=" + mySubDomain + "&end"; //use & instead of ? if URL already has GET parameters
}

jQuery.ajax({
    url: myURL,
    type: "POST",
    xhrFields: {withCredentials: true},
    dataType: "text",
    contentType: "text/xml; charset=\"utf-8\"",
    cache: false,
    headers: "",
    data: myCallJSONStr,
    success: function(myResponse) {.....} 
```

最后，PHP部分：

```
<?php

$myDomain = "example.com";
$mySubdomain = "";

if (isset($_GET["source"])) {
    $mySubdomain = $_GET["source"].".";
}

$myDomainAllowOrigin = "https://".$mySubdomain.$myDomain;
$myAllowOrigin = "Access-Control-Allow-Origin: ".$myDomainAllowOrigin;

//echo $myAllowOrigin;

header($myAllowOrigin);  
header('Access-Control-Allow-Headers: Origin, Content-Type, X-Auth-Token');  
header('Access-Control-Allow-Credentials: true'); 
```

**重要**的是，不要忘记为所有子域设置 cookie，在这种情况下，cookie 的域将是：.example.com（所以在主域前面有一个点）：

```
<?php

    //////////////// GLOBALS /////////////////////////////////

    $gCookieDomain = ".example.com";
    $gCookieValidForDays = 90;

    //////////////// COOKIE FUNTIONS /////////////////////////////////

    function setAPCookie($myCookieName, $myCookieValue, $myHttponly){
        global $gCookieDomain;
        global $gCookieValidForDays;

        $myExpires = time()+60*60*24*$gCookieValidForDays;
        setcookie($myCookieName, $myCookieValue, $myExpires, "/", $gCookieDomain, true, $myHttponly);   

        return $myExpires;
    } 
```

此解决方案允许我从 example.com 上的任何子域调用 api.example.com 上的 API。

注意。对于只有一个调用子域的情况，我更喜欢使用 .htaccess 来设置 CORS 而不是 PHP。这是一个仅用于调用 api.example.com 的 one.example.com 的 .htaccess (linux/apache) 示例：

```
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "https://one.example.com"
    Header set Access-Control-Allow-Headers "Origin, Content-Type, X-Auth-Token"
    Header set Access-Control-Allow-Credentials "true"
</IfModule> 
```

并将这个 .htaccess 放在 api.example.com 的根目录中。

# c# - 按日期时间值对列表框项进行排序

> ID：14221728
> 
> 赞同：2
> 
> 时间：2013-01-08T18:33:07.157
> 
> 标签：c#, date, sorting, datetime, listbox

有没有简单的方法按`DateTime`值对列表框项目进行排序？在我的`listbox1`我有这样格式化的项目：`"2013.01.08 19:29:52"`所以它只是`someDateTimeValue.ToString()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:42:17.140

如果您有 2 个 ListBoxes，您可以执行以下操作

```
ArrayList arList = new ArrayList(); 
foreach (object obj in listBox1.Items)
{
    arList.Add(obj);
} 
arList.Sort(); 
listBox2.Items.Clear();
foreach(object obj in arList)
{
    listBox2.Items.Add(obj); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:39:46.237

试试这个

```
List<ListItem> myList = new List<ListItem>(ListBox1.Items.Cast<ListItem>());        
myList = myList.OrderByDescending(li => li.Value).ToList<ListItem>();
ListBox1.Items.Clear();
ListBox1.Items.AddRange(myList.ToArray<ListItem>()); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-08T18:56:21.887

尝试对日期列表进行排序，然后将其放入列表框中。

```
dateList.Sort();
var items = new SelectList(dateList); 
```

# ruby-on-rails - Rails分页：如何获取第二页的第一个元素

> ID：14221740
> 
> 赞同：2
> 
> 时间：2013-01-08T18:33:50.437
> 
> 标签：ruby-on-rails, ruby, pagination

我在 Rails 中使用 will_paginate 进行分页。我有一张装有 99 件物品的桌子。当我尝试使用以下命令获取第二页的第一个元素时：

```
Item.paginate(page: 2).first 
```

Rails 返回：

```
#<Item id: 2, ...> 
```

但是，正确的答案应该是：

```
#<Item id: 32, ...> 
```

有趣的是，在不使用“first”方法的情况下索引结果数组中的第一个元素给出了正确的答案，所以：

```
Item.paginate(page: 2)[0] 
```

返回：

```
#<Item id: 32, ...> 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T18:44:35.143

[will_paginate 和 .first 方法中似乎存在错误](https://github.com/mislav/will_paginate/issues/223)。我怀疑您可以通过以下方式解决它：

```
Item.paginate(page: 2).all.first 
```

这与您的解决方法类似。

# sql-server - 有没有办法知道 SQL Server 2008 R2 中实际使用了哪些对象

> ID：14221742
> 
> 赞同：1
> 
> 时间：2013-01-08T18:33:55.190
> 
> 标签：sql-server, sql-server-2008, stored-procedures

我在这里[找到了在 SQL Server 2008 中查找数据库对象用法的快速方法？](https://stackoverflow.com/questions/7341127/quick-way-to-find-usages-of-db-objects-in-sql-server-2008)有几种方法可以检查 SQL Server 2008 R2 数据库中对象的依赖关系。

但是有没有办法知道一个对象是否真的被使用了？换句话说，我看到一个存储过程使用了某个表，但是我如何知道该存储过程是否曾经被执行过，如果是，由谁执行？

我之所以问，是因为我来到一个有 A BUNCH 存储过程和表的地方，没有人知道正在使用什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T18:50:29.493

对于表，您可以使用[索引统计信息](http://www.sqlskills.com/blogs/kimberly/spring-cleaning-your-indexes-part-i/)：

```
SELECT  getdate() AS RunTime 
,       DB_NAME(i.database_id) as DatabaseName
,       OBJECT_NAME(i.object_id, i.database_id) as ObjectName
,       *
FROM    sys.dm_db_index_usage_stats AS i
WHERE   object_id > 100 
```

这适用于所有表，因为 SQL Server 甚至为堆保留索引统计信息。

存储过程更难。您可以对它们进行检测，例如：

```
create table SPCalls (name sysname);
go
alter procedure dbo.YourSP
as
insert  SPCalls ('YourSP');
.... 
```

# php - 正则表达式替换路径中的文件夹

> ID：14221743
> 
> 赞同：1
> 
> 时间：2013-01-08T18:34:02.103
> 
> 标签：php, regex, replace

让我们假设这条路径：

```
"...../site/configurationEN/database"
"....../site/configurationDE/database"
"....../site/configurationFR/database"
...
"....../site/configurationXX/database" 
```

其中 XX 可以为许多国家/地区提供许多值。

如何使用正则表达式替换和 PHP 从路径中删除 XX 字符？我需要一个可以更改上述任何字符串的表达式：

```
"....../site/configuration/database" 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:38:53.817

试试看：

```
<?php
$path = "site/configurationDE/database";
$newPath = preg_replace('#^(.*site/configuration)[A-Z]{2}#', '$1', $path);
?> 
```

# vba - VBA，COUNTIF，根据单元格颜色排除

> ID：14221747
> 
> 赞同：0
> 
> 时间：2013-01-08T18:34:15.467
> 
> 标签：vba

我正在尝试计算 C 列中“M”和“F”的数量，但排除 D 列（同一行）中单元格内部颜色为红色的情况。该脚本正在计算每个“M”和“F”的案例数量，但不排除单元格 D 为红色的任何案例。有什么想法吗？

```
Private Sub Workbook_Open()
Dim F As Long
Dim M As Long
Dim colorD As Range
Dim Cell As Range

F = Range("C" & Rows.count).End(xlUp).Row
M = Range("C" & Rows.count).End(xlUp).Row
Set colorD = Range("D" & Rows.count).End(xlUp)

If F < 2 Then F = 2
If M < 2 Then M = 2

For Each Cell In colorD
   If Cell.Interior.Color <> 3 Then
   F = Application.WorksheetFunction.CountIf(Range("C2:C" & F), "F")
   M = Application.WorksheetFunction.CountIf(Range("C2:C" & M), "M")
   End If
Next Cell

MsgBox ("Females=" & F & "," & "Males=" & M)

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:38:45.983

您能否对此进行调试打印，以查看单元格 colourIndex 是否真的`3`

```
Debug.Print Cell.Interior.ColorIndex 
```

因为，

`Cell.Interior.Color`需要 a`RGB`来匹配...你只需要`.ColorIndex`匹配 ;) 非常准确地说，当支持有限数量的颜色`Color`时支持更多。`ColorIndex`但在您的情况下，最有可能`3`不是`red`您要匹配的颜色。

所以它必须是，

```
IF Cell.Interior.ColorIndex <> 3 then

//count count
End if 
```

我试过你的潜艇：有几个问题。我在代码旁边放了注释。请尝试以下方法。

1.  请使用`Explicit reference for Ranges e.g.`Sheets(1).Range `it helps alot. So changed the way`Last Used Row` 被发现。
2.  您没有设置`colorD`它，它只有 2 行。于是改成， `Set colorD = Sheets(2).Range("D2").Resize(endRow)`
3.  `If`正在做相反的事情`<>`，所以将其更改为 `If Cell.Interior.ColorIndex = 3 Then`
4.  一个错字将其更改为 `M = M - redM`

修改后的代码：

```
Option Explicit

Sub countbyColourAndGender()
    Dim endRow As Long
    Dim redF As Long
    Dim redM As Long
    Dim F As Long
    Dim M As Long
    Dim colorD As Range
    Dim Cell As Range
    Dim cellVal As String

    'Find the ending row --HERE: it gave an error, so changed it..
    endRow = Sheets(2).Cells(Sheets(2).Rows.Count, "C").End(xlUp).Row
    'Ensure ending row is at least Row 2
    If endRow < 2 Then
        endRow = 2
    End If

    'Count all the Females
    F = Application.WorksheetFunction.CountIf(Sheets(2).Range("C2:C" & endRow), "F")
    'Count all the Males
    M = Application.WorksheetFunction.CountIf(Sheets(2).Range("C2:C" & endRow), "M")

    'Set the applicable Column D range -- HERE: changed using `Resize`
    Set colorD = Sheets(2).Range("D2").Resize(endRow)
    'Loop through each cell in Column D
    For Each Cell In colorD
        If Cell.Interior.ColorIndex = 3 Then '-- HERE: not <> but =
            'Red Cell found, get the cell value from Column C
            cellVal = LCase(Cell.Offset(-1, -1).Value)
            If cellVal = "f" Then redF = redF + 1 'Increment count of red Females
            If cellVal = "m" Then redM = redM + 1 'Increment count of red Males
        End If
    Next Cell

    'Subtract any red Females
    F = F - redF
    'Subtract any red Males : HERE it has to subsctract not equal..
    M = M - redM

    'Alert User with counts
    MsgBox ("Females=" & F & "," & "Males=" & M)
End Sub 
```

输出：

![在此处输入图像描述](../Images/9801760a0ee385bcc7db2ed80ddd296d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:00:56.850

我认为问题在于您正在重新评估颜色**不是**红色的每个单元格的计数，而不是减少它们。

```
For Each Cell In colorD
    If Cell.Interior.Color <> 3 Then
        'Here you are re-evaluating F, not incrementing it.
        F = Application.WorksheetFunction.CountIf(Range("C2:C" & F), "F")
        'And the same for M.
        M = Application.WorksheetFunction.CountIf(Range("C2:C" & M), "M")
    End If
Next Cell 
```

我只会评估一次您的计数，然后分别跟踪红细胞（根据需要从计数中减少它们）：

```
Private Sub Workbook_Open()
    Dim endRow As Long
    Dim redF As Long
    Dim redM As Long
    Dim F As Long
    Dim M As Long
    Dim colorD As Range
    Dim Cell As Range
    Dim cellVal As String

    'Find the ending row
    endRow = Range("C" & Rows.Count).End(xlUp).endRow
    'Ensure ending row is at least Row 2
    If endRow < 2 Then
        endRow = 2
    End If

    'Count all the Females
    F = Application.WorksheetFunction.CountIf(Range("C2:C" & endRow), "F")
    'Count all the Males
    M = Application.WorksheetFunction.CountIf(Range("C2:C" & endRow), "M")

    'Set the applicable Column D range
    Set colorD = Range("D2", Range("D" & Rows.Count).End(xlUp))
    'Loop through each cell in Column D
    For Each Cell In colorD
        If Cell.Interior.ColorIndex = 3 Then
            'Red Cell found, get the cell value from Column C
            cellVal = LCase(Cell.Offset(-1, 0).Value)
            If cellVal = "f" Then redF = redF + 1 'Increment count of red Females
            If cellVal = "m" Then redM = redM + 1 'Increment count of red Males
        End If
    Next Cell

    'Subtract any red Females
    F = F - redF
    'Subtract any red Males
    M = M = redM

    'Alert User with counts
    MsgBox ("Females=" & F & "," & "Males=" & M)
End Sub 
```

# iis-7 - 远程虚拟目录中的 web.config

> ID：14221748
> 
> 赞同：0
> 
> 时间：2013-01-08T18:34:16.237
> 
> 标签：iis-7, web-config, httphandler

基于这个 SO 答案：[https](https://stackoverflow.com/a/2066040/458354) ://stackoverflow.com/a/2066040/458354我有一个 web.config，它为子目录中的所有文件定义了一个自定义 HttpHandler，放在我的静态文件子目录中。如果该目录（即使配置为虚拟目录）与 IIS 位于同一台服务器上，这将非常有效。但是，如果虚拟目录指向另一台服务器上的共享文件夹，我在访问静态资源时收到此错误：*“加载配置文件时出错：文件监控的文件名无效：'\\remoteserver\remotedir\web.配置'。”*

我什至已将远程目录的权限从网络服务器授予 IIS_IUSR。我怀疑问题是配置路径是共享的。关于允许 IIS 读取虚拟目录 web.config 的方法有什么想法吗？

或者，有没有办法在站点的普通 web.config 中配置处理程序路径以覆盖整个子目录？

有问题的配置行：

```
<add name="MyRequestHandler" type="MyApp.StaticFileRequestHandler,
MyApp" path="*" resourceType="Either" verb="GET,HEAD"
requireAccess="Read"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:40:43.597

[当自定义 IHttpHandler 尝试从虚拟目录读取时，](https://stackoverflow.com/q/10354748/458354)请参阅401 Unauthorized 。将 ApplicationPool 标识设置为将用于连接到远程虚拟目录的相同标识（例如，可以是服务帐户）。

此外，关于将 Handler 分配给子目录的替代方法，我最终将应用程序设计更改为使用 asp.net 路由（不是 MVC）并让 url 请求通过标识符指定所需的静态文件（可能并不总是是可取的，但在我们的应用程序领域的其他地方已经是一种现有的做法）。这消除了虚拟目录中对子 web.config 的需要，因为可以通过编程方式分配处理程序：

```
public static void RegisterRoutes(RouteCollection routes)
{
    // fileId must be all digits, with at least one digit
    var routeConstraints = new RouteValueDictionary { { "fileId", @"\d{1,}" } };
    var getProtectedFileRoute = new Route("resources/files/{fileId}", new MyFileRequestRouteHandler())
    {
        Constraints = routeConstraints
    };
    routes.Add(getProtectedFileRoute);
} 
```

标识符不再是通配符，而是`RouteData`参数。（不确定如果标识符是带有“点”和扩展名的文件名，这是否可行......）。

# installation - 如何使用 inno setup 安装字体

> ID：14221751
> 
> 赞同：0
> 
> 时间：2013-01-08T18:34:27.313
> 
> 标签：installation, inno-setup, pascal

我想预先安装字体以进行 inno 设置。我已经使用字体 Aller Light 制作了一个自定义的 inno 设置安装程序。现在，当我第一次在客户端机器上运行我的 inno 设置时。由于字体，设计不正确。但是当再次运行安装程序时，设计就正确了。

为了更清楚起见，此字体用于我的安装程序的设计中，而不是在使用此安装程序部署的应用程序中。在安装程序可执行文件打开欢迎页面之前，我只需要一种在客户端机器上安装字体的方法，这样我为自定义设置所做的设计是正确的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T09:53:32.153

这是一个坏主意; 在“真正的”安装阶段开始之前修改用户的系​​统是不好的做法。您应该强烈考虑重新设计以使用系统标准字体或以所需样式使用文本的位图图像，而不是尝试安装字体。

Inno 有一种机制来安装字体作为安装本身的一部分，这对于您的应用程序来说已经足够了（参见[FontInstall](http://www.jrsoftware.org/ishelp/topic_filessection.htm#FontInstall)）。

如果你*真的*想走上糟糕的做法，你可能会得到一些东西来处理一些`InitializeSetup`调用`ExtractTemporaryFile`和[AddFontResource WinAPI](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183326.aspx)的代码。（也不要忘记发送广播消息。）

# algorithm - 优化日历块算法

> ID：14221752
> 
> 赞同：2
> 
> 时间：2013-01-08T18:34:30.857
> 
> 标签：algorithm, optimization

所以这是一个棘手的问题，它有所简化，但基于一个关于内存优化的现实世界问题（它不是家庭作业）

假设您是两个日期之间的时间段（例如 2013-01-01 到 2013-01-31）。现在你得到了一堆日期条目，每个条目都包含一个日期和一个颜色。每个日期最多有一个条目，但所有日期可能都没有条目。

例如：

2013-01-01 黄色

2013-01-02 蓝色

2013-01-03 红

2013-01-05 黄色

![在此处输入图像描述](../Images/261669eb56428d159aa72a0ba901a9c2.png)

等等

现在假设我们有一个包含开始日期和结束日期、颜色的跨度。我们还有一个可选的星期过滤器，如果声明，它可以包含一周中的一天或几天。在这些情况下，跨度仅在那些日子里“活跃”。

例如，在下面的示例中，我们可能有：

跨度#1：2013-01-01 - 2013-01-06 蓝色

跨度 #2：2013-01-13 - 2013-01-27 红色星期一

跨度#3：2013-01-08 - 2013-01-26 CYAN 周三周二周六周日

等等

问题是要提出一个可行的算法（从性能、内存的角度来看，并且没有量化计算机 :)，它提出了最少的跨度来描述给定的时期（没有保证的最小数量但是，即使那会很好:)。跨度可能重叠。

暴力破解看起来很讨厌，但应该有一个优雅的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:21:31.753

该问题与使用[卡诺图的](http://en.wikipedia.org/wiki/Karnaugh_map)[电路最小化](http://en.wikipedia.org/wiki/Circuit_minimization)有一些相似之处。众所周知，这个问题是 NP 难的，因此像[Quine-McCluskey 算法这样的算法](http://en.wikipedia.org/wiki/Quine%E2%80%93McCluskey_algorithm)这样的算法具有指数运行时间。

因此，我的意图告诉我，您的问题没有有效的算法。还有很多其他的覆盖问题，比如[顶点覆盖](http://en.wikipedia.org/wiki/Vertex_cover)和[集合覆盖](http://en.wikipedia.org/wiki/Set_cover_problem)，它们也是非常困难的问题。我会尝试证明设置封面可以减少到您的问题，使您的问题也变得 NP-hard。

# .htaccess - htaccess url重写中的GET参数

> ID：14221754
> 
> 赞同：0
> 
> 时间：2013-01-08T18:34:41.880
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我正在用 htaccess 重写一些 url。我有这个：

```
RewriteRule ^mesas$ http://www.myweb.net/piezas.php?pos=1 [L]
RewriteRule ^sillas$ http://www.myweb.net/piezas.php?pos=2 [L]
RewriteRule ^taburetes$ http://www.myweb.net/piezas.php?pos=3 [L] 
```

这是有效的。如果我写网址[http://www.myweb.net/mesas](http://www.myweb.net/mesas) 我得到[http://www.myweb.net/piezas.php?pos=1](http://www.myweb.net/piezas.php?pos=1)。

现在我想添加其他参数。示例：我有这个[http://www.myweb.net/mesas?pag=10](http://www.myweb.net/mesas?pag=10) 我想要这个：[http ://www.myweb.net/piezas.php?pos=1&pag=10](http://www.myweb.net/piezas.php?pos=1&pag=10)

我正在尝试：

```
RewriteRule ^mesas?(.*)$ http://www.myweb.net/piezas.php?pos=1&$1 [L] 
```

和

```
RewriteRule ^mesas$?(.*) http://www.myweb.net/piezas.php?pos=1&$1 [L] 
```

但它不起作用。我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:44:52.810

尝试添加标志**QSA**，如下所示：

```
RewriteRule ^mesas$ http://www.myweb.net/piezas.php?pos=1 [L,QSA]
RewriteRule ^sillas$ http://www.myweb.net/piezas.php?pos=2 [L,QSA]
RewriteRule ^taburetes$ http://www.myweb.net/piezas.php?pos=3 [L,QSA] 
```

它将传入的查询字符串*附加*到现有的查询字符串。

# php - 在同一页面上两次将锚链接应用于 WordPress 分页

> ID：14221756
> 
> 赞同：0
> 
> 时间：2013-01-08T18:34:51.787
> 
> 标签：php, jquery, wordpress, pagination

对于我的[投资组合网站](http://mtthwbsh.com)，我想将锚链接添加到“工作”和“博客”部分，以便在单击下一页时转到相应的部分。我注意到从这个问题中使用 jQuery 是可能的：[WordPress 分页 - 添加锚链接](https://stackoverflow.com/questions/13362026/wordpress-pagination-adding-an-anchor-link)，但我不确定这将如何与同一页面上的两个循环一起工作？

我当前的循环看起来像这样，只是替换每个部分的类别：

```
 <?php $paged = (get_query_var('page')) ? get_query_var('page') : 1;
 $args=array('category_name'=>'portfolio','posts_per_page'=>4,'paged'=>$paged);
 query_posts($args);
 if (have_posts()) : while (have_posts()) : the_post(); ?>  

    <div class="blog-post">
    <div class="thumbnail">

    <a href="<?php the_permalink(); ?>">
    <?php
        if ( has_post_thumbnail() ) {
        the_post_thumbnail();
        }   
    ?>  
    </a>

    <a class="details" href="<?php the_permalink(); ?>">
    <h6><?php echo get_the_excerpt(); ?></h6>
    </a><!-- DETAILS -->
    </div><!-- THUMBNAIL -->        

    <div class="aside">

    <h4><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h4>

    </div><!-- ASIDE -->
    </div><!-- BLOG - POST -->

<?php endwhile; ?>
<div class="navigation">
<h3><?php posts_nav_link('&#8734;','&#171; Newer Posts','Older Posts &#187;'); ?></h3>
</div><!-- PAGED-NAVIGATION -->
<?php wp_reset_query(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:04:53.470

啊，我明白你的意思；实际上，最好将 wordpresses $args 用于 paginate_links() 函数。你可以在这里看到它：http: [//codex.wordpress.org/Function_Reference/paginate_links](http://codex.wordpress.org/Function_Reference/paginate_links)。

您要更改的是`'format'=>'?page=%#%',`（即页码）并将其更改为类似`'format' => '?page=%#%#work',`和`'format' => '?page=%#%#blog',`

所以你可以这样做： `echo paginate_links(array('format' => '?page=%#%#work'));`这应该会使点击链接跳回到工作锚点。

问题是，如果用户没有准确滚动到锚链接的位置，您仍然会有页面跳转。您最好实现一个 Ajax 解决方案，这样根本不需要重新加载页面。这是一个很好的入门教程：[http ://wp.tutsplus.com/articles/getting-started-with-ajax-wordpress-pagination/](http://wp.tutsplus.com/articles/getting-started-with-ajax-wordpress-pagination/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T23:21:51.897

在哪里你有你的第一个`<div class="navigation">` 添加一个`id="work"`和第二个`id="blog"` 所以你会有

```
<div class="navigation" id="work">
</div> 
<div class="navigation" id="blog"> 
</div> 
```

在您页面的某个位置。

然后，您需要从您提到的问题中对 jquery 进行小修改，以制作正确的锚链接：

```
<script type="text/javascript">
$(document).ready(function() {
    $('.pagenavi a').each(function(i,a){
        $(a).attr('href',$(a).attr('href')+'#'+a.parents('.navigation').attr('id'));
        //$(a).attr('href',$(a).attr('href')+'#blog') <-- instead of this 
    });
});
</script> 
```

parents('.navigation').attr('id') 告诉 jquery 向上移动 dom 直到找到导航标签，然后抓住它的 ID 用作锚文本的文本

如果您已经拥有 ids 博客并在页面上工作，则可以使用 rel="work" 代替，然后在 jquery 中使用 attr('rel')

# opengl - Haskell OpenGL：透明度不起作用

> ID：14221761
> 
> 赞同：4
> 
> 时间：2013-01-08T18:35:09.743
> 
> 标签：opengl, haskell, transparency, rgba

我正在用 Haskell 制作一个非常简单的 OpenGL 应用程序，现在只是让一些多边形出现。我的主要功能如下所示：

```
main :: IO ()
main = do
    (pname, _) <- getArgsAndInitialize
    createWindow $ "Haskellisa"
    initialDisplayMode $= [RGBAMode, WithAlphaComponent]
    displayCallback $= display
    mainLoop 
```

我的“显示”函数绘制一些三角形并使用 Color4 设置颜色，该颜色随机生成`GLfloats`介于 0.0 和 1.0 之间的 RGBA 值。一切正常，但没有透明度，重叠的多边形不会混合它们的颜色。

我正在使用此功能绘制三角形：

```
drawTri :: Tri Float -> Color4 GLfloat -> IO ()
drawTri ((x1,y1), (x2,y2), (x3,y3)) col = do
    renderPrimitive Triangles $ do
        color col
        vertex $ (Vertex3 (x1 :: GLfloat) (y1 :: GLfloat) 0)
        vertex $ (Vertex3 (x2 :: GLfloat) (y2 :: GLfloat) 0)
        vertex $ (Vertex3 (x3 :: GLfloat) (y3 :: GLfloat) 0) 
```

为什么我的透明度在这里不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T18:43:48.203

*我假设`[RGBAMode, WithAlphaComponent]`只是设置位深度*

我不确定它是如何在 Haskell 中完成的，但你必须调用`glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);`and `glEnable( GL_BLEND );`。您还必须将透明的面孔重新绘制到前面。

更多信息在这里：[http ://www.opengl.org/wiki/Transparency_Sorting](http://www.opengl.org/wiki/Transparency_Sorting)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-13T20:49:10.373

只需添加：

```
blend $= Enabled >>
blendFunc $= (SrcAlpha, OneMinusSrcAlpha) >> 
```

到您的显示功能。

它对我有用！:)

# c++ - std::random_shuffle 每次产生相同的结果

> ID：14221763
> 
> 赞同：14
> 
> 时间：2013-01-08T18:35:19.087
> 
> 标签：c++

> **可能重复：**
> [如何确保 std::random_shuffle 总是产生不同的结果？](https://stackoverflow.com/questions/6931951/how-to-make-sure-that-stdrandom-shuffle-always-produces-a-different-result)

我有一个数组，我希望对其进行洗牌，我使用：

```
answerPositionArray[0] = 100;
answerPositionArray[1] = 400;
answerPositionArray[2] = 800;
std::random_shuffle(answerPositionArray, answerPositionArray + 2); 
```

但是每次我运行我的程序时，都会出现相同的随机播放，400、800、100。有没有办法让随机播放每次都不同？例如。第一次 100、800、400 然后 800、400、100 等。

谢谢

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-08T18:46:25.350

`std::random_shuffle(b,e)`使用实现定义的随机源，因此无法进行便携控制。通常，实现使用`std::rand()`等使用`std::srand()`来播种 rng 通常有效。

```
// not portable, depends on implementation defined source of randomness in random_shuffle
std::srand(some_seed);
std::random_shuffle(answerPositionArray, answerPositionArray+size); 
```

有一个重载`std::random_shuffle()`将随机数生成器作为第三个参数。您可以使用此表单来定义随机性的来源，以便您可以播种它。

```
struct RNG {
    int operator() (int n) {
        return std::rand() / (1.0 + RAND_MAX) * n;
    }
};

std::srand(seed);
std::random_shuffle(answerPositionArray, answerPositionArray+size, RNG()); 
```

C++11 引入了另一种`std::shuffle`采用 UniformRandomNumberGenerator 的算法，允许您使用 C++11`<random>`生成器：

```
std::random_device r;
std::seed_seq seed{r(), r(), r(), r(), r(), r(), r(), r()};
std::mt19937 eng(seed);

std::shuffle(std::begin(answerPositionArray), std::end(answerPositionArray), eng); 
```

* * *

您的评论表明问题在于您没有改组整个数组，您只是改组前两个元素并且没有触及最后一个元素。

这是如何使用幻数的一个很好的演示，如您的代码中所示：

```
std::random_shuffle(answerPositionArray, answerPositionArray + 2);
                                                               ^
                                                               |
                                                 magic number -- 
```

可能容易出错。相反，您应该尝试编写独立于这些值工作的代码。

```
// trick for getting an array size
template<typename T, int N> int array_size(T (&)[N]) { return N; }

int answerPositionArray[] = {100, 400, 800};

std::random_shuffle(answerPositionArray,
                    answerPositionArray + array_size(answerPositionArray)); 
```

或者，一旦您可以使用 C++11，您就可以在数组上使用`std::begin`和：`std::end`

```
std::random_shuffle(std::begin(answerPositionArray), std::end(answerPositionArray)); 
```

或者您可以使用上述数组大小技巧在 C++03 中自己实现`begin`和运行：`end`

```
template<typename T, int N> T *begin(T (&a)[N]) { return a; }
template<typename T, int N> T   *end(T (&a)[N]) { return a + N; } 
```

这些方法允许您避免使用幻数来表示数组大小，因此当您编写或修改代码时，您不太可能错误地使用错误的值。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-01-08T18:43:43.430

C++ 随机数并不是真正随机的——它们是从称为种子的初始值生成的。如果你不设置种子，它总是一样的，所以生成的序列不会改变。`std::random_shuffle`取决于随机数的生成，因此它也会以这种方式运行。

那么如何设置种子呢？采用：

```
srand(time(0)); 
```

在使用随机数调用函数之前。它将以秒为单位将种子设置为当前时间。不要忘记添加适当的头文件。

# asp.net - ASP.NET：传递给 ascx 的属性下降到顶级控件但不是嵌套控件

> ID：14221764
> 
> 赞同：1
> 
> 时间：2013-01-08T18:35:19.260
> 
> 标签：asp.net, controls, ascx

在我的 ASP.NET 项目 (VB.NET) 中，我有一个名为 DocumentDisplay 的自编码用户控件，我使用 TargetWebPage 属性调用它：

```
<uc1:DocumentDisplay ID="DocumentDisplay" runat="server" TargetWebPage="EntityDocumentUpload"/> 
```

用户控件的代码隐藏实现了公共属性 TargetWebPage，在调试器中我可以看到它被正确设置。此外，在用户控件 (ascx) 中定义了一个 yyySecureButton（第 9 行），其中也定义了这个公共属性，并且也正在设置它。问题是我需要属性一直下降到第 25 行定义的 yyySecureCommandField（在 DomainGridView 控件内）；此属性也在该控件的代码隐藏中，但尚未设置。

我可以从标记中将 TargetWebPage 属性传递给 yyySecureCommandField 吗？如果没有，怎么做最好？

下面的代码与我正在使用的代码相同，只是标识我的客户端的字符串已更改为 vvv、xxx、yyy 等。

非常感谢您的任何回复。

```
<%@ Control Language="vb" AutoEventWireup="false" CodeBehind="DocumentDisplay.ascx.vb" Inherits="zzz.DocumentDisplay" %>
<xxx:ErrorSection ID="ErrorSection" runat="server"/>
<div class="FieldGroup">
    <fieldset>
        <legend>Documents</legend>
        <xxx:InputField runat="server" ID="InputFieldDocumentType" FieldName="DocumentType" CssClass="DocumentField" SuppressRequiredIndicator="True" />
        <xxx:InputField runat="server" ID="InputFieldDocumentName" FieldName="DocumentName" CssClass="DocumentField" SuppressRequiredIndicator="True" />
        <div class="DocumentField"><label>Upload</label><input type="File" id="DocumentUpload" runat="server" /></div>
        <div class="TableSectionCommandBar"><vvv:yyySecureButton id="ButtonUpload" runat="server" SecurityMode="Action" Text="Add" CssClass="StandardButton"/></div>
        <div class="Spacer" />
        <div class="TableSection">
            <xxx:DomainGridView ID="GridViewDocuments" runat="server" AutoGenerateColumns="False" CssClass="StandardTable" DomainObjectName="zzz.Domain.Document,yyyLib" DataKeyNames="DocumentId" AlwaysRequiresDatabind="True" AllowSorting="True">
                <Columns>
                    <xxx:FieldDefinitionField FieldName="DocumentType" ShowToolTip="True" SortExpression="DocumentType" />
                    <xxx:FieldDefinitionField FieldName="DocumentName" ShowToolTip="True" SortExpression="DocumentName" />
                    <xxx:FieldDefinitionField FieldName="DocumentDate" IsReadOnly="True" ShowToolTip="True" SortExpression="DocumentDate" />
                    <asp:TemplateField HeaderText="Doc" ItemStyle-HorizontalAlign="Center">
                        <ItemTemplate>
                            <asp:Hyperlink ID="LinkViewContentDocuments" runat="server" Visible="<%#Not String.IsNullOrEmpty(DirectCast(Container.DataItem, DocumentInformation).DocumentFileName)%>" NavigateUrl="<%#ResolveUrl(String.Format(CultureInfo.InvariantCulture, ApplicationUrls.ViewEntityDocuments, DirectCast(Container.DataItem, DocumentInformation).DocumentId))%>" ImageUrl="<%#ResolveUrl(ApplicationUrls.PaperclipImage)%>" ToolTip="<%#DirectCast(Container.DataItem, DocumentInformation).DocumentFileName%>" Text="<%#DirectCast(Container.DataItem, DocumentInformation).DocumentFileName%>" />
                        </ItemTemplate>
                        <EditItemTemplate>
                            <input type="File" id="UpdateDocumentUpload" runat="server" />
                        </EditItemTemplate>
                    </asp:TemplateField>
                    <vvv:yyySecureCommandField SecurityMode="Action" EditText="Edit" UpdateText="Update" CancelText="Cancel" DeleteText="Delete" ShowCancelButton="True" ShowEditButton="True" ShowDeleteButton="True" />
                </Columns>
                <EmptyDataTemplate>
                    <asp:Label ID="LabelNoEntityResults" runat="server" Text="There are currently no documents to display."></asp:Label>
                </EmptyDataTemplate>
                <RowStyle CssClass="ItemRow" />
                <HeaderStyle CssClass="HeaderRow" />
                <AlternatingRowStyle CssClass="AlternatingItemRow" />
                <PagerStyle CssClass="PagingRow" />
            </xxx:DomainGridView>
        </div>
    </fieldset>
</div> 
```

# javascript - 克隆选择 更改第一个选择值

> ID：14221769
> 
> 赞同：0
> 
> 时间：2013-01-08T18:35:32.027
> 
> 标签：javascript, jquery, ajax

这是我用于克隆选择选项的代码：

```
var clone = $('#saleTable tbody>tr#saleTR:last').clone(true);
            clone.find("input").val('');
            clone.insertAfter('#saleTable tbody>tr#saleTR:last'); 
```

这是我的 HTML：

```
<tr id="saleTR">
  <td>
    <input name="qty[]" type="text" size="5" />
  </td>
  <td> 
    <select name="description[]" onchange="showPrice(this.value)">
      <option value="null">select Item sold</option>
      <?php getSaleItem(); ?>
    </select>
  </td>
  <td>
    <span id="price"></span>
  </td>
  <td>
  </td>
</tr> 
```

我正在使用 ajax 来显示价格：

```
function showPrice(str){
    if (str.length==0){ 
        document.getElementById("price").innerHTML="";
        return;
    }
    if (window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }else{// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function(){
        if (xmlhttp.readyState==4 && xmlhttp.status==200){
            document.getElementById("price").innerHTML=xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET","getPrice.php?q="+str,true);
    xmlhttp.send();

} 
```

克隆`<tr>`很好，但是当最后一个克隆的选择选项被选中或更改时，第一个价格是不断变化的价格而不是相应的价格，即第一个原始价格不断变化，而不是与选择选项变化一致的相应价格.

我想要一个特定的选择选项来更新相应的价格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:57:45.267

在您的 html 中，您可以将此对象传递给您的 ajax 函数，然后您可以使用此指针来选择您对应的价格范围。

这可能对你有用

HTML

```
<tr id="saleTR">
    <td>
        <input name="qty[]" type="text" size="5" />
    </td>
    <td>
        <select name="description[]" onchange="showPrice(this)">
            <option value="null">select Item sold</option>
            <?php getSaleItem(); ?>
        </select>
    </td>
    <td><span id="price"></span>
    </td>
    <td></td>
</tr> 
```

JAVASCRIPT

```
function showPrice(selectBox) {
    var str = selectBox.value;
    var corSpan=$(selectBox).closest('#saleTR').find('#price');
    if (str.length == 0) {
        corSpan.html() = "";
        return;
    }
    if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    } else { // code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange = function () {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            corSpan.html(xmlhttp.responseText);
        }
    }
    xmlhttp.open("GET", "getPrice.php?q=" + str, true);
    xmlhttp.send();

} 
```

见类似的例子[http://jsfiddle.net/Yamw6/](http://jsfiddle.net/Yamw6/1/)

# javascript - 检测屏幕分辨率然后比较

> ID：14221773
> 
> 赞同：0
> 
> 时间：2013-01-08T18:35:54.970
> 
> 标签：javascript, screen-resolution

我的一页 css 表有问题，所以一直在考虑检测屏幕分辨率是否等于或小于 800 像素宽度，这将使我的 css 代码为

```
<style>
body {width:1004px;}
</style> 
```

但如果它大于 800 像素宽度，它会使我的 css 代码是

```
<style>
body {width:100%;}
</style> 
```

所以任何人都知道 js 代码，代码做到了！我只关心宽度检测，也不需要检测高度。我已经搜索了很多执行此操作的 js 代码，但无法用于执行将这些 css 代码中的任何一个传递到页面中的确切功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T18:42:32.300

您可以使用[CSS 媒体查询](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)

```
body {
  width:100%;
}
@media all and (max-width: 800px) {
  body {
    width:1004px;
  }
} 
```

# sql - 在 Postgresql 中，对两列的组合强制唯一

> ID：14221775
> 
> 赞同：277
> 
> 时间：2013-01-08T18:36:14.670
> 
> 标签：sql, postgresql, unique

我想在 PostgreSQL 中设置一个表，这样两列必须是唯一的。任何一个值都可以有多个值，只要没有两个共享两者。

例如：

```
CREATE TABLE someTable (
    id int PRIMARY KEY AUTOINCREMENT,
    col1 int NOT NULL,
    col2 int NOT NULL
) 
```

所以，`col1`并且`col2`可以重复，但不能同时重复。所以，这将是允许的（不包括 id）

```
1 1
1 2
2 1
2 2 
```

但不是这个：

```
1 1
1 2
1 1 -- would reject this insert for violating constraints 
```

* * *

## 回答 #1

> 赞同：339
> 
> 时间：2013-01-08T18:38:46.027

```
CREATE TABLE someTable (
    id serial PRIMARY KEY,
    col1 int NOT NULL,
    col2 int NOT NULL,
    UNIQUE (col1, col2)
) 
```

`autoincrement`不是postgresql。你想要一个`integer primary key generated always as identity`（或者`serial`如果你使用 PG 9 或​​更低版本。 [`serial`在 PG 10 中被软弃用](https://wiki.postgresql.org/wiki/Don%27t_Do_This#Don.27t_use_serial)）。

如果`col1`and`col2`是唯一的并且不能为空，那么它们是一个很好的主键：

```
CREATE TABLE someTable (
    col1 int NOT NULL,
    col2 int NOT NULL,
    PRIMARY KEY (col1, col2)
) 
```

* * *

## 回答 #2

> 赞同：220
> 
> 时间：2013-01-08T18:42:57.620

创建两个数字不能一起重复的唯一约束：

```
ALTER TABLE someTable
ADD UNIQUE (col1, col2) 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-01-08T18:38:39.540

似乎是常规的 UNIQUE CONSTRAINT :)

```
CREATE TABLE example (
a integer,
b integer,
c integer,
UNIQUE (a, c)); 
```

更多[在这里](http://www.postgresql.org/docs/8.2/static/ddl-constraints.html)

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2020-09-04T00:08:39.230

如果像我一样，你来到这里：

*   预先存在的表，
*   您需要向其中添加新列，以及
*   还需要在*新*列和*旧*列上添加新的唯一约束，并且
*   能够撤消这一切（即写下迁移）

这对我有用，利用上述答案之一并扩展它：

```
-- up

ALTER TABLE myoldtable ADD COLUMN newcolumn TEXT;
ALTER TABLE myoldtable ADD CONSTRAINT myoldtable_oldcolumn_newcolumn_key UNIQUE (oldcolumn, newcolumn);

---

ALTER TABLE myoldtable DROP CONSTRAINT myoldtable_oldcolumn_newcolumn_key;
ALTER TABLE myoldtable DROP COLUMN newcolumn;

-- down 
```

# javascript - 如何合并多个案例？

> ID：14221778
> 
> 赞同：11
> 
> 时间：2013-01-08T18:36:31.560
> 
> 标签：javascript, case

> **可能重复：**
> [switch case 中的 JavaScript 或表达式](https://stackoverflow.com/questions/6513585/javascript-or-expression-in-a-switch-case)

```
case 'att':
   window.location.replace('/att-Forms.htm');
   break;
case 'at&t':
   window.location.replace('/att-Forms.htm');    
   break; 
```

有没有办法用某种“或”函数来缩短它？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-08T18:37:04.290

结合案例

```
case 'att':
case 'at&t':
    window.location.replace('/att-Forms.htm');    
    break; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-08T18:37:27.310

只需`case`一个接一个地放置语句：

```
case "att":
case "at&t":
    window.location.replace("/att-Forms.htm");
    break; 
```

# macos - （OS X）网络用户如何工作的详细信息

> ID：14221782
> 
> 赞同：-2
> 
> 时间：2013-01-08T18:36:45.313
> 
> 标签：macos, osx-server, server-administration

在“AskDifferent”似乎无法对此有所了解，所以我想我会在这里尝试。

当我在等待我的新 iMac 到货时，我正在考虑购买 OS X Server，因为它现在只需 20 美元并提供 Open Directory。

我们有两台 MacBook Pro，所以我想让我们所有人都能用我们的 ID 登录到这 3 台 Mac 中的任何一台。

1) 我可以简单地从本地用户切换到网络用户而不会丢失我的主目录内容吗？

2）服务器上镜像的只是我的主目录吗？或者是我安装的所有应用程序等等。例如，如果我在笔记本电脑 A 上安装一个应用程序，它会显示在笔记本电脑 B 上吗？

3) 我假设当我将笔记本电脑放在服务器不可用的地方时，我仍然可以访问我的所有主目录内容。当我回到我的常规网络时，它们会神奇地同步备份吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:20:29.607

我家也有类似的东西。一台 Mac 服务器、两台 iMac 和一台 Macbook Pro。为此，iMac 必须持续运行，或者处于可以通过以太网唤醒的状态（可在系统偏好设置中配置）。要回答您的问题：

1）你可以这样做，但它不是自动的。您需要将内容从本地用户复制到网络用户，本质上是在此过程中创建一个新用户帐户并将所有现有内容复制到该帐户。如果你喜欢冒险，你可以试试这个 ( [http://support.apple.com/kb/HT5338](http://support.apple.com/kb/HT5338) )，这是 Apple 将本地帐户转换为网络帐户的方法，但它不需要在终端中进行一些工作，这对某些人来说有点过分。

2) 最佳设置是服务器是您所有文件的基础，当您登录时它们会简单地下载到您的 Macbook。然后所做的任何更改都会反映在服务器上，因此您登录的任何地方.

3）Mountain Lion 让这一切变得非常简单，并且每次笔记本电脑返回本地网络时都会同步。可以在此处找到最佳方向：（[https://discussions.apple.com/thread/4154950?start=0&tstart=0](https://discussions.apple.com/thread/4154950?start=0&tstart=0)）。

# java - 微软访问数据库到java

> ID：14221796
> 
> 赞同：1
> 
> 时间：2013-01-08T18:37:42.050
> 
> 标签：java, ms-access, jdbc-odbc

我正在考虑将 Microsoft 访问数据库用于 Java 项目。我的问题是，如果我使用 Microsoft 访问数据库并且我完成了我的项目并将其作为 jar 文件在任何计算机/操作系统上运行，是否任何计算机/操作系统都需要在其上安装 Microsoft 访问，特别是如果数据库需要放在 java 程序上的 GUI 上，程序的管理员可以添加和删除条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:52:07.157

您必须在访问数据库的任何机器上安装 access odbc 驱动程序。我认为您可以通过安装 Access 运行时的东西而不安装所有 Access 来做到这一点。请记住，这种数据访问是文件级别的，因此您的性能会很差。我建议你使用一个真正的数据库（postgres、mysql、sql server、oracle）或者一个轻量级的数据库，比如[SQL Server express](http://www.microsoft.com/sqlserver/en/us/editions/2012-editions/express.aspx)，然后使用 odbc-jdbc 桥或者最好是原生 jdbc 驱动程序访问该数据库。使用本机 jdbc 驱动程序可以让您在非 Windows 环境中运行您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:58:54.790

[您可以在每个 Microsoft Windows 系统上通过JDBC-ODBC 桥](http://docs.oracle.com/javase/7/docs/technotes/guides/jdbc/bridge.html)使用 Access 数据库，而无需安装 Microsoft Access。您只需要以前称为[Jet 数据库引擎](http://en.wikipedia.org/wiki/Microsoft_Jet_Database_Engine)的 Access 数据库引擎 (ACE) 。ACE 是当前 Windows 版本的一部分。对于较旧的，可能需要安装[Microsoft 数据访问组件](http://en.wikipedia.org/wiki/Microsoft_Data_Access_Components)(MDAC)。

从 Java 中使用 Access 数据库有一些缺点：

*   这是带有本机代码的 1 类驱动程序。通常纯 Java JDBC 驱动程序性能更高。
*   在 JDK 6 中，JDBC-OLE 桥得到了一些[增强](http://docs.oracle.com/javase/6/docs/technotes/guides/jdbc/bridge.html)。但是字符集和 CLOB 仍然存在一些问题。
*   您的应用程序仅限于 Microsoft Windows 操作系统。
*   根据[JDK 7 JDBC-ODBC 桥接指南](http://docs.oracle.com/javase/7/docs/technotes/guides/jdbc/bridge.html)，JDBC-ODBC 桥接将在 JDK 8 中删除：

> JDBC-ODBC 桥应被视为一种过渡解决方案；它将在 JDK 8 中删除。此外，Oracle 不支持 JDBC-ODBC 桥。Oracle 建议您使用数据库供应商提供的 JDBC 驱动程序而不是 JDBC-ODBC 桥。

因此，如果有机会为您的项目使用其他数据库，则应避免将 Microsoft Access 与 Java 一起使用。

有很多替代品具有更好的 JDBC 驱动程序。

如果你想要一个占用空间小的嵌入式数据库，有：

*   [Java DB](http://www.oracle.com/technetwork/java/javadb/overview/index.html)（JDK 的一部分），也称为[Apache Derby](http://db.apache.org/derby/)
*   [H2](http://db.apache.org/derby/)
*   [数据库](http://hsqldb.org/)
*   [SQLite](http://www.sqlite.org/)例如带有[Xerial 驱动程序](http://www.xerial.org/trac/Xerial/wiki/SQLiteJDBC)

（Java DB、H2 和 HSQLDB 是纯 Java 解决方案）

如果您更喜欢客户端服务器解决方案，那么对于大多数商业和开源来说，都存在成熟的 JDBC 驱动程序。

*   [甲骨文](http://www.oracle.com/us/products/database/overview/index.html)
*   [Microsoft SQL Server](https://www.microsoft.com/sqlserver/en/us/default.aspx)（服务器必须在 Windows 上运行，但您的 Java 客户端可以在支持 JVM 的每个操作系统上运行。请参阅[Microsoft JDBC Driver for SQL Server Support Matrix](http://msdn.microsoft.com/de-de/data/ff928484)）
*   [PostgreSQL](http://www.postgresql.org/)
*   [MySQL](https://www.mysql.com/)

# templates - 关于VS2010 Multi solution项目模板

> ID：14221799
> 
> 赞同：0
> 
> 时间：2013-01-08T18:37:51.363
> 
> 标签：templates, wizard, visual-studio-extensions, envdte

在 VS2010 中，我创建了一个自定义的多解决方案项目模板并实现[`IWizard`](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.templatewizard.iwizard.aspx)了替换项目中的自定义参数。

我想知道是否在向导中我提供了一个选项来选择需要添加到现有模板（例如测试项目）中的其他项目。

我怎样才能在代码中处理这个？我将在哪种`IWizard`实施方法上添加一个新项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:12:27.393

您可以以编程方式将其他项目添加到多项目模板中定义的项目中。

像这样的东西：

```
public void RunStarted(object automationObject, Dictionary<string, string> replacementsDictionary, WizardRunKind runKind, object[] customParams)
{
    var solution = (Solution2)((DTE2)automationObject).Solution;
    var template = solution.GetProjectTemplate("Folder\\TestProject.zip", "CSharp");

    string destinationFolder = "...";
    string projectName = "..."
    solution.AddFromTemplate(template, destinationFolder, projectName, false);
} 
```

您可能希望将代码移动到另一个方法中`RunStarted`，但这大致是我的做法。然而，我实际上在多项目模板中使用了一组完全空的项目，并像这样触发所有项目模板。

一个要求（我认为）是项目需要存在于常用的模板文件夹之一中，这意味着它也可以单独添加。这对您来说可能是优势也可能是劣势，但您的威世智需要能够以某种方式应对。

我一直想写一篇关于这个和其他一些模板内容的博客文章，不幸的是我还没有找到时间。也许我应该把它放在优先级列表上更高一点……

# delphi - 让 Delphi 7 与 SQL Server Compact 3.5 一起玩

> ID：14221821
> 
> 赞同：4
> 
> 时间：2013-01-08T18:39:08.700
> 
> 标签：delphi, sql-server-ce, delphi-7, sql-server-ce-3.5

我们有一个用 Delphi 7 编写的旧应用程序。它当前连接到一个即将退役的旧 Oracle Lite 数据库。选择将数据移动到 Microsoft SQL Server Compact 数据库的权力。在花费大量时间将所有内容转移到 SQL CE 数据库之后，我现在的任务是让 Delphi 应用程序与新数据库完美配合。

应该比我聪明的人（我的老板）告诉我，我应该能够简单地修改连接，一切都应该恢复正常。然而，两天来我一直在用头撞显示器，试图让 Delphi 应用程序中的 ADO 连接与我们的新 SQL CE 数据库一起工作。

我正在使用的一个稍微简化的示例：

连接是在一个名为“adoConn”的 TADOConnection 的全局对象中建立的：

```
procedure TGlobal.DataModuleCreate(Sender: TObject);
begin
    adoConn.ConnectionString := 'Provider=Microsoft.SQLSERVER.CE.OLEDB.3.5;Data Source=path\db.sdf;';
    adoConn.Connected := True;
end; 
```

此后不久，将调用一个过程来填充一些消息。为了解决应用程序的故障，我简化了代码以进行简单查询并在消息框中显示结果。该过程接收 SQL 字符串的参数，但我现在忽略它并手动插入一个简单的选择语句：

```
procedure Select(const SQL: string);
var
    adoQuery : TADOQuery;
begin
    adoQuery := TADOQuery.Create(nil);
    try
        adoQuery.Connection := Global.adoConn;
        adoQuery.SQL.Text := 'select * from CLT_MESSAGES';
        adoQuery.ExecSQL;
        While not adoQuery.Eof do
        begin
            // Here I just created a MessageDlg to output a couple of fields.
            adoQuery.Next;
        end;
    finally
        adoQuery.Free;
    end;
end; 
```

一切都编译得很好，但是当我运行应用程序时，我收到以下错误：

“多步操作产生错误。检查每个状态值。”

我做了一些额外的故障排除，发现错误发生在 adoQuery.ExecSQL。我尝试了几种不同版本的连接字符串和几种不同的方法来尝试查询数据，但结果都是一样的。我要么无法连接到数据库，要么得到那个愚蠢的“多步”错误。

我提前感谢可以提供的任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T19:26:32.373

不要`ExecSQL`用于返回记录集的查询。

将`AdoQuery.Active`属性设置为`True`或用于`AdoQuery.Open`执行`SELECT`语句。

**更新**

更改代码后，我们看到真正的错误是 DB_E_OBJECTOPEN。

**更新2**

在深入挖掘之后，这似乎是 OLE DB 提供程序和大于 127 个字符的 nvarchar 字段中的一个已知错误。

这些参考资料似乎证实了这一点：

SO：[SQL Server Compact Edition 3.5 给出简单查询的“多步操作生成错误”错误](https://stackoverflow.com/q/6962306/800214)

参考 1：[http ://www.tech-archive.net/Archive/SQL-Server/microsoft.public.sqlserver.ce/2008-07/msg00019.html](http://www.tech-archive.net/Archive/SQL-Server/microsoft.public.sqlserver.ce/2008-07/msg00019.html)

参考 2：[https ://forums.embarcadero.com/thread.jspa?messageID=474517](https://forums.embarcadero.com/thread.jspa?messageID=474517)

[参考 3： http](http://social.msdn.microsoft.com/Forums/en-US/sqlce/thread/48815888-d4ee-42dd-b712-2168639e973c) ://social.msdn.microsoft.com/Forums/en-US/sqlce/thread/48815888-d4ee-42dd-b712-2168639e973c

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-03T14:44:37.397

将光标类型更改为服务器端为我解决了 127 字符问题:)

# php - 铅与 ssh2_scp_send SFTP

> ID：14221824
> 
> 赞同：0
> 
> 时间：2013-01-08T18:39:24.847
> 
> 标签：php, sftp

我想上传文件并使用 SFTP 保存。

这是我的代码：

```
if ($size != 0) {
            $name = $uploadedFile->getClientOriginalName();
            $extension = $uploadedFile->getClientMimeType();
            $extension = \explode('.', $name);
            $shortName = $extension[0];
            $extension = \end($extension);
            $allowedExtension = "zip";
            $compare = strcmp(strtolower($extension), $allowedExtension);            
            if ($compare == 0) {//les deux chaines sont égaux
                $saveName = $name;                 
                if (file_exists($target_path . $name))
                    $saveName = $shortName . $date . '.' . $extension;
                /* modif le dossier sera déposé en SFTP*/

                /* Connexion SFTP */
                $connection = ssh2_connect('webhost01', 22); // acces inetrne
                ssh2_auth_password($connection, 'fbh', 'F#Bh52.6');
                $sftp = ssh2_sftp($connection);
                /* Déplacer le dossier dans le sftp */
                ssh2_scp_send($connection,$saveName, '/home/fbh/newdir/', 0677);
} 
```

但我收到此错误 ssh2_scp_send(12100102430010813_192636.zip) [function.ssh2-scp-send]: failed to open stream: No such file or directory。任何帮助请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:03:59.367

谢谢您的回答。现在没关系，问题是我应该从服务器上的临时文件中检索它。

这是新代码：

```
if ($size != 0) {            
            $name = $uploadedFile['name'];            
            $extension = $uploadedFile['type'];
            $extension = \explode('.', $name);
            $shortName = $extension[0];
            $extension = \end($extension);
            $allowedExtension = "zip";
            $compare = strcmp(strtolower($extension), $allowedExtension);                          
            if ($compare == 0) {//les deux chaines sont égaux
                $tempFile= $uploadedFile['tmp_name'];
                $saveName = $name;                 
                if (file_exists($target_path . $name))
                    $saveName = $shortName . $date . '.' . $extension;
                /*
                 *  modif le dossier sera déposé en SFTP Cnx + deposer
                 */ 

                /*
                 * parametres SFTP
                 */
                $host = $this->container->getParameter('host');
                $port = $this->container->getParameter('port');
                $user = $this->container->getParameter('user');
                $mdp  = $this->container->getParameter('mdp');
                $pathSFTP  = $this->container->getParameter('pathSFTP');
                $connection = ssh2_connect($host, $port); // acces inetrne
                ssh2_auth_password($connection, $user, $mdp);
                $sftp = ssh2_sftp($connection);
                /* Déplacer le dossier dans le sftp */
                ssh2_scp_send($connection,$tempFile, '$pathSFTP'.newFile.zip, 0677);                
                $spi = $this->get('spi');
                $partenaireManager = $spi->getPartenaireManager();
                $id_import = $partenaireManager->insertImport($id, $saveName);

                if ($id_import > 0) {

                    return $this->render('ListBundle:Default:rapportUpload.html.twig', array('messgae' => $name . " a été uploadé avec succées",
                                'id_partenaire' => $id, 'id_import' => $id_import));
                }
            } else {
                return $this->render('ListBundle:Default:rapportUpload.html.twig', array('messgae' => "L'extention de " . $name . " est invalide",
                            'id_partenaire' => $id));
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:29:27.027

您修改了 $saveName 但没有将文件移动到此位置。用 file_exists($saveName) 检查这个

# javascript - ON 方法在第一次点击已经加载的页面时不会触发

> ID：14221826
> 
> 赞同：0
> 
> 时间：2013-01-08T18:39:41.297
> 
> 标签：javascript, jquery-ui, jquery, this

这只是应用于我获取文本的文本区域的触发器和 a.comment 触发器之间的冲突

// 先读上面

为什么在页面加载时第一次单击时此 ON 方法不起作用？. 只是因为我点击了页面的任何部分，在第二次点击时，点击事件才起作用。有任何想法吗？顺便说一句，我正在将 firefox 与 firebug 一起使用，如果您知道一种方法可以在 firebug 面板中获取有关此奇怪行为的更好信息的方法。我会感谢你的任何帮助。我正在使用 jquery-1.7.2.min 。

```
$(document).ready(function(){

    $('a.comment').on("click", function(event){
   event.preventDefault();
       var comment_text = $("#comment").val();
   if(comment_text !="Escriba aqui su comentario")
       {
      $.post("../load.php?comment_text="+comment_text, function(response){
        //on response
      })
       }
    });

}); 
```

这是html部分：

```
<textarea id="comment"></textarea> /*only one on the page*/
<a id="c_id-XXX" class="comment"> Comment</a>  /* XXX = diferent num*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:04:00.687

看看[这里](http://jsbin.com/ujuzih/1/)

我已经编辑了你的工作，现在很好：

```
$(document).ready(function(){

    $('a.comment').on("click", function(event){
   event.preventDefault();
      alert('in'); //testing if we are in
       var comment_text = $("#comment").val();
   if(comment_text !="Escriba aqui su comentario")
       {
//no need for extra brackets here as long as you are not passing args.
      $.post("../load.php?comment_text="+comment_text,  
 function(response){
        //on response
      }); // no use for settimeout()
       }
      alert('out'); // checking that we have done it :)
    });     

}); 
```

*希望我有所帮助*

# c# - 动态转换以调用适当的重载

> ID：14221829
> 
> 赞同：3
> 
> 时间：2013-01-08T18:39:53.537
> 
> 标签：c#, generics

我有一个接受一个泛型参数的公共泛型方法。我还有几个私有方法接受我从泛型方法调用的具体类型参数。为了更好地描述我的问题，请查看以下代码：

```
 public void Save<T>(T entity) where T : class
    {
        if(entity is LibraryItem)      Save(entity as LibraryItem);
        else if(entity is Folder)      Save(entity as Folder);
        else if(entity is ProductType) Save(entity as ProductType);
        else if(entity is ProcessName) Save(entity as ProcessName);
    } 
```

和私有方法：

```
private void Save(ProcessName proc){}
private void Save(ProductType type){}
private void Save(Folder folder){}
... 
```

查看代码，我真的不喜欢这个解决方案，检查每种可能的类型看起来像是一种不好的做法恕我直言。所以我想知道我的问题是否有更清洁的解决方案？也许可以在运行时动态转换 T 并调用适当的私有方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T18:42:35.023

使用运行时类型定义：

```
public void Save<T>(T entity) where T : class
{
    Save((dynamic)entity);
}

private void Save(LibraryItem lib){}
private void Save(ProcessName proc){}
private void Save(ProductType type){}
private void Save(Folder folder){} 
```

您还需要一种带有对象类型参数的方法来处理实体不是 LibraryItem、ProcessName、ProductType 或 Folder 的情况：

```
private void Save(object obj) {  } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T18:42:55.187

你在正确的轨道上。使用`dynamic`关键字来获得运行时[重载解决方案](http://coding.abel.nu/2012/04/dynamic-overload-resolution/)：

```
Save((dynamic)entity); 
```

通常重载决议是在编译期间对静态类型（`object`用于泛型类型）进行的。通过强制转换为`dynamic`您将分辨率推迟到运行时，并且使用运行时类型而不是静态类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T18:50:09.370

理想的机制是采用特定于该类型的任何方面`Save`并将其作为每个具体类型的一部分，以便您可以使用多态性。

每个项目负责保存自己可能不合适，但它应该做的是公开足够的信息以允许其他人编写一个通用`Save`方法，该方法简单地接受一个接口或基类型，您的所有类型都实现该接口或基类型为该类型公开足够的信息以允许保存它。

# haskell - 在haskell中调用when后赋值

> ID：14221833
> 
> 赞同：-1
> 
> 时间：2013-01-08T18:40:18.133
> 
> 标签：haskell

在这几行中，错误一定很小，以至于我自己不会明白。

这是我的代码：

```
askName = do
  putStr "Type your name: "
  name <- getLine
  return name

sayHelloTo name = do
  when (null name) (name <- askName) 
```

显然它给出了一个错误：

```
1 of 1] Compiling Main             ( test.hs, interpreted )

test.hs:9:30: parse error on input `<-'
Failed, modules loaded: none. 
```

有什么建议吗？

编辑 1。

如果我这样写：

```
sayHelloTo name = do
  when (null name) (name2 <- askName) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T19:00:51.827

该`name2 <-`语法是 do-notation 的一部分，只能在`do`块内使用。它*也不*是变量赋值 - 在引擎盖下它只是创建一个回调函数`name2`作为参数

也就是下面的代码：

```
do
    name2 <- monadicOp
    ...things... 
```

脱糖成

```
monadicOp >>= (\name2 -> ...things... ) 
```

我希望这有助于清楚地表明您不会在 Haskell 中分配或改变它们。

无论如何，要解决您的特定问题，您可以做的就是使用 if-then-else （实际上相当于`?:`三元运算符）并返回适当的值。例如，以下函数使用递归来一次又一次地询问名称，直到它对结果满意为止

```
getNonEmptyName :: IO String
getNonEmptyName = do
    name <- getName
    if null name --note: indenting if statements in do blocks is tricky
       then getNonEmptyName
       else (return name) 
```

或者，没有 do 符号糖：

```
getNonEmptyName = getName >>= (\name -> if (null name) then getNonEmptyName else (return name) ) 
```

这可能与您习惯的有所不同，但我想您应该能够在了解其工作原理后清除事物。基本上`getNonEmptyName`是 type `IO String`，这意味着它是一个 IO 动作 IO 动作，它在运行时产生一个字符串。if-then-else 部分也应该评估为一个`IO String`值，因为它的值将是 getNonEmptyName 的返回值。这一切正常，因为首先我们对 getNonEmptyName 进行递归调用（并根据需要提供 IP 字符串值），在 else 分支中，我们使用返回函数将常规字符串值（名称）提升为 IO 字符串。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T18:53:32.933

目前尚不完全清楚`sayHelloTo`应该做什么或返回什么——它肯定不会修改`name`——但猜测一下，你可能意味着类似

```
 sayHelloTo :: String -> IO String
 sayHelloTo name
   | null name   = askName
   | otherwise   = return name 
```

# python - 在python中导入模块

> ID：14221835
> 
> 赞同：0
> 
> 时间：2013-01-08T18:40:35.783
> 
> 标签：python

我已经成功安装`pocketsphinx-0.8`，`Ubuntu 12.04`因为我能够识别语音`pocketsphinx_continuous`。

设置后如何`import pocketsphinx`在我现在得到`python``pocketsphinx-0.8``ImportError: No module named pocketsphinx`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:04:41.310

我敢打赌它是区分大小写的，比如 PocketSphinx 之类的。

`help()`我会使用 python 交互式 shell 的函数来搜索它。

```
matthew@speedy:~/openstack/nova$ python
Python 2.7.3 (default, Sep 26 2012, 21:51:14) 
[GCC 4.7.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> help()

Welcome to Python 2.7!  This is the online help utility.

If this is your first time using Python, you should definitely check out
the tutorial on the Internet at http://docs.python.org/2.7/tutorial/.

Enter the name of any module, keyword, or topic to get help on writing
Python programs and using Python modules.  To quit this help utility and
return to the interpreter, just type "quit".

To get a list of available modules, keywords, or topics, type "modules",
"keywords", or "topics".  Each module also comes with a one-line summary
of what it does; to list the modules whose summaries contain a given word
such as "spam", type "modules spam".

help> modules phinx

Here is a list of matching modules.  Enter any module name to get more help.

matplotlib.sphinxext 
matplotlib.sphinxext.ipython_console_highlighting - reST directive for syntax-highlighting ipython interactive sessions.
matplotlib.sphinxext.mathmpl 
matplotlib.sphinxext.only_directives 
matplotlib.sphinxext.plot_directive - A directive for including a matplotlib plot in a Sphinx document. 
```

* * *

所以这对我来说只是一个简单的导入：

```
matthew@speedy:~/Downloads/pocketsphinx-0.8$ sudo apt-get install python-pocketsphinx
...
>>> import pocketsphinx
>>> dir(pocketsphinx)
['Decoder', 'LatLink', 'LatLinkIterator', 'LatNode', 'LatNodeIterator', 'Lattice', '__builtins__', '__doc__', '__file__', '__name__', '__package__'] 
```

从源代码安装很难（我放弃了），但安装 ubuntu 库很容易。

* * *

该站点看起来对于从源安装它可能很有用：[http ://www.cs.columbia.edu/~ecooper/CS4706/ps-mac.html](http://www.cs.columbia.edu/~ecooper/CS4706/ps-mac.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T13:15:08.830

如果你已经正确安装了 pocketsphinx，那么这个命令应该可以工作。

```
import pocketsphinx 
```

如果您仍然遇到问题，请将其放入 try/except 块中：

```
try:
    import pocketsphinx
except:
    pass

import pocketsphinx 
```

要在 Ubuntu 中安装 pocketsphinx，可以使用以下命令：

```
sudo apt-get install python-pocketsphinx 
```

# apc - 如何在 CLI 和 Web 服务器实例之间共享 APC 用户缓存？

> ID：14221836
> 
> 赞同：4
> 
> 时间：2013-01-08T18:40:34.920
> 
> 标签：apc, php

我正在使用 PHP 的 APC 来存储大量信息（使用`apc_fetch()`等）。这些信息有时需要分析并转储到别处。

故事是这样的，我每秒有几百次点击。这些命中增加了各种计数器（与`apc_inc()`，和朋友）。每小时，我都想遍历我积累的所有值，并对它们进行一些其他处理，然后将它们保存在磁盘上。

我可以在每个请求中作为随机或基于时间的切换来执行此操作，但这可能是一个很长的操作（可能需要 20-30 秒，如果不是几分钟的话），我不想将请求挂起那么久。

我认为一个简单的 PHP cronjob 可以完成这项任务。但是，我什至无法让它读回缓存信息。

```
<?php
  print_r(apc_cache_info());
?> 
```

产生一个看似不同的 APC 内存段，具有：

`[num_entries] => 1`

（单个条目似乎是其自身的操作码缓存）

虽然我的网络服务器由 nginx/php5-fpm 提供支持，但产生：

`[num_entries] => 3175`

因此，它们显然不共享同一块内存。如何在 CLI 脚本中访问相同的内存块（首选），或者如果这根本不可能，那么执行长时间运行的序列（例如每小时随机 HTTP 请求）绝对最安全的方法是什么？

对于后者，是否会`register_shutdown_function()`立即使用 and`set_time_limit(0)`来`ignore_user_abort(true)`确保执行完成并且不会“挂起”任何人的浏览器？

是的，我知道 redis、memcache 等不会有这个问题，但我现在坚持使用 APC，因为它们都无法展示与 APC 相同的速度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-23T23:22:04.860

这实际上是一个设计问题，也是选择首选成本与收益的问题。

APC 的速度让您兴奋不已，因为您无需花时间保存数据。您还想保留数据，但现在性能影响太大了。你必须以某种方式平衡这些。

如果持久性很重要，请在每个请求上接受并持久化（文件、数据库等）。如果你只关心速度，那就什么都不做——这整个问题变得毫无意义。有一些具有持久存储的缓存系统可以通过聚合写入磁盘的内容和时间来优化磁盘写入，但您通常总是会在两者之间获得不同的临界点的回报。您只需要选择哪些适合您的目标。

可能永远不会有一个持久的、有益健康的技术解决方案来解决狼吃饱、羔羊完整的问题。

如果你真的必须按照自己的方式去做，你可以有一个 CURL 向你的应用程序发送一个特殊请求，这会触发将你的缓存持久化到磁盘。这样您就可以控制请求、超时等，而不必担心用户可能会为终止他们的请求所做的一切。

但是，这种情况下的潜在风险是数据完整性（因为您将在缓存被其他请求更新的同时将缓存写入磁盘）以及在持久化缓存时提供的请求会导致性能损失你的服务器很忙。

从本质上讲，我们为狼/羊的困境引入了一堆干草；）

# jquery - Jquery .click 函数，更改特定 id 的行为

> ID：14221837
> 
> 赞同：1
> 
> 时间：2013-01-08T18:40:40.817
> 
> 标签：jquery, css

所以我有这个功能

```
 $('#wrapper').click(function () {
        hideDropDown();
        checkForPiehtcFix();
        hideSearch();
    }); 
```

#wrapper 包含我的所有内容。所以每当我点击任何地方时，我都会隐藏我的搜索 div。

```
 function hideSearch() {
        isDropSearch = false;
        $('#mn_search').css({ 'background-position': '0 0' });
        $('#dd_search').removeClass('show').addClass('hide');
    } 
```

问题是当用户点击我的搜索时，即 div #dd_search 我不想隐藏搜索，因为用户永远无法输入搜索，因为当他们点击它时它会关闭。

所以我希望在#wrapper click 中添加一个子句，以检查他们是否在#dd_search 中单击，如果他们这样做了，那么我不想调用 hideSearch();

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:42:36.723

```
$("#wrapper").click(function (e) {
   if ($(e.target).is("#dd_search") {
      //special handling when dd_search is clicked 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T18:42:50.383

```
$('#wrapper').click(function () {
    hideDropDown();
    checkForPiehtcFix();
    if( !$(this).is('#dd_search') ) {
        hideSearch();
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T18:43:11.010

**一种方法是：**

```
$('#wrapper').on('click', ':not(#dd_search)'(function () {
    ...
}); 
```

**第二种方式是：**

```
$('#wrapper').click(function (e) {
    if (e.target.id == 'dd_search' || $(e.target).find('#dd_search').length)
        return false;
    ...
    ...
}); 
```

**第三种方式是：**

```
$('#wrapper').click(function () {
    ...
});

$('#dd_search').click(function(){
    return false; // stops the bubbling.
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T18:53:19.870

```
 $('#wrapper>*').not('#dd_search').click(function () {
      hideDropDown();
      checkForPiehtcFix();
      hideSearch();
    }); 
```

如果单击除 dd_search 之外的包装器的任何子级，则触发。

# asp.net-mvc-3 - AngularJS + 在 ASP.NET MVC 中发布 Controller 的整个 $scope

> ID：14221839
> 
> 赞同：0
> 
> 时间：2013-01-08T18:40:45.187
> 
> 标签：asp.net-mvc-3, angularjs

伙计们。我正在尝试调用一些 AJAX Post trhu AngularJS，并且我想从我的 $scope 变量中发送所有属性。我有这个表格：

```
<div ng-controller="DiscountPrintsCtrl">

    <div>
    Choose the year:
    <select ng-model="selectedYear" ng-change="searchCourses()">
        <option ng-repeat="year in years" value="{{year.ID}}">{{year.Name}}</option>
    </select>
</div>

<div>
    Choose the course:
    <select ng-model="selectedCourse" ng-change="searchStudents()">
        <option ng-repeat="course in courses" value="{{course.ID}}">{{course.Nome}}</option>
    </select>
</div>

<div>
    Choose the student:
    <select ng-model="selectedStudent" ng-change="searchStudentDetails()">
        <option ng-repeat="student in students" value="{{student.ID}}">{{student.Name}}</option>
    </select>
</div>

<div ng-model="studentDetails">
    Details about the student:<br /><br />
    <label>Name: {{studentDetails.Name}}</label><br />
    <label>Number: {{studentDetails.Number}}</label><br />
    <label>Print quote: {{studentDetails.PrintQuote}}</label><br />
</div>

<div>
    <table>
        <thead><tr>
            <td></td>
            <td>Title</td>
            <td>Grade</td>
            <td>Summary</td>
            <td>Author</td>
            <td>Number of pages</td>
        </tr></thead>
        <tbody>
            <tr ng-repeat="publication in publications">
                <td><input type="checkbox" ng-model="publication.Selected" /></td>
                <td>{{publication.Title}}</td>
                <td>{{publication.Grade}}</td>
                <td>{{publication.Comments}}</td>
                <td>{{publication.Author}}</td>
                <td>{{publication.NumberOfPages}}</td>
            </tr>
        </tbody>
    </table>
</div>

<button ng-click="submitForm()" value="Confirm discounts" /> 
```

我有这个JS：

```
<script type="text/javascript">

function DiscountPrintsCtrl($scope, $http) {

    $http.get(url).success(function (years) {

        $scope.years = years;
        $scope.selectedYear = '';

    });

    $scope.searchCourses = function() {

        var url = '/json/GetCoursesFromYear?' + 
            'selectedYear=' + $scope.selectedYear;
        $http.get(url).success(function (courses) {
            $scope.course = courses;
            $scope.selectedCourse= '';
        });
    }

    $scope.searchAlunosAnoSemestre = function() {

        var url = '/json/GetStudentsFromCouse?' +
            'selectedCourse=' + $scope.selectedCourse;

        $http.get(url).success(function(students) {
            $scope.students = students;
            $scope.selectedStudent = '';
        });
    }

    $scope.searchStudentDetails = function() {

        var url = '';

        url = '/json/GetStudentDetails?' +
            'selectedStudent=' + $scope.selectedStudent;

        $http.get(url).success(function(studentDetails) {
            $scope.studentDetails= studentDetails;
        });

        url = '/json/GetPublicationsForStudent?' +
            'selectedStudent=' + $scope.selectedStudent;
        $http.get(url).success(function(publications) {
            $scope.publications = publications;
        });
    }

    $scope.submitForm = function () {
        // How to submit the entire $scope???
    }
} 
```

任何的想法？关于我的 JS 代码的任何考虑？谢谢大家！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:22:48.910

你有错别字要修正，朋友：

在 .js 中：$scope.course = 课程；应该是 $scope.courses！

在 html 中： {{course.Nome}} 不应该是： {{course.Name}} 吗？

我在上面看到了一些西班牙语（？），但在其他任何地方你都说 .Name 所以最好保持一致，对吗？

也就是说，从外部 json 数据存储中将对象加载到 $scope 似乎很好，就像您在每个函数中所做的那样，从 json URL 加载。您帖子的评论者似乎没有意识到这一点？我认为他们认为您正在尝试将此数据永久存储在 $scope 中？也许我没有看到它们是什么......但如果你不将你的数据模型对象添加到 $scope.something 那么 {{something}} 根本不会工作，也不会 {{something.else }}。

我在这里离基地很远吗？

# ruby - 用散列中的值替换散列中的键

> ID：14221840
> 
> 赞同：1
> 
> 时间：2013-01-08T18:40:50.637
> 
> 标签：ruby, regex

我有一个哈希（有数百对），我有一个字符串。

我想在这个字符串中替换哈希中所有出现的键，以根据哈希中的值。

我知道我可以做这样的事情

```
some_hash.each { |key, value| str = str.gsub(key, value) } 
```

但是，我想知道是否有更好的（性能方面）方法来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T18:47:29.423

您只需要运行`gsub`一次。由于正则表达式（oniguruma）是在 C 中实现的，它应该比在 Ruby 中循环更快。

```
some_hash = {
  "a" => "A",
  "b" => "B",
  "c" => "C",
}

"abcdefgabcdefg".gsub(Regexp.union(some_hash.keys), some_hash)
# => "ABCdefgABCdefg" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T19:52:20.930

一些基准：

```
require 'benchmark'

SOME_HASH = Hash[('a'..'z').zip('A'..'Z')]
SOME_REGEX = Regexp.union(SOME_HASH.keys)

SHORT_STRING = ('a'..'z').to_a.join
LONG_STRING = SHORT_STRING * 100

N = 10_000

def sub1(str)
  SOME_HASH.each { |key, value|
    str = str.gsub(key, value) 
  } 
  str
end

def sub2(str)
  SOME_HASH.each { |key, value|
    str.gsub!(key, value) 
  } 
  str
end

def sub_regex(str)
  str.gsub(SOME_REGEX, SOME_HASH)
end

puts RUBY_VERSION
puts "#{ N } loops"
puts
puts "sub1: #{ sub1(SHORT_STRING) }"
puts "sub2: #{ sub2(SHORT_STRING) }"
puts "sub_regex: #{ sub_regex(SHORT_STRING) }"
puts

Benchmark.bm(10) do |b|

  b.report('gsub')  { N.times { sub1(LONG_STRING)      } }
  b.report('gsub!') { N.times { sub2(LONG_STRING)      } }
  b.report('regex') { N.times { sub_regex(LONG_STRING) } }

end 
```

哪个输出：

```
1.9.3
10000 loops

sub1: ABCDEFGHIJKLMNOPQRSTUVWXYZ
sub2: ABCDEFGHIJKLMNOPQRSTUVWXYZ
sub_regex: ABCDEFGHIJKLMNOPQRSTUVWXYZ

                user     system      total        real
gsub        14.360000   0.030000  14.390000 ( 14.412178)
gsub!        1.940000   0.010000   1.950000 (  1.957591)
regex        0.080000   0.000000   0.080000 (  0.075038) 
```

# javascript - 如何使用 jquery 更改我的克隆下拉列表的 ID

> ID：14221842
> 
> 赞同：0
> 
> 时间：2013-01-08T18:41:21.310
> 
> 标签：javascript, jquery, html, clone

我在 php 中有以下下拉列表：

```
<select id="choice" name="choice" style="width: 121px">
    <?php 
    foreach($xml->children() as $pizza){
    ?>
    <option value="<?php echo $pizza; ?>" selected=""><?php echo $pizza; ?></option>
    <?php }?>
</select><input TYPE = "button" id="addbt" Name = "addbt" VALUE = "Add Pizza"> 
```

我正在使用以下 Jquery：

```
<script type="text/javascript">

  $("#addbt").click(function () {
     $('#choice').clone().insertAfter("#choice");
  });

</script> 
```

我正在尝试克隆附加到 xml 文件的下拉列表（我一直管理到这里）并添加必要的 Jquery，以便每个新的下拉列表克隆都有一个新的 id（一个数字差异就足够了。像choices_00 这样的东西然后是choices_01 等等）。

由于我对 Jquery 和 php 完全陌生，因此我正在寻求任何建议或帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T18:43:14.537

```
 $("#addbt").click(function () {
     $('#choice').clone()
         .attr('id', 'newid')
         .attr('name', 'newname')
         .insertAfter("#choice");
  }); 
```

为确保您每次都获得一个新名称和 id，请考虑在选择中添加一个类名称，以便计算存在的数量。

HTML：

```
<select id="choice" name="choice" class="ddl" style="width: 121px">
    <?php 
    foreach($xml->children() as $pizza){
    ?>
    <option value="<?php echo $pizza; ?>" selected=""><?php echo $pizza; ?></option>
    <?php }?>
</select> 
```

JS：

```
 $("#addbt").click(function () {
     $('#choice').clone()
         .attr('id', 'choice' + $('.ddl').length)
         .attr('name', 'choice' + $('.ddl').length)
         .insertAfter(".ddl:last");
  }); 
```

否则，使用全局变量 (ugh) 或数据属性跟踪按钮被单击的次数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:44:37.890

`attr()`您可以在插入之前使用 jQuery 方法更改 id ：

```
<script type="text/javascript">

    $("#addbt").click(function () {
        $('#choice').clone().attr('id','Your new id').insertAfter("#choice");
    });

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T18:53:24.920

使用此代码，您可以根据需要多次按下按钮：

```
<script type="text/javascript">

  var times = 0;
  $("#addbt").click(function () {
    times++;
    $('#choice').clone().attr( 'id', 'choices_' + times ).insertAfter("#choice");
  });

</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T19:02:02.433

我想你是这样的：http: [//jsfiddle.net/ehQan/](http://jsfiddle.net/ehQan/)

```
$("#addbt").click(function () {
    $('#choice').clone().attr( 'id', 'choices_' +$(this).index()).insertAfter("#choice");
}); 
```

# silverlight - System.Exception 错误编号

> ID：14221845
> 
> 赞同：3
> 
> 时间：2013-01-08T18:41:26.953
> 
> 标签：silverlight

在我正在从事的 Silverlight 项目中；我偶尔会看到带有诸如`System.Exception: 3000 An error has occurred`. 不过，这些数字各不相同——我见过 3000、3001、4001 和 3137。这些数字在播放/访问不同媒体时出现，谷歌搜索确认它们与媒体相关。

这些显然意味着特定的东西；但它们都没有明显的含义。这些是程序生成的吗？除了搜索论坛/谷歌之外，还有什么简单的方法可以确定不同数字的含义吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-14T14:31:17.327

你指的是这个：http: [//blogs.msdn.com/b/silverlight_sdk/archive/2009/07/08/silverlight-plug-in-error-messages.aspx](http://blogs.msdn.com/b/silverlight_sdk/archive/2009/07/08/silverlight-plug-in-error-messages.aspx)

```
 Error Code  Error Message
    1001    AG_E_UNKNOWN_ERROR
    2000    Document is not well-formed XAML.
    2001    DTDs are not allowed.
    2002    Entity references to named entities other than lt, gt, amp, apos, and quot are not allowed.
    2003    Entity definitions are not allowed.
    2004    Only UTF-8 and UTF-16 encodings are supported.
    2005    Unknown namespace %0.
    2007    Unknown element: %0.
    2008    Cannot specify the value multiple times for properties.
    2009    Cannot specify content for %0 and set its %1 property at the same time.
    2010    %0 does not support %1 as content.
    2011    %0 does not support text content.
    2012    Unknown attribute %0 on element %1.
    2013    Attribute %0 value is out of range.
    2014    The attribute %0 is read only and cannot be set.
    2015    Cannot declare custom namespaces in JavaScript.
    2016    Cannot specify both Name and x:Name attributes.
    2017    Null is not a legal value for attribute %0.
    2018    The element %0 does not support attributes.
    2019    Xaml may not use base type names, use %0 instead.
    2020    Invalid Property: %0.
    2021    Invalid enum value.
    2022    Unknown Color: %0.
    2023    %0 is not an event.
    2024    Invalid attribute value %0 for property %1.
    2025    AG_E_PARSER_ATTRIBUTE
    2027    AG_E_PARSER_ELEMENT
    2028    The name already exists in the tree: %0.
    2030    Property element %0 cannot be used inside another property element.
    2031    The property element %0 must appear before other content.
    2033    Cannot specify the value multiple times for property: %0.
    2034    Elements in a ResourceDictionary must have x:Key or x:Name attribute.
    2035    The element is not valid in the given namespace.
    2036    XamlReader.Load() does not accept event handlers.
    2100    AG_E_INIT_CALLBACK
    2101    Failed to initialize the application's root visual
    2102    Invalid source file specified on Silverlight plug-in. Expected Uri for application file
    2103    Invalid or malformed application: Check manifest
    2104    Could not download the Silverlight application. Check web server settings
    2105    Failed to load pre-requisites for the application
    2106    Failed to load the application. It was built with an obsolete version of Silverlight
    2107    Splash screen file needs to be on the same domain as the application
    2108    Failed to download the splash screen
    2150    Failed to load a platform extension. Possibly corrupt or non-existent file: %0
    2152    Failed to download a platform extension: %0
    2153    Failed to load a platform extension. Possibly corrupt or invalid file: %0
    2201    AG_E_RUNTIME_INVALID_CALL
    2202    AG_E_RUNTIME_FINDNAME
    2203    AG_E_RUNTIME_SETVALUE
    2204    AG_E_RUNTIME_GETVALUE
    2205    AG_E_RUNTIME_ADDEVENT
    2206    AG_E_RUNTIME_DELEVENT
    2207    AG_E_RUNTIME_METHOD
    2208    AG_E_RUNTIME_GETHOST
    2209    AG_E_RUNTIME_GETPARENT
    2210    AG_E_INVALID_ARGUMENT
    2211    AG_E_RUNTIME_HTML_ACCESS_RESTRICTED
    2212    Animation target not specified.
    2213    Cannot resolve TargetName %0.
    2214    Cannot resolve TargetProperty %0 on specified object.
    2215    %0 cannot be used to animate property %1 due to incompatible type.
    2216    Multiple animations in the same containing Storyboard cannot target the same property on a single element.
    2217    KeyTime property on KeyFrame object must be set to a non-negative TimeSpan value.
    2218    Operation is not valid on an active Animation or Storyboard.  Root Storyboard must be stopped first.
    2219    Operation is not allowed on a non-root Storyboard.
    2220    Cannot determine Storyboard Duration.
    2221    Shader file %0 not found.
    2222    Invalid shader.
    2250    AG_E_RUNTIME_MANAGED_UNKNOWN_ERROR
    2251    AG_E_RUNTIME_MANAGED_ACTIVATION
    2252    AG_E_RUNTIME_MANAGED_ASSEMBLY_DOWNLOAD
    2253    AG_E_RUNTIME_MANAGED_ASSEMBLY_LOAD
    2254    AG_E_PARSER_UNKNOWN_TYPE
    2255    AG_E_PARSER_BAD_TYPE
    2256    AG_E_PARSER_BAD_NATIVE_TYPE
    2257    AG_E_PARSER_CREATE_OBJECT_FAILED
    2258    AG_E_PARSER_PROPERTY_NOT_FOUND
    2259    AG_E_PARSER_BAD_PROPERTY_TYPE
    2260    AG_E_PARSER_BAD_PROPERTY_VALUE
    2261    AG_E_PARSER_ROOT_NOT_CUSTOM
    2262    AG_E_PARSER_NAMESPACE_NOT_SUPPORTED
    2263    AG_E_PARSER_MISSING_DEFAULT_NAMESPACE
    2264    AG_E_PARSER_INVALID_XMLNS
    2265    AG_E_PARSER_INVALID_CLASS
    2266    AG_E_RUNTIME_MANAGED_BAD_DLR_SCRIPT
    2267    AG_E_PARSER_INVALID_XCODE_TAG
    2268    AG_E_PARSER_ELEMENT_IGNORED
    2269    Elements in a ResourceDictionary must not set both x:Name and x:Key, or x:Key twice
    2270    Attribute x:Key set on an invalid object, only objects in a ResourceDictionary can have x:Key
    2271    Improper syntax for Static Resource (ie: {StaticResource Key})
    2272    Cannot find a Resource with the Name/Key %0
    2273    Elements in the same ResourceDictionary cannot have the same x:Key
    2274    AG_E_RUNTIME_MANAGED_ASSEMBLY_NOT_FOUND
    2275    Invalid characters in Source Uri.
    3000    AG_E_UNABLE_TO_PLAY
    3001    AG_E_INVALID_FILE_FORMAT
    3002    AG_E_NOT_FOUND
    3003    AG_E_MEDIA_DISCONNECTED
    3004    Invalid ASX element
    3005    Invalid ASX attribute
    3006    Unsupported ASX element
    3007    Unsupported ASX attribute
    3008    ASX parse error
    4000    AG_E_ABORT_FAILED
    4001    AG_E_NETWORK_ERROR
    4002    AG_E_ACCESS_DENIED
    4003    AG_E_INVALID_POLICY
    4004    AG_E_MANAGED_EXCEPTION
    4005    XamlReader.Load() does not support x:Class.
    4006    Only the root element can have an x:Class attribute.
    4007    The root element must be <UserControl>, not a subclass of UserControl.
    4008    Layout cycle detected.  Layout could not complete.
    4009    Element is already the child of another element.
    4010    The ItemsControl.ItemsPanelTemplate must have a derivative of Panel as the root element.
    4011    Setting the Template property on a UserControl is not supported.
    4012    Cannot explicitly modify Children collection of Panel used as ItemsPanel for ItemsControl. ItemsControl generates child elements for Panel.
    4013    Cycle detected in merged resource dictionaries
    4014    Local values are not allowed in resource dictionary with Source set
    4015    This Style's hierarchy of BasedOn references contains a loop.
    4016    Can only base on a Style with target type that is base type of this style's target type.
    4017    A Style cannot be based on itself.
    4018    After a Style is in use (sealed), it cannot be modified.
    4019    Must have non-null value for TargetType.
    4020    '%0' is not a valid value for property '%1'.
    4021    Using NavigationState requires a hidden <iframe id='_sl_historyFrame'> element in HTML.
    4022    Mouse promotion can only be suspended on a primary TouchPoint’s down action.
    4023    Navigation is prohibited for this Silverlight application.
    6000    Unable to play protected content
    6001    Unable to individualize due to a network or protocol error
    6002    Unable to acquire license due to a network or protocol error
    6003    Unable to individualize due to an installation failure
    6004    Update of Silverlight required
    6005    Incorrect header format for protected media file
    6006    Unable to process license
    6007    Unable to acquire license due to an application specific error
    6008    Individualization disabled by user
    7000    unexpected end of input
    7001    unrecognized encoding
    7002    unable to switch the encoding
    7003    unrecognized input signature
    7004    whitespace expected
    7005    semicolon expected
    7006    '>' expected
    7007    quote expected
    7008    equal expected
    7009    wfc: no '<' in attribute value
    7010    hexadecimal digit expected
    7011    decimal digit expected
    7012    '[' expected
    7013    '(' expected
    7014    illegal xml character
    7015    illegal name character
    7016    incorrect document syntax
    7017    incorrect CDATA section syntax
    7018    incorrect comment syntax
    7019    incorrect conditional section syntax
    7020    incorrect ATTLIST declaration syntax
    7021    incorrect DOCTYPE declaration syntax
    7022    incorrect ELEMENT declaration syntax
    7023    incorrect ENTITY declaration syntax
    7024    incorrect NOTATION declaration syntax
    7025    NDATA expected
    7026    PUBLIC expected
    7027    SYSTEM expected
    7028    name expected
    7029    one root element
    7030    wfc: element type match
    7031    wfc: unique attribute spec
    7032    text/xmldecl not at the beginning of input
    7033    leading \'xml\'
    7034    incorrect text declaration syntax
    7035    incorrect xml declaration syntax
    7036    incorrect encoding name syntax
    7037    incorrect public identifier syntax
    7038    wfc: pes in internal subset
    7039    wfc: pes between declarations
    7040    wfc: no recursion
    7041    entity content not well formed
    7042    wfc: undeclared entity
    7043    wfc: parsed entity
    7044    wfc: no external entity references
    7045    incorrect processing instruction syntax
    7046    incorrect system identifier syntax
    7047    '?' expected
    7048    no ']]>' in element content
    7049    not all chunks of value have been read
    7050    DTD was found but is prohibited
    7051    illegal qualified name character
    7052    multiple colons in qualified name
    7053    colon in name
    7054    declared prefix
    7055    undeclared prefix
    7056    non default namespace with empty uri
    7057    'xml' prefix is reserved and must have the http://www.w3.org/XML/1998/namespace URI
    7058    'xmlns' prefix is reserved for use by XML
    7059    xml namespace URI (http://www.w3.org/XML/1998/namespace) must be assigned only to prefix 'xml'
    7060    xmlns namespace URI (http://www.w3.org/2000/xmlns/) is reserved and must not be used
    7061    invalid decimal
    7062    invalid hexidecimal
    7063    invalid unicode
    7064    invalid encoding
    8001    Upgrade required
    8002    Browser restart required 
```

# web-services - SOAPUI 中未填充的 Soap 请求元素

> ID：14221854
> 
> 赞同：3
> 
> 时间：2013-01-08T18:42:10.757
> 
> 标签：web-services, soap, axis2, soapui, wsdl2java

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:xs="http://www.w3.org/2001/XMLSchema">
   <soap:Header/>
   <soap:Body>
      <xs:QueryProductionCalendarRequest/>
   </soap:Body>
</soap:Envelope> 
```

由于这些空请求元素，我们的客户无法使用 WSDL 生成 java 客户端。因此，我解决这个问题非常重要。WSDL 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:axis2="http://ws.apache.org/axis2" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" targetNamespace="http://ws.apache.org/axis2">
    <wsdl:documentation>FlexisService</wsdl:documentation>
    <wsdl:types>
      <xs:element name="QueryProductionCalendarRequest" type="QueryProductionCalendarRequestType"/>
      <xs:complexType name="QueryProductionCalendarRequestType">
        <xs:sequence>
          <xs:element name="Plant" type="xs:string"/>
          <xs:element name="Line" type="xs:string"/>
          <xs:element name="StartDate" type="xs:date" minOccurs="0"/>
          <xs:element name="EndDate" type="xs:date" minOccurs="0"/>
        </xs:sequence>
      </xs:complexType>
      <xs:element name="QueryProductionCalendarResponse" type="QueryProductionCalendarResponseType"/>
      <xs:complexType name="QueryProductionCalendarResponseType">
        <xs:sequence>
          <xs:element name="Plant" type="xs:string"/>
          <xs:element name="Line" type="xs:string"/>
          <xs:element name="ProductionDayList" type="ProductionDayListType"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="ProductionDayListType">
        <xs:sequence>
          <xs:element name="ProductionDay" type="ProductionDayType" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="ProductionDayType">
        <xs:sequence>
          <xs:element name="ProductionDate" type="xs:date"/>
          <xs:element name="ProductionRate" type="xs:integer"/>
          <xs:element name="ProductionShiftList" type="ProductionShiftListType" minOccurs="0"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="ProductionShiftListType">
        <xs:sequence>
          <xs:element name="ProductionShift" type="ProductionShiftType" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="ProductionShiftType">
        <xs:sequence>
          <xs:element name="Name" type="xs:string"/>
          <xs:element name="ShiftRate" type="xs:integer"/>
          <xs:element name="StartDateTime" type="xs:dateTime"/>
          <xs:element name="EndDateTime" type="xs:dateTime"/>
        </xs:sequence>
      </xs:complexType>
    </wsdl:types>
    <wsdl:message name="QueryProductionCalendarRequestMessage">
      <wsdl:part name="parameters" element="xs:QueryProductionCalendarRequest"/>
    </wsdl:message>
    <wsdl:message name="QueryProductionCalendarResponseMessage">
      <wsdl:part name="parameters" element="xs:QueryProductionCalendarResponse"/>
    </wsdl:message>
    <wsdl:portType name="FlexisServicePortType">
        <wsdl:operation name="QueryProductionCalendar">
            <wsdl:input message="axis2:QueryProductionCalendarRequestMessage" wsaw:Action="urn:QueryProductionCalendar"/>
            <wsdl:output message="axis2:QueryProductionCalendarResponseMessage" wsaw:Action="urn:QueryProductionCalendarResponse"/>
        </wsdl:operation>    
    </wsdl:portType>
    <wsdl:binding name="FlexisServiceSoap11Binding" type="axis2:FlexisServicePortType">
        <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
        <wsdl:operation name="QueryProductionCalendar">
            <soap:operation soapAction="urn:QueryProductionCalendar" style="document"/>
            <wsdl:input>
                <soap:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <soap:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
    </wsdl:binding>
    <wsdl:binding name="FlexisServiceSoap12Binding" type="axis2:FlexisServicePortType">
        <soap12:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
        <wsdl:operation name="QueryProductionCalendar">
            <soap12:operation soapAction="urn:QueryProductionCalendar" style="document"/>
            <wsdl:input>
                <soap12:body use="literal"/>
            </wsdl:input>
            <wsdl:output>
                <soap12:body use="literal"/>
            </wsdl:output>
        </wsdl:operation>
    </wsdl:binding>
    <wsdl:binding name="FlexisServiceHttpBinding" type="axis2:FlexisServicePortType">
        <http:binding verb="POST"/>
        <wsdl:operation name="QueryProductionCalendar">
            <http:operation location="FlexisService/QueryProductionCalendar"/>
            <wsdl:input>
                <mime:content type="text/xml" part="QueryProductionCalendar"/>
            </wsdl:input>
            <wsdl:output>
                <mime:content type="text/xml" part="QueryProductionCalendar"/>
            </wsdl:output>
        </wsdl:operation>
    </wsdl:binding>
    <wsdl:service name="FlexisService">
        <soap:address location='http://localhost:8080/axis2/services/FlexisService'/>
    </wsdl:service>
</wsdl:definitions> 
```

有人可以将我推向正确的方向，了解为什么会发生这种情况吗？

# jquery - .on() jquery 不工作

> ID：14221860
> 
> 赞同：-1
> 
> 时间：2013-01-08T18:42:27.140
> 
> 标签：jquery, ajax, dom

> **可能重复：**
> [jQuery - 将 .live() 转换为 .on()](https://stackoverflow.com/questions/10636932/jquery-convert-live-to-on)
> [JQuery 'on' vs. 'live'</a>](https://stackoverflow.com/questions/11007741/jquery-on-vs-live) [在 jQuery 中将 live() 转换为 on()](https://stackoverflow.com/questions/8021436/jquery-1-7-turning-live-into-on)

我知道 .live() 已被弃用，但 .on() 给我带来了一些错误。当我动态生成圆顶时它不起作用，它只在第一次点击时起作用。虽然与 .live() 相同的代码可以正常工作。我正在使用 jquery 1.8

工作代码

```
$('.item').live('click', function(e) {
   alert('test');
   // ajax call that regenerates .item element
}); 
```

此代码仅在第一次单击时有效：

```
$('.item').on('click', function(e) {
   alert('test');
   // ajax call that regenerates .item element
}); 
```

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T18:45:01.610

由于 dom 会随着您的 Ajax 发生变化，因此您需要在随叫随到时提供一个父级，如下所示：

```
$("#itemParent").on("click", ".item", function(event){
  alert('test');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T18:45:43.190

在此处查看[文档](http://api.jquery.com/on/)。`.on`工作方式略有不同：

```
$(document).on("click", ".item", function(event){
    alert('test');
    // ajax call that regenerates .item element
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T18:45:43.207

正如 Kevin B 提到的，使用 document 作为委托的上下文，或者更好的静态父级：

```
$(document).on('click','.item', function(e) {
   alert('test');
   // ajax call that regenerates .item element
}); 
```

# python - 使用 Django 在 South 重新初始化迁移

> ID：14221862
> 
> 赞同：2
> 
> 时间：2013-01-08T18:42:31.587
> 
> 标签：python, django, postgresql, migration, django-south

> **可能重复：**
> [使用 Django South 重置迁移历史的推荐方法是什么？](https://stackoverflow.com/questions/4625712/whats-the-recommended-approach-to-resetting-migration-history-using-django-sout)

我有一个相当老的 Django 应用程序正在运行，它一直在几个开发人员的手中。一些开发人员已经接受了 South，而另一些开发人员则希望手动完成所有迁移，而不是使用 South。

这导致我们的一些（相当多）应用程序具有相当损坏的迁移，因为其中一些可能依赖于曾经存在但不再存在的数据。

这在很多情况下都是一个问题，例如每当我们希望从头开始设置一个新的空白数据库时；我们总是会遇到很多手动工作，最终不得不伪造迁移，直到我们解决问题。

所以问题就变成了：我们如何最有效地重新启动我们所有的迁移，以便我们从头开始，迁移 - 从而确保一切正常（当前的开发人员都使用 South，所以在这方面没有问题了） ?

以下内容是否足够：

*   删除其中的所有迁移文件夹和文件
*   删除我们的 PostgreSQL 数据库中的迁移表
*   进行初始迁移

如果我们删除了开发和生产数据库中的迁移表，这会起作用吗？

# android - Google Analytics (V2) Real-Time 持续向主要活动中的用户报告

> ID：14221868
> 
> 赞同：2
> 
> 时间：2013-01-08T18:42:56.890
> 
> 标签：android, google-analytics

我的应用程序由一个仪表板 (GridView) 组成，其中包含许多引用活动的图标，

每当用户点击一个图标时，他就会被重定向到一个新的活动，但主活动仍然是打开的（只是暂停）

我正在使用谷歌分析 V2。

无论用户在哪里使用应用程序，Google Analytics 中的实时功能都会不断报告用户，就好像他在主要活动中一样。

我尝试将 GA 代码添加到`onPause`，`onResume`但它仍然报告用户在主活动中。

这是我正在使用的代码：

```
 @Override
  public void onStart() {
    super.onStart();
    if(UserFunctions.getGASetting(getBaseContext())){
        EasyTracker.getInstance().activityStart(this); // Add this method.
    }
  }

  @Override
  public void onStop() {
    super.onStop();
    if(UserFunctions.getGASetting(getBaseContext())){
        EasyTracker.getInstance().activityStop(this); // Add this method.
    }
  }

  @Override
  public void onPause() {
    super.onPause();
    if(UserFunctions.getGASetting(getBaseContext())){
        EasyTracker.getInstance().activityStop(this); // Add this method.
    }
  }

  @Override
  public void onResume() {
    super.onPause();
    if(UserFunctions.getGASetting(getBaseContext())){
        EasyTracker.getInstance().activityStart(this); // Add this method.
    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:44:21.393

您是否在您的 analytics.xml 文件中设置`ga_autoActivityTracking`为？`true`请参阅文档，`EasyTracker.activityStart(Activity)`其中说：

> 跟踪 Activity 的开始，但前提是 mIsAutoActivityTracking 为 true。如有必要，此方法将启动一个新会话，如果 mIsAutoActivityTracking 为 false，则将向 Google Analytics 发送一个空事件以确保正确的应用程序级跟踪。

在我看来，它正在发送一个空事件，因为您省略了 ga_autoActivityTracking 或设置为 false。

# xml - 带变量选择的 XSLT 排序

> ID：14221870
> 
> 赞同：1
> 
> 时间：2013-01-08T18:42:57.560
> 
> 标签：xml, sorting, xslt

我有一个 HTML 选择下拉菜单：

```
 <select name="sortby">
                    <option value=""></option>
                    <option value="onenightavg">Price: High to Low</option>
                    <option value="number_bedrooms">Bedrooms: High to Low</option>
                    <option value="number_bathrooms">Bathrooms: High to Low</option>
                    <option value="max_sleeps">Sleeps: High to Low</option>
                </select> 
```

当用户提交它时，它会向页面发送一个 URL 查询字符串，并将其添加到页面的 XML 中：

```
<querystring>
 <sortby>number_bathrooms</sortby>
</querystring> 
```

然后我在我的 XSLT 中设置了一个 XSL 变量：

```
 <xsl:variable name="sortby">
            <xsl:choose>
                <xsl:when test="/querystring/sortby != ''">
                    <xsl:value-of select="/querystring/sortby" />
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="'onenightavg'" />
                </xsl:otherwise>
            </xsl:choose>
        </xsl:variable> 
```

在上面的 XST 中，我设置了一个名为 $sortby 的变量并测试查询字符串是否存在。如果它确实存在，则将变量设置为其值。如果它不存在，则默认为“onenightavg”。

然后我在排序中使用该变量：

```
<xsl:sort data-type="number" order="ascending" select="$sortby" /> 
```

这行不通。它不会对我的项目进行排序，但是当我将选择硬编码为这样的任何一个值时，它可以工作：

```
<xsl:sort data-type="number" order="ascending" select="onenightavg" /> 
```

我希望能够根据下拉列表中所选选项的值动态排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T18:55:46.900

这个怎么样：

```
<xsl:sort data-type="number" order="ascending" select="*[local-name() = $sortby]" /> 
```

# html - 使用 linux 命令行将 HTML 转换为 PDF/PostScript，我该怎么做？

> ID：14221875
> 
> 赞同：0
> 
> 时间：2013-01-08T18:43:12.737
> 
> 标签：html, perl, bash, pdf-generation

我正在开发一个应该从 HTML 生成 PDF 的 Shell 脚本工具。我想将 HTML 转换为 pdf 或 postscript 而无需安装软件包，因为这需要大量的文书工作。有没有简单的方法来实现这一目标？任何无需安装即可下载和使用的 perl 代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T19:23:46.083

[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)通过 WebKit (qtwebkit) 将任何页面转换为 PDF 呈现。包括 CSS 和 JavaScript：

```
wkhtmltopdf http://stackoverflow.com/ stackoverflow.pdf 
```

但是，在“无头”设置（服务器，而不是桌面）上，我建议使用带有官方页面上提供的独立可执行文件的最小 X 服务器：

```
export DISPLAY=:1
Xvfb $DISPLAY &
wkhtmltopdf --use-xserver http://stackoverflow.com/ stackoverflow.pdf 
```

奇迹般有效！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T19:08:40.873

您可以安装 html2ps 和 ps2pdf（都是用户级 perl 脚本）并将 html2ps 的输出通过管道传输到 ps2pdf

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T19:17:02.000

试试[WeasyPrint](http://weasyprint.org/)，这是一个命令行程序，它可以做到这一点，并且对现代 CSS 有很好的支持。它是用 Python 编写的，但这对于从 shell 脚本调用来说无关紧要。

# svn - SVN 分支和子分支技术

> ID：14221877
> 
> 赞同：2
> 
> 时间：2013-01-08T18:43:17.917
> 
> 标签：svn, branching-and-merging

我们最近在我工作的地方引入了功能分支的概念（使用 SVN），我偶然发现了一种我不确定如何处理它的情况。

这是我的情况的图表： ![棘手的情况](../Images/8f758aa4d5ba5f76cf8e00eb7e5cb8fa.png)

图形显示如下：我从主干创建了一个分支 (feature_phase_1)，并在该分支上工作，直到我对我的工作感到满意。然后，由于我们必须在代码返回主干之前对其进行审查，并且由于我需要 feature_phase_1 中的代码才能继续工作，所以我从第一个分支 (feature_phase_1) 创建了一个新分支 (feature_phase_2)。我一直在那个分支上工作，直到在第一个分支上完成代码审查，将我的更改提交到 feature_phase_2，切换到 feature_phase_1，进行请求的更改，提交到分支，然后重新集成合并到主干。

然后我就头疼了。

由于建议不要继续在已重新集成的分支上工作，我想我会用我的两个分支之间的差异制作一个补丁并将其应用到一个新分支（从主干，在重新集成我的 feature_phase_1 分支后） ，并删除当前的 feature_phase_2。但它给了我更多的冲突，超出了我的预期。

我在某处读到也不建议从分支创建分支。我现在明白为什么了，因为我不知道如何处理里面的东西。我设法应用补丁和编辑冲突，但它很混乱，而且在这个过程中有些东西滑倒了。

**对于这种情况，建议的方法是什么，可以最大限度地减少冲突风险和手动处理合并过程？**这是我看到的：

*   从主干而不是从分支创建一个 feature_phase_2，将 feature_phase_1 的更改合并到 feature_phase_2，然后随着事情的发展继续从主干合并（我预计在重新集成 feature_phase_1 后会发生冲突）。![例子](../Images/4398907b078559b1749239b9e78ec02e.png)
*   继续使用 feature_phase_2 并在重新集成 feature_phase_1 后从主干合并，然后将 feature_phase_2 重新集成到主干（有点像[这里](https://stackoverflow.com/questions/8665878/svn-branch-of-a-branch)描述的内容）。这种技术在我看来有点不干净，因为你必须从一个分支分支，然后重新整合*两个级别*。
*   ??

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:02:57.703

为了你的照片。1（原始工作流程）更好（我想）选择可以是：

将 feature_phase_1 合并到 feature_phase_2 而不是将主干合并到 phase_2 （phase_1-239 将是 phase_2-241 而不是 trunk-240 的父级），然后将 phase_2 合并到主干

# python - 如何设置 TCP 套接字的初始序列号

> ID：14221882
> 
> 赞同：1
> 
> 时间：2013-01-08T18:43:22.860
> 
> 标签：python, c, sockets, tcp

作为测试的一部分，我需要能够将 TCP 连接的 ISN（初始序列号）初始化为特定值。通常这是操作系统/网络堆栈选择的随机值，但我需要控制初始值。

有没有办法在 C 或 Python 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:25:47.360

*   下载[lwip](http://git.savannah.gnu.org/cgit/lwip.git)和[lwip-contrib](http://git.savannah.gnu.org/cgit/lwip/lwip-contrib.git)。
*   创建一个新的tap接口并用你的普通网卡桥接它
*   构建`lwip-contrib/ports/unix/proj/minimal`应用程序并运行它
*   现在你应该可以 ping lwip 堆栈了
*   TCP 序列号在`struct tcp_pcb`, 值`rcv_nxt`和`snd_nxt`
*   破解 TCP 代码以不随机化这些值，并向`minimal`应用程序添加 TCP 连接

# java - 如何在 Android 中创建一个允许与下面的窗口交互的系统覆盖？

> ID：14221892
> 
> 赞同：0
> 
> 时间：2013-01-08T18:43:47.047
> 
> 标签：java, android, overlay

正如在这个应用程序中看到的那样，我想创建一个应用程序，通过创建一个阴影覆盖来使屏幕变暗。

窗口已创建，它是部分透明的，但是，我无法启动它下面的应用程序。我可以单击它们，然后看到按钮被按下，但是在我的运行时其他应用程序无法启动。

建议？

我在下面附上了我的代码，以及一个已经在执行此操作的应用程序示例。

```
final WindowManager.LayoutParams params = new WindowManager.LayoutParams( 
    WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY,
    WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN |
    WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE | 
    WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE | 
    WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL |
    WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH,
    PixelFormat.TRANSLUCENT);   

    WindowManager wm = (WindowManager) getApplicationContext().getSystemService(Context.WINDOW_SERVICE);    

    LayoutInflater inflater = (LayoutInflater)   getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
    ViewGroup mTopView = (ViewGroup) inflater.inflate(R.layout.activity_black, null);
    getWindow().setAttributes(params);
    wm.addView(mTopView, params); 
```

[https://play.google.com/store/apps/details?id=com.haxor](https://play.google.com/store/apps/details?id=com.haxor)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T09:32:48.963

这是一个简单的方法：

```
Dialog dialog = new Dialog(this,android.R.style.Theme_DeviceDefault_Dialog_NoActionBar_MinWidth);
dialog.getWindow().setType(WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY);

dialog.getWindow().setFormat(PixelFormat.TRANSLUCENT);
dialog.getWindow().setDimAmount(0);
dialog.setContentView(new EditText(this));
dialog.show(); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-10T12:56:42.520

将Activity修改为设置，并将黑化组件移至服务，效果很好。

# php - 无法在 PHP 中上传文件

> ID：14221893
> 
> 赞同：-2
> 
> 时间：2013-01-08T18:43:54.480
> 
> 标签：php

下面是我的代码：

```
<?php
$name = $_FILES["file"]["name"];
$temp = $_FILES["file"]["temp"];
if(isset($name))
{
if(!empty($name))
{
$location= "upload/";
if(move_uploaded_file($temp, $location.$name))
{
echo "Uploaded!!!";
}
else
{
echo "Error:";
}
}
else
{
echo "Please choose a file to upload";
}
}
?>
<form action= "upload.php" method="POST" enctype="multipart/form-data">
<input type="file" name="file" ><br><br>
<input type="Submit" value="Submit" >
</form> 
```

每当我运行此代码时，我都会遇到错误，请协助。我是 PHP 新手，需要尽快学习。提前致谢。

> 注意：未定义的索引：第 3 行 C:\xampp\htdocs\testfolder\upload.php 中的 temp。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T18:46:30.567

`$temp = $_FILES["file"]["temp"];`应该`$temp = $_FILES["file"]["tmp_name"];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:49:58.070

它是 $_FILES["file"]["tmp_name"];

提示：执行 $_FILES 变量的 var_dump 以查看它包含的内容。var_dump($_FILES); 这会给你答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T18:50:32.840

在尝试将它们从数组中拉出*之前*，您应该检查是否设置了这些值。以及使用`tmp_name`而不是`temp`mpaepper 指出。

```
<?php
if(
    isset($_FILES["file"]["name"]) && !empty($_FILES["file"]["name"]) 
    && isset($_FILES["file"]["tmp_name"]) && !empty($_FILES["file"]["tmp_name"])
) {
    $name = $_FILES["file"]["name"];
    $temp = $_FILES["file"]["tmp_name"];
    $location= "upload/";
    if(move_uploaded_file($temp, $location.$name)) {
        echo "Uploaded!!!";
    } else {
        echo "Error:";
    }
} else {
    echo "Please choose a file to upload";
}
?>
<form action= "upload.php" method="POST" enctype="multipart/form-data">
<input type="file" name="file" ><br><br>
<input type="Submit" value="Submit" >
</form> 
```

# c# - 将 log4net 日志作为 System.Net.Mail.Attachment 通过电子邮件发送会引发 IOException（进程锁定）

> ID：14221896
> 
> 赞同：7
> 
> 时间：2013-01-08T18:44:13.703
> 
> 标签：c#, .net, email-attachments, system.net.mail

我想将当前`log4net`日志作为电子邮件附件发送，`System.Net.Mail.Attachment`但是当我传入文件路径时`IOException`会抛出一个。

```
Attachment mailAttachment = new Attachment(logPath); 
```

> *该进程无法访问文件“C:\Log\log4net.log”，因为它正被另一个进程使用*

appender 配置如下所示：

```
<appender name="RootRollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
    <param name="File" value="C:\Log\log4net.log" />
    <param name="AppendToFile" value="true" />
    <param name="MaxSizeRollBackups" value="10" />
    <param name="MaximumFileSize" value="10024KB" />
    <param name="RollingStyle" value="Size" />
    <param name="StaticLogFileName" value="true" />
    <layout type="log4net.Layout.PatternLayout">
        <param name="ConversionPattern" value="%date [%username|%thread] %-5level %logger: %message%newline" />
    </layout>
</appender> 
```

有没有办法解决这个问题？我可以复制日志文件或以某种方式将其从锁定过程中释放吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-08T18:49:21.940

```
<appender name="FileAppender" type="log4net.Appender.FileAppender">
    <file value="${TMP}\log-file.txt" />
    <appendToFile value="true" />
    <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
    <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
    </layout>
</appender> 
```

using`<lockingModel type="log4net.Appender.FileAppender+MinimalLock" />`将告诉 log4net 在执行实际写入时仅将文件锁定一小段时间。有轻微的性能损失，但允许您更轻松地执行诸如将其添加为附件之类的操作。

否则 log4net 将在进程运行时无限期地锁定文件。

# javascript - 引用一个函数（例如，在 Javascript 中）是什么意思？

> ID：14221897
> 
> 赞同：-1
> 
> 时间：2013-01-08T18:44:13.607
> 
> 标签：javascript

在 Head First Ajax 中，他们给出了以下示例：

```
function getDetails(itemName) {
  request = createRequest();
  if (request == null) {
    alert("Unable to create request");
    return;
  }
  var url= "getDetails.php?ImageID=" + escape(itemName);
  request.open("GET", url, true);
  request.onreadystatechange = displayDetails;//This references the function below
  request.send(null);
}

function displayDetails() {
  if (request.readyState == 4) {
    if (request.status == 200) {
      detailDiv = document.getElementById("description");
      detailDiv.innerHTML = request.responseText;
    }
  }
} 
```

我很好奇是什么样的建筑`request.onreadystatechange = displayDetails;`。书中说“这是对函数的引用，而不是函数调用”。但是我不明白这**真正**意味着什么。我想它将`displayDetails`函数分配给 object `request.onreadystatechange`，但我不明白为什么或何时使用这种构造。

例如，使用这种结构而不是做类似的事情有什么好处：

```
request.onreadystatechange = function () {
  if (request.readyState == 4) {
    if (request.status == 200) {
      detailDiv = document.getElementById("description");
      detailDiv.innerHTML = request.responseText;
    }
  }
} 
```

另外，这是函数式语言特性的一个例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:49:26.710

> I'm curious what kind of construction is request.onreadystatechange = displayDetails;. The book says that "this is a reference to a function, not a function call". However I don't understand what this really means.

Essentially this means that your assigning a pre-defined, named function as the event handler for the particular event (in this case readystatechange).

You could also assign an anonymous function depending on your needs:

```
request.onreadystatechange = function () {
    if (request.readyState == 4) {
        if (request.status == 200) {
            detailDiv = document.getElementById("description");
            detailDiv.innerHTML = request.responseText;
        }
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T18:49:43.573

Yes, that's an example of a functional language feature. Functions are first-class citizens on those languages, meaning they can also be passed around, assigned to variables, etc.

About your question on `eventhandler = function () { }` versus `eventhandler = somefunc`, you said:

> I suppose it assigns the `displayDetails` function to the object `request.onreadystatechange`, but I don't understand why or when to use this construction

The `request` object has a property called `onreadystatechange`, which represents an event handler function that should be called when the request's `readyState` property changes. That's why the book said it's not a function call, but a reference assignment. You're not calling the function when you assign it to `request.onreadystatechange`, it will be called only when that event happens. Clicks and all other events work like that (they're basically *asynchronous*).

It makes sense to use a function reference instead of an anonymous function assigment if you want to use the same handler for more than one event. For example, if you have two "save" buttons on two different parts of a web page, you can assign the same handler function to their click events.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T18:49:50.890

You have declared a function called `displayDetails`. If you ignore the `function` syntax for a moment, what' you're actually doing is creating an object, almost like `var displayDetails = something`. When you are assigning the `onreadystatechange` you are actually assigning a function to it, not a *call to* the function. This means `request.onreadystatechange` and `function displayDetails()...` are the same *reference*. Calling `request.onreadystate()` is the same as calling `displayDetails()`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T18:49:55.363

The advantage is that you can use `displayDetails` elsewhere, for example as a `onreadystatechange` callback for another AJAX request.

If there's only one place where this specific callback is used (which is often the case), it's probably more clear to use an anonymous function expression. That way, you keep the creation and the handling of the request in the same place.

On another note, if the `displayDetails` function is not nested in another function's scope (such as `(function() { ... })()`, it will pollute the global scope.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-08T18:52:50.870

> I suppose it assigns the displayDetails function to the object request.onreadystatechange

Precisely. Functions are first class variables in Javascript and can be passed around and stored in variables, just like objects and numbers. In fact, functions don't really have names and when you access them you are just accessing them via a variable. That is, something like

```
function f() { } 
```

Is actually kind of syntax sugar for

```
var f = function(){ } 
```

> but I don't understand why or when to use this construction.

Functions serve the same sort of roles as objects (in the object-orientation sense), specially if you close them over some internal state. In cases in an OO language where you would pass something an object with a single `doStuff` or `call` method you could instead pass a function instead.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-08T18:54:13.537

Your two code examples are equivalent in the terms you are using. A function is sitting somewhere in memory. If we take a reference to that memory location (that address) and store it somewhere, we can run that function from that stored reference. (Note that in Javascript this explanation is more of an analogy that what is really happening. In some languages, its the way it really works.)

In the first bit of code, the reference to the function is stored in something named "displayDetails". That's the global scope variable that is a possible coding issue. But it is valid. Note also that that reference gets copied into "request.onreadystatechange" as well.

In the second bit of code, the reference to the function is stored in "request.onreadystatechange"

Either way, the function gets run when the request is being processed to check whether the result has come back or not.

# javascript - 在 IE 9 调试器中显示控制台语句的行号

> ID：14221898
> 
> 赞同：5
> 
> 时间：2013-01-08T18:44:19.330
> 
> 标签：javascript, console, internet-explorer-9, ie-developer-tools

我希望这很简单。我在 IE 9 中使用 F12 开发工具调试器。有没有办法可以显示每个控制台语句的行号和文件源，就像 Firebug 显示此信息的方式一样？我可能忽略了一些基本的东西，但我还没有找到一种方法来做到这一点..谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-26T23:55:48.817

获取行号的唯一方法是定义一个[window.onerror](http://dev.opera.com/articles/view/better-error-handling-with-window-onerror/)方法：

```
window.onerror = function (message, url, lineNo)
  {
  console.log('Error: ' + message + '\n' + 'Line Number: ' + lineNo);

  return true;
  }

console.log(window);
console.log(1=2); 
```

但即便如此，IE 也会因错误而中断，所以它相当无用。

# linux - .Net Window 服务等效于 linux？

> ID：14221903
> 
> 赞同：0
> 
> 时间：2013-01-08T18:45:09.757
> 
> 标签：linux, service

我们可以挂钩到类似的开始、停止等事件吗？我们必须将它们编写为 shell 脚本吗？我知道.NET 的单端口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:11:05.403

您正在寻找一种叫做“初始化脚本”的东西。这些脚本允许您使用单个命令启动或停止服务，如下所示：

```
service httpd restart
service httpd stop
service httpd start 
```

一些 Linux 发行版不包含该`service`命令，在这种情况下，您可以直接通过它们的位置访问 init 脚本`/etc/init.d`，就像这样。

```
/etc/init.d/mysqld restart 
```

您可以对初始化脚本进行编程以接受您想要的任何参数（启动、停止、重新启动等）。可以在以下网页中找到一些有关编写初始化脚本以帮助您入门的基本教程：

[http://www.cyberciti.biz/tips/linux-write-sys-v-init-script-to-start-stop-service.html](http://www.cyberciti.biz/tips/linux-write-sys-v-init-script-to-start-stop-service.html)
[http://www.linuxquestions.org/questions/programming-9/how -to-write-init-script-376302/](http://www.linuxquestions.org/questions/programming-9/how-to-write-init-script-376302/)

很多时候初始化脚本是不必要的，您可以选择在后台执行程序并手动终止它的更简单的选项。在后台运行 Linux 上的可执行文件可以这样完成：

```
./some_prog arg1 arg2 & 
```

杀死它是这样完成的：

```
kill `pgrep some_prog` 
```

如果您对 Linux 相当陌生，那么在您掌握初始化脚本和一般 Linux 服务生态系统之前，后一种选择可能是一种更容易的方法。

# python - Python 从 dict 变成字符串

> ID：14221904
> 
> 赞同：0
> 
> 时间：2013-01-08T18:45:09.753
> 
> 标签：python

我想从某事中获取数据，我有代码，但我想更改获取数据的方式，以在一行上进行字符串处理。

**代码：**

```
def getBasicPlayers(self): # Finished
        """Returns a list containing a dictionary for each player:
        [
            {
                'name' : string,
                'score' : integer,
            },
            {
                'name' : string,
                'score' : integer,
            },
        ]
        Note: This will return an empty list if the player count is above 100."""
        packet = self.assemblePacket("c")
        self.send(packet)

        reply = self.receive()
        reply = reply[11:] # Clean up bytes
        players = []

        strLen = struct.unpack("<h", reply[0:2])
        playerCount = strLen[0]

        reply = reply[2:] # Clean up bytes

        for i in range(playerCount):
            players.append({'name' : '', 'score' : 0})

        pointer = 0

        for player in players:
            strLen = ord(reply[pointer:(pointer + 1)])

            name = reply[(pointer + 1):(pointer + (strLen + 1))]

            temp = struct.unpack("<i", reply[(pointer + (strLen + 1)):(pointer + (strLen + 5))])
            pointer += (strLen + 5)

            player['name'] = name
            player['score'] = temp[0]

        return players 
```

我收到信息，但我没有得到我想要的信息。现在是这样的：

> 玩家 1 (1)
> 
> 玩家 2 (15)
> 
> 玩家 3 (20)

我想让它像：

> 播放器 1 (1)、播放器 2 (15)、播放器 3(20)

实际返回信息的文件：

```
query.connect() 
    basicPlayers = query.getBasicPlayers() 

    if basicPlayers: # If the server has players online
        for player in basicPlayers:
            return str(player['name'])+" "+str(player['score'])
    else:
        return "No players" 
```

如果可能的话，有人可以转换代码吗？任何帮助将不胜感激！

编辑：

这就是整个查询文件，因为我注意到如果我只发布 getBasicPlayers() 它将不起作用：

```
import socket
import struct

class SampQuery:

    def __init__(self, sock=None, server="127.0.0.1", port=7777):
        if sock is None:
            self.serverVars = [server, port]
        else:
            self.sock = sock

    def connect(self):
        try:
            self.serverVars[0] = socket.gethostbyname(self.serverVars[0])
            socket.setdefaulttimeout(2)
            self.sock = socket.socket(
                socket.AF_INET, socket.SOCK_DGRAM) # Internet and UDP
        except socket.gaierror:
            return False

        packet = self.assemblePacket("p0101")

        try:
            self.send(packet)

            reply = self.receive()[10:]

            if reply == 'p0101':
                return True
            else:
                return False
        except socket.timeout:
            return False

    def send(self, msg):
            self.sock.sendto(msg, (self.serverVars[0], self.serverVars[1]))

    def receive(self, buffer=1024):
        msg = self.sock.recv(buffer)
        return msg

    def close(self):
        self.sock.close()

    def getInfo(self): # Finished
        """Returns a dictionary containing server information:
        {
            'password' : integer,
            'players' : integer,
            'maxplayers' : integer,
            'hostname' : string,
            'gamemode' : string,
            'mapname' : string,
        }"""
        packet = self.assemblePacket("i")
        self.send(packet)

        reply = self.receive()

        reply = reply[11:]

        serverInfo = {'password' : 0, 'players' : 0, 'maxplayers' : 0, 'hostname' : "", 'gamemode' : "", 'mapname' : ""}

        serverInfo['password'] = ord(reply[0:1])

        players = struct.unpack("<h", reply[1:3])

        serverInfo['players'] = players[0];

        maxPlayers = players = struct.unpack("<h", reply[3:5])

        serverInfo['maxplayers'] = maxPlayers[0];

        reply = reply[5:] # Clean up bytes

        strLen = struct.unpack("<i", reply[0:4])

        serverInfo['hostname'] = reply[4:(strLen[0]+4)]

        reply = reply[(strLen[0]+4):] # Clean up bytes

        strLen = struct.unpack("<i", reply[0:4])

        serverInfo['gamemode'] = reply[4:(strLen[0]+4)]

        reply = reply[(strLen[0]+4):] # Clean up bytes

        strLen = struct.unpack("<i", reply[0:4])

        serverInfo['map'] = reply[4:(strLen[0]+4)]

        return serverInfo

    def getBasicPlayers(self): # Finished
        """Returns a list containing a dictionary for each player:
        [
            {
                'name' : string,
                'score' : integer,
            },
            {
                'name' : string,
                'score' : integer,
            },
        ]
        Note: This will return an empty list if the player count is above 100."""
        packet = self.assemblePacket("c")
        self.send(packet)

        reply = self.receive()
        reply = reply[11:] # Clean up bytes
        players = []

        strLen = struct.unpack("<h", reply[0:2])
        playerCount = strLen[0]

        reply = reply[2:] # Clean up bytes

        for i in range(playerCount):
            players.append({'name' : '', 'score' : 0})

        pointer = 0

        for player in players:
            strLen = ord(reply[pointer:(pointer + 1)])

            name = reply[(pointer + 1):(pointer + (strLen + 1))]

            temp = struct.unpack("<i", reply[(pointer + (strLen + 1)):(pointer + (strLen + 5))])
            pointer += (strLen + 5)

            player['name'] = name
            player['score'] = temp[0]

        return players

    def getDetailedPlayers(self): # Finished
        """Returns a list containing a dictionary for each player:
            [
                {
                    'id' : integer,
                    'name' : string,
                    'score' : integer,
                    'ping' : integer,
                },
                {
                    'id' : integer,
                    'name' : string,
                    'score' : integer,
                    'ping' : integer,
                },
            ]
            Note: This will return an empty list if the player count is above 100."""
        packet = self.assemblePacket("d")
        self.send(packet)

        reply = self.receive()
        reply = reply[11:] # Clean up bytes
        players = []

        strLen = struct.unpack("<h", reply[0:2])
        playerCount = strLen[0]

        reply = reply[2:] # Clean up bytes

        for i in range(playerCount):
            players.append({'id' : 0, 'name' : '', 'score' : 0, 'ping' : 0})

        pointer = 0

        for player in players:
            id = ord(reply[pointer:(pointer + 1)])

            strLen = ord(reply[(pointer + 1):(pointer + 2)])

            name = reply[(pointer + 2):(pointer + (strLen + 2))]

            score = struct.unpack("<i", reply[(pointer + (strLen + 2)):(pointer + (strLen + 6))])

            ping = struct.unpack("<i", reply[(pointer + (strLen + 6)):(pointer + (strLen + 10))])

            pointer += (strLen + 10)

            player['id'] = id
            player['name'] = name
            player['score'] = score[0]
            player['ping'] = ping[0]

        return players

    def getRules(self): # Finished
        """Returns a list containing a dictionary for each rule:
        [
            {
                'rule' : string,
                'value' : integer,
            },
            {
                'rule' : string,
                'value' : integer,
            },
        ]"""
        packet = self.assemblePacket("r")
        self.send(packet)

        reply = self.receive()
        reply = reply[11:] # Clean up bytes
        rules = []

        strLen = struct.unpack("<h", reply[0:2])
        ruleCount = strLen[0]

        reply = reply[2:] # Clean up bytes

        for i in range(ruleCount):
            rules.append({'rule' : '', 'value' : ''})

        pointer = 0

        for rule in rules:
            strLen = ord(reply[pointer:(pointer + 1)])

            name = reply[(pointer + 1):(pointer + (strLen + 1))]

            strLenVal = ord(reply[(pointer + (strLen + 1)):(pointer + (strLen + 2))])

            value = reply[(pointer + (strLen + 2)):(pointer + ((strLen + strLenVal) + 2))]

            pointer += ((strLen + strLenVal) + 2)

            rule['rule'] = name
            rule['value'] = value

        return rules

    def assemblePacket(self, type):
        ipSplit = str.split(self.serverVars[0], '.')

        packet = 'SAMP'
        packet += chr(int(ipSplit[0]))
        packet += chr(int(ipSplit[1]))
        packet += chr(int(ipSplit[2]))
        packet += chr(int(ipSplit[3]))
        packet += chr(self.serverVars[1] & 0xFF)
        packet += chr(self.serverVars[1] >> 8 & 0xFF)
        packet += type

        return packet 
```

编辑2：

```
query.connect() # If the program has made a successful connection to the server
    basicPlayers = query.getBasicPlayers() # Returns False if no players are online
    if basicPlayers:
        return ", ".join(("{0} {1}".format(basicPlayers['name'], basicPlayers['score']))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T18:52:15.043

我不确定这是什么代码或它是如何工作的，就像你说的那样：

```
for player in basicPlayers:
    return #anything 
```

当您返回时，它应该停止执行该函数。如果您使用的是`yield`，我希望看到该输出，具体取决于您调用该函数的方式。

但是，您可以轻松更改该部分以加入生成器表达式。我还包括字符串格式：

```
if basicPlayers:
    return ", ".join(("{0} {1}".format(player['name'], player['score']))) 
```

哪个应该做你所追求的。

# php - 如何使用 PHP 发出简单的 SAML 请求？

> ID：14221905
> 
> 赞同：5
> 
> 时间：2013-01-08T18:45:10.823
> 
> 标签：php, request, authorization, token, saml

我以前使用过很多 PHP，但我从未使用过 SAML，因为我从来不需要连接到远程服务器。几天来我一直在阅读各种教程、帖子和示例，但我仍然无处可去。我已阅读：

*   [加州大学圣巴布拉分校 SAML 讲座](http://www.cs.ucsb.edu/~bultan/courses/595-W06/SAML.pdf)
*   [OneLogin 示例和指南](https://onelogin.zendesk.com/entries/268420-saml-toolkit-for-php)
*   [SAML 上的维基](http://en.wikipedia.org/wiki/SAML_2.0#Authentication_Request_Protocol)
*   [关于 Auth Tokens 的 Rackspace 指南](http://docs.rackspace.com/loadbalancers/api/v1.0/clb-getting-started/content/Generating_Auth_Token.html)
*   [Fiede RnD 示例](https://rnd.feide.no/2007/12/10/example_saml_2_0_request_and_response/)
*   [SAML 和 PHP 入门](https://stackoverflow.com/questions/2094136/getting-started-with-saml-and-php)

但仍然没有成功。我认为当我阅读 Onelogin、SimpleSAMLphp 和 Shibboleth 时，我觉得自己来错地方了，因为我觉得下载和解压大文件，因为堆栈将是服务提供商的……在这种情况下，我是身份提供商我认为这就像制作一些 xml 并将其发送出去一样简单；并寻找回应。不需要这些大量的代码，但也许我错了。

当我查看 xml 时，大部分都是有道理的。例如：

```
<saml:Assertion
Version="2.0"
ID=“_34234se72”
IssueInstant="2005-04-01T16:58:33.173Z">
 <saml:Issuer>http://authority.example.com/</saml:Issuer>
 <ds:Signature>...</ds:Signature>
 <saml:Subject>
     <saml:NameID format="urn:oasis:names:tc:SAML:2.0:nameid-format:persistent">
        jygH5F90l
    </saml:NameID>
 </saml:Subject>
  <saml:AuthnStatement
      AuthnInstant="2005-04-01T16:57:30.000Z">
        <saml:AuthnContext>
          <saml:AuthnContextClassRef>
            urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport
          </saml:AuthnContextClassRef>
        </saml:AuthnContext>
   </saml:AuthnStatement>
</saml:Assertion> 
```

我想我理解将“jygH5F901”作为“NameID”发送的过程，但行 urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport 对我来说几乎没有意义。有人可以为我指出一个关于如何开始或至少在正确方向上的好指南。

我需要做的就是：

1.  获取授权令牌
2.  将授权令牌交换为访问令牌。
3.  使用该访问令牌从服务提供商数据库获取信息。

任何帮助将不胜感激; 我对 SAML 完全陌生，所以我可能听起来很愚蠢；但是，如果任何人都可以将我链接到解释结构并具有更多复制粘贴友好工作的详尽指南或示例。我只需要获得该连接，然后导入数据，然后一旦我可以掌握这些返回的变量，所有 PHP 的东西就很容易了。谢谢你的时间; 任何努力都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:25:35.407

SAML 相当复杂，如果您要手动生成 XML，我强烈建议您阅读 SAML 并查看规范。我建议先查看规范中的技术概述。

规格：[http](http://saml.xml.org/saml-specifications)
://saml.xml.org/saml-specifications 技术概述：[https ://www.oasis-open.org/committees/download.php/27819/sstc-saml-tech-overview-2.0-cd- 02.pdf](https://www.oasis-open.org/committees/download.php/27819/sstc-saml-tech-overview-2.0-cd-02.pdf)

我警告您，手动执行此操作并正确执行可能需要大量工作。我建议为此目的使用应用程序设计，例如[shibboleth](https://shibboleth.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-23T16:28:14.813

如果你要去**IDP**那么请参考这个文档，我已经完成了与**LIGHTSAML**库的连接。

图书馆参考资料——

1.  [https://www.lightsaml.com/LightSAML-Core/Cookbook/](https://www.lightsaml.com/LightSAML-Core/Cookbook/)
2.  [https://www.lightsaml.com/LightSAML-Core/Cookbook/How-to-send-SAML-message/](https://www.lightsaml.com/LightSAML-Core/Cookbook/How-to-send-SAML-message/)
3.  [https://www.lightsaml.com/LightSAML-Core/Cookbook/How-to-make-Response/](https://www.lightsaml.com/LightSAML-Core/Cookbook/How-to-make-Response/)

**注意：-请仅参考此文档，确保您与****sp** 共享您的公钥以进行识别。

# vbscript - VBScript 启动网站登录

> ID：14221907
> 
> 赞同：4
> 
> 时间：2013-01-08T18:45:15.250
> 
> 标签：vbscript

我在网上找到了这个脚本，我编辑了大部分。

它可以在其下输入用户名和密码，但无法单击登录。

请帮我修复 **这里是登录论坛。**

```
http://desistream.tv/en/index.shtml 
```

**这是目前在 IE 中的脚本**，但我需要在 Google Chrome 中打开它。

```
WScript.Quit Main

Function Main
  Set IE = WScript.CreateObject("InternetExplorer.Application", "IE_")
  IE.Visible = True
  IE.Navigate "http://desistream.tv/en/index.shtml"
  Wait IE
  With IE.Document
    .getElementByID("login_username").value = "myusername"
    .getElementByID("login_password").value = "mypassword"
    .getElementByID("form").submit
  End With
End Function

Sub Wait(IE)
  Do
    WScript.Sleep 500
  Loop While IE.ReadyState < 4 And IE.Busy 
  Do
    WScript.Sleep 500
  Loop While IE.ReadyState < 4 And IE.Busy 
End Sub

Sub IE_OnQuit
  On Error Resume Next
  WScript.StdErr.WriteLine "IE closed before script finished."
  WScript.Quit
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T19:01:26.757

这是...

```
Call Main

Function Main
    Set IE = WScript.CreateObject("InternetExplorer.Application", "IE_")
    IE.Visible = True
    IE.Navigate "http://desistream.tv/en/index.shtml"
    Wait IE
    With IE.Document
        .getElementByID("username").value = "myusername"
        .getElementByID("pass").value = "mypassword"
        .getElementsByName("frmLogin")(0).Submit
    End With
End Function

Sub Wait(IE)
  Do
    WScript.Sleep 500
  Loop While IE.ReadyState < 4 And IE.Busy
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T18:47:52.320

如果您查看页面源代码，您会看到实际的`<form>`标签被称为`frmLogin`，而不是`login`。

# linux - 如何避免 cd 到没有访问权限的目录

> ID：14221916
> 
> 赞同：1
> 
> 时间：2013-01-08T18:46:18.073
> 
> 标签：linux, bash, unix, csh

我有一个数组变量，其中包含文件夹中的所有目录。我需要 cd 到 $array 中的每个目录。bt 当它到达一个不可访问的目录时，程序停止。我怎样才能避免这种情况，以便我的循环简单地转到下一个目录。代码是

```
foreach dir ($array) 
  cd $dir
  echo "directory is $dir" 
cd - end 
```

请帮忙 ！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T18:49:17.643

只需测试 cd 是否有效。

```
( if cd $dir 2> /dev/null; then
   echo in directory $dir
   # Do other things
fi ) 
```

另外，请注意括号。这些导致整个子句在子shell中运行，因此无需 cd 回到原始位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:50:22.907

如果我没记错的话，你可以使用类似的东西

```
if [ -r ${dir} ]
then
  echo "Have read access!"
fi 
```

您可以`-w`用于测试写访问和`-x`测试执行位。

# windows - Win32资源文件多种翻译

> ID：14221918
> 
> 赞同：6
> 
> 时间：2013-01-08T18:46:22.673
> 
> 标签：windows, winapi, mingw

我想为我的项目使用资源脚本。该项目是使用 MinGW 编译的。

资源.rc：

```
#include <windows.h>
VS_VERSION_INFO VERSIONINFO
FILEVERSION     1,0,0,0
PRODUCTVERSION  1,0,0,0
//FILEFLAGSMASK   VS_FFI_FILEFLAGSMASK
//FILEFLAGS       VER_PRIVATEBUILD
FILEOS          VOS_NT_WINDOWS32
FILETYPE        VFT_APP
FILESUBTYPE     VFT2_UNKNOWN
BEGIN
    BLOCK "StringFileInfo"
    BEGIN
        BLOCK "040904E4"
        BEGIN
            //VALUE "Comments",         ""
            VALUE "CompanyName",      "Company"
            VALUE "FileDescription",  "Test for the resource.rc"
            VALUE "FileVersion",      "1.0"
            VALUE "InternalName",     "ResourceTest"
            //VALUE "LegalCopyright",   ""
            //VALUE "LegalTrademarks1", ""
            //VALUE "LegalTrademarks2", ""
            VALUE "OriginalFilename", "ResourceTest.exe"
            VALUE "PrivateBuild",     "Built by me." //With VS_FF_PRIVATEBUILD
            VALUE "ProductName",      "resource.rc Test"
            VALUE "ProductVersion",   "1.0"
        END
    END

    BLOCK "VarFileInfo"
    BEGIN
        /* The following line should only be modified for localized versions.     */
        /* It consists of any number of WORD,WORD pairs, with each pair           */
        /* describing a language,codepage combination supported by the file.      */
        /*                                                                        */
        /* For example, a file might have values "0x409,1252" indicating that it  */
        /* supports English language (0x409) in the Windows ANSI codepage (1252). */
        VALUE "Translation", 0x407, 1252 //German
        VALUE "Translation", 0x409, 1252 //U.S. English

    END
END 
```

我使用它编译它`windres -o Resource.o resource.rc`并将其与`gcc -mwindows -o Resourcetest.exe Launcher.o Resource.o`. 我的控制台输出：

```
windres -o Resource.o resource.rc
windres: resource.rc:39: syntax error
make: *** [Resource.o] Error 1 
```

第 39 行是第二个翻译行：`VALUE "Translation", 0x409, 1252`. 但参考[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381057%28v=vs.85%29.aspx)这是正确的。但是出了什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T21:02:33.397

块中不能有多`VALUE "Translation"`行`VarFileInfo`。相反，正如评论所说，你必须有一个包含一个或多个 WORD,WORD 对的单行。

例如，

```
VALUE "Translation", 0x407, 1252, 0x409, 1252 
```

# asp.net - 在电子邮件中发送模板失败

> ID：14221919
> 
> 赞同：1
> 
> 时间：2013-01-08T18:46:22.883
> 
> 标签：asp.net, html, email-templates

在 asp.net 中，我试图在电子邮件中发送模板，所以当用户从我的网站收到消息时，它将在模板中，

例如，当 FB 通过邮件向您发送通知时，它也有页眉和页脚，所以我想这样做，我试过但它没有在电子邮件正文中发送任何模板

代码：

```
MailDefinition mailDefinition = new MailDefinition();
                mailDefinition.BodyFileName = "emailBody.htm";
                mailDefinition.From = "hunain.hafeez@gmail.com";

                MailMessage message = new MailMessage();
                message.From = new MailAddress(user_email);
                message.To.Add(new MailAddress(email));
                message.Subject = "Registration";
                message.IsBodyHtml = true;

                message.Body = "Congrats" + " " + userName + " " + " You have been shortlisted for interview. Please appear on " + " " + date +", "+time+" "+ "for interview";

                SmtpClient objClient = new SmtpClient("smtp.gmail.com", 587);
                objClient.EnableSsl = true;

                objClient.Credentials = new System.Net.NetworkCredential("hunain.hafeez", "*******"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:05:04.970

**简短回答：**为了快速修复，请使用[**HTML 标记模板**](http://www.coderewind.com/article/how-to-send-emails-using-html-templates-in-asp-net/)，但更灵活的解决方案是带有电子邮件模板的**Razor 。**

关于如何实现这一点有不同的方法。但是，我偶然发现了一篇关于如何将 Razor 与电子邮件模板一起使用的文章。Razor 是使用 ASP.NET MVC 3 推送的，但使用 Razor 不需要 MVC。这是做电子邮件模板的非常巧妙的处理

正如文章指出的那样，“Razor 的最佳之处在于，与它的前身（webforms）不同，它不与 web 环境绑定，我们可以轻松地将它托管在 web 之外并将其用作模板引擎用于各种目的。”

[将 Razor 用于 ASP.NET MVC 之外的电子邮件模板](http://kazimanzurrashid.com/posts/use-razor-for-email-template-outside-asp-dot-net-mvc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:48:30.357

您的邮件正文需要包含 HTML 标记。

IE：

```
<html><body><b>Congrats .... 
```

# xcode - 双击以使用 UIScrollView 进行缩放

> ID：14221923
> 
> 赞同：2
> 
> 时间：2013-01-08T18:46:35.023
> 
> 标签：xcode, uiscrollview, zooming, uigesturerecognizer

我正在使用 Apple 的源代码。我确信只有一个片段我搞砸了。我有一个以编程方式制作的表格。当我双击识别器触发并完成动作但我实际上不会缩放。有什么建议么？谢谢您的帮助

```
imageScrollView.delegate=self;

CGRect fullScreenRect=[[UIScreen mainScreen] applicationFrame];
imageScrollView=[[UIScrollView alloc]initWithFrame:fullScreenRect];
imageScrollView.contentSize=CGSizeMake(750,1250);
imageScrollView.minimumZoomScale=1.0;
imageScrollView.maximumZoomScale=5.0;
[imageScrollView setZoomScale:imageScrollView.minimumZoomScale];
self.view=imageScrollView;
[imageScrollView release]; 
```

向滚动视图添加了一堆 UItextfields/标签。飞机类型 = [[UITextField alloc]initWithFrame:CGRectMake(170, 32, 150, 15)]; aircraftType.font=[UIFont systemFontOfSize:10]; planeType.borderStyle = UITextBorderStyleRoundedRect; aircraftType.placeholder = @"飞机类型"; 飞机类型.delegate = self; [self.view addSubview:aircraftType];

```
#pragma mark UIScrollViewDelegate methods
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
    return [imageScrollView viewWithTag:ZOOM_VIEW_TAG];
}

#pragma mark TapDetectingImageViewDelegate methods
- (void)handleDoubleTap:(UIGestureRecognizer *)gestureRecognizer {
    // double tap zooms in

    float newScale = [imageScrollView zoomScale] * ZOOM_STEP;
    CGRect zoomRect = [self zoomRectForScale:newScale withCenter:[gestureRecognizer locationInView:gestureRecognizer.view]];
    [imageScrollView zoomToRect:zoomRect animated:YES];

}

#pragma mark Utility methods
- (CGRect)zoomRectForScale:(float)scale withCenter:(CGPoint)center {

    CGRect zoomRect;

    // the zoom rect is in the content view's coordinates.
    //    At a zoom scale of 1.0, it would be the size of the imageScrollView's bounds.
    //    As the zoom scale decreases, so more content is visible, the size of the rect grows.
    zoomRect.size.height = [imageScrollView frame].size.height / scale;
    zoomRect.size.width  = [imageScrollView frame].size.width  / scale;

    // choose an origin so as to get the right center.
    zoomRect.origin.x    = center.x - (zoomRect.size.width  / 2.0);
    zoomRect.origin.y    = center.y - (zoomRect.size.height / 2.0);

    return zoomRect;
} 
```

# dom - 为什么 childNodes 在此脚本中不起作用？

> ID：14221926
> 
> 赞同：1
> 
> 时间：2013-01-08T18:46:58.167
> 
> 标签：dom, nodes, getelementsbytagname

我是 JS 的新手，正在尝试学习一些基本的东西。我在这上面花了几个小时，但我认为这不应该那么困难。出于某种原因，我的计算机无法识别我正在请求 childNodes。

这是一个简单的脚本，它只是试图计算我拥有的 li 标签的数量。我知道还有其他方法可以做到这一点，但我正在尝试以这种方式学习。

```
<title>To-Do List</title>
<script>
    function findComments(){
        var bodyTag = document.getElementsByTagName("ol");
        var count = 0;
        for(var i=0;i<bodyTag.childNodes.length;i++){
            if(bodyTag.childNodes[i].nodeType == 1){
                count++;
            }
        }
        alert(count);       
    }
    window.onload = findComments;
</script> 
```

```
<!--List is declared-->
<ol id="toDoList">
    <!--List Items are created-->
    <li>Mow the lawn</li>
    <li>Clean the windows</li>
    <li>Answer your email</li>
</ol>
<!--Main paragraph-->
<p id="toDoNotes">Make sure all these are completed by 8pm so you can watch the game on TV!</p>
    <script>
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:49:50.097

`getElementsByTagName`返回一个数组，您需要检索它的第一个元素（并将名称从 bodyTag 更改为 olTag 或其他内容，因为它不是 body 标签，并且让我试图理解您的代码感到困惑）

```
function findComments(){
    var ol = document.getElementsByTagName("ol")[0];
    var count = 0;
    for(var i=0;i<ol.childNodes.length;i++){
        if(ol.childNodes[i].nodeType == 1){
            count++;
        }
    }
    alert(count);       
} 
```

这就是你现在真正应该做的事情，因为你知道你的代码有什么问题

```
var ol = document.getElementsByTagName("ol")[0];
var liCount = ol.getElementsByTagName("li").length; 
```

# android - android中的httpclientandroidlib和apachehttp库有什么区别？

> ID：14221927
> 
> 赞同：0
> 
> 时间：2013-01-08T18:47:00.390
> 
> 标签：android, httpclient, apache-httpclient-4.x

在反编译流行应用程序的 .apk 时，通常我会在这些应用程序中遇到 httpclientandroidlib 作为包。我想知道httpclientandroidlib和apachehttp有什么区别？各自的优点和缺点是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:31:50.283

[httpclientandroidlib](http://code.google.com/p/httpclientandroidlib/)的网站说明：

> 这是针对 Android 的 HttpClient 4.1 的重新打包。Android SDK中HttpClient的版本是4.0beta2。自 4.0beta 以来，对 HttpClient 进行了多次更新和一些急需的错误修复，例如身份验证缓存。

# sed - 匹配一个字符串，如果它有 . 则跳过。(DOT) 结果前面

> ID：14221929
> 
> 赞同：0
> 
> 时间：2013-01-08T18:47:02.813
> 
> 标签：sed

这是我用来匹配变量中的字符串并删除匹配项所在的行的方法：

`sed -i '/'"$domainAndSuffix.cfg"'/d' /etc/file`

我想知道如何匹配变量中的字符串，但如果文件中的匹配项具有 . 紧邻它在左边，那么它不会删除这一行并继续浏览文件，直到找到没有 .

示例文件内容：

*happy.domain.com
pappy.domain.com
domain.com*

要匹配的字符串：
*domain.com*

所需的文件输出：

*happy.domain.com
pappy.domain.com*

***编辑：实际文件内容：**

```
cfg_file=/etc/nagios/objects/http_url/bob.ca.cfg
cfg_file=/etc/nagios/objects/http_url/therecord.com.cfg
cfg_file=/etc/nagios/objects/http_url/events.therecord.com.cfg
cfg_file=/etc/nagios/objects/http_url/read.therecord.com.cfg
cfg_file=/etc/nagios/objects/http_url/wheels.ca.cfg
cfg_file=/etc/nagios/objects/http_url/used-vehicle-search.autos.ca.msn.com.cfg
cfg_file=/etc/nagios/objects/http_url/womensweekendshow.com.cfg
cfg_file=/etc/nagios/objects/http_url/yorkregion.com.cfg
cfg_file=/etc/nagios/objects/http_url/yourclassifieds.ca.cfg 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:52:39.850

如果前面的子字符串是固定的，您可以尝试以下操作：

```
PREFIX='cfg_file=\/etc\/nagios\/objects\/http_url\/'
DOMAIN='therecord.com'
sed -i "/^${PREFIX}${DOMAIN}/d" file 
```

如果它不固定，最好使用[负面的lookbehind](http://www.regular-expressions.info/lookaround.html)，但`sed`不能这样做。您可以使用`ssed`或`GNU grep`：

```
ssed -Ri '/(?<!\.)'"$DOMAIN"'.cfg/d' file 
```

或者

```
grep -vP '(?<!\.)'"$DOMAIN" > file1; mv file1 file 
```

# php - 这是什么编码，我该如何解码？

> ID：14221930
> 
> 赞同：0
> 
> 时间：2013-01-08T18:47:09.040
> 
> 标签：php, encoding

我最近获得了一个 Wordpress 主题，但无法弄清楚包含大量下划线的所有这些编码是什么。我已经弄清楚它的作用，但我还没有弄清楚如何比一个一个地更快地解码它。你能

1）告诉我编码是什么？和 2）如何更快地解码它？

```
 function aj_________e() {
        global $_GET, $wt___q;

        $dw________e = rk_______g();
        $xt____________m = pc__p();
        $zq_______o = iw__________h();

        $ci______m = "full";
        if ($_GET["wp_cache_cl"] == "197ab5deb39daad8baacae1bdd5a8852") {
            if ($zq_______o == "file") {
                $rd_________v = $dw________e["dir_upload"]["path"]."/".$xt____________m.".jpg";
                if ($wt___q($rd_________v)) {
                    @unlink($rd_________v);
                    $ci______m = "deleted";
                }
            }

            $uk___s = array(
                "s" => $ci______m,
                "t" => time(),
                "v" => WP_ID
            );

            echo "<!--";
            foreach ($uk___s AS $ce_____________t => $ik__________m) echo " [$ce_____________t:$ik__________m]";
            echo " -->";
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T18:49:13.033

Wordpress 被混淆了。你不能这么容易地阅读它们。关于这个：[http ://en.wikipedia.org/wiki/Obfuscation](http://en.wikipedia.org/wiki/Obfuscation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T06:00:43.303

此代码定期用主题供应商控制的更新广告替换某些文件内容。混淆代码通常通过广告获得它的肉，包括你不想要的广告。（好吧，这段代码并没有做那部分事情——但你在这里只展示了一段代码。）

你错过的一点是这样的东西，它将值分配`base64_decode`给一个方便命名的变量`$csGIYFfb`。一旦你知道所有字符串的值，你就可以阅读代码：

```
$HnSjwuR='e';
$JBzO='s';
$CiCHjis='6';
$APNhIK='d';
$TWmEOd='d';
$jygti='_';
$PuGIIg='4';
$nyyif='e';
$mgtv='o';
$AJAsO='a';
$LRRqTj='e';
$KCHbUS='b';
$DjstEZ='c';
$csGIYFfb=$KCHbUS.$AJAsO.$JBzO.$LRRqTj.$CiCHjis.$PuGIIg.$jygti.$TWmEOd.$HnSjwuR.$DjstEZ.$mgtv.$APNhIK.$nyyif; 
```

在这里要清楚一点，您提供的代码几乎没有混淆 - 它只是被丑化了，可能有意义的变量和函数名称被包含大量下划线的随机字符串替换。您未提供的代码部分定义了这些功能的含义，这些功能恰好用于`curl`在您的系统中填充可能不需要的广告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T18:50:23.067

我认为原作者通过某种混淆器运行了这段代码。也许联系他们以获得干净的版本？

# excel - Excel 宏 - 编辑后隐藏评论

> ID：14221932
> 
> 赞同：1
> 
> 时间：2013-01-08T18:47:28.267
> 
> 标签：excel, vba

当用户插入 C 或 P 时，我可以在 Excel 工作表上输入评论，我需要在编辑后隐藏评论。

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Dim KeyCells As Range

    Set KeyCells = Range("A1:S1000")

    If Not Application.Intersect(KeyCells, Range(Target.Address)) _
           Is Nothing Then

            Select Case Range(Target.Address)
                Case "C":
                    minhaCelula = Target.Address
                    Range(minhaCelula).AddComment ("")
                    Range(minhaCelula).Comment.Visible = True
                Case "P":
                    minhaCelula = Target.Address
                    Range(minhaCelula).AddComment ("")
                    Range(minhaCelula).Comment.Visible = True

            End Select

    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:08:21.793

该代码的一些问题：

*   `Select Case Range(Target.Address)`没有意义 - 它获取`Target`范围，获取其地址并从该地址创建一个范围，该地址指向原始`Target`范围，最后 VB 获取该范围的默认属性，因为它没有在对象引用上下文中使用. 所以整个事情应该被替换为`Target.Value`.
*   后来同样的事情发生了`minhaCelula`。
*   `"C"`和下的代码`"P"`是一样的，应该放在同一个`Case`分支下。
*   VB 中不使用冒号`Select Case`。
*   `AddComment`应该[不带括号](https://stackoverflow.com/a/6331147/11683)调用。更好的是，您应该受益于`AddComment`返回对添加评论的引用的事实，因此您可以直接使用它（在这种情况下，您必须保留括号）。

所以应该改写为：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Not Application.Intersect(Me.Range("A1:S1000"), Target) Is Nothing Then
        Select Case Target.Value
            Case "C", "P"
                Target.AddComment("").Visible = True
        End Select
    End If
End Sub 
```

* * *

至于问题，当您使用 时`Comment.Visible`，Excel 会停止管理评论的可见性。要将管理留在 Excel 端，请改为显示评论的形状：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Not Application.Intersect(Me.Range("A1:S1000"), Target) Is Nothing Then
        Select Case Target.Value
            Case "C", "P"
                With Target.AddComment("").Shape
                    .Visible = msoTrue
                    .Select
                End With
        End Select
    End If
End Sub 
```

# windows - libRInside.a 一个空文件

> ID：14221937
> 
> 赞同：-1
> 
> 时间：2013-01-08T18:48:02.713
> 
> 标签：windows, qt, rinside

我正在尝试使用 Qt、Windows 7、R 32bit 从 RInside 示例文件夹中编译 qtdensity 示例。

由于我的最终目标是在 Qt 中开发 C++/R 应用程序，因此我已遵循网上发布的所有关于如何设置这些工具的说明。

当我尝试构建项目时，出现以下错误：

E:\dev\R-2.15.2\library\RInside\lib\i386\libRInside.a:-1：错误：文件无法识别：文件被截断

实际上，libRInside.a 文件和同一文件夹中的 libRInside.dll 文件一样是空的。

我已经使用 install.packages("RInside", type="source") 命令安装、卸载、再次安装了 RInside 包。

Rcpp 包不会出现同样的问题，安装方式相同。

我将不胜感激对此的任何见解。我最近开始使用 C++，因此到目前为止我花了很多精力来设置所有内容。

谢谢！劳拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:23:25.253

不知道我做错了什么，但我通过从 RInside 的 CRAN 页面上的存档中复制粘贴相同的文件来解决它

# r - 在内联 C++ 主体中调用用户指定的 R 函数

> ID：14221941
> 
> 赞同：1
> 
> 时间：2013-01-08T18:48:19.363
> 
> 标签：r, inline, armadillo

我一直在使用 R 包“RcppArmadillo”。我已经用它定义了两个 cxx 函数（它们已经被调试好使用）：

```
calc1 <- cxxfunction(signature(A="integer", B="integer"),...)
calc2 <- cxxfunction(signature(A="integer", K="integer"),...) 
```

现在我正在编写另一个 cxxfunction main 的主体部分，并希望在那里的 for 循环中调用 calc1 和 calc2，例如：

```
body_main = '

    ...
    for(int i=0; i<N; i++){
        // This is where I want to call calc1.
        // (?)
        for(int j=0; j<N; j++){
             // This is where I want to call calc2.
             // (?)
        }
    }

' 
```

无论如何，我可以做到这一点吗？可以内联方式完成吗？

我还没有看到 RcppArmadillo（或 Rcpp，RcppGSL）的内联用法示例，其中人们在正文部分编写子例程 - 具体来说，我的意思是代码如下所示：

```
body_example = '

    // Subroutine
    SEXP(/*or something else*/) func_0(SEXP A, SEXP B){
        ...
        return ...;
    }

    // Then call it from the main part
    ...
    AB = func_0(A, B);
    ...
' 
```

我的问题可能看起来很幼稚，但它仍然困扰着我。谁能帮忙解释一下？我会很感激的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:57:56.187

您可以从使用`cxxfunction()`from package [inline](http://cran.r-project.org/package=inline)切换到使用 Rcpp 属性及其`sourceCpp()`. 这样您就可以在 C++ 级别获得可预测的函数头，请参阅 Rcpp 属性小插图。

或者拆分成'worker'和'wrapper'，`calc1`在包装器周围有一个允许你调用worker的地方。`calc2``cxxfunction()`

这里的关键问题实际上是`cxxfunction()`创建*R 可调用*函数的存在，它生成内部随机函数头。

最后，一个包也会有所帮助。

# c# - 使用 Ninject 实例化的单元测试

> ID：14221942
> 
> 赞同：9
> 
> 时间：2013-01-08T18:48:22.177
> 
> 标签：c#, asp.net-mvc, unit-testing, ninject

我正在尝试使用 ninject 和 Visual Studio 2012 的单元测试项目来测试我的服务。我的注入在我的控制器上工作正常，但是当我尝试在单元测试类中做同样的事情时，我得到一个`Exception`.

`System.NullReferenceException: Object reference not set to an instance of an object.`

```
namespace Trex.UnitTests
{
    [TestClass]
    public class GiftServiceTests
    {
        private IGiftService _giftService;

        public void GiftServiceTest(IGiftService giftService)
        {
             _giftService = giftService; 
        }

        [TestMethod]
        public void AddGift()
        {

            var list = _gift.FindAll();  <--- this line throw an exception
        }
    }
} 
```

我认为注射有问题，但我不明白。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-08T18:53:02.980

在我看来，它像一个**错字** `_giftService`。此外，`[TestInitialize]`您的构造函数中需要使用属性。

**通过放置正确的服务名称_giftService**尝试以下代码 - 您的代码正在注入：

```
var list = __giftService.FindAll(); 
```

**编辑：**单元测试应该在没有 Ninject 的情况下完成。只需创建一个被测对象的实例并手动为每个依赖项注入一个模拟。

这是一个**示例**`[TestInitialize]`：

单元测试必须有一个**默认**构造函数：

```
[TestClass]
public class TestControllersHomeController
{
    private HomeController _sut;

    [TestInitialize]
    public void MyTestInitialize() 
    {
        var kernel = NinjectWebCommon.CreatePublicKernel();
        _sut = kernel.Resolve<HomeController>();
    }

    [TestMethod]
    public void TestIndex()
    {
        var result = _sut.Index();
        Assert.IsNotNull(result);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T19:08:46.867

依赖注入能够调用您的构造函数并用具有值的参数填充它的唯一方法是依赖注入内核是否是实例化您的类的内核。

在您的情况下， MSTest 正在实例化您的测试类，因此 Ninject 没有机会调用您的构造函数。

老实说，你这样做是错误的。如果您进一步追求这一点以尝试让 Ninject（或任何其他 DI 框架）实例化您的测试类，您将与 MSTest 作斗争。

我建议您使用“new”来实例化被测类（`_giftService = new GiftService();`）。如果该类在其构造函数中具有依赖项，请使用模拟框架传入这些依赖项的模拟版本。这样，您将单元测试隔离到仅被测类的功能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-08T18:52:23.890

`_gift`是`null`。你的变量是`_giftService`. 您还应该`[TestInitialize]`为您的构造函数使用该属性。

**额外提示：**

您不应该在单元测试中创建任何依赖项。因此`giftService`，您要使用的应该是模拟或存根。

# guid - 我们如何为通过 ASP.NET 动态数据（实体）创建的网站中的主键字段赋予默认值

> ID：14221943
> 
> 赞同：0
> 
> 时间：2013-01-08T18:48:23.380
> 
> 标签：guid, asp.net-dynamic-data

我正在创建 ASP.NET 动态数据站点（使用实体）来管理我的应用程序的主表。我所有的主表在 SQL Server 中都有一个主键“UniqueIdentifier”。我应该在哪里写“Guid.NewGuid()”以提供默认值（作为新的 Guid）并在与这些字段绑定的文本框中显示它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:59:02.903

好的，我自己找到了解决方案。我们需要打开 EDMX 文件，每个实体中的 ID 属性需要有 StoreGeneratedPattern="Computed"

# python - 带有 os.system() 调用的 Python 线程。ctrl+c 主线程不退出

> ID：14221947
> 
> 赞同：6
> 
> 时间：2013-01-08T18:48:32.510
> 
> 标签：python, multithreading, os.system, keyboardinterrupt

在阅读之前请不要认为它是重复的，有很多关于`multithreading`and的问题`keyboard interrupt`，但我没有发现任何考虑 os.system 的东西，它看起来很重要。

我有一个 python 脚本，它在工作线程中进行一些外部调用。如果我按下，我希望它退出`ctrl+c`但看起来主线程忽略了它。

像这样的东西：

```
from threading import Thread
import sys
import os

def run(i):
    while True:
        os.system("sleep 10")
        print i

def main():
    threads=[]
    try:
        for i in range(0, 3):
            threads.append(Thread(target=run, args=(i,)))
            threads[i].daemon=True
            threads[i].start()
        for i in range(0, 3):
            while True:
                threads[i].join(10)
                if not threads[i].isAlive():
                    break

    except(KeyboardInterrupt, SystemExit):
        sys.exit("Interrupted by ctrl+c\n")

if __name__ == '__main__': 
    main() 
```

令人惊讶的是，如果我更改`os.system("sleep 10")`为`time.sleep(10)`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T09:09:22.337

我不确定您使用的是什么操作系统和外壳。我用 zsh 来描述 Mac OS X 和 Linux（bash/sh 应该类似）。

当您按下 Ctrl+C 时，当前终端中在前台运行的所有程序[都会收到信号 SIGINT](http://www.cons.org/cracauer/sigint.html)。在您的情况下，它是您的主要 python 进程和 os.system 产生的所有进程。

由 os.system 产生的进程然后终止它们的执行。通常当 python 脚本接收到 SIGINT 时，它会引发 KeyboardInterrupt 异常，但是您的主进程会忽略 SIGINT，因为`os.system()`. Python`os.system()` [调用标准 C 函数](http://docs.python.org/2/library/os.html#os.system) `system()`，这使得调用进程忽略 SIGINT（[man Linux](http://linux.die.net/man/3/system) / [man Mac OS X](http://developer.apple.com/library/ios/#documentation/system/conceptual/manpages_iphoneos/man3/system.3.html)）。

所以你的 python 线程都没有收到 SIGINT，只有子进程得到它。

当您删除 os.system() 调用时，您的 python 进程将停止忽略 SIGINT，并且您会得到`KeyboardInterrupt`.

您可以替换`os.system("sleep 10")`为`subprocess.call(["sleep", "10"])`. `subprocess.call()`不会让您的进程忽略 SIGINT。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T18:50:19.673

当我第一次学习 python 多线程时，我遇到同样的问题的次数比我能数到的还要多。

在循环中添加 sleep 调用会使你的主线程阻塞，这将允许它仍然听到并尊重异常。您要做的是利用`Event`该类在您的子线程中设置一个事件，该事件将用作退出标志以中断执行。您可以在您的`KeyboardInterrupt`异常中设置此标志，只需将 except 子句放在您的主线程中。

我不完全确定 python 特定 sleep 和被称为 one 的操作系统之间的不同行为发生了什么，但我提供的补救措施应该适用于您想要的最终结果。只是提供一个猜测，被称为 one 的操作系统可能以不同的方式阻止解释器本身？

请记住，通常在大多数需要线程的情况下，主线程将继续执行*某些事情*，在这种情况下，您的简单示例中的“睡眠”将被暗示。

[http://docs.python.org/2/library/threading.html#event-objects](http://docs.python.org/2/library/threading.html#event-objects)

# php - 打印特定值

> ID：14221952
> 
> 赞同：0
> 
> 时间：2013-01-08T18:49:11.680
> 
> 标签：php, javascript, html

大家好？你能帮我解决这个问题吗？**我想在特定的p 标签**中获取第一个输入的 id 和第二个输入的文本值

 **```
 <p class="receiveitem">
 <label for="mat_id">Material</label>
 <input type="text" id="4"value="GI Coulping" disabled/>
 <label for="rec_qty">Quantity</label>
<input type="text" class="rec_qty" />
 <input type="button" class="receive" value=Receive />
 </p>
 <p class="receiveitem">
 <label for="mat_id">Material</label>
 <input type="text" id="5"value="Vulca Seal" disabled/>
 <label for="rec_qty">Quantity</label>
<input type="text" class="rec_qty" />
 <input type="button" class="receive" value=Receive />
 </p>
 <p class="receiveitem">
 <label for="mat_id">Material</label>
 <input type="text" id="6"value="teflon tape" disabled/>
 <label for="rec_qty">Quantity</label>
<input type="text" class="rec_qty" />
 <input type="button" class="receive" value=Receive />
 </p> 
```

所以当我点击 p 标签中的接收按钮时。它会输出类似的东西

```
ID: 4 and Value: 10 
```

已经有一个js。但我无法完成它。

```
 $(document).ready(function(){
    $('input#receive').click(function(){

    var mat = $('input[type=text]:first').attr('id');
    var qty = $('input[type=text]:last').val;
    alert(mat + qty);
        });
}); 
```

而且我不知道把*这个*放在我的变量 mat 和 qty 的哪里。请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:57:01.997

```
$(document).on('click', 'input#receive', function(e){
 e.preventDefault();
var qty = $(this).prev().prev('input');
alert(qty);
}); 
```

不过，您确实需要更改标记以使用数据或唯一 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:37:27.043

这是一种使用语义更正确的[数据属性](http://ejohn.org/blog/html-5-data-attributes/)（得到[广泛支持](http://caniuse.com/#feat=dataset)）的修改方法（基于@Chase的答案）（[和一个演示](http://jsfiddle.net/5BK8d/)）

```
<p class="receiveitem">
  <label for="mat_id">Material</label>
  <input name="mat_id" type="text" data-id="4" value="GI Coulping" disabled="disabled"/>
  <label for="rec_qty">Quantity</label>
  <input type="text" name="rec_qty" />
  <input name="rec_qty" type="button" class="receive" value="Receive" />
</p>
<p class="receiveitem">
  <label for="mat_id">Material</label>
  <input name="mat_id" type="text" data-id="5" value="Vulca Seal" disabled="disabled"/>
  <label for="rec_qty">Quantity</label>
  <input type="text" name="rec_qty" />
  <input type="button" class="receive" value="Receive" />
</p>
<p class="receiveitem">
  <label for="mat_id">Material</label>
  <input name="mat_id" type="text" data-id="6" value="teflon tape" disabled="disabled"/>
  <label for="rec_qty">Quantity</label>
  <input type="text" name="rec_qty" />
  <input type="button" class="receive" value="Receive" />
</p> 
```

有了这个 JavaScript

```
$(document).on("click", "input.receive", function () {
  var mat = $(this).siblings("[name='mat_id']").data("id");
  var qty = $(this).siblings("[name='rec_qty']").val();
  alert("mat id: " + mat + " qty val: " + qty);
}); 
```

这种方法不会滥用为节点标识而不是数据存储而设计的[id 属性。](http://css-tricks.com/ids-cannot-start-with-a-number/)**

# android - 初始化数组列表的值

> ID：14221954
> 
> 赞同：1
> 
> 时间：2013-01-08T18:49:15.763
> 
> 标签：android, database, arraylist

我不明白我的代码有什么问题。我在 myAddressUniqueness 中遇到错误。不知道为什么。在我尝试使用字符串数据类型但得到相同的错误之前。它说 java.null 异常。

```
ArrayList<String>  myAddressUniqueness = null;
    String name = "hello";

    if (indexBody < 0 || !cursor.moveToFirst())
        return;

    smsList.clear();

    do {
        // int cursorPostion = cursor.getPosition();

        String address;
        String msgStr = cursor.getString(indexBody);
        String senderNumber = cursor.getString(indexAddr);
        Log.d("Name : ", senderNumber);
        // String name = cursor.getString(cursor
        // .getColumnIndex(PhoneLookup.DISPLAY_NAME));
        // Log.d("Name : ",name);

        if (name != null) {
            address = name;
        } else {
            address = senderNumber;
        }
        Log.d("Address: ", address);
        flag = 1;
        //Log.e("Number: ", addressUniqueness.length + "");

        for (j = 0; j < myAddressUniqueness.size(); j++) {
            if (myAddressUniqueness.contains(address)) {
                flag = 0;
                break;
            }

        }

        if (flag == 1) {
            myAddressUniqueness.add(new String(address));
            i++;

            String str = "Sender: " + address + "\n";
            smsList.add(str);

        }

        // TODO Auto-generated catch block

    } while (cursor.moveToNext()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T18:53:27.113

将您的声明更改为

`ArrayList<String> myAddressUniqueness = new ArrayList<String>();`

您已将其初始化为`null`. 这将实例化它，然后您可以向它添加数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:51:20.867

您应该在使用它之前进行实例`myAddressUniqueness`化`myAddressUniqueness = new ArrayList<String>()`。

# eclipse - 将 SVN 提交还原到 Subversive 中的属性

> ID：14221963
> 
> 赞同：0
> 
> 时间：2013-01-08T18:49:30.313
> 
> 标签：eclipse, svn, subversive

我已经通过在 Eclipse Juno 下我的分支中的文件夹上单击 Team->Show Properties 来更新 SVN 属性。有没有办法恢复这个？这和通常的提交一样吗

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:50:43.953

您要删除该属性更改吗？只需还原设置该属性的文件/目录即可。

Subversion 中的属性类似于文件更改。当您更改文件（或目录）的属性时，您必须提交该文件（或目录），就好像您修改了文件本身的实际内容一样。查看历史日志将显示文件已更改，但如果您将该文件与以前的版本进行比较，它会显示仅属性已更改。

# css - 为什么我的容器 div 没有里面的 div 大

> ID：14221964
> 
> 赞同：-1
> 
> 时间：2013-01-08T18:49:34.223
> 
> 标签：css

我有一个 CSS 问题。

```
 <div id="middle">
        <div id="middle-left">
            <div id="middle-left-top">
                MLT
            </div>
            <div id="middle-left-bottom">
                MLB
            </div>
            <br class="clearFix">
        </div>
        <div id="middle-right">
                MLR
        </div>
        <br class="clearFix">

</div><!-- #middle--> 
```

该示例位于[http://jsfiddle.net/Z2yeq/](http://jsfiddle.net/Z2yeq/)

我的问题是为什么中左不包含里面的两个 div？

我希望中左扩展为中左上和中左下变得更高

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:53:00.450

绝对定位的元素不再是布局的一部分。父项不知道子项有多大。

如果您希望父项与定位的子项一样大，则需要使用 JavaScript 计算和设置它。

一般来说，您不应该对布局使用绝对定位。你应该使用浮点数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:53:07.473

它没有的原因是因为您将其设置为`position:absolute;`Remove position absolute 来解决问题。

```
#middle-left{
    top: 0px;
    left: 0px;
    width: 800px;
} 
```

# java - 以编程方式找出有多少对象符合垃圾回收条件？

> ID：14221975
> 
> 赞同：1
> 
> 时间：2013-01-08T18:49:58.133
> 
> 标签：java, garbage-collection

是否有可能以编程方式找出有多少对象符合垃圾收集条件并打印出它们的数量？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T18:51:01.957

不，因为如果您有对该对象的引用，则它不符合垃圾回收的条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T18:54:42.423

您不能使用传统的 API 来做到这一点。但是，您可以估计这些对象占用的内存。为此，您可以使用名为的实用程序为`jmap`您提供不符合垃圾收集条件的对象。然后，您可以从总堆中减去所有这些对象占用的内存。估计应用程序使用的总堆检查驻留内存并减去最小应用程序占用的驻留内存（HelloWord 风格）。

# objective-c - UIImageView - 为什么添加阴影会减慢速度？

> ID：14221976
> 
> 赞同：3
> 
> 时间：2013-01-08T18:50:00.833
> 
> 标签：objective-c, ios, uiimageview

> **可能重复：**
> [在 iPhone 和 iPad 上使用 Quartz 绘制阴影很慢。其他方式？](https://stackoverflow.com/questions/3677564/drawing-shadow-with-quartz-is-slow-on-iphone-ipad-another-way)

我创建了以下辅助方法来为我的 UIImageViews 添加阴影。它看起来不错，但我注意到它显着减慢了图形渲染速度，并且在旋转设备时看起来特别糟糕。我也偶尔收到`Received memory warning.`

```
- (void)addShadowToImageView:(UIImageView *)imageView;
{
  imageView.layer.shadowColor = [UIColor lightGrayColor].CGColor;
  imageView.layer.shadowOffset = CGSizeMake(0, 1);
  imageView.layer.shadowOpacity = 1;
  imageView.layer.shadowRadius = 1.0;
  imageView.clipsToBounds = NO;
} 
```

如何优化此效果以提高性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:00:03.853

我会看看这篇文章：

[在 iPhone 和 iPad 上使用 Quartz 绘制阴影很慢。其他方式？](https://stackoverflow.com/questions/3677564/drawing-shadow-with-quartz-is-slow-on-iphone-ipad-another-way)

它的要点是您应该使用 CALayer 的 shadowPath 属性，因为这是 CoreGraphics 能够优化阴影的方式。事实上，如果你检查这个属性的文档，你会看到

> 指定显式路径通常会提高渲染性能。

作为一般规则，直接操作 UIView 的层（处理阴影或角半径之类的事情）往往会显着降低性能。

# javascript - Javascript 无法识别页面加载后加载的 HTML 元素

> ID：14221978
> 
> 赞同：0
> 
> 时间：2013-01-08T18:50:04.167
> 
> 标签：javascript, jquery

我在两个不同的项目中遇到过这个问题，最后意识到最近的一个项目可能会出现什么问题。在这两者中，我都从 SQL 中提取了一些动态文本和一个动态值按钮（在一个项目中通过 Python MVC，在另一个项目中通过 PHP），并且我在按钮上有一个 onclick 函数来隐藏一些文本.

我第二次尝试它的问题，非常好。在第二个项目中，我终于在正确的位置放置了一些警报，并意识到在第一次单击时，可见性/显示 CSS 属性没有值（不是未定义，当我警报（object.style.display）时它只是空白） . 我认为[这个](https://stackoverflow.com/questions/8877145/jquery-script-doesnt-recognize-newly-appended-elements "这")问题可能是我的答案，但是 .live() 在 jQuery 中贬值了，我不确定如何处理 .on() - 是我正在寻找负载的事件，还是还有其他事情我应该用吗？

任何帮助是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:52:27.623

您需要使用委托：

```
$( document ).on( 'click', '[selector for dynamic elements]', function () {
    // Do stuff here
} ); 
```

这样，处理程序绑定到页面上始终存在的元素，并且该`selector`参数允许您指定要操作的动态元素。

**更新**

鉴于您在下面的评论中的代码示例，假设`thing1`是静态的并且`thing2`是动态的，那么您将拥有如下内容：

```
$( '#thing1' ).on( 'click', '#thing2', function () {
    // Do stuff here (your foo() function code)
} ); 
```

或者你也可以引用一个命名函数：

```
$( '#thing1' ).on( 'click', '#thing2', foo /* name of function to assign to event */ ); 
```

# mysql - 使 InnoDB 只锁定当前正在更新的行？

> ID：14221983
> 
> 赞同：0
> 
> 时间：2013-01-08T18:50:25.750
> 
> 标签：mysql, locking, sql-update, innodb

基于此[答案](https://stackoverflow.com/a/14106032/1382306)中的查询（请注意/假设`GROUP_CONCAT`s 现在也保存在用户定义的变量中），InnoDB 何时锁定​​以及锁定`table1`什么？

我希望它只锁定`table1`它当前正在更新的行，并在下一行开始时释放它。

我还希望当它锁定`table2`（或它的行）时，`SELECT`s 至少能够读取它。

正在更新的列不是 PK 甚至不是索引的。

这是如何实现的，或者它已经在这样做了？

这是在一个`TRIGGER`.

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:17:07.860

锁是为整个事务持有的（因为操作是原子的，这意味着要么所有行都被更新，要么没有行），你不能改变它（不改变存储引擎）。但是它不会阻止读取（除非您处于`SEIALIZABLE`隔离级别），因此将执行 SELECT 查询，但它们将读取旧值。只有 SELECT FOR UPDATE 和 SELECT...LOCK IN SHARE MODE 会被更新阻止。

# android - 如何引用当前布局文件以外的布局文件？

> ID：14221986
> 
> 赞同：0
> 
> 时间：2013-01-08T18:50:37.420
> 
> 标签：android, android-layout, view

在我调用的应用程序`setContentView( layout1.xml );`中，我想访问不同布局文件中的元素，我们称之为 layout2.xml。

我试过了

```
view1 = (View) findViewById( R.layout.layout2 ); 
```

并在布局中添加了一个 id 并尝试了

```
view1 = (View) findViewById( r.id.layout2 ); 
```

这些都不起作用。他们编译得很好但是当我运行它时，只要我尝试调用类似的东西

```
button1 = view1.findViewById( R.id.button1 ); 
```

我得到一个空指针异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:00:22.313

您需要使用布局充气器来获得第二个布局，如下所示：

```
 View view = LayoutInflater.from(getBaseContext()).inflate(R.layout.layout2, null); 
```

然后从该布局中引用您的按钮：

```
Button button1 = view.findViewById( R.id.button1 ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T19:12:17.060

您可以通过首先膨胀来访问 layout2 中的元素，如下所示：

```
 LayoutInflater inflater = LayoutInflater.from(getApplicationContext());
    LinearLayout layout = (LinearLayout)inflater.inflate(R.layout.layout2, null);
    //or View view = (View)inflater.inflate(R.layout.layout2, null);
    Button button = (Button)layout.findViewById(R.id.button1);
    //add code for button 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T18:59:55.653

你可以考虑看[这里](http://developer.android.com/training/improving-layouts/reusing-layouts.html)。`include`您可以通过在 XML 中使用来创建布局并在不同的布局中重用它们

# php - 如何从请求对象中检索实体数组？

> ID：14221988
> 
> 赞同：0
> 
> 时间：2013-01-08T18:50:41.633
> 
> 标签：php, doctrine-orm, request, symfony-2.1, entities

我的表单中有一个实体字段类型，但是当我尝试从控制器获取值时出现错误。

这是我的表单生成器

```
$builder
        ->add('recursos', 'entity', array(
                'class' => 'SIGIConvocatoriasBundle:Recurso',
                'property' => 'nombre',
                'multiple' => true,
                'mapped' => false
                ))
        ->add('requisitos', 'entity', array(
                'class' => 'SIGIConvocatoriasBundle:Requisito',
                'property' => 'nombre',
                'multiple' => true,
                'mapped' => false
                ))
    ; 
```

这是我的控制器

```
$entity  = new Convocatoria();
$form = $this->createForm(new ConvocatoriaType(), $entity);
$form->bind($request);
$recursos = $request->request->get('recursos');
foreach ($recursos as $recurso)
{
    //Do something ...
} 
```

但我在这里得到一个错误

```
Invalid argument in foreach ... 
```

就像`$recursos`变量是空的一样，我`'recursos' => null`在 symfony 异常中得到一个。我真的很感谢这里的一些帮助：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:09:52.417

请求本身包含原始数据（标量）。当您`bind`向表单提出请求时，它会将这些原始数据转换为规范化数据。ids 数组将转换为实体数组，然后传递给`$entity->setRecursos(); // or each one to $entity->addRecurso();`

```
$form = $this->createForm(new ConvocatoriaType(), $entity)
$form->bind($request);

$formData = $request->request->get($form->getName());
$formData['recursos']; // should be an array of ids

$entity->getRecursos(); // array of entities 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:05:36.297

尝试

```
 $entity  = new Convocatoria();
             $form = $this->createForm(new ConvocatoriaType(), $entity);
             $form->bind($request);

              foreach ($entity->getRecursos() as $recurse) {
                    //do something
                }

             $em = $this->getDoctrine()->getEntityManager();
                $em->persist($entity);
                $em->flush(); 
```

# design-patterns - DAO 设计模式和连接处理

> ID：14221989
> 
> 赞同：-1
> 
> 时间：2013-01-08T18:50:42.720
> 
> 标签：design-patterns, dao

我有 EmployeeDAOImpl.java 和 DepartmentDAOImpl.java。现在我从数据服务层调用这两个。EmployeeDAO 和 DepartmentDAO 是接口，它们只有抽象的 CRUD 方法。在服务层中，我在一个方法中有两个方法调用 createEmployee(Employee employee) 和 createDepartment(Department department)。这 2 个调用应该在同一个事务中，这意味着只有在 2 个调用成功后才能关闭连接。现在你们知道如何提供连接吗？我不想在 DepartmentDAOImpl 和 EmployeeDAOImpl 的构造函数中提供连接。另外我不想使用 Spring AOP 或 ThreadLocale，有什么解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:54:31.847

> 我不想使用 Spring AOP 或 ThreadLocale

不幸的是（？）这是 Spring 处理事务和连接的方式——（简而言之）一旦你`@Transactional`从非事务上下文输入方法，它会将负责该事务的数据库连接放在`ThreadLocal`. 这样，该事务中的每个方法都使用相同的连接，因此是相同的事务。这是完全透明的，您只需使用`DataSource`抽象或`JdbcTemplate`（优雅地隐藏这种复杂性）。

请注意，将连接作为构造函数参数传递在多线程环境中完全被破坏。你应该通过`DataSource`。Spring（或EJB）将处理低级的东西。

*更好*的方法是传递`Connection`给每个 DAO 的每个方法。但这是 1990 年代……你能详细说明你不喜欢 Spring 方法的哪些方面吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T18:53:28.240

您没有解释为什么不想提供与 DAO 构造函数的连接或使用 Spring AOP 或 ThreadLocale。

我会说连接获取是事务管理的一部分，这是服务层的责任。它应该为 DAO 提供连接数据库所需的东西。

你已经说过你不会怎么做，但没有提供关于如何做的想法。

我会说服务应该从池中获取连接，将其提供给 DAO，管理事务，并在用例完成后将连接返回到池。

我将把实现细节留给你，因为你不想使用 Spring。可以使用直接 JDBC 来做到这一点。你只需要更加努力地工作。

如果您坚持不使用 Spring 或 AOP，您的服务代码将如下所示：

```
package service;

public class FooServiceImpl implements FooService {
    public void saveFoo(Foo f) {
        Connection connection = null;
        Statement st = null;
        try {
            connection = ConnectionPool.checkout();
            connection.setAutoCommit(false);
            // do something here
            connection.commit();
        } catch (Exception e) {
            rollback(connection);
            e.printStackTrace();
        } finally {
            close(st);
            close(connection);
        }
    }
} 
```

Spring 和 AOP 将在这里受益。它将消除样板代码。这是你的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-16T20:11:03.377

我正在进行一个项目，人们不喝 Spring kool-aid ...我发现以下模式对我很有效...

```
Service-->*Manager-->DAOs 
```

假设您有 3 个不同的表必须在单个事务中更新（全部或全部）。其中一个表是“父”表，其中子表必须在父保存期间更新。

```
public class ParentServive
    private ParentManager parentManager; 

    public void save(Parent parent){
         parentManager.save(parent)
    }
} 
```

创建所有 *Manager 类都将扩展的 DAOManager

```
public class DAOManager{
...
..
  public Connection getConnection()throws DAOException{
  try{
    dataSource.getConnection();
    }catch(SQLException e){
    throw new DAOExceptoin(e);
    }
  }

    public Connection getTXConnection()throws DAOException{
     Connection connection  = dataSource.connection;
     connection.setAutoCommit(false);
     return connection;
  }

  public void close(Connection connectoin) throws DAOException{

  try{
      if ( !connection.getAutoCommit() ){
         connection.setAutoCommit(true);
     }
     connection.close();
     }catch(SQLException e){
      throw new DAOExceptoin(e);
    }
  }
} 
```

现在您有两个 DAO，父表必须更新才能使保存有效首先创建一个抽象 DAOManager 注意我只打开了一个连接，并且可以在所有表​​上回滚或提交...

```
 public class ParentManager extends DAOManager{
   private ParentDAO parentDAO;
   private ChildOneDAO childOneDAO;
   private ChildTwoDAO childTwoDAO;

   public save(Parent parent) throw DAOException{
      Connection connection = null;

      try{
      connection = getTXConnection(); 
      ParentDAO parentDAO   = new ParentDAO(connection);
      ChildTwoDAO childTwoDAO = new ChildOneDAO(connection);
      ChildTwoDAO childTwoDAO = new ChildTwoDAO(connection);

      parentDAO.save(...)

      childOneDAO.save(...)

      childTwoDAO.save(..)    

      connection.commit();

      }catch(Exception e){    
        connection.rollback();
      }finally{
      close(connection);
      }
   }
} 
```

然后你的服务可以只使用管理器类..而不用担心连接管理......每个“表”都有一个管理器，而要使用的 DAO 是缺点。

# php - 重写动态 URL 不起作用 (htaccess)

> ID：14221990
> 
> 赞同：0
> 
> 时间：2013-01-08T18:50:42.737
> 
> 标签：php, .htaccess, url-rewriting

我知道这是一个经常被问到的问题，我看到他们都尝试了很多不同的变化，但它不起作用，我不知道我做错了什么。很久以前我创建了一个 .htaccess 文件，以便它指向我的 404 错误页面，这对我来说很好，但我现在想重写我网站上的 url，因为有很多帖子而且它变得混乱带有url中的所有变量。我有一个名为 viewpost.php 的页面，它被传递了 1 个变量（还有其他页面，但这是示例） viewpost 被传递了 1 个变量，所以它变成 /viewpost.php?ID=10

```
RewriteEngine on
RewriteRule viewpost-ID-(.*)\.htm$ viewpost.php?ID=$1 
```

我将这两行添加到 htaccess 文件中。我尝试从文件中删除 404 代码并保存它，但它也没有使它工作。除了将此代码添加到 .htaccess 文件之外，我还需要做些什么吗？该网站目前托管在 atspace

```
Hosting OS  Proprietary *nix
Perl version    5.8.4
MySQL version    5.1
Perl path   /usr/bin/perl
Sendmail path   /usr/local/bin/sendmail
CGI-BIN path    not required    (You can run CGI, Perl scripts from any domain/subdomain folder)
Perl Modules    2900+ installed modules    (Click here to view the full list)
PHP Version  5.2.17 Change
PHP.INI Edit
PHP Info    [View PHP5.2.17 Info] [View PHP5.3.6 Info]
Directory Protection     Enabled 
```

这是主机设置页面上写的内容。我不确定能够重写 url 需要什么，但由于 .htaccess 文件目前正在为我的 404 页面工作，我假设它的设置很好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:03:26.550

也许`.htaccess`文件中的其他一些规则覆盖了您的规则，或者您可能遇到区分大小写的问题。`[NC,QSA,L]`在行尾添加`RewriteRule`。

```
RewriteEngine On
RewriteRule viewpost-ID-(.*)\.htm /viewpost.php?ID=$1 [NC,QSA,L] 
```

`NC`忽略大小写，`QSA`将任何额外的查询字符串参数附加到目标 URL 并告诉 Apache如果与当前 URL 匹配，则`L`停止处理更多条目。`RewriteRule`

# sql-server-2008 - SQL Server 查询不会在特定日期范围内运行

> ID：14221992
> 
> 赞同：0
> 
> 时间：2013-01-08T18:50:57.230
> 
> 标签：sql-server-2008, tsql

我有一个查询将在 01/07/13 - 01/13/13 的时间段内运行，但不会在 01/14/13 - 01/20/13 运行。唯一的区别是日期。当我获得非运行日期范围的估计执行计划时，它说我缺少索引。当我添加索引时，它运行良好。但是我不明白为什么会突然发生这种情况，因为这个查询每周在我们的应用程序后端运行。我将附上 2 个估计的执行计划。

预计执行计划在这里：

1.  运行[https://farm9.staticflickr.com/8360/8362357080_0c1bb4b27c_o.jpg](https://farm9.staticflickr.com/8360/8362357080_0c1bb4b27c_o.jpg)
2.  非运行[https://farm9.staticflickr.com/8373/8362357598_6f93f9769f_o.jpg](https://farm9.staticflickr.com/8373/8362357598_6f93f9769f_o.jpg)

这是查询：

```
select COUNT(*) 
from 
  PlannedShift 
where 
  ShiftDate >= '1/14/13' 
  and ShiftDate <= '1/20/13' 
  and (ShiftType = 'F' or ShiftType = 'G')
  and JobID in 
  (
        select ID from Assignment where ID in 
        (
                   3893,3894,3897,3896,3898,3899,3900,3905,3907,3908,4514,4502,4512,4544,4501,4551,4519,4554,4523,4509,4504,4534,3975,3751,3755,3756,4025,3732,3913,27277,3921,4027,4016,3889,3735,3742,3736,3768,3803,3758,3752,3769,4532,4507,4505,4529,4517,4521,3748,3773,4518,3971,4015,3912,3966,3888,3919,3938,3865,3961,4010,3999,21368,4496,4524,4537,4513,3733,3793,3795,3882,3791,3890,3976,3954,3867,3832,4530,3857,3891,4555,3833,3892,4553,4540,3868,3858,3774,3782,4951,4998,3977,5033,5005,3834,3821,3869,3934,27308,3994,27337,27336,4516,4028,3926,4500,3805,4545,27315,27324,27325,3822,3933,3835,3806,3823,3849,3870,3814,3978,4497,3979,27339,3980,3981,4001,4002,3982,3995,3970,3729,3777,3743,3807,3850,3837,3825,3808,3872,3836,3895,3824,3871,4515,3941,3927,3967,4510,4538,3737,3996,3809,3844,4044,5016,8050,8052,8051,3887,3918,3937,3771,3960,3965,4024,3847,3820,3831,4009,3998,3962,3910,4013,27326,27311,27310,27281,27312,27282,27302,27305,3950,3810,4003,3757,3778,4029,3928,27299,27300,4550,4526,3779,3873,4030,27313,4528,3990,3922,3988,3731,3747,3932,3948,4004,4031,3929,4546,4032,4033,5002,4034,3987,3838,3826,3851,3989,4863,3759,3761,4527,4548,3914,3942,3983,3991,3968,4019,4035,4536,4543,27284,27276,3801,4522,3799,3874,3815,3754,3760,4005,4036,4525,4541,27309,27307,27278,27279,27280,27301,27327,3949,4037,4038,4039,4017,4511,4542,4508,3974,3885,3886,3856,3786,4533,3741,3972,3939,3734,3772,3750,3767,3963,4549,4011,4520,4026,4499,3881,3846,3843,3819,3866,4000,3848,3940,3740,3964,4018,3816,3813,3992,3875,3780,4040,3924,3973,5019,4041,3753,3763,3800,3749,3762,3945,3901,3951,3796,4023,4020,5031,8054,5027,4996,27283,3953,3802,3946,27314,3943,4006,3902,3903,3863,3859,3839,4535,3827,3852,3876,3860,3877,3765,3952,3904,27298,3920,3911,4014,4012,27306,27303,27304,3955,3853,3915,3985,3984,3883,3788,3744,4007,3861,3787,3797,5000,4552,4556,7959,3789,3745,3738,3764,3854,3840,3828,4021,4042,3956,3916,3906,4498,4506,3935,3841,3811,3829,3878,4927,4925,4547,4503,4531,3930,3879,3776,3783,3957,4898,4539,4907,3775,4854
        ) 
        and ID not in 
        (
              select distinct JobID from EmployeeShift where JobID in 
              (
                    3893,3894,3897,3896,3898,3899,3900,3905,3907,3908,4514,4502,4512,4544,4501,4551,4519,4554,4523,4509,4504,4534,3975,3751,3755,3756,4025,3732,3913,27277,3921,4027,4016,3889,3735,3742,3736,3768,3803,3758,3752,3769,4532,4507,4505,4529,4517,4521,3748,3773,4518,3971,4015,3912,3966,3888,3919,3938,3865,3961,4010,3999,21368,4496,4524,4537,4513,3733,3793,3795,3882,3791,3890,3976,3954,3867,3832,4530,3857,3891,4555,3833,3892,4553,4540,3868,3858,3774,3782,4951,4998,3977,5033,5005,3834,3821,3869,3934,27308,3994,27337,27336,4516,4028,3926,4500,3805,4545,27315,27324,27325,3822,3933,3835,3806,3823,3849,3870,3814,3978,4497,3979,27339,3980,3981,4001,4002,3982,3995,3970,3729,3777,3743,3807,3850,3837,3825,3808,3872,3836,3895,3824,3871,4515,3941,3927,3967,4510,4538,3737,3996,3809,3844,4044,5016,8050,8052,8051,3887,3918,3937,3771,3960,3965,4024,3847,3820,3831,4009,3998,3962,3910,4013,27326,27311,27310,27281,27312,27282,27302,27305,3950,3810,4003,3757,3778,4029,3928,27299,27300,4550,4526,3779,3873,4030,27313,4528,3990,3922,3988,3731,3747,3932,3948,4004,4031,3929,4546,4032,4033,5002,4034,3987,3838,3826,3851,3989,4863,3759,3761,4527,4548,3914,3942,3983,3991,3968,4019,4035,4536,4543,27284,27276,3801,4522,3799,3874,3815,3754,3760,4005,4036,4525,4541,27309,27307,27278,27279,27280,27301,27327,3949,4037,4038,4039,4017,4511,4542,4508,3974,3885,3886,3856,3786,4533,3741,3972,3939,3734,3772,3750,3767,3963,4549,4011,4520,4026,4499,3881,3846,3843,3819,3866,4000,3848,3940,3740,3964,4018,3816,3813,3992,3875,3780,4040,3924,3973,5019,4041,3753,3763,3800,3749,3762,3945,3901,3951,3796,4023,4020,5031,8054,5027,4996,27283,3953,3802,3946,27314,3943,4006,3902,3903,3863,3859,3839,4535,3827,3852,3876,3860,3877,3765,3952,3904,27298,3920,3911,4014,4012,27306,27303,27304,3955,3853,3915,3985,3984,3883,3788,3744,4007,3861,3787,3797,5000,4552,4556,7959,3789,3745,3738,3764,3854,3840,3828,4021,4042,3956,3916,3906,4498,4506,3935,3841,3811,3829,3878,4927,4925,4547,4503,4531,3930,3879,3776,3783,3957,4898,4539,4907,3775,4854
              ) 
              and ShiftTypeCode = 'S' and ShiftDate >= '1/14/13' and ShiftDate <= '1/20/13'
        ) 
        and TypeCode <> 'E'
  ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:01:47.237

对于“非正在运行”的情况，行数估计值似乎很遥远。当涉及的数据集较小时，通常使用嵌套循环连接。如果这是一个错误的假设，嵌套循环可能需要很长时间。

尝试获取一个实际的执行计划（让查询在夜间运行）并将其保存为 XML。然后检查实际行数与预期不匹配的位置。确保您的统计信息在该表上是最新的。

如果您需要更多帮助，请在此处发布实际的 XML 执行计划。

有关嵌套循环连接算法的更多详细信息，您可以在此处找到：http: [//sqlity.net/en/1471/a-join-a-day-the-nested-loops-join/](http://sqlity.net/en/1471/a-join-a-day-the-nested-loops-join/)

# visual-studio-2010 - TIBCO 自动化构建

> ID：14221994
> 
> 赞同：1
> 
> 时间：2013-01-08T18:51:03.783
> 
> 标签：visual-studio-2010, tfs, build-automation, tibco, automated-deploy

我对 TIBCO 环境真的很陌生，我正在研究 TIBCO BW。我真的很想知道“如何构建和部署 TIBCO”这个概念。各种书籍告诉我，在TIBCO Designer中完成开发后，TIBCO Admin会进行部署和管理。但是，我的导师指出我将使用 TIBCO AMX（3.2？），我的项目将设置“自动构建”（是的！我不知道！）

1) 使用 AMX 构建和部署 TIBCO 的概念

2）关于“自动构建”的任何建议或文章或博客？

非常感谢！！

PS如果你也对TFS自动化构建感兴趣，请看下面的链接！

[VS2010 TFS 自动构建](https://stackoverflow.com/questions/14222332/vs2010-tfs-automated-build)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T05:27:17.950

要自动化 TIBCO 构建和部署，请阅读 TRA 提供的 build-ear 命令和 appmanage 命令。

查看安装 TIBCO 时将获得的 TRA 文档以了解详细信息/选项。

您可以将它与 ANT 或 Maven 一起使用，并让脚本自动运行。

同样感兴趣的可能是[TIBant](http://windyroad.org/software/open-source/tibant/)

米

# javascript - 将文本复制到其他输入字段 onblur

> ID：14221996
> 
> 赞同：0
> 
> 时间：2013-01-08T18:51:11.647
> 
> 标签：javascript, jquery

我正在使用 jQuery 在模糊时将一个输入字段的值复制到另一个输入字段。这是我的代码：

```
$( "input[id$=token-input-search_field]" ).blur( function() {
    $(this).val() = $('input[id$=search_field]').val;
}); 
```

但这似乎不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T18:55:42.097

```
$( "input[id$=token-input-search_field]" ).blur( function() {
    $(this).val( $('input[id$=search_field]').val() );
}); 
```

# vba - 如何通过 Word 2007 以 pdf 格式打印单个文档（邮件合并）

> ID：14221997
> 
> 赞同：0
> 
> 时间：2013-01-08T18:51:11.227
> 
> 标签：vba, pdf, printing, ms-word, mailmerge

我有一个有趣的问题，但在某处找不到答案。我需要打印大约 2000 封信，当然我会使用 Mail Merge 来完成。问题：我需要每一个都以 pdf 格式打印出来。我发现我必须在 Word 中使用 VBA 宏来获取单个字母（而不是在一个文档中获取全部字母），这已经有效。但我不知道如何将它们自动转换成 pdf。

有没有人有想法可以帮助我？我感谢您的帮助。

到目前为止我得到了什么（通过邮件合并制作单个文档）：

```
 Sub EinzelDatei() 

    Dim actpath As String, Dateiname As String 
    Dim fs As Object 
    Dim LetzterRec As Long 

    Const path As String = "D:\Test\" 

    On Error GoTo 0 

    Application.ScreenUpdating = False 
    Application.Visible = False 

    ActiveDocument.MailMerge.DataSource.ActiveRecord = wdLastRecord 
    LetzterRec = Word.ActiveDocument.MailMerge.DataSource.ActiveRecord 

    ActiveDocument.MailMerge.DataSource.ActiveRecord = wdFirstRecord 

    With ActiveDocument.MailMerge 
        .DataSource.ActiveRecord = wdFirstRecord 
        Do 
            If .DataSource.ActiveRecord > 0 Then 
                .Destination = wdSendToNewDocument 
                .SuppressBlankLines = True 

               With .DataSource 

                    actpath = path & "\"          'Der aktuelle Pfad wird zusammengesetzt 

                    Set fs = CreateObject("Scripting.FileSystemObject") 
                    If fs.folderexists(actpath) = False Then MkDir (actpath) 'Wenn der Pfad         noch nicht existiert wird er jetzt erstellt 

                    .FirstRecord = .ActiveRecord 
                    .LastRecord = .ActiveRecord 

                Dateiname = actpath & _ 
                    .DataFields("No").Value & "-" & _ 
                    .DataFields("Surname").Value & "," & _ 
                    .DataFields("First_Name").Value & ".docx"                  'Dateiname =                 Name, Vorname.doc 
                End With 
                .Execute Pause:=False 

                ActiveDocument.SaveAs FileName:=Dateiname                   '
                ActiveDocument.Close False 
            End If 

        If .DataSource.ActiveRecord < LetzterRec Then 
             .DataSource.ActiveRecord = wdNextRecord 
          Else 
             Exit Do 
          End If 
       Loop 

    End With 

    MsgBox ("Erledigt") 
    Application.Visible = True 
    Application.ScreenUpdating = True 

    End Sub 
```

先感谢您！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:07:08.657

利用

ActiveDocument.SaveAs FileName:=Dateiname, FileFormat:=wdsaveformat.wdFormatPDF

或者可能

ActiveDocument.SaveAs2 文件名：=日期名称，文件格式：=wdsaveformat.wdFormatPDF

但它只能在 Word 2007 SP2（我认为）及更高版本中工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-01T16:49:53.843

在 Word 2007 中，导出功能可以将文件另存为 pdf：

```
ActiveDocument.ExportAsFixedFormat OutputFileName:= _
        "Path to PDF", ExportFormat:= _
        wdExportFormatPDF 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-16T21:43:44.530

有点简单，但您可以将默认打印机设置为 PDF 创建器，然后使用打印功能。在 2010 年，一旦您完成合并，您将获得打印或编辑选项。

# java - 模型对象的抽象合理吗？

> ID：14221998
> 
> 赞同：0
> 
> 时间：2013-01-08T18:51:14.250
> 
> 标签：java, objective-c, oop, coding-style

我目前正在做一个项目，我正在添加一个新的休息界面。我编写了一个通用转换器，将响应转换为一些对象。现在我问自己是否应该将这些对象转换为让它们调用休息接口对象到一组新的对象，这将是我的模型。大多数时候，数据是相同的，但有时我会有不同的数据表示。例如，休息响应将有一个日期作为时间戳，但我的模型对象将有一个日期对象。

另一件好事是，如果我决定将其余接口更改为例如肥皂，我的客户端代码将仅依赖于模型对象，因此我只需要处理转换。一个缺点是，如果我必须更改某些内容，我需要在两个地方进行。

我不确定这个主题的最佳实践是什么。我还将剩余接口对象转换为模型对象（发送请求和响应的两种方式）。很高兴听到对此的一些想法，也许有人知道一些可以很好地解释这一点的资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:28:05.550

听说过“过早优化”吗？一般来说，在设计您的应用程序时，我不会太在意性能。确保您创建的代码易于维护，易于在未来扩展，并且通常是面向未来的（例如，从 REST 切换到 SOAP 不会造成不必要的麻烦；这可能是一个比您想象的更现实的场景片刻）。你不应该仅仅因为你“认为”它可能有更好的性能，或者因为你认为“好的设计”可能有较差的性能，就选择一个糟糕的设计。

老实说，您计划每秒进行多少次 REST 调用，以及单个 REST 结果中有多少百万个对象？您可以创建最好的设计，如果您稍后发现性能瓶颈（浪费了太多的 CPU 时间、浪费了太多的内存等），那么您就开始优化这些瓶颈。如果你幸运的话，一开始就不会有瓶颈。如果您主要关心的是创建地球上见过的最快的代码段，那么您一开始就不会使用 Java，您可能会使用最低级别的 C 语言，在任何必须挤出最后一个的地方使用内联汇编CPU性能下降。

所以我不会在 REST API 之后对我的设计进行建模，我会按照我认为应该的方式对我的设计进行建模，以最简单的方式对应用程序的其余部分进行编码，然后编写一个导入器/导出器，将 REST 转换为我的设计和我的设计到 REST。如果您随后切换到另一种技术，如 SOAP，我只需要重写导入器/导出器，而不是整个应用程序。

不过也有例外：我个人不喜欢任何 OO 语言中的日期对象。时间戳是一个完美的日期表示恕我直言，它很容易使用（比较，添加/减去偏移量等）并且它具有非常低的内存开销（只是数字，通常是一个基元，甚至不是内存分配必要的）。因此，除非您需要日期对象，否则您无法按需要存储或显示此值，我会将时间戳保留为时间戳，如果您将来切换到 SOAP 并且它提供日期而不是时间戳，我宁愿将它们转换为时间戳在进口商中并在出口商中返回日期。然而，这只是我。