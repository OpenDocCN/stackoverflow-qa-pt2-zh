# StackOverflow 问答 15008000-15008999

# iphone - Cant pause and resume nstimer in another class

> ID：15008001
> 
> 赞同：-1
> 
> 时间：2013-02-21T16:58:56.457
> 
> 标签：iphone, objective-c, cocoa-touch, ios6

Have myTimer defined in class One

```
 @property (nonatomic, retain) NSTimer *myTimer;

 @synthesize myTimer;

- (void)viewDidLoad {

 myTimer = [NSTimer scheduledTimerWithTimeInterval:2.6
                             target:self
                           selector:@selector(updateView:)
                           userInfo:nil
                            repeats:YES];

[super viewDidLoad];

}

- (void)updateView:(NSTimer *)theTimer
{
if  (index < [textArray count])
{

   self.textView.text = [self.textArray objectAtIndex:index];
   self.imageView.image = [self.imagesArray objectAtIndex:index];
   index++;
}else{

    index = 0;

} 
```

I want to pause and resume myTimer in mainviewcontroller class.

In mainviewcontroller.h

```
@property (nonatomic, strong) ClassOne *oneclass; 
```

and in mainviewcontroller.m

```
@synthesize oneclass; 
```

then via UIButton in mainviewcontroller pausing and resuming myTimer

```
-(void)playpauseAction:(id)sender {

if([audioPlayer isPlaying])
{
    [sender setImage:[UIImage imageNamed:@"music.png"] forState:UIControlStateNormal];

    [audioPlayer pause];

    [myTimer invalidate];

}else{

    [sender setImage:[UIImage imageNamed:@"audiostop.png"] forState:UIControlStateNormal];

    [audioPlayer play];

    [myTimer fire];

    if(isFirstTime == YES)
    {
        self.timer = [NSTimer scheduledTimerWithTimeInterval:06.0
                                                      target:self
                                                    selector:@selector(displayviewsAction:)
                                                    userInfo:nil
                                                     repeats:NO];
        isFirstTime  = NO; } } } 
```

But getting semantic issue and ARC Semantic issue error

**unknown receiver myTimer did you mean NSTimer. No known class method for selector invalidate and fire**

Thanks for help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:20:50.303

看起来您正在 viewDidLoad 方法调用中创建计时器对象。在您尝试操作计时器属性之前，请确保实际加载了视图，否则结果将不会令人愉快。此外，就像@Anoop Vaidya 所说，您需要确保在尝试访问其属性之前初始化一个类 One 对象。这样做的一个好方法是通过以下方式修改您的 mainViewController 代码：

```
-(void)playpauseAction:(id)sender {
   //This code assumes there is an ivar in mainViewController called aClassOneObject
   if([audioPlayer isPlaying]) {
     [sender setImage:[UIImage imageNamed:@"music.png"] forState:UIControlStateNormal];
     [audioPlayer pause];

     if (aClassOneObject)
       [[aClassOneObject myTimer] invalidate];
     else
       //Log error that the aClassOneObject was nil

   } else {
     [sender setImage:[UIImage imageNamed:@"audiostop.png"] 
             forState:UIControlStateNormal];

     [audioPlayer play];

     if (aClassOneObject)
       [[aClassOneObject myTimer] fire];
     else
       //Log error that the aClassOneObject was nil

     if(isFirstTime == YES) {
       self.timer = [NSTimer scheduledTimerWithTimeInterval:06.0
                                                     target:self
                                                   selector:@selector(displayviewsAction:)
                                                   userInfo:nil
                                                    repeats:NO];
       isFirstTime  = NO;
     }
   } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:03:42.653

myTimer 是否设置为 的属性`ClassOne`？

```
@property (nonatomic, strong) NSTimer *myTimer; 
```

和

```
@synthesize myTimer; 
```

然后你可以在你的主视图控制器中调用`[oneClass.myTimer invalidate];`和`[oneClass.myTimer fire];`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T17:05:27.933

当您从其他类调用计时器时，您需要通过创建第一类的对象来调用。

或者您可以从二等舱向一等舱发送通知，该通知将被观察到，然后您需要的方法将被调用。

# sql - 从自定义 T-SQL 函数返回 Varchar

> ID：15008007
> 
> 赞同：4
> 
> 时间：2013-02-21T16:59:02.837
> 
> 标签：sql, sql-server, tsql, function

我想从我定义如下的函数返回一个简单的 varchar 值：

```
CREATE FUNCTION getCustomerType (@orderNumber INT)
    RETURNS VARCHAR(30)
AS
Return 
    (
    select custtype from Customer c 
        join order o on o.customerid =  c.customerid
    where o.orderNumber = @orderNumber 
 )
GO

select getCustType(1063609) 
```

应该返回下订单的客户类型#1063609 但失败

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T17:06:57.347

我会将您的函数的语法更改为以下内容：

```
CREATE FUNCTION dbo.getCustomerType (@orderNumber INT)
    RETURNS VARCHAR(30)
AS
begin
  declare @custtype varchar(30)
  SET @custtype = (select custtype 
                      from dbo.Customer c 
                      join dbo.[order] o 
                        on o.customerid =  c.customerid
                      where o.orderNumber = @orderNumber)

  return @custtype
end 
```

然后，当您使用架构（`dbo.`如下）调用该函数时，您将使用：

```
select dbo.getCustomerType(10636909) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/dedb6/1)

该函数也可以写成（感谢@MartinSmith）：

```
CREATE FUNCTION getCustomerType (@orderNumber INT)
    RETURNS VARCHAR(30)
AS
begin
  return (select custtype 
                      from dbo.Customer c 
                      join dbo.[order] o 
                        on o.customerid =  c.customerid
                      where o.orderNumber = @orderNumber)
end 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/47ea3/1)

# html - HTML 所需的 DOCTYPE 包括？

> ID：15008010
> 
> 赞同：0
> 
> 时间：2013-02-21T16:59:06.223
> 
> 标签：html, coding-style

我正在开发一个新的 Web 应用程序，该应用程序在所有页面上都包含一个公共页脚。我想知道是否有必要，或者让页脚文件包含 HTML、HEAD 和 BODY 标记是否有任何好处，如下所示？

这是好还是坏的做法？对我来说，这似乎只是让代码膨胀。

```
<html>
    <head>
        ... common js and css files
    </head>
    <body>
        ... html for the current page

        <!-- Footer -->
        <html>
            <head></head>
            <body>
                ... legal information
            </body>
        </html>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:11:34.407

不，html 文档中应该只有一个 html 和 body 标签，除非它包含在另一个 iframe 中。

符合标准的 html 文档将包含以下结构：

```
<html>
    <head>
        ... common js and css files
    </head>
    <body>
        <div>   
        ... html for the current page
        </div>
        <!-- Footer -->
        <div>
                ... legal information
        </div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:06:34.333

不，那个标记是错误的，在页脚中你应该只包含与页脚相关的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T17:06:48.747

不，您的常见包含应该只包含页面特定部分的 HTML。主模板应包含 html、head、body 等标签。

# asp.net - 401 - 未经授权：由于凭据无效，访问被拒绝

> ID：15008020
> 
> 赞同：4
> 
> 时间：2013-02-21T16:59:29.243
> 
> 标签：asp.net, asp.net-mvc, iis, iis-6

我有一个问题，我有一个 asp.net mvc4 应用程序通过 web 部署发布到我们的登台服务器。我看到的行为是，当从临时服务器本身访问时，应用程序运行得很好，但是当被远程设备访问时，我得到了错误`401 - Unauthorized: Access is denied due to invalid credentials.`

如果我在登台服务器上打开 IIS，事情对我来说真的很奇怪：`-> select the site -> click on error pages -> edit feature settings -> select Detailed errors` 一旦选择了“详细错误”，即使远程浏览器也开始正常工作。但是一旦我将错误切换回某种“自定义”风格，然后远程浏览器再次失败。

雪上加霜的是，我的 ELMAH、登台服务器事件日志和 IIS 日志都没有捕捉到任何东西。

打开“详细错误”时如何解决此错误似乎以某种方式解决了该问题。显然，答案不仅仅是留下“详细错误”......

谢谢。

### 更新#1

根据@sarhdan 引用的答案，我发现我在共享布局中调用了最近放置在控制器范围内的控制器上的操作`[Authorize]`。因此，每当我被迫前往使用该布局的登录页面时，它就会陷入一些循环依赖......它无法呈现登录页面，因为我没有登录，所以我可以'不访问渲染登录页面所需的资源......

# 我将提供额外积分的奖励问题：D：

为什么“详细错误”设置会导致此错误“神奇地”解决......实际问题仍然存在，并且应该仍然产生错误......？

# facebook - 如何使用 Facebook Graph API 将图像上传到应用程序自己的页面？

> ID：15008022
> 
> 赞同：1
> 
> 时间：2013-02-21T16:59:32.757
> 
> 标签：facebook, facebook-graph-api

我正在尝试创建一个 PHP 脚本来将照片上传到应用程序自己的粉丝页面，并让它们在粉丝页面时间轴中显得很大。类似于[https://www.facebook.com/Instagram](https://www.facebook.com/Instagram)。

这是我拥有的代码，但尽管它在 OpenGraph URL 中使用 page_id，但它会一直发布到我的个人相册，而不是页面相册。

```
<?php

    $app_id = "APP_ID";
    $app_secret = "APP_SECRET";
    $post_login_url = "LOGIN_URL";
    $fan_page_id = "PAGE_ID";

    $code = $_REQUEST["code"];

    //Obtain the access_token with publish_stream,manage_pages permission 
    if(empty($code)){ 
        $dialog_url= "http://www.facebook.com/dialog/oauth?"
        . "client_id=" .  $app_id 
        . "&redirect_uri=" . urlencode( $post_login_url)
        . "&scope=publish_stream,manage_pages";
        echo("<script>top.location.href='" . $dialog_url . "'</script>");
    }
    else {
        $token_url="https://graph.facebook.com/oauth/access_token?"
        . "client_id=" . $app_id 
        . "&redirect_uri=" . urlencode( $post_login_url)
        . "&client_secret=" . $app_secret
        . "&code=" . $code;
        $response = file_get_contents($token_url);
        $params = null;
        parse_str($response, $params);
        $access_token = $params['access_token'];

    // Show photo upload form to user and post to the Graph URL
    $graph_url= "https://graph.facebook.com/".$fan_page_id."/photos?access_token=" .$access_token;

    echo '<html><body>';
    echo '<form enctype="multipart/form-data" action="' .$graph_url .' "method="POST">';
    echo 'Please choose a photo: ';
    echo '<input name="source" type="file"><br/><br/>';
    echo '<input type="submit" value="Upload"/><br/>';
    echo '</form>';
    echo '</body></html>';
    }
?> 
```

不从 CURL 返回任何内容的代码示例 v2

```
 $fb_page_id = "fb_page_id";
    $user_id = 'user_id'; 
    $fb_access_token = 'fb_access_token';

    $args = array(
        'url' => 'http://www.mysite.com/savefiles/smalls/comps/1/comp_1_600.jpg',
        'message' => 'SOME CAPTION TEXT'
    );
//Get Page Access Token - (as opposed to your user access token - requires manage_pages permission)
    $accounts = 'https://graph.facebook.com/'.$user_id.'/accounts?access_token='.$fb_access_token;
    $accounts_data = file_get_contents($accounts,0,null,null);
    $account_data = json_decode($accounts_data, true);

    foreach ($account_data['data'] as $accountdata) {

        $account_page_id = $accountdata['id'];
        $page_access_token = $accountdata['access_token'];
        if($account_page_id == $fb_page_id){
            $my_page_access_token = $page_access_token; 
            //echo $my_page_access_token . '<br/>';
        }   
    }

    //Not Tested - Just in Case     
    if($my_page_access_token==''){
        $my_page_access_token = $fb_access_token;
    }

//Make Upload Call
    $ch = curl_init();
    $url = 'https://graph.facebook.com/'.$fb_page_id.'/photos?access_token='.$my_page_access_token;
   // echo $url . '<br/>';
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_HEADER, false);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $args);
    $data = curl_exec($ch);
    $post_object = json_decode($data);
    $post_data = get_object_vars($post_object);
    $post_id = $post_data['post_id'];
    curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:42:20.670

您应该能够像上传任何其他页面一样将照片上传到您的应用页面。首先设置您的上传参数以传递给 Facebook：

```
$args = array(
    'url' => 'URL-OF-IMAGE' ,
    'message' => 'SOME CAPTION TEXT'
    ); 
```

在接下来的步骤中，请确保您已经拥有用户 ID、页面 ID 和有效的访问令牌：

```
//Get Page Access Token - (as opposed to your user access token - requires manage_pages permission)
$accounts = 'https://graph.facebook.com/'.$user_id.'/accounts?access_token='.$fb_access_token;

    $accounts_data = file_get_contents($accounts,0,null,null);

    $account_data = json_decode($accounts_data, true);

    foreach ($account_data['data'] as $accountdata) {

        $account_page_id = $accountdata['id'];

        $page_access_token = $accountdata['access_token'];

        if($account_page_id == $fb_page_id){

            $my_page_access_token = $page_access_token; 

            //echo $my_page_access_token . '<br/>';
        }   
    }

//Not Tested - Just in Case     
if($my_page_access_token==''){
    $my_page_access_token = $fb_access_token;
}

    //Make Upload Call
    $ch = curl_init();
    $url = 'https://graph.facebook.com/'.$fb_page_id.'/photos?access_token='.$my_page_access_token;
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_HEADER, false);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $args);
    $data = curl_exec($ch);
    $post_object = json_decode($data);
    $post_data = get_object_vars($post_object);
    $post_id = $post_data['post_id'];
    curl_close($ch); 
```

这会将您的照片上传到您页面上与您的应用具有相同名称的相册中。如果此相册尚不存在，则会在首次上传时自动创建。这张照片也将显示在您的时间线上，并带有您的标题。只要您具有适当的身份验证、可变数据（例如页面 ID、用户 ID 和访问令牌）以及您的参数，上面的大部分代码都经过测试并且可以正常工作。

# path-finding - 完整图上的最小成本周期

> ID：15008025
> 
> 赞同：1
> 
> 时间：2013-02-21T16:59:40.023
> 
> 标签：path-finding, graph-traversal

我有一个带有无向加权边的[完整图](http://en.wikipedia.org/wiki/Complete_graph)，需要通过图节点的子集找到最低成本[循环。](http://en.wikipedia.org/wiki/Cycle_%28graph_theory%29)与[Traveling Salesman](http://en.wikipedia.org/wiki/Travelling_salesman_problem)不同，*任何*节点都可以被访问*不止一次*，而*不是所有*节点都需要访问，我的意思是路径应该具有最小的遍历边权重之和。

例如，这是一个[邻接矩阵](http://en.wikipedia.org/wiki/Adjacency_matrix)形式的图：

```
 a b c d
a 0 3 4 5
b 3 0 2 4
c 4 2 0 1
d 5 4 1 0 
```

其中每条边的权重用于每个元素。开始和结束于`a`并包括的周期`[b,d]`看起来像

```
[a,b,d,a] -> 3+4+5 = 12
[a,b,d,b,a] -> 3+4+4+3 = 14
[a,b,c,d,c,a] -> 3+2+1+1+4 = 11 
```

是否有一个最佳算法，或者一个非常好的启发式算法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T12:42:38.797

循环开始和结束于`a`并包括`[b,d]`简单地意味着循环必须访问节点a，b，d。`[a,b,d,a] = [b,d,a,b]`（循环正确）。您的问题称为 k-TSP。见[这里](https://cstheory.stackexchange.com/questions/14079/shortest-cycle-with-a-specific-number-of-vertices)。但这很难实现，可能不是您想要的。

所以我只会给你一个更简单的方法。首先构造仅通过这些节点的最短循环。然后用两个节点之间的最小路径替换每条边。我认为这是合理的，我忽略了最优性。以下是步骤：

*   V=nodes E=edges 和 M=must-visit 节点。
*   `C`通过在 M 上运行[TSP](http://en.wikipedia.org/wiki/Travelling_salesman_problem) （不使用其他节点）创建循环，添加额外的边来制作循环。
*   现在使用所有节点 V。对于`uv`中的每条边，`C`请执行以下操作：
*   查找和使用[Dijsktra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)`w`之间的最短路径（图中应该没有负循环）。`u``v`
*   替换`uv`为`w`。

# jquery - 在标签移动到另一个页面之前单击标签上的声音

> ID：15008026
> 
> 赞同：2
> 
> 时间：2013-02-21T16:59:40.753
> 
> 标签：jquery, html, audio

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:00:49.307

尝试这个。

```
 $('#menu li a').click(function (e) {
       e.preventDefault();
       var sound = $("#audio");
       sound.get(0).play();

       setTimeout(function () {
           window.location.href = $(this).attr('href');
       }, 3000);

   }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:31:36.553

Here is what you need... this will play the audio and once the audio finishes playing, goes to the target location...

**HTML**

```
<audio id="audio" hidden>
    <source src="./sound/sound.mp3" type="audio/mpeg">
</audio>

<div id="menu">
    <li>
        <a href="http://www.google.com">Click to play...</a>
    </li>
</div> 
```

**jQuery**

```
var target;

function checkAudio() {
    if($("#audio")[0].paused) {
        window.location.href  = target;
    } else {
        setTimeout(checkAudio, 1000);
    }
}

$('#menu li a').click(function(e) {
    e.preventDefault();

    target = $(this).attr('href');

    console.log("Let's play");

    var sound = $("#audio");
    sound.get(0).play();

    setTimeout(checkAudio, 1000);
}); 
```

The code checks for the state of the audio each second, you can change the value of timeout to check less frequently.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T17:03:43.387

您需要添加延迟并仍然转到您想要的页面，您可以这样做。

```
$('#menu li a').click(function(e) {
          var destination = $(this).attr('href');
             e.preventDefault();
             var sound = $("#audio");
           sound.get(0).play();
 setTimeout(function() { window.location.href = destination; }, 1000);
    }); 
```

只需设置声音的时间或您要等待的时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T17:11:34.503

在控制转到另一个页面之前，您必须停止该页面。为此使用 return false（停止页面）和 return true（转移控件）。下面的代码可能很难看，但我认为它对你有用

```
<script>
   function playsound()
   {
     return false;
     var sound = $("#audio");
     if(sound.get(0).play())
       return true;

   }
</script> 
```

并在 html

```
 <a href="page.html" onclick="return playsound();">element</a> 
```

# git - 澄清 gitolite 用户如何工作

> ID：15008027
> 
> 赞同：1
> 
> 时间：2013-02-21T16:59:45.483
> 
> 标签：git, gitolite, git-extensions

我已经在 Ubuntu Server（最新）上设置了我的 GIT 服务器：

我在 Windows 中使用 puttyGen 来创建公钥和私钥。然后我将公钥上传到“gitolite-admin”中的“keydir”并将其推回服务器。到目前为止这么好。

此时，我将我的 conf 文件更改为：

```
@admin = gitolite
@dev = user1 user2

repo gitolite-admin
    RW+     =   @admin

repo site
    RW+     =   @dev

repo testing
    RW+     =   @all 
```

对于那些想知道的人，我的密钥目录中确实有一个 user1.pub 和 user2.pub。

此时我加载了 GIT 扩展并尝试通过以下方式连接： `gitolite@myserver:site with SSH key user1.ppk`

但是，当我按下“尝试连接”时，它会将我登录为 gitolite 并列出它不应该看到的所有存储库，包括管理员。（我希望只是看到列出的“站点”）但显然它以“gitolite”的身份登录

然后我尝试`user1@server:site" and was presented with a`为 user1` 设置密码。

我哪里错了，我查看了文档，找不到任何东西。我显然在这里犯了这样一个菜鸟的错误......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:25:11.373

“查看所有回购”意味着您以某种方式绕过了 gitolite。

到 gitolite 服务器的 ssh 连接必须始终使用管理 gitolite 存储库的帐户：git 或 gitolite（我怀疑它是 gitosis，就像你的问题一样），你永远不会以 user1 身份连接。

# javascript - 使用 setAttribute 分配 id

> ID：15008028
> 
> 赞同：2
> 
> 时间：2013-02-21T16:59:47.790
> 
> 标签：javascript, class, setattribute

```
function createNewTodo(todoItem) {
    var li = document.createElement("li");
    li.setAttribute("id", todoItem.id);

    var spanTodo = document.createElement("span");
    spanTodo.innerHTML =
        todoItem.who + " needs to " + todoItem.task + " by " + todoItem.dueDate;

    var spanDone = document.createElement("span");
    spanDone.setAttribute("id", todoItem.id); //where I try to assign id
    if (!todoItem.done) {
        spanDone.setAttribute("class", "notDone");
        spanDone.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
    }
    else {
        spanDone.setAttribute("class", "done");
        spanDone.innerHTML = "&nbsp;&#10004;&nbsp;";        
    }
    spanDone.setAttribute("id", todoItem.id);

    var spanDelete = document.createElement("span");
    spanDelete.setAttribute("id", todoItem.id);
    spanDelete.setAttribute("class", "delete");
    spanDelete.innerHTML = "&nbsp;&#10007;&nbsp;";

    spanDelete.onclick = deleteItem;
    spanDone.onclick = updateDone;

    li.appendChild(spanDone);
    li.appendChild(spanTodo);
    li.appendChild(spanDelete);

    return li;
}

function updateDone(e) {
  var spanClicked = e.target.id;
  console.log("you clicked this span" + id);
 } 
```

我的目标是在用户点击它时更新 spanDone。我需要为每个跨度分配一个单独的 id，该 id 可以从我之前在代码中创建的名为 todoItem 的对象中获得。当我查看控制台时，虽然我不断收到错误“id is not defined”。我不明白为什么我不能在那里分配 id。关于如何修改我的代码以便我可以使用 todoItem id 分配 spanDone 的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:07:27.053

你的意思是使用你的变量吗？

```
function updateDone(e) {
  var spanClicked = e.target.id;
  console.log("you clicked this span" + spanClicked);
} 
```

# python - 加载 json 文件在 python 中给出错误

> ID：15008032
> 
> 赞同：0
> 
> 时间：2013-02-21T16:59:53.983
> 
> 标签：python, json

我正在加载包含在文本文件中的以下 json：

```
{
"data sources" : [
"http://www.gcmap.com/" 
] ,
"metros" : [
{
"code" : "SCL" ,
"name" : "Santiago" ,
"country" : "CL" ,
"continent" : "South America" ,
"timezone" : -4 ,
"coordinates" : {"S" : 33, "W" : 71} ,
"population" : 6000000 ,
"region" : 1
} , {
"code" : "LIM" ,
"name" : "Lima" ,
"country" : "PE" ,
"continent" : "South America" ,
"timezone" : -5 ,
"coordinates" : {"S" : 12, "W" : 77} ,
"population" : 9050000 ,
"region" : 1
} ]} 
```

然后我将此文件与将打开它的 python 文件放在同一目录中，并使用以下代码：

```
import json

json_file = open('json.txt')
data = json.load(json_file)
json_file.close()

print (data) 
```

然而，这给了我一个错误：

```
Traceback (most recent call last):
  File "/Users/tylerharrington/Desktop/workspace/Assignment2/src/cs242assignment2/UserInterface.py", line 11, in <module>
    data = json.load(json_file)
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/json/__init__.py", line 264, in load
    parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/json/__init__.py", line 309, in loads
    return _default_decoder.decode(s)
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/json/decoder.py", line 352, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/json/decoder.py", line 368, in raw_decode
    obj, end = self.scan_once(s, idx)
ValueError: Expecting property name enclosed in double quotes: line 1 column 1 (char 1) 
```

这是否表明 python 文件有错误或我的代码中有错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:06:05.130

```
Expecting property name enclosed in double quotes: line 1 column 1 (char 1) 
```

您的文件可能在左大括号后的第一行有一些无效字符`{`

转储文件`od`以检查文件内容或在 Windows 中使用十六进制编辑器检查文件

或者只需使用您的文件内容运行以下代码片段

```
with open('json.txt') as fin:
    for line in fin:
        print [hex(ord(e)) for e in line] 
```

这将使您对冒犯的角色有一个公平的认识

或者只是

```
hex(ord(open('test.txt').read(2)[1])) 
```

# java - CloudBlockBlob downloadBlockList 有时会抛出存储异常（认证失败）

> ID：15008035
> 
> 赞同：0
> 
> 时间：2013-02-21T17:00:11.223
> 
> 标签：java, azure

我正在为我的服务实施分块上传解决方案，该解决方案将 blob 存储在 Azure 中。这是使用 azure-sdk-for-java 用 Clojure 编写的。我能够将块作为块 blob 中的块上传和提交。但是，在我上传任何块之前，必须执行一些验证。这包括检查用户到目前为止上传了多少内容与他们提供的内容范围（我们不允许重新上传块）。

为了完成这些检查，我使用 CloudBlockBlob 的方法 downloadBlockList 来根据需要获取有关已提交和未提交块的数据（并在需要提交时获取块列表）。但是，在某些情况下，这会失败，并且我收到以下异常：“com.microsoft.windowsazure.services.core.storage.StorageException：服务器无法对请求进行身份验证。确保 Authorization 标头的值格式正确，包括签名。”

这很奇怪，因为如果在上传块后调用 downloadBlockList，我永远不会遇到此失败，但如果我调用该方法但不上传，我会得到它（在某些情况下，但总是相同的情况下）。如果我捕捉到异常并立即再次调用 downloadBlockList，它工作正常。

我已经使用 tcpdump 来查看正在发送的标头，因为在某些论坛上人们提到 x-ms-date 设置错误，但事实并非如此，并且看起来没有任何错误。响应为 403，并抱怨请求中的 MAC 签名错误。

有谁知道为什么有时会发生这种情况，但是如果我再次调用该方法，之后立即以相同的方式，它会起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:17:05.723

我在 Azure 存储 SDK 上工作。您能否提供您提到的跟踪。如果可能的话，这个错误发生的帐户名称/时间，所以我可以在我们这边调查一下。您可以私下发送到 Microsoft /.com 上的 joegiard。

我们将使用调查结果为 stackoverflow 社区更新此线程。

乔

# vb.net - 从数据库中将数据插入到 vb.net 中的数据网格中

> ID：15008041
> 
> 赞同：0
> 
> 时间：2013-02-21T17:00:44.490
> 
> 标签：vb.net

我正在尝试从数据库中检索数据。我可以连接到数据库并检索数据，但是当我尝试将其放入数据网格时，我收到一条错误消息

> 索引超出范围异常未处理 ORDERDETAILS.PRODUCTID。

SQL 语句有效，但不确定将其输入数据网格的代码。任何帮助，将不胜感激。

```
 Dim conn As New OleDb.OleDbConnection
    conn.ConnectionString = _
    "Provider=msdaora;Data Source=orabis;User Id=112221739;Password=112221739;"

    conn.Open()

    Dim work As Integer
    work = CInt(ComboBox1.SelectedItem)

    Dim cmd As New OleDbCommand

    cmd = conn.CreateCommand()

    cmd.CommandText = "SELECT     ORDERDETAILS.PRODUCTID,PRODUCTS.PRODUCTDESCRIPTION,ORDERDETAILS.ORDERQUANTITY,ORDERDETAILS. ORDERQUANTITYTOTAL FROM CUSTOMER, ORDERS, ORDERDETAILS, PRODUCTS  WHERE CUSTOMER.CUSTOMERID = ? AND CUSTOMER.CUSTOMERID = ORDERS.CUSTOMERID AND ORDERS.ORDERID = ORDERDETAILS.ORDERID AND ORDERDETAILS.PRODUCTID = PRODUCTS.PRODUCTID"
    cmd.CommandType = CommandType.Text

    cmd.Parameters.AddWithValue("?", work)
    Dim dr As OleDb.OleDbDataReader
    dr = cmd.ExecuteReader()
    If dr.HasRows Then
          DataGridView1.Rows.Add(CInt(dr.Item("ORDERDETAILS.PRODUCTID")),        CStr(dr.Item("PRODUCTS.PRODUCTDESCRIPTION")), CInt(dr.Item("ORDERDETAILS.ORDERQUANTITY")), CInt(dr.Item("ORDERDETAILS.ORDERQUANTITYTOTAL")))
    End If
    dr.Close()
    cmd.ExecuteNonQuery() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:14:19.370

在获取值之前，您需要从数据读取器中读取。

```
If dr.Read Then
      DataGridView1.Rows.Add(CInt(dr.Item("ORDERDETAILS.PRODUCTID")),        CStr(dr.Item("PRODUCTS.PRODUCTDESCRIPTION")), CInt(dr.Item("ORDERDETAILS.ORDERQUANTITY")), CInt(dr.Item("ORDERDETAILS.ORDERQUANTITYTOTAL")))
End If 
```

# c# - 按名称引用表单元素

> ID：15008042
> 
> 赞同：-3
> 
> 时间：2013-02-21T17:00:46.433
> 
> 标签：c#, winforms

我正在 Visual C# 2010 中创建一个 Windows 窗体应用程序。

我有二十个名为 button1、...、button20 的按钮和二十个名为 label1、...、label20 的标签。如何更改 label1 的文本以响应对 button1 的单击，并且与每个按钮标签对类似，而无需 20 个单独的事件处理函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T17:04:39.573

看在上帝的份上为什么！！！

但实际上，您可以使用键控到按钮的字典，例如：

```
Dictionary<Button,Label> dict = new Dictionary<Button,Label>();

    dict.Add(button1,label1);
    ... 
```

然后你可以这样做：

```
private void ButtonClick(object sender, EventArgs e)
{
    Label label = dict[(Button)sender];
    label.Text = "Hello";
} 
```

然后所有按钮都可以使用相同的点击处理程序。

您也可以类似地使用`Button.Tag`该点并将其指向每个标签。

但是，我认为更好的解决方案是开发一个自定义的 UserControl，将您的按钮和标签收缩包装到一个整洁的包中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:27:13.137

当您要反复使用一组控件时，创建一个将它们合并在一起的自定义用户控件会更容易。

所以在这种情况下，创建一个带有标签和按钮的新用户控件。在按钮的 onclick 处理程序中，将 label.Text 更改为您想要的任何内容。构建您的项目。

将新创建的用户控件添加到主窗体 20 次。由于按钮已经与它们各自的标签相关联，因此您不需要为每个按钮设置单独的处理程序。

（请记住，您现在有 20 个名为 userControl1、userControl2 等的控件……因此，如果您需要对它们的内部内容做任何其他事情，则需要进行额外的处理。但为了这个示例，您不需要不必担心这个。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T17:04:38.230

您可以将所有事件订阅到一个处理程序并检查第一个参数“发件人”。发件人应该是按钮，你可以检查它的ID。

# python - 使用 pylab.imshow() 显示图像

> ID：15008045
> 
> 赞同：17
> 
> 时间：2013-02-21T17:00:50.227
> 
> 标签：python, matplotlib, imshow

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-21T17:42:26.120

> 这就是图像保存为 dna = mahotas.imread('dna.jpeg') type(dna) 给出 numpy.ndarray 和 dna.shape 给出 (1024, 1344, 1)

这就是问题所在，如果您通过 3D `ndarray`，它预计您将有 3 或 4 个平面（RGB 或 RGBA）（阅读堆栈跟踪最后一帧中第 410 行的代码）。

你只需要摆脱额外的维度使用

```
dna = dna.squeeze() 
```

或者

```
imshow(dna.squeeze()) 
```

要查看`squeeze`正在执行的操作，请参见以下示例：

```
a = np.arange(25).reshape(5, 5, 1)
print a.shape # (5, 5, 1)
b = a.squeeze()
print b.shape # (5, 5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-24T21:27:05.617

从[v3.3](https://matplotlib.org/3.3.4/users/whats_new.html#imshow-now-coerces-3d-arrays-with-depth-1-to-2d)开始，不再引发此错误，因为大小为 MxNx1 的 3d 数组现在被强制转换为 MxN 进行显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-23T02:40:51.613

```
import matplotlib.pyplot as plt

plt.imshow(img.reshape(48, 48)) # for example: 48 
```

# java - 变量作为命令

> ID：15008047
> 
> 赞同：-2
> 
> 时间：2013-02-21T17:00:56.230
> 
> 标签：java, variables, calculator, arithmetic-expressions

我希望能够使用一组可以代表数学运算符的变量。我正在尝试创建一个计算器作为学习练习。我认为每次按下按钮时都进行计算并不好，那么如何在不包含 if 语句中的计算的情况下更改问题中的运算符？

## 例子

```
string plus = +;
string equals = =;
public void button_clicked(....)
{
    .....
    7 equals 4 plus 3; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:05:33.550

第一个问题。为什么按下按钮时计算不好，简单得多。

如果您真的想要，您可以使用命令模式并存储在用户单击等于时要执行的命令列表。

例如

```
public interface Operation {

    public double execute();

}

public class Add implements Operation {

    private double num1;
    private double num2;

    public Add(double num1, double num2) {
        this.num1 = num1;
        this.num2 = num2;
    }

    public double execute() {
        return num1 + num2;
    }

} 
```

然后每次按下按钮时，您都会创建一个新操作并存储在列表中。当按下等于时，您执行每个操作，将结果从一个传递到下一个。

你显然需要更多的操作。

# spring-mvc - org.springframework.web.multipart.MultipartException：当前请求不是多部分请求

> ID：15008049
> 
> 赞同：36
> 
> 时间：2013-02-21T17:01:03.373
> 
> 标签：spring-mvc, multipartform-data

我正在尝试向服务器发送多部分请求，但我收到以下异常 HTTP 状态 500 - 请求处理失败；嵌套异常是 org.springframework.web.multipart.MultipartException: 当前请求不是多部分请求

```
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-body">
        <form id="imageuploadForm" action="<c:url value="/members/profileimageupload" />" method="POST" enctype="multipart/form-data">
            <div style="width:40%; float:left">
                <div class="fileupload fileupload-new" data-provides="fileupload">
                    <div class="fileupload-preview thumbnail" style="width: 200px; height: 150px;"></div>
                    <div>
                        <span class="btn btn-file">
                            <span class="fileupload-new">Select image</span>
                            <span class="fileupload-exists">Change</span>
                            <input id="imageFile" name="imageFile" type="file" />
                        </span>
                        <a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>
                    </div>
                </div>
            </div>
            <div style="width:40%; float:right" >
                <div class="progress">
                    <div class="bar" style="width: 60%;"></div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
       <button class="btn btn-success" id="submit">Upload</button>
       <button class="btn btn-primary" data-dismiss="modal" aria-hidden="true" >Close</button>
    </div>
 </div> 
```

我正在发送请求的 ajax 调用。

```
$(function() {
    //twitter bootstrap script
    $("button#submit").click(function(){
        var $form = $("#imageuploadForm");
        var type = $form.attr('method');
        var url =  $form.attr('action');
        $.ajax({
            type: $form.attr('method'),
            url: $form.attr('action'),
            data: $form.serialize(),

            success: function(msg){
                $("#form-content").modal('hide');
            },

            error: function(){
            }
        });
    });
}); 
```

我的控制器应该处理请求

```
@RequestMapping(value="/profileimageupload",method= RequestMethod.POST)
    public void uploadProfileImage(@RequestParam(value="imageFile") final MultipartFile file) throws NumberFormatException, IOException{
    ////
} 
```

我对多部分文件有以下 Web 配置

```
@Configuration
@EnableWebMvc
public class WebConfig extends WebMvcConfigurerAdapter {

    /**
    * Supports FileUploads.
    */
    @Bean
    public MultipartResolver multipartResolver() {
        CommonsMultipartResolver multipartResolver = new CommonsMultipartResolver();
        multipartResolver.setMaxUploadSize(500000000);
        return multipartResolver;
    }
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-07-28T06:19:32.527

检查是否在*Spring-Servlet.xml中添加了**CommonsMultipartResolver*。

 *```
 <bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver"/> 
```

然后，将 enctype 添加到表单中*的 multipart/form-* data

```
<form id="fileupload" method="post" enctype="multipart/form-data"> 
```

最后在 Controller 中，Request > *MultipartHttpServletRequest*

```
 @RequestMapping(value = "/profileimageupload", method = RequestMethod.POST)
public ModelAndView uploadProfileImage(MultipartHttpServletRequest request) {} 
```

依赖项

> 1.  commons-fileupload.jar
> 2.  commons-io.jar

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-08-17T19:29:42.433

再试一次“**标题**”：

```
@RequestMapping(value = "/profileimageupload", headers = "content-type=multipart/*", method = RequestMethod.POST) 
```

和 ajax 调用如下：[如何异步上传文件？](https://stackoverflow.com/questions/166221/how-can-i-upload-files-asynchronously-with-jquery?lq=1)

我希望这对你有帮助！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-21T17:13:32.190

似乎您的标签表单格式不正确，之后的所有内容

```
'action="<c:url value="/members/profileimageupload" />"' 
```

被忽略。试着像这样写，看看它是否有效：

```
action="<c:url value='/members/profileimageupload' />" 
```*

# asp.net - 为什么我的图片没有显示在登录页面上？

> ID：15008055
> 
> 赞同：1
> 
> 时间：2013-02-21T17:01:15.110
> 
> 标签：asp.net, vb.net

这一定是我遇到过的最令人沮丧的问题之一。

在我的登录页面上，我有这个：

```
 <table id="Table2" cellspacing="0" cellpadding="0" align="center" bgcolor="#336699" border="0">
    <tr>
     <td><asp:hyperlink id="logo" runat="server" ImageUrl="~/images/logon.jpg" 
             Border="0" NavigateUrl="#" BorderStyle="None"></asp:hyperlink></td>
    </tr>
 </table> 
```

我们所需要的只是在该页面加载后立即显示图像。

它没有。它显示红色 X。

我也尝试了以下方法，但它们都不起作用。

```
<img src="~/images/logon.jpg" width="330" height="75" runat="server" /> 
```

和这个：

```
<img src="images/logon.jpg" width="330" height="75" runat="server" /> 
```

在设计模式下我可以看到它们，但是当我运行应用程序时，没有图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T17:07:40.320

可能是身份验证问题。在设计模式下，您直接从文件系统中读取。在浏览器中，IIS 正在处理请求并从 app 目录中读取文件。

确保您的 web.config 中有一个部分允许匿名访问您的图像文件夹。

要验证这是问题所在，请启动 Chrome 控制台（按 F12）并查看您遇到的错误类型。404、403等...

**编辑**

我的意思是这样的：

```
 <location path="images">
      <system.web>
         <authorization>
            <allow users="*"/>
         </authorization>
      </system.web>
   </location> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-11T14:32:14.110

还要确保在 Windows 10 中设置 IIS 时选中“静态内容”：

[![在此处输入图像描述](../Images/fdd56bf60aae52d5738072ba01e5206c.png)](https://i.stack.imgur.com/RBC0w.jpg)

Internet 信息服务 -> 万维网服务 -> 通用 HTTP 功能 -> 检查静态内容

[![在此处输入图像描述](../Images/9dfea588e3497c959639dbf56d3534b4.png)](https://i.stack.imgur.com/sdXzp.png)

并验证：

[![在此处输入图像描述](../Images/b2fe1da04e110de2c8036262432f1580.png)](https://i.stack.imgur.com/XX3OR.jpg)

感谢同事（MMA 和 CL）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T17:06:45.240

在运行您的网站时，您是否尝试过访问您的图像？即 mywebsite.com/images/logon.jpg ..？如果可行，请尝试仅使用 img 选项卡显示图像：

```
<img src="../images/logon.jpg" alt="my image"> 
```

如果这不起作用，请尝试在 IIS 上加载该站点，看看是否有影响

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T17:07:02.603

我的建议是向后工作。

首先，弄清楚*应该*使用什么 URL。通过在浏览器的地址栏中输入图像来正确加载图像。

其次，查看生成的源代码以了解这些 URL 的不同之处。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-07T04:51:40.640

**在您的网络配置中尝试这个。文件**

```
<location path="images">    
         <system.web>
     <authorization>
        <allow users="?"/>
     </authorization>
  </system.web> 
```

# graph - 检查一个图何时是 igraph 中另一个图的子图

> ID：15008056
> 
> 赞同：1
> 
> 时间：2013-02-21T17:01:16.500
> 
> 标签：graph, igraph

我想使用 igraph 检查给定的子图 G 是否是另一个更大的图 G' 的子图。请注意，这不是子图同构问题，因为如果任何顶点或边的标签不同，我希望答案为 False。当且仅当两个图具有相同的边和顶点标签并且 G 是 G' 的子图时，我希望答案为 True。我如何在 igraph 中做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:35:30.643

不确定您所说的顶点/边标签是什么意思，但请注意 igraph 中的 VF2 子同构算法支持顶点/边颜色；如果它们的颜色相同，则允许两个顶点或边匹配。如果您使用 Python 中的 igraph，请检查该类的`subisomorphic_vf2`方法`Graph`。如果您使用 R 中的 igraph，请检查该`graph.subisomorphic.vf2`功能。这两者都由`igraph_subisomorphic_vf2`C 层中的函数支持。

**更新**：由于您将字符串作为标签而不是整数（VF2 同构算法所期望的），因此您必须首先将它们转换为整数索引。否则，VF2 应该能够满足您的需求。igraph的Python接口中的一个例子：

```
>>> g = Graph.Formula("A --> B --> C")
>>> g2 = Graph.Formula("A --> B")
>>> g.get_subisomorphisms_vf2(g2, color1=[0,1,2], color2=[0,1])
[[0, 1]]
>>> g.get_subisomorphisms_vf2(g2, color1=[0,1,2], color2=[0,2])
[] 
```

# c# - Microsoft Speech API 与 Windows Store App 了吗？

> ID：15008058
> 
> 赞同：1
> 
> 时间：2013-02-21T17:01:22.280
> 
> 标签：c#, windows-store-apps, speech-recognition

Microsoft Speech API 现在可用吗？我真的需要在我的项目中使用它。我需要接收一些简短的关键字语音命令并按照用户的意愿执行任务。另外，我想使用文字转语音

到目前为止，我发现它不能与 Windows Store Apps 一起使用，但这些答案来自半年前......

如果有人知道答案或对我可以在我的项目中使用的任何语音 API 有建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:31:16.827

当您说“Windows Store App”时，我假设您指的是为 Windows RT 开发的应用程序。[Windows RT 确实支持将语音识别](http://windows.microsoft.com/en-US/windows-8/using-speech-recognition)作为操作系统的一部分，但是很难找到有关如何将它们合并到您的 RT 应用程序中的信息。有一个[支持语音识别的 AT&T SDK](http://visualstudiogallery.msdn.microsoft.com/1fb5b8ee-c981-4249-97a3-cccd2ecc664c)。看起来[IVONA](http://www.ivona.com/us/sdk/)在 Windows RT/ARM 处理器上支持文本到语音。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T21:34:07.887

它现在可用，这里有一个 MSDN 示例演示它的使用：

[http://code.msdn.microsoft.com/windowsapps/Speech-synthesis-sample-6e07b218](http://code.msdn.microsoft.com/windowsapps/Speech-synthesis-sample-6e07b218)

# grails - 将声明性 Spring 事务（Grails 服务）传播到纯 JDBC 代码

> ID：15008060
> 
> 赞同：1
> 
> 时间：2013-02-21T17:01:25.387
> 
> 标签：grails, jdbc, transactions, spring-transactions

我有一个 Grails 服务方法，它调用一个普通的 Java 类来使用 JDBC 将一些数据保存到数据库中。接下来，grails 服务方法也写入同一个数据库。这一切都应该发生在同一个事务中。

```
def dataSource

def myServiceMethod() {
    MyJDBCClass jdbcClass = new MyJDBCClass(dataSource.getConnection())
    jdbcClass.savePerson(new PersonDto("Bob"))

    Person p = Person.findByFirstName("Bob")
    p.firstName = "John"
    if (p.firstName == "John") {
        throw new RuntimeException("Test rollback of Bob")
    }
    p.save()
} 
```

myServiceMethod 当前使用默认传播类型：PROPAGATION_REQUIRED（因为它是一种服务方法）。

MyJDBCClass 是纯 Java/JDBC 并且在一个单独的 JAR 文件中，理想情况下我们不希望对 Spring 的事务管理有任何依赖。我不确定如何进行。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:56:40.477

如评论中所述，使用`dataSource.getConnection()`动态 GORM 方法使用的连接相同。

另外值得注意的是，这是声明`groovy.sql.Sql`实例的正确方法：

```
sql = new Sql(dataSource.getConnection()) 
```

如果你声明像

```
sql = new Sql(dataSource) 
```

您的 sql 命令可能使用不同的连接（在 Oracle 数据库中发生在我身上）。

另一种可能性是使用[cacheConnection](http://groovy.codehaus.org/api/groovy/sql/Sql.html#cacheConnection%28groovy.lang.Closure%29)闭包，以确保所有 groovy sql 的执行都将使用相同的连接。

# twitter-bootstrap - 使用 Composer 为 Symfony2 安装 Jasny/Bootstrap

> ID：15008062
> 
> 赞同：2
> 
> 时间：2013-02-21T17:01:35.113
> 
> 标签：twitter-bootstrap, symfony, composer-php, jasny-bootstrap

习惯于使用 Composer 为 Symfony2 安装 composer 不知道的包。Twitter/Bootstrap 的配置是：

```
"repositories": [
    {
        "type": "package",
        "package": {
            "name": "twitter/bootstrap",
            "version": "2.3.0",
            "source": {
                "type": "git",
                "url": "https://github.com/twitter/bootstrap",
                "reference": "v2.3.0"
            }
        }
    }
 ], 
```

但是有了 Jasny/Bootstrap 这个

```
 {
        "type": "package",
        "package": {
            "name": "jasny/bootstrap",
            "version": "2.3.0-j4",
            "source": {
                "type": "git",
                "url": "https://github.com/jasny/bootstrap",
                "reference": "2.3.0-j4"
            }
        }
    } 
```

失败了

```
[UnexpectedValueException]                                                      
Could not parse version constraint 2.3.0-j4: Invalid version string "2.3.0-j4" 
```

怎么修？2.3.0-j4 是最新版本。“-j4”只是非标准和破坏性的作曲家吗？

不幸的是，按照建议尝试 2.3.* 和 >=2.3 会导致类似的错误。

```
[Composer\Repository\InvalidRepositoryException]
A repository of type "package" contains an invalid package definition: Undefined index: version

Invalid package definition:
{"name":"jasny\/bootstrap","version":"2.3.*","source":{"type":"git","url":"https:\/\/github.com\/jasny\/bootstrap","reference":"2.3.*"}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:51:29.077

版本必须遵循 的格式，`X.Y.Z`并带有可选的后缀`-dev`, `-alphaN`,`-betaN`或`-RCN`

来自[cheesemacfly](https://stackoverflow.com/users/1443490/cheesemacfly)提到的[http://getcomposer.org/doc/04-schema.md#version](http://getcomposer.org/doc/04-schema.md#version)。

您可以尝试`2.3.*`或`>=2.3`代替。

# java - eclipse/Spring Tool Suite：alt-A 停止调用搜索

> ID：15008063
> 
> 赞同：1
> 
> 时间：2013-02-21T17:01:35.650
> 
> 标签：java, eclipse

我正在使用 Spring Tool Suite / eclipse 和 maven、tomcat、websphere、subversion 等；我一直在使用 Search / File 并使用`ALT`+`A`来`F`调用它。突然它停止调用该菜单。通常当按下 时`ALT`，每个菜单项的热键都会在屏幕上的菜单项中显示下划线，并且搜索一直在下划线 A，但现在已经停止。

我仍然可以通过单击来调用菜单。我可以定义`ALT`+`A`来`F`调用文件搜索，但我确实想知道这个菜单发生了什么。有人有想法么？

# image - 如何在 Windows Phone 上为 .png 地图图像添加标记？

> ID：15008069
> 
> 赞同：0
> 
> 时间：2013-02-21T17:01:57.960
> 
> 标签：image, windows-phone-7, map, marker

我有一个 Windwows Phone 应用程序，它允许用户在地图上查看他通过扫描二维码获得的初始位置。当用户扫描二维码时，他会获得存储在网络服务器中的地图的 URL 以及他初始位置的 X 和 Y 坐标。

我在 .xaml 页面中创建了一个地图图像容器：

```
<Image x:Name="ImagePanel" Width="470" Margin="5,0,5,98" Grid.Row="1" /> 
```

在 .cs 页面中，我从服务器下载了地图图像：

```
 public void DownloadImage(string URLmappa)
    {

        ImagePanel.Source = new BitmapImage(new Uri(URLmappa));

        WebClient wc = new WebClient();
        wc.OpenReadCompleted += new OpenReadCompletedEventHandler(wc_OpenReadCompleted);

        try
        {

            wc.OpenReadAsync(new Uri(URLmappa), wc);

        }

        catch (Exception ex)
          {
              MessageBox.Show(ex.Message); 
          }

    }

    void wc_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)  
            {  
               if (e.Error == null && !e.Cancelled)  
              {  
                  try  
                  {  
                     BitmapImage image = new BitmapImage();  
                     image.SetSource(e.Result);  
                     ImagePanel.Source = image;  
                  }  
                  catch (Exception ex)  
                  {
                      MessageBox.Show(ex.Message); 
                  }  
              }  
              else  
              {
                  MessageBox.Show("It's impossibile to download map from server");
              }  

                    } 
```

...它可以工作，但困难的部分是在图像上标记位置（报告）。

我发现了这样的东西：

```
 public void MarkLocation(int posizioneX, int posizioneY)
    {
var imageMarker = new System.Web.UI.WebControls.Image { ImageUrl = "/pin.jpg" };
imageMarker.Style.Value = string.format("position:absolute;top:{0}px;left:{1}px;display:block;width:30px; height:30px;", point.X, point.Y);
imagePanel.Controls.Add(imageMarker); } 
```

但它不适用于 Windows Phone。

我对如何在给定 X,Y 坐标的图像上标记位置的建议感兴趣。

替代方法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:32:36.493

您可以将图像放在画布上并绝对定位标记元素，就像您尝试使用 web 控件一样。[或者，您可以使用WriteableBitmapEx](http://writeablebitmapex.codeplex.com/)在图像上写入标记

# php - 错误的 utf8 字符输出 savexml 和 tcpdf

> ID：15008071
> 
> 赞同：0
> 
> 时间：2013-02-21T17:02:06.063
> 
> 标签：php, utf-8, svg, tcpdf

嗨，我正在使用 TCPDF 加载 svg 文件，对其进行操作并将其作为 pdf 发送。

svg 文件包含 utf8 字符，保存后 utf8 字符无法正确显示。

这是svg文件

```
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<svg xmlns="http://www.w3.org/2000/svg" height="742" id="svg_area" shape-rendering="crispEdges" title="test" viewport-fill="" viewport-fill-opacity="0" width="1042" xmlns:xlink="http://www.w3.org/1999/xlink">

<defs id="4D"/>
<g Cbarre="2" id="Image_DBB524BDFDFB4E4180B8BB48EF3F68CC" transform="rotate(0,176.5,522)">
    <text font-family="arial" font-size="14" height="20" id="txtImage_DBB524BDFDFB4E4180B8BB48EF3F68CC" visibility="visible" x="404" y="435" ztspan="1">
    <tspan>äëïòû</tspan>
    </text>
  </g>
</svg> 
```

和PHP代码：

```
 // create new PDF document
$pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, false, 'UTF-8', false);

// remove default header/footer
$pdf->setPrintHeader(false);
$pdf->setPrintFooter(false);

// set default monospaced font
$pdf->SetDefaultMonospacedFont(PDF_FONT_MONOSPACED);

//set margins
$pdf->SetMargins(0, 0, 5, true);

//set auto page breaks
$pdf->SetAutoPageBreak(TRUE, 0);

//set image scale factor
$pdf->setImageScale(PDF_IMAGE_SCALE_RATIO);

// set some language dependent data:
$lg = Array();
$lg['a_meta_charset'] = 'UTF-8';

//set some language-dependent strings
$pdf->setLanguageArray($lg);
//$source : path to svg file
$dom = new DOMDocument();
$dom->load($source);
$xpath = new DOMXpath($dom);

// set orientation
$page = $dom->getElementsByTagName('svg')->item(0);
$width_page = $page->getAttribute('width');
$height_page = $page->getAttribute('height');
$orientation = 'L';
if($width_page < $height_page){
    $orientation = 'P';
}

// add a page  
$pdf->AddPage($orientation, '', false, false);    

//modify dom svg for variable
foreach ($_GET as $key => $value) {
    $gNodes=$xpath->query('//*[@id=\'' . $key . '\']');
    foreach ($gNodes as $gNode) {
        // doing stuff with $gNode
        $gNode->nodeValue = $value;
    }
 }   
$txt = '@'.$dom->saveXml();
$pdf->ImageSVG($txt, $x=0, $y=0, $w='', $h='', $link='', $align='', $palign='', $border=1, $fitonpage=true);
//Close and output PDF document
$pdf->Output('utf8.pdf', 'I'); 
```

处理后的 pdf 文件显示错误的 utf-8 字符：我期待 pdf 中有“äëïòû”，我得到“Ã¤Ã«Ã¯Ã²Ã»”。感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T09:00:21.100

```
$pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, false, 'UTF-8', false); 
```

应该：

```
$pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8', false); 
```

如果要使用 unicode 编码，则应将 unicode 参数设置为 true。假设您的 SVG 文件已正确保存为 UTF-8，它应该可以按照您的预期工作。

# javascript - 是什么让我的代码变慢了？一段时间后它开始滞后

> ID：15008072
> 
> 赞同：1
> 
> 时间：2013-02-21T17:02:06.743
> 
> 标签：javascript, jquery, lag, smooth

```
var layer=new Array();
var l=0;
function asd(cnt,l1,l2,l3,l4,l5,l6) {
 layer[0]=cnt;
 layer[1]=l1;
 layer[2]=l2;
 layer[3]=l3;
 layer[4]=l4;
 layer[5]=l5;
 layer[6]=l6;
 for (i=0;i<7;i++){
 if(layer[i]!==0) {
    l++;
    }
  }
}
function moves_like_jagger(event,ids) {

var MouseX=event.clientX;
for(i=0;i<l;i++) {
    if (i==0){helper="#k"+ids+" .contain"} else {helper="#k"+ids+" .d"+i};
    amount=(MouseX-$(this).width()/2)*layer[i-1]*2; 
    $(helper).css({"left":amount*50*(i-1),"-moz-transform":"rotateY(" + amount + "deg)"});
}
} 
```

这是我的旋转和移动图像的代码。它平稳地执行了一段时间，但是在大量移动和旋转这些图像之后，它开始滞后并且移动不是恒定的。

我有另一个更简单的代码，以不同的方式执行此操作，效果很好，但不能满足我的需求，所以我更正了它。

```
var MouseX=event.clientX;

fgs=document.getElementById("fg").style;
bgs=document.getElementById("bg").style;

cts=document.getElementById("contain").style;
fgw=document.getElementById("fg").width/2;
bgw=document.getElementById("bg").width/2;
ctw=document.getElementById("contain").width/2;f
fgs.transform="rotateY("+(x-fgw)*-0.001+"deg)";
fgs.left=(x-fgw)*-0.05+"px";
bgs.transform="rotateY("+(x-bgw)/(-100)+"deg)";
bgs.left=(x-fgw)/-100+"px";
cts.transform="rotateY("+(x-ctw)/-100+"deg)";
cts.left=(x-fgw)/-100+"px"; 
```

这将永远顺利工作。是 jQuery 吗？还是为了？有人可以帮我优化它吗？

# security - Rgd：公共可访问服务器如何将其变为私有

> ID：15008074
> 
> 赞同：0
> 
> 时间：2013-02-21T17:02:09.723
> 
> 标签：security, networking

我有个问题。

我有一系列服务器，里面包含我的机密数据，如代码和文档。

问题是该服务器可通过互联网公开访问。我应该怎么做才能保护我的代码？

我有 Active Directory、邮件服务器、Web 服务器、文件目录服务器、开发服务器、oracle 服务器和 CIFS 服务器等服务器。

我想到的是使用 NAT，我的服务器的私有 ip 地址，并且只将那些我需要它连接到互联网的人联机，例如网络服务器和邮件服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:31:59.643

在您的 WAN 连接（互联网）和 LAN（您的其他服务器）之间设置防火墙（我强烈推荐[PF ）。](http://www.openbsd.org/faq/pf/ "PF")在 LAN 内使用私有 IP 地址空间，并设置 NAT 以转发在端口 80 上的防火墙 WAN 接口（因此来自互联网）上接收的流量，以将请求转发到端口的 Web 服务器（现在位于 LAN 上） 80\. 对需要访问 Internet 的每项服务重复此练习。阻止所有未经您特别授权的请求。确保托管您的代码的机器被防火墙阻止来自互联网的连接。如果您的网络很小并且到您的服务器的流量很小，那么您不需要非常强大的机器来做防火墙。

# wcf - WCF 自定义错误处理程序有条件地返回 xml 或 json？

> ID：15008075
> 
> 赞同：0
> 
> 时间：2013-02-21T17:02:10.650
> 
> 标签：wcf, ierrorhandler, iservicebehaviors

open311 协议需要支持以下格式的端点：

*   域/requests.xml
*   域/requests.json

第一个端点接受 xml 请求，第二个 json 请求。

协议进一步指定错误应该以请求格式（xml 或 json）返回。

在实现 ServiceBehaviorErrorHandler 时，我发现无法在 ProvideFault 方法中确定请求格式（xml 或 json）。所有示例都返回 json*或*xml。

如何确定请求格式，以便以相同格式返回错误消息？我的实现：

```
 /// <summary>
/// From http://www.codeproject.com/Articles/43621/Extending-WCF-Part-I
/// </summary>
public class ExtendedServiceErrorHandler : IErrorHandler, IServiceBehavior
{
    #region IErrorHandler Members

    bool IErrorHandler.HandleError( Exception error )
    {
        return ( error is Open311Exception );
    }

    /*
     * TODO: HTTP error codes are required, but the code in the response body shouldn't necessarily match the HTTP error code, 
     * so that more specific and unique error code identifiers can be used. 
     * The HTTP error codes should always be 404 for resources that don't exist, 
     * 403 for errors because of wrong or missing api_key and basically 
     * 400 for any other error where the request can not be fulfilled as expected. 
     * Multiple errors codes and descriptions can be returned in the body (the response is an array).
     */
    void IErrorHandler.ProvideFault( Exception error, MessageVersion version, ref Message fault )
    {
        var ajaxErrors = new AjaxErrors();
        var open311Error = error as Open311Exception;
        if( null != open311Error )
        {
            ajaxErrors.Add( new AjaxError()
                {
                    Code = open311Error.Code,
                    Message = open311Error.Message
                } );
        }
        else
        {
            ajaxErrors.Add( new AjaxError()
                {
                    Code = 400,
                    Message = error.Message
                } );
        }
        var contentType = "application/json"; // TODO: how do we know?
        // WebOperationContext.Current.IncomingRequest.ContentType doesn't work
        WebContentFormat webContentFormat;
        switch( contentType )
        {
            case "application/json":
                fault = Message.CreateMessage( version, string.Empty, ajaxErrors, new DataContractJsonSerializer( ajaxErrors.GetType() ) );
                webContentFormat = WebContentFormat.Json;
                break;
            case "application/xml":
                fault = Message.CreateMessage( version, string.Empty, ajaxErrors, new DataContractSerializer( ajaxErrors.GetType() ) );
                webContentFormat = WebContentFormat.Xml;
                break;
            default:
                fault = Message.CreateMessage( version, string.Empty, ajaxErrors, new DataContractSerializer( ajaxErrors.GetType() ) );
                webContentFormat = WebContentFormat.Raw;
                break;
        }
        var wbf = new WebBodyFormatMessageProperty( webContentFormat );
        fault.Properties.Add( WebBodyFormatMessageProperty.Name, wbf );
        WebOperationContext.Current.OutgoingResponse.ContentType = contentType;
        WebOperationContext.Current.OutgoingResponse.StatusCode = HttpStatusCode.OK; //  HttpStatusCode.BadRequest;
    }

    #endregion

    #region IServiceBehavior Members

    void IServiceBehavior.AddBindingParameters( ServiceDescription serviceDescription, System.ServiceModel.ServiceHostBase serviceHostBase, System.Collections.ObjectModel.Collection<ServiceEndpoint> endpoints, BindingParameterCollection bindingParameters )
    {
        // nothing to do?
    }

    void IServiceBehavior.ApplyDispatchBehavior( ServiceDescription serviceDescription, System.ServiceModel.ServiceHostBase serviceHostBase )
    {
        var errorHandler = new ExtendedServiceErrorHandler();

        foreach( ChannelDispatcher channelDispatcher in serviceHostBase.ChannelDispatchers )
        {
            channelDispatcher.ErrorHandlers.Add( errorHandler );
        }
    }

    void IServiceBehavior.Validate( ServiceDescription serviceDescription, System.ServiceModel.ServiceHostBase serviceHostBase )
    {
        // nothing to do?
    }

    #endregion
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T21:26:27.713

我相信这就是你要找的东西：http: [//msdn.microsoft.com/en-us/library/vstudio/ee513227 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/ee513227(v=vs.100).aspx)

> Windows Communication Foundation (WCF) Web HTTP 错误处理使您能够从指定 HTTP 状态代码的 WCF Web HTTP 服务返回错误，并使用与操作相同的格式（例如 XML 或 JSON）返回错误详细信息。

# java - 如何根据命令行参数将不同级别的日志输出到stdout？

> ID：15008078
> 
> 赞同：1
> 
> 时间：2013-02-21T17:02:18.933
> 
> 标签：java, logging, slf4j, logback

我使用 slf4j 1.7.2 和 logback 1.0.7。我希望能够为我的 Java 应用程序提供一个命令行参数，用于设置记录到标准输出的消息级别。例如，`-logLevel trace`应该记录所有消息，但`-logLevel warning`只记录警告和错误。日志应该来自应用程序中的所有记录器（= 根记录器）。

目前我有一个`ConsoleAppender`for `System.out`，通过 确保`TresholdFilter`只有`info` `warning`和`error`消息被打印到标准输出。根记录器引用它。我不知道如何以编程方式更改此附加程序的过滤级别，我需要将记录的级别基于命令行参数。

虽然记录到标准输出的级别应该受到影响，但我仍然希望根记录器记录所有级别，因为它们被发送到其他附加程序，例如`diagnostics.txt`应该始终具有所有级别的文件。

干杯!
康拉德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:00:41.670

Logback 的配置文件允许使用变量。您可以定义系统属性（JVM 的 -D 参数），并在配置文件中使用该值。语法是：

```
${VARIABLE_NAME} 
```

您应该能够定义一个变量，例如 -DSYSOUT_LOG_LEVEL=ERROR 然后，在您的 logback.xml 文件中，您可以使用 ${SYSOUT_LOG_LEVEL}，而不是为过滤器设置特定级别，例如

```
<filter class="ch.qos.logback.classic.filter.ThresholdFilter">
  <level>${SYSOUT_LOG_LEVEL}</level>
</filter> 
```

# mysql - 如何根据起始点显示特定数量的行

> ID：15008079
> 
> 赞同：0
> 
> 时间：2013-02-21T17:02:20.860
> 
> 标签：mysql, sql

我需要在不使用`"ORDER BY DESC"`排序原因的情况下显示表格的最后 50 行。示例：如果我执行下一个查询

```
mysqli_query("SELECT * FROM table ORDER BY ID DESC LIMIT 50"); 
```

我将获得最后 50 行，这正是我想要获得的，但是这里的问题是，如果我回显这些行，它将以最后一个 Id 开头，依此类推。

这就是为什么我猜测作为解决方案的起点。谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:15:42.567

如果您想临时存储这么小的聊天消息列表并自动使它们过期，那么您不应该使用 RDBMS，它的工作是持久存储大量数据。

相反，请考虑使用消息队列。例如，[RabbitMQ](http://www.rabbitmq.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T21:56:30.207

我想出了下一个解决我的问题的方法：

```
$qId = mysqli_query($classDB->con,"SELECT id, message, userName FROM chat ORDER BY id DESC LIMIT 1"); /* Getting the last Id of the table */
$rowId = mysqli_fetch_array($qId);
$index = $rowId['id'] - $limit; /* limit = number of rows that I want to show */
$qChat = mysqli_query($classDB->con,"SELECT id, message, userName FROM chat ORDER BY id ASC LIMIT $index, $limit"); /* $index is the starter point*/
 while($row = mysqli_fetch_array($qChat) ){
// show messages
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T17:18:23.827

```
DELETE FROM CHAT_TABLE WHERE ID IN (
     SELECT ID FROM (
        SELECT ID    
        FROM CHAT_TABLE
        ORDER BY TIME DESC
        LIMIT 50) TEMPTBL
); 
```

# c++ - regex_replace 在 Windows 上不起作用

> ID：15008087
> 
> 赞同：0
> 
> 时间：2013-02-21T17:02:41.490
> 
> 标签：c++, regex, windows, std

我在 Linux 上做了一个程序，但现在我想让它与 Windows 兼容。所以我在 Windows 中编译了我的库，创建了一个 Code::Blocks 项目，并开始调整一些不适合 Windows 的函数和变量。

但是有一个我不明白为什么它不起作用的函数，regex_replace()。#include 不会出错，regex_match 也不会。这是我的功能：

```
string str = "hey guys";
str = regex_replace(string str, regex("guys"), "girls"); 
```

而“str”现在是“嘿女孩们”。

但是当我在 Windows 上编译时，它给了我这个错误：“没有匹配函数调用 'regex_replace'”。我搜索了一下，但没有发现任何有趣的东西。

所以我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:20:36.353

那是代码问题，不是windows问题。您的代码既不能在 Linux 上编译，也不能在 Windows 上编译：

```
str = regex_replace(string str, regex("guys"), "girls");
                    ^^^^^^
                    not allowed there 
```

# fullcalendar - 在鼠标悬停时显示来自谷歌日历的事件详细信息

> ID：15008094
> 
> 赞同：0
> 
> 时间：2013-02-21T17:03:00.097
> 
> 标签：fullcalendar

我需要在完整日历中显示鼠标悬停的事件详细信息，而不是单击它。到目前为止，这是我的代码：

$(document).ready(function() { // 页面现在准备好了，初始化日历... $('#calendar').fullCalendar({ eventSources: [ 'https://www.google.com/calendar /feeds/8msdika8k0vtf797v81rq4ot4%40group.calendar.google.com/public/basic' ], eventClick: [function(event) { if (event.url) { return false; } } ], eventMouseover :function(event, jsEvent, view ) { }, }) });

我在 eventmouseover 函数中添加了什么，以便它显示我的谷歌日历中的事件详细信息？请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:46:01.753

[在此处](https://stackoverflow.com/q/15006685/624479)查看答案和对答案的评论。答案的最后一条评论有一个显示详细信息的 JsFiddle（您必须自己设置样式/配置）。

如果您考虑弹出窗口，请查看[此处](https://stackoverflow.com/q/1944238/624479)。

# symfony - 在 Symfony2 中从事件订阅者访问路由参数

> ID：15008096
> 
> 赞同：1
> 
> 时间：2013-02-21T17:03:03.937
> 
> 标签：symfony

我在 Symfony 2.0 项目中设置了一个事件订阅者，表单类型使用它来确定是否包含一个字段，例如[这里](http://symfony.com/doc/2.0/cookbook/form/dynamic_form_modification.html)讨论的。

但是，为了确定是否包含，我想将 Entity 值与*路由参数*进行比较。

我知道通过[此处](https://stackoverflow.com/questions/7807388/passing-data-from-controller-to-type-symfony2)讨论的类型传递变量，但我更愿意直接从订阅者访问。

我的表格类型：

```
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;
use Odst\Bundle\DyfieldBundle\Form\EventListener\DyfieldFilterSubscriber;

class DyStringFieldType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $subscriber = new DyfieldFilterSubscriber($builder->getFormFactory());
        $builder->addEventSubscriber($subscriber);
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => 'Odst\Bundle\DyfieldBundle\Entity\DyStringField',
        );
    }

    public function getName()
    {
        return 'dyStringField';
    }
} 
```

我的活动订阅者：

```
use Symfony\Component\Form\Event\DataEvent;
use Symfony\Component\Form\FormFactoryInterface;
use Symfony\Component\EventDispatcher\EventSubscriberInterface;
use Symfony\Component\Form\FormEvents;
use Odst\Bundle\DyfieldBundle\Form\Type\DyStringFieldType;

class DyfieldFilterSubscriber implements EventSubscriberInterface
{
    private $factory;

    public function __construct(FormFactoryInterface $factory)
    {
        $this->factory = $factory;
    }

    public static function getSubscribedEvents()
    {
        return array(FormEvents::PRE_SET_DATA => 'preSetData');
    }

    public function preSetData(DataEvent $event)
    {
        $data = $event->getData();
        $form = $event->getForm();

        if (null === $data) {
            return;
        }

        $fieldPageNameId = $data->getModel()->getDyFieldSet()->getDyFieldPage()->getNameId();
        // This doesn't work, but this is where I need to get the parameter
        $pageNameId = $this->get('request')->get('pageNameId');

        if ($pageNameId == $fieldPageNameId) {
            $form->add($this->factory->createNamed('text', 'value'));
        }
    }
} 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:25:58.310

您可以使您的 DyfieldFilterSubscriber 成为服务，并在构造函数或设置器中注入请求。

编辑：

### 表单类型

```
public function __construct(DyfieldFilterSubscriber $event)
{
$this->event = $event;
} 
```

### Dy 字段过滤器订阅者

```
public function __construct(Request $request)
{
    $this->request = $request;
}

public function setFormFactory(FormFactoryInterface $formFactory)
{
    $this->formFactory = $formFactory;
} 
```

### 服务：

```
services:
    your_form_type:
    class:     FQCN\To\Your\FormType
    arguments: [@dy_field_filer_subscriber]

    dy_field_filer_subscriber:
        class:     FQCN\To\Your\Class
        arguments: [@request] 
```

最良好的问候

# java - 如何在 Eclipse 中使用库进行算法第一部分 Coursera 课程

> ID：15008099
> 
> 赞同：26
> 
> 时间：2013-02-21T17:03:08.693
> 
> 标签：java, eclipse, ide

我已经开始 Coursera[算法课程](https://www.coursera.org/course/algs4partI)。练习作业必须在Java上完成，他们建议使用DrJava作为IDE，但这真的很不方便。所以我想使用 Eclipse，但问题是我无法使用为本课程提供的2 个库（ [algs4.jar](http://algs4.cs.princeton.edu/code/algs4.jar)和[stdlib.jar ）。](http://algs4.cs.princeton.edu/code/stdlib.jar)[完成本指南](http://www.cs.princeton.edu/~elancast/labta/eclipse.pdf)中的步骤后，我能够将它们包含在我的项目中：

![在此处输入图像描述](../Images/700acf4bdbbe687466c8f27ec127c332.png)

但是当我尝试在我的项目中使用他们的类时，Eclipse 不允许这样做，我无法通过`Ctrl`+导入它们`Space`：

![在此处输入图像描述](../Images/9cd63b10e93146a98d521daf2a64f775.png)

即使我尝试直接导入类，`import stdlib.StdRandom;`它仍然不起作用。

我该怎么做才能使其正常工作？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-01-12T16:14:30.543

为什么不使用这两个 JAR——stdlib-package.jar 和 algs4-package.jar。

并在代码页下方（[http://algs4.cs.princeton.edu/code/](http://algs4.cs.princeton.edu/code/)）

问：如果我使用命名包来构造我的代码，编译器将无法再访问 stdlib.jar 或 algs4.jar 中的库。为什么不？

A. stdlib.jar 和 algs4.jar 中的库位于“默认”包中。在 Java 中，您不能从命名包访问默认包中的类。如果您需要将我们的库与命名包一起使用，您可以使用以下包版本：stdlib-package.jar 和 algs4-package.jar。

警告：如果您正在学习 Princeton COS 226 或 Coursera, Algorithms, Part I 或 II，您必须使用我们图书馆的默认软件包版本以方便评分。

显示我的测试成功： ![显示我的测试成功](../Images/cdd799863cbb559bd7f4caeefc0a89cc.png)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-08-01T00:07:47.510

您无法访问这些 API，因为作者已在默认包中定义了它们，而 Java 无法识别它们。作者在他们的网站 ( [http://algs4.cs.princeton.edu/code/](http://algs4.cs.princeton.edu/code/) ) 上提到，如果您在命名包中使用这些，请配置您的构建路径以包含来自[http://algs4.cs.princeton的 jar .edu/code/algs4.jar](http://algs4.cs.princeton.edu/code/algs4.jar)。

！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-21T17:53:07.273

请按照以下步骤操作

右键单击您的项目 > 属性。它将打开以下窗口

![在此处输入图像描述](../Images/83a046cd036f09d51f39cf816a12dd0a.png)

从左侧选择“Java Build Path”。现在从右侧选择“库”选项卡

![在此处输入图像描述](../Images/c54554fee2370d1beb24e497ab8a028c.png)

点击“添加外部罐子”

![在此处输入图像描述](../Images/4df0115515c09bdba184efddd61f792e.png)

添加 Jar 文件。

现在你完成了

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-21T17:12:33.550

为了包含 JAR，您需要做的就是右键单击左侧项目资源管理器面板中项目/对象树的顶部，执行“构建路径/配置构建路径”，单击“库”选项卡，然后“添加外部罐子”，将它们添加到那里。

在编辑您的源代码以及之后在 Eclipse 中构建它时，它们应该很高兴可以使用。

另请注意，假设您在键入时具有正确的类名，您应该能够将鼠标悬停在代码中的类名上，智能感知/自动完成功能将建议您应该从哪里导入它。您可以通过这种方式轻松地将导入添加到正确的库中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-07-05T07:44:49.727

[一种选择是slok](https://github.com/slok)提供的[github 上](https://github.com/slok/algs4-mvn-repo)有一个maven repo 。不好的部分是添加的 jar 是那些使用默认包的，所以你不能使用包结构。

**更新**：我已将 jar 的包版本添加到 repo 并~~创建了一个~~现在已被接受的拉取请求。

请注意，我已更改标识符以匹配普林斯顿的原始包结构。

```
<dependencies>
  <dependency>
    <groupId>edu.princeton.cs.introcs</groupId>
    <artifactId>algs4-package</artifactId>
    <version>1.0</version>
  </dependency>

  <dependency>
    <groupId>edu.princeton.cs.introcs</groupId>
    <artifactId>stdlib-package</artifactId>
    <version>1.0</version>
  </dependency>
</dependencies>

<repositories>
  <repository>
    <id>org.coursera.algs4</id>
    <name>Algs4 coursera course custom repository</name>
    <url>https://raw.github.com/slok/algs4-mvn-repo/master</url>
  </repository>
</repositories> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-04-05T16:36:28.357

从他们的网站：[http ://algs4.cs.princeton.edu/code/](http://algs4.cs.princeton.edu/code/)

> 日食（手动）。将 stdlib.jar 和 algs4.jar 下载到一个文件夹，然后通过 Project -> >Properties -> Java Build Path -> Libaries -> Add External JARs 将每个 jar >file 添加到 classpath 变量到项目的构建路径中。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-06-10T22:43:26.797

在 Gradle 的情况下，在 build.gradle 的 repositories 部分添加 maven 存储库条目，如下所示：

```
repositories {
    mavenCentral()
    maven {
        url 'https://dl.bintray.com/algs4/maven/'
    }
} 
```

添加依赖如下：

```
compile group: 'edu.princeton.cs', name: 'algs4', version: '1.0.4' 
```

如果是 Maven，请在 build.xml 中添加 repositories 标签中的条目，如下所示：

```
<repositories>
  <repository>
    <id>org.coursera.algs4</id>
    <name>Algs4 lib</name>
    <url>https://dl.bintray.com/algs4/maven/</url>
  </repository>
</repositories> 
```

添加依赖如下：

```
<dependencies>
  <dependency>
    <groupId>edu.princeton.cs</groupId>
    <artifactId>algs4</artifactId>
    <version>1.0.4</version>
  </dependency>
</dependencies> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-21T18:04:46.657

可能是因为库中没有包结构，所以不能从中导入类。这可能会对您有所帮助，[如何在 Eclipse 中使用引用库中的类](https://stackoverflow.com/questions/11924736/how-to-use-classes-in-referenced-libraries-in-eclipse)。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-01-01T07:32:06.653

如果您仍然在寻找解决方案：-

OS X / Linux

`% javac -cp .:stdlib.jar MyProgram.java % java -cp .:stdlib.jar MyProgram`

视窗

`% javac -cp .;stdlib.jar MyProgram.java % java -cp .;stdlib.jar MyProgram`

参考：- [https://introcs.cs.princeton.edu/java/stdlib/](https://introcs.cs.princeton.edu/java/stdlib/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-03-07T07:54:16.950

我正在使用**Gradle**。在这种情况下，**build.gradle**文件应该有一个依赖项，看起来像

```
repositories {
    jcenter()
}

dependencies {
    compile 'edu.princeton.cs:algs4:1.0.3'
} 
```

在此之后，您可以在课堂上从中导入任何内容。例如：

```
import edu.princeton.cs.algs4.StdIn; 
```

# javascript - 用破折号替换空格，全部小写

> ID：15008102
> 
> 赞同：0
> 
> 时间：2013-02-21T17:03:15.383
> 
> 标签：javascript

我正在尝试组合一些代码，但它会出现严重错误（因为我在 Javascript 上很垃圾）。这是我的原始代码：

```
function onSubmit(){
    document.forms["login"]["redirect_to"].value = document.forms["login"]["log"].value;
} 
```

我想去掉空格并用破折号替换并使所有内容小写，这是我的尝试：

```
function onSubmit(){
    var str = document.forms["login"]["log"].value;
    str.replace(/\s+/g, '-').toLowerCase();
    document.forms["login"]["redirect_to"].value = str;
} 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:05:34.010

`.replace`并`toLowerCase`返回新值，它们不会转换原始值。

添加`str =`到该行的开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:09:30.167

```
var str = str.replace(/\s+/g, '-').toLowerCase(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T17:07:21.007

而不是这两行：

```
str.replace(/\s+/g, '-').toLowerCase();
    document.forms["login"]["redirect_to"].value = str; 
```

用这个：

```
var newStr = str.replace(/\s+/g, '-').toLowerCase(); 
```

# c++ - 函数调用时的 C 到 C++ 错误

> ID：15008103
> 
> 赞同：2
> 
> 时间：2013-02-21T17:03:19.563
> 
> 标签：c++, c, assembly, gdb

我正在尝试将 ac 程序转换为 c++。该程序生成一组“*.so”文件，用于由 llvm 生成的另一个程序。基本上，llvm 生成的代码具有对当前代码的回调。我正在使用 LDPRELOAD 加载这些

作为第一步，我只是用 c++ 编译代码。编译工作正常。但是运行时会出现段错误。有一个标签`dec_blk`应该包含函数的地址`dec_blk()`。我已经使用`extern "C"`该函数及其原型来防止拆解。当它使用 c 版本运行时，标签具有正确的地址，但是当我使用 c++ 版本运行它时，该标签的值为 0。我在下面提供详细信息

**LLVM 代码**

```
subq    $24, %rsp
movq    dec_blk, %rax
movq    dec_blk+8, %rcx
movq    %rdi, 16(%rsp)
movq    %rcx, %rdi
movq    16(%rsp), %rcx
movq    %rsi, 8(%rsp)
movq    %rcx, %rsi
movq    8(%rsp), %rdx
callq   *%rax # segfaults here 
```

**函数声明**

```
extern "C"
{
long int dec_blk(void*, long int*, long int* );
} 
```

你能帮忙看看要找什么吗？我正在使用 gdb 进行调试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:43:15.713

> 有一个标签 dec_blk，它应该包含函数 dec_blk() 的地址。...但是，当我使用 c++ 版本运行它时，该标签的值为 0

您的描述与此代码匹配（您没有显示）：

```
extern "C" long int dec_blk(...);
int main() {
  return dec_blk();
} 
```

但是您问题中的反汇编与此（*不同*）代码匹配：

```
extern "C" long int (*dec_blk)(...);
int main() {
  return dec_blk();
} 
```

这两个片段根本*不*一样。我猜您在打算使用第一个功能时使用了第二个功能。

# javascript - 关于预加载 img 脚本的说明

> ID：15008105
> 
> 赞同：0
> 
> 时间：2013-02-21T17:03:20.503
> 
> 标签：javascript, jquery, image

我想尝试在上一个 stackoverflow 问题上找到的这个预加载 img 脚本 - [Preloading images with jQuery](https://stackoverflow.com/questions/476679/preloading-images-with-jquery)

为了澄清起见，我的图像路径是 img/bg/image1.jpg 我是否需要更改此脚本中的任何内容才能使其正常工作？另外，我是否需要任何其他文件，例如特定的 jquery 版本？我如何测试它是否正常工作？

```
function preload(arrayOfImages) {
    $(arrayOfImages).each(function(){
        $('<img/>')[0].src = this;
        // Alternatively you could use:
        // (new Image()).src = this;
    });
}   
preload([
    'img/imageName.jpg',
    'img/anotherOne.jpg',
    'img/blahblahblah.jpg'
]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:08:02.863

您只需要加载[jQuery](http://jquery.com/download/)并且当然将正确的图像路径放入数组中

```
preload([
    'img/bg/image1.jpg'
]); 
```

该脚本所做的是在内存中创建一个`<img>`标签并使用给定的源加载图像。就是这样。除非您将 DOM 添加到 DOM，否则它不会出现在屏幕上`<img>`。

如果您有 Firebug 之类的调试工具，您可以查看“NET”选项卡并验证图像是否已加载到内存中。

# ruby-on-rails - 仅使用 Journey 的 Rails 样式路由字符串解析

> ID：15008108
> 
> 赞同：2
> 
> 时间：2013-02-21T17:03:27.520
> 
> 标签：ruby-on-rails, ruby, journey

鉴于此映射定义： `/order/:meal/:cheese`

将此字符串解析`/order/hamburger/american`为`{meal:'hamburger', cheese:'american'}`.

我正在研究 Journey 的内部结构，试图弄清楚这是否可能在 Rails 之外。还有其他 SO 问题展示了如何在 Rails 中使用识别路径。而且我知道您可以使用正则表达式或拆分轻松完成此操作，但我想要免费的额外解析功能（如 :format 等）。

这是可行的。只是想知道是否有人有改进。我基本上是在压缩/组合旅程匹配的两个部分（名称和捕获）以制作匹配哈希（如识别路径）。只是想知道是否有人已经进入 Journey 并尝试做同样的事情。

```
require 'journey'

def hashify_match matches
  h = {}
  matches.names.each_with_index do |key, i|
    h[key.to_sym] = matches.captures[i]
  end
  h
end

pattern = Journey::Path::Pattern.new '/order/(:meal(/:cheese))'
matches = pattern.match '/order/hamburger/american'

puts hashify_match matches

matches = pattern.match '/order/hotdog/cheddar'
puts hashify_match matches 
```

这是打印出来的。

```
{:meal=>"hamburger", :cheese=>"american"}
{:meal=>"hotdog", :cheese=>"cheddar"} 
```

我可以使用 Journey 的另一部分来构建匹配哈希吗？看，`matches.names`确实`matches.captures`是 Array 对象，这感觉就像是 hack。当然，Rails 的某些部分在某个时候将这些组合在一起。

请注意，仅使用 Journey gem（包含在 Rails 3.2.0+ 中）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:58:33.977

[Journey::Router does it here](https://github.com/rails/journey/blob/master/lib/journey/router.rb#L138):

```
 match_data  = r.path.match(req.path_info)
    match_names = match_data.names.map { |n| n.to_sym }
    match_values = match_data.captures.map { |v| v && Utils.unescape_uri(v) }
    info = Hash[match_names.zip(match_values).find_all { |_,y| y }] 
```

So it doesn't look as though there is a convenient way to do what you're trying to do.

# java - 为 Java jUnit 测试创建 MultipartFormDataInput 对象

> ID：15008113
> 
> 赞同：4
> 
> 时间：2013-02-21T17:03:37.257
> 
> 标签：java, junit, resteasy, multipartform-data

你有一个 Resteasy webservice 方法，它以 MultipartFormDataInput 对象作为参数，并从中提取大量信息。我想为此方法编写一个 jUnit 测试，但我一直无法找到任何方法来创建此对象并将虚拟数据放入其中，因此我可以直接调用我的 webservice 方法。服务方法从这样的表单中提取数据......

```
@POST
@Path("/requestDeviceCode")
@Produces({ MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON })
@Consumes("multipart/form-data")
public DeviceCodeModel requestDeviceCode(final MultipartFormDataInput inputMultipart) {

    // process the form data - only field in the form is the token
    Map<String, List<InputPart>> formData = null; // we'll put the form data in here
    formData = inputMultipart.getFormDataMap();

    String token = null;
    try {
        token = formData.get("Token").get(0).getBodyAsString();
        this._logger.debug("Pulled encrypted token out of input form, it's " + token); 
```

这很好用，但试图创建一个对象作为参数传递给“requestDeviceCode”让我受阻。我已经尝试过这种变化......

```
 // create a multipartForm (input to the service POST) and add the "token" string to it
        MultipartFormDataOutput newForm = new MultipartFormDataOutput();
        newForm.addFormData("Token", encryptedXMLString, MediaType.APPLICATION_XML_TYPE);

        _service.requestDeviceCode((MultipartFormDataInput) newForm); 
```

但它只是没有这样做（这个特殊的错误是我无法将输出表单转换为输入表单）。我一直无法找到一种方法来创建新的 MultiPartFormDataInput 并向其中添加数据。

有人有建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-06T20:27:44.130

在尝试对接受 MultipartFormDataInput 的 RestEasy WebService 方法进行单元测试时，我偶然发现了一个类似的问题。

您可以做的是模拟**MultipartFormDataInput**以针对您期望接收的每个表单参数返回带有模拟**InputPart的准备好的地图。**

可能的解决方案（使用 JUnit/Mockito）：

```
@Test
public void testService() {
    // given
    MultipartFormDataInput newForm = mock(MultipartFormDataInput.class);
    InputPart token = mock(InputPart.class);

    Map<String, List<InputPart>> paramsMap = new HashMap<>();
    paramsMap.put("Token", Arrays.asList(token));        

    when(newForm.getFormDataMap()).thenReturn(paramsMap);
    when(token.getBodyAsString()).thenReturn("expected token param body");
    // when
    DeviceCodeModel actual = _service.requestDeviceCode(newForm);
    // then
    // verifications and assertions go here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:41:31.997

做一个集成测试怎么样？
启动测试中嵌入的 jetty 或 Tomcat 并让它运行您的 REST 服务。作为 HTTP 客户端，我将使用 Apache HttpComponents 客户端，请参阅[示例页面上的](http://hc.apache.org/httpcomponents-client-ga/examples.html)[教程](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/)和 MultiPart 客户端示例。

# responsive-design - 如何在 zurb 基础中将自定义下拉菜单拉伸到整个网格宽度

> ID：15008120
> 
> 赞同：0
> 
> 时间：2013-02-21T17:03:51.530
> 
> 标签：responsive-design, zurb-foundation

我的布局中有一个自定义下拉列表，它的宽度取决于列表项的长度（我认为是设计使然）。我想将此下拉列表拉伸到整个网格宽度（宽度：100%），但类中的样式或内联样式不起作用。在我渲染的源代码中，我看到由任何基础脚本计算的注入内联样式宽度，我不知道如何覆盖它。有什么解决办法吗？

```
<div class="row">
<div class="twelve columns">
    <div class="row">
        <div class="eight columns " style="background-color:red">
                some content
        </div>
        <div class="four columns " style="background-color:blue">
            <form class="custom">       
                <select style="display: none;">
                    <option value="1">opt a</option>
                    <option selected="selected" value="2">opt b</option>
                    <option value="3">opt c</option>
                    <option value="4">opt d</option>
                </select>
                <div class="custom dropdown">
                    <a class="current " href="#" >
                        opt b
                    </a>
                    <a class="selector" href="#"></a>
                    <ul>
                        <li>opt a</li>
                        <li class="selected">opt b</li>
                        <li>opt c</li>
                        <li>opt d</li>
                    </ul>
               </div>
            </form>
        </div> 
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T01:39:53.383

3 次快速观察...您缺少`</div>` 第一个`<div class="row">`声明，另一个观察是您在 div 中设置了 4 列的下拉列表，因此您是否尝试将下拉列表设置为 4 列的 100% 宽度，或者整个应用程序的 100% 宽度？另外，你用的是什么版本的粉底？第三个观察结果，您使用的是基础 3 及以下的语法。4 & 5 的新语法是`<div class="row"><div class="large-12 columns"></div></div>`……注意“large-12”。所以我的答案是，添加缺少的结束 div，并使用适当的网格语法。如果这对您没有帮助，请在 jsfiddle 中设置一些内容，以便我们知道您使用的是什么版本的基础和 jquery，并可以查看实际问题。希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:37:23.090

尝试这样的事情

```
form.custom div.custom.dropdown {
    width:100% !important;
}
form.custom div.custom.dropdown ul {
    width:100% !important;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T08:07:04.737

如果您使用 .scss 基础文件，您可以添加到您的 app.scss：

```
//foundation 4 syntax
form.custom {
  .dropdown {
    @include grid-column($columns:12,$float:left);
  } 
```

或者您可以找出用于 .twelve 的 css 并添加到您的组合框中

# android - 更改 homeAsUpIndicator 上的背景颜色

> ID：15008122
> 
> 赞同：1
> 
> 时间：2013-02-21T17:04:00.237
> 
> 标签：android, actionbarsherlock, android-theme

`homeAsUpIndicator`我正在尝试更改`ActionBarSherlock`. 我找到了很多答案告诉我如何更改白色箭头，但没有人告诉我如何更改背景颜色。

![在此处输入图像描述](../Images/1e561e0c1d71d7af0cd123ea548c7edb.png)

我需要改变什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:40:34.100

使用`actionBarItemBackground`主题属性。

# android - eclipse中的SDK版本与我安装的不同

> ID：15008124
> 
> 赞同：1
> 
> 时间：2013-02-21T17:04:12.833
> 
> 标签：android, eclipse, sdk

我最近安装了带有 android SDK r21 的 eclipse 版本：4.2.1。但是当我想用一些模板开始一个新项目时，我会收到类似这样的消息：“导航类型“固定选项卡 + 滑动”要求最低 SDK 版本至少为 11，当前最低版本为 8”

因为我已经从 android 安装了 r21，所以有人知道 eclipse 正在寻找什么吗？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T17:07:44.817

这与您安装的 SDK 无关，而是您为项目设置的 minSDK。见截图。

![在此处输入图像描述](../Images/313051085f3ad1a4fa7aae4130450484.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:07:19.033

当您创建一个新项目时，它也会要求提供“最低 SDK_version”。并且默认设置为“8”。因此，如果您想使用更新的技术，则必须将 minimum-sdk 更改为更高的值。这有帮助吗，还是我需要更精确？:)

# java - Spring MVC 和 Servlets 3.0 - 你还需要 web.xml 吗？

> ID：15008126
> 
> 赞同：29
> 
> 时间：2013-02-21T17:04:19.283
> 
> 标签：java, spring-mvc, servlets, annotations

在一个典型的 Spring MVC web 应用程序中，你会`DispatcherServlet`像`web.xml`这样声明

```
<!-- MVC Servlet -->
<servlet>
    <servlet-name>sample</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>  
<load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>sample</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

连同侦听器、过滤器等。

使用 servlet-api 3.0，您可以使用注释声明您的 servlet，`@WebServlet`而不是将它们添加到您的`web.xml`. Spring 3.2 已经有了它`@Configuration`的`@EnableXYZ`上下文配置。它是否有类似的东西`DispatcherServlet`，即。有没有办法在没有任何 xml 的情况下配置完整的 Spring 应用程序？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-21T17:26:54.960

使用 JEE6，如果您的应用程序容器已准备好 Servlet 3.0，您需要做的是：

1.  创建一个实现[ServletContainerInitializer](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContainerInitializer.html)的自定义类（即`com.foo.FooServletContainer`）
2.  `META-INF/services`在名为的文件夹中创建一个文件，该文件`javax.servlet.ServletContainerInitializer`将包含上面的实现名称 ( `com.foo.FooServletContainer`)

Spring 3 捆绑了一个名为实现上述内容的类（因此您`SpringServletContainerInitializer`无需在`META-INF/services`.[`WebApplicationInitializer`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/web/WebApplicationInitializer.html)以下代码取自上面的文档）。

```
public class FooInitializer implements WebApplicationInitializer {
    @Override
    public void onStartup(ServletContext servletContext) {
        WebApplicationContext appContext = ...;

        ServletRegistration.Dynamic dispatcher =
           container.addServlet("dispatcher", new DispatcherServlet(appContext));
        dispatcher.setLoadOnStartup(1);
        dispatcher.addMapping("/");
    }
 } 
```

就是这样`web.xml`，但你需要使用等配置`@Configuration`webapp `@EnableWebMvc`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-26T06:20:49.423

是的，你不需要`web.xml`启动你的 webapp Servlet 3.0+。正如 Alex 已经提到的，您可以实现`WebApplicationInitializer`类和覆盖`onStartup()`方法。`WebApplicationInitializer`是 Spring MVC 提供的一个接口，可确保检测到您的实现并自动用于初始化任何 Servlet 3 容器。

> 有没有办法在没有任何 xml 的情况下配置完整的 Spring 应用程序？

添加此答案只是为了添加另一种方式。您不需要实施`WebApplicationInitializer`. `WebApplicationInitializer`named的抽象基类实现`AbstractDispatcherServletInitializer`使得注册 DispatcherServlet 变得更加容易，只需覆盖方法来指定 servlet 映射和 DispatcherServlet 配置的位置 -

```
public class MyWebAppInitializer extends AbstractDispatcherServletInitializer {

    @Override
    protected WebApplicationContext createRootApplicationContext() {
        return null;
    }

    @Override
    protected WebApplicationContext createServletApplicationContext() {
        XmlWebApplicationContext cxt = new XmlWebApplicationContext();
        cxt.setConfigLocation("/WEB-INF/spring/dispatcher-config.xml");
        return cxt;
    }

    @Override
    protected String[] getServletMappings() {
        return new String[] { "/" };
    }

} 
```

# spring - Spring BasicDataSource 池执行 WHEN_EXHAUSTED_GROW 行为

> ID：15008128
> 
> 赞同：1
> 
> 时间：2013-02-21T17:04:21.487
> 
> 标签：spring, datasource, connection-pooling

当我们在 prod 服务器上上传我们的应用程序时，我们遇到了奇怪的行为 - 有时它会停止从数据库中获取数据，就好像逻辑和一切都正确并且本地版本运行良好一样。经过远程调试，我们发现 GenericObjectPool 正在阻塞线程。经过一段时间的搜索，我们找到了适合我们问题的情况。当填充 8 个连接（默认值）时，池刚刚耗尽，默认情况下，它的行为设置为在耗尽时阻塞线程。

这是我的 BasicDataSource 的 datamodel-context.xml 配置

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
        <property name="url" value="url_to_db"/>
        <property name="username" value="username"/>
        <property name="password" value="12211"/>
        <property name="defaultAutoCommit" value="false"/>
        <property name="poolPreparedStatements" value="true"/>
        <property name="initialSize" value="10"/>
        <property name="maxIdle" value="5"/>
        <property name="testOnBorrow" value="true"/>
        <property name="logAbandoned" value="true"/>
    </bean> 
```

在这里找到两个解决方案 - 增加最大活动数或更改池的行为。第一个似乎很简单 - 将 BasicDataSource 中的属性 maxActive 设置为某个数字（如果我弄错了，请纠正我）。这种方式是不需要的，因为我们无法知道可能的同时连接的确切数量。

决定尝试第二种方法 - 将行为更改为 WHEN_EXHAUSTED_GROW。那么有没有办法配置spring默认池来改变它的whenExhaustedAction行为呢？还是应该为 BasicDataSource 定义自己的连接池？如果是这样，请您提供示例吗？我感谢任何意见或建议。谢谢。

# c# - C# 文本匹配 HTML

> ID：15008134
> 
> 赞同：1
> 
> 时间：2013-02-21T17:04:36.960
> 
> 标签：c#, regex, string, xml-parsing

我正在尝试与一个非常糟糕的“网络服务”（巧妙地伪装成简单的 aspx 页面......）进行交互，但我不控制页面，所以我无法调整输出，所以我坚持使用它。格式始终是这样的：

```
<b>
   <a href=\"http://www.google.com/\" target=\"_blank\">Google Inc</a>
</b>
<br />123 North Main
<br />Hume, ACT
<br />(999) 888-8888 
```

所以，我需要解析出`URL`, `Name`, `Address`, `City`, `State`, 和`Phone`? 它不是真正正确形成的 XML，所以我不能使用 XML 解析器，而且 RegEx 看起来非常讨厌，所以我是否坚持`String.Match`等等`IndexOf`？

谢谢你的建议......詹姆斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:11:44.310

您可以使用`HTML`解析器来解析页面，[Html Agility Pack](http://htmlagilitypack.codeplex.com/)是一个免费且健壮的。或者您可以`XQuery`为 .Net 使用任何处理器，请查看此[线程](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)以了解`regex`用于解析 html 页面的缺点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:13:13.717

假设 html 元素保持静态，则不需要正则表达式。我的解决方案是找到`<b>, </b>, and <br />`元素的索引，然后只需将子字符串从一个索引带到下一个。例如

```
int bStartIndex = html.IndexOf("<b>");
int bEndIndex = html.IndexOf("</b>)");
int urlSize = bEndIndex - bStartIndex - 3;
string url = html.Substring(bStartIndex + 3, urlSize); 
```

是的，这种方法是一种粗略的黑客攻击，但是，考虑到“非常糟糕的网络服务”的情况，我认为这是一个公平而直接的解决方案，尽管很乏味。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T17:13:43.113

好吧，过去我尝试了许多其他方法来使用框架方法来获取里面的值。但是这种格式太定制了，所以我认为唯一的方法是循环响应中的每一行，只要你得到一个值，它就会有 url。每当您开始读取
该行中的字符串时，它将是地址，然后是城市州等。出于任何原因，对象的属性顺序以不同的顺序到达，那么代码将失败。我建议您（如果可能的话）至少从服务返回一个易于反序列化的 JSON 格式。在其他情况下，您应该构建自己的反序列化器以根据需要获取数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T17:15:14.590

您可以像这样使用 Regex.Replace （如果它的格式始终完全相同）：

```
string crappyXML = 
"<b>
   <a href=\"http://www.google.com/\" target=\"_blank\">Google Inc</a>
</b>
<br />123 North Main
<br />Hume, ACT
<br />(999) 888-8888";

string betterXML = Regex.Replace(crappyXML, "</b><br />", "</b><br>"); 
```

（如果 之间有空格，您可能需要考虑该空格）

然后你的 betterXML 看起来像这样：

```
"<b>
   <a href=\"http://www.google.com/\" target=\"_blank\">Google Inc</a>
</b>
<br>123 North Main
<br />Hume, ACT
<br />(999) 888-8888"; 
```

然后你可以做另一个正则表达式：

```
betterXML = Regex.Replace(betterXML, "<br />", "</br><br>"); 
```

这将使它看起来像这样：

```
"<b>
   <a href=\"http://www.google.com/\" target=\"_blank\">Google Inc</a>
</b>
<br>123 North Main
</br><br>Hume, ACT
</br><br>(999) 888-8888"; 
```

然后这样做：

```
betterXML += "</br>"; 
```

关闭最后一个标签。

再次，我的`Regex.Replace`代码都没有占空白。您将不得不添加它。

从那里，您应该能够使用 XML 解析器并循环获取数据。

我希望这会有所帮助！让我知道任何问题。

# events - 哪些对象负责维护聚合之间的引用？

> ID：15008138
> 
> 赞同：0
> 
> 时间：2013-02-21T17:04:43.603
> 
> 标签：events, domain-driven-design, separation-of-concerns

假设我有一个聚合，`Ticket`。A`Ticket`将有一个分配`Department`和一个或多个分配`Employee`。

1.  实例化 a 时`Ticket`，a`TicketFactory`是否应该负责确保 a`Ticket`是使用有效/存在的`Department`和创建的`Employee`？

2.  同样，在停用`Department`or时`Employee`，什么负责确保将新的`Department`or`Employee`分配给 a`Ticket`以保持其不变量？域中是否存在负责退役的服务，或者这是应该采用最终一致性或某种形式的事件侦听的情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:14:52.087

1.  将`TicketFactory`声明为了创建 a`Ticket`您需要同时引用 a`Department`和 an `Employee`。它不会验证那些确实存在。获取适当的引用将是调用代码的责任。

2.  如果使用最终一致性，a 的退役`Department`将`Employee`发布指示退役的事件。将有一个与 a 相关联的处理程序，该处理程序`Ticket`将订阅该事件并分配新部门和员工或向任务发送某种警告。

查看[有效的聚合设计](http://dddcommunity.org/library/vernon_2011/)以了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:17:14.910

我最近开始探索 DDD，所以我遇到了你提到的一些问题。

1.  我认为`TicketFactory`应该始终返回经过验证/正确构建`Ticket`的实例。如果您的模型很复杂，您可以拥有一个域服务来验证给定的`Department`或`Employee`可以附加到它，然后工厂使用它。否则，您可以将其全部放在工厂中。但是从工厂出来的应该是一张合适的票。

2.  我会说，如果 eg 只`Ticket`知道其他两个，使用`Department`和`Employee`repos 的域服务将完成工作。如果关系是双向的，那么您可以利用事件溯源。此外，如果它确实是一个应该在您的域模型中捕获的事件，并且除了重新洗牌票证之外还有其他后果，您可以将其中一个处理程序附加到该事件为`InvalidTicketHandler`. 但是如果它是一个小规模的东西，保持简单，只要有一个维护不变量的域服务。

旁注：如果`Department`和/或`Employee`本身是聚合，那么您可以`Ticket`通过它们的标识符（例如员工的公司 ID 或部门的 ID 代码）在其中引用它们。这样，您将更容易实现一致性，因为您不会跨越不同聚合之间的一致性边界。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T00:47:17.960

1.  > FACTORY 负责确保它创建的对象或 AGGREGATE 满足所有不变量；但是，在删除应用于该对象之外的对象的规则之前，您应该始终三思而后行。FACTORY 可以将不变检查委托给产品，这通常是最好的。[领域驱动设计：解决软件核心的复杂性]

2.  A 取决于问题类型，但从外观上看，它似乎是应用层功能的绝佳候选者，但我不会选择事件解决方案，因为我发现它只适用于层之间而不是同一对象之间层。

# c# - TreeView Style FullRowSelect 并在失去焦点时保持选中状态

> ID：15008140
> 
> 赞同：0
> 
> 时间：2013-02-21T17:04:45.767
> 
> 标签：c#, wpf, treeview, focus, fullrowselect

在 TreeView 中，我有以下资源可以在焦点丢失时保持选中项目。

```
<TreeView.Resources>
                    <Style TargetType="{x:Type TreeViewItem}">
                        <Style.Resources>
                            <!--  SelectedItem with focus  -->
                            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}"
                                             Opacity=".8"
                                             Color="DodgerBlue" />
                            <!--  SelectedItem without focus  -->
                            <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}"
                                             Opacity=".3"
                                             Color="DodgerBlue" />
                        </Style.Resources>
                    </Style>
                </TreeView.Resources> 
```

但我在资源字典中也有一个模板，用于获取 FullRowSelect 样式。它来自 LeeCampbells 的文章：[TreeViewItems 上的水平拉伸](http://leecampbell.blogspot.de/2009/01/horizontal-stretch-on-treeviewitems.html)

```
 <Style BasedOn="{StaticResource {x:Type TreeViewItem}}" TargetType="TreeViewItem">
            <Setter Property="HorizontalContentAlignment" Value="Center" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TreeViewItem">
                        <StackPanel>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" MinWidth="19" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition />
                                </Grid.RowDefinitions>
                                <!--
                                    Note that the following do not work, but I believe the top 2 should?!
                                    <ToggleButton IsChecked="{TemplateBinding IsExpanded}" ClickMode="Press" Name="Expander">
                                    <ToggleButton IsChecked="{TemplateBinding Property=IsExpanded}" ClickMode="Press" Name="Expander">
                                    <ToggleButton IsChecked="{TemplateBinding Path=IsExpanded}" ClickMode="Press" Name="Expander">
                                -->
                                <ToggleButton Name="Expander"
                                              ClickMode="Press"
                                              IsChecked="{Binding Path=IsExpanded,
                                                                  RelativeSource={RelativeSource TemplatedParent}}">
                                    <ToggleButton.Style>
                                        <Style TargetType="ToggleButton">
                                            <Setter Property="UIElement.Focusable" Value="false" />
                                            <Setter Property="FrameworkElement.Width" Value="16" />
                                            <Setter Property="FrameworkElement.Height" Value="16" />
                                            <Setter Property="Control.Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="ToggleButton">
                                                        <Border Width="16"
                                                                Height="16"
                                                                Background="#00FFFFFF"
                                                                Padding="5,5,5,5">
                                                            <Path Name="ExpandPath"
                                                                  Fill="#00FFFFFF"
                                                                  Stroke="#FF989898">
                                                                <Path.Data>
                                                                    <PathGeometry Figures="M0,0L0,6L6,0z" />
                                                                </Path.Data>
                                                                <Path.RenderTransform>
                                                                    <RotateTransform Angle="135" CenterX="3" CenterY="3" />
                                                                </Path.RenderTransform>
                                                            </Path>
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="UIElement.IsMouseOver" Value="True">
                                                                <Setter TargetName="ExpandPath" Property="Shape.Stroke" Value="#FF1BBBFA" />
                                                                <Setter TargetName="ExpandPath" Property="Shape.Fill" Value="#00FFFFFF" />
                                                            </Trigger>
                                                            <Trigger Property="ToggleButton.IsChecked" Value="True">
                                                                <Setter TargetName="ExpandPath" Property="UIElement.RenderTransform">
                                                                    <Setter.Value>
                                                                        <RotateTransform Angle="180" CenterX="3" CenterY="3" />
                                                                    </Setter.Value>
                                                                </Setter>
                                                                <Setter TargetName="ExpandPath" Property="Shape.Fill" Value="#FF595959" />
                                                                <Setter TargetName="ExpandPath" Property="Shape.Stroke" Value="#FF262626" />
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </ToggleButton.Style>
                                </ToggleButton>
                                <Border x:Name="Bd"
                                        Grid.Column="1"
                                        HorizontalAlignment="Stretch"
                                        Background="{TemplateBinding Panel.Background}"
                                        BorderBrush="{TemplateBinding Border.BorderBrush}"
                                        BorderThickness="{TemplateBinding Border.BorderThickness}"
                                        Padding="{TemplateBinding Control.Padding}"
                                        SnapsToDevicePixels="True">
                                    <ContentPresenter x:Name="PART_Header"
                                                      HorizontalAlignment="{TemplateBinding Control.HorizontalContentAlignment}"
                                                      Content="{TemplateBinding HeaderedContentControl.Header}"
                                                      ContentSource="Header"
                                                      ContentStringFormat="{TemplateBinding HeaderedItemsControl.HeaderStringFormat}"
                                                      ContentTemplate="{TemplateBinding HeaderedContentControl.HeaderTemplate}"
                                                      ContentTemplateSelector="{TemplateBinding HeaderedItemsControl.HeaderTemplateSelector}"
                                                      SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" />
                                </Border>
                                <ItemsPresenter x:Name="ItemsHost"
                                                Grid.Row="1"
                                                Grid.Column="1" />
                            </Grid>
                        </StackPanel>
                        <ControlTemplate.Triggers>
                            <Trigger Property="TreeViewItem.IsExpanded" Value="False">
                                <Setter TargetName="ItemsHost" Property="UIElement.Visibility" Value="Collapsed" />
                            </Trigger>
                            <Trigger Property="ItemsControl.HasItems" Value="False">
                                <Setter TargetName="Expander" Property="UIElement.Visibility" Value="Hidden" />
                            </Trigger>
                            <Trigger Property="TreeViewItem.IsSelected" Value="True">
                                <Setter TargetName="Bd" Property="Panel.Background" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}" />
                                <Setter Property="TextElement.Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}" />
                            </Trigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="TreeViewItem.IsSelected" Value="True" />
                                    <Condition Property="Selector.IsSelectionActive" Value="False" />
                                </MultiTrigger.Conditions>
                                <Setter TargetName="Bd" Property="Panel.Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" />
                                <Setter Property="TextElement.Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" />
                            </MultiTrigger>
                            <Trigger Property="UIElement.IsEnabled" Value="False">
                                <Setter Property="TextElement.Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </TreeView.ItemContainerStyle>

</TreeView> 
```

目前我似乎无法将这两者结合起来。也许这里已经太晚了。

我应该将样式放在模板中的哪个位置以获得 FullRowSelect 并在失去焦点时保持选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:56:49.193

删除`<Style>`两个颜色画笔定义周围的标签...换句话说，使颜色画笔直接指向`Resources`而`TreeView`不是包裹在 a 中`Style`。

# c# - 当应用程序执行大量异步 http 请求时，Windows 进程无法终止

> ID：15008141
> 
> 赞同：2
> 
> 时间：2013-02-21T17:04:46.907
> 
> 标签：c#, task-parallel-library, async-await, asp.net-web-api

我有一个关于向服务器执行大量异步不成功请求的进程的奇怪行为的问题。奇怪的是，退出/停止/终止进程几乎是不可能的。如果您在 Windows 8 机器上编译并运行该程序，则该进程会挂起，我还没有找到如何杀死它的解决方案。只有重新启动有帮助。

有人可以解释一下上述行为吗？

谢谢。

PS：这是我使用taskmanager杀死进程时得到的

![这是我使用 taskmanager 杀死进程时得到的](../Images/05128d1dbfbde967e035fa7bc6e3306d.png)

```
internal class Program
{
    private const int totalRequests = 2000;

    private static void Main(string[] args)
    {
        var cancellationTockenSource = new CancellationTokenSource();
        LoadTest(cancellationTockenSource);

        Console.WriteLine("Press any key to break");
        Console.ReadLine();
        cancellationTockenSource.Cancel();
    }

    private static async Task LoadTest(CancellationTokenSource cancellationTockenSource)
    {
        Stopwatch stopWatch = Stopwatch.StartNew();
        var requests = new List<Task>(totalRequests);

        for (int i = 0; i < totalRequests; ++i)
        {
            requests.Add(Request(cancellationTockenSource.Token));
        }
        try
        {
            await Task.WhenAll(requests);
        }
        catch (Exception e)
        {
            Console.WriteLine(e);
        }

        stopWatch.Stop();
        Console.WriteLine("{0} req/sec", stopWatch.Elapsed.TotalSeconds/totalRequests);
    }

    private static HttpRequestMessage CreateMessage()
    {
        var url = new Uri("http://ya.ru:8080/234234234234x");
        var message = new HttpRequestMessage(HttpMethod.Get, url);
        message.Headers.Accept.Add(MediaTypeWithQualityHeaderValue.Parse("application/json"));
        return message;
    }

    protected static async Task<string> Request(CancellationToken token)
    {
        using (var client = new HttpClient())
        {
            HttpResponseMessage response = await client.SendAsync(CreateMessage(), token);
            string content = await response.Content.ReadAsStringAsync();
            return content;
        }
    }
} 
```

# vb.net - 30 天有效期后，新开发和部署的项目（exe）将运行与否？

> ID：15008142
> 
> 赞同：1
> 
> 时间：2013-02-21T17:04:46.687
> 
> 标签：vb.net

我已经下载了 30 天有效期的 Visual Studio 2008。我想开发 Visual basic (window) 项目。我的问题是该项目将在 30 天后运行。我的意思是说，一旦我为那个新开发的项目部署了最终的 exe 文件或包，那么它将在 30 天后激活。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:11:53.867

您使用有限版本的 Visual Studio 创建的 exe 将在 Visual Studio 过期后完美运行，但除非您激活它，否则您将无法使用特定安装的 Visual Studio 对项目进行任何修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T17:12:11.193

您的 2008 安装在 30 天后将无法正常工作，但您的项目中的工件/源会很好。

# php - 如何删除字符串中不需要的括号？

> ID：15008147
> 
> 赞同：0
> 
> 时间：2013-02-21T17:04:52.490
> 
> 标签：php

我有一个包含数学表达式的字符串，例如`(21)*(4+2)`. `(21)*(4+2) => 21*(4+2)`出于计算的目的，我需要“简化”它，使其在表达式（即）之间不包含任何数字。我不知道该怎么做（我想到了一些用正则表达式替换的东西，但我不太擅长处理它）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:19:03.420

好的，在我看来，我不小心解决了这个问题（到目前为止，`preg_replace`对我有用）：

```
echo preg_replace( "/\((\d+)\)/", "$1", $eq ); 
```

我认为它没有考虑小数。它生成的示例方程和输出位于[codepad](http://codepad.org/SLwxPx4A)[上](http://codepad.org/SLwxPx4A)。

对于小数，我`[\d\.]+`在正则表达式中使用了 a 。它似乎正在工作。

```
echo preg_replace( "/\(([\d\.]+)\)/", "$1", $eq ); 
```

另一个[链接](http://codepad.org/SsML2F3Z)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:13:01.760

你可以做一个这样的算法：

```
$str = "(21)*(4+2)";
//split above to array of characters
$arr = str_split($str);

foreach($arr as $i => $char) {
   if character is opening parenthesis {
     get all characters in a string until closing parnethesis is found
   endif }

   if the string you received from above contains only digits 
   (means it has no expression i.e. +,-,/,%,*) then remove the first and last 
   characters of the above string which are the parenthesis and append the 
   string to the final string.
} 
```

# python - 如何清理在 django-nose 测试函数中所做的数据库更改？

> ID：15008149
> 
> 赞同：1
> 
> 时间：2013-02-21T17:04:59.557
> 
> 标签：python, django, unit-testing, postgresql, django-nose

出于各种原因，我们使用鼻子功能测试来编写我们的测试套件。

在为我们的 Django 应用程序运行测试套件时，我们希望避免从这些测试中泄漏任何数据（如`django.test.TestCase`），因为这会导致耦合并且难以诊断故障。

解决这个问题最明显的方法是一个装饰器，我们可以将它包裹起来，然后我们想要清理的测试，但如果一个不同的解决方案可以得到我们想要的东西，我不会结婚。

我们在 PostgreSQL 上运行，因此特定于 Postgres 的解决方案会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T10:23:54.970

我今天花了一些时间看这个，并提出了以下装饰器：

```
from functools import wraps

from django.db import transaction
from mock import patch

def rollback_db_changes(func):
    """Decorate a function so that it will be rolled back once completed."""
    @wraps(func)
    @transaction.commit_manually
    def new_f(*args, **kwargs):
        def fake_commit(using=None):
            # Don't properly commit the transaction, so we can roll it back
            transaction.set_clean(using)
        patcher = patch('django.db.transaction.commit', fake_commit)
        patcher.start()
        try:
            return func(*args, **kwargs)
        finally:
            patcher.stop()
            transaction.rollback()
    return new_f 
```

我们执行修补，以便 Django 测试客户端在我们无法回滚的情况下不会关闭事务。这允许以下测试通过：

```
from django.contrib.auth.models import User

@rollback_db_changes
def test_allowed_access():
    user = User.objects.create(username='test_user')
    eq_(1, User.objects.count())

@rollback_db_changes
def test_allowed_access_2():
    user = User.objects.create(username='test_user')
    eq_(1, User.objects.count()) 
```

以前要运行的第二个测试无法创建具有重复用户名的用户。

# android - “？android:attr/activatedBackgroundIndicator”如何工作？

> ID：15008150
> 
> 赞同：86
> 
> 时间：2013-02-21T17:05:01.040
> 
> 标签：android

我正在寻找如何在显示选择的上下文操作栏时突出显示列表中的选定项目，我找到的解决方案是将`android:background`我的行布局 xml 的属性设置为`"?android:attr/activatedBackgroundIndicator"`.

但是如何设置呢？

1.  所涉及的机制是什么？
2.  “?”、“attr”、“activatedBackgroundIndicator”等语法元素是什么意思？
3.  “activatedBackgroundIndicator”的含义在哪里定义？

* * *

## 回答 #1

> 赞同：221
> 
> 时间：2013-04-10T05:49:20.250

如果您有法医的心情，这里是如何挖掘并找出正在发生的事情。

```
android:background="?android:attr/activatedBackgroundIndicator"? 
```

直观地说，这意味着将背景设置为某个可绘制对象。

但是让我们进一步分解它，看看我们如何得到我们神秘的可绘制对象。

准确地说，它的意思是“将背景属性设置为**当前主题中属性“activatedBackgroundIndicator”所指的内容**。

如果你理解了“在当前主题中所指”的部分，那么你基本上已经了解了幕后发生的一切。

基本上，**activatedBackgroundIndicator 不是实际的可绘制对象，而是对可绘制对象的引用**。那么“activateBackgroundIndictor”属性实际定义在哪里呢？

它在您的 sdk 目录中的文件名**attrs.xml**中定义。例如：

> path_to_android_sdk/platforms/android-17/ **data/res/values/attrs.xml**

如果您打开该文件，您将声明如下：

```
<attr name="activatedBackgroundIndicator" format="reference" /> 
```

attrs.xml 是您声明稍后将在视图 xml 中使用的所有属性的位置。**请注意，我们是在声明属性及其类型，而不是在此处实际分配值**。

实际值在**theme.xml**中分配。该文件位于：

> path_to_android_sdk/platforms/android-17/ **data/res/values/themes.xml**

如果您打开该文件，您将看到**多个定义，具体取决于您使用的主题**。例如，这里分别是主题名称 Theme、Theme.Light、Theme.Holo、Theme.Holo.Light 的定义：

```
<item name="activatedBackgroundIndicator">@android:drawable/activated_background</item>
<item name="activatedBackgroundIndicator">@android:drawable/activated_background_light</item>
<item name="activatedBackgroundIndicator">@android:drawable/activated_background_holo_dark</item>
<item name="activatedBackgroundIndicator">@android:drawable/activated_background_holo_light</item> 
```

现在我们有了神秘的drawables。如果您选择第一个，它将在可绘制文件夹中定义：

> path_to_android_sdk/platforms/android-17/ **data/res/drawable/activated_background.xml**

如果您打开该文件，您将看到可绘制对象的定义，这对于理解正在发生的事情很重要。

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_activated="true" android:drawable="@android:drawable/list_selector_background_selected" />
    <item android:drawable="@color/transparent" />
</selector> 
```

这里我们定义了一个有两种状态的drawable——默认状态只是透明背景，如果状态是“state_activated”，那么我们的drawable就是“list_selector_background_selected”。

有关可绘制对象和状态的背景信息，请参阅[此链接。](http://developer.android.com/reference/android/graphics/drawable/StateListDrawable.html)

“list_selector_background_selected”是一个 9 补丁 png 文件，位于 drawable-hdpi 文件夹中。

现在您可以看到为什么我们将 activateBackgroundIndicator 定义为参考而不是直接链接到可绘制文件 - 它允许您根据主题选择正确的可绘制对象。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-21T17:16:54.077

有一次我也想知道这一点。大量的Android资源就像一个黑匣子，无法直接看到。我可能在某个地方错过了它们，但我在 SDK 源代码中找不到它们。这是我所知道的。

*   `android:background`将需要一个drawable。
*   语法是风格

    > 必须是对另一个资源的引用，格式为“@[+][package:]type:name”或格式为“?[package:][type:]name”的主题属性

在这种情况下，`?`表示查看包中的主题，`android`并且它是`attr`名称所在的类型`activatedBackgroundIndicator`。

您也应该能够在代码隐藏中访问它`android.R.attr.activatedBackgroundIndicator`。

`attr`可以在[R.attr](http://developer.android.com/reference/android/R.attr.html)找到Android 属性列表

*   `activatedBackgroundIndicator`是 Android 3.0+ 中定义的可绘制对象

    > Drawable 用作激活项目的背景。

它基本上只是操作系统中定义的标准项目。我似乎无法在 Android 源代码中找到，但这里是文档的链接。[激活背景指示器](http://developer.android.com/reference/android/R.attr.html#activatedBackgroundIndicator)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-21T17:32:59.290

这是从主题中附加价值的一种形式。在资源编译期间该值在技术上是未知的，因为此时可能不知道主题值。相反，该值是在运行时根据取自 (最常见) 的实际主题解析的`ContextThemeWrapper`。

这提供了一种重用资源值的方法。我在这里不是在谈论性能方面，而是在组织和维护方面。该属性就像一个变量一样，承诺它将在运行时保存一个实际值。

这种方法还允许更大程度的定制——而不是硬编码窗口背景可绘制对象的值，而是从主题中获取实际可绘制对象，提供选择的属性作为键。这使*您可以*覆盖该属性的值。您只需要：

1.  创建您自己的主题（这只​​是“样式”资源的一个花哨名称），最常见的是从默认主题之一派生。
2.  为相关属性提供您自己的值。

如果您为活动或应用程序指定了主题，平台将自动使用您的值。你这样做就像问题中描述的那样。主题属性引用的一般语法在此处描述：[引用样式属性](http://developer.android.com/guide/topics/resources/accessing-resources.html#ReferencesToThemeAttributes)。您还将在那里找到整个机制的示例和描述。

**编辑**

应该注意的一件事是实际属性名称及其在各种平台版本中的存在。在下一个平台版本中引入新属性是相当普遍的 - 例如，一些在 3.0 版中添加用于 ActionBar 样式。

您应该将属性名称视为 API 的一部分——换句话说，它们是您被允许使用的合同的一部分。这与类及其签名非常相似 - 您使用`LocationManager`类来获取最后一个设备位置，因为*您从某些来源*（教程、参考、官方指南等）知道此类的目的是什么。同样，属性名称及其用途（有时很好，有时很糟糕）在 Android 平台文档中定义。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-08T07:02:40.797

更新：API 指南提供了更详细的版本，所以我想引用它。

> 样式属性资源允许您引用当前应用主题中的属性值。引用样式属性允许您通过设置样式以匹配当前主题提供的标准变体来自定义 UI 元素的外观，而不是提供硬编码的值。引用样式属性本质上是说，“在当前主题中使用由该属性定义的样式。”
> 
> 要引用样式属性，名称语法几乎与普通资源格式相同，但使用问号 (?) 代替 at 符号 (@)，并且资源类型部分是可选的。例如：`

原答案：

[numan salati](https://stackoverflow.com/users/909956/numan-salati)已经提供了一个完美的答案，但它没有解决“？” 句法。[这是来自 API Guide Accessing Resources](https://developer.android.com/guide/topics/resources/accessing-resources.html)的引述

> 要引用样式属性，名称语法几乎与普通资源格式相同，但使用问号 (?) 代替 at 符号 (@)，并且资源类型部分是可选的。例如：
> 
> ?[<package_name>:][<resource_type>/]<resource_name>

# javascript - 根据 javascript 值更改 HTML 图像

> ID：15008151
> 
> 赞同：0
> 
> 时间：2013-02-21T17:05:03.450
> 
> 标签：javascript, html, webpage

首先想说的是，我在[http://ali-hassan.info](http://ali-hassan.info)上工作时上传了这些 我有一个表格，当我单击表格中的一个项目时，它会在该单元格的数组中更新，所以当页面加载单元格变量为0，单击时它变为1，当发生这种情况时，我希望图像为那个单元格更改，目前我在我的javascript中有一个这样的函数，有一个函数实际上改变了单元格的变量为 1。

```
function changeImage()
{
element=document.getElementById('myimage')
if (element.src.match("empty"))
  {
  element.src="1.gif";
  }
else
  {
  element.src="2.gif";
  }
} 
```

这是 HTML 表格的示例

```
<td><div align="center">A</div></td>
   <td class='n' id='a1' onclick="myFunction(1,0)"><img id="myimage" onclick="changeImage(1)"  src="empty.gif"/></td>
   <td class='n' id='a2' onclick="myFunction(2,0)"><img id="myimage" onclick="changeImage(2)"  src="empty.gif"/></td>
   <td class='n' id='a3' onclick="myFunction(3,0)"><img id="myimage" onclick="changeImage(3)"  src="empty.gif"/></td>
   <td class='n' id='a4' onclick="myFunction(4,0)"><img id="myimage" onclick="changeImage(4)"  src="empty.gif"/></td>
   <td></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:15:57.510

```
 //modify ur js like this
 function changeImage(img)
 {
 //"img" is the image on which user clicked
 if (img.src.match("empty"))
   {
   img.src="1.gif";
   }
 else
   {
   img.src="2.gif";
   }
 }
//and html like this
  <td><div align="center">A</div></td>
  <td class='n' id='a1' onclick="myFunction(1,0)"><img id="myimage" onclick="changeImage(this)"  src="empty.gif"/></td>
  <td class='n' id='a2' onclick="myFunction(2,0)"><img id="myimage" onclick="changeImage(this)"  src="empty.gif"/></td>
  <td class='n' id='a3' onclick="myFunction(3,0)"><img id="myimage" onclick="changeImage(this)"  src="empty.gif"/></td>
  <td class='n' id='a4' onclick="myFunction(4,0)"><img id="myimage" onclick="changeImage(this)"  src="empty.gif"/></td>
  <td>
 </td> 
```

您不能在 HTML 中使用重复的 Id 作为选择器，这是一种糟糕的编程风格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:11:44.233

```
<img onclick="changeImage.call(this, 1)" 
```

JS：

```
function changeImage(i)
{
    this.src= i + ".gif";
} 
```

注意：您的示例需要一些更改，我只展示它是如何完成的

# iphone - ios 应用程序的配置文件

> ID：15008154
> 
> 赞同：0
> 
> 时间：2013-02-21T17:05:27.927
> 
> 标签：iphone, ios

我之前上传了一个应用程序，为此我制作了一个配置文件，现在我想知道我是否可以将它用于我的新应用程序，或者我是否必须为此创建一个新的配置文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:08:31.083

不，你不必。您可以使用相同的配置文件来安装多个应用程序。

# r - R中的向量列表比较

> ID：15008157
> 
> 赞同：1
> 
> 时间：2013-02-21T17:06:01.637
> 
> 标签：r, list, vector, comparison

我目前正在尝试检查一个列表（包含多个填充有值的向量）是否等于一个向量。不幸的是，以下功能对我不起作用：`match()`, `any()`, `%in%`. 下面给出了我想要实现的一个示例：

让我们说：

```
lists=list(c(1,2,3,4),c(5,6,7,8),c(9,7))
vector=c(1,2,3,4)
answer=match(lists,vector) 
```

当我执行此操作时，它确实返回`False`值而不是肯定的结果。当我将向量与向量进行比较时，它正在工作，但是当我将向量与列表进行比较时，它似乎无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:17:32.093

我会使用`intersect`这样的东西：

```
lapply(lists,intersect,vector)
[[1]]
[1] 1 2 3 4

[[2]]
numeric(0)

[[3]]
numeric(0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:09:21.053

我不完全确定您想要的结果是什么（例如，您是否关心向量顺序？）但无论如何您都需要考虑`lapply`. 例如，

```
##Create some data
R> lists=list(c(1,2,3,4),c(5,6,7,8),c(9,7)) 
R> vector=c(1,2,3,4) 
```

然后我们使用`lapply`遍历每个列表元素并**应用**一个函数。在这种情况下，我使用了该`match`功能（因为您在问题中提到了这一点）：

```
R> lapply(lists, function(i) all(match(i, vector)))
[[1]]
[1] TRUE

[[2]]
[1] NA

[[3]]
[1] NA 
```

可能值得转换为向量，所以

```
R> unlist(lapply(lists, function(i) all(match(i, vector))))
[1] TRUE   NA   NA 
```

并更改`NA`为 FALSE，例如：

```
m = unlist(lapply(lists, function(i) all(match(i, vector))))
m[is.na(m)] = FALSE 
```

# vba - 基于行标签（轴字段）的数据透视图中的颜色点（条）

> ID：15008161
> 
> 赞同：1
> 
> 时间：2013-02-21T17:06:13.050
> 
> 标签：vba, excel, excel-2010, pivot-table

我正在尝试自动化一个到目前为止我一直在 Excel 2010 中手动执行的过程。我经常创建数据透视图。这些图表上的系列之一显示为条形。我根据数据透视图的行标签之一更改每个条的填充颜色。例如，如果行标签 =“GEO”，我将条形的填充颜色更改为绿色。

我确信可以通过 VBA 自动执行此过程。到目前为止，这是我的代码。当我运行这个宏时，它会在 If 语句的第一行停止并给出这个错误。编译错误：预期的数组。谁能给我一些关于如何使这段代码工作的建议？

```
Sub By_Rig_PC_Coloring()

For i = 1 To ActiveChart.SeriesCollection(2).Points.Count
    ActiveChart.SeriesCollection(2).Points(i).Select
    If xlRowField("MFR") = "GEO" Then
        Selection.Format.Fill.Forcolor.RGB = RGB(0, 176, 80)
    End If
Next i

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-06T13:27:30.537

据我所知，您无法访问与 current 关联的 X 轴标签`Point`。但这是一个数据透视图，因此您可以使用数据透视表来获取您需要的信息。

点是 DataField 的 PivotItems，Series 是 ColumnFields，X 标签是 RowFields。`SeriesCollection(2).Points(10)`也会如此（`pvtYourPivotTable.ColumnFields(2).DataRange.Cells(10)`假设您只有一个`DataField`，否则`DataRange`将是多列，您必须为此进行调整）。因此，一旦数据透视表中的单元格与 Point 关联，标签将位于`Intersect(pvtYourPivotTable.RowFields("MFR").DataRange, pvtYourPivotTable.ColumnFields(2).DataRange.Cells(10).EntireRow`. 您也可以使用`Offset`或其他方法。

这是另一种基于 X 标签为图表条着色的方法：[Peltier Tech Blog](http://peltiertech.com/create-update-chart-using-partial-pivot-table/) without VBA。

希望这可以帮助。

# c++ - 这是使用 strerror_r 的正确方法吗？

> ID：15008162
> 
> 赞同：1
> 
> 时间：2013-02-21T17:06:14.303
> 
> 标签：c++, errno

我在这样的代码中为线程安全的 strerror_r 提供了一个 c++ 包装器：

```
struct MyErrno {};
std::ostream& operator<<(std::stream& os, const MyErrno& err)
{
    const int len = 128
    char buf [len];
    os << strerror_r(errno, buf, len);
    return os;
} 
```

这只是一个简单的包装器，所以在 C++ 代码中我可以说类似

```
<< MyErrno() << .. 
```

并使用 errno 的线程安全打印。使用 128 似乎也可以，因为手册页说`strerror_r`将返回一个指向不可变静态字符串的指针（可能是空终止），或者`buf`在用空终止符填充它之后返回一个指针，无论大小如何......只是不确定如果这个简单的包装器有问题（可能有问题）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:23:31.803

我不了解您要在其中使用它的完整上下文（特别是 struct 的作用是`MyErrno`什么，以及什么是`StreamErrno`，因为您的`operator<<`定义适用于`sockaddr_in`未使用的类型值）。

但是，总的来说，这不是一种安全的使用方式`errno`，尽管它是一种完全安全的使用方式`strerror_r`。

问题是您很可能在这样的上下文中使用它：

```
if ((something) != OK) {
  std::cerr << "Something bad happened: "
            << (some value which causes your function to be called)
            << ...
} 
```

也就是说，在失败的系统调用之间可能会有一些系统调用（输出字符串“发生了一些事情”），在 中留下一个值`errno`，并`errno`在您的函数中使用。任何系统调用都可以导致`errno`设置，即使错误是无害的；因此，最佳实践是`errno` *立即*获取 的值。这将是使用自定义类型的一个很好的理由，例如`MyError`：

```
struct MyError {
  int error;
  MyError(int err) : error(err) {}
};

std::ostream& operator<<(std::ostream& os, const MyError& e) {
  // as with your function, but using `e.error` instead of `errno`
}

if ((something) != OK) {
  MyError e(errno);
  std::cerr << "Something bad happened: " << e
            << ...
} 
```

# visual-studio-2010 - 访问在虚拟机上运行的 IIS Express

> ID：15008165
> 
> 赞同：1
> 
> 时间：2013-02-21T17:06:28.373
> 
> 标签：visual-studio-2010, virtual-machine, iis-express

我正在尝试访问在我的 Mac 上的 Windows 虚拟机上运行的 IIS Express。我尝试包含一个指向虚拟机 IP 的附加绑定，我使用 netsh 来允许 url 保留并确保未启用防火墙。

在这一切之后，我尝试在 Visual Studio 中运行一个程序并通过我的 Mac 上的 url 访问它。页面闲置了很长时间，然后返回“没有路由主机”的错误

这真让我抓狂！有人对可能导致它的原因有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:14:27.310

请执行下列操作：

1.  打开 IIS，并检查您的 HTTP 网站是否在端口 80 上运行。
2.  通过首先在 Windows 访客本身上浏览您的网站来确保上述内容。
3.  通过从您的 MAC 主机发送 ping 到 Windows 来宾 IP 来检查连接。
4.  如果上述成功，请在 MAC 主机的端口号 80 上执行 telnet。

您必须能够在上述任一方面解决您的问题。

# extjs4 - extjs中的swapStyleSheet使用绝对路径

> ID：15008166
> 
> 赞同：0
> 
> 时间：2013-02-21T17:06:30.810
> 
> 标签：extjs4

我在我的应用程序中使用多个命名空间，我希望能够在我的应用程序的不同部分使用相同的样式表。当我在根路由（“/”）中加载 extjs 应用程序时，我调用以下方法

```
Ext.util.CSS.swapStyleSheet("theme","/ext-4.1.1a/resources/css/ext-all-access.css"); 
```

, extjs 将适当地在以下位置加载样式表：

```
/ext-4.1.1a/resources/css/ext-all-access.css 
```

但是，如果我从“/admin/pages”的视图中加载我的 extjs 应用程序，extjs 将尝试在

```
/admin/ext-4.1.1a/resources/css/ext-all-access.css 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:43:20.200

您可以尝试传递完整的网址，例如：

```
Ext.util.CSS.swapStyleSheet("theme", window.location.origin + "/ext-4.1.1a/resources/css/ext-all-access.css"); 
```

# authentication - 在 SYSTEM 帐户下运行脚本时需要 VBScript 错误 424 对象

> ID：15008169
> 
> 赞同：0
> 
> 时间：2013-02-21T17:06:32.850
> 
> 标签：authentication, vbscript, adsi

我正在尝试将域用户帐户添加到本地组，如果我登录到计算机，一切正常，但如果我在 SYSTEM 帐户下运行相同的脚本，则会失败并出现错误：424 Object Required”。这是代码：

```
Dim domain          : domain           = "DOMAIN01"
Dim domainController: domainController = "99.139.151.102"
Dim localComputer   : localComputer    = "SERVER001"
Dim localGroup      : localGroup       = "LocalGroup1"
Dim domainAccount   : domainAccount    = "User1"
Dim objLocalGroup
Dim objDomainUser

Set objLocalGroup = GetObject("WinNT://" & localComputer    & "/" & localGroup    & ",group")
Set objDomainUser = GetObject("WinNT:").OpenDSObject("WinNT://" & domain & "/" & domainController & "/" & domainAccount, domainAccount, "Password1234", ADS_SECURE_AUTHENTICATION or ADS_SERVER_BIND)

  'Add domain user to local group.
  objLocalGroup.Add(objDomainUser.ADsPath)

  If Err.Number <> 0 Then
       WScript.Echo Err.Number
       WScript.Echo Err.Description
  Else
       WScript.Echo domainAccount & " has been added to local group " & localGroup
  End If 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:39:59.117

SYSTEM 帐户没有业务连接到其他主机。以具有本地管理员权限的用户身份运行脚本。

# c++ - 如何使用 C++ 从 PCM 样本中过滤出超出听力范围的数据？

> ID：15008177
> 
> 赞同：-2
> 
> 时间：2013-02-21T17:06:53.490
> 
> 标签：c++, audio, pcm

我有原始的 16 位 48khz pcm 数据。我需要剥离所有超出人类听力范围的数据。

现在我只是对所有样本求和，然后除以样本数来计算峰值声级，但我需要减少误报。

我一直都有很大的峰值电平，说话和其他声音我可以听到一点点增加的电平，所以我需要实施一些过滤。我根本不熟悉声音处理，所以目前我没有使用任何过滤器，因为我不明白如何创建它。我当前的代码如下所示：

```
for(size_t i = 0; i < buffer.size(); i++)
level += abs(buffer[i]);
level /= buffer.size(); 
```

如何使用 C++ 实现这种过滤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:10:42.110

使用[带通滤波器](http://en.wikipedia.org/wiki/Band-pass_filter)。

> 带通滤波器是一种通过特定范围内的频率并拒绝（衰减）该范围之外的频率的设备。

这听起来正是您正在寻找的那种过滤器。

我进行了一次快速的谷歌搜索，发现[了这个](http://www.kvraudio.com/forum/viewtopic.php?p=4869614)讨论 C++ 实现的线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:00:20.953

如果声级超过某个阈值，听起来你想做某事（也许开始录音）。这有时被称为“门”。听起来您在误报方面也遇到了麻烦。这有时通过应用于门的“侧链”来处理。

门的一般原理是创建信号的包络，然后监视包络以发现它何时超过某个阈值。如果它高于阈值，则您的门“打开”，否则，您的门“关闭”。如果您在创建包络之前以某种方式处理信号以使其对信号/噪声的各个部分或多或少敏感，则该处理称为“侧链”。

您将不得不自己发现细节，因为问答网站的内容太多了，但也许这已经足够开始了：

```
float[] buffer; //defined elsewhere
float HOLD = .9999 ; //there are precise ways to compute this, but experimentation might work fine
float THRESH = .7 ; //or whatever
float env = 0; //we initialize to 0, but in real code be sure to save this between runs
for(size_t i = 0; i < buffer.size(); i++) {
     // side-chain, if used, goes here
     float b = buffer[i];
     // create envelope:
     float tmp = abs(b); // you could also do buffer[i] * buffer[i]
     env = env * HOLD + tmp * (1-HOLD);
     // threshold detection
     if( env > THRESH ) {
        //gate is "on"
     } else {
        //gate is "off"
     }
} 
```

侧链可能包含过滤器，如 eq。这是一个关于设计音频均衡器的教程：http: [//blog.bjornroche.com/2012/08/basic-audio-eqs.html](http://blog.bjornroche.com/2012/08/basic-audio-eqs.html)

# h2 - 数据库连接 - 最佳实践

> ID：15008187
> 
> 赞同：1
> 
> 时间：2013-02-21T17:07:23.863
> 
> 标签：h2

我想知道在使用嵌入式模式时连接到 H2 数据库的最佳做法是什么，例如在独立的 Java 桌面应用程序中。

目前，我将数据库文件 (.h2) 与主应用程序 jar 文件放在同一目录中，并使用标准**jdbc:h2:file:**前缀来定位光盘上的文件。当然，只有当您可以动态获取文件的绝对路径，即作为主 Jar 的相对路径时，这才可以移植。

我正在使用这个：

```
class.getProtectionDomain().getCodeSource().getLocation().getPath() 
```

及其工作。但我不确定它是否完全便携。我没有在 Java 支持的所有操作系统上尝试它。

有没有其他（也许更好）的方法来做到这一点？

问候， 卢博斯

# python - 使用 Python 从电子邮件中删除附件

> ID：15008190
> 
> 赞同：0
> 
> 时间：2013-02-21T17:07:39.633
> 
> 标签：python

我希望能够只删除电子邮件中的附件并保留文本内容。我可以使用 IMAPClient 包做到这一点吗？

我发现这篇文章告诉我有一些类似于 mozilla 雷鸟的功能，它是 IMAP 客户端。链接是：

[http://www.howtogeek.com/112734/how-to-free-up-space-in-gmail-5-ways-to-reclaim-space/](http://www.howtogeek.com/112734/how-to-free-up-space-in-gmail-5-ways-to-reclaim-space/)

我如何在 python 2.7 中使用 imaplib 或 imapclient 包来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:20:18.813

我认为你弄错了。IMAPClient 是一个IMAP 客户端，所以它可以处理Imap，thunderbird 也是一个电子邮件（包括Imap）客户端，所以它是多余的，你不需要这个来使用那个。不幸的是，IMAPclient 似乎没有附件处理方法（至少我可以从文档中得知）。但是一个快速的谷歌搜索将我指向 python 的本地[imaplib作为一个可能的候选者，可以与 python 的](http://docs.python.org/2/library/imaplib.html)[电子邮件](http://docs.python.org/2/library/email.message.html)库一起做你想做的事情。第一个访问您的 gmail 帐户，第二个获取消息。这个[receipe]ץ（[http://code.activestate.com/recipes/302086-strip-attachments-from-an-email-message/](http://code.activestate.com/recipes/302086-strip-attachments-from-an-email-message/)） 中概述了一个可能的（也不完全是你的用例）场景

也是一个非常相似的[stackoverflow问题](https://stackoverflow.com/questions/1626403/python-email-lib-how-to-remove-attachment-from-existing-message)。

诀窍是 **email* lib 中没有`detach`附件方法。您必须重置消息负载以模拟此效果。

# html - 改变隐藏元素的值

> ID：15008193
> 
> 赞同：0
> 
> 时间：2013-02-21T17:07:54.017
> 
> 标签：html, ruby, watir

如何使用 ruby​​ 和 watir 单击隐藏的复选框和/或更改隐藏元素的值（从“2”到“1”）？

html

```
 [div class="spec"]
  [span class="listheader"]Rechtsgebieden[/span]
  [div]
   [span class="legalarea" style="cursor:default" onmouseout="hlt(this,false);" onmouseover="hlt(this,true);" ondblclick="call(this, '.legalarea');" onclick="call(this, '.legalarea');"]
   [table id="ctl00_cphMC_SS_eJuris_fltrJurLegalArea_cbt" border="0"] [/table]
  [/div]
 [span class="legalarea-root " style="cursor:default" onmouseout="hlt(this,false);" onmouseover="hlt(this,true);"]
  [div id="ctl00_cphMC_SS_eJuris_fltrJurLegalArea_qwtA105qwausqwt_pu" class="CheckboxValuePopup" style="display:none;position:absolute;" name="ctl00-cphMC-SS-eJuris-fltrJurLegalArea-qwtA105qwausqwt-pu"] [/div]
 [span class="legalarea-root " style="cursor:default" onmouseout="hlt(this,false);" onmouseover="hlt(this,true);"]
  [input id="ctl00_cphMC_SS_eJuris_fltrJurLegalArea_qwtA109qwausqwt_cb_cv" type="hidden" value="2" name="ctl00$cphMC$SS$eJuris$fltrJurLegalArea$qwtA109qwausqwt$cb_cv"]
 [img ondblclick="CheckBox(this, '.ctl00-cphMC-SS-eJuris-fltrJurLegalArea-qwtA109qwausqwt-pu', true);" onclick="CheckBox(this, '.ctl00-cphMC-SS-eJuris-fltrJurLegalArea-qwtA109qwausqwt-pu', true);" src="http://portal.rechtsorde.nl/img/2.png"]
 [a class="search-filter-link" onclick="$('.ctl00-cphMC-SS-eJuris-fltrJurLegalArea-qwtA109qwausqwt-pu').dialog('open'); callerID=this;"]Handels- en ondernemingsrecht[/a] 
```

用于访问元素/查找值的代码：

```
browser.hidden(:name, /A111/)first.value 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T17:42:23.070

Watir 不允许您更改隐藏元素的值。Watir 正在尝试模拟实际用户。由于用户无法更改隐藏元素，Watir 也无法更改。相反，您应该尝试与调用该函数的元素交互以更改隐藏元素。

提供的 html 似乎有点尴尬（请参阅问题评论），但我的猜测是，当单击看起来像空白复选框字段的 img 时，隐藏值会发生变化。

您可以尝试单击与隐藏字段同级的图像：

```
browser.hidden(:name, /A111/).first.parent.img.click 
```

鉴于隐藏字段的名称似乎是动态生成的，您可能还想尝试以下方法（我认为这是基于不太可能更改的部分）：

```
#Assuming that the link text beside the checkbox is unique
browser.link(:text => 'Handels- en ondernemingsrecht').parent.img.click

#Assuming that there is only one hidden element with 'fltrJurLegalArea' in the name:
browser.hidden(:name, /fltrJurLegalArea/).first.parent.img.click 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-08T00:54:56.900

你可以使用JS来改变值

browser.execute_script('document.getElementById("ctl00_cphMC_SS_eJuris_fltrJurLegalArea_qwtA109qwausqwt_cb_cv").value = "1"')

# jquery - 链接到特定的 jquery 选项卡

> ID：15008199
> 
> 赞同：0
> 
> 时间：2013-02-21T17:08:04.803
> 
> 标签：jquery, tabs, jquery-ui-tabs

我一直在寻找答案。我遇到的问题是我的标签有某些样式特征需要保持不变。以下是我正在处理的页面：

[http://nextadagency.com/theta/services.html](http://nextadagency.com/theta/services.html)

我正在尝试为每个选项卡创建链接（在单独的页面上）。当“服务”页面加载时，让它加载选定的选项卡，在顶部有一个唯一的#地址，并在页面顶部加载。由于某种原因，当我之前尝试链接到特定选项卡时，它会根据选项卡将页面加载到不同的区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:18:51.530

您可以使用 url # (hash) 和 tabs`selected`选项：

```
$('#tabs').tabs({
   selected: $('#tabs > ul > li > a[href='+window.location.hash+']').index()
}); 
```

然后当你去类似的东西时：

[http://nextadagency.com/theta/services.html#tabs1](http://nextadagency.com/theta/services.html#tabs1)

它将加载具有...的选项卡

您还可以在每次更改选项卡时将哈希添加到 url：

```
$('#tabs').tabs({
   select: function(e, ui){
      window.location.hash =  $(ui.tab).attr('href').replace(/\#/, '');
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:17:38.447

为了避免默认的散列行为（页面跳转），我使用了 URL 参数。在您的情况下，这将导致例如[http://nextadagency.com/theta/services.html?tab=3](http://nextadagency.com/theta/services.html?tab=3)

```
 $(function() {
    // update URL parameter and browser history on manual tab select
    $('#tabs').bind('tabsselect', function(event, ui) {
      var myTab = $(ui.tab).attr('href').replace('#', '');
      var myParam = '?tab=' + myTab;
      window.history.pushState('Object', 'Title', myParam);
    });

    // get 'tab' URL parameter and select tab
    var param = $(document).getUrlParam('activity');
    $('#tabs').tabs('select', param);
  }); 
```

这对你来说可能有点过头了，但至少你需要停止默认的哈希行为，可能使用`preventDefault()`.

# nginx - 来自代理应用程序的 nginx try_files，然后是 nginx

> ID：15008201
> 
> 赞同：2
> 
> 时间：2013-02-21T17:08:11.730
> 
> 标签：nginx

如果应用程序正在为它们提供服务，我正在尝试从应用程序中获取 nginx 反向代理静态文件，否​​则自己提供它们。目前，我有这个配置：

```
upstream app_server {
    server unix:/tmp/gunicorn.sock fail_timeout=0;
}

server {
    listen          8080;
    server_name     example.com;
    access_log      /var/log/nginx.access.log;
    error_log       /var/log/nginx.error.log;

    keepalive_timeout 5;

    location /static {
        try_files   $uri @proxy_to_app;
        alias       /path/to/__static;
        sendfile    off;
    }

    location / {
        try_files   $uri @proxy_to_app;
    }

    location @proxy_to_app {
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $http_host;
        proxy_redirect off;

        proxy_pass   http://app_server;
    }
} 
```

如果文件不存在，则此方法有效`/path/to/__static`；它将请求发送到应用程序服务器。但是，如果文件也存在于 中`/path/to/__static`，则 nginx 会自行提供文件。

在这两种情况下，反转`try_files`线 ( `try_files @proxy_to_app $uri`) 都会失败。如果客户端请求`/static/css/test.css`，应用程序会收到对 的请求，即使应用程序返回 404 `/css/test.css`，它似乎也不会尝试。`/path/to/__static`

更新为包括完整配置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T17:44:35.353

```
location /static/ {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_pass   http://app_server;
    proxy_intercept_errors on;
    error_page 404 =200 /local$uri;
}

location /local/static/ {
    internal;
    alias /path/to/__static/;
} 
```

# postgresql - 如何检查postgres用户和密码？

> ID：15008204
> 
> 赞同：153
> 
> 时间：2013-02-21T17:08:18.780
> 
> 标签：postgresql

我的一个朋友在我的 mac 上完成了这个配置。但我不知道他选择的用户名和密码。

* * *

## 回答 #1

> 赞同：220
> 
> 时间：2013-02-21T17:14:02.390

您将无法找出他选择的密码。但是，您可以创建新用户或为现有用户设置新密码。

通常，您可以作为 postgres 用户登录：

打开终端并执行`sudo su postgres`. 现在，输入您的管理员密码后，您可以启动`psql`并执行

```
CREATE USER yourname WITH SUPERUSER PASSWORD 'yourpassword'; 
```

这将创建一个新的管理员用户。如果您想列出现有用户，您也可以这样做

```
\du 
```

列出所有用户，然后

```
ALTER USER yourusername WITH PASSWORD 'yournewpass'; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-22T02:41:58.633

您可以更改 pg_hba.conf，然后重新加载 postgresql。pg_hba.conf 中的内容可能如下所示：

```
# "local" is for Unix domain socket connections only
local   all             all                                     trust
# IPv4 local connections:
host    all             all             127.0.0.1/32            trust 
```

然后将用户更改为postgresql，您可以成功登录。

```
su postgresql 
```

# html - 不会在 Chrome 上造成新行

> ID：15008205
> 
> 赞同：1
> 
> 时间：2013-02-21T17:08:19.903
> 
> 标签：html, css

[**示例页面**](http://jsbin.com/ezatoy/1/edit)

![在此处输入图像描述](../Images/bc334a0a5b59ece60f1e75552bec288d.png)

我有一些`<span>`元素，`inline-block`在最后一个元素之后，`<span>`我有`<br>`一个新行（可能不仅仅是一个`<br>`）。

新行适用于*Firefox*，但不适用于*Chrome* (v. 24)。不知道为什么。

我写这篇文章是为了让正在搜索互联网的人可以阅读有关此事的内容，因为我在 google/stackoverflow 上没有找到任何关于此的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:11:17.510

只要你添加内容，它就可以工作。chrome 只是不喜欢给你空白空间。

尝试`&nbsp;`在空的新行上添加。

编辑：改变，因为关于这个话题的讨论太多了。

Firefox 有一个错误，它不应该显示换行符。根据 W3C 标准，元素“[必须仅用于实际上是内容一部分的换行符](http://www.w3.org/wiki/HTML/Elements/br)”。没有后面的内容`<br>`，它不会创建这个换行符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:21:34.880

已解决：http: [//jsbin.com/ezatoy/32/edit](http://jsbin.com/ezatoy/32/edit)

通过向容器元素添加[零宽度空间，如下所示：](http://www.fileformat.info/info/unicode/char/200b/index.htm)

```
div:after{ content:'\0200B'; } 
```

这确保了在最后一次出现之后会有一些内容`<br>`，有效地进入一个新行。无需添加/更改任何 DOM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T17:11:23.987

`<br />`可能不是最好的解决方案，但如果你在 Chrome 中添加空格后它可以工作。

```
<br />&nbsp; 
```

# javascript - 查询对象属性适用于除 IE 10 以外的所有浏览器

> ID：15008210
> 
> 赞同：1
> 
> 时间：2013-02-21T17:08:34.913
> 
> 标签：javascript, properties, internet-explorer-10

我正在尝试构建一个包含画布上下文对象的属性值的字符串。我使用的代码适用于我测试过的所有浏览器，IE 10 除外。代码如下：

```
getCanvasInfo : function (canvas) {
    var props = [],
        prop,
        ctx = canvas.getContext('2d');
    for (prop in ctx) {
        if (ctx.hasOwnProperty(prop) &&
            prop !== "canvas" &&
            typeof ctx[prop] !== "function")
        {
            props.push(prop);
        }
    }
    return props.sort().map(function (p) {
        return p + ": " + ctx[p];
    }).join("\n");
} 
```

在 IE 10（移动和桌面）中，`if`测试似乎排除了所有属性，`props`循环退出时留下一个空数组。我已经在调试器中验证了在进入循环`ctx`时确实具有预期的（非功能）属性。`for..in`这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T04:11:25.190

代码的问题在于，在 IE10 中`ctx.hasOwnProperty(prop)`返回`false`的是技术上位于画布对象本身而不是其原型上的字段；（这对我来说似乎是一个错误。我不确定它是否仅适用于画布其他元素也存在。

我已经更新了您的代码，现在在 IE10 和 Chrome 中返回了类似的结果。请参阅以下 jsFiddle [http://jsfiddle.net/T2yzm/1/](http://jsfiddle.net/T2yzm/1/)

```
var getCanvasInfo = function (canvas) {
    var props = [],
        prop,
        ctx = canvas.getContext('2d');
    for (prop in ctx) {
        if ( prop !== "canvas" && typeof ctx[prop] !== "function") {
            props.push(prop);
        }
    }
    return props.sort().map(function (p) {
        return p + ": " + ctx[p];
    }).join("\n");
};

console.log( getCanvasInfo( $("canvas")[0] ) ); 
```

# c# - 与字符串不同的数字算法

> ID：15008211
> 
> 赞同：0
> 
> 时间：2013-02-21T17:08:36.577
> 
> 标签：c#, algorithm

我正在开发一个简单的游戏，我需要使用诸如“hello world”之类的单词或短语并将其转换为一系列数字。

标准是：

1.  数字需要不同
2.  需要配置最大数字序列的能力。IE 总共 10 个数字。
3.  需要能够按顺序为每个数字配置最大范围。
4.  必须是确定性的，即对于相同的输入短语，我们每次都应该得到相同的序列。

我试过像这样分解问题：

1.  将字符转换为 ASCII 数字代码：“hello world”=`104 101 108 108 111 32 119 111 114 108 100`
2.  删除所有其他数字，直到我们满足总数（在这种情况下为 10）
3.  Foreach 数字如果数字 > 最大数字然后除以 2 直到数字 <= 最大数字
4.  如果有任何数字重复，则增加或减少第一次出现的次数，直到满意为止。（这可能会导致问题，因为您可以通过解决另一个副本来创建副本）

有没有更好的方法来做到这一点，还是我走在正确的轨道上？如上所述，我认为我可能会遇到消除区别的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:14:35.767

如果你想限制输出系列的大小——那么**这是不可能的**。

**证明：**
假设你的输出是一系列 size `k`，每个 range都是`r <= M`一些预定义`M`的，那么最多`k*M`有可能的输出。

但是，输入的数量是无限的，具体来说，输入是`k*M+1`不同的。

根据[鸽笼原理](http://en.wikipedia.org/wiki/Pigeonhole_principle)（输入为鸽子，输出为鸽笼）-一个鸽笼（输出）中有2只鸽子（输入）-因此无法满足要求。

* * *

**原始答案**，在不限制输出系列大小的情况下提供解决方法：

您可以使用素数，让我们`p1,p2,...`成为**素数**系列。
然后，将字符串转换为一系列数字，使用`number[i] = ascii(char[i]) * p_i`
每个字符的范围显然是那么`[0,255 * p_i]`

因为对于 each`i,j`这样`i != j`-> `p_i * x != p_j * y`(对于 each `x,y`) - 你会得到唯一性。但是，这在理论上主要是好的，因为生成的数字可能会快速增长，并且对于实际实现，您将需要一些大数字库，例如 java 的 BigInteger（不记得 C# 等效项）

另一种可能的解决方案（同样放宽无系列限制）是：

```
number[i] = ascii(char[i]) + 256*(i-1) 
```

在这里的范围`number[i]`是`[256*(i-1),256*i)`，并且元素仍然是不同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:36:42.447

从数学上讲，理论上可以做你想做的事，但你不能在 C# 中做到：

如果您的输出需要不同，那么在使用 ASCII 值对字符串进行编码后，您不会丢失任何信息。这意味着如果您将输出大小限制为*n 个*数字，那么这些数字必须包含编码中的所有信息。

所以对于你的例子

“你好世界”-> 104 101 108 108 111 32 119 111 114 108 100

您必须保留每个数字的含义。最简单的方法是将您的数字填充为三位数字并将它们连接在一起成为一个大数字...使您的结果为 104101108111032119111114108100 最大数字 = 1。（您可以看到问题出在哪里，对于任意长度的输入，您需要非常大的数字。）所以当然可以将任意长度的字符串输入编码为*n 个*数字，但是数字会变得非常大。

如果“数字”是指数字，那么不，您不能有不同的输出，正如@amit 在他的示例中使用 pidgeonhole 原理解释的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T20:50:39.863

好的，所以在一条评论中你说过这只是为了选择彩票号码。在这种情况下，您可以执行以下操作：

```
public static List<int> GenNumbers(String input, int count, int maxNum)
{
    List<int> ret = new List<int>();
    Random r = new Random(input.GetHashCode());
    for (int i = 0; i < count; ++i)
    {
        int next = r.Next(maxNum - i);
        foreach (int picked in ret.OrderBy(x => x))
        {
            if (picked <= next)
                ++next;
            else
                break;
        }
        ret.Add(next);
    }
    return ret;
} 
```

这个想法是用字符串的哈希码播种一个随机数生成器。其余的只是选择没有替换的数字。我确信它可以更有效地编写 - 另一种方法是生成所有`maxNum`数字并随机播放第一个`count`. 警告，未经测试。

我知道较新版本的 .Net 运行时使用随机字符串哈希码算法（因此运行之间的结果会有所不同），但我相信这是可选的。编写自己的哈希算法是一种选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T17:30:48.037

让我们尽可能轻松地消除您的标准。对于不同的、确定的，只需使用哈希码。（哈希实际上并不能保证是不同的，但很有可能是）：

```
string s = "hello world";
uint hash = Convert.ToUInt32(s.GetHashCode()); 
```

请注意，我将返回的带符号整数转换`GetHashCode`为无符号整数，以避免出现“-”的机会。

然后，对于每个数字的最大范围，只需[转换 base](https://stackoverflow.com/questions/923771/quickest-way-to-convert-a-base-10-number-to-any-base-in-net)。

这为您留下了最大的序列标准。如果没有更好地了解您的要求，我只能建议在必要时截断：

```
hash.toString().Substring(0, size) 
```

截断会留​​下您不再与众不同的机会，但必须将其内置为您的要求可以接受？正如阿米特在另一个答案中解释的那样，您不能有无限的输入和非无限的输出。

# android - Android日期格式转换71

> ID：15008213
> 
> 赞同：0
> 
> 时间：2013-02-21T17:08:49.423
> 
> 标签：android

我有一个日期为 02/21/2013 04:52:10 PM 这种格式。

如何将其转换为 MM-dd-yyyy HH:mm。我已经尝试了几件事，但它一直在抛出错误

java.text.ParseException：无法解析的日期：“02/21/2013 04:52:10 PM”（偏移量 2）

我真的需要日期格式专家的帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:18:46.090

构造两个 SimpleDateFormat 对象。第一次将值从 parse() 转换为 Date 对象，第二次用于将 Date 对象转换回字符串，例如

```
try {
  DateFormat df1 = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
  DateFormat df2 = new SimpleDateFormat("dd-MMM-yyyy");
  return df2.format(df1.parse(input));
}
catch (ParseException e) {
  return null;
} 
```

解析可能会引发 ParseException，因此您需要捕获并处理它。

另外，检查一下：-

[http://developer.android.com/reference/java/text/SimpleDateFormat.html](http://developer.android.com/reference/java/text/SimpleDateFormat.html)

和更多：-

[http://msdn.microsoft.com/en-us/library/aa226054(SQL.80).aspx](http://msdn.microsoft.com/en-us/library/aa226054(SQL.80).aspx)

和更多：-

[日期格式转换Android](https://stackoverflow.com/questions/6896635/date-format-conversion-android?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:28:48.957

试试这个：

```
DateFormat inputFormat = new SimpleDateFormat("mm/dd/yyyy hh:mm:ss a", Locale.getDefault());
DateFormat outputFormat = new SimpleDateFormat("MM-dd-yyyy HH:mm", Locale.getDefault());

try {
    System.out.println("Converted: " + outputFormat.format(inputFormat.parse("02/21/2013 04:52:10 PM")));
} catch (ParseException e) {
    e.printStackTrace();
} 
```

输出：**01-21-2013 16:52**

结帐[http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)了解更多

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T17:33:51.800

您需要验证您的字符串是否有 / 或 - 在掩码中，如果有 / 那么您必须使用：

```
 SimpleDateFormat sdf = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss", LOCALE_BR);
Date convert = sdf.parse(data); 
```

如果你的字符串有 - 那么你必须使用：

```
 SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss", LOCALE_BR);
    Date convert = sdf.parse(data); 
```

或者，使用`replace()`for 改变字符 - for /

# service - 分层方式的WEB API服务

> ID：15008217
> 
> 赞同：0
> 
> 时间：2013-02-21T17:09:31.707
> 
> 标签：service, hosting, asp.net-web-api

首先，我是 WEB API 的新手。我想知道当一个 ASP.NET MVC 4 Web 应用程序是用户界面时，我需要使用另一个 MVC 4 Web 应用程序来托管 WEB API，即托管业务逻辑？请原谅我的英语不好。

编辑： http: [//www.codeproject.com/Articles/350488/A-simple-POC-using-ASP-NET-Web-API-Entity-Framewor](http://www.codeproject.com/Articles/350488/A-simple-POC-using-ASP-NET-Web-API-Entity-Framewor)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:16:01.570

我认为 api 应该是 WCF Web 服务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:23:37.103

如果 web api 用于来自浏览器的 ajax 调用，那么它应该与调用它的网页在同一个应用程序中。

你到底在用 WebAPI 做什么？

# c++ - 在标准 C++11 中获取剩余的可用内存？

> ID：15008219
> 
> 赞同：6
> 
> 时间：2013-02-21T17:09:34.720
> 
> 标签：c++, exception, memory, memory-management, c++11

是否可以在**标准**C++11 中获取系统（x86、x64、PowerPC / Windows、Linux 或 MacOS）上剩余的可用内存而不会崩溃？

一种天真的方法是尝试从太大的大小开始分配非常大的数组，每次失败时捕获异常并减小大小直到没有抛出异常。但也许有一种更有效/更聪明的方法......

编辑1：事实上我不需要确切的内存量。我想知道大约（100MB 的错误栏）我的代码在启动时可以使用多少。

编辑 2：你觉得这段代码怎么样？在我的程序开始时运行它是否安全，或者它可能会破坏内存？

```
#include <iostream>
#include <array>
#include <list>
#include <initializer_list>
#include <stdexcept>

int main(int argc, char* argv[])
{
    static const long long int megabyte = 1024*1024;
    std::array<char, megabyte> content({{'a'}});
    std::list<decltype(content)> list1;
    std::list<decltype(content)> list2;
    const long long int n1 = list1.max_size();
    const long long int n2 = list2.max_size();
    long long int i1 = 0;
    long long int i2 = 0;
    long long int result = 0;
    for (i1 = 0; i1 < n1; ++i1) {
        try {
            list1.push_back(content);
        }
        catch (const std::exception&) {
            break;
        }
    }
    for (i2 = 0; i2 < n2; ++i2) {
        try {
            list2.push_back(content);
        }
        catch (const std::exception&) {
            break;
        }
    }
    list1.clear();
    list2.clear();
    result = (i1+i2)*sizeof(content);
    std::cout<<"Memory available for program execution = "<<result/megabyte<<" MB"<<std::endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T17:13:55.340

这高度依赖于操作系统/平台。您建议的方法甚至不需要在现实生活中起作用。*在某些平台上，操作系统会给你所有的内存请求，但在你使用*它之前不会真正给你内存，此时你会得到一个 SEGFAULT...

该标准没有**与**此相关的任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T18:35:55.003

在我看来，答案是**否定的，你不能在标准 C++ 中做到这一点。**

如何[获得可用内存 C++/g++？](https://stackoverflow.com/q/2513505/341970)以及那里链接的内容。这些都是平台特定的东西。它不是标准的，但它至少可以帮助您解决正在处理的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T00:12:06.000

正如其他人所提到的，这个问题很难精确定义，更不用说解决了。硬盘上的虚拟内存算作“可用”吗？如果系统提示删除文件以获取更多硬盘空间，同时暂停你的程序怎么办？（这正是 OS X 上发生的事情。）

系统可能实现了一个内存层次结构，当你使用更多时，它会变得更慢。`alarm`您可以尝试通过在使用 C中断工具或`clock`/`localtime`或`mktime`C++11 时钟工具时分配和初始化内存块来检测 RAM 和磁盘之间的性能悬崖。随着机器在从效率较低的资源中获取内存的压力下速度变慢，挂钟时间应该会过得更快。（但这假设它没有受到其他任何东西（例如另一个进程）的压力。）您可能想告诉用户程序正在尝试什么，并将结果保存到可编辑的配置文件中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T14:56:17.403

I would advise using a configurable maximum amount of memory instead. Since some platforms overcommit memory, it's not easy to tell how much memory you will actually have access to. It's also not polite to assume that you have exclusive access to 100% of the memory available, many systems will have other programs running.

# r - r中一次多列的密度

> ID：15008222
> 
> 赞同：0
> 
> 时间：2013-02-21T17:09:47.420
> 
> 标签：r

我有一个这样的输入文件

```
V1 V2 V3 V4.............V60 
11 22 33 44.............89 
21 98 22 33.............09 
33 44 55 78.............20 
```

上述文件有 3000 多行，每行 60 列。

当我尝试`density(data, kernel="gaussian", bw=15)`在我的 r 提示符下使用时，它会生成一条错误消息

```
Error in density.default(data) : argument 'x' must be numeric 
```

但是，当我尝试时`density(data$V1, kernel="gaussian", bw=15)`，它工作正常。

我想知道是否有一个命令来计算整个文件的密度，而不是为每一列计算 60 次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:18:15.820

您可能正在寻找`sapply`或`apply`。
您可以使用

```
 apply(myDataName,  2,  density, kernel="gaussian", bw=15) 
```

如果您的列是`factor`s 而不是`numeric`，则需要先转换它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:20:41.253

您的对象很可能是一个数据框（这是使用和`data`之类的工具读取数据时的默认设置）。 `read.table``read.csv`

如果要处理每一列（为每一列创建单独的密度图），则可以使用该`lapply`函数。

如果您想要基于所有数据的单一密度（列没有任何意义），那么您可以使用该`unlist`函数将其全部转换为一个大向量。更好的方法可能是使用该`scan`函数而不是`read.table`将数据加载到向量中以开始并一起跳过数据帧。

# jquery - 使用变量作为 jQuery 类选择器

> ID：15008224
> 
> 赞同：5
> 
> 时间：2013-02-21T17:09:49.267
> 
> 标签：jquery, jquery-selectors

我知道这个问题在stackoverflow上被多次回答，但我无法让它解决我的问题。

我想要做的是，当单击 a 时`<label>`，检查标签类并将所有匹配元素更改为`backgroundColor : #000000`

这是我的代码：

```
$(function() {
    $('label').click(function(){
        var group = this.className ;
        $('label .'+group).css({
            'backgroundColor'   : '#000000'
        })  ;
    })  ;
}); 
```

不幸的是，这无济于事。它甚至不会引发错误。我的错在哪里？

**解决方案**

我不得不删除选择器中的空格：

```
$('label.'+group) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T17:21:21.843

也许您应该删除`$('label .'+group)`.

`$('label .'+group)`表示 all 中具有 group 类的所有元素`<label>`，而`$('label.'+group)`表示 a​​ll`<label>`具有 group 类。

# c# - 有条件地修改样式和多重绑定

> ID：15008225
> 
> 赞同：0
> 
> 时间：2013-02-21T17:09:51.070
> 
> 标签：c#, validation, xaml, styles, multibinding

我有一个简单的 XAML，如下所示：

```
<Window.Resources>
    <Converters:ButtonVisibilityConverter x:Key="m_ButtonConverter"/>
</Window.Resources>

<Grid>
    <ComboBox Height="23" HorizontalAlignment="Left" Margin="71,18,0,0" Name="comboBox1" VerticalAlignment="Top" Width="229" SelectionChanged="comboBox1_SelectionChanged">              
    </ComboBox>
    <TextBox Height="23" HorizontalAlignment="Left" Margin="71,76,0,0" Name="textBox1" VerticalAlignment="Top" Width="229" Style="{StaticResource requiredFieldValidationStyle}"/>
    <TextBox Height="23" HorizontalAlignment="Left" Margin="71,125,0,0" Name="textBox2" VerticalAlignment="Top" Width="229" Style="{StaticResource requiredFieldValidationStyle}"/>        
    <Button Content="Submit" Height="23" HorizontalAlignment="Left" Margin="225,175,0,0" Name="button1" VerticalAlignment="Top" Width="75">
        <Button.IsEnabled>
            <MultiBinding Converter="{StaticResource m_ButtonConverter}">
                <Binding ElementName="textBox1" Path="Text" />
                <Binding ElementName="textBox2" Path="Text" />
                <Binding ElementName="comboBox1" Path="Text" />
            </MultiBinding>
        </Button.IsEnabled>
    </Button>
    <Label Content="Box 1" Height="28" HorizontalAlignment="Left" Margin="12,74,0,0" Name="label1" VerticalAlignment="Top" />
    <Label Content="Box 2" Height="28" HorizontalAlignment="Left" Margin="12,123,0,0" Name="label2" VerticalAlignment="Top" />
</Grid> 
```

textbox1 和 textbox2 现在都是必填字段，除非两个框都有文本，否则该按钮不会启用。

我想做以下事情：在组合框中选择偶数时，我想将 textbox2 条目设为可选。这意味着，我将它从（按钮的 IsEnabled 的）多重绑定中删除，并且还删除了样式。However, when an odd number is chosen, I want them back.

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:29:22.927

我认为更改`MultiBinding`基于可选条目将是有问题的。我的建议是使用 ViewModel 并为 IsButtonEnabled 创建一个依赖属性，并将可选条目和验证的逻辑放在 ViewModel 中。然后你可以绑定到`IsButtonEnabled`DP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:04:11.353

我可以通过有条件地检查组合框的 selectionchanged 事件的 xaml.cs 文件来做到这一点。

```
private void comboBox1_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        var selVal = (int)comboBox1.SelectedValue;

        if ((selVal % 2) == 0)
        {
            // remove the style
            textBox2.Style = null;

            // remove from the button's IsEnabled multibinding                 
            _vfs.NumberValidationFlag = false;
            BindingOperations.ClearBinding(button1, Button.IsEnabledProperty);
            BindingOperations.SetBinding(button1, Button.IsEnabledProperty, GetBindingForButton());                
        }
        else
        {
            // add back the style
            Style myStyle = (Style)Application.Current.Resources["requiredFieldValidationStyle"];
            textBox2.Style = myStyle;

            // add back to the button's IsEnabled multibinding                
            _vfs.NumberValidationFlag = true;
            BindingOperations.ClearBinding(button1, Button.IsEnabledProperty);
            BindingOperations.SetBinding(button1, Button.IsEnabledProperty, GetBindingForButton());
        }
    } 
```

# android - 在 Android 上缩小到 ldpi 时遇到半像素？

> ID：15008227
> 
> 赞同：0
> 
> 时间：2013-02-21T17:09:58.717
> 
> 标签：android, image

我在 xhdpi 有一个 100x100px 的图像并转换为 ldpi 它说它必须是 37.50px？人们会把事情四舍五入吗？或者在考虑 ldpi 的情况下重新做尺寸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:58:24.660

我个人的建议是完全忽略 LDPI，让 Android 处理缩放。这是市场的一个微不足道的部分，并不值得担心。

也就是说，如果你真的想这样做，我会四舍五入到最接近的偶数。大概是 38 像素。

# jquery - jquery 自动完成选择事件

> ID：15008228
> 
> 赞同：1
> 
> 时间：2013-02-21T17:09:59.253
> 
> 标签：jquery

我正在使用自动完成来显示包含 html 标记的项目，例如^(T128) 第一个脚本将显示自动完成列表，但不会显示为 html..它将在列表中显示^(T128)，但我可以选择该项目：

```
 var createAutocomplete = function () {
    var $input = $(this);
    var options = {
        source: $input.attr("data-jax-autocomplete"),
        minLength: 3
    };
    $input.autocomplete(options)
    }; 
```

我找到了一个修复程序，可以在自动完成列表中呈现 html 标记，但是在更改脚本后，我发现我无法再选择列表中的项目：

```
 var createAutocomplete = function () {
    var $input = $(this);
    var options = {
        source: $input.attr("data-jax-autocomplete"),
        minLength: 3
    };

    $input.autocomplete(options).data("autocomplete")._renderItem = function (ul, item) {
        return $("<li></li")
          .append("<a>" + item.label + "</a>")
          .appendTo(ul);
    };

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:54:25.293

我能够通过使用[Scott 的 jquery.ui.autocomplete.html.js 扩展来解决这个问题](https://github.com/scottgonzalez/jquery-ui-extensions/blob/master/autocomplete/html.html)

# arrays - 在 Excel VBA 中使用一维或二维数组

> ID：15008230
> 
> 赞同：1
> 
> 时间：2013-02-21T17:10:08.530
> 
> 标签：arrays, vba, excel, vector

我有几个关于在 VBA 中使用数组的基本问题，但我还没有找到答案。

首先，有没有办法在 Excel VBA 中指定一维行向量？

我是在 Excel VBA 中使用数组的新手，并且一直将行向量和列向量定义为二维数组，如下例所示

```
'Define a Local Row Vector
ReDim aArray(1 to iCntRows, 1 to 1)

'Define a Local Column Vector
ReDim aArray(1 to 1, 1 to iCntCols) 
```

其次，这是最佳实践吗？我应该改用一维数组吗？

谢谢蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:02:54.043

您必须使用转置函数从二维数组转换。

```
new_array = Application.Transpose(Sheet1.Range("A2:A100").Value) 
```

其中 new_array 是一维数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T02:06:18.460

```
Sub tt()

    Const SZ As Long = 1000
    Dim arr(), x

    ReDim arr(1 To SZ)
    For x = 1 To SZ
        arr(x) = x
    Next x

    'add to sheet (as a row)
    Sheet1.Range("a1").Resize(1, SZ).Value = arr

    'add to sheet (as a column)
    'note there is an upper limit when using transpose of around 65k
    Sheet1.Range("a5").Resize(SZ, 1).Value = Application.Transpose(arr)

End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T18:17:59.727

您打算将数组复制到范围的位置，例如

```
Range(somerange) = aArray 
```

然后，是的，使用二维数组

# apache - ubuntu 上的 var/www 权限

> ID：15008232
> 
> 赞同：0
> 
> 时间：2013-02-21T17:10:18.130
> 
> 标签：apache, ubuntu-12.04

当我第一次设置它时，我能够访问和查看文件。然后我意识到我的 css 表没有运行，所以我检查了 Firefox 中的源代码并意识到我没有查看此文件的权限。所以我决定对整个 www 文件夹运行权限。现在我收到 403 错误。我尝试更改权限，但仍然遇到同样的问题。我试过了

```
find /var/www/ -type d -exec chmod 755 {} \;
find /var/www/ -type f -exec chmod 644 {} \; 
```

这些都不起作用，请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:17:57.910

```
 sudo chmod 0777 -R /var/www 
```

-R 是递归的，我假设你的 web 文件位于 /var/www。

# asp.net - 有谁知道asp.net页面是否可以在asp经典框架中打开？

> ID：15008236
> 
> 赞同：0
> 
> 时间：2013-02-21T17:10:29.073
> 
> 标签：asp.net, asp-classic, window, frame

我正在尝试找到完成下一件事的方法：

我有一个带有框架的 asp 经典页面，我从中打开了一些其他页面，这些页面在第一页的框架内打开。此页面之一打开一个 asp.net 页面。我想知道是否有任何方法可以在提到的第一个 asp 经典页面的框架内打开这个 asp.net 页面。我正在努力实现这一目标，但我不知道它是否可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:22:25.580

您可以这样做，因为浏览器在 iframe 内呈现页面，它与服务器技术无关。您甚至可以在 iframe 中放置第三方网站页面，无论服务器中使用了哪种技术。

# javascript - 在 jQuery UI 和 jQuery Mobile 之间切换的最佳方式是什么

> ID：15008237
> 
> 赞同：11
> 
> 时间：2013-02-21T17:10:31.230
> 
> 标签：javascript, jquery-ui, jquery-mobile, mobile, modernizr

我想要一个使用相同 HTML 的单个站点，但以最适合它所服务的平台的方式对其进行“小部件化”。

是否有标准做法来检测客户端上的移动设备/硬件键盘并决定是否加载 jQuery Mobile 以及网站的移动 JavaScript 或 jQuery UI 以及桌面体验脚本？

以下似乎是一种合理的方法，但我想知道 Modernizr.touch 是否是检测这一点的最佳方法？例如：强制触摸可能不是 Surface 的最佳解决方案。有什么方法可以检测是否还有硬件键盘？

```
Modernizr.load({
  test: Modernizr.touch,
  yep : ['jquery-mobile.js','mobile.js']
  nope: ['jquery-ui.js','desktop.js']
}); 
```

**编辑：**

发现了一些相关的 Modernizr 错误：

*   [Modernizr.touch 检测触摸事件而不是触摸设备](https://github.com/Modernizr/Modernizr/issues/548)
*   [IE10“地铁”未被检测为支持触摸的设备](https://github.com/Modernizr/Modernizr/issues/753)

我想我真正需要的是一种检测设备是否能够触摸以及是否具有硬件键盘的方法。我可以使用[David Mulder 的答案来检测以物理单位（英寸）](https://stackoverflow.com/a/15271963/2541)为单位的设备宽度，并假设任何大于 11 英寸的东西都有键盘，但我敢打赌那里有一个巨大的平板电脑（或者谷歌将发布一个 nexus 12 平板电脑： ) 这会做出错误的假设。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:03:06.760

好的，我现在没有可用的设备来检查这个，但是要走的路是这样的：

DPI不能直接从JS计算，但是

```
var dpi = 50;
while(window.matchMedia("(min-resolution: "+dpi+"dpi)").matches && dpi<500){
  dpi+=1;
} 
```

是可能的，这使我们接下来可以像这样计算屏幕对角线

```
var screendiagonal = Math.round(Math.sqrt(Math.pow(window.screen.availHeight,2)+Math.pow(window.screen.availWidth,2))/dpi)

if (screendiagonal < 4) "phone"
else if (screendiagonal < 11) "tablet"
else "computer" 
```

让我再次重申，我以前从未做过这样的事情，尤其是在第一段代码中可能存在错误，但是应该有可能发生这样的事情，如果我没有忘记，我今晚会检查。

哦，很高兴注意到这在台式机上不起作用，因此应该额外检查最终 dpi 是否为 500，在这种情况下它是台式机系统（尽管`userAgent`也可能为此进行检查）。此外，可能还需要计算出该`-webkit-min-device-pixel-ratio`值以将其合并到计算中（只需循环它，直到找到正确的比率并将 dpi 乘以该比率）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:24:19.763

如果您没有与 jQuery UI 和 jQuery Mobile 结合，那么[**Twitter Bootstrap**](http://twitter.github.com/bootstrap/) Fluid 布局可以做得很好，而无需为不同的设备更改 HTML 或 CSS。您可以通过访问 Twitter Bootstrap 站点并将浏览器的大小重新调整为不同的大小来轻松看到这一点。

您通常寻找的是所谓的[响应式设计](http://en.wikipedia.org/wiki/Responsive_web_design)。它基于 CSS 媒体查询和一点 Javascript，通常用于按摩 IE < 9 的废话以正确呈现。我喜欢 bootstrap 的另一个原因是它有一个庞大的社区来管理这种新设备的“按摩”，而不是你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-20T15:19:11.847

你可以试试这个 php 库

[https://code.google.com/p/php-mobile-detect/](https://code.google.com/p/php-mobile-detect/)

或者这个用于 javascript

[https://github.com/hgoebl/mobile-detect.js](https://github.com/hgoebl/mobile-detect.js)

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-03-11T11:40:05.293

最简单的方法是检测您想要定位的用户代理并加载适当的 javascript。

```
function load(src) {
  var doc = document,
    application = doc.createElement('script'),
    script = doc.getElementsByTagName('script')[0];
  application.type = 'text/javascript';
  application.async = true;
  application.src = src;
  script.parentNode.insertBefore(application, script);
}
load(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|iemobile|tablet|Opera Mobi/i.test(navigator.userAgent) ? 'handheld.js' : 'desktop.js'); 
```

[更好且成本更高的方法是让后端使用wurl](http://wurfl.sourceforge.net/)进行内容协商来处理此问题，以便为桌面或手持设备提供适当的 (javascript) 资产（检查 is_wireless_device = true 以用于手持设备）。

# java - 如何指定使用哪个 Ivy 解析器

> ID：15008239
> 
> 赞同：1
> 
> 时间：2013-02-21T17:10:41.527
> 
> 标签：java, ivy, dependency-management

我的理解是，`<ivy:resolve/>`将配置的 repo 中的依赖项复制到本地 Ivy 缓存（根目录下`${USER_HOME}/.ivy2`）。但是看了[任务的文档](https://ant.apache.org/ivy/history/2.3.0-rc2/use/resolve.html)后，惊讶的发现没有`resolver`属性，比如：

```
<ivy:resolve file="ivy.xml" conf="compile" resolver="theResolverToUse"/> 
```

所以我问：**你如何指定使用哪个解析器**，特别是如果（在`ivysettings.xml`），你可以定义 1+ 解析器？提前致谢。

**更新**：

例如，这是我的 (emerging) 中定义的解析器片段`ivysettings.xml`：

```
<resolvers>  
    <chain name="chainResolver" returnFirst="true">
        <url name="urlResolver">
            <ivy pattern="${ivyRepoRoot}/module_descriptors/${ivyModDescriptorPattern}"/>
            <artifact pattern="${ivyRepoRoot}/artifacts/${ivyArtifactPattern}"/>
        </url>

        <filesystem name="localFileResolver">
            <artifact pattern="${user.home}/.ivy2/local-cache/[artifact]-[revision].[ext]"/>
        </filesystem>
    </chain>  
    <sftp name="publisherResolver" user="fizz" userPassword="buzz" host="example.com">
        <ivy pattern="sftp://example.com:22/usr/local/apache/htdocs/ivy/module_descriptors/${ivyModDescriptorPattern}"/>
        <artifact pattern="sftp://example.com:22/usr/local/apache/htdocs/ivy/artifacts/${ivyArtifactPattern}"/>
    </sftp>
</resolvers> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:23:38.743

在 Ivy 中，解析器及其关系、优先级和链是与解析任务分开定义的。

多个解析器可以链接在一起，在链式解析器中，请特别注意链中的第一个解析器和“先查找”的概念。

如果解析器和/或链配置正确，您不必选择使用哪个解析器。当解析器在不同的环境中具有不同的行为时，这非常方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:04:01.163

[链解析器](http://ant.apache.org/ivy/history/latest-milestone/resolver/chain.html)很方便，但如果您想要更多控制，我建议使用[模块](http://ant.apache.org/ivy/history/latest-milestone/settings/modules.html)部分，如以下答案中所述：

*   [将公共 maven 存储库与 ivy 一起使用](https://stackoverflow.com/questions/4836011/use-public-maven-repository-with-ivy/4837149#4837149)

# vba - 如何在 ActiveX 文本框中搜索和替换文本

> ID：15008244
> 
> 赞同：0
> 
> 时间：2013-02-21T17:11:04.957
> 
> 标签：vba, ms-word

我正在尝试搜索 ActiveX 文本框 (TextBox1) 以替换没有任何内容的短语...

我有这段代码似乎只是擦除整个盒子而不是孤立的短语。

```
Private Sub CommandButton3_Click()

TextBox1 = Selection

Selection.Find.ClearFormatting
    Selection.Find.Replacement.ClearFormatting
    With Selection.Find
        .Text = "This is the text to remove!"
        .Replacement.Text = ""
        .Forward = True
        .Wrap = wdFindContinue
        .Format = False
        .MatchCase = False
        .MatchWholeWord = False
        .MatchWildcards = False
        .MatchSoundsLike = False
        .MatchAllWordForms = False
    End With
    Selection.Find.Execute Replace:=wdReplaceAll

End Sub 
```

添加一些内容（例如选择活动文档中的所有形状）- 代码适用于普通的 TextBox - 以及文档的其余部分......只是不是 ActiveX 框（这是我想要的！！）

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:42:25.207

您可以简单地使用内置的 VBA[**替换功能**](http://msdn.microsoft.com/en-us/library/office/gg264409.aspx)：

```
Private Sub CommandButton3_Click()
    TextBox1.Value = Replace(TextBox1.Value, "This is the text to remove!", "")
End Sub 
```

# vb.net - 带有选项卡控件和 MDI 容器的 vb.net 拖放

> ID：15008247
> 
> 赞同：0
> 
> 时间：2013-02-21T17:11:08.730
> 
> 标签：vb.net, drag-and-drop

我有一个 MDI 容器窗口和一个包含简单选项卡控件的辅助窗口。我已经相应地设置了属性以将选项卡拖放到 MDI 容器窗口。

DragDrop 处理程序最终触发，但是“发送者”对象不是我在执行时所期望的：

debug.print(sender.toString)

我期待源对象，选项卡控件引用，但看起来“发件人”是 MDI 主应用程序窗口。我如何覆盖它或我缺少什么设置？

我应该注意这是我的初始化代码：

```
Private Sub tabContainer_MouseDown(sender As Object, e As MouseEventArgs) Handles tabContainer.MouseDown
    tabContainer.DoDragDrop(CType(sender, TabControl), DragDropEffects.Move)
End Sub 
```

这使我相信，当 DragDrop 被捕获在 MDI 容器窗口中时，“发送者”实际上是 TabControl ？？？

亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:10:32.927

不，事件的发送者将始终是收到 DragDrop 通知的控件。这就是你的 MDI 容器，因为那是你放开按钮的地方。

D+D 中没有机制来识别被拖动对象的来源。在设计上，它可能来自一个完全无法企及的完全不同的过程。如果您需要除被拖动对象之外的任何其他信息，那么您需要将其添加到对象中。只要 D+D 在一个应用程序中，这根本不是问题，您可以创建一个小助手类来存储您需要的任何内容。

# google-maps - 未捕获的类型错误：无法读取未定义的属性“__e3_”

> ID：15008251
> 
> 赞同：12
> 
> 时间：2013-02-21T17:11:14.660
> 
> 标签：google-maps, google-maps-api-3

我正在使用 VB.NET 和 Google Maps v3 开发应用程序，并尝试使用以下属性创建地图：

```
<script type="text/javascript"> 
    $(document).ready(function (){ 
        var sPath ="images/AppIcons/Vehicles/icon05.png,";
        var markers= new google.maps.Marker({
            position : new google.maps.LatLng(4.759915, -74.04083),
            map : map,
            icon : new google.maps.MarkerImage(+ sPath + null, null, null, new google.maps.Size(32, 32)),
            animation: google.maps.Animation.DROP,
            title : "buena"
        });
        var myLatlng = new google.maps.LatLng(0, 0);
        var mapOptions={zoom: 3,center: new google.maps.LatLng(4.590798,-74.084244),mapTypeId: google.maps.MapTypeId.ROADMAP };
        var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
        var marker = setMarkers(map);
        var infowindow = new google.maps.InfoWindow({Content : '<b>FM3200 - FM3200</b><div><font size=1>&nbsp;</font></div><div><u>20/01/2013 04:30:56 p.m. - Voltaje Externo - (Norte)</u></div>Ubicacion Invalida In1:0 In2:0 In3:0 Batext:4.45V Vel:0 Odom:0 Ibutton:0 Oficina Principal Risk, Kmh: 0'});
        if (markers !='') {
            google.maps.event.addListener(marker, 'click', function() {
                infowindow.open(map,marker);
                /*if (marker.getAnimation() != null) {
                    marker.setAnimation(null);
                } else {
                    marker.setAnimation(google.maps.Animation.BOUNCE);
                }*/
            });
        }
    });
    function setMarkers(map,markers) {
        var marker =markers;
        if (marker !='') {
            return marker;
        }
    }</script> 
```

当我运行此代码时，会出现此错误消息：

```
Uncaught TypeError: Cannot read property '__e3_' of undefined main.js:18 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-21T23:56:23.507

将创建移动`map`到函数的顶部。

目前您使用`map`as `map`-option for `markers`，它应该是一个`google.maps.Map`-instance （但它是未定义的，因为尚未创建地图）

# join - 如何与熊猫进行数据框连接？

> ID：15008252
> 
> 赞同：3
> 
> 时间：2013-02-21T17:11:16.297
> 
> 标签：join, dataframe, pandas, ipython-notebook

`pandas`有人可以根据这个例子向我解释数据框连接吗？

第一个数据帧，我们称之为它`A`，如下所示：

![在此处输入图像描述](../Images/1246e4723bea944ba09f022a4c34dd1e.png)

第二个数据帧`B`看起来像这样：

![在此处输入图像描述](../Images/3a62848b5dba73c269789782ac404eea.png)

我现在想创建一个图，在其中我将列中的值与列`running`中的值进行比较`A`，`B`但前提是列中的字符串`graph`相同。（在这个例子中，第一行`A`和`B`有相同的`graph`所以我想比较它们的`running`值。）

我相信这就是[`Pandas.DataFrame.join`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.join.html)目的，但我无法制定正确加入数据框所需的`A`代码`B`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T17:27:57.540

我想我会`merge`在这里使用：

```
>>> a = pd.DataFrame({"graph": ["as-22july06", "belgium", "cage15"], "running": [2, 879, 4292], "mod": [0.28, 0.94, 0.66], "eps": [220, 176, 1096]})
>>> b = pd.DataFrame({"graph": ["as-22july06", "astro-ph", "cage15"], "running": [395.186, 714.542, 999], "mod": [0.67, 0.74, 0.999]})
>>> a
    eps        graph   mod  running
0   220  as-22july06  0.28        2
1   176      belgium  0.94      879
2  1096       cage15  0.66     4292
>>> b
         graph    mod  running
0  as-22july06  0.670  395.186
1     astro-ph  0.740  714.542
2       cage15  0.999  999.000
>>> a.merge(b, on="graph")
    eps        graph  mod_x  running_x  mod_y  running_y
0   220  as-22july06   0.28          2  0.670    395.186
1  1096       cage15   0.66       4292  0.999    999.000 
```

# java - 将 @PathParam 的可能值包含到 WADL

> ID：15008255
> 
> 赞同：8
> 
> 时间：2013-02-21T17:11:22.320
> 
> 标签：java, rest, jersey, wadl

我们正在使用 Jersey 实现 RESTful API，利用其自动 WADL 生成的酷特性。

举个例子，我们有方法

```
@GET
@Path("/{id}/{attribute}")
@Produces(MediaType.APPLICATION_JSON)
public Object getAttributeByID(@PathParam("id") long id, @PathParam("attribute") String attribute) {
....
} 
```

这会在 WADL 中生成以下片段：

```
<param type="xs:string" style="template" name="attribute:.*"/> 
```

属性可以是`name`, `type`，`size`我们不仅要在运行时验证值，还要在生成的 wadl 中显示它 根据[这个文档](http://www.w3.org/Submission/wadl/)，应该通过`<option>`在 内部生成几个标签来支持这样的功能`<param>`，即我期待如下内容：

```
<param type="aws:Attributes" style="template" name="attribute">
  <option value="name"/> 
  <option value="type"/> 
  <option value="size"/> 
</param> 
```

我的问题是用泽西岛启用它。如果找不到相关文档并假设如果我将参数类型从`String`更改`enum`为此功能将自动工作，因此我将方法签名更改为：

```
@Path("/{id}/{attribute}")
@Produces(MediaType.APPLICATION_JSON)
public Object getAttributeByID(@PathParam("id") long id, @PathParam("attribute") Attribute attribute) {
....
} 
```

在哪里

```
public enum Attribute {
    name, type, size
} 
```

但是 Jersey 仍然会生成`<param>`不带选项的标签，并且参数的类型仍然是`xs:string`.

我试图在 Jersey 的代码中找到它并找到`com.sun.research.ws.wadl.Option`带有相关 JAXB 注释的类，所以它似乎是相关的，但我不知道如何使它工作。我想问题出在`WadlGeneratorConfig`.

这是我们的泽西定义的相关部分`web.xml`

```
<filter>
<filter-name>REST-API</filter-name>
<filter-class>com.sun.jersey.spi.container.servlet.ServletContainer</filter-class>
    ................
<init-param>
    <param-name>com.sun.jersey.config.property.WadlGeneratorConfig</param-name>
    <param-value>com.mycompany.resource.OurWADLGenerator</param-value>
</init-param>
<init-param>
    <param-name>com.sun.jersey.config.property.packages</param-name>
    <param-value>com.mycompany</param-value>
</init-param>
</filter> 
```

其中`OurWADLGenerator`代码是：

```
public class OurWADLGenerator extends WadlGeneratorConfig {
    @Override
    public List<WadlGeneratorDescription> configure() {
        return generator(WadlGeneratorApplicationDoc.class)
                .prop("applicationDocsStream", "application-doc.xml")
            .generator(WadlGeneratorResourceDocSupport.class)
                .prop("resourceDocStream", "resourcedoc.xml").descriptions();
    }
} 
```

我在这里想念什么？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T17:49:42.883

快速搜索`com.sun.research.ws.wadl.Param.getOption()`（参见[此处](http://grepcode.com/search/usages?type=method&id=repo1.maven.org%24maven2@com.sun.jersey%24jersey-server@1.17@com%24sun%24research%24ws%24wadl@Param@getOption%28%29&k=u)的结果）的用法表明它实际上从未从库中调用过。我猜它之所以存在，是因为这些类是由 xjc 从 wadl.xsd 生成的。尽管 Jersey 似乎基本上忽略了 wadl 文件中的这条信息，并且同样不关心将其包含在它生成的 wadl 文件中。

几年前，我们最终编写了自己的代码来生成 wadl，因为可用的工具太差了。从那时起这可能已经改变，但上述问题表明对 wadl 的适当支持仍然不完全存在。:(

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T16:14:11.653

经过几次调查，我没有在填充选项列表的球衣中找到任何代码。（可能*还不支持*的东西）

因此，您可以实现自己的 WadlGenerator 并将其插入生成器链。

`OptionsWadlGenerator`这是一个为类型参数添加`<option>`元素的示例`Enum`

```
package com.mycompany;

import com.sun.jersey.api.model.AbstractMethod;
import com.sun.jersey.api.model.AbstractResource;
import com.sun.jersey.api.model.AbstractResourceMethod;
import com.sun.jersey.api.model.Parameter;
import com.sun.jersey.server.wadl.WadlGenerator;
import com.sun.research.ws.wadl.Application;
import com.sun.research.ws.wadl.Method;
import com.sun.research.ws.wadl.ObjectFactory;
import com.sun.research.ws.wadl.Option;
import com.sun.research.ws.wadl.Param;
import com.sun.research.ws.wadl.RepresentationType;
import com.sun.research.ws.wadl.Request;
import com.sun.research.ws.wadl.Resource;
import com.sun.research.ws.wadl.Resources;
import com.sun.research.ws.wadl.Response;

import javax.ws.rs.core.MediaType;

public class OptionsWadlGenerator implements WadlGenerator {

    private WadlGenerator _delegate;

    private ObjectFactory objectFactory = new ObjectFactory();

    @Override
    public Param createParam(AbstractResource r, AbstractMethod m, Parameter p) {
        Param param = _delegate.createParam(r, m, p);
        if(((Parameter)p).getParameterClass().isEnum()){
            Object[] values = p.getParameterClass().getEnumConstants();
            for(Object enumItem:values){
                Option option = objectFactory.createOption();
                option.setValue(((Enum)enumItem).name());
                param.getOption().add(option);
            }
        }
        return param;
    }

    @Override
    public void setWadlGeneratorDelegate(WadlGenerator delegate) {
        this._delegate = delegate;
    }

    @Override
    public Application createApplication() {
        return _delegate.createApplication();
    }

    ... all other methods also simply call the _delegate equivalent method    
} 
```

当然，要将其插入您的链中，请执行以下操作：

```
public class OurWADLGenerator extends WadlGeneratorConfig {
    @Override
    public List<WadlGeneratorDescription> configure() {
        return generator(WadlGeneratorApplicationDoc.class)
                .prop("applicationDocsStream", "application-doc.xml")
            .generator(WadlGeneratorResourceDocSupport.class)
                .prop("resourceDocStream", "resourcedoc.xml")
            .generator(OptionsWadlGenerator.class).descriptions();
    }
} 
```

# wpf - 创建类似进度窗口的控制台

> ID：15008256
> 
> 赞同：0
> 
> 时间：2013-02-21T17:11:23.007
> 
> 标签：wpf, mvvm, batch-file, console, messagebox

我正在用一个 WPF 可执行文件替换许多几乎完全相同的批处理文件。我已经编写了程序，但是我的“控制台”（如显示）出现了问题。

在程序中，我调用一个可执行文件来执行任务。该可执行文件将其输出消息发送到控制台。我可以将它们重定向到我的“控制台”，例如显示以下内容。

```
Process p = new Process();
p.StartInfo.RedirectStandardOutput = true;
p.StartInfo.RedirectStandardError = true;
p.StartInfo.UseShellExecute = false;
p.StartInfo.CreateNoWindow = true;

p.StartInfo.FileName = MyExecutable;
p.StartInfo.Arguments = MyArguments;
p.Start();

while (!p.StandardOutput.EndOfStream)
{
   string _output = p.StandardOutput.ReadLine();

   // This is my display string ObservableCollection
   _displayString.Add(new DisplayData { _string = _output, _color = System.Windows.Media.Brushes.Black, _fontSize = 12 });

   // This is to redirect to a Console & what I want to get rid of 
   Console.WriteLine(_output);
}

p.WaitForExit(); 
```

当可执行文件完成运行后，我使用 MessageBox 询问用户是否要再次运行可执行文件。问题是，当 MessageBox 启动时，用户无法在我的“控制台”之类的窗口上滚动以做出信息决定。为了临时解决这个问题，我在启动时启动了一个控制台，查看[这个](https://stackoverflow.com/questions/160587/no-output-to-console-from-a-wpf-application)，并将运行可执行文件的进程的输出流写入控制台，以便用户可以滚动浏览信息并做出决定。

我正在使用列表框来显示文本块的集合，请参阅[此](https://stackoverflow.com/questions/14146359/how-to-make-a-progress-message-window-where-each-line-can-be-different-font-siz/14158608#14158608)。我没有附加任何用于制作显示或 MessageBox 的东西。

我怎样才能制作一个类似于显示的“控制台”，它将接受用户输入（MessageBox、直接输入等），但还允许他们在做出决定之前滚动浏览数据？

**编辑：** 至于我收到的评论，我不清楚我要完成什么。我有一个批处理文件，它多次运行一个可执行文件，每次运行时使用不同的参数。在可执行调用之前和之间有很多设置。我创建了一个可执行文件，用下拉菜单替换类似批处理文件的多种风格，供用户在运行时更改设置。当用户喜欢他们的设置时，他们单击“开始”按钮，然后它会进行设置并提示问题，然后最终第一次运行可执行文件。

我的问题是当我的内部调用的可执行文件完成运行时，用户需要决定是否出于不同的原因再次运行它。我需要提示用户“再次运行 - '是'还是'否'？”，这就是我遇到问题的地方。MessageBox 不允许我在进度窗口上滚动。我尝试了一个无模式对话框，但使用 Show() 程序继续运行，并且 ShowDialog() 与 MessageBox 的问题相同。

任何有关如何执行此操作的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T06:47:00.293

您在 Windows 中，但尝试使用 DOS 范例。Windows 是**基于事件的**系统！您需要编写“事件处理程序”，但不要将**所有**代码放在一个函数中。

但是，有一个技巧，它允许在无模式中显示模态（阅读“阻止你的代码”）对话框（阅读“不阻止你的窗口”）。不知道如何在 WPF 中实现这一点，但想法是重新启用您的窗口（它充当您的对话框的父级）。您需要在对话框事件处理程序中执行此操作（`WM_INITDIALOG`等效？）。

此外（在 WinAPI 中）您可以将对话框`NULL`作为父窗口运行。

# ios6 - 使用 void kill 从 ios 6 上的其他应用程序中杀死应用程序不起作用

> ID：15008258
> 
> 赞同：2
> 
> 时间：2013-02-21T17:11:27.507
> 
> 标签：ios6, jailbreak, kill, tweak

我越狱了 iphone ios 6

在我对 ios 4&5 的调整中，我使用 (void) kill 来关闭在后台运行的其他应用程序。这是我的代码：

```
#import "SBApplication.h"

SBApplication *app ;
app = [[objc_getClass("SBApplicationController") sharedInstance]
           applicationWithDisplayIdentifier:@"my killed program id "];
if(app)
    [app kill]; 
```

现在当我在 ios 6 中尝试它时，我无法让它工作！需要帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:36:42.707

假设第二个应用程序是您的，您可以打开第二个应用程序`openURL`并让它在 App Delegate 回调中自行终止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T22:23:02.233

旧的“kill（pid，signal）;”怎么样？

如果您有适当的（root？）权限，它应该适合您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T01:21:22.587

只是为了扩展 Victors 的回答......你想从应用程序中获取 pid，如果它大于 0（一个有效的 pid），用 SIGTERM 杀死它（更好，虽然它不能保证杀死它）或SIGKILL（强制终止）

```
SBApplicationController *appController = [objc_getClass("SBApplicationController") sharedInstance];
SBApplication *app = [appController applicationWithDisplayIdentifier:appId];
if (app.pid > 0)
    kill(app.pid, SIGTERM); 
```

关于终止信号的信息： [http ://www.gnu.org/software/libc/manual/html_node/Termination-Signals.html](http://www.gnu.org/software/libc/manual/html_node/Termination-Signals.html)

# sharepoint - 如何在 Sharepoint 2013 中隐藏匿名访问者的“浏览页面发布”链接

> ID：15008259
> 
> 赞同：1
> 
> 时间：2013-02-21T17:11:29.107
> 
> 标签：sharepoint, sharepoint-2010

问题出在主题上，但要了解当我登录时，我总是希望看到这些功能。

sharepoint 中的匿名访问者还有另一个巨大的安全问题，右上角的设置轮可让您转到网站内容，并让您在签入时查看所有带有人名的项目等，很奇怪所有选项都被隐藏了除了那个。

提前感谢您的时间。

迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:11:09.763

您可以使用**SPSecurityTrimmedControl**标记将所需选项从功能区隐藏到仅特定权限级别。只需使用您要隐藏的标签围绕功能区的那部分。

您可以查看下面给出的链接，了解有关 SPSecurityTrimmedControl 及其用法的更多详细信息。

[http://www.infowisesolutions.com/blog/Comments.aspx?ArticleId=28](http://www.infowisesolutions.com/blog/Comments.aspx?ArticleId=28)

干杯。

# ios - animateWithDuration 没有为 UIButton 设置动画

> ID：15008263
> 
> 赞同：1
> 
> 时间：2013-02-21T17:11:36.110
> 
> 标签：ios, objective-c, core-animation, nstimer

我在 UIView 上有一个类别，它应该动画 UIButton 从一个点到另一个点的移动。它正在运行，但按钮根本不动。看起来动画是成功的，但根本没有动静。

该按钮由一个重复的 NSTimer 调用，它倒计时到按钮动画的点（每秒检查一次是否为真，如果它是剩余点，当剩余点 == 0 动画时）。还有一个计时器每 0.01 秒调用一次，以对麦克风上的电平进行一些处理，但如果我提高频率，它仍然不起作用。

我认为我的动画代码没问题 - 但有些东西阻止了动画正确显示。如果我在动画之前在 viewDidLoad 中动画（虽然它从终点开始并动画到我在故事板中放置按钮的位置），但是如果我在程序流程中动画它不起作用。

该类别正确地超出了我的终点，并在 5 秒后“完成”。

类别：

```
@implementation UIView (Animation)
- (void) moveTo:(CGPoint)destination duration:(float)secs option:(UIViewAnimationOptions)option
{
    NSLog(@"moveTo Category. destination: %@ and duration %f", NSStringFromCGPoint(destination), secs);
    [UIView animateWithDuration:secs delay:0.0 options:option
                     animations:^{
                         self.frame = CGRectMake(destination.x,destination.y, self.frame.size.width, self.frame.size.height);
                         NSLog(@"self.frame: %@", NSStringFromCGRect(self.frame));
                     }
                     completion:^(BOOL finished){
                         NSLog(@"done");
                     }];
}
@end 
```

动画代码：

```
[rewardAnimationButton moveTo:CGPointMake(100, 100) duration:5.0 option:0]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T01:34:23.277

您是否关闭了 XIB 文件/情节提要的自动布局？据说自动布局会接管视图放置，并干扰动画。

您也可以尝试为按钮的中心而不是框架设置动画。如果视图的变换不是标识，则 frame 属性未定义。

# file - 在powershell脚本中将文件从一个位置复制到另一个位置，此外还检查某些值

> ID：15008267
> 
> 赞同：1
> 
> 时间：2013-02-21T17:11:44.580
> 
> 标签：file, powershell, directory

所以我在某个位置有一个包含文件的文件夹

```
C:\Users\ainfowara\Desktop\testfiles 
```

所以我想将这些文件移动到这个位置

```
C:\Users\ainfowara\Desktop\destinationTestfiles 
```

“testfiles”有这种格式的文件，`txt.*.test.*`所以基本上我想在我移动文件之前检查它们在第三部分有这两个主要的东西（ `txt`）和（ ）。`test`

有人可以帮我吗，如何在 powershell 脚本中执行此操作

我知道我可以这样做，设置文件夹路径

```
path_src= C:\Users\ainfowara\Desktop\testfiles
path_dst= C:\Users\ainfowara\Desktop\destinationTestfiles 
```

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-21T17:43:59.547

如果 testfiles 中没有子文件夹（至少您需要其中的文件），请尝试以下操作：

```
$src = "C:\Users\ainfowara\Desktop\testfiles"
$dst = "C:\Users\ainfowara\Desktop\destinationTestfiles"

Get-ChildItem $src -Filter "txt.*.test.*" | Move-Item -Destination $dst -Force 
```

如果源路径的子文件夹中有文件，请尝试以下操作：

```
$src = "C:\Users\ainfowara\Desktop\testfiles"
$dst = "C:\Users\ainfowara\Desktop\destinationTestfiles"

Get-ChildItem $src -Filter "txt.*.test.*" -Recurse | % {
    #Creates an empty file at the destination to make sure that subfolders exists
    New-Item -Path $_.FullName.Replace($src,$dst) -ItemType File -Force
    Move-Item -Path $_.FullName -Destination $_.FullName.Replace($src,$dst) -Force
} 
```

请注意，如果您的文件名包含方括号，则`[ ]`您需要另一个脚本（已知的 PS 错误）。

# iis - 为什么默认禁用“SSL 设置”功能委托？

> ID：15008269
> 
> 赞同：1
> 
> 时间：2013-02-21T17:11:50.740
> 
> 标签：iis, iis-7, web-config, security

我想在应用程序 web.config 文件中指定 SSL 标志。实际上，我想得到这样的东西：

```
<configuration>
    ...
    <location path="">
        <system.webServer>
            <security>
                <access sslFlags="Ssl" />
            </security>
        </system.webServer>
    </location>
    <location path="Public">
        <system.webServer>
            <security>
                <access sslFlags="None" />
            </security>
        </system.webServer>
    </location>
    ...
</configuration> 
```

但我发现默认情况下禁用“SSL 设置”功能委托。

所以我想知道启用此功能是否危险。我无法想象为什么这会很危险......但我对默认的 IIS 设置感到困惑。

# iphone - 从 UIImage 矩形获取 alpha 通道

> ID：15008270
> 
> 赞同：1
> 
> 时间：2013-02-21T17:11:52.243
> 
> 标签：iphone, ios, uiimage, alpha, cgcontext

给定一个 CGRect ( `rect`) 和一个 UIImage ( `image`)，如何获得矩形中图像像素的 alpha 值（仅）？

以下代码始终返回 0 alpha，无论是图像还是矩形。

```
CGContextRef context = CGBitmapContextCreate(NULL,
                                             rect.size.width,
                                             rect.size.height,
                                             8,
                                             rect.size.width,
                                             NULL,
                                             kCGImageAlphaOnly);

UIGraphicsPushContext(context);
[image drawInRect:rect];
char *pixels = CGBitmapContextGetData(context);
NSUInteger pixelCount = rect.size.width * rect.size.height;
for (int i = 0; i < pixelCount; i++)
{
    char pixel = pixels[i];
    CGFloat alpha = pixel / 255.0;
    NSLog(@"%f", alpha);
}
UIGraphicsPopContext();
CGContextRelease(context); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-10-23T14:43:43.453

在 Swift 4 中，仅获取 alpha 通道的代码如下所示：

```
import UIKit

extension UIImage {
    func alphaData() -> [UInt8]? {
        let size = self.size
        var alphaData = [UInt8](repeating: 0, count: Int(size.width) * Int(size.height))
        let colorSpace = CGColorSpaceCreateDeviceGray()
        let context = CGContext(
            data: &alphaData,
            width: Int(size.width),
            height: Int(size.height),
            bitsPerComponent: 8,
            bytesPerRow: Int(size.width),
            space: colorSpace,
            bitmapInfo: CGImageAlphaInfo.alphaOnly.rawValue
        );

        guard let cgImage = self.cgImage else { return nil }
        context?.draw(cgImage, in: CGRect(x: 0, y: 0, width: size.width, height: size.height))

        return alphaData
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:48:46.537

`pixelData[index + 3]`将是 Alpha 的值。`pixelData[0-2]`分别是RGB

CFDataRef 数据；

```
 theData = CGDataProviderCopyData(CGImageGetDataProvider(sourceImage));

    CFMutableDataRef mutableData = CFDataCreateMutableCopy(0, 0, theData);

    UInt8 *pixelData = (UInt8 *) CFDataGetBytePtr(mutableData);

    int dataLength = CFDataGetLength(mutableData);

    for (int index = 0; index < dataLength; index += 4) {
       //code here for just alpha
       pixelData[index + 3]
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T01:13:32.360

过去，我在让 CGBitmapContext 正常工作时遇到过问题。如果有问题，我不会感到惊讶`kCGImageAlphaOnly`。您可能会使用一些更“主流”的像素格式（例如`kCGImageAlphaPremultipliedFirst`.

您也可以尝试使用以下方法绘制图像`CGImageDrawImage`：

```
CGContextRef context = CGBitmapContextCreate(NULL,
                                         rect.size.width,
                                         rect.size.height,
                                         8,
                                         rect.size.width,
                                         NULL,
                                         kCGImageAlphaOnly);

CGContextDrawImage( context, rect, image.CGImage);

//etc...

CGContextRelease(context); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T02:44:20.223

根据我对 RGBA 值的经验，它们都必须是无符号字符。我猜这可能会导致您的问题，因为如果此图像的不透明度为 1，签名字符将停止在 127 并且永远不会达到完整的 255 值 - 并且可能更糟糕的是没有正确对齐（读取）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T08:30:08.947

我认为这应该对您有所帮助.. [https://github.com/OgreSwamp/ObjFloodFill](https://github.com/OgreSwamp/ObjFloodFill)

# android - 尝试拍摄新照片时应用程序崩溃

> ID：15008272
> 
> 赞同：0
> 
> 时间：2013-02-21T17:11:56.750
> 
> 标签：android, crash, camera

我正在开发一个定制的相机应用程序。当应用程序启动相机打开时，底部有三个按钮。

1.  捕获（拍照）。
2.  拍摄新照片（从预览返回相机以再次拍照。）
3.  不用于任何事情。

一切正常。按抓图拍照并准确预览所拍照片。但是当我按下新按钮从预览模式进入相机模式时，应用程序崩溃不知道我做错了什么。以下是我正在使用的代码。

```
public class MainActivity extends Activity {

   protected static final String TAG = null;
   private Camera mCamera;
    private CameraPreview mPreview;
    public static final int MEDIA_TYPE_IMAGE = 1;
    static int result;
    static int degrees = 90;
    private Button captureButton, btn_new;
    public FrameLayout preview;
    private static File mediaFile;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    // Create an instance of Camera
    mCamera = getCameraInstance();

    // Create our Preview view and set it as the content of our activity.
    mPreview = new CameraPreview(this, mCamera);
    FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);
    preview.addView(mPreview);
     captureButton = (Button) findViewById(R.id.button_capture);
    captureButton.setOnClickListener(
        new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                // get an image from the camera
                mCamera.takePicture(null, null, mPicture);
            }
        }
    );
    btn_new = (Button) findViewById(R.id.button_new);
    btn_new.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            mCamera = getCameraInstance();

            //preview = (FrameLayout) findViewById(R.id.camera_preview);
            //preview.addView(mPreview);
        }
    });

}

private PictureCallback mPicture = new PictureCallback() {

    @Override
    public void onPictureTaken(byte[] data, Camera camera) {

        File pictureFile = getOutputMediaFile(MEDIA_TYPE_IMAGE);
        if (pictureFile == null){

            return;
        }

        try {
            FileOutputStream fos = new FileOutputStream(pictureFile);
            fos.write(data);
            fos.close();
        } catch (FileNotFoundException e) {
            Log.d(TAG, "File not found: " + e.getMessage());
        } catch (IOException e) {
            Log.d(TAG, "Error accessing file: " + e.getMessage());
        }
    }
};

/** Create a File for saving an image or video */
private static File getOutputMediaFile(int type){
    // To be safe, you should check that the SDCard is mounted
    // using Environment.getExternalStorageState() before doing this.

    File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM), "Camera");

    // Create the storage directory if it does not exist
    if (! mediaStorageDir.exists()){
        if (! mediaStorageDir.mkdirs()){
            Log.d("MyCameraApp", "failed to create directory");
            return null;
        }
    }

    // Create a media file name
    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());

    if (type == MEDIA_TYPE_IMAGE){
        mediaFile = new File(mediaStorageDir.getPath() + File.separator +
        "IMG_"+ timeStamp + ".jpg");
    } 
    else {
        return null;
    }

    return mediaFile;
}
@SuppressWarnings("null")
public static Camera getCameraInstance(){
    Camera c = null;
    Context context = null; 
    try{
        c = Camera.open();
        //setCameraDisplayOrientation(MainActivity, 0, c);
        c.setDisplayOrientation(degrees);
    }
    catch (Exception e) {
        Toast.makeText(context.getApplicationContext(),"Camera is not available" ,           Toast.LENGTH_LONG).show();

    }
    return c;
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

提前致谢。最后这是我的错误日志：

* * *

02-21 18:24:01.868: E/AndroidRuntime(937): 致命异常: main 02-21 18:24:01.868: E/AndroidRuntime(937): java.lang.NullPointerException 02-21 18:24:01.868: E/AndroidRuntime(937): 在 com.example.facebooktag.MainActivity.getCameraInstance(MainActivity.java:136) 02-21 18:24:01.868: E/AndroidRuntime(937): 在 com.example.facebooktag.MainActivity$3。 onClick(MainActivity.java:66) 02-21 18:24:01.868: E/AndroidRuntime(937): 在 android.view.View.performClick(View.java:4202) 02-21 18:24:01.868: E/ AndroidRuntime(937): 在 android.view.View$PerformClick.run(View.java:17340) 02-21 18:24:01.868: E/AndroidRuntime(937): 在 android.os.Handler.handleCallback(Handler.java :725) 02-21 18:24:01.868: E/AndroidRuntime(937): 在 android.os.Handler.dispatchMessage(Handler.java:92) 02-21 18:24:01.868: E/AndroidRuntime(937):在 android.os.Looper.loop(Looper.java:137) 02-21 18:24:01.868: E/AndroidRuntime(937): 在 android.app.ActivityThread.main(ActivityThread.java:5039) 02-21 18:24:01.868: E/AndroidRuntime(937): 在java.lang.reflect.Method.invokeNative(Native Method) 02-21 18:24:01.868: E/AndroidRuntime(937): at java.lang.reflect.Method.invoke(Method.java:511) 02-21 18 :24:01.868: E/AndroidRuntime(937): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793) 02-21 18:24:01.868: E/AndroidRuntime(937): 在com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) 02-21 18:24:01.868: E/AndroidRuntime(937): at dalvik.system.NativeStart.main(Native Method)E/AndroidRuntime(937): 在 java.lang.reflect.Method.invoke(Method.java:511) 02-21 18:24:01.868: E/AndroidRuntime(937): 在 com.android.internal.os.ZygoteInit $MethodAndArgsCaller.run(ZygoteInit.java:793) 02-21 18:24:01.868: E/AndroidRuntime(937): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) 02-21 18 ：24：01.868：E / AndroidRuntime（937）：在dalvik.system.NativeStart.main（本机方法）E/AndroidRuntime(937): 在 java.lang.reflect.Method.invoke(Method.java:511) 02-21 18:24:01.868: E/AndroidRuntime(937): 在 com.android.internal.os.ZygoteInit $MethodAndArgsCaller.run(ZygoteInit.java:793) 02-21 18:24:01.868: E/AndroidRuntime(937): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) 02-21 18 ：24：01.868：E / AndroidRuntime（937）：在dalvik.system.NativeStart.main（本机方法）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:32:26.753

那么空指针异常来自您的异常。你有

```
Context context = null; 
```

然后你试图在这里使用它：

```
Toast.makeText(context.getApplicationContext(),"Camera is not available" ,           Toast.LENGTH_LONG).show(); 
```

没有在任何地方实际初始化它。

同样在你的 onPause() 函数中，你应该自己清理。（例如释放相机，停止表面预览，诸如此类）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:21:08.083

这可能是因为您第一次成功拍摄了照片并获取了相机对象，然后您又在这里获取了相机对象。

此处为 setcontentview 下面的第一个实例。

// 创建一个相机实例

```
mCamera = getCameraInstance(); 
```

并尝试再次获取相机实例，但它已经获取。

```
btn_new = (Button) findViewById(R.id.button_new);
btn_new.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {

        mCamera = getCameraInstance();

        //preview = (FrameLayout) findViewById(R.id.camera_preview);
        //preview.addView(mPreview);
    }
}); 
```

在再次获取相机对象之前，您应该释放第一个对象。

```
if(mCamera != null)
   mCamera.release(); 
```

和

**确保您在应用程序标记之前在清单中声明了权限。**

# android - 如何在此 RelativeLayout 中垂直居中图像

> ID：15008275
> 
> 赞同：18
> 
> 时间：2013-02-21T17:11:59.367
> 
> 标签：android, android-layout

我有以下布局，基本上将“消息”显示为内置“消息”的气泡。我只需要在右侧显示一个箭头图像，显示图像，但我需要它垂直居中。我尝试将 " 添加`android:gravity="center_vertical"`到图像中，但没有效果。

任何线索？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
    <LinearLayout 
        android:id="@+id/wrapper"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:background="#00DBE2ED" >

        <RelativeLayout
            android:id="@+id/wrapper2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="#00DBE2ED" >

            <EditText
                android:id="@+id/comment"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:editable="false" 
                android:layout_marginTop="5dip"
                android:layout_marginRight="5dip"
                android:layout_marginLeft="5dip"
                android:background="@drawable/bubble_yellow"
                android:paddingLeft="10dip"
                android:text="Hello bubbles!"
                android:textColor="@android:color/primary_text_light" />
            <TextView
                android:id="@+id/sender"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_margin="0dip"
                android:paddingLeft="5dip"
                android:paddingRight="2dip"
                android:text="Hello bubbles!"
                android:textColor="#b9dcdcdc"
                android:textSize="11sp"    
                android:layout_below="@+id/comment" />
            <ImageView
                android:id="@+id/aquaplayicon"
                android:src="@drawable/aquaplayicon"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:clickable="true"
                android:onClick="onClickGirl"
                android:layout_alignParentRight="true"
                android:paddingRight="3dip"
                android:gravity="center_vertical" />

        </RelativeLayout>

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-02-21T17:16:03.903

重力属性不适用于布局，因为它是一个`LinearLayout`属性，而您`ImageView`的`RelativeLayout`. 相反，删除该行

```
android:gravity="center_vertical" 
```

并添加行

```
android:layout_centerVertical="true" 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-21T17:14:38.890

您正在寻找的属性是`android:layout_centerVertical="true"`

# version-control - stable 中的更改需要默认为

> ID：15008276
> 
> 赞同：1
> 
> 时间：2013-02-21T17:12:01.363
> 
> 标签：version-control, mercurial

我创建了一个稳定的但我在使用稳定分支时不小心更改了一个文件。我承诺了，现在我的默认值（即开发）没有它。我尝试`hg pull -r <changset>`了变更集是最新提交的地方。

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:18:48.147

```
hg merge stable 
```

这会将两者合并在一起。

访问[https://www.mercurial-scm.org/guide](https://www.mercurial-scm.org/guide)并转到**Merge the named branch**。

您不必关闭它。

# php - 从wordpress中的url中删除www？

> ID：15008285
> 
> 赞同：1
> 
> 时间：2013-02-21T17:12:32.470
> 
> 标签：php, .htaccess, wordpress

大家好，我有 wordpress 网站当我用**url(www)**打开网站时，它会从 url中替换**www**，例如：

我有网站网址`httr://www.test.com`，浏览该网站后，我看到网址看起来像`http://test.com`。

我有 confuser **.htaccess**文件的问题是其他东西 ma .htaccess 代码

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

伙计们，如果您有解决方案，请与 mi 分享。

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:22:02.513

您需要在数据库中更新您的站点 URL。从 httt://www.test.com 到[http://test.com](http://test.com)

看看这个：[http ://codex.wordpress.org/Changing_The_Site_URL](http://codex.wordpress.org/Changing_The_Site_URL)

这可以更新您的数据库：http: [//interconnectit.com/products/search-and-replace-for-wordpress-databases/](http://interconnectit.com/products/search-and-replace-for-wordpress-databases/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:21:18.670

您是否检查过 WordPress 常规设置？那里的网址是什么？我相信这是 WP 的问题，而不是 htaccess 问题。

# ios - 如何建立与 UIContainerView 的连接

> ID：15008289
> 
> 赞同：2
> 
> 时间：2013-02-21T17:12:35.750
> 
> 标签：ios, ipad

我有一个标准的扩展 UIViewController（称为 ParentViewController 或 PVC），并希望有一个由 ChildViewController 或 CVC 驱动的容器或子视图。

我以编程方式看到，在 PVC 中我可以调用 addChild:CVC 并管理诸如 didMoveToParentViewController 等调用。但是，我希望有一种方法可以使用 Interface Builder 来做到这一点。

所以我布置了一个 PVC 的实例，然后将一个 ContainerView 拖到 PVC 的视图上，这会创建一个到子窗口的 segue。在那个窗口中，我分配了 ChildViewController 的类类型。到目前为止这看起来很棒，但是我如何以编程方式从 PVC 中引用它？让我们尝试通常的做法：在 PVC 类扩展中，我声明：

```
@property (nonatomic, strong) IBOutlet ChildViewController* cvc; 
```

当我切换到 IB 并突出显示 PVC 实例并选择连接检查器时，我看到了我的 cvc 属性，但我无法将它连接到我的 containerView 实例（即使它的类类型设置正确）。它允许我拖动（画线），但不允许我实际连接它。为什么？？

我在想这对 IB 来说是不可能的，但也许我看错了？

我已经阅读了[Apple 关于子视图的文档，](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html)如果我无法让 IB 做我想做的事情，我准备以编程方式执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T17:29:56.463

cvc 是 PVC 的子视图控制器，因此您可以使用 childViewControllers 属性获取对它的引用，您可以在代码中执行此操作，而不是在 IB 中连接插座。在 PVC 的 viewDidLoad 方法中，执行以下操作：

```
self.cvc = (ChildViewController *)self.childViewControllers[0]; 
```

Xcode 不允许您在两个不同的控制器之间连接插座，因此即使 cvc 作为子视图控制器嵌入，它仍然是不同的视图控制器。

# sql - ORACLE sql语句重写

> ID：15008291
> 
> 赞同：0
> 
> 时间：2013-02-21T17:12:38.057
> 
> 标签：sql, oracle

```
SELECT orderid 
 FROM (SELECT orderid, rownum r 
         FROM (SELECT orderid 
                 FROM myorders 
                WHERE ordertype = 'E' 
                  AND orderstatus = 'A') a 
         WHERE rownum < 86) 
 WHERE r > 84 
```

以更清晰的方式重写 ABOVE sql 语句的最佳方法是什么...

我尝试了以下方法，但没有得到任何结果。

```
select orderid 
  from myorders 
 where rownum between 84 and 86 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T17:23:51.963

假设您正在尝试生成数据页，并假设您希望如果表中的数据没有变化，结果是稳定且一致的（内部查询中的每一行都在结果的一页上返回您改变上限和下限），最有效的方法基本上就是您最初发布的方法。但是您确实需要`ORDER BY`在内部查询中添加一个。否则，Oracle 在每一页上返回一行数据或从不在任何页上返回一行是完全正确的

```
SELECT orderid 
 FROM (SELECT orderid, rownum r 
         FROM (SELECT orderid 
                 FROM myorders 
                WHERE ordertype = 'E' 
                  AND orderstatus = 'A'
                ORDER BY <<something>>) a 
         WHERE rownum < 86) 
 WHERE r > 84 
```

如果您真的更关心可读性而不是性能，您可以通过执行类似的操作将其减少一级嵌套

```
SELECT orderid
  FROM (SELECT orderid, 
               rank() over (order by <<something>>) rnk
          FROM myorders
         WHERE ordertype = 'E'
           AND orderstatus = 'A')
 WHERE rnk > 84
   AND rnk < 86 
```

在 Oracle 12c 中，Oracle 有望支持 ANSI`FETCH`和`OFFSET`关键字以进一步简化语法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T17:16:18.440

缩进是第一个建议。但是您可以消除一组子查询：

```
 select orderid
 from (SELECT orderid, rownum r
        FROM myorders
        WHERE ordertype = 'E' AND orderstatus = 'A'
       ) a
 where r = 85 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T17:37:13.437

如果您正在处理单个表。

```
SELECT orderid
FROM   myorders 
WHERE  ordertype = 'E' 
AND    orderstatus = 'A'
AND    rownum between 84 and 86 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T20:14:49.910

另外在行之间进行选择的一般示例。在我个人看来，使用 ROW_NUMBER() 而不是 ROWNUM 会更好也更明智。他们是compl。不同的...：

```
-- Between rows --
SELECT * FROM 
     ( SELECT deptno, ename, sal
            , ROW_NUMBER() OVER (ORDER BY ename) row_seq 
  FROM scott.emp)
 WHERE row_seq BETWEEN 5 and 10
 / 
```

# java - 真正显示java输出流进度和超时

> ID：15008294
> 
> 赞同：2
> 
> 时间：2013-02-21T17:12:44.923
> 
> 标签：java, android, networking, outputstream

我感觉应该是一个已解决的问题。我正在编写的 Android 应用程序发送一条消息，就像用户可以附加文件的 SMS 一样。我正在使用 HttpUrlConnection 将此数据发送到我的服务器，这基本上归结为 java.io.OutputStream（我将其包装在 DataOutputStream 中）。

在移动设备上，有时网络连接可能非常糟糕，发送可能需要太长时间。我有以下两个基本问题：

1.  用户无法知道上传进度
2.  如果网络很糟糕并且进展很糟糕 - 我宁愿中止或有一些合理的超时，而不是坐在那里尝试 5-10 分钟。

问题1：

我试图根据我正在使用 4K 缓冲区执行的输出流 write() 调用来显示上传进度：

```
 buffer = new byte[4096];
        long totalBytes = 0;
        while ((bytesRead = fis.read(buffer)) > -1) {
            totalBytes += bytesRead;
            dos.write(buffer, 0, bytesRead);
            if(showProgress){
               updateProgressBar(totalBytes);
            }
        } 
```

虽然这向我展示了进展，但它似乎只是向我展示了应用程序将文件缓冲区传输到操作系统网络堆栈缓冲区的速度。即使在慢速网络上，进度条也很快完成，然后在我最终从服务器获取 JSON 并告诉我发送状态之前又在那里停留了很长时间。从我将它传递给操作系统到我的服务器告诉我它收到它的时间，肯定有一些方法可以取得一些进展吗？

问题2：

有时网络连接很糟糕，但还不够糟糕，以至于硬件无线电触发未找到连接的回调（在这种情况下，我进入离线模式）。所以当它很糟糕但没有*关闭时，*我的应用程序只会坐在发送对话框中，直到奶牛回家。这与问题 1 相关，因为我需要以某种方式了解实际吞吐量，因为 OutputStream 本身不提供超时机制。如果它低于某个阈值，我可以取消连接并通知用户他们需要去一个接收良好的地方。

旁注：异步发送/输出队列对我来说不是一个选项，因为我无法将消息持久化到磁盘，因此不能保证起草的消息是无限期的，以防它在稍后的某个时间点发送失败。我需要/想要阻止发送，我只需要更聪明地放弃和/或通知用户正在发生的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:27:59.727

> 似乎它只是向我展示了应用程序将文件缓冲区传输到操作系统网络堆栈缓冲区的速度。

比那更糟。它向您展示了应用程序可以多快地将您的数据传输到它正在写入`HttpURLConnection`的内部`ByteArrayOutputStream`，以便它可以在写入任何内容之前查看内容长度并设置标题。

幸运的是，它也比这更好。如果事先知道数据的长度，设置定长传输模式。如果您不这样做，请将分块传输模式设置为较小的块大小，例如 1024。

*然后*，您将看到您的应用程序可以多快地将数据移动到套接字发送缓冲区；在分块传输模式的情况下，以块大小为单位。但是，一旦套接字发送缓冲区填满，您的写入将被阻塞，您将看到实际的网络传输，至少在您完成最后一次写入之前。从那时起，写入和关闭都是异步的，因此您的显示会更早弹出，但每个人都有这个问题。

关于问题 2，一旦传输稳定到上述网络速度，您就可以计算自己的吞吐量并在它很差时做出相应的反应。

# php - 借助布尔运算符分配变量

> ID：15008296
> 
> 赞同：0
> 
> 时间：2013-02-21T17:12:53.783
> 
> 标签：php, variables, assign

有没有一些捷径可以做到这一点

```
if (!empty($b))
   $a = $b;
else if (!empty($c)) {
   $a  = $c; 
```

我知道你可以使用三元运算符，但它不是我在 JavaScript 中所要求的，有办法像这样分配

```
my_var = some_Var || fu_bar || 0; 
```

因此，如果第一个不存在，则使用第二个，如果第二个不存在，则使用第三个。

php中有类似的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:20:31.140

您可以使用适合您的两种方式之一。这两个函数都会检查我们是否有非空变量。

```
1: $a = (isset($b) && $b)?$b:$c;
2: if($b)
      $a = $b;
    elseif($c)
      $a = $c; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:16:22.270

想不出除此之外的其他方法：

```
 $a = ! empty($b) ? $b : (! empty($c) ? $c : 0) 
```

# qt - QVariant::QVariant(Qt::GlobalColor)' 是私有的

> ID：15008297
> 
> 赞同：8
> 
> 时间：2013-02-21T17:12:55.410
> 
> 标签：qt, qt5

头文件中的声明

```
QColor dialogBoja, dialogBoja1; 
```

.cpp 文件

```
dialogBoja = postavke.value("boja", Qt::black).toString();
//postavke means settings
dialogBoja1 = postavke.value("boja1", Qt::white).toString(); 
```

正如我在标题上所说，当我尝试在 Qt5 中编译它时出现错误：QVariant::QVariant(Qt::GlobalColor)' is private

如何解决这个问题。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-21T17:19:48.910

您需要显式创建一个 QColor 对象。这应该有效：

```
dialogBoja = postavke.value("boja", QColor(Qt::black)).toString(); 
```

标题中解释了这样做的原因：

```
// These constructors don't create QVariants of the type associcated
// with the enum, as expected, but they would create a QVariant of
// type int with the value of the enum value.
// Use QVariant v = QColor(Qt::red) instead of QVariant v = Qt::red for
// example. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T17:23:24.067

看起来他们想将 QVariant 从 QtGui 模块（如 QColor）中分离出来，并在 5.0 中删除了该构造函数。[这里](http://qt-project.org/doc/qt-5.0/qtcore/qvariant.html#a-note-on-gui-types)解释了一些语法。

> 因为 QVariant 是 QtCore 库的一部分，它不能提供对 QtGui 中定义的数据类型的转换函数，例如 QColor、QImage 和 QPixmap。换句话说，没有 toColor() 函数。相反，您可以使用 QVariant::value() 或 qvariant_cast() 模板函数。

# angularjs - 使用 Angular 随机化 DOM 元素

> ID：15008300
> 
> 赞同：1
> 
> 时间：2013-02-21T17:13:02.437
> 
> 标签：angularjs

这似乎不起作用。可以将参数传递给 random() 回调吗？

```
function getAnswers($scope){
    $scope.answers = conjugate("작다");
    $scope.$on('$viewContentLoaded', random($(".answer")));
} 

function random(r) {
    r.children().sort(function() {
        return (Math.round(Math.random()) - 0.5);
    }).appendTo(r);
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:07:36.787

这并不是真正的“Angular 方式”。

您不应该进行任何 DOM 操作，甚至不应该在控制器中引用 DOM。

相反，您想要做的是操纵影响您的视图的模型数据。在您的情况下，我会随机化数据数组，而不是随机化 DOM 元素本身。：

```
function MyCtrl($scope) {
   $scope.answers = [ /*... some data here ... */];

   $scope.randomizeAnswers = function () {
      fisherYates($scope.answers);
   };

   //a good randomization function 
   //(see: http://stackoverflow.com/questions/2450954/how-to-randomize-a-javascript-array)
   function fisherYates ( myArray ) {
     var i = myArray.length, j, tempi, tempj;
     if ( i == 0 ) return false;
     while ( --i ) {
        j = Math.floor( Math.random() * ( i + 1 ) );
        tempi = myArray[i];
        tempj = myArray[j];
        myArray[i] = tempj;
        myArray[j] = tempi;
      }
   }
} 
```

这里可能不需要使用 $on ，您似乎只想在加载数组后进行随机化？这真的取决于你的`conjugate()`方法在世界上做什么。

我不知道你的`conjugate()`方法做了什么......但假设它做了某种异步工作来返回数据，你可能必须使用`$q`并从该方法返回一个承诺。然后，您可以将随机化调用放入`.then()`加载数据时会触发的回调中。

# css - IE9 RTL后台定位

> ID：15008301
> 
> 赞同：4
> 
> 时间：2013-02-21T17:13:05.360
> 
> 标签：css, internet-explorer-9, right-to-left

小提琴：http: [//jsfiddle.net/bHRVe/](http://jsfiddle.net/bHRVe/)

一个精灵被用于箭头。背景位置在 Firefox 和 IE8 中很好：

![FF 截图](../Images/63e19e35091f46f3160b548ca1380c3e.png)

但是，RTL 方向似乎正在甩掉 IE9，箭头不再存在：

![IE9 截图](../Images/41470c5fb0835f29cb68b781fa0a2135.png)

如果我将位置从 更改`left -52px`为`right -52px`，则它在 IE9 中正确显示，但在其他浏览器中中断。

有没有办法使用相同的 CSS 来解决这个问题？（没有条件或黑客）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:53:41.573

这是您的问题的纯基于 css 的解决方案：

**CSS：**

```
.button span {
    background: url("http://i48.tinypic.com/16716yb.png") no-repeat 0 -52px;
    margin-right: 0.5em;
    padding: 0 5px;
    direction: rtl;
    width:4px;
    height:15px;
    display:inline-block;
} 
```

**HTML：**

**注意：**最好将空格 ( `&nbsp;`) 放在空元素中，因为有时它有助于浏览器兼容性。

```
<a class="button" href="#">
    <b>تم, غزو عل جنوب</b>
    <br/>
    <u>ب ان. Testما وص</u>
    <span>&nbsp;</span>
</a> 
```

**附加说明：**默认情况下`<span>`，和`<a>`元素是内联元素。我们需要根据需要制作它们`display:block;`或`display:inline-block;`使用 css。

在您的情况下，您也可以使用`display:block;`，但是您还需要添加`float:left`以使跨度位于适当的位置。

**屏幕截图：** IE9

![在此处输入图像描述](../Images/f166759cb916936afeb821815bdfc6b1.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T15:41:08.450

只需稍微更改您的CSS：

```
.button span {
    background: url("http://i48.tinypic.com/16716yb.png") no-repeat scroll left -52px transparent;
    margin-right: 0.5em;
    direction: rtl;
    display: inline-block;
    width: 10px;
    height: 16px;
} 
```

[活生生的例子](http://jsfiddle.net/bHRVe/5/)。在 IE9、Chrome、Firefox、Safari 和 Opera 中测试和工作:)

# ruby-on-rails - 在 git 存储库中包含预编译资产是好还是坏？

> ID：15008303
> 
> 赞同：1
> 
> 时间：2013-02-21T17:13:15.097
> 
> 标签：ruby-on-rails, asset-pipeline, assets

Heroku 文档[说](https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar#the-asset-pipeline)我可以在本地预编译资产并将它们添加到 git repo。

就我个人而言，我认为在回购中拥有资产有很多缺点。你怎么看？

# css - h3中的文字居中高度

> ID：15008304
> 
> 赞同：3
> 
> 时间：2013-02-21T17:13:19.447
> 
> 标签：css

所以我有一个`h3`

```
<h3>someText<h3> 
```

具有`h3`高度和背景图像

```
h3
{
height:30px;
background-image:url();
background-reat: repeat-x;
} 
```

现在我希望中的文本`h3`与元素的中间对齐，但它总是将文本浮动到顶部： ![在此处输入图像描述](../Images/1d5a824cecbe72a3b255a4096e21b2f2.png)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T17:15:58.063

设置`line-height`匹配`height`：

```
h3
{
height:30px;
line-height:30px;
background-image:url();
background-reat: repeat-x;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T17:19:30.067

如果您的`<h3>`元素包含多行文本，则设置该`line-height`属性将无法按照其他答案的建议进行。

如果您不必支持`lteIE7`，则可以`display: table-cell`与属性结合使用`vertical-align`：

```
h3 {
  background-color: whitesmoke;
  height: 100px;
  display: table-cell;
  vertical-align: middle;
  text-align: center;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T17:14:41.460

您可以简单地添加`line-height:30px;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T17:14:27.010

用来`line-height`解决这个

```
h3 {
    height:30px;
    background-image:url();
    background-reat: repeat-x;
    line-height: 30px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T17:28:56.297

```
h3 {
    ...
    /* those 2 lines are what you need */
    line-height:30px;
    vertical-align:middle;
    ...
} 
```

# entity-framework - 在使用实体框架代码时处理相关数据

> ID：15008305
> 
> 赞同：1
> 
> 时间：2013-02-21T17:13:25.743
> 
> 标签：entity-framework, ef-code-first

我有两个类：LicenseType 和 EntityType。

```
[Table("LicenseType")]
public class LicenseType : ComplianceBase, INotifyPropertyChanged
{

    private List<Certification> _certifications = new List<Certification>();
    private List<EntityType> _entityTypes = new List<EntityType>();

    public List<EntityType> EntityTypes
    {
        get { return _entityTypes; }
        set { _entityTypes = value; }
    }

    public List<Certification> Certifications
    {
        get { return _certifications; }
        set { _certifications = value; }
    }
} 
```

和

```
[Table("EntityType")]
public class EntityType : ComplianceBase, INotifyPropertyChanged
{
    private List<LicenseType> _licenseTypes = new List<LicenseType>();

    public List<LicenseType> LicenseTypes
    {
        get { return _licenseTypes; }
        set
        {
            _licenseTypes = value;
            //  OnPropertyChanged();
        }
    }
} 
```

两者都来自ComplianceBase，

```
public class ComplianceBase
{
    private int _id;
    private string _name;
    private string _description;

    public string Description
    {
        get { return _description; }
        set
        {
            if (_description == value) return;
            _description = value;
            OnPropertyChanged();
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public int Id
    {
        get { return _id; }
        set
        {
            if (value == _id) return;
            _id = value;
            OnPropertyChanged();
        }
    }

    public string Name
    {
        get { return _name; }
        set
        {
            if (value == _name) return;
            _name = value;
            OnPropertyChanged();
        }
    }

    protected virtual void OnPropertyChanged([CallerMemberName] string propertyName = null)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
    } 
```

我想要做的是将 EntityType 与一个或多个 LicenseTypes 相关联，例如，EntityType“Primary Lender”可以与两个 LicenseTypes，“Lender License”和“Mortgage License”相关联。在这种情况下，我想要 EntityType 表中的一条记录“Primary Lender”和我的 LicenseType 表中的两条记录：“Lender License”和“Mortgage License”。

将相关 LicenseTypes 添加到我的 EntityType 的代码是通过调用完成的：

```
_currentEntity.LicenseTypes.Add(licenseType); 
```

然后打电话`_context.SaveChanges()`；

还有一个附加表“EntityTypeLicenseTypes”用作关联这两个表的查找表。有两条记录将 EntityType 与两个相关的 LicenseType 连接起来。

这有效。但是，我的代码还添加（它复制）LicenseType 记录，并将其添加到正在关联的那些记录的 LicenseType 表中。

我怎样才能阻止这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:22:21.473

为了避免重复，您必须*将 附加*到`licenseType`上下文中：

```
_context.LicenseTypes.Attach(licenseType);
_currentEntity.LicenseTypes.Add(licenseType);
_context.SaveChanges(); 
```

# c# - 如何在考虑多线程的情况下只执行一次代码？

> ID：15008308
> 
> 赞同：3
> 
> 时间：2013-02-21T17:13:43.700
> 
> 标签：c#, .net, multithreading, thread-safety, locking

我有一个功能可以从旧格式“迁移”到新格式。我需要在我的对象的构造函数中发生这种情况，但不是静态构造函数，因为需要一个参数。我怎样才能让一段代码只执行一次？

对于某些情况：

```
class Foo
{
  public Foo(string bar)
  {
    ShouldOnlyExecuteOnce(bar);
  }
} 
```

然后用法可能是（每行一个不同的线程）

```
var f = new Foo("bar");
var fb = new Foo("meh");
etc 
```

我怎样才能正确地保护 " `ShouldOnlyExecuteOnce`" 方法？

因为这是一种“迁移”类型的函数，所以我希望创建的第一个对象“获胜”并将旧数据迁移到这个新对象中。稍后构造的对象不应尝试执行此函数，即使它们的参数不同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:23:00.070

您可以使用双重检查锁定。

```
class Foo
{
    private static bool ShouldOnlyExecuteOnceExecuted = false;
    private static readonly object Locker = new object();

    public Foo(string bar)
    {
        SetShouldOnlyExecuteOnce(bar);
    }

    private void SetShouldOnlyExecuteOnce(string bar)
    {
        if(!ShouldOnlyExecuteOnceExecuted)
        {
            lock(Locker)
            {
                if(!ShouldOnlyExecuteOnceExecuted)
                {
                    ShouldOnlyExecuteOnce(bar);
                    ShouldOnlyExecuteOnceExecuted = true;
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-25T14:00:14.097

我通常会建议不要实现诸如双重检查锁定之类的微妙机制，尤其是当您已经在 BCL 中实现了它们时。在这种情况下：

```
public class SafeInitializater
{
    private bool _initialized;
    private object _dummy;
    private object _syncLock;

    public void InitializeOnce(Action initializer)
    {
        LazyInitializer.EnsureInitialized(ref _dummy, ref _initialized, ref _syncLock, 
            () => {
                initializer();
                return null;
            });
    }
} 
```

使用示例：

```
var initializer = new SafeInitializater(); //or you could make this static somewhere

var t1 = Task.Run(() => 
{
    Console.WriteLine($"Task {Task.CurrentId} entering the race");
    initializer.InitializeOnce(() => Console.WriteLine($"Task {Task.CurrentId} won!"));
});
var t2 = Task.Run(() => 
{
    Console.WriteLine($"Task {Task.CurrentId} entering the race");
    initializer.InitializeOnce(() => Console.WriteLine($"Task {Task.CurrentId} won!"));
});

await Task.WhenAll(t1, t2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T17:19:19.193

你应该阅读关于`monitors`,`semaphors`和`sigelton design-pattern`

[c#中的互斥量和信号量是什么？我们需要在哪里实施？](https://stackoverflow.com/questions/1553012/what-is-the-mutex-and-semaphore-in-c-where-we-need-to-implement)

[http://www.c-sharpcorner.com/UploadFile/1d42da/threading-with-semaphore-in-C-Sharp/](http://www.c-sharpcorner.com/UploadFile/1d42da/threading-with-semaphore-in-C-Sharp/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T17:24:32.500

我不知道，但我猜/尝试：

1 - 充当包装器并在静态构造函数中调用您的方法的静态类

2 - 一些 IoC 容器？

3 - 单身人士？

4 - 锁定？

5 - 以上所有？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T17:24:38.780

我同意 P.Brian 的观点，这似乎是一种单例模式。你可以在这里看到一篇非常好的文章[http://cshapindepth.com/articles/general/singleton.aspx](http://csharpindepth.com/articles/general/singleton.aspx)很好地分解了它。通常最好的解决方案是#4；

```
public sealed class Singleton
{
    private static readonly Singleton instance = new Singleton();

    // Explicit static constructor to tell C# compiler
    // not to mark type as beforefieldinit
    static Singleton()
    {
    }

    private Singleton()
    {
    }

    public static Singleton Instance
    {
        get
        {
            return instance;
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T17:17:07.600

单例模式应该可以工作。

鹦鹉乔恩·斯基特： [http ://csharpindepth.com/articles/general/singleton.aspx](http://csharpindepth.com/articles/general/singleton.aspx)

```
 public sealed class Singleton
 {
     private static readonly Singleton instance = new Singleton();

    // Explicit static constructor to tell C# compiler
     // not to mark type as beforefieldinit
     static Singleton()
     {
     }

    private Singleton()
     {
     }

    public static Singleton Instance
     {
         get
         {
             return instance;
         }
     }
 } 
```

单例是一次性构建的。虽然，关于传入新字符串值的部分可能会出现问题。是否在所有连续调用中都忽略此值？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-21T17:17:34.030

你需要一个互斥锁。这正是为这种用例互斥锁而设计的。

[http://www.dotnetperls.com/mutex](http://www.dotnetperls.com/mutex)

# c - 栈顶指针始终为空

> ID：15008309
> 
> 赞同：0
> 
> 时间：2013-02-21T17:13:52.597
> 
> 标签：c

我正在使用链表创建一个新堆栈。我不知道为什么 TOP 指针总是指向 NULL。我认为我没有正确设置顶部指针，或者它在函数之外不可见。

```
#include "stdio.h"
#include "stdlib.h"

typedef struct StackItem
{
      int itemValue;
      struct StackItem* NextItemPtr;
}StackItem;

typedef struct Stack
{
    struct StackItem *TOP;
}Stack;

int IsStackEmpty(StackItem *TOP)
{
     if(TOP==NULL)
         return 1;

}

void pushItem(StackItem *headPtr,int n)
{
    StackItem* Newnode;
    Newnode=(StackItem*)malloc(sizeof(StackItem));
    Newnode->itemValue=n;
    printf("Checking Head TOP %d\n\n",IsStackEmpty(headPtr)); //Everytime it is giving 1 
    Newnode->NextItemPtr=IsStackEmpty(headPtr)?NULL:headPtr;
    headPtr=Newnode;
}

int main()
{
   Stack* stackptr;
   stackptr=(Stack*)malloc(sizeof(Stack));
   stackptr->TOP=NULL;
   pushItem(stackptr->TOP,3);
   pushItem(stackptr->TOP,6);
   return 0;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T17:15:12.410

该语句对调用者没有任何作用：

```
headPtr=Newnode; 
```

你可以：

*   传递一个双指针并分配给`*headPtr`
*   返回`Newnode`而不是分配给`headPtr`

这个[C FAQ](http://c-faq.com/ptrs/passptrinit.html)解释了这个主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:16:39.690

```
headPtr = Newnode; 
```

由于`headPtr`是函数的参数，因此它是按值传递的。在函数内部修改它对调用者没有任何影响。您需要将指针传递给它并通过指针对其进行修改：

```
void pushItem(StackItem **headPtr, int n)
*headPtr = NewNode; 
```

# jsf - 在 p:column filteroptions 中显示图标

> ID：15008325
> 
> 赞同：0
> 
> 时间：2013-02-21T17:14:43.453
> 
> 标签：jsf, primefaces

我正在尝试在我的 p:datatable 上将图标显示为 filterOptions。目前的情况是我显示一个 unicode 符号列表，但客户希望它们是彩色的。下面的代码显示了我如何在我的 backingbean 中填充我的状态列表（我的过滤器选项）。

```
private static final String LABEL_DEACTIVATED = "\u24E7";
private static final String LABEL_ACTIVATED = "\u2714";
private void fillSelectItem() {
        userStates = new SelectItem[3];

        userStates[0] = new SelectItem("", LABEL_ALL);
        userStates[1] = new SelectItem(USER_ACTIVATED.name(), LABEL_ACTIVATED);
        userStates[2] = new SelectItem(USER_DEACTIVATED.name(),
                LABEL_DEACTIVATED);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:43:19.393

只要您的目标浏览器支持 CSS2 属性选择器（即几乎所有现代浏览器），您就可以使用 CSS 来设置每个单独图标的样式。将以下内容放入您的 css 文件中：

```
option[value='USER_ACTIVATED'] {
    /* for example */
    background-image: url(.....);
    background-color: #123456;   
    color: #123123;
}

option[value='USER_DEACTIVATED'] {
    /* for example */
    background-image: url(.....);
    background-color: #888111;   
    color: #222222;
} 
```

# java - java-1.7.0-openjdk-i386 和 java-7-openjdk-i386 有什么区别

> ID：15008333
> 
> 赞同：12
> 
> 时间：2013-02-21T17:15:22.750
> 
> 标签：java, jvm, openjdk

当我安装 netbeans 时，它给了我选择 java 环境的选项，我有 3 个选项，oracle java 和这两个（**java-1.7.0-openjdk-i386**和**java-7-openjdk-i386**）。这两者有什么区别？操作系统如果是ubuntu。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T17:21:11.310

两者`OpenJDK`是一样的。但是 OpenJDK 与 Oracle JDK 略有不同。阅读[这篇文章](https://stackoverflow.com/questions/11060671/difference-between-oracle-jdk-and-openjdk)以获得更多说明。

您获得 OpenJDK 两个选项的原因可能是您安装了两个 OpenJDK 副本（或对系统上同一目录的两个不同引用。）

如需进一步调查，请尝试`ls -lh /usr/lib/jvm`. **/usr/lib/jvm**通常是安装 Java 的目录。检查其中一个是否是符号链接。另外，在 netbeans 中检查两个 JDK 的位置，看看您是否实际上在系统上有两个 Java 版本或引用。

例如，这是`ls -lh`我系统上的输出：

```
ls -lh
total 24K
lrwxrwxrwx 1 root  root    26 Sep 10 13:41 default-java -> /usr/lib/jvm/java-7-oracle
lrwxrwxrwx 1 root  root    18 Mar 13  2012 java-1.5.0-gcj -> java-1.5.0-gcj-4.6
drwxr-xr-x 7 root  root  4.0K Aug 22  2012 java-1.5.0-gcj-4.6
lrwxrwxrwx 1 root  root    19 Jun 26  2012 java-1.6.0-openjdk-i386 -> java-6-openjdk-i386
drwxr-xr-x 3 root  root  4.0K Feb 15 10:52 java-6-openjdk-common
drwxr-xr-x 7 root  root  4.0K Feb 15 10:52 java-6-openjdk-i386
drwxr-xr-x 8 ankit ankit 4.0K Jun  6  2012 java-6-sun
drwxr-xr-x 5 root  root  4.0K Aug 22  2012 java-7-openjdk-i386
drwxr-xr-x 8 root  root  4.0K Feb 20 10:40 java-7-oracle
lrwxrwxrwx 1 root  root    12 Mar 13  2012 java-gcj -> java-gcj-4.6
lrwxrwxrwx 1 root  root    18 Apr 16  2012 java-gcj-4.6 -> java-1.5.0-gcj-4.6 
```

如您所见`java-1.6.0-openjdk-i386`，这只是对另一个名为的目录的符号链接/引用`java-6-openjdk-i386`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-06T09:36:59.473

你安装了两次

从openjdk，按照[here的说明](http://openjdk.java.net/install/)

```
sudo apt-get install openjdk-7-jdk 
```

来自 Stackoverflow，按照[此处的说明进行操作](https://stackoverflow.com/questions/16263556/installing-java-7-on-ubuntu)

```
sudo add-apt-repository ppa:webupd8team/java
sudo apt-get update
sudo apt-get install oracle-java7-installer 
```

会推荐第二个并通过键入删除第一个

`sudo apt-get remove openjdk-7-jdk`.

# sql-server - 在所有表中搜索列描述描述元

> ID：15008338
> 
> 赞同：2
> 
> 时间：2013-02-21T17:15:42.403
> 
> 标签：sql-server

我正在考虑使用扩展属性来存储表和列描述，但我希望能够搜索所有表的描述，以查找特定子字符串的出现。

在以下示例中，显示的函数返回表“PEOPLE”的列描述列表。这些描述存储为名称为“MS_DESCRIPTION”的扩展属性。

```
 SELECT
    cast(VALUE AS VARCHAR(8000)) AS [DESCRIPTION]
                     FROM
                         ::fn_listextendedproperty(NULL
                                                   ,'user'
                                                   ,'dbo'
                                                   ,'table'
                                                   ,'PEOPLE'
                                                   ,'column'
                                                   ,NULL) 
```

但是，如何在所有表中搜索给定子字符串的所有列描述？

```
SELECT
    cast(VALUE AS VARCHAR(8000)) AS [DESCRIPTION]
                     FROM
                         ::fn_listextendedproperty(NULL
                                                   ,'user'
                                                   ,'dbo'
                                                   ,'table'
                                                   ,'?'
                                                   ,'column'
                                                   ,NULL)
    where cast(VALUE AS VARCHAR(8000)) LIKE '%SEARCH%' 
```

是否有更有效的搜索方法可以避免将 VALUE 字段从 SQL_VARIANT 转换为 varchar？

将此元数据存储在用户定义的自定义表中而不是使用扩展属性会更明智吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T17:45:21.000

您可以查看系统视图以搜索所有表中的所有列。

```
SELECT schemas.name schemaName
     , tables.name tableName
     , columns.name columnName
     , extended_properties.value extendedProperties
  FROM sys.schemas
 INNER JOIN sys.tables
    ON schemas.schema_id = tables.schema_id
 INNER JOIN sys.columns
    ON tables.object_id = columns.object_id
 INNER JOIN sys.extended_properties
    ON tables.object_id = extended_properties.major_id
   AND columns.column_id = extended_properties.minor_id
   AND extended_properties.name = 'MS_Description'
   AND CAST( extended_properties.value AS nvarchar(max) ) LIKE '%SEARCH%'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-27T14:44:03.070

要查找某个名称的列，user1948904 的解决方案会更简单一些：

```
SELECT schemas.name schemaName
   , tables.name tableName
   , columns.name columnName
   , * -- for context if you like
 FROM sys.schemas
 INNER JOIN sys.tables
   ON schemas.schema_id = tables.schema_id
 INNER JOIN sys.columns
   ON tables.object_id = columns.object_id
 WHERE columns.name LIKE '%SEARCH%' 
```

搜索不区分大小写。

# php - 逻辑运算符的 PHP 顺序

> ID：15008346
> 
> 赞同：0
> 
> 时间：2013-02-21T17:15:59.967
> 
> 标签：php

我很好奇 PHP 如何使用嵌套处理条件语句/操作顺序。如果我使用以下`if`条件：

```
if(x == (1 || 2))
{
    // do something
} 
```

我希望它的行为与

```
if(x == 1 || x == 2)
{
    // do something
} 
```

...但事实并非如此。我的第一个示例似乎是一个很方便的速记，但它并没有达到我的预期。任何人都可以阐明这个问题吗？PHP 究竟对我的第一个语句做了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:30:02.367

你的速记在逻辑上是无效的。几乎在每种情况下，您都必须为要测试的所有可能性写出完整的逻辑案例。

我说“几乎”是因为在 PHP 中你可以做一些荒谬的事情，比如：

```
if( in_array($x, array(1,2)) ) {
  // code!
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T17:43:52.907

所以对于这段代码：

```
if ($x == ( 1 || 2)) 
{
    // do something
} 
```

在 PHP 中，任何非零数都被认为是真的。免责声明：这一事实在其他语言中不一定是正确的。所以在 PHP 中，0 是唯一被认为是错误的数字。所以你问是否`$x == true`在上面的代码中。

因此，只要`$x`是 0 以外的任何数字，则内部的语句`if`将解析为`true`. 但是，当`$x = 0`then 就等于说`false == true`which 当然会解析为`false`.

这篇文章可能会有所帮助：[PHP：布尔值](http://php.net/manual/en/language.types.boolean.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T17:19:49.803

```
x == (1 || 2) 

evaluates like this:

(1 (if its false) then testing for 2, if not, the expression returns true)

now it will become:

if(x==true)? 
```

另一个来自（[PHP.NET](http://www.php.net/manual/en/language.operators.logical.php)）的例子：

> // foo() 永远不会被调用，因为这些操作符是短路的

```
$b = (true  || foo()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T17:19:53.777

请参阅此处了解运算符的优先级 [http://php.net/manual/en/language.operators.precedence.php](http://php.net/manual/en/language.operators.precedence.php)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-21T17:19:56.307

它的行为与数学相同（想想 BEDMAS），首先执行括号。所以你的例子表现为：

```
if (x == ( 1 || 2)) {
  //code
} 
```

并且因为 1 和 2 都是非零值（因此都是真的），你得到：

```
if (x == true) {
  //code
} 
```

不幸的是，要得到你想要的，你需要：

```
if (x == 1 || x == 2) {
  //code
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T17:20:06.260

首先，如果评估结果`1||2`并检查它是否等于 x

在第二个它喜欢`this or this or this`

但是首先你可以看到`var_dump(1 || 2)`每次都返回 true 所以

```
 $x = 3;
 var_dump($x == 1 || 2);
 if($x == 1 || 2){
     echo 'inside if';
  } 
```

也是[**如此**](http://codepad.viper-7.com/zRmiVJ)`inside if`，因此即使 $x 为 3也会打印

所以 imo 第二种方法是要走的路

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-21T17:20:32.860

这有什么意义？您要求计算机执行以下逻辑表达式：

**if x == (1 || 2)**与 x ==相同（1 || 2**的结果）**

所以你的表达式是**x == true** since **1 || 2**将返回 true

**计算机做你告诉他们做的任何事情**

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-21T17:21:24.037

```
if(x == (1 || 2))
{
    // do something
} 
```

`OR`并且`AND`操作返回`TRUE`或者`FALSE` 您声明说 - 如果 x 等于（真） -`1 or 2`永远是真的 - 这只是没有意义......

# pic - pic32 uart 问题

> ID：15008348
> 
> 赞同：1
> 
> 时间：2013-02-21T17:16:02.867
> 
> 标签：pic, uart

我们有一个系统，一组 PIC32 MCU 在共享的 UART 总线上加上几个 I/O，作为类似于芯片选择的握手。一主多从。从主机到从机的传输是直接的，并且进展顺利。从机到主机的响应信号通过一个 1K 电阻，主机侧有 10K 上拉电阻。如果没有选择，每个从机必须禁用其 UART，以免干扰其他从机的传输。主机始终处于活动状态，并允许两个从机通信序列之间有 400 us 的延迟。传输以 4 字节块进行。

我们构建的 5 个系统中有一个存在问题，其中一个从属设备的起始位不完整。大约 1/4 位宽的毛刺。当这个附加时，master master 无法识别块并超时传输。到目前为止，我们通过更换有故障的 MCU 解决了这个问题，但这是开发时的修复，不适合生产。

有人见过类似的东西吗？可能是什么问题？

我们将 pic32mx320F064H-80 用于主设备和从设备。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-28T12:52:21.517

1:10的电阻比例可能会很狡猾，低电平可能无法被主人很好地识别。对于您的电路，我假设 1k 电阻器在这里是为了保护从机，如果两个设法同时启用。为此，在 3.3V（14mA 短路电流）下 120 欧姆就足够了。

在之前的一个项目中，我发现 10k 上拉往往很弱，这取决于扇入（在您的情况下是从属设备的数量）。我建议您将其减少到 4.7k 。有了这些值，比率现在是 0.025。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T23:01:36.727

* * *

要么选择的从机在传输之前没有足够快地启用
- 或者 -
之前选择的从机没有足够快地禁用。

* * *

了解波特率会有所帮助，因为这将使“400 us”成为现实。

# php - 如何将函数从mysql转换为mysqli

> ID：15008350
> 
> 赞同：0
> 
> 时间：2013-02-21T17:16:08.683
> 
> 标签：php, mysql, function, mysqli

您好，我想将 mysql 函数转换为 mysqli 版本。此功能用于检查用户是否存在。所以我是函数的新手，甚至是 mysqli 的新手。这就是为什么我在转换它时遇到问题。

mysql版本是：

```
function a($uname){
    return (mysql_result(mysql_query("SELECT COUNT (`a`) FROM `table_1` WHERE `a`='$uname'"), 0) == 1) ? true : false;
} 
```

我认为的mysqli版本是：

```
function a($uname){
        return (mysqli_num_rows(mysqli->query("SELECT COUNT (`a`) FROM `table_1` WHERE `a`='$uname'"), 0) == 1) ? true : false;
    } 
```

我知道没有 mysql_result 了。我决定使用 mysqli_num_rows。但这个功能不起作用，我不知道为什么。error_reporting 已启用，但在调用页面时，我会得到一个没有错误消息的空白页面？！

所以如果有人可以帮助我，我真的很感激。

多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:25:07.423

从[文档](http://www.php.net/manual/de/mysqli.query.php)中免费： `mysqli->query`为查询返回一个 mysqli_result 对象，该对象实际上返回一些结果，为失败的查询返回“false”，为所有其他查询返回“true”（如果成功）。

除非您更彻底地检查结果，否则您对查询结果一无所知。

尝试这样的事情：（假设连接已经成功建立，并且 $uname 已经正确转义。）

```
function a($uname) {
    $found = false;
    $result = mysqli->query("SELECT `a` FROM `table_1` WHERE `a`='$uname'");
    if($result) {
        //We used a 'SELECT' query and the query was successful. That means, we now have a mysqli_result object.
        $found = ($result->num_rows == 1);   //Determines, if something was actually found or not.
        $result->close(); //Frees some ressources. Not necessary, but doesn't hurt either.
    } else { //The query failed, as such we have nothing to evaluate.
         die("Queryerror: ".mysqli->error);
    }
    return $found;
} 
```

我将查询参数从“COUNT”更改为“a”，否则“num_rows”将始终返回 1，即使实际计数为“0”。这样，它返回匹配的行数，基本上返回“0”表示“不匹配”或“1”表示“匹配”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:25:42.293

您需要一个辅助函数来将所有肮脏的 mysqli 内部组件置于幕后。
像[safemysql](https://github.com/colshrapnel/safemysql)一样。它也可以模仿 mysql_result：

```
function a($uname){
    global $db; // with mysqi you have to connect once and then use this connection
    return (bool)$db->getOne("SELECT COUNT (1) FROM table_1 WHERE a=?s"), $uname);
} 
```

并且可以解决几十个类似的问题。

# python - Python 3 和 tkinter 通过单击按钮打开新窗口

> ID：15008359
> 
> 赞同：6
> 
> 时间：2013-02-21T17:16:41.157
> 
> 标签：python, button, tkinter, window

当用户单击 Tkinter 和 Python 3 中的按钮时，如何打开一个新窗口？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T18:38:38.840

[您可以通过创建 Tkinter 类Toplevel](http://effbot.org/tkinterbook/toplevel.htm)的新实例来打开一个新窗口。

例如：

```
import Tkinter as tk

class View(tk.Frame):
    count = 0
    def __init__(self, *args, **kwargs):
        tk.Frame.__init__(self, *args, **kwargs)
        b = tk.Button(self, text="Open new window", command=self.new_window)
        b.pack(side="top")

    def new_window(self):
        self.count += 1
        id = "New window #%s" % self.count
        window = tk.Toplevel(self)
        label = tk.Label(window, text=id)
        label.pack(side="top", fill="both", padx=10, pady=10)

if __name__ == "__main__":
    root = tk.Tk()
    view = View(root)
    view.pack(side="top", fill="both", expand=True)
    root.mainloop() 
```

# c# - 转换货币价值

> ID：15008363
> 
> 赞同：1
> 
> 时间：2013-02-21T17:16:49.513
> 
> 标签：c#, .net, .net-4.0, currency, cultureinfo

我正在尝试将一种货币转换为另一种货币

例如。

```
 decimal value= 0;
  var text = "£135";
  decimal.TryParse(text, NumberStyles.Any, new CultureInfo("fa-IR"), out value); 
```

此结果*值为*“0”。我在这里做错什么了吗？

或者有没有其他方法可以做到这一点？

任何帮助表示赞赏！

**更新**

我累了

```
var value= string.Format(new CultureInfo("en-US"), "{0:c}", text);
then value = "£135"

var value = string.Format(new CultureInfo("en-US", false), "{0:c}", text);
then value = "£135" 

var value = string.Format(new CultureInfo("en-US", false), "{0:c}", "135");
then value = "135" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T17:47:45.430

如果你想要货币符号，你可能应该做更多这样的事情

```
var s = 135.ToString("C", new CultureInfo("en-US")); 
```

这将为您提供 135.00 美元

不过，您只能使用非字符串值。所以，如果你想来回转换它们，那么你需要先从字符串转回小数

```
 var s = 135.ToString("C", new CultureInfo("en-US"));
  //$135.00
  decimal x;
  var tryParse = decimal.TryParse(s, NumberStyles.Currency, new CultureInfo("en-US"), out x);
  var s1 = x.ToString("C", new CultureInfo("fa-IR"));
  //ريال 135/00 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:36:39.023

`"£135"`这`Contains Currency Symbol`并且`decimal.TryParse`无法获得符号..所以只有它返回`"0"`...

尝试在没有符号的情况下传递值然后它可以工作......`string.Format`在代码中其他明智的使用......

```
decimal value= 0;
var text = "135";
decimal.TryParse(text, NumberStyles.Any, new CultureInfo("fa-IR"), out value); 
```

# f# - F# 在实际处理 int64 时假设为 int

> ID：15008364
> 
> 赞同：6
> 
> 时间：2013-02-21T17:16:53.657
> 
> 标签：f#, type-inference

通过[Project Euler尝试学习 F#，我在为](http://projecteuler.net/)[问题 3](http://projecteuler.net/problem=3)编写解决方案时偶然发现了一个类型推断问题。

这是我写的：

```
let rec findLargestPrimeFactor p n = 
    if n = 1 then p
    else
        if n % p = 0 then findLargestPrimeFactor p (n/p)
        else findLargestPrimeFactor (p+1) n

let result = findLargestPrimeFactor 2 600851475143L 
```

但是，编译器给了我以下错误：

```
错误 FS0001：此表达式应为 int 类型，但此处为 int64 类型
```

由于我希望 in 中使用的类型`findLargestPrimeFactor`是从用法中推断出来的，我很惊讶地发现编译器似乎假定参数`n`是一个 int，因为对函数的唯一调用是使用 int64 完成的。

有人可以向我解释一下：

1.  为什么编译器似乎对类型感到困惑
2.  如何解决此限制

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T17:41:05.270

中的类型`findLargestPrimeFactor`是根据使用情况推断的。F# 编译器以自上而下的方式执行类型推断，因此`p`和`n`（的参数`findLargestPrimeFactor`）的类型是根据它们在函数中的用法推断出来的。当编译器看到 时`let result = ...`，参数类型已经被推断为`int`。

最简单的解决方案是在所有常量值上使用`L`后缀，因此类型将被推断为`int64`：

```
let rec findLargestPrimeFactor p n = 
    if n = 1L then p
    else
        if n % p = 0L then findLargestPrimeFactor p (n/p)
        else findLargestPrimeFactor (p + 1L) n

let result = findLargestPrimeFactor 2L 600851475143L 
```

如果您想要一个更好的解决方案，您可以使用`LanguagePrimitives`模块中的通用 1 和 0 常量。这允许`findLargestPrimeFactor`通用（-ish），因此可以更轻松地使用不同的数字类型重用它：

```
open LanguagePrimitives

let rec findLargestPrimeFactor p n = 
    if n = GenericOne then p
    else
        if n % p = GenericZero then findLargestPrimeFactor p (n/p)
        else findLargestPrimeFactor (p + GenericOne) n

(* You can use one of these, but not both at the same time --
   now the types of the _arguments_ are used to infer the types
   of 'p' and 'n'. *)

//let result = findLargestPrimeFactor 2L 600851475143L
let result = findLargestPrimeFactor 2 Int32.MaxValue 
```

根据@kvb 的建议，以下是一般编写此函数的方法：

```
open LanguagePrimitives

let inline findLargestPrimeFactor p n =
    let rec findLargestPrimeFactor p n =
        if n = GenericOne then p
        else
            if n % p = GenericZero then findLargestPrimeFactor p (n/p)
            else findLargestPrimeFactor (p + GenericOne) n
    findLargestPrimeFactor p n

(* Now you can call the function with different argument types
   as long as the generic constraints are satisfied. *)
let result = findLargestPrimeFactor 2L 600851475143L
let result' = findLargestPrimeFactor 2 Int32.MaxValue 
```

# scala - 将 Class[_] 转换为 Universe.Type/Symbol

> ID：15008367
> 
> 赞同：5
> 
> 时间：2013-02-21T17:17:06.883
> 
> 标签：scala, reflection

我正在尝试列出一个包中的所有类，并通过新的反射 api(2.10) 提取一些元数据信息。

我可能错了，但似乎不支持从 scala api 的包中列出类。

我正在使用[java 库](http://code.google.com/p/reflections)，但它只返回`Class<?>`

可以将 a 转换`Class[_]`为`universe.Type`or `universe.Symbol`?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T18:23:46.747

你应该使用`scala.reflect.runtime.universe`（[JavaUniverse](http://www.scala-lang.org/api/current/index.html#scala.reflect.api.JavaUniverse)）的镜像

假设您有一个运行时类：

```
val cls: Class[_] = someObject.getClass 
```

您应该为您的类加载器获取`runtimeMmirror`( [JavaMirror](http://www.scala-lang.org/api/current/index.html#scala.reflect.api.JavaMirrors%24JavaMirror) ) 并调用其`classSymbol`方法，该方法将运行时类转换为该 Universe 的 ClassSymbol：

```
import scala.reflect.runtime._

val typ: universe.ClassSymbol = universe.runtimeMirror(cls.getClassLoader).classSymbol(cls) 
```

# c - File I/O confusion

> ID：15008370
> 
> 赞同：0
> 
> 时间：2013-02-21T17:17:11.487
> 
> 标签：c, file, io

I've just started with FILE I/O today, and I'm confused here. The while loop in the code below gives a weird output. It prints `i` starting from `i = 1`, and then `a[1] = ..` But outside the while loop, I've specified `i = 0`. Any reason for why `i` is incrementing to 1 after entering the while loop? The confusing thing though is that the final for loop, is printing `a[0] = 0` correctly!

```
#include <stdio.h>
#include <stdlib.h>
#define N 11

int main()
{
    FILE *fp;
    int i, a[N];
    fp = fopen("numbers.txt", "w");
    for(i = 0; i < N; i++)
    fprintf(fp,"%d\n",i);
    fclose(fp);
    fp = fopen("numbers.txt", "r");
    i = 0;
    while(!feof(fp))
    {
        printf("i = %d ",i);
        fscanf(fp,"%d",&a[i]);
        printf("a[%d] = %d\n",i,a[i]);
        i++;
    }
    for(i = 0; i < N; i++)
    printf("%d\n",a[i]);
    return 0;
} 
```

[![](../Images/25c9d502059d11b1a7cd2212d27ca701.png)](https://i.stack.imgur.com/BgiEw.png)

**EDIT: Got the above issue clarified, another confusion now. After reading the last number in the file, shouldn't the feof(fp) return a non-zero value and thus terminate the while loop? Why is it executing the loop one extra time?**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:33:19.150

Your terminal cuts off the first line of the output because it's too long.

# sql - 在oracle中左外连接三个表

> ID：15008371
> 
> 赞同：5
> 
> 时间：2013-02-21T17:17:28.303
> 
> 标签：sql, oracle

我有三个表，如下所示：

![在此处输入图像描述](../Images/1e70cac251754b70267e9eaa212d1ebe.png)

我正在尝试获得如下输出：

![在此处输入图像描述](../Images/fe3fcc4524da55bf0d096095a19465f3.png)

这是我到目前为止所尝试的

```
 SELECT table1.tb1_a,
CASE WHEN table3.tb3_a IS NOT NULL THEN
    tb3_b
    ELSE 'No city for him yet'
END AS 'City'
FROM table1
LEFT OUTER JOIN table2 ON
    table1.tb1_a = table2.tb2_a
LEFT OUTER JOIN table3 ON
    table2.tb2_a = table3.tb3_a
WHERE table3.tb3_a IN
    (

    ) 
```

现在我正在努力研究如何选择 tb3_a 列的最大值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:30:19.487

这应该做你需要的：

```
SELECT t1.tb1_a, COALESCE(t3.tb3_a, 'No city for him yet') AS City
FROM table1 t1
LEFT JOIN (
    SELECT MAX(tb2_b) AS tb2_b, tb2_a
    FROM table2
    GROUP BY tb2_a
) t2 ON (t2.tb2_a = t1.tb1_a)
LEFT JOIN table3 t3 ON (t3.tb3_a = t3.tb2_b); 
```

关键点是中间的内联视图，我们在其中创建了一种虚拟表，其中包含`tb2_b`每个的最大值`tb2_a`。然后我们可以加入这个来达到预期的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:21:11.063

像这样的东西应该工作

```
select tb1_a, nvl(max(city), 'no city for him yet') thecity
from etc
group by tbl_a 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T17:22:10.927

我想你想用分析函数来做到这一点。方法如下：

```
SELECT tb1_a, coalesce(tb3_b, 'No city for him yet') as City
from (select table1.tb1_a, tb3_b,
             ROW_NUMBER() over (partition by table1.tbl1_a order by tb3_a desc) as seqnum
      FROM table1 LEFT OUTER JOIN
           table2
           ON table1.tb1_a = table2.tb2_a LEFT OUTER JOIN
           table3
           ON table2.tb2_a = table3.tb3_a
     ) t
where seqnum = 1 
```

这用于`row_number()`确定 table3 中的最后一个条目。这是由`where seqnum = 1`子句选择的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T18:38:49.187

这有效：

[http://sqlfiddle.com/#!4/7ba1c/12](http://sqlfiddle.com/#!4/7ba1c/12)

```
SELECT table1.tb1_a,
       CASE WHEN table3.tb3_a IS NOT NULL THEN tb3_b
            ELSE 'No city for him yet'
       END AS City,
table2.*, table3.*
FROM table1
LEFT OUTER JOIN table2 ON    table1.tb1_a = table2.tb2_a
LEFT OUTER JOIN table3 ON    table2.tb2_b = table3.tb3_a
where tb2_b = (select max(tb2_b) 
                 from table2 t22 
                where t22.tb2_a = tb1_a)
or    tb2_b is null
order by 1 
```

我认为 where 子句可以解释自己

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T17:28:41.743

试试这个，希望对你有帮助

```
with table_1 as
 (select 10 as tb1_a, 'John' as tb1_b
    from dual
  union all
  select 20 as tb1_a, 'John1' as tb1_b
    from dual
  union all
  select 30 as tb1_a, 'John2' as tb1_b from dual),
table_2 as
 (select 10 as tb2_a, 100 as tb2_b
    from dual
  union all
  select 10 as tb2_a, 1000 as tb2_b
    from dual
  union all
  select 10 as tb2_a, 10000 as tb2_b
    from dual
  union all
  select 20 as tb2_a, 200 as tb2_b
    from dual
  union all
  select 20 as tb2_a, 2000 as tb2_b
    from dual
  union all
  select 20 as tb2_a, 20000 as tb2_b from dual),
table_3 as
 (select 100 as tb3_a, 'City1' as tb3_b
    from dual
  union all
  select 1000 as tb3_a, 'City10' as tb3_b
    from dual
  union all
  select 10000 as tb3_a, 'City100' as tb3_b
    from dual
  union all
  select 200 as tb3_a, 'City2' as tb3_b
    from dual
  union all
  select 2000 as tb3_a, 'City20' as tb3_b
    from dual
  union all
  select 20000 as tb3_a, 'City200' as tb3_b from dual)

select user_id, city
  from (select u.tb1_a as user_id,
               nvl(c.tb3_b, 'No city') as city,
               rank() over(partition by u.tb1_a order by tb3_a) as city_rank
          from table_1 u, table_2 u_c, table_3 c
         where u.tb1_a = u_c.tb2_a(+)
           and u_c.tb2_b = c.tb3_a(+)) t1
 where city_rank = 1 
```

# macos - 哪个是 Mac 中用于弹出键的虚拟键

> ID：15008375
> 
> 赞同：5
> 
> 时间：2013-02-21T17:17:38.703
> 
> 标签：macos, keyboard

我想将 Mac Eject Key 重新映射到 Insert 中，特别是用于模拟 Windows 应用程序中的 Ctrl+Insert、Alt+Insert、Shift+Insert 和其他常用组合键。

弹出键的虚拟键代码是什么？我找到了一些虚拟密钥表，但由于某种原因，从未包含 Eject Key。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-01-06T12:49:45.580

问：Mac 中哪个是弹出键的虚拟键？

答：没有。

参考[通用串行总线的 HID 使用表](https://www.usb.org/sites/default/files/hut1_2.pdf)，弹出不是按键，实际上是 HID 使用 - 来自消费者使用页面的一次性控件。

> **3.4.1.4 单次控制 (OSC)**
> 单次控制是触发单个事件或动作的按钮。One Shot Control 被编码为 1 位值，并声明为相对、首选、主要项目，其逻辑最小值和逻辑最大值分别为 0 和 1。从 0 到 1 的转换会启动一个事件。从 1 到 0 的转换不会发生任何事情，但在另一个事件发生之前需要它。一个例子是消磁。

在消费者使用页面 (0x0C) 上，弹出使用 ID 定义为：

| 使用 ID | 使用名称 | 使用类型 | 部分 |
| --- | --- | --- | --- |
| B8 | 喷射 | 操作系统 | 15.7 |

如果您想从支持 USB HID 的 Arduino（例如 Leonardo）伪造 Eject 按键，您可以使用以下代码来执行此操作，该代码发送 Control-Shift-Eject 以锁定屏幕...

```
// NicoHood's HID-Project
#include "HID-Project.h"

void setup() {
  // Make pin 2 an input and turn on the pull-up resistor
  // so it goes high unless connected to ground:
  pinMode(2, INPUT_PULLUP);

  Keyboard.begin();

  // Sends a clean report to the host.
  // This is important on any Arduino type.
  Consumer.begin();
}

void loop() {
  // Control-Shift-Eject locks the screen
  if (digitalRead(2) == LOW) {
    Keyboard.press(KEY_LEFT_CTRL);
    Keyboard.press(KEY_LEFT_SHIFT);

    // This is a One Shot Command so doesn't need a "release"
    Consumer.write(HID_CONSUMER_EJECT);

    // Debounce
    delay(100);
    while (digitalRead(2) == LOW)
      delay(100);

    // Release Control-Shift keys
    Keyboard.releaseAll();
  }
} 
```

至于对来自 Windows 的 Eject 按键做出反应，除非它作为与媒体控制相关的 WM_ 事件之一引发，否则我希望您必须编写一个 USB HID/ACPI 驱动程序来检测并引发 OSC 本身。

ACPI 中有[适用于运行 Windows 10 桌面版的设备的示例按钮，](https://docs.microsoft.com/en-us/windows-hardware/drivers/hid/acpi-button-device#sample-buttons-in-acpi-for-device-running-windows-10-desktop-editions)该按钮演示了如何从消费者页面捕获其他一些 OSC（例如 Volume Increments/Decrements），您可能可以对此进行扩展以包括 Eject。

抱歉，我无法提供更多帮助，但希望这能为您指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-14T17:57:00.537

我知道这个问题是几年前提出的，但也许有些人仍在寻找那个答案，最终会找到那个问题，所以......

`VoodooPS2Keyboard.cpp`来自**RehabMan**的 VoodooPS2Controller 的第 1805行说 Mac 上用于 Eject Key 的虚拟键是**`0x92`**.

参考：

[https://github.com/RehabMan/OS-X-Voodoo-PS2-Controller/blob/master/VoodooPS2Keyboard/VoodooPS2Keyboard.cpp](https://github.com/RehabMan/OS-X-Voodoo-PS2-Controller/blob/master/VoodooPS2Keyboard/VoodooPS2Keyboard.cpp)

# python - 双等于vs在python中

> ID：15008380
> 
> 赞同：96
> 
> 时间：2013-02-21T17:17:57.830
> 
> 标签：python, comparison, boolean, equals, equality

我在 Python 解释器中运行以下命令：

```
>>> foo = 10
>>> dir(foo) == dir(10)
True
>>> dir(foo) is dir(10)
False
>>> 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2013-02-21T17:18:49.477

`is`检查 2 个参数是否引用同一个对象，`==`检查 2 个参数是否具有相同的值。 `dir()`返回 a `list`，其中包含 和 的相同数据，但这两`foo`件事`10`的实际`list`实例不同。

# jquery - Is an Isotope layout combining centered fitRows possible?

> ID：15008383
> 
> 赞同：3
> 
> 时间：2013-02-21T17:18:04.013
> 
> 标签：jquery, jquery-isotope

I am attempting to set up a page on the website that utilizes a centered fitRows Isotope layout.

I can get the centered layout, and I can get the fitRows layout. However, I have not been able to combine them into a centered fitRows layout.

I am assuming there is a conflict between the centered Masonry and fitRows layouts.

Is it possible to combine these 2 types of layouts or am I out of luck? This is the first time that I've used Isotope, so I'm not sure how to do some of the more advanced tricks yet.

I'm using the following to instantiate Isotope

```
// set up isotope
var $container = $('#candidates');
$container.imagesLoaded(function(){
        $container.isotope({
                itemSelector:   '.candidate',
                layoutMode:     'fitRows',
                masonry:        {
                                    columnWidth:    175,
                                    gutterWidth:    20,
                                    isAnimated:     true,
                                    isFitWidth:     true
                                }
            });
    }); 
```

My full test code can be found here: [http://jsfiddle.net/hightechredneckwoman/UtHRX/23/](http://jsfiddle.net/hightechredneckwoman/UtHRX/23/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-13T01:49:20.530

我刚刚制作了 fitRows 的修改版本，可能会有所帮助：

```
 // modified Isotope methods for gutters in fitRows
Number.prototype.roundTo = function(num) {
    var resto = this%num;
    if (resto <= (num/2)) { 
        return this-resto;
    } else {
        return this+num-resto;
    }
}

   $.Isotope.prototype._fitRowsLayout = function($elems) {
    var instance = this,
          containerWidth = this.element.width(),
          props = this.fitRows;

    var gutter = this.options.fitRows && this.options.fitRows.gutterWidth || 0;
    var columnWidth = this.options.fitRows && this.options.fitRows.columnWidth ||
                  // or use the size of the first item
                  this.$filteredAtoms.outerWidth(true) ||
                  // if there's no items, use size of container
                  containerWidth;
console.log("C="+columnWidth);
      $elems.each( function() {
        var $this = $(this),
            atomW = $this.outerWidth(true),
            atomH = $this.outerHeight(true);

    if(props.x !== 0 && props.x + atomW + gutter <= containerWidth){
        props.x = props.x.roundTo(columnWidth + gutter);
    }

        if ( props.x !== 0 && atomW + props.x > containerWidth ) {
          // if this element cannot fit in the current row
          props.x = 0;
          props.y = props.height;
        }

        // position the atom
        instance._pushPosition( $this, props.x, props.y );

        props.height = Math.max( props.y + atomH, props.height );
        props.x += atomW;

    });

}; 
```

它旨在支持装订线和列宽，但对函数的其余部分使用常规的 fitRows 数学。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-19T15:51:32.557

包含同位素 javascript 文件后，添加以下代码以覆盖默认 fitRows 布局，以添加每行特征的居中：

```
<script type="text/javascript">
// Put the following code after isotope js include
// Override and customize Isotope FitRows layout mode: CENTER each rows
var fitRows = Isotope.LayoutMode.modes.fitRows.prototype;
fitRows._resetLayout = function() {

  // pre-calculate offsets for centering each row
  this.x = 0;
  this.y = 0;
  this.maxY = 0;
  this._getMeasurement( 'gutter', 'outerWidth' );
  this.centerX = [];
  this.currentRow = 0;
  this.initializing = true;
  for ( var i=0, len = this.items.length; i < len; i++ ) {
      var item = this.items[i];
      this._getItemLayoutPosition(item);
  }
  this.centerX[this.currentRow].offset = (this.isotope.size.innerWidth +this.gutter-this.x) / 2;
  this.initializing = false;
  this.currentRow = 0;

  // centered offsets were calculated, reset layout
  this.x = 0;
  this.y = 0;
  this.maxY = 0;
  this._getMeasurement( 'gutter', 'outerWidth' );
};
fitRows._getItemLayoutPosition = function( item ) {
  item.getSize();
  var itemWidth = item.size.outerWidth + this.gutter;
  // if this element cannot fit in the current row
  var containerWidth = this.isotope.size.innerWidth + this.gutter;
  if ( this.x !== 0 && itemWidth + this.x > containerWidth ) {

    if (this.initializing)
        this.centerX[this.currentRow].offset = (containerWidth-this.x) / 2;
    this.currentRow++;

    this.x = 0;
    this.y = this.maxY;
  }

  if (this.initializing && this.x == 0) {
    this.centerX.push({ offset: 0});
  }
  //if (this.centerX[this.currentRow].offset < 0)
  //  this.centerX[this.currentRow].offset = 0;

  var position = {
    x: this.x+(this.initializing?0:this.centerX[this.currentRow].offset),
    y: this.y
  };

  this.maxY = Math.max( this.maxY, this.y + item.size.outerHeight );
  this.x += itemWidth;

  return position;
};
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-24T20:10:45.610

巧合的是，我最近在 Twitter 上向 Isotope 作者提出了同样的问题。[他的回答](https://twitter.com/desandro/status/336577874721124352https://twitter.com/desandro/status/336577874721124352)是否定的。但是，Isotope 确实提供了[居中的砌体](http://isotope.metafizzy.co/custom-layout-modes/centered-masonry.html)布局，这可能是可接受的替代品。

# android - 2.2 的 Android 开关小部件的最佳反向移植是什么？

> ID：15008384
> 
> 赞同：7
> 
> 时间：2013-02-21T17:18:06.340
> 
> 标签：android

我正在为 2.2 寻找一个稳定的 android switch 小部件的反向移植。请推荐您正在使用的开源库。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T17:33:40.107

[https://github.com/BoD/android-switch-backport](https://github.com/BoD/android-switch-backport)

或者

[https://github.com/pellucide/Android-Switch-Demo-pre-4.0/tree/master/android-switch-demo](https://github.com/pellucide/Android-Switch-Demo-pre-4.0/tree/master/android-switch-demo)

是几个简单的选择。

我还发现将 SeekBar 子类化以获得所需的效果相对简单（非常类似于 iOS 开关）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-11T09:54:43.313

我更喜欢[这个](https://github.com/ankri/SwitchCompatLibrary)和[这个](https://github.com/Prototik/HoloEverywhere)。第二个我认为比你想象的要多得多，如果你选择它记得安装 Maven。

# c++ - Calculating a curve thru any 3 points in a normalzed matrix using C++

> ID：15008385
> 
> 赞同：3
> 
> 时间：2013-02-21T17:18:08.990
> 
> 标签：c++, bezier, curve, splines

If I have a simple 2-D matrix with normalized values on x-axis between 0 and 1 and y-axys between 0 and 1, and I have 3 points in this matrix e.g. P1 (x=0.2,y=0.9), P2 (x=0.5,y=0.1) and P3 (x=0.9,y=0.4).

How can I simply calculate a curve thru this points, meaning having a function which is giving me the y for any x.

I now that there are any number of possible curves thru 3 points. But hey, you know what I mean: I want a smooth curve thru it, usable for audio-sample-interpolation, usable for calculation a volume-fade-curve, usable for calculating a monster-walking-path in a game.

Now I have searched the net for this question about 3 days, and I cannot believe that there is no usable solution for this task. All the text dealing about Catmull-rom-Splines, bezier-curves and all that theroretical stuff has all at least one point which doesn't make it for me usable. For example Catmull-Rom-splines need to have a fix distance between the control-points (I would use this code and set the 4\. point-y to the 3\. point y) :

```
void CatmullRomSpline(float *x,float *y,float x1,float y1,float x2,float y2,float x3,float y3,float x4,float y4,float u)
{
//x,y are calculated for x1,y1,x2,y2,x3,y3 and x4,y4 if u is the normalized distance (0-1) in relation to the distance between x2 and x3 for my whiched point

float u3,u2,f1,f2,f3,f4;

u3=u*u*u;
u2=u*u;
f1=-0.5f * u3 + u2 -0.5f *u;
f2= 1.5f * u3 -2.5f * u2+1.0f;
f3=-1.5f * u3 +2.0f * u2+0.5f*u;
f4=0.5f*u3-0.5f*u2;

*x=x1*f1+x2*f2+x3*f3+x4*f4;
*y=y1*f1+y2*f2+y3*f3+y4*f4;

} 
```

But I don't see that x1 to x4 have any affect on the calculation of y, so I think x1 to x4 must have the same distance?

...

Or bezier-code doesn't calcuate the curve thru the points. The points (at least the 2\. point) seem only to have a force-effect on the line.

```
typedef struct Point2D
{
double x;
double y;
} Point2D;

class bezier
{
std::vector<Point2D> points;
bezier();
void PushPoint2D( Point2D point );
Point2D GetPoint( double time );
~bezier();
};

void bezier::PushPoint2D(Point2D point)
{
points.push_back(point);
}

Point2D bezier::GetPoint( double x )
{
int i;
Point2D p;

p.x=0;
p.y=0;

if( points.size() == 1 ) return points[0];
if( points.size() == 0 ) return p;

bezier b;
for (i=0;i<(int)points.size()-1;i++)
{
    p.x = ( points[i+1].x - points[i].x ) * x + points[i].x;
    p.y = ( points[i+1].y - points[i].y ) * x + points[i].y;
    if (points.size()<=2) return p;
    b.PushPoint2D(p);
}

return b.GetPoint(x);
}

double GetLogicalYAtX(double x)
{
bezier bz;
Point2D p;

p.x=0.2;
p.y=0.9;
bz.PushPoint2D(p);

p.x=0.5;
p.y=0.1;
bz.PushPoint2D(p);

p.x=0.9;
p.y=0.4;
bz.PushPoint2D(p);

p=bz.GetPoint(x);

return p.y;
} 
```

This is better than nothing, but it is 1\. very slow (recursive) and 2\. as I said doesn't really calculate the line thru the 2\. point.

Is there a mathematical brain outside which could help me?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:25:22.657

感谢 TOCS (Scott) 提供您的代码，如果有时间我也会尝试一下。但是我现在测试的是INFACT（答案3）的提示：这个“大范围多项式”非常接近我正在寻找的内容：

我已将我的类贝塞尔曲线重命名为曲线，因为我添加了一些用于拉格朗日插值的代码。我还添加了 3 张图形表示的图片，代码是计算什么。

在图 1 中，您可以看到旧贝塞尔函数的松散中间点。

在图 2 中，您现在可以看到拉格朗日插值的全点结果。

在图 3 中，您可以看到唯一的问题，或者我应该说“我还需要解决的问题”（无论如何这是迄今为止最好的解决方案）：如果我移动中间点，曲线会变快，变快到上限或下限）。我希望它上下更顺畅。这样它看起来更像对数函数。这样它就不会过早地超出 0 和 1 之间的 y 边界。

现在我的代码如下所示：

```
curve::curve(void)
{
}

void curve::PushPoint2D(Point2D point)
{
    points.push_back(point);
}

Point2D curve::GetPoint( double x )
{
//GetPoint y for x with bezier-mathematics...

//was the only calculating function in old class "bezier"
//now the class is renamed "curve"
int i;
Point2D p;

p.x=0;
p.y=0;

if( points.size() == 1 ) return points[0];
if( points.size() == 0 ) return p;

curve b;
for (i=0;i<(int)points.size()-1;i++)
{
    p.x = ( points[i+1].x - points[i].x ) * x + points[i].x;
    p.y = ( points[i+1].y - points[i].y ) * x + points[i].y;
    if (points.size()<=2) return p;
    b.PushPoint2D(p);
}

return b.GetPoint(x);
}

//THIS IS NEW AND VERY VERY COOL
double curve::LagrangeInterpolation(double x)
{
double y = 0;

for (int i = 0; i <= (int)points.size()-1; i++)
{
    double numerator = 1;
    double denominator = 1;

    for (int c = 0; c <= (int)points.size()-1; c++)
    {
        if (c != i)
        {
            numerator *= (x - points[c].x);
            denominator *= (points[i].x - points[c].x);
        }
    }

    y += (points[i].y * (numerator / denominator));

}

return y;
}

curve::~curve(void)
{
}

double GetLogicalYAtX(double x)
{
curve cv;
Point2D p;

p.x=0; //always left edge
p.y=y1; //now by var
cv.PushPoint2D(p);

p.x=x2; //now by var
p.y=y2; //now by var
cv.PushPoint2D(p);

p.x=1; //always right edge
p.y=y3; //now by var
cv.PushPoint2D(p);

//p=cv.GetPoint(x);

//return p.y;

return cv.LagrangeInterpolation(x);
} 
```

![老贝塞尔曲线](../Images/7b663fa97ae46f71935150d08e4d29d3.png) ![拉格朗日，很酷但是...](../Images/3f9f358c6579e0b6c3f7c4d82b299d95.png) ![...剪辑这么快...](../Images/697e21d795dbc9de871c57a7a36e1a0f.png)

你有什么想法我可以让新的解决方案更“软”吗？这样我就可以移动 2\. 点在更大的区域而不会使曲线超出边界？谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:04:26.037

```
static bezier From3Points(const Point2D &a, const Point2D &b, const Point2D &c)
{
    bezier result;
    result.PushPoint2D(a);

    Point2D middle;
    middle.x = 2*b.x - a.x/2 - c.x/2;
    middle.y = 2*b.y - a.y/2 - c.y/2;
    result.PushPoint2D(middle);

    result.PushPoint2D(c);
    return result;
} 
```

未经测试，但应返回贝塞尔曲线，其中 t=0.5 处曲线通过点“b”。

此外（前面还有更多未经测试的代码），您可以使用像这样的伯恩斯坦基多项式来计算您的分数。

```
static int binomialcoefficient (int n, int k)
{
    if (k == 0)
        return 1;
    if (n == 0)
        return 0;

    int result = 0;
    for (int i = 1; i <= k; ++i)
    {
        result += (n - (k - i))/i;
    }
    return result;
}

static double bernstein (int v, int n, double t)
{
    return binomialcoefficient(v,n) * pow(t,v) * pow(1 - t,n - v);
}

Point2D GetPoint (double t)
{
    Point2D result;
    result.x = 0;
    result.y = 0;

    for (int i = 0; i < points.size(); ++i)
    {
        double coeff = bernstein (i,points.size(),t);
        result.x += coeff * points[i].x;
        result.y += coeff * points[i].y;
    }

    return result;
} 
```

# android - Android: Bitmap size exceeds 32 bit in DialogFragment

> ID：15008386
> 
> 赞同：5
> 
> 时间：2013-02-21T17:18:12.263
> 
> 标签：android, bitmap, imageview

This is not a duplicate of [Mysterious stacktrace in Android developer console (bitmap size exceeds 32bits)](https://stackoverflow.com/questions/9370145/mysterious-stacktrace-in-android-developer-console-bitmap-size-exceeds-32bits)

That question didn't provide a single line of code and there's no answer either; besides, I get this error even if I set the Bitmap size to 32x32, it is the only Bitmap, so it is not memory related.

**What I want to do**

1.  Get the size of an ImageView,
2.  create a BitMap
3.  and draw something on a Canvas.

The `Log.e` output for the size of the ImageView and therefore Bitmap is:

```
Width: 272
Height: 136 
```

**What happens**

The below code works well on Nexus4, Nexus7 and Desire HD (CM10), but running the app on the emulator gives me the error shown below (API 8).

**Findings**

1.  I've tried it with half the size and 32x32, which gives the same error.

2.  I am displaying the ImageView in a DialogFragment (ActionBarSherlock/HoloEveryWhere for API 8), maybe that's the culprit?

ImageView:

```
<ImageView
      android:id="@+id/imageView1"
      android:layout_width="match_parent"
      android:layout_height="1dp"
      android:layout_marginBottom="12dp"
      android:layout_marginTop="12dp" /> 
```

In my activity:

```
iv = (ImageView) view.findViewById(R.id.imageView1);
ViewTreeObserver vto = iv.getViewTreeObserver();
vto.addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {
    @Override
    public boolean onPreDraw() {
         if (!waveFormMeasured) {
             if (iv.getMeasuredWidth() > 1) {
                 width = iv.getMeasuredWidth();
                 Log.e(TAG, "Width: " + width + " Height: " + width / 2);
                 waveBitmap = Bitmap.createBitmap((int) width, (int) ((int) width / 2), Config.RGB_565);
                 Log.e(TAG, "Bitmap created");
                 waveCanvas = new Canvas(waveBitmap);
                 Log.e(TAG, "Bitmap set to Canvas");
                 iv.getLayoutParams().height = width / 2;
                 Log.e(TAG, "ImageView Height changed");
                 iv.setImageBitmap(waveBitmap);
                 Log.e(TAG, "Bitmap set to ImageView");
                 drawWaveForm(true);
                 Log.e(TAG, "WaveForm drawn");
                 waveFormMeasured = true;
              }
          }
     return true;
     }
  }); 
```

What is wrong here ?

```
02-21 17:12:48.301: E/Drummers(375): Width: 272 Height: 136
02-21 17:12:48.301: E/Drummers(375): Bitmap created
02-21 17:12:48.301: E/Drummers(375): Bitmap set to Canvas
02-21 17:12:48.301: E/Drummers(375): ImageView Height changed
02-21 17:12:48.301: E/Drummers(375): Bitmap set to ImageView
02-21 17:12:48.623: E/Drummers(375): WaveForm drawn
02-21 17:12:48.842: E/AndroidRuntime(375): FATAL EXCEPTION: main
02-21 17:12:48.842: E/AndroidRuntime(375): java.lang.IllegalArgumentException: bitmap size exceeds 32bits
02-21 17:12:48.842: E/AndroidRuntime(375):  at android.graphics.Bitmap.nativeCreate(Native Method)
02-21 17:12:48.842: E/AndroidRuntime(375):  at android.graphics.Bitmap.createBitmap(Bitmap.java:477)
02-21 17:12:48.842: E/AndroidRuntime(375):  at android.view.View.buildDrawingCache(View.java:6577)
02-21 17:12:48.842: E/AndroidRuntime(375):  at android.view.ViewGroup.onAnimationStart(ViewGroup.java:1259)
02-21 17:12:48.842: E/AndroidRuntime(375):  at android.view.ViewGroup.drawChild(ViewGroup.java:1505)
02-21 17:12:48.842: E/AndroidRuntime(375):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
02-21 17:12:48.842: E/AndroidRuntime(375):  at android.view.View.draw(View.java:6883)
02-21 17:12:48.842: E/AndroidRuntime(375):  at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
02-21 17:12:48.842: E/AndroidRuntime(375):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
02-21 17:12:48.842: E/AndroidRuntime(375):  at android.view.View.draw(View.java:6986)
02-21 17:12:48.842: E/AndroidRuntime(375):  at android.widget.FrameLayout.draw(FrameLayout.java:357)
02-21 17:12:48.842: E/AndroidRuntime(375):  at android.widget.ScrollView.draw(ScrollView.java:1409)
02-21 17:12:48.842: E/AndroidRuntime(375):  at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
02-21 17:12:48.842: E/AndroidRuntime(375):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
02-21 17:12:48.842: E/AndroidRuntime(375):  at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
02-21 17:12:48.842: E/AndroidRuntime(375):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
02-21 17:12:48.842: E/AndroidRuntime(375):  at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
02-21 17:12:48.842: E/AndroidRuntime(375):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
02-21 17:12:48.842: E/AndroidRuntime(375):  at android.view.View.buildDrawingCache(View.java:6640)
02-21 17:12:48.842: E/AndroidRuntime(375):  at android.view.ViewGroup.onAnimationStart(ViewGroup.java:1259)
02-21 17:12:48.842: E/AndroidRuntime(375):  at android.view.ViewGroup.drawChild(ViewGroup.java:1505)
02-21 17:12:48.842: E/AndroidRuntime(375):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
02-21 17:12:48.842: E/AndroidRuntime(375):  at android.view.View.draw(View.java:6883)
02-21 17:12:48.842: E/AndroidRuntime(375):  at android.widget.FrameLayout.draw(FrameLayout.java:357)
02-21 17:12:48.842: E/AndroidRuntime(375):  at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1862)
02-21 17:12:48.842: E/AndroidRuntime(375):  at android.view.ViewRoot.draw(ViewRoot.java:1522)
02-21 17:12:48.842: E/AndroidRuntime(375):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1258)
02-21 17:12:48.842: E/AndroidRuntime(375):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
02-21 17:12:48.842: E/AndroidRuntime(375):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-21 17:12:48.842: E/AndroidRuntime(375):  at android.os.Looper.loop(Looper.java:123)
02-21 17:12:48.842: E/AndroidRuntime(375):  at android.app.ActivityThread.main(ActivityThread.java:3683)
02-21 17:12:48.842: E/AndroidRuntime(375):  at java.lang.reflect.Method.invokeNative(Native Method)
02-21 17:12:48.842: E/AndroidRuntime(375):  at java.lang.reflect.Method.invoke(Method.java:507)
02-21 17:12:48.842: E/AndroidRuntime(375):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-21 17:12:48.842: E/AndroidRuntime(375):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-21 17:12:48.842: E/AndroidRuntime(375):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:30:09.967

位图的大小限制取决于设备。大小一般是屏幕本身的大小。有几个关于堆栈溢出的问题可以解决这个问题，例如[OutOfMemoryError: bitmap size超出 VM budget :- Android](https://stackoverflow.com/questions/2928002/outofmemoryerror-bitmap-size-exceeds-vm-budget-android)或[Strange out of memory issue while loading an Image to a Bitmap object](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object)。如果您需要一个非常大的图像，您可以简单地将其分解为更易于管理的尺寸，并将它们放在多个`ImageViews`. 几个月前，我创建了一个应用程序，其中包含一个可滚动的大型图像，其中大约 15 个图像无缝地串在一起 - 验证这是一个很好的方法。

最后一点，位图很难直接使用，因为它们会在 Android 上引起内存问题。查看[BitmapFactory.Options](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html)，并始终记住取消和`recycle`未使用的位图。

**编辑**

它也可能与修改 View in 的内容有关`onPreDraw()`。这篇文章：[我什么时候可以第一次测量视图？](https://stackoverflow.com/questions/4393612/when-can-i-first-measure-a-view)讨论了如何在此方法中编辑 View 的大小将导致`onPreDraw()`不断调用，而使用 an 执行这些操作`onGlobalLayoutListener`将给出预期的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T16:25:25.740

在 API 8 中将 DialogFragment 设置为 match_parent（宽度和高度）似乎存在问题。我不能确切地说发生了什么，但添加以下虚拟布局修复了它（我有几个 LinearLayouts/TextViews/带有 layout_width="match_parent" 的 SeekBars 等，整个事情在 API 11+ 中工作）：

```
<org.holoeverywhere.widget.ListView
     android:id="@+id/sampleList"
     android:layout_width="match_parent"
     android:layout_height="wrap_content" >
</org.holoeverywhere.widget.ListView> 
```

以下无法将其设置为全屏：

```
setStyle(...) 
```

或者

```
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

# java - Request to a Threadpool from a thread

> ID：15008393
> 
> 赞同：0
> 
> 时间：2013-02-21T17:18:23.997
> 
> 标签：java, multithreading, threadpool

I need to make an application that generates a list containing the following characters: H,A,O,*,#,@. The last two are control characters. The "#" makes the list divide in two (like a tree) and each sublist have to continue filling until the "@" appears, which indicates the list is finish. This process continues until all of the sublists have the "@" or the lenght of all the sublists together are 10000\.

Then I have to iterate through the list using threads, and for each of the characters paint a different image in a frame. When I find a "#", the thread have to start two other threads to iterate throught the next two sublists and it have to terminate.

I am getting stuck in the part when I have to start the new threads and finish the first one. Googling I found a way to do this, but I feel that is a bad way to do it. So my question is: Is there another way to make this?

```
public class PainterThread implements Runnable {

public PainterThread(Iterator pIterator, ExecutorService pPool, PaintingPanel pPanel) {
    _iteratorList = pIterator;  //the Iterator of the list
    _Pool = pPool;          //I pass the ThreadPool as a parameter in order to make the request to create new threads
    _PanelToPaint = pPanel;// The Panel which going to paint the images
}

//Methods
@Override
public void run() {
    while (_iteratorList.hasNext()) {
        Node actualNode = (Node) _iteratorList.next();
        switch (actualNode.getControlSign()) {
            case "H":
                _PanelToPaint.addShapes(new Square(actualNode.getPositionX(), actualNode.getPositionY(), actualNode.getSize()));
                _PanelToPaint.repaint();
                break;
            case "A":
                _PanelToPaint.addShapes(new Triangle(actualNode.getPositionX(), actualNode.getPositionY(), actualNode.getSize()));
                _PanelToPaint.repaint();
                break;
            case "O":
                _PanelToPaint.addShapes(new Circle(actualNode.getPositionX(), actualNode.getPositionY(), actualNode.getSize()));
                _PanelToPaint.repaint();
                break;
            case "*":
                _PanelToPaint.addShapes(new Asterisk(actualNode.getPositionX(), actualNode.getPositionY(), actualNode.getSize()));
                _PanelToPaint.repaint();
                break;
            case "#":
                LinkedList actualList = (LinkedList) _iteratorList.next();
                _Pool.submit(new PainterThread(actualList.iterator(), _Pool,_PanelToPaint)); //Here is my question. Is there another way to make this?
                if (_iteratorList.hasNext()) {
                    actualList = (LinkedList) _iteratorList.next();
                    _Pool.submit(new PainterThread(actualList.iterator(), _Pool, _PanelToPaint));
                }
                break;
            case "@":
                break;
        }
    }
}

public void setIterator(Iterator pNewIterator) {
    _iteratorList = pNewIterator;
}
//Atributes
private Iterator _iteratorList;
private ExecutorService _Pool;
private PaintingPanel _PanelToPaint; 
```

}

# python - Python计算两个大圆的交点

> ID：15008394
> 
> 赞同：0
> 
> 时间：2013-02-21T17:18:27.313
> 
> 标签：python, intersection, great-circle

我正在尝试计算两个大圆的交点（纬度和经度），每个大圆由圆上的两个点定义。我一直在尝试遵循[此处](https://stackoverflow.com/questions/2954337/great-circle-rhumb-line-intersection)概述的方法。但是我得到的答案是不正确的，我的代码在下面有人看到我哪里出错了吗？

```
import numpy as np
from numpy import cross
from math import cos, sin, atan2, asin, asinh

################################################
#### Intersection of two great circles.
# Points on great circle 1.
glat1 = 54.8639587
glon1 = -8.177818

glat2 = 52.65297082
glon2 = -10.78064876

# Points on great circle 2.
cglat1 = 51.5641564
cglon1 = -9.2754284

cglat2 = 53.35422063
cglon2 = -12.5767799

# 1\. Put in polar coords.

x1 = cos(glat1) * sin(glon1)
y1 = cos(glat1) * cos(glon1)
z1 = sin(glat1)

x2 = cos(glat2) * sin(glon2)
y2 = cos(glat2) * cos(glon2)
z2 = sin(glat2)

cx1 = cos(cglat1) * sin(cglon1)
cy1 = cos(cglat1) * cos(cglon1)
cz1 = sin(cglat1)

cx2 = cos(cglat2) * sin(cglon2)
cy2 = cos(cglat2) * cos(cglon2)
cz2 = sin(cglat2)

# 2\. Get normal to planes containing great circles.
#    It's the cross product of vector to each point from the origin.

N1 = cross([x1, y1, z1], [x2, y2, z2])
N2 = cross([cx1, cy1, cz1], [cx2, cy2, cz2])

# 3\. Find line of intersection between two planes.
#    It is normal to the poles of each plane.

L = cross(N1, N2)

# 4\. Find intersection points.

X1 = L / abs(L)
X2 = -X1

ilat = asin(X1[2]) * 180./np.pi
ilon = atan2(X1[1], X1[0]) * 180./np.pi 
```

我还应该提到这是在地球表面（假设是一个球体）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-20T16:02:04.707

DSM 在上述评论中的解决方案，您的角度以度为单位，而 sin 和 cos 期望弧度。还有线

```
X1 = L / abs(L) 
```

应该，

```
X1 = L / np.sqrt(L[0]**2 + L[1]**2 + L[2]**2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-04T14:20:51.737

需要进行的另一项更正是在 x 和 y 维度的“lon”之前更改 cos/sin：

```
x = cos(lat) * cos(lon)
y = cos(lat) * sin(lon)
z = sin(lat) 
```

这是因为从角度到球面系统的原始转换是使用极坐标/方位角球面角完成的，它们与纬度/经度角不同（wiki it [https://en.wikipedia.org/wiki/Spherical_coordinate_system](https://en.wikipedia.org/wiki/Spherical_coordinate_system)）。

# python - Is there any numerical solver in python with control of each iteration?

> ID：15008396
> 
> 赞同：1
> 
> 时间：2013-02-21T17:18:36.253
> 
> 标签：python, linear-algebra

I am solving a linear system of equation currently i am using

```
 numpy.linalg.solve 
```

It returns the solution of the linear system. I want to have a control such that i can execute iterations

Considering another option

```
 scipy.optimize.minimize 
```

Documentation describes that we can specify a function which is called after every iteration and we could have current parameters. I am not sure if they meant that we could get the current resultant vector. e.g Simply I want to access x after every iteration, while we are solving Ax=b

I am wondering if somebody has worked with it and can explain!

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:00:52.230

The `callback` keyword argument to `scipy.optimize.minimize` specifies a function that will be called with the current estimate of the argument that minimizes the function at each iteration.

But `minimize` is intended for a scalar function (one returning a single value) so I don't see how that is applicable to your example. You may want to try `scipy.optimize.fsolve` instead. It doesn't accept the `callback` keyword though. To get around that, you could wrap your linear equation in a callable function object (that returns `Ax-b`) and then just take the argument that is passed to your callable object.

```
class Ab:
    def __init__(self, A, b):
        self.A = A
        self.b = b
    def __call__(self, x):
        print 'x =', x
        return A.dot(x) - b 
```

Then use it like this:

```
>>> A = np.array([[2, 3], [4, 9]], float)
>>> b = np.array([5, 5])
>>> f = Ab(A, b)
>>> optimize.fsolve(f, [0, 0])
x = [0 0]
x = [ 0\.  0.]
x = [ 0\.  0.]
x = [  1.49011612e-08   0.00000000e+00]
x = [  0.00000000e+00   1.49011612e-08]
x = [ 5\.         -1.66666667]
x = [ 5\.         -1.66666667]
array([ 5\.        , -1.66666667]) 
```

`fsolve` reported only taking 5 iterations so it appears the first two calls may be not actually used for convergence.

# php - How to divide large amount of tasks into small ones and execute in particular interval,in php

> ID：15008398
> 
> 赞同：0
> 
> 时间：2013-02-21T17:18:36.657
> 
> 标签：php

I need to send a common mail to a large number of members (example 5000 members).

I need to send this using SMTP server.

I will get this 5000 members mail id from Data base.

New members will add to the Data base table in each hour ,

for example

after 1 hour , the number of members will reach to 6000

So Which is the best method to send mail to all these members, by dividing the task

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:50:13.673

如何通过 curl 异步运行它。这样，虽然您循环了 6000 个成员，但由于长时间执行，您的文件不会得到超时响应。

```
function send($params) {
    foreach($params as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
    rtrim($fields_string,'&');

    $ch = curl_init();
    curl_setopt($ch,CURLOPT_URL,'http://localhost/anotherfiletosendemail.php');
    curl_setopt($ch, CURLOPT_TIMEOUT, 1);
    curl_setopt($ch,CURLOPT_POST,count($params));
    curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);
    curl_exec($ch);
    curl_close($ch);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:27:01.840

您需要一个消息代理。[http://www.rabbitmq.com/](http://www.rabbitmq.com/)或[http://www.zeromq.org/](http://www.zeromq.org/)将为您提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T17:34:53.543

您可以创建一种方法来跟踪已邮寄的成员（例如数据库表上的布尔值），创建一个向 X 人发送邮件的脚本，并配置一个 cron 以每次 Y 次执行此脚本。

如果成员数量的增加没有减慢并且与您的示例相匹配，您将需要配置脚本和 cron 以每小时输出超过 1000 条消息（例如，如果脚本发送 100 条消息，它应该运行 10 次以上小时，所以大约每 5 分钟 1 次）。

如果成员数量的增长逐渐放缓，那么这取决于您必须确保所有成员都收到邮件的时间窗口有多大。

或者，使用像 Ogun 建议的消息代理。

# javascript - javascript：带有对象的公共数组

> ID：15008399
> 
> 赞同：0
> 
> 时间：2013-02-21T17:18:38.583
> 
> 标签：javascript, arrays

（对不起我的英语=/）我在“onload”时创建了一个数组。

（这：

```
var $ = {
    ratio: 0.7,
    screen: 500,
    margin: 10,
    canvas: document.getElementById("canvas"),
    ctx: document.getElementById("canvas").getContext("2d"),
} 
```

并且`$.canvas`给出`$.ctx`'null'。如果我重写它，这项工作

```
...
canvas: function(){return document.getElementById("canvas")}
... 
```

但是如果我想调用这个变量看起来像这样 $.canvas **()** 我怎么能在没有'()'的情况下创建这个变量？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:26:18.607

试试这个：

```
window.onload = function(){
    window.$ = {
        ratio: 0.7,
        screen: 500,
        margin: 10,
        canvas: document.getElementById("canvas"),
        ctx: document.getElementById("canvas").getContext("2d"),
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:32:44.520

看起来这是`$`变量范围的问题。`var`通过在函数内部用关键字声明它`window.onload`，它的作用域是局部函数而不是全局作用域。

您可以在 onload 函数之外定义它：

```
var $; // in the global scope

window.onload = function(){
    $ = {
        ratio: 0.7,
        screen: 500,
        margin: 10,
        canvas: document.getElementById("canvas"),
        ctx: document.getElementById("canvas").getContext("2d")
    };

    console.log($.canvas);
    console.log($.ctx);
}; 
```

通过在全局范围内声明它，可以从 onload 函数外部访问它。

[小提琴](http://jsfiddle.net/uZP8s/2/)

# javascript - jquery ui自动完成获取所选选项的值

> ID：15008400
> 
> 赞同：2
> 
> 时间：2013-02-21T17:18:41.517
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-autocomplete

如何将 jquery ui 自动完成创建的菜单中选定选项的值获取到变量中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T17:21:24.157

```
var value = $("#the_input_ID").val(); 
```

如果您想在选择一个值时收到通知，您可以使用如下代码：

```
var selected_value;
$( "#your_input_id" ).autocomplete({
   select: function(event, ui) {
        selected_value = $(ui).val();
   }
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T17:22:54.163

您用于创建自动完成的输入存储该值。

```
$("#myField").val(); 
```

或者，如果您使用该 ID 提交代码，您就会得到它。

# r - 函数总是返回数字（0）

> ID：15008406
> 
> 赞同：5
> 
> 时间：2013-02-21T17:18:52.733
> 
> 标签：r

我对 R 很陌生，所以如果这是一个非常简单的问题，我深表歉意。我尝试了谷歌搜索，但找不到似乎完全相关的示例（大多数示例只有 1 个函数参数）。

我有一个简单的函数表示二维的基本线性模型：

```
y <- function(x, w) {
  temp <- w[0] + x*w[1]
  return(temp)
} 
```

当我以我期望的方式使用它时，我得到：

```
> y(1,c(-0.3,0.5))
numeric(0) 
```

当我尝试不正确的输入时，同样的事情！

```
> y(1,2)
numeric(0) 
```

最终，我的目标是能够拥有一个可以作为参数传入的向量 X。例如：

```
> y(c(1,2,3,4),c(1,2)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T17:30:15.553

正如 joran 所指出的，这是因为 R 中的向量是 1-indexed。

谢谢，乔兰！（还有哦！）

# android - Android：在 ImageView 上更改图像时，Edittext 消失了

> ID：15008414
> 
> 赞同：0
> 
> 时间：2013-02-21T17:19:09.020
> 
> 标签：android, button, imageview, android-relativelayout, android-edittext

我是 Eclipse IDE 上的 android 应用程序开发新手。

我正在尝试制作一个基本应用程序，其中单击按钮时 ImageView 中的图像以及 EditText 中的文本分别替换为另一个图像和文本。

但是这样做时，主要是在应用程序启动时，顶部显示一个按钮，然后是 ImageView，然后是 EditText，它们工作正常，但是单击按钮时，只有图像被成功替换，而我的 EditText 消失了。你能帮我弄清楚为什么会发生这种情况以及如何纠正它吗？

xml文件：

```
<Button
    android:id="@+id/button1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/click_it" />

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button1"
    android:layout_below="@+id/button1"
    android:src="@drawable/prac" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignRight="@+id/imageView1"
    android:layout_below="@+id/imageView1"
    android:layout_marginTop="30dp"
    android:ems="10"
    android:text="hello!" >

    <requestFocus />
</EditText>

</RelativeLayout> 
```

.java文件：

```
package com.example.practicetwo;

import android.os.Bundle;
import android.app.Activity;
import android.view.*;
import android.widget.*;

public class MainActivity extends Activity {
Button b1;
ImageView iv1;
EditText et1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    b1 = (Button)findViewById(new R.id().button1);
    iv1 = (ImageView)findViewById(new R.id().imageView1);
    et1 = (EditText)findViewById(new R.id().editText1);
    b1.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            iv1.setImageResource(R.drawable.prac1);
            et1.setText("how r u?");
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:16:03.780

您的图像 prac1 可能大于屏幕大小，并且当您将 prac 替换为 prac1 时，`EditText`它会被向下推。尝试使用`LinearLayout`而不是`RelativeLayout`.

# c# - 并行内连接

> ID：15008415
> 
> 赞同：3
> 
> 时间：2013-02-21T17:19:10.210
> 
> 标签：c#, linq, plinq, parallel-extensions

我想使用 PLINQ 在产品和类别之间执行内部连接。但我不确定是否应该为这两个集合调用 AsParallel 方法。

```
// PLINQ  - Option 1
jointTables =     from c in Homework02.categories.AsParallel()
                  join p in Homework02.productList on c.Name equals p.Category
                  select new { Category = c, Product = p };

// PLINQ  - Option 2
jointTables = from c in Homework02.categories.AsParallel()
              join p in Homework02.productList.AsParallel() on c.Name equals p.Category
              select new { Category = c, Product = p }; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T17:24:24.810

您应该使用选项 2，即显式调用`AsParallel()`第二个序列。

从[MSDN 文档](http://msdn.microsoft.com/en-sg/library/dd384155%28v=vs.110%29.aspx)中关于`Join`第二个序列类型为 的重载`IEnumerable<TInner>`：

> 永远不应调用此 Join 重载。**此方法被标记为过时并且在调用时总是抛出 NotSupportedException。**

另请注意声明中的过时属性：

```
[ObsoleteAttribute(@"The second data source of a binary operator 
                    must be of type System.Linq.ParallelQuery<T> 
                    rather than System.Collections.Generic.IEnumerable<T>. 
                    To fix this problem, use the AsParallel() extension
                    method to convert the right data source to
                    System.Linq.ParallelQuery<T>.")]
public static ParallelQuery<TResult> Join<TOuter, TInner, TKey, TResult>(
    this ParallelQuery<TOuter> outer,
    IEnumerable<TInner> inner,
    Func<TOuter, TKey> outerKeySelector,
    Func<TInner, TKey> innerKeySelector,
    Func<TOuter, TInner, TResult> resultSelector
) 
```

# html - text_area 文本格式

> ID：15008417
> 
> 赞同：1
> 
> 时间：2013-02-21T17:19:17.040
> 
> 标签：html, css, ruby-on-rails, ruby

我正在为小型小学创建一个网页，教师可以在其中为儿童家长发布新帖子。网页很简单，我想保持简单，但是 text_area 有问题。在视图中，所有书面文本都在一个块中，但我想在换行中写一些句子，我该怎么做才能保持简单。我不想使用富文本编辑器来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:52:44.620

在您看来，使用`simple_format()`That 将显示所有输入的文本，包括空格和换行符。

我的一个应用程序的示例：

```
<div id="report-body">
    <%= simple_format(@report.body) %>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:24:47.780

使用`line feed`并`carriage return`放入`new line`（`text area`即）`&#13;&#10;`

例如：

```
<textarea>This is first line. &#13;&#10;</textarea> 
```

要添加`&#13;&#10;`文本区域，您需要实现一些`javascript`来创建键盘快捷键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T17:33:11.463

我不确定我是否正确地回答了您的问题；我认为这是一个关于css的问题。我认为您只需要提供此属性：

```
white-space: pre; 
```

在 textarea 的 CSS 中。然后，所有空格，包括回车，都将显示在文本区域中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T17:48:02.297

为简单起见，将文本包装在 html 标记中，您还可以添加简单的 CSS 并根据需要设置页面样式。

```
<p> This is your paragraph </p>
<h1> This is your heading </h1> 
```

使用`<br>`标签换行

# asp.net-mvc - 将初始数据从 ASP.NET MVC 4 控制器操作方法 ast 列表传递给 initialData

> ID：15008424
> 
> 赞同：0
> 
> 时间：2013-02-21T17:19:40.147
> 
> 标签：asp.net-mvc, asp.net-mvc-4, knockout.js

我的主控制器中有一个动作结果，如下所示：

```
 public ActionResult Reports()
    {
        List<AModel> aList = _da.GetList();
        return View(aList);
    } 
```

我想在 initialData 中将其捕获为对象列表以进行淘汰。

```
 //here is the issue I don't know how to pass it.
    var initialData = '@Html.Raw(Json.Encode(Model))'; 
```

我想像这样绑定它：

```
 ko.applyBindings(new PagedGridModel(initialData)); 
```

任何帮助谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:56:12.637

三是另一个干扰这个的脚本。一旦我找出造成这种情况的原因，我会及时通知你。

# jquery - 选中最近的收音机时更改 DIV 背景

> ID：15008427
> 
> 赞同：1
> 
> 时间：2013-02-21T17:19:51.663
> 
> 标签：jquery, css, html, border, radio

我已经有了这个，可以更轻松地选择单选框

```
$("div.column43").click(function () {
$(this).find('input:radio').attr('checked', true);
}); 
```

我希望 div 的背景/边框在选择其中的收音机时发生变化。

我可以让边框在悬停时更改没有问题，但我希望它保持更改直到它被取消选择。

这是页面上的格式

```
<div class="row43">
                <div class="column43">
                    <input id="box21" type="radio" name="box21" 
value="" checked> <label for="box21">Any/All</label>    
                </div>
                <div class="column43">
                    <label for="box22">1.0</label><input 
id="box22" type="radio" name="box21" value="1.0">
                </div>
                <div class="column43">
                    <label for="box23">1.1</label><input 
id="box23" type="radio" name="box21" value="1.1">   
                </div></div> 
```

这是悬停效果的CSS

```
div.row43:hover > div {
opacity: 0.5;
}
div.row43:hover > div.column43:hover {
opacity: 1.0;
}
div.row43:hover {
border-color: #0099ff;
}
div.column43:hover {
opacity: 0.5;
border-color: #0099ff;
} 
```

对于我的生活，我看不到如何在选择收音机和鼠标移开时保持边框效果。

如果有人可以让我知道使用实际课程需要做什么，那就太棒了

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:26:34.083

如果您可以将标签放在单选按钮之后，您可以完全使用 CSS 来做到这一点：

```
input[type="radio"]:checked+label {
    background:#faa;
    border:1px solid red;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/enE7G/)**

If not, using jQuery you can do it like this:

```
$("div.column43").click(function () {
    $(this).parent('div.row43').find('label').removeClass('highlight');
    $(this).find('input:radio').attr('checked', true);
    $(this).find('label').addClass('highlight');
}); 
```

**[jsFiddle example](http://jsfiddle.net/j08691/enE7G/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:21:02.307

试试这个：

```
$(':radio:checked').closest('div').addClass('selected'); 
```

或使用`.css()`：

```
$(':radio:checked').closest('div').css({
                                        'border':'solid 1px red', 
                                        'background': '#e2e2e2'
                                       }); 
```

最后应该是这样的：**[结帐小提琴](http://jsfiddle.net/hs7Br/)**

```
$(':radio').change(function () {
    $(this).parent().removeClass('selected');
    $(':radio:checked').closest('div').addClass('selected');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T17:28:41.707

You need to create an event for the radio buttons and then set the background-color of the parent.

```
$('div.column43').find('input[type=radio]').change(function() {
  if ($(this).prop('checked')) {
    $(this).parent().css('background-color', 'red'));
  }
}); 
```

# objective-c - 我可以通过查询服务器的 HTTP 标头来获取服务器的服务器时间吗？

> ID：15008432
> 
> 赞同：1
> 
> 时间：2013-02-21T17:20:02.530
> 
> 标签：objective-c, http, networking

说，我可以得到`http://www.google.com`的服务器时间吗？

如何在 ObjC 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:31:56.560

当然：

```
NSURLRequest *rq = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.google.com"]];
[NSURLConnection sendAsynchronousRequest:rq queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *resp, NSData *data, NSError *err) {
    NSDictionary *headers = [(NSHTTPURLResponse *)resp allHeaderFields];
    NSString *dateString = [headers objectForKey:@"Date"];
    NSLog(@"Google Server Date: %@", dateString);
}]; 
```

# iphone - 隔行转换为 UIImage PNG 格式

> ID：15008433
> 
> 赞同：2
> 
> 时间：2013-02-21T17:20:01.723
> 
> 标签：iphone, ios

是否有可能将`NSData *dataImage`女巫转换为 jpeg 或 png 格式并将其转换为隔行扫描的 PNG？我知道压缩图像`UIImagePNGRepresentation`，但我认为它只转换为非隔行 PNG。那么，我应该如何将 UIImage 或 NSData 的选项设置为隔行扫描 PNG？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:34:34.243

`UIImagePNGRepresentation`只制作非隔行的 png。好问题，但我认为使用 UIKit 是不可能的。

我认为你应该使用[libpng](http://www.libpng.org/pub/png/libpng-1.2.5-manual.html)来创建隔行扫描的 png。

* * *

看这篇[文章](http://ironalbatross.net/wiki/index.php5?title=CPP_LIBPNG)，在那里你可以找到*编写PNG文件的最小示例*

当您在此方法中设置 png 标头时

```
png_set_IHDR(png_ptr, info_ptr, width, height,
            bit_depth, color_type, PNG_INTERLACE_NONE,
            PNG_COMPRESSION_TYPE_BASE, PNG_FILTER_TYPE_BASE); 
```

尝试更改`PNG_INTERLACE_NONE`为`PNG_INTERLACE_ADAM7_PASSES`

# android - Android SQlite 访问速度不够快？

> ID：15008435
> 
> 赞同：0
> 
> 时间：2013-02-21T17:20:07.100
> 
> 标签：android, sqlite, udp

我的应用程序有一个奇怪的问题。

我必须将 DB 条目从电话 1 上的 DB 发送到电话 2 上的 DB。进程很智能，因为它只发送丢失的条目，所以如果在 DB 1 中有 10 个条目，而在 DB 2 中有 0 个条目，它发送 10 个条目，但如果电话 2 仅收到其中的 5 个（出于任何原因），则下次仅发送 5 个丢失的条目。条目与 UDP 消息一一发送。事实是，我在第一次尝试时永远无法在第二部手机上收到所有条目，我必须尝试多次，每次只能收到 3-4 个。消息没问题，我可以在发送端和接收端看到它们，所以我猜这是一个数据库问题！对于到达的消息率，数据库是否可能无法足够快地添加行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T17:33:07.483

听起来好像您在发送数据库条目之间等待的时间不够长。您可以延长该时间，也可以在单个事务中执行所有插入。当您不使用事务时，插入完全有可能花费一秒钟以上。

```
 db.beginTransaction();
   try {
     // Insert all the records here
     db.setTransactionSuccessful();
   } finally {
     db.endTransaction();
   } 
```

# database-design - 在 Cassandra 中设计/使用用户表并创建帐户

> ID：15008441
> 
> 赞同：1
> 
> 时间：2013-02-21T17:20:20.083
> 
> 标签：database-design, cassandra

我是 Cassandra 的新手，我开始设计一个简单的用户表用于帐户注册和登录目的。这很简单：

行键：用户名；列：电子邮件、姓名、密码、盐。
或者：
行键：uuid；列：用户名、电子邮件、姓名、密码、盐。

关于这个简单的结构，我有两个问题：

1.  我需要一个用于查找电子邮件（和用户名）的索引。我可以使用二级索引或手动创建索引。由于电子邮件/用户名列的基数很高，我应该选择第二个选项吗？显然二级索引适用于低基数列。
2.  更重要的是，我立即遇到了同时向表中插入键的问题——我需要先读后写以确保用户名（或电子邮件）不在数据库中。有没有办法避免潜在的竞争条件（例如两个用户同时注册相同的用户名/电子邮件）？还是使用额外的关系数据库来处理用户注册并将用户帐户详细信息复制到 cassandra 数据库以用于登录和其他目的的正确解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:49:04.093

1.  是的，出于您陈述的原因，您需要创建自己的索引。电子邮件和用户名将是唯一的，因此不适合二级索引。

2.  在任何需要唯一值的情况下，您都必须在写入之前读取。由于两个用户同时选择相同用户名的情况可能很少见（取决于您的流量），您可以交叉手指并希望它有效。或者，您可以遵循以下流程：

    *   阅读以检查用户是否存在
    *   如果它不存在，请写入记录并保留您使用的时间戳
    *   再次读取用户并比较时间戳
    *   如果时间戳不正确（暗示遵循相同流程的其他人覆盖了第一条记录），提示用户提供不同的名称

#2 中的流程将具有在时间窗口内写入相同用户名的第二个用户将获胜的效果，但我认为这没关系，只要您告诉至少一个用户该名称已被使用。

# php - 基本 PHP 搜索...需要重置脚本

> ID：15008442
> 
> 赞同：0
> 
> 时间：2013-02-21T17:20:25.333
> 
> 标签：php, forms, search

我对 PHP**很**陌生，所以请忍受我的无知。我有以下脚本可以在 Excel 表中搜索单元格数据（这是一个非常基本的公司电话簿）：

```
 <html>
<?php echo "Search:" ?>
<form id="form1" method="post" action ="<?php echo $_SERVER['PHP_SELF']; ?>"> <label>
<input id="search" name="search" type="text" />
</label>
<label>
<input type="submit" />
</label>
<img src="loading.gif" width="16" height="11" />
</form>
<input type="reset" value="Reset">
<?php
$search= $_REQUEST['search'];
if ($search > ''){ $search = $search;} else { $search = '';}
?>
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type="text/javascript">
google.load('visualization', '1', {packages: ['table']});
</script>
<script type="text/javascript">
var visualization;

function drawVisualization() {

var query = new google.visualization.Query(
'https://docs.google.com/spreadsheet/pub?key=0Ap2dozrbYI5vdEV5ZmtzU3hCdktzWDU0NTdOQjRSNkE&single=true&gid=0&output=html');

query.setQuery('SELECT A, B, C, D where upper(A) like upper("%<?php echo $search; ?>%") or upper(B) like upper("%<?php echo $search; ?>%") order by A asc label A "Company", B "Contact Name", C "Contact Number", D "Company General Contact"');

query.send(handleQueryResponse);
}

function handleQueryResponse(response) {
if (response.isError()) {
alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
return;
}

var data = response.getDataTable();

visualization = new google.visualization.Table(document.getElementById('table'));
visualization.draw(data, {legend: 'bottom'});

    }

    google.setOnLoadCallback(drawVisualization);
    </script>

    <div id="table"></div>

    </div>
    </html> 
```

当没有输入文本并且用户单击提交时，视图将重置以显示完整的 Excel 工作表。我想添加一个功能相同的重置按钮（对用户来说，拥有一个实际的“重置”按钮更有意义。

编辑：请注意，我**并不是**要简单地清除搜索输入。本质上，我想复制执行空白搜索时提交按钮的作用（即显示所有数据）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:25:47.703

将此行添加到您的 html 表单中：

```
<input type="reset" value="Reset"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:59:51.307

这里有许多问题需要解决。我已经清理了您发布的一些代码，但我不想完全重写您所做的一切。看起来您可能已经将您在网络上找到的几个示例复制并粘贴到一个项目中。如果您在将脚本投入生产之前查看脚本的功能，这真的很有帮助。这样做将帮助您解决其中一些问题。例如，在一行中，您检查一个变量以查看它是否大于空字符串。然后，如果是，则将其分配给自身，如果为空，则将其分配给空字符串。基本上，那条线什么都不做。通读你的代码，这样你就知道它做了什么。

最后，我发现您实际上并不需要 PHP。您只是使用它来回发到服务器并重新加载页面。由于您使用 JavaScript 来实际加载您的信息，因此我决定用 JavaScript 完成所有操作。它使页面更简单，并防止不必要的回发。我还对您的代码进行了一些格式化并对其进行了一些清理。但是，这还需要进一步细化和清理。我刚刚让它进入工作状态：

```
<html>
    <body>
        <input id="search" name="search" type="text" />
        <button id="submitQuery">Submit Query</button>
        <button id="resetQuery">Reset Query</button>
        <div id="table"></div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script type="text/javascript" src="http://www.google.com/jsapi"></script>
        <script type="text/javascript">
            google.load('visualization', '1', { packages: ['table'] });

            var visualization;
            var searchTerm = '';

            function drawVisualization() {
                var query = new google.visualization.Query(
                'https://docs.google.com/spreadsheet/pub?key=0Ap2dozrbYI5vdEV5ZmtzU3hCdktzWDU0NTdOQjRSNkE&single=true&gid=0&output=html');
                query.setQuery('SELECT A, B, C, D where upper(A) like upper("%' + searchTerm + '%") or upper(B) like upper("%' + searchTerm + '%") order by A asc label A "Company", B "Contact Name", C "Contact Number", D "Company General Contact"');
                query.send(handleQueryResponse);
            }

            function handleQueryResponse(response) {
                if (response.isError()) {
                    alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
                    return;
                }

                var data = response.getDataTable();

                visualization = new google.visualization.Table(document.getElementById('table'));
                visualization.draw(data, { legend: 'bottom' });
            }

            google.setOnLoadCallback(drawVisualization);

            $(function () {
                $('#submitQuery').click(function (e) {
                    searchTerm = $('#search').val();
                    drawVisualization();
                    return false;
                });
                $('#resetQuery').click(function (e) {
                    $('#search').val('');
                    searchTerm = '';
                    drawVisualization();
                    return false;
                });
            });
        </script>
    </body>
</html> 
```

我没有使用表单中的按钮进行回发，而是让按钮适当地填充变量并调用函数来绘制可视化。我确实在 jQuery 中绘图以使事情变得更容易一些（请注意对 CDN 的调用）。这使代码更简洁，更易于使用。你不必那样做，但如果你把它拿出来，你需要重新编写我的代码。

如果您有任何问题，请告诉我。就目前而言，此代码应该完全按照您的意愿执行。

# php - 服务器尝试下载主页 - 其他页面/文件显示正常

> ID：15008448
> 
> 赞同：1
> 
> 时间：2013-02-21T17:20:39.940
> 
> 标签：php, linux, apache, mod-rewrite

在我们的 Linux 测试服务器上从 php 4 升级到 php 5 之后，服务器现在会提示用户并在我们导航到 test.domain-name.org 时尝试下载主页。如果我专门指向索引文件，则没有问题，页面显示正常。仅当我们仅访问 test.domain-name.org 时才会出现问题。这会生成一个下载提示。如果我导航到特定于页面的 url，例如 test.domain-name.org/index.html 或 test.domain-name.org/index.php，页面加载正常。Linux 人说他将服务器设置为与其他没有问题的服务器相同。作为 php 人，我回答说我的代码和 mod_rewrite 与我们其他没有问题的站点相同。我能够读取 phpinfo 文件。Apache 版本是 2.2.23。PHP 版本是 5.3.21。我读过其他帖子，但这个问题似乎与其他帖子不同。

```
 RewriteRule ^/?(index.html)?$ index.php [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:39:28.917

签`DirectoryIndex`入apache配置文件`httpd.conf`

```
# DirectoryIndex: sets the file that Apache will serve if a directory
# is requested.
#
# The index.html.var file (a type-map) is used to deliver content-
# negotiated documents.  The MultiViews Option can be used for the
# same purpose, but it is much slower.
#
DirectoryIndex index.html index.html.var index.php 
```

conf 文件如下所示：

```
LoadModule php5_module /usr/lib/httpd/modules/libphp5.so
AddType application/x-httpd-php .php
DirectoryIndex index.php 
```

确保您的文件中没有`IndexIgnore *`web`.htaccess`目录：

> 阅读它[IndexIgnore](http://httpd.apache.org/docs/2.2/mod/mod_autoindex.html#indexignore)
> 
> 有用的链接 [IndexIgnore * 或 Options -Indexes](https://stackoverflow.com/questions/14062641/indexignore-or-options-indexes)

# entity-framework - 使用 EF 和 WebAPI，如何返回 ViewModel 并支持 IQueryable/OData？

> ID：15008450
> 
> 赞同：12
> 
> 时间：2013-02-21T17:20:46.153
> 
> 标签：entity-framework, asp.net-web-api, odata, iqueryable

我有一个 ASP.NET WebAPI 项目。我最近为我的所有数据表创建了 EntityFramework 实体。但我不想将我的数据层和架构暴露给我的用户。如何将我的实体映射到 ViewModel（自动映射器？）*并*提供 IQueryable 返回类型，以便我的 API 支持 OData？

OData 支持查询组合和类似 SQL 的参数。我想我需要为查询组合部分提供某种双向翻译？这是否意味着自定义 LINQ 提供程序？我希望它比那更容易。

还是我应该放弃 IQueryable/OData？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T17:53:13.830

我在这里找到了答案：[Web API Queryable - 如何应用 AutoMapper？](https://stackoverflow.com/questions/14484692/web-api-queryable-how-to-apply-automapper)

`[Queryable]`您可以使用类型参数代替使用，`ODataQueryOptions<T>`以针对您希望的任何类型或 LINQ 查询应用 OData 操作。这是一个很好的例子，它甚至不需要使用 AutoMapper：

```
public virtual IQueryable<PersonDto> Get(ODataQueryOptions<Person> odataQuery){
    odataQuery.Validate(new ODataValidationSettings(){
        AllowedFunctions = AllowedFunctions.AllMathFunctions
    });
    var people = odataQuery.ApplyTo(uow.Person().GetAll());
    return ConvertToDtos(people);
} 
```

这是解释此用法细节[的 Microsoft 页面。](http://www.asp.net/web-api/overview/odata-support-in-aspnet-web-api/supporting-odata-query-options)（大约下降一半）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-01T09:29:00.427

我能够使用 ViewModel 类成功地对此进行测试。

```
public class InvoiceViewModel
{
    public int InvoiceID { get; set; }
    public string InvoiceNumber { get; set; }
} 
```

在 Get 中，从您的实体中选择到您的视图模型中：

```
public override IQueryable<InvoiceViewModel> Get()
    {
        var ctx = new CreditPointEntities();
        return ctx.Invoices.Select(i => new InvoiceViewModel
            {
                InvoiceID = i.InvoiceID,
                InvoiceNumber = i.InvoiceNumber
            }).AsQueryable();
    } 
```

确保在 webapiconfig.cs 的模型构建器行中使用视图模型

```
modelBuilder.EntitySet<InvoiceViewModel>("Invoice"); 
```

有了这个，你可以使用一个像

`http://website/odata/Invoice?$filter=InvoiceID eq 1`

我通过 sql profiler 确认过滤器正在传递给 SQL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T17:34:50.057

如果您使用的是 Automapper，则可以在其中使用投影。例子：

```
 public class ProductsController : EntitySetController<Product, int>
    {
         private DbProductsContext _db = new DbProductsContext();

         public override IQueryable<ProductDto> Get()
         {
            return _db.Products.Project().To<ProductDto>();
         }
    ... 
```

# java - 为什么 if 条件在 AyncTasks 的 onPostExecute() 中完全没用？

> ID：15008454
> 
> 赞同：0
> 
> 时间：2013-02-21T17:20:56.807
> 
> 标签：java, android, if-statement, android-asynctask

我的应用程序中有一个 AsyncTask 类，但我注意到无论传递给 onPostExecute 函数的结果是什么，它仍然会指示应用程序转到 else{}，即使它完全符合 if 语句。为什么会这样？

这是我正在运行的 AsyncTask：

```
class CheckPassword extends AsyncTask<String, String, String>{

@Override
protected void onPreExecute() {
    super.onPreExecute();
    pDialog = new ProgressDialog(ChooseTable.this);
    pDialog.setMessage("Checking Password. Please wait...");
    pDialog.setIndeterminate(false);
    pDialog.setCancelable(false);
    pDialog.show();
}

@Override
protected String doInBackground(String... p) {
    String password = p[0];
    int success;
    String access = "";

    try {
        // Building Parameter
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("password", password));

        //ipaddress of server

        Intent i = getIntent();
        Bundle b = i.getExtras();
        ipaddress = b.getString("IP_Address");

        if(ipaddress != "" || ipaddress != "...:")
        {
            // single table url
            String url = "http://"+ipaddress+"/MenuBook/checkSpecial.php";
            Log.d("URL", url + "");

            JSONObject json = jsonParser.makeHttpRequest(
                    url, "GET", params);
            Log.d("JSON OBJECT", json+"");
            // json success tag
            success = json.getInt(TAG_SUCCESS);
            if (success == 1) {
                // successfully received table details
                JSONArray result = json
                        .getJSONArray("result"); // JSON Array

                // get table availability from JSON Array
                JSONObject accessObj = result.getJSONObject(0);
                access= accessObj.getString("allowAccess");

            }
            else
            {
                status = "TABLE NOT FOUND";
            }
        }
        else
        {
            status = "FAILED TO RETRIEVE SERVER IP ADDRESS";
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }
    Log.d("ALLOW ACCESS", access+"");
    return access;
}

@Override
protected void onPostExecute(String result) {
    pDialog.dismiss();
    Log.d("RESULT", result+"");
    if(result == "YES"){
        Toast.makeText(ChooseTable.this, "ACCESS ALLOWED", Toast.LENGTH_LONG).show();
    }else if (result== "NO"){
        Toast.makeText(ChooseTable.this, "Access Denied", Toast.LENGTH_LONG).show();
    }else{
        Toast.makeText(ChooseTable.this, status, Toast.LENGTH_LONG).show();
    }

}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T17:23:15.197

您需要使用该`equals`方法来比较两个字符串：

```
if (result.equals("YES")) 
```

和

```
if (result.equals("NO")) 
```

# c# - 如何在 SQLite 数据库中存储 Windows.UI.Color 对象？

> ID：15008455
> 
> 赞同：1
> 
> 时间：2013-02-21T17:21:00.847
> 
> 标签：c#, sqlite, xaml, colors, windows-store-apps

我正在使用 a`SQLite Datatabase`来存储我`Windows 8 Store App`开发的数据`C# and XAML`。

现在我正在寻找一种简单的方法来存储`Color`应该用作此数据库中的 XAML `Color`( **Windows.UI.Color ) 的对象。**所以我认为在这种情况下我必须**将`Color`对象转换为字符串或整数**！？

我可以将`Color`with`ToString()`方法转换为字符串表示形式，但如何将其转换回来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T16:49:13.423

我正在尝试使用以下答案来帮助您。

1.  假设您希望存储 ColorObject.ToString() 值，例如 #659EBCF5
2.  随意将它保存在 SqlLite 中作为 varchar aka 字符串。
3.  当您需要它时，从 Sqlite 中读取并将其存储到一个变量中，比如 colorString。

假设 colorString = "#659EBCF5";

...

```
colorString = colorString.Substring(1, colorString.Length - 1);//remove the #
        System.Globalization.NumberStyles style = System.Globalization.NumberStyles.HexNumber;
        int hexColorAsInteger = int.Parse(colorString , style);
        byte[] colorData = BitConverter.GetBytes(hexColorAsInteger);

        //Mind the order.
        byte alpha = colorData[3];
        byte red = colorData[2];
        byte green = colorData[1];
        byte blue = colorData[0];

        Color color = Color.FromArgb(alpha, red, green, blue); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T17:24:51.383

对此的解决方案是将 ARGB 字节值存储在数据库中，然后您可以使用该`Color.FromArgb(a, r, g, b)`方法从这些存储的字节值中获取颜色。

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.color.fromargb](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.color.fromargb)

# jquery - 可以在 jQuery 中使用“窗口”作为事件总线吗？

> ID：15008464
> 
> 赞同：7
> 
> 时间：2013-02-21T17:21:16.660
> 
> 标签：jquery

我一直在使用 jQuery 的事件方法，并使用以下代码构建了一个简单的事件总线：

```
$(window).on('test:event', function (event, data) {
    console.log('Saw a test event: event=%o, data=%o', event, data);
});

$(window).trigger('test:event', {test_data: 'foo'}); 
```

我的问题是，使用“窗口”管理事件有什么问题吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T17:25:19.140

是的，这是在 DOM 冒泡上下文之外使用自定义 jQuery 事件的强大功能的好方法。但它也可以通过使用空对象而不是窗口来更有效地完成（无需查询 DOM，因为这会提高性能并且与*我假设*的要求无关）。`{}`

[Ben Alman](http://benalman.com/)编写了一个很棒的[jQuery 插件](https://gist.github.com/cowboy/661855)，用于以这种方式管理事件，它避开了一些不相关的 jQuery 事件元素，同时使用相同的原理来实现轻量级的[发布/订阅模式](http://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)（侦听和触发由字符串定义的事件，以及可选的额外任意数据之间通过）。

# nosql - Breeze：复杂图仅返回 1 个集合

> ID：15008469
> 
> 赞同：0
> 
> 时间：2013-02-21T17:21:26.750
> 
> 标签：nosql, breeze

我有一个看起来像这样的医生图表：

![医师图](../Images/3dd7a5280955d1c02573c995db7c78e8.png)

我用来从 WebApi 后端获取数据的查询如下所示：

```
 var query = new breeze.EntityQuery().from("Physicians")
    .expand("ContactInfo")
    .expand("ContactInfo.Phones")
    .expand("ContactInfo.Addresses")
    .expand("PhysicianNotes")
    .expand("PhysicianSpecialties")
    .where("ContactInfo.LastName", "startsWith", lastInitial).take(5); 
```

（注意 ContactInfo 是 People 对象的化名）

我发现如果我请求扩展 Contact.Phones，我将只得到电话，而没有 Notes 或 Specialties。如果我注释掉电话，我会得到 Contact.Addresses 而没有其他集合。如果我将 ContactInfo 连同电话和地址一起注释掉，我只会得到笔记等。从本质上讲，似乎我一次只能得到一个集合。

那么，这是一个内置的“不要让程序员在脚上开枪”吗？保障还是我必须启用某些东西？

还是这张图太复杂了？？我应该考虑使用 NoSql 对象存储吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:36:52.503

您需要将所有扩展子句放在一个单独的子句中，如下所示：

```
var query = new breeze.EntityQuery().from("Physicians")
    .expand("ContactInfo, ContactInfo.Phones, ContactInfo.Addresses, PhysicianNotes, PhysicianSpecialties")
    .where("ContactInfo.LastName", "startsWith", lastInitial).take(5); 
```

您可以在此处查看文档：[http ://www.breezejs.com/sites/all/apidocs/classes/EntityQuery.html#method_expand](http://www.breezejs.com/sites/all/apidocs/classes/EntityQuery.html#method_expand)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:08:59.833

JY告诉你*如何*。但要*注意*性能后果......无论是在数据层还是在网络上。一次抓得太宽太深，你可能会死得很惨。

`take(5)`我在他的样本中看到了。这对于限制失控的请求至关重要（您确实必须在服务器上执行此操作）。一般来说，我会为提取单个根实体的查询保留这种类型的扩展图提取。如果我要呈现一个供选择的列表并且我需要来自实体图不同部分的数据，我会使用投影来准确获取我需要显示的内容（当然，假设没有现成的 SQL 视图可用于这个目的）。

如果任何相关项目是参考列表（颜色、状态、状态等），请考虑在准备步骤中将它们单独放入缓存中。不要将它们包含在`expand`; Breeze 会在客户端自动将它们连接到您查询的实体。

最后，作为语法问题，您不必重复段的名称。当您编写“ContactInfo.Phones”时，您会同时获得 ContactInfos 和 Phones，因此您不需要单独指定“ContactInfo”。

# asp.net - Asp.Net 缓存特定的查询字符串参数，而不是其他

> ID：15008477
> 
> 赞同：1
> 
> 时间：2013-02-21T17:22:07.700
> 
> 标签：asp.net, caching, outputcache

我不知道如何在下面发布的不同 URL 格式下缓存此页面。

我想缓存这些页面：

```
/folder/
/folder/?page=2
/folder/?id=17
/folder/?id=17&page=2 
```

我根本不希望缓存具有查询字符串参数“搜索”的页面。

```
/folder/?search=1&param1=1&param2=2 
```

我查看了 OutputCache 的 VaryByCustom 参数，但我不知道如何阻止底部 URL 被缓存。

**编辑**- 示例页面

```
<%@ Page Language="vb" AutoEventWireup="false" CodeBehind="cache.aspx.vb" Inherits="cache" %>
<%@ OutputCache Duration="3600" VaryByParam="page;id" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<body>

    <%=date.now %>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-21T17:26:33.263

您只需要指定要缓存的查询字符串参数。尝试使用 VaryByParam 属性并将其设置为以分号分隔的字符串列表；在您的情况下，请尝试以下操作。

VaryByParam = "页面，参数 1，参数 2"

# php - 无法获取 Facebook 粉丝页面访问令牌

> ID：15008478
> 
> 赞同：1
> 
> 时间：2013-02-21T17:22:10.547
> 
> 标签：php, facebook-graph-api, facebook-php-sdk, facebook-access-token, facebook-page

我正在尝试从 CMS 在 Facebook 粉丝页面上发布内容。我只是试图获取该页面的访问令牌而浪费了时间。我正在使用最新的**php facebook SDK** (Facebook PHP SDK (v.3.2.2))

我以权限登录：`manage_pages`，如果我这样做`$Facebook->getUser()`，我将获得我的 facebook `userID`。

然后我执行这个：

```
$fanPage = $Facebook->api('/' . $PAGE_ID .  '?fields=access_token&access_token='. $Facebook->getAccessToken()); 
```

我收到一个数组，`pageID`只有一个，没有一个`access_token`.

如果我尝试这段代码：

```
$fbUser = $Facebook->api('/me/permissions?access_token=' . $Facebook->getAccessToken()); 
```

它使我的 Facebook 会话无效，我必须再次通过 Facebook 登录。

这是几个月前的工作，刚刚停止。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T14:35:56.137

```
$facebook = new Facebook(array('appId' =>'app_id', 'secret' =>'app_secret',));
$facebook -> setAccessToken($access_token);
$res= $facebook -> api("/YOUR_PAGE_ID?fields=access_token", "GET");

$page_access_token = $res["access_token"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:03:15.693

要获取所有页面及其`access_token`值，您必须调用此 API

```
$facebook = new Facebook(array('appId' =>'app_id', 'secret' =>'app_secret',));
$facebook -> setAccessToken($access_token);
$res = $facebook -> api("/me/accounts", "GET"); 
```

然后你有一个包含所有页面的**数组，它是**`access_tokens`

# javascript - 读取离线时触发回退的 URL

> ID：15008483
> 
> 赞同：0
> 
> 时间：2013-02-21T17:22:20.050
> 
> 标签：javascript, html, html5-appcache

我有一个在没有网络连接的设备上离线运行的网络应用程序。

HTML5 AppCache 会加载所需的资源和页面 URL，但是当用户选择尚未加载的页面时，会加载备用页面。

我需要的是一种让该后备页面上的 JavaScript 函数查看触发它的先前 URL 的方法。

我很难找到一种机制来做到这一点。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:07:13.217

`document.referrer`

应该给你最后访问的页面。

# jsf - 使用 p:selectOneMenu 导航

> ID：15008487
> 
> 赞同：5
> 
> 时间：2013-02-21T17:22:28.877
> 
> 标签：jsf, jsf-2, primefaces, navigation, selectonemenu

我正在使用选择一个菜单导航到我网站的不同部分：

```
<p:selectOneMenu value="#{navigator.outcome}">                      
    <f:selectItem itemLabel="Select page..." />
    <f:selectItem itemValue="page1" itemLabel="Page 1" />
    <f:selectItem itemValue="page2" itemLabel="Page 2" />
    <f:selectItem itemValue="page3" itemLabel="Page 3" />
    <p:ajax event="change" listener="#{navigator.navigate}" />
</p:selectOneMenu> 
```

有没有更 SEO 友好的方式来做到这一点？我担心 JavaScript 链接不会被关注。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T18:31:08.440

使用自定义内容，`<p:column>`其中带有`<h:link>`.

豆：

```
private List<Page> pages;

@PostConstruct
public void init() {
    pages = new ArrayList<Page>();
    pages.add(new Page("Page 1", "/page1.xhtml"));
    pages.add(new Page("Page 2", "/page2.xhtml"));
    pages.add(new Page("Page 3", "/page3.xhtml"));
} 
```

看法：

```
<p:selectOneMenu var="page">
    <f:selectItems value="#{bean.pages}" var="page" itemLabel="#{page.title}" />
    <p:column>
        <h:link value="#{page.title}" outcome="#{page.viewId}" />
    </p:column>
</p:selectOneMenu> 
```

请注意，这不适用于`List<SelectItem>`单个`<f:selectItem>`条目。您确实需要提供一个`List<Entity>`（`Entity`在`Page`上面的示例中）。

这会生成一个`<table>`具有完整且可抓取（且可点击！）的`<a>`元素。

### 也可以看看：

*   [重定向和导航/转发之间有什么区别以及何时使用什么？](https://stackoverflow.com/questions/11277366/what-is-the-difference-between-redirect-and-navigation-forward-and-when-to-use-w)
*   [如何在 JSF 中导航？如何使 URL 反映当前页面（而不是上一个页面）](https://stackoverflow.com/questions/15521451/how-to-navigate-in-jsf-how-to-make-url-reflect-current-page-and-not-previous-o/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T16:18:33.973

只需创建函数导航为：

```
<p:selectOneMenu value="#{navigator.outcome}">                      
    <f:selectItem itemLabel="Select page..." />
    <f:selectItem itemValue="page1" itemLabel="Page 1" />
    <f:selectItem itemValue="page2" itemLabel="Page 2" />
    <f:selectItem itemValue="page3" itemLabel="Page 3" />
    <p:ajax event="change" listener="#{navigator.navigate}" />
</p:selectOneMenu>

public void navigate() {
    FacesContext context = FacesContext.getCurrentInstance();
    NavigationHandler navigationHandler = context.getApplication()
            .getNavigationHandler();
    navigationHandler.handleNavigation(context, null, outcome
            + "?faces-redirect=true");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T19:19:44.100

有很多方法可以实现您想要的。首先，我将描述您的方法的替代方案，然后将发表一些关于 SEO 的评论。

## 在更改事件上使用普通表单提交

首先，当用户在更改事件上隐式提交表单时，您可以通过普通表单提交来处理导航：

```
<h:form>
    <h:selectOneMenu value="#{bean.currentPage}" converter="pageConverter" onchange="submit()">
        <f:selectItems value="#{bean.pages}" var="page" itemLabel="#{page.name}" />
    </h:selectOneMenu>
    <h:commandButton value="submit" action="#{bean.handleNavigation}" style="display:none"/>
</h:form> 
```

和

```
@FacesConverter("pageConverter") 
```

和托管 bean ( `@ManagedBean Bean`) 与

```
private List<Page> pages;
private Page selectedPage;

public String handleNavigation(){
    //do some job before navigation
    return (selectedPage == null) ? null : selectedPage.getUrl();
} 
```

和模型类

```
class Page {
    private String name;//title in links
    private String url;//JSF view-id
} 
```

## 在有意义的客户端按钮单击上导航

您可以使用您的保管箱来保留用户选择的选择，并有一个按钮来执行导航：

```
<h:form>
    <h:selectOneMenu value="#{bean.currentPage}" converter="pageConverter">
        <f:selectItems value="#{bean.pages}" var="page" itemLabel="#{page.name}" />
    </h:selectOneMenu>
    <h:commandButton value="Navigate" action="#{bean.performNavigation}"}/>
</h:form> 
```

与上述相同的模型。

## 基于`<h:link>`s的导航

您是否使用简单`<h:link>`的 s 导航作业：

```
<ul>
    <ui:repeat var="page" value="#{bean.pages}>
        <li>
            <h:link value="#{page.name}" outcome="#{page.url}" />
        </li>
    </ui:repeat>
</ul> 
```

并相应地设置此菜单的样式。

## 搜索引擎优化评论

如今，搜索引擎优化越来越重要，因此遵守其规则至关重要。除了使用上面的（基本）类命名页面链接之外，使用 url 重写解决方案也很重要`Page`，以便用户`www.site.com/contact-us`在他的浏览器中看到而不是`www.site.com/contact.xhtml`.

遵循恕我直言的最简单方法是使用[Prettyfaces](http://ocpsoft.org/prettyfaces/)，这是一个很好的解决方案，符合我的口味。它允许您非常轻松地设置重写的 url（并在 JSF 组件中重写所有内部 url）。

为了增强您的站点 SEO 组件，您可以`seoUrl`在`Page`模型类中引入一个字段，然后有一个 Prettyfaces 映射，它将在 Web 浏览器的地址栏中显示 SEO 友好的 url (ie `www.site.com/contact-us`) 而不是 JSF view-id (ie )。`www.site.com/contact.xhtml`

# ***编辑***- 关于需要重写 URL 的争议

## Google 提出的一些 SEO 友好规则的背景，这些规则参考了 URL 结构：

1.  改进 URL 的结构 - 它还可以让搜索引擎更好地抓取您的文档（[Google 搜索引擎优化指南](http://static.googleusercontent.com/external_content/untrusted_dlcp/www.google.com/ru//webmasters/docs/search-engine-optimization-starter-guide.pdf)）；
2.  花时间使您的 URL 对用户和搜索引擎都尽可能简单。一些网站管理员试图通过*将动态 URL 重写为静态 URL*来实现这一点（[相同的参考](http://static.googleusercontent.com/external_content/untrusted_dlcp/www.google.com/ru//webmasters/docs/search-engine-optimization-starter-guide.pdf)，斜体我的）；
3.  在 URL 中使用单词（所有未来的参考都来自 Google 指南）；
4.  创建一个简单的目录结构；
5.  允许删除部分 URL 的可能性。

## 现在有一些来自 SEO 专家的一般指导方针：

1.  创建优化的 URL（[了解 SEO 友好的 URL 语法实践](http://searchengineland.com/seo-friendly-url-syntax-practices-134218)）；
2.  静态就是道路和光明（[URL 的 11 个最佳实践](http://www.seomoz.org/blog/11-best-practices-for-urls)）；
3.  尽可能选择描述性 URL（[创建 SEO 和用户友好 URL 要遵循的 URL 规则](http://www.linchpinseo.com/5-rules-to-follow-to-create-seo-and-user-friendly-urls)）等。

## 我对这个问题的检查：

1.  如果您使用的是静态类型的页面，它的 URL 可能是`www.site.com/contact-us.xhtml`，但为什么会有 6 个多余的字符 -`www.site.com/contact-us`会更好；
2.  您的 facelet 页面可以位于深度嵌套的内部结构中，例如`/pages/articles/general/how-to-do-jsf.xhtml`，但如果需要，最好`www.site.com/articles/how-to-do-jsf`在页面中包含和 url 之类的路径；
3.  一些开发人员倾向于使用 facelets 的短文件名 ( `jsf-bp.xhtml`) 或无意义的文件名 ( `article23.xhtml`)，但最好显示`www.site.com/article/jsf-best-practices-for-beginners`;
4.  使用扩展，be it`.xhtml`等`.jsf`可能会导致用户（可能还有搜索引擎）认为内容是*动态*的（意味着内容是从模板呈现的），例如 in `www.site.com/product.xhtml?id=12345`，但应该首选*静态*内容，因为用户 (可能还有搜索引擎）会认为这样的 URL 描述了一个完全无状态的页面，例如`www.site.com/products/jsf-book-for-advanced-users`. 此外，它大大提高了网站的可用性，这也很重要；
5.  人们倾向于将 id 用于查询参数（`?id=12345`），将名称用于路径参数（`/jsf-book-for-advanced-users`）；
6.  URL 重写提供了一种清晰的方式来浏览您的站点。想象一个路径`www.site.com/products/jsf-book-for-advanced-users`：这种类型的 url 结构将呈现一个独特的产品页面，删除`/jsf-book-for-advanced-users`可能会呈现一个完整的目录。但是，如果您有`www.site.com/product.xhtml?name=jsf-book-for-advanced-users`产品和`www.site.com/catalogue.xhtml`目录，会发生什么？用户不清楚逻辑，重写可以结构化您的 URL；
7.  最后，大多数处理 SEO 的网站不使用文件扩展名（并且很少使用查询参数），以及我们所在的网站 stackoverflow.com。

我并不声称我提到的来源是无可争议的，或者非常权威，或者他们的输入需要应用于每个 Web 应用程序等，但我确实相信结构良好、用户友好的网站存在很长时间生产时间*往往*遵循这些规则。

# javascript - 如何使用 Jquery 显示 JSONArray 项目

> ID：15008488
> 
> 赞同：0
> 
> 时间：2013-02-21T17:22:39.307
> 
> 标签：javascript, jquery

我正在尝试使用 Jquery 在网页中显示从数据库中检索到的项目。但我的代码未能做到这一点。任何人都告诉我如何显示数组中的项目。

我的代码是：

```
 success: function( data, textStatus, jqXHR) 
        {
            if(data.success)
            {
                for(var i = 0,len=data.length;i<len;i += 1){
                    if(data.commentInfo[i].success)
                    {
                        var newcommhtml = '<div id="c0'+thecid+'" class="cnew clearfix"> <section class="c-author">';
                        newcommhtml = newcommhtml + '<h3>Anonymous</h3>';
                        newcommhtml = newcommhtml + '<span class="pubdate">'+month+' '+day+', '+year+'</span> </section>';
                        newcommhtml = newcommhtml + '<section class="c-content">';
                        newcommhtml = newcommhtml + '<img src="images/green-avatar.png" alt="avatar" width="80" height="80" class="ava">';
                        newcommhtml = newcommhtml + '<p>'+nl2br(data.commentInfo[i].comment)+'</p> </section></div>';

                        var thelm = "#c0"+thecid;
                        commwrap.append(newcommhtml);
                        $(thelm).hide().fadeIn('slow');

                        setTimeout(function() { $(thelm).addClass('green'); }, 800);

                        $("#comm").val("");
                        thecid++;

                    }
                    else
                        {
                        alert("dsdsds");
                        }
                }
                    if(errorspan.html() != null) {
                        errorspan.remove();
                    }
            }

          },
     error: function(jqXHR, textStatus, errorThrown)
      {
         alert("error"+errorThrown);
         console.log("Something really bad happened " + textStatus);
      }, 
```

从服务器收到的响应是：

```
 {"success":true,"commentInfo":[{"uname":"shyam","comment":"ghg"},{"uname":"shyam","comment":"ghg"},{"uname":"shyam","comment":"ghg"},{"uname":"shyam","comment":"ghg"},{"uname":"shyam","comment":"ghg"},{"uname":"shyam","comment":"ghg"},{"uname":"shyam","comment":"ghg"},{"uname":"shyam","comment":"ghg"},{"uname":"shyam","comment":"ghg"},{"uname":"shyam","comment":"ghg"},{"uname":"shyam","comment":"ghg"},{"uname":"shyam","comment":"ghg"},{"uname":"shyam","comment":"ghg"},{"uname":"shyam","comment":"ghg"},{"uname":"shyam","comment":"ghg"},{"uname":"shyam","comment":"ghg"},{"uname":"shyam","comment":"ghg"},{"uname":"shyam","comment":"ghg"},{"uname":"shyam","comment":"ghg"},{"uname":"shyam","comment":"ghg"},{"uname":"shyam","comment":"ghg"},{"uname":"shyam","comment":"ghg"},{"uname":"shyam","comment":"ghg"},{"uname":"shyam","comment":"ghg"},{"uname":"shyam","comment":"ghg"}]} 
```

请任何人帮助我....谢谢....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T17:28:28.653

`data`是一个对象而不是一个数组。

如果您希望以`commentInfo`数组的数据为目标，您可以：

```
for (var i = 0; i < data.commentInfo.length; i++) {
   var item = data.commentInfo[i];
} 
```

# symfony - 在 symfony2 中翻译 Twig 内的消息

> ID：15008489
> 
> 赞同：7
> 
> 时间：2013-02-21T17:22:41.063
> 
> 标签：symfony, twig

我正在尝试通过 twig 访问翻译。

例如，我的应用程序的名称在我的`Resources/translations/messages.de.yml`和`Resources/translations/messages.en.yml`

我的控制器只渲染树枝文件。

在我的树枝文件中，我想访问在消息文件（yml）中定义的 application.name 属性

如何访问此属性以获取应用程序名称（假设它包含一些特定于语言的信息）

我尝试了这些方法，但失败了：

*   `{{ application.name }}`

    *   看起来更像是通过控制器发送的变量，我有一个错误，找不到变量“应用程序”
*   `{% trans% } application.name {% endtrans %}`
    *   显示 application.name
*   `{% trans% } 'application.name' {% endtrans %}`
    *   显示“应用程序名称”

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-21T17:49:07.433

使用内联表示法，您应该使用过滤器：

```
{{ 'application.name'|trans }} 
```

使用`trans`标签，我认为 application.name 周围的空格存在问题

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-12-01T21:06:06.163

```
{% trans% }app.name{% endtrans %} 
```

在你的messages.en.yml

```
<trans-unit id="app.name" resname="app.name">
    <source>My app</source>
    <target>My app</target>
  </trans-unit> 
```

在你的messages.de.yml

```
 <trans-unit id="app.name" resname="app.name">
    <source>My app</source>
    <target>Meine App</target>
  </trans-unit> 
```

# ios - iPad 上的后台计算会阻止用户界面

> ID：15008493
> 
> 赞同：2
> 
> 时间：2013-02-21T17:22:53.803
> 
> 标签：ios, ipad, background

我正在尝试使用后台线程在 iPad 上进行一些计算。问题是即使您正在运行计算。UI 在它们运行时被阻止......我做错了什么。

```
[mc evaluateFormula:adapted runNo:10000]; 
```

这是从 IBAction 调用的。

这是被调用的代码：

```
-(void)evaluateFormula:(NSDictionary *)frm runNo:(NSUInteger)runCount
{

    self.runCount = runCount;
    self.frm = frm;
    [self performSelectorInBackground:@selector(backgroundEvalFrm) withObject:nil];

//    for (int i = 0; i < runCount; i++) {
//        [self runFormula:frm];
//    }
//    

}

-(void)backgroundEvalFrm
{
    percentVal = self.runCount / 100;
    NSOperationQueue *queue = [[NSOperationQueue alloc] init];
    [queue setMaxConcurrentOperationCount:20];

    for (int i = 0; i<self.runCount; i++) {
        NSInvocationOperation *op =[[NSInvocationOperation alloc] initWithTarget:self selector:@selector(runFormula:) object:self.frm];
        [queue addOperation:op];

    }

} 
```

那么为什么 UI 会被阻止呢？

这是线程返回码...它们都在同一个类中

```
-(void)runFormula:(NSDictionary *)frm
{
    NSMutableString *formula = [[frm objectForKey:kFormulaExpresion] mutableCopy];
    NSArray *variables = [frm objectForKey:kVariableArray];
    NSArray *evals = [self evaluateVariables:variables];

       for (NSDictionary *var in evals) {
           NSString *sym = [var objectForKey:kVariableSymbol];
           [formula replaceOccurrencesOfString:sym withString:[[var objectForKey:@"numVal"] stringValue] options:NSCaseInsensitiveSearch range:NSMakeRange(0, [formula length])];
    }
    //parse formula
    //NSLog(@"formula to parse:%@",formula);
    NSNumber *resNo = [formula numberByEvaluatingString];
    // NSLog(@"formula %@ the result : %f",formula,[resNo doubleValue]);
    //NSNumber *resNo = [NSNumber numberWithDouble:result];
    [self performSelectorOnMainThread:@selector(addNewResult:) withObject:resNo waitUntilDone:NO];
}

#pragma mark -- data aggregation delegate
-(void)addNewResult:(NSNumber *)nr
{
     NSLog(@"index : %i result: %f",currentIndex,[nr doubleValue]);
    [[self delegate] didReceiveResult:nr];
    resultsArray[currentIndex]=[nr doubleValue];
    currentIndex ++;
    if (  (currentIndex % percentVal) == 0) {
        [[self delegate] percentCompleted];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:43:54.627

如果您的计算都以不协调的方式（很可能）竞争相同的资源（即 CPU 或 I/O），那么您应该显着降低最大并发操作数 - 尝试 2。很可能，它们将使用更少的资源完成时间/精力。此外，在执行计算期间，主线程不会减少到 CPU 时间的 5% 以下（结果：UI 响应更快）。

# parsing - 用野牛解析 bibtex

> ID：15008495
> 
> 赞同：0
> 
> 时间：2013-02-21T17:22:54.117
> 
> 标签：parsing, bison, flex-lexer, bibtex

我是新手。我想使用 flex/bison 解析 bibtex 文件。一个示例 bibtex 是：

```
@Book{a1,
author="amook",
Title="ASR",
Publisher="oxf",
Year="2010",
Add="UK",
Edition="1",
}
@Article{a2,
Author="Rudra Banerjee",
Title={FeNiMo},
Publisher={P{\"R}B},
Issue="12",
Page="36690",
Year="2011",
Add="UK",
Edition="1",
} 
```

为了解析这个，我编写了以下代码：

```
%{
#include <stdio.h>
#include <stdlib.h>
%}

%{
char yylval;
int YEAR,i;
//char array_author[1000];
%}
%x author
%x title
%x pub
%x year
%%
@                               printf("\nNEWENTRY\n");
[a-zA-Z][a-zA-Z0-9]*            {printf("%s",yytext);
                                        BEGIN(INITIAL);}
author=                         {BEGIN(author);}
<author>\"[a-zA-Z\/.]+\"        {printf("%s",yytext);
                                        BEGIN(INITIAL);}
year=                           {BEGIN(year);}
<year>\"[0-9]+\"                {printf("%s",yytext);
                                        BEGIN(INITIAL);}
title=                          {BEGIN(title);}
<title>\"[a-zA-Z\/.]+\"         {printf("%s",yytext);
                                        BEGIN(INITIAL);}
publisher=                      {BEGIN(pub);}
<pub>\"[a-zA-Z\/.]+\"           {printf("%s",yytext);
                                        BEGIN(INITIAL);}
[a-zA-Z0-9\/.-]+=        printf("ENTRY TYPE ");
\"                      printf("QUOTE ");
\{                      printf("LCB ");
\}                      printf(" RCB");
;                       printf("SEMICOLON ");
\n                      printf("\n");
%%

int main(){
  yylex();
//char array_author[1000];
//printf("%d%s",&i,array_author[i]);
i++;
return 0;
} 
```

问题是我想将不同变量中的 key 和 val 分开并将其存储在某个地方（可能是数组）。我可以有一些见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-18T23:04:47.517

如果我在一年前看到这个问题，我会同时发表评论，以便可以改进这个问题。提供的代码不是解析器，而是仅针对 flex 编码的正则表达式。使用正则表达式扫描输入文件中的标记只是构建解析器的一部分。bibtex 文件的语法或结构尚未为 bison 定义。

要分离 key 和 val，如果这就是所需要的，那么使用 awk 和 sed 之类的工具比使用 flex 更容易完成。我要指出的一件事是 vals 总是遵循等号。Kinda 使它们很容易识别，而无需任何特殊的句法诡计。

由于我们没有关于**为什么**我们需要解析 bibtex 文件的信息，而且练习的最终目标很难看出什么是最好的方法。

编辑：这个问题是重复的，因为 OP 再次询问它并得到了回答：[parse bibtex with flex+bison: revisited](https://stackoverflow.com/questions/15305789/parse-bibtex-with-flexbison-revisited)

# c++ - 如何在程序本身中使用 C++ 程序的版本号？

> ID：15008505
> 
> 赞同：0
> 
> 时间：2013-02-21T17:23:24.053
> 
> 标签：c++, xcode, versioning

Xcode 的构建选项包括一个`Current Project Version`变量，我想知道是否有任何方法可以在 C++ 程序中使用它。

```
std::string version_info = "FooProgram " + /* magic here? */ ; 
```

# ios - 无法以编程方式进行 segue

> ID：15008512
> 
> 赞同：0
> 
> 时间：2013-02-21T17:23:34.753
> 
> 标签：ios, objective-c

我想在程序控制下从一个 uiviewcontroller 切换到另一个我在情节提要中创建了两个视图控制器并在它们之间创建了一个模态 segue

当我调用这个方法时

```
 - (void)segueMethod {
   [self performSegueWithIdentifier: @"thisone" sender: nil];
} 
```

我收到此消息警告：尝试显示不在窗口层次结构中的视图！

同样，当我尝试使用取消按钮触发 segue 时，我会收到以下消息：警告：在演示过程中尝试进行演示！

我很困惑，我认为这可以在预览版中使用？？？？

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:33:06.930

您可能正在使用 iOS 5 之前的一些代码。我建议您检查将根视图控制器添加到主窗口的方式。

# android - 无法使用“AccountManager”类的 removeAccount() 函数从 android 中删除自行创建的帐户

> ID：15008517
> 
> 赞同：1
> 
> 时间：2013-02-21T17:23:42.047
> 
> 标签：android, accountmanager

我使用“AccountManager”类在 android 中创建了一个帐户

```
 deviceAccount = new Account(EASConstants.ACCOUNT_NAME,   EASConstants.ACCOUNT_TYPE);
        AccountManager am = AccountManager.get(Context);
        am.addAccountExplicitly(deviceAccount, null, null); 
```

但是当我尝试使用删除帐户时

```
 AccountManager am = AccountManager.get(Context);
        am.removeAccount(deviceAccount , null, null) 
```

帐户没有被删除

请帮忙，我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-07T14:36:46.487

请参阅[https://stackoverflow.com/a/19187340/3094082](https://stackoverflow.com/a/19187340/3094082)。基本上，Authenticator 需要知道（通过布尔值）允许删除帐户。

# c++ - 指针向量

> ID：15008521
> 
> 赞同：3
> 
> 时间：2013-02-21T17:23:54.910
> 
> 标签：c++

我只是想知道指针向量有什么问题。我的一些朋友建议我使用列表而不是向量。这会导致问题：

```
vector<Fruit*> basket;
basket.push_back(new Apple());
basket.push_back(new Orange());
vector<Fruit*> temp;
temp.push_back(basket[1]); 
```

如果我删除向量 temp，我是否也销毁了 basket[1] 对象？如果没有，使用指针向量有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T17:27:59.130

> 如果我删除向量 temp，我是否也销毁了 basket[1] 对象？

**没有**。首先，你不能*删除* `temp`；相反，它会在超出范围时被销毁。并且当这种情况发生时，向量元素指向的对象不会自动被`delete`d。

然而，这不是一个特定的问题`vector`：使用`list`不会让你摆脱这个问题。问题在于*原始指针*。如果您希望在指向它的最后一个指针的生命周期结束时自动释放指向的对象，您应该使用智能指针。

根据您的应用程序需要的所有权策略，您可以在 和 之间`shared_ptr`进行选择`unique_ptr`。需要注意的`shared_ptr`是，应避免引用循环，以防止相互引用的对象使彼此保持活动状态。您可能需要检查`weak_ptr`这方面。

最后，除非您有充分的理由*不*使用`vector`,`vector`应该是容器的默认选择。来自 C++11 标准的第 23.2.3/2 段：

> 序列容器为程序员提供了不同的复杂性权衡，应该相应地使用。**`vector`或者`array`是默认情况下应该使用的序列容器的类型**。`list`或者`forward_list`应该在序列中间频繁插入和删除时使用。`deque`是当大多数插入和删除发生在序列的开头或结尾时选择的数据结构。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T17:26:32.183

如果任何一个向量`basket`或`temp`被破坏，则没有一个`Fruit`s 被破坏。任何动态分配的东西都`new`必须是`delete`d。当向量超出范围时，它们不会`delete`指向其元素所指向的对象。如果您`delete`通过一个向量指向另一个向量的对象，则两者都指向现在的`delete`d 对象。

由于您的向量具有自动存储期限，因此您绝对*不能*这样做`delete basket;`or `delete temp;`。

通常不建议使用原始指针，尤其是对于您可能忘记使用的动态分配存储`delete`。但是，在这种情况下，您*确实*需要由指针提供的多态行为。您应该使用*智能指针*来避免原始指针的问题。尝试一个`std::vector<std::shared_ptr<Fruit>>`.

# batch-file - 批量归档文件

> ID：15008526
> 
> 赞同：1
> 
> 时间：2013-02-21T17:24:09.587
> 
> 标签：batch-file, robocopy

我正在制作一个脚本，它可以让我归档给定目录中最后修改日期超过 30 天的所有文件。文件应移动到新文件夹，之后必须压缩此文件夹。

另外——这有点关键——在归档过程中，文件应该按月分组。压缩文件夹的名称应指明所包含文件的月份和年份。

*示例：* **2012_12.zip**（包含 2012 年 12 月以来的所有文件）； **2013_01.zip**（包含 2013 年 1 月以来的所有文件）

这是我到目前为止所拥有的：

```
ECHO OFF

ECHO.
SET /p folder=Which folder you want to archive?
ECHO.
ECHO %folder% 

CHDIR %folder%
MKDIR Archive

ROBOCOPY "%folder%" "%folder%\Arquivo" /E /V /ETA /MOVE /XD "%folder%\Archive"
:: Exclude files newer than 30 days

FORFILES /P "%folder%\Archive" /D -31/12/2012 /D +1/12/2012 /C GOTO :ZIP

CALL:ZIP
SET filetozip="%folder%\Archive"
set tempdir=C:\Users\tiago.campos\Documents\OMS\FilesArchiver\tempdir
mkdir %tempdir%
copy %filetozip% %tempdir%
mkdir "%filetozip%\Archive"
rmdir %tempdir%
realdate 

echo Set objArgs = WScript.Arguments > _zipIt.vbs
echo InputFolder = objArgs(0) >> _zipIt.vbs
echo ZipFile = objArgs(1) >> _zipIt.vbs
echo CreateObject("Scripting.FileSystemObject").CreateTextFile(ZipFile, True).Write "PK" ^& Chr(5) ^& Chr(6) ^& String(18, vbNullChar) >> _zipIt.vbs
echo Set objShell = CreateObject("Shell.Application") >> _zipIt.vbs
echo Set source = objShell.NameSpace(InputFolder).Items >> _zipIt.vbs
echo objShell.NameSpace(ZipFile).CopyHere(source) >> _zipIt.vbs
echo wScript.Sleep 2000 >> _zipIt.vbs

CScript  _zipIt.vbs  %tempdir%  "%filetozip%\Archive\2013.01.zip"

del "_zipIt.vbs"

pause 
```

作为一项额外功能，如果脚本不将目录作为输入，而是从具有多个目录的 csv 文件中读取，这将非常有用。

我有点迷失在这一刻。我提前感谢每一个回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:34:47.680

由于您已经在使用 vbscript 进行压缩，并且 vbscript 也更适合使用日期执行算术，因此不妨在 vbscript 中完成所有操作。

我没有做 csv 的事情，但也许你可以用批处理`for %%I in (csvfile) do cscript /nologo archive.vbs %%I`或类似的方式调用脚本。如果未传递任何参数，则归档当前工作目录。

```
' archive.vbs
' usage: cscript archive.vbs (directory, optional)

if not wscript.arguments.count then
    dir = left(WScript.ScriptFullName,(Len(WScript.ScriptFullName))-(len(WScript.ScriptName)))
else
    dir = wscript.arguments(0)
    if not Right(dir, 1) = "\" then
        dir = dir & "\"
    end if
end if

set fso = createobject("scripting.filesystemobject")
set shl = createobject("shell.application")
set osh = createobject("wscript.shell")
set files = fso.getFolder(dir).files
dim zips
dim folders
redim zips(-1)
redim folders(-1)

for each file in files
    if DateDiff("d", file.datelastmodified, Date()) > 30 then
        yyyymm = DatePart("yyyy", file.datelastmodified) & "_" & Right("0" & DatePart("m", file.datelastmodified), 2)
        dest = dir & yyyymm & "\"
        if not fso.folderexists(dest) then
            fso.createFolder dest
            zip = dir & yyyymm & ".zip"
            redim preserve zips(ubound(zips) + 1)
            redim preserve folders(ubound(folders) + 1)
            zips(ubound(zips)) = zip
            folders(ubound(folders)) = dest
        end if
        Wscript.echo "Moving " & file & " to " & dest
        fso.moveFile file, dest
    end if
next

set files = nothing

Wscript.echo "Copying finished."

on error resume next
for i = lbound(zips) to ubound(zips)
    Wscript.echo i & ": Zipping " & folders(i) & " to " & zips(i)
    set zip = fso.createtextfile(zips(i))
    zip.write "PK" & chr(5) & chr(6) & string(18, chr(0))
    zip.close
    set zip = Nothing
    shl.namespace(zips(i)).copyhere shl.namespace(folders(i)).items
    do until shl.namespace(zips(i)).items.count = shl.namespace(folders(i)).items.count
        wscript.sleep 100
    loop

    ' This method of deleting folders is more reliable than fso.deletefolder
    ' for paths with long filenames.
    osh.run "cmd /c rmdir /q /s """ & folders(i) & """", 1, true
next

Wscript.Echo "Done." 
```

# cucumber - 在 Capybara 中查找 ID 的两种方法 - 为什么一种失败而另一种没有？

> ID：15008528
> 
> 赞同：2
> 
> 时间：2013-02-21T17:24:11.740
> 
> 标签：cucumber, capybara

我想简单地“点击”使用 Capybara 和 Cucumber 的链接。我有一个看起来像这样的元素：

```
<a class="to-right" id="create-account-link" href="https://somewebsite.com/">Create account</a>      //url is different when I test it 
```

我在步骤定义中尝试了以下两种方法：

```
page.find('[@id=create-account-link]').click       //works

AND

page.find('#create-account-link').click            //doesn't work 
```

我想知道为什么后者不起作用。任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:40:43.387

我把它解决了

```
Capybara.default_wait_time = 5 
```

在我的 hooks.rb 文件中。它通常会等待两秒钟，显然 xpath 引用比另一个更快。

# android - Android AChartEngine - Bar over Bar

> ID：15008531
> 
> 赞同：3
> 
> 时间：2013-02-21T17:24:22.433
> 
> 标签：android, bar-chart, achartengine

通常，条形图中的条形图并排对齐。我怎样才能让他们在前一个之上？所以我会考虑创建我已经拥有的系列并将它们添加到渲染器中，但告诉渲染器将新系列放在现有系列之上，而不是将其放在现有系列*旁边*。只计算最大值并只显示一个系列是不可行的，因为我会丢失信息（我正在使用图例......）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:14:45.143

这种条形图称为堆积条形图。[在此处查看](http://code.google.com/p/achartengine/source/browse/trunk/achartengine/demo/org/achartengine/chartdemo/demo/chart/SalesStackedBarChart.java)使用 AChartEngine 构建此类图表的示例。

# c# - 插件应用程序和 WPF 问题？

> ID：15008541
> 
> 赞同：0
> 
> 时间：2013-02-21T17:24:43.730
> 
> 标签：c#, wpf, plugins

我正在开发一个需要允许 3rd-party 插件的项目。我以前使用过插件，但从来没有遇到过问题。

我确定我的问题是因为 WPF 不喜欢我使用 Assembly.LoadFile(file) 和 Activator.CreateInstance(t)！

我遇到的错误是：

```
The component 'Servus.Forms.MainWindow' does not have a resource identified by the URI '/Servus;component/forms/mainwindow.xaml'. 
```

这显示在我的 MainForm 构造函数中： InitializeComponent();

如果我在加载 MainForm 后加载插件，它会毫无问题地加载，但是当打开任何其他表单（我的应用程序中有很多）时，我会遇到与 about 相同的问题，但该特定表单会出现相关错误。

我也尝试在自己的 AppDomain 中加载插件，如下所示：

```
PluginDomain temp = new PluginDomain();
PluginBase tempPlug = temp.GetPlugin(file); 
```

有以下课程：

```
public class PluginDomain
{
    public AppDomain CurrentDomain { get; set; }
    public ServusAssemblyLoader CurrentAssemblyLoader { get; set; }

    private readonly Random _rand = new Random();

    public PluginDomain()
    {
    }

    public PluginBase GetPlugin(string assemblyName)
    {
        try
        {
            string appBase = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
            var ads = new AppDomainSetup { ApplicationBase = appBase, PrivateBinPath = appBase, ShadowCopyFiles = "true" };
            CurrentDomain = AppDomain.CreateDomain("ServusDomain_Plugin_" + _rand.Next(0, 100000), null, ads);

            AppDomain.CurrentDomain.AssemblyResolve += CurrentDomain_AssemblyResolve;
            CurrentAssemblyLoader = (ServusAssemblyLoader)
            CurrentDomain.CreateInstanceAndUnwrap(Assembly.GetExecutingAssembly().FullName, typeof(ServusAssemblyLoader).FullName);

            AppDomain.CurrentDomain.AssemblyResolve -= CurrentDomain_AssemblyResolve;

            return CurrentAssemblyLoader.Load(assemblyName);
        }
        catch (Exception e)
        {
            CConsole.WriteLine("Error: " + e.Message);
        }
        finally
        {
            CurrentAssemblyLoader = null;
            AppDomain.Unload(CurrentDomain);
        }

        return null;
    }

    static Assembly CurrentDomain_AssemblyResolve(object sender, ResolveEventArgs args)
    {
        string[] parts = args.Name.Split(',');
        string file = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location) + "\\" + parts[0].Trim() + ".dll";

        return Assembly.LoadFrom(file);
    }
}

public class ServusAssemblyLoader : MarshalByRefObject, IAssemblyLoader
{
    public PluginBase Load(string file)
    {
        Assembly asm = Assembly.LoadFrom(file);

        foreach (Type t in asm.GetTypes())
        {
            if (t.IsSubclassOf(typeof(PluginBase)))
            {
                return (PluginBase)Activator.CreateInstance(t);
            }
        }

        return null;
    }
}

public interface IAssemblyLoader
{
    PluginBase Load(string file);
} 
```

这将返回一个透明代理对象，如下所示：

```
{System.Runtime.Remoting.Proxies.__TransparentProxy} 
```

但是我不确定如何使用它，因为我希望它返回一个 PluginBase 对象。

我读过很多人也有这个问题，他们的答案说要使用新的 AppDomain，但正如你所看到的，这对我现在没有帮助。

我希望我已经为您提供了足够的信息，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:01:08.893

It turns out I had a few things wrong in my PluginDomain Class.

Fix #1:

Replace:

```
return (PluginBase)Activator.CreateInstance(t); 
```

With:

```
(PluginBase)asm.CreateInstance(t.ToString()); 
```

Fix #2:

Remove:

```
AppDomain.Unload(CurrentDomain); 
```

Fix #3: (Purely for debugging)

Replace:

```
return CurrentAssemblyLoader.Load(assemblyName); 
```

With:

```
PluginBase obj = CurrentAssemblyLoader.Load(assemblyName);
return obj; 
```

EDIT:

It should be noted that the new AppDomain wont be able to access objects in the old one; so my problem is only half fixed.

# django - Django Gevent 集成

> ID：15008545
> 
> 赞同：1
> 
> 时间：2013-02-21T17:24:52.120
> 
> 标签：django, python-2.7, gevent, django-settings, gevent-socketio

如何将 Gevent 与 Django 框架集成，必须在 Settings.py 和 wsgi.py 文件中修改哪些设置以进行集成。

我想从 Django 启动 gevent http server(port 8000) 和 gevent web socket server(port 9000)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T21:15:49.837

最简单的方法是使用[Gunicorn](http://gunicorn.org/)并告诉它使用 gevent worker 类。Gunicorn 文档非常好。对于 Django 1.4 或更高版本，启动 Gunicorn 的推荐方法是简单地调用 WSGI 接口，如下所示：

```
gunicorn --worker-class gevent wsgi:application 
```

如果您不关心 Gunicorn 的所有出色功能（例如，用于无停机升级的优雅重启），您可以直接使用 gevent wsgi 服务器。我自己这样做是为了为非关键网站节省一些内存，这些网站在升级期间可能会关闭一段时间。这是我的“run_gevent.py”文件，应该很容易理解：

```
import gevent.monkey; gevent.monkey.patch_all()
import os, socket
from gevent.socket import socket as gsocket
from gevent.pywsgi import WSGIServer
from django.core.handlers.wsgi import WSGIHandler

script_dir = os.path.dirname(os.path.abspath(__file__))
pid_filename = os.path.join(script_dir, 'server.pid')
socket_filename = os.path.join(script_dir, 'server.sock')

pidfile = open(pid_filename, 'w')
pidfile.write(str(os.getpid()) + str('\n'))
pidfile.close()

server_socket = gsocket(socket.AF_UNIX, socket.SOCK_STREAM)
try:
    os.remove(socket_filename)
except OSError:
    pass
server_socket.bind(socket_filename)
server_socket.listen(256)

os.environ['DJANGO_SETTINGS_MODULE'] = 'project.settings'
server = WSGIServer(listener = server_socket, application = WSGIHandler(), log = None)
server.serve_forever(stop_timeout = 3) 
```

# c# - jQuery (kendo) 和 .NET Web Service (asmx) 和 Json 问题...需要帮助

> ID：15008552
> 
> 赞同：1
> 
> 时间：2013-02-21T17:25:14.677
> 
> 标签：c#, jquery, json, web-services, kendo-ui

首先，它对该主题进行了大量研究，但找不到答案或完整的示例。我对 jquery 没有太多经验，所以我正在寻找一个我想要完成的简单示例。

我想要一个 Web 服务 (asmx) 返回一个 json，我可以使用它来填充网格、组合框、自动完成等。我正在使用 Visual Studio 2008，这就是我得到的，或者我的目标是：

**ASMX**：

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]

[ScriptService]
public class Services : System.Web.Services.WebService
{
    [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public List<Preceptor> SearchPrecetor()
    {
        List<Preceptor> myPreceptorList = new List<Preceptor>();
        for (int i = 0; i < 10; i++)
        {
            Preceptor myPreceptor = new Preceptor();
            myPreceptor.Id = i;
            myPreceptor.Name = "Name" + i.ToString();
            myPreceptorList.Add(myPreceptor);

        }

        return myPreceptorList;
    }

    public class Preceptor {
        public int Id {get; set; }
        public string Name { get; set; }
    }
} 
```

**Javascript**：

```
$(document).ready(function() {
            $("#acPreceptors").kendoAutoComplete({
            minLength: 3,
            dataTextField: "Name",
            dataSource: {
                type: "json",
                serverFiltering: true,
                serverPaging: true,
                pageSize: 20,
                transport: {
                    contentType: "application/json; charset=utf-8",
                    type: "POST",
                    read: "../Services/Services.asmx/SearchPrecetor"
                }
            }
        });
    }); 
```

这是我得到的**错误：**

```
Uncaught TypeError: Object #<Document> has no method 'slice' 
```

我的猜测是整个过程还是有问题，json没有正确到达客户端。同样，我对 jquery 没有很多经验，并且非常感谢一个简单而完整的示例来说明如何做到这一点。

任何想法、链接、代码、修复将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T05:58:47.240

当我使用 .asmx 服务时，我必须在数据源中添加以下内容...

```
schema: {
data: "d", // ASMX services return JSON in the following format { "d": <result> }. Specify how to get the result.
model: ....etc...
}, 
```

例如，我的基本数据源是......

```
var sharableDataSource = new kendo.data.DataSource({
                schema: {
                    data: "d", // ASMX services return JSON in the following format { "d": <result> }. Specify how to get the result.
                    model: {    // define the model of the data source. Required for validation and property types.
                        id: "Id",
                        fields: {
                            Id: { editable: false, nullable: true },
                            ... and so forth .....
                        }
                    }
                },
                batch: true, 
                transport: {
                    read: {
                        url: "sMyService.asmx/getList", //specify the URL which data should return the records.
                        contentType: "application/json; charset=utf-8", // tells the web service to serialize JSON
                        type: "POST", //use HTTP POST request as the default GET is not allowed for ASMX
                        data: { Id: 5 }
                    },
                    parameterMap: function (data, operation) {
                        if (operation != "read") {
                            // web service method parameters need to be send as JSON. 
                            return JSON.stringify({ myItems: data.models })
                        } else {
                            return JSON.stringify(data);
                        }
                    }
                }
            }); 
```

我的网络服务功能...（创建删除项目数组的代码）

```
 <WebMethod> _
<ScriptMethod(ResponseFormat:=ResponseFormat.Json, UseHttpGet:=False)> _
Public Function getList(ByVal Id As Integer) As cDetail()
    Dim items As New List(Of cDetail)
    Return items.ToArray()
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T21:06:35.560

感谢那些回复的人。一开始我确实把语法搞砸了。

之后出现了许多其他问题，以下是我为每个问题找到的解决方案：

（我希望这对将来的其他人有用）

**为了让 ASMX Web 服务返回 JSON**

Web Service 方法必须具有：

```
[ScriptMethod(ResponseFormat = ResponseFormat.Json)] 
```

请求必须包含：

```
contentType: "application/json; charset=utf-8"
type: "POST" 
```

**为了将参数正确传递给请求**

```
parameterMap: function() {
   return kendo.stringify({ ParamName: $('#myTextBox').val() });
} 
```

出于某种原因，Web 服务将在“d”对象中返回请求。记在脑子里。

始终使用分析器来观察您的请求和响应。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T18:29:44.913

请检查文档[http](http://docs.kendoui.com/documentation/getting-started/web/autocomplete/overview#using-the-kendo-ui-web-datasource-to-bind-to-jsonp) ://docs.kendoui.c​​om/documentation/getting-started/web/autocomplete/overview#using-the-kendo-ui-web-datasource-to-bind-to-jsonp ，都在那里.

我认为应该是：

```
$(document).ready(function() {
        $("#acPreceptors").kendoAutoComplete({
        minLength: 3,
        dataTextField: "Name",
        dataSource: {
            type: "json",
            serverFiltering: true,
            serverPaging: true,
            pageSize: 20,
            transport: {
                read: {
                  contentType: "application/json; charset=utf-8",
                  type: "POST",
                  url: "../Services/Services.asmx/SearchPrecetor"
              }
            }
        }
    });
}); 
```

注意**读取**对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T18:22:35.127

在您的数据源的传输中使用它。

```
transport: {
    read: {
        contentType: "application/json; charset=utf-8",
        type: "POST",
        url: "../Services/Services.asmx/SearchPrecetor"
    }
} 
```

# php - 您可以在 PHP 中将文字字符串转换为插值字符串吗？

> ID：15008555
> 
> 赞同：1
> 
> 时间：2013-02-21T17:25:18.480
> 
> 标签：php, eval, string-interpolation

我正在使用 Kohana 创建一个完全纯文本的电子邮件视图，作为 MIME 多部分/替代电子邮件的一部分。由于纯文本实际上不允许格式化，因此我希望能够使用插值字符串来允许转义字符，以便创建新行、制表符等。

但是，使用 Kohana 的内置方法来渲染视图：

```
View::factory('view_file')->render() 
```

总是给我我认为是字符串文字的东西。如果我只是自己创建一个内插字符串，则会创建转义字符。然而，使用上面的方法，总是给我一个文字字符串，这样转义码就像`\r` `\t` `\n`在电子邮件正文中出现的字面一样。

我有什么方法可以转换该`render()`方法返回的整个字符串，使其成为 PHP 中的插值字符串？

我想这样做的原因是因为我对电子邮件模板的 HTML 和纯文本版本使用单独的视图，并且我想坚持这个约定，同时能够在纯文本版本中使用转义字符以实现最小格式目的。

我已经尝试将 render 方法的输出嵌入到类似的内插字符串`$view = "$view"`中，但我的理解是，无论它是内插还是文字，字符串都是在创建时创建和设置的。

# google-app-engine - 跨 App Engine 实例推送数据

> ID：15008557
> 
> 赞同：2
> 
> 时间：2013-02-21T17:25:27.203
> 
> 标签：google-app-engine

假设我们有多个使用 Channel API 连接到 App Engine 的客户端。每个客户端发送消息，这些消息应该根据一些规则传播给其他连接的客户端。棘手的部分是客户端可能不在同一个 App Engine 实例上。

有没有办法*将*数据从一个实例推送到其他实例？

（是的，我知道 Memcache，但这需要某种轮询。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T17:37:00.150

你在这里问两个问题。

一种。您可以在不使用轮询的情况下将数据从一个实例推送到另一个实例吗？答案一般是否定的。

湾。一个客户端可以向服务器发送可以传播给其他客户端的消息吗？是的，这不需要将消息传播到其他服务器端实例。

将 Channel API 视为一种服务。客户端连接到 Channel API 服务；它们与任何特定实例无关。因此，任何实例都可以向任何客户端发送消息。

1.  您需要以某种可查询的方式将客户端的通道令牌存储在数据存储中以匹配您的规则。
2.  您的客户端发出 HTTP 请求以向您的服务器发送消息。
3.  服务器上的处理程序查询它需要将消息传播到（来自内存缓存或数据存储）的通道令牌。
4.  服务器上的处理程序向所有客户端发送消息。

如果目标客户端列表非常大，您可能希望在任务队列中执行步骤 3/4，以便操作可以运行更长时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:34:43.207

客户端连接到哪个实例并不重要，API 对您隐藏了这一点。

客户端只能通过标准 HTTP 命令“回复”消息，他们实际上没有任何方式直接通过通道 API 进行响应。

因此，服务器 A1 上的客户端 A 想要向服务器 B1 上的客户端 B 发送消息。

客户端 A 发布到处理程序。那可能是实例 A1 或 B1。无论服务器客户端 B 通过 Channel API 连接到哪个服务器，现在服务器将消息传递给客户端 B 都无关紧要。

真正的一点是，一般来说，没有任何 App Engine 实例有任何数据。因此，您连接到哪个实例并不重要，它可能是第 99 个实例或第一个启动的实例。因此，您必须设计您的应用程序，使其与正在使用的实例无关。

1.  客户端通过 HTTP 向服务器发送消息。

2.  服务器通过通道 API 向 N 个客户端发送消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T18:00:07.550

通道 API 不会建立固定的前端实例到客户端连接。如果知道通道 ID，任何前端实例都可以将消息推送到通道。

您需要做的是跨渠道传递消息。

1.  用户一正常向服务器发送消息（例如通过 GET）
2.  服务器查找第二个用户的频道 ID 并推送消息
3.  在另一个方向重复过程：第二个用户到第一个用户。

# c# - 仅将指数限制为特定的幂

> ID：15008559
> 
> 赞同：2
> 
> 时间：2013-02-21T17:25:29.337
> 
> 标签：c#, string-formatting

在我们的程序中，我们需要显示大约数百万到百万的值。由于用户要求，用户只想看到可被 3 整除的指数值。意味着要显示的值应如下所示

*   1e0
*   10e0
*   100e0
*   1e3
*   10e3
*   100e3
*   1e6

等等。我想改变遇到数千的指数，以简化用户区分千比特、兆比特、千兆比特的方式。

是否可以使用格式字符串来获得这种效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:14:53.437

像这样的东西

```
int val = 123456789;
var order = (int)Math.Log10(val);
var auxOrder = order/3;
var charToShow = val.ToString().Length - (auxOrder *3);
var result = val.ToString().Substring(0, charToShow )+"e"+(auxOrder *3); 
```

像尾数和指数这样的变量有更好的名称，但它可以解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T08:00:18.880

Servy 的代码是起点，但它仍然存在一些错误，不适用于负值或非常小的值。我像这样扩展它

```
 double exponent = Math.Log10(Math.Abs(val));

        var negcompensator = 0;
        if (exponent < 0)
        {
            negcompensator = -1;
        }
        int displayExponent = (int)(Math.Truncate((exponent + negcompensator) / 3)) * 3;

        if (displayExponent==0 || double.IsInfinity(exponent))
        {
            return val.ToString("###0.##");
        }
        else
        {
            var displayValue = (val / Math.Pow(10, displayExponent));
            return string.Format("{0}e{1}", displayValue, displayExponent);
        } 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-21T19:21:39.960

我不喜欢这样涉及字符串操作的解决方案，所以我在这里用数学方法计算了这两个部分。

```
public static string MyFormat(int value)
{
    double exponent = Math.Log10(value);
    int displayExponent = (int)(exponent / 3);

    int displayValue = (int)(value / Math.Pow(exponent, 10));
    return string.Format("{0}e{1}", displayValue, displayExponent);
} 
```

# hibernate - FetchProfiles 是否与 HQL 一起使用？

> ID：15008562
> 
> 赞同：1
> 
> 时间：2013-02-21T17:25:43.637
> 
> 标签：hibernate

我不能让 @FetchProfile 与 HQL 一起工作。

我成功地将它与（旧）本机 Criteria 和 session.get() API 一起使用，但没有与 HQL 一起使用。

正常吗？

感谢我的映射和 FetchProfile 定义

```
 @FetchProfiles({ @FetchProfile( name = "countryCities", 
            fetchOverrides = { @FetchOverride(entity = Country.class, 
                      association = "cities", mode = FetchMode.JOIN) }) })
    public class Country implements java.io.Serializable {

        @Id
        private long id;
        @Version
        private int version;
        private String country;
        @OneToMany(mappedBy = "country")
        private Set<City> cities = new HashSet<City>(0);
    } 
```

以下不起作用：

```
@Override
public List<Country> findAllFetchProfileCities() {
    getSession().enableFetchProfile("countryCities");
    boolean enabled = getSession().isFetchProfileEnabled("countryCities");
    List<Country> list = getSession().createQuery("from Country").list();
    enabled = getSession().isFetchProfileEnabled("countryCities");
    return list;
} 
```

以下工作正常：

```
@Override
public Country findOneFetchProfileCities(Long _id) {
    getSession().enableFetchProfile("countryCities");
    Country c = (Country) getSession().get(Country.class, _id);
    return c;
}

@Override
public List<Country> findAllCriteriaFetchProfileCities() {
    getSession().enableFetchProfile("countryCities");
    return getSession().createCriteria(Country.class).list();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-10T12:43:18.973

我也一直在寻找解决此问题的方法，并发现了我认为可用的解决方法（并不是说这是有效的或任何东西！）

它包括两个步骤：

首先将级联 REFRESH 添加到映射中：

```
@FetchProfiles({ @FetchProfile( name = "countryCities", 
        fetchOverrides = { @FetchOverride(entity = Country.class, 
                  association = "cities", mode = FetchMode.JOIN) }) })
public class Country implements java.io.Serializable {

    @Id
    private long id;
    @Version
    private int version;
    private String country;
    @OneToMany(mappedBy = "country", cascade = {CascadeType.REFRESH})
    private Set<City> cities = new HashSet<City>(0);
} 
```

然后引入一个循环来刷新列表检索到的对象：

```
@Override
public List<Country> findAllFetchProfileCities() {
    getSession().enableFetchProfile("countryCities");
    boolean enabled = getSession().isFetchProfileEnabled("countryCities");
    List<Country> list = getSession().createQuery("from Country").list();
    enabled = getSession().isFetchProfileEnabled("countryCities");

    for (Country c:list) {
        getSession().refresh(c);
    }

    return list;
} 
```

这很丑陋，但它让我走得更远。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:37:36.837

休眠`Fetch`策略在 Criteria API (criteria.setFetchMode()) 和 HQL ("FETCH JOIN") 中都可用。

因此，当我们编写 hql 时，我们必须在查询中提及关键字“JOIN”它自己存在，*我想*。

有点旧，但请参考一次

[休眠硬事实](http://blog.frankel.ch/hibernate-hard-facts-part-6)

# javascript - 流星模板不使用点击事件更新

> ID：15008564
> 
> 赞同：2
> 
> 时间：2013-02-21T17:25:49.640
> 
> 标签：javascript, node.js, meteor, handlebars.js, reactiveui

我正在尝试使用流星会话制作一个反应式菜单（以保持用户的视图）..但它不起作用，Session.get（'currentView'）被更改（在chrome控制台中测试），但页面不要再次渲染。

.html

```
<div class="col-1-1 menu" style="height: 42px;">
    <ul>
        <li><a class="dashButton" href="#"># Dashboard</a></li>
        <li><a class="myJobsButton"href="#">Jobs</a></li>
        <li><a class="helpPageButton"href="#">Help</a></li>
    </ul>
    <br style="clear:left"/>
</div>
{{#if currentViewIs "dashboard"}}
    {{> dashboard}}
{{else}}
    {{#if currentViewIs "myJobs"}}
        {{> myJobs}}
    {{else}}
        {{#if currentViewIs "helpPage"}}
            {{> helpPage}}
        {{else}}
            {{> dashboard}}
        {{/if}}
    {{/if}}
{{/if}} 
```

客户端.js

```
Template.userPage.currentViewIs = function (view) {
    if( Session.get('currentView') == view)
        return true;
    return false;
};

Template.userPage.events({
    'click .dashButton': function (evt) {
        Session.set('currentView', 'dashboard');
  },
    'click .myJobsButton': function (evt) {
        Session.set('currentView', 'myJobs');
  },  
    'click .helpPageButton': function (evt) {
        Session.set('currentView', 'helpPage');
  }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:43:31.700

它现在工作正常： - 在 windows (win.meteor.com) 的流星中存在一些奇怪的错误，在停止服务器并刷新 chrome 后它按预期工作。

# java - 检查类的 ArrayList 是否有重复项

> ID：15008565
> 
> 赞同：1
> 
> 时间：2013-02-21T17:26:06.563
> 
> 标签：java, arraylist

我有一个`ArrayList`保存信息的类，我想将对象添加到此列表中。我想在将其添加到列表之前检查该列表是否已经包含一个数字。

通常，如果它只是一个字符串列表，我会做这样的事情

```
if(!list.contains("this string")){
    list.add("this string");
} 
```

但由于这是一个类，每个索引都有多个变量。

类世界的一个例子是：

```
private class From{
    private long threadID;
    private long date;
    private String address;
    private String body;
    private int type;
    private long id;

    @Override
    public boolean equals(Object obj){
        if(obj != null){
            if(getClass() != obj.getClass()){
                return false;
            }else{
                final From from = (From)obj;
                if((this.address != null) ? (from.address != null) : !this.address.equals(from.address)){
                    return false;
                }
            }
        }else{
            return false;
        }
        return true;
    }
} 
```

我想看看是否已经有一个具有相同数字的条目，所以我是否必须手动循环遍历每个索引并检查，还是有更简单的方法来做我想做的事情？

编辑：

我怎么称呼它

```
HashSet<From> addresses = new HashSet<From>();
From f = new From();
                f.setAddress(messages.getString(3));
                f.setBody(messages.getString(0));
                f.setDate(messages.getLong(2));
                f.setThreadId(messages.getLong(1));
                f.setType(1);
                if(!addresses.contains(f.address)){
                    addresses.add(f);
                } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T17:28:16.727

使用 Set 而不是 List。集不允许重复

[http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)

您还需要在您的类中覆盖 equals 以便 Set 知道两个对象是否相等

可以在此处找到覆盖 equals 的示例：[How to override equals method in java](https://stackoverflow.com/questions/8180430/how-to-override-equals-method-in-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:27:44.440

您必须为此覆盖`equals(Object o)`。这是您需要定义定义两个对象之间相等性的逻辑的地方。

重写也是一个好习惯`hashCode()`。阅读更多关于`Object`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T17:28:28.617

另一种方法是`override equals()`对于**Info**对象，如果两个 Info 对象具有相同的编号，则它们是相等的。在将元素添加到列表之前，只需执行 equals() 测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T17:30:44.257

您仍然可以使用该`contains`方法；A[`List`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)使用该`equals`方法来确定该项目是否存在于列表中。但是你必须`equals`在你的`Info`对象中覆盖。

# ruby-on-rails - Rails 仅在管理命名空间中验证

> ID：15008568
> 
> 赞同：2
> 
> 时间：2013-02-21T17:26:19.637
> 
> 标签：ruby-on-rails, validation, model

在我的 Rails 应用程序中，我有两个用户逻辑：

```
user, and admin 
```

例如我的 line_item 路由是这样的：

```
namespace :admin do
  resources :line_items, :only => [:edit, :update, :destroy]
end
resources :line_items, :only => [:new, :create, :update, :edit, :destroy] 
```

但在管理部分，我必须对我的 line_item 模型进行验证：

```
 validates :notes, :presence => {:message =>  I18n.t(:notes_not_chosen)}
  validates :quantity, :presence => {:message =>  I18n.t(:quantity_not_chosen)}
  validates :price, :presence => {:message =>  I18n.t(:price_not_chosen)}
  validates :description, :presence => {:message =>  I18n.t(:description_not_chosen)} 
```

但仅在管理控制器中！如何做到这一点我只在管理 line_item 控制器中有验证，但在用户部分没有？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T17:36:48.810

我认为您不能根据您的请求通过哪个控制器进行验证。您可以做的是`user`为您的模型添加一个属性并将其设置在控制器中。然后，您可以根据用户属性进行验证。像这样：

控制器：

```
def create
  @line_item = LineItem.new(params[:line_item])
  @line_item.user = current_user
  if @line_item.save 
  # ... standard rails stuff
end 
```

模型：

```
class LineItem < ActiveRecord::Base
  attr_accessor :user

  validates :notes, :presence => true, :if => Proc.new { user.admin? }
end 
```

# appcelerator-mobile - 滚动视图问题

> ID：15008569
> 
> 赞同：1
> 
> 时间：2013-02-21T17:26:21.623
> 
> 标签：appcelerator-mobile

我的视图结构基本是这样的

```
 <scrollview> 
    <view>
        <subview>
        </subview>
        ... 18 ..
        <subview>
        </subview>
    </view>
</scrollview> 
```

当用户滚动到底部时，我发出一个 http 请求并根据该请求创建另外 20 个子视图并将它们放入主视图。

当我在 android 上测试时，这没有延迟，但在 ios 上，在加载新的子视图时，它会禁用滚动，我需要等待大约 3-4 秒才能启用滚动。此外，我不会一个一个地添加这个新的子视图，我创建了 20 个并将它们放入另一个临时视图中，然后将该临时视图添加到“视图”中。

我认为这可能会发生，因为我添加了太多视图，所以我尝试只添加 1 个视图，但结果仍然相同。

有没有办法做到这一点没有延迟，我检查了 twitter、foursquare、pinterest 应用程序，它们运行顺利。

# javascript - 需要用正确的 javascript 重写我的完整工作的 javascript

> ID：15008575
> 
> 赞同：0
> 
> 时间：2013-02-21T17:27:00.903
> 
> 标签：javascript, image, swap

有人可以帮我简化我的完整工作脚本，至少我写的是交换图像吗？

就这个：

```
 <img id="swap_green_img" onMouseOver="swapGreen()" onMouseOut="swapOrigGreen()" onclick="window.open('http://www.stackoverflow.com', '_blank')" style="position:relative; z-index:999; float:left; margin-right:10px; cursor:pointer; height:25px; width:30px" src="facebook_like_icon_orig_50x43.png" width="30" alt="" border="0" />

<img id="swap_red_img" onMouseOver="swapRed()" onMouseOut="swapOrigRed()" onclick="window.open('http://www.stackoverflow.com', '_blank')" style="position:relative; z-index:999; float:left; margin-right:10px; cursor:pointer; height:25px; width:30px;" src="facebook_like_icon_orig_50x43.png" width="30" alt="" border="0" />

   <script type="text/javascript">

   function swapGreen() {
   document.getElementById("swap_green_img").src='facebook_like_icon_green_50x43.png';
   }

   function swapRed() {
   document.getElementById("swap_red_img").src='facebook_like_icon_red_50x43.png';
   }
   function swapOrigRed() {
   document.getElementById("swap_red_img").src='facebook_like_icon_orig_50x43.png';
   }
   function swapOrigGreen() {
   document.getElementById("swap_green_img").src='facebook_like_icon_orig_50x43.png';
   }
   </script> 
```

首先十分感谢！托尔斯滕

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:28:55.877

```
function swap(color){
    document.getElementById("swap_" + color + "_img").src='facebook_like_icon_' + color + '_50x43.png';
} 
```

注意：不完全适合您的代码，但应该这样做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:58:58.843

```
<img id="swap_green_img" onMouseOver="swap('green')" onMouseOut="swap('green', true)" onclick="window.open('http://www.google.es', '_blank')" style="position:relative; z-index:999; float:left; margin-right:10px; cursor:pointer; height:25px; width:30px" src="facebook_like_icon_orig_50x43.png" width="30" alt="" border="0" />

<img id="swap_red_img" onMouseOver="swap('red')" onMouseOut="swap('red', true)" onclick="window.open('http://www.google.es', '_blank')" style="position:relative; z-index:999; float:left; margin-right:10px; cursor:pointer; height:25px; width:30px;" src="facebook_like_icon_orig_50x43.png" width="30" alt="" border="0" />

   <script type="text/javascript">

       function swap(color, orig) {
           document.getElementById("swap_" + color + "_img").src = 'facebook_like_icon_' + (orig ? 'orig_' : '') + color + '_50x43.png';
       }
   </script> 
```

# internet-explorer - 使用 PowerShell 和 Internet Explorer 下载文件

> ID：15008576
> 
> 赞同：1
> 
> 时间：2013-02-21T17:27:01.167
> 
> 标签：internet-explorer, powershell, download, http-headers, attachment

我想自动下载我的账单，所以我开始为此编写一个 PowerShell 脚本。大多数情况下一切正常：登录页面并导航到下载页面。

问题是，下载按钮没有直接链接到所需的 PDF 文件，而是链接到将文件作为 HTTP 标头中的附件提供的页面，所以我不能`System.Net.WebClient`用来下载文件。

但 IE 要求确认下载文件。**那么有没有机会在PowerShell的确认窗口中点击“保存”呢？**

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:52:37.660

不幸的是，我会采取不同的方法，跳过 Internet Explorer。但是，如果您可以获取 pdf 的 url（[可能使用 wireshark](http://www.wireshark.org)），请尝试使用 system.net.webclient 下载文件。您所说的所有内容都应该可以通过 powershell 完成。在访问文件时，您可能必须通过传递您的信任来发挥创造力，但根据您的计费公司使用的技术，这可能是可行的。这是一个延伸，但您可以直接使用 powershell 下载文件。

您也可以尝试告诉 IE 自动保存这种类型的文件，但不确定您使用的是什么版本的 IE。

# php - $.ajax 响应为空？

> ID：15008578
> 
> 赞同：-1
> 
> 时间：2013-02-21T17:27:10.000
> 
> 标签：php, json

在我的javascript中，

```
$.ajax({
                    type: 'GET',
                    url: 'http://133.333.33.33/reporting/summary_table.php?loc_id='+locid+'&loc_type='+loctype+'',
                    async: false,
                    success: function(data) {
                        alert(data);
                    },
                    dataType: 'json'
                }); 
```

在我的服务器端，我有这个，

```
$result = mysql_query($query);
$rows = array();
while ($row = mysql_fetch_assoc($result)) {
    $rows[] = $row;
}
echo json_encode($rows); 
```

当我在 FF 上检查我的萤火虫时，ajax 响应什么都没有，它会触发一个错误。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:43:50.563

按如下方式调用您的服务：

```
$.ajax({
url: 'http://yourserver.com/reporting/summary_table.php?loc_id='+locid+'&loc_type='+loctype+'',
success: function(data) {
alert(data);
},
dataType: 'jsonp'
}); 
```

注意**“jsonp”**数据类型。

然后在您的服务器端脚本上实现这个小改动：

```
$jsonp = json_encode($rows);
if(isset($_GET["callback"])) $jsonp = $_GET["callback"]."($jsonp)";
echo $jsonp; 
```

所以你的 php 将能够回答 jsonp 请求。

# android - 为安卓游戏创建菜单

> ID：15008583
> 
> 赞同：2
> 
> 时间：2013-02-21T17:27:18.940
> 
> 标签：android

我想为我的游戏创建菜单，就像在图片中 MI1 是带有图像的任何项目一样，它是 clicable 并且单击后会出现类似于 image1 的菜单，其中 I1-I5 是带有图像的可点击项目。我是安卓游戏的新手，你能告诉我关于如何做的任何想法吗？

![在此处输入图像描述](../Images/5d0ffa74cfe14a06a57fbf82e22baafa.png) I1-I7 菜单项 MI1 项用于呼叫菜单

![在此处输入图像描述](../Images/c037f3213a49b65c50f92f17270f1196.png)

MI1 直到点击

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:26:58.827

我将假设您熟悉 Android 开发的基础知识并且已经知道什么是布局、可见性或点击侦听器。

我建议使用[RelativeLayout](http://developer.android.com/guide/topics/ui/layout/relative.html)来安排屏幕上的元素。它允许您在屏幕上相对于彼此定位项目。例如，您可以让 MI1 位于屏幕的绝对中心，然后您可以将 I1 放在 MI1 上方，将 I2 放在 MI1 的右侧，依此类推。可用布局参数的完整列表可[在此处](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html)获得。您将希望将 I1、I2、... 的可见性最初设置为“消失”，这样它们就不会可见。

然后，您将向 MI1 添加一个 OnClickListener，这将在单击 MI1 时将 I1、I2、... 的可见性切换为“可见”。

# php - 使用一个？在 PHP MySQLi 准备的 INSERT 语句中包含几个变量

> ID：15008584
> 
> 赞同：0
> 
> 时间：2013-02-21T17:27:22.857
> 
> 标签：php, insert, mysqli

试图掌握 INSERT 查询的准备好的语句。这应该向数据库添加一个新用户：

```
$statement = $mysqli->prepare("INSERT INTO users (email,passwordhash) VALUES (?)");
$statement->bind_param('s', "'$email','$passwordhash'");
$statement->execute(); 
```

使用 single 是否正确？并以这种方式填充两个值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:36:09.800

mysqli 这样做的方式需要分别绑定所有变量

```
$statement = $mysqli->prepare("INSERT INTO users (email,passwordhash) VALUES (?,?)");
$statement->bind_param('ss', $email,$passwordhash);
$statement->execute(); 
```

但是，如果您希望按照自己的方式进行操作（例如，您已经准备好一个数组并希望使用一个占位符插入它），您需要一个帮助器类，它将自定义占位符转换为正确的 SQL 语句：

```
$data = array('email'=>$email, 'passwordhash'=>$passwordhash);
$db->query("INSERT INTO users SET ?u"); 
```

它会比原始的 mysqli 更短，但会做更多的事情——错误处理、分析等。

还要记住，当您要插入可变数量的字段时，mysqli 将变成一场噩梦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:28:32.130

应该是这样的。

```
$statement = $mysqli->prepare("INSERT INTO users (email,passwordhash) VALUES (?,?)");
$statement->bind_param('ss', $email,$passwordhash);
$statement->execute(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T17:36:48.880

在准备好的语句中，每个`?`用于替换一个值。

执行时，您的查询将是：

```
INSERT INTO users (email,passwordhash) VALUES ("'email','password'") 
```

那不是你想要的。您需要使用 2 个 ?s，每个值一个。

```
$statement = $mysqli->prepare("INSERT INTO users (email,passwordhash) VALUES (?,?)");
// Pass each variable as a separate parameter
$statement->bind_param('ss', $email, $passwordhash);
$statement->execute(); 
```

# angularjs - 从 angularjs 路由返回 rss 提要

> ID：15008585
> 
> 赞同：2
> 
> 时间：2013-02-21T17:27:32.107
> 
> 标签：angularjs

我正在尝试为生成 rss 提要的应用程序创建一个带有 angularjs 的前端。所以我想配置一个将呈现 rss 的路由。

所以基本思路是，当用户访问`http://myserver/#/myTopic/rss`服务器时，应该返回以下api调用的结果`http://myserver/api/1/myTopic/rss`

所以我创建了如下路线。

```
app.config(['$routeProvider', function($routeProvider) {
  $routeProvider.
    // render rss feed
    when('/:topic/rss', {
      controller: 'rssCtrl'
    });
}]); 
```

并且`rssCtrl`是这样定义的

```
var rssCtrl = function($scope, $location, $routeParams) {
  // what to put in it??
};
app.controller('rssCtrl', rssCtrl); 
```

我在概念上坚持在我的控制器中放置什么，因为我不希望 index.html 被呈现（我的单页应用程序）而是 rss 提要。

有任何想法吗？想法？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:55:39.517

> $location 服务只允许您更改 URL；它不允许您重新加载页面。当您需要更改 URL 并重新加载页面或导航到不同的页面时，请使用较低级别的 API，$window.location.href。-- [$位置](http://docs.angularjs.org/guide/dev_guide.services.%24location)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:38:38.010

我不认为这是可能的。Angular 是一个客户端框架，也就是说，它通过将 JavaScript 发送到生成 HTML 的浏览器来工作。您不能假设 RSS 提要阅读器会解释 JavaScript，事实上大多数都不会，因为它被认为存在安全风险。因此，您需要在服务器端生成 RSS 提要。

# recursion - Prolog - 制作递归除数

> ID：15008586
> 
> 赞同：1
> 
> 时间：2013-02-21T17:27:35.397
> 
> 标签：recursion, prolog, increment

好的，所以我是 Prolog 的初学者，所以如果我不能很清楚地表达我的问题，我很抱歉，但这是我苦苦挣扎的地方：

```
divide_by(X, D, I, R) :- (D > X), I is 0, R is X.

divide_by(X, D, I, R) :-
X >= D,
X_1 is X - D,
I_1 is I + 1,
divide_by(X_1, D, I_1, R),
R is X_1. 
```

我正在尝试编写一个程序，该程序将接受两个参数（X 和 D）并返回迭代次数（I）和余数（R），以便在用户输入时显示 X / D 的结果：divide_by(8, 3，我，R）。例如。

在跟踪代码时，我知道我是不正确的，因为第一个增量使其等于 0，因此计数是错误的。但是我不知道如何声明 I 为 0 而不会在每次通过循环递归时重置。（我不想在查询中将 I 声明为 0）

我还意识到，当它完成递归时（当 X < D 时），由于基本情况，我将被设置为 0。

有人能告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:59:17.973

您需要引入一个**累加器**并使用一个辅助谓词，如下所示：

```
divide(_,0,_,_) :- !, fail . % X/0 is undefined and so can't be solved.
divide(0,_,0,0) :- !.        % 0/X is always 0.
divide(X,Y,Q,R) :-           % the ordinary case, simply invoke the
  divrem(X,Y,0,Q,R)          % helper with the accumulator seeded with 0
  .

divrem(X,Y,Q,Q,X) :-   % if X < Y, we're done.
  X < Y .              %
divrem(X,Y,T,Q,R) :-   % otherwise...
  X >= Y ,             % as long as X >= Y,
  X1 is X - Y ,        % compute the next X
  T1 is T + 1 ,        % increment the accumulator
  divrem(X1,Y,T1,Q,R)  % recurse down
  .                    % Easy! 
```

# jquery - 'js 运行时错误预期对象' (line20) 或 $(document).ready 开始的位置

> ID：15008591
> 
> 赞同：-2
> 
> 时间：2013-02-21T17:27:47.117
> 
> 标签：jquery

```
<!DOCTYPE html>
<html>
<head>
 <div id="header">
     <center><button type="button" onclick="JavaScript:prompt('so far sogood')">
  click</button></center>
  </div>

 <style type="text/css">                                 
#one{width:100%; height:100px;background-color:red;}
#two{width:100%; height:100px;background-color:green;}
#header{width:100%; height:100px;background-color:yellow;}
</style>
<script type="text/javascript">

$(document).ready(function(
{
$('.one').mouseenter(function()
{
$(this).fadeOut('slow'); 
});

$('.one').mouseleave(function()
    {
 $(this).fadeIn('fast');

}); 

});
</script>

 </head>
<body bgcolor="black">

<div id="one"><center>HELLO</center></div>
 <div id ="two">hello</div>
 </body> 
```

看起来我的问题是我的 jquery 行在`$(document)`发生后立即开始。显然，在这发生之前我没有做正确的事情。我是 jquery 的新手，通常我使用外部 css 页面，所以会出现不同的格式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:30:45.740

您有语法错误：准备好的函数声明后缺少最后一个括号

`$(document).ready(function( {`

尝试

```
 <script type="text/javascript">
        $(document).ready(function() {
            $('.one').mouseenter(function() {
                $(this).fadeOut('slow');
            });

            $('.one').mouseleave(function() {
                $(this).fadeIn('fast');

            });

        });
    </script> 
```

`**[DEMO](http://jsfiddle.net/UQTY2/24/)**`

# java - “* 单词”的正则表达式

> ID：15008598
> 
> 赞同：1
> 
> 时间：2013-02-21T17:28:24.190
> 
> 标签：java, regex, words

那里有正则表达式大师吗？我需要一个匹配的Java正则表达式：

```
“随机特定词”

```

包括引号。因此我需要

```
匹配第一个报价，
RANDOMSTUFF（任意数量的单词，前面的 SPECIFICWORD 之间有空格）
SPECIFICWORD（我不会在这里指定的特定词。）
和结束语。

```

我**不想**匹配以下内容：

```
随机特定词
“随机的东西不是特定的词”
"RANDOMSTUFF SPECIFICWORD MORERANDOMSTUFF"

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T17:31:48.137

`\".*\sSPECIFICWORD\"`

如果您不想在两者之间使用引号，请使用`\"[^"]*\sSPECIFICWORD\"`

`.`匹配任何字符
`*`表示 0 个或多个前面的字符（在这种情况下，0 个或多个任何字符）
`\s`匹配任何空白字符
`SPECIFICWORD`将被视为字符串文字，假设没有特殊字符（如果有则转义）
`\"`匹配引号
`[^"]`表示除引号之外的任何字符（这`^`就是使它成为“除外”的原因）

此外，[此链接](http://www.regular-expressions.info/reference.html)可能很有用。正则表达式是强大的表达式，几乎适用于任何语言，因此熟悉使用它们将是一件好事。

编辑：

正如其他几位海报所指出的那样，只有在整行匹配时，添加`^`到开头和`$`结尾才会匹配。

`^`匹配行
`$`首 匹配行尾

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:33:18.047

^.*\s+SPECIFICWORD"$

'^' 匹配 '从行首' .* 匹配任何东西 \s+ 匹配'任意数量的空格，但至少有*一些*'SPECIFICWORD' 是字符串文字 $ 表示'这是行尾'

请注意，^ 和 $ 并不总是基于“行”；大多数语言允许您指定“多行”模式，这将导致它们匹配“字符串开头/字符串结尾”而不是一次匹配一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T17:33:25.473

尝试：

`\"[\w\s]*SPECIFICWORD\"`

像这样工作：

`\"` 匹配开场白

`[\w\s]*`匹配以下集合中的零个或多个字符：

*   `[a-zA-Z_0-9]`（`\w`部分）

*   `[ \t\n\x0B\f\r]`（`\s`部分）

`SPECIFICWORD`匹配`SPECIFICWORD`

`\"` 匹配结束报价

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T17:42:20.117

该字符串是逐行匹配还是会在文本中找到？如果是这样，您可以添加锚点以确保它与字符串匹配。

```
^(\".*\sSPECIFICWPRD\")$ 
```

说，在行的开头，寻找一个双引号，后跟零个或多个随机字符，后跟一个空格，然后是特定单词，然后是字符串末尾的双引号。

可选地，有用于设计正则表达式模式并实时查看它们匹配的优秀工具。

这里有几个例子：

[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/) [http://regex101.com/r/zC3fM1](http://regex101.com/r/zC3fM1)

# c++ - 在共享库和主库之间共享全局数据

> ID：15008599
> 
> 赞同：1
> 
> 时间：2013-02-21T17:28:25.983
> 
> 标签：c++, c, linker, global-variables, shared-libraries

我有一个名为 global_count 的变量，我想在共享库和程序的主要部分（最终还有其他库，但现在我已经简化了测试用例）之间共享它。

鉴于 globals.cpp 中的 global_count 声明：

```
extern "C" {
  int* global_count;
} 
```

我们编译创建一个 global.o 文件：

```
gcc -c global.cpp 
```

下面的 shared.cpp 将用于创建*shared.so*：

```
#include <stdio.h>
#include "global.h"

extern "C" {

void init_global_count(int* xp) {
  printf("Initialize global count to: %d\n", *xp);
  global_count = xp;  
};

void print_global_count(){  
  if(global_count) {
    printf("global_count is: %d\n",*global_count);   
  } else {
    printf("global_count* is not initialized!\n");
  }
};
} 
```

全球.h：

```
extern "C" {
extern int* global_count;
} 
```

主.cpp：

```
#include <stdlib.h>
#include <dlfcn.h>
#include <stdio.h>
#include "global.h"

int answer = 42;
int* gc_copy;

typedef void (*func)();
void (*init_global_count)(int*);
void (*print_global_count)();

void load(char* shared_lib){
  void* handle;  
  handle = dlopen(shared_lib,RTLD_NOW | RTLD_GLOBAL) ;
  printf("load:after dlopen\n");
  if(!handle)
  {
    printf("DID NOT LOAD!\n");
    fflush(stdout);
    fputs (dlerror(), stderr);
    exit(1);
  } else {
    printf("Loaded OK!\n");
    fflush(stdout);

    void (*init_global_count)(int*) = (void (*)(int*))dlsym(handle, "init_global_count"); 
    (*init_global_count)(&answer);
    void (*print_global_count)() = (void (*)())dlsym(handle, "print_global_count");
    (*print_global_count)();
  }
}

int main(){
  printf("main...\n");
  load((char*)"./shared.so");
  if(global_count)
    printf("main:global_count is: %d\n", *global_count);
  return 0;
} 
```

编译共享库和主库：

```
gcc -g -Wall -fno-omit-frame-pointer -fPIC -shared -o shared.so shared.cpp global.o
gcc -g -o main main.cpp global.o -ldl 
```

请注意，我们在这两个编译中都链接了*global.o*。

现在我们运行它，输出是：

```
main...
load:after dlopen
Loaded OK!
Initialize global count to: 42
global_count is: 42 
```

因此，*print_global_count()*（在 shared.cpp 中定义）内部报告的 *global_count* 如预期的那样是 42。但是，由于 global_count 指针尚未初始化，因此 main.cpp 中的 global_count 与 shared.cpp 中的 global_count 不同，因此不会从 main 报告 global_count。

我想知道是否可以在这里做我想做的事情（在.so和加载.so的模块之间共享一些全局数据）？如果是这样，我需要以不同的方式链接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:11:05.853

共享库中的所有对象都需要编译为位置无关（`-fpic`或`-fPIC`）。因此，链接`globals.o`到您的共享库是错误的。

您实际上是在创建`global_count`指针的两个实例。您正在尝试将指针值打印为十进制整数`main`。`global_count`版本中的全局指针变量`main`还没有初始化，所以所有字节的起始值都设置为`0`.

您可以`globals.o`从共享库中删除，并且 main 中只有一个`global_count`变量实例。但是，要让共享库看到`main`全局变量，必须使它们对它们可见。你可以通过在你的链接行中添加`-rdynamic`标志来做到这一点。`gcc``main`

# php - 排序扁平树

> ID：15008602
> 
> 赞同：0
> 
> 时间：2013-02-21T17:28:31.207
> 
> 标签：php, mysql, tree

我有一个具有树结构的表，包含 lvl、lft 和 rgt 列。最初我有一个扁平的树，`SELECT * FROM tree_table ORDER BY lft ASC`让它按树中的位置排序。但是现在我有`sort`列来对节点进行排序。我怎样才能让树按它在树中的位置和它的重量同时排序？我认为使用 MySQL 查询是不可能的，但是我如何使用 PHP 来获得它？

表数据示例按顺序排列`lft`

```
id | lft | rgt | level | sort
1 | 1 | 628 | 1 | 0
2 | 2 | 281 | 2 | 3
3 | 3 | 128 | 3 | 0
4 | 4 | 15 | 4 | 1
5 | 16 | 27 | 4 | 5
.... 
```

没有`sort`列我以相同的顺序显示行，但现在我想得到这个：

```
id | lft | rgt | level | sort
1 | 1 | 628 | 1 | 0
2 | 2 | 281 | 2 | 3
3 | 3 | 128 | 3 | 0
5 | 16 | 27 | 4 | 5
4 | 4 | 15 | 4 | 1
.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:27:43.327

好吧，根据您的示例，您可以通过以下方式获得所需的结果：

```
SELECT * FROM tree_table ORDER BY level, Sort DESC 
```

但我可能有点误解你的问题。

# c# - 从 Windows Phone 8 中的多个套接字读取数据

> ID：15008605
> 
> 赞同：0
> 
> 时间：2013-02-21T17:28:32.360
> 
> 标签：c#, sockets, windows-phone-8

我正在使用 C# 开发一个 WP8 应用程序，其中我有几个来自 Windows.Networking.Sockets.StreamSocket 类的套接字。我想从套接字读取数据而不触发单独的线程以在每个套接字上执行阻塞读取。但是，Socket.Select 方法不是 WP8 中支持的 API 的一部分。那么，有没有其他方法可以使用 WP8 提供的 API 来模拟 Socket.Select 的操作，或者唯一的选择是为每个套接字启动单独的线程？

# windows - Windows 7 配置文件默认图像文件位置

> ID：15008606
> 
> 赞同：4
> 
> 时间：2013-02-21T17:28:33.460
> 
> 标签：windows, windows-7, windows-7-x64

当用户登录到 Windows 7 系统时，我正在寻找下一个用户帐户使用的图像的位置。有人可以指出我正确的方向。

以下是我所指的图片的截图： ![在此处输入图像描述](../Images/4d2e281b02158f928180d9c55b665234.png)

需要该位置，以便我可以通过程序添加/编辑/删除图像（例如，不同员工类型的不同图标。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T17:53:28.753

不是真正的编程问题，但位置似乎是`C:\ProgramData\Microsoft\User Account Pictures\Default Pictures`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T18:28:50.723

我在这里只能访问 Windows XP，但是查看`picturespage.js`里面的源代码`nusrmgr.cpl`（用户控制面板小程序），它使用以下代码加载图片：

```
EnumPics(top.window.GetShell().NameSpace(35).Self.Path + "\\Microsoft\\User Account Pictures\\Default Pictures"); 
```

[命名空间](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774085%28v=vs.85%29.aspx)35 (0x23) 显然是`ssfCOMMONAPPDATA`.

“通用应用程序数据”路径[通常]`C:\Documents and Settings\All Users\Application Data\`在 XP 和`C:\ProgramData\`Vista 及更高版本上。该路径可以通过 Windows API 通过调用来[`SHGetKnownFolderPath`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762181%28v=vs.85%29.aspx)检索`CSIDL_COMMON_APPDATA`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T17:56:59.147

你可以在这里找到它：

**全部 - 默认图片**

```
C:\ProgramData\Microsoft\User Account Pictures\Default Pictures 
```

**标准 - 管理员**

```
C:\ProgramData\Microsoft\User Account Pictures\user.bmp 
```

**客人**

```
C:\ProgramData\Microsoft\User Account Pictures\guest.bmp 
```

# ruby-on-rails - 用 gsub 替换带有重音符号的正则表达式

> ID：15008611
> 
> 赞同：0
> 
> 时间：2013-02-21T17:28:51.807
> 
> 标签：ruby-on-rails, regex

我尝试获取一个用于在捕获的字符串周围设置 < b > 的函数（不区分大小写），如下所示：

```
bold_string("Hello everyone","o")
> "Hell<b>o</b> every<b>o</b>ne"

bold_string("HEllo evEryonE", "e")
> "H<b>E</b>llo <b>e</b>v<b>E</b>ryon<b>E<b/>" 
```

现在，我的功能如下所示：

```
def bold_string(str, search)
  str.gsub(/(#{search})/i, '<b>\1</b>')
end 
```

它与前面的示例完美配合，但不适用于带有重音的单词。有我期望的结果：

```
bold_string("Petite bête", "e")
> "P<b>e</b>tit<b>e</b> b<b>ê</b>t<b>e</b>"

bold_string("Petite bête", "ê")
> "P<b>e</b>tit<b>e</b> b<b>ê</b>t<b>e</b>" 
```

换句话说，我必须找到一个像 /search/i 这样的正则表达式，它说“你必须找到单词'search'或带有一些重音的单词'search'”。

**编辑 ：**

我看到我的例子太简单了......它应该适用于字符串而不是简单的字符：

```
bold_string("Petite bête", "êt")
> "P<b>et</b>ite</b> b<b>êt</b>e" 
```

问候

皮埃尔

**edit2：** 我使用了 FJ 的解决方案和这个新功能

```
def regex_from_string_including_accents(str)
  accents = ['aàâ', 'eéèêë', 'oöô' 'iî']
  return str.gsub(/./) do |letter|
    accent_group = accents.detect{|group| group.include?(letter)}
    accent_group ? "[#{accent_group}]" : letter
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:49:23.900

您可以执行以下操作：

```
def bold_string(str, search)
  h = { "e" => "[eéê]", "a" => "[aáâ]" }
  regex = search.gsub(/./) {|s| h.fetch(s, s)}
  str.gsub(/(#{regex})/i, '<b>\1</b>')
end 
```

显然，这只是向您展示了如何开始，您将需要填充`h`其他重音版本的字符。

示例：http: [//ideone.com/KukiKc](http://ideone.com/KukiKc)

# ios - 在情节提要中，有没有办法从布局中删除隐藏的项目？

> ID：15008623
> 
> 赞同：1
> 
> 时间：2013-02-21T17:29:29.787
> 
> 标签：ios, objective-c

我有一个带有图像缩略图的表格单元格（根据该行是否有图像，可能会或不会隐藏）和右侧的 textView。

无论如何让 textView 向左扩展以覆盖图像在隐藏时使用的区域而不需要代码？

或者另一种表达方式：在 html 中，您已隐藏 (visibility:hidden;) 并从布局中删除 (display:none;)，看起来 view.hidden = NO 相当于隐藏的 css; 我想要从布局中删除的css等价物。

有没有无代码解决方案？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:53:42.230

是的，您可以在具有布局约束的代码中执行此操作。如果您的文本视图和图像视图之间有水平间距约束，您可以在 IB 中为其创建一个 IBOutlet，然后在代码中更改其常量的值。因此，在 cellForRowAtIndexPath: 中，您将有某种 if 子句来测试您是否有该行的图像：

```
 if (indexPath.row %2 == 0) {
        cell.iv.hidden = YES;
        cell.imageViewToTextViewConstraint.constant = -48;
    }else{
        cell.iv.hidden = NO;
        cell.imageViewToTextViewConstraint.constant = 8;
    } 
```

iv 是我到单元格图像视图的出口，它的宽度是 48，因此将约束设置为 -48 基本上会将文本视图扩展到图像视图左侧的位置（图像视图仍然存在，它只是隐藏） . 在此示例中，我只是将偶数行设置为没有图像，奇数行具有我在 IB 中设置的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:35:23.207

不，HTML / CSS 布局非常先进，`NSLayoutConstraint`当您设置其内容时，您必须自己处理您的 textView 框架（或使用约束），使用代码。

# amazon-web-services - 是否可以使用 CloudSearch *only* 进行存储？

> ID：15008625
> 
> 赞同：0
> 
> 时间：2013-02-21T17:29:38.760
> 
> 标签：amazon-web-services, amazon-cloudsearch

阅读[文档](http://aws.amazon.com/cloudsearch/)，还不是很清楚。

我想要的是能够存储和检索简单的 json 文档。使用 CloudSearch，似乎可以以 SDF 格式存储文档，然后搜索它们，但它只返回文档 ID 和指定字段的一小部分（我认为是 200 个字符）。

有没有办法仅使用 CloudSearch 按 ID 检索完整文档？或者它是否旨在用作搜索然后使用您的主存储服务的**附加工具？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T00:40:29.323

如果您将 id 索引为文字并使用该确切 id 进行搜索，那么可以，但以这种方式使用 CloudSearch 似乎是一种浪费。S3呢？

# ios - 按下主页按钮时如何关闭 UIAlertView？

> ID：15008633
> 
> 赞同：1
> 
> 时间：2013-02-21T17:30:16.393
> 
> 标签：ios, objective-c, xcode, uialertview

我正在制作一个应该支持从 iOS5 开始的 iOS 版本的应用程序。它使用 UIAlertView，如果它在用户按下主页按钮时可见，我希望在用户返回应用程序之前将其关闭（即，当使用多任务重新打开应用程序时它消失了）。应用程序委托中的所有方法都将其显示为不可见 (isVisible=NO)，即使它在重新打开时仍然可见。有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T17:50:53.470

或者您从 UIAlertView 继承您的类并为 UIApplicationWillResignActiveNotification 添加 NSNotification 观察者，并在发生通知时调用 alertview 方法`dismissWithClickedButtonIndex:`

示例：.h 文件

```
#import <UIKit/UIKit.h>

@interface ADAlertView : UIAlertView

@end 
```

.m 文件

```
#import "ADAlertView.h"

@implementation ADAlertView

- (void) dealloc {
    [[NSNotificationCenter defaultCenter] removeObserver:self];
}

- (id) initWithTitle:(NSString *)title
             message:(NSString *)message
            delegate:(id)delegate
   cancelButtonTitle:(NSString *)cancelButtonTitle
   otherButtonTitles:(NSString *)otherButtonTitles, ... {
    self = [super initWithTitle:title
                        message:message
                       delegate:delegate
              cancelButtonTitle:cancelButtonTitle
              otherButtonTitles:otherButtonTitles, nil];

    if (self) {
        [[NSNotificationCenter defaultCenter] addObserver:self
             selector:@selector(dismiss:)
                 name:UIApplicationDidEnterBackgroundNotification
               object:nil];
    }

    return self;
}

- (void) dismiss:(NSNotification *)notication {
    [self dismissWithClickedButtonIndex:[self cancelButtonIndex] animated:YES];
}

@end 
```

使用从 UIAlertView 继承的您自己的类，您不需要存储指向 alertview 或其他内容的链接，您只需要做一件事，将 UIAlertView 替换为 ADAlertView（或任何其他类名）。随意使用此代码示例（如果您不使用 ARC，则应在`[super dealloc]`之后添加到 dealloc 方法`[[NSNotificatioCenter defaultCenter] removeObserver:self]`）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T17:39:36.600

保留对`UIAlertView`应用程序委托中显示的引用。显示警报时，设置参考；当警报被解除时，`nil`退出参考。

在您的应用程序委托`applicationWillResignActive:`或方法中，在对警报视图的引用上`applicationDidEnterBackground:`调用该方法。`dismissWithClickedButtonIndex:animated:`这将负责在按下“主页”按钮时将其关闭。

请记住，`applicationWillResignActive:`诸如电话之类的事情会被调用，因此您需要决定在这种情况下是否要关闭警报，或者是否应该通过电话保持警报。

# sql - 仅用 JOIN(s) 替换相关子查询？

> ID：15008636
> 
> 赞同：1
> 
> 时间：2013-02-21T17:30:28.927
> 
> 标签：sql, oracle, query-optimization, subquery, correlated-subquery

[这个问题在某种程度上是对我之前](https://stackoverflow.com/questions/14966797/is-it-a-slow-query-can-it-be-improved)的问题的跟进。它还基于[SQLZOO 的“SELECT 中的 SELECT 教程”](http://sqlzoo.net/wiki/SELECT_within_SELECT_Tutorial)。这次是关于*Task# 8*。

首先，一个可接受的解决方案：

```
SELECT w1.name, w1.continent FROM world w1
WHERE w1.population > ALL(
SELECT w2.population*3 FROM world w2
WHERE w2.continent=w1.continent and w2.name<>w1.name) 
```

这一次，相关查询在逻辑中根深蒂固。

仅使用 JOIN(s)仍然可以**合理地重写此查询吗？**应该是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:51:20.350

所以任务 8 说：一些国家的人口是任何邻国（在同一大陆）的三倍以上。给国家和大洲。

我觉得有点不清楚。哪些是邻居？这就是大陆上所有的国家吗？如果是，那么下一个问题是我们是否与最小邻居或最大邻居进行比较。假设它是最大的邻居。然后查询将是这样的

```
select name, continent
  from world w1
 where w1.population > (select max(3*w2.population) 
                          from world w2
                         where w2.continent =  w1.continent
                           and w2.name      <> w1.name) 
```

否则，如果它是所有邻居的 3 倍，那就是这个

```
select name, continent
  from world w1
 where w1.population > (select 3*sum(w2.population) 
                          from world w2
                         where w2.continent =  w1.continent
                           and w2.name      <> w1.name) 
```

希望能帮助到你。

编辑：Oracle SQL 手册 (E26088-01) 说关于 ALL 功能：

> 将值与列表中的每个值或查询返回的值进行比较。

例子：

```
SELECT * FROM employees
WHERE salary >=
ALL ( 1400, 3000)
ORDER BY employee_id; 
```

首先进行聚合，然后进行比较，我们将其简化为一个比较。给定示例表中的结果是相同的。但是针对所有国家的查询实际上可能会给出不同的结果。所以毕竟我必须说你的查询更好。如果您在一个大陆上有一个人口为 1 mio、3.5 mio 和 11 mio 的国家，那么实际上第二个国家是第一个国家的 3 倍，第三个国家是第二个国家的 3 倍。我的查询只会将第二个国家与第三个国家进行比较，但您的查询也会将第一个国家与第二个国家进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:37:03.840

对于此特定查询，您需要每个大陆上的最大值和第二大值。我会用窗口函数来解决这个问题：

```
select w.continent,
       max(case when seqnum = 1 then w.name end) as name
from (select w.*, 
             row_number() over (partition by continent order by population desc) as seqnum
      from world w
     ) w
where seqnum in (1, 2)
group by continent
having max(case when seqnum = 1 then population end) > 3*max(case when seqnum = 2 then population end) 
```

好的，考虑到问题的来源，我承认这可能有点先进。

因此，这是一种使用连接而不是相关子查询的方法：

我认为以下是你的逻辑：

```
select w.name, w.continent
from world w join
     (SELECT w.continent, maxpopulation,
             max(case when population <> maxpopulation then population end) as secondmax
      FROM world w join
           (select continent, max(population) as maxpopulation
            from world
            group by continent
           ) c
           on w.continent = c.continent
      group by w.continent, maxpopulation
     ) wc
     on w.continent = wc.continent and w.population = maxpopulation
where population >= 3*secondmax 
```

所以答案是“是的，你可以在没有相关子查询的情况下做到这一点。” 在最常见的情况下，您可以使用联接和分组依据重写相关子查询。

# c# - 广告快捷方式

> ID：15008637
> 
> 赞同：0
> 
> 时间：2013-02-21T17:30:34.263
> 
> 标签：c#, winapi, installation, windows-installer, shortcut

有没有办法在 C# 或 WinAPI 函数中以编程方式创建广告快捷方式（例如，参见 MS Office 快捷方式）？

我只找到了从此类快捷方式获取/读取信息的方法以及 MSI 创建此类快捷方式的知识，但没有创建它们的方法（没有 msi 安装程序）

作为此类快捷方式类型的副作用，它们在属性窗口中不可编辑，我想创建这种“不可编辑”的快捷方式（就像 MS Office 一样——我对其他广告快捷方式功能并不感兴趣）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T00:25:31.330

并不真地。广告快捷方式的目标是已安装产品组件的密钥文件。这样它就可以在您单击它时进行健康检查。

如果没有 MSI，所有这一切都是不可能的。

ShellAPI 可能会公开 WindowsInstaller 的 CreateShortcut 操作正在使用的函数，但我确信它会将 ProductCode 和 ComponentID 等内容作为参数。

现在，如果您是使用 MSI 安装的，我想可能使用 DTF 创建已安装 MSI 的副本，更新 ShortCut 表并重新缓存产品，从而创建广告的快捷方式。但我猜这不是你的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T10:13:47.947

虽然您无法在不涉及 Windows Installer 的情况下创建 MSI 公布的快捷方式，但您可以创建任何 Shell 命名空间对象的快捷方式（Windows Installer 所做的一切）。这首先需要一个外壳扩展 DLL 和自定义代码来实际创建快捷方式。

有关详细信息，请参阅 MSDN [Shell 参考](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773177%28v=vs.85%29.aspx)和[本文](http://blogs.msdn.com/b/oldnewthing/archive/2012/12/10/10375909.aspx)。

如果您只想提供延迟安装，您可以将快捷方式指向一个存根可执行文件，该存根可执行文件会在需要时触发任何检查和安装。

# android - 为什么 Android 数据应该在 onPause() - onResume() 中而不是在 onStop() - onStart() 中提交/读取？

> ID：15008639
> 
> 赞同：3
> 
> 时间：2013-02-21T17:30:44.113
> 
> 标签：android, android-activity

文档建议数据应该在 / 中提交/`onPause()`读取`onResume()`。

然而，当应用程序不再处于前台时，其数据结构保持不变，这表明可以延迟提交/读取数据，直到应用程序不再可见，即在`onStop()`/中`onStart()`。特别是因为`onStop()`保证在之前被调用`onDestroy()`。

两种方法都适合吗？此处提供的文档仅仅是指导吗？

**更新** 假设您的应用程序需要保存相对大量的数据，例如对大图像的编辑。然后肯定*不会*`onPause()`在/中写入/读取`onResume()`，以免用户体验变得迟缓。在这种情况下，人们会选择写入/读取`onStop()`/ `onStart()`。真的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T17:40:49.697

using 的问题`onStop`是您无法保证何时调用它，因为唯一确定的是它会在之前调用`onDestroy`。如果您等到`onStop`提交数据，则其他活动显示/使用任何这些更改可能为时已晚。同样的事情适用于`onStart`，如果您的活动只是在后台，则可能不需要重新启动它，因此您将拥有过时的数据。使用`onResume`并`onPause`保证您的数据始终是最新的，一旦活动进入后台，就会进行提交，并在新数据可见时立即加载。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T17:37:52.833

是的，这只是一个指导方针（通常是一个很好的指导方针）。何时提交更改完全取决于您。我个人喜欢创建允许简化数据库或 SharedPreferences 的存储对象，并且当进行更改时，我会立即提交这些更改。对于简单的数据存储，这对用户来说将是快速且不可见的。对于大型数据集，这可能需要更多时间，您可能希望在某个时间间隔以及 onPause 中进行这些写入。

至于何时阅读 - 您可以随时阅读，但较长的阅读通常会影响用户体验，除非您已在另一个线程中处理它，例如使用 AsyncTask。

**进一步回答您的更新：** 这取决于开发人员，但是我会*写入*并在`onPause()`必要时*读取*一个单独的线程，可能使用`onResume()`. 我还可以使用线程在预定的时间间隔内写出数据`Timer`，具体取决于它将如何影响当前会话的用户体验，以及电话关闭并在`onPause()`调用之前丢失所有数据是否会是灾难性的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T18:11:01.937

真正的答案是，onPause 是保证在 Android破坏您的进程***之前调用的唯一方法。***如果用户离开您的应用程序接听电话，并且 Android 决定关闭您的进程，那么您只接到 onPause 电话是完全合法的。如果你没有在那里保存你的状态，当用户点击后退按钮时，你最终会以不同于用户离开它的状态重新创建你的活动。

# cxf - CXF TLSClientParameters setDisableCNCheck true does not work

> ID：15008647
> 
> 赞同：3
> 
> 时间：2013-02-21T17:31:15.007
> 
> 标签：cxf

I am using CXF 2.7.3 and want to disable CN checking in code with:

```
TLSClientParameters tlsParams = conduit.getTlsClientParameters();
if (tlsParams == null) {
    tlsParams = new TLSClientParameters();
}
tlsParams.setSecureSocketProtocol(sslAlgorithm);
tlsParams.setUseHttpsURLConnectionDefaultHostnameVerifier(false);
tlsParams.setDisableCNCheck(true); 
```

It does not seem to work for me. I've tried all kinds of examples from the WEB with no luck. If I use cxf.xml it works with this:

```
<http-conf:conduit name="*.http-conduit"
    xmlns:sec="http://cxf.apache.org/configuration/security"
    xmlns="http://cxf.apache.org/transports/http/configuration">
    <http-conf:tlsClientParameters disableCNCheck="true" useHttpsURLConnectionDefaultHostnameVerifier="false" />
</http-conf:conduit> 
```

I would rather not pull in Spring config just to get this one-liner to work. Any ideas? Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-31T08:57:28.987

我真的不确定它会解决你的问题（没有足够的信息，而且我没有足够的声誉来对你的帖子发表评论:-)）但是因为我花了几天时间解决类似的问题，所以制作信息不会有什么坏处上市...

添加拦截器时我遇到了类似的问题。如果您 `client.getEndpoint();` 在代码中的某个位置调用，管道将被重新初始化，参见

[http://mail-archives.apache.org/mod_mbox/cxf-users/201305.mbox/%3COFB00B58DA.85E410E4-ONC1257B6D](http://mail-archives.apache.org/mod_mbox/cxf-users/201305.mbox/%3COFB00B58DA.85E410E4-ONC1257B6D)

解决方案是编写一个自定义拦截器来执行客户端/管道配置。

# css - @font-face fonts within bootstrap css not displaying in firefox

> ID：15008654
> 
> 赞同：2
> 
> 时间：2013-02-21T17:31:44.987
> 
> 标签：css, google-chrome, firefox, twitter-bootstrap, fonts

I am able to display fonts in chrome, but not in firefox. I'm wondering if this is an issue because I'm using the bootstrap framework. Here's my code:

```
@font-face
{
    font-family:"bodyFont";
    src: url("http://caseymmiller.com/galapagos/fonts/museosans_300.otf");
}

body 
{
    margin: 0;
    font-family: "bodyFont";
    font-size: 15px;
    line-height: 20px;
    color: #333333;
    background-color: #ffffff;
} 
```

Also, upon uploading it to my server, only one font is now appearing in chrome... and local sourcing wasn't working so I removed it. I am quite confused. [http://caseymmiller.com/galapagos/bootstrapInvasive/Invasive.html](http://caseymmiller.com/galapagos/bootstrapInvasive/Invasive.html)

This is what I have in the css now. I tried what you listed before, but when sourcing both urls for each font, none of them would appear. That's why some are commented out right now. These are the sources that I want to use from now on.

```
@font-face
{
font-family:"headerFont";
src: url("http://livinggalapagos.org/static/Fonts/qhyts__.ttf");
/*src: url("http://livinggalapagos.org/static/Fonts/qhyts__.woff");*/

}

@font-face{
font-family:"subHeadFont";
src: url("http://livinggalapagos.org/static/Fonts/museosans_500.ttf");
src: url("http://livinggalapagos.org/static/Fonts/museosans_500.woff");

}

@font-face{
font-family:"bodyFont";
src: url("http://livinggalapagos.org/static/Fonts/museosans_300.ttf");
/*src: url("http://livinggalapagos.org/static/Fonts/museosans_300.woff");*/

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:07:27.427

我想知道您是否在 2 个属性中没有拼写错误？

```
src: url('fonts/museosans_300-.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
url('fonts/museosans_300-.ttf')  format('truetype'), /* Safari, Android, iOS */ 
```

这两个不应该

```
src: url('fonts/museosans_300-webfont.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
url('fonts/museosans_300-webfont.ttf')  format('truetype'), /* Safari, Android, iOS */ 
```

请注意文件路径末尾 添加的**webfont 。**

在进行这些更改后，请务必清除浏览器缓存。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:39:45.600

`@font-face`是一个复杂的属性。这里有一些资源可以帮助您编写“跨浏览器”代码`@font-face`。

[https://developer.mozilla.org/pt-BR/docs/CSS/@font-face](https://developer.mozilla.org/pt-BR/docs/CSS/@font-face)

[http://www.fontsquirrel.com/tools/webfont-generator](http://www.fontsquirrel.com/tools/webfont-generator)

# erlang - Erlang Module Hook 上的 ejabberd 2.1.11 错误

> ID：15008659
> 
> 赞同：0
> 
> 时间：2013-02-21T17:31:57.630
> 
> 标签：erlang, xmpp, ejabberd

我一步一步地按照这篇文章，我似乎是唯一一个得到这个特定错误的人。 [http://jasonrowe.com/2011/12/30/ejabberd-offline-messages/comment-page-1/#comment-2274](http://jasonrowe.com/2011/12/30/ejabberd-offline-messages/comment-page-1/#comment-2274)

*   我创建并编译了 erlang 代码。
*   我将 .beam 文件添加到指定的位置。
*   我更新了 ejabberd.cfg 文件。

但是当我向 ejabberd 服务器发送脱机消息时，我在日志文件中收到以下错误：

* * *

```
=ERROR REPORT==== 2013-02-21 15:34:50 ===
E(<0.365.0>:ejabberd_hooks:294) : {if_clause,
                                      [{mod_http_offline,create_message,3},
                                       {ejabberd_hooks,run1,3},
                                       {ejabberd_sm,route,3},
                                       {ejabberd_local,route,3},
                                       {ejabberd_router,route,3},
                                       {ejabberd_c2s,session_established2,2},
                                       {p1_fsm,handle_msg,10},
                                       {proc_lib,init_p_do_apply,3}]}
running hook: {offline_message_hook,
                  [{jid,"test","zspc-10","Spark 2.6.3","test","zspc-10",
                       "Spark 2.6.3"},
                   {jid,"johan","zspc-10",[],"johan","zspc-10",[]},
                   {xmlelement,"message",
                       [{"id","4z5S1-69"},{"to","johan@zspc-10"}],
                       [{xmlelement,"x",
                            [{"xmlns","jabber:x:event"}],
                            [{xmlelement,"composing",[],[]}]}]}]} 
```

错误发生在`create_message`函数中。这是它的样子：

```
create_message(_From, _To, Packet) ->
        Type = xml:get_tag_attr_s("type", Packet),
        FromS = xml:get_tag_attr_s("from", Packet),
        ToS = xml:get_tag_attr_s("to", Packet),
        Body = xml:get_path_s(Packet, [{elem, "body"}, cdata]),
        if (Type == "chat") ->
            post_offline_message(FromS, ToS, Body)
        end. 
```

如果有任何帮助，我正在 Windows 7 电脑上运行 ejabberd 2.1.11 并使用 erlang R14B04 编译代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T17:46:09.423

这是该博客文章中的相关代码：

```
create_message(_From, _To, Packet) ->
        Type = xml:get_tag_attr_s("type", Packet),
        FromS = xml:get_tag_attr_s("from", Packet),
        ToS = xml:get_tag_attr_s("to", Packet),
        Body = xml:get_path_s(Packet, [{elem, "body"}, cdata]),
        if (Type == "chat") ->
            post_offline_message(FromS, ToS, Body)
        end. 
```

你得到一个`if_clause`错误，这意味着`if`表达式的任何子句都不是真的。与许多其他语言不同，Erlang*要求*至少有一个条件为真，否则您将收到类似这样的运行时错误。

`Type`所以问题是当不是时代码应该做什么`"chat"`。如果它什么都不做，添加一个`true`子句：

```
 if (Type == "chat") ->
            post_offline_message(FromS, ToS, Body);
          true ->
            ok
        end. 
```

或者更好的是，将其重写为`case`表达式。在 Erlang 中，`case`表达式比`if`表达式更常见。

```
 case Type of
          "chat" ->
            post_offline_message(FromS, ToS, Body);
          _ ->
            ok
        end. 
```

也就是说，如果`Type`匹配`"chat"`，则评估第一个子句，否则，如果匹配`_`（通配符匹配），则评估第二个子句。[另请参阅此问题](https://stackoverflow.com/q/963918/113848)中的示例。

# c - 如何为 Arduino 使用串行打印

> ID：15008662
> 
> 赞同：0
> 
> 时间：2013-02-21T17:32:11.790
> 
> 标签：c, eclipse, optimization, arduino

我想`Serial.print()`用于 Arduino 项目。具体问题是我想打印两个用斜杠分隔的数字，如下所示：

`56 / 345`

我可以做

```
int x = 56;
int y = 345;
Serial.print(x);
Serial.print("/");
Serial.print(y); 
```

我可以避免第二次连续打印或只进行一次连续打印吗？API 不使用`printf()`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:42:04.127

您可以`sprintf()`对临时字符串执行操作，然后`Serial.print()`：

```
char tmp[32];  
sprintf(tmp, "%d/%d", x, y);  
Serial.print(tmp); 
```

# drupal - How to cache PHP code being called from the database?

> ID：15008663
> 
> 赞同：0
> 
> 时间：2013-02-21T17:32:13.887
> 
> 标签：drupal, drupal-7, haml, apc

I've got some pages (or "nodes" in Drupal parlance) that have the content of a PHP function which calls an external library to render a HAML template. These nodes (meaning the actual `<?php ?>` tags and functions to call the library) are stored in the database and go through some sort of `eval` style call when the page is requested.

If I'm using APC, will the opcodes for the functions stored in the database still cache? Or will it go through a fresh cycle of requesting the library, running the function, generating the output, and storing that to be `echo`ed every time the page is hit?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:53:43.703

APC 不缓存优化后的评估代码，至少现在还没有。要利用它，您应该将其转储到磁盘。如果代码中没有敏感数据，您可以使用临时文件并仅将文件名/密钥存储在 APC 中以进行检索。然后，您应该仅在更新了在数据库中生成代码所需的信息时才更新文件。

# xml - validate two xml with a single schema

> ID：15008664
> 
> 赞同：2
> 
> 时间：2013-02-21T17:32:18.080
> 
> 标签：xml, xsd

I have two different xml, I would like to know how I can validate each of them with a single schema (xsd). this schema must be valid for two types of xml.

e. g.:

**file1.xml**

```
<product>all</product> 
```

**file2.xml**

```
<data>data all</data> 
```

Thanks!.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:46:08.557

它可能很简单：

```
<?xml version="1.0" encoding="utf-8" ?>
<!-- XML Schema generated by QTAssistant/XSD Module (http://www.paschidev.com) -->
<xsd:schema elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="product" type="xsd:string"/>
    <xsd:element name="data" type="xsd:string"/>
</xsd:schema> 
```

...或者像拥有三个文件一样复杂，一个（您想要的一个 XSD）包括 file1.xsd 和 file2.xsd。

# java - 自定义 Eclipse 透视图中的多个编辑器区域

> ID：15008672
> 
> 赞同：4
> 
> 时间：2013-02-21T17:32:50.970
> 
> 标签：java, eclipse, plugins, editor, perspective

对于自定义 Eclipse 插件，我一直在研究创建一个透视图，该透视图将有助于以一种使编辑器工作更轻松的方式组织视图，主要要求是我们希望同时在透视图中看到两个编辑器区域。

我们的插件使用了两种新的编辑器类型：“工作流编辑器”（WE）和“试用编辑器”（TE） TE 在一个单独的区域开放。

本质上，它看起来像下面链接的透视图，除了右上角的 Java 编辑视图，我们有 WE 视图，右下角的文本编辑视图，我们会有TE的意见。

（[http://dl.dropbox.com/u/4148918/eclipse-multi-editor.jpg](http://dl.dropbox.com/u/4148918/eclipse-multi-editor.jpg)）

我在这里查看了有关创建透视图的教程：http: [//www.eclipse.org/articles/using-perspectives/PerspectiveArticle.html](http://www.eclipse.org/articles/using-perspectives/PerspectiveArticle.html)。虽然这是一个好的开始，但默认透视布局似乎只支持一个编辑器区域，所有编辑器视图都在其中打开：

```
public void defineLayout(IPageLayout layout) {
        // Editors are placed for free.
        String editorArea = layout.getEditorArea();

        // Place navigator and outline to left of
        // editor area.
        IFolderLayout left =
                layout.createFolder("left", IPageLayout.LEFT, (float) 0.26, editorArea);
        left.addView(IPageLayout.ID_RES_NAV);
        left.addView(IPageLayout.ID_OUTLINE);
} 
```

如何自定义此布局，使其具有两个编辑器区域而不是一个，每个编辑器区域都支持编辑一种不同的文件类型？虽然我发现了一些编辑器窗格被拆分的在线示例，但这些示例本身并不支持在其中一个编辑器中自动打开一种文件类型，而这是该插件所需的功能。

或者，是否可以使用“文件夹”，并在这些专用文件夹中打开每个编辑器的实例？如果是这样，定义与这些编辑器关联的新视图的入口点是什么，比如上面用“IPageLayout.ID_*”枚举的那些？

非常感谢有人提出的任何建议——我认为让两个编辑器同时出现在 eclipse 插件的不同部分是一个很酷的问题，如果我们能让它工作那就太好了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T17:40:13.357

> 如何自定义此布局，使其具有两个编辑器区域而不是一个，每个编辑器区域都支持编辑一种不同的文件类型？

你不能。正如您所提到的，您只能在 Eclipse 透视图中定义一个编辑器区域。

你有两个选择。您的第一选择是创建自己的多页编辑器，其中一个页面上带有“工作流编辑器”(WE)，另一页上带有“试用编辑器”(TE)。

您的第二个选择是使用两个（或更多）编辑器区域从头开始构建一个 Eclipse 工作区。您可以查看 Eclipse 源代码以获取帮助，但您基本上是在构建自己的 Eclipse。

# sql - 选择 SQL JOIN 失败的值

> ID：15008674
> 
> 赞同：3
> 
> 时间：2013-02-21T17:32:58.327
> 
> 标签：sql, sql-server, tsql

目前，要找出 SQL 中连接失败的值，我使用以下方法

```
SELECT DISTINCT ACC.Name
     ,ACC.Area
     ,CASE
          WHEN A.Area IS NULL AND N.Name IS NULL
               THEN 'Name and Area do not match'
          WHEN A.Area IS NULL 
               THEN 'Area does not match'
          WHEN N.Name IS NULL
               THEN 'Name is null'
          ELSE 
               'Yes'
          END as IsTopAccount
 FROM Test.dbo.Accounts ACC
 LEFT JOIN Test.dbo.TopAccounts A ON A.Area = ACC.Area
 LEFT JOIN Test.dbo.TopAccounts N ON N.Name = ACC.Name 
```

在上面，一个帐户必须`TopAccounts`在区域和名称上都加入到表中。我需要这两个连接来测试 case 语句中的每个条件。

是否可以更有效地测试 case 语句中的每个条件，也许用一个`LEFT JOIN`而不是两个单独`LEFT JOIN`的？

看到这个[sql fiddle](http://sqlfiddle.com/#!3/eea35/3)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T17:38:54.717

我想这会起作用：

```
SELECT ACC.Name
     ,ACC.Area
     ,CASE
          WHEN T.Area IS NULL AND T.Name IS NULL
               THEN 'Not matching at all'
          WHEN T.Area != ACC.Area
               THEN 'Matching for name only'
          WHEN T.Name != ACC.Name
               THEN 'Matching for area only'
          ELSE 
               'Yes'
          END as IsTopAccount
 FROM A ACC
         LEFT JOIN TA T ON T.Area = ACC.Area 
                                        OR T.Name = ACC.Name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T17:50:36.290

你也许可以用两个来做到这一点：

```
SELECT ACC.Name
     ,ACC.Area
     ,CASE
          WHEN A.Area IS NULL AND N.Name IS NULL
               THEN 'Name and Area do not match'
          WHEN A.Area IS NULL 
               THEN 'Area does not match'
          WHEN N.Name IS NULL
               THEN 'Name is null'
          ELSE 
               'Yes'
          END as IsTopAccount
 FROM Test.dbo.Accounts ACC
 LEFT JOIN Test.dbo.TopAccounts A ON A.Area = ACC.Area
 LEFT JOIN Test.dbo.TopAccounts N ON N.Name = ACC.Name 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T17:54:32.440

如果我理解你的问题，我认为一个从两个表*`FULL OUTER JOIN`*中给出不匹配记录的单个*`null`*也会给出结果。[小提琴演示](http://sqlfiddle.com/#!3/5ff82/6)

```
SELECT A.Name ,A.Area
      ,CASE
          WHEN TA.Area IS NULL AND TA.Name IS NULL
               THEN 'Name and Area do not match'
          WHEN A.Area IS NULL 
               THEN 'Area does not match'
          WHEN TA.Name IS NULL
               THEN 'Name is null'
          ELSE 
               'Yes'
          END as IsTopAccount
 FROM A  FULL OUTER JOIN  TA 
      ON TA.Area = A.Area AND TA.Name = A.Name 
```

您可以根据需要更改 CASE 以从两个表中检查 null。以下是关于连接的一些很好的[视觉示例](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

根据评论，单个`LEFT JOIN` [Fiddle-Demo的结果相同](http://sqlfiddle.com/#!3/2c71e/20)

```
SELECT DISTINCT A.Name ,A.Area,
          CASE WHEN TA.Area IS NULL AND TA.Name IS NULL
               THEN 'Name and Area do not match'
          WHEN TA.Area <> A.Area 
               THEN 'Area does not match'
          WHEN TA.Name <> A.Name
               THEN 'Name is does not match'
          ELSE 'Yes' END IsTopAccount
FROM A LEFT JOIN  TA 
      ON A.Area = TA.Area OR A.Name = TA.Name
ORDER BY A.Name 
```

# ruby-on-rails-3 - Bootstrap + Flexslider：在隐藏元素中加载 Flexslider 会导致 jQuery 无响应

> ID：15008675
> 
> 赞同：0
> 
> 时间：2013-02-21T17:32:58.560
> 
> 标签：ruby-on-rails-3, twitter-bootstrap

我有一个登录页面，它在宽度超过 767 像素时加载得很好，并且浏览器在该宽度以下崩溃。它仅在加载低于该宽度时崩溃，我可以在桌面宽度加载然后缩小尺寸就好了。

我有一个 div`.visible-desktop`包含桌面登录和多余的东西，另一个`.hidden-desktop`只包含移动登录。多余的东西中的图像当前是404'ing。我会修复它，但它肯定不会导致浏览器崩溃。

在服务器控制台中，加载 404 资产之前的资产，没有其他任何事情发生。在浏览器中，页面变得无响应并崩溃。Chrome 只是崩溃，FF 说

```
A script on this page may be busy, or it may have stopped responding. You can stop the script now, or you can continue to see if the script will complete.

Script: http://ccdev:3333/assets/jquery.js?body=1:6265 
```

**更新：** 使用 firebug 并在 jquery v1.8.2 中的第 6348 行插入断点并单步执行它似乎卡住了增加名为`elems`. 在一个步骤中，该值将类似于`"<li><a>177085</a></li>"`，在下一步它将是`"<li><a>177086</a></li>"`并且它永远不会离开那条线。有问题的行是

```
div.parentNode.removeChild( div ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:10:31.137

这原来是 Woothemes flexslider 的一个问题。jQuery 无法删除引导程序隐藏的项目。如果以隐藏 flexslider 的宽度加载页面，jquery 会出现无限循环，这将导致浏览器挂起和崩溃。

[我在这里](https://github.com/woothemes/FlexSlider/issues/463)找到了修复。只需初始化 flexslider 即可`minItems: 1`。这应该是默认的！

# xml - xmlns 优先级？

> ID：15008685
> 
> 赞同：0
> 
> 时间：2013-02-21T17:33:28.990
> 
> 标签：xml, xml-namespaces

```
<?xml version="1.0" encoding="utf-8"?>
<request xmlns:a="http://example.com/a1">
    <a:description xmlns:a="http://example.com/a2">foo bar</a:description>
</request> 
```

在哪个命名空间中`a:description`，在`http://example.com/a1`还是在`http://example.com/a2`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:49:16.740

`http://example.com/a2`

子代覆盖父代。

命名空间声明已经影响了它所声明的元素（否则您无法在第一个元素上设置命名空间）。

# excel - 如何仅使用函数/方程对表进行排序

> ID：15008689
> 
> 赞同：9
> 
> 时间：2013-02-21T17:33:44.050
> 
> 标签：excel, sorting, equation

如何对表格 1 中的表格进行排序，例如

```
A B C D E
3 7 3 6 5 
```

进入工作表 2 中的另一个表

```
A C E D B
3 3 5 6 7 
```

仅使用功能？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T21:19:50.790

一种非常简单的方法是只使用排名索引，然后使用 HLOOKUP 查找相应的值：

```
=RANK(A4,$A$4:$E$4,1) 
```

![示例 1](../Images/3454b4a6f6d9869af3f3857f8f6bbbd9.png)

```
=IF(COUNTIF($A$1:A$1,A1)>1,RANK(A4,$A$4:$E$4,1)+COUNTIF($A$1:A$1,A1)-1,RANK(A4,$A$4:$E$4,1)) 
```

![示例 2](../Images/e03d463fd2731963251bec29f4ca4f6b.png)

```
=HLOOKUP(COLUMN(),$A$2:$E$4,2,FALSE) 
```

![示例 3](../Images/4b092805101b2c234ac5d1529ee9afe0.png)

```
=HLOOKUP(COLUMN(),$A$2:$E$4,3,FALSE) 
```

![示例 4](../Images/ff29609588119de8aba972974a3e4ff0.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-22T20:19:19.327

好的，这是“一个公式完成所有工作”的解决方案，没有额外的临时列：

![在此处输入图像描述](../Images/7f3500e5c351a7a86d381e6e4f6481e7.png)

A6 中的公式：

```
=INDEX($A$2:$E$2,MATCH(SMALL($A$3:$E$3+COLUMN($A$3:$E$3)/100000000,COLUMN()),$A$3:$E$3+COLUMN ($A$3:$E$3)/100000000,0))

```

将其作为数组公式输入，即按`Ctrl`- `Shift`- `Enter`。然后将其复制到相邻的列。

要获得数字，请在 A7 中使用此公式（再次作为数组公式）：

```
=ROUND(小($A$3:$E$3+栏($A$3:$E$3)/100000000,COLUMN()),6)

```

这两个公式都有些臃肿，因为它们还必须处理潜在的重复项。解决方案是在应用排序（SMALL 函数）之前简单地添加一小部分列 - 然后再次将其删除......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-09T11:41:56.610

我认为更简单的解决方案是使用“大”功能： [![excel截图](../Images/d61d7926f75e955b5d2145291a43b6e5.png)](https://i.stack.imgur.com/pkS2K.png)

Column 函数只是一种从 5 倒数到 1 的简单方法，但辅助列可能更容易。

您也可以使用“小”功能获得类似的答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-25T19:11:13.633

虽然我使用了“添加小数技术”，但我认为这对于辅助行/列来说是最优雅的：

```
=RANK(B4,$B$4:$F$4,0) + COUNTIF($B$4:$F$4,B4)-1 
```

（跨行列复制） RANK 让您关闭，并且 COUNTIF 部分通过计算单元格的重复次数到该点来处理重复项。由于总是有匹配（本身），因此您为最终排名减去 1。这种“排序”关系按照它们出现的顺序。请注意，空单元格将生成#N/A 和字符数据作为#Values。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T20:27:32.827

这是可行的！:-)

这是[示例文件](https://mega.co.nz/#!2Mh3DTQI!AVvkbSjbVF-XaM4rtOGBhHRbKU8PLxo-wXoYiNpnlkc)。

**解释**

我假设您的数据位于 Sheet1 的第 1 行，并且您希望数据从另一张表的第 1 列开始排序 - 如果不是，请进行相应调整。

将此公式放在目标工作表的第 1 列，例如第 2 行：

```
=ROUND(小(Sheet1!$A$1:$E$1+COLUMN(Sheet1!$A$1:$E$1)/100000000,COLUMN()),6)

```

您需要将公式作为数组公式输入，即按Ctrl-Shift-Enter。

如果您将其放置在第一列之外的另一列中，则需要替换`COLUMN()`为必须是对单元格本身的引用的`COLUMN()-COLUMN($A$2)+1`位置。`$A$2`

此公式将返回您范围内的最小数字 - 如果您将其复制到接下来的 4 列，您将获得数字订单列表。

要将其转换回列号，我们需要执行 2 个步骤：

1.  找出列号：
    这可以用这个公式来完成：

    ```
    =MATCH(小(Sheet1!$A$1:$E$1+COLUMN(Sheet1!$A$1:$E$1)/100000000,COLUMN()),Sheet1!$A$1:$E$1+COLUMN(Sheet1!$ A$1:$E$1)/100000000,0)

    ```

    - 再次，作为数组公式输入。如果源数据不是从 A 列开始，则需要在需要将`+COLUMN(Sheet1!$A$1)-1`$A$1 替换为源数据最左侧单元格的位置添加。
2.  将列号转换为字母：
    假设您在步骤 1 中的列号位于单元格 A6 中，此公式将完成这项工作：

```
=LEFT(地址(1,A6,2),搜索("$",地址(1,A6,2))-1)

```

当然，您也可以将第 1 步和第 2 步结合起来，这将得到这个大公式：

```
=左（
    地址（
        1、
        匹配（
            小(Sheet1!$A$1:$E$1+COLUMN(Sheet1!$A$1:$E$1)/100000000,COLUMN()),
            Sheet1!$A$1:$E$1+COLUMN(Sheet1!$A$1:$E$1)/100000000,
            0),
        2),
    搜索（
        "$",
         地址（
             1、
             匹配（
                 小(Sheet1!$A$1:$E$1+COLUMN(Sheet1!$A$1:$E$1)/100000000,COLUMN()),
                 Sheet1!$A$1:$E$1+COLUMN(Sheet1!$A$1:$E$1)/100000000,0),
             2)
     )-1
)

```

再次，作为数组公式输入。

# php - 使用 Masonry、jQuery 和 PHP 制作专辑封面画廊

> ID：15008694
> 
> 赞同：7
> 
> 时间：2013-02-21T17:34:17.467
> 
> 标签：php, javascript, jquery, jquery-masonry, jquery-isotope

我阅读了有关 Masonry 的信息，并在未能将图像附加到工作后被建议切换到继任者 Isotope。我试图改进或创建专辑封面画廊的变体，在使用相同的 PHP 类之前我已经做过一次或两次。

我可以使基本功能正常工作，但是单击以添加更多图像的按钮始终无法正常工作。我一直在阅读 jQuery 文档，并且尝试了各种 JavaScript 调试器，但是当我单击时，我的图库中总是没有添加任何图像。

*要获得最好看的布局，肯定需要反复试验。*

最大的专辑封面似乎是 500 像素，在 API 中发现的最小的是 75，选择正确的列宽会有所帮助。我目前正在使用 75，但 50 可能效果更好。我只想让添加图像工作并完成这个小实验。

我想尝试类似于这种[将更多图像附加到底部的技术](https://stackoverflow.com/questions/11170227/jquery-masonry-image-append)。我想使用 PHP 附加更多从各种 API（Amazon Product API、Last.fm、iTunes）获取的专辑封面。所有专辑封面都来自 API，我使用 PHP 来查找给定专辑标题和艺术家的 URL。我的代码正在运行： http: [//www.muschamp.ca/Muskie/cdCoverGalleryV4.php](http://www.muschamp.ca/Muskie/cdCoverGalleryV4.php)

我已经多次更改 CSS 规则，现在我只有 Isotope 作者建议的默认 CSS。

循环生成 10 个 div 的 PHP 代码，每个 div 一个图像

```
$myAlbumCollection->randomMember();
    $count = 0;
    print('<div id="container">');

    while ( $count < 10 )
    {
        // Check that current album is in Amazon 
        $buyLink = $myAlbumCollection->currentAlbumAmazonProductURL();
        $imageURL = $myAlbumCollection->currentAlbumRandomImageURL();
        if ( (strcmp($buyLink, '#') != 0) && (strcmp($imageURL, myInfo::MISSING_COVER_URL) != 0))
        {
            $count++;
            print('<div class="item">'); 
            print('<a href="' . $buyLink . '">');
            print('<img src="' . $imageURL . '" />');
            print('</a>');
            print('</div>');
        }
        $myAlbumCollection->goToNextAlbum(); // This could loop forever if it doesn't find enough album covers, but in reality will timeout 
    }
    print('</div>'); 
```

最后这里是 javascript，最后一个问题在这里的某个地方：

```
<script>
$(function(){

  var $container = $('#container');

  $('#insert a').click(function(){
    var $newEls = $.get('./moreAlbumCovers.php');
    $container.isotope( 'insert', $newEls );

    return false;
  });

  $container.isotope({
    itemSelector: '.item',
    masonry: {
    columnWidth: 75
    }
  });

});
</script> 
```

单击该链接时会调用该链接，我已经完成了它。PHP 生成 DIV As 和 IMG 标签。我真的不确定我做错了什么，反复阅读文档并没有解决它。我从来都不是真正的 JavaScript 人。我什至不是 PHP 人，这似乎是正确的，但尽管提供了慷慨的帮助并提供了赏金，但反复努力使其成功却失败了。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T19:18:44.890

尝试调整 的`columnWidh`值和宽度`item`。砌体将元素与最适合的列优先布局对齐。它适用于数学方程。因此，完美的砖墙配件只是假设的理想情况。我花了一些时间尝试使用萤火虫和其他工具，才能让砌体以理想的布局工作。关键是要获得 columnWidth 和 width、gutter 等的值，以便以良好的值求解逻辑方程。

**:: 编辑 ::**
我发现一个链接保存在我的口袋页面中，我完全忘记了。这是一个很棒的教程。所以我回来给它。推荐给在开始使用此插件时遇到困难的每个人。

[http://www.netmagazine.com/tutorials/get-started-jquery-masonry](http://www.netmagazine.com/tutorials/get-started-jquery-masonry)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T18:45:56.023

砌体不是一个非常具有描述性的名称。事实上，这是一个优化问题。这就是所谓的 np 问题，因为要检查的排列太多。特别是 masonry jquery 插件是一个 1d bin-packing 求解器，它将砖块排列在垂直列中。默认情况下，CSS 按水平顺序排列砖块。换句话说，它是一种深度优先的相邻树模型。

更新：尝试将砖石添加到您的虚拟 div 并删除其他所有内容：

```
 $('#dummy').load('./moreAlbumCovers.php').masonry("reload"); 
```

我觉得你想多了。该变量为空，因为您将其分配给了 dom 对象。它很可能也成为一个对象并且没有用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T01:59:57.793

这里很好地解释了[Jquery Masonry 无缝响应图像网格](https://stackoverflow.com/questions/12115037/jquery-masonry-seamless-responsive-image-grid/12116760#12116760)+ 我会尝试对同位素做同样的事情[http://isotope.metafizzy.co/](http://isotope.metafizzy.co/)

**编辑：** 我认为同位素和砖石只是整理出一维装箱，而您可能要照顾的是二维装箱

像这样[http://codeincomplete.com/posts/2011/5/7/bin_packing/example/](http://codeincomplete.com/posts/2011/5/7/bin_packing/example/)（检查复杂的情况，它完全适合所有盒子）

和lib [https://github.com/jakesgordon/bin-packing/](https://github.com/jakesgordon/bin-packing/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-22T20:14:58.547

要获得更像砖墙的效果，您无需使用 CSS 设置项目宽度。[鉴于此处的说明，](http://masonry.desandro.com/demos/basic-multi-column.html)这并不十分清楚。但是很多测试似乎表明，只指定一个 columnWidth，然后让浏览器和 javascript 做到最好，这样就更接近我正在寻找的性能。将不得不调整并最终尝试附加......

# java - 同一级别的 If 语句如何在 Android/Java 程序中执行？

> ID：15008695
> 
> 赞同：3
> 
> 时间：2013-02-21T17:34:17.617
> 
> 标签：java, android, package, paint, smartphone

目前，我正在为一个名为 PaintPot 的 Android 程序提供给我们的代码，该程序允许用户在他们的 Android 设备上进行手指绘画。

此代码处理在点击屏幕、单击按钮等时将发生的事件。

```
// Here is the event dispatcher for our app.  We need to Override the method for the Form
// superclass
@Override
public boolean dispatchEvent(Component component, String id, String eventName,
                             Object[] args) {

    //if the canvas is touched by a tapping finger
    if (component.equals(myCanvas) && eventName.equals("Touched")) {
        canvasTouced(((Float) args[0]).intValue(), ((Float) args[1]).intValue());
        return true;

        //if the canvas is touched by a dragging finger, paint the line this way
    } else if (component.equals(myCanvas) && eventName.equals("Dragged")) {
        drawLine(((Float) args[2]).intValue(),
                ((Float) args[3]).intValue(),
                ((Float) args[4]).intValue(),
                ((Float) args[5]).intValue());
        return true;

        //if the canvas is touched while the blue button is selected
    } else if (component.equals(btnBlue) && eventName.equals("Click")) {
        myCanvas.PaintColor(COLOR_BLUE);
        return true;

        //if the canvas is touched while the green button is selected
    } else if (component.equals(btnGreen) && eventName.equals("Click")) {
        myCanvas.PaintColor(COLOR_GREEN);
        return true;

        //if the canvas is touched while the red button is selected
    } else if (component.equals(btnRed) && eventName.equals("Click")) {
        myCanvas.PaintColor(COLOR_RED);
        return true;

        //if the wipe button is selected
    } else if (component.equals(btnWipe) && eventName.equals("Click")) {
        myCanvas.Clear();
        return true;
    }

    return false;
} 
```

该代码工作正常，并且可以“按原样”执行我想要的操作。但我真的不明白的是，如果用户在画布上点击或拖动他或她的手指的 if 语句处于“同一级别”，或者如果选择了颜色按钮，则在同一 if 语句中。不应该是当用户在屏幕上点击或拖动他的手指时，确定是否制作的线或点的相同代码还应该询问线或点应该是什么颜色，而不仅仅是大小点，取决于选择什么颜色的按钮？

如需更完整的参考，这里是整个代码，如果有人好奇的话：

```
import android.graphics.Color;
import com.google.devtools.simple.runtime.components.android.Button;
import com.google.devtools.simple.runtime.components.Component;
import com.google.devtools.simple.runtime.components.HandlesEventDispatching;
import com.google.devtools.simple.runtime.components.android.Canvas;
import com.google.devtools.simple.runtime.components.android.Form;
import com.google.devtools.simple.runtime.components.android.HorizontalArrangement;
import com.google.devtools.simple.runtime.components.android.Label;
import com.google.devtools.simple.runtime.events.EventDispatcher;

import java.util.Random;

public class PaintPotActivity extends Form implements HandlesEventDispatching {

private Canvas myCanvas; //creates a canvas object
private Label lblStatus; //creates a label that discusses the status of the program
private Button btnRed; //creates a button for red paint
private Button btnBlue; // "" for blue paint
private Button btnGreen; // "" for green paint

private Button btnWipe; //creates a button that wipes the screen clean
private Button btnDotSize; // creates a button that changes the dot size

// Variable (field) used to for displaying number of touches
int numTouches; //declares an integer that lists out the number of touches a user made

// The equivalent to a "main" method for App Inventor apps is the $define method.
void $define() { 

    //We are going to place the color buttons in a HorizontalArrangement
    HorizontalArrangement hr = new HorizontalArrangement(this);
    btnRed = new Button(hr); 
    btnBlue = new Button(hr);
    btnGreen = new Button(hr);

    //set their color
    btnRed.BackgroundColor(Color.RED);
    btnBlue.BackgroundColor(Color.BLUE);
    btnGreen.BackgroundColor(Color.GREEN);

    //set the button text
    btnRed.Text("Red");
    btnBlue.Text("Blue");
    btnGreen.Text("Green");

    //canvas into its own HorizontalArrangement
    hr = new HorizontalArrangement(this);
    myCanvas = new Canvas(hr);
    myCanvas.Width(400);
    myCanvas.Height(400);
    myCanvas.LineWidth(10);

    //Wipe and a label into its own HorizontalArrangement
    hr = new HorizontalArrangement(this);
    btnWipe = new Button(hr);
    btnWipe.Text("Wipe");

    lblStatus = new Label(hr);
    lblStatus.Text("  touchX/touchY:");

    // Register for events.  By the second argument can be any string.    The third argument must
    // exactly match the name of the event that you want to handle for that component.  When the event
    // happens, dispatchEvent will be called with these arguments.
    EventDispatcher.registerEventForDelegation(this, "JavaBridge", "Touched");
    EventDispatcher.registerEventForDelegation(this, "JavaBridge", "Click");
    EventDispatcher.registerEventForDelegation(this, "JavaBridge", "Dragged");
}

// Here is the event dispatcher for our app.  We need to Override the method for the Form
// superclass
@Override
public boolean dispatchEvent(Component component, String id, String eventName,
                             Object[] args) {

    //if the canvas is touched by a tapping finger
    if (component.equals(myCanvas) && eventName.equals("Touched")) {
        canvasTouced(((Float) args[0]).intValue(), ((Float) args[1]).intValue());
        return true;

        //if the canvas is touched by a dragging finger, paint the line this way
    } else if (component.equals(myCanvas) && eventName.equals("Dragged")) {
        drawLine(((Float) args[2]).intValue(),
                ((Float) args[3]).intValue(),
                ((Float) args[4]).intValue(),
                ((Float) args[5]).intValue());
        return true;

        //if the canvas is touched while the blue button is selected
    } else if (component.equals(btnBlue) && eventName.equals("Click")) {
        myCanvas.PaintColor(COLOR_BLUE);
        return true;

        //if the canvas is touched while the green button is selected
    } else if (component.equals(btnGreen) && eventName.equals("Click")) {
        myCanvas.PaintColor(COLOR_GREEN);
        return true;

        //if the canvas is touched while the red button is selected
    } else if (component.equals(btnRed) && eventName.equals("Click")) {
        myCanvas.PaintColor(COLOR_RED);
        return true;

        //if the wipe button is selected
    } else if (component.equals(btnWipe) && eventName.equals("Click")) {
        myCanvas.Clear();
        return true;
    }

    return false;
}

/**
 * This method will get the touched touchX, touchY coordinates and will then create a circle
 * of random radius (between 1 to 33) with the color that was selected (RED, BLUE or GREEN).
 * It will also display the touched touchX,touchY coordinates.
 * @param x current x
 * @param y current y
 */
private void canvasTouced(int x, int y) {

    myCanvas.DrawCircle(x, y, new Random().nextInt(33));
    lblStatus.Text("  touchX/touchY:" + x + "/" + y + " touches: " + ++numTouches);

}

/**
 * Method to draw line
 * @param prevX last touch x
 * @param prevY last touch y
 * @param touchX current x
 * @param touchY current y
 */
private void drawLine(int prevX, int prevY, int touchX, int touchY) {
    myCanvas.DrawLine(prevX, prevY, touchX, touchY);
 }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:24:42.000

`dispatchEvent`在应用程序触发事件时调用。每次按钮单击和与应用程序的交互都会引发单独的事件。每个 if 语句都在确定如何处理不同类型的事件。

> 不应该是当用户在屏幕上点击或拖动他的手指时，确定是否制作的线或点的相同代码还应该询问线或点应该是什么颜色，而不仅仅是大小点，取决于选择的颜色按钮

在这种情况下，事件之间的状态被保存在`myCanvas`- 单击`btnBlue`将画布上的绘制颜色设置为蓝色 ( `myCanvas.PaintColor(COLOR_BLUE);`) 然后等待另一个事件发生。如果用户随后在画布上拖动，则会绘制一条线（最终`myCanvas.DrawLine(prevX, prevY, touchX, touchY);`）。由于`myCanvas`记住了状态，它用蓝色画了线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:08:29.920

> 如果用户在画布上点击或拖动手指的 if 语句处于同一级别

好吧，我可能是错的，但如果`the same level`你的意思是对用户的行为有某种同等权重，那么答案是肯定的。

> 不应该是当用户在屏幕上点击或拖动他的手指时，确定是否制作的线或点的相同代码还应该询问线或点应该是什么颜色，而不仅仅是大小点，取决于选择的颜色按钮

是的，它应该。为此，您必须进行相应的编程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T18:23:46.190

这是事件处理的常见构造。将“相同级别”的 IF 视为用户可以选择的选项可能会有所帮助。当您在同一个对话框上有两个按钮时，通常不会嵌套它们，因为您不知道将单击哪个按钮。

方法的名称，'dispatchEvent' 是一个很大的线索，它所做的只是接收事件并选择适当的代码路径。通常每个 IF 只是转身并调用一个函数或方法，否则调度方法可能会变得很大。

如果您对所有可能的消息都有足够大的枚举（Win32 会这样做），您可以使用“switch/case”语句而不是所有 IF 来做同样的事情。

# sql - 应该在父表还是子表上创建外键？

> ID：15008696
> 
> 赞同：17
> 
> 时间：2013-02-21T17:34:20.263
> 
> 标签：sql, sql-server-2008-r2, foreign-keys

有什么不同？如果我有这两个表：

```
CREATE TABLE Account (Id int NOT NULL)

CREATE TABLE Customer (AccountId int NOT NULL) 
```

我想要一个链接两者的外键，我应该做以下哪一个，为什么？

选项1：

```
ALTER TABLE [dbo].[Customer]  WITH CHECK 
  ADD  CONSTRAINT [FK_Accounts_Customers] FOREIGN KEY([AccountId])
  REFERENCES [dbo].[Account] ([Id]) 
```

选项 2：

```
ALTER TABLE [dbo].[Account]  WITH CHECK 
  ADD  CONSTRAINT [FK_Accounts_Customers] FOREIGN KEY([Id])
  REFERENCES [dbo].[Customer] ([Id]) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T17:36:44.390

取决于上下文。每个客户都有客户吗？哪个是家长？似乎一个帐户有多个客户，在这种情况下，引用属于客户表。

现在，也就是说，请致电实体`CustomerID`和`AccountID`任何地方。它在主表上似乎是多余的，但名称应该在整个模型中保持一致。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T17:36:18.740

我会使用从孩子到父母的外键。最重要的问题是：如果您需要删除其中一个实体会发生什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-24T22:05:01.623

FK（外键）告诉 DBMS，列列表的子行值必须作为列列表的子行值出现在别处。每当发生这种情况（并且其他声明尚未暗示）时，声明 FK。此外，如果您希望在更改引用表时将 CASCADE 操作应用于引用表，请声明。

（CASCADE 没有什么特别之处，它不能用于非 FK 情况。它只是经常出现在 FK 中，并且有一个明确的 FK 图可以合理地限制它们的交互。）

如果有[FK 循环](https://stackoverflow.com/a/41886468/3404097)，那么您将需要使用触发器。您决定以声明方式强制执行哪些约束以及哪些通过触发器应考虑（所需）约束图。

# perl - 在 Perl 中，看到 é 是 e,E 的变体

> ID：15008698
> 
> 赞同：4
> 
> 时间：2013-02-21T17:34:29.083
> 
> 标签：perl, utf-8, multilingual

我正在处理 Perl 中以 utf-8 编码的字符串。一个任务是我需要一种方法来知道以带有变音符号的字母开头的单词，例如“écrit”，以与“elephant”相同的字母开头，以及“England”。我需要一个通用的解决方案，因为我将使用多种语言。我需要知道这一点，因为我正在为索引创建字母标题。我刚才提到的每个单词都将存储在“E”下。

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T17:37:49.923

[Text::Unidecode](http://p3rl.org/Text%3a%3aUnidecode)可以帮助你。它将 Unicode 转换为 ASCII。

```
$ perl -Mutf8 -e 'use Text::Unidecode; print unidecode("écrit")'
ecrit 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T16:07:26.880

字符串的相等性和顺序由称为排序规则的事物决定。棘手的部分是它们取决于语言和文化（技术术语是“语言环境”）。例如，您可能认为 ø 和 o 等价，但对于丹麦人来说，它们是不同的字母，并且必须以不同的方式排序。

使用排序规则的 Perl 模块是[`Unicode::Collate`](http://perldoc.perl.org/Unicode/Collate.html).

**更新：**您还可以使用 Perl 的[内置语言环境](http://perldoc.perl.org/perllocale.html)支持`use locale`：

```
use locale; 
use POSIX qw(setlocale LC_ALL);

setlocale(LC_ALL, ''); # Set default locale from environment variables 
```

这使得内置函数例如`sort`并`cmp`使用语言环境的规则来排序字符串。但小心点; 更改程序的语言环境可能会产生意想不到的后果，例如将输出中的小数点更改为逗号`printf`。

**更新 2：** POSIX 语言环境显然以各种方式被破坏。你最好使用`Unicode::Collate`and `Unicode::Collate::Locale`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T16:50:44.620

我假设您是按英文排序规则排序并且有字母文本。下面的代码是一个好的开始，但现实世界比这更复杂。（例如，中文文本根据上下文有不同的词典规则，例如通用词典，卡拉OK歌曲列表，电子门铃名单，......）我无法提供完美的解决方案，因为问题的信息太少了。

```
use 5.010;
use utf8;
use Unicode::Collate::Locale 0.96;
use Unicode::Normalize qw(normalize);

my $c = Unicode::Collate::Locale->new(locale => 'en');
say for $c->sort(qw(
    eye
    egg
    estate
    etc.
    eleven
    e.g.
    England
    ensure
    educate
    each
    equipment
    elephant
    ex-
    ending
    écrit
));
say '-' x 40;
for my $word (qw(écrit Ëmëhntëhtt-Rê Ênio ècole Ēadƿeard Ėmma Ędward Ẽfini)) {
    say sprintf '%s should be stored under the heading %s',
        $word, ucfirst substr normalize('D', $word), 0, 1;
}

__END__
each
écrit
educate
e.g.
egg
elephant
eleven
ending
England
ensure
equipment
estate
etc.
ex-
eye
----------------------------------------
écrit should be stored under the heading E
Ëmëhntëhtt-Rê should be stored under the heading E
Ênio should be stored under the heading E
ècole should be stored under the heading E
Ēadƿeard should be stored under the heading E
Ėmma should be stored under the heading E
Ędward should be stored under the heading E
Ẽfini should be stored under the heading E 
```

# java - 从 txt 读取对象并显示它时出错

> ID：15008701
> 
> 赞同：0
> 
> 时间：2013-02-21T17:34:36.753
> 
> 标签：java

netbeans 显示这个 eroor

> I/O 进程出错 java.io.WriteAbortedException：写入中止；java.io.NotSerializableException: katanemimena1.Account at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1351) at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369) at katanemimena1.ATM.actionPerformed(ATM.java: 208)

我不明白为什么这是代码

```
ObjectInputStream in =null;
Account acc =null;
try{
in =new ObjectInputStream(new FileInputStream( "Accounts.txt"));
while
( (acc = (Account) in.readObject()) !=null){
System.out.println(acc);
}
}
catch(EOFException ex) {
System.out.println("End of file reached.");
}
catch(ClassNotFoundException ex) {
System.out.println("Error casting") ;
ex.printStackTrace();
}
catch(FileNotFoundException ex) {
System.out.println("Error specified file does not exist") ;
ex.printStackTrace();
}
catch(IOException ex) {
System.out.println("Error with I/O processes") ;
ex.printStackTrace();
}finally{
try{
in.close();
}
catch(IOException ex){
System.out.println("Another IOException during the closing");
ex.printStackTrace();
}

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:35:38.353

从 java.io.Serializable 接口实现您的 Account 类

# ios6 - iOS 应用程序的后端

> ID：15008702
> 
> 赞同：0
> 
> 时间：2013-02-21T17:34:37.897
> 
> 标签：ios6, titanium, titanium-mobile, kal

我的问题是如何从服务器获取信息到我的 iphone 应用程序。假设我已经完成了我正在处理的当前项目，只需要将数据上传到我的应用程序。

我知道我必须创建一个数据库或服务器，但我该如何创建或修改一个以满足我的需要。

我主要想存储来自一个用户的登录信息，并允许用户搜索输入登录信息（姓名）的人以添加到当前应用程序中的朋友列表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:38:35.933

我认为在您的情况下，您可以将 Django-tastypie 用于后端将是不错的选择。因为使用 django 您可以快速开发它，并且 sweetpie 具有可轻松用于检索和发送数据的 api 服务

你可以通过这个

[http://django-tastypie.readthedocs.org/en/latest/](http://django-tastypie.readthedocs.org/en/latest/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:09:48.820

看看 Stackmob 或 Parse 等服务。这些类型的服务可以让您非常轻松地启动和运行应用程序的服务器端部分。这些服务将充当您的数据库，并为您提供访问服务器端的简单 API。

# r - 如何在 R 或 MATLAB 中为散点图创建阴影误差条“框”

> ID：15008705
> 
> 赞同：2
> 
> 时间：2013-02-21T17:34:50.000
> 
> 标签：r, matlab, plot

我想在 R 或 MATLAB 中创建一个简单的散点图，其中涉及两个变量 $x$ 和 $y$，它们有与之相关的错误，$\epsilon_x$ 和 $\epsilon_y$。

然而，我希望在每个 $(x,y)$ 对周围创建一个“阴影框”，而不是添加错误栏，其中框的高度范围从 ($y - \epsilon_y$) 到 ($y + \epsilon_y$) 和盒子的宽度范围从 ($x - \epsilon_y$) 到 ($x + \epsilon_y$) 。

这在 R 或 MATLAB 中可行吗？如果是这样，我可以使用什么包或代码来生成这些图。理想情况下，我希望该包也支持不对称错误界限。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T04:33:24.643

您可以通过创建以下函数在 matlab 中执行此操作：

```
function errorBox(x,y,epsx,epsy)
    %# make sure inputs are all column vectors
    x = x(:); y = y(:); epsx = epsx(:); epsy = epsy(:);

    %# define the corner points of the error boxes
    errBoxX = [x-epsx, x-epsx, x+epsx, x+epsx];
    errBoxY = [y-epsy, y+epsy, y+epsy, y-epsy];

    %# plot the transparant errorboxes
    fill(errBoxX',errBoxY','b','FaceAlpha',0.3,'EdgeAlpha',0)
end 
```

`x`, `y`,`epsx`和`epsy`都可以是向量。

例子：

```
x = randn(1,5); y = randn(1,5);
epsx = rand(1,5)/5;
epsy = rand(1,5)/5;

plot(x,y,'rx')
hold on
errorBox(x,y,epsx,epsy) 
```

结果：

![](../Images/43db05f2174ae4d32eebf366a70ccb03.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:41:04.500

使用 ggplot2 可能更容易。首先创建一些数据：

```
set.seed(1)
dd = data.frame(x = 1:5, eps_x = rnorm(5, 0, 0.1), y = rnorm(5), eps_y = rnorm(5, 0, 0.1))

##Save space later    
dd$xmin = dd$x - dd$eps_x
dd$xmax = dd$x + dd$eps_x
dd$ymin = dd$y - dd$eps_y
dd$ymax = dd$y + dd$eps_y 
```

然后在ggplot2中使用矩形geom：

```
library(ggplot2)
ggplot(dd) + 
     geom_rect(aes( xmax = xmax, xmin=xmin, ymin=ymin, ymax = ymax)) 
```

给出第一个情节。当然，您不需要使用 ggplot2，要在基本图形中获得类似的东西，请尝试：

```
plot(0, 0, xlim=c(0.5, 5.5), ylim=c(-1, 1), type="n")
for(i in 1:nrow(dd)){
    d = dd[i,]
    polygon(c(d$xmin, d$xmax, d$xmax, d$xmin), c(d$ymin, d$ymin, d$ymax,d$ymax), col="grey80")
} 
```

得到第二个情节。

![ggplot2图](../Images/2056f12a30d1b269523d4b49fb457775.png)

![基础图形](../Images/0b860d6af7bf06d27d0c7e7b19fb9b06.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T18:38:53.290

下面是如何使用 Matlab（具有非对称间隔）来做到这一点。转换为对称的应该是微不足道的。

```
%# define some random data
x = rand(5,1)*10;y = rand(5,1)*10;
%# ex, ey have two columns for lower/upper bounds
ex = abs(randn(5,2))*0.3;ey=abs(randn(5,2));

%# create vertices, faces, for patches
vertx =  bsxfun(@minus,y,ey(:,[1 2 2 1]))';
verty =  bsxfun(@minus,y,ey(:,[1 1 2 2]))';
vertices = [vertx(:),verty(:)];
faces = bsxfun(@plus,[1 2 3 4],(0:4:(length(x)-1)*4)');

%# create patch
patch(struct('faces',faces,'vertices',vertices),'FaceColor',[0.5 0.5 0.5]);

%# add "centers" - note, the intervals are asymmetric
hold on, plot(x,y,'oy','MarkerFaceColor','r') 
```

![在此处输入图像描述](../Images/4f6e4f8289631327ca353fc5f6d4f610.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T02:52:12.410

这是一个 MATLAB 答案：

```
x = randn(1,5); y = 3-2*x + randn(1,5);
ex = (.1+rand(1,5))/5; ey = (.2+rand(1,5))/3;
plot(x,y,'ro')
patch([x-ex;x+ex;x+ex;x-ex],[y-ey;y-ey;y+ey;y+ey],[.9 .9 .9],'facealpha',.2,'linestyle','none') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T18:43:50.540

`ggplot2`使用 . 中的包很简单`R`。

```
# An example data frame
dat <- data.frame(x = 1:5, y = 5:1, ex = (1:5)/10, ey = (5:1)/10)

# Plot
library(ggplot2)
ggplot(dat) +
  geom_rect(aes(xmin = x - ex, xmax = x + ex, ymin = y - ey, ymax = y + ey), 
            fill = "grey") +
  geom_point(aes(x = x, y = y)) 
```

在`aes`函数里面`geom_rect`，矩形的大小是由`ex`和`ey`围绕`x`和定义的`y`。

![在此处输入图像描述](../Images/1b57f6226d019d5b5d3f7fc8e7d30f69.png)

# php - 从表单以 PHP 上传图像的好奇问题

> ID：15008707
> 
> 赞同：0
> 
> 时间：2013-02-21T17:34:53.417
> 
> 标签：php, arrays, filesize

我尝试从 PHP 表单上传图片。

关于我的图片上传，我遇到了一个奇怪的问题：

我的表格：

```
<form id="booking-step" method="post" action="add.php" class="booking" autocomplete="off" enctype="multipart/form-data">
<input type="file" id="AddPhotos1" name="AddPhotos[]" />
<input type="file" id="AddPhotos2" name="AddPhotos[]" />
<input type="file" id="AddPhotos3" name="AddPhotos[]" />
<input type="file" id="AddPhotos4" name="AddPhotos[]" />
<input type="file" id="AddPhotos5" name="AddPhotos[]" />
</form> 
```

我的PHP：

```
if($_FILES['AddPhotos']){
    $errorAddPhotos = "";
    $validAddPhotos = "";
    for($x=0;$x<sizeof($_FILES["AddPhotos"]["name"]);$x++){
        $fichier = basename($_FILES['AddPhotos']['name'][$x]);
        $taille_maxi = 3000;
        $taille = filesize($_FILES['AddPhotos']['tmp_name'][$x]);
        $extensions = array('.png', '.jpg', '.jpeg');
        $extension = strrchr($_FILES['AddPhotos']['name'][$x], '.'); 
        if(!in_array($extension, $extensions))
        {
             $errorAddPhotos .= "Wrong extension.<br />";
        }
        if($taille>$taille_maxi)
        {
             $errorAddPhotos .= "Wrong size.<br />";
        }
        if((in_array($extension, $extensions)) && ($taille<$taille_maxi))
        {
             $fichier = strtr($fichier, 
                  'ÀÁÂÃÄÅÇÈÉÊËÌÍÎÏÒÓÔÕÖÙÚÛÜÝàáâãäåçèéêëìíîïðòóôõöùúûüýÿ', 
                  'AAAAAACEEEEIIIIOOOOOUUUUYaaaaaaceeeeiiiioooooouuuuyy');
             $fichier = preg_replace('/([^.a-z0-9]+)/i', '-', $fichier);
             if(move_uploaded_file($_FILES['AddPhotos']['tmp_name'][$x], $destin . $fichier))
             {
                  $validAddPhotos = 'Success!';
             }
             else
             {
                  $errorAddPhotos = 'Wrong';
             }
        }           
        }
    }

echo $validAddPhotos;
echo $errorAddPhotos 
```

我的代码看起来不错，但我无法上传我的文件...

错误：我的文件处于“if(!in_array($extension, $extensions))”状态。

能否请你帮忙 ？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:23:59.997

我认为在测试图像类型和文件大小时，您应该使用[此逻辑](https://stackoverflow.com/questions/8264445/multiple-upload-image-function-php#answer-8264565)比您的逻辑更有效。此外，您可以使用您想要的文件名来自定义它:)

[多个上传图片功能php？](https://stackoverflow.com/questions/8264445/multiple-upload-image-function-php#answer-8264565)

# javascript - Javascript 对象：文字与构造函数

> ID：15008710
> 
> 赞同：2
> 
> 时间：2013-02-21T17:34:59.693
> 
> 标签：javascript, html, oop, prototype

创建 Javascript 对象，我们可以使用 Literal 或 Constructor 方式；在构造方法中，我们说；

```
function myObj(){
this.myProp1 = "abc";
this.myProp2 = "xyz";
} 
```

从字面上看，我们说；

```
var myObj = {
myProp1:"abc",
myProp2:"xyz",
} 
```

我的问题是在声明属性时，为什么会有区别，比如我们为什么在构造函数的情况下使用“this.myProp1”而不是在字面上使用“this”？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-22T19:01:16.137

两者之间的主要区别在于它们的使用方式。顾名思义，构造函数旨在创建和设置对象的多个实例。另一方面，对象文字是一次性的，就像字符串和数字文字一样，并且更常用作配置对象或全局单例（例如，用于命名空间）。

第一个例子有一些微妙之处需要注意：

执行代码时，会创建一个匿名函数并将其分配给`myObj`，但不会发生其他任何事情。`methodOne`并且在被明确调用`methodTwo`之前不存在。 根据调用方式，方法和最终会出现在不同的地方：`myObj`
`myObj``methodOne``methodTwo`

`myObj()`：
由于没有提供上下文，`this`默认值`window`和方法将变为全局。

`var app1 = new myObj()`：
由于`new`关键字，一个新对象被创建并成为默认上下文。`this`引用新对象，方法将被分配给新对象，新对象随后被分配给`app1`. 但是，`myObj.methodOne`仍然未定义。

`myObj.call(yourApp)`:
这调用 my`myObj`但将上下文设置为另一个对象，`yourApp`. 这些方法将被分配给`yourApp`，覆盖`yourApp`具有相同名称的任何属性。这是一种非常灵活的方法，它允许在 Javascript 中进行多重继承或混合。

构造函数还允许另一个级别的灵活性，因为函数提供闭包，而对象文字不提供。例如，如果 methodOne 和 methodTwo 依赖于对象私有的公共变​​量密码（不能在构造函数之外访问），则可以通过执行以下操作非常简单地实现：

```
var myObj = function(){
    var variableOne = "ABCD1234";

    this.methodOne = function(){
       // Do something with variableOne
       console.log(variableOne);
    };
    this.methodTwo = function(){
       // Do something else with variableOne
    };
};

myObj();

alert(variableOne); // undefined
alert(myObj.variableOne); // undefined 
```

如果你想`variableOne`公开（公开）你会这样做：

```
var myObj = function(){
    this.variableOne = "ABCD1234";

    this.methodOne = function(){
       // Do something with variableOne
       console.log(this.variableOne);
    };
    this.methodTwo = function(){
       // Do something else with variableOne
    };
};

myObj();

alert(variableOne); // undefined
alert(myObj.variableOne); // ABCD1234 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T17:52:44.203

当从字面上定义某些东西时，对象是直接在代码中构建的。在完成之前它还不存在。在那一点上，`this`将没有任何意义（也没有任何必要）。

要在对象创建函数中理解这一点，首先要意识到这`this`是 JavaScript 的特殊之处。每当你调用一个函数时，你可以传递任何你想成为的东西`this`。通常，事件处理程序之类的东西会将引发事件的 DOM 对象传递为`this`. 在您的代码中，您可以这样做：`MyFunction.call(whatever_needs_to_be_this[, param0, param1]);`. 当您使用 new 运算符时，例如`var mything = new SomeThing();`，JavaScript 本质上是在做类似的事情：

```
var mything = {};
SomeThing.call(mything); 
```

`this`在这种情况下将`mything`在您的功能中。

# android - 如何在深色背景的 ActionBarSherlock 内更改搜索视图的自动完成文本颜色？

> ID：15008711
> 
> 赞同：4
> 
> 时间：2013-02-21T17:35:00.283
> 
> 标签：android, colors, actionbarsherlock, android-theme, autocompletetextview

我有自己的 ActionBarSherlock 主题`Theme.Sherlock.Light.DarkActionBar`，这是我的风格：

```
<style name="Theme.MyTheme" parent="Theme.Sherlock.Light.DarkActionBar">
    <item name="actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
</style>

<style name="Widget.MyTheme.ActionBar" parent="Widget.Sherlock.Light.ActionBar.Solid.Inverse">
    <item name="android:background">@drawable/action_bar</item>
    <item name="background">@drawable/action_bar</item>
</style> 
```

`@drawable/action_bar`xml在哪里：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item>
        <shape android:shape="rectangle">
            <solid android:color="@color/color_action_bar_bottom_line" />
        </shape>
    </item>

    <item android:bottom="2dp">
        <shape android:shape="rectangle">
            <solid android:color="@color/color_action_bar_background" />
        </shape>
    </item>
</layer-list> 
```

一切看起来都很棒，除了一件事：SearchView 中的文本（当我在 ActionBar 中使用搜索模式时）是“黑暗中的黑暗”，所以我什么都看不到。我尝试手动设置 SearchView 的文本颜色：

```
AutoCompleteTextView searchTextView =
        (AutoCompleteTextView) searchView.findViewById(R.id.abs__search_src_text);
searchTextView.setTextColor(Color.WHITE);
searchTextView.setHintTextColor(Color.LTGRAY);
searchTextView.setHighlightColor(Color.WHITE);
searchTextView.setLinkTextColor(Color.WHITE); 
```

这有很大帮助，但我无法更改自动完成文本的颜色：

![在此处输入图像描述](../Images/0dedb8be0455e09b5f654c5c9e0d3757.png)

如您所见，它仍然是黑色的。如何为这种文本设置白色文本颜色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T07:15:18.673

试试这个代码

```
SearchView searchView = new SearchView(context);
LinearLayout linearLayout1 = (LinearLayout) searchView.getChildAt(0);
LinearLayout linearLayout2 = (LinearLayout) linearLayout1.getChildAt(2);
LinearLayout linearLayout3 = (LinearLayout) linearLayout2.getChildAt(1);
AutoCompleteTextView autoComplete = (AutoCompleteTextView) linearLayout3.getChildAt(0);
autoComplete.setTextColor(Color.WHITE); 
```

或者

```
SearchView searchView = new SearchView(context);
AutoCompleteTextView search_text = (AutoCompleteTextView) searchView.findViewById(searchView.getContext().getResources().getIdentifier("android:id/search_src_text", null, null));
search_text.setTextColor(Color.WHITE); 
```

它来自我自己的回答[如何设置 SearchView TextSize？](https://stackoverflow.com/questions/10535176/how-to-set-searchview-textsize/12942258#12942258)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T09:48:14.823

我通过禁用自动完成功能解决了这个问题（如果您将编辑类型设置为可见密码，它将被禁用），但这个解决方案不是很好，我仍在寻找更好的解决方案。

```
private SearchView getSearchView() {
    SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
    SearchView searchView = new SearchView(getSupportActionBar().getThemedContext());
    searchView.setQueryHint("Search for items");
    searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));

    AutoCompleteTextView searchTextView =
            (AutoCompleteTextView) searchView.findViewById(R.id.abs__search_src_text);
    if (searchTextView != null) {
        searchTextView.setInputType(InputType.TYPE_CLASS_TEXT
                                    | InputType.TYPE_TEXT_VARIATION_VISIBLE_PASSWORD);
        searchTextView.setTypeface(Typeface.DEFAULT);
    }
    return searchView;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-27T02:58:15.220

问题是在`SearchView`没有正确考虑设置的`ActionBar`样式（在本例中为 Dark ActionBar on Light）的情况下进行了初始化。答案是使用`ActionBar`主题`Context`；由 检索`Activity.getActionBar().getThemedContext()`。[这在ABS Migration](http://actionbarsherlock.com/migration)的底部提到：

> 如果您使用列表导航，请特别注意演示示例中的“列表导航”示例，以获取正确使用的指导。您需要为项目视图和下拉视图使用库提供的布局，并使用操作栏中的主题上下文。

我的代码是如何在标准 Android 中完成的，你必须得到`ActionBar`合适的。如果您将主题传递`Context`给，`SearchView`那么它将使用适当的样式，即它不会像在浅色背景上一样呈现自己。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T06:11:47.290

在这里，我像这样使用 SearchView，它的搜索文本颜色也很好，颜色也为白色。

这个`res/menu`名字是`applications_menu.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@+id/Accounts"
    android:icon="@drawable/ic_launcher">
</item>
<item
    android:id="@+id/menu_search"
    android:actionViewClass="android.widget.SearchView"
    android:icon="@drawable/ic_launcher"
    android:showAsAction="ifRoom"
    android:title="menu_search">
</item>
</menu> 
```

当你像这样搜索时，这个在活动中使用

```
new MenuInflater(this).inflate(R.menu.applications_menu, menu);     
    SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
    SearchView searchView = (SearchView) menu.findItem(R.id.menu_search).getActionView();
    searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));           
    searchView.setIconifiedByDefault(false); 
```

这是屏幕

![在此处输入图像描述](../Images/359f39cc355d359d51cce0cb5743aeab.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-28T10:57:01.937

可能有最好的方法来做到这一点，但是使用了非常简单的方法，我为此使用了[库](https://github.com/johnkil/Android-CollapsibleSearchMenu)

```
 @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        searchMenuItem = CollapsibleMenuUtils.addSearchMenuItem(menu, false,
                textWatcher);
        return true;
    } 
```

设置布尔值 true/false 以设置 Light/Dark 主题

> addSearchMenuItem(Menu menu, boolean isLightTheme, TextWatcher textWatcher)
> 
> 将可折叠的搜索菜单项添加到菜单中。
> 
> 参数：menu isLightTheme - 如果对 ActionBar 使用灯光，则为 true，否则为 false textWatcher

为了更改文本颜色，我更改了库的布局/ holodark.xml

```
<AutoCompleteTextView
        android:id="@+id/search_src_text"
        android:layout_width="0dp"
       .
       .
        android:textColor="@android:color/white" /> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-21T20:29:02.440

我认为您正在使用带有自定义深色操作栏主题的浅色主题。您可以尝试将主题更改为`AutoCompleteTextView`深色。尝试将其添加到您的主题中：

```
<style name="Widget.MyTheme.ActionBar" parent="Widget.Sherlock.Light.ActionBar.Solid.Inverse">
    <item name="searchAutoCompleteTextView">@style/Widget.Sherlock.SearchAutoCompleteTextView</item>
    <item name="android:searchAutoCompleteTextView">@style/Widget.Sherlock.SearchAutoCompleteTextView</item>

    <item name="searchAutoCompleteTextViewStyle">@style/Widget.Sherlock.SearchAutoCompleteTextView</item>
    <item name="android:searchAutoCompleteTextViewStyle">@style/Widget.Sherlock.SearchAutoCompleteTextView</item>

    <item name="textAppearanceLargePopupMenu">@style/Widget.Sherlock.SearchAutoCompleteTextView</item>
    <item name="android:textAppearanceLargePopupMenu">@style/Widget.Sherlock.SearchAutoCompleteTextView</item>

    <item name="textAppearanceSmallPopupMenu">@style/Widget.Sherlock.SearchAutoCompleteTextView</item>
    <item name="android:textAppearanceSmallPopupMenu">@style/Widget.Sherlock.SearchAutoCompleteTextView</item>
</style> 
```

编辑：不确定添加的行，但您可以尝试。我在[HoloEverywhere 库的一些修复中发现了它。](https://github.com/ChristopheVersieux/HoloEverywhere/commit/b839f5df0cef9a093aaac0992abcb8e8d33cf011)

# c++ - assert() 修改变量时的警告

> ID：15008712
> 
> 赞同：0
> 
> 时间：2013-02-21T17:35:10.837
> 
> 标签：c++

当修改 a`assert()`或 a中的变量时，我能做些什么来获得编译器警告`debug_print()`？

我想防止这样的错误发生

```
int i=0;
assert((++i)); // i is modified only in debug mode

std::set<int> s;
debug_print(("item inserted: %d\n", s.insert(5).first )); // set is modified only in debug mode 
```

假设我有一组仅在调试模式下构建的包装函数，我可以在其中进行必要的检查

```
MyDbgAssert() // #define that wraps assert()
MyDbgPrint()  // #define that wraps printf() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:47:00.693

有一些工具（例如，Coverity）可以检测宏/断言中的副作用。CERT 提供了[此类工具的列表](https://www.securecoding.cert.org/confluence/display/seccode/EXP31-C.+Avoid+side+effects+in+assertions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:27:53.760

如果您在调试和发布版本上都认真地运行单元测试，它们将检测到这种错误。

# macos - OSX 上的 32 位 DTrace

> ID：15008718
> 
> 赞同：4
> 
> 时间：2013-02-21T17:35:28.480
> 
> 标签：macos, dtrace

我需要在 OSX 上的 32 位可执行文件上运行 DTrace。我有两台机器，都运行 OSX 10.8.2。其中一个`/usr/lib/dtrace/libdtrace_dyld.dylib`是胖二进制文件，另一个不是：

```
/usr/lib/dtrace/libdtrace_dyld.dylib: Mach-O universal binary with 2 architectures
/usr/lib/dtrace/libdtrace_dyld.dylib (for architecture i386):   Mach-O dynamically linked shared library i386
/usr/lib/dtrace/libdtrace_dyld.dylib (for architecture x86_64): Mach-O 64-bit dynamically linked shared library x86_64 
```

对比

```
/usr/lib/dtrace/libdtrace_dyld.dylib: Mach-O 64-bit dynamically linked shared library x86_64 
```

这两个是哪里来的？我如何“正式”获得胖子，即不只是从另一台机器上复制它？

这就是当我尝试在 32 位可执行文件上运行 dtrace 时会发生这种情况，并且只能使用 64 位 dylib，顺便说一句：

```
dyld: could not load inserted library: /usr/lib/dtrace/libdtrace_dyld.dylib 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:46:36.453

Mac OS X ML 上的 DTrace 库是胖二进制文件（i386、x86_64）。您的第二台机器缺少 32 位，因为有人删除了它。可能该系统“优化器”之一已在系统上运行。

我机器上的 lib 的SHA( `shasum /usr/lib/dtrace/libdtrace_dyld.dylib`) 是`0722f971d9999245cda234ba5fd3119820fa348a`. 我已经在其他几台机器上测试过它并且它匹配。它还与全新安装 Mac OS X ML 的机器相匹配。这意味着可以复制它。

恢复它的唯一其他方法是从备份中恢复它或重新安装系统。

# jquery - 如何隐藏 nivo 滑块标题区域并使幻灯片可滚动

> ID：15008719
> 
> 赞同：2
> 
> 时间：2013-02-21T17:35:29.480
> 
> 标签：jquery, css, slider, nivo-slider

我的页面上有一个 nivo 滑块，但我不知道如何让幻灯片可点击到页面并删除标题所在的底部区域？这是HTML：

```
<div id="content">
<div id="wrapper">
<div class="slider-wrapper theme-default">
<div id="slider" class="nivoSlider">
<a href="/GrantInfo/NonProfitPartners.html"><img src="nivo-slider/demo/images/moorecenter.jpg" data-thumb="images/moorecenter.jpg"/></a>
<a href="/GrantInfo/NonProfitPartners.html"><img src="nivo-slider/demo/images/AIR.jpg" data-thumb="images/AIR.jpg" alt="AIR Seacoast" data-transition="slideInLeft"/></a>
<a href="/Programs+Publications/Publications.html"><img src="nivo-slider/demo/images/circle.jpg" data-thumb="images/circle-program.jpg" alt="Circle Program Plymouth" data-transition="slideInLeft"/></a>
<a href="/GrantInfo/NonProfitPartners.html"><img src="nivo-slider/demo/images/wholevillage.jpg" data-thumb="images/wholevillage.jpg" alt="Whole Village Plymouth"/></a>
</div></div> 
```

这是字幕的CSS：

```
.nivo-caption {
display: none !important;
}

.nivo-html-caption {
display:none;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-29T06:43:40.667

使用以下代码将其删除：

> div.nivo-caption { 显示：无！重要；}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-03T10:10:06.297

删除底部或中间的标题（描述）区域添加以下样式

```
.nivoSlider-desc { display: none;    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T13:58:04.587

希望这会有所帮助，这就是我为 Wordpress 设置它的方式，因此，如果您使用的是直接 HTML，只需将链接放入，然后在其中放入图像，然后关闭链接。

```
<div class="nivoSlider">
    <?php if(get_field('banner_images')): ?>
        <?php while(the_repeater_field('banner_images')): ?>
            <a href="<?php echo the_sub_field('image_link', $row); ?>">
                <img src="<?php echo the_sub_field('image', $row); ?>" alt="Site Name" title="<?php echo the_sub_field('image_description'); ?>" />
            </a>
        <?php endwhile; ?>
    <?php endif; ?>
</div> 
```

# php - Symfony2 不会加载自定义身份验证提供程序，加载 DaoAuthenticationProvider

> ID：15008721
> 
> 赞同：0
> 
> 时间：2013-02-21T17:35:31.860
> 
> 标签：php, rest, authentication, symfony, restful-authentication

*这是[我上一个问题](https://stackoverflow.com/questions/14928514/symfony2-authentication-via-3rd-party-rest-api)的延续。*

你好，

我在 Symfony2 应用程序中实现了一个自定义身份验证提供程序，以便针对 Wordnik REST API 进行身份验证。

在应用程序加载时，无论请求路径是什么，这都是我得到的异常：

`( ! ) Fatal error: Cannot access parent:: when current class scope has no parent in /[..]/WordRot/vendor/symfony/symfony/src/Symfony/Component/Security/Core/Authentication/Provider/UserAuthenticationProvider.php on line 43`

[您可以在此处](https://gist.github.com/freen/5006382)查看完整的堆栈跟踪。

跟踪中的倒数第二行显示**它正在加载** `DaoAuthenticationProvider`：

`18 0.0217 1922792 Symfony\Component\Security\Core\Authentication\Provider\DaoAuthenticationProvider->__construct( ) ../appDevDebugProjectContainer.php:3071`

但是我的任何配置都没有引用该提供程序或任何扩展它的东西。我的自定义提供程序直接实现了`AuthenticationProviderInterface`.

所以我假设我的配置是错误的，并且我需要在某个地方明确设置`WordnikProvider`，但我不确定在哪里！研究没有提供任何关于这个问题的线索。

任何帮助将非常感激！

**文件**

*   [/app/config/config.yml](https://github.com/freen/wordrot/blob/master/app/config/config.yml)
*   [/app/config/security.yml](https://github.com/freen/wordrot/blob/master/app/config/security.yml)
*   [/src/WordRot/PlayBundle/Security/Authentication/Provider/WordnikProvider.php](https://github.com/freen/wordrot/blob/master/src/WordRot/PlayBundle/Security/Authentication/Provider/WordnikProvider.php)
*   [/src/WordRot/PlayBundle/Security/Authentication/Token/WordnikUserToken.php](https://github.com/freen/wordrot/blob/master/src/WordRot/PlayBundle/Security/Authentication/Token/WordnikUserToken.php)
*   [/src/WordRot/PlayBundle/Security/Firewall/WordnikListener.php](https://github.com/freen/wordrot/blob/master/src/WordRot/PlayBundle/Security/Firewall/WordnikListener.php)
*   [/src/WordRot/PlayBundle/DependencyInjection/Security/Factory/WordnikFactory.php](https://github.com/freen/wordrot/blob/master/src/WordRot/PlayBundle/DependencyInjection/Security/Factory/WordnikFactory.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:35:20.703

该行返回 $this->authenticationManager->authenticate(new WordnikUserToken($username, $password, $this->providerKey)); 在 WordnikListener 中转到 Symfony\Component\Security\Core\Authentication\AuthenticationProviderManager (classes.php) 进行身份验证。$this->providers 是 DaoAuthentificationProvider、WordnikProvider 和 AnonymousAuthentificationProvider。从 DaoAuthentificationProvider 它只使用方法 supports($token): return $token instanceof UsernamePasswordToken && $this->providerKey === $token->getProviderKey();

它返回 false，因此下一行是 WordnikProvider。

Oh..misread：错误在构造函数中： parent::__construct($userChecker, $providerKey, $hideUserNotFoundExceptions); 似乎失败了。运行 PHP 5.4.10 左右我没有错误！！

rm -rf vendor 并再次运行 composer install 或尝试使用不同的 PHP 版本！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:20:08.610

A 不得不在一周前创造出这样的东西。在 and，我创建了一个自定义用户提供程序，在这里我只需调用 api 并根据响应创建用户或不创建用户。

我建议阅读以下内容：

[http://symfony.com/doc/2.0/cookbook/security/custom_provider.html](http://symfony.com/doc/2.0/cookbook/security/custom_provider.html)

# java - java中的时间戳数据文件解析器

> ID：15008722
> 
> 赞同：-2
> 
> 时间：2013-02-21T17:35:34.387
> 
> 标签：java, parsing

我有一个奇怪的数据文件需要解析。这更像是一个逻辑问题而不是代码问题。它看起来有点像这样

```
2012 年 1 月 11 日 18:00:24
01-11-2012 18:00:39
01-11-2012 18:00:54
数据线1
01-11-2012 18:01:09
数据线2
数据线3
01-11-2012 18:01:24
数据线4
03-07-2010 18:01:39

```

预期的输出应该是

```
2012 年 1 月 11 日 18:00:24，空
2012 年 1 月 11 日 18:00:39，空
.
.
2012 年 1 月 11 日 18:01:09，数据线 2；数据线 3

```

任何想法如何做到这一点？我尝试通过缓冲阅读器阅读并拥有多个 if，但无法理清逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:46:58.483

如何尝试使用具有适当模式的 SimpleDateFormat 解析每一行（看起来像“MM-dd-yyyy HH:mm:ss”），然后捕获 java.text.ParseException 并将它们视为数据行？您只需要跟踪您解析的最后一个日期，然后将所有后续数据行与该日期相关联，直到您下次运行某个日期。

# html - Mozilla flexbox 行为不同于 webkit 和 ie

> ID：15008727
> 
> 赞同：0
> 
> 时间：2013-02-21T17:35:39.867
> 
> 标签：html, css, mozilla, flexbox

我尝试实现一个垂直的项目列表，它在溢出时将它们包装起来并产生一个水平滚动的列表。我想使用 flexbox 来实现这一点。

Webkit 和 IE 产生预期的输出。不是那么火狐。请看这个例子：

[JSFIDDLE 示例](http://jsfiddle.net/alexander_genne/LmjnN)

```
 <div class="listbox flex-direction-vertical flex-wrap">
    <div class="listitem"><div class="tablediv"><table><tr><td><div class="content">content</div></td></tr></table></div></div>
    <div class="listitem"><div class="tablediv"><table><tr><td><div class="content">content</div></td></tr></table></div></div>
    <div class="listitem"><div class="tablediv"><table><tr><td><div class="content">content</div></td></tr></table></div></div>
    <div class="listitem"><div class="tablediv"><table><tr><td><div class="content">content</div></td></tr></table></div></div>
    <div class="listitem"><div class="tablediv"><table><tr><td><div class="content">content</div></td></tr></table></div></div>
    <div class="listitem"><div class="tablediv"><table><tr><td><div class="content">content</div></td></tr></table></div></div>
    <div class="listitem"><div class="tablediv"><table><tr><td><div class="content">content</div></td></tr></table></div></div>
    <div class="listitem"><div class="tablediv"><table><tr><td><div class="content">content</div></td></tr></table></div></div>
    <div class="listitem"><div class="tablediv"><table><tr><td><div class="content">content</div></td></tr></table></div></div>
    <div class="listitem"><div class="tablediv"><table><tr><td><div class="content">content</div></td></tr></table></div></div>
    <div class="listitem"><div class="tablediv"><table><tr><td><div class="content">content</div></td></tr></table></div></div>
    <div class="listitem"><div class="tablediv"><table><tr><td><div class="content">content</div></td></tr></table></div></div>
    <div class="listitem"><div class="tablediv"><table><tr><td><div class="content">content</div></td></tr></table></div></div>
    <div class="listitem"><div class="tablediv"><table><tr><td><div class="content">content</div></td></tr></table></div></div>
    <div class="listitem"><div class="tablediv"><table><tr><td><div class="content">content</div></td></tr></table></div></div>
    <div class="listitem"><div class="tablediv"><table><tr><td><div class="content">content</div></td></tr></table></div></div>
    <div class="listitem"><div class="tablediv"><table><tr><td><div class="content">content</div></td></tr></table></div></div>
    <div class="listitem"><div class="tablediv"><table><tr><td><div class="content">content</div></td></tr></table></div></div>
    <div class="listitem"><div class="tablediv"><table><tr><td><div class="content">content</div></td></tr></table></div></div>
    <div class="listitem"><div class="tablediv"><table><tr><td><div class="content">content</div></td></tr></table></div></div>
    <div class="listitem"><div class="tablediv"><table><tr><td><div class="content">content</div></td></tr></table></div></div>
    <div class="listitem"><div class="tablediv"><table><tr><td><div class="content">content</div></td></tr></table></div></div>
    <div class="listitem"><div class="tablediv"><table><tr><td><div class="content">content</div></td></tr></table></div></div>
    <div class="listitem"><div class="tablediv"><table><tr><td><div class="content">content</div></td></tr></table></div></div>
    <div class="listitem"><div class="tablediv"><table><tr><td><div class="content">content</div></td></tr></table></div></div>
    <div class="listitem"><div class="tablediv"><table><tr><td><div class="content">content</div></td></tr></table></div></div>
  </div>

BODY 
{
    counter-reset: listitem; /* Create an item counter scope */
}
.content:before {
    content: "item " counter(listitem) ". ";
    counter-increment: listitem;  /* Add 1 to listitem */
}
.listbox
{
    height: 400px;
    width:600px;
    background-color:lightgray;
    overflow:auto;

    /* old syntax */
    display: -webkit-box;
    display: -moz-box;

    /* new syntax */
    display: -webkit-flex; 
    display: -moz-flex; 
    display: -moz-flexbox;
    display: -o-flex; 
    display: -ms-flex;
    display: -ms-flexbox; 
    display: flexbox;
    display: flex; 
}
.flex-direction-vertical
{
    /* old syntax */
    -webkit-box-orient: vertical;
    -moz-box-orient: vertical;
    -moz-box-align:start;
    -moz-box-pack:start;

    /* new syntax */
    -webkit-flex-direction:column;
    -moz-flex-direction:column; 
    -o-flex-direction:column; 
    -ms-flex-direction:column; 
    flex-direction:column;

}
.flex-wrap
{
    /* old syntax */
    -webkit-box-wrap: wrap;
    -moz-box-wrap: wrap;

    /* new syntax */
    -webkit-flex-wrap:wrap;
    -moz-flex-wrap:wrap; 
    -o-flex-wrap:wrap; 
    -ms-flex-wrap:wrap; 
    flex-wrap:wrap;
}
.listitem
{
    background-color:green;
    border: 2px solid red;
    height:100px;
    width:200px;
}
.content
{
    background-color:gray;
} 
```

请帮我找到 Firefox 的解决方案。

提前谢谢你亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:43:52.523

如果您正在查看版本 20 之前的 Firefox，那么您就不走运了。这些 FF 遵循 2009 年的规范，控制包装的属性称为`box-lines`(single|multiple)。唯一的麻烦是，他们从未实现过它： [https ://bugzilla.mozilla.org/show_bug.cgi?id=562073](https://bugzilla.mozilla.org/show_bug.cgi?id=562073)

好消息是，从版本 20 开始，FF 将遵循 2012 年 9 月的规范。我没有关注他们的进展，但 caniuse 在这些版本中将其标记为完全“支持”，而不仅仅是“部分支持”。

# android - 隐藏/启用 adMob

> ID：15008731
> 
> 赞同：0
> 
> 时间：2013-02-21T17:35:56.867
> 
> 标签：android, admob

我搜索但无法得到答案

我这样称呼admob：

```
AdView adView = (AdView)this.findViewById(R.id.ad);
        adView.loadAd(new AdRequest()); 
```

好的，但是我怎样才能使 admob 不可见呢？（包括视图） 并且以后可以再次启用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T17:49:04.077

`adView.setVisibility(View.GONE);`

编辑：您也可以将其设置为.和`adView.setVisibility(View.INVISIBLE);`之间的区别在于从布局中完全删除视图，同时“保存”该视图占用的空间。`INVISIBLE``GONE``GONE``INVISIBLE`

# wordpress - Wordpress 引导导航

> ID：15008735
> 
> 赞同：0
> 
> 时间：2013-02-21T17:35:57.770
> 
> 标签：wordpress, twitter-bootstrap, navigation

我结合了 bootstrap 和 wordpress。我找到了 2 篇文章和要点，它们提供了一个助行器和一些要添加的标记，以使下拉导航菜单正常工作。

我已经尝试过多次合并walker，但我得到的只是一个空白的垂直菜单，除了子弹之外什么都看不到。有谁知道我做错了什么？

好的，这就是我所做的。[http://twittem.github.com/wp-bootstrap-navwalker/](http://twittem.github.com/wp-bootstrap-navwalker/)我已按照此处的说明进行操作。就像它说的那样，我创建了一个新的 twitter_bootstrap_nav_walker.php 文件。我已经把它放在了正确的地方。wp_nav_menu()（代码），我不知道放在哪里，一个人说把它放在mt header中，另一个人说把它放在nav_menu_template.php中。当我把它放到模板中时，我在 Dreamweaver 中得到一个语法错误。当我将代码添加到 header.php 文件时，我收到了一个致命错误。斯科特，谢谢你给我展示了一些新东西，但我不想重新开始

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:08:58.853

下面的标记/代码对我有用。您可能需要也可能不需要标题中的用户登录代码。

在 header.php 中

```
 <div id="page-navbar" class="navbar navbar-inverse navbar-static-top">
            <div class="navbar-inner">
            <div class="container-fluid">
                <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                </button>
                <a class="brand" href="<?php echo get_settings('home'); ?>"><?php bloginfo('name'); ?></a>
                <div class="nav-collapse collapse">
                    <p class="navbar-text pull-right">
                        <?php if ( is_user_logged_in() ) : ?>
                            <a href="/wp-admin" class="login"><i class="icon-user"></i> <?php echo $current_user->display_name; ?></a>
                        <?php else : ?>
                            <a href="/wp-login.php" class="login"><i class="icon-signin"></i> Sign In</a>
                        <?php endif ?>
                    </p>

                    <?php wp_nav_menu(array(
                    'depth' => 2,
                    'container' => false,
                    'menu_class' => 'nav',
                    'walker' => new Bootstrap_Walker_Nav_Menu()
                    )); ?>   

                </div><!--/.nav-collapse -->
            </div>
            </div>
        </div> 
```

Bootstrap_Walker_Nav_Menu 类来自[John Megahan](http://goodandorgreat.wordpress.com/2012/02/17/update-4-using-twitter-bootstrap-2-0-dropdown-menus-with-wordpress/)。

```
class Bootstrap_Walker_Nav_Menu extends Walker_Nav_Menu {

function start_lvl( &$output, $depth = 0, $args = array()) {

    $indent = str_repeat( "\t", $depth );
    $output    .= "\n$indent<ul class=\"dropdown-menu\">\n";

}

function start_el( &$output, $item, $depth = 0, $args = array(), $id = 0 ) {

    $indent = ( $depth ) ? str_repeat( "\t", $depth ) : '';

    $li_attributes = '';
    $class_names = $value = '';

    $classes = empty( $item->classes ) ? array() : (array) $item->classes;
    $classes[] = ($args->has_children) ? 'dropdown' : '';
    $classes[] = ($item->current || $item->current_item_ancestor) ? 'active' : '';
    $classes[] = 'menu-item-' . $item->ID;

    $class_names = join( ' ', apply_filters( 'nav_menu_css_class', array_filter( $classes ), $item, $args ) );
    $class_names = ' class="' . esc_attr( $class_names ) . '"';

    $id = apply_filters( 'nav_menu_item_id', 'menu-item-'. $item->ID, $item, $args );
    $id = strlen( $id ) ? ' id="' . esc_attr( $id ) . '"' : '';

    $output .= $indent . '<li' . $id . $value . $class_names . $li_attributes . '>';

    $attributes  = ! empty( $item->attr_title ) ? ' title="'  . esc_attr( $item->attr_title ) .'"' : '';
    $attributes .= ! empty( $item->target )     ? ' target="' . esc_attr( $item->target     ) .'"' : '';
    $attributes .= ! empty( $item->xfn )        ? ' rel="'    . esc_attr( $item->xfn        ) .'"' : '';
    $attributes .= ! empty( $item->url )        ? ' href="'   . esc_attr( $item->url        ) .'"' : '';
    $attributes .= ($args->has_children)        ? ' class="dropdown-toggle" data-toggle="dropdown"' : '';

    $item_output = $args->before;
    $item_output .= '<a'. $attributes .'>';
    $item_output .= $args->link_before . apply_filters( 'the_title', $item->title, $item->ID ) . $args->link_after;
    $item_output .= ($args->has_children) ? ' <b class="caret"></b></a>' : '</a>';
    $item_output .= $args->after;

    $output .= apply_filters( 'walker_nav_menu_start_el', $item_output, $item, $depth, $args );
}

function display_element( $element, &$children_elements, $max_depth, $depth=0, $args, &$output ) {

    if ( !$element )
        return;

    $id_field = $this->db_fields['id'];

    //display this element
    if ( is_array( $args[0] ) ) 
        $args[0]['has_children'] = ! empty( $children_elements[$element->$id_field] );
    else if ( is_object( $args[0] ) ) 
        $args[0]->has_children = ! empty( $children_elements[$element->$id_field] ); 
    $cb_args = array_merge( array(&$output, $element, $depth), $args);
    call_user_func_array(array(&$this, 'start_el'), $cb_args);

    $id = $element->$id_field;

    // descend only when the depth is right and there are childrens for this element
    if ( ($max_depth == 0 || $max_depth > $depth+1 ) && isset( $children_elements[$id]) ) {

        foreach( $children_elements[ $id ] as $child ){

            if ( !isset($newlevel) ) {
                $newlevel = true;
                //start the child delimiter
                $cb_args = array_merge( array(&$output, $depth), $args);
                call_user_func_array(array(&$this, 'start_lvl'), $cb_args);
            }
            $this->display_element( $child, $children_elements, $max_depth, $depth + 1, $args, $output );
        }
        unset( $children_elements[ $id ] );
    }

    if ( isset($newlevel) && $newlevel ){
        //end the child delimiter
        $cb_args = array_merge( array(&$output, $depth), $args);
        call_user_func_array(array(&$this, 'end_lvl'), $cb_args);
    }

    //end this element
    $cb_args = array_merge( array(&$output, $element, $depth), $args);
    call_user_func_array(array(&$this, 'end_el'), $cb_args);

}

} 
```

# java - 如何在 Ubuntu 12.04 上启动 Eclipse

> ID：15008736
> 
> 赞同：-1
> 
> 时间：2013-02-21T17:36:05.247
> 
> 标签：java, eclipse, ubuntu-12.04

```
JVM terminated. Exit code=2
/usr/local/bin/java
-Xms40m
-Xmx384m
-Dorg.eclipse.equinox.p2.reconciler.dropins.directory=/usr/share/eclipse/dropins
-jar /usr/lib/eclipse//plugins/org.eclipse.equinox.launcher_1.2.0.dist.jar
-os linux
-ws gtk
-arch x86_64
-showsplash
-launcher /usr/lib/eclipse/eclipse
-name Eclipse
--launcher.library /usr/lib/eclipse//plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.1.100.dist/eclipse_1408.so
-startup /usr/lib/eclipse//plugins/org.eclipse.equinox.launcher_1.2.0.dist.jar
--launcher.overrideVmargs
-exitdata 428003
-clean
-initialize
-vm /usr/local/bin/java
-vmargs
-Xms40m
-Xmx384m
-Dorg.eclipse.equinox.p2.reconciler.dropins.directory=/usr/share/eclipse/dropins
-jar /usr/lib/eclipse//plugins/org.eclipse.equinox.launcher_1.2.0.dist.jar 
```

所以 java -version 找不到路径。我尝试了以下方法：编辑 ~/.bashrc ~/.profile /etc/environment bash.bashrc 文件并向其中添加以下内容

```
JAVA_HOME=/usr/lib/jvm/jdk1.7.0_15
PATH=$PATH:$HOME/bin:$JAVA_HOME/bin
JRE_HOME=/usr/lib/jvm/jre1.7.0_15
PATH=$PATH:$HOME/bin:$JRE_HOME/bin
export JAVA_HOME
export JRE_HOME
export PATH 
```

另外，我还手动将 java bin 目录添加到 PATH 中。我已经重新启动了我的电脑几次，但我仍然得到

```
bash: /usr/local/bin/java: No such file or directory 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:19:52.197

放在你的路径`$JAVA_HOME/bin`的*前面*。根本不要`$JRE_HOME/bin`进入你的道路。

目前，您正在获取一些其他文件（可能是符号链接）`/usr/local/bin`，因为该目录首先出现在您的路径中。

我不确定你为什么在`/usr/lib`;中安装 Java 那是 Ubuntu 安装程序放的地方吗？如果是，那么我希望`/usr/local/bin/java`指向一个有效的文件。您可能需要仔细检查。

最后（我要求输出的原因`java -version`），确保您运行的是 JVM 的 x64 版本，因为那是您正在使用的 Eclipse 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:40:24.097

所以问题是我公司网络上的管理员权限问题，因为即使使用 sudo，我的帐户也有有限的访问权限。我正在重新安装具有完全管理员权限的计算机

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T18:22:13.880

那么你在哪里安装了 Java，到`/usr/local/bin/java`或到`/usr/lib/jvm/jdk1.7.0_15/bin/java`？
做一个`ls -l /usr/local/bin/java /usr/lib/jvm/jdk1.7.0_15/bin/java`，结果如何？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T18:23:16.793

也许，您需要更新对编译器路径的引用，因为您的 ubuntu 无法识别您安装 jdk 或 jre 的路径：

使用此命令查看您计算机中的 java 版本：

```
sudo update-alternatives --config java 
```

然后，如有必要，更新您正在使用的 jdk 和 jre 的位置：

```
sudo update-alternatives --install "/usr/bin/javac" "javac" "/usr/lib/jvm/java-6.31-oracle/bin/javac" 1 
```

然后，请执行以下命令：

```
sudo update-alternatives --config javac 
```

我有一个类似的问题并通过使用此命令解决。

希望它会帮助你。

# php - 在 PHP exec() 中使用 PDFCreator 的命令行参数

> ID：15008737
> 
> 赞同：1
> 
> 时间：2013-02-21T17:36:07.333
> 
> 标签：php, command-line

我曾尝试使用 Zend 框架在 PHP 中进行 PDF 转换，但不知道如何安装它。我发现这个程序允许通过命令行打印/转换 PDF，所以我想我可以在 PHP 中执行一个 exec() 命令来运行该程序并为我在服务器上转换我的文件。

该程序是来自 pdfforge.org 的 PDFCreator，我正在尝试将 .DOC 文件转换为 .PDF 文件。从 cmd.exe 运行时，下面的命令行可以完美运行。但是，当从 PHP 运行它时，我相信它试图在用户系统下执行并且无法正常工作。（我做了一个 php exec('whoami') 并且它作为系统返回。）我还将 Apache 打开的用户更改为管理员帐户，但仍然无法使其工作。

`"C:\Program Files\PDFCreator\PDFCreator.exe" /OptionsFile"C:\PDFCreator.ini" /PF"C:\test.doc"`

关于为什么在使用 exec() 运行命令时无法获得相同行为的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:42:07.413

那是因为 Apache 用户和帐户用户应该是相同的，例如：您的 windows 用户是 Pedro，所以 Apache 用户应该是 Pedro...您应该打开 services.msc 并在会话选项卡中允许 apache 与当前桌面进行交互。 ...这样，共享相同的 Windows 会话和桌面....但它应该代表安全风险，不建议这样做。

萨卢多斯。

# ruby - 如何将 rubocop 与 Rake 集成？

> ID：15008751
> 
> 赞同：34
> 
> 时间：2013-02-21T17:36:57.590
> 
> 标签：ruby, coding-style, rake, rubocop

[rubocop](https://github.com/bbatsov/rubocop)是 Ruby 的代码风格检查器。与 rubocop 类似的工具 Cane 可以[与 Rake 集成](https://github.com/square/cane#integrating-with-rake)。我更喜欢 rubocop 而不是 Cane，因为 rubocop 根据[Ruby 样式指南](https://github.com/bbatsov/ruby-style-guide)进行检查，而且它似乎[发现了更多问题](https://stackoverflow.com/a/15007900/789593)。为了自动化样式检查过程，我想将 rubocop 与 Rake 集成，以便在缺乏代码质量时构建失败。

Gem 已经支持通过 Rake 向包[添加测试。](http://guides.rubygems.org/make-your-own-gem/#writing-tests)我想对样式检查做同样的事情，以便样式检查与测试一起运行。我怎样才能做到这一点？

如果从 Rakefile 开始有帮助的话，这里是一个：

```
# -*- coding: utf-8; mode: ruby -*-

require 'bundler/gem_tasks'
require 'rake/testtask'

Rake::TestTask.new do |t|
  t.libs << 'test'
  t.test_files = FileList['test/unit/test*.rb']
end

desc 'Run tests'
task default: :test 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-11-25T20:53:48.813

从版本`0.10.0`rubocop 开始，您可以使用自定义 rake 任务。只需将以下内容放入您的`Rakefile`

```
require 'rubocop/rake_task'

RuboCop::RakeTask.new 
```

确保使用大写的“R”和“C”，否则会出现 NameError。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2016-11-11T17:17:49.283

我强烈推荐，

```
require 'rubocop/rake_task'

RuboCop::RakeTask.new(:rubocop) do |t|
  t.options = ['--display-cop-names']
end 
```

这使用了 rubocop 自己的 rake 任务，并允许您根据需要传递选项。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-04T21:42:14.210

如果您使用 Guard 进行 RSpec 测试，您可能会发现[https://github.com/yujinakayama/guard-rubocop很有用。](https://github.com/yujinakayama/guard-rubocop)它使 Rubocop 能够在您保存文件以及测试结果后立即为您提供反馈。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-07T15:35:52.067

我需要自己做类似的事情，最后查看了`RuboCop::RakeTask`这里的内部源代码：

[https://github.com/rubocop/rubocop/blob/a34a1c2c2dd1fa6d90ffd06c183421a495a0717c/lib/rubocop/rake_task.rb#L40-L43](https://github.com/rubocop/rubocop/blob/a34a1c2c2dd1fa6d90ffd06c183421a495a0717c/lib/rubocop/rake_task.rb#L40-L43)

```
 require 'rubocop'

      cli = CLI.new
      puts 'Running RuboCop...' if verbose
      result = cli.run(options)
      abort('RuboCop failed!') if result.nonzero? && fail_on_error 
```

您实际上可以在自己的代码库/ rake 任务中直接调用类似的代码。

我最终编写了一个可以调用的小包装模块，并带有一些我一直希望应用的默认标志：

```
module RubocopCli
  def self.run!(*args)
    require "rubocop"
    cli = RuboCop::CLI.new
    result = cli.run(["--display-cop-names", "--force-exclusion", "--fail-level", "autocorrect", *args])
    raise "RubocopCli.run! Linting failed." if result.nonzero?
  end
end 
```

然后，您可以使用来自任何任务或应用程序代码的附加参数调用它，例如：

```
files_to_lint = %w[lib/whatever.rb spec/lib/whatever_spec.rb]
RubocopCli.run!("--auto-correct", *files_to_lint) 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2014-09-09T04:48:56.317

您可以通过 Rake 选择您喜欢的选项：

```
 desc 'Run Rubocop with options'
  task rubocop: :environment do
    sh 'bundle exec rubocop -D --format offenses --format progress || true'
  end 
```

然后我建议修改默认任务以包含输出。诀窍是清除任务，然后添加您想要的内容。请注意需要以结尾，`|| true`这样来自 Rubocop 的错误不会阻止下一个任务运行。这就是我所做的，它也使用并行测试：

```
task(:default).clear.enhance ['parallel:parallel_prepare', 'parallel:spec',
                              'parallel:features', 'lint:rubocop',
                              'lint:rails_best_practices'] 
```

* * *

## 回答 #6

> 赞同：-13
> 
> 时间：2013-02-24T21:52:37.840

我会建议炮轰 rubocop 程序。这是最简单的解决方案。只需将其添加到您的 Rakefile 中：

```
task test: :rubocop

task :rubocop do
  sh 'rubocop'
end 
```

# javascript - 在 Chaplin js 框架中，以 ! 为前缀的事件是什么？意思是？

> ID：15008754
> 
> 赞同：5
> 
> 时间：2013-02-21T17:37:04.640
> 
> 标签：javascript, backbone.js, event-handling, coffeescript, chaplinjs

我已经看到这些事件散布在卓别林示例代码中，但文档或源代码中没有解释。似乎这意味着它是一个触发动作的全局事件。那是对的吗？它们只是一个约定，还是以某种方式强制执行？

```
# Handle login
@subscribeEvent 'logout', @logout
@subscribeEvent 'userData', @userData

# Handler events which trigger an action

# Show the login dialog
@subscribeEvent '!showLogin', @showLoginView
# Try to login with a service provider
@subscribeEvent '!login', @triggerLogin
# Initiate logout
@subscribeEvent '!logout', @triggerLogout 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T14:04:25.180

[从关于同一问题的 GitHub 问题中](https://github.com/chaplinjs/chaplin/issues/170)引用：

> `!logout`更多的是模块间消息或命令。它允许一个模块触发注销（例如带有注销按钮的视图）。然后由另一个模块（例如会话控制器）处理实际的注销过程。例如，此模块使服务器上的会话无效。成功时，它会发出一个`logout` 事件，这意味着`logout`已经发生。所有对登录/注销感兴趣的模块都应该订阅`logout`.

我认为这很好地解释了它。基本上在`!`动作发起时触发事件，而在动作成功时触发普通事件。

# php - 组织一个多用户数据库网站

> ID：15008755
> 
> 赞同：0
> 
> 时间：2013-02-21T17:37:05.853
> 
> 标签：php, mysql, database, client

如果这看起来过于简单，我深表歉意。我发现提出一个愚蠢的问题并正确编写代码比犯错误并花费数小时试图找到并修复它更好。

我为我的兄弟做了一个客户端管理系统（PHP / MYSQL），他的一些朋友看到了，也想要一个。所以我认为建立一个每个人都有自己的登录名/密码的网站是个好主意。当他们登录到他们的帐户时，他们只会看到他们的客户数据库。这听起来是个好主意，但我遇到了心理障碍。

现在在我兄弟的网站上，我有一个数据库，其中有两张表，一张用于登录信息（这样他就可以访问他的团队），然后是保存所有客户信息的实际数据库。如果我遵循这个模型，我仍然只需要一个数据库和一个用于登录信息的表，但是每个用户都必须为他们的个人客户拥有自己的表。所以说我得到越来越多的用户，最终我有一个包含一百个不同表的数据库。可以吗？他们的安全问题吗？有没有更好的方法来解决这个问题？我错过了一些逻辑吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:38:48.340

> 如果我遵循这个模型，我仍然只需要一个数据库和一个用于登录信息的表，但是每个用户都必须为他们的个人客户拥有自己的表。

不，您只有一个客户表。其中的一列将是引用用户表的主键的[外键](http://en.wikipedia.org/wiki/Foreign_key)（显示客户端与哪个用户关联）。

（除非一个客户端可以与多个用户相关联，在这种情况下，您将使用[联结表](http://en.wikipedia.org/wiki/Junction_table)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:42:20.820

好吧，在开始时，您可以实现一个名为 Client or Company 的表（您的所有客户都必须在该表中输入一行，我的意思是您的兄弟和任何其他想要使用您的网站的人/公司），以及来自的 PK该表应添加到数据库中的所有表中。

但是，如果您的网站摇摇欲坠，会发生什么？也许您有 10000 个客户端，您应该分析服务器（可能是主机）的性能是否支持这种速率传输，并且 PK/FK 工作正常。在那个时候，也许你应该为你拥有的每个客户创建一个数据库和一个网站。

# java - 用于 RCP GUI 的布局类型

> ID：15008756
> 
> 赞同：0
> 
> 时间：2013-02-21T17:37:11.750
> 
> 标签：java, user-interface, swt, eclipse-rcp, rcp

我正在使用 a 为我的 RCP 应用程序创建我的 GUI，`GridLayout`但我遇到了问题，因为据我了解，a`GridLayout`按照创建它们/设置它们的布局数据的顺序添加元素？因此，这并没有为移动元素和添加新元素提供很多/任何灵活性，同时保持先前放置的元素的相同布局。

我应该使用其他方法来制作我的 GUI 吗？我需要它灵活且易于指定单个组件的大小和位置，而不是组件进入下一个空间。

目前`GridLayout`只允许我指定屏幕上的列数，然后指定元素属性（`SWT.LEFT, SWT.CENTER`）等。

这是我的代码来说明我的意思：

```
import javax.annotation.PostConstruct;
import org.eclipse.swt.*;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Text;

public class CreateUI {

//Text area for the variables
Text variableArea;
Text methodArea;
Text otherArea;
Text fooArea;

@PostConstruct
//Annotation indicates the method is to be called after the class is constructed
public void createInterface(Composite parent){

    int columns =4;

    //Set the layout of the parent (the Part) to a grid layout
    parent.setLayout(new GridLayout(columns, true));

    variableArea = new Text(parent, SWT.BORDER | SWT.V_SCROLL | SWT.H_SCROLL);
    variableArea.setText("Hello");
    variableArea.setLayoutData(new GridData(SWT.LEFT, SWT.CENTER, true, true, 1, 1));

    methodArea = new Text(parent, SWT.BORDER | SWT.V_SCROLL | SWT.H_SCROLL);
    methodArea.setText("Hello2");
    methodArea.setLayoutData(new GridData(SWT.LEFT, SWT.CENTER, true, true, 1, 1));

    otherArea = new Text(parent, SWT.BORDER | SWT.V_SCROLL | SWT.H_SCROLL);
    otherArea.setText("Hello3");
    otherArea.setLayoutData(new GridData(SWT.LEFT, SWT.CENTER, true, true, 1, 1));

    fooArea = new Text(parent, SWT.BORDER | SWT.V_SCROLL | SWT.H_SCROLL);
    fooArea.setText("Hello4");
    fooArea.setLayoutData(new GridData(SWT.LEFT, SWT.CENTER, true, true, 1, 1));

  }
} 
```

这会产生：

[![](../Images/bc16403e786c553787c48cd20f747ab1.png "由 imgur.com 主办")](https://imgur.com/JHJ4hic)

目前只有这 4 个文本区域作为示例，但稍后我将有多个文本区域、按钮、下拉菜单等，我希望能够更轻松地格式化它们并自由定位它们。

关于上面的示例，我希望能够将这 4 个文本区域在列中彼此重叠放置以显示信息，并在剩余空间中自由放置其他元素。

任何指针都非常适合我应该使用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:32:02.663

[`MigLayout`](http://www.miglayout.com/)相当灵活。从内置布局中，`FormLayout`也是一个不错的选择，但它比正确的要困难得多`GridLayout`，所以我只建议在你觉得`GridLayout`不合适的情况下使用它。

# python - 使用 argparse 解析布尔值

> ID：15008758
> 
> 赞同：874
> 
> 时间：2013-02-21T17:37:16.093
> 
> 标签：python, boolean, argparse, command-line-arguments

我想使用 argparse 来解析写为“--foo True”或“--foo False”的布尔命令行参数。例如：

```
my_program --my_boolean_flag False 
```

但是，以下测试代码并没有做我想要的：

```
import argparse
parser = argparse.ArgumentParser(description="My parser")
parser.add_argument("--my_bool", type=bool)
cmd_line = ["--my_bool", "False"]
parsed_args = parser.parse(cmd_line) 
```

可悲的是，`parsed_args.my_bool`评估为`True`. 即使我更改`cmd_line`为 也是如此`["--my_bool", ""]`，这令人惊讶，因为`bool("")`评估为`False`。

如何让 argparse 解析`"False"`,`"F"`和它们的小写变体是`False`？

* * *

## 回答 #1

> 赞同：1178
> 
> 时间：2013-02-21T17:40:24.810

我认为更规范的方法是通过：

```
command --feature 
```

和

```
command --no-feature 
```

`argparse`很好地支持这个版本：

[Python 3.9+](https://docs.python.org/3/library/argparse.html#action)：

```
parser.add_argument('--feature', action=argparse.BooleanOptionalAction) 
```

Python < 3.9：

```
parser.add_argument('--feature', action='store_true')
parser.add_argument('--no-feature', action='store_false')
parser.set_defaults(feature=True) 
```

* * *

当然，如果你真的想要这个`--arg <True|False>`版本，你可以作为“类型”传递`ast.literal_eval`，或者一个用户定义的函数......

```
def t_or_f(arg):
    ua = str(arg).upper()
    if 'TRUE'.startswith(ua):
       return True
    elif 'FALSE'.startswith(ua):
       return False
    else:
       pass  #error condition maybe? 
```

* * *

## 回答 #2

> 赞同：440
> 
> 时间：2017-04-11T23:45:28.497

使用先前建议的另一种解决方案，但来自以下的“正确”解析错误`argparse`：

```
def str2bool(v):
    if isinstance(v, bool):
        return v
    if v.lower() in ('yes', 'true', 't', 'y', '1'):
        return True
    elif v.lower() in ('no', 'false', 'f', 'n', '0'):
        return False
    else:
        raise argparse.ArgumentTypeError('Boolean value expected.') 
```

这对于使用默认值进行切换非常有用；例如

```
parser.add_argument("--nice", type=str2bool, nargs='?',
                        const=True, default=False,
                        help="Activate nice mode.") 
```

允许我使用：

```
script --nice
script --nice <bool> 
```

并且仍然使用默认值（特定于用户设置）。这种方法的一个（间接相关的）缺点是“nargs”可能会捕捉到一个位置参数——请参阅[这个相关问题](https://stackoverflow.com/questions/26985650/argparse-do-not-catch-positional-arguments-with-nargs)和[这个 argparse 错误报告](http://bugs.python.org/issue9338)。

* * *

## 回答 #3

> 赞同：333
> 
> 时间：2015-07-10T17:52:29.647

## 如果您想允许`--feature`并且`--no-feature`同时（最后一个获胜）

这允许用户使用 来创建 shell 别名`--feature`，并使用 覆盖它`--no-feature`。

### Python 3.9 及更高版本

```
parser.add_argument('--feature', default=True, action=argparse.BooleanOptionalAction) 
```

### Python 3.8 及以下

我推荐mgilson的回答：

```
parser.add_argument('--feature', dest='feature', action='store_true')
parser.add_argument('--no-feature', dest='feature', action='store_false')
parser.set_defaults(feature=True) 
```

## 如果您不想`--feature`同时`--no-feature`允许

您可以使用互斥组：

```
feature_parser = parser.add_mutually_exclusive_group(required=False)
feature_parser.add_argument('--feature', dest='feature', action='store_true')
feature_parser.add_argument('--no-feature', dest='feature', action='store_false')
parser.set_defaults(feature=True) 
```

如果您要设置其中的许多，您可以使用这个助手：

```
def add_bool_arg(parser, name, default=False):
    group = parser.add_mutually_exclusive_group(required=False)
    group.add_argument('--' + name, dest=name, action='store_true')
    group.add_argument('--no-' + name, dest=name, action='store_false')
    parser.set_defaults(**{name:default})

add_bool_arg(parser, 'useful-feature')
add_bool_arg(parser, 'even-more-useful-feature') 
```

* * *

## 回答 #4

> 赞同：106
> 
> 时间：2016-05-24T11:16:24.247

这是另一个没有额外行来设置默认值的变体。布尔值总是被分配的，因此它可以在逻辑语句中使用而无需事先检查：

```
import argparse
parser = argparse.ArgumentParser(description="Parse bool")
parser.add_argument("--do-something", default=False, action="store_true",
                    help="Flag to do something")
args = parser.parse_args()

if args.do_something:
     print("Do something")
else:
     print("Don't do something")

print(f"Check that args.do_something={args.do_something} is always a bool.") 
```

* * *

## 回答 #5

> 赞同：71
> 
> 时间：2017-10-26T09:44:45.383

单线：

```
parser.add_argument('--is_debug', default=False, type=lambda x: (str(x).lower() == 'true')) 
```

* * *

## 回答 #6

> 赞同：37
> 
> 时间：2013-10-07T19:45:21.573

`type=bool`关于什么和`type='bool'`可能意味着什么似乎有些混乱。一个（或两个）应该意味着“运行函数`bool()`”还是“返回布尔值”？就目前而言，`type='bool'`没有任何意义。 `add_argument`给出一个`'bool' is not callable`错误，就像你使用`type='foobar'`, 或`type='int'`.

但是`argparse`确实有注册表可以让您定义这样的关键字。它主要用于`action`，例如 `action='store_true'。您可以通过以下方式查看已注册的关键字：

```
parser._registries 
```

显示字典

```
{'action': {None: argparse._StoreAction,
  'append': argparse._AppendAction,
  'append_const': argparse._AppendConstAction,
...
 'type': {None: <function argparse.identity>}} 
```

定义了很多动作，但只有一种类型，默认的，`argparse.identity`.

此代码定义了一个“布尔”关键字：

```
def str2bool(v):
  #susendberg's function
  return v.lower() in ("yes", "true", "t", "1")
p = argparse.ArgumentParser()
p.register('type','bool',str2bool) # add type keyword to registries
p.add_argument('-b',type='bool')  # do not use 'type=bool'
# p.add_argument('-b',type=str2bool) # works just as well
p.parse_args('-b false'.split())
Namespace(b=False) 
```

`parser.register()`没有记录，也没有隐藏。在大多数情况下，程序员不需要知道它，因为`type`并`action`获取函数和类值。有很多为两者定义自定义值的 stackoverflow 示例。

* * *

如果从前面的讨论中不明显，`bool()`并不意味着“解析字符串”。来自 Python 文档：

> bool(x)：使用标准真值测试程序将值转换为布尔值。

将此与

> int(x)：将数字或字符串 x 转换为整数。

* * *

## 回答 #7

> 赞同：27
> 
> 时间：2016-03-16T09:35:00.850

一个非常相似的方法是使用：

```
feature.add_argument('--feature',action='store_true') 
```

如果您在命令中设置参数 --feature

```
 command --feature 
```

参数将为 True，如果您未设置 type --feature 参数默认值始终为 False！

* * *

## 回答 #8

> 赞同：19
> 
> 时间：2020-01-03T13:49:40.720

最简单最正确的方法是：

```
from distutils.util import strtobool

parser.add_argument('--feature', dest='feature', 
                    type=lambda x: bool(strtobool(x))) 
```

请注意，True 值为 y、yes、t、true、on 和 1；false 值为 n、no、f、false、off 和 0。如果 val 是其他值，则引发 ValueError。

* * *

## 回答 #9

> 赞同：18
> 
> 时间：2013-10-07T14:20:38.340

我一直在寻找同样的问题，恕我直言，漂亮的解决方案是：

```
def str2bool(v):
  return v.lower() in ("yes", "true", "t", "1") 
```

并使用它来将字符串解析为布尔值，如上所述。

* * *

## 回答 #10

> 赞同：14
> 
> 时间：2016-03-24T06:09:20.867

这适用于我期望的一切：

```
add_boolean_argument(parser, 'foo', default=True)
parser.parse_args([])                   # Whatever the default was
parser.parse_args(['--foo'])            # True
parser.parse_args(['--nofoo'])          # False
parser.parse_args(['--foo=true'])       # True
parser.parse_args(['--foo=false'])      # False
parser.parse_args(['--foo', '--nofoo']) # Error 
```

编码：

```
def _str_to_bool(s):
    """Convert string to bool (in argparse context)."""
    if s.lower() not in ['true', 'false']:
        raise ValueError('Need bool; got %r' % s)
    return {'true': True, 'false': False}[s.lower()]

def add_boolean_argument(parser, name, default=False):                                                                                               
    """Add a boolean argument to an ArgumentParser instance."""
    group = parser.add_mutually_exclusive_group()
    group.add_argument(
        '--' + name, nargs='?', default=default, const=True, type=_str_to_bool)
    group.add_argument('--no' + name, dest=name, action='store_false') 
```

* * *

## 回答 #11

> 赞同：13
> 
> 时间：2014-03-28T04:20:17.473

除了@mgilson 所说的之外，应该注意的是，还有一种[`ArgumentParser.add_mutually_exclusive_group(required=False)`](http://docs.python.org/dev/library/argparse.html#mutual-exclusion)方法可以让强制执行变得微不足道，`--flag`并且`--no-flag`不会同时使用。

* * *

## 回答 #12

> 赞同：12
> 
> 时间：2020-04-03T16:51:13.990

最简单的。它不灵活，但我更喜欢简单。

```
 parser.add_argument('--boolean_flag',
                      help='This is a boolean flag.',
                      type=eval, 
                      choices=[True, False], 
                      default='True') 
```

*编辑：*如果您不信任输入，请不要使用`eval`.

* * *

## 回答 #13

> 赞同：11
> 
> 时间：2021-08-20T20:22:47.640

这实际上已经过时了。对于 Python 3.7+，[Argparse 现在支持布尔参数](https://docs.python.org/3/library/argparse.html)（搜索 BooleanOptionalAction）。

实现如下所示：

```
import argparse

ap = argparse.ArgumentParser()

# List of args
ap.add_argument('--foo', default=True, type=bool, help='Some helpful text that is not bar. Default = True')

# Importable object
args = ap.parse_args() 
```

另一件要提的事情：这将通过 argparse.ArgumentTypeError 阻止参数的 True 和 False 以外的所有条目。如果您想出于任何原因尝试更改它，您可以为此创建一个自定义错误类。

* * *

## 回答 #14

> 赞同：8
> 
> 时间：2016-12-27T05:44:03.120

一种更简单的方法是如下使用。

```
parser.add_argument('--feature', type=lambda s: s.lower() in ['true', 't', 'yes', '1']) 
```

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2021-05-19T10:48:08.400

在之前关注@akash-desarda 的优秀答案[https://stackoverflow.com/a/59579733/315112](https://stackoverflow.com/a/59579733/315112)之后，使用`strtobool`via`lambda`之后，我决定`strtobool`直接使用。

```
import argparse
from distutils import util
parser.add_argument('--feature', type=util.strtobool) 
```

是的，你是对的，`strtobool`返回的是一个`int`，而不是一个`bool`。但`strtobool`不会返回除`0`and之外的任何其他值，python 会将它们无缝且一致地`1`转换为值。`bool`

```
>>> 0 == False
True
>>> 0 == True
False
>>> 1 == False
False
>>> 1 == True
True 
```

在收到错误的输入值时，例如

```
python yours.py --feature wrong_value 
```

一个 argparse.Action 与`strtobool`比较`lambda`将产生一个稍微清晰/易于理解的错误消息：

```
yours.py: error: argument --feature: invalid strtobool value: 'wrong_value' 
```

与这段代码相比，

```
parser.add_argument('--feature', type=lambda x: bool(util.strtobool(x)) 
```

这将产生不太清晰的错误消息：

```
yours.py: error: argument --feature: invalid <lambda> value: 'wrong_value' 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2019-06-12T13:26:52.680

最简单的方法是使用*选择*：

```
parser = argparse.ArgumentParser()
parser.add_argument('--my-flag',choices=('True','False'))

args = parser.parse_args()
flag = args.my_flag == 'True'
print(flag) 
```

不通过 --my-flag 评估为 False。如果您总是希望用户明确指定一个选项，则可以添加*required=True选项。*

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2020-05-20T12:58:29.943

作为对@Akash Desarda 答案的改进，您可以这样做

```
import argparse
from distutils.util import strtobool

parser = argparse.ArgumentParser()
parser.add_argument("--foo", 
    type=lambda x:bool(strtobool(x)),
    nargs='?', const=True, default=False)
args = parser.parse_args()
print(args.foo) 
```

它支持`python test.py --foo`

```
(base) [costa@costa-pc code]$ python test.py
False
(base) [costa@costa-pc code]$ python test.py --foo 
True
(base) [costa@costa-pc code]$ python test.py --foo True
True
(base) [costa@costa-pc code]$ python test.py --foo False
False 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2017-02-24T13:41:06.030

我认为最规范的方式是：

```
parser.add_argument('--ensure', nargs='*', default=None)

ENSURE = config.ensure is None 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2019-10-18T14:09:08.727

快速简单，但仅适用于参数 0 或 1：

```
parser.add_argument("mybool", default=True,type=lambda x: bool(int(x)))
myargs=parser.parse_args()
print(myargs.mybool) 
```

从终端调用后输出将为“False”：

```
python myscript.py 0 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2014-10-28T21:00:19.290

```
class FlagAction(argparse.Action):
    # From http://bugs.python.org/issue8538

    def __init__(self, option_strings, dest, default=None,
                 required=False, help=None, metavar=None,
                 positive_prefixes=['--'], negative_prefixes=['--no-']):
        self.positive_strings = set()
        self.negative_strings = set()
        for string in option_strings:
            assert re.match(r'--[A-z]+', string)
            suffix = string[2:]
            for positive_prefix in positive_prefixes:
                self.positive_strings.add(positive_prefix + suffix)
            for negative_prefix in negative_prefixes:
                self.negative_strings.add(negative_prefix + suffix)
        strings = list(self.positive_strings | self.negative_strings)
        super(FlagAction, self).__init__(option_strings=strings, dest=dest,
                                         nargs=0, const=None, default=default, type=bool, choices=None,
                                         required=required, help=help, metavar=metavar)

    def __call__(self, parser, namespace, values, option_string=None):
        if option_string in self.positive_strings:
            setattr(namespace, self.dest, True)
        else:
            setattr(namespace, self.dest, False) 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-04-27T06:20:00.700

类似于@Akash，但这是我使用的另一种方法。它使用`str`than`lambda`因为 python`lambda`总是给我一种外星人的感觉。

```
import argparse
from distutils.util import strtobool

parser = argparse.ArgumentParser()
parser.add_argument("--my_bool", type=str, default="False")
args = parser.parse_args()

if bool(strtobool(args.my_bool)) is True:
    print("OK") 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-09-17T10:23:01.230

只需执行以下操作，您就可以`--test = True`使用

python 文件名 --test

```
parser.add_argument("--test" , default=False ,help="test ?", dest='test', action='store_true') 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-01-08T08:19:54.537

转换值：

```
def __arg_to_bool__(arg):
    """__arg_to_bool__

        Convert string / int arg to bool
    :param arg: argument to be converted
    :type arg: str or int
    :return: converted arg
    :rtype: bool
    """
    str_true_values = (
        '1',
        'ENABLED',
        'ON',
        'TRUE',
        'YES',
    )
    str_false_values = (
        '0',
        'DISABLED',
        'OFF',
        'FALSE',
        'NO',
    )

    if isinstance(arg, str):
        arg = arg.upper()
        if arg in str_true_values:
            return True
        elif arg in str_false_values:
            return False

    if isinstance(arg, int):
        if arg == 1:
            return True
        elif arg == 0:
            return False

    if isinstance(arg, bool):
        return arg

    # if any other value not covered above, consider argument as False
    # or you could just raise and error
    return False

[...]

args = ap.parse_args()
my_arg = options.my_arg
my_arg = __arg_to_bool__(my_arg) 
```

# java - 如何在按键java swing上旋转一行

> ID：15008761
> 
> 赞同：3
> 
> 时间：2013-02-21T17:37:18.387
> 
> 标签：java, swing, graphics, rotation, line

我想知道任何人都可以帮助我使用旋转方法，我查看了以前的问题并没有找到我想要的东西..

代码已被压缩，因此某些元素可能会丢失.. 下面的屏幕截图。

我目前正在从行变量中添加和减去 10 以进行旋转，任何人都可以帮助我使用实际的旋转方法，，

提前致谢..

公共类显示扩展 JFrame{

```
private int Lx1 = CANVAS_WIDTH / 2;         private int Mx1 = CANVAS_WIDTH / 2;
private int Ly1 = CANVAS_HEIGHT / 2;        private int My1 = CANVAS_HEIGHT / 2;
private int Lx2 = CANVAS_WIDTH / 2;         private int Mx2 = CANVAS_WIDTH / 2;
private int Ly2 = CANVAS_HEIGHT / 2;        private int My2 = CANVAS_HEIGHT;

public Display() {
    canvas = new DrawCanvas();
    canvas.setPreferredSize(new Dimension(CANVAS_WIDTH, CANVAS_HEIGHT));
    canvas.setLayout(new GridLayout(8, 4, 80, 10));
    canvas.setComponentOrientation(ComponentOrientation.UNKNOWN);
    Container cp = getContentPane();
    cp.setLayout(new BorderLayout());

Altitude = new JTextField("Altitude", 5);               Altitude.setHorizontalAlignment(JTextField.CENTER);
Altitude.setEditable(false);                            Altitude.setOpaque(false);
Altitude.setFont(Altitude.getFont().deriveFont(25f));           Altitude.setForeground(Color.WHITE);

TASpeed = new JTextField("TAs", 5);                         TASpeed.setHorizontalAlignment(JTextField.CENTER);
TASpeed.setEditable(false);                                 TASpeed.setOpaque(false);
TASpeed.setFont(TASpeed.getFont().deriveFont(25f));             TASpeed.setForeground(Color.WHITE);

TargetAlt = new JTextField("Taralt", 5);                    TargetAlt.setHorizontalAlignment(JTextField.CENTER);
TargetAlt.setEditable(false);                               TargetAlt.setOpaque(false);
TargetAlt.setFont(TargetAlt.getFont().deriveFont(25f));         TargetAlt.setForeground(Color.WHITE);

TargetSpeed = new JTextField("TArsp", 5);                   TargetSpeed.setHorizontalAlignment(JTextField.CENTER);
TargetSpeed.setEditable(false);                             TargetSpeed.setOpaque(false);
TargetSpeed.setFont(TASpeed.getFont().deriveFont(25f));         TargetSpeed.setForeground(Color.WHITE);

BaroCorrectUp =  new JTextField("BaroCorU", 5);             BaroCorrectUp.setHorizontalAlignment(JTextField.CENTER);
BaroCorrectUp.setEditable(false);                           BaroCorrectUp.setOpaque(false);
BaroCorrectUp.setFont(BaroCorrectUp.getFont().deriveFont(25f));     BaroCorrectUp.setForeground(Color.WHITE);

BaroCorrectDown =  new JTextField("BaroCorD", 5);           BaroCorrectDown.setHorizontalAlignment(JTextField.CENTER);
BaroCorrectDown.setEditable(false);                         BaroCorrectDown.setOpaque(false);
BaroCorrectDown.setFont(BaroCorrectUp.getFont().deriveFont(25f));   BaroCorrectDown.setForeground(Color.WHITE);

WindDir = new JTextField("Wind dir", 5);                    WindDir.setHorizontalAlignment(JTextField.CENTER);
WindDir.setEditable(false);                                 WindDir.setOpaque(false);
WindDir.setFont(WindDir.getFont().deriveFont(25f));             WindDir.setForeground(Color.WHITE);

EquivSpeed = new JTextField("EquivSpe", 5);             EquivSpeed.setHorizontalAlignment(JTextField.CENTER);

addKeyListener(new KeyAdapter() {
        public void keyPressed(KeyEvent evt) {
            switch(evt.getKeyCode()) {
            case KeyEvent.VK_LEFT:
                Rx1 -= 10;      Ry1 += 10;          Rx2 += 10;      Ry2 -= 10;
                x1 -=10;        x2 +=10;            Mx1 += 10;      Mx2 -= 10;      

                repaint();
                break;
            case KeyEvent.VK_RIGHT:
                Rx1 -= 10;      Ry1 -= 10;          Rx2 += 10;      Ry2 += 10;
                x1 += 10;       x2 += 10;           Mx1 -= 10;      Mx2 += 10;      

                repaint();
                break;
            case KeyEvent.VK_DOWN:
                y1 -= 10;       y2 -= 10;           Ly1 -= 10;      Ly2 -= 10;
                Sy1 += 10;      Sy2 -= 10;          Ry1 +=10;       Ry2 += 10;
                repaint();
                break;
            case KeyEvent.VK_UP:
                y1 += 10;       y2 += 10;           Ly1 += 10;      Ly2 += 10;
                Sy1 -= 10;      Sy2 += 10;          Ry1 -= 10;      Ry2 -= 10;
                repaint();
                break;
            case KeyEvent.VK_M:
                System.exit(0);
                break;
            case KeyEvent.VK_4:
                countAd++;
                BaroCorrectDown.setText(countAd + "");
                repaint();
                break;
            case KeyEvent.VK_3:
                countAu++;
                BaroCorrectUp.setText(countAu + "");
                repaint();
                break;
            }
        }
    });
    cp.add(canvas);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(CANVAS_WIDTH / 3, CANVAS_HEIGHT / 4, CANVAS_WIDTH, CANVAS_HEIGHT);
    setTitle("FLIGHT DISPLAY");                         pack();
    setVisible(true);                                   requestFocus();
}

class DrawCanvas extends JPanel {
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D)g;
        setBackground(CANVAS_BACKGROUND);
        g.setColor(GROUND_COLOR);
        //Draw ground Color
        g.drawRect(Sx1 - Sx1,Sy1 /2, CANVAS_WIDTH, Sy2 /2);
        g.fillRect(Sx1 - Sx1, Sy1 /2, CANVAS_WIDTH, Sy2 /2);

        g.setColor(LINE_COLOR);
        //Draw line centre horizontal
        g.drawLine(Rx1, Ry1 /2, Rx2, Ry2 /2);

        g.drawOval(x1 -15, y1 -15, 30, 30);

        //Draw line dim

        g.setColor(Color.YELLOW);
        g.fillArc(CANVAS_WIDTH /2 -150, 10, 300, 170, 30, 120);
        g.setColor(LINE_COLOR);

        //Draw polyline centre plane
        g.setColor(Color.YELLOW);
        g.drawPolyline(xs, ys, 10);
        g.fillPolygon(new Polygon(
                 new int[]{470, 350, 230, 350, 470},
                 new int[]{260, 205, 260, 225, 260},5));

        g.setColor(Color.CYAN);
        g.setColor(Color.BLACK);
        g.drawArc(CANVAS_WIDTH / 2 -150, 10, 300, 170,  30, 120);
        g.drawArc(CANVAS_WIDTH / 2 -150, 11, 300, 170,  30, 120);
        g.setColor(CANVAS_BACKGROUND);
        g.fillRect(0, 60, CANVAS_WIDTH, 50);
        Color DarkTRANS = new Color(0.0f, 0.0f, 0.0f, 1.0f);
        g.setColor(DarkTRANS);
        g.fillRect(0, 400, CANVAS_WIDTH, 50);
        g.fillRect(0, 345, 115, 55);
        g.fillRect(585, 345, 115, 55);
        g.setColor(LINE_COLOR);
        g.drawLine(Lx1 -50, Ly1 -120, Lx2 +50, Ly2 -120);
        g.drawLine(Lx1 -25, Ly1 -140, Lx2 +25, Ly2 -140);
        g.drawLine(Lx1 -75, Ly1 -160, Lx2 +75, Ly2 -160);
        g.drawLine(Lx1 -25, Ly1 +20, Lx2 +25, Ly2 +20);
        g.drawLine(Lx1 -50, Ly1 +40, Lx2 +50, Ly2 +40);
        g.drawLine(Lx1 -25, Ly1 +60, Lx2 +25, Ly2 +60);
        g.drawLine(Lx1 -75, Ly1 +80, Lx2 +75, Ly2 +80);
        g.drawLine(Lx1 -25, Ly1 +100, Lx2 +25, Ly2 +100);
        g.drawLine(Lx1 -50, Ly1 +120, Lx2 +50, Ly2 +120);
        //Draw line dim
        g.drawLine(Lx1 -25, Ly1 -20, Lx2 +25, Ly2 -20);
        g.drawLine(Lx1 -50, Ly1 -40, Lx2 +50, Ly2 -40);
        g.drawLine(Lx1 -25, Ly1 -60, Lx2 +25, Ly2 -60);
        g.drawLine(Lx1 -75, Ly1 -80, Lx2 +75, Ly2 -80);
        g.drawLine(Lx1 -25, Ly1 -100, Lx2 +25, Ly2 -100);

        //bottom triangles
        g.setColor(DarkTRANS);
        g.fillPolygon(new Polygon(
                 new int[]{115, 115, 200},
                 new int[]{400, 345, 400},3));
        g.fillPolygon(new Polygon(
                 new int[]{585, 585, 500},
                 new int[]{400, 345, 400},3));
        //top button triangle/shapes
        g.fillPolygon(new Polygon(
                new int[]{0, 200, 115, 0,},
                new int[]{0, 0, 50, 50},4));
        g.fillPolygon(new Polygon(
                new int[]{500, 700, 700, 585,},
                new int[]{0, 0, 50, 50},4));
        //middle button shapes
        g.fillPolygon(new Polygon(
                new int[]{0, 100, 100, 117, 117, 130, 117, 117, 100, 100, 0},
                new int[]{174, 174, 159, 159, 187, 197, 207, 235, 235, 220, 220},11));
                //right hand shape
        g.fillPolygon(new Polygon(
                new int[]{700, 600, 600, 583, 583, 570, 583, 583, 600, 600, 700},
                new int[]{174, 174, 159, 159, 187, 197, 207, 235, 235, 220, 220},11));
        Color TRANS = new Color(0.0f, 0.0f, 0.0f, 0.35f);
        g.setColor(TRANS);
        g.fillRect(0, 0, 115, CANVAS_HEIGHT);
        g.fillRect(585, 0, 115, CANVAS_HEIGHT);

        g.setColor(LINE_COLOR);
        g.drawLine(Mx1+20, My1 + My1, Mx2, My2-440);
        g.drawLine(Mx1-20, My1 + My1, Mx2, My2-440);
        g.drawLine(Mx1, My1 + My1, Mx2, My2-440);

        g.drawString("10", Lx1 -90, Ly1 -75);
        g.drawString("10", Lx1 +77, Ly1 -75);
        g.drawString("10", Lx1 -90, Ly1 +85);
        g.drawString("10", Lx1 +77, Ly1 +85);
        g.drawString("20", Lx1 +77, Ly1 -155);
        g.drawString("20", Lx1 -90, Ly1 -155);

        g.drawString("Press alt + 3(U), 4(D)\n" , 582, 305);
        g.drawString("To Initialize" , 595, 315);
    }
}

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            new Display();
        }
    });
} 
```

} ![在此处输入图像描述](../Images/793f14684d8382abb78222083e0542fa.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T15:33:46.370

这种变化[`LinePanel`](https://stackoverflow.com/a/5797965/230513)可能暗示了一种方法。

![图片](../Images/298f402379ee792b33ae313c369a0841.png)

```
import java.awt.BasicStroke;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.RenderingHints;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.KeyStroke;

/**
 * @see https://stackoverflow.com/a/15027637/230513
 * @see https://stackoverflow.com/questions/6991648
 * @see https://stackoverflow.com/questions/6887296
 * @see https://stackoverflow.com/a/5797965/230513
 */
public class LinePanel extends JPanel {

    private Point p1 = new Point(320, 100);
    private Point p2 = new Point(320, 380);
    private boolean drawing;

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(640, 480);
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;
        g2d.setColor(Color.blue);
        g2d.setRenderingHint(
            RenderingHints.KEY_ANTIALIASING,
            RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.setStroke(new BasicStroke(8,
            BasicStroke.CAP_ROUND, BasicStroke.JOIN_BEVEL));
        g.drawLine(p1.x, p1.y, p2.x, p2.y);
    }

    private class ControlPanel extends JPanel {

        private static final int DELTA = 10;

        public ControlPanel() {
            this.add(new MoveButton("\u21BA", KeyEvent.VK_LEFT, DELTA, 0));
            this.add(new MoveButton("\u21BB", KeyEvent.VK_RIGHT, -DELTA, 0));
        }

        private class MoveButton extends JButton {

            KeyStroke k;
            int dx, dy;

            public MoveButton(String name, int code, final int dx, final int dy) {
                super(name);
                this.k = KeyStroke.getKeyStroke(code, 0);
                this.dx = dx;
                this.dy = dy;
                this.setAction(new AbstractAction(this.getText()) {

                    @Override
                    public void actionPerformed(ActionEvent e) {
                        LinePanel.this.p1.translate(-dx, 0);
                        LinePanel.this.p2.translate(dx, 0);
                        LinePanel.this.repaint();
                    }
                });
                ControlPanel.this.getInputMap(
                    WHEN_IN_FOCUSED_WINDOW).put(k, k.toString());
                ControlPanel.this.getActionMap().put(k.toString(), new AbstractAction() {

                    @Override
                    public void actionPerformed(ActionEvent e) {
                        MoveButton.this.doClick();
                    }
                });
            }
        }
    }

    private void display() {
        JFrame f = new JFrame("LinePanel");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this);
        f.add(new ControlPanel(), BorderLayout.SOUTH);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new LinePanel().display();
            }
        });
    }
} 
```

# regex - 如何使 RegEx 查询仅匹配整个字符串？

> ID：15008762
> 
> 赞同：1
> 
> 时间：2013-02-21T17:37:19.257
> 
> 标签：regex, vba

我在 Excel 2012 中使用 VBA 将单元格中的内容与正则表达式匹配，但它不起作用。

我正在运行以下代码：

```
Dim r1 As New RegExp
r1.Pattern = "(.)(\s+)?((?:[a-z][a-z]+))(\s+)(\d+)?"
r1.IgnoreCase = True

For i = 1 To 5
    If r1.Test(Sheet3.Cells.Item(i, 5)) = True Then
        MsgBox ("MATCH: " & Sheet3.Cells.Item(i, 5))
    Else
        MsgBox ("NOT MATCH: " & Sheet3.Cells.Item(i, 5))
    End If
Next i 
```

所以它应该匹配字符串：“A Person 01”但不匹配：“A Person abc 01”

但它匹配两者，因为可以在字符串的后半部分找到表达式。你如何让它只匹配整个字符串？因此，仅当单元格的全部内容为：单个字母、空格、单词、空格、数字时才匹配

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:40:43.327

你可以使用这个正则表达式

```
^[a-zA-Z]\s+\w+\s+\d+$ 
```

如果要完全匹配，则必须指定 start( `^`) 和 end( `$`)..

`[a-zA-Z]`匹配单个字母

`\s+`匹配 1 到多个空格

`\w+`匹配一个单词..它类似于`[a-zA-Z0-9_]+`

`\d+`匹配 1 到多个数字

# c# - 将字符串删除成字符串

> ID：15008764
> 
> 赞同：0
> 
> 时间：2013-02-21T17:37:32.173
> 
> 标签：c#

我在字符串中搜索和删除字符串时遇到问题。当您查看图像时，我想删除应答器之间的字符串并使用我的代码。但它想删除所以我的问题在哪里？

```
string chaine = im;
int href = chaine.IndexOf("<a href");
int ahref = chaine.IndexOf("</a>");
string sup = "";
for (int c = href; c < ahref; c++)
{
    sup = sup + chaine[c];
    if (chaine[c] != ahref)
        break;
}
chaine = chaine.Replace(sup, "");
im = chaine; 
```

![我的屏幕截图](../Images/aeac175d79b1132d3faff89fc7d24683.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:53:53.123

您的代码可以简化。请尽管添加一些错误检查或至少尝试/捕获以防找不到子字符串。

```
int start = im.IndexOf("<a href");
int stop = im.IndexOf("</a>", start);
im = im.Remove(start, stop + 4 - start) // 4 is the length of the stop string 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:43:56.863

你为什么不尝试正则表达式替换。

```
chaine = Regex.replace(chaine, @"\<a(?<attrs>.*)\>.*\<a/\>", m => "<a" + m.Groups["attrs"] + "></a>") 
```

# php - 试图在 PHP 所见即所得中模仿 Markdown 的块引用功能

> ID：15008766
> 
> 赞同：1
> 
> 时间：2013-02-21T17:37:48.990
> 
> 标签：php, regex, markdown

我正在从头开始构建 WYSIWYG 作为学术练习，但我遇到了障碍。我正在尝试构建 WYSIWYG 以使用一些基本的 Markdown 方法工作，例如使用星号表示粗体/斜体，使用 haskmarks 表示标题等。但是，我遇到了块引用的问题。这是我目前用来处理块引用输入的代码：

```
$content = '$_POST['content'];
while (preg_match('^>\s(.*)$', $content)) {
    $content    =   preg_replace('^>\s(.*)$', '<blockquote>$1</blockquote>', $content);
}; 
```

基本上，它会查找以“大于”符号开头的任何行，提取文本并将其放在块引用标签中，如下所示：

```
input:
> this is a blockquote.

output:
<blockquote>this is a blockquote.</blockquote> 
```

这很好，但 Markdown 也可以采用多行块引用并将其转换为单个块引用。例如：

```
input:
> this is a blockquote that
> i decided to separate across
> several lines.

output:
<blockquote>this is a blockquote that i decided to separate across several lines.</blockquote> 
```

我想模仿该功能，但使用我当前的代码，我最终会得到这个：

```
output:
<blockquote>this is a blockquote that</blockquote><blockquote>i decided to separate across</blockquote><blockquote>several lines.</blockquote> 
```

我只是不确定如何正确连接块引用。`</blockquote><blockquote>`我想到的一种方法是更改​​每一行，然后在它们之间没有双换行符的情况下进行新的搜索，但这似乎效率低下。代码将变为：

```
$content = '$_POST['content'];
while (preg_match('^>\s(.*)$', $content)) {
    $matched = true;
    $content = preg_replace('^>\s(.*)$', '<blockquote>$1</blockquote>', $content);
};
if ($matched) {
    $content = preg_replace('</blockquote>(\n|\r)?<blockquote>', '', $content);
}; 
```

我想这会奏效，但我觉得有一种更好的方法可以利用正则表达式来预测并获取所有额外的行。不幸的是，我不知道那会是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:03:09.703

替换`<p>`为您想要的任何标签:)

```
<?php

$text = '
line one
line 2
> blockquote blockquote blockquote blockquote blockquote
> blockquote blockquote blockquote blockquote blockquote
> blockquote blockquote blockquote.
line 3

> AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
> AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
> AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA

any
';
function blockquota($matches){
 $mytext = str_replace(array("> ", ">"), '' , $matches[0]);
 $mytext = '<p>'.$mytext.'</p>';
 return $mytext;
}
$pattern = '/(>)([^\v]+)(\v*((>)([^\v]+)))*/';
echo htmlspecialchars(preg_replace_callback($pattern, 'blockquota', $text));
?> 
```

输出：

```
line one
line 2
<p>blockquote blockquote blockquote blockquote blockquote
blockquote blockquote blockquote blockquote blockquote
blockquote blockquote blockquote.</p>
line 3

<p>AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</p>

any 
```

# bash - 除了标准输出之外，bash 直接输出到日志文件

> ID：15008769
> 
> 赞同：0
> 
> 时间：2013-02-21T17:37:55.097
> 
> 标签：bash, logging

我正在尝试将脚本所做的更改记录到日志文件中。在非常高的级别上，我的脚本具有功能，我希望能够将该信息记录到文件中。我使用了“tee -a”，但这以多种方式破坏了功能。

有没有简单的方法来完成这个任务？

更新：更正了下面的错字

```
函数 1(){ ... }
函数 2(){ ... }
＃主要的
功能1 | tee -a /tmp/日志文件
功能2 | tee -a /tmp/日志文件

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:48:04.953

（编辑以反映问题编辑）您可以将 tee 合并到函数定义中：

```
function() { { ...<original function definition goes here>; } | tee -a output; } 
```

所以你不需要每次调用函数时都调用 tee 。显然，如果函数修改了文件描述符，您将需要做更多的工作。另外，请记住，这会改变缓冲。如果从函数 1 中调用的命令的标准输出有一个 tty，他们可能会对其输出进行行缓冲，但如果他们的标准输出是管道（如果您正在管道传输到`tee`），则输出将被块缓冲。这可能是您所看到的差异的根本原因。此外，这只捕获一个文件描述符的输出。也许您有写入 stderr 的命令。您将需要提供有关 tee 管道更改脚本行为方式的更多详细信息。

# cocoa - Cocoa：NSTableView DataSource 没有设置标题

> ID：15008773
> 
> 赞同：0
> 
> 时间：2013-02-21T17:38:01.990
> 
> 标签：cocoa, nstableview, nstableviewcell, nstablecolumn

我正在尝试设置单元格的文本值：

```
- (id)tableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row {
    if ([[[tableColumn headerCell] stringValue] isEqualToString:@"Title"]) {
        NSLog(@"%@", [[array objectAtIndex:row] objectForKey:@"text"]);
        NSTextFieldCell *cell = [tableColumn dataCell];
        [cell setTitle:@"Cell"];
        return cell;
    }
} 
```

但这不起作用，单元格中没有文本。如何显示文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:11:35.293

`-(id)tableView:objectValueForTableColumn:row:`应该只返回字符串，而不是单元格。

```
- (id)tableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row {
    if ([[[tableColumn headerCell] stringValue] isEqualToString:@"Title"]) {
        NSLog(@"%@", [[array objectAtIndex:row] objectForKey:@"text"]);
        return @"Cell";
    }
} 
```

# statistics - 如何分析大于 30m 测量值的日志

> ID：15008777
> 
> 赞同：0
> 
> 时间：2013-02-21T17:38:24.523
> 
> 标签：statistics, log-analysis

考虑一个接收金融交易交易的 Java 应用程序，通过应用多项检查来确定其价值，例如该交易是否在合同和法律约束下被允许。该应用程序实现了一个 JMS 消息处理程序以在一个队列上接收消息，并实现第二个队列以将消息发送回消费者。

为了测量响应时间并启用后处理性能分析，应用程序记录几个步骤的开始和结束时间，例如接收消息、处理、准备和将答案发送回客户端。大约有。应用程序每天收到 300 万条消息，因此是这个时间测量数量的倍数（每天大约 1800 万条记录的测量）。每个测量包含以下数据：测量的 ID（例如 RECEIVE_START/END、PROCESS_START/END、SEND_START/END）、java.lang.system.nanoTime() 给出的时间戳、唯一的消息 ID。时间测量被发送到日志文件。

为了找到处理时间，日志文件每天都会被转换并存储在 MySQL 数据库中。这是通过一系列 Python 脚本完成的，这些脚本获取原始日志数据、转换并将其存储到 MySQL 表中，其中每条记录对应一个处理过的消息，每个测量值在一列中（即表按唯一消息对记录进行分组ID）。

我的问题是：分析这个相对较大的数据集（考虑一个月或几个月的日志数据）的最佳策略和工具是什么？特别是我想计算和绘制：

a) 在选定的时间范围内（例如每月、每天、每小时），按照响应时间（例如 SEND_END - RECEIVE_START）的测量分布。
b) 在选定时间段（例如日、周、月、年）内每个时间单位（秒、小时、日、周、月）的消息频率

任何关于您自己经验的提示或报告都将受到赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:46:17.893

我们在 splunk 处理/报告大型日志文件方面取得了很大成功。它是专门为此目的而构建的工具。您可以对数据文件运行类似 SQL 的查询，以获得您正在寻找的报告/图表类型。我相信它可能会非常昂贵，IIRC 他们会根据您处理的数据量向您收费。

[http://www.splunk.com/?r=header](http://www.splunk.com/?r=header)

# java - url被改写了吗？tuckey - urlrewrite

> ID：15008780
> 
> 赞同：0
> 
> 时间：2013-02-21T17:38:38.970
> 
> 标签：java, tuckey-urlrewrite-filter

我使用[http://tukey.org/urlrewrite/](http://tuckey.org/urlrewrite/)库

我正在尝试检测页面的 URL 是否已被重写，

我想出了这样的事情：

```
if(req.getRequestURL().toString().contains("?")) {
  //do stuff
} 
```

但是改写的页面的url和正常的一样：

```
request.getRequestURL().append("?").append(request.getQueryString()).toString(); 
```

所以我的问题是：如何检测 URL 是否被重写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:29:51.267

据我所知，Tuckey 没有提供任何直接测试它是否真的重写了 URL 的方法。

我认为您最好的选择是在重写规则上添加一个额外的请求参数，然后测试该参数。

就像是：

```
<to type="redirect">/some/url?rewritten</to> 
```

然后像

```
boolean rewritten = request.getParameter("rewritten") != null; 
```

# video-streaming - 什么是媒体流的良好起点？

> ID：15008788
> 
> 赞同：0
> 
> 时间：2013-02-21T17:38:57.483
> 
> 标签：video-streaming

如果你想写一个媒体流应用程序，从哪些库或框架开始比较好？

**编辑：**我个人使用 C/C++、java 和 python 编程，但我很欣赏各种答案。也许这个线程可能是新程序员的开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T05:08:45.283

试试[http://www.live555.com/](http://www.live555.com/) - 效果很好。我目前正在使用它。

# ruby - 发送多部分邮件和附件

> ID：15008789
> 
> 赞同：6
> 
> 时间：2013-02-21T17:39:05.763
> 
> 标签：ruby, email, email-attachments, multipart

我正在尝试使用带有 Ruby 1.9.3 的 gem 'mail' 发送一封电子邮件。它包含一个 text/html 和一个 text/plain 部分，应作为替代部分和附件嵌入。

这是我当前的代码：

```
require 'mail'

mail = Mail.new
mail.delivery_method :sendmail
mail.sender = "me@example.com"
mail.to = "someguy@example.com"
mail.subject = "Multipart Test"
mail.content_type = "multipart/mixed"

html_part = Mail::Part.new do
  content_type 'text/html; charset=UTF-8'
  body "<h1>HTML</h1>"
end

text_part = Mail::Part.new do
  body "TEXT"
end

mail.part :content_type => "multipart/alternative" do |p|
  p.html_part = html_part
  p.text_part = text_part
end

mail.add_file :filename => "file.txt", :content => "FILE"

mail.deliver! 
```

它会生成一封邮件，其中包含可用的替代部分，但没有附件。我正在使用雷鸟 10.0.12 进行测试。

我已经在 github 上发布了这个，但不幸的是，这些帖子并没有让我变得更聪明。[https://github.com/mikel/mail/issues/118#issuecomment-12276876](https://github.com/mikel/mail/issues/118#issuecomment-12276876)。也许有人能够比我更好地理解最后一篇文章；）

有人能让这个例子工作吗？

谢谢，克里斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-06T22:21:40.120

我设法像这样修复它：

```
html_part = Mail::Part.new do
  content_type  'text/html; charset=UTF-8'
  body          html
end

text_part = Mail::Part.new do
  body          text
end

mail.part :content_type => "multipart/alternative" do |p|
  p.html_part = html_part
  p.text_part = text_part
end

mail.attachments['some.xml'] = {content: Base64.encode64(theXML), transfer_encoding: :base64}
mail.attachments['some.pdf'] = thePDF

mail.content_type = mail.content_type.gsub('alternative', 'mixed')
mail.charset= 'UTF-8'
mail.content_transfer_encoding = 'quoted-printable' 
```

一点也不直观，但阅读[Pony](https://github.com/benprew/pony/blob/master/lib/pony.rb)源代码有点帮助，以及将工作的 .eml 与该 gem 生成的任何内容进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T19:07:10.143

这似乎是关于附件内容类型的错误。见[https://github.com/mikel/mail/issues/522](https://github.com/mikel/mail/issues/522)

# javascript - Javascript：TypeError：...不是构造函数

> ID：15008793
> 
> 赞同：16
> 
> 时间：2013-02-21T17:39:12.083
> 
> 标签：javascript, object, constructor, typeerror

我有一个 TypeError 问题：

```
function artist(name) {
    this.name = name;
    this.albums = new Array();

    this.addAlbum = function(albumName) {
        for (var i = 0; i < this.albums.length; i++) {
            if (this.albums[i].name == albumName) {
                return this.albums[i];
            }
        }

        var album = new album(albumName);
        this.albums.push(album);

        return album;
    }
}

function album(name) {
    this.name = name;
    this.songs = new Array();
    this.picture = null;

    this.addSong = function(songName, track) {
        var newSong = new songName(songName, track);
        this.songs.push(newSong);

        return newSong;
    }
} 
```

给出以下错误：

`TypeError: album is not a constructor`

我找不到问题。我阅读了很多其他帖子，但我找不到类似的问题。难道是不允许在另一个对象中创建一个对象？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-21T17:40:29.497

这条线

```
var album = new album(albumName); 
```

遮蔽外部`album`功能。所以是的，`album`不是函数内部的构造函数。更准确地说，就是`undefined`在这一点上。

为避免此类问题，我建议以大写字母开头命名您的“类”：

```
function Album(name) { 
```

更一般地说，我建议在有疑问时遵循[Google 风格指南。](http://google.github.io/styleguide/javascriptguide.xml#Naming)

# ruby - 捆绑程序设置和要求之间的区别？

> ID：15008794
> 
> 赞同：3
> 
> 时间：2013-02-21T17:39:18.197
> 
> 标签：ruby, bundler

我经常在使用 Bundler 的项目中看到 2 个变体。

一种是：

```
require "bundler/setup"
Bundler.require(:default) 
```

还有一个：

```
require 'bundler'
Bundler.setup :default, (ENV['RACK_ENV'] || 'development') 
```

tye 是相同的还是有变化的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:07:51.930

谷歌可以成为你的朋友。阅读[这个](http://anti-pattern.com/bundler-setup-vs-bundler-require)和[这个](https://stackoverflow.com/questions/8922475/whats-the-difference-between-bundle-setup-and-bundle-require)。

> TL;DR 使用 Bundler.require 而不是 Bundler.setup

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:13:47.457

`Bundler.setup`为您的特定 gem 准备加载路径，`Gemfile.lock`以便您可以根据需要请求每个 gem。`Bundler.require`进一步遍历每个 gem 并需要每个 gem（通过需要为 gem 命名的文件，如果它存在）。

[`bundler.rb`](https://github.com/carlhuda/bundler/blob/master/lib/bundler.rb)您可以在和中自己阅读实现[`runtime.rb`](https://github.com/carlhuda/bundler/blob/master/lib/bundler/runtime.rb)。

# java - 如何使用“null”参数调用本机方法

> ID：15008797
> 
> 赞同：1
> 
> 时间：2013-02-21T17:39:29.550
> 
> 标签：java, android, c++, android-ndk, java-native-interface

我需要这样调用本机方法：

爪哇代码：

```
private native Object SendFiles(String strEmail, DeviceInfo info, String [] arrFiles, int cntFiles, ID idRequest); 
```

调用 SendFiles();

```
SendFiles(strEmail, null, arrFiles, cntFiles, requestID); 
```

和 C++ 代码：

```
jobject Java_com_xxxxx_xxxxx_controller_CoreController_SendFiles(JNIEnv *pEnv, jobject obj, jstring strEmail, jobject jinfo, jobjectArray jarrFiles, jint cntFiles, jobject jidRequest){
         .........

          if(jinfo == NULL)       // here crashes !!!!!!!
             doSomething();

         ............
} 
```

Java 'null' 可以发送到 c 'NULL' 吗？

我怎么能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:07:19.433

您可以阅读`NULL`多个帖子上的 C++ 检查，例如[检查 C++ 中的空对象](https://stackoverflow.com/questions/2099882/checking-for-a-null-object-in-c)或[检查这是否为空](https://stackoverflow.com/questions/1844005/checking-if-this-is-null)或[我们如何检查指针是否为 NULL 指针？](https://stackoverflow.com/questions/6185821/so-how-do-we-check-if-a-pointer-is-null-pointer)

但是这篇文章似乎给出了最直接的方法： [如果未找到搜索结果，则返回“NULL”对象](https://stackoverflow.com/questions/2639255/c-return-a-null-object-if-search-result-not-found)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:33:33.843

`jobject`是 C++ 端的指针数据类型。当您从 Java 传递`null`对象时，C++ 将其作为`NULL`指针接收。可以比较一下。

崩溃可能与其他事情有关。插入一些诊断输出并调试。

# jquery - 数据未显示在 jquery 移动应用程序中

> ID：15008805
> 
> 赞同：0
> 
> 时间：2013-02-21T17:40:21.907
> 
> 标签：jquery, jquery-mobile, backbone.js, requirejs

我是 jquery mobile 的新手，第一次将它与 Backbonejs 和 requirejs 一起使用。我有两个模板并向它们添加内容。但是内容没有显示在我要显示的 div 标签中。它也没有显示任何错误。我所看到的只是空白区域。**下面的代码确实将内容插入到模板中，但不会向用户显示。**

这是我的代码 movies.js 文件

```
define(['backbone', 'views/movie', 'jqm'], function (Backbone, MovieView) {
var Movies = Backbone.View.extend({
    el: '#movies',

    initialize: function () {
        App.Vent.on('init', this.renderAll, this);
    },

    renderAll: function () {
        this.$el.empty();
        this.collection.each(this.render, this);
    },

    render: function (movie) {
        //console.log(this.$el);
        var movieView = new MovieView({ model: movie });
        //console.log(this.$el.append(movieView.render().el));
        this.$el.append(movieView.render().el);
        console.log(this.$el);
        return this;
    }
});

return Movies;
}); 
```

这是movie.js文件

```
define(['backbone', 'text!../../templates/movie.tpl'], function (Backbone, MovieTemplate) {
var Movie = Backbone.View.extend({
    tagName: 'div',
    className: 'ui-block-d',

    render: function () {
        //console.log(this.$el.html(_.template(MovieTemplate, this.model.toJSON())));
        this.$el.html(_.template(MovieTemplate, this.model.toJSON()));
        return this;
    }
});

return Movie;
}); 
```

我怎样才能让它工作？请提出任何问题。

# python - 在 python 类上覆盖 __or__ 运算符

> ID：15008807
> 
> 赞同：5
> 
> 时间：2013-02-21T17:40:25.307
> 
> 标签：python, operator-overloading

作为一个人为的例子，假设我在 python 中生成一个随机的水果篮。我创建了篮子：

```
basket = FruitBasket() 
```

现在我想指定篮子中可能出现的特定水果组合。假设我是一个非常挑剔的家伙，篮子要么必须装满苹果和石榴、橙子和葡萄柚，要么只有香蕉。

我正在阅读 python 运算符重载，似乎我可以定义`__or__`并`__and__`获得我想要的行为。我想我可以做这样的事情：

```
basket.fruits = (Apple() & Pomegranate()) | (Banana()) | (Orange() & Grapefruit()) 
```

这可以很好地制作两个类（`Or`和`And`）。当`__or__`或被`__and__`调用时，我只返回一个新的`Or`或`And`对象：

```
def __or__(self, other):
    return Or(self, other)

def __and__(self, other):
    return And(self, other) 
```

我想弄清楚的是如何在不必先实例化水果的情况下做到这一点？为什么我不能`__or__`在基`Fruit`类上使用静态方法？我已经尝试过了，但它不起作用：

```
class Fruit(object):
    @classmethod
    def __or__(self, other):
        return Or(self, other) 
```

并分配水果：

```
basket.fruits = (Apple & Pomegranate) | (Orange & Grapefruit) | (Banana) 
```

我收到这样的错误：

```
TypeError: unsupported operand type(s) for |: 'type' and 'type' 
```

关于如何使这项工作的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T17:57:54.653

`__or__`查找对象的类型；例如`Fruit`，那将是`Fruit`；对于`Fruit`，即`type`。但是，您可以通过使用元类来更改 的类型`Fruit`：

```
class FruitMeta(type):

    def __or__(self, other):
        return Or(self, other)

class Fruit(object):
    __metaclass__ = FruitMeta 
```

（对于 Python 3，语法是`class Fruit(metaclass=FruitMeta):`。）

然后，这可以满足您的所有需求。`Apple | Banana`（假设这两个是 的子类`Fruit`）将产生`Or(Apple, Banana)`.

不过，这种设计要非常小心。它趋于魔法领域，很容易引起混乱。

（完整的演示，在 Python 2.7 中：）

```
>>> class Or(object):
...     def __init__(self, a, b):
...             self.a = a
...             self.b = b
...     def __repr__(self):
...             return 'Or({!r}, {!r})'.format(self.a, self.b)
... 
>>> class FruitMeta(type):
...     def __or__(self, other):
...             return Or(self, other)
... 
>>> class Fruit(object):
...     __metaclass__ = FruitMeta
... 
>>> class Apple(Fruit): pass
... 
>>> class Banana(Fruit): pass
... 
>>> Apple | Banana
Or(<class '__main__.Apple'>, <class '__main__.Banana'>) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:48:00.583

您不能将特殊（挂钩）方法作为类方法添加到类中，因为它们*总是*在当前对象的类型上查找；对于类上的实例，对于类，它们会被查找`type`。有关为什么会这样的动机，请参阅[这个先前的答案](https://stackoverflow.com/questions/14102407/implementing-getitem-in-new-style-classes/14102566#14102566)。

这意味着您需要在[元类](http://docs.python.org/2/reference/datamodel.html#__metaclass__)上实现它；元类充当类的类型：

```
class FruitMeta(type):
    def __or__(cls, other):
        return Or(cls, other)

    def __and__(cls, other):
        return And(cls, other) 
```

然后对于 Python 3：

```
class Fruit(metaclass=FruitMeta): 
```

或 Python 2：

```
class Fruit(object):
    __metaclass__ = FruitMeta 
```

# java - xml配置中的多个jpa：repositories，如何使用Spring java config配置@EnableJPARepositories？

> ID：15008809
> 
> 赞同：6
> 
> 时间：2013-02-21T17:40:30.550
> 
> 标签：java, spring, spring-data, spring-data-jpa

我研究并找到了关于如何将spring data jpa与多个数据源一起使用 的[解释和示例代码，它指的是在xml配置中配置多个jpa：repositories，如下所示：](http://blog.springsource.org/2011/04/26/advanced-spring-data-jpa-specifications-and-querydsl/#comment-198835)

```
<jpa:repositories base-package="org.springframework.data.jpa.repository.sample"
    entity-manager-factory-ref="entityManagerFactory">
    <repository:exclude-filter type="assignable" expression="org.springframework.data.jpa.repository.sample.AuditableUserRepository" />
</jpa:repositories>
<jpa:repositories base-package="org.springframework.data.jpa.repository.sample"
    entity-manager-factory-ref="entityManagerFactory-2"
    transaction-manager-ref="transactionManager-2">
    <repository:include-filter type="assignable" expression="org.springframework.data.jpa.repository.sample.AuditableUserRepository" />
</jpa:repositories> 
```

您将如何使用 java 配置和 @EnableJpaRepositories 注释声明上述两个 jpa:repositories 配置？

注释似乎只支持一组属性（即仅适用于一个 jpa:repository），并且不可能多次声明该注释。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-11-14T11:10:35.150

我创建了一个“最小”的多数据源项目来帮助我弄清楚如何做到这一点。那里有 7 个 Java 类和其他配置，所以我只会在这个答案中发布关键摘录。您可以从 GitHub 获得完整的项目：[https ://github.com/gratiartis/multids-demo](https://github.com/gratiartis/multids-demo)

该演示设置了两个 JPA 实体：

```
@Entity public class Foo { /* Constructors, fields and accessors/mutators */ }
@Entity public class Bar { /* Constructors, fields and accessors/mutators */ } 
```

与这些相关联，我们将创建两个存储库。感谢 Spring Data 的强大功能，我们可以纯粹通过定义扩展 JpaRepository 的接口来获得一些功能齐全的存储库：

```
public interface FooRepository extends JpaRepository<Foo, Long> {}
public interface BarRepository extends JpaRepository<Bar, Long> {} 
```

现在我们需要确保这些中的每一个都映射到它自己的数据库中的一个表。

为此，我们需要两个独立的实体管理器，每个实体管理器都有不同的数据源。但是，在一个 Spring Java 配置`@Configuration`类中，我们只能有一个`@EnableJpaRepositories`注解，并且每个这样的注解只能引用一个 EntityManagerFactory。为此，我们创建了两个独立的`@Configuration`类：FooConfig 和 BarConfig。

这些@Configuration 类中的每一个都将定义一个基于嵌入式 HSQL 数据库的 DataSource：

```
@Bean(name = "fooDataSource")
public DataSource dataSource() {
    return new EmbeddedDatabaseBuilder()
            .setName("foodb").setType(EmbeddedDatabaseType.HSQL).build();
}
@Bean(name = "barDataSource")
public DataSource dataSource() {
    return new EmbeddedDatabaseBuilder()
            .setName("bardb").setType(EmbeddedDatabaseType.HSQL).build();
}

@Bean(name = "barEntityManagerFactory")
public EntityManagerFactory entityManagerFactory() {
    LocalContainerEntityManagerFactoryBean lef = 
            new LocalContainerEntityManagerFactoryBean();
    lef.setDataSource(dataSource());
    lef.setJpaVendorAdapter(jpaVendorAdapter);
    lef.setPackagesToScan("com.sctrcd.multidsdemo.domain.bar");
    lef.setPersistenceUnitName("barPersistenceUnit");
    lef.afterPropertiesSet();
    return lef.getObject();
}
@Bean(name = "fooEntityManagerFactory")
public EntityManagerFactory entityManagerFactory() {
    LocalContainerEntityManagerFactoryBean lef = 
            new LocalContainerEntityManagerFactoryBean();
    lef.setDataSource(dataSource());
    lef.setJpaVendorAdapter(jpaVendorAdapter);
    lef.setPackagesToScan("com.sctrcd.multidsdemo.domain.foo");
    lef.setPersistenceUnitName("fooPersistenceUnit");
    lef.afterPropertiesSet();
    return lef.getObject();
} 
```

每个配置都应该定义一个 EntityManagerFactory，如上所述，它引用自己的 dataSource() @Bean 方法。它还定义了它管理的 @Entity bean 的路径。您需要确保不同数据源的 @Entity bean 位于不同的包中。

此时值得注意的是，如果这些配置中的每一个都使用关键持久性 bean 的默认命名（即 entityManagerFactory），那么 Spring 将看到有两个具有 EntityManager 接口的 bean，它们都具有相同的名称。所以会选择一个。这会导致错误，例如：

```
Not an managed type: class com.sctrcd.multidsdemo.domain.bar.Bar 
```

这可以在这里的演示项目的分支中看到：[https ://github.com/gratiartis/multids-demo/tree/1-unnamed-entitymanager-beans](https://github.com/gratiartis/multids-demo/tree/1-unnamed-entitymanager-beans)

这是因为在该示例中，Spring 已经连接了与“foodb”数据库相关的 bean，而 Bar 不是该数据库中的实体。不幸的是，BarRepository 已与 Foo 实体管理器连接起来。

我们通过命名每个配置类中的所有 bean 来解决这个问题。IE

```
@Bean(name = "fooDataSource") public DataSource dataSource() { .. }
@Bean(name = "fooEntityManager") public EntityManager entityManager() { .. } 
```

此时，如果您要在项目中运行测试，您可能会看到如下警告：

```
 No bean named 'entityManagerFactory' is defined. 
```

这是因为......鼓声......我们没有默认名称为“entityManagerFactory”的EntityManagerFactory。我们有一个叫做“fooEntityManagerFactory”，另一个叫做“barEntityManagerFactory”。Spring 正在寻找具有默认名称的东西，因此我们需要指示它以不同的方式进行连接。

事实证明，这非常简单。我们只需要在每个@Configuration 类的@EnableJpaRepositories 注释中放置正确的引用。

```
@Configuration
@EnableTransactionManagement
@EnableJpaRepositories(
        entityManagerFactoryRef = "fooEntityManagerFactory", 
        transactionManagerRef = "fooTransactionManager",
        basePackages = {"com.sctrcd.multidsdemo.integration.repositories.foo"})
public class FooConfig {
    // ...
}

@Configuration
@EnableTransactionManagement
@EnableJpaRepositories(
        entityManagerFactoryRef = "barEntityManagerFactory", 
        transactionManagerRef = "barTransactionManager",
        basePackages = { "com.sctrcd.multidsdemo.integration.repositories.bar" })
public class BarConfig {
    // ...
} 
```

如您所见，这些@EnableJpaRepositories 注释中的每一个都定义了一个特定的命名EntityManagerFactory 和PlatformTransactionManager。他们还指定哪些存储库应与这些 bean 连接。在示例中，我将存储库放在特定于数据库的包中。也可以按名称定义每个单独的存储库，通过将 includeFilters 添加到注释中，但是通过按数据库隔离存储库，我相信事情最终应该更具可读性。

此时，您应该有一个使用 Spring Data 存储库来管理两个独立数据库中的实体的工作应用程序。随意从上面的链接中获取项目并运行测试以查看这种情况。希望这个答案对更多人有用，因为我已经花费了大量时间来尽可能干净地使用尽可能少的代码来完成这项工作。欢迎任何改进答案或演示项目的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:16:05.663

您可以尝试将它放在两个`@Configuration`班级（`@EnableJpaRepositories`每个班级一个`@Configuration`）。

# dynamics-crm-2011 - 自定义子网格

> ID：15008818
> 
> 赞同：2
> 
> 时间：2013-02-21T17:41:36.050
> 
> 标签：dynamics-crm-2011, dynamics-crm-4

我正在尝试创建一个自定义表格（使用 HTML 页面），上面有固定的标题和带有滑块的行中的数据（类似于 crm 设计）。有没有人对此有任何想法或相关信息。请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:57:13.907

如果您使用的是 CRM 2011，还有另一个选项是使用 Silverlight 作为 Web 资源。看看这个样本：

*   在 SDK 中的文件夹中`samplecode/cs/Silverlight/restsilverlightcontacteditor`
*   [http://ankit.inkeysolutions.com/2013/01/crm-2011-lookup-functionality-in.html](http://ankit.inkeysolutions.com/2013/01/crm-2011-lookup-functionality-in.html)

# c# - 使用 simpleinjector 注册 opengeneric

> ID：15008819
> 
> 赞同：1
> 
> 时间：2013-02-21T17:41:40.040
> 
> 标签：c#, dependency-injection, inversion-of-control, simple-injector

我有以下课程：

```
public interface IDbCommandHandler<in TCommand, out TOutput> 
    where TCommand : IDbCommand 
{
    TOutput Handle(TCommand command);
}

public class SubIdentifierItemCreateCommand<TItemType, TDefaultValues> 
    : BaseDbCommand
    where TItemType: TDefaultValues
{

}

public class SubIdentifierItemCreateCommandHandler<TItemType, TDefaultValues>
    : BaseDbCommandHandler<SubIdentifierItemCreateCommand<TItemType, TDefaultValues>, TItemType>,
    IDbCommandHandler<SubIdentifierItemCreateCommand<TItemType, TDefaultValues>, TItemType>
    where TItemType: class, TDefaultValues, IItemForGenericItemByIdentifierRetriever , new()
{

} 
```

我需要将其注册`SubIdentifierItemCreateCommandHandler`为 singleton-open-generic，以处理对类型服务的任何请求 `IDbCommandHandler<SubIdentifierItemCreateCommand<,>,>`。

这可能吗？我尝试了各种方法，但总是出错。

```
_container.RegisterSingleOpenGeneric(
    typeof(IDbCommandHandler<,>),
    typeof(SubIdentifierItemCreateCommandHandler<,>));

_container.RegisterOpenGeneric(
    typeof(IDbCommandHandler<,>),
    typeof(SubIdentifierItemCreateCommandHandler<,>));

// this one is throws a compile-time error, that you cannot 
// use partial open types.
_container.RegisterManyForOpenGeneric(
    typeof(IDbCommandHandler<SubIdentifierItemCreateCommand<,>,>),
    typeof(SubIdentifierItemCreateCommandHandler<,>)); 
```

我希望能够拨打以下电话并工作：

```
var item = _container.GetInstance<
    IDbCommandHandler<
        SubIdentifierItemCreateCommand<
            SectionData, 
            ISectionDataDefaultValues>, 
        SectionData>>(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T02:43:17.337

不幸的是，您偶然发现了框架中的一个错误。Simple Injector 1.6.1 无法正确处理“where TItemType: TDefaultValues”约束。

解决方案很简单，迁移到[Simple Injector 2.0](http://simpleinjector.codeplex.com/releases/view/99008)（[通过 NuGet](http://nuget.org/packages?q=simpleinjector)）。

如果您出于某种原因无法切换到 Simple Injector 2.0，您可以注册一个`ResolveUnregisteredType`事件来注册类型以解决 1.6.1 版本中的错误：

```
container.ResolveUnregisteredType += (sender, e) =>
{
    var serviceType = e.UnregisteredServiceType;

    if (serviceType.IsGenericType &&
        serviceType.GetGenericTypeDefinition() == typeof(IDbCommandHandler<,>))
    {
        var commandArg = serviceType.GetGenericArguments()[0];
        var outputArg = serviceType.GetGenericArguments()[1];

        if (commandArg.IsGenericType &&
            commandArg.GetGenericTypeDefinition() == 
                typeof(SubIdentifierItemCreateCommand<,>))
        {
            var itemTypeArgument = commandArg.GetGenericArguments()[0];
            var defaultValuesArgument = commandArg.GetGenericArguments()[1];

            if (itemTypeArgument != outputArg)
            {
                return;
            }

            Type typeToRegister;

            try
            {
                typeToRegister =
                    typeof(SubIdentifierItemCreateCommandHandler<,>)
                    .MakeGenericType(itemTypeArgument.GetGenericArguments());
            }
            catch (ArgumentException)
            {
                // Thrown by MakeGenericType when the type constraints 
                // do not match. In this case, we don't have to register
                // anything and can bail out.
                return;
            }

            object singleInstance = container.GetInstance(typeToRegister);

            // Register the instance as singleton.
            e.Register(() => singleInstance);
        }
    }
}; 
```

我知道，这很丑陋，但至少有一个解决方法;-)

# javascript - 如何在 ng-repeat 中设置 ng-model 的值？

> ID：15008823
> 
> 赞同：3
> 
> 时间：2013-02-21T17:42:11.400
> 
> 标签：javascript, angularjs

我有一个 ng-repeat，我把它放在一个选择标签中。我希望能够修改不同选择的选定值。这是我所拥有的：html

```
<div ng-controller="Ctrl">
    <div ng-repeat="user in users">
        <select ng-model="nbModel" ng-options="numValue.Text for numValue in numValues" ng-change="chooseUser(nbModel, user.id)">
                        </select>
        &nbsp;&nbsp;{{user.name}}&nbsp;&nbsp;-&nbsp;{{user.age}} years
    </div>
</div> 
```

js

```
function Ctrl($scope) {
    $scope.numValues = [ {Id : '0',Text : '0'}, {Id : '1',Text : '1'}, {Id : '2',Text : '2' }];    
    $scope.users = [];

    $scope.users.push(new User(1, 'Luke', 23));
    $scope.users.push(new User(2, 'Maria', 26));
    $scope.users.push(new User(3, 'Mike', 45));

    angular.forEach($scope.users, function(equip) {
        //TODO to set the default values for each select
    });

    $scope.chooseUser= function(value, name) {
        //some traitement        
        //TODO to set a wanted value        
    };
};

function User(id, name, age) {
    this.id=id;
    this.firstnamename = name;
    this.age = age;
} 
```

我不知道如何手动设置选定的选项。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T17:51:19.033

您已经完成了一半...您需要做的是将 ng-model 设置为您想要更改的用户的某些内容。假设您想使用 select 更改用户的年龄，它看起来像这样：

```
<div ng-controller="Ctrl">
    <div ng-repeat="user in users">
        <select ng-model="user.age" ng-options="numValue.Text for numValue in numValues"></select>
        &nbsp;&nbsp;{{user.name}}&nbsp;&nbsp;-&nbsp;{{user.age}} years
    </div>
</div> 
```

# angularjs - Angular JS Forms提交不发送模型数据

> ID：15008826
> 
> 赞同：2
> 
> 时间：2013-02-21T17:42:20.457
> 
> 标签：angularjs

在下面的示例中，`message`当我在事件触发后在控制器中显示它时未定义。为什么？

```
<form>
  <input type="text" ng-model="message.Title" />
  <textarea ng-model="message.Content"></textarea>         
  <input type="submit" value="Send Message" ng-click="sendMessage(message)" />
</form> 
```

控制器：

```
$scope.sendMessage = function(message) {
  console.log(message);
} 
```

我的代码似乎与[此处](http://docs.angularjs.org/guide/forms)的文档相同，除了我的控制器管理整个“页面”而不仅仅是表单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T17:46:07.307

哇没关系，显然当您使用空白值提交时，它甚至不会创建对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T18:32:28.580

我看到你已经找到了你的问题，但我想提出一个解决方案来防止你的问题：

```
<form name="messageForm" ng-submit="sendMessage(message)">
  <input type="text" ng-model="message.Title" required/>
  <span ng-show="messageForm.title.$error.required && messageForm.title.$dirty">required</span><br/>
  <textarea ng-model="message.Content"></textarea>         
  <input type="submit" value="Send Message" ng-disabled="messageForm.$invalid" />
</form> 
```

以上将要求标题，显示错误消息，如果表单无效，则禁用您的提交按钮。

# node.js - 必须如何将 Node JS 服务器配置为充当 Breeze JS 应用程序的端点

> ID：15008831
> 
> 赞同：2
> 
> 时间：2013-02-21T17:42:26.213
> 
> 标签：node.js, knockout.js, odata, breeze, rivets.js

在这一点上，我确信由强大的数据查询服务支持的声明式绑定是编写可扩展的 Web 富客户端应用程序的秘诀。

显然，声明式数据绑定有很多选择（Knockout JS 和[Rivets](http://rivetsjs.com/ "铆钉") for Backbone 仅举几例）。然而，当涉及到查询服务器、缓存数据和在客户端跟踪更改时，唯一看起来半成熟的模块化解决方案似乎是[Breeze JS](http://breezejs.com/ "微风")。然而，虽然它声称不规定服务器技术，但所有文档示例都显示 Breeze 使用 .NET 运行。

为了充当 Breeze 应用程序的端点，服务器必须满足哪些与 API 相关或其他方面的要求？实施 OData 协议是否足够？有没有例子可以照亮道路？或者其他图书馆解决了我错过的这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:04:37.660

是的，OData 就足够了。但是，我们仍在研究 OData 保存支持（当然可以查询）。

很抱歉延迟发布非 .NET 示例。我们绝对致力于开放、可插拔的后端，并将在接下来的几周内发布更多示例。

[此外，请在我们的UserVoice 反馈页面](https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions/filters/top)上为这些功能投票（或提交您自己的）。这有助于我们确定下一步工作的优先级。谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:13:08.057

你可以使用 nodejs 作为 oData 服务器和 JayData [http://jaydata.org/blog/install-your-own-odata-server-with-nodejs-and-mongodb](http://jaydata.org/blog/install-your-own-odata-server-with-nodejs-and-mongodb) 它是免费和开源的

# asp.net-mvc - AOP vs MVC FilterAttributes vs Interceptors

> ID：15008834
> 
> 赞同：8
> 
> 时间：2013-02-21T17:42:46.193
> 
> 标签：asp.net-mvc, ninject, unity-container, autofac, postsharp

1.  ASP.NET MVC 建议使用或扩展内置的授权、操作、结果、异常过滤器。
2.  第 3 方 .Net IoC 容器（Unity、Ninject、Autofac）提出拦截器
3.  第 3 方 AOP 工具（Postsharp）提出了它们的属性。

现在，我搞砸了。可能是我混合了所有这些。我想构建健壮的代码和稳定的方法，我应该使用什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T03:09:02.527

这一切都始于良好的应用程序设计。当您的应用程序设计正确时，您与您的 UI 框架公开的类似 AOP 的功能进行交互的理由将大大减少（这也适用于 WCF）。

例如，当您将所有业务逻辑隐藏在通用接口之后，并向其传递命令消息（如[本文](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)所示）时，您的控制器将成为瘦包装器，通常只执行此类业务命令。在这种情况下，您将能够通过包装这些业务操作来实现授权和异常过滤，从而使 UI 代码保持干净且没有属性。[可以使用拦截器或普通的旧装饰器](https://en.wikipedia.org/wiki/Decorator_pattern)来围绕业务运营包装这些横切关注点。这为您提供了更大的灵活性并保持您的设计[可靠](https://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)（这有很多不太明显的长期好处）。

尽管 PostSharp 之类的代码编织工具有其用途，但您应该小心使用它们。他们使用后编译过程将代码注入您的程序集中。这使得在不触及这些方面的情况下对这些类进行单元测试非常痛苦。您不能轻松地单独测试这些类（这是单元测试的先决条件）。使你的方面依赖于一些静态变量，这会使方面和单元测试变得复杂。静态变量使并行运行单元测试变得困难，并且使用全局常量将要求测试正确地拆除更改的全局设置，以防止其他测试受到影响。

尽管代码编织工具带来的性能通常高于拦截，但与使用装饰器相比并没有性能提升。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T09:26:16.423

您引用了三种技术，它们都打算做同样的事情：在不修改现有代码库的情况下添加功能。

ASP.NET MVC 和 DI 都限制了您可以在*哪里*拥有方面（命名过滤器或拦截器），因为该技术只能在某些位置添加行为，因为它们无法编辑您的代码。只有 PostSharp 等基于编译器的技术才能在任何地方添加方面。但是，这三个都是 AOP 概念的实现。

在许多用例中，方面已证明优于传统的面向对象编程。并非每个问题都可以通过传统的 OOP 以相同的成本通过更好的设计来解决。然而，AOP 不是主流是正确的，使用非主流技术存在成本和风险（AOP 诞生于 90 年代，OOP 诞生于 60 年代）。与任何创新一样，不同的参与者对风险和收益有不同的敏感性，因此可能会成为早期或晚期采用者。

AOP 不是单元测试的障碍，但在这个主题上几乎没有共享经验。通常，方面必须作为单独的代码单元进行测试。有必要的和非必要的方面。通常，业务代码必须与基本方面一起测试，但必须禁用非基本方面。您可以在构建时静态禁用方面（只是从构建配置中排除某些方面），或者在运行时（使方面依赖于您在测试期间设置为 false 的某个静态变量）。

# matlab - 像素的位置并将它们设置为“1”

> ID：15008835
> 
> 赞同：0
> 
> 时间：2013-02-21T17:42:49.193
> 
> 标签：matlab, pixel

在`matlab`中，在满足特定标准后，我曾经返回像素本身并将其存储在向量`pixels`中，如下所示：

```
pixels(index) = y(i,j); 
```

现在，我想返回`location`那些像素。我应该执行以下操作吗？

```
pixels(index) = i,j; 
```

**编辑**

如果我想将这些索引设置为 value `1`，我会执行以下操作，对吗？

```
for i=1:m
for j=1:n
y(i,j)=1
end
end 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:04:03.910

在 Matlab 的嵌套循环中这样做是**非常低效的。**

使用[`sub2ind`](http://www.mathworks.com/help/matlab/ref/sub2ind.html)可以帮助你做得更快：

```
y( sub2ind( size(y), i, j ) ) = 1; 
```

### 编辑 -`sub2ind`

有什么`sub2ind`作用？假设您有一个大小
矩阵：`M``[4 6]`

```
M = [ 1  5  9  13  17  21
      2  6 10  14  18  22 
      3  7 11  15  19  23
      4  8 12  16  20  24 ]; 
```

您希望访问两个元素：一个位于第一行第二列，另一个位于第四行第五列。在这种情况下，您拥有希望访问的行`r = [ 1 4 ]`和希望访问的列`c = [ 2 5 ]`。但是，如果您尝试访问

```
>> M( r, c ) 
```

这是一个 2x2 矩阵

```
ans = 
5  17
8  20 
```

而不是您正在寻找的两个元素（它们是`5`和`20`）。

什么`sub2ind`是将您拥有的行/列索引转换为*线性*索引

```
>> sub2ind( size(M), r, c )
ans =
5 20 
```

这恰好是所请求条目的线性索引。

您可以将线性索引视为访问矩阵中元素所需的单个索引，以防矩阵被转换为一个接一个地堆叠其列的向量。

### 几点评论：

1.  Matlab 有几种[索引矩阵](http://www.mathworks.com/company/newsletters/articles/Matrix-Indexing-in-MATLAB/matrix.html)的方法：按行/​​列索引（就像你`i`的`j`问题一样）。通过线性索引（就像`index`你的问题一样）。然而，更有效的方法是使用*逻辑索引*`y`：也就是说，使用与`true`您希望设置/获取的条目大小相同的矩阵。
    所以，在你的例子中，如果你能得到这样一个逻辑矩阵*而不是*or `index`，`i`它`j`会更好。

2.  Matlab 与其他编程语言相比具有许多优势。其中之一是它能够极其高效地执行向量/矩阵运算。在 Matlab 中应该避免使用循环，或者更糟糕的是，嵌套循环。

3.  [在 Matlab 中使用`i`and`j`作为变量](https://stackoverflow.com/questions/14790740/using-i-and-j-as-variables-in-matlab)不是一个好习惯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:03:08.650

如果你想找到一个值的出现，`y(i,j)`只需评估

```
idx = (pixels == y(i,j)); 
```

根据您的变量，您可能会这样做

```
index(idx) = 1; 
```

# android - 如何阻止EditText在RelativeLayout中占据整个宽度

> ID：15008846
> 
> 赞同：0
> 
> 时间：2013-02-21T17:43:21.723
> 
> 标签：android

我有以下布局，基本上将“消息”显示为内置“消息”的气泡。我只需要在右侧显示一个箭头图像，图像已显示，但问题是：

当`"EditText"`有很多文字时，它占据整个宽度，`ImageView`仍然显示但出现在“ `EditText`”的顶部

我怎么能阻止“EditText”占据整个宽度，我试过`android:layout_weight`但没用

任何线索？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
    <!--    android:background="#FFDBE2ED"-->
 <LinearLayout 
        android:id="@+id/wrapper"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
         android:background="#00DBE2ED"
          >

    <RelativeLayout
        android:id="@+id/wrapper2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#00DBE2ED"
        android:weightSum="1.0" 
       >
    <!--  android:layout_gravity="center" -->
        <EditText
            android:id="@+id/comment"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            android:editable="false" 
            android:layout_marginTop="5dip"
            android:layout_marginRight="5dip"
            android:layout_marginLeft="5dip"
            android:background="@drawable/bubble_yellow"
            android:paddingLeft="10dip"
            android:text="Hello bubbles!"
            android:textColor="@android:color/primary_text_light"
            android:layout_weight=".70" 
             />
         <TextView
            android:id="@+id/sender"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            android:layout_margin="0dip"

            android:paddingLeft="5dip"
            android:paddingRight="2dip"
            android:text="Hello bubbles!"

           android:textColor="#b9dcdcdc"
           android:textSize="11sp"    
            android:layout_below="@+id/comment"

            />
           <ImageView
    android:id="@+id/aquaplayicon"
    android:src="@drawable/aquaplayicon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:clickable="true"
     android:onClick="onClickGirl"
    android:layout_alignParentRight="true"
    android:paddingRight="5dip"
     android:layout_centerVertical="true"
      android:layout_weight=".30"

    />

    </RelativeLayout>

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:45:25.637

将 EditText 设置为一些预定义的大小：

说，

android:layout_width="80dp"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:53:23.503

在 EditText`ImageView`之前添加`EditText` 并使用`android:layout_toLeftOf="@id/aquaplayicon"`

并且`layout_weight`不适用于`RelativeLayout`

编辑：试试这个

```
<LinearLayout 
            android:id="@+id/wrapper"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" 
            android:background="#00DBE2ED"
            android:orientation="vertical"
              > 
        <LinearLayout
            android:id="@+id/wrapper2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="#00DBE2ED"
            android:weightSum="1.0" 
            android:orientation="horizontal"
           >
        <!--  android:layout_gravity="center" -->
            <EditText
                android:id="@+id/comment"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"

                android:editable="false" 
                android:layout_marginTop="5dip"
                android:layout_marginRight="5dip"
                android:layout_marginLeft="5dip"
                android:background="@drawable/bubble_yellow"
                android:paddingLeft="10dip"
                android:text="Hello bubbles!"
                android:textColor="@android:color/primary_text_light"
                android:layout_weight="1" 
                 />

               <ImageView
                android:id="@+id/aquaplayicon"
                android:src="@drawable/aquaplayicon"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:clickable="true"
                android:onClick="onClickGirl"
                android:paddingRight="5dip"
                android:layout_centerVertical="true"

        />

        </LinearLayout>
         <TextView
                android:id="@+id/sender"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"

                android:layout_margin="0dip"

                android:paddingLeft="5dip"
                android:paddingRight="2dip"
                android:text="Hello bubbles!"

               android:textColor="#b9dcdcdc"
               android:textSize="11sp"    
                android:layout_below="@+id/comment"

                />

        </LinearLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T18:21:03.680

我会尝试将您更改`RelativeLayout`为水平方向`LinearLayout`并从左到右添加元素。然后您可以使用 android:layout_weight 确保所有内容都显示在屏幕上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-30T05:16:24.943

为您的线性布局中的组件赋予 layout_weight 并设置 android:layout_width="0dip"

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-16T07:15:19.387

如果您正在使用一些背景资源并希望您的 EditText 大小保持不变并且可绘制然后设置

```
andrid:maxEms="5";    // You can use any small value, 
```

其他明智的使用

```
andrid:maxEms         // For Max width with respect to number of character (Text)
android:maxWidth      // For max with in dp 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-11-04T18:15:16.717

尝试将 android:layout_width="fill_parent" 更改为 android:layout_width="wrap_content"

# c# - 如何从 UITableView RowSelect Event Monotouch 访问主 UIViewController？

> ID：15008852
> 
> 赞同：1
> 
> 时间：2013-02-21T17:43:32.500
> 
> 标签：c#, uitableview, uiviewcontroller, xamarin.ios, subclass

我的主 ViewController 上有一个 UITableView。Tableview 是子类，如下所示。当用户选择一行时，我想通过调用主 ViewController 上的例程来切换到新视图。但是，我无法从子类访问我的主视图控制器。我该怎么办？

```
public class TableSource : UITableViewSource
{
    string[] tableItems;
    string cellIdentifier = "TableCell";

    public TableSource(string[] items)
    {
        tableItems = items;
    }
    public override int RowsInSection(UITableView tableview, int section)
    {
        return tableItems.Length;
    }
    public override UITableViewCell GetCell(UITableView tableView, MonoTouch.Foundation.NSIndexPath indexPath)
    {
        UITableViewCell cell = tableView.DequeueReusableCell(cellIdentifier);
        if (cell == null)
            cell = new UITableViewCell(UITableViewCellStyle.Default, cellIdentifier);
        cell.TextLabel.Text = tableItems[indexPath.Row];
        return cell;
    }

    public override void RowSelected(UITableView tableView, NSIndexPath indexPath)
    {
        new UIAlertView("Row Selected", tableItems[indexPath.Row], null, "OK", null).Show();
        tableView.DeselectRow(indexPath, true);

        //Call routine in the main view controller to switch to a new view

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-16T12:36:09.317

在找到并评论了类似的帖子后，我碰巧看到了这篇帖子： [Xamarin UITableView RowSelection](https://stackoverflow.com/questions/18231303/xamarin-uitableview-rowselection)

虽然将 UIViewController 的实例传递给 TableSource 是解决此问题的一种方法，但它确实有其缺点。主要是您将 TableSource 与特定类型的 UIViewController 紧密耦合。

我建议改为在您的 UITableViewSource 中创建一个 EventHandler ，如下所示：

```
public event EventHandler ItemSelected; 
```

我还将为所选项目设置一个 getter 属性：

```
private selectedItem
public MyObjectType SelectedItem{
    get{
        return selectedItem;
    }

} 
```

然后我会像这样更新 RowSelected 方法：

```
public override void RowSelected(UITableView tableView, NSIndexPath indexPath)
{
    selectedItem = tableItems[indexPath.Row];
    ItemSelected(this, EventArgs.Empty);
} 
```

然后你的 UIViewController 可以监听 ItemSelected 事件并做它需要的任何事情。这允许您为多个视图和视图控制器重用 UITableViewSource。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:52:04.743

将其添加到您的 .ctor 中，例如

```
public TableSource(string[] items) 
```

变成：

```
public TableSource(string[] items, UIViewController ctl) 
```

然后保留对它的引用：

```
public TableSource(string[] items, UIViewController ctl)
{
    tableItems = items;
    controller = ctl;
} 
```

并在您的`RowSelected`通话中使用它：

```
public override void RowSelected(UITableView tableView, NSIndexPath indexPath)
{
    new UIAlertView("Row Selected", tableItems[indexPath.Row], null, "OK", null).Show();
    tableView.DeselectRow(indexPath, true);
    controller.DoWhatYouNeedWithIt ();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-08T19:46:11.160

**NSNotifications**可能是另一种选择。

因此，在 RowSelected 您发布通知：

```
NSNotificationCenter.DefaultCenter.PostNotificationName("RowSelected", indexPath); 
```

在视图控制器中，您为通知添加了一个观察者：

```
public override void ViewDidLoad()
{
    base.ViewDidLoad();    
    NSNotificationCenter.DefaultCenter.AddObserver(new NSString("RowSelected"), RowSelected);
}

void RowSelected(NSNotification notification) 
{
    var indexPath = notification.Object as NSIndexPath;
    // Do Something
} 
```

# apache - 使用 HTACCESS 将特定页面重定向到 HTTPS

> ID：15008854
> 
> 赞同：0
> 
> 时间：2013-02-21T17:43:45.987
> 
> 标签：apache, .htaccess, http, ssl, https

我有这个 URL [http://www.mysite.com/checkout/payment](http://www.mysite.com/checkout/payment)，好吧，我创建了一个文件 htaccess 来重定向这个页面，当 URL 与“checkout/payment”不同时，URL 变成了一个普通的 http。

但是一旦出现问题，资产（JS、CSS、JPG、PNG）总是被重定向到正常的 HTTP，我该如何解决这个问题？

```
RewriteCond %{HTTPS} on
RewriteCond %{REQUEST_URI} !(checkout/pay)
RewriteRule ^(.*)$ http://%{SERVER_NAME}%{REQUEST_URI} [R=301,L]

RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} (checkout/pay)
RewriteRule ^(.*)$ https://%{SERVER_NAME}%{REQUEST_URI} [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:30:35.043

请尝试以下规则：

```
# Redirect checkout pay(ment) pages to https 
RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} ^/checkout/pay [NC]
RewriteRule . https://%{SERVER_NAME}%{REQUEST_URI} [R=301,L]

# Redirects all resources where the http referer field matches the checkout payment page.
# Weirdly enough I can't seem to use any server variables in the http referer regex. Please change it to match your host.
RewriteCond %{HTTPS} off
RewriteCond %{HTTP_REFERER} ^https://www.mysite.com/checkout/pay [NC]
RewriteRule . https://%{SERVER_NAME}%{REQUEST_URI} [R=301,L] 
```

# php - PHP - mail() - 单引号与双引号

> ID：15008855
> 
> 赞同：1
> 
> 时间：2013-02-21T17:43:46.023
> 
> 标签：php, email

`mail();`我对 PHP函数有一个奇怪的问题。

像这样使用它

```
$header  = "MIME-Version: 1.0" . "\r\n";
$header .= "Content-type: text/html; charset=utf-8" . "\r\n";
$header .= "Content-Transfer-Encoding: quoted-printable" . "\r\n";
$header .= "Reply-To:" . $email . "\r\n";
$header .= "From: Kontaktformular <noreply@thomas-glaser-foto.de>" . "\r\n";
mail( "mail.me@mail.com", "Message from " . $name . " through your website!", $message, $header ); 
```

一切都按预期工作。邮件被发送，一切都被正确编码，主题也很好。

但是当我用这样的单引号更改双引号时：

```
$header  = 'MIME-Version: 1.0' . '\r\n';
$header .= 'Content-type: text/html; charset=utf-8' . '\r\n';
$header .= 'Content-Transfer-Encoding: quoted-printable' . '\r\n';
$header .= 'Reply-To:' . $email . '\r\n';
$header .= 'From: Kontaktformular <noreply@thomas-glaser-foto.de>' . '\r\n';
mail( 'mail.me@mail.com', 'Message from ' . $name . ' through your website!', $message, $header ); 
```

邮件仍会发送，但没有设置主题。相反，它是

> www-data@domain.com

特殊字符也被破坏。那里发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T17:45:08.307

需要使用双引号将特殊换行符 ( `"\r\n"`) 放入。当您使用单引号时，它们不会被视为换行符，而是会被视为文字文本。

PHP 解释器将评估双引号中的材料，但不会对单引号执行此操作。因此，最佳实践是仅在需要评估某些内容时使用双引号（如变量、无法连接时或换行等特殊字符）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T17:46:35.753

单引号用于文字字符串，没有变量被替换/扩展，除了`\'`and之外没有转义序列`\\`。您编写代码的方式可以保留单引号，除非您*必须*将换行符双引号为`"\r\n"`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T17:46:21.257

请阅读手册：

[http://php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

> 单引号
> 
> 要指定文字单引号，请使用反斜杠 () 对其进行转义。要指定文字反斜杠，请将其加倍 (\)。所有其他反斜杠实例将被视为文字反斜杠：这意味着您可能习惯的其他转义序列，例如 \r 或 \n，将按指定的字面输出而不是具有任何特殊含义。

# python - OpenCV 和 python 来校准相机

> ID：15008856
> 
> 赞同：1
> 
> 时间：2013-02-21T17:43:47.290
> 
> 标签：python, opencv, camera-calibration

我正在尝试使用 OpenCV 和 python 来校准相机。这是 OpenCV 代码：

```
 CalibrateCamera2(objectPoints, imagePoints, pointCounts, imageSize, cameraMatrix, distCoeffs, rvecs, tvecs, flags=0) 
```

其中 objectPoints 包含所有“模型点”。一个模型点，用于在所有图像中找到的每个棋盘点。填充此矩阵将板的顺序模式。即(x,y,z) 其中x=模型点的x_坐标，y=模型点的y_坐标，z（通常设置为0）是点的深度。

我怎样才能得到这些“模型点”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:50:44.350

只需自己测量它们。如果网格正方形为 5mm x 5mm，那么您的坐标将为 (0,0,0),(5,0,0),(0,5,0),(5,5,0),(10,0, 0) 等等。

# ruby-on-rails - Ruby - 忽略受保护的属性

> ID：15008863
> 
> 赞同：1
> 
> 时间：2013-02-21T17:44:10.057
> 
> 标签：ruby-on-rails, ruby, rails-activerecord

如何告诉 Ruby (Rails) 忽略批量分配时存在的受保护变量？

```
class MyClass < ActiveRecord::Base
    attr_accessible :name, :age
end 
```

现在我将批量分配一个哈希来创建一个新的`MyClass`.

```
MyClass.create!({:name => "John", :age => 25, :id => 2}) 
```

这会给我一个例外：

```
ActiveModel::MassAssignmentSecurity::Error: Can't mass-assign protected attributes: id 
```

我希望它创建一个`MyClass`具有指定（不受保护）属性的新属性并忽略该`id`属性。

旁注：我如何也忽略未知属性。例如，`MyClass`没有`location`属性。如果我尝试批量分配它，请忽略它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T17:46:54.047

用于[`Hash#slice`](http://api.rubyonrails.org/classes/Hash.html#method-i-slice)仅选择您真正有兴趣分配的键：

```
# Pass only :name and :age to create!
MyClass.create!(params.slice(:name, :age)) 
```

通常，我会为我的控制器添加包装器方法，`params`将其过滤到仅我知道我想要分配的字段：

```
class MyController

  # ...

  def create
    @my_instance = MyClass.create!(create_params)
  end

protected

  def create_params
    params.slice(:name, :age)
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T18:38:54.207

设置`mass_assignment_sanitizer`以`:logger`解决开发和测试中的问题。

```
config.active_record.mass_assignment_sanitizer = :logger 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T18:37:30.187

您可以使用 strong_parameters gem，它将在 rails 4 中。

[请参阅此处](https://github.com/rails/strong_parameters)的文档。

例如，通过这种方式，您可以通过操作或角色指定所需的参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-09T13:48:32.760

如果你想对它下手，并动态地只让模型的属性通过，而不全局禁用 ActiveModel::MassAssignmentSecurity::Errors：

```
params = {:name => "John", :age => 25, :id => 2}
MyClass.create!(params.slice(*MyClass.new.attributes.symbolize_keys.keys) 
```

如果您在哈希中使用符号，则需要 .symbolize_keys，就像在这种情况下一样，但您可能不需要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-20T18:37:08.620

就个人而言，我喜欢通过覆盖将东西保留在模型中`assign_attributes`。

```
def assign_attributes(new_attributes, options = {})
  if options[:safe_assign]
    authorizer = mass_assignment_authorizer(options[:as])
    new_attributes = new_attributes.reject { |key|
      !has_attribute?(key) || authorizer.deny?(key)
    }
  end
  super(new_attributes, options)
end 
```

与 类似地使用它`:without_protection`，但是当您想忽略未知或受保护的属性时：

```
MyModel.create!(
  { :asdf => "invalid", :admin_field => "protected", :actual_data => 'hello world!' },
  :safe_assign => true
)
# => #<MyModel actual_data: "hello world!"> 
```

# visual-studio-2012 - 每次启动时VS2012错误。消息没有帮助 - 有什么建议吗？

> ID：15008864
> 
> 赞同：0
> 
> 时间：2013-02-21T17:44:10.443
> 
> 标签：visual-studio-2012

当我启动 VS2012 时，我总是得到一个异常，告诉我查看 ActivityLog.xml。这就是我所看到的——对我来说毫无用处。希望其他人以前见过这个。此外 - VS2012 有时会占用机器上 100% 的 CPU。希望两者是相关的和可修复的。

> System.ComponentModel.Composition.CompositionException：合成产生单个合成错误。下面提供了根本原因。查看 CompositionException.Errors 属性以获取更多详细信息。1）当前类型，SquaredInfinity.Foundation.Configuration.Services.IConfigurationService，是接口，无法构造。您是否缺少类型映射？导致：依赖项解析失败，type = "SquaredInfinity.Foundation.Configuration.Services.IConfigurationService"，name = "(none)"。异常发生时：解决时。异常是： InvalidOperationException - 当前类型 SquaredInfinity.Foundation.Configuration.Services.IConfigurationService 是一个接口，无法构造。您是否缺少类型映射？ - - - - - - - - - - - - - - - - - - - - - - - - 当时在异常中，容器是：正在解决 SquaredInfinity.Foundation.Configuration.Services.IConfigurationService,(none) 导致：尝试创建类型为“#Btb.#Rtb”的实例时发生异常。导致：无法激活部件“#Btb.#Rtb”。元素：#Btb.#Rtb --> #Btb.#Rtb 导致：无法从“#Btb.#”部分导出“#Btb.#Rtb (ContractName="Microsoft.VisualStudio.Text.Classification.IClassifierProvider")”室温'。元素：#Btb.#Rtb (ContractName="Microsoft.VisualStudio.Text.Classification.IClassifierProvider") --> #Btb.#Rtb at System.ComponentModel.Composition.Hosting.CompositionServices.GetExportedValueFromComposedPart(ImportEngine engine,`2.&lt;CreateStronglyTypedLazyOfTM&gt;b__1()&#x000D;&#x000A; at System.Lazy`1.CreateValue( ) 在 System.Lazy `1.LazyInitValue()&#x000D;&#x000A; at System.Lazy`1.get_Value() 在 Microsoft.VisualStudio.Text.Utilities.GuardedOperations.InvokeMatchingFactories[TExtensionInstance,TExtensionFactory,TMetadataView](IEnumerable `1 lazyFactories, Func`2 getter, IContentType dataContentType, Object errorSource)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T19:14:35.720

你的 VSCommands 扩展是最新的吗？存在可能产生类似堆栈跟踪的兼容性问题，并且已在[最新版本](http://visualstudiogallery.msdn.microsoft.com/a83505c6-77b3-44a6-b53b-73d77cba84c8)中修复。

# java - 是否有一种工具可以将 JRE 的副本与我的应用程序打包在一起，以便无论用户是否安装了 Java，它都可以运行？

> ID：15008865
> 
> 赞同：5
> 
> 时间：2013-02-21T17:44:10.350
> 
> 标签：java

这是我第一次接触实际分发 Java 应用程序。我来自 Python 背景，它有一套很棒的分发工具，称为 PyInstaller 和 Py2App。这两个都将 Python 解释器的副本与应用程序一起打包，因此最终用户无需安装任何东西。他们只需看到`.EXE`或`.app`双击它，程序就会启动。

到目前为止，我一直无法为 Java 找到类似的工具。这个应用程序背后的想法是它存储在闪存驱动器上，因此无需在主机上安装任何东西就可以运行它。

我找到了适用于 Windows 的不错的工具。例如，[Launch4J](http://launch4j.sourceforge.net/)似乎可以解决问题，但它仅适用于 Windows。我迫切需要类似的功能，但用于制作应用程序。

以前有人遇到过这个难题吗？有什么我可以使用的工具吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T17:47:26.307

假设您通过 .zip 文件进行分发

您可以将 JRE 的副本放在您的应用程序目录中，然后创建一个 .bat 和 .sh 脚本，该脚本将使用同一目录中的 JRE 使用 java 命令运行该应用程序。

可能有更好的工具可以做到这一点，但这是可以实现的一种方式。

一个超级简化的示例 .sh 脚本

```
#!/bin/bash

jre/bin/java myapp.jar 
```

将在该位置使用 JRE 运行 myapp.jar。实际上，您需要检查以确保 JRE 存在。

应用程序文件夹：

```
myapp/
    jre/
    start.sh
    start.bat
    myapp.jar 
```

jre 将是一个实际的 JRE 实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T17:49:43.627

看看[install4j](http://www.ej-technologies.com/products/install4j/overview.html)，它是一个多平台的 Java 安装程序（和启动器）构建器。您可以将 JRE 与安装程序捆绑在一起。

![在此处输入图像描述](../Images/10a124aa512d2e47bc808dbfa0b4c72f.png)

免责声明：我公司开发install4j

# javascript - 我的 jQuery 速记“$.get()”ajax 方法及其回调函数的奇怪行为

> ID：15008867
> 
> 赞同：0
> 
> 时间：2013-02-21T17:44:14.327
> 
> 标签：javascript, jquery

我有以下 jQuery 脚本：

```
$(document).ready(function() {
    $("#resendActivationEmailLink").bind("click", function(event) {
        $.get($(this).attr("href"), function() {
            $("#emailNotActivated").html("<span>not yet activated. email sent!</span>");
        });
        event.preventDefault();
        return false;
    });
}); 
```

虽然 ajax 调用确实有效，但不会调用 get() 函数的回调函数，即未调用此行：

```
$("#emailNotActivated").html("<span>not yet activated. email sent!</span>"); 
```

有人可以帮忙吗？

**编辑**：来自 ajaxError 的请求对象：

```
Object {readyState: 4, setRequestHeader: function, getAllResponseHeaders: function, getResponseHeader: function, overrideMimeType: function…}
abort: function ( statusText ) {
always: function () {
complete: function () {
done: function () {
error: function () {
fail: function () {
getAllResponseHeaders: function () {
getResponseHeader: function ( key ) {
overrideMimeType: function ( type ) {
pipe: function ( /* fnDone, fnFail, fnProgress */ ) {
progress: function () {
promise: function ( obj ) {
readyState: 4
responseText: "dummy"
setRequestHeader: function ( name, value ) {
state: function () {
status: 200
statusCode: function ( map ) {
statusText: "OK"
success: function () {
then: function ( /* fnDone, fnFail, fnProgress */ ) {
__proto__: Object 
```

编辑2：输出来自：`console.log($(this).attr('href'));`

```
/bignibou/resendActivationEmail/235617cb-c19c-4694-ab9e-753e5d7QQde07 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T17:54:05.323

设置[错误处理程序](http://api.jquery.com/ajaxError/)

```
$(document).ajaxError(function(event, request, settings) {
    alert( "Error requesting page " + settings.url);
}); 
```

这会触发吗？在控制台中查看 Ajax 调用中返回的内容。

*   编辑 -

所以错误响应显示 4 和 200，这很好。下一个问题可能是解析。尝试设置数据类型，这样 jQuery 就不会猜测和失败。

```
$.get($(this).attr("href"), function(){ ... }, "html") 
```

如果可行，我打赌您的服务器端代码将返回错误的内容类型和响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:03:20.427

试试这个：

```
$.get($(this).attr("href"), function(data) {
  if(data){
    $("#emailNotActivated").html("<span>not yet activated. email sent!</span>");
  }
}); 
```

# c# - 如何根据整数变量的值动态创建许多标签和文本框？

> ID：15008871
> 
> 赞同：13
> 
> 时间：2013-02-21T17:44:33.403
> 
> 标签：c#, winforms

当我们知道'n'的值后，例如，单击“显示”按钮后，有什么方法可以动态创建和显示带有“n”个相应文本框的“n”个标签。

如果有什么让你不明白我的问题，请告诉我。谢谢！

我正在使用 VS C# Express 2010 Windows 窗体。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-21T18:00:58.143

我将创建一个用户控件，其中包含一个标签和一个文本框，并简单地创建该用户控件的实例'n'次。如果您想知道更好的方法并使用属性从用户控件访问标签和文本框的值，请告诉我。

简单的方法是：

```
int n = 4; // Or whatever value - n has to be global so that the event handler can access it

private void btnDisplay_Click(object sender, EventArgs e)
{
    TextBox[] textBoxes = new TextBox[n];
    Label[] labels = new Label[n];

    for (int i = 0; i < n; i++)
    {
        textBoxes[i] = new TextBox();
        // Here you can modify the value of the textbox which is at textBoxes[i]

        labels[i] = new Label();
        // Here you can modify the value of the label which is at labels[i]
    }

    // This adds the controls to the form (you will need to specify thier co-ordinates etc. first)
    for (int i = 0; i < n; i++)
    {
        this.Controls.Add(textBoxes[i]);
        this.Controls.Add(labels[i]);
    }
} 
```

上面的代码假定您有一个按钮`btnDisplay`，并且它有一个`onClick`分配给`btnDisplay_Click`事件处理程序的事件。您还需要知道 n 的值，并且需要一种方法来确定放置所有控件的位置。控件也应指定宽度和高度。

要使用用户控件执行此操作，只需执行此操作。

好的，首先创建一个新的用户控件并在其中放置一个文本框和标签。

可以说它们被称为`txtSomeTextBox`and `lblSomeLabel`。在后面的代码中添加以下代码：

```
public string GetTextBoxValue() 
{ 
    return this.txtSomeTextBox.Text; 
} 

public string GetLabelValue() 
{ 
    return this.lblSomeLabel.Text; 
} 

public void SetTextBoxValue(string newText) 
{ 
    this.txtSomeTextBox.Text = newText; 
} 

public void SetLabelValue(string newText) 
{ 
    this.lblSomeLabel.Text = newText; 
} 
```

现在生成用户控件的代码将如下所示（MyUserControl 是您为用户控件指定的名称）：

```
private void btnDisplay_Click(object sender, EventArgs e)
{
    MyUserControl[] controls = new MyUserControl[n];

    for (int i = 0; i < n; i++)
    {
        controls[i] = new MyUserControl();

        controls[i].setTextBoxValue("some value to display in text");
        controls[i].setLabelValue("some value to display in label");
        // Now if you write controls[i].getTextBoxValue() it will return "some value to display in text" and controls[i].getLabelValue() will return "some value to display in label". These value will also be displayed in the user control.
    }

    // This adds the controls to the form (you will need to specify thier co-ordinates etc. first)
    for (int i = 0; i < n; i++)
    {
        this.Controls.Add(controls[i]);
    }
} 
```

当然，您可以在用户控件中创建更多方法来访问属性并设置它们。或者只是如果您必须访问很多，只需输入这两个变量，您就可以直接访问文本框和标签：

```
public TextBox myTextBox;
public Label myLabel; 
```

在用户控件的构造函数中执行以下操作：

```
myTextBox = this.txtSomeTextBox;
myLabel = this.lblSomeLabel; 
```

然后在您的程序中，如果您想修改其中任一的文本值，请执行此操作。

```
control[i].myTextBox.Text = "some random text"; // Same applies to myLabel 
```

希望它有所帮助:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T17:53:47.577

这是一个简单的示例，应该让您继续添加一些可以充当 Winform 占位符的想法 `TableLayoutPanel`

然后只需向其添加控件

```
 for ( int i = 0; i < COUNT; i++ ) {

    Label lblTitle = new Label();
    lblTitle.Text = i+"Your Text";
    youlayOut.Controls.Add( lblTitle, 0, i );

    TextBox txtValue = new TextBox();
    youlayOut.Controls.Add( txtValue, 2, i );
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-21T17:56:51.637

假设您有一个按钮，按下时将 n 设置为 5，然后您可以像这样在表单上生成标签和文本框。

```
var n = 5;
for (int i = 0; i < n; i++)
{
    //Create label
    Label label = new Label();
    label.Text = String.Format("Label {0}", i);
    //Position label on screen
    label.Left = 10;
    label.Top = (i + 1) * 20;
    //Create textbox
    TextBox textBox = new TextBox();
    //Position textbox on screen
    textBox.Left = 120;
    textBox.Top = (i + 1) * 20;
    //Add controls to form
    this.Controls.Add(label);
    this.Controls.Add(textBox);
} 
```

这不仅会将它们添加到表单中，还会将它们定位得体。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-01T20:55:04.270

你可以试试这个：

```
int cleft = 1;
intaleft = 1;
private void button2_Click(object sender, EventArgs e) 
{
     TextBox txt = new TextBox();
     this.Controls.Add(txt);
     txt.Top = cleft * 40;
     txt.Size = new Size(200, 16);
     txt.Left = 150;
     cleft = cleft + 1;
     Label lbl = new Label();
     this.Controls.Add(lbl);
     lbl.Top = aleft * 40;
     lbl.Size = new Size(100, 16);
     lbl.ForeColor = Color.Blue;
     lbl.Text = "BoxNo/CardNo";
     lbl.Left = 70;
     aleft = aleft + 1;
     return;
}
private void btd_Click(object sender, EventArgs e)
{ 
    //Here you Delete Text Box One By One(int ix for Text Box)
    for (int ix = this.Controls.Count - 2; ix >= 0; ix--)
    //Here you Delete Lable One By One(int ix for Lable)
    for (int x = this.Controls.Count - 2; x >= 0; x--)
    {
        if (this.Controls[ix] is TextBox) 
        this.Controls[ix].Dispose();
        if (this.Controls[x] is Label) 
        this.Controls[x].Dispose();
        return;
    }
} 
```

# javascript - Jquery 多个动作之一，如果

> ID：15008872
> 
> 赞同：0
> 
> 时间：2013-02-21T17:44:33.447
> 
> 标签：javascript, jquery

我有以下代码..

```
 function showNext(opt)  {
        takeAway();
        if(opt == "Picked Up") $("#pickedup").css("display", "");
        if(opt == "Bus to alternate") $("#altad2").css("display", "");
        if(opt == "Walk to alternate") $("#altad1").css("display", "");
    }

function takeAway(){
    $("#pickedup").css("display", "none");
    $("#altad2").css("display", "none");
    $("#altad1").css("display", "none");
} 
```

在这种情况下，如果有人选择巴士交替或步行交替，它将分别显示 altad2 和 altad1

但这不是我想要的..

我想要的是，如果有人选择公共汽车来替代它会同时显示 altad2 和 altad1​​，如果有人选择步行来替代，它也会显示相同的内容。

有没有一种简单的方法可以做类似的事情

```
 if(opt == "Bus to alternate") $("#altad2").css("display", "") and $("#altad1").css("display", "");
    if(opt == "Walk to alternate") $("#altad1").css("display", "") and $("#altad2").css("display", ""); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:49:16.263

你可以尝试这样的事情：

```
if(opt == "Bus to alternate" || opt == "Walk to alternate" ){
    $('[id^="altad"]').css("display", "");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:57:43.993

更好的方法是创建一个地图，它将减少代码大小并变得更快。

```
function showNext(opt)  {
        takeAway()

      var optMap={
             "Picked Up":"#pickedup",
             "Bus to alternate":"#altad2,#altad1",
             "Walk to alternate":"#altad2,#altad1",
              }
           $(optMap[opt]).css("display","") ;       

}
function takeAway(){
    $("#pickedup,#altad2,#altad1").css("display", "none");
 } 
```

将所有 id 保存在一个选择器中，以逗号分隔。在这种情况下，它只会创建一个 jquery 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T17:49:27.530

试试这个：

```
function showNext(opt)    {
takeAway();

if(opt == "Picked Up") $("#pickedup").css("display", "");
if(opt == "Bus to alternate") 
{
 $("#altad2").css("display", "");
 $("#altad1").css("display", "");
}
if(opt == "Walk to alternate") 
{
 $("#altad2").css("display", "");
 $("#altad1").css("display", "");

} 

} 
```

萨卢多斯 ;)

# android - 处理点击图标菜单项

> ID：15008874
> 
> 赞同：1
> 
> 时间：2013-02-21T17:44:37.057
> 
> 标签：android, menu

我看到可以处理对图标菜单项的点击或通过实现

```
onOptionsItemSelected 
```

在活动内部，或通过使用

```
onMenuItemClickListener 
```

就像按钮上的 onclick 监听器。什么时候最好使用第一种方法，什么时候使用第二种方法？因为在我看来，使用外部侦听器会使代码更加模块化，但是会创建一个新类，但使用第一种方式不会创建新类，而是会使代码模块化程度降低......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:54:09.470

如果您的目标是 API 14 或更高版本（ICS 或更高版本），您可以实现一个[ActionProvider](http://developer.android.com/reference/android/view/ActionProvider.html)。如果这不是一个选项，那么您可以实现一个基本活动，该活动将始终填充菜单并使用`onOptionsItemSelected`. 这是通过所有活动实现“关于”或“设置”菜单项的好方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:07:12.270

除了下面列出的用例之外，还有其他用例，但我将经常出现的一般用例放入其中。

**onOptionsItemSelected**

如果您正在使用`Fragment`s，您可能想要使用`onOptionsItemSelected`并考虑将菜单项添加到*操作栏*，如[将项目添加到](http://developer.android.com/guide/components/fragments.html#ActionBar)操作栏中所述的方式。

这描述的是[在](http://developer.android.com/reference/android/app/Fragment.html#onCreateOptionsMenu%28android.view.Menu,%20android.view.MenuInflater%29)你的`Fragment`. 要做到这一点，您必须在 中调用[setHasOptionsMenu](http://developer.android.com/reference/android/app/Fragment.html#setHasOptionsMenu%28boolean%29)`onCreate`。

```
protected void onCreate(Bundle savedInstanceState) {
    this.setHasOptionsMenu(true);
} 
```

设置此项实际上会进行`Activity`调用`onCreateOptionsMenu`，允许您添加菜单项。

```
@Override
public boolean onCreateOptionsMenu(Menu menu){
    super.onCreateOptionsMenu(menu);

    // add items corresponding to this Fragment
    menu.add(...);

    return true;
} 
```

我推荐这个的原因是它允许您将更多的菜单处理代码放入您的`Fragment`而不是`Activity`找出`Fragment`要调用的代码等。

在这种情况下，单击菜单项将在我建议`onOptionsItemSelected`的内部调用。`Fragment`

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.my_id1:
            dothing1();
            return true;
        case R.id.my_id2:
            dotghing2();
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

更多的是一个冗长的答案，但这是处理`Fragment`.

**onMenuItemClickListener**

在 的情况下`onMenuItemClickListener`，当您不想使用上面的 pre-ready 方法并实现自己的时使用。

我的意思是你在接口中*实现* `OnMenuItemClickListener`和生成方法。然后，您分配菜单来调用`Activity`实现 this 的菜单，因为上面的选项根据to关系`Activity`的预先准备好的实现假定要使用什么。`Activity``Fragment`

# python - 具有神经网络的人工生命

> ID：15008875
> 
> 赞同：8
> 
> 时间：2013-02-21T17:44:37.837
> 
> 标签：python, artificial-intelligence, neural-network, artificial-life

我正在尝试建立一个由神经网络控制的代理的简单进化模拟。在当前版本中，每个代理都有一个带有一个隐藏层的前馈神经网络。环境包含固定数量的食物，用红点表示。当智能体移动时，他会失去能量，当他靠近食物时，他会获得能量。能量为 0 的特工死亡。神经网络的输入是智能体的当前角度和到最近食物的向量。每个时间步长，每个智能体的运动角度都会根据其神经网络的输出而改变。目的当然是观察一段时间后觅食行为的演变。然而，什么也没有发生。

不知道问题是神经网络的结构（太简单了？）还是繁殖机制：为了防止种群爆炸，初始种群大约是 20 个智能体，随着种群接近 50，繁殖机会接近零。当复制确实发生时，通过从头到尾遍历代理列表来选择父节点，并检查每个代理的 0 到 1 之间的随机数是否小于该代理的能量与总和之间的比率。所有代理的能量。如果是这样，则搜索结束并且该代理成为父代理，因为我们向环境中添加该代理的副本，该代理在其神经网络中的一个或多个权重中具有一定的突变概率。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T19:59:59.303

如果环境足够温和（例如，很容易找到食物），那么随机移动可能是一个完全可行的策略，并且繁殖成功可能比其他任何因素都更受运气的影响。还要考虑意想不到的后果：例如，如果后代与其父代同居，那么两者都会立即在当地相互竞争，从长远来看，这可能是不利的，足以导致两者的死亡。

要测试您的系统，请引入一个具有“预制”神经网络的个体，该神经网络设置为将个体直接引导至最近的食物（您的模型使得这样的东西存在并且很容易写下来，对吧？如果没有，那就是期望它发展是不合理的！）。将那个人引入你在愚蠢的群众中的模拟。如果个人没有迅速占据主导地位，则表明您的模拟没有设置为强化这种行为。但是，如果个体享有繁殖成功并且它和它的后代接管了，那么你的模拟正在做一些正确的事情，你需要寻找其他地方，因为这种行为没有进化。

更新以回应评论：

在我看来，这种角度和向量的混合是可疑的。个人是否可以进化为“直接向最近的食物移动”行为必须取决于您的网络可以如何近似 atan 函数（我持怀疑态度）。同样，这表明需要进行更多测试：

*   抛开所有的生态模拟，只测试扰动你的随机网络风格的人群，看看它们是否可以朝着预期的功能发展。
*   （更简单，更好）让网络输出一个向量（而不是一个角度）：个人应该移动的方向（当然这意味着有 2 个输出节点而不是一个）。显然，“直接向食物移动”策略只是“向食物方向”向量分量的直接传递，然后有趣的是看看你的随机网络是否朝着这个简单的“恒等函数”进化（也应该允许引入如上所述的现成优化个体）。

我也怀疑“固定数量的食物”。（我假设您的意思是一旦消耗了一个红点，就会引入另一个红点）。一个更“现实”的模型可能是以恒定的速度引入食物，而不是强加任何人为的人口限制：人口限制是由食物供应的限制决定的。例如，如果您每分钟引入 100 个单位的食物，而个人每分钟需要 1 个单位的食物才能生存，那么您的模拟*应该*会发现它趋向于 100 个人的长期平均人口，而无需任何钳位来避免“人口爆炸” ”（尽管繁荣与萧条，盛宴或饥荒的动态实际上可能会根据细节出现）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T18:55:39.967

这听起来像是[强化学习](http://en.wikipedia.org/wiki/Reinforcement_learning)的一个问题，也有一本很好的[在线教科书](http://webdocs.cs.ualberta.ca/~sutton/book/the-book.html)。

# javascript - Javascript 如何获取私有变量

> ID：15008877
> 
> 赞同：0
> 
> 时间：2013-02-21T17:44:44.103
> 
> 标签：javascript, html, oop, variables, private

在 JavaScript 中，我试图实现私有变量（就像在其他 OOP 语言中一样）。

是否只能通过闭包或者是否有任何其他方式可以实现私有变量？

任何例子都会很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:48:42.990

对于一个类（函数），它只是使用“var”与“this”：

```
function myObject() {
  var myPrivateVariable = 10;
  this.myPublicVariable = 20;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:51:23.617

私有成员由构造函数创建。构造函数的普通变量和参数成为私有成员。

```
function Container(param) {
    this.member = param;
    var secret = 3;
    var that = this;
} 
```

此构造函数生成三个私有实例变量：param、secret 和 that。它们附加到对象上，但外部无法访问它们，对象自己的公共方法也无法访问它们。私有方法可以访问它们。私有方法是构造函数的内部函数。

```
function Container(param) {

    function dec() {
        if (secret > 0) {
            secret -= 1;
            return true;
        } else {
            return false;
        }
    }

    this.member = param;
    var secret = 3;
    var that = this;
} 
```

私有方法 dec 检查秘密实例变量。如果它大于零，它会递减 secret 并返回 true。否则返回false。它可用于使此对象仅限于三种用途。

按照惯例，我们创建一个私有`this`变量 ( `that`)。这用于使对象可用于私有方法。这是 ECMAScript 语言规范中错误的解决方法，该错误导致`this`内部函数设置不正确。

私有方法不能被公共方法调用。为了使私有方法有用，我们需要引入一个特权方法。

作为参考，你可以看到这个[http://javascript.crockford.com/private.html](http://javascript.crockford.com/private.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-23T17:18:05.147

任何变量仅在定义它的函数内是已知的。因此，[**Sahil Grover**](https://stackoverflow.com/users/2041267/sahil-grover)接受的答案几乎涵盖了基础知识，除了最近添加到 JavaScript 规范：[**`let`**](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let)声明。

在[**Node.js**](https://nodejs.org/en/)和现代浏览器中，您现在也可以这样做：

```
function loop(arr) {
    // i IS NOT known here
    // j IS NOT known here

    for( var i = 0; i < arr.length; i++ ) {
        // i IS known here
    };

    // i IS known here
    // j IS NOT known here

    for( let j = 0; j < arr.length; j++ ) {
        // j IS known here
    };

    // i IS known here
    // j IS NOT known here
} 
```

`let varName = ...`只有它所在的[**块**](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Statements/block)才知道。所以，在这种情况下，我们的变量`j`只在第一个 for 循环中是已知的，而不是之前和之后。如果`var varName = ...`改为使用 a，则从定义它的那一刻起，它在整个函数中都是已知的。

* * *

现在，让我们超越基础。

JavaScript 的一个优点是它给你很大的自由来定义你的对象。然而，这也是一个弱点，因为今天几乎每个人都有自己的方式在 JavaScript 中进行 OOP。

我自己编写的大多数 JavaScript 代码通常使用以下模式：

```
var keyValueStore = (function() {
    // Private "static" properties go here
    var count = 0; 

    var kvs = function() {
        // Here, you can define private instance properties as "var property = ..."
        // You can also define public instance properties as "this.property = ..."
        count++; 
    };

    kvs.prototype = {
        // Public instance properties can also go here
        ‘data’ : {},
        ‘get’ : function(key) {
            return this.data[key];
        },
        ‘set’ : function(key, value) {
            this.data[key] = value;
        },
        ‘delete’ : function(key) {
            delete this.data[key];
        },
        ‘getLength’ : function() {
            var l = 0;
            for (p in this.data) l++;
            return l;
        }
    };

    return {
        // Public "static" properties go here
        ‘create’ : function() { return new kvs(); },
        ‘count’ : function() { return count; }
    };
})(); 
```

正如我在代码中添加的注释所示，此模式允许您定义“静态”属性（“类”级别的属性）和[**实例**](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/instanceof)属性，两者都可以是私有的或公共的。与我见过的其他一些模式不同，它这样做不会使您的代码非常难以理解。

### 用法 ：

```
kvs = keyValueStore.create();
kvs.set(‘Tom’, “Baker”);
kvs.set(‘Daisy’, “Hostess”);
var profession_of_daisy = kvs.get(‘Daisy’);
kvs.delete(‘Daisy’);
console.log(keyValueStore.count()); 
```

# javascript - Internet Explorer 开发人员工具不显示使用 RequireJS 的源代码

> ID：15008881
> 
> 赞同：6
> 
> 时间：2013-02-21T17:45:06.960
> 
> 标签：javascript, internet-explorer, requirejs, amd

我正在尝试调试 IE 9 第一次在我的 requirejs/backbone 应用程序上运行的页面问题，但在页面重新加载时会失败。但是，当我尝试使用 f12 IE 开发人员工具调试此问题时，我无法导航到源设置断点，因为 IE 不加载 RequireJS 包含的任何文件。我怎样才能解决这个问题来解决我的 IE 头痛？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-14T09:51:59.863

我想我迟到了，但希望我的回答也能帮助你和其他人。您要调试的文件或文件中的行，只需`debugger;` 在该行之前添加 --> 即可。

因此，当 require.js 加载您的脚本并遇到该字符串（即`debugger;`存在）时，它将自动在该行停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T10:51:48.667

您可以使用 require 工具生成单个 js 文件：

*   在这个单个文件中包含 requirejs ( [http://requirejs.org/docs/optimization.html#onejs](http://requirejs.org/docs/optimization.html#onejs) )
*   将优化设置为无（没有缩小源 - [http://requirejs.org/docs/optimization.html#shallow](http://requirejs.org/docs/optimization.html#shallow)）

在您的 index.html 中链接此文件而不是 require.js。

可以用 IE 调试。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-11-26T13:11:09.103

I have the same problem from time to time. What sometimes helps: Close all the files in Debugger view, leave the DevTools open, press Play to allow page to continue and then make your action on the page or reload - if it halts on the **debugger;** again, all the files will be loaded. But still investigating ;)

# php - 未使用 PHP 将文件附件发送到电子邮件

> ID：15008884
> 
> 赞同：2
> 
> 时间：2013-02-21T17:45:20.637
> 
> 标签：php, mime, email-attachments

我正在尝试从表单发送附件。该电子邮件会生成一个附件，而不是我尝试上传的附件。我希望它上传并将名称更改为`$strNewFileName`发送给用户时的名称。

html代码：

`<input type="file" class="upload" name="uploaded_file[]" id="uploaded_file"></input>`

.php 文件：

```
<?php
$strTo = "me@example.com";
$strSubject = "Document Updated";  
$strMessage = nl2br($_GET["sqlCode"]);
$strNewFileName = $_GET["RevisedFileName"];

 if (is_uploaded_file($_FILES['uploaded_file']['tmp_name'])) {
echo "File ". $_FILES['uploaded_file']['name'] ." uploaded successfully.\n";
echo "Displaying contents\n";
readfile($_FILES['uploaded_file']['tmp_name']);
} else {
echo "Possible file upload attack: ";
echo "filename '". $_FILES['uploaded_file']['tmp_name'] . "'.";
}
 //*** Uniqid Session ***//  
$strSid = md5(uniqid(time()));   
$strHeader = "";  
$strHeader .= "From: Document Update\r\nReply-To: example@example.com";    
$strHeader .= "MIME-Version: 1.0\n";  
$strHeader .= "Content-Type: multipart/mixed; boundary=\"".$strSid."\"\n\n";  
$strHeader .= "This is a multi-part message in MIME format.\n";   
$strHeader .= "--".$strSid."\n";  
$strHeader .= "Content-type: text/html; charset=utf-8\n";
$strHeader .= "Content-Transfer-Encoding: 7bit\n\n";  
$strHeader .= $strMessage."\n\n"; 
rename("$strFilesName", "$strNewFileName");  

  // *** Attachment *** //  
  $strFilesName = $_FILES["uploaded_file"]["name"]; 
  $strContent = chunk_split(base64_encode(file_get_contents($_FILES["uploaded_file"]["name"])));
  $strHeader .= "--".$strSid."\n";  
  $strHeader .= "Content-Type: application/pdf; name=\"".$strNewFileName."\"\r\n";
  $strHeader .= "Content-Transfer-Encoding: base64\n";  
  $strHeader .= "Content-Disposition: attachment;\n\n";  
  $strHeader .= $strContent."\n\n";

$flgSend = @mail($strTo,$strSubject,$strMessage,$strHeader);  

if($flgSend)  
{  
   echo "Approval Send Complete."; 
}  
else  
{  
   echo "Cannot send mail, Approval has not been processed.";  
 } 

 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:48:35.187

看起来您将文件上传设置为发送多个文件，`name="uploaded_file[]"`但您只在 php 代码中处理单个文件。在这种情况下，只需删除`[]`html 中的 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:49:40.073

我认为你的问题在这里：

```
$strContent = chunk_split(base64_encode(file_get_contents($_FILES["uploaded_file"]["name"]))); 
```

`_FILES["uploaded_file"]["name"]`表示上传文件的原始名称，而不是它在服务器上的位置。您需要使用`$_FILES['uploaded_file']['tmp_name']`它（正如您在脚本中前面所做的那样，您验证它是一个正确上传的文件。

同样对于数组访问（因为`uploaded_file[]`用作输入名称），您需要执行以下操作来构建有效附件数组：

```
$valid_attachments = array();
foreach ($_FILES['uploaded_file']['tmp_name'] as $key => $temp_file_name) {
    if (is_uploaded_file($temp_file_name)) {
        $valid_attachments[] = array(
            'path' => $temp_file_name,
            'filename' => $_FILES['uploaded_file']['name'][$key],
            'type' => $_FILES['uploaded_file']['type'][$key],
            'size' => $_FILES['uploaded_file']['size'][$key]
        );
    }
} 
```

然后，您需要在代码的“附件”部分中遍历此数组并将附件添加到电子邮件中。

# spring - 添加安全 jar 后 Bean 创建失败

> ID：15008887
> 
> 赞同：0
> 
> 时间：2013-02-21T17:45:33.263
> 
> 标签：spring, spring-security

我遇到以下错误

将上下文初始化事件发送到类 org.springframework.web.context.ContextLoaderListener 的侦听器实例的异常：org.springframework.beans.factory.BeanCreationException：创建名称为“userAuditLogAspect”的 bean 时出错：注入自动装配的依赖项失败；嵌套异常是 org.springframework.beans.factory.BeanCreationException：无法自动装配字段：私有 javax.sql.DataSource com.vzw.aspect.UserAuditLogAspect.dataSource；嵌套异常是 org.springframework.beans.factory.NoSuchBeanDefinitionException：没有为依赖项找到类型为 [javax.sql.DataSource] 的匹配 bean：预计至少有 1 个 bean 有资格作为此依赖项的自动装配候选者。依赖注解：{@org.springframework.beans.factory.annotation.Autowired(required=true), @org.springframework.beans.factory.annotation。Qualifier(value=topoDataSource)} 相关原因：org.springframework.beans.factory.BeanCreationException：创建名为“topoDataSource”的bean时出错：bean初始化失败；嵌套异常是 java.lang.NoClassDefFoundError: 无法初始化类 org.springframework.expression.TypedValue

我的网络 xml 是：

```
<context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>WEB-INF/spring-security.xml, WEB-INF/topoService-servlet.xml</param-value>
 </context-param>
 <!-- Spring Security Filter -->
 <filter>
  <filter-name>springSecurityFilterChain</filter-name>
  <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
 </filter>
 <filter-mapping>
  <filter-name>springSecurityFilterChain</filter-name>
  <url-pattern>/*</url-pattern>
 </filter-mapping>
 <!-- <context-param>
        <param-name>resteasy.resources</param-name>
        <param-value>com.vz.myrest.MessageRestService</param-value>
    </context-param> -->
 <listener>
  <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
 </listener>} 
```

2) toposervice-servlet.xml

```
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jee="http://www.springframework.org/schema/jee" xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd

    http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd"
    >   
    <aop:aspectj-autoproxy />
    <context:component-scan base-package="com.vzw.context, com.vzw.aspect, com.vzw.logger" />

    <jee:jndi-lookup id="topoDataSource" jndi-name="java:/TopoDSJNDI" />

    <!--<bean class="com.vzw.context.SpringApplicationContext"></bean> -->

    <bean id="topoServiceDao" class="com.vzw.topo.dao.TopoServiceDaoImpl">
        <property name="dataSource">
            <ref bean="topoDataSource" />
        </property>
    </bean>

</beans> 
```

3) pom.xml

```
<dependencies>
    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jaxrs</artifactId>
        <scope>provided</scope>
        <version>2.3.4.Final</version><!--$NO-MVN-MAN-VER$ -->
    </dependency>
    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-multipart-provider</artifactId>
        <scope>provided</scope>
        <version>2.3.4.Final</version><!--$NO-MVN-MAN-VER$ -->
    </dependency>
    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jaxb-provider</artifactId>
        <scope>provided</scope>
        <version>2.3.4.Final</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jackson-provider</artifactId>
        <scope>provided</scope>
        <version>2.3.4.Final</version><!--$NO-MVN-MAN-VER$ -->
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>3.1.1.RELEASE</version>
        <classifier>sources</classifier>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>3.1.2.RELEASE</version>
    </dependency>
    <!--<dependency> <groupId>org.springframework</groupId> <artifactId>spring-aspects</artifactId> 
        <version>3.1.2.RELEASE</version> </dependency> -->
    <!-- <dependency> <groupId>org.springframework</groupId> <artifactId>spring-context</artifactId> 
        <version>3.1.2.RELEASE</version> </dependency> <dependency> <groupId>org.springframework</groupId> 
        <artifactId>spring-context-support</artifactId> <version>3.1.2.RELEASE</version> 
        </dependency> -->
    <!-- Spring Security -->
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <!-- Spring Security ends -->
    <dependency>
        <groupId>org.jboss.spec.javax.servlet</groupId>
        <artifactId>jboss-servlet-api_3.0_spec</artifactId>
        <version>1.0.2.Final</version>
    </dependency>
    <dependency>
        <groupId>javax.annotation</groupId>
        <artifactId>jsr250-api</artifactId>
        <version>1.0</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjweaver</artifactId>
        <version>1.7.0</version>
    </dependency>
    <dependency>
        <groupId>commons-beanutils</groupId>
        <artifactId>commons-beanutils</artifactId>
        <version>1.8.3</version>
    </dependency>
    <dependency>
        <groupId>commons-lang</groupId>
        <artifactId>commons-lang</artifactId>
        <version>2.6</version>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.17</version>
    </dependency>
</dependencies> 
```

问题是，一旦我添加了安全依赖项，我就会得到异常。它与上下文有关，但我不确定。任何指针都会有所帮助。

谢谢，阿米特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:33:44.543

您的一些 Spring 依赖项具有`3.1.1.RELEASE`其他版本的版本`3.1.2.RELEASE`或`3.1.3.RELEASE`. 始终使用相同的 Spring 版本。您应该在 maven pom 中定义一个`spring.version`属性，而不是手动输入值。

检查你的应用程序运行的类路径（例如运行测试`mvn -X`）并确保没有不一致，例如不同的 Spring jar 版本或具有不同版本号的重复 jar。

# redirect - 浏览器限制会影响网络爬虫吗？

> ID：15008889
> 
> 赞同：0
> 
> 时间：2013-02-21T17:45:42.413
> 
> 标签：redirect, asp.net-mvc-4, web-crawler

我正在使用正常模式和不推荐使用的浏览器模式创建站点，如果有人进入 www.mysite.com，他的用户代理会通过以下方式：

```
 // Mobile
            if (Request.Browser.IsMobileDevice) return Redirect("/m");

            // Tabļet
            if (Request.UserAgent.Contains("BlackBerry") || (Request.UserAgent.Contains("iPhone") || (Request.UserAgent.Contains("Android")))) return Redirect("/t");

            // Deprecated
            if (Request.Browser.Browser == "IE" && Convert.ToInt32(Request.Browser.Version) < 9) return Redirect("/h");

            // Normaļ
            return View(); 
```

**问题：**如果我限制某些浏览器访问我的主视图，是否也会限制对网络爬虫的访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:52:57.060

取决于爬虫。通常所有主要的爬虫，如谷歌等，只要尊重 robots.txt，其余的都应该是可爬取的。除非有人编写了一个池化编码的爬虫，否则它不会影响您的网站爬取。您还可以尝试使用 nutch 开源网络爬虫来爬取您自己的网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T04:32:56.153

我写了一个简单的网络爬虫来爬取麦当劳的网站。爬虫每次抓取的都是移动网页。因此，对于简单的爬虫，您的设置将限制访问。但是主要的网络爬虫没有这个问题。

# java - 最长公共子序列差

> ID：15008894
> 
> 赞同：0
> 
> 时间：2013-02-21T17:46:07.103
> 
> 标签：java

我有一个用 Java 编写的程序，必须做两件事，找到最长的公共子序列并对齐公共字符。LCS 工作得很好，但对齐部分只是循环走开或什么也不做。

我尝试做我在维基百科上找到的这个算法

```
function printDiff(C[0..m,0..n], X[1..m], Y[1..n], i, j)
if i > 0 and j > 0 and X[i] = Y[j]
    printDiff(C, X, Y, i-1, j-1)
    print "  " + X[i]
else if j > 0 and (i = 0 or C[i,j-1] ≥ C[i-1,j])
    printDiff(C, X, Y, i, j-1)
    print "+ " + Y[j]
else if i > 0 and (j = 0 or C[i,j-1] < C[i-1,j])
    printDiff(C, X, Y, i-1, j)
    print "- " + X[i]
else
    print "" 
```

这是我写的代码（我删除了 LCS 部分）

```
static char[] input1 = "ABCDE".toCharArray();
static char[] input2 = "ACDC".toCharArray();
static int M = input1.length;
static int N = input2.length;
static int[][] opt = new int[M + 1][N + 1];

public static void printDiff(int opt[][], char input1[], char input2[]) {
    int i = 0, j = 0;
    while (i < input1.length && j < input2.length) {
    if (i > 0 && j > 0 && input1[i] == input2[j]) {
        System.out.print("  " + input1[i]);
        i++;
        j++;
    } else if (j > 0 && (i == 0 || opt[i][j - 1] >= opt[i - 1][j])) {
        System.out.print("+ " + input2[j]);
        j++;
    } else if (i > 0 && (j == 0 || opt[i][j - 1] < opt[i - 1][j])) {
        System.out.print("- " + input1[i]);
        i++;
    } else {
        System.out.print("");

    }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:19:30.063

我重写了您的代码以使用[Wikipedia 算法](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)。换句话说，我使用了递归而不是 where 子句。我不得不更改其中一个 if 条件，因为 Java 是基于零索引的，而 Wikipedia 算法是基于一个索引的。

我必须重新添加 LCS 函数，以便我可以计算`int[][]opt`.

我在 if 语句中添加了括号，以确保操作按照我希望它们完成的顺序完成。

我还修复了输出。维基百科算法有`"+ "`和`"- "`作为输出。这似乎是一个错字。输出应分别为`" +"`和`" -"`。

这是我的代码版本。

```
public class PrintDiff {

    char[]  input1  = "ABCDE".toCharArray();
    char[]  input2  = "ACDC".toCharArray();
    int     M       = input1.length;
    int     N       = input2.length;

    public void run() {
        int[][] opt = lcsLength(input1, input2);
        printDiff(opt, input1, input2, M - 1, N - 1);
    }

    public int[][] lcsLength(char[] input1, char[] input2) {
        int[][] opt = new int[M][N];
        for (int i = 1; i < input1.length; i++) {
            for (int j = 1; j < input2.length; j++) {
                if (input1[i] == input2[j]) {
                    opt[i][j] = opt[i - 1][j - 1] + 1;
                } else {
                    opt[i][j] = Math.max(opt[i][j - 1], opt[i - 1][j]);
                }
            }
        }
        return opt;
    }

    public void printDiff(int opt[][], char input1[], char input2[], int i,
            int j) {
        if ((i >= 0) && (j >= 0) && (input1[i] == input2[j])) {
            printDiff(opt, input1, input2, i - 1, j - 1);
            System.out.print("  " + input1[i]);
        } else if ((j > 0) && ((i == 0) || (opt[i][j - 1] >= opt[i - 1][j]))) {
            printDiff(opt, input1, input2, i, j - 1);
            System.out.print(" +" + input2[j]);
        } else if ((i > 0) && ((j == 0) || (opt[i][j - 1] < opt[i - 1][j]))) {
            printDiff(opt, input1, input2, i - 1, j);
            System.out.print(" -" + input1[i]);
        } else {
            System.out.print("");
        }
    }

    public static void main(String[] args) {
        new PrintDiff().run();
    }

} 
```

这是我的输出。

```
 A -B  C  D -E +C 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-30T17:10:29.287

这是一个返回所有最长公共子序列的差异的版本（基本上使用缓存表回溯 - 类似于获取所有最长公共子序列中[所有最长](https://stackoverflow.com/questions/7369025/all-longest-common-subsequences/25036245#25036245)公共子序列的方法）（或者，您可以参考我的博客@ ：[http](http://codingworkout.blogspot.com/2014/07/longest-common-subsequence.html) ://codingworkout.blogspot.com/2014/07/longest-common-subsequence.html ）

例如，对于 GAC 和 AGCAT，它返回 => { { "[G][A]C", "[G]A[C]", "G[A][C]" }, {"A[G ]C[A]T", "A[G][C]AT", "[A]G[C]AT"} 其中 GA、GC 和 AC 是最长公共子序列...

```
string[][] GetDiffs(string A, string B, int aIndex, int bIndex,
            int[][] DP_LCS_AllPrefixes_Cache)
        {
            if((aIndex == 0) && (bIndex ==0))
            {
                return null;
            }
            if (DP_LCS_AllPrefixes_Cache[aIndex][bIndex] == 0)
            {
                var r = new string[2][];
                r[0] = new string[] { A.Substring(0, aIndex) };
                r[1] = new string[] { B.Substring(0, bIndex) };
                return r;
            }
            if (A[aIndex - 1] == B[bIndex - 1])
            {
                var r = this.GetDiffs(A, B, aIndex - 1, bIndex - 1,
                    DP_LCS_AllPrefixes_Cache);
                string ch = string.Format("[{0}]", A[aIndex - 1]);
                if (r == null)
                {
                    r = new string[2][];
                    r[0] = new string[] { ch };
                    r[1] = new string[] { ch };
                }
                else
                {
                    r[0] = r[0].Select(s => s + ch).ToArray();
                    r[1] = r[1].Select(s => s + ch).ToArray();
                }
                return r;
            }
            int lcs_up_direction = DP_LCS_AllPrefixes_Cache[aIndex - 1][bIndex];
            int lcs_left_direction = DP_LCS_AllPrefixes_Cache[aIndex][bIndex - 1];
            string[][] lcs_up = null, lcs_left = null;
            if (lcs_up_direction == lcs_left_direction)
            {
                lcs_up = this.GetDiffs(A, B, aIndex - 1, bIndex,
                    DP_LCS_AllPrefixes_Cache);
                lcs_left = this.GetDiffs(A, B, aIndex, bIndex - 1,
                    DP_LCS_AllPrefixes_Cache);
            }
            else if (lcs_up_direction > lcs_left_direction)
            {
                lcs_up = this.GetDiffs(A, B, aIndex - 1, bIndex,
                    DP_LCS_AllPrefixes_Cache);
            }
            else
            {
                lcs_left = this.GetDiffs(A, B, aIndex, bIndex - 1, DP_LCS_AllPrefixes_Cache);
            }
            char a = A[aIndex - 1], b = B[bIndex - 1];
            string[][] rl = new string[2][];
            rl[0] = new string[0];
            rl[1] = new string[0];
            if(lcs_up != null)
            {
                //we moved upward, that is we accepted that they differ with 'A' at aIndex-1 (a)
                rl[0] = lcs_up[0].Select(s => s + a.ToString()).ToArray();
                rl[1] = lcs_up[1];
            }
            if (lcs_left != null)
            {
                //we moved left, that is we accepted that they differ with 'B' at bIndex-1 (b)
                rl[0] = rl[0].Union(lcs_left[0]).ToArray(); ;
                rl[1] = rl[1].Union(lcs_left[1].Select(s => s + b.ToString())).ToArray();
            }
            return rl.ToArray();
        } 
```

**来电者在哪里**

```
string[][] GetDiffs(string A, string B, int[][] DP_LCS_AllPrefixes_Cache)
        {
            var r = this.GetDiffs(A, B, A.Length, B.Length,
                DP_LCS_AllPrefixes_Cache);
            return r;
        } 
```

**以及捕获 LCS 长度以回溯的 DP 方法**

```
public int[][] LCS_OfAllPrefixes_Length(string A, string B)
        {
            A.ThrowIfNullOrWhiteSpace("a");
            B.ThrowIfNullOrWhiteSpace("b");
            int[][] DP_LCS_AllPrefixes_Cache = new int[A.Length+1][];
            for(int i = 0;i<DP_LCS_AllPrefixes_Cache.Length; i++)
            {
                DP_LCS_AllPrefixes_Cache[i] = new int[B.Length + 1];
            }
            for (int rowIndexOfCache = 1; rowIndexOfCache <= A.Length; rowIndexOfCache++)
            {
                for (int columnIndexOfCache = 1; columnIndexOfCache <= B.Length; columnIndexOfCache++)
                {
                     //LCS(Ai, Bj) = 0 if i <=0, or j <= 0
                     //              LCS(Ai, Bj) + 1 if Ai == Bj
                     //              Max(LCS(Ai-1, Bj), LCS(Ai, Bj-1))
                    if(A[rowIndexOfCache-1] == B[columnIndexOfCache-1])
                    {
                        DP_LCS_AllPrefixes_Cache[rowIndexOfCache][columnIndexOfCache] = DP_LCS_AllPrefixes_Cache[rowIndexOfCache - 1][columnIndexOfCache - 1] + 1;
                    }
                    else
                    {
                        DP_LCS_AllPrefixes_Cache[rowIndexOfCache][columnIndexOfCache] = Utilities.Max(DP_LCS_AllPrefixes_Cache[rowIndexOfCache - 1][columnIndexOfCache],
                            DP_LCS_AllPrefixes_Cache[rowIndexOfCache][columnIndexOfCache - 1]);
                    }
                }
            }
            return DP_LCS_AllPrefixes_Cache;
        } 
```

**测试方法**

```
[TestMethod]
        public void LCS_Tests()
        {
            string A = "GAC", B = "AGCAT";
            var DP_LCS_AllPrefixes_Cache = this.LCS_OfAllPrefixes_Length(A, B);
            Assert.IsTrue(DP_LCS_AllPrefixes_Cache[A.Length][B.Length] == 2);
            var lcs_sequences = this.GetLongestCommonSubsequences(A, B, DP_LCS_AllPrefixes_Cache);
            Assert.IsNotNull(lcs_sequences);
            var diffs = this.GetDiffs(A, B, DP_LCS_AllPrefixes_Cache);
            Assert.IsNotNull(diffs);
            Assert.IsTrue(diffs.Length == 2);
            Assert.IsTrue(diffs[0].Length == lcs_sequences.Length);
            Assert.IsTrue(diffs[1].Length == lcs_sequences.Length);
            Assert.IsTrue(lcs_sequences.Any(s => "AC".Equals(s)));
            Assert.IsTrue(lcs_sequences.Any(s => "GC".Equals(s)));
            Assert.IsTrue(lcs_sequences.Any(s => "GA".Equals(s)));
            var DP_LCS_AllPrefixes_Subsequences_Cache = this.LCS_OfAllPrefixes_Subsequences(A, B);
            Assert.IsTrue(DP_LCS_AllPrefixes_Subsequences_Cache[A.Length][B.Length].Length == 2);
            Assert.IsTrue(DP_LCS_AllPrefixes_Subsequences_Cache[A.Length][B.Length].Subsequences
               .Any(s => "AC".Equals(s)));
            Assert.IsTrue(DP_LCS_AllPrefixes_Subsequences_Cache[A.Length][B.Length].Subsequences
                .Any(s => "GC".Equals(s)));
            Assert.IsTrue(DP_LCS_AllPrefixes_Subsequences_Cache[A.Length][B.Length].Subsequences
                .Any(s => "GA".Equals(s)));
            A = "ABCDGH"; B = "AEDFHR";
            DP_LCS_AllPrefixes_Cache = this.LCS_OfAllPrefixes_Length(A, B);
            Assert.IsTrue(DP_LCS_AllPrefixes_Cache[A.Length][B.Length] == 3);
            lcs_sequences = this.GetLongestCommonSubsequences(A, B, DP_LCS_AllPrefixes_Cache);
            Assert.IsNotNull(lcs_sequences);
            diffs = this.GetDiffs(A, B, DP_LCS_AllPrefixes_Cache);
            Assert.IsNotNull(diffs);
            Assert.IsTrue(diffs.Length == 2);
            Assert.IsTrue(diffs[0].Length == lcs_sequences.Length);
            Assert.IsTrue(diffs[1].Length == lcs_sequences.Length);
            Assert.IsTrue(lcs_sequences.Any(s => "ADH".Equals(s)));
            DP_LCS_AllPrefixes_Subsequences_Cache = this.LCS_OfAllPrefixes_Subsequences(A, B);
            Assert.IsTrue(DP_LCS_AllPrefixes_Subsequences_Cache[A.Length][B.Length].Length == 3);
            Assert.IsTrue(DP_LCS_AllPrefixes_Subsequences_Cache[A.Length][B.Length].Subsequences
                .Any(s => "ADH".Equals(s)));
            A = "AGGTAB"; B = "GXTXAYB";
            DP_LCS_AllPrefixes_Cache = this.LCS_OfAllPrefixes_Length(A, B);
            Assert.IsTrue(DP_LCS_AllPrefixes_Cache[A.Length][B.Length] == 4);
            lcs_sequences = this.GetLongestCommonSubsequences(A, B, DP_LCS_AllPrefixes_Cache);
            Assert.IsNotNull(lcs_sequences);
            diffs = this.GetDiffs(A, B, DP_LCS_AllPrefixes_Cache);
            Assert.IsNotNull(diffs);
            Assert.IsTrue(diffs.Length == 2);
            Assert.IsTrue(diffs[0].Length == 2);
            Assert.IsTrue(diffs[1].Length == lcs_sequences.Length);
            Assert.IsTrue(lcs_sequences.Any(s => "GTAB".Equals(s)));
            DP_LCS_AllPrefixes_Subsequences_Cache = this.LCS_OfAllPrefixes_Subsequences(A, B);
            Assert.IsTrue(DP_LCS_AllPrefixes_Subsequences_Cache[A.Length][B.Length].Length == 4);
            Assert.IsTrue(DP_LCS_AllPrefixes_Subsequences_Cache[A.Length][B.Length].Subsequences
                .Any(s => "GTAB".Equals(s)));
            A = "ABCDEF"; B = "UVWXYZ";
            DP_LCS_AllPrefixes_Cache = this.LCS_OfAllPrefixes_Length(A, B);
            Assert.IsTrue(DP_LCS_AllPrefixes_Cache[A.Length][B.Length] == 0);
            lcs_sequences = this.GetLongestCommonSubsequences(A, B, DP_LCS_AllPrefixes_Cache);
            diffs = this.GetDiffs(A, B, DP_LCS_AllPrefixes_Cache);
            Assert.IsNotNull(diffs);
            Assert.IsTrue(diffs.Length == 2);
            Assert.IsTrue(diffs[0].Length == 1);
            Assert.IsTrue(diffs[1].Length == 1);
        } 
```

# javascript - 如何在 ASP.NET 中使用 Javascript 返回上一页

> ID：15008897
> 
> 赞同：1
> 
> 时间：2013-02-21T17:46:12.227
> 
> 标签：javascript, asp.net, back

我有以下情况：

我的页面中有以下脚本：

```
function GoBackToPreviousPage () {           
   parent.history.back();
   return false;
} 
```

在后面的代码中，我有以下内容

```
If (some conditions are met)
  Page.ClientScript.RegisterStartupScript(this.GetType(), "GoBackToPreviousPage", "GoBackToPreviousPage();", true); 
```

如果满足条件，我希望页面返回上一页，我在 javascript 中而不是在服务器上执行此操作的原因是因为 (parent.history.back();) 维护所有以前的历史页面

我注意到在执行 RegisterStartupScript 并且回发发生后，脚本被执行但它停留在同一页面上，它不会回到上一页

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T18:14:48.910

该问题是由执行 javascript 函数之前发生的 PostBack 引起的。单击按钮，当前页面将保存在浏览器历史记录中。因此，当页面重新加载并执行脚本时，您在同一页面中。所以，一个不那么漂亮的解决方案是回到历史的两页：

```
function GoBackToPreviousPage() {
    window.history.go(-2);
    return false;
} 
```

# c++ - 读取超过 127 个 ASCII 值时 C++ cin 失败

> ID：15008907
> 
> 赞同：6
> 
> 时间：2013-02-21T17:46:53.610
> 
> 标签：c++, character-encoding, cin

我创建了一个包含 256 个字符的文本文件，文本文件的第一个字符是 ASCII 值 0，文本值的最后一个字符是 ASCII 值 255。介于 0 到 255 之间的字符均匀递增。所以字符 #27 是 ASCII 值 27。字符 #148 应该是 ASCII 值 148。

我的目标是阅读这个文本文件的每个字符。

我试过用`cin`. 我试过`cin.get()`and `cin.read()`，两者都应该读取未格式化的输入。*但是在读取第 26 个字符时都失败了。*我想当我使用 an 时`unsigned char`，`cin`说它正在阅读 read in `255`，这根本不是真的。而当我用正常的签名时`char`，`cin`说是在读`-1`。它应该读取与 ASCII 等效的任何字符`26`。也许`cin`认为它被击中了`EOF`？但我之前读过不同的 StackOverflow 帖子，这`EOF`不是一个可以写的实际字符。所以我不知道为什么`cin`咳嗽代表整数`-1`或整数的字符值`255`. 有人可以告诉我我做错了什么，为什么，最好的解决方案是什么，为什么？

没有太多要粘贴的具体代码。我已经尝试了一些不同的非工作组合，所有这些组合都涉及`cin.get()`or 或`cin.read()`with any `char`or并在两者之间`unsigned char`调用强制转换。我没有运气能够阅读超过第 26 个字符，除了这个：`char``int`

```
unsigned char character;

while ( (character = (unsigned char)cin.get()) != EOF) { ... } 
```

有趣的是，虽然这并没有在第 26 个字符处停止我的 while 循环，但它也没有继续前进。看起来`cin`，无论是它`cin.get()`还是`cin.read()`只是在它检测到它不喜欢的东西时拒绝前进到下一个角色。我也知道`cin.ignore()`存在类似的东西，但我的输入是不可预测的；也就是说，我的文本文件的这 256 个字符只是一个测试用例，真正的输入是相当随机的。这是更大的家庭作业的一部分，但这个特定的问题与作业无关；我只是停留在过程的一部分。

**注意：**我是从标准输入流中读取的，而不是特定的文本文件。似乎仍然没有直接的解决方案。我不敢相信以前没有这样做过`cin`。

**更新：**

在 Windows 上，它可能在字符 26 之后停止，这可能是由于 Ctrl-Z 的原因。我不太关心这个问题。它只需要在 Linux 上工作。

但是，在 Linux 上，它读取 0 到 127 的所有字符。但它似乎没有读取 127 到 255 的扩展 ASCII 字符。有一个“解决方案”程序可以产生我们应该模仿的输出，并且程序能够以某种方式读取所有 255 个字符。

**问题：如何使用`cin`读取所有 255 个 ASCII 字符？**

## 解决了

使用：

```
int characterInt;
unsigned char character;

while ( (characterInt = getchar()) != EOF )
{
            // 'character' now stores values from 0 - 255
    character = (unsigned char)(characterInt);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T17:50:46.847

我想你在窗户上。在 Windows 平台上，字符 26 是 ctrl-z，它在控制台中用于表示文件结尾，因此 iostreams 认为您的文件以该字符结尾。

它仅在 cin 使用的文本模式下执行此操作，如果您以二进制模式打开蒸汽，则不会执行此操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T17:48:42.777

`std::cin`读取文本流，而不是任意二进制数据。

至于为什么第 26 个字符很有趣，您可能正在使用 CP/M 衍生产品（例如 MS-DOS 或 MS-Windows）。在那些操作系统中，Control-Z 用作文本文件中的 EOF 字符。

* * *

**编辑**：在 Linux 上，使用 g++ 4.4.3，以下程序的行为完全符合预期，打印数字 0 到 255，包括：

```
#include <iostream>
#include <iomanip>

int main () {
  int ch;
  while( (ch=std::cin.get()) != std::istream::traits_type::eof() )
    std::cout << ch << " ";
  std::cout << "\n";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T19:53:59.087

这里有两个问题。首先是在 Windows 中，默认模式`cin`是文本而不是二进制，导致某些字符被解释而不是输入到程序中。特别是第 26 个字符 Ctrl-Z 被解释为文件结尾，因为向后兼容性达到了极端。

另一个问题是由于工作方式`cin >>`- 它跳过了空格。这显然包括空格，还包括制表符、换行符等。要从中读取每个字符，`cin`您需要使用[`cin.get()`](http://en.cppreference.com/w/cpp/io/basic_istream/get)or [`cin.read()`](http://en.cppreference.com/w/cpp/io/basic_istream/read)。

# c# - 当只有某些方法需要范围变量时，优雅地解决设置值

> ID：15008910
> 
> 赞同：0
> 
> 时间：2013-02-21T17:46:59.117
> 
> 标签：c#, oop

我有一个采用函数的方法（为了便于阅读而剥离）：

```
private TestEntityContainer CreateTestEntityContainer(string rootName,
        Func<InstallationSummary, DateTime> forceInstallationTimeFunc,
        bool forceInstallEnvironmentShouldMatch, bool freezeAllInstallations, int numberOfInstallationSummariesToCreate)
{   
    // Other code exists above here. Note that we use two variables, appServer and appWithGroup,
    // created earlier in this method, here:
    var mostRecentInstallationSummary = InstallationSummaryLogic.GetMostRecentByServerAppAndGroup(appServer, appWithGroup);

    var forceInstallation = new ForceInstallation();
    // This is where the func is invoked. We need other things, created above, for this to work.
    forceInstallation.ForceInstallationTime = forceInstallationTimeFunc.Invoke(mostRecentInstallationSummary);
    // Do more things with forceInstallation here
} 
```

下面是两个示例调用者，一个使用范围变量：

```
var container = CreateTestEntityContainer("UseCase12", x => x.InstallationStart.AddSeconds(1), true, false, 5); 
```

而一个没有：

```
var container = CreateTestEntityContainer("UseCase10", x => DateTime.Now.AddDays(-1), false, false, 0); 
```

这似乎是一个黑客。有没有更好的方法来解决这个问题，消费者不需要使用在许多情况下不必要的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:52:19.213

看看你的问题，我建议在这里使用方法重载，而不是尝试制作一些漂亮的方法来获得一个适合所有消费者的方法签名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:57:02.750

`Foo`您可以给他们一个能够创建的函数，而不是给函数一个实例`Foo`：

```
private TestEntityContainer CreateContainer(Func<Func<Foo>, DateTime> func) {
  Func<Foo> creator = () => new Foo();
  forceInstallation.ForceInstallationTime = func.Invoke(creator);
} 
```

现在消费者可以`Foo`根据需要创建：

```
var container = CreateContainer(x => x().InstallationStart.AddSeconds(1)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T17:51:52.003

`CreateContainer`您可以使用不带参数的 Func添加重载吗？就像是：

```
private TestEntityContainer CreateContainer(Func<DateTime> func)
{   
    forceInstallation.ForceInstallationTime = func.Invoke();
}

var container = CreateContainer(() => DateTime.Now.AddDays(-1)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T19:04:54.000

老实说，我*不*推荐这样做，但它可能对那些*快速而肮脏*的时刻之一有用。

您可以更改方法签名并添加可选参数：

```
CreateTestEntityContainer(string s, bool forceInstallEnvironmentShouldMatch,
    bool freezeAllInstallations, int numberOfInstallationSummariesToCreate , 
    Func<InstallationSummary, DateTime> f = null) 
```

并且仅在以下情况下使用该功能`f != null`

然后你可以这样称呼它：

```
var firstContainer = CreateTestEntityContainer("UseCase12", true, false, 5,  x => x.InstallationStart.AddSeconds(1));
var secondContainer = CreateTestEntityContainer("UseCase10", false, false, 0); 
```

# jquery - 使用 jQuery 动态定位 CSS 语音气泡的三角形（:before & :after classes）

> ID：15008912
> 
> 赞同：0
> 
> 时间：2013-02-21T17:47:01.723
> 
> 标签：jquery, css, pseudo-element

我创建了一个纯 CSS 语音气泡，其中三角形“语音提示”使用“玩零大小 div 的 4 个边框”技巧完成。到现在为止还挺好。

但我还需要动态调整三角形的位置（相对于包含单词的主要矩形 div）。

图示示例：

[http://www.designwalker.com/img/speech_bubble/speech_bubble10.jpg](http://www.designwalker.com/img/speech_bubble/speech_bubble10.jpg)（忽略色差，第1个和第2个气泡中​​的三角形位置不同）。

问题是三角形（及其边界）通常使用主气泡的 :before 和 :after 类来完成。而且似乎在 jQuery（或任何 javascript API）中没有（简单的）方法来操作 :before 和 :after 类的 CSS 属性。

有解决办法吗？

我很确定这是可以做到的，因为当用户将鼠标悬停在右侧的代码行上时，Facebook 似乎可以轻松地将三角形动态定位在它想要的任何位置（取决于屏幕折叠和其他因素）。

我在这里搜索并找到了将类动态添加到 div 的解决方案，但这似乎不切实际，因为会有许多独特的类，每个类都有不同的偏移值。（从 0 像素到许多像素）

谢谢！

安德鲁

PS：

顺便说一句，我进一步查看了 Facebook，他们可能正在玩一些背景图片精灵技巧。但是我花了很多时间使用“玩零大小 div 的 4 个边框”技巧来“完善”我的气泡，我真的很犹豫重新调查 Facebook 是如何做到的，更不用说我必须交付网站很快...... :-(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T17:49:37.963

伪元素不能被 Javascript 操作，因为它们没有暴露给适当的 DOM（我们曾经将其称为 Shadow DOM，直到该术语指代使用 Javascript 操作隐式 DOM 元素的方法）。

您可以做的是向包含元素添加类，这些类将通过其他规则影响其位置。[在Stubornella](http://www.stubbornella.org/content/)的[OOCSS](https://github.com/stubbornella/oocss)库中有一个[非常相似](https://github.com/stubbornella/oocss/wiki/Talk-Bubbles)的很好的例子（它使用`<b>`元素而不是`:before`实现`:after`IE6 支持——但原理是一样的，因为`<b>`元素从不被操纵并从父元素中推断出它的样式） 。该[代码](https://github.com/stubbornella/oocss/blob/master/plugins/talk/talk.css)信息量很大，因为它显示了父元素上的一个类，该类指示应如何定位子装饰元素。

### 更新：煞费苦心的解释

假设提示本身显示 OK 的方式，编写一个单独的 CSS 规则来为它们定义每个不同的位置。在这里，我使用`left`位置假设`:after`元素正在创建尖端并且已经绝对定位在底部。您可以使用任何您想要的选择器或定位技巧来代替这些。

```
.bubble_left:after {
    left: 0;
}

.bubble_mid-left:after {
    left: 25%;
}

.bubble_mid-right:after {
    left: 75%;
}

.bubble_right:after {
    left: 100%;
} 
```

那么你需要做的就是改变位置，改变'bubble'元素的类——从而避免试图影响`:after`元素的CSS属性的问题。

# php - PHP：使用正则表达式从 IP 地址中删除小数

> ID：15008915
> 
> 赞同：4
> 
> 时间：2013-02-21T17:47:11.070
> 
> 标签：php, mysql, regex

我目前在我的图像站点上有一个喜欢功能，它根据唯一的 $imgids 将用户 IP 存储在数据库中。

IP 当前存储为字符串。为了节省空间，我不想将 IP 存储为带小数点的字符串，而是存储为 32 位整数（每个整数 1 位，字符串中每个字符 1 个字节）。我认为这可以节省大量空间，因为我有可能让 n 个独特的 IP 喜欢 x 个图像......

因此，给定字符串“109.181.156.221”，数字最多为 12 个字节，每个小数点 + 3 个字节……所以 15 个字节 * 5000 个 IP * 10 个图像 ID = 7.1 Mb

与 32 位 109181156221 相比，4 字节 * 5000 IP * 100 图像 ID = 2 Mb

所以，在我插入 IP 之前，我想使用正则表达式来删除小数，然后将 IP 存储为数字......“109.181.156.221”-> 109181156221 我是正则表达式的新手，但我已经试过这个，但它不会工作：

```
$ipINT = preg_replaceAll("\\.+$", "" , $ipString); 
```

所以我的问题是：

> 1) 在 Mysql 数据库中节省空间是否重要？这值得麻烦吗？
> 
> 2）我的正则表达式在哪里？
> 
> 3）如果我想读它，我能把它转换回来吗？

有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T17:50:12.587

您可以使用[ip2long](http://php.net/manual/en/function.ip2long.php) ()，然后它应该适合 unsigned int 列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T19:33:30.663

有不同的方法可以做到这一点：

## 正确的方式：

通过让数据库为您进行转换。您必须将 ip 存储在数据库中`INT(10) UNSIGNED`并使用[INET_ATON](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_inet-aton)和[INET_NTOA](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_inet-ntoa)：

```
SELECT INET_ATON("109.181.156.221"); // result 1840618717
SELECT INET_NTOA("1840618717"); // result 109.181.156.221 
```

## 另一种方法：

通过使用 PHP 内部函数[ip2long()](http://php.net/manual/en/function.ip2long.php) & [long2ip()](http://www.php.net/manual/en/function.long2ip.php)然后将其存储在数据库中：

```
$ipINT = ip2long('109.181.156.221'); // result 1840618717
$ip = long2ip('1840618717'); // result 109.181.156.221 
```

## 非标准方式：

通过删除点并在需要时添加“0”以便能够将其转换回来：

```
function ip2int($ip){
  $chunks = explode(".", $ip);
  $int = '';
  foreach($chunks as $chunk){
    $int .= str_pad($chunk, 3, '0', STR_PAD_LEFT);
  }
  return $int;
}

function int2ip($int){
  $chunks = str_split($int, 3);
  $c = count($chunks);
  $ip = ltrim($chunks[0], '0');
  for($i=1;$i<$c;$i++){
    $ip .= '.' . ltrim($chunks[$i], '0');
  }
  return($ip);
}

echo ip2int("109.1.156.5") . '<br>'; // result 109001156005
echo int2ip("109001156005"); // result 109.1.156.5 
```

## 修复你的正则表达式：

```
$ip = "109.181.156.221";
$replace = preg_replace("/\./", "", $ip); // This will remove all the dots
echo $replace; // result 109181156221 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T17:51:15.527

使用该`ip2long()`功能存储 IP 地址 - Unsigned INT(10) 应该很棒。

用于`long2ip()`解码。

[http://php.net/manual/en/function.ip2long.php](http://php.net/manual/en/function.ip2long.php)

您的解决方案不适用于像 1.123.123.123 这样的 IP 地址，因为您不知道在哪里恢复小数点。存储 IP 地址的正确方法是使用上述方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T17:55:09.443

如果您只想提取不需要正则表达式的数字，您可以使用：

```
filter_var('109.181.156.221', FILTER_SANITIZE_NUMBER_INT); 
```

会给你**109181156221**

但我认为您无法将其转换回 IP 形式。

我会用点存储它。

# c - 在mac桌面11db错误上读取c中的文件

> ID：15008917
> 
> 赞同：0
> 
> 时间：2013-02-21T17:47:17.247
> 
> 标签：c, xcode, macos, file

我是第一次学习C的学生。我输入了教授给课程的示例，该示例应该从名为“input.txt”的文件中读取一些整数。

这是代码：

```
#include <stdio.h>

int main() {
    FILE *ifp;
    int num = -1, sum = 0;

    ifp = fopen("input.txt", "r");
    while (num!= 0) {
        fscanf(ifp, "%d", &num);
        sum +=num;
    }
    fclose(ifp);
    printf("The sum is %d.\n", sum);
    return 0;
} 
```

我试图让这个程序打印出它应该的“总和”，但是当我运行它时，没有错误，但我得到的唯一输出是（11db）。

我创建了一个名为“input.txt”的文件并将其保存到桌面，但它不起作用。

文件“input.txt”包含：

1 2 3 4 5

我不知道我是否应该以某种方式在某个地方定义文件路径或在哪里/如何执行此操作。

任何帮助深表感谢。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:03:51.413

我的猜测是错误是因为打开文件失败。您应该检查 fopen 返回非 NULL。打开文件是一个经常失败的操作。例如：

```
ifp = fopen("input.txt", "r");
if (ifp == NULL) {
    fprintf(stderr, "Couldn't open the file for reading.\n");
} 
```

除非给出以“/”开头的完整路径名，否则 fopen 会在进程的当前工作目录中打开文件，而这可能不是桌面。

此外，当您到达文件末尾时， fscanf 将返回值 EOF。变量**num**不会设置为零*。*这是一种读取整数文件的方法：

```
while (fscanf(ifp, "%d", &num) == 1) {
    sum += num;
} 
```

# ios - iScroll4，iPad，固定元素。如何将元素附加到顶部。包含示例

> ID：15008918
> 
> 赞同：0
> 
> 时间：2013-02-21T17:47:21.053
> 
> 标签：ios, css, html, css-position, iscroll

我正在使用 iScroll4 制作一个网站（因为在 iOS 设备上滚动时我需要动画），并且在某些时候，元素变得固定，但它不适用于 iScroll4，或者我做错了什么。

所以，我为 translateY 使用了 jQuery 传输，我只是在实际滚动位置移动元素，但这使我的元素闪烁。

看（向下滚动一点）[http://danielsitarz.pl/tests/iwanttobefixed/](http://danielsitarz.pl/tests/iwanttobefixed/)

我需要帮助，也许有人知道如何使 position:fixed 工作或使 translateY 更流畅。

在台式机上我不使用 iScroll4，但我在 iPad 等上需要它。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:58:11.490

好的，经过多次乘坐公共汽车上班后，我找到了答案。

只需将元素扔到 iScroll 包装器之外，然后为他设置固定位置。

像那样：

```
$('#wrapper').after(elementThatWantsToBeFixed);
$(elementThatWantsToBeFixed).css({position: 'fixed'}); 
```

# java - AKKA：演员路由器消息持久性

> ID：15008921
> 
> 赞同：0
> 
> 时间：2013-02-21T17:47:28.193
> 
> 标签：java, scala, playframework-2.0, akka, typesafe-stack

我正在编写一个 webspider 并将其分配到 Heroku 上，在主要参与者（分配路由器的那个）达到 512Mb 之后它崩溃了。

基本上每个解析的 URL 都会发送到 FetchRouter。队列的消息列表太大而无法进入内存。

有没有办法将此列表存储在磁盘中？

```
fetcherRouter = context.actorOf(Props[URLFetcher].withRouter(RandomRouter(30)), name = "fetcherRouter") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:23:36.190

确实。

有`FileBasedMailbox`。查看 Akka 2.0.x PDF（或相应网页）的第 7.1 节“持久邮箱”。

# android - 无法设置额外空间

> ID：15008923
> 
> 赞同：0
> 
> 时间：2013-02-21T17:47:30.320
> 
> 标签：android, android-layout

我无法在我的 activity_main.xml 中的两个按钮的底部设置额外的空间这是我的 activity_main.xml 代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/main_bg_edited"
tools:context=".MainActivity" >

<RelativeLayout
    android:id="@+id/relativeLayout1"
    style="@style/top_bar_style">

    <TextView
        android:id="@+id/textViewMain"
        style="@style/page_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />

    <ImageView
        android:id="@+id/imageViewMainDelete"
        android:layout_width="25dp"
        android:layout_height="25dp"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:clickable="true"
        android:src="@drawable/delete" />

</RelativeLayout>

<RelativeLayout
    android:id="@+id/relativeLayout2"
    android:layout_width="290dp"
    android:layout_height="wrap_content"
    android:layout_below="@+id/relativeLayout1"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="12dp"
    android:background="@drawable/box_midbg" >

    <EditText
        android:id="@+id/main_editText_category_name"
        android:layout_width="200dp"
        android:layout_height="40dp"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginRight="7dp"
        android:layout_marginTop="15dp" >
    </EditText>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/main_editText_category_name"
        android:layout_alignBottom="@+id/main_editText_category_name"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="7dp"
        android:textColor="#ffffff"
        android:text="Name:"
        android:textSize="18dp" />

    <EditText
        android:id="@+id/main_editText_unit"
        android:layout_width="200dp"
        android:layout_height="40dp"
        android:inputType="number"
        android:layout_alignLeft="@+id/main_editText_category_name"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/main_editText_category_name"
        android:layout_marginRight="7dp"
        android:layout_marginTop="5dp" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/main_editText_unit"
        android:layout_alignBottom="@+id/main_editText_unit"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="7dp"
        android:textColor="#ffffff"
        android:textSize="18dp"
        android:text="Unit:" />

    <EditText
        android:id="@+id/main_editText_attribute"
        android:layout_width="200dp"
        android:layout_height="40dp"
        android:layout_alignLeft="@+id/main_editText_unit"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/main_editText_unit"
        android:layout_marginRight="7dp"
        android:layout_marginTop="5dp" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/main_editText_attribute"
        android:layout_alignBottom="@+id/main_editText_attribute"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="7dp"
        android:textSize="18dp"
        android:textColor="#ffffff"
        android:text="Attribute:" />

    <EditText
        android:id="@+id/main_editText_limit"
        android:layout_width="200dp"
        android:layout_height="40dp"
        android:layout_alignLeft="@+id/main_editText_attribute"
        android:layout_alignParentRight="true"
        android:inputType="number"
        android:layout_below="@+id/main_editText_attribute"
        android:layout_marginRight="7dp"
        android:layout_marginTop="5dp" />

    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/main_editText_limit"
        android:layout_alignBottom="@+id/main_editText_limit"
        android:layout_alignParentLeft="true"
        android:textColor="#ffffff"
        android:textSize="18dp"
        android:layout_marginLeft="7dp"
        android:text="Limit:" />

    <Button
        android:id="@+id/main_button_save"
        android:layout_width="90dp"
        android:layout_height="35dp"
        android:layout_alignLeft="@+id/main_editText_limit"
        android:layout_below="@+id/main_editText_limit"
        android:layout_marginTop="15dp"
        android:layout_marginLeft="2dp"
        android:background="@drawable/save_btn"
        android:textSize="18dp"
        android:textStyle="bold"
        android:typeface="sans"
        android:layout_marginBottom="15dp"
        android:text="Save" />

    <Button
        android:id="@+id/main_button_cancel"
        android:layout_width="90dp"
        android:layout_height="35dp"
        android:layout_alignBaseline="@+id/main_button_save"
        android:layout_alignBottom="@+id/main_button_save"
        android:layout_alignRight="@+id/main_editText_limit"
        android:background="@drawable/save_btn"
        android:text="Cancel"
        android:textSize="18dp"
        android:textStyle="bold"
        android:layout_marginBottom="15dp"
        android:typeface="sans" />

</RelativeLayout> 
```

在按钮标签中，即使我使用**android:layout_marginBottom="100dp"**或**android:layout_paddingBottom="100dp"**，在任何一种情况下，我的布局都没有变化。按钮仍然在内部相对布局的底部。

请帮我解决这个问题。请向我解释（如果可能，请详细解释）为什么会发生这种情况。这是我第三次被间距问题所困扰。以前，我过去常常使用**layout_margin**或**layout_padding**（进行试错法）。但是现在，即使这样也行不通。帮我解释一下，当这种情况出现时该怎么办。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:51:10.170

而不是`android:layout_padding`用来`android:paddingBottom="100dp"`看看这是否有所作为。

这是文档的链接：http: [//developer.android.com/reference/android/view/View.html#attr_android :paddingBottom](http://developer.android.com/reference/android/view/View.html#attr_android:paddingBottom)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:54:02.547

您可以添加属性

```
android:paddingBottom="100dp" 
```

到您的 RelativeLayout ( `relativeLayout2`)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T17:55:39.113

PAdding 为按钮或任何东西提供内部间距，而 margin 提供外部间距。因此，将 android :layout_marginBottom 添加到您的 Relativelayout2

# c++ - 读取二进制整数

> ID：15008925
> 
> 赞同：8
> 
> 时间：2013-02-21T17:47:43.933
> 
> 标签：c++, c++11

```
const unsigned char* p;
int64_t u = ...; // ?? 
```

从 p 指向的 8 个字节中读取 64 位二进制小端整数的推荐方法是什么？在 x64 上应该执行一条机器指令，但在大端硬件上需要交换。如何以最佳方式和便携方式做到这一点？

Carl 的解决方案很好，足够便携，但不是最优的。这就引出了一个问题：为什么 C/C++ 不提供更好和标准化的方法来做到这一点？这不是一个不常见的结构。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T17:54:07.083

常见的：

```
u = (int64_t)(((uint64_t)p[0] <<  0)
  + ((uint64_t)p[1] <<  8)
  + ((uint64_t)p[2] << 16)
  + ((uint64_t)p[3] << 24)
  + ((uint64_t)p[4] << 32)
  + ((uint64_t)p[5] << 40)
  + ((uint64_t)p[6] << 48)
  + ((uint64_t)p[7] << 56)); 
```

几乎是城里唯一的便携性游戏——否则很难避免潜在的对齐问题。

这个答案确实假设一个 8-bit `char`。如果您可能需要支持不同大小`char`的 s，则需要一个预处理器定义来检查 CHAR_BIT 并为每个定义做正确的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T17:56:55.727

Carl Norum 是对的——如果你也想可读，你可以写一个循环（编译器无论如何都会展开它）。这也将很好地处理非 8-bit `char`s。

```
u = 0;
const int n = 64 / CHAR_BIT + !!(64 % CHAR_BIT);
for (int i = 0; i < n; i++) {
    u += (uint64_t)p[i] << (i * CHAR_BIT);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T18:01:47.450

I used the following code to reverse the byte order for any variable. I used it to convert between different "Endianess".

```
// Reverses the order of bytes in the specified data
void ReverseBytes(LPBYTE pData, int nSize)
{
    int i, j;

    for (i = 0, j = nSize - 1; i < j; i++, j--)
    {
        BYTE nTemp = pData[i];
        pData[i] = pData[j];
        pData[j] = nTemp;
    }
} 
```

# sql - 编写特定的 SQL 查询

> ID：15008926
> 
> 赞同：0
> 
> 时间：2013-02-21T17:47:44.203
> 
> 标签：sql

我有一个数据库，可以保存调查中的数据，一个人可以进行一两次调查，而且不超过一次。我有一个专栏`DATE`，我想通过它获得所有人的第一次调查（而不是第二次调查）。

例如，拥有 EMAIL 的人在12 月 29 日和 30 日进行`shane@gmail.com`了调查。`DATE`同样的方式，EMAIL 的人在 11 月1 日和 12 月 28 日`mike@gmail.com`进行了调查。`DATE`

我想获得两个人的第一次调查记录。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:54:35.153

如果没有模式，很难猜测您需要什么。但如果它像包含电子邮件和调查日期的表格一样简单，它可能是这样的：

```
select email, survey_date
from myTable
group by email
order by survey_date asc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:04:39.870

您可以与自己交叉桌子

```
select * from table t1 join table t2
on t1.email = t2.email 
and t1.surveydate < t2.surveydate 
```

PS：如果您的数据库引擎支持，您可以使用“WITH”子句优化查询。只要您公开的每封电子邮件只有 2 条记录，此查询就可以正常工作

# javascript - 使用 CSS/JS 的动画发光边框？

> ID：15008931
> 
> 赞同：13
> 
> 时间：2013-02-21T17:47:50.007
> 
> 标签：javascript, css

是否可以使用 JS 自动连续更改特定的 CSS 属性？

我想创建发光的边框，其发光不断地变亮和变暗（使用 3 个属性来实现这种效果 - 边框、框阴影、插入框阴影）。我该怎么做？

请注意，我不是在谈论使用“悬停”或“活动”状态。如果可能的话，我还希望它可以在所有浏览器中工作。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-12-02T13:27:18.973

为纯 CSS 解决方案操作上述答案

```
@-webkit-keyframes glow {
    to {
         border-color: #69c800;
    -webkit-box-shadow: 0 0 5px #69c800;
       -moz-box-shadow: 0 0 5px #69c800;
            box-shadow: 0 0 5px #69c800;
    }
}

.myGlower {
    background-color: #ccc;
    border: 1px solid transparent;
    -webkit-animation: glow 1.0s infinite alternate;  
     -webkit-transition: border 1.0s linear, box-shadow 1.0s linear;
       -moz-transition: border 1.0s linear, box-shadow 1.0s linear;
            transition: border 1.0s linear, box-shadow 1.0s linear;
    width: 100px;
    height: 100px;
    margin: 50px;
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-21T17:52:23.020

如果这必须是 JS 解决方案，那么以下内容将为您工作。

CSS：

```
#myGlower {
    background-color: #ccc;
    border: 1px solid transparent;    
    -webkit-transition: border 0.1s linear, box-shadow 0.1s linear;
       -moz-transition: border 0.1s linear, box-shadow 0.1s linear;
            transition: border 0.1s linear, box-shadow 0.1s linear;
}

#myGlower.active {
    border-color: blue;
    -webkit-box-shadow: 0 0 5px blue;
       -moz-box-shadow: 0 0 5px blue;
            box-shadow: 0 0 5px blue;
} 
```

然后使用jQuery：

```
$(function() {  
    var glower = $('#myGlower');
    window.setInterval(function() {  
        glower.toggleClass('active');
    }, 1000);
}); 
```

你可以在这里看到一个[**jsFiddle**](http://jsfiddle.net/7xvGp/)。虽然这可以使用 JS 实现，但您也可以使用 CSS3 动画。

此外，您将无法让它在**所有**浏览器中工作，因为并非所有浏览器都支持您提到的 CSS 属性（过渡、框阴影等）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-19T22:37:13.477

我想在两个方面修改 BenM 接受的答案。第一个是为像我这样从问题中期望 JS 而不是 JQUery 的人提供纯 JavaScript 答案。第二个是提供更平滑的动画发光，没有示例中的抖动。

更平滑的动画需要进行两项更改：边框应该是 0px，而不是 1px，并且过渡应该在两个类上，活动和默认（我已将其指定为“被动”）。此外，使用扩展大小的值和较长的过渡时间会产生更微妙的效果。我认为不需要在边界上进行过渡。

```
#myGlower.passive 
{
    border: 0px solid transparent;    
    -webkit-transition: box-shadow 2s linear;
    -moz-transition: box-shadow 2s linear;
    transition: box-shadow 2s linear;
}

#myGlower.active 
{
    border-color: blue;
    -webkit-box-shadow: 0 0 10px 10px blue;
    -moz-box-shadow: 0 0 10px 1px blue;
    box-shadow: 0 0 10px 10px blue;
    /* in order: x offset, y offset, [blur size], [spread size], color */
    -webkit-transition: box-shadow 2s linear;
    -moz-transition: box-shadow 2s linear;
    transition: box-shadow 2s linear;
} 
```

对于我的动画，我希望允许用户将动画设置为在设定的周期数后停止，或者通过用户干预独立。我还希望动画在非发光状态下停止。以下代码实现了这一点，并且可以进行修改以满足个人需求。

```
 var done = false;       // flag to prevent resumption
    var timer;              // the setTimeout function
    var i = 0;              // counter - must be outside startMe()
    var limit = 0;          // number of times to repeat

    // call to start the animation
    function superStart(lim)
    {
        limit = lim;       // must set before startMe()
        startMe();
    }

    function startMe()
    {
        var glower = document.getElementById("myGlower");
        var currentClass = glower.className;
        if(done == false)
        {
            if(currentClass == "passive")
            {
                glower.className = "active";
            }
            else
            {
                glower.className = "passive";               
            }

            i++;

            timer = setTimeout(startMe, 1000);

            if(i >= limit)
            {
                stopMe();
            }
        }
        else
        {
            glower.className = "passive";   // finish with glow off
        }
    }

    // separate function to also allow user action to terminate
    function stopMe()
    {
        clearTimeout(timer);
        done = true;
        startMe();           // to start final cycle finishing in passive state
    } 
```

我实际上不确定是否需要 clearTimeout()。（没有它也可以工作。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-14T08:10:05.887

如果您不想使用**Jquery**。

纯Javascript：

```
var i = 0;
var glow = document.getElementById('myGlower');
setInternval(function(){
        if(i == 0)
            glow.setAttribute('class','myGlower');
    else
            glow.removeAttribute('class');
},1000); 
```

工作示例：http: [//jsfiddle.net/7xvGp/1215/](http://jsfiddle.net/7xvGp/1210/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-16T06:57:19.683

使用 JQuery 和 CSS 动画，

一个 CSS 动画用于第一次悬停时的增加，一个用于变化的发光，一个用于鼠标离开框时的减少。

（如果不想使用插件，可以使用其他方法。）

```
$('div.div').hover(
  function() {
    $(this).addClass('increase');
    setTimeout(function(){ 
      $('div.div').removeClass("increase");
      $('div.div').addClass("glow");
    }, 1000);
  },
  function() {
    $(this).removeClass('increase');
    $(this).removeClass('glow');
    $(this).addClass('fade');
    setTimeout(function(){ 
      $('div.div').removeClass("fade");
    }, 1000);
  }
);
```

```
html {
  background-color: black;
}
div {
  background-color: white;
  height: 100px;
  width: 100px;
  margin: auto;
}
.increase {
  animation: increase 1s ease-in-out;
} 
.glow {
  animation: glow 5s ease-in-out 0s infinite;
} 
.fade {
  animation: fade 1s ease-in-out;
}
@keyframes increase {
  to { box-shadow: 0 0 40px rgba(81, 203, 238, 1); }
}
@keyframes glow {
  0% { box-shadow: 0 0 40px rgba(81, 203, 238, 1); }
  25% { box-shadow: 0 0 30px rgba(81, 203, 238, 1); }
  25%, 50% { box-shadow: 0 0 40px rgba(81, 203, 238, 1); }
  50%, 75% { box-shadow: 0 0 30px rgba(81, 203, 238, 1); }
  75%, 100% { box-shadow: 0 0 40px rgba(81, 203, 238, 1); }
}
@keyframes fade {
  from { box-shadow: 0 0 35px rgba(81, 203, 238, 1); }
  to { box-shadow: 0 0 0px rgba(81, 203, 238, 1); }
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<div class="div"></div>
```

PS，当我写这篇文章时，我发现了如何设置片段“控制台”的样式：

```
$('div').hover();
```

```
div {
  background-color: blue;
  color: red;
  height: 100px;
  width: 100px;
  margin: auto;
  outline: none;
  border: 3px solid black;;
}
```

# antlr4 - ANTLR4：树结构

> ID：15008936
> 
> 赞同：7
> 
> 时间：2013-02-21T17:48:15.733
> 
> 标签：antlr4

我正在扩展 baseClass 侦听器并尝试读取一些值，但是顺序中似乎没有任何层次结构。

我的语法的精简版如下：

```
start: config_options+
config_options: (KEY) EQUALS^ (PATH | ALPHANUM) (' '|'\r'|'\n')* ;

KEY: 'key' ;
EQUALS: '=' ;
ALPHANUM: [0-9a-zA-Z]+ ; 
```

然而，这个实现的解析树在 config_options 级别（终端级别）是平坦的，即规则开始有许多 config_options 的子节点，但 EQUALS 不是 config_options 子树的根，所有 TOKENS 都将规则 config_options 作为根节点。如何使其中一个终端成为根节点？

在这个特定的规则中，我不希望捕获任何空格，我知道有 -> skip 是针对词法分析器的，但是在某些情况下我确实想要空格。即在字符串 '"'(ALPHANUM|' ')'"'

（注意： ^ 似乎不起作用）

输入示例是：

键=abcdefg

键=90weata

键=acbefg9

我要做的就是提取键和值对。我希望“=”是根，两个孩子是键和值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T18:28:53.187

当您生成语法时，您应该在使用`^`运算符时遇到语法错误，该错误已在 ANTLR 4 中删除。ANTLR 4 生成*分析树*，其根由语法中的规则隐式定义。换句话说，对于您在上面给出的语法分析树节点将是`start`and `config_options`。

生成的`config_options`规则将返回一个 的实例`Config_optionsContext`，其中包含以下方法：

*   `KEY()`[`TerminalNode`](http://antlr.org/api/Java/org/antlr/v4/runtime/tree/TerminalNode.html)为`KEY`令牌返回 a 。
*   `EQUALS()`（`EQUALS`令牌相同）
*   `PATH()`（`PATH`令牌相同）
*   `ALPHANUM()`（`ALPHANUM`令牌相同）

您可以调用`getSymbol()`a`TerminalNode`来获取`Token`实例。

# ios - 在 iOS 上使用 Google Maps SDK 保存我的地点

> ID：15008939
> 
> 赞同：2
> 
> 时间：2013-02-21T17:48:30.560
> 
> 标签：ios, google-maps-sdk-ios

我最近受邀使用 Google 的 iOS 版 Map SDK/API。我一直在阅读他们拥有的有限文档，但没有看到访问“我的地方”的方法。有谁知道在 iOS 上访问/保存“我的地方”的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:14:31.140

我没有在框架标题中找到任何内容，所以我想您需要在服务器上使用 Places API 并为此下载结果。

# javascript - 无法使用 jqTouch 和 PhoneGap 显示 Google 地图

> ID：15008941
> 
> 赞同：0
> 
> 时间：2013-02-21T17:48:34.937
> 
> 标签：javascript, jquery, google-maps, cordova, jqtouch

我与这个问题斗争了很长时间，但我找不到合适的解决方案。我的目标是在我的应用中显示谷歌地图。我正在使用 jQTouch 和 PhoneGap 框架开发我的应用程序。这是我的代码：

```
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <!-- INCLUDE CORDOVA -->
    <script type="text/javascript" src="cordova-2.4.0.js"></script>
    <!-- INCLUDE REMOTE DEBUGGING -->
    <script src="http://debug.phonegap.com/target/target-script-min.js#photogap"></script>"
    <!-- INCLUDE jQTouch -->
    <link rel="stylesheet" href="./js/jqtouch-1.0-b4-rc/themes/css/jqtouch.css" id="jqtcss" />
    <link rel="stylesheet" href="./css/index.css" />
    <script type="text/javascript" src="./js/jqtouch-1.0-b4-rc/src/lib/zepto.min.js" charset="utf-8"></script>
    <script type="text/javascript" src="./js/jqtouch-1.0-b4-rc/src/jqtouch.min.js" charset="utf-8"></script>
    <!-- INCLUDE GOOGLE MAP -->
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyByqhQ9cCaXTKjBi2xEyp_HqQJwDl3YzRo&sensor=true">
    </script> 
    <script type="text/javascript">
        // Inicializuj jqTouch
        $.jQTouch({
            icon: 'jqtouch.png',
            statusBar: 'black-translucent',
            preloadImages: []
        });

    </script>
  </head>
  <body>
    <div id="home" class="current">
        <div class="toolbar">
            <h1>Orionids</h1>
        </div>
        <ul class="rounded">
            <li class="arrow"><a href="#my_spots">My Spots</a></li>
            <li class="arrow"><a href="#map">View On Map</a></li>
            <li class="arrow"><a href="#" onclick="choosePhoto(pictureSource.PHOTOLIBRARY)">Choose From Library</a></li>
        </ul>
        <div id="spot_btn">
            <a href="#" class="redButton" onclick="takePhoto()">Spot Now!</a>
        </div>
        <p id="quote">„Make a wish…“&lt;/p>
    </div>
    <div id="map">
        <div class="toolbar">
            <h1>Map View</h1>
            <a class="back" href="#">Home</a>
        </div>
        <div id="map_canvas" style="width:100%; height:100%"></div>
        <script>
        // Incializuj Google Mapy
        function initialize() {
            var mapOptions = {
                    center: new google.maps.LatLng(-34.397, 150.644),
                    zoom: 8,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            var map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
        }

            $('#map').bind('pageAnimationEnd', function() {
                initialize();
            });
        </script>
    </div>
  </body>
</html> 
```

问题是无论我尝试什么，地图都不会显示。我尝试了在 Stack Overflow 上找到的所有提示，但到目前为止还没有运气。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:34:13.357

您需要以 px 而不是 % 设置容器 div 的高度

```
<div id="map_canvas" style="width:100%; height:100px"></div> 
```

试试这个，地图就会出现。还要确保正在调用初始化方法。

# ant - zip 中的 Ant 引用类

> ID：15008945
> 
> 赞同：0
> 
> 时间：2013-02-21T17:48:50.430
> 
> 标签：ant, zip

刚刚在我的 ant build.xml 中有一个简单的问题，当我说明需要包含的 jar 的位置时，是否可以在其中包含一个包含我需要的类的 .zip 文件？我问的唯一原因是因为我从外部来源收到了我依赖的课程，而且它们只是被压缩了。我在想这样的事情是可能的。

```
<path id="test.lib">
      <fileset dir="{basedir}/../path/to/lib/files" includes="testzip.zip" />
</path> 
```

我只是不确定这些类是否必须是 jar 格式。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:00:35.553

They do not. The zip extension is fine.

# perl - 生成包括非字母在内的所有字符的 Perl 脚本：如何将数字转换为基数 27？

> ID：15008949
> 
> 赞同：2
> 
> 时间：2013-02-21T17:49:07.837
> 
> 标签：perl, character, generator

我编写了以下脚本，该脚本为包含 26 个字母的所有可能字符串创建了一个长度为 3 或 4 个单位的字符串。我想添加第 27 个字符。调用它`?`，但不管是哪一个。我想不出我应该怎么做。任何帮助都会受到欢迎。

这是执行 26 个字母的代码：

```
 #!/usr/bin/perl

 use 5.10.0;

 my $str = 'AAA';
 while ( $str ne 'ZZZZ' ) {
    say $str;
    $str++;
  } 
```

如何将数字转换为以 27 为底的数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:03:21.667

[perldoc perlop](http://perldoc.perl.org/perlop.html) :

> 自增运算符有一点额外的内置魔法。如果你增加一个数值变量，或者曾经在数值上下文中使用过的变量，你会得到一个正常的增量。但是，如果该变量自设置以来仅用于字符串上下文，并且其值不是空字符串且与模式匹配`/^[a-zA-Z]*[0-9]*\z/`，则增量作为字符串完成，将每个字符保留在其范围内，并带有进位…

[算法::组合学](http://search.cpan.org/perldoc/Algorithm%3a%3aCombinatorics)来拯救！

```
#!/usr/bin/env perl

use strict;
use warnings;
use feature 'say';

use Algorithm::Combinatorics qw(variations_with_repetition);

my $digits = ['A' .. 'Z', '?'];

print_sequence($digits, 3);

sub print_sequence {
    my ($digits, $n) = @_;

    my $it = variations_with_repetition($digits, $n);
    while (my $v = $it->next) {
        say join '', @$v;
    }

    return;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:13:21.133

作为替代解决方案，您可以使用一些 for 循环并迭代 ASCII 值。它不是最好看的脚本，但它会为您生成值。您可以轻松修改它以打印您想要的任何额外字符。

```
#!/usr/bin/perl

use strict; 
use warnings;
use 5.10.0;

my $str = 65;

my ($i, $j, $k, $l);
for ($i = $str; $i < 92; $i++) {
    for ($j = $str; $j < 92; $j++) {
        for ($k = $str; $k < 92; $k++) {
            say chr($i), chr($j), chr($k);
            for ($l = $str; $l < 92; $l++) {
                say chr($i), chr($j), chr($k), chr($l);
            }
        }
    }
} 
```

这是一个 ASCII 表参考：[http ://www.asciitable.com/](http://www.asciitable.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T18:03:11.190

Perl 中的字符串增量是“神奇的”。不幸的是，这意味着您不能（轻松）扩展它迭代的字母表。

如果你改写你的问题，这个问题很容易解决：

> 如何将数字转换为基数 27？

有“外面”的代码可以做到这一点。你的数字是字符“a”-“z”和“?”。然后你增加一个计数器，并将每个值转换为不同的基数/你的字符串。

# ipad - 将用于测试目的的 Web 应用程序部署到平板电脑？

> ID：15008952
> 
> 赞同：0
> 
> 时间：2013-02-21T17:49:18.067
> 
> 标签：ipad, testing, mobile, netbeans

我处于测试阶段，并在 netbeans 中创建了一个 Web 应用程序 (JSF)，但需要在平板电脑上对其进行测试，我有哪些部署它的选项，以便我可以在平板电脑上尝试，如果没有，是否有任何模拟器我可以在桌面上使用吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:53:47.253

这实际上取决于您正在测试平板电脑的哪些方面。是屏幕尺寸吗？只需调整任何 webkit 浏览器的大小。是用户代理检测吗？Chrome 允许您更改它，Firefox 也是如此。是触控支持吗？移动设备上的速度？您始终可以安装 Android 模拟器并创建平板设备。

移动浏览器通常与桌面浏览器保持同步，因此您可以指望它们在渲染方面非常准确。对于其余部分，您将需要模拟，尽管性能非常有限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:10:02.417

假设你*真的*在谈论一个网络应用程序，你不想/不需要将它*部署*在平板电脑上。您实际上想要/需要在平板电脑上测试 Web 界面。

最好的方法是购买或借用平板电脑（例如 iPad），将其连接到您的网络……或运行您的网络服务器的任何地方……启动平板电脑的网络浏览器并加载服务器的 URL。

您还可以通过将浏览器窗口大小减小到大致桌面屏幕的大小来使用台式 PC 模拟它（某种程度上）。但是，这不太可能发现实际平板电脑的网络浏览器的任何布局怪癖等。

# ruby - Ruby / Geo - 找到离给定中心最远的点

> ID：15008957
> 
> 赞同：0
> 
> 时间：2013-02-21T17:49:31.477
> 
> 标签：ruby, geolocation, geometry

给定一个中心点和一组点，是否有一个 gem / 函数，我可以看到哪些点距离原点最远，彼此之间的距离最小？

```
def find_furthest origin, set, min_distance 
    #
end 
```

# 我如何计算距离，欢迎使用替代方案

[http://www.esawdust.com/blog/gps/files/HaversineFormulaInRuby.html](http://www.esawdust.com/blog/gps/files/HaversineFormulaInRuby.html)

# 起源

```
{"lat"=>43.643326, "lng"=>-79.3831843} 
```

# 放

```
 [{"lat"=>43.64506, "lng"=>-79.384136},
     {"lat"=>43.642806, "lng"=>-79.380683},
     {"lat"=>43.645062, "lng"=>-79.384126},
     {"lat"=>43.644701, "lng"=>-79.384699},
     {"lat"=>43.644987, "lng"=>-79.383204},
     {"lat"=>43.64506, "lng"=>-79.384136},
     {"lat"=>43.644537, "lng"=>-79.385584},
     {"lat"=>43.643393, "lng"=>-79.380678},
     {"lat"=>43.642736, "lng"=>-79.381281},
     {"lat"=>43.642487, "lng"=>-79.382914},
     {"lat"=>43.642426, "lng"=>-79.383248},
     {"lat"=>43.642415, "lng"=>-79.383254},
     {"lat"=>43.645099, "lng"=>-79.383252},
     {"lat"=>43.642425, "lng"=>-79.383374},
     {"lat"=>43.64482, "lng"=>-79.385219},
     {"lat"=>43.64482, "lng"=>-79.385219},
     {"lat"=>43.645082, "lng"=>-79.38379},
     {"lat"=>43.64333, "lng"=>-79.380654},
     {"lat"=>43.644535, "lng"=>-79.385171},
     {"lat"=>43.64482, "lng"=>-79.385219}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:07:31.537

您在寻找这样的宝石吗？[https://rubygems.org/gems/geo-distance](https://rubygems.org/gems/geo-distance)

# php - Kohana 3.3 中的路由调试

> ID：15008958
> 
> 赞同：2
> 
> 时间：2013-02-21T17:49:36.360
> 
> 标签：php, kohana-3

我找到了调试路线的代码。

```
$route = Route::get('default');
echo Kohana_Debug::dump($route->matches('en/start/index')); 
```

当我在引导程序中使用代码时，会返回错误：

> ErrorException [ Recoverable Error ]: 传递给 Kohana_Route::matches() 的参数 1 必须是 Request 的实例，给定字符串，

如何在 Kohana 3.3 中调试路由？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T07:41:21.273

根据您的评论，我认为您的路线是错误的。应该看起来更像这样：

```
Route::set('default', '(<lang>(/<controller>(/<action>(/<id>)))) 
```

注意括号在哪里`<lang>`。

要测试 URL 是否与 Route 匹配，您不能将字符串传递给该`$my_route->match()`方法。[尽管在docs](http://kohanaframework.org/3.3/guide-api/Route#matches)中确实说您可以，但该方法仅接受 Request 对象。这将使您的代码看起来更像：

```
$route = Route::get('default');
$request = Request::factory('en/start/index');

echo Debug::dump($route->matches($request)); 
```

以上应该`FALSE`在失败时输出或`array`在成功时输出所有路由参数。

如果您需要更强大的工具，您可能需要查看[bluehawk 的 devtools 模块](https://github.com/bluehawk/devtools)，尽管它似乎在 Kohana 3.1.x 上停止了开发，并且不太可能在新版本中正常工作，但我个人没有使用它。

**编辑**

我已经努力并更新了[Devtools 模块](https://github.com/michal-m/kohana-modules-devtools)。随意从[我的存储库](https://github.com/michal-m/kohana-modules-devtools)中获取它，您将能够测试您的路线。

# ruby - Ruby/Bundler - 如何强制嵌入在 gem 中的 ruby 可执行文件使用 Gemfile

> ID：15008964
> 
> 赞同：2
> 
> 时间：2013-02-21T17:49:52.630
> 
> 标签：ruby, bundler

我创建了一个包含可执行文件（bin/mygem）的 gem 'mygem'。gemspec 文件定义了一些依赖项，例如：

```
gem.add_dependency('othergem', '< 1.0') 
```

在我的电脑上，我有两个版本的 othergem：0.9 和 1.0。

*   当我运行**bundle exec bin/mygem**时，正确加载了 0.9 版本的 othergem。
*   当我运行**bin/mygem**时，这是加载的 othergem (1.0) 的最后一个版本。

合乎逻辑。问题是当我在已经安装了 othergem 1.0 版本的计算机上安装 gem 'mygem' 时。RubyGems 将安装 0.9 版本的 othergem 以满足 gem 依赖关系。但是在终端**mygem**（RubyGems 生成的 binstub）中运行时，加载的是 1.0 版本。

**问题**：如何让我的可执行文件加载 0.9 版本而不将 gem othergem 嵌入到类似供应商的文件夹中？谢谢。

# jsp - 你如何在jsp中放置“<%”？

> ID：15008966
> 
> 赞同：0
> 
> 时间：2013-02-21T17:49:56.173
> 
> 标签：jsp

我正在尝试转义 jsp 的特殊字符。具体来说，我希望 <% 在不启动 scriptlet 的情况下出现在页面上。我怎么做？

注意：我不想 <% 在页面上，我想在 JavaScript 字符串中打印 <%。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:51:13.297

拆分字符串并让 Javascript 在客户端将其连接起来：

```
tag = "<" + "%";
document.write(tag); 
```

# wordpress - 如何将wordpress的登录表单添加到您的页面中？

> ID：15008967
> 
> 赞同：2
> 
> 时间：2013-02-21T17:50:07.480
> 
> 标签：wordpress

伙计们，谁能给我一个关于如何添加登录表单以及如何自定义它的指南？？？谢谢您的帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T19:24:20.723

[您可以使用wp_login_form()](http://codex.wordpress.org/Function_Reference/wp_login_form)函数轻松地将登录表单添加到任何页面。[Justin Tadlock](http://justintadlock.com/archives/2011/08/30/adding-a-login-form-to-a-page)有一篇很好的文章，其中包含更多信息，并且还向您展示了如何将其与用于帖子和页面的简码相结合。

嵌入表单后，您可以使用 CSS 对其进行样式设置，就像主题的其他元素一样。

我希望这有帮助！

# macos - 如何在主机文件中引用主机名？

> ID：15008968
> 
> 赞同：0
> 
> 时间：2013-02-21T17:50:09.047
> 
> 标签：macos, networking, hosts, hosts-file

我连接到与“staging.local”相同的网络上的本地服务器（其中 staging 是本地服务器上的主机名）。

是否可以像这样在 os x hosts 文件中命名：

```
staging.local  mydomain.com 
```

这似乎行不通。直接引用 IP 地址确实有效，但它可能经常更改（192.168.0.196 mydomain.com）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:55:47.743

不，这不能用 unix 主机文件完成。

这可以通过使用 CNAME 的 DNS/bind 来完成，但主机文件基本上就像使用 A/PTR 一样——不允许使用别名。

如果这是您将在 ~/.ssh/config 中使用的别名，则可以创建别名供 ssh 使用

```
Host staging.local
 HostName mydomain.com 
```

# python - 读取熊猫数据框前几行的方法

> ID：15008970
> 
> 赞同：123
> 
> 时间：2013-02-21T17:50:12.057
> 
> 标签：python, pandas, csv, dataframe

是否有一种内置方法可以用于`read_csv`仅读取`n`文件的第一行而不提前知道行的长度？我有一个需要很长时间才能读取的大文件，并且偶尔只想使用第一行，比如 20 行来获取它的样本（并且不想加载完整的东西并占据它的头部）。

如果我知道总行数，我可以做类似的事情`footer_lines = total_lines - n`并将其传递给`skipfooter`关键字 arg。我目前的解决方案是`n`使用 python 和 StringIO 手动将第一行抓取到 pandas：

```
import pandas as pd
from StringIO import StringIO

n = 20
with open('big_file.csv', 'r') as f:
    head = ''.join(f.readlines(n))

df = pd.read_csv(StringIO(head)) 
```

这还不错，但是有没有更简洁的“pandasic”（？）方式来使用关键字或其他方式来做到这一点？

* * *

## 回答 #1

> 赞同：217
> 
> 时间：2013-02-21T18:00:29.233

我认为您可以使用该`nrows`参数。从[文档](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html)：

```
nrows : int, default None

    Number of rows of file to read. Useful for reading pieces of large files 
```

这似乎有效。使用标准的大型测试文件之一（988504479 字节，5344499 行）：

```
In [1]: import pandas as pd

In [2]: time z = pd.read_csv("P00000001-ALL.csv", nrows=20)
CPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s
Wall time: 0.00 s

In [3]: len(z)
Out[3]: 20

In [4]: time z = pd.read_csv("P00000001-ALL.csv")
CPU times: user 27.63 s, sys: 1.92 s, total: 29.55 s
Wall time: 30.23 s 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-30T14:37:22.290

我会在 read_csv 中使用“skiprows”参数，例如：

```
df = pd.read_csv(filename, skiprows=range(2, 20000), nrows=10000) 
```

# knockout.js - 动态添加数据到 observableArray

> ID：15008973
> 
> 赞同：0
> 
> 时间：2013-02-21T17:50:20.100
> 
> 标签：knockout.js

我有这个视图模型和一个向它添加数据的函数，

```
 function viewModel() {
            this.loadData = function() {
                this.Items().push('X');
                this.Items().push('Y');
            };

            this.Items = ko.observableArray(['A', 'B']);
        }

        var vm = new viewModel();
        ko.applyBindings(vm);
        vm.loadData();
        alert(vm.Items()); 
```

我试图打印出 Items 数组中的值，但 X 和 Y 从未显示。虽然警报弹出 A、B、X 和 Y。我做错了什么？

```
 <div data-bind="foreach: {data: Items, as: 'item' }">
        <span data-bind="text: item"></span>
    </div> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:56:40.123

`this.Items()`公开 的底层数组`ko.observableArray()`，它只是一个普通数组。你需要使用这个：

```
this.Items.push('X');
this.Items.push('Y'); 
```

[演示](http://jsfiddle.net/m7cku/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:59:21.143

You should push the data directly to this.Items.

this.Items() returns the content of the observableArray.

# jsf - JSF Primefaces 数据表行选择错误

> ID：15008974
> 
> 赞同：0
> 
> 时间：2013-02-21T17:50:20.430
> 
> 标签：jsf, primefaces

我使用primefaces使用数据表，我想选择一个特定的行并显示日期，但我面临的问题是当我选择任何行时它只显示第一行数据而不是选择的数据..这是代码

视图.xhtml：

```
 <h:form prependId="false" id="form">  

<p:dataTable id="dataTable" var="car" value="#{tableBean.getList()}"  
             paginator="true" rows="10"  selectionMode="single" selection="#{tableBean.selectedCar}" rowKey="#{car.model}" 
             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
             rowsPerPageTemplate="5,10,15">  
    <f:facet name="header">  
        Posted Jobs  
    </f:facet>  

    <p:column>  
        <f:facet name="header">  
            <h:outputText value="Model" />  
        </f:facet>  
        <h:outputText value="#{car.model}" />  
    </p:column>  

    <p:column>  
        <f:facet name="header">  
            <h:outputText value="Year" />  
        </f:facet>  
        <h:outputText value="#{car.year}" />  
    </p:column>  

    <p:column>  
        <f:facet name="header">  
            <h:outputText value="Manufacturer" />  
        </f:facet>  
        <h:outputText value="#{car.manufacturer}" />  
    </p:column>  

    <p:column>  
        <f:facet name="header">  
            <h:outputText value="Color" />  
        </f:facet>  
        <h:outputText value="#{car.color}" />  
    </p:column>  
      <f:facet name="footer">  
        <p:commandButton id="viewButton" value="View" icon="ui-icon-search"  
               update=":form:display" oncomplete="carDialog.show()"    actionListener="#{tableBean.add}"
                />  
    </f:facet>

</p:dataTable>  
 <p:dialog id="dialog" header="Car Detail" widgetVar="carDialog" resizable="false"  
          width="200" showEffect="clip" hideEffect="fold">  

    <h:panelGrid id="display" columns="2" cellpadding="4">  

        <h:outputText value="Model:" />  
        <h:outputText value="#{tableBean.selectedCar.model}" />  

        <h:outputText value="Year:" />  
        <h:outputText value="#{tableBean.selectedCar.year}" />  

        <h:outputText value="Manufacturer:" />  
        <h:outputText value="#{tableBean.selectedCar.manufacturer}" />  

        <h:outputText value="Color:" />  
        <h:outputText value="#{tableBean.selectedCar.color}" />  
    </h:panelGrid>  
</p:dialog>  

  </h:form> 
```

豆类：

```
package Bean;

import java.io.IOException;
import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.faces.context.FacesContext;
   @ManagedBean

    public class TableBean implements Serializable {

private static final long serialVersionUID = 1L;
private Cars selectedCar; 
public Cars getSelectedCar() {
    return selectedCar;
}
public void setSelectedCar(Cars selectedCar) {
    this.selectedCar = selectedCar;
}
public static long getSerialversionuid() {
    return serialVersionUID;
}
public List<Cars> getList() {
    List<Cars> Carss = new ArrayList<Cars>();

    Cars c = new Cars();
    c.setColor("sd");
    c.setManufacturer("sd");
    c.setModel("sd");
    c.setYear("1212");
    Cars c1 = new Cars();
    c1.setColor("sd");
    c1.setManufacturer("sd");
    c1.setModel("sd");
    c1.setYear("1000");
    Carss.add(c1);
    Carss.add(c);

    return Carss;

}
public void add(){

    System.out.print(getSelectedCar().getYear());

    }
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:54:45.247

Should add f:setPropertyActionListener

```
<p:commandButton id="viewButton" value="View" icon="ui-icon-search"  
               update=":form:display" oncomplete="carDialog.show()"    actionListener="#{tableBean.add}"
                >  
         <f:setPropertyActionListener value="#{car}" target="#{tableBean.selectedCar}"/> 
</p:commandButton> 
```

Check [http://www.primefaces.org/showcase/ui/datatableRowSelectionByColumn.jsf](http://www.primefaces.org/showcase/ui/datatableRowSelectionByColumn.jsf) for more examples

# r - 在 R 中加载具有最新日期的文件

> ID：15008975
> 
> 赞同：5
> 
> 时间：2013-02-21T17:50:23.930
> 
> 标签：r

假设我有一个文件，我想在 R 中加载 - 让我们称之为`file.csv`。将其加载到 R 中相当容易。

不幸的是，在我的情况下，该文件存在多个版本，并且每个文件都附加了一个日期......所以我在我的目录中真正拥有的是一个文件列表，例如：

`file - 02-19-2013.csv`
`file - 02-18-2013.csv`
`file - 02-17-2013.csv`

... 等等

我想知道如何在 R 中加载具有最新日期的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T19:04:58.667

您需要从文件名字符串中获取日期（尝试`substr`）。

然后使用众多日期解析函数中的任何一个将其转换为日期对象。

然后按这些日期对象的顺序排序。

或者，如果你很幸运，你可能会发现文件名中的日期格式只是通过使用`sort`文件名向量以正确的方式排序......

# ruby-on-rails-3 - 输入erb元素上的Rails Deface，无法正确覆盖它

> ID：15008983
> 
> 赞同：1
> 
> 时间：2013-02-21T17:50:58.540
> 
> 标签：ruby-on-rails-3, spree, deface

我正在尝试覆盖 products/_cart_form 中的 qty 输入元素，以避免用户修改 qty 应该在 erb 代码或 html 上执行 Deface 覆盖

我使用了以下覆盖 wo 任何成功似乎都是 html 选择器和 erb 代码的混合......混乱和棘手，显然在 Deface github 自述文件上没有这样的例子

```
 Deface::Override.new(
     :virtual_path => %q{spree/products/_cart_form},
     :name => %q{read_only_qty_cart_form},
     :set_attributes => %q{#cart-form form div.add-to-cart input},
     :attributes => {:readonly => 'readonly'}
 ) 
```

spree/products/_cart_form.erb 代码是（与输入元素相关）

```
 <div class="add-to-cart">
      <% if @product.on_sale? %>      
        <%= number_field_tag (@product.has_variants? ? :quantity : "variants[#{@product.master.id}]"),
          1, :class => 'title', :in => 1..@product.on_hand, :min => 1 , :readonly => true %>
        <%= button_tag :class => 'large primary', :id => 'add-to-cart-button', :type => :submit do %>
          <%= t(:add_to_cart) %>
        <% end %> 
```

它生成以下 html ：

```
 <div data-hook="cart_form" id="cart-form">
        <form method="post" action="/fr/orders/populate" accept-charset="UTF-8">
            <div ...  name="authenticity_token"></div>
              <div...... data-hook="inside_product_cart_form" id="inside-product-cart-form">
                   <div class="columns five  alpha " data-hook="product_price">
                          <div id="product-price">....</div>
                          <div class="add-to-cart">
                                  <input type="number" value="1" name="variants[1001480408]" min="1" max="Infinity" id="variants_1001480408" class="title">
                                   <button type="submit" id="add-to-cart-button"..... >
                           </div>
                     </div>
               </div>
          </form> 
   </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T22:27:16.333

您正在尝试破坏生成的元素。Deface 在 erb 文件上运行（输入元素尚不存在）。

尝试使用这样的代码破坏：

```
Deface::Override.new(
     :virtual_path => "spree/products/_cart_form",
     :name => "read_only_qty_cart_form",
     :insert_bottom => "code[erb-loud]:contains('number_field_tag (@product.variants_and_option_values.any?')",
     :text => ", :readonly => 'readonly'"
) 
```

# eclipse - Aptana 3 FTP 错误集修改时间失败

> ID：15008984
> 
> 赞同：2
> 
> 时间：2013-02-21T17:50:59.727
> 
> 标签：eclipse, ftp, save, aptana

这个问题已经发布但没有回答。保存后，我得到一个 ftp 错误弹出窗口，上面写着“由于异常“设置修改时间失败”而无法保存远程文件。你想在本地保存文件吗？但是，它确实保存了它。

我正在使用 Eclipse 3.7.2 和 Aptana Studio 3 v3.4.0.2 ....

我得到了一些建议的夜间构建，但这并没有解决它。谷歌还没有多少。

因此，我安装了带有它自己的 ftp 的 CFEclipse，它适用于同一服务器上的 CF 文件。该站点是 CF 和 PHP 的混合体。FileZilla 也可以正常工作。

如果有人能够解决这个问题，我很高兴知道如何解决。只是那些有点烦人的小东西之一。Tks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-05T15:30:16.053

使用 putty/linux 进入您试图通过 ftp 保存的文件并输入

```
ls -lart 
```

文件的所有者可能未设置为正确的用户。

```
sudo chown *user* -R /file/path/folder/ 
```

这应该可以解决问题。

# java - Java 从 2 个目录向上读取图像

> ID：15008985
> 
> 赞同：0
> 
> 时间：2013-02-21T17:51:02.907
> 
> 标签：java, file, png, directory

如何在屏幕上放置 2 个目录的图像？这是我的代码：

```
package mousemaze;

// Imports
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class LoadScreen extends JPanel {
    private static final long serialVersionUID = 1L;

    private String logoPath = "././images/snakyboLogo.png";
    BufferedImage logoImage;
    JLabel logoLabel;

    public LoadScreen() {
        try {
            System.out.println(logoPath);
            logoImage = ImageIO.read(new File(logoPath));
            System.out.println("1");
            logoLabel = new JLabel(new ImageIcon(logoImage));
            System.out.println("2");
            add(logoLabel);
            System.out.println("End");
        } catch (IOException ex) {
            System.out.println("Fail");
        }
    }
} 
```

但它失败了

```
logoImage = ImageIO.read(new File(logoPath)); 
```

所以我认为它在该目录中找不到指定的文件。我的文件夹结构是：

*   src\mousemaze\LoadScreen.java
*   src\images\snakyboLogo.png

所以我猜这不是我在完全不同的包中指定文件的方式，那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:58:04.213

*   问题 1 - 路径文字`.`解析为当前目录，我假设您打算使用`..`.
*   问题 2 - 永远不建议使用相对路径从 Java 中读取文件。如果您的应用程序部署在您假定的结构之外的任何地方，它将中断

您将从使用资源流中获得更多收益

```
InputStream logoStream = getClass().getResourceAsStream("/images/snakyboLogo.png");
if(logoStream != null) logoImage = ImageIO.read(logoStream); 
```

# c++ - 在 C++ 中使用 Objective-C 类

> ID：15008994
> 
> 赞同：4
> 
> 时间：2013-02-21T17:51:24.607
> 
> 标签：c++, iphone, objective-c

我对 Objective-C 相当陌生，我正在为我们的项目构建一个 iCloud 实用程序库。我在 Objective-C 中创建了一个 iCloud 实用程序类。我注意到有很多关于在 Objective-C 中使用 C++ 类的问题，但反之则很少。问题是，我们的项目（以及构建我们项目的引擎）完全是用 C++ 编写的，因此，我编写的 Objective-c icloud 类需要可以从我正在编写的 C++ 接口访问。

这是一个例子：

# iCloudUtils.h

```
#import <Foundation/Foundation.h>

@interface iCloudUtil : NSObject
@property(nonatomic, assign, getter=isAvailable) BOOL iCloudIsAvailable;

@property (assign) NSString *urlToFile;

-(bool) init_iCloud;
-(void) loadDocument: (NSString*)fileUrl;
@end 
```

# iCloudUtils.m

```
#import "iCloudUtil.h"
@synthesize urlToFile = _urlToFile;
@synthesize iCloudIsAvailable = _iCloudIsAvailable;
//////////////////////////////////////////////////////

@implementation iCloudUtil
-(bool) init_iCloud{
//blah blah
}

-(void) loadDocument: (NSString*)fileUrl{
//more blah blah
}

@end 
```

我试图从中使用它的 C++ 类是这样的：

# iCloud接口.h

```
#ifndef __ICloudInterface__
#define __ICloudInterface__

class ICloudInterface {

    static ICloudInterface *_instance;
    bool iCloudIsAvailable;

public:
    ICloudInterface();
    ~ICloudInterface();

    bool init_iCloud();
};

#endif 
```

我想要做的是能够在我的 C++ 类中创建一个 iCloudUtils 的实例，但是我不能在我的 C++ 类中#include 它而不收到关于“Stray '@' in program”的 200 多个错误。我对 Objective-C 非常缺乏经验，更不用说将它与 C++ 混合，所以有人可以帮助我就如何实现这一目标提供建议吗？

编辑：只是为了清除它，我已经尝试将 .cpp 重命名为 .mm 但这并没有解决问题。

Edit2：另外，根据我对阅读的理解（如果我错了，请纠正我）将文件更改为.mm，任何包含它的文件也必须更改为.mm。我不能这样做，因为它需要更改非常大量的文件以适应单个可选类（提醒这个项目及其引擎都是 c++，这是一个跨平台的引擎和项目）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:59:21.920

将您的 .cpp 文件名切换为 .mm - 这会将其从 c++ 转换为 Objective-c++。然后，您将编译一种能够理解标头的语言。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T18:19:54.770

您不能在文件扩展名为 .cpp 的 C++ 文件中使用 Obj.C 类对象

您可以在 Obj.C 类中使用扩展名为 .mm 的 c++ 类

要在 C++ 和 Obj.C 类之间进行通信，请在 .mm 文件中编写 helper c++ 类

说：

```
 interface iCloudUtil : NSObject  // in .m file
  class ICloudInterface            //in cpp file. 
```

您可以使用桥接类帮助在 .cpp 文件中的 cpp 类与 .m 文件中的 obj.C 类之间进行通信。

```
//include iCloudUtil.h only in ICloudBridge.mm file.

class ICloudBridge {

    static ICloudBridge *_instance;

public:
    ICloudBridge();
    ~ ICloudBridge();

    ICloudBridge *sharedICloudBridge();
    void loadDocument();
};

void  ICloudBridge:: loadDocument()
{
   iCloudUtil *obj = [iCloudUtil alloc] init] autorelese];
   [obj  loadDocument:@"DocName"];
} 
```

在 iCloudInterface.cpp

```
ICloudBridge *bridge = ICloudBridge::sharedICloudBridge();
bridge-> loadDocument(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T17:59:30.657

我认为您必须在源代码文件名中使用`.mm`扩展名而不是扩展名，或者将文件设置为在 Xcode 中编译为 Objective-C++。`.m`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T19:23:06.137

当然——你可以做到这一点。需要的主要是将 .CPP 文件设置为“Objective-C++ Source”——“.mm”约定是一种自动的精巧，但不是必需的。然后，您可以随意混合和匹配：

```
#import <Foundation/Foundation.h>
#include <iostream>

@interface iCloudUtil : NSObject
@property(nonatomic, assign, getter=isAvailable) BOOL iCloudIsAvailable;
@property(assign) NSString *urlToFile;
- (bool) init_iCloud;
- (void) loadDocument:(NSString*)fileUrl;
@end

//////////////////////////////////////////////////////
@implementation iCloudUtil

@synthesize urlToFile = _urlToFile;
@synthesize iCloudIsAvailable = _iCloudIsAvailable;

- (bool) init_iCloud {
    NSLog(@"init_iCloud");
    std::cout << "i can mix std c++ in here as well\n";
    return YES;
}

- (void) loadDocument:(NSString*)fileUrl {
    NSLog(@"url is %@",fileUrl);
}

@end
//////////////////////////////////////////////////////

class ICloudInterface {
    static ICloudInterface* _instance;
    bool iCloudIsAvailable;
    iCloudUtil* myCloudUtil;
public:
    ICloudInterface();
    ~ICloudInterface();

    bool init_iCloud();
};

ICloudInterface::ICloudInterface() {
    std::cout << "ICloudInterface::ctor\n";
    myCloudUtil = [[iCloudUtil alloc] init];
    [myCloudUtil init_iCloud];
    [myCloudUtil loadDocument:@"file://foo/bar/baz"];
}

ICloudInterface::~ICloudInterface() {
    [myCloudUtil release], myCloudUtil = nil;
    std::cout << "ICloudInterface::dtor\n";
}

int main(int argc, const char * argv[]) {
    std::cout << "Test objc/objc++\n";
    ICloudInterface iface;
    return 0;
} 
```

# mongodb - 使用 $set 更新字段时出现不同的值

> ID：15008995
> 
> 赞同：0
> 
> 时间：2013-02-21T17:51:30.043
> 
> 标签：mongodb

我试图更新数据库中的一个字段，结果非常混乱：

查看之前的“邮政编码”字段：

```
'' 
```

后

```
1153 
```

但是我试图赋予不同的价值

```
> db.users.find()
{ "_id" : ObjectId("51265a5ebdbff320f02007a4"), "region_code" : "NY", "region_name" : "New York", "secret_answer2" : "Mercedes", "l_name" : "Gonzalez", "f_name" : "Zachary", "month" : 5, "country_name" : "United States", "country_code" : "US", "year" : 1970, "password" : "xxxxxx", "day" : 2, "metrocode" : "501", "city" : "New York", "secret_answer" : "xxxxxx", "zipcode" : "", "longitude" : xxxxxxx, "areacode" : "212", "ip" : "xxxxxxx", "latitude" : xxxxxx }
> db.users.update({_id: ObjectId("51265a5ebdbff320f02007a4")}, {$set: {zipcode:02201} } )
> db.users.find()
{ "_id" : ObjectId("51265a5ebdbff320f02007a4"), "region_code" : "NY", "region_name" : "New York", "secret_answer2" : "Mercedes", "l_name" : "Gonzalez", "f_name" : "Zachary", "month" : 5, "country_name" : "United States", "country_code" : "US", "year" : 1970, "password" : "xxxxxx", "day" : 2, "metrocode" : "501", "city" : "New York", "secret_answer" : "xxxxxx", "zipcode" : 1153, "longitude" : xxxxxxx, "areacode" : "212", "ip" : "xxxxxxx", "latitude" : xxxxxx } 
```

# 更新：

```
> db.users.find({},{zipcode:1})
{ "_id" : ObjectId("51265a5ebdbff320f02007a4"), "zipcode" : 1153 }
> db.users.update({_id:ObjectId("51265a5ebdbff320f02007a4")}, {$set:{zipcode:02201}})
> db.users.find({},{zipcode:1})
{ "_id" : ObjectId("51265a5ebdbff320f02007a4"), "zipcode" : 1153 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:57:43.233

在 JavaScript 中，以 0 开头的数字被解释为八进制。

因此，要么将您的`zipcode`值存储为字符串：

```
{$set: {zipcode: '02201'}} 
```

或使用十进制值：

```
{$set: {zipcode: 2201}} 
```

# opengl-es - 在OpenGL中，创建透视投影矩阵对物体坐标有什么影响？

> ID：15008997
> 
> 赞同：0
> 
> 时间：2013-02-21T17:51:36.167
> 
> 标签：opengl-es, matrix, perspective

我最近开始学习 OpenGL，就与 GL 和着色器的通信而言，我已经获得了很好的能力，但我对坐标系有点不清楚。

我使用的是 OpenGL ES 2.0，所以我必须自己做所有的矩阵管理。我开始明白以下几点：

1.  为了观察正确的结果，将矩阵乘以模型 * 视图 * 投影（这非常有意义，因为矩阵乘法不可交换）。

2.  模型矩阵表示绘图图元的缩放、旋转、平移等。在 3D 空间中移动图元涉及应用于该矩阵的变换。

3.  视图矩阵代表许多人所指的“相机”。对象和观察者之间的距离以及眼睛围绕对象的旋转来自到这个矩阵的变换。

4.  最后，透视矩阵表示场景存在的 3D 空间。我正在关注一些示例，这些示例主要使用使用视野和纵横比的透视方法。这就是我的困惑开始的地方。

图元的坐标以 +-[0, 1] 区间中的浮点数形式给出。但是透视矩阵表示从近 z 到远 z 的 3D 空间（我已经看到分别为 0 和 100）。我对图元的坐标如何映射到这个空间感到困惑。显然，在这种情况下，我的线性代数技能并没有我希望的那么强。谁能澄清这些点是如何映射到这个空间的？

例如，许多示例将立方体定义为 +-(.5, .5, .5)。II使用near-z = 0，far-z = 100的透视矩阵，以及整个显示器的纵横比，这是否意味着立方体总是在这些维度中的每一个的0.5？我的意思是，如果透视矩阵从 x=-5 变为 x=5，x 坐标最终是否为 .5(-5) = -2.5？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:18:37.957

要了解顶点是如何映射的，您必须了解 open gl 为获得最终形式的顶点所做的工作，称为“标准化设备坐标”空间，从 z = -1 到 z = 1。

首先，视图空间顶点乘以投影矩阵。然后，顶点除以其第 4 个或“w”分量。这被称为[透视鸿沟](http://en.wikipedia.org/wiki/Transformation_matrix#Perspective_projection)

知道了这些信息，你就可以推导出公式。 [本页](http://www.songho.ca/opengl/gl_projectionmatrix.html#perspective)解释了进入投影矩阵以将视图 z 坐标映射到投影-z 坐标的数学。如果不关心推导，可以向下滚动查看最终结果，即：

```
zn = (-(f+n) * ze / (f-n) - 2*f*n/(f-n) ) / (-ze) 
```

其中 zn 是标准化设备坐标中的 z，ze 是视图（或眼睛）坐标中的 z，f 是远剪辑平面，n 是近剪辑平面。

如果你检查这个公式，你会注意到如果一个顶点的 z 分量等于 n，它映射到 -1。如果它等于 f，它映射到 1，在两者之间，它遵循一个双曲函数从 -1 到 1。

# java - 如何显示jmx MBean的类描述、属性描述和操作描述

> ID：15008998
> 
> 赞同：6
> 
> 时间：2013-02-21T17:51:37.280
> 
> 标签：java, spring, jboss7.x, jmx, mbeans

我创建了一些实现接口的 bean，并创建了一个自定义`MBean`导出器来将这些 bean 公开给`jconsole`. 尽管一切正常，但描述未正确显示。在 bean 的顶部，我看到：

```
Java 类：$Proxy483
描述：MBean的管理接口信息

```

在我看到的属性和操作的描述中：

```
操作暴露给管理
```

有没有办法查看我在`@ManagedResource`注释中设置的描述？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T01:08:36.937

您是否尝试提供对象名称和描述？

```
@ManagedResource(
    objectName="org.springbyexample.jmx:name=ServerManager", 
    description="Server manager."
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T09:40:02.917

您需要为您的 MBeanExporter 实现 JmxAttributeSource （没有默认值）。Spring[参考](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/jmx.html#jmx-interface)提供了以下示例：

```
<bean id="exporter" class="org.springframework.jmx.export.MBeanExporter">
    <property name="assembler" ref="assembler"/>
    <property name="namingStrategy" ref="namingStrategy"/>
    <property name="autodetect" value="true"/>
</bean>

<!-- Implementation of the JmxAttributeSource interface that reads JDK 1.5+ annotations and exposes the corresponding attributes -->
<bean id="jmxAttributeSource" class="org.springframework.jmx.export.annotation.AnnotationJmxAttributeSource"/>

<!-- will create management interface using annotation metadata -->
<bean id="assembler" class="org.springframework.jmx.export.assembler.MetadataMBeanInfoAssembler">
    <property name="attributeSource" ref="jmxAttributeSource"/>
</bean>

<!-- will pick up the ObjectName from the annotation -->
<bean id="namingStrategy" class="org.springframework.jmx.export.naming.MetadataNamingStrategy">
    <property name="attributeSource" ref="jmxAttributeSource"/>
</bean> 
```

# programming-languages - 这是什么语言：PROC、VERIFY、DECLARE、SCREEN、CMS、

> ID：15008999
> 
> 赞同：9
> 
> 时间：2013-02-21T17:51:41.233
> 
> 标签：programming-languages, mainframe

我必须从旧的遗留代码中找到一些逻辑。我的经理说是 COBOL，我不确定。我试图在 cobol 教程上找到一些关键字，但没有任何运气。

以下是一些代码片段：

```
PROC(&QPROG);
VERIFY OFF PROC;DECLARE &MSG1 AS A75;
/* DON'T CALL SCREEN IF IT'S FROM  */
IF &QPROG NE 'YUITG' THEN DO;
   CALL QAAF;
   SCREEN QUERY LOADED QAAF OTW DO;
      PRINT 'SCREEN WILL NOT LOAD';
      EXIT;
  END;
END;
ON ERROR DO;PRINT &&RC;EXIT; END;

IF LENGTHB(&P_WHAT) = 4 THEN DO; &P_WHATT = SUBSTR(&P_WHAT,1,1) CAT
   ', ' CAT SUBSTR(&P_WHAT,2,1) CAT ', ' CAT SUBSTR(&P_WHAT,3,1) CAT
   ' & ' CAT SUBSTR(&P_WHAT,4,1);
END;
DECLARE &KEYWORDD_A(0) AS A1;
DECLARE &KEYWORDD_F(0) AS 99L;
&KEYWORDD_A=
(SUBSTR(&KEYWORDD,1,1),SUBSTR(&KEYWORDD,2,1),SUBSTR(&KEYWORDD,3,1),
SUBSTR(&KEYWORDD,4,1),SUBSTR(&KEYWORDD,5,1),SUBSTR(&KEYWORDD,6,1),
SUBSTR(&KEYWORDD,37,1),SUBSTR(&KEYWORDD,38,1),SUBSTR(&KEYWORDD,39,1),
SUBSTR(&KEYWORDD,40,1));
&KEYWORDD_F = FINDEX(&KEYWORDD_A = ' ',ALL);

IF &PROG EQ &NAV THEN DO;
   &ALLPROG = 'YES';
   &PROG = 'PR2';
END;
-TOP_PROG
CMS FILEDEF QAA2 DISK QAA2 NOMAD A6 (LRECL 100;
WRITE '/* REPORT */' ON QAA2;
WRITE '&GRP        = ''' CATB &GRP CATB ''';' ON QAA2;
WRITE '&MGTRPT     = ''' CATB &QPROG CATB ''';' ON QAA2;
IF &AMPRFROM NE &NAV THEN DO;
   WRITE '&AMPRFROM = ''' CATB DISPLAY(&AMPRFROM) CATB ''';' ON QAA2;
END;

CLOSE QAA2; 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-22T00:43:02.497

编辑：

这一直困扰着我。推理它不是 EXEC 也不是 Rexx，而是显然在 CMS 中运行，因此留下了 EXEC 2。

但是，我现在相信它就是 NOMAD 本身。很难确认，但这里[http://www.tallant.com/portfolio/webpages/web/nomad/nomad2.html](http://www.tallant.com/portfolio/webpages/web/nomad/nomad2.html)是一些代码的示例。

我不知道它是否从/与 EXEC 2 一起运行。它可能只是以类似的方式运行，或者只是在执行“系统功能”所需时支持向 CMS 或 CP 进行“脱壳”。

所以，应该不是...

它是EXEC2。

VM/CMS 有两种“旧”的命令语言，最古老和最有限的是 EXEC。Rexx 是“新”命令语言。

如果您认为这很糟糕，请想象一下 EXEC 是什么样的。EXEC和EXEC2与CLIST有相似之处，但不知道它们是否有共同的祖先。

因此，这就是如今与 IBM 的 VM 操作系统相关的“一种 shell 脚本语言”，它是原始的“虚拟机”，它包括运行称为“单用户操作系统”的多个副本的能力CMS（对话监控系统，我相信）仅在 VM 上运行，并且是“CMS FILEDEF”进入的地方（它“向 CMS 发送”），VM 也可以作为单个或多个实例运行，完全- IBM 操作系统如 DOS/VSE、MVS、VM（同样可以运行其他“来宾”操作系统）和如今的 z/OS、z/VSE 以及，我不知道，但可能是 Linux。

编辑。*包含“/ ”“* /”注释是非常糟糕的做法。如果文件的第一行以这样的方式开始和结束，则假定内容为 Rexx。VM 支持所有三种“语言”，但根据程序的启动方式运行不同的解释器。

从内存中，EXEC 以 *（注释）开头，EXEC2 不需要，Rexx 以 /* 到 */，在 CMS 上可以跨越多行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T19:08:29.083

这是[CLIST](http://publib.boulder.ibm.com/infocenter/zos/v1r12/index.jsp?topic=%2Fcom.ibm.zos.r12.ikjb300%2Fclist.htm)。常见于 IBM 大型机。

**编辑**

在第二次拍摄时，这不是 CLIST。不过，它看起来像是 CLIST 的近亲（其中较旧的 IBM 系统有一些变体）。我最好的猜测是，这是在 CMS 下运行的某种相当古老的 EXEC。

该行：

```
CMS FILEDEF QAA2 DISK QAA2 NOMAD A6 (LRECL 100; 
```

看起来像是对 CMS 进行文件分配的一种逃避，所以这让我想到了 CMS。

有人建议它可能是SAS。IBM 系统上的 SAS 对它们也有一种 CLISTish 的外观，但我认为它不是 SAS（很久以前只与 SAS 合作过几次，所以我也愿意对此进行纠正）。

我也不太确定这是 EXEC2。我挖出了[VM SP EXEC 2 参考手册](http://bitsavers.trailing-edge.com/pdf/ibm/370/VM_SP/Release_2_Jun82/SC24-5219-1_VM_SP_EXEC_2_Rel_2_Reference_Apr82.pdf)。示例中的某些内容似乎没有“翻译”成 EXEC2：例如 PROC、DECLARE、LENGTHB、CALL 和 CAT 没有在手册中描述。我在 80 年代使用 CMS 有一段时间，实际上不得不写类似的东西，但那是很久以前的事了，我真的不记得很多语法了。

我只能说，这些东西看起来像是 1980 年代中后期 IBM 系统上的脚本语言的衍生版本。

它当然不是 COBOL 或 REXX。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-21T18:02:02.447

我不确定，但看起来可能是 REXX。看一看：

[http://en.wikipedia.org/wiki/Rexx](http://en.wikipedia.org/wiki/Rexx)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-22T16:54:44.077

这是一个 CLIST 代码。

以前，有很多 CLIST 代码，现在 REXX 已经占据了自己的位置。但 CLIST 仍在许多大型机系统中使用。