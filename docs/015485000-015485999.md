# StackOverflow 问答 15485000-15485999

# javascript - Trouble Displaying Words in Sequence In JQuery and JavaScript

> ID：15485000
> 
> 赞同：0
> 
> 时间：2013-03-18T19:15:05.487
> 
> 标签：javascript, jquery, delay

I have been trying to make a simple word sequence display program in jQuery. I want to achieve a simple program that can take sentence as input and its output can be displayed in sequence of words.

Now how can I make this program show these words in sequence like below

```
 <div class="bar">One Two </div>  //(hide it after few seconds and show next line)
 <div class="bar">Three Four </div> //(hide it after few seconds and show next line)
 <div class="bar">Five Six </div> //(hide it after few seconds and show next line)
 <div class="bar">Seven </div> //(hide it after few seconds) 
```

The number of words displayed at a time in sequence can be configured using wordCount var in my program

[My Program at JSFiddle](http://jsfiddle.net/kzvikzvi1/9T4HE/12/)

I have tried a lot of options on this and its always displaying the last word "Seven" in the div. The animation seems to work right amount of time, that makes me think it has to do with the way JS handles delay in animations.

I guess this goes back to the clear understanding of few things Not sure how JavaScript is handing the delay here.

I have tried following but did not work - setTimeout - calling the function with a delay - jQuery.delay() call

When I put the console.log messages it does show me all the words in sequence however the div always contains the last word.

I guess JavaScript is not waiting for the animations to complete and the last word reaches too soon and animation continues later.

I guess the main line of code to look at would be

```
 $('.bar').fadeIn(1000).text(displayWords).fadeOut(1000); 
```

Any help and insight on this would be greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:28:16.300

Try below version using `setInterval`,

```
var words = $('.foo').text().split(' ');
var index = 0;
var wordCount = 3;

var showHide = setInterval(function () {
    var displayWords = "";

    var mx = index + wordCount;
    if (mx > words.length) mx = words.length;
    for (var i = index; i < mx; i++) {
        displayWords += words[i] + " ";
    }

    $('.bar').fadeIn(1000).text(displayWords).fadeOut(1000);
    index = mx;
    if (index > words.length) clearInterval(showHide);    
}, 2000); 
```

**DEMO:** [http://jsfiddle.net/9T4HE/15/](http://jsfiddle.net/9T4HE/15/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:29:15.647

Have a look at jQuery.queue()...

[http://api.jquery.com/queue/](http://api.jquery.com/queue/)

here is the code from the above url:

```
var div = $("div");
function runIt() {
    div.show("slow");
    div.animate({left:'+=200'},2000);
    div.slideToggle(1000);
    div.slideToggle("fast");
    div.animate({left:'-=200'},1500);
    div.hide("slow");
    div.show(1200);
    div.slideUp("normal", runIt);
}
function showIt() {
    var n = div.queue("fx");
    $("span").text( n.length );
    setTimeout(showIt, 100);
}
runIt();
showIt(); 
```

The runIt() method adds the animations to the queue and the showIt method invokes the queue with a timeout.

The URL above also shows a demo of various animations running in succession.

HTH

# r - 如何从 .csv 文件中绘制 x 轴值？

> ID：15485005
> 
> 赞同：1
> 
> 时间：2013-03-18T19:15:28.890
> 
> 标签：r

我有 date1 列，其中包含一个日期行。此行包含格式为 dd/mm/yyyy 的日期

要直接绘制日期值，我正在使用：

```
axis(1, at=1:5, lab=c("01/01/2013" , "01/02/2013" , "01/03/2013" , 
, "01/04/2013" , , "01/05/2013")) 
```

要从 .csv 文件中读取值，我需要类似的东西？: axis(1, at=1:5, lab=c(date1$date)) 我想我需要删除'at'参数，因为日期数是动态的。

这是整个代码：

```
g_range <- range(0, date1$links)
plot(date1$links, type="o", col="blue", ylim=g_range, 
   axes=FALSE, ann=FALSE)
axis(1, at=1:5, lab=c("01/01/2013" , "01/02/2013" , "01/03/2013" , 
, "01/04/2013" , , "01/05/2013"))
box()
title(main="Additions", col.main="red", font.main=4)
axis(2, las=1, at=50*0:g_range[2]) 
```

这是正在读取的文件的格式：

```
value , links 
18/03/2013,100 
19/03/2013,200 
20/03/2013,300 
21/03/2013,400 
22/03/2013,500 
```

我目前正在阅读链接列，但想更新代码以读取日期，因为现在日期值是在 r 代码本身中设置的。通过动态，我的意思是 .csv 文件可以包含日期和链接值的变量列表，因此在上面的示例中，有 5 个值/链接对，但可能有 6 个或 7 个或 8 个等...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:39:36.173

不清楚你想做什么，畏缩你没有给出一个可重复的例子，也不清楚什么是动态的。我认为，您可以使用该函数`axis.Date()`获取包含日期的对象并生成带有适当标签的轴。

这里有一个例子：

![在此处输入图像描述](../Images/67c3d02129a736fffdc554d6344cbc10.png)

我创建了一些虚拟情节...

```
random.dates <- seq(as.Date("01/01/2013",format='%d/%m/%Y'),
                    as.Date("01/05/2013",format='%d/%m/%Y'),length.out=50)
plot(random.dates, 1:50, xaxt="n",main='pretty axes dates',type='o') 
```

然后我将您的字符串向量强制转换为日期向量

```
at =as.Date(c("01/01/2013" , "01/02/2013" , "01/03/2013"  , 
              "01/04/2013" ,  "01/05/2013"),format='%d/%m/%Y') 
```

注意`axis.Date`参数格式的调用与用于将字符串强制为日期的格式不同...

```
axis.Date(1,at=at,format='%d/%m/%Y') 
```

**编辑***

何读取 csv 文件：

```
dat <- read.table(text='value , links 
18/03/2013,100 
19/03/2013,200 
20/03/2013,300 
21/03/2013,400 
22/03/2013,500',header=TRUE,sep=',')

dat$value <- as.Date(dat$value,format='%d/%m/%Y') 
```

# javascript - 使用带有分页的jsonrest时Gridx中的客户端过滤？

> ID：15485007
> 
> 赞同：2
> 
> 时间：2013-03-18T19:15:31.017
> 
> 标签：javascript, dojo, grid

我正在使用带有 jsonrest 的 Gridx 作为存储和分页模块。过滤只能在客户端完成吗？目前它向 jsonrest 存储发送请求并查询服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-04T20:08:57.510

是的，可以这样做，请参阅： [https](https://github.com/oria/gridx/wiki/How-to-filter-Gridx-with-any-condition) ://github.com/oria/gridx/wiki/How-to-filter-Gridx-with-any-condition ，

只需排除有关服务器端模式的部分，gridx 将在客户端执行过滤，仅根据需要查询服务器以填充页面上的行。

# python - 如何使用 mongokit 在 find() 之后更新对象？

> ID：15485008
> 
> 赞同：0
> 
> 时间：2013-03-18T19:15:33.110
> 
> 标签：python, mongodb, mongokit, nosql

```
@connection.register 
class User(Document):

    __database__ = 'foo' 
    __collection__ = 'bar' 

    structure = {
    '_id' : ObjectId,
    'Email' : basestring,       
}

col = connection['uplace']['user']
user = col.find()[2]
user2 = User(user)
user2['Email'] = 'newEmail@rit.edu'
#connection.register([user])
#user['Wall'][1]['Reply'][0]['Message'] = 'test new message'
#print user
user2.save() 
```

但是，当我运行它时，我收到了该对象，它是我的 UserDocument 的一个实例。但是引发了这个异常：

```
 server_version = tuple(self.connection.server_info()['version'].split("."))
  File "/Library/Python/2.7/site-packages/mongokit/document.py", line 628, in __getattribute__
    raise ConnectionError('No collection found') 
mongokit.mongo_exceptions.ConnectionError: No collection found 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:55:07.930

正确的方法是：

```
user2 = col.User(user)
user2.pop('_id')  # you should remove the _id or saving user2 will replace user
user2["Email"] = "newEmail@rit.edu"
user2.save() 
```

# c# - list 产生特定的组合

> ID：15485012
> 
> 赞同：-2
> 
> 时间：2013-03-18T19:15:45.033
> 
> 标签：c#, math, permutation, indexing

我有一个 C# 列表：

1.  一个
2.  乙
3.  一个
4.  C
5.  D
6.  一个

我怎样才能找到下一个字母的索引总是更大的所有字母组合。因此，在这种情况下，组合可能是：A、AB、ABA、C、CD、ADA...但不是 DC、CB...，因为对于上一个示例，B 索引位于 C 索引之前。使用索引，1、12、123、146、134 会被接受，但像 143 这样的东西不会被接受，因为 4 大于 3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:36:33.520

只需生成 set 的所有非空子集`{1,2,3,4,5,6}`。对于每个这样的子集，只需取其数字（按递增顺序）并将它们转换为相应的字母。这样，您将获得所有可能的字母序列。然后，如有必要，您必须删除重复项 - 例如`A`将由 sets`{1}`和.`{3}``{6}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:56:38.720

此代码生成所有组合（作为列表的序列）：

```
 static void Main(string[] args)
    {
        GetCombination(new List<char> { 'A','B','C' });
        Console.ReadKey();
    }
    static void GetCombination(List<char> list)
    {
        for (int i = 1; i < Convert.ToInt32(Math.Pow(2, list.Count)); i++)
        {
            int temp = i;
            string str = "";
            int j = Convert.ToInt32( Math.Pow(2, list.Count - 1));
            int index = 0;
            while (j > 0)
            {
                if (temp - j >= 0)
                {
                    str += list[index];
                    temp -= j;
                }
                j /= 2;
                index++;
            }
            Console.WriteLine(str);
        }
    } 
```

输出是：

```
C
B    
BC
A
AC
AB
ABC 
```

# c# - 编写一个不调用另一个异步方法的异步方法

> ID：15485013
> 
> 赞同：0
> 
> 时间：2013-03-18T19:15:46.680
> 
> 标签：c#, async-await

我知道如何编写一个调用其他异步方法的异步方法，例如`DownloadFileAsync`or `ReadAsStringAsync`。如何编写一个不使用框架内置异步功能的程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T19:38:25.490

我假设您的意思是说您想实现自己的异步功能。异步调用方法只是意味着调用线程没有被阻塞。这很有用的一种情况是当您希望在某些后台操作完成时继续工作。正如您所提到的，框架中有各种可用的方法可以异步执行（通常使用约定 MethodNameAsync）。要启动您自己的方法之一，您可以启动自己的线程并让它执行您的代码。

例如。 [TaskFactory.StartNew](http://msdn.microsoft.com/en-us/library/dd321439.aspx)可用于通过向其传递一个[Action](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)（委托）来启动您的代码。

# javascript - 多个 Javascript 在页面中异步加载

> ID：15485014
> 
> 赞同：0
> 
> 时间：2013-03-18T19:15:53.887
> 
> 标签：javascript

```
<script type="text/javascript">
function loadScript(scriptpath) {
    var s = document.getElementsByTagName('script')[0];
    var ss = document.createElement('script');
    ss.type = 'text/javascript';
    ss.async = true;
    ss.src = scriptpath;
    s.parentNode.insertBefore(ss, s);
}
loadScript('compressed1.js');
loadScript('compressed2.js');
</script> 
```

但我收到错误说 SS 未定义 有人可以帮我完成上述编码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:17:59.823

`var ssa`

保持变量名称一致。给出有意义的名称通常是个好主意，例如`newScript`

# python - 1 个 sock.execute 事务，具有 2 个数据结构

> ID：15485015
> 
> 赞同：0
> 
> 时间：2013-03-18T19:16:02.033
> 
> 标签：python, openerp

我已经读到可以记录合作伙伴及其地址，所有这些都在对 Web 服务的一次调用中完成。示例总是调用 2 sock.execute

```
partner = {
   'name': 'Fabien Pinckaers',
   'lang': 'fr_FR',
}

partner_id = sock.execute(dbname, uid, pwd, 'res.partner', 'create', partner)

address = {
    'partner_id': partner_id,
    'type' : 'default',
    'street': 'Chaussée de Namur 40',
    'zip': '1367',
    'city': 'Grand-Rosière',
    'phone': '+3281813700',
    'fax': '+3281733501',
}

address_id = sock.execute(dbname, uid, pwd, 'res.partner.address', 'create', address) 
```

但是我如何将其称为 1 个 sock.execute 中的 1 个事务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:09:33.147

试试这样：

```
partner = {

    'name': 'Fabien Pinckaers',
    'lang': 'fr_FR',
    'address': [(0,0,{
        'type': 'default',
        'street': 'Chaussée de Namur 40',
        'zip': '1367',
        'city': 'Grand-Rosière',
        'phone': '+3281813700',
        'fax': '+3281733501',
    })]
} 
```

或尝试这样：

```
 address = {
    'type' : 'default',
    'street': 'Chaussée de Namur 40',
    'zip': '1367',
    'city': 'Grand-Rosière',
    'phone': '+3281813700',
    'fax': '+3281733501',
}

partner = {
   'name': 'Fabien Pinckaers',
   'lang': 'fr_FR',
}

partner.update({'address': [(0,0,address)]}) 
```

希望这有帮助

# java - 位移问题

> ID：15485016
> 
> 赞同：1
> 
> 时间：2013-03-18T19:16:03.823
> 
> 标签：java

给定以下代码：

```
public class Something {
public static void main(String[] args) {
    int num = 1;

    num <<= 32;
    System.out.println(num); 

    num = 1;
    for (int i = 0 ; i < 32; i++)
        num <<= 1;
    System.out.println(num);
}
} 
```

第一个输出（来自 num <<= 32）是 1。

第二个输出（来自 for 循环）是 0。

我不明白..它对我来说看起来一样..两种方式都将“1”数字（lsb）移动了32次，结果不同。

谁能解释一下？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T19:17:47.240

> 谁能解释一下？

绝对地。基本上，移位操作对`int`正确的操作数进行掩码，以获得 [0, 31] 范围内的值。移位操作`long`将其屏蔽以获取 [0, 63] 范围内的值。

所以：

```
num <<= 32; 
```

相当于：

```
num <<= 0; 
```

从[JLS 的第 15.19 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.19)：

> 如果左侧操作数的提升类型是 int，则只有右侧操作数的五个最低位用作移位距离。就好像右手操作数受到按位逻辑与运算符 & (§15.22.1) 的影响，掩码值为 0x1f (0b11111)。因此，实际使用的移位距离始终在 0 到 31 的范围内，包括 0 到 31。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:18:35.717

对于位移位运算符`int`，仅使用[5 个最低位](http://www.xyzws.com/Javafaq/how-do-the-bitwise-shift-operators-work/12)。什么`<< 32`也不做；它相当于`<< 0`，因为 32 的最后 5 位是 0。但是`<< 1`循环中的操作每个都按预期执行。

# css - div 在添加项目时移动 div

> ID：15485017
> 
> 赞同：0
> 
> 时间：2013-03-18T19:16:04.957
> 
> 标签：css, html, layout

我有一个容器 div 和 2 个 div 应该是相同的高度。#Sidebar div 在左侧，而 #Content div 应该在右侧

每当我向侧边栏添加一些东西时，它都会向下推内容 Div 并且有点难过

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><!-- InstanceBegin template="/Templates/2009_07.dwt.php" codeOutsideHTMLIsLocked="false" -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>View Applicants</title>

<style type ="text/css">
li
{
display:inline;

background-color: #c5e8cf;
}

a.menu:link {color: #2b2f2c;}
a.menu:visited {color: #2b2f2c;}
a.menu:hover {background-color: #dde504;}

a.side { border-bottom: 2px solid black;
    background-color: #e3e7ec;
    }
a.side:link {color: #2b2f2c;}
a.side:visited {color: #2b2f2c;}
a.side:hover {background-color: #dde504;}
label.side {width: 131px;
        display:inline-block;
        font-size: 20px;
        background-color: #e3e7ec;
        border-bottom: 2px solid black;
        padding-bottom: 20px;
        }
label.side:hover { background-color: #dde504;}

div#header {
    position: float;
    background-image: url("../images/header.jpg");
    background-repeat: no-repeat;
    border-bottom: solid 1px #999999;
    height: 97px;
           Width: 1000px;
        margin-left: 114px;
        margin-top: 10px;
        background-size: 100%;
}

div#menu { 
position: float;    
border-left: solid 1px #999999;
border-right: solid 1px #999999;
border-bottom: solid 1px #999999;
Width: 998px;
      margin-left: 115px;
padding-top:5px;

background-color: #e3f6ea;
}
#menu-content { 
margin: auto;
width:100%;
background-color: #c5e8cf;

}

div#container{

border-left: solid 1px #999999;
border-right: solid 1px #999999;
border-bottom: solid 1px #999999;
Width: 998px;
margin-top:3px;
margin-left:115px;
height: auto;
overflow: hidden;
}

div#sidebar { 
    position: relative;
border:2px solid #999999;
Width: 131px;

padding-bottom: 1000px;
margin-bottom: -1000px;

background-color: #c5cfd9;
overflow: hidden;
}

div#content {
position: relative;
padding-bottom: 1000px;
margin-bottom: -1000px;
border-left: solid 1px #999999;
top: -65px;
left: 132px;
background-color: #f6f4f4;
}

div#footer { position: relative;
        border: solid 2px #999999;

        width: 996px;
        height: 50px;
        background-color: #FFFFFF;
        margin-left: 115px;
}

#body { background-color: #6b86a3;}

</style>

</head>

<body id = "body" >

<div id="header"> </div>
<div id = "menu"> 

<div id="menu-content">
<ul>
      <li style="margin-left:275px;" class="link"><a class="menu" href="/index.php" >Home</a></li>

      <li ><a class="menu" href="/images/header/jpeg" >View Applicant</a>

  </li>
      <li><a class="menu" href="../images/header.jpg">View Applicants</a></li>

  </ul>
</div>
</div>
  <div id="container" >
    <div id="sidebar"> 
    <a class="side" href="#"><label class = "side">  Testing sidebar  </label></a>
       <a class="side" href="#"><label class = "side">  Testing sidebar  </label></a>
    </div>
    <div id="content">

</div>
</div>
<div id ="footer"> </div>

</body>
</html> 
```

对 css 稍有新意。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:24:12.313

这将更常见于您想要实现的目标：

**CSS**

```
#container {
    border: solid 1px #999999;
    border-top: none;
    width: 998px;
    margin-top: 3px;
    margin-left: 115px;
}

#sidebar {
    float: left;
    width: 131px;
    border: 2px solid #999999;
}

#content {
    float: left;
    width: 131px;
    border-left: 1px solid #999999;
}

.floatClear {
    clear: both;
} 
```

**HTML**

```
<html>
    <head>
        <title>Page</title>
    </head>
    <body>
        <div id="container">
            <div id="sidebar">
                Text
            </div>
            <div id="content">
                Text
            </div>
            <div class="floatClear"></div>
        </div>
    </body>
</html> 
```

这里实际上发生的是你排列两个左浮动`<div>`的并使用 a`float: clear;`来排除`block`-type`<div>`的换行符。`#container`只有当它们的宽度（包括 padding/margin/border(left/right)）都比it's更大时，它们才会相互包裹`width`。

通过向 CSS 添加更多内容`margin-left`，`#content`您可以将其放在任何您想要的位置，只要有空间将其与`#sidebar`div 一起包含。

**小额外**

为了避免填充/边框使您的宽度`<div>`更宽的经典样式，您可以使用更新的`box-sizing`功能，其中所有填充和边框宽度将被推到内部，而不是使框比您在 CSS 样式表中指定的更大：

```
-webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
-moz-box-sizing: border-box;    /* Firefox, other Gecko */
box-sizing: border-box; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:22:11.920

# [演示小提琴](http://jsfiddle.net/mohammadAdil/ETKt9/)

`float: top;`是错的;

`float`只能是`left`或`right`；

添加`float:right;`到您的侧边栏和`float:left;`您的容器

```
 div#sidebar { 
        position: relative;
    border:2px solid #999999;
    Width: 131px;

    padding-bottom: 1000px;
    margin-bottom: -1000px;

    background-color: #c5cfd9;
    overflow: hidden;

    float:right;

    }

    div#content {
    position: relative;
    padding-bottom: 1000px;
    margin-bottom: -1000px;
    border-left: solid 1px #999999;
    top: -65px;
    left: 132px;
    background-color: #f6f4f4;

    float:left;

    } 
```

# [学习 CSS](http://www.w3.org/Style/Examples/011/firstcss.en.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T19:34:27.283

`max-height`CSS 属性应该可以完成这项工作。

将#Sidebar 和#Content 的最大高度设置为相同的值。

`overflow:scroll`如果您期望它们中的任何一个的高度超过最大高度，您可以添加。

# arrays - MPI 错误 - 发生了什么？

> ID：15485019
> 
> 赞同：1
> 
> 时间：2013-03-18T19:16:09.683
> 
> 标签：arrays, malloc, mpi, recv

这可能是一个非常愚蠢的问题，但我在这段代码中看不到我的错误......输出错误，排名 1 打印：

3.000000 - 3.000000 - 3.000000 - 3.000000 - 3.000000 - 3.000000 - 3.000000 -
3.000000 - 3.000000 - 3.000000 - 3.000000 - 3.000000 - 3.000000 -
3.000000 - 3.000000 - 3.000000 - 3.000000
- 3.000000 - 3.000000 - 3.000000 -
3.000000 - 0.000000 - 0.000000 - 0.000000 - 0.000000 -

我需要使用 MPI_Recv 而不是 Bcast ...但是发生了什么？=/这是我的malloc？或者我不能使用 MPI_Recv 发送整个矩阵吗？为什么整个数组不去另一个进程？

```
#include <stdio.h>
#include <stdlib.h>
#include "mpi.h"

int main(int argc, char **argv){
    int rank, size;
    int lines, cols;
    int i, j;

    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    MPI_Comm_size(MPI_COMM_WORLD, &size);

    MPI_Status status;

    lines = 5;
    cols = 5;

    if(rank == 0){
        double** array = (double**) malloc(lines*sizeof(double*));
        for(i=0; i<lines; i++)
            array[i] = (double*) malloc(cols*sizeof(double));

        for(i=0; i<lines; i++)
            for(j=0; j<cols; j++)
                    array[i][j] = 3;

        for(i=0; i<lines; i++){
            for(j=0; j<cols; j++)
                    printf("%f - ", array[i][j]);
            printf("\n");
        }

        MPI_Send(&array[0][0], lines*cols, MPI_DOUBLE, 1, 0, MPI_COMM_WORLD);
    }
    else{
        double** arrayNew = (double**)malloc(lines*sizeof(double*));
        for (i=0; i<lines; i++)
                arrayNew[i] = (double*) malloc(cols*sizeof(double));

        MPI_Recv(&arrayNew[0][0], lines*cols, MPI_DOUBLE, 0, 0, MPI_COMM_WORLD, &status);

        for(i=0; i<lines; i++){
                for(j=0; j<cols; j++)
                        printf("%f - ", arrayNew[i][j]);
                printf("\n");
        }
    }
    MPI_Finalize();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:55:57.050

这一直出现，问题是 C 和多维数组。

问题是这条线

```
 MPI_Send(&array[0][0], lines*cols, MPI_DOUBLE, 1, 0, MPI_COMM_WORLD); 
```

`lines*cols`告诉 MPI从 position 开始发送双打`&(array[0][0])`，同样这条线

```
 MPI_Recv(&arrayNew[0][0], lines*cols, MPI_DOUBLE, 0, 0, MPI_COMM_WORLD, &status); 
```

告诉 MPI`lines*cols`从 position 开始将双打接收到内存中`&(array[0][0])`。但是这个分配：

```
 double** arrayNew = (double**)malloc(lines*sizeof(double*));
    for (i=0; i<lines; i++)
            arrayNew[i] = (double*) malloc(cols*sizeof(double)); 
```

不会生成连续的双精度数组`lines*cols`；它制作双精度`lines`数组`cols`，这些行可能分散在整个内存中。您需要执行以下操作：

```
 double** array = (double**) malloc(lines*sizeof(double*));
    array[0] = (double *)malloc(lines*cols*sizeof(double));
    for(i=1; i<lines; i++)
        array[i] = &(array[0][i*cols]);

    /* ... */

    free(array[0]);
    free(array); 
```

分配和释放`lines*cols`可以发送和接收的连续内存块。

# android - AsyncTaskLoader 不正确的方法调用 onLoadFinished

> ID：15485023
> 
> 赞同：0
> 
> 时间：2013-03-18T19:16:14.737
> 
> 标签：android

我正在尝试处理 AsyncTaskLoader。我实现了 Interface LoaderCallbacks 如下：

```
public class MainActivity extends Activity implements LoaderCallbacks<String> {
...
...
@Override
public Loader<String> onCreateLoader(int id, Bundle args) {
    Log.w("loader","onCreate");
    return new JSONLoader(this);
}

@Override
public void onLoadFinished(Loader<String> arg0, String arg1) {
        Log.w("loader","finish");

}

@Override
public void onLoaderReset(Loader<String> arg0) {
    Log.w("loader","onReset");
    // TODO Auto-generated method stub

}

public void useLoader() {

    Log.w("loader","useLoader");
      Bundle args = new Bundle();
      // ...
      // fill in args
      // ...

      Loader loader = 
         this.getLoaderManager().initLoader(0, args, this);

      Log.w("HashLoader",String.valueOf(loader.hashCode()));
      // with support library: 
      // Loader loader = 
      //    context2.getSupportLoaderManager().initLoader(0, args, this);
      // call forceLoad() to start processing
      loader.forceLoad();

   } 
```

我收到按钮的挂起事件：

```
btn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            useLoader();
        }
    }); 
```

当我第一次按下按钮时，在加载程序之后调用方法 onLoadFinished()。但是当第二次按下按钮时，它会调用第一个 onLoadFinished()。

日志猫：

```
useLoader
onCreate
1087415440
good
finish
useLoader
finish
1087415440
good 
```

关于 AsyncTaskLoader 的一点点：

```
public class JSONLoader extends AsyncTaskLoader<String> {

public JSONLoader(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
}

@Override
public String loadInBackground() {
            try {
        Thread.sleep(5000);
    } catch (InterruptedException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    Log.w("loader","good");
        return " ";} 
```

为什么 onLoadFinished() 方法不等待线程结束？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:05:56.377

我认为该`initLoader`功能不会**破坏**并**创建**新的加载器。然后在第二次运行时，您的自定义加载程序已经“加载”=>它调用`onLoadFinish()`

`initLoader`尝试通过将调用替换为`restartLoader` ( [Reference](http://developer.android.com/reference/android/app/LoaderManager.html#restartLoader%28int,%20android.os.Bundle,%20android.app.LoaderManager.LoaderCallbacks%3CD%3E%29) )来销毁它并重新创建它

```
Loader loader = this.getLoaderManager().restartLoader(0, args, this); 
```

# javascript - 为什么我收到 TypeError: obj.addEventListener is not a function？

> ID：15485030
> 
> 赞同：21
> 
> 时间：2013-03-18T19:16:32.473
> 
> 标签：javascript, dom-events

这是我的代码：

```
function addEvent( obj, type, fn ) {
  if ( obj.attachEvent ) {
    obj['e'+type+fn] = fn;
    obj[type+fn] = function(){obj['e'+type+fn]( window.event );}
    obj.attachEvent( 'on'+type, obj[type+fn] );
  } else
    obj.addEventListener(type, fn, false);
}

function alertWinner(){
    alert("You may be a winner!");
}

function showWinner (){
    var aTag = document.getElementsByTagName("a");
    addEvent(aTag, 'click', alertWinner);
}

showWinner(); 
```

基本上，我在萤火虫控制台中工作，并试图在单击任何标签时弹出警报。

我看不到导致这不起作用的问题，并给了我问题标题中所述的错误（在萤火虫中查看）。有人吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-18T19:18:34.383

`document.getElementsByTagName`返回 DOM 元素的[NodeList](https://developer.mozilla.org/en-US/docs/DOM/NodeList)。每个元素都有一个`addEventListener`函数，但数组没有。

循环它：

```
function showWinner (){
    var aTags = document.getElementsByTagName("a");
    for (var i=0;i<aTags.length;i++){
        addEvent(aTags[i], 'click', alertWinner);
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-18T19:18:44.753

`aTag`是 的一个实例`DOMNodeList`，而不是来自`DOMElement`。

你可以这样做：

```
var aTags = document.getElementsByTagName("a");
var aTag = aTags[0]; 
```

但显然这种方法存在一个缺陷，即可能返回多个`a`元素。如果可能，您应该使用仅返回一个元素的不同选择器。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-25T04:37:45.313

不知道为什么，但我进入`addEvent is not defined`了 Firefox。`addEvent()`我什至在 MDN 上都找不到。我不得不使用这个：

```
function showWinner (){
    var aTags = document.getElementsByTagName("a");
    for (var i=0;i<aTags.length;i++){
        // addEvent(aTags[i], 'click', alertWinner);
        aTags[i].addEventListener("click", alertWinner);
    }
} 
```

# android - android微调器值集

> ID：15485041
> 
> 赞同：-1
> 
> 时间：2013-03-18T19:17:06.040
> 
> 标签：android, spinner

我有`activity`First 在这里发送值到 Second `activity`。

在第二个`activity`包含`textview`和`spinner`。这里`spinner`包含的值为 johncena ,Rock,undertaker....

所以`activity`我得到了 card2 和 Rock 的值，它们通过`intent`.so 传递到下一个屏幕，所以在下一个`activity` `cardNumber.setText(cardReceived);` 所以这里`textview`我们像上面一样给出`spinner`我们必须做的事情。

所以当我从第一个导航到下一个`activity`活动`spinner`值时，必须显示为 Rock。

但它显示默认值 johncena。

同样，如果我获得卡片 3 和承办商的值，那么如果我导航到第二个，`activity`那么它必须显示 card3 和承办商（对于`spinner`）。

但它显示 card3 和 johncena （默认值）

```
Intent send =new Intent(First.this, Second.class);

send.putExtra("card",cardList.get(position));  

send.putExtra("name",nameList.get(position));

startActivity(edit);

String cardReceived = getIntent().getStringExtra("card");

cardNumber =(EditText)findViewById(R.id.cardnumber); 

 cardNumber.setText(cardReceived);

String nameReceived = getIntent().getStringExtra("name");

    System.out.println("name "+nameReceived);

Spinner NameDetail = (Spinner) findViewById(R.id.spinner1);    
        List list = new ArrayList();    

        list.add("Johncena");
        list.add("Rock");   
        list.add("UnderTaker");         

        ArrayAdapter dataAdapter = new ArrayAdapter(this,android.R.layout.simple_spinner_item, list);

        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    cardDetail.setAdapter(dataAdapter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:25:54.353

我认为您将需要使用：

```
// Set this integer to be between 0 and N-1, where the adapter has N entries
// 0 is the first you put in the adapter, N-1 the last
int selection = 2;

cardDetail.setSelection(selection); 
```

# android - 以编程方式将列表中的项目添加到 TableLayout

> ID：15485044
> 
> 赞同：1
> 
> 时间：2013-03-18T19:17:09.980
> 
> 标签：android, tablelayout, android-tablelayout

我有一个正在开发的 Android 项目。我对 Android 开发相当陌生，所以我在 MainActivity.java 文件中有一些代码，我正在为其创建表格布局，但我的代码目前的方式是我只能从该列表中添加一项我可以在Activity.java 类来改变它，这样它就会以编程方式将我所有的麦当劳对象也添加到表中。我该怎么做才能将这两行都添加到 MainActivity.java 上的视图中？

Activity_Main.xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"     
     xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:paddingBottom="@dimen/activity_vertical_margin"
     android:paddingLeft="@dimen/activity_horizontal_margin"
     android:paddingRight="@dimen/activity_horizontal_margin"
     android:paddingTop="@dimen/activity_vertical_margin"
     tools:context=".ShelterActivity" >

 <TableLayout android:id="@+id/TableLayout01" android:layout_width="fill_parent" android:layout_height="wrap_content"  android:stretchColumns="0">

   <TableRow 
       android:id="@+id/TableRow01" 
       android:layout_width="wrap_content" 
       android:layout_height="wrap_content">

     <TextView 
         android:id="@+id/TextView01" 
         android:layout_width="wrap_content" 
         android:layout_height="wrap_content" 
         android:text="Address"
         android:width="250px"
         android:textStyle="bold"></TextView>
     <TextView 
         android:id="@+id/TextView02" 
         android:layout_width="wrap_content" 
         android:layout_height="wrap_content" 
         android:text="Distance"
         android:width="250px"
         android:textStyle="bold"></TextView>
     <TextView 
         android:id="@+id/TextView03" 
         android:layout_width="wrap_content" 
         android:layout_height="wrap_content" 
         android:text="ETA"
         android:width="250px"
         android:textStyle="bold"></TextView> 
   </TableRow>
 </TableLayout>  
 </LinearLayout> 
```

MainActivity.java

```
 protected void onCreate(Bundle savedInstanceState) {
             super.onCreate(savedInstanceState);
         setContentView(R.layout.activity_shelter);
         List<McDonalds> mcdList = new ArrayList<McDonalds>();

               ScrollView sv = new ScrollView(this);

                     // get a reference for the TableLayout
                     TableLayout ll = (TableLayout) findViewById(R.id.TableLayout01);

                     HorizontalScrollView hsv = new HorizontalScrollView(this);
               // create a new TableRow
                     TableRow row = new TableRow(this);

         //This will be replaced by a Read Only Stored procedure that gets the List of Shelters
         McDonalds mcdonalds = new McDonalds("720 N Main St, Roswell, NM", 1.08, 8.0);
         mcdList.add(mcdonalds);
         McDonalds mcdonalds1 = new McDonalds("1804 S Main St, Roswell, NM", 2.9, 12.0);
         mcdList.add(mcdonalds1);
         for (McDonalds mcD : mcdList){
              // create a new TextView
                    TextView t = new TextView(this);
                    TextView t1 = new TextView(this);
                    TextView t2 = new TextView(this);
        String mcdAddress = mcD.getAddress();
        String distance = mcD.getDistance().toString();
        String ETA = mcD.getETA().toString();
        t.setText(mcdAddress);
        t1.setText(distance);
        t2.setText(ETA);
        row.addView(t);
        row.addView(t1);
        row.addView(t2);

    }
    // add the TableRow to the TableLayout
    ll.addView(row,new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

} 
```

如上面的代码所示，列表中应该有两个项目，我需要一种方法来添加这两个项目，`ll.addView(row,new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));`但这会引发错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:51:44.560

你非常接近，但你必须做的是：

1.  从您的 xml 中删除您的 TableRow。
2.  始终在循环中创建一个新的 TableRow。
3.  您所有的 TextViews 都需要一个由`setLayoutParams(new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT))`;设置的布局参数。
4.  也在循环中将表格行添加到表格布局
5.  我会说 MATCH_PARENT 对于每个表格行宽会更好

另一种方法是制作一个xml文件，其中包含textViews。用 LayoutInflater.from(context).inflate(...) 填充 xml，填充所有 3 个通过 id 找到它们的文本视图，并将这个膨胀的 tableRow 添加到 tableLayout

# c++ - 从 dll c++ 获取字符串

> ID：15485046
> 
> 赞同：2
> 
> 时间：2013-03-18T19:17:11.837
> 
> 标签：c++, string, dll

我使用 eclipse 和 mingw 编译器（c++）。我想创建一个包含很多字符串的 dll 文件。之后我想打电话`LoadString()`来阅读字符串（[http://msdn.microsoft.com/en-us/library/windows/desktop/ms647486(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647486(v=vs.85).aspx)）

我的dll文件：

```
#define WIN32_LEAN_AND_MEAN
#define DLL_FUNC extern "C" __declspec(dllexport)

DLL_FUNC int __stdcall Hello() {

    return 0;

 } 
```

我的 cpp 文件：

```
#include <windows.h>
#include <stdio.h>

    int main () {

    typedef int (__stdcall *HelloProc)();

        HMODULE hdll = LoadLibrary("HelloWorld.dll");
        if( hdll == NULL){
            MessageBox(HWND_DESKTOP, "Wrong dll path", "Message", MB_OK);
        }
        else {
            typedef int (__stdcall *HelloProc)();

            HelloProc Hello = (HelloProc)GetProcAddress(hdll, "Hello@0");
            if(Hello == NULL){
                //LoadString();
                MessageBox(HWND_DESKTOP, "Hello is NULL", "Message", MB_OK);
            }
            else{
                Hello();
            }
        }

        return 0;
    } 
```

如何创建字符串？以及如何调用`LoadString()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T19:22:20.997

我认为您想阅读有关*资源*的信息，以便您可以构建一个包含字符串表的纯资源 DLL。尝试搜索您引用的 MSDN 站点，以获取**资源编译器**之类的内容，以及**如何构建仅资源 DLL**以及**如何使用字符串表**。我相信您会在 Microsoft 找到文档和示例，如果没有，在 Google 中找到。

哦，您的 DLL**不需要**只是资源，我从您的评论中得到了这一点“我想创建一个包含很多字符串的 dll 文件。” 如果您的 DLL 也包含代码，这实际上更容易（也许更*直接）。*然后你会想要搜索**将资源添加到 DLL**之类的东西。

# excel - Excel VBA变量值等于公式

> ID：15485054
> 
> 赞同：0
> 
> 时间：2013-03-18T19:17:40.260
> 
> 标签：excel, vba, variables, formula

我正在努力在 VBA 中分配变量值。我了解如何将 myVar 设置为等于 ActiveCell.Value ，如下所示：

```
ActiveCell.FormulaR1C1 = "=SUM(RC[1]:RC[7])"
myVar = ActiveCell.Value
MsgBox (myVar) 
```

是否可以将 myVar 设置为等于公式并跳过 ActiveCell.Value 行。我试过这个，但它不起作用。

```
myVar = "=SUM(RC[1]:RC[7])" 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:45:46.447

我不知道您的目标范围更广，因此我提出可能有用的想法。然而，它从技术的相对参考切换`FormulaR1C1`到技术的相对参考`Range.Offset()`。

```
myVar = WorksheetFunction.Sum(Range(ActiveCell.Offset(0, 1), ActiveCell.Offset(0, 7)))
MsgBox myVar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:26:08.750

是的你可以。首先设置`myVar`变量，然后将其应用于范围（ActiveCell 或任何其他范围对象）。

```
Dim myVar as String
Dim r as Excel.Range

Set r = ActiveCell

myVar = "=SUM(RC[1]:RC[7])"
r.FormulaR1C1 = myVar 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T21:44:48.790

如果您不需要您的公式与活动单元格相关，您还可以使用 short`[..]`来评估语句，例如：

```
MsgBox [SUM(B1:B7)] 
```

# nginx - 如果第一个链接返回“404 Not Found”，则重定向到另一个链接

> ID：15485055
> 
> 赞同：0
> 
> 时间：2013-03-18T19:17:44.643
> 
> 标签：nginx

如果第一个链接返回“404 Not Found”，我如何重定向到另一个链接？

我试过的

```
 location ^~ /video/ {
                    rewrite ^/video/(\w+)/(.+)$ /get.php?hash=$1&filename=$2 last;
                    rewrite ^/video/(\w+)/(.+)$ http://domain.com/get.php?hash=$1&filename=$2 last;
                    root /storage/;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:38:28.760

您可以将`error_page`指令添加到您的 nginx`location`块中：

请参阅[nginx 文档参考](http://wiki.nginx.org/HttpCoreModule#error_page)。

```
location ^~ /video/ {
    error_page   404          /video/404.php;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:36:27.980

[try_files](http://wiki.nginx.org/HttpCoreModule#try_files)可能会满足您的需要：

```
try_files first_link second_link third_link etc 
```

基本上，它将用户发送到可用的第一个链接。

# asp.net-mvc-4 - 结合 ASP.NET MVC4 捆绑和 require.js javascript 模块依赖

> ID：15485058
> 
> 赞同：12
> 
> 时间：2013-03-18T19:17:47.847
> 
> 标签：asp.net-mvc-4, requirejs

有没有办法使用 ASP.NET MVC4 的捆绑功能和 require.js 的 JavaScript 模块依赖功能

我想用 ASP.NET MVC4 捆绑功能加载我的所有模块，并使用 require.js 来组织它们之间的关系。

问题是 require.js 没有找到所需的依赖项，而所有模块都是通过包加载的。

我不想 require.js 去尝试异步加载文件我只是希望它通过包使用已经加载的模块。

在这种情况下，主文件应该是什么样子。

**我在_Layout.chtml**中有以下结构

 **```
@Scripts.Render("~/bundles/jquery",
                "~/bundles/jqueryval",
                "~/bundles/jslibs",
                "~/Scripts/require.js",
                "~/bundles/tjProductivity",
                “~/Scripts/tjpApp/main.js”
                )

@RenderSection（“脚本”，必需：假）
```

然后在每个脚本部分，我想通过 Bundle.config 加载将用于该页面的所有模块，但让 require.js 管理它们之间的依赖关系。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T13:38:14.650

可以使用RequireJS 的创建者提供的[almond.js](https://github.com/jrburke/almond)。

唯一的缺点是您必须始终在模块上添加模块名称......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T08:28:43.840

关于集成 requirejs 和 mvc 的一个很好的参考：http: [//www.codeproject.com/Articles/614507/Modular-Javascript-Using-Require-Js](http://www.codeproject.com/Articles/614507/Modular-Javascript-Using-Require-Js) 和 [http://www.stefanprodan.eu/2012/09/intro-requirejs -for-asp-net-mvc/](http://www.stefanprodan.eu/2012/09/intro-requirejs-for-asp-net-mvc/) - 注意它不使用捆绑。

> 本文向您展示了如何将 RequireJS 集成到 ASP.NET MVC 4 项目中，并以任何 C# 程序员无需高级 js 编程技能即可理解和使用它的方式构建 JavaScript 代码。**

# javascript - 如何将范围传递给nodejs中的回调函数？

> ID：15485059
> 
> 赞同：0
> 
> 时间：2013-03-18T19:17:50.400
> 
> 标签：javascript, node.js

我正在使用 nodejs 和 xml2js 模块。我正在读取一个 XML 文件并尝试在将 xml 转换为 json 对象后发出一个事件。我的代码如下所示：

```
var fs = require('fs'),
util = require('util'),
events = require('events'),
xml2js = require('xml2js');

var CIRCUITMODELSFILENAME = "ControlCircuitModels.xml";
var CIRCUITPARTMODELSFILENAME = "ControlCircuitParts.xml";
var circuitModels, circuitPartModels;

function ModelController() {
    if (false === (this instanceof ModelController)) {
        return new ModelController();
    }
    events.EventEmitter.call(this);
};

util.inherits(ModelController, events.EventEmitter);

ModelController.prototype.load = function (baseDir) {

    var parser = new xml2js.Parser({
        normalize: true,
        trim: true,
        explicitArray: false
    });

    fs.readFile(baseDir + "/" + CIRCUITMODELSFILENAME, function (err, data) {
        parser.parseString(data, function (err, result) {
            circuitModels = result;
            console.log('circuit models loaded');
            parser.reset();
            fs.readFile(baseDir + "/" + CIRCUITPARTMODELSFILENAME, function (err, data) {
            parser.parseString(data, function (err, result) {
                circuitPartModels = result;
                console.log('circuit part models loaded');
                moduleReady = true;
                this.emit("modelsloaded", null);
                });
            });
        });
    });
};

// public interface
exports.ModelController = ModelController; 
```

问题是发出事件时的范围丢失了。

```
this.emit("modelsloaded", null); 
```

这没有从 EventEmitter 继承发射。

如何将范围传递给 parser.parseString 函数？

谢谢克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:14:19.443

不确定这是否是最好的解决方案，除此之外它有效（看起来并不直接）：

```
fs.readFile(baseDir + "/" + CIRCUITMODELSFILENAME, function (err, data) {
    parser.parseString(data, function (err,result) {
        circuitModels = result;
        parser.reset();
        fs.readFile(baseDir + "/" + CIRCUITPARTMODELSFILENAME, function (err, data) {
            circuitPartModels = result;
            console.log('circuit models loaded');
            parser.parseString(data, function (err, result) {
                console.log('circuit part models loaded');
                this.emit("modelsloaded", null);
                moduleReady = true;
                circuitPartModels = result;
            }.bind(this));
        }.bind(this));
    }.bind(this));
}.bind(this)); 
```

# debugging - 在Android中调试时有没有办法释放线程使用的内存？

> ID：15485060
> 
> 赞同：0
> 
> 时间：2013-03-18T19:17:50.853
> 
> 标签：debugging, memory-leaks, bitmap, garbage-collection

我在调试一个在位图上运行一系列内存密集型操作的 Android 应用程序时遇到了一些问题。从谷歌的[调试提示](http://developer.android.com/tools/debugging/index.html#tips "谷歌开发者调试提示")中，我知道

> 调试器和垃圾收集器目前松散地集成在一起。VM 保证调试器知道的任何对象在调试器断开连接之前不会被垃圾收集。当调试器连接时，这可能会导致对象随着时间的推移而堆积。例如，如果调试器看到一个正在运行的线程，则即使在线程终止后，关联的 Thread 对象也不会被垃圾回收。

不幸的是，这意味着当我的应用程序在发布模式下运行良好时，任何在调试模式下运行的内存密集型线程都将被垃圾收集器忽略并被保留，因此随着越来越多的内存密集型线程被使用，越来越多的内存被使用创建，导致应用程序崩溃，因为它无法分配所需的内存。

有没有办法明确地告诉垃圾收集器应该收集这些线程，或者以其他方式解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:38:28.503

我最终通过生成一个`AsyncTask`而不是一个`Thread`. 垃圾收集器似乎更容易清除 AsyncTasks，因此我能够在调试模式下运行应用程序而不会出现问题。

AsyncTask 是产生后台操作的推荐方式。任何要在后台完成的工作都应该放在任务的`doInBackground(Params...)`方法中。AsyncTask 通常用于在完成后在 UI 线程上执行操作，但您可以通过简单地将`onPostExecute(Result)`方法留空或不存在来避免干扰 UI 线程。

# bash - 使用 bash 脚本从字符串中获取主机名

> ID：15485063
> 
> 赞同：0
> 
> 时间：2013-03-18T19:18:02.370
> 
> 标签：bash, sed, awk

在我的 bash 脚本中，我需要从命令输出中提取所有主机名以便进一步 ping：

```
for host in `echo $MXrecords | awk '{ printf "%s", $0; }'` ; do
    ping -c1 $host 2> /dev/null > /dev/null
    if [ "$?" -eq "0" ] ; then
        answ="OK"
    else
        answ="BAD"
    fi

    echo "\t$host [$answ]" 
done 
```

但我有一些额外的字符串：

```
40 [BAD]
alt2.aspmx.l.google.com. [OK]
30 [BAD]
alt3.aspmx.l.google.com. [OK] 
```

我通过 dig 得到 var MXrecords：

```
MXrecords=`dig @$DNSserver $domainName IN MX +short +multiline | awk '{ printf "\t%s\n", $0; }'` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:27:22.557

从输出看起来`$MXrecords`包含 MX 记录，包括它们的优先级：

```
40 alt2.aspmx.l.google.com.
30 alt3.aspmx.l.google.com. 
```

尝试替换这个：

```
`echo $MXrecords | awk '{ printf "%s", $0; }'` 
```

有了这个：

```
$(echo "$MXrecords" | awk '{print $2}') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:21:26.627

试试这个：

```
for host in ${MXrecords##* }; do
    if ping -c1 $host &>/dev/null; then
        answ="OK"
    else
        answ="BAD"
    fi

    echo "\t$host [$answ]" 
done 
```

## 笔记

*   `${MXrecords##* }`是一个[参数扩展](http://wiki.bash-hackers.org/syntax/pe)bash 技巧（内置）
*   `&>/dev/null`是 bash 的简写`>/dev/null 2>&1`
*   反引号 ( ```) 用于旧式命令替换。建议使用该`foo=$(command)`语法。内部的反斜杠处理`$()`不那么令人惊讶，并且`$()`更容易嵌套。见[http://mywiki.wooledge.org/BashFAQ/082](http://mywiki.wooledge.org/BashFAQ/082)
*   无需测试特殊变量`$?`，您可以像我在代码段中那样使用*布尔逻辑*

# windows-installer - installscript msi 手动更改功能被视为已安装

> ID：15485064
> 
> 赞同：0
> 
> 时间：2013-03-18T19:18:03.103
> 
> 标签：windows-installer, installshield, installscript-msi

这是我们的问题：我们有一个使用 Installscript MSI 安装的产品。有一次，我们切换到全新的 Installscript MSI 以正确处理版本控制并重组功能。在此期间，大部分安装程序保持不变，例如我们的数据库。在多个安装站点，由于数据库已经存在，并且我们不希望安装程序删除/创建数据库，我们决定取消选中数据库功能。

快进一年，我们现在正在进行产品升级，以修改数据库的结构。因为我们在运行较新的安装程序时忽略了安装数据库功能，所以这些 SQL 脚本没有运行。这是一个主要问题，因为我们希望以这种方式继续升级我们的产品。我的问题是：是否有一种简单的方法可以更改安装（MSI 数据库？）以便认为已安装数据库功能？

一些规定：我们不考虑重新运行设置并以这种方式添加功能的选项。安装程序的设计不恰当，无法优雅地处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:42:13.057

请参见：

[主要升级与次要升级与小型更新](http://kb.flexerasoftware.com/doc/Helpnet/installshield12helplib/MajorMinorSmall.htm)

在次要升级方案中，Windows Installer 不支持重构功能树。这需要进行重大升级。

# php - 在重复密钥更新..数据库密钥？

> ID：15485065
> 
> 赞同：1
> 
> 时间：2013-03-18T19:18:11.027
> 
> 标签：php, mysql, sql, insert, pdo

我有一张桌子`(id, name, price, menu_id)`

我有一个页面，其中显示了每个项目的名称和价格，用户可以对其进行编辑。

但是当我提交时，它会创建新行。

索引在主键上。它应该放在别的东西上吗？

我尝试了以下方法：

```
INSERT INTO gerechten 
SET gerecht_naam = :naam, gerecht_prijs = :prijs, menu_id = :menuid 
ON DUPLICATE KEY 
UPDATE gerecht_naam = :naam, gerecht_prijs = :prijs 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:23:03.690

`unique key`每当您的表中发生任何崩溃时，您的查询都会转换为更新。由您决定此密钥应放置在何处。例如，您的查询可能是：

```
INSERT INTO `gerechten` (`name`, `price`, `menu_id`) 
VALUES  (:name, :price, :menuid)
ON DUPLICATE KEY UPDATE 
    name = :name, 
    price = :price 
```

`name` **例如，在AND** 上具有唯一索引`menu_id`。（我相信只要在不同的菜单中，可以有多次相同的名称）

当然，如果有各种字段组合必须是唯一的，这是一个有问题的情况，也许您应该使用不同的方法，例如`select ... lock`检查正在编辑的值是否存在的语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:22:24.463

您需要向列和/或添加一个UNIQUE键[（](http://dev.mysql.com/doc/refman/5.1/en/constraint-primary-key.html)您可以让两列定义行的唯一性）。`gerech_naam``gerech_prijs`

如果您要对表实现这些唯一键，您必须意识到您仍然会遇到问题，因为如果您更改名称或价格，它可能`insert`在数据库中，因为您提供的数据不存在于桌子。

# c# - 压缩重复的 if 语句

> ID：15485066
> 
> 赞同：0
> 
> 时间：2013-03-18T19:18:15.193
> 
> 标签：c#, if-statement, repeat

我有以下代码，它扫描一个目录并将其文件名中包含“a”的文件放入一个新文件夹 A。同样，它将文件名中包含“b”的文件放入一个名为 B 的新文件夹中。因为 if 语句是基本相同，唯一改变的是字母“a”或“b”并被发送到 destA 或 destb （目标），我该如何修剪这段代码？我知道有更好的方法，因为大部分代码都是重复的......谢谢。

```
static void Main()
{
    string path = @"C:\Users\me\Desktop\FOLDER";
    string destA = @"C:\Users\me\Desktop\FOLDER\A";
    string destB = @"C:\Users\me\Desktop\FOLDER\B";

    DirectoryInfo dir = new DirectoryInfo(path);
    FileInfo[] filesxx = dir.GetFiles();
    foreach (FileInfo filexx in filesxx)
    {
        if (filexx.Name.Contains("a"))
        {
            if (!Directory.Exists(destA))
                Directory.CreateDirectory(destA);
            Console.WriteLine(filexx);
            filexx.CopyTo(Path.Combine(destA, filexx.Name), true);
        }
        else if (filexx.Name.Contains("b"))
        {
            if (!Directory.Exists(destB))
                Directory.CreateDirectory(destB);
            Console.WriteLine(filexx);
            filexx.CopyTo(Path.Combine(destB, filexx.Name), true);
        }　
        else
        {
            Console.WriteLine("Other: ", filexx);
        }
    }
    Console.Read();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:02:32.410

如果您正在寻找的只是更少的代码，那么应该这样做。

```
 public static void Main()
        {
            const string TargetPath = @"C:\Users\me\Desktop\FOLDER";
            var dir = new DirectoryInfo(TargetPath);
            var files = dir.GetFiles();
            foreach (var file in files.Where(file => !CopyFile(TargetPath, file, "a")).Where(file => !CopyFile(TargetPath, file, "b")))
            {
                Console.WriteLine("Other: " + file.Name);
            }

            Console.Read();
        }

        private static bool CopyFile(string dir, FileInfo file, string match)
        {
            if (!file.Name.Contains(match))
            {
                return false;
            }

            dir = dir + "\\" + match.ToUpper();
            if (!Directory.Exists(dir))
            {
                Directory.CreateDirectory(dir);
            }

            Console.WriteLine(file);
            file.CopyTo(Path.Combine(dir, file.Name), true);
            return true;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:53:40.327

创建一个方法，如：

```
private Boolean MoveFile(FileInfo filexx, String nameMatch, String destDirectory) {
  Boolean result = false;
  if (filexx.Name.Contains(nameMatch)) {
    if (!Directory.Exists(destDirectory)) {
      Directory.CreateDirectory(destDirectory);
    }
    Console.WriteLine(filexx);
    filexx.CopyTo(Path.Combine(destDirecotry, filexx.Name), true);
    result = true;
  }
  return result;
} 
```

然后根据需要调用它。

```
foreach(FileInfo filexx in filesxx) {
  if (!MoveFile(filexx, "a", destA)) {
    if (!MoveFile(filexx, "b", destB)) {
      Console.WriteLine("Other: ", filexx);
    }
  }
} 
```

当然，这里有一个潜在的优先级问题。如果文件名为“abcd”怎么办？它应该去`A`文件夹还是`B`文件夹？

# css - 链接图片旁边的文字

> ID：15485070
> 
> 赞同：0
> 
> 时间：2013-03-18T19:18:20.733
> 
> 标签：css, image, hyperlink

我知道如何通过将 float:left 应用于 img 标签来将文本放在图像旁边，但是当我给它一个链接时，例如`href="#"`文本不会粘在图像上，它会掉下来。为了提供有关该项目的更多信息，我`<a>`在标签中的`<p>`标签是 display: inline-block; 我应用于 img 标签的 css 是：

```
float:left;
margin-right: 15px;
border:0px; 
```

那么为什么会这样呢？我希望我的图像能像我不把它放在`<a>`标签之间时一样站立。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:26:10.527

这`float: left;`意味着元素浮动到同一父级中内容的左侧。由于您将图像包装在`<a></a>`标签内，因此图像将浮动到`<a>`.

如果将浮动应用到`a`而不是`img`，则`a`将根据需要浮动到其父级内容的*左侧*。

# scope - 如何在没有 http-session 的情况下使用 CDI-@SessionScoped

> ID：15485073
> 
> 赞同：2
> 
> 时间：2013-03-18T19:18:32.780
> 
> 标签：scope, jax-rs, java-ee-6, cdi

CDI-@Sessionscoped 可以在没有可用的 http-session 时使用（例如，当使用 RESTful-WS 时？）。如果没有，是否有替代 @SessionScoped 的方法？我问是因为我需要一个应用程序状态，但我也被迫使用 JAX-RS。

出于某种原因，我可以在 RESTful-Service 中注入 @SessionScoped bean，但我知道，至少按照惯例，这是不允许的。同样使用@SessionScoped 需要在每个客户端请求的标头中发送 JSessionID-Cookie，并且由于该服务是在非浏览器环境中使用的，因此我不能确定是否可以使用 cookie...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:43:21.757

在 REST 环境`@SessionScoped`的情况下，在浏览器客户端（如果 REST 服务器支持会话）的情况下将作为例外工作，但在非浏览器客户端（如果客户端忽略 coockies）的情况下，将在每次调用时创建新 bean。

也许`@ApplicationScoped`对你有好处？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T18:13:52.497

您始终可以创建自己的上下文和范围。

# jquery - css div背景变得更向左

> ID：15485076
> 
> 赞同：0
> 
> 时间：2013-03-18T19:18:38.043
> 
> 标签：jquery, html, css

我有这个CSS类

```
#asdfasdful li .deleteFood{
    background-image:  url(http://localhost/asdfasdf/public/images/close.png);
    background-repeat: no-repeat;
    position: relative;
    float: right; right: 10px;
    width: 40px;
    height: 20px;
    margin-top: 5px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:40:18.693

我注意到您在与 float 属性相同的行上定义了一个“正确”属性。可能是您的错误的来源。

```
float: right; right: 10px; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T19:20:23.023

您需要在每一行添加 {clear: right;} ，或者将 line-height 调整为更大的值。

尝试这个：

```
#yourOrderFoodsItems ul li .deleteFood {
    clear: right;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T19:34:14.540

由于这是一个带有背景图像的 div，因此您需要使用`background-position`CSS 属性来移动图像。

[请参阅此处的文档](https://developer.mozilla.org/en/docs/CSS/background-position)

```
background-position: -10px;    /* to move the background 10px to the left... I think */ 
```

# jquery - jquery append and or html ie issue for dynamic html build

> ID：15485082
> 
> 赞同：2
> 
> 时间：2013-03-18T19:18:59.530
> 
> 标签：jquery, internet-explorer-8, nested

我一直在处理有关此问题的其他问题，但似乎与我的情况不符。我在使用 .appendTo 和 .html 的 jquery 嵌套元素方面遇到问题。这些在 IE9/Chrome/Firefox 中都可以正常工作。在早期版本的 IE 中，括号闭包似乎存在问题，但在我的情况下我无法纠正这个问题。

IE 错误消息：**“错误：意外的标识符、字符串或数字”**

这是较大嵌套的一个片段，如果我可以解决这部分问题，我可以将它复制到代码库的其余部分。**调试在.html()**处停止 JS

 **提前致谢

```
 $('<li/>', {
        id: lyrVar.liID,
        class: 'layer'
    }).html($('<input/>', {
        id: lyrVar.cbID,
        type: 'checkbox',
        onClick: "chkBox(" + "'" + lyrVar.cbID + "'" + ")",
        checked: lyrVar.chkState,
        name: lyrVar.Name,
        value: lyrVar.val
    })).appendTo('#layersList'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:40:09.363

该问题可能是由您在传递给的对象中用作键的未加引号的`class` [保留字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words)`$()`引起的。

尝试：

```
$("<li/>", {
    id: lyrVar.liID,
    "class": "layer"
}) 
```**

# jquery - Internet Explorer 上的 Xbox API JSON 请求

> ID：15485086
> 
> 赞同：0
> 
> 时间：2013-03-18T19:19:10.760
> 
> 标签：jquery, json, api, jsonp, xbox

我正在尝试使用非官方 Xbox API 请求 JSON 字符串，然后使用 VB.NET 处理它。

链接在这里; [非官方 Xbox API](https://xboxapi.com/)

使用下面的代码，我设法使用 Firefox 成功加载数据，但 IE 返回和“拒绝访问”错误；我猜这是因为这是使用 JSON 而不是 JSONP 的跨域请求。

有什么办法可以解决这个问题吗？即使是加载整个 JSON 字符串。我尝试使用 JSONP，但数据格式不正确。

```
 $.ajax({
                url: 'https://xboxapi.com/json/profile/RTriggerHappy',
                cache: false,
                dataType: 'json',
                crossDomain: true,
                success: function (data) {
                    $('#txtUsernameJS').val(data.Player.Gamertag);
                    $('#txtGamerScoreJS').val(data.Player.Gamerscore);
                    alert("worked");
                },
                error: function (request, status, error) {
                    alert(status + ", " + error);
                }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T11:04:36.907

尝试在 PHP 而不是 Javascript 中执行 JSON，这将防止 IE 中出现“拒绝访问”消息。

# c# - USB UART 速度错误

> ID：15485088
> 
> 赞同：0
> 
> 时间：2013-03-18T19:19:19.637
> 
> 标签：c#, usbserial, uart

PC 上的 GUI 向嵌入式系统发送一组字节。

*   蓝牙适配器，一切正常
*   USB线，都错了。

设备是 FTDI USB TTL 串行电缆

（[供应商的产品页面在这里](http://www.ftdichip.com/Products/Cables/USBTTLSerial.htm)）

我们需要一个可预测的速度。我从 PC 发送了一件东西，但我在嵌入式系统的 UART（接收缓冲区）中看到了一个`0x00`或一个`0x80`字节。

这是发送字节的 C# 语句...

```
 connectorPort.Write(Protocol.Our_Command_04_Start_Data, 0, Protocol.Our_Command_04_Start_Data.Length); 
```

115200 有效，但速度不够快。

我需要让它看起来像一个 921600 bps 的信号。460800 bps 可能会让我通过；也许。我们在嵌入式系统的这个端口上使用流控制（CTS/RTS）。

有没有办法用 C# 让 UART 达到其中一种速度？如何 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:28:33.210

当 115200 不够用时，我以各种不同寻常的速度运行 FTDI 芯片，包括 921600 和 500000 bps。使用 Win32 API，不需要特殊处理，只需在您传递给的设备控制块中设置所需的波特率[`SetCommState`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363436.aspx)。

如果你使用 ( `System.IO.Ports.SerialPort`) 你有额外的限制。如果你假装这个类不存在，你会省去很多麻烦。

FTDI 有一个非常有用的应用笔记[AN_120 Aliasing VCP Baud Rates](http://www.ftdichip.com/Support/Documents/AppNotes/AN_120_Aliasing_VCP_Baud_Rates.pdf)，它提供了可能对您有所帮助的信息。

*   描述可以由 FTDI 波特率发生器准确生成的速率
*   描述注册表设置以将“标准”波特率重新映射到更高的值：

# python - 将布尔数组映射到值数组并在 Python 中返回 True 实例

> ID：15485090
> 
> 赞同：0
> 
> 时间：2013-03-18T19:19:31.953
> 
> 标签：python, map, list-comprehension

我有一个值列表：

```
 a = [1,2,3,4] 
```

以及相应的布尔值列表：

```
 b = [True, True, False, True] 
```

我想将 b 映射到 a 上，以便我得到 a 中的所有值，使得它们在 b 中的对应值为“真”。所以在这种情况下的答案是 [1,2,4]

我能想到的唯一方法是遍历 b 的元素，获取为 True 的索引，然后在 a 中检索相应的索引。所以像：

```
 def maplist(l1, l2):
     # list1 is a list of Booleans to map onto list2
     l2_true = []
     for el in range(len(l1)):
        if l1[el] == True: 
            l2_true.append(l2[el])
     return l2_true 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T19:21:15.610

这是一个应该做你想做的事情的列表理解：

```
[v for i, v in enumerate(a) if b[i]] 
```

另一种方法：

```
[x for x, y in zip(a, b) if y] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:12:01.210

我知道这个问题陈述了两个列表，并且没有提到*numpy*。但是如果你考虑使用它，并且考虑到 a 和 b 是 numpy 数组，映射操作就变得微不足道了：

```
a[b] 
```

* * *

我冒昧地使用 1000x 元素对建议的选项进行基准测试：

```
import numpy

a = [1,2,3,4] * 1000
b = [True, True, False, True] * 1000

def question_fn():
    l2_true = []
    for el in range(len(a)):
        if b[el] == True:
            l2_true.append(a[el])
    return l2_true

def suggestion_1():
    return [v for i, v in enumerate(a) if b[i]]

def suggestion_2():
    return [x for x,y in zip(a,b) if y]

x = numpy.array(a)
y = numpy.array(b)

def using_numpy():
    return x[y]

python -m timeit -s 'import so' 'so.question_fn()'
1000 loops, best of 3: 453 usec per loop

python -m timeit -s 'import so' 'so.suggestion_1()'
10000 loops, best of 3: 203 usec per loop

python -m timeit -s 'import so' 'so.suggestion_2()'
1000 loops, best of 3: 238 usec per loop

python -m timeit -s 'import so' 'so.using_numpy()'
10000 loops, best of 3: 23 usec per loop 
```

请注意，*numpy*时间不包括转换为数组，否则它会比所有其他建议的解决方案慢得多。但是，如果从一开始就使用 numpy 数组是一种选择，它可能是一个可行的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T19:35:03.183

或这个：

```
[a[i] for i in range(len(a)) if b[i]] 
```

# java - Android中的Button关键字错误

> ID：15485093
> 
> 赞同：1
> 
> 时间：2013-03-18T19:19:51.433
> 
> 标签：java, android, adt

也许这听起来很傻，但我在 Button 关键字（不应该出现的地方）上遇到错误。我是新手，几乎到处都看过。每个人都这么说

```
Button b = findViewById(R.id.button1); 
```

是正确的。

我的代码：

```
package com.example.myfirstappnew;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button b = findViewById(R.id.button1);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

这是屏幕截图： http: [//pbrd.co/ZEsSw7](http://pbrd.co/ZEsSw7)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T19:22:44.427

据我所知，您有一个错误，因为 findViewById 返回`View`而不是`Button`，您需要将其转换为`Button`.

您需要将其`Button`转换为`Button`：

```
Button b = (Button) findViewById(R.id.button1); 
```

并添加此导入：

```
import android.widget.Button; 
```

下次，当你说你有错误时，请包括它:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T19:23:51.020

findViewById 返回 View，你需要将其转换为 Button。

```
Button b = (Button) findViewById(R.id.button1); 
```

编辑：

单击显示 i 的第一个链接`mport import Button(android.widget.)`

或直接按`ctrl+shift+o`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T19:25:08.470

代码需要导入`Button`（如屏幕截图顶部提示中所建议的那样）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T19:27:30.810

首先你需要改变

```
Button b = findViewById(R.id.button1); 
```

到

```
Button b = (Button) findViewById(R.id.button1); 
```

您还需要添加

```
import java.widget.Button; 
```

to your import statements at the top of your file. If you are using Eclipse, you should use it's "organize imports" feature (or whatever Eclipse calls it) to do this automagically for you.

# android - 类似于 Youtube 应用程序的标题栏

> ID：15485095
> 
> 赞同：1
> 
> 时间：2013-03-18T19:19:59.670
> 
> 标签：android, android-layout, titlebar

![](../Images/ec9cc8d8ef3b0553bc0f444f286497b2.png)

我想要这种类型的自定义标题栏但是谁能告诉我标有红色的部分是由什么组成的？我的意思是它们是标签或图像按钮还是其他东西？请不要给我有关如何应用自定义标题栏的链接，我已经知道了。但我不知道红色标记的部分是什么（选项卡或图像按钮等）以及如何在“搜索”和“制作视频”选项之间设置垂直线（在标记为红色的部分）我正在使用 Gingerbread。

我尝试使用搜索引擎，但是当我不知道要搜索的东西的名称时如何搜索：s

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:22:28.107

他们被称为`ActionBar Action Items`。请参阅：http: [//developer.android.com/guide/topics/ui/actionbar.html](http://developer.android.com/guide/topics/ui/actionbar.html) \

至于分隔线，看一下：[ActionBar MenuItem Divider](https://stackoverflow.com/questions/11338867/actionbar-menuitem-divider)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:25:59.807

您应该使用 ActionBarSherlock。

[http://actionbarsherlock.com/](http://actionbarsherlock.com/)

这是为了在设备 android <3.x 中添加操作栏。

# linux - ksh 中的数组长度总是返回 1 以及为什么数组不是行

> ID：15485096
> 
> 赞同：2
> 
> 时间：2013-03-18T19:20:01.043
> 
> 标签：linux, bash, shell, unix, ksh

我需要在 ksh 中回显 UID 的进程信息：

```
#!/bin/ksh
read userid
arr=$(ps -elf | nawk -v pattern=${userid} '{if ($3==pattern) print}')
arrlen=${#arr[@]}
echo $arrlen
for f in "${arr[@]}"; do
  echo $f
done 
```

arr 是此 UID 的进程数组。arrlen 总是等于 1。为什么？我的第二个问题：我尝试回显 arr 中的所有元素，输出是

```
0 
S  
s157759 
22594   
1   
0  
50 
20  
?  
2:06 
/usr/lib/firefox/firefox-bin 
```

代替

```
 0 S  s157759 22594   1   0  50 20  ?  62628  ? 11:14:06 ?  2:06 /usr/lib/firefox/firefox-bin 
```

在一行中

我想用线条而不是文字创建一个数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:30:32.753

您没有创建数组；您正在创建一个带有换行符分隔值的字符串。代替

```
arr=$(ps -elf | nawk -v pattern=${userid} '{if ($3==pattern) print}') 
```

和

```
arr=( $(ps -elf | nawk -v pattern=${userid} '{if ($3==pattern) print}') ) 
```

但是，这仍然会给您留下一个问题，即数组会将每行的每个字段`ps`视为一个单独的元素。更好的解决方案是`ps`使用`read`内置的读取目录：

```
ps -elf | while read -a fields; do
    if [[ ${fields[2]} = $userid ]]; then
      continue
    fi
    echo "${fields[@]}"
done 
```

# size - 浏览器的大小，包括滚动条？

> ID：15485100
> 
> 赞同：0
> 
> 时间：2013-03-18T19:20:21.130
> 
> 标签：size, height, width, scrollbar, viewport

一个简单的问题，我如何设置一个页面覆盖（只是一个半透明的黑色封面），以便它是视口高度和宽度的 100%，**包括滚动条**？

我已经尝试过：

```
body{
background-image:url(../pictures/background2.png);
background-position:top;
background-size:100% 100%;
background-repeat:no-repeat;
margin:0;
border:0;
height:100%;
}

/*Loading*/
#loadingoverlay {
position: absolute;
height: 100%;
width: 100%;
background-color: rgba(0,0,0,0.7);
filter:alpha(opacity = 80);
top:0;
bottom:0;
z-index:99;
} 
```

它只覆盖没有滚动条的视口。换句话说，当我向下滚动时，低于一个屏幕高度的内容不会被覆盖覆盖。

显然这也行不通：

```
/*Loading*/
#loadingoverlay {
position: absolute;
height:9999px;
width:9999px;
background-color: rgba(0,0,0,0.7);
filter:alpha(opacity = 80);
top:0;
bottom:0;
z-index:99;
} 
```

因为这只是将视口延伸到 9999x9999。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:24:02.090

滚动条不是“视口”的一部分。您的样式和 javascript 在视口上具有域，但在滚动条上没有。您可以关闭滚动条，但不能覆盖它。可以进行无窗口 Flash，但这不是您想要的实现。

# python - 如何在 python 中正确使用 cv.boxFilter() 函数

> ID：15485102
> 
> 赞同：1
> 
> 时间：2013-03-18T19:20:25.847
> 
> 标签：python, opencv, imagefilter

使用 boxFilter 函数时出现以下错误：

```
SystemError: new style getargs format but argument is not a tuple 
```

这是代码片段：

```
//After downloading image from url, I process it as follows
imgcv = cv2.cvtColor(np.asarray(im), cv.CV_RGB2YCrCb)
#Get the channel 0 
imgcv1 = cv2.split(imgcv)[0] 
cv2.boxFilter(imgcv1, 1, 7, data, (1,1), 0, cv2.BORDER_DEFAULT) 
```

它说参数不是元组。如何把它变成元组？我试图搜索很多但没有有用的结果。我是openCV和python的初学者。这是过滤器的定义：

```
cv2.boxFilter(src, ddepth, ksize[, dst[, anchor[, normalize[, borderType]]]]) → dst
Parameters: 
    src – Source image.
    dst – Destination image of the same size and type as src .
    ksize – Smoothing kernel size.
    anchor – Anchor point. The default value Point(-1,-1) means that the anchor is at the kernel center.
    normalize – Flag specifying whether the kernel is normalized by its area or not.
    borderType – Border mode used to extrapolate pixels outside of the image. 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:46:40.387

我让它工作：

```
cv2.boxFilter(imgcv1, 0, (7,7), imgcv1, (-1,-1), False, cv2.BORDER_DEFAULT) 
```

我将点数设为 7 而不是 (7,7)，并且将深度设为 1 而不是 0。Python 也将 False 作为布尔值，我尝试用 0 代替它。啊，很多错误。希望有一天它可以帮助像我这样的其他初学者。

# php - 全拉伸水平菜单

> ID：15485106
> 
> 赞同：0
> 
> 时间：2013-03-18T19:20:38.370
> 
> 标签：php, html, css

任何人都可以帮助我弄清楚如何像这样扩展我的菜单[http://heatfreehair.com/](http://heatfreehair.com/)

这是我现在的[样子 http://dev1.envisionwebdesign.co/](http://dev1.envisionwebdesign.co/) 下面是基于 wordpress 的网站的 php 代码。

```
<header id="header" class="col-full">
<nav id="navigation" class="col-full" role="navigation">

        <?php
        if ( function_exists( 'has_nav_menu' ) && has_nav_menu( 'primary-menu' ) ) {
            wp_nav_menu( array( 'depth' => 6, 'sort_column' => 'menu_order', 'container' => 'ul', 'menu_id' => 'main-nav', 'menu_class' => 'nav fr', 'theme_location' => 'primary-menu' ) );
        } else {
        ?>
        <ul id="main-nav" class="nav fl">
            <?php if ( is_page() ) $highlight = 'page_item'; else $highlight = 'page_item current_page_item'; ?>
            <li class="<?php echo $highlight; ?>"><a href="<?php echo esc_url( home_url( '/' ) ); ?>"><?php _e( 'Home', 'woothemes' ); ?></a></li>
            <?php wp_list_pages( 'sort_column=menu_order&depth=6&title_li=&exclude=' ); ?>
        </ul><!-- /#nav -->
        <?php } ?>

    </nav><!-- /#navigation -->
</header><!-- /#header --> 
```

下面是css

```
#navigation {
float: left;
clear: both;
margin-bottom: 0;
display: none;
}
#header #navigation {
display: block !important;
margin-top: 150px;
}
#header #navigation ul.nav {
float: left;
}

#header #navigation ul.nav > li a {
background: #000000;
float: left;
height: 30px;
line-height: 30px;
display: block;
font-family: "Agency", Verdana;
font-size: 21px;
font-weight: normal;
color: #ffffff;
height: 30px;
    padding: 0 44px;
-webkit-transition: all 0.4s ease-in-out;
-moz-transition: all 0.4s ease-in-out;
-o-transition: all 0.4s ease-in-out;
text-transform: uppercase;
}
#header #navigation ul.nav > li a:hover {
border-color: #e8e3e5;
background: #000000;
color: #f91483;
}
#header #navigation ul.nav > li:hover a {
background: #fff;
}
#header #navigation ul.nav > li.current-menu-item > a,
#header #navigation ul.nav > li.current_page_item > a {
color: #f91483;
}
#header #navigation ul.nav > li.parent a {
 -webkit-border-bottom-left-radius: 0;
-webkit-border-bottom-right-radius: 0;
border-bottom-left-radius: 0;
border-bottom-right-radius: 0;
-moz-background-clip: padding;
-webkit-background-clip: padding-box;
background-clip: padding-box;
}
#header #navigation ul.nav > li.parent a:after {
font-family: 'Agency';
display: inline-block;
font-size: .857em;
margin-left: .618em;
content: ";";
color: #ffffff;
font-weight: normal;
}
#header #navigation ul.nav > li.parent a:hover:before {
content: "";
display: block;
height: 2px;
position: absolute;
bottom: -1px;
left: 0;
right: 0;
background: #fff;
z-index: 99999;
}
#header #navigation ul.nav > li.parent:hover a:before {
content: "";
display: block;
height: 2px;
position: absolute;
bottom: -1px;
left: 0;
right: 0;
background: #fff;
z-index: 99999;
}
#header #navigation ul.nav > li.parent:hover a:after {
color: #ff007b;
}
#header #navigation ul.nav > li.parent ul li a:after {
visibility: hidden;
}
#header #navigation ul.nav > li.parent ul li.parent a:after {
visibility: visible;
content: "]";
float: right;
}
#header #navigation ul.nav > li.parent ul li.parent ul li a:after {
visibility: hidden;
}
#header #navigation ul.nav > li.parent ul li.parent ul li.parent a:after {
visibility: visible;
content: "]";
}
#header #navigation ul.nav > li.parent ul li.parent ul li.parent ul li a:after {
visibility: hidden;
}
#header #navigation ul.nav ul {
border: none;
margin-top: -1px;
padding: .372em 0;
box-shadow: 0 0.202em 0 0 rgba(232, 227, 229, 0.4);
-webkit-box-shadow: 0 0.202em 0 0 rgba(232, 227, 229, 0.4);
background: #fff;
}

#header #navigation ul.nav ul ul {
left: 100%;
top: -0.372em;
}
h3.nav-toggle {
display: none;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:45:28.973

有2种方式

**纯CSS**

添加这个

```
 width: 100% 
```

到您的导航 CSS 选择器。但是，如果您在不占用整个屏幕的情况下加载窗口，然后将其最大化。您会注意到它并没有保持最大宽度不变。除非您再次使用最大窗口大小重新加载页面。

然而

**用 javascript**

1.  获取窗口宽度

2.  将导航设置为与窗口宽度相同的宽度（将其设为函数。比如说函数 A）

3.  将事件处理程序添加到窗口，以便在大小窗口更改时 --> 运行函数 A

希望这能让您对您的计划有所了解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:35:37.653

这应该让你上路。诀窍是让你的导航进入延伸的潜水。使导航相对于设置的宽度，然后设置边距，如图所示。具有类 fullstretch 的父 div 自动向父容器宽度 = 100%。

```
 <div class="fullstretch">
                <nav></nav>
            </div>

     body {
        margin:0;   
        }    
    .fullstretch {
        position: relative;
        background: #000;
        padding: 5px 0;
    }
    .fullstretch nav {
        width: 800px;
        position: relative;
        margin: 0 auto;
        background: #fff;
    } 
```

# c# - InvalidArgument=“0”的值对“索引”无效。参数名称：索引

> ID：15485122
> 
> 赞同：2
> 
> 时间：2013-03-18T19:21:43.837
> 
> 标签：c#, winforms, list, listview

我有一个自定义类“Person”，其中包含名称、电子邮件等属性。我有一个名为“people”的列表，还有一个 listView，它显示“people”列表中每个项目的名称。

我正在尝试删除用户在 listView 中选择的“人员”项，在 button1.Click 事件中使用以下代码行：

```
people.RemoveAt(listView1.SelectedItems[0].Index); 
```

但是它在标题中抛出了错误，但是，紧随其后的代码从 listView 中删除了名称，它可以正常工作：

```
listView1.Items.Remove(listView1.SelectedItems[0]); 
```

我正在关注此处的教程视频：[http ://www.youtube.com/watch?v=0ZoDmeAZAD8](http://www.youtube.com/watch?v=0ZoDmeAZAD8)

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:37:00.703

问题是我在将其从 List 中删除之前将其从 listView1 中删除，因此它找不到我所指的内容并引发错误。

所以我所要做的就是切换这两个（已经切换）

```
people.RemoveAt(listView1.SelectedItems[0].Index); // removes item from people LIST.
listView1.Items.Remove(listView1.SelectedItems[0]); // removes item/person from LISTVIEW 
```

它有效！谢谢大家，下次我不会在单独的链接中发布所有代码，对不起。

# php - 如何检查一个类/对象是否在 php 中加载？

> ID：15485124
> 
> 赞同：1
> 
> 时间：2013-03-18T19:21:52.260
> 
> 标签：php

我有这个代码：

```
<?php  
    define('ga_email', 'xxxxxxxxx@xxxxx.com');    // GA Email
    define('ga_password', 'xxxxxxxxxxx');         // 2-part authorization password
    define('profile_id', 'xxxxxxxxx');            // Analytics profile ID
    $gapi_url = 'gapi/gapi.class.php';
    require_once $gapi_url;
    $ga = new gapi(ga_email,ga_password);

    // here goes next code

?> 
```

没关系。Gapi 将加载。

但是，如果我将 ga_password 从 xxxxxxxxxxx 更改为 yyyyyyyyyyy（因此登录 GA 的信息不正确），我会收到一个严重错误，即未加载 gapi 等。

我需要一些 if 条件来实现，因此它会检查我的对象 $ga 是否已创建，然后才执行代码。

例如：

```
 <?php  
        define('ga_email', 'xxxxxxxxx@xxxxx.com');    // GA Email
        define('ga_password', 'yyyyyyyyyyyyyy');      // 2-part authorization password
        define('profile_id', 'xxxxxxxxx');            // Analytics profile ID
        $gapi_url = 'gapi/gapi.class.php';
        require_once $gapi_url;
        $ga = new gapi(ga_email,ga_password);

        if($ga  loaded) {
           // SUCCESS
           // here goes next code
        } else {
           // FAILURE
           echo "Your connection details are wrong.";
        }

 ?> 
```

因此，我会得到一个更好的“您的连接详细信息错误。”消息，而不是一个看起来很糟糕的 PHP 错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:23:48.667

查看类的源代码后，似乎构造函数不会在错误详细信息错误时抛出异常，而只会在使用凭据时抛出异常。将您对对象的所有调用包装在一个`try...catch`块中将为您提供一些错误处理功能：

```
try {
    $ga = new gapi(ga_email,ga_password);
    // here goes next code
} catch (Exception $ex) {
    // FAILURE
    echo "Your connection details are wrong.";
    // $ex->getMessage() has a detailed message
} 
```

您还需要确保知道构造函数方法的正确签名，[如下所示](https://code.google.com/p/gapi-google-analytics-php-interface/source/browse/trunk/gapi.class.php#51)：

```
public function __construct($auth_method) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:24:16.687

在您`__construct()`的 gapi 上检查用户名和密码是否有效。还要创建另一个公共函数或变量来返回它是否是有效的登录名。

# javascript - D3.js - 在 AJAX 请求期间添加加载通知

> ID：15485127
> 
> 赞同：5
> 
> 时间：2013-03-18T19:21:57.830
> 
> 标签：javascript, ajax, d3.js

我有一个需要大量数据的图表，足以完成 d3.json() 请求大约需要 5-10 秒。有没有办法在 AJAX 请求期间显示一个好的老式微调器，或者有什么效果？

或者，我是否应该只使用 jQuery AJAX 请求并遵循显示微调器的标准程序（如此处所述[）](https://stackoverflow.com/questions/68485/how-to-show-loading-spinner-in-jquery)。只是好奇是否有人尝试过这个......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-02T08:54:59.333

我使用[spin.js](http://fgnass.github.io/spin.js/)作为我的微调器。然后和你说的差不多：

```
var spinner = new Spinner(opts);
var target;
$(document).ready(function() {
    target = document.getElementById('spinner-box');
});

function findData() {
            $.ajax({
                beforeSend: function() {
                    spinner.spin(target);
                },
                complete: function() {
                    spinner.stop()
                },
                type: 'POST',
                url: // url,
                data: // data,
                success: function() {
                    // do something
                },
                error: function(e) {
                    spinner.stop();
                    // do something
                }
            });
        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T19:25:19.460

[我在这里](http://www.larsko.org/v/mpte/)做过类似的事情。这个想法是在静态页面上有微调器（或其他通知）并在 AJAX 回调中替换它。

# java - 将字符串放入首选项时，它不会改变。任何想法为什么？

> ID：15485128
> 
> 赞同：2
> 
> 时间：2013-03-18T19:22:02.480
> 
> 标签：java, registry, preferences

```
String path = workspaceField.getText();

        //prefs.remove("workspaceDirectory");
        prefs.put("workspaceDirectory", path); 

        splitPane = commands.getSplitPane();
        WebScrollPane oldTree = (WebScrollPane) splitPane.getLeftComponent();
        splitPane.remove(oldTree);

        WebScrollPane newTree = commands.createFileTree();
        splitPane.setLeftComponent(newTree);
        dialog.dispose(); 
```

上面的代码从文本字段中获取文件路径，然后将其放入名为“workspaceDirectory”的字符串首选项中。问题是这种偏好不会改变。注释的 prefs.remove 调用成功删除了首选项，但在调用 prefs.put("workspaceDirectory", path) 时它不会更改首选项。我没有收到任何错误。

方法 createFileTree()：

```
public WebScrollPane createFileTree() {
    fileTree = new WebFileTree(prefs.get("workspaceDirectory", WorkspaceManager.createWorkspaceDirectory()));
    fileTreeScrollPane = new WebScrollPane(fileTree);   
    fileTreeScrollPane.setVerticalScrollBarPolicy(WebScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
    fileTree.addMouseListener(new FileTreeListener(this));
    return fileTreeScrollPane;
} 
```

这就是 createFileTree 所做的一切，但它不会影响任何东西。如果我将更改组件的代码注释掉，那么 prefs.put 什么也不做。任何想法是什么导致了这种情况或阻止了偏好的改变？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T19:32:01.750

从 javadoc 为`java.util.Preferences`：

> 所有修改偏好数据的方法都允许异步操作；它们可能会立即返回，并且更改最终将传播到具有依赖于实现的延迟的持久后备存储。flush 方法可用于同步强制更新后备存储。Java 虚拟机的正常终止不会导致挂起的更新丢失——终止时不需要显式的刷新调用来确保挂起的更新是持久的。

因此，如果您对首选项进行更改，然后立即尝试阅读该更改，您的结果可能不是您所期望的。

# groovy - 空的常规范围

> ID：15485141
> 
> 赞同：0
> 
> 时间：2013-03-18T19:22:32.460
> 
> 标签：groovy

是否可以构造一个空范围？满足以下测试的东西：

```
 Range emptyRange = // the magic goes here
  assert emptyRange.from == null
  assert emptyRange.to == null 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T19:30:50.520

怎么样

```
Range emptyRange = new EmptyRange() 
```

# loops - 如何检查我是否在 ADO 记录集的最后一条记录上？

> ID：15485142
> 
> 赞同：3
> 
> 时间：2013-03-18T19:22:38.510
> 
> 标签：loops, asp-classic, do-while

我怎么知道我是否在记录集的最后一条记录上。我的循环如下；

```
<%do while (adoRsTrade.AbsolutePage = iPageCurrent) and (not adoRsTrade.EOF)
NewRep = adoRsTrade("calIncludedRep")%> 
```

我之间有很多代码，但是这个 if 语句很重要，它显示所呈现数据的小计，只要 CurRep <> NewRep 这意味着现在是下一组数据

```
if (CurRep <> NewRep or FirstTime="T" and (not adorsTrade.BOF)) then
  If FirstTime <> "T" then%>
      <TR>
        <td>
            <table class='FontStandardMinus1' border=0 cellPadding=0 align='left' cellSpacing=0 width="100%" bgcolor='#ffffff'>
                 <TR>
                    <td width="59%" align="left"><b>SubTotals<!-- for <%Response.Write(CurRep) %>-->:</b></td>
                    <td width="10%" valign=top align=right><%=FormatNumber(totPrincipal,2)%></td>
                    <td width="7%" valign=top align=right><%=FormatNumber(totInterest,2)%></td>
                    <td width="7%" valign=top align=right><%=FormatNumber(totCommission,2)%></td>
                    <td width="5%" valign=top align=right><%=FormatNumber(totSECFee,2)%></td>
                    <td width="4%" valign=top align=right><%=FormatNumber(totSvcFee,2)%></td>
                    <td width="9%" valign=top align=right><%=FormatNumber(totNet,2)%></td>
                </TR>
            </table>
        </td>
    </TR>
<%end if%> 
```

基本上我需要另一个条件，如果 currep <> newrep 或 firsttime="t" 或者如果它是 ADO 记录集中的最后一条记录，则显示这也是一个小计。

```
<%

FirstTime="F"
CurRep = adoRsTrade("calIncludedRep")
adoRsTrade.MoveNext

loop%> 
```

非常感谢任何帮助，提前谢谢你，NickG

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T20:59:49.320

您可以在记录集上调用 MoveNext 后检查 EOF 以测试您是否在最后一条记录上。

例如：

```
Do While adoRsTrade.AbsolutePage = iPageCurrent And Not adoRsTrade.EOF
  ' DO SOME STUFF
  ' --------------
  ' --------------
  adoRsTrade.MoveNext
  If adoRsTrade.EOF Then
    ' last record!
    ' DO SOME OTHER STUFF
  End If
Loop 
```

# intuit-partner-platform - Intuit - 未找到 OpenID 端点

> ID：15485145
> 
> 赞同：1
> 
> 时间：2013-03-18T19:22:42.497
> 
> 标签：intuit-partner-platform, quickbooks-online

我们在哪里可以找到在我们的开发环境/站点中使用的 OpenID 端点。此代码不起作用：

```
//OpenId Relying Party

OpenIdRelyingParty openid = new OpenIdRelyingParty();

var openIdIdentifier = "https://openid.intuit.com/Indentity-AppName";

IAuthenticationRequest request = openid.CreateRequest(openIdIdentifier); 
```

我越来越`No OpenID endpoint found`。在上面的代码片段中，我将替换`AppName`为`DevMaster App Name`所示的名称

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T04:22:15.470

你能试试下面的网址吗

[https://openid.intuit.com/openid/xrds](https://openid.intuit.com/openid/xrds)

谢谢玛纳斯

# ios - 发送应用崩溃日志/常规应用日志

> ID：15485147
> 
> 赞同：1
> 
> 时间：2013-03-18T19:22:46.880
> 
> 标签：ios, objective-c, xcode4.5, crash-reports

我想在我的应用程序中实现“报告问题”按钮，它将用户应用程序的日志作为文本文件（通过电子邮件）发送给我，这样我就可以看到问题所在。

有什么办法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:39:45.533

我使用[QuincyKit](http://quincykit.net/)来捕获和检索客户的崩溃日志。这需要一些时间，但是一旦你设置好它，它就会很好地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:41:30.917

[Crashlytics](http://www.Crashlytics.com)绝对是使用崩溃日志的方法。它是迄今为止最容易实现的，它为解决问题提供了极好的信息，并允许远程记录。这也意味着即使您的用户没有通过电子邮件将其发送给您，您也将获得崩溃日志。

我仍然会包含一个报告问题按钮，该按钮仅允许用户在遇到具体问题时向您发送电子邮件，但通常不会出现崩溃。

# php - Yii 框架没有从库中获取函数到控制器中（使用 class.php 文件）

> ID：15485151
> 
> 赞同：0
> 
> 时间：2013-03-18T19:23:03.523
> 
> 标签：php, web, yii, spotify

我正在使用一个名为 MetaTune 的 Spotify 库，并且能够在 CodeIgniter 中轻松地做到这一点，但是在 Yii 中出现了一些初期问题，但目前它已经开始说：

```
Fatal error: Call to undefined method stdClass::searchTrack() in ....public_html/Yii/news/protected/controllers/NewsController.php on line 67 
```

但是，功能在那里。这个库中的文件都有一个**.class.php**后缀（例如**MetaTune.class.php**）并且库文件都存储在：

```
yii/application/protected/vendors/Metatune 
```

使用 Codeigniter，我在文件夹之外创建了一个额外的 spotify.php 并将其自动加载到我的控制器，但我不确定这是否有必要。

我已将其加载到我的**config.php**中：

```
 'import'=>array(
    'application.models.*',
    'application.components.*',
            'application.vendors.metatune.*',
), 
```

这是**控制器**代码：

```
public function actionView($id)
{
 $model=$this->loadModel($id);

$spotify = MetaTune::getSomething();
$hello =  $model->title;
Yii::import('application.vendors.metatune.MetaTune');
$spotify->autoAddTracksToPlayButton = true; // Will add all searches for tracks into a list.
$spotify->playButtonHeight = 330; // For viewing the entire playlist
$spotify->playButtonTheme = "dark"; // Changing theme
$spotify->playButtonView = "coverart"; // Changing view
try
{
    $tracks = $spotify->searchTrack($hello);
    $tracks = $spotify->getPlayButtonAutoGenerated($hello);
}
catch (MetaTuneException $ex)
{
    die("<pre>Error\n" . $ex . "</pre>");
}

$song = 'tracks';

    $this->render('view',array(
        'model'=>$this->loadModel($id),
    ));
} 
```

另请参阅下面的代码，其中有一个名为**getInstance**的函数，由于某种原因，它不能与 Yii 很好地配合，我不确定是否可以更改它，因为我使用它将 MetaTune 导入 CodeIgniter 控制器而没有任何问题。

只是**MetaTune.class.php**代码的一部分：

```
 Yii::import('application.vendors.metatune.Artist');
 Yii::import('application.vendors.metatune.Album');
 Yii::import('application.vendors.metatune.Track');
 Yii::import('application.vendors.metatune.CacheRequest');
 Yii::import('application.vendors.metatune.MBSimpleXMLElement');
 Yii::import('application.vendors.metatune.SpotifyItem');
 Yii::import('application.vendors.metatune.MetaTuneException');

 ....

 class MetaTune {
const CACHE_DIR = 'application/vendors/metatune/cache/'; // Cache directory (must be writable) relative to this file
const USE_CACHE = false; // Should caching be activated?
const CACHE_PREFIX = "METATUNE_CACHE_"; // prefix for cache-files. 

const SERVICE_BASE_URL_SEARCH = "http://ws.spotify.com/search/1/";
const SERVICE_BASE_URL_LOOKUP = "http://ws.spotify.com/lookup/1/";
const PLAYBUTTON_BASE_URL = "https://embed.spotify.com/?uri=";

public $autoAddTracksToPlayButton = false;

private $list = array();

// Holds instance
private static $instance;

.....

public static function getSomething()
{
    if (!isset(self::$instance))
    {
        $class = __CLASS__;
        self::$instance = new $class;
    }

    return self::$instance;
}

.....

 public function searchTrack($name, $page = 1)
{
    $url = self::SERVICE_BASE_URL_SEARCH . "track?q=" . $this->translateString($name) .  
    $this->addPageSuffix($page);
    $contents = $this->requestContent($url);
    $xml = new MBSimpleXMLElement($contents);

    $tracks = array();
    foreach ($xml->track as $track)
    {
        $tracks[] = $this->extractTrackInfo($track);
    }

    if ($this->autoAddTracksToPlayButton) {
        $this->appendTracksToTrackList($tracks);
    }

    return $tracks;
    } 
```

如果您有任何建议，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:51:14.577

您没有`$spotify`在任何地方初始化，并且 php`stdClass`默认情况下将其设置为，因为您正在使用该变量为成员属性分配值，但是当您尝试对其调用不存在的方法时它失败了。

解决方法：使用前先初始化

`$spotify = MetaTune::getInstance();`

# javascript - 在 gist Ace Editor 中启用 Vim 模式

> ID：15485153
> 
> 赞同：12
> 
> 时间：2013-03-18T19:23:04.983
> 
> 标签：javascript, gist

我正在尝试在 github gists 上为我心爱的 Vim 启用 Ace 的键盘处理程序。这似乎是一件容易的事情，但我正在努力：

1.  查找 gist ace 编辑器所附加的对象（ace 默认`editor`未定义）
2.  通过 github 托管的 Vim 绑定将其设置为使用 VIM：`https://gist.github.com/assets/ace/keybinding/vim-b9f3b98dd13151f9b4c7279d8259b69e.js`

我在 Ace Google Group 上找到了以下代码段：

`env.editor.setKeyboardHandler(require("ace/keyboard/keybinding/vim").Vim)`

但这不起作用（即使我替换了 github url）所以我假设这适用于 Cloud9 IDE，而不是自托管/自定义 Ace。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-11-27T01:29:46.993

在最新版本的 ace (v1.1.1) 中，内置了 vim 和 emacs 绑定。以下工作：

```
editor.setKeyboardHandler("ace/keyboard/vim"); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-18T21:45:35.450

我在 ace Google Group 上[发帖](https://groups.google.com/forum/?fromgroups=#!topic/ace-discuss/MItU-g3Qxjc)（+rep to Harutyun）并收到了回复，代码如下：

```
ace.require("ace/lib/net").loadScript("https://rawgithub.com/ajaxorg/ace-builds/master/src-min-noconflict/keybinding-vim.js", 
function() { 
    e = document.querySelector(".ace_editor.ace-github").env.editor; 
    e.setKeyboardHandler(ace.require("ace/keyboard/vim").handler); 
}) 
```

这就像一个魅力（请注意，github 使用的 ace 版本可能会改变，这可能会破坏这一点）。

每次将其输入控制台很痛苦，因此我计划将其添加到greasemonkey 脚本中（chrome 插件可能会很好！--请看）。

**更新**

* * *

我编写了一个小型[Chrome 扩展程序](https://chrome.google.com/webstore/detail/pocket-vim/pjnhffdkdckcagdmfmidafhppbomjdjg)，可以在大多数网站 Ace.js 和 CodeMirror 上启用 Vim 绑定。欢迎在[github 存储库中提出问题和贡献](https://github.com/NickTomlin/pocketvim)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-28T18:45:04.747

我无法让其他两种解决方案发挥作用。（不过，尼克的 Chrome 扩展程序对我来说仍然非常有效。）

`vim`另一种解决方案是在设置菜单中更改为模式。

要访问设置菜单，请确保 ACE 编辑器具有焦点，然后按`ctrl`+ `,`（控制和逗号）。

这将打开屏幕右侧的菜单。找到“键盘处理程序”下拉菜单并选择`vim`. 按下`escape`或单击设置菜单的某处以将其关闭。

`vim`现在应该激活模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-30T08:56:02.357

您必须与 react-ace 一起安装 ace-builds 才能访问主题、键绑定和其他

```
npm install react-ace ace-builds 
```

在反应中，您必须添加以下行：

```
import "ace-builds/src-noconflict/keybinding-vim"
<AceEditor
  ...
  keyboardHandler='vim'
  ...
/> 
```

# matlab - 如何在 Matlab 中插入向量？

> ID：15485156
> 
> 赞同：0
> 
> 时间：2013-03-18T19:23:14.397
> 
> 标签：matlab, vector, complex-numbers, wave, interpolation

我有这些已知的变量：

```
T=3;             
t=0:0.01:5*T;    
om=2*pi/T;       
N=10;            
f0=100; 
```

在哪里：

*   `T`=期间，
*   `t`=可变时间，
*   `om`=角频率，
*   `N`= 系列的项数，
*   `f0`= 启动力（功率）

我正在`ft`使用这样的复杂傅里叶级数创建向量：

```
ft=zeros(size(t));
for j=1:2*N+1
    n= j-(N+1);    
    if n==0
        f(j)=f0/2;
    else
        f(j)=f0*((exp(-i*n*2*pi)*(i*2*pi*n+1)-1)/(4*pi^2*n^2));   
    end
    ft=ft+f(j)*exp(i*n*om*t);
end
plot(t,ft); 
```

结果是以下锯齿波：

![锯齿波](../Images/fb2fd64c4d088525162d9d59bcbb2372.png)

好的，向量`ft`很复杂，我的问题是：**如何插入向量`ft`？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:39:16.953

您可以使用[`interp1`](http://www.mathworks.com/help/matlab/ref/interp1.html). 如果`t2`是包含插值时间的向量，则：

```
ft2 = interp1(t, ft, t2); 
```

返回 中的插值点`ft2`。

# python - Python：使用 Popen() 与文件对象在 linux 中写入文件

> ID：15485166
> 
> 赞同：0
> 
> 时间：2013-03-18T19:23:40.743
> 
> 标签：python, linux, popen

我注意到我有两种替代方法可以在 Python 脚本中写入 Linux 中的文件。我可以创建一个 Popen 对象并使用 shell 重定向（例如“>”或“>>”）写入文件 - 或者我可以使用文件对象（例如 open()、write()、close()）。

我已经玩了一段时间，并注意到如果我需要使用其他 shell 工具，使用 Popen 涉及的代码更少。例如，下面我尝试获取文件的校验和并将其写入以 PID 作为唯一标识符命名的临时文件。（我知道如果我再次调用 Popen，$$ 会改变，但假装我不需要）：

```
Popen("md5sum " + filename + " >> /dir/test/$$.tempfile", shell=True, stdout=PIPE).communicate()[0] 
```

下面是使用文件对象的（匆忙编写的）粗略等价物。我使用 os.getpid 而不是 $$ 但我仍然使用 md5sum 并且仍然必须调用 Popen。

```
PID = str(os.getpid())
manifest = open('/dir/test/' + PID + '.tempfile','w')
hash = Popen("md5sum " + filename, shell=True, stdout=PIPE).communicate()[0]
manifest.write(hash)
manifest.close() 
```

这两种方法有什么优点/缺点吗？我实际上正在尝试将 bash 代码移植到 Python 并希望使用更多 Python，但我不确定我应该采用哪种方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:41:33.100

**编辑**：不推荐使用 md5 模块（但仍然存在），您应该使用[hashlib 模块](http://docs.python.org/2/library/hashlib.html#module-hashlib)

**哈希库版本**

归档：

```
import hashlib
with open('py_md5', mode='w') as out:
    with open('test.txt', mode='ro') as input:
        out.write(hashlib.md5(input.read()).hexdigest()) 
```

安慰：

```
import hashlib
with open('test.txt', mode='ro') as input:
    print hashlib.md5(input.read()).hexdigest() 
```

**md5 版本** Python 的[md5 模块](http://docs.python.org/2/library/md5.html)提供了相同的工具：

```
import md5
# open file to write
with open('py_md5', mode='w') as out:
    with open('test.txt', mode='ro') as input:
        out.write(md5.new(input.read()).hexdigest()) 
```

如果您只想获取 md5 十六进制摘要字符串，您可以将其打印出来，然后将其写入文件：

```
import md5
# open file to write
with open('test.txt', mode='ro') as input:
    print md5.new(input.read()).hexdigest() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T19:30:34.653

一般来说，我会写这样的东西：

```
manifest = open('/dir/test/' + PID + '.tempfile','w')
p = Popen(['md5sum',filename],stdout=manifest)
p.wait()
manifest.close() 
```

这避免了任何 shell 注入漏洞。您还知道 PID，因为您没有获取生成的子 shell 的 PID。

# mockito - 使用 Mockito 模拟两个相同类型的对象

> ID：15485167
> 
> 赞同：11
> 
> 时间：2013-03-18T19:23:42.827
> 
> 标签：mockito

我正在使用 Mockito 编写单元测试，但在模拟注入的类时遇到了问题。问题是两个注入的类是相同的类型，并且仅通过它们的`@Qualifier`注释来区分。如果我尝试简单地模拟`SomeClass.class`，则不会注入该模拟，并且该对象`null`在我的测试中。我怎样才能模拟这些对象？

```
public class ProfileDAL {

    @Inject
    @Qualifier("qualifierA")
    private SomeClass someClassA ;

    @Inject
    @Qualifier("qualifierB")
    private SomeClass someClassB ;

    //...various code, not important
}

@RunWith(MockitoJUnitRunner.class)
public class ProfileDALLOMImplTest {

    @InjectMocks
    private ProfileDALLOMImpl profileDALLOMImpl = new ProfileDALLOMImpl();

    @Mock
    private SomeClass someClassA;
    @Mock
    private SomeClass someClassB;

    private SomeResult mockSomeResult = mock(SomeResult.class);

    @Test
    public void testSomeMethod() {
        when(someClassA .getSomething(any(SomeArgment.class)).thenReturn(mockSomeResult);
        Int result = profileDALLOMImpl.someTest(This isn't relevant);
    }

 } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-26T21:16:59.903

我尝试使用 JUnit 使用 Mockito 1.9.5 模拟两个具有相同类型的对象，并且它可以工作。

见：[http ://static.javadoc.io/org.mockito/mockito-core/1.9.5/org/mockito/InjectMocks.html](http://static.javadoc.io/org.mockito/mockito-core/1.9.5/org/mockito/InjectMocks.html)

文档中的相关类型信息：

“字段注入；mock首先通过类型解析，如果有多个相同类型的属性，则通过字段名称和mock名称的匹配。”

这似乎是说当您有两个相同类型时，您应该使模拟名称与所有模拟的字段名称匹配：

“注意1：如果你有相同类型（或相同擦除）的字段，最好`@Mock`用匹配的字段命名所有带注释的字段，否则Mockito可能会混淆并且不会发生注入。”

也许后者在咬你？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-22T23:05:22.203

刚刚确认了 Splonk 指出的内容，它在 Mockito 1.9.5 中以这种方式工作，一旦我删除了一个模拟类，它就失败了。

因此，在您的情况下，请确保您的两个模拟类与测试中的类同名：

```
@Mock
private SomeClass someClassA;
@Mock
private SomeClass someClassB; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T20:22:35.847

如果你不使用注释，你会得到类似的东西

```
public class MyClass {
    private MyDependency myDependency;

    public void setMyDependency(MyDependency myDependency){
        this.myDependency = myDependency;
    }
} 
```

和

```
import org.junit.Before;
import org.junit.Test;

import static org.mockito.Mockito.*;

public class MyTest {

    private MyClass myClass;
    private MyDependency myDependency;

    @Before
    public void setUp(){
        myClass = new MyClass();
        myDependency = mock(MyDependency.class);
        myClass.setMyDependency(myDependency);
    }

    @Test
    public void test(){
        // Given

        // When

        // Then
    }
} 
```

如果您的对象通过构造函数而不是通过 setter 指定其依赖项，您也可以这样做。我猜您的依赖注入框架可以像注释私有字段一样注释设置器，但是现在您的测试不依赖于任何依赖注入框架。

# python - 从使用 Web 管理模块的 python 运行 powershell 脚本

> ID：15485173
> 
> 赞同：1
> 
> 时间：2013-03-18T19:24:01.083
> 
> 标签：python, powershell, iis-7

我有一个很长的 powershell 脚本，需要从 python 脚本执行。当我从命令行运行它时，powershell 脚本工作正常，但当我从 python 运行它时失败。

我已将我的 powershell 脚本简化为以下代码，该代码重现了该问题。

Powershell脚本：

```
import-module WebAdministration
Add-Type -Path C:\Windows\System32\inetsrv\Microsoft.Web.Administration.dll
Set-WebConfigurationProperty '/system.webServer/proxy' -Name "enabled" -Value "true" 
```

Python脚本：

```
import subprocess
print subprocess.check_output("powershell [pathToMyPowershellScript]"); 
```

当我从 cmd.exe 运行 powershell 脚本时，它工作正常并且不产生任何输出。当我运行 python 脚本时，它会产生以下错误：

```
Set-WebConfigurationProperty : Retrieving the COM class factory for component 
with CLSID {688EEEE5-6A7E-422F-B2E1-6AF00DC944A6} failed due to the following
error: 80040154
Class not registered (Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG)).
At [pathToMyPowershellScript]:3 char:1
+ Set-WebConfigurationProperty '/system.webServer/proxy' -Name "enabled" -Value "t ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+ CategoryInfo          
 : NotSpecified: (:) [Set-WebConfigurationProperty], COMException
+ FullyQualifiedErrorId : System.Runtime.InteropServices.COMException,
  Microsoft.IIs.PowerShell.Provider.SetConfigurationPropertyCommand 
```

我在 Windows 7 Professional (x64) 上使用 Python 2.7 和 Powershell 1.0 运行 IIS 7.5 有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:17:24.570

我可以通过从“sysnative”版本的 cmd 运行 powershell 脚本来解决这个问题：

```
subprocess.check_call("c:\\windows\\sysnative\\cmd.exe /c 
                       powershell pathToScript", shell=True) 
```

这解决了位数问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T23:52:29.057

您的程序可能调用了错误版本的 powershell，请尝试显式调用 exe。

```
%SystemRoot%\SysWoW64\WindowsPowerShell\v1.0\powershell.exe 
```

[下面是一些您可能会感兴趣的相关阅读材料。](http://forums.iis.net/post/1979631.aspx)

# django - Django 权限建议

> ID：15485174
> 
> 赞同：0
> 
> 时间：2013-03-18T19:24:01.150
> 
> 标签：django, django-admin, django-permissions

实际上，在我的 Django 1.5 项目中，我正处于十字路口，在向右或向左转之前需要一些社区建议。

这是我的模型**文章模型**

```
class Article(models.Model):

    title = models.CharField(max_length=1000, verbose_name="Titre")
    zone = models.ForeignKey('Zone', verbose_name=u"Area") 
```

和我的**区域模型**

```
 class Zone(models.Model):
        name = models.CharField(max_length=50, unique=True)
        slug = models.CharField(max_length=50, unique=True)

        def __unicode__(self):
            return unicode(self.name)

        class Meta:
            ordering = ['name'] 
```

每篇文章都在一个地理“区域”中。

我所有的用户也依赖于同一个“区域”，并且可以编辑/添加/删除与用户属于同一“区域”的文章。

**路径#1：**

我必须与 django-guardian 合作。从长远来看，它会付出代价还是矫枉过正？

**路径#2：**

我只需要设置 ForeignKey CustomUser Model <-> Zone Model <-> Article Model。然后在继续之前检查每个视图是否 CustomUser.Zone == Article.Zone。

**路径#3：**

你的来电。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:30:01.653

似乎最好的办法是创建代理模型，在 ModelAdmin 中修改查询集并管理对该代理模型的权限。

[http://lincolnloop.com/blog/2010/dec/16/using-proxy-models-customize-django-admin/](http://lincolnloop.com/blog/2010/dec/16/using-proxy-models-customize-django-admin/)

# c++ - 从 ofstream 中打印 NumericUpDown 值

> ID：15485178
> 
> 赞同：0
> 
> 时间：2013-03-18T19:24:21.550
> 
> 标签：c++, visual-c++, io, ofstream

这应该是一个简单的任务，但我收到的文件包含数字“1”而不是 numericUpDown 控件的内容。使用断点我可以看到来自 ta[i]->Value 的值是我期望的值，但是在转换之后我在文件中得到一个 1 而不是值。

```
 private: void storePreviousSettings()
{
    ofstream settings("prev_settings.txt");
    if(settings.is_open())
    {
        settings << "#ta" << endl;
        for(int i = 0; i < 16; i++)
        {
            settings << ta[i]->Value.ToString() << endl;
        }
        settings << "End" << endl;
        settings.close();
    }
} 
```

注意： ta 定义如下：

```
private: NumericUpDown * ta[]; 
```

### 为什么我要使用 ofstream 而不是 numericUpDown 组件中的值在文件中打印“1”？我怎样才能解决这个问题？我可以执行另一种写入文件的方法吗？

### 更新/当前失败的尝试

如果我添加这一行：

```
System::String * temp = ta[i]->Value.ToString(); 
```

在“设置 << ta[i]->Value ...”行之前，使用断点我可以看到“temp”保持预期值，并且 ta[i]->Value.ToString() 正在工作。因此，当 ta[i]->Value.ToString() 与 << 运算符一起使用时，必须进行某些更改，以便我在文件中收到“1”，而不是在之前的断点处看到的值被写入文件。

任何帮助或方向表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T23:26:21.447

该问题已通过对 Decimal 进行以下转换以使其成为双精度来解决。

```
 private: void storePreviousSettings()
{
    ofstream settings("prev_settings.txt");
    if(settings.is_open())
    {
        settings << "#ta" << endl;
        for(int i = 0; i < 16; i++)
        {
            settings << System::Decimal::ToDouble(ta[i]->Value) << endl;
        }
        settings << "End" << endl;
        settings.close();
    }
} 
```

如果有人知道使用 .ToString() 最初不起作用的原因，请发布。我正在回答这个问题，希望它可以帮助处于相同情况的其他人。

# c - 如何检查C字符串是否为空

> ID：15485179
> 
> 赞同：69
> 
> 时间：2013-03-18T19:24:24.420
> 
> 标签：c, string

我正在用 C 编写一个非常小的程序，需要检查某个字符串是否为空。为了这个问题，我简化了我的代码：

```
#include <stdio.h>
#include <string>

int main() {
  char url[63] = {'\0'};
  do {
    printf("Enter a URL: ");
    scanf("%s", url);
    printf("%s", url);
  } while (/*what should I put in here?*/);

  return(0);
} 
```

如果用户只是按 Enter 键而不输入任何内容，我希望程序停止循环。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-03-18T19:27:45.433

由于 C 风格的字符串总是以空字符 ( `\0`) 结尾，因此您可以通过编写来检查字符串是否为空

```
do {
   ...
} while (url[0] != '\0'); 
```

或者，您可以使用该`strcmp`功能，这有点过头但可能更易于阅读：

```
do {
   ...
} while (strcmp(url, "")); 
```

请注意，`strcmp`如果字符串不同，则返回非零值，如果相同，则返回 0，因此此循环将继续循环，直到字符串非空。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-18T19:26:26.670

如果要检查字符串是否为空：

```
if (str[0] == '\0')
{
    // your code here
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-18T19:26:58.273

如果第一个字符恰好是`'\0'`，那么你有一个空字符串。

这是你应该做的：

```
do {
    /* 
    *   Resetting first character before getting input.
    */
    url[0] = '\0';

    // code
} while (url[0] != '\0'); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-18T19:31:44.447

`%s`通常来说，考虑到忽略空格（空格、制表符、换行符），您将很难在这里获得一个空字符串......但无论如何，[`scanf()`](http://linux.die.net/man/3/scanf)实际上返回成功匹配的数量......

从手册页：

> 成功匹配和分配的输入项目的数量，可以少于提供的数量，如果早期匹配失败，甚至为零。

因此，如果他们以某种方式设法使用空字符串（`ctrl+z`例如），您可以检查返回结果。

```
int count = 0;
do {
  ...
  count = scanf("%62s", url);  // You should check return values and limit the 
                               // input length
  ...
} while (count <= 0) 
```

请注意，您必须检查 less ，因为在我给出的示例中，您会返回`-1`，在手册页中再次详细说明：

> 如果在第一次成功转换或匹配失败发生之前到达输入结尾，则返回值 EOF。如果发生读取错误，也会返回 EOF，在这种情况下会设置流的错误指示符（请参阅 ferror(3)），并设置 errno 来指示错误。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-18T19:26:54.680

`strlen(url)`

返回字符串的长度。它计算所有字符，直到找到一个空字节。在你的情况下，检查它是否为 0。

或者只是手动检查它：

```
*url == '\0' 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-03-18T19:30:16.580

您可以从中检查返回值`scanf`。这段代码将坐在那里，直到它收到一个字符串。

```
int a;

do {
  // other code
  a = scanf("%s", url);

} while (a <= 0); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-18T19:26:10.920

你可以这样尝试：-

```
if (string[0] == '\0') {
} 
```

在你的情况下，它可能是： -

```
do {
   ...
} while (url[0] != '\0') 
```

;

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-03-18T19:33:43.087

首先替换`scanf()`为`fgets()`...

```
do {
    if (!fgets(url, sizeof url, stdin)) /* error */;
    /* ... */
} while (*url != '\n'); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-05-05T10:43:41.523

最短的方法是：

```
do {
    // Something
} while (*url); 
```

基本上，`*url`将返回数组中第一个位置的字符；由于 C 字符串以空值结尾，如果字符串为空，则其第一个位置将是字符`'\0'`，其 ASCII 值为`0`; 由于 C 逻辑语句将每个零值视为`false`，因此当字符串的第一个位置非空，即字符串不为空时，此循环将继续进行。

如果您想更好地理解这一点，推荐阅读：

*   C 字符串：[https ://www.tutorialspoint.com/cprogramming/c_strings.htm](https://www.tutorialspoint.com/cprogramming/c_strings.htm)
*   C 数组：[https ://www.tutorialspoint.com/cprogramming/c_arrays.htm](https://www.tutorialspoint.com/cprogramming/c_arrays.htm)
*   数组和指针的关系：[https ://www.programiz.com/c-programming/c-pointers-arrays](https://www.programiz.com/c-programming/c-pointers-arrays)
*   逻辑运算符：[https ://www.tutorialspoint.com/cprogramming/c_logical_operators.htm](https://www.tutorialspoint.com/cprogramming/c_logical_operators.htm)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-09-11T08:40:07.730

我已经写下了这个宏

```
#define IS_EMPTY_STR(X) ( (1 / (sizeof(X[0]) == 1))/*type check*/ && !(X[0])/*content check*/) 
```

所以它会是

```
while (! IS_EMPTY_STR(url)); 
```

这个宏的好处是它是类型安全的。如果放入除指向 char 的指针之外的其他内容，则会出现编译错误。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-12-07T15:36:29.487

这很简单。在 while 条件下检查字符串空条件。

1.  您可以使用 strlen 函数来检查字符串长度。

    ```
    #include<stdio.h>
    #include <string.h>   

    int main()
    {
        char url[63] = {'\0'};
        do
        {
            printf("Enter a URL: ");
            scanf("%s", url);
            printf("%s", url);
        } while (strlen(url)<=0);
        return(0);
    } 
    ```

2.  检查第一个字符是 '\0'

    ```
    #include <stdio.h>    
    #include <string.h>

    int main()
    {        
        char url[63] = {'\0'};

        do
        {
            printf("Enter a URL: ");
            scanf("%s", url);
            printf("%s", url);
        } while (url[0]=='\0');

        return(0);
    } 
    ```

供你参考：

C 数组：
[https ://www.javatpoint.com/c-array](https://www.javatpoint.com/c-array)
[https://scholarsoul.com/arrays-in-c/](https://scholarsoul.com/arrays-in-c/)

C 字符串：
[https ://www.programiz.com/c-programming/c-strings](https://www.programiz.com/c-programming/c-strings)
[https://scholarsoul.com/string-in-c/](https://scholarsoul.com/string-in-c/)
[https://en.wikipedia.org/wiki/C_string_handling](https://en.wikipedia.org/wiki/C_string_handling)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-11-09T09:35:28.820

验证和总结：

*   检查 C 字符串是否为空
    *   `url[0] == '\0'`
    *   `strlen(url) == 0`
    *   `strcmp(url, "") == 0`
*   检查 C 字符串不为空
    *   `url[0] != '\0'`
    *   `strlen(url) > 0`
    *   `strcmp(url, "") != 0`

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2014-04-22T06:07:57.633

使用 strtok()，只需一行即可完成：“if (strtok(s,, \t")==NULL)”。例如：

```
#include <stdio.h>
#include <string.h>

int is_whitespace(char *s) {
    if (strtok(s," \t")==NULL) {
        return 1;
    } else {
        return 0;
    }
}

void demo(void) {
    char s1[128];
    char s2[128];
    strcpy(s1,"   abc  \t ");
    strcpy(s2,"    \t   ");
    printf("s1 = \"%s\"\n", s1);
    printf("s2 = \"%s\"\n", s2);
    printf("is_whitespace(s1)=%d\n",is_whitespace(s1));
    printf("is_whitespace(s2)=%d\n",is_whitespace(s2));
}

int main() {
    char url[63] = {'\0'};
    do {
        printf("Enter a URL: ");
        scanf("%s", url);
        printf("url='%s'\n", url);
    } while (is_whitespace(url));
    return 0;
} 
```

# rfid - 限制 RFID 频段

> ID：15485182
> 
> 赞同：1
> 
> 时间：2013-03-18T19:24:30.427
> 
> 标签：rfid, motorola

我正在使用 RFID，使用摩托罗拉 FX7400 阅读器读取标签，所有这些都没有太多麻烦。该阅读器以确定的频率（902 MHz 至 928 MHz）运行。我想将此频率限制为两个频段，一个从 902 到 907，另一个从 915 到 928。我在 API 中搜索了类似的东西，但找不到任何东西。那可能吗？有人试过吗？有人吗？请？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T15:45:39.100

对于每个有同样问题的人：我得到的解决方案是我需要放置一个符合该标准的固件。我在一次 RFID 培训中得到了这个答案，培训的人都精通这项技术。

此答案仅适用于摩托罗拉 FX 系列。对于其他品牌和系列，请咨询您的供应商。

# backbone.js - 如何更新集合中的模型？

> ID：15485185
> 
> 赞同：15
> 
> 时间：2013-03-18T19:24:36.787
> 
> 标签：backbone.js

我有以下 Backbone.js 集合：

```
 var Tags = Backbone.Collection.extend({
        url: "/api/v1/tags/"
 }), 
```

如何更新集合中的一个模型，以便它发布到 /api/v1/tags/id 并保存该模型的数据。

因此，如果我在集合中更改 id 为 2 的模型名称，它应该使用以下数据 PUT 到 /api/v1/tags/2：名称：新名称 id：2

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-10-13T17:17:37.740

我最近还想更新集合中的特定模型。问题是，如果我确实使用`model.save`它并没有更新集合。目标是更改集合中的模型，在服务器上更改它，相应地更新集合而不使用该`sync`方法。例如，我有我的变量`collection`，我想用`id = 2`.

所以第一件事，我将创建一个实例模型，如下所示：
`var model = collection.get(2)`

然后我将更新这个特定模型的属性：
`model.set({name: 'new name'})`

然后我将它保存到服务器：
`model.save({}, {url:'/api/v1/tags/'+model.get('id')})`

然后我们必须根据更改更新集合：
`collection.set({model},{remove: false})`

`set`方法 - 这是一个使用您传入参数的模型列表对集合进行“智能”更新。
`remove: false`参数 - 这是一个集合删除集合中现有模型的限制。更多[在这里](http://backbonejs.org/#Collection-set)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-03-02T22:43:16.943

您可能会错过的第一件事是，在相应的标记模型中，您需要设置“urlRoot”以匹配集合的“url”。否则它根本不知道集合：

```
var Tag = Backbone.Model.extend({
   urlRoot: "/api/v1/tags"
});

var Tags = Backbone.Collection.Extend({
   model: Tag,
   url: "/api/v1/tags"
}); 
```

如果您想单独保存标签，这很有用：

```
var tag = collection.get(2);
tag.set({key: "something"});
tag.save();   // model.save works because you set "urlRoot" 
```

在集合上，如果 id 不为空，“create()”也是“update()”。这并不令人困惑。:) 因此，这几乎等同于前面的示例：

```
collection.create({id: 2; key: "something"}); 
```

这将使用 id=2 更新现有标签，然后触发 PUT。

这是一个古老的问题；回答是因为我正在寻找相同的答案——您可能早就解决了这个问题并继续前进。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T07:56:30.473

您可以将变量传递给`save`方法。它接受 jQuery`ajax`方法使用的所有选项（除非你重写`Backbone.Sync`）

您可以执行以下操作：

`model.save( { name:'new name' } )`;

`id`and`PUT`方法将由 Backbone 自动为您添加。

# android - Looper.loop 不允许在 Android 线程中执行另一项工作

> ID：15485195
> 
> 赞同：2
> 
> 时间：2013-03-18T19:25:28.643
> 
> 标签：android, android-asynctask

我创建了通过套接字连接我的应用程序的线程。但是我需要在这个线程中从/向套接字读取和写入数据。我不能这样做，因为 Looper.loop 不允许这样做。如何从主 UI 读取此线程的消息并检查是否有新数据进入套接字？

```
public class MainActivity extends Activity {

    EditText textOut;
    TextView textIn;
    //Socket soc;
    int port=1000;
    EditText text ;
    public Handler h;
    public Handler mHandler;
    String str;
    Message msg1;

 /** Called when the activity is first created. */
 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    text = (EditText)findViewById(R.id.editText1);
    h = new Handler() {
    public void handleMessage(android.os.Message msg) {
            Bundle bundle = msg.getData();
            str=bundle.getString("TCP");
            text.setText(str);
        };
      };

    thread.start(); 
     //thread.start(); 

 }

    public void send(View view){
        Log.d("TCP", "C: READ123");

        mHandler.sendEmptyMessage(1);

    }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
Thread thread = new Thread()
{
    Message msg;
    BufferedWriter out;

    @Override
    public void run() {

    Looper.prepare();
    mHandler = new Handler() {
        public void handleMessage(Message msg) {
            // обрабатываем входящие сообщения
            Log.d("MY", "RECEIVE");

        }
    }; 

    //LOOP
    //Looper.loop();

     char[] mData = new char[4096];
     String s="";
     Bundle bundle = new Bundle();

        try {
            try {

             InetAddress serverAddr = InetAddress.getByName("192.168.2.75");
             Log.d("TCP", "C: Connecting...");
             Socket socket = new Socket(serverAddr, 1000);
             String message = "komand1";

              try {

                 out = new BufferedWriter( new OutputStreamWriter(socket.getOutputStream())); 
                    // out.println(message);
                     Toast.makeText (getApplicationContext(), message, Toast.LENGTH_SHORT).show(); 
                     Log.d("TCP", "C: Sent.");

                } catch(Exception e) {
                    Log.e("TCP", "S: Error", e);
                 } finally {

                  } 

                 //Read Data from socket
                try {
                    BufferedReader reader = new BufferedReader(new InputStreamReader(socket.getInputStream())); 
                    int read = 0;
                    Log.d("TCP", "Receive");

                    while ((read = reader.read(mData)) >= 0)
                    {
                        if(read > 0){
                        Log.d("TCP", "DATA!!");                     
                        msg = h.obtainMessage();
                        s="";
                        for(int i=0; i<read;i++){
                            s=s+Character.toString(mData[i]);
                        }

                        bundle.putString("TCP", s);
                        msg.setData(bundle);
                        h.sendMessage(msg);

                    }
                    }

                } catch(Exception e) {
                Log.e("TCP", "S: Error", e);
                 }

            } catch (Exception e) {
                 Log.e("TCP", "C: Error", e);
            }

            }                               
         catch (Exception e) {
            e.printStackTrace();
        }

    }
};

} 
```

# android - AndEngine Texture 很奇怪

> ID：15485196
> 
> 赞同：0
> 
> 时间：2013-03-18T19:25:32.370
> 
> 标签：android, textures, andengine

![奇怪的错误](../Images/f9f6b0a33649ffb599079825eec6fa5f.png)

有谁知道为什么会这样？

加载图像的代码：

```
 gameOverAtlas = new BuildableBitmapTextureAtlas(
                activity.getTextureManager(), 1024, 1024,
                TextureOptions.DEFAULT);

deathScreen1 = BitmapTextureAtlasTextureRegionFactory
                .createFromAsset(gameOverAtlas, activity,
                        "deathscreen1.png");

engine.getTextureManager().loadTexture(
            this.gameOverAtlas);
    engine.getTextureManager().loadTexture(
            this.mAutoParallaxBackgroundTexture);
    engine.getTextureManager().loadTexture(
            this.gameOverAtlas);

    try {
        this.gameTextureAtlas
                .build(new BlackPawnTextureAtlasBuilder<IBitmapTextureAtlasSource, BitmapTextureAtlas>(
                        0, 1, 0));
        this.gameTextureAtlas.load();

        this.gameOverAtlas
                .build(new BlackPawnTextureAtlasBuilder<IBitmapTextureAtlasSource, BitmapTextureAtlas>(
                        0, 1, 0));
        this.gameOverAtlas.load();

        this.playerAtlas
                .build(new BlackPawnTextureAtlasBuilder<IBitmapTextureAtlasSource, BitmapTextureAtlas>(
                        0, 1, 0));
        this.playerAtlas.load();

    } catch (final TextureAtlasBuilderException e) {
        Debug.e(e);
    }
} 
```

然后附加精灵：

```
gameOverScreen =  new Sprite(0, 0, 650, 400, ResourceManager.getInstance().deathScreen1,vbom);

    attachChild(gameOverScreen); 
```

我收到此错误： ![在此处输入图像描述](../Images/599b21e25e7bcd78e98af3ed469c35da.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:13:01.940

看起来您在构建纹理图集之前调用了 loadTexture 。

移动：

```
engine.getTextureManager().loadTexture(
        this.gameOverAtlas);
engine.getTextureManager().loadTexture(
        this.mAutoParallaxBackgroundTexture);
engine.getTextureManager().loadTexture(
        this.gameOverAtlas); 
```

在 try/Catch 块之后。

此外，如果您的纹理与 TextureAltas 的尺寸相同，除非您将填充和间距参数设置为 0，否则它将失败。

顺便说一句，如果您正在制作仅包含单个纹理区域的纹理图集，则无需使用可构建的纹理图集。

BuildableTexture 地图集的特殊之处在于它可以将许多区域适合您的地图集，这意味着您不需要使用像 TexturePacker 这样的程序和用于 andengine 的 texturePacker 扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:08:45.497

由于它的可构建纹理，而不是普通纹理，因此您正在以不同的方式加载它

```
try
{           
    gameTexture.build(new BlackPawnTextureAtlasBuilder<IBitmapTextureAtlasSource, BitmapTextureAtlas>(0, 0, 1));
    gameTexture.load();
}
catch (TextureAtlasBuilderException e)
{
    Debug.e(e);
} 
```

请记住最后三个参数，您可以控制填充等。

# javascript - 正则表达式意外令牌

> ID：15485204
> 
> 赞同：5
> 
> 时间：2013-03-18T19:26:09.740
> 
> 标签：javascript, jquery, jquery-validation-engine

当我将此正则表达式添加到验证引擎中时，我收到一个 javascript 错误：“意外令牌”，似乎正则表达式错误，因为它带有红色下划线，为什么？

```
"time1":{    
   "regex": ^([0-9]|0[0-9]|1[0-3]|2[0-3]):[0-5][0-9]$,
   "alertText": "* Invalid Time"
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-18T19:26:48.743

代替

```
 "regex": ^([0-9]|0[0-9]|1[0-3]|2[0-3]):[0-5][0-9]$, 
```

和

```
 "regex": /^([0-9]|0[0-9]|1[0-3]|2[0-3]):[0-5][0-9]$/, 
```

请参阅[正则表达式文字的语法](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T19:27:21.313

它应该是字符串（如果您使用`new RegExp()`它）：

```
"regex": "^([0-9]|0[0-9]|1[0-3]|2[0-3]):[0-5][0-9]$" 
```

或正则表达式文字：

```
"regex": /^([0-9]|0[0-9]|1[0-3]|2[0-3]):[0-5][0-9]$/ 
```

# performance - 减少 LongListSelector 在启动时创建的项目数

> ID：15485213
> 
> 赞同：2
> 
> 时间：2013-03-18T19:26:37.693
> 
> 标签：performance, windows-phone-8, longlistselector

我知道`LongListSelector`UI 虚拟化确实如此，也就是说，它创建了一些足以填满屏幕的项目，再加上更多的项目，然后当用户 scolls 内容`LongListSelector`回收它们而不是创建新的项目。

在我的情况下，6 个项目足以填满屏幕，经过一些研究，我发现`LongListSelector`在启动时会加载 20-22 个项目。我认为这可以安全地减少到 10 项左右。问题是，可以以某种方式减少最初创建的项目的数量吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:42:17.670

[根据官方文档](http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.controls.longlistselector(v=vs.105).aspx)，似乎没有任何方法或属性可以自定义`LongListSelector`默认情况下 UI 虚拟化的数量。

您可以研究数据虚拟化。[以前的答案/教程使用，但使用`IList`](https://stackoverflow.com/questions/7441510/listbox-data-virtualization-is-not-taking-effect)[修改后的工作`ObservableCollection`应该](http://caliburnmicro.codeplex.com/SourceControl/changeset/view/9df8a18b6be4#src/Caliburn.Micro.Silverlight/INPC.cs)不会太多。

另一个我没有尝试过的想法是从 WP Toolkit中获取[WP7 版本，重命名然后自定义它。`LongListSelector`](http://phone.codeplex.com/SourceControl/changeset/view/80797#1336037)但这可能是很多工作。

# excel - 如何比较 Excel VBA 中的单元格位置？

> ID：15485214
> 
> 赞同：2
> 
> 时间：2013-03-18T19:26:42.747
> 
> 标签：excel, vba

好的，所以基本上我想确定为某个字符串找到的行位置是否低于另一个字符串的行位置。如果是，我需要将值设置为零。我已经尝试了很多变体，但似乎无法以这种方式比较范围。是否有另一种方法来获取单元格位置，以便我可以进行此比较？

```
 If i < 56 Then
        If Rng4(j) < Rng5(i + 1) Then
            Rng4(j).Activate
            X(i, j, 1) = ActiveCell.Offset(0, 1)
            X(i, j, 2) = ActiveCell.Offset(0, 2)
        Else
            X(i, j, 1) = 0
            X(i, j, 2) = 0
        End If
    End If 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:30:59.110

您需要比较范围的 Row 属性

```
If i < 56 Then
    If Rng4(j).Row < Rng5(i + 1).Row Then
        Rng4(j).Activate
        X(i, j, 1) = ActiveCell.Offset(0, 1)
        X(i, j, 2) = ActiveCell.Offset(0, 2)
    Else
        X(i, j, 1) = 0
        X(i, j, 2) = 0
    End If
End If 
```

# delphi - Windows 版本信息

> ID：15485217
> 
> 赞同：-1
> 
> 时间：2013-03-18T19:26:47.010
> 
> 标签：delphi, delphi-xe2

如何使用 Delphi XE2 显示 Windows 版本信息？我在“Uses”中添加了“System.SysUtils”，然后编写了以下代码：

```
Edit1.Text :=TOSVersion.ToString;
Edit2.Text :=TOSVersion.Name; 
```

以上代码编译成功。但以下代码无法编译。

```
Edit3.Text :=TOSVersion.Build;
Edit4.Text :=TOSVersion.Major;
Edit5.Text :=TOSVersion.Minor;
Edit6.Text :=TOSVersion.ServicePackMajor;
Edit7.Text :=TOSVersion.ServicePackMinor;
Edit8.Text :=TOSVersion.TArchitecture;
Edit9.Text :=TOSVersion.Platform; 
```

我的要求是仅显示 Windows 本机信息。我不需要任何格式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T19:43:20.907

所有未编译的字段都是整数/枚举，但您正试图将它们按原样分配给基于字符串的属性。您需要将它们格式化为字符串，例如：

```
const
  ArchitectureStr: array[TOSVersion.TArchitecture] of string = ('Intel X86', 'Intel X64');
  PlatformStr: array[TOSVersion.TPlatform] of string = ('Windows', 'MacOS');

...

Edit3.Text := IntToStr(TOSVersion.Build);
Edit4.Text := IntToStr(TOSVersion.Major);
Edit5.Text := IntToStr(TOSVersion.Minor);
Edit6.Text := IntToStr(TOSVersion.ServicePackMajor);
Edit7.Text := IntToStr(TOSVersion.ServicePackMinor);
Edit8.Text := ArchitectureStr[TOSVersion.Architecture];
Edit9.Text := PlatformStr[TOSVersion.Platform]; 
```

# database - B+ 树相对于 BST 的优势？

> ID：15485220
> 
> 赞同：25
> 
> 时间：2013-03-18T19:26:53.660
> 
> 标签：database, data-structures, tree, binary-search-tree, b-tree

我在关于数据库的课程中学习 B+ 树，我想知道 B+ 树相对于二叉搜索树有哪些具体优势？

对于大多数值得注意的操作，它们似乎都具有 O(logN) 平均复杂度，但是 B+ 树在每个子节点上也有额外的（可以忽略不计？）搜索时间，其中 BST 显然只需要 O(1) 时间来确定哪个子节点前进到。

哪些实际优势使 B+ 树在数据库中比 BST 更受欢迎？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-18T19:32:49.437

B+ 树（以及一般的 B 树）相对于二叉搜索树的主要优势在于它们可以很好地处理缓存。如果你有一棵二叉搜索树，它的节点在内存中以或多或少的随机顺序存储，那么每次你跟随一个指针时，机器都必须将一个新的内存块拉入处理器缓存，这比访问已经在缓存中的内存。

B+-tree 和 B-tree 通过让每个节点存储大量键或值并拥有大量子节点来工作。它们通常以某种方式打包在一起，使单个节点可以很好地放入缓存中（或者，如果存储在磁盘上，则可以在单个读取操作中从磁盘中提取）。然后您必须做更多的工作才能在节点中找到一个键或确定接下来要读取哪个子节点，但是因为在单个节点上完成的所有内存访问都可以在不返回磁盘的情况下完成，所以访问时间非常短。这意味着即使原则上 BST 在内存访问*次数*方面可能更好，但 B+-tree 和 B-tree 在这些内存访问的*运行时间*方面可以执行得更好。

B+-tree 或 B-tree 的典型用例是在数据库中，其中有大量信息并且数据非常多，以至于它们无法全部放入主内存中。因此，数据可以存储在硬盘某处的 B+-tree 或 B-tree 中。这最大限度地减少了在查找期间拉入数据所需的磁盘读取次数。一些文件系统（比如 ext4，我相信）出于同样的原因也使用 B 树 - 它们最大限度地减少了必要的磁盘查找次数，这是真正的瓶颈。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-19T20:12:43.707

现实生活中的数据存储（例如，在 DB 中）需要存储大量数据。由于数据检索是关注的基本操作，因此从磁盘读取数据比从 RAM 读取数据非常耗时。

现在，这就是问题所在...

与 B+ 树相比，BST 在节点中存储的数据较少。这导致 BST 的高度高于 B+ 树。因此它们存储在磁盘上而不是 RAM 上。

每次必须从树中检索数据时，都必须将磁盘中的数据加载到主存中（这当然是一个耗时的过程），而对于 B+ 树，数据已经存在在 RAM 中，直接获取所需的节点并从可能包含许多子节点的节点检索数据（但在 B+ 树的情况下，数据检索的总时间较短，因为不需要将数据从磁盘加载到 RAM）。

# windows - 用于搜索和删除特定文件名的批处理脚本

> ID：15485223
> 
> 赞同：4
> 
> 时间：2013-03-18T19:27:13.030
> 
> 标签：windows, batch-file, delete-file

我会准确地解释我的情况。我需要一个在 C:/ 中搜索“Minecraft.exe”的批处理文件，如果存在则将其删除。

我不知道足够多的批次能够自己做到这一点，我到处寻找，我能找到的只是部分解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T19:43:12.783

好吧-首先这样做是个好主意：

```
DIR /s c:\minecraft.exe 
```

但这只是在寻找它。

使用这个命令要非常非常小心——如果出错，你可能会遇到真正的麻烦。

```
del /p /s c:\minecraft.exe 
```

将删除所有 minecraft.exe（但先提示）

省略`/p`，它会在不提示的情况下删除

添加`/f`它还会删除它找到的任何只读版本。

小心点，'k？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:35:09.170

试试这个（在你删除之前它不会删除任何东西`echo`）：

```
@echo off &setlocal 
for /f "delims=" %%i in ('dir /a-d /s /b c:\minecraft.exe') do echo del "%%~i"
endlocal 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-06T18:21:47.003

这可能为时已晚，但是：

```
For /F "tokens=*" %%I in ('Dir c:\Minecraft.exe /s /b') do set FOUND="%%~fI"
del %FOUND% 
```

第一行搜索整个 C: 驱动器。第二行删除文件。

# android - 给定特定日期访问收件箱

> ID：15485225
> 
> 赞同：0
> 
> 时间：2013-03-18T19:27:16.777
> 
> 标签：android, sql, sqlite, sms, cursor

大家好，我想根据指定的月份访问某些短信，例如当前月份和上个月。等等

我写了这个查询，它不起作用，需要一点帮助..？

```
Cursor c1;
    String[] projection={"_id","address", "date"};

    Calendar calendar = Calendar.getInstance();
    int month = calendar.get(Calendar.MONTH) + 1;
    String where= month +"=date(date,%m)";
    c1 = getApplicationContext().getContentResolver().query(Uri.parse("content://sms/inbox"), projection,where, null,null); 
```

也有人可以告诉我为什么我在下面的注释代码行中遇到错误

```
c2 = getContentResolver().query(android.provider.CallLog.Calls.CONTENT_URI,
                null, android.provider.CallLog.Calls.TYPE+"="+android.provider.CallLog.Calls.INCOMING_TYPE, null,null);

        if(c2!=null){
            callArray[2]= "RECEIVED "+c2.getCount();    
            callArray[3]= "INCOMING Duration : "+00.00;
            //c2.getString(c2.getColumnIndex(android.provider.CallLog.Calls.DURATION));
        }else{
            callArray[2]= "RECEIVED "+0;
            callArray[3]= "INCOMING Duration :"+0;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:03:59.170

```
String where = String.format("'%02d'", month) + " = strftime('%m', date)"; 
```

# android - 有时重复的字符串来自 android sqlite 数据库

> ID：15485226
> 
> 赞同：4
> 
> 时间：2013-03-18T19:27:20.483
> 
> 标签：android, android-sqlite

我有一个在 java 程序中填充的 sqlite 数据库（我手动添加了语言环境，以便它可以与 Android 一起使用）。数据库中的每个条目本质上或多或少都是一个句子，我将所有句子加起来组成一章。

**问题：**有时，（到目前为止，这仅在 2 部冰淇淋三明治手机上发现）我看到部分句子被写入，然后是换行符，然后是部分句子的重复。从数据库中获取句子后，我用一个相当大的算法解析句子，但这似乎不是问题，因为在我卸载应用程序（破坏缓存）并重新加载同一章节后，问题就消失了。差异似乎来自我从数据库中获得的信息。

**用户看到的示例：**

> 小男孩收到了礼物，要换 **行，因为某种原因，** 男孩收到了礼物，要送给他的小妹妹作为生日礼物。

**一些可能很奇怪**的事情：数据库在 sentence_num（一章中每个句子的唯一编号）、book_name、chample_num 之间有一个 3 列 PK。

**我用来访问数据库的代码**

```
 public synchronized List<ChapterElement> getSentenceChapter(SentenceReference sentenceRef) {
        Book book = sentenceRef.getBook();
        Integer chapter = sentenceRef.getChapter();

        String[] columns = {
                SentenceDatabaseHelper.COLUMN_SENTENCE_NUM,
                SentenceDatabaseHelper.COLUMN_SENTENCE_IS_START_OF_PARAGRAPH,
                SentenceDatabaseHelper.COLUMN_SENTENCE_HAS_FOOT_NOTE,
                SentenceDatabaseHelper.COLUMN_SENTENCE_HAS_CROSS_REFERENCE,
                SentenceDatabaseHelper.COLUMN_SENTENCE_CONTENT
        };

        String selection = SentenceDatabaseHelper.COLUMN_SENTENCE_BOOK + "=? AND " 
                + SentenceDatabaseHelper.COLUMN_SENTENCE_CHAPTER + "=?";

        String[] selectionArgs = {book.getShortenedName(), chapter.toString()};

        String orderBy = SentenceDatabaseHelper.COLUMN_SENTENCE_ORDER_NUM + " ASC";

        Cursor cursor = null;
        SQLiteDatabase database = null;

        try {
            database = sentenceDBH.getReadableDatabase();
            cursor = database.query(SentenceDatabaseHelper.TABLE_SENTENCE,
                    columns, selection, selectionArgs, null, null, orderBy);
        } catch (Exception e) {
            Log.e(TAG, "There was an error while accessing the database.", e);
            if (cursor != null) {
                cursor.close();
            }
            if (database != null) {
                database.close();
            }
        }

        int sentenceNumIndex = cursor.getColumnIndex(SentenceDatabaseHelper.COLUMN_SENTENCE_NUM);
        int hasFootNoteIndex = cursor.getColumnIndex(SentenceDatabaseHelper.COLUMN_SENTENCE_HAS_FOOT_NOTE);
        int hasCrossReferenceIndex = cursor.getColumnIndex(SentenceDatabaseHelper.COLUMN_SENTENCE_HAS_CROSS_REFERENCE);
        int isStartOfParagraphIndex = cursor.getColumnIndex(SentenceDatabaseHelper.COLUMN_SENTENCE_IS_START_OF_PARAGRAPH);
        int contentIndex = cursor.getColumnIndex(SentenceDatabaseHelper.COLUMN_SENTENCE_CONTENT);

        List<ChapterElement> chapterElements = new ArrayList<ChapterElement>( cursor.getCount() );
        while ( cursor.moveToNext() ) {
            int sentenceNum = cursor.getInt(sentenceNumIndex);
            boolean hasFootNote = (cursor.getInt(hasFootNoteIndex) == 1) ? true : false;
            boolean hasCrossRef = (cursor.getInt(hasCrossReferenceIndex) == 1) ? true : false;
            boolean isStartOfParagraph = (cursor.getInt(isStartOfParagraphIndex) == 1) ? true : false;
            String content = cursor.getString(contentIndex);

            ChapterElement chapterElement = new ChapterElement(sentenceNum, hasFootNote, hasCrossRef,
                    isStartOfParagraph, content);
            chapterElements.add(chapterElement);
        }

        cursor.close();
        database.close();

        return chapterElements;
    } 
```

任何帮助，将不胜感激。

# c# - 我收到以下异常：“无法加载 DLL：操作系统无法运行。（来自 HRESULT 的异常：0x800700B6）”

> ID：15485229
> 
> 赞同：-3
> 
> 时间：2013-03-18T19:27:28.453
> 
> 标签：c#, .net, pinvoke, openmp, intel-ipp

当 P/Invoking 进入英特尔 IPP 库时会发生这种情况。这个库又依赖于 OpenMP。

这是我尝试过的：<a href="http://software.intel.com/en-us/articles/opm-abort-initializing-libguide40dll/" rel="nofollow">http://software. intel.com/en-us/articles/opm-abort-initializing-libguide40dll/

应该解决同时使用两个版本的 OpenMP（libguide40.dll 和 libiomp5md.dll）的异常。删除 libguide40.dll 的本地副本并不能解决问题。你能帮我追查吗？

我正在尝试`dir /s libguide40.dll`：不再有该 DLL 的实例，但我仍然遇到异常。

详细信息：我正在使用英特尔在其 IPP 示例中提供的 P/Invoke 生成的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:26:07.047

1.  我在目标机器上使用的 OpenMP DLL 中的字节数不正确（可能是网络文件传输 SNAFU）。避免这种混乱的方法是使用存档或 MD5。

2.  它仍然坏了......我必须确保 IPP 的初始化对整个应用程序只运行一次。我使用了一个静态的 Lazy 成员。

感谢所有的帮助！

# wpf - 在 WPF 中正确地在堆栈面板中衬里项目

> ID：15485238
> 
> 赞同：1
> 
> 时间：2013-03-18T19:27:53.087
> 
> 标签：wpf, xaml

我正在尝试对齐网格视图下方的文本块、文本框和按钮。现在它们的顺序是正确的，但它们被集中在左边。我希望它们从左到右均匀分布在网格视图下方，并延伸到整个窗口。这是xaml。

```
 <Grid>        
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto"/>                                     
        </Grid.RowDefinitions>
        <StackPanel>          
           <telerik:RadGridView x:Name="radGridView" 
                             GroupRenderMode="Flat"
                             ShowGroupPanel="True"                                                      
                             ColumnWidth="*" 
                             IsReadOnly="True"                                                                                     
                             Grid.Row="0"                                                         
                             CanUserFreezeColumns="False"
                             RowIndicatorVisibility="Collapsed"
                             CanUserResizeColumns="True"
                             ShowGroupFooters="True"                              
                             ShowColumnFooters="True" 
                             ItemsSource="{Binding Path=Tester}" />
            <telerik:RadDataPager x:Name="radDataPager"
                              Grid.Row="1"                                                           
                              PageSize="10"
                              Source="{Binding Items, ElementName=radGridView}"
                              DisplayMode="All"
                              IsTotalItemCountFixed="True"/> 
           <StackPanel Orientation="Horizontal">                           
            <TextBlock Grid.Row="2" 
                       TextWrapping="Wrap"
                       HorizontalAlignment="Stretch"
                       Text="Search Testing"/>
            <TextBox ToolTip="Enter Search into box"
                    x:Name="txtName" 
                    Grid.Row="2"                    
                    FontFamily="Courier New"
                    HorizontalAlignment="Stretch"
                    TextWrapping="Wrap" 
                    Text="{Binding SearchText}"/>
            <telerik:RadButton ToolTip="Click To Search"
                    x:Name="btnSearch"           
                    Content="Search"
                    Grid.Row="2"  
                    HorizontalAlignment="Stretch"           
                    Click="RadButton_Click_1"/>
            </StackPanel>
        </StackPanel>
    </Grid> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T19:32:55.400

使用网格而不是堆栈面板：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition/>
        <ColumnDefinition/>
        <ColumnDefinition/>
    </Grid.ColumnDefinitions>
    <TextBlock TextWrapping="Wrap"
               Width="auto"
               HorizontalAlignment="Stretch"
               Text="Search Testing"/>
    <TextBox ToolTip="Enter Search into box"
             Grid.Column="1"
             Width="auto"
             x:Name="txtName"               
             FontFamily="Courier New"
             HorizontalAlignment="Stretch"
             TextWrapping="Wrap" 
             Text="{Binding SearchText}"/>
    <telerik:RadButton ToolTip="Click To Search"
               Grid.Column="2"
               Width="auto"
               x:Name="btnSearch"           
               Content="Search" 
               HorizontalAlignment="Stretch"           
               Click="RadButton_Click_1"/>
</Grid> 
```

# intellij-idea - WebSphere Liberty 配置文件和 Intellij：应该启用 JMX 管理

> ID：15485239
> 
> 赞同：12
> 
> 时间：2013-03-18T19:28:06.323
> 
> 标签：intellij-idea, websphere, jmx, websphere-liberty

是否有人从 Intellij 12 内部运行 WebSphere 8.5.0.1 Liberty Profile？

我添加了一个 WebSphere 服务器运行配置，但我得到的只是：

> ```
> Error running WebSphere 8.5.0.1: JMX administration should be enabled 
> ```

我可以理解该错误，但不确定如何在 Intellij 中解决此问题。我在 WebSphere 中添加了 server.xml 来表示：

```
<featureManager>
    <feature>localConnector-1.0</feature>
</featureManager> 
```

但我不确定 Intellij 是否正在读取此配置文件。

![在此处输入图像描述](../Images/d480ae30c090c0ad52d4f230d5ca405e.png)

如果有人有这个工作，请告诉我如何。谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-19T13:43:03.610

为了使 IDEA 可以使用 JMX 管理 WebSphere LP，您应该在 中指定`server.xml`：

```
<applicationMonitor updateTrigger="mbean" /> 
```

**除了**您已经指定的片段：

```
<featureManager>
    <feature>localConnector-1.0</feature>
</featureManager> 
```

实际上，IDEA 能够为您进行这两项更改——您只需按下运行配置中消息`Fix`旁边的按钮即可。`JMX administration should be enabled`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-04T20:57:28.380

如果您没有看到“修复”按钮，或者您没有在下拉菜单中看到您创建的服务器，则可能是权限问题。

如果您在本地机器上并且并不真正关心授予对该文件夹的访问权限：

```
chmod -R a+wrx /opt/IBM/WebSphere/Liberty/ 
```

# graphics - 在 DirectX 9 中，一个像素着色器可以在每个像素的每个绘制调用中运行一次以上吗？

> ID：15485246
> 
> 赞同：2
> 
> 时间：2013-03-18T19:28:34.593
> 
> 标签：graphics, direct3d, directx-9, pixel-shader

如果我在同一个绘制调用中有多个重叠的三角形，我的像素着色器是否为每个覆盖它的图元输入了一次？还是先进行深度测试，然后每个像素只输入一次着色器，而不管图元的数量如何？

我正在使用 DirectX 9 并使用着色器模型 4.0 级别 9_1。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:20:47.800

深度测试发生在像素着色器之后。看到[这个问题](https://gamedev.stackexchange.com/questions/26719/when-does-depth-testing-happen)。

此外，很明显像素着色器每个像素运行不止一次。考虑 alpha 混合：必须先渲染不透明像素，然后将透明像素与已经渲染的不透明像素混合。如果每个像素只输入一次像素着色器，则永远不会发生这种情况。

“每个原语一次”不是正确的术语。单个图元很可能覆盖多个像素，因此单个图元将导致像素着色器针对图元覆盖的每个像素运行。

为了防止像素着色器在被其他对象遮挡的图元上运行，您必须实现某种形式的[遮挡剔除](http://en.wikipedia.org/wiki/Hidden_surface_determination)。或者，某些驱动程序可能会在一定程度上为您执行此操作。请参阅[此链接](http://en.wikipedia.org/wiki/Z-buffering#Z-culling)并在下面发表评论。

# java - SharedPreferences Splash Screen 应该在加载一次后调用 Activity - 改为强制关闭

> ID：15485249
> 
> 赞同：-1
> 
> 时间：2013-03-18T19:28:41.613
> 
> 标签：java, android, eclipse, sharedpreferences

我在为我只想运行一次的注册活动构建启动画面时遇到问题。

在其他一些 stackoverflow ninjas 的帮助下，我已经能够提出以下代码：

```
import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.content.Intent;
import com.nfc.linkingmanager.R;
import android.content.SharedPreferences;
import java.lang.Object;
import android.preference.PreferenceManager;

public class SplashScreen extends Activity {

SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this );
finish();

if (prefs.getBoolean("SplashFlag", false)&&!mIsBackButtonPressed) {
    Intent intent = new Intent(SplashScreen.this, NewCore.class);
    SplashScreen.this.startActivity(intent);
} else {
    SharedPreferences.Editor editor = preferences.edit();
    editor.putBoolean("SplashFlag", true); // value to store
    // Again there are values for int, long, string, float, boolean
    Intent intent = new Intent(SplashScreen.this, AppActivity.class);
        SplashScreen.this.startActivity(intent);
    editor.commit(); // This is needed or the edits will not be put into the prefs file
}

private boolean mIsBackButtonPressed;
private static final int SPLASH_DURATION = 1000; 

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.splash_screen);

    Handler handler = new Handler();

    // run a thread after 2 seconds to start the home screen
    handler.postDelayed(new Runnable() {

        @Override
        public void run() {

            // make sure we close the splash screen so the user won't come back when it presses back key

            finish();

            if (!mIsBackButtonPressed) {
                // start the home screen if the back button wasn't pressed already 
                Intent intent = new Intent(SplashScreen.this, NewCore.class);
                SplashScreen.this.startActivity(intent);
           }

        }

    }, SPLASH_DURATION); // time in milliseconds (1 second = 1000 milliseconds) until the run() method will be called

}

@Override
public void onBackPressed() {

    // set the flag to true so the next activity won't start up
    mIsBackButtonPressed = true;
    super.onBackPressed();

}
} 
```

但是，每次我执行它时-它都会强制关闭我。我是使用 SharedPreferences 的新手所以我确定我忽略了一些简单的东西。

日志猫：

```
03-18 15:26:42.028: D/AndroidRuntime(23094): Shutting down VM
03-18 15:26:42.038: W/dalvikvm(23094): threadid=1: thread exiting with uncaught exception (group=0x41d42930)
03-18 15:26:42.038: E/AndroidRuntime(23094): FATAL EXCEPTION: main
03-18 15:26:42.038: E/AndroidRuntime(23094): java.lang.Error: Unresolved compilation problems: 
03-18 15:26:42.038: E/AndroidRuntime(23094):    Return type for the method is missing
03-18 15:26:42.038: E/AndroidRuntime(23094):    This method requires a body instead of a semicolon
03-18 15:26:42.038: E/AndroidRuntime(23094):    Syntax error on token ";", { expected after this token
03-18 15:26:42.038: E/AndroidRuntime(23094):    preferences cannot be resolved
03-18 15:26:42.038: E/AndroidRuntime(23094):    Syntax error on token "(", ; expected
03-18 15:26:42.038: E/AndroidRuntime(23094):    Syntax error on token ")", ; expected
03-18 15:26:42.038: E/AndroidRuntime(23094):    Syntax error on token(s), misplaced construct(s)
03-18 15:26:42.038: E/AndroidRuntime(23094):    Syntax error on token "void", @ expected
03-18 15:26:42.038: E/AndroidRuntime(23094):    Syntax error, insert "}" to complete ClassBody
03-18 15:26:42.038: E/AndroidRuntime(23094):    at com.nfc.linkingmanager.SplashScreen.<init> (SplashScreen.java:16)
03-18 15:26:42.038: E/AndroidRuntime(23094):    at java.lang.Class.newInstanceImpl(Native Method)
03-18 15:26:42.038: E/AndroidRuntime(23094):    at java.lang.Class.newInstance(Class.java:1319)
03-18 15:26:42.038: E/AndroidRuntime(23094):    at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
03-18 15:26:42.038: E/AndroidRuntime(23094):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
03-18 15:26:42.038: E/AndroidRuntime(23094):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-18 15:26:42.038: E/AndroidRuntime(23094):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-18 15:26:42.038: E/AndroidRuntime(23094):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-18 15:26:42.038: E/AndroidRuntime(23094):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-18 15:26:42.038: E/AndroidRuntime(23094):    at android.os.Looper.loop(Looper.java:137)
03-18 15:26:42.038: E/AndroidRuntime(23094):    at android.app.ActivityThread.main(ActivityThread.java:5041)
03-18 15:26:42.038: E/AndroidRuntime(23094):    at java.lang.reflect.Method.invokeNative(Native Method)
03-18 15:26:42.038: E/AndroidRuntime(23094):    at java.lang.reflect.Method.invoke(Method.java:511)
03-18 15:26:42.038: E/AndroidRuntime(23094):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-18 15:26:42.038: E/AndroidRuntime(23094):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-18 15:26:42.038: E/AndroidRuntime(23094):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:30:16.540

在方法内部编写代码。您已经在方法之外编写了大部分代码。学习如何用java编写代码。

在 SplashScreen 类中。

```
public void methodName() {
    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this );
    ..........
    editor.commit();//This is needed or the edits will not be put into the prefs file
} 
```

# jquery - 解析嵌套 json 以显示数据

> ID：15485256
> 
> 赞同：0
> 
> 时间：2013-03-18T19:29:08.353
> 
> 标签：jquery, json, drop-down-menu

我正在尝试使用此 json 显示数据，并从“联系人”键的值构建一个下拉菜单，但我无法弄清楚这一点：

json数据：

```
data =     [
  {"conta":"13356","name":"MISS Two"},
  {"zip":"01111","city":"NASHUA, MA","street_a":"10 MAIN ROAD SQUARE","street_b":"Nothing"},
  {"count":"544","number":"250"},
[
  {"contact":"Mark Bre"},
  {"contact":"Mary Lou"},
  {"contact":"John Ton"},
  {"contact":"Carls Des"},
  {"contact":"Carlos Drt"}
 ]
] 
```

任何帮助，感谢您的关注！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:43:13.600

创建选择..将其附加到您想要的元素（我将其附加到正文）...遍历您的数据..创建选项并将其附加到创建的动态选择

尝试这个

```
$('body').append('<select id="dynamicSelect"></select>');
var options="";
$.each(data,function(i1,val1){
       if($.isArray(val1)){
          $.each(data,function(i2,val2){
               options += "<option value="+ val2.contact +">" + val2.contact + "</option>"
          });
       }
    }
$('#dynamicSelect').append(options); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:32:22.517

使用递归方式遍历数据；[jsfiddle](http://jsfiddle.net/zehYP/1/)

```
 function showData(obj){
   for(var k in obj){
       if($.isArray(obj[k])){
            showData(obj[k]);
        }
         else{
             for(var l in obj[k]){
                $('body').append(obj[k][l]+ "   ");             
             }
             $('body').append( "<br>");
           console.log(obj[k]);
        }
    }
} 
```

# qemu - Qemu源码流程

> ID：15485257
> 
> 赞同：2
> 
> 时间：2013-03-18T19:29:09.277
> 
> 标签：qemu

我正在构建一个项目，我必须在其中提取运行在 qemu-kvm 之上的虚拟机的脏页面。我下载了 qemu 源代码，但由于源代码非常大，因此无法正确理解。所以请给我有关处理源代码和获取脏页的指南。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-08T15:53:00.297

同意源代码很大且难以掌握。

最近也有类似的问题，我在上面贴了一张图，想提请大家注意，或许可以作为一个很好的探索起点：

[QEMU代码流程问题](https://stackoverflow.com/questions/20675226/qemu-code-flow-instruction-cache-and-tcg/21000294#21000294)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-03-14T12:31:15.770

我同意 QEMU 源代码太庞大且太耗时而无法理解。下面的链接简要介绍了 QEMU 如何运行以及 QEMU 的基本块是什么。

在此链接中，此人对 QEMU 功能、QEMU 结构、流程进行了详细研究。附有详细说明的 PDF。他谈到了vl.c（主文件），目标代码，TCG，动态翻译，代码库，执行开始等。非常有见地。

[QEMU 文档](http://lists.gnu.org/archive/html/qemu-devel/2011-04/msg02362.html)

编辑：文件中的一些要点：

**开始执行：** / 中对研究很重要的主要 C 文件是 ; /vl.c，/cpus.c，/execall.c，/exec.c，/cpu-exec.c。开始执行的“main”函数在/vl.c 中定义。该文件中的函数根据给定的虚拟机规格（如内存大小、可用设备、CPU 数量等）设置虚拟机环境。在主函数中，设置虚拟机后，通过文件分支执行例如/cpus.c、/exec-all.c、/exec.c、/cpu-exec.c。

**模拟硬件：** 模拟虚拟机中所有虚拟硬件的代码可以在 /hw/ 中找到。QEMU 模拟了相当多的硬件，但在本研究中不需要详细了解硬件是如何模拟的。

**客户（目标）特定：** 当前在 QEMU 中模拟的处理器架构是；Alpha、ARM、Cris、i386、M68K、PPC、Sparc、Mips、MicroBlaze、S390X 和 SH4。将 TB 转换为 TCG 操作所需的特定于这些架构的代码在 /target-xyz/ 中可用，其中 xyz 可以是上述任何给定的架构名称。因此，特定于 i386 的代码可以在 /target-i386/ 中找到。这部分可以称为TCG的前端。

**主机 (TCG) 特定：** 用于从 TCG 操作生成主机代码的主机特定代码放置在 /tcg/ 中。在 TCG 中可以找到 /xyz/ ，其中 xyz 可以是 i386 、sparc 等，其中包含将 TCG 操作转换为体系结构特定代码的代码。这部分可以称为TCG的后端。

**/vl.c ：**主仿真器循环，设置虚拟机并执行 CPU。

**/target-xyz/translate.c ：**提取的客户代码（客户特定的 ISA）被转换为与架构无关的 TCG 操作

**/tcg/tcg.c :** TCG 的主要代码。

**/tcg/*/tcg-target.c ：**将 TCG 操作转换为主机代码（主机特定 ISA）的代码。

**/cpu-exec.c : /cpu-exec.c**中的函数 cpu-exec() 找到下一个翻译块 (TB)，如果没有找到，则调用生成下一个 TB 并最终执行生成的代码。

# iphone - 文件目录保存图像

> ID：15485261
> 
> 赞同：0
> 
> 时间：2013-03-18T19:29:17.287
> 
> 标签：iphone, ios, objective-c

我有一个将图像保存到文档目录的应用程序。我一直在阅读，我听说开发人员的应用程序因在文档目录中存储太多数据而被拒绝。

我知道我可以从 iCloud 备份中排除图片，但我想要一种方法让用户备份他们的图片。这个应用程序可能是一个免费的应用程序，所以我不想运行服务器来保存备份。

关于备份用户照片的方法有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:33:23.757

在 Documents 目录中存储大量数据和文件并没有错。要求是数据/文件必须是实际的用户数据，如果丢失则不能轻易替换。如果照片不存在于其他任何地方，并且照片来自使用该应用程序的用户，那么您会没事的。

换句话说，例如，不要存储可以从您的服务器重新下载的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:00:38.440

我认为，您必须限制下载次数并保存该图像以及限制完成后。删除以前的保存新的..

# php - php注册表单

> ID：15485267
> 
> 赞同：0
> 
> 时间：2013-03-18T19:29:40.463
> 
> 标签：php, database, forms, insert, registration

大家好，我正在尝试使用 html 表单将一些值插入数据库，它给了我***列计数与第 1 行的值计数不匹配***的错误，我不明白，我是 php 新手，谁能帮助我？问候

**php代码**

```
<?
if(isset($_POST['submit'])){

      $userName = $_POST["userName"];
      $FirstName =$_POST["FirstName"];
      $LastName =$_POST["LastName"];
  $stnumber = $_Post["ID"];
  $class = $_POST["class"];
  $subject = $_POST["subject"];
  $grade = $_POST["grade"];
  $password = $_POST["password"];

} else{

    echo("wronggggggg nameeeeeeeeeeeee");
}

$stnumber = mysql_escape_string ("ID");
$userName = mysql_escape_string ("userName");
$password = mysql_escape_string ("password");
$FirstName = mysql_escape_string ("FirstName");
$LastName = mysql_escape_string ("LastName");
$class = mysql_escape_string ("class");
$subject = mysql_escape_string ("subject");
$grade = mysql_escape_string ("grade");

mysql_query ("INSERT INTO LOGIN
 VALUES ('$stnumber','$userName','$password','$FirstName','$LastName','$stnumber','$class','$subject','$grade')") or die(mysql_error());

 $sql = mysql_query("SELECT * FROM LOGIN WHERE userName ='$userName'");
//$row = mysql_query($sqlUser);
//$result = mysql_query($sql, $connection);

if(mysql_num_rows ($sql)> 0){
    echo   ("Upload sucessful");
    } else
{
    echo("Upload fail");

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-03T05:06:29.100

**试试这个代码**

$insert_qry = mysql_query("INSERT INTO `LOGIN`( `ID`, `userName`, `password`, `FirstName`, `LastName`, `class`, `subject`, `grade`) 值 ('".$stnumber."','".$userName."','".$password."','".$ FirstName."','".$LastName."','".$class."','".$subject."','".$grade."')") 或 die(mysql_error()) ;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:32:17.437

检查表中有多少列。它应该是您插入的确切数字，即 9（减去任何自动增量）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T19:33:49.170

您要么必须指定要用于 的字段，要么必须`INSERT`正确地将数据插入所有这些字段。

我建议您尝试按如下方式编辑查询（我宁愿假设您的字段名称）：

```
INSERT INTO `LOGIN`
(`stnumber`, `username`, `password`, `forename`, `surname`, `stnumber`, `class`, `subject`, `grade`)
VALUES 
('$stnumber','$userName','$password','$FirstName','$LastName','$stnumber','$class','$subject','$grade') 
```

然而值得注意的是，您正在使用一组已弃用的函数。您应该研究使用[MySQLi](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)以获得更好的性能和寿命。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T19:33:58.410

在这一行：

```
mysql_query ("INSERT INTO LOGIN
VALUES ('$stnumber','$userName','$password','$FirstName','$LastName','$stnumber','$class','$subject','$grade')") or die(mysql_error()); 
```

你使用`$stnumber`了两次，我不知道这是否是有意的，但我猜这可能增加了一个不应该存在的额外价值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T19:35:02.183

我发现最好在`INSERT`语句中包含列名，以明确定义哪些值被插入到哪一列中。例如：

```
INSERT INTO `table` ( `column_1`, `column_2` )
VALUES ( 'value_1', 'value_2' ); 
```

您也可以考虑查看[PHP PDO](http://php.net/manual/en/book.pdo.php)，因为它比`mysql_query`调用更安全，从 v5.5.0 开始，将被弃用。

如果您提供您的表结构，我们可能能够准确地确定您的 INSERT 语句中缺少/额外的列。

# hive - Hive CASE 语句中的数据类型转换错误

> ID：15485268
> 
> 赞同：1
> 
> 时间：2013-03-18T19:29:47.523
> 
> 标签：hive, hiveql

我有一个 HiveQL 查询，看起来像：

```
SELECT  ID, 
        CASE WHEN col_a = 0 THEN 0
        ELSE (col_b / col_a) END AS math_is_fun
FROM    (/* derived query*/) AS x ; 
```

当我在 Hive 中执行此操作时，我最近开始收到错误`FAILED: Error in semantic analysis: Line X:Y ArgumentTypeMismatch 'col_a': The expression after ELSE should have the same type as those after THEN: "int" is expected but "double" is found.`

虽然我知道文字`0`和 的结果之间存在数据类型不匹配`(col_a / col_b)`，但我不清楚 Hive 为何对此感到窒息，更重要的是，解决此错误的最佳行动方案是什么。我应该将文字转换`0`为 a`double`还是有更好的方法？

这是在 Amazon EMR 中运行的 Hive 0.8.1。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T21:37:27.243

假设 col_a 和 col_b 都是`ints`. 字面`0`量当然是 an `int`，并且根据[wiki 教程](https://cwiki.apache.org/Hive/tutorial.html)划分“给出将 B 与 A 相除的结果。结果的类型与操作数类型的公共父级（在类型层次结构中）相同。如果操作数是整数类型，那么结果是除法的商”，所以它也应该是一个`int`。

我正在运行 Hive 0.10.0 并遇到与您相同的错误，`(col_b / col_a)`看起来像 a`double`但应该是`int`. 这对我来说似乎是一个错误，但也许规范中有一些我没有发现的微妙之处。

有几个解决方案。

```
SELECT  ID, 
    CASE WHEN col_a = 0 THEN CAST(0 AS DOUBLE)
    ELSE (col_b / col_a) END AS math_is_fun
FROM    (/* derived query*/) AS x ; 
```

和

```
SELECT  ID, 
    CASE WHEN col_a = 0 THEN 0.0
    ELSE (col_b / col_a) END AS math_is_fun
FROM    (/* derived query*/) AS x ; 
```

是等价的，但我想你可能想要

```
SELECT  ID, 
    CASE WHEN col_a = 0 THEN 0
    ELSE CAST((col_b / col_a) AS INT) END AS math_is_fun
FROM    (/* derived query*/) AS x ; 
```

假设`col_a`和`col_b`都是，`ints`并且您希望结果是整数除法，如 wiki 中所述。希望其他人会出现并建议您假设的“更好的方法”。

如果其中一个`col_a`or`col_b`是双倍的，或者您希望结果是浮点除法，请忽略我所说的所有其他内容，只需更改`0`为`0.0`，使其不再看起来像`int`Hive。

# jakarta-ee - 在 IntelliJ 中为 Java EE 项目部署工件，什么是分解工件

> ID：15485269
> 
> 赞同：2
> 
> 时间：2013-03-18T19:29:52.383
> 
> 标签：jakarta-ee, maven, intellij-idea

当我在 IntelliJ 中启动 JSF Maven 项目并编辑运行配置时，它为我提供了在服务器上部署的 2 个选项：

*   项目战争
*   project.war 爆炸了

它怎么知道我会有一个战争文件？那我会有这个神器吗？它来自pom文件吗？什么是爆炸神器？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T19:44:33.580

*   JSF 相关项目（[JavaServer Faces](https://en.wikipedia.org/wiki/JavaServer_Faces)）始终是一个 Web 应用程序。所以它需要是一个 .war ( [Web Application aRchive](https://en.wikipedia.org/wiki/WAR_(file_format)) ) 文件。
*   在一般的 WAR 文件中，项目的所有工件都以[压缩](https://en.wikipedia.org/wiki/Zip_(file_format))格式捆绑在一起。部署后，默认情况下，许多[Web 容器](https://en.wikipedia.org/wiki/Web_container)会“分解”（解压缩）war 文件（解压缩）文件（[JAR](https://en.wikipedia.org/wiki/JAR_(file_format))文件、[JSP](https://en.wikipedia.org/wiki/JavaServer_Pages)、[HTML](https://en.wikipedia.org/wiki/HTML)、[图像](https://en.wikipedia.org/wiki/Image_file_formats)或其他资源）的常规文件夹。

在分解的战争格式中，所有工件都采用这种格式，以便对于每个部署周期，可以部署部分战争文件的工件。

一个有用的链接是[爆炸战争的优点/缺点](https://stackoverflow.com/questions/3906881/advantages-disadvantages-to-exploded-wars)

# oz - 我的“For”循环代码中的参数错误（Oz/Mozart）

> ID：15485271
> 
> 赞同：0
> 
> 时间：2013-03-18T19:29:56.297
> 
> 标签：oz, mozart

我最近开始学习 Oz/Mozart，为了练习，我正在尝试编写一个简单的“For”程序的代码，该程序从“Init”循环到“End”值，并在每个循环中打印当前循环编号到浏览器。这是代码：

此过程创建一个从 Init 到 End 值的列表：

```
declare
fun {Listing Init End}
   if Init == End then
      [Init]
   else
      Init|{Listing Init+1 End}
   end
end 
```

这会循环并在每个循环中应用函数“F”：

```
declare ForList
fun {ForList F L}
   case L of H|T then
      {F H}|{ForList F T}
   else nil end
end 
```

这包装了上述函数，以便可以接收 Init 和 End 值，而不是列表：

```
declare MyFor L X in
proc {MyFor F Init End}
   L = {Listing Init End}
   X = {ForList F L}
end 
```

最后，我调用 MyFor：

```
{MyFor Browse 1 4} 
```

当我尝试编译时，我收到此错误：

```
%*************** Error: illegal number of arguments *************
%**
%** In statement: {<P/1 Browse> 1 _<optimized>}
%** Expected:     1 argument
%** Found:        2 arguments
%**
%** Call Stack:
%** procedure 'ForList' in file "Oz", line 11, column 0, PC = 15793 
```

（第 11 行是“fun {ForList FL}”）

我尝试在一些子例程中交换“func”和“proc”以查看是否有变化，但我真的不知道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:31:13.420

`ForList`需要一个将元素映射到结果的函数。但是`Browse`是一个不返回任何东西的过程。`ForList`应该看起来更像这样：

```
proc {ForList F L}
  case L of H|T then
    {F H}
    {ForList F T}
  else
    skip
  end
end 
```

这正是内置函数`List.forAll`和`List.map`.

顺便说一句，在`MyFor`您的定义中使用的是*全局*变量`X`和`L`. `MyFor`当多次调用时，这将导致问题。您应该改用*局部*变量。像这样：

```
proc {MyFor F Init End}
  L X
in
  L = {Listing Init End}
  X = {ForList F L}
end 
```

# oracle - 从表/记录中检索值

> ID：15485280
> 
> 赞同：0
> 
> 时间：2013-03-18T19:30:18.930
> 
> 标签：oracle, stored-procedures, plsql, oracle11g, user-defined-types

我创建了一个自定义记录类型说它`record_object`有一个值`column3`。此记录填充为

```
OPEN cur_record FOR query;
BEGIN
  LOOP
    FETCH cur_record BULK COLLECT INTO record_object;
    FOR i IN 1..record_object.count;
    END LOOP;
    EXIT WHEN cur_record%notfound;
  END LOOP;
END; 
```

我想`record_object(i).column3`与`Table1`. 这张桌子不是那么大，所以我想创造一些东西

```
TYPE RTable1 IS RECORD
(
  column1 varchar2(10),
  column2 varchar2(10)
);

Type TTable1 IS TABLE OF RTable1 INDEX BY BINARY_INTEGER;
record_table1 TTable1; 
```

该记录也将通过查询获取。现在的问题是我想`record_object(i).column3`与`record_table1.column2`. 我不想使用 2 个嵌套循环。`Table1`当我要求查看其中是否存在时，有没有一种类似于哈希表的方法可以实现`record_object(i).column3`它，它返回该特定的行/索引？

PS：请忽略我的语法错误，我在这里发布时编写了我的sql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:39:59.257

您可以修改查询以返回有序的字符串集。两个有序数组的比较将是容易和快速的。

# angularjs - 指令不插值，在模板字符串中

> ID：15485288
> 
> 赞同：4
> 
> 时间：2013-03-18T19:30:49.813
> 
> 标签：angularjs, angularjs-directive, angularjs-scope

我正在尝试有条件地构建模板。我得到了一个带有一些 div 和 span 的 k2plugin 指令。根据 pluginui 属性，我想在模板末尾插入另一个指令。下面我的代码会插入除 pluginui 之外的所有内容。例如，最后一个 div 会导致：

```
<div {{pluginui}} width='300' height='420'></div> 
```

{{pluginui}} 是文字，而它应该插入以触发另一个指令。有趣的是，如果我将 {{pluginui}} 放在同一行的其他位置（例如在标签之间，它会被插值。

我怎么了？

```
app.directive("k2plugin", function () {
            return {
                restrict: "A",
                scope: true,
                link: function (scope, elements, attrs) {
                    console.log ("creating plugin");

                    // this won't work immediatley. attribute pluginname will be undefined as soon as this is called.
                    scope.pluginname = "Loading...";
                    scope.pluginid = null;

                    // observe changes to interpolated attributes

                            // [...] observe name, id, width, height

                    attrs.$observe('pluginui', function(value) {
                        console.log('pluginui has changed value to ' + value);
                        scope.pluginui = attrs.pluginui + "viewport";
                    });

                },
                template: "<div>\
                           <div>\
                           <span>{{pluginname}}</span>\
                           <span ng-click=\"resize(pluginid)\">_</span> <span ng-click=\"remove(pluginid)\">X</span>\
                           </div>\
                           <div {{pluginui}} width='{{pluginwidth}}' height='{{pluginheight}}'></div>\
                           </div>",
                replace: true,
            };
        });

        app.directive("canvasviewport", function () {
            return {
                restrict: "A",
                scope: true,
                link: function (scope, elements, attrs) {
                    console.log ("creating canvas viewport");
                },
                template: "<canvas width='{{pluginwidth}}' height='{{pluginheight}}'></canvas>",
                replace: true
            };
        });

        app.directive("divviewport", function () {
            return {
                restrict: "A",
                scope: true,
                link: function (scope, elements, attrs) {
                    console.log ("creating div viewport");
                },
                template: "<div style=\"width='{{pluginwidth}}' height='{{pluginheight}}'\"></div>",
                replace: true
            };
        });

        app.directive("autoviewport", function () {
            return {
                restrict: "A",
                scope: true,
                link: function (scope, elements, attrs) {
                    console.log ("creating auto viewport");
                },
                template: "<canvas width='{{pluginwidth}}' height='{{pluginheight}}'></canvas>",
                replace: true
            };
        }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T19:52:43.367

I don't think Angular will interpolate something into a directive name. {{}}s (automatically) set up a $watch. When the $watch notices a change, it will update the view, but it won't call $compile, which is what I think needs to happen here.

So, I would try generating the HTML/template in the directive's link function and then $compile it. Something like:

```
scope.$watch('pluginui', function(newValue) {
   var jqLiteWrappedElement = angular.element('<div ' + newValue + ' width=...');
   element.replaceWith(jqLiteWrappedElement);
   $compile(jqLiteWrappedElement)(scope);
}) 
```

Remember to inject `$compile` into the directive.

# java - 最终静态与非最终静态变量？

> ID：15485290
> 
> 赞同：3
> 
> 时间：2013-03-18T19:30:53.997
> 
> 标签：java, multithreading, design-patterns

有谁知道这两种方法的区别？

```
public class SingleTone {

    private static final instance = new SingleTone();

    private SingleTone() {
    }
    public [static] SingleTone getinstance() {
        return instance;
    }
} 
```

和

```
public class SingleTone {

    private static instance = new SingleTone();

    private SingleTone() {
    }
    public  [static] SingleTone getinstance() {
        return instance;
    }
} 
```

我知道最终的静态变量是线程安全的，但是我找不到非最终变量的任何问题。（注意：我正在寻找最终静态变量与非最终静态变量的区别，所以请不要建议如何实现单例设计模式。我知道有一种枚举方法。）

**编辑：我错过了方法上的静态关键字，现在它已修复！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:32:50.553

除了可能的编译器优化外，没有太大区别。无论哪种情况，因为它是私有的，没有设置器，所以没有什么可以修改它，所以它是否存在并不特别重要`final`。但是，在这两种情况下，您的`getInstance()`方法都需要声明`static`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T19:32:53.763

`final`修饰符意味着不会为该字段分配任何其他内容。也就是说，您不能在其上使用等号 (=) 运算符。虽然`static`修饰符意味着变量是类的一部分而不是实例的一部分，但无论您有多少实例，都只会有其中一个。

然后第一种方法使**引用**线程安全，因为我们知道初始化后值不会改变。但是，如果我们有一个最终结构，我们需要确保内容也是同步的。有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/2412124/are-final-static-variables-thread-safe-in-java)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T19:41:14.117

final 在您的情况下不会给出任何特殊的性能改进。

我们使用 final 进行清晰的设计方法。根据 Josh Bloch 的“设计继承或禁止它”的经验法则，通常应该更频繁地对类使用 final，而不仅仅是这种情况。

# magento - Magento：启用平面类别时，按类别购物过滤器未显示

> ID：15485292
> 
> 赞同：0
> 
> 时间：2013-03-18T19:31:01.000
> 
> 标签：magento

出于某种原因，当我启用平面类别时，“Shop by”类别过滤器分层导航消失了。我尝试检查“是锚”，但似乎没有什么不同。当平面类别被禁用时，无论“是锚”条目如何，都会显示正确的类别过滤器。我已经尝试重新索引类别、类别产品和产品属性，但仍然没有运气。我正在跟踪代码，到目前为止，似乎 app/code/core/Mage/Catalog/Block/Layer/View.php 中调用的 getFilters() 函数返回空，因此禁用了整个块。我很感激在这个问题上的任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:44:58.763

1.  您是否在将平面类别设置为 true 后重新编制索引。

2.  检查您的平面类别表是否为空或由于某种原因您的代码无法创建特定于商店 ID 的表。

3.  检查 var 文件夹中的日志和报告，您可能会发现 Magento 记录的一些异常等。确保将日志设置为打开。

4.  清除缓存。

# c++ - 在构造函数 C++ 中创建指向对象的指针

> ID：15485298
> 
> 赞同：1
> 
> 时间：2013-03-18T19:31:47.027
> 
> 标签：c++, object, pointers, constructor

我想知道如何在 c++ 的构造函数中创建一个指向新创建对象的指针？

班级地址是什么？

```
class MyClass
{
    public:
};

class MyClass2
{
    public:
    //I need a pointer to the created object
    MyClass2 *pObjectName;

    //Constructor
    MyClass2()
    {
        pObjectName = &//I have no clue how to get the adress of the (not yet) created object.
    }
};

int main()
{
    //The way it works
    //Makes Object
    MyClass *pObject;
    MyClass Object;
    //pObject points to Object
    pObject = &Object;
    //Prints adress of Object
    printf("%p", pObject);

    //The way I would like to see it work
    MyClass2 Object2;
    //Prints adress of Object
    printf("%p", Object2.pObjectName);

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T19:32:45.257

这将是：

```
MyClass2()
{
    pObjectName = this;
} 
```

但您不需要这样做。指针被隐式传递给类的`this`每个非静态成员函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T19:33:33.467

在类中，您可以使用 访问指向对象的指针`this`。这个指针是在每个实例方法中定义和隐式传递的。因此，您实际上不需要将其记忆到另一个变量中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T19:33:32.077

你需要使用`this`，例如：

```
MyClass2()
{
  pObjectName = this;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T19:54:12.180

为什么不说：

```
MyClass object;
printf("%p", &object); 
```

# c++ - 如何在井字游戏中检查 2 维数组的获胜者

> ID：15485313
> 
> 赞同：0
> 
> 时间：2013-03-18T19:32:50.320
> 
> 标签：c++, multidimensional-array

我正在创建一个井字游戏作为具有二维数组的项目，并且在检查点以查看是否有赢家时遇到了一些麻烦。有人可以帮我调试吗？这里是checkwinner函数和main函数。

```
char CheckWinner( char board[3][3])
{
    int i = 0;
    int j = 0;

                    if ( board[i][j] =='X' && board[i][j+1] == 'X' && board[i][j+2]== 'X' )
                    { W = X;}
                    else if (board[i+1][j] && board[i+1][i+1] && board[i+1][j+2]== 'X' )
                    { W = X;}
                    else if (board[i+2][j] && board[i+2][j+1] && board[i+2][j+2]== 'X')
                    { W = X;}
                    else if (board[i][j] && board[i+1][j] && board[i+2][j]== 'X')
                    { W = X;}
                    else if (board[i][j+1] && board[i+1][j+1] && board[i+2][j+1]== 'X')
                    { W = X;}
                    else if (board[i][j+2] && board[i+1][j+2] && board[i+2][j+2]== 'X')
                    { W =X;}
                    else if (board[i][j] && board[i+1][j+1] && board[i+2][j+2]=='X')
                    { W = X;}
                    else if (board[i+2][j] && board[i+1][j+1] && board[i][j+2]== 'X')
                    { W = X;}

                    else if (board[i][j] && board[i][j+1] && board[i][j+2]== 'O' )
                    { W = O;}
                    else if (board[i+1][j] && board[i+1][j+1] && board[i+1][j+2]== 'O')
                    { W = O;}
                    else if (board[i+2][j] && board[i+2][j+1] && board[i+2][j+2]== 'O')
                    { W = O;}
                    else if (board[i][j] && board[i+1][j] && board[i+2][j]== 'O')
                    { W = O;}
                    else if (board[i][j+1] && board[i+1][j+1] && board[i+2][j+1]== 'O')
                    { W = O;}
                    else if (board[i][j+2] && board[i+1][j+2] && board[i+2][j+2]== 'O')
                    { W = O;}
                    else if (board[i][j] && board[i+1][j+1] && board[i+2][j+2]== 'O')
                    { W = O;}
                    else if (board[i+2][j] && board[i+1][j+1] && board[i][j+2]== 'O')
                    { W = O;}

    return W;
}
int main () 
{ 
    char board[3][3];
    char Win = CheckWinner(board);
    int r = 0;

    InitializeBoard(board);

     for (int r = 0; r < 4 ; r++)
     { 
        PlayX(board);
        PlayO(board); 
        PrintBoard(board);
    }
     CheckWinner(board);
     cout << Win ;

    if (Win == X)
    {
        cout << "The winner is Player 1.";
    }
    else if (Win == O)
    {
        cout << "The winner is Player 2.";
    }
    else if (Win == TIE)
    {
        cout << " IT'S A TIE";
    }
    else; 

    system("PAUSE");
return 0; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T19:56:01.490

您可以使用以下内容优化您的条件代码：

```
typedef char piece;

piece iswin() const
{
    piece ret = 'T';

    // Checks for horizontal win
    for (int i = 0; i < 3; ++i)
        if (*arr[i] == arr[i][1] && arr[i][1] == arr[i][2])
            if ((ret = *arr[i]) != 'T')
                return ret;

    // Checks for vertical win
    for (int i = 0; i < 3; ++i)
        if (arr[0][i] == arr[1][i] && arr[1][i] == arr[2][i])
            if ((ret = arr[0][i]) != 'T')
                return ret;

    // Check for diagonal win (upper left to bottom right)
    if (**arr == arr[1][1] && arr[1][1] == arr[2][2])
        if ((ret = **arr) != 'T')
            return ret;

    // Check for diagonal win (upper right to bottom left)
    if (arr[0][2] == arr[1][1] && arr[1][1] == arr[2][0])
        if ((ret = arr[0][2]) != 'T')
            return ret;

    return ret;
}

// checking the result:
switch (winner) {
    case 'T': /* tie */ break;
    case 'X': /* X won */ break;
    case 'O': /* O won */ break;
} 
```

这有点干净。它执行 6 个循环而不是 9 个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T19:36:55.250

您立即将`CheckWinner`结果分配给`Win`，然后进行游戏，然后`CheckWinner`再次调用而不将其结果分配给`Win`。因此，当您检查`Win`以下行时，您会得到板子尚未初始化时的原始结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T19:38:38.893

可能与将文字 O 或 X 分配给应该是 char 的返回值有关。因此，应该是“O”或“X”而不是 O 或 X。除非 O 或 X 在发布的代码之外定义为 char 变量。

# html - HTML 表格自动调整大小

> ID：15485315
> 
> 赞同：-1
> 
> 时间：2013-03-18T19:32:51.193
> 
> 标签：html, google-chrome, html-table, width

我有以下 HTML 代码：

```
    <table cellspacing="0" style="margin:0;padding:0;position:fixed;left:0px;top:0px;width:100%;height:100%;">
    <tr style="padding:0px;margin:0px">
    <td style="padding:0px;margin:0px;height:100%;width:50px;cursor:pointer;"></td>
    <td style="padding:0px;margin:0px;height:100%;min-width:50px;"></td>
    <td style="padding:0px;margin:0px;height:100%;width:50px;cursor:pointer;"></td>
    </tr>
    </table>

```

它显示一个表格宽度为 3 列。左边和右边应该有一个固定的宽度。中间的应该会自动放大。它在 FireFox 中运行良好，但在 Chrome 中却不行。

谁能告诉我为什么以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T23:01:00.120

这为我解决了您的问题.. 为固定列添加最小和最大宽度并在中央列上自动设置宽度

```
<table cellspacing="0" style="margin:0;padding:0;position:fixed;left:0px;top:0px;width:100%;height:100%">
    <tr style="padding:0px;margin:0px;">
    <td style="padding:0px;margin:0px;height:100%;min-width:50px;max-width:50px;cursor:pointer;width:50px"></td>
    <td style="padding:0px;margin:0px;height:100%;min-width:50px;width:100%"></td>
    <td style="padding:0px;margin:0px;height:100%;min-width:50px;max-width:50px;cursor:pointer;width:50px"></td>
    </tr>
    </table> 
```

# masstransit - 新手 - 是否需要消费者队列才能在 MassTransit 中进行发布

> ID：15485317
> 
> 赞同：10
> 
> 时间：2013-03-18T19:32:53.897
> 
> 标签：masstransit

我正在尝试了解 MassTransit 和 RabbitMQ 并排队（第 1 天）

我的问题是“是否需要消费者才能在 MT 中排队工作。我问的原因是因为我首先创建了域和生产者，但我在 RabbitMQ 管理窗口中没有看到任何排队的项目。”

创建消费者队列后，我可以看到消息正在排队。

根据我的理解，Producer 从不知道消费者，那为什么 MassTransit 需要消费者队列来启动消息发布呢？

**制片人**

```
using MassTransit;

namespace Producer
{
    class Program
    {
        static void Main(string[] args)
        {
            Bus.Initialize(sbc =>
            {
                sbc.UseRabbitMq();         //1
                sbc.UseControlBus();
                sbc.EnableMessageTracing();
                sbc.EnableRemoteIntrospection();
                sbc.ReceiveFrom("rabbitmq://localhost/MT.Producer");
                sbc.UseControlBus();
            });

            Bus.Instance.Publish(new NewOrderMessage { OrderName = "Hello World" });
        }
    }
} 
```

**应用程序**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using MassTransit;
using Topshelf;

namespace Consumer
{
    class Program
    {
        static void Main(string[] args)
        {
            Bus.Initialize(sbc =>
            {
                sbc.UseRabbitMq();
                sbc.UseRabbitMqRouting();
                sbc.ReceiveFrom("rabbitmq://localhost/MT.ConsumerService");
            });

            var cfg = HostFactory.New(c =>
            {
                c.SetServiceName("MT.ConsumerService");
                c.SetDisplayName("MT.ConsumerService");
                c.SetDescription("MT.ConsumerService");

                //c.BeforeStartingServices(s => {});

                c.Service<ConsumerService>(a =>
                {
                    a.ConstructUsing(service => new ConsumerService());
                    a.WhenStarted(o => o.Start());
                    a.WhenStopped(o => o.Stop());
                });

            });

            try
            {
                cfg.Run();
            }
            catch (Exception e)
            {
                Console.WriteLine(e.Message);
                throw;
            }
        }
    }
} 
```

**讯息**

```
namespace Domain
{
    public class NewOrderMessage
    {
        public NewOrderMessage()
        {
            OrderId = Guid.NewGuid();
        }
        public Guid OrderId { get; set; }
        public string OrderName { get; set; }
    }
} 
```

**消费者服务**

```
namespace Consumer
{
    class ConsumerService
    {
        readonly IServiceBus _bus;

        public ConsumerService()
        {
            _bus = Bus.Instance;
        }

        public void Start()
        {
            _bus.SubscribeHandler<NewOrderMessage>(CreateOrder);

            Console.WriteLine("Starting....");
        }

        public void Stop()
        {    
            Console.WriteLine("Stopping....");
        }

        public void CreateOrder(NewOrderMessage command)
        {
            Console.WriteLine("Creating Order: {0}  with Id: {1}", command.OrderName, command.OrderId);
        }
    }
} 
```

代码是使用网络上的示例创建的。

**编辑**还想补充一点，所有命名空间都是不同的项目域生产者消费者

问候，

三月

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T22:20:48.873

以下关于masstransit-discus的答案确实对我有所帮助。

**来自 Google Group masstransit-discuss**

... MassTransit 的问题是，您实际上并没有发布到队列，而是发布到交换器，然后设置该交换器将该消息传递到已订阅该交换器消息的其他队列。由于您没有任何消费者，因此没有人对您的消息表示任何兴趣，因此它将被忽略。

所以只需设置一个消费者并让它听“rabbitmq://localhost/B”。第一次运行它时，它将在它们之间创建必要的交换和链接，并且您的消息将被传递到名为 B 的队列。

**安德斯**

总线是所有交换、队列和服务的集合。当您在总线上发布时，在该总线上注册的所有消费者都会收到它。

交换是实现这项工作的 RabbitMQ 实现。

**特拉维斯**

# ruby - Curl 不是经过改造的命令 Ruby RVM

> ID：15485327
> 
> 赞同：1
> 
> 时间：2013-03-18T19:33:40.953
> 
> 标签：ruby, windows, cmd, rvm

我正在尝试安装 RVM，并按照 RVM 网页上的说明进行操作。它说在cmd中使用这个命令：

```
 curl -L https://get.rvm.io | bash -s stable --ruby 
```

但它说'curl'不是一个重新定义的命令：

```
 'curl' is not recognized as an internal or external command,
     operable program or batch file. 
```

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T19:37:45.223

Windows 没有内置“curl”命令。你可以从[这里](https://stackoverflow.com/questions/2710748/run-curl-commands-from-windows-console)下载。但这对你帮助不大，因为 RVM 不支持 Windows :)

您可以改用[pik](http://rubyinstaller.org/add-ons/pik/)。

# asp.net-mvc - 如何将数据注释从模型投影到视图模型？

> ID：15485329
> 
> 赞同：0
> 
> 时间：2013-03-18T19:33:47.133
> 
> 标签：asp.net-mvc, razor, data-annotations

我有一个`Catalog`EF 实体，我在元数据类中进行了装饰，如下所示：

```
public partial class Catalog
{
    [Editable(false)]
    [Display(ResourceType = typeof(Resources), Name = "ID")]
    public string ID { get; set; }

    [Required()]
    [MaxLength(300)]
    [Display(ResourceType = typeof(Resources), Name = "CatalogName")]
    public string CatalogName { get; set; }
} 
```

当我将它暴露给 Razor 视图时，这些值会正确显示。但是，我想这样使用视图模型：

```
public class CatalogViewModel
{
    private readonly Catalog _catalog;

    // I want the attributes for Catalog.CatalogName to apply here.
    public String CatalogName
    {
        get { return _catalog.CatalogName; }
    }
} 
```

我希望能够在视图模型上使用来自实体的验证和显示信息。但是，我无权访问该类型`Resources`。有没有办法我可以以某种方式将这些信息从模型投影到视图模型？

**编辑：**

业务层验证在实体上进行注释。我想保持这种方式，以便验证和显示信息位于一个位置。我还为每个视图使用 1 个视图模型的模式。因此，在此处添加注释会以我试图避免的方式违反 DRY。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:52:00.807

我在这里使用手动验证找到了我的问题的答案。

[http://odetocode.com/blogs/scott/archive/2011/06/29/manual-validation-with-data-annotations.aspx](http://odetocode.com/blogs/scott/archive/2011/06/29/manual-validation-with-data-annotations.aspx)

它有效，但不是我想要的。

```
public class CatalogViewModel  : IValidatableObject
{
    private readonly Catalog _catalog;

    public String CatalogName
    {
        get { return _catalog.CatalogName; }
    }

    public IEnumerable<ValidationResult> Validate(ValidationContext a_validationContext)
    {
       // Call Validator.TryValidateObject on _catalog and return results.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:45:21.250

如果您真的担心违反 DRY 原则，尽管我不确定这是一个有效的问题，因为我宁愿选择根据上下文指定不同的验证（目录实体的使用方式的视图/视图模型） ，你可以看看这个：

[http://fluentvalidation.codeplex.com/](http://fluentvalidation.codeplex.com/)

您将在一个类（而不是注释）中构建您的验证规则，然后您可以根据上下文、继承层次结构创建不同的版本，并且您可以在业务层或 UI 层应用验证。该项目包含与 MVC3 很好地集成的钩子。

# c# - 停止 ReSharper 添加注释

> ID：15485338
> 
> 赞同：16
> 
> 时间：2013-03-18T19:34:18.330
> 
> 标签：c#, resharper, resharper-7.1

我在我的 C# 项目中使用 ReSharper，通常我喜欢它。但是，当我执行某些重构操作时，它会不断向代码添加注释。

例如，`[NotNull]`当我使用“Check parameter for null”上下文操作时，它会添加：

```
// Before context action
public void Foo(object input)
{
}

// After context action
public void Foo([NotNull] object input)
{
    if (input == null)
    {
        throw new ArgumentNullException("input");
    }
} 
```

此外，ReSharper 然后将添加`using JetBrains.Annotations`到文件中，即使我没有引用定义属性的 JetBrains 程序集。

我想继续使用上下文操作，因为它们非常有用，但我不能在代码中引入外部注释。ReSharper 提供了一个选项来更改默认注释命名空间并将注释属性源代码复制到您的项目中，但这也不是此项目的选项。

有没有办法告诉 ReSharper 完全停止添加注释？我已经尝试在选项中取消选中 JetBrains.Annotations 作为具有代码注释属性的命名空间，但这似乎对是否首先生成注释没有任何影响。

**更新：**虽然我实际上并没有引用 JetBrains.Annotations.dll，但我引用了另一个 DLL，它在同一个 JetBrains.Annotations 命名空间中重新实现了相同的注释属性。删除该 DLL 引用将阻止 ReSharper 添加注释。如果仍然可以选择关闭它会很好，但解决方法适合这种情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T22:53:12.177

当您引用 JetBrains.Annotations.dll 时，“Check parameter for null”的默认操作似乎是使用该`NotNull`属性（尽管添加了“Annotate with 'NotNullAttribute'”选项。

我知道的唯一解决方法是不引用`JetBrains.Annotations.dll`.

# 更新：

对此进行更多研究，似乎在`[NotNull]`包含注释 dll 并请求“检查参数是否为空”时添加了一个建议/错误：http: [//youtrack.jetbrains.com/issue/RSRP-70350](http://youtrack.jetbrains.com/issue/RSRP-70350) 以防万一其他任何人都会遇到这种情况并想知道*为什么*......

# python - 具有 NaN 值或掩码的大型数组的双变量结构化插值

> ID：15485343
> 
> 赞同：7
> 
> 时间：2013-03-18T19:34:31.213
> 
> 标签：python, map, scipy, interpolation

我正在尝试使用 Scipy 的[RectBivariateSpline](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.RectBivariateSpline.html#scipy.interpolate.RectBivariateSpline)类插入定期网格化的[风应力数据。](http://en.wikipedia.org/wiki/Wind_stress)在某些网格点，输入数据包含设置为 NaN 值的无效数据条目。首先，我使用了[Scott](https://stackoverflow.com/questions/5146025/python-scipy-2d-interpolation-non-uniform-data)关于二维插值问题的解决方案。使用我的数据，插值返回一个仅包含 NaN 的数组。假设我的数据是非结构化的并使用[SmoothBivariateSpline](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.SmoothBivariateSpline.html#scipy.interpolate.SmoothBivariateSpline)类，我还尝试了另一种方法。显然我有太多数据点无法使用非结构化插值，因为数据数组的形状是 (719 x 2880)。

为了说明我的问题，我创建了以下脚本：

```
from __future__ import division
import numpy
import pylab

from scipy import interpolate

# The signal and lots of noise
M, N = 20, 30  # The shape of the data array
y, x = numpy.mgrid[0:M+1, 0:N+1]
signal = -10 * numpy.cos(x / 50 + y / 10) / (y + 1)
noise = numpy.random.normal(size=(M+1, N+1))
z = signal + noise

# Some holes in my dataset
z[1:2, 0:2] = numpy.nan
z[1:2, 9:11] = numpy.nan
z[0:1, :12] = numpy.nan
z[10:12, 17:19] = numpy.nan

# Interpolation!
Y, X = numpy.mgrid[0.125:M:0.5, 0.125:N:0.5]
sp = interpolate.RectBivariateSpline(y[:, 0], x[0, :], z)
Z = sp(Y[:, 0], X[0, :])

sel = ~numpy.isnan(z)
esp = interpolate.SmoothBivariateSpline(y[sel], x[sel], z[sel], 0*z[sel]+5)
eZ = esp(Y[:, 0], X[0, :])

# Comparing the results
pylab.close('all')
pylab.ion()

bbox = dict(edgecolor='w', facecolor='w', alpha=0.9)
crange = numpy.arange(-15., 16., 1.)

fig = pylab.figure()
ax = fig.add_subplot(1, 3, 1)
ax.contourf(x, y, z, crange)
ax.set_title('Original')
ax.text(0.05, 0.98, 'a)', ha='left', va='top', transform=ax.transAxes, 
    bbox=bbox)

bx = fig.add_subplot(1, 3, 2, sharex=ax, sharey=ax)
bx.contourf(X, Y, Z, crange)
bx.set_title('Spline')
bx.text(0.05, 0.98, 'b)', ha='left', va='top', transform=bx.transAxes, 
    bbox=bbox)

cx = fig.add_subplot(1, 3, 3, sharex=ax, sharey=ax)
cx.contourf(X, Y, eZ, crange)
cx.set_title('Expected')
cx.text(0.05, 0.98, 'c)', ha='left', va='top', transform=cx.transAxes, 
    bbox=bbox) 
```

这给出了以下结果：![双变量网格。 (a) 原始构造数据，(b) Scipy 的 RectBivariateSpline 和 (c) SmoothBivariateSpline 类。](../Images/2b4881a8ed140db603236cf7b938a9b9.png)

该图显示了构建的数据映射 (a) 和使用 Scipy 的 RectBivariateSpline (b) 和 SmoothBivariateSpline (c) 类的结果。第一次插值产生一个只有 NaN 的数组。理想情况下，我希望得到类似于第二次插值的结果，它的计算量更大。我不一定需要域区域之外的数据外推。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-04T14:35:40.427

您可以使用`griddata`，唯一的问题是它不能很好地处理边缘。这可以通过例如反映来帮助，具体取决于您的数据如何......这是一个例子：

```
from __future__ import division
import numpy
import pylab
from scipy import interpolate

# The signal and lots of noise
M, N = 20, 30  # The shape of the data array
y, x = numpy.mgrid[0:M+1, 0:N+1]
signal = -10 * numpy.cos(x / 50 + y / 10) / (y + 1)
noise = numpy.random.normal(size=(M+1, N+1))
z = signal + noise

# Some holes in my dataset
z[1:2, 0:2] = numpy.nan
z[1:2, 9:11] = numpy.nan
z[0:1, :12] = numpy.nan
z[10:12, 17:19] = numpy.nan

zi = numpy.vstack((z[::-1,:],z))
zi = numpy.hstack((zi[:,::-1], zi))
y, x = numpy.mgrid[0:2*(M+1), 0:2*(N+1)]
y *= 5 # anisotropic interpolation if needed.

zi = interpolate.griddata((y[~numpy.isnan(zi)], x[~numpy.isnan(zi)]),
                zi[~numpy.isnan(zi)], (y, x), method='cubic')
zi = zi[:(M+1),:(N+1)][::-1,::-1]

pylab.subplot(1,2,1)
pylab.imshow(z, origin='lower')
pylab.subplot(1,2,2)
pylab.imshow(zi, origin='lower')
pylab.show() 
```

如果内存不足，您可以按照以下方式拆分数据：

```
def large_griddata(data_x, vals, grid, method='nearest'):
    x, y = data_x
    X, Y = grid
    try:
        return interpolate.griddata((x,y),vals,(X,Y),method=method)
    except MemoryError:
        pass

    N = (np.min(X)+np.max(X))/2.
    M = (np.min(Y)+np.max(Y))/2.

    masks = [(x<N) & (y<M),
             (x<N) & (y>=M),
             (x>=N) & (y<M),
             (x>=N) & (y>=M)]

    grid_mask = [(X<N) & (Y<M),
             (X<N) & (Y>=M),
             (X>=N) & (Y<M),
             (X>=N) & (Y>=M)]

    Z = np.zeros_like(X)
    for i in range(4):
        Z[grid_mask[i]] = large_griddata((x[masks[i]], y[masks[i]]),
                    vals[masks[i]], (X[grid_mask[i]], Y[grid_mask[i]]), method=method)

    return Z 
```

# c# - ActionMailer FakeHttpContext

> ID：15485344
> 
> 赞同：1
> 
> 时间：2013-03-18T19:34:34.460
> 
> 标签：c#, actionmailer

我正在尝试为使用 ActionMailer 的代码创建单元测试，在我编写测试后，我收到 httpContext 参数的 System.ArgumentNullException 错误。

**邮件控制器.cs**：

```
new Mailer().Welcome(new WelcomeModel
{
    Name = "sss",
    Email = model.Email
}).Deliver(); 
```

**MailControllerTest.cs**：

```
var model = new WelcomeInputModel{ Email = "dsadsa@gmail.com" };
var result = _controller.SendMail(model);
Assert.IsInstanceOfType(result, typeof(RedirectToRouteResult)); 
```

应该怎么做？

**更新**，我更新了我的代码：

**MailControllerTest.cs**：

```
var request = new Mock<HttpRequestBase>();
request.Setup(r => r.HttpMethod).Returns("GET");
_mockHttoContextBase.Setup(c => c.Request).Returns(request.Object); 
```

**邮件控制器.cs**：

```
var controller = new MailController {HttpContextBase = _contextBase};
controller.Forgot(new ForgotModel
{
    UserName = membershipUser.UserName, 
    Email = user.Email, 
    Password = membershipUser.ResetPassword()
}).Deliver(); 
```

现在我得到的错误是： System.NullReferenceException: Object reference not set to an instance of an object。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-01T15:18:07.023

您不需要伪造 httpcontext，只需打破控制器与`ActionMailer`. 我给你写了一些包装。

**邮件程序.cs**：

```
public interface IMailer
{
    void SendMail(string viewName, IEnumerable<string> to, string subject, IEnumerable<string> replayTo);

    void SendMail(string viewName, object model, IEnumerable<string> to, string subject,
        IEnumerable<string> replayTo);

    void SendMail(string viewName, IEnumerable<string> to, string from, string subject, IEnumerable<string> replayTo);

    void SendMail(string viewName, object model, IEnumerable<string> to, string from, string subject,
        IEnumerable<string> replayTo);
}

public class Mailer : MailerBase, IMailer
{
    public void SendMail(string viewName, IEnumerable<string> to, string subject,
        IEnumerable<string> replayTo = null)
    {
        foreach (var email in to)
        {
            To.Add(email);
        }
        Subject = subject;
        if (replayTo != null)
            foreach (var email in replayTo)
            {
                ReplyTo.Add(email);
            }

        Email(viewName).Deliver();
    }

    public void SendMail(string viewName, object model, IEnumerable<string> to, string subject,
        IEnumerable<string> replayTo = null)
    {
        foreach (var email in to)
        {
            To.Add(email);
        }
        Subject = subject;
        if (replayTo != null)
            foreach (var email in replayTo)
            {
                ReplyTo.Add(email);
            }

        Email(viewName, model).Deliver();
    }

    public void SendMail(string viewName, IEnumerable<string> to, string from, string subject,
        IEnumerable<string> replayTo)
    {
        foreach (var email in to)
        {
            To.Add(email);
        }
        From = from;
        Subject = subject;
        if (replayTo != null)
            foreach (var email in replayTo)
            {
                ReplyTo.Add(email);
            }

        Email(viewName).Deliver();
    }

    public void SendMail(string viewName, object model, IEnumerable<string> to, string from, string subject,
        IEnumerable<string> replayTo)
    {
        foreach (var email in to)
        {
            To.Add(email);
        }
        From = from;
        Subject = subject;
        if (replayTo != null)
            foreach (var email in replayTo)
            {
                ReplyTo.Add(email);
            }

        Email(viewName, model).Deliver();
    }
} 
```

要使用包装器，请使用 Ninject 或您想要的任何库绑定他并在控制器中使用它。

**NinjectWebCommon.cs**：

```
_kernel.Bind<IMailer>().To<Mailer>(); 
```

**邮件控制器.cs**：

```
private readonly IMailer _mailer;

public MailController(IMailer mailer) {
    _mailer = mailer;
}

_mailer.SendMail("Forgot", new ForgotModel
{
    UserName = membershipUser.UserName, 
    Email = user.Email, 
    Password = membershipUser.ResetPassword()
}, new List<string> { model.Email }, _myEmail, "Your password", new List<string>()); 
```

# ruby - 如何获取脚本标签的值

> ID：15485345
> 
> 赞同：0
> 
> 时间：2013-03-18T19:34:34.480
> 
> 标签：ruby, watir

在我的页面代码中，有这个脚本标签：

```
<script>
  var oid = "182384";
  document.getElementById('container').innerHTML = oGrid;
  oGrid.setShowSid(false);
  oGrid.calcSize();
  setupAllTabs();
  var toolbar = setupMenuButtons("btnbar");

  initForm(toolbar);
</script> 
```

如何使用 watir 或 ruby​​ 获得 oid 的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T20:01:33.677

`browser.script.html`将输出标签内的`<script>`代码。例如：

```
require 'watir'  

browser = Watir::Browser.new
browser.goto("http://www.some_site_with_script.com")
browser.script.html 
```

然后——正如@rainkinz 所指出的——你可以使用正则表达式提取你想要的任何值：

```
b.script.html.match(/var\soid\s\=\s\"\d+\"/) 
```

# performance - 如何在 Linux 上使用 cuda 4.2 分析器分析 GTX480 上的 L1 和 L2 缓存命中率？

> ID：15485346
> 
> 赞同：1
> 
> 时间：2013-03-18T19:34:36.970
> 
> 标签：performance, cuda, gpu, gpgpu

我使用了以前版本的 Nvidia 分析器来分析 l1 和 l2 缓存命中率，但我不确定我使用的是哪个版本。似乎 cuda 4.2 视觉分析器没有 L1 和 L2 分析信息（全局缓存重播开销除外）。如何使用 cuda 4.2（或特定的先前版本）视觉/命令行分析器分析 L1 或 L2 缓存命中率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:12:51.020

不确定您使用的是 windows 还是 linux，但对于 windows，您有 Parallel Nsight for MS Visual Studio（还有一个 eclipse 版本）。Nsight 允许您定义许多不同的“实验”。甚至您也可以使用“自定义”实验。如果您选择“内存”实验，它将包括所需的 L1 和 L2 缓存命中率。我附上一个截图显示![Parallel Nsight 性能截图](../Images/9d8db33b0d7dd71c6cc017e2803d055a.png)

这取自 NSight paralell 3.0，但它在以前的版本中也可用。

**编辑：**

使用可视化分析器（至少 5.0 版，但我猜以前的版本会相似）您可以设置您感兴趣的事件和指标，在 Visual Profiler 5.0 中，您可以点击运行 --> 配置指标和事件。在附加的窗口中，您可以设置您想要观看的任何计数器。可用的指标和事件将取决于底层硬件（即您的 GPU 具有的可访问计数器）。附上我 GTX 480 中一些内存计数器的图片 ![缓存事件 GTX 480 视觉分析器 5.0](../Images/e89546715beda80b6e17bf6f38a6680f.png)

**编辑2：** 好的，刚刚注意到您在编辑原始问题后要求使用Linux......所以对于Linux，我不知道NVidia是否提供了这样的Visual Profiler（我猜他们提供）。如果没有，您可能对 Eclipse NSight 版本感兴趣...

# visual-studio - 如何创建显示在 Web 类别中的 Visual Studio 项目模板？

> ID：15485347
> 
> 赞同：8
> 
> 时间：2013-03-18T19:34:38.457
> 
> 标签：visual-studio, visual-studio-2012, project-template, visual-studio-templates

我创建了一个通过 VSIX 扩展安装的项目模板。这工作正常，但它只显示在 Visual C# 类别中。我很难弄清楚如何让它出现在 Visual C# > Web 类别中。

我已尝试遵循 and 的文档`ProjectType`，`ProjectSubType`但是当我指定`ProjectType=Web`and时`ProjectSubType=CSharp`，它根本不显示。

查看`.vstemplate`文件`ProjectTemplatesCache`夹中的文件，我看到了具有`ProjectType=CSharp`和的项目模板示例`ProjectSubType=Web`，但对我而言，这仅使其显示在根 Visual C# 类别中。不显示在 Visual C# > Web 中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T13:37:28.793

这样做，为自定义项目模板创建一个新文件夹，假设它是：

`c:\VS\Templates\Item`

现在在 VS 上转到`Tools`-> `Options`->`Projects and Solutions`并将`User item templates location:`选项设置为上面的文件夹，点击 OK。

您会注意到在文件夹内部`c:\VS\Templates\Item`会创建一些文件夹。您要做的是在自动创建的`Web`文件夹中创建一个新文件`Visual C#`夹，因此您将拥有：

`c:\VS\Templates\Item\Visual C#\Web`

`Web`将带有项目模板的 zip 文件拖放到那里，当您创建新项目时，该项目将显示在类别下。`Visual C#`您也可以通过在文件夹（或任何其他类别文件夹）下创建新文件夹来创建其他类别。

祝你好运。

# jquery - 附加的 jQuery 脚本在 Safari (Mac) 上不起作用

> ID：15485349
> 
> 赞同：1
> 
> 时间：2013-03-18T19:34:44.823
> 
> 标签：jquery, macos, safari

我发现了一个奇怪的问题。

我正在用我的 webapp 迈出彗星的第一步。长话短说，我有一个不错的小脚本，可以轮询由 php 控制器发送的另一个脚本。

后来，我会在这两种方式上工作。无论是 longpolling 还是就像现在一样 - 在 javascript 间隔上。

它是如何在 Chrome 上工作的：在“就绪”事件中，第一个脚本设置一个函数间隔，该函数向控制器发送一个 ajax 请求（我们将其命名为“ping.php”）。如果 ajax 成功，msg 应该替换 div#wrapperForJs 的 html 内容。

Ping.php 检查数据库是否有更新，以及是否通过脚本回显满足一个脚本结果。

上面的文字是给人文主义者的，现在tl;博士：

jQuery代码：

```
function pingThatApp(){
$.ajax({
        type: 'GET',
        url: '/ping', 
        success: function(msg){
            $('#pingWrapper').html(msg);
        }
    });
}
$(document).ready(function(){
window['pingLoop'] = setInterval(
    function(){
        pingThatApp(); 
    },4000
   );     
}); 
```

PHP 回显：

```
$timeScrpt = '<script>';
    foreach ($timers['p'] as $k => $v) {
        $timeScrpt .= "$('#project-{$k} .pTime').fadeOut().attr('title', 'Time spent already: {$v}').html('{$v_short}').fadeIn();";

    }
    foreach ($timers['t'] as $k => $v){
        $timeScrpt .= "$('#timeSpent-task-{$k} b').fadeOut().html('{$v}').fadeIn();";
    }
    $timeScrpt .= '</script>'; 
```

在 Chrome 上一切正常。但是 Safari 对该脚本有一些问题。问题看起来像 Safari 找不到 jQuery 对象。

我做了一些 console.log 测试，检查了代码 - 输出看起来不错。

如果我更改 $k var 并用一些 int 对其进行硬编码或在迭代开始时覆盖 $k var，它也适用于 Safari（jQuery 找到元素）。

我还用找到的元素的长度进行了 console.log 测试：

```
el = $('#project-$k .pTime'); console.log(el.length); 
```

Chrome 输出类似 (0,0,0,1,1,1,0) [0 not found, 1 - found0 Safari 总是输出 0。

我写在这里是因为不知道那个珍贵的浏览器发生了什么。也许这里有人有任何解决方案。

请不要试图说服我间隔不利于数据更新。我知道，现在它是我能实现的最好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:42:01.070

Safari（它的某些版本）根本不会执行注入 DOM 的 javascript 代码。您可以使用危险的`eval()`或将 javascript 放在 ajax 回调中，并根据您从服务器收到的文本/json 修改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T22:53:54.473

OK, just found my bug. It was so stupid that I'm really, really feel bad about it.

Like I said before, javascript was actually executing. However, I was testing Safari on the second account, related to the primary one.

The bug was actually with my controller-model permissions. The workspace I was testing is owned by the primary account. Ping is sending the updating information only for the projects which user owns.

So, Safari was executing js well, my ajax request were OK (inspite of the performance issues, but this is another, future story). getElementById wasn't get any elements because ping wasn't sending all the information.

Sorry for you waste of time, and many thanks for your help.

# php - 如何以编程方式构建数组/对象调用

> ID：15485351
> 
> 赞同：0
> 
> 时间：2013-03-18T19:34:58.473
> 
> 标签：php, arrays, drupal, object, dynamic

我正在开发一个 Drupal 模块，它允许用户在他们的视图中使用超全局变量作为过滤器。他们需要能够在字段中输入他们想要使用的变量，然后我的函数需要去检索该变量的值。如果您只允许一个级别并且只允许数组，这很容易。但我想允许多个级别，甚至更好的是，允许他们访问对象和/或数组。

所以如果用户选择SESSION，然后输入：['anarray']['anotherlevel']['something']

然后我的函数将获得以下值： $_SESSION['anarray']['anotherlevel']['something']

如果用户可以输入类似的内容会更好：['anarray']->anotherlevel->something['morethings']

我的函数将获得以下变量： $_SESSION['anarray']->anotherlevel->something['morethings']

等等。对于更简洁的代码，如果他们可以只使用 + 和 - 分别表示数组和对象，那就更好了。所以最后一个示例将输入为：+anarray-anotherlevel-something+morethings

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:41:39.530

```
$path = 'foo.bar.baz';

$value = $_SESSION;

foreach (explode('.', $path) as $key) {
    if (is_array($value) && array_key_exists($key, $value)) {
        $value = $value[$key];
    } else if (is_object($value) && property_exists($value, $key)) {
        $value = $value->$key;
    } else {
        throw new InvalidArgumentException(sprintf('The path %s does not exist', $path));
    }
}

echo $value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:42:02.057

您必须解析输入的字符串以查找`+`并`-`处理它们。这真的没那么难。要解析字符串，您开始读取每个字符并检查它是否是 a`+`或`-`. 如果它是其中之一，则开始记录从那里到下一个`+`/符号的所有字符，并使用（最初到）`-`记录缩进，以便如果您已阅读然后更新：`$current``$current = $_SESSION``+``abc``$current`

```
$current = (isset($current['abc'])) ? isset($current['abc'] : NULL; 
```

# php - AngularJS HTTP 发布到 PHP 和未定义

> ID：15485354
> 
> 赞同：108
> 
> 时间：2013-03-18T19:35:06.660
> 
> 标签：php, javascript, angularjs

我有一个带有标签的表格`ng-submit="login()`

该函数在javascript中被很好地调用。

```
function LoginForm($scope, $http)
{
    $http.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded; charset=UTF-8';

    $scope.email    = "fsdg@sdf.com";
    $scope.password = "1234";

    $scope.login = function()
    {
        data = {
            'email' : $scope.email,
            'password' : $scope.password
        };

        $http.post('resources/curl.php', data)
        .success(function(data, status, headers, config)
        {
            console.log(status + ' - ' + data);
        })
        .error(function(data, status, headers, config)
        {
            console.log('error');
        });
    }
} 
```

我从 PHP 文件中得到了 200 OK 响应，但是，返回的数据说明了这一点`email`并且`password`是未定义的。这是我所有的php

```
<?php
$email = $_POST['email'];
$pass  = $_POST['password'];
echo $email;
?> 
```

知道为什么我得到未定义的`POST`值吗？

**编辑**

我想指出，因为这似乎是一个流行的问题（但它已经过时），`.success`并且`.error`已被弃用，您应该使用`.then`@James Gentes 在评论中指出的

* * *

## 回答 #1

> 赞同：229
> 
> 时间：2013-03-18T19:54:40.593

angularjs`.post()`默认 Content-type 标头为`application/json`. 您将覆盖它以传递表单编码的数据，但是您没有更改您的`data`值以传递适当的查询字符串，因此 PHP 没有`$_POST`按您的预期填充。

我的建议是只使用默认的 angularjs 设置`application/json`作为标头，读取 PHP 中的原始输入，然后反序列化 JSON。

这可以在 PHP 中像这样实现：

```
$postdata = file_get_contents("php://input");
$request = json_decode($postdata);
$email = $request->email;
$pass = $request->password; 
```

或者，如果您严重依赖`$_POST`功能，您可以形成一个查询字符串`email=someemail@email.com&password=somepassword`，并将其作为数据发送。确保此查询字符串是 URL 编码的。如果手动构建（而不是使用类似的东西`jQuery.serialize()`），Javascript`encodeURIComponent()`应该为您解决问题。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2014-06-10T12:25:20.510

我在服务器端执行此操作，在我的 init 文件的开头，它就像一个魅力，你不必在角度或现有的 php 代码中做任何事情：

```
if ($_SERVER['REQUEST_METHOD'] == 'POST' && empty($_POST))
    $_POST = json_decode(file_get_contents('php://input'), true); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-05-22T14:56:15.640

在我正在开发的 API 中，我有一个基本控制器，在它的 __construct() 方法中，我有以下内容：

```
if(isset($_SERVER["CONTENT_TYPE"]) && strpos($_SERVER["CONTENT_TYPE"], "application/json") !== false) {
    $_POST = array_merge($_POST, (array) json_decode(trim(file_get_contents('php://input')), true));
} 
```

这使我可以在需要时将 json 数据简单地引用为 $_POST["var"]。效果很好。

这样，如果经过身份验证的用户连接到诸如 jQuery 之类的库，该库使用默认的 Content-Type: application/x-www-form-urlencoded 或 Content-Type: application/json 发送帖子数据，API 将无错误地响应，并将使 API 对开发人员更加友好。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-05-22T19:01:59.840

因为 PHP 本身不接受 JSON`'application/json'`一种方法是从 angular 更新您的标头和参数，以便您的 api 可以直接使用数据。

**首先**，参数化您的数据：

```
data: $.param({ "foo": $scope.fooValue }) 
```

**然后**，将以下内容添加到您的`$http`

```
 headers: {
     'Content-Type' : 'application/x-www-form-urlencoded; charset=UTF-8'
 }, 
```

*如果您的所有请求都发往 PHP，则可以在配置中全局设置参数，如下所示：*

```
myApp.config(function($httpProvider) {
    $httpProvider.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded; charset=UTF-8';
}); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-06-27T06:46:54.600

Angular Js 演示代码：-

```
angular.module('ModuleName',[]).controller('main', ['$http', function($http){

                var formData = { password: 'test pwd', email : 'test email' };
                var postData = 'myData='+JSON.stringify(formData);
                $http({
                        method : 'POST',
                        url : 'resources/curl.php',
                        data: postData,
                        headers : {'Content-Type': 'application/x-www-form-urlencoded'}  

                }).success(function(res){
                        console.log(res);
                }).error(function(error){
                        console.log(error);
        });

        }]); 
```

服务器端代码：-

```
<?php

// it will print whole json string, which you access after json_decocde in php
$myData = json_decode($_POST['myData']);
print_r($myData);

?> 
```

由于角度行为，PHP 服务器上的正常发布行为没有直接的方法，因此您必须在 json 对象中对其进行管理。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-03-18T00:02:42.790

在将表单数据作为第二个参数传递给 .post() 之前，您需要反序列化表单数据。您可以使用 jQuery 的 $.param (data) 方法来实现这一点。然后您将能够在服务器端像 $.POST ['email']; 一样引用它。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-03-11T14:31:05.520

这是最好的解决方案（IMO），因为它不需要 jQuery 和 JSON 解码：

来源： [https](https://wordpress.stackexchange.com/a/179373) ://wordpress.stackexchange.com/a/179373 和：[https ://stackoverflow.com/a/1714899/196507](https://stackoverflow.com/a/1714899/196507)

概括：

```
//Replacement of jQuery.param
var serialize = function(obj, prefix) {
  var str = [];
  for(var p in obj) {
    if (obj.hasOwnProperty(p)) {
      var k = prefix ? prefix + "[" + p + "]" : p, v = obj[p];
      str.push(typeof v == "object" ?
        serialize(v, k) :
        encodeURIComponent(k) + "=" + encodeURIComponent(v));
    }
  }
  return str.join("&");
};

//Your AngularJS application:
var app = angular.module('foo', []);

app.config(function ($httpProvider) {
    // send all requests payload as query string
    $httpProvider.defaults.transformRequest = function(data){
        if (data === undefined) {
            return data;
        }
        return serialize(data);
    };

    // set all post requests content type
    $httpProvider.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded; charset=UTF-8';
}); 
```

例子：

```
...
   var data = { id: 'some_id', name : 'some_name' };
   $http.post(my_php_url,data).success(function(data){
        // It works!
   }).error(function() {
        // :(
   }); 
```

PHP代码：

```
<?php
    $id = $_POST["id"];
?> 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2015-06-17T02:34:42.157

这是一个老问题，但值得一提的是，在 Angular 1.4 中添加了 $httpParamSerializer，当使用 $http.post 时，如果我们使用 $httpParamSerializer(params) 传递参数，一切都像常规的 post 请求一样工作，并且没有 JSON 反序列化服务器端需要。

[https://docs.angularjs.org/api/ng/service/$httpParamSerializer](https://docs.angularjs.org/api/ng/service/$httpParamSerializer)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-07-14T08:04:46.267

在使用 Angular 和 PHP 时，我花了几个小时才明白这一点。在 $_POST 中发布数据不会发送到 PHP

在 PHP 代码中执行以下操作。- 创建一个变量 $angular_post_params - 然后执行以下操作 `$angular_http_params = (array)json_decode(trim(file_get_contents('php://input')));`

现在您可以像从 $_POST 一样访问您的参数

`$angular_http_params["key"]`

万一你想知道 javascript....这就是我用的

```
 var myApp = angular.module('appUsers', []);
    //var post_params = $.param({ request_type: "getListOfUsersWithRolesInfo" });
    var dataObj = {
        task_to_perform: 'getListOfUsersWithRolesInfo'
    };

    myApp.controller('ctrlListOfUsers', function ($scope, $http) {
        $http({
            method: 'POST',
            dataType: 'json',
            url: ajax_processor_url,
            headers: {
                'Content-Type': 'application/json'
            },
            data: dataObj,
            //transformRequest: function(){},
            timeout: 30000,
            cache: false
        }).
        success(function (rsp) {
            console.log("success");
            console.log(rsp);
        }).
        error(function (rsp) {
            console.log("error");
        });
    }); 
```

# visual-studio-2012 - 无法创建到 SQL Server 的连接

> ID：15485362
> 
> 赞同：0
> 
> 时间：2013-03-18T19:35:30.937
> 
> 标签：visual-studio-2012, sql-server-2012-express

我刚刚在我的新机器（Windows 7 Ultimate）上安装了 VS2012 Ultimate，现在我发现我无法向 SQL Server 添加新连接，它说 .\sqlexpress 没有找到。

就好像 VS2012 安装程序没有安装 VS2010 安装的 SQL Server Express。

**我做错了什么？**

[图片 http://s12.postimage.org/rez7k58e5/Sin_t_tulo.jpg](http://s12.postimage.org/rez7k58e5/Sin_t_tulo.jpg)

这是现在安装的：

[image2 http://s15.postimage.org/evugd03rv/Sin_t_tulo.jpg](http://s15.postimage.org/evugd03rv/Sin_t_tulo.jpg)

# api - 如何从graph api查询页面粉丝信息？

> ID：15485364
> 
> 赞同：2
> 
> 时间：2013-03-18T19:35:43.557
> 
> 标签：api, facebook-graph-api, facebook-insights

我曾经能够查询 /insights 并看到很多信息，包括 page_fans_locale 和 page_fans_gender_age 等等。最近（在过去一两个月内）从 /insights 查询返回的文档已被精简为仅 page_story_adds_unique、page_storytellers、page_admin_num_posts 和 page_admin_num_posts_by_type。

我曾尝试直接查询 /insights/page_fans_gender_age 以及 /insights/page_fans_gender_age/lifetime。虽然我确实得到了有效的响应，但无论我选择哪个页面，它总是空的。

自从我上次查看 api 以来，它似乎发生了一些变化。我不确定是否有某些东西阻止返回信息，或者这些操作是否已被删除，而我只是因为 api 中的某些遗留问题而没有收到错误。

不管我已经写了多少代码，是否仍然可以查询这些信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:40:35.400

更新：Facebook API 错误再次出现。相关链接：[https ://developers.facebook.com/bugs/345809555540652?browse=search_5148c3f9aa0392220388804](https://developers.facebook.com/bugs/345809555540652?browse=search_5148c3f9aa0392220388804)

初始帖子：

简短的回答：是的。确保您具有“read_insights”权限等，然后重试。

长答案：我的一个网站今天出现问题，因为诸如原始海报之类的请求突然返回空值。无论问题是什么，它似乎都在 Facebook 一方，并且已经得到解决。

故事的寓意：对于构建严重依赖于对他人 API 调用的应用程序，要非常犹豫。脸书尤其如此。

# ldap - Bugzilla 4.2.4 - 使用 LDAP 凭据登录

> ID：15485367
> 
> 赞同：1
> 
> 时间：2013-03-18T19:35:50.797
> 
> 标签：ldap, bugzilla

我完成了 Bugzilla 安装。在安装结束时创建管理员帐户和密码。
登录到 Bugzilla 并查看配置指南。
将用户身份验证设置为使用 LDAP。
转到 LDAP 部分并相应地设置所有值。

我有少数用户将使用 Bugzilla。我希望他们能够使用他们的 LDAP 凭据登录到 Bugzilla。所以他们要记住的密码会更少。

我将创建用户帐户。

对于用户名，我输入他们的 LDAP ID 并组成一个标准密码。

新用户 = jsmith@mycompany.com 密码 = asdasdasd

保存用户。

现在我让他们尝试使用 LDAP 凭据登录到 Bugzilla。

LDAP ID = jsmith@mycomany.com LDAP 密码 = ldappassword

他们收到错误：您输入的用户名或密码无效。

我知道所有 LDAP 变量都是正确的。LDAP 也不会抛出错误。
所以我假设它一定是 Bugzilla 中的东西。

1.  用户可以使用他们的 LDAP id 和密码登录到 Bugzilla 是否正确？
2.  Bugzilla 密码是否仅在他们不使用 LDAP 登录数据库时才重要？
3.  当我创建新用户时，我是否应该将帐户设置为以某种方式使用 LDAP？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T16:51:14.873

使用 LDAP 身份验证类型时，Bugzilla 将在首次登录时自动创建用户。

1.  对，那是正确的
2.  是的，您不必在 bugzilla 中为他们提供密码或手动设置帐户
3.  您不应在 Bugzilla 中手动创建用户。请参见此处[3.2.2.4。删除用户](http://www.bugzilla.org/docs/tip/en/html/useradmin.html#user-account-deletion)，然后尝试登录

我遇到的麻烦之一是用户必须在 LDAP 服务器的“邮件”字段中有一个“有效”（形式为某事@somewhere.somethingelse）电子邮件。

# javascript - onclick 不会向单击的 div 添加（或删除）类

> ID：15485369
> 
> 赞同：0
> 
> 时间：2013-03-18T19:36:03.013
> 
> 标签：javascript, jquery, onclick

我有以下小提琴：http: [//jsfiddle.net/mauricederegt/HMkcD/1/](http://jsfiddle.net/mauricederegt/HMkcD/1/)

它包含一系列彩色块（div），单击 1 可查看块。生成的 HTML 如下所示：

```
<div id="plane">
<div class="tile tile1" block-id="1" style-id="1" style="left:0px; top:0px"></div>
<div class="tile tile2" block-id="2" style-id="2" style="left:100px; top:0px"></div>
<div class="tile tile1" block-id="3" style-id="1" style="left:200px; top:0px"></div>
<div class="tile tile2" block-id="4" style-id="2" style="left:0px; top:100px"></div>
<div class="tile tile1" block-id="5" style-id="1" style="left:100px; top:100px"></div>
<div class="tile tile2" block-id="6" style-id="2" style="left:200px; top:100px"></div>
<div class="tile tile1" block-id="7" style-id="1" style="left:0px; top:200px"></div>
<div class="tile tile2" block-id="8" style-id="2" style="left:100px; top:200px"></div>
<div class="tile tile1" block-id="9" style-id="1" style="left:200px; top:200px"></div>
<div class="tile tile3" block-id="10" style-id="3" style="left:50px; top:50px"></div><div class="tile tile4" block-id="11" style-id="4" style="left:150px; top:50px"></div>
<div class="tile tile4" block-id="12" style-id="4" style="left:50px; top:150px"></div>
<div class="tile tile3" block-id="13" style-id="3" style="left:150px; top:150px"></div>
</div> 
```

当我单击一个块时，我想将一个类添加`ss`到一个彩色块/div；此单击的块成为选定的块。然后我想单击以选择另一个块。如果这两个块的样式 ID 相同，我想删除这些块。如果没有，则再次删除`ss`该类。

我创建了以下代码来执行此操作：

```
$('#plane').click(function(){                            //the click function
    var clickedBlock = $(this);                          //get the data of the clicked div/block
    clickedBlock.addClass('ss');                         //add class ss to the clicked div/block
    if (blockSelected) {                                 //if div/block is selected
       if ($(blockSelected).attr('block-id') == clickedBlock.attr('block-id')) {  //if block-id of the selected div equals the block-id of the clicked div
           clickedBlock.removeClass('ss');               //remove class ss
       } else {                                          //else
          if ($(blockSelected).attr('style-id') == clickedBlock.attr('style-id')) { //if style selected div equals style clicked div
              $(blockSelected).addClass('x');            //ad class x to selected div or better: remove div
              clickedBlock.addClass('x');                //ad class x to clicked div or better: remove div
              totalTiles = totalTiles - 2;               //deduct 2 of the total tiles
               } else {                                  //if not equal styles
              $(blockSelected).removeClass('ss');        //remove class ss form the selected div
              clickedBlock.removeClass('ss');            //remove class ss from the clicked div
           }
        }
        blockSelected = null;
   } else {
        blockSelected = this;
   }
}); 
```

问题是，我无法让它工作。我认为`#plane`一开始也不对，但我不确定要放什么代码，因为`#plane div`它似乎不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:13:36.570

如果您对完全不同的方法感兴趣，请考虑：

```
var BLOCK_PAIR = (function() {//Singleton NAMESPACE pattern.
    //Private vars
    var blocks = $(),
        delay = 500,
        selClss = 'ss',
        compareAttr = 'style-id',
        disabled = false;

    //Private functions
    var select = function(e) {
        var $b = $(e.target);
        if(disabled) return;
        if( blocks.length == 1 && blocks.not($b).length == 0 ) {
            reset();//allow first block to be deselected
            return;
        }
        if( blocks.length >= 2 ) reset(); //should never happen
        blocks = blocks.add($b.addClass(selClss));
        compare();
    };
    var compare = function() {
        if(blocks.length == 2) {
            if(blocks.eq(0).attr(compareAttr) == blocks.eq(1).attr(compareAttr)) {
                setTimeout(remove, delay);
            }
            else {
                setTimeout(reset, delay);
            }
            disabled = true;//inhibit block selection during timeout delay.
        }
    };
    var remove = function() {
        blocks.remove();
        reset();
    };
    var reset = function() {
        blocks.removeClass(selClss);
        blocks = $();
        disabled = false;
    };

    //Expose private functions as public methods
    return {
        select: select,
    };
})();

$(function() {
    $('#plane').on('click', '.tile', BLOCK_PAIR.select);
}); 
```

演示：http: [//jsfiddle.net/5NyJw/](http://jsfiddle.net/5NyJw/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:26:33.970

操作，

使用`on()`@Rodrigo Assis 建议的方法是成功的一半。简而言之，您试图将侦听器附加到在 DOM 加载后创建的元素上——为此，您不能使用直接事件，而是需要使用委托事件。旧方法是`live()`，此后已被弃用。`on()`是新标准。更多关于[这里](http://api.jquery.com/on/)

至于您描述的逻辑，我对您的代码进行了一些修改，并对其进行了优化。我很确定这可以通过更简洁的逻辑实现您的要求。下面是概要，[这里是更新的 Fiddle](http://plnkr.co/edit/9KGLCnnGkybc6bCXJpNR?p=preview)

## JS

```
 ...
    var pairs = [];
    $('#plane').on('click', '.tile', function () { 
        $(this).addClass('ss');
        pairs.push($(this));
        if (pairs.length == 2) {
             if ($(pairs[0]).attr('style-id') === $(pairs[1]).attr('style-id') && $(pairs[0]).attr('block-id') != $(pairs[1]).attr('block-id')) {
                $(pairs[0]).remove();
                $(pairs[1]).remove();
                pairs = [];
            } else {
                $(pairs[0]).removeClass('ss');
                $(pairs[1]).removeClass('ss');
                pairs = [];
            }
        }
    });
 ... 
```

## 简短的

我们想要的基本上是说：

*   用户点击blockA，突出显示它
*   用户点击blockB，突出显示它
    *   如果块具有相同的样式 ID，则删除它们
    *   否则，取消突出显示它们

在这种情况下，`pairs`数组是你的朋友。

哦，另一件事 - 你的原始代码有这个：`totalTiles = totalTiles - 2`. 我建议将映射`totalTiles`作为对`$('.tile').length`. 我查看了您的代码，但似乎无法弄清楚您为什么要降低其价值。

希望能帮助到你。

-编辑-

[在app.js 的第 185 行](http://plnkr.co/edit/9KGLCnnGkybc6bCXJpNR?p=preview)更新了条件，以确保如果*同一个*块被选中两次，它不会被视为一对。上面固定的小提琴和代码要点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T20:31:25.917

我想我有它做你想做的事。

我改变了你的小提琴。`plane`在您使用创建 HTML 之后，`el.innerHTML = html.join('');`我添加了以下内容：

```
 $(el).find('.tile').click(function () {
                //get the data of the clicked div/block
                var clickedBlock = $(this); 
                //add class ss to the clicked div/block
                clickedBlock.addClass('ss'); 
                if (blockSelected) { 
                    //if div/block is selected
                    if ($(blockSelected).attr('block-id') == clickedBlock.attr('block-id')) { 
                        //if block-id of the selected div equals the block-id of the clicked div
                        //remove class ss
                        clickedBlock.removeClass('ss'); 
                    } else { //else
                        if ($(blockSelected).attr('style-id') == clickedBlock.attr('style-id')) { 
                            //if style selected div equals style clicked div
                            //ad class x to selected div or better: remove div
                            $(blockSelected).remove(); 
                            //ad class x to clicked div or better: remove div
                            clickedBlock.remove(); 
                            //deduct 2 of the total tiles
                            totalTiles = totalTiles - 2; 
                        } else { //if not equal styles
                            //remove class ss form the selected div
                            $(blockSelected).removeClass('ss'); 
                            //remove class ss from the clicked div
                            clickedBlock.removeClass('ss'); 
                        }
                    }
                    blockSelected = null;
                } else {
                    blockSelected = this;
                }
            }); 
```

现在，当您单击具有相同 sytle-id 的两个块时，它们将被删除。当您单击第一个块，然后单击不匹配的块时，样式将被删除。

[我想这就是你想要](http://jsfiddle.net/93hhN/2/)的。

# mysql - MySQL：CASE 语句的问题

> ID：15485371
> 
> 赞同：0
> 
> 时间：2013-03-18T19:36:21.493
> 
> 标签：mysql

我有一行 MySQL，我想在其中使用 CASE 语句。但是，我认为我做得不对。我需要检查一个标志是否设置为特定值，然后根据它的设置更新该标志。这是我的MySQL：

`$sql = 'UPDATE table SET flag = CASE WHEN flag = 2 THEN 0 ELSE flag = 3'`

那是有效的 SQL 吗？我想要做的是，如果标志设置为值 2，则将其设置为 0，否则将其设置为 3。如何修复我的 SQL 使其执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:39:13.840

您当前的查询非常接近，代码将是：

```
UPDATE table 
SET flag = CASE WHEN flag = 2 THEN 0 ELSE 3 END 
```

这将在 等于 时将列更新为，`flag`如果不等于，则将值更新为。`0``flag``2``2``3`

# javascript - 使用 javascript 将图像属性附加到满足条件的某些图像

> ID：15485372
> 
> 赞同：0
> 
> 时间：2013-03-18T19:36:22.330
> 
> 标签：javascript

我想将属性 ( nopin = "nopin" ) 附加到我的页面中使用 Javascript 满足某些条件的图像标签。那可能吗？

例如，我有一个使用缩略图和全尺寸图像的画廊。我想将标签添加到高度小于 100 像素的任何图像中。nopin= "nopin" 属性使其在使用 Pinterest pin-it 按钮时不显示图像。

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:47:29.683

使用 jQuery：

```
$(document).ready(function () {
    $("img").each(function () {
        if ($(this).height() < 100) {
            $(this).attr("nopin", "nopin");
        }
    });
}); 
```

示例：http: [//jsfiddle.net/Rg6RM/1/](http://jsfiddle.net/Rg6RM/1/)

# appharbor - AppHarbor 环境似乎不影响 web.config 转换

> ID：15485377
> 
> 赞同：2
> 
> 时间：2013-03-18T19:36:37.910
> 
> 标签：appharbor

根据描述，您似乎可以更改应用程序设置中的“环境”以应用不同的 web.config 转换。

> **环境**
> 
> 环境名称会影响我们应用的配置转换。名为“Release”的环境会将“Web.Release.config”应用于“Web.config”文件。

但是，这样做之后，它似乎仍在尝试使用 Web.Release.config 进行转换。

**C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\WebApplications\Microsoft.WebApplication.targets(182,5)：错误 MSB3030：无法复制文件“Web.Release.config”，因为没有找到。

我是否遗漏或误解了什么？

**编辑：**作为参考，这里是源代码库：[https ://github.com/jrmitch120/ChallengeBoard](https://github.com/jrmitch120/ChallengeBoard)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:39:06.153

确保您的解决方案中的所有配置转换都在 Visual Studio 的首选项下的“构建操作”中标记为“内容” - 重新提交并且应该可以工作。

![在此处输入图像描述](../Images/5458a24edd1cab0809b6acad35190757.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-23T15:14:21.397

**快速解决：**

AppHarbor 有自己的设置，这些设置在部署期间应用。其中一项设置包含 AppHarbor 连接字符串，另一项是别名，它需要与 web.config 中的连接字符串的键相匹配。

如果您更改 AppHarbor 中的“SQLSERVER_CONNECTION_STRING_ALIAS”以匹配您的连接字符串 Key，这将导致在部署期间应用 App Harbors SQL Server Connection，这可能与大多数人真正想要的一样多。在正常的 webconfig 转换之外维护 SQL 连接设置（和其他部署设置）对我来说感觉更好。

**一些问题的更大描述：**

至于我从一个下午的诊断和尝试中可以看出，发生了以下步骤，这可能有助于解释帮助诊断为什么事情没有按预期运行：

1.  AppHarbor 运行构建并运行测试，（您可以从 App Harbor 站点下载此输出）

2.  构建后（并且在您看不到的单独文件夹中），构建的输出通过 App Harbors 自己的转换进行。因为这是在构建之外，所以需要存在文件才能发生这种情况。Web.Release.Config 必须设置为内容的构建操作，否则此转换步骤将无法获取它

3.  转换后应用了一组附加设置。连接字符串将被覆盖等，请参阅下面的博客文章了解其工作原理：

[http://chandermani.blogspot.co.uk/2012/03/nerddinner-on-appharbor.html](http://chandermani.blogspot.co.uk/2012/03/nerddinner-on-appharbor.html)

总之，有很多相互作用和可能出错的事情。

1.  第 3 步有可能覆盖您在第 2 步中尝试执行的转换，使其看起来好像转换不起作用。

2.  Web.Release.Config 文件可能未设置为内容。

3.  最后，因为这是在构建之后发生的 AppHarbors 轻微定制的转换，它似乎并不总是与 Visual Studio 中发生的情况一致。我遇到了一个问题，我在 web.config 中缺少一个阻止转换发生的设置。您可以使用一个测试工具来检查转换将如何发生在这里： [https ://webconfigtransformationtester.apphb.com/](https://webconfigtransformationtester.apphb.com/)

我终于得到了正确应用的设置，并且在我自己的站点中应用了转换，但花了很长时间。我希望这个答案能帮助 somonelse

# sql - elisp 有原生的 sqlite 绑定吗？

> ID：15485378
> 
> 赞同：2
> 
> 时间：2013-03-18T19:36:38.550
> 
> 标签：sql, sqlite, emacs, elisp

Elisp 是否有本机 SQLite 绑定？根据我的阅读，Emacs 中的各种 sql 模式更多地用于执行 sql 查询，但我认为它们可以通过使用 sqlite3 shell 命令来工作，这可能会慢一些。我认为最快的方法是使用 Emacs C 扩展中的 SQLite C API，并通过 lisp 函数公开所有 sqlite 访问。

这已经完成了还是有更简单更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:48:27.110

[EDBC](https://github.com/redraiment/edbc)向 emacs 公开了一个 SQL 接口，尽管它是通过命令行程序而不是 C API 来实现的。

# java - 在对话框中显示不断变化的图片循环？

> ID：15485383
> 
> 赞同：3
> 
> 时间：2013-03-18T19:37:12.233
> 
> 标签：java, android

我按照我认为可行的方式做这件事并没有太大的成功，所以我会问专家。

我有一个包含十个链接到图像的 URL 的 ArrayList。我想显示第一个 URL 2 秒，然后获取第二个 URL 并执行相同操作直到结束。

这是我到目前为止所拥有的，我想也许我不会以最好的方式通过 postExecute 中的对话框来处理它？：

```
 private class LiveView extends AsyncTask<String, Integer, ArrayList<String>> {
        ProgressDialog dialog;
        private volatile boolean running = true;

        @Override
        protected void onPreExecute() {
             dialog = ProgressDialog.show(
                        myView.this,
                        "Working",
                        "Info message . . .",
                        true,
                        true,
                        new DialogInterface.OnCancelListener(){

                            public void onCancel(DialogInterface dialog) {
                                cancel(true);                           
                            }
                        }
                );
            }

        @Override
        protected void onCancelled() {
              running = false;
        }

        @Override
        protected ArrayList<String> doInBackground(String... passed) {

            while (running) {

            //removed the code here that sends the request to to make this shorter the server but it works fine
            return responseFromServer.arrayListofURLs;           //list or URLs 

            }
            return null;
        }

        @Override
        protected void onPostExecute(ArrayList<String> listURLs) {      
            dialog.cancel();

            Dialog liveView = new Dialog(myView.this, R.style.Dialog);
            liveView.setContentView(R.layout.liveview_dialogue);
            TextView title = (TextView)liveView.findViewById(R.id.liveViewTitle);           
            Button button = (Button) liveView.findViewById(R.id.liveViewButton);
            ImageView trackImage = (ImageView)liveView.findViewById(R.id.liveViewImage);

            //I want to loop through the ten images here? 

            button.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {

                }
            });
            liveView.show();

        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:40:22.080

创建一个处理程序，并通过 postDelayed 向它发送一条延迟 2 秒的消息。每当您收到消息时，通过调用 trackImage.setImage 显示下一张图片。当他们最终关闭对话框时，从处理程序中删除所有待处理的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T06:21:31.963

为了用一些代码完成答案，这是我用处理程序完成的。我不需要传递任何变量，因为我为 AsyncTask 全局创建了位图 ListArray。如果对话框关闭，我还使用布尔值来结束处理程序。

```
 liveView = new Dialog(myView.this, R.style.Dialog);
        liveView.setContentView(R.layout.liveview_dialogue);
        TextView title = (TextView)liveView.findViewById(R.id.liveViewTitle);           
        Button button = (Button) liveView.findViewById(R.id.liveViewButton);
        trackImage = (ImageView)liveView.findViewById(R.id.liveViewImage);

        button.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                run = false;
                liveView.dismiss();
            }
        });
        liveView.show();

        final Handler handler = new Handler(); 
        final Runnable r = new Runnable()
        {
            Iterator<Bitmap> it = images.iterator();
            public void run() 
            {   
                if(run){
                trackImage.setImageBitmap(it.next());
                if(it.hasNext())
                handler.postDelayed(this, 5000);
                }
            }
        };
        handler.postDelayed(r, 5000); 
```

# python - Mac 10.6.8 中的 Swig 和 g++ 链接错误

> ID：15485384
> 
> 赞同：0
> 
> 时间：2013-03-18T19:37:19.873
> 
> 标签：python, macos, g++, swig

我有一些在 linux 下工作的代码，现在我正在尝试在 Max 10.6.8 下编译代码。我正在使用 EPD 32 位 python、g++ 版本 4.2.1、swig 版本 2.0.9。这是我正在使用的命令

```
swig -c++ -python pythoncpp.i
g++ -O2 -fPIC -c  pythoncpp_wrap.cxx -I/PATH/Library/EPD/2.7-32/include/python2.7  -I/PATH/local/gsl/include
g++ -O2 -fPIC -c  pythoncpp_wrap.cxx -I/PATH/Library/EPD/2.7-32/include/python2.7  -I/PATH/local/gsl/include
g++  -L/Users/densmore3/local/gsl/lib -lpython -dynamclib pythoncpp.o pythoncpp_wrap.o -lgsl -lgslcblas -lm -o _pythoncpp.dylib 
```

前三行运行时出现错误或警告。但是，链接行会引发以下错误

```
Undefined symbols:
 "_PyCapsule_Import", referenced from:
  _SWIG_Python_GetModule in pythoncpp_wrap.o
"_PyCapsule_New", referenced from:
  _SWIG_Python_SetModule in pythoncpp_wrap.o
"_main", referenced from:
  start in crt1.10.6.o
"_PyCapsule_GetPointer", referenced from:
  _SWIG_Python_DestroyModule in pythoncpp_wrap.o  
 ld: symbol(s) not found
collect2: ld returned 1 exit status 
```

如何修复此错误？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T00:04:10.590

供我以后参考。使用

```
 ld -bundle -flat_namespace -undefined suppress -L/PATH/local/gsl/lib -lgsl -lgslcblas -lm -o _pythoncpp.so *.o 
```

努力链接所有文件。

# java - java - 如何跨类的多个实例在java中编辑文本文件的结尾

> ID：15485385
> 
> 赞同：1
> 
> 时间：2013-03-18T19:37:19.477
> 
> 标签：java

我正在编写将异常和有关异常的注释存储在文本文件中的代码。而且我遇到了一个问题，每次调用我的 StoreErrors 类的新实例时，都会重写错误文件，而不是将数据写入文件末尾。

```
public StoreErrors(Exception e){
        //increment the error number as the number of times StoreErrors
        //was intialized
       errorNum +=1;
       try{
           FileOutputStream toWriter;
           if(!errReport.exists()){
               boolean isCreated =errReport.createNewFile();
               if(isCreated){
                   System.out.println("No Error Report was found a new one "
                           + "has been created");
               }
               /*if the file is already present set append to file to true on
                * FileOutputStream
                */
               toWriter=new FileOutputStream(errReport, true);
           }else{
               toWriter=new FileOutputStream(errReport);
           }
               //OutputStreamWriter allows toLog to be writen in UTF8
               //BufferedWriter Takes characters from the OutputStreamWriter
               /*Which Writes to the file using the File errReport using
               * FileOutputStream toWriter
               */
               toLog=new BufferedWriter(new OutputStreamWriter(
                   toWriter, "UTF8"));
           /*Creates and exception object which can be used to get information
            * about the error that occured
           */
           storeException=e;
       }catch (UnsupportedEncodingException encEx){
           encEx.printStackTrace();
       }catch(IOException ioEx){
           ioEx.printStackTrace();
       }catch (Exception ex){
           ex.printStackTrace();
       }
    } 
```

这是每次存储新错误时调用的构造函数。请让我知道使用 BufferedReader(OutputStreamWriter(FileOutputStream(File, append boolean), Encoding)) 的组合是否正确。errorNum 和 errReport 都是静态的。文件声明如下：

私有静态文件 errReport=new File("err_Report.txt");

另外，在实际使用编写器写入文件时，我使用了 toLog.write("string"+"\r\n") 而不是 append。问题是我如何做到这一点，每次我调用类时它都会附加同一个文件的末尾，为什么它会用当前代码覆盖文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:43:31.553

尝试移动“真实”：

```
 toWriter=new FileOutputStream(errReport);
}else{
   toWriter=new FileOutputStream(errReport, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:42:18.387

如此链接所示，您应该使用 FileWriter 并将参数作为 true 传递以附加到现有文件。

[http://www.xyzws.com/Javafaq/how-to-append-data-to-the-end-of-existing-file-in-java/165](http://www.xyzws.com/Javafaq/how-to-append-data-to-the-end-of-existing-file-in-java/165)

# html - 如何在悬停时制作虚线下划线链接？

> ID：15485387
> 
> 赞同：17
> 
> 时间：2013-03-18T19:37:30.657
> 
> 标签：html, css

我有一个链接`<a class="link-articles" href="#articles">My Articles</a>`

和我的 CSS`.link-articles { text-decoration: underline; color: blue; }`

但是，在悬停时，我希望用红色下划线代替蓝色下划线，但文本应保持蓝色，只有下划线将颜色变为红色。

怎么做这样的事情？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-18T19:40:55.410

因为你不能表示~~哪种颜色~~文本下划线的第二种颜色，一种策略是删除它并使用边框。

```
.link-articles
{
    border-bottom: solid 1px blue;
    text-decoration: none;
}

.link-articles:hover
{
    border-bottom-color: red;
} 
```

请注意，如果您离开`text-underline`，它会在悬停时向下移动，因为它的位置与底部边框的位置不完全相同。

这种方法还有一个额外的优势，即能够通过使用~~或~~替换线样式来~~定位下划线`line-height`~~。`solid``dotted``dashed`

**无边界方法：**

正如@Pacerier 在评论中指出的那样，这是使用伪类和 CSS 内容（[JSFiddle](http://jsfiddle.net/ws5gc0r3/1/)）的替代策略：

```
.link-articles
{
    position: relative;
}

.link-articles[href="#articles"]:after
{
    content: 'My Articles';
}

.link-articles:after
{
    color: red;
    left: 0;
    position: absolute;
    top: 0;
} 
```

然而，使用抗锯齿，它可能在文本边缘有一些颜色混合。如果您不喜欢手动放入`content`CSS 的想法，您可以使用属性或重复元素。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-18T19:38:54.067

使用`border-bottom`：

```
a:hover.link-articles {border-bottom: 1px dotted red; text-decoration: none;} 
```

[查看演示](http://jsfiddle.net/nKqCD/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-02-04T19:10:29.340

做就是了：

```
a:hover {
  text-decoration-style: dotted
} 
```

[https://developer.mozilla.org/en-US/docs/Web/CSS/text-decoration-style](https://developer.mozilla.org/en-US/docs/Web/CSS/text-decoration-style)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-18T19:38:53.140

使用边框：

```
.link-articles { text-decoration: none; border-bottom: blue 1px solid; }
.link-articles:hover { border-bottom: red 1px dotted; } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-18T19:42:23.230

# [演示小提琴](http://jsfiddle.net/mohammadAdil/nKqCD/3/)

```
.link-articles { text-decoration: none; border-bottom: 1px dotted blue; }
.link-articles:hover { text-decoration: none; border-bottom: 1px dotted red; } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-18T19:39:03.257

尝试这个：

```
 .link-articles{ text-decoration: none; border-bottom:1px dotted; border-color:blue; }
 .link-articles:hover{ border-color:red; } 
```

[演示](http://jsfiddle.net/nKqCD/8/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-18T19:39:31.140

悬停时显示底部边框：

```
a.link-articles {
    text-decoration: none;
    border-bottom: 1px dotted blue;
}
a.link-articles:hover {
    border-bottom: 1px dotted red;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-18T19:39:09.403

当`:hover`用户将鼠标放在元素上时，样式用于设置样式。

```
.link-articles       { ... }
.link-articles:hover { ... } 
```

您可以使用该`border-bottom`属性来代替`text-decoration`虚线、虚线和宽度样式。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-06-25T14:10:27.257

您可以使用 CSS3`text-decoration-color`属性，但不幸的`text-decoration-color`是，任何主流浏览器都不支持该属性。

Firefox 支持另一种选择，即`-moz-text-decoration-color`属性。

参考：[http ://www.w3schools.com/cssref/css3_pr_text-decoration-color.asp](http://www.w3schools.com/cssref/css3_pr_text-decoration-color.asp)

浏览器支持：[http ://caniuse.com/#search=text-decoration-color](http://caniuse.com/#search=text-decoration-color)

[JSFiddle](http://jsfiddle.net/ghorg12110/pjrkcosq/)（不适用于所有浏览器）

所以最好的方法仍然是使用`border-bottom`css 属性作为一个技巧。

# php - 进行自动更新，例如 Facebook 聊天

> ID：15485390
> 
> 赞同：-1
> 
> 时间：2013-03-18T19:37:35.317
> 
> 标签：php, jquery, ajax

**在继续阅读之前，我想要实现的是在不刷新 div 的情况下自动更新 div 内的内容。（有点像 Facebook 聊天，添加新消息时我看不到聊天闪烁或闪烁，而是无缝添加新数据。）**

在我的索引中，我有以下标记：

```
<div>   
  <?php
    if($_SESSION['Login']==1){
      include_once('Branch_Pages/Bar_in.php');
      }
    else{
      include_once('Branch_Pages/Bar_out.php');
      }
  ?>
</div> 
```

会话变量登录设置为“1”当用户登录时，在 Bar_in.php 中我有一个搜索框，它根据 php 生成的数据列表提供建议。

```
<datalist  id="StudentList">
  <?php
    for($x=0;$x<$_SESSION['num_rows'];$x++){
        echo'
                <option value="'.$Enroll_F_name[$x].' '.$Enroll_L_name[$x].'" data-id="'.$enroll_data_No[$x].'" label="'.$_SESSION['Enroll_Index_num'][$x].'">
        ';
    }
  ?>
</datalist> 
```

如何在不刷新 div 的情况下自动更新数据列表（因为刷新会使 Bar 闪烁）或在刷新时不使其闪烁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:29:20.337

You may have a lot to learn here.

1.  After your page loads, start polling the server for new data, this basically means firing a request every few seconds (5,10,15,30, whatever makes sense for your app) [Here is some info on polling](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery)
2.  That request should return the data you need, preferably in a JSON object, or some other format that is easy for you to parse with javascript.
3.  Turn the JSON data into dom objects representing what is being repeated in your datalist
4.  use jQuery to append the objects to the datalist children array

# java - 我正在将 JPanel 添加到 JLayeredPane 并且无法使背景透明

> ID：15485392
> 
> 赞同：0
> 
> 时间：2013-03-18T19:37:44.227
> 
> 标签：java, swing, jpanel, transparency, jlayeredpane

我正在用java编写游戏。在主 UI 中，我将游戏地图呈现在画布上，我将该画布添加到工作正常的 JLayeredPane 中。然后我在屏幕顶部附近的顶部添加了一个玩家肖像区域。Player 肖像区域是 JPanel，问题是我无法让该肖像区域的背景透明。它始终具有白色背景。

我尝试设置似乎没有影响的 PortraitArea JPanel setOpaque("false")。我还尝试使用 alpha 添加背景颜色，这也没有什么区别。有什么建议么？

# php - PHP DOM文档

> ID：15485395
> 
> 赞同：0
> 
> 时间：2013-03-18T19:37:48.620
> 
> 标签：php, dom, html-parsing, domdocument

我正在尝试用 div 替换表格，以便它可以在移动设备上正常显示，这是到目前为止的代码。

```
 $dom = new DOMDocument();
            libxml_use_internal_errors(true);
            $dom->strictErrorChecking = false;
            $dom->loadHTML($this->html);
            $divID = 0;

            foreach ($dom->getElementsByTagName('table') as $table) {
                // for each table grab all rows
                $rows = array();
                $tableDiv = $dom->createElement('div');
                $tableDiv->setAttribute('style', 'width: 95%; clear: both; margin: auto;');
                $tableDiv->setAttribute('id', 'mobileTableGen_' . $divID . '_' . $page->name);
                $divID++;

                foreach ($table->getElementsByTagName('tr') as $row) {
                    $rows[] = $row;
                }

                foreach ($rows as $row) {
                    $cols = array();
                    foreach ($row->childNodes as $col) {
                        if ($col->nodeType != 3)
                            $cols[] = $col;
                    }

                    $numCols = count($cols);
                    $width = 100 / $numCols;

                    $rowDiv = $dom->createElement('div');
                    $rowDiv->setAttribute('style', 'clear: both; width: 100%;');
                    $rowDiv->setAttribute('id', 'mobileTableGen_' . $divID . '_' . $page->name);
                    $divID++;

                    foreach ($cols as $col) {
                        $div = $dom->createElement('div');
                        $div->setAttribute('style', 'width: ' . $width . '%; float: left;');
                        $div->setAttribute('id', 'mobileTableGen_' . $divID . '_' . $page->name);
                        $divID++;

                        foreach ($col->childNodes as $child) {
                            $div->appendChild($child);
                        }
                        $rowDiv->appendChild($div);
                    }
                    $tableDiv->appendChild($rowDiv);
                }
                $table->parentNode->replaceChild($tableDiv, $table);
            }
            $this->html = $dom->saveHTML(); 
```

问题出在这一行：`$div->appendChild($child);`

孩子总是空白，但我可以得到 nodeValue 就好了。所以我可以从表格中获取每个单元格的文本，但是我无法获取节点子节点的任何 html 元素。

我尝试用等效的 for 循环替换所有 foreach，读到 DOMNode 对象上的 foreach 循环可能会导致问题，但这会产生相同的结果。

# java - 带参数的 getMessage() 不起作用

> ID：15485396
> 
> 赞同：1
> 
> 时间：2013-03-18T19:37:52.307
> 
> 标签：java, spring, spring-mvc, spring-webflow

在 Spring 中，我正在实现自己`ReloadableResourceBundleMessageSource`的方法，并覆盖了`resolveCodeWithoutArguments()`在 HTML 层管理缺失键的方法。效果很好，问题是在Java层中我想使用该方法

```
getMessage(String code, Object[] args, String defaultMessage, Locale locale) 
```

该方法不会从属性文件中获取`code`的描述。`args`

*   **有人知道我错过了什么吗？**

*   **您需要更多信息吗？**

**豆的定义**

```
<bean id="messageSource" class="com.package.CustomResourceBundle">
    <property name="defaultEncoding" value="UTF-8" />
    <property name="fileEncodings" value="UTF-8"/>
    <property name="cacheSeconds" value="5" />
    <property name="basenames" value="i18n/messages,i18n/support"/>
</bean> 
```

**我使用方法 getMessage() 的方法**

```
public static String getBundleMessage(RequestContext context, String key, Object params[]) {

    ApplicationContext appContext = context.getActiveFlow().getApplicationContext();
    DelegatingMessageSource messageSource = (DelegatingMessageSource)appContext.getBean("messageSource");
    messageSource.setAlwaysUseMessageFormat(true);

    return messageSource.getMessage(key, params, "[ "+key+" ]" ,LocaleContextHolder.getLocale());

    } 
```

**财产**

```
report_date=Report Date: {0} 
```

**CustomResourceBundle 类**

```
public class CustomResourceBundle extends ReloadableResourceBundleMessageSource {

    private String[] basenames = new String[0];
    private long cacheMillis = -1;

    @Override
    public void setCacheSeconds(int cacheSeconds) {
        this.cacheMillis = (cacheSeconds * 1000);
    }

    @Override
    public void setBasenames(String... basenames) {
        if (basenames != null) {
            this.basenames = new String[basenames.length];
            for (int i = 0; i < basenames.length; i++) {
                String basename = basenames[i];
                Assert.hasText(basename, "text");
                this.basenames[i] = basename.trim();
            }
        } else {
            this.basenames = new String[0];
        }
    }

    @Override
    protected String resolveCodeWithoutArguments(String code, Locale locale) {
        if (this.cacheMillis < 0) {
            PropertiesHolder propHolder = getMergedProperties(locale);
            String result = propHolder.getProperty(code);
            if (result != null) {
                return result;
            }
        } else {
            for (String basename : this.basenames) {
                List<String> filenames = calculateAllFilenames(basename, locale);
                for (String filename : filenames) {
                    PropertiesHolder propHolder = getProperties(filename);
                    String result = propHolder.getProperty(code);
                    if (result != null) {
                        return result;
                    }
                }
            }
        }
        return "[ "+code+" ]";
    }

} 
```

**更新 - 解决** 方法我找不到为什么该方法不能正常工作，所以我实现了该方法。

```
public static String getResourceBundleMessage(RequestContext context, String key, Object[] params) {

        String finalMsg = "";
        MessageFormat messageFormat = null;

        ApplicationContext appContext = context.getActiveFlow().getApplicationContext();        
        DelegatingMessageSource  messageSource = (DelegatingMessageSource) appContext.getBean("messageSource");

        String  msgValue = messageSource.getMessage(key, null, "[ "+key+" ]", LocaleContextHolder.getLocale());
        messageFormat = new MessageFormat(msgValue);

        if(!msgValue.equalsIgnoreCase("[ "+key+" ]")){
            finalMsg = messageFormat.format(params);
        }           

        return finalMsg;

    } 
```

# django - 在处理常规 HTTP 请求时将 Django 与 Apache 集成

> ID：15485405
> 
> 赞同：1
> 
> 时间：2013-03-18T19:38:48.493
> 
> 标签：django, apache, http, integration, httprequest

我让 Django 在我的 Apache 服务器上运行。但是，我的老板问我是否可以在 Apache 上保留 http 功能。即：常规页面（在 Django 目录中没有）应作为常规 http 请求处理，而不是交给 Django。

例如，假设我有 career.mysite.com 托管 Django，我需要将 career.mysite.com/~jose/ 或 career.mysite.com/111.html 作为常规页面处理。由于这个 URL 不在我在 Django 中的任何 urls.py 中，现在该页面仅显示为“内部服务器错误”。（如果调试模式打开，还有 Django 中的 URL 列表）。

我在 /etc/apache2/sites-available 中的站点设置如下：

```
<VirtualHost career.mysite.com:80>
   ServerName career.mysite.com
   ServerAlias career.mysite.com
   DocumentRoot /srv/www/career.mysite.com
   WSGIScriptAlias / /srv/www/career.mysite.com/Wiki/django.wsgi
   <Directory /srv/www/career.mysite.com/Wiki>
      Order allow,deny
      Allow from all
   </Directory>
</VirtualHost> 
```

Wiki 是 Django 模块所在的位置，而 django.wsgi 是 WSGI 文件。

谢谢！

# java - Nodejs 中的 Java 密码

> ID：15485409
> 
> 赞同：1
> 
> 时间：2013-03-18T19:38:59.020
> 
> 标签：java, node.js, encryption

我得到了将这个 Java 解密方法转换为 Nodejs 的任务，但我不太了解这些 Java 东西。我特别困惑`PBEWithMD5AndDES`。请向我解释一下，如何在 Nodejs 中重现此解密。

```
private void readFile() {
  try {
    Cipher cipher = getCipher(2, "secret");
    DataInputStream dis;

    dis = new DataInputStream(new CipherInputStream(someInputStream, cipher));

    String field1 = dis.readUTF();
    String filed2 = dis.readUTF();
    dis.close();
  } catch (Exception e) { }
}

private Cipher getCipher(int mode, String password) throws Exception {
  Random random = new Random(43287234L);
  byte[] salt = new byte[8];
  random.nextBytes(salt);
  PBEParameterSpec pbeParamSpec = new PBEParameterSpec(salt, 5);

  SecretKey pbeKey = SecretKeyFactory.getInstance("PBEWithMD5AndDES").generateSecret(new PBEKeySpec(password.toCharArray()));
  Cipher cipher = Cipher.getInstance("PBEWithMD5AndDES");
  cipher.init(mode, pbeKey, pbeParamSpec);
  return cipher;
} 
```

我想我必须做与此类似的事情。

```
var inputStream = fs.createReadStream("file");
var decipher = crypto.createDecipher("des", "secret", new Buffer("0C9D4AE41E8315FC", "hex"));

inputStream.pipe(decipher).pipe(process.stdout); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T17:58:44.373

`PBEWithMD5AndDES`指加密算法。来自[Java Cryptography Extension (JCE) 参考指南](http://docs.oracle.com/javase/1.4.2/docs/guide/security/jce/JCERefGuide.html)：

> **PBEWithMD5AndDES**：基于密码的加密算法，定义在：RSA 实验室，“PKCS #5: Password-Based Encryption Standard”，1.5 版，1993 年 11 月。请注意，此算法暗示 CBC 作为密码模式，PKCS5Padding 作为填充方案和不能与任何其他密码模式或填充方案一起使用。

您可能需要编写一些代码来在 node.js 中进行实际解密。这是[ruby](https://stackoverflow.com/questions/10814071/implementation-of-pbewithmd5anddes-in-ruby)​​ 中的一个实现，可以帮助您入门。

# jmeter - JMeter - 允许线程组中的每个 HTTP 请求元素使用不同的 IP 地址

> ID：15485413
> 
> 赞同：2
> 
> 时间：2013-03-18T19:39:12.367
> 
> 标签：jmeter

我有一个测试计划，其中包含一个 HTTP 请求默认值元素，用于指定线程组中每个 HTTP 请求元素要使用的 IP 地址。每个 HTTP 请求元素都没有指定 IP 地址，因为它从 HTTP 请求默认值元素继承 IP 地址。

上述设置完美运行，但我无法添加具有指定 IP 地址字段的 HTTP 请求元素，其中所述 IP 地址与 HTTP 请求默认值元素中指定的 IP 地址不同。

换句话说，我正在尝试使用使用不同 IP 地址的 HTTP 请求元素创建一个测试计划，这可能吗？

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-27T11:03:42.583

使用简单的控制器将元素按目的地分组到不同的部分。

![在此处输入图像描述](../Images/f10e23dcbeddd10c7d652e3f3fe18dda.png)

# javascript - 使用类名更改 div 的边框颜色（ie7）

> ID：15485414
> 
> 赞同：0
> 
> 时间：2013-03-18T19:39:12.733
> 
> 标签：javascript, internet-explorer-7

当单击我的页面的多个（全部）选择对象时，如何使用 javascript 更改我的 div 的边框颜色？边框颜色应为纯红色（用于测试目的）。

```
var y = document.getElementsByTagName('SELECT');
for (var i = 0; i < y.length; i++) {
    y[i].onblur = function() { this.style.backgroundColor = '#FFFFFF'; };
    y[i].onfocusin = function() { this.style.backgroundColor = '#E5ECF9'; }
} 
```

html:

```
<div class="select-container">
    <select id="request">
        <option value="" >Please Select...</option>
        <option value="option1">Option 1</option>
        <option value="option2">Option 2</option>
    </select>
</div> 
```

CSS：

```
.select-container {
    position:relative;
    width:179px;
    height:20px;
    overflow:hidden;
    border-top: 0;
    border-right: 1px solid #ccc;
    border-bottom: 1px solid #ccc;
    border-left: 0;
}
.select-container select {
    position:relative;
    left:-2px;
    top:-2px;
    width: 181px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:43:22.130

尝试`onchange`处理`<select>`. 并且每次都将新选择的值添加到数组中（如果它尚不存在）。

每次向数组添加新项目时，检查`length`数组的长度和选择选项的长度，如果相等，则更改边框样式。

# c++ - C++ 从文件中读取：if 条件为 .fail() 或 try/catch

> ID：15485418
> 
> 赞同：1
> 
> 时间：2013-03-18T19:39:21.780
> 
> 标签：c++, exception, exception-handling, io, try-catch

我在 C++ 中有一个从文件读取的函数。这些函数将一个字符串作为参数，该字符串表示文件的名称。该函数有一个 if 条件来检查错误（例如文件不存在）。

```
 void B::readFile(string file)
        {
            ifstream stfile;
            stfile.open(file.c_str(), ios::in);

            if ( stfile.fail() ) {
                cerr << "Unable to open input file" << endl;
                exit(-1);
            }

           //---goes on here

         } 
```

我的问题是：

1.  上述实现是检查错误的正确方法，还是应该抛出异常？你有选择其中任何一个的理由吗？
2.  如果上面的实现是正确的，为了测试：我应该让方法返回一个字符串（“无法打开输入文件”），并在测试中断言这个字符串是否返回？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:46:07.103

1）您希望应用程序做什么？故障是否可在更高级别恢复？如果是，则抛出异常。如果不是，并且这是相当早的代码，则只需以错误退出即可，但您可能应该将失败的文件名添加到日志消息中。

2）绝对不是。你可以让它返回一个值，比如成功/失败的真/假，但你永远不希望它是这样的字符串。当预期该文件可能不存在并且可能更高级别的代码将处理它或不关心它时，您希望返回一个错误代码。（异常是昂贵的，所以对于常见的情况你不应该抛出它们）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T19:46:16.993

> 上述实现是检查错误的正确方法，还是应该抛出异常？你有选择其中任何一个的理由吗？

如果在检测到错误时可以完全处理该错误，则该实现是正确的。（您似乎决定程序应该退出）

*如果问题无法在检测到的位置完全处理，*您应该抛出异常。

> 如果上面的实现是正确的，为了测试：我应该让方法返回一个字符串（“无法打开输入文件”），并在测试中断言这个字符串是否返回？

`ASSERT`在生产代码中没有影响。你不应该让你的程序的行为依赖于一个`ASSERT`.

专注于可以解决问题的地方。如果您希望调用代码决定如何处理此问题，`throw`.

在没有`catch`/的 C 中通常返回错误代码`throw`。但是这种做法会惩罚程序员编写小而简洁的函数，因为错误可能必须通过许多堆栈级别返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T19:45:04.933

这完全取决于什么“客户”将使用这种方法。谁将调用此代码，他们将使用它做什么。

如果他们最好不要抛出异常，请使用您的返回格式。至于信息与数字，这又取决于人们将如何使用它。

我通常更喜欢抛出异常而不是其他返回方式，因为我可以创建自定义异常并向异常添加详细信息，以便调用者确切地知道发生了什么（这样他们就可以弄清楚如何在他们的代码中修复它）。

# php - 将 simple_html_dom 解析器的结果限制为仅第一次出现

> ID：15485423
> 
> 赞同：1
> 
> 时间：2013-03-18T19:39:40.190
> 
> 标签：php, dom, simple-html-dom

```
require_once('simple_html_dom.php'); 
require_once('url_to_absolute.php');
$html = file_get_html($GLOBALS["AL_CFG"]["siteURL"].'/articles/' . $PageData['ArticleID'] .'/print/');
foreach($html->find('img') as $element) {
// echo $element->src, "\n" . "<br>";
$MetaImage1 = $element->src;
$MetaImage = $MetaImage1; 
```

上面的代码工作正常 - 结果我得到了页面上的所有图像，虽然：我想仅限于第一个。谢谢你的帮助。

（我的php技能非常有限，请具体。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:40:53.590

1、使用第二个参数`find`（从零开始）：

```
$element = $html->find('img',0);
echo '<pre>',print_r($element),'</pre>'; 
```

或 2，`break`在`foreach`1 次之后：

```
foreach($html->find('img') as $element) {
    // echo $element->src, "\n" . "<br>";
    $MetaImage1 = $element->src;
    $MetaImage = $MetaImage1;
    break;
} 
```

# emacs - 交互模式下的emacs（由MX激活）当我按“enter”时它会创建新行而不是执行

> ID：15485429
> 
> 赞同：0
> 
> 时间：2013-03-18T19:39:48.327
> 
> 标签：emacs

我不确定我到底做了什么，但我记得在 emacs 中工作时按了 CU 或其他东西，之后我就不能再在交互式迷你缓冲区中执行命令了。例如，我按 Mx，然后按“gdb”，然后按 Enter。我得到一条新线，而不是正在运行的 GDB ..

然后我惊讶地意识到它是永久性的。即使我绝望地重新启动 emacs 甚至我的 shell，这种行为仍然存在。

这是一个很大的无赖..有什么建议吗？

谢谢

# c# - 在存储过程中连接 4 个表

> ID：15485432
> 
> 赞同：0
> 
> 时间：2013-03-18T19:39:59.093
> 
> 标签：c#, sql-server-2008, stored-procedures

我有四个表，我需要通过存储过程从所有表中获取数据。表 1 是主表，布局如下

```
ID  REF1  REF2  Data1
 1   01    11    abc
 2   01    22    def
 3   01    33    ghi 
```

表 2 看起来像这样

```
ID  ref2ID  Data2
 1    11     a
 2    99     x 
```

表3

```
ID  ref3ID  Data3
 1    22     b 
```

表 4

```
ID  ref4ID  Data4
 1    33     c 
```

我将如何根据“REF2”列从所有四个表中获取数据。

我尝试过这样的事情，但我没有得到正确的数据。我需要带上 Data1、Data2、Data3 和 Data4 列上的所有记录

```
Select Table1.Data1,
       Table2.Data2,
       Table3.Data3,
       Table4.Data4,
From   Table1 INNER JOIN
       Table2 ON Table1.REF2 = Table2.Ref2ID INNER JOIN 
       Table3 ON Table1.REF2 = Table3.Ref3ID INNER JOIN
       Table4 ON Table1.REF2 = Table4.Ref4ID
WHERE  REF1 = "01" 
```

我究竟做错了什么？请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T19:42:46.567

在这种情况下尝试使用`LEFT JOIN`s，amd 也使用单引号作为字符串：

```
SELECT Table1.Data1,
       Table2.Data2,
       Table3.Data3,
       Table4.Data4
FROM   Table1 
LEFT JOIN Table2 
    ON Table1.REF2 = Table2.Ref2ID 
LEFT JOIN Table3 
    ON Table1.REF2 = Table3.Ref3ID 
LEFT JOIN Table4 
    ON Table1.REF2 = Table4.Ref4ID
WHERE  REF1 = '01' 
```

[这是一个带有演示的 sqlfiddle](http://sqlfiddle.com/#!3/21b99/1)供您尝试。

# iphone - iOS 2D 游戏开发

> ID：15485434
> 
> 赞同：-2
> 
> 时间：2013-03-18T19:40:08.647
> 
> 标签：iphone, ios, ios5, cocos2d-iphone, game-engine

我对游戏开发的知识基本为零。我对 cocos2d 进行了一些研究，并学习了一些基本的 Unity3d 教程。

我想创建一个由陀螺仪控制的基于角色的游戏（走在路上，跳过障碍物）。我不关心跨平台，至少目前不关心。考虑到我要创建一个基本的 2d 游戏，看起来 Unity 有点令人困惑。

基本概念是什么？对于我的游戏，哪个应该是为 iOS 构建 2d 游戏（最好是免费的）最方便和易于实现的引擎？

我很困惑，我正在尝试研究所有引擎，但由于我的知识为零，所以我迷路了。我认为自己是一个高于新手的 iOS 开发人员（AppStore 上有 5 个应用程序），但游戏开发是一个完全不同的概念，我不想花几天时间来寻找最适合我情况的教程和最合适的引擎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T21:00:46.817

Cocos2d 是一款出色的 2d 和 3d 引擎。Ray wonderlich 收集了一些不错的入门教程。Tim roadley 在 box2d 上也有一套很好的与 cocos2d 相关的 tut。还有一个 wiki 站点。Cocos2d 也有一个网站，可以引导您浏览所有内容。还有野味沙拉，也有一些人对此赞不绝口。那里有两个或更多的免费引擎。这完全取决于您想在这方面投入多少时间和精力。如果你在网上搜索，你可以找到那些家伙的网站。正如我所说，所有材料都是免费的，只是需要时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:49:37.920

如果您有一些盛大的设备，或者是学生/学校教师，您可以以折扣价购买 Unity3D。Unity3D 是一个强大、简单、全面的 2D/3D 游戏引擎/平台，适用于 iOS/Android、Windows、MAC 等。

学习曲线小，一次开发，到处发布的整体理想很突出。www.unity3d.com。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T19:54:06.367

本[Ray Wenderlich 教程](http://www.raywenderlich.com/25736/how-to-make-a-simple-iphone-game-with-cocos2d-2-x-tutorial)将帮助您开始使用[Cocos2d](http://www.Cocos2d-iPhone.com)，它是一款出色的 2D 引擎，适合 iPhone 初学者。

# javascript - 我需要帮助找到离中心最近的 20 个邻居 一个融合层

> ID：15485439
> 
> 赞同：-1
> 
> 时间：2013-03-18T19:40:14.870
> 
> 标签：javascript, variables, google-fusion-tables

我有一个项目，我试图通过单击按钮将融合表中最接近的 20 个人显示到当前地图中心。我目前有 lat 和 long 作为静态数字，需要根据地图当前中心进行更改。我目前拥有的链接是 http://www.mappingcenter.org/little_flock/littleflock.html>。

我是 js 新手，我真的很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:04:01.057

`getCenter()`- 方法返回`google.maps.Map`-instance的中心：

```
orderBy:'ST_DISTANCE(geo_latitude, LATLNG('+map.getCenter().lat()+','+map.getCenter().lng()+'))' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:24:49.110

您可以使用 GViz 来执行此操作，其中 order by 和 limit 20。

查询："SELECT geometry FROM "+FusionTableID+" ORDER BY ST_DISTANCE(geometry, LATLNG("+map.getCenter().toUrlValue(6)+")) LIMIT 10"

[示例（限制为 10），获取地图上最近的 10 个点](http://www.geocodezip.com/orderby_test_gviz_numbered.html)

# javascript - 如何使用 Jquery 安全地检查属性值？

> ID：15485447
> 
> 赞同：-3
> 
> 时间：2013-03-18T19:40:33.420
> 
> 标签：javascript, jquery

如果单击的链接将 target="_blank" 设置为属性，我想调用 window.open，否则我设置一个 iframe 来加载页面。

如何检查 attr 并确保在值为 null 等时它不会崩溃。

到目前为止我有这个：

```
if ($(that).attr("target") == "_blank") {
       window.open(linkHref, "_blank");
}
else {
       document.getElementById(someFrame).src = linkHref;
} 
```

我害怕如果`$(that).attr("target")`没有设置，或者是空的，它会崩溃。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T19:42:52.683

来自 JQuery 文档：

> 访问第一个匹配元素的属性。此方法可以轻松地从第一个匹配的元素中检索属性值。如果元素没有具有这样名称的属性，则返回 undefined。属性包括title、alt、src、href、width、style等。

它不会爆炸，但如果属性丢失，则返回 undefined 。因此，期望返回未定义的潜力，并进行相应的调整。

更糟糕的是，您总是可以将易失性代码包装在 try/catch 中以规避错误。

# r - 使用 R 创建具有相同文本大小的不同大小的图形

> ID：15485449
> 
> 赞同：2
> 
> 时间：2013-03-18T19:40:36.643
> 
> 标签：r, graph

我需要创建多个图形的大小版本，以使文本大小相同。我想避免摆弄低级图形参数，但到目前为止，这是唯一对我有用的东西，即使它也不是很完美。

这就是我现在所拥有的。它基本上依赖于将较小图形的 cex 设置为与较小图像与较大图像大小的比率相同，然后将出现在较小图形中的所有文本的 cex 设置为该比率的倒数。

```
# actual data to be plotted
x       = seq( 1, 10, 0.01 )
B       = 1.0
a       = 1.0
y       = B*(x^((-1)*a))

# set graphical parameters
xlim    = c(0,10)
ylim    = c(0,5)
xlab    = "Number of repetitions"
ylab    = "Time in seconds"
version = "large" # or "small"
if ( version=="large" ) {
    w = 800
    h = 510
} else if ( version=="small" ) {
    w = 266
    h = 170
}

# create the actual plots
# I tried to remove unnecessary details but leave those that might matter for my question
png( paste(version,".png",sep=""), width=w, height=h )
par( las=1 )
if ( version=="large" ) {
    plot( 0, 0, xlim=xlim, ylim=ylim, xlab=xlab, ylab=ylab, col=rgb(0,0,0,0) )
    lines(spline(x,y, method='n', n=1000), lwd=3 )
} else if ( version=="small" ) {
    par( cex=1/3, mar=c(8,8,1,1) )
    plot( 0, 0, xlim=xlim, ylim=ylim, col=rgb(0,0,0,0), axes=FALSE, xlab="", ylab="", frame.plot=TRUE )
    lines(spline(x,y, method='n', n=1000), lwd=2 )
    axis( side=1, cex.axis=3, mgp=c(5.5,2.5,0) )
    title( xlab=xlab, cex.lab=3, mgp=c(5.5,2.5,0) )
    axis( side=2, cex.axis=3, mgp=c(5,2,0) )
    title( ylab=ylab, cex.lab=3, mgp=c(5,2,0) )
}
dev.off() 
```

这工作正常，但我不得不花费大量时间对字符扩展和边距进行手动编码，即使在我完成之后，它仍然只能解决我所显示的具体示例的问题。当我更改几乎任何细节时，例如，如果 y 轴上的标签变得比现在更宽，因为它们的长度是 2 位数而不是 1，我必须返回并再次手工制作新设置。这太糟糕了！我怎样才能让这件事自动发生，而不必手工制作低级细节？

顺便说一句，我最终想让情节线抗锯齿，所以如果提议的解决方案不会使这成为不可能，我将不胜感激。例如，我在某处看到我可以使用 cairoDevice 来消除锯齿，并且可能可以使用 ggplot 来解决我的尺寸问题，但不确定我是否可以同时做到这两个？可以通过使用 pdf 而不是 png 来消除抗锯齿的需要，但我想在网页中显示为图像，所以我认为我需要 png。据我了解，对于 png 格式，保存大而显示小并不适用。

# jsf - 如何获取 Primefaces 的 Filtered DataTable 字段中输入的值？

> ID：15485452
> 
> 赞同：6
> 
> 时间：2013-03-18T19:40:53.420
> 
> 标签：jsf, primefaces, primefaces-datatable

我有一个数据表：

```
<p:dataTable id="pDataTableListaRegistros"
             var="registro"
             value="#{arquivoBean.listaRegistros}"
             paginator="true"
             rows="20"
             filteredValue="#{arquivoBean.filteredListaRegistros}"
             styleClass="tabelaCentralizada"> 
```

我想获取在过滤器字段“代码”、“数据做注册”和“Usuário”中输入的值，以便在支持 bean 中进行操作。

![在此处输入图像描述](../Images/43c7fa52889270961ab860c64347feb5.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T00:38:05.630

您可以通过以下方式从数据表中获取过滤器值

1.  通过绑定或遍历树从视图中获取对数据表的引用。通过绑定，您将拥有：

    ```
     <p:dataTable binding="#{arquivoBean.theDataTable}" id="pDataTableListaRegistros" var="registro" value="#{arquivoBean.listaRegistros}" paginator="true" rows="20" filteredValue="#{arquivoBean.filteredListaRegistros}" styleClass="tabelaCentralizada"/> 
    ```

    在你的支持bean中：

    ```
     DataTable theDataTable = new DataTable();
       //getter and setter 
    ```

2.  从绑定

    ```
     Map<String, String> theFilterValues = theDataTable.getFilters(); //This returns a map of column-filterText mapping. 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-09T11:59:50.253

您可以将地图添加到您的 bean，例如：

```
private Map<String, Serializable> filterValues = new HashMap<>(); 
```

`filterValue`并使用 的属性将值绑定到地图`p:column`，例如：

```
<p:column headerText="Name"
          sortBy="#{item.name}"
          filterBy="#{item.name}"
          filterMatchMode="contains"
          filterValue="#{yourBean.filterValues['name']}">
  <h:outputText value="#{item.name}" />
</p:column> 
```

此解决方案的优点是更新表时将保留这些值。

# ruby - 对 Rails 的嵌套属性进行 has_many 验证

> ID：15485455
> 
> 赞同：1
> 
> 时间：2013-03-18T19:40:59.927
> 
> 标签：ruby, ruby-on-rails-3, rails-activerecord, shoulda

我有以下两个模型：

```
class Human < ActiveRecord::Base

 has_many :homes, inverse_of: :human, validate: true, autosave: true
 accepts_nested_attributes_for :homes, allow_destroy: true
end

class Home < ActiveRecord::Base
 belongs_to :human, inverse_of: :homes

 validates :human, presence: true
 validates :address, presence: true, length: { maximum: 255 },
        uniqueness: { case_sensitive: false, scope: :human_id }
 validates :post_code, length: { maximum: 25 }
end 
```

以及以下规格`spec/models/human_spec.rb`

```
it { should have_many(:homes) } 
```

失败了：

```
 Failure/Error: it { should have_many(:homes) }
   Expected Human to have a has_many association called homes (homes should have :validate => )
 # ./spec/models/human_spec.rb:53:in `block (3 levels) in <top (required)>' 
```

我已经追踪到这里：

```
 https://github.com/thoughtbot/shoulda-matchers/blob/master/lib/shoulda/matchers/active_record/association_matcher.rb  (Line 263) 
```

这似乎表明 validate: true 需要特定的 validate: 回调，而 validates 方法不够/不可接受。如何告诉 has_many 关联运行验证回调，但不需要 :validate => ？

# python - 使用最新的 twitter api 和 python 检索多个用户对象

> ID：15485457
> 
> 赞同：2
> 
> 时间：2013-03-18T19:41:08.300
> 
> 标签：python, twitter

最新版本的 twitter api 是否取消了通过一次调用检索多个用户对象的功能？

如果不是，它仍然是 GetUser 函数吗？

如果我有一个用户屏幕名称列表，如何通过一次调用检索所有用户对象？

例如，如果列表是：users = [user1,user2,user3......user200]

开发人员手册可能有答案，但我很难弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:55:37.417

用户查找没有得到你需要的东西吗？

```
GET users/lookup 
```

参考：[https ://dev.twitter.com/docs/api/1/get/users/lookup](https://dev.twitter.com/docs/api/1/get/users/lookup)

> 返回多达 100 个用户的扩展信息，由 ID、屏幕名称或两者的组合指定。作者的最新状态（如果验证用户有权限）将内联返回。
> 
> 此方法对于 Streaming API 的使用者至关重要。它也非常适合与朋友/ID 和追随者/ID 一起使用。

* * *

在[python-twitter](https://github.com/bear/python-twitter/)中，可以通过以下方式访问：

```
def UsersLookup(self, user_id=None, screen_name=None, users=None): 
```

来源：[https ://github.com/bear/python-twitter/blob/master/twitter.py#L3189](https://github.com/bear/python-twitter/blob/master/twitter.py#L3189)

> 获取指定用户的扩展信息。
> 
> 用户可以指定为 user_ids、screen_names 或 twitter.User 对象的列表。被查询的用户列表是所有指定参数的并集。
> 
> twitter.Api 实例必须经过身份验证。
> 
> Args： user_id：用于检索扩展信息的 user_id 列表。[可选] screen_name：用于检索扩展信息的 screen_name 列表。[可选] users：用于检索扩展信息的 twitter.User 对象列表。[可选的]
> 
> 返回：请求用户的 twitter.User 对象列表

* * *

这是“tweepy”的一些信息

```
""" Perform bulk look up of users from user ID or screenname """
def lookup_users(self, user_ids=None, screen_names=None): 
```

[https://github.com/tweepy/tweepy/blob/master/tweepy/api.py#L146](https://github.com/tweepy/tweepy/blob/master/tweepy/api.py#L146)

# php - 为 WordPress 导航菜单添加中断

> ID：15485461
> 
> 赞同：1
> 
> 时间：2013-03-18T19:41:20.397
> 
> 标签：php, wordpress

在寻找从 WordPress 菜单中删除 ul 和 li 标签的解决方案后，我终于遇到了这个问题：

```
<?php
$foot_nav = wp_nav_menu( array( 'container' => '', 'echo' => '0', 'theme_location' =>     'registrations' ) );
$foot_nav2 = preg_replace( array( '#^<ul[^>]*>#', '#</ul>$#' ), '', $foot_nav );
$foot_nav2 = preg_replace( array( '#<li[^>]*>#', '#</li>$#' ), '', $foot_nav2 );
echo $foot_nav2;
?> 
```

工作正常，除了我需要在每个链接之后添加一个中断。

我怎样才能做到这一点？

蒂亚:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:45:46.283

在 PHP 中通常可以只添加`/n`您想要休息的地方。

# php - 如何使用 fgets() 或 fgetss() 获取特定行

> ID：15485466
> 
> 赞同：0
> 
> 时间：2013-03-18T19:41:33.893
> 
> 标签：php, html, file

我想知道如何使用 or 读取特定行（甚至特定字符`fgets()`）`fgetss()`。

例如；
数据.txt-

```
this is data 1
this is data 2
this is data 3 
```

我将如何只读取数据 2？

如果可能的话，那就是。
另外，我怎样才能只阅读最后一行？就像我`a+`用来写在文件末尾一样，它将是最新的内容。

另一个问题：
是否可以通读整个文件并检查是否存在某些内容？如果是这样，怎么做？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:47:02.277

对于文本文件：

```
$fileName = 'file.txt';
$file = new \SplFileObject($fileName);
$file->setFlags(\SplFileObject::READ_CSV);

$seek = 1;
$file->seek($seek);

$line = $file->fgets(); 
```

在`$line`变量中有来自文件的第二行。

# java - GSON反序列化后完成对象构建

> ID：15485467
> 
> 赞同：17
> 
> 时间：2013-03-18T19:41:34.817
> 
> 标签：java, android, json, gson

我已经成功开始使用 GSON 序列化和反序列化我的 Android 应用程序中的对象层次结构。

一些被序列化的对象具有我必须标记为的成员`transient`（或者使用替代的 GSON 注释来防止它们被序列化），因为它们是对我不想序列化为输出 JSON 字符串的一部分的对象的引用。这些引用指向必须通过其他方式单独构造的对象。

一旦结构被反序列化回 Java 对象，在某些时候我需要填写这些引用。我可以通过使用一系列`setXXX()`类型方法轻松地做到这一点，但在完成之前，这些对象处于不完整状态。因此，我想知道是否有更强大的方法来解决这个问题。

到目前为止我想到的方法：

1.  如果对象处于不完整状态，则让对象抛出`RuntimeException`（或更合适的）；也就是说，如果在未调用某些初始化方法时要求他们做一些工作。

2.  将可序列化位分离到单独的数据模型对象中。也就是说，把不能序列化的东西拿出来。在 GSON 反序列化之后，使用组合中的这些数据对象构建我的“真实”对象。这似乎在某种程度上破坏了使用 GSON 的便利性。

3.  为 GSON 编写一个自定义反序列化器来处理这些对象的特殊创建。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-02-12T18:38:53.010

查看[https://github.com/julman99/gson-fire](https://github.com/julman99/gson-fire)

这是我创建的一个库，它扩展了 Gson 以处理后序列化和后反序列化等案例

此外，它还有许多其他很酷的功能，随着时间的推移我需要 Gson。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T06:02:16.907

我可能会采用第二种方法，因为我通常设计我的应用程序，任何需要序列化/反序列化的东西实际上只是普通的旧数据，或者如果您愿意，也可以是 POJO。如果我发现自己需要自定义/配置序列化 API 来做我想做的事，我倾向于简化正在序列化的内容，因此序列化 API 不需要额外的配置。

所以，如果我有一个更复杂的数据模型，其中的一部分不需要序列化/反序列化，那么我会从中提取一组更简单的 POJO，作为一个概念上独立的数据模型来参与序列化/反序列化。这确实需要一个额外的步骤来在两个数据模型之间进行映射，但这通常也很简单。

如果首选第三种方法，那么还要注意[Instance Creator 功能](https://sites.google.com/site/gson/gson-user-guide#TOC-Writing-an-Instance-Creator)，因为它可以提供另一个有用的挂钩来自定义反序列化过程。

# python - 将两个 Python try/except 块压缩为一个而不改变行为

> ID：15485468
> 
> 赞同：2
> 
> 时间：2013-03-18T19:41:34.990
> 
> 标签：python, exception, exception-handling, python-3.x

我正在为标准库中的错误处理中的现有错误开发补丁，`shutil.rmtree()`我遇到了以下代码：

```
try:
    orig_st = os.lstat(path)
except Exception:
    onerror(os.lstat, path, sys.exc_info())
    return
try:
    fd = os.open(path, os.O_RDONLY)
except Exception:
    onerror(os.lstat, path, sys.exc_info())
    return 
```

在应用我的更改以简化实施之前，我想将其简化为以下内容：

```
try:
    orig_st = os.lstat(path)
    fd = os.open(path, os.O_RDONLY)
except Exception:
    onerror(os.lstat, path, sys.exc_info())
    return 
```

在任何情况下，两个代码示例之间的行为会有所不同吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T20:21:45.240

**不**

在单线程应用程序中不存在两者不同的情况。但是，在多线程应用程序中，“路径”可能会在两个尝试例外之间发生变化。

此代码是在修复符号链接攻击漏洞 ( [http://bugs.python.org/issue4489](http://bugs.python.org/issue4489) ) 的补丁中引入的。也许您应该在更改后要求原始提交者进行代码审查。根据[http://hg.python.org/cpython/annotate/c910af2e3c98/Lib/shutil.py#434](http://hg.python.org/cpython/annotate/c910af2e3c98/Lib/shutil.py#434)，它是 Hynek Schlawack 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:07:03.827

我认为这两种情况是相同的，但只是因为`return`每个异常块内部都有一个，这意味着`try...except`如果在第一个中遇到异常，第二个块实际上不会被执行。

如果第一个`try...except`没有`return`，那么`try...except`即使在第一个块中遇到异常，也会执行第二个块，并且这两种情况不会相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T19:59:38.107

我认为他们将其拆分的原因是因为如果它在第一次尝试时捕获异常，那么它仍然会为 fd 设置一个值。按照您编写的方式，如果在代码的第一位（即 orig_st）上捕获了异常，那么它将永远不会设置 fd，因为它已经通过了它，即使它可能不包含异常。

# javascript - 如何找到 100 个移动目标之间的最短路径？（包括现场演示。）

> ID：15485473
> 
> 赞同：89
> 
> 时间：2013-03-18T19:42:02.970
> 
> 标签：javascript, algorithm, graph-theory

## 背景

这张图说明了问题： ![square_grid_with_arrows_giving_directions](../Images/b2e567bfe0b0d63e0682e49d6cfe550d.png)

我可以控制红色圆圈。目标是蓝色三角形。黑色箭头表示目标将移动的方向。

我想以最少的步骤收集所有目标。

每转一圈，我必须向左/向右/向上或向下移动 1 步。

每转一圈，目标也将根据板上显示的方向移动 1 步。

## 演示

我[在 Google appengine 上](http://penguinspuzzle.appspot.com/a_fishy_problem.html)放了一个可播放的问题演示。

如果有人能超过目标分数，我会非常感兴趣，因为这表明我当前的算法不是最优的。（如果你能做到这一点，应该打印一条祝贺信息！）

## 问题

我当前的算法与目标数量的关系非常糟糕。时间呈指数增长，对于 16 条鱼来说已经是几秒钟了。

我想计算 32*32 板尺寸和 100 个移动目标的答案。

## 问题

什么是计算收集所有目标的最小步骤数的有效算法（最好是 Javascript）？

## 我试过的

我目前的方法是基于记忆，但它非常慢，我不知道它是否总是会产生最好的解决方案。

我解决了“收集给定目标集并最终达到特定目标的最小步骤数是多少？”的子问题。

通过检查前一个目标访问过的每个选择，递归地解决子问题。我假设尽可能快地收集先前的目标子集总是最佳的，然后尽快从最终到达的位置移动到当前目标（尽管我不知道这是否是一个有效的假设）。

这导致要计算的 n*2^n 个状态增长得非常快。

当前代码如下所示：

```
var DX=[1,0,-1,0];
var DY=[0,1,0,-1]; 

// Return the location of the given fish at time t
function getPt(fish,t) {
  var i;
  var x=pts[fish][0];
  var y=pts[fish][1];
  for(i=0;i<t;i++) {
    var b=board[x][y];
    x+=DX[b];
    y+=DY[b];
  }
  return [x,y];
}

// Return the number of steps to track down the given fish
// Work by iterating and selecting first time when Manhattan distance matches time
function fastest_route(peng,dest) {
  var myx=peng[0];
  var myy=peng[1];
  var x=dest[0];
  var y=dest[1];
  var t=0;
  while ((Math.abs(x-myx)+Math.abs(y-myy))!=t) {
    var b=board[x][y];
    x+=DX[b];
    y+=DY[b];
    t+=1;
  }
  return t;
}

// Try to compute the shortest path to reach each fish and a certain subset of the others
// key is current fish followed by N bits of bitmask
// value is shortest time
function computeTarget(start_x,start_y) {
  cache={};
  // Compute the shortest steps to have visited all fish in bitmask
  // and with the last visit being to the fish with index equal to last
  function go(bitmask,last) {
    var i;
    var best=100000000;
    var key=(last<<num_fish)+bitmask;
    if (key in cache) {
      return cache[key];
    }
    // Consider all previous positions
    bitmask -= 1<<last;
    if (bitmask==0) {
      best = fastest_route([start_x,start_y],pts[last]);
    } else {
      for(i=0;i<pts.length;i++) {
        var bit = 1<<i;
        if (bitmask&bit) {
          var s = go(bitmask,i);   // least cost if our previous fish was i
          s+=fastest_route(getPt(i,s),getPt(last,s));
          if (s<best) best=s;
        }
      }
    }
    cache[key]=best;
    return best;
  }
  var t = 100000000;
  for(var i=0;i<pts.length;i++) {
    t = Math.min(t,go((1<<pts.length)-1,i));
  }
  return t;
} 
```

## 我考虑过的

我想知道的一些选项是：

1.  缓存中间结果。距离计算重复了很多模拟，中间结果可以被缓存。
    但是，我认为这不会阻止它具有指数复杂性。

2.  一个 A* 搜索算法，尽管我不清楚什么是适当的可接受启发式算法以及这在实践中的有效性。

3.  研究旅行商问题的好算法，看看它们是否适用于这个问题。

4.  试图证明这个问题是 NP 难的，因此为它寻求最佳答案是不合理的。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-18T22:51:48.757

你查过文献吗？我发现这些论文似乎可以分析您的问题：

*   “跟踪移动目标和非静止旅行商问题”：[http ://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.85.9940](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.85.9940)

*   “移动目标旅行商问题”：[http ://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.57.6403](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.57.6403)

**更新 1：**

上述两篇论文似乎专注于欧几里得度量的线性运动。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-20T20:22:07.280

## 贪心法

评论中建议的一种方法是首先前往最近的目标。

我已经提供了一个演示版本，其中包括通过这种贪婪方法计算的成本[here](http://penguinspuzzle.appspot.com/a_fishy_problem3.html)。

代码是：

```
function greedyMethod(start_x,start_y) {
  var still_to_visit = (1<<pts.length)-1;
  var pt=[start_x,start_y];
  var s=0;
  while (still_to_visit) {
    var besti=-1;
    var bestc=0;
    for(i=0;i<pts.length;i++) {
      var bit = 1<<i;
      if (still_to_visit&bit) {
        c = fastest_route(pt,getPt(i,s));
        if (besti<0 || c<bestc) {
          besti = i;
          bestc = c;
        }
      }
    }
    s+=c;
    still_to_visit -= 1<<besti;
    pt=getPt(besti,s);
  }
  return s;
} 
```

对于 10 个目标，它大约是最佳距离的两倍，但有时更多（例如 *4），有时甚至会达到最佳距离。

这种方法非常有效，因此我可以负担一些周期来改进答案。

接下来我正在考虑使用蚁群方法来看看他们是否可以有效地探索解决方案空间。

## 蚁群法

[蚁群方法](http://www.idsia.ch/~luca/acs-bio97.pdf)似乎可以很好地解决这个问题。这个答案中的链接现在比较了同时使用贪婪和蚁群方法时的结果。

这个想法是蚂蚁根据当前的信息素水平概率性地选择它们的路线。每 10 次试验后，我们沿着他们发现的最短路径存放额外的信息素。

```
function antMethod(start_x,start_y) {
  // First establish a baseline based on greedy
  var L = greedyMethod(start_x,start_y);
  var n = pts.length;
  var m = 10; // number of ants
  var numrepeats = 100;
  var alpha = 0.1;
  var q = 0.9;
  var t0 = 1/(n*L);

  pheromone=new Array(n+1); // entry n used for starting position
  for(i=0;i<=n;i++) {
    pheromone[i] = new Array(n);
    for(j=0;j<n;j++)
      pheromone[i][j] = t0; 
  }

  h = new Array(n);
  overallBest=10000000;
  for(repeat=0;repeat<numrepeats;repeat++) {
    for(ant=0;ant<m;ant++) {
      route = new Array(n);
      var still_to_visit = (1<<n)-1;
      var pt=[start_x,start_y];
      var s=0;
      var last=n;
      var step=0;
      while (still_to_visit) {
        var besti=-1;
        var bestc=0;
        var totalh=0;
        for(i=0;i<pts.length;i++) {
          var bit = 1<<i;
          if (still_to_visit&bit) {
            c = pheromone[last][i]/(1+fastest_route(pt,getPt(i,s)));
            h[i] = c;
            totalh += h[i];
            if (besti<0 || c>bestc) {
              besti = i;
              bestc = c;
            }
          }
        }
        if (Math.random()>0.9) {
          thresh = totalh*Math.random();
          for(i=0;i<pts.length;i++) {
            var bit = 1<<i;
            if (still_to_visit&bit) {
              thresh -= h[i];
              if (thresh<0) {
                besti=i;
                break;
              }
            }
          }
        }
        s += fastest_route(pt,getPt(besti,s));
        still_to_visit -= 1<<besti;
        pt=getPt(besti,s);
        route[step]=besti;
        step++;
        pheromone[last][besti] = (1-alpha) * pheromone[last][besti] + alpha*t0;
        last = besti;
      }
      if (ant==0 || s<bestantscore) {
        bestroute=route;
        bestantscore = s;
      }
    }
    last = n;
    var d = 1/(1+bestantscore);
    for(i=0;i<n;i++) {
      var besti = bestroute[i];
      pheromone[last][besti] = (1-alpha) * pheromone[last][besti] + alpha*d;
      last = besti;
    }
    overallBest = Math.min(overallBest,bestantscore);
  }
  return overallBest;
} 
```

## 结果

这种使用 10 只蚂蚁的 100 次重复的蚁群方法仍然非常快（16 个目标为 37 毫秒，而穷举搜索为 3700 毫秒）并且看起来非常准确。

下表显示了使用 16 个目标的 10 次试验的结果：

```
 Greedy   Ant     Optimal
   46       29      29
   91       38      37
  103       30      30
   86       29      29
   75       26      22
  182       38      36
  120       31      28
  106       38      30
   93       30      30
  129       39      38 
```

蚂蚁方法似乎比贪婪方法好得多，而且通常非常接近最优。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-20T16:16:47.793

该问题可以用广义旅行商问题来表示，然后转换为传统的旅行商问题。这是一个经过充分研究的问题。OP 问题的最有效解决方案可能并不比 TSP 的解决方案更有效，但绝不是肯定的（我可能未能利用 OP 问题结构的某些方面来实现更快的解决方案，例如其周期性）。无论哪种方式，这是一个很好的起点。

来自[C. Noon 和 J.Bean，*广义旅行推销员问题的有效转换*](http://deepblue.lib.umich.edu/bitstream/handle/2027.42/6834/ban3102.0001.001.pdf;jsessionid=FE47BED6BEFA1D7A88661CBCABEF64AC?sequence=5)：

> *广义旅行商问题*(GTSP) 是一个有用的模型，用于解决涉及选择和顺序决策的问题。该问题的非对称版本是在一个有向图上定义的，该有向图具有节点 N、连接弧 A 和相应弧成本 c 的向量。节点被预先分组为 m 个互斥且详尽的节点集。连接弧只在属于不同集合的节点之间定义，即没有集合内弧。每个定义的弧都有相应的非负成本。GTSP 可以说是*找到一个最小成本 m-arc 循环的问题，该循环恰好包括每个节点集中的一个节点*。

对于OP的问题：

*   每个成员`N`都是特定时间特定鱼的位置。将其表示为`(x, y, t)`，其中`(x, y)`是网格坐标，并且`t`是鱼在该坐标处的时间。对于 OP 示例中最左边的鱼，前几个（从 1 开始）是：`(3, 9, 1), (4, 9, 2), (5, 9, 3)`当鱼向右移动时。
*   对于 N 的任何成员，让`fish(n_i)`返回由节点表示的鱼的 ID。对于 N 的任何两个成员，我们可以计算`manhattan(n_i, n_j)`两个节点之间的曼哈顿距离，并且`time(n_i, n_j`) 计算节点之间的时间偏移量。
*   不相交子集的数量 m 等于鱼的数量。不相交的子集`S_i`将仅包含 的节点`fish(n) == i`。
*   如果对于两个节点`i`，则和`j` `fish(n_i) != fish(n_j)`之间存在弧。`i``j`
*   `time(n_i, n_j)`节点 i和节点 j 之间的成本`time(n_i, n_j) < distance(n_i, n_j)`为 可以去除后一种类型的弧。
*   需要添加一个额外的节点来表示玩家的位置，以及所有其他节点的弧线和成本。

解决这个问题将导致对每个节点子集的单次访问（即每条鱼被获取一次）以最小成本（即获得所有鱼的时间最短）。

本文继续描述如何将上述公式转化为传统的旅行推销员问题，然后用现有技术解决或近似。我还没有通读详细信息，但另一篇以它宣称有效的方式执行此操作的论文就是这篇[论文](http://www.ee.ucla.edu/~abehzad/ICSE02.pdf)。

复杂性存在明显的问题。特别是节点空间是无限的！这可以通过仅在特定时间范围内生成节点来缓解。如果`t`是生成节点的时间步`f`数， 是鱼的数量，那么节点空间的大小将是`t * f`。一个节点在某个时间`j`最多将具有`(f - 1) * (t - j)`向外的弧（因为它不能及时返回或移动到它自己的子集）。弧的总数将按弧的顺序排列`t^2 * f^2`。弧形结构可能会被整理，以利用鱼道最终是周期性的这一事实。鱼会在每个循环长度的最小公分母上重复一次它们的配置，所以也许可以使用这个事实。

我对 TSP 知之甚少，无法说出这是否可行，我认为这并不意味着发布的问题*一定*是NP 难的……但这是寻找最优或有界解决方案的一种方法.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T07:06:10.127

我认为另一种方法是：

*   计算目标的路径 - 预测。
*   比使用[Voronoi 图](http://en.wikipedia.org/wiki/Voronoi_diagram)

引用维基百科：

*在数学中，Voronoi 图是一种将空间划分为多个区域的方法。预先指定一组点（称为种子、站点或生成器），并且对于每个种子，将有一个相应的区域，该区域由距离该种子比任何其他点更近的所有点组成。*

所以，你选择一个目标，按照它的路径进行一些步骤，并在那里设置一个种子点。对所有其他目标也这样做，你会得到一个 voroni 图。根据您所在的区域，您将移动到它的种子点。维奥拉，你得到了第一条鱼。现在重复这个步骤，直到你把它们都咳出来。

# events - Hammerjs 在 iPad 上的双重射击

> ID：15485474
> 
> 赞同：1
> 
> 时间：2013-03-18T19:42:02.877
> 
> 标签：events, angularjs, hammer.js

看到一个奇怪的问题，HammerJS + Angular 在“点击”时使事件双重触发。

源码/演示： [http ://plnkr.co/edit/yjtZsQjRPwiuc8FuM3SO?s=hi&p=preview](http://plnkr.co/edit/yjtZsQjRPwiuc8FuM3SO?s=hi&p=preview)

在计算机上，单击是一个事件。在 iPad 上，点击是两个事件。为什么？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-21T11:12:03.290

问题似乎源于 HammerJS 同时监听了 touchstart 和 mousedown 事件（查看hammer.js 中的第 351 行）。

更多信息请访问：[https ://github.com/EightMedia/hammer.js/issues/234](https://github.com/EightMedia/hammer.js/issues/234)

我建议你使用 angular-gestures 模块，我已经使用它并且没有遇到这个问题：[https ://github.com/wzr1337/angular-gestures](https://github.com/wzr1337/angular-gestures)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:09:12.647

所以这个问题与jquery有关。目前尚不清楚具体问题出在哪里，但没有使用 Hammer + JQuery 解决了这个问题。

# meteor - Meteor 管理面板包

> ID：15485483
> 
> 赞同：10
> 
> 时间：2013-03-18T19:42:33.300
> 
> 标签：meteor, meteorite

流星是否有后端管理面板，如“rais_admin”或“活动管理员”在 Rails 中用于模型下的 CRUD 操作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-08T22:14:28.920

第一届 Meteor Summer Hackathon 的一个团队编写了[z-mongo-admin](https://github.com/gterrono/meteor-admin-ui)包，它为您提供了一个用于基本 CRUD 操作的面板。这应该具有您正在寻找的功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T19:53:44.853

**2015 年 6 月 1 日更新**-[是，从 1.0.2 版开始](http://info.meteor.com/blog/meteor-102-meteor-shell)。`meteor`使用运行您的应用程序后，`meteor shell`在单独的选项卡中的同一目录中运行，您将拥有一个 REPL。

~~[还没有](https://stackoverflow.com/questions/14096785/does-meteor-have-a-repl)。您可以`meteor mongo`在应用程序目录中运行以访问数据库。目前，您需要运行该应用程序才能使其正常工作。~~

[Observatory](https://github.com/jhoxray/observatory)是一个新兴的日志记录和测试框架。也许某种 REPL 会适合未来。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-06T06:57:37.780

[Meteor Admin](https://github.com/yogiben/meteor-admin)是基于[Autoform](https://github.com/aldeed/meteor-autoform)包的 Houston 的替代品。

它根据您的集合模式提供完整的 CRUD。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-11T12:38:16.853

[Meteor Candy](https://www.meteorcandy.com)是专为 Meteor 制作的管理面板。这个想法是，每个人都以不同的方式构建他们的 Meteor 应用程序，但我们确实有共同点，例如使用 Accounts 包等，这是一个很好的起点。

该软件包使用 Meteor 1.5 中提供的动态导入，这意味着它几乎不会增加您的客户端捆绑包的重量。

披露：我是包的创建者

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-13T05:26:51.467

你应该试试休斯顿：[https ://github.com/gterrono/houston](https://github.com/gterrono/houston)

在此处观看视频演示： [https ://www.youtube.com/watch?v=8ASwWEZsAog](https://www.youtube.com/watch?v=8ASwWEZsAog)

# c# - EntityFramework - 为什么有这么多实体键？

> ID：15485485
> 
> 赞同：-1
> 
> 时间：2013-03-18T19:42:45.503
> 
> 标签：c#, entity-framework, edmx, ado.net-entity-data-model

我从我的 SQL Server 数据库创建了一个实体数据模型。尽管我的每个表中只有一个主键，但我的几乎所有属性都标记为实体键。我当然可以修改这些，但谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:49:42.470

默认情况下，它很可能已确定标记为键的列使条目唯一。它也会对导入的视图执行此操作。

也就是说，我已经导入了具有唯一约束和主键的表定义，并且没有看到这种行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:52:54.963

使用 Xml 编辑器打开 edmx 文件（右键单击解决方案中的 Edmx 文件并选择“打开方式...）。完成此操作后，您将在文件中看到 Xml 注释，说明无法使用现有键列的原因。通常是因为该列属于 EF 不支持的类型（例如 HierarchyId），因此该列不受支持，因此被排除在外。这样您最终会得到一个没有键列的表，并且将创建一个人工键在这种情况下，它由所有类型的列组成，这些列是键列的有效类型（例如，空间类型的列将从该列表中排除，因为它们不是有效的键列是 EF）

# sql-server - 优化 SQL UPDATE 语句/SqlCommand

> ID：15485488
> 
> 赞同：0
> 
> 时间：2013-03-18T19:42:52.373
> 
> 标签：sql-server, tsql, triggers, clr, sqlcommand

我有以下声明：

```
UPDATE Table SET Column=Value WHERE TableID IN ({0}) 
```

我有一个逗号分隔的 TableID 列表，它可能很长（用于替换 {0}）。我发现这比使用 SqlDataAdapter 更快，但是我也注意到如果命令文本太长，SqlCommand 可能会表现不佳。

有任何想法吗？

这是在 CLR 触发器内部。每个 SqlCommand 执行都会产生某种开销。我已经确定上述命令比 SqlDataAdapter.Update() 更好，因为 Update() 将更新单个记录，从而导致执行多个 SQL 语句。

...我最终做了以下事情（触发时间从 0.7 秒到 0.25 秒）

```
UPDATE T SET Column=Value FROM Table T INNER JOIN INSERTED AS I ON (I.TableID=T.TableID) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:01:36.967

如果这是一个存储过程，我将使用表值参数。如果这是一个临时批处理，那么请考虑填充一个临时表并在您的批处理中加入它。您的 IN 子句被合理化为一堆 OR，它们可以很容易地否定索引的使用。使用 JOIN，您可能会从优化器中获得更好的计划。

```
DECLARE @Value VARCHAR(100) = 'Some value';
CREATE TABLE #Table (TableID INT PRIMARY KEY);
INSERT INTO #Table VALUES (1),(2),(3),(n)...;
MERGE INTO Schema.Table AS target
USING #Table AS source
ON target.TableID = source.TableID
WHEN MATCHED THEN UPDATE SET Column = Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:46:03.313

当列表很长时，执行计划可能是使用索引扫描而不是索引查找。在这种情况下，您最好将列表限制为几个项目，但重复调用更新命令，直到列表中的所有项目都被容纳。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T19:46:49.467

将您的 ID 列表拆分为批次。我假设您有集合中的 id 编号列表，并且您正在构建`{0}`字符串。所以可能一次更新 20 或 100 个。

将其包装在事务中并在调用 Commit() 之前执行所有更新

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T19:51:53.277

如果可以使用存储过程，则可以改用`MERGE`语句。

```
MERGE INTO Table AS target
USING @TableIDList AS source
ON target.TableID = source.ID
WHEN MATCHED THEN UPDATE SET Column = source.Value 
```

哪里`@TableIDList`是从代码作为表值参数发送的[表类型](http://msdn.microsoft.com/en-us/library/bb522526%28v=sql.105%29.aspx)`ID`，其中包含您需要的s（可能还有`Value`s）。

# c# - 带有 getter 的属性总是返回 0

> ID：15485491
> 
> 赞同：2
> 
> 时间：2013-03-18T19:43:06.293
> 
> 标签：c#, asp.net-mvc, getter-setter

这让我大吃一惊。我有这个类具有以下属性：

```
public IEnumerable<QuestionModel> Questions { get; set; }

public int TotalQuestions
{
    get
    {
        return Questions.Count();
    }
}

public int TotalCorrect
{
    get
    {
        return Questions.Count( x => x.Correct );
    }
}

public int Score
{
    get
    {
        return ( TotalCorrect / TotalQuestions ) * 100;
    }
} 
```

以下是我在控制器中创建模型的方法：

```
var model = new QuizModel
    {
        Questions = new List<QuestionModel>
            {
                new QuestionModel
                    {
                        Correct = true
                    },
                new QuestionModel
                    {
                        Correct = false
                    }
            }
    }; 
```

TotalQuestions 等于 2。TotalCorrect 等于 1。但 Score 始终为 0。

我想也许分数是在设置其他属性之前设置的，所以我尝试了这个：

```
public int Score()
{
    return ( TotalCorrect / TotalQuestions ) * 100;
} 
```

我认为这会起作用，因为当我在视图中调用 Score() 时，肯定会设置其他属性。但它只返回 0。

我还尝试将 IEnumerable 更改为 IList。那里没有运气。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-18T19:44:31.440

> 这让我大吃一惊。

老兄。寒意。都很好。

> TotalQuestions 等于 2。TotalCorrect 等于 1。但 Score 始终为 0。

好吧，你自己算算。哪个整数最接近 1 / 2，向零舍入？显然为零。0乘以100等于多少？显然为零。所以答案是零。

问题是*您使用的是全整数算术*。整数除法四舍五入到最接近的整数，在您的方案中始终为零 - 除非正确答案的数量完全等于问题的总数，在这种情况下它是一。

为了解决这个问题，这里有两种技术，

*首先，您可以先*乘以 100 ，然后再进行除法。

```
return ( 100 * TotalCorrect )  / TotalQuestions; 
```

现在我们将 100 乘以 1，得到 100，然后除以 2，得到 50，完成。

或者您可以将其中一个整数转换为小数，以小数进行计算，然后在最后将其转换回整数：

```
public int Score()
{
    return (int)(( (decimal)TotalCorrect / TotalQuestions ) * 100);
} 
```

现在我们将 1 转换为 1.0m，除以 2 得到 0.5m，再乘以 100 得到 50.0m。然后将其转换为 int 以获得 50。

**注意**：使用*十进制*而不是*双精度*。如果这样做，您就不太可能遇到奇怪的舍入错误。请记住，十进制准确地表示分母包含 2 和 5 的任意组合的分数；double 仅准确表示分母是 2 的幂的分数。

如果您希望允许非整数分数，后一种算法可能更好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T19:45:02.557

您将整数除以整数，因此结果是整数。由于结果为 0.5，因此作为整数即为 0。

只需先将任一操作数转换为`double`（或`decimal`）：

```
( TotalCorrect / (double)TotalQuestions ) * 100; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T19:44:37.487

您正在划分整数，结果被截断为零。将第一个转换为浮点或双精度。

```
public int Score()
{
    return (int)(((float)TotalCorrect / TotalQuestions ) * 100);
} 
```

# ios - Ruby 到 Objective C 的桥接

> ID：15485495
> 
> 赞同：0
> 
> 时间：2013-03-18T19:43:21.077
> 
> 标签：ios, objective-c, ruby

我有一个条形码扫描仪设备及其适用于本机 iOS 的 SDK。我有代表设备的所有事件及其工作正常。但我必须在 Ruby 中创建一个应用程序才能访问外部附件。如果有人知道如何编写 Ruby 到 Objective-C 桥，请分享一些技巧。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:47:48.053

你看过 RubyMotion 项目吗？

它旨在与 Ruby 和 iOS 一起使用。

[http://www.rubymotion.com/](http://www.rubymotion.com/)

# excel - "=+IF(...)" 在 Excel 中有什么作用吗？

> ID：15485499
> 
> 赞同：3
> 
> 时间：2013-03-18T19:43:37.173
> 
> 标签：excel, excel-formula

我正在为客户自动化一个大型 Excel 电子表格，并且我不断在他们的公式中遇到一个奇怪的结构。几乎所有的`IF`函数都有如下公式：

```
=+IF(<cond1>,"text",IF(<cond2>,1,2)) 
```

注意`+`开头的，紧跟在等号之后。起初我认为它是虚假的，但它确实被广泛使用（数百个地方）。然后我想可能是强制Excel将结果解释为数字，但大多数使用它的地方都是`IF`函数，它们的大部分结果值都返回非数字文本。

有谁知道这是否真的在 Excel 公式中起作用？

（Excel 2007，如果重要的话）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T19:46:46.083

据我对 Excel 的了解，它并没有做任何事情。它主要是 Lotus 123 时代的遗留物。它非常无害，并且不会以任何方式改变公式的操作，所以如果有可能你需要放弃它，它完全没问题。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T02:36:03.260

我已经转换了一些 Lotus 123 文档`+`。一个简单的搜索（for `+`）和替换（用空格）可以让我们所有人的强迫症平静下来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-27T03:45:31.397

根据我的经验，这是因为`=`符号离数字键盘太远，`+`当我想输入公式时使用符号更容易。

# php - PHP MySQL查询仅输出一个二元素数组

> ID：15485515
> 
> 赞同：1
> 
> 时间：2013-03-18T19:44:48.753
> 
> 标签：php, mysql, arrays, fetch

我刚刚用 SQL 查询做了一个快速的小脚本。现在当我去 phpmyadmin 并执行

```
SELECT name FROM players WHERE online='1' ORDER BY name ASC 
```

它输出所需的玩家（ 0TheMonk, Player, Veeve ）

但是使用 PHP：

```
$query=mysql_query("SELECT name FROM players WHERE online='1' ORDER BY name ASC");
$query_array=mysql_fetch_array($query);
echo implode(',',$query_array); 
```

它呼应：0TheMonk，0TheMonk

代替：0TheMonk，Player，Veeve

它总是输出数组中的第一个玩家，两次。我究竟做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:46:27.510

使用`while`循环

```
$query=mysql_query("SELECT name FROM players WHERE online='1' ORDER BY name ASC");
while($query_array=mysql_fetch_array($query))
{
    echo $query_array['name'].",";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:50:42.760

试试这个：与 Sumits 的答案几乎相同。

```
$res    = array();
$query=mysql_query("SELECT name FROM players WHERE online='1' ORDER BY name ASC");
while($query_array=mysql_fetch_array($query))
{
    $res[]   = $query_array['name'];
}

echo implode(",",$res); 
```

在这种情况下，不会有额外`,`的 ens

# web-services - Tomcat 6 上的 Jersey RESTful 部署

> ID：15485516
> 
> 赞同：0
> 
> 时间：2013-03-18T19:44:59.877
> 
> 标签：web-services, rest, jersey, tomcat6

我正在使用以下设置在 Tomcat 6 上部署 REST Web 服务，它可以工作：

```
<web-app>  
  <servlet>  
    <servlet-name>RestServlet</servlet-name>  
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>  
    <load-on-startup>1</load-on-startup>  
  </servlet>  
  <servlet-mapping>  
    <servlet-name>RestServlet</servlet-name>  
    <url-pattern>/*</url-pattern>  
  </servlet-mapping>  
</web-app> 
```

通过上述设置，Tomcat 会扫描`WEB-INF/classes`和`WEB-INF/lib`文件夹中的资源。

然后我将其更改为以下设置以使用`Application`子类：

```
<web-app>  
  <servlet>  
    <servlet-name>RestServlet</servlet-name>  
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>  
    <init-param>  
           <param-name>javax.ws.rs.Application</param-name>  
            <param-value>test.MyApplication</param-value>  
    </init-param>  
    <load-on-startup>1</load-on-startup>  
  </servlet>  
  <servlet-mapping>  
    <servlet-name>RestServlet</servlet-name>  
    <url-pattern>/*</url-pattern>  
  </servlet-mapping>  
</web-app> 
```

返回资源类`test.MyApplication`的子类在哪里：`Application`

```
public class MyApplication extends Application {
  public Set<Class<?>> getClasses() {
    Set<Class<?>> s = new HashSet<Class<?>>();
    s.add(MyResource.class);
    return s;
  }
} 
```

但是服务器仍然会扫描`WEB-INF/classes`并`WEB-INF/lib`寻找资源。

我错过了什么？在设置子类`WEB-INF`时服务器是否仍然扫描？`Application``web.xml`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:23:19.887

> 在 web.xml 中设置 Application 子类时，服务器是否仍然扫描 WEB-INF？

不，它没有。[该文档解释说](http://jersey.java.net/nonav/apidocs/latest/jersey/com/sun/jersey/spi/container/servlet/ServletContainer.html)，如果不存在与资源配置相关的初始化参数（如 ），则完成扫描路径`javax.ws.rs.Application`。

您应该看到服务器日志中的内容。当 Jersey 初始化时，它会记录它正在做的事情，并且对于类路径扫描，它会打印如下内容：

> INFO：在 Web 应用程序资源路径中扫描根资源和提供程序类：
> /WEB-INF/lib
> /WEB-INF/classes

当你提供一个`Application`类时，它会打印这个：

> INFO：实例化应用程序类 test.MyApplication

您应该确保`web.xml`在服务器启动时部署了正确的文件。也许您仍然部署了旧版本。

# php - php标题正则表达式

> ID：15485519
> 
> 赞同：0
> 
> 时间：2013-03-18T19:45:10.880
> 
> 标签：php, regex

我正在尝试使用此正则表达式将标题标签从`|title|Page title|`to替换。`<title>Page Title</title>`但是作为一个完全的业余爱好者，它并不顺利。

```
'^|title|^[a-zA-Z0-9_]{1,}|$' => '<title>$1</title>' 
```

我很想知道如何解决它，更重要的是，我做错了什么以及为什么会出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:08:56.720

你几乎明白了：

*   你应该逃避 | 字符，因为它们在正则表达式中具有特殊含义，并且您将其用作普通字符。
*   您应该将空格字符添加到您的搜索组

    ```
    $string = '|title|Page title|';
    $pattern = '/\|title\|([a-zA-Z0-9_ ]{1,})\|/';
    $replacement = '<title>$1</title>';
    echo preg_replace($pattern, $replacement, $string); //echoes <title>Page title</title> 
    ```

查看工作[**演示**](http://codepad.org/jkB2HLAH)

OP 在评论中发布了一些错误的代码，试试这个版本：

```
$regular_expressions = array( array( '/\|title\|([a-zA-Z0-9_ ]{1,})\|/' , '<title>$1</title>' )); 
foreach($regular_expressions as $regexp){
   $data = preg_replace($regexp[0], $regexp[1], $data); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:59:24.110

这是我不久前想出的一个小功能，当用户通过我的服务提交链接时，它基本上可以抓取页面的标题。该函数的作用是获取提供的 URL 的内容。寻找一个标题标签，如果找到，获取标题标签之间的内容并转储它的结果。稍作调整，我相信您可以使用替换方法进行任何操作，并使其满足您的需求。所以这更像是一个起点，而不是一个答案，但总的来说，我希望它在一定程度上有所帮助。

```
$url = 'http://www.chrishacia.com';
function get_page_title($url){

    if( !($data = file_get_contents($url)) ) return false;
    if( preg_match("#<title>(.+)<\/title>#iU", $data, $t))  {
        return trim($t[1]);
    } else {
        return false;
    }
}
var_dump(get_page_title($url)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T20:09:20.467

```
<?php
    $s = "|title|Page title|";

    $s = preg_replace('/^\|title\|([^\|]+)\|/', "<title>$1</title>", $s);

    echo $s;
?> 
```

# python - 类外的python装饰器方法

> ID：15485520
> 
> 赞同：-4
> 
> 时间：2013-03-18T19:45:11.813
> 
> 标签：python, methods, decorator

嗨，我正在尝试让默认呼叫说“ nate 在课堂上”

我希望能够用默认值包装类的方法，以便开发人员不必再次设置默认值。

但以下代码给了我一个错误：

```
Traceback (most recent call last):
File "", line 18, in 
File "", line 9, in rtn
UnboundLocalError: local variable 'var1' referenced before assignment 
```

我已经尝试了大约一个小时，但我似乎无法让它工作。

这是代码：

```
class Bob(object):

    def bob(self,var1='bob',var2=' is in the class'):
    print var1,var2

def defalter(func):
    def rtn(self=None,*args, **kwargs):
        if not var1:
            var1 = 'nate'  
    return rtn

b = Bob()

r = defalter(b.bob) 
r() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:50:26.603

这似乎是一个坏主意，但以下工作：

```
class Bob(object):

    def bob(self,var1='bob',var2=' is in the class'):
        print var1,var2

def defalter(func):
    func.im_func.func_defaults = ('nate',) + func.im_func.func_defaults[1:]
    return func

b = Bob()

r = defalter(b.bob) 
r() 
```

我很确定 python3.x 上的属性名称会发生​​变化，但我现在没有足够的动力去查找它们更改为的内容;-)。如果您知道，请随时编辑。

请注意，这将更改所有`Bob`s 的功能，而不仅仅是`b`. 目前还不清楚你是否想要...

如果您不想为所有`Bob`实例更改它，您可以使用这个：

```
def defalter(func):
    def new_func(var1='nate',**kwargs):
        return func(var1=var1,**kwargs)

    return new_func 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T19:56:32.993

你有一些误解。首先，您的装饰器在被装饰函数*之前*被调用，因此它无法访问该函数的局部变量。其次，即使确实如此，为它们分配新值也不会改变其他地方的变量。第三，装饰器负责调用底层函数，如果这是它想要做的。你的装饰器从不调用底层函数，所以它不能利用它的行为。

这是一种方法：

```
class Bob(object):
    def bob(self,var1='bob',var2=' is in the class'):
        print var1,var2

def defalter(func):
    def rtn(var1='nate', *args, **kwargs):
        func(var1, *args, **kwargs)
    return rtn

>>> r = defalter(b.bob)
>>> r()
nate  is in the class 
```

我不确定你为什么稍后显式地进行装饰，而不是实际装饰类中的方法。此外，如果用户将参数传递给`r`. 我这样做的方式基本上只是`var1`用“nate”替换了默认值。

# python - 文件打开和文件保存

> ID：15485521
> 
> 赞同：0
> 
> 时间：2013-03-18T19:45:21.207
> 
> 标签：python, file, save

我在查找有关如何在给定文件夹中打开文件以进行读取以及如何将输出文件保存到给定文件夹的正确文档时遇到问题。如果有人可以向我解释或指出正确的方向，我将不胜感激。

我必须打开一个带有标签的单词文件，每行一个单词及其标签，我将使用它来检查我的代码，然后我必须使用文本文件和我的代码创建一个类似的文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T19:51:33.510

[与http://docs.python.org](http://docs.python.org)成为好朋友

其次，我建议参加 f.ex 的基础课程。 [http://www.codecademy.com/tracks/python](http://www.codecademy.com/tracks/python)

# python - Python线程和信号量

> ID：15485524
> 
> 赞同：6
> 
> 时间：2013-03-18T19:45:42.027
> 
> 标签：python, python-multithreading

我有一个 python 类，我们称之为 AClass 和另一个扩展 Thread 的 MyThread。在那个 AClass 中，我创建了 MyThread 类的 2 个对象，并且我还有一个信号量，我将它作为参数提供给 MyThread 类的构造函数。我的问题是，如果我修改一个 MyThread 对象中的信号量，另一个 MyThread 对象会看到差异吗？前任：

```
class AClasss:

     def function: 
          semafor = threading.Semaphore(value=maxconnections)
          thread1 = Mythread(semafor)
          thread2 = Mythread(semafor)
          thread1.start()
          thread1.join()
          thread2.start()
          thread2.join()

 class MyThread(Thread):
     def __init__(self,semaphore):
         self.semaphore = semaphore
     def run():
        semaphore.acquire()
        "Do something here" 
        semaphore.release() 
```

那么 thread1 是否看到 thread2 对信号量所做的更改，反之亦然？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T19:54:09.690

这就是信号量的目的，它们允许您安全地同步并发进程。

请记住，除非您释放 GIL（执行 IO、调用库等），否则Python 中的线程不会*真正让您获得并发性。*如果这就是你想要的，你可能需要考虑`multiprocessing`图书馆。

# java - Java 扫描器 + 排序

> ID：15485529
> 
> 赞同：0
> 
> 时间：2013-03-18T19:45:49.670
> 
> 标签：java, sorting

好的，第一次发帖，耶！现在我知道这个话题已经被打死了。但这里的问题是：

> 编写一个程序，从文本文件中读取以空格分隔的单词并按升序显示单词。（如果两个词相同，则只显示一个）。从命令行传递文本文件名。假设文本文件只包含由空格分隔的单词。

现在我已经弄清楚了文件部分的读数。但是我如何“从命令行传递文件名”？然后是唯一性因素。

帮助？

编辑：谢谢你们的帮助。这是我现在的立场：

```
import java.io.*;
import java.util.*;

public class Splittext {
    public static void main(String[] args) {
        String fileName = args[0];
        Scanner s = null;

        try {
            s = new Scanner(new BufferedReader(new FileReader(fileName)));
                while (s.hasNext()) {
                    System.out.println(s.next());
                }
            } catch (FileNotFoundException fnfe) {
            System.exit(0);
        } finally {
               if (s != null) {
                   s.close();
                }
            }

       TreeSet<String> ts = new TreeSet<String>();

       ts.add(s);

       Iterator it = ts.iterator();

       while(it.hasNext()) {
           String value = (String)it.next();
           System.out.println("Result :" + result);
        }
    }        
} 
```

但这会产生：没有合适的方法添加（java.util.Scanner）；方法 java.util.TreeSet.add(java.lang.String) 不适用。

对不起菜鸟问题！真的很感激帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T19:49:26.610

这样做。

```
public static void main(String args[]) {
    String fileName = args[0];
    Scanner s = null;

    try {
        s = new Scanner(new BufferedReader(new FileReader(fileName));

        while (s.hasNext()) {
            System.out.println(s.next());
        }
    } finally {
        if (s != null) {
            s.close();
        }
    }
} 
```

像这样运行

```
java classname readthisfile.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:49:31.613

> 但是我如何“从命令行传递文件名”？

```
public static void main(String args[])
{
    final String filename = args[0];
    // ...
} 
```

> 然后是唯一性因素。

和排序因素。

1.  将所有单词插入[`TreeSet`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html).
2.  遍历它并打印值。它们将被分类且独一无二。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T19:49:50.730

当您启动应用程序时，您的`main`函数已`String[] args`传递给它，这是您访问输入参数的地方。

例如：

```
java -cp . my.class.Example Happy Days 
```

会看到 Example 类收到这个：

```
public static void main(String[] args) {
  // args.length == 2
  // args[0] = "Happy"
  // args[1] = "Days"
} 
```

# fortran - 如果某些数据包含空格，如何读取逗号分隔的数据文件

> ID：15485531
> 
> 赞同：2
> 
> 时间：2013-03-18T19:45:55.653
> 
> 标签：fortran, fortran95

我正在尝试读取使用逗号作为分隔符的数据文件，如下所示

```
IPE 80,764,80.14,8.49
IPE 100,1030,171,15.92 
```

但是，如果我阅读使用

```
READ(1,*) var1, var2, var3, var4 
```

它将 IPE 和 80 读取为不同的数据。换句话说，它将逗号和空格都计为分隔符，但我不想要这个。我如何告诉我的程序“嘿，空格不是分隔符，只有逗号！” ?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T20:06:18.660

一种可能性是将整行读入字符串缓冲区，然后自己查找（某些）分隔符。假设与您的示例类似，只有第一列包含空格，您可以这样做：

```
program test
  implicit none

  character(1024) :: buffer
  character(20) :: var1
  integer :: pos, var2
  real :: var3, var4

  read(*,"(A)") buffer
  pos = index(buffer, ",")
  var1 = buffer(1:pos-1)
  read(buffer(pos+1:), *) var2, var3, var4
  print *, var1, var2, var3, var4

end program test 
```

这样，您可以手动拆分受空格影响的字符串部分，以及您通过`read`语句轻松读取的所有其他内容。如果不仅第一个字段而且其他字段都可以包含空格，那么很容易扩展上面的示例以通过`index()`函数在缓冲区中查找所有必要的分隔符。

# javascript - Javascript爆炸问题

> ID：15485535
> 
> 赞同：0
> 
> 时间：2013-03-18T19:46:03.260
> 
> 标签：javascript, jquery

我正在运行一个 ajax 查询并返回 JSON，其中一个结果是一个名为`image.comment`eg

```
test~63~Dave Sanders~http://graph.facebook.com/998433599/picture?type=large~Dave Sanders~9 minutes ago 
```

我`~`用作分隔符

可能有多个类似的数据集由`----`in分隔，`image.comment`以便解析数据并将其添加到我正在使用的 DOM 中：

```
if(image.comment){

        html += '<div class="msgs_holder'+image.list_id+'">';

        // split comment at ----        
        var comString = image.comment;
        var comArray = comString.split("----");

        var lengthArray = comArray.length,
        element = null;

        for (var i = 0; i < lengthArray; i++) {
            element = comArray[i];

            // split indiv comment at ~     
            var comUserString = element;
            var comUserArray = comUserString.split("~");

            html += '<div class="msgs_row"><div class="msgs_pic"><a href="/'+comUserArray[4]+'"><img src="'+comUserArray[3]+'"></a></div>';
            html += '<div class="msgs_comment"><a href="/'+comUserArray[4]+'" style="text-decoration:none;"><span class="msgs_name">'+comUserArray[2]+'</span></a> '+comUserArray[0]+'<br><span class="msgs_time" title="'+comUserArray[5]+'">'+comUserArray[5]+'</span></div></div>';

        }

        html += '</div>';

    } 
```

但是页面无法加载，firefox firebug 告诉我：`allocation size overflow`

这仅发生在列中有数据的 JSON 行`comment`上

我怀疑有些可能是无限循环但看不到

我检查了查询，它运行良好，所以不是

这是在js中爆炸的最佳方式吗？

有任何想法吗？

**更多信息**我这样做的原因是它是一个更大的查询的一部分。加载到页面的图像，每个图像下都有评论。因此，我将评论加载到要解析的列中以供显示。

例子：

```
Image 1        Image 2        Image 3                       etc etc etc
hey                           i think its great!
hey back!                     me too
                              I'm not sure 
```

**更多信息 2**此数据取自 MySQL 查询，例如

```
select w.img_width, w.img_height, w.prod_pic_url as preview3,
        GROUP_CONCAT(ww.comment,'~', h.user_id,'~', h.name,'~', 
        h.live_prof_pic,'~', h.twovo_url,'~', time_ago(ww.dateadded) SEPARATOR '----') AS comment 
        from tableName where blah=blah 
```

GROUP_CONCAT 是上面提到的评论部分

那么，将 JSON 用于数据中的数据，这可能吗？如果有怎么办？

返回数据示例：

```
"preview3":"http:\/\/myurl.com\/wish_images\/production\/3578.jpg","comment":"test~63~Dave Sanders~http:\/\/graph.facebook.com\/Dave Sanders\/picture?type=large~Dave Sanders~39 minutes ago"},{"item_id":"3559","numComms":"0","numLikes":"0"... etc etc 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T20:03:39.873

这不适合发表评论，所以我将尝试写下我认为人们关于使用 JSON 而不是字符串的说法：

这个：

```
test~63~Dave Sanders~http://graph.facebook.com/998433599/picture?type=large~Dave Sanders~9 minutes ago 
```

可以变成这样：

```
[
    {
        'name': 'test',
        'id': 63,
        'name': 'Dave Sanders',
        'url': 'http://graph.facebook.com/998433599/picture?type=large',
        'when': '9 minutes ago'
        // other properties
    },
    {
        // the next one
    },
    {
        // etc.
    }
] 
```

它可能看起来需要更多的工作，但您可以使用一些 JSON 库用于 php（我猜，因为您使用术语“explode”）在服务器上构建 JSON。然后，您返回的内容已经以一种形式供您基于浏览器的客户端应用程序使用，无需额外的努力。我发现很难想象这最终会比您尝试对字符串操作所做的工作更多，而且 JSON 可能不那么脆弱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T20:25:21.803

根据您更新的问题...

您仍然可以为此使用 JSON。我认为它可能会帮助您阅读[JSON 规范](http://www.json.org/)

添加到 Chris Farmer 的答案中，JSON 也可以由数组组成，因此您可以在响应中嵌套您的评论：

```
var response = [
  {
    'name': 'test',
    'id': 63,
    'name: 'Dave Sanders',
    'url': 'http://graph.facebook.com/998433599/picture?type=large',
    'comments' : [
       'comment1',
       'comment2',
       'comment3',
       ...
    ]
  },
  ...
] 
```

然后，您可以像这样循环浏览评论：

```
// loop through the images
for ( var i = 0;  i < response.length; i++ ) {

    var image = response[i];

    // loop through the comments
    for ( var z = 0;  z < response.length; z++ ) { 
        var comment = image.comments[z];
        // insert HTML here.
    }
} 
```

您是否看到这比您当前的方法更容易和更少冗长？

不幸的是，从长远来看，为了让自己更容易做到这一点，您**将**不得不重新编写后端代码。但是，这将教您使用 JSON 传输信息的好处和力量。

# javascript - 如何判断脚本当前是否处于活动状态？

> ID：15485538
> 
> 赞同：0
> 
> 时间：2013-03-18T19:46:06.800
> 
> 标签：javascript, jquery

我有这个`jQuery`脚本，`#rightbox-content`当你按下时会显示`#friends`。

如果它已经处于活动状态，我该如何“逆转”它？

例如，当我单击`#friends`然后`#friends`再次单击时，它将隐藏`#rightbox-content`.

**我的代码：**

```
$("#friends").click(function () {
  $("#rightbox-content").fadeIn(250);
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T19:47:01.243

您可以为此使用 jQuery 的[fadeToggle()](http://api.jquery.com/fadeToggle/)。

例如，在您的情况下，它将是以下内容：

```
$("#friends").click(function () {
  $("#rightbox-content").fadeToggle(250);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T19:49:11.713

尝试这个

```
$("#friends").click(function () {
 $("#rightbox-content"). fadeToggle(250);
}); 
```

# php - PHP MySQL调用过程并继续

> ID：15485541
> 
> 赞同：1
> 
> 时间：2013-03-18T19:46:15.180
> 
> 标签：php, mysql, stored-procedures

我有一个在我的登台机器上运行的 php 脚本，它将一个 xml 文件处理到我的数据库中，然后调用一些 MySQL 程序，这些程序用于通过一堆查询来清理数据。

我有一些程序变得越来越庞大并且需要几个小时才能运行（这就是它在分期中完成的原因）。

有没有办法让 PHP 调用这些程序而不等待结果移动到脚本的其余部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:59:55.777

由于您使用的是网络界面，因此有可能。您可以尝试实现以下逻辑

1.  每个“长 mysql 函数”一个 php 脚本
2.  使用 AJAX 处理每个 php 脚本，因此您可以根据需要同时启动任何脚本。服务器将并行化负载。

告诉我你的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:09:35.900

PHP 不支持核心并发。但是您可以使用以下方法模拟类似的行为。

**1\. fsockopen() 和 ignore_user_abort('1')**

您可以创建与另一个脚本的套接字连接，该脚本随后在后台运行。请看以下两个脚本。主脚本创建到子脚本的套接字连接并立即关闭它。子脚本运行直到所有任务完成。这是因为 ini 值“ignore_user_abort”设置为 1。

主文件

```
<?php
$start = microtime(true);
$host = 'localhost';
$target = '/sub.php';
$fp = fsockopen($host, 80);
$request  = "GET $target HTTP/1.1\r\n";
$request .= "Host: $host\r\n";
$request .= "Connection: Close\r\n\r\n";
fwrite($fp, $request);
fclose($fp);
file_put_contents("main", "Script runs " . (microtime(true) - $start) . " seconds"); 
```

子.php

```
<?php
$start = microtime(true);
ignore_user_abort("1");
sleep(5);
file_put_contents("sub", "Script runs " . (microtime(true) - $start) . " seconds"); 
```

* * *

**2.在后台通过命令行启动脚本**

您可以在后台通过 unix/linux 或 windows 命令行启动脚本。以下示例适用于 unix/linux 命令行。要通过 Windows 命令行启动脚本，请参阅 PHP.net 站点上的以下注释。[http://www.php.net/manual/en/function.exec.php#110131](http://www.php.net/manual/en/function.exec.php#110131)

主文件

```
<?php
$start = microtime(true);
pclose(popen("/usr/bin/php "  . __DIR__ . "/sub.php " . __DIR__ . "//sub.log 2>&1 &", 'r'));
file_put_contents("main", "Script runs " . (microtime(true) - $start) . " seconds"); 
```

子.php

```
<?php
$start = microtime(true);
sleep(5);
file_put_contents("sub", "Script runs " . (microtime(true) - $start) . " seconds"); 
```

* * *

**以下扩展在 PHP 中提供了真正的并发性：**

> pthreads 是一个面向对象的 API，它允许 PHP 中的用户级多线程。它包括创建针对 Web 或控制台的多线程应用程序所需的所有工具。PHP 应用程序可以创建、读取、写入、执行以及与线程、Worker 和 Stackables 同步。

[http://www.php.net/manual/en/book.pthreads.php](http://www.php.net/manual/en/book.pthreads.php)

# ruby-on-rails - Rails：如何按关联的模型特征对数组进行排序？

> ID：15485546
> 
> 赞同：0
> 
> 时间：2013-03-18T19:46:31.840
> 
> 标签：ruby-on-rails, activerecord, associations

我有一个有很多电话号码的用户模型。电话号码属于在数据库中创建的电话类型（例如办公室、家庭、手机）。

phone_type.rb：

```
class PhoneType < ActiveRecord::Base

#  id              :integer          not null, primary key
#  name            :string(255)
#  position        :integer          default(1)

  default_scope :order => 'position ASC'
  default_scope where(:active => true) 
```

我一直在尝试编写一个显示用户电话号码的 ActiveRecord 查询，但其顺序由 phone_type.position 为 phone_types 设置的顺序确定。

我的旧代码是：

```
<% @phones.each do |p| %>
    <%= p.phone_type.name %> <%= p.value %> <br/>
<% end %> 
```

但只是按表 ID 顺序显示电话号码。编写更复杂查询的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T19:59:01.570

试试这个：

```
@phones = Phone.all(:include => :phone_type)  #To avoid N+1 queries

<% @phones.sort_by{|p| p.phone_type.position}.each do |p| %>
  <%= p.phone_type.name %>
  <%= p.value %> <br/>
<% end %> 
```

# c# - 如何在 LightSwitch 的 WCF RIA 服务中创建一对一关系？

> ID：15485547
> 
> 赞同：0
> 
> 时间：2013-03-18T19:46:33.053
> 
> 标签：c#, wcf-ria-services, visual-studio-lightswitch, lightswitch-2012

我对 WCF RIA 服务和 Microsoft LightSwitch 的理解已经走了很长一段路，但现在我不知所措。我将使用`Animal`和`Dog`作为示例。我实际上想要一个*零或*一对一的关系，并不是每个动物都一定是/有狗。

首先，我在我想与 RIA 服务一起使用的数据库中创建一个一对一的关系。然后像往常一样更新我的 RIA 服务项目中的 Model.edmx 文件。问题不是这让我可以`ObjectContext.Dogs`像我期望的那样访问，它不存在，而是 Animal 被赋予了 Dog 的额外属性。显然，一对一的关系是以这种方式特别处理的，这*似乎*是有帮助的，但我很难以这种方式处理它。

我的 RIA 服务类如下所示：

```
public class RiaDog
{
    [Key]
    public int Id { get; set; }

    public int PackLeaderId { get; set; }

    [Association("RiaAnimal_RiaDog", "Id", "Id", IsForeignKey = true)]
    public RiaAnimal Animal { get; set; }
}

public class RiaAnimal
{
    [Key]
    public int Id { get; set; }

    [Association("RiaAnimal_RiaDog", "Id", "Id", IsForeignKey = false)]
    public RiaDog Dog { get; set; }
} 
```

除非有某种我不知道的神奇的一对一数据注释属性，否则我必须为每个其他类`RiaDog`编写CRUD 方法。`RiaAnimal`鉴于 ObjectContext.Dogs 不存在这一事实，这变得非常尴尬，我必须通过 Animal 工作：

```
[Query(IsDefault = true)]
public IQueryable<RiaDog> GetAllDogs() {
    var report = from animal in ObjectContext.Animals
                    where animal.PackLeader != null
                    select new RiaDog
                    {
                        Id = animal.Id,
                        PackLeaderId = animal.Dog.PackLeaderId,
                    };
    return report;
} 
```

这已经感觉很奇怪了，我必须在 Dog 属性之一上使用 where 子句来隔离狗。

通过一些简单的创意，我可以获得插入、更新和删除方法的功能：

```
public void InsertDog(RiaDog riaDog) {
    var animal = ObjectContext.Animals.FirstOrDefault(a => a.Id == riaDog.Id);
    animal.PackLeader = ObjectContext.PackLeaders.FirstOrDefault(pl => pl.Id == riaDog.PackLeaderId);
    riaDog.Animal.Dog = riaDog;
}

public void UpdateDog(RiaDog rd) {
    var animal = ObjectContext.Animals.FirstOrDefault(a => a.Id == riaDog.Id);
    animal.PackLeader = ObjectContext.PackLeaders.FirstOrDefault(pl => pl.Id == riaDog.PackLeaderId);
}

public void DeleteDog(RiaDog rd) {
} 
```

在`UpdateAnimal()`我使用我设置的反向引用`InsertDog()`并添加：

```
if (riaAnimal.Dog == null)
    riaAnimal.PackLeader = null; 
```

我也将 Dog 设置为与数据库上的 Animal 级联删除。

在 LightSwitch 前端，我在 RiaDog 实体上有这个：

```
partial void AnimalType_Changed() {
    if (AnimalType != null && AnimalType.Name == "Dog" && this.Dog == null)
        this.Dog == new RiaDog();
    else if (this.Dog != null && (AnimalType == null || AnimalType.Name != "Dog"))
        this.Dog = null;
} 
```

我遇到的问题是，如果我将类型更改为 Dog，保存，将其更改回其他内容，保存，然后再次将其更改为 Dog 并保存，我会收到错误消息：`The context is already tracking a different entity with the same resource Uri.`

* * *

我学会了处理其他跟踪错误：

*   在代码隐藏客户端中创建实体时，它们需要唯一的 ID 才能在客户端正确跟踪。

*   在 WCF RIA Services 中的任何插入方法中，实体的客户端 ID 必须在数据库生成后设置为真实 ID，例如：

```
public void InsertRiaEntity(RiaEntity re) {
    var entity = new Entity();
    entity.SomeProperty = re.SomeProperty;
    entity.AnotherProperty = re.AnotherProperty;
    ObjectContext.Entities.AddObject(entity);
    ObjectContext.SaveChanges();
    // essential for client<->server tracking
    re.Id = entity.Id;
} 
```

* * *

但是我不知道如何解决这个当前的跟踪错误。真的，我觉得我采取了错误的方法，我正在寻找专家的建议，了解您应该如何在 WCF RIA Services for Microsoft中编写一对一或*一对一或一对一或零*对一的关系灯开关。

*实际上，我已经设法使这一切都与一对多的关系一起工作，并且简短而合理的代码看起来“正确”，因此这种变化应该是可以实现的。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:12:33.223

LightSwitch 实际上并不支持一对一的关系，因此即使您在 RIA 服务中取得了成功，它也不会在 LightSwitch 中起作用。

解决方法是创建具有多重零对多或一对多的关系（正如您最终所做的那样）。您必须在验证或代码中“强制”一对一。

# bash - 逐行读取文件时读取bash脚本中文件的最后一行

> ID：15485555
> 
> 赞同：10
> 
> 时间：2013-03-18T19:46:55.463
> 
> 标签：bash

我正在编写一个脚本来从文件中读取命令并执行特定命令。我希望我的脚本适用于单个输入参数或当参数是包含相关参数的文件名时。

我下面的代码工作除了一个问题，它忽略了文件的最后一行。所以，如果文件如下。

文件.txt

```
file1
file2 
```

下面发布的脚本仅运行 file.txt 的命令

```
for currentJob in "$@"
do
    if [[ "$currentJob" != *.* ]]  #single file input arg
    then
        echo $currentJob
        serverJobName="$( tr '[A-Z]' '[a-z]' <<< "$currentJob" )"  #Change to lowercase
                                                                   #run cURL job
        curl -o "$currentJob"PisaInterfaces.xml http://www.ebi.ac.uk/msd-srv/pisa/cgi-bin/interfaces.pisa?"$serverJobName"
    else  #file with list of pdbs
        echo "Reading "$currentJob
        while read line; do
            echo "-"$line
            serverJobName="$( tr '[A-Z]' '[a-z]' <<< "$line" )"
            curl -o "$line"PisaInterfaces.xml http://www.ebi.ac.uk/msd-srv/pisa/cgi-bin/interfaces.pisa?"$serverJobName"
        done < "$currentJob"
    fi
done 
```

当然，有一个明显的工作是在 while 循环之后我重复循环内部的步骤以使用最后一个文件完成这些命令，但这是不可取的，因为我在 while 循环中所做的任何更改都必须再次重复在while循环之外。我在网上四处搜索，找不到任何人问这个精确的问题。我确定它在那里，但我还没有找到它。

我得到的输出如下。

```
>testScript.sh file.txt
Reading file.txt
-file1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  642k    0  642k    0     0   349k      0 --:--:--  0:00:01 --:--:--  492k 
```

我的 bash 版本是 3.2.48

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-18T21:02:33.247

听起来您的输入文件在最后一行之后缺少换行符。当`read`遇到这种情况时，它将变量（`$line`在这种情况下）设置为最后一行，但随后返回一个文件结尾错误，因此不会为最后一行执行循环。要解决此问题，您可以在`read`成功时执行循环，*或者*将任何内容读入`$line`：

```
...
while read line || [[ -n "$line" ]]; do
    ... 
```

编辑：`||`在while条件中是所谓的短路布尔值——它尝试第一个命令（`read line`），如果成功，它会跳过第二个（`[[ -n "$line" ]]`）并通过循环（基本上，只要`read`成功，它就像您的原始脚本一样运行）。如果失败，它`read`会检查第二个命令`[[ -n "$line" ]]`（成功了，循环再运行一次。`read``$line``while`

在处理完最后一个未终止的行之后，它将再次运行测试。这次，`read`将失败（它仍然在文件末尾），并且由于这次`read`没有读取任何内容，因此测试*也*将失败，因此整个条件失败并且循环终止。`$line``[[ -n "$line" ]]`*`while`*

 *EDIT2： 这`[[ ]]`是一个 bash 条件表达式——它不是一个常规命令，但它可以用来代替一个。它的主要目的是根据它内部的条件成功或失败。在这种情况下，如果操作数 ( ) 为 NONempty ，则`-n`测试意味着成功。[这里](http://mywiki.wooledge.org/BashGuide/TestsAndConditionals#Conditional_Blocks_.28if.2C_test_and_.5B.5B.29)`"$line"`有其他测试条件的列表，以及该命令的手册页。`test`

请注意，条件表达式`[[ ... ]]`与测试命令略有不同`[ ... ]`——请参阅[BashFAQ #031](http://mywiki.wooledge.org/BashFAQ/031)了解差异和可用测试列表。它们都不同于带有 的算术表达式`(( ... ))`，并且完全不同于带有`( ... )`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T19:59:24.513

您的问题似乎是文件中缺少回车符。

如果你 cat 你的文件，你需要看到最后一行成功出现在提示之前。

否则尝试添加：

```
 echo "Reading "$currentJob
    echo >> $currentJob #add new line
    while read line; do 
```

强制文件的最后一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-14T04:38:20.873

使用`grep`while 循环：

```
while IFS= read -r line; do
  echo "$line"
done < <(grep "" file) 
```

使用`grep .`而不是`grep ""`将跳过空行。

笔记：

1.  使用`IFS=`使任何行缩进保持不变。

2.  [您几乎应该始终将 -r 选项与 read 一起使用。](http://mywiki.wooledge.org/BashFAQ/001)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-22T13:14:42.633

我发现了一些读取文件的代码，包括最后一行，并且在没有 [[ ]] 命令的情况下工作：

[http://www.unix.com/shell-programming-and-scripting/161645-read-file-using-while-loop-not-reading-last-line.html](http://www.unix.com/shell-programming-and-scripting/161645-read-file-using-while-loop-not-reading-last-line.html)

```
DONE=false
until $DONE; do
    read s || DONE=true
    # you code
done < FILE 
```*

# c# - Windows 应用商店应用程序中的 SOAP 编码

> ID：15485561
> 
> 赞同：4
> 
> 时间：2013-03-18T19:47:14.990
> 
> 标签：c#, visual-studio, soap, windows-store-apps

我正在尝试创建一个使用 Web 服务的 Windows 应用商店应用程序。Visual Studio 拒绝创建服务代理方法，并在日志中显示以下警告：

> 自定义工具警告：Contract ... 与 Windows 应用商店应用程序不兼容，因为它包含一个或多个使用 SOAP 编码的操作（use='encoded'）。只会生成非编码操作。

所以问题是：

在哪里可以找到有关 Web 服务使用的 Windows 应用商店应用程序限制的完整列表？
是否有任何已知的解决方法（鉴于我无法更改服务）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:51:17.147

如果您无法更改 Web 服务，因为任何包装器最有可能是 SOAP 编码的方式，并且 SOAP 工具包不允许太多的输出定制，您似乎已经搞砸了。

也许编写一个（可能在功能上重复的）基于 web.api 的 web 服务是一个更好的解决方案？有关[示例，请参见此链接](http://www.c-sharpcorner.com/UploadFile/c25b6d/create-a-web-api-and-consume-it-in-the-windows-8-apps/)

编辑：回应第一条评论......

是与否；本质上是创建一个 REST（是否是 webapi、WCF 等取决于您）包装器。

请参阅以下有关创建 REST 包装器的信息性帖子：

[有用的帖子编号 1](https://stackoverflow.com/questions/6620706/creating-a-rest-wrapper-to-an-existing-soap-web-service)和[有用的帖子编号 2](https://stackoverflow.com/questions/11352998/building-rest-wrapper-over-an-existing-soap-web-service)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-29T18:08:07.093

您可以创建一个 NETStandard 类库来引用 Web 服务，然后将此库引用到您的 Web 项目。

# c# - 如何删除双引号内的双引号

> ID：15485566
> 
> 赞同：3
> 
> 时间：2013-03-18T19:47:36.863
> 
> 标签：c#, vb.net

我有一个问题，不知道该怎么做。

问题：我需要删除双引号内的双引号

* * *

字符串示例：

"迈克·雅尼克","412 A AVE "E",","NADIEN PA",","190445468"

如您所见，"412 A AVE "E" 中的字母 E 有一个额外的双引号。

* * *

我需要删除它。

这是我的结果应该是：

"迈克·雅尼克","412 A AVE E",","纳迪恩 PA","","190445468"

* * *

*   我不能使用表达式，因为模式每次都会改变。
*   string.replace 不起作用，因为您需要对值进行硬编码
*   在双引号之间读取值不起作用，因为它被中间的引号抛出

请帮忙...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T19:54:11.427

你可以使用这样的正则表达式：

```
(?<!(^|,))"(?!(,|$)) 
```

这将匹配任何`"`没有以字符串开头或逗号开头且后面没有逗号或字符串结尾的双引号 ( )。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T20:01:50.680

这适用于您的示例：

```
Regex.Replace("\"MIKE YANICK\",\"412 A AVE \"E\",\" \",\"NADIEN PA\",\" \",\"190445468\"",
    "(?<=\")([^,]*)(?=\")",
    m => m.Value.Replace("\"", string.Empty)) ; 
```

输出：

```
"MIKE YANICK","412 A AVE E"," ","NADIEN PA"," ","190445468" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T20:02:14.287

只使用替换呢？

就像是：

```
string test = "\"MIKE YANICK\",\"412 A AVE \"E\",\" \",\"NADIEN PA\",\" \",\"190445468\"";
string[] fields = test.Split(new char[] {','});
StringBuilder result = new StringBuilder();
bool first = true;

foreach (var field in fields)
{
    if(first)
    {
        first = false;
    }
    else
    {
            result.Append(",");
    }

    result.AppendFormat("\"{0}\"", field.Replace("\"",""));
}

Console.WriteLine (string.Format("Old : {0} New: {1}", test,result.ToString())); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T19:54:19.303

我要做的是，寻找`",`. 如果引号不在逗号旁边，请删除引号。

# python - 在 Windows 上为 OSX 构建包（Python 3.3，tkinter）

> ID：15485567
> 
> 赞同：0
> 
> 时间：2013-03-18T19:47:37.437
> 
> 标签：python

鉴于代码是独立于平台编写的，当我在 Windows 上并且包已经在那里成功构建时，如何为 MAC OS 构建一个包？我可以`python setup.py bdist_msi`在 windows 上使用，但不能`python setup.py bdist_dmg`，因为我不在 MAC 上。该怎么办？

Python 3.3、tkinter、cxFreeze、Windows 8。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:06:06.573

我很确定 OSX 构建工具（XCode 等）只存在于 Apple 平台上，而且 Apple 没有将它们移植到 Windows 的商业理由。

所以可能的答案是“购买 Mac”。

# asp.net-mvc - EF多对多奇怪行为

> ID：15485568
> 
> 赞同：0
> 
> 时间：2013-03-18T19:47:42.687
> 
> 标签：asp.net-mvc, entity-framework, many-to-many

只有 EF 多对多的问题 :( 一切都适用于我的模型，但在添加这行代码之前，我无法对多对多实体执行 CRUD

```
modelBuilder.Entity<Advert>()
                   .HasMany(a => a.WhoAmILookingForTags)
                   .WithMany(a => a.Adverts)
                   .Map(at =>
                   {
                       at.ToTable("AdvertTags");
                       at.MapLeftKey("AdvertId");
                       at.MapRightKey("TagId");
                   }); 
```

广告也与竞争和用户有关

```
 modelBuilder.Entity<Advert>().HasRequired(u => u.User);
 modelBuilder.Entity<Advert>().HasRequired(c => c.Competition); 
```

当我打开 ServerExplorer 并查看 Advert 的 TableData 时，我看到 Advert 和 User 和 Competition 之间存在连接（字段 CompetitionId 和 UserId 不为空）并且表 AdvertTags 包含 Adverts 和 Tags 的键但是在查看时我尝试显示 model.user .name（广告模型）字段为空（标签和比赛相同）

例如，当在控制器中我这样做：

```
Advert advert = db.Adverts.Find(id);

        if (advert == null)
        {
            return HttpNotFound();
        } 
```

在视图中，我执行模型 => model.User.Name 并运行应用程序，用户名字段中没有显示任何内容。

但是当我迭代所有广告并写下smth。像这样。

```
database.Adverts.Include(a => a.User).Include.(a => a.Competition)
           .Include(a => a.WhoWhoAmILookingForTags) 
```

一切都很好。

我希望我足够清楚。

# c - 在makefile中没有获取变量的分配

> ID：15485570
> 
> 赞同：0
> 
> 时间：2013-03-18T19:47:44.263
> 
> 标签：c, linux, makefile, variable-assignment

我正在使用一个makefile，其中有一行

```
VAR=$(MVAR) command1; 
```

现在，当 command1 执行时，我希望 VAR 保留 MVAR 分配的值，这是成功完成 command1 所必需的。但不幸的是，VAR 在执行 command1 时包含一些默认值，即 VAR 在执行 command1 时无法保持分配期间分配的值。

如果我在任何 shell 中运行相同的命令，则保留 VAR 的值并且 command1 成功执行。

几乎尝试了一切在makefile上运行它。有人可以解释一下 gnu makefile 中这种行为背后的原因和可能的解决方案。我使用 Linux 作为操作系统，使用 ksh 作为 Makefile 的外壳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:59:38.773

如果您在谈论规则中的命令，只需添加（或移动）一个分号：

```
VAR=$(MVAR); command1 
```

但我怀疑可能涉及更多。如果这不起作用，请给我们更多的上下文（例如 makefile 和一些关于 的信息`command1`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:02:38.930

您是否尝试过 VAR:=$(MYVAR)？（即`:=`代替`=`）

这迫使 VAR 立即被赋值，而不是被懒惰地评估。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T22:39:46.793

您希望`MYVAR`设置什么样的东西？如果它包含对 shell 有意义的空格或其他字符，那么您正在执行的操作将不起作用。您可以尝试引用它：

```
 VAR='$(MVAR)' command1 
```

看看是否效果更好。

此外，这取决于您的 shell 是标准 POSIX bourne-shell 衍生工具（sh、bash、ksh、zsh 都符合条件；Windows cmd 处理器没有）。

# php - cURL 使用 Mime 类型检查将文件保存到服务器

> ID：15485573
> 
> 赞同：0
> 
> 时间：2013-03-18T19:48:11.150
> 
> 标签：php, curl, mime-types, fopen

我正在为我的团队创建一个内部工具，允许受信任的团队成员通过 php 和 curl 将远程文件保存到我们的服务器。我的打开、写入和关闭工作完美，但我想在创建和写入本地文件之前添加一个检查以确保文件是某种 mime 类型。

基于一组 mime 类型，我怎么能做到这一点？

```
$ch = curl_init();
$fp = fopen($local_file, 'w+');
$ch = curl_init($remote_file);
curl_setopt($ch, CURLOPT_TIMEOUT, 50);
curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_ENCODING, "");
curl_exec($ch);
curl_close($ch);
fclose($fp); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:56:27.037

我通过在文件传输后通过 fileinfo 检查 mime 解决了这个问题。如果它不是有效的 mime 类型，那么我将其删除。

```
$ch = curl_init();
$fp = fopen($local_file, 'w+');
$ch = curl_init($remote_file);
curl_setopt($ch, CURLOPT_TIMEOUT, 50);
curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_ENCODING, "");
curl_exec($ch);
curl_close($ch);
fclose($fp);

$finfo = new finfo(FILEINFO_MIME);
$mime_type = $finfo->file($local_file);

if (strpos($mime_type, 'application/xml') === false) {
    unlink($local_file);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:07:39.153

例如：

```
$ch = curl_init('http://static.php.net/www.php.net/images/php.gif');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_exec($ch);

$mime = curl_getinfo($ch, CURLINFO_CONTENT_TYPE); 
```

in`$mime`具有 mime 类型的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T20:14:41.517

棘手！您可以先下载整个文件（到内存或临时文件夹中。）如果您想流式传输它，您可能必须：

1.  设置 CURLOPT_HEADER 以在您返回的数据中包含 HTTP 响应标头

2.  设置 CURLOPT_WRITEFUNCTION 而不是 CURLOPT_FILE，读取并解析 http 标头以查看 mime 类型，然后决定是否要创建/写入文件。

显然，这是一项相当多的工作，因为您必须对 HTTP 标头进行一些基本解析，并且可能需要缓冲以一次获取整个 HTTP 标头。

希望有人会发布一个更简单的解决方案。

伪代码：

```
state = headers
buf = ''
fd = null
func writefunc(ch, data)
   if state is headers
      buf .= data
      div = buf.strpos "\r\n\r\n"
      if div !== false
         mime = get_mime buf, div
         if mime_ok mime
            fd = fopen ...
            fd.write buf.substr div+4
            state = saving
         else
            # returns other than data.length() abort connection
            return 0
  else
     fd.write data
  return data.length() 
```

# jquery - 销毁 jquery ui 手风琴

> ID：15485574
> 
> 赞同：0
> 
> 时间：2013-03-18T19:48:14.783
> 
> 标签：jquery, user-interface

如果里面没有 li 元素，如何销毁 jquery ui 手风琴？这种情况是我在我的手风琴 li 元素中，点击时用户可以删除这些元素。如果用户已经删除了所有现有元素，则应销毁手风琴。

html

```
<div id="catalog">
<h4 id="my_id" ><a href="#"></a></h4>       
<div>
<ul class="ul_class">
<li class="ui-state-default ui-corner-all" id="li_id1">element_1
<span id="add" class="ui-icon ui-icon-circle-plus" style="float:right"></span>
</li>
<li class="ui-state-default ui-corner-all" id="li_id2">element_1
<span id="add" class="ui-icon ui-icon-circle-plus" style="float:right"></span>
</li>
</ul>
</div>
</div> 
```

jQuery

```
jQuery("span#add").live("click", function(){
    html = html.replace('<span style="float:right" id="add" class="ui-icon ui-icon-circle-plus">','<span style="float:right" id="remove" class="ui-icon ui-icon-circle-minus">');
    var param =  $(this).parent().closest('li').attr("id");

    jQuery(this).parent().animate(
            {
                'margin-left':'1000px'
            },1000,
            function(){
                var ul_class = $(this).parent().attr('class');
                $(this).slideUp('fast');              
                $("ul."+ ul_class + "_clone").append('<li id="'+ param +'">' + html + '</li>');
                $(this).remove();

            }
            );
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:51:52.127

```
if ( ! $('#myAccordion').find('li').length ) {
    $('#myAccordion').accordion('destroy');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:52:49.460

要销毁 jQuery UI 小部件，请选择初始化它的元素，然后使用参数“destroy”调用插件。

```
$("#accordion").accordion("destroy"); 
```

# c# - xml 文档中的 findnext() 方法

> ID：15485579
> 
> 赞同：0
> 
> 时间：2013-03-18T19:48:27.920
> 
> 标签：c#, xml, find

还有一个关于 xml 文档的问题。所以，我想通过消息正文（文本）查找消息，我写了 find() 方法：

```
public void find(string searchText)
{
    XmlNodeList smss = xmlDoc.SelectNodes("//sms");
    searchText = txtFind.Text;

    foreach (XmlNode sms in smss)
    {
        if (sms.Attributes["body"].InnerText.Contains(searchText))
        {
            txtName.Text = sms.Attributes["body"].InnerText +
                           sms.Attributes["time"].Value;
            break;
        }
    }
} 
```

此方法查找包含搜索字符串的第一条消息并将其写入 txtName 文本框。现在，我想找到包含相同字符串的下一条消息并将其添加到 txtname 文本框，换句话说，我想编写 findNext() 方法。我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:14:49.870

您可以使用 for 循环并存储计数器的状态，然后从 XMLNodeList 中跳转计数器元素并从那里重新开始搜索，例如：

```
//Assumes i is declared somewhere else 
for (i ; i < smss.Count; i++)
{
    if (smss[i].Attributes["body"].InnerText.Contains(searchText))
    {
        txtName.Text = smss[i].Attributes["body"].InnerText +
                       smss[i].Attributes["time"].Value;
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:51:32.503

我不太确定您是否正在寻找类似的东西，但希望以下示例可以帮助您

```
Private Sub CommandButton1_Click()
If OptionButton1 Then
Dim MyValue, MyFindNext
    [A1].Select
    MyValue = TextBox1.Value

    On Error GoTo err_Trap
    Cells.Find(What:=MyValue, After:=ActiveCell, LookIn:=xlValues, LookAt:= _
        xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:=False).Activate

    MyFindNext = vbYes
    Do Until MyFindNext <> vbYes
    MyFindNext = MsgBox("Would you like to find the next instance of " & MyValue & "?", _
        vbYesNo, "Find Next")
        If MyFindNext = vbNo Then
        Unload UserForm1
        Exit Sub
        End If
    Cells.FindNext(After:=ActiveCell).Activate
    Loop
    On Error GoTo 0
    Exit Sub
End If

If OptionButton2 Then
    [A1].Select
    MyValue = TextBox1

    On Error GoTo err_Trap
    Cells.Find(What:=MyValue, After:=ActiveCell, LookIn:=xlFormulas, LookAt:= _
        xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:=False).Activate

    MyFindNext = vbYes
    Do Until MyFindNext <> vbYes
    MyFindNext = MsgBox("Would you like to find the next instance of " & MyValue & "?", _
        vbYesNo, "Find Next")
        If MyFindNext = vbNo Then
        Unload UserForm1
        Exit Sub
        End If
    Cells.FindNext(After:=ActiveCell).Activate
    Loop
    On Error GoTo 0
    Exit Sub

err_Trap:
    If Err.Number = 91 Then
        MsgBox "Could not find " & MyValue & " anywhere on this sheet.", , "Search failed"
    Else
        MsgBox Err.Number & ": " & Err.Description
    End If
End If
End Sub 
```

有关更多信息，请参阅此链接

[http://www.knowexcel.com/view/931222-findnext-method-help-.html](http://www.knowexcel.com/view/931222-findnext-method-help-.html)

# javascript - 如何检测移动Safari全局方向旋转动画

> ID：15485584
> 
> 赞同：3
> 
> 时间：2013-03-18T19:48:53.093
> 
> 标签：javascript, iphone, css, mobile-safari

您好我正在尝试在移动 Safari 旋转到不同方向时触发事件。我知道`orientationchange`这是不可接受的，因为它是在播放方向旋转动画并设置新方向**后调用的。**我有一个元素需要在动画之前或期间隐藏。

我试图在方向改变之前捕捉状态，特别是在动画播放之前。我尝试将`webkitAnimationStart`和之类的事件`animationstart`应用于`window`，但似乎都没有被触发。希望我忽略了一些东西。`document``document.body`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-14T05:24:48.537

据我所知，这是几乎所有移动浏览器中都会出现的问题，并且没有直接的解决方案。

[Chrome 团队在他们的博客上发布的](https://developers.google.com/web/fundamentals/media/mobile-web-video-playback)**关于设备方向更改的解锁屏幕**下发布的一个半官方建议是使用`deviceorientation`和模拟浏览器在内部执行的操作来确定设备的方向：

```
var previousDeviceOrientation, currentDeviceOrientation;
  window.addEventListener('deviceorientation', function onDeviceOrientationChange(event) {
    // event.beta represents a front to back motion of the device and
    // event.gamma a left to right motion.
    if (Math.abs(event.gamma) > 10 || Math.abs(event.beta) < 10) {
      previousDeviceOrientation = currentDeviceOrientation;
      currentDeviceOrientation = 'landscape';
      return;
    }
    if (Math.abs(event.gamma) < 10 || Math.abs(event.beta) > 10) {
      previousDeviceOrientation = currentDeviceOrientation;
      // When device is rotated back to portrait, let's unlock screen orientation.
      if (previousDeviceOrientation == 'landscape') {
        screen.orientation.unlock();
        window.removeEventListener('deviceorientation', onDeviceOrientationChange);
      }
    }
  }); 
```

Chrome 团队使用此代码的特定用例是在使用后获取设备的方向`screen.orientation.lock`（禁用方向更改事件）。

这可以概括为方向变化事件的替代品，在动画开始之前为您提供轻微的时间优势。

棘手的部分是确定浏览器决定切换方向的正确角度范围（您不想在浏览器实际上不切换方向时开始动画）。

`screen.orientation.lock`解决此问题的一种方法是使用基本上设置阈值并相应地锁定方向的位置来完全控制方向变化。

然而，由于世界并不完美，`screen.orientation.lock`只能在全屏模式或独立网络应用程序中工作......如果您希望您的应用程序成为全屏体验或独立网络应用程序，那么您很幸运。

# c++ - 异常情况下关闭线程

> ID：15485585
> 
> 赞同：0
> 
> 时间：2013-03-18T19:48:54.060
> 
> 标签：c++, windows, multithreading, sdk

多线程问题：

# 在 C++ 和 Windows SDK 中：

是否可以关闭引发任何内存损坏的线程。我想对内存损坏实施尝试捕获。我想关闭线程而不会对主线程和整个过程造成任何损害。

仅供参考 - 此内存异常未发生在主线程中。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T19:56:27.033

如果一个线程破坏了内存（除非它是堆栈，或者每个线程的私有堆），那么尝试隔离线程就没有什么价值了。大多数堆损坏都会产生连锁反应，使整个进程不稳定，因为所有线程通常共享进程堆。更糟糕的是，事情最终如何以及何时分崩离析将是不可预测的。

您的开发资源最好用于修复错误，而不是尝试减轻其副作用。如果这确实表现为失败线程中的可重现异常，则[Process Dumper](http://www.microsoft.com/en-us/download/details.aspx?id=4060)可能有助于从问题出现时生成进程映像快照。

# objective-c - 解锁应用内购买的指南/建议

> ID：15485586
> 
> 赞同：1
> 
> 时间：2013-03-18T19:49:00.260
> 
> 标签：objective-c, app-store, in-app-purchase

我正在寻找一些关于从应用内购买中解锁内容的最佳方式的建议/指南。

我有一个 100 个单词的列表。我有分成25个单位。25 个单元中的第一个单元是免费的，其余 3 个单元可以在您通过应用内购买购买后解锁。不会下载任何内容。

所有 100 个字当前都存储在一个数组中。

在购买者购买一个单位后，我希望该特定部分可用。

因此，如果他们购买单元 3，那么单词列表应该包括单元 1 和单元 3。

实现这一点的最佳方法是什么？我应该使用 4 个不同`NSArrays`的单词集吗？`NSArray`然后只用购买的单词加载大师？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:56:05.803

对于最低限度，您可以使用四个`NSArray`s，然后在`NSMutableArray`购买时将它们添加到一个。并用于`NSUserDefaults`为每个可能的购买存储一个布尔值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:55:27.597

我不知道我是否正确理解了你的问题。

也许您可以将所有内容放入一个大数组中并拥有一个`max_available_index`. 每次购买都会增加该指数。永远不允许用户访问超出此最大索引的项目。

如果您的单位大小为 25，则购买 3 个单位会使单位增加`max_available_index`75。

# xslt - for-each 并使用 xslt 对 xml 进行排序和分组

> ID：15485588
> 
> 赞同：1
> 
> 时间：2013-03-18T19:49:02.570
> 
> 标签：xslt, xslt-1.0, xslt-grouping

我有一个如下的 XML。对于每个测试，我需要对 cat 和 title 和 group 进行排序。对于 cat 值 abc，我需要获取标题并设置值。任何集合值都符合在集合节点内按升序添加标题值的需要。在这里，我确实对 cat 值进行了硬编码。但在我的场景中，cat 值是从外部源获取的。

```
<?xml version="1.0" encoding="utf-8" ?>
<compound>
  <test>
    <title>k</title>
    <cetval>
      <cat>abc</cat>
      <cat>fcg</cat>
    </cetval>
    <value>1</value>
    <set>
      <color>blue</color>
    </set>
  </test>
  <test>
    <title>p</title>
    <cetval>
      <cat>fcg</cat>
      <cat>klm</cat>
    </cetval>

    <value>10</value>
    <set>
      <color>pink</color>
    </set>
  </test>
  <test>
    <title>j</title>
    <cetval>
      <cat>fcg</cat>
      <cat>klm</cat>
      <cat>abc</cat>
    </cetval>
    <value>484</value>
    <set>
      <color>yellow</color>
    </set>
  </test>
  <test>
    <title>v</title>
    <cetval>
      <cat>dji</cat>
      <cat>kfjsdlk</cat>
    </cetval>
    <value>93</value>

  </test>
  <test>
    <title>r</title>
    <cetval>
      <cat>deiu</cat>
      <cat>kfjdf</cat>
      <cat>abc</cat>
    </cetval>
    <value>10</value>
    <set>
      <color>blue</color>
    </set>
    <test>
      <title>i</title>
      <cetval>
        <cat>fcg</cat>
        <cat>klm</cat>
        <cat>abc</cat>
      </cetval>

      <value>10</value>

    </test>
    <test>
      <title>w</title>
      <cetval>
        <cat>diweif</cat>
        <cat>fjf</cat>
        <cat>abc</cat>
      </cetval>
      <value>10</value>
      <set>
        <color>yellow</color>
      </set>
    </test>
  </test>

</compound> 
```

我需要如下输出：

```
<?xml version="1.0" encoding="utf-8" ?>
<compound>
  <cat>abc</cat>
  <set>
    <color>blue</color>
    <title>k</title>
    <title>r</title>
  </set>
  <set>
    <color>yellow</color>
    <title>j</title>
    <title>w</title>
  </set>
  <title>i</title>

</compound> 
```

我的变换如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="/">
      <xsl:for-each select="compound/test">
        <xsl:sort select="./cetval/cat" order="ascending"/>
        <xsl:sort select="./title" order="ascending"/>
        <xsl:for-each select="./cetval/cat">
          <xsl:choose>
            <xsl:when test="./cat = 'abc' > 0">

              <xsl:value-of select="ancestor::test/title"/>

            </xsl:when>
          </xsl:choose>
        </xsl:for-each>

        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

有人可以建议我如何生成所需的输出吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:33:04.563

好的，我想我已经理解了您的要求。这个怎么样：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes" />
  <xsl:key name="kColor" match="test" use="set/color" />
  <xsl:param name="catValue" select="'abc'" />

  <xsl:template match="/*">
    <xsl:copy>
      <cat>
        <xsl:value-of select ="$catValue"/>
      </cat>
      <xsl:apply-templates 
        select="//test[generate-id() = 
                       generate-id(
                            key('kColor', set/color)
                                  [cetval/cat = $catValue][1]
                                  )
                      ]" />
      <xsl:apply-templates 
        select="//test[cetval/cat = $catValue and not(set/color)]
                      /title">
        <xsl:sort select="."/>
      </xsl:apply-templates>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="test">
    <set>
      <xsl:apply-templates select="set/color" />
      <xsl:apply-templates
        select="key('kColor', set/color)[cetval/cat = $catValue]/title">
        <xsl:sort select="." />
      </xsl:apply-templates>
    </set>
  </xsl:template>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

这里`$catValue`被指定为参数，因此您可以从外部传入不同的值。在您的示例 XML 上运行时，结果是：

```
<compound>
  <cat>abc</cat>
  <set>
    <color>blue</color>
    <title>k</title>
    <title>r</title>
  </set>
  <set>
    <color>yellow</color>
    <title>j</title>
    <title>w</title>
  </set>
  <title>i</title>
</compound> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:33:54.563

**更短更简单**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kTestByCat" match="test" use="cetval/cat"/>
 <xsl:key name="kTestByColor" match="test[cetval/cat='abc']"
      use="set/color"/>

 <xsl:template match="/">
  <compound>
    <cat>abc</cat>
      <xsl:apply-templates select=
      "/*/*[generate-id()
           =
            generate-id(key('kTestByColor',set/color)[1])]"/>
  </compound>
 </xsl:template>

 <xsl:template match="test">
  <set>
   <color><xsl:value-of select="set/color"/></color>
   <xsl:copy-of select="key('kTestByColor',set/color)/title"/>
  </set>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<compound>
    <test>
        <title>k</title>
        <cetval>
            <cat>abc</cat>
            <cat>fcg</cat>
        </cetval>
        <value>1</value>
        <set>
            <color>blue</color>
        </set>
    </test>
    <test>
        <title>p</title>
        <cetval>
            <cat>fcg</cat>
            <cat>klm</cat>
        </cetval>
        <value>10</value>
        <set>
            <color>pink</color>
        </set>
    </test>
    <test>
        <title>j</title>
        <cetval>
            <cat>fcg</cat>
            <cat>klm</cat>
            <cat>abc</cat>
        </cetval>
        <value>484</value>
        <set>
            <color>yellow</color>
        </set>
    </test>
    <test>
        <title>v</title>
        <cetval>
            <cat>dji</cat>
            <cat>kfjsdlk</cat>
        </cetval>
        <value>93</value>
    </test>
    <test>
        <title>r</title>
        <cetval>
            <cat>deiu</cat>
            <cat>kfjdf</cat>
            <cat>abc</cat>
        </cetval>
        <value>10</value>
        <set>
            <color>blue</color>
        </set>
        <test>
            <title>i</title>
            <cetval>
                <cat>fcg</cat>
                <cat>klm</cat>
                <cat>abc</cat>
            </cetval>
            <value>10</value>
        </test>
        <test>
            <title>w</title>
            <cetval>
                <cat>diweif</cat>
                <cat>fjf</cat>
                <cat>abc</cat>
            </cetval>
            <value>10</value>
            <set>
                <color>yellow</color>
            </set>
        </test>
    </test>
</compound> 
```

**产生了想要的正确结果：**

```
<compound>
   <cat>abc</cat>
   <set>
      <color>blue</color>
      <title>k</title>
      <title>r</title>
   </set>
   <set>
      <color>yellow</color>
      <title>j</title>
      <title>w</title>
   </set>
</compound> 
```

**如果您想为 的*所有*差异值产生类似的结果`cat`，那么它又是简短而简单的**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kCatByVal" match="cat" use="."/>
 <xsl:key name="kColorByVal" match="color" use="."/>
 <xsl:key name="kTestByCat" match="test" use="cetval/cat"/>

 <xsl:variable name="vDistinctColors" select=
  "/*/*/set/color[generate-id()=generate-id(key('kColorByVal',.)[1])]"/>

 <xsl:template match="/">
  <xsl:apply-templates select=
   "/*/*/cetval/cat
        [generate-id()
        = generate-id(key('kCatByVal',.)[1])]"/>
 </xsl:template>

 <xsl:template match="cat">
  <xsl:variable name="vcurCat" select="."/>
  <compound>
    <cat><xsl:apply-templates/></cat>
    <xsl:for-each select="$vDistinctColors">
     <xsl:apply-templates select=
      "(key('kCatByVal',$vcurCat)/../../set/color[.=current()])[1]">
       <xsl:with-param name="pCat" select="$vcurCat"/>
      </xsl:apply-templates>
    </xsl:for-each>
  </compound>
 </xsl:template>

 <xsl:template match="color">
  <xsl:param name="pCat"/>

  <xsl:copy-of select="."/>
  <xsl:copy-of select="key('kTestByCat',$pCat)[set/color=current()]/title"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于同一个 XML 文档（上图）时，现在的结果是：**

```
<compound>
   <cat>abc</cat>
   <color>blue</color>
   <title>k</title>
   <title>r</title>
   <color>yellow</color>
   <title>j</title>
   <title>w</title>
</compound>
<compound>
   <cat>fcg</cat>
   <color>blue</color>
   <title>k</title>
   <color>pink</color>
   <title>p</title>
   <color>yellow</color>
   <title>j</title>
</compound>
<compound>
   <cat>klm</cat>
   <color>pink</color>
   <title>p</title>
   <color>yellow</color>
   <title>j</title>
</compound>
<compound>
   <cat>dji</cat>
</compound>
<compound>
   <cat>kfjsdlk</cat>
</compound>
<compound>
   <cat>deiu</cat>
   <color>blue</color>
   <title>r</title>
</compound>
<compound>
   <cat>kfjdf</cat>
   <color>blue</color>
   <title>r</title>
</compound> 
```

# delphi - 更新 RAD XE2 后缺少快速报告类

> ID：15485592
> 
> 赞同：0
> 
> 时间：2013-03-18T19:49:22.490
> 
> 标签：delphi

我刚刚将 RAD XE2 更新到了最新的服务包。我无法使用内部的快速报告内容编译我的应用程序。编译时的错误显示“未找到 frxclass.dcu”。这似乎是 [FAST REPORT ISSUE之类的问题](https://stackoverflow.com/questions/14158064/fastreport-4-0-claas-tfrxreport-not-found-exception-rad-studio-xe2)

这是更新 XE2 的错误还是我在执行更新过程时做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:54:20.637

XE2 和 XE3 会出现此问题。我有 FR 专业的源代码，并且已经完成了几次安装，每一次都遇到了问题。我认为这是包含的 FR 版本和许可版本之间的不兼容。我的解决方案是彻底的： 1\. 进入控制面板并删除任何和所有 FR 安装。2\. 进入程序文件文件夹并手动删除所有 FR 文件夹。3\. 在 Delphi IDE 中进入选项、库并定位和删除对快速报告路径的任何引用。4\. 进入 IDE 安装包选项并确保没有对 FR 包的引用。5\. 退出 IDE，现在使用提供的安装程序安装 FR。完成后，您应该能够正常启动 IDE 而不会出现 frClass 错误。

# ssl - 将 OpenID 与 SSL 和金融交易一起使用的安全方面

> ID：15485594
> 
> 赞同：1
> 
> 时间：2013-03-18T19:49:25.650
> 
> 标签：ssl, paypal, e-commerce, openid, oauth-2.0

我正在设计一个网络/移动应用程序，该应用程序可以聚合并自定义呈现来自 3rd 方网络服务的爱好/生活方式相关数据（第 1 阶段）。如果该网站受欢迎，我计划出售相关的运动装备（第 2 阶段）。

我对第 1 阶段比较陌生，`OpenID/OAuth`并计划在第 1 阶段使用它，就像 Stackexchange 一样，因为安全问题相对较低——用户配置文件数据不包含任何财务数据，并且大部分只包含可以轻松重建的用户偏好。`OpenID/OAuth`但是，考虑到会有财务和个人数据，我不愿意用于第 2 阶段。

**Q1：**`OpenID/OAuth`有没有网站在存储用户财务和个人数据的同时 成功安全实施的例子？

**Q2：** 如果网站只是临时使用CC/PayPal数据，即用户每次交易都要重新输入敏感信息，没有存储，使用OpenID/OAuth是否更适用，风险更小？

**Q3：** 这种认证/授权架构是否有可能获得 SSL 证书？

**奖励：** 即使 A1 是肯定的（或假设技术演变为适用），您是否预计最终用户不会信任将其财务数据外包身份验证的网站（这更像是一个心理问题）？

**有关的：**

[有什么理由不使用 OpenID？](https://stackoverflow.com/questions/410085/what-reasons-are-there-not-to-use-openid)

[带有自签名证书的 OpenID Over SSL](https://stackoverflow.com/questions/131091/openid-over-ssl-with-self-signed-certificate)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:13:41.053

1.  谷歌有 OAuth/OpenID 服务，也存储财务信息
2.  出于安全原因，您应该对任何敏感信息进行额外验证
3.  SSL 仅验证当有人想要访问您的网站时，他们实际上是在访问您的网站。OpenID 和 OAuth 不会影响获得 SSL 证书的能力

# model - cakephp 2.x find() 还是没有 find()？

> ID：15485597
> 
> 赞同：0
> 
> 时间：2013-03-18T19:49:35.337
> 
> 标签：model, cakephp-2.0

在我的控制器中，我有以下代码：

```
$this->paginate = array(
            'Restaurant' => $this->Restaurant->geoRest($lat, $lng, $radius1, $limit)
        );
$this->set('restaurants',$this->paginate()); 
```

该模型有一个名为 geoRest() 的函数和内部的一些选项，最后是以下代码： return $options;

一切正常。

但：

如果我想在模型中像这样使用 find('all', $options) 怎么办：

```
$rests = array();
$rests = $this->find('all', $options);
return $rests; 
```

我收到一条错误消息：

```
Warning (2): Illegal offset type [CORE/Cake/Model/Model.php, line 2709] 
```

我想我应该使用 find() 来获得正确的 cakephp 代码，对吗？但正确的解决方案是什么？

# sql-server - 子查询不返回所有结果 T-SQL

> ID：15485600
> 
> 赞同：0
> 
> 时间：2013-03-18T19:49:41.337
> 
> 标签：sql-server, tsql

我有一个不返回我正在寻找的结果的子查询。在我的情况下，我有 3 个位置并不总是具有日期范围的订单计数，并且它们没有返回结果为 0。相反，我丢失了这些部分的所有其他数据。我确信有更好的方法来查询数据，所以这是我的查询。

```
SELECT b.Part, b.Location, b.Last_12_Mo, b.Last_6_Mo,
           COUNT(sd.SBINV) AS Order_Count
      FROM (
            SELECT a.Part, a.Location, a.Last_12_Mo,
                   ISNULL(SUM(sd.SBQSHP), 0) AS Last_6_Mo
              FROM (
                    SELECT t3.Part, sd.SBLOC AS Location, ISNULL(SUM(sd.SBQSHP),0) AS Last_12_Mo
                      FROM Top300 t3
                      LEFT JOIN SalesData sd 
                        ON t3.Part   = sd.SBITEM
                       AND sd.SBINDT > '20120315'
                     GROUP BY t3.Part, sd.SBLOC
                    ) AS a 
              LEFT JOIN SalesData sd
                ON a.Part       = sd.SBITEM
               AND sd.SBINDT    > '20121015'
             GROUP BY a.Part, a.Location, a.Last_12_Mo
            ) AS b 
      LEFT JOIN SalesData sd
        ON b.Part       = sd.SBITEM
       AND sd.SBINDT    > '20130110'
     GROUP BY b.Part, b.Location, b.Last_12_Mo, b.Last_6_Mo
     ORDER BY b.Part, b.Location 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:57:04.210

尝试这个

```
SELECT t3.Part, sd.SBLOC AS Location, 
ISNULL(SUM(CASE WHEN sd.SBINDT > '20120315' THEN sd.SBQSHP ELSE 0 END),0) AS Last_12_Mo,
ISNULL(SUM(CASE WHEN sd.SBINDT > '20121015' THEN sd.SBQSHP ELSE 0 END),0) AS Last_6_Mo,
COUNT(CASE WHEN sd.SBINDT > '20130110' THEN sd.SBINV END) AS Order_Count
FROM Top300 t3
LEFT JOIN SalesData sd  ON t3.Part   = sd.SBITEM
GROUP BY t3.Part, sd.SBLOC
ORDER BY t3.Part, sd.SBLOC 
```

根据下面的 OPs 评论，您需要将部件与位置表连接起来以获得所有部件和位置的组合（注意：更改位置列和表名称以匹配您的位置表）

```
SELECT t3.Part,  t3.Location, 
ISNULL(SUM(CASE WHEN sd.SBINDT > '20120315' THEN sd.SBQSHP ELSE 0 END),0) AS Last_12_Mo,
ISNULL(SUM(CASE WHEN sd.SBINDT > '20121015' THEN sd.SBQSHP ELSE 0 END),0) AS Last_6_Mo,
COUNT(CASE WHEN sd.SBINDT > '20130110' THEN sd.SBINV END) AS Order_Count
FROM 
(SELECT DISTINCT a.Part, b.Location from Top300 a, LocationTable b)   t3
LEFT JOIN SalesData sd  ON t3.Part   = sd.SBITEM and t3.Location = sd.SBLOC
GROUP BY t3.Part, t3.Location
ORDER BY t3.Part, t3.Location 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:57:52.273

伙计，在您使用的查询中：sd.SBINDT > '20121015'

在外面，您正在使用：AND sd.SBINDT > '20130110'

外部查询之前的结果不会返回。

# c# - 如何检查我的windows服务器是虚拟机还是物理机

> ID：15485601
> 
> 赞同：14
> 
> 时间：2013-03-18T19:49:41.863
> 
> 标签：c#, virtual-machine, windows-server

我正在将桌面远程连接到我们实验室/数据中心的 Windows 服务器。我需要以编程方式确定我们所有的服务器是虚拟机还是物理服务器，当然我们有环境表告诉我们哪个是哪个。但是我需要编写代码来区分它。我需要使用什么技术？我没有找到一个 .Net 程序集来做到这一点。寻找专家分享您的知识或指导，任何研究方向或链接，任何东西都将不胜感激！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-18T20:18:59.800

您可以尝试使用以下 PowerShell 脚本，它利用 WMI 来确定机器是虚拟机还是物理机。

```
 gwmi -q "select * from win32_computersystem" 
```

当然，您也可以使用 C# 代码查询 WMI。上面脚本的输出将如下所示：

```
领域： ...
制造商：微软公司
型号：虚拟机
姓名 ： .....
……

```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-08T10:49:19.663

要从命令提示符检查这一点，您可以运行以下命令：`systeminfo | find "System"`

虚拟服务器的示例输出：

```
System Manufacturer:       Microsoft Corporation    
System Model:              Virtual Machine    
System Type:               x64-based PC 
```

物理服务器的示例输出：

```
System Manufacturer:       HP
System Model:              ProLiant BL460c G6
System Type:               x64-based PC 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-18T20:02:48.687

据我所知，没有*简单*的方法可以做到这一点。

有一些解决方法，但至少据我所知，并不是一个万能的解决方案。

Ben Armstrong 写了一篇关于[Detecting Microsoft virtual machines](http://blogs.msdn.com/b/virtual_pc_guy/archive/2005/10/27/484479.aspx?Redirected=true)的帖子，其中有一个低级技巧可以确定您是在[Virtual PC 还是 VMWare](http://www.codeproject.com/Articles/9823/Detect-if-your-program-is-running-inside-a-Virtual)中运行，但仍然排除了 VirtualBox 等。

您可能想尝试的一个技巧是检测是否安装了 VMWare 工具或 VirtualBox 工具。在大多数情况下，它们安装在来宾操作系统上以提供所需的功能，但很难在您的终端上维护不同的安装 GUIDS，因此它不是一个理想的解决方案。

--- 另外，如果 VM 在 Linux KVM 环境中运行，输出是这样的 ![在此处输入图像描述](../Images/2799e2fcef0ec5bfc9edf319d2a9b3b1.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-18T20:09:05.283

没有简单的方法来判断您是在裸机还是在虚拟计算机中运行，您可以做的最好的事情是获取一些硬件信息并做出有根据的猜测，例如，如果机器有网络适配器其中包含 Microsoft、VMware、Oracle、Hyper-V、Virtual 或 VirtualBox，考虑到 Microsoft、Oracle 或 VMware 都没有制造网卡，它很可能是一台虚拟机。

当您使用 C# 时，用于检索此和其他硬件信息的类是[ManagementClass](http://msdn.microsoft.com/en-us/library/system.management.managementclass%28v=vs.110%29.aspx)，还有一个不错的[项目](http://www.codeproject.com/Articles/17973/How-To-Get-Hardware-Information-CPU-ID-MainBoard-I)可以让您使用 ManagementClass 从计算机中检索大量信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T18:08:01.783

运行systeminfo命令@命令提示符查看系统menufacturer n系统型号详情。在那里您可以找到虚拟机和物理机信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-14T13:37:56.130

尝试这个：

```
FOR /F "tokens=*" %a IN ('wmic bios get bioscharacteristics^|find /c "33"') DO set USBlegacy=%a 
```

这对于我的环境中有限范围的台式机和笔记本电脑返回“1”，对于 VMWare 工作站 9、ESX 5.5 和 Citrix 6.5 和 7.6 返回“0”。BIOSCharacteristic “50”（一个“为系统供应商保留”）我只在四个虚拟环境中找到，因此可以反过来工作。

编辑：或者有这个：

```
FOR /F "tokens=*" %a IN ('wmic path win32_pnpentity get ^|find /c "ACPI Fan"') DO set ACPIfan=%a 
```

在 HP 台式机上返回“5”，在 VMware 工作站 9 和 ESX 5.5 上返回“0”，未在其他工作站上测试。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-23T06:44:13.680

您可以在 cmd 或 powershell 中使用此命令

系统信息

您会发现一行包含以下文本（或类似文本）：

系统制造商：VMware, Inc. 系统型号：VMware Virtual Platform

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-03-18T20:17:35.190

我知道的*唯一***可靠**的*编程*方法是：

1.  编写一个爬取您的网络（或 IP 范围）的应用程序以获取机器列表。
2.  将这些机器显示给一个人，并要求他们检查一个框，如果它是一个虚拟机......
3.  打印报告。

# python-2.7 - 使用循环将数据帧输出到 csv

> ID：15485605
> 
> 赞同：0
> 
> 时间：2013-03-18T19:49:45.373
> 
> 标签：python-2.7, pandas

我有从数据框构建的组并试图理解为什么这不起作用：

```
for i in range(1,12):
  out1=df.ix['group%s'% i]
  out1.to_csv('group%s.csv' % i)
  out1.pl.describe() 
```

group_i 的一个例子是：（a，b 包含浮点数）

```
group1=df["ptdelta"][a & b]
a=df["ptdelta"]>=0
b=df["ptdelta"]<5 
```

回溯给出 KeyError: group1 （表示第一次尝试）

```
---------------------------------------------------------------------------
KeyError                                  Traceback (most recent call last)
<ipython-input-87-11399ea315df> in <module>()
      6 '''
      7 for i in range(1,12):
----> 8   out1=df.ix['group%s'% i]
      9   out1.to_csv('group%s.csv' %i)
     10   out1.pl.describe()

 C:\Python27\lib\site-packages\pandas\core\indexing.pyc in __getitem__(self, key)
     32             return self._getitem_tuple(key)
     33         else:
 ---> 34             return self._getitem_axis(key, axis=0)
     35 
     36     def _get_label(self, label, axis=0):

C:\Python27\lib\site-packages\pandas\core\indexing.pyc in _getitem_axis(self, key, axis)
    343                     return self._get_loc(key, axis=0)
    344 
--> 345             return self._get_label(idx, axis=0)
    346         else:
    347             labels = self.obj._get_axis(axis) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:41:44.840

您正在尝试使用在数据框中不是有效索引的字符串值 'group' 进行索引。如果列表中已有多个组，并且每个组都是具有正确大小索引的系列，则可以尝试：

```
i = 1
for group in groups:
    out1=df.ix[group]
    out1.to_csv('group%s.csv' % i)
    out1.pl.describe()
    i += 1 
```

# java - 如何使用子类和超类中的显示方法显示所有字段

> ID：15485607
> 
> 赞同：-1
> 
> 时间：2013-03-18T19:49:51.977
> 
> 标签：java, inheritance, superclass, prototypal-inheritance, subclass

如何使用子类和超类中的显示方法显示所有字段，我想要的是从超类中显示子类中的所有字段

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:59:34.853

如果您使用的是 Eclipse，自动生成的 toString 可以做到这一点。
包括评论中提到的 Ali Alamiri 的 Override。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:03:50.897

如果我正确理解您的问题，您想从超类调用子类的显示方法，以便显示子类字段的值。

如果这就是您的意思，那么您首先要覆盖子类中的 toString 方法：

```
class Derived extends Base
{
   private String field1 = "Field";
   public String toString()
   {
      return "Field 1: " + field1; //etc
   }

} 
```

然后从你的超类中，你想要你的子类的一个对象，你调用 toString 方法，所以像：

```
class Base
{
    private Derived derived;
    public Base()
    {
       derived = new Derived();
       System.out.println(derived.toString());
    }
} 
```

# c# - 实体框架 - objectcontext 处理异常

> ID：15485609
> 
> 赞同：6
> 
> 时间：2013-03-18T19:50:01.510
> 
> 标签：c#, frameworks, entity, objectcontext, objectdisposedexception

我一直在调试这个程序没有任何结果，不幸的是我看不到问题的根源。我得到这个异常： ObjectContext 实例已被释放，不能再用于需要连接的操作。

有 2 个表： - CustomerSet - OrderSet

Orders 表中名为 Customer_id 的字段确保了表之间的关系，并且 Orders 表中还有一个名为 Customer 的虚拟导航属性。

场景如下：我在 Orders 表中插入一个元素：

```
Order order = new Order();
Order.order_id = GenerateId(IdType.Order);
Order.date = DateTime.Now;
Order.Customer_id = GetCustomerId(tbCustomerName.Text);
Insert(order); 
```

在 Insert 方法中，在 using 语句中有 DBContext，因此它会在需要时自动释放。我在里面工作。

之后，我需要来自先前插入的元素的数据（例如，我需要 Customer 字段的一些属性）。现在我希望 Customer 字段具有价值：

```
Order o = GetOrder(order.order_id); 
```

我在 Customer 字段中得到了这个 o 异常：o.Customer 抛出了“System.ObjectDisposedException”类型的异常

我正在玩延迟加载，打开或关闭它，但我没有成功。情况是一样的……

我拿什么来捣乱？

真正的好处是，如果我一步一步地使用 F11，它通常可以正常工作！

请帮忙！先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T19:54:27.323

> 在 Insert 方法中，在 using 语句中有 DBContext，因此它会在需要时自动处理

不完全是“需要时”。`IDisposable.Dispose()`一旦超出块的范围，它就会调用上下文对象`using`。

> 之后，我需要来自先前插入的元素的数据

此时您的上下文已处理完毕。如果您的操作需要延迟加载，那将失败，因为上下文不可用于执行延迟加载。

如果您通常需要访问尚未加载的对象，最有效的方法可能是`.Include`在检索对象图的其余部分时使用它来加载它。这称为急切加载。

如果您在加载对象图的其余部分时偶尔需要访问未加载的对象，您将需要一个新的上下文。

对于加载相关对象的讨论，我建议

[http://msdn.microsoft.com/en-us/data/jj574232.aspx](http://msdn.microsoft.com/en-us/data/jj574232.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:57:22.257

如果你有一个 using 语句，`Insert`那么上下文就消失了。

只要您确保作为`Insert()` `order.order_id`获取新 ID 的一部分并`GetOrder()`启动新的上下文，那就没问题了

# c# - 禁用页面和控件上的视图状态无效

> ID：15485612
> 
> 赞同：1
> 
> 时间：2013-03-18T19:50:26.620
> 
> 标签：c#, asp.net

我已禁用控件（标签、按钮等）的视图状态和用于测试目的的页面。

现在，当我在客户端更改标签的文本并拦截按钮的单击事件时，标签仍然显示服务器之前发送的文本。

那么发生了什么？我需要能够更改客户端上的数据并将其提供给服务器。

这是怎么做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:44:03.390

您需要做的是添加一个[隐藏的输入](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hiddenfield.aspx)。

在您的表单上添加：

```
<asp:HiddenField runat="server" id="hiddenHolder" /> 
```

然后在客户端单击事件时，当您更改标签的文本时，也会更改`value`.`hiddenHolder`

在您后面的代码中，您可以通过以下方式获取值：

```
string LabelText = hiddenHolder.Value; 
```

这样，您在客户端所做的更改可供服务器使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:48:01.977

标签`spans`在客户端呈现；因此，您将无法在服务器端捕获更改，因为它们不是输入元素。

ASP.NET 给您一种能够以编程方式更改标签文本的错觉，这仅仅是因为它使用 ViewState 在每次回发时存储/检索此信息。通过禁用它，您将放弃使用此“功能”。

# asp.net-mvc-4 - 如何防止相同的捆绑包重新生成？

> ID：15485613
> 
> 赞同：0
> 
> 时间：2013-03-18T19:50:35.250
> 
> 标签：asp.net-mvc-4, bundling-and-minification

我们遇到的问题是我们已经定义了两个包含 .less 文件的包，并且我们希望一次使用一个包，或者基于一些任意条件（想象一下这些包几乎相同，但可能有轻微的外观差异）。

假设我们在 _layout.cshtml 中有以下内容：

```
 @{
        var bundleName="~/Content/LessBundle";
        if (DateTime.Now.Minute % 2 == 1)
        {
            bundleName="~/Content/LessBundle_v2";
        }
        @Styles.Render(bundleName);
    } 
```

我们在 Fiddler 中看到的意外行为是，使用上面的代码，每次在浏览器中刷新页面时，都会发生 GET 请求并返回 200，但会生成相同的 bundle ID。

为了进一步演示，这是我们在 Fiddler 输出中看到的内容（从最旧到最新的请求）

```
12:01:10：
GET /blah/LessBundle?v=8wWviX6PRM-m1BrNdFSTtQQQo_2xtnt6d4aNKYp9p_Y1 HTTP/1.1（200返回码）
12:01:20:
GET /blah/LessBundle?v=8wWviX6PRM-m1BrNdFSTtQQQo_2xtnt6d4aNKYp9p_Y1 HTTP/1.1（200返回码）***********应该是304
12:02:05
GET /blah/LessBundle?v=9yWviXPRM-k1BrNdFSTtQQQo_2dddddd4aNKYp9p_B1 HTTP/1.1 (200 return code) OK，应该已经返回了新的bundle
12:02:35
GET /blah/LessBundle?v=9yWviXPRM-k1BrNdFSTtQQQo_2dddddd4aNKYp9p_B1 HTTP/1.1（200返回码）***********应该是304

```

我们试图弄清楚的是如何进行更改，以便如果捆绑包没有更改，我们不会重新生成它并在每个请求上发送整个有效负载

任何帮助是极大的赞赏！

谢谢， 多米尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:22:24.280

所以，事实证明问题是我在 chrome 中点击的是 ctrl-f5 而不是 f5。这会强制进行缓存刷新，而不是定期刷新。

当我通过 f5 刷新时，一切都很好。

没问题，继续前进:)

# javascript - 动态添加的复选框不会触发事件

> ID：15485616
> 
> 赞同：0
> 
> 时间：2013-03-18T19:50:42.087
> 
> 标签：javascript, jquery, cordova

使用 phonegap 和 javascript

我有一个动态创建的 UL 列表，其中有两个复选框。如果我手动添加 LI 项目，那么单击功能就可以正常工作。

但是当我动态添加我的 li 项目时，点击功能不会触发。

```
//This is the code that I use to populate the UL list

if (records[r_key].name.indexOf("#") == -1) {
    $('#ItemSelection').append('<li><p class="name">' + records[r_key].name +'</p><input type="checkbox" id="w' + records[r_key].id +'" class="markedplayer"><input type="checkbox" id="s' + records[r_key].id + '" class="markedwinner"></li>');
}

//This is the code to do something when any box is checked
$(":checkbox").click(function() {
    if (this.checked){
    //do something
    } else {
        //something else if not checked    
    } 
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:52:25.027

更改`on`并进行委托事件：

```
$("#ContainerID}").on('click', ':checkbox', function(){ 
```

静态父级的 id在哪里`ContainerID`（最好是最接近复选框）

看起来在你的情况下容器是`#ItemSelection`

即使在动态插入的元素上，委托事件也具有触发的优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:52:42.717

因为您甚至需要将点击重新附加到新项目。单击事件不会神奇地知道您添加了任何新内容。

监听 ul 上的点击事件，你不必担心重新附加事件。

```
$("#ItemSelection").on("click", "input[type='checkbox']", function(){
    if (this.checked){
        //do something
    } else {
        //something else if not checked    
    } 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T19:52:44.283

该选择器仅在加载 DOM 时触发一次。要使其对添加到 DOM 的每个元素起作用，您需要使用以下`on`方法：

```
$(container).on('click', ':checkbox', function(){
    if (this.checked){
      //do something
    } else {
      //something else if not checked    
    }
}); 
```

# ruby-on-rails - 用户重置密码时仅运行密码/密码确认验证

> ID：15485617
> 
> 赞同：1
> 
> 时间：2013-03-18T19:50:49.900
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的网站已连接到外部 vbulletin 论坛。我有自定义用户验证器来检查用户名、电子邮件是否存在于 vbulletin 论坛上。

```
validate :check_if_forum_user_exists

def check_if_forum_user_exists
  if Vbuser.find_by_email(email.downcase)
    errors.add(:email, "error 1")
  end

  if !Vbuser.find(:all, conditions: ["lower(username) = lower(?)",name]).empty?
    errors.add(:name, "error 2")
  end
end 
```

我有非常基本的密码重置功能。在最后一步，用户输入密码和密码确认，它们存储在`params[:user]`. 在控制器中，我想保存它`@user.update_attributes(params[:user])`并获得验证“错误 1”（因为所有现有用户都有 vbulletin 帐户，它总是会触发）。

我只想运行 has_secure_password 验证器，而没有其他验证器，因为除了密码我什么都不更改。知道我该怎么做吗？以及为什么会触发此自定义验证器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:57:01.390

你可以使用changed、changed_attributes和_changed吗？确定哪些字段在更新时发生了变化。

要检查电子邮件地址是否已更改，您可以执行以下操作：

```
if email_changed?
  ...
end 
```

密码可能有点复杂。您可能有一个散列密码字段，密码和密码确认不是您模型上的实际字段。您可以执行类似的操作来查看散列密码是否已更改。

# windows - 使用 windbg 调试 Windows 8 应用程序

> ID：15485624
> 
> 赞同：4
> 
> 时间：2013-03-18T19:51:30.850
> 
> 标签：windows, windows-store-apps, windbg

我有一个需要在我们的一台实验室机器上调试的 Windows 8 应用程序商店应用程序。实验室的机器有windbg，但没有Visual Studio。当我使用 windbg 启动 EXE 时，我收到一条消息，上面写着“此应用程序只能在应用程序容器的上下文中运行”。

有没有办法让 Windbg.exe 创建应用程序容器上下文？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:45:27.210

WinDbg 几乎可以附加到任何正在运行的进程。您可以从开始屏幕以常规方式启动您的应用程序，然后尝试附加到它。我在调试 Win32 服务时使用了这种技术。

# javascript - 反垃圾邮件脚本由于某种原因没有检测到变量（我从中得到了什么）

> ID：15485629
> 
> 赞同：0
> 
> 时间：2013-03-18T19:51:40.520
> 
> 标签：javascript, jquery

```
function commentpost(){
  var allow = true;
  var game = "<?php echo $game ?>";
  var name = $("input#name").val();
  var comment = $("textarea#comment").val();
  var date =  currentdate();
  var dataString = "postdate=" + date + "&game=" + game + "&name=" + name + "&comment=" + comment;
  if(name && comment && allow){
    $.ajax({
      type: "POST",
      url: "../php/addcomment.php",
      data: dataString,
      success: function(){
        updatecomments();
        //important part here V
        allow = false;
        setTimeout(function(){
          allow = true; 
          // alert(allow);
        }, 5000);
        // alert(allow);
        //important part here ^
      }
    });
  }
  //important part here V
  else if ((!name || !comment) && allow){
    alert("Please fill out both the Name and Comment fields");
  }
  else if (!allow){
    alert("Commenting has been limited to 5 seconds in between to pevent spamming.");
  }
  //important part here ^
} 
```

我正在创建的网站上有一个小的基本评论脚本。这一切都很好，但我试图防止提交按钮被垃圾邮件。这似乎对我来说应该有效，但由于某种原因它不是，我认为由于我使用“允许”的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:02:11.133

您的允许变量存在范围问题：您重新创建它并在调用 commentPost() 时将其设置为 true，因此当您检查其值时它始终为 true。

你需要这样的东西：

```
var allow = true;

function commentpost(){
  //...
  if(name && comment && allow){
    $.ajax({
      type: "POST",
      url: "../php/addcomment.php",
      data: dataString,
      success: function(){
        updatecomments();
        allow = false;
        setTimeout(function(){
          allow = true; 
        }, 5000);
      }
    });
  } 
```

当然，我不建议在全局范围内声明 allow，但是在不知道评论的上下文的情况下，很难说它应该存储在哪里。

# java - java md5哈希显示垃圾

> ID：15485631
> 
> 赞同：4
> 
> 时间：2013-03-18T19:51:45.963
> 
> 标签：java, encryption, md5

我编写了一个简单的函数将字符串转换为 md5，我在输出中看到奇怪的字母。我假设某些字符编码搞砸了。我可以指出我做错了什么吗？

```
public class App 
{   
public static void main(String[] args){
    String str = "helloWorldhelloWorldhelloWolrd";
    getHash(str);

}

public static void getHash(String str){
    try {
        byte[]  three = str.getBytes("UTF-8");
        MessageDigest   md = MessageDigest.getInstance("MD5");
        byte[] thedigest = md.digest(three);
        String  str1 = new String(thedigest,"UTF-8");
        System.err.println(str1);
    } catch (NoSuchAlgorithmException e) {

        e.printStackTrace();
    }catch (UnsupportedEncodingException e) {

        e.printStackTrace();
    }
} 
```

}

**输出：** 这就是我所看到的

```
 n?)?????fC?7 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T19:53:53.007

您需要将字节转换为十六进制字符串，而不是直接转换为字符串：

```
byte[] thedigest = md.digest(three);
StringBuilder buff = new StringBuilder();
for (byte b : theDigest) {
  String conversion = Integer.toString(b & 0xFF,16);
  while (conversion.length() < 2) {
    conversion = "0" + conversion;
  }
  buff.append(conversion);
}
String str1 = buff.toString();
System.err.println(str1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T19:59:40.170

您不能将摘要显示为字符串，（因为它只是垃圾）您需要以某种方式翻译字节，以便您可以以人类可读的形式显示它们。我会提出一个 Base64 编码器。

[这里](https://stackoverflow.com/questions/3752981/convert-md5-array-to-string-java)有另一个线程讨论如何将 MD5 转换为字符串。

# node.js - node.js npm 错误消息 - 系统找不到指定的路径

> ID：15485632
> 
> 赞同：8
> 
> 时间：2013-03-18T19:51:47.573
> 
> 标签：node.js, npm

我有一条奇怪的错误消息，我不明白或无法摆脱。其次，当我尝试在 webstorm 上创建快递应用程序时，它找不到快递。我正在使用 Windows 7 64 位。

附言`C:\dv> npm -v`

该系统找不到指定的路径。

```
1.2.14 
```

附言`C:\dv>`

提前谢谢了

杰里米

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-06-17T18:49:11.750

这是一个非常古老的帖子，但我想我会分享以防万一它对某人有所帮助。就我而言，问题不在于 npm，而在于 ansicon。

如这些链接中所述，删除注册表项的值`HKEY_CURRENT_USER\Software\Microsoft\Command Processor\AutoRun`解决了该问题...

[https://github.com/cmderdev/cmder/issues/121](https://github.com/cmderdev/cmder/issues/121)

[启动 Ruby 和 Rails 命令提示符时系统找不到指定的路径](https://stackoverflow.com/questions/6637922/the-system-cannot-find-the-path-specified-when-starting-ruby-and-rails-command-p)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2020-02-19T06:12:04.583

对我来说，删除这两个文件夹有效：

只需删除

```
C:\Users\yourUserName\AppData\Roaming\npm 
```

和

```
C:\Users\yourUserName\AppData\Roaming\npm-cache 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-04-10T15:59:06.220

就我而言，nvm-windows “破坏”了我的 windows 设置。 [https://github.com/coreybutler/nvm-windows](https://github.com/coreybutler/nvm-windows)

我卸载 nvm-windows 而不是转到`AppData`（有时隐藏文件夹） - 更改为可见： https: [//support.microsoft.com/en-us/help/4028316/windows-view-hidden-files-and-folders-in- windows-10](https://support.microsoft.com/en-us/help/4028316/windows-view-hidden-files-and-folders-in-windows-10)并手动删除`npm`缓存（下 `username\AppData\Roaming\npm-cache`）

此外，运行 Windows 命令`%temp%`Ctrl + A（全选）并删除 - 以清理您的系统（可能相关）。

我的一些全局`-g-`软件包（`vue-cli`应该重新安装） - 在这个奇怪的错误（噩梦）之后。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-01-03T19:30:39.410

我花了几天时间弄清楚如何解决这个问题。最后，使用**Process Monitor**程序，我发现：

1.  npm 试图访问自我`%APPDATA%/Temp`卸载该程序后不再存在的文件。
2.  我在注册表项中搜索了这个路径，发现这个路径包含在`*Computer\HKEY_USERS\S-1-5-21-1659004503-1897051121-1177238915-282167\Software\Microsoft\Command Processor\AutoRun*`值中。
3.  请注意，这不在上面评论中提到的**HKEY_CURRENT_USER注册表目录下。**
4.  删除此注册表项后，现在一切正常。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-21T00:16:11.617

您是否使用 Cygwin 或任何其他 Linux 仿真 shell 作为命令行？如果是这种情况，可能的原因可能是 npm 脚本的已知错误。请尝试此处建议的解决方案，

[https://stackoverflow.com/a/22436199/2390020](https://stackoverflow.com/a/22436199/2390020)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-27T16:01:52.060

有同样的问题。运行***npm***给了我这个错误：

```
C:\Users\user>npm
The system cannot find the path specified. 
```

我最终从控制面板中卸载了 nodejs 并重新安装了一个全新的下载。

错误并没有说它找不到命令，所以我认为 npm 脚本有问题。该脚本位于***C:\Program Files\nodejs\npm.cmd***，可通过路径 var 找到。***回声 %path%***。

该脚本包含：

```
@IF EXIST "%~dp0\/bin/sh.exe" (
  "%~dp0\/bin/sh.exe"  "%~dp0\node_modules\npm\bin\npm-cli.js" %*
) ELSE (
  /bin/sh  "%~dp0\node_modules\npm\bin\npm-cli.js" %*
) 
```

这看起来是错误的，因为 Windows 有正斜杠，并且脚本想要它的位置没有 sh.exe 文件。也没有 /bin/sh 文件，因为它的 Windows :( 这就是它找不到指定路径的原因。

我试图让节点在 cygwin 中工作，因为它类似于 linux 并使 Windows 至少在某种程度上可以忍受。也许这就是问题所在？

无论如何重新安装 npm.cmd 文件后看起来像：

```
:: Created by npm, please don't edit manually.
@IF EXIST "%~dp0\node.exe" (
  "%~dp0\node.exe" "%~dp0\.\node_modules\npm\bin\npm-cli.js" %*
) ELSE (
  node "%~dp0\.\node_modules\npm\bin\npm-cli.js" %*
) 
```

斜线看起来正确并且有效。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-09T13:45:04.950

对我来说，问题出在 Windows 10 上的 OneDrive 上。将文件移出 OneDrive 并移至桌面解决了该问题。Kibana 正在为我抛出错误。

# spring - Spring JDBC SQLErrorCodes

> ID：15485633
> 
> 赞同：1
> 
> 时间：2013-03-18T19:51:49.293
> 
> 标签：spring, spring-mvc, spring-jdbc

我使用 spring security:jdbc-user-service 创建了一个登录模块。但是我收到了 SQLErrorCode 异常，下面是我的代码。

**数据源bean：**

```
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
          destroy-method="close">

        <property name="driverClass" value="${jdbc.driverClassName}" />
        <property name="jdbcUrl" value="${jdbc.url}" />
        <property name="user" value="${jdbc.username}" />
        <property name="password" value="${jdbc.password}" />

        <property name="minPoolSize" value="1" />
        <property name="maxPoolSize" value="1" />

    </bean> 
```

**安全认证：**

```
<security:http auto-config='true'>
    <security:intercept-url pattern="/**" access="ROLE_USER" />
    <security:form-login login-page='/login'
                         default-target-url='/' always-use-default-target='true' />
</security:http> 

   <security:authentication-manager>
        <security:authentication-provider>
            <security:jdbc-user-service data-source-ref="dataSource"
                                        users-by-username-query="select username,password,enabled from userdetails where username=?"
                                        authorities-by-username-query="select u.username, ur.authority from userdetails u, userrole ur 
              where u.id = ur.userid and u.username =?  " 
            />

        </security:authentication-provider> 
```

**例外：**

```
org.springframework.beans.factory.support.DefaultListableBeanFactory - Overriding bean definition for bean 'H2':
 replacing [Generic bean: class [org.springframework.jdbc.support.SQLErrorCodes]; scope=; abstract=false; lazyInit=fals
e; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=nu
ll; initMethodName=null; destroyMethodName=null; defined in class path resource [org/springframework/jdbc/support/sql-e
rror-codes.xml]] with [Generic bean: class [org.springframework.jdbc.support.SQLErrorCodes]; scope=; abstract=false; la
zyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMe
thodName=null; initMethodName=null; destroyMethodName=null; defined in class path resource [sql-error-codes.xml]] 
```

当我使用 security:user-service provider 时，它工作正常，但是通过使用 JDBC provider，我得到了这个异常，我的 security:user-service 代码如下：

```
<security:user-service>
        <security:user name="admin" password="admin"
                           authorities="ROLE_USER, ROLE_ADMIN" />
        <security:user name="talha" password="talhapassword"
                           authorities="ROLE_USER" />
    </security:user-service> 
```

# java - 静态初始化块和常规静态初始化的区别

> ID：15485637
> 
> 赞同：10
> 
> 时间：2013-03-18T19:51:57.483
> 
> 标签：java, static, initialization

正如标题所说，两者之间究竟有什么区别

```
public static String myString = "Hello World!"; 
```

和

```
public static String myString;

static {
    myString = "Hello World";
} 
```

除了结构还有什么重要的区别吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T19:55:09.670

对于您的示例，没有区别。但正如你所见，

```
public static String myString = "Hello World!"; 
```

只能接受一个表达式来初始化变量。但是，在[静态初始化程序](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.7)(JLS 8.7) 中，可以执行任意数量的语句。例如，可以这样做：

```
static
{
    myString = "Hello";
    myString += " ";
    myString += "World";
} 
```

对于您的示例，显然没有必要这样做，但是变量的初始化可能需要的不仅仅是一个表达式，可能还有很多语句，因此 Java 制作了静态初始化程序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T19:58:43.623

静态 {...} 块让您有机会做比在字段声明中所能做的更多的事情。

例如，您可以填写地图的一些详细信息：

```
private static final Map<String, String> data = new HashMap<String, String>();

static {
    data.put("A", "Hello");
    data.put("B", "There");
    data.put("C", "You");
} 
```

有时您可能还需要在实例化之前获取数据（从文件、数据库等）：

```
public class Foo {
    private static final Person person;

    static {
        InputStream personData = Foo.class.getResourceAsStream("something.txt");
        person = new Person(personData);
    }
    ...
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T19:56:25.873

> 静态初始化块和常规静态初始化之间的区别。

在变量初始化的情况下，两者都是相同的。

但是如果我们只想与数据库连接一次或任何您想加载一次的操作。然后在静态块中编写代码，因为无论您创建多少该类型的对象，它只在第一个类加载时执行一次。

**编辑 ：**

你也可以构造一个类似的块：

```
{
    // Do Something...
} 
```

例子：

```
public class Demo {

    static{
        System.out.println("Static");
    }

    {
        System.out.println("Non-static block");
    }

    public static void main(String[] args) {
        Demo demo = new Demo();
        Demo demo2 = new Demo();
    }
} 
```

**输出：**

静止的

非静态块

非静态块

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-18T19:54:59.377

好吧，在您的第一个示例中，变量在同一行上声明和初始化。在你的第二个变量首先被声明，然后被初始化。在第二种情况下，您可以在到达相关初始化块之前进行任意数量的其他静态变量和块初始化。考虑这种情况：

```
public static String myString = "Hello World!";
public static String yourString = myString;
static {
    System.out.println(myString);
    System.out.println(yourString);
} 
```

与：

```
public static String myString ;
public static String yourString = myString;

static {
    myString = "Hello World";
}

static {
    System.out.println(myString);
    System.out.println(yourString);
} 
```

第一个示例的输出：

```
你好世界
你好世界

```

第二个示例的输出：

```
你好世界
空值

```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-18T19:55:14.177

使用静态块，您可以更改与声明顺序不同的初始化顺序。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-19T00:23:30.660

要继续 Scott Stanchfield 所写的内容，您可以使用这些`Collections.unmodifiableXXX()`方法来确保安全，尽管像 Google Guava 这样的库可能会减少这种必要性。考虑：

```
public static final Map<String, String> CAPITALS;
static {
    Map<String, String> map = new HashMap<>(); //Java 7.
    map.put("NY", "Albany");
    map.put("MD", "Annapolis");
    map.put("VA", "Richmond");
    map.put("CT", "Hartford");
    // 46 more states
    CAPITALS = Collections.unmodifiableMap(map);
} 
```

当然，拥有一个 52 行的静态块可能会让人迷失方向，因此您可以取而代之，将静态块转换为静态方法。

```
public static final Map<String, String> CAPITALS = capitals();
private static Map<String, String> capitals() {
    Map<String, String> map = new HashMap<>(); //Java 7.
    map.put("NY", "Albany");
    map.put("MD", "Annapolis");
    map.put("VA", "Richmond");
    map.put("CT", "Hartford");
    // 46 more states
    return Collections.unmodifiableMap(map);
} 
```

区别在于风格问题。您可能只使用数据库表。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-18T19:56:26.113

静态变量存储一个值，该值在定义它的类的所有实例（或非实例）之间共享。

静态块是第一次加载 Class 时执行的一段代码。

“关于范围，静态块只能在同一个类中访问”，“而静态变量可以从任何类访问”

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-18T19:59:34.843

通常，静态变量的值在其定义的类的所有实例（或非实例）之间共享，其中静态块是在类首次加载时执行的一段代码。功能上没有区别。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-06-24T08:08:33.117

**最重要**的功能在这里没有明确回答，这真的很令人惊讶。

是的，您可以有多条线路。但这有什么意义呢？您还可以在内联静态初始化分配中仅使用一次对工厂方法的调用。( `static public final MyType mySPVar = factoryCreateObject();`)

**所以让我们关注`static public final`变量：**

但是，如果该方法（或您的多行中的任何一条）抛出`Exception`s 甚至`Throwable`s 怎么办？

*   `Checked Exceptions`（不是源自`RuntimeException`）
*   或者`Unchecked Exceptions`那可以是
*   *   源自`RuntimeException`
*   *   或衍生自其他`Throwable`s，如`Error`

*初始化程序块*（静态和非静态）最重要的方面是能够进行本地化**的**单个**异常处理**，该异常处理仍然授予其他方法无法提供的**独占/特权访问。**

 *****通过*独占/特权访问*，我解决了以下问题

*   作为在这个*类*中运行的第一个代码（在静态变量初始化器之后），所以我们有一个真正纯粹的状态
*   是代码块中**唯一**可以分配最终变量的地方（当然，除非您使用反射）
*   不必处理*本地同步*，因为
*   *   每个特定类的静态初始化方法永远不会与其自身并行运行
*   *   在正常的 Java 条件下（没有*反射*或*字节码编织/注入*魔法；JVM 允许的东西，而不是普通的旧 Java），每个静态初始化程序保证只运行一次。

并在这里反对其他一些答案：关于*干净的代码*，静态和可公开访问的字段应该是最终的——即使不是不可变的。这是*初始化程序块*最有效的地方。

**现在让我们看看其他情况：**

对于任何其他情况，例如

*   （能够）稍后更改变量（不是最终的）
*   或者让它只能通过一个方法访问（变量不是公共的，连同一个*Getter*方法）

不同的解决方案要好得多：

*   稍后在*Setter 方法*上更改变量应用于控制变量/类/对象的状态
*   对于仅通过一种方法访问变量，也可以使用延迟初始化，类似的东西`if(myObj == null) {myObj = new Something();} return myObj;`（在这里考虑*同步*！）

**附录：**

这里所有的讨论都考虑（静态）类变量，但这里写的大多数观点也与（非静态）对象成员变量密切相关。*****

# sitecore - 对继承的站点核心字段进行验证？

> ID：15485638
> 
> 赞同：1
> 
> 时间：2013-03-18T19:52:05.473
> 
> 标签：sitecore, sitecore6

基本上我有一个 Sitecore 数据模板库，它用作其他一些模板的基础，在一个特定的继承模板上，字段完全相同，但是我想在其中一个继承字段上添加字段验证规则以检查字符串长度。

我考虑过覆盖相关模板中的字段，但有人告诉我 sitecore 不处理覆盖字段？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:04:39.533

您可以考虑为该字段设置验证，然后使用该`Suppressed Item Validation Rules`字段来抑制不需要它的模板上的验证。这是一篇可能会有所帮助的博客文章：http: [//blog.velir.com/index.php/2012/11/12/suppress-validation-rules-with-base-templates/](http://blog.velir.com/index.php/2012/11/12/suppress-validation-rules-with-base-templates/)

# arrays - 哈希表与排序数组 - 使用哪个？

> ID：15485641
> 
> 赞同：4
> 
> 时间：2013-03-18T19:52:08.893
> 
> 标签：arrays, performance, data-structures, hash, complexity-theory

假设我有一组数据（未排序）要存储以便快速查找。在加载数据之前我不知道大小是多少，我应该一次加载所有数据，这样我就可以立即开始执行查找。

此外，在程序执行期间的任何时候，更多数据可能会呈现给我，以存储在我选择的数据结构中。

我应该使用哈希表还是排序数组来存储这些数据？显然，静态哈希表需要在运行时根据提供的数据大小制作 - 这是否足以成为一个缺点，我应该简单地对给我的数据进行排序，即使它是 O(NlogN) 而不是 O(否）？或者我应该考虑一些动态散列的方法？

**澄清**：我需要加载任意大小的数据，然后对数据执行搜索和插入，没有明确的顺序或我必须做的搜索/插入量的想法。

我知道这很笼统......但是如果我在加载数据后必须做更多的插入而不是搜索呢？搜索比插入多怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-18T20:33:52.230

这实际上取决于操作的频率。

*   如果您相对于查找的数量做了很多插入，那么排序数组可能不是一个好的选择，因为插入排序数组很昂贵（O(n) 时间）。二叉搜索树或哈希表在这里可能是合适的。

*   如果您相对于插入数量进行大量查找，那么排序数组可能是一个好主意，尽管哈希表可能更快。当您需要对数据进行排序以执行范围搜索或最近邻查找等操作时，排序数组通常是一个不错的选择，但如果您不需要这样做，它可能不合适。

*   如果您的键是某些类型（整数、字符串等），您可能可以使用更具体的数据结构，如[trie](http://en.wikipedia.org/wiki/Trie)或[van Emde Boas 树](http://en.wikipedia.org/wiki/Van_Emde_Boas_tree)来获得额外的性能。这些有时比哈希表或排序数组更好，因为它们可以利用数据的细节。

如果你真的不知道会发生什么，我会使用哈希表作为初始实现。这不太可能是一个糟糕的选择，尽管您可以使用更精细的数据结构来代替。如果您事先不知道使用模式，则排序数组不太可能是一个好主意。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T23:50:19.127

Templatetypedef 的答案是正确的，但我将添加一些关于 RedBlack Trees 的更多信息，它们为您的两个选项提供了一个很好的折衷方案。他提到了尝试和 vEB 树（以前没有听说过后者，听起来很有用！）红黑树不如这些选项最优，但可能是更通用的解决方案。当然值得研究这些更优雅的树结构选项以及列表或哈希映射。

```
RedBlack Tree:
Insertion: O(log n)
Key Lookup: O(log n)
Key Search: O(log n)
Iteration: O(n)

Sorted List:
Insertion: O(n log n)
Index Lookup: O(1)
Sorted Search: O(log n)
Iteration: O(n)

Hash Table:
Insertion: O(1)
Key Lookup: O(1)
Key Search: O(n)
Iteration: O(n) 
```

# objective-c - NSTextField 字符集限制

> ID：15485644
> 
> 赞同：1
> 
> 时间：2013-03-18T19:52:18.243
> 
> 标签：objective-c, cocoa, nstextfield

我是 Xcode 和 MacOS 应用程序编程的新手。请让我帮忙。我不明白如何编写操作（或我不知道的事件）来创建限制字符集并检查兼容字符（0-9，e，.）上的 NSTextField。我读了如何创建字符集（NSCharacterSet），但不知道下一步需要什么。我想禁止在我的 NSTextField 上输入错误的字符。如何处理 NSTextField 的键盘事件和 Objective-C 中的其他事件？比如例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:09:06.020

我会`NSFormatter`在 textField 上放一个。这就是可可的方式：D

`textField.formatter = myFormatter;`

.. 例如一个 NSNumberFormatter 或者如果需要是一个自定义的

看

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSTextField_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSTextField_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T19:55:39.983

我在 Cocoadev 上找到了一篇可以帮助你的帖子。（[http://lists.apple.com/archives/cocoa-dev/2006/Aug/msg01492.html](http://lists.apple.com/archives/cocoa-dev/2006/Aug/msg01492.html)）

您需要注册一个通知，以便在文本更改时收到通知，例如：

```
[[NSNotificationCenter defaultCenter] addObserver: self
    selector: @selector(textDidChange:)
    name: NSControlTextDidChangeNotification
    object: textField]; 
```

然后在您的 textDidChange: 方法（或任何您命名的方法）中，您可以修改输入。例如，要确保大写：

```
[[textField setStringValue: [[textField stringValue] uppercaseString]]; 
```

如果你想限制位数，你可以使用 NSMutableString 的 deleteCharactersInRange: 方法。如果您想限制在文本字段中找到的文本类型，可以使用 NSMutableCharacterSet 与所有允许的字符，然后使用 NSScanner 的 scanCharactersFromSet:intoString 方法过滤掉不需要的字符。

# xml - 如何使用 xslt 转换 xml 中的数据集

> ID：15485645
> 
> 赞同：-1
> 
> 时间：2013-03-18T19:52:20.937
> 
> 标签：xml, xslt

我是 xslt 的新手，我很难弄清楚如何转换以下 xml。我知道我必须遍历行，但我不知道如何将列名转换为元素。任何帮助将不胜感激。

这是从 webservice 收到的 xml

```
<?xml version="1.0" encoding="utf-8" ?> 
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <soap:Body>
   <xmlns="http://www.someservice.com/webservices/">
    <GetResultsResult>
    <Columns>
      <WSColumn>
         <Name>triptype</Name> 
      </WSColumn>
      <WSColumn>
         <Name>description</Name> 
      </WSColumn>
      <WSColumn>
         <Name>id</Name> 
      </WSColumn>
    </Columns>
    <Rows>
      <WSRow>
        <Cell>
          <anyType xsi:type="xsd:string">vacation</anyType> 
          <anyType xsi:type="xsd:string">Trip to Bahamas</anyType> 
          <anyType xsi:type="xsd:int">89</anyType> 
        </Cell>
       </WSRow>
       <WSRow>
        <Cell>
          <anyType xsi:type="xsd:string">vacation</anyType> 
          <anyType xsi:type="xsd:string">Trip to California</anyType> 
          <anyType xsi:type="xsd:int">75</anyType> 
         </Cell>
        </WSRow>
        <WSRow>
         <Cell>
           <anyType xsi:type="xsd:string">business</anyType> 
           <anyType xsi:type="xsd:string">Trip to Chicago</anyType> 
           <anyType xsi:type="xsd:int">82</anyType> 
          </Cell>
         </WSRow>
       </Rows>
       <HasErrors>false</HasErrors> 
       <ErrorMessage /> 
        </GetResultsResult>
      </GetResultsResponse>
    </soap:Body>
</soap:Envelope> 
```

这是改造后想要的结果

```
<Trips>
   <Trip>
     <triptype>vacation</triptype>
     <description>Trip to Bahamas</description>
     <id>89</id> 
    </Trip>
    <Trip>
      <triptype>vacation</triptype>
      <description>Trip to California</description>
      <id>75</id>
     </Trip>
     <Trip>
       <triptype>business</triptype>
       <description>Trip to Bahamas</description>
       <id>82</id>
     </Trip>
</Trips> 
```

先感谢您！！！马塞洛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:05:07.113

这应该这样做：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:gr="http://www.someservice.com/webservices/"
                exclude-result-prefixes="gr">

  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
  <xsl:key name="kColumn" match="gr:WSColumn/gr:Name"
           use="count(../preceding-sibling::gr:WSColumn) + 1" />

  <xsl:template match="text()" />

  <xsl:template match="/">
    <Trips>
      <xsl:apply-templates />
    </Trips>
  </xsl:template>

  <xsl:template match="gr:WSRow/gr:Cell">
    <Trip>
      <xsl:apply-templates select="*"/>
    </Trip>
  </xsl:template>

  <xsl:template match="gr:Cell/*">
    <xsl:element name="{key('kColumn', position())}">
      <xsl:value-of select="."/>
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时（`GetResultsResponse`修复损坏的标签后），这会产生：

```
<Trips>
  <Trip>
    <triptype>vacation</triptype>
    <description>Trip to Bahamas</description>
    <id>89</id>
  </Trip>
  <Trip>
    <triptype>vacation</triptype>
    <description>Trip to California</description>
    <id>75</id>
  </Trip>
  <Trip>
    <triptype>business</triptype>
    <description>Trip to Chicago</description>
    <id>82</id>
  </Trip>
</Trips> 
```

# python - 如何在 Window 的子类事件中的 Pyglet 中使用 super？

> ID：15485646
> 
> 赞同：1
> 
> 时间：2013-03-18T19:52:24.620
> 
> 标签：python, events, super, pyglet

我想继承 pyglet.window.Window，但是这段代码在 on_draw() 和 on_mouse_pressed() 中抛出了 super 异常

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import pyglet

class Window(pyglet.window.Window):
    def __init__(self, *arguments, **keywords):
        super(Window, self).__init__(*arguments, **keywords)

    def on_draw(self):
        super(Window, self).on_draw()
        self.clear()

    def on_key_press(self, symbol, modifiers):
        super(Window, self).on_key_press(symbol, modifiers)
        if symbol == pyglet.window.key.A:
            print "A"

    def on_mouse_press(self, x, y, button, modifiers):
        super(Window, self).on_mouse_press(x, y, button, modifiers)
        if button:
            print button

window = Window()
pyglet.app.run() 
```

而这段代码没有。为什么会这样？在 Pyglet 事件中安全使用 super 吗？

pyglet.window.Window 中的默认 on_draw() 调用 flip() 但我无法调用 pyglet.window.Window 的 on_draw() 并且我找不到在 Pyglet 模块中定义 on_draw() 的位置。这是在哪里定义的，为什么我不能用 super 调用 pyglet.window.Window 的 on_draw()？

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import pyglet

class Window(pyglet.window.Window):
    def __init__(self, *arguments, **keywords):
        super(Window, self).__init__(*arguments, **keywords)

    def on_draw(self):
        self.clear()

    def on_key_press(self, symbol, modifiers):
        super(Window, self).on_key_press(symbol, modifiers)
        if symbol == pyglet.window.key.A:
            print "A"

    def on_mouse_press(self, x, y, button, modifiers):
        if button:
            print button

window = Window()
pyglet.app.run() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:44:44.360

没有为定义`on_draw`or`on_mouse_press`函数`pyglet.window.Window`，因此您不能调用它们。在基类中，这些仅作为注册的事件类型存在，这意味着当窗口通过 接收其中一个时`dispatch_event()`，它将首先检查其事件堆栈中的处理程序，然后检查其自身的属性以查找具有匹配名称的函数。如果任一位置均不匹配，则忽略该事件。这使您可以像在代码中那样直接定义处理程序，或者通过使用类外部的装饰器将处理程序推入堆栈（或两者兼而有之）。

确实在每次迭代期间向每个窗口`EventLoop`调度一个事件，但被单独调用。`on_draw``flip()`

资源：

```
class EventLoop(event.EventDispatcher):
    # ...
    def idle(self):
        # ...
        # Redraw all windows
        for window in app.windows:
            if redraw_all or (window._legacy_invalid and window.invalid):
                window.switch_to()
                window.dispatch_event('on_draw')
                window.flip()
                window._legacy_invalid = False 
```

# deployment - glassfish“找不到 application.xml 中定义的子模块 [business-web-1.0-SNAPSHOT.war]”

> ID：15485649
> 
> 赞同：8
> 
> 时间：2013-03-18T19:52:33.333
> 
> 标签：deployment, glassfish, application.xml

应用程序.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<application xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/application_6.xsd" version="6">
  <display-name>business-ear</display-name>
  <module>
    <web>
      <web-uri>business-web-1.0-SNAPSHOT.war</web-uri>
      <context-root>business</context-root>
    </web>
  </module>
</application> 
```

文件路径 c:\glassfish3\glassfish\domains\domain1\autodeploy\business.ear\

结构 business.ear ->

META-INF business-web-1.0-SNAPSHOT.war

请帮我！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-25T21:04:03.207

我也遇到了这个问题，我升级到 3.1.2.2 版后也开始遇到这个问题。我有一个解决方案，但有时会再次出现此错误，我认为这与 Glassfish 持有陈旧的应用程序数据有关。

1.  转到您的 glassfish 域文件夹 -> glassfish3\glassfish\domains\domain1\applications\

2.  检查您的应用程序文件夹和应用程序文件夹内，您会发现一个名为“.glassfishStaleFiles”的文件

3.  使用文本编辑器打开此文件，查看 Glassfish 在文件最后一行列出的 jar 库。

4.  更新此依赖项（使用 maven 或其他工具）

5.  清理应用程序文件夹。

6.  重新构建一切。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-09T04:11:02.080

手动删除“应用程序”文件夹的所有子文件夹

# python - 如何使用 python 将对象排列成圆形？

> ID：15485655
> 
> 赞同：0
> 
> 时间：2013-03-18T19:52:51.817
> 
> 标签：python, geometry, blender

我在搅拌机中使用 python，我想知道如何使用 python 来获取场景中的多个对象并将它们排列成圆形图案，均匀分布，每个对象之间的最小空间量。

我正在考虑让 python 读取场景中对象的数量并创建一个具有该数量顶点的圆。然后将每个对象移动到圆上自己的顶点，同时确保圆的边缘至少是最小长度。

这是否使事情复杂化了？我应该使用什么其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:10:35.943

我同意@joel 的观点，这实际上是两个独立的问题。

如此处所示 -悬停在大多数 UI 元素上的[Python 工具提示为您提供属性/运算符的 Python 数据访问。](http://wiki.blender.org/uploads/e/ec/1_2_ToolTipMenu.png)如果您不关心对象类型是什么，那么只需找到用于创建原始对象之一的对象运算符并使用它。

对于更高级的对象生成，我会查看 - [Blender Python API - Cookbook](http://wiki.blender.org/index.php/Dev:2.5/Py/Scripts/Cookbook)

一旦您知道如何创建对象，您就可以创建 x 个对象并根据您选择的算法对它们进行偏移。如果您不想开发自己的代码，只需快速搜索[即可 - 尽可能均匀地分布点](https://stackoverflow.com/questions/3479736/distribute-points-on-a-circle-as-evenly-as-possible)

# python - Pymongo：我可以查询 pymongo 查询对象吗？

> ID：15485656
> 
> 赞同：0
> 
> 时间：2013-03-18T19:52:56.193
> 
> 标签：python, mongodb, pymongo

我在 python 中有一个使用 pymongo 的查询，效果很好。它返回单个用户的条目。稍后在脚本中，我想缩小这个结果。我想每天迭代，并再次查询该用户仅在这一天有多少条目。

问题是：我需要进行新的查询，还是可以查询已有的对象？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:53:40.670

您不能简单地过滤您拥有的结果，而不是使用新查询再次访问数据库吗？

```
todays_entries = [item for item in iterable if function(item)] 
```

解释：

您的查询结果将是一个条目列表。我猜您首先以某种方式使用该列表，然后在代码中您想要计算今天创建的所有条目。

Python 有一种很棒的过滤列表的方法。可以在此处找到相关文档：
[Python 过滤器函数](http://docs.python.org/2/library/functions.html#filter)

我上面写的代码只是使用该函数的一种更 Pythonic 的方式。由于我没有你的代码，我只能猜测它对你来说可能是什么样子。也许是这样的：

```
todays_entries = [entry for entry in all_entries if entry.date == todays_date] 
```

当然：entry.date 的格式必须与 todays_date 类似

# visual-studio-2010 - Visual Basic - 从位置提取文件

> ID：15485659
> 
> 赞同：0
> 
> 时间：2013-03-18T19:53:08.947
> 
> 标签：visual-studio-2010

我是 Visual Basic 的初学者，我正在尝试创建一个程序，可以根据日期从闪存驱动器中提取某些修改过的文件然后我需要将这些某些文件复制到一个新文件夹中。我想知道是否有人可以帮助我创建 Visual Basic（Visual Studio 2010）代码的任何示例。要提取的修改文件大概是根据他们的日期，如果你能帮忙谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:58:47.873

因为这是家庭作业，所以我不愿意提供交钥匙响应。从了解这些课程开始：

[`Directory`](http://msdn.microsoft.com/en-us/library/system.io.directory.aspx)-- 包含从目录中选择和读取文件名的方法。特别看功能`EnumerateFiles`。它将为您创建一个匹配文件名的列表。

[`File`](http://msdn.microsoft.com/en-us/library/system.io.file.aspx)-- 包含读取和写入文件的方法。包含`Copy`可用于将文件从一个位置复制到另一个位置的方法。方法`GetCreationTime`返回文件创建的日期和时间。`GetLastWriteTime`将返回文件最后修改的日期/时间。

# c# - 如何将列表项的第一个值放入 C# 中的文本框？

> ID：15485666
> 
> 赞同：1
> 
> 时间：2013-03-18T19:53:37.877
> 
> 标签：c#, asp.net

我从表中获取数据并以下列方式存储它。

```
while (results.Read())
{
    ListItem newItem = new ListItem();
    newItem.Text = results["TEXT_CONTENT"].ToString();
    newItem.Value = results["ID"].ToString();
} 
```

现在有一个文本框，我需要将列表的第一个值放入其中。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:58:53.413

将其更改为：

```
Boolean assignedFirst = false;

while (results.Read()) {
  if (!assignedFirst) {
    textBox1.Text = results["TEXT_CONTENT"].ToString();
    assignedFirst = true;
  }
  ListItem newItem = new ListItem();
  newItem.Text = results["TEXT_CONTENT"].ToString();
  newItem.Value = results["ID"].ToString();
} 
```

* * *

另一种方式。你的评论说你有 5 件事情要做：

```
Int32 i = 0;
while (results.Read()) {
  switch(i) {
    case 0: 
      textBox1.Text = results["TEXT_CONTENT"].ToString();
      break;
    case 1:
      textBox2.Text = results["TEXT_CONTENT"].ToString();
      break;
    case 2:
      textBox3.Text = results["TEXT_CONTENT"].ToString();
      break;
    case 3:
      textBox4.Text = results["TEXT_CONTENT"].ToString();
      break;
    case 4:
      textBox5.Text = results["TEXT_CONTENT"].ToString();
      break;
  }
  i++;

      ListItem newItem = new ListItem();
      newItem.Text = results["TEXT_CONTENT"].ToString();
      newItem.Value = results["ID"].ToString();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:59:29.883

```
while (results.Read())
{
    if (String.isNullOrEmpty(txt.Text))
    {
        txt.Text = results["TEXT_CONTENT"].ToString();
    }
    ListItem newItem = new ListItem();
    newItem.Text = results["TEXT_CONTENT"].ToString();
    newItem.Value = results["ID"].ToString();
} 
```

# javascript - 多个图像加载的函数 css 调用问题

> ID：15485669
> 
> 赞同：2
> 
> 时间：2013-03-18T19:53:42.210
> 
> 标签：javascript, css

当我有两个使用 Imagesloaded 的功能时，我的预加载器不显示。当我禁用图像加载时工作正常。需要有能力使用三个或四个取决于。

我的预加载器 div 和 SCSS。

```
<div class="masonry-loading">
    <img src="<?php echo get_template_directory_uri(); ?>/library/images/ajax-loader.gif" />
</div>

.masonry-loading {padding:10% 0 10% 50%;}
img {border:0 !important;} 
```

这是我针对不同列的功能。

```
// Masonary
$(document).ready(function() {
    var $container = $('.masonry-c');
    var min_width = 230;
    $('.masonry-c').hide();
    $container.imagesLoaded(function() {
        $('.masonry-c').fadeIn('fast');
        $("div.masonry-loading").css({
            'display': 'none'
        });
        $container.masonry({
            itemSelector: '.masonry-box',
            isAnimated: true,
            columnWidth: function (containerWidth) {
                var box_width = (((containerWidth) / 3) | 0);

                if (box_width < min_width) {
                    box_width = (((containerWidth) / 2) | 0);
                }

                $('.masonry-box').width(box_width);

                return box_width;
            }
        });
    });
});

// Masonary
$(document).ready(function() {
    var $container1 = $('.masonry-four-c');
    var min_width = 200;
    $('.masonry-four-c').hide();
    $container1.imagesLoaded(function() {
        $('.masonry-four-c').fadeIn('fast');
        $container1.masonry({
            itemSelector: '.masonry-four-box',
            isAnimated: true,
            columnWidth: function (containerWidth) {
                var box_width = (((containerWidth) / 4) | 0);

                if (box_width < min_width) {
                    box_width = (((containerWidth) / 3) | 0);
                }
                if (box_width < min_width) {
                    box_width = (((containerWidth) / 2) | 0);
                }

                $('.masonry-four-box').width(box_width);

                return box_width;
            }
        });
    });
}); 
```

下面我放置了 CSS 以删除加载器，由于某种原因，当我在 imagesLoaded 之后在上面的函数中加载它时，这不起作用。也许如果我能完成这项工作，它就会解决问题。

```
function triggerCallback() {
    callback.call($this, $images),
    $("div.masonry-loading").css({'display': 'none'});
} 
```

尝试了一堆东西，我打赌它很简单。无论如何，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:35:53.650

利用，

```
$('myelement').load(function(){
//when your element / img is loaded then this code will run.
//hide/show whatever u want
}); 
```

# php - PHP在表格中添加货币

> ID：15485675
> 
> 赞同：-2
> 
> 时间：2013-03-18T19:54:02.673
> 
> 标签：php, rows, currency

我正在尝试将多行中的货币加在一起。以下是我到目前为止的代码。我不确定 SUM 应该在哪里。

如果可能的话，我还想使用 FPDF 以 PDF 格式输出结果表。我尝试粘贴我的代码，但无法让它工作，一直给我错误，它的格式不正确。我一直按`CTRL`+`k`并输入代码，但它不起作用；

有什么建议吗？

```
<?php
session_start(); // start up your PHP session! 
?>
<html>
<head>
    <meta charset="UTF-8"/>
    <title>Accounting Page</title>
    <link rel="stylesheet" type="text/css" href="../css/table.css"/>
    <script src="../js/table.js" type="text/javascript"></script>
</head>
<?php
error_reporting(0);
$con = mysql_connect("localhost", "root", "rq5f4mkn");
if (!$con) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db("charitabledb", $con);
$sql = "SELECT * FROM accounting";

$result = mysql_query($sql);
?>
<div id="content">
    <div id="blog">
        <div id="articles" style="width:692px;padding:0;">
            <table width="250" border="1" class="example table-autosort table-autofilter   
         table-autopage:10 table-stripeclass:alternate table-page-number:t1page table-
         page-count:t1pages table-filtered-rowcount:t1filtercount table-
         rowcount:t1allcount" id="t1">
                <thead>
                <tr style="height:35px">
                    <th class="table-filterable table-sortable:default table-sortable" title="Click 
          to sort">Date
                    </th>
                    <th class="table-filterable table-sortable:default table-sortable"
                        title="Click to sort">Transaction Type
                    </th>
                    <th class="table-filterable table-sortable:default table-sortable"
                        title="Click to sort">Account
                    </th>
                    <th class="table-filterable table-sortable:default table-sortable"
                        title="Click to sort">Description
                    </th>
                    <th class="table-filterable table-sortable:default table-sortable"
                        title="Click to sort">Amount
                    </th>
                </tr>
                </thead>
                <tbody>
                <?php
                while($row = mysql_fetch_array($result))
                {
                ?>
                <tr>
                    <td><?php echo $row['date']?></td>
                    <td><?php echo $row['transactiontype']?></td>
                    <td><?php echo $row['account']?></td>
                    <td><?php echo $row['description']?></td>
                    <td><?php echo $row['amount']?></td>

                    <?php
                    }
                    mysql_close($con);
                    ?>
                </tbody>
                <tfoot>

                <tr>
                    <td style="cursor:pointer;"
                        class="table- page:previous">&lt; &lt;Previous
                    </td>

                    <td style="text-align:center;" colspan="1">Page <span id="t1page">1</span>&nbsp;of
                        <span id="t1pages">11</span></td>
                    <td style="cursor:pointer;" class="table-page:next">Next &gt; &gt;</td>
                </tr>
                <tr>
                    <td colspan="3"><span id="t1filtercount">105</span>&nbsp;of
                        <span id="t1allcount">105</span>&nbsp;rows match filter(s)
                    </td>
                </tr>
                </tfoot>
            </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:04:28.160

如果您只是汇总表中的所有值：

```
mysql_query("SELECT SUM(amount) FROM accounting"); 
```

# c# - 可以在 sln 文件中定义项目的路径吗？

> ID：15485676
> 
> 赞同：0
> 
> 时间：2013-03-18T19:54:05.680
> 
> 标签：c#, .net, project

将新的 C# 项目添加到 .sln C# 解决方案文件时，是否可以将该项目的路径设置为自定义文件夹？这个“自定义路径”将写入 .sln 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:04:07.367

经过长时间的讨论，这里是瘦的。

首先，文件系统上的文件夹结构必须与源代码管理中的相同；否则，当其他人尝试下载项目以进行处理时，任何参考都将不起作用。

假设您有以下内容：

```
\Projects
    \ProjectA
        \ProjectA.csproj
    \ProjectB
        \ProjectB.csproj

\OtherProjects
    \SomethingElse
        \SomethingElse.sln 
```

现在，目录中的解决方案文件`\OtherProjects\SomethingElse\SomethingElse.sln`可以引用该项目`\Projects\ProjectA\ProjectA.csproj`。在解决方案中，只需右键单击解决方案文件并添加...现有项目并浏览到它。VS会将项目的适​​当路径添加到文件中。

在解决方案资源管理器中，它将如下所示：

```
Solution 'SomethingElse' (1 project)
  ProjectA 
```

实际路径无关紧要，只是文件系统和源代码控制之间的路径必须相同。

* * *

如果您想`\Projects\ProjectA`实际位于下方，`\OtherProjects\SomethingElse`那么您有两种选择。要么*将*项目移动到该文件夹​​下，要么将项目*分支*到该文件夹​​下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T19:59:39.750

项目路径相对于解决方案文件的当前位置。

如果在将项目添加到解决方案后需要移动它们，您可以手动编辑路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T19:58:09.467

解决方案右键单击 -> 添加 -> 新建项目 -> 浏览按钮（位置路径附近）

在解决方案文件中，您会看到类似

```
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "ProjectName", "{RelativePath}\ProjectName.csproj", "{050E6816-57E1-4FDB-B84B-A9C37619A312}" 
```

# java - 是否可以为特定类型而不是泛型类型实现 AbstractList？

> ID：15485679
> 
> 赞同：0
> 
> 时间：2013-03-18T19:54:10.677
> 
> 标签：java, list, abstract

是否可以以只能保存某种类型的对象的方式实现 AbstractList？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:56:14.990

当然。

```
class FooList extends AbstractList<Foo> {
  ...
} 
```

# php - 在 PHP 代码之前执行 jQuery 代码和动画

> ID：15485685
> 
> 赞同：-3
> 
> 时间：2013-03-18T19:54:19.707
> 
> 标签：php, jquery, posting

嗨，我一直在向我的网站添加一些动画，例如在登录页面等

但是我首先发现动画执行但不是 PHP 代码，当我执行 PHP 代码时，动画不起作用... PHP 代码更重要，但即使我使用 form.submit() 函数似乎jquery PHP 代码永远不会触发。我知道这一点，因为我尝试了替代方法，并且它在没有 jQuery 的情况下也可以工作。

我正在使用 1.9.0，这是 jQuery 代码

```
jQuery('#loginform button').click(function()
        {
            if(!jQuery.browser.msie) 
            {
                if(jQuery('#username').val() == '' || jQuery('#password').val() == '') 
                {
                    if(jQuery('#username').val() == '') jQuery('#username').addClass('error'); else jQuery('#username').removeClass('error');
                    if(jQuery('#password').val() == '') jQuery('#password').addClass('error'); else jQuery('#password').removeClass('error');
                    jQuery('.loginwrap').addClass('animate0 wobble').bind(anievent,function()
                    {
                        jQuery(this).removeClass('animate0 wobble');
                    });
                } 
                else 
                {
                    jQuery('.loginwrapper').addClass('animate0 fadeOut').bind(anievent,function()
                    {
                        $.post(username, {username});
                        $.post(password, {password});
                        jQuery('#loginform').submit();
                    });
                }
                return false;
            }
        }); 
```

如您所见，最初我从 jquery 获得了要发布的代码，但是无论我尝试什么动画都不会运行。

谁能告诉我为什么...或者我应该以什么方式使动画发生然后PHP？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:41:07.293

你有没有包装上面的 JS 让它等到文件完成加载后才执行？如果您不这样做，则可能发生的情况是 javascript 正在尝试对尚未呈现的元素进行操作。因此，`#loginform button`当它尝试绑定到该元素时，可能还不存在。

将您的 JS 包装在此：

```
jQuery(function(){
    // All JS that executes on load here.
}); 
```

# object - 集会查询：从对象中提取结果

> ID：15485686
> 
> 赞同：1
> 
> 时间：2013-03-18T19:54:23.090
> 
> 标签：object, rally, testcase

我仍然无法从我查询的对象中提取结果。下面的查询提取所有 TestCase 对象并将它们打印到屏幕上。对象如下所示：`[object, Object]`.

然后我尝试通过打印来改进它，`document.write( queryResults.testcase.Results + " " + i);`但它随后打印了这个：`undefined #`（# 以索引递增）

我在这里的最终目标是能够找到尚未运行的测试用例，也就是没有结果的测试用例。正如另一位海报所建议的那样，我的策略是返回所有测试用例，然后排序为 Result.length=0; （意味着没有结果）。我试过`document.write( queryResults.testcase.Results.length + " " + i);`了，但没有用，屏幕上根本没有打印。我用 Results[i] 尝试了类似的事情，认为它是一个对象数组。我试着玩弄'fetch'，但是当我把它留空时它似乎只返回一些东西（默认为true，它返回所有字段）。

```
function runMainQuery(rallyDataSource) {
        document.getElementById("TestCaseInfo").innerHTML = "";
        busySpinner = new rally.sdk.ui.basic.Wait({hideTarget: false});
        busySpinner.display('spinner');
        var daySpan = numOfDays; // how many days back from today for TestCaseResult inclusion

        var dateBoundingClause = '(Date >= "' + previousDate(daySpan) + '")';

       // ORIGINAL VALUE ------  var dateBoundingClause = '(Date >= "' + previousDate(daySpan) + '")';

        querySpec = {
            key   : "testcase",
            type  : "testcase"
            //query: dateBoundingClause
        };
        rallyDataSource.findAll(querySpec, showResults);
    }//end runMainQuery

    function showResults(queryResults) {
        busySpinner.hide();
        //console.log("Number of test cases returned by the Test Case/Test Case Results query: " +
        //             queryResults.testcase.length);

        totalNumTestCases = queryResults.testcase.length;

        if (queryResults.testcase.length === 0) {
            var message = "Enter the date range (Oldest to Newest). Click UPDATE, and wait for the test cases to populate. Once test cases appear, click GENERATE REPORT.";
            document.getElementById("TestCaseInfo").innerHTML = message;

            return;
        }

        for (var i = 0; i < queryResults.testcase.length; i++) {
        document.write( queryResults.testcase + " " + i);
        document.write("<br/>");
        } 
```

任何想法将不胜感激！

ps 我对堆栈溢出很陌生。我认为有一种方法可以将这篇文章与我之前的文章联系起来，但我不知道该怎么做。请告知我相关帖子的正确发帖礼仪。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:56:48.423

我建议查询 LastVerdict 为空的所有测试用例，因为只有在测试用例具有关联的测试用例结果时才会填充 LastVerdict。在您的代码中，这看起来像：

```
 var queryClause = "(LastVerdict = \"\")";
    querySpec = {
        key   : "testcase",
        type  : "testcase",
        query: queryClause
    }; 
```

此查询应返回所有“尚未运行”的测试用例。然后你会在你的`showResults`函数中处理结果列表。

# css - 使用 CSS 自动滚动

> ID：15485694
> 
> 赞同：7
> 
> 时间：2013-03-18T19:54:49.477
> 
> 标签：css, animation, scroll

在我的网站 [基于 wordpress] 中，我有一个项目滑块（技术上带有一些文本的图像）。但是那个滑块不是自动滚动的，有一个左右滑动的按钮。

[http://i47.tinypic.com/97uxz4.jpg](http://i47.tinypic.com/97uxz4.jpg)

我想删除该按钮并使其自动滑动。我不想使用任何 javascript 。我想用 CSS 来完成。如果是的话，那有可能吗？

如果不可能做到这一点的最短解决方案是什么，这是我的工作站点

[http://aniyanetworks.net/博客](http://aniyanetworks.net/Blog)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-18T19:59:18.700

1.) 您不能使用 CSS 或纯 HTML 启动 DOM 操作。你总是需要一种操作语言（比如 JavaScript）

2.) 您可以通过覆盖当前 CSS 来删除按钮，并调整`visibility`或`display`标记以使它们消失或（占位符）不可见。

最后，您确实需要 JavaScript 来触发动态隐藏并使用`setInterval`s 实现自动滑动。

***编辑：***

这可能是您为滑块设置动画的东西：

```
#container {
  height: 200px;
  width: 800px;
  border: 1px solid #333;
  overflow: hidden;
  margin: 25px auto;
}

#box {
  background: orange;
  height: 180px;
  width: 400px;
  margin: 10px -400px;
  -webkit-animation-name: move;
  -webkit-animation-duration: 4s;
  -webkit-animation-iteration-count: infinite;
  -webkit-animation-direction: right;
  -webkit-animation-timing-function: linear;
}

#box:hover {
  -webkit-animation-play-state: paused;
}

@-webkit-keyframes move {
  0% {
    margin-left: -400px;
  }
  100% {
    margin-left: 800px;
  }
}
```

```
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>HTML</title>
  <link rel="stylesheet" href="main2.css" type="text/css" />
</head>

<body>
  <div id="container">
    <div id="box">as</div>
  </div>
</body>

</html>
```

**结果**

这是仅限 WebKit 的版本。这些是其他浏览器的等价物：

`@`关键帧：

```
@-moz-keyframes move {
@-o-keyframes move {
@keyframes move { 
```

内部`#box`（仅显示一个属性作为示例）：

```
-moz-animation-name: move;
-o-animation-name: move;
animation-name: move; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T20:14:59.040

这是使用的示例（[小提琴](http://jsfiddle.net/hbg9U/1/)）`animations`。您可以将此应用于您的`.post-list`：

```
.post-list {
    animation: slide infinite 3s alternate;
}

@keyframes slide {
  0% {
    margin-left: 0px;
  }
  50% {
    margin-left: -100px;
  }
  100% {
    margin-left: -200px;
  }
} 
```

要禁用悬停动画，请使用：

```
.post-list:hover {
    animation-play-state: paused;
} 
```

不要忘记`-webkit-...`Allendars 回答中的供应商前缀（等等）。

但是，当然，您必须四处玩耍。这应该只是它如何工作的提示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-23T18:13:21.847

这是一个在有限和无限元素宽度下自动滚动的示例：

```
/*use this js if your element width is unlimited an you want to scroll in a 
constant speed. else, you dont need this js code*/
var elemWidth = document.getElementById('scroll-element').offsetWidth;
var time = elemWidth/80; /* 80 = scrolling speed (44px/s)*/
document.getElementById('scroll-element').style.cssText = "animation: scroll "+time+"s linear infinite;"
```

```
.scroll-box{
    white-space: nowrap;
    font-size: 1.1em;
    overflow: hidden;
    padding: 20px 0;
    background-color: green;
}
.scroll-container{
  width: fit-content;
  direction: rtl; /*if you want to scroll left to right set dir to ltr */
}
#scroll-element{
  background-color: yellow;
  padding: 10px;
}

@-webkit-keyframes scroll{
  0% {
    margin-right: 0%; /*if you want to scroll left to right set margin-left*/

  }
  100%{
    margin-right: 100%;/*if you want to scroll left to right set margin-left*/
  }
}
```

```
<!DOCTYPE html>
    <html lang="en">
    <head>
    	<meta charset="utf-8">
    	<title>HTML</title>
    	<link rel="stylesheet" href="main2.css" type="text/css" />
    </head>
    <body>
      <div class="scroll-box">
       <div class="scroll-container">
        <span id="scroll-element">
          Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation
        </span>
       </div>
      </div>
    </body>
    </html>
```

# asp.net-mvc - 从 MVC4 中的不同视图或控制器重定向到以前的视图？

> ID：15485698
> 
> 赞同：0
> 
> 时间：2013-03-18T19:55:04.620
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我从用户级别和员工级别有相同的看法。当用户登录到应用程序时，他会看到他的活动并从`Create`视图中创建新活动。他们将从员工中搜索用户并查看用户信息，然后在同一`Create`视图中代表用户创建新活动。

棘手就在这里，两者都来不同的观点看`Create`风景。当他们取消并保存时，他们必须返回上一页。

如何处理？

```
ex:
http://localhost/members/listActivities - for members
http://localhost/staff/memberinfo

To 

http://localhost/members/create 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:03:43.203

对于“取消”操作，您可以完全跳过服务器端的参与，并使用 JavaScript 将浏览器引导到其先前的位置。（这还有一个额外的好处，那就是支持将来从另一个地方来到那里的任何人。）这样的事情：

```
<input type="button" value="Cancel" id="cancelButton" />
<!-- and later... -->
<script type="text/javascript">
    $('#cancelButton').click(function () {
        window.history.back();
    });
</script> 
```

对于“保存”操作，您能否在服务器上辨别他们是哪种“类型”用户并相应地指导他们？如果没有，也许您需要在 Create 操作首次响应视图时跟踪它们的来源。也许该操作可以接受重定向作为参数？像这样的东西：

```
public ActionResult Create(string redirectUrl) 
```

然后，您可以将该参数添加到创建视图模型中，将其存储在隐藏字段或类似性质的东西中。当您在保存时发回创建操作时，您将再次将其包含在该参数集中并将其用于重定向（当然，如果它是空的，则默认为特定页面）。

然后，每当您有一个`@Html.ActionLink`to时，`Create`您就会将 a`redirectUrl`作为路由值包含在内。

**编辑：**为了完整起见，正如 Oliver 在下面的评论中提到的，您可以尝试通过`Request.UrlReferrer`. 这将在非发布调用中`Create`用于自动填充将在发布调用中返回的隐藏字段。（因为在帖子调用中，引用者是页面本身，所以这没有帮助。）但是请记住这里的两个主要事项：

1.  浏览器控制引荐来源网址，而您没有。一些浏览器可能会发送错误的引荐来源网址，或者更常见的是根本没有。它可能在 10 次中有 9 次有效，也可能不会。但是，再次出于完整性考虑，它可以用作后备来捕获您（或其他开发人员）没有明确包含 a`redirectUrl`作为路由值的情况。
2.  这将控制器耦合到 HTTP 上下文。对于您的需求来说，这可能永远不会成为问题，但它首先破坏的是该操作方法的单元测试。除非绝对必要，否则最好避免这种耦合，并在使用时确切知道自己在做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:30:14.010

您可以向您的 UserViewModel 添加一个名为 IsStaff 的属性。这将是一个布尔值。对于员工用户，它将为 true，否则将为 false。然后在执行创建功能后，您将获得当前用户的 IsStaff 值并将其签入if 条件并将它们重定向到不同的操作。

```
public bool IsStaff{get;set;} 
```

对于创建：

```
public ActionResult Create()
{
    ...//do creation here
    if(UserRepository.GetUserByUsername(User.Identity.Name).IsStaff==true)
        return RedirectToAction("staff","memberinfo");
    else
        return RedirectToAction("members","listActivities");
    return View();
} 
```

# c# - 在字符串中使用双引号

> ID：15485701
> 
> 赞同：0
> 
> 时间：2013-03-18T19:55:23.217
> 
> 标签：c#, xml, string, concatenation

这是一个愚蠢的问题，也许它把我弄乱了，因为它已经很晚了，但是为什么当我尝试使用双引号时，下面的代码也会在反斜杠中添加：

C＃：

```
private List<string> dataList;
        private int ShowAuditLogForPrimaryID { get; set; }
        private string xmlString;
        private DataSet _dataSet;

  SqlDataReader reader = sqlCommand.ExecuteReader();

            dataList = new List<String>();

            while (reader.Read())
            {
                for (int i = 0; i < reader.FieldCount; i++)
                {
                    string rdr = reader[i].ToString();

                    dataList.Add(rdr);

                    string Name = reader.GetName(i); 

                    xmlString = xmlString + Name + "=" + " " + "\"" + dataList[i].ToString() + "\"" +  " ";

                    Console.WriteLine(xmlString);
                } 
```

它在字符串中包含反斜杠，这不允许我的 xml 阅读器读取它。

我很感激任何帮助。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T20:05:18.263

您的代码看起来不错，除了您在编写变量之前使用了它。如果您想查看其中的内容，请尝试将字符串打印到控制台；如果您在调试器中查看它，调试器将尝试再次转义引号。

更一般地说，尽量避免编写这样的代码。可以使代码更清晰的一些方法是：

首先，明智地使用常量：

```
const string quote = "\""; 
const string space = " ";
const string equals = "=";
xmlString =  Name + equals + space + quote + dataList[i].ToString() + quote + space; 
```

现在阅读起来要容易得多，因为那里没有所有这些引号。

其次，调用 to`ToString`是不必要的。`ToString`如有必要，字符串连接逻辑将自动调用。

第三，`String.Format`慎用。

```
const string xmlAttributeFormat = "{0} = \"{1}\" ";
string xmlString = String.Format(xmlAttributeFormat, Name, dataList[i]); 
```

# android - 当 ListView Header 中的微调器时未调用微调器 setOnItemSelectedListener

> ID：15485703
> 
> 赞同：1
> 
> 时间：2013-03-18T19:55:27.917
> 
> 标签：android, android-listview, spinner

如果我将微调器放在我的`ListView`主文件中，`setOnItemSelectedListener`则正常调用。

就像标题说的那样，如果我把微调器放到我的`ListView` **header**中，它不是。这是配置：

```
 ListView listView = getListView();
        listView.setDivider(null);

        LayoutInflater inflater = getActivity().getLayoutInflater();
        ViewGroup header = (ViewGroup) inflater.inflate(
                R.layout.mastercat_header, listView, false);

        listView.addHeaderView(header, null, false);

        sort = (Spinner) getActivity().findViewById(R.id.spinner1);
        strings = getActivity().getResources().getStringArray(
                R.array.sorting_cats);
        sAdapter = new SpinnerSortAdapter(getActivity(),
                android.R.layout.simple_spinner_item, strings);
        sAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        sort.setAdapter(sAdapter);
        sort.setOnItemSelectedListener(new MyOnItemSelectedListener()); // Not working properly. 

 public class MyOnItemSelectedListener implements OnItemSelectedListener {

   public void onItemSelected(AdapterView<?> parent, View view, int pos,
        long id) {

    if (pos == 0) {

        //stuff
    }

    if (pos == 1) {
        // stuff
    }

}

public void onNothingSelected(AdapterView<?> parent) {
    // Do nothing.
} 
```

}

附加信息：此列表视图是 jfeinstien`SlidingMenu`库中滑块菜单的一部分。它也是一个`Fragment`.

我发现错误还是我的代码错误？

# sql-server - SQL Server 分组、筛选和合并列以仅显示一行

> ID：15485706
> 
> 赞同：1
> 
> 时间：2013-03-18T19:55:48.930
> 
> 标签：sql-server, sql-server-2008, pivot

我有一张随属性垂直增长的表格。我正在使用 PIVOT 将行值转换为列并获取所需的数据。现在，我正在尝试根据某个过滤器连接存储在两个单独行中的值。连接后，我只需要显示该组中的一行，第二行的 id 列应该作为结果集中的新列。

我有一个示例数据库表和一个我处理过的查询：

**源表：**

```
id  name
1   weight
2   height
3   bp-systolic
4   bp-diastolic
5   ABI
6   Notes
7   bp-systolic
8   bp-diastolic 
```

**属性表：**

```
id  propertykey propertyvalue   
1   value       200
1   unit        lbs
1   ExtId       7
2   value       74
2   unit        in
2   ExtId       8
3   value       120
3   unit        mm[Hg]
3   ExtId       9
4   value       80
4   unit        mm[Hg]
4   ExtId       9
7   value       126
7   unit        mm[Hg]
7   ExtId       10
8   value       87
8   unit        mm[Hg]
8   ExtId       10 
```

现在通过我的查询，我可以将这两个表加入到列中，如下所示：

```
id  name            desc        ExtId   related_id
1   weight          200 lbs     7   
2   height          74 in       8   
3   bp-systolic     120 mm[Hg]  9   
4   bp-diastolic    80 mm[Hg]   9   
7   bp-systolic     126 mm[Hg]  10  
8   bp-diastolic    87 mm[Hg]   10 
```

我使用了以下查询：

```
select  
    id,
    name,
    value + ' ' + unit [desc],
    '' as related_id
from (
        select s.ID, s.name, p.propertykey, p.propertyvalue from source S
        inner join properties P on s.ID = P.ID
        where s.name in ('height', 'weight', 'bp-systolic', 'bp-diastolic')

) as P
PIVOT (MAX([PropertyValue]) FOR [PropertyKey] IN ([Value], [Unit], [ExtId])) AS PT 
```

如何合并/合并具有相同“ExtId”的“bp-systolic”和“bp-diastolic”的数据并显示如下一行：

```
id  name            desc        related_id
1   weight          200 lbs 
2   height          74 in   
3   bp-systolic     120/80          4
7   bp-systolic     126/87          8 
```

请注意，related_id 从“bp-diastolic”中获取“id”列，因为它们是基于“ExtId”相关的。

这是我的测试数据库表：

```
create table source (id int, name varchar(30))
create table properties (id int, propertykey varchar(30), propertyvalue varchar(30))

insert into source values (1, 'weight')
insert into source values (2, 'height')
insert into source values (3, 'bp-systolic')
insert into source values (4, 'bp-diastolic')
insert into source values (5, 'ABI')
insert into source values (6, 'notes')

insert into properties values (1, 'value', '200')
insert into properties values (1, 'unit', 'lbs')
insert into properties values (1, 'ExtId', '7')
insert into properties values (2, 'value', '74')
insert into properties values (2, 'unit', 'in')
insert into properties values (2, 'ExtId', '8')
insert into properties values (3, 'value', '120')
insert into properties values (3, 'unit', 'mm[Hg]')
insert into properties values (3, 'ExtId', '9')    
insert into properties values (4, 'value', '80')
insert into properties values (4, 'unit', 'mm[Hg]')
insert into properties values (4, 'ExtId', '9')
insert into properties values (5, 'value', '123')
insert into properties values (6, 'value', 'this is a sample note') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:06:56.353

您可以将数据透视表中的结果插入到临时表中，然后进行自联接，以便获得所需的 id 和值。因此，假设该表已命名`#measures`，您可以执行以下操作：

```
create table #measures(id int, name varchar(50), value varchar(1000), extId varchar(3));

insert into #measures
(id, name)
select id, name from source;

update m
  set extid = ext.propertyvalue
from #measures m
join properties ext on m.id = ext.id
  and ext.propertykey = 'extid';

update m
  set value = nm.propertyvalue
from #measures m
join properties nm on m.id = nm.id
  and nm.propertykey = 'value';

update m
  set value = value + ' ' + nm.propertyvalue
from #measures m
join properties nm on m.id = nm.id
  and nm.propertykey = 'unit';

        SELECT prim.ExtId, 
                prim.id,
                CASE WHEN dias.id IS NOT NULL THEN 'blood pressure' ELSE prim.name END AS measure,
                CASE WHEN dias.id IS NOT NULL THEN prim.[value] + '/' + dias.[value] ELSE prim.[value] END AS [desc],
                dias.id AS related_id
            FROM #measures prim
            LEFT JOIN #measures dias
                ON prim.ExtId = dias.ExtId
                AND prim.name = 'bp-systolic'
                AND dias.[name] = 'bp-diastolic'
            WHERE prim.name <> 'bp-diastolic' 
```

编辑：鉴于下面的评论，我已经对此进行了相当大的修改。示例也可以在这里找到：[http ://sqlfiddle.com/#!3/ced9c/4](http://sqlfiddle.com/#!3/ced9c/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:16:20.063

如果可以，请将设计更改为非[EAV](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)替代方案。带有列的表`weight, height, bp-diastolic, bp-systolic`会使查询变得更简单。重量存储在 LBS 中的事实不必存储在数据库中。由前端以最终用户选择的指标显示/编辑权重。

回到问题，在 EAV 中，您可以查找匹配的行，例如：

```
select  s.id
,       case when s.id = 3 then 'bloodpressure' else s.name end as name
,       max(case when p1.propertykey = 'value' then p1.propertyvalue end) +
        max(isnull('/' + p2.propertyvalue,'')) + 
        max(case when p1.propertykey = 'unit' then p1.propertyvalue end) as [desc]
,       max(p2.id) as related_id
from    source s
join    properties p1
on      s.id = p1.id
left join
        properties p2
on      p2.propertykey = 'value'
        and p2.id = 4 -- 4:bp-diastolic
        and p1.id = 3 -- 3:bp-systolic
where   s.id in (1,2,3) -- 1:weight, 2:height, 3:bp-systolic
group by
        s.id
,       s.name 
```

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!6/05ec2/4/0)

# c# - c#代码将多个Access数据库合并为一个大数据库

> ID：15485708
> 
> 赞同：-2
> 
> 时间：2013-03-18T19:55:55.703
> 
> 标签：c#, winforms, ms-access

我有多个相同的 Access 2007 数据库（accdb 文件），我想使用 c# 代码使用 windows 窗体将它们合并为一个，但我不知道该怎么做，因为我是 c# 数据库的初学者，但我想要将所有数据合二为一，因为所有数据表只有一两行，因为我使用访问表格来处理来自我大学不同学生的问卷，他们给我发了答案，所以我必须一一打开所有文件，我想增加一个Windows 窗体应用程序，因为我将从答案中获取一些结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:33:27.007

我建议您采取以下步骤：

1.  创建一个带有单个表的数据库来保存最终结果。该表应具有与单个文件完全相同的结构，但具有主键字段 - 数据库文件的路径或每行的其他一些唯一值（可以使用自动编号字段生成）。在任何情况下，您都可能需要一个额外的数据库路径列，特别是如果您需要防止多次重新读取同一个数据库文件。
2.  使用 OleDb 提供程序打开到最终数据库的 ADO.NET 连接。这需要 a) 创建一个`OleDbConnection`对象，b) 创建一个`OleDbCommand`在连接上运行的对象，c) 将`CommandText`命令对象设置为 SQL 语句，以及 d) 执行命令。
3.  您的 SQL 语句可能如下所示：

    ```
    INSERT INTO desttable (pkfield, field1, field2 ...)
    SELECT field1, field2
    FROM sourcetable 
    ```

    `sourcetable`也可以是不同数据库中的表，如下所示：

    ```
    INSERT INTO desttable (pkfield, field1, field2 ...)
    SELECT field1, field2
    FROM sourcetable IN path\to\mdb 
    ```

    因此，对于每条路径，您都可以通过每次替换适当的路径来构建 SQL 语句。

4.  如果要遍历特定文件夹中的所有 mdb 文件，可以在命名空间`EnumerateFiles`中使用类的方法。或者，您可以在命名空间中打开一个对话框。`Directory``System.IO``OpenFileDialog``Windows.Forms`
5.  一旦你弄清楚你想看到什么样的 UI，绑定到这个数据应该是微不足道的。

# javascript - nginx 不会从多个 nodejs 应用程序开始

> ID：15485714
> 
> 赞同：2
> 
> 时间：2013-03-18T19:56:04.400
> 
> 标签：javascript, node.js, proxy, nginx, reverse-proxy

我在站点启用/默认中有此配置

```
upstream domainone.com.ar {
    server 127.0.0.1:9000;
}
server {
listen   80;
server_name  www.domainone.com.ar;
rewrite ^/(.*) http://domainone.com.ar/$1 permanent;
}
server {
    listen 80;
    listen [::]:80 ipv6only=on;
    server_name domainone.com.ar;
    #access_log /var/log/nginx/example1.com/access.log;
    location / {
      if ($request_uri ~* \.(ico|css|js|gif|jpe?g|png)$) {
          expires 168h; 
          break;
      }
      proxy_set_header X-Real-IP $remote_addr;
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header Host $http_host;
      proxy_set_header X-NginX-Proxy true;
      proxy_pass http://domainone.com.ar;
      proxy_redirect off;
    }
}

upstream domaintwo.com.ar {
    server 127.0.0.1:8000;
}
server {
listen   80;
server_name  domaintwo.com.ar;
rewrite ^/(.*) http://domaintwo.com.ar/$1 permanent;
}
server {
    listen 80;
    listen [::]:80 ipv6only=on;
    server_name www.domaintwo.com.ar;
    #access_log /var/log/nginx/example1.com/access.log;
    location / {
      if ($request_uri ~* \.(ico|css|js|gif|jpe?g|png)$) {
          expires 168h; 
          break;
      }
      proxy_set_header X-Real-IP $remote_addr;
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header Host $http_host;
      proxy_set_header X-NginX-Proxy true;
      proxy_pass http://domaintwo.com.ar;
      proxy_redirect off;
    }
} 
```

当我尝试 /etc/init.d/nginx 启动时...什么也没有发生...没有错误没有日志没有什么...我的服务器是云服务器 debian 6、64bits nodejs v0.10 nginx 1.2.6 有配置有问题？？

# r - 在 R 中的绘图网格中添加边框

> ID：15485718
> 
> 赞同：4
> 
> 时间：2013-03-18T19:56:20.063
> 
> 标签：r, ggplot2, border, r-grid

我使用 ggplot 创建了一系列图并将它们打印在网格中。我想在整个网格周围添加一个边框，这样当我将图像插入演示文稿时，它就会被明确定义。

这是我正在使用的网格和打印命令的创建。我已经导入了所有必要的包。

```
library(grid)
pushViewport(viewport(gp=gpar(col="white"), 
             layout = grid.layout(4, 2, heights = unit(c(0.5,5,5,5), "null"))))  
grid.text("Summer Clear Day- August 2, 2012", 
          vp = viewport(layout.pos.row = 1, layout.pos.col = 1:2))
grid.frame(gp=gpar(col="white"), draw=TRUE)
print(tot, vp = viewport(layout.pos.row = 2, layout.pos.col = 1))
print(gh, vp = viewport(layout.pos.row = 2, layout.pos.col = 2))
print(dir, vp = viewport(layout.pos.row = 3, layout.pos.col = 1))
print(ir, vp = viewport(layout.pos.row = 3, layout.pos.col = 2))
print(dh, vp = viewport(layout.pos.row = 4, layout.pos.col = 1))
print(uv, vp = viewport(layout.pos.row = 4, layout.pos.col = 2)) 
```

grid.frame 似乎没有做任何事情。我的背景是黑色的，所以我希望在它周围创建一个白色边框。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T20:11:11.990

例如，您可以使用`grid.rect`。`viewport` 在绘制你的情节之前，我会把它放在一个单独的地方。我是说：

1.  我推第一个视口，绘制矩形（框架）
2.  我推动第二个视口，我创造了你所有的情节。
3.  我弹出我的 2 个视口

![在此处输入图像描述](../Images/8e331f082139e8ae38f60ad9d33561ab.png)

```
pushViewport(plotViewport(c(5,5,5,5)))
grid.rect()
grid.rect(width=unit(1, "npc")-unit(0.5,'lines'),
          height=unit(1, "npc")-unit(0.5,'lines'))
pushViewport(plotViewport(c(1,1,1,1),
                      layout = grid.layout(4, 2, 
                                           heights =     unit(c(1,5,5,5), "null")))) 
grid.text("Summer Clear Day- August 2, 2012", 
          vp = viewport(layout.pos.row = 1, layout.pos.col = 1:2))
k1 <- ggplot(mtcars, aes(factor(cyl), mpg))  + geom_boxplot()

print(k1, vp = viewport(layout.pos.row = 2, layout.pos.col = 1))
print(k1, vp = viewport(layout.pos.row = 2, layout.pos.col = 2))
print(k1, vp = viewport(layout.pos.row = 3, layout.pos.col = 1))
print(k1, vp = viewport(layout.pos.row = 3, layout.pos.col = 2))
print(k1, vp = viewport(layout.pos.row = 4, layout.pos.col = 1))
print(k1, vp = viewport(layout.pos.row = 4, layout.pos.col = 2))
upViewport(2) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T20:27:56.933

@agstudy 答案的精简版：

```
 require(gridExtra)
  grid.draw(grobTree(arrangeGrob(k1, k1, k1, k1, k1, k1, ncol=2,
                       main="Summer Clear Day- August 2, 2012"), 
                     rectGrob(gp=gpar(lwd=2, fill=NA)))) 
```

# php - 为什么我的自定义 404 处理程序看不到我的静态内容？

> ID：15485729
> 
> 赞同：0
> 
> 时间：2013-03-18T19:56:40.060
> 
> 标签：php, apache, seo, http-status-code-404, handler

我决定在我的项目中使用 SEO 友好的网址。这就是为什么我通过我的 404 自定义处理程序（index.php）发送所有请求

```
ErrorDocument 404 /index.php 
```

这是我在 URI 中检查路径的地方

```
if(isset($_SERVER['REQUEST_URI'])){
 $path_begin_expected = "/page/";
 $path_begin_evaluated= substr($_SERVER['REQUEST_URI'], 0, strlen($path_begin_expected));
 if($path_begin_expected == $path_begin_evaluated ){
    $page = substr($_SERVER['REQUEST_URI'], strlen($path_begin_expected), strlen($_SERVER['REQUEST_URI']));
 }
 else {
    $page = null;
 }
}
else {
 $page = null;
} 
```

然后我使用 $page 来决定返回给用户的内容

```
switch($page)
{
case 'main':
    include("webapps/main/pages/main_bc.php");
    break;
...other cases here
} 
```

我也用过

```
Alias /page c:/work/Languator/trunk/php/htdocs/my_application/ 
```

现在，如果

```
$_SERVER['REQUEST_URI'] 
```

是正确的（即请求具有服务器上存在的路径）这样的请求可以正常工作

```
/page/home or /page/help-1 or /page/more-docs 
```

但是当我使用这些请求时：

```
/page2/home or /pag/help-1 or /pagex/more-docs/ 
```

没有加载css文件或js文件或img图片。我的浏览器要求这些文件是这样的：

```
mydomain/page2/css/styles.css
mydomain/pag/css/styles.css
mydomain/pagex/more-docs/css/styles.css !!! 
```

但显然这些路径不存在。

有人可以解释这是为什么吗？我该如何更换

```
path2 into path
pag into path
pagex/more-docs into path 
```

或者这个问题还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:29:51.790

从错误文档链接到 CSS 和 JS 文件时，不应使用相对链接。`/`使用或开始您的 CSS 和 JS 链接`http://example.com/`。以下两种情况都是可以接受的。

```
 <link rel="stylesheet" href="/css/styles.css" type="text/css">
 <link rel="stylesheet" href="http://example.com/css/styles.css" type="text/css"> 
```

另一种解决方案是`base`在页面头部包含一个标签，告诉浏览器如何解释所有相关链接：

```
<base href="http://example.com/"> 
```

# jquery - 使用 JSONP 的跨域 ajax 请求

> ID：15485730
> 
> 赞同：0
> 
> 时间：2013-03-18T19:56:45.817
> 
> 标签：jquery, cross-domain, jsonp

我需要在我的应用程序中从其他域获取数据。我正在尝试使用 jsonp，但每次出现错误“80020101”时

这是我在“其他域”的代码（ASP.NET MVC 4）

```
 public ActionResult Test()
 {
    return Json(new { foo = "bar", baz = "Blech" }, JsonRequestBehavior.AllowGet);
 }
 public string Test2()
 {
    return "aaa";
 } 
```

这是我发送请求的ajax方法

```
$.ajax({
   url: 'https://192.168.0.61/CryptoProTestTool/Home/Test2/',
   type: 'GET',
   dataType: 'jsonp',
   error: function(xhr, status, error) {
      alert("error"); 
   },
   success: function(json) {
      alert("success");
   }
   }); 
```

怎么了？为什么我在这个简单的例子中总是出错？我对 Test 和 Test2 数据有疑问...

手动测试显示服务发送数据 ![在此处输入图像描述](../Images/c0dd3e1832ba8c81d4a309272f2da44a.png)

**编辑 1：**我有一个错误“无法完成操作。错误 80020101。” 在 ajax 请求的错误函数中。我试图像这样改变 Test2

```
public ActionResult Test2()
{
  return Content("<script language='javascript' type='text/javascript'>alert('Hello world!');</script>"); 
} 
```

但是有同样的问题

**编辑2：** 再次嗨！我被告知工作解决方案，但在我运行它后出现问题。

```
 public ActionResult Test2()
 {
    return Content("MyMethod('test12345');"); 
 } 
```

和Javascript代码：

```
function onPageLoad() {
   CheckCryptoProAvailable();
}

function CheckCryptoProAvailable() {

  $.ajax({
     url: 'https://192.168.0.61/CryptoProTestTool/Home/Test2/',
     type: 'GET',
     dataType: "jsonp",
     error: function(xhr, status, error) {
        alert("error = " + error.toString()); 
     },
     success: function(json) {

     }
  });

}

function MyMethod(testValue){
 alert(testValue);

} 
```

一切正常，请求后调用 MyMethod。但在它之后，我看到一个来自 ajax 请求错误处理程序的窗口。又怎么了？

![在此处输入图像描述](../Images/bb6da34cab364eca6f5c6cc33399f03b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:01:36.810

你从哪里得到这个错误？“aaa”不是有效的 JavaScript。要使用 jsonp，您应该返回类似

```
callbackFunc("aaa"); 
```

# javascript - 使用逗号还是分号？

> ID：15485735
> 
> 赞同：63
> 
> 时间：2013-03-18T19:57:07.250
> 
> 标签：javascript, syntax

给定以下代码：

```
var fn = function () {
    var x = 'x',
    y = 'y';
    this.a = 'a',
    this.b = 'b',
    this.c = 'c';
    this.d = 'd',
    this.e = 'e';   
} 
```

可以看出，两者兼而有之。

使用其中一个有什么好处？

我的理解是分号是结束语句。并且应该使用逗号将多个声明串在一起。

那么可以肯定地说，在这个例子中应该只有两个分号吗？

```
var fn = function () {
    var x = 'x',
    y = 'y';
    this.a = 'a',
    this.b = 'b',
    this.c = 'c',
    this.d = 'd',
    this.e = 'e';   
} 
```

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-03-18T20:02:52.283

逗号运算符是可以在表达式中使用的运算符。它用于分隔出多个不同的表达式，其含义是“计算以下所有表达式，然后产生最终表达式的值”。例如：

```
a = 1, b = 2, c = 3 
```

意思是“计算`a = 1`，然后`b = 2`，然后`c = 3`，然后计算表达式的值`c = 3`。

分号不是运算符，不能在表达式中使用。它用作 JavaScript 语法的一部分，用于标记被视为语句的表达式的结尾。例如，你可以说

```
a = 1; b = 2; c = 3; 
```

这将意味着“依次执行三个语句：将第一个表达式作为第一个语句，第二个表达式作为第二个语句，第三个表达式作为第三个语句。”

在这方面，两者并不是完全可以互换的。例如，你不能写

```
var a = 1, var b = 2; 
```

因为`var a = 1`and`var b = 2`是语句，而不是表达式，因此不能用逗号分隔。您必须在此处使用分号。

（注：你可以说

```
var a = 1, b = 2; 
```

因为该语言特别允许在声明语句的语法中使用这种逗号。在这里，逗号不用作运算符。）

同样，你不能说

```
a = (b = 1; c = 2); 
```

因为这里表达式的右边一定是表达式，不是语句，`;`是用来分隔语句的。内部分号必须是逗号。（话说回来，这段代码一开始就非常尴尬和不寻常，所以你可能根本不应该这样做！）

从文体的角度来看，逗号运算符很少使用，而且非常晦涩难懂，可能会绊倒相当称职的 JavaScript 编码人员。因此，我强烈建议不要使用它，而是遵循 JavaScript 中关于使用分号终止语句的既定约定，即使使用逗号分隔每个用作语句的表达式是等效的并且在语法上是合法的。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-03-18T20:00:37.263

不，逗号有三种含义。

1.  使用变量声明，它只是让您`var`在每个变量之前省略。
2.  对于表达式，*“逗号运算符计算其两个操作数（从左到右）并返回第二个操作数的值。”*
3.  函数声明和函数调用中的单独参数，但这对每个程序员来说都应该是显而易见的。

两个例子；

```
alert((2,3)); //3 
```

> 请注意，var 语句中的逗号不是逗号运算符，因为它不存在于表达式中。相反，将多个语句组合为一个是 var 语句中的一个特殊字符。但实际上，逗号的行为与逗号运算符几乎相同。

[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comma_Operator?redirectlocale=en-US&redirectslug=JavaScript/Reference/Operators/Special/Comma_Operator)

[逗号运算符什么时候有用？](https://stackoverflow.com/q/9579546/601179)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-18T19:59:30.163

真的没关系。据我所知，使用逗号对速度没有好处。

只需使用您喜欢的任何东西:)

这就是*[JavaScript - The Good Parts](http://my.safaribooksonline.com/book/programming/javascript/9780596517748/jslint/comma)*必须说的：

> 逗号运算符可能导致过于复杂的表达式。它还可以掩盖一些编程错误。
> 
> JSLint 希望看到逗号用作分隔符，但不用作运算符（for 语句的初始化和增量部分除外）。它不希望在数组文字中看到省略的元素。不应使用额外的逗号。逗号不应出现在数组字面量或对象字面量的最后一个元素之后，因为它可能会被某些浏览器误解。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-18T19:59:42.877

最好始终与惯例保持一致。要么全是分号，要么全是逗号，我相信你更喜欢在任何地方使用分号而不是逗号。

也没有速度增益，所以没有什么可担心的。

# ruby - 红宝石生成器 xml

> ID：15485738
> 
> 赞同：0
> 
> 时间：2013-03-18T19:57:35.867
> 
> 标签：ruby, xml, builder, zuora

我正在使用 Builder 在 Ruby 中创建 xml。当我调用 generate_object 方法两次时，它工作正常。但是，在循环中执行此操作时，我会得到一些奇怪的结果。两次输入都是一样的。

这是代码。

```
def generate_xml
    xml = Builder::XmlMarkup.new

  #this doesn't work
  #objects.each do |o|
  #  generate_object xml, o
  #end
  #this works...
  generate_object(xml, objects[0])
  generate_object(xml, objects[1])          
end
def generate_object(builder, object)
    builder.__send__('ins0', :zObjects, 'xsi:type' => "ins1:account") do |a|
        object.to_hash.each do |k,v|
            #puts "key #{k} #{v}!!!!!!!!!!!!!!!!!!!"
            a.__send__('ins1', k.to_s.zuora_camelize.to_sym, v) unless v.nil?
        end
    end
end 
```

循环通过对象打印：

```
<env:Body>
  <ins0:create>
    [#<Zuora::Objects::Account:0x007fcd69d61788 
      @changed_attributes={
        "auto_pay"=>nil, 
        "currency"=>nil, 
        "batch"=>nil, 
        "bill_cycle_day"=>nil, 
        "status"=>nil, 
        "payment_term"=>nil, 
        "name"=>nil
      },
      @auto_pay=false, 
      @currency="USD", 
      @batch="Batch1", 
      @bill_cycle_day=1, 
      @status="Draft", 
      @payment_term="Due Upon Receipt", 
      @name="test">, 
    #<Zuora::Objects::Account:0x007fcd69d60d10 
      @changed_attributes={
        "auto_pay"=>nil, 
        "currency"=>nil, 
        "batch"=>nil, 
        "bill_cycle_day"=>nil, 
        "status"=>nil, 
        "payment_term"=>nil, 
        "name"=>nil
      }, 
      @auto_pay=false, 
      @currency="USD", 
      @batch="Batch1", 
      @bill_cycle_day=1, 
      @status="Draft", 
      @payment_term="Due Upon Receipt", 
      @name="test 2">
    ]
  </ins0:create>
</env:Body> 
```

在没有循环的情况下执行这两个调用：

```
<env:Body>
  <ins0:create>
    <ins0:zObjects xsi:type="ins1:account">
      <ins1:AutoPay>false</ins1:AutoPay>
      <ins1:Batch>Batch1</ins1:Batch>
      <ins1:BillCycleDay>1</ins1:BillCycleDay>
      <ins1:Currency>USD</ins1:Currency>
      <ins1:Name>test</ins1:Name>
      <ins1:PaymentTerm>Due Upon Receipt</ins1:PaymentTerm>
      <ins1:Status>Draft</ins1:Status>
    </ins0:zObjects>
    <ins0:zObjects xsi:type="ins1:account">
      <ins1:AutoPay>false</ins1:AutoPay>
      <ins1:Batch>Batch1</ins1:Batch>
      <ins1:BillCycleDay>1</ins1:BillCycleDay>
      <ins1:Currency>USD</ins1:Currency>
      <ins1:Name>test 2</ins1:Name>
      <ins1:PaymentTerm>Due Upon Receipt</ins1:PaymentTerm>
      <ins1:Status>Draft</ins1:Status>
    </ins0:zObjects>
  </ins0:create>
</env:Body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:17:26.687

看起来您只是将 .each 的输出与您想要返回的内容混为一谈。

尝试：

```
def generate_xml
  xml = Builder::XmlMarkup.new

  objects.each do |o|
    generate_object xml, o
  end
  # Return the builder object, not the output of .each (the list of objects)!
  xml
end 
```

# emma - Emma 无法找到 CTL，因此无法执行 ForceDump

> ID：15485741
> 
> 赞同：1
> 
> 时间：2013-03-18T19:57:41.963
> 
> 标签：emma, ctl

[我从https://sourceforge.net/projects/emma/files/emma-testing/2.1.5320/](https://sourceforge.net/projects/emma/files/emma-testing/2.1.5320/)下载了 emma 2.1.5320 。然后对 jar 文件进行检测并启动应用程序。然后尝试通过执行转储覆盖数据

```
 java -cp emma ctl -connect localhost:47653 -command coverage.get,coverage.ec -command coverage.reset 
```

但得到以下异常：

```
Exception in thread "main" java.lang.NoClassDefFoundError: ctl    
Caused by: java.lang.ClassNotFoundException: ctl
at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: ctl. Program will exit. 
```

我认为对于我正在使用的版本，我不应该得到这个异常。请让我知道如何解决这个问题。任何帮助将不胜感激。

谢谢

基兰

# css - 跨浏览器渐变：浏览器性能问题？

> ID：15485742
> 
> 赞同：2
> 
> 时间：2013-03-18T19:57:48.027
> 
> 标签：css, svg, less

我试图标记这个问题`[subjective]`（它不会让我），因为我意识到它可能无法回答，可能是我不知道如何找到的常识，或者可能是意见问题。

几个月来，我一直在使用编译（LESS）样式表构建商业网站，每次将背景渐变应用于元素时，规则如下：

```
body {
  background: #592a0e;
  background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiPjxsaW5lYXJHcmFkaWVudCBpZD0iZyIgeDE9IjAiIHkxPSIwIiB4Mj0iMSIgeTI9IjAiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iIzJkMTUwNyIgLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM4NTNmMTUiIC8+PC9saW5lYXJHcmFkaWVudD48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2cpIiAvPjwvc3ZnPg==);
  background: -webkit-gradient(linear, 0 0, 100% 0, from(#2d1507), to(#853f15));
  background: -webkit-linear-gradient(left, #2d1507, #853f15);
  background: -moz-linear-gradient(left, #2d1507, #853f15);
  background: -ms-linear-gradient(left, #2d1507, #853f15);
  background: -o-linear-gradient(left, #2d1507, #853f15);
  background: linear-gradient(left, #2d1507, #853f15);
  filter: progid:dximagetransform.microsoft.gradient(StartColorStr='#2d1507', EndColorStr='#853f15', GradientType=1);
  -ms-filter: "progid:DXImageTransform.Microsoft.Gradient(StartColorStr='#2d1507', EndColorStr='#853f15', GradientType=1)";
  zoom: 1;
} 
```

SVG 内联渐变，从开始和结束颜色以 LESS 编译，适用于 IE9。否则 IE9 将在非零元素的圆角之外显示矩形 IE 过滤器渐变`border-radius`。（CSS 中的其他地方设置`.ie9 a, .ie9 div { filter: none !important; }`为仅抑制 IE9 的 IE 过滤器。）

***我的问题：***我担心可能出现的性能问题，并想了解如何全面调查它们，或者如果这些问题很小，可以永久消除这些担忧。例如，[该站点](http://krishna.ie)基于所有水平和垂直渐变、菜单项、标题、按钮和悬停属性使用了这样的背景声明 21 次。

我没有证据表明此类站点存在性能问题，但我如何确定以下假设问题是否会导致性能问题，我该如何调查它，以及我如何重新编码以避免它？

*   更复杂的 CSS 是否会导致渲染时间变慢？所有这些网站都设计为对移动设备友好，所以我担心渲染和解析可能是旧移动浏览器上的问题。
*   为了简化 CSS，并避免过度使用浏览器类`ie9`（我们通常`modernizr`用于特征检测），SVG 渐变和 CSS 渐变声明保持在同一个规则集中。替代方案将是更复杂的 CSS，为每个具有渐变的元素使用单独的 IE9 规则（带有 SVG 渐变）。在我决定保持 CSS 简单时，我担心上面的代码可能会绘制两次背景，这可能会导致性能问题。
*   对于已经了解 CSS 背景渐变的非 IE 浏览器，解析内联 SVG 渐变是否繁琐？每次呈现页面时，还是仅在最初读取和解析 CSS 时，这是否会导致性能下降？

如果我犯了任何严重的错误、遗漏了任何重要的浏览器或忽略了任何其他性能问题，我当然愿意更正。如果有人有兴趣，我将发布编译 SVG 渐变的 LESS 代码，尽管它与我的问题没有具体关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:16:18.967

**从使用浏览器检查器工具开始**

我的建议是首先检查 Firefox 或 Chrome 中“网络”选项卡下的加载时间。

**您询问**

> 更复杂的 CSS 是否会导致渲染时间变慢？所有这些网站都设计为对移动设备友好，所以我担心渲染和解析可能是旧移动浏览器上的问题。
> 
> 对于已经了解 CSS 背景渐变的非 IE 浏览器，解析内联 SVG 渐变是否繁琐？每次呈现页面时，还是仅在最初读取和解析 CSS 时，这是否会导致性能下降？

**正如你所说，有点暗示。但我的建议**

显然，CSS 文件越大，加载所需的时间就越长。有时大量的 CSS 是不可避免的。您可以查看 CSS 压缩器。或者将您的样式拆分为单独的样式表，并根据使用的设备仅加载必要的样式。

我对 LESS 不是很熟悉，因为我了解 JavaScript 会进行编译，这让我想知道为什么人们选择 LESS 而不是 SASS。这可能有点短视。但我个人更喜欢 SASS 而不是 LESS，因为所有编译都发生在服务器端（*但无论如何都无关紧要）*。

假设 LESS 的工作方式与 SASS 类似，我建议专门为背景渐变编写一个 Mixin，然后根据需要将其包含到您的样式表中。也许为 IE 特定的 CSS 制作一个单独的 LESS 文件。

# vhdl - VHDL 变量 信号

> ID：15485749
> 
> 赞同：36
> 
> 时间：2013-03-18T19:58:02.363
> 
> 标签：vhdl

我一直在阅读有关 VHDL 编程的文本（前面没有，所以不能给出标题）。我一直很难从文本中理解的一个问题是何时使用变量与信号。我想我对何时使用信号（即内部信号）有一个清晰的了解，但对于变量来说并没有那么多。

我确实注意到文本通常在定义进程之前声明和初始化信号，而在进程内部声明变量（我猜从未初始化......）。

无论如何，无论是通过定义还是通过示例来清除它都会很棒！

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-19T12:08:38.733

与普通并行代码不同，当您要创建序列化代码时使用变量。（序列化意味着命令按顺序执行，一个接一个而不是一起执行）。变量只能存在于进程内部，值的赋值不是并行的。例如，考虑以下代码：

```
signal a,b : std_logic_vector(0 to 4);

process (CLK)
    begin
        if (rising_edge(clk)) then
            a <= '11111';
            b <= a;
        end if;
end process; 
```

将在进程运行之前放入`b`值，而不是'. 另一方面，代码：`a``'11111`

```
signal a,b : std_logic_vector(0 to 4);

process (CLK)
    variable var : std_logic_vector(0 to 4);
    begin 
        if (rising_edge(clk)) then
            var := '11111';
            a <= var;
            b <= var;
        end if;
end process; 
```

会将值`'11111'`放入`a`和`b`中。

坦率地说，根据我的经验，大多数时候你不需要使用变量，我唯一使用它的地方是在一个循环中，我需要检查多个信号中的任何一个是否为 1：

```
type    BitArray        is array (natural range <>) of std_logic;

--...

entity CAU_FARM is
    port
        (
            --   IN   --
              REQUEST         : in BitArray(0 to (FLOW_num -1));
              --..
        );
end CAU_FARM;
--...

farm_proc: process(CLK_FARM, RESET)
    variable request_was_made_var : std_logic;
    begin
    if RESET = C_INIT then 
       -- ...

    elsif rising_edge(CLK_FARM) then

            -- read state machine --
        case read_state is
            when        st_read_idle =>

                request_was_made_var := '0';
                for i in 0 to (FLOW_num -1) loop
                    if (REQUEST(i) = '1') then
                        request_was_made_var := '1';
                    end if;
                end loop;
                if (request_was_made_var = '1') and (chosen_cau_read_sig /= 8) then
                    read_state <= st_read_stage_1;
                    for i in 0 to (FLOW_num -1) loop
                        if (i = choice_out_sig) then
                            ACKNOWLEDGE(i) <= '1';
                        end if;
                    end loop;
                else
                    read_state <= st_read_idle;
                end if;
            ------------------------
            when        st_read_stage_1 =>
            --... 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-18T21:08:19.933

变量旨在用于在流程中存储值。因此它的范围是有限的。与合成硬件的关系往往不太直接。

变量也会立即获得值，而信号则不会。以下两个过程具有相同的效果：

```
signal IP, NEXTP : STD_LOGIC_VECTOR(0 to 5);

process (CLK)
    Variable TEMP : STD_LOGIC_VECTOR(0 to 5);
    begin
        if (rising_edge(clk)) then
            TEMP := IP;
            IP <= NEXTP;
            NEXTP <= TEMP(5) & TEMP(0 to 4);
        end if;
end process; 
```

* * *

```
signal IP, NEXTP : STD_LOGIC_VECTOR(0 to 5);

process (CLK)

    begin
        if (rising_edge(clk)) then
            IP <= NEXTP;
            NEXTP <= IP(5) & IP(0 to 4);
        end if;
end process; 
```

这是因为更新已安排好，但实际上尚未更改。其中`<=` 包括一个时间元素。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-04-16T09:03:41.900

*变量*：临时位置；它们用于在“过程”中存储中间值。

*信号*：更新信号值。运行由信号变化激活的进程。当进程运行时，系统中的所有信号保持不变。

**差异：**

*变量*：它们是本地的；没有延迟；在进程内声明

*信号*：它们是全局的（在开始之前）；因电线延迟；在关键字开始之前声明

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-31T15:15:00.250

附带说明一下，变量不仅可以存在于进程中（还可以存在于过程中），此外，它们可以是可从多个进程访问的共享变量（参见： http: [//www.ics.uci.edu/~jmoorkan/vhdlref/ var_dec.html](http://www.ics.uci.edu/~jmoorkan/vhdlref/var_dec.html) )。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-05-12T11:37:54.077

变量——它们是进程的局部变量，一旦变量获得新值，它们的值就会更新。

共享变量 - 类似于变量，但它们可以从不同的进程中访问。

信号 - 它们的范围更大，每个进程都可以访问架构中声明的信号或特定块（如果有）。进程挂起或遇到等待语句后会有值更新。

# jsf - JSF 捕获会话超时

> ID：15485751
> 
> 赞同：1
> 
> 时间：2013-03-18T19:58:06.873
> 
> 标签：jsf, session, timeout

是否有可能“拦截”会话超时？

我尝试了`HttpSessionListener`，但据我所知，当调用 HttpSessionListener.sessionDestroyed()` 方法时，会话已经被销毁。（所以我没有机会确定用户，拥有超时的会话）

另一个选项是 PhaseListener，在 restoreView-Phase 中检查 Session 是否是“新的”。

但是，我需要在“第二次”会话超时时执行一些操作 - 不是在以后的任何刷新时，也不是在以后的任何登录时。

（背景：需要解除某些对象的锁，用户可能在遇到超时时一直在工作。）

有没有办法做到这一点？

* * *

编辑：尝试1：在有问题的SessionBeans上使用@PreDestroy：

```
@SessionScoped
@Named
public class SessionBean1 implements Serializable {
   ...
  @PostConstruct
  private void pconstruct(){
     System.out.println("PostConstructing Session Bean 1");
  }
  @PreDestroy
  public void destroy(){
     System.out.println("PreDestroying Session Bean 1");
  } 
} 
```

和

```
 public class SessionListener implements HttpSessionListener {

    @Override
    public void sessionCreated(HttpSessionEvent se) {
        //nothing to do right here.
    }

    @Override
    public void sessionDestroyed(HttpSessionEvent se) {
        System.out.println("Session Listener says 'destroyed'.");
    }
} 
```

预期结果：当会话超时或用户注销时，destroy() 被调用。

结果：两者都没有发生。

```
22:29:11,199 INFO  [stdout] (http--0.0.0.0-8090-1) ---- Started RESTORE_VIEW 1 ----
22:29:11,208 INFO  [stdout] (http--0.0.0.0-8090-1) ---- Started RENDER_RESPONSE 6 ----
22:29:11,890 INFO  [stdout] (http--0.0.0.0-8090-1) PostConstructing Session Bean 1
22:29:11,898 INFO  [stdout] (http--0.0.0.0-8090-1) -- Finished Request --
22:30:11,905 INFO  [stdout] (ContainerBackgroundProcessor[StandardEngine[jboss.web]]) Session Listener says 'destroyed'. 
```

* * *

尝试 2：试图在 SessionListener 中拦截会话超时，这显然是在记录超时：

```
public class SessionListener implements HttpSessionListener {

    @Inject
    private MySession mySession;

    @Override
    public void sessionDestroyed(HttpSessionEvent se) {
        System.out.println("Destroying Session of owner: " + mySession.getCurrentUser().getShortName());
    }
} 
```

预期结果：仍然可以访问 Session bean。

结果：'ContextNotActiveException'：

```
22:38:57,948 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/test]] (ContainerBackgroundProcessor[StandardEngine[jboss.web]]) Session event listener threw exception: org.jboss.weld.context.ContextNotActiveException: WELD-001303 No active contexts for scope type javax.enterprise.context.SessionScoped
    at org.jboss.weld.manager.BeanManagerImpl.getContext(BeanManagerImpl.java:598) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.jboss.weld.bean.proxy.ContextBeanInstance.getInstance(ContextBeanInstance.java:71) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:79) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at my.namespace.test$Proxy$_$$_WeldClientProxy.getCurrentUser(MySession$Proxy$_$$_WeldClientProxy.java) [classes:]
    at my.namespace.listener.SessionListener.sessionDestroyed(SessionListener.java:16) [classes:]
    at org.apache.catalina.session.StandardSession.expire(StandardSession.java:690) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.session.StandardSession.isValid(StandardSession.java:585) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.session.ManagerBase.processExpires(ManagerBase.java:390) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.session.ManagerBase.backgroundProcess(ManagerBase.java:375) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1316) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1601) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1610) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1610) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1590) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_33] 
```

* * *

尝试 3：检查会话属性是否有任何使用：

```
public class SessionListener implements HttpSessionListener {

    @Override
    public void sessionDestroyed(HttpSessionEvent se) {
        int i=0;
        while (se.getSession().getAttributeNames().hasMoreElements()){
            String name = se.getSession().getAttributeNames().nextElement();
            System.out.println("Checking " + name);
            Object value = se.getSession().getAttribute(name);
            System.out.println("value was: " + value);

            if (i++ == 20){
                break;
            }
        }
    }

    @Override
    public void sessionCreated(HttpSessionEvent se) {
        // nothing to do right here.
    }
} 
```

预期结果：可用属性列表。

结果：无限循环：

```
22:47:48,025 INFO  [stdout] (ContainerBackgroundProcessor[StandardEngine[jboss.web]]) Checking org.jboss.weld.context.conversation.ConversationIdGenerator
22:47:48,025 INFO  [stdout] (ContainerBackgroundProcessor[StandardEngine[jboss.web]]) value was: org.jboss.weld.context.conversation.ConversationIdGenerator@1edd87d
22:47:48,026 INFO  [stdout] (ContainerBackgroundProcessor[StandardEngine[jboss.web]]) Checking org.jboss.weld.context.conversation.ConversationIdGenerator
22:47:48,027 INFO  [stdout] (ContainerBackgroundProcessor[StandardEngine[jboss.web]]) value was: org.jboss.weld.context.conversation.ConversationIdGenerator@1edd87d
22:47:48,028 INFO  [stdout] (ContainerBackgroundProcessor[StandardEngine[jboss.web]]) Checking org.jboss.weld.context.conversation.ConversationIdGenerator
22:47:48,029 INFO  [stdout] (ContainerBackgroundProcessor[StandardEngine[jboss.web]]) value was: org.jboss.weld.context.conversation.ConversationIdGenerator@1edd87d 
```

编辑：

最后，我使用了 HttpSessionListener 并在所有 Session Scoped bean 旁边创建了 SessionMap: 中的手动条目`FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("user_id", 5)`。

该值可以在 SessionListener 中访问，并允许我关闭给定用户的所有锁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:44:51.160

> *我尝试了 HttpSessionListener，但据我所知，当调用 HttpSessionListener.sessionDestroyed() 方法时，Session 已经被销毁。（所以我没有机会确定用户，拥有超时的会话）*

我不确定这是如何形成问题的。您仍然`HttpSession`可以通过参数获得具体实例，`HttpSessionEvent`您可以在其上调用`getAttribute()`方法等，以检查登录用户是否存储为会话属性。

```
User user = (User) event.getSession().getAttribute("user");
// ... 
```

* * *

**更新**：根据您的失败尝试：

1.  不知道为什么`@PreDestroy`不被调用。这将是 CDI 实施的具体问题。它至少与 JSF/Servlet 无关。

2.  您不应该抓取注入的`@Named`实例。您应该直接将具体实例作为会话属性获取。`HttpSession#getAttribute()`在具体托管 bean 名称上使用。

3.  您在每次迭代期间重新创建迭代器。您应该创建一次并在每次迭代中重用它。放在`getAttributeNames()`外面`while`。这个问题与 JSF/Servlet 无关，只是基本的 Java。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T23:09:13.237

我这样做的方法是使 UserBean 本身成为`HttpSessionListener`. 然后它仍然拥有自己的所有状态，因此它知道它“是谁”，无论调用回调时会话是否仍然具有属性。

# c# - 删除并替换 ScintillaNET 中的最后一行

> ID：15485759
> 
> 赞同：0
> 
> 时间：2013-03-18T19:58:45.690
> 
> 标签：c#, windows, forms, scintilla

我需要一个代码片段来删除 ScintillaNET 控件的最后一行并向其附加一行。我试过这个但没有奏效：

```
 scintilla1.GoTo.Line(scintilla1.Lines.Count);
        int nowPosition = scintilla1.Caret.Position;
        scintilla1.Text.Remove(nowPosition); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T00:43:03.583

抱歉迟到了。我找到了这篇文章，很遗憾没有看到任何好的东西（不是你的错），所以我一直在环顾四周，发现了这个：

```
((INativeScintilla)scintilla).DeleteBack() 
```

这将模拟退格键按下（删除光标左侧的 1 个字符）。它不漂亮，但它可以为你完成工作。为我工作:)

对您来说，您可以将光标位置存储在一个 int 中，将其设置到末尾，“退格”您想要的所有字符，然后将其设置回来。

# angularjs - 更改 html5 的源“src”属性对 angularjs 无效

> ID：15485768
> 
> 赞同：29
> 
> 时间：2013-03-18T19:59:17.560
> 
> 标签：angularjs, html5-audio

我有一个以链接形式呈现的音频文件列表和一个`<audio>`html5 播放器。每个链接都会调用一个函数，该函数会更改以下`<source>`标签的 src `<audio>`：

```
<audio controls="controls" preload="none">
  <source type="audio/mpeg" src="{{selectedSongPath}}"/>
</audio> 
```

...

```
<div class="songEntry" ng-repeat="song in songs">
  <a href="" ng-click="songSelect(song.path)">{{song.name}}</a>
</div> 
```

...

```
$scope.songSelect = function(songPath) {
    $scope.selectedSongPath = songPath;
} 
```

我可以看到 src 发生变化，但没有播放任何内容。路径还可以；如果我用其中一条路径初始化 src，播放器就会工作。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-05-23T18:54:26.877

这是几个角度方法：

1) 使用 ng-src= 而不是 src=

角度文档解释了为什么这样做：http://docs.angularjs.org/api/ng.directive: [ngSrc](http://docs.angularjs.org/api/ng.directive:ngSrc)

在编译阶段，angular 将扩展元素以包含正确的 src= 属性。

这将更改 HTML5 音频元素的 src 属性，但不幸的是，这还不足以播放新歌曲。您需要通过调用 .play() 方法来促使音频元素执行某些操作。

糟透了:(

沿着同样的路径进一步破解建议在控制器内部进行 DOM 操作。这通常表明这是错误的解决方案。

更好的解决方案是使用服务！

2）使用角度服务的音频

```
// Define a simple audio service 
mpApp.factory('audio',function ($document) {
  var audioElement = $document[0].createElement('audio'); // <-- Magic trick here
  return {
    audioElement: audioElement,

    play: function(filename) {
        audioElement.src = filename;
        audioElement.play();     //  <-- Thats all you need
    }
    // Exersise for the reader - extend this service to include other functions
    // like pausing, etc, etc.

  }
}); 
```

现在，在你的控制器中，你可以注入“音频”，然后做任何你需要做的事情。

例如：

```
function myAstoundingAudioCtrl($scope, audio) { //<-- NOTE injected audio service

    $scope.songSelect = function(songPath) {
        audio.play(songPath);    //     <---  Thats All You Need !
    }
} 
```

您现在可以将“音频”作为参数添加到需要能够更改音乐的任何控制器，并使用此处定义的相同 API 调用。

作为“服务”，整个应用程序只有一个实例。所有对“音频”的调用都指向同一个对象。对于 Angular 中的所有服务都是如此。正是我们在这种情况下所需要的。

该服务在应用程序的根文档上创建一个不可见的 HTML5 元素，因此无需在任何地方的视图上添加标签。这具有在用户导航到不同视图时保持歌曲播放的额外好处。

有关$document 服务的定义，请参见 [http://docs.angularjs.org/api/ng .$document。](http://docs.angularjs.org/api/ng)

希望对伴侣有帮助:)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-10-28T09:54:45.257

即使在使用 $sce.trustAsResourceUrl 之后，我也遇到了同样的问题，然后我意识到问题出在 HTML 上。源应该放在音频标签本身：

```
<audio controls data-ng-src="{{yourTrustedUrl}}" ></audio> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-06-15T16:27:28.187

```
<audio ng-src="{{getAudioUrl()}}" audioplayer controls></audio>

$scope.getAudioUrl = function() {
return $sce.trustAsResourceUrl('your url');
}; 
```

这对我有用，你需要净化你

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-02-21T10:51:50.047

ngSrc 不适用于 AngularJS 中的视频，仅适用于图像。我的解决方案是：

在视图中：

```
 <video controls="controls" name="Video Name" ng-src="{{getVideoUrl()}}"></video> 
```

在控制器中：

```
 $scope.getVideoUrl=function(){
        return $sce.trustAsResourceUrl("media/"+$scope.groupedProjList[$scope.routeId].CONTACTNAME+".mp4");
   }; 
```

用你的替换我的网址：

```
$sce.trustAsResourceUrl('your Url'); 
```

不要忘记添加`$sce`到您的模块：

```
angular.module('myApp.controllers', [])
  .controller('MyCtrl1',  function($scope,$http,$routeParams,$sce) { 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-08-03T11:31:04.690

我在使用下拉选择菜单加载视频源时遇到了类似的问题。我找到`$scope.$apply();`就是我需要添加的所有内容。还没有时间获取您的代码并测试此实现，但我建议您尝试一下：

```
$scope.songSelect = function(songPath) {
    $scope.selectedSongPath = songPath;
    $scope.$apply();
} 
```

`$scope.$apply()`关于处理错误的使用存在一些争议。我相信正确的实现实际上如下：

```
$scope.songSelect = function(songPath) {
    $scope.$apply(function() {
        $scope.selectedSongPath = songPath;
    });
} 
```

这应该可以更好地应对，如果`songPath`返回未定义，这应该会更好地应对；唉，我找不到我学到这个技巧的链接。如果我这样做，我会将其作为对此答案的评论发布。

希望这可以帮助 ：）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-30T08:02:23.857

你也可以使用这个：

```
<div ng-bind-html-unsafe="audioPlayer"></div> 
```

在您的控制器上：

```
$scope.audioPlayer="<br /><audio controls><source src=\""+ audiosource + "\" type=\"audio/mpeg\"> Your browser does not support the audio element. </audio>" 
```

注意力：

> 仅当 ngBindHtml 指令过于严格并且您绝对信任要绑定的内容的来源时，才应使用此指令。

更多[在这里](http://docs.angularjs.org/api/ng.directive%3angBindHtmlUnsafe)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-10-15T04:08:39.390

@SteveOC 64 的方法处理创建音频的新实例。如果您已经有一个音频标签，例如

```
<audio id="audio" controls></audio> 
```

你可以试试下面的代码

```
 app.factory('audio', function($document) {
    var audioElement = $document[0].getElementById('audio');
    audioElement.autoPlay = true; // as per your requirement

    return {
      audioElement: audioElement,

      play: function(filename) {
        audioElement.src = filename;
        audioElement.play();
      },
      resume: function() {
        audioElement.play();
      },
      pause: function() {
        audioElement.pause();
      },
      stop: function() {
        audioElement.pause();
        audioElement.src = audioElement.currentSrc; /** http://stackoverflow.com/a/16978083/1015046 **/
      },
      incVol: function() {
        if (audioElement.volume < 1) {
          audioElement.volume = (audioElement.volume + 0.1).toFixed(2);
        }
        return audioElement.volume;
      },
      decVol: function() {
        if (audioElement.volume > 0) {
          audioElement.volume = (audioElement.volume - 0.1).toFixed(2);
        }
        return audioElement.volume;
      },
      timer: function(callback) {
        audioElement.ontimeupdate = function() {
          callback(audioElement.duration, audioElement.currentTime)
        };
      },
    }
  }); 
```

在注入`audio`工厂后在您的控制器中，您可以将其称为

```
 audio.play('/api/resource?resource=' + uri); 
```

如果这是一个事件驱动的，例如在单击另一个元素时播放音频

```
$scope.$apply(function() {
   $scope.audioPlayer = true;
   audio.play('/api/resource?resource=' + uri);
   $scope.isAudioPlaying = true;
}); 
```

如果有人正在寻找视频工厂：

HTML

```
<video id="video" controls></video> 
```

工厂

```
app.factory('video', function($document) {
       var videoElement = $document[0].getElementById('video');
       videoElement.autoPlay = true;
       return {
          videoElement: videoElement,
          play: function(filename) {
             videoElement.src = filename;
             videoElement.play();
          },
          resume: function() {
             videoElement.play();
          },
          pause: function() {
             videoElement.pause();
          },
          stop: function() {
             videoElement.pause();
             videoElement.src = videoElement.currentSrc; /** http://stackoverflow.com/a/16978083/1015046 **/
          },
          incVol: function() {
             if(videoElement.volume < 1) {
                videoElement.volume = (videoElement.volume + 0.1).toFixed(2);
             }
             return videoElement.volume;
          },
          decVol: function() {
             if(videoElement.volume > 0) {
                videoElement.volume = (videoElement.volume - 0.1).toFixed(2);
             }
             return videoElement.volume;
          },
          timer: function(callback) {
             videoElement.ontimeupdate = function() {
                callback(videoElement.duration, videoElement.currentTime)
             };
          },
       }
    }); 
```

您可以将其调用为`video.play('/api/resource?resource=' + uri);`

希望这可以帮助！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-02-04T04:14:40.250

我找到的解决方案是从 ajax 调用获得视频网址后立即加载视频。

```
var video = angular.element('#video_id');
video.load(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-18T20:07:43.160

从未尝试过使用`audio`标签，但`src`应该插值，所以它应该在`{{}}`.

```
<audio controls="controls" preload="none">
  <source type="audio/mpeg" src="{{selectedSongPath}}"/>
</audio> 
```

你已经试过了吗？

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-18T20:18:26.343

更改 src 后，您还必须加载该文件，因此请尝试在以下内容`songselect`之后添加到您的函数`$scope.selectedSongPath = songPath;`中：

```
$scope.load(); 
```

我不知道你的情况是什么 $scope ，但该`load()`方法应该在你的音频标签的对象内执行。在简单的 JS 中，它看起来像这样：

```
<audio id="audio-tag" controls="controls" preload="none"> //need the ID to get element
    <source type="audio/mpeg" src="{{selectedSongPath}}"/>
</audio>
....
$scope.selectedSongPath = songPath; //you're changing the src
document.getElementById("audio-tag").load(); //here you load the file (you need equivalent in your framework) 
```

希望能帮助到你。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-09-15T06:29:43.307

我之前使用 ngAudio 并且面临一次播放多个音频的问题。当尝试使用 HTML5 音频标签，而不是将音频和源作为 2 个标签时，只有 1 个标签解决了我的问题。

`<audio controls ng-src='{{trusted_url }}'></audio>`

# android - Android 致命异常：主要？

> ID：15485771
> 
> 赞同：0
> 
> 时间：2013-03-18T19:59:23.613
> 
> 标签：android, android-manifest

我有这个代码

```
package com.UPFIM.casa;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.EditText;
import android.widget.Spinner;

public class Constancias extends Activity {

    public String nivels;
    public String tipos;

    public String cant;
    public String fot;

    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.constancias);

            EditText nombre = (EditText) findViewById(R.id.name);
     EditText matricula = (EditText) findViewById(R.id.edusuario);
     EditText mensaje;
     EditText subje;

            final String nivel[]=new String[]{"Nivel","Preparatoria","Profesional"};
            final String tipoc[]=new String[]{"Tipo de Constancia",
                    "Inscripción en el Periodo en Curso",
                    "Inscripción en el Periodo Inmediato Anterior",
                    "Inscripción con Periodo Vacacional",
                    "Servicio Militar Nacional",
                    "Inscripción con Promedio Acumulado",
                    "Inscripción con Promedio del Periodo Inmediato Anterior",
                    "Inscripción en el Periodo en Curso con Materias Inscritas",
                    "Inscripción en el Periodo Inmediato Anterior con Materias",
                    "Inscripción con Promedio del Periodo Inmediato Anterior y Promedio Acumulado",
                    "Inscripción en el Periodo en Curso con Materias Inscritas y Calificaciones",
                    "Inscripción en el Periodo Inmediato Anterior con Materias que se Cursaron y Calificaciones",
                    "Inscripción en el Periodo de Verano",
                    "Documentación en Trámite de Legalización",
                    "Documentación en trámite de Apostille",
                    "Terminación de Estudios",
                    "Terminación de Estudios con Promedio",
                    "Carta de Buena Conducta",
                    "Nivel de Ingles",
                    "Beca"};

            final String[] cantidad = new String[]{"1->$20.00","2->$40.00","3->$60.00","4->$80.00","5->$100.00"};
            final String[] foto = new String[]{"Si","No"};

     final Spinner spinner1 = (Spinner)findViewById(R.id.spinner1);
     final Spinner spinner2 = (Spinner)findViewById(R.id.spinner2);
     final Spinner spinner3 = (Spinner)findViewById(R.id.spinner3);
     final Spinner spinner4 = (Spinner)findViewById(R.id.spinner4);

    ArrayAdapter<String> adapter =
            new ArrayAdapter<String>(this,
                    android.R.layout.simple_spinner_item, nivel);
    spinner1.setAdapter(adapter);

    adapter.setDropDownViewResource(
            android.R.layout.simple_spinner_dropdown_item);

    spinner1.setAdapter(adapter);

    spinner1.setOnItemSelectedListener(
        new AdapterView.OnItemSelectedListener() {
            public void onItemSelected(AdapterView<?> parent,
                android.view.View v, int position, long id) {
                nivels = new String("\nNivel: " + nivel[position]);
            }

            public void onNothingSelected(AdapterView<?> parent) {
                nivels = new String("");
            }
    });

    ArrayAdapter<String> adapter1 =
            new ArrayAdapter<String>(this,
                    android.R.layout.simple_spinner_item, tipoc);
    spinner2.setAdapter(adapter1);

    adapter1.setDropDownViewResource(
            android.R.layout.simple_spinner_dropdown_item);

    spinner2.setAdapter(adapter1);

    spinner2.setOnItemSelectedListener(
        new AdapterView.OnItemSelectedListener() {
            public void onItemSelected(AdapterView<?> parent,
                android.view.View v, int position1, long id) {
                tipos = new String("\nTipo: " + tipoc[position1]);
            }

            public void onNothingSelected(AdapterView<?> parent) {
                tipos = new String("");
            }
    });

    ArrayAdapter<String> adapter2 =
            new ArrayAdapter<String>(this,
                    android.R.layout.simple_spinner_item, cantidad);
    spinner3.setAdapter(adapter2);

    adapter2.setDropDownViewResource(
            android.R.layout.simple_spinner_dropdown_item);

    spinner3.setAdapter(adapter2);

    spinner3.setOnItemSelectedListener(
        new AdapterView.OnItemSelectedListener() {
            public void onItemSelected(AdapterView<?> parent,
                android.view.View v, int position2, long id) {
                cant = new String("\nCantidad: " + cantidad[position2]);
            }

            public void onNothingSelected(AdapterView<?> parent) {
                cant = new String("");
            }
    });

    ArrayAdapter<String> adapter3 =
            new ArrayAdapter<String>(this,
                    android.R.layout.simple_spinner_item, foto);
    spinner4.setAdapter(adapter3);

    adapter3.setDropDownViewResource(
            android.R.layout.simple_spinner_dropdown_item);

    spinner4.setAdapter(adapter3);

    spinner4.setOnItemSelectedListener(
        new AdapterView.OnItemSelectedListener() {
            public void onItemSelected(AdapterView<?> parent,
                android.view.View v, int position3, long id) {
                fot = new String("\nFoto: " + foto[position3]);
            }

            public void onNothingSelected(AdapterView<?> parent) {
                fot = new String("");
            }
    });

    mensaje.setText("" + nombre.getText().toString() + "\n" + matricula.getText().toString() + nivels + tipos + cant + fot );
    subje.setText("Solicitud de Constancia APP");

     }

     public void enviarme (View view){
         Intent itSend = new Intent( android.content.Intent.ACTION_SEND);

         itSend.putExtra(android.content.Intent.EXTRA_EMAIL, new String[]{"spartan-004@hotmail.com"});
         itSend.putExtra(android.content.Intent.EXTRA_SUBJECT,subje.getText());
         itSend.putExtra(android.content.Intent.EXTRA_TEXT, mensaje.getText());

         startActivity(itSend);

     }

} 
```

但我没有发现我的错误，因为我看到了这个日志

```
03-18 19:26:28.065: E/AndroidRuntime(371): FATAL EXCEPTION: main
03-18 19:26:28.065: E/AndroidRuntime(371): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.UPFIM.casa/com.UPFIM.casa.Constancias}: java.lang.NullPointerException
03-18 19:26:28.065: E/AndroidRuntime(371):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
03-18 19:26:28.065: E/AndroidRuntime(371):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
03-18 19:26:28.065: E/AndroidRuntime(371):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-18 19:26:28.065: E/AndroidRuntime(371):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
03-18 19:26:28.065: E/AndroidRuntime(371):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-18 19:26:28.065: E/AndroidRuntime(371):  at android.os.Looper.loop(Looper.java:123)
03-18 19:26:28.065: E/AndroidRuntime(371):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-18 19:26:28.065: E/AndroidRuntime(371):  at java.lang.reflect.Method.invokeNative(Native Method)
03-18 19:26:28.065: E/AndroidRuntime(371):  at java.lang.reflect.Method.invoke(Method.java:507)
03-18 19:26:28.065: E/AndroidRuntime(371):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-18 19:26:28.065: E/AndroidRuntime(371):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-18 19:26:28.065: E/AndroidRuntime(371):  at dalvik.system.NativeStart.main(Native Method)
03-18 19:26:28.065: E/AndroidRuntime(371): Caused by: java.lang.NullPointerException
03-18 19:26:28.065: E/AndroidRuntime(371):  at android.app.Activity.findViewById(Activity.java:1647)
03-18 19:26:28.065: E/AndroidRuntime(371):  at com.UPFIM.casa.Constancias.<init>(Constancias.java:22) 
```

这是布局：

`<?xml version="1.0" encoding="utf-8"?>` `<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"` `android:orientation="vertical"` `android:layout_width="fill_parent"` `android:layout_height="fill_parent"` `android:background="@drawable/fondo">` `<ScrollView` android:layout_width="fill_parent" android:layout_height="fill_parent">

```
 <TextView
            android:id="@+id/tituloAbout"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="top"
            android:gravity="center"
            android:text="@string/constancias"
            android:textSize="15dp" />

        <TextView android:layout_width="fill_parent" 
            android:layout_height="wrap_content" 
            android:text="@string/vacio" 
            android:paddingLeft="10dip"/>

        <TextView android:layout_width="fill_parent" android:layout_height="wrap_content" 
            android:text="@string/nom" android:paddingLeft="10dip"/>

        <EditText 
            android:id="@+id/name"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content" 
            android:paddingLeft="10dip"
            android:inputType="textPersonName"/>  

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:paddingLeft="10dip"
            android:text="@string/Nivel" />

        <Spinner
            android:id="@+id/spinner1" 
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            />

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:paddingLeft="10dip"
            android:text="@string/tipo" />

        <Spinner
            android:id="@+id/spinner2" 
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            />

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:paddingLeft="10dip"
            android:text="@string/cant" />

        <Spinner
            android:id="@+id/spinner3" 
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            /> 

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:paddingLeft="10dip"
            android:text="@string/foto" />

        <Spinner
            android:id="@+id/spinner4" 
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            /> 

        <TextView
            android:id="@+id/btn1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:paddingLeft="10dip"
            android:text="@string/Advertencia" />

        <Button
            android:id="@+id/enviar"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:paddingLeft="10dip"
            android:text="@string/send"
            android:onClick="enviarme" />

    </LinearLayout>
</ScrollView> 
```

`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T20:02:52.877

你的问题是这样的：

```
EditText nombre = (EditText) findViewById(R.id.name);
EditText matricula = (EditText) findViewById(R.id.edusuario); 
```

在将 EditTexts 的实例添加到 Activity 之前，您正在初始化 EditTexts

```
setContentView(); 
```

所以这总是会抛出**`NPE`**。

**解决方案：**将这些线移到后面`setContentView()`，它会起作用。

```
setContentView(R.layout.constancias);
EditText nombre = (EditText) findViewById(R.id.name);
EditText matricula = (EditText) findViewById(R.id.edusuario); 
```

## 解释：

每当你想初始化你的小部件时`findViewById()`，必须首先调用

```
setContentView(R.layout.layoutId) 
```

因为`setContentView()`方法的关键目的是创建包含在您定义的布局中的 UI 元素的所有实例，并将其设置为 Activity 的内容。所以总是如果你会在它总是抛出`findViewById()`之前调用，因为视图是空的。`setContentView()``NullPointerException`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:00:22.253

要首先获取视图，您需要设置活动布局。

在 onCreate 方法中移动这些行。

```
EditText nombre = (EditText) findViewById(R.id.name);
EditText matricula = (EditText) findViewById(R.id.edusuario); 
```

像

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.constancias);

    EditText nombre = (EditText) findViewById(R.id.name);
    EditText matricula = (EditText) findViewById(R.id.edusuario);
   .....
 } 
```

## 编辑：

你甚至没有初始化

```
EditText mensaje;
EditText subje; 
```

在这里你设置文本。

再次在这里 NPE

```
mensaje.setText("" + nombre.getText().toString() + "\n" + matricula.getText().toString() + nivels + tipos + cant + fot );
subje.setText("Solicitud de Constancia APP"); 
```

所以在我上面初始化的`onCreate`方法中也初始化这些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-20T03:34:56.273

您可能正在处理 2 个不同的项目，并且错误地将一个项目的 google-services.json 复制到另一个项目。它发生在我身上。希望能帮助到你

您的调试可能有不同的 google-services 文件，而发布可能有另一个 .. 与 IOS googleinfo.plist 相同

# java - 套接字不工作（没有任何错误消息）

> ID：15485781
> 
> 赞同：0
> 
> 时间：2013-03-18T19:59:35.800
> 
> 标签：java, sockets

我只是在编写一个多人 java 游戏，我试图写一个服务器。但是每次我启动它时，它根本不起作用，eclipse甚至没有给我一条错误消息。我发现错误一定在这一行： Socket sock = serverSock.accept(); 任何人都可以看到错误吗？

```
import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.Timer;
import java.util.TimerTask;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JButton;
import javax.swing.JPanel;

public class Frame {

JFrame frame;
JPanel panel;
JButton start;
JLabel status;

public Frame() {

    frame = new JFrame("Server");
    panel = new JPanel();
    start = new JButton("Start");
    status = new JLabel("Server is not running.");

    start.addActionListener(new ActionListener () {
        public void actionPerformed(ActionEvent e) {

        try {

            ServerSocket serverSock = new ServerSocket(5000);
            Socket sock = serverSock.accept();
            InputStreamReader isReader = new    InputStreamReader(sock.getInputStream());
            BufferedReader reader = new BufferedReader(isReader);

        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        status.setText("Server is running.");
        status.setForeground(Color.green);
        start.setText("Stop");

    }});

    status.setForeground(Color.RED);
    frame.setVisible(true);
    frame.setSize(150,100);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setLocationRelativeTo(null);

    frame.add(panel);
    panel.add(start);
    panel.add(status);

}

} 
```

谢谢伦纳特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:02:03.930

这里的一个错误来源是您阻止了`EDT`. Swing 是单线程的，因此任何进程繁重或阻塞调用，例如`ServerSocket#accept()`，都会*冻结*你的 UI。在这里，您可以改用[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)。

此外，当您实施时`SwingWorker`，您将需要*使用*您`BufferedReader`从客户端读取数据。目前没有显示客户数据。

# ibm-mobilefirst - 如何在 Linux 上使用 Worklight 将我的应用程序发送到 iphone

> ID：15485790
> 
> 赞同：1
> 
> 时间：2013-03-18T20:00:17.123
> 
> 标签：ibm-mobilefirst

我在 Eclipse (Linux) 上使用工作负载工作室 5.0.5 插件，因此我无法安装 XCode，并且我没有应用程序中心服务器（除非有一个内置工作灯工作室，但我不知道）。我发现在 iphone/ipad 上测试/发送我的应用程序的所有文档都基于 XCode。

我想知道是否有人知道或可以在文档上指出我如何测试在 Linux Eclipse 上运行的应用程序。

PS：我有一个 iphone/ipad，所以我正在寻找一种创建 ipa 文件并将其发送到其中一个设备的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:32:52.427

您将需要一台 Mac 来创建 IPA 文件。

# javascript - 使用 javascript 在后台运行任务

> ID：15485792
> 
> 赞同：1
> 
> 时间：2013-03-18T20:00:21.430
> 
> 标签：javascript

我有一个小部件，它在用户提交表单时显示“等待”图像，使用以下代码实现：

```
<div id="shading"></div>
<div id="spinner-wrapper">
    <div id="spinner-target"></div>
</div>

$("form").submit(function() {
    $("#spinner-wrapper").css({"visibility": "visible", "display": "block" });
    $("#shading").css({"z-index": "97"});
    var target = document.getElementById('spinner-target');
    var spinner = new Spinner(opts).spin(target);       
}); 
```

这具有使屏幕变灰、显示微调器的预期效果，然后当表单完成提交时，用户被定向到目标页面。

但是，有时提交的表单没有重定向 - 具体来说，如果用户选择他们想要下载文件，我会返回文件本身，并终止进程以阻止重定向发生。发生这种情况时，微调器会留在前台，阻止用户与站点交互 - 而不是所需的行为。

我怎么能说在 X 秒后（考虑到应用程序的目标使用情况，这就足够了），停止/隐藏微调器 - 也就是说，允许提交表单，然后显示微调器，然后隐藏它（虽然此功能以不同的顺序执行 - 显示微调器，然后提交表单）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:05:20.210

使用 window.setTimeout()：

```
$("form").submit(function() {
    $("#spinner-wrapper").css({"visibility": "visible", "display": "block" });
    $("#shading").css({"z-index": "97"});
    var target = document.getElementById('spinner-target');
    var spinner = new Spinner(opts).spin(target);       

    window.setTimeout(function() {
      //Hide the spinner here
    }, 5000); //Wait five seconds before running the callback function
}); 
```

# python - Python - Pandas - DataFrame 减少行数

> ID：15485793
> 
> 赞同：4
> 
> 时间：2013-03-18T20:00:21.973
> 
> 标签：python, dataframe, pandas

我有一个像这样的DataFrame：

```
ind  col1 col2
1    12   string1  ...
2    23   string2 ...
3    34   string1 ...
4    13   string2 ...
5    17   string3 ...
...  ...  ...     ... 
```

我想折叠 DataFrame 以便 col2 是唯一的。在 col1 （和所有其他数字列）中，我想将 col2 相等的所有值的中值放在一起。

我知道我可以提取 df[df["col2"] == "stringN"]，计算中位数并构建一个新的 DataFrame，但是有没有更优雅/pythonic 的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T20:05:43.130

您可以使用[groupby](http://pandas.pydata.org/pandas-docs/stable/groupby.html)来收集行`col2`，然后`.median()`：

```
>>> df
   ind  col1     col2
0    1    12  string1
1    2    23  string2
2    3    34  string1
3    4    13  string2
4    5    17  string3
>>> df.groupby("col2")
<pandas.core.groupby.DataFrameGroupBy object at 0x9f41b8c>
>>> df.groupby("col2").median()
         ind  col1
col2              
string1    2    23
string2    3    18
string3    5    17
>>> df.groupby("col2").median().reset_index()
      col2  ind  col1
0  string1    2    23
1  string2    3    18
2  string3    5    17 
```

请注意，结果也具有值的中位数`ind`。另请参阅`.mean()`、`.min()`、`.max()`，或者如果您愿意，也可以自己滚动。

# sql-server-2008 - 创建具有相同值的数据透视表用作列

> ID：15485798
> 
> 赞同：1
> 
> 时间：2013-03-18T20:00:33.893
> 
> 标签：sql-server-2008, pivot, sql-server-express

我有一张需要使用 SQL Management Studio 转出的表。这个特定的示例存在于 SQLExpress 服务器上，但我在 2008 r2 服务器上有类似的表，我也将应用它。

此表包含调查结果（50 多个问题和数百个 GuestID）。相当直截了当，但是我在将多项选择问题和答案输入表格的方式上遇到了障碍。

我的表如下所示：

```
GuestID      Question                              Answer
1            How old are you?                      30
1            Do you own a car?                     Yes
1            Why do you own a car?                 Convenience
1            Why do you own a car?                 To get the girl
1            Why do you own a car?                 So I can go through the drive-thru 
```

我想转向这个（......保持简短）：

```
GuestID      How old..?     Do you own...?    Why do...?    Why do...?    Why do...?
1            30             Yes               Convenience   To get...     So I can go... 
```

或者，理想情况下，结合答案转向这一点：

```
GuestID      How old..?     Do you own...?    Why do...?
1            30             Yes               Convenience, To get..., So I can... 
```

我目前正在使用的声明是这样的：

```
declare @QuestionList as varchar(max)
select @QuestionList = 
    stuff(
    (
        select DISTINCT ',[' + RIGHT(Question,128) + ']'
        from AnnualSurveyAnswers
        where GuestId = 43
        for xml path ('')
        ),1,1,'')

declare @dynamic_PQ as varchar(max)
set @dynamic_PQ = 'select [GuestID], ' + @QuestionList + 
    'from
    (
        Select [GuestID],RIGHT([Question],128)AS Question,[Answer]
        From dbo.AnnualSurveyAnswers
    ) as S

    PIVOT

    (
        MAX([Answer])
        for Question IN (' + @QuestionList + ')
    ) as P
    '
Exec(@dynamic_PQ) 
```

结果：

```
GuestID     How old...?     Do you own...?     Why do you...?
1           30              Yes                Convenience
2           35              Yes                To get the girl 
```

我不得不添加`DISTINCT`，`@QuestionList`因为我收到了关于列被多次指定的错误。说得通。我们不能有多个具有相同名称的列。但是，有了`DISTINCT`，它现在只显示多项选择答案之一。我还添加`MAX`了覆盖总需求`[Answer]`，但也许我应该使用不同的东西？

有多项选择题，它们可能包含 1 个响应或 8 个响应。除了更改原始数据之外，还有其他选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T20:20:52.347

可以做一些事情来获得结果。

如果您想要单独列中的数据，那么我将包含多个答案的问题`row_number()`并将`count()`其拆分为类似于此的单独列：

```
declare @QuestionList as varchar(max)
declare @dynamic_PQ as varchar(max)

select @QuestionList = 
    stuff(
    (
        select DISTINCT ', ' 
          + Quotename(Question
          + case when cnt = 1 then '' else +'_'+cast(rn as varchar(10)) end)
        from
        (
          select distinct guestid,
            RIGHT(Question,128) question,
            count(*) over(partition by question) cnt,
            row_number() over(partition by question, guestid order by question) rn
          from AnnualSurveyAnswers
        ) t1
        -- where GuestId = 1
        for xml path ('')
        ),1,1,'')

set @dynamic_PQ = 'select [GuestID], ' + @QuestionList + 
    'from
    (
        Select [GuestID],
          Question
          + case when cnt = 1 then '''' else +''_''+cast(rn as varchar(10)) end Question,
          [Answer]
        from
        (
          select guestid,
            RIGHT([Question],128) AS Question,
            answer,
            count(*) over(partition by question) cnt,
            row_number() over(partition by question, guestid order by question) rn
          from dbo.AnnualSurveyAnswers
        ) src
    ) as S

    PIVOT

    (
        MAX([Answer])
        for Question IN (' + @QuestionList + ')
    ) as P
    '

Exec(@dynamic_PQ) 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/559f5/18)。

这给出了结果：

```
| GUESTID | DO YOU OWN A CAR?_1 | HOW OLD ARE YOU?_1 | WHY DO YOU OWN A CAR?_1 | WHY DO YOU OWN A CAR?_2 |            WHY DO YOU OWN A CAR?_3 |
-----------------------------------------------------------------------------------------------------------------------------------------------
|       1 |                 Yes |                 30 |             Convenience |         To get the girl | So I can go through the drive-thru |
|       2 |                 Yes |                 38 |           Killing frogs |          To get the guy |     So I can go through the tunnel | 
```

如果您希望将答案连接到单个列中，则可以使用：

```
declare @QuestionList as varchar(max)
declare @dynamic_PQ as varchar(max)

select @QuestionList = 
    stuff(
    (
        select DISTINCT ', ' 
          + Quotename(Question)
        from
        (
          select guestid,
            RIGHT(Question,128) question
          from AnnualSurveyAnswers
        ) t
        where GuestId = 1
        for xml path ('')
        ),1,1,'')

set @dynamic_PQ = 'select [GuestID], ' + @QuestionList + 
    ' from
    (
        Select [GuestID],
          Question,
          STUFF((SELECT distinct '', '' + a2.answer
                   from AnnualSurveyAnswers a2
                   where src.guestid = a2.guestid
                      and src.question = RIGHT(a2.Question,128)
                      FOR XML PATH(''''), TYPE
                      ).value(''.'', ''NVARCHAR(MAX)'') 
                  ,1,1,'''') answer
        from
        (
          select guestid,
            RIGHT([Question],128) AS Question,
            answer
          from dbo.AnnualSurveyAnswers 
        ) src
    ) as S
    PIVOT

    (
        MAX([Answer])
        for Question IN (' + @QuestionList + ')
    ) as P
    '

Exec(@dynamic_PQ) 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/1f2d1e/34)。这给出了结果：

```
| GUESTID | DO YOU OWN A CAR? | HOW OLD ARE YOU? |                                             WHY DO YOU OWN A CAR? |
----------------------------------------------------------------------------------------------------------------------
|       1 |               Yes |               30 |  Convenience, So I can go through the drive-thru, To get the girl | 
```

# java - Android TextView 和 ProgressBar 未在 LinearLayout 中显示

> ID：15485799
> 
> 赞同：1
> 
> 时间：2013-03-18T20:00:36.170
> 
> 标签：java, android, android-layout

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="40dip"
        android:background="@drawable/tab_color_red" >

        <TextView
            android:id="@+id/_title"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:layout_toLeftOf="@+id/bar"
            android:ellipsize="end"
            android:paddingLeft="5dip"
            android:singleLine="true"
            android:textColor="#ffffff"
            android:textSize="15dip"
            android:textStyle="bold" />

        <ProgressBar
            android:id="@+id/bar"
            style="?android:attr/progressBarStyleHorizontal"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:visibility="invisible" />
    </RelativeLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="6dip"
        android:background="@drawable/noselect_blue"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/direzione"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dip"
                android:text="@string/vehicleDirection"
                android:textColor="#000000"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/direzione_value"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:gravity="center"
                android:textColor="#000000" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/id_veicolo"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dip"
                android:text="@string/lineID"
                android:textColor="#000000"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/id_veicolo_value"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:gravity="center"
                android:textColor="#000000" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/id_fermata"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dip"
                android:text="@string/stopID"
                android:textColor="#000000"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/id_fermata_value"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:gravity="center"
                android:textColor="#000000" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/tempo_arrivo"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dip"
                android:text="@string/vehicleTimeLeft"
                android:textColor="#000000"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/tempo_arrivo_value"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:gravity="center"
                android:textColor="#000000" />
        </LinearLayout>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/pbus_spec_panel"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="6dip"
        android:background="@drawable/noselect_blue"
        android:orientation="vertical" 
        android:visibility="visible">

        <TextView
            android:id="@+id/pbus_specs"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="center"
            android:text="@string/pbusSpecs"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#000000"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/desc"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_marginTop="2dip"
            android:gravity="center"
            android:textColor="#000000"
            android:textSize="12sp"
            android:visibility="visible"
            android:text="@string/pbusSpecs"
            android:textStyle="italic" />

        <LinearLayout
            android:id="@+id/inner_pbus_spec"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:paddingBottom="6dip" 
            android:visibility="visible">

            <TextView
                android:id="@+id/credibility"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:layout_marginTop="6dip"
                android:gravity="center"
                android:text="@string/pbusTrust"
                android:textColor="#000000"
                android:textSize="12sp"
                android:textStyle="bold" />

            <ProgressBar
                android:id="@+id/barraCredibilita"
                style="?android:attr/progressBarStyleHorizontal"
                android:layout_width="200dip"
                android:layout_height="15dip"
                android:layout_marginLeft="10dip"
                android:layout_marginRight="5dip"
                android:layout_marginTop="5dip"
                android:visibility="visible" />
        </LinearLayout>
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="6dip"
        android:background="@drawable/noselect_blue"
        android:orientation="vertical" >

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="60dip" 
            >

            <TextView
                android:id="@+id/visualizza_percorso"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:gravity="center"
                android:layout_toLeftOf="@+id/percorso_freccia"
                android:text="@string/vehicleActionSeePath"
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:textColor="#000000"
                android:textStyle="italic" />

            <ImageView
                android:id="@+id/percorso_freccia"
                android:layout_width="30dip"
                android:layout_height="60dip"
                android:layout_alignParentRight="true"
                android:layout_centerInParent="true"
                android:gravity="left"
                android:scaleType="center"
                android:src="@drawable/expander_ic" />

        </RelativeLayout>

        <View
            android:id="@+id/View02"
            android:layout_width="fill_parent"
            android:layout_height="1dip"
            android:layout_marginTop="5dip"
            android:background="@color/line" />

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="60dip"
            android:id="@+id/pbus_confirm_layout"
            android:visibility="gone" 
            >

            <TextView
                android:id="@+id/quick_confirm"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_toLeftOf="@+id/conferma_freccia"
                android:gravity="center"
                android:text="@string/confirmVehicle"
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:textColor="#000000"
                android:textStyle="italic" />

            <ImageView
                android:id="@+id/conferma_freccia"
                android:layout_width="30dip"
                android:layout_height="60dip"
                android:layout_alignParentRight="true"
                android:layout_centerInParent="true"
                android:gravity="left"
                android:scaleType="center"
                android:src="@drawable/expander_ic" />
        </RelativeLayout>
        <View
            android:id="@+id/middle_line"
            android:layout_width="fill_parent"
            android:layout_height="1dip"
            android:layout_marginTop="5dip"
            android:background="@color/line" 
            android:visibility="gone"/>

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="60dip" 
            >

            <TextView
                android:id="@+id/aggiungi_info"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_toLeftOf="@+id/aggiungi_freccia"
                android:gravity="center"
                android:text="@string/addVehicleInfos"
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:textColor="#000000"
                android:textStyle="italic" />

            <ImageView
                android:id="@+id/aggiungi_freccia"
                android:layout_width="30dip"
                android:layout_height="60dip"
                android:layout_alignParentRight="true"
                android:layout_alignParentTop="true"
                android:gravity="left"
                android:scaleType="center"
                android:src="@drawable/expander_ic" />

        </RelativeLayout>
    </LinearLayout>

</LinearLayout> 
```

这是我的活动：

```
package com.atacmobile;

import java.util.HashMap;

import com.atacmobile.Model.Costants;

import android.app.Activity;
import android.content.Context;
import android.content.res.Configuration;
import android.os.Bundle;
import android.view.View;
import android.view.Window;
import android.widget.LinearLayout;
import android.widget.ProgressBar;
import android.widget.RelativeLayout;
import android.widget.TextView;

public class MoreInfoBus extends Activity{

    private static Context context;
    boolean isPbus;
    String atacid;//id fermata
    String bus;
    String pathid;
    String lineid;
    String azione;
    String direzione;
    String tempoFermateRimanente;
    HashMap<String, String> map = new HashMap<String,String>();
    int conferme;

    public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         requestWindowFeature(Window.FEATURE_NO_TITLE);
         context = getApplicationContext();
         setContentView(R.layout.moreinfobus); 
         azione=getIntent().getAction();

         if(azione.equals("infobus")){
             Bundle extras = getIntent().getExtras();
             atacid=extras.getString(Costants.ATACID);
             bus=extras.getString(Costants.BUS);
             pathid=extras.getString(Costants.PATHID);
             lineid=extras.getString(Costants.LINEID);
             isPbus = extras.getBoolean(Costants.PBUS);
             direzione = extras.getString(Costants.DIRECTION);
             tempoFermateRimanente = extras.getString(Costants.TIMELEFT);
             if(isPbus){
                 conferme = extras.getInt(Costants.CONFIRMS);
             }

         }

         TextView titolo=(TextView)findViewById(R.id._title);
         titolo.setText("INFO. LINEA "+bus);
         TextView direction = (TextView)findViewById(R.id.direzione_value);
         TextView id_veicolo = (TextView)findViewById(R.id.id_veicolo_value);
         TextView id_palina = (TextView)findViewById(R.id.id_fermata_value);
         TextView tempo_arrivo = (TextView)findViewById(R.id.tempo_arrivo_value);

         direction.setText(direzione);
         id_veicolo.setText(lineid);
         id_palina.setText(atacid);
         tempo_arrivo.setText(tempoFermateRimanente);

         if(isPbus){
             LinearLayout lin_lay = (LinearLayout)findViewById(R.id.pbus_spec_panel);
             lin_lay.setVisibility(View.VISIBLE);
             RelativeLayout rel_lay = (RelativeLayout)findViewById(R.id.pbus_confirm_layout);
             rel_lay.setVisibility(View.VISIBLE);
             View line = (View)findViewById(R.id.middle_line);
             line.setVisibility(View.VISIBLE);
             TextView infos = (TextView)findViewById(R.id.pbus_specs);
             infos.setVisibility(View.VISIBLE);
             TextView desc = (TextView)findViewById(R.id.desc);
             desc.setText("Questo autobus non è monitorato da ATAC ed è stato segnalato da altri utenti che utilizzano RMob! Esattamente "+conferme+" utente\\i hanno confermato quest'autobus!");
             desc.setVisibility(View.VISIBLE);
             ProgressBar pb = (ProgressBar)findViewById(R.id.barraCredibilita);
             pb.setMax(5);
             int d = 0;
             if(conferme == 0) d = R.drawable.redprogressbar;
             else if(conferme<=2) d = R.drawable.yellowprogressbar;
             else d = R.drawable.greenprogressbar;
             pb.setProgressDrawable(context.getApplicationContext().getResources().getDrawable(d));
             pb.setProgress(conferme<4?conferme+1:pb.getMax());
             pb.setVisibility(View.VISIBLE);
         }
    }

     @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);

        // Checks the orientation of the screen
        if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
        } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT){
        }
        // Checks whether a hardware keyboard is available
        if (newConfig.hardKeyboardHidden == Configuration.HARDKEYBOARDHIDDEN_NO) {
        } else if (newConfig.hardKeyboardHidden == Configuration.HARDKEYBOARDHIDDEN_YES) {
        }
    }
} 
```

上面的布局显示了除了`TextView desc`和所有`LinearLayout`带有 id的所有内容`inner_pbus_spec`。我究竟做错了什么？我可以在 Eclipse 的可视化编辑器中看到所有内容！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:08:12.373

desc (pbus_specs) 上面的元素的高度为 fill_parent。这将导致它增长而不显示其他一些元素。

# drupal - 是否可以从drupal中的另一个不同节点访问不同的节点

> ID：15485801
> 
> 赞同：1
> 
> 时间：2013-03-18T20:00:40.073
> 
> 标签：drupal

我有一个名为 Movies 的节点，还有另一个名为 casts 的节点。因此，当我删除演员表时，我希望它反映到电影节点。当我在演员节点中时，是否可以访问电影节点中的字段？我如何在drupal中做到这一点？顺便说一句，我正在使用drupal 6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:16:47.687

你想从一个模块或一些 PHP 代码中做到这一点吗？您可以使用[node_load()](http://api.drupal.org/api/drupal/modules!node!node.module/function/node_load/7)。

如果你真的想要删除一个节点并自动清除对它的引用，你可以使用[node_delete](http://api.drupal.org/api/drupal/modules%21node%21node.module/function/node_delete/7)

请注意以适当的方式使用 Drupal。也许您希望在您的电影节点中为每个“演员”（或演员，如果您希望将它们分组，尽管我不明白为什么）节点有一个实体引用字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:08:27.733

如果你对 SQL 没问题，它比 node_load/node_save 更短、更高效：

```
db_query("DELETE FROM content_field_movie_cast WHERE field_movie_cast_nid = %d", $person->nid); 
```

（我猜你的内容命名在那里，所以它可能需要一些调整。）

话虽如此，默认情况下，CCK 将在删除节点时删除任何节点引用，因此您不必手动进行任何清理。你是直接用SQL删除人吗？

# mysql - MySQL sum 和 Group By 以及第二个表中的数据识别信息

> ID：15485802
> 
> 赞同：-1
> 
> 时间：2013-03-18T20:00:46.880
> 
> 标签：mysql, group-by, sum

我有一个商店类型数据库，我需要运行一个报告，在其中汇总一位客户的所有购买。

由于此数据库对存储的特殊需求，用户 ID 存储在两部分中：compID 和 userId。例如，用户的 ID 可能为“ABCD”，其中“AB”表示他们工作的公司，“CD”是他们的特定 ID，但它仍然引用了与“AB”匹配的事实它是任何其他“CD”用户值的唯一值。（我知道这是一种奇怪的做法，但需要尽可能少的用户 ID，同时仍然拥有最多的可用插槽。）

无论如何，我的问题是，当我尝试编写一个查询来汇总一个用户的购买时，我找不到从第二个表中获取额外信息的方法，例如该用户的姓名。

这是五月表。

f_purchases 表存储每笔销售数据，例如用户 ID（和他们的 compID），以及购买的价值

f_user 表包含有关用户的详细信息，例如 userID、compID、name、contact 等。

当我只选择原始数据时，此查询有效：

```
SELECT f_purchases.compID, f_purchases.userID, sum(f_purchases.amount) as Total FROM f_purchases GROUP BY f_purchases.compID, f_purchases.userID 
```

但是当我尝试使用 Join 或多表查询时，我找不到从 f_user 中引入识别信息（例如名称）的方法。我想我可以得到 f_user.name 如果我有类似的东西

```
WHERE f_purchases.compID=f_user.compID AND f_purchases.userID=f_user.userID 
```

我的另一个想法是我可以以某种方式使用连接来连接 ID 的两个部分，但我不知道从哪里开始。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:25:09.267

我想我以前有什么问题，但在再试一次之后，它现在正确地总结了一切。这是有效的：

```
SELECT f_user.first, f_purchases.compID, f_purchases.userID, sum( f_purchases.amount ) AS Total
FROM f_purchases, f_user
WHERE f_purchases.compID = f_user.compID
AND f_purchases.userID = f_user.userID
GROUP BY f_purchases.compID, f_purchases.userID 
```

很抱歉最初的帖子。

# javascript - 将 SingalR 示例实现到 ASP.Net 网站应用程序中——JS 中的错误

> ID：15485804
> 
> 赞同：2
> 
> 时间：2013-03-18T20:00:50.227
> 
> 标签：javascript, asp.net, signalr

我正在尝试将 SignalR 实现到我的 ASP.Net“网站项目”中。（这是一个现有的应用程序，它是一个网站项目，不能转换为一个 Web 应用程序。）

尝试运行 SignalR 示例代码时出现以下错误。（这是基本的股票代码示例。只是想在我开始将其实施到现有代码中之前验证我是否已正确设置所有内容。）

## 这是我得到的错误

```
Unhandled exception at line 71, column 5 in http://localhost:49218/SchoolFinancial/SignalR.Sample/SignalR.StockTicker.js

0x800a138f - Microsoft JScript runtime error: Unable to get value of the property 'client': object is null or undefined 
```

## 这是引发错误的javascript

```
// Add client-side hub methods that the server will call
$.extend(ticker.client, {
    updateStockPrice: function (stock) {
        var displayStock = formatStock(stock),
            $row = $(rowTemplate.supplant(displayStock)),
            $li = $(liTemplate.supplant(displayStock)),
            bg = stock.LastChange === 0
                ? '255,216,0' // yellow
                : stock.LastChange > 0
                    ? '154,240,117' // green
                    : '255,148,148'; // red

        $stockTableBody.find('tr[data-symbol=' + stock.Symbol + ']')
            .replaceWith($row);
        $stockTickerUl.find('li[data-symbol=' + stock.Symbol + ']')
            .replaceWith($li);

        $row.flash(bg, 1000);
        $li.flash(bg, 1000);
    },

    marketOpened: function () {
        $("#open").prop("disabled", true);
        $("#close").prop("disabled", false);
        $("#reset").prop("disabled", true);
        scrollTicker();
    },

    marketClosed: function () {
        $("#open").prop("disabled", false);
        $("#close").prop("disabled", true);
        $("#reset").prop("disabled", false);
        stopTicker();
    },

    marketReset: function () {
        return init();
    }
}); 
```

## 这是允许 SignalR 使用网站项目的 Web.Config 设置更改

（这是在 Web.Config 的以下部分中）

```
 <modules runAllManagedModulesForAllRequests="true">
  </modules> 
```

我是使用 SignalR 的新手，从我在之前的帖子中发现的内容来看，如果我能让它正常工作，这应该可以解决我的问题。

因此，如果有人对在 ASP.Net 的网站项目中使用 SignalR 有任何经验，我将不胜感激任何建议/建议。

不确定是否重要，但我使用的是 Visual Studio 2012 (ASP.Net / C#)，并且我的网站在 .Net Framework 4.5 版本上。

在此先感谢您的帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T02:48:00.053

您收到此错误可能是由于以下任何原因：-

1）yourbaseurl/signalr/hubs 给出 404。您可以在页面加载后在 chrome 控制台中验证。如果您收到此错误，您需要确保已映射集线器路由。使用

```
RouteTable.Route.MapHubs() 
```

在你的 global.asax 应用程序中启动或使用一些启动注入器，如 WebActivatorEx。

```
 void Application_Start(object sender, EventArgs e) 
    {
        // Code that runs on application startup
        RouteTable.Routes.MapHubs();
    } 
```

2) 所有与 SIGnalr 相关的 dll 都是兼容版本。如果您安装了库包管理器控制台，这将不是问题。

3）如果上述步骤不是问题，那么问题是客户端代理没有正确生成。这意味着如果您点击 yourbaseurl/signalr/hubs 您应该能够看到注册的集线器名称与 c# 集线器类名相同

```
proxies.stockTicker.client 
```

初始化和

```
proxies.stockTicker.server 
```

定义的函数名称与 c# HubProxy 中声明的函数名称相同。并且所有这些都存在于以下原型 decalation 之下。

```
 $.hubConnection.prototype.createHubProxies 
```

4) 如果您无法获得按照步骤 3 生成的代理，请尝试将 SignalR.StockTicker 中的类文件放入 AppCode。

注意：- 我刚刚尝试让示例在 Asp.Net 4.5 网站上运行。

一切顺利！！

# javascript - JQuery 对话框，“爆炸”效果是如何创建的

> ID：15485805
> 
> 赞同：-2
> 
> 时间：2013-03-18T20:00:51.030
> 
> 标签：javascript, jquery

这似乎是一个奇怪的问题，但是，对于 JQuery`dialog()`方法，它们（除其他外）有一个`hide`名为`explode`?

谁能告诉我他们是如何产生这样的效果的？比如——他们是通过操纵屏幕上的像素来做到这一点的吗？如果是这样，您*如何*以这种方式操作屏幕上的像素？我知道 JQuery 是用 JavaScript 编写的，所以我想知道如何在 JavaScript 中做类似的事情的*基础知识。*

我问这个是因为，最终我希望能够创建自己的自定义效果。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:11:53.523

源代码其实很简单明了，我试着做一些总结：

1.  决定应该将源元素分解成多少块 (N)
2.  在开始时克隆源元素N次，将它们包装成“溢出隐藏”的div并定位内容并创建div，因此最终的视觉效果与原始元素相同
3.  隐藏原始元素
4.  分别移动（动画）每个部分以模拟“爆炸”

# php - 基于移动设备或其他未知浏览器的条件

> ID：15485808
> 
> 赞同：0
> 
> 时间：2013-03-18T20:01:04.060
> 
> 标签：php, jquery, mobile, responsive-design, browser-detection

我有一个根据窗口大小响应收缩的表单。但是，我们需要它在移动和其他未知浏览器上永久保持小。

这是伪代码。jQuery 也很好，我使用的是 v.1.8

```
if ( is_desktop )
    is_narrow = false;
else
    // applies to mobile and unknown browsers
    is_narrow = true;

$( "#form" ).toggleClass( 'narrow', is_narrow ); 
```

大多数解决方案在未知浏览器上都失败了。例如，他们只检测浏览器是否是移动的，否则假设它是桌面。除非被证明是桌面浏览器，否则我需要假设移动设备。

PS，如果您想提供解决方案，我也在使用 PHP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:08:59.610

尝试使用[媒体查询](http://nmsdvid.com/snippets/)

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
/* Styles */
}

/* Smartphones (landscape) ----------- */
@media only screen 
and (min-width : 321px) {
/* Styles */
}

/* Smartphones (portrait) ----------- */
@media only screen 
and (max-width : 320px) {
/* Styles */
}

/* iPads (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) {
/* Styles */
}

/* iPads (landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) {
/* Styles */
}

/* iPads (portrait) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait) {
/* Styles */
}

/* Desktops and laptops ----------- */
@media only screen 
and (min-width : 1224px) {
/* Styles */
}

/* Large screens ----------- */
@media only screen 
and (min-width : 1824px) {
/* Styles */
}

/* iPhone 4 ----------- */
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {
/* Styles */
} 
```

使用此功能确定用户是否在移动设备上

```
 function is_mobile() {
        var agents = ['android', 'webos', 'iphone', 'ipad', 'blackberry'];
        for(i in agents) {
            if(navigator.userAgent.match('/'+agents[i]+'/i')) {
                return true;
            }
        }
        return false;
    }

if ( is_mobile )
    is_narrow = true;
else
    // applies to mobile and unknown browsers
    is_narrow = false;

$( "#form" ).toggleClass( 'narrow', is_narrow ); 
```

编辑：

您可以尝试使用此[功能](http://rapidpaste.com/s/d034701479)：

```
if(jQuery.browser.mobile)
{
   console.log('You are using a mobile device!');
}
else
{
   console.log('You are not using a mobile device!');
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T20:05:30.660

您可以使用 Query 媒体并在 CSS 上做一些工作。关于 HTML，您可以插入与桌面/移动的某些查询媒体相关的具有隐藏/可见类属性的两个表单选项。

# javascript - 更改控制器属性值

> ID：15485809
> 
> 赞同：1
> 
> 时间：2013-03-18T20:01:12.523
> 
> 标签：javascript, ember.js

在 Ember.js 中，修改控制器属性值的最佳实践是什么？

考虑以下玩具应用程序：

**JS：**

```
window.App = Ember.Application.create();

App.ApplicationController = Ember.Controller.extend({
    firstNameBinding: "App.myModel.name",
    lastName: "Smith",
    signedIn: true
});

App.myModel = Ember.Object.create({
    name: 'John'
}); 
```

**乙肝：**

```
<script type="text/x-handlebars" data-template-name="application">
    {{#if signedIn}}
        Welcome back, <b>{{firstName}} {{lastName}}</b>!
    {{else}}
        Welcome, <b>Guest</b>!
    {{/if}}
</script> 
```

我能够`firstName`通过运行来改变`App.myModel.set('name', 'Jane')`. 但我很难改变`lastName`.

如何`lastName`实时修改？此外，`App.ApplicationController`存储在 DOM 中的实例在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:14:24.337

您是否试图从您的模型中修改控制器的属性？因为这非常违背 MVC 的工作方式。[您的控制器应该正在修改您的视图](http://upload.wikimedia.org/wikipedia/commons/f/fd/MVC-Process.png)。所以在这种情况下，你的`lastName`属性应该存储在你的模型中，而不是控制器上。

由于您直接绑定到模型中的属性，因此您无法访问模型本身。最好的方法是绑定到对象，然后您就可以访问它的所有属性：

`firstNameBinding: "App.myModel"`

`App.myModel`然后我们可以从控制器 ( `this.set('firstName.someRandomProperty', 'Adam');`)更改所有属性。

`ApplicationController`是一个对象，因此不会存储在 DOM 中。Ember 使用[工厂方法的概念](http://en.wikipedia.org/wiki/Factory_method_pattern)来提供对对象的访问。例如，要获取`ApplicationController`实例，我们可以使用以下方法，尽管除非您确实确定需要它，否则这是不可取的，因为可以以更合乎逻辑的方式访问实例：

```
this.container.lookup('controller:application') 
```

# hibernate - 扩展表的 JPA + Hibernate 映射

> ID：15485810
> 
> 赞同：2
> 
> 时间：2013-03-18T20:01:14.720
> 
> 标签：hibernate, jpa

对于我们项目中的要求之一，我们遵循：

[http://msdn.microsoft.com/en-us/library/aa479086.aspx#mlttntda_nvp](http://msdn.microsoft.com/en-us/library/aa479086.aspx#mlttntda_nvp)来管理多个租户。

请参阅上面的链接以获取表结构的图像。

我需要帮助来管理映射。这是我的想法：

```
 @Entity
    @Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
    public abstract class AbstractEntity {
    @Id @GeneratedValue(strategy = GenerationType.TABLE)
    private Long id;

    @OneToMany(mappedBy="entities")
    private Set<ExtensionTable> extensionTable = new HashSet<ExtensionTable>();

    ....
}

@Entity
public class ExtensionTable {
    @Id @GeneratedValue
    private Long id;

    @ManyToOne
    private Set<AbstractEntity> entities = new HashSet<AbstractEntity>();

    ...
}

@Entity
public class Employee extends AbstractEntity {
    ...
} 
```

我发现很难为元数据表定义映射。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:03:47.843

来自规范 11.1.26：ManyToOne 注释定义了与另一个具有多对一多重性的实体类的单值关联。我认为您不能将 @ManyToOne 与 Set 一起使用。我会尝试这样的事情：

```
@Entity
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS) // Depending on your provider, I generally use JOINED or SINGLE_TABLE
public abstract class AbstractEntity {
    @Id @GeneratedValue(strategy = GenerationType.TABLE)
    private Long id;

    @OneToMany(mappedBy="entity")
    private Set<ExtensionTable> extensionTable = new HashSet<ExtensionTable>();

    ....
}

@Entity
public class ExtensionTable {
    @Id @GeneratedValue
    private Long id;

    @ManyToOne
    private AbstractEntity entity;

    @ManyToOne
    private Metadata metadata;    

    @Column
    private String value;

    ...
}

@Entity
public class Metadata {
    @Id @GeneratedValue
    private Long id;

    @ManyToOne
    private AbstractEntity entity;

    @Column
    private String extLabel;        

    @Column
    private String extDataType; // So, here is a problem, you'll have to find an efficient way to deal with the data type.
    ...
}

@Entity
public class Employee extends AbstractEntity {
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T23:48:46.847

我的错，我没有考虑清楚。这是最终代码：

```
@Entity
    @Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
    public abstract class AbstractEntity {

@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private Long id;

@Column(name="TENANT_ID")   
private int tenantId;

@OneToMany(mappedBy="entity",cascade=CascadeType.ALL,fetch = FetchType.EAGER)
private Set<ExtensionTable> extensionTable = new HashSet<ExtensionTable>();

.....
}

@Entity
@Table (name="metadata")
public class MetaData {

@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private Long metaDataId;

@Column 
int tenantId;

@ManyToOne(cascade=CascadeType.ALL)
@JoinColumn(name="extensionId")
    private ExtensionTable extension;

@Column 
String extLabel;

@Column 
String extDataType;

    .....

    }

@Entity
@Table(name = "extensionTable")
public class ExtensionTable {
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private Long extensionId;

@ManyToOne(cascade=CascadeType.ALL)
@JoinColumn(name="ENTITY_ID")
    private AbstractEntity entity;

@OneToOne(cascade=CascadeType.ALL,fetch = FetchType.EAGER)
@JoinColumn(name="metadata_id") 
private MetaData metaDatas = new MetaData();

    ....

    } 
```

# java - 继承泛型

> ID：15485811
> 
> 赞同：3
> 
> 时间：2013-03-18T20:01:16.110
> 
> 标签：java, generics, inheritance

假设我有一个这样定义的抽象类：

```
public class Response<T> {
    private List<Response<T>> subResponses;
} 
```

和两个像这样定义的子类：

```
public class SectionResponse extends Response<SectionResponse> {
}

public class FormResponse extends Response<FormResponse> {
} 
```

基本上 Response 的所有子类都需要有一个相同类的列表。现在在代码的其他地方我想要一个可以包含任一子类的 Response 对象列表。

在不使用原始类型的情况下定义此列表的最佳方法是什么？我已经尝试过`List<? extends Response<?>>`，但我无法在这样定义的 List 上调用 add 方法，因为参数是参数化类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:07:15.307

使用[Put-Get-Rule](https://stackoverflow.com/questions/1292109/generics-get-and-put-rule)。即，返回`List<? extends Response<?>>`但接受`List<? super Response<?>>`作为参数。在内部，您会将列表存储为`List<Response>`

作为说明，我会警惕返回`List<? extends Response<?>>`界面，因为它可能会侵入消费者。在大多数情况下，最好让接口确定泛型类型，以便您`List<Response<MyType>>`尽可能返回类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T22:27:01.263

你的`Response`类应该这样定义：

```
public class Response<T> {
    private List<T> subResponses;
} 
```

这样`SectionResponse`和`FormResponse`，正如声明的那样，将有一个自己的列表。

现在，从字面上回答你的问题，对于一个可以包含任何一个的列表，你可以只拥有一个`List<Response<?>>`.

但是，您可能想要的不止这些——您可能想要从列表中取出元素并对它们做点什么。如果您可以更具体地了解您需要做什么，我们可以为您提供进一步的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T23:41:23.907

我承认我不确定你到底想做什么，但这很有效，至少涉及到你描述的问题：

```
public class Response<T extends Response> {
    private List<T> sl = new LinkedList<T>();

    protected void add(T resp) {
        sl.add(this);
    }
}

public class FormResponse extends Response<FormResponse> {
    public FormResponse() {
        add(this);
    }
} 
```

# iphone - 通用应用程序中的 iOS 6.0 方向问题

> ID：15485814
> 
> 赞同：-1
> 
> 时间：2013-03-18T20:01:23.850
> 
> 标签：iphone, ios, objective-c, ipad, uiinterfaceorientation

我有一个以 a`UIViewController`作为根视图控制器的应用程序（不是 a`TabBar`或`NavigationController`应用程序！）。这个应用程序是通用的。iPhone 应该始终是纵向的，iPad 应该始终是横向的。

我尝试了以下方法，但我认为这是 iOS 5 代码，因为它没有在 iOS 6 中调用：

```
 - (BOOL)shouldAutorotate
{
    return YES;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
    {
        return (interfaceOrientation == UIInterfaceOrientationPortrait);
    }
    else
    {
        return (interfaceOrientation == (UIInterfaceOrientationLandscapeLeft | UIInterfaceOrientationLandscapeRight));
    }
} 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:43:26.530

这是 iOS 6 的代码集。它使用掩码。如果它是针对整个 iPhone 一个方向和 iPad 一个方向，那么在项目级别，您可以通过取消选择与您不想要的方向相关的按钮来设置它。也就是说，如果 iPhone 中的所有视图都将相同，并且对于 iPad，它也适用。如果您想使用代码执行此操作，则以下操作将完成：

```
- (BOOL) shouldAutorotate
{
return YES;
}

-(NSUInteger)supportedInterfaceOrientations
{
return UIInterfaceOrientationMaskLandscapeRight | UIInterfaceOrientationMaskLandscapeLeft   | UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown;
} 
```

只需采用您不想使用的方向即可。如果您需要更多帮助，请告诉我。

# sql-server-2008 - 插入前的 SQL Server 2008 触发器

> ID：15485815
> 
> 赞同：3
> 
> 时间：2013-03-18T20:01:23.860
> 
> 标签：sql-server-2008, triggers

我很陌生`SQL`，很抱歉问这是非常基本的知识。我的问题如下。

我有一个名为**Group**的表，`minimumVal`并且`maximumVal`是两列。`minimumVal`总是应该小于`maximumVal`。我想在向表中插入新记录之前检查这一点。如果这种情况失败，则不应将数据插入数据库。

所以根据我的理解，我虽然有一个触发器，但不知道如何写这个。

这是我到目前为止所写的；

```
CREATE TRIGGER tr_Group
ON Table_Group
for INSERT
AS  
???? 
```

请给我提意见。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-18T20:16:46.177

我建议您为此使用[检查约束：](http://msdn.microsoft.com/en-us/library/ms179491%28v=sql.105%29.aspx)

```
ALTER TABLE dbo.Table_Group ADD CONSTRAINT CK_Group
    CHECK (minimumVal < maximumVal) 
```

如果您仍想使用触发器，那么您需要一个[`INSTEAD OF`触发器](http://msdn.microsoft.com/en-us/library/ms175521%28v=sql.105%29.aspx)：

```
CREATE TRIGGER tr_Group ON Table_Group
INSTEAD OF INSERT
AS
BEGIN
SET NOCOUNT ON
    INSERT INTO dbo.Table_Group
    SELECT *
    FROM INSERTED
    WHERE minimumVal < maximumVal
END 
```

# iphone - iPhone闹钟渐进式音乐提醒+音量控制

> ID：15485819
> 
> 赞同：0
> 
> 时间：2013-03-18T20:01:34.703
> 
> 标签：iphone, ios, notifications, volume

我正在开发一个定制的 iPhone 闹钟。

当设备处于静音和锁定状态时，一些用户已经睡了。

我知道如果应用程序在用户锁定设备之前处于前台，则顶级 iPhone 警报（“免费智能闹钟”、“活地球”、“上升”）可以手动控制和增加音量。

有谁知道如何在静音模式下导航？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:04:11.243

配置[音频会话](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007875-CH1-SW1)时，只需使用`AVAudioSessionCategoryPlayback`类别。从文档：

> AVAudioSessionCategoryPlayback 或等效的 kAudioSessionCategory_MediaPlayback - 将此类别用于音频播放最重要的应用程序。即使屏幕锁定且响铃/静音开关设置为静音，您的音频也能播放。

可以在[此处](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Configuration/Configuration.html#//apple_ref/doc/uid/TP40007875-CH3-SW3)找到有关不同音频会话类别以及如何设置它们的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:22:50.853

这是不可能的。ios应用程序无法覆盖将ios转换为静音模式的硬件开关

*（与往常一样，越狱的 iPhone 被排除在外：D）*

# python - Python 正则表达式中的变量扩展

> ID：15485827
> 
> 赞同：-1
> 
> 时间：2013-03-18T20:01:58.793
> 
> 标签：python, regex, formatting, variable-expansion

我正在尝试用 Python 编写一个脚本，它“清理”许多文件输入的文本，如下所示：

```
for i in range(1,10):
    number = 1
    cleanText = re.sub('number.','',line).strip() 
    number = number + 1
    print cleanText 
```

一个示例文件是： 1\. Hello, World 2\. Hello earth

我需要在这里做的是一举删除编号和点以及前导空格。但是我到底如何才能首先执行一个简单的变量扩展呢？

谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:15:02.847

如果保证你的文件格式和你说的一样：

```
1\. Hello, World
2\. Hello earth 
```

你甚至不需要使用正则表达式，你可以使用`split`and `join`：

```
clean_line = ' '.join(line.split(' ')[1:]).lstrip()

>>> ' '.join("1\. Hello, world".split(' ')[1:])
'Hello, world' 
```

或者，如果您仍想进行替换，则`replace`基于此的代码可能会起作用：

```
number = 1
for line in file_handle:
  clean_line = line.replace("%d. " % number, "").lstrip()
  number += 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T20:11:55.083

正如其他人所说，您应该简单地使用匹配任何数字的正则表达式，例如`r"\d"`or `r"\d+"`。但是，出于学习目的，这是您所问问题的答案。

最接近“变量扩展”的等价物是字符串格式化运算符：

```
cleanText = re.sub('%d.' % number, line).strip() 
```

你也可以使用`str(number) + '.'`来达到同样的效果。您的代码还有几个问题：

*   你的循环是错误的；如果你正在迭代`range(1, 10)`，那么你不需要`number`手动增加。

*   你可能的意思是`range(1, 11)`。

*   `.`在正则表达式语法中匹配任何字符；你想要`\.`。

清理后的版本可能如下所示：

```
cleanText = line.strip()
for i in xrange(1, 11):
    cleanText = re.sub(r'%d\.', '' , cleanText) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T20:24:47.570

```
import re
fp = open('line','r')
for line in fp:
    pattern = re.match(r'[0-9]*\.(.*)',line)
    if pattern:
        print pattern.group(1)
    else:
        print line 
```

# java - 如何在android中读取xml文件并创建树视图

> ID：15485828
> 
> 赞同：0
> 
> 时间：2013-03-18T20:02:03.390
> 
> 标签：java, android, xml, xml-parsing, treeview

我总是从 Stack Overflow 获得关键问题的解决方案。首先，我要感谢 SO 的所有团队成员。我的问题是我在 android.xml 旁边有一个 XML 文件。我希望 android 读取这个文件并从这个文件创建树，并且树视图遵循通过和失败的测试条件。如何读取 xml 文件并从中创建树。请指导和帮助。

xml 文件是在记事本上创建的。这个xml文件的内容是：

```
 <?xml version="1.0" encoding="utf-8"?>

<Parent Node name="Unit Testing" result="Passed">

  <Child Node name="GetCampaignTestclass" result="" methodName="">

    <Sub Child Node name="CampaignPageShouldNotBeNull" result="Failed" methodName="GetCampaignPages"></Sub Child Node>
    <Sub Child Node name="CampaignServiceObjectShouldNotBeNull" result="Passed" methodName="GetCampaignService"></Child Node>
  </Sub Child Node>

  <Child Node name="GetAdGroupTestclass" result="" methodName="">

    <Sub Child Node name="AdGroupPageShouldNotBeNull" result="Failed" methodName="GetAdGroupPages"></Sub Child Node>
    <Sub Child Node name="AdGroupServiceObjectShouldNotBeNull" result="Passed" methodName="GetAdGroupService"></Sub Child Node>
  </Sub Child Node>

  <Child Node name="GetTextAdTestclass" result="" methodName="">
    <Sub Child Node name="AdGroupAdPageShouldNotBeNull" result="Failed" methodName="GetTextAdPages"></Sub Child Node>
    <Sub Child Node name="AdGroupServiceObjectShouldNotBeNull" result="Passed" methodName="GetTextAdService"></Sub Child Node>
  </Sub Child Node>

  <Child Node name="GetKeywordsTestclass" result="" methodName="">
    <Sub Child Node name="AdGroupCriterionPageShouldNotBeNull" result="Failed" methodName="GetAdGroupCriterionPages"></Sub Child Node>
    <Sub Child Node name="AdGroupCriterionServiceObjectShouldNotBeNull" result="Passed" methodName="GetAdGroupCriterionService"></Sub Child Node>
  </Sub Child Node>

</Parent Node> 
```

我可以在android中制作这个xml文件并从中读取节点数据吗？如何？

# emacs - Emacs lisp 评估 alist 中的变量

> ID：15485833
> 
> 赞同：4
> 
> 时间：2013-03-18T20:02:09.760
> 
> 标签：emacs, lisp, elisp

[这是Emacs Lisp](https://stackoverflow.com/questions/1664202/emacs-lisp-evaluate-variable-in-alist)的后续问题：evaluate variable in alist .. 我正在尝试`default-frame-alist`在我的`.emacs`文件中进行设置。考虑，例如

```
(setq default-frame-alist
      '((auto-lower . nil)
        (auto-raise . nil)
        (height . 41)
        (width . 80)
        (top . 1)
        (left . 1))) 
```

（我省略了一些值）这很好用..假设现在我想`height`根据另一个变量设置 ..说，我将整数值 50 存储在变量中`my-height`..如何设置`height`为的值`my-height`？我努力了

*   `(height . my-height)`
*   ``（身高。，我的身高）`

但两者都不起作用..我在这里错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T20:05:40.280

您需要[反引号](https://www.gnu.org/software/emacs/manual/html_node/elisp/Backquote.html)整个表格：

```
(setq default-frame-alist
      `((auto-lower . nil)
        (auto-raise . nil)
        (height . ,my-height)
        (width . 80)
        (top . 1)
        (left . 1))) 
```

# vb.net - vb.net - 将输出重定向到表单文本框

> ID：15485837
> 
> 赞同：0
> 
> 时间：2013-03-18T20:02:17.483
> 
> 标签：vb.net, process

我正在尝试在我的 vb.net 项目中读取/使用 python 程序的输出，到目前为止我没有得到任何结果。我想看到的是 python 程序运行（首先自己运行）并且所有输出都被重定向到一个文本框。

我看过其他一些关于这个的帖子，但我要么遗漏了一些东西，要么不理解一些东西，因为我得到的只是空白输出。公开课形式1

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Dim PythonPath = "C:\Python27\"
    Dim strPath As String = Application.StartupPath
    MessageBox.Show(PythonPath & "python.exe  """ & strPath & "\Resources\import_logs.py"" ")

    Dim start_info As New ProcessStartInfo(TextBox1.Text)

    ' Make the process and set its start information.
    Dim process As New Process()
    process.StartInfo.WindowStyle = ProcessWindowStyle.Hidden
    process.StartInfo.FileName = PythonPath & "\python.exe"
    process.StartInfo.Arguments = """" & strPath & "\resources\import_logs.py"""""
    process.StartInfo.UseShellExecute = False
    process.StartInfo.CreateNoWindow = True
    process.StartInfo.RedirectStandardOutput = True
    'process.StartInfo.RedirectStandardError = True

    AddHandler process.OutputDataReceived, AddressOf proccess_OutputDataReceived

    process.Start()
    process.BeginOutputReadLine()
End Sub

Public Sub proccess_OutputDataReceived(ByVal sender As Object, ByVal e As DataReceivedEventArgs)
    On Error Resume Next
    ' output will be in string e.Data
    ' modify TextBox.Text here
    'Server_Logs.Text = e.Data  ` Does not display anything in textbox
    MsgBox(e.Data) 'It works but I want output in text box field
End Sub
End Class 
```

最终，我要将参数传递给 python 脚本，并且我想获得我可以使用的反馈（将错误插入数据库，完成后发送电子邮件等），所以我希望它能够捕获过程在运行时，而不仅仅是最后的数据转储。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:27:05.500

第一件事——难怪你不确定你的代码有什么问题，你正在消除所有可能帮助你诊断它的错误。`On Error Resume Next`这是VB.NET的唯一目的。包含非结构化错误处理*只是*为了向后兼容 .NET 之前的 VB 版本，是时候忘记它曾经存在过。您*当然*不想在代码中使用它。（我会说“在你正在调试的代码中”，但所有代码都是调试的潜在候选者，而忽略错误只是愚蠢的。）

无论如何，关于具体问题。我们知道调用是`MsgBox`有效的，但是当您开始与表单上的控件进行交互时，它就不能正常工作了。所以有些东西在那里分崩离析。

事实证明，该`OutputDataReceived`事件是在完全不同的线程上引发的，该线程与用于创建进程的线程不同，也不同于运行应用程序 UI 的线程。它实际上只是从系统线程池中检索一个线程。

这就是问题所在：您不能在创建这些对象的线程之外的线程上操作 UI 对象（至少在不跳过一些圈子的情况下不能），这正是您的代码在这里试图做的。事实上，您可能正在接受一个相当迟钝地通知您这种情况的异常。

简单的解决方法是将类的[`SynchronizingObject`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.synchronizingobject.aspx)属性设置`Process`为您的 UI 组件之一（例如表单或要输出到的特定控件）。这会强制所有事件处理程序在创建该组件的同一线程上执行。此时，您的代码应该可以正常工作，因为您没有尝试进行任何跨线程 UI 访问。（消息框不易受此攻击，因为*任何*线程都可以显示消息框。您不会尝试访问绑定到另一个线程的现有 UI 对象。）

或者，您可以通过使用委托和`BeginInvoke`方法在事件处理程序方法中自己处理编组，但这对我来说似乎是不必要的工作。

# java - 具有无界队列的 ThreadPoolExecutor 不创建新线程

> ID：15485840
> 
> 赞同：21
> 
> 时间：2013-03-18T20:02:34.280
> 
> 标签：java, multithreading, threadpool, threadpoolexecutor

我`ThreadPoolExecutor`无法创建新线程。事实上，我写了一个有点骇人听闻`LinkedBlockingQueue`的东西，它可以接受任何任务（即它是无界的），但调用了一个额外的处理程序——在我的应用程序中它会发出池在后面的警告跟踪——这给了我非常明确的信息，表明 TPE 拒绝创建即使队列中有数千个条目，也会有新线程。我的构造函数如下：

```
private final ExecutorService s3UploadPool = 
new ThreadPoolExecutor(1, 40, 1, TimeUnit.HOURS, unboundedLoggingQueue); 
```

为什么它不创建新线程？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-18T20:02:34.280

[这篇博](https://github.com/kimchy/kimchy.github.com/blob/master/_posts/2008-11-23-juc-executorservice-gotcha.textile)文介绍了这个问题：

> 这种线程池的构造根本无法按预期工作。这是由于 ThreadPoolExecutor 中的逻辑，如果**无法**向队列提供任务，则会添加新线程。在我们的例子中，我们使用了一个无界的 LinkedBlockingQueue，我们总是可以向队列提供一个任务。这实际上意味着我们永远不会超过核心池大小并达到最大池大小。

如果您还需要将最小池大小与最大池大小分离，则必须进行一些扩展编码。我不知道 Java 库或 Apache Commons 中存在的解决方案。解决方案是创建一个知道 TPE 的耦合`BlockingQueue`器，如果它知道 TPE 没有可用的线程，它会竭尽全力拒绝任务，然后手动重新排队。它在链接的帖子中有更详细的介绍。最终，您的构造将如下所示：

```
public static ExecutorService newScalingThreadPool(int min, int max, long keepAliveTime) {
   ScalingQueue queue = new ScalingQueue();
   ThreadPoolExecutor executor =
      new ScalingThreadPoolExecutor(min, max, keepAliveTime, TimeUnit.MILLISECONDS, queue);
   executor.setRejectedExecutionHandler(new ForceQueuePolicy());
   queue.setThreadPoolExecutor(executor);
   return executor;
} 
```

然而，更简单地设置并不`corePoolSize`要`maxPoolSize`担心这种废话。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-22T21:41:34.223

正如@djechlin 所提到的，这是`ThreadPoolExecutor`. 我相信我已经找到了一个围绕这种行为的有点优雅的解决方案，我在这里的回答中展示了：

> [如何让 ThreadPoolExecutor 在排队之前将线程增加到最大值？](https://stackoverflow.com/questions/19528304/how-to-get-the-threadpoolexecutor-to-increase-threads-to-max-before-queueing/19528305#19528305)

基本上，您可以扩展`LinkedBlockingQueue`使其始终返回 false `queue.offer(...)`，如有必要，它将向池中添加额外的线程。如果池已经处于最大线程并且它们都忙，`RejectedExecutionHandler`则将被调用。然后是处理程序`put(...)`进入队列。

在那里查看我的代码。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-09T09:52:58.063

有解决此问题的方法。考虑以下实现：

```
int corePoolSize = 40;
int maximumPoolSize = 40;
ThreadPoolExecutor threadPoolExecutor = new ThreadPoolExecutor(corePoolSize, maximumPoolSize, 
    60L, TimeUnit.SECONDS, new LinkedBlockingQueue<Runnable>());
threadPoolExecutor.allowCoreThreadTimeOut(true); 
```

通过将[allowCoreThreadTimeOut()](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html#allowCoreThreadTimeOut%28boolean%29)设置为`true`，池中的线程可以在指定的超时（本例中为 60 秒）后终止。使用此解决方案，实际上是`corePoolSize`构造函数参数确定了最大池大小，因为线程池将增长到`corePoolSize`，然后开始将作业添加到队列中。池很可能永远不会变得比这更大，因为在队列满之前池不会产生新线程（考虑到`LinkedBlockingQueue`有`Integer.MAX_VALUE`容量可能永远不会发生）。因此，将`maximumPoolSize`值设置为大于 的意义不大`corePoolSize`。

注意事项：线程池在超时后有 0 个空闲线程，这意味着在创建线程之前会有一些延迟（通常，您总是有`corePoolSize`可用的线程）。

更多细节可以在[ThreadPoolExecutor](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html)的 JavaDoc 中找到。

# javascript - Isotope.js 动态改变排序数据值

> ID：15485843
> 
> 赞同：5
> 
> 时间：2013-03-18T20:02:36.777
> 
> 标签：javascript, jquery, jquery-isotope

我正在尝试动态更改 Isotope 项目的排序数据值，但 Isotope 似乎缓存了初始顺序值并且仅在`'reLayout'`调用时使用它。

我有一个项目页面，单击时将扩展为容器宽度的 100%。调整大小后，所有同位素项目都必须重新排序到特定位置。我遍历每个框并更新排序值。

下面的示例显示了两个同位素对象，顶部带有动画，产生正确的排序顺序值，但定位错误，第二个带有*应该*是正确结果的动画。

完整示例：http: [//jsfiddle.net/eB85m/4/](http://jsfiddle.net/eB85m/4/)

无论如何 Isotope 是否可以检索新的排序数据或直接更新 Isotope 的排序数据值？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-28T02:14:03.527

您对 Isotope 缓存初始订单值是正确的——来自 Isotope 的[文档](http://isotope.metafizzy.co/docs/sorting.html#sortby_option)：

> 数据缓存建立在初始化的基础上，因此可以在排序时快速访问。

Isotope 提供了[`updateSortData`](http://isotope.metafizzy.co/docs/methods.html#updatesortdata)……好吧，在初始化后更新排序数据的方法。[这是一个有效的 jsfiddle](http://jsfiddle.net/eB85m/5/)。

```
// Update sort data
// http://isotope.metafizzy.co/docs/methods.html#updatesortdata
$('#iso').isotope( 'updateSortData', $('#iso').children() ); 
```

到您的原始示例并评论了“重新布局” - 更新同位素的排序选项已经解决了这个问题（参考同位素的[排序演示](http://isotope.metafizzy.co/demos/sorting.html)）。

> ## V2 更新：
> 
> 在**V2**中，您可以使用`$('#iso').isotope('updateSortData').isotope();`
> ^([^(（根据下面的[评论](https://stackoverflow.com/questions/15485843/isotope-js-dynamically-changing-sort-data-values#comment48052595_15673080)）)])

# flash - Flash - 使用类

> ID：15485844
> 
> 赞同：0
> 
> 时间：2013-03-18T20:02:44.800
> 
> 标签：flash, class

我有以下代码并收到以下错误：

错误：调用可能未定义的方法 addFrameScript 调用可能未定义的方法停止。'player' 类 muset 子类 'flash.display.MovieClip' 因为它链接到该类型的库符号。

包裹 {

```
import flash.display.MovieClip;
import CollisionObject;

public class player extends CollisionObject {

    public function player() {
        // constructor code
        trace("I am an player");
    } //end constructor
}//end class 
```

} //结束包

这是作业：[http ://www.lwebdesigns.net/school/WGB340_WK3_iLab_corrected_MAR13.docx](http://www.lwebdesigns.net/school/WGB340_WK3_iLab_corrected_MAR13.docx)

我被困在第 2-3 步

# c# - 出现新表单时无法单击其他表单C#

> ID：15485849
> 
> 赞同：0
> 
> 时间：2013-03-18T20:03:07.233
> 
> 标签：c#, winforms, forms

我正在制作一个 ATM 模拟器，我目前正在尝试在一个表单上添加一个按钮来创建另一个表单（ATM）。我已经能够做到这一点，但仅限于一个表单，因为当新表单出现时，我无法单击另一个具有“添加 atm”按钮的表单。我已经尝试过`Form.Show`，`Form.ShowDialog`并`Applications.Run()`使用 C#。

这是代码：

```
public class Program
    {
        private Account[] ac = new Account[3];
        private ATM atm;
        public Form1 form1;

         /* This function initilises the 3 accounts 
         * and instanciates the ATM class passing a referance to the account information

         */
        public Program()
        {

            ac[0] = new Account(300, 1111, 111111);
            ac[1] = new Account(750, 2222, 222222);
            ac[2] = new Account(3000, 3333, 333333);

            Thread form1thread = new Thread(new ThreadStart(startform)); //Creates ATM Form
            //Thread atm2 = new Thread(new ThreadStart(start));

            form1thread.Start();
            //atm2.Start();
        }

        static void Main(string[] args)
        {
            new Program();
        }

        public void startform()
        {
            form1 = new Form1(this);
            form1.ShowDialog();
        }

        public void newatm()
        {
            atm = new ATM(ac);
            atm.ShowDialog();
        }

        public void makethread()
        {
            Thread newatm = new Thread(new ThreadStart(startform));
            newatm.Start();
        }
    } 
```

在form1中：

```
public partial class Form1 : Form
{
    Program program;

    public Form1(Program program)
    {
        InitializeComponent();
        this.program = program;
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        this.ShowDialog();
    }
    private void button1_Click(object sender, EventArgs e)
    {

        program.newatm();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:04:06.837

如果您不希望表单成为模式对话框，请使用表单的`Show`方法而不是方法。`ShowDialog`

您还需要确保从 UI 线程而不是后台线程创建和显示表单。根据您的代码，您根本不需要创建后台线程，只需直接从构造函数创建/显示表单。

# canvas - SVG to Canvas with Canvg - 填充线和背景线被删除？

> ID：15485850
> 
> 赞同：2
> 
> 时间：2013-03-18T20:03:08.777
> 
> 标签：canvas, svg, canvg

我正在尝试使用[Canvg](https://github.com/canvg/canvg)将 SVG 转换为 Canvas 。开箱即用非常好。

原始 SVG 图 [![SVG 图](../Images/7c943a923d3b8ac871a13b6e4c45ec1b.png)](https://i.stack.imgur.com/sH0gx.png)

画布渲染 [![画布渲染](../Images/651a43c1300216391adf63d6d312190a.png)](https://i.stack.imgur.com/6URz6.png)

我很难弄清楚：

1.  为什么“正在填写”行？似乎从第一个点到最后一个点画了一条线，但我似乎无法在 canvg 库中找到它。
2.  背景线元素被丢弃：这是一个例子`<line class="tick" y2="-220" x2="0"></line>`

有人有想法么？很高兴提供更多信息。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T13:30:32.260

你如何应用你的 CSS 样式？你的 svg 有多个类吗？这些在canvg中无法正常工作，请参阅此问题：

[http://code.google.com/p/canvg/issues/detail?id=127](http://code.google.com/p/canvg/issues/detail?id=127)

我附上的快速修复（没有很好地测试）

```
// @ line 736, replace with:
// add class styles
if (this.attribute('class').hasValue()) {

  // check for multiple classes
  // (<circle class="big green">)
  // with css .big.green {fill:green;r:big;}

  // we dont assume the elements in svg.Styles are sorted, so we check
  // .big.green and .green.big
  // TODO: if its sorted, one could reduce the work done here..

  // generates all possible combination, no doublicates, but taking ordering into account
  // comb2(['aa','bb', 'cc'])
  // [".aa", ".aa.bb", ".aa.bb.cc", ".aa.cc", ".aa.cc.bb", ".bb", ".bb.aa", ".bb.aa.cc", ".bb.cc", ".bb.cc.aa", ".cc", ".cc.aa", ".cc.aa.bb", ".cc.bb", ".cc.bb.aa"]
  var comb2 = function combinations(arr) {
    var fn = function(active, rest, all) {
      if (active != ''){all.push(active);}
      for (var i=0; i<rest.length;++i){
        fn(active + '.'+rest[i], [].concat(rest.slice(0,i), rest.slice(i+1)), all);
      }
      return all;
    }
    return fn('', arr, []);
  }

  var classes = svg.compressSpaces(this.attribute('class').value).split(' ');

  classes = comb2(classes);

  for (var j=0; j<classes.length; j++) {
    styles = svg.Styles[classes[j]];
    if (styles != null) {
      for (var name in styles) {
        this.styles[name] = styles[name];
      }
    }
    styles = svg.Styles[node.nodeName+classes[j]];
    if (styles != null) {
      for (var name in styles) {
        this.styles[name] = styles[name];
      }
    }
  }
} 
```

# jquery - 使用jquery上下移动包含元素

> ID：15485859
> 
> 赞同：13
> 
> 时间：2013-03-18T20:03:55.810
> 
> 标签：jquery, jquery-ui-sortable

感谢您的任何帮助，您可以提供！目前，我使用 ui-sortable 代码来允许用户按顺序上下移动项目。现在，我想为这些项目中的每一个提供一组“向上”和“向下”按钮，允许用户通过单击来上下移动项目。我试过修改这些帖子，但我似乎遗漏了一些明显的东西......

[jQuery Sortable Move UP/DOWN 按钮](https://stackoverflow.com/questions/2951941/jquery-sortable-move-up-down-button) [在jquery中向上/向下移动](https://stackoverflow.com/questions/4260373/move-up-down-in-jquery)

我想不知何故我没有将 jquery 应用于正确的元素。我的 jsfiddle 在这里：http: [//jsfiddle.net/kevindp78/vexw5/2/](http://jsfiddle.net/kevindp78/vexw5/2/)代码如下。

HTML

```
<div id="box" class="ui-sortable" style="display: block;"> 
<div class="leg">
    <a class="image">IMG1</a>
    <div class="details">
        <h3><a href="/details">Info</a></h3>
        <span class="moreinfo">MoreInfo</span>
    </div>
    <div class="clear"></div>
    <div class="up-down">
        <p>Change Order</p>
        <div class="up">
            <input type="button" value="Up" class="up-button"/>
        </div>
        <div class="down">
            <input type="button" value="down" class="down-button"/>
        </div>
    </div>
    <div class="morestuff">
        Stuff1
    </div>
</div>
<div class="leg">
    <a class="image">IMG2</a>
    <div class="details">
        <h3><a href="/details">Info</a></h3>
        <span class="moreinfo">MoreInfo</span>
    </div>
    <div class="clear"></div>
    <div class="up-down">
        <p>Change Order</p>
        <div class="up">
            <input type="button" value="Up" class="up-button"/>
        </div>
        <div class="down">
            <input type="button" value="down" class="down-button"/>
        </div>
    </div>
    <div class="morestuff">
        Stuff2
    </div>
</div>
<div class="leg">
    <a class="image">IMG3</a>
    <div class="details">
        <h3><a href="/details">Info</a></h3>
        <span class="moreinfo">MoreInfo</span>
    </div>
    <div class="clear"></div>
    <div class="up-down">
        <p>Change Order</p>
        <div class="up">
            <input type="button" value="Up" class="up-button"/>
        </div>
        <div class="down">
            <input type="button" value="down" class="down-button"/>
        </div>
    </div>
    <div class="morestuff">
        Stuff3
    </div>

</div> 
```

JS

```
$('up-button').click(function(){
$(this).parent('.leg').insertBefore.previous('.leg')
});

$('.down-button').click(function(){
$(this).parent('.leg').insertAfter.next('.leg')
}); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-18T20:22:06.213

您的代码中有几个问题需要解决，所以让我们按顺序处理它们。

首先，`$('up-button')`它缺少了，[`.`](http://api.jquery.com/class-selector/)所以它不会选择按钮。

接下来你使用[`parent()`](http://api.jquery.com/parent/)只上一级的方法，[`parents('.leg')`](http://api.jquery.com/parents/)改用。

[`insertBefore()`](http://api.jquery.com/insertBefore/)是一种方法，它接受关于放置您选择的内容的目标。

`previous()`不是一个函数，而是一个函数，它[`prev()`](http://api.jquery.com/prev/)不需要参数，因为它只是选择了前一个元素。

如果你结合所有这些修复，你会得到这样的东西

```
$('.up-button').click(function(){
  $(this).parents('.leg').insertBefore($(this).parents('.leg').prev());
});

$('.down-button').click(function(){
  $(this).parents('.leg').insertAfter($(this).parents('.leg').next());
}); 
```

如这个编辑过的小提琴[http://jsfiddle.net/vexw5/6/所示](http://jsfiddle.net/vexw5/6/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-18T20:17:39.317

您可以尝试用以下内容替换您的 JS：

```
$(".down").click(function () {
    var $parent = $(this).parents(".leg");
    $parent.insertAfter($parent.next()); 
});

$(".up").click(function () {
    var $parent = $(this).parents(".leg");
    $parent.insertBefore($parent.prev()); 
}); 
```

[http://jsfiddle.net/vexw5/7/](http://jsfiddle.net/vexw5/7/)

这只是基础知识。没有动画或任何东西。

# ruby-on-rails-3 - 康康：如何排除能力？

> ID：15485861
> 
> 赞同：0
> 
> 时间：2013-03-18T20:04:02.373
> 
> 标签：ruby-on-rails-3, cancan

我正在使用 cancan 为我的应用程序构建全面的权限系统。即使模型上设置了 :read 或 :manage 权限，我也需要能够“排除”某些特定记录，例如

```
can :read , User 
```

但我需要排除特定的 id ......比如：

```
can :read, User except when id in (1,2,3,.... list_of_excluded_ids) 
```

我试图通过构建一个 list_of_excluded_ids 来完成这项工作，如下所示：

```
all_ids = User.all
excluded_ids = Excluded.all (This model stores excluded ids)
permitted_id = all_ids - excluded_ids 
```

然后使用此列表，我遍历为每个 id 设置权限

```
permitted_ids.each do |permitted_id|
can :read, User, :id => permitted_id
end 
```

此方法适用于所有 id 的列表很小的情况。当列表很大时，它会使 mysql 出现内存错误，因为它使用 OR 生成一个非常长的 sql 查询，如下所示：

```
SELECT `users`.* FROM `users` WHERE ((`users`.`id` = 271) OR ((`users`.`id` = 270) OR ((`users`.`id` = 269) OR ((`users`.`id` = 268) OR ((`users`.`id` = 267) OR ((`users`.`id` = 266) OR ((`users`.`id` = 265) OR ((`users`.`id` = 264) OR ((`users`.`id` = 263) OR .....)))))) 
```

上面的查询只是一个例子，因为我不能在这里发布整个查询。这个查询变得如此之大，以至于导致 mysql 崩溃。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:19:04.627

您可以将范围传递给功能：

```
can :read, User, User.where(id => permitted_ids) do |u|
  permitted_ids.include? u.id
end 
```

假设`permitted_ids`是一个数组，这将使用 SQL“IN”子句来确定用户的索引操作范围。对于显示操作，CanCan 将使用该块，传入正在访问的用户。注意块和范围做同样的事情。这看起来很傻，但是 CanCan 要求您在使用将用于显示操作的范围时提供一个块。

# android - 如何同时显示两个单独的通知？

> ID：15485862
> 
> 赞同：1
> 
> 时间：2013-03-18T20:04:04.503
> 
> 标签：android, alarmmanager, notificationmanager

每当需要吃药时，我的应用程序都需要在状态栏中显示通知。如果要同时服用两粒药丸，则会出现两个通知。现在，如果药丸时间不同，我的应用程序可以显示单独的通知。问题是如果它们同时出现，它只显示最近创建的（当我按下按钮时）。但是它仍然振动两次。有什么建议么？

信息类：

```
 DatabaseHelper notiDb = new DatabaseHelper(this);
    notiDb.open();
    final String dataName = notiDb.getDataName(pushed_name);
    String dataDaily = notiDb.getDataDaily(pushed_name);
    final String dataWeekly = notiDb.getDataWeekly(pushed_name);
    String dataTwice = notiDb.getDataTwice(pushed_name);
    final String dataDosage = notiDb.getDataDosage(pushed_name);
    String dataStart = notiDb.getDataStart(pushed_name);
    String dataID = notiDb.getDataID(pushed_name);
    notiDb.close();

     ID = Integer.parseInt(dataID);
     int value_Weekly = Integer.parseInt(dataWeekly);
     int value_Daily = Integer.parseInt(dataDaily);
     int value_Twice = Integer.parseInt(dataTwice);
     int value_Start = Integer.parseInt(dataStart);

     Calendar calendar = Calendar.getInstance();
     calendar.set(Calendar.HOUR_OF_DAY, value_Start);
     calendar.set(Calendar.MINUTE, 00);
     calendar.set(Calendar.SECOND, 00);
     int setTime = (value_Daily*value_Twice)/value_Weekly;

     Intent intent_noti = new Intent(this,Alarm.class);
     intent_noti.putExtra("ID", ID);
     intent_noti.setData(Uri.parse(intent_noti.toUri(Intent.URI_INTENT_SCHEME)));
     PendingIntent pendingIntent = PendingIntent.getActivity(this, ID, intent_noti, PendingIntent.FLAG_ONE_SHOT);
     AlarmManager am = (AlarmManager)getSystemService(Activity.ALARM_SERVICE);
     am.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), setTime, pendingIntent); 
```

报警等级：

```
 DatabaseHelper notiDb = new DatabaseHelper(this);
    notiDb.open();
    final String dataName = notiDb.getDataName(pushed_name);
    String dataDaily = notiDb.getDataDaily(pushed_name);
    String dataWeekly = notiDb.getDataWeekly(pushed_name);
    String dataTwice = notiDb.getDataTwice(pushed_name);
    String dataDosage = notiDb.getDataDosage(pushed_name);
    String dataStart = notiDb.getDataStart(pushed_name);
    String dataID = notiDb.getDataID(pushed_name);
    notiDb.close();

    ID = Integer.parseInt(dataID);

   Intent intent_unique = new Intent(this, NotiScenario.class);
   intent_unique.putExtra("ID", ID);
   intent_unique.setData(Uri.parse(intent_unique.toUri(Intent.URI_INTENT_SCHEME)));
   PendingIntent pIntent = PendingIntent.getActivity(this, ID, intent_unique, 0);

    // Build notification
    Notification noti = new Notification.Builder(this)
        .setContentTitle("MedScan")
        .setContentText("3\. You should take "+dataDosage +" pills of " +dataName)
        .setSmallIcon(R.drawable.original)
        .setContentIntent(pIntent)
       .build();
    NotificationManager notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

    noti.defaults |= Notification.DEFAULT_ALL;
     //Hide the notification after its selected
   noti.flags |= Notification.FLAG_AUTO_CANCEL;

    notificationManager.notify(ID, noti); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:31:51.420

通知的ID是否相同？如果这是真的，我认为这会导致通知被覆盖。如果您要同时显示多个通知，请使用不同的 id。

# c++ - 析构函数和 unique_ptr

> ID：15485863
> 
> 赞同：25
> 
> 时间：2013-03-18T20:04:05.047
> 
> 标签：c++, c++11, unique-ptr

我有以下代码

```
class A {
    public:
        A(){}
        ~A(){}
    private:
        std::vector<std::unique_ptr<double> > x;
};

A f() {
    A a;
    return a;
}

int main() {
    A a=f();
    return 0;
} 
```

它不会编译（gcc 4.7），除非我注释掉析构函数。实际上，我的代码中并不需要这个析构函数，我只是想将它用于调试目的。

但是，我不明白发生了什么，因此我担心我做错了什么。这里发生了什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-18T20:06:12.663

这是因为显式定义的析构函数的存在阻止了为`A`.

根据 C++11 标准的第 12.8/9 段：

> 如果类 X 的定义没有显式声明移动构造函数，当且仅当
> 
> — X 没有用户声明的复制构造函数，
> 
> — X 没有用户声明的复制赋值运算符，
> 
> — X 没有用户声明的移动赋值运算符，
> 
> — **X 没有用户声明的析构函数**，并且
> 
> — 移动构造函数不会被隐式定义为已删除。

现在没有移动构造函数，从编译器返回值`f()`将尝试调用隐式生成的复制构造函数（为了向后兼容仍在生成该构造函数）。但是，`std::unique_ptr`是不可复制的。因此，错误。

显式定义移动构造函数（或将其声明为默认值，如[juanchopanza](https://stackoverflow.com/users/661519/juanchopanza)在评论中所建议的那样）将解决问题。

# c - kprintf 打印出大写字母

> ID：15485866
> 
> 赞同：1
> 
> 时间：2013-03-18T20:04:24.570
> 
> 标签：c, linux, unix, operating-system

在我的操作系统代码中的 C 程序中（在内核端），我试图用来`kprintf`打印一个字符，但是即使我这样做了，它也会打印它以及一些包含这四个小圆圈的块字符。

```
kprintf(&ch); 
```

有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T20:08:45.753

`printf()`函数系列采用格式*字符串*，它告诉您要打印的内容。您不能直接打印一个字符，因为`printf()`（或`kprintf()`视情况而定）将继续读取，就好像它是一个字符串一样。你想要这样的东西：

```
kprintf("%c", ch); 
```

格式字符串告诉`printf()`我们期望的附加参数。在这种情况下，`%c`表示一个字符参数。

# html - Firefox 白色间距

> ID：15485873
> 
> 赞同：1
> 
> 时间：2013-03-18T20:04:45.877
> 
> 标签：html, css, whitespace

刚刚建立了我的新网站，在 Chrome 中看起来很完美，但在 Firefox (OS) 上查看时，页面底部大约有 15 像素的空间。只是无法弄清楚是什么原因造成的。

[http://www.adamhuxtable.com/](http://www.adamhuxtable.com/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:07:56.500

尝试`p`从`footer`. 例如，将您的`layout.css`文件更新为以下内容（第 195 行）：

```
footer p {
    color: #fff;
    font-size: 12px;
    line-height: 16px;
    margin-bottom: 0;
    margin-top: 20px;
    text-align: center;
} 
```

# c++ - C Map插入迭代器绑定

> ID：15485875
> 
> 赞同：1
> 
> 时间：2013-03-18T20:04:58.973
> 
> 标签：c++, boost

有什么方法可以利用 boost::bind 在进行迭代器插入时“绑定”一组键的值？本质上，我想遍历一组键，并将它们插入到具有给定值的映射中。

```
map<int, int> mymap;
set<int> myset;
myset.insert(1);
myset.insert(2);
myset.insert(3);
....
myset.insert(100);

for_each(myset.begin(), myset.end(), boost::bind(&mymap.insert,_1, 5); //Should be some make_pair() in here, but not sure how to make this work 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:04:04.913

是的，这是可能的，但你不会对此感到满意。

它看起来像：

```
 std::for_each(
      myset.begin()
    , myset.end()
    , std::bind(
          &map<int, int>::insert
        , &mymap
        , std::bind(
              std::make_pair<int, int>
              , std::bind(
                    &std::set<int>::iterator::operator*
                  , std::placeholders::_1
                  )
              , 5
            )
        )
    ); 
```

（未测试此代码）

# .net - 在 ScrollBarViewer 的 RepeatButton 中使用背景图像不显示图像

> ID：15485876
> 
> 赞同：0
> 
> 时间：2013-03-18T20:05:00.447
> 
> 标签：.net, wpf, scrollbar, imagebrush

我正在尝试在 WPF 中创建自己的滚动查看器，它工作正常，除了 RepeatButton 中的背景图像。如果我使用 SolidColorBrush 而不是 ImageBrush 它工作正常。下面是我的 xaml，我已经验证可以通过在滚动条中的其他位置添加 ImageSource（特别是轨道图像）来找到它。你知道这是为什么吗？前景图像显示正常。

```
<Style x:Key="ScrollBarButtonStyle" TargetType="RepeatButton">
    <Setter Property="HorizontalContentAlignment" Value="Center"/>
    <Setter Property="VerticalContentAlignment" Value="Center"/>
    <Setter Property="Width" Value="50"/>
    <Setter Property="Height" Value="50"/>        
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="RepeatButton">
                <Grid Name="ButtonBackground">
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ButtonBackground" Storyboard.TargetProperty="Background">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <ImageBrush ImageSource="{DynamicResource ListItemBackgroundBttnNormal}"/>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Pressed">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ButtonBackground" Storyboard.TargetProperty="Background">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <ImageBrush ImageSource ="{DynamicResource ListItemBackgroundBttnPressed}"/>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Disabled">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ButtonBackground" Storyboard.TargetProperty="Background">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <ImageBrush ImageSource = "{DynamicResource ListItemBackgroundBttnDisabled}"/>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                    <DoubleAnimation Storyboard.TargetName="contentPresenter" Storyboard.TargetProperty="Opacity" From="1.0" To="0.5"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="MouseOver">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ButtonBackground" Storyboard.TargetProperty="Background">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <ImageBrush ImageSource="{DynamicResource ListItemBackgroundBttnNormal}"/>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <ContentPresenter
                          x:Name="contentPresenter"
                          Content="{TemplateBinding Content}"
                          ContentTemplate="{TemplateBinding ContentTemplate}"
                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                          HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                          Margin="{TemplateBinding Padding}"/>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:46:47.897

尝试将 DynamicResource 更改为 StaticResource 并查看它是否仍然有效。如果找不到路径，DynamicResource 不会显示任何错误，而 StaticResource 会执行此操作。我假设您的图像来源在这种情况下是未知的。确保在 App.xaml 中添加资源`<ResourceDictionary.MergedDictionaries>`。

# html - 如何创建具有固定宽度中心透明间隙的 100% 固定页脚？

> ID：15485878
> 
> 赞同：2
> 
> 时间：2013-03-18T20:05:06.383
> 
> 标签：html, css, sticky-footer

如何创建具有固定宽度中心透明间隙的 100% 固定页脚？没有脚本！

以这种方式展开 <<< ***_* __ *_* __****固定宽度间隙*****__ *_* __ *_*** >>> 以这种方式扩展***

 *****我自己的解决方案**

**HTML**

```
<div id="Ftr">
  <div id="FtrL"></div>
  <div id="FtrM"></div>
  <div id="FtrR"></div>
</div> 
```

**CSS**

```
#Ftr {
    position: fixed;
    height: 115px;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 21;
}
#FtrL,
#FtrR {
    position: absolute;
    bottom: 0;
    height: 100%;
    width: calc(50% - 360px);
    width: -webkit-calc(50% - 360px);
}
#FtrL {
    background: url('../Images/Layout/footer_left.png') repeat-x;
    left: 0;
}
#FtrR {
    background: url('../Images/Layout/footer_left.png') repeat-x;
    right: 0;
}
#FtrM {
    background: url('../Images/Layout/footer_middle.png') no-repeat;
    height: 115px;
    width: 720px;
    margin: 0 auto;
} 
```

在此处查看实时数据： [http ://www.dreamtek.info](http://www.dreamtek.info)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:23:07.647

仅使用带有 CSS3 **calc 函数**帮助的**CSS ：**

 **您可以使用以下 CSS 属性定义侧 DIV 元素的宽度：

```
width: calc((100% - 200px) / 2); /* browsers with native support */
width: -webkit-calc((100% - 200px) / 2); /* webkit browsers support, Chrome, Safari... */
width: -moz-calc((100% - 200px) / 2); /* Firefox support */ 
```

其中**200px**是中心 DIV 固定宽度。这样剩余的水平空间将被两侧的 DIV 元素平均填充。请注意，这不是跨浏览器兼容的解决方案。如果需要，您可能需要使用 javascript **（如果需要，请参阅我的其他答案）**

[演示](http://jsfiddle.net/JmSyw/)

+1 提醒我**webkit-calc问题的作者**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:50:02.293

我认为你不能**只**用 CSS 做你想做的跨浏览器。然而，尽管你说没有脚本（嘿，别打败我好吗？！）让我展示你可以通过几行 javascript 轻松实现它（使用 jQuery，但你不需要）

[演示](http://jsfiddle.net/2QLa8/)

### HTML

```
<div id="FtrM">
    <div id="FtrL"></div>
    <div id="FtrC"></div>
    <div id="FtrR"></div>
</div> 
```

### CSS

```
#FtrM {
    position: fixed;
    left: 0;
    bottom: 0;
    width: 100%;
    height: 120px;
}
#FtrL, #FtrR, #FtrC {
    float: left;
    height: 100%;
}
#FtrL, #FtrR {
    width: 100px;
    background-color: black;
}

#FtrC {
    background: none;
    width: 200px;
} 
```

### JS

```
function calc() {
    $('#FtrL, #FtrR').width(($('#FtrM').width() - $('#FtrC').width()) / 2);
}
calc();
$(window).resize(calc); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T20:15:53.740

```
<div id="footer">
  <div class="left"></div>
  <div class="right"></div>
  <div class="center"></div>
</div>

#footer {
  position: fixed; left: 0; bottom: 0; overflow: hidden; width: 100%;
}

#footer .left {
  float: left: width: 200px; height: 115px;
  background: url('../Images/Layout/footer_left.png') repeat-x;
}

#footer .right {
  float: right: width: 200px; height: 115px;
  background: url('../Images/Layout/footer_right.png') repeat-x;
}

#footer .center {
  overflow: hidden; height: 115px;
  background: url('../Images/Layout/footer_middle.png') no-repeat;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T20:10:26.790

HTML

```
<div class="contain">
<div class="footer">YOUR CONTENT HERE</div>
</div> 
```

CSS：

```
.contain {width:100%;}
.footer {margin:0 auto;width:300px;height:50px;} 
```

应该做你想做的。除非我误解了你的问题...... [http://jsfiddle.net/2Qw6D/1/](http://jsfiddle.net/2Qw6D/1/)*****

# tomcat - Apache 服务器在浏览器上显示默认页面

> ID：15485881
> 
> 赞同：0
> 
> 时间：2013-03-18T20:05:09.537
> 
> 标签：tomcat, servlets, web

我创建了一个托管在 Apache Tomcat 服务器 7.0.37 上的 java 网站。我还购买了一个名为 www.parsits.info 的域名，但是当我在浏览器中使用该链接时，它会打开 apache 默认页面而不是我的主页。但是当用 www.parsits.info/ITS/ 打开时，它会显示我的欢迎页面。

在浏览器中输入地址 www.parsits.info 时，如何让我的欢迎出现？

# javascript - javascript instanceOf 解释

> ID：15485884
> 
> 赞同：1
> 
> 时间：2013-03-18T20:05:14.327
> 
> 标签：javascript, instanceof

我只是在玩 instanceof 运算符。我想知道我的理解是否正确

```
var C = function(){};
// in the above statement C has a "prototype" property which points to an object which has 
// the constructor property which points to C constructor
var o1 = new C();
// in above statement o1.__proto__ is points to C.prototype. that means inheriting from C.prototype.
console.log(o1 instanceof C) // returns true
//instanceof will check o1.__proto__ is equals to C.prototype(recursively until it finds null object).
C.prototype = {};
console.log(o1 instanceof C) // false;
in the above case o1 was inherited from C.prototype which points to the different object not the present C.prototype object (empty object). so the instanceof condition check fails hence its false. 
```

请告诉我我的解释是否错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:07:54.267

是的，instanceof 检查对象原型链中的构造函数，如果在链中的任何位置找到传递的构造函数，则返回 true。所以如果你破坏了一个函数的原型，就像你用一个空对象覆盖它一样，那么 instanceof 将总是返回 false。

# java - 带数组的多个输入

> ID：15485885
> 
> 赞同：0
> 
> 时间：2013-03-18T20:05:14.903
> 
> 标签：java, arrays, arraylist, user-input, joptionpane

我需要编写一个程序，帮助根据当年确定下一年“同行建议”的预算。将要求用户提供同行顾问的姓名和他们获得的最高学位，以确定支付给他们的金额。我正在使用 a`JOptionPane`而不是，`Scanner`我也在使用`ArrayList`.

有没有办法让用户在一个输入中同时输入姓名和学位并将它们存储为两个不同的值，还是我必须有两个单独的输入对话框？示例：将姓名存储为“Name1”，将学位存储为“Degree1”，以计算其具体工资。

另外，我正在使用一个，`ArrayList`但我知道该列表最多需要包含六 (6) 个元素，是否有更好的方法来做我想做的事情？

如果有必要，这是我在开始考虑这个问题之前所经历的。

```
import java.util.ArrayList;
import javax.swing.JOptionPane;

public class PeerTutoring
{
    public static void main(String[] args)
    {
        ArrayList<String> tutors = new ArrayList<String>();

        for (int i = 0; i < 6; i++)
        {
            String line = null;
            line = JOptionPane.showInputDialog("Please enter tutor name and their highest earned degree.");
            String[] result = line.split("\\s+");
            String name = result[0];
            String degree = result[1];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:17:28.730

*“有没有办法让用户在一个输入中同时输入姓名和学位，但将它们存储为两个不同的值。”*

是的。例如，您可以要求用户输入以空格分隔的输入，然后拆分结果：

```
String[] result = line.split("\\s+"); //Split according to space(s)
String name = result[0];
String degree = result[1]; 
```

现在你有两个变量的输入。

*“我决定使用 ArrayList 但我知道将输入的名称数量（6），是否有更合适的数组方法可以使用？”*

`ArrayList`很好，但是如果长度是固定的，使用可以使用固定大小的数组。

* * *

## 关于OP更新

你做错了，应该是这样的：

```
ArrayList<String[]> list = new ArrayList<String[]>(6);
String[] splitted;
String line;
for(int i=0;i<6;i++) {
    line = JOptionPane.showInputDialog("Please enter tutor name and their highest earned degree.");
    splitted = line.split("\\s+");
    list.add(splitted);
}

for(int i=0;i<6;i++)
    System.out.println(Arrays.deepToString(list.get(i))); //Will print all 6 pairs 
```

您应该创建一个`ArrayList`包含将表示输入的字符串数组（因为用户输入 pair 作为输入）。现在，您所要做的就是将这对插入到`ArrayList`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:16:39.257

您可以做的是将 JOptionPane 的输入存储在一个字符串中，然后将该字符串拆分为一个数组以存储输入的名称和学位。例如：

```
String value = null;
value =  JOptionPane.showInputDialog("Please enter tutor name and 
                 their highest earned degree.");

String[] tokens = value.split(" ");//if you input name followed by space followed by degree, this splits the input by the space between them
System.out.println(tokens[0]);//shows the name
System.out.println(tokens[1]);//shows the degree 
```

现在您可以使用`tokens[0]`将名称添加到您的列表中。

# google-apps-script - 使用脚本将演示文稿嵌入到文档中

> ID：15485886
> 
> 赞同：0
> 
> 时间：2013-03-18T20:05:15.807
> 
> 标签：google-apps-script, google-docs, google-docs-api

是否可以使用 html 或脚本将 google 演示文稿嵌入到 google 文档中？如果是这样，您能否指出我正确的方向，因为我对 html 代码脚本一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-24T04:09:45.227

目前没有。Google Drive API 和 Google Apps Script 都不提供对演示文稿的访问。

访问[Issue 1573](https://code.google.com/p/google-apps-script-issues/issues/detail?id=1573)并为其加注星标以接收更新。

# winapi - 获取带有 jobID 的 SPL 文件

> ID：15485889
> 
> 赞同：0
> 
> 时间：2013-03-18T20:05:25.263
> 
> 标签：winapi, spooler, print-spooler-api

我正在用 C++ 开发一个打印监视器。但我无法获取文件 SPL。经过大量研究后，我发现我必须在 spoolerDirectory 键中插入存储 .spl 文件的文件夹的路径。

> HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\WindowsNT\CurrentVersion\Print\Printers\'printername'\SpoolDirectory = c:\windows\system32\spool\printers

此更改仅在重新启动 spool 服务后生效的问题。

当我正在监视作业打印时，当我重新启动假脱机程序时，我将丢失所有对象。

还有另一种方法可以解决我的问题吗？坦克！

# arrays - 将集合的值复制到 VBA 中的二维数组

> ID：15485891
> 
> 赞同：2
> 
> 时间：2013-03-18T20:05:29.760
> 
> 标签：arrays, excel, collections, copy, vba

我似乎正在撞着众所周知的砖墙。我有一个运行并填充集合的循环。大约有 20000 行和 11 列。我需要能够将集合的内容放入一个变体数组中，以便我可以批量复制到工作表。我使用集合的原因是条目的固有重复数据删除。

请有人就如何实现这一目标提出建议。我假设我遗漏了一些简单的东西，但如果我不使用集合，我需要对 200k+ 行进行重复数据删除。

提前感谢您的所有帮助

编辑

这是实际的代码。正如我上面提到的，问题不在于将数据放入集合（MyCollection）中，而是将其再次取出！

编辑

数据流从一个工作表开始，然后将其复制到一个名为 ArrayOrg 的数组中。循环遍历数组，当满足某些条件时，将一条记录添加到 ArrayOrg1 数组中。请看下面的代码。

```
 For intI = 1 To UBound(ArrayOrg())
            If ArrayOrg(intI, 7) = "cMat" And ArrayOrg(intI, 5) = "Plant" Then

                ArrayOrg1_cMat(Org1Count_cMat, 0) = ArrayOrg(intI, 1)           'User ID
                ArrayOrg1_cMat(Org1Count_cMat, 1) = ArrayOrg(intI, 2)           'BR ID
                ArrayOrg1_cMat(Org1Count_cMat, 2) = ArrayOrg(intI, 3)           'Scenario
                ArrayOrg1_cMat(Org1Count_cMat, 3) = ArrayOrg(intI, 4)           'Role
                ArrayOrg1_cMat(Org1Count_cMat, 4) = ArrayOrg(intI, 5)           'Controlling Field
                ArrayOrg1_cMat(Org1Count_cMat, 5) = ArrayOrg(intI, 6)           'Controlling Field Value
                ArrayOrg1_cMat(Org1Count_cMat, 6) = ArrayOrg(intI, 7)           'Webapp
                Org1Count_cMat = Org1Count_cMat + 1
Next intI

Dim MyCollection As Collection
    Dim ArrayTemp() As Variant
    Set MyCollection = New Collection  

    For intI = 0 To UBound(ArrayOrg1_cMat())
        For intJ = 0 To UBound(ArrayOrg2_cMat())
                If ArrayOrg2_cMat(intJ, 0) = ArrayOrg1_cMat(intI, 0) Then
                        If ArrayOrg2_cMat(intJ, 1) = ArrayOrg1_cMat(intI, 1 Then                             If ArrayOrg2_cMat(intJ, 2) = ArrayOrg1_cMat(intI, 2) Then                                 If ArrayOrg2_cMat(intJ, 3) = ArrayOrg1_cMat(intI, 3) Then                                     

                                    ArrayTemp(0, 0) = ""                                    'Name
                                    ArrayTemp(0, 1) = ArrayOrg1_cMat(intI, 0)               'AD ID
                                    ArrayTemp(0, 2) = ""                                    'Email
                                    ArrayTemp(0, 3) = ""                                     'Requester
                                    ArrayTemp(0, 4) = ArrayOrg1_cMat(intI, 6)               'Webapp
                                    ArrayTemp(0, 5) = ArrayOrg1_cMat(intI, 2)               'Scenario
                                    ArrayTemp(0, 6) = ArrayOrg1_cMat(intI, 3)               'Role
                                    ArrayTemp(0, 7) = "PL"                                 'Business Unit
                                    ArrayTemp(0, 8) = "NONE"
                                    ArrayTemp(0, 9) = "NONE"
                                    ArrayTemp(0, 10) = "NONE"
                                    ArrayTemp(0, 11) = ArrayTemp(0, 0) & ArrayTemp(0, 1) & ArrayTemp                                              (0, 2) & ArrayTemp(0, 3) & ArrayTemp(0, 4) _
                                                      & ArrayTemp(0, 5) & ArrayTemp(0, 6) & ArrayTemp                                                 (0, 7) & ArrayTemp(0, 8) & ArrayTemp(0, 9) _
                                                      & ArrayTemp(0, 10) '### This is the key for the collection

                                    On Error Resume Next
                                    MyCollection.Add ArrayTemp, ArrayTemp(0, 11)
                                    On Error GoTo 0                                    
                                End If
                            End If
                        End If
                End If
        Next intJ
    Next intI
'#### THIS IS WHERE THE PROBLEM IS
For intI = 0 To MyCollection.Count  
    ArrayOutput(intI, 0) = MyCollection.Item(intI)  
Next intI 
```

谢谢凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:54:28.810

```
Sub Tester()

Dim k As String
Dim i As Long, j As Long, r As Long, x As Long
Dim arr() As Variant
Dim dict

    ReDim arr(1 To UBound(ArrayOrg1_cMat, 1) + 1, 1 To 11)
    r = 0
    Set dict = CreateObject("scripting.dictionary")

    For i = 0 To UBound(ArrayOrg1_cMat())
        For j = 0 To UBound(ArrayOrg2_cMat())

            If ArrayOrg2_cMat(j, 0) = ArrayOrg1_cMat(i, 0) Then
            If ArrayOrg2_cMat(j, 1) = ArrayOrg1_cMat(i, 1) Then
            If ArrayOrg2_cMat(j, 2) = ArrayOrg1_cMat(i, 2) Then
            If ArrayOrg2_cMat(j, 3) = ArrayOrg1_cMat(i, 3) Then

                ' I'm skipping the constant values in your original key...
                k = Join(Array(ArrayOrg1_cMat(i, 0), _
                               ArrayOrg1_cMat(i, 6), _
                               ArrayOrg1_cMat(i, 2), _
                               ArrayOrg1_cMat(i, 3)), "~")

                If Not dict.exists(k) Then
                    r = r + 1
                    dict.Add k, True
                    arr(r, 1) = ""                   'Name
                    arr(r, 2) = ArrayOrg1_cMat(i, 0) 'AD ID
                    arr(r, 3) = ""                   'Email
                    arr(r, 4) = ""                   'Requester
                    arr(r, 5) = ArrayOrg1_cMat(i, 6) 'Webapp
                    arr(r, 6) = ArrayOrg1_cMat(i, 2) 'Scenario
                    arr(r, 7) = ArrayOrg1_cMat(i, 3) 'Role
                    arr(r, 8) = "PL"                 'Business Unit
                    arr(r, 9) = "NONE"
                    arr(r, 10) = "NONE"
                    arr(r, 11) = "NONE"
                End If

            End If
            End If
            End If
            End If

        Next j
    Next i

    ActiveSheet.Range("a2").Resize(r, 11).Value = arr

End Sub 
```

# jquery - Fancybox 2 + CSS - 类没有通过

> ID：15485899
> 
> 赞同：0
> 
> 时间：2013-03-18T20:05:56.353
> 
> 标签：jquery, css, fancybox, fancybox-2

虽然熟悉fancybox之前已经成功使用过多次，但我遇到了一个问题——它应该正常触发，大图像出现并按我的意图分组......但根本没有CSS样式。

脚本和 css 应包含在内（我已经仔细检查过，但你永远不知道..），当您单击缩略图时，大图像显示为居中，然后向右移动。

似乎没有任何 CSS 类被应用于 fancybox 元素，可能导致向右移动？以及显然缺乏造型。通过网络工具栏查看样式信息应该是fancybox wrap内的图像，只显示以下内容：

```
html > div > div > div..etc.. > img 
```

我不是 javascript 专家，所以如果我只是很密集，我很抱歉 - 我已经做了很多类似的问题但没有运气。

链接：[http ://www.tom-mayfield.com/angelcakes/?what-we-do/weddings.html](http://www.tom-mayfield.com/angelcakes/?what-we-do/weddings.html)

提前感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:02:16.310

好吧，fancybox css 文件在那里，但是fancybox css 设置并没有应用于盒子，为什么？

你正在加载你的fancybox css

```
<link rel="stylesheet" href="http://www.tom-mayfield.com/angelcakes/public/scripts/fancybox2/jquery.fancybox.css" media="print" type="text/css" /> 
```

**但是**，如果您设置此属性：

```
media="print" 
```

...这意味着仅当（并且如果）您打印文档时才会应用花式框样式，这实际上没有意义，不是吗？

只需更改`media="print"`为`media="screen"`

# c# - StackOverflowException 即使在增加堆栈大小之后

> ID：15485908
> 
> 赞同：6
> 
> 时间：2013-03-18T20:06:55.150
> 
> 标签：c#, visual-studio-2012

我有一个以 x86 模式运行的 C# WinForm 应用程序。它适用于 x86 模式。当我在任何 CPU 模式下运行此应用程序时会出现问题。我收到以下提到的错误：

> XXXXXX.dll 中发生了“System.StackOverflowException”类型的未处理异常

我知道这可能是由无限循环引起的，在这种情况下，在 x86 模式下应该会出现同样的错误。我知道这不是因为无限迭代。它与堆栈溢出有关。

在做了一些研究之后，我使用 Editbin 增加了堆栈大小

从

> Editbin.exe /Stack:14000000 "$(TargetDir)MyProject.exe"

至

> Editbin.exe /Stack:14000000 "$(TargetDir)MyProject.exe"

知道可能是什么原因以及我应该采取哪些方向？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-18T20:11:32.243

> 我的浴缸溢出来了。

试着买一个更大的浴缸。

> 好的，我做到了。我的浴缸还是溢出来了。

尝试买一个更大的浴缸。

> 好吧，还是溢出来了！我有一个巨大的浴缸，但它仍然溢出！

* * *

如果问题是排水管堵塞并且水龙头开着，那么买一个更大的浴缸也无济于事。

您的问题很可能是您的程序试图消耗*无限*量的堆栈。使堆栈变大无济于事。

> 我知道这可能是因为无限循环，在这种情况下，在 x86 模式下应该会出现同样的错误。

这种说法是错误的。不要求发生相同的错误。

> 为什么它会根据我是否针对特定的 cpu 而有所不同？

抖动可以在不同的场景下生成不同的代码，有时可以生成将无限递归变成无限循环的代码。那些不会消耗无限堆栈，但它们将永远运行。

> 假设为了论证，没有无限递归。

那么就有可能存在非常*大*的递归。由于 64 位代码可以比等效的 32 位代码占用更多的堆栈空间，因此大递归可能导致堆栈外错误更早发生。

在这种情况下，使堆栈变大是一个坏主意。相反，找到深度递归算法并将其变为迭代算法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-18T20:08:14.463

原因是无限递归。附加调试器并在发生异常时查看堆栈跟踪。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T20:20:23.377

你得到堆栈溢出的原因仅仅是因为你使用了太多的堆栈。

您仅在 x64 模式而不是 x86 模式下获取它的原因很可能是因为程序在 x64 模式下使用更多堆栈空间，因为引用占用了更多空间。你没有在 x86 模式下得到它只是运气，你根本没有使用足够的堆栈空间来让它在这些特定情况下用完。

解决方案是找出程序中使用如此多堆栈空间的内容。您应该寻找诸如递归函数之类的运行太多级别的东西。一个实现良好的递归函数会使用 10 或 100 级递归，但如果你使用错误的递归，你可能会有 10000000 级递归，这会占用大量堆栈空间。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-18T20:11:53.273

您可以查看堆栈跟踪吗？

您可以阅读此属性：Environment.StackTrace。

如果堆栈跟踪超出了您预设的特定阈值，您可以返回该函数。您还可以尝试用循环替换一些递归函数。（如果 .net 2.0 及更高版本，try-catch 块无法捕获 StackOverflowException 对象）

# matlab - 重新映射任意曲线

> ID：15485910
> 
> 赞同：1
> 
> 时间：2013-03-18T20:06:59.753
> 
> 标签：matlab, image-processing, transformation

![在此处输入图像描述](../Images/b9269b727bc1f54a844eeb13aff6b9ee.png)

上图显示了具有一组已知像素坐标的两条曲线。有没有办法将外部曲线转换为圆形，然后重新映射内部曲线，从而保留两条曲线之间所有点的距离以及两条曲线之间的面积？

我认为我会这样做的一种方法是将两条曲线之间的区域分成更小的四边形部分。四边形的顶部和底部将是具有预定长度的外部和内部曲线。四边形的边在两条曲线之间横向延伸，应该是直的。变换后，外曲线为圆弧，内曲线根据变换前的距离进行调整，以保持距离。为了保留面积，四边形的侧线将调整它们所定向的角度，但仍保持笔直，以保留面积。

问题是我想不出一种方法来对此进行编码或如何将区域分成更小的部分。

如果对如何解决我的问题有任何其他建议，我愿意接受。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:09:26.977

我认为不可能同时保留区域和距离。如果 x 和 y 是 x-原始形状的坐标和 y 坐标），或仅距离。以下是一个说明性示例：

编辑：我想了想，在下面的代码中，你有外圆半径的参数，可以在不改变线长的情况下自由改变影响区域。您应该将下面的代码变成一个函数，当然，省略缩放区域的部分，并使用其中一个优化函数来找到获得具有相同线长的最近区域的外圆的半径。

```
% Area normalisation flag
norm_area = true;

% Start with two circles, perturb them randomly
N = 100;
phi = linspace(0, 2*pi, N)';

% Set radii
r = [2 4];

% Generate data
r_pert = repmat(r, N, 1);

% Filter some random data (so it's smoothish)
filtOrd = 20;
b = ones(1, filtOrd) / filtOrd;
randData = filter(b, 1, randn(size(r_pert)));
randData = bsxfun(@minus, randData, mean(randData));
r_pert = r_pert + randData;

% Initial plot
close all;
polar(phi, r_pert(:, 2));
hold on;
polar(phi, r_pert(:, 1));

% Generate circle that encloses all radii
r_pureCirc = max(r_pert(:));

% Line lengths
lens = abs(r_pert(:, 2) - r_pert(:, 1));

r_pertCirc = r_pureCirc - lens;

% Calculate area of new and old shapes
% Elemental area is a pie slice between phi(n) - dphi/2 and phi + dphi/2
dphi = phi(2) - phi(1);
dA_orig = dphi * (r_pert(:, 2) .^ 2 - r_pert(:, 1) .^ 2) / 2;
dA_new = dphi * (r_pureCirc .^ 2 - r_pertCirc .^ 2) / 2;
A_orig = sum(dA_orig);
A_new = sum(dA_new);

r_new = [r_pertCirc repmat(r_pureCirc, N, 1)];
if norm_area
    % Normalise to same area
    r_new = sqrt(A_orig / A_new) * r_new;
end

% Plot again
figure;
polar(phi, r_new(:, 2));
hold on;
polar(phi, r_new(:, 1)); 
```

在此代码中，生成了一对被一些过滤的随机噪声干扰的圆圈 - 类似于您的原始绘图（ish）。在极坐标下工作，会生成一个圆形，其中整个原始形状都适合。计算第二个圆的内部点以保持原始距离。如果需要，然后按新形状和原始形状的面积比对整个事物进行缩放。

示例图：

原来的形状

[![原来的形状](../Images/7e4a4c50a815df146d08af9fcbca3285.png)](https://i.stack.imgur.com/cI8pD.jpg)

生成的形状

[![生成的形状](../Images/8ff55e1d885a0936677e0f495b2adf58.png)](https://i.stack.imgur.com/BVkK3.jpg)

# git - gitolite 配置 - 连接错误

> ID：15485912
> 
> 赞同：1
> 
> 时间：2013-03-18T20:07:03.580
> 
> 标签：git, gitolite, ssh-keys

我想将 gitolite 用于服务器上的 git 文件夹。我搜索了许多带有教程的博客，但没有找到一些正确连接到服务器的示例。

因此，我添加了一个新用户 gitolite，并创建了主目录 /home/gitolite。我将 gitolite 安装到 /home/gitolite/bin 并使用 ssh-key 进行了设置。

在我的 PC 上，我成功克隆了 gitolite-admin 并生成了新的 ssh 密钥（test、test.pub），它们保存在 .ssh/ 中：

```
honza@honza-sg:~$ ls .ssh/t*
.ssh/test  .ssh/test.pub 
```

下一步：将'test.pub'复制到keydir并修改gitolite.conf：

```
honza@honza-sg:~$ ls -l gitolite-admin/keydir/
-rw-rw-r-- 1 honza honza 396 bře 18 16:46 gitolite.pub
-rw-r--r-- 1 honza honza 396 bře 18 20:39 test.pub

honza@honza-sg:~$ cat gitolite-admin/conf/gitolite.conf 
repo gitolite-admin
    RW+     =   gitolite

repo work
    RW+     =   test 
```

我将此更改推送到服务器：

```
honza@honza-sg:~/gitolite-admin$ git add .
honza@honza-sg:~/gitolite-admin$ git commit -m 'add test user'
[master bff8df5] add test user
 2 files changed, 2 insertions(+), 10 deletions(-)
 create mode 100644 keydir/test.pub
honza@honza-sg:~/gitolite-admin$ git push
Counting objects: 10, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (5/5), done.
Writing objects: 100% (6/6), 774 bytes, done.
Total 6 (delta 1), reused 0 (delta 0)
remote: Initialized empty Git repository in /home/gitolite/repositories/work.git/
To gitbox:gitolite-admin
   3102ec2..bff8df5  master -> master 
```

我想，这是一个正确的程序。现在，我需要克隆新的 git 存储库。在 .ssh/config 我有这个：

```
honza@honza-sg:~$ cat .ssh/config 
Host gitbox
        User gitolite
        Hostname 192.168.1.10
        Port 22
        IdentityFile ~/.ssh/gitolite
Host gittest
        User test
        Hostname 192.168.1.10
        Port 22
        IdentityFile ~/.ssh/test 
```

并克隆命令：

```
honza@honza-sg:~/temp$ git clone gittest:work 
```

问题在这里：

```
Cloning into 'work'...
test@192.168.1.10's password: 
Permission denied, please try again.
test@192.168.1.10's password: 
Permission denied, please try again.
test@192.168.1.10's password: 
Permission denied (publickey,password).
fatal: The remote end hung up unexpectedly 
```

为什么它要我输入密码？当我生成密钥时，我没有输入密码（我只按了两次“输入”）。

感谢您的帮助，我很抱歉我的英语:)

编辑：

ssh -vvvT gittest：

```
honza@honza-sg:~/temp$ ssh -vvvT gittest
OpenSSH_6.0p1 Debian-3ubuntu1, OpenSSL 1.0.1c 10 May 2012
debug1: Reading configuration data /home/honza/.ssh/config
debug1: /home/honza/.ssh/config line 6: Applying options for gittest
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: /etc/ssh/ssh_config line 19: Applying options for *
debug2: ssh_connect: needpriv 0
debug1: Connecting to 192.168.1.10 [192.168.1.10] port 22.
debug1: Connection established.
debug3: Incorrect RSA1 identifier
debug3: Could not load "/home/honza/.ssh/test" as a RSA1 public key
debug1: identity file /home/honza/.ssh/test type 1
debug1: Checking blacklist file /usr/share/ssh/blacklist.RSA-2048
debug1: Checking blacklist file /etc/ssh/blacklist.RSA-2048
debug1: identity file /home/honza/.ssh/test-cert type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_6.0p1 Debian-3ubuntu1
debug1: match: OpenSSH_6.0p1 Debian-3ubuntu1 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_6.0p1 Debian-3ubuntu1
debug2: fd 3 setting O_NONBLOCK
debug3: load_hostkeys: loading entries for host "192.168.1.10" from file "/home/honza/.ssh/known_hosts"
debug3: load_hostkeys: found key type ECDSA in file /home/honza/.ssh/known_hosts:1
debug3: load_hostkeys: loaded 1 keys
debug3: order_hostkeyalgs: prefer hostkeyalgs: ecdsa-sha2-nistp256-cert-v01@openssh.com,ecdsa-sha2-nistp384-cert-v01@openssh.com,ecdsa-sha2-nistp521-cert-v01@openssh.com,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug2: kex_parse_kexinit: ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1
debug2: kex_parse_kexinit: ecdsa-sha2-nistp256-cert-v01@openssh.com,ecdsa-sha2-nistp384-cert-v01@openssh.com,ecdsa-sha2-nistp521-cert-v01@openssh.com,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,ssh-rsa-cert-v01@openssh.com,ssh-dss-cert-v01@openssh.com,ssh-rsa-cert-v00@openssh.com,ssh-dss-cert-v00@openssh.com,ssh-rsa,ssh-dss
debug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se
debug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-sha2-256,hmac-sha2-256-96,hmac-sha2-512,hmac-sha2-512-96,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-sha2-256,hmac-sha2-256-96,hmac-sha2-512,hmac-sha2-512-96,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: none,zlib@openssh.com,zlib
debug2: kex_parse_kexinit: none,zlib@openssh.com,zlib
debug2: kex_parse_kexinit: 
debug2: kex_parse_kexinit: 
debug2: kex_parse_kexinit: first_kex_follows 0 
debug2: kex_parse_kexinit: reserved 0 
debug2: kex_parse_kexinit: ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1
debug2: kex_parse_kexinit: ssh-rsa,ssh-dss,ecdsa-sha2-nistp256
debug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se
debug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-sha2-256,hmac-sha2-256-96,hmac-sha2-512,hmac-sha2-512-96,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-sha2-256,hmac-sha2-256-96,hmac-sha2-512,hmac-sha2-512-96,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: none,zlib@openssh.com
debug2: kex_parse_kexinit: none,zlib@openssh.com
debug2: kex_parse_kexinit: 
debug2: kex_parse_kexinit: 
debug2: kex_parse_kexinit: first_kex_follows 0 
debug2: kex_parse_kexinit: reserved 0 
debug2: mac_setup: found hmac-md5
debug1: kex: server->client aes128-ctr hmac-md5 none
debug2: mac_setup: found hmac-md5
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: sending SSH2_MSG_KEX_ECDH_INIT
debug1: expecting SSH2_MSG_KEX_ECDH_REPLY
debug1: Server host key: ECDSA d6:32:05:31:ea:3a:30:45:31:99:ca:90:b3:53:cb:75
debug3: load_hostkeys: loading entries for host "192.168.1.10" from file "/home/honza/.ssh/known_hosts"
debug3: load_hostkeys: found key type ECDSA in file /home/honza/.ssh/known_hosts:1
debug3: load_hostkeys: loaded 1 keys
debug1: Host '192.168.1.10' is known and matches the ECDSA host key.
debug1: Found key in /home/honza/.ssh/known_hosts:1
debug1: ssh_ecdsa_verify: signature correct
debug2: kex_derive_keys
debug2: set_newkeys: mode 1
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug2: set_newkeys: mode 0
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug2: service_accept: ssh-userauth
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug2: key: /home/honza/.ssh/test (0x7fa857d08e60)
debug1: Authentications that can continue: publickey,password
debug3: start over, passed a different list publickey,password
debug3: preferred gssapi-keyex,gssapi-with-mic,publickey,keyboard-interactive,password
debug3: authmethod_lookup publickey
debug3: remaining preferred: keyboard-interactive,password
debug3: authmethod_is_enabled publickey
debug1: Next authentication method: publickey
debug1: Offering RSA public key: /home/honza/.ssh/test
debug3: send_pubkey_test
debug2: we sent a publickey packet, wait for reply
debug1: Authentications that can continue: publickey,password
debug2: we did not send a packet, disable method
debug3: authmethod_lookup password
debug3: remaining preferred: ,password
debug3: authmethod_is_enabled password
debug1: Next authentication method: password
test@192.168.1.10's password: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:52:51.493

您仍然需要使用 gitolite 用户登录。Gitolite 将测试用户的密钥设置为授权密钥，因此它知道允许测试用户访问什么。所以这：

```
Host gittest
        User test
        Hostname 192.168.1.10
        Port 22
        IdentityFile ~/.ssh/test 
```

应该是这样的：

```
Host gittest
        User gitolite
        Hostname 192.168.1.10
        Port 22
        IdentityFile ~/.ssh/test 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:34:29.890

您可以检查 ssh -vT gittest 的结果，看看它为什么要求输入密码。[在“ Unable to Git-push master to Github](https://stackoverflow.com/questions/922210/unable-to-git-push-master-to-github/922461#922461) ”
中查看调试会话示例

`honza-sg`确保您在 gitolite 服务器`.ssh`目录上和上都对您的 ssh 密钥进行了正确的保护。
请参阅“ [Git SSH 身份验证](https://stackoverflow.com/a/13428529/6309)”：主要问题通常是`.ssh`其父目录或其任何父目录上的可写组。

# macos - 跟踪对象时出现 SURF 错误

> ID：15485914
> 
> 赞同：1
> 
> 时间：2013-03-18T20:07:04.850
> 
> 标签：macos, opencv, surf

我试图通过为每一帧调用 SURF 函数来在视频中找到一个对象......这是 SURF 函数 {

```
void Identify_SURF_Frame (Mat img_object , Mat img_scene , CvRect in_box) 
{ 
//-- Step 1: Detect the keypoints using SURF Detector
int minHessian = 1;
SurfFeatureDetector detector( minHessian , 15 , 3 );
std::vector<KeyPoint> keypoints_object, keypoints_scene;
detector.detect( img_object, keypoints_object );
detector.detect( img_scene, keypoints_scene );

//-- Step 2: Calculate descriptors (feature vectors)
SurfDescriptorExtractor extractor;
Mat descriptors_object, descriptors_scene;
extractor.compute( img_object, keypoints_object, descriptors_object );
extractor.compute( img_scene, keypoints_scene, descriptors_scene );

//-- Step 3: Matching descriptor vectors using FLANN matcher
//FlannBasedMatcher matcher;
BruteForceMatcher < L2 < float > > matcher;
//BFMatcher matcher( cv::NORM_L2SQR , false );
std::vector< DMatch > matches;
matcher.match( descriptors_object, descriptors_scene, matches );
double max_dist = 0; double min_dist = 100;

//-- Quick calculation of max and min distances between keypoints
for( int i = 0; i < descriptors_object.rows; i++ )
{ 
    double dist = matches[i].distance;
    if( dist < min_dist ) min_dist = dist;
    if( dist > max_dist ) max_dist = dist;
}

//-- Draw only "good" matches (i.e. whose distance is less than 3*min_dist )
std::vector< DMatch > good_matches;
for( int i = 0; i < descriptors_object.rows; i++ )
{ 
    if( matches[i].distance < 4 * min_dist )
    { 
        good_matches.push_back( matches[i]); 
    }
}

Mat img_matches;
drawMatches( img_object, keypoints_object, img_scene, keypoints_scene, good_matches, img_matches, Scalar::all(-1), Scalar::all(-1), vector<char>(), DrawMatchesFlags::NOT_DRAW_SINGLE_POINTS );

//-- Localize the object
std::vector<Point2f> obj;
std::vector<Point2f> scene;
    for( int i = 0; i < good_matches.size(); i++ )
    {
        //-- Get the keypoints from the good matches
        obj.push_back( keypoints_object[ good_matches[i].queryIdx ].pt );
        scene.push_back( keypoints_scene[ good_matches[i].trainIdx ].pt );
    }

    Mat H = findHomography( obj, scene, CV_RANSAC );
    //-- Get the corners from the image_1 ( the object to be "detected" )
    std::vector<Point2f> obj_corners(2);
    obj_corners[0] = cvPoint(0,0); 
    obj_corners[1] = cvPoint( img_object.cols, 0 );
    //obj_corners[2] = cvPoint( img_object.cols, img_object.rows ); 
    //obj_corners[3] = cvPoint( 0, img_object.rows );

    std::vector<Point2f> scene_corners(2);
    perspectiveTransform( obj_corners, scene_corners, H);
    int x1 , x2 , y1 , y2 ;
    x1 = scene_corners[0].x + Point2f( img_object.cols, 0).x ; 
    y1 = scene_corners[0].y + Point2f( img_object.cols, 0).y ; 
    x2 = scene_corners[0].x + Point2f( img_object.cols, 0).x + in_box.width ; 
    y2 = scene_corners[0].y + Point2f( img_object.cols, 0).y + in_box.height ; 

    rectangle(img_matches , cvPoint(x1, y1) , cvPoint(x2, y2)  , Scalar( 255, 255, 255), 1 );
            // square is the global CvRect to use it in main 
    square.x = x1 - in_box.width ; 
    square.y = y1 ; 
    square.width = in_box.width ; 
    square.height = in_box.height ;  

//-- Show detected matches
imshow( "Good Matches & Object detection", img_matches );
}
} 
```

使用此功能，当我发现问题时，我试图在对象周围绘制固定大小的正方形..有时我得到了这个错误，我不是什么意思..有时程序可以正常工作而没有这个错误..当这个错误发生时，程序从头开始

```
 {     
 OpenCV Error: Assertion failed (count >= 4) in cvFindHomography, file /Users/seereen2004/Desktop/OpenCV-2.4.3/modules/calib3d/src/fundam.cpp, line 235
 terminate called after throwing an instance of 'cv::Exception'
   what():  /Users/seereen2004/Desktop/OpenCV-2.4.3/modules/calib3d/src/fundam.cpp:235:    error: (-215) count >= 4 in function cvFindHomography

 Program received signal:  “SIGABRT”.
 sharedlibrary apply-load-rules all
 } 
```

请问有什么解释吗？提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T15:14:11.260

当你的good_matches（<=4）太少时，可能会出现类似的情况。您需要跳过此帧。

# java - 从Java中的参数列表中获取数组索引

> ID：15485915
> 
> 赞同：0
> 
> 时间：2013-03-18T20:07:06.650
> 
> 标签：java, arrays

我想要一个方法或函数来使用 Java 中的索引数组获取数组的元素，但我还不确定如何做到这一点。是否可以从 Java 中的参数数组中获取数组索引（这样`getArrayIndex(theArray, [0, 1])`会返回`theArray[0][1]`?

```
import java.util.*;
import java.lang.*;
class Main
{
    public static void main (String[] args) throws java.lang.Exception
    {
        Object[][] theArray = {{"Hi!"}, {"Hi!"}, {"Hi!", "Hi!"}};
        Object index1 = getArrayIndex(theArray, [0, 0]) //this should return theArray[0][0]
        Object[] index1 = getArrayIndex(theArray, [0]) //this should return theArray[0]
    }

    public static Object getArrayIndex(Object[] theArray, Object[] theIndices){
        //get the object at the specified indices
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:03:59.040

请注意，此（和其他解决方案）不进行边界检查，因此您可能会得到 IndexOutOfBounds 异常。

```
// returns the Object at the specified indices
public static Object getArrayIndex(Object[][] theArray, int[] theIndices) {
   if (theIndices.length > 1) {
     return theArray[theIndices[0]][theIndices[1]];
   }
   return theArray[theIndices[0]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:11:16.817

```
public static Object getArrayIndex(Object[] theArray, Integer[] theIndices){
    Object result=theArray;
    for(Integer index: theIndices) {
        result = ((Object[])result)[index];
    }    
    return result;        

} 
```

# c# - 以编程方式将图像“插入”到 TFS 工作项

> ID：15485916
> 
> 赞同：1
> 
> 时间：2013-03-18T20:07:09.423
> 
> 标签：c#, tfs, tfs-sdk

我一直在开发一个小型 winform c# 应用程序，它使我能够在 TFS 中创建一个工作项，而无需实际在 TFS 服务器上进行。我已经知道如何添加标题、附件、描述等。但是我似乎无法弄清楚如何将本地图像插入到 TFS 工作项“Repro Steps”字段中。到目前为止，这是我的代码。

```
Uri collectionUri = new Uri("Server Adress" + project);
TfsTeamProjectCollection server = new TfsTeamProjectCollection(collectionUri);
WorkItemStore store = (WorkItemStore)server.GetService(typeof(WorkItemStore));

WorkItem workItem = store.Projects[SubProject].WorkItemTypes["Bug"].NewWorkItem();
workItem.Title = "Title";
workItem.IterationPath = "Iteration";
workItem.AreaPath = "Area"; 

workItem.Fields["repro steps"].Value = "Text"; //Here is where I would like to add my image

workItem.Fields["Assigned To"].Value = "Assigned";
workItem.Attachments.Add(new Attachment(File, "comment"));
workItem.Save(); 
```

为了进一步澄清，这是我本质上想要做的事情： ![在此处输入图像描述](../Images/4499be35a67a8fc3b6fbaa6e73c4fe40.png)

![在此处输入图像描述](../Images/9f4a16c874c5df29d31ccf12bdd79be2.png)

![在此处输入图像描述](../Images/511e4ce90e8fd537dee599b311e30b74.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:32:29.923

我相信该`Description`字段被编码为各种 HTML，并且图像首先作为单独的文件附加。（从历史上看，它是一个文本字段，所以我找不到任何其他说明）

[这是附加文件的示例](https://stackoverflow.com/questions/3507939/add-an-attachment-via-the-sdk-to-a-work-item-without-using-a-physical-file)

# php - 如何不让访问者查看网站，如果他们正在连接 IE

> ID：15485921
> 
> 赞同：-2
> 
> 时间：2013-03-18T20:07:32.917
> 
> 标签：php, html, internet-explorer

有没有可能的方法，不让客户使用 Internet Explorer 查看网站？我的意思是，如果访问者使用 Internet Explorer 连接到网站，我想引起错误？而且，如果这是一种可能的方式，我该如何使用 PHP 或 HTML（如果可能）来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:12:44.160

我认为这可以帮助你：

```
<?php
    function detect_msie()
    {
        if (isset($_SERVER['HTTP_USER_AGENT']) && 
            (strpos($_SERVER['HTTP_USER_AGENT'], 'MSIE') !== false))
            return true;
        else
            return false;
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:10:31.633

```
if(preg_match('/MSIE/i', $_SERVER['HTTP_USER_AGENT']))
{
    // do redirect or throw exception etc.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T20:16:22.950

我们可以理解您的英语问题。 [该站点](http://www.devin.com/ieblock_howto.shtml)建议使用此 PHP 代码，并且还展示了一种 JavaScript 方法（以及其他几种方法）。

```
<?php
   if (eregi("MSIE",getenv("HTTP_USER_AGENT")) ||
       eregi("Internet Explorer",getenv("HTTP_USER_AGENT"))) {
    Header("Location: http://www.domain.com/ie_reject.html");
    exit;
   }
?> 
```

[这个其他网站](http://callumpy.co.uk/2012/03/how-to-block-internet-explorer-from-your-site/)有幽默和粗鲁的信息要显示（我不推荐给你！）你可以编辑以适应你的网站。您从那里下载脚本。

# regex - apache中的多个RewriteBase

> ID：15485922
> 
> 赞同：2
> 
> 时间：2013-03-18T20:07:37.997
> 
> 标签：regex, mod-rewrite, apache2

我很少涉足服务器端设置。这是我试图在我的 .htaccess 文件中做的事情。[http://domain.com/variable](http://domain.com/variable)应该重写为[http://domain.com/home.php?aid=variable](http://domain.com/home.php?aid=variable)

为此，我有：

```
<Directory /var/www/domain.com/www>
 Options -Indexes +FollowSymLinks
 RewriteEngine On
 RewriteBase /
 RewriteRule ^([0-9a-zA-Z]*)$ /index.php?aid=$1 [L]
</Directory> 
```

我现在也希望能够做到这一点： [http://domain.com/webinar/variable](http://domain.com/webinar/variable)应该重写为[http://domain.com/webinar.php?aid=variable](http://domain.com/webinar.php?aid=variable)

我是否需要使用相同规则或只是另一个规则的第二个重写基础？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:57:51.677

只是一个新的 RewriteRule。一个新的 RewriteBase 指令会过多，因为无论如何您都需要编写另一个 RewriteRule。

```
<Directory /var/www/domain.com/www>
 Options -Indexes +FollowSymLinks
 RewriteEngine On
 RewriteBase /

 # Stop execution if request is for an existing file or directory
 RewriteCond %{REQUEST_FILENAME} -f
 RewriteCond %{REQUEST_FILENAME} -d
 RewriteRule . - [L]

 # Rewrite webinar/variable to webinar.php?aid=variable
 RewriteRule ^webinar/([0-9a-zA-Z]*)$ webinar.php?aid=$1 [L]

 # Rewrite variable to index.php?aid=variable
 RewriteRule ^([0-9a-zA-Z]*)$ index.php?aid=$1 [L]
</Directory> 
```

# jquery - AngularJS 中的连接对象

> ID：15485926
> 
> 赞同：2
> 
> 时间：2013-03-18T20:07:44.263
> 
> 标签：jquery, angularjs, concatenation

我正在使用 AngularJS 开发单页应用程序。目前我已经进行了设置，因此每 5 秒调用一次数据库以更新客户端模型。我想用时间戳错开事情。因此，它不会从数据库中提取所有内容，而只会提取比上次调用更新时添加的所有内容。（节省带宽等）。但这对我来说没有意义

*角度控制器*

```
var timestamp = '';
function NewsListCtrl($scope, $http, $timeout) { 
    $scope.news = [];
    $scope.newsRequest = function() {

        $http.get('/ci/index.php/news/get_news_ajax/' + timestamp).success(function(data) {
            timestamp = $.now();

            $scope.news = $scope.news.concat(data);
        });
    };

    $scope.newsRequest();
    setInterval(function(){
        $scope.$apply(function(){
            $scope.newsRequest();
        });
    }, 5000);
} 
```

上面的代码不会在页面上打印任何内容。第一个请求显示对象中的数据。但后续请求（带有时间戳）显示空对象。所以至少第一个请求应该打印出来。

*初始请求中的数据样本*

```
{"new":[{"id":"181","title":"not gonna work","slug":"not-gonna-work","time":"1363374669","text":"asdfs","deletetime":null}]} 
```

当我删除

```
$scope.news = []; 
```

然后我得到返回的错误，说它是未定义的。

任何人都能够阐明实现这一目标的正确方法吗？

***编辑：***

根据答案，我已将代码更新为：

```
var timestamp = '';
function NewsListCtrl($scope, $http, $timeout) { 
    $scope.news = [];
    $scope.newsRequest = function(){
        $http.get('/ci/index.php/news/get_news_ajax/' + timestamp).success(function(data) {
            timestamp = $.now();
            $scope.news = $scope.news.concat(data.new);   
    });
};
$scope.newsRequest();
setInterval(function(){
    $scope.$apply(function(){
           $scope.newsRequest();
    });
}, 5000); 
```

所以现在数据仍然显示在页面上。但它实际上不再从模型中填充新数据。不确定这是否是逻辑问题。我在用着

```
timestamp = $.now(); 
```

设置当前时间。它显示一个 13 位整数。但是在我的数据库中，它显示了一个带有 php 时间函数的 10 位整数。

```
time() 
```

这些冲突吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T20:40:02.067

You should concat the array itself (now you are concatenating initial array with hash object):

```
$scope.news = $scope.news.concat(data['new']);
/* data['new'] because your request returns `{new: []}`, consider changing it to `{news:[]}` */ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T20:50:17.637

除了德米特里的回答，使用

```
if ($scope.news == null) {
    $scope.news = [];
} 
```

回调里面。

或者，移动`$scope.news = []`回调的外部。

### 更新您的新问题：

`$.now()`以毫秒为单位。Unix 时间以秒为单位（`date +%s`）（我拒绝承认 PHP `:P`）

# android - 是否可以支持旧 API 级别的 setScrollY() (ScrollView API 14) 之类的功能？

> ID：15485927
> 
> 赞同：5
> 
> 时间：2013-03-18T20:07:47.667
> 
> 标签：android, api, scroll, scrollview

我有一个简单的第一个 Android 应用程序，我正在编写代码。我的主要活动之一是相当长的 ScrollView。我有一些按钮可以调用其他 ListViews。当 ListViews 完成并且 ScrollView 返回时，我希望屏幕上的位置与第一次调用 ListView 时的位置相同。

我找到了 getScrollY() 和 setScrollY() 方法，并且可以实现它们以保持我希望的位置。

但是，setScrollY() 是一个 API 14 及更高版本的函数，根据我的应用统计数据，我在 Gingerbread 上有很多用户，这是一个较旧的 API 级别。

我的问题：是否有一种我忽略或可以指出的方法允许我在旧 API 级别上拥有与 setScrollY() 相同的功能？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-18T20:13:02.640

你看过`scrollTo(getScrollX(), y)`吗？它适用于所有版本的 Android。

[http://developer.android.com/reference/android/view/View.html#scrollTo(int%2C%20int)](http://developer.android.com/reference/android/view/View.html#scrollTo(int%2C%20int))

如果您查看 的实现`setScrollY()`，您会看到：

```
public void setScrollY(int value) {
    scrollTo(mScrollX, value);
} 
```

# php - 如何解析 AWK 或 PHP 中的“中间”字段？

> ID：15485928
> 
> 赞同：1
> 
> 时间：2013-03-18T20:07:49.107
> 
> 标签：php, parsing, awk

我的数据如下所示：

```
1 company 123
2 company name 321
3 company name, Inc. 456 
```

每行包含三个字段。职位、公司名称和最后一组数字是它们的索引。

我知道在 AWK 我可以做这样的事情：

```
% cat companylist.txt | awk ' { print $1} ' 
```

哪个可以很好地处理位置编号。并且使用 $NF 将获得最后一个数字，即索引。但是公司名称的中间字段呢？我如何解析它，以便我最终得到三个字段，分别是位置、公司名称、索引。

这可以根据我的需要在 AWK 或 PHP 中完成，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:12:00.113

您可以使用正则表达式检查锚定在开头和结尾的两个数字之间的字符串。

就像是：

```
#^\d+\s+(.*)\s+\d+$#
 ^^^^^^^    ^^^^^^ anchor numbers to end and start with at least one space after and before 
```

[`preg_match`](http://php.net/manual/en/function.preg-match.php)在字符串上使用：

```
$pattern = '#^\d+\s+(.*)\s+\d+$#';
preg_match($pattern, $one_line_of_list, $matches); 
```

**编辑：**要捕获数字，只需将模式更改为：

```
$pattern = '#^(\d+)\s+(.*)\s+(\d+)$#'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T21:31:11.337

这不是一个常规的输入文件，例如它不是制表符分隔的。如果是这样，有一个第一个字段和一个最后一个字段以及中间的任意数量的字段应该被视为一个字段，可以这样做：

```
awk '{$1=$NF=""; $0=$0; $1=$1}1' file 
```

如果中间“字段”中单词之间的空格数不重要。否则你可以尝试：

```
awk '{gsub("^" $1 "[ \t]*|[ \t]*" $NF "$","")}1' file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T20:26:32.083

由于您没有提供数据来源，即文本文档等。我无法包含从源中读取数据的代码行，因此您需要在开头添加一些内容以循环遍历数据的来源。一旦你得到它，并创建循环机制，你可以使用这段代码将你的数据格式化为 3 个变量，然后用它做其他事情。

```
<?php
$string=line; // get a single line into the $string variable, from a loop or whatever.
$linearray=explode(' ', $string);
$lastplace=count($linearray)-1; // subtract 1 to account for starting from 0 in array
$position=$linearray[0]; // first one will always be the position
$index=$linearray[$lastplace]; // last one will always be the index
$i=1; //starting array position for your while loop
$companyname=""; //start company name with an empty string
while($i<$lastplace){ //cycle through all the middle chunks of the array to get the     company name
    $companyname.=$linearray[$i]; //adds any bits in the middle to the company name
    $companyname.=" "//adds a space in case there are more parts to add to it
    $i++;
}
// add function here to do something with the data

?> 
```

如果它是公司名称的最后一部分，您甚至可以使它更漂亮并创建某种检查以不添加最后一个空格

# c# - 如何在 TPL 中检查变量是否已在其他线程中更改

> ID：15485930
> 
> 赞同：1
> 
> 时间：2013-03-18T20:07:56.083
> 
> 标签：c#, task-parallel-library

我需要检查 TPL 程序中的变量是否已更改。例如，如果一个线程更改了一个 volatile 字符串变量，其他线程不需要更改它。由于变量的类型是 volatile 其他线程可以使用它。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:10:25.570

1.  `volatile`可能不会像您认为的那样做。不要使用它，因为它不能给你你需要的东西。
2.  您无法确定变量是否已像那样更改。也许您可以`bool wasChanged = false`在写入变量时添加 a 并将其设置为 true。请记住为此使用正确的同步（可能`lock`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T20:11:22.967

考虑到变量类型的限制，检查共享变量与其预期值的可靠方法是使用[互锁](http://msdn.microsoft.com/en-us/library/system.threading.interlocked.aspx)操作。

# javascript - 我在 riak client_user 和 account_user 中有两个存储桶，我正在尝试制作一个 mapreduce 来获取所有用户的对象

> ID：15485933
> 
> 赞同：0
> 
> 时间：2013-03-18T20:07:58.707
> 
> 标签：javascript, mapreduce, riak, buckets

我有两个 riak 存储桶，“client_user”包含 compose_key 作为密钥，如 clientid-userid 和另一个存储桶“account_user”，其中包含 userid 作为密钥和用户信息。我正在尝试进行一个 mapreduce 查询以找出一个客户端上的所有用户信息。我在互联网上搜索，我找不到任何答案。任何人都可以帮助我对 riak 进行 javascript mapreduce 查询吗？真的很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:30:54.013

如果键是一个复合键，例如 clientId_userId，则无法单独查询它以查找与该客户端关联的用户。您可以列出所有键；编写一个javascript map阶段，根据分隔符拆分key；根据客户端 ID将此操作的结果提供给[SetMemberFilter ；](http://basho.github.com/riak-java-client/1.0.7/com/basho/riak/client/mapreduce/filter/SetMemberFilter.html)对 account_user 存储桶使用另一个 map reduce 操作`SetMemberFilter`。

您的数据没有为 Riak 正确建模。如果用户信息只包含客户端 ID 的二级索引，这将是对该存储桶的简单调用。恐怕没有简单的答案。您仍然可以使用我在答案中概述的一系列步骤来检索信息，但这会效率低下。没有其他办法。

# jsf - Richfaces 4 - 替代 AjaxActionComponent

> ID：15485937
> 
> 赞同：1
> 
> 时间：2013-03-18T20:08:16.777
> 
> 标签：jsf, migration, richfaces, ajax4jsf

我们正在将应用程序从 jsf 1.2 迁移到 jsf 2.0，并将 Ajax4JSF (ajax4jsf-1.1.1) 升级到 Richfaces 4.2.2。在我们的旧代码中，有些地方我们使用 org.ajax4jsf.framework.ajax.AjaxActionComponent 以编程方式设置某些组件的 'rerender' 属性。相关代码如下：

```
public void changeReRender(UIComponent comp){
    AjaxActionComponent commandAjax = (AjaxActionComponent)comp;
    HashSet values = new HashSet();
    values.add("idToBeRerendered");
    commandAjax.setReRender(values);
} 
```

但是在 Richfaces 4 中，AjaxActionComponent 类被删除了。是否有可以用来代替 AjaxActionComponent 的类，或者以其他方式以编程方式更改 UIComponent 的“重新渲染”属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:52:31.120

在 JSF2 中，有一种更通用的方法可以使用`PartialViewContext`对象以编程方式呈现 id。试试下面的代码片段

```
 public void changeReRender(UIComponent comp){
            // AjaxActionComponent commandAjax = (AjaxActionComponent)comp;
            // HashSet values = new HashSet();
            // values.add("idToBeRerendered");
            // commandAjax.setReRender(values);
           FacesContext context = FacesContext.getCurrentInstance();
           PartialViewContext partialContext =  context.getPartialViewContext(); //obtain a reference to the PartialViewContext object
           //add the desired id to the list of render ids 
           partialContext.getRenderIds().add("idToBeRerendered");
        } 
```

# tomcat7 - 使用 Alias 时 Mod_JK、Tomcat 和 Apache Httpd “找不到文件”

> ID：15485938
> 
> 赞同：0
> 
> 时间：2013-03-18T20:08:39.417
> 
> 标签：tomcat7, apache, mod-jk, mod-alias

我一直在尝试找到一个解决方案，以解决我认为应该将 Alias 与 Tomcat 和 Apache Httpd 一起非常常见的用法，但我找不到它。

我有 Tomcat 运行我的应用程序服务器，我希望能够使用别名来提供动态内容。我使用 Mod_JK 将 Apache Httpd 配置为前端，以通过 Tomcat 提供所有动态文件。这工作正常，除非使用别名，因为 Tomcat 不知道如何处理别名。

基本上我有我的Tomcat应用程序/webapps/myApp，里面有“/folderA”，所以使用http:localhost:8080/myApp/folderA和localhost/myApp/folderA一样好。我希望能够让用户 /folderB 指向 /folderA 并提供动态内容，这就是事情失败的时候。

我让 mod_jk 一切正常，并且别名请求被重定向到 Tomcat，但是 Tomcat 不知道如何处理别名，所以它试图找到不存在的 /webapps/myApp/folderB 所以我得到一个“文件不发现”错误。

我尝试使用 a`<Context path...`但后来我得到了静态内容。我还尝试使用 Apache RewriteRule 将请求从 /folderB 传递到 /folderA ，但这也不起作用。以下是我拥有的 VirtualHost 设置的示例。我猜我需要在 Tomcat 结束时做一些事情，以便它知道如何处理 /folderB 并将其指向 /folderA 或在将信息传递给 Tomcat 之前使 httpd 将 /folderB 转换为 /folderA 。

任何帮助表示赞赏。谢谢！

```
<VirtualHost *:80>

    DocumentRoot "/webapps/ROOT"
    Alias /folderB "webapps/ROOT/folderA"

    JkMount /folderB/* myWorker

    ServerName myServer.local
    ServerAlias www.myServer.local

    ErrorLog "logs/myServer.local-error.log"
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T11:04:05.880

真的很晚了，但是我遇到了同样的问题，这是一个可行的解决方案：对于**mod_jk处理的所有文件，** **VirtualHost中的****别名**都被忽略了。

 ****更新您的 tomcat/conf/server.xml 并向您的主机添加一个上下文：

```
 <Host name="your-domain.com" appBase="webapps">
    <!-- root path -->
    <Context path="" docBase="/your/app/" />
    <!-- alias for folderB -->
    <Context path="/folderB" docBase="/your/app/somewhere/else/folderb/" /> 
  </Host> 
```

这真的让我很困惑，因为 ColdFusion 和连接器知道 Apache 别名。如果我有任何进展，我会更新我的答案..****

# ruby - 如何在 Nokogiri 中收集节点的几个元素中的第一个

> ID：15485940
> 
> 赞同：3
> 
> 时间：2013-03-18T20:08:40.470
> 
> 标签：ruby, xml, nokogiri

我的数据看起来像：

```
<release> 
 <artists>
  <artist>
   <name>Johnny Mnemonic</name>
  </artist>
  <artist>
    <name>Constantine</name>
  </artist>
 <artists>
</release>
<release>
 <artists>
  <artist>
   <name>Speed</name>
  </artist>
  <artist>
    <name>The Matrix</name>
  </artist>
 <artists>
 </release>
 ...and so on. 
```

对于每个版本，我只想要第一个`<artist>`标签中的数据。我尝试了以下代码，但它从艺术家那里提取了所有文本：

```
page = Nokogiri::XML(open("37.xml"))

page.xpath("//artists[1]").each do |el|

File.open("#{LOCAL_DIR}/37.txt", 'a'){|f| f.write(el)} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-18T20:32:49.540

Nokogiri 支持两种主要类型的搜索，`search`和`at`. `search`返回一个 NodeSet，您应该将其视为一个数组。`at`返回一个节点。两者都可以采用 CSS 或 XPath 表达式。我更喜欢 CSS，因为它们更具可读性，但有时你不能很容易地用一个来到达你想去的地方，所以试试另一个。

对于您的问题，指定要从中提取文本的节点很重要，使用`text`. 如果您的结果太宽泛，除了您想要的标签内的文本之外，您还会从标签之间获取文本。为了避免深入到您要阅读的内容的最直接节点：

```
require 'nokogiri'

doc = Nokogiri::XML(<<EOT)
<release> 
<artists>
  <artist>
  <name>Johnny Mnemonic</name>
  </artist>
  <artist>
    <name>Constantine</name>
  </artist>
<artists>
<release>
EOT 
```

因为这些专门寻找`name`节点，所以很容易获得所需的文本而没有垃圾：

```
doc.at('name').text                # => "Johnny Mnemonic"
doc.at('artist name').text         # => "Johnny Mnemonic"
doc.at('artists artist name').text # => "Johnny Mnemonic" 
```

这些是更宽松的搜索，因此返回了更多垃圾：

```
doc.at('artist').text  # => "\n   Johnny Mnemonic\n  "
doc.at('artists').text # => "\n  \n   Johnny Mnemonic\n  \n  \n    Constantine\n  \n \n\n" 
```

使用`search`返回多个节点：

```
doc.search('name').map(&:text)

[
    [0] "Johnny Mnemonic",
    [1] "Constantine"
]

doc.search('artist').map(&:text)

[
    [0] "\n   Johnny Mnemonic\n  ",
    [1] "\n    Constantine\n  "
] 
```

`search`和之间唯一真正的区别`at`是，`at`就像`search(...).first`.

另请参阅“[如何避免在抓取时加入来自节点的所有文本](https://stackoverflow.com/questions/43594656/how-to-avoid-joining-all-text-from-nodes-when-scraping)”。

为方便起见，Nokogiri 有一些额外的别名：`at_css`and `css`, and `at_xpath`and `xpath`。

* * *

以下是替代方法，使用 CSS 和 XPath 访问器获取名称，从 Pry 中截取：

```
[5] (pry) main: 0> # using CSS with Ruby
[6] (pry) main: 0> artists = doc.search('release').map{ |release| release.at('artist').text.strip }
[
    [0] "Johnny Mnemonic",
    [1] "Speed"
]
[7] (pry) main: 0> # using CSS with less Ruby
[8] (pry) main: 0> artists = doc.search('release artists artist:nth-child(1) name').map{ |n| n.text }
[
    [0] "Johnny Mnemonic",
    [1] "Speed"
]
[9] (pry) main: 0>
[10] (pry) main: 0> # using XPath
[11] (pry) main: 0> artists = doc.search('release/artists/artist[1]/name').map{ |t| t.content }
[
    [0] "Johnny Mnemonic",
    [1] "Speed"
]
[12] (pry) main: 0> # using more XPath
[13] (pry) main: 0> artists = doc.search('release/artists/artist[1]/name/text()').map{ |t| t.content }
[
    [0] "Johnny Mnemonic",
    [1] "Speed"
] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:22:22.487

您的 xpath 表达式选择，而不是您似乎期望的`<artists>`每个标签。试试这个：`<artist>`

```
doc.search('artists artist').map(&:text) 
```

您的表达式`"//artists"`将检索所有“艺术家”标签，`[1]`选择这些标签中的第一个，而不是标签本身内的第一个元素。

# c# - 在 SqlGeometry 和 DbGeometry 之间转换

> ID：15485945
> 
> 赞同：9
> 
> 时间：2013-03-18T20:09:05.097
> 
> 标签：c#, geospatial, sqlgeometry

有没有一种简单的方法可以在 SqlGeometry 和 DbGeometry 之间进行转换？我正在使用一个流行的 sql 空间助手库，其中的所有函数都需要 SqlGeometry。但是，当我针对 ESRI ArcSDE 要素类使用实体框架时，Shape 字段将作为 DbGeometry 返回。我无法使用该 DbGeometry 类型调用任何我想调用的方法（例如 LocateAlongGeom）。也许有一种方法可以将其序列化为二进制或文本，然后将其作为 SqlGeometry 读回？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-14T17:28:35.917

```
//Convert from SqlGeometry to DbGeometry 
SqlGeometry sqlGeo = ...
DbGeometry dbGeo = DbGeometry.FromBinary(sqlGeo.STAsBinary().Buffer);

//Convert from DBGeometry to SqlGeometry
 SqlGeometry sqlGeo2 = SqlGeometry.STGeomFromWKB(new SqlBytes(dbGeo.AsBinary()), 0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-13T17:36:32.000

管理多种空间类型的一种简单方法是通过扩展方法，如下所示：（使用来自@BizarroDavid 的代码示例的略微修改版本）

```
public static class GeometryExtensions
{
    public static DbGeometry ToDbGeometry(this SqlGeometry sqlGeometry)
    {
        return DbGeometry.FromBinary(sqlGeometry.STAsBinary().Buffer);
    }

    public static SqlGeometry ToSqlGeometry(this DbGeometry dbGeometry)
    {
        return SqlGeometry.STGeomFromWKB(new SqlBytes(dbGeometry.AsBinary()), dbGeometry.CoordinateSystemId);
    }
} 
```

一旦你实现了它们，你就可以像这样使用它们......

```
DbGeometry anyDbGeometry;
SqlGeometry anySqlGeometry;

//Convert to DbGeometry
anyDbGeometry = anySqlGeometry.ToDbGeometry();

//Convert to SqlGeometry
anySqlGeometry = anyDbGeometry.ToSqlGeometry(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-09T13:35:06.480

实体框架不支持 CURVES (CIRCLE) -> 更改为行：

```
return DbGeometry.FromBinary(sqlGeometry.**STCurveToLine()**.STAsBinary().Buffer); 
```

# javascript - 创建对象后设置原型属性的可移植方式是什么？

> ID：15485949
> 
> 赞同：2
> 
> 时间：2013-03-18T20:09:09.090
> 
> 标签：javascript, prototype

我有一个从 JSON 创建的 JavaScript 对象。由于 JS5 getter 和 setter，我真的需要将它的原型属性设置为不同的对象。这是我需要在 Chrome 上运行的示例：

```
function MyObj() { }
MyObj.prototype = { 
  get myProp : function () { return this._myProp; },
  set myProp : function (arg) { this._myProp = arg; }
}

... stuff ...

var instance = JSON.parse(result);
instance.constructor = MyObj;
instance.__proto__ = MyObj.prototype; 
```

使用此代码，我可以`instance`使用原型中定义的 getter 和 setter 获取和设置属性。但是，这不是可移植的，并且不适用于 IE（我认为也不是节点）。

这样做的正确和便携方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:33:48.020

反过来想：

创建一个新实例，`MyObj`然后将其属性复制`instance`到其中。或者给`MyObj`一个构造函数，当你提供一个参数时：

```
function MyObj(instance) {
 if (instance) {
   //copy properties 
```

这样你甚至可以做到

```
var instance = new MyObj(JSON.parse(result)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:53:21.373

您可以尝试使用 JSON reviver 函数。

```
function revive(json) {

  var m = new MyObj(), y;

  return JSON.parse(json, function(k, v){ 
    if (!y) y = this; 
    return k == "" ? m : this == y ? m[k] = v : v 
  });

} 
```

调用`revive('... a json string ...')`，它将吐出一个`MyObj`具有 JSON 字符串中定义的属性的实例。

警告：这仅在您的 JSON 对象中的第一项是原始值时才有效。如果在您的情况下这是不可能的，这是一个相当丑陋的解决方法：

```
function revive(json) {

  var m = new MyObj(), c = json.charAt(0), y, a;

  if (c == '[') {
    a = json = '[0,' + json.substring(1);
  } else if (c == '{') {
    json = '{"@":0,' + json.substring(1);
  }

  return JSON.parse(json, function(k, v){ 
    if (!y) { y = this; return; } 
    return k == "" ? m : this == y ? m[a ? k - 1 : k] = v : v 
  });

} 
```

# jquery - 连接后将所有 CoffeScript 文件包装在 JQuery 文档就绪函数中？

> ID：15485953
> 
> 赞同：0
> 
> 时间：2013-03-18T20:09:29.400
> 
> 标签：jquery, coffeescript, concatenation

我有许多 CoffeeScript 文件，我在转换为 Javascript 之前使用 Cakefile 连接它们。如何在文档就绪功能上使用 JQuery 包装连接的 CoffeScript 文件？

例如：

我有以下 CoffeScript 文件，每个文件都包含一个类：

foo.coffee bar.coffee 茶.coffee

为了生成 JS 文件，我使用以下 Cake 命令连接咖啡并生成 JS：

```
task 'build', 'Build single application file from source files', ->
  appContents = new Array remaining = appFiles.length
  for file, index in appFiles then do (file, index) ->
    fs.readFile "#{file}.coffee", 'utf8', (err, fileContents) ->
      throw err if err
      appContents[index] = fileContents
      process() if --remaining is 0
  process = ->
    fs.writeFile '../assets/js/app.coffee', appContents.join('\n\n'), 'utf8', (err) ->
      throw err if err
      exec 'coffee --compile ../assets/js/app.coffee', (err, stdout, stderr) ->
        throw err if err
        console.log stdout + stderr
        fs.unlink '../assets/js/app.coffee', (err) ->
          throw err if err
          console.log 'Done.' 
```

这会产生我很好的 JS 文件，如下所示：

```
// Generated by CoffeeScript 1.3.3
(function() {

   ...all the code...

}).call(this); 
```

我应该怎么做才能将..所有代码..包装在 JQuery on ready 函数中，如下所示：

```
(function() {

    $(document).ready(function() {
       ...all the code...
    });

}).call(this); 
```

所以，基本上想要的是文档准备好后要执行的所有连接代码。

**子问题**我问的是正确的方法吗？我是否应该将每个 CoffeeScript 文件中包含的每个 Class 包装在一个文档就绪函数中？

非常感谢您提供任何帮助，我已经搜索了如何以及如何找到答案，但无济于事。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:21:59.970

首先，CoffeeScript 编译器已经有一个`join`命令：

> ```
> -j, --join [FILE] 
> ```
> 
> 在编译之前，将所有脚本按照传递的顺序连接在一起，并写入指定的文件中。对于构建大型项目很有用。

`$(document).ready(function () { ...} )`其次，您可以直接将函数传递给`$()`-而不是使用，`$(function () { ... });`

对于您的实际问题，有几种方法可以解决。

## 选项1：

使用该选项编译 .coffee 文件`-b / --bare`，然后手动连接一个包含`$(function() {`开头和`});`结尾的文件（但这很恶心）。

## 选项 2：

使用类似`exports = window ? this`获取全局对象的方法，并将您希望在 jQuery 加载函数中运行的功能分配给该全局对象，例如：

```
FooModule = do ->
  class Foo 
    constructor: (@blah) ->

  init = ->
    blah = new Foo('bar')

  init: init

exports = window ? this
exports.Foo = FooModule 
```

然后，您可以拥有另一个包含以下内容的文件：

```
$(->
  Foo.init()
) 
```

希望这些选择之一是好的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:25:45.760

这里的第一个决定是是否使用coffeescript 的隔离模式，你会这样做。这封装了每个咖啡脚本文件的所有代码。您可能需要公开其中的一些代码，例如：

*foo.coffee*

```
class Foo
  a: 20
  f: () -> 
      console.log("...")

window.Foo = Foo 
```

之后，您可以在每个文档中使用您公开的代码部分，例如：

```
$(document).ready(function() {
   var f = new window.Foo();
}); 
```

# android - 要嵌入到活动中的 Tabhost FragmentActivity

> ID：15485956
> 
> 赞同：0
> 
> 时间：2013-03-18T20:09:32.293
> 
> 标签：android, android-layout, android-widget

我有一个带有简单按钮的活动（我不能使它成为一个片段，因为它已经扩展了一个父活动）和一个作为选项卡主机的片段活动。他们两个是否可以共享视图布局的屏幕空间。：活动布局如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/controls"
    android:layout_width="match_parent"
android:layout_height="wrap_content">
<TextView
    android:id="@+id/select"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="0dp"
    android:textAppearance="?android:attr/textAppearanceSmall"/>

  <LinearLayout
              android:id="@+id/control_buttons"
        android:layout_width="match_parent"
  android:layout_height="wrap_content"
  android:orientation="horizontal"
  android:gravity="center">
<ImageButton
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="0dp"/>
<ImageButton
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="0dp"/>
   <ImageButton
    android:id="@+id/button3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="0dp"/>
 <ImageButton
    android:id="@+id/button4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="0dp"/>

 </LinearLayout>

 <LinearLayout
  android:layout_width="match_parent"
  android:layout_height="wrap_content"
  android:orientation="horizontal"
  android:gravity="center">

  <TextView
    android:id="@+id/addto"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="0dp"
    android:textAppearance="?android:attr/textAppearanceSmall"/>
   <CheckBox
    android:id="@+id/addtoCheck"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="0dp"/>
  </LinearLayout>

 </LinearLayout> 
```

FragmentActivity 是一个 Tab 宿主，有 4 个选项卡，布局如下所示：

```
<TabHost
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="match_parent"
android:layout_height="match_parent">

<LinearLayout
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TabWidget
        android:id="@android:id/tabs"
        android:orientation="horizontal"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0"
        android:background="@color/coffee"/>

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_weight="0"/>

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"/>

</LinearLayout> 
```

活动在其高度末端是否可以显示父布局剩余高度的片段活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:36:48.797

活动是屏幕上所有内容的逻辑容器。我想你是在问你是否可以让活动 1 使用屏幕的一部分，而让活动 2 使用屏幕的另一部分。

不，那是不可能的。

# javascript - 为什么在 Firefox 中使用 javascript:void(0) 双击而不是单击？

> ID：15485959
> 
> 赞同：0
> 
> 时间：2013-03-18T20:09:44.443
> 
> 标签：javascript, asp.net, firefox

我有下一个链接：

```
<a id="HeaderImage1Tab" style="display: block;" onclick="HeaderImage1Tab(this);" href="javascript:void(0)">- Header Image 1</a> 
```

单击此链接调用下一个 js 代码：

```
function HeaderImage1Tab(link) {
    if (link.innerText == "+ Header Image 1") {
        document.getElementById("HeaderImage1Table").style.display = 'block';
        link.innerText = "- Header Image 1";
    } else {
        document.getElementById("HeaderImage1Table").style.display = 'none';
        link.innerText = "+ Header Image 1";
    }
} 
```

基本上它所做的只是在链接下方显示/隐藏表格块。除 Firefox 外，所有浏览器均适用。在 Firefox 中，我需要双击链接以触发代码并查看表格块。奇怪的是，我只需要第一次双击，然后按预期工作。

**更新 #1：**我正在处理 asp.net 网站。我在同一页面上也有大约 15 个链接，就像我上面提到的那样。

* * *

### 解决了

**更新#2：**使用`textContent`而不是`innerText`解决问题。看来火狐不支持`inner text`。

**更新 #3：** [这个](https://developer.mozilla.org/en-US/docs/DOM/Node.textContent)JS 解决`textContent`了 IE8 和更早版本中的问题：

```
if (Object.defineProperty && Object.getOwnPropertyDescriptor &&
     Object.getOwnPropertyDescriptor(Element.prototype, "textContent") &&
    !Object.getOwnPropertyDescriptor(Element.prototype, "textContent").get)
  (function() {
    var innerText = Object.getOwnPropertyDescriptor(Element.prototype, "innerText");
    Object.defineProperty(Element.prototype, "textContent",
      { 
        get : function() {
          return innerText.get.call(this)
        },
        set : function(x) {
          return innerText.set.call(this, x)
        }
      }
    );
  })(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:23:37.600

正如 Felix Kling 在评论中所说，FireFox 不支持 innerText，您必须使用 textContent （[此处](https://developer.mozilla.org/en-US/docs/DOM/Node.textContent)）。

双击可以显示和隐藏表格的原因是，第一次单击时，它会将由于该属性不存在而未定义的 link.innerText 与“+ Header Image 1”进行比较。这些值不相等，因此您的第二个代码块运行，在链接对象上创建一个 innerText 属性并将其设置为“+ Header Image 1”。之后，您的逻辑将起作用（尽管它无法成功更改链接中的实际文本），因为 Javascript 将允许您在任何对象上设置属性，即使这些属性不做任何事情。

# php - 使用 PHP 将图像和数据从 mysql 加载到 Flash 中？

> ID：15485962
> 
> 赞同：0
> 
> 时间：2013-03-18T20:10:12.967
> 
> 标签：php, mysql, actionscript-3, flash

我有一个 mysql 数据库，其中保存了产品名称、价格和详细信息。这是使用 PHP 完成的。它工作正常。

我只需要使用 AS3 将产品的图像及其详细信息加载到闪存中。

这是我的 PHP 代码：

```
<?php 
// Script Error Reporting
error_reporting(E_ALL);
ini_set('display_errors', '1');
?>
<?php 
// Run a select query to get my letest 6 items
// Connect to the MySQL database  
include "../config/connect_to_mysql.php"; 
$dynamicList = "";
$sql = mysql_query("SELECT * FROM products ORDER BY date_added DESC LIMIT 6");
$productCount = mysql_num_rows($sql); // count the output amount
if ($productCount > 0) {
    while($row = mysql_fetch_array($sql)){ 
             $id = $row["id"];
             $product_name = $row["product_name"];
             $price = $row["price"];
             $date_added = strftime("%b %d, %Y", strtotime($row["date_added"]));
             $dynamicList .= '<table width="100%" border="0" cellspacing="0" cellpadding="6">
        <tr>
          <td width="17%" valign="top"><a href="../product.php?id=' . $id . '"><img style="border:#666 1px solid;" src="../inventory_images/' . $id . '.jpg" alt="' . $product_name . '" width="77" height="102" border="1" /></a></td>
          <td width="83%" valign="top">' . $product_name . '<br />
            $' . $price . '<br />
            <a href="../product.php?id=' . $id . '">View Product Details</a></td>
        </tr>
      </table>';
    }
} else {
    $dynamicList = "We have no products listed in our store yet";
}
mysql_close();
?>
<?php echo $dynamicList; ?> 
```

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:07:16.917

1.- 使用 PHP 和 SQL 生成 XML 文件

-> [http://code.activestate.com/recipes/576499-converting-mysql-queries-to-xml/](http://code.activestate.com/recipes/576499-converting-mysql-queries-to-xml/)

2.- 使用 Flash/Flex 显示比您从 XML 获得的数据

-> [http://www.republicofcode.com/tutorials/flash/as3xml/](http://www.republicofcode.com/tutorials/flash/as3xml/)

3.- 发挥你的想象力并产生一些很棒的东西：

-> [http://www.republicofcode.com/tutorials/flash/as3slideshow/](http://www.republicofcode.com/tutorials/flash/as3slideshow/)

# jquery - UIWebView 不会导致 document.ready 触发

> ID：15485963
> 
> 赞同：2
> 
> 时间：2013-03-18T20:10:15.803
> 
> 标签：jquery, ios, objective-c, uiwebview

我有一个简单的应用程序，它只不过是`NSURLRequest`在`UIWebView`. 如果我使用模拟器或在设备上加载它，jQuery 方法`$(document).ready`不会触发。我创建了一个测试页面来验证这一点：

[https://dl.dropbox.com/u/3660978/webviewtest.html](https://dl.dropbox.com/u/3660978/webviewtest.html)

这是加载 WebView 的代码：

```
-(void)loadWebView {
    NSURL *url = [NSURL URLWithString:@"https://dl.dropbox.com/u/3660978/webviewtest.html"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [self.webView loadRequest:request];
}

#pragma mark - WebView Delegate Method
-(void)webViewDidFinishLoad:(UIWebView *)webView {
    NSLog(@"WebView is done loading");
}

- (void)viewDidLoad {
    [super viewDidLoad];
    [self loadWebView];
} 
```

如果我使用 iPad 上的 Safari 应用程序加载它，它工作正常（我收到两个警报），每当我使用模拟器或同一个 iPad 运行应用程序时，它都无法调用`$(document).ready`（我只收到第一个警报）。

我尝试过同时使用 iOS 5 和 iOS 6.1 模拟器。是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:38:36.123

jQuery 的路径不完整。在您的保管箱中，它开始：`//`而不是`http://`，因此 jQuery 不会加载，因此对 document.ready （在 jQuery 中）的调用不会运行。

另一种方法是将 jQuery 库嵌入到包中并在本地引用它。

# hash-collision - 修剪后的 SHA1 哈希的冲突率

> ID：15485964
> 
> 赞同：1
> 
> 时间：2013-03-18T20:10:20.213
> 
> 标签：hash-collision

使用我的 web 应用程序，我将具有哈希生成文件名的缓存文件存储在各种子目录中，以优化性能水平。我知道我可以提高性能的一种方法是确保生成的名称遵循 8.3 文件名结构，这样 NTFS 就不必生成短文件名（我无法在注册表中设置它）。

为了做到这一点，尽管我必须将哈希（我在想 SHA1）修剪为 8 个字符，但显然这会大大增加冲突的可能性。我想知道碰撞的概率是多少？

我在[这里](https://stackoverflow.com/questions/1867191/probability-of-sha1-collisions)看到了关于完整 SHA1 哈希冲突率的答案，但我的数学很糟糕，所以计算这个值远远超出了我的范围。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-03T20:08:55.673

Since `SHA-1`'s output is uniformly distributed, you can approximate the collision rate using the Birthday Paradox:

Assume you keep `n` bits of the `SHA-1` output, there is a ~50% chance that you would have a collision in a set containing `2^(n/2)` records, or in other words your collision rate is approximately `1/2^(n/2)`

If you need a more accurate answer, you can always use the formula in the answer you've referenced in your question.

So here, if we assume each character is 1 Byte (8 bits), then you will most likely encounter a collision if you have ~`2^(8*8/2) = 4294967296` records (therefore the collision rate is going to be `2.32 * 10^-8` which is **very** small).

Considering the collision rate you have discovered using your test program, the `ToSHA1Fingerprint()` function returns a Hexadecimal string which means an 8 character sub-string of it only represents 4 bytes and hence the approximate collision rate based on the above formula is `1/2^(4*8/2) = 0.000015258789` or `0.002%`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:12:57.970

看起来碰撞率对我的需求来说太高了，我正在使用以下代码进行 ~0.004% 的测试。

```
const int Iterations = 10;
const int Maxitems = 360000;

for (int i = 0; i < Iterations; i++)
{
    List<string> paths = new List<string>();

    for (int j = 0; j < Maxitems; j++)
    {
        string path = Path.GetRandomFileName().ToSHA1Fingerprint()
                                              .Substring(0, 8);

        paths.Add(path);
    }

    int count = paths.Distinct().Count();

    double collisionRate = ((Maxitems - count) * 100D) / Maxitems;
    collisions.Add(collisionRate);
}

double averageCollisionRate = collisions.Average(); 
```

# web-services - 适合此 Web 服务要求的框架

> ID：15485969
> 
> 赞同：0
> 
> 时间：2013-03-18T20:10:32.300
> 
> 标签：web-services, frameworks

我正在大学学习软件工程。我的老师给了我这个项目：为网站选择任何想法​​，并且必须使用您想要开发此网站的任何框架（和任何语言）。

我对我的网站的想法是：在用户之间共享数据（图像、文本......）。例如，在系统中有 userA、userB 和 userC。用户 A 拥有资源 B，B 可以访问它。UserA 仍然有资源 C 并且 userC 可以访问它。

有了这个要求。简短的解释：

1.  可以创建新用户。
2.  可以为用户设置权限
3.  可以根据权限建立数据库

我不知道哪个框架可以为这个项目构建最快。我只关心哪个框架可以让我快速发展。（因为我可以轻松学习一门新语言）。

我对 Ruby（适用于 Ruby on Rail）、PHP（适用于基于该语言的框架）、Python（适用于 Django）和 Java 有一定的了解。所以，那些语言的框架可能是最好的。

请帮我。因为这是我第一次在框架（和组件......）上工作，所以我真的对任何框架没有任何经验，每个框架的强项/弱点......

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:32:30.777

我偏爱 Ruby on Rails，所以我会使用它。关键宝石将是：

1.  设计 - 认证
2.  cancan - 授权
3.  simple_forms - 整理数据输入
4.  Twitter Bootstrap 或 Zurb Foundation - 让它看起来更漂亮

最简单的设置方法之一是使用 Rails Composer：[http ://railsapps.github.com/rails-composer/](http://railsapps.github.com/rails-composer/)

它为您提供了一个脚本，允许您选择所需的确切配置。

# linq - 使用 linq 相交 2 个数组

> ID：15485971
> 
> 赞同：0
> 
> 时间：2013-03-18T20:10:48.893
> 
> 标签：linq, join

我相信我必须使用 JOIN 但我不知道如何使用 Linq 正确使用它

我有两个数组，

Array1 = 所有成员的数组 (allMembers)

每个成员都是一个具有 memberID 作为字符串字段的对象

Array2 = MemberID 字符串数组 (membersToSelect)

我想返回所有成员 ID 在 Array2 中列出的成员。

这是我迄今为止尝试过的

```
MemberObject[] selectedObjects = allMembers
                                           .Join( membersToSelect, 
                                           memberID => memberID, 
                                           member => member, 
                                           (memberID, member) => memberID == member.memberID)
                                          .ToArray(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:49:24.613

好像您不了解 LINQ 连接语法。这种特殊的重载允许您指定将在比较中使用哪些属性/对象（实际上，使用您指定的键的散列来创建查找）。

主要概念是它与 SQL 连接非常相似，因为您正在决定连接列（第二个和第三个参数）。

```
allMembers // The original collection
    .Join(membersToSelect, // The collection to join
        allMem => allMem.MemberID, // Selects your original collections join column
        joinMem => joinMem, // Selects your joining collections join column (or element)
        (allMem, joinMem) => allMem) // This "combines" matching elements into the new element you specify.
        .ToArray(); 
```

在您的这个特定示例中，最终转换（对于连接元素）导致结果是一个布尔值数组，在这种情况下并没有太大帮助。最后一个参数最终是您为原始/加入集合获得的匹配项。换句话说，`(allMem, joinMem) =>`上面是您加入的匹配`Member`/ `string`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T20:29:44.407

你应该能够做到这一点：

```
var selectedObjects = allMembers
    .Where(x => membersToSelect.Contains(x.memberID))
    .ToArray(); 
```

# apache - mod_rewrite 重定向到不同服务器上的同名文件夹

> ID：15485972
> 
> 赞同：0
> 
> 时间：2013-03-18T20:10:53.040
> 
> 标签：apache, .htaccess, mod-rewrite

有一家与我合作的公司想要从同一个域运行 2 台不同的服务器——一台 Apache 和一台 Windows 2008——这是为了处理一些 php 后端内容和一些遗留的 asp.net 材料。Apache box 将是该站点的主要服务器，windows box 将服务于一些外围论坛和微型站点。

想知道在 Apache 框上创建 mod_rewrite 以重定向到 Windows 服务器上的某些内容的可能性 - 例如：

[http://mydomain.com/mywindowsfolder](http://mydomain.com/mywindowsfolder) - 内容需要来自 windows 服务器

所以 - 在 httpd.conf 中重写规则如下：

RewriteCond上的
RewriteEngine %{REQUEST_URI} ^/mywindowsfolder/
RewriteRule ^/$ [http://XXX.XXX.XXX.XXX/mywindowsfolder/](http://XXX.XXX.XXX.XXX/mywindowsfolder/) [P,L]

*（要使用的windows box的IP地址）*

我正在阅读有关 mod_rewrite 中的 P 标志的信息-这是否可以使 url 保持为[http://mydomain.com/mywindowsfolder](http://mydomain.com/mywindowsfolder)？- 如果是这样，请有人帮助正确的正则表达式 - 我不确定上面是否会产生无限循环。

重要的是不显示 windows 框的 IP 地址。

我猜另一种方法是使用带有 DNS 和地址记录的子域 - 这会是更明智的选择吗？

谢谢你的任何建议，

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:51:29.233

一种方法可能是使用[`ProxyPass`](http://httpd.apache.org/docs/current/mod/mod_proxy.html#proxypass)

```
ProxyPass /mywindowsfolder/ http://www.xxx.yyy.zzz/mywindowsfolder/ 
```

缺点是，您不能在 .htaccess 文件中使用它，而只能在主配置文件或虚拟主机上下文中使用它。

# java - 在 Java 中使用 Tumblr API 发布视频

> ID：15485974
> 
> 赞同：0
> 
> 时间：2013-03-18T20:10:55.597
> 
> 标签：java, android, api, tumblr

我现在正在努力使用 Tumblr api。当我只发布文本时，这非常简单，因为我只需要提供一个字符串标题和一个字符串正文。参考 api 文档（[http://www.tumblr.com/docs/en/api/v2#text-posts](http://www.tumblr.com/docs/en/api/v2#text-posts)），我使用了以下代码并且成功运行。

```
HttpPost hpost = new HttpPost(BASE_URL + "/blog/" + blog + ".tumblr.com/post");
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
nameValuePairs.add(new BasicNameValuePair("type", "text"));
nameValuePairs.add(new BasicNameValuePair("text", title));
nameValuePairs.add(new BasicNameValuePair("body", body));
hpost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
consumer.sign(hpost);
DefaultHttpClient client = new DefaultHttpClient();
HttpResponse resp = null;
resp = client.execute(hpost); 
```

但是，问题是当我发布视频时，我必须提供一个字符串标题和一个数组播放器。( [http://www.tumblr.com/docs/en/api/v2#video-posts](http://www.tumblr.com/docs/en/api/v2#video-posts) ) 我的问题是，如何将嵌入代码传递给 NameValuePair 对象？我只需要发布一个视频，因此数组的大小为 1。我尝试了以下代码：

```
HttpPost hpost = new HttpPost(BASE_URL + "/blog/" + blog + ".tumblr.com/post");
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
nameValuePairs.add(new BasicNameValuePair("type", "video"));
nameValuePairs.add(new BasicNameValuePair("caption", title));
nameValuePairs.add(new BasicNameValuePair("player", "<embed src='blah'>")); 
```

但无济于事。如果有人可以提供帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:33:01.230

值标题和数组播放器位于查询视频博客帖子的响应中。不是添加新视频帖子的参数。该部分：tumblr.com/docs/en/api/v2#posting 包含您要使用的参数：标题、嵌入、数据（所有字符串...）

# visual-c++ - jquery删除父级 标签

> ID：15485976
> 
> 赞同：1
> 
> 时间：2013-03-18T20:11:05.637
> 
> 标签：visual-c++

```
$("#yourOrderFoodsItems ul").on('click','.deleteFood',function(){
    $(this).parent().remove();
}) 
```

;

如果

*   不是直接父母，您可以使用最接近的：

    ```
    $("#yourOrderFoodsItems ul").on('click','.deleteFood',function(){
        $(this).closest('li').remove();
    });

    Live DEMO 
    ```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T20:12:11.807

```
$("#yourOrderFoodsItems ul").on('click','.deleteFood',function(){
    $(this).parent().remove();
}); 
```

如果`<li>`不是直接父母，您可以使用`closest`：

```
$("#yourOrderFoodsItems ul").on('click','.deleteFood',function(){
    $(this).closest('li').remove();
}); 
```

[**现场演示**](http://jsfiddle.net/8khjE/)

# c - C中更干净的正则表达式代码？

> ID：15485977
> 
> 赞同：2
> 
> 时间：2013-03-18T20:11:10.343
> 
> 标签：c, regex, glib, software-design

我有一个 C 程序来处理一些 shell 命令的输出。对于“ps”，我对以下五个字段感兴趣。我通过名称指定我想要的字段，为 glib 正则表达式引擎构建模式，然后解析和处理结果。

有没有一种好方法来组织产生可读和可维护代码的字段、模式和格式/类型？我到目前为止的作品，但看起来不太好。我正在 OS X 上开发，但以后想移植到其他平台。

还有一种方法可以让 C# 的 @ 字符串运算符之类的行为消除模式中的一半反斜杠吗？

谢谢。

```
const char field_pid[] = "pid";
const char field_lstart[] = "lstart";
const char field_ruser[] = "ruser";
const char field_cputime[] = "cputime";
const char field_command[] = "command";

char pattern[] = "\\s*(?<pid>\\d+)\\s+(?<lstart>\\w+\\s+\\w+\\s+\\d+\\s+[\\d:]+\\s+\\d+)\\s+(?<ruser>\\w+)\\s+(?<cputime>[\\d:\\.]+)\\s+(?<command>.+)";

// Do the regex match.
...

// Extract the matching strings.
gchar *pid = g_match_info_fetch_named(match_info, field_pid);
gchar *lstart = g_match_info_fetch_named(match_info, field_lstart);
gchar *ruser = g_match_info_fetch_named(match_info, field_ruser);
gchar *cputime = g_match_info_fetch_named(match_info, field_cputime);
gchar *command = g_match_info_fetch_named(match_info, field_command);

// Parse and process the strings.
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:29:50.000

以下是几个改进选项：

*   使用该`G_REGEX_EXTENDED`选项编译模式。这将使模式中的空格被忽略，`#`并可用于引入注释直到行尾。

*   将正则表达式分成几行。

*   从外部文件中读取正则表达式，而不是从 C 源代码中获取。（你可以为此编写一个实用函数，或者使用 glib 的配置读取机制。）这是治愈反斜杠炎的唯一方法。

除非最后一个建议，否则生成的正则表达式可能如下所示：

```
const char *pattern = "\
\\s*                                  \
(?<pid> \\d+ ) \\s+                   \
(?<lstart> \\w+ \\s+ \\w+ \\s+ \\d+ \\s+ [\\d:]+ \\s+ \\d+) \\s+    \
(?<ruser> \\w+) \\s+                  \
(?<cputime> [\\d:\\.]+) \\s+          \
(?<command> .+)                       \
" 
```

仍然远非完美，但比您开始时更具可读性。

# r - 比较两个向量中的两个浮点元素时出现相同和 all.equal 的问题

> ID：15485984
> 
> 赞同：0
> 
> 时间：2013-03-18T20:11:26.803
> 
> 标签：r, floating-point, comparison, floating-accuracy

[**这是我昨天**](https://stackoverflow.com/questions/15465505/relational-operator-is-not-producing-the-expected-answer-in-r)发布的一个问题的后续。我似乎无法正确处理 R 中的浮点比较。昨天我`>=`用来比较两个浮点值，但似乎得到了正确的结果。

今天，我[**尝试**](https://stackoverflow.com/questions/9508518/why-are-these-numbers-not-equal)在两个向量上逐元素运行`all.equal`，这产生了 a `mean difference`，这不适用于此应用程序。我需要比较函数*来返回一个向量*。然后，我找到`identical`并将其与`mapply`. 这变得更加准确，但不是 100% 准确。我究竟做错了什么？由于这是财务数据，我应该使用[**十进制数据类型**](https://stackoverflow.com/questions/6874867/floating-point-issue-in-r)吗？如果是这样，怎么做？

*从昨天的帖子（更新代码，反映当前的挫败感）：*

**目标是：**将数据读入`data.frame`，取昨天的`High`、`Low`、 和`Close`价格的平均值；并且，将今天的开盘价与昨天的平均价格进行比较。

在大数据上运行脚本后，我发现我的结果`R` **与**`Excel`. 我已经将问题缩小到它的基本部分。我的测试文件，`test.csv`看起来像这样，在最后一行的末尾包括一个新行：

```
<TICKER>,<DATE>,<TIME>,<OPEN>,<LOW>,<HIGH>,<CLOSE>
EURUSD,20020311,0:00:00,0.8733,0.873,0.877,0.8749
EURUSD,20020312,0:00:00,0.8749,0.8704,0.876,0.8754
EURUSD,20020313,0:00:00,0.8753,0.8725,0.878,0.8754
EURUSD,20020314,0:00:00,0.8753,0.8752,0.8841,0.8823
EURUSD,20020315,0:00:00,0.8823,0.8808,0.8868,0.8823
EURUSD,20020318,0:00:00,0.8809,0.878,0.8828,0.8821
EURUSD,20020319,0:00:00,0.8821,0.8796,0.884,0.8816
EURUSD,20020320,0:00:00,0.8815,0.8786,0.8857,0.8855
EURUSD,20020321,0:00:00,0.8854,0.8806,0.8857,0.8823 
```

我的代码：

```
# Read in test file
raw <- read.csv('test.csv', header=TRUE, sep=",")

# Convert date and dump dat into data frame
stripday <- strptime(raw$X.DATE, format="%Y%m%d")
data <- data.frame(stripday, raw)

# Drop unused data columns and name used columns
drops <- c("X.DATE.", "X.TIME.", "X.TICKER.")
data <- data[, !(names(data) %in% drops)]
colnames(data) <- c("Date", "Open", "Low", "High", "Close")

# Convert values from facotrs to numeric
data[,2] <- as.numeric(as.character(data[,2]))
data[,3] <- as.numeric(as.character(data[,3]))
data[,4] <- as.numeric(as.character(data[,4]))
data[,5] <- as.numeric(as.character(data[,5]))

# Take average of High, Low, and Close 
data[['Avg']] <- NA
data[['Avg']][2:9] <- (
    data[['High']][1:8] + 
    data[['Low']][1:8] + 
    data[['Close']][1:8]) / 3

# Is Open greater than or equal to Average
data[['OpenGreaterThanOrEqualAvg']] <- NA
data[['OpenGreaterThanOrEqualAvg']][2:9] <- 1 * (mapply(identical,data[['Open']][2:9], data[['Avg']][2:9]) | data[['Open']][2:9] > data[['Avg']][2:9])

# Write data to .csv
write.table(data, 'output.csv', quote=FALSE, sep=",", row.names=FALSE) 
```

请注意，2002 年 3 月 14 日应该是 1，而不是 0。

# wordpress - Wordpress：“自定义字段”、“元框”和“分类法”之间的区别

> ID：15485985
> 
> 赞同：18
> 
> 时间：2013-03-18T20:11:27.257
> 
> 标签：wordpress, wordpress-theming

这可能是一个微不足道的问题，但我对Wordpress 中“**自定义字段**”、“**元框**”和“**分类法”之间的区别有点困惑。**

例如，如果我要创建一个名为“电影”的自定义帖子类型，其中包含“演员”和“流派”的附加字段，那么这些附加字段将被称为什么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-01-13T05:25:49.793

*   “元框”是帖子或页面编辑屏幕（以及其他屏幕）上可用的各种可拖动和可重新定位的框之一。默认情况下有几个，例如格式、标签和类别框。插件可以添加元框以用于他们需要的任何目的，元框既可以包含信息又可以接收输入。元框可以并且正在用于以下用途，但不限于此。它们基本上是用户界面部分。后期编辑屏幕上界面各个部分的包装器。

*   “自定义字段”是更好地称为“发布元数据”的另一个名称。从本质上讲，它是帖子的键/值存储，可以由插件或主题使用，或者由用户直接用于他们需要的任何目的。它可以存储有关帖子的任意数据，以便以各种方式使用。例如，如果帖子是关于待售产品的，那么它的一条元信息可能是“价格”和“9.95 美元”。

*   “分类法”是将帖子分组在一起的方法的通用术语。“类别”是一种分类法。“标签”也是如此。为了更好地解释分类法，如果我将汽车分组在一起，那么我可能有一个名为“颜色”的自定义分类法，并将汽车分组为“蓝色”、“红色”、“黑色”。然后我可能还有一个不同的分类法，称为“制造商”，而汽车集团则有“福特”、“丰田”、“雪佛兰”等。后元数据和分类法之间的重要区别在于，对于分类法，分组本身就是最重要的是，对于元数据，实际价值很重要。我可能想在列表中看到很多蓝色汽车，但我不会接受“蓝色”的价值并尝试用它做点什么。鉴于价格，

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-18T20:33:38.557

**自定义字段**和**元框**本质上是相同的，它们允许您在数据库的 postmeta 表中存储额外的数据/信息。数据存储在键/值对中。并通过 id 附加到帖子或页面。使用`add_post_meta`功能。

`add_post_meta($ID, 'name_of_data_to_store', 'value_of_that_data');`

关键区别在于**自定义字段**是 wordpress 原生的，因此每个帖子/页面都内置了它们。

但是如果你想创建一个[**主题选项**](http://codex.wordpress.org/Creating_Options_Pages)页面，你可能会想使用[**Meta Box**](http://codex.wordpress.org/Function_Reference/add_meta_box)**来创建与自定义字段**本机提供的相同结果。

> 例如，如果我要创建一个名为“电影”的自定义帖子类型，其中包含“演员”和“流派”的附加字段，那么这些附加字段将被称为什么？

Actor 和 Genre 可以是**Taxonomy**或将项目组合在一起的方式 wordpress 默认有几个称为**Category**、**Tags**和**Link Categories**

有关[**分类的更多信息，请点击此处**](http://codex.wordpress.org/Taxonomies)。

# c# - .Include() 导致一个巨大的联合查询，而不是我所有的孩子都在填充？

> ID：15485988
> 
> 赞同：0
> 
> 时间：2013-03-18T20:11:53.203
> 
> 标签：c#, linq, entity-framework

可能是什么问题？results.SubAreas**始终为**空。我整个下午都在审查我所有的数据库约束、代码、pocos、映射、数据注释。results.ToString() 查询显示它正在加入子区域，当我在 Management Studio 中运行查询时，它会返回行。但它看起来很奇怪。查询后，我已经包含了 poco 定义。

**询问**

```
var results = (from b in _context.Buildings
               .Include("SubAreas")
               .Include("ExtraFeatures")
               .Include("StructuralElements")
               where b.STRAP == strap && b.NUM == bld_num
               select b).FirstOrDefault(); 
```

**SQL 语句**

```
SELECT 
[UnionAll2].[C2] AS [C1], 
[UnionAll2].[C3] AS [C2], 
[UnionAll2].[C4] AS [C3], 
[UnionAll2].[C5] AS [C4], 
[UnionAll2].[C6] AS [C5], 
[UnionAll2].[C7] AS [C6], 
[UnionAll2].[C8] AS [C7], 
[UnionAll2].[C9] AS [C8], 
[UnionAll2].[C10] AS [C9], 
[UnionAll2].[C1] AS [C10], 
[UnionAll2].[C11] AS [C11], 
[UnionAll2].[C12] AS [C12], 
[UnionAll2].[C13] AS [C13], 
[UnionAll2].[C14] AS [C14], 
[UnionAll2].[C15] AS [C15], 
[UnionAll2].[C16] AS [C16], 
[UnionAll2].[C17] AS [C17], 
[UnionAll2].[C18] AS [C18], 
[UnionAll2].[C19] AS [C19], 
[UnionAll2].[C20] AS [C20], 
[UnionAll2].[C21] AS [C21], 
[UnionAll2].[C22] AS [C22], 
[UnionAll2].[C23] AS [C23], 
[UnionAll2].[C24] AS [C24], 
[UnionAll2].[C25] AS [C25], 
[UnionAll2].[C26] AS [C26], 
[UnionAll2].[C27] AS [C27], 
[UnionAll2].[C28] AS [C28], 
[UnionAll2].[C29] AS [C29], 
[UnionAll2].[C30] AS [C30], 
[UnionAll2].[C31] AS [C31], 
[UnionAll2].[C32] AS [C32], 
[UnionAll2].[C33] AS [C33], 
[UnionAll2].[C34] AS [C34], 
[UnionAll2].[C35] AS [C35]
FROM  (SELECT 
    [UnionAll1].[C1] AS [C1], 
    [UnionAll1].[NUM] AS [C2], 
    [UnionAll1].[STRAP] AS [C3], 
    [UnionAll1].[NUM1] AS [C4], 
    [UnionAll1].[SITUS] AS [C5], 
    [UnionAll1].[TYPE] AS [C6], 
    [UnionAll1].[STYLE] AS [C7], 
    [UnionAll1].[YEAR_BUILT] AS [C8], 
    [UnionAll1].[GROSS_AREA] AS [C9], 
    [UnionAll1].[LIVING_AREA] AS [C10], 
    [UnionAll1].[STRAP1] AS [C11], 
    [UnionAll1].[BUILDING_NUM] AS [C12], 
    [UnionAll1].[SAR_LN_NUM] AS [C13], 
    [UnionAll1].[DSCR] AS [C14], 
    [UnionAll1].[GROSS_AREA1] AS [C15], 
    [UnionAll1].[VALUE] AS [C16], 
    [UnionAll1].[STRAP2] AS [C17], 
    [UnionAll1].[BUILDING_NUM1] AS [C18], 
    [UnionAll1].[C2] AS [C19], 
    [UnionAll1].[C3] AS [C20], 
    [UnionAll1].[C4] AS [C21], 
    [UnionAll1].[C5] AS [C22], 
    [UnionAll1].[C6] AS [C23], 
    [UnionAll1].[C7] AS [C24], 
    [UnionAll1].[C8] AS [C25], 
    [UnionAll1].[C9] AS [C26], 
    [UnionAll1].[C10] AS [C27], 
    [UnionAll1].[C11] AS [C28], 
    [UnionAll1].[C12] AS [C29], 
    [UnionAll1].[C13] AS [C30], 
    [UnionAll1].[C14] AS [C31], 
    [UnionAll1].[C15] AS [C32], 
    [UnionAll1].[C16] AS [C33], 
    [UnionAll1].[C17] AS [C34], 
    [UnionAll1].[C18] AS [C35]
    FROM  (SELECT 
        CASE WHEN ([Extent2].[BUILDING_NUM] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1], 
        [Extent1].[NUM] AS [NUM], 
        [Extent1].[STRAP] AS [STRAP], 
        [Extent1].[NUM] AS [NUM1], 
        [Extent1].[SITUS] AS [SITUS], 
        [Extent1].[TYPE] AS [TYPE], 
        [Extent1].[STYLE] AS [STYLE], 
        [Extent1].[YEAR_BUILT] AS [YEAR_BUILT], 
        [Extent1].[GROSS_AREA] AS [GROSS_AREA], 
        [Extent1].[LIVING_AREA] AS [LIVING_AREA], 
        [Extent2].[STRAP] AS [STRAP1], 
        [Extent2].[BUILDING_NUM] AS [BUILDING_NUM], 
        [Extent2].[SAR_LN_NUM] AS [SAR_LN_NUM], 
        [Extent2].[DSCR] AS [DSCR], 
        [Extent2].[GROSS_AREA] AS [GROSS_AREA1], 
        [Extent2].[VALUE] AS [VALUE], 
        [Extent2].[STRAP] AS [STRAP2], 
        [Extent2].[BUILDING_NUM] AS [BUILDING_NUM1], 
        CAST(NULL AS varchar(1)) AS [C2], 
        CAST(NULL AS int) AS [C3], 
        CAST(NULL AS int) AS [C4], 
        CAST(NULL AS varchar(1)) AS [C5], 
        CAST(NULL AS decimal(18,2)) AS [C6], 
        CAST(NULL AS decimal(18,2)) AS [C7], 
        CAST(NULL AS int) AS [C8], 
        CAST(NULL AS varchar(1)) AS [C9], 
        CAST(NULL AS varchar(1)) AS [C10], 
        CAST(NULL AS varchar(1)) AS [C11], 
        CAST(NULL AS int) AS [C12], 
        CAST(NULL AS int) AS [C13], 
        CAST(NULL AS varchar(1)) AS [C14], 
        CAST(NULL AS varchar(1)) AS [C15], 
        CAST(NULL AS varchar(1)) AS [C16], 
        CAST(NULL AS varchar(1)) AS [C17], 
        CAST(NULL AS int) AS [C18]
        FROM  [dbo].[Buildings] AS [Extent1]
        LEFT OUTER JOIN [dbo].[SUB_AREAS] AS [Extent2] ON ([Extent1].[STRAP] = [Extent2].[STRAP]) AND ([Extent1].[NUM] = [Extent2].[BUILDING_NUM])
        WHERE ([Extent1].[STRAP] = '0001020003') AND ([Extent1].[NUM] = 1)
    UNION ALL
        SELECT 
        2 AS [C1], 
        [Extent3].[NUM] AS [NUM], 
        [Extent3].[STRAP] AS [STRAP], 
        [Extent3].[NUM] AS [NUM1], 
        [Extent3].[SITUS] AS [SITUS], 
        [Extent3].[TYPE] AS [TYPE], 
        [Extent3].[STYLE] AS [STYLE], 
        [Extent3].[YEAR_BUILT] AS [YEAR_BUILT], 
        [Extent3].[GROSS_AREA] AS [GROSS_AREA], 
        [Extent3].[LIVING_AREA] AS [LIVING_AREA], 
        CAST(NULL AS varchar(1)) AS [C2], 
        CAST(NULL AS int) AS [C3], 
        CAST(NULL AS int) AS [C4], 
        CAST(NULL AS varchar(1)) AS [C5], 
        CAST(NULL AS int) AS [C6], 
        CAST(NULL AS int) AS [C7], 
        CAST(NULL AS varchar(1)) AS [C8], 
        CAST(NULL AS int) AS [C9], 
        [Extent4].[STRAP] AS [STRAP1], 
        [Extent4].[LN_NUM] AS [LN_NUM], 
        [Extent4].[BUILDING_NUM] AS [BUILDING_NUM], 
        [Extent4].[DSCR] AS [DSCR], 
        [Extent4].[UNITS] AS [UNITS], 
        [Extent4].[UNIT_PRICE] AS [UNIT_PRICE], 
        [Extent4].[YEAR_BUILT] AS [YEAR_BUILT1], 
        [Extent4].[CD] AS [CD], 
        [Extent4].[STRAP] AS [STRAP2], 
        CAST(NULL AS varchar(1)) AS [C10], 
        CAST(NULL AS int) AS [C11], 
        CAST(NULL AS int) AS [C12], 
        CAST(NULL AS varchar(1)) AS [C13], 
        CAST(NULL AS varchar(1)) AS [C14], 
        CAST(NULL AS varchar(1)) AS [C15], 
        CAST(NULL AS varchar(1)) AS [C16], 
        CAST(NULL AS int) AS [C17]
        FROM  [dbo].[Buildings] AS [Extent3]
        INNER JOIN [dbo].[EXTRA_FEATURES] AS [Extent4] ON ([Extent3].[STRAP] = [Extent4].[STRAP]) AND ([Extent3].[NUM] = [Extent4].[BUILDING_NUM])
        WHERE ([Extent3].[STRAP] = '0001020003') AND ([Extent3].[NUM] = 1)) AS [UnionAll1]
UNION ALL
    SELECT 
    3 AS [C1], 
    [Extent5].[NUM] AS [NUM], 
    [Extent5].[STRAP] AS [STRAP], 
    [Extent5].[NUM] AS [NUM1], 
    [Extent5].[SITUS] AS [SITUS], 
    [Extent5].[TYPE] AS [TYPE], 
    [Extent5].[STYLE] AS [STYLE], 
    [Extent5].[YEAR_BUILT] AS [YEAR_BUILT], 
    [Extent5].[GROSS_AREA] AS [GROSS_AREA], 
    [Extent5].[LIVING_AREA] AS [LIVING_AREA], 
    CAST(NULL AS varchar(1)) AS [C2], 
    CAST(NULL AS int) AS [C3], 
    CAST(NULL AS int) AS [C4], 
    CAST(NULL AS varchar(1)) AS [C5], 
    CAST(NULL AS int) AS [C6], 
    CAST(NULL AS int) AS [C7], 
    CAST(NULL AS varchar(1)) AS [C8], 
    CAST(NULL AS int) AS [C9], 
    CAST(NULL AS varchar(1)) AS [C10], 
    CAST(NULL AS int) AS [C11], 
    CAST(NULL AS int) AS [C12], 
    CAST(NULL AS varchar(1)) AS [C13], 
    CAST(NULL AS decimal(18,2)) AS [C14], 
    CAST(NULL AS decimal(18,2)) AS [C15], 
    CAST(NULL AS int) AS [C16], 
    CAST(NULL AS varchar(1)) AS [C17], 
    CAST(NULL AS varchar(1)) AS [C18], 
    [Extent6].[STRAP] AS [STRAP1], 
    [Extent6].[BUILDING_NUM] AS [BUILDING_NUM], 
    [Extent6].[LN_NUM] AS [LN_NUM], 
    [Extent6].[CATEGORY] AS [CATEGORY], 
    [Extent6].[DSCR] AS [DSCR], 
    [Extent6].[VALUE] AS [VALUE], 
    [Extent6].[STRAP] AS [STRAP2], 
    [Extent6].[BUILDING_NUM] AS [BUILDING_NUM1]
    FROM  [dbo].[Buildings] AS [Extent5]
    INNER JOIN [dbo].[STRUCTURAL_ELEMENTS] AS [Extent6] ON ([Extent5].[STRAP] = [Extent6].[STRAP]) AND ([Extent5].[NUM] = [Extent6].[BUILDING_NUM])
    WHERE ([Extent5].[STRAP] = '0001020003') AND ([Extent5].[NUM] = 1)) AS [UnionAll2]
ORDER BY [UnionAll2].[C3] ASC, [UnionAll2].[C4] ASC, [UnionAll2].[C1] ASC 
```

**模型类**

```
[Table("STRUCTURAL_ELEMENTS")]
public class StructuralElement
{
    [Key]
    [Column(Order = 0)]
    public string STRAP { get; set; }
    [Key]
    [Column(Order = 1)]
    public int BUILDING_NUM { get; set; }
    [Key]
    [Column(Order = 2)]
    public int LN_NUM { get; set; }
    [Key]
    [Column(Order = 3)]
    public string CATEGORY { get; set; }
    public string DSCR { get; set; }
    public string VALUE { get; set; }

}

[Table("SUB_AREAS")]
public class SubArea
{
    [Key]
    [Column(Order = 0)]
    public string STRAP { get; set; }
    [Key]
    [Column(Order = 1)]
    public int BUILDING_NUM { get; set; }
    [Key]
    [Column(Order = 2)]
    public int SAR_LN_NUM { get; set; }

    public string DSCR { get; set; }
    public int GROSS_AREA { get; set; }
    public int VALUE { get; set; }
}

[Table("EXTRA_FEATURES")]
public class ExtraFeature
{
    [Key]
    [Column(Order = 0)]
    public string STRAP { get; set; }
    [Column(Order = 1)]
    public int BUILDING_NUM { get; set; }
    [Key]
    [Column(Order = 2)]
    public int LN_NUM { get; set; }

    public string DSCR { get; set; }
    public decimal? UNITS { get; set; }
    public decimal? UNIT_PRICE { get; set; }
    public int? YEAR_BUILT { get; set; }
    public string CD { get; set; }

}

public class Building
{
    [Key]
    [Column(Order = 0)]
    public string STRAP { get; set; }

    [Key]
    [Column(Order = 1)]
    public int NUM { get; set; }
    public string SITUS { get; set; }
    public string TYPE { get; set; }
    public string STYLE { get; set; }
    //public string CLASS { get; set; }
    public int? YEAR_BUILT { get; set; }
    public int? GROSS_AREA { get; set; }
    public int? LIVING_AREA { get; set; }

    [ForeignKey("STRAP,BUILDING_NUM")]
    public  ICollection<StructuralElement> StructuralElements { get; set; }

    [ForeignKey("STRAP,BUILDING_NUM")]
    public  ICollection<ExtraFeature> ExtraFeatures { get; set; }

    [ForeignKey("STRAP,BUILDING_NUM")]
    public  ICollection<SubArea> SubAreas { get; set; }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:49:21.337

我在空表中的键是用空格存储的，所以 EF 没有将它们链接到它们的父级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:50:34.437

它看起来像是一种优化。您正在尝试使用相关集合加载 Building。现在假设建筑物有 100 个子区域、100 个额外功能和 100 个结构元素，那么简单的 JOIN 会产生什么？正确，一百万行。ORM 并不像通常认为的那样愚蠢，使用 UNION 查询将返回 301 行。

# cuda - 在推力 cuda 中使用 float4 时的内存问题

> ID：15485992
> 
> 赞同：2
> 
> 时间：2013-03-18T20:11:56.577
> 
> 标签：cuda, thrust

我在推力 cuda 中使用 float4 时遇到了内存问题

将 float4“buggyVariable”作为成员添加到仿函数似乎会导致浮点数据左移 1 个浮点数。

在 CUDA_animateParticles 我清楚地将 Y 设置为 0 和 Z 设置为 1

然而，当运行函子并在 OpenGL 中绘制它时。我得到 Xposition=1 的粒子，这表明 Y 在函子内为 1。

我还用 float2 和 float3 进行了测试，它们似乎工作正常。

所以这似乎是内存对齐问题或错误。

任何人都可以对此有所了解吗？谢谢您的帮助。

```
#include <thrust/sort.h>
#include <thrust/random.h>
#include <thrust/device_vector.h>
#include "cutil_math.h"

struct animateParticles_functor
{
    float4 buggyVariable; //why does adding this variable cause following floats to get wrong values???
    float pex, pey, pez, pew;

    __host__ __device__
    animateParticles_functor( float x, float y, float z, float w) :
        pex(x), pey(y), pez(z), pew(w)
    {
    }

    template <typename Tuple>
    __host__ __device__
    void operator()(Tuple t)
    {
        if(pey > 0)
            thrust::get<0>(t) = make_float4(1, 0, 0, 0); //true if y is bugged
        else
            thrust::get<0>(t) = make_float4(0, 0, 0, 0); //false if its not bugged

        return;
    }
}

void CUDA_animateParticles(float4* cuda_devicePointer_vboPosition, float3* cuda_devicePointer_particleVelocitys, unsigned int numParticles, float4 particleEmitter)
{
    thrust::device_ptr<float4> d_pos(cuda_devicePointer_vboPosition);
    thrust::device_ptr<float3> d_vel(cuda_devicePointer_particleVelocitys);

    thrust::for_each(
        thrust::make_zip_iterator(thrust::make_tuple(d_pos, d_vel)),
        thrust::make_zip_iterator(thrust::make_tuple(d_pos + numParticles, d_vel + numParticles)),
        animateParticles_functor(0, 0, 1, 0) //notice that i set Z to 1 and not Y to 0
    );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:22:26.193

I think there are some flavors of MSVC where `nvcc` and `cl.exe` can't agree on `sizeof(float4)`.

Try replacing your use of `float4` with `my_float4`:

```
struct my_float4
{
  float x, y, z, w;
}; 
```

# linq - 无法转换为 system.guid

> ID：15485996
> 
> 赞同：3
> 
> 时间：2013-03-18T20:12:03.623
> 
> 标签：linq, entity-framework, c#-4.0

我们正在使用实体框架

* * *

```
private t_Market getMarketByCellsiteID(Guid cellsiteID)
{
    try
    {
        t_Market market = null;
        using (LiveLeaseEntities Entities = new LiveLeaseEntities())
        {
            market = (from m in Entities.t_Market
                      where m.OperatorId = (from o in Entities.t_CellSite
                                            where o.CellSiteId == Guid.Parse("53B7B160-20C4-4B60-948A-06570E6E3CBA")
                                            select o.OperatorId)
                      select m).Single();
            return market;
        }
    } 
```

* * *

我越来越无法将类型“System.Linq.IQueryable”隐式转换为“System.Guid”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:16:49.653

我认为这应该解决它：

```
private t_Market getMarketByCellsiteID(Guid cellsiteID)
{
try
{
    t_Market market = null;
    using (LiveLeaseEntities Entities = new LiveLeaseEntities())
    {
        market = (from m in Entities.t_Market
                  where m.OperatorId == (from o in Entities.t_CellSite
                                        where o.CellSiteId == Guid.Parse("53B7B160-20C4-4B60-948A-06570E6E3CBA")
                                        select o.OperatorId).Single()
                  select m).Single();
        return market;
    }
} 
```

两件事：您需要 a`==`与 进行比较`m.OperatorId`，并且您将它与返回 IQuerable 的 LINQ 查询进行比较——在 LINQ 查询上调用 Single() 会执行它并返回一个要比较的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:15:45.757

你的问题是这个比较：

```
m.OperatorId = (from o in Entities.t_CellSite
    where o.CellSiteId == Guid.Parse("53B7B160-20C4-4B60-948A-06570E6E3CBA")
    select o.OperatorId) 
```

您正在将 a 与 a 进行`System.Guid`比较`System.Linq.IQueryable<System.Guid>`。如果您只期望一个结果，您可以这样做：

```
m.OperatorId = (from o in Entities.t_CellSite
    where o.CellSiteId == Guid.Parse("53B7B160-20C4-4B60-948A-06570E6E3CBA")
    select o.OperatorId).First() 
```

# sql - SQL 查询查找从日期 x 到日期 y 的可用房间

> ID：15485997
> 
> 赞同：2
> 
> 时间：2013-03-18T20:12:06.507
> 
> 标签：sql, oracle

在以下关系模式中，我如何派生未从 DATE RANGE 预订的可用“基本”类型的房间。这是我的镜头。我正在使用 sqlplus 中的 oracle

```
SELECT * 
    FROM ROOM r, BOOKING b
    WHERE NOT EXISTS
        (SELECT * FROM BOOKINGROOM br
         WHERE br.ROOMNO = r.ROOMNO 
         AND   br.BOOKINGID = b.BOOKINGID
         AND ARRIVEDATE < '01-FEB-2013'
         AND DEPARTDATE > '23-FEB-2013'); 
```

我还希望查询是“固定查询”，所以我手动添加结束范围和开始范围日期。子查询答案将是首选。

```
INSERT INTO BOOKING VALUES (2314, 1001, TO_DATE('10-MAR-2013', 'DD-MON-YYYY'), TO_DATE('15-MAR-2013', 'DD-MON-YYYY'), 1225.00); 
```

日期比较可能是以下答案中的一个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:19:26.327

最简单的方法是：

```
SELECT DISTINCT r.* 
FROM Room r
LEFT JOIN BookingRoom br ON r.FloorNo = br.FloorNo AND r.RoomNo = br.RoomNo
LEFT JOIN Booking b ON br.BookingId = b.BookingId 
      AND (b.ArriveDate <= &end_range AND b.DepartDate >= &start_range)
WHERE b.BookingId IS NULL
  AND r.Type = 'BASIC'; 
```

如果您绝对必须使用子查询，请尝试以下操作：

```
SELECT DISTINCT r.* 
FROM Room r
LEFT JOIN BookingRoom br ON r.FloorNo = br.FloorNo AND r.RoomNo = br.RoomNo
LEFT JOIN Booking b ON br.BookingId = b.BookingId 
WHERE (b.BookingId IS NULL OR b.BookingId NOT IN (
      SELECT BookingId 
      FROM Booking
      WHERE (ArriveDate <= &end_range AND DepartDate >= &start_range)
)) AND r.Type = 'BASIC'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T21:35:21.670

试试这个查询，它将检测冲突的预订，无论它们是封闭、封闭还是与所需日期范围部分重叠。

```
SELECT DISTINCT r.* 
FROM Room r
LEFT JOIN BookingRoom br ON r.FloorNo = br.FloorNo AND r.RoomNo = br.RoomNo
LEFT JOIN Booking b ON br.BookingId = b.BookingId 
AND b.ArriveDate < &end_range AND b.DepartDate > &start_range 
WHERE b.BookingId IS NULL
AND r.Type = 'BASIC'; 
```

# c# - C# .NET 4.0/4.5 UDP 发送问题

> ID：15485999
> 
> 赞同：1
> 
> 时间：2013-03-18T20:12:13.387
> 
> 标签：c#, .net, sockets, networking, udp

我正在用 C# 编写一个网络库，最初使用的是 .NET 3.5 Framework。我最近决定切换到 .NET 4.5，但开始遇到发送 UDP 数据包的问题。我遇到的是，如果 UDP 数据包发送得太快，该`Socket.SendToAsync`方法以 a `SocketError`of完成，`AddressFamilyNotSupported`并且永远不会发送数据包。

如果我将项目切换到 .NET 3.5，无论我多么努力地重复它，我都不会遇到这个问题。这也可以在 .NET 4.0 中重现。

这是我为重现该问题而整理的项目的[链接。](http://dl.dropbox.com/u/11540065/UdpTest.zip)如果您向“ClientSnd”或“ServerSnd”按钮发送垃圾邮件，您将看到错误发生。将项目切换到 .NET 3.5 并随心所欲地发送垃圾邮件……完全没有问题。

我一直无法找到很多有用的信息搜索这个问题。有任何想法吗？

**编辑（从演示问题的示例项目中添加了代码）：**

这是客户端和服务器都发生绑定的地方：

```
 byte[] clientBuffer = new byte[32768];
            byte[] serverBuffer = new byte[32768];

            IPEndPoint clientLocalEndPoint = GetLocalIPEndPoint(0, AddressFamily.InterNetwork);
            IPEndPoint serverLocalEndPoint = GetLocalIPEndPoint(6337, AddressFamily.InterNetwork);

            m_ClientSocket.ExclusiveAddressUse = true;
            m_ServerSocket.ExclusiveAddressUse = true;
            m_ClientSocket.Bind(clientLocalEndPoint);
            m_ServerSocket.Bind(serverLocalEndPoint);

            m_ClientSendArgs.RemoteEndPoint = GetRemoteIPEndPoint("127.0.0.1", 6337, AddressFamily.InterNetwork);
            m_ClientRecvArgs.RemoteEndPoint = m_ClientSocket.LocalEndPoint;

            m_ServerSendArgs.RemoteEndPoint = GetRemoteIPEndPoint("127.0.0.1", ((IPEndPoint)m_ClientSocket.LocalEndPoint).Port, AddressFamily.InterNetwork);
            m_ServerRecvArgs.RemoteEndPoint = m_ServerSocket.LocalEndPoint;

            m_ClientSendArgs.Completed += new EventHandler<SocketAsyncEventArgs>(OnClientCompletion);
            m_ClientRecvArgs.Completed += new EventHandler<SocketAsyncEventArgs>(OnClientCompletion);
            m_ServerSendArgs.Completed += new EventHandler<SocketAsyncEventArgs>(OnServerCompletion);
            m_ServerRecvArgs.Completed += new EventHandler<SocketAsyncEventArgs>(OnServerCompletion);

            m_ClientRecvArgs.SetBuffer(clientBuffer, 0, clientBuffer.Length);
            m_ServerRecvArgs.SetBuffer(serverBuffer, 0, serverBuffer.Length);

            ClientReceive();
            ServerReceive(); 
```

和`GetRemoteIPEndPoint`方法`GetLocalIPEndPoint`：

```
 private static IPEndPoint GetRemoteIPEndPoint(string address, int port, AddressFamily addressFamily)
    {
        IPAddress[] ipAddresses = null;

        ipAddresses = Dns.GetHostAddresses(address);

        List<IPEndPoint> ipEndPointList = new List<IPEndPoint>();

        for (int i = 0; i < ipAddresses.Length; i++)
        {
            IPAddress ipAddress = ipAddresses[i];

            if (ipAddress.AddressFamily == addressFamily)
            {
                IPEndPoint ipEndPoint = new IPEndPoint(ipAddress, port);

                ipEndPointList.Add(ipEndPoint);
            }
        }

        return ipEndPointList.ToArray()[0];
    }

    private static IPEndPoint GetLocalIPEndPoint(int port, AddressFamily addressFamily)
    {
        IPEndPoint localEndPoint = null;

        switch (addressFamily)
        {
            case AddressFamily.InterNetwork:
                {
                    localEndPoint = new IPEndPoint(IPAddress.Any, port);

                    break;
                }
            case AddressFamily.InterNetworkV6:
                {
                    localEndPoint = new IPEndPoint(IPAddress.IPv6Any, port);

                    break;
                }
        }

        return localEndPoint;
    } 
```

**由于无论谁发送数据（客户端或服务器）都会发生这种情况，因此我将重点关注作为发送者的客户端：**

点击`ClientSnd`按钮：

```
 private void Button_ClientSnd_Click(object sender, RoutedEventArgs e)
    {
        lock (SyncRoot)
        {
            byte[] buffer = Encoding.ASCII.GetBytes("Hello there.  Just testing.  Nothing to see here.  Move along.");

            m_ClientSendQueue.Enqueue(buffer);

            if (!m_ClientTransmitting)
            {
                m_ClientTransmitting = true;

                ClientSendBuffer();
            }
        }
    } 
```

客户端的发送方法：

```
 private void ClientSendBuffer()
    {
        lock (SyncRoot)
        {
            if (m_ClientSendQueue.Count > 0)
            {
                byte[] buffer = m_ClientSendQueue.Dequeue();

                m_ClientSendArgs.SetBuffer(buffer, 0, buffer.Length);

                ClientSend();
            }
            else
            {
                m_ClientTransmitting = false;
            }
        }
    }

    private void ClientSend()
    {
        if (!m_ClientSocket.SendToAsync(m_ClientSendArgs))
        {
            OnClientCompletion(this, m_ClientSendArgs);
        }
    } 
```

客户端的完成回调：

```
 private void OnClientCompletion(object sender, SocketAsyncEventArgs e)
    {
        SocketError socketError = e.SocketError;

        if (socketError != SocketError.Success)
        {
            ClientConsoleWrite("SocketError: {0}\r\n", socketError);
        }

        switch (e.LastOperation)
        {
            case SocketAsyncOperation.SendTo:
                {
                    if (socketError == SocketError.Success)
                    {
                        ClientConsoleWrite("Client message sent!\r\n");
                    }

                    ClientSendBuffer();

                    break;
                }
            case SocketAsyncOperation.ReceiveFrom:
                {
                    int bytesTransferred = e.BytesTransferred;

                    byte[] buffer = new byte[bytesTransferred];

                    Buffer.BlockCopy(e.Buffer, e.Offset, buffer, 0, bytesTransferred);

                    string message = Encoding.ASCII.GetString(buffer);

                    ClientConsoleWrite("Message received: {0}\r\n", message);

                    ClientReceive();

                    break;
                }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:54:37.097

我想通了。之所以会出现此问题，是因为变量 m_ClientSendArgs 上的底层缓冲区不断地使用以下方法更改`SetBuffer`：

```
byte[] buffer = m_ClientSendQueue.Dequeue();

m_ClientSendArgs.SetBuffer(buffer, 0, buffer.Length); 
```

当我为其分配一个静态缓冲区并使用 Buffer.BlockCopy 时，问题就消失了：

```
byte[] buffer = m_ClientSendQueue.Dequeue();

Buffer.BlockCopy(buffer, 0, m_ClientSendBuffer, 0, buffer.Length);

m_ClientSendArgs.SetBuffer(0, buffer.Length); 
```

所以我一直在错误地执行它。奇怪的是，这不是 .NET 3.5 上的问题，也不是 .NET 4.0/4.5 上的 TCP 问题。