# StackOverflow 问答 14253000-14253999

# sql - MS SQL - 实现循环的最佳方式

> ID：14253003
> 
> 赞同：0
> 
> 时间：2013-01-10T07:44:41.127
> 
> 标签：sql, sql-server, optimization, stored-procedures

现有对象和内容

有一个名为 history_master 的表，它记录每次更新名为 master 的特定表。它就像一个主表的历史。主表仅包含最新数据

举个内容例子

主表

```
| 编号 | 货号| 有效期自 | 有效期至 |
| 1 | 1 | 2012-12-25 | 2012-12-31 |
| 2 | 1 | 2013-01-01 | 2013-04-30 |
| 3 | 2 | 2013-01-10 | 2013-12-31 |

```

history_master 看起来像

```
| 编号 | 货号 | 有效期自 | 有效期至 | 更新日期 |
| 1 | 1 | 2012-01-01 | 2012-06-30 | 2012-02-01 |
| 2 | 1 | 2012-07-01 | 2012-12-31 | 2012-02-01 |
| 3 | 1 | 2012-01-01 | 2012-06-30 | 2012-05-01 |
| 4 | 1 | 2012-07-01 | 2012-11-30 | 2012-05-01 |
| 5 | 1 | 2012-12-01 | 2012-12-31 | 2012-05-01 |
| 6 | 1 | 2012-07-01 | 2012-11-30 | 2012-08-01 |
| 7 | 1 | 2012-12-01 | 2012-12-24 | 2012-08-01 |
| 8 | 1 | 2012-12-25 | 2012-12-31 | 2012-08-01 |

```

手头的任务：编写一个存储过程，从保留最新数据的历史中获取项目的所有可用数据，即结果应该如下所示

```
| 货号 | 有效期自 | 有效期至 | history_id |
| 1 | 2012-12-25 | 2012-12-31 | 8 |
| 1 | 2012-12-01 | 2012-12-24 | 7 |
| 1 | 2012-07-01 | 2012-11-30 | 6 |
| 1 | 2012-01-01 | 2012-06-30 | 3 |

```

我想到的逻辑是从历史表中确定批次。例如，更新日期为 2012-08-01 的记录的批次 = 3，2012 年 5 月 1 日的批次 = 2，最后一个批次 = 1

从最新的 (3) 到最旧的 (1) 迭代所有批次，比较日期范围并确定结果，记住最新集合的数据将始终具有优先权。

我能想到的唯一实现方法是 WHILE LOOP，我不确定它是否是最好的方法。

截至目前，历史主数据包含 10155734 条记录。请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:54:55.107

我认为您想将更新日期放入这样的临时表中

```
select distinct [update date], identity(int, 1,1) history_id 
into #updatedates
order by [update date] 
```

这给了你一张这样的桌子

```
update date history_id
2012-08-01  1
2012-09-01  2
2012-10-01  3 
```

然后将其与您的原始表格加入以获得您的结果

```
select mh.[item no], mh.[vaild from], mh.[valid to], u.history_id
from master_history mh join #updatedates u on mh.[update date] = u.[update date] 
```

# android - Android中的类间通信

> ID：14253006
> 
> 赞同：0
> 
> 时间：2013-01-10T07:45:03.460
> 
> 标签：android, class, communication

我有一个类（在 Android 中）`TCPClient`，它从服务器接收一个字符串。我需要将此发送到`printmsg`类中的一个函数`Showmsg`，该函数与`TCPClient`.
以下代码不起作用。

```
public class TCPClient implements Runnable {  
    ..   
    ..  
    public void run() {  
        ..  
        Showmsg obj = new Showmsg();  
        obj.printmsg("Hello");  
    }  
} 
```

在课堂上`Showmsg`：

```
public void printmsg(String str) {    
    Toast( . . );    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:32:19.660

我在给定代码中没有看到的是`.start()`，因为`TCPClient`是`Runnable`。另外我不知道你的`toast(str)`方法是如何工作的，但不要忘记`.show()`。此代码应该运行。

```
public class TCPClient implements Runnable {  
    public void run() {  
        Showmsg obj = new Showmsg();  
        obj.printmsg("Hello");  
    }  
}  

public class MyActivity {
    TCPClient tcp;

    public void onCreate(Bundle b) {
        super.onCreate(b);
        tcp = new TCPClient();
    }

    public void onResume() {
        super.onResume();
        tcp.start();
    }

}

public class Showmsg {
    public void printmsg(String str) {    
        toast(str);
    }

    private void toast(String str) {
        Log.d(TAG, str);
        Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
        System.out.println(str);
    }
} 
```

# c# - 用于创建动态数据并将其添加到 PDF 的开源 API

> ID：14253007
> 
> 赞同：0
> 
> 时间：2013-01-10T07:45:03.317
> 
> 标签：c#, .net, wpf, windows, api

我正在寻找一个允许创建 PDF 运行时的 API。它还应该允许在 PDF 文档中包含动态数据和表格。我找到了一个名为 aspose.pdf API 的 API，它可以满足我的要求。但它非常昂贵，现在我正在寻找开源 PDF 创建者 API 或低成本 API？（这是用于 C# 开发的）

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:53:36.733

可以使用[Ghostscript](http://www.ghostscript.com/)吗？只需将数据输出为 postscript 并让程序输出 pdf...

我还发现了这个：[在 c# 中在运行时创建 pdf 文件](https://stackoverflow.com/questions/465433/creating-pdf-files-at-runtime-in-c-sharp)。也许它有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:28:38.120

渲染 HTML 并使用[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)将其转换为 pdf 怎么样？

或者，您可以查看[iTextSharp](http://sourceforge.net/projects/itextsharp/)，免费用于开源项目。

# php - 添加额外的属性 ActiveRecord 以在 CgridView 中启用自定义过滤器列

> ID：14253010
> 
> 赞同：0
> 
> 时间：2013-01-10T07:45:31.587
> 
> 标签：php, activerecord, filter, yii, cgridview

我的程序中有一个 gridView，它的数据填充了我的 ActiveRecord 模型。根据这个[答案](https://stackoverflow.com/a/11857861/1570631)，我在我的 ActiveRecord 中添加了一些额外的属性以启用添加额外的过滤列。
我的问题是这是做这些事情的正确方法。我的意思是添加一些无法与数据库表字段匹配的属性。
如果不是，在这些场景中可以使用哪些方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:30:37.127

添加与数据库字段不匹配的属性并没有什么不好。这是一种广泛使用的方法，您可以依赖它。这是来自 yii wiki[的示例。](http://www.yiiframework.com/wiki/281/searching-and-sorting-by-related-model-in-cgridview/)

# c# - 使用 C# 中的 JFrame

> ID：14253014
> 
> 赞同：1
> 
> 时间：2013-01-10T07:45:54.800
> 
> 标签：c#, java, jframe, weka, ikvm

我想在 ac# 应用程序的 jframe 中显示图表。下面的代码对于我为测试制作的 java 版本和我的主要目标 c# 版本都是相同的。Java 版本运行良好且快速，而 c# 滞后并且只显示空白 jframe。问题是如何使相同的代码在 c# 中正常工作？我在这里想念什么？

下面代码中的 cl.graph() 返回一个字符串，下面是在 java 中有效但在 c# 中无效的代码；

```
JFrame jf = new JFrame("My Diag");
jf.setSize(1100, 700);
jf.getContentPane().setLayout(new java.awt.BorderLayout());

TreeVisualizer tv = new TreeVisualizer(null, cl.graph(), new PlaceNode2());
jf.getContentPane().add(tv, java.awt.BorderLayout.CENTER);

jf.setVisible(true); 
```

示例 cl.graph() 字符串如下所示。

```
digraph J48Tree {
N0 [label="dst_bytes" ]
N0->N1 [label="<= 44"]
N1 [label="src_bytes" ]
N1->N2 [label="<= 0"]
N2 [label="dst_host_same_src_port_rate" ]
N2->N3 [label="<= 0.22"]} 
```

# git - 如何使用丢弃测试分支策略来同步长寿命的功能分支？

> ID：14253015
> 
> 赞同：1
> 
> 时间：2013-01-10T07:45:58.257
> 
> 标签：git, dvcs

我正在阅读这篇关于 git 的[博客](http://kentnguyen.com/development/visualized-git-practices-for-team/)文章，其中讨论了各种分支策略。这篇文章建议，对于长期存在的特性分支，应该不断地从 master 合并到特性分支，以保持特性分支与 master 同步，这样当特性分支合并回 master 时就不会出现问题。这个策略我很清楚。git mainter 在评论中 Junio Hamano 说。

> 我不得不提醒，“*经常分支和同步*”是一种需要避免的疾病。您分支以实现特定目标（例如“添加此功能”、“修复此错误”），并且为该任务设置专用分支的目的是保持该特定分支的历史*可读性* 和可理解性，这将导致更少错误。如果您在分支上的工作尚未准备好时从“master”随机合并回来，它将破坏使用单独分支的点，并且在“master”上所做的任何事情都不会影响添加的具体目标功能或修复错误。
> 
> 避免这种疾病的标准建议是，在确保您在之前分叉的分支上所做的耗时工作仍然可以很好地与其他人所做的随机工作一起工作的同时，进行一次性“测试”从您的主题分支和主分支合并的分支，以检查代码库漂移。

我的问题是一次性测试分支策略如何工作，它如何使与 master 的最终集成更容易？谁能提供更详细的示例/更易于理解的解释？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:13:56.300

[我在 Junio Hamano 的博客Fun with ReReRe](http://gitster.livejournal.com/41795.html)中找到了对这种模式的详细解释 。

基本思想是在一个不会保留的分支上做一个测试合并，然后使用git的rerere特性记录冲突是如何解决的，丢弃测试合并分支，当最终合并发生时，记录的合并解决方案将由 git 自动应用。

# c# - 如何使用 c# 使用 datagridview 单元格和 datagridview 事件将记录插入、删除、选择到数据库中？

> ID：14253017
> 
> 赞同：0
> 
> 时间：2013-01-10T07:46:05.933
> 
> 标签：c#, .net, datagridview, insert, updates

我设计了一个只有`DataGridView`控件的 Windows 窗体应用程序。我以编程方式绑定数据库中的数据。我还编写了用于从`DataGridView`单元格更新数据库记录的代码。但我不知道如何从这些将新记录插入数据库`Cell`。你能帮我吗？

到目前为止，这是我的代码：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        try
        {
            con.ConnectionString = "Data Source=CHANDU-PC;Initial Catalog=Class;Integrated Security=true;MultipleActiveResultSets=true;";
            con.Open();
            SqlCommand cmd = new SqlCommand("select * from student1", con);
            da.SelectCommand = cmd;
            cmd.ExecuteNonQuery();
            DataSet ds = new DataSet();
            da.Fill(ds, "student1");
            dataGridView1.DataSource = ds.Tables[0];
        }
        catch (Exception ex)
        {
            MessageBox.Show("Exception caught : " + ex.Message.ToString());
        }
        finally
        {
            con.Close();
        }
    }

    string s;
    int x, y;
    private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
    {
        //s=dataGridView1.CurrentCell.ToString();
        //x = dataGridView1.CurrentCellAddress.X;
        //y = dataGridView1.CurrentCellAddress.Y;
    }

    private void dataGridView1_CancelRowEdit(object sender, QuestionEventArgs e)
    {
        x = -1;
        y = -1;
    }

    private void dataGridView1_CellBeginEdit(object sender, DataGridViewCellCancelEventArgs e)
    {
        x = dataGridView1.CurrentCellAddress.X;
        y = dataGridView1.CurrentCellAddress.Y;
    }

    private void dataGridView1_CellEndEdit(object sender, DataGridViewCellEventArgs e)
    {
        try
        {
            con.ConnectionString = "Data Source=CHANDU-PC;Initial Catalog=Class;Integrated Security=true;MultipleActiveResultSets=true;";
            con.Open();
            SqlCommand cmd;
            if (e.ColumnIndex == 0)
            {
                cmd = new SqlCommand("Select * from student1", con);
                da.SelectCommand = cmd;
                cmd.ExecuteNonQuery();
                MessageBox.Show("invalid column selected");
            }
            else
            {
                s = (string)dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Value;
                int i = -1;
                i = (int)Convert.ToInt32(dataGridView1.Rows[e.RowIndex].Cells[0].Value);
                if (e.ColumnIndex == 1)
                    cmd = new SqlCommand("update student1 set name='" + s + "' where id='" + i + "'", con);
                else
                    cmd = new SqlCommand("update student1 set email='" + s + "' where id='" + i + "'", con);
                da.UpdateCommand = cmd;
                cmd.ExecuteNonQuery();
                MessageBox.Show("Information updated Successfully");
            }
            }
        catch (Exception ex)
        {
            MessageBox.Show("Exception caught : " + ex.Message.ToString());
        }
        finally
        {
            con.Close();
        }
    }

    private void dataGridView1_CellEnter(object sender, DataGridViewCellEventArgs e)
    {
        dataGridView1.Refresh();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:55:42.250

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.SqlClient;

namespace datagridview
{
    public partial class Form1 : Form
    {
        SqlConnection con = new SqlConnection();
        SqlDataAdapter da = new SqlDataAdapter();

public Form1()
        {
            InitializeComponent();
        }

        private void btnshow_Click(object sender, EventArgs e)
        {
        try
            {
                con.ConnectionString = "Data Source=CHANDU-PC;Initial Catalog=Class;Integrated Security=true;MultipleActiveResultSets=true;";
                con.Open();
                SqlCommand cmd = new SqlCommand("select * from student1", con);
                da.SelectCommand = cmd;
                cmd.ExecuteNonQuery();
                DataSet ds = new DataSet();
                da.Fill(ds, "student1");
                dataGridView1.DataSource = ds.Tables[0];
            }
            catch (Exception ex)
            {
                MessageBox.Show("Exception caught : " + ex.Message.ToString());
            }
            finally
            {
                con.Close();
            }
        }

 private void Form1_Load(object sender, EventArgs e)
        {
            try
            {
                con.ConnectionString = "Data Source=CHANDU-PC;Initial Catalog=Class;Integrated Security=true;MultipleActiveResultSets=true;";
                con.Open();
                SqlCommand cmd = new SqlCommand("select * from student1", con);
                da.SelectCommand = cmd;
                cmd.ExecuteNonQuery();
                DataSet ds = new DataSet();
                da.Fill(ds, "student1");
                dataGridView1.DataSource = ds.Tables[0];
            }
            catch (Exception ex)
            {
                MessageBox.Show("Exception caught : " + ex.Message.ToString());
            }
            finally
            {
                con.Close();
            }
        }

        string s,s1,s2;
        int x, y;

        private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
        {
        }

        private void dataGridView1_CancelRowEdit(object sender, QuestionEventArgs e)
        {
            x = -1;
            y = -1;
        }

        private void dataGridView1_CellBeginEdit(object sender, DataGridViewCellCancelEventArgs e)
        {
            x = dataGridView1.CurrentCellAddress.X;
            y = dataGridView1.CurrentCellAddress.Y;
        }

        private void dataGridView1_CellEndEdit(object sender, DataGridViewCellEventArgs e)
        {
            try
            {
                con.ConnectionString = "Data Source=CHANDU-PC;Initial Catalog=Class;Integrated Security=true;MultipleActiveResultSets=true;";
                con.Open();
                SqlCommand cmd;
                int i = -1,j;
                if (e.ColumnIndex == 0)
                {
                    j = (int)Convert.ToInt32(dataGridView1.Rows[e.RowIndex].Cells[0].Value);
                    s1 = "";
                    s2 = "";
                    cmd = new SqlCommand("insert into student1 values('" +j+ "','" + s1 + "','" + s2 + "')", con);
                    da.InsertCommand = cmd;
                    cmd.ExecuteNonQuery();
                    MessageBox.Show("id inserted successfully");
                }
                else
                {
                    s = (string)dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Value;
                    i = (int)Convert.ToInt32(dataGridView1.Rows[e.RowIndex].Cells[0].Value);
                    if (e.ColumnIndex == 1)
                        cmd = new SqlCommand("update student1 set name='" + s + "' where id='" + i + "'", con);
                    else
                        cmd = new SqlCommand("update student1 set email='" + s + "' where id='" + i + "'", con);
                    da.UpdateCommand = cmd;
                    cmd.ExecuteNonQuery();
                    MessageBox.Show("Information updated Successfully");
                }
                }
            catch (Exception ex)
            {
                MessageBox.Show("Exception caught : " + ex.Message.ToString());
            }
            finally
            {
                con.Close();
            }
        }

        private void dataGridView1_CellEnter(object sender, DataGridViewCellEventArgs e)
        {
            dataGridView1.Refresh();
        }

        private void dataGridView1_AllowUserToAddRowsChanged(object sender, EventArgs e)
        {

        }

        private void dataGridView1_KeyUp(object sender, KeyEventArgs e)
        {
            if (e.KeyCode == Keys.Delete)
            {
                    try
                    {
                        SqlConnection con2 = new SqlConnection();
                        SqlDataAdapter da2 = new SqlDataAdapter();
                        con2.ConnectionString = "Data Source=CHANDU-PC;Initial Catalog=Class;Integrated Security=true;MultipleActiveResultSets=true;";
                        con2.Open();
                        x = (int)Convert.ToInt32(dataGridView1.CurrentRow.Cells[0].Value);
                        SqlCommand cmd2 = new SqlCommand("delete student1 where id='" + x + "'", con2);
                        da2.DeleteCommand = cmd2;
                        cmd2.ExecuteNonQuery();
                        MessageBox.Show("Information deleted Successfully");
                    }
                    catch (Exception ex)
                    {
                        MessageBox.Show("Exception caught : " + ex.Message.ToString());
                    }
                    finally
                    {
                        con.Close();
                    }
                }
            }

        private void dataGridView1_CellContentClick(object sender, DataGridViewCellEventArgs e)
        {

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:49:49.530

以下是一个很好的代码示例，用于通过数据网格视图向数据库添加新记录。该方法略有不同，但应该有效：

[http://www.codeguru.com/csharp/.net/net_data/datagrid/article.php/c13041/Add-Edit-and-Delete-in-DataGridView.htm](http://www.codeguru.com/csharp/.net/net_data/datagrid/article.php/c13041/Add-Edit-and-Delete-in-DataGridView.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T14:16:53.580

这里如何`insert`，`update`以及`delete`使用的数据`DataGridView`希望它可以帮助

```
 private void dataGridView1_RowValidating(object sender, DataGridViewCellCancelEventArgs e) //or CellValidating Event
    {
        try
        {
            if (dataGridView1.IsCurrentRowDirty) //use IsCurrentCellDirty if you choose CellValidating Event
            {
                con.ConnectionString = "Data Source=CHANDU-PC;Initial Catalog=Class;Integrated Security=true;MultipleActiveResultSets=true;";
                con.Open();
                SqlCommand cmd;

                string studentId = dataGridView1[0, e.RowIndex].EditedFormattedValue.ToString();
                string lastname = dataGridView1[1, e.RowIndex].EditedFormattedValue.ToString();
                string firstname = dataGridView1[2, e.RowIndex].EditedFormattedValue.ToString();
                string myQry;
                //I use int.Parse to Convert the string to int, 
                if (int.Parse(studentId) == 0) //Get Primary key (hint null, 0, or -1 value to insert the data)
                {
                    //Insert
                    myQry = @"insert intro student1 (lastname, firstname) Values ('" + lastname + "', '" + firstname + "')";
                }
                else
                {
                    //Update
                    myQry = @"update student1 set lastname = '" + lastname + "', firstname = '" + firstname + "'" + " Where studentId = '" + studentId + "'";
                }
                cmd = new SqlCommand(myQry, con);
                da.SelectCommand = cmd;
                cmd.ExecuteNonQuery();
            }

        }
        catch (Exception ex)
        {
            MessageBox.Show("Exception caught : " + ex.Message.ToString());
        }
        finally
        {
            con.Close();
        }
    }

    private void dataGridView1_KeyUp(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.Delete)
        {
            if (dataGridView1.SelectedRows.Count > 0)
            {
                con.ConnectionString = "Data Source=CHANDU-PC;Initial Catalog=Class;Integrated Security=true;MultipleActiveResultSets=true;";
                con.Open();
                SqlCommand cmd;
                foreach (var item in dataGridView1.Rows.Cast<DataGridViewRow>().Where(c => c.IsNewRow == false))
                {
                    string delQry = @"delete from student1 where studentId = '" + item.Cells[0].EditedFormattedValue.ToString() + "'";
                    cmd = new SqlCommand(delQry, con);
                    da.SelectCommand = cmd;
                    cmd.ExecuteNonQuery();
                }
                con.Close();
            }
        }
    } 
```

# java - 窗格未调整到其转换后的尺寸

> ID：14253019
> 
> 赞同：2
> 
> 时间：2013-01-10T07:46:12.510
> 
> 标签：java, resize, javafx-2, bounds

我正在做一个项目，我想在其中显示带有叠加层的图像。

我的想法是创建一个 AncorPane，在其背景中放置一个 ImageView，然后在其上方放置几个形状。这确实有效。

由于图像非常大，因此需要根据可用空间按比例缩小。不用说想要缩小它们相对于图像保持在同一位置的所有叠加形状。从视觉上看，通过对 AncorPane 应用 Scale Transformation 也可以做到这一点，但我的问题来了。

AncorPane 的大小来自其子项。但即使它们按比例缩小，AncorPane 仍保持未转换图像的大小。这会产生大量空白。我认为这是布局边界与不可调整大小节点的父级边界之间的差异的问题。

有没有人建议设置 AncorPane 的实际大小或另一种摆脱这种不需要的空白的方法。

例子：

```
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.SceneBuilder;
import javafx.scene.control.ScrollPane;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.layout.AnchorPane;
import javafx.scene.layout.VBox;
import javafx.scene.shape.Rectangle;
import javafx.scene.transform.Scale;
import javafx.stage.Stage;

public class test extends Application
{
    @Override
    public void start(final Stage stage) throws Exception
    {
        final ScrollPane scroll = new ScrollPane();
        final Scene scene = SceneBuilder.create().root(scroll).build();
        final VBox box = new VBox();

        final AnchorPane anchorPane = new AnchorPane();
        final ImageView imageView = new ImageView();
        final Shape overlayRectangle = new Rectangle(100, 100, 100, 100);

        scroll.setContent(box);
        box.getChildren().add(anchorPane);
        anchorPane.getChildren().addAll(imageView, overlayRectangle);
        overlayRectangle.toFront();

        imageView.setImage(new Image("http://cdn.sstatic.net/stackoverflow/img/sprites.png"));

        final Scale scale = new Scale(0.5, 0.5);
        anchorPane.getTransforms().add(scale);

        stage.setScene(scene);
        stage.show();
    }

    public static void main(final String[] args)
    {
        launch();
    }
} 
```

运行示例时，您可以看到滚动条仅在您将窗口大小扩大到图像大小的两倍时才会消失。我知道我可以禁用滚动条。这可能在示例代码中有效，但请记住，此示例在很大程度上被缩短了。我什至取消了动态调整大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:41:58.327

我将用[ScrollPane 文档](http://docs.oracle.com/javafx/2/api/javafx/scene/control/ScrollPane.html)中的引用来回答我自己的问题，以防有人发现这一点。

> ScrollPane 布局计算基于 layoutBounds 而不是滚动节点的 boundsInParent（视觉边界）。如果应用程序希望滚动基于节点的视觉边界（对于缩放的内容等），他们需要将滚动节点包装在一个组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:23:27.403

问题是因为你的

```
 final Scale scale = new Scale(0.5, 0.5);
  anchorPane.getTransforms().add(scale); 
```

删除比例尺，因为它已经是`sizeToScene`，但您正在重新定义它。它解决了你的问题吗？

还要改变`scale()`方法的参数以增加或减少（一种缩放效果）空白问题。

或删除，将其更改为：

```
 final Scale scale = new Scale(1,1);
 anchorPane.getTransforms().add(scale); 
```

# javascript - 我用于打印的这种方法不使用我的字体和颜色

> ID：14253023
> 
> 赞同：1
> 
> 时间：2013-01-10T07:46:23.757
> 
> 标签：javascript, asp.net

我使用下面的打印方法（发送我想打印的每个控件）但是这个方法不打印背景颜色和字体，...例如，如果我发送给它的控件的背景颜色是灰色的，这个方法可以就像背景颜色是白色并且不使用我在源代码管理中使用的字体一样

```
public static void PrintWebControl(Control ctrl, string Script)
    {
        StringWriter stringWrite = new StringWriter();
        System.Web.UI.HtmlTextWriter htmlWrite = new System.Web.UI.HtmlTextWriter(stringWrite);
        if (ctrl is WebControl)
        {
            Unit w = new Unit(100, UnitType.Percentage); ((WebControl)ctrl).Width = w;
        }
        Page pg = new Page();
        pg.EnableEventValidation = false;
        if (Script != string.Empty)
        {
            pg.ClientScript.RegisterStartupScript(pg.GetType(), "PrintJavaScript", Script);
        }
        HtmlForm frm = new HtmlForm();
        pg.Controls.Add(frm);
        frm.Attributes.Add("runat", "server");
        frm.Controls.Add(ctrl);
        pg.DesignerInitialize();
        pg.RenderControl(htmlWrite);
        string strHTML = stringWrite.ToString();
        HttpContext.Current.Response.Clear();
        HttpContext.Current.Response.Write(strHTML);
        HttpContext.Current.Response.Write("<script>window.print();</script>");
        HttpContext.Current.ApplicationInstance.CompleteRequest();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:51:05.053

由于您的代码，背景颜色不会变为白色。它是删除背景颜色和背景图像的浏览器。例如，如果您尝试打印此页面，您会注意到代码示例的灰色背景变为白色。

用户可以在浏览器级别控制背景颜色和图像的打印，例如在 IE 中，他们将[按照以下步骤操作](http://www.febooti.com/support/faq/iezoom/print-web-page-background.html)

您可以[设置 CSS 打印样式表](http://coding.smashingmagazine.com/2011/11/24/how-to-set-up-a-print-style-sheet/)，这将使您可以更好地控制打印区域。

# javascript - JavaScript 从任意 URL 的 HTML 中获取一些信息？

> ID：14253027
> 
> 赞同：0
> 
> 时间：2013-01-10T07:46:32.740
> 
> 标签：javascript, html, url

抱歉，我不知道按关键字查找此内容的正确术语...

因此，作为一个简单的新手练习，我尝试制作一个文件“test.html”（就在我的桌面上），这样当我在浏览器中加载它并单击页面上显示的按钮时，该文章将从维基百科的主页中计数将出现在按钮下方的页面上。

有人告诉我尝试使用 iframe，我想出了这个：

```
<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript"">

function get_count(){
    var articlecount = document.getElementById("wiki_page").contentWindow.document.getElementById("articlecount").getElementsByTagName("a")[0].innerHTML;
    document.getElementById("put_number_here").innerHTML = articlecount;
}
    </script>

</head>

<body>

    <iframe id="wiki_page" style="display:none" src="http://en.wikipedia.org/wiki/Main_Page"></iframe>

    <input type="button" onclick="get_count()" />
    <p id="put_number_here"><p>

</body>
</html> 
```

它不起作用，当我在暂存器中测试它时（使用 Firefox 17），我得到了这个：

```
var x = document.getElementById("wiki_page").contentWindow.document.getElementById("articlecount").getElementsByTagName("a")[0].innerHTML;
alert(x);
/*
Exception: Permission denied to access property 'document'
@Scratchpad:10
*/ 
```

（并且`alert(document.getElementById("articlecount").getElementsByTagName("a")[0].innerHTML);`可以直接完美地工作`http://en.wikipedia.org/wiki/Main_Page`，所以我知道这不是问题。将维基百科主页的源代码复制到新文件“test2.html”，并将其设置为 iframe 的 src，这也可以。）

我只是想以完全错误的方式做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:11:54.560

您不能访问 iFrame 中的任何元素，除非 iFrame 引用的是同一个域。

对于相同的域调用，请使用此链接作为参考：

[从 iframe 调用父窗口函数](https://stackoverflow.com/questions/2161388/iframe-function-calling-from-iframe-to-parent-page-javascript-function)

对于不同的域，请使用此链接以供参考：

[如何使用 Javascript 从 iframe 实现跨域 URL 访问？](https://stackoverflow.com/questions/1378433/cross-domain-url-access-from-iframe-using-java)脚本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:16:05.753

您可以使用以下方法引用其他框架：

```
window.frames["wiki_page"] 
```

然后，您可以使用以下方法引用 DOM 中的元素：

```
window.frames["wiki_page"].document.getElementById ("articlecount"); 
```

因此，在您的情况下，您可以尝试：

```
var targetFrame = window.frames["wiki_page"]; 
```

然后使用以下方法访问元素：

```
targetFrame.document.getElementById("IDOfSomething"); 
```

确保您的 iframe 仍被命名为 wiki_page 等...

# android - android平台的OCR代码

> ID：14253028
> 
> 赞同：2
> 
> 时间：2013-01-10T07:46:33.943
> 
> 标签：android, open-source, ocr

> **可能重复：**
> [android OCR？](https://stackoverflow.com/questions/1106202/android-ocr)

目前，我有一个移动应用项目。在应用程序中，我想开发 OCR。有人知道可以在android平台上执行的源代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:53:26.287

流行的 OCR 库是[Aspire](http://asprise.com/product/ocr/index.php?lang=java)和[Tesseract](https://github.com/tesseract-ocr)。

实践中的示例：Mezzofanti ( [http://code.google.com/p/mezzofanti/](http://code.google.com/p/mezzofanti/) )，一个使用 Tesjeract 的开源 Android 应用程序。

OCR 可能会占用大量 CPU，您可能需要重新考虑在智能手机上执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:49:31.107

您可以查看[Tesseract](http://code.google.com/p/tesseract-android-tools/)，此链接提供了一些适用于 Android 的 API。

# php - 在 wordpress 中添加新模块

> ID：14253029
> 
> 赞同：0
> 
> 时间：2013-01-10T07:46:46.627
> 
> 标签：php, wordpress, module

如果我的问题质量不好，我很抱歉。当我想了解 wordpress 时遇到问题，我是 wordpress 的新手，我想在 wordpress 中创建一些模块，这可能吗？

前任。

1.  如果我想添加模块，我必须在 wordpress 中学习什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T07:52:36.610

Joomla 通常指的是一个模块。在 WordPress 中编写一个被认为是一个插件。你应该开始学习法典，它会为你列出你需要做的事情。

您可以在 WordPress 网站上的[Writing_a_Plugin找到它](http://codex.wordpress.org/Writing_a_Plugin)

> WordPress 插件：WordPress 插件是一个程序，或一组一个或多个函数，用 PHP 脚本语言编写，为 WordPress 博客添加一组特定的功能或服务，可以使用访问权限与博客无缝集成WordPress插件应用程序接口（API）提供的要点和方法。
> 
> 希望 WordPress 有一些新的或修改的功能？首先要做的是搜索各种 WordPress 插件存储库和来源，看看是否有人已经创建了适合您需求的 WordPress 插件。如果没有，本文将指导您完成创建自己的 WordPress 插件的过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T13:21:31.290

要开发 WP 插件，您必须熟悉 wordpress 钩子和 API 函数。

您可以从任何现有插件开始学习/探索。我从“Hello_Dolly”开始:)

# dynamics-crm-2011 - 如何获取 CRM for Outlook 中使用的 URL 和凭据？

> ID：14253030
> 
> 赞同：2
> 
> 时间：2013-01-10T07:46:49.070
> 
> 标签：dynamics-crm-2011, outlook-addin

我为连接到 CRM 服务器的 Outlook 开发了一个插件。虽然它可以工作并完成预期的工作，但最好通过获取 CRMO（或我们称之为 Outlook 的 CRM 客户端）中使用的 URL 和凭据来省略配置，从而实现安装过程的自动化。

在我寻找了一段时间之后，我还没有找到任何关于如何获取该信息的指示。**通过**Outlook 客户端从 CRM 传输记录也是完全可以接受的（如果可以的话） 。

所以，我想知道两件事。如何进行以下操作。

1.  检查是否首先安装了 Outlook 客户端。
2.  获取（或应用）为使用而存储的登录信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:59:20.147

查看注册表项 - `HKEY_CURRENT_USER\SOFTWARE\MICROSOFT\MSCRMClient`. 您会在那里找到组织 URL 和名称。

本地安装使用 Windows 身份验证进行连接，因此您应该能够在 Outlook 插件代码中获取此信息。不了解在线 CRM，但我的建议是查看与上述相同的位置

# android - Android 上的 Gmail 损坏了一些文件

> ID：14253031
> 
> 赞同：0
> 
> 时间：2013-01-10T07:46:54.130
> 
> 标签：android, gmail, download

在我的一个应用程序中，我打开二进制文件，并收到用户对某些文件的一些错误报告。当他们向我发送文件时，如果我在桌面上的 Gmail 上下载它们，该文件会很好地显示在我的应用程序中。当我使用原生 Android GMail 应用程序下载它们时，文件没有打开。

以下是原始文件的前 64 个字节，与从桌面下载时显示的一样（显示为 hexa）：

```
03 00 08 00 D8 0C 00 00 01 00 1C 00 BC 02 00 00 
2D 00 00 00 00 00 00 00 00 01 00 00 D0 00 00 00 
00 00 00 00 00 00 00 00 10 00 00 00 25 00 00 00 
33 00 00 00 3D 00 00 00 44 00 00 00 49 00 00 00 
```

以下是使用本机 GMail 应用程序下载的文件的前 64 个字节（再次为 hexa）：

```
EF BF BD EF BF BD 2D EF BF BD 25 33 3D 44 49 4D 
52 63 72 76 EF BF BD EF BF BD EF BF BD EF BF BD 
EF BF BD EF BF BD EF BF BD EF BF BD EF BF BD EF 
BF BD EF BF BD 29 2E 3E 43 54 59 69 6E 7F EF BF 
```

是否对该文件进行了某种压缩，还是 GMail 应用程序损坏了它？特别是如果你看第一个样本的末尾，你有以下字节 10、25、33、3D、44、49，它们也出现在第二个样本的第一行，这让我认为这是一个压缩某种意义上的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T17:54:46.847

我不确定确切的来源，但是如果您查看[http://www.cogsci.ed.ac.uk/~richard/utf-8.cgi?input=%F6&mode=char](http://www.cogsci.ed.ac.uk/~richard/utf-8.cgi?input=%F6&mode=char)那么该模式是由于试图将文件解释为 UTF-8，进行替换，然后将文件写入为 UTF-8。

# java - 是否有解决方法：java.lang.RuntimeException：无法生成 DH 密钥对

> ID：14253039
> 
> 赞同：5
> 
> 时间：2013-01-10T07:47:32.317
> 
> 标签：java, sockets, ssl, network-programming

我正在测试一个 Java 应用程序。我正在尝试使用 DH 密码套件启动 SSL 握手。但我收到以下错误：

```
java.lang.RuntimeException: Could not generate DH keypair 
```

有人建议`BouncyCastle`，但很多人报告了它的错误，所以如果有其他选择，我不鼓励使用它。

有人建议`Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files`从[http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)下载。我确实替换了以下两个文件`java.security`并`java.policy`在`C:\Program Files (x86)\Java\jre7\lib\security`. 请注意，我还注意到我已经`Java\jre7\security`安装了：`Program Files (x86)`并且`Program Files`我都替换了。但是，我仍然看到同样的错误。

这个错误有什么解决方法吗？

**编辑：** 堆栈跟踪：

```
javax.net.ssl.SSLException: java.lang.RuntimeException: Could not generate DH keypair
    at sun.security.ssl.Alerts.getSSLException(Unknown Source)
    at sun.security.ssl.SSLSocketImpl.fatal(Unknown Source)
    at sun.security.ssl.SSLSocketImpl.fatal(Unknown Source)
    at sun.security.ssl.SSLSocketImpl.handleException(Unknown Source)
    at sun.security.ssl.SSLSocketImpl.startHandshake(Unknown Source)
    at sun.security.ssl.SSLSocketImpl.startHandshake(Unknown Source)
    at MyClass.MyClass.myFunction(MyProg.java:78)
    at MyClass.MyClass.main(MyClass.java:233)
Caused by: java.lang.RuntimeException: Could not generate DH keypair
    at sun.security.ssl.DHCrypt.<init>(Unknown Source)
    at sun.security.ssl.ClientHandshaker.serverKeyExchange(Unknown Source)
    at sun.security.ssl.ClientHandshaker.processMessage(Unknown Source)
    at sun.security.ssl.Handshaker.processLoop(Unknown Source)
    at sun.security.ssl.Handshaker.process_record(Unknown Source)
    at sun.security.ssl.SSLSocketImpl.readRecord(Unknown Source)
    at sun.security.ssl.SSLSocketImpl.performInitialHandshake(Unknown Source)
    ... 4 more
Caused by: java.security.InvalidAlgorithmParameterException: Prime size must be multiple of 64, and can only range from 512 to 1024 (inclusive)
    at com.sun.crypto.provider.DHKeyPairGenerator.initialize(DHKeyPairGenerator.java:120)
    at java.security.KeyPairGenerator$Delegate.initialize(Unknown Source)
    ... 11 more 
```

**EDIT2：** 我的代码充当客户端，尝试与远程服务器（网站）启动 SSL 握手。我将客户端的密码套件列表设置为：

```
{
"TLS_ECDHE_RSA_WITH_RC4_128_SHA",
"TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA",
"TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA", 
"TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256",
"TLS_ECDHE_RSA_WITH_NULL_SHA",
"TLS_DHE_RSA_WITH_AES_128_CBC_SHA256",  
"TLS_DHE_RSA_WITH_AES_128_CBC_SHA",
"SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA",
"SSL_DHE_RSA_WITH_DES_CBC_SHA",
"SSL_DHE_RSA_EXPORT_WITH_DES40_CBC_SHA"
}; 
```

Java 支持客户端列表中的所有密码套件。当服务器提供长 DH 密钥时，如何配置 Java 客户端以支持发起 SSL 握手？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-07T01:39:44.417

是的，基本上是 #6851461 也是 #9162249 和 #10687200 的欺骗。无限强度政策不是解决方案。

SSL/TLS 客户端中 DHE（和其他 DH）的主要大小是并且必须根据从服务器接收的参数设置，客户端不能选择不同的值。（这是堆栈跟踪中的 ClientHandshaker.serverKeyExchange。）

您已经拥有优先于 DHE-RSA 的 ECDHE-RSA（在 Java 7 中可以正常工作，或者如果您添加了 ECC 提供程序，例如但不一定是 BouncyCastle，则为 6），并且服务器没有选择它。您不提供纯 RSA；如果您愿意不使用前向保密并且服务器也是，请尝试在 _DHE_RSA 之前（或代替）添加至少一些套件，例如 _RSA_WITH_AES_128_CBC_SHA _RSA_WITH_RC4_128_SHA。

另一种可能性是要求服务器运营商使用 DH 1024 位，如果他们愿意并允许的话。它实际上还没有被破坏，但它被一些重要的标准所禁止。

# c# - 如何使用 EnterpriseLibrary 缓存将过期时间设置为 1 分钟

> ID：14253042
> 
> 赞同：1
> 
> 时间：2013-01-10T07:47:49.977
> 
> 标签：c#, asp.net, enterprise-library

我使用 EnterpriseLibrary cacheManager

```
<cacheManagers>
  <add name="NonExperimentalAppsCache" type="Microsoft.Practices.EnterpriseLibrary.Caching.CacheManager, Microsoft.Practices.EnterpriseLibrary.Caching, Version=4.0.0.0, Culture=neutral, PublicKeyToken=null" expirationPollFrequencyInSeconds="60" maximumElementsInCacheBeforeScavenging="10000" numberToRemoveWhenScavenging="100" backingStoreName="Null Storage" />
</cacheManagers> 
```

我希望体验时间为 1 分钟（绝对，在每次缓存触摸时不刷新）我该怎么做？因为现在它可以保存更长时间的数据。

我在缓存上使用存储库

```
 public static List<string> GetAllNonExperimentalAppsNames()
    {
        List<string> nonExperimentalAppsNames = NonExperimentalAppsCacheManager.Get();

        if (nonExperimentalAppsNames == null)
        {
            //was not found in the cache
            nonExperimentalAppsNames = GetAllNonExperimentalAppsNamesFromDb();

            if (nonExperimentalAppsNames != null)
            {
                NonExperimentalAppsCacheManager.Set(nonExperimentalAppsNames);
            }
            else
            {
                mApplicationLogger.Info(string.Format("GetAllNonExperimentalAppsNames:: nonExperimentalAppsNames list is null"));
            }
        }
        return nonExperimentalAppsNames;
    } 
```

..

```
internal static class NonExperimentalAppsCacheManager
{
    private const string NONEXPERIMENTALAPPS = "NonExperimentalApps";

    private static readonly ICacheManager nonExperimentalAppsCache = CacheFactory.GetCacheManager("NonExperimentalAppsCache");

    internal static List<String> Get()
    {
        return nonExperimentalAppsCache[NONEXPERIMENTALAPPS] as List<String>;
    }

    internal static void Set(List<String> settings)
    {
        nonExperimentalAppsCache.Add(NONEXPERIMENTALAPPS, settings);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:11:58.290

将项目添加到缓存时指定绝对过期时间：

```
internal static void Set(List<String> settings)
{
    nonExperimentalAppsCache.Add(NONEXPERIMENTALAPPS, settings, 
        CacheItemPriority.Normal, null, new AbsoluteTime(TimeSpan.FromMinutes(1)));
} 
```

过期会导致该项目从缓存中删除。刷新它由您决定（您可以使用 来完成`ICacheItemRefreshAction`）。如果您在将项目添加到缓存时指定 1 分钟的到期时间，但到期池频率为 10 分钟，则除非您尝试访问该项目，否则该项目将在 10 分钟后才会从缓存中删除。如果您`Get()`在该项目“过期”但仍在缓存中时调用（因为后台进程尚未运行），则该项目将从缓存中删除并返回空值。

我建议阅读[缓存应用程序块的设计，以](http://msdn.microsoft.com/en-us/library/ff664712%28v=pandp.50%29.aspx)了解更多关于内部设计的讨论。

# asp.net - VB.NET - 隐式和显式事务

> ID：14253048
> 
> 赞同：1
> 
> 时间：2013-01-10T07:48:14.197
> 
> 标签：asp.net, vb.net, transactions

与显式事务 (SQLTransaction) 相比，使用隐式事务 (TransactionScope) 有什么好处？

我花了一些时间对此进行调查，并且有很多网站解释了两者之间的差异，我确实理解这一点：[http](http://sqlserverpedia.com/wiki/Transaction_Overview) ://sqlserverpedia.com/wiki/Transaction_Overview ，而这一点：[命名显式和隐式事务](https://stackoverflow.com/questions/13352623/named-explicit-implicit-transactions). 我了解事务的属性，即 ACID。我还查看了 MSDN 上的文档。

我相信隐式事务更灵活且更易于使用（因为为您完成了回滚并且事务不绑定到特定连接）。我相信显式事务可以为您提供更多控制权，例如何时回滚。我想确认：a）我所说的是否属实，b）是否有任何标准用于决定是使用隐式交易还是显式交易。

在 MSDN 上它说：“强烈建议您使用更简单的隐式模型进行开发”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T23:15:14.587

显式交易已成为过去。*除非你有充分的理由*，否则不要使用它们，我想不出任何理由。`TransactionScope`是要走的路，几乎总是。

不用担心 DTC，`TransactionScope`它足够聪明，只有在需要协调两个资源时才使用 DTC。如果您只访问一个数据库，`TransactionScope`它将与显式事务一样快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-19T13:45:56.953

我建议尽可能避免使用 MSDTC，除非您有排查故障，编写详尽的故障排除指南，并向您的软件用户详细说明如何配置它。例如，用户需要知道如何设置其身份验证、如何确保 DTC 服务正在运行以确保远程机器可以通信、如何使用 FQDN 配置 SQL 以进行跨域事务等等。我，多年来。慢慢地赢得了战争以将其从系统中删除。换句话说，是的。如果您想保证在未来十年内出现问题，请继续使用它。恕我直言，它不是企业级工具。它根本没有什么自动的。

# java - 库来检测网络中的重叠社区？

> ID：14253049
> 
> 赞同：7
> 
> 时间：2013-01-10T07:48:16.747
> 
> 标签：java, networking, graph, cluster-analysis

寻找一个库，可以在几秒钟而不是几分钟内检测到相当大的网络（最多 10,000 个节点）中的重叠社区？[注意：“网络”是指图表]

* * *

回复询问详情的评论，这里有一个简单的例子：

防御工事
     |
    克
     |
美国广播公司

有许多算法能够将 (D,E,F,G) 和 (A,B,C) 检测为该网络中的 2 个不同（非重叠）社区 - 或者当然是 (D,E,F) 和（A、B、C、G）。

我正在寻找一种用 Java 实现的算法，它能够将 (D,E,F,G) 和 (A,B,C,G) 检测为这两个重叠（因为它们在 G 上重叠）社区网络。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T05:38:11.737

试试，斯坦福大学的 SNAP 工具。他们在已经实现的示例文件夹中有这个用例。

[http://snap.stanford.edu/](http://snap.stanford.edu/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:06:33.447

试试[gephi](http://gephi.org/features/)。我相信你计划做的事情已经在那里实施了。但是，它是开源的（3 GPL），您可以从代码中获得一些想法。java Graph API 描述在[这里](http://gephi.org/docs/api/org/gephi/graph/api/package-summary.html)。

您也可能想查看[这篇](http://arxiv.org/pdf/0906.0612v2.pdf)文章

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T14:26:44.077

COPRA 是一种用 JAVA 实现的重叠社区算法，速度非常快。

[http://www.cs.bris.ac.uk/~steve/networks/software/copra.html](http://www.cs.bris.ac.uk/~steve/networks/software/copra.html)

重叠集群的其他有用链接（不一定用 java 编写）是：

摩西：cliquecluster.org/moses

奥斯陆：oslom.org/

覆盖图：bitbucket.org/dsign/grbracket/wiki/Home

随机块模型：github.com/premgopalan/svinet

# ruby-on-rails - 在这种情况下如何使用分页？

> ID：14253053
> 
> 赞同：2
> 
> 时间：2013-01-10T07:48:25.640
> 
> 标签：ruby-on-rails, ruby-on-rails-3, kaminari

我正在使用名为**'acts_as_follower'**和**'kaminari'**的 gem 。
如果我`.page(params[:page]).per(10)`在获取记录的行的末尾加上`acts_as_follower`，它会返回错误。所以我删除了它。
我如何使用这个 gem **'acts_as_follower' 的**分页？

**错误**

```
NoMethodError in UsersController#following
undefined method `page' for #<Array:0x00000018593928>

Extracted source (around line #53):

50: <% end %>
51: 
52: <div class='pagination'>
53:     <%= page_entries_info(@users).html_safe %>
54:     <%= paginate @users, :window => 4, :outer_window => 5, :left => 2, :right => 2 %>
55: </div>
56: 
```

当前**users_controller.rb**获取部分

```
@users = User.find_by_username(params[:id]).all_following(order: 'updated_at DESC') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:42:07.487

由于该`all_following(order: 'updated_at DESC')`方法返回一个数组对象，因此您需要使用 Kaminari 的`PaginatableArray`.

将以下代码添加到您的控制器：

```
@users = Kaminari.paginate_array(@users).page(params[:page]).per(10) 
```

然后分页应该像你期望的那样工作。

# javascript - 如何识别原型 typeof？

> ID：14253058
> 
> 赞同：0
> 
> 时间：2013-01-10T07:49:06.253
> 
> 标签：javascript, inheritance, types, prototypejs

我有 2 个类，基类和子类：

```
// base class
function circle(radius){
    this.radius = radius;
    return true;}

// child class
function pizza(flavour, radius){
    this.radius = radius;
    this.flavour = flavour;
    return true;}

// Inheritance
pizza.prototype = new circle(); 
```

现在我正在创建一个披萨实例：

```
var myPizza = new pizza("Onion", 5); 
```

我现在如何确定这个变量是`circle`or `pizza`？

我知道我可以添加一个函数，该函数将返回名称或使用类型名称保存属性，但我想知道是否有另一种方法而不更改我的任何类。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T07:57:02.330

通过将类的原型设置为`pizza`类的实例`circle`，任何实例都`pizza`将自动继承自`circle`. 结果，`instanceof`操作员将检查实例的构造函数：

```
(new pizza) instanceof pizza; // true
(new circle) instanceof circle; // true 
```

并且还将沿着原型链检查实例继承自的任何其他构造函数：

```
(new pizza) instanceof circle; // true
(new pizza) instanceof Object; // true 
```

因为`circle`不是继承自`pizza`，所以您可以检查某些东西是 a`circle`但不是 a `pizza`with：

```
(new circle) instanceof pizza; // false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T07:57:22.257

你可以使用`instanceof`

```
var p = 新披萨（）；
console.log(p instanceof Pizza) //true
console.log(p instanceof circle) //也是如此
```

# php - 随机变量的概率

> ID：14253060
> 
> 赞同：-1
> 
> 时间：2013-01-10T07:49:18.680
> 
> 标签：php, math, probability

我真的很惭愧问这个问题，但是我没有时间修改。也不是以英语为母语的人，所以请原谅我缺乏数学词汇。

我正在编写一个程序，该程序需要将概率分配给变量，然后随机选择一个。

例子：

想象一下，我有硬币，我想将 70% 的概率分配给正面，30% 分配给反面。当我扔它时，我希望有 70% 的机会出现正面和 30% 的反面。

一种愚蠢的方法是创建一个单元格数组，将头部插入 70 个单元格，将尾部插入 30 个单元格。将它们随机化并随机选择一个。

**编辑 1：**我还想指出，我不限于 2 个变量。例如，假设我有 3 个字符可以在 (*,\$,#) 之间进行选择，我想将以下内容分配给每个字符 * = 30%、\$ = 30% 和 # = 40%。

这就是为什么我不想使用随机函数并想看看它是如何在数学上完成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:51:33.653

你想要另一种方法吗？大多数 rand 函数从 [0, 1) 生成小数。对于 30%，检查生产数量小于 0.3

虽然请注意，如果你真的测试感知到的“随机性”，它并不是真的随机......

在 PHP 中，您可以使用 rand(0, 99)（整数代替双精度，30 代替 0.3）。PHP rand 函数是一个闭区间（都包含）

```
function randWithWeight($chanceToReturnTrue) { // chance in percent
    return rand(0, 99) < $chanceToReturnTrue;
} 
```

编辑：关于感知随机性的注释。一些数学，因为你说你来自数学......生成0-99的数字，将它们添加到数组中。当数组包含重复项时停止。通常需要大约 20 次传球（我在重复之前获得 3-21 次传球，10 次以上的尝试）。所以这不是你所期望的“随机”。不过，（我知道我会偏离轨道），看看[生日问题](http://en.wikipedia.org/wiki/Birthday_problem)。它比看起来“更随机”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T07:53:27.480

如果你想要 30% 的概率就做

```
if(rand(1,100) <= 30){
    // execute code
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T07:54:26.557

一种方法是

```
$r=rand(1,100);
if($r<70)
{
   echo "Head";
}
else
{
   echo "Tail";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T08:11:33.117

这是一个计算加权 rand 的简单函数：

```
<?php
function weightedRand($weights, $weight_sum = 100){
    $r = rand(1,$weight_sum);
    $n = count($weights);
    $i = 0;
    while($r > 0 && $i < $n){
        $r -= $weights[$i];
        $i++;
    }
    return $i - 1;
} 
```

该函数接受一个数组。例如`array(30,70)`将有 30% 的机会获得`0`和 70% 的机会获得`1`。这应该适用于多个权重。

其原理是将生成的随机数减去权重，直到小于或等于零。

[演示与`30%:70%`](http://codepad.org/8rF7Le3i)
[演示与`20%:30%:50%`](http://codepad.org/SGmqWSUm)

# ssl - 无法连接到 SSL LDAP 服务器

> ID：14253061
> 
> 赞同：0
> 
> 时间：2013-01-10T07:49:25.037
> 
> 标签：ssl, erlang, ldap

我正在尝试连接到只能通过 ssl 使用的 LDAP 服务器。当我尝试以下操作时：

```
eldap:open([HOST], [{port, 636},{ssl, true}]). 
```

我得到错误

```
SSL: certify: ssl_handshake.erl:239:Fatal error: certificate unknown
{error,"connect failed"} 
```

有人知道在 erlang 中通过 SSL 连接到 LDAP 服务器吗？

PS：

现在，我正在尝试使用`stunnel`，但这也行不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:35:19.577

仅供参考。

问题是我从我的提供商那里得到了一个无效的证书。修复证书后一切正常。

# python - Python，numpy，scipy：如何从 GPS 坐标中排除位置错误？（平均经度、纬度）

> ID：14253067
> 
> 赞同：2
> 
> 时间：2013-01-10T07:50:07.300
> 
> 标签：python, numpy, geolocation, gps, scipy

我使用 Python：

我有 2 个 GPS 点阵列 - 经度和纬度（超过 500 000 个点）。

我有 1 个日期时间数组。

```
lon = numpy.array(lon)
lat = numpy.array(lat)
dt = numpy.array(dt) 
```

我有位置错误（GPS 传感器错误）。例如 15 米。

```
GPS_sensor_error = 0.015 
```

**我需要从**轨道上没有星号的坐标中排除 GPS_sensor_error。

![在此处输入图像描述](../Images/bfbce6cf270e60ccc5f271650a3bb7b5.png)

（我不画一个坐标相同的点）

![在此处输入图像描述](../Images/5cde340ae8d5d81bc4c00e7a33fce9b4.png)

**我怎么能做到？**

现在：

1.  我计算点之间的距离。

2.  我找到最小距离，如果它小于 GPS_sensor_error，那么我平均 lon，lat。

3.  重复 1。

4.  重复2。

5.  重复直到所有距离都不再是 GPS_sensor_error

**更新：**

```
 lon = numpy.array()
     lat = numpy.array()

     flag = True
     while flag:
        lon1 = lon[:-1]
        lon2 = lon[1:]
        lat1 = lat[:-1]
        lat2 = lat[1:]

        '''distance'''
        x = (lon2 - lon1)
        y = (lat2 - lat1)
        d = numpy.sqrt(x * x + y * y)

        min = numpy.min(d)
        if min < GPS_sensor_error:
            j = numpy.where(d == min)[0][0]

            lon[j] = (lon[j] + lon[j + 1]) / 2
            lat[j] = (lat[j] + lat[j + 1]) / 2

            lon = numpy.delete(lon, j + 1)
            lat = numpy.delete(lat, j + 1)

        else:
            flag = False 
```

绕过所有点在纯python上工作很长时间...... **请提示，如何使用scipy，numpy实现它？**

谢谢

**Ps可能已经在scipy，numpy中有一个GPS过滤器？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T15:08:22.330

从数据科学的角度来看，您所做的事情是不正确的。您不能只使用平均误差距离作为截止值，并认为您的数据会更正确。您正在比较的两个点的误差可能大于或小于 15 m，它们可以彼此靠近或远离彼此。而且，如果您没有另一个确切的数据集，则无法判断正确的点。您无法使此数据集更加精确。

但是，我认为您的目标是简化数据集，而不是使其更准确。为此，您可以使用[Douglas–Peucker 算法](http://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm)。我建议您将数据加载到启用[Postgis](http://postgis.refractions.net/)的数据库（Postgresql + postgis）中，然后使用[简化](http://www.bostongis.com/postgis_simplify.snippet)功能。这将需要一些数据库设置时间，但它会大大加快你的速度。但是，如果您想在纯 python 中使用它，那么这个 SO [question](https://stackoverflow.com/questions/2573997/reduce-number-of-points-in-line)有一个非常好的片段。

顺便提一句。如果您使用 lat,lon 进行距离计算，请不要使用毕达哥拉斯。这是无效的，因为 lat,lon 不是欧几里得。使用[哈希](http://en.wikipedia.org/wiki/Haversine_formula)算法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T08:13:02.573

您可以仅使用 numpy 原语轻松完成所有计算，而无需使用 python 循环。

首先将您的距离函数定义为对 numpy 数组进行操作的函数（我假设您已经这样做了..）：

```
def dist(lon1, lat1, lon2, lat2):
    """Compute the distance between (lon1, lat1) and (lon2, lat2). 
       Both may be numpy arrays."""
    ... 
```

然后将其应用于您的数据，如下所示：

```
d = dist(lon[:-1], lat[:-1], lon[1:], lat[1:]) 
```

这种表示法意味着您会将第 i^个点与第 i+1^个点进行比较。

接下来找到 d 大于阈值的索引：

```
I = d > GPS_sensor_error 
```

现在只保留那些和第一点！

```
lon_out = numpy.hstack([[lon[0]], lon[1:][I]]) # could also use numpy.where
lat_out = numpy.hstack([[lat[0]], lat[1:][I]]) 
```

**更新：**

如果要保持相同的点数，即将 lon[i] 设置为*最后一个好的值*，请使用以下技巧而不是前两行：

```
idx, = numpy.where(I)
idx = numpy.hstack([[0], idx])
J = numpy.cumsum(I) # the trick
lon_out = lon[idx[J]]
lat_out = lat[idx[J]] 
```

# r - 将 RcppArmadillo 向量转换为 Rcpp 向量

> ID：14253069
> 
> 赞同：14
> 
> 时间：2013-01-10T07:50:16.317
> 
> 标签：r, rcpp, armadillo

我正在尝试将 RcppArmadillo 向量（例如`arma::colvec`）转换为 Rcpp 向量（`NumericVector`）。我知道我可以先转换`arma::colvec`为`SEXP`，然后再转换`SEXP`为`NumericVector`（例如`as<NumericVector>(wrap(temp)`），假设 temp 是一个`arma::colvec`对象）。但是有什么好的方法呢？

我想这样做只是因为我不确定是否可以将`arma::colvec`对象作为参数传递给`Rcpp::Function`对象。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-12T07:08:26.340

I was trying to Evaluate a `Rcpp::Function` with argument `arma::vec`, it seems that it takes the argument in four forms without compilation errors. That is, if `f` is a `Rcpp::Function` and `a` is a `arma::vec`, then

1.  `f(a)`
2.  `f(wrap(a))`
3.  `f(as<NumericVector>(wrap(a)))`
4.  `f(NumericVector(a.begin(),a.end()))`

produce no compilation and runtime errors, at least apparently.

For this reason, I have conducted a little test for the four versions of arguments. Since I suspect that somethings will go wrong in garbage collection, I test them again `gctorture`.

```
gctorture(on=FALSE)
Rcpp::sourceCpp(code = '
#include <RcppArmadillo.h>
// [[Rcpp::depends(RcppArmadillo)]]

using namespace Rcpp;

// [[Rcpp::export]]
double foo1(arma::vec a, arma::vec b, Function f){
    double sum = 0.0;
    for(int i=0;i<100;i++){
        sum += as<double>(f(a, b));
    }
    return sum;
}

// [[Rcpp::export]]
double foo2(arma::vec a, arma::vec b, Function f){
    double sum = 0.0;
    for(int i=0;i<100;i++){
        sum += as<double>(f(wrap(a),wrap(b)));
    }
    return sum;
}

// [[Rcpp::export]]
double foo3(arma::vec a, arma::vec b, Function f){
    double sum = 0.0;
    for(int i=0;i<100;i++){
        sum += as<double>(f(as<NumericVector>(wrap(a)),as<NumericVector>(wrap(b))));
    }
    return sum;
}

// [[Rcpp::export]]
double foo4(arma::vec a, arma::vec b, Function f){
    double sum = 0.0;
    for(int i=0;i<100;i++){
        sum += as<double>(f(NumericVector(a.begin(),a.end()),NumericVector(b.begin(),b.end())));
    }
    return sum;
}
')
# note that when gctorture is on, the program will be very slow as it
# tries to perfrom GC for every allocation.
# gctorture(on=TRUE)
f = function(x,y) {
    mean(x) + mean(y)
}
# all three functions should return 700
foo1(c(1,2,3), c(4,5,6), f) # error
foo2(c(1,2,3), c(4,5,6), f) # wrong answer (occasionally)!
foo3(c(1,2,3), c(4,5,6), f) # correct answer
foo4(c(1,2,3), c(4,5,6), f) # correct answer 
```

As a result, the first method produces an error, the second method produces a wrong answer and only the third and the fourth method return the correct answer.

```
> # they should return 700
> foo1(c(1,2,3), c(4,5,6), f) # error
Error: invalid multibyte string at '<80><a1><e2>'
> foo2(c(1,2,3), c(4,5,6), f) # wrong answer (occasionally)!
[1] 712
> foo3(c(1,2,3), c(4,5,6), f) # correct answer
[1] 700
> foo4(c(1,2,3), c(4,5,6), f) # correct answer
[1] 700 
```

Note that, if `gctorture` is set `FALSE`, then all functions will return a correct result.

```
> foo1(c(1,2,3), c(4,5,6), f) # error
[1] 700
> foo2(c(1,2,3), c(4,5,6), f) # wrong answer (occasionally)!
[1] 700
> foo3(c(1,2,3), c(4,5,6), f) # correct answer
[1] 700
> foo4(c(1,2,3), c(4,5,6), f) # correct answer
[1] 700 
```

It means that method 1 and method 2 are subjected to break when garbage is collected during runtime and we don't know when it happens. Thus, it is **dangerous** to not wrap the parameter properly.

**Edit**: as of 2017-12-05, all four conversions produce the correct result.

1.  `f(a)`
2.  `f(wrap(a))`
3.  `f(as<NumericVector>(wrap(a)))`
4.  `f(NumericVector(a.begin(),a.end()))`

and this is the benchmark

```
> microbenchmark(foo1(c(1,2,3), c(4,5,6), f), foo2(c(1,2,3), c(4,5,6), f), foo
3(c(1,2,3), c(4,5,6), f), foo4(c(1,2,3), c(4,5,6), f))
Unit: milliseconds
                            expr      min       lq     mean   median       uq
 foo1(c(1, 2, 3), c(4, 5, 6), f) 2.575459 2.694297 2.905398 2.734009 2.921552
 foo2(c(1, 2, 3), c(4, 5, 6), f) 2.574565 2.677380 2.880511 2.731615 2.847573
 foo3(c(1, 2, 3), c(4, 5, 6), f) 2.582574 2.701779 2.862598 2.753256 2.875745
 foo4(c(1, 2, 3), c(4, 5, 6), f) 2.378309 2.469361 2.675188 2.538140 2.695720
      max neval
 4.186352   100
 5.336418   100
 4.611379   100
 3.734019   100 
```

And `f(NumericVector(a.begin(),a.end()))` is marginally faster than other methods.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-05-24T14:25:25.413

这应该与`arma::vec`,`arma::rowvec`和一起使用`arma::colvec`：

```
template <typename T>
Rcpp::NumericVector arma2vec(const T& x) {
    return Rcpp::NumericVector(x.begin(), x.end());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T19:47:18.203

I had the same question. I used wrap to do the conversion at the core of several layers of for loops and it was very slow. I think the wrap function is to blame for dragging the speed down so I wish to know if there is an elegant way to do this.

As for Raymond's question, you might want to try including the namespace like: `Rcpp::as<Rcpp::NumericVector>(wrap(A))` instead or include a line `using namespace Rcpp;` at the beginning of your code.

# facebook - Facebook 分享按钮会被视为垃圾邮件吗？

> ID：14253071
> 
> 赞同：0
> 
> 时间：2013-01-10T07:50:21.977
> 
> 标签：facebook, facebook-sharer

这只是一个快速的问题。如果我在我的网站上放了一个 Facebook 分享按钮，并且鼓励用户分享很多东西以获得积分等，如果用户是愿意分享的人，Facebook 是否能够阻止/将我的网站视为垃圾邮件（发布到他们的墙上）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:06:06.580

据我所知，这不被视为垃圾邮件。我们过去使用 publish_stream 并通过图形 api 发布，这给我们带来了很多麻烦，因为垃圾邮件过滤器将我们的应用程序标记为垃圾邮件应用程序。我们从来没有遇到过 Facebook 分享按钮的问题。

# android - 如何更新我的 EditText 值？

> ID：14253072
> 
> 赞同：0
> 
> 时间：2013-01-10T07:50:27.757
> 
> 标签：android, sql-update, android-sqlite

我是 android 新手，因为我正在尝试使用上下文菜单项“EDIT”更新数据。使用 EDIT 我将进入`EditText`布局然后我将按更新注意，但它不会更新`EditText`数据。

我的代码数据库：

```
public void updateNote(String filename, String filedata, String duedate){

    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues updatenote = new ContentValues();
    updatenote.put(Col_File_Name, filename);
    updatenote.put(Col_File_Data, filedata);
    updatenote.put(Col_Due_Date, duedate);

    db.update(Table_Notepad, updatenote, Col_ID + "=?", null);
    db.close();
} 
```

活动：

```
case R.id.Save:

    String get_title = Title_Edit.getText().toString();
    String get_content = Content_Edit.getText().toString();
    String get_duedate = duedatetext.getText().toString();

    if(!get_title.equals("") || !get_content.equals(""))
    {

     if (!isEdit) {
            //if it isn't edit mode we just add a new note to db

             Database_Notepad db = new Database_Notepad(Add_Task.this);

             db.Create_Note(get_title, get_content, get_duedate);

        } else {
            //if this is edit mode, we just update the old note
             Database_Notepad db = new Database_Notepad(Add_Task.this);

             db.updateNote(get_title, get_content, get_duedate);

            db.close();
        }

    } 
```

请建议，我想我需要更正数据库代码。请建议。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:06:40.680

您的功能`updateNote`需要您要更新的记录 ID。

喜欢

> public void updateNote(int id, String filename, String filedata, String duedate){

反而

> public void updateNote(String filename, String filedata, String duedate){

并比较您的整个记录​​的 id，它将检查并更新您的特定记录，更改您的函数功能，如下所示：

```
public void updateNote(int id, String filename, String filedata, String duedate){

    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues updatenote = new ContentValues();
    updatenote.put(Col_File_Name, filename);
    updatenote.put(Col_File_Data, filedata);
    updatenote.put(Col_Due_Date, duedate);

    db.update(Table_Notepad, updatenote,  "rowid= "+id,, null);// rowid or name of your id column
    db.close();
} 
```

`id`并与其他参数一起传递。

利用

> db.updateNote(id, get_title, get_content, get_duedate);

反而

> db.updateNote(get_title, get_content, get_duedate);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:03:24.817

在`updateNode()`中，您需要更改此更新或插入值：

```
public void updateNote(long rowId, String filename, String filedata, String duedate){

    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues updatenote = new ContentValues();
    updatenote.put(Col_File_Name, filename);
    updatenote.put(Col_File_Data, filedata);
    updatenote.put(Col_Due_Date, duedate);

    if (rowId >=0)
        db.update(Table_Notepad, updatenote, Col_ID + "=?", new String[] {""+rowId});
    else
        db.insert(Table_Notepad, null, updatenote);
    db.close();
} 
```

然后，如果您正在**创建**一个新笔记，您可以调用：

`updateNote(-1, filename, filedata, duedate);`

如果您要**更新**现有的，则必须传入 ID：

`updateNote(noteRowId, filename, filedata, duedate);`.

**来源**：检查这些[Android 文档](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#update%28java.lang.String,%20android.content.ContentValues,%20java.lang.String,%20java.lang.String%5B%5D%29)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T08:04:55.417

需要在最后一个参数中传递行 id 来更新

```
db.update(Table_Notepad, updatenote, Col_ID + "=?", new String[]{id}); 
```

快乐编码

# c# - 将字符串拆分为字符串数组。？

> ID：14253075
> 
> 赞同：-1
> 
> 时间：2013-01-10T07:50:48.223
> 
> 标签：c#

我在 C# 中执行 sql 查询时遇到问题。当字符串在 IN CLAUSE 中包含超过 1000 个条目时，sql 查询会引发错误。字符串有超过 1000 个子字符串，每个子字符串由“，”分隔。

我想将字符串拆分为字符串数组，每个字符串数组包含 999 个以“，”分隔的字符串。

或者

如何在字符串中找到第 n 次出现的 ','。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:59:11.070

使用实用程序代码将字符串从 SQL 服务器拉到数据集中

```
string strResult = String.Empty;
using (SqlCommand cmd = new SqlCommand())
{
    cmd.Connection = conn;
    cmd.CommandText = strSQL;
    strResult = cmd.ExecuteScalar().ToString();
} 
```

从 SQL Server 获取返回的字符串

拆分'，'上的字符串

```
string[] strResultArr = strResult.Split(','); 
```

然后得到由'，'分隔的第n个字符串（我认为这就是“我如何在字符串中找到'，'的第n个出现的意思。”使用

```
int n = someInt;
string nthEntry = strResultArr[someInt - 1]; 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:02:12.263

您可以使用正则表达式和类的`Index`属性`Match`：

```
// Long string of 2000 elements, seperated by ','
var s = String.Join(",", Enumerable.Range(0,2000).Select (e => e.ToString()));

// find all ',' and use '.Index' property to find the position in the string
// to find the first occurence, n has to be 0, etc. etc.
var nth_position = Regex.Matches(s, ",")[n].Index; 
```

要创建所需大小的字符串数组，您可以拆分字符串并使用 LINQ`GroupBy`对结果进行分区，然后将结果组连接在一起：

```
var result = s.Split(',').Select((x, i) => new {Group = i/1000, Value = x})
                         .GroupBy(item => item.Group, g => g.Value)
                         .Select(g => String.Join(",", g)); 
```

`result`现在包含两个字符串，每个字符串都有 1000 个逗号分隔的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T08:11:13.397

这个怎么样：

```
 int groupSize = 1000;

    string[] parts = s.Split(',');
    int numGroups = parts.Length / groupSize + (parts.Length % groupSize != 0 ? 1 : 0);

    List<string[]> Groups = new List<string[]>();
    for (int i = 0; i < numGroups; i++)
    {
        Groups.Add(parts.Skip(i * groupSize).Take(groupSize).ToArray());
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T08:11:41.063

也许是这样的：

```
string line = "1,2,3,4";
var splitted = line.Split(new[] {','}).Select((x, i) => new {
                                                                Element = x,
                                                                Index = i
                                                            })
                                      .GroupBy(x => x.Index / 1000)
                                      .Select(x => x.Select(y => y.Element).ToList())
                                      .ToList(); 
```

在此之后，您应该只是`String.Join`每个`IList<string>`.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-10T08:03:50.363

```
//initial string of 10000 entries divided by commas
string s = string.Join(", ", Enumerable.Range(0, 10000));
//an array of entries, from the original string
var ss = s.Split(',');
//auxiliary index
int index = 0;

//divide into groups by 1000 entries
var words = ss.GroupBy(w =>
    {
        try
        {
            return index / 1000;
        }
        finally
        {
            ++index;
        }
    })//join groups into "words"
    .Select(g => string.Join(",", g));

//print each word
foreach (var word in words)
    Console.WriteLine(word); 
```

* * *

或者您可能会在字符串中找到索引，然后将其拆分为子字符串：

```
string s = string.Join(", ", Enumerable.Range(0, 100));
int index = 0;

var indeces =
Enumerable.Range(0, s.Length - 1).Where(i =>
    {
        if (s[i] == ',')
        {
            if (index < 9)
                ++index;
            else
            {
                index = 0;
                return true;
            }
        }
        return false;
    }).ToList();

Console.WriteLine(s.Substring(0, indeces[0]));
for (int i = 0; i < indeces.Count - 1; i++)
{
    Console.WriteLine(s.Substring(indeces[i], indeces[i + 1] - indeces[i]));
} 
```

但是，我会考虑一下，是否可以在将条目组合成一个字符串之前使用它们。并且可能会想，如果有可能避免进行需要将该大列表传递到`IN`语句中的查询的必要性。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-01-10T07:52:15.553

```
string foo = "a,b,c";

string [] foos = foo.Split(new char [] {','});

foreach(var item in foos)
{
   Console.WriteLine(item);
} 
```

# android - 如何在android中使用dom解析器解析xml？

> ID：14253076
> 
> 赞同：0
> 
> 时间：2013-01-10T07:50:48.997
> 
> 标签：android

这是我的xml ..我想使用dom解析器获取apikey ...任何帮助将不胜感激..thanx。

```
 <user>
    <company>My company</company>
    <access-level nil="true"/>
    <last-activity-at nil="true"/>
    <api-key>here is my api key </api-key>
    <email-address>myemail@gmail.com</email-address>
    <id type="integer">42569</id>
 </user> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:53:53.640

你可以去这个链接它可以帮助你

```
public Document getDomElement(String xml){
        Document doc = null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {

            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
                is.setCharacterStream(new StringReader(xml));
                doc = db.parse(is);

            } catch (ParserConfigurationException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (SAXException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (IOException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            }
                // return DOM
            return doc;
    } 
```

有关更多信息，请检查链接..

[http://www.androidhive.info/2011/11/android-xml-parsing-tutorial/](http://www.androidhive.info/2011/11/android-xml-parsing-tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:11:46.483

嘿朋友我得到了以下解决方案..

```
try {

        NodeList nodes = doc.getElementsByTagName("user");

        for (int i = 0; i < nodes.getLength(); i++) {
            Element element = (Element) nodes.item(i);

            NodeList assignee_ = element.getElementsByTagName("api-key");
            Element line = (Element) assignee_.item(0);
            statuses=(Utility.getCharacterDataFromElement(line));

        }

    } catch (Exception e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T11:51:35.383

我在我的实际应用程序中使用了解析 xml，这是我的方法

```
 public class XMLParser {
        // constructor
                public XMLParser() {

                }

                /**
                 * Getting XML from URL making HTTP request
                 * @param url string
                 * */
                public String getXmlFromUrl(String url) {
                    String xml = null;

                    try {
                        // defaultHttpClient
                        DefaultHttpClient httpClient = new DefaultHttpClient();
                        HttpPost httpPost = new HttpPost(url);

                        HttpResponse httpResponse = httpClient.execute(httpPost);
                        HttpEntity httpEntity = httpResponse.getEntity();
                        xml = EntityUtils.toString(httpEntity);

                    } catch (UnsupportedEncodingException e) {
                        e.printStackTrace();
                    } catch (ClientProtocolException e) {
                        e.printStackTrace();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                    // return XML
                    return xml;
                }

                /**
                 * Getting XML DOM element
                 * @param XML string
                 * */
                public Document getDomElement(String xml){
                    Document doc = null;
                    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
                    try {

                        DocumentBuilder db = dbf.newDocumentBuilder();

                        InputSource is = new InputSource();
                            is.setCharacterStream(new StringReader(xml));
                            doc = db.parse(is); 

                        } catch (ParserConfigurationException e) {
                            Log.e("Error: ", e.getMessage());
                            return null;
                        } catch (SAXException e) {
                            Log.e("Error: ", e.getMessage());
                            return null;
                        } catch (IOException e) {
                            Log.e("Error: ", e.getMessage());
                            return null;
                        }

                        return doc;
                }

                /** Getting node value
                  * @param elem element
                  */
                 public final String getElementValue( Node elem ) {
                     Node child;
                     if( elem != null){
                         if (elem.hasChildNodes()){
                             for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                                 if( child.getNodeType() == Node.TEXT_NODE  ){
                                     return child.getNodeValue();
                                 }
                             }
                         }
                     }
                     return "";
                 }

                 /**
                  * Getting node value
                  * @param Element node
                  * @param key string
                  * */
                 public String getValue(Element item, String str) {     
                        NodeList n = item.getElementsByTagName(str);        
                        return this.getElementValue(n.item(0));
                    }

    } 
```

在主要课程中，我这样做：

```
ArrayList<HashMap<String, String>> booksList = new ArrayList<HashMap<String, String>>();

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML from URL
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_MAG);
        // looping through all song nodes <song>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
            map.put(KEY_ID, parser.getValue(e, KEY_ID));
            map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
            map.put(KEY_CATG, parser.getValue(e, KEY_CATG));
            //map.put(KEY_AUTOR, "Auteur:"+parser.getValue(e, KEY_AUTOR));
            //map.put(KEY_PRICE, parser.getValue(e, KEY_PRICE)+"DT");
            map.put(KEY_PRICE, parser.getValue(e, KEY_PRICE));

            map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));

            // adding HashList to ArrayList
            booksList.add(map);
        } 
```

这是我的变量：

```
static final String URL = "http://192.168.1.100/vos_magazines1.xml";
static final String KEY_MAG = "item"; // parent node
static final String KEY_ID = "id_mag";
static final String KEY_TITLE = "titre_mag";
static final String KEY_PRICE = "prix_mag";
static final String KEY_CATG = "cat_mag";
static final String KEY_THUMB_URL = "pic_mag"; 
```

希望我的代码提供帮助

# php - 在 Yii 中更改错误“不能为空白”

> ID：14253078
> 
> 赞同：3
> 
> 时间：2013-01-10T07:51:07.983
> 
> 标签：php, error-handling, yii

关于 Yii 中的错误信息处理： 通常 Yii 已经配置了表单的验证，当其中一个必填字段没有填写时，错误信息会显示为

```
"Blablabla cannot be blank." 
```

如何自定义该错误消息？例如，我想改成这样：

```
"Blablabla tidak boleh kosong." 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-10T08:03:51.413

目前尚不清楚您到底要做什么，但是

假设您要使用完全不同的消息：

```
public function rules()
{
    return array(
        array('title, content', 'required',
              'message'=>'Please enter a value for {attribute}.'),
        // ... other rules
    );
} 
```

另一方面，如果您正在寻找翻译，最好的方法是在配置中设置您的语言

```
'language'=>'de',
'components'=>array(
    'coreMessages'=>array(
        'basePath'=>null,
    ),
        ......
), 
```

如果您的语言未定义，请将 framework/messages/en/yii.php 复制到 protected/messages/{yourlanguage}/yii.php 并开始翻译，即使您不想添加消息，请将它们放入 protected/messages/{yourlanguage }/ 并且永远不要在框架中翻译它们，所以你可以毫不费力地更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:04:08.107

我希望这是你要找的：

网址：[Yii 文档](http://www.yiiframework.com/wiki/1/how-to-customize-the-error-message-of-a-validation-rule/)

```
class Post extends CActiveRecord
{
    public function rules()
    {
        return array(
            array('title, content', 'required',
                  'message'=>'Please enter a value for {attribute}.'),
            // ... other rules
        );
    }
} 
```

# java - 无法使用本机捆绑 exe 启动 JavaFX 应用程序

> ID：14253079
> 
> 赞同：8
> 
> 时间：2013-01-10T07:51:09.410
> 
> 标签：java, deployment, ant, javafx-2, bundle

我创建了一个 JavaFX 应用程序，并使用**Ant**创建了它的本机包。当我尝试使用双击创建的包中的 Jar 启动应用程序时，它成功启动了我的应用程序。但是当我尝试双击 MyApplication.exe （比如说）时，它会抛出**JavaFX Launcher Error "Exception while running Application"**。

我比较了这两个 jre，发现有很多缺少的 jar、exe、dll 和一些属性文件。

我有这些环境设置 -

```
JAVA_HOME -- C:\Program Files\Java\jdk1.7.0_10
JREFX_HOME -- C:\Program Files\Oracle\JavaFX 2.2 Runtime
Path contains an entry of C:\Program Files\Java\jdk1.7.0_10\bin 
```

JAVA_HOME 和 JREFX_HOME 在我的 build.xml 中用于获取 ant-javafx.jar 和 jfxrt.jar --

```
${env.JAVA_HOME}/lib/ant-javafx.jar
${env.JREFX_HOME}/lib/jfxrt.jar 
```

我创建捆绑包的步骤是 -

```
<target name="CreatingExe" depends="SignedJar">
            <fx:deploy width="800" height="600" nativeBundles="all" outdir="${OutputPath}" outfile="${app.name}">
                <fx:info title="${app.title}"/>
                    <fx:application name="${app.title}" mainClass="${main.class}"/>
                    <fx:resources>
                        <fx:fileset dir="${OutputPath}" includes="*.jar"/>
                <fx:fileset dir="${WorkingFolder}/temp"/>
            </fx:resources>
         </fx:deploy>
 </target> 
```

build.xml 中还需要什么才能使用 exe 正确启动应用程序？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-04T04:48:04.387

**通过在创建 exe 时将 jre 从“C:\Program Files\Java\jdk_version\jre”复制**到**\bundles\MyApplication\runtime\jre**来解决不启动 JavaFx exe 的问题 -

```
<target name="CopyJre" depends="CreatingExe"> 
 <delete dir="${app_path}/bundles/MyApplication/runtime/jre"/>
 <mkdir dir="${app_path}/bundles/MyApplication/runtime/jre"/>
 <copy todir=${app_path}/bundles/MyApplication/runtime/jre">
   <fileset dir="${env.JAVA_HOME}/jre" />
 </copy>
</target> 
```

JAVA_HOME = C:\Program Files\Java\jdk_version

谢谢

# android - android任务杀手应用程序没有完全杀死我的应用程序

> ID：14253081
> 
> 赞同：0
> 
> 时间：2013-01-10T07:51:22.837
> 
> 标签：android, taskkill

我有一个我尝试使用任务杀手应用程序强制关闭它的应用程序。但是当我打开应用程序时，它会在我杀死它之前保持在同一个活动中。它没有返回到主要活动并再次通过 onCreate。我希望的场景是当用户杀死应用程序时，它会在用户打开它时再次运行 onCreate，但不会停留在用户之前使用的最后一个活动。任何想法或评论是什么原因造成的？当我使用任务杀手应用程序（Advance Task Killer）关闭其他应用程序时，它没有问题并关闭整个应用程序。但在这个应用程序中，结果与我预期的有点不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:58:49.700

Android 可以很好地管理资源，但我不需要 YouTube、Amazon App Store、GetJar、1MobileMarket、Fruit Ninja 和 Mario Kart 一直在运行以消耗电池。在 Gingerbread Android 之后不需要自动任务杀手，但是手动任务杀手仍然非常有用。例如，我哥哥的平板电脑（冰淇淋三明治），他一直抱怨充电时间不长（他圣诞节买的）。我安装了 ATK，它说有 62 个应用程序正在运行。有些，比如 Lookout、EMail，甚至 Facebook，我知道在后台运行，所以它们被 Task Killer 设置为忽略，但是有 8 个应用程序没有被忽略，因为无法理解的原因重新启动。

# cordova - android手机上的jquery mobile中的按钮角不清晰

> ID：14253084
> 
> 赞同：0
> 
> 时间：2013-01-10T07:51:31.187
> 
> 标签：cordova, jquery-mobile, cordova-2.0.0

我在标题部分有两个按钮。两个按钮都有圆角。但是圆角不是很清楚我的意思是角在 android 手机上显示为虚线角。我使用的是 JQuery Mobile 1.2.0 和 Cordova 2.0.0 和 Android版本是 2.3.4。他们有什么解决方案吗？请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:58:19.170

这可能是设备分辨率问题

# c# - 关于带逗号的双数的奇怪问题

> ID：14253088
> 
> 赞同：0
> 
> 时间：2013-01-10T07:51:51.140
> 
> 标签：c#, ajax

我在数据库中有一个名为“loss”的字段，它的类型是浮点数。

这是我将其保存在数据库中的方法：

```
[HttpPost]
public int SaveLoss(float loss)
{
   var t = (from x in db.tblTest
            where x.id == 8
            select x).First();
   t.loss = loss; //also tried t.loss = loss / 1;
   db.SaveChanges(); //entity framework
 } 
```

这就是我一直工作的方式，并且在所有其他表格中都可以正常工作。

我通过文本框输入损失，这里是 Ajax 调用：

```
$.ajax({
    type: "POST",
    url: "/Test/SaveLoss",
    data: {
        loss: parseFloat($('#myTextbox').val().replace(',', '.'))
    }
    .... 
```

如果在文本框中输入 66.55，一切正常。如果在文本框中输入 66,55，则存储在 db 中的值为 6655。此问题不会发生在我的计算机上。当我在服务器上发布应用程序时，它会发生。为什么会发生这个烦人的问题以及如何解决？

Fiddler 说 66.55 是 SaveLoss 的输入参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T08:24:02.963

看起来浏览器或服务器具有不同的数字格式，也许它运行在“，”用作小数分隔符和“。”的文化中。作为千位分隔符。

您可以在启动服务器之后或运行数据库查询之前尝试设置`Thread.CurrentThread.CurrentCulture`为。`CultureInfo.InvariantCulture`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:23:13.133

如果您首先使用数据库生成了 EF 映射。您应该关注 EntityFramework..

EF 将 SQL 列类型映射`float`为 C# 类型`double`而不是浮点数

请参阅：[实体框架类型的 SqlClient](http://msdn.microsoft.com/en-us/library/bb896344%28v=vs.100%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-04T05:37:44.720

将其作为字符串传递并在实体框架中保存时尝试这样：

```
var amount = decimal.Parse(InvoiceAmount, NumberStyles.Any); 
```

# javascript - 使用父窗口的子窗口的java脚本隐藏和显示div标签

> ID：14253089
> 
> 赞同：0
> 
> 时间：2013-01-10T07:51:54.710
> 
> 标签：javascript

我想从父窗口隐藏并显示我的jsp页面的div标签，`window.open()`如果我使用它而不是获取子窗口的引用然后我执行子窗口的java脚本函数，我不想使用open这个解决方案导致我问题原因窗口首先加载，然后执行 java 脚本函数需要一些时间来隐藏 div 标签或一些时间它会显示每个 div 标签，所以请告诉我其他解决方案或操纵我的逻辑，以便我可以显示和隐藏父窗口中的 div 标签非常顺利。我的要求不是打开一个新窗口，而是打开一个新选项卡，其中所有 div 标签都存在，根据主页按钮单击 div 标签显示

这是我的java脚本逻辑

```
function showDiv(id) {

        var div1 = document.getElementById('div1');

        var div2 = document.getElementById('div2');
        var div3 = document.getElementById('div3');
        // Check what the value of the button pressed and displays the correct div
        if (id == 1)
            div1.style.display = 'block';
        if (id == 2) {
            div2.style.display = 'block';
        }

        if (id == 3) {
            div3.style.display = 'block';
        }
    } 
```

这是子jsp

```
 <script type="text/javascript">
    function showDiv(id) {

        var div1 = document.getElementById('div1');

        var div2 = document.getElementById('div2');
        var div3 = document.getElementById('div3');
        // Check what the value of the button pressed and displays the correct div
        if (id == 1)
            div1.style.display = 'block';
        if (id == 2) {
            div2.style.display = 'block';
        }

        if (id == 3) {
            div3.style.display = 'block';
        }
    }
    function doAllThese(url) {

        if (url == 'FindById') {
            document.form.action = "/EmployeeWebSpring/search/FindById";
            self.close();
        }
        if (url == 'FindByName') {
            document.form.action = "/EmployeeWebSpring/search/FindByName";
        }
        if (url == 'FindByDeptNO') {
            document.form.action = "/EmployeeWebSpring/search/FindByDeptNO";
        }
    }
</script>
</head>
<body>
    <form:form name="form" commandName="employeeForm" method="post">

        <div id="div1" style="display: block;">
            Employee_ID:
            <form:input path="employeeNumber" />
            <input type="submit" name="method" value="FindById" id="FindById"
                onclick="doAllThese(this.value)" />
        </div>
        <div id="div2" style="display: none;">

            Employee_Name
            <form:input path="firstName" />
            <input type="submit" name="method" value="FindByName"
                onclick="doAllThese(this.value)" /> <br />
            <font size=3>For Searching the employees by<b>Employee
                    Name</b><br />you can use % match all the records with the given
                pattern
            </font><br /> <font size="2"> <i>e.g <b> for search by</b>EmployeeName<br />
                    matches alL the employees whose name starts with character <b>S</b></i></font>
        </div>

        <div id="div3" style="display: none;">
            Employee_Name
            <form:input path="departmentId" />
            <input type="submit" name="method" value="FindByDeptNO"
                onclick="doAllThese(this.value)" />
        </div>

    </form:form>
</body>
</html> 
```

这是我的 home.jsp

```
 <%@page import="java.util.List"%>

<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link href="../css/styles.css" rel="stylesheet" type="text/css">
<title>Home</title>
<script type="text/javascript">
    function LoadByName(windowHeight, windowWidth) {
        var centerWidth = (window.screen.width - windowWidth) / 2;
        var centerHeight = (window.screen.height - windowHeight) / 2;
        var newWindow = window.open('../search/searchPage', 'mywindow',
                'resizable=0,width=' + windowWidth + ',height=' + windowHeight
                        + ',left=' + centerWidth + ',top=' + centerHeight);
        alert("Name window");
        newWindow.showDiv(2);

    }
    function LoadById(windowHeight, windowWidth) {
        var centerWidth = (window.screen.width - windowWidth) / 2;
        var centerHeight = (window.screen.height - windowHeight) / 2;
        var newWindow = window.open('../search/searchPage', 'mywindow',
                'resizable=0,width=' + windowWidth + ',height=' + windowHeight
                        + ',left=' + centerWidth + ',top=' + centerHeight);
        alert(newWindow);
        newWindow.showDiv(1);

    }

    function LoadByDeptNo(windowHeight, windowWidth)
    {
        var centerWidth = (window.screen.width - windowWidth) / 2;
        var centerHeight = (window.screen.height - windowHeight) / 2;
        var newWindow = window.open('../search/searchPage', 'mywindow',
                'resizable=0,width=' + windowWidth + ',height=' + windowHeight
                        + ',left=' + centerWidth + ',top=' + centerHeight);
        alert(newWindow);
        newWindow.showDiv(3);
    }

</script>
</head>
<jsp:include page="Header.jsp"/>
<p>&nbsp;</p>
<br>
<br>

<body>

</body>
</html> 
```

这是 header.jsp

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<link href="../css/styles.css" rel="stylesheet" type="text/css">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

</head>
<body>
    <img src="../images/Header.png" width="1250" height="120" />
    <div id='cssmenu'>
        <ul>
            <li class='active '><a href='index.html'><span>Home</span></a></li>
            <li class='has-sub '><a href='#'><span>NewEntity</span></a>
                <ul>
                    <li><a href='#'><span>Department</span></a></li>
                    <li><a href='#'><span>Employee</span></a></li>
                    <li><a href='#'><span>Project</span></a></li>
                </ul></li>
            <li class='has-sub '><a href='#'><span>FindEmployee</span></a>
                <ul>
                    <li><a href="javascript:LoadById(250,500)"><span>FindEmployeeById</span></a></li>
                    <li><a href="javascript:LoadByName(250,500)"><span>FindEmployeeByName</span></a></li>
                    <li><a href=' javascript:LoadByDeptNo(250,250)'><span>FindByDepartmentId</span></a></li>
                    <li><a href="/EmployeeWebSpring/search/GetAllEmployee"><span>GetAllEmployee</span></a></li>
                </ul></li>

            <li class='has-sub '><a href='#'><span>FindDepartment</span></a>
                <ul>
                    <li><a href="javascript:department()"><span>FindDepartmentById</span></a></li>
                    <li><a href="javascript:LoadByName(250,500)"><span>FindDepartmentByName</span></a></li>
                    <li><a href="../department/GetAllDepartment"><span>GetAllDepartment</span></a></li>
                </ul></li>
            <li><a href='#'><span>About</span></a></li>
            <li><a href='#'><span>Contact</span></a></li>
        </ul>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:00:18.620

目前，每次调用or函数时，您的代码都会*重新加载页面，因为它正在这样做：*`LoadById``LoadByName`

```
var newWindow = window.open('../search/searchPage', 'mywindow', ...); 
```

相反，让您的函数共享*变量*`newWindow`并且仅调用`window.open`if `newWindow`is `null`，如下所示：

```
var newWindow = null;

function LoadByName(windowHeight, windowWidth) {
    if (!newWindow) {
        var centerWidth = (window.screen.width - windowWidth) / 2;
        var centerHeight = (window.screen.height - windowHeight) / 2;
        newWindow = window.open('../search/searchPage', 'mywindow',
                'resizable=0,width=' + windowWidth + ',height=' + windowHeight
                        + ',left=' + centerWidth + ',top=' + centerHeight);
        alert("Name window");
    }
    newWindow.showDiv(2);

}
function LoadById(windowHeight, windowWidth) {
    if (!newWindow) {
        var centerWidth = (window.screen.width - windowWidth) / 2;
        var centerHeight = (window.screen.height - windowHeight) / 2;
        newWindow = window.open('../search/searchPage', 'mywindow',
                'resizable=0,width=' + windowWidth + ',height=' + windowHeight;
    }
} 
```

然后您可以根据需要调用`newWindow.showDiv`和`newWindow.hideDev`，而无需每次都重新加载窗口内容。不幸的是，对于您当前的代码（由旧式`javascript:`链接调用的处理程序），`newWindow`最终成为一个全局变量（就像您的函数一样）。您可能会考虑以更现代的方式连接这些处理程序，或者至少将自己限制为*一个*全局变量（其他事物是其属性的对象）。

当然，如果您*想*每次都重新加载窗口内容（刷新或更改搜索），那么为确保只显示正确的 div，请将查询字符串参数传递给 jsp 并让 jsp 输出具有适当可见性的 div . 或者您只能加载一次窗口，但用于`ajax`更新/更改搜索结果。

# maven - 如何在java中创建多个目录？

> ID：14253095
> 
> 赞同：0
> 
> 时间：2013-01-10T07:52:45.637
> 
> 标签：maven, maven-2

我在 src 文件夹下有 2 个单独的包。我想知道如何制作这个项目？

```
src 
```

-- com.firstpackage -- com.secondPackage

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:58:51.023

只要它们在一个 src 文件夹中，这应该不是问题。您的典型 Maven 项目将如下所示：

```
my-app
|-- pom.xml
`-- src
    |-- main
    |   `-- java
    |       `-- com
    |           `-- mycompany
    |               `-- app
    |                   `-- App.java
    `-- test
        `-- java
            `-- com
                `-- mycompany
                    `-- app
                        `-- AppTest.java 
```

因此，即使您在 src/ 中有许多包/文件夹，也应该没问题。

[这里](http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html)有一个很好的指南，如何在 5 分钟内建立一个 maven 项目。

# ruby-on-rails-3 - 发送消息所需的发件人（返回路径、发件人或发件人）

> ID：14253097
> 
> 赞同：4
> 
> 时间：2013-01-10T07:52:55.337
> 
> 标签：ruby-on-rails-3, actionmailer, delayed-job

我正在尝试使用rails 中的delayed_job gem 从action mailer 发送电子邮件。我正在从 after_create 回调中调用操作邮件程序的方法

在演示模型中

```
after_create :send_mail
def send_mail
  DemoMailer.to_client( self).deliver
end 
```

在 demo_mailer

```
def to_client( demo)
  @demo = demo
  mail(:to => demo.email, :subject => "Confirmation")
end
handle_asynchronously :to_client 
```

它显示一个错误

```
ArgumentError in DemosController#create

A sender (Return-Path, Sender or From) required to send a message 
```

然后我改变

```
def send_mail
  DemoMailer.to_client( self).deliver
end 
```

至

```
def send_mail
  DemoMailer.delay.to_client( self)
end 
```

它没有显示任何错误，但我也没有收到任何邮件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:07:45.007

正如错误所示：您缺少`return-path`,`sender`或`from`字段。设置`from`字段并不难：

```
mail(:to => demo.email, :from => 'webmaster@your-domain.com', :subject => "Confirmation") 
```

有关详细信息，请参阅[ActionMailer#mail 文档](http://api.rubyonrails.org/classes/ActionMailer/Base.html#method-i-mail)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-05T14:33:55.113

如果您设置`from`在顶部：

```
class FoobarMailer < ActionMailer::Base
  default from: SomeClass.email_variable
  #... 
```

你可以试试这个：

```
class FoobarMailer < ActionMailer::Base
  default from: -> { SomeClass.email_variable }
  #... 
```

* * *

或者像@Veger 提到的那样发送它：

`mail(:to => demo.email, :from => 'webmaster@your-domain.com', :subject => "Confirmation")`

# c - linux child recvfrom 无法正常工作

> ID：14253098
> 
> 赞同：0
> 
> 时间：2013-01-10T07:53:02.150
> 
> 标签：c, fork, arp

我正在制作一堆子进程，每个孩子都必须为每个孩子制作一个具有不同 IP 的 arp 包，如果该机器打开，则发送包并从具有相应 IP 的机器接收包。问题是我正确发送包（我用wireshark检查）但我不知道为什么，我所有的子进程都收到相同的包。

例如我有 192.167.0.1,88.4.3.2 和 100.20.3.20。只有第一个 IP 是好的。我有 3 个子进程，每个子进程都发送一个请求并等待 8000000 纳秒的响应。唯一的响应来自带有第一个IP（因为是正确的）但我不知道为什么所有的孩子都会收到这个包裹。有什么建议吗？这是一段代码。我确信它可以正确发送包，因为我用wireshark对其进行了测试。

```
 if (sendto(sock,&req,sizeof(req),0,(struct sockaddr*)&addr,sizeof(addr))==-1) {
      printf("%s",strerror(errno));
    }
    struct sockaddr_ll linkLayerAddr;
    char buf[32];
    int sockaddr_len=sizeof(linkLayerAddr);
    memset(&linkLayerAddr,0,sizeof(linkLayerAddr));
    fcntl(sock,F_SETFL,O_NONBLOCK);
    nanosleep(&time1,NULL);

     if(recvfrom(sock,buf,sizeof(buf),0,(struct sockaddr*)&linkLayerAddr,&sockaddr_len)==-1){

    info.status=0; 
    }
    else{
    info.status=1; 
```

}

我用信息结构来检查一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:18:01.257

ARP 数据包不包含用于描述目标应用程序的端口号或类似 ID。因此，所有收到的 ARP 包都被传递到所有 ARP 套接字。

在您的情况下：线程应该只选择想要的数据包并忽略其他数据包。

编辑：您可以循环直到收到想要的 ARP 响应数据包。这边走：

```
while ( !time_out )
{
    <receive next ARP packet>

    if ( arph->ar_tip == wanted_ip )
    {
        // This is correct one. Handle it and break out from the loop.
        <process the package>
        break;
    }
    else
    {
        // This is not for me, ignore it silently.
    }    
} 
```

# c# - 在 OOP 中覆盖方法与分配方法委托/事件

> ID：14253099
> 
> 赞同：12
> 
> 时间：2013-01-10T07:53:05.663
> 
> 标签：c#, oop, design-patterns, abstract-class, first-class-functions

这是一个奇怪的 oop 问题。我想创建一组对象（在设计时已知），每个对象都有与之关联的某些功能。我可以通过提供可以包含“委托”的对象属性来做到这一点：

```
public class StateTransition {
    Func<bool> Condition { get; set; }
    Action ActionToTake { get; set; }
    Func<bool> VerifyActionWorked { get; set; }
}

StateTransition foo = new StateTransition {
    Condition = () => {//...}
    // etc
}; 
```

或者，我可以使用一个抽象类并为我要创建的每个对象实现它：

```
public abstract class StateTransition {
    public abstract bool Condition();
    public abstract void ActionToTake();
    public abstract bool VerifyActionWorked();
}

class Foo : StateTransition {
    public override bool Condition() {//...}
    // etc
}

Foo f = new Foo(); 
```

我意识到这两种方法的实际后果（在设计时创建与运行时创建）是完全不同的。

如何选择适合我的应用的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T08:05:57.670

第一种方法看起来比原始委托更适合*事件，但是......无论如何。*

它们之间的关键因素是：**谁控制着发生的事情**？

如果调用者可以在那里合法地做任何事情，那么事件方法就可以了。毕竟，系统不会强迫您将 a 子类化`Button`，以添加单击它时发生的事情（尽管您*可以*这样做）。

如果“可能发生的事情”得到很好的控制，并且您不希望*每个调用者都*做不同的事情，那么子类方法更合适。这也避免了每个调用者**都**必须告诉它要做什么的需要，而“要做的事情”实际上可能是非常少的选项。基类型方法*还*提供了控制子类的能力，例如通过仅`internal`在基类上具有构造函数（这样只有在同一程序集中或通过 标记的程序集中的类型`[InternalsVisibleTo(...)]`才能对其进行子类化）。

您还可以通过以下方式组合两者（覆盖与事件）：

```
public class StateTransition {
    public event Func<bool> Condition;
    protected virtual bool OnCondition() {
        var handler = Condition;
        return handler == null ? false : handler();
    }
    public event Action ActionToTake;
    protected virtual void OnActionToTake() {
        var handler = ActionToTake;
        if(handler != null) handler();
    }
    public event Func<bool> VerifyActionWorked;
    protected virtual bool OnVerifyActionWorked() {
        var handler = VerifyActionWorked;
        return handler == null ? true : handler();
    }
    // TODO: think about default return values
} 
```

委托/事件方法要考虑的另一件事是：*如果委托是，你会怎么做`null`*？如果您*需要全部 3*，那么在构造函数中*要求*全部 3 将是一个好主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T08:10:02.267

如果您：

*   想要动态创建对象，即根据某些条件为每个方法选择实现。
*   想要在对象的生命周期内更改实现。

对于其他情况，我会推荐面向对象的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-08T23:10:35.850

**如何选择适合我的应用的方法？**

您的应用程序是否需要定义具有其他不同属性或其他不同方法的新转换对象？然后制作新的子类，覆盖方法（“多态性”）会更好。

或者。

您的应用程序是否需要定义只改变方法行为的转换对象？那么方法委托或方法事件会更好。

**概括**

当您的应用程序需要为不同的子类添加不同的功能（例如属性或方法）时，覆盖方法（“多态性”）会更好，而不仅仅是更改方法的实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T08:06:38.093

如果您说您的对象*在设计时已知*，那么听起来您不需要动态更改对象的行为（*在运行时*）。所以我认为你没有理由使用“委托”方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T11:00:08.097

*   解决方案 1 有更多的活动部分，这允许更细粒度的关注点分离。您可以让一个对象决定`Condition`给定的`StateTransition`应该是什么，另一个对象定义`ActionToTake`，等等。或者您可以让一个对象决定所有这些，但基于不同的标准。大多数时候不是最有用的方法 IMO - 特别是考虑到轻微的额外复杂性成本。

*   在解决方案 2 中，每个`StateTransition`导数都是一个有凝聚力的整体，它检查条件的方式不能与它执行操作或验证它的方式分开。

这两种解决方案都可用于实现控制反转——换句话说，它们都允许您说`StateTransition`' 的直接消费者将无法控制`StateTransition`将使用哪种风格，而是将决定委托给外部对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-10T08:02:55.527

前提是这更像是一种观点，而不是坚如磐石的答案……

如果您只有一个委托或抽象/虚拟方法，我认为这两者或多或少是等价的。毕竟，您可以将委托视为一种方便的快捷方式，以避免为仅一种方法创建实现接口。

在这种情况下，如果您有三种方法，那么基类方法将是最实用的。

为了使这两件事完全等效，您可以使用具有空虚方法的基非抽象类，这样如果派生类不覆盖它，则与具有空委托属性相同。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-08T22:11:36.747

> 如何选择适合我的应用的方法？

具有委托的方法使代码更具功能性，因为它从*继承*和*多态*等经典`Object Oriented Programming`技术转变为*传递函数*和使用*闭包*等技术。**`Functional Programming`**

 ***我倾向于在任何地方使用代表方法，因为

1.  我更喜欢*组合而不是继承*

2.  我发现委托的方法需要更少的代码来编写

例如，可以使用标准初始化机制`StateTransition`在 5 行代码中从*委托*和*闭包中创建一个具体实例：*`.NET`

```
dim PizzaTransition as new StateTransition with {
    .Condition = function() Pizza.Baked,
    .ActionToTake = sub() Chef.Move(Pizza, Plate),
    .VerifyActionWorked = function() Plate.Contains(Pizza)
} 
```

3.  *我发现围绕一个类构建Fluent API*很容易，其中一组附加方法实现为*扩展方法*或在类内部。

例如，如果方法、、和`Create`被`When`添加到类中：`Do``Verify``StateTransition`

```
public class StateTransition
    public property Condition as func(of boolean)
    public property ActionToTake as Action
    public property VerifyActionWorked as func(of boolean)

    public shared function Create() as StateTransition
        return new StateTransition
    end function

    public function When(Condition as func(of boolean)) as StateTransition
        me.Condition = Condition
        return me
    end function

    public function Do(Action as Action) as StateTransition
        me.ActionToTake = Action
        return me
    end function

    public function Verify(Verify as func(of boolean)) as StateTransition
        me.VerifyActionWorked = Check
        return me
    end function
end class 
```

然后*方法链*也可用于创建具体`StateTransition`实例：

```
dim PizzaTransition = StateTransition.Create.
    When(function() Pizza.Baked).
    Do(sub() Chef.Move(Pizza, Plate).
    Verify(function() Plate.Contains(Pizza)) 
```***

# jquery-ui - Jquery UI datepicker setdate 不适用于一个 datepicker

> ID：14253104
> 
> 赞同：0
> 
> 时间：2013-01-10T07:53:19.597
> 
> 标签：jquery-ui

我有 2 个日期选择器，一个用于 dateend，另一个用于 datestart。当您单击它时，我在 html 中有一个按钮，将出现一个对话框表单。然后是询问数据并以模态形式填充元素。模态表单具有日期结束和日期开始。但似乎 datestart 是唯一一个填充的。请帮忙。我真的不知道怎么了，卡了4天多

```
<script type="text/javascript">
$(document).ready(function () {
    $("#dialog-form").dialog({
        autoOpen: false,
        show: "drop", //explode
        hide: "clip",
        autoResize: true,
        height: '500',
        width: 'auto',
        draggable: false,
        modal: true,
        resizable: false
    });
    $('input[type="button"]').click(function () {
        var buttonHolder = $('input[type="button"]');
        $("#dialog-form").dialog("open");
        $("#timeStart").timepicker({});
        $("#dateStart").datepicker({
            defaultDate: "+1w",
            dateFormat: "yy/mm/d",
            changeMonth: true,
            changeYear: true,
            numberOfMonths: 3,
            minDate: new Date(), // min date should be date of today or the date which he set as startdate
            onClose: function () { //selectedDate should be value. i think. problem lies in the selected.
                $("#dateEnd").datepicker("option", "minDate", $(this).val());
            }
        });
        $("#dateEnd").datepicker({
            defaultDate: "+1w",
            dateFormat: "yy/mm/d",
            changeMonth: true,
            changeYear: true,
            numberOfMonths: 3,
            onClose: function () {
                $("#dateStart").datepicker("option", "maxDate", $(this).val()); //$(this).val()
            }
        });
        $.ajax({
            type: "POST",
            dataType: "json",
            url: "<?php echo site_url('ajax/getEventOfModal'); ?>",
            data: {
                id: $(this).attr('id'),
                username: "<?php echo $this->session->userdata('email'); ?>"
            },
            success: function (data) {
                $("#event_id").attr('value', buttonHolder.attr('id'));
                $("#event_name").attr('value', data['name']);
                $("#event_loc").text(data['loc']);
                $("#event_desc").text(data['desc']);
                $("#timeStart").timepicker('setTime', data['timeStart']);
                var queryDate = data['dateStart'],
                    dateParts = queryDate.match(/(\d+)/g)
                    realDate = new Date(dateParts[0], dateParts[1] - 1, dateParts[2]); // months are 0-based!
                $('#dateStart').datepicker('setDate', realDate);
                var queryDate2 = data['dateEnd'],
                    dateParts2 = queryDate2.match(/(\d+)/g)
                    realDate2 = new Date(dateParts2[0], dateParts2[1] - 1, dateParts2[2]); // months are 0-based!
                $('#dateEnd').datepicker('setDate', realDate2);
            }
        });
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:12:50.463

尝试`defaultdate`从 jquery datepicker 中删除。

# database - 数据库：向现有行添加值

> ID：14253112
> 
> 赞同：0
> 
> 时间：2013-01-10T07:53:44.923
> 
> 标签：database, numbers, row, add

嗨，我对编码等很陌生。我有一个数据库，其中一行和一个值为 40。我还有一个 php，当我输入一个数字时，它将作为新行添加到数据库中。有什么办法可以将此号码添加到现有号码 40 中？示例：如果我添加 60，则新值将是 100。php 中是否有任何代码告诉数据库添加到现有行？现在我在php中得到了这个代码`$sql = "insert into $DB_Table (score) values('$scoretext');";`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:57:24.253

那么你可以做到这一点的方法是更新现有的行。

```
UPDATE table_name
SET column1=value, column2=value2,...
WHERE some_column=some_value 
```

希望有帮助..

**编辑**

```
$sql = "UPDATE score SET columname= ('$scoretext') WHERE id/columname = '$id' or xyz"; 
```

我的语法不是 100% 正确，但你应该明白了。您应该将其存储在现有查询中。你在行中有 id 列，所以你知道它是哪一行。

# jekyll - win7 运行 jekyll --server 失败

> ID：14253116
> 
> 赞同：2
> 
> 时间：2013-01-10T07:53:56.123
> 
> 标签：jekyll, pygments

当我运行 jekyll --server 时，它构建失败，并显示：

> [2013-01-10 15:34:52] 重新生成：1 个文件已更改
> **Liquid 异常：无法获取标题。在 2013-01-05-vim.markdown**
> C:/Ruby193/lib/ruby/gems/1.9.1/gems/pygments.rb-0.3.7/lib/pygments/popen.rb:357: 在get_header' C: /Ruby193/lib/ruby/gems/1.9.1/gems/pygments.rb-0.3.7/lib/pygments/popen.rb:235：超时' C： /Ruby193/lib/ruby/gems/1.9.1 /gems/pygments.rb-0.3.7/lib/pygments/popen.rb:209: ...`rescue in get_header' C:/Ruby193/lib/ruby/gems/1.9.1/gems/pygments.rb-0.3.7/lib/pygments/popen.rb:338:
> in`
> `block in mentos'
> C:/Ruby193/lib/ruby/1.9.1/timeout.rb:68:in`

我使用 pygments 来突出显示我的代码..

帮我 ！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T00:00:09.317

检查您的 python 版本是否为 2.X。pygments.rb gem 不支持 Python 3。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-21T02:50:10.800

这让我很头疼......：自 2011 年以来，据报道，“pygments.rb”似乎可以与 Python 3 一起使用，根据官方 Jekyll 安装文档中提到的 Windows 的 Jekyll 安装指南“ [http://www.madhur. co.in/blog/2011/09/01/runningjekyllwindows.html](http://www.madhur.co.in/blog/2011/09/01/runningjekyllwindows.html) ”（今天更令人困惑的是，域名已过期......）

所以是的，你如何安装 Jekyll，顺便说一下，它在其 github 页面上被描述为*Ruby静态网站生成器 - 当它：*

1.  在作为 Ruby 事物时需要 Python
2.  建议 Python 3 让你一个人去弄清楚它只适用于 Python 2
3.  2年后什么也没说

好吧，你根本不知道。

# php - 如何取消设置帖子数组？

> ID：14253119
> 
> 赞同：0
> 
> 时间：2013-01-10T07:54:39.130
> 
> 标签：php, forms, post, form-submit

每次我刷新页面时，我都会得到存储在 post 数组中的相同值。我只想在提交后和刷新无回显结果后执行回显语句..

```
<?php
if(isset($_POST['submit'])) 
{ 
$name = $_POST['name'];
echo "User name : <b> $name </b>";

}
?>
<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
<input type="text" name="name"><br>
<input type="submit" name="submit" value="Submit Form"><br>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:03:25.830

无论使用 GET 还是 POST 方法，您都无法仅从一个表单检查它是刷新还是首次提交。

为确保一条消息，您需要：

一个。处理请求后将用户重定向到其他地方。

```
if(isset($_POST['submit'])) {
  // process data
  header("Location: new-url");
} 
```

并在另一个 URL 上显示消息。

湾。设置一个 cookie / session 变量，它告诉你表单已经被处理。

```
if(isset($_POST['submit']) && !isset($_SESSION['form_processed'])) {
  $_SESSION['form_processed'] = true;
} 
```

第二种方法将杀死您的表单，直到用户关闭浏览器，因此您应该做一些更复杂的事情 - 比如在表单中存储另一个隐藏字段，并将其存储在会话中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:00:37.907

如果您提交表单然后刷新结果页面，浏览器将重新发布表单（通常会先提示）。这就是为什么 POST 数据总是存在的原因。

一个选项是存储一个会话变量并将其发送到表单中，然后检查它是否在表单处理代码中匹配 - 以确定它是否是重新发布。

在表格内：

```
<input type="hidden" name="time" value="<?php echo $time; ?>" /> 
```

在 PHP 中：

```
session_start();

if(isset($_POST['submit'])) 
{
    if(isset($_SESSION['time']) && $_SESSION['time'] == $_POST['time'])
    {
        echo "User name : <b> $name </b>";
    }
}

$time = $_SESSION['time'] = time(); 
```

另一种选择是在处理发布数据后重定向：

```
if(isset($_POST['submit'])) 
{
    ...
    ...

    header('Location: ' . basename($_SERVER['PHP_SELF']));
    exit();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T08:10:24.030

您需要保持一个状态是否`$name`已经显示。最简单的方法可能是在浏览器 cookie 中维护该状态。

```
<?php
$nonce = $_COOKIE['nonce'];
$new_nonce = mt_rand();
setcookie('nonce', $new_nonce);
if(isset($_POST['submit']) && $_POST['nonce'] == $nonce) 
{ 
    $name = $_POST['name'];
    echo "User name : <b> $name </b>";
}
?>
<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
<input type="hidden" name="nonce" value="<?php echo $new_nonce ?>">
<input type="text" name="name"><br>
<input type="submit" name="submit" value="Submit Form"><br>
</form> 
```

# 问题

*   您正在用陈旧的变量污染用户“会话”。
*   如果您的用户打开多个窗口（或选项卡）到同一页面，这将中断。要解决此问题，您必须将`nonce`cookie 更改为 nonce 数组，并相应地更新它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-10T07:57:39.197

如果您想在提交后刷新页面使用

```
<form method="get" 
```

确定您的表单是否没有很多数据并且还需要使用 $_GET 而不是 $_POST 变量:) 对您来说是正确的方法，但是这个逻辑不好，需要重构这个脚本：

```
<?php
if(isset($_POST['submit'])) 
{ 
$name = $_POST['name'];
echo "User name : <b> $name </b>";
unset($_POST['submit']);
}
?>
<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
<input type="text" name="name"><br>
<input type="submit" name="submit" value="Submit Form"><br>
</form> 
```

# java - 'level.tick()' 和 'Level.tick(level)' 之间的区别

> ID：14253121
> 
> 赞同：2
> 
> 时间：2013-01-10T07:54:50.800
> 
> 标签：java

我是业余时间的 Java 开发人员，我只是想知道两者之间有什么区别

```
level.tick() 
```

和

```
Level.tick(level) 
```

（'Level' 是类的名称，'level' 是该类的对象）

我知道，由于 java 通过引用对象来工作，因此从将级别作为参数传递的类调用静态函数肯定与“level.tick()”具有相同的效果

（请注意，这不适用于我正在从事的项目，我只是想问一下））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:57:13.753

第一个方法将调用不接受任何参数的 Level 类的非静态函数。第二种方法将调用 Level 类的静态函数，该函数需要一个 Level 类型的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:08:59.573

两者都可以实现相同的功能。最常见的是使用第一个*实例方法*声明。但是，如果 level can be `null`，那么您需要在该调用之前添加一个检查。第二个*静态方法*声明可以包括这种检查并减少您必须编写的样板文件。

```
public class Level {
  public void tick();
  public static void tick(Level level);
}

level.tick(); // Safe to call if level can't be null
Level.tick(level); // Safe to call in any case 
```

设计应用程序以使变量值永远不会或仅在特殊情况下`null`可以使您免于很多麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T08:04:07.803

如果我理解正确，

> 我知道，由于 java 通过引用对象来工作，因此从将级别作为参数传递的类调用静态函数肯定与“level.tick()”具有相同的效果

```
Level.tick(level) 
```

不会自动转换为

```
level.tick() 
```

这只有在你有一个以第二种形式作为主体的静态函数时才有效。

# javascript - 如何选择带有可变文本的下拉列表 ListItem 或像文本 Jquery 我做了所有技术但仍未解决？？？

> ID：14253123
> 
> 赞同：0
> 
> 时间：2013-01-10T07:54:58.100
> 
> 标签：javascript, jquery, asp.net, html-select

我正在尝试选择带有文本变量的下拉列表列表项或类似文本我的 jquery 甚至没有选择与我的代码在下面的列表项中相同的文本，

```
<asp:DropDownList ID="DDL_State" runat="server" Width="100px" Height="16px">
                    <asp:ListItem Text="" Value="0">State</asp:ListItem>
                    <asp:ListItem Text="Alabama" Value="1">Alabama AL</asp:ListItem>
                    <asp:ListItem Text="Alaska" Value="2">Alaska AK</asp:ListItem>
                    <asp:ListItem Text="Arizona" Value="3">Arizona AZ</asp:ListItem>
                    <asp:ListItem Text="Arkansas" Value="4">Arkansas AR</asp:ListItem>
 </asp:DropDownList>

var state='Alaska';
$("select[id$=ddlDropDownList]").val('Alaska');
        $("#<%=DDL_State.ClientID %> option[text='Alaska']").attr("selected","selected");
        $("#DDL_State").val(state);
        $("#DDL_State option:contains(" + state + ")").attr('selected', 'selected');
        $('#<%=DDL_State.ClientID%>').val(state); 
```

它甚至没有给我任何错误，但可以确定 jquery 正确调用

希望您的建议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:02:15.393

`Text`不是`asp:ListItem`asp.net 中元素的有效属性。你应该把它放在值字段中，如果可能的话，像这样：

```
<asp:DropDownList ID="DDL_State" runat="server" Width="100px" Height="16px">
    <asp:ListItem Value="">State</asp:ListItem>
    <asp:ListItem Value="Alabama">Alabama AL</asp:ListItem>
    <asp:ListItem Value="Alaska">Alaska AK</asp:ListItem>
    <asp:ListItem Value="Arizona">Arizona AZ</asp:ListItem>
    <asp:ListItem Value="Arkansas">Arkansas AR</asp:ListItem>
</asp:DropDownList>
<script language="javascript" type="text/javascript">
    var state='Alaska';
    $('#<%=DDL_State.ClientID%>').val(state);
</script> 
```

* * *

**编辑 ：**

但是如果你想通过文本选择，你可以使用：

```
$('#<%=DDL_State.ClientID%>').find("option:contains(" + state + ")")
                             .prop("selected", true) 
```

# c++ - 在 tr1::shared_ptr 的向量中查找元素

> ID：14253132
> 
> 赞同：3
> 
> 时间：2013-01-10T07:55:39.833
> 
> 标签：c++, boost, stl, find, shared-ptr

我已经将我的自定义类型“MyType”包装在一个智能指针中：

```
tr1::shared_ptr<MyType> 
```

并从中制作了一个向量：

```
vector<shared_ptr<MyType>> 
```

现在我想要该向量`std::find`中的类型对象，`MyType`但不能因为我需要的类型是`shared_ptr<MyType>`.

有没有优雅的方法？谢谢

更新：为什么不 std::find_if：std::find 的用法非常紧凑。我认为为 find_if 实现一个方法或仿函数将是一个太大的开销。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-10T08:14:56.167

做你想做的事的惯用和优雅的方式是：

```
std::vector<std::shared_ptr<MyType>> v;

// init v here;

MyType my_value;

// init my_value here;

auto it = std::find_if(v.begin(), v.end(), [&](std::shared_ptr<MyType> const& p) {
    return *p == my_value; // assumes MyType has operator==
});

if (it != v.end()) { /* do what you want with the value found */ } 
```

如果您可以使用`std::vector`and `std:shared_ptr`，那么您显然已经在使用 STL。那么为什么不使用`std::find_if`呢？如果你不能使用 C++11 的 lambda 表达式，你总是可以使用一个函数对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:15:55.750

只回答您发布的问题，忽略您对 find_if 的厌恶：

```
std::vector<std::shared_ptr<MyType>> myVector; 
/* ... */
MyType const& whatIAmlookingFor = /* ... */;
auto ptr = std::find_if(begin(myVector), end(myVector), [&](std::shared_ptr<MyType> const& current)
{
  return *current == whatIAmLookingFor;
}); 
```

现在关于您不想使用 find_if “出于某些原因”（可能是什么原因？）：您正在寻找一种优雅的 STL/boost 方式来做某事，但不想使用优雅的 STL 方式来做某事做吗？听起来不对。

# c - 如何将字符随机附加到字符串？

> ID：14253138
> 
> 赞同：-3
> 
> 时间：2013-01-10T07:56:00.630
> 
> 标签：c, random, char, concatenation

我正在尝试生成一个将字符连接到给定字符串的字符串。

例如，我的字符串是“hello”，字符是“#”。我想生成一个字符串，显示这些的所有可能组合。即，结果可以是“hello#”、“he#llo”、“hell#o”等。

你能提供使用 C 生成这样一个字符串的代码吗？

谢谢你的努力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:24:33.340

你需要一些关于算法的帮助。

假设字符串由指针*s* ,指向`char *s = "hello";`。

要确定随机位置，可以使用`rand()`stdlib*库*中的。在 C 中，数组（字符串是字符数组，或由 char 指针指向（并以 0 字节结尾）。在每种情况下，*arr[0]*或*ptr[0]*都是第一个字符）第一个索引为 0。因此最后一个字符位于 [length-1] 处。为确保随机位置在 0 和 length-1 之间，您可以使用模`%`运算符，例如`int position = rand() % strlen(s);`，但由于随机字符可能位于末尾，因此您需要将 1 添加到`strlen(s)`。

*   如上确定位置
*   创建一个长度为 length(s)+2 的 char 数组（添加随机字符和结尾 0），命名为*t*
*   `s`将部分从 0复制到`position-1`（注意`position == 0`大小写）到*t*（例如*strncpy*）
*   concat 到*t*随机字符（比如*t*是 1 个字符的字符串，这会更容易，而有一个技巧可以轻松复制一个字符......）（例如*strcat*）
*   从*位置*连接到*s**的*其余部分（注意大小写） *`position == length(s)`

    *   显示*吨** 
**   重复*恶心**

 *不知道这是一个任务还是你想自己做的事情——不关我的事。但只要尝试一下 - 自己。你会看到的。起初，它是一个 PITA。然后它很有趣！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:34:26.323

在对您的算法外观有所了解之后。

```
char *base_string = "hello";

string  = calloc(1,sizeof(char)); 

repeat loop (from i = 0 to length of base_string) { 

    string = realloc(old size of string + sizeof(base_string) +2) // +2 : 1 for null terminate string and 1 for #

    new_insert_position_in_string = string + i * (sizeof(base_string) +1);

    reapeat loop (from j = 0 to j< (length of  base_string )) {
        if (j==i) then {
            new_insert_position_in_string[j] = '#';
            new_insert_position_in_string++;
            continue;
        }
        new_insert_position_in_string[j] = base_string[j];
    }
    new_insert_position_in_string[length of  base_string + 1] = '#';

} 
```

现在由你来推断 C 代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T08:24:35.057

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

void print_combinations(char *some_string,char some_char)
{
   char *new_string = malloc(strlen(some_string) + 2);
   for (unsigned long j = 0; j < (strlen(some_string) + 1); j++)
   {
      unsigned long i = 0;
      unsigned long k = 0;
      for (; i < (strlen(some_string) + 1); i++)
      {
         if (i == j)
         {
            new_string[i] = some_char;
         }
         else
         {
            new_string[i] = some_string[k];
            k++;
         }
      }
      new_string[i] = '\0';
      printf("pattern %lu: %s\n",j+1,new_string); 
   } 
   free(new_string);
}

int main(void)
{
   print_combinations("hello",'#');
} 
```

输出：

```
pattern 1: #hello    
pattern 2: h#ello    
pattern 3: he#llo    
pattern 4: hel#lo    
pattern 5: hell#o         
pattern 6: hello# 
```*

# ios - UISearchBar 遗漏了 tableView 不可见部分的元素

> ID：14253140
> 
> 赞同：0
> 
> 时间：2013-01-10T07:56:20.200
> 
> 标签：ios, uitableview, uisearchbar

我有一个包含很多行的 TableView，大多数在加载 viewController 时都不可见。UITableView 的行是从 SQLite 数据库中提取的。如何在所有行之间进行 SearchBar 搜索，而不仅仅是可见行？

在头文件中：

```
 @interface ExhibitorsViewController : UIViewController <UITableViewDataSource, UITableViewDelegate, UISearchBarDelegate>{
BOOL isSearchOn;
BOOL canSelectRow;
NSMutableArray * listOfExpositors;
NSMutableArray * searchResult;

}

 //....
 @end 
```

在实现文件中

```
 -(NSInteger)tableView:(UITableView *)tableView
  numberOfRowsInSection:(NSInteger)section
{
     if(isSearchOn){
           return [searchResult count];
           //In this array there are the elements after use of searchBar
     }else{
          int number=[self.mutableArray count];
         //In this array there are all elements of database, extracts in viewDidLoad()
       return number;
     }
}

 - (UITableViewCell *)tableView:(UITableView *)aTableView
     cellForRowAtIndexPath:(NSIndexPath *)indexPath {

       static NSString *CellIdentifier = @"Cell";

      UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
         if (cell == nil) {
           cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault 
           reuseIdentifier:CellIdentifier] ;
}

       if(isSearchOn){
            NSString * cellValue = [searchResult objectAtIndex:indexPath.row];
           cell.textLabel.text = cellValue;
      }else{
           //loading data from the database
           Database *currow =[self.mutableArray objectAtIndex:indexPath.row];

           cell.textLabel.text = currow.name;

         [listOfExpositors addObject:cell.textLabel.text];
         //here only loads the list of names visible and not the entire table
         //How do I put all the elements in this array?
         NSLog(@" %@", listOfExpositors);

         isSearchOn = NO;
         canSelectRow = YES;
  }
}

 -(void) doneSearching{
      isSearchOn = NO;
      canSelectRow = YES;
      self.tableView.scrollEnabled = YES;

     [self.searchBar resignFirstResponder];
     [self.tableView reloadData];

 }

  -(void) searchBarTextDidBeginEditing:(UISearchBar *)searchBar{
        isSearchOn = YES;
        if(self.searchBar.text.length>0){
            canSelectRow=YES;
            self.tableView.scrollEnabled = YES;
        }else{
            canSelectRow= NO;
            self.tableView.scrollEnabled = NO;

        }
    }

   -(void) searchExpositorsTableView{
         [searchResult removeAllObjects];

         for (NSString *str in listOfExpositors){

              NSRange titleResultsRange = [str rangeOfString:self.searchBar.text options:
               NSCaseInsensitiveSearch];;

              if (titleResultsRange.length >0) {
                      [searchResult addObject:str];

              }
          }
        NSLog(@"%@", searchResult);
      }

    -(void) searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText{
             if([searchText length]>0){
                     canSelectRow = YES;
                     self.tableView.scrollEnabled = YES;
                     [self searchExpositorsTableView];
             }else{
                    canSelectRow = NO;
                    self.tableView.scrollEnabled = NO;

              }

             [self.tableView reloadData];
        }

      -(void) searchBarSearchButtonClicked:(UISearchBar *)searchBar{
            [self searchExpositorsTableView];
            [self.searchBar resignFirstResponder];
      }

   -(NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath{

        if(canSelectRow){

            return indexPath;

        }else{
              return nil;
       }
      NSLog(@"%d", indexPath.row);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:24:37.003

使用在**cellForRowAtIndexPath**中创建的数组是错误的，因为它仅限于可见元素。然后我使用了在 viewDidLoad() 中创建的 NSMutableArray，它确实包含了数据库的所有元素。我更改了以下方法：

```
 - (UITableViewCell *)tableView:(UITableView *)aTableView
     cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    //....

   if(isSearchOn){
       NSString * cellValue = [searchResult objectAtIndex:indexPath.row];
       cell.textLabel.text = cellValue;
   }else{
      Database *currow =[self.mutableArray objectAtIndex:indexPath.row];

       cell.textLabel.text = currow.name;

     //Should be removed  this array and used to another, self.mutableArray

    //[listOfExpositors addObject:cell.textLabel.text];
    // NSLog(@" %@", listOfExpositors);

    isSearchOn = NO;
    canSelectRow = YES;
  }
} 
```

研究方法

```
 -(void) searchExpositorsTableView{
      [searchResult removeAllObjects];

      for (Database *currow in self.mutableArray){ 
             /*In self.mutableArray there are all elements because is created in
               viewDidLoad*/
             NSLog(@"list of expositors %@", self.mutableArray);

             NSRange titleResultsRange = [currow.name rangeOfString:self.searchBar.text options: NSCaseInsensitiveSearch];
             if (titleResultsRange.length >0) {
                  [searchResult addObject:currow.name];

             }
        }

       NSLog(@"%@", searchResult);
     } 
```

# grails - 导出的文件 excel 或 pdf 需要页眉

> ID：14253146
> 
> 赞同：0
> 
> 时间：2013-01-10T07:56:45.007
> 
> 标签：grails, plugins, export-to-excel, export-to-pdf, jasper-plugin

我有一个 Web 应用程序，我需要将列表导出为 .xlsx 或 .pdf 格式。在导出页面时，页面应包含公司的页眉以及列表。这怎么可能？我在 grails 中做这个项目。是否有任何插件可以使这成为可能。我已经在 Grails 中尝试过导出插件，它没有那个功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:51:31.827

试试[jasper插件](http://grails.org/plugin/jasper)，你可以制作自己的风格输出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T09:21:26.727

我们目前正在使用 Grails 创建一些到 PDF 的导出。报告的标题中还包含表格和不同的徽标。

我们正在使用非常符合我们要求的 itext 库。您必须知道较新的 itext 版本不是开源的。

这是一个示例代码片段：

```
 Document document = new Document(PageSize.A4)

    def baos= new ByteArrayOutputStream(30)
    def dos= new DataOutputStream(baos)
    PdfWriter writer = PdfWriter.getInstance(document, dos)

    PageNumberEventHelper events = new PageNumberEventHelper()
    writer.setBoxSize("art", new Rectangle(36, 54, 559, 788))
    writer.setPageEvent(events);

    Font titleFont = new Font(Font.UNDEFINED, 22, Font.BOLD)

    document.open()
    // render title
    document.addTitle(getMessage('pricelist.title', [(new Date()).format('dd.MM.yyyy')]));
    document.add(new Paragraph(getMessage('pricelist.title', [(new Date()).format('dd.MM.yyyy')]), titleFont))
    document.add(new Paragraph(' '))

    ...

    document.close() 
```

# sql - 查找至少一个成员是列表一部分的组列表（rails，SQL）

> ID：14253151
> 
> 赞同：0
> 
> 时间：2013-01-10T07:57:06.813
> 
> 标签：sql, ruby-on-rails, sqlite, postgresql

我有一个简单的has_many:通过排列，如下图

```
# employee.rb
class Employee < ActiveRecord::Base
  has_many :group_assignments
  has_many :groups, through: :group_assignments
  # ...
end

# group.rb
class Group < ActiveRecord::Base
  has_many :group_assignments
  has_many :employees, through: :group_assignments
  # ...
end

# group_assignment.rb
class GroupAssignment < ActiveRecord::Base
  belongs_to :employee
  belongs_to :group
end 
```

我有一份员工名单。对于该列表，我想获取包含该列表中至少一名员工的每个组。我将如何以一种不是非常低效的方式完成此任务？我对 Rails 很陌生，对 SQL 也很陌生，我很茫然。我在开发中使用 SQLite，在生产中使用 PostgreSQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:18:41.177

对于名为 的员工列表`employees_list`，这将起作用：

```
 Group.includes(:employees).where('employees.id' => employees_list.map(&:id)) 
```

这大致是您将获得的那种 SQL：

```
SELECT "groups"."id" AS t0_r0,
  "groups"."created_at" AS t0_r1, "groups"."updated_at" AS t0_r2,
  "employees"."id" AS t1_r0, "employees"."created_at" AS t1_r1, "employees"."updated_at" AS t1_r2
  FROM "groups"
  LEFT OUTER JOIN "group_assignments" ON "group_assignments"."group_id" = "groups"."id"  
  LEFT OUTER JOIN "employees" ON "employees"."id" = "group_assignments"."employee_id" 
  WHERE "employees"."id" IN (1, 3) 
```

所以发生的事情是，首先使用左外连接（将表中的列与表中的列匹配）连接表`groups`，然后再次使用左外连接（将表中的列与表中的列匹配）桌子）。`group_assignments``group_id``group_assignments``id``groups``employees``employee_id``group_assignments``id``employees`

然后，我们选择`'employees'.'id'`员工列表中员工数组中（员工的 id）所在的所有行，我们通过使用:映射`employees_list`到他们的 id 来获得这些行。这里是简写：。`map``employees_list.map(&:id)``map(&:id)``map { |e| e.id }`

请注意，您可以使用`joins`而不是`includes`此处，但如果一名员工是多个组的成员，您将得到重复。有点微妙但有用的东西要知道。

希望这是有道理的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:14:02.487

这是一般的想法，但根据您的数据，您可能需要选择 distinct。

```
Group.includes(:group_assignments => :employee).where(:employee => {:id => ?}, @employees.map(&:id)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T08:18:07.933

尝试

```
Group.joins(:group_assignments).where("group_assignments.employee_id in (?)", @employees.map(&:id)) 
```

# mysql - 插入重复数据的 SQL 语句

> ID：14253155
> 
> 赞同：1
> 
> 时间：2013-01-10T07:57:23.437
> 
> 标签：mysql, sql, insert

目前的情况是在表中的 400 百行数据中以重复的方式在字段中添加低于`A01`,`B03`和的值。`Z11``X21``code``BabyCode`

![当前表 - '代码中没有值](../Images/5061163c59d89c27bb99b96d153d62a2.png)

以上是当前表格 - “代码”列中没有值

![待更新表 - 在“代码”列中添加重复值](../Images/a5e82de715075dc41955deb6225af26c.png)

以上是要更新的表格 - 在“代码”列中添加重复值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:41:11.990

你可以这样做：

```
INSERT INTO BabyCode
SELECT Codes.Code
FROM
(
  SELECT id
  FROM
  (
  SELECT t3.digit * 100 + t2.digit * 10 + t1.digit + 1 AS id
  FROM         TEMP AS t1
    CROSS JOIN TEMP AS t2
    CROSS JOIN TEMP AS t3
  ) t
  WHERE id <= 400
) t,
(
  SELECT 1 AS ID, 'A01' AS Code
  UNION ALL
  SELECT 2, 'B03'
  UNION ALL 
  SELECT 3, 'Z11' 
  UNION ALL
  SELECT 4, 'X21'
) codes; 
```

但是您需要定义一个临时表，以用作锚表：

```
CREATE TABLE TEMP (Digit int);
INSERT INTO Temp VALUES(0),(1),(2),(3),(4),(5),(6),(7),(8),(9); 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/bda47/1)

这会将 40000 行的值`A01`, `B03`,`Z11`和`X21`, 插入到`code`表的列中`BabyCode`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T06:18:39.460

您可以将这四个值放入与@Mahmoud Gamal 的答案中使用的相同的虚拟表中，并且，如果表中的 ID 值从 1 开始并且是连续的（既没有间隙也没有重复），您可以使用以下方法加入虚拟表并更新目标的`Code`列：

```
UPDATE YourTable t
INNER JOIN (
  SELECT 1 AS ID, 'A01' AS Code
  UNION ALL SELECT 2, 'B03'
  UNION ALL SELECT 3, 'Z11' 
  UNION ALL SELECT 4, 'X21'
) x
ON (t.ID - 1) MOD 4 + 1 = x.ID
SET t.Code = x.Code
; 
```

否则，您可以使用变量将`1`, `2`, `3`,`4`依次分配给表的每一行，然后您就可以使用这些值加入虚拟表：

```
UPDATE YourTable t
INNER JOIN (
  SELECT ID, @rnk := CASE WHEN @rnk = 4 THEN 0 ELSE @rnk END + 1 AS rnk
  FROM YourTable
  CROSS JOIN (SELECT @rnk := 0) x
  ORDER BY ID
) r ON t.ID = r.ID
INNER JOIN (
  SELECT 1 AS ID, 'A01' AS Code
  UNION ALL SELECT 2, 'B03'
  UNION ALL SELECT 3, 'Z11' 
  UNION ALL SELECT 4, 'X21'
) x
ON r.rnk = x.ID
SET t.Code = x.Code
; 
```

这两个查询都可以在 SQL Fiddle 中使用：

*   [方法一](http://sqlfiddle.com/#!2/1c819/1)

*   [方法二](http://sqlfiddle.com/#!2/910db/1)

# batch-file - 用于终止所有 IExplore.exe 实例的批处理文件

> ID：14253157
> 
> 赞同：3
> 
> 时间：2013-01-10T07:57:29.193
> 
> 标签：batch-file

有时 IE 冻结，我必须打开任务管理器，右键单击进程并选择结束进程以使其真正关闭。

如果我有很多开放，我必须找到合适的结束。我想要一个可以运行的批处理文件命令来终止它们。

[我尝试使用此处](http://www.tech-recipes.com/rx/446/xp_kill_windows_process_command_line_taskkill/)描述的 taskkill ，但这不会像“结束进程”按钮那样终止冻结的 IE。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-10T09:34:18.790

这将杀死所有 IE 实例

```
taskkill /im iexplore.exe /f 
```

# python - unittest.testsuite 中的并行测试 TestCases

> ID：14253158
> 
> 赞同：1
> 
> 时间：2013-01-10T07:57:37.137
> 
> 标签：python, unit-testing, selenium-webdriver, test-suite, saucelabs

我正在使用 Python 和 Selenium Webdriver。我有一组包含在 testSuite 中的 testCase，我希望它们并行运行，而不管它们的 testCase 配置如何（其中一些将在本地运行，其中一些将通过 saucelabs 运行）。

我遇到过[这个页面](http://code.activestate.com/recipes/391414-threaded-test-suite-running-and-other-goodies/)。这应该是一个杀手，但它无法在我的单位上正常运行。我尝试运行代码，安装了 twisted.python（脚本的先决条件）、zope-in​​terface（twisted.python 的先决条件），但出现以下错误：

```
Unhandled Error
Traceback (most recent call last):
  File "C:\Python27\lib\threading.py", line 524, in __bootstrap
    self.__bootstrap_inner()
  File "C:\Python27\lib\threading.py", line 551, in __bootstrap_inner
    self.run()
  File "C:\Python27\lib\threading.py", line 504, in run
    self.__target(*self.__args, **self.__kwargs)
--- <exception caught here> ---
  File "C:\Python27\lib\site-packages\twisted\python\threadpool.py", line 172, in _worker
    result = context.call(ctx, function, *args, **kwargs)
  File "C:\Python27\lib\site-packages\twisted\python\context.py", line 118, in callWithContext
    return self.currentContext().callWithContext(ctx, func, *args, **kw)
  File "C:\Python27\lib\site-packages\twisted\python\context.py", line 81, in callWithContext
    return func(*args,**kw)
exceptions.TypeError: 'NoneType' object is not callable 
```

我只是无法检测到问题。

也许有人已经尝试过这个脚本并且它有效？或者如果你们中的任何人尝试过使用其他方法对 unittest.TestSuite 进行并行测试，请与我分享！我已经花了数周时间围绕 SauceLabs 的建议 wd.parallel..。 saucelabs 的示例并行测试代码不适用于我的单元，因为我目前正在运行 2.7.3（我们团队要求的版本），并且需要在和方法声明`@wd.parallel.multiply`上方添加装饰器不应该是一个选项，因为我正在创建一个脚本，该脚本应该可供未来的 webdriver testCases 轻松使用，并且只需几行代码即可运行它们。`runTest()``tearDown()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:00:42.940

你可能会看一下nose，它有一个用于并行运行Python测试的多处理插件：[https ://nose.readthedocs.org/en/latest/plugins/multiprocess.html](https://nose.readthedocs.org/en/latest/plugins/multiprocess.html)

# javascript - JQuery Infinite Scroll Help - 将变量传递到第二页

> ID：14253160
> 
> 赞同：1
> 
> 时间：2013-01-10T07:57:40.997
> 
> 标签：javascript, jquery, infinite-scroll

问题：我在我的 rails 应用程序中实现了一个无限滚动插件，以及 JQuery Masonry。它运行良好，但我面临一个小问题：从第二页开始，该`hover`功能没有被触发。这个问题与Stackoverflow 上的这篇[文章](https://stackoverflow.com/questions/9724698/fitvid-js-stops-working-on-the-second-page-of-the-infinite-scroll-jquery-isotop)非常相似。我应该在 Masonry 回调之后再次调用我的悬停函数。

**我的原始代码：**

```
<script>    
$(function () {
    var $container = $('#container_masonry');

    $container.infinitescroll({
        navSelector: '.pagination'
        nextSelector: '.pagination a',
        itemSelector: '.image_masonry'
        loading: {
        finishedMsg: 'Done loading'
        img: 'http://i.imgur.com/6RMhx.gif'
        }
    },
        // trigger Masonry as a callback
        function(newElements) {
            //hide new items while loading
            var $newElems = $(newElements).css({ opacity: 0 });
            //images must be loaded completely before adding to layout
            $newElems.imagesLoaded(function(){
                //they are loaded and ready to be showed
                $newElems.animate({ opacity: 1 });
                $container.masonry( 'appended', $newElems, true );  
            });
        }
    );

    $container.imagesLoaded(function(){
        $container.masonry({
        itemSelector: '.image_masonry',
        columnWidth: 10,
        isAnimated: true,
        animationOptions: { duration: 400 },
        isResizable: true,
        isFitWidth: true
        });

        $('.image_masonry').hover(
        function(){
        $('.title',this).fadeIn();
        $('.like_num',this).show();
        var buttonDiv= $(this).children('.button');
        buttonDiv.toggle();
        }, function(){
        $('.title',this).fadeOut();
        $('.like_num',this).hide();
        var buttonDiv= $(this).children('.button');
        buttonDiv.toggle();
        }); 
    });

});
</script> 
```

我应该添加以下内容，

```
 $('.image_masonry').hover(
        function(){
        $('.title',this).fadeIn();
        $('.like_num',this).show();
        var buttonDiv= $(this).children('.button');
        buttonDiv.toggle();
        }, function(){
        $('.title',this).fadeOut();
        $('.like_num',this).hide();
        var buttonDiv= $(this).children('.button');
        buttonDiv.toggle();
        }); 
```

紧接着，

```
 $newElems.imagesLoaded(function(){
                //they are loaded and ready to be showed
                $newElems.animate({ opacity: 1 });
                $container.masonry( 'appended', $newElems, true );
                //ADD HOVER FCN HERE 
```

但是，简单地添加整个悬停功能是行不通的。我是 jQuery 新手，所以我不完全确定，但我需要将相关变量连同函数一起传递以使其工作（从类似[的帖子](https://stackoverflow.com/questions/9724698/fitvid-js-stops-working-on-the-second-page-of-the-infinite-scroll-jquery-isotop)中得到这个提示。所以我应该添加类似的东西

```
 $('.image_masonry').hover(
        function(SOME-RELATED-VARIABLES){
        $('.title',this).fadeIn();
        $('.like_num',this).show();
        var buttonDiv= $(this).children('.button');
        buttonDiv.toggle();
        }, function(SOME-RELATED-VARIABLES){
        $('.title',this).fadeOut();
        $('.like_num',this).hide();
        var buttonDiv= $(this).children('.button');
        buttonDiv.toggle();
        }); 
```

但我需要有人教我应该放什么。由于我对 jQuery 不熟悉，我正在苦苦挣扎。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:37:55.243

您在第 5-11 行之间缺少一些逗号。此外，如果您稍后加载外部内容，则需要使用`on`或`delegate`根据您的版本委托悬停事件。我在`on`下面添加。

```
$(function () {
  var $container = $('#container_masonry');

  $container.infinitescroll({
    navSelector: '.pagination',
    nextSelector: '.pagination a',
    itemSelector: '.image_masonry',
    loading: {
      finishedMsg: 'Done loading',
      img: 'http://i.imgur.com/6RMhx.gif'
    }
  },
  // trigger Masonry as a callback
  function (newElements) {
    //hide new items while loading
    var $newElems = $(newElements).css({
      opacity: 0
    });
    //images must be loaded completely before adding to layout
    $newElems.imagesLoaded(function () {
      //they are loaded and ready to be showed
      $newElems.animate({
        opacity: 1
      });
      $container.masonry('appended', $newElems, true);
    });
  });

  $container.imagesLoaded(function () {
    $container.masonry({
      itemSelector: '.image_masonry',
      columnWidth: 10,
      isAnimated: true,
      animationOptions: {
        duration: 400
      },
      isResizable: true,
      isFitWidth: true
    });

    $('body').on({
      mouseenter: function () {
        $('.title', this).fadeIn();
        $('.like_num', this).show();
        var buttonDiv = $(this).children('.button');
        buttonDiv.toggle();
      },
      mouseleave: function () {
        $('.title', this).fadeOut();
        $('.like_num', this).hide();
        var buttonDiv = $(this).children('.button');
        buttonDiv.toggle();
      }
    }, '.image_masonry');
  });

}); 
```

# php - PHPMailer 默认配置 SMTP

> ID：14253162
> 
> 赞同：10
> 
> 时间：2013-01-10T07:57:48.660
> 
> 标签：php, smtp, phpmailer

我知道如何将 SMTP 与 PHPMailer 一起使用：

```
$mail             = new PHPMailer();
$mail->IsSMTP(); // telling the class to use SMTP
$mail->SMTPAuth   = true;                  // enable SMTP authentication
$mail->Host       = "mail.yourdomain.com"; // sets the SMTP server
$mail->Username   = "yourname@yourdomain"; // SMTP account username
$mail->Password   = "yourpassword";        // SMTP account password 
```

它工作正常。但我的问题是：

如何配置 PHPMailer 以默认使用这些设置，这样我每次发送邮件时都不必指定它们？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-10T08:08:21.883

创建一个函数，并包含/使用它。

```
function create_phpmailer() {
  $mail             = new PHPMailer();
  $mail->IsSMTP(); // telling the class to use SMTP
  $mail->SMTPAuth   = true;                  // enable SMTP authentication
  $mail->Host       = "mail.yourdomain.com"; // sets the SMTP server
  $mail->Username   = "yourname@yourdomain"; // SMTP account username
  $mail->Password   = "yourpassword";        // SMTP account password
  return $mail;
} 
```

并调用 create_phpmailer() 创建一个新的 PHPMailer 对象。

或者你可以派生你自己的子类，它设置参数：

```
class MyMailer extends PHPMailer {
  public function __construct() {
    parent::__construct();
    $this->IsSMTP(); // telling the class to use SMTP
    $this->SMTPAuth   = true;                  // enable SMTP authentication
    $this->Host       = "mail.yourdomain.com"; // sets the SMTP server
    $this->Username   = "yourname@yourdomain"; // SMTP account username
    $this->Password   = "yourpassword";        // SMTP account password
  }
} 
```

并使用新的 MyMailer()。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-29T15:08:26.663

> 我不能只编辑 class.phpmailer.php 文件吗？

最好不要自己编辑类文件，因为这会使代码更难维护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-08T13:41:40.753

你也可以使用这个钩子：

```
 /**
     * Fires after PHPMailer is initialized.
     *
     * @since 2.2.0
     *
     * @param PHPMailer &$phpmailer The PHPMailer instance, passed by reference.
     */
    do_action_ref_array( 'phpmailer_init', array( &$phpmailer ) ); 
```

从wp_mail函数本身的源码直接修改phpmailer类。

# java - 字符串到日期转换

> ID：14253164
> 
> 赞同：0
> 
> 时间：2013-01-10T07:57:59.733
> 
> 标签：java, date, simpledateformat

以下代码

```
 SimpleDateFormat simpleDateFormat = new SimpleDateFormat("dd-MMM-yy", new DateFormatSymbols(Locale.US));
        System.out.println(simpleDateFormat.parse("03-Apr-96")); 
```

输出为`Wed Apr 03 00:00:00 IST 1996`

我应该怎么做才能得到类似的输出`1996-04-03 00:00:00.0`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:05:39.473

尝试以下操作：

```
 SimpleDateFormat simpleDateFormat = new SimpleDateFormat("dd-MMM-yy", new DateFormatSymbols(Locale.US));
    Date d = simpleDateFormat.parse("03-Apr-96");  
    simpleDateFormat.applyPattern("yyyy-MM-dd HH:mm:ss.S");
    System.out.println(simpleDateFormat.format(d)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:07:52.133

尝试这个：

```
SimpleDateFormat simpleDateFormat = new SimpleDateFormat("dd-MMM-yy", new DateFormatSymbols(Locale.US));
        Date date=simpleDateFormat.parse("03-Apr-96");

        SimpleDateFormat simpleDateFormat1 = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.S", new DateFormatSymbols(Locale.US));
        System.out.println(simpleDateFormat1.format(date)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T08:08:02.583

一个`DateFormat`对象既可以用于将 a 解析`String`为一个`Date`对象，也可以反之。在您的示例中，您正在执行前者，而您真正想要做的是将您的格式`Date`设置为给定的模式。

这是您可能想要做的一个例子：

```
DateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
System.out.print(df.format(yourDateObject)); 
```

# delphi - 创建不能在表单上多次添加的简单组件

> ID：14253172
> 
> 赞同：3
> 
> 时间：2013-01-10T07:58:31.093
> 
> 标签：delphi, components, custom-controls

如何编写一个不允许它在表单上多次放置的简单组件？
比如说，我已经在表单上放置了我的 TMyComponent，如果我要放置另一个 TMyComponent，它会通知“组件已经存在！” 并将取消组件在表单上的放置。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-10T08:06:25.667

组件构造函数接受一个`Owner`参数：通常是您的表单（或 DataModule）。只需浏览列表，`Owner.Components`看看是否还有您的列表。如果有，请引发异常。

这将阻止您在设计时和运行时添加您的组件。

# javascript - 如何在我的 DOM 加载后和另一个 js 完成加载后检查执行一些 javascript？

> ID：14253179
> 
> 赞同：1
> 
> 时间：2013-01-10T07:58:58.793
> 
> 标签：javascript

我正在使用 javascript [Placeholders.js](https://github.com/jamesallardice/Placeholders.js) 一旦我的页面被加载，它说应该执行如下脚本：

Placeholders.init({ live: true, //也适用于未来和修改过的元素 hideOnFocus: true //当元素获得焦点时隐藏占位符 });

我没有使用 jQuery。我怎么知道何时执行 init，因为它取决于两件事：已加载 Placeholders.js 脚本和已加载我的表单字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:06:38.827

> 我怎么知道何时执行 init，因为它取决于两件事：已加载 Placeholders.js 脚本和已加载我的表单字段。

将`script`执行调用的标签放在`Placeholders.init`文档底部，就在您的结束`</body>`标签之前。它上面的所有元素此时都可以访问。

例子：

```
<body>
  <input id="theField" value="value from HTML" type="text">
  <script>
    document.getElementById("theField").value =
      "value from JavaScript";
  </script>
</body> 
```

[实时复制](http://jsbin.com/ufamam/1)| [来源](http://jsbin.com/ufamam/1/edit)

结果是该字段具有文本`"value from JavaScript"`。可靠，跨浏览器。

参考：

*   [YUI 网站加速最佳实践](http://developer.yahoo.com/performance/rules.html)
*   [Google Closure Library 工程师了解 DOM 元素何时准备就绪](https://groups.google.com/d/msg/closure-library-discuss/G-7Ltdavy0E/RjllWWJTXAcJ)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-10T08:14:06.953

您可以像这样检查它：

```
if (document.readyState === 'complete') {
    // insert your code here
} 
```

上面的“if”语句中包含的内容在文档完全加载之前不会运行。在 jQuery 中，你可以这样做：

```
$(document).ready(function() { // insert code here }); 
```

# java - 需要一些关于这个 Java 入门程序的指针

> ID：14253182
> 
> 赞同：0
> 
> 时间：2013-01-10T07:59:34.830
> 
> 标签：java, debugging, javac, unsupported-class-version

> **可能重复：**
> [Java 错误：尝试在 OS X 上运行 Cassandra 时出现错误的 .class 文件错误版本号](https://stackoverflow.com/questions/1611312/java-error-bad-version-number-in-class-file-error-when-trying-to-run-cassandra)

*我不确定我在这个基本*的hello world 程序上做错了什么。不知道为什么这会引发错误。

我已将文件保存为`test.java`.

```
public class test {
    public static void main(String[] args) {
        System.out.println("Hello!");
    }

    /*public static void sop(String str) {
        System.out.println(str);
    }*/
} 
```

当我用 编译它时`javac test.java`，它编译成功，但是当我尝试用 运行它时`java test`，它给出以下错误：

```
C:\Users\admin\Desktop>java test
Exception in thread "main" java.lang.UnsupportedClassVersionError: Bad version number in .class file
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClass(Unknown Source)
        at java.security.SecureClassLoader.defineClass(Unknown Source)
        at java.net.URLClassLoader.defineClass(Unknown Source)
        at java.net.URLClassLoader.access$100(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClassInternal(Unknown Source) 
```

Java`bin`目录添加到系统路径中。将不胜感激任何指针。

系统路径下的Java目录如下：

`C:\Program Files\Java\jdk1.6.0_31\bin;C:\Program Files\Java\jre6\lib;`

java/javac 版本：

```
C:\Users\admin\Desktop>java -version
java version "1.5.0_12"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_12-b04)
Java HotSpot(TM) Client VM (build 1.5.0_12-b04, mixed mode, sharing)

C:\Users\admin\Desktop>javac -version
javac 1.6.0_31 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T08:11:46.527

您的 java 编译器是 1.6.0 版，您的 java 可执行环境是 1.5.0 版。

错误是告诉你你的 java 可执行文件对于 java 可执行环境来说太新了。

要解决您的问题，您需要更新您的 java 环境（或降级您的 java 编译器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:55:28.227

也可能是您的测试课程的标题不正确。

类名应根据 ANSI 标准大写。

# java - JSF 2 属性不反映 ajax 操作后的更改

> ID：14253183
> 
> 赞同：1
> 
> 时间：2013-01-10T07:59:37.277
> 
> 标签：java, ajax, jsf, primefaces

这是这种情况：

我有一个弹出框来选择列出的项目之一（单击 showParentAssetSearchButton）。选择后，所选项目的值将显示在主屏幕中。在主屏幕中，将有一个按钮来清除选择的项目。它将触发对托管 bean 的 ajax 操作以清除绑定值（通过单击 clearParentAssetButton）。

当我进行调试时，该值是明确的，不会显示在主屏幕上。但是，当我单击保存按钮时，我注意到应该为空的属性实际上并不是空的。它仍然保持价值。

以下是片段 UI 代码：

```
<h:panelGroup id="myregion">
    <p:inputText id="parentAsset" 
                 ondblclick="parentAssetDlg.show()"
                 value="#{assetMasterCreatePage.parentAsset.shortName}"
                 rendered="#{not empty assetMasterCreatePage.parentAsset}"/>
</h:panelGroup>
<p:commandButton icon="ui-icon-search" 
                 id="showParentAssetSearchButton" 
                 type="button"
                 title="#{msg.label_asset_search_parent_asset}"
                 onclick="parentAssetDlg.show()" />
<p:commandButton icon="ui-icon-trash" 
                 id="clearParentAssetButton" 
                 title="#{msg.label_asset_clear_parent_asset}"
                 actionListener="#{assetMasterCreatePage.doResetParentAsset}"
                 immediate="true"
                 process="@form"
                 update="clearParentAssetButton, myregion"
                 disabled="#{empty assetMasterCreatePage.parentAsset}" />
 ........
 <p:commandButton value="#{msg.button_save}" icon="ui-icon-disk" 
                  action="#{assetMasterCreatePage.doSaveAsset}" /> 
```

这是托管 bean 片段

```
@ManagedBean(name="assetMasterCreatePage")
@ViewScoped
public class AssetMasterCreatePage extends DefaultAssetMasterPage {
      private AssetMaster assetMaster;
      private AssetMaster parentAsset;

..........
.........
  public void doResetParentAsset(){
     parentAsset = null;
  }
  public String doSaveAssetMaster(){
    assetMaster.setParentAsset(parentAsset);
    assetMasterService.save(assetMaster);
    MessageUtils.saveSuccessMessage();
    return "save";
  }

} 
```

可以看到，当 clearParentAssetButton 的按钮被点击时，会触发 ajax 动作 #{assetMasterCreatePage.doResetParentAsset} 来重置 parentAsset 的值。这里的问题是保存时，已经应该为 null 的 parentAsset 不为 null。

我正在使用 JSF 2 来执行任务。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-10T09:16:50.670

奇怪，是否还有其他字段包含 的值`parentAsset`，我的意思是在页面中，有一些字段，例如 `<h:inputText value="parentAsset.shortName"/>`，当您单击保存按钮时，`parentAsset`会初始化并保存一个新的，您还可以对其进行调试并查看`parentAsset`的哈希确保代码是否相同。

# hadoop - LUCENE 和 Hadoop

> ID：14253186
> 
> 赞同：1
> 
> 时间：2013-01-10T08:00:06.467
> 
> 标签：hadoop, lucene

我正在使用 lucene 提供对文本文件的索引和搜索。我可以使用 HDFS 来存储索引文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:14:12.273

您交换任务：与其考虑在哪里使用 Hadoop，不如先考虑实施项目需要什么。如果你发现你需要 Hadoop，那么在哪里以及如何使用它就会变得很明显。

一个提示。很可能您既不需要 Hadoop，也不需要 Lucene 本身：[**Solr**](http://lucene.apache.org/solr/) - 在 Lucene 之上创建的搜索服务器 - 现在具有分布式设置，专为索引和搜索而设计；[**Nutch**](http://nutch.apache.org/)可以作为 Solr 爬网的前端；[**Tika**](http://tika.apache.org/)可以帮助您解析所有类型的离线文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:10:00.347

在所有数据都以 lucene 文档（lucene 缓存）的形式准备好之后，Lucene 就会出现。看起来你已经知道 Lucene。Hadoop 的目的是将大任务缩减为小块。我认为 Hadoop 的第一个用途可以是收集数据。每个hadoop节点都可以不断收集数据；并创建 lucene 文档

# android - 加载更多 - 只有创建视图层次结构的原始线程才能接触其视图

> ID：14253189
> 
> 赞同：0
> 
> 时间：2013-01-10T08:00:24.707
> 
> 标签：android, json, gridview, android-asynctask, android-loader

我的应用程序使用 GridView 从 JSON 获取图像。一切都很好，但现在我想通过单击按钮来加载更多内容。我按照本教程[Android ListView 和 Load More Button](http://www.androidhive.info/2012/03/android-listview-with-load-more-button/)进行操作。当我关注它时，我使用`runOnUiThread(new Runnable() { public void run() { } }`了`doInBackground`但它错误`NetworkOnMainThreadException`我知道这是因为我在 UI 线程上运行它。但是当我删除时`runOnUiThread...`，它也会出错

我该如何解决这个错误？完整来源[http://pastie.org/5659969](http://pastie.org/5659969)

```
01-10 14:39:14.970: E/AndroidRuntime(19609): FATAL EXCEPTION: AsyncTask #3
01-10 14:39:14.970: E/AndroidRuntime(19609): java.lang.RuntimeException: An error occured while executing doInBackground()
01-10 14:39:14.970: E/AndroidRuntime(19609):    at android.os.AsyncTask$3.done(AsyncTask.java:299)
01-10 14:39:14.970: E/AndroidRuntime(19609):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
01-10 14:39:14.970: E/AndroidRuntime(19609):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
01-10 14:39:14.970: E/AndroidRuntime(19609):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
01-10 14:39:14.970: E/AndroidRuntime(19609):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
01-10 14:39:14.970: E/AndroidRuntime(19609):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
01-10 14:39:14.970: E/AndroidRuntime(19609):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
01-10 14:39:14.970: E/AndroidRuntime(19609):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
01-10 14:39:14.970: E/AndroidRuntime(19609):    at java.lang.Thread.run(Thread.java:856)
01-10 14:39:14.970: E/AndroidRuntime(19609): Caused by: android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
01-10 14:39:14.970: E/AndroidRuntime(19609):    at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4847)
01-10 14:39:14.970: E/AndroidRuntime(19609):    at android.view.ViewRootImpl.invalidateChildInParent(ViewRootImpl.java:974)
01-10 14:39:14.970: E/AndroidRuntime(19609):    at android.view.ViewGroup.invalidateChild(ViewGroup.java:4075)
01-10 14:39:14.970: E/AndroidRuntime(19609):    at android.view.View.invalidate(View.java:10525)
01-10 14:39:14.970: E/AndroidRuntime(19609):    at android.view.View.invalidate(View.java:10480)
01-10 14:39:14.970: E/AndroidRuntime(19609):    at android.widget.ImageView.invalidateDrawable(ImageView.java:190)
01-10 14:39:14.970: E/AndroidRuntime(19609):    at android.graphics.drawable.Drawable.invalidateSelf(Drawable.java:350)
01-10 14:39:14.970: E/AndroidRuntime(19609):    at android.graphics.drawable.Drawable.setVisible(Drawable.java:546)
01-10 14:39:14.970: E/AndroidRuntime(19609):    at android.widget.ImageView.onDetachedFromWindow(ImageView.java:1173)
01-10 14:39:14.970: E/AndroidRuntime(19609):    at android.view.View.dispatchDetachedFromWindow(View.java:12096)
01-10 14:39:14.970: E/AndroidRuntime(19609):    at android.view.ViewGroup.dispatchDetachedFromWindow(ViewGroup.java:2541)
01-10 14:39:14.970: E/AndroidRuntime(19609):    at android.view.ViewGroup.removeAllViewsInLayout(ViewGroup.java:3828)
01-10 14:39:14.970: E/AndroidRuntime(19609):    at android.widget.AbsListView.resetList(AbsListView.java:2130)
01-10 14:39:14.970: E/AndroidRuntime(19609):    at android.widget.GridView.setAdapter(GridView.java:170)
01-10 14:39:14.970: E/AndroidRuntime(19609):    at com.camitss.mcolle.CardActivity$LoadMore.doInBackground(CardActivity.java:254)
01-10 14:39:14.970: E/AndroidRuntime(19609):    at com.camitss.mcolle.CardActivity$LoadMore.doInBackground(CardActivity.java:1)
01-10 14:39:14.970: E/AndroidRuntime(19609):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
01-10 14:39:14.970: E/AndroidRuntime(19609):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
01-10 14:39:14.970: E/AndroidRuntime(19609):    ... 5 more 
```

首次加载时的 AsyncTask

```
// Download JSON in Background
public class DownloadJSONFileAsync extends AsyncTask<String, Void, Void> {
    String token = getIntent().getExtras().getString("token1");

    protected void onPreExecute() {
        super.onPreExecute();
        showDialog(DIALOG_DOWNLOAD_JSON_PROGRESS);
    }

    @Override
    protected Void doInBackground(String... params) {
        String url = "http://xxx.xxx.xxx/card/all/"+num_page+"/0/?token="+token;
        JSONArray data = null;

        try {

            JSONObject jsonObject = new JSONObject(getJSONUrl(url));
            MyArrList = new ArrayList<HashMap<String, Object>>();
            HashMap<String, Object> map;
            data = jsonObject.getJSONArray("data");

            for (int i = 0; i < data.length(); i++) {
                JSONObject c = data.getJSONObject(i);
                map = new HashMap<String, Object>();

                // Thumbnail Get ImageBitmap To Object
                map.put("cardimage", (String) c.getString("cardimage"));
                map.put("ImageThumBitmap",(Bitmap) loadBitmap(c.getString("cardimage")));
                map.put("categoryid", (String) c.getString("categoryid"));
                MyArrList.add(map);
            }

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return null;
    }

    protected void onPostExecute(Void unused) {
        ShowAllContent(); // When Finish Show Content
        dismissDialog(DIALOG_DOWNLOAD_JSON_PROGRESS);
        removeDialog(DIALOG_DOWNLOAD_JSON_PROGRESS);
    }

} 
```

使用按钮单击以加载更多时的 AsycTask

```
// load more

public class LoadMore extends AsyncTask<String, Void, Void> {

    String token = getIntent().getExtras().getString("token1");

    protected void onPreExecute() {
        super.onPreExecute();
        showDialog(DIALOG_DOWNLOAD_JSON_PROGRESS);
    }

    @Override
    protected Void doInBackground(String... params) {
                num_page += 1;
                String url = "http://xxx.xxx.xxx/card/all/"+num_page+"/0/?token="+token;
                JSONArray data = null;

                try {

                    JSONObject jsonObject = new JSONObject(getJSONUrl(url));

                    MyArrList = new ArrayList<HashMap<String, Object>>();
                    HashMap<String, Object> map;
                    data = jsonObject.getJSONArray("data");
                    for (int i = 0; i < data.length(); i++) {
                        JSONObject c = data.getJSONObject(i);
                        map = new HashMap<String, Object>();

                        // Thumbnail Get ImageBitmap To Object
                        map.put("cardimage", (String) c.getString("cardimage"));
                        map.put("ImageThumBitmap",(Bitmap) loadBitmap(c.getString("cardimage")));
                        map.put("categoryid", (String) c.getString("categoryid"));
                        MyArrList.add(map);
                    }

                    int currentPosition = gridView1.getFirstVisiblePosition();
                    ImageAdapter adapter = new ImageAdapter(CardActivity.this, MyArrList);
                    gridView1.setAdapter(adapter);
                    gridView1.setSelection(currentPosition + 1);

                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
        return null;
    }

    protected void onPostExecute(Void unused) {
        ShowAllContent();
        dismissDialog(DIALOG_DOWNLOAD_JSON_PROGRESS);
        removeDialog(DIALOG_DOWNLOAD_JSON_PROGRESS);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:02:31.303

您可能应该移动此代码：

```
 int currentPosition = gridView1.getFirstVisiblePosition();
                ImageAdapter adapter = new ImageAdapter(CardActivity.this, MyArrList);
                gridView1.setAdapter(adapter);
                gridView1.setSelection(currentPosition + 1); 
```

进入`onPostExecute`方法，因为它必须在 UI 线程上运行

# oauth - 我可以将 Google OAuth 2.0 帐户与 1.0 混合协议一起使用吗

> ID：14253191
> 
> 赞同：0
> 
> 时间：2013-01-10T08:00:38.330
> 
> 标签：oauth, google-oauth

为了使用 1.0 协议与 Google 合作，需要使用[https://accounts.google.com/ManageDomains](https://accounts.google.com/ManageDomains)注册应用程序，其中提供了 ConsumerKey 和 ConsumerSecret 来访问提要。

较新的应用程序注册是使用[https://code.google.com/apis/](https://code.google.com/apis/)完成的，它提供 ClientID、RedirectURL 等（但不是消费者密钥），因为它基于 OAuth 2.0

问题：是否可以运行使用 Google API (OAuth 2.0) 创建的应用程序以使用 1.0a OAuth 流程？如果是，应该将哪个字段视为 ConsumerKey？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T00:03:23.127

不建议您对 OAuth1 流使用 OAuth2 注册。OAuth1 批准页面对您的用户来说看起来不是很好。Google 的consumer_key 和client_id 大致相当，但是Google 的OAuth1 审批页面显示的是consumer_key (client_id) 的原始值。不会显示应用程序品牌信息，而是会看到 client_id 值。12345.apps.googleusercontent.com。

如果你想做 OAuth1 混合协议，OAuth2 是一个自然的“混合”协议，可以做身份和数据访问控制。

# bash - 基于通配符否定匹配解压内容

> ID：14253193
> 
> 赞同：1
> 
> 时间：2013-01-10T08:00:46.423
> 
> 标签：bash, pattern-matching, wildcard, unzip

我在 zip 存档中有以下文件夹内容：

```
ca_ES
cs_CZ
da_DK
de_CH
de_DE
el_GR
en_GB
es_ES
fi_FI
fr_FR
gl_ES
it_IT
lv_LV
mt_MT
nb_NO
nl_NL
pt_PT
ro_RO
sk_SK
sl_SI
sq_AL
sv_SE
tr_TR
vi_VN
get-new-strings.sh
lang_check.php
lang_check.txt
language_list.txt 
```

我正在使用此命令解压缩文件，其中*排除*了我不想要的目录和文件：

```
unzip -q ${ZIP_FILE} -x ${FOLDER_PATH}/documentation/* ${FOLDER_PATH}/library/pdf/help/* ${FOLDER_PATH}/library/pdf/samples/* 
```

现在我试图排除上述目录中的所有文件和文件夹，*除了*目录`en_GB`和`es_ES`.

[阅读此](http://www.tuxfiles.org/linuxhelp/wildcards.html)内容后，我尝试了以下操作：

```
unzip -q ${ZIP_FILE} -x ${FOLDER_PATH}/documentation/* ${FOLDER_PATH}/library/pdf/help/* ${FOLDER_PATH}/library/pdf/samples/* ${FOLDER_PATH}/lang/[!e][!ns]_* 
```

但它最终使解压缩的目录内容为：

```
cs_CZ
el_GR
en_GB
es_ES
get-new-strings.sh
lang_check.php
lang_check.txt
language_list.txt 
```

*   为什么是`cs_CZ`，`el_GR`并且文件与该表达式不匹配并且被允许？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:36:34.070

`cs`并且`el`两者都不匹配`[!e][!ns]`模式。

解压缩排除所有匹配模式的文件`[!e][!ns]_*`。要匹配此模式文件（或目录路径）必须满足以下条件：

*   第一个符号不是`e`
*   第二个符号不是`n`或`s`
*   第三个符号是`_`（下划线）

只有符合所有三个要求的文件才会从解压缩结果中排除。`cs_CZ`，例如仅匹配第一个和第三个。

**更新（解决方案建议）：**可能有效的丑陋解决方案是排除 3 种模式。假设所有文件夹都在 zip 文件的根目录中：

```
unzip -q ${ZIP_FILE} -x [!e]?* ?[!ns]* ??[!_]* 
```

**更新2（相对路径）：**这个应该工作：

```
unzip -q ${ZIP_FILE} -x ${FOLDER_PATH}/documentation/* ${FOLDER_PATH}/library/pdf/help/* ${FOLDER_PATH}/library/pdf/samples/* ${FOLDER_PATH}/lang/[!e]?* ${FOLDER_PATH}/lang/?[!ns]* ${FOLDER_PATH}/lang/??[!_]* 
```

请注意，这将保留所有以目录开头的文件和文件`en_`夹。`es_``${FOLDER_PATH}/lang`

# bash - bash 初始化文件太多？

> ID：14253196
> 
> 赞同：1
> 
> 时间：2013-01-10T08:00:54.843
> 
> 标签：bash, shell, gmt

我刚刚从 MacPorts 安装了[GMT4](http://gmt.soest.hawaii.edu/)（通用映射工具）并且在终端中遇到了一些严重的问题......在终端中使用 ls 命令时，我得到以下信息：

```
-bash: ls: command not found 
```

为了解决这个问题，我尝试了很多东西，我在网上阅读了很多不同的地方。我已更改以下文件以包含 /usr 和 /bin：

```
~/.bashrc
~/.bash_profile
~/.profile 
```

这样做让我恢复了之前丢失的 sudo 命令。但是，如果不手动导出路径（“新会话”），我仍然无法在新的终端窗口中使用 ls。当我运行使用系统函数的 shell 脚本时，这会导致问题。所以我开始想知道这三个文件到底做了什么，如果三个文件做同样的事情会导致它们相互干扰。如果有人能告诉我需要在哪里添加这些路径，那就太好了；我不知道，也许我可以删除其中一个文件或其他有冲突的文件。现在我只是在每个新的终端窗口中运行“export PATH=$PATH:/usr”，它适用于该会话。

我在 2011 年初配备 4GB RAM 的 MacBook Pro 上运行 Mac OS X 10.6。

感兴趣的人的背景：我的最终目标是使用[松弛](http://www.geodynamics.org/cig/software/relax)来模拟大洋中脊系统中的粘弹性松弛，以提出滑动幅度与最大张应力位置之间的某种本构定律或幂关系。岩石圈由于正常断层。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T09:26:37.387

[Bash 手册](http://www.gnu.org/software/bash/manual/bashref.html#Bash-Startup-Files)实际上相当彻底地解释了这些文件。但是，该手册没有描述这些机制在实践中通常是如何使用的。以下是常见最佳实践的简短、删节版本。

`.profile`在登录时由`sh`和读取`bash`。

`.bashrc`由非登录 Bash shell 读取。按照惯例，`.bash_profile`来源`.bashrc`依次。

`.bash_profile`由 Bash 在登录时读取。如果此文件存在，`.profile`则不读取。按照惯例，如果存在就`.bash_profile`应该来源。`.profile`

# ios - iOS 6 状态保存和恢复的自动化测试

> ID：14253201
> 
> 赞同：7
> 
> 时间：2013-01-10T08:01:30.680
> 
> 标签：ios, testing, uikit-state-preservation

我正在更新应用程序以使用 iOS 6 中的新状态保存和恢复功能。据我所知，在应用程序中测试此功能的最佳指南涉及手动操作（例如[http://www.absoluteripple.com/1 /post/2012/09/ios-6-state-preservation-and-restoration.html](http://www.absoluteripple.com/1/post/2012/09/ios-6-state-preservation-and-restoration.html)）。

有什么方法可以自动测试保存和恢复状态吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-28T04:42:50.207

除了按照您提供的链接指定的方式手动运行它（或使用 UI 自动化工具之类的工具）之外，最好的办法是将集成点作为单元进行测试。不要测试整个系统，而是测试您实现的各个方法以确保它们与 UIKit 正确交互。否则，您只是在测试 Apple 代码的行为是否一致。

对于新的操作系统版本，您需要进入并全面测试它们，但这比每次提交要少得多。

# php - php如何在找不到页面或访问被拒绝或没有权限时重定向

> ID：14253202
> 
> 赞同：1
> 
> 时间：2013-01-10T08:01:32.880
> 
> 标签：php, redirect, permissions, user-defined-functions

当用户尝试访问不允许的文件夹或文件或访问不存在的网页时，如何使我的网站重定向到特定页面？我认为它是使用某种服务器端脚本完成的，请帮我找到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T08:05:03.387

如果要**阻止用户访问某些内容，请使用`403 Forbidden`header**。不是`404`。您可能想用来`404`愚弄用户，但后来当出现问题时，调试将非常困难。这也不是标准做法。

`403 Forbidden`您可以使用 htaccess引发错误。

```
RewriteEngine On
RewriteBase /
# Protect application and system files from being viewed
RewriteRule ^(secret_dir1|secret_dir2|secret/file.php) - [F, L] 
```

在 PHP 端，如果有人试图获得未经授权的访问，您应该调用标头。

```
header("HTTP/1.1 403 Forbidden"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:05:27.597

这应该在 .htaccess 文件中完成，添加：

```
ErrorDocument 404 index.php // it could be any file/page 
```

检查此链接：[http ://www.awesomephp.nl/htaccess/custom-error-pages](http://www.awesomephp.nl/htaccess/custom-error-pages)

# ios - iOS 的屏幕截图

> ID：14253204
> 
> 赞同：1
> 
> 时间：2013-01-10T08:01:36.900
> 
> 标签：ios, objective-c

我使用此代码进行 iOS 屏幕捕获：

```
CGImageRef screen = UIGetScreenImage();
UIImage *image = [UIImage imageWithCGImage:screen];
CGImageRelease(screen);  
UIImageWriteToSavedPhotosAlbum(image, self, @selector(image:didFinishSavingWithError:contextInfo:), nil);
CGRect screenshotFrame;  
CGImageRef screenshotRef = CGImageCreateWithImageInRect(screenshotRef, screenshotFrame);
UIImage * screenshot = [[(UIImage *)screenshotRef retain] autorelease];
CGImageRelease(screenshotRef); 
```

但是我的屏幕包含屏幕底部的工具栏。我不想在捕获的屏幕上显示工具栏。如何裁剪工具栏？我怎样才能修改我的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:17:34.307

我认为您可以捕获 self.view 层，因为它是根视图

```
if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)]) {
    //Retina display
    UIGraphicsBeginImageContextWithOptions(self.view.bounds.size, NO, [UIScreen mainScreen].scale);
} else {
    UIGraphicsBeginImageContext(self.view.bounds.size);
}
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *finalImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

玩得开心！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:04:28.787

尝试这个：

```
UIGraphicsBeginImageContext(/*CGRECT*/);     
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *screenImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

在这里`CGRect`传递您要截屏的矩形。

希望对你有帮助。。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T08:08:27.110

设置您的

```
CGRect screenshotFrame = CGRectMake(0, 0, 320, 436);
// 480(screen height) - 44(toolbar height) = 436 
```

# asp.net-mvc - MVCMailer 发送多条没有正文的消息

> ID：14253205
> 
> 赞同：1
> 
> 时间：2013-01-10T08:01:43.367
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, mvcmailer

我正在使用来自 Nuget 的 ASP.Net MVC 4 和 MVCMailer 4.0。当我创建一条消息并将其发送到脚手架的欢迎消息时，一切正常，我能够发送电子邮件就好了（唯一的问题是它是纯文本的，因为我有 html）

当我使用联系表格发送消息时，我的问题就出现了。首先让我向您展示我拥有什么以及如何使用它：

```
 /*UserMailer.cs*/

  public virtual MvcMailMessage ContactForm(MailMessage mailmessage)
    {
        ViewBag.Name = mailmessage.Name;
        ViewBag.Body = mailmessage.MessageBody;

        return Populate(x =>
        {
            x.Subject = "Scheduler) " + mailmessage.Subject;
            x.ViewName = "Contact Form";
            x.To.Add("Hiva@Varyan.com");
        });
    } 
```

现在来看视图

```
 @*ContactForm.cshtml*@
   <h2>ContactForm</h2>

   <strong>Name: </strong> @ViewBag.Name <br />
   <strong>Message: </strong> @ViewBag.Body 
```

最后是实例化邮件程序并发送邮件的联系人控制器操作

```
 //ContactController.cs

   namespace Scheduler.Controllers
   {
       public class ContactController : Controller
       {
           //
           // GET: /Contact/
           private IUserMailer _userMailer = new UserMailer();

           public IUserMailer UserMailer
           {
               get { return _userMailer; }
               set { _userMailer = value; }
           }

           public ActionResult Index()
           {
               return View();
           }

           [HttpPost]
           [ValidateAntiForgeryToken]
           public ActionResult Index(MailMessage _mailMessage)
           {
               UserMailer.ContactForm(_mailMessage).Send();
               return View();
           }

       }
   } 
```

只是为了完整性，我也会包括我的模型

```
 //MailMessage.cs
   namespace Scheduler.Model
   {
       public class MailMessage
       {
               public string Name { get; set; }
               public string EmailAddress { get; set; }
               public string Subject { get; set; }
               public string MessageBody { get; set; }
       }
   } 
```

好的，所以我遇到了多个问题：

1.  这段代码以某种方式生成了 2-3 份电子邮件副本，以防万一我在单击表单上的提交按钮时非常小心。
2.  消息的所有副本，包含正确的发件人电子邮件地址、主题，但它根本没有任何正文（消息实际上在我的手机上显示为“此消息没有内容”）
3.  最后，当我确实让它工作时（当我第一次实现它时，我一辈子都看不到我做了什么让它停止工作）它以纯文本而不是 html 形式发送所有消息。

我刚刚开始学习 ASP.Net MVC，如果有任何关于如何正确实现上述内容的指示，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:05:08.227

对不起，我错误地在里面放了一个空格，`x.ViewName`因为太晚了，所以没有抓住它。

# android - 在 Android 中添加自定义主题

> ID：14253210
> 
> 赞同：0
> 
> 时间：2013-01-10T08:02:03.977
> 
> 标签：android, android-layout

更改android应用程序和android完整手机的主题是不同的事情，我确实阅读了很多与更改为android应用程序主题相关的帖子，任何人都可以指导我如何将我的自定义添加到android手机？我的意思是我有一张图片，我想将该图片用作 android 手机背景主题。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:38:17.180

我认为你不能用应用程序做到这一点，但如果你有一个根设备并且你正在运行一个支持主题选择器的自定义房间，那么你可以根据主题选择器来做一个主题。

这是一些支持主题选择器的自定义 rom 示例。

*   只读存储器
*   AOKP 只读存储器
*   AOSPA ROM

# android - 同一活动中其他相对布局之上的相对布局

> ID：14253213
> 
> 赞同：0
> 
> 时间：2013-01-10T08:02:09.490
> 
> 标签：android

我有一个根项目是RelativeLayout 的活动。有一次我想显示另一个视图，但不想使用另一个活动，因为这会删除/重置以前的内容（我想保持原样）。我只想将视图推到顶部，在添加的视图中有一个按钮可以再次关闭它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T09:00:10.657

在 xml 文件中定义所有布局。设置每个布局..

当您想隐藏视图时将视图的可见性设置为“消失”，当您想在顶部显示时设置可见性“可见”...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:16:36.553

您可以使用警报对话框，在这种情况下，您的后台活动将保持原样，您也可以自定义对话框。

```
 public class CustomizeDialog extends Dialog implements OnClickListener {
Button okButton;
/*
 * param context
 * 
 */
public CustomizeDialog(Context context) {
    super(context);
    /** 'Window.FEATURE_NO_TITLE' - Used to hide the title */
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    /** Design the dialog in main.xml file */
    setContentView(R.layout.custom_dialog);
    okButton = (Button) findViewById(R.id.btn1);
    okButton.setOnClickListener(this);
}

@Override
public void onClick(View v) {
    /** When OK Button is clicked, dismiss the dialog */
    if (v == okButton)
        dismiss();
} 
```

您将为它提供具有相对布局或任何您想要的自定义布局:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T10:42:34.477

我实际上创建了另一个活动。也许这不是我想要的（第一个 Activity 的内容在新 Activity 中不可见）但至少在新 Activity 中按下后退按钮时它的状态似乎被保留了。

# ant - Sonar 分析出现内存不足错误，我应该增加 Ant 或 Sonar 服务器的 JVM 堆空间吗？

> ID：14253218
> 
> 赞同：7
> 
> 时间：2013-01-10T08:02:23.933
> 
> 标签：ant, jvm, jenkins, sonarqube, heap-memory

我正在分析 Sonar 中的一个大型项目并收到以下错误：

```
[sonar:sonar] 03:55:39.511 INFO  p.PhasesTimeProfiler - Execute decorators...

BUILD FAILED
[...]
[...] java.lang.OutOfMemoryError: Java heap space
at org.sonar.batch.index.MeasurePersister.model(MeasurePersister.java:127)
at org.sonar.batch.index.MeasurePersister.getMeasuresToSave(MeasurePersister.java:117)
at org.sonar.batch.index.MeasurePersister.dump(MeasurePersister.java:70)
at org.sonar.batch.index.DefaultPersistenceManager.dump(DefaultPersistenceManager.java:63)
at org.sonar.batch.phases.Phases.execute(Phases.java:95)
at org.sonar.batch.bootstrap.ProjectModule.doStart(ProjectModule.java:139)
at org.sonar.batch.bootstrap.Module.start(Module.java:83)
at org.sonar.batch.bootstrap.BatchModule.analyze(BatchModule.java:131)
at org.sonar.batch.bootstrap.BatchModule.doStart(BatchModule.java:121)
at org.sonar.batch.bootstrap.Module.start(Module.java:83)
at org.sonar.batch.bootstrap.BootstrapModule.doStart(BootstrapModule.java:121)
at org.sonar.batch.bootstrap.Module.start(Module.java:83)
at org.sonar.batch.Batch.execute(Batch.java:104)
at org.sonar.ant.Launcher.execute(Launcher.java:78)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at org.sonar.ant.SonarTask.delegateExecution(SonarTask.java:244)
at org.sonar.ant.SonarTask.execute(SonarTask.java:193)
at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
at org.apache.tools.ant.Task.perform(Task.java:348)
at org.apache.tools.ant.Target.execute(Target.java:392)
at org.apache.tools.ant.Target.performTasks(Target.java:413)
at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
at org.apache.tools.ant.helper.SingleCheckExecutor.executeTargets(SingleCheckExecutor.java:38)
at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:442) 
```

我应该增加正在运行的 Sonar 服务器的 Java 堆空间，还是增加执行 Sonar 作业的 Ant 目标？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-10T08:05:40.447

从堆栈跟踪中可以看出，Ant 启动了 Sonar 分析，因此您应该为运行 Ant 的 VM 增加堆空间。

这是一个非常相似的问题顺便说一句：[How to increase Sonar Java heap space](https://stackoverflow.com/questions/12746292/how-to-increase-sonar-java-heap-size)

**用于命令行 Ant 使用**

引用 Mark O'Connor 对另一个问题的回答：

> Sonar ANT 任务作为 ANT 的一部分执行，因此您需要使用标准 ANT 环境参数设置 JVM 堆。例如：
> 
> 出口 ANT_OPTS=-Xmx256m

评论：

*   这适用于 Linux，对于 Windows，使用`set`命令
*   这严格用于堆空间。对于`Permgen`, 使用`-XX:MaxPermSize=<desired amount>`

这是一个更相似的问题：[Build Failed java.lang.OutOfMemoryError: Java heap space](https://stackoverflow.com/questions/7494909/build-failed-java-lang-outofmemoryerror-java-heap-space)

**对于 Eclipse IDE**

引用文章[http://soenkerohde.com/2008/06/change-eclipse-ant-settings-when-you-run-out-of-memory/](http://soenkerohde.com/2008/06/change-eclipse-ant-settings-when-you-run-out-of-memory/)

> *   在 Eclipse 中打开菜单：**运行**->**外部工具**->**打开外部工具对话框**…
> *   在左侧选择要更改的构建脚本
> *   选择右侧的**JRE选项卡**
> *   将以下内容设置为**VM 参数**：-Xms768m -Xmx1024m -XX:MaxPermSize=512m

**对于 IntelliJ 理念**

这个论坛帖子很有用：[ANT build java heap space](http://devnet.jetbrains.net/message/5301721;jsessionid=2A7811535B033B16E553237B44281ED4)

引用答案：

> 请确保您在正确的位置增加了堆。您需要在**IDEA 的 Ant 工具窗口**中单击“属性”按钮并在此处编辑**“最大堆大小 (Mb)”**字段。

此外，来自 IntelliJ Idea 页面：[增加内存堆](http://www.jetbrains.com/idea/webhelp/increasing-memory-heap.html)

引用文章：

> 构建过程的内存堆独立于 IntelliJ IDEA 内存堆，在构建过程完成后释放。
> 
> 要增加内存堆： 打开**Build File Properties**对话框。在**最大堆大小**字段中，键入所需的内存量。

**用于 Jenkins 持续集成和 Ant 构建**

这个问题很有用：[How to use the `Java Options`in jenkins ant build tool to set ANT_OPTS](https://stackoverflow.com/questions/6401002/how-to-use-the-java-options-in-jenkins-ant-build-tool-to-set-ant-opts)

引用答案：

> 将 JAVA OPTIONS 设置为 -Xmx512m -XX:MaxPermSize=256m 仅没有 ANT_OPTS=

对于**Maven 构建**，这篇文章很有用：[How to increase maven heapspace in hudson builds](http://matthew.mceachen.us/blog/how-to-increase-maven-heapspace-in-hudson-builds-696.html)

> 1.  导航到你的哈德逊工作，
> 2.  点击**配置**，
> 3.  向下滚动到**Build 部分**，然后
> 4.  单击**高级**按钮。
> 5.  在 MAVEN_OPTS 中输入**：-Xmx512m -XX:MaxPermSize=128m**

# java - Tomcat JDBC 连接池 - 连接卡在活动状态

> ID：14253219
> 
> 赞同：3
> 
> 时间：2013-01-10T08:02:30.083
> 
> 标签：java, mysql, jdbc, connection-pooling

我的应用程序使用 Tomcat JDBC 连接池和 MySQL DB。
似乎是一个在夜间运行的进程（防病毒扫描？）导致机器上的内存和 CPU 增加，结果来自池的连接一直处于活动状态，直到连接池无法响应任何连接请求。

我收到如下错误：

*   `com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: No operations allowed after statement closed`.

*   `Timeout: Pool empty. Unable to fetch a connection in 10 seconds, none available[size:100; busy:97; idle:0; lastwait:10000]. (That's weird, where are the remaining 3?)`

查看我正在生成的描述活动连接状态的图表，它是平坦的，直到某个时候它开始增加，直到达到最大值并保持在那里。
我的连接池配置为删除未关闭的连接 ( `setRemoveAbandoned = true`)。

你知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:03:04.250

我认为这是因为您的应用程序在使用后没有关闭连接。请检查您的代码并确保所有连接在使用后都关闭。

# jquery - jQuery Mobile 固定页眉和页脚在第一时间滚动。（漏洞？）

> ID：14253221
> 
> 赞同：1
> 
> 时间：2013-01-10T08:02:32.390
> 
> 标签：jquery, jquery-mobile, header, footer, css-position

我的问题是关于`JQM`. 我目前正在开发一个移动应用程序，其中包括一个固定的页眉和页脚。打开`Safari`并且`Chrome (Mac)`一切正常，但是当我在`iPhone`or上查看应用程序时`iPad Safari`，固定的页眉和页脚不会在一开始就停留在最前面。滚动和停止后，页眉和页脚保持不变，因为它们应该。

我的来源：

```
<!DOCTYPE html>
<html>

    <head>
        <script src="phonegap.js"></script>
        <title>Title</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <link rel="stylesheet" href="jquery/jquery.mobile-1.2.0.min.css" />
        <link rel="stylesheet" href="jquery/jquery.mobile.theme-1.2.0.css" />
        <script src="jquery/jquery-1.8.2.min.js"></script>
        <script>
            $(document).bind("mobileinit", function() {
                $.mobile.page.prototype.options.addBackBtn = true;
            });
        </script>
        <script src="jquery/jquery.mobile-1.2.0.min.js"></script>
    </head>

    <body>
        <div data-role="page" id="master">
            <div data-role="header" data-position="fixed" class="header-custom">
                <img src="images/logo.png" style="height: 44px;"> <a href="index.html" data-icon="refresh" id="refreshButton" class="ui-btn-right" style="fmargin-top: 4px;" data-iconpos="notext">Aktualisieren</a>

            </div>
            <!-- /header -->
            <div data-role="content">
                <ul data-role="listview" id="rssListView"></ul>
            </div>
            <!-- /content -->
        </div>
        <!-- /page -->
    </body>

</html> 
```

自定义标头类：

```
/* Custom navbar */
.header-custom {
    height: 44px;
    background-image: url(images/header.png);
    background-size: cover;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:57:05.370

解决了。如果我`<h1></h1>`在我的标题中添加一个元素，它可以正常工作，但我不确定 JQM 为什么会这样做。这是 JQM 中的错误吗？

# .net - 即使卸载后应用程序仍保留在系统托盘中

> ID：14253222
> 
> 赞同：1
> 
> 时间：2013-01-10T08:02:50.317
> 
> 标签：.net, winforms, c#-4.0

一旦我启动我的应用程序，应用程序图标就会出现并位于系统托盘中。保持应用程序打开，我试图卸载应用程序。应用程序文件夹被卸载，但系统托盘中的图标仍然存在并且应用程序仍在运行。

ps 我使用安装向导来创建安装程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-08T19:56:37.113

根据我的经验，从托盘区域删除通知图标的唯一方法是：

```
myNotifyIcon.Visible = false; 
```

这使得通知图标立即消失。即使我完全停止了应用程序，但没有将 notifyIcon 的可见性设置为 false，只要鼠标指针没有悬停在它上面，它就会导致图标停留在托盘区域。

尝试在卸载程序中使用此命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-20T22:08:22.483

使用[通知区域清洁器](http://www.itsamples.com/notification-area-cleaner.html)应用程序。在 Windows 8.1 中修复所有问题

版本：1.0（32 位） [下载](http://www.itsamples.com/downloads/notification-area-cleaner.zip) （50KB，2010 年 3 月 7 日修订）

版本：1.0（64 位） [下载](http://www.itsamples.com/downloads/notification-area-cleaner-x64.zip) （57KB，2011 年 3 月 14 日修订）

# javascript - “值”绑定不适用于 Knockout 中的 optgroup

> ID：14253227
> 
> 赞同：0
> 
> 时间：2013-01-10T08:03:02.797
> 
> 标签：javascript, knockout.js

我终于让 optgroups 使用这个来与 Knockout 一起工作：

```
<select data-bind="foreach: $root.countries, value: selectedCountry">
    <optgroup data-bind="attr: {label: label}, foreach: children">
        <option data-bind="text: label"></option>
    </optgroup>
</select> 
```

这显示了按大陆分组的所有国家/地区的列表。但是，我无法让 selectedCountry 工作。我在这里想念什么？

作为记录： selectedCountry 是“用户”（用户居住的国家/地区）的属性。我使用这个循环所有用户：

```
<tbody class="sortable user_div" data-bind="sortable: { data: form.users }">
     <!-- Here a <tr> and all form elements, including the <select> above -->
</tbody> 
```

这在相同`tbody`的范围内起作用`select`：

```
<td><input type="text" data-bind="value: userName" /></td> 
```

我以相同的方式访问 userName 和 selectedCountry（如您所见）。两者都是 User 对象的属性。我 100% 肯定 selectedCountry 是正确的属性。当我切换 userName 和 selectedCountry 时，我在`<input type="text">`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:16:39.463

呜呜呜，我太傻了。

`<option data-bind="text: label"></option>`<-- 我没有绑定任何值。所以这是解决方案：

`<option data-bind="text: label, value: label"></option>`

# android - 如何确定要放置在 TextView 中的文本是否适合单行

> ID：14253236
> 
> 赞同：4
> 
> 时间：2013-01-10T08:04:02.373
> 
> 标签：android, listview, textview

有没有办法找出要放置在 TextView 中的文本内容是否适合单行？

我想要实现的内容显示在附加的图像中（它是 listView 的一部分）。问题涉及`textView#3`. 如果它太大，我想把它放在下面`textView#2`，但如果内容足够短，我想把它放在右边`textView#2`（看到的场景`row#3`是我想逃避的）

那么，有人吗？.. 我该如何解决这个特殊问题？我想象这无法通过我的列表视图行的单一布局来实现..

![在此处输入图像描述](../Images/c33c43faa14afecb64e8ed14a2db6ccd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:23:33.737

有可能的。您应该测量文本大小并将其与 TextView 大小进行比较。如果文本宽度 > textView 宽度比它太长。

[您可以从这篇文章](https://stackoverflow.com/questions/5033012/auto-scale-textview-text-to-fit-within-bounds)中了解文本测量。

您也可以使用 TextView 的内置功能，使其成为单行并设置文本椭圆大小的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:44:24.223

一个解决方案（不是一个漂亮的解决方案）是对您的字符串在 textView 中占用的空间进行一些数学运算。在我的特殊情况下，我添加了 2 个 textViews (3 & 3B) & 取决于我的数学计算结果 - 我会只使用一个并隐藏另一个。

细节：

1.  在适配器的 getView 方法中找出父 listView 的宽度

    public View getView(int position, View convertView, ViewGroup parent) { int listViewWidth = parent.getWidth();

2.  计算放置在同一行中的其他 textViews 占用的空间（在我的例子中只是 textView2）；

    油漆油漆 = textViewX.getPaint(); occupiedWidth = (int) (occupiedWidth +paint.measureText("要放置在 textview 中的文本"));

3.  比较要放置在最后一个 textview 中的文本占用的空间（在我的 screenShot textView3 中，计算宽度的公式相同）并与剩余空间进行比较（`listViewWidth - occupiedWidth`）

4.  在正确的 textView 上设置文本并隐藏另一个
5.  ..根据需要改进代码

![新版面](../Images/b4466454dde2eca00506f1d14c9cd3a0.png) ![结果](../Images/58394b7009edcc867c04a711ef1da9f6.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-20T13:21:25.990

**没有内置功能可以比较它。**

在做了很多研究和代码之后，我已经建立了自己的函数来做到这一点......

**1）将此代码复制到您的项目中**

```
 import android.app.Activity;
import android.content.res.Resources;
import android.util.DisplayMetrics;
import android.util.TypedValue;
import android.widget.TextView;

public class TextMeasure {

    public static boolean isTextCanFitInTextView(TextView textView, String txt , float allowWidthInDp , Activity activity){

        String backupText = textView.getText().toString();

        textView.setText(txt);
        textView.measure(0, 0);       //must call measure!
        float textViewSize_px = textView.getMeasuredWidth(); //get width in px

        // Converts dip into its equivalent px
        float dip = allowWidthInDp;
        Resources r = activity.getResources();
        float allowView_px = TypedValue.applyDimension(
                TypedValue.COMPLEX_UNIT_DIP,
                dip,
                r.getDisplayMetrics()
        );

        //restore textView
        textView.setText(backupText);

        return textViewSize_px <= allowView_px;
    }

    public static boolean isTextCanFitInTextView_matchParent(TextView textView, String txt , float totalMarginInDp, Activity activity){

        String backupText = textView.getText().toString();

        textView.setText(txt);
        textView.measure(0, 0);       //must call measure!
        float textViewSize_px = textView.getMeasuredWidth(); //get width in px

        // Converts dip into its equivalent px
        float dip = totalMarginInDp;
        Resources r = activity.getResources();
        float totalMarginInDp_px = TypedValue.applyDimension(
                TypedValue.COMPLEX_UNIT_DIP,
                dip,
                r.getDisplayMetrics()
        );

        float allowView_px;
        float window_length;

        window_length = getDisplayWidthInPixel(activity);

        allowView_px = window_length - totalMarginInDp_px;

        //re store textView
        textView.setText(backupText);

        return textViewSize_px <= allowView_px;
    }

    private static float getDisplayWidthInPixel(Activity activity){
        DisplayMetrics metrics = new DisplayMetrics();
        activity.getWindowManager().getDefaultDisplay().getMetrics(metrics);
        return  metrics.widthPixels;
    }

} 
```

**2）使用上面的类方法来做你的 text 和 textView 比较，例如：**

*1）知道确切的宽度，`android:layout_width="300dp"`*

```
 TextView yourTextView = findViewById(R.id.txt);
        float widthOfTextView_inDp = 300f;      // width of textView Size in dp (densityPixel) , what you set in xml view

        String yourTxt = "your text need to display in single line";

        if (TextMeasure.isTextCanFitInTextView(yourTextView,yourTxt,widthOfTextView_inDp,this)){
            // text can fit in to text View
            yourTextView.setText(yourTxt);

        }else {
            // text can't fit in to text View

            // add your logic
        } 
```

*2) match_parent 用来设置宽度。*

`android:layout_marginStart="10dp"` `android:layout_marginEnd="10dp"` `android:layout_width="match_parent"`

```
 TextView yourTextView = findViewById(R.id.txt);
        float totalMargin_inDp = 20f;      // width of text view is match_parent and (marginStart = 10dp), (marginEnd = 10dp) = 20dp, note: it is total margin from both end of mobile screen combine.

        String yourTxt = "your text need to display in single line";

        if (TextMeasure.isTextCanFitInTextView_matchParent(yourTextView,yourTxt,totalMargin_inDp,this)){
            // text can fit in to text View
            yourTextView.setText(yourTxt);

        }else {
            // text can't fit in to text View

            // add your logic
        } 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-10T10:30:12.363

试试textview的这个属性

```
android:maxLength="number of characters you want to display in textview" 
```

现在在 Activity 中检查字符串长度是否大于 maxLength，而不是更改视图的位置。

# java - 如何获取自定义类对象的java.lang.Type对象？

> ID：14253240
> 
> 赞同：3
> 
> 时间：2013-01-10T08:04:08.317
> 
> 标签：java, generics, reflection

我想使用 Java`Generics`特性来实现一个通用的功能。但是我不知道如何`java.lang.reflect.Type`为自定义类对象获取对象。以下是我想从给定类名中获取 Type 并将其传递`ProcessedResult<T>`给 replace 的情况`T`：

```
String className = getClassName();
Class clazz = Class.forName(className);
Type type = null;
ProcessedResult<T> result = new ProcessedResult<T>(); 
```

我尝试使用`ProductModel.class.getGenericSuperclass()`，但作为它的名称，它只返回其超类的类型。

有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T08:39:02.720

您不能将运行时确定的类型指定为泛型类型的编译时替换。

[由于类型擦除](http://en.wikipedia.org/wiki/Generics_in_Java)，您的类型`T`实际上仅在编译时强制执行。因此，当您在运行时拥有实际类型时，任何信息或检查都已经完成并消失了。

您`ProcessedResult`将不得不使用 a `Class<T>`or`Type`对象来做任何有用的工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T08:13:57.563

`java.lang.reflect.Type`不是**通用**接口。

另外，如果您想要`Type`使用，

您可以使用`instance.getClass()`or `ClassName.class`，因为它返回`Class<?>`并`Class`实现`Type`接口。所以它应该工作。

您将不得不使用`ProcessedResult<Type>`或`ProcessedResult<Class<?>>`

# hadoop - 映射前在 Hadoop Mapper 中从 DBMS 中查询数据

> ID：14253242
> 
> 赞同：0
> 
> 时间：2013-01-10T08:04:12.450
> 
> 标签：hadoop, mapreduce

我对 Hadoop 中的 MapReduce 有点陌生。我正在尝试处理来自许多日志文件的条目。[映射器过程与WordCount](http://hadoop.apache.org/docs/r0.18.3/mapred_tutorial.html)教程中的过程非常相似。

```
public void map(LongWritable key, Text value, OutputCollector<Text, IntWritable> output, Reporter reporter) throws IOException {
    String line = value.toString();
    StringTokenizer tokenizer = new StringTokenizer(line);
    while (tokenizer.hasMoreTokens()) {
        word.set(tokenizer.nextToken());
        output.collect(word, one);
    }
} 
```

事情不是把这个词作为reducer的键，我想把一个表中的相关数据放在RDBMS中。比如处理后的文字是这样的

```
apple orange duck apple giraffe horse lion, lion grape 
```

还有一张桌子

```
name     type
apple    fruit
duck     animal
giraffe  animal
grape    fruit
orange   fruit
lion     animal 
```

所以，我不想数单词，而是数类型。输出就像

```
fruit 4
animal 5 
```

假设在前面的代码中，它会是这样的

```
public void map(LongWritable key, Text value, OutputCollector<Text, IntWritable> output, Reporter reporter) throws IOException {
    String line = value.toString();
    StringTokenizer tokenizer = new StringTokenizer(line);
    while (tokenizer.hasMoreTokens()) {
        String object = tokenizer.nextToken();
        //========================================
        String type = SomeClass.translate(object);
        //========================================
        word.set(type);
        output.collect(word, one);
    }
} 
```

这`SomeClass.translate`将通过从 RDBMS 查询将对象名称转换为类型。

我的问题

1.  这是可行的吗？（以及如何做到这一点？）
2.  有什么顾虑？我了解到映射器将在多台机器上运行。那么假设有多`apple`台机器上的话，如何减少查询数据库的次数`apple`呢？
3.  或者有没有在映射器中进行翻译的非常好的选择？或者也许有一种常见的方法可以做到这一点？（或者这整个问题是一个非常愚蠢的问题？）

**更新**

我在 Amazon Elastic MapReduce 上使用 Apache Hadoop 实现它，并且转换表存储在 Amazon RDS/MySQL 中。如果您能提供一些示例代码或链接，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:35:32.657

总结一下需求，在表中的数据和文件之间进行连接，并对连接的数据进行计数。根据数据的输入大小，可以使用不同的方式（仅限 M 或 MR）连接。有关加入的更多详细信息，请参阅[使用 MapReduce 进行数据密集型文本处理](http://lintool.github.com/MapReduceAlgorithms/index.html)- 第 3.5 节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T18:43:54.020

如果您担心最小化数据库查询，您可以在两个 MR 作业中执行此操作：首先进行标准字数统计，然后使用该作业的输出进行翻译以输入并重新求和。

或者，如果您的映射表足够小以适合内存，您可以首先将其序列化，将其添加到 DistributedCache，然后将其作为 Mapper 设置方法的一部分加载到内存中。那么就不用担心翻译太多次了，因为它只是一个廉价的内存查找。

# c# - 在保持前导零的同时增加字符串

> ID：14253243
> 
> 赞同：3
> 
> 时间：2013-01-10T08:04:19.067
> 
> 标签：c#, regex

我需要一种算法来生成一组库存项目序列号，从起始序列开始工作。

例如，起始序列为`B10S001`，并生成 3 个数字，结果应该是 -

```
B10S001
B10S002
B10S003 
```

但是，如果起始序列为`B10S998`，并生成 3 个数字，则结果应该是 -

```
B10S998
B10S999
B10T000 
```

即数字的数量必须保持不变，必要时最后一个字母递增。

注意 - 我不知道第一个序列号的结构。它可以是任意长度以及字母和数字的任意组合。

我现在使用的代码是：

```
public static string IncrementNumber(string pNumber) {
    string newNum = "";
    var match = Regex.Match(pNumber, @"(?<=(\D|^))\d+(?=\D*$)");
    if (match.Success) {
        var number = int.Parse(match.Value) + 1;
        newNum = string.Format(
            "{0}{1}{2}",
            pNumber.Substring(0, match.Index),
            number,
            pNumber.Substring(match.Index + match.Length));
        }
    return newNum;
} 
```

这给了我一些帮助，但会删除前导零，并且不会增加 alpha。不太了解正则表达式（从论坛帖子中复制上述代码） - 任何想法如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:52:46.147

鉴于您有整数值和字母，这里是您需要做的一些伪代码：

```
fun CreateSerial(value, letter):
  value = value + 1
  if value == 1000:
    letter = letter + 1
    if letter > 'Z':
      letter = 'A'
  if value < 10:
    return "B10" + letter + "00" + value
  else if value < 100:
    return "B10" + letter + "0" + value
  else:
    return "B10" + letter + value 
```

**编辑**：这是没有模式匹配的伪代码。

```
fun IncrementSerial(serial):
  IncrementNext(serial, serial.length - 1)

fun IncrementNext(serial, index):
  if index == 0:
    return
  if serial[index - 1] is numeral:
    IncrementNumeral(serial, index - 1)
  else:
    IncrementAlpha(serial, index - 1)

fun IncrementNumeral(serial, index):
  number = serial[index] + 1
  if number > '9':
    number = '0'
    IncrementNext(serial, index - 1)
  serial[index] = number

fun IncrementAlpha(serial, index):
  alpha = serial[index] + 1
  if alpha > 'Z':
    alpha = 'A'
    IncrementNext(serial, index - 1)
  serial[index] = alpha 
```

本质上，我们从末尾开始递增字母，如果溢出，则重置字母并转到下一个，在每次迭代时检查它的类型（数字与 alpha）。

如果我们达到最大序列号，它只会返回，您可以选择让它重置所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:58:30.067

您需要“手动”实现加法，就像在一张纸上进行长时间加法一样。首先，您需要将您的字符串视为一个数字，其中每个数字都有不同的基数。最右边的第三个数字以 10 为底，最右边的字母以 26 为底，然后是两个以 10 为底的数字，然后可能是另一个以 26 为底的数字。

现在你有了这个，从右边开始一个接一个地递增数字。取最右边的数字并将其加 1。如果没有溢出（也就是说，您没有从 9 到 0），那么您就完成了。如果发生溢出，则该数字变回 0，您需要将该数字向左递增。

当您到达 B10S999 时，您会增加最右边的数字并出现溢出。然后你增加倒数第二个数字并得到溢出。然后下一个数字并溢出。现在你增加了 S。下一个字母是 T，所以你得到 B10T000。

在您到达 B10Z999 并递增后，您将获得四次溢出，并以 B11A000 结束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T09:03:12.800

你为什么不把你所有的逻辑放在一个类中并完成它呢？显然，您的连续剧中有 4 个部分，

```
 class Serial{
     Serial(string s);

     char prefixLetter;
     int prefixNum;
     char middleLetter;
     int traillingNum;

     void increment();
     bool isvalid();
     string toString();

     //etc....
 } 
```

# c# - 如何检查是否在 Windows 中启用了 ClearType

> ID：14253249
> 
> 赞同：3
> 
> 时间：2013-01-10T08:04:50.297
> 
> 标签：c#, .net, vb.net

在我的应用程序中，我想在运行时在一些文本框控件上设置 Consolas 字体。由于 Consolas 是 ClearType 字体，并且只有在启用 ClearType 时才看起来不错，所以我想检查是否启用了 ClearType。

我可以检查 ClearType 是否启用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-21T16:50:52.417

您可以使用[FontSmoothingType](http://msdn.microsoft.com/en-us/library/system.windows.forms.systeminformation.fontsmoothingtype%28v=vs.110%29.aspx)属性`System.Windows.Forms.SystemInformation`

```
public static bool IsClearTypeEnabled
{
    get
    {
        try
        {
            return SystemInformation.FontSmoothingType == 2;
        }
        catch //NotSupportedException
        {
            return false;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:17:32.993

尝试使用[`SystemParametersInfo`](http://msdn.microsoft.com/en-us/library/ms724947.aspx)，请参阅此链接了解更多信息：

*   来自 MSDN 的[ClearType 抗锯齿](http://msdn.microsoft.com/en-us/library/dd183433.aspx)

和示例代码：

```
Private Declare Function SystemParametersInfo Lib "user32" Alias
    "SystemParametersInfoA" (ByVal uAction As Integer, _
    ByVal uParam As Integer, ByRef lpvParam As Integer, _
    ByVal fuWinIni As Integer) As Boolean

Private Const SPI_GETFONTSMOOTHINGTYPE As Integer = &H200A
Private Const FE_FONTSMOOTHINGCLEARTYPE As Integer = 2

Private Function IsClearTypeEnabled() As Boolean
    Dim uiType As Integer = 0
    Return SystemParametersInfo(SPI_GETFONTSMOOTHINGTYPE, 0, uiType, 0)
    AndAlso uiType = FE_FONTSMOOTHINGCLEARTYPE
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-17T14:01:31.763

除了@Claudio B 的回答之外，您可能还想检查该`SystemInformation.IsFontSmoothingEnabled`属性，该属性检查是否启用了字体平滑。这是 ClearType 的独立设置：

```
public static bool IsClearTypeEnabled
{
    get
    {
        return SystemInformation.IsFontSmoothingEnabled && 
             SystemInformation.FontSmoothingType == 2;
    } 
```

, 是

# java - Spring 集成 - 多个 Jboss 实例监听同一邮件服务器是否会导致重复？

> ID：14253256
> 
> 赞同：2
> 
> 时间：2013-01-10T08:05:04.467
> 
> 标签：java, spring, spring-integration

我有以下弹簧集成邮件配置。我的版本 1.0.4

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:aop="http://www.springframework.org/schema/aop"
xmlns:mail="http://www.springframework.org/schema/integration/mail"
xmlns:int="http://www.springframework.org/schema/integration"
xmlns:util="http://www.springframework.org/schema/util"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd
    http://www.springframework.org/schema/integration/mail
    http://www.springframework.org/schema/integration/mail/spring-integration-mail-2.1.xsd 
    http://www.springframework.org/schema/util 
    http://www.springframework.org/schema/util/spring-util-2.0.xsd">

    <util:properties id="javaMailProperties">
    <prop key="mail.imap.socketFactory.class">javax.net.ssl.SSLSocketFactory</prop>
    <prop key="mail.imap.socketFactory.fallback">false</prop>
    <prop key="mail.store.protocol">imaps</prop>
    <prop key="mail.debug">false</prop>
</util:properties>

 <mail:inbound-channel-adapter id="imapAdapter"
                                  store-uri="imaps://user:pass@domain:993/inbox"                                    
                                  channel="recieveEmailChannel"
                                  auto-startup="true"                                      
                                  java-mail-properties="javaMailProperties">
    <int:poller> 
    <int:interval-trigger initial-delay="1000" interval="2000"
    fixed-rate="true"/>
    </int:poller>
</mail:inbound-channel-adapter>

<int:channel id="recieveEmailChannel">        
    <int:interceptors>
        <int:wire-tap channel="logger"/>
    </int:interceptors>
</int:channel>

<int:logging-channel-adapter id="logger" level="DEBUG"/>

<int:service-activator input-channel="recieveEmailChannel" ref="emailReceiverService" method="receive"/>

<bean id="emailReceiverService" class="com.mycompany.DefaultEmailReceiverUtilService">
</bean> 
```

**问题**

Jboss 服务器的两个实例在不同的节点上运行，并且都指向同一个邮件服务器。我正在我的 DefaultEmailReceiverUtilService 类中插入一些数据库。是否可以在数据库中进行一封邮件双重输入？换句话说，相同的邮件将由两个 Jboss 处理。如果是，那么如何避免这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T13:32:20.637

是的，电子邮件不是交易资源。一种技术是确保一次只有一个适配器在运行，使用 JMX 等根据需要启动/停止适配器 - 将自动启动设置为“false”以防止它们在初始化期间启动并使用管理软件来控制它们. 如何使用另一个 Spring Integration 应用程序来管理另一个中的适配器的示例显示在“监控”示例应用程序（在中间文件夹中）中......

[https://github.com/SpringSource/spring-integration-samples](https://github.com/SpringSource/spring-integration-samples)

如果您需要多个实例来处理工作负载，那么您可以使用 AMQP、JMS 等将工作分配给其他实例。

如果第二个实例只是为了弹性，那么您的管理应用程序可以监控这两个实例，如果一个实例出现故障，则在另一个实例中启动适配器。

# php - 在php中做http基本认证

> ID：14253258
> 
> 赞同：0
> 
> 时间：2013-01-10T08:05:15.990
> 
> 标签：php, curl

我对 php 很陌生。我来自 Java 背景，我希望我应该进行 Http 基本身份验证。

我这样做`Groovy`是这样的：

```
def authString = "${key}:".getBytes().encodeBase64().toString()
def conn = url.toURL().openConnection()
conn.setRequestProperty("Authorization", "Basic ${authString}") 
```

我该怎么做`php`？

目前我正在使用`curl`in `php`。但是，如果我可以在没有 php 中的 curl 选项的情况下实现类似的事情，那就太好了。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:12:45.873

如果你有 $user 和 $pass，下面的代码就可以了。

```
curl_setopt($curl, CURLOPT_USERPWD, "$user:$pass"); 
```

如果没有 curl，您可以使用[stream_context_create](http://php.net/stream_context_create)函数来完成。

```
$opts = array(
  'http'=>array(
    'method'=>"GET",
    'header'=>"Authorization: Basic ".base64_encode("$user:$pass")."\r\n"
  )
);

$context = stream_context_create($opts);
$fp = fopen('http://www.example.com', 'r', false, $context);
// read the content from $fp here.
fclose($fp); 
```

# three.js - three.js - 管几何的缩放/变换

> ID：14253268
> 
> 赞同：3
> 
> 时间：2013-01-10T08:06:09.430
> 
> 标签：three.js

我有一个具有 174 个点、12 个半径段、100 个半径和 174 个段的管几何结构。当我双击管的任何部分时，将显示具有 +/- 8 点的管的缩放部分。现在的问题是当我点击管子的弯曲部分时，缩放部分看起来不如我点击管子的直线部分。

请在下面的 2 张图片中找到。![3d 全管](../Images/66af61568843cf3917d58042a9e60ab3.png)![在折弯处选择的部分](../Images/edba0d64a11dbd957738b94be77910d8.png)

请在此处找到[jsfiddle](http://jsfiddle.net/WT6jL/23/)。

请在下面找到缩放代码。

```
tube = new THREE.TubeGeometry(extrudePath, segments, 100, radiusSegments, closed, debug);           
            tube.dynamic = true;

            tube.computeBoundingBox();
            console.log(tube);          
            tube.scale.x = tube.boundingBox.max.x;
            tube.scale.z = tube.boundingBox.max.z; 
```

**无论如何要适当地缩放它或将弯曲部分转换成圆柱体，使其看起来像管子的直线部分？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-05T05:39:26.743

我认为你正在做的缩放是不合适的。由于您尝试缩放的部分可能没有沿 y 轴的轴，因此仅缩放 x 和 z 参数会导致失真。是否可以知道截面的轴？然后有2种方法-

1) 旋转截面，使轴与 y 轴对齐，缩放 x 和 z 坐标并将截面旋转回来。

2）想出一个公式来缩放具有任意方向的轴的圆柱体。

由于这是一个非常古老的问题，您可能已经有了答案。如果我错了，请告诉我什么对你有用。

# php - 构建“最新消息”

> ID：14253270
> 
> 赞同：0
> 
> 时间：2013-01-10T08:06:14.437
> 
> 标签：php, project

我正在用 PHP/MySQL 构建一个简单而小型的项目管理工具，其中包括：

```
1-> Projects
1.1-> Tasks
1.1.1-> Task Comments
1.1.2-> Task Notes
1.1.3-> Task Files 
```

因此，每个用户都登录到他们的帐户并查看分配给他们的任务等。

当用户登录时，我想在他们的仪表板上显示“最新消息”，如下所示：

```
"5 New comments posted to task xyz"
"3 New files added to task abc"
etc... 
```

新内容需要从他们之前注销时开始显示。

有没有好的第三方解决方案来实现这一点？任何建议和想法都将受到热烈欢迎。

谢谢

示例：用户 ABC 被分配到 10 个任务。他最后一次登录是在 5 天前。现在，他再次登录。在此期间，发生了很多活动。5 条“新”评论已发布到他没有看到的“任务 1”。3 注释已添加到他没有看到的“任务 2”中。

所以我想要一个显示过去 5 天活动的功能，以便用户知道在他缺席期间发生了什么。

我可以使用本地数据库创建一些东西，但这将涉及频繁的数据库事务。所以我想知道是否有任何第三方服务存储整个活动并在我需要时返回它。

这可以通过“Pusher (pusher.com)”来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:11:19.100

您正在寻找的是一个`project management system`.

您可以尝试以下任何方法：

1.  [basecamp.com](http://basecamp.com/)
2.  [trello.com](https://trello.com/)

我已经使用了上述两个网站，它们都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:29:51.693

最简单的方法可能是这样的

```
SELECT count(*) FROM task_comments 
  WHERE task='your_task_id' 
  AND creation_date > (SELECT last_login FROM users WHERE user='user_id'); 
```

请注意，这需要更改以适合您的数据库模式。我不确定日期比较是否像这样工作，但这不应该很难弄清楚。

您需要对可以添加到任务的每个条目运行查询，因此您需要一个用于注释、注释和文件的条目。

# silverlight - Silverlight 文本框 VisibilityChanged 事件

> ID：14253273
> 
> 赞同：1
> 
> 时间：2013-01-10T08:06:25.463
> 
> 标签：silverlight, events, data-binding, textbox, visibility

我正在使用 Silverlight C# 和 XAML 开发 Windows Phone 应用程序。我的页面包含一个ListBox，它呈现用户可以操作的数据绑定对象列表，即添加/重命名/删除。

我已经让项目的添加/重命名*就地完成了*，即通过根据对象（`bool IsEditable`属性）的状态将 TextBlock 交换为 TextBox 并使用参数化`VisibilityConverter`来管理相反的可见性状态。

```
<UserControl.Resources>
    <local:VisibilityConverter x:Key="VisibilityConverter" True="Visible" False="Collapsed"/>
    <local:VisibilityConverter x:Key="InvertedVisibility" True="Collapsed" False="Visible"/>
</UserControl.Resources>
...
<TextBlock Text="{Binding Name}" Visibility="{Binding IsEditable, Converter={StaticResource InvertedVisibility}}" />
<TextBox Text="{Binding Name}" Visibility="{Binding IsEditable, Converter={StaticResource VisibilityConverter}}"/> 
```

问题是我还希望 TextBox 在可见时自动获取焦点，以便用户无需点击 TextBox 即可弹出屏幕键盘。

由于常规 TextBox 上没有 VisibilityChanged 事件，因此我将 TextBox 子类化为 TextBox2 并添加了我自己的：

```
public class TextBox2 : TextBox
{
    public TextBox2()
    {
        DefaultStyleKey = typeof(TextBox);
    }

    public static readonly DependencyProperty VisibilityChangedProperty = DependencyProperty.Register(
        "VisibilityChanged",
        typeof(string),
        typeof(TextBox2),
        new PropertyMetadata("Set the VisibilityChanged event handler"));

    public event VisibilityChangedEventHandler VisibilityChanged;

    public delegate void VisibilityChangedEventHandler(object sender, EventArgs e);

    public new Visibility Visibility
    {
        get
        {
            return base.Visibility;
        }
        set
        {
            if (base.Visibility != value)
            {
                base.Visibility = value;
                VisibilityChanged(this, new EventArgs());
            }
        }
    }
} 
```

现在我的 XAML 看起来像这样：

```
<TextBlock Text="{Binding Name}" Visibility="{Binding IsEditable, Converter={StaticResource InvertedVisibility}}"/>
<local:TextBox2 Text="{Binding Name}" Visibility="{Binding IsEditable, Converter={StaticResource VisibilityConverter}}" VisibilityChanged="ListEdit_VisibilityChanged"/> 
```

和这样的事件处理程序：

```
void ListEdit_VisibilityChanged(object sender, EventArgs e)
{
    TextBox textBox = (TextBox)sender;
    if (textBox.Visibility == System.Windows.Visibility.Collapsed)
        return;
    textBox.Focus();
} 
```

TextBox2 正确呈现并且在运行时的行为就像 TextBox 一样，**但是**当数据绑定翻转`IsEditable`.

`IsEditable`定义了可见性并且 TextBox2 确实变得正确可见，因此数据绑定正在工作。

我可以通过获取 TextBox2 实例并在代码中设置它的可见性来以编程方式触发事件。这也有效。

但是这个负责设置可见性的数据绑定方案似乎不起作用。

有什么想法为什么不呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:09:09.020

这是我使用的 2 个解决方案。

解决方案 1 不需要子类，但解决方案 2 更可重用。

**1** . 您可以订阅 的`Loaded`事件`TextBox`，并强制获得焦点，如下所示：

```
 void TextBox_Loaded_Focus(object sender, System.Windows.RoutedEventArgs e) {
        ForceFocusControl((Control)sender);            
    }

    void ForceFocusControl(Control control) {

        control.Focus();

        if (FocusManager.GetFocusedElement() != control) {

            Dispatcher.BeginInvoke(() => ForceFocusControl(control));
        }
    } 
```

尽管此解决方案进入递归循环，但您可能需要添加一些检查以使其更安全。

**2** . 保留您的 subclass `TextBox2`，而是创建一个`MyVisibility`绑定到基类属性的私有依赖属性`Visibility`，但还要指定一个 DependencyProperty_Changed 处理程序，如下所示：

```
 /// <summary>
    /// <see cref="TextBox2"/> will focus itself when it becomes visible.
    /// </summary>
    public sealed class TextBox2 : TextBox {

        public TextBox2() {

            SetBinding(TextBox2.MyVisibilityProperty, new Binding("Visibility") { Source = this });
        }

        static readonly DependencyProperty MyVisibilityProperty = DependencyProperty.Register(
            /* name = */ "MyVisibilityProperty",
            /* property type = */ typeof(Visibility),
            /* owner type = */ typeof(TextBox2),
            /* meta = */ new PropertyMetadata(MyVisibilityProperty_Changed));

        static void MyVisibilityProperty_Changed(DependencyObject d, DependencyPropertyChangedEventArgs e) {

            TextBox2 TextBox2 = (TextBox2)d;

            if (TextBox2.Visibility == Visibility.Visible) {
                TextBox2.Focus();
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:32:58.063

这就是我的 TextBox2 类现在的样子：

```
public class TextBox2 : TextBox
{
    public event VisibilityChangedEventHandler VisibilityChanged;
    public delegate void VisibilityChangedEventHandler(object sender, EventArgs e);
    public static readonly DependencyProperty VisibilityChangedProperty = DependencyProperty.Register(
        "VisibilityChanged", typeof(VisibilityChangedEventHandler), typeof(TextBox2), null);

    static readonly DependencyProperty MirrorVisibilityProperty = DependencyProperty.Register(
        "MirrorVisibility", typeof(Visibility), typeof(TextBox2), new PropertyMetadata(MirrorVisibilityChanged));

    public TextBox2()
    {
        SetBinding(TextBox2.MirrorVisibilityProperty, new Binding("Visibility") { Source = this });
    }

    static void MirrorVisibilityChanged(DependencyObject obj, DependencyPropertyChangedEventArgs e)
    {
        ((TextBox2)obj).VisibilityChanged(obj, null); // raise event
    }
} 
```

# iphone - 如何以编程方式单击/按下导航项上的条形按钮

> ID：14253274
> 
> 赞同：0
> 
> 时间：2013-01-10T08:06:27.880
> 
> 标签：iphone, objective-c, ios6, uibutton, uibarbuttonitem

我有如下 iPhone。

![在此处输入图像描述](../Images/d979987d45075fa6ce1bc06c0b51113c.png)

我想要的是单击`Refresh`按钮`Delete`**以编程方式**单击按钮。

**注意：**我也为`Refresh`按钮提供了标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:29:24.657

我假设你有`delete and refresh actions`说

```
 -(IBAction)deleteAction:(id)sender 
 -(IBAction)refreshAction:(id)sender: 
```

现在`delete action` `call` `refresh action`就像这样：

```
-(IBAction)deleteAction:(id)sender
{
    [self refreshAction:btnRefresh]; //provide refresh action along with refersh button
    //I mean here act according to refresh method.
} 
```

# ios - 移动导航栏框架是否正确？

> ID：14253284
> 
> 赞同：0
> 
> 时间：2013-01-10T08:07:17.887
> 
> 标签：ios, ipad, cocoa-touch, uinavigationcontroller, navigationbar

我有一个基于导航栏的 ipad 应用程序。

在某些时候，我想将另一个视图控制器推送到视图控制器层次结构中。然后，当用户点击某个按钮时，我想显示一个 leftMenu 控制器。为此，我有两种观点：

包含所有内容的内容视图

还有一个不可见的视图，即 leftMenu。这个在内容视图下。

因此，当用户按下按钮时，我现在正在做的是将内容视图和导航栏向右移动以使 leftMenu 可见：

```
 self.navigationController.navigationBar.frame = CGRectMake(271.0, self.navigationController.navigationBar.frame.origin.y, self.navigationController.navigationBar.frame.size.width, self.self.navigationController.navigationBar.frame.size.height);

    self.contentView.frame = CGRectMake(271.0, self.contentView.frame.origin.y, self.contentView.frame.size.width, self.contentView.frame.size.height); 
```

这是可行的，但左侧菜单中的第一行在导航栏应该位于的位置是不可“点击的”。它就像导航栏仍然在那里捕获选项卡事件。

这样做是否正确：

```
 self.navigationController.navigationBar.frame = CGRectMake(271.0, self.navigationController.navigationBar.frame.origin.y, self.navigationController.navigationBar.frame.size.width, self.self.navigationController.navigationBar.frame.size.height); 
```

如果不是，那么实现我想要的正确方法是什么？

继承人和图像说明了问题所在：

[![例子](../Images/524db3923bb21092d895d0506f46653e.png)](https://i.stack.imgur.com/XZ0aW.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:03:55.430

我认为最好使用自定义容器控制器来做这种事情，而不是移动导航栏。在 IB 中，这可以很容易地设置。从 UIViewController 开始，向其中添加容器视图，然后根据需要调整大小。然后在检查器中，将它的 x 值设置为减去它的宽度，这会将它放在屏幕左侧。然后添加另一个容器视图并将其调整为全屏。然后，您可以删除使用该容器视图获得的视图控制器，然后从容器视图右拖动到您的初始导航控制器（您已经设置的 UI 的）以将其与嵌入 segue 连接起来。您开始使用的 UIViewController 应该成为情节提要的初始视图控制器。要在侧视图中移动，我在该自定义容器控制器中使用此代码：

```
-(void)slideInLeft {
    if (isRevealed == NO) {
        [UIView animateWithDuration:.6 animations:^{
            leftView.center = CGPointMake(leftView.center.x + 100, leftView.center.y);
            mainView.center = CGPointMake(mainView.center.x + 100, mainView.center.y);
        } completion:^(BOOL finished) {
            isRevealed = YES; ;
        }];
    }else{
        [UIView animateWithDuration:.6 animations:^{
            leftView.center = CGPointMake(leftView.center.x - 100, leftView.center.y);
            mainView.center = CGPointMake(mainView.center.x - 100, mainView.center.y);
        } completion:^(BOOL finished) {
            isRevealed = NO;
        }];
    }

} 
```

leftView 和 mainView 是 2 个容器视图的 IBOutlets。我从主视图控制器（嵌入在大型容器视图中的导航控制器的根视图控制器）中的按钮调用此方法：

```
-(IBAction)callSlideIn:(id)sender {
    [(ViewController *)self.navigationController.parentViewController slideInLeft];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:22:02.380

我找到了一种“快速”的方法来实现这一点（而且有点 hacky imo）

我将 leftMenu 视图添加到视图层次结构的顶部视图中：

```
UIWindow* window = [UIApplication sharedApplication].keyWindow;
if (!window)
    window = [[UIApplication sharedApplication].windows objectAtIndex:0];

[[[window subviews] objectAtIndex:0] addSubview:self.leftMenu.view]; 
```

现在它没有导航栏那么深，当然，它的可点击性

# compiler-construction - Aptana Studio 3 是否支持较少的 css 编译？

> ID：14253285
> 
> 赞同：4
> 
> 时间：2013-01-10T08:07:18.917
> 
> 标签：compiler-construction, aptana, less

我想知道 Aptana Studio 3 是否具有较少的 css 编译器功能。我使用了 Simpless 的程序，但我没有偶然打开 Simpless。我编辑并保存了less文件，并自动创建了一个css文件。我搜索了谷歌，但找不到它具有该功能。我什至将 Simpless 移至其他驱动器，但它可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:51:04.897

似乎一年多以前，它只需要[进行一些调整](https://aptanastudio.tenderapp.com/discussions/suggestions/357-less-support)即可支持 LESS。我没有找到比该讨论帖更正式的东西来验证。

[这个问题目前仍然是开放的](https://jira.appcelerator.org/browse/APSTUD-3896?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel)，但似乎更多地处理一些编辑器功能而不是实际编译。

然而，仅仅通过你的证词，它*似乎*可以回答你的问题。如果使它起作用的更改实际上就像上面第一个帖子链接所示的那样简单，我不知道为什么它不会在去年合并。

有关语法突出显示，请参阅[此 stackoverflow 答案](https://stackoverflow.com/questions/9752123/advanced-custom-syntax-coloring-for-aptana-studio-3-less)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T07:43:29.197

窗户的这个答案

Windows 上的 LESS + Aptana。 [https://less.tenderapp.com/discussions/questions/17-window-user-aptana-studio](https://less.tenderapp.com/discussions/questions/17-window-user-aptana-studio)

# c# - 如何使只有经过身份验证的用户才能访问 div

> ID：14253291
> 
> 赞同：0
> 
> 时间：2013-01-10T08:07:37.180
> 
> 标签：c#, asp.net, web-config, roles

我有一个内部 page.aspx，并且我创建了一个名为 Premium 的角色。我希望所有用户都能看到 page.aspx，但只有高级用户才能看到 div。

我的 web.condig

```
<location path="?">
<system.web>
    <authorization>
      <allow roles="Premium" />
      <deny users="*" />
    </authorization>
</system.web> 
```

我现在不知道如何编写它，所以只有高级角色中的用户才能看到

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T08:11:06.327

最简单的方法是使用一条`if`语句来控制该部分页面的输出：

```
<% if(User.IsInRole("Premium")) { %>
<div> blah </div>
<% } %> 
```

当然，您可以创建一个`UserControl`包含此逻辑的或类似的内容，从而将条件表达式推出主机页面并让页面始终简单地呈现控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:11:30.757

您可以将高级部分设置为在控制器中有自己的方法的部分视图，您可能需要角色*Premium*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T08:17:56.613

在您的 page.aspx 中，执行以下操作：

```
<%if (Request.IsAuthenticated){ %>
    <%if HttpContext.Current.User.IsInRole("premium"){ %>
        <div>premium content</div>
    <%} %>
<%}%> 
```

# excel - 将单个工作表的数据分离到excel中的两个工作表（VBA或其他解决方案）

> ID：14253293
> 
> 赞同：0
> 
> 时间：2013-01-10T08:07:41.107
> 
> 标签：excel, vba

我有一个包含以下形式的 1000 个条目的数据集：

ID 名称 值

* * *

1 名称1 55
2 名称1 5
3 名称2 6
4 名称1 44
5 名称2 33
6 名称1 22

这些数据都包含在一个工作表中。我希望excel根据名称分隔数据，然后将每一行放在同一个工作簿中的单独工作表中。对于上述数据，excel 必须创建两个工作表（Name1 和 Name2）。

我尝试宏记录，但无法修复生成的宏。它适用于当前数据，但在添加新数据后，宏不能正常工作。

这可能与 VBA 或其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:05:05.913

该代码应该可以满足您的要求：

```
Sub Macro2()

Range("B2").Select
Do Until Selection.Value = "xxx"
    If Selection.Value = "Name1" Then
        ActiveCell.Rows("1:1").EntireRow.Select
        Application.CutCopyMode = False
        Selection.Copy
        Sheets("Sheet2").Select
        ActiveCell.Offset(1, 0).Range("A1").Select
        ActiveSheet.Paste
    Else
        ActiveCell.Rows("1:1").EntireRow.Select
        Application.CutCopyMode = False
        Selection.Copy
        Sheets("Sheet3").Select
        ActiveCell.Offset(1, 0).Range("A1").Select
        ActiveSheet.Paste
    End If
    Sheets("Sheet1").Select
    ActiveCell.Offset(1, 1).Select

Loop
End Sub 
```

假设：

1-主要数据在 sheet1 内

2-有 sheet2 和 sheet3 可用于将数据复制到

3-在最后一行数据之后添加一行，每个单元格都有 xxx 否则它是一个无限循环

4- Name1 和 Name2 在 B 列中

# c++ - 无法打印指向 0 的 char*

> ID：14253299
> 
> 赞同：0
> 
> 时间：2013-01-10T08:08:09.450
> 
> 标签：c++

在这里，comment2 打印得很完美。其中没有打印注释，并且程序在执行该语句后立即结束。任何人都可以提供解决方案吗？

```
#include <iostream>
int main()
{
   const char * comment = 0;
   const char * comment2 = "hello this is not empty";
   std::cout << std::endl;
   std::cout << comment2 << std::endl;
   std::cout << "printing 0 const char *" << std::endl;
   std::cout << comment << std::endl;
   std::cout << "SUCCESSFUL" << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T08:11:31.437

取消引用空指针是未定义的行为，这会`comment`产生空指针：

```
const char * comment = 0; 
```

如果要将空字符串更改为：

```
const char* comment = ""; 
```

或使用`std::string`：

```
std::string comment; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T08:09:32.587

将指针分配给 0 意味着将其分配给 NULL。如果您想要字符 0，请将其更改为字符串“0”或空字符串“”。

```
const char * comment = ""; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T08:10:17.457

`std::cout << comment << std::endl;`

当`comment`为 0 时，我们称之为分段错误，是灾难性的崩溃。你打算在这里发生什么？

你想`const char * comment = "0";`打印 0
你可以做什么`const char * comment = "";` 来表示空字符串。

* * *

`const char *`是一个指针。当分配给它 0 时，它变成了一个空指针，因为它现在是一个指向空的指针。当您执行 cout 时，库会尝试访问该位置的内存，这个过程称为取消引用指针。这会导致崩溃，如下所述。

来自[维基百科](http://en.wikipedia.org/wiki/Pointer_%28computer_programming%29#C_pointers)

> 在 C 中取消引用空指针会产生未定义的行为，[5] 这可能是灾难性的。然而，大多数实现[需要引用] 只是简单地停止执行有问题的程序，通常会出现分段错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T08:10:33.323

```
const char * comment = 0; 
```

等于

```
const char * comment = NULL; 
```

如果要打印字符`0`，请尝试以下代码：

```
const char * comment = "0"; 
```

当您标记 c++ 时，更好地使用

`std::string comment("0");`

# database - 访问按钮 VBA 问题和子表单问题

> ID：14253306
> 
> 赞同：0
> 
> 时间：2013-01-10T08:08:32.430
> 
> 标签：database, ms-access, database-design, vba

我正在研究一个关键库存数据库。管理谁签出房间钥匙以及何时将它们带回来的东西。我已经创建了我计划使用的表格并开始处理表格。但是，我无法让表单/子表单按需要工作。

我创建了按钮来添加/编辑/删除/等子表单中的记录，这些记录是表格的结果。我已经根据我在数据库类中所做的一个旧项目对按钮进行了编码（然后其他人做了表格，我做了查询）。我似乎无法让他们工作。到目前为止，我只编写了“mainKeys”表单的按钮。

我注意到主表单显示了 14 条记录中的 1 条，而我旧项目中的表单只显示了子表单中的所有记录。

这是访问文件：http: [//jumpshare.com/b/W7AKih](http://jumpshare.com/b/W7AKih)

这是我的旧项目（这是我试图复制的）：http: [//jumpshare.com/b/r7Y6O1](http://jumpshare.com/b/r7Y6O1)

这是按钮的代码：

```
Option Compare Database

Private Sub cmdAdd_Click()
If Me.keyID.Tag & "" = "" Then
    CurrentDb.Execute "INSERT INTO KEYS(KEY_ID, ROOM, DRAWER)" & _
        " VALUES(" & Me.keyID & ",'" & Me.roomID & "'," & Me.drawerID & ")"
          subKey.Form.Requery
Else
    CurrentDb.Execute "UPDATE KEYS " & _
    " SET KEY_ID=" & Me.keyID & _
    ", ROOM='" & Me.roomID & "'" & _
    ", DRAWER='" & Me.drawerID & "'" & _
    " WHERE KEY_ID=" & Me.keyID.Tag
End If
cmdReset_Click
subKey.Form.Requery
End Sub

Private Sub cmdBack_Click()

End Sub

Private Sub cmdDelete_Click()
If Not (Me.subKey.Form.Recordset.EOF And Me.subKey.Form.Recordset.BOF) Then
    If MsgBox("Confirm Deletion?", vbYesNo) = vbYes Then
        CurrentDb.Execute "DELETE FROM KEYS" & _
            " WHERE KEY_ID=" & Me.subKey.Form.Recordset.Fields("KEY_ID")
                Me.subKey.Form.Requery
    End If
End If
End Sub

Private Sub cmdEdit_Click()
If Not (Me.subKey.Form.Recordset.EOF And Me.subKey.Form.Recordset.BOF) Then
        With Me.subKey.Form.Recordset
            Me.keyID = .Fields("KEY_ID")
            Me.roomID = .Fields("ROOM")
            Me.drawerID = .Fields("DRAWER")
            Me.keyID.Tag = .Fields("KEY_ID")
            Me.cmdAdd.Caption = "Update Record"
            Me.cmdEdit.Enabled = False
        End With
End If
End Sub

Private Sub cmdExit_Click()
 DoCmd.Close
End Sub

Private Sub cmdReset_Click()
    Me.keyID = ""
    Me.roomID = ""
    Me.drawerID = ""

    Me.keyID.SetFocus
    Me.cmdEdit.Enabled = True
    Me.cmdAdd.Caption = "ADD KEY"
    Me.keyID.Tag = ""
End Sub 
```

从我可以看到重置和退出按钮工作得很好，添加/删除/更新记录没有。此外，这是我正在为我学校的一个办公室做的一个小项目。如果有人对他们在文件中看到的内容有任何建议，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:15:40.843

没有发生任何事情的原因是数据库中的事件行设置为`[Embedded Macro]`而不是`[Event Procedure]`，因此您发布的代码永远不会运行。当您遇到问题以查看代码是否到达时，设置断点总是明智的。

在那之后，在我看来，你会在一种方式上遇到太多麻烦，而在另一种方式上却太少了。当 Access 可以很好地处理对子表单的添加时，不要编写所有插入代码，而是编写更多检查代码以确保数据处于良好状态。

# ios - NSFetchedResultsController 错误的部分编号

> ID：14253310
> 
> 赞同：0
> 
> 时间：2013-01-10T08:08:48.837
> 
> 标签：ios, core-data, uitableview, sections

我的步骤是：

1.  推TVC。
2.  使用托管对象上下文初始化新 FRC。
3.  执行抓取。
4.  有两个部分，每个部分有一行。
5.  执行 FRC 中使用的获取请求。
6.  得到包含两个元素的数组。
7.  删除最后一行并保存 MOC。
8.  流行电视节目。
9.  推TVC。
10.  使用相同的 MOC 初始化新的 FRC。
11.  执行抓取。
12.  有两个部分。
13.  执行 FRC 中使用的获取请求。
14.  得到一个元素的数组。

我尝试在执行提取之前调用 deleteCacheWithName 但没有成功。

我不明白该怎么做。

崩溃日志：

```
2013-01-10 12:27:47.948 MyApp[59830:c07] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[_PFArray objectAtIndex:]: index (1) beyond bounds (1)' 
```

应用程序崩溃的代码行：

```
Card *card = [self.fetchedResultsController objectAtIndexPath:indexPath]; 
```

这是斯坦福课程的 CoreDataTableViewController.m：

```
//
//  CoreDataTableViewController.m
//
//  Created for Stanford CS193p Fall 2011.
//  Copyright 2011 Stanford University. All rights reserved.
//

#import "CoreDataTableViewController.h"

@interface CoreDataTableViewController()

@property (nonatomic) BOOL beganUpdates;

@end

@implementation CoreDataTableViewController

#pragma mark - Fetching

- (void)performFetch {
    if (self.fetchedResultsController) {
        NSLog(@"TVC: Perform fetch");

        NSError *error;
        [self.fetchedResultsController performFetch:&error];

        if (error)
            NSLog(@"[%@ %@] %@ (%@)", NSStringFromClass([self class]), NSStringFromSelector(_cmd), [error localizedDescription], [error localizedFailureReason]);

        NSLog(@"TVC: Number of fetched objects in FRC: %d", self.fetchedResultsController.fetchedObjects.count);
        NSLog(@"TVC: Number of sections in FRC: %d", self.fetchedResultsController.sections.count);
    } else {
        NSLog(@"[%@ %@] no NSFetchedResultsController (yet?)", NSStringFromClass([self class]), NSStringFromSelector(_cmd));
    }

    [self.tableView reloadData];
}
- (void)setFetchedResultsController:(NSFetchedResultsController *)newfrc {
    NSFetchedResultsController *oldfrc = _fetchedResultsController;
    if (newfrc != oldfrc) {
        _fetchedResultsController = newfrc;
        newfrc.delegate = self;
        if ((!self.title || [self.title isEqualToString:oldfrc.fetchRequest.entity.name]) && (!self.navigationController || !self.navigationItem.title)) {
            self.title = newfrc.fetchRequest.entity.name;
        }
        if (newfrc) {
            [self performFetch];
        } else {
            [self.tableView reloadData];
        }
    }
}

#pragma mark - UITableViewDataSource

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    NSUInteger numberOfSections = self.fetchedResultsController.sections.count;
    NSLog(@"TVC: DataSource, number of sections: %d", numberOfSections);

    return numberOfSections;
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    NSArray *sections = self.fetchedResultsController.sections;
    if (sections.count == 0) {
        NSLog(@"TVC: DataSource, there are no sections");
        return 0;
    }

    id<NSFetchedResultsSectionInfo> sectionInfo = [sections objectAtIndex:section];
    NSUInteger numberOfRows = sectionInfo.numberOfObjects;
    NSLog(@"TVC: DataSource, number of rows: %d, in section: %d", numberOfRows, section);

    return numberOfRows;
}
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    return [[[self.fetchedResultsController sections] objectAtIndex:section] name];
}
- (NSInteger)tableView:(UITableView *)tableView sectionForSectionIndexTitle:(NSString *)title atIndex:(NSInteger)index {
    return [self.fetchedResultsController sectionForSectionIndexTitle:title atIndex:index];
}
- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView {
    return [self.fetchedResultsController sectionIndexTitles];
}

#pragma mark - NSFetchedResultsControllerDelegate

- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller {
    if (!self.suspendAutomaticTrackingOfChangesInManagedObjectContext) {
        [self.tableView beginUpdates];
        self.beganUpdates = YES;
    }
}
- (void)controller:(NSFetchedResultsController *)controller
  didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo
           atIndex:(NSUInteger)sectionIndex
     forChangeType:(NSFetchedResultsChangeType)type {
    if (!self.suspendAutomaticTrackingOfChangesInManagedObjectContext)
    {
        switch(type)
        {
            case NSFetchedResultsChangeInsert:
                [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
                break;

            case NSFetchedResultsChangeDelete:
                [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
                break;
        }
    }
}
- (void)controller:(NSFetchedResultsController *)controller
   didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath
     forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath {
    if (!self.suspendAutomaticTrackingOfChangesInManagedObjectContext)
    {
        switch(type)
        {
            case NSFetchedResultsChangeInsert:
                [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
                break;

            case NSFetchedResultsChangeDelete:
                [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
                break;

            case NSFetchedResultsChangeUpdate:
                [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
                break;

            case NSFetchedResultsChangeMove:
                [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
                [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
                break;
        }
    }
}
- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {
    if (self.beganUpdates)
        [self.tableView endUpdates];
}
- (void)endSuspensionOfUpdatesDueToContextChanges {
    _suspendAutomaticTrackingOfChangesInManagedObjectContext = NO;
}
- (void)setSuspendAutomaticTrackingOfChangesInManagedObjectContext:(BOOL)suspend {
    if (suspend) {
        _suspendAutomaticTrackingOfChangesInManagedObjectContext = YES;
    } else {
        [self performSelector:@selector(endSuspensionOfUpdatesDueToContextChanges) withObject:0 afterDelay:0];
    }
}

- (void)logFetchedSections:(NSArray *)sections {
}

@end 
```

这是我的模型的一部分：

```
//
//  TLModel.m
//

...

@property (nonatomic, strong) TLCoreData *coreData;

...

- (void)setupFetchedResultsControllerCardsListWithCompletion:(void (^)(NSFetchedResultsController *result))completion {
    [self.coreData performWithDocument:^(UIManagedDocument *document) {
        NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Card"];
        request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"named"
                                                                                         ascending:YES
                                                                                          selector:@selector(localizedCaseInsensitiveCompare:)]];
        NSError *error;
        NSArray *matches = [document.managedObjectContext executeFetchRequest:request error:&error];
        NSLog(@"Model: Execute fetch request, array count: %d", matches.count);

        NSFetchedResultsController *result = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                                 managedObjectContext:document.managedObjectContext
                                                                                   sectionNameKeyPath:@"named"
                                                                                            cacheName:nil];
        NSLog(@"Model: Created new FRC: %@", result);

        completion(result);
    }];
}

... 
```

这是TVC：

```
//
//  TLMyTableViewController.m
//

...

- (void)prepareFetchedResultController {
    [self.model setupFetchedResultsControllerCardsListWithCompletion:^(NSFetchedResultsController *result){
        self.fetchedResultsController = result;
    }];
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"My Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...
    Card *card = [self.fetchedResultsController objectAtIndexPath:indexPath];
    cell.textLabel.text = card.number;
    cell.detailTextLabel.text = card.option;

    return cell;
}
- (void)viewDidLoad {
    NSLog(@"TVC: Did load: %@", self);
    [self prepareFetchedResultController];
}

... 
```

TLCore数据：

```
//
//  TLCoreData.m
//

#import "TLCoreData.h"
#import <CoreData/CoreData.h>
#import "TLManagedDocument.h"

@interface TLCoreData()

@property (nonatomic, strong) TLManagedDocument *document;

@end

@implementation TLCoreData

/*
static TLCoreData *_sharedInstance;

+ (TLCoreData *)sharedDocumentHandler {
    static dispatch_once_t once;
    dispatch_once(&once, ^{
        _sharedInstance = [[self alloc] init];
    });

    return _sharedInstance;
}
*/

- (TLManagedDocument *)document {
    if (!_document) {
        NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
        url = [url URLByAppendingPathComponent:@"DataUsage.db"];
        _document = [[TLManagedDocument alloc] initWithFileURL:url];
    }

    return _document;
}

- (void)performWithDocument:(OnDocumentReady)onDocumentReady {
    void (^OnDocumentDidLoad)(BOOL) = ^(BOOL success) {
        if(success) {
#ifdef DEBUG
            NSLog(@"Current context: %@", self.document.managedObjectContext);
#endif
            onDocumentReady(self.document);
        }
#ifdef DEBUG
        else
            NSLog(@"Core Data: Managed document does not ready");
#endif
    };

    if (![[NSFileManager defaultManager] fileExistsAtPath:[self.document.fileURL path]]) {
#ifdef DEBUG
        NSLog(@"Core Data: Initialized document: %@", self.document.fileURL);
#endif
        [self.document saveToURL:self.document.fileURL
                forSaveOperation:UIDocumentSaveForCreating
               completionHandler:OnDocumentDidLoad];
    } else if (self.document.documentState == UIDocumentStateClosed) {
#ifdef DEBUG
        NSLog(@"Core Data: Opened document: %@", self.document.fileURL);
#endif
        [self.document openWithCompletionHandler:OnDocumentDidLoad];
    } else if (self.document.documentState == UIDocumentStateNormal) {
        OnDocumentDidLoad(YES);
    }
}

- (void)objectsDidChange:(NSNotification *)notification {
#ifdef DEBUG
    NSLog(@"Core Data: Objects changed in context: %@", self.document.managedObjectContext);
#endif
}
- (void)contextDidSave:(NSNotification *)notification {
#ifdef DEBUG
    NSLog(@"Core Data: Context saved: %@", self.document.managedObjectContext);
#endif
}

- (id)init {
    self = [super init];
    if (self) {

        // Set our document up for automatic migrations
        NSDictionary *options = @{
            NSMigratePersistentStoresAutomaticallyOption : @YES,
            NSInferMappingModelAutomaticallyOption : @YES
        };
        self.document.persistentStoreOptions = options;

        // Register for notifications
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(objectsDidChange:)
                                                     name:NSManagedObjectContextObjectsDidChangeNotification
                                                   object:self.document.managedObjectContext];

        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(contextDidSave:)
                                                     name:NSManagedObjectContextDidSaveNotification
                                                   object:self.document.managedObjectContext];
    }

    return self;
}
- (void)dealloc {
    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:NSManagedObjectContextDidSaveNotification
                                                  object:self.document.managedObjectContext];

    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:NSManagedObjectContextObjectsDidChangeNotification
                                                  object:self.document.managedObjectContext];
}

@end 
```

日志是：

```
2013-01-10 12:27:43.291 MyApp[59830:c07] App: Launched
2013-01-10 12:27:43.354 MyApp[59830:c07] Core Data: Opened document: file://localhost/Users/itsme/Library/Application%20Support/iPhone%20Simulator/6.0/Applications/998028DF-FACC-4EFF-A5C7-B286B91F1100/Documents/DataUsage.db/
2013-01-10 12:27:43.354 MyApp[59830:c07] Model: Logging started
2013-01-10 12:27:43.357 MyApp[59830:c07] App: Did become active
2013-01-10 12:27:43.371 MyApp[59830:c07] Current context: <NSManagedObjectContext: 0x8185590>
2013-01-10 12:27:43.374 MyApp[59830:c07] Current context: <NSManagedObjectContext: 0x8185590>
2013-01-10 12:27:44.746 MyApp[59830:c07] TVC: Did load: <TLMyTableViewController: 0x8566100>
2013-01-10 12:27:44.746 MyApp[59830:c07] Current context: <NSManagedObjectContext: 0x8185590>
2013-01-10 12:27:44.747 MyApp[59830:c07] Model: Execute fetch request, array count: 2
2013-01-10 12:27:44.748 MyApp[59830:c07] Model: Created new FRC: <NSFetchedResultsController: 0x747bbb0>
2013-01-10 12:27:44.748 MyApp[59830:c07] TVC: Perform fetch
2013-01-10 12:27:44.750 MyApp[59830:c07] TVC: Number of fetched objects in FRC: 2
2013-01-10 12:27:44.750 MyApp[59830:c07] TVC: Number of sections in FRC: 2
2013-01-10 12:27:44.751 MyApp[59830:c07] TVC: DataSource, number of sections: 2
2013-01-10 12:27:44.752 MyApp[59830:c07] TVC: DataSource, number of rows: 1, in section: 1
2013-01-10 12:27:44.752 MyApp[59830:c07] TVC: DataSource, number of rows: 1, in section: 0
2013-01-10 12:27:46.346 MyApp[59830:c07] Current context: <NSManagedObjectContext: 0x8185590>
2013-01-10 12:27:46.347 MyApp[59830:c07] Model: Deleting a row
2013-01-10 12:27:46.349 MyApp[59830:c07] TVC: DataSource, number of sections: 1
2013-01-10 12:27:46.349 MyApp[59830:c07] TVC: DataSource, number of sections: 1
2013-01-10 12:27:46.349 MyApp[59830:c07] TVC: DataSource, number of rows: 1, in section: 0
2013-01-10 12:27:46.350 MyApp[59830:c07] Core Data: Objects changed in context: <NSManagedObjectContext: 0x8185590>
2013-01-10 12:27:46.351 MyApp[59830:c07] Core Data: Context saved: <NSManagedObjectContext: 0x8185590>
2013-01-10 12:27:47.941 MyApp[59830:c07] TVC: Did load: <TLMyTableViewController: 0x747d5e0>
2013-01-10 12:27:47.941 MyApp[59830:c07] Current context: <NSManagedObjectContext: 0x8185590>
2013-01-10 12:27:47.942 MyApp[59830:c07] Model: Execute fetch request, array count: 1
2013-01-10 12:27:47.942 MyApp[59830:c07] Model: Created new FRC: <NSFetchedResultsController: 0x74b9410>
2013-01-10 12:27:47.942 MyApp[59830:c07] TVC: Perform fetch
2013-01-10 12:27:47.944 MyApp[59830:c07] TVC: Number of fetched objects in FRC: 1
2013-01-10 12:27:47.944 MyApp[59830:c07] TVC: Number of sections in FRC: 2
2013-01-10 12:27:47.944 MyApp[59830:c07] TVC: DataSource, number of sections: 2
2013-01-10 12:27:47.945 MyApp[59830:c07] TVC: DataSource, number of rows: 1, in section: 1
2013-01-10 12:27:47.945 MyApp[59830:c07] TVC: DataSource, number of rows: 1, in section: 0
2013-01-10 12:27:47.948 MyApp[59830:c07] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[_PFArray objectAtIndex:]: index (1) beyond bounds (1)' 
```

这一行说明了数组中错误的节数：

```
2013-01-10 12:27:47.944 MyApp[59830:c07] TVC: Number of sections in FRC: 2 
```

本日志源代码：

```
NSLog(@"TVC: Number of sections in FRC: %d", self.fetchedResultsController.sections.count); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:29:42.533

You should provide other details for us.

In the meantime I really suggest to take a look at [`NSFetchedResultsControllerDelegate`](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsControllerDelegate_Protocol/Reference/Reference.html) class. You can find the method you need to implement in the class reference.

If you set the delegate for your `NSFetchedResultsController` instance like

```
_fetchedController.delegate = self; 
```

then, the delegate will respond to changes made to the Core Data model (add or delete sections; add, delete, move or update rows).

For example, if you implement

```
- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo
    atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type {

    switch(type) {
        case NSFetchedResultsChangeInsert:
            [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex]
                            withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex]
                             withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
} 
```

and you remove or add a section, changes will be captured for you.

Hope it helps.

**Edit**

My guess is that if `TLMyTableViewController` extends `CoreDataTableViewController`, you are not calling the right method in

```
- (void)prepareFetchedResultController {
    [self.model setupFetchedResultsControllerCardsListWithCompletion:^(NSFetchedResultsController *result){
        self.fetchedResultsController = result;
    }];
} 
```

try to use instead

```
[self setFetchedResultsController:result]; 
```

# c# - 如何在 Windows 服务 C# 中使用 SetClipboardViewer 函数？

> ID：14253313
> 
> 赞同：0
> 
> 时间：2013-01-10T08:09:01.960
> 
> 标签：c#, windows-services, clipboard

我正在尝试使用 SetClipboardViewer 获取剪贴板事件。当我覆盖该功能时，它以 Windows 形式工作：

受保护的覆盖无效 WndProc（参考消息 m）

属于基类 System.Windows.Forms。

问题是我想在 Windows 服务中做到这一点。

有人知道如何在 Windows 服务中获取剪贴板事件吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:03:44.697

剪贴板属于会话（[实际上是会话的 winstation](http://msdn.microsoft.com/en-us/library/d56de412.aspx)），并且没有交互式用户可以在服务会话中进行剪贴板复制。当然，您可以有一个剪贴板侦听器进程来中继交互式会话中的剪贴板更改。您可以使用跨会话工作的任何协议，例如套接字、共享内存或命名管道。[Rdpclip.exe](http://social.technet.microsoft.com/Forums/en-US/winserverTS/thread/374733f1-14c6-4f57-afe9-ef5a7713adda)的作用与此类似，但它通过 WTS 虚拟通道发送数据。

一些剪贴板内容在跨越会话边界时有意义（例如 CF_TEXT），而有些则没有意义（例如，带有来自映射驱动器的路径的 CF_HDROP）。

# java - 将 InputStreamReader 转换为字符串

> ID：14253315
> 
> 赞同：0
> 
> 时间：2013-01-10T08:09:22.680
> 
> 标签：java, string, sockets, heap-memory, inputstream

有没有更好的方法从 InputStreamReader 读取字符串。在 Profiler 中，我在那里得到了一个内存堆。

```
public String getClientMessage() throws IOException {
    BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(tempSocket.getInputStream()));     
    char[] buffer = new char[200];
    return new String(buffer, 0, bufferedReader.read(buffer));
} 
```

提前致谢。

编辑： ![在此处输入图像描述](../Images/a63376719f77fea922822a5ba2a0e391.png)

编辑：消息是这样发送的：

```
public void sendServerMessage(String action) throws IOException{
    PrintWriter printWriter = new PrintWriter(new OutputStreamWriter(tempSocket.getOutputStream()));
    printWriter.print(action);
    printWriter.flush();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:21:08.410

我建议你[`commons-io`](http://commons.apache.org/io/) 图书馆以更方便和简单的方式做这些事情。只需使用：

`return IOUtils.toString(tempSocket.getInputStream());`

但这只是代码风格的通知。我们不明白你所说的*获取内存堆*是什么意思。无论如何，如果您有内存不足的烦恼，您必须为您的 Java 应用程序增加内存：[Java HotSpot™ 虚拟机中的内存管理](http://www.oracle.com/technetwork/java/javase/memorymanagement-whitepaper-150215.pdf)：

> **Java 堆空间**这表明无法在堆中分配对象。该问题可能只是配置问题。例如，如果 –Xmx 命令行选项（或默认选择）指定的最大堆大小对于应用程序来说不足，您可能会收到此错误。这也可能表明不再需要的对象不能被垃圾回收，因为应用程序无意中持有对它们的引用。HAT 工具（参见第 7 节）可用于查看所有可达对象并了解哪些引用使每个对象保持活动状态。此错误的另一个潜在来源可能是应用程序过度使用终结器，使得调用终结器的线程无法跟上将终结器添加到队列的速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:24:29.690

您可以使用 IOUtils，但如果您不能使用该库，则很容易编写。

```
public String getClientMessage() throws IOException {
    Reader r = new InputStreamReader(tempSocket.getInputStream());
    char[] buffer = new char[4096];
    StringBuilder sb = new StringBuilder();
    for(int len; (len = r.read(buffer)) > 0;)
         sb.append(buffer, 0, len);
    return sb.toString();
} 
```

我怀疑问题是您无法从消息停止时发送消息的方式中知道。这意味着您必须阅读，直到您关闭您不做的连接。如果您不想等到关闭，您需要添加一些知道消息何时完成的方法，例如换行符。

```
// create this once per socket.
final PrintWriter out = new PrintWriter(
      new OutputStreamWriter(tempSocket.getOutputStream(), "UTF-8"), true);

public void sendServerMessage(String action) {
    // assuming there is no newlines in the message
    printWriter.println(action);  // auto flushed.
}

// create this once per socket
BufferedReader in = new BufferedReader(
    new InputStreamReader(tempSocket.getInputStream(), "UTF-8"));     

public String getClientMessage() throws IOException {
     // read until the end of a line, which is the end of a message.
      return in.readLine();
} 
```

# r - 从文件夹中读取 csv 文件并将它们放入单独的数据框中，然后使用数据框名称获取文件摘要

> ID：14253317
> 
> 赞同：0
> 
> 时间：2013-01-10T08:09:23.697
> 
> 标签：r, csv, dataframe

我有一个包含 100 个 CSV 文件的文件夹。每个 CSV 文件在同一时间段内具有相同的变量。我的导师要求我编写一个 R 脚本，允许我将每个文件读取到单独的 Dataframe，然后在 R 控制台中调用每个 Dataframe，以获取数据的汇总统计信息。我从来没有尝试过这个古怪的任务，我需要帮助谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:43:26.290

不用担心，起初 R 中的每项任务都显得很古怪，没有任何经验。我可以给你一些指点。一般来说，先思考，然后再编程是个好主意。这似乎是合乎逻辑的，但很多人不这样工作。例如，在这种情况下，计划可能如下所示：

1.  获取目录中文件的列表。( `list.files`)
2.  循环遍历列表并读取文件。（`lapply`或`for`,`lapply`更像 R）
3.  循环遍历文件列表并获取摘要。（再次`lapply`，和`summary`）

我在每个步骤背后都提供了一些提示，您应该阅读这些函数的文档。另外，我会先看一些基本的 R 手册，然后再找一些教程。这将为您提供 R 的基础，您可以使用它来完成特定的任务。祝你好运！

# .net - 在 XP 机器上启动 System.Net.HttpListener 需要哪些 Windows 服务？

> ID：14253318
> 
> 赞同：3
> 
> 时间：2013-01-10T08:09:24.893
> 
> 标签：.net, windows-services, dependencies, httplistener

在我们的一些客户 WinXP SP3 机器上，几乎每天都会发生奇怪的行为。

我们已经安装了一个 Windows 服务，它在启动时执行以下代码：

```
if( !HttpListener.IsSupported )
{
    throw new Exception( string.Format( "HttpListener is not supported on {0}.", Environment.OSVersion ) );
}

_httpListener = new HttpListener();
_httpListener.Prefixes.Add( "http://localhost:20001/" );

_thread = new Thread( new ThreadStart( StartListening ) );
_thread.Start(); 
```

现在有时当 Windows 启动时，代码会抛出“不支持”异常。停止并再次启动服务后，HttpListener 工作！

我的 Windows 服务需要任何服务依赖项吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:21:38.093

找到了解决方案！

在 ServiceInstaller 构造函数中，只需添加以下行：

```
serviceInstaller.ServicesDependedOn = new string[] { "HTTP" }; 
```

这使您自己的服务依赖于 Windows HTTP 服务，并在 HTTP 服务成功启动时启动。

# eclipse - TFS + Eclipse (+Maven) 挂起我构建的文件（目标、bin、gen 文件夹），即使它们被忽略

> ID：14253322
> 
> 赞同：3
> 
> 时间：2013-01-10T08:09:31.433
> 
> 标签：eclipse, maven, tfs

我一直在互联网上寻找答案，但似乎找不到答案。我有一个非常奇怪的问题，现在每次我们重建项目时都会出现。我们会为所有更改的文件获取待处理的更改——即使它们在 .tpignore 中被忽略。这对于每次重建都会更改的 target、bin 和 gen 文件夹当然特别烦人和令人沮丧。

我们有以下结构：

```
Main (TFS branch)
+- Project1
|  +- pom.xml
|  +- .tpignore
+- Project2
|  +- pom.xml
|  +- .tpignore
etc... 
```

在做了一些 Maven 结构更改，添加了父项目，尤其是聚合项目之后，我们最终得到了以下结构：

我们有以下结构：

```
Main (TFS branch)
+- aggregationproject
|  +- Project1
|  |  +- pom.xml
|  |  +- .tpignore
|  +- Project2
|  |  +- pom.xml
|  |  +- .tpignore
+- pom.xml
etc... 
```

也就是说，不同之处在于所有项目都在文件结构中向下移动了一个额外的文件夹。

我不确定这是否是文件夹的更改，但它发生在更改之后（坦率地说，这很奇怪，因为 .tpignore-paths 与它们所在的文件夹是相对的）。我们之前对此没有任何问题。

此外，这很奇怪，因为 Eclipse 确实告诉我们，除了文件夹名称：[ignored] 之外，这些文件夹都被忽略了。

我尝试右键单击>团队>取消忽略，签入新的 .tpignore 并尝试再次忽略它，但它不起作用。

由团队成员更新：

.tpignore 看起来像这样：

```
\Q/tests/bin/\E.*
\Q/tests/gen/\E.*
\Q/obj/\E.*
\Q/target/\E.*
\Q/.settings/\E.*
\Q/gen/\E.*
\Q/bin/\E.* 
```

真的需要帮助！非常感谢，约翰内斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T10:45:20.213

我遇到了同样的问题。您对它仅在您将项目移到聚合项目下时才出现这一事实的评论触发了我的答案。似乎 tfs 插件只考虑了主项目中的 .tpignore ，即使 eclipse 显示为其他。所以我只是将 .tpignore 设置为包含所有带有目标、.claspath、.settings 和 .project 的子文件夹

# c++ - 复向量指针

> ID：14253328
> 
> 赞同：0
> 
> 时间：2013-01-10T08:10:04.383
> 
> 标签：c++, pointers, vector, unordered-map

`vector <unordered_map <string, DomainInfo *> *> victimDomains;`

这是什么意思？

我得到了第一颗星 ( `DomainInfo*`) 但第二颗星是什么？

可以说`DomainInfo`有两个属性`ID`和`name`。如果我想将第二个元素带入`DomainInfo`第三个元素，我`unordered_map`该`victimDomains`怎么称呼它？我的问题不正确吗？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T08:12:14.480

用简单的英语来说，它是一个`vector`指向 ( `unordered_map`s 映射`string`s 到`DomainInfo`) 的指针。（使用括号表示级别）

你想做

```
(*victimDomains[2])[<domainInfoKey>]->name;
 ^B             ^A    ^C                ^D 
```

A - 第二个元素 - 指向地图的指针。
B - 取消引用指向地图的指针以获取地图。
C - 获取 `DomainInfo`指针（需要输入正确的字符串）
D - 使用 -> 语法从`DomainInfo`指针访问名称字段。

* * *

以上分多个步骤-

```
unordered_map <string, DomainInfo *> *map = victimDomains[2];

DomainInfo *dmInfo = *map[<domainInfoKey>];

Name name = dmInfo->name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:17:24.690

要访问一个特定的`DomainInfo`，你需要知道它在`unoreder_map`. 因此，就目前而言，您的问题（如何访问？）无法回答。但是，如果您知道`DomainInfo`' 的关键是，比方说，`"blah"`，那么您会这样做：

```
(*victimDomains[2])["blah"]->name 
```

# biztalk - BizTalk 2009 MQ 系列 Adepater 与 WebSphere MQ 7.0

> ID：14253329
> 
> 赞同：1
> 
> 时间：2013-01-10T08:10:05.313
> 
> 标签：biztalk, ibm-mq, biztalk-2009

我们正在将 IBM Websphere MQ 系列从 V6.x 升级到 V7.x。

目前我们的 BizTalk 应用服务器集成到 IBM Websphere MQSeries 服务器，通过 BizTalk 2009 MQSeries 适配器从远程队列读取消息。

我们想知道我们当前的 BizTalk 2009 MQSeries 适配器是否需要任何更新才能连接到新的 7.x 版本的 IBM Websphere MQ Series 服务器。

以下是我们的 BizTalk 和 IBM MQ 系列服务器配置

1.  带有 MQ 系列适配器的 BizTalk 2009（Windows 2003 64 位）。
2.  IBM Websphere MQSeries 服务器（V6.0.2.7 与 Windows 2003 32 位）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T14:02:49.943

在每个版本的信息中心中，都有一个关于版本更改的部分。有几个与Windows有关。请参阅信息中心以获取适当的版本：

[V6.0 到 V7.5 更改](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/mi67530_.htm)
[V6.0 到 V7.1 更改](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r1/topic/com.ibm.mq.doc/mi67101_.htm)

有一个 V7.0 信息中心，但此时，由于安全性增强和其他功能，每个人都应该最好迁移到 V7.5，或者最早迁移到 V7.1。

# javascript - 如何获得高图表中 yAxis 标签的最大值？

> ID：14253331
> 
> 赞同：0
> 
> 时间：2013-01-10T08:10:17.373
> 
> 标签：javascript, highcharts

假设我们有这组数据：

```
var data = [10, 20, 15, 40, 30, 25]; 
```

使用 highcharts，yAxis 的最大值将是 50 或其他值。这是他们网站上的基本示例：http: [//jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/column-basic/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/column-basic/)

我的问题是。如何在 javascript 变量中获取示例中的数字 50（在我的情况下）和数字 250，以便我可以基于此编写逻辑？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T08:45:50.063

取自[这里的答案](https://stackoverflow.com/a/12301683/691148)

假设这`chart`是您的图表变量。

`chart.yAxis[0].max;`

除此之外，同样适用于 x 轴：

`chart.xAxis[0].max;`

如果 x 轴是元素的集合（例如月份名称），则它输出元素的数量 - 1。

# javascript - 将弹出窗口放在屏幕底部（不在浏览器窗口底部）

> ID：14253337
> 
> 赞同：0
> 
> 时间：2013-01-10T08:10:33.497
> 
> 标签：javascript, html, css, popup

我的问题是。如何在屏幕底部显示弹出窗口（不在浏览器窗口底部）？

我应该使用哪个属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:16:09.950

屏幕的属性在其中`window.screen`，其中包含用于`availHeight`和`availWidth`其他的数据。

[https://developer.mozilla.org/en-US/docs/DOM/window.screen](https://developer.mozilla.org/en-US/docs/DOM/window.screen)

作为如何使用这些在屏幕右下方打开弹出窗口的示例：http: [//jsfiddle.net/steveukx/56XG6/](http://jsfiddle.net/steveukx/56XG6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:14:18.570

###Webkit-通知？如果您正在寻找 Webkit 通知，那么请使用以下内容：

```
<!DOCTYPE HTML>
<html lang="en-US">
    <head>
        <meta charset="UTF-8">
        <title>Desktop Notifications</title>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script type="text/javascript">
            function checkNotifications() {
                if (window.webkitNotifications)
                    alert("Notifications are supported!");
                else
                    alert("Notifications are not supported for this Browser/OS version yet.");
            }
            function createNotificationInstance(options) {
                if (window.webkitNotifications.checkPermission() == 0) { // 0 is PERMISSION_ALLOWED
                    if (options.notificationType == 'simple') {
                        return window.webkitNotifications.createNotification('icon.png', 'Notification Title', 'Notification content...');
                    } else if (options.notificationType == 'html') {
                        return window.webkitNotifications.createHTMLNotification('http://localhost/');
                    }
                } else {
                    window.webkitNotifications.requestPermission();
                }
            }
        </script>
        <style type="text/css">
            * {font-family: Verdana, sans-serif;}
            body {font-size: 10pt; margin: 0; padding: 0;}
            p {margin: 5px;}
            a {color: #09f; text-decoration: none;}
            a:hover {color: #f00;}
        </style>
    </head>
    <body>
        <p><strong>Desktop Notifications</strong></p>
        <p>Lets see how the notifications work in this browser.</p>
        <p>
            <a href="#" onclick="checkNotifications(); return false;">Check Notification Support</a>.
            Next <a href="#" onclick="alert('Notifications are ' + ((window.webkitNotifications.checkPermission() == 0) ? '' : 'not ') + 'allowed!'); return false;">Check Notification Permissions</a>
            and if permissions are not there,
            <a href="#" onclick="window.webkitNotifications.requestPermission(); return false;">Request Permissions</a>.
            Create a
            <a href="#" id="text">Simple Notification</a>
            or
            <a href="#" id="html">HTML Notification</a>.
        </p>
    </body>
    <script type="text/javascript">
        document.querySelector("#html").addEventListener('click', function() {
            if (window.webkitNotifications.checkPermission() == 0) {
                createNotificationInstance({ notificationType: 'html' });
            } else {
                window.webkitNotifications.requestPermission();
            }
        }, false);
        document.querySelector("#text").addEventListener('click', function() {
            if (window.webkitNotifications.checkPermission() == 0) {
                createNotificationInstance({ notificationType: 'simple' }).show();
            } else {
                window.webkitNotifications.requestPermission();
            }
        }, false);
    </script>
</html> 
```

＃＃＃截屏

[![](../Images/33fd2d55dc180e275c5a3f2960a806a0.png)](https://i.stack.imgur.com/Zsd7K.png)
[（来源：[akamai.net](https://a248.e.akamai.net/camo.github.com/7e963e54e3fc0bc8a40728937f515f0f03b4ce77/687474703a2f2f692e696d6775722e636f6d2f644a6b6a4d2e706e67)）]

***注意：**这仅适用于 Chrome 和其他基于 WebKit 的浏览器...有关更多信息，请参阅[我可以使用 Web 通知吗？](https://caniuse.com/notifications)*

# jsf-2 - 是否可以使用 Omnifaces #{of:setToList} 创建可编辑的数据表

> ID：14253340
> 
> 赞同：1
> 
> 时间：2013-01-10T08:10:52.070
> 
> 标签：jsf-2, omnifaces

我正在尝试创建一个可编辑的数据表，其值为[java.util.Set](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)。但在 JSF-2.0 和 2.1 中，这是不可能的，如[Displaying objects from a Set collection in Datatable JSF does not work](https://stackoverflow.com/questions/7711703/displaying-objects-from-a-set-collection-in-datatable-jsf-does-not-work/7712593#7712593)中所述。

到目前为止，作为解决所有 Set 的工作，都将其转换为[java.util.List](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)并且一切正常。

正如对 var 的回答中提到的那样，[是集合，而不是项目](https://stackoverflow.com/a/13109759/757071)，我正在尝试[Omnifaces #{of.setToList}](http://showcase.omnifaces.org/functions/Converters)，这样我就可以避免不必要地将 Set 转换为 List。当它是一个普通的数据表时，一切都很好。但是当我尝试将其转换为可编辑的数据表时，它不起作用。那么，是否可以使用 Omnifaces #{of:setToList} 创建可编辑的数据表？

也许我做错了什么。如果需要，我可以发布代码。提前致谢。

# java - java.lang.NullPointerException at org.apache.hadoop.conf.Configuration.getLocalpath（配置）

> ID：14253341
> 
> 赞同：1
> 
> 时间：2013-01-10T08:10:54.020
> 
> 标签：java, hadoop, mapreduce

以前有人有这个问题吗？

```
The following are the error information when I run the job:
13/01/10 15:53:19 INFO mapred.JobClient: Task Id : attempt_201301101540_0001_m_000010_0, Status : FAILED
java.lang.NullPointerException
    at org.apache.hadoop.conf.Configuration.getLocalPath(Configuration.java:934)
    at nfs.iscas.sil.hcir.index.ImageIndexWriter.<init>(Unknown Source)
    at nfs.iscas.sil.hcir.index.ImageIndexOutputFormat.getRecordWriter(Unknown Source)
    at org.apache.hadoop.mapred.MapTask$NewDirectOutputCollector.<init>(MapTask.java:627)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:752)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:369)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:259)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1059)
    at org.apache.hadoop.mapred.Child.main(Child.java:253) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:41:19.517

我认为问题出在你的道路上。

`file file-path of resource to be added, the local filesystem is examined directly to find the resource, without referring to the classpath.`

# android - 是否可以在 AIDL 中进行通用工作

> ID：14253345
> 
> 赞同：1
> 
> 时间：2013-01-10T08:11:08.333
> 
> 标签：android, ipc, aidl

我有以下 AIDL 文件

```
package com.mindtherobot.samples.tweetservice;

interface TweetCollectorListener {

  void handleTweetsUpdated();
} 
```

到目前为止，我试图在 AIDL 中制作通用作品。它不起作用。以下代码将标记错误。

```
package com.mindtherobot.samples.tweetservice;

interface TweetCollectorListener<E> {

  E handleTweetsUpdated();
} 
```

似乎泛型在 AIDL 中不起作用。然而，这是我的猜测，因为[Android 接口定义语言](http://developer.android.com/guide/components/aidl.html)并没有过多地谈论泛型。

只是想确认一下，真的泛型在 AIDL 中不起作用吗？有什么解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T08:15:35.813

来自[官方 AIDL 文档](http://developer.android.com/guide/components/aidl.html)：

> 列表
> 
> List 中的所有元素必须是此列表中受支持的数据类型之一，或者是您声明的其他 AIDL 生成的接口或 parcelables 之一。List 可以选择用作“通用”类（例如，List）。对方接收到的实际具体类始终是一个 ArrayList，尽管生成该方法是为了使用 List 接口。映射中的所有元素
> 
> 地图
> 
> 必须是此列表中受支持的数据类型之一，或者是您声明的其他 AIDL 生成的接口或 parcelables 之一。泛型映射，（如Map形式的不支持。对方接收到的实际具体类始终是HashMap，虽然生成的方法是使用Map接口。

因此，如您所见，使用 Lists 的泛型仅支持有限，甚至 Maps 也不支持，因此不支持自定义参数化类型。

# sql-server - 错误 17886 - 服务器将断开连接

> ID：14253348
> 
> 赞同：10
> 
> 时间：2013-01-10T08:11:15.373
> 
> 标签：sql-server, sql-server-2008, windows-server-2008-r2

我们正在使用 sql server 2008 x64 r2 的 vps 服务器上运行一个网站。我们正被`17886`错误轰炸——即：

> 服务器将断开连接，因为客户端驱动程序在会话处于单用户模式时发送了多个请求。当会话中仍有批处理正在运行时，客户端发送重置连接的请求，或者当会话正在重置连接时客户端发送请求时，会发生此错误。请联系客户端驱动程序供应商。

这会导致 sql 语句返回损坏的结果。我已经尝试了几乎所有在网上找到的建议，包括：

*   有火星，没有。
*   带池和不带
*   有 async=true 和没有

我们只有一个数据库，它绝对是多用户的。

一切都是最近安装的，所以它是最新的。它们可能与`high cpu`（尽管不完全根据我所看到的监视器）相关联。也与`high request rates`搜索引擎相关。但是，高 cpu/请求不应导致 sql 连接重置 - 最坏的情况是我们应该有高响应时间或 iis 拒绝发送响应。

有什么建议么？我只是一个开发人员而不是 dba - 我需要一个 dba 来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:35:38.013

不确定，但您的某些查询可能会导致服务器死锁。

此时您再次检测到此错误

*   打开 Management Studio（在服务器上，必要时安装）

*   打开一个新的查询窗口

*   运行**sp_who2**

*   检查**blkby**列，它是**Blocked By**的缩写。如果该列中有任何数据，则表示您有死锁问题（通常应该像我附上的屏幕截图一样，完全为空）。

如果您遇到死锁，那么我们可以继续下一步。但是现在请检查一下。

![在此处输入图像描述](../Images/628f8100c98b6d8a0e341d52f0bbfacf.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-07T15:56:52.127

要修复上述错误，需要将“MultipleActiveResultSets=True”添加到连接字符串中。

通过[事件 ID 17886 MSSQLServer – 服务器将断开连接](http://sundeepyama.azurewebsites.net/2015/04/event-id-17886-mssqlserver-the-server-will-drop-the-connection/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-08T10:17:45.273

每当抛出 17886 时，我都会创建一个事件日志任务给您发送电子邮件。然后立即转到 db 并执行 sp_who2，获取 blkby spid 并运行 dbcc inputbuffer。希望 eventinfo 能给你一些更具体的东西。

sp_who2

DBCC 输入缓冲区 (62) 执行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-16T15:14:11.300

在您的 DI 实例化代码中使用“每个请求实例”策略，您的问题将得到解决

很可能您正在使用依赖注入。在 Web 开发期间，您必须考虑并发请求的可能性。因此，您必须确保在 DI 期间每个请求都获得新实例，否则您将遇到并发问题。不要因为服务和上下文使用“.SingleInstance”而变得便宜。

启用 MARS 可能会减少错误的数量，但遇到的错误会不太清楚。启用 MARS 永远不是解决方案，除非您知道自己在做什么，否则不要使用它。

# c# - 保存嵌入资源

> ID：14253353
> 
> 赞同：1
> 
> 时间：2013-01-10T08:11:31.943
> 
> 标签：c#, embedded-resource

我目前正在为学习目的编写刽子手。为此，我有一个包含大约 6000 个单词的文本文件作为嵌入式资源。程序读取文件并从中取出一个随机字符串。现在为了增加复杂性，我制作了一个文字编辑器，您可以在其中编写自己的文字。现在我的问题是：如何将编辑后的字符串数组保存到资源文件中？

此代码读取资源文件并将其显示在多行文本框中。

```
public editorForm()
{
  InitializeComponent();
  string[] Lines = Properties.Resources.wordRes.Split(new string[] { Environment.NewLine }, StringSplitOptions.RemoveEmptyEntries);
  for (int i = 0; i < Lines.Length; i++)
    {
      textBox1.Text += Lines[i] + Environment.NewLine;               
    }
  textBox1.SelectionStart = textBox1.Text.Length;          
} 
```

这是我当前的保存代码，现在它只是将编辑后的文件保存到桌面，但我希望它保存为资源。

```
private void saveToolStripMenuItem_Click(object sender, EventArgs e)
{
  string[] words = textBox1.Text.Split(new string[] { Environment.NewLine }, StringSplitOptions.RemoveEmptyEntries);
  FileStream overwrite = new FileStream(Environment.GetFolderPath(Environment.SpecialFolder.Desktop) + "\\Hangman.txt", FileMode.Create);
  using (StreamWriter file = new StreamWriter(overwrite))
  {
    for (int i = 0; i < words.Length; i++)
    {
      file.Write(words[i] + Environment.NewLine);
    }
  }     
  MessageBox.Show("Words saved. ");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:17:18.287

除了一些hacky之外，在程序集编译后无法更新或更改嵌入式资源。

为什么不将数据保存到磁盘，然后在加载时将数据与嵌入资源中的数据合并。或者只是将文件放在磁盘上并获取嵌入式资源，或者如果文件不存在，则默认使用嵌入式资源，然后写入磁盘。

# greendao - 如何在没有 Eclipse 的情况下编译 greenDao 示例？

> ID：14253358
> 
> 赞同：0
> 
> 时间：2013-01-10T08:11:38.010
> 
> 标签：greendao

如何在没有eclipse的情况下编译GreenDao示例和DaoExampleGenerator？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-13T09:43:34.237

您可以使用 Android Studio 来执行此操作。

Gradle 已集成并下载依赖库。

请注意 Android Studio 中的路径（使用包含所有模块的主项目路径（Android Studio 中的一个模块是 Eclipse 中的一个项目）。

它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-27T23:38:54.067

运行按钮上的下拉菜单单击编辑配置，然后单击 + 按钮并添加新应用程序和配置：检查下图，然后单击应用并确定。

[![在此处输入图像描述](../Images/5fb772d0489f61db7322402440c48692.png)](https://i.stack.imgur.com/P1kiQ.png)

接下来您需要做的是在下拉列表中，选择您的 daogenerator 然后运行将编译 dao 类的应用程序

[![在此处输入图像描述](../Images/0e0e2a9a812b86f3ef7c1b21f2371b79.png)](https://i.stack.imgur.com/VnyN4.png)

然后它应该看起来像上面并单击运行。它应该有效！

祝你好运！！

# database - 使用类使用 DB 连接 [PDO] 并在其他类中进一步使用它的更好方法？

> ID：14253365
> 
> 赞同：0
> 
> 时间：2013-01-10T08:11:54.807
> 
> 标签：database, class, pdo, database-connection

我正在寻找一个更好的 PDO 数据库连接，我可以在我拥有的不同类中使用它。例如我当前的代码是这样的：

核心.php

```
//Connecting to Database
        try {
        $db = new PDO("mysql:host=localhost;dbname=mydb", "project", "project123");
        } 
        catch(PDOException $e) {  
        echo $e->getMessage();  
        } 
```

类核心{

```
protected $db;
    public function __construct(PDO $db) {
    $this->db = $db;
    }

function redirectTo($page,$mode = 'response',$message = '') {
        if($message != '') {
        header('Location: '.SITEURL.'/'.$page.'?'.$mode.'='.urlencode($message));
        } else {
        header('Location: '.SITEURL.'/'.$page);         
        }
        exit();
} 
```

}

除此之外，我还有 2 个类：wall.php 和ticker.php

```
class Wall {

protected $db;
    public function __construct(PDO $db) {
    $this->db = $db;
    }
function addComment($uid, $fid, $comment) {
$time = time();
$ip = $_SERVER['REMOTE_ADDR'];

$query = $this->db->prepare('INSERT INTO wall_comments (comment, uid_fk, msg_id_fk, ip, created) VALUES (:comment, :uid, :fid, :ip, :time)');
$query->execute(array(':comment' => $comment, ':uid' => $uid, ':fid' => $fid, ':ip' => $ip, ':time' => $time));

$nofity_msg = "User commented on the post";
$setTicker = Ticker::addTicker($uid,$nofity_msg,'comment');                 

    if($setTicker) {
    Core::redirectTo('wall/view-'.$fid.'/','error','Oops, You have already posted it!');        
    } else {
    Core::redirectTo('wall/view-'.$fid.'/','error','Oops, Error Occured');  
    }
} 
```

}

和ticker.php是：

```
class Ticker {  
    protected $db;
    public function __construct(PDO $db) {
    $this->db = $db;
    }

function addTicker($uid,$msg,$type) {
        $time = time();

        $query = $this->db->prepare('INSERT INTO tickers (uid_fk, message, type, created) VALUES (:uid, :message, :type, :time)');

        try {
                $query->execute(array(':uid' => $uid, ':message' => $msg, ':type' => $type, ':time' => $time));
                return $this->db->lastInsertId();
        }
        catch(PDOException $e) {  
                return 0;
        }  

} 
```

}

现在我的问题是我需要调用函数 addComment() 并且在该函数内部还有对 Ticker 类中存在的函数 addTicker() 的进一步调用。这导致 Db 连接问题，因为在上一个类中已经创建了一个 db 实例。我不知道如何解决这个问题。

这是我在主索引文件中使用的代码：

```
$core = new Core($db);
$ticker = new Ticker($db);
$wall = new Wall($db);

$wall->addComment($uid, $fid, $add_comment); // This statement is not working.. :( 
```

我的意图是拥有一个通用的主数据库连接，并在其他类中进一步使用该连接。有没有更好的方法来做到这一点..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:44:15.407

> 在上一个类中已经创建了一个 db 实例

这实际上是单个实例，但复制到 2 个变量中。

> 这导致 Db 连接问题

你能对这样的问题更确定一点吗？你有什么特别的问题？

# gcc - 在 Solaris Sparc 下的 ./configure 中强制使用 gcc 编译（而不是 cc）

> ID：14253367
> 
> 赞同：2
> 
> 时间：2013-01-10T08:11:58.683
> 
> 标签：gcc, solaris, configure, fossil

我想在 Solaris 上构建化石代码。

```
wget http://www.fossil-scm.org/index.html/tarball/tip.tar.xz
tar xf tip.tar.xz ; cd tip.tar
./configure CC=gcc CXX=g++ C=gcc BCC=gcc  # no error 
```

它会导致

```
$make
cc -o bld/translate ./src/translate.c
/usr/ucb/cc:  language optional software package not installed
$which cc
/usr/ucb/cc
$which gcc
/usr/local/bin/gcc
$which g++
/usr/local/bin/g++ 
```

我确定我的 gcc/g++ 是可行的。在我添加了一个肮脏的技巧后，在 ./configure. 它是可编译的。但我不知道如何修复源代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T08:43:02.370

我下载了那个压缩包，运行命令`./configure CC=gcc`，发现它根本不起作用，生成的`Makefile`仍然`cc`用于默认编译器。

使用`vi`编辑`Makefile`，更改

```
BCC = gcc
....
TCC = gcc 
```

然后`make`再一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-14T20:21:32.880

在环境中设置编译器。

导出 CC=gcc

# ios - 无法播放 AVPLayer 本地视频

> ID：14253373
> 
> 赞同：1
> 
> 时间：2013-01-10T08:12:19.427
> 
> 标签：ios, objective-c, xcode, avfoundation, avplayer

所以我正在使用`AVFoundation`-`AVPlayer`和`AVPlayerLayer`. 目前，我希望播放器做的就是在资产库中播放一个视频，并带有该视频的硬编码 url。我希望它包含在 a `SubClass`of 中，`UIView`以便我可以在我的应用程序中使用它。

到目前为止，这是我的代码 `CUPlayer.h`：：

```
@interface CUPlayer : UIView

{
    AVPlayer *player;
    AVPlayerLayer *playerLayer;
    AVPlayerItem *item;
    NSURL *url;
}

@property(nonatomic) UIViewAutoresizing autoresizingMask;
@end 
```

`CUPlayer.m`：

```
@implementation CUPlayer

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) 
    {
        // Initialization code
        self.backgroundColor = [UIColor redColor];
        [self setupURL];
    }
    return self;
}

-(void)setupURL
{
    NSLog(@"URL setting up");
    NSString *string = @"assets-library://asset/asset.mov?id=0A937F0D-6265-452D-8800-   1A760E8E88B9&ext=mov";
    url = [[NSURL alloc] initFileURLWithPath: string];
    [self setupPlayerForURL];
}

-(void)setupPlayerForURL
{
    AVAsset *asset = [AVURLAsset URLAssetWithURL:url options:nil];
    item = [AVPlayerItem playerItemWithAsset:asset];
    player = [AVPlayer playerWithPlayerItem:item];
    [player addObserver:self forKeyPath:@"status" options:0 context:nil];
    playerLayer = [AVPlayerLayer playerLayerWithPlayer:player];

    //player.actionAtItemEnd = AVPlayerActionAtItemEndNone;

    [self.layer addSublayer:playerLayer];
    playerLayer.frame = CGRectMake(0, 0, 200, 200);
    //[playerLayer setBackgroundColor:[UIColor greenColor].CGColor];
}

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {

    if (object == player && [keyPath isEqualToString:@"status"]) {
         if (player.status == AVPlayerStatusFailed) {
            NSLog(@"AVPlayer Failed");
         } else if (player.status == AVPlayerStatusReadyToPlay) {
            NSLog(@"AVPlayer Ready to Play");
            [player play];
         } else if (player.status == AVPlayerItemStatusUnknown) {
             NSLog(@"AVPlayer Unknown");
        }
    }
} 
```

然后我从视图控制器调用它：

```
CUPlayer *cuPlayer = [[CUPlayer alloc]initWithFrame:CGRectMake(0, 0, 250, 250)];
[self.view addSubview:cuPlayer]; 
```

这符合但只给我一个红色方块而不播放视频。本地文件的 URL 绝对正确。如果我将所有代码保存在视图控制器中并在`-(void)viewDidLayoutSubviews`.

非常感谢您的帮助，我已经多次阅读所有文档，试图解决这个问题。

汤姆

# cocoa-touch - cocoa-touch PSPDFKIT 如何从 PDF 文件中获取价值？

> ID：14253377
> 
> 赞同：0
> 
> 时间：2013-01-10T08:12:43.023
> 
> 标签：cocoa-touch, pspdfkit

一个简单的问题是如何从 PDF 文件中的按钮、复选框、文本字段...获取委托、结果或回调。

更清楚地说，我正在开发一个项目，它是一个 PDF 测试表单，其中包含一系列多选问题、一些文本字段和一个提交它们的按钮。我需要获取用户输入的这些详细信息。

似乎是这个委托，但它不起作用

```
- (void)pdfViewController:(PSPDFViewController *)pdfController didShowAnnotationView:(UIView<PSPDFAnnotationView> *)annotationView onPageView:(PSPDFPageView *)pageView; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T09:31:10.153

我是[PSPDFKit PDF SDK](http://pspdfkit.com/)的作者。虽然该框架确实支持文本选择和注释突出显示/绘图等功能，但尚不支持 PDF 表单。这可能会在 2013 年晚些时候发生变化。

更新：PSPDFKit v3 现在完全支持 PDF 表单——你可以玩这个演示，不需要注册。

# javascript - Mongodb：有没有办法只更新以前没有设置的属性？

> ID：14253380
> 
> 赞同：0
> 
> 时间：2013-01-10T08:12:58.117
> 
> 标签：javascript, node.js, mongodb, passport.js

我正在使用护照和nodejs，以及快递。我希望用户能够修改用户自己的个人资料。但是，使用 findAndModify，它将覆盖配置文件中的任何内容，并使用从策略下载的配置文件。是否有一个选项或内置的东西可以让我这样做？

```
passport.use(new GoogleStrategy({
    returnURL: 'http://localhost:3000/auth/google/return',
    realm: 'http://localhost:3000/'
  },
  function(identifier, profile, done) {
    accounts.findAndModify({ openID: identifier },{},
      { openID:identifier, profile:profile}, 
      {update:true, upsert:true, new:true}, function (err, user) {
      return done(err, user);
    });
  }
)); 
```

# java - 突出显示矩形对象

> ID：14253384
> 
> 赞同：-2
> 
> 时间：2013-01-10T08:13:09.427
> 
> 标签：java, swing, jtable, graphic, tablecellrenderer

> **可能重复：**
> [找到 JTable 单元格并绘制它](https://stackoverflow.com/questions/14236168/find-the-jtable-cell-and-paint-it)

这是我的 Rectangle 类对象。

```
 Rectangle cell = table.getCellRect(row, column, false); 
```

现在我想在鼠标按下事件上突出显示它，然后再次回到正常的鼠标释放事件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T08:17:23.020

有多种方法可以添加该功能。

第一个是为单元实现自定义渲染器/编辑器。渲染器保持行/列和 isPressed 状态。按下鼠标时，渲染器状态会设置并在释放时重置。

另一种方法是覆盖paintComponent() 方法以使用例如半透明颜色`JTable's`绘制。`Rectangle`

# android - Android日历事件使用gridview listview

> ID：14253387
> 
> 赞同：0
> 
> 时间：2013-01-10T08:13:22.383
> 
> 标签：android, gridview

[http://i.imgur.com/PyO4q.png?1](http://i.imgur.com/PyO4q.png?1)

此图像正在使用 gridview 制作日历，但现在我想在“day”中添加一个新事件。所以我想在gridview-day 中使用listview，但问题是listview 不滚动。我想也许 listview 滚动与 gridview 发生冲突。请给我一些想法来解决这个问题。

public View getView(int position, View convertView, ViewGroup parent) {

```
 View v = convertView;
    TextView dayView;
    TextView present;
    TextView meeting;
    TextView other;
    if (convertView == null) {  // if it's not recycled, initialize some attributes
        LayoutInflater vi = (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = vi.inflate(R.layout.calendar_item, null);

    }
    dayView = (TextView)v.findViewById(R.id.date);
    present=(TextView)v.findViewById(R.id.ptextView1);
    meeting=(TextView)v.findViewById(R.id.mtextView2);
    other=(TextView)v.findViewById(R.id.otextView3);
   // listitem=(ListView)v.findViewById(R.id.calendarlist);
  //  listitem.setOverScrollMode(View.OVER_SCROLL_ALWAYS);
    // disable empty days from the beginning
    if(days[position].equals("")) {
        dayView.setClickable(false);
        dayView.setFocusable(false);
    }
    else {
        // mark current day as focused
        if(month.get(Calendar.YEAR)== selectedDate.get(Calendar.YEAR) && month.get(Calendar.MONTH)== selectedDate.get(Calendar.MONTH) && days[position].equals(""+selectedDate.get(Calendar.DAY_OF_MONTH))) {
            v.setBackgroundResource(R.drawable.item_background_focused);
        }
        else {
            v.setBackgroundResource(R.drawable.list_item_background);
        }
    }

    dayView.setText(days[position]);
    present.setVisibility(View.GONE);
    meeting.setVisibility(View.GONE);
    other.setVisibility(View.GONE);

    for(int t=0;t<date1.size();t++){

    if(returndouble(dayView.getText().toString()).equals(date1.get(t).get(3))){

        if(date1.get(t).get(1).equals("Presented")){
            meeting.setVisibility( View.VISIBLE);
        }else if(date1.get(t).get(1).equals("Present")){
            present.setVisibility( View.VISIBLE);
        }else{
            other.setVisibility( View.VISIBLE);
        }

    }
    }
    // create date string for comparison
    String date = days[position];

    if(date.length()==1) {
        date = "0"+date;
    }
    String monthStr = ""+(month.get(Calendar.MONTH)+1);
    if(monthStr.length()==1) {
        monthStr = "0"+monthStr;
    }

    // show icon if date is not empty and it exists in the items array
   // ImageView iw = (ImageView)v.findViewById(R.id.date_icon);
  /*  if(date.length()>0 && items!=null && items.contains(date)) {          
        iw.setVisibility(View.VISIBLE);
    }
    else {
        iw.setVisibility(View.INVISIBLE);
    }*/
    return v;
}

public void refreshDays()
{

    // clear items
    items.clear();

   Calendardb date=new Calendardb(mContext);
   date1= date.calendarselect(String.valueOf( month.get(Calendar.YEAR))+"/"+returndouble(String.valueOf((month.get(Calendar.MONTH)+1))));
    int lastDay = month.getActualMaximum(Calendar.DAY_OF_MONTH);
    int firstDay = (int)month.get(Calendar.DAY_OF_WEEK);

    // figure size of the array
    if(firstDay==1){
        days = new String[lastDay+(FIRST_DAY_OF_WEEK*6)];
    }
    else {
        days = new String[lastDay+firstDay-(FIRST_DAY_OF_WEEK+1)];
    }

    int j=FIRST_DAY_OF_WEEK;

    // populate empty days before first real day
    if(firstDay>1) {
        for(j=0;j<firstDay-FIRST_DAY_OF_WEEK;j++) {
            days[j] = "";
        }
    }
    else {
        for(j=0;j<FIRST_DAY_OF_WEEK*6;j++) {
            days[j] = "";
        }
        j=FIRST_DAY_OF_WEEK*6+1; // sunday => 1, monday => 7
    }

    // populate days
    int dayNumber = 1;
    for(int i=j-1;i<days.length;i++) {
        days[i] = ""+dayNumber;
        dayNumber++;
    }
} 
```

# cocoa-touch - 另一个“reloadData 调用 numberOfRows，但不是 cellForRowAtIndexPath”

> ID：14253389
> 
> 赞同：0
> 
> 时间：2013-01-10T08:13:39.200
> 
> 标签：cocoa-touch, ios6

我知道这个问题已经被问了一遍又一遍。[这篇文章](https://stackoverflow.com/questions/9305024/reloaddata-calls-numberofsections-numberofrows-not-cellforrowatindexpath?rq=1)总结了一些常见的原因，但没有一个适用于我：

> 我在搜索时看到的每个答案都有以下变化：1）tableView 为零 2）numberOfRowsInSection 为 0 3）tableView 的委托/数据源未设置 4）在错误的 uiTableView 上调用 reloadTable。

该帖子的答案是在再次调用 reloadData 之前未显示 tableView，这也不是我的情况。我的实际代码有点长，所以我只粘贴我认为相关的部分。随时要求我粘贴更多。请注意，`competitorsTable`已添加到故事板的视图中。

```
@interface CartItemViewController : TrackedUIViewController <UITableViewDataSource, UITableViewDelegate>
//...
@end

@interface CartItemViewController ()
//...
@property (weak, nonatomic) IBOutlet UITableView *competitorsTable;
@end

@implementation CartItemViewController
- (void)viewDidLoad
{
    [super viewDidLoad];
    // ...
    NSAssert(self.competitorsTable, @"Competitor table should not be nil");
    self.competitorsTable.dataSource = self;
    self.competitorsTable.delegate = self;
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    [self updateCompetitors];
}

- (void)updateCompetitors
{
    MBProgressHUD *indicator = [MBProgressHUD showHUDAddedTo:self.hostView animated:YES];
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        while (![self.product isLoaded]) {
            [NSThread sleepForTimeInterval:1];
        }
        [self.product loadCompetitorsPriceForConditionValue:self.conditionValue];
        NSDictionary *competitors = self.product.competitors[@(self.conditionValue)];
        dispatch_async(dispatch_get_main_queue(), ^{
            if (competitors) {
                if (competitors.count > 1) {
                    self.hostView.hidden = NO;
                    self.hostView.hostedGraph = [[CompetitorGraph alloc]initWithFrame:self.hostView.bounds Competitors:competitors];
                    NSAssert(!self.competitorsTable.hidden, @"Competitor table should not be hidden");
                    [self.competitorsTable reloadData];
                } else {
                    self.hostView.hidden = YES;
                }
            } else {
                self.hostView.hostedGraph = nil;
            }
            [indicator hide:YES];
        });

    });
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    NSDictionary *competitors = self.product.competitors[@(self.conditionValue)];
    if (competitors.count == 0) {
        NSLog(@"WARNING: %s returning 0", __PRETTY_FUNCTION__);
    } else {
        NSLog(@"Number of rows: %d", competitors.count);
    }
    return [self.product.competitors[@(self.conditionValue)] count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Sort names according to its price
    NSDictionary *competitors = self.product.competitors[@(self.conditionValue)];
    NSArray *names = [competitors.allKeys sortedArrayUsingComparator:^NSComparisonResult(id name1, id name2) {
        if ([competitors[name1] floatValue] > [competitors[name2] floatValue]) {
            return (NSComparisonResult)NSOrderedAscending;
        } else if ([competitors[name1] floatValue] < [competitors[name2] floatValue]) {
            return (NSComparisonResult)NSOrderedDescending;
        } else {
            return (NSComparisonResult)NSOrderedSame;
        }
    }];
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"vendor"];
    NSString *vendorName = names[indexPath.row];
    cell.textLabel.text = vendorName;
    cell.detailTextLabel.text = competitors[vendorName];
    return cell;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return @"Competitors' Offer";
}
@end 
```

打开视图时，有两次调用numberOfRowsInSection，一次返回0，这是正常的，因为没有加载竞争对手的信息，一次返回一个大于0的数字。但是在任何情况下都没有调用cellForRowAtIndexPath。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T03:13:56.693

经过几个小时的调试，我终于发现了问题：我没有正确设置支柱和弹簧，导致桌子被挤压到0高度。因为没有显示，所以没有调用 cellForRowAtIndexPath

# objective-c - 使用 ArrayController 中的 Binding 对 NSScrollView、NSTableView 的内容进行排序

> ID：14253391
> 
> 赞同：0
> 
> 时间：2013-01-10T08:13:57.263
> 
> 标签：objective-c, binding, nsarraycontroller, nsscrollview, nssortdescriptor

我有一个`NSScrollView`与`ArrayController`. 我需要按字母顺序对内容进行排序。我试图用绑定来做到这一点，但我找不到合适的东西来绑定。我`sortDescriptor`在我的`ArrayController`.

```
[myArrayController setSortDescriptors:[NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"myKey" ascending:YES selector:@selector(compare:)]]]; 
```

我是否错过了流程中的一个步骤，或者我什至没有接近对内容进行排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:25:20.243

你试过 FilterPredicate 吗？这是一个示例代码：

```
NSDate *afterDate=[balanceDateAfter objectValue];
NSDate *beforeDate=[balanceDateBefore  objectValue];
NSComparisonResult duration=[beforeDate timeIntervalSinceDate:afterDate];

duration=duration/3600;
duration=duration/24;

[checkInBalanceArray setFilterPredicate:[NSPredicate predicateWithFormat:@"(checkDate >= %@) AND (checkDate <= %@)", afterDate, beforeDate]];

[checkOutBalanceArray setFilterPredicate:[NSPredicate predicateWithFormat:@"(checkDate >= %@) AND (checkDate <= %@)", afterDate, beforeDate]]; 
```

# facebook - 获取用户的事件列表

> ID：14253395
> 
> 赞同：0
> 
> 时间：2013-01-10T08:14:03.560
> 
> 标签：facebook, events, facebook-fql

我刚开始使用 FQL，我正在尝试一些运行良好的 FB 示例。

但是我尝试制作自己的例子，但没有奏效......

我试图使用以下 FQL 代码获取已登录用户的活动列表：

```
$f = new Facebook($configure); //configure is already ok
$user_id = $f->getUser();

if($user_id){
    $ret = $f->api(array('method' => 'fql.query', 
                         'query' => 'select eid, uid, rsvp_status 
                                     from event_member 
                                     where uid = '.$user_id.';'));

    //I splitted the query here because is too long.
    //In my PHP code is all in one line

    print_r($ret);
} 
```

但它返回一个空数组。

我尝试使用我的 FB 个人资料，即使我接受了一些传入事件，但我仍然得到一个空列表......

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:29:03.527

那么这个查询是完全正确的。我用[这个](https://developers.facebook.com/tools/explorer?fql=select%20eid%2C%20uid%2C%20rsvp_status%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20from%20event_member%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20where%20uid%20%3D%20%27UID%27%3B)得到了结果。

您是否设置了权限：`user_events`和`friends_events`用户？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:38:03.840

嗯，我解决问题...

问题出在重定向中。我将其更改为：

```
header("Location: ".$f->getLoginUrl(array('scope' => 'user_events, friends_events', 'redirect_uri' => 'mywebsite') 
```

# php - php函数有哪些好的WordPress教程？

> ID：14253403
> 
> 赞同：0
> 
> 时间：2013-01-10T08:14:40.913
> 
> 标签：php, wordpress

我多年来一直在使用 WP，但通常只在 html/css 中编码主题并稍微玩弄插件。

有哪些好的指南/教程更侧重于学习和使用 WP 的内置 php 函数？

提前喝彩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:23:03.790

我个人喜欢以下内容：

> ### [WordPress 参考](http://www.dbswebsite.com/design/wordpress-reference/V3/)
> 
> 3.4.1 版的模板标签参考指南

> ### [Adam Brown - WordPress Hooks 数据库](http://adambrown.info/p/wp_hooks)
> 
> 为了帮助网站开发人员，这个 WordPress 钩子数据库会自动扫描每个 WP 版本的`apply_filters()`、`apply_filters_ref_array()`、 、`do_action()`，并`do_action_ref_array`准确找出每个 WordPress 版本中可用的钩子以及钩子出现的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:27:13.660

PHP wordpress 函数的最佳集合

[常用功能](http://sixrevisions.com/wordpress/beginning-wordpress-development-a-look-at-common-functions/)

> 在本指南中，我们将了解 WordPress 中用于自定义 WordPress 主题开发的一些常用功能。

[15 个有用的 WordPress 功能](http://www.kriesi.at/archives/15-useful-wordpress-functions-you-probably-dont-know)

> 当我构建我的第一个高级 WordPress 插件时，我需要解决很多我在创建主题时从未遇到过的问题。在我的研究过程中，我偶然发现了几个非常酷的 wordpress 功能，我想与你分享。

[25+ WordPress 函数文件非常有用的技巧](http://www.wpbeginner.com/wp-tutorials/25-extremely-useful-tricks-for-the-wordpress-functions-file/)

> 本文面向 WordPress 主题开发人员。您可能需要一些 PHP 知识才能进行一些 hack。

# ruby - 如何将传入的参数传递给另一个方法？

> ID：14253404
> 
> 赞同：2
> 
> 时间：2013-01-10T08:14:43.660
> 
> 标签：ruby, methods, parameters, arguments, parameter-passing

我正在使用 Ruby on Rails 3.2.9 和 Ruby 1.9.3。我正在尝试实现一个运行方法的`send`方法，并且我想将传递给底层方法的*所有*参数传递给“sent”方法。也就是说，给定

```
def method1(arg1, arg2 = true, *args)
  # ...
  self.class.send(:method2, # passing all arguments passed to method1, whatever those are)
end 
```

然后我想将传递给（在本例中为）的*所有*参数传递给.`method1``arg1, arg2 = true, *args``method2`

我该怎么做*？*例如，是否可以使用 Ruby “splat” 功能`send`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T08:22:51.623

您当前的方法签名`method1(arg1 = true, arg2, *args)`无效，因为如果您还使用 splat 可选参数，则具有默认值的参数必须位于所需参数之后。但是，如果您将其更改为：

```
method1(arg1, arg2 = true, *args) 
```

那么你可以做

```
self.class.send(:method2, arg1, arg2, *args) 
```

# pug - Yeoman 模板引擎支持

> ID：14253409
> 
> 赞同：1
> 
> 时间：2013-01-10T08:15:12.437
> 
> 标签：pug, template-engine, slim, yeoman

> **可能重复：**
> [将 Jade 集成到 Yeoman 的服务器/监视/重新加载任务中](https://stackoverflow.com/questions/14243245/integrating-jade-in-yeomans-server-watch-reload-tasks)

来自 Rails，我想知道如何为 Yeoman 启用翡翠或苗条模板支持。设置 Yeoman 非常快且令人满意，但我不想浪费时间编写 HTML。有人可以为我指出正确的方向，让翡翠或苗条或类似的东西起作用吗？

*编辑*

我在这里找到了[提示](https://stackoverflow.com/questions/14243245/integrating-jade-in-yeomans-server-watch-reload-tasks/14254041#14254041)。看起来 yeoman 不支持开箱即用的模板语言。

无论如何，用这种方法玉工作得很好。

# python - Python AttributeError：“str”对象没有属性“namelist”

> ID：14253412
> 
> 赞同：2
> 
> 时间：2013-01-10T08:15:36.050
> 
> 标签：python

我正在尝试在 python 中创建一个非常简单的日志解析器脚本。一切都按计划进行，除了目标机器上的脚本返回此错误（脚本在 unix 机器上工作，虽然很好）：

```
for name in root.namelist():
Attribute Error: 'str' object has no attribute 'namelist' 
```

Python 版本似乎相同（两台机器上都是 2.7.3）。有任何想法吗？

脚本本身：

```
import zipfile
import os
import re

string1 = "searchstring" # raw_input("usrinput: ")

try:
   root = zipfile.ZipFile("/home/testuser/docs/testzip.zip", "r")
except:
   root = "testfolder/"
for name in root.namelist():
    if name.find(".") > 0:
        f = root.open(name)
        searchlines = f.readlines()
        for i, line in enumerate(searchlines):
            regex1 = "(.*)" + re.escape(string1) + "(.*)"
            if re.match (regex1, line):
                for l in searchlines[i-4:i+4]: print l,
                print 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:16:50.293

这是因为`root = "testfolder/"`它没有任何名称列表作为其属性。

根的类型是字符串

反过来看你的代码意味着，`root = zipfile.ZipFile("/home/testuser/docs/testzip.zip", "r")`产生了一个异常

在异常块中尝试使用`except Exception, ex:`然后打印`ex.message`以了解正在生成的异常类型

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:20:59.587

这是因为，`namelist()`仅适用于 a `zipfile`，而不适用于 a `string`。

当 zip 文件无法打开时会发生这种情况。检查 zip 文件所在的路径。

试试这个，看看输出：

```
try:
   root = zipfile.ZipFile("/home/testuser/docs/testzip.zip", "r")
except Exception, msg:
   print msg
   root = "testfolder/" 
```

当我尝试使用有效的 zip 文件时，程序运行良好。

# javascript - 如何在 MVC4 中准确捕捉 x 和 y 位置并重新定位？

> ID：14253417
> 
> 赞同：0
> 
> 时间：2013-01-10T08:15:55.707
> 
> 标签：javascript, asp.net-mvc

> **可能重复：**
> [动态检索 HTML 元素的位置 (X,Y)](https://stackoverflow.com/questions/442404/dynamically-retrieve-the-position-x-y-of-an-html-element)

在 MVC4 应用程序（针对 IE7+）中，我有一张图片。我希望用户能够单击图像以定位一个小标记（图像），并且我想存储与图像相关的相对 x/y 位置，以便当用户返回此页面时我可以重新定位此图钉再次。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:37:21.727

您可以使用`<input type="image" />`标签 - 这就像`<input type="submit" />`但它将点击的 x 和 y 坐标发布回服务器。

## 看法

```
<h1>Click on the image to place a pin</h1>
@using(Html.BeginForm())
{
    <input type="image" name="coords" src="http://placehold.it/300x300" />
} 
```

## 控制器

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View();
    }

    [HttpPost]
    public ActionResult Index(FormCollection form)
    {
        int x = int.Parse(form["coords.x"]);
        int y = int.Parse(form["coords.y"]);

        // FIXME Save location of pin

        return View();
    }

} 
```

# c++ - 创建跨平台 OpenGL 离屏上下文

> ID：14253419
> 
> 赞同：8
> 
> 时间：2013-01-10T08:16:08.937
> 
> 标签：c++, opengl

我的任务是在 C++ 中为 Window 和 Linux 实现屏幕外 OpenGL 渲染器。我已经使用[LWJGL](http://www.lwjgl.org/) lib 用 Ja​​va 编写了这样一个版本。我使用了 PBuffer 对象，它在引擎盖下根据使用的操作系统创建 Pbuffers。首先我想重新实现完整的 PBuffer 创建逻辑，就像我在 LWJGL 的本机源代码中所做的那样。然后我在 StackOverflow.com 上阅读[了这篇](https://stackoverflow.com/questions/12157646/how-to-render-offscreen-on-opengl)文章，建议使用标准上下文创建，假设使用[GLFW](http://www.glfw.org/)（它是跨平台的）但是不创建实际的窗口。这是正确的方法吗？在这种情况下，与使用 Pbuffer 相比有什么优缺点？

**更新：** 我只想强调我使用 FBO 来渲染帧，所以我的问题不是如何在屏幕外模式下渲染，而是如何在 Windows 和 Linux 操作系统中创建没有窗口的上下文。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T08:51:51.903

我强烈建议不要再使用[PBuffers](http://www.opengl.org/wiki/P-buffer)，而是使用[Frame Buffer Objects (FBO)](http://www.opengl.org/wiki/Framebuffer_Object)。FBO 提供了更好的性能，因为使用它们不需要上下文切换，而且它们还有[其他几个优点](http://en.wikipedia.org/wiki/Framebuffer_Object#Advantages_over_other_methods)。

[LWJGL 支持 FBO](http://www.lwjgl.org/wiki/index.php?title=Using_Frame_Buffer_Objects_(FBO))，但[GLFW](http://www.glfw.org/) “仅”用于 OpenGL 的跨平台设置，[而不用于渲染](http://www.glfw.org/faq.html#1_2)。为了方便的跨平台 FBO 使用，我建议在GLFW之上使用像[OGLplus这样的库。](http://oglplus.org/)有关渲染到纹理的示例，请参见[此处](http://oglplus.org/oglplus/html/oglplus_2025_rendered_texture_8cpp-example.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T10:27:35.040

Simple DirectMedia Layer (SDL) 库值得一试。它简化了跨平台 OpenGL 上下文创建，能够使用内存表面进行离屏渲染。

您唯一需要做的就是根据您的平台包含来自不同位置的 OpenGL 和 SDL 标头。这可以通过简单的预处理器指令来完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T10:03:45.213

据我所知，没有跨平台的方式来创建上下文，您必须创建自己的抽象，然后为每个平台实现它。

在 Windows 上，我使用以下代码创建了第二个上下文以在后台线程中加载内容（该程序使用 GLFW，但这无关紧要）：

```
void Program::someFunction()
{
    HDC hdc = wglGetCurrentDC();
    HGLRC hglrc = wglGetCurrentContext();
    HGLRC hglrc_new = wglCreateContext(hdc);
    wglShareLists(hglrc, hglrc_new);
    loadThread = boost::thread(&Program::loadFunc, this, hdc, hglrc_new);
}

/**
 * Imports all our assets. Supposed to run in its own thread with its own OpenGL context.
 * @param hdc The current device context.
 * @param hglrc A OpenGL context thats shares its display list with the main rendering context.
 */
void Program::loadFunc(HDC hdc, HGLRC hglrc)
{   
    wglMakeCurrent(hdc, hglrc);

        //Do stuff...

    wglMakeCurrent(NULL, NULL);
    wglDeleteContext(hglrc);
} 
```

# java - 一个界面如何用于不同的后台android任务？

> ID：14253421
> 
> 赞同：10
> 
> 时间：2013-01-10T08:16:11.377
> 
> 标签：java, android, oop, interface, android-asynctask

好吧，我有一个带有两个后台任务（Async-Task）的活动类，它们已在两个单独的类中定义，例如

```
public class GettingBeaconsList extends AsyncTask<String, String, String> 
public class GettingAirports extends AsyncTask<String, String, String> 
```

在**MainClass中初始化和执行**

```
public class MainClass extends Activity implements DelegateTaskCompleted
{

     int ServiceBoolean = 0;
     public OnClickListener LoadingBeaconList = new OnClickListener()
     {
         public void onClick(View v)
         {
             ServiceBoolean  =1;
             new GettingBeaconsList (context,MainClass.this).execute();
         }
     }

    public OnClickListener LoadingAirportList= new OnClickListener()
    {
         public void onClick(View v)
         {
             ServiceBoolean  =2;
             new GettingAirports(context,MainClass.this).execute();
         }
    }

    @Override
    public void JsonArrayLoaded(JSONArray result) 
    {
        // bla bla or whatever here i write, does not matter
         if(ServiceBoolean  == 1)   { 
                //  Load activity 5
         }

         else if( ServiceBoolean  == 2)
         { 
             //  Load activity 6

         }

        else if( ServiceBoolean==3 )
        {
            // display Toast or Alert Box or load Activity number 8
        } 

    }

} 
```

现在在上面的代码中 MainClass.this 像这样存储为 AsynTask 子类中的接口引用

```
private Context context             =   null;
private DelegateTaskCompleted delegate      =   null;

public GettingBeaconsList (Context context,DelegateTaskCompleted delegate)  
{   
    this.context        =   context;
    this.delegate       =   delegate;
}

// And constructor of second AsynTask is same as of First AsynTask Class

private Context context             =   null;
private DelegateTaskCompleted delegate      =   null;

public GettingAirports (Context context,DelegateTaskCompleted delegate) 
{   
    this.context        =   context;
    this.delegate       =   delegate;
} 
```

每个 AsynTask 类或子类的 onPostExecute，JSONArray 返回或传回调用类，如下所示。在这种情况下，调用类是**MainClass**但还有其他活动类使用相同的 AsynTask 类（**GettingBeaconsList**和**GettingAirports**）

```
protected void onPostExecute(String file_url)   
{           
    pDialog.dismiss();      
    delegate.JsonArrayLoaded(gotNearestbeacons);
} 
```

**现在我在MainClass**中有一个方法 (JsonArrayLoaded)来处理来自两个不同后台任务或服务的两个响应。我正在使用条件来确定执行了哪个服务/类或 AsynTask。

但是我要求最好的方法来解决这种情况，如果我们将来有 5 个或更多后台服务，它们也只是返回一个 JSON 数组，所以我需要为每个服务创建单独的接口吗？

在这种情况下，面向对象的出路应该是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-17T09:50:18.740

这是回调的接口

```
public interface CallbackReceiver {
    public void receiveData(Object result);

} 
```

使用 Asynctask 类作为抽象类

```
public abstract class JsonDataCallback extends AsyncTask<String, String, String> implements CallbackReceiver {
private ProgressDialog mProgressDialog;
Handler handler;
Runnable callback;
Activity activity;

public JsonDataCallback(Activity activity) 
{
     this.activity=activity;
     mProgressDialog = new ProgressDialog(activity);
     mProgressDialog.setMessage("Loading Please Wait.");
     mProgressDialog.setIndeterminate(false);
     mProgressDialog.setMax(100);
     mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
     mProgressDialog.setCancelable(true);
}

public abstract void receiveData(Object object);
@Override
protected void onPreExecute() {
    mProgressDialog =ProgressDialog.show(activity, "", "Please Wait",true,false);
    super.onPreExecute();
}

@Override
protected String doInBackground(String... aurl) {
    String results="";
    // do stuff
    return results;
}

@Override
protected void onPostExecute(String jsonData) {
     if (mProgressDialog != null || mProgressDialog.isShowing()){
         mProgressDialog.dismiss();
 }
     if(jsonData!=null)
     {
         receiveData(jsonData);
     }
}
} 
```

在你的代码中像这样使用它

```
String url = ipaddress + "/GrantAdvanceList;
            JsonDataCallback callbackservice = new JsonDataCallback(yourActivity.this) {
                @Override
                public void receiveData(Object object) {
                    jsonRecordsData = (String)object;
                    //do stuff with call back data
                }
            };

        callbackservice.execute(url, null, null); 
```

您可以通过这种方式重用代码。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-21T16:53:49.020

我能想到的最简单的解决方案是修改您的`DelegateTaskCompleted`界面，使其看起来像这样：

```
public interface DelegateTaskCompleted{
  public void JsonArrayLoaded(AsyncTask<String, String, String> task, 
                              JSONArray result);
} 
```

然后你`onPostExecute`会像下面这样发送自己回来：

```
protected void onPostExecute(String file_url)   
{           
    pDialog.dismiss();      
    delegate.JsonArrayLoaded(this, gotNearestbeacons);
} 
```

最后，在您的 中`MainClass`，您可以根据以下类型进行条件检查`AsyncTask`：

```
 @Override
 public void JsonArrayLoaded(AsyncTask<String, String, String> task,
                             JSONArray result) 
    {
         if(task instanceof GettingBeaconsList) { 
                //  do stuff related to the beacon list
         }

         else if(task instanceof GettingAirports) { 
            // do airport list stuff
         }

    } 
```

这样，您可以轻松识别`AsyncTask`通过响应发送的内容，而无需跟踪它是什么，如果一个比另一个花费更长的时间等等。

* * *

或者，让另一个类扩展`AsyncTask`但添加一个用于标识的抽象变量。

```
public class TrackableAsyncTask extends AsyncTask<String, String, String>{
    public abstract int getId();

    public static final int ID_AIRPORT = 1;
    public static final int ID_BEACONS = 2;
    ... etc
} 
```

然后让你的 Airport 和 Beacon`AsycTasks`扩展它。这将要求他们实施该`getId`方法。

```
public class GettingAirports extends AsyncTask<String, String, String> {
     public int getId(){
        return ID_AIRPORT;
     }
} 
```

`if (task instanceof GettingAirports)`然后，您可以执行`switch`如下语句，而不是执行条件语句：

```
switch(task.getId()){
   case TrackableAsyncTask.ID_AIRPORT:
       // run airport code
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-17T00:03:15.117

如果我正确理解您的问题，您已经扩展了 AsyncTask 几次。这些子类中的每一个的目标是将 JSONArray 传递给实现了 DelegateTaskCompleted 的 Activity，您将在其中对其执行某些操作。挑战在于，您想要对此 JSONArray 执行的“某事”会有所不同，具体取决于 AsyncTask 生成它的方式。

抛开这些假设，有很多不同的方法可以区分 JSONArray 来自哪个 AsyncTask：

1.  在您的 DelegateTaskCompleted 类文件中为它需要处理的每种 JSONArray 类型创建一个静态变量，例如一个 int。添加一个`JsonArrayLoaded`与此变量相同类型的参数。然后，使用您的 if-else 语句或 switch 语句来检查该变量与该集合并基于它对您的 JSONArray 执行操作。
2.  如果您有权访问生成 JSONArray 的任何内容，请使 Array 的 0 索引包含有关如何解析它的信息。（也许您可以将其与 if-else 或 switch 进行比较）
3.  正如您所建议的，为每个 AsyncTask 创建一个单独的接口，或者一个具有多种方法的单个接口。

只有选项 3 是面向对象的解决方案，正如评论中所指出的，由于可扩展性，这不是一个很好的解决方案。这绝不是一个完整的列表，只是我的一些想法。

不过，我想知道，是否值得使用接口，或者至少以呈现的方式。既然您已经有不同的 AsyncTask 子类来处理生成 JSONArrays，为什么不在主线程之外的方法中对它们执行任何操作`doInBackground()`，或者至少将该逻辑放在这些类中的某个位置，然后返回结果（或者可能将它们填充到数据库中并在需要时获取它们）。我认为可能有更好的方法来处理您的 AsyncTask 继承，它可以避免所有接口，或者至少以不同的方式使用它们，例如所有 AsyncTask 都实现一个接口。

如果您能够澄清您的问题并解释 AsyncTasks 和您的`JSONArrayLoaded`方法正在执行的操作类型，以及您以您的方式使用接口的原因，那将非常有帮助。很难给出一个具体的 OO 答案或关于 OO 最佳实践的建议，而关于您的代码实际在做什么和希望实现的信息很少。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-22T09:41:23.520

您也可以考虑使用 Handler 来实现这一点。在Activity中创建handler，把这个handler对象传给每个AsyncTask。在 onPost 调用 handler.sendEmptyMessage(CONSTANT_INT); 在 Handler handleMessage 检查 msg.what in if 或 switch 这样一来，只有一个处理程序对象将被创建并在多个调用中使用一个活动的异步

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-22T14:44:24.623

向两个 AsyncTask 类添加一个成员变量，即

```
public class GettingBeaconsList extends AsyncTask<String, String, String> 
public class GettingAirports extends AsyncTask<String, String, String> 
```

作为

```
private int flag; 
```

并为此编写setter

```
public void setFlag(int flag) 
{
  this.flag = flag;
} 
```

在 MainClass 中：

```
GettingBeaconsList beaconsList = new GettingBeaconsList(context,MainClass.this);
beaconsList.setFlag(100); //Declare this flag in integer constant.
beaconsList.execute();

GettingAirports airports = new GettingAirports(context, MainClass.this);
airports.setFlag(200);
airports.execute(); 
```

在这两个 AsyncTask 类中，都使用委托的方法传递标志：-

```
protected void onPostExecute(String file_url)   
{           
  pDialog.dismiss();      
  delegate.JsonArrayLoaded(gotNearestbeacons, flag);
  //Change the signature of this method
} 
```

再次在 MainClass 中处理响应：-

```
@Override
public void JsonArrayLoaded(JSONArray result, int flag) 
{

    // Here check which Background task has been completed
    if(flag == 100) // GettingBeaconsList is executed

    if(flag == 200) // GettingAirport is executed.

    // bla bla or whatever here i write, does not matter
     if(ServiceBoolean  == 1)   { 
            //  Load activity 5
     }

     else if( ServiceBoolean  == 2)
     { 
         //  Load activity 6

     }

    else if( ServiceBoolean==3 )
    {
        // display Toast or Alert Box or load Activity number 8
    } 

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-23T09:20:32.113

我建议你简单地为你的 Activity 使用*n 个*内部类来实现`DelegateTaskCompleted`. 它简单、高效、清晰且易于理解（想想维护）——当您构建 AsyncTasks 时，您已经传递了委托，那么您是否已经想到了这种方法？

```
public class MainClass extends Activity {
    // probabnly not static ;)
    private final class BeaconsDelegate implements DelegateTaskCompleted ...
    private final class AirportsDelegate implements DelegateTaskCompleted ...
} 
```

# android - 以编程方式检测android中的WiFi范围

> ID：14253424
> 
> 赞同：0
> 
> 时间：2013-01-10T08:16:47.730
> 
> 标签：android, wifi

我正在研究基于 WiFi 问题的项目。如何务实地检测 android 中的 WiFi 范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:30:04.643

这不是您简单地问一些问题并得到答案的网站。在这里，您需要首先指定您尝试过的内容以及失败的内容！看看这些链接。

[监控WIFI强度](https://stackoverflow.com/questions/1206891/android-how-to-monitor-wifi-signal-strength)
[WifiManager](http://developer.android.com/reference/android/net/wifi/WifiManager.html)
[ScanResult](http://developer.android.com/reference/android/net/wifi/ScanResult.html)

如果您可以发布您已经做过和尝试过的事情以及您面临的问题是什么，您会得到更好的答案！

# android - 尝试生成一个简单的弹出窗口

> ID：14253426
> 
> 赞同：-1
> 
> 时间：2013-01-10T08:16:54.343
> 
> 标签：android, android-xml

我试图在单击按钮时生成一个简单的弹出窗口，但由于某种原因它无法正常工作。下面是我的代码：

```
 public class Product extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    //overridePendingTransition(R.anim.fadein, R.anim.fadeout);
    setContentView(R.layout.product);
    String fontPath = "fonts/georgia.ttf";
    Typeface tf = Typeface.createFromAsset(getAssets(), fontPath);

    final Animation animScale = AnimationUtils.loadAnimation(this, R.anim.anim_scale);

    Button Particle =(Button)findViewById(R.id.button1); 
    Button MDF=(Button)findViewById(R.id.button2);
    Button Laminates=(Button)findViewById(R.id.button3);
    Button Ply =(Button)findViewById(R.id.button4); 
    Button Floor=(Button)findViewById(R.id.button5);
    Button Door=(Button)findViewById(R.id.button6);
    Button EdgeBand=(Button)findViewById(R.id.button7);
    Button ModFur=(Button)findViewById(R.id.button8);

    Particle.setTypeface(tf);
    MDF.setTypeface(tf);
    Laminates.setTypeface(tf);
    Ply.setTypeface(tf);
    Floor.setTypeface(tf);
    Door.setTypeface(tf);
    EdgeBand.setTypeface(tf);
    ModFur.setTypeface(tf);

   /* Particle.startAnimation(animScale);
    MDF.startAnimation(animScale);
    Laminates.startAnimation(animScale);
    Ply.startAnimation(animScale);
    Floor.startAnimation(animScale);
    Door.startAnimation(animScale);
    EdgeBand.startAnimation(animScale);
    ModFur.startAnimation(animScale); */

    Particle.setOnClickListener(Par);

}

private View.OnClickListener Par = new View.OnClickListener(){
    public void onClick(View v){

        openNewDialog();

    }
};

private void openNewDialog() {
    new AlertDialog.Builder(this).setItems(R.array.pop,new DialogInterface.OnClickListener(){
    public void onClick(DialogInterface dialoginterface,int i){
        if(i==0){
            Intent about = new Intent(Product.this,AboutUs.class);
            startActivity(about);
        }
        if(i==1){
            Intent about = new Intent(Product.this,AboutUs.class);
            startActivity(about);
        }

    }}); 

} 
```

在 Strings.xml 文件中：

```
 <array name="pop">
      <item name="easy_label">Key Features</item>
      <item name="medium_label">Advantages</item> 
     </array> 
```

xml中所述活动的布局文件：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/universalbg"
android:orientation="vertical" >
 <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >
        <TextView
       android:id="@+id/textView1"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_alignParentTop="true"
       android:layout_centerHorizontal="true"
       android:layout_marginTop="90dp"
       android:text="@string/btn2"
       android:textColor="#FFFFFF"
       android:textSize="24dp"
       android:textStyle="bold"  />
        </RelativeLayout>

<ScrollView 
     android:layout_marginTop="10dip" 
     android:layout_marginBottom="03dip" 
     android:id="@+id/Scroll" 
     android:layout_height="wrap_content" 
     android:layout_width="fill_parent" > 
```

```
<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button1"
    android:layout_below="@+id/button1"
    android:layout_marginTop="20dp"
    android:background="@drawable/insidebut"
    android:text="@string/BTn2"
    android:textColor="#900606" />

<Button
    android:id="@+id/button3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button2"
    android:layout_below="@+id/button2"
    android:layout_marginTop="20dp"
    android:background="@drawable/insidebut"
    android:text="@string/BTn3"
    android:textColor="#900606" />

 <Button
    android:id="@+id/button4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button3"
    android:layout_below="@+id/button3"
    android:layout_marginTop="20dp"
    android:background="@drawable/insidebut"
    android:text="@string/BTn4"
    android:textColor="#900606" />

 <Button
    android:id="@+id/button5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button4"
    android:layout_below="@+id/button4"
    android:layout_marginTop="20dp"
    android:background="@drawable/insidebut"
    android:text="@string/BTn5"
    android:textColor="#900606" />

  <Button
    android:id="@+id/button6"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button5"
    android:layout_below="@+id/button5"
    android:layout_marginTop="20dp"
    android:background="@drawable/insidebut"
    android:text="@string/BTn6"
    android:textColor="#900606" />

  <Button
    android:id="@+id/button7"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button6"
    android:layout_below="@+id/button6"
    android:layout_marginTop="20dp"
    android:background="@drawable/insidebut"
    android:text="@string/BTn7"
    android:textColor="#900606" />

   <Button
    android:id="@+id/button8"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button7"
    android:layout_below="@+id/button7"
    android:layout_marginTop="20dp"
    android:background="@drawable/insidebut"
    android:text="@string/BTn8"
    android:textColor="#900606" /> 
```

```
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T08:30:03.160

您需要调用`show()`才能实际显示对话框。

```
private void openNewDialog() {
    new AlertDialog.Builder(this).setItems(R.array.pop,new DialogInterface.OnClickListener(){
    public void onClick(DialogInterface dialoginterface,int i){
        if(i==0){
            Intent about = new Intent(Product.this,AboutUs.class);
            startActivity(about);
        }
        if(i==1){
            Intent about = new Intent(Product.this,AboutUs.class);
            startActivity(about);
        }

    }}).show(); // Here

} 
```

# jquery - 当鼠标悬停时使工具栏出现

> ID：14253441
> 
> 赞同：1
> 
> 时间：2013-01-10T08:17:40.167
> 
> 标签：jquery

我有以下内容：

**JS：**

```
$(function() {
  $(".fullscreen-toggle").toggle( 
    function() {
      $("body").addClass("fullscreen");
      $(".fullscreen-toggle").wrap("<div class='fixed-container fixed-toggle' />");
      $(".new_post .wysihtml5-toolbar").wrap("<div class='fixed-container fixed-toolbar' />");
      $(".new_post .form-actions").wrap("<div class='fixed-container fixed-submit' />");
      $(this).children(".toggle-fullscreen").hide();
      $(this).children(".exit-fullscreen").show();
    },
    function() {
      $("body").removeClass("fullscreen");
      $(".new_post .fixed-container").remove();
      $(this).children(".toggle-fullscreen").show();
      $(this).children(".exit-fullscreen").hide();
    }
  );

  // Fade in/out for post fullscreen form
  $('.fullscreen .fixed-toolbar').on("mouseover", function(){
    $(this).show();
  }); 
```

**HTML：**

![在此处输入图像描述](../Images/48d44904254a3693d3d7ed588d4683f7.png)

因此，当用户将鼠标放在工具栏上时，工具栏应该会出现（我正在使用`on`，因为`.fullscreen .fixed-toolbar`正在使用 jQuery 动态添加）。但是当我这样做时，什么也没有发生。

我做错了什么？

**编辑：**

我在一个链接中尝试了同样的方法，它被触发了。悬停div时有不同的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:36:22.123

我想我得到了你的问题：

```
$(document).on("mouseover", ".fullscreen .fixed-toolbar", function(){
    $('ul[class$="toolbar"]', this).show();
}); 
```

试试这个，看看是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:25:04.173

我认为您`on`以错误的方式使用。

试试看

```
$(document).on("mouseover", '.fullscreen .fixed-toolbar', function(){
    $(this).show();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T08:25:34.190

这不起作用，因为应该接收`mouseover`事件的元素被隐藏了。

要解决此问题，您可以使用 CSS 拥有一个包含透明内容的 div。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T08:30:56.810

当您的`on()`作业被评估时，没有任何`.fullscreen .fixed-toolbar`元素，所以什么也没有发生。您可以尝试将其放在`wrap()`：

```
$(".new_post .wysihtml5-toolbar").wrap("<div class='fixed-container fixed-toolbar' />");
$('.fullscreen .fixed-toolbar').on("mouseover", function(){
    $(this).show();
}); 
```

# c# - 如何将图像上的字符串转换为字符串？

> ID：14253444
> 
> 赞同：0
> 
> 时间：2013-01-10T08:17:56.083
> 
> 标签：c#, .net, windows, winforms

例如：有一张图片，我在图片中有一篇文章。以及如何将那篇文章转换为字符串？你能告诉我或给我一个解决方案吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-10T08:22:08.497

你需要一个[光学字符阅读器](http://en.wikipedia.org/wiki/Optical_character_recognition)。谷歌有[Tesseract.NET](http://en.wikipedia.org/wiki/Optical_character_recognition)，它应该给你一个 .NET 的 OCR。

但是请注意，OCR 有局限性。具有不同字体和字体大小的文本可能会导致 OCR 的结果不正确。

预处理通常会有所帮助，例如，如果您的文本始终位于图像的某个片段中，您可以将该子部分提供给 OCR。去除颜色通常也是一个好主意。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T08:21:14.307

您正在寻找的很可能是光学字符识别 (OCR)，它允许您将图像中的字符转换为其文本表示。

使用 C# 解决问题的最常见方法似乎是使用[Tessnet ，它是 Google 原生](http://www.pixel-technology.com/freeware/tessnet2/)[Tesseract OCR](http://code.google.com/p/tesseract-ocr/)库的 .NET 包装器。

有关更多信息，您可以随时参考这些相关问题：

[带有 Tesseract 界面的 OCR](https://stackoverflow.com/questions/30328/ocr-with-the-tesseract-interface)

[https://stackoverflow.com/questions/744966/any-open-source-c-sharp-ocr-library](https://stackoverflow.com/questions/744966/any-open-source-c-sharp-ocr-library)

# javascript - 如何在 Google 表格图表中添加数字寻呼机？

> ID：14253448
> 
> 赞同：1
> 
> 时间：2013-01-10T08:18:10.623
> 
> 标签：javascript, google-visualization

最近我在我的项目中添加了一个谷歌表格图表。我的任务是在其中添加一个数字寻呼机。但我只能添加

`options['pagingSymbols'] = {prev: 'prev', next: 'next'}; options['pagingButtonsConfiguration'] = 'auto';`.

它只显示下一个和上一个按钮。那么如何将其更改为数字分页。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T06:24:56.883

您必须为您的图表创建一个自定义事件处理程序。例如，您可以使用 dataView 获取 10 行数据，如下所示：

```
var dataView = new google.visualization.DataView(data);
var page = 1;
dataView.setRows(page * 10 - 9,page * 10); 
```

然后，您可以在图表下方以任何您喜欢的方式（图像等）创建按钮，并为每个按钮附加一个事件。您可以让该事件在其间显示页码，然后当您单击 < 或 > 按钮时，它将通过函数调用更改页面和页码，例如：

```
page = page + 1; // Obviously -1 for the minus button
dataView.setRows(page * 10 - 9,page * 10); 
```

然后，您将“页面”写入存在页码的文档中。您可以通过查看最大行数据来获取当前/最大页面值：

```
var maxPage = data.getNumberOfRows(); 
```

然后你可以编写某种错误捕获函数（如果他们在第一页单击“返回”，或者尝试在最后一页移动到“下一页”）。或者您可以使按钮变灰。或者你可以让它循环到最后一页。管他呢。

每当您进行更改时，您只需使用 dataView 而不是实际数据重绘表格。

# java - 发生错误时重试

> ID：14253449
> 
> 赞同：1
> 
> 时间：2013-01-10T08:18:11.757
> 
> 标签：java, loops, error-handling

发生错误时我想尝试 3 次。到目前为止我所做的......

```
public class TryTest {

    public static void main(String[] args) {
        TryTest test = new TryTest();
        test.tryThis();
    }

    public void tryThis() {
        int a = 10;
        int x = 0;
        int count = 1;
        try {
            System.out.println("Test " + count);
            a = a / x;
            System.out.println("Success !");
        } catch (Exception e) {
            if (count <= 3) {
                // I want to try again with new x value
                count++;
                x++;
            }
            System.out.println("ERROR:\t" + e);
        } finally {
            System.out.println("Finish");
        }
    }
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T08:20:59.057

使用循环，该循环使用你有一个完成值 [0, 3)

```
for(int i = 0; i < 3; i++) {
    try {
        System.out.println("Test " + count);
        int a = 10 / i;
        System.out.println("Success !");
        break;

    } catch (Exception e) {
        System.out.println("ERROR:\t" + e);
    }
 }
 System.out.println("Finish"); 
```

# java - 配置播放！在多个数据库环境中使用特定数据库的 2 个模型

> ID：14253450
> 
> 赞同：3
> 
> 时间：2013-01-10T08:18:19.057
> 
> 标签：java, playframework-2.0

我正在使用播放！2.0.4（Java 版），我需要访问 2 个不同的数据库（实际上是 2 个独立的模式）。所以在我的 中`application.conf`，我定义了：

```
db.default.driver=oracle.jdbc.OracleDriver
db.default.url="jdbc:oracle:thin:@server:1234:SCHEMA1"
db.default.user=user1
db.default.password=password1

db.bar.driver=oracle.jdbc.OracleDriver
db.bar.url="jdbc:oracle:thin:@server:1234:SCHEMA2"
db.bar.user=user2
db.bar.password=password2 
```

现在，我有一个需要与数据库*链接的模型。*`bar`

```
@Entity
@Table(name = "T_BAR")
public class Bar extends Model {

    ...

    public static Finder<Integer, Bar> finder = new Finder<Integer, Bar>(Integer.class, Bar.class);

    public static Bar findOne() {
        return finder.where().[some conditions].findUnique();
    }

} 
```

当然这不会起作用，因为 Play 会尝试访问`default`连接中定义的数据库。

所以我的问题是如何将我的配置`Model`为始终使用`bar`连接？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T08:39:54.140

它在开头的[文档中](http://www.playframework.org/documentation/2.0.4/JavaEbean)显示在您的情况下，它将是这样的：

```
ebean.default="models.Foo,models.A,models.B,models.C"
ebean.bar="models.Bar" 
```

请注意，如果您在不同数据库之间拆分模型，则不能再使用通配符表示法：

 ~~> ebean.default="模型。*"
> 
> ~~ebean.bar="models.Bar"~~~~

# iphone - 从 Iphone / IOS 的网站目录中获取所有文件的 url 列表并将它们存储在 NSMutableArray

> ID：14253453
> 
> 赞同：1
> 
> 时间：2013-01-10T08:18:34.600
> 
> 标签：iphone, ios, objective-c, ios6

我想列出所有文件的 url。文件存在于网站上。它们位于网站的公共目录中。访问 url 不需要 Ftp 访问权限。所以不需要基于 ftp 的编程。

例如 - www.mysite.com/myimages/（多个文件）

我想将所有文件的 URL 路径存储在 NSMutableArray 中。任何人都可以帮助我或向我解释使用objective c在iphone中执行此操作的正确方法吗？

希望得到解决方案，谢谢，Tuhin Bhatt

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:30:23.737

I think below approach will be one to solve the problem.

You have to make a simple web-service api that will simple return the all url links in json / xml format. Then you parse the response and store those in a NSMutableArray

# tridion - 如何查找其他内置 DWT 字段？

> ID：14253454
> 
> 赞同：8
> 
> 时间：2013-01-10T08:18:35.323
> 
> 标签：tridion

在 DWT 模板构建块中，我们可以使用一些“自由”变量，例如`@@Component.Title@@`或`@@Component.ID@@`以及[内置 DWT 函数](http://code.google.com/p/tridion-practice/wiki/BuiltInFunctionsForUseInHtmlTemplates)。

我没有意识到我们也可以使用or获取组件的*架构*描述。`@@Component.Description@@``@@Description@@`

开箱即用`Default Dreamweaver Component Design`有一组很好的示例，以及[Tridion Cook 书籍的迭代示例](http://code.google.com/p/tridion-practice/wiki/IteratingOverMultivalueEmbeddedFields)和[SDL Live Content](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/idheading-158523168)。

**我怎么能找到其他允许的内置 DWT 函数和变量，编程或其他方式？**

*换句话说，如果没有先`@@Description@@`看到一个例子，我不会想到 DWT 甚至可以使用（我还没有使用它）。*

**编辑**（2013 年 6 月 8 日）：我确实找到了有关 SDL Live Content 的其他信息（[需要登录](http://docportal.sdl.com/sdltridion)）。我们当然可以使用[文档中描述的可用包变量](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_915DDB8970C14E2A91AC0DC1B00BEA79)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T11:45:45.027

研究了一下，我发现如果我们去 tridion.contenmanager.config 文件，我们会发现节点，它引用了 Dreamweaver 中介类型：

```
<mediator matchMIMEType="text/x-tcm-dreamweaver" type="Tridion.ContentManager.Templating.Dreamweaver.DreamweaverMediator" /> 
```

这个命名空间可以在里面找到`Tridion.ContentManager.Templating.dll`

反编译是找出里面的东西并学习一些东西的最好方法。由于它是.Net 代码，这不会是一个问题，有许多免费的好工具可用。我最近在使用**JustDecompile**

我没有深入代码，但我可以看到有一个`TridionObjectSource`类，其中包含许多用于保留字的常量，例如：

*   `ReservedNameTitle`
*   `ReservedNameDescription`

搜索此常量在代码中的使用位置，有助于更好地了解它们的作用以及 Dreamweaver 中介器在内部的工作方式。

似乎是一个有趣的学习练习

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T18:51:20.303

我认为您已经在文档中搜索了答案并且结果为空。我建议你去 LiveContent 文档的相关部分并添加评论。这将直接到达文档团队，我相信他们会非常有兴趣听到未正确涵盖的功能。运气好的话，他们会更新它，你会帮我们大家一个忙。

我对“帮助自己”的方法也有一些同情，但是如果您通过自己对软件的分析发现了一个功能，并且在以后的版本中被删除，那么您将没有立足之地来抱怨这个. 因此，请帮助 Tridion 记录该功能，然后放心使用。

# wcf - 配置框架和 WIF Federation+Delegation：需要 factory.CreateChannelActingAs(token)

> ID：14253457
> 
> 赞同：1
> 
> 时间：2013-01-10T08:19:00.717
> 
> 标签：wcf, wif, federated-identity

我当前的任务是保护 WCF 服务。该服务使用配置框架（5.5，随 StockTraider 示例发布）托管，调用者也使用配置框架。

我设法使用 ws2007FederationHttpBinding 保护连接。

对于“IsOnline()”-检查我的 STS 发出服务令牌，这已经有效，但对于实际的服务调用，我希望 ActAs-Tokens 仍然知道被调用服务中的真实用户。

我的 STS 能够发行正确的 ActAs-Tokens。

问题是负载平衡客户端，它总是打开工厂，我不能再调用 WIF 方​​法（ConfigureChannelFactory() 和 CreateChannelActingAs()），因为它们要求工厂处于创建状态。

我最好的尝试是这样，但它在某处丢失了 ActAs-Subject 并且感觉就像一个黑客：

```
IPSServiceClient = new Client(serviceName, settingsInstance, createNewChannelInstance: true);

var token = ((IClaimsIdentity)Thread.CurrentPrincipal.Identity).BootstrapToken;

var factoryObject = IPSServiceClient.createANewChannelFactoryByAddress(IPSServiceClient.getANodeAddress());
var factory = factoryObject as ChannelFactory<IIWBPortalServiceV1>;
factory.ConfigureChannelFactory(); //factory must not be state=open here
factory.Credentials.SupportInteractive = false; //no cardspace

_channel = factory.CreateChannelActingAs(token); 
```

我错过了配置框架中的扩展点吗？我应该走的最佳方式是什么？

如果我创建一个新的控制台应用程序，添加服务引用并添加两个调用（ConfigureChannelFactory() 和 CreateChannelActingAs()），它就可以工作了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:16:53.953

我的问题中发布的代码有效。`AudienceUris`问题在于 ActAs-`securityTokenHandlers`部分中缺少 STS 的 web.config 。

仍然：发布的代码对我来说就像是黑客攻击。

# windows - 在所有驱动器上安排 chkdsk 输出结果到文件

> ID：14253458
> 
> 赞同：3
> 
> 时间：2013-01-10T08:19:06.747
> 
> 标签：windows, batch-file

我希望`chkdsk`通过我的任务计划程序从一个 bat 文件在所有驱动器上运行一个计划，这将在必要时强制自动重启，并将每个驱动器的结果输出到一个文本文件。

我一直在关注此处列出的示例[http://www.sharkyforums.com/showthread.php?302556-Automating-CHKDSK-FR-on-all-Drives](http://www.sharkyforums.com/showthread.php?302556-Automating-CHKDSK-F-R-on-all-Drives)看起来可以满足我的需要，但它没有似乎在工作。

在`DriveLtr.txt`文件中，我的驱动器列为

```
C:
D:
E: 
```

任何人都可以建议一个可能的解决方法来启动并运行它吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:29:10.513

This is a barebones version (slightly modified) of the script in the link you posted.

```
for /f %%a in (DriveLtr.txt) do (
echo Y| CHKDSK %%a /F /R >>CheckDiskRpt.txt
) 
```

You can add all the extra logging stuff you want to it, but that will loop over all the drives in the text file and run the `chkdsk` command for each of them, logging stdout to `CheckDiskRpt.txt`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-31T22:21:31.647

@ECHO 关闭

REM 这是一个脚本，它将针对 () 之间指定的驱动器运行 CHKDSK

FOR %%X IN (C,D,E,F,G,H,I,J,...,Z) DO (CHKDSK %%X: > "C:\CHKDSK_LOGS\DRIVE_%%X_%date:~ -4,4%%date:~-10,2%%date:~-7,2%.txt")

# django - django m2m 模型不同步

> ID：14253460
> 
> 赞同：3
> 
> 时间：2013-01-10T08:19:39.277
> 
> 标签：django, many-to-many, models

当我在新的 m2m 模型上运行 syncdb 时，出现错误：

错误：一个或多个模型未验证：services.service: 'categories' 通过模型 Service_Category 指定 m2m 关系，该模型尚未安装

我尝试使用 [https://docs.djangoproject.com/en/dev/topics/db/models/#extra-fields-on-many-to-many-relationships上列出的示例](https://docs.djangoproject.com/en/dev/topics/db/models/#extra-fields-on-many-to-many-relationships)

当我同步它时它工作正常。所以我在下面的模型中没有得到正确的结果。不太确定为什么我的模型不起作用，以及它是否是一个简单的错字或其他原因。注意：模型使用简单的 m2m 关系运行良好，但它不喜欢这种方式。谢谢

```
from django.db import models

# Create your models here.

class Category(models.Model):

    name = models.CharField(max_length=50)
    slug = models.SlugField(max_length=50, unique=True,
                            help_text='Unique value for product page URL, created from name.')
    description = models.TextField()
    is_active = models.BooleanField(default=True)
    meta_keywords = models.CharField("Meta Keywords", max_length=255, blank = True, null = True,
                                     help_text='Content for description meta tag')
    meta_description = models.CharField(max_length = 255, blank = True, null = True,
                                        help_text = 'Content for description meta tag')
    created_at = models.DateTimeField(auto_now_add = True)
    updated_at = models.DateTimeField(auto_now = True)

    class Meta:
        #app_label = ''
        db_table = 'categories'
        ordering = ['created_at']
        verbose_name_plural = 'Categories'

    def __unicode__(self):
        return self.name

    @models.permalink   
    def get_absolute_url(self):
        return ('catalog_category', (), {'category_slug': self.slug})

class Service(models.Model):

    name = models.CharField(max_length=255, unique = True)
    slug = models.SlugField(max_length=255, unique = True,
                            help_text = 'Unique value for product page URL, created from name.')

    old_price = models.DecimalField(max_digits=9, decimal_places=2,
                                    blank = True, null = True, default = 0.0)
    image = models.CharField(max_length=50, blank = True)
    is_active = models.BooleanField(default = True)
    is_bestseller = models.BooleanField(default = False)
    is_featured = models.BooleanField(default = False)
    description = models.TextField()
    bullet1 = models.CharField(max_length=255, blank = True, null = True,
                               help_text = 'Option Bullet for description')
    bullet2 = models.CharField(max_length=255, blank = True, null = True,
                               help_text = 'Option Bullet for description')
    bullet3 = models.CharField(max_length=255, blank = True, null = True,
                               help_text = 'Option Bullet for description')
    bullet4 = models.CharField(max_length=255, blank = True, null = True,
                               help_text = 'Option Bullet for description')
    bullet5 = models.CharField(max_length=255, blank = True, null = True,
                               help_text = 'Option Bullet for description')    
    micro_current = models.BooleanField(default = False)

    meta_keywords = models.CharField(max_length = 255,blank = True, null = True, 
                                     help_text = 'Comma Delimited Set of SEO keywords for meta tag')
    meta_description = models.CharField(max_length = 255, blank = True, null = True,
                                        help_text = 'Content for description meta tag')
    created_at = models.DateTimeField(auto_now_add = True)
    updated_at = models.DateTimeField(auto_now = True)

    categories = models.ManyToManyField(Category, through='Service_Category')

    class Meta:
        #app_label = ''
        db_table = 'services'
        ordering = ['created_at']

    def __unicode__(self):
        return self.name

class Service_Category:

    category = models.ForeignKey(Category)
    service = models.ForeignKey(Service)
    micro_current = models.BooleanField(default = False)

    class Meta:
        #app_label = ''
        db_table = 'service_categories' 
```

services.service: 'categories' 通过模型Service_Category指定m2m关系，尚未安装

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T08:48:32.183

您错过了正确定义中间模型

```
class Service_Category(models.Model):

    category = models.ForeignKey(Category)
    service = models.ForeignKey(Service)
    micro_current = models.BooleanField(default = False)

    class Meta:
        #app_label = ''
        db_table = 'service_categories' 
```

我们必须继承我们从 models.Model 类定义的每个模型。休息一切似乎都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:24:34.810

`Service_Category`需要继承自`models.Model`

IE，`class Service_Category(models.Model):`

# asp.net-web-api - 在 Web API 中公开相关实体的导航属性

> ID：14253461
> 
> 赞同：1
> 
> 时间：2013-01-10T08:20:11.120
> 
> 标签：asp.net-web-api

使用 ASPNET WebAPI 访问父实体的相关实体的推荐方法是什么？如果我有一个包含歌曲实体集合的专辑实体，那么在获取特定专辑时返回相关歌曲是否有意义，或者公开一组导航关系以便客户端可以获取这些是否有意义需要（例如在 OData 中）。如果是这样，是否有任何示例可以说明这一点。我只是在这里寻找为域模型构建 Web API 的最佳指南。

# jsf - ICEfaces pieChart：如何更改切片颜色？

> ID：14253462
> 
> 赞同：2
> 
> 时间：2013-01-10T08:20:12.553
> 
> 标签：jsf, icefaces, icefaces-3

我正在使用 ICEfaces 3.2。我想知道如何更改 ICEfaces ace pieChart 切片的颜色。

我的JSF代码如下：

```
<ace:chart id="chart" value="#{piechartbean.pieData}"
  animated="true"  legend="true"
  widgetVar="pieChart"/> 
```

我想为饼图的每个部分提供我自己的颜色。我的bean代码如下：

```
public List<SectorSeries> getPieData() {
  SectorSeries series = new SectorSeries();
  series.add("PENDING", map.get("PENDING"));
  series.add("SUBMITTED", map.get("SUBMITTED"));
  series.add("ARCHIVED", map.get("ARCHIVED"));
  series.setShowDataLabels(true);
  series.setSliceMargin(4);
  series.setFill(true);
  pieData.add(series) ;
  return pieData;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T06:42:31.263

SectorSeries 是 ChartSeries 的子类，具有 String[] seriesColors 属性。这可用于定义渲染器使用的 CSS 颜色定义数组。我从 Icesoft 论坛得到的这个解决方案。

# java - 匹配器查找第 n 个匹配索引

> ID：14253464
> 
> 赞同：0
> 
> 时间：2013-01-10T08:20:19.897
> 
> 标签：java, regex, pattern-matching

我正在尝试获取在文档中找到的每个模式的索引。到目前为止，我有：

```
 String temp = "This is a test to see HelloWorld in a test that sees HelloWorld in a test";
    Pattern pattern = Pattern.compile("HelloWorld");
    Matcher matcher = pattern.matcher(temp);
    int current = 0;
    int start;
    int end;

    while (matcher.find()) {
        start = matcher.start(current);
        end = matcher.end(current);
        System.out.println(temp.substring(start, end));
        current++;
    } 
```

由于某种原因，它一直只找到**in****的第一个实例，`HelloWorld``temp`**这会导致无限循环。老实说，我不确定你是否可以使用`matcher.start(current)`and `matcher.end(current)`- 这只是一个疯狂的猜测，因为`matcher.group(current)`之前工作过。这次我需要实际的索引，但`matcher.group()`对我不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:34:03.630

不要将索引传递给`start(int)`and `end(int)`。API 声明参数是组号。在您的情况下，只有零是正确的。使用`start()`and`end()`代替。

由于您对以下内容的调用，匹配器将在每次迭代中移至下一个匹配项[`find()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Matcher.html#find%28%29)：

> 此方法从输入序列的开头开始，或者，如果该方法的先前调用成功并且匹配器此后尚未重置，则从与先前匹配不匹配的第一个字符开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T08:25:52.340

将正则表达式修改为如下所示：

```
while (matcher.find()) {
    start = matcher.start();
    end = matcher.end();
    System.out.println(temp.substring(start, end));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T08:34:02.357

问题是这行代码。

```
 start = matcher.start(current); 
```

`current`第一次迭代后为 1。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T08:34:20.203

如果您只需要匹配文本的开始和结束偏移量，则不需要当前组，这样就可以了：

```
 String temp = "This is a test to see HelloWorld in a test that sees HelloWorld in a test";
    Pattern pattern = Pattern.compile("HelloWorld");
    Matcher matcher = pattern.matcher(temp);
    int current = 0;

    while (matcher.find()) {
        System.out.println(temp.substring(matcher.start(), matcher.end()));
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-10T08:38:39.173

```
while (matcher.find()) {
    start = matcher.start();
    end = matcher.end();
    System.out.println(temp.substring(start, end));
} 
```

会做你想做的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-18T03:37:13.067

```
 String temp = "This is a test to see HelloWorld in a test that sees HelloWorld in a test";
    Pattern pattern = Pattern.compile("HelloWorld");
    Matcher m = pattern.matcher(temp);
    while (matcher.find()) {
        System.out.println(temp.substring(m.start(), m.stop()));
    } 
```

# ios - 将浮点值四舍五入为 0.1（十位）

> ID：14253467
> 
> 赞同：4
> 
> 时间：2013-01-10T08:20:32.957
> 
> 标签：ios, objective-c, floating-point, rounding

> **可能重复：**
> [如何将浮点值四舍五入到小数点后 2 位？](https://stackoverflow.com/questions/829067/how-can-i-round-a-float-value-to-2-post-decimal-positions)

假设我有一个双倍数 3.46。我如何将其四舍五入到 3.50？我试过了

```
NSLog(@"res: %.f", round(3.46)); 
```

但它返回 3。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T08:35:09.073

做一些计算......

```
float f=3.46;
float num=f+0.05;//3.51
int intNum=num*10;//35
float floatNum=intNum/10.0;//3.5

NSLog(@"res: %.2f", floatNum); //3.50 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T08:26:00.083

以下代码可能会有所帮助

```
i = roundf(10 * i) / 10.0; 
```

我是你的浮点变量

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T08:50:28.473

如果您愿意接受[printf 的舍入规则](https://stackoverflow.com/questions/10357192/printf-rounding-behavior-for-doubles?lq=1)，那么在*舍入演示文稿*时以下内容就足够了：

```
NSLog(@"res: %.1f0", 3.46); 
```

请注意，0 只是在将值格式化为适当的小数位数 (1)*后添加的普通字符。*这种方法也应该可以使用`[NSString stringWithFormat:]`。

原始代码的结果是“3”，因为`round`它总是返回一个整数值。

YMMV；我什至不使用iOS。

# android - 访问 Android SQLite Phonegap 数据库

> ID：14253477
> 
> 赞同：1
> 
> 时间：2013-01-10T08:21:03.177
> 
> 标签：android, sqlite, cordova

我正在使用 phonegap android 应用程序创建数据库

```
openDatabase(shortName, version, displayName,maxSize); 
```

例如我的数据库名称 test 和一个表 test_table

现在我想使用Android的**DatabaseHelper**访问test_table数据（不在phonegap部分，但在同一个应用程序中）

我试过使用

```
query(DATABASE_TABLE, new String[] { row_1, row_2 }, null, null, null, null, null); 
```

但显示不存在表。创建表并插入数据后，我尝试使用简单的 android 代码进行访问。

我的问题是我可以访问我使用 phonegap 创建的数据库吗？如果可能的话怎么办？

# kendo-ui - 发布的 CheckedNodes 始终为空

> ID：14253484
> 
> 赞同：0
> 
> 时间：2013-01-10T08:21:24.923
> 
> 标签：kendo-ui

我已按照教程和剑道树视图的文档进行操作，但我有一个实例，其中我将隐藏值添加到复选框模板中。问题是单击提交按钮时，发布的值始终为空。

这是我的看法

```
 @using (Ajax.BeginForm("Projects", "Maintenance", FormMethod.Post,null))
{
<div class="treeview-back">

    @Html.TextBoxFor(c => c.UserAccountID)

    @(Html.Kendo().TreeView()
                .Name("treeviewSiteList")
                .DataTextField("Name")
                .Checkboxes(checkboxes => checkboxes                        
                    .CheckChildren(true)                                                                                          
                    .TemplateId("treeview-checkbox-template")                        
                )                    
                .DataSource(dataSource => dataSource                        
                .Read(read => read
                        .Action("UserProjectFolderList", "Maintenance", new { useraccount_id = Model.UserAccountID }))
                )
    )

</div>

<button type="submit" class="k-button">Save</button>
}

<script id="treeview-checkbox-template" type="text/kendo-ui-template">
       <input type="checkbox" name="treeviewNodes[#= item.id#]" value="#= item.id # "/>                                          
       <input type="hidden" name="treeviewNodes[#= item.id #]" value="#= item.SiteID #"/>
</script> 
```

这是我的看法：

```
public ActionResult GetChecked(int[] treeViewNodes)
{
} 
```

# java - Glazedlist 表的第一行中的 IndexOutOfBoundsException？

> ID：14253486
> 
> 赞同：0
> 
> 时间：2013-01-10T08:21:27.050
> 
> 标签：java, jtable, indexoutofboundsexception, glazedlists

我已经建立了 3 个 Glazedlist 表。当用户单击第一个表的行时，它会在第二个表中显示列表。当单击第二个表中的行时，它会显示第三个表中的其他列表。问题是当我单击第一个表中的第一行时，有时会出现以下异常。

**有谁知道为什么我会得到 IndexOutOfBoundsException 以及如何摆脱它？**

```
Exception in thread "AWT-EventQueue-1" java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
    at java.util.ArrayList.RangeCheck(ArrayList.java:546)
    at java.util.ArrayList.get(ArrayList.java:321)
    at ca.odell.glazedlists.impl.gui.ThreadProxyEventList.applyChangeToCache(ThreadProxyEventList.java:175)
    at ca.odell.glazedlists.impl.gui.ThreadProxyEventList.access$600(ThreadProxyEventList.java:68)
    at ca.odell.glazedlists.impl.gui.ThreadProxyEventList$UpdateRunner.listChanged(ThreadProxyEventList.java:237)
    at ca.odell.glazedlists.event.ListEventAssembler$ListEventFormat.fire(ListEventAssembler.java:412)
    at ca.odell.glazedlists.event.ListEventAssembler$ListEventFormat.fire(ListEventAssembler.java:409)
    at ca.odell.glazedlists.event.SequenceDependenciesEventPublisher$SubjectAndListener.firePendingEvent(SequenceDependenciesEventPublisher.java:445)
    at ca.odell.glazedlists.event.SequenceDependenciesEventPublisher.fireEvent(SequenceDependenciesEventPublisher.java:344)
    at ca.odell.glazedlists.event.ListEventAssembler.commitEvent(ListEventAssembler.java:316)
    at ca.odell.glazedlists.impl.gui.ThreadProxyEventList$UpdateRunner.run(ThreadProxyEventList.java:225)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:461)
    at di.pri.debutil.gui.debEventQueue.dispatchEvent(debEventQueue.java:63)
    at java.awt.EventDispatchThread.pumpOneEventForHierarchy(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:157)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:149)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:110) 
```

**代码：**

```
// build the table
EventList<Treat> TreatEventList = summaryModel.getTreatEvenList();
String[] propertyNames = new String[]{"PlanId", "Number", "Type","dication","stimulation","dication2","Date","Outcome","rank","version"};
String[] columnLabels = new String[]{"pnr", "NBNR", "handeling","Supp","Stim1","Stim2","date","Outcome","Rank","Version"};
TableFormat<Treat> tableFormat = GlazedLists.tableFormat(Treat.class, propertyNames, columnLabels);
SortedList<Treat> TreatSortedList = new SortedList<Treat>(TreatEventList, null);
cabinaTable = new WebTable(new EventTableModel<Treat>(TreatSortedList, tableFormat)); 

// Configure the Table
TableComparatorChooser tableSorter = TableComparatorChooser.install(cabinaTable, TreatSortedList, TableComparatorChooser.SINGLE_COLUMN);
tableSorter.appendComparator(1, 0, true);
cabinaTable.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
cabinaTable.setAutoResizeMode(JTable.AUTO_RESIZE_ALL_COLUMNS);
cabinaTable.addMouseListener(new MouseAdapter() {
    @Override
    public void mouseClicked(MouseEvent e) {
        int row = cabinaTable.rowAtPoint(e.getPoint());
        DHDPnr = cabinaTable.getValueAt(row, 0).toString();
        //at this point i set the evntlist for second Glazedlist table
        summaryModel.retrieveAllPredomainWithDHDPnr(dosNr(), DHDPnr);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:38:09.043

> 当用户单击第一个表的行时，它会在第二个表中显示列表。当单击第二个表中的行时，它会显示第三个表中的其他列表

这给了我一个提示，您可以使用基于 1 的索引而不是基于 0 的索引，这也会导致`IndexOutOfBoundsException`尝试访问索引为 0 的空 ArrayList。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:56:47.413

用显示的代码很难分辨，但是当您单击第一行并尝试获取数据时，代码中的某处没有数据。因此，当您填充应该存在的数据时，出于某种原因它并没有这样做。因为我以前没有使用过 GlazedLists，所以通过查看所有代码会更容易判断。

Size: 0 表示它错过了填充数据或某些内容为空。

# ios - iOS键盘阻碍了textview中的编辑文本

> ID：14253487
> 
> 赞同：3
> 
> 时间：2013-01-10T08:21:28.340
> 
> 标签：ios, keyboard, textview, uitextview

我在我的 viewController 中实现了一个 textView。这个 textView 覆盖了整个屏幕，因为我打算让这个视图让用户写下他们的笔记。但是，当用户触摸 textview 并弹出键盘时似乎存在问题。

问题是，一旦触摸 textview，键盘会显示一半的屏幕，而编辑文本的开头会隐藏在键盘后面。我尝试输入一些内容，但根本看不到文本，因为编辑文本位于键盘后面。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:31:13.133

在您的实现文件中编写 UITextView 的委托方法，并将您的 UITextView 的委托设置为 self

```
- (BOOL)textViewShouldBeginEditing:(UITextView *)textView
{
    CGRect rect = txtMessage.frame;
    rect.size.height = 91;// you can set y position according to your convinience
    txtMessage.frame = rect;
    NSLog(@"texView frame is %@",NSStringFromCGRect(textView.frame));

    return YES;
}
- (BOOL)textViewShouldEndEditing:(UITextView *)textView{
    return YES;
}

- (void)textViewDidEndEditing:(UITextView *)textView{

    CGRect rect = txtMessage.frame;
    rect.size.height = 276; // set back orignal positions
    txtMessage.frame = rect;
   NSLog(@"EndTextView frame is %@",NSStringFromCGRect(textView.frame));

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:53:36.180

当键盘弹出时，您必须调整文本视图的大小。首先，定义一个新的方法来注册你的控制器以显示键盘和隐藏通知：

```
- (void)registerForKeyboardNotifications
{
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWasShown:)
                                                 name:UIKeyboardDidShowNotification object:nil];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWillBeHidden:)
                                                 name:UIKeyboardWillHideNotification object:nil];
} 
```

然后`[self registerForKeyBoardNotifications];`从你的`viewDidLoad:`方法调用。

之后，您必须实现回调方法：

在这里`keyboardWasShown:`，您获取键盘的高度并将该数量减去 textView 的框架高度（如您所说，您的文本视图填满了整个屏幕，因此最终高度是前一个高度减去键盘高度）：

```
- (void)keyboardWasShown:(NSNotification*)aNotification
{
    NSDictionary* info = [aNotification userInfo];
    CGSize kbSize = [[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;
    CGRect rect = self.textView.frame;
    rect.size.height -= kbSize.height;
} 
```

这是`keyboardWillBeHidden:`

```
- (void)keyboardWillBeHidden:(NSNotification*)aNotification
{
    CGRect rect = self.textView.frame;
    rect.size.height = SCREEN_HEIGHT;
} 
```

# java - java bean中的线程

> ID：14253488
> 
> 赞同：0
> 
> 时间：2013-01-10T08:21:38.550
> 
> 标签：java, multithreading, jsp, session, javabeans

我在 JSP 中有一个会话 bean，在那个 bean 中我正在启动一个休眠 10 秒并再次执行的线程。我面临的问题是，在注销后这个线程也继续运行。

有人可以帮助如何阻止它运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:37:26.740

根据[EJB 规范](http://download.oracle.com/otndocs/jcp/ejb-3.1-pfd-oth-JSpec/)，从 EJB 启动线程是非法的。参照。第 21.2.2 节（第 593 页）：

> “企业 bean 不得尝试管理线程。企业 bean 不得尝试启动、停止、暂停或恢复线程，或更改线程的优先级或名称。企业 bean 不得尝试管理线程组。”

使用 EJB 可能有不同的解决方案，或者您可能需要使用不同的框架。这取决于您到底想要完成什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:36:51.040

从 servlet 启动线程不是一个好主意，因为如果您有很多用户，您可能会耗尽资源（内存和 CPU）。尤其是用数据库访问会出现奇怪的行为！

添加一个 Quartz 计时器 (http://quartz-scheduler.org)，它每 10 秒触发一次，并处理一个已订阅会话 bean 的列表。在用户注销时，再次从您的服务中取消订阅您的 bean。

# class - 可以像 Java 文件一样在 Sonar 中排除类文件吗？

> ID：14253496
> 
> 赞同：0
> 
> 时间：2013-01-10T08:22:20.900
> 
> 标签：class, sonarqube

在 Sonar 中，前屏幕左侧有一个排除导航选项卡。在那里您可以“从代码分析中排除来源。”。这是否意味着只有 .java 文件，或者也可以排除 .class 文件？我在 Sonar 中收到很多警告，其中某些类无法从类加载器中找到，指的是 Hibernate 等类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:49:47.573

您遇到的问题与您的 POM 文件或 Ant 脚本或 Sonar 项目属性文件中配置错误的类路径有关。这与排除无关（“sonar.exclusions”仅排除源文件）。

要解决此问题，您必须：

*   如果您使用 Maven，请在 POM 中正确设置您的依赖项

*   如果您使用 Ant 或 Sonar Runner，请正确设置“sonar.libraries”属性（查看[此示例](https://github.com/SonarSource/sonar-examples/tree/master/projects/languages/java/sonar-runner/java-sonar-runner-simple)以了解有关此属性的更多信息）

# c# - 释放鼠标时组合框意外自动关闭

> ID：14253497
> 
> 赞同：6
> 
> 时间：2013-01-10T08:22:22.973
> 
> 标签：c#, asp.net, asp.net-mvc-3, razor, devexpress

我偶然发现了一种我自己无法解释的现象，我对它发生的原因很感兴趣。我希望有人能解释一下原因以及如何摆脱这种现象：

我为应用程序创建了几个页面，然后创建了一个搜索页面。到目前为止，一切都很好。每当我尝试单击组合框本身时，它都会正常打开，但是一旦我松开鼠标按钮，它就会再次关闭。除非我将鼠标移到组合框区域之外然后释放它。我看到的唯一不寻常的事情是焦点自动重置到组合框之前的最后一个文本字段。

组合框本身是一个普通的 html 组合框，而文本框本身是用 Html.TextBox("search") 创建的，我还尝试更改命名，以防我忽略了 javascript 中的某些内容但没有更改。

然后我尝试了以下方法：

```
 @Html.TextBox("search")

&nbsp;&nbsp;Kategorie  @Html.DevExpress().ComboBox(
                    settings => {
                        settings.Name = "PrductCategory";
                        settings.ControlStyle.CssClass = "select";
                        settings.Width = 300;
                        settings.SelectedIndex = 0;
                        settings.Properties.DropDownStyle = DevExpress.Web.ASPxEditors.DropDownStyle.DropDown;
                        settings.Properties.IncrementalFilteringMode = DevExpress.Web.ASPxEditors.IncrementalFilteringMode.Contains;
                        settings.Properties.TextField = "Name";

                        settings.Properties.DisplayFormatInEditMode = false;
                        settings.Properties.Native = false;
                        settings.Properties.TextFormatString = "{0}";
                        settings.Properties.DisplayFormatString = "{0}";
                        settings.Properties.ValueField = "Id";
                        settings.Properties.ValueType = typeof(int);
                    }
  ).BindList(Categories).GetHtml() 
```

这表现得应该有整个时间（尽管组合框的格式很糟糕。由于我没有找到如何将它格式化为看起来像“普通 html”组合框，我决定尝试原生模式，但更多的是下面的）。当我将本机模式设置为 true 时，同样的现象再次发生（再次为 false 时，它​​表现正常）。在浏览了教程和文档几个小时后，我仍然完全不知所措（特别是因为我没有发现任何 setfocus 命令正在使用）。

所以我的问题是：有没有人知道为什么会发生这种情况以及如何阻止这种现象的发生？

肿瘤坏死因子

***评论：***

在本机模式下并通过选项卡切换到组合框时，我可以正常浏览列表（使用箭头键），但我仍然无法打开组合框，因为它再次自动关闭并且焦点被重置到文本框（ “搜索”）在所有其他情况下（除了 native=false）。

当本机模式设置为 false 并且我单击组合框时，焦点将丢失（并设置为组合框之前的文本字段 [它是文本字段] 不到 1 秒，然后在组合框不关闭时设置为组合框）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:20:52.163

托马斯，

听起来您用于初始化 ComboBox 的一些 DevExpress 设置可能会导致浏览器出现奇怪的行为。您能否包含一份来自浏览器源代码的呈现控件外观的副本？

可能值得删除一些可选设置，例如`IncrementalFilteringMode`查看这是否会导致问题。

# c - 批量处理

> ID：14253499
> 
> 赞同：1
> 
> 时间：2013-01-10T08:22:32.200
> 
> 标签：c, multithreading, batch-processing

我有一个字符串列表，我想根据每个文件的键输出到不同的文件（此键存在于列表中，因此如果此键在某个节点中为 1，则需要将字符串写入文件 1。 txt 并且如果键是 2 那么输出应该被重定向到 2.txt 等等......）。

我的想法是为每个列表成员分配一个唯一键，使其成为唯一记录，然后根据系统中可用处理器的数量生成多个线程。该线程将节点的输出从节点池（即我的列表）重定向到相关文件。我怀疑这是否是批处理的好设计。或者我应该只有一个线程来完成整个输出。

ps - 在我受到抨击或其他任何事情之前，让我告诉你我只是一个好奇的学习者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:47:14.533

据我了解，您的处理步骤是：

*   按键选择文件
*   将项目写入文件

我认为当并行处理可以提高性能时，情况并非如此。如果您想加快此代码的速度 - 使用缓冲和异步 I/O。

*   为每个文件维护一个标志 -*正在写入*
*   当你想写一些东西到文件时——检查这个标志
    *   如果*write-in-progress*为 False：
        *   设置*正在写入*= True
        *   将您的项目添加到缓冲区
        *   开始将此缓冲区异步写入文件
    *   如果*write-in-progress*为 True：
        *   将您的项目添加到缓冲区
*   当挂起的异步操作完成时
    *   检查是否有非空缓冲区，如果是则开始异步写入

还有更简单的方法：使用缓冲和同步 I/O。它会比上面描述的异步方法慢，但不会慢很多。您可以单独启动多个线程并在每个线程中遍历列表。每个线程必须只处理一些唯一的键集。例如，您可以使用两个线程，第一个线程必须只写入具有奇数键的项目，第二个线程必须只写入具有偶数键的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:28:41.180

使其成为单线程。然后运行，找出你的瓶颈是什么。如果您发现瓶颈是 CPU 而不是磁盘 IO，则启用并行处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T09:18:28.253

你需要一个并发模型 - 无论听起来多么严重:)

首先分析一下什么可以同时做，又是什么互不相关的。想象一下你的程序的每一步都在不同的机器上执行，它们之间有某种通信，例如IP网络。

然后在这些实例（动作/机器）之间绘制一个流程。标记需要执行哪些资源操作，例如列表、文件。将资源标记为单独的实例（与操作和机器相同）。

将文件系统放到你的图片中，看看是否可以加快写入单独文件的速度，或者它会在文件系统中结束，因此会再次序列化。

连接实例。看看你是否有任何好处。它可能看起来像这样：

```
 list
         |
      list reader
        /  \     \
       /    \     ----------\
    file    file          file
   writer  writer        writer
     |        |              |
  file 1    file 2         file 3
     \        /              |
      \      /               |
     file system 1      file system 2 
```

在示例中，您可以看到获得一些并行执行可能是有意义的

# java - 用 Java 打印 - 介质尺寸被忽略

> ID：14253505
> 
> 赞同：2
> 
> 时间：2013-01-10T08:23:12.167
> 
> 标签：java, printing

我正在尝试使用 Java Print Services 自动将打印作业发送到打印机，但它很快就变成了一场噩梦。来到手头的问题，这里是代码：

```
DocAttributeSet docAset = new HashDocAttributeSet();
                docAset.add(MediaSizeName.NA_LETTER);
                Doc myDoc = new SimpleDoc(book, psInFormat, docAset);
                PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet();
                aset.add(new JobName("Test Job Name", null));
                aset.add(MediaSizeName.NA_LETTER);
                aset.add(Sides.ONE_SIDED);
                aset.add(Fidelity.FIDELITY_TRUE);

//                new JobState()
                DocPrintJob job = services[8].createPrintJob();
                try {
                    job.print(myDoc, aset);
    //System.out.println(" Thread " + this.getId() + ": Envío de impresión OK");
                } catch (PrintException ex) {
                    Logger.getLogger(PrototypeMain2.class.getName()).log(Level.SEVERE, null, ex);
                } 
```

此代码完全忽略介质尺寸并打印到默认的 A4 尺寸纸张。

非常感谢这里的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:35:08.837

似乎打印机根据我设置的首选项使用默认纸张，所以如果我将首选项设置为使用字母大小，它会要求使用字母大小的页面，默认情况下它将在 A4 大小的纸张上打印。

# c# - 在 C# 中使用 OAuth 2 身份验证获取谷歌阅读器订阅列表

> ID：14253507
> 
> 赞同：0
> 
> 时间：2013-01-10T08:23:11.383
> 
> 标签：c#, oauth, windows-8, google-reader, google-oauth

很长一段时间以来，我一直在使用 ClientLogin 身份验证在 C# 代码中访问谷歌阅读器。我一直在为 Windows 8 开发 Google Reader 客户端，并决定使用更安全的 OAuth 2 身份验证。我可以登录、获取访问令牌和刷新令牌，但我未能使用访问令牌进行任何 api 调用，得到 401 Unauthorized 错误。我的令牌带有许多以“ya29.”开头的字符。我希望令牌是正确的。我正在使用 HttpClient 类，同时将“授权：”标头传递给它。有人可以帮我吗？下面是我的代码片段

```
private async Task<string> HttpGet()
    {
    string url = "http://www.google.com/reader/api/0/subscription/list";
        HttpClient client = new HttpClient();
        client.DefaultRequestHeaders.Add("Authorization", 
            String.Format("OAuth access_token={0}", Token);

        var response = await client.GetAsync(url);
        var content = await response.Content.ReadAsStringAsync();
        return content;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T22:42:48.643

看来您没有使用正确的 Authorization 标头格式。根据[https://developers.google.com/accounts/docs/OAuth2WebServer#callinganapi](https://developers.google.com/accounts/docs/OAuth2WebServer#callinganapi)，标题应为：

```
Authorization: Bearer ya29.xxxxxxxxxxxx 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T09:25:14.787

我推荐使用 RestSharp。它比 HttpClient 更容易使用，此外还支持 OAuth 1 和 2。这里有一个关于如何使用它的教程：

[http://www.codeproject.com/Articles/321291/Google-OAuth2-on-Windows-Phone](http://www.codeproject.com/Articles/321291/Google-OAuth2-on-Windows-Phone)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T05:59:29.560

我可以提个建议吗？

我讨厌编写 oauth 代码。

将 Google 身份验证添加到应用程序的最简单方法是使用 Windows Azure 移动服务 (WAMS)。WAMS 将通过他们的 SDK 为您处理 oauth 详细信息，该 SDK 还支持 Live ID、FaceBook 和 Twitter。它是 C# 和 JavaScript、Android 和 iOS。最重要的是，它是免费的。

引用： http: [//www.windowsazure.com/en-us/home/features/mobile-services/](http://www.windowsazure.com/en-us/home/features/mobile-services/)

# ios6 - SK产品本地化描述不同语言

> ID：14253509
> 
> 赞同：4
> 
> 时间：2013-01-10T08:23:17.683
> 
> 标签：ios6, in-app-purchase, storekit

我`app purchase`在我的`app`. 我正在使用泰语商店中的测试帐户测试泰语设备。我在应用购买标题和描述中同时使用英语和泰语。

`SKProductsResponse (product details[localizedDescription, localizedTitle] of SKProduct)`总是用英语返回。

我究竟做错了什么？

我的测试设备设置在泰国商店，使用泰语作为语言，但产品详细信息以英语返回，我想向用户显示`thai format`.

怎么可能，我尝试了很多方法，但直到现在我还没有找到任何解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-14T09:41:37.247

您应该在 iTunes Connect 上创建一个测试用户帐户，并将其 iTune Store 设置为泰国。然后从您的设备上注销您的 Apple id，但不要在此处使用您的测试用户帐户登录。当您开始购买产品时，iTune 帐户对话框将提示您登录 Apple ID。在此处使用您的测试帐户登录后，您应该会看到泰语的产品详细信息。

[您可以从这里](https://stackoverflow.com/questions/9155802/testing-in-app-purchases-for-multilanguage/9349427#9349427)获得更多详细信息。

# ios - iOS mapview 使用 word 搜索位置

> ID：14253512
> 
> 赞同：2
> 
> 时间：2013-01-10T08:23:26.140
> 
> 标签：ios, objective-c, xcode, mkmapview, mapkit

我有一个`UISearch`栏`MapView`，当用户在搜索栏中键入单词时，包含该单词相关位置的 MapView 应该显示`MapView` **PIN** ...我该怎么做？请帮我。我已经为单个地方做了这个。我怎样才能显示多个位置。我不想`MKAnnotation`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:37:18.653

`MKAnnotation`如果要显示多个位置，我认为使用没有任何问题。创建由 make 形成的对象数组`lattitude-longitude pair`。然后为数组运行循环并使用`addAnnotations`

请参阅[mkmapview](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html#//apple_ref/doc/uid/TP40008205)和[mkAnnotation](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKAnnotation_Protocol/Reference/Reference.html#//apple_ref/occ/intf/MKAnnotation)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T13:31:45.083

您可以从地址中找到经度和纬度

去[这里](http://deviphonesdk.blog.com/?p=136)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T13:54:39.270

您要求提供代码示例。这就是我通常在地图上放置图钉的方式：

```
MKPointAnnotation *annotation = [[MKPointAnnotation alloc] init];
annotation.coordinate = coordinate;
annotation.title = title;
annotation.subtitle = subtitle;
[self.mapView addAnnotation:annotation]; 
```

对于简单的正向地理编码，我建议您参考[Locate Awareness Programming Guide](http://developer.apple.com/library/ios/documentation/userexperience/conceptual/LocationAwarenessPG/UsingGeocoders/UsingGeocoders.html#//apple_ref/doc/uid/TP40009497-CH4-SW1)。对于发出多个地理编码请求的更复杂的场景，它 (a) 异步运行；但是 (b) 具有讽刺意味的是，它们不应该同时存在，我建议您参考[地图上的多个位置（使用 MKMapItem 和 CLGeocoder）](https://stackoverflow.com/questions/14195706/multiple-locations-in-google-map-mkmapitem/14198584#14198584)，它可以很容易地适应使用上述代码放置图钉（而不是在地图应用程序，就像其他答案一样）。

# scala - 在代理后面使用 dispatch 0.9.5？

> ID：14253515
> 
> 赞同：6
> 
> 时间：2013-01-10T08:23:34.330
> 
> 标签：scala, proxy, scala-dispatch

我正在尝试（在 IntelliJ IDE 或从 sbt 命令行）从代理后面执行这个非常基本的调度片段：

```
import dispatch._
val svc = url("http://api.hostip.info/country.php")
val country = Http(svc > as.String)
println(country()) 
```

我能得到的只是一个例外：

```
java.net.ConnectException: Connection timed out: no further information to
    http://api.hostip.info/country.php java.util.concurrent.ExecutionException:
       java.net.ConnectException: Connection timed out: no further information 
            to http://api.hostip.info/country.php 
```

我尝试设置通常的 vm 参数但没有确凿的结果： `-Dhttp.proxyHost=`_my_proxy_host_ `-Dhttp.proxyPort=80` 并且仍然得到相同的异常。

另一方面，以下代码段运行良好：

```
import dispatch._
val svc = url("http://api.hostip.info/country.php") setProxyServer(new com.ning.http.client.ProxyServer(myproxyhost,80))
val country = Http(svc > as.String)
println(country()) 
```

由于它看起来不太美观也不是 scala-ish，我想知道在这种情况下这是否真的是我应该做的。

欢迎任何帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T10:51:19.573

`http.proxyHost`如果您设置此参数，`http.proxyPort`将使用：

```
-Dcom.ning.http.client.AsyncHttpClientConfig.useProxyProperties=true 
```

另外还有参数：

```
-Dcom.ning.http.client.AsyncHttpClientConfig.proxy.user=user
-Dcom.ning.http.client.AsyncHttpClientConfig.proxy.password=password
-Dcom.ning.http.client.AsyncHttpClientConfig.proxy.protocol=NTLM 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T13:30:22.210

看来我的问题不是很有启发性。

*我在图书馆*风格的皮条客上做了一些小练习：

```
package dispatch

package object ext {
    import com.ning.http.client.ProxyServer

  class DefaultPoxyVerbs(override val subject: Req) extends  ProxyVerbs

  object NoProxy extends ProxyServer("",0)

  object Proxy {
    def apply(host: String,port: Int) = new ProxyServer(host,port)
  }

  trait ProxyVerbs extends RequestVerbs {

    def through(proxy : ProxyServer) =
      if (NoProxy == proxy) subject else subject.setProxyServer(proxy)

    def ||>(proxy : ProxyServer) = through(proxy)

  }

  implicit def implyProxyVerbs(builder: Req) =
    new DefaultPoxyVerbs(builder)
} 
```

现在我可以写：

```
 import dispatch._
  import dispatch.ext._

  val svc = url("http://api.hostip.info/country.php") through Proxy("blah blah blah",80)

  val country = Http(svc > as.String)
  println(country()) 
```

就调度 api 风格而言，这更令人赏心悦目和连贯。

虽然这是一个有趣的练习，但我现在仍然不知道我最初是否按照我应该的方式使用 api，也不知道为什么设置 `http.proxyHost`和`http.proxyPort`属性不起作用，因为它似乎适用于[其他人](https://stackoverflow.com/questions/9380136/how-do-i-set-a-proxy-server-when-using-dispatch-http)。

# jax-ws - JAX WS 兼容性 JRE 1.4

> ID：14253517
> 
> 赞同：2
> 
> 时间：2013-01-10T08:23:37.107
> 
> 标签：jax-ws, compatibility

*   我有一个运行在 JRE 1.4 上的应用程序。（由于多种原因，无法升级）
*   我有另一个应用程序需要通过 Web 服务调用。
*   我已经使用 JAX WS(wsimport, JDK 1.6) 轻松创建了 Web 服务客户端，并且能够调用 Web 服务。

如何将 webservice 客户端与我当前的 1.4 JDK 应用程序集成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-06T21:11:05.970

这是不可能的，因为 Java 1.4 不支持注解。你必须在没有它们的情况下这样做，所以，使用 Axis。看[这里](https://axis.apache.org/axis/java/user-guide.html)

# html - CSS：IE中的表格TD边距

> ID：14253522
> 
> 赞同：0
> 
> 时间：2013-01-10T08:24:28.550
> 
> 标签：html, css, html-table

我在 IE 中的表格有问题。这就是它在 Chrome 中的外观（应该如此）：

![表的 Chrome 视图](../Images/74c7426f9e31a73a4f1fbbadb4e45d03.png)

这是 IE 的显示方式： ![表的 IE 视图](../Images/154e312dd24640c4eb5919f090f84866.png)

**我的 HTML：**

```
<table border="0" cellpadding="1" cellspacing="15" class="content" align="center">
    <tbody>
        <tr>
            <td width="293">
                <a href="/hvad-laerer-jeg.aspx"><img src="/UserFiles/image/hvadkanjeg.png" width="293" height="170" alt="" /></a><br />
                <br />
                <h1 style="margin-left: 40px;">Headline</h1>
                <p style="margin-left: 40px;">Text
            </td>
            <td width="292" style="margin:0 23px 0 23px;">
                <a href="/faglig-og-personlig-udvikling.aspx"><img src="/UserFiles/image/hjerne.png" width="293" height="170" alt="" /></a>
                <h1 style="margin-left: 40px;"><br />Headline</h1>
                <p style="margin-left: 40px;">Text
            </td>
            <td width="292">
                <a href="/ansoegning.aspx"><img src="/UserFiles/image/send.png" width="293" height="170" alt="" /></a>
                <h1 style="margin-left: 40px;"><br />Headline</h1>
                <p style="margin-left: 40px;">Text
            </td>
        </tr>
    </tbody>
</table> 
```

**我应用的唯一不是内联的 CSS 是：**

```
table.content tr td { background:#ededed; margin-right:10px; }
    table.content tr td h1 { font-size:19px !important; } 
```

**我希望什么以及我尝试过什么：** IE 显示表格数据，就像 Chrome 对边距和对齐所做的那样。我曾尝试使用“IF IE”并添加填充 - 但它没有帮助。我也尝试过申请`Border-collapse:separate`，`border-spacing`但没有成功。

任何建议表示赞赏！

# python - 在 Snow Leopard 上找不到 Python 附带的默认包时遇到问题

> ID：14253524
> 
> 赞同：2
> 
> 时间：2013-01-10T08:24:30.370
> 
> 标签：python, macos, osx-snow-leopard, packages, tix

我有两个问题。

首先，如何找出 Mac OS-X 10.6.8 Snow Leopard 附带的 Python 模块（及其版本）？

二、和雪豹有什么关系`Tix`？我绝对无法理解这一点。如果我 import `Tix`，没有错误。如果我以交互方式输入

```
>>> help(Tix) 
```

我获得了有关使用 Tix 的兆字节信息。如果我再往前走，就会发生这种情况......

```
>>> root = Tix.Tk()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/lib-tk/Tix.py", line 210, in __init__
_tkinter.TclError: can't find package Tix
>>> 
```

哦，寡妇会打开，但我仍然收到错误消息。我单击窗口并注意到菜单栏显示“Python”。在“文件”下，我看到“运行小部件演示”。我启动它并运行每个 Tix 演示。当我单击演示的“查看代码”时，我看到它全部在（我假设的）Tcl 中。

Tcl/Tk 是 8.5x 版本，Tix 已安装，我可以用 Python 导入它，但我不能使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:28:53.683

*   Mac OS X 10.6 附带 Python 2.6.1。

*   该平台上的 TKinter 版本是 Apple 8.5.7，并且存在已知问题；例如，IDLE 不会与它一起运行。

有关更多详细信息，请参阅 Python.org[上的 Mac OS X 页面](https://www.python.org/download/mac/tcltk/)上的IDLE 和 tkinter with Tcl/Tk。

`help('modules')`10.6机器上的终端输出：

```
$ sw_vers -productVersion 
10.6.8
$ /usr/bin/python
Python 2.6.1 (r261:67515, Jun 24 2010, 21:47:49) 
[GCC 4.2.1 (Apple Inc. build 5646)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> help('modules')

Please wait a moment while I gather a list of all available modules...

/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/pkgutil.py:110: DeprecationWarning: twisted.flow is unmaintained.
  __import__(name)
/System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/twisted/python/filepath.py:12: DeprecationWarning: the sha module is deprecated; use the hashlib module instead
  import sha
/System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/twisted/words/im/__init__.py:8: UserWarning: twisted.im will be undergoing a rewrite at some point in the future.
  warnings.warn("twisted.im will be undergoing a rewrite at some point in the future.")
2013-01-10 09:36:31.224 Python[68800:b07] Error loading /Developer/Library/Frameworks/InterfaceBuilderKit.framework/InterfaceBuilderKit:  dlopen(/Developer/Library/Frameworks/InterfaceBuilderKit.framework/InterfaceBuilderKit, 265): Library not loaded: @rpath/DevToolsRemoteClient.framework/Versions/A/DevToolsRemoteClient
  Referenced from: /Developer/Library/Frameworks/InterfaceBuilderKit.framework/InterfaceBuilderKit
  Reason: image not found
/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/pkgutil.py:110: DeprecationWarning: The wxPython compatibility package is no longer automatically generated or actively maintained.  Please switch to the wx package as soon as possible.
  __import__(name)
AddressBook         _Win                dumbdbm             py2app
AppKit              __builtin__         dummy_thread        py_compile
AppleScriptKit      __future__          dummy_threading     pyclbr
Audio_mac           _abcoll             easy_install        pydoc
Automator           _ast                email               pydoc_topics
BaseHTTPServer      _bisect             encodings           pyexpat
Bastion             _builtinSuites      errno               pygame
CFNetwork           _bytesio            exceptions          quopri
CGIHTTPServer       _codecs             ez_setup            random
CalendarStore       _codecs_cn          fcntl               re
Canvas              _codecs_hk          fetchmailconf       readline
Carbon              _codecs_iso2022     filecmp             repr
Cocoa               _codecs_jp          fileinput           resource
CodeWarrior         _codecs_kr          findertools         rexec
Collaboration       _codecs_tw          fnmatch             rfc822
ColorPicker         _collections        formatter           rlcompleter
ConfigParser        _csv                fpformat            robotparser
Cookie              _ctypes             fractions           runpy
CoreData            _ctypes_test        ftplib              sched
CoreFoundation      _curses             functools           select
CoreGraphics        _curses_panel       future_builtins     sets
CoreText            _elementtree        gc                  setuptools
Dialog              _fileio             genericpath         sgmllib
DictionaryServices  _functools          gensuitemodule      sha
DocXMLRPCServer     _hashlib            gestalt             shelve
EasyDialogs         _heapq              getopt              shlex
ExceptionHandling   _hotshot            getpass             shutil
Explorer            _json               gettext             signal
FSEvents            _locale             glob                site
FileDialog          _lsprof             grp                 smtpd
Finder              _multibytecodec     gzip                smtplib
FixTk               _multiprocessing    hashlib             sndhdr
Foundation          _random             heapq               socket
FrameWork           _socket             hmac                sqlite3
HTMLParser          _sqlite3            hotshot             sre
IN                  _sre                htmlentitydefs      sre_compile
InputMethodKit      _ssl                htmllib             sre_constants
InstallerPlugins    _strptime           httplib             sre_parse
InstantMessage      _struct             ic                  ssl
InterfaceBuilderKit _symtable           icglue              stat
JavaScriptCore      _testcapi           icopen              statvfs
LatentSemanticMapping _threading_local    idlelib             string
LaunchServices      _tkinter            ihooks              stringold
MacOS               _warnings           imageop             stringprep
Message             _weakref            imaplib             strop
MimeWriter          abc                 imghdr              struct
MiniAEFrame         aepack              imp                 subprocess
Nav                 aetools             imputil             sunau
Netscape            aetypes             inspect             sunaudio
OSATerminology      aifc                io                  svn
OpenSSL             altgraph            itertools           symbol
PixMapWrapper       anydbm              json                symtable
PreferencePanes     applesingle         keyword             sys
PubSub              appletrawmain       lib2to3             syslog
PyObjCTools         appletrunner        libsvn              tabnanny
PyRSS2Gen           argvemulator        linecache           tarfile
QTKit               array               locale              telnetlib
Quartz              ast                 logging             tempfile
Queue               asynchat            macerrors           terminalcommand
ScreenSaver         asyncore            macholib            termios
ScriptingBridge     atexit              macostools          test
ScrolledText        audiodev            macpath             textwrap
SearchKit           audioop             macresource         this
SimpleDialog        autoGIL             macurl2path         thread
SimpleHTTPServer    base64              mailbox             threading
SimpleXMLRPCServer  bdb                 mailcap             time
SocketServer        bdist_mpkg          markupbase          timeit
StdSuites           bgenlocations       marshal             tkColorChooser
StringIO            binascii            math                tkCommonDialog
SyncServices        binhex              md5                 tkFileDialog
SystemConfiguration bisect              mhlib               tkFont
SystemEvents        bonjour             mimetools           tkMessageBox
Tix                 bsddb               mimetypes           tkSimpleDialog
Tkconstants         bsddb185            mimify              toaiff
Tkdnd               buildtools          mmap                token
Tkinter             bundlebuilder       modulefinder        tokenize
UserDict            bz2                 modulegraph         trace
UserList            cPickle             multifile           traceback
UserString          cProfile            multiprocessing     tty
VBoxPython2_5       cStringIO           mutex               turtle
VBoxPython2_6       calendar            netrc               twisted
WebKit              cfmfile             new                 types
XgridFoundation     cgi                 nis                 unicodedata
_AE                 cgitb               nntplib             unittest
_AH                 chunk               ntpath              urllib
_App                cmath               nturl2path          urllib2
_CF                 cmd                 numbers             urlparse
_CG                 code                numpy               user
_CarbonEvt          codecs              objc                uu
_Cm                 codeop              opcode              uuid
_Ctl                collections         operator            vboxapi
_Dlg                colorsys            optparse            vboxshell
_Drag               commands            os                  videoreader
_Evt                compileall          os2emxpath          warnings
_File               compiler            parser              wave
_Fm                 contextlib          pdb                 weakref
_Folder             cookielib           pickle              webbrowser
_Help               copy                pickletools         whichdb
_IBCarbon           copy_reg            pimp                wsgiref
_Icn                crypt               pipes               wx
_LWPCookieJar       csv                 pkg_resources       wxPython
_Launch             ctypes              pkgutil             wxaddons
_List               curses              platform            wxversion
_Menu               datetime            plistlib            xattr
_Mlte               dateutil            popen2              xdrlib
_MozillaCookieJar   dbhash              poplib              xml
_OSA                dbm                 posix               xmllib
_Qd                 decimal             posixfile           xmlrpclib
_Qdoffs             difflib             posixpath           xxsubtype
_Qt                 dircache            pprint              zipfile
_Res                dis                 profile             zipimport
_Scrap              distutils           pstats              zlib
_Snd                dl                  pty                 zope
_TE                 doctest             pwd                 

Enter any module name to get more help.  Or, type "modules spam" to search
for modules whose descriptions contain the word "spam". 
```

和( `pygame`, , , )包是后来安装在该机器上的非默认附加组件，其余的应该是标准问题。`vboxapi``VBoxPython2_5``VBoxPython2_6``vboxapi``vboxshell`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:28:33.627

> 如何找出 Mac OS-X 10.6.8 Snow Leopard 附带的 Python 模块（及其版本）？

在您的 python 终端中输入以下内容：

```
help('modules') 
```

# json - 打印递归数组

> ID：14253529
> 
> 赞同：0
> 
> 时间：2013-01-10T08:24:34.177
> 
> 标签：json

有人可以帮我打印这个 json 解码数组中的“文本”值吗？我确实 echo $obj["text"] 得到了一个空白:(

啊，我做了 var_dump ；它说它是一个包含 1 个元素的数组中的 20 个元素的数组 :-) 所以在编辑了 42 次代码之后，我找到了解决方案，只是因为很棒的 Fangel 帮助打印文本需要放置以下行：echo $对象[0][“文本”]；

```
$obj=[
        {
          "created_at":"Mon Sep 03 05:00:30 +0000 2012",
          "id":242487207418544128,
          "id_str":"242487207418544128",
          "text":"Clint, come to the Democratic Convention. We'll get you a coherent speech to read - and we'll even help you comb your hair.",
          "source":"web",
          "truncated":false,
          "in_reply_to_status_id":null,
          "in_reply_to_status_id_str":null,
          "in_reply_to_user_id":null,
          "in_reply_to_user_id_str":null,
          "in_reply_to_screen_name":null,
          "user":{
             "id":15376626,
             "id_str":"15376626",
             "name":"BarrackObama",
             "screen_name":"BarrackObama",
             "location":"Washington, D.C.",
             "url":null,
             "description":"President of the United States of America",
             "protected":false,
             "followers_count":94289,
             "friends_count":1,
             "listed_count":577,
             "created_at":"Thu Jul 10 12:05:37 +0000 2008",
             "favourites_count":0,
             "utc_offset":-18000,
             "time_zone":"Quito",
             "geo_enabled":false,
             "verified":false,
             "statuses_count":106,
             "lang":"en",
             "contributors_enabled":false,
             "is_translator":false,
             "profile_background_color":"E6EB6F",
             "profile_background_image_url":"http://a0.twimg.com/profile_background_images/76798997/PresidentialSeal.jpg",
             "profile_background_image_url_https":"https://si0.twimg.com/profile_background_images/76798997/PresidentialSeal.jpg",
             "profile_background_tile":false,
             "profile_image_url":"http://a0.twimg.com/profile_images/56441335/so_normal.jpg",
             "profile_image_url_https":"https://si0.twimg.com/profile_images/56441335/so_normal.jpg",
             "profile_link_color":"0FA7FF",
             "profile_sidebar_border_color":"EAFF08",
             "profile_sidebar_fill_color":"171CA6",
             "profile_text_color":"E69407",
             "profile_use_background_image":true,
             "default_profile":false,
             "default_profile_image":false,
             "following":null,
             "follow_request_sent":null,
             "notifications":null
          },
          "geo":null,
          "coordinates":null,
          "place":null,
          "contributors":null,
          "retweet_count":110,
          "entities":{
             "hashtags":[

             ],
             "urls":[

             ],
             "user_mentions":[

             ]
          },
          "favorited":false,
          "retweeted":false
       }
    ] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:07:55.227

这是打印它的方法：`echo $obj[0]["text"];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T09:02:48.593

[http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

> 协会
> 
> 当 TRUE 时，返回的对象将被转换为关联数组。

当您将第二个参数设置为 true 时，您应该这样做`echo $obj["text"];`，`$obj->text;`因为正如手册中所说，第二个参数为 true 时，强制 json_decode 返回关联数组，即使它是 JSON 中的对象。

据我所知，您的 JSON 中有一组对象。因此，在 json 解码之后，您还应该有一个对象数组。只需使用`foreach`循环遍历数组并打印所有项目的文本：

```
foreach($obj as $item) {
    echo $item->text + "<br/>";
} 
```

或者像这样的关联数组（如果第二个参数`json_decode`为真）：

```
foreach($obj as $item) {
    echo $item["text"] + "<br/>";
} 
```

# windows-8 - 扩展使用 Javascript 开发的 Windows 8 Metro 应用程序的 ListView

> ID：14253535
> 
> 赞同：0
> 
> 时间：2013-01-10T08:25:17.040
> 
> 标签：windows-8, windows-mobile, windows-phone, windows-phone-8

我有一个简单的问题

如何派生 ListView 控件（Windows 8 HTML5 和 Javascript）以制作具有附加功能的新控件？

我知道有使用**WinJS.UI.derive**函数派生的规定，但问题是这个函数需要 BaseClass 的对象，我想根据[Docs](http://msdn.microsoft.com/en-us/library/windows/apps/br229815.aspx)派生我的类。由于 listview 控件具有如下构造函数。

```
var listview =  new WinJS.UI.ListView(element,options); 
```

因此我不能在代码行下面写。

```
var MyListViewControl = WinJS.Class.derive(new WinJS.UI.ListView(element,options), function(element,options){}, {}, {}); 
```

它将抛出异常，说明元素和选项未定义。谁能建议我如何派生 ListView 控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:42:58.850

您正在尝试从类的*实例*派生，而不是原型本身。

```
var myListViewControl = WinJS.Class.derive(WinJS.UI.ListView);

var instance = new myListViewControl(yourElementItAttachesTo, {
    /* options per the properties on the list view object per the docs
}); 
```

# pinvoke - P/Invoke，C#向本机代码返回一个字符串

> ID：14253549
> 
> 赞同：2
> 
> 时间：2013-01-10T08:25:57.243
> 
> 标签：pinvoke

我的代码有效，但我害怕 P/Invoke 中的内存。

这是我将从本机 C++ 代码调用的委托。

```
[UnmanagedFunctionPointer(CallingConvention.StdCall, CharSet = CharSet.Unicode)]
public delegate string CommandCallbackDelegate([MarshalAs(UnmanagedType.LPWStr)] string command
    , [MarshalAs(UnmanagedType.LPWStr)] string arg1
    , [MarshalAs(UnmanagedType.LPWStr)] string arg2
    ); 
```

在 C# 中，我将委托传递给本机 DLL。

```
private static GCHandle _gcHandle;
public static void RegisterCommandCallback(CommandCallbackDelegate fun) { _gcHandle = GCHandle.Alloc(fun);

    if (IntPtr.Size == 8)
        RegisterCommandCallback_x64(fun);
    else
        RegisterCommandCallback_x86(fun);
} 
```

而在原生DLL中，我得到函数指针后，就可以成功调用方法，并得到`String`C#的返回值。

```
typedef LPCWSTR (WINAPI* PFN_CommandCallback)( LPCWSTR wszCommand, LPCWSTR wszArg1, LPCWSTR wszArg2);
PFN_CommandCallback g_pfnCommandCallback = ....;

LPCWSTR wszRet = g_pfnCommandCallback( L"CMD", L"ARG1", L"ARG2"); 
```

如您所见，C#方法返回`String`到本机DLL，我不确定返回的非托管内存是否被GC释放。

虽然我上面的代码有效，但恐怕它正在访问刚刚释放的内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T12:05:18.383

在这种情况下，pinvoke 编组器使用共享 COM 分配器分配字符串返回值。因此，您的本机代码应该调用`CoTaskMemFree`本机 DLL 返回的指针。因此，您可能需要在释放内存之前获取内容的副本！

顺便说一句，没有必要用它来装饰参数，`[MarshalAs(UnmanagedType.LPWStr)]`因为它只是重新声明了默认值。删除后，您的代码会更容易阅读。

# python - 从 GtkBin 扩展

> ID：14253553
> 
> 赞同：1
> 
> 时间：2013-01-10T08:26:10.050
> 
> 标签：python, gtk, gtk3, gobject, custom-widgets

我正在尝试制作一个类似于 Gtk 在所有类似 TreeView 的小部件上使用的“快速搜索”条目的自定义小部件。

这是我最初想法的简化示例：

```
from gi.repository import Gtk

class QuickSearch(Gtk.Bin):
    def __init__(self, *args, **kwargs):
        super(QuickSearch, self).__init__(*args, **kwargs)
        self.add(Gtk.Entry())

win = Gtk.Window()
win.connect("delete-event", Gtk.main_quit)
search = QuickSearch()
win.add(search)
win.show_all()
Gtk.main() 
```

问题如下：

*   如果我单独使用它，就像在这个例子中一样，似乎有空间分配给自定义小部件，但`GtkEntry`屏幕上没有显示。我尝试了和自定义小部件（hexpand、vexpand、边距、对齐等）的各种属性组合，`GtkEntry`但无济于事。
*   如果与其他小部件结合使用，当我交互式查询小部件分配的高度时，它显然是 1。在屏幕上，小部件实际上不会出现（因为它在其他小部件之间有点“挤压”）。

那么，我在对象初始化或我如何使用这个自定义小部件时缺少一些东西？这是特定于 的问题`GtkBin`吗？我尝试用 a 做同样的事情，`GtkBox`并且完美无缺，但我认为`GtkBin`更适合这个特定的小部件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T14:53:21.987

出于某种原因，`Gtk.Bin`没有为其孩子分配空间。如果您实现`do_size_allocate`虚拟方法，那么它可以工作。为什么不调用默认实现，我不知道。

```
from gi.repository import Gtk, Gdk

class QuickSearch(Gtk.Bin):
    def __init__(self, *args, **kwargs):
        super(QuickSearch, self).__init__(*args, **kwargs)
        self.add(Gtk.Entry())

    def do_size_allocate(self, allocation):
        self.set_allocation(allocation)
        child_allocation = Gdk.Rectangle()
        border_width = self.get_border_width()
        child_allocation.x = allocation.x + border_width
        child_allocation.y = allocation.y + border_width
        child_allocation.width = allocation.width - 2 * border_width
        child_allocation.height = allocation.height - 2 * border_width
        self.get_child().size_allocate(child_allocation)

win = Gtk.Window()
win.connect("delete-event", Gtk.main_quit)
search = QuickSearch()
win.add(search)
win.show_all()
Gtk.main() 
```

但是，我认为从 a 继承`Gtk.Frame`更适合您的目的；它是一个带有样式边框的单子容器，这是您想要的以及更多。它的大小分配方法有效。

# objective-c - 无论如何将 UITableViewController 扩展到 UIViewController

> ID：14253559
> 
> 赞同：1
> 
> 时间：2013-01-10T08:26:54.200
> 
> 标签：objective-c, xcode, interface, uiviewcontroller, uitableview

首先，我对 Objective-c 和 xcode 很陌生，所以它只是缺乏基础知识。

但基本上需要将 an 扩展`UITableViewController`到 an`UIViewController` 或 to 但以另一种方式我需要一个接口（标头），它继承了我的实现，`UIViewController`但它是`UITableViewController`

为了实现这一点，我会在 C# 中做这样的事情：

```
@interface Keyboard_Field_Extensions_UIViewController : UIViewController 
@end

@interface Keyboard_Field_Extensions_UITableViewController : Keyboard_Field_Extensions_UIViewController, UITableViewController
@end 
```

有什么办法可以解决这个问题`objective-c`吗？也许使用代表？但是怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:36:29.877

好吧，objective-c 中没有多重继承。委托或协议分别可以是一个选项或扩展现有类而不实现子类。（如果我没记错的话，这对 Objective-C 来说是独一无二的）

然而，一般来说，扩展或继承 UITableView 可能不是一个好主意，尽管它可以做到。您应该更详细地描述您想要在 UI 上实现的目标。那么你可能会得到比一般的“你可以使用协议/委托”更好的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:38:12.927

Objective C 没有多重继承，如 C++ 或 C# UITableViewController 不需要扩展到 UIViewController，因为它已经是 UIViewController（通过一些使用 tableview 的方法扩展）

它是继承链 -UITableViewController: UIViewController: UIResponder: NSObject

# ios - 检测来自另一个 VC 的警报是否可见

> ID：14253563
> 
> 赞同：1
> 
> 时间：2013-01-10T08:27:34.940
> 
> 标签：ios, uiviewcontroller, uialertview

也许这是一个愚蠢的问题，但是如果该警报属于**另一个**视图控制器，您如何检测警报是否可见？

我的意思是，如果警报（调用它`myAlert`）属于我正在检查的视图控制器，那么 using`[myAlert isVisible]`会告诉你。但是如果警报属于另一个视图控制器（调用它`myOtherAlert`），更糟糕的是，如果你有 10 个其他视图控制器，你会怎么做？检查每一个可能的`myOtherViewController.myOtherAlert`？没有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T09:10:52.607

如果您有一个（全局）变量，每次打开警报时都会将其增加 1，并且每次（嗯，用户）关闭一个警报时（但是，您必须通过委托来检测关闭）您会减少乘 1。然后如果变量等于 0，则没有激活警报。听起来工作量很大，但它是……独立于语言的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:33:22.637

*   一种选择是将警报包装在您自己的类中，并为显示的警报添加一个类计数器。然后，如果当前可见任何警报，您可以随时咨询班级。

*   也许您可以遍历主窗口的子视图，看看它们之间是否有警报。（*这实际上不起作用*- 请参阅评论。）

*   您还可以重新考虑您的 UI 逻辑，使其无法同时显示多个警报。我的意思是，一旦您显示警报，用户就无法切换到不同的视图控制器。这意味着在屏幕上同时显示警报和不显示它的视图控制器应该是非常罕见的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T08:33:23.190

警报不属于任何视图或视图控制器。它实际上显示在另一个中`UIWindow`，我认为您无法确定它是否可见，除非您编写自己的集中式逻辑来跟踪何时在应用程序中显示和关闭警报。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T08:33:23.387

如果我理解正确，您的问题是有时您的视图控制器会显示警报视图，即使它们目前不可见。在这种情况下，有一个简单的修复：

```
if ([self.view window]) {
    [alertView show];
} 
```

如果不是这种情况，我建议您查看关联参考[http://labs.vectorform.com/2011/07/objective-c-associated-objects/](http://labs.vectorform.com/2011/07/objective-c-associated-objects/)

# sql - 在sql中存储多个层次结构

> ID：14253565
> 
> 赞同：4
> 
> 时间：2013-01-10T08:27:37.760
> 
> 标签：sql, database, tree, hierarchy

我有这个层次来分类汽车：

```
 Color
                           /       \
                      Light        Dark
                    /   |   \       /   |   \
                  Red Green Blue  Red Green Blue
                   |    |     |    |    |     |
                 Car1  Car2  Car3 Car4 Car5  Car6 
```

但我也可以有这个层次结构：

```
 Color
                      /       |       \
                   Red      Green      Blue
                  /   \     /    \     /   \
               Light Dark Light Dark Light Dark
                  |    |     |    |    |     |
                Car1  Car4  Car2 Car5 Car3  Car6 
```

**如何在表格中创建这些？**

我的想法是这样的：

```
Id | ParentId | ParentId2 | Name
--------------------------------
1    Null         Null       Color
2      1                     Light
3      1                     Dark 
```

但如果我想添加更多层次结构，添加许多 ParentId 列似乎并不好。而且我想我也会遇到多个父母的问题。

目标是将这些层次结构放在树视图控件中，用户只需单击一个按钮即可调用他想要查看的任何层次结构。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:42:26.320

是否应将其视为不同的层次结构类型...

```
Id | ParentId | Type | Name
--------------------------------
1    Null         1      Color
2      1          1       Light
3      1          1       Dark
4    Null         2      Color
5      4          2       Red
6      4          2       Green
7      4          2       Blue
8      5          2       Light
... 
```

或者只是规范化为 3 个表格：汽车、颜色、颜色色调

因此，您可以查询原始数据，然后在代码中生成树结构循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T08:44:19.913

Personally I prefer the [nested sets](http://en.wikipedia.org/wiki/Nested_set_model) when it comes to hierarchies stored in sql. There are many variations to the technique depending on your constraints and there are many resources over the net about CRUD sql routines.

I have to say that when you have large trees you will have a small performance penalty at Create/Update/Delete top parents but you have excellent performance when you Read and I think this is preferred over a recursive model where you have the other way around.

**Edit:**

I see the multiple parent issue. I would suggest a change in your approach by merging the 2nd and 3rd level. You would have something like

```
**Node**      |       **Left**      |     **Right**      |     **Level**
Color                 1                   26                   1
LightRed              2                   5                    2
LightGreen            6                   9                    2
LightBlue             10                  13                   2
DarkRed               14                  17                   2
DarkGreen             18                  21                   2
DarkBlue              22                  25                   2
Car1                  3                   4                    3
Car2                  7                   8                    3
Car3                  11                  12                   3
Car4                  15                  16                   3
Car5                  19                  20                   3
Car6                  23                  24                   3 
```

The query to get all the cars that have color would be something like

```
select * 
from hierarchy
where left > 1 and right < 26 and level = 3 
```

**Edit2:**

[a-horse-with-no-name](https://stackoverflow.com/users/330315/a-horse-with-no-name) correctly pointed that your DBMS may support recursive models. If so then it may be a better solution for you. [Here](http://msdn.microsoft.com/en-us/library/ms186243(v=sql.105).aspx) is some documentation for Sql Server.

# php - array_multisort 对 2 个相同的多维数组进行不同的排序

> ID：14253568
> 
> 赞同：5
> 
> 时间：2013-01-10T08:27:56.450
> 
> 标签：php

我试图通过将它们导入多维数组并使用 array_diff 函数找出差异来比较 php 中的 2 个 csv 文件。

我使用的方法是

1) 获取预期 csv 的每条记录并转储到 arr1

2) 获取实际 csv 的每条记录并转储到 arr2

3) 使用 array_multisort 对 array1 进行排序

4) 使用 array_multisort 对 array2 进行排序

5) 使用 array_diff 函数比较每条记录（例如 arr1[0][1] vs arr2[0][1]）

我的目标是在尽可能短的时间内使用 php 脚本比较文件。我发现上述方法是最短的（最初尝试将 csv 内容转储到 MySQL 并使用 db 查询进行比较，但由于某些未知原因，查询工作速度非常慢，以至于超时后我的 Apache 服务器崩溃）

我在 csv 中有大小高达 300mb 的文件，但通常它是 70k 记录，有 20 列和 10mb 大小

我正在粘贴我所做的代码（按照上述步骤）

```
 $header='';

    $file_handle = fopen($fileExp, "r");
    $k=0;

    while ($data=fgetcsv($file_handle,0,$_POST['dl1'])) {

        if(count($data)==1 && $data[0]=='')
            continue;
        else
        {
            $urarr1[$k]='';
            for($i=0;$i<count($data);$i++)
            {

                if(in_array($i,$exclude_cols,true))
                    $rarr1[$k][$i]='NTBT';
                else
                    $rarr1[$k][$i]=trim($data[$i]);

            }   

            $k++;
        }

    }

    fclose($file_handle);

    echo '<br>Exp Record count: '.count($rarr1);
    $header.='<br>Exp Record count: '.count($rarr1);

    $hrow=$rarr1[0];   //fetch header row and then unset it
    unset($rarr1[0]);

    array_multisort($rarr1);   //need to sort on all 20 columns asc

    $rarr1=array_values($rarr1); //re-number the array

       //writing the sorted o/p to file...debugging purposes
    $fp = fopen($_POST['op'].'/file1.csv', 'w');

    foreach ($rarr1 as $fields) {
        fputcsv($fp, $fields);
    }

    fclose($fp);

     //Repeat for actual .csv

    $file_handle = fopen($fileAct, "r");
    $k=0;

    while ($data=fgetcsv($file_handle,0,$_POST['dl2'])) {

        if(count($data)==1 && $data[0]=='')
            continue;
        else
        {
            for($i=0;$i<count($data);$i++)
            {

                if(in_array($i,$exclude_cols,true))
                    $rarr2[$k][$i]='NTBT';
                else
                    $rarr2[$k][$i]=trim($data[$i]);
            }   

            $k++;

        }

    }

    fclose($file_handle);

    unset($file_handle);

    echo '<br>Act Record count: '.count($rarr2);
    $header.='<br>Act Record count: '.count($rarr2);

    unset($rarr2[0]);

    array_multisort($rarr2);

    $rarr2=array_values($rarr2);

    $fp = fopen($_POST['op'].'/file2.csv', 'w');

    foreach ($rarr2 as $fields) {
        fputcsv($fp, $fields);
    }

    fclose($fp);

       ///Comparison logic

    $header.= '<br>';

    $header.= '<table>';
    $header.= '<th>RECORD_ID</th>';
    for($i=0;$i<count($hrow);$i++)
    {
        $header.= '<th>'.$hrow[$i].'_EXP</th>';
        $header.= '<th>'.$hrow[$i].'_ACT</th>';
    }

    $r=array();
    for($i=0;$i<count($rarr1);$i++)
    {

        if(array_diff($rarr1[$i],$rarr2[$i]) || array_diff($rarr2[$i],$rarr1[$i]))
        {

            $r[$i]=array_unique(array_merge(array_keys(array_diff($rarr1[$i],$rarr2[$i])),array_keys(array_diff($rarr2[$i],$rarr1[$i]))));

            foreach($r[$i] as $key=>$v)
            {
                if(in_array($v,$calc_cols))
                {
                    if(abs($rarr1[$i][$v]-$rarr2[$i][$v])<0.2)
                    {
                        unset($r[$i][$key]);
                    }   
                }
                elseif(is_numeric($rarr1[$i][$v]) && is_numeric($rarr2[$i][$v]) && !in_array($v,$calc_cols) && ($rarr1[$i][$v]-$rarr2[$i][$v])==0)
                {
                    unset($r[$i][$key]);
                }   
            }

            if(empty($r[$i]))
                unset($r[$i]);

            if(isset($r[$i]))
            {
                $header.= '<tr>';

                $header.= '<td>'.$i.'</td>';

                for($j=0;$j<count($rarr1[$i]);$j++)
                {

                    if(in_array($j,$r[$i]))
                    {
                        $header.= '<td style="color:orange">'.$rarr1[$i][$j].'</td>';
                        $header.= '<td style="color:orange">'.$rarr2[$i][$j].'</td>';
                    }
                    else
                    {
                        $header.= '<td >'.$rarr1[$i][$j].'</td>';
                        $header.= '<td >'.$rarr2[$i][$j].'</td>';
                    }
                }
                $header.= '</tr>';
            }
        }   

    }   
    $header.= '</table>';

//print_r($r);
    echo '<br>';
    // if(!isset($r))
        // $r[0]=0;

    echo 'Differences :'.count($r)  ;

    $header.= '<br>';
    $header.= 'Differences :'.count($r) ;

    $time_end = microtime(true);
    $execution_time = ($time_end - $time_start)/60; //dividing with 60 will give the execution time in minutes other wise seconds
    echo '<br><b>Total Execution Time:</b> '.$execution_time.' Mins'; //execution time of the script 
```

虽然最初我发现这适用于大多数文件，但后来我发现对于某些文件，由于未知原因，array_multisort 对 arr1 和 arr2 进行了不同的排序，即使内容看起来相同......我不确定这是因为数据类型不匹配，但我也尝试过类型转换，但它仍然以不同的方式排序但相同的数组

有人可以建议上面的代码可能有什么问题吗？另外，考虑到我上面提到的需求，有没有更方便的方式通过php来实现呢？？也许是一个比较 .csv 文件之类的 php 插件？

编辑：按要求提供样本数据。只是一个快照，实际会有更多的列和行。如上所述，.csv 文件大小远远超过 10mb！文件 1 和文件 2

```
 236|INPQR|31-AUG-12|200     |INR|       664|AAAAAA,PPPPP                                                                                                                                                                                           |0                                       |38972944.8                              |0                                       |0                                       |38972944.8
        236|INPQR|31-AUG-12|200     |INR|       6653|AAAAAA,PPPPP                                                                                                                                                                                           |0                                       |0                                       |0                                       |0                                       |0
        236|INPQR|31-AUG-12|200     |USD|       6655|AAAAAA,PPPPP                                                                                                                                                                                           |0                                       |0                                       |0                                       |0                                       |0
        236|INPQR|31-AUG-12|200     |USD|       664|AAAAAA,PPPPP                                                                                                                                                                                           |0                                       |63919609.97                             |0                                       |0                                       |63919609.97
        225|INPZQ|31-AUG-12|200     |USD|       6653|AAAAAA,PPPPP                                                                                                                                                                                           |0                                       |0                                       |0                                       |0                                       |0
        225|INPZQ|31-AUG-12|200     |USD|       6655|AAAAAA,PPPPP                                                                                                                                                                                           |0                                       |0                                       |0                                       |0                                       |0
        225|INPZQ|31-AUG-12|200     |USD|       6652|AAAAAA,PPPPP                                                                                                                                                                                           |0                                       |38972944.8                              |0                                       |0                                       |38972944.8
        225|INPZQ|31-AUG-12|200     |INR|       6652|AAAAAA,PPPPP                                                                                                                                                                                           |0                                       |63919609.97                             |0                                       |0                                       |63919609.97
        225|INPZQ|31-AUG-12|200     |INR|       6654|AAAAAA,PPPPP                                                                                                                                                                                           |0                                       |0                                       |0                                       |0                                       |0
        225|INPZQ|31-AUG-12|200     |INR|       6654|AAAAAA,PPPPP  

        236|INPQR|31-AUG-12|200     |USD|       664|AAAAAA,PPPPP                                                                                                                                                                                           |0                                       |63919609.97                             |0                                       |0                                       |63919609.97
        225|INPZQ|31-AUG-12|200     |USD|       6653|AAAAAA,PPPPP                                                                                                                                                                                           |0                                       |0                                       |0                                       |0                                       |0
        225|INPZQ|31-AUG-12|200     |USD|       6655|AAAAAA,PPPPP 
        236|INPQR|31-AUG-12|200     |INR|       664|AAAAAA,PPPPP                                                                                                                                                                                           |0                                       |38972944.8                              |0                                       |0                                       |38972944.8
        236|INPQT|31-AUG-12|200     |INR|       6653|AAAAAA,PPPPP                                                                                                                                                                                           |0                                       |0                                       |0                                       |0                                       |0
        236|INPQR|31-AUG-12|200     |USD|       6655|AAAAAA,PPPPP                                                                                                                                                                                           |0                                       |0                                       |0                                       |0                                       |0
        225|INPZQ|31-AUG-12|200     |USD|       6652|AAAAAA,PPPPP                                                                                                                                                                                           |0                                       |38972944.8                              |0                                       |0                                       |38972944.8
        225|INPZQ|31-AUG-12|200     |INR|       6652|AAAAAA,PPPPP                                                                                                                                                                                           |0                                       |63919609.97                             |0                                       |0                                       |63919609.97
        225|INPZQ|31-AUG-12|200     |USD|       6654|AAAAAA,PPPPP                                                                                                                                                                                           |0                                       |0                                       |0                                       |0                                       |0
        225|INPZQ|31-AUG-12|200     |INR|       6654|AAAAAA,PPPPP 
```

**更新：2个csv文件可能包含不同的日期格式，每个文件可能代表不同格式的数字，例如 1.csv 可能有 12-jan-2013 和 0.01 作为第一行....2.csv 会有 01/ 12/2013 和 .01 因此我不认为哈希会起作用**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:04:17.000

确定这两个文件不同吗？我会使用 md5_file 并首先比较两个文件的 MD5 哈希，以检查它们是否有任何不同。

如果它们不同，我会执行以下操作：

```
$csv_1_path = 'file_1.csv';
$csv_2_path = 'file_2.csv';
$fh_csv_1 = fopen($csv_1_path, 'r');
$fh_csv_2 = fopen($csv_2_path, 'r');
$md5_1 = array();
$md5_2 = array();
while( !feof($fh_csv_1) ) {
  $md5_1[] = md5(fgets($fh_csv_1));
}

while( !feof($fh_csv_1) ) {
  $md5_2[] = md5(fgets($fh_csv_2));
}

$common_records = array_intersect($md5_1, $md5_2);

$records_diff_count = 0;
foreach($md5_1 as $row_index => $md5_rec_1) {
  if ( !in_array($md5_rec_1, $common_records) ) {
    print "Record in file $csv_1_path, row $row_index has no match.\n";
    $records_diff_count++;
  }
}

foreach($md5_2 as $row_index => $md5_rec_2) {
  if ( !in_array($md5_rec_2, $common_records) ) {
    print "Record in file $csv_2_path, row $row_index has no match.\n";
    $records_diff_count++;
  }
} 
```

找到每个文件的行索引后，您可以对文件之间的差异进行更深入的分析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:51:48.957

**快速观察**

*   您无需排序即可获得差异
*   我不确定你如何能够有效地加载`300MB`到你的文件中`PHP application`，但很明显你没有内存问题，因为我会建议你使用`SQL`or`Map-Reduce`代替。
*   你`CSV`有点好笑，很难得出结论，`|`或者`space`是分隔符。
    *   既然你有`20 columns`哇......使用哈希作为差异会比整个 20 列更好......那么你可以找到检索内容的位置

**您的代码的简单版本**

```
$csvA = "a.log";
$csvB = "b.log";

echo PHP_EOL;

$hashA = readCSVFile($csvA);
$hashB = readCSVFile($csvB);

// Lines in A not in B
$hash = array_diff($hashA, $hashB);
if (($fp = fopen($csvA, "r")) !== FALSE) {
    foreach ( $hash as $p => $v ) {
        fseek($fp, $p);
        echo implode("|",array_map("trim", fgetcsv($fp, 2024, "|"))), PHP_EOL;
    }
    fclose($fp);
} 
```

**输出**

```
236|INPQR|31-AUG-12|200|INR|6653|AAAAAA,PPPPP|0|0|0|0|0
225|INPZQ|31-AUG-12|200|USD|6655|AAAAAA,PPPPP|0|0|0|0|0
225|INPZQ|31-AUG-12|200|INR|6654|AAAAAA,PPPPP|0|0|0|0|0 
```

**使用的功能**

```
function readCSVFile($file, $size = 2024, $delimiter = "|") {
    $hash = array();
    if (($fp = fopen($file, "r")) !== FALSE) {
        $t = ftell($fp);
        while ( ($data = fgetcsv($fp, $size, $delimiter)) !== FALSE ) {
            $hash[$t] = sha1(implode(array_map("trim", $data)));
            $t = ftell($fp);
        }
        fclose($fp);
    }
    return $hash;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T16:10:33.063

您可以使用下面的行正确地对数据进行排序。

```
<?php
function readCSV($fileName, $delimiter, $exclude_cols = array()) {
    $data = array();
    $fh = fopen($fileName, 'r');
    while ($line = fgetcsv($fh, 0, $delimiter)) {
        if (count($line) == 1 && $line[0] == '') {
            continue;
        }

        for ($i = 0; $i < count($line); $i++) {
            $line[$i] = in_array($i, $exclude_cols, true) ? 'NTBT' : trim($line[$i]);
        }
        $data[] = $line;
    }
    fclose($fh);
    return $data;
}

function sort2dArray($data) {
    $tmp = array();
    $lineCount = count($data);
    foreach ($data as $lineNum => $lineData) {
        foreach ($lineData as $column => $value) {
            $tmp[$column][$lineNum] = $value;
        }
    }

    $multiSortArgs = array();
    foreach ($tmp as $column => &$columnData) {
        array_push($multiSortArgs, &$columnData, SORT_ASC);
    }
    $multiSortArgs[] = &$data;
    call_user_func_array('array_multisort', $multiSortArgs);
    return $data;
}

// ========= Reading and sorting
// The expected data
$data_Exp = readCSV($fileExp, $_POST['dl1']);
$rarr1 = sort2dArray($data_Exp);

// The actual data
$data_Act = readCSV($fileAct, $_POST['dl2']);
$rarr2 = sort2dArray($data_Act); 
```

但是，它不会解决您的问题，*除非*您希望文件包含一整套相同的行，这些行可能会被打乱。

如果您的用例包括行丢失或完全不同的可能性，那么排序只是您解决方案的一半。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T09:51:39.697

比较两个 CSV 文件有很多不同的方法。我使用了一种方法来检查两个文件中的不同行。我考虑到您想从行中删除某些列。

我没有使用排序，因为我检查一行是否在另一个文件中，而不是它是否在同一位置。原因很简单：如果某一行不匹配并且在文件开头排序，则该行之后的所有行都会不同。

例子：

```
file1:  file2:
1|a     1|a
2|b     2|b
3|c     3|c
4|d     4|d
5|e     1|e

After sorting

file1:  file2:
1|a     1|a
2|b     1|e
3|c     2|b
4|d     3|c
5|e     4|d

Now the rows 2, 3, 4, and 5 are all marked as different, because they do not match if you check per line. But in fact only 1 row is different. 
```

在下面的代码中，您将看到关于我为什么做某事的评论。我还在几个大型 CSV 文件（约 45mb 和 100.000 行）上测试了代码，并在每次检查不到 10 秒的时间内获得了不同行的数量。

```
<?php
set_time_limit(0);

//create a function to create the CSV arrays.
//If you create the code twice like you did, you are bound to make a mistake or change something in one place and not the other.
//Obviously that could lead to sorting two equal files differently.
function CsvToArray($file) 
{
  $exclude_cols = array(2); //you didnt provide it, so for testig i remove the date col because its always the same

  //load file contents into variable and trim it
  $data = trim(implode('', file($file)));

  //strip \r new line to make sure only \n is used
  $data = str_replace("\r", "", $data);
  //strip all spaces from |
  $data = preg_replace('/\s\s+\|/', '|', $data);
  $data = preg_replace('/\|\s\s+/', '|', $data);
  //strip all spaces from each line
  $data = preg_replace('/\s\s+\n/', "\n", $data);
  $data = preg_replace('/\n\s\s+/', "\n", $data);

  //each line to seperate row
  $data = explode("\n", $data);

  //each col to seperate record
  //This is only needed for comparisment if you want to remove certain cols
  //if thats not needed, you can skip this part    
  foreach($data as $k=>$v)
    $data[$k] = explode('|', $v);

  //get the header. Its always the first row
  //array_shift will return the first element and remove it from the dataset
  $header = array_shift($data);

  //turn the array around, by making the row the key and count howmany times it shows
  $ar = array();
  foreach ($data as $row) {
    //remove unwanted cols
    //if you dont want to remove certain cols, skip this and the implode part and use $ar[$row]++
    foreach($exclude_cols as $c)
      $row[$c] = '';
    //implode the remaining
    $key = implode('', $row);

    //you can use str_to_lower($key) for case insensive matching
    $ar[$key]++;    
  }

  return $ar;
}

function CompareTwoCsv($file1, $file2)
{
  $start = microtime(true);

  $ar1 = CsvToArray($file1);
  $ar2 = CsvToArray($file2);

  //check for differences.
  $diff = 0;
  foreach($ar1 as $k=>$v) {
    //the second array doesnt contain the key (is row) so there is a difference
    if (!array_key_exists($k, $ar2)) {
      $diff+=$v; //all rows that are in the first array are different
      continue;
    }
    $c2 = $ar2[$k];

    if ($v == $c2) //row is in both file an equal number of times
      continue;

    $diff += max($v, $c2) - min($v, $c2); //add the number of different rows
  }

  $ar1_count = count($ar1);
  $ar2_count = count($ar2);

  //if ar2 has more records. Every row that is more, is different.
  if ($ar2_count>$ar1_count)
    $diff += $ar2_count - $ar1_count;

  $end = microtime(true);
  $difftime = $end - $start;

  //debug output
  echo "We found ".$diff." differences in the files. it took ".$difftime." seconds<hr>";
}

//test and test2 are two files with ~100.000 rows based on the data you supplied.
//They have many equal rows in the files, so the array returned from CsvToArray is small
CompareTwoCsv("test.txt", "test.txt");
//We found 0 differences in the files. it took 5.6848769187927 seconds

CompareTwoCsv("test.txt", "test2.txt");
//We found 17855 differences in the files. it took 6.6002569198608 seconds

CompareTwoCsv("test2.txt", "test.txt");
//We found 17855 differences in the files. it took 7.5223989486694 seconds

//randomly generated files with 100.000 rows. Very little duplicate data;

CompareTwoCsv("largescv1.txt", "largescv2.txt");
//We found 98250 differences in the files. it took 5.4302139282227 seconds

?> 
```

结果：

# c++ - 使用状态机进行 XML 解析

> ID：14253569
> 
> 赞同：1
> 
> 时间：2013-01-10T08:27:57.257
> 
> 标签：c++, xml, parsing, state-machine

在状态机中实现 xml 解析是一种好习惯吗？如果是，我们必须处理的主要状态是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:55:12.720

好吧，如果您“从头开始”编写自己的解析器 - 那么您可能应该制作这样的三明治：

*   纯文本字符串
*   SAX 类型的回调
*   基于上一层构建 DOM 的代码

所以第 1 级可以（并且应该）在 FSM 中完成，我会使用 Initial、InTagName、InAttrName、InAttrValue、InCDATA 等一组状态来完成。不会太多，只有几个页面切换语句.

尽管如此，如果您需要正确的架构/命名空间/xpath/etc 支持，仍有大量工作要做。

那么为什么不直接采用现有的解决方案呢？

# ios - 在两个 UIFonts 之间进行插值

> ID：14253570
> 
> 赞同：2
> 
> 时间：2013-01-10T08:28:00.073
> 
> 标签：ios, uiview, fonts, core-animation, uifont

是否有可能找到两个 UIFonts 的平均值？可以说我有一种字体是用

```
[UIFont systemFontOfSize:11] 
```

和另一个

```
[UIFont boldSystemFontOfSize:15] 
```

我如何找到这两个的平均字体？即它应该是 13 号并且只有一半粗体。

我正在寻找一种解决方案，可以让我在两者之间的任何点进行线性推断。这实际上与动画从一个到另一个所做的非常相似，但是，我并不是要制作动画。

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-10T08:57:48.677

`UIFont`使用`pointSize`财产。使用这个我们可以得到平均值。

```
UIFont *font1 = [UIFont systemFontOfSize:11];
UIFont *font2 = [UIFont boldSystemFontOfSize:15];

CGFloat font1Size = font1.pointSize;
CGFloat font2Size = font2.pointSize;

CGFloat averageFontSize = (font1Size + font2Size) / 2;
NSLog(@"Average Font Size %f", averageFontSize); 
```

它会`NSLog`像

```
Average Font Size 13.000000 
```

检查[UIFont 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIFont_Class/Reference/Reference.html)的属性。

# iphone - iOS SDK 中的音频播放委托

> ID：14253572
> 
> 赞同：1
> 
> 时间：2013-01-10T08:28:11.617
> 
> 标签：iphone, objective-c, ios6

我已经在 iOS SDK 上玩了几天了，现在我开始通过编写一个显示当前正在播放的歌曲的点头小应用程序来介绍我学到的概念和方法来自音乐库的音乐在我的 iPhone 上。

我遇到的问题是，虽然 AVAudioPlayerDelegate 上有委托方法用于一段音频播放完毕，但我似乎找不到任何被调用且可以挂接到 / 的通知 / 事件 / 委托方法的引用当一段音频开始播放时收听 - 即当用户按下播放按钮时，或者甚至只是曲目发生变化时。

在做了 3 天 (!!!) 的 iOS 开发和玩耍之后，显然会有办法做到这一点，但我不确定在哪里/在哪里可以找到它。除了在我的 UI 上有一个按钮来填充信息（它工作正常，后端代码完成了它的意思），我能看到的唯一其他方法是挂钩到“轨道”在上述委托上完成播放'方法并使用它。

但这似乎有点骇人听闻。

更新

好吧，我想我暂时完全延迟了。这是你第一次在 Java 背景下摆弄 iOS 的结果。我实施了您的建议（通过一些语法调整）如下：

h 文件：

```
#import <Foundation/Foundation.h>
#import <AVFoundation/AVAudioPlayer.h>

@protocol GeoTunesAVAudioPlayerDelegate <AVAudioPlayerDelegate>

-(void)didStartPlaying;

@end

@interface GeoTunesAVAudioPlayer : AVAudioPlayer <AVAudioPlayerDelegate>

@end 
```

和 m 文件：

```
 #import "GeoTunesAVAudioPlayer.h"

@implementation GeoTunesAVAudioPlayer

- (id)init
{
    self = [super init];

    return self;
}

- (BOOL) play
{

    if ([[self delegate] respondsToSelector:@selector(didStartPlaying)])
    {
        [(id)[self delegate] didStartPlaying];
    }

    return [super play];

}

@end 
```

我在我的控制器中实现了这一点：

```
 // Set up the audio delegate
 player = [[GeoTunesAVAudioPlayer alloc] init];
 player.delegate = self; 
```

但是这个小安排以 EXC_BAD_ACCESS 告终，这令人沮丧，因为我对这里的幕后情况了解得不够多，甚至无法评估问题所在。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:32:25.813

我不认为它可用！这里有一个想法：

1.  子类 AVAudioPlayer
2.  扩展协议
3.  添加新的委托方法
4.  覆盖`play`并实现您的委托方法并调用`super`

总体思路：（警告，语法可能有误！）

```
 // .h

    @protocol AVAudioPlayerSubDelegate <AVAudioPlayerDelegate>
       -(void)didStartPlaying;
    @end

    @interface AVAudioPlayerSub : AVAudioPlayer;

   // .m

    @implementation AVAudioPlayerSub

    - (void) play

       if ([delegate respondsToSelector:@selector(didStartPlaying)]){
          [(id)delegate didStartPlaying];
       }

       [super play];

    } 
```

**评论后编辑：**

我认为您的 AVAudioPlayer (GeoTunesAVAudioPlayer) 类的子类不应该符合 AVAudioPlayerDelegate，因为这是委托类。您应该拥有包含符合您的子协议 GeoTunesAVAudioPlayerDelegate 的播放器对象的控制器

//。H

```
#import <Foundation/Foundation.h>
#import <AVFoundation/AVAudioPlayer.h>

@protocol GeoTunesAVAudioPlayerDelegate <AVAudioPlayerDelegate>

-(void)didStartPlaying;

@end

@interface GeoTunesAVAudioPlayer : AVAudioPlayer

@end 
```

和 m 文件：

```
#import "GeoTunesAVAudioPlayer.h"

@implementation GeoTunesAVAudioPlayer

- (id)init
{
    self = [super init];

    return self;
}

- (BOOL) play
{
    if ([[self delegate] respondsToSelector:@selector(didStartPlaying)])
    {
        [(id)[self delegate] didStartPlaying];
    }

    return [super play];

}

@end 
```

在你的控制器中：

```
//.h
@interface MyViewController : UIViewController <GeoTunesAVAudioPlayerDelegate>

//.m

player = [[GeoTunesAVAudioPlayer alloc] init];
player.delegate = self; 
```

# node.js - express.js 应用的跨域 CORS 支持

> ID：14253574
> 
> 赞同：0
> 
> 时间：2013-01-10T08:28:14.343
> 
> 标签：node.js, express, cors

我有一个带有跨域设置的 express.js 应用程序

```
var allowedHost = {
  'http://localhost:3001': true,
  'http://localhost:7357': true
};

var allowCrossDomain = function(req, res, next) {
  if(allowedHost[req.headers.origin]) {
    res.header('Access-Control-Allow-Credentials', true);
    res.header('Access-Control-Allow-Origin', req.headers.origin)
    res.header('Access-Control-Allow-Methods', 'GET,PUT,POST,DELETE,OPTIONS');
    res.header('Access-Control-Allow-Headers', 'X-CSRF-Token, X-Requested-With, Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, X-Api-Version');
    next();
  } else {
    res.send(403, {auth: false});
  }
} 
```

我的客户端（backbone.js）也配置为接受跨域，这部分一切正常。

现在，在我的 express.js 应用程序（在端口 3001 上运行）中，我试图访问这样的简单页面：

```
app.get('/app', function(req, res, next){
  return res.render("" + __dirname + "/views/app", {
    title: 'hello world'
  });
}); 
```

例如，如果我调用 url localhost:3001/app 我有 403 错误，因为 req.headers.origin 未定义，你有什么想法吗？

我应该如何告诉我正常的 express.js 路由来应对跨域检查？

对此问题的任何帮助将不胜感激；-)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-08T13:05:24.390

您应该使用**response.set**方法设置标头，使用**request.get**方法检索标头。

一个关于 CORS 的例子！

[https://github.com/visionmedia/express/blob/master/examples/cors/index.js](https://github.com/visionmedia/express/blob/master/examples/cors/index.js)

# derby - 在现有 derby 数据库上使用 liquibase generateChangeLog 时出错

> ID：14253579
> 
> 赞同：1
> 
> 时间：2013-01-10T08:28:34.827
> 
> 标签：derby, liquibase

我正在使用 liquibase 为预先存在的 derby 数据库生成 changeLog.xml。

```
liquibase --logLevel=debug --driver=org.apache.derby.jdbc.EmbeddedDriver
--classpath=/xxx/derby.jar --changeLogFile=/xxx/TestDb/db.changelog2.xml
--url="jdbc:derby:/xxx/TestDb/yyyy.db" --username= --password= generateChangeLog 
```

`ERROR 42X01: Syntax error: Encountered "CONSTRAINTS" at line 1, column 8`liquibase 报告了一个 sql 语法错误。

有人可以提供解决此问题的任何指示吗？

以下是错误日志：

> 未设置 Liquibase 主页。Liquibase 主页：/xxx/liquibase 调试 1/9/13 下午 5:40：liquibase：无法加载/访问 Apache Derby 驱动程序类以检查版本调试 1/9/13 下午 5:40：liquibase：无法加载/访问Apache Derby 驱动程序类检查版本 DEBUG 1/9/13 5:40 PM:liquibase: Connected to APP@jdbc:derby:/xxx/TestDb/yyyy.db DEBUG 1/9/13 5:40 PM:liquibase: Reading APP @ jdbc:derby:/xxx/TestDb/yyyy.db 的表 ... INFO 1/9/13 5:40 PM:liquibase: 为 APP @ jdbc:derby:/xxx/TestDb/yyyy.db 读取表。 .. DEBUG 1/9/13 5:40 PM：liquibase：阅读视图 APP @ jdbc:derby:/xxx/TestDb/yyyy.db ... INFO 1/9/13 5:40 PM：liquibase：阅读视图对于 APP @ jdbc:derby:/xxx/TestDb/yyyy.db ... DEBUG 1/9/13 5:40 PM:liquibase: 为 APP @ jdbc:derby:/xxx/TestDb/yyyy.db 读取外键。 .. 信息 2013 年 1 月 9 日下午 5:40：liquibase：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:10:07.290

您的工具正在生成 Derby 认为无效的 SQL，因此出现以下消息：

```
 Syntax error: Encountered "CONSTRAINTS" at line 1, column 8 
```

如果您可以使用 JVM 参数运行程序

```
 -Dderby.language.logStatementText=true 
```

然后查看您的 derby.log 文件，您应该能够看到您的工具正在生成并发出给 Derby 的确切 SQL 语句。

这里有更多关于 derby.language.logStatementText 属性的文档：http: [//db.apache.org/derby/docs/10.9/ref/rrefproper43517.html](http://db.apache.org/derby/docs/10.9/ref/rrefproper43517.html)

# javascript - sammy.js 如何存储它的路由，它们是否在同一个域中共享，它们可以被删除吗？

> ID：14253592
> 
> 赞同：1
> 
> 时间：2013-01-10T08:29:43.350
> 
> 标签：javascript, sammy.js

我有一个带有 2 个 sammy 应用程序的 mvc 应用程序，1 个用于`'home'`控制器，1 个用于`'invoice'`控制器。

我已经在`'home'`和`'invoice'`带有路径的页面上注册了一条路由`"#/about",` （在两个页面上都创建了一个新的 sammy 应用程序）。当我以某种方式导航到`'/invoice/#about'`“主页”页面上的回调时。当然，`'#/about'`路由在页面上的行为应该与在`'home'`页面上的行为不同`'invoice'`。

所以我的问题是，sammy 如何存储它的路由以及它们是否在同一个域中共享？

它们可以被删除吗？

如果没有，我是否需要完全销毁我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:30:06.517

从[源代码](https://github.com/quirkey/sammy/blob/master/lib/sammy.js)来看，它只将它们存储在一个 javascript 对象中：

```
add_route = function(with_verb) {
    var r = {verb: with_verb, path: path, callback: callback, param_names: param_names};
    // add route to routes array
    app.routes[with_verb] = app.routes[with_verb] || [];
    // place routes in order of definition
    app.routes[with_verb].push(r);
}; 
```

您还可以轻松查看[本教程](http://learn.knockoutjs.com/WebmailExampleStandalone.html)，发现 Sammy 没有在任何地方保留任何东西：没有 Web SQL、本地存储、Cookie 等。什么都没有。

因此，路由配置的范围是 Sammy.Application 对象的范围。显然，它不能超过 HTML 页面的生命周期，即当您将浏览器导航到另一个文档时，路由会被丢弃。

插件可能会存储路线，尽管我不知道实际用途是什么。

# git - 使用 git 合并两个具有共同父目录的目录（但不同的 SHA1）

> ID：14253594
> 
> 赞同：4
> 
> 时间：2013-01-10T08:29:49.953
> 
> 标签：git, merge, git-merge

在我们的项目中，有人复制了代码。他们在他们的目录中创建了一个新的 git 存储库，并在那里继续他们的工作。与此同时，我们主要项目存储库的工作也在继续。我们现在剩下两个没有通用 SHA1 的 git 存储库。

```
A --- B --- C --- D
      |
      | Copy of code to new directory
      |
      E --- F --- G 
```

B 和 E 是完全相同的文件、文件夹等。

**我们的目标是使用 Git 将更改 F 和 G 合并到主分支**（目前在 D）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T09:05:29.293

首先，我要重新绘制你的图表。

```
A --- B --- C --- D 大师

         E --- F --- G 复制

```

让我们首先将这两个放在同一个 repo 中。对此没有特殊步骤，您只需`git fetch`进入同一个存储库即可。

然后你创建一个嫁接。编辑`.git/info/grafts`...

```
<E-sha1> <B-sha1> 
```

然后运行`git filter-branch`使其永久化。

```
git filter-branch --tag-name-filter cat -- --all 
```

这将创建一个新的历史，即“正确”的历史：

```
A --- B --- C --- D 大师
        \
         E --- F --- G 复制

```

之后，您可以合并。

## 演示在行动

我创建了两个与图表匹配的存储库，从提交 B 复制到提交 E。

*   E 具有 SHA-1`3aa6b69127d20ac42746c39be3c273a9d80fb706`
*   B 具有 SHA-1`95b0fc836dbea7eaa0d043390df841d184af7cd5`

```
$ git init 
$ git remote add master ../gittest 
$ git remote add copy ../gittest2 
$ git fetch master
远程：计数对象：12，完成。
远程：压缩对象：100% (7/7)，完成。
远程：总共 12 个（增量 2），重用 0 个（增量 0）
拆包对象：100% (12/12)，完成。
来自 ../gittest
 * [新分支] master -> master/master
$ git checkout -b master master/master
分支 master 设置为从 master 跟踪远程分支 master。
已经在“大师”上
$ git 获取副本
警告：没有常见的提交
远程：计数对象：9，完成。
远程：压缩对象：100% (6/6)，完成。
远程：总计 9（增量 0），重用 0（增量 0）
拆包对象：100% (9/9)，完成。
来自 ../gittest2
 * [新分支] 主 -> 复制/主
$ git log --format=oneline copy/master | 尾-n 1
3aa6b69127d20ac42746c39be3c273a9d80fb706 E
$ git log --format=oneline master/master
1532332fe705931babe9db04c8d84051867b52c9 D
90903c0ac8dc26649b875ee00ea39bfd7571b1fb C
95b0fc836dbea7eaa0d043390df841d184af7cd5 B
e9de90c82a32041cff3a19f8e40d4358bc4ec2ca 提交 A
$ git log --format=oneline master/master
bec0e7af9374e4c57cb87f3fd5b2fb2b6a3f431b G
a61e01d096e81c36bcc450afd98ca94cff909622 F
3aa6b69127d20ac42746c39be3c273a9d80fb706 E

```

## 如果你现在合并会发生什么？

我遇到了我宁愿自动解决的合并冲突。

```
$ git 合并副本/主
自动合并 test.txt
CONFLICT (add/add)：在 test.txt 中合并冲突
自动合并失败；修复冲突，然后提交结果。

```

## 移植在行动

```
$回声3aa6b69127d20ac42746c39be3c273a9d80fb706 \
    95b0fc836dbea7eaa0d043390df841d184af7cd5 > .git/info/grafts 
$ git filter-branch --tag-name-filter cat -- --all
重写 bec0e7af9374e4c57cb87f3fd5b2fb2b6a3f431b (7/7)
警告：参考 'refs/heads/master' 未更改
Ref 'refs/remotes/copy/master' 被重写
警告：参考 'refs/remotes/master/master' 未更改
$ git 合并副本/主
自动合并 test.txt
通过“递归”策略进行合并。
 测试.txt | 5 +++++
 1 个文件已更改，5 个插入（+）

```

## 最终结果

```
$ git log --graph --oneline | 猫
* 4dadb0a 合并远程跟踪分支“复制/主”
|\  
| * bb2fc85 G
| * be88bc5 F
| * 0816baf E
* | 1532332 D
* | 90903c0 C
|/  
* 95b0fc8 B
* e9de90c 提交 A

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:50:38.020

假设您现在在 repo 中包含`A---B---C---D`.

您首先需要使用该命令将另一个 repo 添加到此 repo 中。

```
$git remote add another_repo <git repo path>
$git fetch another_repo 
```

然后你可以合并，使用

```
$git merge another_repo/master 
```

# c# - 我的命名空间与 .net 框架命名空间的名称相同

> ID：14253597
> 
> 赞同：1
> 
> 时间：2013-01-10T08:29:51.107
> 
> 标签：c#, .net

我遇到了这个问题，但不知道如何解决。我不喜欢更改命名空间。这是我的代码：

```
namespace ParlayRMS.Models.System
{
    using System;
    using System.Globalization;

    public class MaintenanceInfo
    {
        public MaintenanceInfo()
        {
            IsDownTime = false;
            TimeFrom = DateTime.Now.ToString(CultureInfo.InvariantCulture);
            TimeTo = DateTime.Now.ToString(CultureInfo.InvariantCulture);
        }
        public bool IsDownTime { get; set; }
        public string TimeFrom { get; set; }
        public string TimeTo { get; set; }
    }
} 
```

此类导致错误：“找不到类型或命名空间 'DateTime'。” 因为这个类被放在命名空间 System 中，与 .NET Framework 相同。如果我将“ParlayRMS.Models.System”更改为“ParlayRMS.Models”，这个类就可以了，但我不喜欢这种方式。对于这种情况，我需要一个解决方案，而无需更改许多代码。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T08:37:52.990

`System`in`using System.Globalization`指的是你的命名空间，所以它应该是另一个编译错误。

如果你真的喜欢`using`命名空间中的 s （我个人不喜欢这种做法），你应该使用`global::`extern 别名（我认为这就是它的名字）

```
namespace ParlayRMS.Models.System
{
    using global::System;
    using global::System.Globalization;

    public class MaintenanceInfo
    {
        public MaintenanceInfo()
        {
            IsDownTime = false;
            TimeFrom = DateTime.Now.ToString(CultureInfo.InvariantCulture);
            TimeTo = DateTime.Now.ToString(CultureInfo.InvariantCulture);
        }
        public bool IsDownTime { get; set; }
        public string TimeFrom { get; set; }
        public string TimeTo { get; set; }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:31:42.493

将 usings 放在外面：

```
using System;
using System.Globalization;

namespace ParlayRMS.Models.System
{

    public class MaintenanceInfo
    {
        public MaintenanceInfo()
        {
            IsDownTime = false;
            TimeFrom = DateTime.Now.ToString(CultureInfo.InvariantCulture);
            TimeTo = DateTime.Now.ToString(CultureInfo.InvariantCulture);
        }
        public bool IsDownTime { get; set; }
        public string TimeFrom { get; set; }
        public string TimeTo { get; set; }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T08:33:14.027

为什么在命名空间块中有 using 语句？如果你把它们移到外面，我相信它应该会很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T08:35:19.943

尝试：

```
global::System.DateTime dateTime; 
```

或以另一种方式：

```
using SystemAlias = System; 
```

然后：

```
SystemAlias.DateTime dateTime; 
```

顺便说一句：将您的 usings 放在命名空间声明之前。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T08:40:20.633

尝试

```
using NETDateTime = System.DateTime; 
```

然后在您的代码中：

```
TimeFrom = NETDateTime.Now.ToString(CultureInfo.InvariantCulture); 
```

# ruby - rubygems 1.3.6 安装失败

> ID：14253599
> 
> 赞同：2
> 
> 时间：2013-01-10T08:30:02.223
> 
> 标签：ruby, rubygems, centos

我已经从源代码安装了 ruby​​ 1.9.3 并下载了 ruby​​gems 1.3.6 也源代码。查看手册，我解压缩了 tarball 并输入`ruby setup.rb` 了这就是我得到的输出：

```
/usr/local/lib/ruby/1.9.1/rubygems.rb:206:in `try_activate': undefined method 
`find_by_path' for Gem::Specification:Class (NoMethodError)
        from /usr/local/lib/ruby/1.9.1/rubygems/custom_require.rb:59:in `rescue in require'
        from /usr/local/lib/ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
        from /root/rubygems-1.3.6/lib/rubygems/config_file.rb:50:in `<class:ConfigFile>'
        from /root/rubygems-1.3.6/lib/rubygems/config_file.rb:28:in `<top (required)>'
        from /usr/local/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /usr/local/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /root/rubygems-1.3.6/lib/rubygems/gem_runner.rb:8:in `<top (required)>'
        from /usr/local/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /usr/local/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from setup.rb:25:in `<main>' 
```

这是在 CentOS 5 上完成的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:47:39.343

当前 Rubygems 的稳定版本是 1.8.24，您安装 1.3.6 有什么具体原因吗？

# java - 嵌套的 LinearLayout 只显示第一个 View

> ID：14253602
> 
> 赞同：0
> 
> 时间：2013-01-10T08:30:13.040
> 
> 标签：java, android, xml, layout

我已经看到了一些与此类似的问题。但是，这些情况不同，有些不适合初学者。
所以我最近才开始使用Android。请理解我是新手`*.xml`。无论如何，我关心的是`LinearLayout`只显示第一个的嵌套`View`。

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".MainActivity" >

    <LinearLayout 
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_height="match_parent"
        android:layout_width="match_parent"
        android:orientation="horizontal">

        <TextView
            android:layout_gravity="center"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:layout_width="0dp"
            android:textSize="20sp"
            android:text="@string/app_title">
        </TextView>

    </LinearLayout>

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_height="match_parent"
        android:layout_width="match_parent"
        android:orientation="horizontal">

        <Button 
            android:layout_gravity="center"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:text="@string/button_ok"
            android:onClick="changeMessage">
        </Button>

        <TextView
            android:layout_gravity="center"
            android:textSize="20sp"
            android:id="@+id/this_text"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:text="@string/sample_text">
        </TextView>

    </LinearLayout>

</LinearLayout> 
```

这是到目前为止的 XML。使用此代码，仅显示第一个 TextView。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:31:17.737

`android:layout_height="match_parent"`嵌套的高度`LinearLayout`应该`wrap_content`是`match_parent`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:31:31.693

因为你已经给了第一个`LinearLayout`宽度和高度`matchparent`

将其高度更改为`wrapcontent`

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="wrap_content"
    android:layout_width="match_parent"
    android:orientation="horizontal">

    <TextView
        android:layout_gravity="center"
        android:layout_weight="1"
        android:layout_height="wrap_content"
        android:layout_width="0dp"
        android:textSize="20sp"
        android:text="@string/app_title">
    </TextView>

</LinearLayout>

// other layouts 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T08:31:57.990

改变布局如下

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".MainActivity" >
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="match_parent"
    android:layout_width="wrap_content"
    android:orientation="horizontal">

    <TextView
        android:layout_gravity="center"
        android:layout_weight="1"
        android:layout_height="wrap_content"
        android:layout_width="0dp"
        android:textSize="20sp"
        android:text="@string/app_title">
    </TextView>

</LinearLayout>

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="match_parent"
    android:layout_width="wrap_content"
    android:orientation="horizontal">

    <Button 
        android:layout_gravity="center"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:text="@string/button_ok"
        android:onClick="changeMessage">
    </Button>

    <TextView
        android:layout_gravity="center"
        android:textSize="20sp"
        android:id="@+id/this_text"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:text="@string/sample_text">
    </TextView>

</LinearLayout> 
```

您的内部布局与父布局匹配，因此只会显示第一个布局。

# openerp - 单击“立即获取”按钮后出现消息错误

> ID：14253608
> 
> 赞同：1
> 
> 时间：2013-01-10T08:30:50.023
> 
> 标签：openerp

当我单击“立即获取”按钮后查看消息时，OpenERP v7 出现错误`Settings > Email > Incoming Mail Servers > More > Messages`

这是错误：

OpenERP 服务器错误

```
Client Traceback (most recent call last): 
File "/opt/openerp/server/openerp/addons/web/http.py", line 195, in dispatch response["result"] = method(self, **self.params) 
File "/opt/openerp/server/openerp/addons/web/controllers/main.py", line 1012, in search_read 
return self.do_search_read(req, model, fields, offset, limit, domain, sort) 
File "/opt/openerp/server/openerp/addons/web/controllers/main.py", line 1035, in do_search_read req.context) 
File "/opt/openerp/server/openerp/addons/web/session.py", line 40, in proxy 
result = self.proxy.execute_kw(self.session._db, self.session._uid, self.session._password, self.model, method, args, kw) 
File "/opt/openerp/server/openerp/addons/web/session.py", line 28, in proxy_method 
result = self.session.send(self.service_name, method, *args) 
File "/opt/openerp/server/openerp/addons/web/session.py", line 101, in send 
raise xmlrpclib.Fault(openerp.tools.exception_to_unicode(e), formatted_info)

Server Traceback (most recent call last): 
File "/opt/openerp/server/openerp/addons/web/session.py", line 87, in send
return openerp.netsvc.dispatch_rpc(service_name, method, args) 
File "/opt/openerp/server/openerp/netsvc.py", line 361, in dispatch_rpc
result = ExportService.getService(service_name).dispatch(method, params) 
File "/opt/openerp/server/openerp/service/web_services.py", line 601, in dispatch 
res = fn(db, uid, *params) 
File "/opt/openerp/server/openerp/osv/osv.py", line 167, in execute_kw
return self.execute(db, uid, obj, method, *args, **kw or {}) 
File "/opt/openerp/server/openerp/osv/osv.py", line 121, in wrapper 
return f(self, dbname, *args, **kwargs) 
File "/opt/openerp/server/openerp/osv/osv.py", line 176, in execute 
res = self.execute_cr(cr, uid, obj, method, *args, **kw) 
File "/opt/openerp/server/openerp/osv/osv.py", line 164, in execute_cr
return getattr(object, method)(cr, uid, *args, **kw) 
File "/opt/openerp/server/openerp/osv/orm.py", line 2356, in search 
return self._search(cr, user, args, offset=offset, limit=limit, order=order, context=context, count=count) 
File "/opt/openerp/server/openerp/addons/mail/mail_message.py", line 518, in _search context=context, count=count, access_rights_uid=access_rights_uid) 
File "/opt/openerp/server/openerp/osv/orm.py", line 4794, in _search 
query = self._where_calc(cr, user, args, context=context) 
File "/opt/openerp/server/openerp/osv/orm.py", line 4643, in _where_calc 
e = expression.expression(cr, user, domain, self, context) 
File "/opt/openerp/server/openerp/osv/expression.py", line 371, in __init__
self.parse(cr, uid, distribute_not(normalize(exp)), table, context)
File "/opt/openerp/server/openerp/osv/expression.py", line 468, in parse 
raise ValueError("Invalid field %r in domain expression %r" % (left, exp)) ValueError: Invalid field 'fetchmail_server_id' in domain
expression ['&', ('email_from', '!=', False), ('fetchmail_server_id','=', 4)] 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:51:45.930

错误表示这`fetchmail_server_id`不是您尝试搜索的模型中的字段。

请检查数据库和`.py`文件。可能是您添加`.py`但忘记更新服务器然后它不会添加到数据库中。

# ruby-on-rails - 如何停止 ActiveRecord 本地化时间？在数据库中

> ID：14253609
> 
> 赞同：0
> 
> 时间：2013-01-10T08:30:50.347
> 
> 标签：ruby-on-rails, timezone, rails-activerecord

我有一个允许组织管理假期请求的应用程序。当一个人从 1 月 1 日到 1 月 2 日提出假期请求时，to 和 from 属性作为 DateTime 对象存储在数据库中。from 的时间为 1 月 1 日午夜，to 的时间为 23:59:59。

我有一个位于华沙的帐户，据我所知是 GMT-1。现在，当他们的记录被存储时，它将被存储为从 12 月 31 日晚上 11 点到 1 月 2 日晚上 11 点。这会导致各种各样的问题，最明显的是应用程序认为 3 天用于假期。

我怎样才能阻止这种情况发生？

谢谢

罗宾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:46:54.500

按照惯例，Rails 将 DateTime 对象以 UTC 格式存储在数据库中。管理时区的最正确方法是`config.time_zone`在您的`config/application.rb`. 有一个关于 TimeZones 的[RailsCast](http://railscasts.com/episodes/106-time-zones-revised?view=asciicast)，这对您的情况很有用。

# php - 如何在数组中添加新项目

> ID：14253613
> 
> 赞同：0
> 
> 时间：2013-01-10T08:30:59.950
> 
> 标签：php, arrays

这是我用 PHP 打印出来的数组

```
Array ( [0] => Array ( [friend_id] => 1 [name] => parker[email] => parker@gmail.com)[1] => Array ( [friend_id] => 2 [name] => peter [email] => peter@hotmail.com) ) 
```

我可以知道如何在 php 中使用循环在这样的数组中添加新项目/参数吗

```
Array ( [0] => Array ( [friend_id] => 1 [name] => parker[email] => parker@gmail.com [NEWOBJECT] => newvalue)[1] => Array ( [friend_id] => 2 [name] => peter [email] => peter@hotmail.com [NEWOBJECT] => newvalue) ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:37:51.710

不需要循环，您可以通过以下方式添加：

```
<?
 $arr =  Array ( [0] => Array ( [friend_id] => 1 [name] => parker[email] => parker@gmail.com)[1] => Array ( [friend_id] => 2 [name] => peter [email] => peter@hotmail.com) );

 $arr[0]['NEWOBJECT'] = 'blablabla';
 $arr[1]['NEWOBJECT'] = 'blablabla';
?> 
```

但是，当您必须这样做超过 2 次时，这当然会有所帮助：

```
<?

$arr =  Array ( [0] => Array ( [friend_id] => 1 [name] => parker[email] => parker@gmail.com)[1] => Array ( [friend_id] => 2 [name] => peter [email] => peter@hotmail.com) );

 foreach($arr as $key => $value){
    $arr[$key]['NEWOBJECT'] = 'blablabla';
 }

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:38:48.667

您可以使用[foreach 循环](http://php.net/manual/en/control-structures.foreach.php)以下列方式遍历项目并添加新键。

```
foreach($array as &$item) {
    $item['newkey'] = "New Value";
} 
```

请注意与 (&) 运算符的使用。这确保了我们对 $item 的引用而不是副本，这意味着更改将影响原始 $item。

# jquery-animate - jQuery切换和动画不起作用

> ID：14253614
> 
> 赞同：0
> 
> 时间：2013-01-10T08:31:01.750
> 
> 标签：jquery-animate, jquery

以下 jQuery 代码有什么问题？

```
<script type="text/javascript">
  $("#contact_min").click(function(){
    $("#contact_min").toggle(function(){
      $("#contact_min").animate({
        height: "300px"
      }, 1500 );
    $(".arrow").html("&#x25bc;")}
    function(){
      $("#contact_min").animate({height: "28px"}, 1500 );
      $(".arrow").html("&#x25B2;")
    })});
</script> 
```

当我单击contact_min div 时，它什么也不做。

HTML：

```
<div id="contact_min">
  <span class="arrow">&#x25B2;</span>
  <span class="text">foobar</span>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T08:37:45.300

它什么也不做。它绑定了另一个事件来处理点击。当您再次单击它时，您会看到发生了一些事情，但随后它将绑定另一个事件。之后，每次点击都会有多个处理程序做相反的事情，每次点击都会绑定更多的处理程序。

只需去掉`click`方法调用，该`toggle`方法为点击绑定一个事件：

```
<script type="text/javascript">
$("#contact_min").toggle(function(){
  $("#contact_min").animate({
    height: "300px"
  }, 1500 );
  $(".arrow").html("&#x25bc;")
},
function(){
  $("#contact_min").animate({
    height: "28px"
  }, 1500 );
  $(".arrow").html("&#x25B2;")
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:39:35.460

没有 .toggle animate 我认为您需要执行以下操作：

```
$("#contact_min").click(function(){
  var height = $("#contact_min").attr("height");
  if height!=28px
  {
   $("#contact_min").animate({
    height: "28px"
    }, 1500 );
  $(".arrow").html("&#x25B2;");
  }
  else
  {
  $("#contact_min").animate({
    height: "300px"
    }, 1500);
  $(".arrow").html("&#x25bc;")
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T08:39:51.167

删除点击功能，因为切换已经有一个交换点击事件。

所以它将是：

```
<script type="text/javascript">
 $("#contact_min").toggle(function(){
 $("#contact_min").animate({
 height: "300px"
 }, 1500 );
 $(".arrow").html("&#x25bc;")
 }
 function(){
 $("#contact_min").animate({
 height: "28px"
 }, 1500 );
 $(".arrow").html("&#x25B2;")
 });
 </script> 
```

# vb6 - 是否有像 glassfish 这样的应用程序服务器用于 Visual Basic？

> ID：14253625
> 
> 赞同：1
> 
> 时间：2013-01-10T08:31:32.420
> 
> 标签：vb6

是否有一个等效的应用程序服务器，如 glassfish 或用于 java 的用于 Visual Basic 程序的 tomcat？特别是对于visual basic 6程序？

# linux - ARM交叉编译

> ID：14253626
> 
> 赞同：3
> 
> 时间：2013-01-10T08:31:35.437
> 
> 标签：linux, compilation, arm

我已经在我的 x86 Ubuntu12.04 linux 上安装了 ARM 交叉编译器工具链。

现在我有了 arm-linux-gnueabi-gcc 交叉编译器。

我编写了简单的hello world程序如下

```
#include <stdio.h>
int main(){
  printf("hello world\n");
  return 0;
} 
```

我使用交叉编译了这个程序

arm-linux-gnueabi-gcc -oa ac -static

编译二进制的结果如下

$ file a a：ELF 32 位 LSB 可执行文件，ARM，版本 1 (SYSV)，静态内衬，用于 GNU/Linux 2.6.31，未剥离

如果我在 QEMU 上的 ARM debian linux 上运行这个二进制文件，它会显示“非法指令”

但是如果我在我的 ARM debian linux 上使用 gcc 编译相同的源代码，它运行良好。

两个二进制文件的文件结果相同。我的交叉编译的 ARM 二进制文件有什么问题？

先感谢您。

```
meltdown@meltdown-VirtualBox:/var/www$ arm-linux-gnueabi-readelf --file-header --arch-specific a
ELF Header:
  Magic:   7f 45 4c 46 01 01 01 00 00 00 00 00 00 00 00 00 
  Class:                             ELF32
  Data:                              2's complement, little endian
  Version:                           1 (current)
  OS/ABI:                            UNIX - System V
  ABI Version:                       0
  Type:                              EXEC (Executable file)
  Machine:                           ARM
  Version:                           0x1
  Entry point address:               0x8881
  Start of program headers:          52 (bytes into file)
  Start of section headers:          368052 (bytes into file)
  Flags:                             0x5000002, has entry point, Version5 EABI
  Size of this header:               52 (bytes)
  Size of program headers:           32 (bytes)
      Number of program headers:         7
  Size of section headers:           40 (bytes)
  Number of section headers:         30
  Section header string table index: 27
Attribute Section: aeabi
File Attributes
  Tag_CPU_name: "7-A"
  Tag_CPU_arch: v7
  Tag_CPU_arch_profile: Application
  Tag_ARM_ISA_use: Yes
  Tag_THUMB_ISA_use: Thumb-2
  Tag_FP_arch: VFPv3-D16
  Tag_ABI_PCS_wchar_t: 4
  Tag_ABI_FP_denormal: Needed
  Tag_ABI_FP_exceptions: Needed
  Tag_ABI_FP_number_model: IEEE 754
  Tag_ABI_align_needed: 8-byte
  Tag_ABI_align_preserved: 8-byte, except leaf SP
  Tag_ABI_enum_size: int
  Tag_ABI_HardFP_use: SP and DP
  Tag_CPU_unaligned_access: v6
  Tag_DIV_use: Not allowed 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T09:43:03.990

您能否运行 readelf 命令来确定您的交叉编译器针对哪个 ARM 架构？我们需要看看 Qemu 是否支持这个目标。

```
arm-linux-gnueabi-readelf --file-header --arch-specific a 
```

此外，您可以检查`dmesg`模拟系统中的输出。它应该包含对非法指令的描述。

此外，您可以在调试器中运行程序以查看哪个指令失败。

# wpf - 子类化一个 wpf 弹出控件

> ID：14253627
> 
> 赞同：0
> 
> 时间：2013-01-10T08:31:37.770
> 
> 标签：wpf, vb.net, popup, subclassing

我正在寻找一种拖动/移动弹出控件的方法，我找到了这个答案

[拖动 wpf 弹出控件](https://stackoverflow.com/a/8170666)

不幸的是，我不知道如何对 PopUp 控件进行子类化，我尝试创建自定义控件并从 PopUp 继承，但这对我来说似乎不正确。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T13:22:31.853

你需要完全按照你说的去做。

从您要修改的控件类继承的类，因此您将能够创建自己的属性。如果您想*“重新模板化”*该控件，您将需要一个存储样式、模板等的地方。

请看下面的这个答案以进一步了解它关于更改 MenuItem 控件但您将使用相同的技巧。

[如何将手动创建的 WPF Menuitem 转换为模板/样式资源/控件模板](https://stackoverflow.com/questions/12955983/how-to-convert-a-manually-created-wpf-menuitem-into-a-template-style-resource/14244560#14244560)

# javascript - document.execCommand 复制命令不起作用或其他解决方案？

> ID：14253634
> 
> 赞同：4
> 
> 时间：2013-01-10T08:32:17.240
> 
> 标签：javascript, browser, cross-browser

我正在做的是以编程方式从网页中选择所有文本，然后复制它。全选适用，`execCommand`但复制不适用。

这是我的代码：

```
$.ajax({
    url: $('#url').val(),
    type: 'GET',
    success: function(res) {
        $('#result').html(res.responseText);
        $('#result').fadeIn('fast');

        $('#result').focus();
        $('#result').select();

        document.execCommand('selectall');

        // copy does not work ?
        document.execCommand('copy');

    }
}); 
```

**[这是关于 JsBin 的示例](http://jsbin.com/welcome/72426)**

我也尝试使用诸如[ZeroClipboard](https://github.com/jonrohan/ZeroClipboard)之类的 flash 解决方案，但是似乎必须*明确地*按下他们的 flash 对象/按钮来复制文本，而我想在`zeroclip.setText('whatever');` **没有用户按下**按钮的情况下这样做。

谁能告诉如何以编程方式复制文本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T08:35:15.677

复制命令过去在除 IE 之外的所有浏览器中都受到保护（它在其他浏览器中不起作用）。要求用户使用 Ctrl+C 是一种常见的解决方法。

从 Firefox 41（2015 年 9 月）、Chrome 42（2015 年 4 月）和 Opera 29（2015 年 4 月）开始，当从某些受信任的（用户触发）触发时，大多数主流浏览器中的复制命令将不再可用事件，例如响应按钮单击而触发的事件。

MDN的[兼容性表](https://developer.mozilla.org/en-US/docs/Web/API/Document/execCommand#Browser_Compatibility)和 W3C[错误](https://www.w3.org/Bugs/Public/show_bug.cgi?id=23235)提供了更多信息。

# android - POST 编码字符

> ID：14253638
> 
> 赞同：0
> 
> 时间：2013-01-10T08:32:43.297
> 
> 标签：android, character-encoding, http-post

我正在向带有两个参数的 php 服务器发送 POST 消息，一个是 Base64 中的 HASH。Base64 使用字符“=”作为填充，因此它可以出现在哈希值中。

```
public void postData() {
    // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://www.yoursite.com/script.php");

    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("id", "WAFFTE="));
        nameValuePairs.add(new BasicNameValuePair("stringdata", "data"));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
    }
} 
```

使用此代码，url 将通过 %3D 对“=”进行编码，但在这种情况下，服务器不会重新调整 id 值。我试过 selectinf 不同的编码，但没有区别。

```
 httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs),"UTF-8"); 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:04:50.650

显然没有必要从后置参数中删除“=”，但建议避免与分隔符混淆。所以最好在 Base64 编码中使用标志 URL_SAFE 和 NO_PADDING。

我希望这可以帮助其他有同样问题的人。

# c - linux ARP recvfrom 信息

> ID：14253639
> 
> 赞同：0
> 
> 时间：2013-01-10T08:32:51.733
> 
> 标签：c, linux, arp

如果我发送一个 ARP 包，我可以从 recv 中找出发送者的 IP 地址吗？我问这个是因为我将多个包发送到带有子进程的不同主机并且我收到了对所有子进程的响应，所以我在问如果有办法知道什么孩子送了什么包裹。谢谢。

```
struct ether_arp req;
struct sockaddr_ll addr={0};
struct ifreq inter;
int sock;//I check usinginter if the interface is correct
sock=socket(AF_PACKET,SOCK_DGRAM,htons(ETH_P_ARP));
 if (sock==-1) {
 printf("%s",strerror(errno));
}
if (ioctl(sock,SIOCGIFINDEX,&inter)==-1) {
printf("%s",strerror(errno));
return ;//for the interface index
addr.sll_family=AF_PACKET;
addr.sll_ifindex=index;
addr.sll_halen=ETHER_ADDR_LEN;
addr.sll_protocol=htons(ETH_P_ARP);
memcpy(addr.sll_addr,ether_broadcast_addr,ETHER_ADDR_LEN);
req.arp_hrd=htons(ARPHRD_ETHER);
req.arp_pro=htons(ETH_P_IP);
req.arp_hln=ETHER_ADDR_LEN;
req.arp_pln=sizeof(in_addr_t);
req.arp_op=htons(ARPOP_REQUEST);
......................  
 memcpy(&req.arp_spa,&target_ip_addr.s_addr,sizeof(req.arp_spa));//this way I save the   source IP
.......
if (sendto(sock,&req,sizeof(req),0,(struct sockaddr*)&addr,sizeof(addr))==-1) {
printf("%s",strerror(errno));
}THis is how I send it 
```

还有一些代码，但我认为它不相关

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T10:45:16.820

您不能使用`recvfrom`发现发送方的 IP 地址，因为 ARP 数据包没有网络层。

如果您想知道哪个主机及其相关的 MAC 地址和 IP 地址回复了您的请求，您必须剖析这样制作的数据包：

![在此处输入图像描述](../Images/063f6dd2419cea48ae32b83c9daf20db.png)

在此处查看有关单个字段的更多信息：[ARP 消息格式](http://www.tcpipguide.com/free/t_ARPMessageFormat.htm)

您正在寻找的 32 位`Sender Protocol Address`

这是一个假设的代码片段，它显示了 arp 响应您的 ARP 请求的主机的 ip 号。

**免责声明：**我没有测试它，但它应该给你一个想法。

```
/* buf is buffer containing the ethernet frame */
char buf[65535];

/* arp frame points to the arp data inside the ethernet frame */
struct ether_arp *arp_frame;

/* skipping the 14 bytes of ethernet frame header */
arp_frame = (struct ether_arp *) (buf + 14);

/* read until we got an arp packet or socket got a problem */
while (recv(sock, buf, sizeof(buf), 0))
{
    /* skip to the next frame if it's not an ARP packet */
    if ((((buf[12]) << 8) + buf[13]) != ETH_P_ARP) 
        continue;

    /* skip to the next frame if it's not an ARP REPLY */
    if (ntohs (arp_frame->arp_op) != ARPOP_REPLY)
        continue;

    /* got an arp reply! this is where i'm printing what you need             */
    /* ... and YES... spa of arp_spa field stands for Sender Protocol Address */
    printf("I got an arp reply from host with ip: %u.%u.%u.%u\n", arp_frame->arp_spa[0],
                                                                  arp_frame->arp_spa[1],
                                                                  arp_frame->arp_spa[2], 
                                                                  arp_frame->arp_spa[3]);

    /* break? */
    break;    
} 
```

这是一个监听 ARP-REPLIES 的小程序的完整工作示例。

[arp-reply-catcher.c 源](http://www.dbtecno.it/upload/arp.c)

# ruby-on-rails - Rails 从 3.2.3 升级到 3.2.11

> ID：14253640
> 
> 赞同：2
> 
> 时间：2013-01-10T08:32:53.020
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我正在将我的应用程序 Rails 应用程序从 3.2.3 升级到 3.2.11，以解决最近发现的安全漏洞。

我已经更新了我的 Gem 文件： `gem 'rails', '3.2.11'` 并运行`bundle update rails`

我还需要做些什么来完成升级吗？我怎么知道我是否还需要升级我的任何其他宝石？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T09:55:48.123

我也从昨天升级`3.2.3`到了。`3.2.11`

确实你需要`gem 'rails', '3.2.11'`，运行`bundle update rails`。

这将`Gemfile.lock`使用所有新的 rails 3.2.11 依赖项更新您，即 actionmailer、actionpack、activemodel、activerecord、activesupport 等。

然后你应该运行你的规范/测试，你就可以开始了。

对于需要较低导轨版本的其他 gem，我们没有任何特殊问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T22:04:46.357

它确实是运行的解决方案之一`bundle update rails`，但在这种情况下，您将安装两个版本的 gems - 3.2.3 和 3.2.11（您可以通过运行检查它`gem list`），因此您需要手动卸载它们。我认为最好是：

1.  从当前 gemset 中删除所有已安装的 gem（如果没有 rvm，那么我认为与 没有太大区别`bundle update rails`）

    `rvm gemset empty your_gemset_name`

2.  安装您需要的所有 Gemfile 中未提及的 gem（可能是 rake、bundler，也可能是其他一些）。例如，如果您在全局 gemset 中安装了所有 gem，那么所有 gem 都将被删除，包括 bundler，因此您必须先重新安装它：

    `gem install rake`

    `gem install bundler`

3.  在 bundler 的帮助下安装 gems

    `bundle install`

4.  运行测试

5.  如果测试未覆盖 100% 的代码，则手动检查功能

通过这种方式，您将自动摆脱不必要的旧版本的 gems，并且在`bundle install`bundler 期间也会让您知道 gems 版本中是否存在任何不匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T09:13:51.757

当我更新rails时，我会像你一样做

```
gem 'rails', 'VERSION' 
```

这就够了。要了解 gem 依赖项，如果我不确定，我会执行以下步骤：

# 1

检查 gem 页面（在我的情况下，它主要是我关注的 git 页面）

# 2

运行我的测试用例以查看是否发生与新 Rails 版本相关的错误

# 3

手动测试 gems，这是因为页面上可能有 1-2 个功能的小宝石。只需点击它们即可。

在你的情况下，我会说它是一个小更新，所以不要担心太多，只要想想每个宝石在做什么并快速测试！gems 不能处理旧版本的rails 比新版本更常见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T04:33:36.873

我今天也升级到 rails 3.2.11。更改 gem 文件并运行后，`bundle update rails`我现在运行`gem list`并发现我安装了 rails 3.2.9 和 3.2.11。我还发现了其他需要清理的宝石。这是我在清理这些旧版本时发现的一篇很棒的 SO 帖子：[卸载旧版本的 Ruby gems](https://stackoverflow.com/questions/5902488/uninstall-old-ruby-gems-versions)。

# eclipse - Eclipse Juno 无法打开 xml

> ID：14253641
> 
> 赞同：2
> 
> 时间：2013-01-10T08:33:04.987
> 
> 标签：eclipse

我一直在使用 eclis juno 在 android 中进行开发。自从我上次使用它已经有几个星期了。现在我试图在 xml 编辑器中打开一个 xml 文件，我得到“空区域！” 你知道我怎么能解决这个问题吗？谢谢你的时间。

这是堆栈跟踪，以防它帮助您：

```
java.lang.IllegalArgumentException: Empty region!
at javax.imageio.ImageReader.computeRegions(Unknown Source)
at com.sun.imageio.plugins.wbmp.WBMPImageReader.read(Unknown Source)
at javax.imageio.ImageIO.read(Unknown Source)
at javax.imageio.ImageIO.read(Unknown Source)
at android.graphics.Bitmap_Delegate.createBitmap(Bitmap_Delegate.java:96)
at com.android.layoutlib.bridge.impl.ResourceHelper.getDrawable(ResourceHelper.java:233)
at com.android.layoutlib.bridge.bars.CustomBar.loadIcon(CustomBar.java:165)
at com.android.layoutlib.bridge.bars.CustomBar.loadIcon(CustomBar.java:144)
at com.android.layoutlib.bridge.bars.FakeActionBar.<init>(FakeActionBar.java:37)
at com.android.layoutlib.bridge.impl.RenderSessionImpl.inflate(RenderSessionImpl.java:270)
at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:322)
at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:372)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1638)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1389)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.activated(GraphicalEditorPart.java:1163)
at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.delegatePageChange(LayoutEditorDelegate.java:674)
at com.android.ide.eclipse.adt.internal.editors.common.CommonXmlEditor.pageChange(CommonXmlEditor.java:360)
at org.eclipse.ui.part.MultiPageEditorPart.setActivePage(MultiPageEditorPart.java:1081)
at org.eclipse.ui.forms.editor.FormEditor.setActivePage(FormEditor.java:607)
at org.eclipse.ui.part.MultiPageEditorPart.createPartControl(MultiPageEditorPart.java:362)
at org.eclipse.ui.internal.e4.compatibility.CompatibilityPart.createPartControl(CompatibilityPart.java:129)
at org.eclipse.ui.internal.e4.compatibility.CompatibilityEditor.createPartControl(CompatibilityEditor.java:95)
at org.eclipse.ui.internal.e4.compatibility.CompatibilityPart.create(CompatibilityPart.java:300)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:56)
at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:859)
at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:839)
at org.eclipse.e4.core.internal.di.InjectorImpl.inject(InjectorImpl.java:111)
at org.eclipse.e4.core.internal.di.InjectorImpl.internalMake(InjectorImpl.java:319)
at org.eclipse.e4.core.internal.di.InjectorImpl.make(InjectorImpl.java:240)
at org.eclipse.e4.core.contexts.ContextInjectionFactory.make(ContextInjectionFactory.java:161)
at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.createFromBundle(ReflectionContributionFactory.java:102) 
```

# sql-server - 在 Oracle 和 MSSQL 之间移动数百万条记录

> ID：14253643
> 
> 赞同：0
> 
> 时间：2013-01-10T08:33:16.560
> 
> 标签：sql-server, database, oracle, data-migration

我有一个带有大约 30 列的表（30 列，没有 BLOB 或 LOB）的 Oracle 数据库。5000 万条记录。我需要将数据移动到 MSSQL 中。MSSQL 端的表结构将保持不变。移动大量数据的首选方法是什么？导出然后导入还是写一个小应用程序来做负载？还是其他方法（免费或商业工具）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:45:03.953

检查[Oracle GoldenGate](http://www.oracle.com/technetwork/articles/datawarehouse/oracle-sqlserver-goldengate-460262.html)工具以复制数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T09:42:54.607

使用 SQL Server 集成服务。一个简单的数据流应该这样做：将 Oracle 数据库用作 OLE DB 源，将 SQL Server 数据库用作 OLE DB 目标。

避免使用“SQL Server 目标”。与使用 OLE DB 相比，我的性能较慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T13:59:01.473

最好的方法之一是使用 sqlplus 和 SPOOL 从 Oracle 推送到文本文件，并使用 bcp 实用程序加载到 MSSQL。快速而强大:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-09T08:49:53.247

单表 50M 对 SSIS 来说是一件轻而易举的事。如果这是一次性任务，我不会尝试其他任何事情。

# iphone - 在 appDelegate.m 中设置导航控制器和 tabBarController

> ID：14253645
> 
> 赞同：0
> 
> 时间：2013-01-10T08:33:19.770
> 
> 标签：iphone, ios, uinavigationcontroller, uitabbarcontroller

我只是无法在我的每个标签栏项目视图中获得导航控制器（和栏）。这是我的 appdelegate ，我错过了什么？`FrontPage`并且`Opinion`也是tableviewcontrollers，只是忘记了他们名字中的表格。

```
@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:        (NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.

  FrontPageViewController *frontPageVC = [[FrontPageViewController alloc] initWithNibName:nil bundle:nil];
  frontPageVC.title = @"Front Page";
  frontPageVC.tabBarItem.image = [UIImage imageNamed:@"second"];
  UINavigationController *frontPageNavController = [[UINavigationController alloc] initWithRootViewController:frontPageVC];

  CampusTableViewController *campusVC = [[CampusTableViewController alloc] initWithNibName:nil bundle:nil];
  campusVC.title = @"Campus";
  campusVC.tabBarItem.image = [UIImage imageNamed:@"second"];
  UINavigationController *campusNavController = [[UINavigationController alloc] initWithRootViewController:campusVC];

  OpinionViewController *opinionVC = [[OpinionViewController alloc] initWithNibName:nil bundle:nil];
  opinionVC.title = @"Opinion";
  opinionVC.tabBarItem.image = [UIImage imageNamed:@"second"];
  UINavigationController *opinionNavController = [[UINavigationController alloc] initWithRootViewController:opinionVC];

  SportsTableViewController *sportsVC = [[SportsTableViewController alloc] initWithNibName:nil bundle:nil];
  sportsVC.title = @"Sports";
  sportsVC.tabBarItem.image = [UIImage imageNamed:@"second"];
  UINavigationController *sportsNavController = [[UINavigationController alloc] initWithRootViewController:sportsVC];

  PDFViewController *pdfVC = [[PDFViewController alloc] initWithNibName:nil bundle:nil];

  NSArray *controllers = [NSArray arrayWithObjects:frontPageVC, campusVC, opinionVC, sportsVC, pdfVC, nil];

  self.tabBarController = [[UITabBarController alloc] init];
  self.tabBarController.viewControllers = controllers;

  self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    return YES;

  [[self.tabBarController.viewControllers objectAtIndex:0] setRootViewController:frontPageNavController];

} 
```

谢谢你！

编辑：显然我需要输入更多来解释我的问题，因为SO不会让我在没有一定数量的单词的情况下发帖？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:40:24.160

更改此行

```
NSArray *controllers = [NSArray arrayWithObjects:frontPageVC, campusVC, opinionVC, sportsVC, pdfVC, nil]; 
```

到那个

```
UINavigationController *pdfNavController = [[UINavigationController alloc] initWithRootViewController:pdfVC];
NSArray *controllers = [NSArray arrayWithObjects:frontPageNavController, campusNavController, opinionNavController, sportsNavController, pdfNavController, nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:38:42.240

您`controllers`应该包括导航控制器，而不是单个控制器。

```
NSArray *controllers = [NSArray arrayWithObjects:frontPageNavController, campusNavController, opinionNavController, sportsNavController, pdfNavController, nil];

self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = controllers;

self.window.rootViewController = self.tabBarController;
[self.window makeKeyAndVisible];
return YES;

// you can remove the last line: [[self.tabBarController.viewControllers objectAtIndex:0] setRootViewController:frontPageNavController]; 
```

苹果在一个文档中说（不记得是在人机界面指南中，在视图控制器编程，标签栏控制器编程还是导航控制器编程中）如果你想拥有导航控制器和标签栏控制器，你必须把导航标签栏控制器内的控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T08:41:00.390

为什么在return语句之后给出这个方法？

[[self.tabBarController.viewControllers objectAtIndex:0] setRootViewController:frontPageNavController];

尝试在 return 语句之前给出这个或删除这个语句。因为你返回下一行不会执行。也让我们清楚地知道您的问题。你想要做什么。

# testflight - TestFlight 上传 API 的问题

> ID：14253650
> 
> 赞同：0
> 
> 时间：2013-01-10T08:33:43.513
> 
> 标签：testflight

我正在使用 jenkins 自动将我的构建上传到 testflight。我已经弄清楚了我需要的大部分东西，但是我被困在一个我似乎无法摆脱的地方。

这是我用于测试飞行上传的脚本

```
curl http://testflightapp.com/api/builds.json \
-F file=@mybuild.ipa \
-F dsym=@mybuilddSYM.zip \
-F api_token='<api_token>' \
-F team_token='<team_token>' \
-F notes='Release notes' 
```

我想提供的不是静态字符串，而是更动态的版本说明，例如我上次的 github 提交详细信息，或者我创建的最新标签名称。但我无法提供此信息。

我尝试了类似 -F notes='"$(git log --pretty=format:"%h - %an, %ar : %s" -n 3)"' // 给出最后 3 次提交，但它是将 "$(git log --pretty=format:"%h - %an, %ar : %s" -n 3)" 作为字符串，而不是值。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T16:12:10.577

您是否尝试过用反引号（即 ` 字符）将命令括起来？例如

```
notes=`git log --pretty=format:"%h - %an, %ar : %s" -n 3` 
```

要评估的：

```
-F notes="$notes" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T20:15:03.083

我用 Ruby 来做这件事，特别是因为存在很棒的[游牧工具包](http://nomad-cli.com/)！

但也有使用 shell 的要点：[https ://gist.github.com/djacobs/2411095](https://gist.github.com/djacobs/2411095)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T15:47:03.453

我最近一直在使用 shell 脚本在 TeamCity 中处理这个脚本。为了让我使用这样的变量类型，我必须使用以下语法：

```
#!/bin/bash

VARIABLE_NAME = $( /bin/date +"%Y-%m-%d" )

echo ${VARIABLE_NAME} 
```

# networking - GCD 串行（FIFO）队列、NSURLConnection sendSynchronousRequest（或 NSData dataWithContentsOfURL）和内存管理

> ID：14253651
> 
> 赞同：0
> 
> 时间：2013-01-10T08:33:47.910
> 
> 标签：networking, memory-management, queue, grand-central-dispatch

我有一张桌子，有 N 行。每行都与要下载的文件相连，因此我需要对要下载的音频文件进行串行队列。每行必须显示一个小图标，以显示该文件是正在下载还是在等待队列中。当音频文件完全下载后，我用 NSNotifications 更新 UI，然后我就直接下载下一个。到目前为止，我想出了这个，它工作正常。

```
swpadq.queue = dispatch_queue_create("com.audioDownload", DISPATCH_QUEUE_SERIAL);

dispatch_async(_queue, ^{
    NSURLRequest *urlRequest_ = [NSURLRequest requestWithURL:audioURL_
                                                 cachePolicy:NSURLRequestReloadIgnoringCacheData
                                             timeoutInterval:60.0f];

    NSError *error_;

    NSLog(@"downloading %@", [audioURL_ absoluteString]);

    NSData *data_ = nil;

    data_ = [NSData dataWithContentsOfURL:audioURL_
                                  options:NSDataReadingUncached
                                    error:&error_];

    /*data_ =  [NSURLConnection sendSynchronousRequest:urlRequest_
     returningResponse:nil
                                              error:&error_];*/

    }); 
```

唯一的“小”问题是内存在增长，保留缓存直到所有文件都完全下载，并且只有在这一刻，内存才被释放。我有数百个文件要下载，这是一个问题。我该如何解决这个问题？

此外，我如何释放或取消（我正在使用 ARC）缓存，以删除串行块在每个 nsurlrequest 上持有的强保留周期？当队列完成以释放所有对象（尤其是 url 缓存）时，我真的不明白 GCD 做了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T05:18:33.443

您需要**串行**队列有什么特别的原因吗？下载必须以特定的顺序一个接一个地完成吗？如果没有，请尝试使用并发队列。您可以通过以下方式获取全局并发队列：

dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);

# mysql - Mysql二分查找

> ID：14253658
> 
> 赞同：2
> 
> 时间：2013-01-10T08:34:04.520
> 
> 标签：mysql, binary, bit-manipulation

### 情况

我想在我的 PHP/MySQL 应用程序中转换某些状态字段以随时处理多个。下面以目前的 ENUM 字段为例：

```
STATUS_ACTIVE
STATUS_FROZEN
STATUS_PENDING
STATUS_FLAGGED
STATUS_DELETED 
```

目前，它一次只支持一个。但是，通过将集合转换为二进制，我最终得到了一组字符串。

```
1     STATUS_ACTIVE
10    STATUS_FROZEN
100   STATUS_PENDING
1000  STATUS_FLAGGED
10000 STATUS_DELETED 
```

现在，当谈到明智地过滤 PHP 时，我没有任何问题。但是，这会带来很大的（且不必要的）开销。一个条目很可能最终会成为

```
10010
01110
etc. 
```

### 问题

我已经进行了一些挖掘，我发现的最好的信息实际上是在 stackoverflow 上（讽刺地）[here](https://stackoverflow.com/questions/5801352/storing-binary-string-in-mysql)。~~有人可以解释那里使用的实际语法或指向正确的 MySQL 手册页。~~

目前还不清楚人们将如何假设这些情况：

```
Changing only the third bit
Searching for 1 on only the fourth bit
Updating two binary flags at the same time 
```

~~非常感谢您朝正确的方向敲门，感谢您的阅读。~~

编辑：我已经弄清楚了大部分语法。我现在的问题是：是否可以一次更改不止一个，而不必重新定义整个事物？

```
I.e

100 -> 1011
1 -> 101 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T10:45:14.870

回答您更新的问题。例如，我们需要 3 位和 5 位。

如果您需要设置 3 和 5 位，您应该`OR`使用`10100`

```
UPDATE table SET options = options | ((1 << 2) | (1 << 4)) 
```

如果您需要清除 3 和 5 位，您应该`AND`使用`11101011 = NOT(10100)`

```
UPDATE table SET options = options & (~((1 << 2) | (1 << 4))) 
```

# android - 在 Facebook Android SDK 3.0 中将读取会话切换为发布会话

> ID：14253666
> 
> 赞同：1
> 
> 时间：2013-01-10T08:34:33.527
> 
> 标签：android, facebook, facebook-android-sdk

我真的需要关闭一个会话（比如从一个 READ 会话），并建立一个新的 PUBLISH 活动会话，以便我执行 publish_stream 请求。

如果是（或不是），我有什么有效的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T12:16:30.163

不需要。打电话`session.requestNewPublishPermissions(new Session.NewPermissionsRequest(this, PERMISSIONS));`

其中PERMISSIONS是（相应地改变它）：

```
 private static final List<String> PERMISSIONS = Arrays.asList("publish_actions"); 
```

完成后，您将收到回调：

```
SessionState.OPENED_TOKEN_UPDATED 
```

检查上述状态并通过调用再次发布您的消息：

```
Request statusRequest=Request.newStatusUpdateRequest(Session.getActiveSession(), mStatus.getText().toString(), reqestCallback);
if(statusRequest!=null){
statusRequest.executeAsync(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:22:14.290

```
 private class App_Session_StatusCallback implements Session.StatusCallback
    {
        @Override
        public void call(Session session, SessionState state, Exception exception) 
        {
            Log.d("asd", "state changed");
            handleSessionStateChanged(session, state, exception);
        }
    }

    private void handleSessionStateChanged(Session session, SessionState state, Exception exception)
    {
        if(state == SessionState.OPENED_TOKEN_UPDATED)
        {
            Request statusRequest=Request.newStatusUpdateRequest(Session.getActiveSession(), mStatus.getText().toString(), reqestCallback);
            if(statusRequest!=null){
                statusRequest.executeAsync();
            }
        }

        if(session != null)
        {
            if(session.isOpened())
            {
                Log.d("asd", "session is opened");

                Log.d("asd", "Token = " + session.getAccessToken());
                Log.d("asd", "Expiry = " + session.getExpirationDate().toGMTString());
            }
            else
            {
                Log.d("asd", "session is NOT opened");
            }
        }
    }

    Session.getActiveSession().requestNewPublishPermissions(new Session.NewPermissionsRequest(this, Arrays.asList("publish_actions"))); 
```

# jquery - Firefox中的Jquery UI对话框问题

> ID：14253667
> 
> 赞同：0
> 
> 时间：2013-01-10T08:34:39.563
> 
> 标签：jquery, jquery-ui-dialog

提交请求后，将出现一个带有请求 ID 的对话框，单击“确定”按钮将重定向到输出页面。但是如果用户点击浏览器上的后退按钮，对话框就会出现。单击后退按钮时如何避免此对话框？

我在 chrome 中没有遇到这个问题，但在 Firefox 中遇到了这个问题。

提前致谢。

# c# - 减少 WCF 服务的响应时间

> ID：14253671
> 
> 赞同：0
> 
> 时间：2013-01-10T08:34:49.960
> 
> 标签：c#, wcf, web-services

我的 WCF 服务以字符串格式向客户端返回大约 7MB 的数据。

客户端必须等待响应。

需要在配置文件中修改哪些适当的绑定或任何其他方法会减少 WCF 服务的响应时间？

```
 public string GetData() //Without compression
    {
        return File.ReadAllText("SampleDB");
    }

    private string GetDataforCompression() //with compression
    {
       string data=File.ReadAllText("SampleDB");
       Compress(data);

    }

    public static string Compress(string ToCompress)
    {
        var bytes = Encoding.UTF8.GetBytes(ToCompress);

        using (var msi = new MemoryStream(bytes))
        using (var mso = new MemoryStream())
        {
            using (var gs = new DeflateStream(mso, CompressionMode.Compress))
            {

                CopyTo(msi, gs);
            }

            return Convert.ToBase64String(mso.ToArray());
        }
    }

    public static void CopyTo(Stream src, Stream dest)
    {
        byte[] bytes = new byte[4096];

        int cnt;

        while ((cnt = src.Read(bytes, 0, bytes.Length)) != 0)
        {
            dest.Write(bytes, 0, cnt);
        }
    } 
```

我尝试以压缩形式发送数据并在客户端解压缩，但响应时间没有显着变化。以下是客户端配置文件

```
 <customBinding>
        <binding name="httpbinarybinding" closeTimeout="00:10:00" openTimeout="00:10:00" receiveTimeout="00:10:00" sendTimeout="00:10:00">
          <binaryMessageEncoding>
            <readerQuotas maxDepth="4194304" maxStringContentLength="65536000" maxArrayLength="4194304" maxBytesPerRead="4194304" maxNameTableCharCount="4194304" />
          </binaryMessageEncoding>
          <httpTransport maxReceivedMessageSize="65536000"  maxBufferSize="65536000" />
        </binding>
      </customBinding> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:55:33.337

一次发送大量数据，您不能在您的方法/Web 应用程序中构建分页吗？也可以看看 iis compression gzip。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:52:48.817

我找不到您在自定义绑定中提到“transferMode”的位置

```
<binding name="TransferService"
   maxReceivedMessageSize="2147483647"
   maxBufferSize="2147483647" transferMode="Streamed" > 
```

流式传输将帮助您以块的形式传递数据。这将帮助您管理用户响应，或者至少有助于显示进度条。

详情请查看以下链接：

[http://www.codeproject.com/Articles/166763/WCF-Streaming-Upload-Download-Files-Over-HTTP](http://www.codeproject.com/Articles/166763/WCF-Streaming-Upload-Download-Files-Over-HTTP) 和 [http://msdn.microsoft.com/en-us/library/aa717050.aspx](http://msdn.microsoft.com/en-us/library/aa717050.aspx)

有时，@client 端处理数据可能需要知道数据长度。您可以使用消息合同公开它。 [http://social.msdn.microsoft.com/Forums/en/wcf/thread/472a7b38-f4fe-420e-85be-ae9c744a94a7](http://social.msdn.microsoft.com/Forums/en/wcf/thread/472a7b38-f4fe-420e-85be-ae9c744a94a7)

希望这可以帮助。

# php - PHP - 如何使用 OAuth 在 Twitter 中发布照片

> ID：14253672
> 
> 赞同：0
> 
> 时间：2013-01-10T08:34:51.187
> 
> 标签：php, twitter

是否有一个好的撒玛利亚人可以提供使用 PHP 网站将照片上传到 twitter 的工作代码？

我已经搜索了很多，但它不适合我。我不知道我是否错过了添加某些内容或代码不再运行良好。

对于此事，我愿意提供任何指向该教程的链接。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-19T15:56:16.997

您将需要来自 twitter 的 tmoauth 库。我无法解释如何在您的代码中实现，但这是从我的工作代码中剪切和粘贴的，但我不得不匿名化一些东西。

```
//THIS IS THE CREDS FOR TWITTER - I HAVE THEM IN AN ARRAY
    $tmhOAuth = new tmhOAuth(array(
       'consumer_key'    => $network_array['consumer_key'], 
       'consumer_secret' => $network_array['consumer_secret'],
       'user_token'      => $network_array['user_token'],
       'user_secret'     => $network_array['user_secret']
      ));
     }

//PARAMS UNIQUE FOR THIS TWEET
       $params = array(
      'media[]' => '@' . $process_image['image_path'],  //PATH TO IMAGE
      'status' => $tweet_response,  //THIS IS THE TEXT WE USE FOR THE TWEET
      'in_reply_to_status_id' => $mentions[$c]["id"]  //IF REPLYING, IT'S HERE
       );

//THIS IS HOW YOU TELL TWITTER IT'S A PHOTO

       $code = $tmhOAuth->user_request(array(
      'method' => 'POST',
      'url' => $tmhOAuth->url("1.1/statuses/update_with_media"),
      'params' => $params,
      'multipart' => true
       )); 
```

# sql - 在 SQL 中为 Order by 应用 Where 子句

> ID：14253673
> 
> 赞同：1
> 
> 时间：2013-01-10T08:35:01.037
> 
> 标签：sql, sql-server-2008, sorting, sql-order-by, where-clause

想要按照基于like子句的关键字选择顺序允许的方式对以下数据进行排序：

表中数据：

```
EmpId EmpLotusNotes
10001 Amit B/India
20002 Bharat C/India
30003 Kyo Jun/Japan
40004 Jee Lee/China
50005 Xavier K/USA 
```

根据特定国家顺序（日本、中国、印度、美国）呈现/排序的数据：

```
EmpId EmpLotusNotes
30003 Kyo Jun/Japan
40004 Jee Lee/China
10001 Amit B/India
20002 Bharat C/India
50005 Xavier K/USA 
```

注意：我无法创建另一个包含国家/地区顺序或任何其他更改的表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T08:46:08.620

这应该是一个技巧：

```
SELECT
   EmpId, EmpLotusNotes
FROM 
   dbo.Table
ORDER BY
   CASE 
      WHEN EmpLotusNotes LIKE '%Japan' THEN 1
      WHEN EmpLotusNotes LIKE '%China' THEN 2 
      WHEN EmpLotusNotes LIKE '%India' THEN 3
      WHEN EmpLotusNotes LIKE '%USA' THEN 4
   END 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T08:41:03.620

也许：

```
SELECT
   EmpId, EmpLotusNotes
FROM 
   dbo.Table
ORDER BY
   CASE WHEN EmpLotusNotes LIKE '%Japan' THEN 0 ELSE 1 END,
   CASE WHEN EmpLotusNotes LIKE '%China' THEN 0 ELSE 1 END,
   CASE WHEN EmpLotusNotes LIKE '%India' THEN 0 ELSE 1 END,
   CASE WHEN EmpLotusNotes LIKE '%USA' THEN 0 ELSE 1 END 
```

这是[**演示**](http://www.sqlfiddle.com/#!6/a3b77/1/0)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-10T10:47:40.730

问题是表格违反了第一范式，EmpLotusNotes 不应该包含员工的姓名和国家，大概是他们工作的国家。

您应该质疑不允许您清理结构和数据的原因。

见[https://www.google.com.au/search?q=sql+first+normal+form+atomic](https://www.google.com.au/search?q=sql+first+normal+form+atomic)

答案是，如果您在挑战后仍然无法规范化数据库，则为国家创建一个查询，创建一个查询以将第一个表中的数据拆分为第一个范式，然后将两者连接起来。

下面是一个适用于 mysql 的示例，对于 MS SQL，您将使用 CHARINDEX 而不是 INSTR 和 substring 而不是 substr。

```
select employeesWithCountries.*
, countries.sort 
from (
    select empId, empLotusNotes, substr( empLotusNotes, afterStartOfDelimiter ) country from (
        select empId
        , empLotusNotes
        , INSTR( empLotusNotes, '/' ) + 1 as afterStartOfDelimiter 
        from EmployeesLotusNotes
    ) employees
) employeesWithCountries
inner join (
    SELECT 'Japan' as country, 1 as sort
    union
    SELECT 'China' as country, 2 as sort
    union
    SELECT 'India' as country, 3 as sort
    union
    SELECT 'USA' as country, 4 as sort
) countries
on employeesWithCountries.country = countries.country
order by countries.sort, employeesWithCountries.empLotusNotes 
```

结果。

```
30003    Kyo Jun/Japan   Japan    1
40004    Jee Lee/China   China    2
10001    Amit B/India    India    3
20002    Bharat C/India  India    3
50005    Xavier K/USA    USA      4 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T08:46:05.280

您可以使用公用表表达式首先处理原始数据，然后对处理后的数据进行过滤和/或排序。像下面的东西。myCol 中的函数可以用任何类型的函数更改，甚至是 CASE 子句。

```
WITH T as 
(SELECT EmpId, EmpLotusNotes, SOMEFUNCTION(EmpLotusNotes) as myCol
 FROM Table1
)
SELECT *
FROM T 
WHERE myCol = XXX
ORDER BY myCol 
```

# google-docs-api - 使用谷歌文档 API 将文档从 URL 上传到谷歌文档

> ID：14253681
> 
> 赞同：1
> 
> 时间：2013-01-10T08:35:40.330
> 
> 标签：google-docs-api

我有一个托管在提供商处的文档的 URL，并希望使用 Google Docs API 将其上传到 Google 文档。有没有办法实现它？我已经搜索了一段时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-18T15:16:26.813

以下对我有用。它将返回一个文件对象。

```
DocsList.createFile(UrlFetchApp.fetch(fileURL); 
```

# themes - Liferay：网站徽标

> ID：14253683
> 
> 赞同：6
> 
> 时间：2013-01-10T08:35:56.083
> 
> 标签：themes, liferay, graphical-logo

我有一个 Liferay 门户和 2 个不同的站点或公司。他们每个人都有自己的主题和内容，但两个网站的徽标是相同的。

我知道我可以删除通用徽标并在每个主题中添加不同的徽标，但我想知道是否可以从控制面板更改唯一站点的徽标。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T12:49:21.043

您可以为给定站点的公共页面和私有页面设置单独的徽标，您可以这样做：

![在此处输入图像描述](../Images/0e057592fc8d34ece1536c98227a2575.png)

# silverlight - 在 Button 的 ContentTemplate 中设置和动画填充矩形

> ID：14253684
> 
> 赞同：1
> 
> 时间：2013-01-10T08:35:58.473
> 
> 标签：silverlight, windows-phone-7, xaml, button, windows-phone

我使用 WP7 项目。我已经定义了许多 ContentTemplates 的样式按钮。这些 ContentTeplates 包括形状（为简单起见，我们使用矩形）：

```
<Button x:Name="button1" 
        Style="{StaticResource ButtonStyle1}" 
        ContentTemplate="{StaticResource DataTemplate1}">
</Button>

<Button x:Name="button2" 
        Style="{StaticResource ButtonStyle1}" 
        ContentTemplate="{StaticResource DataTemplate2}">
</Button>
...

<DataTemplate x:Key="DataTemplate1">
    <Rectangle Height="100" Width="100" Fill="{QUESTION_HERE}"/>
</DataTemplate> 
```

我希望 Rectangle 的 Fill 属性为

1.  等于托管按钮的前景色
2.  按下或禁用按钮时相应更改

我怎样才能做到这一点？

* * *

## 我不太好的解决方案

在 WinRT，我使用 RelativeSource 方法，效果很好：

```
Fill="{Binding Foreground, RelativeSource={RelativeSource TemplatedParent}}" 
```

不幸的是，在 WP 无法正常工作。原因是 WP 的 ContentPresenter 没有 ForegroundProperty，而在 WinRT 有。

所以我尝试在 ContentPresenter 定义我自己的附加 DP 并在 Button 模板中使用它：

*Button.Template >> ContentControl.Template >>*

```
<ContentPresenter 
    local:FrameworkElementExtensions.Foreground="{TemplateBinding Foreground}" 
```

你知道当我在 ContentPresenter 中定义 DP 时，RelativeSource 绑定开始工作。

但不好的一面是当 Button 被按下时，Rectangle 的 Fill 会延迟几毫秒更新。 **这看起来不太好，我寻求更好的解决方案**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:37:17.430

**这将适用于 SL5 或 WPF**

如果您使用 .`Button`而不是`ContentPresenter`.

```
Fill="{Binding Foreground, RelativeSource={RelativeSource FindAncestor, AncestorType=Button}}" 
```

您还可以定义`AncestorType=ButtonBase`是否需要相同的模板来处理其他类型的按钮，例如`RepeatButton`等`ToggleButton`。

## 编辑：

**这是 SL3/4 或 WP7 的 hack**

将 a`TextBlock`放入您的`DataTemplate`并绑定到其前景。

```
<DataTemplate>
    <Grid>
        <TextBlock x:Name="ForegroundProvider" Width="0" Height="0" Opacity="0"/>
        <Path Fill="{Binding Foreground, ElementName=ForegroundProvider}" ..../>
    </Grid>
</DataTemplate> 
```

这很丑陋，但那是 WP7 ...... :(

# oracle11g - Liquibase generateChangelog 为 Oracle 创建错误的精度

> ID：14253688
> 
> 赞同：0
> 
> 时间：2013-01-10T08:36:14.227
> 
> 标签：oracle11g, liquibase

出于某种原因，当我使用 Liquibase 生成更改日志时，它使用了错误的精度。它生成一个数据类型为 NUMBER(0,-127) 的列。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:57:49.727

```
<changeSet author="sfasdf (generated)" id="1357744702717-1">
    <createTable schemaName="BLA" tableName="ADT_PAGE_ACCESS">
        <column name="ID" type="NUMBER(0,-127)">
            <constraints nullable="false" primaryKey="true" primaryKeyName="ADT_PAGE_ACCESS_PK" primaryKeyTablespace="ZON_IND1"/>
        </column>
        <column name="PAGE_ID" type="VARCHAR2(100 BYTE)">
            <constraints nullable="false"/>
        </column>
        <column defaultValueComputed="sysdate" name="ACCESSED" type="DATE">
            <constraints nullable="false"/>
        </column>
        <column name="CUSTOMER_ID" type="NUMBER(0,-127)"/>
        <column name="USERID" type="VARCHAR2(25 BYTE)"/>
    </createTable>
</changeSet> 
```

# mysql - Xampp MySQL mysql总是在线吗？

> ID：14253689
> 
> 赞同：0
> 
> 时间：2013-01-10T08:36:16.020
> 
> 标签：mysql

Xampp 是在线数据库还是本地数据库？如果我关闭 Xampp 和 mysql，数据库还能在我的网站上运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:34:23.847

XAMPP 是您计算机上的本地 Web 服务器 Apache + Database MySQL。它实际上与您的网站无关，除了

*   您的计算机（运行 XAMPP 的计算机）可以通过 DynDNS 或公共 IP 通过 Internet 访问。

如果是这样，是的，您的网站将在您关闭 Apache 或 MySQL 服务后离线。

但是由于我假设您的网站在 Internet 上的专用网络服务器（具有自己的 MySQL 服务器）上运行，因此它不会受到本地 xampp 开发堆栈的影响。

# magento - 会话的magento + memcache中的session.save_path不正确

> ID：14253691
> 
> 赞同：3
> 
> 时间：2013-01-10T08:36:19.920
> 
> 标签：magento, session, memcached, php

我正在尝试将 Magento 配置为使用 memcache 进行会话。我已经安装了 memcached 和 php5-memcache。我还在 memcache.ini 中添加了“extension=memcache.so”。

我已确保 memcached 实例也在 localhost 端口号 11213 中运行。但是，当我尝试登录 Magento 管理员时，我收到一个错误 -

```
Warning: Unknown: Failed to write session data (memcache). Please verify that the current setting of session.save_path is correct (tcp://127.0.0.1:11213?persistent=0&weight=2&timeout=10&retry_interval=10)  in Unknown on line 0 
```

以下是local.xml中的memcache配置——

```
<session_save><![CDATA[memcache]]></session_save>
<session_save_path><![CDATA[tcp://127.0.0.1:11213?persistent=0&weight=2&timeout=10&retry_interval=10]]></session_save_path> 
```

以下是memcached的grep，

```
www-data    1329     1  0 08:13 ?        00:00:00 /usr/bin/memcached -d -m 64 -p 11213 -u www-data -l 127.0.0.1
www-data  1511     1  0 08:18 ?        00:00:00 /usr/bin/memcached -d -m 64 -p 11211 -u www-data -l 127.0.0.1
www-data  1518     1  0 08:18 ?        00:00:00 /usr/bin/memcached -d -m 64 -p 11212 -u www-data -l 127.0.0.1 
```

这几天我一直在处理这个问题，我不确定是什么问题。任何帮助表示赞赏。

谢谢，G

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-04T08:32:50.797

`memcache`请注意和之间有区别`memcached`。我发现 Magento 会话集成希望您使用它：

```
<session_save><![CDATA[memcached]]></session_save> 
```

您还应该安装 PHP memcached 库。

# php - 在 PHP 中从具有动态属性名称的类中获取 const 属性

> ID：14253697
> 
> 赞同：2
> 
> 时间：2013-01-10T08:36:34.710
> 
> 标签：php, constants

```
<?php 

   class L { const C = 123; }

   $p = 'C'; 
```

我想显示`L::C`using`L`和`$p`. 我尝试如下：

```
echo L::$p;  // Fatal error: Access to undeclared static property: L::$p 
```

和

```
echo L::$$p; // Fatal error:  Access to undeclared static property: L::$C 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T08:44:56.537

您可以使用 PHP[常量（）](http://php.net/constant)函数：

```
echo constant('L::' . $p); 
```

# python - 如何进行非贪婪匹配

> ID：14253698
> 
> 赞同：0
> 
> 时间：2013-01-10T08:36:35.727
> 
> 标签：python, regex

目前我下面的正则表达式也在评论中匹配评论，例如对于下面的输入，它同时匹配 test1 和 test2 ....如何只匹配 test2？

```
import re
string="""
/*
 * devkit (c) 2012-2013, ARM-3.4\. aLL DATA conf.
 *

 *
 */
/*
 * devkit (c) 2012, ARM-3.4\. aLL DATA conf.
 *
 *
 */

#ifndef code_abc_WDI_H
#define code_abc_WDI_H
"""
text="devkit \(c\) 2012, ARM-3.4\. aLL DATA conf"

pattern = re.compile(r'/\*.*?'+ re.escape(text) + '.*?\*/', re.DOTALL)
print re.sub(pattern, "", string) 
```

输出：-

```
/*
 * devkit (c) 2012-2013, ARM-3.4\. aLL DATA conf.
 *

 *
 */

#ifndef code_abc_WDI_H
#define code_abc_WDI_H 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:43:32.033

首先，你双重转义`\(`和`\)`输入文本，所以你不匹配你的输入：

```
>>> re.escape(text)
'devkit\\ \\\\\\(c\\\\\\)\\ 2012\\,\\ ARM\\-3\\.4\\.\\ aLL\\ DATA\\ conf' 
```

重新定义`text`为：

```
text="devkit (c) 2012, ARM-3.4\. aLL DATA conf" 
```

您需要使用否定的环视来匹配任何*不是*`/*`或`*/`注释开头和结尾字符的内容：

```
pattern = re.compile(r'/\*(?:[^/]|(?<!\*)/)*?' + re.escape(text) + r'(?:[^/]|/(?!\*))*?\*/') 
```

因此，这将匹配`/*`后跟 0 个或多个不是斜线的字符（非贪婪）*，*`/`或者*它们*是斜线但前提是前面没有a `*`。在字符串的另一端，我们对`/*`模式执行相同的操作；允许使用斜杠，但前提是后面没有`*`.

不再需要`re.DOTALL`了，因为我们不再使用`.`点运算符了。

然后这可以正常工作：

```
>>> text = "devkit (c) 2012, ARM-3.4\. aLL DATA conf"
>>> pattern = re.compile(r'/\*(?:[^/]|(?<!\*)/)*?' + re.escape(text) + r'(?:[^/]|/(?!\*))*?\*/')
>>> pattern.sub("", string)
'/*\n * devkit (c) 2012-2013, ARM-3.4\. aLL DATA conf.\n *\n\n *\n */\n\n\n#ifndef code_abc_WDI_H\n#define code_abc_WDI_H\n'
>>> print pattern.sub("", input)
/*
 * devkit (c) 2012-2013, ARM-3.4\. aLL DATA conf.
 *

 *
 */

#ifndef code_abc_WDI_H
#define code_abc_WDI_H 
```

# mongodb - Mongo C# Driver OData 问题“不支持项目后的谓词在哪里”

> ID：14253699
> 
> 赞同：0
> 
> 时间：2013-01-10T08:36:37.983
> 
> 标签：mongodb, c#-4.0, asp.net-web-api, odata

请求：/api/person?$filter Name eq 'John' 带有返回 repo.GetAll().Select(o => Mapper.Map<>PersonDTO>(o)) 的服务器备份方法；

只有 $filter 请求“不支持项目后带有谓词的位置”错误，但 $top / $skip / $orderby 工作正常。我的猜测是，Mongo C# 在应用过滤器之前生成查询和项目时有一个错误。相反，它应该先应用过滤器，然后再进行项目。我正在使用 OData 5.2.0-rc1 和 Mongo C# 驱动程序是 1.7。

非常感谢任何输入。谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:36:41.210

这是当前 Linq 实现的一个限制。我们正在努力通过这张票来纠正这个问题：[https](https://jira.mongodb.org/browse/CSHARP-601) ://jira.mongodb.org/browse/CSHARP-601 。

但是，我鼓励你弄清楚你实际上想要做什么。在过滤器之前进行投影可能意味着您正在过滤计算表达式，例如将 2 列加在一起。MongoDB 查询不支持这种类型的行为，这就是我们的 linq 提供程序当前不允许这样做的原因。聚合框架在一定程度上允许这样做，但聚合框架施加了一组不同的限制。

在您的特定情况下，您希望我们做的事情是不可能的。您要求我们知道如何基于 AutoMapper 生成的对象创建 MongoDB 查询。这根本不可能，除非我们（在运行时）读取 AutoMapper 映射并将其应用于我们的内部类模型。

# graphics - 如何在unity3d中为移动物体绘制（螺旋形状）道路？

> ID：14253701
> 
> 赞同：1
> 
> 时间：2013-01-10T08:36:55.187
> 
> 标签：graphics, unity3d, game-engine

我是unity3d的新手，我想为我的游戏构建一个螺旋形状的道路我怎样才能创建一个向下的螺旋道路？有没有教程？如果可以的话，请澄清在unity3d中创建一般道路的步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T13:48:14.577

我会在 Blender 或任何您最喜欢的建模工具中创建该道路*HelixPart*的单个 360° 部分。然后将其导入 Unity。

创建一个空`GameObject`并附加一个让我们称之为`HelixRoadCreator`组件：

```
public class HelixRoadCreator : MonoBehaviour {
    public int noOfParts = 5;
    public GameObject helixPartPrefab;
    void Start () 
         Vector3 newPosition = transform.position;
         for (int i = 1; i <= noOfParts; i++) {
             GameObject part = Instantiate (helixPartPrefab, newPosition, transform.rotation) as GameObject;
             part.tranform.parent = this.gameObject.transform;
             // recalculate newPosition, something like: newPosition += i* heightOfPart
         }
    }
} 
```

现在将您导入的HelixPart*拖入*并调整`helixPartPrefab`到您想要的数字。摆弄以找出正确的高度计算参数等等。`HelixRoadCreator``noOfParts`

# ios - epub阅读器来处理大的html文件

> ID：14253702
> 
> 赞同：2
> 
> 时间：2013-01-10T08:37:08.510
> 
> 标签：ios, performance, uiwebview, epub, uipageviewcontroller

我正在IOS平台上创建一个epub阅读器。基本上，它使用 UIWebview 来显示 epub 文件，我阅读了开源 Aepubreader 的代码，发现它非常好，但不是基于文本的。我想让它像 iBooks 一样基于文本和翻页。所以我尝试改进 Aepubreader

基本逻辑流程是

1.  解压 epub 文件。
2.  解析元数据（opf，toc 文件）。
3.  通过 UIWebView 加载 html 文件并将其绑定到 UIPageViewController

除了性能，一切都很好。

假设 epub 有十个 html 文件（file1 - file10）。file1 ~ file9 很小（如 100k），但文件 10 为 1MB。当我读到 file10 的第一页时，加载这个 1MB 的文件需要花费很多时间。这是可以接受的，因为这是第一次。但是当我翻到file10的第二页时。我仍然需要再次加载这个 1MB 的文件并调用 js 以按页码滚动 offsetx。（无法根据 Apple 官方文档复制 UIWebView）。这是不可接受的。我不能让用户在打开这个文件的页面时总是等待。

最后我得到了一个避免重新加载这个大文件的解决方案。当我显示 file10 的第一页时。我将此可见视图捕获为图像，但不显示它，当我转到下一页时，我为 page1 显示此图像，同时，我将 UIwebview 从 page1 到 page2。像 Page2.view.addSubview(webviewfrompage1)。这将避免重新加载 webview 并节省时间。但是，另一个问题来了，Page2.view.addSubview(webviewfrompage1) 将导致page2 layoutsubview，这意味着page2 将重绘它的视图以显示webview 内容。这是一个1MB的文件内容，重绘还是要费时间，而且会卡住翻页动画。我搜索了很多，但仍然没有解决方案。我检查了 iBooks，它运行良好。它是如何处理大文件的？

如果您对此有任何想法，请告诉我。或其他处理 epub 显示的解决方案。

提前致谢

## -------------------------------------------------- ------------------------------------------

回复 torazaburo:

是的，你完全正确。我计划使用 window.scroll(offsetX, offsetY) 来获取下一页内容。但这还不够。我想要翻页动画就像 ibooks 一样。所以我使用 UIPageViewController。使用 UIPageViewController 意味着我必须实现以下两个委托

-(UIViewController *)pageViewController: (UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController { }

*   (UIViewController *)pageViewController: (UIPageViewController *)pageViewController viewControllerBeforeViewController: (UIViewController *)viewController{

}

在每个委托中，我需要分配一个视图控制器，重新加载 url 并将偏移量设置为正确的页面位置。所以每次翻页时，它不仅仅是为内容设置偏移量，而是分配一个新的 uiwebview 并重新加载 url 然后设置偏移量。

虎三郎，你怎么看？

# c# - 如何使用包含实体 SQL 来连接表

> ID：14253703
> 
> 赞同：0
> 
> 时间：2013-01-10T08:37:09.597
> 
> 标签：c#, entity-framework

我将尝试详细描述我的问题。我有以下情况。

1.) 我有 3 个表：business、customoffice(Custom Office) 和 cusdesc(custom office description)

关系是一个企业有customoffice，一个customoffice有很多cusdesc。

表业务有一个字段customofficeno，它是customoffice 表字段cuscode 的外键。表cusdesc 有一个字段cuscode，它是customoffice 表字段cuscode 的外键。

目标是使用实体框架选择包括定制办公室和定制办公室描述的业务。

2.) 代码

我有一个填充数据网格的程序 FillData。我的目标是显示 3 个表中的字段。我设法显示表“Business”和“Customoffice”中的数据，但我需要通过表“cusdesc”显示自定义办公室的描述，更具体的是“CSNAME”字段。

3.）我的问题是，当我包含（“CUSTOMSOFFICE.CUSDESC”）时，结果不包含表“CUSDESC”中的数据，但只有多少条记录符合标准，所以我无法访问“CSNAME”字段

以下是程序：

```
using (var _context = new ReftabEntities())
        {
            try
            {
                SetGlobalValues();

                ObjectQuery<BUSINESS> q_business = _context.BUSINESS.Where("it.BUSINESSNO=" + int.Parse(pv_businessno)).Where(string.Format("(it.BUSINESSSTART <= DATETIME'{0:yyyy-MM-dd HH:mm}') and (it.BUSINESSCLOSED >= DATETIME'{0:yyyy-MM-dd HH:mm}')", pv_date)).Include("CUSTOMSOFFICE").Include("CUSTOMSOFFICE.CUSDESC");

                gvBusinessList.Caption = "Total records selected: " + q_business.Count();
                gvBusinessList.DataSource = q_business;
                gvBusinessList.DataBind();
            }
            catch (Exception e)
            {
                errorPopup.Text = e.Message;
                errorPopup.ShowOnPageLoad = true;
            }
            finally
            {
                _context.Dispose();
            }
        }
    } 
```

你能告诉我我做错了什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:12:51.767

Include 运算符只是要求 EF 使用查询加载相关实体。如果不使用“Include”，EF 只会提取 BUSINESS 的属性，不会提取 CUSTOMSOFFICE 的属性。不需要“Include("CONSOMSOFFICE.CUSDESC")”，因为您已经在第一个 Include 中加载了整个 CUSTOMSOFFICE 实体。

我看到您将结果绑定到网格视图，如果我理解正确，问题是网格视图中没有显示“CUSTOMSOFFICE.CUSDESC”。我相信这是因为 gridview 试图呈现其对“CUSTOMSOFFICE”对象本身的表示，因为这是您要绑定的项目的直接属性。为了更好地控制网格视图的“列”，我建议使用 LINQ 将查询结果转换为您明确想要显示的内容。

我假设 BUSINESSNO、BUSINESSSTART 和 BUSINESSCLOSED 是您的业务实体本身的属性，而 BUSINESSNO 是主键。让我将您的查询重写为：

```
var q_business = _context.BUSINESS.Include(b=>b.CUSTOMSOFFICE)
                          .Where(p => p.BUSINESSNO == int.Parse(pv_businessno)
                                      && p.BUSINESSSTART <= DateTime.Parse(pv_date)
                                      && p.BUSINESSCLOSED >= DateTime.Parse(pv_date) )
                          .FirstOrDefault(); 
```

此查询将提取与给定 pv_businessno 匹配并符合您的日期条件的业务详细信息（包括相关的 CUSTOMSOFFICE 详细信息）。但是您还不能将它绑定到您的 gridview，因为您可能会遇到不显示 CUSTOMSOFFICE.DESC 的相同问题。为确保正确显示，您必须确定要包含的属性。例如，如果您只想显示以下属性集：

1.  BUSINESS.BUSINESSNO
2.  BUSINESS.BUSINESSNAME
3.  BUSINESS.CUSTOMSOFFICE.CUSCODE
4.  商务.海关.CUSDESC

您应该将输出转换为显式并立即包含这些属性。

```
var q_business = _context.BUSINESS.Include(b=>b.CUSTOMSOFFICE)
                          .Where(b => b.BUSINESSNO == int.Parse(pv_businessno)
                                      && b.BUSINESSSTART <= DateTime.Parse(pv_date)
                                      && b.BUSINESSCLOSED >= DateTime.Parse(pv_date) )
                          .Select(b => new {BusinessNo = b.BUSINESSNO,
                                            BusinessName = b.BUSINESSNAME,
                                            CustomsOfficeCode = b.CUSTOMSOFFICE.CUSCODE,
                                            CustomsOfficeDesc = b.CUSTOMSOFFICE.CUSDESC } ) //This Select statement creates a new anonymous type that has Businessno, BusinessName, CustomsOfficeCode, and CustomsOfficeDesc properties
                          .FirstOrDefault(); 
```

当您将此绑定到您的网格视图时，它应该能够显示 CUSDESC 属性的值。

# c++ - std::thread Visual Studio 2012 警告

> ID：14253704
> 
> 赞同：6
> 
> 时间：2013-01-10T08:37:15.233
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012, stdthread

我正在尝试了解如何使用 Visual Studio 2012 使用新的 std::thread。我正在尝试编译以下代码。

```
#include <iostream>
#include <thread>

class scoped_thread
{
    std::thread t_;

public:

    explicit scoped_thread(std::thread & t): t_(std::move(t))
    {
        if(!t_.joinable())throw std::logic_error("No thread");
    }

    ~scoped_thread()
    {
        t_.join();
    }

private:

    scoped_thread(scoped_thread const &);
    scoped_thread & operator=(scoped_thread const &);
};

struct local_functor
{
    int& i_;

    local_functor(int & i):i_(i){}

    void operator()()
    {
        while(i_ < 1e5)i_++;        
    }
};

// can potentially throw exceptions
void callAnotherFunc()
{
    std::cout << "this function can throw an exception" << std::endl;   
    // try (un)commenting the line below and see the behaviour
    throw std::out_of_range("WTF2");
}

int main()
{
    int some_local_state =  0;

    try
    {   
        scoped_thread t(std::thread(local_functor(some_local_state)));
        callAnotherFunc();

        std::cout << "Proper exit of function" << std::endl;
    }
    catch(const std::exception & e)
    {
        std::cout << e.what() << " exception occurred!" << std::endl;
    }
    catch(...)
    {
        std::cout << "Unhandled exception!" << std::endl;
    }

    return 0;
} 
```

我收到一条警告，上面写着警告 C4930: 'scoped_thread t(std::thread (__cdecl *)(local_functor))': 未调用原型函数（是否打算定义变量？）

是的，这是一个预期的变量定义。我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T08:44:31.203

警告告诉您，try 块中的第一行被解析为函数声明。如果您使用 C++03 初始化样式，有时会发生这种情况。改用统一初始化：

```
scoped_thread t{std::thread{local_functor{some_local_state}}}; 
```

此外，您`&`在 scoped_thread 构造函数中缺少：

```
explicit scoped_thread(std::thread && t): t_(std::move(t))
//                                 ^-- use r-value ref 
```

PS：如果您的编译器不支持统一初始化，请将初始化程序包装到另一对括号中：`scoped_thread t((std::thread(local_functor(some_local_state))));`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-10T08:39:46.430

你偶然发现[了最令人烦恼的解析](http://en.wikipedia.org/wiki/Most_vexing_parse)。

您可以使用[统一的初始化](http://en.wikipedia.org/wiki/C%2B%2B11#Uniform_initialization)语法来解决它：

```
scoped_thread t{std::thread(local_functor(some_local_state))}; 
```

# java - Android 共享 Intent 共享图像不存在

> ID：14253708
> 
> 赞同：1
> 
> 时间：2013-01-10T08:37:40.167
> 
> 标签：java, android, android-intent

我正在尝试共享使用共享意图保存到内部存储的图像文件。在我打算不显示图像文件之后。

我使用以下代码保存图像文件

```
try {
    FileOutputStream fos = openFileOutput("twitterimage.jpg", Context.MODE_PRIVATE);
    // Writing the bitmap to the output stream
    bikeBm.compress(Bitmap.CompressFormat.JPEG, 100, fos);
    fos.close();
} catch (Exception e) {
    Log.e("saveToInternalStorage()", e.getMessage());
} 
```

//意图代码

```
File internalFile = getFileStreamPath("twitterimage.jpg");
Uri uri = Uri.fromFile(internalFile);

Intent shareIntent = new Intent();
shareIntent.setAction(Intent.ACTION_SEND);
shareIntent.putExtra(Intent.EXTRA_STREAM,new File(uri));
shareIntent.setType("image/jpeg");
shareIntent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
startActivity(Intent.createChooser(shareIntent, "send")); 
```

当我使用上面的“uri”检查文件存在时，图像文件存在于内部存储中，但使用检查文件

```
String file = "data/data/com.bike.app/twitterimage.jpg";
File f = new File(file); 
```

显示文件不存在。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:54:05.070

如果我猜对了，您想在应用程序之间共享图像。您的问题是您`Context.MODE_PRIVATE`在编写文件时使用，因此其他应用程序无法访问该文件。

要共享图像，您可以使用[MediaProvider](http://developer.android.com/reference/android/provider/MediaStore.html)限制对您的媒体的访问或仅使用`Context.MODE_WORLD_READABLE`但该文件将是公共可读的。

希望有帮助

# iphone - HTML 代码在 String iOS 中消失

> ID：14253709
> 
> 赞同：0
> 
> 时间：2013-01-10T08:37:44.380
> 
> 标签：iphone, html, ios, xcode, string

我正在`XML`使用来自 URL 的 RSS 解析文件。在 中`XML`，有一个标签作为描述。

```
<description>
<![CDATA[
<img width="150" height="150" src="http://www.ipadia.co/wp-content/uploads/2012/02/sayfada-bul-150x150.png" class="attachment-thumbnail wp-post-image" alt="sayfada bul" title="sayfada bul" />Yine çok kişinin dikkatinden kaçan ama faydalı bir araç Bulunduğunuz sayfada arama yapmak bazen çok gerekli olabiliyor Bunun için google arama tabınıkullanacağız Google aramatab ına tıklayin Resimdeki gibi Arama listesinin sonunda bu sayfada bul çıkacak Arama yapmak istediğiniz kelimeyi yazın &#8230; <a href="http://www.ipadia.co/bulundugunuz-sayfada-arama-yapmak/">Continue reading <span class="meta-nav">&#8594;</span></a>
]]>
</description> 
```

我将此代码用作`NSString`. 如您所见，描述标签的开头有一个图片链接。我想从此字符串中获取图像链接。但是当我解析这个时，它只给我文本，而不是 HTML 代码。当我用 写这个时`NSLog`，我看不到其中的图像链接。简而言之，`Xcode`不给我字符串中的 HTML 代码。

我尝试加载此代码，`UIWebView`假设它可以显示图像。但是图像也没有显示在 WebView 中。只显示了文本。

当我在浏览器中查看 RSS 时，我可以看到其中的图像代码，但在 Xcode 中，我看不到 HTML 代码，它只是给了我纯文本。我怎么解决这个问题？

非常感谢。

编辑：我认为这`CDATA`可能会导致问题。我该如何挑战呢？

这些是我的`XMLParser`方法。

```
 -(void) parser: (NSXMLParser *) parser didStartElement: (NSString *) elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict

{

    if([elementName isEqualToString:@"channel"])
        if (!ItemA)
        {
            ItemA = [[NSMutableArray alloc] init];
        }

    if([elementName isEqualToString:@"item"]){
        // NSLog(@"ITEM OLUŞTURULDU.");
        anItem= [[Item alloc] init];
    }

}

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{

    if (!currentElementValue)

        currentElementValue = [[NSMutableString alloc] initWithString:string];

    else

        [currentElementValue appendString:string];

    // NSLog(@"PRCOSSING VALUE :%@", currentElementValue);
}

-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{

    if([elementName isEqualToString:@"channel"])
        return;

    if ([elementName isEqualToString:@"item"])
    {
        // NSLog(@"qqqqqq:%@", anItem.title);

        [ItemA addObject:anItem];

        counter++;

        // NSLog(@"kkk:%i", ItemA.count);
        // NSLog(@" -*-*-*-*-* COUNTER: %d",counter);
        anItem = nil;
        return;
    }
    if ([elementName isEqualToString:@"title"])
    {
        anItem.title=currentElementValue;
        // NSLog(@"kkk-title:%@", anItem.title);
    }
    if ([elementName isEqualToString:@"description"])
    {
        anItem.description=currentElementValue;
        // NSLog(@"kkkkkk-desc:%@", anItem.description);
    }
    if ([elementName isEqualToString:@"link"])
    {
        anItem.link=currentElementValue;
        // NSLog(@"kkkkkk-link:%@", anItem.link);
    }
    if ([elementName isEqualToString:@"pubDate"])
    {

        anItem.pubDate=currentElementValue;
        // NSLog(@"kkkkkk-pubdate:%@", anItem.pubDate);
    }
    if ([elementName isEqualToString:@"category"])
    {

        anItem.category=currentElementValue;
        // NSLog(@"kkkkkk-category:%@", anItem.category);
    }

    currentElementValue = nil;
} 
```

# java - 从另一个 jar 将组件添加到 JPanel

> ID：14253713
> 
> 赞同：1
> 
> 时间：2013-01-10T08:37:53.237
> 
> 标签：java, swing, user-interface, jar, executable-jar

我 4 个月前开始通过 Java 编写应用程序，昨天我遇到了异常：我的代码太大了。在 Visual Studio 和 c# 中不是这样。

如何使用更多 jar 文件制作应用程序？

我需要大约 25 个面板 ( `JPanel`)，其中包含其他组件。如何在罐子中分别制作它们（面板），然后将面板包含到我的主应用程序中？

如何将参数移入或移出 jar？

对不起我的英语，我希望我的问题很清楚，你明白我的意思。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:17:24.167

它似乎在 void initComponents() 方法中。您正在初始化 25 个面板并添加组件。我的建议是找出 urs 面板中的常见行为。识别后创建一个扩展 Jpanel 的类。在扩展的 Jpanel 中实现常见行为。所以，所有 japanel 都共享它。如果你想使用 jpanel 特定的行为，请使用 super()。如果你想使用常见的特定行为，如布局、颜色和更多东西，请从 common 中使用它。它将帮助你很多代码重复和更多管理。为面板创建单独的内部类，或者您可以使用扩展 Jpanel 的单独类。希望它对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T09:04:35.610

我认为这样做没有问题。25 J 面板更难维护吗？您可以根据自己的要求将其分成不同的封装结构。请您介绍一下您的面板结构。它们是否具有共同的行为。您使用的是 Swing 面板还是扩展面板？

# .net - 在锚标签中返回一个 div

> ID：14253717
> 
> 赞同：0
> 
> 时间：2013-01-10T08:38:06.710
> 
> 标签：.net, html, tabs, asp.net-mvc-4, anchor

我想知道是否可以在 mvc 4 中以以下形式返回 div，而不是锚标记中的完整/部分视图：

```
<div id="tabs">
        <ul>
            <li><a href="#div1" id="tab1">div1</a></li>
            <li><a href="#div2" id="tab2">div2</a></li>
        </ul>
</div>

    <div id="div1">
        Content of div1
    </div>
    <div id="div2">
        Content of div2
    </div> 
```

如果有这个方法，请告诉我怎么做，如果没有，我只好回到绘图板上。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:16:41.083

我认为您可以为此目的使用 JQueryUI 选项卡。

[http://jqueryui.com/tabs/](http://jqueryui.com/tabs/)

# android - 突出显示 PDF 上的文本

> ID：14253719
> 
> 赞同：12
> 
> 时间：2013-01-10T08:38:11.553
> 
> 标签：android, pdf, android-ndk, mupdf

我已经正确编译了[MuPDF](http://www.mupdf.com/)，并且能够毫无问题地运行示例应用程序，但是：

**问题**

我想有一个功能`highlights,underlines, sticky notes, arrows, lines, ovals, rectangles, freehand drawings and text boxes on which user long pressed by his finger`，如[RepliGo PDF Reader](https://play.google.com/store/apps/details?id=com.cerience.reader.app&feature=search_result) pdf reader 和其他。

我搜索了很多，但没有找到任何相关的方式、链接或提示来实现所需的功能。

有人可以分享有关如何实现上述功能的任何想法吗？
如果有人可以通过分享一些代码或示例来解释它会更有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-06T17:20:50.033

由于 MuPdf 没有为您需要的功能公开 api，我建议使用适用于 android 的 PDFTron sdk 库。

正如您在他们的文档页面上看到的，它支持许多与注释相关的 pdf 功能：

> 用于快速开发的即用型工具——包括对文本选择、全文搜索等高级功能的支持；链接; 书签导航和操作；互动形式；各种注释功能以启用 PDF 标记（文本突出显示、下划线、删除线、波浪线、直线、矩形、椭圆、箭头、便笺和手绘工具模式等）。

[http://www.pdftron.com/pdfnet/mobile/android_pdf_library.html](http://www.pdftron.com/pdfnet/mobile/android_pdf_library.html)

# html - html表格边框存在

> ID：14253722
> 
> 赞同：0
> 
> 时间：2013-01-10T08:38:18.640
> 
> 标签：html, border, html-table

嘿，我有一个小问题，我已经设置

```
border: none;
border-width: 0px;
border-spacing: 0px;
border-collapse: collapse;
padding: 0px;
margin: 0px; 
```

对于table，td和tr，但是tr节点之间仍然存在1px的边框。

html代码：

```
<table>
  <tr>
    <td>
      <a href='url'> some text </a>
    </td>
    <td>
      <a href='url'> some text </a>
    </td>
  </tr>
</table> 
```

因为我已经设置

```
display: block;
color: white;
font-size: 13px;
text-decoration: none;
height: 24px;
padding: 9px 19px 1px;
font-weight: 600;
text-align: center; 
```

将填充更改为 0，不给出任何结果。

有什么解决办法吗？

浏览器：最后一个chrome，firefox。

操作系统 MAC 操作系统 10.8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:47:02.420

您需要`border-collapse: collapse;`输入表格样式和`border-spacing: 0px; padding: 0px;`单元格。请参阅下面的示例代码。

```
<!DOCTYPE html>
<html>
    <head>
    <meta charset="UTF-8">

    <style>
        table {border-collapse: collapse;}
        table tr {}
        table td {border-spacing: 0px; padding: 0px;}
    </style>

</head>
<body>

    <table>
       <tr>
          <td>
             <a href='url'> some text </a>
          </td>
          <td>
             <a href='url'> some text </a>
          </td>
       </tr>
    </table>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:42:36.693

尝试使用：

```
border-style: none; 
```

请注意，这在某些版本的 IE 中不起作用。IE9 很好，但在以前的版本中，即使样式为“无”，它也会显示边框

```
border: 0; 
```

似乎适用于所有浏览器...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T09:00:59.207

我认为你的代码是正确的？

这是你想看的吗？

![这是你想要的吗？](../Images/0475820c930963a8488b433edd4eed38.png)

环境

```
border-collapse:collapse;
border:none; 
```

足够的..

# ios - iOS phonegap 2.3没有用于cordovaframework的dmg文件？

> ID：14253723
> 
> 赞同：2
> 
> 时间：2013-01-10T08:38:19.493
> 
> 标签：ios, cordova

目前我正在尝试使用 2.3.0 版的最新 phonegap 包，使用创建脚本创建了 cordova 项目，这创建了 cordova 项目，但是它在项目中添加了整个 cordova 代码，这增加了我的代码大小并且可能会构建大小也是。我的问题是我在哪里可以找到一个 dmg 文件来安装cordova。如何使用 phonegap 2.3.0 包安装cordova。这样我就可以在我的 xcode 项目中使用它作为框架，因为它是低于 2.0 版本的（电话差距）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T18:44:11.090

从 2.0 版开始，没有用于 Cordova/Phonegap 的 .dmg 文件或安装程序。您下载的最新 zip 文件有几个文件夹对应于 Phonegap 支持的每个平台。

每个文件夹都有一个“create”文件（在“bin”文件夹内），用于创建移动平台项目（例如：ios/bin/create 创建一个 xcode 项目）。

Phonegap 网站为每个平台提供了非常详细的“入门指南”（http://docs.phonegap.com/en/2.3.0/guide_getting-started_index.md.html）。它可能看起来很复杂，但是一旦您尝试并成功，它就会非常简单:)

没有比这个网站更好的起点了。

# python - 在 Python 中隐式创建类

> ID：14253730
> 
> 赞同：0
> 
> 时间：2013-01-10T08:38:52.363
> 
> 标签：python, python-2.7

我有一个函数，它的工作是根据传递函数的给定名称隐式生成一个 python 类。之后，我也想为生成的类隐式创建字段和方法。我不知道如何启动它。有人可以帮忙吗...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T08:48:52.100

你真的需要上课吗？对于在运行时创建的“类型”，也许 namedtuple 将是一个解决方案。

```
from collections import namedtuple
MyType= namedtuple("MyType", "field1 method1")
x = MyType(field1="3", method1=lambda x: x+1)
print x.field1, x.method1(3) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T08:46:33.140

您可以尝试使用以下方法`type()`：

```
def my_func(self):
    return 'my_func to become my_method!'

def class_maker(name,**kwargs):
    return type(name, (object,), kwargs)

A = class_maker('MyClass',my_method=my_func, field='this is my_field!')
inst = A()

print inst.my_method()
print inst.field
print inst
print A 
```

输出：

```
my_func to become my_method!
this is my_field!
<__main__.MyClass object at 0x962902c>
<class '__main__.MyClass'> 
```

# asp.net - 如何在 VS2010 中使用“DevExpress v10.2”？

> ID：14253733
> 
> 赞同：0
> 
> 时间：2013-01-10T08:39:19.023
> 
> 标签：asp.net

如何在 VS2010 中使用“DevExpress v10.2”？以及需要在 webconfig 文件中添加什么参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:11:06.673

您需要引用项目中的程序集。您还需要在 web.config 中包含以下部分

```
<httpModules>
<add type="DevExpress.Web.ASPxClasses.ASPxHttpHandlerModule, DevExpress.Web.v10.2, Version=10.2.x.x, Culture=neutral, PublicKeyToken=b88d1754d700e49a" name="ASPxHttpHandlerModule"/>
</httpModules>

<system.webServer>
    <modules>
        <add type="DevExpress.Web.ASPxClasses.ASPxHttpHandlerModule, DevExpress.Web.v10.2, Version=10.2.x.x, Culture=neutral, PublicKeyToken=b88d1754d700e49a" name="ASPxHttpHandlerModule"/>
    </modules>
</system.webServer> 
```

# javascript - 单击 Windows mobile 中的绝对 DIV 触发单击基础元素

> ID：14253734
> 
> 赞同：1
> 
> 时间：2013-01-10T08:39:19.700
> 
> 标签：javascript, css, windows-phone-7, windows-phone

我有一个绝对位置宽度高度和宽度为 100% 的叠加 DIV。但是，当我单击覆盖 DIV 时，会在覆盖 DIV 的基础元素上发生单击。叠加 DIV 样式如下所示

```
 .overlayDIV{
     absolute : absolute;
     height : 100%;
     width : 100%;  
     z-index : 1234;       
 } 
```

我怎样才能防止这种情况......？此问题仅存在于 Windows mobile

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T08:42:10.373

您可以停止事件的传播：

JavaScript：

```
document.getElementById('divId').onclick = function (event) {
    event.preventDefault();
    event.stopPropagation();
} 
```

jQuery：

```
$('#divId').click(function (event) {
    event.preventDefault();
    event.stopPropagation();
}); 
```

此外，如果您在页面下方的 mousedown 上有一些处理程序，则需要从覆盖 div 中取消 mousedown（相同的代码，但用于 mousedown 处理程序）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-15T20:48:44.070

我在 IE 10 但不是 11 中遇到过这种情况，我的解决方案是将以下 CSS 规则添加到叠加层：

```
background:rgba(0,0,0,0); 
```

# entity-framework - 如何有效利用asp.net mvc4中的域驱动开发？

> ID：14253736
> 
> 赞同：5
> 
> 时间：2013-01-10T08:39:22.810
> 
> 标签：entity-framework, design-patterns, asp.net-mvc-4, domain-driven-design

我想使用不同的不同方法在 ASP.NET MVC4 上启动新应用程序，如域驱动开发、设计模式、依赖注入、实体框架作为 ORM 等。

需要一些关于什么应该是开发起点的建议？我应该从类的第一个关系开始还是从传统方法开始？例如，有三个模块。

1.  用户管理。
2.  记录。
3.  错误记录。

我是否应该首先完成域类之类的用户管理，然后是其服务，然后是实际 Web 应用程序中的 CRUD 操作？之后......将从日志记录开始（与用户管理中提到的过程相同）。然后在错误记录中也是如此。

那么使用这些概念或工具开始开发的最佳实践是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-10T08:47:20.030

ASP.NET MVC4 只是解决方案的一个演示部分。使用域驱动方法，您从域开始（通常是单独的库项目），然后添加演示文稿（网站、桌面应用程序等）和持久性（在您的域中声明的存储库和 uof 接口的实现）。

因此，您从创建域模型开始（不是整个，而是其中的一部分）。然后以任何顺序创建使用域模型的 UI，并实现存储库以通过 Entity Framework 持久化域模型。实际上视图应该使用 ViewModels（否则你的 POCO 域对象将被数据注释属性和其他东西污染）。这是一个控制器部分，您将在其中使用域模型。您还将通过依赖注入将存储库实现注入控制器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-10T08:53:54.197

我将从查看系统的业务功能需求开始，并首先关注最高价值的需求。根据交付需求，实施这些，根据需要填写您的业务领域。如果您遵循 BDD 风格的流程，您可以使用单元测试来驱动业务功能，并且您的领域将随着业务需求的发展而发展。每个业务需求都应该有一个 UI 和数据访问组件，以便您可以随着域的发展使用实体框架填写表示层和数据访问层。以下是一些关于 BDD 的有用帖子：

*   [BDD 示例](http://www.ryangreenhall.com/articles/bdd-by-example.html)
*   [介绍 BDD](http://dannorth.net/introducing-bdd/)

# android - 从android中的纬度和经度获取城市名称导致服务不可用Android 4.0.3？

> ID：14253737
> 
> 赞同：3
> 
> 时间：2013-01-10T08:39:26.877
> 
> 标签：android, location, geocode, city

我在应用程序中使用的是 Android 4.0.3 版本。现在我想从**LATITUDE**和**LONGITUDE**获取城市名称或其他信息， 但是当我运行应用程序时显示服务不可用。

**日志猫**

```
 01-10 13:58:29.279: W/System.err(1211): java.io.IOException: Service not Available
    01-10 13:58:29.289: W/System.err(1211):     at android.location.Geocoder.getFromLocation(Geocoder.java:136)
    01-10 13:58:29.299: W/System.err(1211):     at com.example.vixxa.VisitorActivity$CityAsyncTask.doInBackground(VisitorActivity.java:601)
    01-10 13:58:29.319: W/System.err(1211):     at com.example.vixxa.VisitorActivity$CityAsyncTask.doInBackground(VisitorActivity.java:1)
    01-10 13:58:29.329: W/System.err(1211):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
    01-10 13:58:29.329: W/System.err(1211):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
    01-10 13:58:29.339: W/System.err(1211):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
    01-10 13:58:29.349: W/System.err(1211):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
    01-10 13:58:29.349: W/System.err(1211):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
    01-10 13:58:29.359: W/System.err(1211):     at java.lang.Thread.run(Thread.java:856) 
```

**CodeAsynctak.java**

```
public class CityAsyncTask extends AsyncTask<String , String,String>
    {

        @Override
        protected String doInBackground(String... params) {

             Geocoder geocoder = new Geocoder(VisitorActivity.this, Locale.getDefault());
                try
                {
                    List<Address> addresses = geocoder.getFromLocation(latitude, longitude, 1);
                    Log.e("Addresses","-->"+addresses);

                }
                catch (IOException e)
                {
                    e.printStackTrace();

                }

            return null;
        }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T13:39:54.270

尝试使用此代码，它适用于我的 TAB2。

```
public class CityAsyncTask extends AsyncTask<String , String,String>
{

    @Override
    protected String doInBackground(String... params) {

         Geocoder geocoder = new Geocoder(LatLongActivity.this, Locale.getDefault());
            try
            {
                List<Address> addresses = geocoder.getFromLocation(latitude, longitude, 1);
                Log.e("Addresses","-->"+addresses);
                result = addresses.get(0).toString();
            }
            catch (IOException e)
            {
                e.printStackTrace();
            }
        return result;
    }
    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        AlertDialog.Builder alert = new AlertDialog.Builder(LatLongActivity.this);
        alert.setTitle("ADDRESS");
        alert.setMessage(result);
        alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener(){
            @Override
            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub
                dialog.dismiss();
            }
        });
        alert.setCancelable(false);
        alert.show();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T09:24:41.087

尝试以下我在我的应用程序中使用过的代码：

```
Geocoder geocoder = new Geocoder(this, Locale.ENGLISH);

        try {
            List<Address> addresses = geocoder.getFromLocation(LATITUDE, LONGITUDE, 1);

            if(addresses != null) {
                Address returnedAddress = addresses.get(0);
                StringBuilder strReturnedAddress = new StringBuilder("Address:\n");
                for(int i=0; i<returnedAddress.getMaxAddressLineIndex(); i++) {
                    strReturnedAddress.append(returnedAddress.getAddressLine(i)).append("\n");
                }
                myAddress.setText(strReturnedAddress.toString());
            }
            else{
                myAddress.setText("No Address returned!");
            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            myAddress.setText("Can not get Address!");
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T09:14:43.417

很可能您的项目的构建目标是`Android 4.0`而不是`Google APIs`. 在`Eclipse`中，右键项目并选择属性，进入Android，选择`Google APIs`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-21T12:57:33.407

解决***服务不可用***错误

将此行作为清单中的直接子项添加到应用程序

`<uses-library android:name="com.google.android.maps"/>`

像这样更新你的清单

```
<application
        android:name="pkgname"
        android:allowBackup="true"
        android:label="@string/app_name"
        android:largeHeap="true"
        android:theme="@style/AppTheme" >
        <uses-library android:name="com.google.android.maps" />

        <activity
            android:name=".yourlaunchingactivity"
            android:label="@string/app_name"
            android:launchMode="singleTop"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
   <activity
             .......
     </activity>
   <activity
             ......
       </activity>
</application> 
```

# doctrine-orm - 如何在学说2中使用 GroupBy 子句

> ID：14253738
> 
> 赞同：0
> 
> 时间：2013-01-10T08:39:29.653
> 
> 标签：doctrine-orm, symfony-2.1

如何将以下查询转换为教义2查询

```
with using method createQuery() or createQueryBuilder()

select customer,sum(marks) from BlogBundle:Customers group by customer 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:00:07.210

```
$qb->select('customer', 'SUM(marks)')->from('BlogBundle:Customers', 'customer')->groupBy('customer.id'); 
```

# c# - 串口返回无效数据

> ID：14253739
> 
> 赞同：1
> 
> 时间：2013-01-10T08:39:34.670
> 
> 标签：c#, .net, encoding, serial-port

我有一台称重机，它使用串行端口连接到计算机。这是一台非常古老的机器，我们正试图减轻它的重量并保存在数据库中。
机器返回的重量有一些无效字符，如`?`，重量显示为`??2?0`，应该在哪里`02220`。

我知道这与网络搜索结果中的编码有关。但我无法弄清楚我到底错过了什么。

这是我的代码：

```
private void port_DataReceived(object sender, SerialDataReceivedEventArgs e)
{
    // This method will be called when there is data waiting in the port buffer
    // Read all the data waiting in the buffer
    // string data = comport.ReadExisting();
    // Display the text to the user in the Rich Text Box
    Log(LogMsgType1.Incoming, s); 
}

public void OpenThisPort()
{
    bool error = false;

    // If the port is open, close it
    if (comport.IsOpen)
    {
        comport.Close();
    }
    else
    {
        comport.BaudRate = int.Parse("1200");
        comport.DataBits = int.Parse("8");
        comport.StopBits = StopBits.One;
        comport.Parity = Parity.None;
        comport.PortName = "COM1";
        delStart = 0;
        delLength = 9;
        comport.RtsEnable = true;
        comport.DtrEnable = true;
        comport.Encoding = System.Text.Encoding.GetEncoding(28591);
    } 
```

如何准确确定将应用哪种编码？知道我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T09:14:42.203

它可能不是编码问题，而是硬件错误。尝试检测它：

```
 #region comPort_ErrorReceived
    /// <summary>
    /// This method will be called when there's data waiting in the buffer
    ///  and error occured.
    /// DisplayData is a custom method used for logging
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    void comPort_ErrorReceived(object sender, SerialErrorReceivedEventArgs e)
    {
        SerialError sr = e.EventType;
        switch (sr)
        {
            case SerialError.Frame:
                DisplayData(newLog, EventLogEntryType.Error, "On port " + comPort.PortName
                    + " the hardware detected a framing error.\n", 45);
                break;
            case SerialError.Overrun:
                DisplayData(newLog, EventLogEntryType.Error, "On port " + comPort.PortName
                    + " a character-buffer overrun has occurred. The next character is lost.\n", 46);
                break;
            case SerialError.RXOver:
                DisplayData(newLog, EventLogEntryType.Error, "On port " + comPort.PortName
                    + " an input buffer overflow has occured. There is either no room in the input buffer,"
                    + " or a character was received after the End-Of-File (EOF) character.\n", 47);
                break;
            case SerialError.RXParity:
                DisplayData(newLog, EventLogEntryType.Error, "On port " + comPort.PortName
                    + " the hardware detected a parity error.\n", 48);
                break;
            case SerialError.TXFull:
                DisplayData(newLog, EventLogEntryType.Error, "On port " + comPort.PortName
                    + " the application tried to transmit a character, but the output buffer was full.\n", 49);
                break;
            default:
                DisplayData(newLog, EventLogEntryType.Error, "On port " + comPort.PortName
                    + " an unknown error occurred.\n", 50);
                break;
        }
    } 
```

乍一看，它看起来像框架错误，因为部分数据似乎是正确的。对于初学者，请确保您的电缆是好的。您也可以尝试使用其他应用程序（例如腻子）连接到您的设备。

同样将数据读取为字节可能是一个好主意（然后您可以在显示之前将其转换为十六进制）。通过这种方式，您将了解实际发送的内容。

```
private void port_DataReceived(object sender, SerialDataReceivedEventArgs e)
{
int btr = comPort.BytesToRead;
byte[] comBuffer = new byte[btr];
comPort.Read(comBuffer, 0, btr);
Console.WriteLine(ByteToHex(comBuffer));
}

private string ByteToHex(byte[] comByte)
        {
            StringBuilder builder = new StringBuilder(comByte.Length * 3);
            foreach (byte data in comByte)
                builder.Append(Convert.ToString(data, 16).PadLeft(2, '0').PadRight(3, ' '));
            return builder.ToString().ToUpper();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T06:00:56.823

我遇到了同样的问题。尝试将 DataBits 更改为**7**并将 Parity 更改为**Parity.Even**，然后它应该可以工作。

# sql - 在 Informix 的“IN”中使用字符串值

> ID：14253743
> 
> 赞同：1
> 
> 时间：2013-01-10T08:39:45.543
> 
> 标签：sql, informix

在 Informix 的数据库表中，我有这样的列：

表名是`MYTABLE`

**钥匙** `1234`

**价值** `'POCO','LOCD',MACD'`

现在我想在这样的查询中使用它

```
select * from table where symbol in (select value from MYTABLE where key='1234'); 
```

但是此查询不起作用，因为值存储为 char 和

的输出`select value from MYTABLE where key='1234'`将类似于

```
"'POCO','LOCD',MACD'" 
```

有没有办法使这项工作。我想在一个查询中实现这一点。

请提出更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T11:31:05.460

你不能像这样插入值。不能期望数据库优化器知道`value`将返回一个看起来像列表的字符串，该字符串将在列表上下文中进行解释。

既然你要求更好的方法……</p>

这种设计打破了许多关于如何构建数据库的基本规则。至少，“值”列应该是一种`COLLECTION`数据类型，以便正确阐明其作为值列表的作用。我个人会创建一个标准的关系桥接表：

```
MYTABLE
key  col1 col2
1234 ..   .. 

MYVALUE
key  value
1234 POCO
1234 LOCD
1234 MACD 
```

这不是其他人建议的简单方法，但它是*正确*的答案。

# php - 从 Ajax 搜索中获取 PHP 中的 Google 引用链接

> ID：14253753
> 
> 赞同：0
> 
> 时间：2013-01-10T08:40:17.857
> 
> 标签：php, ajax

我在 PHP 中记录了我网站的所有推荐人，这总是很有效。现在我注意到今天有很多来自谷歌基础域的推荐人，比如[https://www.google.com](https://www.google.com)

当然，该首页没有指向我网站的链接，因此我开始进行一些研究。

我用这个来记录推荐人：`$_SERVER['HTTP_REFERER']`大多数情况下都可以正常工作。

但是在 Google Chrome 中，使用新的标准 Google Ajax 页面，它不再显示完整的推荐链接。

所以不要显示这个：

> [https://www.google.com/#hl=en&safe=off&output=search&sclient=psy-ab&q=this+is+a+query&oq=this+is+a+query&gs_l=hp.3..33i29l4.19228.20509.0.21050。 15.12.0.2.2.3.204.1289.7j4j1.12.0.les%3B..0.0...1c.1.WZ-VpIRpJ0o&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&bvm=bv.1357700187,d .d2k&fp=4af21ea2c089d08b&biw=1920&bih=922](https://www.google.com/#hl=en&safe=off&output=search&sclient=psy-ab&q=this+is+a+query&oq=this+is+a+query&gs_l=hp.3..33i29l4.19228.20509.0.21050.15.12.0.2.2.3.204.1289.7j4j1.12.0.les%3B..0.0...1c.1.WZ-VpIRpJ0o&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&bvm=bv.1357700187,d.d2k&fp=4af21ea2c089d08b&biw=1920&bih=922)

表明

> [https://www.google.com/](https://www.google.com/)

在我的推荐日志中。

无论如何，当执行那些 Ajax 类型的 Google 搜索时，我仍然可以获得完整的推荐链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:53:02.073

从 2012 年 4 月起，随着搜索引擎切换到“引荐来源”元标记来处理来自自然搜索结果的引荐网址，您可以期待更快地从 Google 搜索结果中获得点击。该功能仅在支持它的浏览器中可用（例如 Chrome）[1](http://dejanseo.com.au/google-to-change-http-referrer/)。

https

网站管理员将开始将 Google 主页视为来源引荐来源网址和通过 SSL 获得的自然流量来源。refrecne：[谷歌更改 HTTP 引荐来源网址](http://dejanseo.com.au/google-to-change-http-referrer/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-05-17T15:57:06.380

[我还认为，从 2012 年开始，随着搜索引擎切换到引荐来源元标记： 1](http://lioa.net)来处理来自自然搜索结果的引荐 URL，您可以期望从 Google 搜索结果中看到更快的点击。

# rest - 在 RESTful URI 中包含电子邮件

> ID：14253758
> 
> 赞同：3
> 
> 时间：2013-01-10T08:40:51.997
> 
> 标签：rest, restful-url

在我的应用程序中，我的 URI 包含用于识别用户私有资源的用户 ID。用户 ID 是电子邮件，例如：

```
/users/user2@example.com/private-resource 
```

将电子邮件放在 URI 中是一个很好的做法，包括`.`和`@`？还是我应该使用其他类型的用户 ID？例如哈希？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T08:45:09.847

如果电子邮件可以用作[固定标识符](http://www.w3.org/Provider/Style/URI.html)，那就没问题了。

问题是大多数时候应用程序将允许用户*更改*电子邮件。在这种情况下，自己控制 ID 空间会更加防弹，例如通过使用[代理键](http://en.wikipedia.org/wiki/Surrogate_key)。（因为电子邮件（如果用户可以更改它们）不是*身份*，而仅仅是资源的属性）。

反对电子邮件的另一个论点是——正如@Rob 指出的——一个潜在的安全问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:45:11.640

没有问题......只要确保你对适当的字符进行 URL 编码。

（不过，电子邮件是一种敏感信息，如果 URL 被传递，您可能希望传递哈希或代理键来保护用户的电子邮件地址。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T08:50:22.313

尽管在 uri 中有 '-' 绝对没问题。不鼓励使用 '@' ， '#'

但是，只要电子邮件 id 是一个 id，例如[http://example.org/user/mail/](http://example.org/user/mail/) {email}/1234 就可以了。

# grails - 注释行 O_o 中的异常

> ID：14253762
> 
> 赞同：1
> 
> 时间：2013-01-10T08:41:01.940
> 
> 标签：grails

我有这个：

```
<!--   <div class="fieldcontain ${hasErrors(bean: azafataInstance, field: 'localidad', 'error')} required" style="margin-left: 10px">-->
<!--<label for="localidad">Localidad</label>    -->
<!--<g:if test="${params?.localidad }">-->
<!--<g:select id="localidad" title="${g.message(code: 'infoPersonal.localidad')}" name="localidad" value="${params?.localidad}" from="${[' ',params.localidad]}" noSelection="${['':message(code:'localidadSelect')]}" onClick="this.style.color='black'" onFocus="this.style.color='black'" style="max-width:168px" />-->
<!--</g:if>-->
<!--<g:else>-->
<!--<g:select id="localidad" title="${g.message(code: 'infoPersonal.localidad')}" name="localidad" value="${params?.localidad}" from="${['']}" noSelection="${['':message(code:'localidadSelect')]}" onClick="this.style.color='black'" onFocus="this.style.color='black'" style="max-width:168px"  />-->
<!--</g:else>-->
<!--</div>--> 
```

如您所见...行已注释。我运行这个项目，我得到了这个：

```
URI
/com.publidirecta.azafatas/azafataCertificada/registro_page
Class
org.codehaus.groovy.grails.web.taglib.exceptions.GrailsTagException
Message
Tag [else] cannot have non-whitespace characters directly preceding it.

Around line 95 of grails-app/views/azafataCertificada/registro.gsp

92:<!--<g:if test="${params?.localidad }">-->
93:<!--<g:select id="localidad" title="${g.message(code: 'infoPersonal.localidad')}" name="localidad" value="${params?.localidad}" from="${[' ',params.localidad]}" noSelection="${['':message(code:'localidadSelect')]}" onClick="this.style.color='black'" onFocus="this.style.color='black'" style="max-width:168px" />-->
94: <!--</g:if>-->
95: <!--<g:else>-->
96: <!--<g:select id="localidad" title="${g.message(code: 'infoPersonal.localidad')}" name="localidad" value="${params?.localidad}" from="${['']}" noSelection="${['':message(code:'localidadSelect')]}" onClick="this.style.color='black'" onFocus="this.style.color='black'" style="max-width:168px"  />-->
97:<!--</g:else>-->
98:<!--</div>-->

Trace

Line | Method
->> 886 | runTask in java.util.concurrent.ThreadPoolExecutor$Worker
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   908 | run     in     ''
^   680 | run . . in java.lang.Thread

Caused by GrailsTagException: Tag [else] cannot have non-whitespace characters directly preceding it.
->>  95 | runTask in /grails-app/views/azafataCertificada/registro.gsp 
```

显然，问题是……在一个体面的框架中，注释行怎么可能引发异常！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T09:02:00.580

因为`<!--`不是 GSP 中的评论。

正如您所发现的，GSP 解析器将 HTML 样式的注释视为普通内容，以便生成包含 HTML 注释的输出，例如在脚本标签中

```
<script type="text/javascript><!--
js goes here;
//--></script> 
```

或[IE 条件注释](http://www.quirksmode.org/css/condcom.html)

```
<!--[if IE 6]>
<script type="text/javascript" src="${resource(dir:'css', file:'ie6-fixup.js')}"></script>
<![endif]--> 
```

GSP 注释的语法是

```
<%-- this is commented out --%> 
```

GSP 解析器将忽略此类注释中的任何内容。

# html - 我可以在我的 windows phone 8 应用程序中使用 Node.js 吗？

> ID：14253772
> 
> 赞同：1
> 
> 时间：2013-01-10T08:41:36.163
> 
> 标签：html, node.js, sockets, windows-phone-8

我正在开发一个需要通过套接字传输数据的应用程序。我必须使用标准的 http 协议通过套接字发送和接收数据。那么我可以在我的 windows phone 8 应用程序中使用 Node.js 来分别创建和解析 Http 请求和响应吗？

我正在用 c# .NET 编写代码。

提前致谢。问候，维杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:58:38.190

遗憾的是，您无法使用 HTML5+JavaScript 创建 Windows Phone 应用程序，因此您将无法在您的应用程序中使用此库。
[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206940(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206940(v=vs.105).aspx)

> Windows Phone 8 中不支持基于 HTML 的手机应用程序模型。但是，开发人员可以使用 XAML 前端创建托管应用程序，该前端使用嵌入式浏览器控件显示本地 HTML 内容，并且可以访问手机 API通过使用 InvokeScript 方法和 ScriptNotify 事件。此外，在 Windows Phone 8 中，手机的浏览器已升级到 Internet Explorer Mobile 10，具有许多新功能，例如强大的 HTML5/CSS3 实现、可缩放矢量图形 (SVG)、ES5、IndexedDB、手势事件和添加了高性能脚本引擎，为 Windows Phone 8 HTML 开发人员创造了新的、有趣的可能性。

但是如果你只是想在你的 WIndows Phone 应用程序中使用套接字，你可以直接在 C# 中使用它们：
[Windows Phone 的套接字](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202874%28v=vs.105%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T20:35:01.043

我不确定 node.js，但如果您的目标是提供静态文件，例如 html，您可以在此处查看 Katana 项目：[https ://katanaproject.codeplex.com/releases/view/113281](https://katanaproject.codeplex.com/releases/view/113281)

至于静态文件上的动态数据，您可以利用 Owin 并在手机上自行托管 SignalR 端点：[http ://www.asp.net/signalr/overview/signalr-20/getting-started-with-signalr-20/教程-signalr-20-self-host](http://www.asp.net/signalr/overview/signalr-20/getting-started-with-signalr-20/tutorial-signalr-20-self-host)

使用 SignalR 和 C#，您可以在手机上公开手机的大部分功能和传感器数据。

为避免创建大量不需要的样板代码，您可以使用 mv* 框架（例如 KnockoutJs 或 AngularJs）将数据绑定到静态 html。对于看起来很酷的图表，您可以利用 D3.js

# c# - 如何在 mschart 中添加在 XAxis 上均匀分布的点？

> ID：14253774
> 
> 赞同：0
> 
> 时间：2013-01-10T08:41:37.050
> 
> 标签：c#, winforms, visual-studio-2010, charts, axes

c# mschart vs2010 .net4

```
 chart1.Series[0].Points.AddXY(0, 1);
    chart1.Series[0].Points.AddXY(7, 1;
    chart1.Series[0].Points.AddXY(8,1); 
```

我希望这 3 点看起来像这样

```
 .      . . 
```

但结果是这样的

```
 . . . 
```

为什么？谢谢

图表代码

```
chartArea1.AxisX.InterlacedColor = System.Drawing.SystemColors.ControlLight;
chartArea1.AxisX.Interval = 1D;
chartArea1.AxisX.IntervalAutoMode = System.Windows.Forms.DataVisualization.Charting.IntervalAutoMode.VariableCount;
chartArea1.AxisX.IntervalOffset = 1D;
chartArea1.AxisX.IntervalType = System.Windows.Forms.DataVisualization.Charting.DateTimeIntervalType.Number;
chartArea1.AxisX.IsInterlaced = true;
chartArea1.AxisX.IsLabelAutoFit = false;
chartArea1.AxisX.LabelStyle.Font = new System.Drawing.Font("Calibri", 8.25F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
chartArea1.AxisX.MajorGrid.LineColor = System.Drawing.Color.LightGray;
chartArea1.AxisX.MajorGrid.LineDashStyle = System.Windows.Forms.DataVisualization.Charting.ChartDashStyle.DashDotDot;
chartArea1.AxisX.MajorTickMark.LineColor = System.Drawing.Color.Maroon;
chartArea1.AxisX.ScrollBar.LineColor = System.Drawing.Color.White;
chartArea1.AxisY.ArrowStyle = System.Windows.Forms.DataVisualization.Charting.AxisArrowStyle.SharpTriangle;
chartArea1.AxisY.InterlacedColor = System.Drawing.Color.WhiteSmoke;
chartArea1.AxisY.Interval = 1D;
chartArea1.AxisY.IntervalType = System.Windows.Forms.DataVisualization.Charting.DateTimeIntervalType.Number;
chartArea1.AxisY.IsInterlaced = true;
chartArea1.AxisY.IsLabelAutoFit = false;
chartArea1.AxisY.LabelStyle.Font = new System.Drawing.Font("Lucida Grande", 8F);
chartArea1.AxisY.MajorGrid.LineColor = System.Drawing.Color.LightGray;
chartArea1.AxisY.MajorGrid.LineDashStyle = System.Windows.Forms.DataVisualization.Charting.ChartDashStyle.DashDot;
chartArea1.AxisY.ScaleView.MinSizeType = System.Windows.Forms.DataVisualization.Charting.DateTimeIntervalType.Number;
chartArea1.CursorX.IsUserEnabled = true;
chartArea1.CursorX.IsUserSelectionEnabled = true;
chartArea1.CursorY.IsUserEnabled = true;
chartArea1.CursorY.IsUserSelectionEnabled = true;
chartArea1.Name = "ChartArea1";
this.chart1.ChartAreas.Add(chartArea1);
this.chart1.Location = new System.Drawing.Point(-4, 0);
this.chart1.Margin = new System.Windows.Forms.Padding(0);
this.chart1.Name = "chart1";
series1.BorderWidth = 3;
series1.ChartArea = "ChartArea1";
series1.ChartType = System.Windows.Forms.DataVisualization.Charting.SeriesChartType.Point;
series1.Font = new System.Drawing.Font("Calibri", 8.25F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
series1.IsXValueIndexed = true;
series1.LabelBorderWidth = 2;
series1.MarkerColor = System.Drawing.Color.FromArgb(((int)(((byte)(192)))), ((int)(((byte)(0)))), ((int)(((byte)(0)))));
series1.Name = "Series1";
series1.XValueType = System.Windows.Forms.DataVisualization.Charting.ChartValueType.UInt32;
series1.YValueType = System.Windows.Forms.DataVisualization.Charting.ChartValueType.UInt32;
this.chart1.Series.Add(series1);
this.chart1.Size = new System.Drawing.Size(1031, 618);
this.chart1.TabIndex = 5; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:25:55.720

Found the problem.

```
 series1.IsXValueIndexed = true; 
```

this is the reason that happened. it should be false. thanx for everyone's attention.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:55:20.587

我猜你应该使用空的 DataPoints，（见[http://msdn.microsoft.com/en-us/library/dd456677.aspx](http://msdn.microsoft.com/en-us/library/dd456677.aspx)）

使用 IsEmpty 属性，这将导致以下代码。（`DataManipulator.InsertEmptyPoints`应该需要更少的代码，但我还没有测试它）

```
chart1.Series[0].Points.Add(new DataPoint(0,1));
chart1.Series[0].Points.Add(new DataPoint(1,0){IsEmpty=true});
chart1.Series[0].Points.Add(new DataPoint(2,0){IsEmpty=true});
chart1.Series[0].Points.Add(new DataPoint(3,0){IsEmpty=true});
chart1.Series[0].Points.Add(new DataPoint(4,0){IsEmpty=true});
chart1.Series[0].Points.Add(new DataPoint(5,0){IsEmpty=true});
chart1.Series[0].Points.Add(new DataPoint(6,0){IsEmpty=true});
chart1.Series[0].Points.Add(new DataPoint(7,1));
chart1.Series[0].Points.Add(new DataPoint(8,1)); 
```

# php - PHP从多维数组创建查询字符串而不使用循环

> ID：14253777
> 
> 赞同：0
> 
> 时间：2013-01-10T08:41:47.787
> 
> 标签：php, arrays, query-string

我有一个多维数组。像这样。

```
Array
(
    [38] => Array
        (
            [quantity] => 1
            [price] => 149
            [product_code] => 4578425
        )

    [39] => Array
        (
            [quantity] => 2
            [price] => 300
            [product_code] => 4578426 
        )

) 
```

我想从这些值创建查询字符串，例如

[https://www.domain.com/checkout.php?PRODS=4578425,4578426&QTY=1,2&CART=1](https://www.domain.com/checkout.php?PRODS=4578425,4578426&QTY=1,2&CART=1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:45:15.267

### 不使用循环...

我不认为 AFAIK，这是可能的，因为数组中有数组，所以使用`implode`无济于事。但是，使用循环，是的。

### 使用此代码：

```
$prods = array();
$qty = array();
foreach ($array as $item)
{
    $prods[] = $item["product_code"];
    $qty[] = $item["quantity"];
}
echo 'https://www.domain.com/checkout.php?PRODS=', implode(',', $prods),'&QTY=', implode(',', $qty),'&CART=1'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:45:07.053

你可以使用`implode()`方法

```
$array = array('lastname', 'email', 'phone');
$comma_separated = implode(",", $array);
echo $comma_separated; // lastname,email,phone 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T09:19:32.470

是的，我认为有一种方法，

您可以使用序列化将其放入字符串中，然后反序列化以将其返回到如下数组：

```
<?php

 $arr = Array
(
38 => Array
    (
        'quantity' => 1,
        'price' => 149,
        'product_code' => 4578425
    ),

39 => Array
    (
        'quantity' => 2,
        'price' => 300,
        'product_code' => 4578426 
    )

);

$newarr = 'https://www.domain.com/checkout.php?string=';
$newarr .= serialize($arr);

?> 
```

那么你有这个结果：

[https://www.domain.com/checkout.php?string=a:2](https://www.domain.com/checkout.php?string=a:2) :{i:38;a:3:{s:8:"数量";i:1;s:5:"价格"; i:149;s:12:"product_code";i:4578425;}i:39;a:3:{s:8:"数量";i:2;s:5:"价格";i:300; s:12:"product_code";i:4578426;}}a:2:{i:38;a:3:{s:8:"数量";i:1;s:5:"价格";i: 149;s:12:"product_code";i:4578425;}i:39;a:3:{s:8:"数量";i:2;s:5:"价格";i:300;s: 12：“产品代码”；我：4578426；}}

没有循环，但它不漂亮！！！

如果你想在 url 中使用这个，我必须警告你。url get 方法仅适用于短信息，如 id 或其他键值。如果您的网址超过 2000 个字符，大多数网络服务器都会遇到问题。不确定这是否是你的意图。

# objective-c - Objective-C 获取：错误：Objective-C 方法的预期选择器

> ID：14253779
> 
> 赞同：-1
> 
> 时间：2013-01-10T08:42:04.573
> 
> 标签：objective-c

我正在尝试制作一个简单的 http 请求方法，但是在编译时出现此错误：

```
 Compiling file main.m ...
In file included from main.m:1:
./HttpManager.h:4:2: error: expected selector for Objective-C method
-<NSURL*> getUrlContent:(NSString) url;
~^
main.m:11:17: warning: instance method '-getUrlContent:' not found (return type defaults to 'id')
        NSURL *myURL = [pHttpManager getUrlContent:@"http://www.cnn.com"]; 
```

我的简单源代码：

**HttpManager.h**

```
#import <Foundation/Foundation.h>

@interface HttpManager:NSObject
-<NSURL*> getUrlContent:(NSString) url;
@end 
```

**HttpManager.m**

```
#import "HttpManager.h"

@implementation HttpManager

-<NSURL*> getUrlContent:(NSString) url
{
    NSURL *myURL = [NSURL URLWithString:url];
    return myURL;
}
#end 
```

**主文件**

```
#import "HttpManager.h"
#import <Foundation/Foundation.h>
int main(int argc,char** argv)
{

    HttpManager* pHttpManager;
    pHttpManager  = [[HttpManager alloc] init];
    NSURL *myURL = [pHttpManager getUrlContent:@"http://www.example_site.com"]; 
    NSString *myHomePage = [NSString stringWithContentsOfURL: myURL
                            encoding: NSASCIIStringEncoding error: NULL];

    NSLog(@"%@", myHomePage);

    return 0;
} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:43:42.137

试试这个

```
-(NSURL*) getUrlContent:(NSString*) url
{
NSURL *myURL = [NSURL URLWithString:url];
return myURL;
} 
```

我们是在使用 <> 而不是 () 吗？也更换它们。

# android - 关于 Genymotion 中的“init: untracked pid xxxx exited”

> ID：14253781
> 
> 赞同：12
> 
> 时间：2013-01-10T08:42:09.930
> 
> 标签：android, linux-kernel, kernel, embedded-linux, genymotion

有时我会看到以下 logcat 输出，如下所示：

```
<3>[  283.152845] init: untracked pid 4217 exited
<3>[  283.162185] init: untracked pid 4078 exited
<3>[  283.173691] init: untracked pid 1504 exited
<3>[  283.177018] init: untracked pid 1468 exited 
```

init: 的日志是什么意思`untracked pid xxxx exited`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:13:13.780

使用 logcat 并仔细阅读巨大的日志。您可能会发现一直崩溃的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T09:33:03.383

可能有很多不同的原因，其中之一是android init 尝试初始化init.rc 指定的服务失败。

可以尝试先将init.rc启动的服务一分为二，一旦发现错误的服务，再尝试修复具体的服务启动错误，可能是内核驱动错误，或者android hal驱动错误，库错误，或者有时是 android 框架错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-14T20:55:37.490

从技术上讲，这条消息（其现代版本是“Untracked pid XXX exited with status YY”）意味着 Android init 看到一个子进程退出（即，接收到 SIGCHLD 信号，然后通过 获取其 pid `waitpid()`），但它无法关联该进程与任何已配置的服务（请参阅有关 Android 初始化服务配置的[此问题）。](https://stackoverflow.com/questions/8905593/whats-language-of-init-rc-in-android)

这反过来又引发了一个问题，即在 Android 环境中什么可以守护自己以及如何找到它。但我认为我无法回答这个问题，我唯一的建议是获得 root 访问权限和检查进程。

# php - 在标题导航 magento 中显示 cms 页面

> ID：14253782
> 
> 赞同：0
> 
> 时间：2013-01-10T08:42:10.940
> 
> 标签：php, zend-framework, magento, show

嗨，我需要在我的项目中在标题中动态显示 CMS 页面链接，

任何人都可以建议我如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:06:36.903

**使用**此**代码**，我们**可以**在启用状态的 magento 导航中**动态**显示**magento** cms 页面。我们只需要将**这段**代码放在**header**或**topnav**文件中

 ******```
<?php $collection = Mage::getModel('cms/page')->getCollection()->addStoreFilter(Mage::app()->getStore()->getId());?>
<?php  $collection->getSelect()->where('is_active = 1'); ?>
<ul id="nav">
<?php foreach ($collection as $page): ?>
<?php $PageData = $page->getData(); ?>
<?php// print_r($PageData);?>
<?php if($PageData['identifier']!='no-route' && $PageData['identifier']!='enable-cookies' && $PageData['identifier']!='home2') { ?>
<li>
<a href="/magento/index.php/<?php echo $PageData['identifier']?>"><span><?php echo $PageData['title'] ?></span></a>
</li>
<?php } ?>
<?php endforeach; ?>
</ul> 
```******

# java - 鼠标事件和图标 / ImageIcon

> ID：14253786
> 
> 赞同：3
> 
> 时间：2013-01-10T08:42:26.670
> 
> 标签：java, swing, imageicon, mouse-listeners

请可以`MouseEvents`从[Icon](http://docs.oracle.com/javase/7/docs/api/javax/swing/Icon.html) / [ImageIcon](http://docs.oracle.com/javase/7/docs/api/javax/swing/ImageIcon.html)监听（在 API 中未实现任何通知器），无需从容器（`JPanel`, `JLabel`）监听或通过使用[SwingUtilities](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html)转换事件，实现并添加`XxxListener`到普通香草`Icon`/`ImageIcon`

编辑

像[代码 (@pietblok) 之](http://www.java.net/node/679278)类的东西，但可能不是我的问题的答案，我不确定创建图形对象、BufferedImage 和paintIcon 是否是最后一个属性

（我看到了一些类似的代码，这是 SSCCE 形式的）

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.image.BufferedImage;
import java.util.Map;
import java.util.WeakHashMap;

import javax.swing.Icon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;

public class TestMouseAwareIcon {

    public static class MouseAwareIcon extends MouseAdapter implements Icon {

        private static final long serialVersionUID = 1L;
        private int size = 80, halfSize = 40;
        private final BufferedImage image;
        private Map components = new WeakHashMap();

        public MouseAwareIcon() {
            super();
            image = createImage();
        }

        @Override
        public int getIconHeight() {
            return image.getHeight();
        }

        @Override
        public int getIconWidth() {
            return image.getWidth();
        }

        @Override
        public void mouseClicked(MouseEvent event) {
            Object source = event.getSource();
            if (source instanceof Component) {
                Component component = (Component) source;
                Point paintPoint = (Point) components.get(component);
                if (paintPoint == null) {
                    System.out.println("unknown component");
                } else {
                    Point mousePoint = event.getPoint();
                    int imageX = mousePoint.x - paintPoint.x;
                    int imageY = mousePoint.y - paintPoint.y;
                    if (imageX >= 0 && imageX < this.getIconWidth() && imageY >= 0
                            && imageY < this.getIconHeight()) {
                        int argb = image.getRGB(imageX, imageY);
                        int alpha = (argb << 0) >>> 24;
                        int red = (argb << 8) >>> 24;
                        int green = (argb << 16) >>> 24;
                        int blue = (argb << 24) >>> 24;
                        System.out.println("Color clicked on "
                                + component.getName() + ": " + alpha + ","
                                + red + "," + green + "," + blue);
                        int fillX = halfSize * (imageX / halfSize);
                        int fillY = halfSize * (imageY / halfSize);
                        Graphics2D g2 = image.createGraphics();
                        g2.setColor(new Color(255 - red, 255 - green,
                                255 - blue, alpha));
                        g2.fill3DRect(fillX, fillY, halfSize, halfSize, true);
                        g2.dispose();
                        component.repaint();
                    } else {
                        System.out.println("Clicked outside image area");
                    }
                }
            }
        }

        @Override
        public void paintIcon(Component component, Graphics g, int x, int y) {
            ((Graphics2D) g).drawImage(image, null, x, y);
            if (!components.containsKey(component)) {
                component.addMouseListener(this);
            }
            components.put(component, new Point(x, y));
        }

        private BufferedImage createImage() {
            BufferedImage image1 = new BufferedImage(size, size,
                    BufferedImage.TYPE_INT_ARGB);
            Graphics2D g2 = image1.createGraphics();
            Color[] colors = new Color[]{Color.BLACK, Color.RED, Color.GREEN,
                Color.BLUE};
            int colorIndex = 0;
            for (int x = 0; x < size; x += halfSize) {
                for (int y = 0; y < size; y += halfSize) {
                    g2.setColor(colors[colorIndex]);
                    g2.fill3DRect(x, y, halfSize, halfSize, true);
                    colorIndex++;
                }
            }
            g2.dispose();
            return image1;
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                final JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                JLabel label = new JLabel(new MouseAwareIcon());
                label.setName("label");
                frame.getContentPane().add(label);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });    
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:41:10.943

No, it is not possible, you must use an existing JComponent like JPanel or JLabel or implement an ad-hoc JComponent to do what you want.

# javascript - 如何使用带有 JavaScript 类的属性和方法来交换数据？

> ID：14253788
> 
> 赞同：1
> 
> 时间：2013-01-10T08:42:33.760
> 
> 标签：javascript, class, methods, properties, prototype

我在 JavaScript 对象（类）中的方法之间交换数据有一个小问题：

```
var TEST = (function () {

    var TEST = function() {

    };

    TEST.prototype.get = function() {
        $.ajax({
            type: "GET",
            url: "http://test.com/getall",
            dataType: "json",
            success: function (data) {
                return data;  // if i console log this i will get a json obj
            }
        });
    };

    TEST.prototype.parse = function(data) {
        $.each(this.get(), function(k, v){
            console.log(v);
        });
    };

    return TEST;
})(); 
```

所以我试图在另一种方法的每个语句中调用一个方法。问题是

回应是`undefined`。

我也这样尝试过，但结果相同

```
var testing = new TEST();
var get = testing.get();
testing.parse(get); 
```

我错过了什么？我怎样才能返回`this.get`要使用的数据`this.parse`。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:46:15.073

您不能以这种方式构造函数，因为您依赖于异步调用，这将在正常执行流程之外返回它的结果。您实际接收`.get`函数结果的唯一方法是使用回调。

简而言之，您的值不是从`.get`函数返回的，而是从您传递给 jQuery`.ajax`方法的回调中返回的。

你最好重新设计你的代码以便仍然支持异步调用——而不是禁用异步。

一个粗略的想法是像这样改变你的解析函数：

```
TEST.prototype.parse = function(data) {
    this.get(function(result){
        $.each(result, function(k, v){
            console.log(v);
        });
    });
}; 
```

并相应地更改您的 get 功能：

```
TEST.prototype.get = function(callback) {
    $.ajax({
        type: "GET",
        url: "http://test.com/getall",
        dataType: "json",
        success: callback
    });
}; 
```

以上只是一个简单的示例，您最好阅读以下 jQuery 主题：

*   [http://api.jquery.com/promise/](http://api.jquery.com/promise/)
*   [http://api.jquery.com/category/deferred-object/](http://api.jquery.com/category/deferred-object/)

如果您围绕 Promise 模式设计代码，一开始您会发现它很复杂，但它为您的代码提供了强大的功能 - 并且解决了您在处理 ajax 调用时最终可能遇到的整个回调堆栈疯狂。

虽然从`jQuery.ajax`文档中并不完全清楚，但此函数返回一个`jqXHR`实现 promise 接口的对象。所以这意味着你可以使用 promise 方法`done`，`always`并且`fail`.

*   [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:46:33.160

`$.ajax()`默认情况下是异步的。这意味着，您的函数的执行`get()`不会等到请求完成。因此，您不会从中返回任何值，从而导致`undefined`返回。

为了让您的`get()`函数能够返回一个值，您必须以同步方式执行请求并在外部函数中设置一个变量（因为成功本身只是另一个函数，其返回值未被捕获）：

```
TEST.prototype.get = function() {
        var result;

        $.ajax({
            type: "GET",
            url: "http://test.com/getall",
            async: false, // this is the important part!
            dataType: "json",
            success: function (data) {
                result = data;  
            }
        });

        return result;
    }; 
```

**编辑**

正如@pebbl 所提到的，这将停止所有脚本的执行，直到请求完成。因此，您的整个页面将暂时被阻止。

一般的方法是在这种情况下使用回调，一旦请求完成就会执行。所以在你的情况下是这样的：

```
TEST.prototype.get = function( cb ) {
        $.ajax({
            type: "GET",
            url: "http://test.com/getall",
            dataType: "json",
            success: function (data) {
                cb( data );
            }
        });
    }; 
```

后来像这样打电话：

```
var testing = new TEST();
testing.get( function( data ) { 
  testing.parse( data );  
}); 
```

# android - Android Google API V2 启用/禁用 TileProvider

> ID：14253790
> 
> 赞同：3
> 
> 时间：2013-01-10T08:42:43.073
> 
> 标签：android, google-maps, android-maps-v2

我的问题很简单，我想在 Google Maps API v2 上启用和禁用 TileUrlProvider。

我的方法是：

```
public class BackTileSelectorActivity extends FragmentActivity {

    private GoogleMap mMap;
    private TileOverlayOptions osmTileProviderOptions;
    private TileOverlayOptions moonTileProviderOptions;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_back_tile_selector);
        setUpMapIfNeeded();
    }

    @Override
    protected void onResume() {
        super.onResume();
        setUpMapIfNeeded();
    }

    private void setUpMapIfNeeded() {
        // Do a null check to confirm that we have not already instantiated the map.
        if (mMap == null) {
            // Try to obtain the map from the SupportMapFragment.
            mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map))
                    .getMap();
            // Check if we were successful in obtaining the map.
            if (mMap != null) {
                setUpMap();
            }
        }
    }

    private void setUpMap() {
        mMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);

        mMap.animateCamera(
                CameraUpdateFactory.newLatLngZoom(
                        new LatLng(47.224217, -1.631409), 
                        16
                    )
                );

        osmTileProviderOptions = new TileOverlayOptions().tileProvider(new OSMTileProvider());
        osmTileProviderOptions.visible(false);
        mMap.addTileOverlay(osmTileProviderOptions);

        moonTileProviderOptions = new TileOverlayOptions().tileProvider(new MoonTileProvider());
        moonTileProviderOptions.visible(false);
        mMap.addTileOverlay(moonTileProviderOptions);
    }

    public void setGoogleMapNormalEnabled(View v) {
        osmTileProviderOptions.visible(false);
        moonTileProviderOptions.visible(false);
        mMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
    }

    public void setOSMMapEnabled(View v) {
        osmTileProviderOptions.visible(true);
        moonTileProviderOptions.visible(false);
        mMap.setMapType(GoogleMap.MAP_TYPE_NONE);
    }

    public void setMoonMapEnabled(View v) {
        osmTileProviderOptions.visible(false);
        moonTileProviderOptions.visible(true);
        mMap.setMapType(GoogleMap.MAP_TYPE_NONE);
    }

    public void setGoogleMapHybridEnabled(View v) {
        osmTileProviderOptions.visible(false);
        moonTileProviderOptions.visible(false);
        mMap.setMapType(GoogleMap.MAP_TYPE_HYBRID);
    }

    public void setGoogleMapSatelliteEnabled(View v) {
        osmTileProviderOptions.visible(false);
        moonTileProviderOptions.visible(false);
        mMap.setMapType(GoogleMap.MAP_TYPE_SATELLITE);
    }

    public void setGoogleMapTerrainEnabled(View v) {
        osmTileProviderOptions.visible(false);
        moonTileProviderOptions.visible(false);
        mMap.setMapType(GoogleMap.MAP_TYPE_TERRAIN);
    }
} 
```

瓷砖提供者如下所示：

```
public class MoonTileProvider extends UrlTileProvider {

    private static final int TILE_WIDTH = 256;
    private static final int TILE_HEIGHT = 256;

     private static final String MOON_MAP_URL_FORMAT =
                "http://mw1.google.com/mw-planetary/lunar/lunarmaps_v1/clem_bw/%d/%d/%d.jpg";

    public MoonTileProvider() {
        super(TILE_WIDTH, TILE_HEIGHT);
    }

    @Override
    public URL getTileUrl(int x, int y, int zoom) {
        // The moon tile coordinate system is reversed.  This is not normal.
        int reversedY = (1 << zoom) - y - 1;
        String s = String.format(Locale.US, MOON_MAP_URL_FORMAT, zoom, x, reversedY);
        URL url = null;
        try {
            url = new URL(s);
        } catch (MalformedURLException e) {
            throw new AssertionError(e);
        }
        return url;
    }

} 
```

和 ：

```
public class OSMTileProvider extends UrlTileProvider {

    private static final int TILE_WIDTH = 256;
    private static final int TILE_HEIGHT = 256;

    private static final String OSM_MAP_URL_FORMAT = "http://a.tile.cloudmade.com/BC9A493B41014CAABB98F0471D759707/997/256/%d/%d/%d.png";

    public OSMTileProvider() {
        super(TILE_WIDTH, TILE_HEIGHT);
    }

    @Override
    public URL getTileUrl(int x, int y, int zoom) {
        String s = String.format(Locale.US, OSM_MAP_LOCAL_URL_FORMAT, zoom, x, y);

        URL url = null;
        try {
            url = new URL(s);
        } catch (MalformedURLException e) {
            return null;
        }
        return url;
    }

} 
```

当像这样调用 tileProvider 时工作正常：

```
private GoogleMap mMap;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.google_map_api_layout);
    setUpMapIfNeeded();
}

@Override
protected void onResume() {
    super.onResume();
    setUpMapIfNeeded();
}

private void setUpMapIfNeeded() {
    // Do a null check to confirm that we have not already instantiated the map.
    if (mMap == null) {
        // Try to obtain the map from the SupportMapFragment.
        mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map))
                .getMap();
        // Check if we were successful in obtaining the map.
        if (mMap != null) {
            setUpMap();
        }
    }
}

private void setUpMap() {
    mMap.setMapType(GoogleMap.MAP_TYPE_NONE);

    mMap.animateCamera(
            CameraUpdateFactory.newLatLngZoom(
                    new LatLng(47.224217, -1.631409), 
                    16
                )
            );

    TileProvider tileProvider = new OSMTileProvider();

    mMap.addTileOverlay(new TileOverlayOptions().tileProvider(tileProvider));
} 
```

但是我可以我的图块永远不会加载到地图中。其他谷歌地图瓷砖工作正常......

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-22T17:57:14.667

我遇到了同样的问题。事实证明，这些`.visible()`函数除了返回对象之外没有做任何事情，但可见性发生了变化。因此，如果您必须更改可见性，我建议您`.clear()`在地图对象上进行操作，然后重新添加叠加层。如果有其他解决方案，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-17T19:18:10.183

您可以保留对 TileProvider 的引用，然后在需要时调用 .remove() 将其从地图中删除：

```
TileOverlay mTileOverlay; 
```

像以前一样添加瓷砖：

```
TileProvider tileProvider = new OSMTileProvider();
mTileOverlay = mMap.addTileOverlay(new TileOverlayOptions().tileProvider(tileProvider)); 
```

像这样删除它：

```
if (null != mTileOverlay) {
    mTileOverlay.remove();
} 
```

# java - 如何使用java删除谷歌应用引擎中实体的特定数据

> ID：14253792
> 
> 赞同：0
> 
> 时间：2013-01-10T08:42:52.377
> 
> 标签：java, google-app-engine

我可以使用删除 Google 文档给出的实体来[删除实体](https://developers.google.com/appengine/docs/java/datastore/entities#Deleting_an_Entity)，但我的问题是如何删除存储在实体内的特定数据。我们有什么方法可以删除实体内部的特定数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:47:27.593

如何获取实体，删除所需的字段然后更新它？

从[文档](https://developers.google.com/appengine/docs/java/datastore/entities#Updating_an_Entity)：

*“要更新现有实体，请修改 Entity 对象的属性，然后将其传递给 DatastoreService.put() 方法”*

# iphone - 动态增加tableCell的高度

> ID：14253794
> 
> 赞同：4
> 
> 时间：2013-01-10T08:43:04.180
> 
> 标签：iphone, ios, uitableview

我搜索了表格单元格的增加高度。我得到的答案很少。这些不适合我的情况。

**案子：**

我有高度默认为 150 的表格单元格。在表格单元格（标题、图像、操作）上添加的内容是表格单元格中的视图。我们通过**"UIImageView+AFNetworking.h"**加载图像。我们有不同高度的图像。

如何在单元格中加载图像后增加/减少单元格高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:57:08.090

为此，您必须重新加载特定的单元格

```
// Build the index path
NSIndexPath* indexPath1 = [NSIndexPath indexPathForRow:3 inSection:2];
// Add them in an index path array
NSArray* indexArray = [NSArray arrayWithObjects:indexPath1, nil];
// Launch reload for the two index path
[self.tableView reloadRowsAtIndexPaths:indexArray withRowAnimation:UITableViewRowAnimationFade]; 
```

并且必须返回单元格的高度，`tableView: heightForRowAtIndexPath:`然后它将调用您的`tableView: cellForRowAtIndexPath:`

PS我假设您正在执行延迟加载（在创建单元格后加载图像）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:46:35.507

在 tableview中加载图像后，`cellForRowAtIndexPath`计算加载图像的高度。给出行高`heightForRowAtIndexPath`。

试试这个代码

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
 UIImage *Image= [imageAry objectAtIndex:indexPath.row];
    NSLog(@"%f",Image.frame.size.height);
    return size.height + 10;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T08:50:43.760

`heightForRowAtIndexPath:`只需使用如下委托方法设置单元格的高度...

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{ 
    UIImage *Tempimage= [yourArray objectAtIndex:indexPath.row];
    UIImageView *imgTemp = [[UIImageView alloc]initWithImage:Tempimage];
    return imgTemp.frame.size.height;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T08:59:20.153

我没有使用，`UIImageView+AFNetworking.h`但计算行高的想法是在加载某些位置后计算图像的高度

希望这个方法对你有帮助

```
- (void)setImageWithURLRequest:(NSURLRequest *)urlRequest 
              placeholderImage:(UIImage *)placeholderImage 
                       success:(void (^)(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image))success
                       failure:(void (^)(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error))failure; 
```

并在加载图像后`success`计算图像高度`image.size.height`并将其添加到表格的数组中

```
NSMutableDictionary *record = [array objectAtIndex:index];
[record setObject:[NSString stringWithFormat:@"%f",image.size.height] forKey:@"imageheight"];
[array  replaceObjectAtIndex:index withObject:record];
[tableView reloadData]; 
```

并像这样设置行的高度

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{ 
    NSMutableDictionary *record = [array objectAtIndex:index];
    if ( [record objectForkey:@"imageheight"] ) {
        return [[record objectForkey:@"imageheight"] floatValue] + yourmargin);
        // yourmargin may be 150 or what ever be
    } else {
        return 150;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-26T11:05:16.847

下载图像后写入以下行：

[self.tblStoryCardView beginUpdates]; [self.tblStoryCardView endUpdates];

并以行高方法下载图像高度。

我在 github 上传了一个虚拟项目。你可以检查一下： [https ://github.com/govindprasadguptacool/Dynamic-Table-Cell-Height](https://github.com/govindprasadguptacool/Dynamic-Table-Cell-Height)

# ios - IOS 追加帖子请求

> ID：14253800
> 
> 赞同：0
> 
> 时间：2013-01-10T08:43:27.583
> 
> 标签：ios, forms, post

我想输入如下内容：

```
address[address1] = adsads
address[address2] = dsadsad
address[address3] = vadsa 
```

我知道如果这是简单的帖子，我可以这样做：

```
url?address1=adsads&address2=dsadsa 
```

但是如果我想在帖子中使它成为地址对象（数组），我该如何在IOS中制作它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:39:34.447

想过使用字典（如果我这样做的话可能会起作用），但只是被告知我可以像这样传递 url：

```
url?address[addres1]=dsadsa&address[address2]=dsadsa 
```

因为浏览器和服务器不会自动对其进行编码并将 [] 作为特殊字符读取。

愚蠢的问题，谢谢大家的回答

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:18:13.807

嗯，你可以用字典。

```
NSMutableDictionary * argDict = [NSMutableDictinary new];
[argDict setObject:@"John" forKey:@"name"];
[argDict setObject:@"26" forKey:@"age"];
...
NSMutableString * url = [NSMutableString stringWithCapacity:30];
[url appendString:@"http://?"];
BOOL isFirstArg = YES;
for (NSString * key in [argDict allKeys]) {
    if (isFirstArg) {
        [url appendFormat:@"%@=%@", key, [argDict objectForKey:key]];
        isFirstArg = NO;
        continue;
    }
    [url appendFormat:@"&%@=%@", key, [argDict objectForKey:key]];
} 
```

注意：我想你也可以找到一种更好的方法来处理第一个 arg :)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-10T08:50:46.037

假设 address1,address2,address3, ... 等是整数，您可以使用 switch 如下所示：

```
for (int i = 0; i < addressX; i++)
{
     switch(i)
     {
         case address1:
              address[i]=adsads;
              break;
         case address2:
              address[i]=aoao;
              break;
         case address3:
              address[i]=olol;
              break;
         case address4:
              address[i]=dodo;
              break;
         case address5:
              address[i]=lolo;
              break;
     }
} 
```

# php - 如何在给定双引号和单引号的 phing 中执行任务

> ID：14253803
> 
> 赞同：4
> 
> 时间：2013-01-10T08:43:35.247
> 
> 标签：php, execute, phing

这是我希望执行的命令。

```
php -r "apc_clear_cache(); apc_clear_cache('user'); apc_clear_cache('opcode');" 
```

这是我在 phing 中的尝试

```
<exec command='php -r "apc_clear_cache(); apc_clear_cache(\'user\'); apc_clear_cache(\'opcode\');"' outputProperty="result" /> 
```

这就是我得到的

```
BUILD FAILED
Error reading project file [wrapped: /var/virtual/abc.com/build.xml:171:26: > required]
Total time: 0.2093 seconds 
```

请指教。

更新：

我通过编写一个名为`RunApcClearCache.sh`运行的 bash 脚本解决了我的问题

```
php -r "apc_clear_cache(); apc_clear_cache('user'); apc_clear_cache('opcode');" 
```

然后使用调用bash脚本`./RunApcClearCache.sh`

如果有更好的方法，我想听听。

我也不愿意为如此简单的事情编写任务。当然，必须有一种方法可以在 exectask 中正确地转义双引号。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-08-11T10:41:52.107

Phing 需要有效的 XML。在有效的 XML 中，您不能直接在属性内使用 "。

您需要转义它/使用它的等效实体。有五个预定义的实体：

```
&lt; represents "<"
&gt; represents ">"
&amp; represents "&"
&apos; represents '
&quot; represents " 
```

尝试使用实体而不是字符。所以在命令属性中使用`&quot;`而不是......`"`

[https://en.wikipedia.org/wiki/XML#Escaping](https://en.wikipedia.org/wiki/XML#Escaping)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T21:41:08.577

我有同样的问题。为了避免 shell 脚本，我定义了一个临时任务，它映射了相应的框架函数，例如

```
<adhoc-task name="fileHelper"><![CDATA[
  class FileHelper extends Task {

      private $lib = null;
      private $task = null;
      private $stub = null;

      function setTask($task) {
          $this->task = $task;
      }

      function setStub($stub) {
          $this->stub = $stub;
      }

      function setLib($lib) {
          $this->lib = $lib;
      } 

      function main() {
        $task = $this->task;
    $this->$task();
      }

      function generatePharStub() {
        include_once $this->lib . '/FileHelper.php'; 
        HTMLBuilder\FileHelper::generatePharStub($this->stub);
      }

      function generateIncludes() {
        include_once $this->lib . '/FileHelper.php'; 
        HTMLBuilder\FileHelper::generateIncludelist();
      }
  }
]]></adhoc-task> 
```

可以通过以下方式调用：

```
 <fileHelper lib="${lib}" stub="${stub}" task="generateIncludes" /> 
```

在我的例子中 ${lib} 指向库目录。${stub} 是生成的 phar 存根文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T09:51:23.750

我将创建一个新任务并在那里执行 php 代码。您还可以编写一个新的 php 文件并使用 php.ini 执行该文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T09:06:14.133

尝试这个：

`<exec command="php -r 'apc_clear_cache(); apc_clear_cache(\'user\'); apc_clear_cache(\'opcode\');'" outputProperty="result" />`

不确定它是否有效

# git - git checkout --patch by words？

> ID：14253806
> 
> 赞同：13
> 
> 时间：2013-01-10T08:43:48.337
> 
> 标签：git, vim, patch

我们有一个项目，其中文件包含很长的行，不可能缩短它们。如果我们也可以使用`git checkout --patch`此类文件，我们可以显着简化我们的工作流程。这不起作用，因为如果整个大行有任何变化，该行将被标记为已更改。

通常，我们使用`git diff --word-diff`. 是否有可能`checkout --patch`使用类似的格式进行工作？有没有其他方法可以解决我们的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T17:06:18.267

经过一番尝试，我得到了[这个答案](https://stackoverflow.com/a/12297461/1761499)，并想出了如何将它用于结帐。我做了一些额外的更改来抑制有时会打印的警告，并且必须修复参数解析以更加灵活。（由于这最初是一个管道脚本，其中参数由 git 核心进行预处理，因此在原始版本中这不是必需的）。

您可以使用[此版本的文件](https://gist.github.com/nevik/8764603)（[原始文件](https://gist.github.com/nevik/8764603/raw/ff3bedbc13e351bc8fee829ae527d7b3ef6718db/git-add--interactive--words.pl)以方便保存链接）并将其复制到您的某个位置`PATH`，如链接答案中所述。请务必`chmod +x path/to/file`在下载后设置其可执行位 ( )。

假设您`git-add--interactive--words`按照建议命名文件，您可以使用以下命令为其定义别名：

```
git config --global alias.cop add--interactive--words --patch=checkout 
```

现在您可以执行以下操作：

`git cop HEAD~5`对 . （当前目录）5 次之前提交，或者
`git cop master -- docs/README`从分支 master 以交互方式签出 docs/README

当然，您可以随意调用别名（我在这里选择 cop 表示 ' **c** 'heck' **o** 'ut --' **p** 'atch）。

*我知道这个答案真的很晚了，所以它可能不再适用于你了，但是这个问题已经在未回答的列表上很久了，我今天才**不得不**弄清楚——也许它会帮助别人；）*

# c# - 压缩字典中的所有列表

> ID：14253810
> 
> 赞同：2
> 
> 时间：2013-01-10T08:44:21.437
> 
> 标签：c#, .net, zip

我有一本包含值列表的字典

列表是在运行时动态添加的。在 c# 中，我如何压缩字典中的所有列表？

样本：

```
Dictionary<string, List<string>> MyDictionary = new Dictionary<string, List<string>>();

List<int> firstlist= new List<string>();

firstlist.Add("one");

firstlist.Add("two");

firstlist.Add("three");

firstlist.Add("four");

List<int> secondlist= new List<int>();

secondlist.Add(1);

secondlist.Add(2);

secondlist.Add(3);

secondlist.Add(4);

MyDictionary.Add("Words", firstlist);
MyDictionary.Add("Number", secondlist); 
```

我想压缩 mydictionary 中的所有列表，结果将是：

```
one       1
two       2
three     3
four      4 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T09:11:43.680

`Dictionary`给定一个`List`s：

```
var d = new Dictionary<string, List<string>>()
{
    {"first",  new List<string>() {"one", "two", "three"}},
    {"second", new List<string>() {"1",   "2",   "3"}}, 
    {"third",  new List<string>() {"A",   "B",   "C"}}
}; 
```

你可以使用这个通用方法：

```
IEnumerable<TResult> ZipIt<TSource, TResult>(IEnumerable<IEnumerable<TSource>> collection, 
                                            Func<IEnumerable<TSource>, TResult> resultSelector)
{
    var enumerators = collection.Select(c => c.GetEnumerator()).ToList();
    while (enumerators.All(e => e.MoveNext()))
    {
        yield return resultSelector(enumerators.Select(e => (TSource)e.Current).ToList());
    }
} 
```

压缩此字典中的所有列表，例如：

```
var result = ZipIt(d.Values, xs => String.Join(", ", xs)).ToList(); 
```

`result`就是现在

![在此处输入图像描述](../Images/403f3d81927ec6f732827c3c3ca2420d.png)

请注意，此方法允许您选择如何组合值；在我的示例中，我只是创建了一个`,`-separated 字符串。你也可以只使用其他东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:59:59.910

尝试：

```
var dictionary = firstlist.Zip(secondlist, (value, key) => new { value, key })
                         .ToDictionary(x => x.key, x => x.value); 
```

看看[文档](http://msdn.microsoft.com/en-us/library/dd267698.aspx)中的这个例子：

```
 int[] numbers = { 1, 2, 3, 4 };
 string[] words = { "one", "two", "three" };

 var numbersAndWords = numbers.Zip(words, (first, second) => first + " " + second);

 foreach (var item in numbersAndWords)
     Console.WriteLine(item);

 // This code produces the following output: 
 // 1 one 
 // 2 two 
 // 3 three 
```

编辑：

要访问字典中的列表，请使用：

```
(List<string>)MyDictionary["words"];
(List<int>)MyDictionary["numbers"]; 
```

例如：

```
List<string> words = (List<string>)MyDictionary["words"];
List<int> numbers = (List<int>)MyDictionary["numbers"];
for (int i = 0; i < words.Count; i++) // Loop through List with for
{
    Console.WriteLine(words[i] + numbers [i]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T09:07:59.280

让我们从[文档](http://msdn.microsoft.com/en-us/library/dd267698.aspx)示例向后工作：

```
 int[] numbers = { 1, 2, 3, 4 };
    string[] words = { "one", "two", "three" };

    var numbersAndWords = numbers.Zip(words, (first, second) => first +
         " " + second);

    foreach (var item in numbersAndWords)
        Console.WriteLine(item);

    // This code produces the following output: 

    // 1 one 
    // 2 two 
    // 3 three 
```

那么从上面使用你的字典将是：

```
 var numbersAndWords = MyDictionary["Words"]
        .Zip(MyDictionary["Number"], (first, second) => first + "\t" + second);

    foreach (var item in numbersAndWords)
        Console.WriteLine(item);

    // This code produces the following output: 

    // one       1
    // two       2
    // three     3
    // four      4 
```

# google-app-engine - 在 OAuth 中签名 base_string

> ID：14253812
> 
> 赞同：0
> 
> 时间：2013-01-10T08:44:30.573
> 
> 标签：google-app-engine, oauth, 2-legged

嗨，我正在尝试按照本教程中的本教程实现 OAuth1.0，有一个标题 OAuthGetRequestToken

为了获取请求令牌，我们必须向 URL 发送一个 post 请求

www.google.com/accounts/OAuthGetRequestToken

我在谷歌应用引擎的代码中发送一个发布请求我的代码是：

```
public class HelloWorldServlet extends HttpServlet {
    @SuppressWarnings({ "unchecked", "unchecked" })
    public void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {

        resp.setContentType("text/html");
         resp.getWriter().println("<html><head> <meta name=\"google-site-verification\" content=\"OBFeK6hFEbTkNdcYc-SQNH9tCTpcht-HkUdj6IgCaLg\" </head>");

        resp.getWriter().println("<body>Hello, world");
        //String post="key=AIzaSyBgmwbZaW3-1uaVOQ9UqlyHAUxvQtHe7X0&oauth_consumer_key=iriteshmehandiratta.appspot.com";
        //String param= "&oauth_callback=\"https://www.iriteshmehandiratta.appspot.com\"&scope=\"http://www.google.com/calendar/feeds\""; 

        //URL url=new URL("https://www.googleapis.com/prediction/v1.5/trainedmodels/10/predict?");
  TreeMap<String,String> tree=new TreeMap<String,String>();
  tree.put("oauth_version","1.0");
  tree.put("oauth_nonce", System.currentTimeMillis()+"");
  tree.put("oauth_timestamp",System.currentTimeMillis()/1000+"");
  tree.put("oauth_consumer_key", "imehandirattaritesh.appspot.com");
  tree.put("oauth_signature_method", "RSA-SHA1");

  ServletContext context = getServletContext();
  PrivateKey privKey = getPrivateKey(context,"/myrsakey11.pk8");

  tree.put("oauth_callback", "https://imehandirattaritesh.appspot.com/authsub");
  tree.put("scope", "https://www.google.com/calendar/feeds");
  Set set = tree.entrySet(); 

  Iterator<Map.Entry<String, String>> i = set.iterator(); 
  String datastring="";
  Map.Entry me=(Map.Entry)i.next();
 datastring=me.getKey()+"=";
 datastring+=me.getValue();

 while(i.hasNext()) { 
      me = (Map.Entry)i.next(); 
      datastring+="&"+me.getKey()+"="; 
      datastring+=(me.getValue()); 
      } 
  String data_string="GET&https://www.google.com/accounts/OAuthGetRequestToken&"+datastring;
 byte[] xx11;
 String str = null;
try {
    xx11 = sign(privKey,data_string);
    str=new String(xx11);
resp.getWriter().println(str);

} catch (GeneralSecurityException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

URL url=new URL("https://www.google.com/accounts/OAuthGetRequestToken?"+str); 
            //  resp.getWriter().println(""+datastring);
        HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

        urlConnection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");

        urlConnection.setRequestProperty("Authorization", " OAuth");

        urlConnection.setRequestMethod("GET");

        urlConnection.setDoOutput(true);

        BufferedReader in = new BufferedReader(new InputStreamReader(urlConnection.getInputStream()));

          resp.getWriter().println( urlConnection.getResponseCode());

           String xx="";

           String xx1="";

           while((xx1=in.readLine()) != null)

           {
               xx+=xx1;

           }
           resp.getWriter().println("response");
           resp.getWriter().println(xx);
           resp.getWriter().println("</body></html>");

    }

    public static PrivateKey getPrivateKey(ServletContext context,String privKeyFileName) throws IOException {

        InputStream resourceContent = context.getResourceAsStream("/WEB-INF/myrsakey11.pk8");
         // FileInputStream fis = new FileInputStream(privKeyFile);
          DataInputStream dis  = new DataInputStream(resourceContent);

          @SuppressWarnings("deprecation")
        String str="";
          String str1="";
          while((str=dis.readLine())!=null)
          {
              str1+=str;

          }

          String BEGIN = "-----BEGIN PRIVATE KEY-----";
          String END = "-----END PRIVATE KEY-----";
         // String str = new String(privKeyBytes);

          if (str1.contains(BEGIN) && str1.contains(END)) {
            str1 = str1.substring(BEGIN.length(), str1.lastIndexOf(END));
          }

          KeyFactory fac;
        try {
            fac = KeyFactory.getInstance("RSA");

              EncodedKeySpec privKeySpec= new PKCS8EncodedKeySpec(Base64.decode(str1));
              return fac.generatePrivate(privKeySpec);

        } catch (NoSuchAlgorithmException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (Base64DecoderException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InvalidKeySpecException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
         return null;

          }

    byte[] sign(PrivateKey key, String data) throws GeneralSecurityException {
        Signature signature = Signature.getInstance("SHA1withRSA"); 
        signature.initSign(key);

        signature.update(data.getBytes());
        return signature.sign(); 
        }
} 
```

首先我生成 data_string 然后使用我的私钥对其进行签名我得到一个像这样的加密字符串

```
 F????T???&??$????????l:v????x???}??U-'?"?????U?[?kr^?G?(? ???qT0??]??j???5??`??$??AD??T??@<t?,#:`V???????????? 
```

然后我将它与 url 连接起来：[https://www.google.com/accounts/OAuthGetRequestToken](https://www.google.com/accounts/OAuthGetRequestToken)？我收到 400 错误，显然它不是有效的 uri 格式，所以我收到此错误。我在 stackoverflow 上发布了一个查询，有人建议我使用 sign 方法，在签署 data_string 后，我将在返回字符串中嵌入 oauth_signature，该字符串是变量 str但是代替oauth_signature，我得到了一个加密字符串，谁能告诉我如何签署这个data_string以及我在做什么错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:38:32.190

我建议您使用[现有的 Java 库](http://oauth.googlecode.com/svn/code/java/)来执行 OAuth。从长远来看，这会容易得多，您不必担心调试协议。

# ruby - 如何使用 Ruby 删除文件夹内容？

> ID：14253814
> 
> 赞同：1
> 
> 时间：2013-01-10T08:44:41.800
> 
> 标签：ruby, ruby-1.9.3

假设我有一张 Excel 表格，上面有一些数字：

*   77787
*   45877
*   78985等等...

*现在我在 Windows 7 机器中有一个名为“D://Filehosting”的目录。在该目录下，我有大约 500 个文件夹，每个文件夹中有 120 个文件。现在我想删除比当前日期早 2 个月的每个文件夹的内容。现在文件夹排列如下：*

*   D://Filehosting/Document77787
*   D://Filehosting/Document45877 ..等等

***脚本应该取上面提到的数字，并相应地找到正确的目录并相应地删除内容。在删除内容之前必须检查文件夹是否存在。***

可以使用 Ruby 完成吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T08:54:06.583

```
 def del_dir id
    Dir["D:/Filehosting/Document#{id}/*"].each do |fname|
      next unless File.file?(fname)                # skip accident dirs
      if Time.now-File.mtime(fname) > 2*30*24*3600 # nearly 2 months
        puts "[!] will delete #{fname}, mtime=#{File.mtime(fname)}"
        # File.unlink(fname)                       # uncomment this to actually delete
      end
    end
  end 
```

# c# - Windows 服务无法创建文本文件

> ID：14253815
> 
> 赞同：3
> 
> 时间：2013-01-10T08:44:43.943
> 
> 标签：c#, .net, windows-services, event-viewer

好的，这是我的`OnStart`方法代码

```
File.CreateText("test.txt");
StreamWriter write = File.AppendText("test.txt");
write.WriteLine("Hello world, the service has started");
write.Flush();
write.Close(); 
```

我成功地安装了该服务。但是，当我启动时，我收到服务启动然后停止的消息。当我检查事件查看器时，它给了我这个

`Service cannot be started. System.IO.IOException: The process cannot access the file 'C:\Windows\system32\test.txt' because it is being used by another process.`

好的，这里发生了什么。我认为这不是权限问题，因为 ProcessInstaller 设置为 LocalSystem。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T08:49:58.613

您不需要使用第一个`File.CreateText`语句。这会在未关闭的文件上创建一个流编写器。

您的 File.AppendText 尝试在同一个文件上创建一个新的 StreamWriter ，因此您会收到`File in use`错误消息。

此外，正如 MSDN 所说，如果您的文件不存在，则会创建它。

> 如果 path 指定的文件不存在，则创建该文件。如果文件确实存在，则对 StreamWriter 的写入操作将文本附加到文件中

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-10T08:56:49.780

你可以这样使用

```
string path = @"path\test.txt";
if (!File.Exists(path)) 
{
  // Create a file to write to. 
   using (StreamWriter sw = File.CreateText(path)) 
   {
     sw.WriteLine("Hello world, the service has started");
    }   
 } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-10T13:26:32.433

我认为一行代码就足够了。

```
 File.AppendAllText(@"path\test.txt", "Hello world, the service has started"); 
```

将指定的字符串附加到文件中，如果文件不存在则创建该文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-23T21:25:52.940

您应该尝试使用文件的完整路径，Windows 服务在 C:\Windows\System32 文件夹中运行

```
string fileName="E:\\Service\\file.txt"
File.Create(file); 
```

# c - C语言中的红黑树实现

> ID：14253816
> 
> 赞同：4
> 
> 时间：2013-01-10T08:44:47.310
> 
> 标签：c, pointers, binary-search-tree, red-black-tree

我已经在 C 中实现了红黑树的插入部分。但是，当我调用 DISPLAY 函数时，我没有得到任何输出。我用 BST 实现（RBT 的某些部分）检查了功能的正确性，这很好。任何帮助表示赞赏。/* 根据 CSLR 实现红黑树*/

```
#include <stdio.h>
#include <stdlib.h>

struct rbtNode{
int key;
char color;
struct rbtNode *left;
struct rbtNode *right;
struct rbtNode *parent;
};

struct rbtNode* root = NULL;

void leftRotate(struct rbtNode *root,struct rbtNode *x){
struct rbtNode *y;
y = x->right;  //Set y
x->right = y->left; // Turn y's left subtree into x's right subtree
if( y->left != NULL){
    y->left->parent = x; //Bridge the y's left sublink
}
y->parent = x->parent; //Bridge x's old parent and y's parent
if( x->parent == NULL){
    root = y;
}
else if( x->key == x->parent->left->key){
    x->parent->left = y; //Bridge x's old parent's left or right child
}
else x->parent->right = y;
y->left = x; //put x on y's left
x->parent = y; //Take care of x's parent

return;
}

void rightRotate(struct rbtNode *root,struct rbtNode *y){
struct rbtNode *x;
x = y->left; //set x
y->left = x->right; //Turn x's right subtree into y's left subtree
if ( x->right != NULL){
    x->right->parent = y;
}
x->parent = y->parent; //Bridge y's old parent and x's parent
if( y->parent == NULL){
    root = x;
} 
else if( y->key == y->parent->left->key){
    y->parent->left = x; //Bridge y's old parent's left or right child
}
else y->parent->right = x;
x->right = y; //put y on x's right
y->parent = x; //Take care of y's parent

return;

}

void rbInsertFix(struct rbtNode *root,struct rbtNode *z){
struct rbtNode *y;
while (z->parent->color == 'r'){
    if (z->parent->key == z->parent->parent->left->key){
        y = z->parent->parent->right;
        if (y->color == 'r'){
            z->parent->color = 'b';
            y->color = 'b';
            z->parent->parent->color = 'r';
            z = z->parent->parent;
        }
        else if (z->key == z->parent->right->key){
            z = z->parent;
            leftRotate(root,z);
        }
        z->parent->color = 'b';
        z->parent->parent->color = 'r';
        rightRotate(root,z->parent->parent);
    }
    else {
        y = z->parent->parent->left;
        if (y->color == 'r'){
            z->parent->color = 'b';
            y->color = 'b';
            z->parent->parent->color = 'r';
            z = z->parent->parent;
        }
        else if (z->key == z->parent->left->key){
            z = z->parent;
            rightRotate(root,z);
        }
        z->parent->color = 'b';
        z->parent->parent->color = 'r';
        leftRotate(root,z->parent->parent);
    }
}
root->color = 'b';
}

void rbInsert(struct rbtNode *root, int val){
struct rbtNode *z = (struct rbtNode*)malloc(sizeof(struct rbtNode));
z->key = val;
z->left = NULL;
z->right = NULL;
z->color = 'r';
struct rbtNode *x = root;
struct rbtNode *y;
if ( root == NULL ){
    root = z;
    root->color = 'b';
    return;
}
while ( x != NULL){
    y = x;
    if ( z->key < x->key){
        x = x->left;
    }
    else x = x->right;
}
z->parent = y;
if ( y == NULL){
    root = z;
}
else if( z->key < y->key ){
    y->left = z;
}
else y->right = z;
rbInsertFix(root,z);

return;
}

/*Display RBT - Inorder Traversal*/
void inorderTree(struct rbtNode* root){
struct rbtNode* temp = root;
if (temp != NULL){
    inorderTree(temp->left);
    printf(" %d-%c ",temp->key,temp->color);
    inorderTree(temp->right);
}
return;
}

int main(int argc, char* argv[]){
int loop = 1;
while(loop){
    printf("\nRed Black Tree Management - Enter your choice : ");
    printf("\n1\tInsert into RBT\n2\tDisplay RBT inorder\n");
    int choice;
    int val;
    scanf("%d",&choice);
    switch(choice){
        case 1:
        printf("\nEnter the integer you want to add : ");
        scanf("%d",&val);
        rbInsert(root,val);
        break;

        case 2:
        printf("\nInorder tree traversal left-root-right\n");
        inorderTree(root);
        break;

        default:
        printf("\nInvalid Choice\n");
    }
    printf("\nPress '0' to terminate and '1' to continue : ");
    scanf("%d",&loop);
}

return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T09:02:33.320

在`void rbInsert(struct rbtNode *root, int val)`你`root`作为指针值传递。在 C 中，您不能通过按值传递来更新指针。改变

```
void rbInsert(struct rbtNode *root, int val) 
```

至

```
void rbInsert(int val) 
```

并且它将正常工作，因为它将使用全局`root`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T09:06:11.550

你什么都不显示，因为你的树是空的。您的代码的问题在于它永远不会修改`root`树（至少这是我在第一次阅读代码时注意到的问题）。

在所有函数中，您需要传递一个指向根的指针（即双指针），以便您可以修改它。例如你应该这样写：

```
void rbInsert(struct rbtNode **root, int val) 
```

而不是你的单指针版本。否则代码：

```
root = z;
root->color = 'b';
return; 
```

修改根的本地副本，因此不会影响树。

# asp.net - 我应该为 asp.net 项目使用哪个 Slider 控件：Silverlight 还是 Ajax？

> ID：14253820
> 
> 赞同：0
> 
> 时间：2013-01-10T08:44:49.120
> 
> 标签：asp.net, silverlight, asp.net-ajax, slider

Silverlight 和 Ajax 控件工具包都提供了 Slider 控件。

问题：**根据您的经验，哪一个是更好的选择？**

我对 Silverlight 控件的保留意见是，Silverlight 似乎被微软“放弃”了[如果我错了，请纠正我]，将来我可能不得不用额外的功能扩展项目。

我对 Ajax 控件的保留是相对缺乏文档 [与 Silverlight 相比]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:54:13.520

在我看来，silverlight 是最好用的。

有关两者的比较，请访问此[链接](http://www.slideshare.net/umarali1981/difference-between-ajax-and-silverlight)。

# c# - 使用 AddTicks 不会对 DateTime 造成影响

> ID：14253824
> 
> 赞同：6
> 
> 时间：2013-01-10T08:45:04.597
> 
> 标签：c#

我有以下`AddTicks`方法代码。日期时间对象的 Ticks 属性在 AddTick 方法之前和之后返回相同的值。为什么会这样？

> 一毫秒内有 10,000 个滴答声。
> 
> Ticks：此属性的值表示自 0001 年 1 月 1 日午夜 12:00:00 以来经过的 100 纳秒间隔数，它表示 DateTime.MinValue。
> 
> AddTicks ：将指定数量的刻度添加到此实例的值。

注意：我正在使用`.Net 4.0`框架

**代码**

```
 static void Main()
    {

        DateTime dt2 = new DateTime(2010, 5, 7, 10, 11, 12, 222);

        long x = dt2.Ticks;
        dt2.AddTicks(9999);

        long y = dt2.Ticks;

        bool isSame = false;
        if (x == y)
        {
            isSame = true;  
        }

        Console.WriteLine(isSame);
        System.Console.ReadKey();
    } 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-10T08:47:25.730

`AddTicks`（和其他`Add*`方法）不会更改 DateTime，但会返回一个新对象。

所以你应该使用

```
dt2 = dt2.AddTicks(...) 
```

`DateTime`是一个值类型并且是不可变的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T08:50:11.047

DateTime 值（如字符串）是不可变的。

对 DateTime 实例的任何操作都不会更改该实例的值，而是会返回您必须捕获的新 DateTime 值。

```
dt2 = dt2.AddTicks(9999); 
```

# windows - 如何查找 PCSC 阅读器的设备实例 ID

> ID：14253830
> 
> 赞同：4
> 
> 时间：2013-01-10T08:45:19.550
> 
> 标签：windows, pcsc, winscard, device-instance-id

只有在 Windows >= XP 上使用的 PCSC 阅读器的句柄和上下文`winscard`，是否有某种方法可以获取其设备实例 ID 或其他可用于`SetupDi*`API 以找出为所述阅读器加载的驱动程序的方法。

`SCardGetReaderDeviceInstanceId`仅在 Windows 8 上可用，所以很遗憾不适用于我。

作为方案 B，所有智能卡读卡器都可以在`SetupDi`使用智能卡读卡器类 guid 时进行枚举。但是我需要一个*独特的*属性才能在`SCard*`API 和`SetupDi*`API 之间关联阅读器。例如，序列号听起来不错，但并非所有制造商都使用它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-03-14T23:34:55.153

将 SCard 与 Setup 匹配的一种方法是打开驱动程序，然后使用 IOCTL_SMARTCARD_GET_ATTRIBUTE 查询 SCARD_ATTR_DEVICE_SYSTEM_NAME 并通过 SCard API 将其与一个匹配。

只有一个小问题。智能卡服务打开所有智能卡驱动程序而不共享。您首先需要停止智能卡服务，然后才能打开设备驱动程序。

另一种解决方案是使用 SCardControl 函数从 SCard API 中通过 IOCTL_xxx 调用调用驱动程序。

这里的问题是，到目前为止，我还没有找到一个 IOCTL_xxx 调用，我可以用它来匹配来自 Setup API 的任何属性。

我尝试了一个蛮力循环来扫描支持的 IOCTL_xxx 调用，但这样做时 SCard api 崩溃，并向事件查看器报告每个失败的 IOCTL_xxx 调用。

- 更新 -

IOCTL 支持以下标签：

SCARD_ATTR_VENDOR_NAME SCARD_ATTR_VENDOR_IFD_TYPE SCARD_ATTR_VENDOR_IFD_VERSION SCARD_ATTR_CHANNEL_ID SCARD_ATTR_PROTOCOL_TYPES SCARD_ATTR_DEFAULT_CLK SCARD_ATTR_MAX_CLK SCARD_ATTR_DEFAULT_DATA_RATE SCARD_ATTR_MAX_DATA_RATE SCARD_ATTR_MAX_IFSD SCARD_ATTR_POWER_MGMT_SUPPORT SCARD_ATTR_CHARACTERISTICS SCARD_ATTR_ICC_PRESENCE SCARD_ATTR_ICC_INTERFACE_STATUS SCARD_ATTR_DEVICE_UNIT

下面是从 IOCTL 生成智能卡设备名称的代码，也可以通过 SCARD 来演示两种方法之间的相似性

```
//------------------------------------------------------------------------------
// PROTOTYPES
//------------------------------------------------------------------------------

/* get the Smartcard DeviceName via IOCTL calls */
BOOL Smc_GetDeviceNameViaIOCTL(HANDLE,TCHAR*,UINT);

/* get the Smartcard DeviceName via SCARD calls */
BOOL Smc_GetDeviceNameViaSCARD(SCARDHANDLE,TCHAR*,UINT);

//------------------------------------------------------------------------------
// IMPLEMENTATIONS
//------------------------------------------------------------------------------

/************************************************/
/* get the Smartcard DeviceName via IOCTL calls */
/************************************************/

BOOL Smc_GetDeviceNameViaIOCTL(HANDLE in_hDev, TCHAR *out_Name, UINT in_MaxLen)
{
    /* locals */
    UINT  lv_Pos;
    DWORD lv_InBuf;
    DWORD lv_ValLen;
    DWORD lv_ChanID;
    CHAR  lv_OutBuf[256];
    BOOL  lv_Result;

  // reserve space for eos
  if (in_MaxLen-- <= 0)
    return FALSE;

  // init the position
  lv_Pos = 0;

  // set the tag
  lv_InBuf = SCARD_ATTR_VENDOR_NAME;

  // get the value
  lv_Result = DeviceIoControl(
    in_hDev, IOCTL_SMARTCARD_GET_ATTRIBUTE,
    &lv_InBuf, sizeof(DWORD), lv_OutBuf, 256, &lv_ValLen, 0);

  // fail?
  if (!lv_Result)
    return FALSE;

  // check the length, including space
  if (lv_Pos + lv_ValLen + 1 > in_MaxLen)
    return FALSE;

  // append to output
  AChar2TCharCL(lv_OutBuf, lv_ValLen, &out_Name[lv_Pos], in_MaxLen-lv_Pos);

  // update position
  lv_Pos += lv_ValLen;

  // append space
  out_Name[lv_Pos++] = ' ';

  // set the tag
  lv_InBuf = SCARD_ATTR_VENDOR_IFD_TYPE;

  // get the value
  lv_Result = DeviceIoControl(
    in_hDev, IOCTL_SMARTCARD_GET_ATTRIBUTE,
    &lv_InBuf, sizeof(DWORD), lv_OutBuf, 256, &lv_ValLen, 0);

  // fail?
  if (!lv_Result)
    return FALSE;

  // check the length, including space
  if (lv_Pos + lv_ValLen + 1 > in_MaxLen)
    return FALSE;

  // append to output
  AChar2TCharCL(lv_OutBuf, lv_ValLen, &out_Name[lv_Pos], in_MaxLen-lv_Pos);

  // update position
  lv_Pos += lv_ValLen;

  // append space
  out_Name[lv_Pos++] = ' ';

  // set the tag
  lv_InBuf = SCARD_ATTR_DEVICE_UNIT; 

  // get the value
  lv_Result = DeviceIoControl(
    in_hDev, IOCTL_SMARTCARD_GET_ATTRIBUTE,
    &lv_InBuf, sizeof(DWORD), &lv_ChanID, sizeof(DWORD), &lv_ValLen, 0);

  // fail?
  if (!lv_Result)
    return FALSE;

  // format as string
  FormatStringA(lv_OutBuf, 256, "%d", lv_ChanID);

  // check the length
  if (lv_Pos + strlenA(lv_OutBuf) > in_MaxLen)
    return FALSE;

  // append to output
  AChar2TCharC(lv_OutBuf, &out_Name[lv_Pos], in_MaxLen-lv_Pos);

  // done
  return TRUE;
}

/************************************************/
/* get the Smartcard DeviceName via SCARD calls */
/************************************************/

BOOL Smc_GetDeviceNameViaSCARD(SCARDHANDLE in_hCard, TCHAR *out_Name, UINT in_MaxLen)
{
    /* locals */
    UINT  lv_Pos;
    DWORD lv_InBuf;
    DWORD lv_ValLen;
    DWORD lv_ChanID;
    CHAR  lv_OutBuf[256];
    UINT  lv_hResult;

  // reserve space for eos
  if (in_MaxLen-- <= 0)
    return FALSE;

  // init the position
  lv_Pos = 0;

  // set the tag
  lv_InBuf  = SCARD_ATTR_VENDOR_NAME;
  lv_ValLen = 256;

  // get the value
  lv_hResult = lib_SCardGetAttrib(in_hCard, lv_InBuf, (BYTE*)lv_OutBuf, &lv_ValLen);

  // fail?
  if (FAILED(lv_hResult))
    return FALSE;

  // check the length, including space
  if (lv_Pos + lv_ValLen + 1 > in_MaxLen)
    return FALSE;

  // append to output
  AChar2TCharCL(lv_OutBuf, lv_ValLen, &out_Name[lv_Pos], in_MaxLen-lv_Pos);

  // update position
  lv_Pos += lv_ValLen;

  // append space
  out_Name[lv_Pos++] = ' ';

  // set the tag
  lv_InBuf  = SCARD_ATTR_VENDOR_IFD_TYPE;
  lv_ValLen = 256;

  // get the value
  lv_hResult = lib_SCardGetAttrib(in_hCard, lv_InBuf, (BYTE*)lv_OutBuf, &lv_ValLen);

  // fail?
  if (FAILED(lv_hResult))
    return FALSE;

  // check the length, including space
  if (lv_Pos + lv_ValLen + 1 > in_MaxLen)
    return FALSE;

  // append to output
  AChar2TCharCL(lv_OutBuf, lv_ValLen, &out_Name[lv_Pos], in_MaxLen-lv_Pos);

  // update position
  lv_Pos += lv_ValLen;

  // append space
  out_Name[lv_Pos++] = ' ';

  // set the tag
  lv_InBuf  = SCARD_ATTR_DEVICE_UNIT;
  lv_ValLen = sizeof(DWORD);

  // get the value
  lv_hResult = lib_SCardGetAttrib(in_hCard, lv_InBuf, (BYTE*)&lv_ChanID, &lv_ValLen);

  // fail?
  if (FAILED(lv_hResult))
    return FALSE;

  // format as string
  FormatStringA(lv_OutBuf, 256, "%d", lv_ChanID);

  // check the length
  if (lv_Pos + strlenA(lv_OutBuf) > in_MaxLen)
    return FALSE;

  // append to output
  AChar2TCharC(lv_OutBuf, &out_Name[lv_Pos], in_MaxLen-lv_Pos);

  // done
  return TRUE;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T13:08:22.260

根据我的测试，scard 服务按以下顺序分配名称：
a）SPDRP_FRIENDLYNAME（如果存在
）b）SPDRP_DEVICEDESC

这样，我能够将 SCardListReaders() 名称与正确的设备/驱动程序匹配。

希望这可以帮助 ...

# ajax - ajax json表单提交

> ID：14253831
> 
> 赞同：0
> 
> 时间：2013-01-10T08:45:19.970
> 
> 标签：ajax, json

我有这个表单提交代码：

**索引.php**

```
 <html>
    <head>
        <title>My Form</title>

        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>

        <script type="text/javascript">

            $(document).ready(function(){

                $("#myForm").submit(function(){
                    var tvyalner = $("#myForm").serialize();
                    $.ajax({
                        type: "POST",
                        url: "postForm.ajax.php",
                        data: tvyalner,
                        dataType: "json",

                        success: function(data){
                            $("#formResponse").removeClass('error');
                            $("#formResponse").addClass(data.status);
                            $("#formResponse").html(data.message);
                            if(data.status === 'success'){$("#myForm table").hide();}
                        },
                        error: function(){
                    $("#formResponse").removeClass('success');
                    $("#formResponse").addClass('error');
                    $("#formResponse").html("There was an error submitting the form. Please try again.");
                        }
                    });

                    //make sure the form doens't post
                    return false;

                });

            });
        </script>

        <style type="text/css">

            .success{

                border: 2px solid #009400;
                background: #B3FFB3;
                color: #555;
                font-weight: bold;

            }

            .error{

                border: 2px solid #DE001A;
                background: #FFA8B3;
                color: #000;
                font-weight: bold;
            }
        </style>

    </head>
    <body>
<div class="mfm">
    <form id="myForm" name="myForm" method="post" action="" style="margin: 0 auto; width: 300px;">

        <div id="formResponse"></div>

        <table>

            <tr><td>Name:</td><td><input name="name" type="text" value=""></td></tr>
            <tr><td>Email:</td><td><input name="email" type="text" value=""></td></tr>
            <tr><td>Message:</td><td><textarea name="message" rows="5" cols="20"></textarea></td></tr>
            <tr><td>&nbsp;</td><td><input type="submit" name="submitForm" value="Submit Form"></td></tr>

        </table>

    </form>
</div>  
    </body>
</html> 
```

**postForm.ajax.php**

```
 <?php

//function to validate the email address
//returns false if email is invalid
function checkEmail($email){

    if(eregi("^[a-zA-Z0-9_]+@[a-zA-Z0-9\-]+\.[a-zA-Z0-9\-\.]+$]", $email)){
        return FALSE;
    }

    list($Username, $Domain) = split("@",$email);

    if(@getmxrr($Domain, $MXHost)){
        return TRUE;

    } else {
        if(@fsockopen($Domain, 25, $errno, $errstr, 30)){
            return TRUE; 
        } else {

            return FALSE; 
        }
    }
}   

//response array with status code and message
$response_array = array();

//validate the post form

//check the name field
if(empty($_POST['name'])){

    //set the response
    $response_array['status'] = 'error';
    $response_array['message'] = 'Name is blank';

//check the email field
} elseif(!checkEmail($_POST['email'])) {

    //set the response
    $response_array['status'] = 'error';
    $response_array['message'] = 'Email is blank or invalid';

//check the message field
} elseif(empty($_POST['message'])) {

    //set the response
    $response_array['status'] = 'error';
    $response_array['message'] = 'Message is blank';

//form validated. send email
} else {

    //send the email
    $body = $_POST['name'] . " sent you a message\n";
    $body .= "Details:\n\n" . $_POST['message'];
    mail($_POST['email'], "SUBJECT LINE", $body);

    //set the response
    $response_array['status'] = 'success';
    $response_array['message'] = 'Email sent!';

}

echo json_encode($response_array);

?> 
```

首次提交后显示：

> 名称为空。

填写字段并再次提交。显示

> 有一个错误提交表单。请再试一次。

就这样。

代码在本地主机中不起作用。

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:00:37.943

我建议使用这个错误函数来查看错误是什么：

```
$.ajax({
    /* ... */
    error: function(jqXHR, textStatus, errorThrown){

        console.log(errorThrown); // Or use alert()
        console.log(textStatus);

        $("#formResponse").removeClass('success');
        $("#formResponse").addClass('error');
        $("#formResponse").html("There was an error submitting the form. Please try again.");
    }
}); 
```

# python - 为什么 python DRMAA 库 (drmaa-python) 有时无法确定提交给 SGE (UNDETERMINED) 的作业状态？

> ID：14253832
> 
> 赞同：1
> 
> 时间：2013-01-10T08:45:23.283
> 
> 标签：python, sungridengine, drmaa

我正在使用[drmaa-python](http://code.google.com/p/drmaa-python/)向 SGE（Sun Grid Engine）提交和监视作业。我在 GUI 中有以下状态

*   队列中活动的作业
*   运行作业
*   已完成的工作
*   失败的工作
*   状态未定

有时我得到的工作很少*状态未确定*。*当我在 SGE 主机的终端中使用qstat*检查作业状态时，我可以看到所有作业都在运行，而没有一个作业失败。*Status Undetermined*通常会误导用户，因为用户可能认为*Status Undetermined*作业存在某种问题。

所以，我知道问题不在于 SGE，而在于 drmaa-python 库。

有谁知道为什么 drmaa-python 无法确定状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:10:20.173

drmaa-python 只是 DRMAA C 库的一个瘦 ctype 包装器，没有任何专用逻辑。出于这个原因，您看到的 UNDETERMINED 状态是 SGE DRMAA C 库在您询问时提供的状态。

据我所知，SGE 的 DRMAA C 库有时可能无法获取状态。我建议在您的 python 应用程序中添加一些自定义重试逻辑，以简单地重新询问调度程序。

# regex - 正则表达式：匹配集合中的至少一个字符

> ID：14253833
> 
> 赞同：0
> 
> 时间：2013-01-10T08:45:23.380
> 
> 标签：regex, set, character, posix

我有一个字符集 {x, y, z} 并且我想检查某个字符串是否包含该字符集中的至少一个字符。
例如：

```
abxyz - valid
zabc1 - valid
abc4e - not valid 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T08:49:17.253

`/.*[xyz].*/`应该做的伎俩

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:48:37.377

试试这个正则表达式：

```
.*[x-z].* 
```

这只会匹配`[x-z]`至少包含一次的行。

**[例子](http://rubular.com/r/ugbaHtMrcc)**

# css - 条件语句和即空白页？

> ID：14253835
> 
> 赞同：0
> 
> 时间：2013-01-10T08:45:30.680
> 
> 标签：css, html, conditional-statements, google-font-api

认为这些工作正常，但只是检查我在 ie9 中得到一个空白页。如果我使用开发者工具切换到 ie 8 或 7 同样的结果。也许我现在太累了，但我没有看到下面的任何问题导致问题。

顶部为 html 添加了一个类，即 8 或更低，因此我可以在我的 css 中删除任何使用 google 字体的内容。然后底部为任何不是 IE 或 IE 9 或更高版本的东西加载谷歌字体。

这有什么问题？

```
<!DOCTYPE html>
<!--[if lte IE 8 ]> <html class="ie8" lang="en-US"> <![endif]-->
<!--[if !IE]><!--> <html lang="en-US"> <!--<![endif]-->

<head>
<meta charset="utf-8">
<title>test</title>
<meta name="description" content="test">
<link rel="stylesheet" href="/css/base.css" type="text/css">
<link rel="stylesheet" href="/css/styles.css" type="text/css">
<!--[if gt IE 8]>
<link href="http://fonts.googleapis.com/css?family=Kite+One|Open+Sans:400italic,400,700" rel="stylesheet" type="text/css">
<![endif]-->

<!--[if !IE]><!-->
<link href="http://fonts.googleapis.com/css?family=Kite+One|Open+Sans:400italic,400,700" rel="stylesheet" type="text/css">
<!--<![endif]-->
</head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:11:43.540

我不确定这些行：

```
<!--[if !IE]><!--> <html lang="en-US"> <!--<![endif]-->
<!--[if !IE]><!-->
<link href="http://fonts.googleapis.com/css?family=Kite+One|Open+Sans:400italic,400,700" rel="stylesheet" type="text/css">
<!--<![endif]--> 
```

他们不应该是：

```
<!--[if !IE]> <html lang="en-US"> <![endif]-->
    <!--[if !IE]>
    <link href="http://fonts.googleapis.com/css?family=Kite+One|Open+Sans:400italic,400,700" rel="stylesheet" type="text/css">
    <![endif]--> 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T22:36:18.353

看起来你的最后一个条件语句搞砸了。

```
<!--[if !IE]><!--> 
```

删除多余的

```
<!--> 
```

以及关闭的地方

```
<!--<![endif]--> 
```

将其更改为

```
<![endif]--> 
```

# javascript - 使用 jquery 计算值

> ID：14253836
> 
> 赞同：0
> 
> 时间：2013-01-10T08:45:42.707
> 
> 标签：javascript, jquery, grails

我还在学习 jquery，我的 gsp 中有这段代码：

```
<g:each in="${poundList}" var="poundInstance">
  <span>${poundInstance?.name}<span/>
  <span class="price">${poundInstance?.price}<span/>
</g:each>
  <span id="total"></span> 
```

在我的jQuery中：

```
function calculatePound() {
  totals= 0;
$(".price").each (function() {
    totals= totals+ parseFloat("0" + $(this).val());
});
$("#total").text(totals.toFixed(2));
}

$(document).ready(function() {
calculatePound();
}); 
```

上面的代码没有错误。但问题是`<'span id="total"'>`为空或值为 0.0

我试图做的是计算每个 poundInstance 的价格并显示它。
如何使用此代码使其工作？或者我离我想要达到的目标太远了？
谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T08:48:08.233

不能使用[val()](http://api.jquery.com/val/)，该方法主要用于获取 input、select 和 textarea 等表单元素的值。您可以使用[text()](http://api.jquery.com/text/)：

```
function calculatePound() {
    var totals= 0;
    $(".price").each (function() {
        totals= totals+ parseFloat("0" + $(this).text());
    });
    $("#total").text(totals.toFixed(2));
} 
```

# php - ajax请求不在php中发送电子邮件

> ID：14253839
> 
> 赞同：0
> 
> 时间：2013-01-10T08:45:51.687
> 
> 标签：php, ajax

我使用正确`code`，但 ajax 请求仍然不满足`sending the email`- 任何人都可以看看并建议我可以做些什么来更好地获得`email`

这是`form`：

```
<form method="post" action="process.php">
    <div class="element">
        <label>Name</label>
        <input type="text" name="name" class="text" />
    </div>
    <div class="element">
        <label>Email</label>
        <input type="text" name="email" class="text" />
    </div>
    <div class="element">
        <label>Phone </label>
        <input type="text" name="website" class="text" />
    </div>
    <div class="element">
        <label>Comment</label>
        <textarea name="comment" class="text textarea" /></textarea>
    </div>
    <div class="element">

        <input type="submit" id="submit"/>
        <div class="loading"></div>
    </div>
    </form> 
```

这是ajax请求：-

```
<script type="text/javascript">
$(document).ready(function() {

    //if submit button is clicked
    $('#submit').click(function () {        

        //Get the data from all the fields
        var name = $('input[name=name]');
        var email = $('input[name=email]');
        var website = $('input[name=website]');
        var comment = $('textarea[name=comment]');

        //Simple validation to make sure user entered something
        //If error found, add hightlight class to the text field
        if (name.val()=='') {
            name.addClass('hightlight');
            return false;
        } else name.removeClass('hightlight');

        if (email.val()=='') {
            email.addClass('hightlight');
            return false;
        } else email.removeClass('hightlight');

        if (comment.val()=='') {
            comment.addClass('hightlight');
            return false;
        } else comment.removeClass('hightlight');

        //organize the data properly
        var data = 'name=' + name.val() + '&email=' + email.val() + '&website=' + 
        website.val() + '&comment='  + encodeURIComponent(comment.val());

        //disabled all the text fields
        $('.text').attr('enabled','false');

        //show the loading sign
        $('.loading').show();

        //start the ajax
        $.ajax({
            //this is the php file that processes the data and send mail
            url: "process.php", 

            //GET method is used
            type: "GET",

            //pass the data         
            data: data,     

            //Do not cache the page
            cache: false,

            //success
            success: function (html) {              
                //if process.php returned 1/true (send mail success)
                if (html==1) {                  
                    //hide the form
                    $('.form').fadeOut('slow');                 

                    //show the success message
                    $('.done').fadeIn('slow');

                //if process.php returned 0/false (send mail failed)
                } else alert('Sorry, unexpected error. Please try again later.');               
            }       
        });

        //cancel the submit button default behaviours
        return false;
    }); 
}); 
</script> 
```

并且`process.php`作为

```
<?php

//Retrieve form data. 
//GET - user submitted data using AJAX
//POST - in case user does not support javascript, we'll use POST instead
$name = ($_GET['name']) ? $_GET['name'] : $_POST['name'];
$email = ($_GET['email']) ?$_GET['email'] : $_POST['email'];
$website = ($_GET['website']) ?$_GET['website'] : $_POST['website'];
$comment = ($_GET['comment']) ?$_GET['comment'] : $_POST['comment'];

//flag to indicate which method it uses. If POST set it to 1
if ($_POST) $post=1;

//Simple server side validation for POST data, of course, you should validate the email
if (!$name) $errors[count($errors)] = 'Please enter your name.';
if (!$email) $errors[count($errors)] = 'Please enter your email.'; 
if (!$comment) $errors[count($errors)] = 'Please enter your comment.'; 

//if the errors array is empty, send the mail / no errors found
if (!$errors) {

//recipient
    $to = 'info@abc.com';   
    //sender
    $from = $name . ' <' . $email . '>';

    //subject and the html message
    $subject = 'Comment from ' . $name; 
    $message = '
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head></head>
    <body>
    <table>
        <tr><td>Name</td><td>' . $name . '</td></tr>
        <tr><td>Email</td><td>' . $email . '</td></tr>
        <tr><td>Phone</td><td>' . $website . '</td></tr>
        <tr><td>Comment</td><td>' . nl2br($comment) . '</td></tr>
    </table>
    </body>
    </html>';

    //send the mail
    $result = sendmail($to, $subject, $message, $from);

    //if POST was used, display the message straight away
    if ($_POST) {
        echo 'Thank you! We have received your message.';

    //This one for ajax
    //1 means success, 0 means failed
    } else {
        echo '1';   
    }

} else {
    //display the errors message
    for ($i=0; $i<count($errors); $i++) echo $errors[$i] . '<br/>';
    echo '<a href="yourdomain.com">Back</a>';
    exit;
}

//Simple mail function with HTML header
function sendmail($to, $subject, $message, $from) {
    $headers = "MIME-Version: 1.0" . "\r\n";
    $headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";
    $headers .= 'From: ' . $from . "\r\n";

    $result = mail($to,$subject,$message,$headers);

    if ($result) return 1;
    else return 0;
}

?> 
```

最后有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:57:22.337

请浏览*process.php?name=jone&email=john@example.com&website=www.blabla.com&comment=blablabla*以了解问题是否出在服务器端脚本中。

# ruby-on-rails - 防止在 ng-invalid 上提交 Rails 表单

> ID：14253840
> 
> 赞同：0
> 
> 时间：2013-01-10T08:45:58.910
> 
> 标签：ruby-on-rails, forms, coffeescript, angularjs, haml

我有一个通过 rails 助手生成的表单，上面有一些 AngularJS。

```
 = form_for some_models do |f|
      %fieldset.form-horizontal
          %div.some-class
     #And so on and so forth
      =f.submit 
```

等等。在这种形式中，我有各种相互嵌套的角度指令和控制器。其中一个指令是侦听一个字段并比较其值以进行一些自定义角度验证，如下所示：

```
 ctrl.$setValidity("decisionRuleCodeActivated", scope.valid). 
```

这会在表单和相关字段上正确设置 ng-invalid/ng-valid，但是仍然可以毫无问题地提交表单。

虽然我知道阻止这种行为的“正确”方法是引入一个 ngSubmit，它进行验证，然后联系一个 Angular 服务，该服务序列化为 JSON 并发布到相关端点，但这需要重写一个真正淫秽的代码量。

因此我的问题是：

如果不这样做，如何防止表单提交？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:33:36.873

我的解决方案：

```
 if scope.valid is true
    angular.element("form.ng-valid").find("input:submit").click(->
      true
    )
  else
    angular.element("form.ng-invalid.ng-dirty").find("input:submit").click(->
      false
    ) 
```

上面的代码在由手表触发的方法中，就在指令中的 $setValidity 之后

# google-bigquery - 无法上传以整数开头的 CSV

> ID：14253848
> 
> 赞同：0
> 
> 时间：2013-01-10T08:46:23.803
> 
> 标签：google-bigquery

我遇到了一个奇怪的 BigQuery 错误：我无法上传以整数开头（第一行，第一列）的 CSV 文件。

这是我的架构：`COL1:INTEGER,COL2:INTEGER,COL3:STRING`

这是我的 csv 文件内容：

```
100,4,XXX
100,4,XXX 
```

如果我将 STRING 列作为第一列，则上传正常。

如果我添加一个标题并告诉 BigQuery 在导入期间跳过它，那么上传也可以。

但是对于上面的 CSV 和架构，BigQuery 总是抱怨：`Line:1 / Field:1, Value cannot be converted to expected type.`

任何人都知道问题是什么？

提前谢谢你，大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:54:20.633

我无法重现此问题 - 我将内容复制并粘贴到文件中并毫无问题地上传。

也许上传的文件格式以某种方式损坏？如果文件开头有额外的字节，则这些字节将在标题行中被忽略，但可能导致此错误，因为第一个字段的第一个值应为整数。我建议检查文件中的实际二进制数据，以确保没有任何有趣的事情发生。

此外，您是通过 Web UI、命令行工具还是 API 进行此导入？您是否尝试过其他方法之一？

# java - 格式化多部分 HTML/文本电子邮件以在 Internet Explorer 中工作

> ID：14253857
> 
> 赞同：0
> 
> 时间：2013-01-10T08:47:00.593
> 
> 标签：java, html, internet-explorer, layout, jakarta-mail

我使用 JavaMail 创建了一个应用程序，它读取电子邮件并获取其[内容](http://pastebin.com/XYCM277w)。内容将以 HTML 格式获取。此内容将被分析，然后转发到另一个电子邮件地址。

我已经在 Chrome、Mozilla、Outlook、Office 365、Thunderbird 和 Internet Explorer 中测试了电子邮件的布局。一切都很好，当然，除了 IE。

我制作了一些屏幕截图，一个在 Chrome 中，另一个在 Internet Explorer 中，都来自同一个邮件客户端 (Office 365)。

### Chrome 中的好电子邮件

![Chrome 电子邮件](../Images/9ce653ddb7a85d6f2386d4b5281e9002.png)

### 错误的 IE 电子邮件

![错误的 IE 电子邮件](../Images/03abaf4964e38d42b02204d39209470a.png)

我整理了`multipart`一封电子邮件，一部分用于内容，另一部分用于附件。这是我正在使用的代码：

```
public void SentTest(String messageContent) throws IOException, ParseException, NoSuchProviderException {

            //Only get text between HTML tags
        Pattern pattern = Pattern.compile(".*?<html.*?>(.*?)</html>.*?");
        Matcher matcher = pattern.matcher(messageContent);
        if (matcher.matches()) {
            messageContent= matcher.group(1);
        }

        messageContent= Jsoup.clean(messageContent, Whitelist.relaxed());

        Properties props = new Properties();
        props.put("mail.smtp.auth", "true");
        props.put("mail.smpt.host", "pod51010.outlook.com");
        props.put("mail.smtp.port", "587");
        props.put("mail.smtp.starttls.enable", "true");

        Session session = Session.getInstance(props, null);
        try {
            transport = session.getTransport("smtp");
            try {
                transport.connect("host", "email", "password");
            } catch (MessagingException ex) {
                ex.printStackTrace();
            }
        } catch (NoSuchProviderException ex) {
            ex.printStackTrace();
        }

        try {

            Message message = new MimeMessage(session);
            message.setFrom(new InternetAddress("email"));
            message.setRecipients(Message.RecipientType.TO,
                    InternetAddress.parse("testemail"));
            message.setSubject("Test");
            MimeBodyPart testMessagePart = new MimeBodyPart();
            testMessagePart.setText(inhoudBericht, "ISO-8859-1", "html");

            testMessagePart.setHeader("Content-Type", "text/html; charset=\"iso-8859-1\"");
            testMessagePart.setHeader("Content-Transfer-Encoding", "quoted-printable");
            testMessagePart.setHeader("MIME-Version", "1.0");

            Multipart multipart = new MimeMultipart("multipart");
            multipart.addBodyPart(testMessagePart);

            //Set the content of the Message
            message.setHeader("", "");
            message.setContent(multipart, "html; charset=\"iso-8859-1\"");

            try {
                transport.sendMessage(message, message.getAllRecipients());
            } catch (Exception ex) {
                ex.printStackTrace();
            }
            transport.close();

        } catch (MessagingException e) {
            throw new RuntimeException(e);
        }

    } 
```

我的问题是：如何使电子邮件的布局灵活，使其适用于所有浏览器？

### 编辑

在 HTML 添加`<html>`标签和 a`Doctype`并删除`width`属性后，布局会“正确”显示，但当然还有另一个问题：

![蓝色布局](../Images/56ef754ccc154abd16afc14e59d91398.png)

如您所见，它现在是蓝色的，并且正在显示表格轮廓。有什么办法摆脱这个吗？

### 编辑

`bgcolor`通过删除标签摆脱了蓝色背景。现在唯一的问题是删除表格轮廓。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:12:24.847

通过使用 Jsoup 和 NodeTraverser 解决了这个问题（归功于[这个](https://stackoverflow.com/a/8180459/975468)答案）

```
Document doc = Jsoup.parse(input);

NodeTraversor traversor  = new NodeTraversor(new NodeVisitor() {

  @Override
  public void tail(Node node, int depth) {
    if (node instanceof Element) {
        Element e = (Element) node;
        e.removeAttr("width");
        e.removeAttr("border");
        e.removeAttr("bgcolor");
    }
  }

  @Override
  public void head(Node node, int depth) {        
  }
});

traversor.traverse(doc.body());
String modifiedHtml = doc.toString(); 
```

并添加一个文档类型

`modifiedHTML = "<!DOCTYPE html PUBLIC \" //W3C//DTD HTML 4.0.1//en\">"+modifiedHTML;`

这可能不是最好的解决方案，但它有效，我对此感到满意:)。谢谢您的帮助！

# c# - Ext.Net 2.1 是否可以创建自定义用户控件？

> ID：14253866
> 
> 赞同：0
> 
> 时间：2013-01-10T08:47:27.040
> 
> 标签：c#, asp.net, web-applications, ria, ext.net

我试图找到如何使用 ext.net 创建自定义用户控件的方法，但没有成功。我尝试过的发现：

1) 创建 .ascx 用户控件 - 无法将此控件添加到 ext.net 父级，只能通过控件加载，但是

2）如果我通过 UserControlLoader 加载控件，我已经成功加载了控件，但是直接事件在加载的控件中不起作用。

3) 扩展 ext.net 控件 - 使用此选项无法将 XML 标记用于控件 UI。

那么，有人知道我如何将应用程序 UI 和 UI 逻辑拆分为不同部分的最佳实践吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:27:14.963

也许以下 Ext.NET UserControl 相关示例可以提供帮助，请参阅[http://examples.ext.net/#/search/usercontrol](http://examples.ext.net/#/search/usercontrol)

# ruby-on-rails - Rails 渲染部分被提前调用

> ID：14253867
> 
> 赞同：0
> 
> 时间：2013-01-10T08:47:31.570
> 
> 标签：ruby-on-rails

我正在挑战 Rails 中一个恼人的问题。

我有一个视图，我正在尝试渲染一个部分，但只有在`@prev_activity != message.about`这样的时候：

```
<%= @prev_activity != message.about ? render(:partial => "dashboards/stream_activity", :locals => { :activity => message.about }) : render(:text => "")  %> 
```

在dashboards/_stream_activity.html.erb 中，我渲染了一些内容并设置了先前的活动变量：

```
<% @prev_activity = activity %> 
```

它不起作用，因为在`@prev_activity != message.about`检查 rails render dashboards/_stream_activity.html.erb 之前，`@prev_activity`它等于`message.about`.

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:51:28.233

尝试

```
 <%= render(:partial => "dashboards/stream_activity",:locals => 
                        { :activity => message.about }) 
                        if @prev_activity != message.about %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:54:04.740

如果您不使用三元运算符，您的问题可能会消失：

```
<% if @prev_activity != message.about %>
  <%= render(:partial => "dashboards/stream_activity", :locals => { :activity => message.about }) %>
<% else %>
  <%= render(:text => "") %>
<% end %> 
```

（最好将此功能放在视图辅助方法中）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T09:15:52.747

保留您的变量集代码，即`<% @prev_activity = activity %>`在部分调用之前。例如，将该代码保存在调用控制器中，然后进行部分渲染。例如 -

```
def myactivity
  // your code
  @prev_activity = activity
  render("dashboards/stream_activity",:locals => { :activity => message.about }) 
  if @prev_activity != message.about
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T09:48:36.737

我终于找到了解决方案。鉴于我在哪里渲染我设置的`@prev_activity`集合`nil`。

```
<% @prev_activity = nil %>
<%= render :partial => "dashboards/stream_message", :collection => @workspace_stream.messages %> 
```

比在仪表板/_stream_message.html.erb 中的预期工作方式：

```
<% if @prev_activity != message.about %>
  <%= render partial: "dashboards/stream_activity", locals: { activity: message.about }%>
<% end %> 
```

仪表板/_stream_activity.html.erb：

```
<% @prev_activity = activity %> 
```

在控制器中设置`@prev_activity`的`nil`效果不如此处发布的所有其他解决方案。

# eclipse - 如何使用 Eclipse Glassfish 插件在 Glassfish 服务器中部署 EAR 文件

> ID：14253873
> 
> 赞同：0
> 
> 时间：2013-01-10T08:47:47.807
> 
> 标签：eclipse, plugins, glassfish

我想使用 Eclipse glassfish 插件（在服务器选项卡中）在 glassfish 应用程序服务器中部署一个 ear 项目，但我无法将我的 ear 项目添加为该插件的资源。我想知道这个插件是否可以部署一个耳朵项目而不是战争？我在 Juno 和 Indigo 日食中都尝试过这个问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:45:08.740

我假设您正在使用来自[http://glassfishplugins.java.net/](http://glassfishplugins.java.net/)的 Eclipse 插件。您可以通过单击“Run on Server”并选择您的 glassfish 实例在 Eclipse 中部署 EAR 项目。

如果在您的情况下这是不可能的，那么您的设置可能有问题，您必须提供有关特定问题/错误的一些信息。

# java - 我可以将 Android 应用程序转换为 iPhone/iPad 应用程序吗？

> ID：14253877
> 
> 赞同：1
> 
> 时间：2013-01-10T08:48:08.267
> 
> 标签：java, android, iphone, ios

我可以将 Android 应用程序转换为 iPhone/iPad（IOS 对吗？）应用程序？我该怎么做？我是一名 Java 开发人员，我知道 android。我经历了一个名为 In-The-Box 的免费和开源项目，但它似乎已经死了。请帮忙

**更新**

更新，因为每个人都说这是不可能的。

这是我提到的项目。[http://www.flexycore.com/ispectrum-overview.html](http://www.flexycore.com/ispectrum-overview.html)

谁能告诉我这是否死了？为什么他们没有下载？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T08:51:22.430

Android 通常是用类似 java 的语言构建的，在 iPhone 上你用 ObjectiveC 进行编码。显然，这些是完全不同的实体，因此您不能在它们之间共享代码和逻辑。

您可以研究像 MonoDroid、MonoTouch 等共享 .net 样式编码的“通用”解决方案，或者您可以研究像 HTML5 样式跨平台解决方案这样的“phonegap”。

为了在 iPhone 上转换 Android 应用程序，您需要非常了解将程序从基于 Android 的管理系统插入到 Apple 操作系统中所涉及的技术。虽然移植过程可能不像人们希望的那样顺利或容易，但想法 - 几乎保持不变。整个想法是从早期基于 Android 的应用程序中提取尽可能多的信息，并应用创新技术将其转换为与 iPhone 兼容的应用程序。

读[这个](https://stackoverflow.com/questions/5296545/is-there-an-easy-way-to-convert-android-application-to-ipad-iphone)。

此[链接](http://workmonk.com/service/convert-android-app-iphone-app)将为您提供帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T08:53:36.507

如果您事先没有考虑过，就没有这种方法（实际上很方便）来转换现有应用程序。语言概念太“不同”

如果您使用过 HTML、CSS、JavaScript 或 PhoneGap 等跨平台框架，这是可行的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T08:56:33.907

好吧，有一个工具可以做到这一点（至少他们告诉它），称为[j2objc](https://code.google.com/p/j2objc/)。免责声明：我从未尝试过，也从不相信他们。

现在您的（实际）选项是：

1）从头开始学习目标-C和代码（稍后感谢我的建议）。

2）尝试使用一些跨平台的工具，如PhoneGap、Appcelerator。（如果你还没有做你的安卓应用程序）

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-10T09:23:15.720

没有安全且简单的方法可以将 Android 应用程序转换为 iOS，因为懒惰的人经常在寻找它。任何严肃的项目总是从头开始为两个（或更多）平台编写代码。

# colors - 结构的 Visual Studio 2012 代码突出显示

> ID：14253879
> 
> 赞同：27
> 
> 时间：2013-01-10T08:48:16.260
> 
> 标签：colors, visual-studio-2012, codehighlighter

我现在有点疯了。我的公司从 VS2008 切换到 VS2012，现在我找不到任何选项来为结构启用代码突出显示。

在 VS2008 中类似于

`public Color Foreground {get;set;}`

该关键字`Color`将被突出显示，因为它是一个众所周知且已定义的结构。

在 VS2012 中，突出显示功能不再适用于结构。

其他人也注意到了吗？有没有人有解决方案？我浏览了所有颜色选项并尝试了所有方法，但我无法`struct`恢复旧的高亮颜色。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-10T09:05:28.867

在VS2012中它对我来说很好：

![在此处输入图像描述](../Images/14a095c330a1dbe03d978b1c5634c7e2.png)

你要找的是`User Types (Value types)`颜色
`Tools -> Options -> Environment -> Fonts and Colors`

![在此处输入图像描述](../Images/90ae44c207e852ac472c5f220828b54a.png)

如果这没有帮助，您应该检查您是否没有可能会更改颜色的外部插件...
更新 - 根据您的评论 - 如果您使用的是*生产力工具*，您可能需要禁用来自...的*彩色参数帮助*选项`Tools -> Options -> Productivity Power Tools -> Colorized Parameter Help`

另一种选择是尝试**[修复](http://msdn.microsoft.com/en-us/library/aa983433%28v=vs.90%29.aspx)**您安装的 VS2012

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-01-12T20:44:26.887

我也遇到了这个问题，我发现罪魁祸首是**生产力工具**。有一种解决方法可以使结构的语法突出显示以重新出现。您必须关闭Productivity Power Tools 选项中的**彩色参数帮助**并重新启动 Visual Studio。

这可以在工具 > 选项 > 生产力工具 > 彩色参数帮助中找到

![PPT彩色参数帮助](../Images/a260e3f63131806f9ab604ae42d4b459.png)

另请参阅[此错误报告](http://connect.microsoft.com/VisualStudio/feedback/details/770603/text-editor-the-type-color-for-structs-is-black)以获取更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T20:35:41.493

我想我找到了解决这个问题的另一种方法，它可以让您打开彩色参数帮助功能。

在字体和颜色中，我为“签名帮助 - 用户类型（值类型）”项指定了一个值，我不再遇到问题了。

注意：我还安装了颜色主题编辑器扩展 - 我不确定这是否对解决方法的有效性有任何影响（但我之前也安装了它，因此仅扩展并不能解决问题）。

此外，有人在 MS Connect 上发布了该错误：[http ://connect.microsoft.com/VisualStudio/feedback/details/770603/text-editor-the-type-color-for-structs-is-black](http://connect.microsoft.com/VisualStudio/feedback/details/770603/text-editor-the-type-color-for-structs-is-black)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-09T20:18:48.413

我尝试关闭 Colorized Power Tools 参数，卸载并重新安装 Power Tools 和 Visual Studio 的“修复”，但均无效。

最终的工作是删除与解决方案文件 (.sln) 位于同一目录中的 .suo 和 .dotSettings 文件。

# jquery - 如何使用Jquery在更改函数之外返回值

> ID：14253885
> 
> 赞同：0
> 
> 时间：2013-01-10T08:48:49.940
> 
> 标签：jquery

这是一个 Jquery 按钮事件的代码，它检查每个 tr 和每个 td，如果它发生变化，它会进一步并将一些属性值返回到隐藏控件中，

```
function SetUpdateOnchange() 
{
$('.sd-flex-grid tbody tr').each(function(intChangedRowNo) {
    //alert('test row');
    $(this).children('td').find(':input,textarea').change(function() {
      //  alert('test');
        var strKeyField = '';
        var strKeyValue = '';
        var strKeyType = '';
        strActField ='';
        strActValue ='';
        strActType ='';
        var strUpdateRows = new String($('#sd-hidden-updaterowsno').val());
        var re = new RegExp(intChangedRowNo + "~+");
        if (strUpdateRows.match(re) == null) {
            $('#sd-hidden-updaterowsno').val($('#sd-hidden-updaterowsno').val() + intChangedRowNo + "~");
            var rowCount = 0;

            $('.sd-flex-grid tbody tr').each(function() {
                if (rowCount == intChangedRowNo) {
                    $(this).children('td').each(function(i) {

                        if ($(this).attr('primarykey') == 'primarykey') {
                            if ($(this).attr('fieldname') != "") {
                                strKeyField = strKeyField + $(this).attr('fieldname') + "|";
                                if ($(this).attr('datatype') == "") {

                                    if (typeof $(this).attr('format') != 'undefined') {
                                        strKeyValue = strKeyValue + RemoveComma($(this).attr('val')) + "|";
                                    }
                                    else {
                                        strKeyValue = strKeyValue + $(this).attr('val') + "|";
                                    }

                                }
                                else {

                                    if (typeof $(this).attr('format') != 'undefined') {
                                        strKeyValue = strKeyValue + RemoveComma($(this).text()) + "|";
                                    }
                                    else {
                                        strKeyValue = strKeyValue + $(this).text() + "|";

                                    }
                                }
                                strKeyType = strKeyType + $(this).attr('actualtype') + "|";
                            }
                        }

                        else if ($(this).attr('primarykey') == '') {

                            $(this).change(function() {

                                if ($(this).attr('fieldname') != "") {
                                    strActField = strActField + $(this).attr('fieldname') + "|";
                                    if ($(this).attr('datatype') == "") {

                                        if (typeof $(this).attr('format') != 'undefined') {
                                            strActValue = strActValue + RemoveComma($(this).attr('val')) + "|";

                                        }
                                        else {
                                            strActValue = strActValue + $(this).attr('val') + "|";

                                        }

                                    }
                                    else {
                                        $(this).find(" :input").each(function() {

                                            // We are checking the format attribute is available..
                                            if (typeof $(this).attr('format') != 'undefined') {
                                                strActValue = strActValue + RemoveComma($(this).text()) + "|";

                                            }
                                            else {

                                                strActValue = strActValue + $(this).val() + "|";

                                            }

                                        });

                                    }
                                    strActType = strActType + $(this).attr('actualtype') + "|";

                                }

                                //$('#sd-hidden-updaterowscolkey').val($('#sd-hidden-updaterowscolkey').val() + strKeyField + "~");
                                // $('#sd-hidden-updateacttype').val($('#sd-hidden-updateacttype').val() + strActType + "~");
                                // $('#sd-hidden-updateactdata').val($('#sd-hidden-updateactdata').val() + strActValue + "~");
                               //  $('#sd-hidden-updateactfield').val($('#sd-hidden-updateactfield').val() + strActField + "~");

                            });

                        }

                    });

                }
                rowCount = rowCount + 1;

            });
            rowCount = null;

            $('#sd-hidden-updaterowscoltype').val($('#sd-hidden-updaterowscoltype').val() + strKeyType + "~");
            $('#sd-hidden-updaterowscoldata').val($('#sd-hidden-updaterowscoldata').val() + strKeyValue + "~");
            $('#sd-hidden-updaterowscolkey').val($('#sd-hidden-updaterowscolkey').val() + strKeyField + "~");
            $('#sd-hidden-updateacttype').val($('#sd-hidden-updateacttype').val() + strActType + "~");
            $('#sd-hidden-updateactdata').val($('#sd-hidden-updateactdata').val() + strActValue + "~");
            $('#sd-hidden-updateactfield').val($('#sd-hidden-updateactfield').val() + strActField + "~");

        }

        re = null;
    });
});
} 
```

**strKeyValue**在函数内部分配并在外部使用。这很好用。同样，我想在函数之外访问 strActvalue。它在函数内返回正确的值，但在外部使用时，它显示未定义。

如何在函数外使用变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:53:43.977

在脚本文件的开头使用这个：

```
<script>
var globalVal; 
```

然后在您的 JQuery 函数中使用：

```
globalVal=mylocalVal; 
```

您不能在 Jquery 中声明值。Jquery 是 Javascript 库。您可以在 JavaScript 中声明。请记住 JavaScript 是脚本语言，因此请逐行执行，因此请在脚本顶部声明您的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:55:16.070

您可以使用全局变量。全局变量是通过定义一个没有 var 关键字的变量来创建的，如下所示：

```
 strActValue = ""

        $('someButton').click(function(){
               //EVery reference to strActValue in you function now reference the global variable, whose value will survive the function call. 
```

例子：

```
 someVar = 2;

        $('someButton').click(function(){
               someVar=someVar+1;
        }); 
```

“someButton”被点击了 5 次

```
 alert(someVar); 
```

这会提醒“7”

# c# - 在.net的嵌套循环中执行异步方法时出现问题

> ID：14253889
> 
> 赞同：3
> 
> 时间：2013-01-10T08:49:03.373
> 
> 标签：c#, .net, asynchronous

我在嵌套循环中调用了一个异步函数，如下所示

```
var queue = new Queue<ExchangeEmailInformation>(mailInformation);
var currentQueue = queue.ToList();
foreach (var exchangeEmailInformation in currentQueue)
{
    ExchangeEmailInformation information = exchangeEmailInformation;
    foreach (var queueList in exchangeEmailInformation.Attachment)
    {
        Attachment attachment = queueList;
        information.FileName = attachment.Name;
        var emailId = information.Sender.Split('@');
        information.UserAlias = emailId[0];
        information.FileSize = attachment.Size;
        AddAttachmentAsync(information);

    }

}

private static void AddAttachmentAsync(ExchangeEmailInformation information)
{
    System.Threading.Tasks.Task.Factory.StartNew(
        () =>
        AddAttachment(information.UserAlias, information.EngagementName,
                        information.DocumentTransferId.ToString(), information.FileName,
                        information.FileSize.ToString(), information.ActivityName)).ContinueWith(
                            task => OnComplete(task, information), TaskContinuationOptions.None);
}

static void AddAttachment(string userAlias, string engagementName, string documentTranferId, string fileName, string fileSize,string activityName)
{
    Console.Writeline(fileName);

}

In the exchange information collection has one record. In these collection there is another property called Attachment which type is AttachmentCollection which contain two attachments. After calling the method AddAttachmentAsync like above asynchronously the 
```

打印的结果是

*   第二附件.txt
*   第二附件.txt。

仅显示第二个附件（结果不正确）。

然后我尝试执行与下面同步的相同操作。

```
private static void AddAttachmentAsync(ExchangeEmailInformation information)
{
    AddAttachment(information.UserAlias, information.EngagementName,
                    information.DocumentTransferId.ToString(), information.FileName,
                    information.FileSize.ToString(), information.ActivityName);

} 
```

结果是

*   第一个附件.txt

*   第二附件.txt

显示我想要的正确结果

我该如何解决这些问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T08:58:56.323

`information`是在嵌套循环之外声明的**引用类型对象。**您正在将此对象传递给您的`AddAttachmentAsync`方法，但在等待它完成（甚至开始处理`Task`）之前，您已经`information`在下一次迭代中进行了修改。

`information`在将其发送到异步方法之前，您应该制作一份副本。

**正如 Marc 指出的那样**编辑，这应该是一个具有复制值的****新对象**，而不仅仅是对同一对象的新引用。**

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T08:57:18.377

您已修改`information`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T08:59:23.977

我认为这是因为您对单个外部循环迭代中的每个内部循环迭代使用相同的`ExchangeEmailInformation`实例 , ；在前一个调用有机会读取其值之前，您为下一个异步调用更新该实例中的属性。`information``foreach``foreach`

在异步情况下，事件的顺序是

1.  填充`information`呼叫 1
2.  填充`information`呼叫 2
3.  执行调用 1
4.  执行调用 2

所以到调用 1 执行时，`information`已经包含调用 2 的数据。在同步情况下，这不会发生；在调用 1 完成执行之前，循环无法继续。

我认为解决此问题的最佳方法是停止*更改* `information`并将三个曾经更改的字段作为单独的参数传递。（实际上它看起来`UserAlias`只需要更新一次，因此您不需要单独传递它。另外请注意，`queueList`如果您这样做，则不需要复制。）

```
ExchangeEmailInformation information = exchangeEmailInformation;
var emailId = information.Sender.Split('@');
information.UserAlias = emailId[0];

foreach (var queueList in exchangeEmailInformation.Attachment)
{
    AddAttachmentAsync(information, queueList.Name, queueList.Size);
}

// and modify AddAttachmentAsync to use these two parameters too 
```

另一种方法是`queueList`按照您的方式获取副本，然后将两者`information` *和该副本*传递到`AddAttachmentAsync`并根据需要从两者中的每一个中提取参数：

```
ExchangeEmailInformation information = exchangeEmailInformation;
var emailId = information.Sender.Split('@');
information.UserAlias = emailId[0];

foreach (var queueList in exchangeEmailInformation.Attachment)
{
    var attachment = queueList;
    AddAttachmentAsync(information, attachment);
}

// and modify AddAttachmentAsync to pull properties from the right parameter. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T09:00:35.010

在第二个 foreach() 的第一行中，您必须制作“信息”的副本并将副本传递给 AddAttachmentAsync。（也就是说，所有数据的副本 - 而不仅仅是对象引用的副本。）

发生的事情是您传递给 AddAttachmentAsync() 的“信息”对象在 AddAttachmentAsync() 返回之前被更改。

通常，在设计用于多线程内容的诸如 ExchangeEmailInformation 之类的类时，您应该使它们不可变——这样就不可能发生这种特殊的事情。（在我看来，您应该使所有 POD（“普通旧数据”）类不可变。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T09:12:52.853

除了正确评估您需要`information`为每个线程创建一个实例的其他答案之外，我还会提出另一个建议。我注意到你已经创建了一个调用`AddAttachment`，虽然目前它只是让`Console.Write`我想最终你将访问一个列表并将结果的一个实例添加到这个列表中。这将造成不必要的访问共享资源的情况。

与其让每个线程负责将其结果添加到列表中，不如让主线程创建具有引用类型属性的对象的实例并将其传递给线程要简单得多。这样，线程已经有一个位置来存储它的结果，并且由于它不是共享资源，您不必担心同步。

这是一个非常基本的例子。显然，您必须根据自己的需要稍微改变它。

```
class Result
{
   public object Data { get; set; }
}

List<Work> WorkToDo = // Some population call
List<Result> Results = new List<Result>();
foreach (Work Item in WorkToDo)
{
    Result Result = new Result();
    Results.Add(Result);
    System.Threading.Tasks.Task.Factory.StartNew(
        () => { Result.Data = "Hello World."; });
} 
```

这只是为了指出，仅仅因为您希望将所有结果编译到某种列表或数组中并不意味着您需要共享对列表的访问权限。让父线程处理所有这些可以大大简化您的算法。**

# asp.net - Accordionpane 计算内部的分区数并存储在数组中

> ID：14253892
> 
> 赞同：0
> 
> 时间：2013-01-10T08:49:07.210
> 
> 标签：asp.net, vb.net, master-pages, accordionpane

```
 <asp:accordionpane id="colors">

   <header> colors</header>

   <content>
    <div> blue </div>
    <div> red  </div>
    <div> gray </div>
   </content>

 </accordionpane> 
```

有没有办法找到没有 div 并遍历循环
并将名称存储在数组中说字符串`colors{} = accordionpane.div("blue"), accordionpane.div("red"), accordionpane.div("gray")`

或者有没有办法找到一个手风琴有没有 div

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:12:58.377

如果您想在服务器端访问它，请制作`runat=server`（甚至更好）。[`Panel`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.panel.aspx)否则你不能遍历它，`colors.Controls`因为它是空的。

```
<asp:accordionpane id="colors">

   <header> colors</header>

   <content>
    <asp:Panel id="pnlBlue" runat="server"> blue </asp:Panel>
    <asp:Panel id="pnlRed" runat="server"> red  </asp:Panel>
    <asp:Panel id="pnlGray" runat="server"> gray </asp:Panel>
   </content>

</accordionpane> 
```

现在这个 Linq 查询可以工作了：

```
Dim panelText = From p In colors.Controls.OfType(Of Panel)()
    Select p.Controls.OfType(Of LiteralControl)().First().Text.Trim()
Dim count As Int32 = panelText.Count()
Dim allColors = String.Join(",", panelText) 
```

# asp.net - IE10 & ASP.Net 处理程序错误

> ID：14253893
> 
> 赞同：0
> 
> 时间：2013-01-10T08:49:09.417
> 
> 标签：asp.net, iis-7, httphandler, httpmodule

我在 IE10 上测试了我的网站。查看源代码 IE 10 不包含某些 ScriptResource.axd 文件。但我复制网站网址并粘贴 chrome 工作正常。

此代码不包括 IE10。（右键单击 -> 查看源代码）

```
var theForm = document.forms['form1'];
if (!theForm) {
    theForm = document.form1;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:57:00.947

出现此类问题的最常见情况是 ASP.NET 无法将浏览器检测为支持 JavaScript。对于 IE10，您应该在开发机器和服务器上安装 KB。请检查您是否拥有它们，这里有详细描述（以及其他一些修复可能性）：

*   [错误和修复：ASP.NET 无法检测到 IE10](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)

# java - 使用构建的 repo 输出 SDK 从 Eclipse 启动 GWT 项目响应 404

> ID：14253896
> 
> 赞同：0
> 
> 时间：2013-01-10T08:49:20.813
> 
> 标签：java, eclipse, gwt, open-source

我正在上一门软件工程大学课程，我的团队选择解决 Google Web Toolkit 开源项目，该项目涉及一个涉及 bug 修复或功能添加的课程项目。我设置了我的 SVN 并检查了主干和工具的存储库，然后我下载了 Eclipse 并为其添加了 Google 插件，以及 GWT Developer Plugin Chrome 扩展。

当我创建一个指向 Eclipse 插件附带的 SDK 的新示例项目，然后在 Chrome 中运行它时，它工作正常。但是，如果我使用指向本地 SVN 中的输出 lib 文件夹 (C:\Repos\GWT\trunk\build\lib) 的 SDK 创建一个新项目，则本地服务器会响应 404 错误。以下是响应标头：

```
HTTP/1.1 404 Not Found
Content-Type: text/html; charset=iso-8859-1
Server: Development/1.0
Date: Thu, 10 Jan 2013 08:47:40 GMT
Cache-Control: no-cache
Expires: Fri, 01 Jan 1990 00:00:00 GMT
Content-Length: 83 
```

我不知道是什么原因造成的，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:36:06.163

如果你想使用定制的 GWT SDK，那么要么指向它`build/staging/gwt-*`，要么确保你的 Eclipse 工作区中有 gwt-dev 和 gwt-user 项目，然后使用[https://developers.google.com/ eclipse/docs/gwt_contrib_sdks](https://developers.google.com/eclipse/docs/gwt_contrib_sdks)

# iphone - 循环仍在 iPhone SDK 上运行时如何显示图像？

> ID：14253897
> 
> 赞同：1
> 
> 时间：2013-01-10T08:49:26.723
> 
> 标签：iphone, objective-c, xcode, image, loops

我基本上是在 JSON 上获取图像，然后将其显示在屏幕上。在我目前的代码中，它工作正常，只是它在我的`while`循环之后显示图像。

我想要的是每次循环迭代时显示图像。如果可能的话，也像 Apple 的 Trailers.app 一样显示渐变的图像。

这是我现在的代码：

```
- (void)getNowShowingList2
{
    self.navigationItem.rightBarButtonItem = nil;

    UIActivityIndicatorView *activityIndicator = [[UIActivityIndicatorView alloc] initWithFrame:CGRectMake(0, 0, 20, 20)];
    activityIndicator.hidesWhenStopped = YES;
    UIBarButtonItem * barButton = [[UIBarButtonItem alloc] initWithCustomView:activityIndicator];
    [self navigationItem].rightBarButtonItem = barButton;
    [activityIndicator startAnimating];

    NSString *str = HOMEVIEW_URL;

    NSURL *url = [NSURL URLWithString:str];
    NSData *data = [NSData dataWithContentsOfURL:url];
    NSString *jsonStr = [[[NSString alloc] initWithData:data
                                               encoding:NSUTF8StringEncoding] autorelease];

    // Checks for internet connectivity at startup
    if ([jsonStr isEqualToString:@""])
    {
        HideNetworkActivityIndicator();

        [self performSelectorOnMainThread:@selector(networkConnectivityCheck)
                                   withObject:nil
                                waitUntilDone:YES];
    }
    else
    {
        // Parse the string into JSON
        NSDictionary *json = [jsonStr JSONValue];

        // Get all object
        NSArray *items = [json valueForKeyPath:@"QUERY.DATA"];
        NSEnumerator *enumerator = [items objectEnumerator];

        NSArray *item;

        while (item = [enumerator nextObject])
        {
            [myMovieId      addObject:[item objectAtIndex:0]];
            [myMovieTitle   addObject:[item objectAtIndex:1]];

            NSString *genre = @"";

            if (genre == NULL)
            {
                genre = @"";
            }
            else
            {
                genre = [item objectAtIndex:2];
            }

            [myGenre    addObject:genre];
            [myCast     addObject:[item objectAtIndex:3]];
            [myPrice    addObject:[item objectAtIndex:4]];
            [myRuntime  addObject:[item objectAtIndex:5]];
            [myImageUrl addObject:[item objectAtIndex:6]];
            [myRating   addObject:[item objectAtIndex:7]];
            [myHits     addObject:[item objectAtIndex:8]];

            NSURL *url = [NSURL URLWithString:[item objectAtIndex:6]];
            NSData *data = [NSData dataWithContentsOfURL:url];

            if (data == nil) // checks if internet connection was lost while parsing & fetching
            {
                HideNetworkActivityIndicator();

                [self performSelectorOnMainThread:@selector(lostPrompt)
                                       withObject:self
                                    waitUntilDone:YES];

                break;
            }
            else
            {
                [myImage addObject:[UIImage imageWithData:data]];

                [self getMovieDetails:[item objectAtIndex:0]];
            }

            NSLog(@"O");
            [self displayButton2];
        }

        activityIndicator.hidden = YES;

        self.navigationItem.rightBarButtonItem = self.refreshButton;
    }

    [self performSelectorOnMainThread:@selector(versionCheck)
                           withObject:nil
                        waitUntilDone:YES];
}

- (void)displayButton2
{   
    int offset_x  = 19;
    int offset_y = 24;

    for (int i = 0; i < [myImage count] ; i++)
    {
        // compute x & y offset
        if (i % 3 == 0)
        {
            offset_x = 19;
        }
        else if (i % 3 == 1)
        {
            offset_x = 113;
        }
        else
        {
            offset_x = 208;
        }

        // Display Movie Thumbnail
        UIImage *imageView1 = [myImage objectAtIndex:i];
        CGRect myImageRect1 = CGRectMake(offset_x, offset_y, MOVIE_THUMBNAIL_W, MOVIE_THUMBNAIL_H);

        UIButton *button1 = [[UIButton buttonWithType:UIButtonTypeCustom] retain];
        button1.frame = myImageRect1;
        button1.backgroundColor = [UIColor clearColor];
        [button1 setBackgroundImage:imageView1 forState:UIControlStateNormal];
        button1.tag = i;
        [button1 addTarget:self
                    action:@selector(imageButtonPressed:)
          forControlEvents:UIControlEventTouchUpInside];
        [scrollview addSubview:button1];

        // Quick Buy Image
        UIImage *buy_image = QUICK_BUY_BUTTON;
        CGRect myImageRect2 = CGRectMake(offset_x + (MOVIE_THUMBNAIL_W-QUICK_BUY_BUTTON_W-2), offset_y + 2, QUICK_BUY_BUTTON_W, QUICK_BUY_BUTTON_H);

        UIButton *button2 = [[UIButton buttonWithType:UIButtonTypeCustom] retain];
        button2.frame = myImageRect2;
        button2.backgroundColor = [UIColor clearColor];
        [button2 setBackgroundImage:buy_image forState:UIControlStateNormal];
        button2.tag = i;
        [button2 addTarget:self
                    action:@selector(quickBuyButtonPressed:)
          forControlEvents:UIControlEventTouchUpInside];
        [scrollview addSubview:button2];

        // increment offset
        if (offset_x == 208)
        {
            offset_y += 150;
        }
    }

    if ((offset_x == 19) || (offset_x == 113))
    {
        offset_y += 158;
    }

    // Adjust scroll view
    [scrollview setContentSize:CGSizeMake(0, offset_y + 10)];

    // adjust background
    [background setFrame:CGRectMake(13, 13, 294, offset_y - 17)];
    backgroundHeightAdjust = offset_y - 17;
} 
```

从长远来看，我还计划使用 AFNetworking，因为它可能有助于实现我想要达到的效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:30:37.230

Parse the JSON in background thread. Every time you need to load an image, set it to the image `imageView` in the main thread.

```
...
// Parse the string into JSON
[self performSelectorInBackground:@selector(parseJson:) withObject:jsonStr];
// ...

-(void)parseJson:(NSString*)jsonStr{

      // Parse Json ...
      // Show image on main thread
      [self performSelectorOnMainThread:@selector(showImage:)
                             withObject:image
                          waitUntilDone:NO];

}

-(void)showImage:(UIImage *)image{
      imageView.image = image;
} 
```

# ejb - 安装 ilog res 并调用

> ID：14253905
> 
> 赞同：1
> 
> 时间：2013-01-10T08:50:03.060
> 
> 标签：ejb, weblogic9.x, ilog

这是我第一次使用 Jrules Ilog7.0.1 和 WebLogic 9.2。以下是安装步骤：

1.  为 MBean 启用匿名管理服务器查找
2.  添加新组和用户
3.  部署 jrules-res-xu-WL92.rar
4.  部署 Rule Execution Server 管理 EAR：jrules-res-management-WL92.ear
5.  打开规则执行服务器控制台
6.  使用 Installation Manager 运行数据库脚本
7.  运行 Rule Execution Server 诊断，所有项目均为绿色

然后我部署`ruleApp`成功了，但是调用失败了。这是错误消息：

`javax.naming.NameNotFoundException: Unable to resolve 'ejb.IlrStatelessRuleSessionEJB'. Resolved 'ejb'`

关于这个问题的文档不多。有人遇到过类似的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T07:58:04.173

解决。
在第 4 步之后，我们还必须安装 jrules-res-session-WL92.jar 以提供 ejb 服务。记住必须将此部署安装为应用程序，而不是库，否则将无法提供 ejb 服务。

# android - Android sqlcipher附加数据库给出事务错误

> ID：14253909
> 
> 赞同：1
> 
> 时间：2013-01-10T08:50:22.670
> 
> 标签：android, sqlcipher

嗨，我在一个 android 应用程序中使用 sqlcipher 我正在尝试加密一个未加密的数据库，所以目前我收到一条错误消息（无法在事务中附加数据库）所以这是我的代码，请最好帮助我提供一个工作示例

```
 import java.util.HashMap;

import android.app.SearchManager;
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;

import android.database.sqlite.SQLiteQueryBuilder;
import android.os.Environment;
import android.provider.BaseColumns;
import android.util.Log;
import net.sqlcipher.database.SQLiteDatabase;
import net.sqlcipher.database.SQLiteOpenHelper;
//import android.database.sqlite.SQLiteDatabase;
//import android.database.sqlite.SQLiteOpenHelper;

public class DictDatabase {

    private static final String DATABASE_TABLE1 = "words_"+MainModule.DICT;
    private static final String DATABASE_TABLE2 = "dict_"+MainModule.DICT;
    private static final String DATABASE = Environment.getExternalStorageDirectory()+"/beta_"+MainModule.DICT+".sqlite";
    private static final int DATABASE_VERSION = 1;
    public static final int OPEN_READWRITE = 0 ;

public static final String REC_WORDID = "wId";
public static final String REC_WORD2 = "wNormed";
public static final String REC_WORD = "wWord";
public static final String REC_LANG2 = "wLanguage";
    public static final String REC_DESCRIPTION = "wGrammar";
    public static final String REC_SOUND = "wSound";
    public static final String REC_HASH = "wHash";

    private static final String CLASSTAG = "DictDatabase";
     private  SQLiteDatabase mDb;
     private final Context mCtx;
     private DbController dbController;
    //private static final String DATABASE_NAME = "data/data/babla.dict/files/" + "beta_deen.sqlite";

private static class DbController extends SQLiteOpenHelper {
     private SQLiteDatabase mDb;
    private final Context mCtx;
    private static final String words = "CREATE TABLE `words_"+MainModule.DICT+"` (wId INTEGER,wWord ,wNormed ,wLanguage ,wGrammar ,wSound ,wHash )";
    private static final String phrases =
        " CREATE TABLE `phrases_"+MainModule.DICT+"` (Id INTEGER,cat,catPos INTEGER,subCat,subCatPos INTEGER,subSubCat,subSubCatPos INTEGER,entryPos INTEGER,text1,text2,description)";
    private static final String dict =
   " CREATE TABLE `dict"+MainModule.DICT+"` (dId ,dWdeId INTEGER,dWenId INTEGER,dOrigin ,dStatus ,dChangeDate ,transWord1Id ,transWord2Id ,transWord1 ,transWord2 )";
    private static final String enFlex =
    "CREATE TABLE `enFlex` (flexId ,flexPrincipleForm, flexTimeId INTEGER ,flexPersonId, flexGenderId,flexWord,flexWordNormed , flexWordUrl)";
    private static final String flexPersonsGenders =
        "CREATE TABLE `flexPersonsGenders` (fpgLanguage ,fpgPersonId,fpgGenderId ,fpgName)";
    private static final String flexTimes = "CREATE TABLE `flexTimes` (ftId,ftLanguage,ftTimeId,ftName,ftComment)";
    private static final String normalTimesFlex = "CREATE TABLE `normalTimesFlex` (ntfLanguage ,ntfTime  INTEGER )";
    String insertCommand = "insert into "+DATABASE+".words_"+MainModule.DICT+" SELECT * from words_"+MainModule.DICT;
    String insertCommand2 = "insert into "+DATABASE+".dict_"+MainModule.DICT+" SELECT * from dict"+MainModule.DICT;
    String insertCommand3 = "insert into "+DATABASE+".phrases"+MainModule.DICT+" SELECT * from dict"+MainModule.DICT;
    String insertCommand4 = "insert into "+DATABASE+".enFlex SELECT * from enFlex";
    String insertCommand5 = "insert into "+DATABASE+".flexPersonsGenders SELECT * from flexPersonsGenders";
    String insertCommand6 = "insert into "+DATABASE+".flexTimes SELECT * from flexTimes";
    String insertCommand7 = "insert into "+DATABASE+".normalTimesFlex SELECT * from normalTimesFlex";

    DbController(Context context) {
         super(context, DATABASE, null, DATABASE_VERSION);
                     mCtx= context;
     }
    @Override
    public void onCreate(SQLiteDatabase db) {
        mDb = db;
        //mDb = SQLiteDatabase.openOrCreateDatabase(mCtx.getFilesDir() +"/"+"beta_"+MainModule.DICT, "", null);
        //mDb = SQLiteDatabase.openDatabase(mCtx.getFilesDir() +"/"+"beta_"+MainModule.DICT,"",null, SQLiteDatabase.OPEN_READWRITE);
        mDb.execSQL("ATTACH DATABASE '"+DATABASE+"' AS encrypted KEY 'p@ssW0rd';");
        mDb.execSQL(words);mDb.execSQL(phrases);mDb.execSQL(dict);mDb.execSQL(enFlex);mDb.execSQL(flexPersonsGenders);mDb.execSQL(flexTimes);
        mDb.execSQL(normalTimesFlex);
        mDb.execSQL(insertCommand);mDb.execSQL(insertCommand2);mDb.execSQL(insertCommand3);mDb.execSQL(insertCommand4);mDb.execSQL(insertCommand5);
        mDb.execSQL(insertCommand6);mDb.execSQL(insertCommand7);
        mDb.execSQL("SELECT sqlcipher_export('"+DATABASE +"');");
        mDb.execSQL("DETACH DATABASE "+DATABASE+";");
        // TODO Auto-generated method stub
    } 
```

这是它的完成方式还是我把东西放在错误的地方有些人请帮忙，即使有一个例子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:54:24.570

`db.execSQL("ATTACH 'hq_db' AS hq_db;");`在开始任何类型的事务之前，您需要以这种方式调用。先做附件，然后开始事务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:09:57.170

您不需要为每个表运行单独的插入/选择语句，`sqlcipher_export`便利功能可以为您完成这项工作。有关将未加密的数据库迁移到 SQLCipher 数据库的示例，请查看我们发布的 SQLCipher for Android[测试套件中的](https://github.com/sqlcipher/sqlcipher-android-tests)[这个测试用例。](https://github.com/sqlcipher/sqlcipher-android-tests/blob/b7ae8174f32342b30990b312daee6053bb0be49b/app/src/main/java/net/zetetic/tests/ImportUnencryptedDatabaseTest.java)

# iphone - 为什么我的 UITableViewCell 子类说它是 cellForRowAtIndexPath 函数中的 UIView 类？

> ID：14253911
> 
> 赞同：1
> 
> 时间：2013-01-10T08:50:28.363
> 
> 标签：iphone, ios, objective-c, xcode, mobile

我已经对这个类进行了子`UITableViewCell`类化，一个有效，另一个无效，我不知道为什么。

这是引发错误的函数：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath object:(PFObject *)object {

    NSString *type = [object objectForKey:@"type"];

    static NSString *CellIdentifier1 = @"Cell1";
    static NSString *CellIdentifier2 = @"Cell2";

    if ([type isEqualToString:@"quote"]) {

        QuoteCell *cell = (QuoteCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier1];

        if (cell == nil) {
            cell = [[QuoteCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier1];
        }
        cell.contentText.text = [object objectForKey:self.textKey];
        NSDate *date = object.createdAt;
        cell.datetimeLabel.text = [NSDate stringForDisplayFromDate:date];
        return cell;
    }
    else if([type isEqualToString:@"photo"])
    {
        TestCell *cell = (TestCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier2];

        if (cell == nil) {
            cell = [[TestCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier2];
        }
        return cell;
    }

    return nil;

} 
```

由于我无法弄清楚的原因，该类的子类之一`UITableViewCell`说它`TestCell`是 a`UIView`而不是 a `UITableViewCell`？我将这两个类从`UITableViewCell`我认为的完全相同的类中分出来，但是`QuoteCell`工作并说它是 a`UITableViewCell`而`TestCell`不是，并说它是 a `UIView`。

这是错误 -

由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[UIView setTableViewStyle:]：无法识别的选择器发送到实例 0x96b7b70”

有任何想法吗？

在这个问题上被困了几个小时后，我在发布后 10 分钟就弄清楚了。这与我创建 UITableViewCells 的方式有关。我正在创建扩展 UITableViewCell 的类，并且在 TestCell.m initWithStyle 函数中我从 MainBundle 中获取了 nibArray 但是因为我在单元格中有一个 UIImageView 单元格本身的索引实际上发生了变化，所以我不得不更改索引以找到笔尖在单元格本身的数组中。感谢所有已经回复的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:57:30.193

例外`-[UIView setTableViewStyle:]`不是`UITableViewCell`因为`setTableViewStyle:`是一种`UITableView`方法。所以你可能想看看你是如何创建 tableView 的。

# javascript - Kendo UI 网格总是从第 0 页开始

> ID：14253912
> 
> 赞同：3
> 
> 时间：2013-01-10T08:50:34.897
> 
> 标签：javascript, jquery, kendo-ui

我有一个 Kendo UI Grid，它总是从 0 开始。

如果我更改一列的排序，那么它会变为 1 并显示其他页码。

我究竟做错了什么？

这是我的代码：

```
$('#userGrid').kendoGrid({
                dataSource: {
                    pageSize: 5,
                    transport: {
                        read: {
                            url: ROOT+"user/user-list",
                        },
                        update: {
                            url: ROOT+"user/update-user",
                            dataType: "POST"
                        }
                    },
                    error: function(e) {
                        alert(e.responseText);
                    },
                    schema: {
                        data: "data",
                        model: {
                            id: 'id',
                            fields: {
                                username: {type: "string", editable: false},
                                type: {
                                    type: "number",
                                    editable: true,
                                    validation: {required: true}
                                },
                                level: {
                                    type: "number",
                                    editable: true,
                                    validation: {required: true}
                                },
                                firstName: {type: "string", editable: true},
                                middleName: {type: "string", editable: true},
                                lastName: {type: "string", editable: true},
                                DoB: {type: "date", editable: true},
                                dateStarted: {type: "date", editable: false},
                                enabled: {
                                    type: "number",
                                    editable: true,
                                    validation: {required: true}
                                },
                            }
                        }
                    }
                },
                toolbar: ["save", "cancel"],
                sortable: true,
                pageable: {
                    refresh: true,
                    pageSizes: false
                },
                editable:true,
                columns:
                [
                    {
                    field: "username",
                    width: 90,
                    title: "Username"
                    },
                    {
                    field: "type",
                    width: 50,
                    title: "Type"
                    },
                    {
                    field: "level",
                    width: 25,
                    title: "Level"
                    },
                    {
                    field: "firstName",
                    width: 50,
                    title: "First name"
                    },
                    {
                    field: "middleName",
                    width: 50,
                    title: "Middle name"
                    },
                    {
                    field: "lastName",
                    width: 50,
                    title: "Last name"
                    },
                    {
                    field: "DoB",
                    width: 40,
                    title: "DoB",
                    template: '#= kendo.toString(DoB,"dd/MM/yyyy") #'
                    },
                    {
                    field: "dateStarted",
                    width: 40,
                    title: "Started",
                    template: '#= kendo.toString(dateStarted,"dd/MM/yyyy") #'
                    },
                    {
                    field: "enabled",
                    width: 40,
                    title: "Enabled"
                    }
                ]
            })
        })
    }
) ;
}) 
```

* * *

```
{"data":[{"id":"1","username":"admin@eu","type":"1","level":"12","firstName":"Tom","middleName":"C","lastName":"Higgins","DoB":"0000-00-00","dateStarted":"0000-00-00","enabled":"0"},{"id":"36","username":"liam.spelman@euautomation.com","type":"4","level":"12","firstName":"Liam","middleName":"","lastName":"Spelman","DoB":"0000-00-00","dateStarted":"0000-00-00","enabled":"0"},{"id":"56","username":"adf@sadf.com","type":"4","level":"1","firstName":"asdf","middleName":"","lastName":"asdf","DoB":"1970-01-01","dateStarted":"0000-00-00","enabled":"0"},{"id":"57","username":"adf@saddf.com","type":"4","level":"1","firstName":"asdf","middleName":"","lastName":"asdf","DoB":"1970-01-01","dateStarted":"0000-00-00","enabled":"0"}], "rowcount": 4} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T10:17:44.370

您的服务器是否返回`total`记录数？

如果是，则定义`schema`为（假设这`total_size`是服务器返回记录总数的位置）：

```
schema   : {
    data: "data",
    total: "total_size",
    model: {
        ...
    }
} 
```

如果没有，请尝试添加`schema`一个从数组`total`大小获取它的函数：`data`

```
schema   : {
    data: "data",
    total: function(data) {
        return data.data.length;
    },
    model: {
        ...
    }
} 
```

# ruby-on-rails - 从 Git HTTP repo 部署 Capistrano

> ID：14253913
> 
> 赞同：8
> 
> 时间：2013-01-10T08:50:34.203
> 
> 标签：ruby-on-rails, git, http, deployment, capistrano

有没有人通过 HTTP 从 Git 存储库部署 Capistrano 的经验？

以下*deploy.rb*不起作用：

```
set :repository,  'http://git.repository-domain.com:4442/git/repo.git'
set :scm_username, "git_username"
set :scm_password, "git_password"
set :scm, :git 
```

如果您按以下方式传递存储库，它会起作用：

```
set :repository,  'http://git_username:git_password@git.repository-domain.com:4442/git/repo.git' 
```

后者仅在用户名或密码没有特殊字符时才有效。对这些字符进行 URL 编码将导致失败。

**更新**：问题的更准确描述可在[https://github.com/capistrano/capistrano/issues/384的票证中找到](https://github.com/capistrano/capistrano/issues/384)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-07-10T09:11:40.967

Capistrano Git HTTPS 身份验证将在 Capistrano 3 中解决，您可以在其中设置存储库及其凭据：

```
set :repo_url, 'https://git.repository-domain.com:4442/git/repo.git'
set :git_http_username, 'username'
set :git_http_password, 'password' 
```

此外，在 Capistrano 3 中已经可以使用的是存储库 URL 中的用户名：密码，即使密码包含特殊字符：

```
set :repo_url, 'https://ain:3490jL?a@git.repository-domain.com:4442/git/repo.git' 
```

有关更多最新信息，请参阅[https://github.com/capistrano/capistrano](https://github.com/capistrano/capistrano)

# iphone - 企业分发提示信息说 (null) would like to install {app name}

> ID：14253914
> 
> 赞同：5
> 
> 时间：2013-01-10T08:50:36.677
> 
> 标签：iphone, ios, ipad

![在此处输入图像描述](../Images/e30d91bd1f595ca06b9edec95d15d8cb.png)

这是点击服务器 url 后出现的弹出窗口。

我在服务器上上传了一个企业发行版 iOS 版本。现在，当我们尝试下载版本时，出现以下弹出窗口。我想将空字段替换为“[我的域名]”。

我有一个类似问题的堆栈溢出链接-

[Ad-Hoc 分发提示消息说 (null) would like to install {app name}](https://stackoverflow.com/questions/7267987/ad-hoc-distribution-prompt-message-says-null-would-like-to-install-app-name)

但在我的情况下，两种情况都会出现问题，要么通过（下载）电子邮件，要么直接浏览到包含链接的网页（已上传构建的服务器 url）。

请建议我解决方案。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T14:53:51.653

我解决了这个问题。

出现问题是因为我们在给出**.plist 路径**`http:/`的网页中使用了单斜线。

 **IE

```
<a href="itms-services://?action=download-manifest&url=http:/pathToYourServer/folder/applicationName.plist"> here </a> 
```

现在变了，变成了——：

```
<a href="itms-services://?action=download-manifest&url=http://pathToYourServer/folder/applicationName.plist"> here </a> 
```

在安装提示域名中，第一个参数位于 :// 和 / 之间。写网址时要小心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-22T00:03:23.823

@Deepak 的回答解决了这个问题：

> `<a href="itms-services://?action=download-manifest&url=http:/pathToYourServer/folder/applicationName.plist"> here </a>`
> 
> VS
> 
> `<a href="itms-services://?action=download-manifest&url=http://pathToYourServer/folder/applicationName.plist"> here </a>`

但是请注意，Outlook 中有一个错误，不允许在超链接中使用“//”[请参阅此处](https://stackoverflow.com/questions/2101555/double-slashes-in-urls-in-outlook "看这里")值得注意的是，您可以在另一个电子邮件程序中构建链接，然后将其发送到 Outlook。（在发表这篇文章时，我缺乏将其添加为评论的代表）

如果您愿意托管一个小页面以将用户重定向到 itms 协议，则此解决方案也适用（如果修改了重定向）：[页面加载时重定向](https://stackoverflow.com/questions/5411538/how-to-redirect-from-an-html-page/5411601#5411601)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T09:27:16.173

You must be trying to download the .ipa directly?

Archive and distribute the application and it will generate two files - one would be the .ipa and another would be .plist.

Now, create an html page on server and place it on server with this html:

```
<html>
<body>
Some text about your app:
<a  href="itms-services://?action=download-manifest&url=http://pathToYourServer/folder/applicationName.plist">here</a>
</body>
</html> 
```

So, when user will tap on "here" then it will directly download the app on device.

Make sure to look at my hyperlink because it contains "itms-services://?action=download-manifest&" followed by path to plist file on your server.

Hope it helps.

Regards,

Reno Jones

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T09:26:30.487

It's because actual ipa resource file is not available into wireless distribution link. So I think it's configure wrongly the wireless ad hoc distribution link.**

# vb.net - VB.Net。使用按钮在表单上打印标签页

> ID：14253924
> 
> 赞同：0
> 
> 时间：2013-01-10T08:51:22.713
> 
> 标签：vb.net

我的一个标签页上有一个名为“打印”的按钮。如何向此按钮添加打印命令以允许用户打印标签页的内容？

里科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:57:53.590

> 修改您的问题以使其更清晰。看看 [我如何打印我的表格？](https://stackoverflow.com/questions/966596/how-do-i-print-my-form)

# linux - dbus启动错误！通过 NFS 启动 ARM linux 时

> ID：14253929
> 
> 赞同：0
> 
> 时间：2013-01-10T08:51:44.837
> 
> 标签：linux, filesystems, embedded-linux, dbus, nfs

尝试为 ARM 编译 D-Bus 但遇到错误。

我使用 NFS 引导 ARM 板并从 PC 上的目录“/home/make/root_nfs”加载文件系统。

1.  从 PC 上的源代码构建 D-Bus（ubuntu10.10）：

    > `./configure --prefix=/home/make/dbus --exec-prefix=/home/make/dbus CC="arm-linux-gcc" --host=arm-linux --with-x=no --cache-file=arm-linux.cache`
    > 
    > `make`
    > 
    > `make install`

2.  将 D-Bus 的 bins、libs 和其他依赖项从“/home/make/dbus”复制到“/home/make/root_nfs/”下的相应目录中。

3.  重新启动 ARM 板以从我的主机 PC“/home/make/root_nfs”加载根 fs。

4.  在arm linux中：

    试：`dbus-launch`

    *无法执行消息总线守护进程 /home/make/dbus/bin/dbus-daemon: 没有这样的文件或目录。将在没有完整路径的情况下重试。*

    *无法启动消息总线：无法打开“/home/make/dbus/etc/dbus-1/session.conf：没有这样的文件或目录* *EOF in dbus-launch read address from bus daemon*

    试：`dbus-daemon --system`

    *无法启动消息总线：无法打开“/home/make/dbus/etc/dbus-1/system.conf”：没有这样的文件或目录*

**似乎所有路径都已硬编码到程序中。**

**在 D-Bus 配置中更改“--prefix”或“--exec-prefix”不起作用。**

我不想在 PC 上“mkdir -p /home/make/root_nfs/home/make/root_nfs”并使 arm linux 将第二级 root_nfs 视为正确路径。

任何人都可以提供一些建议吗？

*非常感谢。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:23:32.280

configure --prefix 和 --exec-prefix 选项通常用于配置**运行时的路径**

您必须使用[**DESTDIR**](http://www.gnu.org/software/automake/manual/html_node/DESTDIR.html)参数进行制作：

```
./configure CC="arm-linux-gcc" --host=arm-linux --with-x=no --cache-file=arm-linux.cache
make
make DESTDIR=/home/make/dbus install 
```

# sql - SQL SERVER 中的余额库存

> ID：14253936
> 
> 赞同：0
> 
> 时间：2013-01-10T08:52:10.487
> 
> 标签：sql, sql-server, sql-server-2008

我有 2 个表格，我应该在其中显示数量，库存物品的数量和余额数量我写了如下查询：

```
SELECT I.Date as Date, 
P.ResourceName as ItemName,
P.ResourceRate as Rate,
i.TotalInQty as InwardsQuantity,
s.TotalOutQty as OutwardsQuantity,
i.TotalInQty-S.TotalOutQty as Balance,
O.UnitSymbol As ItemUnit
FROM UnitMaster O
INNER JOIN Resource_Master P
 ON O.UnitCode = P.Unitcode
LEFT JOIN
(
  select sum(i.Qty) TotalInQty, Nameofitem
  from Inwards_Master I
  group by Nameofitem
) I
ON I.Nameofitem= P.ResourceName
LEFT JOIN
(
  select sum(s.qty) TotalOutQty, Nameofitem
  from Outwards_Master S 
  group by s.Nameofitem
) S
ON I.Date=S.Date 
AND I.Nameofitem =S.Nameofitem
WHERE P.TenderCode=1 
```

上面的查询给了我一个如下错误：

> 消息 8120，级别 16，状态 1，第 14 行列“Inwards_Master.Date”在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中。

任何人都可以帮我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:56:16.157

那是因为您没有`Date`从表引用中选择列`i`not `s`，您应该使用聚合函数`MIN`or将其包含在选择列表中`MAX`，或者将其包含在`GROUP BY`子句中，如下所示：

```
SELECT 
  I.Date as Date, 
  P.ResourceName as ItemName,
  P.ResourceRate as Rate,
  i.TotalInQty as InwardsQuantity,
  s.TotalOutQty as OutwardsQuantity,
  i.TotalInQty - S.TotalOutQty as Balance,
  O.UnitSymbol As ItemUnit
FROM UnitMaster O
INNER JOIN Resource_Master P ON O.UnitCode = P.Unitcode
LEFT JOIN
(
  select 
    sum(i.Qty) TotalInQty, 
    "Date",
    Nameofitem
  from Inwards_Master I
  group by Nameofitem, "Date"
) I
ON I.Nameofitem = P.ResourceName
LEFT JOIN
(
  select 
    sum(s.qty) TotalOutQty, 
    "Date",
    Nameofitem
  from Outwards_Master S 
  group by s.Nameofitem, "Date"
) S  ON I.Date       = S.Date 
    AND I.Nameofitem = S.Nameofitem
WHERE P.TenderCode = 1; 
```

**或者：**如果您不需要`GROUP BY`约会，那么您希望为每个分组获得什么日期`Nameofitem`？

在这种情况下，您必须使用聚合函数。例如`MAX(Date)`，要像这样获取最新日期：

```
...
LEFT JOIN
(
  select 
    sum(i.Qty) TotalInQty, 
    MAX("Date") LatestDate,
    Nameofitem
  from Inwards_Master I
  group by Nameofitem
) I 
```

对于`s`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:58:10.053

就像它说的那样 - 所以尝试在一个聚合中包含`I.Date`和：`S.Date`

```
SELECT I.Date as Date, 
P.ResourceName as ItemName,
P.ResourceRate as Rate,
i.TotalInQty as InwardsQuantity,
s.TotalOutQty as OutwardsQuantity,
i.TotalInQty-S.TotalOutQty as Balance,
O.UnitSymbol As ItemUnit
FROM UnitMaster O
INNER JOIN Resource_Master P
 ON O.UnitCode = P.Unitcode
LEFT JOIN
(
  select COALESCE(sum(i.Qty), 0) AS TotalInQty, Nameofitem, Min(I.Date) AS Date
  from Inwards_Master I
  group by Nameofitem
) I
ON I.Nameofitem= P.ResourceName
LEFT JOIN
(
  select COALESCE(sum(s.qty), 0) AS TotalOutQty, Nameofitem, Min(S.Date) AS Date
  from Outwards_Master S 
  group by s.Nameofitem
) S
ON I.Date=S.Date 
AND I.Nameofitem =S.Nameofitem
WHERE P.TenderCode=1 
```

# python - 在 Heroku 应用程序之间共享 Python 代码

> ID：14253943
> 
> 赞同：3
> 
> 时间：2013-01-10T08:52:52.920
> 
> 标签：python, git, heroku

我有 2 个 Heroku 应用程序，包括 Pyhon，以及它们之间共享的一些 python 模块（即：它们在两个应用程序中是相同的）。设置我的 git / requirements.txt 以实现以下目标的最佳方法是什么？

1.  共享代码是版本化的（也就是说：它也位于 Git 中，我不在乎在哪里——其中一个项目？另一个项目？）
2.  在开发过程中，我的磁盘上有该共享代码的一个副本
3.  在开发过程中，我可以更改共享代码的单个副本，并将更改反映在两个应用程序中，理想情况下，除了更改磁盘上的文件之外什么都不做。
4.  推送到 Heroku 时，我所做的只是一个简单的“推送”

我的直觉告诉我，我需要将共享代码作为 Python 包保存在磁盘上，并在开发过程中将其添加到每个应用程序的 PYTHONPATH 中。此外，我会将它（如何？使用私人服务器？来自 s3？作为供应商目录？）添加到每个应用程序的 requriments.txt 中。

......但我不能完全确定它。

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T00:08:50.433

您可以使用`pip`需求文件来做到这一点。您可能有一个用于本地开发，一个用于您的应用程序。请查看[要求文件格式](http://www.pip-installer.org/en/latest/requirements.html#the-requirements-file-format)以获取更多信息。

## 本地开发需求文件

```
file:///path/to/your/lib/project#egg=MyProject 
```

这应该让您从您的应用程序获得只读访问权限，这对于共享代码（例如`git clone`项目）很有用。请注意，它将指向 HEAD。这应该符合要求 1、2、3。

对于项目布局，您可以查看[setuptools 文档](http://peak.telecommunity.com/DevCenter/setuptools#basic-use)；例如，创建一个`setup.py`包含您的代码的包。你可以看看`requests`图书馆，这是[一个很好的例子](https://github.com/kennethreitz/requests)。

## 应用需求文件

```
git://git.myproject.org/MyProject.git#egg=MyProject 
```

这应该会获取您推送到您的仓库的任何代码。我没有使用 Heroku 的经验，但如果[他们支持应该可以工作的需求文件](https://devcenter.heroku.com/articles/python-pip)。这应该符合要求 1，我希望符合要求 4。

如果您想在 heroku 中使用私有 git repo，请[参考 heroku 文档](https://devcenter.heroku.com/articles/python-pip#gitbacked-distributions)（请注意，它是`username:password`基本身份验证，[没有电子邮件地址](https://stackoverflow.com/questions/13137996/heroku-pull-private-github-repository)）。如果您不想使用密码，可以使用[可撤销的 OAuth 令牌](https://github.com/blog/1270-easier-builds-and-deployments-using-git-over-https-and-oauth)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T09:18:19.637

您应该使用[Git Submodule](http://git-scm.com/book/en/Git-Tools-Submodules)。

您在代码所在的位置创建一个项目，然后将对此的引用添加到您的两个 Heroku 应用程序中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T07:38:45.700

另一个想法是深入研究[Git Subtree Merging](http://git-scm.com/book/ch6-7.html)。

您可以将公共模块作为两个存储库中的分支，指向共同的来源。然后你可以把它放到你的项目文件夹中。

# jquery - 当我做 ajax 发布时验证输入

> ID：14253946
> 
> 赞同：0
> 
> 时间：2013-01-10T08:53:17.050
> 
> 标签：jquery, asp.net-mvc-2, jquery-validate

我正在开发 ASP.Net MVC 2 应用程序。我需要使用 jQuery 验证下面提到的弹出窗口，因为我正在使用 AJAX 调用发送该数据，如下所示。

注意：我的 UI**没有使用任何表单元素**

```
addButton.off('click').on('click', function () {
    $.ajax({
        type: "POST",
        url: "/incentives/CreditPackagesAdd",
        data: dataPost,
        dataType: "json",
        success: function (url) {
        }
    });
}); 
```

我的弹出窗口如下：

![在此处输入图像描述](../Images/36674cccf3043d94a33bfdccac59bc56.png)

我的 UI Html 代码如下：

```
<div class="dialog form simpleForm slimForm" id="add-package" data-width="350" data-title="Add Credit Package">

            <ul>
                <li>
                    <label for="name">
                        Name</label>
                    <input type="text" name="name" id="name" />
                </li>
                <li>
                    <label for="value">
                        Value</label>
                    <input type="number" name="value" id="value" /></li>
                <li>
                    <label for="purchasePrice">
                        Purchase Price</label>
                    <input type="number" name="purchasePrice" id="purchasePrice" /></li>
                <li>
                    <label for="expirationPeriod">
                        Good for</label>
                    <%: Html.PopUp<ExpirationPeriod>("expirationPeriod") %></li>
                <li>
                    <label for="valid">
                        Start Date</label>
                    <input type="date" class="datePicker" name="valid" id="valid" value="<%: DateTime.Today.ToString("M/d/yyyy") %>"
                        data-min="<%: DateTime.Today.ToString("M/d/yyyy") %>" /></li>
                <li>
                    <label for="expiration">
                        Expiration</label>
                    <input type="date" class="datePicker" name="expiration" id="expiration" data-min="<%: DateTime.Today.ToString("M/d/yyyy") %>" /></li>
                <li>
                    <label for="purchasedByCustomer">
                        Cannot be Purchased By Customer</label>
                    <%:Html.CheckBox("isPurchasedByCustomer")%>
                </li>
                <li class="buttons">
                    <button type="button" id="addButton" class="actionButton default">
                        Add</button></li>
            </ul>

        </div> 
```

我的问题是：

1.  我知道我无法使用 DataAnotations 验证我的输入。那么我怎样才能通过使用 Jquery 来做到这一点呢？

2.  或者任何用于这种验证的 jquery 库？

3.  或建议任何其他方法？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T09:40:51.317

使用此功能检查各种文本框...

```
function validateData() {
    // Name
    var n  = $("#name").value;
    if (n == null || n == "") {
        alert("Please fill out name.");
        return false;
    }

    isprice = /^\d+\.\d{2}$/;

    // Value
    var val  = $("#value").value;

    if (val == null || val == "") {
        alert("Please fill out name.");
        return false;
    } else if(!isprice.test( val )) {
        alert("Please enter valid data for Value.");
        return false;
    }   

    // Purchase Price
    var price  = $("#purchasePrice").value;

    if (price == null || price == "") {
        alert("Please fill out name.");
        return false;
    } else if(!isprice.test( price )) {
        alert("Please enter valid data for Purchase Price.");
        return false;
    }

    return true;
} 
```

然后像这样修改您的 AJAX 调用：

```
addButton.off('click').on('click', function () {
    if(validateData()) {
        $.ajax({
            type: "POST",
            url: "/incentives/CreditPackagesAdd",
            data: dataPost,
            dataType: "json",
            success: function (url) {
            }
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:55:56.990

这将触发表单验证

```
$('form').submit(function(evt) {
evt.preventDefault();
var $form = $(this);
if($form.valid()) {
    //Ajax call here
}
}); 
```

**更新**

```
addButton.off('click').on('click', function () {
   if($("form").valid())
   {
        $.ajax({
        type: "POST",
        url: "/incentives/CreditPackagesAdd",
        data: dataPost,
        dataType: "json",
        success: function (url) {
           }
         });
    }
}); 
```

# nsdictionary - 循环遍历 NSDictionary 会导致奇怪的行为

> ID：14253947
> 
> 赞同：0
> 
> 时间：2013-01-10T08:53:23.040
> 
> 标签：nsdictionary, mkannotation, ienumerator

我目前有一个用于存储 json 信息的 NSDictionary，JSON 最初被序列化为 NSMutuable 数组，然后我将其分配给 NSDictionary。

在我的注释方法（我用来将 mkannotations 添加到我的地图视图的方法）中，我试图遍历字典并通过存储为字典中每个对象的键的坐标添加注释。

我目前的结果似乎只创建了一个注释视图（地图上的图钉），通过断点查看它似乎是在遍历字典但没有访问所有对象，我的代码如下：

```
for (NSString* key in [[Global sharedglobal]jsonDictionary]) {

NSNumber *longtitude = [[[Global sharedglobal]jsonDictionary] objectForKey:@"v_lon"];
NSNumber *latitude = [[[Global sharedglobal]jsonDictionary] objectForKey:@"v_lat"];
} 
```

看起来我正在考虑 for 参数中的键应该引用字典中某个对象中的键，例如@“v_lon”，这看起来正确吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:50:54.117

好的，因为我是编程新手，我还没有完全理解 json 的解析方式。它的工作原理如下：

json 是一个包含各种数据的对象的大型数组。

json 被下载并存储在 NSMutable 数组“jsonArray”中。

要访问对象，我需要使用“for in loop”检查字典，因为这是数据现在存储在可变数组中的方式。所以：

```
for (NSDictionary *dict in jsonArray){
NSNumber *longtitude = [dict objectForKet:@"keyForLongtitudeEntry"];
} 
```

这将遍历字典类型的所有对象，并将该经度变量设置为在这种情况下“keyForLongtitudeEntry”中指定的键的对象当前值。

# google-analytics - 如何在 Google Analytics 中跟踪“打开新标签”流量

> ID：14253951
> 
> 赞同：6
> 
> 时间：2013-01-10T08:53:28.673
> 
> 标签：google-analytics

我有一个推荐网站，它使用 URL 访问我的网站，该网站实施了谷歌分析。当用户单击链接时，推荐网站会在同一窗口的新选项卡中打开我的网站。

我想为每个推荐网站创建一个配置文件，以便每个配置文件都有自己的用户活动和交易转换报告。

我是谷歌分析的新手，请告诉我如何跟踪“打开新标签”方法的流量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-22T20:21:21.973

您可以使用 JavaScript 跟踪点击。这意味着标准单击、中键单击（许多人用来在新选项卡中打开）和右键单击（这可能意味着使用上下文菜单打开新选项卡）。

虽然我们不能将中键和右键单击用作可靠的转换数据（嗯，你可以，但你不会绝对正确），但我们可以使用这些上下文线索来暗示用户意图。Google Analytics 自定义维度确实有助于这种情况，因为我们可以将这些事件分配为“意图”。现在，当您查看分析报告时，您可以将意图与可能的新选项卡相关联。

这是一个反映这一点的 jQuery 片段：

```
jQuery('a.some-link').on('mousedown tap touch', function(e){
    eventIntent = ( e.which >= 2 )? 'Intent' : 'Explicit'; //If the mouse button is greater or equal to 2, then set the intent (otherwise, it is an explicit click).
    ga('set', 'dimension3', eventIntent); //Change the dimension index to match yours!
    ga('send', 'event', 'Category', 'Action', 'Label', 'Value'); //Send an event so the dimension is tracked!
}); 
```

从那里您可以使用您的标准报告，或创建自定义报告以及自定义细分来提高您的洞察力。

有关更多信息，[我写了一篇关于这个主题和其他可以与意图相关联的事件的帖子：这里。](https://gearside.com/event-intent-using-context-clues-determine-user-intention/)

# grails - 如何制作 Grails 文档

> ID：14253956
> 
> 赞同：0
> 
> 时间：2013-01-10T08:53:38.670
> 
> 标签：grails, documentation

如何使用 Grails 文档引擎？我想使用它，但没有提示/提示/指南或任何关于使用它的信息。只是“grails-doc”源文件，没有清楚地显示如何更改模板或构建过程。有人在用吗？或者至少知道该怎么做才能给出一些线索？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:04:09.553

我是 Rails 用户，在 Rails 中我们使用**rake doc:rails**。我不了解 grails，但我找到了一些可能对您有所帮助的链接：http: [//grails.org/doc/latest/ref/Command%20Line/doc.html，http](http://grails.org/doc/latest/ref/Command%20Line/doc.html) : [//grails.org/doc/latest /guide/single.html#docengine](http://grails.org/doc/latest/guide/single.html#docengine)

# jquery - 如何更改 jQuery 函数中的默认参数值？

> ID：14253959
> 
> 赞同：0
> 
> 时间：2013-01-10T08:53:46.927
> 
> 标签：jquery, validation, jquery-validation-engine

我没有使用 jQuery 的经验。我使用验证插件。但我应该改变错误信息气球的位置。这是验证功能的默认参数。

```
 a.validationEngine = { defaults: { validationEventTrigger: "blur", scroll: true, 
    focusFirstField: true, promptPosition: "topRight", bindMethod: "bind", 
    inlineAjax: false, ajaxFormValidation: false, ajaxFormValidationURL: false, 
    onAjaxFormComplete: a.noop, onBeforeAjaxFormValidation: a.noop, 
    onValidationComplete: false, isOverflown: false, overflownDIV: "",
    binded: false, showArrow: true, isError: false,
    ajaxValidCache: {}, autoPositionUpdate: false, InvalidFields: [], 
    onSuccess: false, onFailure: false } } 
```

我想将**promptPosition: "topRight"**更改为**promptPosition: "bottomLeft"**。当我在顶部函数中更改该参数的值时，它会起作用。

在页面中，我想将**promptPosition: "bottomLeft"**参数添加到以下函数。我该怎么做？

```
<script>
 jQuery(document).ready(function () {
     jQuery('#userSignInForm').validationEngine('init');
        jQuery('#signInButton').click(function () {
            jQuery('#userSignInForm .loading').animate({ opacity: 1 }, 850);
            if (jQuery('#userSignInForm').validationEngine('validate')) {
                jQuery.post('/Profile/SignIn', {
                    UserName: jQuery('#UserName').val(),
                    Password: jQuery('#Password').val(),
                    formname: 'user_SignIn_Form',
                    formtype: 'userSignInF'
                }, function () {
                    jQuery('#userSignInForm .loading').hide();
                });
                return false;
            } else {
                return false;
            }
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:56:31.583

发送初始化参数：

```
jQuery('#userSignInForm').validationEngine('init', {
   promptPosition: "bottomLeft"
}); 
```

代替

```
jQuery('#userSignInForm').validationEngine('init'); 
```

应该做的伎俩。

[此处用于 jQuery 验证引擎初始化的文档](https://github.com/posabsolute/jQuery-Validation-Engine#instantiation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:56:56.140

### 你读过[文档](https://github.com/posabsolute/jQuery-Validation-Engine#instantiation)吗？

> 使用选项时，默认行为是仅初始化 ValidationEngine，因此需要手动完成附加。

```
<script>
  $(document).ready(function(){
    $("#formID").validationEngine('attach', {promptPosition : "centerRight", scroll: false});
 });
</script> 
```

### 在您的代码中：

您需要在初始化中进行设置。代替：

```
jQuery('#userSignInForm').validationEngine('init'); 
```

和：

```
jQuery('#userSignInForm').validationEngine('init', {
  promptPosition : "bottomLeft"
}); 
```

# solr - Solr - (RE)-根据从第一个查询中获取的某些字段中的数据查询 Solr

> ID：14253970
> 
> 赞同：0
> 
> 时间：2013-01-10T08:54:44.610
> 
> 标签：solr, lucene, solrj

我正在使用`Solr 4.0`. 我有大约 1+ 百万条记录。

解释我的问题的最好方法是通过一个例子 -

考虑我的架构中有两个字段名称和类型（类型是一个方面）。

我有 4 条记录 -

```
 name                  type
stackoverflow        Knowledge markets
meta stackoverflow   Knowledge markets
ask ubuntu           Knowledge markets
programmers          Q&A for programmers 
```

现在`Solr`查询`q=name:*stack*`前 2 条记录的时间为`facet`计数为2。`type``Knowledge markets`

然后我必须在方面获得最高计数，在这种情况下，它的`Knowledge markets`，然后`Solr`再次查询`q=type:Knowledge markets`，忽略第一次查询中出现的记录。所以这`ask ubuntu`显示在建议部分。

**是否可以在 1 个查询中完成上述操作？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T13:02:59.063

我不知道这是否仅在单个查询中可行，因为您需要在查询之前确定分面结果。一种可能的选择是最初执行仅构面查询以获得最高构面计数，然后运行辅助查询。

所以首先查询`&q=name:*stack*&rows=0&facet.field=type&facet.limit=1`where`rows=0`选项不会返回任何搜索结果，只返回 facets 并且`facet.limit=1`只会返回一个结果，应该是最高值。

然后，您可以运行第二个查询以获取与所选类型关联的所有名称。

**编辑：** 在 Junaid 进一步澄清后，原来的结果仍然需要，所以我上面列出的内容仅适用于获取方面的结果。以下应该工作：首先获取数据`q=name:*stack*`并获得最高方面的价值。然后运行另一个查询，例如`q=type:Knowledge markets AND -name:*stack*`获取推荐的类型结果值，但从第一个查询中过滤掉名称值。

# ios - 钛中TiProxy和TiViewProxy的区别

> ID：14253972
> 
> 赞同：0
> 
> 时间：2013-01-10T08:54:54.343
> 
> 标签：ios, titanium, titanium-modules, titanium-proxy

我现在正在开发一个钛应用模块。我已经使用代理创建了[**模块。**](https://github.com/Midhun-MP/MMP_SMS)（TiProxy）。我正在创建的新模块基于视图。所以我正在尝试使用 TiViewProxy。

但我对一些术语感到困惑：

1.  `TiProxy`和之间的主要区别是什么`TiViewProxy`？
2.  文件有任何命名约定`TiViewProxy`吗？如果我们使用`TiProxy`，那么我们在文件名之后添加代理。有没有类似视图代理的东西？

我参考了[**iOS 模块开发指南**](https://wiki.appcelerator.org/display/guides/iOS+Module+Development+Guide)，但没有关于命名约定的内容。

请帮我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:14:08.997

`TiViewProxy`是具有“内置魔法”视图的特殊代理。例如，它参与 UI 布局周期。

假设你的模块只有一个想要暴露给 Ti 的视图，你应该调用你的视图`<ModuleName>View`和你的代理`<ModuleName>ViewProxy`。这将具有参与内置魔法的好处，以及您`myModule.createView()`在 JS 中使用的能力。

在iOS模块开发中提到你应该实现

`-(void)frameSizeChanged:(CGRect)frame bounds:(CGRect)bounds`

（可能通过做类似的事情 `[TiUtils setView:myView positionRect:bounds];`） - 这就是 Ti 让您知道您的视图已被定位/调整大小的方式。如果您更改了视图的位置/大小，您应该让 Ti 知道：

`[(TiViewProxy*)[self proxy] setHeight:NUMFLOAT(height)];`

（例如，如果您的视图改变了它的高度）

# android - 当我在开发Android应用程序时，我想在为这个ListView设置一个适配器后修改一个项目的背景

> ID：14253974
> 
> 赞同：-1
> 
> 时间：2013-01-10T08:55:00.147
> 
> 标签：android, listview, background

在开发Android应用程序时，我想在为这个ListView设置适配器后修改ListView中某个项目的背景，怎么做？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:21:38.827

如果我正确理解了您的问题，那么也许您可以尝试以下示例来更改列表项的背景...您应该以 `getView(int position, View convertView, ViewGroup parent)` 这种方式覆盖适配器的方法：
...
`convertView.setBackgroundDrawable(getContext().getResources().getDrawable(R.drawable.mybackground));`
...

# php - Silverstripe 重复数据库字段导致保存和发布错误

> ID：14253975
> 
> 赞同：1
> 
> 时间：2013-01-10T08:55:03.137
> 
> 标签：php, silverstripe

我正在使用 Silverstripe 3.0

我在 Page(Page.php) 类中创建了一个字段为

“链接到” => “站点树”

已存在于 RedirectorPage

即使在删除代码行并构建数据库之后，该字段仍然存在于 Page 和 Page_live 中，这在发布时给了我一个错误...保存到草稿时没有错误...并且内容被保存...成功消息未显示且 Firebug 控制台：响应：出现错误

即使在构建数据库之后，字段是否也不会从这些表中删除？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T10:55:53.133

silverstripe 在运行 dev/build 时不会从数据库表中删除任何字段，以免丢失任何数据，因此当它们过时时您必须手动删除它们。

如果删除了整个类，则相应的表将重命名为`_obsolete_[tablename]`.

不知道为什么您在发布时遇到错误（您是否也从 getCMSFields 函数中删除了该字段？），但要了解更多信息，您应该尝试启用开发模式，请参阅[http://doc.silverstripe.org/framework /en/topics/调试](http://doc.silverstripe.org/framework/en/topics/debugging)

# javascript - 在键盘事件中获取正确的字符

> ID：14253977
> 
> 赞同：11
> 
> 时间：2013-01-10T08:55:07.213
> 
> 标签：javascript, jquery, keyboard-events

我正在制作一个小文字游戏，我需要在其中获取用户在键盘上输入的最后一个字符。我想出了两种方法来做到这一点。

第一个是通过监听文档键盘事件并通过键码获取每个字符。在我开始使用键盘死键（如 Ā）编写字符之前，它工作得非常好。String.fromCharCode(e.keyCode) 将其转换为 A，因为 keyCode 用于 A，但事件中似乎没有关于事件产生的死键或真实字符的任何内容。

第二个是保持隐藏的输入始终集中（坏）并在键盘事件中获取输入值的最后一个字符，但这只有在我写得很慢时才有效。我的代码如下所示：

```
function is_char(e){
  return (!e.ctrlKey && !e.altKey && !e.metaKey &&
                        (e.keyCode >= 65 && e.keyCode <= 90) || 
                        (e.keyCode >= 97 && e.keyCode <= 122)
                );
}
$('#fake_input').on('keyup', function(e){
  if (is_char(e)){
    $('#result').append(this.value[this.value.length - 1]);
  }
}).focus(); 
```

这是工作示例 - [http://jsfiddle.net/YkaBm/1/](http://jsfiddle.net/YkaBm/1/) - 您应该在输入下方得到相同的单词，但是当您写得快一点时，结果是错误的。

您是否有一些建议如何在键盘事件中获取真实（正确）字符，或者为什么 input keyup 事件会这样？

**更新！**

正如我在评论中提到的 semir.babajic 答案对我的情况不太适用，但感谢 Semir，我发现这个愚蠢的解决方案有效：

```
function is_char(e){
  return (!e.ctrlKey && !e.altKey && !e.metaKey &&
                        (e.keyCode >= 65 && e.keyCode <= 90) || 
                        (e.keyCode >= 97 && e.keyCode <= 122)
                );
}
var x = 0;
$('#fake_input').on('keyup', function(e){
  if (e.keyCode === 8){
    x--;
  }
  else if (is_char(e)){
    x++;
    $('#result').append(this.value[x-1]);
  }
}).focus(); 
```

我仍然希望找到一种使用任何 $(document) 键盘事件从键盘事件中获取真实字符的方法，因为保持输入焦点似乎不是一个好的解决方案。

**更新2！**

以防万一其他人遇到类似问题，我发现这个解决方案是最好的：

```
App.insert_char = function(c){
    if (c && c.toUpperCase() != c.toLowerCase()){
        console.log(c);
    }
};

if ('oninput' in $('#fake_input')[0]){
    $('#fake_input').on('input', function(e){
        App.insert_char(this.value[this.value.length - 1]);
    });
}
else if ('onpropertychange' in $('#fake_input')[0]){
    $('#fake_input').on('propertychange', function(e){
        App.insert_char(this.value[this.value.length - 1]);
    });
}
else  if ('ontextInput' in $('#fake_input')[0]){
    $('#fake_input').on('textInput', function(e){
        App.insert_char(this.value[this.value.length - 1]);
    });
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T09:11:50.093

这条线导致了一个“瓶颈”：`this.value[this.value.length - 1]`它只是很慢。

试试这个：

更新：

```
$('#fake_input').keypress(function(e){
    $('#result').append(String.fromCharCode(e.which) + '<br />');
}).focus(); 
```

解释。我假设您想使用`keypress`而不是`keyup`捕获字符。请注意，keyup 与字符无关。它只告诉你它收到的键盘信号的键码。使用`keypress`，您可以确定大小写，因为您获得了字符的键码。

[http://jsfiddle.net/YkaBm/8/](http://jsfiddle.net/YkaBm/8/)

问候。

# python - Heroku在部署时按预期执行collectstatic？

> ID：14253978
> 
> 赞同：1
> 
> 时间：2013-01-10T08:55:08.160
> 
> 标签：python, django, heroku

我有 Django 设置来收集我的静态文件并使用 django-storages 将它们复制到 S3 中，当我明确运行时，这就像一个魅力

```
heroku run python manage.py collectstatic 
```

但是，我希望 Heroku 在部署时自动执行此操作（即 git push 到 Heroku），如本文档[https://devcenter.heroku.com/articles/django-assets](https://devcenter.heroku.com/articles/django-assets)中所述。显然，输出：

```
python manage.py collectstatic --dry-run --noinput 
```

确定 collectstatic 是否配置正确（当我显式运行时，collectstatic 可以正常工作）。我得到：

```
$ heroku run python manage.py collectstatic --dry-run --noinput
Running `python manage.py collectstatic --dry-run --noinput` attached to terminal... up, run.9607
Pretending to copy '/app/app_pkg/static/robots.txt'
.... # Lot of similar outputs not shown
16 static files copied. 
```

这对我来说看起来*不错*，但文档没有指定我应该看到什么。当我部署项目时，一切似乎都工作正常并成功完成。

```
-----> Installing dependencies using Pip (1.2.1)
       Cleaning up...
-----> Collecting static files
       16 static files copied.

-----> Discovering process types
       Procfile declares types -> web 
```

这些文件没有显示在我的 S3 存储桶中。如果我然后明确运行

```
heroku run python manage.py collectstatic 
```

所有文件都显示在 S3 存储桶中。我认为 Heroku 应该为我执行此操作，但我不确定为什么不这样做。这是预期的行为吗？我需要自己做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T15:24:55.737

奇怪还没有人回答你！只需将其添加到 Procfile 的开头：

```
web: python manage.py collectstatic --noinput 
```

每次在 Heroku 上部署您的应用程序时，这将运行 python manage collectstatic。

最干净的方法是将它链接到您现有的 Procfile ，如下所示：

```
web: python my_django_app/manage.py collectstatic --noinput; bin/gunicorn_django --workers=4 --bind=0.0.0.0:$PORT my_django_app/settings.py 
```

归功于 Matthew Phiong 和[他的精彩博文](http://matthewphiong.com/managing-django-static-files-on-heroku)

# c++ - 计算在 C++ 中创建的对象的数量

> ID：14253979
> 
> 赞同：-8
> 
> 时间：2013-01-10T08:55:12.277
> 
> 标签：c++

需要数数。在 setval 中创建的对象。请帮忙。源代码：[https ://www.dropbox.com/s/z6igpioidhov9oo/static.cpp](https://www.dropbox.com/s/z6igpioidhov9oo/static.cpp)

```
#include<iostream>
#include<conio.h>
using namespace std;

class student
{
    static int count;
protected:
    char name[20];
    char course[20];
    int roll;
    float fees;
public:
    student()
    {
    }

    void setval()
    {
        count++;
        cout<<"\nEnter the name : ";
        cin>>name;
        /*cout<<"\nEnter the course : ";
         cin>>course;
         cout<<"\nEnter the roll : ";
         cin>>roll;
         */cout<<"\nEnter the fees : ";
        cin>>fees;
    }

    friend float calfeespaid(student);

    void showval()
    {
        cout<<"\nName = "<<name;
        //cout<<"\nCourse = "<<course;
        //cout<<"\nRoll = "<<roll;
        cout<<"\nfees = "<<fees;
        //cout<<"\nNo. of objects created : "<<count;
    }
};

float calfeespaid(student s)
{
    static float total;
    total=total+s.fees;
    return total;
}

main()
{
    student s[5],a;
    for(int i=0;i<3;i++) 
    { 
        s[i].setval(); 
        calfeespaid(s[i]); 
    }

    for( int i=0;i<3;i++) 
    { 
        //cout<<count; 
        s[i].showval(); 
    } 
    cout<<"\nTotal Fees Paid : "<<calfeespaid(a); 
    getch(); 
} 
```

我们有 3 个学生类的成员函数： 1\. setval ：接受输入 2\. showval ：显示输出 3\. calfeespaid ：计算支付的总费用

现在，我的目标是创建一个静态 int 变量 count，它将计算在 setval 函数中创建的对象的数量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T09:08:22.123

0，没有创建对象............

# xml - 运行两个几乎相似的 XPath 查询时吞吐量显着下降

> ID：14253989
> 
> 赞同：0
> 
> 时间：2013-01-10T08:55:55.417
> 
> 标签：xml, xpath

我正在尝试通过 C 程序对大小为 4 mb 的 xml 文件运行一些 XPath 查询。我还在计算吞吐量（xml 文件的大小除以解析 xml 文件所用的时间和运行查询所用的时间）虽然有一件事让我很困惑。当我运行以下 XPath 表达式时：

“//什么|//是//那个”

..我的吞吐量约为 700 兆比特/秒。但是当我接下来运行以下表达式时：

“什么|//是//那个”

...我的吞吐量约为 36 兆比特/秒。谁能向我解释为什么在第二个查询开头删除两个双斜杠会导致吞吐量显着下降？我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:51:13.120

添加`//`到 XPath 意味着“从根开始并检查文档中的所有节点是否满足以下条件”。如果你删除它，它只希望检查当前节点。

例子：

```
<root>
    <A>
    </A>
    <D position="I'm here">
        <B>I'm inside D!</B>
        <C>So am I!</C>
    </D>
    <B>I'm not inside D.</B>
    <C>I'm not either.</C>
</root> 
```

如果我在这里应用 XPath `//C`，我的结果将是

```
<C>So am I!</C>

<C>I'm not either.</C> 
```

但是如果我应用 XPath `C`，我的结果就是`<C>So am I!</C>`

`//`因此，即使您得到相同的结果，您也正在通过应用搜索​​整个文档。通过使用`what|//is//that`，如果 XPath 没有找到具有该名称的当前节点的子节点，它将停止搜索。随着`//what|//is//that`您正在寻找所有`is`、`that`和`what`节点，这需要更长的时间。

如果您担心效率，请尽可能使用精确的路径（例如`root/A/D/C`，而不是`//C`）

# c - C中的不稳定if语句

> ID：14253993
> 
> 赞同：0
> 
> 时间：2013-01-10T08:56:02.210
> 
> 标签：c, string, pointers

我正在尝试编写棋盘游戏“Mastermind”（作业）的代码。我快写完了主要部分。不幸的是，我有一个不稳定的 if 语句，我无法通过使用 Netbeans 进行调试来解释。

在下面的代码中，**第 58 行**`if`的语句并不总是有效。游戏是这样的：

 **1.  用户输入想要“随机”生成的颜色数量
2.  用户尝试猜测（破解密码）颜色。
3.  如果 N=4（例如），则用户输入 4 种颜色的序列来尝试猜测它们。4.程序检查他是否正确并反馈反馈。

6 种颜色是：W：白色、B：蓝色、G：绿色、Y：黄色、P：紫色和 R：红色。

以下代码只是整体的一部分。请原谅我使用gets 和声明这部分中未使用的变量。还有一些“愚蠢”的部分，但在代码正常运行后它们会被更改:) 你能帮我调试一下**第 58 行**`if`的这个语句吗？（你会看到它旁边的评论）。

 **这是代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>

char *colour(char *xr, int N);
int RandomInteger(int low, int high);

int main()
{
    int i,j,q,N,w,z,k,A[6][4],win;
    char *xr,*xrx,temp[1],sur[]="SURRENDER";

    printf("Gimme number from 1-100");
    scanf("%d",&N);
    getchar();

    for(i=0; i<6; i++) A[i][1]=0;
    for(i=0; i<6; i++) A[i][2]=0;
    for(i=0; i<6; i++) A[i][3]=0;
    A[0][0]=87,A[1][0]=66,A[2][0]=71,A[3][0]=89,A[4][0]=80,A[5][0]=82;
    xr=malloc(N*sizeof(char));
    xrx=malloc(N*sizeof(char));
    xr=colour(xr,N);

    printf("\nxr: %s",xr);
    i=0;
    q=0;
    z=1;
    printf("\nGimme the color sequence: ");
    gets(xrx);
    //if(strcmp(xrx,sur)==0) goto end;

    while(xrx[i])
    {
   if(xrx[i]!=87 && xrx[i]!=66 && xrx[i]!=71 && xrx[i]!=89 && xrx[i]!=80 && xrx[i]!=82)               
       {z=0;}
       if(z==0) 
       {
           printf("\nGimme the color sequence: ");
           gets(xrx);
           i=0; 
           z=1;
       }
       else i++;
    }

    i=k=q=0;
    while(xr[i])
    {
    if(xr[i]==xrx[i]) 
    {
            q++;
            for(w=0; w<=5; w++)
            {
                     if(xr[i]==A[w][0]) //SOMETIMES IT DOESN'T WORK
                     {
                             printf("\nhere:");
                             A[w][3]=1;
                             printf("%d",A[w][3]);
                             break;
                     }
            } 
    }
    i++;
    }
    printf("\nColor and position correct: %d",q);
    for(i=0; i<=5; i++) printf("\n%d",A[i][3]); //PERIERGO

   // end:
   printf("!!BYE!!");
   return 0;
}

char *colour(char *xr, int N)
{
    int r,i,j,number;
    char *str,temp[2];

    str=calloc(N,sizeof(char));
    srand((int)time(NULL));
    for(j=0; j<N; j++)
    {
       r=RandomInteger(0,5);
       if(r==0)
       {
           temp[0]='W';
           temp[1]='\0';
           strcat(str,temp);
       }
       else if(r==1)
       {
       temp[0]='B';
       temp[1]='\0';
       strcat(str,temp);
       }
       else if(r==2)
       {
           temp[0]='G';
           temp[1]='\0';
           strcat(str,temp);
       }
       else if(r==3)
       {
           temp[0]='Y';
           temp[1]='\0';
           strcat(str,temp);
       }
       else if(r==4)
       {
           temp[0]='P';
           temp[1]='\0';
           strcat(str,temp);
       }
       else if(r==5)
       {
           temp[0]='R';
           temp[1]='\0';
           strcat(str,temp);
       }
    }
    return str;
}

int RandomInteger(int low, int high)
{
    int k;
    double d;
    d=(double)rand()/((double)RAND_MAX+1);
    k=(int)(d*(high-low+1));
    return (low+k);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T08:58:32.263

这是超出数组范围的访问，导致未定义的行为：

```
for(i=0; i<5; i++) A[i][3]=0; 
```

和`A`尺寸一样`[5][3]`。数组索引运行 from`0`到`N - 1`where`N`是数组中元素的数量。还有其他的越界访问：

```
A[5][0]=82; 
```

并在函数内`color()`：

```
char *str,temp[1];
str=malloc(N*sizeof(char)); /*Note sizeof(char) is guaranteed to be 1: omit.*/

/* snip */
temp[1]='\0'; 
```

`str`需要大一（不确定为什么`temp`甚至存在）。

`A`使用聚合初始化器代替循环将数组中的所有元素设置为零：

```
int A[5][3] = { { 0 } }; 
```

请参阅[为什么 get 函数如此危险以至于不应该使用它？](https://stackoverflow.com/questions/1694036/why-is-the-gets-function-is-dangerous-why-should-not-be-used)****

# php - 在mysql中选择除一个字段之外的所有字段

> ID：14253994
> 
> 赞同：16
> 
> 时间：2013-01-10T08:56:08.080
> 
> 标签：php, mysql, database, zend-framework, select

> **可能重复：**
> [选择 MySQL 中除一列之外的所有列？](https://stackoverflow.com/q/9122/3578036)

我想知道有没有一种方法可以从我的数据库中的表中选择除一个字段之外的所有字段。

我知道我可以描述选择查询中的字段名称。
例如：

```
SELECT fieldname1, fieldname2, fieldname3, fieldname4 FROM tablename; 
```

但我的问题是，有没有办法以简单的方式做到这一点......像这样

```
SELECT * FROM tablename EXCEPT(fieldname3); 
```

我正在使用 MySQL 和 Zend 框架。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-10T09:12:01.653

你可以很容易地做到这一点

假设您的字段是 id = 5

然后

```
 select * from your_table where id !=5 
```

如果你的意思是列

假设你不想选择`column3`

然后

```
 select column1,column2,column4 from tablename; 
```

如果你有很多列

```
 SET @sql = CONCAT('SELECT ', (SELECT REPLACE(GROUP_CONCAT(COLUMN_NAME),  '<columns_to_delete>,', '') 
    FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = '<table>'   AND TABLE_SCHEMA = '<database>'), ' FROM <table>');

    PREPARE stmt1 FROM @sql;
   EXECUTE stmt1; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-10T09:00:08.647

是的，你可以从`information_schema.columns`

```
SET @sql = CONCAT('SELECT ', (SELECT GROUP_CONCAT(COLUMN_NAME) FROM 
information_schema.columns WHERE table_schema = 'dbo' AND table_name = 
'tablename' AND column_name NOT IN ('c1', 'c2')), 
' from dbo.tablename');  

PREPARE stmt1 FROM @sql;

EXECUTE stmt1; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-10T09:54:11.713

试试这个 -

```
SHOW FIELDS FROM `tablename` WHERE FIELD NOT IN ('f1','f2','f3'); 
```

执行此查询并获取特定的字段名称并将每个字段名称放入一个数组中。然后在选择查询中使用“，”内爆数组。

```
$fields = implode(',',$fields_arr);
$sql = SELECT $fields FROM `tablename`; 
```

# java - 有没有办法在使用通用图像加载器获取图像时指定额外的标题？

> ID：14253995
> 
> 赞同：0
> 
> 时间：2013-01-10T08:56:09.867
> 
> 标签：java, android, universal-image-loader

我正在尝试使用[Universal Image Loader](https://github.com/nostra13/Android-Universal-Image-Loader#useful-info)库来加载我的图像。我试图调用 web 服务 api 来获取图像，但它需要客户端附加额外的 http 标头。即：访问令牌：124124141241421

有没有办法在我的项目中动态地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T09:48:38.760

您应该实现自己的**ImageDownloader**（扩展[ImageDownloader](https://github.com/nostra13/Android-Universal-Image-Loader/blob/master/UniversalImageLoader/src/com/nostra13/universalimageloader/core/download/ImageDownloader.java)类和覆盖`InputStream getStreamFromNetwork(URI imageUri)`方法）并将其设置为配置。例如，查看默认使用的[URLConnectionImageDownloader 。](https://github.com/nostra13/Android-Universal-Image-Loader/blob/master/UniversalImageLoader/src/com/nostra13/universalimageloader/core/download/URLConnectionImageDownloader.java)

你应该这样做：

```
HttpURLConnection conn = (HttpURLConnection) imageUri.toURL().openConnection();
conn.setRequestProperty("Access-Token", "124124141241421"); 
```

# python - 有没有用 python 编写的 vim 插件？

> ID：14253997
> 
> 赞同：3
> 
> 时间：2013-01-10T08:56:21.243
> 
> 标签：python, vim, vim-plugin

就像 Command-T 一样。Command-T 需要使用 Ruby 支持编译的 Vim。有没有用python编写的vim插件？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-10T09:05:13.400

许多：

*   [https://github.com/klen/rope-vim](https://github.com/klen/rope-vim)
*   [https://github.com/SirVer/ultisnips](https://github.com/SirVer/ultisnips)

`username:vim-scripts`你可以通过查询for `language:python`（意味着 Python 是主要语言）在 Github 上找到 90 多个：

*   [https://github.com/search?q=language%3Apython+username%3Avim-scripts](https://github.com/search?q=language%3Apython+username%3Avim-scripts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:33:38.250

你可以看到重新设计的[powerline](https://github.com/Lokaltog/powerline)：它在两个 *.vim 文件中正好有 19+3 行有意义的行（总共 31+11：有空行和一些辅助的东西）。如果您使用安装插件，则不需要包含 3 (11) 行的文件`pip`。在任何情况下都需要在 vimrc 中增加一行。

它是我所知道的唯一一个*文件*中行数较少的vim 插件`*.vim`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-10-27T09:57:01.467

是的，请参考我的插件： [https](https://github.com/Yggdroot/LeaderF) ://github.com/Yggdroot/LeaderF 。它的功能类似于 Command-T，但用 Python 编写。