# StackOverflow 问答 15752000-15752999

# java - 私人最终原住民与私人原住民的好处

> ID：15752005
> 
> 赞同：1
> 
> 时间：2013-04-01T21:14:15.007
> 
> 标签：java, gwt, jsni

我知道 的意思`final`。

在进行 JSNI 调用时，`private final native ...`是否有任何理由或好处？`private native ...`我问的原因是因为我不是 JSNI 专家，但我认为添加`final`与非本地调用没有什么不同。我见过很多代码使用`private final native ..`，但我不确定动机。我正在处理的一些代码正在使用`private final native ..`，我倾向于删除`final`限定符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T21:33:56.950

如果我们只谈论 GWT，那么只有[JSO](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsOverlay)类`final`中的本地方法才需要关键字。否则，您应该只遵循标准 Java 实践，或您的团队特定实践。一些团队只是喜欢将 final 放在任何可能是 final 的东西上（通常 IDE 会自动为他们这样做），并且有充分的理由这样做。

# asp.net-mvc - ASP MVC3 - 链接到共享文件夹上的文件

> ID：15752006
> 
> 赞同：0
> 
> 时间：2013-04-01T21:14:16.053
> 
> 标签：asp.net-mvc, asp.net-mvc-3

在我的 ASP MVC3 站点中的一个页面上，我需要包含指向我们在办公室使用的共享驱动器上的一个或多个文件的链接。我将文件的地址保存在数据库中，并尝试将其呈现为我们视图中的链接。

使用`@Html.ActionLink`我很确定是错误的控件使用，我收到以下错误：

```
[HttpException (0x80004005): A potentially dangerous Request.Path value was detected from the client (&).]
   System.Web.HttpRequest.ValidateInputIfRequiredByConfig() +9021001
   System.Web.PipelineStepManager.ValidateHelper(HttpContext context) +59 
```

但是，使用其他`@Html`链接控件并没有奏效。

问题之一是我们不想通过允许下载来创建文件的多个副本。我们只是想在指定位置链接到该文件，并允许用户处理该副本。Windows 有一项功能，如果您通过电子邮件或 word doc 发送文件，则允许您单击文件路径以打开文件。这就是我们想要的功能类型。

这是当前导致问题的示例地址：

```
\\Prdhilfs02\l&i-systems\WORKAREA\AgencySystems\SHARED\DSSProj\PRDSUP\Defects\TD14734 Agent Welcome Letters\Welcome Letters v1.2.doc 
```

当它被渲染成 HTML 时，它看起来像这样：

```
/%5C%5CPrdhilfs02%5Cl%26i-systems%5CWORKAREA%5CAgencySystems%5CSHARED%5CDSSProj%5CPRDSUP%5CDefects%5CTD14734%20Agent%20Welcome%20Letters%5CWelcome%20Letters%20v1.2.doc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:18:20.283

`ActionLink` is for links to controller actions, not absolute links.

You don't need a HTML-helper at all, just render this directly:

```
<a href="file://<%= myUncPath %>">click me</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:17:42.150

可能不是使用助手的情况，为什么不只是

```
<a href="@Html.Raw(filepath)">Download</a> 
```

# divshot - 如何确定 divshot 中使用的 CSS 框架版本？

> ID：15752007
> 
> 赞同：1
> 
> 时间：2013-04-01T21:14:20.850
> 
> 标签：divshot

我很高兴看到 ZURB 的基金会在名单上。我想在下一个项目中使用 Foundation 4；当前使用的是什么版本？

如果它 < 4，有没有办法链接到它（通过“自定义”）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T23:07:55.917

Divshot 支持以下框架版本：

*   推特引导 2.3.1
*   ZURB 基金会 4.0.9
*   棘轮 1.0.0

如果发布了新的主要版本（例如 Bootstrap 3），我们将提供向后兼容性。您将能够同时使用 Bootstrap 3 和旧版本。

目前，除非您检查框架的 CSS 文件，否则无法在 Divshot 中查看当前版本。该版本应该在顶部可见。我们将在未来的更新中公开这些数据，以使事情变得更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T23:42:09.163

您可以单击屏幕左上角导航器上方的项目名称。这将带您进入您的项目页面。将光标悬停在相关项目上，然后单击齿轮图标（项目设置）。在这里，您将能够看到为项目选择了哪个框架。

# c - 自定义 lwip microblaze 回声示例

> ID：15752009
> 
> 赞同：2
> 
> 时间：2013-04-01T21:14:30.377
> 
> 标签：c, lwip, microblaze

在回显示例中，我们有这个函数再次发送相同的数据包以便回显数据，我想更改它以便发送用户发送的任何固定数据，所以我更改了这个：

```
 err = tcp_write(tpcb, p->payload, p->len, 1); 
```

对此：

```
 char* as="ki";
    err = tcp_write(tpcb, as, 3, 1); 
```

当我运行我的应用程序时，它不会回显任何内容，这是为什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T11:02:55.457

你的问题是C代码。代替

```
char * as = "ki" 
```

采用

```
char as[] = "ki" 
```

或者您可以执行 pbuf alloc，也许这可以为您生成一些内存。

```
es->p = pbuf_alloc(PBUF_TRANSPORT, strlen((char*)"ki") , PBUF_POOL);
  pbuf_take(es->p, (char*)"ki", strlen("ki")); 
```

此外，你还应该检查返回条件，如果 tcp_write 给你的不是 ERR_OK 那么你应该再试一次并更加努力。我在 POLL 机制中使用 tcp write，但这会降低吞吐量，当我在 main while 循环中使用它时，我会获得相对更好的吞吐量。

# jquery - 将销售税添加到 Jquery 计算插件

> ID：15752012
> 
> 赞同：1
> 
> 时间：2013-04-01T21:14:46.587
> 
> 标签：jquery, jquery-calculation

嗨，我需要一些帮助来实现一个简单的销售税计算到使用 Jquery 计算插件的交货价格估计表格，我相信很多人都来过：[http ://www.pengoworks.com/workshop/jquery/calculation/calculation .plugin.htm](http://www.pengoworks.com/workshop/jquery/calculation/calculation.plugin.htm)

这是我当前的测试页面：http: [//jsfiddle.net/treigh/afk3C/4/](http://jsfiddle.net/treigh/afk3C/4/)

```
 $("#FirstHourRate, #HalfHourRate, [rel='eta']").keyup(recalc);

  function recalc() {

  $("#subtotal").calc(
  // the equation to use for the calculation
  "FirstHourRate + (eta-1)*2*HalfHourRate", {
      bind: "keyup",
    eta: $("[rel='eta']").sum(),
      FirstHourRate: $("#FirstHourRate"),
      HalfHourRate: $("#HalfHourRate")
  }, function(s) {
      // return the number as a dollar amount
      return "$" + s.toFixed(2);
  });
} 
```

目前我可以生成一个小计。但我还想计算一个总计，它基本上是小计的总和 + 小计的 13% 税。

[有人在这里](https://stackoverflow.com/questions/10693670/adding-tax-calculation-to-jquery-calculation-plug-in)有类似的问题，但我的问题略有不同。

我会很感激任何帮助。

**编辑**

在@Mohammad Adil 的大力帮助下，我设法完成了几乎所有工作。到目前为止，我可以显示小计和总计，其中包括 13% 的销售税。我还需要在小计和燃油费之后显示实际税值，以帮助用户将服务费与任何其他附加费和销售税区分开来。换句话说，表格应该在显示总计之前显示费用明细。输出应如下所示：

小计 = $amount（基于公式中看到的“FirstHourRate + (eta-1)*2*HalfHourRate”）

燃料 = $金额

销售税 = 0.13（小计 + 燃料） 总计 = 小计 + 燃料 + 销售税

我希望这有点道理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:25:42.880

如果您想计算总计（*小计的总和 + 小计的 13% 税*），您可以通过简单的数学计算。

# [演示小提琴](http://jsfiddle.net/mohammadAdil/afk3C/5/)

与计算插件集成

```
grandtotal = subtotal * 1.13 ; 
```

# ruby - 使用 ActiveMerchant (payments pro) 将商品数据传递给 PayPal

> ID：15752013
> 
> 赞同：0
> 
> 时间：2013-04-01T21:14:47.763
> 
> 标签：ruby, paypal, activemerchant

我希望有人可以帮助我解决这个让我陷入困境的问题。我在我的 rails 应用程序中使用 ActiveMerchant 通过 Paypal 网关处理购物车交易。

交易是成功的，但是当我查看我的 PayPal 帐户中的历史记录时，没有关于与交易相关的项目的信息。有时，您会看到项目数据，但大多数情况下，详细信息中不会显示任何项目。

这是我的结帐控制器中发生的事情：

```
def process_order            
    @items = Array.new      

    @donations.each do |d|
      item = Hash.new        
      item[:name] = d.project.title 
      item[:quantity] = 1
      item[:description] = "Donation from website"
      item[:amount] = (d.pledge.to_i*100).round
      @items << item
    end

    @response = GATEWAY.purchase(price_in_cents, credit_card, purchase_options)
    if @response.success?
      @validTransaction = true
    end
end

private

 def purchase_options      
  {
  :items => @items,      
  :ip => request.remote_ip,
  :billing_address => {
    :name     => params[:first_name],
    :address1 => params[:last_name],
    :city     => params[:city],
    :state    => params[:state],
    :country  => params[:country],
    :zip      => params[:zip]
    }
  }
end

def validate_card
  unless credit_card.valid?
    credit_card.errors.full_messages.each do |message|
      @errors += message + "<br/>"
    end
  end
end

def credit_card
  @credit_card ||= ActiveMerchant::Billing::CreditCard.new(
  :brand               => params[:card_type],
  :number             => params[:card_number],
  :verification_value => params[:card_verification],
  :month              => params[:date][:month],
  :year               => params[:date][:year],
  :first_name         => params[:first_name],
  :last_name          => params[:last_name]
  )
end 
```

我认为这就是那里所有相关的东西，所以如果有人能明白为什么这不起作用，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-28T13:37:59.653

我遇到了类似的问题，这是因为我将 HTML 代码传递给“描述”值（我的描述存储 HTML 代码）。我通过用我自己的静态描述替换 HTML 标记的描述来解决它，它工作正常。

如果您尚未解决问题，您可能需要使用更多静态数据进行测试，以查看具体是什么导致了问题

# java - Android Widget没有从数据库中获取数据

> ID：15752015
> 
> 赞同：0
> 
> 时间：2013-04-01T21:14:56.870
> 
> 标签：java, android, database, widget

当我的小部件代码试图从 WidgetProvider 类调用数据库时，它没有检索任何内容。当我调试我的代码时，当它到达 database.open() 时，调试点突然消失了。是否有导致问题的超时设置？执行过程中也没有抛出异常。有人可以告诉我这里有什么问题吗？

代码详情如下：

```
public class PEMWidgetProvider extends AppWidgetProvider {

    private DataVO vo = new DataVO();

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager,
            int[] appWidgetIds) {

        ComponentName thisWidget = new ComponentName(context,PEMWidgetProvider.class);

        int[] allWidgetIds = appWidgetManager.getAppWidgetIds(thisWidget);

        for (int widgetId : allWidgetIds) {

            RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget_layout);

            DataDAO dao = new  DataDAO (context);

                String month = "4";
                vo = dao.getData(month);

            }

          //get all detail
            remoteViews.setTextViewText(R.id.v_widgetFieldName, vo.getFiedl1());
            remoteViews.setTextViewText(R.id.v_widgetFieldValue, vo.getFiedle2());

         // Register an onClickListener
            Intent intent = new Intent(context, PEMWidgetProvider.class);

            intent.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
            intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);

            PendingIntent pendingIntent = PendingIntent.getBroadcast(context,
                0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
            remoteViews.setOnClickPendingIntent(R.id.v_widgetFieldValue, pendingIntent);
            appWidgetManager.updateAppWidget(widgetId, remoteViews);
        }
    } 
```

数据道：

```
public class DataDAO{

    private static final String DB_NAME = "DB";
    private SQLiteDatabase db;
    private BaseDAO baseDAO;
    private Context context;

    public DataDAO(Context context){
        baseDAO = new BaseDAO(context, DB_NAME, null, 1);
        this.context = context;
    }

 //this method works fine when i am calling from MainActivity
   public DataVO  getData(String month){

        SQLiteDatabase database = baseDAO.open();

        String whereClasue = "fieldName= ? and month = ?";
        Cursor cursor =database.query(Constants.DATA_TBL, 
        new String[]{"field1, fieldValue2"}, 
        whereClasue, new String[]{"Data1", month}, null, null, null);

        //there will be only record
        if(cursor.moveToFirst()){
            do{
                DataVO vo = new DataVO();
                vo.setField1(cursor.getString(0));              
                vo.setField2(cursor.getString(1));
            }while(cursor.moveToNext());

        }       

        if (cursor != null && !cursor.isClosed()) {
            cursor.close();
            database.close();
        }
        return vo;
    }

public class BaseDAO extends SQLiteOpenHelper {

    public static SQLiteDatabase database;
    public BaseDAO(Context context, String name, CursorFactory factory,
            int version) {
        super(context, name, factory, version);
    }

    public SQLiteDatabase open() throws SQLException{
            database = super.getWritableDatabase();

            return database;
        }

        public void close(){
            if(database != null)
                database.close();
        }

    } 
```

谢谢钦坦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:40:08.237

请更正您的代码，它将起作用。

```
database = super.getWritableDatabase();// replace this line of code with following line   
database = getWritableDatabase(); 
```

# git - Windows 上的 git 一直显示修改过的文件，即使对于新克隆的 repo

> ID：15752026
> 
> 赞同：26
> 
> 时间：2013-04-01T21:15:50.490
> 
> 标签：git, tortoisegit

我在 Windows 机器上遇到了我的 git 问题。我总是在每个 repo 中修改了一些 git 文件，显示为已修改的文件是相同的。

如果我克隆一个新的 repo 并使用 tortoisegit 提交，我会看到一些文件已修改，即使我从未接触过 repo 中的单个文件。“gitstatus”虽然没有显示任何修改

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-01-08T06:48:14.737

检查更改是否仅仅是文件权限的更改。这就是我的原因，TortoiseGit 和 Git Extensions 都显示未修改的文件。

用于[忽略 chmod 差异](https://stackoverflow.com/q/1580596/1097104)`git config core.fileMode false`（或直接编辑*.git/config*文件）。

 *您可能还想将其设置为全局配置，使用`git config --global core.filemode false`.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-01T21:28:22.873

这是行尾问题。在你的 Windows 机器上设置这个：

```
git config --global core.autocrlf true 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-11-11T06:40:55.153

没有一个建议的修复对我有用。但是，我安装了 Cygwin，并且 TortoiseGit 在安装时选择了它的路径。我通过安装官方 Git 包解决了这个问题，并更改了 TortoiseGit 中的路径。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-10-03T01:06:10.600

如果将 TortoiseGit 与 Cygwin git 一起使用（*不受官方支持*），则应执行几个额外的设置步骤：

1.  选择`[CYGWIN-INSTALL-PATH]\bin-folder`as git.exe 文件夹。

2.  在 Windows 中配置`HOME`环境变量，使 Cygwin 和 TortoiseGit 使用相同的主目录和全局 git-config。在此处使用正常的 Windows 表示法（例如，`C:\Users\USERNAME`）。默认情况下，TortoiseGit 使用通常位于 c:\Users 下的 Windows 主目录，而 Cygwin 使用位于`[CYGWIN-INSTALL-PATH]\home`.

3.  配置`AutoCrLf`，这是必要的，因为 TortoiseGit 和 Cygwin Git 有不同的默认值。Cygwin Git 中的默认值是`true`.

4.  转到 TortoiseGit 调用`Advanced Settings`并设置`CygwinHack`为的部分`true`以激活 cygwin 解决方法。

5.  重启。

第 4 步至关重要，为我解决了问题。

参考（参见*Cygwin Git*部分）：[https ://tortoisegit.org/docs/tortoisegit/tgit-dug-settings.html](https://tortoisegit.org/docs/tortoisegit/tgit-dug-settings.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-09-25T15:13:59.823

只是在这里发布它作为答案，因为它可能会帮助其他人。

如果您安装了 Cygwin 和 Tortoise Git，那么当您尝试合并添加 0 行和删除 0 行的代码时，它只会显示许多文件，这有点烦人。

我尝试在 git config 中添加上述选项，但没有帮助。

您只需右键单击任何文件夹即可转到

> **Tortoise 设置 -> 常规 -> 重新运行首次向导**

现在在这里您可以通过指向其他 Git.exe 来更改 git.exe 的路径，或者如果您安装了 Gitbash，您也可以指向它的 git.exe。只要确保已经存在的路径应该是来自 Cygwin/bin/git.exe 的东西，应该更新到其他 git.exe。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-10T12:50:41.203

我刚刚遇到了这个问题，对我来说，修复结果非常简单。

确保当前没有运行 git 进程，然后删除`.git\index.lock`.

在此之后，我的文件的修改状态得到了正确处理。*

# python - 图形显示窗口保持隐藏状态

> ID：15752029
> 
> 赞同：1
> 
> 时间：2013-04-01T21:16:20.023
> 
> 标签：python, macos, matplotlib

注意：我只在 OS X (Lion) 中看到过此处描述的问题。

Matplotlib 是一个用于数据可视化的 Python 库。当我尝试在屏幕上显示图表时，显示图表的窗口仍然顽固地隐藏在其他窗口后面。查看的唯一方法是隐藏、最小化或移开所有其他窗口。这使得与 matplotlib 的交互工作变得不必要地繁琐。

FWIW，产生这些结果的一种方法如下所示；显示的所有步骤（包括对 ipython 的调用）均取自 matplotlib 教程：

```
% ipython --pylab
...
In [1]: import matplotlib.pyplot as plt

In [2]: plt.plot([1, 3, 2, 4])
Out[3]: [<matplotlib.lines.Line2D at 0x106aabd90>] 
```

此时，如果没有其他窗口可以隐藏它（这是不常见的），就会看到带有图形的窗口出现，但它没有获得焦点。即使单击它，它也有一个没有焦点的窗口外观（例如左上角的三个按钮保持浅灰色，而不是通常的红-黄-绿）。

另外，FWIW，我观察到python+numpy+matplotlib+ipython 的多种安装方式（在同一台机器上）*完全相同的行为*`homebrew`，包括使用系统提供的 python 的安装，使用由安装的 python 的安装，或者那些使用直接从源代码安装到我主目录之外的位置的python。

[万一这很重要，我已经为Lion 附带的有缺陷的 Tcl 和 Tk 框架](http://www.python.org/download/mac/tcltk)安装了 ActiveTcl 替代品。

（相比之下，当我在 Ubuntu 中运行上述程序时，图形窗口出现，具有焦点，并且在所有其他窗口的顶部，正如它应该出现的那样。）

关于可能发生的事情或我能做些什么的任何想法？

注意：我知道 Enthought 的 EPD，但这不是一个选项，因为我无法深入了解原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:23:38.667

不幸的是，这是在 OS X 上使用 Aqua Tk 的基于 Tkinter 的应用程序的普遍问题。请参阅[此处](http://bugs.python.org/issue11571)进行讨论，应用程序可以做什么来解决它，以及建议的通用解决方案。

# actionscript-3 - AS3 hitTestObject 不会注册

> ID：15752034
> 
> 赞同：0
> 
> 时间：2013-04-01T21:16:46.250
> 
> 标签：actionscript-3, flashdevelop, hittest

嘿伙计们，所以基本上我想创建多个级别，我设置了如下所示的级别，但由于某种原因，level_2 的 HittestObject 没有启动。我无法确定我做错了什么。级别 2 已启动，但当我试图击中你时，它就直接通过了。

我有一个Goal_1 和一个goal_2，我想和玩家一起击球。

我想有多个级别的goal_1和多个级别的goal_2等等

这是代码：

```
public class keepFocusEngine extends MovieClip 
{

    //MultiTouch added for touch gestures
    Multitouch.inputMode = MultitouchInputMode.TOUCH_POINT;

    public var btnPressedUp:Boolean;
    public var btnPressedDown:Boolean;
    public var btnShootPlayer:Boolean;

    public var btnUp:MovieClip;
    public var btnDown:MovieClip;
    public var shootPlayer:MovieClip;

    private var speed:Number = 6.0;
    public var vx:Number = 0;
    public var vy:Number = 0;
    private var friction:Number = 0.93;
    private var maxspeed:Number = 12;

    public var player:mPlayer;
    public var mGoal_1:goal_1;
    public var mGoal_2:goal_2;

    public var playerLives:Number;
    public var livesText:TextField;

    public var highScoreText:TextField;
    public var nScore:Number;

    public var levelText:TextField;
    public var nLevel:Number;

    public var menuEnd:mcEndGameScreen;
    public var menuStart:mcStartGameScreen;

    public function keepFocusEngine() 
    {
        //Initialize variable to false
        btnDown.visible = false;
        btnUp.visible = false;
        shootPlayer.visible = false;
        livesText.visible = false;
        highScoreText.visible = false;
        levelText.visible = false;

        //Create loader object
        var startGameLoader:Loader = new Loader();
        //Add event listener for complete event
        startGameLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, startGameLoaded);
        //Load loader object
        startGameLoader.load(new URLRequest("StartGameScreen.swf"));

        //Create End game loader object
        var endGameLoader:Loader = new Loader();
        //Add event listener
        endGameLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, endGameLoaded);
        //Load end game object
        endGameLoader.load(new URLRequest("EndGameScreen.swf"));

    }

    private function startGameLoaded(e:Event):void 
    {
        //Get a refrece to the loaded movieclip
        menuStart = e.target.content as mcStartGameScreen;
        //Listen for start game event
        menuStart.addEventListener("START_GAME", playGameAgain);
        //Add start screen to the stage
        addChild(menuStart);
    }

    private function endGameLoaded(e:Event):void 
    {
        menuEnd = e.target.content as mcEndGameScreen;
        menuEnd.addEventListener("END_GAME", playGameAgain);
        addChild(menuEnd);
        menuEnd.hideEndScreen();
    }

    private function playGameAgain(e:Event):void 
    {

        //Add Hi Res Stats
        addChild(new Stats());

        //mainPlayerObject added to stage
        player = new mPlayer();
        stage.addChild(player);
        player.x = (stage.stageWidth / 2) - 280;
        player.y = (stage.stageHeight / 2);

        mGoal_1 = new goal_1();
        stage.addChild(mGoal_1);

        //Update Player lives and add 3 lives
        playerLives = 3;
        updatePlayerLives();

        //Update Level progression
        nLevel = 1;
        updatePlayerLevel();

        //Add score to texxt field
        nScore = 0;
        updateHighScore();

        //Initialize stage objects to true 
        btnDown.visible = true;
        btnUp.visible = true;
        shootPlayer.visible = true;
        livesText.visible = true;
        highScoreText.visible = true;
        levelText.visible = true;

        //Hide external screens
        menuEnd.hideEndScreen();
        menuStart.hideStartScreen();

        //setup Listeners when btn's are rolled over and out
        btnUp.addEventListener(TouchEvent.TOUCH_OVER, btnUpMouseOver, false, 0, true); 
        btnUp.addEventListener(TouchEvent.TOUCH_OUT, btnUpMouseOver, false, 0, true);
        btnDown.addEventListener(TouchEvent.TOUCH_OVER, btnDownMouseOver, false, 0, true); 
        btnDown.addEventListener(TouchEvent.TOUCH_OUT, btnDownMouseOver, false, 0, true);
        shootPlayer.addEventListener(TouchEvent.TOUCH_TAP, shootPlayerObject, false, 0, true);

        //setup game loop event listeners
        stage.addEventListener(Event.ENTER_FRAME, gameLoop);

        //To completely end game when back button pushed on android
        NativeApplication.nativeApplication.addEventListener( KeyboardEvent.KEY_DOWN, handleKeyDown );

    }

    private function gameLoop(e:Event):void 
    {
        playerShoot();
        playerControl();
        playerStageBoundaries();

        checkEndGameCondition();
        checkPlayerOffScreen();

        level_1();
    }

    private function level_1():void 
    {

        if(player.hitTestObject(mGoal_1))
           {

            trace("Goal_1 Collision");
            //Remove button for constant movement
            btnShootPlayer = false;
            mGoal_1.destroyGoal_1();
            player.destroyPlayer();
            //Update High Score text
            nScore += 10;
            updateHighScore();

            //Update level
            nLevel++;
            updatePlayerLevel();
            stage.removeEventListener(Event.ENTER_FRAME, gameLoop);
            level_2();

           }else
           {

               checkEndGameCondition();
           }
    }

    public function level_2():void 
    {
       stage.addEventListener(Event.ENTER_FRAME, gameLoop);
        trace("Level_2 Initiated");
        //Keep Text Scores initiated
        updateHighScore();
        updatePlayerLives();

        player = new mPlayer();
        stage.addChild(player);
        player.x = (stage.stageWidth / 2) - 280;
        player.y = (stage.stageHeight / 2);

        mGoal_1 = new goal_1();
        stage.addChild(mGoal_1);

        if (player.hitTestObject(mGoal_1))
        {
            trace("Level 2 Hit test works!");

            nScore += 10;
            updateHighScore();

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:31:04.877

对不起，我花了这么长时间才回复你。

以下是如何设置关卡的示例...

### 游戏循环（）

我只想在其中添加一个 switch 语句，让 gameLoop 知道每一帧更新哪个级别的函数。switch 语句就像一个 if...if else 条件，输入更少。switch 语句的输出取决于`nLevel`与可能情况的比较。因此，当`nLevel`等于 1 时，`level_1()`执行该函数。通过添加到`nLevel`我们可以然后更新`level_2()`等等。

```
 private function gameLoop(e:Event):void
    {
        playerShoot();
        playerControl();
        playerStageBoundaries();

        checkEndGameCondition();
        checkPlayerOffScreen();

        switch(nLevel) {
            case 1:
                level_1();
                break;
            case 2:
                level_2();
                break;
        }
    } 
```

### 开始下一级（）

此函数用于去除关卡函数中的重复代码，只需调用此函数即可重置玩家位置并更新分数和关卡。

```
 private function startNextLevel():void
    {
        nScore += 10;
        updateHighScore();

        nLevel++;
        updatePlayerLevel();

        updatePlayerLives();

        player.x = (stage.stageWidth / 2) - 280;
        player.y = (stage.stageHeight / 2);
    } 
```

### 电平函数

这些是您的关卡功能，而不是将玩家添加到每个关卡的舞台，只需重用玩家并重置其位置。

```
 private function level_1():void
    {

        if (player.hitTestObject(mGoal_1))
        {

            trace("Goal_1 Collision");
            //Remove button for constant movement
            btnShootPlayer = false;
            mGoal_1.destroyGoal_1();
            player.destroyPlayer();

            startNextLevel();
        }
        else
        {
            checkEndGameCondition();
        }
    }

    private function level_2():void
    {
        //Keep Text Scores initiated

        if (player.hitTestObject(mGoal_2))
        {   
            mGoal_2.destroyGoal_2();
            player.destroyPlayer();

            btnShootPlayer = false;
            startNextLevel();
        } else {
            checkEndGameCondition();
        }

    } 
```

# html - Rails：如何在表格数据中定义图像的大小？

> ID：15752039
> 
> 赞同：1
> 
> 时间：2013-04-01T21:16:57.843
> 
> 标签：html, css, ruby-on-rails, image, class

我真的希望你能帮我解决这个问题。我已经设法将图片从我的数据库中提取到产品描述中，但是显示的图片太大了，我想调整它的大小，但无论我尝试什么，它都不会将图片包含在类中。

**那是我的 index.html.rb**

```
<% @homes.each do |home| %>
  <tr>
    <td width="130px"><%= home.name %></td>
    <td class="image"><%= image_tag "/"+home.images[0].image_path %></td>
    <td width="300px"><%= home.details %></td>
  </tr> 
```

**CSS**

```
.image 
    {
    background: yellow;
    width: 200px;
    } 
```

我设置背景颜色以检查图像类是否正确链接并且工作正常。我可以看到黄色背景改变了大小，但图片位于该类上方，并且对我正在尝试的内容完全不感兴趣。

我还尝试了下面的而不是图像类，结果只显示了一个小的“img_not_found”图标，然后是*“height=80px />”*。

```
<td width="200px"><img src="<%= image_tag '/'+home.images[0].image_path %>" height=80px /></td> 
```

有人知道我在哪里犯了错误吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:19:06.260

`:size`- 提供为“{Width}x{Height}”，因此“30x45”变为 width="30" 和 height="45"。`:size`如果值的格式不正确，将被忽略。

例如`<%= image_tag "home.gif", :size => "50x20" %>`

为你：

```
<%= image_tag "/"+home.images[0].image_path, :size => "50x20" %> 
```

# matlab - 默认情况下在后台绘制 Matlab 图形

> ID：15752047
> 
> 赞同：2
> 
> 时间：2013-04-01T21:17:23.710
> 
> 标签：matlab, matlab-figure

默认情况下，如何在后台绘制 Matlab 图形？我知道我可以如下切换单个图形的可见性：

```
set(gcf, 'visible', 'off') 
```

我正在寻找一种方法将其设置为脚本开头的默认行为，就像我设置默认线宽一样：

```
set(0,'defaultlinelinewidth', 1.5); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T21:28:33.233

`set(0,'DefaultFigureVisible','off')`

请参阅[MathWorks 文档](http://www.mathworks.com/help/matlab/creating_plots/setting-default-property-values.html)以对任何参数使用此默认机制。

# excel - Excel 2007 VBA：选择带有变量的工作表

> ID：15752055
> 
> 赞同：0
> 
> 时间：2013-04-01T21:18:00.193
> 
> 标签：excel, vba

我正在尝试基于变量引用工作表。

从顶层看，我有一个由变量 Num = 1 To 18 驱动的 For 循环。变量“CurrentSN”根据工作表上的序列号列表（“SN's”）更改值。

```
Dim Num As Integer 
Dim CurrentSN As String

CurrentSN = Sheets("SN's").Cells(Num, 1).Value 
```

工作簿中有 18 个预先存在的工作表，每个工作表都以这些序列号之一命名（总共 18 个）。我想为每个循环参考相应的工作表，所以我使用了......

```
Sheets(CurrentSN).Range("A1").Select 
```

不幸的是，它在这条线上出错了。我在哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T21:21:37.980

问题是像集合这样的`Sheets`集合接受两种不同类型的输入：

1.  名称/键
2.  索引号

在您的情况下，您需要密钥（序列号），但 VBA 尝试检索索引号，因为提供的是数字而不是字符串。因此，您需要使用`Sheets(CStr(CurrentSN))`!

此外，Ross 指出，您需要先激活该表，然后再选择其中的任何内容。尽管在 99.999% 的情况下，您根本不需要使用`.Select`（因此`.Activate`） - 请参阅[http://www.cpearson.com/excel/optimize.htm](http://www.cpearson.com/excel/optimize.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T21:21:11.170

您必须先激活工作表，然后才能在其上选择某些内容。使用
`Sheets(CurrentSN).Activate`
前
`Sheets(CurrentSN).Range("A1").Select`

# php - php 数组合并

> ID：15752057
> 
> 赞同：1
> 
> 时间：2013-04-01T21:18:12.487
> 
> 标签：php, arrays, merge

我在这一行收到一个错误：

```
$ret=array_merge($ret,preg_ls($path."/".$e,$rec,$pat)); 
```

错误是：array_merge() 参数 #2 不是数组

我不知道如何解决这个问题。

谢谢你。

```
function preg_ls($path=".", $rec=false, $pat="/.*/") {
    // it's going to be used repeatedly, ensure we compile it for speed.
    $pat=preg_replace("|(/.*/[^S]*)|s", "\\1S", $pat);
    //echo($pat);
    //Remove trailing slashes from path
    while (substr($path,-1,1)=="/") $path=substr($path,0,-1);
    //also, make sure that $path is a directory and repair any screwups
    if (!is_dir($path)) $path=dirname($path);
    //assert either truth or falsehoold of $rec, allow no scalars to mean truth
    if ($rec!==true) $rec=false;
    //get a directory handle
    $d=dir($path);
    //initialise the output array
    $ret=Array();
    //loop, reading until there's no more to read
    while (false!==($e=$d->read())) {
        //Ignore parent- and self-links
        if (($e==".")||($e=="..")) continue;
        //If we're working recursively and it's a directory, grab and merge
        if ($rec && is_dir($path."/".$e)) {
            $ret=array_merge($ret,preg_ls($path."/".$e,$rec,$pat));
            continue;
        }
        //If it don't match, exclude it
        if (!preg_match($pat,$e)) continue;
        //In all other cases, add it to the output array
        //echo($path."/".$e."<br/>");
        $ret[]=$path."/".$e;
    }
    //finally, return the array
    echo json_encode($ret);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T21:22:26.753

PHP 中的 an`Array`不是 JSON。这是一个数组。简单地`return $ret;`

如果您期望一个数组，而不是字符串（如`json_encode`给出的那样），则应该返回该数组。

另外，您使用的是`echo`，而不是`return`。`echo`根据 PHP 环境打印到其中一个`stdout`或 HTML 正文（尽管它们是相同的，只是使用重定向和不同的环境来处理它）。

`return`将导致函数按预期将其返回值传递给调用者（通常传递给变量或另一个函数）；没有返回值，函数将始终返回`NULL`。

# assembly - 分析汇编代码 EX "mov %eax,0x8(%ebx)"

> ID：15752058
> 
> 赞同：0
> 
> 时间：2013-04-01T21:18:12.630
> 
> 标签：assembly, puzzle, disassembly, mov

这是一个硬件问题。我不是在要求没有'explode_bomb'曾经运行过的答案。我要求对一小段代码中发生的事情进行澄清/指导。

这就是我想要弄清楚的（下面的 [0x8(%ebx)] 代码发生了什么）？0x8(%register) 不是指访问内存地址%register+0x8处的值吗？它看起来不像内存地址被存储在那里......我知道这是一个模糊的问题。我在伪代码中将我不理解的行标记为 LINEXXX-HexAddress* ***。[LINEXXX - 是来自 ddd 的行号-它不允许我从 ddd 复制，所以我使用了 objdump...]

非常感谢，任何小技巧都值得赞赏。

```
8048efa:    8b 5c 24 10             mov    0x10(%esp),%ebx
8048efe:    8b 44 24 14             mov    0x14(%esp),%eax
8048f02:    89 43 08                mov    %eax,0x8(%ebx)
8048f05:    8b 54 24 18             mov    0x18(%esp),%edx
8048f09:    89 50 08                mov    %edx,0x8(%eax)
8048f0c:    8b 44 24 1c             mov    0x1c(%esp),%eax
8048f10:    89 42 08                mov    %eax,0x8(%edx)
8048f13:    8b 54 24 20             mov    0x20(%esp),%edx
8048f17:    89 50 08                mov    %edx,0x8(%eax)
8048f1a:    8b 44 24 24             mov    0x24(%esp),%eax
8048f1e:    89 42 08                mov    %eax,0x8(%edx)
8048f21:    c7 40 08 00 00 00 00    movl   $0x0,0x8(%eax)
8048f28:    be 05 00 00 00          mov    $0x5,%esi
8048f2d:    8b 43 08                mov    0x8(%ebx),%eax
8048f30:    8b 10                   mov    (%eax),%edx
8048f32:    39 13                   cmp    %edx,(%ebx)
8048f34:    7d 05                   jge    8048f3b <phase_6+0xca>
8048f36:    e8 d3 03 00 00          call   804930e <explode_bomb>
8048f3b:    8b 5b 08                mov    0x8(%ebx),%ebx
8048f3e:    83 ee 01                sub    $0x1,%esi 
```

我编写了一些伪代码来帮助我更好地了解正在发生的事情：

```
example input-> "6 89 79 69 59 49"
eax = "6 89 79 69 59 49"
stuff
after stuff (read_six_numbers)
eax = 6
0x28(esp,edi*4)
edi=0 -> 6
edi=1 -> 89
edi=2 -> 79
edi=3 -> 69
edi=4 -> 59
edi=5 -> 49

naming this as array[]
----------------
edi=0;
esi=0;
Line31:
eax = array[edi];
eax--;
if((unsigned int)eax > 5) explodebomb();
esi=1+edi;
if(esi==6)goto Line109
ebx=esi;
Line58:
eax=array[ebx];
if(eax == array[esi-1]) explodebomb();
ebx++;
edi=esi;
if(5<=ebx)goto Line58;
else goto Line31;
Line85:
edx = *edx + 8;
eax++;
if(ecx != eax)goto Line85;
Line85:
array2[esi]=edx;
ebx++;
if(6 != ebx) goto Line114;
goto Line137
ebx = 0;
esi=ebx;
ecx=array[ebx];
eax = 1;
edx=0x804c154;
if(1>ecx)goto Line85;
goto Line95;
ebx=array2[0];
eax=array2[1];
LINE145-0x08048f02**** 0x8(ebx)=eax;
edx=array2[2];
LINE152-0x08048f09**** 0x8(eax)=edx;
eax=array2[3];
LINE159-0x08048f10**** 0x8(edx)=eax;
edx=array2[4];
LINE166-0x08048f17**** 0x8(eax)=edx;
eax=array2[5];
LINE173-0x08048f1e**** 0x8(edx)=eax;
LINE176-0x08048f21**** 0x8(eax)=eax;
esi=5;
Line188:
LINE188-0x08048f2d**** eax=0x8(ebx);
edx=(eax);
if(!(edx >= (ebx))) explodebomb();
LINE202-0x08048f3b**** ebx=0x8(ebx);
esi--;
if(edx != (ebx)) goto Line188;
esp+=0x40;
return eax; 
```

汇编代码：

```
08048e71 <phase_6>:
8048e71:    57                      push   %edi
8048e72:    56                      push   %esi
8048e73:    53                      push   %ebx
8048e74:    83 ec 40                sub    $0x40,%esp
8048e77:    8d 44 24 28             lea    0x28(%esp),%eax
8048e7b:    89 44 24 04             mov    %eax,0x4(%esp)
8048e7f:    8b 44 24 50             mov    0x50(%esp),%eax
8048e83:    89 04 24                mov    %eax,(%esp)
8048e86:    e8 ce 05 00 00          call   8049459 <read_six_numbers>
8048e8b:    bf 00 00 00 00          mov    $0x0,%edi
8048e90:    8b 44 bc 28             mov    0x28(%esp,%edi,4),%eax
8048e94:    83 e8 01                sub    $0x1,%eax
8048e97:    83 f8 05                cmp    $0x5,%eax
8048e9a:    76 05                   jbe    8048ea1 <phase_6+0x30>
8048e9c:    e8 6d 04 00 00          call   804930e <explode_bomb>
8048ea1:    8d 77 01                lea    0x1(%edi),%esi
8048ea4:    83 fe 06                cmp    $0x6,%esi
8048ea7:    74 35                   je     8048ede <phase_6+0x6d>
8048ea9:    89 f3                   mov    %esi,%ebx
8048eab:    8b 44 9c 28             mov    0x28(%esp,%ebx,4),%eax
8048eaf:    39 44 b4 24             cmp    %eax,0x24(%esp,%esi,4)
8048eb3:    75 05                   jne    8048eba <phase_6+0x49>
8048eb5:    e8 54 04 00 00          call   804930e <explode_bomb>
8048eba:    83 c3 01                add    $0x1,%ebx
8048ebd:    89 f7                   mov    %esi,%edi
8048ebf:    83 fb 05                cmp    $0x5,%ebx
8048ec2:    7e e7                   jle    8048eab <phase_6+0x3a>
8048ec4:    eb ca                   jmp    8048e90 <phase_6+0x1f>
8048ec6:    8b 52 08                mov    0x8(%edx),%edx
8048ec9:    83 c0 01                add    $0x1,%eax
8048ecc:    39 c8                   cmp    %ecx,%eax
8048ece:    75 f6                   jne    8048ec6 <phase_6+0x55>
8048ed0:    89 54 b4 10             mov    %edx,0x10(%esp,%esi,4)
8048ed4:    83 c3 01                add    $0x1,%ebx
8048ed7:    83 fb 06                cmp    $0x6,%ebx
8048eda:    75 07                   jne    8048ee3 <phase_6+0x72>
8048edc:    eb 1c                   jmp    8048efa <phase_6+0x89>
8048ede:    bb 00 00 00 00          mov    $0x0,%ebx
8048ee3:    89 de                   mov    %ebx,%esi
8048ee5:    8b 4c 9c 28             mov    0x28(%esp,%ebx,4),%ecx
8048ee9:    b8 01 00 00 00          mov    $0x1,%eax
8048eee:    ba 54 c1 04 08          mov    $0x804c154,%edx
8048ef3:    83 f9 01                cmp    $0x1,%ecx
8048ef6:    7f ce                   jg     8048ec6 <phase_6+0x55>
8048ef8:    eb d6                   jmp    8048ed0 <phase_6+0x5f>
8048efa:    8b 5c 24 10             mov    0x10(%esp),%ebx
8048efe:    8b 44 24 14             mov    0x14(%esp),%eax
8048f02:    89 43 08                mov    %eax,0x8(%ebx)
8048f05:    8b 54 24 18             mov    0x18(%esp),%edx
8048f09:    89 50 08                mov    %edx,0x8(%eax)
8048f0c:    8b 44 24 1c             mov    0x1c(%esp),%eax
8048f10:    89 42 08                mov    %eax,0x8(%edx)
8048f13:    8b 54 24 20             mov    0x20(%esp),%edx
8048f17:    89 50 08                mov    %edx,0x8(%eax)
8048f1a:    8b 44 24 24             mov    0x24(%esp),%eax
8048f1e:    89 42 08                mov    %eax,0x8(%edx)
8048f21:    c7 40 08 00 00 00 00    movl   $0x0,0x8(%eax)
8048f28:    be 05 00 00 00          mov    $0x5,%esi
8048f2d:    8b 43 08                mov    0x8(%ebx),%eax
8048f30:    8b 10                   mov    (%eax),%edx
8048f32:    39 13                   cmp    %edx,(%ebx)
8048f34:    7d 05                   jge    8048f3b <phase_6+0xca>
8048f36:    e8 d3 03 00 00          call   804930e <explode_bomb>
8048f3b:    8b 5b 08                mov    0x8(%ebx),%ebx
8048f3e:    83 ee 01                sub    $0x1,%esi
8048f41:    75 ea                   jne    8048f2d <phase_6+0xbc>
8048f43:    83 c4 40                add    $0x40,%esp
8048f46:    5b                      pop    %ebx
8048f47:    5e                      pop    %esi
8048f48:    5f                      pop    %edi
8048f49:    c3                      ret 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:38:37.720

我不想透露太多，但这里有一些提示：

1.  在地址 0x8048ec6 到 0x8048ef8 的代码中，一个由六个指针 ( `esp+0x10`- `esp+0x28`) 组成的数组填充了从一些全局数据中获取的指针。此数据似乎从偏移量**0x804c154**开始（请参阅列表中的偏移量 0x8048eee）
2.  稍后，从您的清单中的偏移量**0x8048efa**开始，引用#1 中提到的数组，这就是我的理解（这是伪代码......）：

    ```
    struct s { 
        int value; 
        int ??;
        struct s * next;
    };
    // in esp+0x10
    struct s *point_arr[6];
    point_arr[0]->next = &point_arr[1];
    point_arr[1]->next = &point_arr[2];
    point_arr[2]->next = &point_arr[3];
    point_arr[3]->next = &point_arr[4];
    point_arr[4]->next = &point_arr[5];
    point_arr[5]->next = NULL; 
    ```

3.  在此之后，有一个检查（在循环中） ( `point_arr[i]->value > point_arr[i-1]->value`)

因此，当您说没有内存地址存储在 %ebx 中时，它是不准确的。内存地址存储在`%esp+0x10`并`%esp+0x10`存储在`%ebx`.

# ruby-on-rails - 处理 rvm、bundle、git 和分支的正确方法

> ID：15752059
> 
> 赞同：0
> 
> 时间：2013-04-01T21:18:13.253
> 
> 标签：ruby-on-rails, git, rvm, bundle

所以我正在做一个 RoR 项目。我需要对 repo 进行分叉，并正在努力解决我自己的分叉上的问题，为非平凡的更改发出拉取请求。主要 repo 所有者请求为问题修复创建分支。

使用 rvm、bundle 和 git 分支处理此问题的正确方法是什么？

我的问题可能与没有完全理解 RoR/rvm、gems 和 bundle 有关。我需要为`bundle install`我创建的每个新分支运行吗？`bundle install`在对主分支中的 Gemfile 进行了一些摆弄之后，我遇到了一些问题（在所有者的主存储库中存在错误），但随后在新分支中再次失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:24:51.077

理论上，您应该只需要在`bundle install`向 Gemfile 添加新 gem 时运行。

RVM 根本不应该涉及到这一点，除非您同时在多个版本的 Ruby 上进行测试。

关于分支，我通常做的是对存储库进行分叉，为大型功能创建分支。完成后，我对该分支发出拉取请求，一旦接受，我将其合并到我的本地分叉中，冲洗并重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T22:04:19.727

RVM - Ruby 版本管理器。这不应该真正发挥作用，您可能需要更改版本一次或两次来解决问题，但您几乎总是使用最新的 ruby​​ 版本。

bundle - 使用 bundle 作为更新 gems + 依赖项的工具。专业提示 - 您可以只运行`bundle`而不是`bundle install`. 您还应该阅读不同的分组，例如

```
group :assets do
 gem 'sass' # or whatever
end 
```

然后你有你的`:development`组（你只在开发中使用的宝石）。和`:production`（与发展相反）。

GIT - 这是您项目的核心和灵魂。流行的工作流程是分支

`git checkout -b mybranch`

然后你就处于一个可以自由玩耍的“安全区”。您进行了一些重要的更改，提交并在必要时添加您添加的文件。

`git add -A`

`git commit -am "commit message"`

然后当你完成后，你可以将新分支合并回你的主分支

`git checkout master` `git merge mybranch`

专业提示：在您周五下班之前，请在外出前提交您的更改。如果您尝试宿醉工作，很有可能造成的伤害大于好处，并且您会想要重置。

`git reset --hard`

祝你好运！

快乐编码！

-布赖恩

# jsp - 处理由 servlet 生成并在重定向后由 .jsp 显示的信息/错误消息

> ID：15752061
> 
> 赞同：1
> 
> 时间：2013-04-01T21:18:17.130
> 
> 标签：jsp, servlets

在我的 Web 应用程序中，我想实现一个在需要时显示信息/错误消息的系统。例如，servlet 检测到一些错误（例如用户未登录），将自定义错误消息添加到会话并将用户重定向到登录页面，负责显示登录页面的 JSP 也会显示该消息。另一个例子，用户成功提交了一些表单，servlet 添加自定义成功消息并重定向到显示成功消息的某个页面。

我的实现建议：servlet 在会话中写入消息，并且任何页面上的一个特殊包含的 JSP 都会读取它、显示它并从会话中删除它（因此它只显示一次）。我需要在会话中使用它，因为否则该消息将不会通过重定向保留。

从逻辑和MVC的角度来看，JSP中用message去掉变量可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:21:20.840

如果[JSTL](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/)可以，那应该没什么大不了的。

[它](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/remove.html)是：

```
<c:remove var="message" scope="session" /> 
```

请注意，一些 MVC 框架借助也称为“ [flash 范围](https://stackoverflow.com/tags/flash-scope/info)”的 cookie 解决了这个问题。另请参阅例如在 Java EE 自己的 MVC 框架 JSF 的上下文中的[这个答案](https://stackoverflow.com/questions/13139139/how-can-flash-scope-help-in-implementing-the-postredirectget-prg-pattern-in-js/13140901#13140901)。

# mysql - Concat and to column

> ID：15752062
> 
> 赞同：0
> 
> 时间：2013-04-01T21:18:19.380
> 
> 标签：mysql, sql

How do add the concatenated firstname column and lastname column from a table with 100 rows and then add it fullname column each of the concatenated first name and last name

I tried:

```
INSERT INTO `table1` (`fullname`) VALUES (CONCAT(first_name,last_name)) 
```

What it did is that it added a new row with nothing in it it didn't add each row of 100. What I want is that for each of the rows of first and last name there is a fullname that is concatenated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:19:22.947

You're looking to do an `UPDATE`:

```
UPDATE `table1` SET `fullname` = CONCAT(first_name,last_name) 
```

Assuming that you've already added the column:

```
ALTER TABLE `table1` ADD `fullname` VARCHAR(60) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T22:59:36.540

我猜你想让它可读，所以你的查询应该是这样的：

```
UPDATE `table1` SET `fullname` = CONCAT(first_name, ' ', last_name) 
```

如果没有带有空格的中心引号，它将是“first_namelast_name”而不是“first_name last_name”

# javascript - 弹性滑块 高度等于最高的 在移动浏览器上

> ID：15752070
> 
> 赞同：3
> 
> 时间：2013-04-01T21:18:32.160
> 
> 标签：javascript, jquery, html, css, flexslider

我试图找出 Flexslider 的一个问题，该问题仅在我在 Safari Mobile 等移动浏览器上测试时出现。

所有 <li> 容器的高度都与最高的 <li> 相同，即使没有足够的内容证明使它们具有相同的高度也是如此。

我不确定如何截取它的屏幕截图，因为它在桌面浏览器上运行良好，但在移动浏览器上却不行。这是一个小提琴，当我在桌面浏览器上查看它时，它显示了它的工作方式，容器的高度根据内容的数量调整大小。

[http://jsfiddle.net/CsCyh/](http://jsfiddle.net/CsCyh/)

这是hml：

```
<div class="flexslider">
  <ul class="slides">
    <li>
      <img src="http://i.imgur.com/YSVlz2Z.jpg" />
      <h2><a href"#">First Link Here</a></h2>
      <p>Some text here that could be a message</p>
      <a href="#" data-role="button" data-icon="arrow-r" data-iconpos="right">Another Link Here</a>
    </li>
    <li>
      <img src="http://i.imgur.com/YSVlz2Z.jpg" />
      <h2><a href"#">Second Link Here</a></h2>
      <p>Some text here that could be a message</p>      
    </li>
    <li>
     <img src="http://i.imgur.com/YSVlz2Z.jpg" />
     <h2><a href"#">Third Link Here</a></h2>
     <p>Some text here that could be a message</p>     
    </li>
  </ul>
</div> 
```

这是 flexslider 的 JS：

```
$('.flexslider').flexslider(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-17T20:52:22.987

嗯，我前段时间遇到过这个问题。我希望这有帮助！

```
var evenSliderHeight = function(slideContainer, slideItem) {
  var slider_height = 0;
  var $slider_slide = $(slideContainer).find(slideItem);
  $slider_slide.each(function() {
    var __height = $(this).outerHeight(true);
    if ( slider_height < __height ) {
       slider_height = __height;
    }
  });
  $slider_slide.css('min-height', slider_height);
};
evenSliderHeight('.flexslider-container', '.slide'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-31T23:12:40.213

```
$('.flexslider').flexslider({
  after: function(slider){
    currHeight = $('.flexslider').find('.slides > li').eq(slider.currentSlide).outerHeight(true);
    $('.flexslider').height(currHeight);
  }
}); 
```

**JSFiddle Update**: [http://jsfiddle.net/CsCyh/14/](http://jsfiddle.net/CsCyh/14/)

* * *

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-01-21T21:27:28.650

For anyone still has this issue in 2019/2020, please have a look at the new property called "smoothHeight" at the [Flexslider docs](https://github.com/woocommerce/FlexSlider#readme)

I fixed my issue by setting "smoothHeight" to true.

```
$('.sliders').flexslider({
    animation: 'slide',
    smoothHeight: true,
    controlNav: false,
    customDirectionNav: $('.js-slider-control button'),
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-14T06:55:57.120

Here is a CSS only solution. This is tested for the `animation: "slide"` property:

```
.flexslider .flex-viewport { display: flex; flex-direction: column; }
.flexslider .flex-viewport > ul { display: flex; }
.flexslider .flex-viewport > ul > li { display: flex !important; } 
```

The `!important` overrides the `display:block;` property that flexslider generates as inline style. Now all panels share an equal height, based on the highest slide.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-05T11:45:13.853

Add this to the script that calls the slider.

```
animateHeight: false, 
```

eg.:

```
$(window).load(function(){ if ( $('#content-slider-wrap').length == 0 ) return false
    $('#content-slider-wrap').flexslider({
        animation:"fade",
        slideshow: true,
        directionNav: true,
        animateHeight: false,
        controlNav:false ,
........... etc etc 
```

# java - 为什么 Java 垃圾收集器在执行了一次不那么激进的运行后不久似乎又执行了一次激进的运行？

> ID：15752076
> 
> 赞同：8
> 
> 时间：2013-04-01T21:19:00.530
> 
> 标签：java, garbage-collection, visualvm

在使用 VisualVM 监视 java 程序时，我注意到垃圾收集器的行为中有一个有趣的模式。似乎很多时候，在执行“正常”垃圾收集运行之后，GC 会执行第二次、更密集的 CPU 运行，这似乎没有额外的影响（在更激进的运行之后使用的堆与这是在较轻的运行之后）。

我已经在 VisualVM 的输出中指出你可以看到垃圾收集器运行和相应的堆使用变化。

[![有趣的垃圾收集器行为](https://i.stack.imgur.com/TfB0Q.png)](https://i.stack.imgur.com/TfB0Q.png)

我的问题基本上是垃圾收集器在这里做什么，为什么？当有大量可用内存时，是什么导致它尝试这些真正的 CPU 密集型运行，并且与较轻的运行相比没有明显的好处？还是我误解了图表？

程序的性能并没有真正受到影响，我只是好奇。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T22:21:41.093

查看图表是了解 GC 运行概览的好方法，但如果您想研究 GC 在特定时刻运行的原因，则**需要深入挖掘 GC 日志**。

启用完整的 GC 日志记录，同时开始收集 jstat。关注那些您看到意外 GC 周期的时间，并在日志中追溯它们。你在那里看到什么？试试看：

*   是 Full GC 还是 Minor GC？
*   eden、perm、oldGen、幸存者空间等的职业是什么？
*   这些间隔内的分配率、实时数据集大小、提升率是多少？
*   等等

回答这些问题可能会导致您遇到 GC 为何运行的问题。

**更新**：您可以找到有关如何调整 GC 的技术细节，例如：[是否有针对 GC 问题的食谱指南？](https://stackoverflow.com/q/6871213/772000)

# python - How to properly terminate child processes with multiprocessing in python

> ID：15752078
> 
> 赞同：11
> 
> 时间：2013-04-01T21:19:04.647
> 
> 标签：python, multiprocessing

I have a few callback functions and I'd like to launch as multiple processes and have them all terminate via signal from the parent process.

My current way of doing this is creating a shared c_bool with `multiprocessing.Value` and setting it to `True`, then distributing it to all of my processes when they are created. My processes all run a while loop using the shared bool like so:

```
while myC_bool: ...keep running... 
```

I can then just switch the bool to `False` from my parent process and all child processes will complete their final loop and exit.

很多人都告诉过我，并且在文档中阅读过在使用多处理时应该尽量避免使用共享内存。有人告诉我避免这种情况的最佳方法是守护进程，给它一个自定义信号处理程序并向它发送一个 sigint/sigterm/etc...

我的问题是，是否专门使用 bool 来保持循环处于活动状态，并且只能从我的父进程中更改它的值，并从多个子进程中读取它是一个合适的解决方案，以使我的所有子进程快速安全地终止？我觉得所有孩子只看一个共享布尔值的开销比向他们发送 x 个信号要少。

守护进程会是更好的解决方案吗？如果是这样，我需要一些帮助来理解为什么。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-02T00:13:25.320

使用您的解决方案有很多充分的理由：

*   它比信号更容易思考。
*   它需要处理的跨平台问题更少。
*   您已经获得了以这种方式工作的代码。
*   如果您将来想要添加“优雅关闭”机制，它可以很容易地添加。

… 等等。

请记住，除非您可以向自己证明，`multiprocessing`并且底层操作系统原语，在您关心的每个平台上，都可以保证在没有同步的情况下工作，`Lock`否则您需要在每次访问共享布尔时放置一个或其他内容。这并不复杂，但是……一旦你这样做了，使用例如`Event`没有共享布尔值的 an 可能会更简单。

无论如何，如果其中任何一个是你的理由，我会说很好，那样做。但是根据您的问题，您实际上是因为性能而选择了这个：

> 我觉得所有孩子只看一个共享布尔值的开销比向他们发送 x 个信号要少

如果这是你的理由，那你几乎肯定是错的。孩子们每次都必须通过某个循环查看共享布尔值（并获取共享锁！），而信号只需要发送给每个孩子一次。因此，您的开销几乎肯定会以这种方式高得多。

但实际上，我无法想象每个子进程发送一个信号，甚至每个进程每个循环捕获一次进程间锁的开销，在任何有用的程序中都接近瓶颈，所以......为什么开销在这里甚至很重要首先？用最简单的方式做最有意义的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T22:10:33.847

由于您很小心谁修改了共享变量，所以应该没问题。

有许多不同的解决方案可能。例如，使用 a [`multiprocessing.Event`](http://docs.python.org/2/library/multiprocessing.html#multiprocessing.Event)，并在设置时终止进程。或使用`multiprocessing.Connection`对象（来自管道）。后者可用于父母和孩子之间的双向通信。就像给孩子一个停止的信号，然后给父母一个确认。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T22:16:19.770

告诉你“不要这样做”的人是错误的。共享内存的重点是在多处理器之间共享内存，而这正是您正在做的事情。

您有一个 1) 简单且 2) 有效的解决方案。信号/守护程序方法是 1) 非常酷 2) 更难正确编码和 3) 更难理解。

我在您的方法中看到的唯一缺陷是进程可能会从 CPU 的缓存中看到 bool 的陈旧副本，并在关闭时稍微延迟。有一些方法可以刷新缓存以确保不会发生这种情况，但您可能不需要它们，因为对于大多数应用程序来说，缓存刷新经常自动发生。

坚守阵地。

# ruby-on-rails - Ruby - 将 CSV 中的条目插入数据库

> ID：15752079
> 
> 赞同：4
> 
> 时间：2013-04-01T21:19:05.620
> 
> 标签：ruby-on-rails, ruby, csv

我有一个上传的 CSV 文件，解析如下：

```
CSV.foreach(@my_file.file.path) do |row|
    puts row[1]
end 
```

传入的 CSV 文件至少具有以下列：“id”、“name”、“number”、“phone”和“food”。

我想做类似的事情：

```
CSV.foreach(@my_file.file.path) do |row|
     //find the columns in "row" associated with "id", "name", "number"
     //even though I don't know definitively which column they will be in
     //for example, "name" may be the 2nd or 3rd or 4th column (etc)

     //insert into my_table values(id, name, number)

end 
```

请注意，CSV 文件将始终将列名作为第一行，但是从文件到文件，这些列的顺序可能会有所不同。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T21:45:50.800

这是一段代码，它将仅将您关心的字段收集到哈希数组中：

```
require 'csv'

fields_to_insert = %w{ id name food number phone }
rows_to_insert = []

CSV.foreach("stuff.csv", headers: true) do |row|
  row_to_insert = row.to_hash.select { |k, v| fields_to_insert.include?(k) }
  rows_to_insert << row_to_insert
end 
```

鉴于以下内容`stuff.csv`：

```
junk1,name,junk2,food,id,junk4,number,phone
foo,Jim,bar,pizza,123,baz,9,555-1212
baz,Fred,bar,sushi,55,foo,44,555-1213 
```

`rows_to_insert`将包含：

```
[{"name"=>"Jim",
  "food"=>"pizza",
  "id"=>"123",
  "number"=>"9",
  "phone"=>"555-1212"},
 {"name"=>"Fred",
  "food"=>"sushi",
  "id"=>"55",
  "number"=>"44",
  "phone"=>"555-1213"}] 
```

我会接受它并使用[activerecord-import](https://github.com/zdennis/activerecord-import)一次将它们全部插入：

```
SomeModel.import(rows_to_insert) 
```

您可以在 CSV 循环中一次插入一条记录，但这效率低下，并且由于`id`通常是受保护的属性，因此您不能批量分配它，因此您必须这样做才能插入一条记录：

```
some_model = SomeModel.new(row_to_insert.select { |k, v| k != "id" }
some_model.id = row_to_insert["id"]
some_model.save! 
```

...或类似的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T21:43:53.697

如果第一行是标题名称，您可以使用`:headers => true`选项来`parse`将第一行用作数据的键。

```
text = File.read(@my_file.file.path)
csv = CSV.parse(text, :headers => true)
csv.each do |row|
  row = row.to_hash.with_indifferent_access
  YourModel.create!(row.to_hash.symbolize_keys)
end 
```

# javascript - 是否可以在不使用 DOM API 的情况下管理 HTML 元素？

> ID：15752082
> 
> 赞同：1
> 
> 时间：2013-04-01T21:19:14.810
> 
> 标签：javascript, dom

我只学习了几个月的编程，我想知道，是否可以通过 javascript 访问和操作 HTML/XML 元素，但没有 DOM API ？例如创建自己的 API 或其他东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T21:20:39.507

不。必须使用浏览器 API 来通过 javascript 访问 DOM，所以很难想象如何使用该 API 通过 javascript 访问 DOM。如果不获取 DOM 元素并使用该属性，您甚至无法获取原始 HTML，`.innerHTML`因此不使用 API 就无法真正进行操作。

您可以在现有 API 之上构建您自己的 API（这有点像 jQuery 和 YUI 之类的框架），但在内部，它们仍将使用现有的 DOM API 来访问 DOM 元素。

您的问题似乎有点奇怪（如何在不使用 API 访问 DOM 的情况下访问 DOM）所以我想知道您是否可以解释您真正想要解决的问题？

有一些操作可以完全通过 CSS 使用`:hover`state 进行配置，您甚至可以使用纯 CSS 在现代浏览器中设置 CSS3 动画，但这只是在没有 javascript DOM API 的情况下可以操作的程度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T21:21:16.717

可以使用字符串，但这是不可取的。主要有几个原因。处理大量 DOM 的字符串可能很麻烦。与使用`innerHTML`.

您可以覆盖或扩展原型`HtmlElement`，然后添加您自己的功能，但这类似于重新发明轮子。基本上使用相同的可用功能将投入大量工作。

# java - Prevent java app name from appearing in menu bar and process dock on Mac

> ID：15752083
> 
> 赞同：16
> 
> 时间：2013-04-01T21:19:16.233
> 
> 标签：java, macos

I'm starting a runnable jar from a java app ( also headless runnable jar). Tried both `Runtime.getRuntime().exec()` and `ProcesBuilder` method. The process gets launched just fine, but on the Mac ( 10.6 ) it shows the name of the jar I'm starting in the main menu bar and also puts in the dock Is there a way to prevent that ? Interestingly, if you start a jar with java -jar from the command line the jar name does not appear in the menu bar or process dock. Any ideas? Thanks Andy

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-07-30T15:52:56.843

要全局启用它而不是向每个进程添加选项，请在 .bashrc/.zshrc 启动脚本中像这样设置 JAVA_TOOL_OPTIONS 变量。

```
export JAVA_TOOL_OPTIONS='-Djava.awt.headless=true' 
```

参考这里：

[http://docs.oracle.com/javase/7/docs/webnotes/tsg/TSG-VM/html/envvars.html](http://docs.oracle.com/javase/7/docs/webnotes/tsg/TSG-VM/html/envvars.html)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-01T21:23:56.417

你路过`java.awt.headless=true`吗？尝试将此添加到您的流程中：

`java -Djava.awt.headless=true`

# c# - MySql 每天运行sql方法

> ID：15752088
> 
> 赞同：0
> 
> 时间：2013-04-01T21:19:31.170
> 
> 标签：c#, mysql, .net

在我的 sql 我有两个表：事件历史

具有完全相同的列，并且有一个称为`date`具有`DateTime`价值的列。

而且我希望每天晚上像 03:00 这样运行一个方法，将所有过期的过期行从事件移动到历史记录。

我知道有两种方法可以做到：

1) 构建每天运行的 c# 服务。

2）将事件添加到每天运行的MySql。

更好的方法是什么？有什么好的教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:24:02.447

既然你提到了.net，我假设你在 Windows 下运行。

*   您还可以考虑使用 Windows 任务调度程序来调度任务。它在所有版本的Windows中。如果您使用的是 v7，只需通过开始按钮在搜索区域中输入“计划”。
*   您可以轻松编写 powershell 脚本，或使用 mysql 命令行工具来执行您选择的 sql 语句。需要时使用调度程序启动它。

# scheme - 如何修复我的快速排序实现？

> ID：15752091
> 
> 赞同：0
> 
> 时间：2013-04-01T21:19:50.623
> 
> 标签：scheme, quicksort

这是我实现快速排序的尝试：

```
(define (sublist ls start stop middle)
 (cond ( (null? ls) ls)
     ( (< middle start) (sublist (cdr ls) start stop (+ middle 1)))
     ( (> middle stop) '() )
     (else
        (cons (car ls) (sublist (cdr ls) start stop (+ middle 1))))))

(define (split5 ls)                                      
  (let ((len (length ls)))
   (cond ((= len 0) (list ls ls) )
         ((= len 1) (list ls '() ))
         (else 
          (list (sublist ls 1 (/ len 2) 1)
                (sublist ls (+(/ len 2)1) len 1))))))

;this divides the sorted list into two sublists 
(define (dividelist rel? ls)
 (split5 (order rel? ls)))

(define (quicksort rel? ls)
 (if (null? (cdr ls)) ls
  (let ((pivot (list-ref (sort rel? ls) (round (/ (length (sort rel? ls)) 2))))
        (left (car (dividelist rel? ls)))
        (right (cdr (dividelist rel? ls))))
        (join left pivot right)))) 
```

我知道这种实现效率很低，但我想不出办法。无论如何，它真的不起作用。

```
When I input this:
(quicksort < '(9 3 -5 8 -7 2 9))
It gives me this:
(-7 -5 2 8 (8 9 9))
It should give me this:
(-7 -5 2 3 8 9 9) 
```

我怎样才能解决这个问题？

编辑

```
(define (join ls1 goo ls2)
  (if (null? ls1) (cons goo ls2)
      (if (null? ls2) (cons goo ls1)
          (cons (car ls1) (join (cdr ls1) goo ls2))))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:03:51.140

假设该过程与代码中下面几行使用`order`的过程相同（等等，您正在使用排序过程来实现排序过程？！）并且这是某种，我可以得出结论，列表创建问题在于您的. 将其更改为此以修复它：`sort``join``append``join`

```
(define (join left pivot right)
  (append* left (list pivot) right)) 
```

现在该过程将返回一个*list*，因为它应该：

```
(quicksort < '(9 3 -5 8 -7 2 9))
=> '(-7 -5 2 8 8 9 9) 
```

哎呀，号码`3`去哪儿了？您的代码中有一个错误，您必须找到它！提示：计算枢轴的代码非常错误。

**编辑**

这是快速排序的正确、无忧实施。请注意，在像这样的简单实现中，选择第一个元素作为枢轴就足够了：

```
(define (quicksort cmp lst)
  (if (null? lst)
      '()
      (let ((x  (car lst))
            (xs (cdr lst)))
        (append (quicksort cmp (filter (lambda (e) (cmp e x)) xs))
                (list x)
                (quicksort cmp (filter (lambda (e) (not (cmp e x))) xs)))))) 
```

或者稍微花哨和更短，使用 Racket 的高阶程序：

```
(define (quicksort cmp lst)
  (if (empty? lst)
      empty
      (let ((x  (first lst))
            (xs (rest  lst)))
        (append (quicksort cmp (filter-not (curry cmp x) xs))
                (cons x (quicksort cmp (filter (curry cmp x) xs))))))) 
```

还有另一种可能性，`partition`用于在一个步骤中获取两个分区（枢轴之前的元素和枢轴之后的元素） - 它更有效：

```
(define (quicksort cmp lst)
  (if (empty? lst)
      empty
      (let-values (((greater-than less-equal)
                    (partition (curry cmp (first lst)) (rest lst))))
        (append (quicksort cmp less-equal)
                (cons (first lst) (quicksort cmp greater-than)))))) 
```

无论如何，它按预期工作：

```
(quicksort < '(9 3 -5 8 -7 2 9))
=> '(-7 -5 2 3 8 9 9) 
```

# javascript - how to access an object in an object by offset?

> ID：15752095
> 
> 赞同：-1
> 
> 时间：2013-04-01T21:20:12.897
> 
> 标签：javascript, object

OK, I am trying to access an object in a loop for my code to work in every object, unfortunately, my object is located in another object. example:

```
var object = new Object();
object.insider1 = new Object();

object.insider1.name = "ex";
object.insider1.type = "blah";

object.insider2 = new Object();

object.insider2.name = "Ex2";
object.insider2.type = "blah2"; 
```

Now to access it with the loop:

```
for(var g=0; g<object[object.length]; g++){
//do stuff
} 
```

object[object.length] is being noted as 'undefined' and therefore I can't use it... Is there any way to fix this? Thank you!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:22:34.190

Looks to me that what you really want is an array property to hold your "insiders". I would do:

```
var object = new Object(); // or simply {}
object.insiders = [];
object.insiders.push({name: "ex", type: "blah"}); 
object.insiders.push({name: "Ex2", type: "Blah2"});
// Or object.insiders.push(insider1) if you have created them already

for(var i = 0; i < object.insiders.length; i++) {
    // Do stuff
} 
```

# visual-studio-2012 - 在 Visual Studio 2012 中通过 F# Interactive 访问数据文件

> ID：15752096
> 
> 赞同：3
> 
> 时间：2013-04-01T21:20:17.120
> 
> 标签：visual-studio-2012, f#, f#-interactive

我正在用 F# 开发一些脚本。我正在通过 F# Interactive 运行它们。我还在我的 F# 脚本旁边放置了一些数据文件。我想知道如何通过代码访问它们，因为我的 F# 脚本似乎没有以可访问的方式放置它们。有没有办法在不硬编码完整数据文件路径的情况下实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T21:32:45.197

```
let getDataFile name = Path.Combine(__SOURCE_DIRECTORY__, name) 
```

请参阅MSDN 上的[源代码行、文件和路径标识符](http://msdn.microsoft.com/en-us/library/dd233234.aspx)。

# mongodb-java - How to know the status of mongodb functions in Java

> ID：15752098
> 
> 赞同：0
> 
> 时间：2013-04-01T21:20:17.763
> 
> 标签：mongodb-java

If a function call is done in java like:

```
collection.update(match, new BasicDBObject("$pull", update)); 
```

How can I know the number of documents updated in database after this statement execution?

And my other problem is, that I want to remove an element from an array in a document, if that element exists the collection. How can I do that easily? Should I query to find whether it is present in collection and then delete it or is there any other easier way?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:41:47.533

1) [DBCollection.html#update](http://api.mongodb.org/java/current/com/mongodb/DBCollection.html#update%28com.mongodb.DBObject,%20com.mongodb.DBObject%29)方法返回一个WriteResult 对象，该对象包含一个*n*属性，[该属性包含写入操作中受影响的文档数。](http://api.mongodb.org/java/current/com/mongodb/WriteResult.html#getN%28%29)

2）我认为没有办法在一次操作中做到这一点。如果在插入时刻该元素已经在其他文档的数组中，则可以进行更新以从数组中删除该元素。像这样的东西：

```
DBObject newElement = ...

DBObject query = BasicDBObjectBuilder.start()
    .add("array", newElement)
    .get();

DBObject update = BasicDBObjectBuilder.start()
    .push("$pull")
        .add("array", newElement)
    .pop()
    .get(); 

collection.update(query, update);
collection.insert(newElement); 
```

# html - 将十六进制 HTML 颜色转换为 Amiga colorregister hex（和返回）

> ID：15752101
> 
> 赞同：4
> 
> 时间：2013-04-01T21:20:32.547
> 
> 标签：html, assembly, hex, 68000, amiga

HTML 十六进制颜色用 6 位数字（3 个字节，一个所谓的十六进制三元组）编写。Amiga 的颜色寄存器采用定义颜色的字（2 个字节，16 位）。

**例子：**

*   黄色 - HTML 十六进制 #FFFF00
*   黄色 - Amiga 颜色寄存器 $0FF0

必须有某种算法（或/和）一些工具来以简单的方式在 HTML 颜色和 Amiga 颜色寄存器之间进行转换？或者？...请帮助:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T21:31:43.933

[http://en.wikipedia.org/wiki/List_of_monochrome_and_RGB_palettes#12-bit_RGB](http://en.wikipedia.org/wiki/List_of_monochrome_and_RGB_palettes#12-bit_RGB)说 R、G 和 B 中的每一个只有 4 位。

换句话说 - 我怀疑如果你把每个 16 位十六进制对的上半部分串在一起，你就会得到 Amiga 颜色。

在您的示例中：

```
R = 0xFF
G = 0xFF
B = 0xF0 
```

取上半部分（上面的粗体）：

```
AmigaRGB = ((R & 0xF0) << 4) + (G & 0xF0) + ( B >> 4 ) 
```

这确实导致`0x0FF0`

往另一个方向发展：

```
R = AmigaRGB & (0x0F00) >> 4
G = AmigaRGB & (0x00F0)
B = AmigaRGB & (0x000F) << 4 
```

如果你想变得花哨，你可以添加一些舍入、抖动等。

当然在 HTML 中使用的最终值是

```
HTML_RGB = R<<16 + G<<8 + B 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T11:22:49.313

这取决于你想在哪里使用该值，直接硬件访问或 graphics.library。

对于直接硬件访问或 graphics.library -> setRGB4/loadRGB4，您需要转换为 16 位字，其中不关心 15-12 位：xRGB（每个半字节 4 位）。只需丢弃 HTML 十六进制值的第二个数字。

对于 graphics.library (version >=39) -> setRGB32/loadRGB32 您需要 3x32 位，MSB 向左调整（位 31）。*这意味着您获取 HTML 值并将其拆分为 R、G 和 B（每个 2 位）并在右侧*填充六个零。

HTML: #123456 setRGB32: #$12000000, #$34000000, #$56000000

对于 AA 颜色寄存器的直接硬件访问，只需 google 即可。它该死的复杂，因为只有 32 个 12 位颜色寄存器和通过控制寄存器进行组切换来选择组和下/上半部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T20:24:49.057

主要是关于 Floris 的回答，我被引导在 stackoverflow 之外的正确轨道上。总结和转换：

Amiga 有一些不同的图形模式，尤其是 12 位（称为 OCS）和 24 位（称为 AGA）等。要转换为 AGA/24 位，无需进行任何操作。为了转换为 OCS/12 位，我们需要减少值。

一种快速的方法是减少每个 RGB 分量的 4 LSB，就像 Floris 建议的那样，**0RGB = #RRGGBB。**

或另一种方式，更精确一点：

24 位 RGB 颜色分量值范围为 0-255（即 RGB(255,255,0)）等。HTML-hex 也是 24 位的。12 位 RGB 颜色分量的值在 0-15 范围内。

**要将 24 位 RGB 颜色转换为 12 位并只保留整数部分，请对每个 24 位 R、G 和 B 分量执行此操作：**

**downSizedColor = colToDownSize * maxOfRangeToDownConvertTo / maxOfRangeToDownConvertFrom**

maxOfRangeToDownConvertTo = 15（12 位最大范围）

maxOfRangeToDownConvertFrom = 255（24 位最大范围）

RGB(200, 143, 96) 的示例，第一个 RGB 分量 (200) 将缩小 RGB-color 11 *11=200*15 / 255*

**从 12 位恢复到 24 位**

**upSizedColor = maxOfRangeToDownConvertFrom / maxOfRangeToDownConvertTo * colToUpSize**

示例 187=255/15*11

[这里](http://computingvoyage.com/1132/understanding-color-on-the-internet/)和 [这里](http://computingvoyage.com/982/color-bit-depth-reducer/)有一些非常好的面向复古的解释来做这些事情，而且他们有一个在线颜色位深度减少器。强烈推荐！

注意：[EAB](http://eab.abime.net/showthread.php?t=55694)也有一些信息。感谢大家的帮助！管理员，即使我将其设置为正确答案，请随时给 Floris 积分，因为它引导我走上了正确的道路，谢谢。

# python - Image Denoising using Kernel - Python

> ID：15752107
> 
> 赞同：1
> 
> 时间：2013-04-01T21:21:16.470
> 
> 标签：python, image

So I'm trying to create a function that will apply a 5-by-5 smoothing kernel to a 2D image data that will return a 2D Numpy array with the same shape as data. Here's what I have so far.

```
def applyFilter( data, kernel ):
    ret = np.zeros_like(data)
    KI = kernel.shape[0]//2
    KJ = kernel.shape[1]//2
    d=np.zeros_like(kernel)
    for i in range(KI, data.shape[0]-KI):
        for j in range(KJ, data.shape[1]-KJ):
            d=np.array(data[i-KI:i+KI+1,j-KJ:j+KJ+1])
            d.shape=(1,25)
            k=np.array(kernel)  
            k.shape=(1,25)
            ret[i,j]=np.dot(d,k)
    return ret 
```

What I'm trying to do is for all i and j's in their respective ranges, find the weighted averages of its 5-by-5 neighbors by finding the dot product of the 5-by-5 neighbors for every i and j (I changed the shape of data to (1,25) to allow the calculations to be easier) in the range and the kernel (did the same to the shape of the kernel for the previous reason). However, I'm receiving an error that says:

```
Traceback (most recent call last):
  File "/Users/jbunker7/Documents/Comp 116/M2_COMP116-003/P5.py", line 40, in <module>
    result = applyFilter(data, kernel)
  File "/Users/jbunker7/Documents/Comp 116/M2_COMP116-003/P5.py", line 30, in applyFilter
    ret[i,j]=np.dot(d,k)
ValueError: matrices are not aligned 
```

Can someone help me identify the error and guide me on the right path? If possible, I'd like to keep this structure because I'm in an introductory computing class and I'm not allowed to use upper-level computing techniques.

# asp.net - Web.config 中的连接字符串中缺少必需的空格

> ID：15752110
> 
> 赞同：2
> 
> 时间：2013-04-01T21:21:28.847
> 
> 标签：asp.net, .net, web-config, connection-string, whitespace

我的连接字符串如下所示：

```
<add name="RaiseFantasyLeagueConnectionString" connectionString="Server=ATLAS-SQL-07;Database=Raise;MultipleActiveResultSets="True" User Id=***; Password=*******/> 
```

我说错`MultipleActiveResultSets="True"`了

> 缺少必需的空格。

谁能建议我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T21:28:31.720

此连接字符串有多个问题。

*   `MultipleActiveResultSets=True`不应引用中的 True 值
*   后面应该有分号`MultipleActiveResultSets=True`
*   密码后应该有一个结束引号。

试试这样：

```
<add name="RaiseFantasyLeagueConnectionString" connectionString="Server=ATLAS-SQL-07;Database=Raise;MultipleActiveResultSets=True;User Id=***;Password=*******"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:37:07.570

放一个分号

```
MultipleActiveResultSets="True"; User Id=
                               ^
                               | 
```

# sql - 从 3 个表中旋转 2 列并创建数据透视列名称以避免冲突 - SQL-Server 2008R2

> ID：15752112
> 
> 赞同：1
> 
> 时间：2013-04-01T21:21:35.857
> 
> 标签：sql, sql-server-2008, pivot

### 介绍和问题

在我的示例中，我有教师、学生和课程。我想概述一下哪个课程由谁在哪个房间教授，以及这门课程中的所有学生。我有基本的设置运行（带有一些手工编码的语句）。但直到现在我还没有准备好正确的 STUFF 声明：

*   做好准备`@colsStudents`，以便我可以将名称放在列标题中，并且无需弄乱 id（添加 100）以避免rooms.id 和students.id 之间的冲突
*   准备`@colsRooms`好让我不必硬编码房间名称
*   通过使用将我放在一起 `EXEC sp_executesql @sql;`

您可以找到所有 sql 语句来创建此架构和最后的数据。

![表格图](https://i.stack.imgur.com/e6SLC.png)

### 想要的结果概述课程，

我想旋转列`RoomName`并将`StudentName`列值用作新列名。所有用于创建表和数据的 SQL 语句都在最后。

```
Id | Course | Teacher | A3 | E7 | Penny | Cooper | Koothrap. | Amy
---+--------+---------+----+----+-------+--------+-----------+-----+
1  | C# 1   | Marc G. |    | 1  |  1    |        |           |
2  | C# 2   | Sam S.  |    | 1  |  1    |        |      1    |
3  | C# 3   | John S. | 1  |    |       |    1   |           |
4  | C# 3   | Reed C. |    | 1  |       |        |      1    |
5  | SQL 1  | Marc G. | 1  |    |       |        |           |  
6  | SQL 2  | Marc G. | 1  |    |       |        |           |  
7  | SQL 3  | Marc G. |    | 1  |       |    1   |           |  1
8  | SQL 3  | Gbn     | 1  |    |       |        |      1    | 
```

### 到目前为止我有什么

```
With PivotData as (
Select cd.Id, c.CourseName as Course, t.TeacherName as Teacher
        ,r.Id as RoomId, r.RoomName as RoomName
        ,100 + s.Id as StudentId, s.StudentName as Student 
    FROM CourseDetails cd 
        Left JOIN Courses c ON cd.CourseId = c.Id
        Left JOIN Teachers t ON cd.TeacherId = t.Id
        Left JOIN CourseMember cm ON cd.Id = cm.CourseDetailsId
        Left JOIN Students s ON cm.StudentId = s.Id 
        Left JOIN Rooms r ON cd.RoomId = r.Id
        )    
Select Course, Teacher
    , [1] as A3, [2] as E7 -- RoomColumns
    , [101] as Koothrappali, [102] as Cooper, [103] as Penny, [104] as Amy -- StudentColumns
    FROM (
        Select Course, Teacher, RoomName, RoomId,Student, StudentId
        From PivotData) src
    PIVOT( Max(RoomName) FOR RoomId IN ([1],[2])) as P1
    PIVOT( Count(Student) FOR StudentId IN ([101],[102],[103],[104]) ) as P2 
```

![透视结果](https://i.stack.imgur.com/HdnTx.png)

## 什么不见​​了

上述声明是手工准备的。由于我事先不知道房间或学生，我需要为列房间和学生动态创建枢轴语句。在 SO 上有很多如何做到这一点的例子。正常的方法是使用 STUFF：

```
DECLARE @colsStudents AS NVARCHAR(MAX);
SET @colsStudents = STUFF(
        (SELECT N',' + QUOTENAME(y) AS [text()] FROM 
            (SELECT DISTINCT 100 + Id AS y FROM dbo.Students) AS Y 
                ORDER BY y
                FOR XML PATH('')
        ),1
        ,1
        ,N'');
Select @colsStudents 
```

这将返回`[101],[102],[103],[104]`学生 ID。我为每个 id 添加了 100 以避免students.id 和 teh rooms.id 列之间的冲突。

正如介绍中提到的，我需要动态创建这样的东西

```
[1] as RoomName_1, [2] as RoomName_1 -- RoomColumns
[1] as StudentName1, [2] as StudentName2, ... ,[4] as Amy -- StudentColumns 
```

但是我对 stuff 声明的所有尝试都失败了。

### 用于创建表和数据的所有 SQL 语句

```
CREATE TABLE [dbo].[Teachers](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [TeacherName] [nvarchar](120) NULL,
    CONSTRAINT PK_Teachers PRIMARY KEY CLUSTERED (Id))

CREATE TABLE [dbo].[Students](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [StudentName] [nvarchar](120) NULL,
    CONSTRAINT PK_Students PRIMARY KEY CLUSTERED (Id))

CREATE TABLE [dbo].[Courses](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [CourseName] [nvarchar](120) NULL,
    CONSTRAINT PK_Courses PRIMARY KEY CLUSTERED (Id))

CREATE TABLE [dbo].[Rooms](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [RoomName] [nchar](120) NULL,
    CONSTRAINT PK_Rooms PRIMARY KEY CLUSTERED (Id))

CREATE TABLE [dbo].[CourseDetails](
  [Id] [int] IDENTITY(1,1) NOT NULL,
  [CourseId] [int] NOT NULL,
  [TeacherId] [int] NOT NULL,
  [RoomId] [int] NOT NULL,  
  CONSTRAINT PK_CourseDetails PRIMARY KEY CLUSTERED (Id),
  CONSTRAINT FK_CourseDetails_Teachers_Id FOREIGN Key (TeacherId)
    REFERENCES dbo.Teachers (Id),   
  CONSTRAINT FK_CourseDetails_Courses_Id FOREIGN Key (CourseId)
    REFERENCES dbo.Courses (Id),    
  CONSTRAINT FK_CourseDetails_Rooms_Id FOREIGN Key (RoomId)
    REFERENCES dbo.Rooms (Id)       
)       

CREATE TABLE [dbo].[CourseMember](
  [Id] [int] IDENTITY(1,1) NOT NULL,
  [CourseDetailsId] [int] NOT NULL,
  [StudentId] [int] NOT NULL,
  CONSTRAINT PK_CourseMember PRIMARY KEY CLUSTERED (Id),
  CONSTRAINT FK_CourseMember_CourseDetails_Id FOREIGN Key (CourseDetailsId)
    REFERENCES dbo.CourseDetails (Id),   
  CONSTRAINT FK_CourseMember_Students_Id FOREIGN Key (StudentId)
    REFERENCES dbo.Students (Id)     
)

INSERT INTO dbo.Courses (CourseName)
VALUES ('SQL 1 - Basics'),
    ('SQL 2 - Intermediate'),
    ('SQL 3 - Advanced'),   
    ('C# 1 - Basics'),
    ('C# 2 - Intermediate'),    
    ('C# 3 - Advanced')     

INSERT INTO dbo.Students (StudentName)
VALUES
   ('Koothrappali'),   
   ('Cooper'),
   ('Penny'),   
   ('Amy') 

INSERT INTO dbo.Teachers (TeacherName)
VALUES
   ('gbn '),
   ('Sam S.'),
   ('Marc G.'),   
   ('Reed C.'),
   ('John S.')

INSERT INTO dbo.Rooms (RoomName)
VALUES ('A3'), ('E7')

INSERT [dbo].[CourseDetails] (CourseId, TeacherId, RoomId) 
    VALUES (4, 3, 2),(5, 2, 2),
        (6, 5, 1),(6, 4, 2),
        (1,3,1),(2,3,1),(3,3,2),
        (3,1,1)

INSERT [dbo].[CourseMember] (CourseDetailsId, StudentId) 
    VALUES (1,3),(2,3),(2,1),(3,2),(4,1),(7,2),(7,4),(8,1) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T22:10:37.150

我个人会这样做有点不同。由于您正在尝试旋转两个单独的列，它们尖叫着使用该`UNPIVOT`函数。

unpivot 会将您的多列转换为行，然后再进行透视。

由于您拥有 SQL Server 2008，因此您可以使用`CROSS APPLY`和值：

```
 select id, course, teacher, col, flag
  from
  (
    Select cd.Id, c.CourseName as Course, t.TeacherName as Teacher
      ,cast(r.Id as varchar(10))as RoomId
      , r.RoomName as RoomName
      ,cast(100 + s.Id as varchar(10)) as StudentId
      , s.StudentName as Student
      , '1' flag
    FROM CourseDetails cd 
    Left JOIN Courses c 
      ON cd.CourseId = c.Id
    Left JOIN Teachers t 
      ON cd.TeacherId = t.Id
    Left JOIN CourseMember cm 
      ON cd.Id = cm.CourseDetailsId
    Left JOIN Students s 
      ON cm.StudentId = s.Id 
    Left JOIN Rooms r 
      ON cd.RoomId = r.Id
  ) d
  cross apply
  (
    values ('roomname', roomname),('student',student)
  ) c (value, col) 
```

请参阅[演示](http://sqlfiddle.com/#!3/d95a2/63)。unpivot 生成类似于以下的结果：

```
| ID |               COURSE | TEACHER |          COL | FLAG |
-------------------------------------------------------------
|  1 |        C# 1 - Basics | Marc G. |           E7 |    1 |
|  1 |        C# 1 - Basics | Marc G. |        Penny |    1 |
|  2 |  C# 2 - Intermediate |  Sam S. |           E7 |    1 |
|  2 |  C# 2 - Intermediate |  Sam S. |        Penny |    1 |
|  2 |  C# 2 - Intermediate |  Sam S. |           E7 |    1 |
|  2 |  C# 2 - Intermediate |  Sam S. | Koothrappali |    1 |
|  3 |      C# 3 - Advanced | John S. |           A3 |    1 |
|  3 |      C# 3 - Advanced | John S. |       Cooper |    1 | 
```

您将看到`col`数据包含您想要透视的所有值。一旦数据在行中，如果将很容易应用一个枢轴：

```
select id, course, teacher, 
  coalesce(A3, '') A3, 
  coalesce(E7, '') E7, 
  coalesce(Koothrappali, '') Koothrappali, 
  coalesce(Cooper, '') Cooper, 
  coalesce(Penny, '') Penny, 
  coalesce(Amy, '') Amy
from
(
  select id, course, teacher, col, flag
  from
  (
    Select cd.Id, c.CourseName as Course, t.TeacherName as Teacher
      ,cast(r.Id as varchar(10))as RoomId
      , r.RoomName as RoomName
      ,cast(100 + s.Id as varchar(10)) as StudentId
      , s.StudentName as Student
      , '1' flag
    FROM CourseDetails cd 
    Left JOIN Courses c 
      ON cd.CourseId = c.Id
    Left JOIN Teachers t 
      ON cd.TeacherId = t.Id
    Left JOIN CourseMember cm 
      ON cd.Id = cm.CourseDetailsId
    Left JOIN Students s 
      ON cm.StudentId = s.Id 
    Left JOIN Rooms r 
      ON cd.RoomId = r.Id
  ) d
  cross apply
  (
    values ('roomname', roomname),('student',student)
  ) c (value, col)
) d
pivot
(
  max(flag)
  for col in (A3, E7, Koothrappali, Cooper, Penny, Amy)
) piv 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/d95a2/44)。

然后要将其转换为动态 SQL，您只需旋转一列，因此您将使用以下内容获取列列表：

```
select @cols = STUFF((SELECT  ',' + QUOTENAME(col) 
                    from 
                    (
                      select id, roomname col, 1 SortOrder
                      from rooms
                      union all
                      select id, StudentName, 2
                      from Students
                    ) d
                    group by id, col, sortorder
                    order by sortorder, id
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'') 
```

这将获得然后在枢轴中使用的不同房间和学生的列表。所以最终的代码将是：

```
DECLARE @cols AS NVARCHAR(MAX),
    @colsNull AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT  ',' + QUOTENAME(col) 
                    from 
                    (
                      select id, roomname col, 1 SortOrder
                      from rooms
                      union all
                      select id, StudentName, 2
                      from Students
                    ) d
                    group by id, col, sortorder
                    order by sortorder, id
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colsNull = STUFF((SELECT  ', coalesce(' + QUOTENAME(col)+', '''') as '+QUOTENAME(col)
                    from 
                    (
                      select id, roomname col, 1 SortOrder
                      from rooms
                      union all
                      select id, StudentName, 2
                      from Students
                    ) d
                    group by id, col, sortorder
                    order by sortorder, id
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = 'SELECT 
      id, course, teacher,' + @colsNull + ' 
     from
    (
      select id, course, teacher, col, flag
      from
      (
        Select cd.Id, c.CourseName as Course, t.TeacherName as Teacher
          ,cast(r.Id as varchar(10))as RoomId
          , r.RoomName as RoomName
          ,cast(100 + s.Id as varchar(10)) as StudentId
          , s.StudentName as Student
          , ''1'' flag
        FROM CourseDetails cd 
        Left JOIN Courses c 
          ON cd.CourseId = c.Id
        Left JOIN Teachers t 
          ON cd.TeacherId = t.Id
        Left JOIN CourseMember cm 
          ON cd.Id = cm.CourseDetailsId
        Left JOIN Students s 
          ON cm.StudentId = s.Id 
        Left JOIN Rooms r 
          ON cd.RoomId = r.Id
      ) d
      cross apply
      (
        values (''roomname'', roomname),(''student'',student)
      ) c (value, col)
    ) d
    pivot
    (
      max(flag)
      for col in (' + @cols + ')
    ) p '

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/d95a2/62)。

注意我实现了一个在数据透视表中使用的标志，如果房间或学生有值，这基本上会生成一个 Y/N。

这给出了最终结果：

```
| ID |               COURSE | TEACHER | A3 | E7 | KOOTHRAPPALI | COOPER | PENNY | AMY |
---------------------------------------------------------------------------------------
|  1 |        C# 1 - Basics | Marc G. |    |  1 |              |        |     1 |     |
|  2 |  C# 2 - Intermediate |  Sam S. |    |  1 |            1 |        |     1 |     |
|  3 |      C# 3 - Advanced | John S. |  1 |    |              |      1 |       |     |
|  4 |      C# 3 - Advanced | Reed C. |    |  1 |            1 |        |       |     |
|  5 |       SQL 1 - Basics | Marc G. |  1 |    |              |        |       |     |
|  6 | SQL 2 - Intermediate | Marc G. |  1 |    |              |        |       |     |
|  7 |     SQL 3 - Advanced | Marc G. |    |  1 |              |      1 |       |   1 |
|  8 |     SQL 3 - Advanced |    gbn  |  1 |    |            1 |        |       |     | 
```

附带说明一下，也可以使用`unpivot`sql server 中的函数对这些数据进行反透视。（请参阅[带有 unpivot 的演示](http://sqlfiddle.com/#!3/d95a2/89)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T22:01:10.510

您可以使用动态 sql 查询为两个数据透视列创建别名字符串，例如，对于学生列：

```
DECLARE @colsStudents AS NVARCHAR(MAX),
@colsstudentalias AS NVARCHAR(MAX),
@colsRooms AS NVARCHAR(MAX),
@colsRoomsalias AS NVARCHAR(MAX)

SELECT @colsStudents = STUFF
(
  (
    SELECT DISTINCT ',' + QUOTENAME(100 + Id)
    FROM dbo.Students
    FOR XML PATH('')
  ), 1, 1, ''
)

SELECT @colsstudentalias = STUFF
(
  (
    SELECT DISTINCT ',' + QUOTENAME(100 + Id) 
                + ' as ' + QUOTENAME(ltrim(rtrim(StudentName)))
    FROM dbo.Students
    FOR XML PATH('')
  ), 1, 1, ''
)

SELECT @colsRooms = STUFF
(
  (
    SELECT DISTINCT ',' + QUOTENAME(Id)
    FROM dbo.Rooms
    FOR XML PATH('')
  ), 1, 1, ''
)

SELECT @colsRoomsalias = STUFF
(
  (
    SELECT DISTINCT ',' + QUOTENAME(Id) 
                + ' as ' + QUOTENAME(ltrim(rtrim(RoomName)))
    FROM dbo.Rooms
    FOR XML PATH('')
  ), 1, 1, ''
)

--SELECT @colsStudents, @colsstudentalias, @colsRooms, @colsRoomsalias

DECLARE @sql varchar(max)
set @sql = ';With PivotData as (
Select cd.Id, c.CourseName as Course, t.TeacherName as Teacher
        ,r.Id as RoomId, r.RoomName as RoomName
        ,100 + s.Id as StudentId, s.StudentName as Student 
    FROM CourseDetails cd 
        Left JOIN Courses c ON cd.CourseId = c.Id
        Left JOIN Teachers t ON cd.TeacherId = t.Id
        Left JOIN CourseMember cm ON cd.Id = cm.CourseDetailsId
        Left JOIN Students s ON cm.StudentId = s.Id 
        Left JOIN Rooms r ON cd.RoomId = r.Id
        )    
Select Course, Teacher
    , ' + @colsRoomsalias + '
    , ' + @colsstudentalias + '
    FROM (
        Select Course, Teacher, RoomName, RoomId,Student, StudentId
        From PivotData) src
    PIVOT( Max(RoomName) FOR RoomId IN (' + @colsRooms + ')) as P1
    PIVOT( Count(Student) FOR StudentId IN (' + @colsStudents + ') ) as P2'

exec (@sql) 
```

[SQL 演示](http://sqlfiddle.com/#!3/d95a2/84)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T00:08:12.847

我将更深入地研究上面的两个答案，并将它们与下面的答案进行比较。

*   我的问题是用`Stuff()`函数填充局部变量@RoomNames 和@StudentNames。一个原因是我选择了数据类型`nchar(120)`而不是 `nvarchar(120)`列`StudentName`，`RoomName`.
*   我遇到的另一个问题是新的 columnNames（学生而不是 StudentName）无法识别；`*`因此我在此声明中将它们替换为：`Select * From (' + @PivotSrc + N') src`

[Philip Kelley](https://stackoverflow.com/questions/7822004/pivots-with-dynamic-columns-in-sql-server?rq=1#7822414)建议使用它`SELECT @RoomIds = isnull(@RoomIds + ',', '') + '[' + Cast(Id as nvarchar(20))+ ']' FROM Rooms`来代替，`STUFF()` 因为我发现它更短更容易阅读，我现在正在使用它。

### 工作解决方案

```
DECLARE @StudentNames NVARCHAR(2000),    
    @RoomIds NVARCHAR(2000),
    @RoomNames NVARCHAR(2000),
    @PivotSrc NVARCHAR(MAX),
    @PivotBase NVARCHAR(MAX);
SELECT @StudentNames = isnull(@StudentNames + ',', '') + '[' + StudentName + ']' FROM Students
SELECT @RoomIds = isnull(@RoomIds + ',', '') + '[' + Cast(Id as nvarchar(20))+ ']' FROM Rooms
SELECT @RoomNames = isnull(@RoomNames + ',', '') + '[' + RoomName + ']' FROM Rooms

SET @PivotSrc = N'Select cd.Id, c.CourseName as Course, t.TeacherName as Teacher
        ,r.Id as RoomId, r.RoomName as RoomName
        ,100 + s.Id as StudentId, s.StudentName as Student 
    FROM CourseDetails cd 
        Left JOIN Courses c ON cd.CourseId = c.Id
        Left JOIN Teachers t ON cd.TeacherId = t.Id
        Left JOIN CourseMember cm ON cd.Id = cm.CourseDetailsId
        Left JOIN Students s ON cm.StudentId = s.Id 
        Left JOIN Rooms r ON cd.RoomId = r.Id'

SET @PivotBase = N' Select Course, Teacher, ' 
        + @RoomNames + N', ' 
    + @StudentNames + N' FROM (
       Select * From (' + @PivotSrc + N') src
       PIVOT( Max(RoomName) FOR RoomName IN ('+@RoomNames+ N')) as P1
           PIVOT( Count(Student) FOR Student IN ('+@StudentNames+N') ) as P2) as T'

execute(@PivotBase) 
```

# ios - PList 类型？应用程序/x-plist 类型

> ID：15752114
> 
> 赞同：4
> 
> 时间：2013-04-01T21:21:37.903
> 
> 标签：ios, objective-c, plist, afnetworking

我正在尝试使用 AFNetworking 的 AFPropertyListRequestOperation，但是当我尝试下载它时，出现错误

`Expected content type {( "application/x-plist" )}, got application/xml"`

我做了一些研究，application/xml 显然是在 iOS 中创建的类型。如何创建应用程序/x-plist 格式的 PLIST？我试过做plutil，但它似乎没有用。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T21:27:09.213

您可以使用以下方法将内容类型添加`application/xml`到：`AFPropertyListRequestOperation``addAcceptableContentTypes`

```
[AFPropertyListRequestOperation addAcceptableContentTypes:[NSSet setWithObject:@"application/xml"]; 
```

# forms - Symfony2 - 为实体字段设置选定值

> ID：15752115
> 
> 赞同：9
> 
> 时间：2013-04-01T21:21:40.770
> 
> 标签：forms, symfony, entity, selected

我正在尝试在实体字段中设置选定的值。根据我看到的有关此主题的许多讨论，我尝试设置该`data`选项，但默认情况下不会选择任何值：

```
class EventType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('place', 'entity', array(
                'class' => 'RoyalMovePhotoBundle:Place',
                'property' => 'name',
                'empty_value' => "Choisissez un club",
                'mapped' => false,
                'property_path' => false,
                'data' => 2
            ))
            ->add('begin')
            ->add('end')
            ->add('title')
            ->add('description')
        ;
    }

    // ...
} 
```

通过寻找更多，我发现有些人不得不停用到实体的表单映射。这似乎合乎逻辑，所以我尝试添加`'mapped' => false`选项，但没有成功......

如果有帮助，这是我的控制器：

```
class EventController extends Controller
{
    // ...

    public function addAction()
    {
        $request = $this->getRequest();
        $em = $this->getDoctrine()->getManager();

        $event = new Event();
        $form = $this->createForm(new EventType(), $event);

        $formHandler = new EventHandler($form, $request, $em);

        if($formHandler->process()) {
            $this->get('session')->getFlashBag()->add('success', "L'évènement a bien été ajouté.");
            return $this->redirect($this->generateUrl('photo_event_list'));
        }

        return $this->render('RoyalMovePhotoBundle:Event:add.html.twig', array(
            'form' => $form->createView()
        ));
    }
} 
```

和`EventHandler`班级：

```
class EventHandler extends AbstractHandler
{
    public function process()
    {
        $form = $this->form;
        $request = $this->request;

        if($request->isMethod('POST')) {
            $form->bind($request);

            if($form->isValid()) {
                $this->onSuccess($form->getData());
                return true;
            }
        }

        return false;
    }

    public function onSuccess($entity)
    {
        $em = $this->em;

        $em->persist($entity);
        $em->flush();
    }
} 
```

我现在有点卡住了，有人有想法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-09-13T17:47:57.087

您只需要设置字段的数据：

```
    class EventController extends Controller
    {
        // ...

        public function addAction()
        {
           $request = $this->getRequest();
            $em = $this->getDoctrine()->getManager();

            $event = new Event();
            $form = $this->createForm(new EventType(), $event);

            // -------------------------------------------
            // Suppose you have a place entity..
            $form->get('place')->setData($place);
            // That's all..
            // -------------------------------------------

            $formHandler = new EventHandler($form, $request, $em);

            if($formHandler->process()) {
                $this->get('session')->getFlashBag()->add('success', "L'évènement a bien été ajouté.");
                return $this->redirect($this->generateUrl('photo_event_list'));
            }

            return $this->render('RoyalMovePhotoBundle:Event:add.html.twig', array(
                'form' => $form->createView()
            ));
        }
    } 
```

 `* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-01T21:30:32.487

为了使选项出现在表单中，您应该为实体本身设置相应的值。

```
$place = $repository->find(2);
$entity->setPlace($place);
$form = $this->createForm(new SomeFormType(), $entity);
.... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-08T19:46:24.217

对于**`non-mapped`**实体选择字段，我发现最简单的方法是使用[`choice_attr`](http://symfony.com/doc/current/reference/forms/types/entity.html#choice-attr)带有`callable`. 这将遍历选择的集合，并允许您根据您的条件添加自定义属性，并使用扩展、多个和自定义属性选项。

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->add('place', 'entity', array(
            //...
            'choice_attr' => function($place) {
                $attr = [];
                if ($place->getId() === 2) {
                    $attr['selected'] = 'selected';
                    //for expanded use $attr['checked'] = 'checked';
                 }
                 return $attr;
            }
       ))
       //...
    ;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-24T11:27:50.123

当您使用该`query_builder`选项时，该`data`选项需要一个集合实例，并且您**不想**通过仅添加某些字段来触摸您的控制器`setDatas`，并且您已经在表单类型类中拥有查询构建器和重新填充选项的 ID，您可以重新填充选择，如下所示：

```
// Querybuilder instance with filtered selectable options
$entities = $qb_all; 
// Querybuilder instance filtered by repopulating options (those that must be marked as selected)
$entities_selected = $qb_filtered; 
```

然后在你的 add() 方法中

```
'data' => $entities_selected->getQuery()->getResult(), // Repopulation
'query_builder' => $entities, 
```

**编辑：真实用例示例**

您想重新填充使用以下元素呈现的复选框组：

`Label: What is your favourite meal?`

`4 Checkboxes: Pasta, Pizza, Spaghetti, Steak`

并且您想重新填充 2 个复选框：

`Pizza, Steak`

`$qb_all`将是具有所有 4 个可选复选框的 QueryBuilder 实例

`$qb_filtered`将是一个带有重新填充 Checkboxes 的新的附加 QueryBuilder 实例`Pizza, Steak`。所以是前一个的“过滤”版本。`

# sql-server-2008 - How to speed up integration tests using SQL Server Dev Edition

> ID：15752119
> 
> 赞同：6
> 
> 时间：2013-04-01T21:22:00.850
> 
> 标签：sql-server-2008, unit-testing, c#-4.0, nunit, resharper

We have a suite of applications developed in C# and C++ and using SQL Server as the back end. Integration tests are developed with NUnit, and they take more than two minutes to run. To speed up integration tests, we are using the following:

*   Tests run on the same workstation, so no network delays
*   Test databases are created on DataRam RAM Disk, which is fast
*   Test fixtures run in parallel, currently up to four at a time
*   Most test data is bulk loaded using table-valued parameters.

What else can be done to speed up automated integration tests?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-30T12:51:20.170

我知道这个问题非常非常古老，但无论如何我都会发布我的答案。

听起来可能很愚蠢，但是：**编写更少的集成测试和更多的单元测试**。仅在您的应用程序边界进行集成测试（如“当您将控制权传递给您不拥有的代码时”）。

我对此的看法受到[JB Reinsberger](http://www.jbrains.ca/)的启发。如果你愿意，你可以听听他就这个话题发表的演讲。他比我更能解释这一点。这是视频的链接：

[http://vimeo.com/80533536](http://vimeo.com/80533536)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-23T14:48:39.453

我不喜欢这个答案，因为它是错误的，所以少写集成测试。我们的应用程序数据量很大。我们的大部分代码都是围绕数据的逻辑。因此，如果没有集成测试，我们只有微不足道的单元测试（我认为仍然应该编写）。

我们的集成测试运行 1 小时。成千上万的测试。他们给我们带来了巨大的价值。

我认为您应该分析缓慢的测试以及它们为何缓慢。查看多个测试是否可以重用数据，而无需从头开始删除和重新创建它。将测试划分为多个区域，这样您就不必总是运行每个测试。使用现有的数据库快照而不是重新创建数据库。

# sdl - SDL2 中的纹理渐变 - 使用 SDL_image

> ID：15752122
> 
> 赞同：3
> 
> 时间：2013-04-01T21:22:05.020
> 
> 标签：sdl, sdl-image

我可以使用 SDL_image 毫无问题地加载（png）图像，并且可以完美地显示它。不过，我想做的是将图像从完全透明逐渐淡入完全不透明。我看过一些教程提到`SDL_SetAlpha`，但这是用于`SDL_Surface`SDL_image 加载的地方，就像`SDL_Texture`硬件加速一样。

任何人都可以在保持良好性能的同时帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T16:27:18.840

所以这就是我发现的。要使用 alpha 渲染纹理，您只需调用`SetTextureAlphaMod`一个指向纹理的指针和一个 0 - 255 范围内的整数。

函数本身记录[在这里](http://wiki.libsdl.org/moin.fcg/SDL_SetTextureAlphaMod)

注意。渲染器并不总是支持 Alpha 调制，如果是这种情况，函数将返回 -1（成功调用返回 0）。函数文档中有关于如何检测渲染器是否支持 alpha 调制的信息。

我的问题的下一部分是如何执行从 SDL_TRANSPARENT (0) 到 SDL_OPAQUE (255) 的平滑渐变。我在我的变量更新函数中做到了这一点（游戏使用固定和变量更新）

```
#define FADE_SPEED 0.07f;

void SomeClass::UpdateVariable(float elapsedTime)
{
    // Check there is a texture
    if (texture) {
        // Set the alpha of the texture
        SDL_SetTextureAlphaMod(texture, alpha);
    }

    // Update the alpha value
    if (alpha < SDL_ALPHA_OPAQUE) {
        alphaCalc += FADE_SPEED * elapsedTime;
        alpha = alphaCalc;
    }

    // if alpha is above 255 clamp it
    if (alpha >= SDL_ALPHA_OPAQUE) {
        alpha = SDL_ALPHA_OPAQUE;
        alphaCalc = (float)SDL_ALPHA_OPAQUE;
    }
} 
```

注意使用两个 alpha 变量。`alpha`是传递给用于控制纹理 alpha 的函数的实际值，是一个 Uint8。`alphaCalc`是一个浮点数，用于存储从 0 到 255 逐渐增加的值。更新函数的每次调用都会看到这个值更新为缩放器值`FADE_SPEED`乘以经过的帧时间。然后将其分配给实际的 alpha 值。这样做是为了保持平滑淡入淡出，因为整数舍入可防止仅使用 alpha 值进行平滑淡入淡出。

# mysql - Mysql distinct group by

> ID：15752125
> 
> 赞同：-1
> 
> 时间：2013-04-01T21:22:12.923
> 
> 标签：mysql, group-by, distinct

happy pascal day.

```
('Afghanistan - Fixed'),
('Afghanistan - Mobile AWCC'),
('Afghanistan - Mobile Etisalat'),
('Afghanistan - Mobile MTN'),
('Afghanistan - Mobile Others'),
('Afghanistan - Mobile Roshan'),
('Afghanistan - Mobile WASEL'),
('Albania - Fixed'),
('Albania - Fixed ALBTEL'),
('Albania - Fixed AMC'),
('Albania - Fixed Tirana'),
('Albania - Interactive TV'),
('Albania - Mobile'),
('Albania - Mobile AMC'),
('Albania - Mobile Plus'),
('Albania - Mobile Vodafone'),
('Algeria - Fixed'),
('Algeria - Fixed CAT'),
('Algeria - Mobile Orascom'),
('Algeria - Mobile Others'), ...
```

I need to get Algeria, Albania and Afghanistan distinct, groupp by ?, you have idea ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:34:32.553

如果我理解正确，你可能需要这样的东西

```
SELECT DISTINCT TRIM(SUBSTRING_INDEX(field1, '-', 1)) countries
FROM table1 
```

输出：

```
|   COUNTRIES |
---------------
| Afghanistan |
|     Albania |
|     Algeria | 
```

**[SQLFiddle 示例](http://sqlfiddle.com/#!2/099f8/5)**

这也将起作用

```
SELECT TRIM(SUBSTRING_INDEX(field1, '-', 1)) countries
FROM table1
GROUP BY TRIM(SUBSTRING_INDEX(field1, '-', 1)) 
```

**[SQLFiddle 示例](http://sqlfiddle.com/#!2/099f8/6)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:37:59.533

```
select distinct SUBSTRING_INDEX(text, ' - ', 1) from test; 
```

[http://www.sqlfiddle.com/#!2/ba297/3](http://www.sqlfiddle.com/#!2/ba297/3)

# php - php：可以在php函数中使用数组吗？

> ID：15752132
> 
> 赞同：-1
> 
> 时间：2013-04-01T21:22:43.820
> 
> 标签：php, arrays, function

我有一个函数，但它包含很多这样的参数；

```
function F(param1=false,param2=false,param3=false,param4=false) { ... } 
```

我的问题是，当我使用该函数并在参数中使用该数组时，我可以创建一个数组吗？面积而不是变量？像这样：

```
$x = array(
'param1' => $param1,
.
.
.
);
//then
F($x); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:28:31.167

你绝对可以。试试这个：

```
$params = array(
'param1' => $param1,
'param2' => $param2,
'param3' => $param3,
);

function arrayParams($params=array()){
   $param1 = $params['param1'];
   // we want param2 to default to false
   if (! array_key_exists('param2', $params)){
     $params['param2'] = false;
    }
   echo "$param1\n";
   echo "$param2\n";
}

arrayParams($params); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-01T21:28:06.367

是的你可以。但是您将失去轻松将某些变量设置为默认值的可能性。

一个美观的解决方案是将一个类而不是数组传递给函数，以便将未定义的参数保持为默认值。

# javascript - 如何在 Bing 地图的集群图钉上设置自定义图标？

> ID：15752133
> 
> 赞同：0
> 
> 时间：2013-04-01T21:22:49.207
> 
> 标签：javascript, customization, shapes, bing-maps

我要做的是更改使用 Bing Maps Ajax Control 6.3 为 Bing Map 设置集群配置时显示的默认图标。

我有一个像这样加载 Bing 地图的函数：

```
function getMap() {
    map = new VEMap('map_canvas');
    map.SetDashboardSize(VEDashboardSize.Tiny);
    var latLong = new VELatLong(21.983801, -101.557617);
    map.LoadMap();
    var customPin = '<div style="position:relative; left:-10px;top:-20px;"><img src="../Content/images/icons/pin1.png" style="width:40px; height:40px"></div>';
    icon.CustomHTML = custom;
    var options = new VEClusteringOptions(icon, null);
    map.GetShapeLayerByIndex(0).SetClusteringConfiguration(VEClusteringType.Grid, options);
    map.SetCenterAndZoom(latLong, 6);
    map.SetMouseWheelZoomToCenter(false);
    map.EnableShapeDisplayThreshold(true);
    map.AttachEvent("onclick", singleMouseHandler);
    map.AttachEvent("ondoubleclick", doubleClickMouseHandler);
} 
```

但到目前为止，它一直显示相同的默认图标。我在这里想念什么？

我想知道的另一件事是，如果集群中的一个图钉发生变化，是否有办法更改自定义图标，比如我有 5 个绿色图钉，但其中一个更新为蓝色图钉，有没有办法改变代表该集群的图标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:51:32.073

我很久以前为我们公司的网站做过开发。您是否尝试过此处提供的交互式 SDK？ [http://www.bingmapsportal.com/isdk/ajaxv7#Pushpins15](http://www.bingmapsportal.com/isdk/ajaxv7#Pushpins15)
我添加了图钉开发参考
[http://www.microsoft.com/maps/developers/web.aspx](http://www.microsoft.com/maps/developers/web.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:07:06.533

我发现我的方法不起作用的原因，我一直认为我正在处理带有接收参数的构造函数的类，在这种情况下，VEClusteringOptions 类在其构造函数中没有接收参数。我不得不单独设置 Icon 属性：

```
function getMap() {
    map = new VEMap('map_canvas');
    map.SetDashboardSize(VEDashboardSize.Tiny);
    var latLong = new VELatLong(21.983801, -101.557617);
    map.LoadMap();
    var customPin = '<div style="position:relative; left:-10px;top:-20px;"><img src="../Content/images/icons/pin1.png" style="width:40px; height:40px"></div>';
    icon.CustomHTML = custom;
    var options = new VEClusteringOptions();
    options.Icon = icon; // here's the "big" difference
    map.GetShapeLayerByIndex(0).SetClusteringConfiguration(VEClusteringType.Grid, options);
    map.SetCenterAndZoom(latLong, 6);
    map.SetMouseWheelZoomToCenter(false);
    map.EnableShapeDisplayThreshold(true);
    map.AttachEvent("onclick", singleMouseHandler);
    map.AttachEvent("ondoubleclick", doubleClickMouseHandler);
} 
```

现在我的自定义集群图标加载得很好，我需要在未来更多地习惯属性的概念。

# javascript - Why XMLHttpRequest return null?

> ID：15752134
> 
> 赞同：1
> 
> 时间：2013-04-01T21:22:53.177
> 
> 标签：javascript, xml, xml-parsing, xmlhttprequest

This is a bit strange. I ran this script in different computer and got different result. **In one computer, this code worked but didn't work in another.** Here's my js code:

```
xmlDoc = loadXmlDoc();
printSubClassOf();

function loadXmlDoc(){
    var xmlDom = null;
    var xhttp = new XMLHttpRequest();

    xhttp.open("GET", "resto.owl", false);
    xhttp.send(null);
    xmlDom = xhttp.responseXML;
    return xmlDom;
}

function printSubClassOf(){
    a = xmlDoc.getElementsByTagName("SubClassOf");  

    for(i = 0; i < a.length; i++){
        b = xmlDoc.getElementsByTagName("SubClassOf")[i].childNodes;

        for(j = 0; j < b.length; j++){          
            c = xmlDoc.getElementsByTagName("SubClassOf")[i].childNodes[j];

            document.write(i + " " + j + " " + c.nodeName + "<br>");
        }
    }
} 
```

And this is the XML I tried to parse.

```
<Ontology>
    <SubClassOf>
        <Class IRI="#Chef"/>
        <Class IRI="#Employee"/>
    </SubClassOf>
    <SubClassOf>
        <Class IRI="#Customer"/>
        <Class IRI="#People"/>
    </SubClassOf>
</Ontology> 
```

I used Chrome Developer Tools to see what was going on. There was a XHR request with 200 status code but still got this error.

```
a = xmlDoc.getElementsByTagName("SubClassOf");
Uncaught TypeError: Cannot call method 'getElementsByTagName' of null 
```

I think `printSubClassOf()` finished before `loadXmlDoc()` returns the XML. What do you think? And how to solve this problem? FYI: I ran this on localhost.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:26:31.597

您的 xml 无效。需要有一个根节点才能成为有效的 xml。只有当响应是有效的 xml 时才会填充 responseXML。

# java - FileWriter，如何在同一个文档上写入

> ID：15752139
> 
> 赞同：1
> 
> 时间：2013-04-01T21:23:22.397
> 
> 标签：java, netbeans

我创建了一个 Java 游戏，当游戏结束时，会执行一个方法，告诉用户输入他/她的名字，然后他们的分数将保存在 playcores.txt 文档中。这工作正常。但是，我想要的不仅仅是一个人在本文档中的分数。我想要它，以便所有玩游戏名称和分数的人都将保存在此文档中。非常感谢一些帮助。

这是我的 gameComplete 方法代码：

```
public void gameComplete() throws IOException {
    String name = (String) JOptionPane.showInputDialog(
            frame,
            "Enter your name: ",
            "Save Score",
            JOptionPane.PLAIN_MESSAGE);
    Score score = new Score(player.getScore(), name);
    FileWriter fstream = new FileWriter("playerscores.txt");
    BufferedWriter out = new BufferedWriter(fstream);
    out.write("Name : " + score.getName() + System.getProperty( "line.separator" )  );
    out.write("Score : " + score.getScore());
    out.close();
} 
```

我尝试了不同的东西，例如 Objectoutputstream 但不幸的是无法弄清楚如何做到这一点，并且想知道它是否可能。此外，我想知道我应该使用什么类来完成这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:28:00.477

如果您乐于将新乐谱附加到文件末尾，请替换：

```
FileWriter fstream = new FileWriter("playerscores.txt"); 
```

和：

```
FileWriter fstream = new FileWriter("playerscores.txt", true); 
```

如果您可以让多个用户同时玩，您还需要使用文件锁定，以避免访问文件时出现竞争条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T21:28:52.323

要为多个人执行此操作，您应该以附加模式打开文件。

```
FileWriter fstream = new FileWriter("playerscores.txt",true); 
```

**句法：** `public FileWriter(File file, boolean append)`

**参数：**

*   file - 要写入的 File 对象

*   append - 如果为真，那么字节将被写入文件的末尾而不是开头。

默认情况下，**附加**参数为**false**。*所以，早些时候，你用当前玩家的分数覆盖了前一位玩家的分数。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T21:30:47.307

首先，如果您希望每次都添加文件而不是擦除和写入文件，请确保添加 true 的第二个参数以使其附加文本。

您可以使用 CSV 文件将答案存储在列中，然后使用逗号将其读出并解析数据。

`FileWriter fileW = new FileWriter("playerscores.txt", true);`

希望有帮助。

# android - MapFragment with Google play maps api v2 crashes in Eclipse

> ID：15752146
> 
> 赞同：0
> 
> 时间：2013-04-01T21:23:47.117
> 
> 标签：android, eclipse, maps, google-play-services

I am new with android developing and whenever i am trying to start this activity it crashes. I've already tried with only hello world and the intent is fine, I am thinking it might be something in the Manifest but I am not sure of how it should be formed with maps api v2\. I find this problem really frustrating. Any help is much appreciated. Manifest XML:

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.eriklansner.androidprojekt.alkometer"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="17" />

<permission
    android:name="com.eriklansner.androidprojekt.alkometer.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.eriklansner.androidprojekt.alkometer.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action
                android:name="android.intent.action.MAIN"
                android:value="your_apikey" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.eriklansner.androidprojekt.alkometer.Promilleutraknaren"
        android:label="@string/title_activity_promilleutraknaren" >
    </activity>
    <activity
        android:name="com.eriklansner.androidprojekt.alkometer.Activity"
        android:label="@string/title_activity_" >
    </activity>
    <activity
        android:name="com.eriklansner.androidprojekt.alkometer.MainActivityasd"
        android:label="@string/title_activity_main_activityasd" >
    </activity>
    <activity
        android:name="com.eriklansner.androidprojekt.alkometer.Activitydos"
        android:label="@string/title_activity_activitydos" >
    </activity>
    <activity
        android:name="com.eriklansner.androidprojekt.alkometer.Gelok"
        android:label="@string/title_activity_gelok" >
    </activity>
    <activity
        android:name="com.eriklansner.androidprojekt.alkometer.UseGps"
        android:label="@string/title_activity_use_gps" >
    </activity>
    <activity
        android:name="com.eriklansner.androidprojekt.alkometer.Visasvar"
        android:label="@string/title_activity_visasvar" >
    </activity>
    <activity
        android:name="com.eriklansner.androidprojekt.alkometer.DataContentProvider"
        android:label="@string/title_activity_data_content_provider" >
    </activity>
    <activity
        android:name="com.eriklansner.androidprojekt.alkometer.ColumnSchema"
        android:label="@string/title_activity_column_schema" >
    </activity>
    <activity
        android:name="com.eriklansner.androidprojekt.alkometer.TemperatureData"
        android:label="@string/title_activity_temperature_data" >
    </activity>
    <activity
        android:name="com.eriklansner.androidprojekt.alkometer.MyActivity"
        android:label="@string/title_activity_my" >
    </activity>
    <activity
        android:name="com.eriklansner.androidprojekt.alkometer.MyPlot"
        android:label="@string/title_activity_my_plot" >
    </activity>
    <activity
        android:name="com.eriklansner.androidprojekt.alkometer.SimpleXYPlotActivity"
        android:label="@string/title_activity_simple_xyplot" >
    </activity>
    <activity
        android:name="com.eriklansner.androidprojekt.alkometer.Main"
        android:label="@string/title_activity_main" >
    </activity>
    <activity
        android:name="com.eriklansner.androidprojekt.alkometer.Alkinmatning"
        android:label="@string/title_activity_alkinmatning" >
    </activity>
    <activity
        android:name="com.eriklansner.androidprojekt.alkometer.Alk"
        android:label="@string/title_activity_alk" >
    </activity>
    <activity
        android:name="com.eriklansner.androidprojekt.alkometer.Googlemapsgps"
        android:label="@string/title_activity_googlemapsgps" >
    </activity>

    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="AIzaSyDPaANagQvfdHSS0oFSmsrOsrr3sYVqs5E" />

    <activity
        android:name="com.eriklansner.androidprojekt.alkometer.trolol"
        android:label="@string/title_activity_trolol" >
    </activity>
    <activity
        android:name="com.eriklansner.androidprojekt.alkometer.Map"
        android:label="@string/title_activity_map" >
    </activity>
</application>

<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="com.example.mapdemo.permission.MAPS_RECEIVE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
```

activity_map.xml:

```
 <?xml version="1.0" encoding="utf-8"?>
     <fragment xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@+id/map"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:name="com.google.android.gms.maps.MapFragment"/> 
```

Map.java:

```
public class Map extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_map);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_map, menu);
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T16:07:30.793

崩溃的可能原因。

您正在尝试在模拟器中运行它。

您没有在您的 Manifest.in 应用程序标签中包含 API 密钥。

```
 <application>
 <!-- some other code in the manifest -->
  <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="YOUR_API_KEY"/>
</application> 
```

将地图片段添加到您的 Main.java

```
GoogleMap googleMap;
  // Getting reference to the SupportMapFragment of activity_main.xml
  MapFragment fm = (MapFragment) getFragmentManager().findFragmentById(R.id.map);

    // Getting GoogleMap object from the fragment
    googleMap = fm.getMap(); 
```

有关更多详细信息，请参阅我的博客文章，我试图总结使用适用于 Android 的 Google Maps API V2 构建应用程序所需的所有内容。

1.  [Maps API V2 问题的解决方案（使用 google_play_services_lib）。](http://mzubair.com/solving-the-problemserrors-of-google-maps-api-v2/)
2.  [使用 Maps API V2 for minSDK=8 (Android 2.2 Froyo) 创建一个 Android 应用程序。](http://mzubair.com/creating-an-android-app-with-maps-api-v2/)
3.  [使用 Maps API V2 for minSDK=11 (Android 3.0 HoneyComb) 创建一个 Android 应用程序。](http://mzubair.com/creating-an-android-app-with-maps-api-v2-for-minsdk11-android-23-0-honeycomb/)

如果你想在模拟器上运行它，请**[阅读这篇文章。](http://mzubair.com/android-how-to-make-the-emulator-run-maps-v2/)**

# vb.net - 将 GPS 度分秒转换为十进制度

> ID：15752150
> 
> 赞同：0
> 
> 时间：2013-04-01T21:24:04.787
> 
> 标签：vb.net, gps, coordinates, degrees

我有一个公式，用于从 gps 坐标计算十进制度数。

GPS坐标：3800.5825,N 08735.5417,W

公式：

```
Private Function DMStoDD(ByVal toConvert As Double, ByVal Dir As String) As Double
    Dim DD As Double
    Dim deg As Double
    Dim min As Double
    Dim sec As Double
    deg = CDbl(toConvert.ToString.Substring(0, 2))
    min = CDbl(toConvert.ToString.Substring(2, 2))
    sec = CDbl(toConvert.ToString.Split(".")(1)) * 0.01
    DD = deg + (min / 60) + (sec / 3600)
    'Negative for West
    If Dir = "W" Then DD = DD * -1
    Return DD
End Function 
```

返回： 38.0161805555556 -87.5983805555556（西部为负） 结果非常接近，但不太正确。我相信他们只是在他们实际应该下降的地方的西北一点点。我已经搜索并查看了很多不同的公式，但从我读过的内容来看，我认为我的应该是正确的。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T23:54:05.217

你的公式看起来不对，秒的部分！它尝试将 DMS 转换为度数。但是您的坐标采用 DM 表示法（度数 + 十进制分钟）

所以你需要一个DM到DEG的转换。
08735.5417,W = 87 度 35.5147 分钟 W

只需做 87 + 35.5147/60，然后乘以 -1

# c++ - 在 C++ 中，创建一个别名 const

> ID：15752151
> 
> 赞同：2
> 
> 时间：2013-04-01T21:24:05.323
> 
> 标签：c++, alias

我是 C++ 的初学者，我有一个问题要确定……我已经完成了在线搜索。

假设我有一个名为 A 的类，它有一个名为 Afunction 的函数。该函数如下所示：

```
// this is pseudocode
void Afunction (const A& a)
{
 a.something = a.something +1;
} 
```

我的理解是我们有一个名为“a”的“类似指针”的东西，它是我们传入的任何内容的别名。这里我们只确保别名本身是 const，但不能保证它指向的值不会不能改变。事实上，我正在改变它..我没有得到任何错误。

所以我的问题是，如何确保别名指向的值不能更改？如果它是别名以外的指针，则更容易完成......

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:44:14.020

`A const&`（不幸地等同于`const A&`）是对*对象的**引用`const`*。

类似地，`A const*`是指向对象的*指针`const`，而是指向对象*的指针，并且`A * const`是*`const`指向对象*`A const * const`的 *`const`指针`const`。

关键是从右到左读取（和写入）您的类型声明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T21:25:23.967

如果编译器接受该代码，您应该立即放弃它。

你不能修改`a`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T21:56:21.223

这完全取决于是什么`something`。

如果您发布了 A 类的代码，则更容易解释为什么可以更改`something`.

一般情况下，您不能修改`const A&`. 但...

*   `something`可以是静态的，那么 const 无关紧要，因为在`something`技术上不属于.`a``Afunction`
*   `something`可以声明`mutable`。有时拥有一个即使对象是 const 也可以更改的成员变量是有益的。例如，引用计数。
*   `something`可能是完全不同的东西，具有奇怪的语义。（正如 Zyx 2000 指出的那样）。

# facebook - 指定针对操作的 oCPM 出价（非现场转化）

> ID：15752153
> 
> 赞同：1
> 
> 时间：2013-04-01T21:24:19.183
> 
> 标签：facebook, optimization, action, ads, bids

我的问题是关于如何将优化 CPM 出价的广告系列集和用于场外像素转换的转换规范结合起来，以产生更多的场外转换。

我的第二个问题是如何正确设置最高 CPM 成本以接收专门针对这些操作的展示。

我与 facebook、开发人员、同事来来回回，并花了几个小时在网上研究这个问题。根据 facebook 开发人员指南，似乎可以使用 API 以相当简单的方式处理上述请求。但是，我试图弄清楚如何使用 Facebook Ads 界面或 Power Editor 设置这些值。我遇到的问题是，即使我已将广告设置为 oCPM 设置，即使我已请求它跟踪并专注于生成场外转化，我也无法编辑指定展示费用的字段。无论我在电源编辑器中做什么，操作框都保持灰色并且无法编辑。

谁能让我知道他们是否有此问题的经验并可能有解决方案？

## 谢谢，

# python - 如何将行保留在输入提示的末尾？

> ID：15752160
> 
> 赞同：0
> 
> 时间：2013-04-01T21:24:38.887
> 
> 标签：python, input, prompt

我很好奇如何在所问问题的末尾保留行输入。我的教授说我可以`end = ""`在第一个参数之后添加参数，但我得到了一个意想不到的关键字参数。

TypeError: input() 得到了一个意外的关键字参数“end”

这是我试图让“光标输入”停留在问题末尾而不是移回行首的代码。

```
 str1 = input("Please enter letters to encrypt:", end = "")
    num = int(input("Enter a numerical value:", end = "")) 
```

任何输入将不胜感激。没有双关语的意思:)

# mongodb - 期望多个值时如何使用 find ？

> ID：15752166
> 
> 赞同：1
> 
> 时间：2013-04-01T21:25:10.347
> 
> 标签：mongodb

我有一个这样的集合：

```
{ emails: [ 
    { address: 'ex@example.com', valid: true }, 
    { address: 'test@example.com', valid: false }
          ]
} 
```

我将如何进行 find() 查询，以便获得具有特定“地址”的所有文档？（我不关心“有效”值或任何其他字段，只要 emails[*].address 相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T21:46:55.153

在查询对象中使用点表示法：

```
db.coll.find({'emails.address': 'ex@example.com'}) 
```

# php - MySQL子查询最大员工小时数

> ID：15752167
> 
> 赞同：0
> 
> 时间：2013-04-01T21:25:16.440
> 
> 标签：php, mysql, subquery

我有一个名为“小时”的数据库表，其中包含以下字段： `"employee_id" (INT), "time_on" (DATETIME), and "time_off" (DATETIME)`. 我想看看哪个员工在一个月内记录的时间最多。

我在想我需要一个子查询，但我对 MySQL 不是很好，我无法围绕我需要的查询。我想选择本月的所有行：

```
"... MONTH(time_on) = ".$this_month_object->format('m')."... " 
```

然后使用这些行，我想选择使用类似以下内容的最高秒数的“employee_id”字段：

```
SUM(time_to_sec(TIMEDIFF(time_off, time_on))) 
```

过去的几个小时都被证明是徒劳的，我需要一些新的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T21:27:56.743

像这样的东西？

```
SELECT employee_id, SUM(TIMEDIFF(time_off, time_on)) AS diff
FROM tbl
WHERE YEAR(time_on) = 2013
    AND MONTH(time_on) = 3
GROUP BY employee_id 
```

[查看演示](http://sqlfiddle.com/#!2/9b5ae/5)

# c++ - Qt：遍历所有顶级窗口

> ID：15752169
> 
> 赞同：0
> 
> 时间：2013-04-01T21:25:26.640
> 
> 标签：c++, qt, pyqt

如何遍历`parent==0`我的 Qt4 应用程序中的所有顶级窗口（即具有 的小部件）？

（C++ 和 Python 示例都是可以接受的。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:59:12.430

使用`QApplication::topLevelWidgets()`. 文档[在这里](https://qt-project.org/doc/qt-4.8/qapplication.html#topLevelWidgets)。

# javascript - BufferGeometry 面向材质

> ID：15752173
> 
> 赞同：1
> 
> 时间：2013-04-01T21:25:40.657
> 
> 标签：javascript, three.js, buffer-geometry

使用 BufferGeometry 时，如何将材质分配给面？

是否有类似数组的东西包含相同的信息`Face#materialIndex`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:27:18.787

`BufferGeometry`不支持`MeshFaceMaterial`。

# javascript - 不能在 underscore.js 模板中嵌套 _.each 语句吗？

> ID：15752174
> 
> 赞同：0
> 
> 时间：2013-04-01T21:25:41.250
> 
> 标签：javascript, underscore.js

这是我的模板。很简单，但由于某种原因，_.each 语句正在我的表上方输出。

```
 <script type="text/template" id="SearchResultsTmp">
        <table style="width:100%">
        <tbody>
        <%_.each(m.data, function(o){ %>
            <tr>
            <span class="ResultValueHeader"><b><%= o[m.settings.FieldName] %></b></span>
            <br/>
            <%_.each(m.settings.ResultFields, function(rf){ %>
            <span class="ResultField"><%= rf.Alias %>:</span>
            <p class="cs_ResultFieldValue"><%= o[rf.FieldName] %></p>
            <br/>
            <% }) %>
            </tr>
        <% }) %>
        </tbody>
        </table>
    </script> 
```

示例：http: [//jsfiddle.net/UFn37/](http://jsfiddle.net/UFn37/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T22:03:42.087

似乎是不使用 tr 内的任何 td 来包装内容的直接后果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T22:13:27.657

这是你想要输出的吗？见[http://jsfiddle.net/GspJx/](http://jsfiddle.net/GspJx/)

问题在于您用于表格的 HTML 标记。您需要为您`<tr>`的.`<td>``<table>`

# jquery - SlabText 不渲染到全宽

> ID：15752176
> 
> 赞同：2
> 
> 时间：2013-04-01T21:25:42.987
> 
> 标签：jquery, jquery-plugins

我在使用 jQuery SlabText 插件时遇到了一些奇怪的问题。当页面加载时，插件会触发，但文本没有按预期跨越其容器的宽度。

但是，如果我`.slabText`再次调用（例如在悬停事件上），它会使 ttext 呈现得非常好。这是一张显示正在发生的事情的图像：

![问题说明](https://i.stack.imgur.com/MxSB3.jpg)

当我调用插件开始时，我没有做任何特别的事情：

但是我正在运行它的网站确实运行了相当多的 JS（但没有错误）。**任何人都可以提出可能导致此**问题的原因，以便我可以解决问题吗？！提前致谢。

[如果需要，我可以提供更多信息。]

您应该能够在我的“即将推出”页面上看到这种情况：http: [//ponderacreative.com/](http://ponderacreative.com/)

# javascript - 使用 Yeoman 构建第二个 javascript 文件

> ID：15752177
> 
> 赞同：4
> 
> 时间：2013-04-01T21:25:50.423
> 
> 标签：javascript, yeoman, gruntjs

我正在尝试在我的项目中使用 yeoman，但在尝试使用 Grunt 构建它时遇到了问题：

我有一个 application.js，它是应用程序使用的主文件，使用 require.js。运行 Grunt build 后，会在 dist 文件夹中创建 js 文件，并将其连接并缩小。

问题是当我尝试创建第二个 javascript 文件（例如 application2.js）以在应用程序的另一个页面中使用时。运行 Grunt 后，文件已创建但为空。我尝试使用与排除某些 js 或 require.js 问题的 js 相同的 js，但结果相同。

我唯一能想到的是，Grunt 中的某处被配置为仅处理该文件，实际上在运行时我可以在控制台中看到以下内容：

```
Found a block:
    <!-- build:js scripts/application.js -->
    <script data-main="scripts/application" src="components/requirejs/require.js"></script>
    <!-- endbuild -->
Updating config with the following assets:
    - dist/scripts/application.js

Found a block:
    <!-- build:js scripts/application2.js -->
    <script data-main="scripts/application2" src="components/requirejs/require.js"></script>
    <!-- endbuild -->
Updating config with the following assets:
    - dist/scripts/application2.js

Configuration is now:

  cssmin:
  { dist: {} }

  concat:
  { 'dist/scripts/application.js': [ 'dist/scripts/application.js' ],
  'dist/scripts/vendor/modernizr.js': [ 'app/components/modernizr/modernizr.js' ],
  'dist/scripts/application2.js': [ 'dist/scripts/application2.js' ] }

  uglify:
  { 'dist/scripts/application.js': 'dist/scripts/application.js',
  'dist/components/requirejs/require.js': 'app/components/requirejs/require.js',
  'dist/scripts/vendor/modernizr.js': 'dist/scripts/vendor/modernizr.js',
  'dist/scripts/application2.js': 'dist/scripts/application2.js' }

  requirejs:
  { dist:
   { options:
      { baseUrl: 'app/scripts',
        optimize: 'none',
        preserveLicenseComments: false,
        useStrict: true,
        wrap: true,
        uglify2: {},
        name: 'application',
        out: 'dist/scripts/application.js',
        mainConfigFile: 'app/scripts/application.js' } } }

Running "requirejs:dist" (requirejs) task
>> RequireJS optimizer finished
Uncompressed size: 1361156 bytes.
Compressed size: 304370 bytes gzipped. 
```

Concat 和 Uglify 任务引用第二个 javascript 文件，但需要 js。我尝试更改属性“mainConfigFile”，以包括两者，但它不断被覆盖......

有任何想法吗？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T00:02:04.873

我首先很好奇您为什么要在 yeoman 系统中定义多个应用程序文件？这是针对多个 HTML 页面的，我猜？或者你有两个：

```
<script data-main="..." src="components/requirejs/require.js"></script> 
```

在单个 HTML 文件中？

至于对此的修复： mainConfigFile 是使用 'out' 参数生成的，因此在这里设置它不起作用。

您的 requirejs 部分需要每个文件的“dist”部分。他们还需要手动指定名称和输出。不确定这是错误还是预期行为。

```
requirejs: {
   dist1: {
      options: {
         name: 'application', out: 'dist/scripts/application.js',
         ...}
   },
   dist2: {
      options: {
         name: 'application2', out: 'dist/scripts/application2.js',
         ... 
```

您还需要将两个单独的 HTML 文件添加到 useminPrepare，但看起来您已经这样做了，或者您正在一个 HTML 文件中引用 application 和 application2（不确定一个 html 文件中的两个 requirejs 配置的后果是什么） .

```
 useminPrepare: {
        html: ['<%= yeoman.app %>/index.html','<%= yeoman.app %>/index2.html'],
        options: {
            dest: '<%= yeoman.dist %>'
        }
    }, 
```

为了后代，我还将这两个脚本添加到 bower 配置中，但我不能 100% 确定它是否重要：

```
 bower: {
        all: {
            rjsConfig: ['<%= yeoman.app %>/scripts/application.js','<%= yeoman.app %>/scripts/application2.js']
        }
    } 
```

这是我生成的配置输出： http: [//pastie.org/7321492](http://pastie.org/7321492)

# java - 如何从数组中获取唯一项？

> ID：15752180
> 
> 赞同：14
> 
> 时间：2013-04-01T21:26:26.583
> 
> 标签：java, arrays

我是 Java 初学者，我发现了一些关于这个主题的主题，但没有一个对我有用。我有一个这样的数组：

```
int[] numbers = {1, 1, 2, 1, 3, 4, 5}; 
```

我需要得到这个输出：

```
1, 2, 3, 4, 5 
```

该数组中的每个项目只有一次。

但是如何获得呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-01T21:29:52.470

无需编写自己的算法的最简单的解决方案：

```
Integer[] numbers = {1, 1, 2, 1, 3, 4, 5};
Set<Integer> uniqKeys = new TreeSet<Integer>();
uniqKeys.addAll(Arrays.asList(numbers));
System.out.println("uniqKeys: " + uniqKeys); 
```

设置接口保证值的唯一性。TreeSet 还对这些值进行排序。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-01T21:27:56.717

您可以使用 a[`Set<Integer>`](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html)并节省大量时间，因为它包含独特的元素。如果不允许使用 Java 集合中的任何类，请对数组进行排序并计算唯一元素。您可以手动对数组进行排序或使用[`Arrays#sort`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28int%5b%5d%29).

我将发布`Set<Integer>`代码：

```
int[] numbers = {1, 1, 2, 1, 3, 4, 5};
Set<Integer> setUniqueNumbers = new LinkedHashSet<Integer>();
for(int x : numbers) {
    setUniqueNumbers.add(x);
}
for(Integer x : setUniqueNumbers) {
    System.out.println(x);
} 
```

请注意，我更喜欢[`LinkedHashSet`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html)用作 Set 实现，因为它维护元素插入的顺序。这意味着，如果您的数组是，`{2 , 1 , 2}`那么输出将是`2, 1`而不是`1, 2`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-07-17T13:32:11.020

在 Java 8 中：

```
 final int[] expected = { 1, 2, 3, 4, 5 };

    final int[] numbers = { 1, 1, 2, 1, 3, 4, 5 };

    final int[] distinct = Arrays.stream(numbers)
        .distinct()
        .toArray();

    Assert.assertArrayEquals(Arrays.toString(distinct), expected, distinct);

    final int[] unorderedNumbers = { 5, 1, 2, 1, 4, 3, 5 };

    final int[] distinctOrdered = Arrays.stream(unorderedNumbers)
        .sorted()
        .distinct()
        .toArray();

    Assert.assertArrayEquals(Arrays.toString(distinctOrdered), expected, distinctOrdered); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-04T21:13:12.233

```
//Running total of distinct integers found
int distinctIntegers = 0;

for (int j = 0; j < array.length; j++)
{
    //Get the next integer to check
    int thisInt = array[j];

    //Check if we've seen it before (by checking all array indexes below j)
    boolean seenThisIntBefore = false;
    for (int i = 0; i < j; i++)
    {
        if (thisInt == array[i])
        {
            seenThisIntBefore = true;
        }
    }

    //If we have not seen the integer before, increment the running total of distinct integers
    if (!seenThisIntBefore)
    {
        distinctIntegers++;
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-01T21:36:03.247

下面的代码将打印唯一的整数看看：

```
printUniqueInteger(new int[]{1, 1, 2, 1, 3, 4, 5});

static void printUniqueInteger(int array[]){
    HashMap<Integer, String> map = new HashMap();

    for(int i = 0; i < array.length; i++){
        map.put(array[i], "test");
    }

    for(Integer key : map.keySet()){
        System.out.println(key);
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-01T21:53:55.113

简单**散列**将比任何 Java 内置函数更*有效*和*更快：*

```
public class Main 
{
    static int HASH[];
    public static void main(String[] args) 
    {
        int[] numbers = {1, 1, 2, 1, 3, 4, 5};
        HASH=new int[100000];
        for(int i=0;i<numbers.length;i++)
        {
            if(HASH[numbers[i]]==0)
            {
                System.out.print(numbers[i]+",");
                HASH[numbers[i]]=1;
            }
        }

    }
} 
```

**时间复杂度**：O(N)，其中 N=numbers.length

**[演示](http://ideone.com/pnmWvq)**

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-06-09T00:58:39.840

```
public class Practice {
    public static void main(String[] args) {
        List<Integer> list = new LinkedList<>(Arrays.asList(3,7,3,-1,2,3,7,2,15,15));
        countUnique(list);
}

public static void countUnique(List<Integer> list){
    Collections.sort(list);
    Set<Integer> uniqueNumbers = new HashSet<Integer>(list);
    System.out.println(uniqueNumbers.size());
} 
```

}

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-08-07T07:17:03.793

有一种更简单的方法可以获取不同的列表：

```
Integer[] intArray = {1,2,3,0,0,2,4,0,2,5,2};
List<Integer> intList = Arrays.asList(intArray);          //To List
intList = new ArrayList<>(new LinkedHashSet<>(intList));  //Distinct
Collections.sort(intList);                                //Optional Sort
intArray = intList.toArray(new Integer[0]);               //Back to array 
```

输出：

```
1 2 3 0 0 2 4 0 2 5 2   //Array
1 2 3 0 0 2 4 0 2 5 2   //List
1 2 3 0 4 5             //Distinct List
0 1 2 3 4 5             //Distinct Sorted List
0 1 2 3 4 5             //Distinct Sorted Array 
```

请参阅[jDoodle 示例](http://jdoodle.com/a/1rfr)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-02-06T18:49:12.940

在 JAVA8 中，您可以简单地使用

> 溪流（）

和

> 清楚的（）

获得独特的元素。

```
intArray = Arrays.stream(intArray).distinct().toArray(); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-01T22:13:54.000

You could do it like this:

```
 int[] numbers = {1, 1, 2, 1, 3, 4, 5};
    ArrayList<Integer> store = new ArrayList<Integer>(); // so the size can vary

    for (int n = 0; n < numbers.length; n++){
        if (!store.contains(numbers[n])){ // if numbers[n] is not in store, then add it
            store.add(numbers[n]);
        }
    }
    numbers = new int[store.size()];
    for (int n = 0; n < store.size(); n++){
        numbers[n] = store.get(n);
    } 
```

Integer and int can be (almost) used interchangeably. This piece of code takes your array "numbers" and changes it so that all duplicate numbers are lost. If you want to sort it, you can add `Collections.sort(store);` before `numbers = new int[store.size()]`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-04-04T21:06:23.303

我不知道你是否已经解决了你的问题，但我的代码是：

```
 int[] numbers = {1, 1, 2, 1, 3, 4, 5};
    int x = numbers.length;
    int[] unique = new int[x];
    int p = 0;
    for(int i = 0; i < x; i++)
    {
        int temp = numbers[i];
        int b = 0;
        for(int y = 0; y < x; y++)
        {
            if(unique[y] != temp)
            {
               b++;
            }
        }
        if(b == x)
        {
            unique[p] = temp;
            p++;
        }
    }
    for(int a = 0; a < p; a++)
    {
        System.out.print(unique[a]);
        if(a < p-1)
        {
            System.out.print(", ");
        }
    } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-04-19T10:03:49.467

这是我使用计数排序的一段代码（部分）

输出是由唯一元素组成的排序数组

```
 void findUniqueElementsInArray(int arr[]) {
    int[] count = new int[256];
    int outputArrayLength = 0;
    for (int i = 0; i < arr.length; i++) {
        if (count[arr[i]] < 1) {
            count[arr[i]] = count[arr[i]] + 1;
            outputArrayLength++;
        }
    }
    for (int i = 1; i < 256; i++) {
        count[i] = count[i] + count[i - 1];
    }
    int[] sortedArray = new int[outputArrayLength];
    for (int i = 0; i < arr.length; i++) {
        sortedArray[count[arr[i]] - 1] = arr[i];
    }
    for (int i = 0; i < sortedArray.length; i++) {
        System.out.println(sortedArray[i]);
    }
} 
```

参考 - 在尝试解决[HackerEarth 的问题时发现了这个解决方案](https://www.hackerearth.com/practice/algorithms/sorting/counting-sort/practice-problems/algorithm/shil-and-birthday-present/)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-06-05T17:42:24.913

要找出唯一数据：

```
public class Uniquedata 
 {
 public static void main(String[] args) 
  {
int c=0;

String s1[]={"hello","hi","j2ee","j2ee","sql","jdbc","hello","jdbc","hybernet","j2ee","hello","hello","hybernet"};

for(int i=0;i<s1.length;i++)
{
    for(int j=i+1;j<s1.length;j++)
    {
    if(s1[i]==(s1[j]) )
    {
        c++;
        s1[j]="";
    }}
        if(c==0)
        {
            System.out.println(s1[i]);
        }
            else
            {
                s1[i]="";
            c=0;    
            }
        }
    }
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-04-30T10:36:10.750

如果您是 Java 程序员，我建议您使用它。它会起作用的。

```
public class DistinctElementsInArray {

//Print all distinct elements in a given array without any duplication

    public static void printDistinct(int arr[], int n) {

        // Pick all elements one by one
        for (int i = 0; i < n; i++) {

            // Check if the picked element is already existed
            int j;
            for (j = 0; j < i; j++)
                if (arr[i] == arr[j])
                    break;

            // If not printed earlier, then print it
            if (i == j)
                System.out.print(arr[i] + " ");
        }
    }

    public static void main(String[] args) {
        int array[] = { 4, 5, 9, 5, 4, 6, 6, 5, 4, 10, 6, 4, 5, 3, 8, 4, 8, 3 };
        // 4 - 5 5 - 4 9 - 1 6 - 3 10 - 1 3 - 2 8 - 2

        int arrayLength = array.length;
        printDistinct(array, arrayLength);

    }
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-06-05T17:36:30.570

```
String s1[]=  {"hello","hi","j2ee","j2ee","sql","jdbc","hello","jdbc","hybernet","j2ee"};

int c=0;

for(int i=0;i<s1.length;i++)
{
    for(int j=i+1;j<s1.length;j++)
    {
    if(s1[i]==(s1[j]) )
    {
        c++;
    }
    }
        if(c==0)
         {
            System.out.println(s1[i]);
         }
            else
             {
            c=0;
              } 
            }
         }
      } 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-01-10T19:50:32.370

您可以使用

```
Object[] array = new HashSet<>(Arrays.asList(numbers)).toArray(); 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2018-03-23T17:45:45.930

```
public class DistinctArray {

    public static void main(String[] args) {
     int num[]={1,2,5,4,1,2,3,5};
     for(int i =0;i<num.length;i++)
     {
         boolean isDistinct=false;
         for(int j=0;j<i;j++)
         {
             if(num[j]==num[i])
             {
                 isDistinct=true;
                 break;
             }
         }
         if(!isDistinct)
         {
             System.out.print(num[i]+" ");
         }
     }
    }

} 
```

# c# - 如何将 C# 对象序列化为 json，使其看起来像“[”starts-with”、“$key”、“user/john/”]”？

> ID：15752181
> 
> 赞同：1
> 
> 时间：2013-04-01T21:26:28.847
> 
> 标签：c#, json, json.net

我正在尝试在 C# 中创建一个可以序列化为亚马逊 S3 所需的 json 文档的视图模型。文档[在这里](http://docs.aws.amazon.com/AmazonS3/latest/dev/HTTPPOSTForms.html#HTTPPOSTConstructPolicy)。其中一个属性看起来像这样，

```
 ["starts-with", "$key", "user/john/"] 
```

C# 对象会是什么样子，所以当它被序列化时它会像这样出来？文档的其余部分如下所示。

```
 { "expiration": "2007-12-01T12:00:00.000Z",

  "conditions": [

    {"acl": "public-read" },

    {"bucket": "johnsmith" },

    ["starts-with", "$key", "user/john/"],

  ]

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T21:29:40.160

只需使用字符串数组

```
string[] data = new string[] { "starts-with", "$key", "user/john/" }; 
```

第二部分的对象结构类似于

```
public class S3Expiration {
    DateTime expiration { get; set; }
    object[] conditions { get; set; }
} 
```

并填充它你会写类似

```
var expiration = new S3Expiration {
    expiration = DateTime.Now,
    conditions = new object[] {
        new { acl = "public-read" },
        new { bucket = "johnsmith" },
        new string[] { "starts-with", "$key", "user/john/" }
    }
}; 
```

# macos - 配置 Mac OS X AudioUnit 以提供 SignedInteger 示例

> ID：15752184
> 
> 赞同：1
> 
> 时间：2013-04-01T21:26:39.663
> 
> 标签：macos, signal-processing, core-audio, audiounit

我正在编写一个 Mac OS X 应用程序来通过带有回声消除的麦克风捕获一些音频。我正在创建一个 VoiceProcessingIO 类型的 AudioUnit。我想将音频输出为有符号整数线性 PCM。但是，当我指出我希望输出样本格式记录为 SignedInteger 时，我收到“不支持的格式”错误。

如何配置 AudioUnit 以有符号整数格式输出数据？这是我现在如何配置它。如果我尝试用 kAudioFormatFlagIsSignedInteger 替换 kAudioFormatFlagIsFloat，那么我会收到一个错误:(

```
AudioComponentDescription desc;
desc.componentType = kAudioUnitType_Output;
desc.componentSubType = kAudioUnitSubType_VoiceProcessingIO;
desc.componentManufacturer = kAudioUnitManufacturer_Apple;
desc.componentFlags = 0;
desc.componentFlagsMask = 0;

AudioComponent comp = AudioComponentFindNext(NULL, &desc);

OSStatus status = AudioComponentInstanceNew(comp, &_audioUnit); 
```

...

```
const int sampleSize = 2;
const int eight_bits_per_byte = 8;
AudioStreamBasicDescription streamFormat;
streamFormat.mSampleRate = 16000;
streamFormat.mFormatID = kAudioFormatLinearPCM;
streamFormat.mFormatFlags = kAudioFormatFlagIsSignedInteger | kAudioFormatFlagIsPacked;
streamFormat.mBytesPerPacket = sampleSize;
streamFormat.mFramesPerPacket = 1;
streamFormat.mBytesPerFrame = sampleSize;
streamFormat.mChannelsPerFrame = 1;
streamFormat.mBitsPerChannel = sampleSize * eight_bits_per_byte;

status = AudioUnitSetProperty(_audioUnit, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Output, 1, &streamFormat, sizeof(streamFormat)); 
```

// 状态 = UnsupportedFormatError

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T02:28:11.817

我决定我不能这样做。我使用 AudioConverter 类将浮点格式转换为有符号整数。从好的方面来说，AudioConverter 非常容易使用！

# php - 有 CSS 问题的 Opencart 网站

> ID：15752186
> 
> 赞同：1
> 
> 时间：2013-04-01T21:26:53.007
> 
> 标签：php, javascript, opencart, cloudflare

查看 chrome 控制台，我发现此警告：资源解释为样式表，但使用 MIME 类型文本/html 传输：“ [http://wisdomsurvival.com/min/mi6wgylumfwg6zzpozuwk5zporugk3lff5zwq33qobuxuyjpon2hs3dfonugkzlu/my6xg5dznrsxg2dfmv2c4y3tom/combined.css](http://wisdomsurvival.com/min/mi6wgylumfwg6zzpozuwk5zporugk3lff5zwq33qobuxuyjpon2hs3dfonugkzlu/my6xg5dznrsxg2dfmv2c4y3tom/combined.css) ”

在网络栏中，combined.css 似乎也是 text/html 而不是 text/css 像其他 css 文件

我不确定这是否是我的网站似乎无法正常加载的原因，或者是什么原因造成的。

智慧生存网

我只有基本知识，所以任何帮助或指导将不胜感激。

编辑：我禁用了修复 css 问题的此功能，但我注意到该站点的其他页面出现 404 错误。我启用了内置 SEO url 功能的 opencarts，但禁用并不能解决此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:46:04.990

该 URL 已被缩小（我认为是通过提高页面速度修改），您需要联系修改的作者以使其正确传输。迄今为止，这不是任何 OC 版本的标准功能

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-01T21:59:16.553

您需要从服务器发送有效的 HTML mime 类型
请参阅下面的答案链接
[Chrome 显示“资源解释为样式表但使用 MIME 类型 text/html 传输”](https://stackoverflow.com/questions/12641168/chrome-says-resource-interpreted-as-stylesheet-but-transferred-with-mime-type-t)

# c - ARM：链接寄存器和帧指针

> ID：15752188
> 
> 赞同：36
> 
> 时间：2013-04-01T21:26:58.603
> 
> 标签：c, arm

我试图了解链接寄存器和帧指针在 ARM 中是如何工作的。我去过几个网站，我想确认我的理解。

假设我有以下代码：

```
int foo(void)
{
    // ..
    bar();
    // (A)
    // ..
}

int bar(void)
{
    // (B)
    int b1;
    // ..
    // (C)
    baz();
    // (D)
}

int baz(void)
{
    // (E)
    int a;
    int b;
    // (F)
} 
```

我打电话给 foo()。链接寄存器是否包含点 (A) 处代码的地址，而帧指针包含点 (B) 处代码的地址？在声明了所有局部变量之后，堆栈指针可以位于 bar() 内的任何位置吗？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-04-01T22:00:50.003

一些寄存器调用约定依赖于[ABI](http://en.wikipedia.org/wiki/Application_binary_interface)（应用程序二进制接口）。在**APCS**`FP`标准中是必需的，而在较新的**AAPCS** (2003) 中则不需要。对于**AAPCS** (GCC 5.0+)，不一定**要**使用，但肯定可以；[调试信息](https://stackoverflow.com/questions/57451208/whats-the-structure-of-arm-extab-entry-in-armcc)使用堆栈和帧指针进行注释，用于堆栈跟踪和使用**AAPCS**展开代码。如果一个函数是，编译器真的不需要遵守任何约定。******`FP`****`static`**********

 ******通常所有 ARM 寄存器都是*通用*的。（`lr`链接寄存器，也就是 R14）和`pc`（程序计数器，也就是 R15）是特殊的，并且在指令集中供奉。你是正确的，`lr`将指向**A**。`pc`和`lr`是相关的。一个是“你在哪里”，另一个是“你在哪里”。它们是函数的**代码**方面。

通常，我们有`sp`（堆栈指针，R13）和`fp`（[帧指针](https://stackoverflow.com/questions/10928646/whats-the-equivalent-of-bp-register-frame-pointer-on-arm-processors)，R11）。这两者也有关系。这个 [Microsoft 布局](http://msdn.microsoft.com/en-us/library/ms253599%28v=vs.90%29.aspx)很好地描述了事物。*堆栈*用于在您的函数中存储临时数据或局部变量*。*`foo()`和, 中的任何变量`bar()`都存储在此处、*堆栈*或可用寄存器中。`fp`跟踪函数之间的变量。它是该函数的堆栈上的*框架*或图片窗口。*ABI*定义了这个*框架*的布局。通常情况下`lr`和其他寄存器在后台被编译器保存在这里以及之前的值`fp`。这将创建一个堆栈帧的*链接列表*，如果您愿意，您可以将其一直追溯到`main()`. 根是，它*指向*`fp`一个堆栈帧（如 a `struct`），其中一个变量`struct`是前一个`fp`。您可以按照列表进行，直到`fp`通常的最终结果`NULL`。

所以 the`sp`是堆栈所在的位置，而 the`fp`是堆栈所在的位置，很像`pc`and `lr`。每个旧的`lr`（链接寄存器）都存储在旧的`fp`（帧指针）中。`sp`和`fp`是函数的数据**方面**。

你的**B**点是主动的`pc`和`sp`。**A**点实际上是`fp`and `lr`; 除非您调用另一个函数，然后编译器可能准备设置`fp`指向**B**中的数据。

以下是一些 ARM 汇编程序，可以演示这一切是如何工作的。这将根据编译器的优化方式而有所不同，但它应该给出一个想法，

```
; Prologue - setup
mov     ip, sp                 ; get a copy of sp.
stmdb   sp!, {fp, ip, lr, pc}  ; Save the frame on the stack. ^(See Addendum)
sub     fp, ip, #4             ; Set the new frame pointer.
    ...
; Maybe other functions called here.

; Older caller return `lr` stored in stack frame.
bl      baz
    ...
; Epilogue - return
ldm     sp, {fp, sp, lr}       ; restore stack, frame pointer and old link.
    ...                        ; maybe more stuff here.
bx      lr                     ; return. 
```

这就是看起来的`foo()`样子。如果不调用`bar()`，则编译器会进行*叶子优化*，不需要保存*帧*；只有`bx lr`是需要的。这很可能是您对网络示例感到困惑的原因。它并不总是一样的。

外卖应该是，

1.  `pc`和`lr`是相关的**代码**寄存器。一个是“你在哪里”，另一个是“你在哪里”。
2.  `sp`并且`fp`是相关的**本地数据**寄存器。
    一个是“本地数据在哪里”，另一个是“最后一个本地数据在哪里”。
3.  [与参数传递](https://stackoverflow.com/questions/261419/arm-to-c-calling-convention-registers-to-save)一起工作以创建*功能*机制。
4.  很难描述一个普遍的情况，因为我们希望编译器尽可能**快**，所以他们使用了所有可以使用的技巧。

这些概念对所有 CPU 和编译语言都是通用的，尽管细节可能会有所不同。*链接寄存器*、*帧指针*的使用是[函数序言](http://en.wikipedia.org/wiki/Function_prologue)和尾声的一部分，如果您了解所有内容，您就会知道*堆栈溢出*在 ARM 上的工作原理。

另请参阅：[ARM 调用约定](https://stackoverflow.com/questions/261419/arm-to-c-calling-convention-registers-to-save)。
                [MSDN ARM 堆栈文章](http://msdn.microsoft.com/en-us/library/aa448593.aspx)
                [剑桥大学 APCS 概述](http://www.cl.cam.ac.uk/~fms27/teaching/2001-02/arm-project/02-sort/apcs.txt)
                [ARM 堆栈跟踪博客](http://minghuasweblog.wordpress.com/2013/04/05/arm-cc-software-stack-back-trace/)
                [Apple ABI 链接](https://developer.apple.com/library/ios/documentation/Xcode/Conceptual/iPhoneOSABIReference/Articles/ARMv6FunctionCallingConventions.html)

基本的框架布局是，

*   fp[-0] saved `pc`，我们存储这个帧的地方。
*   fp[-1] saved `lr`，这个函数的返回地址。
*   fp[-2] previous `sp`，在这个函数*吃*栈之前。
*   fp[-3] previous `fp`，最后一个*堆栈帧*。
*   许多可选寄存器...

**ABI**可以使用其他值，但以上是大多数设置的典型值。上面的索引适用于 32 位值，因为所有 ARM 寄存器都是 32 位的。如果您以字节为中心，请乘以四。该帧也与至少四个字节对齐。

**附录：** 这不是汇编程序的错误；这是正常的。[ARM 生成的序言](https://stackoverflow.com/questions/32623597/arm-gcc-generated-functions-prolog)问题中有一个解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-14T17:24:34.577

免责声明：我认为这大致正确；请根据需要更正。

如本问答中的其他部分所述，请注意编译器可能不需要生成使用帧指针的 (ABI) 代码。调用堆栈上的帧通常需要放在那里的无用信息。

如果编译器选项调用“无帧”（伪选项标志），则编译器可以生成更小的代码，从而使调用堆栈数据更小。调用函数被编译为只在堆栈中存储需要的调用信息，被调用函数被编译为只从堆栈中弹出需要的调用信息。

这节省了执行时间和堆栈空间——但它使得在调用代码中向后追溯非常困难（我放弃了尝试......）

有关堆栈上调用信息的大小和形状的信息只有编译器知道，并且该信息在编译后被丢弃。******

# php - 为什么我不能在 PHP 中的按钮前添加空格

> ID：15752190
> 
> 赞同：1
> 
> 时间：2013-04-01T21:27:05.727
> 
> 标签：php, html

我试图在下拉后添加一些空间，但它不起作用......

**PHP**

```
<?php
$connect = mysql_connect("server","username","") or die("Error connecting to MYSQL");
mysql_select_db("database") or die("Error connecting to database");
$result = mysql_query("SELECT * FROM table ORDER BY column ASC");
"<select name='drpdwn'>";
while ($row = mysql_fetch_array($result)) {
     echo "<option value=" .$row['col1'] . ">".$row['col1'] ."</option>";
}
echo "<br/>";
echo "";
?>
<br/>
<input type="submit" id="thisSbmit" value="Delete Contact" onClick="chck()">&nbsp;&nbsp;<input type="button" id="cls" class="cls" value="Clear"> 
```

这是我添加`<br>`了两次和一次空白的代码，但它不起作用..

![请看这张图片](https://i.stack.imgur.com/qkCJj.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:30:39.003

你从来没有真正关闭`<select>`（用 a `</select>`）。

```
- echo "<br/>";
+ echo "</select><br/>"; 
```

[http://jsfiddle.net/LTXrd/](http://jsfiddle.net/LTXrd/)

与[http://jsfiddle.net/LTXrd/1/](http://jsfiddle.net/LTXrd/1/)

我确实觉得它有这种效果有点奇怪，但我想这是正确格式化 HTML 的好动机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:30:57.973

我可以看到一些问题：

*   您没有关闭`select`元素
*   `input`元素是内联元素，因此如果您想在它们周围添加空间，例如使用 css 边距，您应该将其更改为：`input { display: inline-block; }`

# python - 如何从我的拆分列表中提取第二组数据

> ID：15752191
> 
> 赞同：0
> 
> 时间：2013-04-01T21:27:07.620
> 
> 标签：python, list

我正在尝试遍历此文本文件，拆分文本并将高温和低温的数据提取到 2 个单独的列表中：我有以下代码，它给了我高温，但我坚持我所缺少的得到低温。有人可以解释我在这里出错的地方吗？提前感谢您的帮助。

```
high =[]
low =[]
line =''

inFile = open('julyTemps.txt')

for line in inFile:
    fields = line.split(' ')

with open ('julyTemps.txt') as inFile:
    if fields != 3 or 'Boston' == fields[0] or 'Day' == fields[0]:
        high = (line.split(' ')[1:2] for line in inFile)
        high =[item[0] for item in high if item]
        high = ','.join([i for i in high if i.isdigit()])
with open ('julyTemps.txt') as inFile:
    if fields != 3 or 'Boston' == fields[0] or 'Day' == fields[0]:
        low = (line.split(' ')[2:2] for line in inFile)
        low = [item[0] for item in low if item]
        low =','.join([i for i in low if i.isdigit()]) 
```

txt文件：

```
Boston July Temperatures
-------------------------

Day High Low
------------

1 91 70
2 84 69
3 86 68
4 84 68
5 83 70
6 80 68
7 86 73
8 89 71
9 84 67
10 83 65
11 80 66
12 86 63
13 90 69
14 91 72
15 91 72 
16 88 72
17 97 76
18 89 70
19 74 66
20 71 64
21 74 61
22 84 61
23 86 66
24 91 68
25 83 65
26 84 66
27 79 64
28 72 63
29 73 64
30 81 63
31 73 63 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:33:03.183

只需将文件合二为一，将低点和高点添加到两个单独的列表中：

```
lows, highs = [], []
with open ('julyTemps.txt') as inFile:
    for line in inFile:
        try:
            day, low, high = map(int, line.split())
        except ValueError:
            continue  # no temps on this line
        lows.append(low)
        highs.append(high) 
```

我们只查看具有 3 个整数值的行，其余的会抛出 a `ValueError`，因为该行没有 3 个值，或者因为存在非整数值。这些行被忽略。

# php - 将 PNG 放在 PNG 上并使用 PHP 保持透明度

> ID：15752192
> 
> 赞同：0
> 
> 时间：2013-04-01T21:27:08.253
> 
> 标签：php, image, png

假设我有一个 PNG 图像作为名为 background.png 的背景。然后我想在 background.png 上添加另一个 PNG 图像（other.png），但是我想保持 other.png 的透明度。但是，other.png 需要位于 background.png 上方的特定 x 和 y 坐标处。这可以用PHP吗？

# python - 使用python pandas的kde密度图

> ID：15752197
> 
> 赞同：4
> 
> 时间：2013-04-01T21:27:36.543
> 
> 标签：python, pandas

我在ipython中关注“用于数据分析的python”，尝试使用pandas（第8章，直方图和密度图）做一个kde图。代码很简单：

```
import numpy as np
import pandas as pd
ser = pd.Series(np.random.randn(1000))
ser.plot(kind='kde') 
```

错误是

```
UnboundLocalError:local variable 'klass' referenced before assignment 
```

我四处搜索，我认为这是一个局部和全局变量问题，可能是由于导入模块的方式错误。任何人都可以提出任何想法？

# gwt - GWT RPC——发送非常大的二进制数据的影响？

> ID：15752198
> 
> 赞同：0
> 
> 时间：2013-04-01T21:27:38.247
> 
> 标签：gwt, gwt-rpc

假设一个标准的 Jetty servlet 容器，通过 RPC 发送大量二进制（字符串）数据的效果（在服务器或客户端上）是什么？

具体来说，由于 GWT RPC 似乎不支持流式传输，我担心可能会发生两件事：

1.  由于二进制数据正在加载到 RPC 类的内存中，因此服务器端的内存消耗很大。
2.  慢速序列化或反序列化。

假设这些都是真的，我有什么选择？我正在尝试构建一个统一的 API，因此我宁愿不必告诉开发人员：“哦，在这种情况下，手动创建一个 REST 请求来获取数据”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:43:21.373

如果您需要传输大量的二进制数据，GWT-RPC 是一个糟糕的选择（您列出的所有问题都是正确的）。但是如果你想在客户端有一个统一的 API，而不告诉开发人员简单地使用原始 HTTP 来获取数据，你就必须为你的二进制服务提供客户端实现。

# mysql - 远程 MySQL 连接不起作用

> ID：15752199
> 
> 赞同：0
> 
> 时间：2013-04-01T21:27:39.073
> 
> 标签：mysql, remote-connection

我正在尝试远程访问我网站的 MySQL 数据库。我已按照说明设置 MySQL Workbench 的参数，并且我有用户名、密码和所有这些。我的问题是，在我允许我的 IP 访问它之后，当我尝试连接它时说

> 无法使用用户***** *****连接到位于 173.254.28.62:3306 的 MySQL *** 无法连接到“173.254.28.61”上的 MySQL 服务器（10060）

我使用 CMD ping 我的网站地址 ( [http://www.motivateddreams.com/](http://www.motivateddreams.com/) ) 获得的 IP 173.254.28.61。当我尝试在浏览器中导航到该 IP 时，它显示“此地址未配置网站”。虽然它的东西，我知道它存在。我在 CMD 中输入 ping 激励的梦想.com，这就是它给我的。有任何想法吗？有没有办法获取网站的正确 IP 地址？或者这是一个不同的问题？

PS如果您需要更多信息，请询问，不要只是投票否决这个问题。

**编辑**

感谢大家的帮助：DI 在主持人的帮助下成功了，但无论如何我都会选择一个最佳答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:48:51.877

如果我没记错的话，确定网站IP的ping测试并不是100%防火的。可能还有其他同名的计算机，因此 PING 返回的 IP 只是列表中的第一个，这可能不是与您想要的网站对应的那个。至少，这就是为什么当同样的问题发生时我被教导的原因。

我刚刚使用这个[网站](http://www.selfseo.com/find_ip_address_of_a_website.php)找到了 IP 地址，我得到了这个：173.254.28.61

也许问题是IP地址而不是您的设置。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T21:36:11.957

用 32 字节的数据 ping 动机的梦想.com [173.254.28.61]：

来自 173.254.28.61 的回复：字节=32 时间=187ms TTL=50

来自 173.254.28.61 的回复：字节=32 时间=178ms TTL=50

来自 173.254.28.61 的回复：字节=32 时间=182ms TTL=50

:D

但除此之外，我在这里猜测是防火墙问题。是否有允许在您的工作台/cpanel/任何站点中使用特定主机的选项？

我记得我的一个虚拟主机允许我为 mysql 设置一个远程主机。

而且我认为您已授予 'user'@'yourhost' 权限吗？

# c# - 如何使用 MSBuild 部署 Windows 服务？

> ID：15752200
> 
> 赞同：3
> 
> 时间：2013-04-01T21:27:39.607
> 
> 标签：c#, msbuild, windows-services, continuous-integration

我使用 Visual Studio 创建了一个 Windows 服务项目，需要使用 MSBuild 将其安装到远程计算机上。我查看了很多关于部署 Windows 服务的好方法的资源。大多数答案是使用我认为可以替代的 PowerShell 脚本。

任何人都可以为我提供良好的资源。关于如何部署它的任何想法。在企业环境中部署（.exe）文件存在很多安全问题，所以我担心选择任何替代方案。

我将非常感谢任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-16T09:11:52.353

您可以使用 MSBuild 示例进行安装：

```
<MSBuild.ExtensionPack.Computer.WindowsService TaskAction="Install" ServiceName="SomeWindowsService" User="UserLocal" Password="PassLocal" ServicePath="\\RemoteComp2\PathForYourService\WindowsService.exe" RemoteUser="UserRemoteComp2" RemoteUserPassword="PassRemoteComp2" MachineName="RemoteComp2"/> 
```

有关更多信息，请查看链接[http://www.msbuildextensionpack.com/help/4.0.5.0/html/258a18b7-2cf7-330b-e6fe-8bc45db381b9.htm](http://www.msbuildextensionpack.com/help/4.0.5.0/html/258a18b7-2cf7-330b-e6fe-8bc45db381b9.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T21:47:39.917

您可以使用 Exec Task ( [http://msdn.microsoft.com/en-us/library/x8zx72cd.aspx](http://msdn.microsoft.com/en-us/library/x8zx72cd.aspx) ) 查看链接。

使用 powershell 远程处理肯定是另一种选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T21:35:36.323

要将服务安装到远程计算机，您可以尝试可以控制 Windows 服务的 ServiceController 任务。从[这里](http://weblogs.asp.net/scottgu/archive/2006/02/12/438061.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T13:36:52.357

根据您的要求和部署方案查看 PSExec ( [http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx )。](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)它与 MSBuild Exec 任务相结合，将允许您远程安装该服务。

# visual-studio - 创建发布分支时转换 web.config 文件

> ID：15752206
> 
> 赞同：0
> 
> 时间：2013-04-01T21:27:57.977
> 
> 标签：visual-studio, visual-studio-2012, tfs, web-config

我们基本上有两条独立的开发路径：

1.  本地→开发→质量检查→生产
2.  本地发布 → 开发发布 → QA 发布 → 产品

第一条路径使用我们的主线/主干，第二条路径用于当我们剪切发布分支并需要在发布之间进行错误修复时。

我们对 Dev、QA、Prod、Dev-Release 和 QA-Release 使用配置转换，这一切都很好。但是，每次我们剪切发布分支后，我们都必须手动更改 Local-Release 环境的配置文件（例如将连接字符串从使用 LocalDB 更改为 LocalReleaseDB 等）。

如果我们可以使用另一个转换文件自动执行此操作，那将是理想的，但我们不会在任何地方发布。有什么技巧可以解决这个问题吗？我们可以在运行时执行此操作，还是在创建分支后运行一个 powershell、批处理文件或其他东西？其他人如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:08:55.953

我相信这[`SlowCheetah`](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)会给你你所需要的。

取自`SlowCheetah`网站：

> 此包允许您在 Visual Studio 中按 F5 时自动转换您的 app.config（或任何文件）。您可以根据构建配置进行不同的转换。这将使您能够轻松地为调试与发布设置不同的应用程序设置、连接字符串等。如果您想转换其他文件，您也可以这样做。

我从未在 TFS 构建场景中尝试过这个，但只要`SlowCheetah`安装在构建服务器上，我想它就可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:05:33.593

我相信我在这里找到了一个可行的解决方案：http: [//kfigy.blogspot.com/2010/03/making-visual-studio-2010-webconfig.html](http://kfigy.blogspot.com/2010/03/making-visual-studio-2010-webconfig.html)

他正在使用这种方法来允许多个开发人员各自拥有自己的配置设置，但它也可以用于每个分支都有配置设置。

# php - 如何从滑块“平滑 div 滚动”上的帖子加载图像

> ID：15752209
> 
> 赞同：0
> 
> 时间：2013-04-01T21:28:02.030
> 
> 标签：php, jquery, wordpress, plugins, timthumb

我想使用“Smooth Div Scroll”滑块[滑块网站](https://stackoverflow.com/users/2101076/robert-lee)

在我的自定义 Wordpress 主题中，我已经有一个滑块，但我的问题是我不需要像我在堆栈溢出的其他帖子中发现的那样只加载图像，而是必须从一个类别中加载图像wordpress 中的帖子。

这是我的网站[Diario Metropolis](http://diariometropolis.com.ve/)

我怎样才能做到这一点？我目前正在使用“简单滑块”，其参数存储在 .php 文件中。

这是在我的实际滑块上加载内容的代码（简单滑块）

在 index.php 上

```
<?php include (TEMPLATEPATH . '/slide.php'); ?> 
```

在 Slide.php 上

```
<?php $slide = get_option('repo_slide_cat'); `$count = get_option('repo_slide_count');
$slide_query = new WP_Query( 'category_name='.$slide.'&posts_per_page='.$count.'' );
while ( $slide_query->have_posts() ) : $slide_query->the_post();
?> 
```

还有经典的 timthumb 脚本

```
<?php if ( has_post_thumbnail() ) { ?>
<a href="<?php the_permalink() ?>"><img class="slidimg" src="<?php bloginfo('stylesheet_directory'); ?>/timthumb.php?src=<?php get_image_url(); ?>&amp;h=350&amp;w=655&amp;zc=1" alt=""/></a> <?php } else { ?>
<a href="<?php the_permalink() ?>"><img class="slidimg" src="<?php bloginfo('template_directory'); ?>/images/dummy.png" alt="" /></a> 
```

我如何调整 smoothdivscroll 滑块来完成此行为？正如我之前所说，我不需要从指定文件夹加载图像，我需要从我网站中的帖子动态加载图像。

任何帮助都会有很大帮助，在此先感谢。

* * *

[Robert Lee](https://stackoverflow.com/users/2101076/robert-lee) 我的 wp-enqueue-script 代码如下：

```
<?php wp_enqueue_script('jquery'); 
wp_enqueue_script('superfish', get_stylesheet_directory_uri() .'/js/superfish.js');
wp_enqueue_script('jqui', get_stylesheet_directory_uri() .'/js/jquery-ui-1.8.23.custom.min');
wp_enqueue_script('slides', get_stylesheet_directory_uri() .'/js/jquery.smoothdivscroll-1.3.js'); 
wp_enqueue_script('slides', get_stylesheet_directory_uri() .'/js/jquery.kinetic'); 
wp_enqueue_script('slides', get_stylesheet_directory_uri() .'/js/jquery.mousewheel.min'); 
wp_enqueue_script('effects', get_stylesheet_directory_uri() .'/js/effects.js');
wp_enqueue_script('liscroll', get_stylesheet_directory_uri() .'/js/liscroll.js');
?> 
```

我修改了你告诉我的 effects.js，但仍然没有:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:59:28.533

尝试这个。

下载 Smooth Div Scroll 并将其添加到您的主题 JS

在主题的 Functions.php 中，将 js/slides.min.jquery.js 的入队脚本替换为您下载的 Smooth Div Scroll JS。

从那时起，您需要编辑 wp-content/themes/Metropolis_/js/effects.js

代替

```
jQuery('#slides').slides({

            play: 5000,
            crossfade: true,
            pause: 2500,
            hoverPause: true,
            animationStart: function(current){
                jQuery('.caption').animate({
                    bottom:-35
                },100);
                if (window.console && console.log) {
                    // example return of current slide number
                    console.log('animationStart on slide: ', current);
                };
            },
            animationComplete: function(current){
                jQuery('.caption').animate({
                    bottom:0
                },200);
                if (window.console && console.log) {
                    // example return of current slide number
                    console.log('animationComplete on slide: ', current);
                };
            },
            slidesLoaded: function() {
                jQuery('.caption').animate({
                    bottom:0
                },200);
            }
        }); 
```

有了这个

```
$("#slides").smoothDivScroll({
        mousewheelScrolling: "allDirections",
        manualContinuousScrolling: true,
        autoScrollingMode: "onStart"
    }); 
```

**更新：**

您需要将所有图像、JS 和 CSS **上传到您的主题文件夹。**

**再次更新我的答案：**

在您的 functions.php 中，您拥有或在任何地方将您的脚本排入队列

```
wp_enqueue_style('smoothdivcss', get_stylesheet_directory_uri() .'/css/smoothDivScroll.css');
wp_enqueue_script('jquery'); 
wp_enqueue_script('superfish', get_stylesheet_directory_uri() .'/js/superfish.js');
wp_enqueue_script('jqui', get_stylesheet_directory_uri() .'/js/jquery-ui-1.8.23.custom.min.js');
wp_enqueue_script('smoothdivscroll', get_stylesheet_directory_uri() .'/js/jquery.smoothdivscroll-1.3.js'); 
wp_enqueue_script('kinetic', get_stylesheet_directory_uri() .'/js/jquery.kinetic.js'); 
wp_enqueue_script('mousewheel', get_stylesheet_directory_uri() .'/js/jquery.mousewheel.min.js'); 
wp_enqueue_script('effects', get_stylesheet_directory_uri() .'/js/effects.js');
wp_enqueue_script('liscroll', get_stylesheet_directory_uri() .'/js/liscroll.js'); 
```

同样基于平滑的div滚动站点，它表明应该以这种方式列出图像

```
 <div id="slides">
        <img src="images/demo/field.jpg" alt="Field" id="field" />
        <img src="images/demo/gnome.jpg" alt="Gnome" id="gnome" />
        <img src="images/demo/pencils.jpg" alt="Pencils" id="pencils" />
</div> 
```

**根据您的 Pastbin 答案更新：**

除非您将 css 放在 js 文件夹中，否则第 9 行应该 /css 而不是 /js。

```
<link rel="stylesheet" type="text/css" href="<?php bloginfo('template_directory'); ?>/css/smoothDivScroll.css" media="screen" /> 
```

删除第 19 行

```
wp_enqueue_script('style', get_stylesheet_directory_uri() .'css/smoothDivScroll.css'); 
```

第 20、21 行您缺少 .js 扩展名

```
wp_enqueue_script('kinetic', get_stylesheet_directory_uri() .'/js/jquery.kinetic');
wp_enqueue_script('mousewheel', get_stylesheet_directory_uri() .'/js/jquery.mousewheel.min'); 
```

# git - Jenkins Git 更改子模块路径

> ID：15752212
> 
> 赞同：1
> 
> 时间：2013-04-01T21:28:09.133
> 
> 标签：git, jenkins, git-submodules

有没有办法在构建期间更改子模块路径以从不同的存储库中提取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:39:28.520

子模块 URL 是`.gitmodules`在您的 repo 中的文件中设置的，因此您只需要修改该文件中的 URL。

[`git-config`](https://www.kernel.org/pub/software/scm/git/docs/git-config.html)接受一个`-f`指示配置文件的参数，您可以使用它来指定文件，而不是通常使用`.gitmodules`的普通文件`.git/config`或文件。`~/.gitconfig`使用此选项，您可以使用以下内容修改子模块 URL：

```
git config -f .gitmodules submodule.<submodule name>.url <new URL> 
```

或者，您可以手动将文件中子模块的 URL 修改为`.gitmodules`更改后的路径。在 Jenkins 中构建阶段之前的 shell 脚本阶段可以完成修改该文件，如果需要，您可以在`git checkout -- .`之后恢复原始 URL。

无论哪种方式，您都需要在`git submodule sync`之后运行以反映包含 repo 中的更改。

# java - 如果函数返回 true，不使用 JPanel 和 JFrame，我还能打开一个新窗口吗？否则，如何将 JPanel 或 JFrame 添加到此？

> ID：15752220
> 
> 赞同：0
> 
> 时间：2013-04-01T21:28:34.797
> 
> 标签：java, swing, jpanel, actionlistener, border-layout

所以这是一个窗口的构造函数

```
setLayout(new FlowLayout());
    username = new JTextField("Username");
    password = new JTextField("Password");
    loginlogo = new JLabel(logo6);
    login = new JButton("LOGIN");
    login.setActionCommand("connect");
    login.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent event) {
            //on clicking connect: the real meat of the log in page
            usernamestring = username.getText();
            passwordstring = password.getText();
            logindataurl = ("URL/aphpscript.php?u=" + username + "&p=" + password);
            try {
                userdatabase = new URL(logindataurl);
                in = new BufferedReader(new InputStreamReader(userdatabase.openStream()));
                checkusername = in.read();
                in.close();
            } catch (MalformedURLException e) {
                new error_messagebox("Malformed URL Exception", e.toString());
            } catch (IOException e) {
                new error_messagebox("Input/Output Exception reading url ", e.toString());
            }

        }
    });

    add(loginlogo, BorderLayout.NORTH);
    add(username,BorderLayout.EAST);
    add(password,BorderLayout.WEST);
    add(login,BorderLayout.SOUTH); 
```

这就是我在 main 中的称呼

```
login.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    login.setSize(500,350);
    login.setIconImage(logo3);
    login.setVisible(true); 
```

但主要是如果一个语句返回真我想进入下一个框，在这个阶段我意识到有JPanel和JFrame这样的东西，

如果有两种类型的容器，我真的不明白它们的用途，但我听说这是使用动作侦听器转到另一个窗口的方法，如果某些功能允许的话，我真的不明白面板和框架的存在不再，

有一个简单的解决方法吗？还是我必须对代码进行重大更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:40:36.510

JFrame 是一个保存 Java 应用程序的 Swing 组件。将其视为您计算机上出现的窗口。一个 JFrame 可以有一个菜单栏 (JMenuBar)。

JPanel 是一个 Swing 组件，它包含其他 Swing 组件，如标签 (JLabel)、文本输入字段 (JTextArea) 和按钮 (JButton)。

一个 JFrame 应该有一个主 JPanel。根据您希望如何安排 Swing 组件，您可能需要额外的 JPanel。

您的代码似乎正在组合一个登录名。您通常会使用 JDialog 来执行登录。

流程是这样的。

*   通过调用 SwingUtilities.invokeLater(Runnable) 启动 Swing GUI

*   定义您的 JFrame、JPanel(s) 和所有 Swing 组件。

*   显示 JFrame

*   显示登录 JDialog

*   如果凭据有效，则允许访问 GUI。

[Oracle Swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/)将帮助您理解 Swing。

# git - 重新定位所有未合并的提交

> ID：15752224
> 
> 赞同：2
> 
> 时间：2013-04-01T21:28:49.747
> 
> 标签：git, rebase, git-rebase

我经常发现自己愿意（以交互方式）重新设置我当前工作分支的所有未合并到 master 的提交。我该如何做到这一点？

首选仅基于 git 命令/参数的解决方案（我在带有 Bash 的 Linux 和带有 PowerShell 的 Windows 上都使用 git）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T21:41:52.457

`git rebase`选择未合并到您指定的目标分支中的提交，这样就可以满足您的需要。

```
git rebase -i master 
```

从您的其他答案推断，如果您想保留原始根，您可以执行以下操作，尽管如果您有任何来自 master 的交错合并，它可能会产生“有趣的”冲突。

```
git rebase -i $(git merge-base HEAD master) 
```

# java - Java'打印*变量*'

> ID：15752227
> 
> 赞同：-4
> 
> 时间：2013-04-01T21:28:52.863
> 
> 标签：java

所以，我刚参加了一个 CS 测试，其中一个问题是一个 for 循环，在它循环之后，它确实......

`print k;`

我认为仅使用“打印”来“打印”变量是不可能的。有人告诉我，是否可能，因为我的一个队友说这是可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T21:32:03.653

正如0A0D所说的可能是伪代码，在java中打印的正常方法是做一个

```
System.out.print(variable); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T21:32:01.230

对我来说，这看起来像伪代码。这在考试中很常见。请务必认清伪代码和 java 代码之间的区别。在 Java 中，方法需要括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T21:31:50.110

我确定这是伪代码。他们这样做是为了方便练习代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T21:32:12.220

```
System.out.print(k); 
```

我建议在问这些问题之前至少尝试谷歌或阅读 Java 的基本指南。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-01T21:31:16.867

在 java*代码*中，你不能只使用这个词`print`来打印一个变量，因为它不能被 java 识别。你必须使用`System.out.print`那种性质的东西来输出。

# php - 单击单选按钮时如何填充文本字段？

> ID：15752230
> 
> 赞同：0
> 
> 时间：2013-04-01T21:29:24.857
> 
> 标签：php, text, radio-button, echo

我正在创建一个网页，其中有两个 div（帐单详细信息和运输详细信息）。页面加载后，会自动显示帐单详细信息，并且运输详细信息保持为空。我包含了两个单选按钮，允许用户选择运输细节是否与账单细节相同。如果用户从单选按钮中选择是，那么相同的详细信息应显示在运输详细信息中。注意：详细信息存储在数据库中是使用 php 来获取显示的数据

目前，我只尝试使用

```
<?php if(isset($_POST'[shipping'] == 'yes')){echo $fname} ?> 
```

在名字字段上只是为了看看它是否工作，但我似乎没有工作。

```
<div id="leftprofile">
    <form id="au" method="post" action="../../../coursework/coursework/scripts/checkout.php">
    <fieldset class="billing">
        <legend>Billing Details</legend><br />
        <label for="fname" class="reglabel">First Name:</label>
        <input required name="fname" type="text" id="fname" value="<?php echo $fname ?>"/><br />
        <label for="lname" class="reglabel">Last Name:</label>
        <input required name="lname" type="text" id="lname" value="<?php echo $lname ?>"/><br />
        <label for="address" class="reglabel">Address:</label>
        <input required name="address" id="address" type="text" value="<?php echo $address ?>"/><br />
        <label for="town" class="reglabel">Town:</label>
        <input required name="town" id="town" type="text" value="<?php echo $town ?>"/><br />
        <label for="postcode" class="reglabel">Post Code:</label>
        <input required name="postcode" id="postcode" type="text" value="<?php echo $postcode ?>"/><br />
        <label for="phone" class="reglabel">Phone:</label>
        <input required name="phone" id="phone" type="text" value="<?php echo $phone ?>"/><br />
        <label for="email" id="EmailLabel" class="reglabel">E-mail:</label>
        <input required name="email" type="email" id="email" value="<?php echo $email ?>"/><br />
    </fieldset>
    </form>
</div>

<div id="rightprofile">
    <form id="au" method="post" action="../../../coursework/coursework/scripts/checkout.php">
    <fieldset class="billing">
        <legend>Shipping Details</legend><br />
        <form>
            Same as billing address?
            <input type="radio" name="shipping" id="yes" value="yes">Yes
            <input type="radio" name="shipping" id="no" value="no">No<br/>
        </form>
        <label for="fname" class="reglabel">First Name:</label>
        <input required name="fname" type="text" id="fname" value="<?php if(isset($_POST'[shipping'] == 'yes')){echo $fname} ?>"/><br />
        <label for="lname" class="reglabel">Last Name:</label>
        <input required name="lname" type="text" id="lname" /><br />
        <label for="address" class="reglabel">Address:</label>
        <input required name="address" id="address" type="text" /><br />
        <label for="town" class="reglabel">Town:</label>
        <input required name="town" id="town" type="text" /><br />
        <label for="postcode" class="reglabel">Post Code:</label>
        <input required name="postcode" id="postcode" type="text" /><br />
        <label for="phone" class="reglabel">Phone:</label>
        <input required name="phone" id="phone" type="text" /><br />
        <label for="email" id="EmailLabel" class="reglabel">E-mail:</label>
        <input required name="email" type="email" id="email" /><br />
    </fieldset>
    </form>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:54:38.060

我给你写了一些简化的示例代码。该站点包含一个表单，具有两个输入字段（帐单和运输），以及一个用于检查运输信息是否与帐单信息相同的复选框。如果选中该复选框，则代码将简单地忽略输入“运输”的任何内容。

至少从 PHP 的角度来看，这将实现您的要求。如果您正在浏览器中实时寻找更多“将这些输入字段中的数据复制到那些输入字段”，那么这是 Javascript 的任务，而不是 PHP。

```
<?php
/* Check if anything was submitted */
if(isset($_POST))
{
    /* Retrieve billing information */
    $billing_name = $_POST['billing_name'];
    $billing_addr = $_POST['billing_addr'];

    /* Check if shipping same as billing */
    if(isset($_POST['same']))
    {
        /* Shipping is the same as billing */
        $shipping_name = $billing_name;
        $shipping_addr = $billing_addr;
    }
    /* If not, set shipping to the posted value */
    else
    {
        $shipping_name = $_POST['shipping_name'];
        $shipping_addr = $_POST['shipping_addr'];
    }

    $insert = mysql_query(...);
}
?>

<form method="post" action="#" />

Billing information
<label for="billing_name">Name</label>
<input type="text" id="billing_name" name="billing_name" />
<label for="billing_addr">Addr</label>
<input type="text" id="billing_addr" name="billing_addr" />

<label for="same" />Is the shipping information the same as billing information?</label>
<input type="checkbox" id="same" name="same" />

Shipping information
<label for="shipping_name">Name</label>
<input type="text" id="shipping_name" name="shipping_name" />
<label for="shipping_addr">Addr</label>
<input type="text" id="shipping_addr" name="shipping_addr" />

<input type="submit" value="Register" />

</form> 
```

# rpm - 是否可以创建与 RHEL5 和 RHEL6 兼容的单一源 RPM？

> ID：15752231
> 
> 赞同：1
> 
> 时间：2013-04-01T21:29:33.313
> 
> 标签：rpm, rhel, rhel5

我需要创建一个可以在 RHEL5 和 RHEL6 操作系统上使用的单一源 RPM。从 RHEL6 开始，Redhat 切换到 sha256 作为校验和。我知道我可以使用 sha1 或 sha256 创建一个 rpm，但是任何一个版本的 rpm 都无法选择校验和算法。AFAIK，甚至不能告诉 rpm 忽略校验和。

那么，是否可以创建一个可在 RHEL5 和 RHEL6 上使用的单个 RPM，并使用 stock rpm 命令（即，我不想使用 cpio 来提取）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-25T04:23:42.767

我经常创建一个 SRPM，然后在从 rh73 到 rhel7 的任何东西上使用它。只需选择最旧的操作系统版本（因此是最旧的 rpm 版本），然后使用该主机执行“rpmbuild -bs”。

# c# - 将单元测试附加到 C# 项目的标准方法

> ID：15752234
> 
> 赞同：2
> 
> 时间：2013-04-01T21:29:49.663
> 
> 标签：c#, unit-testing, nunit

我在单独的项目中编写了几个单元测试。在开发过程中，我每次都将 dll 加载到 NUnit.exe 中以检查结果。鉴于我已经完成了单元测试的编写，如何组织单元测试并将其附加到解决方案中。

我尝试在解决方案目录中创建“工具”文件夹，然后放置所有与 NUnit 相关的库，在测试项目的构建后事件中，我像下面这样连接了 nunit，它可以工作。

```
"$(SolutionDir)tools\nunit\nunit-console.exe" "$(TargetPath)" 
```

但在我的一个测试中，我指的是一个 sqlite DB。如果我对其位置进行硬编码，它可以正常工作，但我打算将它放在“App_Data”文件夹下的测试项目中。所以，我尝试使用下面的代码来获取相对路径，但它不起作用。但是当我将文件复制到“工具”文件夹时它工作正常，我猜执行上下文来自 NUnit 文件夹。

```
Path.Combine(Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location),"App_Data\\test.txt") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:26:38.713

如果您不需要专门的 nunit，您也可以使用内置的 Visual Studio 支持进行单元测试......它也已被合并到最新的 Express 版本中，您不必为这样的问题而苦苦挣扎； )

无论哪种方式，我相信您误解了单元测试的基础知识。我们从不针对实际数据库进行测试，这是一种非常糟糕的做法。您应该对该主题进行一些研究，并了解`mocking`此类事物背后的理论。

# java - 在 Java 中存储多个线程

> ID：15752236
> 
> 赞同：0
> 
> 时间：2013-04-01T21:30:01.047
> 
> 标签：java, multithreading

假设我有一个实现`Runnable`接口的类，我要在主程序中创建给定类的 5 个实例。我想将它们存储在数组或集合中。由于该类实现`Runnable`了我的理解，我可以将它存储在线程容器中的唯一方法是`Thread[]`. `toString()`但是，如果我这样做，例如，我不能使用类覆盖方法或任何其他自定义方法/字段。

```
public class LittleClass implements Runnable{
    public void run(){

    }
}

public static void main(String[] args){
    Thread[] smallClasses = new Thread[5];

    // initialize and so...

    smallClasses[i].customField//not accessible
    System.out.println(smallClasses[i])//gives Thread[Thread-X,X,]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:34:07.990

您应该考虑使用`ExecutorService`. 然后，您保留一系列作业类并将它们提交给要运行的服务。

```
// create a thread pool with as many workers as needed
ExecutorService threadPool = Executors.newCachedThreadPool();
// submit your jobs which should implements Runnable
for (YourRunnable job : jobs) {
    threadPool.submit(job);
} 
```

一旦你提交了你的工作，你关闭服务，等待它完成，然后你可以询问你的工作以从他们那里获取信息。

```
// shuts the pool down but the submitted jobs still run
threadPool.shutdown();
// wait for all of the jobs to finish
threadPool.awaitTermination(Long.MAX_VALUE, TimeUnit.MILLISECONDS);
// now go back and print out your jobs
for (YourRunnable job : jobs) {
    System.out.println(jobs.toString());
} 
```

这是[关于这个主题的一个很好的教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/exinter.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:33:05.390

您可以创建实现 Runnable 的自定义类，然后记录这些自定义类的数组。

因此，例如，在您上面编写的代码中，您始终可以使用

```
LittleClass[] objs = new LittleClass[4];
for(int i = 0; i < objs.length; i++) {
   objs[i] = new LittleClass();
} 
```

# php - 传递购物车数据... Ajax 或 PHP Post？

> ID：15752237
> 
> 赞同：0
> 
> 时间：2013-04-01T21:30:09.627
> 
> 标签：php, javascript, ajax, post, cart

所以，首先，感谢一个叫 Marcel Gwerder 的人，他写了我要问的问题的代码。我会写评论或私信他，但我觉得帖子已经死了（人们不只是看旧帖子对吗？他们也不能被撞）而且我不知道如何 PM People。

看看这段代码

```
// Shop Stuff
var cart = [];

$(document).ready(function(){  
    var buttonTxt = '';

    $(".buyinfo").click(function() {
        //Store text and id of the selected element
        var txt = $(this).siblings('.shopitemname').text(); 
        var id = $(this).closest('.shopitem').attr('id');

        if(!$(this).hasClass('added')) {
           buttonTxt =  $('.buyinfoname', this).text();
           $('#box_item').text(txt);
           cart[id] = txt;            
           //Change text
           $('.buyinfoname', this).text('Added to cart - Click to remove');
           $(this).addClass('added');
           //Show and hide overlay
           $('#confirmbox').show('normal').delay(2000).fadeOut();
        } else {
           delete(cart[id]);
           $(this).removeClass('added');
           $('.buyinfoname', this).text(buttonTxt);
        }

        console.log(cart);
        alert(cart);
    });
}); 
```

这是一些Javascript。

现在来看看评论者推荐的一些 HTML。

```
<div id="shop">
<a href="checkout.php"><input type="button" value="Go To Checkout" id="checkoutbutton" /></a>

<div class="shopitem">

<p class="shopitemname">Orange Background Color</p>

<div class="buyinfo">

<p class="buyinfoname">Buy - 40 Coins</p>

</div>

</div>

<div class="shopitem">

<p class="shopitemname">Black Background Color</p>

<div class="buyinfo">

<p class="buyinfoname">Buy - 40 Coins</p>

</div>

</div>

<div class="shopitem">

<p class="shopitemname">Green Background Color</p>

<div class="buyinfo">

<p class="buyinfoname">Buy - 40 Coins</p>

</div>

</div>

<div class="shopitem">

<p class="shopitemname">Blue Background Color</p>

<div class="buyinfo">

<p class="buyinfoname">Buy - 40 Coins</p>

</div>

</div>

<div class="shopitem">

<p class="shopitemname">Yellow Background Color</p>

<div class="buyinfo">

<p class="buyinfoname">Buy - 40 Coins</p>

</div>

</div>

<div class="shopitem">

<p class="shopitemname">Purple Background Color</p>

<div class="buyinfo">

<p class="buyinfoname">Buy - 40 Coins</p>

</div>

</div>

</div>

</section>

<div id="confirmbox">

<p>The item was successfully added to your cart</p>

</div> 
```

我想知道如何将 CART 变量中的值发送到有人可以单击的新页面，称为“checkout.php”。我在想来自 jquery 的 AJAX 或来自 PHP 的帖子，但两者对我来说都很难（我是一个菜鸟编码器），我不想在最终可能无法解决的事情上努力工作。

另外，Marcel 的问题（如果他看到的话）或任何了解他的代码的人的问题：

为什么值没有进入购物车，我做了 alert(cart) 并且当购物车中应该有值时它总是显示空警报框。

请帮助我，祝你有美好的一天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:51:44.147

Javascript 在用户计算机上运行，​​PHP 在服务器上运行。
因此，虽然您可能想使用 javascript 来收集数据，但我很确定您会想用 PHP*处理*数据，以避免用户太容易干扰它。

“将您的 Ajax 代码视为服务器的另一个客户端”来自[针对 jquery ajax 数据发布的安全建议？](https://stackoverflow.com/questions/38421/security-advice-for-jquery-ajax-data-post)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T22:21:42.143

你可以这样做，我创建了一个有效的 JS fiddle 示例。这仅在客户端，您必须编写后端处理脚本，因为我不确定您要做什么（将值保存在数据库中等）。

请看下面的 JS 小提琴：http: [//jsfiddle.net/rDgUD/2/](http://jsfiddle.net/rDgUD/2/)

您可以在 jQuery 中使用 .post 命令：

```
$("#checkoutbutton").click(function () {
   $.post("test.php", cart, function (data) {
        //this is the reponse back from your PHP processing page that saved the variables in a database or however you were handling that.
        alert("Data Loaded: " + data);
    });
}); 
```

您可以在 JS 小提琴中看到我如何处理将变量保存到您的购物车数组的过程。您可以使用 jquery 的 .push 功能添加数组元素：

```
cart.push(id); 
```

我还使用以下代码删除了元素：

```
var removeItem = id; // item to remove
cart.splice($.inArray(removeItem, cart), 1); 
```

# parsing - Haskell 中的句柄增量解析

> ID：15752243
> 
> 赞同：5
> 
> 时间：2013-04-01T21:30:31.087
> 
> 标签：parsing, haskell, parsec, attoparsec

我正在尝试将 Haskell 与具有 read-eval-print 循环的命令行程序连接。我想将一些文本放入输入句柄中，然后从输出句柄中读取，直到找到提示（然后重复）。读取应该阻塞，直到找到提示，但不再阻塞。与其编写我自己的小型状态机，每次读取一个字符直到它构造一个提示，不如使用 Parsec 或 Attoparsec。（一个问题是提示会随着时间而变化，所以我不能只检查恒定的字符串。）

从输出句柄中读取适当数量的数据并将其提供给解析器的最佳方法是什么？我很困惑，因为大多数句柄读取原语都要求我事先决定要读取多少数据。但应该由解析器决定何时停止。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T14:08:12.680

您似乎在这里有两个问题。一个是关于增量解析的，一个是关于增量阅读的。

Attoparsec 直接支持增量解析。请参阅 中的`IResult`类型`Data.Attoparsec.Text`。秒差距，唉，没有。你可以在你拥有的东西上运行你的解析器，如果它给出了一个错误，添加更多的输入然后再试一次，但是你真的不知道这个错误是一个不可恢复的解析错误，或者只是需要更多的输入。

在您的情况下，通常 REPL 一次读取一行。因此，您可以使用`hGetLine`读取一行 - 将其传递给 Attoparsec，如果它解析则评估它，如果没有，则获取另一行。

[如果你想看到这一切的实际效果，我会在Plush.Job.Output](https://github.com/mzero/plush/blob/master/src/Plush/Job/Output.hs)中做这种事情，但有三个小区别：1）我正在解析字节流，而不是字符串。2) 我已将其设置为尽可能多地从输入中提取并解析尽可能多的项目。3）我直接从文件描述中读取。但是相同的结构应该可以帮助您在您的情况下做到这一点。

# escaping - 使用字符串变量作为 Applescript 命令参数

> ID：15752249
> 
> 赞同：1
> 
> 时间：2013-04-01T21:30:50.130
> 
> 标签：escaping, applescript, quotes

我正在尝试执行以下操作：

```
on cleanup(x)
   tell application "Finder"    
      clean up window 1 by x
   end tell
end cleanup

cleanup("name") 
```

然而，由于 x 变量是一个字符串，清理命令不接受它并以错误退出。有没有办法将字符串转换为命令接受的字符串或其他解决方案来取消引用变量而不使用 if，else 语句，如下所示：

```
on cleanup(x)
   tell application "Finder"
      if x is "name" then
          clean up window 1 by name
      end if
   end tell
end cleanup

cleanup("name") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T22:53:20.950

这应该有效。

```
 on cleanup(x)

    run script "tell application \"Finder\" to  clean up window 1 by " & space & x

end cleanup

cleanup("name") 
```

* * *

来自**StandardAdditions**库

run script v ：运行指定的脚本或脚本文件

*   run script script ：要运行的脚本文本（或对脚本文件的别名或文件引用）

    *   [with parameters list of any] : 参数列表

    *   [in text] : 要使用的脚本组件；默认是当前脚本组件

→ any : 运行脚本的结果

# perl - 将变量从 Asterisk Dialplan 传递到 AGI perl 脚本

> ID：15752260
> 
> 赞同：0
> 
> 时间：2013-04-01T21:31:26.507
> 
> 标签：perl, asterisk, agi

我正在尝试使用 AGI 将变量从 Asterisk Dialplan 传递到 perl 脚本。我现在对此感到非常困惑，并且对它的工作原理感到非常困惑。现在在我的拨号计划中我有这个：

```
exten=>1122,1,Answer
exten=>1122,n,Read(digit)
exten=>1122,n,agi(/home/steve/Desktop/testperlping.pl,${digit})
exten=>1122,n,Hangup() 
```

我希望用户拨打分机 1122，然后输入一个 1-10 的号码，然后使用 AGI 将他们输入的号码传递给 perl。

我的 perl 脚本如下：

```
#!/usr/bin/perl -w
$|=1;

use Net::Ping;
use Asterisk::AGI;

$AGI = new Asterisk::AGI;

my %input = $AGI->ReadParse();

***I think I need something here***

$AGI->verbose("$numbertheytypedintophone"); #This will display the entered number back to the CLI. 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-02T02:16:52.383

我正在使用 Asterisk::FastAGI（推荐用于 perl 集成），代码如下所示：

```
my $dst = $self->param('dst'); 
```

对于 Asterisk::AGI 它是（我刚刚阅读了 AGI.pm 源代码）：

```
my $digits=$input{'arg_1'}; 
```

如果您有任何问题，我强烈建议您阅读模块的源代码，这会更快。

# jquery - 在 jquery mobile 中突出显示搜索

> ID：15752261
> 
> 赞同：1
> 
> 时间：2013-04-01T21:31:26.623
> 
> 标签：jquery, search, mobile, highlight

如何突出显示在 jquery mobile 中搜索的单词？我正在使用带有 data-filter="true" 的折叠列表，它在搜索时效果很好，但是有很多文本，为了更好的用户体验，应该突出显示搜索的单词。

我试图实现这些 jquery 插件（不是 jquery mobile），但它没有工作：

[http://www.jquery.info/spip.php?article50](http://www.jquery.info/spip.php?article50)

[http://www.htmldrive.net/items/show/833/on-page-text-highlighting-Search-with-jQuery.html](http://www.htmldrive.net/items/show/833/on-page-text-highlighting-Search-with-jQuery.html)

我在stackoverflow或网络上的任何地方都没有找到解决方案，所以现在我问希望能在这里得到一些帮助。

我现在使用的代码是这样的：

```
 <div data-role="page" id="test"><p></p>
        <ul data-role="listview" data-theme="b" data-filter="true">

  <div data-role="collapsible" data-inset="false">
                                    <h2>Look here</h2>                          
                                        <li>
                                        <div dara-role="content">
                                        here is alot o text. This is searchable but should turn into yellow. </div>
                                        </li></div>

    <div data-role="collapsible" data-inset="false">
                                    <h2>Look here to</h2>                           
                                        <li><div data-role="content">
                                          More text.
                                        </div>
                                        </li></div> </ul> 
```

# java - ASM 4（Java 库）教程？

> ID：15752262
> 
> 赞同：9
> 
> 时间：2013-04-01T21:31:27.967
> 
> 标签：java, bytecode, bytecode-manipulation

我最近一直在使用 Java 库“ASM”，它用于在运行时修改字节码，以防人们不知道，而且我无法找到关于 ASM 4 的单个教程。除了官方手册ASM 4，它引用了甚至不存在的 ASM 类。

我想知道是否有人知道该库的任何教程，这些教程涵盖了基本到中间的内容，例如将一些代码插入到方法中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T22:50:43.540

你想做的事情似乎很基本（对我来说）。如果在用户指南中没有包含示例，我会感到非常惊讶：[https ://asm.ow2.io/asm4-guide.pdf](https://asm.ow2.io/asm4-guide.pdf)

这里有很多其他文档链接：http: [//asm.ow2.org/](http://asm.ow2.org/)

如果您询问，ASM 邮件列表也非常敏感：http: [//mail.ow2.org/wws/info/asm](http://mail.ow2.org/wws/info/asm)

# php - SQL - 如何过滤关键字不正常的结果并将它们放在底部？

> ID：15752263
> 
> 赞同：0
> 
> 时间：2013-04-01T21:31:37.413
> 
> 标签：php, sql, ms-access, odbc

我有一个网站，我正在用 PHP 重建以从 Access 数据库中读取。我拥有根据从下拉列表中选择的类别显示产品列表的大部分功能。但是，我想做的一件事是将所有过时的产品移到结果列表的底部。目前，它们混合在显示的结果中。

是否有允许我这样做的 SQL 语句？目前，数据库中的所有过时产品都在其产品名称的末尾附加了“（过时）”。我希望我可以针对字符串 (Obsolete) 来执行此操作。

这是我当前的 SQL 语句：

```
$handle = odbc_connect("Potter","","");
$results = odbc_exec($handle, "SELECT DISTINCT product.prodimage, 
                product.prodmodelno, 
                product.proddesc, 
                product.prodorder, 
                product.prodpdf, 
                product.prodmanual, 
                product.prodtip 
FROM   product 
WHERE  (( ( product.prodmodelno ) LIKE '%$searchTerm%' )) 
        OR (( ( product.proddesc ) LIKE '%$searchTerm%' )) 
ORDER  BY product.prodorder DESC, 
          product.prodmodelno ASC "); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T22:55:17.147

您需要`ORDER`使用一条`IIF`语句（类似于`CASE`ANSI SQL 中的 a ）

[http://www.techonthenet.com/access/functions/advanced/iif.php](http://www.techonthenet.com/access/functions/advanced/iif.php)

所以你可以按（未经测试）排序：

`IIF (RIGHT(product.[proddesc],10) = "(Obsolete)", "b", "a")`

这将创建一个新的派生列，过时时为“b”，否则为“a”......

# google-maps - 谷歌地图第一次没有初始化

> ID：15752264
> 
> 赞同：0
> 
> 时间：2013-04-01T21:31:38.710
> 
> 标签：google-maps, model-view-controller, jquery-mobile, initialization

当我点击地图链接时，我给出了带有谷歌地图的链接页面，它打开页面但没有初始化谷歌地图。但是当我刷新页面时它初始化页面 [你可以点击页脚中的地图链接](http://teknonova.com/Map)

它将打开[该页面](http://teknonova.com/Map/Home/Index1)但不初始化谷歌地图但如果您刷新页面它将初始化我应该怎么做才能找到问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T23:24:02.863

我对jquery-mobile不是很熟悉，但我猜当一个页面通过AJAX加载时（在这种情况下页面将通过AJAX加载，当你点击按钮时），只有div的内容`data-role="page"`会被加载到页面中。

您的脚本（尤其是初始化地图的脚本）当前不在此 div 中，因此它们不会被加载或执行。

# xml - 空元素 - 哪个更好

> ID：15752269
> 
> 赞同：0
> 
> 时间：2013-04-01T21:32:00.810
> 
> 标签：xml

当从另一个设备发送的信息中创建包含多个元素的 XML 文档时，假设某些信息未发送（例如 SecFile ID 信息），最好接收带有 (a) 元素不存在的此 XML , 或 (b) 空元素，或 (c) 插入元素或 (d) 插入属性 xsi:nil=”true”？

前所有信息

```
<FilmFile_ID>
<Film_ID>02</Film_ID>
<PriFile_ID>08</PriFile_ID>
<SecFile_ID>03</SecFile_ID>
</FilmFile_ID> 
```

a)SecFile_ID 元素被移除

```
<FilmFile_ID>
<Film_ID>02</Film_ID>
<PriFile_ID>08</PriFile_ID>
</FilmFile_ID> 
```

b)SecFile_ID 为空

```
<FilmFile_ID>
<Film_ID>02</Film_ID>
<PriFile_ID>08</PriFile_ID>
<SecFile_ID></SecFile_ID>
</FilmFile_ID> 
```

c) 插入

```
<FilmFile_ID>
<Film_ID>02</Film_ID>
<PriFile_ID>08</PriFile_ID>
<SecFile_ID><null/></SecFile_ID>
</FilmFile_ID> 
```

d)xsi:nil=”true” 插入

```
<FilmFile_ID>
<Film_ID>02</Film_ID>
<PriFile_ID>08</PriFile_ID>
<SecFile_ID xsi:nil=”true”/>
</FilmFile_ID>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T23:04:03.657

好吧，没有“更好”的方法，但是，您仍然可以争辩说：

*   b) 是模棱两可的，因为您无法真正知道它是指*空*值 还是*不存在的*值，并且

*   c) 在处理特殊数据类型时引入了不必要的复杂性，并且

*   d) 传达了与 a) 完全相同的意思，但更加冗长，因此

*   a) 获胜

如果您使用 a)，则`<SecFile></SecFile>`, 如果应用程序（或模式）允许，则应将其解释为“空”值（非 null）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T06:23:08.600

一般来说，XML 文化是，作为文档设计者，您可以为特定语义选择使用什么语法，或者换句话说，文档意味着您所说的意思。如果您需要区分不同类型的缺失值（例如“John has no middle name”和“I don't know John's middle name”），那么区分可能很重要，但在大多数情况下，您可以非常愉快地使用其中任何一个. 使用空元素可能会使使用 XML 的应用程序更轻松一些。

# windows - 具有最小延迟的串行通信

> ID：15752272
> 
> 赞同：7
> 
> 时间：2013-04-01T21:32:10.003
> 
> 标签：windows, winapi, serial-port, hardware, low-latency

我有一台通过串行通信（即物理或模拟串行端口的 RS-232/RS-422）与外部设备连接的计算机。它们通过频繁的数据交换（30Hz）相互通信，但只有很小的数据包（每个包少于 16 个字节）。

通信的最关键要求是传输和接收之间的低延迟或延迟。

数据交换模式类似于握手。一个主机设备启动通信并继续在客户端设备上发送通知。客户端设备需要尽快回复来自主机设备的每个通知（这正是需要实现低延迟的地方）。通知和回复的数据包定义明确；即数据长度是已知的。并且基本上不允许数据丢失。

我使用了以下常见的 Win API 函数以同步方式进行 I/O 读/写：CreateFile、ReadFile、WriteFile

客户端设备使用 ReadFile 从主机设备读取数据。一旦客户端读取了长度已知的完整数据包，它使用WriteFile向主机设备回复相应的数据包。读取和写入始终是顺序的，没有并发性。

不知何故，通信速度不够快。即数据发送和接收之间的时间间隔太长。我想这可能是串行端口缓冲或中断的问题。

在这里，我总结了一些可能的措施来改善延迟。请给我一些建议和更正:)

1.  使用 FILE_FLAG_NO_BUFFERING 标志调用 CreateFile？我不确定这个标志在这种情况下是否相关。
2.  在每个 WriteFile 之后调用 FlushFileBuffers？或任何可以通知/中断串口立即传输数据的动作？
3.  为处理串行通信的线程和进程设置更高的优先级
4.  为模拟设备（及其驱动程序）设置延迟计时器或传输大小。但是物理串口呢？
5.  Windows上的任何等效东西，例如Linux下的setserial/low_latency？
6.  禁用先进先出？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2019-09-04T04:37:03.953

我通过将通信超时设置为`{MAXDWORD,0,0,0,0}`.

经过多年的努力，在这一天，我终于能够使用 Microsoft 的 CDC 类 USB UART 驱动程序（USBSER.SYS，现在内置在 Windows 10 中使其实际可用）使我的串行通信终端足够快。

显然，前面提到的一组值是一个特殊的值，它设置了最小的超时和最小的延迟（至少在 Microsoft 驱动程序中，至少在我看来是这样），并且如果接收中没有新字符，也会导致 ReadFile 立即返回缓冲。

这是我打开端口的代码（Visual C++ 2008，项目字符集从“Unicode”更改为“未设置”以避免端口名的 LPCWSTR 类型转换问题）：

```
static HANDLE port=0;
static COMMTIMEOUTS originalTimeouts;

static bool OpenComPort(char* p,int targetSpeed) { // e.g. OpenComPort ("COM7",115200); 
    char portname[16];
    sprintf(portname,"\\\\.\\%s",p);
    port=CreateFile(portname,GENERIC_READ|GENERIC_WRITE,0,0,OPEN_EXISTING,0,0);
    if(!port) {
        printf("COM port is not valid: %s\n",portname);
        return false;
    }
    if(!GetCommTimeouts(port,&originalTimeouts)) {
        printf("Cannot get comm timeouts\n");
        return false;
    }
    COMMTIMEOUTS newTimeouts={MAXDWORD,0,0,0,0};
    SetCommTimeouts(port,&newTimeouts);
    if(!ComSetParams(port,targetSpeed)) {
        SetCommTimeouts(port,&originalTimeouts);
        CloseHandle(port);
        printf("Failed to set COM parameters\n");
        return false;
    }
    printf("Successfully set COM parameters\n");
    return true;
}

static bool ComSetParams(HANDLE port,int baud) {
    DCB dcb;
    memset(&dcb,0,sizeof(dcb));
    dcb.DCBlength=sizeof(dcb);
    dcb.BaudRate=baud;
    dcb.fBinary=1;
    dcb.Parity=NOPARITY;
    dcb.StopBits=ONESTOPBIT;
    dcb.ByteSize=8;
    return SetCommState(port,&dcb)!=0;
} 
```

这是它工作的USB跟踪。请注意 OUT 事务（输出字节），然后是 IN 事务（输入字节），然后是更多的 OUT 事务（输出字节），所有这些都在 3 毫秒内：

[![具有最小超时的 USB UART 数据包跟踪](https://i.stack.imgur.com/QrSSY.png)](https://i.stack.imgur.com/QrSSY.png)

最后，如果您正在阅读本文，您可能有兴趣查看我通过 UART 发送和接收字符的函数：

```
 unsigned char outbuf[16384];
    unsigned char inbuf[16384];
    unsigned char *inLast = inbuf;
    unsigned char *inP = inbuf;
    unsigned long bytesWritten;
    unsigned long bytesReceived;

    // Read character from UART and while doing that, send keypresses to UART.
    unsigned char vgetc() { 
        while (inP >= inLast) { //My input buffer is empty, try to read from UART
            while (_kbhit()) { //If keyboard input available, send it to UART
                outbuf[0] = _getch(); //Get keyboard character
                WriteFile(port,outbuf,1,&bytesWritten,NULL); //send keychar to UART
            }
            ReadFile(port,inbuf,1024,&bytesReceived,NULL); 
            inP = inbuf;
            inLast = &inbuf[bytesReceived]; 
        }
        return *inP++;
    } 
```

大型传输在代码的其他地方处理。

最后一点，显然这是自 1998 年放弃 DOS 以来我设法编写的第一个快速 UART 代码。哦，当你玩得开心时，时间是否过得飞快。

这是我找到相关信息的地方：[http ://www.egmont.com.pl/addi-data/instrukcje/standard_driver.pdf](http://www.egmont.com.pl/addi-data/instrukcje/standard_driver.pdf)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-01T09:22:26.530

我遇到过类似的串口问题。就我而言，我解决了减少串行端口延迟的问题。您可以使用控制面板更改每个端口的延迟（默认设置为 16 毫秒）。你可以在这里找到方法：http: [//www.chipkin.com/reducing-latency-on-com-ports/](http://www.chipkin.com/reducing-latency-on-com-ports/)

祝你好运！！！

# ruby - 为什么 Rails 控制台说“无法加载此类文件--readline”？

> ID：15752275
> 
> 赞同：6
> 
> 时间：2013-04-01T21:32:18.503
> 
> 标签：ruby, ruby-on-rails-3.2, rails-console

我是 Ruby on Rails 的新手，并且正在使用 RVM 来管理 Ruby 版本。

我的笔记本电脑安装了 Ruby1.8.7，但我的项目使用的是 RVM、Ruby1.9.3 和 Rails 3.2.11。

我无法运行`rails c`或`rails console`没有它给我以下错误：

```
/home/phil/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/irb/completion.rb:9:in `require': cannot load such file -- readline (LoadError)
from /home/phil/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/irb/completion.rb:9:in `<top (required)>'
from /home/phil/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.11/lib/rails/commands/console.rb:3:in `require'
from /home/phil/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.11/lib/rails/commands/console.rb:3:in `<top (required)>'
from /home/phil/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.11/lib/rails/commands.rb:38:in `require'
from /home/phil/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.11/lib/rails/commands.rb:38:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-01T21:36:01.573

编译 Ruby 时需要安装 readline 库。

如果您使用的是 CentOS/Redhat/Fedora Linux，请使用以下命令安装软件包：

```
sudo yum install readline-devel 
```

或者，在 Ubuntu 上，使用：

```
sudo apt-get install libreadline6 libreadline6-dev 
```

然后重新编译 Ruby。

# c# - 这个“if”分支中的“out”关键字的目的是什么（用于 WebMatrix 的 OAuth“Starter Site”模板）？

> ID：15752282
> 
> 赞同：0
> 
> 时间：2013-04-01T21:32:46.150
> 
> 标签：c#, out

我的问题主要集中在一件事上。在这个示例分支中，out 关键字究竟做了什么？

```
if (!OAuthWebSecurity.TryDeserializeProviderUserId(loginData, out provider, out providerUserId)) {
            Response.Redirect("~/Account/Manage");
            return;
        } 
```

我看过这里： http: [//msdn.microsoft.com/en-us/library/t3c3bfhx (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/t3c3bfhx(v=vs.80).aspx)

但事实是，我不知道“通过引用传递的参数”是什么意思，而我不知道“ref”关键字是/做什么。

抱歉，这方面太新了，但我似乎无法理解它的作用。

此片段来自 WebMatrix2 的“Starter Site”模板中的 RegisterService.cshtml 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T21:35:33.573

这意味着这些参数是过程的*输出*。这是从过程中“返回”多个值而不创建类来存储结果的一种方法。在这种情况下，有三个“结果”（两个参数加上真正的布尔返回值）。

如果 C# 允许多个返回值，则相当于：

```
bool canDeserialize;
canDeserialize, provider, providerUserId = OAuthWebSecurity.TryDeserializeProviderUserId(loginData); 
if (!canDeserialize){
            Response.Redirect("~/Account/Manage");
            return;
        } 
```

在 C# 中有效的另一个选项是创建一个类来存储结果：

```
public class ProviderParseResults
{
   public string Provider {get; set;}
   public string ProviderUserId {get; set;}
} 
```

然后以这种方式使用它：

```
ProviderParseResults results = OAuthWebSecurity.TryDeserializeProviderUserId(loginData); 
if (results == null){
            Response.Redirect("~/Account/Manage");
            return;
        }

string provider = results.Provider;
string providerUserId = results.ProviderUserId; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T21:50:43.007

由于您不知道通过引用传递参数意味着什么，我将从这个开始。

通常，在调用函数时，您会按值传递参数。这意味着您将值作为参数发送，而不是变量。

所以如果我打电话：

```
a = 10;
some_func(a); 
```

这与调用基本相同：

```
some_func(10); 
```

由于您实际上发送的是 a 中包含的值，**而**不是实际变量**a**。

但是，如果您希望您的函数实际更改 a 中的值**怎么**办？在这种情况下，您需要将函数的参数作为引用发送，以便将变量本身提供给函数。这是一个例子：

```
void sum( int a, int b, ref int c )
{
    c = a + b;
} 
```

正如您在上面的函数中看到的，该函数按值接收 a 和 b，因为它不打算更改它们。但是**c**是通过引用传递的，因为我们打算把函数的结果放在这个变量中。

**现在来看看ref**和**out**之间的区别。

如果你尝试调用上面的函数，你可能会得到一个编译错误，告诉你正在向函数发送一个未初始化的变量。

但这不应该是一个问题（在这种情况下），因为我引用的变量实际上是一个输出，所以我并不关心之前存储在其中的值是什么。

因此，不是用**ref**关键字声明这个变量，我可以使用**out**关键字，让编译器知道这个变量只是一个输出，所以它不需要检查它是否已经初始化

# html - 使用 jQuery UI 时如何自定义日期选择器对话框位置？

> ID：15752286
> 
> 赞同：0
> 
> 时间：2013-04-01T21:33:07.743
> 
> 标签：html, jquery-ui

`input`我需要在该字段下有对话框。默认行为 - 显示在字段上方。尝试使用`dialog`方法自定义它 - 没有奏效。正确的方法是什么？

```
 <script>
    $(function() {
        $( "#adv-issue-date" ).datepicker();

            var handler = function() {};
            var dp-settings-param = "";
            var dp-pos = [100, 200];

            $( "#adv-issue-date" ).datepicker( "dialog", "10/12/2012, handler, dp-settings-param, dp-pos" );
            });
        </script> 
```

更新：

由于为空，该`datepicker`对话框未显示`handler`。这种方式也行不通：

```
var handler = function() {$( "#adv-issue-date" ).datepicker("show");}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:36:42.733

`.ui-datepicker`在 CSS 文件中修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T22:16:11.603

如果要手动移动 datePicker：

```
 $(document).ready(DocReady);

    function DocReady()
    {
        $("#adv-issue-date").datepicker({ beforeShow: moveDatePicker });    
    }

    function moveDatePicker(input, inst)
    {
        inst.dpDiv.css({ marginLeft: "200px", marginTop: "200px" });
    } 
```

# c++ - 我是否为立方体贴图正确指定了坐标？

> ID：15752287
> 
> 赞同：1
> 
> 时间：2013-04-01T21:33:26.867
> 
> 标签：c++, opengl, texture-mapping

到目前为止，我对立方体映射的理解是需要为立方体中使用的每个顶点指定 3D 纹理坐标，而不是`(u,v)`2D 纹理的坐标。

**一些假设**

*   立方体贴图使用归一化顶点来表示三角形的纹理坐标。

*   这些归一化顶点类似于指定的实际顶点：归一化纹理坐标使用其对应顶点的大小。

*   因此，如果一个顶点的单位大小为 1，则其归一化纹理坐标 N 为 1.0f / sqrt(3.0f )；

这些假设中哪些是正确的，哪些是不正确的？如果有不正确的，请说明原因。

**编辑**

虽然不是必需的，但值得赞赏的是一个例子，或者更确切地说，是一个关于推荐使用方法的想法 - 使用可编程管道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T22:07:06.663

立方体贴图是由 6 个以立方体拓扑排列的二次纹理组成的纹理。立方体贴图纹理坐标的唯一关键数量是它们的方向。在立方体贴图中，它的纹理像素由源自立方体中心的向量的方向寻址。纹理坐标向量的长度无关紧要。假设你有两个立方体贴图纹理坐标

```
(1, 1, 0.5) 
```

和

```
(2, 2, 1) 
```

它们都处理相同的立方体贴图纹素。

# .net - 应用程序重新启动 API 未重新启动失败的应用程序

> ID：15752295
> 
> 赞同：2
> 
> 时间：2013-04-01T21:34:10.120
> 
> 标签：.net, windows, winapi, application-restart, windows-api-code-pack

我正在尝试在 中使用应用程序重新启动服务`Microsoft.WindowsAPICodePack.ApplicationServices`，但是重新启动不起作用。当应用程序由于未处理的异常而退出时，它不会重新启动。我已经尝试过单击一次安装和作为独立 EXE（无安装程序）在 Windows 8 上运行。

我正在使用以下代码注册重新启动：

```
ApplicationRestartRecoveryManager.RegisterForApplicationRestart(new RestartSettings(string.Empty,
                                                                                            RestartRestrictions.None)); 
```

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T17:04:08.620

我发现了我的问题。在我的应用程序重启测试中，我在启动后过早终止了应用程序。

来自[微软](http://msdn.microsoft.com/en-us/library/windows/desktop/bb525423%28v=vs.85%29.aspx)文档：

> 如果应用程序在无响应或遇到未处理的异常之前已运行**至少 60 秒，Windows 错误报告 (WER) 将重新启动应用程序。**

# java - 在 facebook API Android 应用程序中获取共同的朋友

> ID：15752296
> 
> 赞同：0
> 
> 时间：2013-04-01T21:34:28.047
> 
> 标签：java, android, facebook-graph-api

嗨伙计们，我正在尝试通过 belwo 方法获取登录用户和其他用户之间的共同朋友，但我得到了空数据节点，尽管错误是`null`。关于这个问题的任何帮助。

```
 private void getMutualFriends() {
        Bundle params = new Bundle();
        params.putString("fields", "id,name,picture");
        getFriendsIds().put("100005132166273", "");
        RequestBatch requestBatch = new RequestBatch();
        for (final String friendId : getFriendsIds().keySet()) {
            requestBatch.add(new Request(Session.getActiveSession(), "/me/mutualfriends/" + friendId, params, HttpMethod.GET, new Request.Callback() {
                public void onCompleted(Response response) {
                    Log.i("Result: " , response.toString());
                    GraphObject graphObject = response.getGraphObject();
                    if (graphObject != null) {
                        if (graphObject.getProperty("id") != null) {
                        }
                    }
                }
            }));
        }
        requestBatch.executeAsync();
    } 
```

我总是得到这个回应`{Response: responseCode: 200, graphObject: GraphObject{graphObjectClass=GraphObject, state={"data":[]}}, error: null, isFromCache:false}.`

我也用这个替换请求创建`"new Request(Session.getActiveSession(), "me/mutualfriends/" + friendId, null, HttpMethod.GET, new Request.Callback().......`

并得到了同样的回应。

我将执行该方法大约 1000 次，所以我使用 Facebook 请求批处理，如果您知道更好的方法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:08:57.963

我知道我在这里可能有点天真，但也许你正在检查的用户没有共同的朋友？

您熟悉“Graph API”浏览器吗？这非常有用： [https ://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/)

尝试粘贴您的网址（记住将“friendsId”替换为您正在检查的用户），看看您会得到什么。

# php - 防止 PHP 中的 HTML 和 SQL 注入

> ID：15752299
> 
> 赞同：-3
> 
> 时间：2013-04-01T21:34:40.600
> 
> 标签：php, html, sql-injection

之前，我使用该方法`htmlspecialchars($x)`来防止 HTML 标记和一些 SQLi 在文本字段上。但我注意到这不是防止它的最佳方法，因为单引号 "' () 在数据库上占用了一些空间。此外，对于最大长度。例如，在文本字段上，我将 max-长度为 1000 个字符。但如果人们使用 simbols 并一直到最大长度（1000 个字符），用户会遇到一些麻烦，因为我在服务器上验证它。

示例：用户输入了 1000 个字符，但他不能再输入了。大约 30 个字符是符号。因此，在验证时，它将显示超过 1000 个字符并且不会验证它。

我清楚了吗？我怎样才能防止这两个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T21:37:52.537

假设“SQLi”是“SQL 注入”，那么`htmlspecialchars`根本不会保护您免受查询*的*影响。 `htmlspecialchars`应该只用于*显示*。您需要正确参数化查询，以便对输入进行适当的*存储*处理。

1.  用户提交表单
2.  如果原始输入有效，则使用用户输入运行参数化准备查询
3.  用户浏览页面
4.  您选择原始输入
5.  `htmlspecialchars`在将输入发送回用户之前使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T23:00:14.803

您还可以使用 htmlspecialchars() 来存储数据，例如 Google+。尝试使用移动设备[https://plus.google.com/app/basic/s?q=Developing+%22Web%22+Sites](https://plus.google.com/app/basic/s?q=Developing+%22Web%22+Sites)在移动设备中查看此内容并向下滚动。有一个实体名称，例如 & 您还可以使用 <meta charset="ISO-8859-1"> 作为您网站的字符集，以避免像 </div> 这样的 HTML 标记注释，从而破坏您的样式。也许您的网站因此容易受到 XSS 的攻击。所以，使用 htmlspecialchars() 来存储数据！作为一个真正的程序员，始终使用 mysql_real_escape_string() 检查 MySQL 输入以避免 Sequel Injection Attack。检查这些：[http](http://evilzone.org/tutorials/sql-injection/) : //evilzone.org/tutorials/sql-injection/ 和 www.w3schools.com/php/func_mysql_real_escape_string.asp

# ios - PDF 渲染在顶部/底部、左/右边缘带有白线

> ID：15752303
> 
> 赞同：4
> 
> 时间：2013-04-01T21:34:55.320
> 
> 标签：ios, pdf, core-graphics, pdfrenderer, vfr-reader

我在几个 iOS 应用程序中使用（优秀的） [vfr-reader 。](https://github.com/vfr/Reader)它就像一个魅力，但我在渲染一些 PDF 文件时遇到了问题。

在 VFR-Reader 中，我在顶部和底部，和/或左右边缘看到白线，这对于整页照片来说非常烦人。

它们出现在渲染页面和 ThumbsViewController 中的页面缩略图中：

![在此处输入图像描述](https://i.stack.imgur.com/41dB0.jpg) ![左右边缘有白线的页面缩略图](https://i.stack.imgur.com/qjmMw.jpg)

放大时白线变得（有点）大：

（底部边缘，虽然在白色页面背景下很难看到）

![放大](https://i.stack.imgur.com/wozFY.jpg)

我可以通过修改来改变它们的颜色

```
CGContextSetRGBFillColor(context, 1.0f, 1.0f, 1.0f, 1.0f); // White 
```

在 ReaderContentPage.m/drawLayer 中。

我天真地尝试将 RGBFillColor 设置为黑色，但是 PDF 中的所有文本页面（通常在白色背景上）也会显示为全黑。

我认为问题在于某些纵横比/PDF 页面尺寸，由于某种原因不能完美地填充绘图区域，因此白色背景颜色会“渗出”。

PDF 本身看起来不错，它们在 Safari 和 GoodReader 中呈现完美（没有白线）。

我很感激任何提示如何解决这个问题，或者我应该调查的一般方向。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T15:51:17.307

VFR 的作者通过电子邮件回复了我：

> “我怀疑这是由于 PDF 页面大小与显示该页面的支持 CATiledLayer 的 UView 的大小不完全匹配造成的。当 iOS 呈现 PDF 页面时，它会在一个方面进行匹配，从而留下白色边框。在 ReaderContentPage .m，在 -drawLayer:inContext: 方法中，尝试在此函数调用中将 true 更改为 false：CGPDFPageGetDrawingTransform(_PDFPageRef, kCGPDFCropBox, self.bounds, 0, true)"

这确实解决了这个问题！

（为了修复缩略图，我在 ReaderThumbRender.m 中修改了同一行）

# shell - 多个 SED 命令？

> ID：15752306
> 
> 赞同：1
> 
> 时间：2013-04-01T21:34:58.307
> 
> 标签：shell, unix, sed

如何执行多个 sed 命令？任何人都可以举一个语法的例子吗？

例如，我将如何组合这些：

```
sed <SOMETHING> > file.txt
sed <SOMETHING_ELSE> > file.txt 
```

..进入：

```
sed <SOMETHING>,<SOMETHING_ELSE> > file.txt 
```

谢谢你的帮助！

我将澄清这个问题以给出一个真实世界的例子：

我有这 3 个命令：

```
sed '/<!-- BEGIN DEVELOPMENT -->/,/<!-- END DEVELOPMENT -->/d'  > app/editor/index2.php
sed '/<!-- BEGIN PRODUCTION/d' app/editor/index.php > app/editor/index2.php
sed '/END PRODUCTION -->/d' app/editor/index.php > app/editor/index2.php 
```

我需要运行这 3 个命令并根据原始文件 (index.php) 生成 1 个输出文件 (index2.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:40:18.863

我不确定这与 javascript 有什么关系，但一种方法是使用分号，如下所示：

```
sed 's/1/2/g;/^ *$/d' file > newfile 
```

这只是一个将所有 1 替换为 2 并删除所有空白链接`file`并将输出写入`newfile`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T01:13:14.723

你举了这个例子：

```
sed '/<!-- BEGIN DEVELOPMENT -->/,/<!-- END DEVELOPMENT -->/d' > app/editor/index2.php
sed '/<!-- BEGIN PRODUCTION/d' app/editor/index.php > app/editor/index2.php
sed '/END PRODUCTION -->/d' app/editor/index.php > app/editor/index2.php 
```

我认为你真正想要做的是获取一个文件“index.php”并删除包含`<!-- BEGIN DEVELOPMENT -->`和的行之间的任何块，`/<!-- END DEVELOPMENT -->`并且将删除任何包含`<!-- BEGIN PRODUCTION`or的行`END PRODUCTION -->`。

如果是这样，那么在 awk 中，一种写法就是：

```
/<!-- BEGIN PRODUCTION|END PRODUCTION -->/  { next }
/<!-- (BEGIN|END) DEVELOPMENT -->/ { skip = !skip; next }
!skip 
```

例如：

```
$ cat file
abc
<!-- BEGIN DEVELOPMENT -->
def
<!-- END DEVELOPMENT -->
ghi
<!-- BEGIN PRODUCTION
klm
END PRODUCTION -->
nop
$
$ cat tst.awk
/<!-- BEGIN PRODUCTION|END PRODUCTION -->/  { next }
/<!-- (BEGIN|END) DEVELOPMENT -->/ { skip = !skip; next }
!skip
$
$ awk -f tst.awk file
abc
ghi
klm
nop 
```

# php - 如何在tomcat或resin下将PHP脚本包含到JSF页面中？

> ID：15752308
> 
> 赞同：0
> 
> 时间：2013-04-01T21:35:02.103
> 
> 标签：php, jsf, tomcat, resin, caucho

我在 Tomcat 下工作过 JSF 应用程序。在我配置的同一个项目中，也使用 PHP，如 Caucho Resin 网站（[链接](http://www.caucho.com/resin-3.1/doc/quercus.xtp)）中所述

但是当我尝试将分离的 PHP 工作脚本包含到 JSG 页面中时，页面失败。

我有`test.php`：

```
<?php
print "hello world";
?> 
```

在`web.xml`我添加了：

```
<servlet>
    <servlet-name>Quercus Servlet</servlet-name>
    <servlet-class>com.caucho.quercus.servlet.QuercusServlet</servlet-class>
    <init-param>
        <param-name>license-directory</param-name>
        <param-value>WEB-INF/licenses</param-value>
    </init-param>
</servlet> 

<servlet-mapping>
    <servlet-name>Quercus Servlet</servlet-name>
    <url-pattern>*.php</url-pattern>
</servlet-mapping> 
```

还添加`resin.jar`到`web-inf/lib`

当我`test.php`直接调用它时它正在工作，但是当我尝试像这样包含时：

```
<ui:include src="test.php"/> 
```

或直接在 JSF 页面中编写 php 代码失败。

这是一个例外：

```
javax.faces.view.facelets.FaceletException: Error Parsing /test.php: Error Traced[line: 5] Premature end of file.
    at com.sun.faces.facelets.compiler.SAXCompiler.doCompile(SAXCompiler.java:429)
    at com.sun.faces.facelets.compiler.SAXCompiler.doCompile(SAXCompiler.java:403)
    at com.sun.faces.facelets.compiler.Compiler.compile(Compiler.java:124)
    at com.sun.faces.facelets.impl.DefaultFaceletFactory.createFacelet(DefaultFaceletFactory.java:319)
    at com.sun.faces.facelets.impl.DefaultFaceletFactory.access$100(DefaultFaceletFactory.java:92) 
```

有没有人尝试过这种实验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:49:54.740

当您直接调用您的 PHP 页面时，它正在由您的 Quercus Servlet 处理，完全没有问题。但是，当您调用包含在非 PHP 页面中的 PHP 页面时，例如 JSP（或 JSF 或 XHTML 或其他文件扩展名），您的 Quercus Servlet 不会处理它，因此会给您此错误。

您可以混合使用 Quercus Servlet 和/或 Faces Servlet 来解析页面（我没有对此进行测试，所以我不确定它是否会起作用）。另一种选择可能是不直接在您的 JSP/JSF 页面中使用 PHP 脚本，而是使用它们来处理操作，即`<form action="test.php">`.

请注意，这不是 JSF、Tomcat、Resin 或 Caucho 问题，而是 servlet 问题或更糟糕的设计问题。这就引出了一个问题：为什么要在 Web 应用程序中使用这种奇怪的设计？

# python - 在 python 表达式中嵌入方程

> ID：15752317
> 
> 赞同：0
> 
> 时间：2013-04-01T21:35:47.497
> 
> 标签：python, expression

我偶尔会使用 Python，有什么方法可以让这种语法起作用吗？

```
import math

print (value1 = math.factorial(5)) 
```

这给出了错误：

> ```
> print (value1 = math.factorial(5))
>               ^ 
> ```
> 
> SyntaxError：无效的语法

还是我必须走很长的路？

```
import math

value1 = math.factorial(5)
print value1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T21:38:15.333

您不能在表达式中嵌入赋值。表达式/语句的区别是 Python 设计的基础，如果你问 Guido 如何做你想做的事，他会告诉你用两行来做。或者，更好的是，提升一个级别，看看是否有另一种方法可以做你想做的事情。

例如，在表达式中分配变量的最常见原因是为了简化`while`or`for`循环。在 Python 中，您通常只想将其转换为迭代器上的`for`循环，而不是围绕从迭代器获取下一个值的`while`or循环。`for`

这在官方 Python 设计和历史常见问题解答中进行了讨论，在[Why can't I use an assignment in an expression](http://docs.python.org/3/faq/design.html#why-can-t-i-use-an-assignment-in-an-expression)下，明确给出了这个例子：

```
while (line = readline(f)) {
    // do something with line
}

for line in f:
    # do something with line 
```

FAQ 还承认这使得从 C 和 Perl 等语言“逐行”翻译变得更加困难，并解释了为什么这对 Python 来说是一件好事而不是负面的。

话虽如此，您可以使用闭包或`nonlocal`变量来伪造它。例如：

```
def set_value1_to(new_value):
    global value1
    value1 = new_value
    return value1

print(set_value1_to(math.factorial(5)) 
```

但是，很难想到这将是正确的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T21:38:07.090

不，Python 不允许这样做。赋值只是一个语句，不能嵌入到表达式中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T21:38:05.620

不，没有。您不能在分配结果发生时打印它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T21:44:16.377

不可能从赋值运算符中提取值，但如果您必须在一行中完成，您可以编写一个对象，其设置器将存储接收到的值*并*返回它：

```
class AssignExpr(object):
    def set(self, value):
        self.value = value
        return value
assign = AssignExpr()

print assign.set(math.factorial(5))
# result available as assign.value 
```

请注意，这违反了 Python 的约定，即设置器（和其他类型的修改器，例如`set.discard`or `list.sort`）返回`None`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T21:49:47.287

请注意，如果您只想使用一次表达式而不将其分配给您永远不会重用的变量，Python 确实允许您执行`print math.factorial(5)`.

# c - 如何修复 C 中简单文件读/写程序的输出？

> ID：15752318
> 
> 赞同：1
> 
> 时间：2013-04-01T21:35:48.103
> 
> 标签：c, file, unix

我正在用 C 编写一个非常简单的文件读/写程序。当我尝试测试代码时，输​​出不是我所期望的。这是我的代码：

```
#include <stdio.h>

void hwrite(FILE *fp, int count, char *str) {
        fprintf(fp, "%d ""%s", count, str);
}

void hread(FILE *fp) {
        if(fp != NULL) {
                char line [128];
                while(fgets(line, sizeof line, fp) != NULL) {
                        fputs(line, stdout);
                }
                fclose(fp);
        }
        else {
                perror("xxx.txt");
        }
}

int main(void) {
        int count = 1;
        char *str = "test text\n";
        FILE *fp;

        fp = fopen("xxx.txt", "a");
        int i;
        for (i = 0; i < 3; i++) {
                hwrite(fp, count, str);
                count = count+1;
        }
        fp = fopen("xxx.txt", "r");
        hread(fp);
        return 0;
} 
```

该程序编译没有问题。然后我执行一次 a.out 命令，没有输出。我第二次做了，有输出但不完整。这里：

```
[xxxxx xxx]> a.out
[xxxxx xxx]> a.out
1 test text
2 test text
3 test text 
```

然后我打开文件找到这个：

```
1 test text
2 test text
3 test text
1 test text
2 test text
3 test text 
```

为什么它没有在输出中显示？谢谢你的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T21:39:33.573

您永远不会刷新输出，因此在程序退出之前它实际上不会写入文件。特别是，它在读取文件*后将*输出写入文件。`fclose`在重新打开阅读之前尝试一下。

```
int main(void) {
    int count = 1;
    char *str = "test text\n";
    FILE *fp;

    fp = fopen("xxx.txt", "a");
    int i;
    for (i = 0; i < 3; i++) {
            hwrite(fp, count, str);
            count = count+1;
    }
    fclose(fp); /* <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< */
    fp = fopen("xxx.txt", "r");
    hread(fp);
    return 0;
} 
```

# ruby-on-rails-3 - 将 SimpleCov 与 nginx 和乘客一起使用

> ID：15752322
> 
> 赞同：1
> 
> 时间：2013-04-01T21:36:06.437
> 
> 标签：ruby-on-rails-3, passenger, rcov

我们有一个用 Rails 3 编写的应用程序，我们将其部署到运行 nginx/Passenger 的 Ubuntu 服务器上。我们使用 Watir 对测试服务器运行一组测试。

我在本地安装并运行了 SimpleCov。它也可以在测试服务器上按预期工作，但仅在使用“rails s”开始时。

问题是当 Rails 应用程序使用乘客运行时 - 永远不会生成覆盖结果。我怀疑这可能是因为应用程序没有像运行单元测试时通常那样退出。

有谁知道这是否是对 SimpleCov 的有效使用？如果有，是否有特殊的配置要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T11:50:25.147

这可能是因为 SimpleCov 挂钩到“出口”，但 Phusion 乘客 3 调用“出口！” 关闭应用程序进程，绕过“退出”钩子。这个问题已在 Phusion 乘客 4 中得到解决。

# php - Arduino & PHP 查询

> ID：15752324
> 
> 赞同：1
> 
> 时间：2013-04-01T21:36:18.413
> 
> 标签：php, arduino

我是 arduino 和 PHP 的新手，我正在尝试将带有以太网屏蔽的 arduino uno 的温度和湿度读数发送到 PHP 网页，然后从 PHP 网页控制风扇、一些阀门等。我的第一个问题是我无法在 PHP 网页上实际显示温度读数。请参阅随附的 arduino 代码和 PHP 代码。我真的很感激这方面的任何帮助或建议。

谢谢

Arduino代码：

```
#include <Ethernet.h>           //library for ethernet functions
#include <SPI.h>
#include <Client.h>             //library for client functions

// Ethernet settings
byte mac[] = {0x90,0xA2,0xDA,0x0D,0x8B,0xB3};  //Replace with your Ethernet shield MAC
byte ip[] = { 192,168,1,105};  //The Arduino device IP address
byte subnet[] = { 255,255,255,0};
byte gateway[] = { 192,168,0,1};
IPAddress server(192,168,1,110);        // IP-adress of server arduino sends data to

EthernetClient client;

bool connected = false;

int sensorInPin = 0;
float temperature = 0;

void setup(void)
{

Serial.begin(9600);
Serial.println("Initializing Ethernet.");
delay(1000);
Ethernet.begin(mac);

Serial.println("LM35 Sensor ");
analogReference(INTERNAL);

}
void printTenths(int value)
{
// prints a value of 123 as 12.3
Serial.print(value / 100);
Serial.print(".");
Serial.println(value % 10);
}

void loop(void)
{

int span = 20;
int aRead = 0;
for (int i = 0; i < span; i++)
{
    aRead = aRead+analogRead(sensorInPin);
}
aRead = aRead / 20;
temperature =((100*1.1*aRead)/99)*10;

if(!connected)
{
    Serial.println("Not connected");
    if (client.connect(server,80))
    {
        connected = true;
        //int temp = analogRead(A1);
        Serial.print("Temp is ");
        Serial.println(temperature);
        Serial.println();
        Serial.println("Sending to Server: ");

        client.print("GET /index.php?t0=");
        Serial.print("GET /index.php?t0=");
        client.print(temperature);
        Serial.print(temperature);

        Serial.println();
        client.println();
        client.println("HTTP/1.1\r\n");
        Serial.println();
        Serial.println("HTTP/1.1\r\n");
        client.println("Host: localhost\r\n");
        Serial.println("Host: localhost\r\n");
        client.println();
        client.println("User-Agent: Arduino\r\n");
        Serial.println("User-Agent: Arduino\r\n");
        client.println("Accept: text/html\r\n");
        Serial.println("Accept: text/html\r\n"); 
        client.println();
        Serial.println();
        delay(1000);
    }
    else
    {
        Serial.println("Cannot connect to Server");
    }
  }
  else
  {
    delay(1000);
    while (client.connected() && client.available())
    {
        char c = client.read();
        Serial.print(c);

    }
    Serial.println();
    client.stop();
    connected = false;
    }
 } 
```

PHP 代码

```
 <?php
  echo date("d.m.Y-H:i:s") . " Temperature= " . $_GET['t0']; 
  ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:47:37.683

正如评论中所指出的（参见[MortenSickel](https://stackoverflow.com/users/1396864/mortensickel)上面的评论和其他评论），一切正常，这只是一个设计问题。你有什么：

*   Arduino`GET`向您的服务器发出请求以使用当前温度更新服务器
*   服务器获取该温度，并将其回显给 Arduino

从您所展示的内容来看，这一切都正常工作，但是，大概这不是您想要的行为。您可能想要的是以下内容：

*   Arduino`GET`向您的服务器发出请求以使用当前温度更新服务器
*   服务器获取该温度并将**其存储在某处**
*   当互联网用户（不是 Arduino）连接到该服务器时，温度会显示给互联网用户。

有几种实现方式。最简单的可能是这样的：

*   将您的重命名`index.php`为`arduino.php`，并让您的 Arduino 连接到该名称（不是`index.php`）
*   将代码添加到现在调用的 php 文件中`arduino.php`，以**将温度存储**在文件中。您可以使用[file_put_contents](http://php.net/manual/en/function.file-put-contents.php)函数来执行此操作。
*   `index.php`为您的互联网用户创建一个新的。这将读取文件`arduino.php`创建并告诉互联网用户温度。

如何同时访问此文件存在更复杂的问题，但在现阶段这些问题不相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-11T13:57:27.060

你不能发送温度。温度不是一个字符串，它是一个浮点数。您应该将浮点数更改为字符串。

# html - 如何使用 div 居中按钮？

> ID：15752325
> 
> 赞同：0
> 
> 时间：2013-04-01T21:36:26.827
> 
> 标签：html, css

我有以下代码，我试图将所有输入集中在 div 中。

**以下是 CSS 片段：**

```
#mainCalc label {
    display: inline;
    width: 8em;
    text-align: right;
    padding-right: 1em;
        float: left; }

#mainCalc input {

    display: inline;         
    float: left; }

#mainCalc br {
    clear: left; 
```

**这是 HTML 片段：**

```
<div id="mainCalc">
  <input type="button" id="dollar" value="Dollar" />
  <input type="button" id="quarter" value="Quarter" />
  <input type="button" id="dime" value="Dime" />
  <input type="button" id="nickel" value="Nickel" />
  <input type="button" id="refund" value="Refund" /><br />
  <label for="amount">$</label>
  <input type="text" id="amount" /><br/>
  <input type="button" id="coke" value="Coke" />
  <input type="button" id="dietCoke" value="Diet Coke" />
  <input type="button" id="mountainDew" value="Mountain Dew" />
  <input type="button" id="drPepper" value="Dr. Pepper" />
  <input type="button" id="rootBeer" value="Root Beer" />
  <input type="button" id="water" value="Water" /> <br /><br />
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:37:47.377

您需要给输入一个宽度，然后您需要删除浮动并添加边距：0 auto。

```
input{
width: 200px;
margin: 0 auto;
display: block;
} 
```

**工作示例：**

[http://jsfiddle.net/DYgnU/2/](http://jsfiddle.net/DYgnU/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:40:15.483

你可以加：

```
#mainCalc {
  text-align: center;
} 
```

并`float: left;`从`#mainCalc label`&中删除`#mainCalc input`

[**演示**](http://jsbin.com/ivaxus/1/edit)

# git - 更新后脚本中的 GIT 更改子模块 URL

> ID：15752326
> 
> 赞同：2
> 
> 时间：2013-04-01T21:36:34.923
> 
> 标签：git, git-submodules

如何在更新后更改子模块的 URL 以指向新的 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T00:12:37.267

我知道的唯一方法（除了调整 git config）正在运行

```
git remote set-url <url> 
```

在每个子模块的目录中。

# java - 以编程方式删除按钮

> ID：15752328
> 
> 赞同：1
> 
> 时间：2013-04-01T21:36:43.313
> 
> 标签：java, android, button

在我的代码中，我以编程方式创建按钮，因为在解析文件之前我不知道需要多少按钮

```
buttons= new LinkedList<Button>();
    for(int i=0; i< aList.size();i++)
    {
        Button btn = new Button(this);
        btn.setId(i);
        btn.setOnClickListener(this);
        btn.setText(stringList.get(i));
        btn.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
        buttons.add(btn);
        layout.addView(btn);
    } 
```

这很好用，我只是想知道是否有一种快速的方法可以在创建更多按钮之前删除所有这些按钮（当用户按下单独的按钮时，我将按钮的值更改为新的）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T17:32:01.423

用另一个for循环解决了这个问题

```
for(int i=0; i< aList.size();i++)
    {
        Button btn;
        btn = buttons.get(i);
        layout.removeView(btn);
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-01T23:39:55.320

你可以做这样的事情

```
View v = (View) findViewById(id);
((ViewManager)v.getParent()).removeView(v); 
```

在这里找到：[从布局中添加和删除视图](https://stackoverflow.com/questions/3805599/add-delete-view-from-layout)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-01T22:09:35.357

你可以设置隐形。

```
myButton.setVisibility(View.INVISIBLE); 
```

# ajax - Ember.js + Node.js 身份验证/会话不适用于 Express.Session

> ID：15752331
> 
> 赞同：0
> 
> 时间：2013-04-01T21:36:47.250
> 
> 标签：ajax, node.js, session, express, ember.js

我一直在试验 Ember.js 和 Node.js，但遇到了问题。我已经使用标准`Express.session`系统保护了服务器上的 API 路由，但是当这些 API 服务于 Ember.js 应用程序时我遇到了问题。由于 Ember 应用程序无法将值存储在 中`req.session`，因此我的应用程序无法运行。我应该如何进行身份验证，以便我仍然可以对我的 API 进行会话保护？这是我当前的一些服务器登录代码：

**“检查登录”功能：**

```
var checkLogin = function(req, res, callback) {
    if (req.session.user) {
      callback();
    } else {
      res.send({error: "AuthRequired"});
    }
  }; 
```

**Ember 发出请求时出错：**

```
TypeError: Cannot read property 'user' of undefined 
```

**中间件设置：**

```
app.configure(function () {
  app.use(express.bodyParser());
  app.use(express.static(__dirname + '/static/'));
  app.use(express.cookieParser(<SECRET>));
  app.use(express.session());
  //to not care about invalid JSON requests
  app.use(function(err, req, res, next) {
    if (err.message == 'invalid json')  {
        next()
    } else {
        next(err)
    }
  });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T06:08:43.137

你试过[`Passport`](http://passportjs.org/)吗？
这个中间件将用户添加到您的会话中，我建议尝试它的`passport-local`提供者。
网站上的指南可能不是完整的工作代码，您最好参考`example`git repo 上的文件夹。

**更新**：可能是配置顺序不正确。这是我的`Locomotive`服务器配置（替换`this`为`app`），试试看。

```
this.use(poweredBy(null));
this.use(express.favicon());
this.use(express.logger('dev'));
this.use(express.compress());
this.use(express.cookieParser());
this.use(express.static(__dirname + '/../../public'), { maxAge: 60*10*1000 });
this.use(express.bodyParser());
this.use(express.methodOverride());
this.use(express.session({ secret: '<SECRET>' }));
// Initialize Passport!  Also use passport.session() middleware, to support
// persistent login sessions (recommended).
this.use(flash());
this.use(passport.initialize());
this.use(passport.session());
this.use(this.router); 
```

# python - MATLAB 到 Python 的 fread

> ID：15752333
> 
> 赞同：0
> 
> 时间：2013-04-01T21:36:51.407
> 
> 标签：python, matlab, translation, fread

我基本上想做的是从一些 MATLAB 代码转换为 Python：

MATLAB 代码：

```
 for time = 100:model_times
        for i = 1:5
            indat = fread(fid,[48,40],'real*4');
            vort(:,:,i,time) = indat';
        end
    end 
```

fid 保存正在使用的文件路径（一个 DAT 文件）。vort 预先分配为：vort = zeros(40,48,5,model_times)。model_times 是一个固定整数（例如 100）。

似乎正在发生的事情是 .dat 文件数据作为 48x40 矩阵被读入，然后以固定的 i 和时间（循环计数器）插入到预分配的数组 vort 中。

我在 Python 中尝试过这个：

```
 for time in range(model_times):
        for i in range(5):
            vort[:,:,i,time] = np.fromfile(fid,np.float64) 
```

我收到一条错误消息，提示“ValueError：操作数无法与形状 (40,48) (6048000) 一起广播”。错误发生在上面 Python 代码的最后一行。我还尝试将 .reshape((40,48,5,model_times)) 添加到出现错误的行，但收到​​另一个错误，显示“ValueError：新数组的总大小必须保持不变”。

所以我的问题是，可以处理多维数组的与 MATLAB 的“fread”等价的 Python 是什么？

在从 1 到 10 的范围内，1 是初学者，10 是经验丰富的老手，我大约是 4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:40:40.240

这也应该有效。没有理由你不能在一次阅读中完成所有事情：

```
vort = np.fromfile(fid, np.float64).reshape((model_times,5,48,40)).transpose() 
```

您必须小心地将一维数组重塑为文件中数组索引的本机顺序 (model_times,5,48,40)，然后使用转置将索引重新排序为您想要的 (40,48,5 ,model_times)。如果您尝试直接重塑为后者，您将在错误的位置获取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:53:54.067

我假设您在每次迭代时从二进制文件中读取 48*40 个元素，每个元素的大小为 8 个字节。您的代码正在破坏，因为`np.fromfile`默认情况下会读取每个元素。要解决此问题，请尝试

```
vort = np.zeros( (48,40,5,model_times) )
for time in xrange(model_times):
  for i in xrange(5):
    dat = np.fromfile(fid, dtype=np.float64,count = 48*40)
    vort(:,:,i,time) = dat.reshape((48,40)) 
```

# java - 如何确认我的消息是使用 Android Beam 收到的？

> ID：15752334
> 
> 赞同：1
> 
> 时间：2013-04-01T21:36:51.813
> 
> 标签：java, android, nfc, android-beam

我成功创建了一个通过 NFC/Android Beam 发送数据的应用程序。我正在使用`setNdefPushMessageCallback`并想知道一旦收件人电话收到消息后如何检测？目前，我正在努力区分失败和成功的梁！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T09:52:22.133

[您可以使用NfcAdapter.setOnNdefPushCompleteCallback()](http://developer.android.com/reference/android/nfc/NfcAdapter.html#setOnNdefPushCompleteCallback%28android.nfc.NfcAdapter.OnNdefPushCompleteCallback,%20android.app.Activity,%20android.app.Activity...%29)注册回调。当通过 Beam 传输成功时会调用它。

# c - 硬盘上的连续空间 - NTFS

> ID：15752339
> 
> 赞同：2
> 
> 时间：2013-04-01T21:37:26.250
> 
> 标签：c, database-design, operating-system, filesystems, systems-programming

我的问题是关于 NTFS Fs 上的文件分配方法。

我有两个主要问题-

1.  当我在 NTFS 上创建文件时，它是否连续存储在物理硬盘上？
2.  如果没有 - 有没有办法创建一个文件，这样当我写入它时，数据会连续存储在其中（在硬盘上）？类似于数据库中的范围。
3.  如果存在这样的文件 - 有没有办法从它（使用 C 读取系统调用）中读取数据。我可以使用的最大束大小是多少。

我正在尝试为小型应用程序创建一个基于文件的简单数据库，并希望在文件中创建我的数据库。出于性能原因，我需要将我的数据按连续顺序保存在磁盘上并成批读取。（我计划在我的应用程序中映射这个文件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:27:03.420

根据[这个超级用户的回答](https://superuser.com/a/274867)，您可以[调用`SetEndOfFile`](http://msdn.microsoft.com/en-us/library/aa365531%28VS.85%29.aspx)以向系统提供文件大小提示，这将允许 NTFS 为整个文件分配连续的存储空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-12T05:12:41.063

多任务或多用户操作系统的另一个重要点是，即使文件是连续存储的，驱动器也可能会在文件访问过程中被另一个任务调用以读取或写入。这将导致驱动器完全寻找其他地方。在繁忙的系统上，这可能会不断发生。

操作系统驱动程序可以使用诸如scatter-gather或电梯算法之类的算法，这些算法尝试按照数据在磁盘上出现的顺序安排对各种任务缓冲区的读取或写入，因此磁头可以从内部到顺序扫描外部轨道 - 或反之亦然，沿途拾取或丢弃数据。

电梯算法之所以如此命名，是因为真正的电梯必须根据各楼层乘客的要求，选择最有效的装卸模式。他们不能浪费时间和精力无效率地上下波动。磁盘驱动器磁头定位差别不大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T22:54:17.773

好的，那么让我们逐点回答......

**问题 1**：*当我在 NTFS 上创建文件时，它是否连续存储在物理硬盘上？*

这个问题没有意义。当您创建文件时，NTFS 将在 MFT 中为它需要跟踪的元数据分配空间。小文件实际上可能适合文件的 MFT 记录 - 根据定义，此类常驻文件是连续的。如果文件不适合 MFT，则根据需要分配空间块，它们可能是连续的，也可能不是连续的。一般来说，它不知道你的文件有多大，也不知道要为它预分配多少空间——所以 NTFS 只会根据需要分配空间，尽管你可以通过调用[`SetEndOfFile`](http://msdn.microsoft.com/en-us/library/aa365531%28VS.85%29.aspx)函数来给它一个提示。但这仅提供提示，并**不能保证**文件数据将存储在磁盘的连续区域中。事实上，说服自己即使文件系统执行实时碎片整理，它也永远不能*保证*可用空间作为单个连续的磁盘地址块可用。

* * *

**问题 2**：*如果没有 - 有没有办法创建一个文件，这样当我写入它时，数据会连续存储在其中（在硬盘上）？类似于数据库中的范围。*

为什么你认为这是一个重要的问题？您通常不应该关心文件系统如何存储您的数据；您应该只关心它确实存储数据的事实。您可能认为访问非连续存储的文件会更慢，但不一定如此；高级缓存算法和操作系统的预取通常会完全消除任何减速。如果您关心的是性能，那么您是否有*实际**的硬**数据*表明文件系统的碎片是一个问题？如果是这样，正确的方法是使用不同的文件系统或根本不使用文件系统。

* * *

**问题 3**：*如果存在这样的文件 - 有没有办法从它（使用 C 读取系统调用）中读取数据。我可以使用的最大束大小是多少。*

C 系统调用（如`fread`）不了解 NTFS、碎片、“束”和块。他们所知道的只是如何从指定的文件句柄中读取请求的字节数并将数据放入您提供的缓冲区中。实际上，您可以指定您想要的任何大小，尽管 C 库将调用 O/S 和文件系统特定的 API 来读取块大小的倍数的数据，这是实现定义的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-01T21:46:11.443

1.  有可能。但是您不能保证它连续存储在物理硬盘上。

2.  您可以通过对硬盘的低级原始访问。对于一些大型数据库系统，它们不使用任何文件系统，而是直接写入/读取硬盘。而硬盘中的数据格式是由数据库系统定义的。

3.  无论文件如何物理存储，您都可以在 C 中以块的形式读取它。我认为没有“最大束大小”。但是确实存在“良好的束大小”，例如（文件系统的块大小）* N。

据说文件系统 reiserfs 适合存储大量小文件。但我从未测试过它。

# oracle - Oracle 上下文索引创建脚本

> ID：15752341
> 
> 赞同：1
> 
> 时间：2013-04-01T21:37:40.637
> 
> 标签：oracle, indexing, ddl, oracle-text

我需要为已经存在的索引生成完整的 Oracle CONTEXT 索引创建脚本。

我很确定，我曾经在 Oracle 文档中找到了如何做到这一点，但现在，我不能。我需要类似 DBMS_METADATA.get_ddl 的东西，但更详细。我的意思是当我创建一个索引时

```
CREATE INDEX myindex ON docs(text) INDEXTYPE IS CTXSYS.CONTEXT; 
```

Oracle 默认会做很多事情，比如配置数据存储、停止列表等。我想查看所有隐式调用的 CTX_DDL 过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T17:13:29.577

使用`ctx_report.describe_index`或`ctx_report.create_index_script`：

```
set long 500000
select ctx_report.describe_index('MYINDEX') from dual; 
```

或者

```
select ctx_report.create_index_script('MYINDEX') from dual; 
```

最初在[OracleAskTom](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:37336026927381)上回答。还有另一个[OracleFaqs](http://www.orafaq.com/forum/t/98727/2/)。

[有关创建索引报告的更多信息](http://docs.oracle.com/cd/B10500_01/text.920/a96518/crptpkg.htm)

# php - PHP字符串 - 字符串内的方法调用不像手动那样工作

> ID：15752342
> 
> 赞同：0
> 
> 时间：2013-04-01T21:37:43.387
> 
> 标签：php

我使用以下示例作为发布在 php 手册上的示例，它应该让我在字符串中使用方法调用的返回值...

```
echo "This is the value of the var named by the return value of getName(): {${getName()}}";

function getName()
{
    return "Bob";    
} 
```

但是我得到一个错误：“ `Notice: Undefined variable: Bob`”

此示例来自此处的 php 手册：http: [//php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

是手册错误还是我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:41:16.173

你现在有这个：

```
"... {$getName()}" 
```

这意味着 PHP 正在运行该`getName()`函数，`Bob`然后返回并读取：

```
"... {$Bob}" 
```

现在，他正在尝试获取变量`$Bob`（因为变量是用双引号解析的）。

解决方案是使用单引号并将函数调用放在字符串之外：

```
'... {$'.getName().'}' 
```

或者逃避它：

```
"... \{\$getName()\}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T21:45:08.540

你可以这样做，它应该做你想要的

```
echo "This is the value of the var named by the return value of ".getName();

function getName()
{
    return "Bob";    
} 
```

希望这对你有帮助

# r - 如何省略矩阵中仅包含 NA 的列？

> ID：15752343
> 
> 赞同：2
> 
> 时间：2013-04-01T21:37:44.880
> 
> 标签：r

我有一个矩阵，其中有许多列，其中所有值都是`NA`. 所以我想省略所有完全是`NA`. 那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T23:48:16.587

I assume you only wish to omit columns where all observations are `NA`; your question is somewhat ambiguous.

This code omits columns that are entirely `NA`, for a matrix, `x`, returning only the columns with at least one non-`NA` value:

```
x[,apply(!is.na(x),2,any)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T01:25:25.317

```
mtx[ , -which( colSums(is.na(mtx)) == nrow(mtx) ) ] 
```

如果您想排除 NA 条目超过 50% 的列，则：

```
mtx[ , -which( colSums(is.na(mtx)) > nrow(mtx)/2 ) ] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T21:57:54.643

您可以使用函数“na.omit()”删除包含 NA 观测值的行。此函数删除行并将返回没有 NA 的数据框。

如果您希望删除每个观察值都包含 NA 的列...

我不确定是否有内置的 R 函数可以做到这一点。但是，我们可能会考虑某种用户定义的过程，该过程会删除具有最多 NA 的列......

```
### Assume 'df' is your data frame with observational data:

### Apply a function to check whether each observation contains an NA
count <- sapply(df, is.na)
### Within each column, ask for the number of missing observations
count <- colSums(count)
### Ask R which columns have the most missing observations
index <- which.max(count)
### Subset 'df' to exclude columns with the most NA's
df <- df[, -index] 
```

# javascript - 如何从 Google Map API 函数中获取 javascript lat/lng 变量

> ID：15752345
> 
> 赞同：2
> 
> 时间：2013-04-01T21:37:47.287
> 
> 标签：javascript, google-maps-api-3, google-geocoder

我需要从 Postcode 中获取 Lat/Lng，所以我使用的是 Google Map/Geocode API。

我无法从 Geocode 脚本中运行的函数中获取 lat/lng 变量。我正在使用的代码如下：

```
<input id="address" type="textbox" value="">
<script type="text/javascript">
var lat;
var lng;
function addressurls(address) {
var address = document.getElementById("address").value;
var geocoder = new google.maps.Geocoder();
geocoder.geocode({'address': address}, function postcodesearch(results, status) 
{   
  if (status == google.maps.GeocoderStatus.OK) 
  {
    var lat = results[0].geometry.location.lat();
    var lng = results[0].geometry.location.lng();
  }
  else {
    alert("Error");
  }
  return lat;
  return lng;
});
var laturl = "&lat=";
var lonurl = "&lon=";
var postcode = document.getElementById("address").value;
var addressurl = "/distributors-search?address=" + postcode + laturl + lat+ lonurl + lng;
parent.location=addressurl;
}
</script>
<input type="button" value="Encode" onclick="addressurls('address'), parent.location=addressurl"> 
```

有谁知道如何修理它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T21:59:09.507

地理编码是异步的，需要在回调函数中使用返回的数据

```
<input id="address" type="textbox" value="">
<script type="text/javascript">
var lat;
var lng;
function addressurls(address) {
var address = document.getElementById("address").value;
var geocoder = new google.maps.Geocoder();
geocoder.geocode({'address': address}, function postcodesearch(results, status) 
{   
  if (status == google.maps.GeocoderStatus.OK) 
  {
    var lat = results[0].geometry.location.lat();
    var lng = results[0].geometry.location.lng();
    var laturl = "&lat=";
    var lonurl = "&lon=";
    var postcode = document.getElementById("address").value;
    var addressurl = "/distributors-search?address=" + postcode + laturl + lat+ lonurl + lng;
    parent.location=addressurl;
  }
  else {
    alert("Error");
  }
});

}
</script>
<input type="button" value="Encode" onclick="addressurls('address'), parent.location=addressurl"> 
```

# ios - 将图像分配给表格单元格中的 uiimageview

> ID：15752346
> 
> 赞同：2
> 
> 时间：2013-04-01T21:37:47.853
> 
> 标签：ios, uiimageview

我在自定义表格单元格中有一个图像视图，我需要从表格视图委托中为其分配一张图片

```
 cell.imageViewLeft = [[UIImageView alloc] initWithImage:[UIImage imageNamed:fxObject.thumbnailName]];
    NSLog(@"%@, %@", [UIImage imageNamed:fxObject.thumbnailName],  cell.imageViewLeft.image); 
```

日志给了我：

`<UIImage: 0xb485310>, (null)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:56:18.340

确保您`IBOutlets`的连接正确。

此外，请确保您@`synthesize`您的`imageViewLeft`！

```
cell.imageViewLeft.image = [UIImage imageNamed:fxObject.thumbnailName]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:22:33.090

我不得不初始化属性。

```
- (UIImageView *)imageViewLeft {
if (!_imageViewLeft) {
    _imageViewLeft = [[UIImageView alloc] init];
    _imageViewLeft.contentMode = UIViewContentModeScaleAspectFill;
    _imageViewLeft.clipsToBounds = YES;
    [self.contentView addSubview:_imageViewLeft];
}
return _imageViewLeft;
}

- (UIImageView *)imageViewRight {
if (!_imageViewRight) {
    _imageViewRight = [[UIImageView alloc] init];
    _imageViewRight.contentMode = UIViewContentModeScaleAspectFill;
    _imageViewRight.clipsToBounds = YES;
    [self.contentView addSubview:_imageViewRight];
}
return _imageViewRight;
} 
```

其他一切都保持不变。如果我们在没有 NIB 文件的情况下工作并且没有创建 IBOutlet 属性，我相信这是初始化视图的正确方法。

# css - 如果访问链接，将跨度的宽度设置为 0？

> ID：15752350
> 
> 赞同：-1
> 
> 时间：2013-04-01T21:38:02.787
> 
> 标签：css, hyperlink, width, visited

正如标题所说，一旦访问了链接，我就会尝试设置跨度的宽度。这样做的原因是我们应该在线程旁边显示“New！”标签，但一旦访问链接，它就会消失。他们不想使用 cookie 来跟踪用户，所以我想出了一个想法，在 a:visited 上将显示或可见性设置为无。由于安全问题，这不起作用。

**对我有用的是将背景和文本颜色设置为白色（我知道这不是正确的方法）。**

现在他们想将此标签移动到线程标题的开头。这会在标题前面产生空白问题（作为新的！仍然存在，只是全白）。我虽然我可以简单地将宽度设置为 0，这样就可以了。它没有。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:52:30.950

这应该可以解决问题：

```
span:visited
{ 
display:none;
} 
```

或者使用 jquery：

```
$('span:visited').hide(); 
```

# knockout.js - 摆脱小部件轮廓？

> ID：15752351
> 
> 赞同：0
> 
> 时间：2013-04-01T21:38:03.687
> 
> 标签：knockout.js, durandal

在下面的屏幕截图中，左侧是在普通视图中显示的小部件。右侧是模式中显示的同一个小部件。我不知道如何摆脱轮廓。

![截屏](https://i.stack.imgur.com/hvGRG.png)

# c++ - 高斯-乔丹消除

> ID：15752364
> 
> 赞同：2
> 
> 时间：2013-04-01T21:38:37.430
> 
> 标签：c++, gaussian

我必须设计一个算法作为前向消除的扩展，它在矩阵上进行高斯乔丹消除。我的程序正在执行和创建数字的对角线，但它们并不全是 1。它也不会访问第一行和第一列以将它们更改为 0。最后一列，答案应该在的那一列，没有改变。有什么想法可以让我更接近解决方案吗？

```
#include <cmath>

using namespace std;

double BetterForwardElimination(double A[8][9])
{

//Implements Gaussian elimination with partial pivoting
//Input: Matrix A[1..n,1..n] and column-vector b[1..n]
//Output: An equivalent upper-triangular matrix in place ofAand the
//corresponding right-hand side values in place of the (n+1)st column

    //size of array
    int n = 8;
    //int n = sizeof(A)/sizeof(A[0]);

for (int i = 1; i<n; i++)
{
    int pivotrow = i;
    for (int j=i+1; j<n; j++)
    {
        if (A[j][i] > A[pivotrow][i])
        {
            pivotrow = j;
        }
    }

    for (int k=i; k<n-1; k++)
    {
        swap(A[i][k], A[pivotrow][k]);
    }

    for (int j=i+1; j<n; j++)
    {
        //int temp = A[j][i]/A[i][i];
        for (int k = i; k<n; k++)
        {
            A[j][k] = A[j][k] - A[i][k]*(A[j][i]/A[i][i]);
        }
        A[i][j] = 0;
    }
}

return A[n][n];
} 
```

我的输出是这样的：

```
1   1   1   1   1   1   1   1   0   
1   2   0   0   0   0   0   0   0   
1   0   3   0   0   0   0   0   0   
1   0   0   4   0   0   0   0   0   
11  0   0   0   5   0   0   0   20  
1   0   0   0   0   1   0   0   34  
1   0   0   0   0   0   1   0   -51 
1   0   0   0   0   0   0   -1  -6 
```

预期输出应该是：

```
1   0   0   0   0   0   0   0   2   
0   1   0   0   0   0   0   0   3   
0   0   1   0   0   0   0   0   5   
0   0   0   1   0   0   0   0   7   
0   0   0   0   1   0   0   0   -7  
0   0   0   0   0   1   0   0   -5  
0   0   0   0   0   0   1   0   -3  
0   0   0   0   0   0   0   1   -2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T05:28:04.887

根据算法，`A[j][i] > A[pivotrow][i]`应该是`|A[j][i]| > |A[pivotrow][i`]|，两者都是绝对值。你的交换功能在哪里？我不认为 C++ 有它自己的`swap(int[][] a, int[][]b)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-16T22:08:48.643

我刚刚创建了一个[QMatrix](https://moldovean@bitbucket.org/moldovean/qmatrix.git%20%22QMatrix)类。它使用内置的矢量 > 容器。

您可以按如下方式使用它：

```
#include "QMatrix.h"
#include <iostream>

int main(){
QMatrix<double> A(3,3,true);
QMatrix<double> Result = A.inverse()*A; //should give the idendity matrix

std::cout<<A.inverse()<<std::endl;
std::cout<<Result<<std::endl; // for checking
return 0;
} 
```

如果你想看看它是如何工作的，反函数的实现如下：

该类具有以下字段：

```
template<class T> class QMatrix{
public:
int rows, cols;
std::vector<std::vector<T> > A; 
```

逆（）函数：

```
template<class T> 
QMatrix<T> QMatrix<T>:: inverse(){
Identity<T> Id(rows); //the Identity Matrix as a subclass of QMatrix.
QMatrix<T> Result = *this; // making a copy and transforming it to the Identity matrix
T epsilon = 0.000001;
for(int i=0;i<rows;++i){
    //check if Result(i,i)==0, if true, switch the row with another

    for(int j=i;j<rows;++j){
        if(std::abs(Result(j,j))<epsilon) { //uses Overloading()(int int) to extract element from Result Matrix
            Result.replace_rows(i,j+1); //switches rows i with j+1
        }
        else break;
    }
    // main part, making a triangular matrix
    Id(i)=Id(i)*(1.0/Result(i,i));
    Result(i)=Result(i)*(1.0/Result(i,i));  // Using overloading ()(int) to get a row form the matrix
    for(int j=i+1;j<rows;++j){
        T temp = Result(j,i);
        Result(j) = Result(j) - Result(i)*temp;
        Id(j) = Id(j) - Id(i)*temp; //doing the same operations to the identity matrix
        Result(j,i)=0; //not necessary, but looks nicer than 10^-15
    }
}

// solving a triangular matrix 
for(int i=rows-1;i>0;--i){
    for(int j=i-1;j>=0;--j){
        T temp = Result(j,i);
        Id(j) = Id(j) - temp*Id(i);
        Result(j)=Result(j)-temp*Result(i);
    }
}

return Id;
} 
```

它工作得很好......但应该有办法在不影响灵活性的情况下提高它的速度。

# powershell - PowerShell AD - 创建具有组成员身份的 CSV

> ID：15752372
> 
> 赞同：0
> 
> 时间：2013-04-01T21:39:12.823
> 
> 标签：powershell, active-directory

我需要查询一个 AD OU 并列出所有具有关于其帐户和组成员身份的多个属性的用户。CSV 格式将是：

```
First Name  Last Name   SamAct         Active    New-UserGroup    Old-UserGroup
BIll        Gates       bill.gates     YES       YES              NO
Steve       Jobs        steve.jobs     NO        No               YES 
```

是，否是“他是否活跃”和“他是否是该组的成员”

我几乎完成了以下代码，除了我无法弄清楚如何正确确定他是否是组成员。

有什么建议吗？？

```
function getADAccountStatus($adUserObj)
{
  if($adUserObj.AccountIsDisabled)
  { return "NO";}
  else { return "YES";}
}
function getNGStatus($adUserObj)
{
   if($_.memberof -contains 'New_Usergroup')
  {return "YES"; }
  else  {return "NO"; }
}

$ReportPath = "c:\scripts\report.csv"
$ou = 'OU=Group,DC=domain,DC=com'

$records = Get-QADUser -SearchRoot $ou | Select LastName,FirstName,SamAccountName,memberof

$records | foreach{

  new-object psobject -Property @{
  $LastName = $_.LastName
  $FirstName = $_.FirstName
  Account = $_.SamAccountName
  Active = getADAccountStatus($_)
  NG = getATCStatus($_)

  }} | Select $LastName,$FirstName,Account,Active,NG | Export-Csv $ReportPath -Force -ErrorAction Stop -NoTypeInformation 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:12:32.077

该`memberOf`属性包含用户辅助组的可分辨名称列表，因此您必须像这样检查：

```
function getNGStatus($adUserObj) {
  $groupName = 'CN=New_Usergroup,CN=Users,DC=example,DC=com'
  if ($adUserObj.memberOf -contains $groupName) {
    return "YES"
  } else {
    return "NO"
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:03:11.040

这是我要工作的内容：

```
function getADAccountStatus($adUserObj)
{
if($adUserObj.AccountIsDisabled)
{
    return "NO";
}
else
{
    return "YES";
}
}

function getNGStatus($adUserObj)
{   
$group = @(($_.MemberOf -split (“,”)  | Select-string -SimpleMatch "CN=") -replace “CN=”,”")
if($group -contains 'New_Usergroup')
{
    return "YES";
}
else
{
    return "NO";
}
}

$ReportPath = "c:\scripts\report.csv"
$ou = 'OU=Group,DC=domain,DC=com'

$records = Get-QADUser -SearchRoot $ou | Select LastName,FirstName,SamAccountName,memberof

$records | foreach{
new-object psobject -Property @{
LastName = $_.LastName
FirstName = $_.FirstName
Account = $_.SamAccountName
Active = getADAccountStatus($_)
NG = getNGStatus
}} | Select LastName,FirstName,Account,Active,NG | Export-Csv $ReportPath -Force -ErrorAction Stop -NoTypeInformation 
```

# c# - 正则表达式匹配双引号

> ID：15752373
> 
> 赞同：0
> 
> 时间：2013-04-01T21:39:25.543
> 
> 标签：c#, xml, regex, double-quotes

这种模式一直给我错误，就好像它没有退出双引号一样。我正在尝试抓住“Gen”

```
string str = "<div type=\"book\" osisID=\"Gen\">";

Match m = Regex.Match(str, @"<div type=\"book\" osisID=\"(.*?)\">", RegexOptions.IgnoreCase);

if (m.Success) {    
    Console.Write(m.Groups[1].Value);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T21:42:03.667

使用 XML 解析机制解析 XML：

```
var doc = XDocument.Parse(xml)
var root = doc.Root
var osisId = root.Attribute("osisID").Value; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T21:45:24.047

在 C# 逐字字符串中，您可以使用另一个引号而不是反斜杠来转义引号：

```
 @"<div type=""book"" osisID=""(.*?)"">" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T21:45:26.047

假设您有比刚刚发布的更复杂的 html 并且已经阅读过[这个](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

```
string str = "<div type=\"book\" osisID=\"Gen\">";

var doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(str);
var osisID = doc.DocumentNode
                .SelectSingleNode("//div[@type='book']")
                .Attributes["osisID"]
                .Value; 
```

PS：[HTMLAgilityPack](http://htmlagilitypack.codeplex.com/)

# javascript - html/js Windows 8 People 应用程序（Facebook、Twitter）共享除 URI 之外的任何内容

> ID：15752377
> 
> 赞同：0
> 
> 时间：2013-04-01T21:39:34.370
> 
> 标签：javascript, windows-8, microsoft-metro, windows-store-apps

我正在尝试使用共享合同将一些内容从 Windows 8 应用程序（用 html / js 编写）共享到使用 People 应用程序的 facebook 和 twitter。

我仔细研究了示例应用程序（[http://code.msdn.microsoft.com/windowsapps/Sharing-Content-Source-App-d9bffd84/sourcecode?fileId=43982&pathId=1680766409](http://code.msdn.microsoft.com/windowsapps/Sharing-Content-Source-App-d9bffd84/sourcecode?fileId=43982&pathId=1680766409)），似乎什么都没有支持 URI 以外的其他内容。我希望能够在两者中设置默认消息（用户当然可以编辑）。或者一些丰富的html，或者什么的。

我试过了：

*   文本：仅显示邮件应用程序
*   图片：只是邮件和skydrive html
*   内容：人脉应用程序出现，但随后错误提示“人脉应用程序无法共享此内容。请尝试与其他应用程序共享，例如邮件。”

对于 Facebook，这并不是致命的，因为缩略图和描述是从 URI 中获取的，但是如果用户选择 twitter，您得到的只是 url 和添加消息的选项：这不是特别好的用户体验。

似乎比这更好的事情*必须*是可能的。任何和所有想法都深受赞赏。

# ruby - 无法使用 Watir (Ruby) 选择下拉选项

> ID：15752381
> 
> 赞同：0
> 
> 时间：2013-04-01T21:39:54.793
> 
> 标签：ruby, salesforce, watir

我无法让 Watir 从下拉列表中选择正确的选项。我正在尝试从中选择：

```
<select id="j_id0:theForm:ruleTypeSelector" onkeypress="return suppressEnter(event);" size="1" name="j_id0:theForm:ruleTypeSelector">
    <option value="ExecutionOrder">Pricing Administration</option>
    <option value="AccountSpecific">Account Specific Pricing</option>
    <option value="AssociatedProduct">Associated Product Pricing</option>
    <option value="MaintenanceProduct">Maintenance Product Pricing</option>
    <option value="Tiered">Tiered Pricing</option>
    <option value="Volume">Volume Pricing</option>
</select> 
```

我需要选择第二个选项 AccountSpecific，但它不起作用。

我试过

```
option = browser.select_list(:id => /.*ruleTypeSelector.*/).select("AccountSpecific") 
```

和

```
option = browser.select_list(:id => /.*ruleTypeSelector.*/).option(:value => "AccountSpecific")
browser.select_list(:id => /.*ruleTypeSelector.*/)
option.wait_until_present
option.select
browser.button(:value => "Go").click 
```

但两次，它都会选择第一个选项 ExecutionOrder。

为什么这不起作用？我还能尝试什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:35:02.973

```
 browser.select_list(:id => /.*ruleTypeSelector.*/).option(:text =>"Account Specific Pricing").when_present.select 
```

# php - 模拟一个类，编辑一个方法并使用另一个

> ID：15752389
> 
> 赞同：1
> 
> 时间：2013-04-01T21:40:28.180
> 
> 标签：php, unit-testing, mocking, mockery

我正在尝试测试一种方法，这取决于另一种方法。第一种方法注册一个用户，但必须检查给定的用户名是否可用。

我尝试了一些测试类

```
class Test {
    public function a() {
        return "ac";
    }

    public function b() {
        return $this->a();
    }
} 
```

我想模拟类并编辑方法“a”的行为。

我试过以下

```
$m = new Test();

$mock = \Mockery::mock($m);
$mock->shouldReceive("a")
         ->andReturn("ad");

echo $mock->b(); 
```

但是方法“a”保持不变。

我如何编辑方法“a”的行为，或者，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T14:02:42.467

你可以写一个像这样的测试：

```
public function testMethodB() 
{
    $test = \Mockery::mock('Test[a]');
    $test->shouldReceive('a')->andReturn('ad');

    assertEquals('ad', $test->b());
} 
```

我认为它有效！

# python - 如何判断 python 实例是否被编译为框架？

> ID：15752390
> 
> 赞同：2
> 
> 时间：2013-04-01T21:40:28.570
> 
> 标签：python, macos

如何判断给定的 Python 实例（在 OS X 上）是否使用`--enable-framework`标志编译？

我尝试过的一件事并不完全是决定性的：

```
% python -c 'import sysconfig, pprint; pprint.pprint(sysconfig.get_config_vars())' | grep -i framework
 'LIBS': '-ldl  -framework CoreFoundation',
 'PYTHONFRAMEWORK': '',
 'PYTHONFRAMEWORKDIR': 'no-framework',
 'PYTHONFRAMEWORKINSTALLDIR': '',
 'PYTHONFRAMEWORKPREFIX': '',
 'RESSRCDIR': 'Mac/Resources/framework',
 'SHLIBS': '-ldl  -framework CoreFoundation',
 'WITH_NEXT_FRAMEWORK': 0, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T22:01:05.510

OS X 框架构建的最终测试：

```
./configure --enable-framework ... 
```

是`PYTHONFRAMEWORK`Python 构建配置变量中的存在。这个成语在整个 Python 标准库中使用：

```
if get_config_var("PYTHONFRAMEWORK"):
    # framework build 
```

例如，参见模块本身第 221 行的[这个测试。](http://hg.python.org/cpython/file/v3.3.0/Lib/sysconfig.py)`sysconfig`

# java - 如果递归函数不在循环中，则在索引大于某个数字时获取 StackOverflowError

> ID：15752393
> 
> 赞同：0
> 
> 时间：2013-04-01T21:40:40.333
> 
> 标签：java, recursion, stack-overflow

如果我下面的代码不在 for() 循环中，当我的“n2”值超过 7853 时，我很难理解为什么会出现 StackOverflowError。

这是代码：

```
package tp3;

import java.util.Date;
public class TP3 {

//Somme des fractions Récursive
public static double somFractionsRecursive(double index) throws IllegalArgumentException{
    if (index == 0) throw new IllegalArgumentException("Erreur: impossible de diviser par zéro");
    if (index == 1) return 1/index;

    double reponse = (1/index) + somFractionsRecursive(index-1);

    return reponse;
}

//Somme des fractions itérative
public static double somFractionsIterative(double index) throws IllegalArgumentException{
if (index == 0) throw new IllegalArgumentException("Erreur: impossible de diviser par zéro");
double reponse = 0;
for (double i = 1; i <= index; i++) {
 reponse += 1/i ;
}
    return reponse;
}

public static void main(String[] args) {
    Date d = new Date();

    double n1 = 999, n2 = 7853;

    System.out.println("\n\nTemps requis pour trouvers somFraction("+n1+") en récursivité: ");
    d = new Date();
    long debut = d.getTime();
    System.out.println("somFractionsRecursive("+n1+") = " + somFractionsRecursive(n1));
    d = new Date();
    long fin = d.getTime();
    System.out.println("Terminé! Temps requis: "+((fin-debut))+" milisecondes");

    System.out.println("\n\nTemps requis pour trouvers somFraction("+n2+") en récursivité: ");
    d = new Date();
    debut = d.getTime();
    System.out.println("somFractionsRecursive("+n2+") = " + somFractionsRecursive(n2));
    d = new Date();
    fin = d.getTime();
    System.out.println("Terminé! Temps requis: "+((fin-debut))+" milisecondes");

    System.out.println("\n\nTemps requis pour trouvers somFraction("+n1+") en itération: ");
    d = new Date();
    debut = d.getTime();
    System.out.println("somFractionsIterative("+n1+") = " + somFractionsIterative(n1));
    d = new Date();
    fin = d.getTime();
    System.out.println("Terminé! Temps requis: "+((fin-debut))+" milisecondes");

    System.out.println("\n\nTemps requis pour trouvers somFraction("+n2+") en itération: ");
    d = new Date();
    debut = d.getTime();
    System.out.println("somFractionsIterative("+n2+") = " + somFractionsIterative(n2));
    d = new Date();
    fin = d.getTime();
    System.out.println("Terminé! Temps requis: "+((fin-debut))+" milisecondes");

  }// End Main
}// End TP3 Class 
```

但是，我将最后一段代码放在 for() 循环中，我可以毫无问题地获得高达 9999 的“n2”变量

以下代码没有给我 StackOverflowError：

```
 // Functions are the same as above...
 System.out.println("\n\nTemps requis pour trouvers somFraction("+n1+") en itération: ");
    d = new Date();
    debut = d.getTime();
    for (int i = 1; i <= n1; i++) {
        System.out.println("somFractionsIterative("+i+") = " + somFractionsIterative(i));
    }
    d = new Date();
    fin = d.getTime();
    System.out.println("Terminé! Temps requis: "+((fin-debut))+" milisecondes");

    System.out.println("\n\nTemps requis pour trouvers somFraction("+n2+") en itération: ");
    d = new Date();
    debut = d.getTime();
    for (int i = 1; i <= n2; i++) {
        System.out.println("somFractionsIterative("+i+") = " + somFractionsIterative(i));
    }
    d = new Date();
    fin = d.getTime();
    System.out.println("Terminé! Temps requis: "+((fin-debut))+" milisecondes"); 
```

对不起，我对此很陌生！并一如既往地感谢您的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:44:44.390

递归调用每次迭代的方法，而迭代不会。由于您正在调用一个新方法，因此会创建一个新的堆栈帧并将其推送到堆栈上。如果您正在迭代，您可能会永远走下去（无限循环），而使用递归，您会不断消耗更多内存。本教程可以帮助您了解堆栈。[http://www.javatutorialhub.com/java-stack-heap.html](http://www.javatutorialhub.com/java-stack-heap.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:48:47.927

由于其主体中的递归，您一次又一次地调用 somFractionsRecursive。堆栈内存不是无限的，因此您会遇到异常。

# javascript - 加粗字段标签，调整 Dynamics CRM 2011 中的字段大小？

> ID：15752397
> 
> 赞同：0
> 
> 时间：2013-04-01T21:40:53.343
> 
> 标签：javascript, crm, field, microsoft-dynamics

我认为使用 Xrm 是不可能的。框架，但我不得不问。我们的字段旁边有标签，我们想要加粗的是小计。如果不通过 document.getElementById 并以某种方式设置它，我看不到任何方法，但从我读到的内容来看，这是完全不受支持的。同样，我们希望设置一些字段以占用更精确的空间量，而不仅仅是 25%、33%、50%、66%、75% 和 100%，因为某些文本输入字段太长了，比如 40 个字符宽，只需要 7 个字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T22:10:48.777

我不知道一种支持的方式来做到这一点，但要设置粗体看看：

```
document.getElementById("new_name").style.fontWeight="bold"; 
```

控件的空间更复杂，但你可以用粗体做同样的事情，但会影响字段的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T11:23:57.380

它适用于我下面的代码和参数`'MYCustomField_c'`：

```
function BoldLabel(LabelName) 
{ 
   document.getElementById(LabelName).style.fontWeight="bold";
} 
```

# c# - 使用c#将列表映射到字典时如何过滤值

> ID：15752398
> 
> 赞同：0
> 
> 时间：2013-04-01T21:40:55.530
> 
> 标签：c#, list, dictionary

我正在尝试将两个列表映射到字典，但我得到错误“具有相同键的对象已经存在于......”

```
List<string> columnValue = new List<string>(); 
List<string> xpathValue = new List<string>();

var dic = columnValue.Zip(xpathValue, (k, v) => new { k, v}).Distinct().ToDictionary(x => x.k, x => x.v); 
```

有谁知道如何解决这个问题..谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:43:57.717

`Distinct`查看整个对象，因此所有属性必须相同才能将对象视为相等。如果您的列表之后`Zip`有两个相同`k`但不同的元素，`v`则`ToDictionary`.

试试那个：

```
var dic = columnValue.Zip(xpathValue, (k, v) => new { k, v})
                     .GroupBy(x => x.k)
                     .ToDictionary(g => g.Key, g => g.First().v); 
```

它按 , 对元素进行分组，并添加到每个组中第一个元素的`k`字典中。`v`这解决了您的`Distinct`方法使用问题。

# javascript - 匿名 qt 脚本函数的上下文？

> ID：15752401
> 
> 赞同：1
> 
> 时间：2013-04-01T21:41:05.580
> 
> 标签：javascript, qt, qtscript

我想从 c++ 执行一个匿名 Qt 脚本函数，但无法确定要使用的 QScriptContext。

这是脚本：

```
{
  otherObject.Text = "Hello World";
  setTimeout(function(otherObject) { otherObject.Text = "Goodbye World"; }, 9000 );
} 
```

这是 c++ 中的 setTimeout 方法：

```
QScriptValue setTimeout( QScriptContext* ctx, QScriptEngine* eng )
{
  // How can I obtain the correct context and arg list for the anonymous function here?
} 
```

QScriptValue 对象的调用方法需要一个上下文和参数列表：

```
call( ctx->thisObject(), ctx->argumentsObject() ); 
```

编辑：上下文可以是全局上下文，但构建参数列表来调用函数似乎是问题的症结所在。我没有看到任何解释如何从 C++ 构建“参数对象”的内容。有一个属性叫“arguments”但是好像没有填写，或者我还没想好怎么用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:19:20.493

如果我们只看这个 javascript 代码：

```
{
    otherObject.Text = "Hello World";
    setTimeout(function(otherObject) { otherObject.Text = "Goodbye World"; }, 9000 );
} 
```

setTimeout 被告知等待 9000，然后调用匿名函数。但是，问题是匿名函数有一个参数。并且 setTimeout 函数不知道传递什么参数给函数。

```
<html>
<script>
var otherObject = 'Hello World';
setTimeout(function(otherObject){alert(otherObject);}, 1000);
</script>
</html> 
```

如果您在 chrome 中尝试此代码，它会警告 undefined，因为 setTimeout 函数不知道将什么传递给匿名函数，它只是不传递任何参数。

但如果你试试这个：

```
<html>
<script>
var otherObject = 'Hello World';
setTimeout(function(){alert(otherObject);}, 1000);
</script>
</html> 
```

它会提醒 Hello world，因为现在 otherObject 不再是匿名函数的参数，而是与匿名函数形成闭包的局部变量。

因此，为了使您的代码正常工作，setTimeout 函数应该与浏览器的 setTimeout 函数不同。如果要从 C++ 端设置匿名函数的参数，可以执行以下操作：

```
QScriptValue setTimeout( QScriptContext* ctx, QScriptEngine* eng )
{
    QScriptValue anonymous_callback = ctx->argument(0);
    QScriptValue time = ctx->argument(1);
    QThread::sleep(time.toInt32())
    // Then Invoke the anonymous function:
    QScriptValueList args;
    otherObjectProto * otherObjectQtSide = new otherObjectProto();
    otherObjectQtSide.setProperty("Text","Goodbye World!");
    QScriptValue otherObject = engine->newQObject(otherObjectQtSide);// engine is pointer to the QScriptEngine instance
    args << otherObject;
    anonymous_callback.call(QScriptValue(),args);
} 
```

为简单起见，我没有包括三件事：

1.  otherObjectProto 未实现。看[这里](http://www.qtcentre.org/threads/47245-QtScript-Prototype-based-inheritance-wrappers-and-setDefaultPrototype%28%29)的例子。

2.  QThread::sleep 正在阻塞当前线程，这可能不是我们所希望的，但可以很容易地使用 QTimer 将其修改为异步。

3.  engine->newQObject 还有其他参数，定义了 QObject 的所有权，如果你不想内存泄漏，最好读一下。

# mongodb - MongoDB：如何存储人名以对多个名称进行不区分大小写的索引查询？

> ID：15752404
> 
> 赞同：1
> 
> 时间：2013-04-01T21:41:32.460
> 
> 标签：mongodb

**快速总结：**

我有一个文档集合，其中每个文档都有一个名称数组；当用户输入姓名列表时，我想在文档的姓名列表中查找所有用户输入姓名的所有文档。命中索引会更好，因为我们当前使用的策略需要几秒钟。

**背景：**

我正在尝试提高我们对患者姓名的查询的性能。人名很复杂，给我带来了两个大问题：

1.  人们有多个名字。或者也许他们没有。他们可能会以随机顺序给他们
2.  人名不区分大小写（至少，我们假设对他们的查询不应该是），并且 mongodb 目前不支持[不区分大小写的索引](https://jira.mongodb.org/browse/SERVER-90)。

为了解决问题 #1，我们将患者姓名拆分并将其存储为数组。为了解决问题 #2，我们在拆分之前将名称小写。我们还按字典顺序对数组进行排序（不确定这是否需要？）。

所以这些“名字”在我们的文档中都变成了 ["dupe", "uid"]：

*   “UID^DUPE”
*   “UID，骗子”
*   “UID 欺骗”
*   “欺骗 UID”

然后，我们可以进行一个将命中索引的查询：

```
db.mycollection.find({"data.crunchedName":/^dup/}, {_id:0, "data.crunchedName":1}).explain() 
```

根据 explain() 命中索引：

```
{
"cursor" : "BtreeCursor data.crunchedName_ multi",
"nscanned" : 13,
"nscannedObjects" : 12,
"n" : 12,
"millis" : 0,
"nYields" : 0,
"nChunkSkips" : 0,
"isMultiKey" : true,
"indexOnly" : false,
"indexBounds" : {
    "data.crunchedName" : [
        [
            "dup",
            "duq"
        ],
        [
            /^dup/,
            /^dup/
        ]
    ]
}
} 
```

尽管无论出于何种原因，我都无法将其显示为“仅索引”。我认为这在实践中并不重要。

如果我尝试使用 $and 绑定多个名称，则只有第一个名称会命中索引。因此，根据名称的顺序，存在潜在的性能差异。我认为这一定是因为没有办法在列表中的成对事物上指定索引。我不确定您是否愿意这样做，因为索引会很大。

**我的实际问题：**

这是一个体面的方法吗？如果用户决定键入“S Alexander”之类的内容，是否还有其他选项不会出现性能问题？有没有一些我找不到的使用 mongo 解决这个问题的规范方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T05:06:55.083

就使用 MongoDB 进行索引而言，您可以考虑几种不同的方法。

### 多键索引

索引名称和变体的一种常用方法是实现基于搜索词数组的多键搜索（正如您所做的那样）。MongoDB 手册中也有一个例子：[Model Data to Support Keyword Search](http://docs.mongodb.org/manual/tutorial/model-data-for-keyword-search/)。使用这种方法，您可以索引多个相关关键字以进行搜索，并控制其他关键字。索引词通常以小写形式存储，具有常见的变体，因此您不必使用正则表达式匹配。 只有当正则表达式区分大小写并且在匹配字符串的开头有一个锚 (^) 时，正则[表达式匹配才能有效地使用索引。](http://docs.mongodb.org/manual/reference/operator/regex/)

### MongoDB 2.4 文本搜索

MongoDB 2.4 引入了一个新的[文本搜索功能](http://docs.mongodb.org/manual/core/text-search/)，它也可以帮助您的用例。对于 2.4 版本，此功能仍被视为“测试版”，必须[明确启用](http://docs.mongodb.org/manual/tutorial/enable-text-search/)。*文本*索引不区分大小写，搜索结果按排名顺序返回。如果您在文本索引中包含多个字段（例如，“last_name”和“first_name”），您还可以设置[字段权重](http://docs.mongodb.org/manual/tutorial/control-results-of-text-search/)以用于计算相关性。值得注意的是，文本搜索功能包括[基于语言的词干提取](http://docs.mongodb.org/manual/reference/text-search/#text-search-languages)这有助于正常搜索的相关性（其中多个单词可以共享一个共同的词根），但对于匹配患者姓名可能没有那么有用（如果名称输入不正确，您可能需要更模糊的匹配）。

### 患者姓名的模糊匹配

对于名称匹配，有几种常见的[语音算法](http://en.wikipedia.org/wiki/Phonetic_algorithm)来实现“听起来像”匹配。这些具有不同的效果，具体取决于文化差异，例如拼写、发音和名称语料库中使用的语言。

一篇很好的概述文章是[Using Fuzzy Matching to Search by Sound with Python](http://www.doughellmann.com/articles/how-tos/phonetic-hashing/index.html)，其中包括：

*   [声讯](http://en.wikipedia.org/wiki/Soundex)
*   [纽约证券交易所](http://en.wikipedia.org/wiki/NYSIIS)
*   [变音器](http://en.wikipedia.org/wiki/Metaphone)

### 建议的方法

我认为您最好的方法是将多键索引与语音算法结合使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T05:29:50.533

这看起来是一种合理的方法。您可能会尝试的一种替代方法是将*所有*排列存储在文档中，这样您就可以避免该`$and`操作。您也许还可以存储允许精确匹配而不是以正则表达式开头的初始加姓氏变体。

有些记录会有很多排列，但我认为大多数记录只有两个名称和很少的排列，例如

```
["John Smith", "Smith John", "J Smith", "John S"] 
```

这种方法还可能允许您存储一些常见的替代品，例如 Catherine、Cat、Kate。或者，您可以通过将所有备选方案映射到某些规范形式来处理这个问题。

您可以使用 RegEx 搜索执行其他技巧来[查找部分匹配](http://blog.abodit.com/2011/11/mongodb-substring-search-with-a-difference/)项，但我认为这在这种情况下无济于事。

# powershell - powershell中作用域变量的正确用法是什么？

> ID：15752406
> 
> 赞同：2
> 
> 时间：2013-04-01T21:41:37.003
> 
> 标签：powershell

我一直在编写代码的方式是我一直在制作单独的 ps1 文件来完成特定的任务。在这样做时，我注意到一个文件中的脚本可以访问调用脚本的变量。

出于我有限的目的，我不认为我会想要拥有全局变量，因为我希望每个 ps1 文件都充当一个函数，传递它需要的参数。

我应该为我创建的每个变量定义一个范围吗？有没有办法强制 ps1 文件中的所有变量在范围内都是本地的？还是我需要为每个变量设置范围？

编辑（未经测试的简化代码来演示）：

第二个文件将从第一个文件打印 $month。这意味着它是全局的，而不仅仅是 file1.ps1 的本地。我不想要全局变量，因为我宁愿传递其他脚本需要的东西。是否应该将 file2.ps 定义为防止这种情况的函数？

```
file1.ps1:

$date = Get-Date
$month = $date.Month

./file2.ps1

---------------------
file2.ps1:

write-host $month

================================= 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:55:19.640

除非您将其声明到特定范围，否则任何变量都将在本地范围内自动创建。`Script`是脚本文件基础中命令的本地范围，function 是函数内命令的本地范围。全局是会话的“本地范围”（例如，您直接在控制台中写入的命令）。前任：

MyScript.ps1

```
$myscriptvar = "This is in a local SCRIPT scope"

function test {
    $myfuncvar = "This is in the local scope for the function"
    #I can READ $myscriptvar in here, but if I define it (ex $myscriptvar = 2), 
    #the change will exist in a LOCAL variable ($function:myscriptvar) in the function only.
}

test 
```

安慰

```
$myglobalvar = @"
This is in the global scope and can be read by 
the script and the function inside the script, but any changes will be saved in 
their local scope if not specified like $global:mygloblvar
"@

.\MyScript.ps1 
```

因此，默认情况下，所有变量都是在“本地”范围内创建的，它只取决于您定义它的位置（在控制台、脚本文件、函数中）。

**使用脚本**编辑示例：****

 **无标题2.ps1

```
"In script2, `$myvar is: $:myvar"
"In script2, `$script:myvar is: $script:myvar"
$myvar = "lol" 
```

无标题1.ps1

```
$myvar = "Hey"
.\Untitled2.ps1
$myvar 
```

安慰

```
PS > .\Untitled1.ps1
In script2 , $myvar is: Hey
In script2 , $script:myvar is:
Hey 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:37:05.187

实际上，我认为您问题的最重要方面尚未得到解决：*范围污染*。范围污染是一个非常合理的问题，可能比您的示例所暗示的更麻烦。考虑以下两个脚本

```
=========== script1.ps1 ============
$month = "jan"
$year = "1999"    
. .\script2.ps1    
"Date in script1 is {0}, {1}" -f $month, $year
=========== END script1.ps1 ============

=========== script2.ps1 ============
$year = "2013"
"Date in script2 is {0}, {1}" -f $month, $year
$month = "feb"
=========== END script2.ps1 ============ 
```

输出是这样的：

```
Date in script2 is jan, 2013
Date in script1 is feb, 2013 
```

也就是说，不仅 script2——所谓的“子”——可以访问 script1 的变量，而且 script1——所谓的“父”——也可以访问 script2 的变量！原因是 dot-sourcing 脚本不是父子关系；点源实体与点源实体相当。就好像剧本写的一样

```
$month = "jan"
$year = "1999"
$year = "2013"
"Date in script2 is {0}, {1}" -f $month, $year
$month = "feb"
"Date in script1 is {0}, {1}" -f $month, $year 
```

您认识到存在范围问题这一事实意味着您至少应该考虑正确封装的功能和模块。如需进一步阅读，请查看我在 Simple-Talk.com 上的几篇文章：

*   [深入兔子洞：PowerShell 管道、函数和参数研究](http://www.simple-talk.com/dotnet/.net-tools/down-the-rabbit-hole--a-study-in-powershell-pipelines,-functions,-and-parameters/)
*   [进一步深入兔子洞：PowerShell 模块和封装](http://www.simple-talk.com/dotnet/.net-tools/further-down-the-rabbit-hole-powershell-modules-and-encapsulation/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T21:45:12.047

一般来说，默认范围（即没有修饰符）几乎总是足够的，除非您需要用其他范围覆盖它：

> 您包含在范围中的项目在创建它的范围和任何子范围中都是可见的，除非您明确将其设为私有。

如果您创建一个函数，它将有自己的作用域。您在函数中声明的任何变量都将被限制在该范围内（函数内部）。**

# python - 请向我解释一下这个python代码是什么意思？

> ID：15752413
> 
> 赞同：5
> 
> 时间：2013-04-01T21:42:52.807
> 
> 标签：python, python-2.7

我还在学习python，但这段代码似乎超出了我的水平。这是什么意思？

```
 pairs = [s2 for s1 in qs.split('&') for s2 in s1.split(';')] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-01T21:46:48.787

您可以将任何列表推导转换为等效的显式循环，如下所示：

```
pairs = []
for s1 in qs.split('&'):
    for s2 in s1.split(';'):
        pairs.append(s2) 
```

规则是获取所有的`for`and`if`子句，按照它们出现的顺序嵌套它们，然后是第一个子句之前的`append(foo)`任何内容。`foo`

[List Comprehension](http://docs.python.org/3/tutorial/datastructures.html#list-comprehensions)的教程部分（以及 Nested List Comprehensions 的小节）解释了这一点……但它没有为您提供将任何理解转换为嵌套块语句的简单规则，这（在我看来）使它更容易理解除了微不足道的案例。

还值得注意的是[`urllib.parse.parse_qsl`](http://docs.python.org/3/library/urllib.parse.html#urllib.parse.parse_qsl)（或`urlparse.parse_qsl`在 2.x 中）是解析查询字符串的更好方法。除了它不涉及难以阅读的嵌套列表理解这一事实之外，它还可以正确处理您事先不会考虑的各种事情（例如引用），并且最终会为您的其中一个进行调试不知道如何提交有用的错误报告的用户。

# jquery - jquery carousel - 没有插件

> ID：15752414
> 
> 赞同：2
> 
> 时间：2013-04-01T21:42:56.427
> 
> 标签：jquery, carousel

我想用下一个和上一个按钮旋转我的 div。我知道有可用的插件等，但我想自己做，只是我不太确定如何做。

所以这是我到目前为止的 html 标记

```
<div class="prev-btn"></div>
<div class="row"> <!-- content in here --></div>
<div class="row"> <!-- content in here --></div>
<div class="row"> <!-- content in here --></div>
<div class="next-btn"></div> 
```

我想要做的是一次显示 1 行，当我点击上一个/下一个按钮时，显示一个不同的 div。当我在最后一行时，next 将再次显示第一行。

我知道如何做 onclick 事件和切换 div。但我真的不知道如何确定我在哪一行以及如何选择下一个显示。

如何让我的下一个/上一个按钮正常工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T22:03:33.477

只是关于如何做到这一点的想法..

```
var $rotator = $(".container");
$rotator.find("div .row:gt(0)").hide(); 
```

获取要显示的 div 和列表中的下一个 div

```
var $current = $rotator.find("div .row:visible");
var $next = $current.next(); 
```

现在点击下一步执行此操作，

```
if ($next.length == 0) 
   $next = $rotator.find("div .row:eq(0)");

$current.hide();
$next.show(); 
```

同样，您可以使用`.prev()`获取以前的兄弟 div。

这是一个简单的[Demo](http://jsfiddle.net/mohammadAdil/LMw6F/310/)

# ios - 无法创建用于写入的文件 - iOS

> ID：15752417
> 
> 赞同：0
> 
> 时间：2013-04-01T21:43:21.413
> 
> 标签：ios, serialization, nsfilemanager

所以我已经对一堆对象进行了编码，但我在文件管理方面遇到了麻烦。我似乎无法打开现有文件或创建新文件。

我试过创建一个同名的空文件，或者只是创建一个新文件。它似乎没有回应（或为此做任何事情）。

*编辑*所以我在这里遵循了一些建议，现在我遇到了严重的访问崩溃。

这是我得到路径的地方：

```
NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    filePath = [documentsDirectory stringByAppendingPathComponent:@"/bucketListData.dat"]; 
```

这是修改后的方法。

```
 -(void) writeFile
{
    NSData *encodedObject;
    encodedObject = [NSKeyedArchiver archivedDataWithRootObject: bucketItems];
    NSFileHandle *file;
    file = [NSFileHandle fileHandleForReadingAtPath:filePath];

    if(file == nil)
    {
        NSLog(@"Failed to open a file handle for writing. Attempting to create a file.");
        [[NSFileManager defaultManager] createFileAtPath:filePath contents:nil attributes:nil];
        file = [NSFileHandle fileHandleForReadingAtPath:filePath];
        if(file == nil)
        {
            NSLog(@"Unable to create new file.");
        }
    }

    [file writeData: encodedObject];
    [file closeFile];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T21:51:13.843

您没有写入 root 的权限，您只能访问您的沙箱，**并且**您正在创建一个只读句柄。试试这个方法：

```
NSString *docDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];   
NSString *filePath = [docDir stringByAppendingPathComponent:@"bucketListData.dat"];
NSFileHandle *file = [NSFileHandle fileHandleForWritingAtPath:filePath];

if (!file) {
    NSLog(@"Attempting to create the file");
    if (![[NSFileManager defaultManager] createFileAtPath:filePath
                                                 contents:nil
                                               attributes:nil]) {
        NSLog(@"Failed to create file");
    }
    else {
        file = [NSFileHandle fileHandleForWritingAtPath:filePath];
    }
}

NSLog(@"File handle: %@", file); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T21:50:24.243

您试图在文件系统的根目录打开一个文件，但在 iOS 上您无权访问该文件。而是在文档目录中创建文件：

```
NSData* encodedObject = [NSKeyedArchiver archivedDataWithRootObject: bucketItems];

NSArray* paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString* basePath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
NSString* path = [basePath stringByAppendingPathComponent:@"bucketListData.dat"];
NSFileHandle* file = [NSFileHandle fileHandleForReadingAtPath:path]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T21:55:27.883

您需要将文件写入文档目录。然后使用 stringByAppendingPathComponent tu 创建完整路径。这应该有效，我希望这会有所帮助......

```
-(void) writeFile
{
    NSData *encodedObject;
    encodedObject = [NSKeyedArchiver archivedDataWithRootObject: bucketItems];
    NSFileHandle *file;

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
    NSString *documentsDirectory;

    if(paths && [paths count]>0){
        documentsDirectory=[paths objectAtIndex:0];

        file = [NSFileHandle fileHandleForReadingAtPath:[documentsDirectory stringByAppendingPathComponent:@"/bucketListData.dat"]];

        if(file == nil)
        {
            NSLog(@"Failed to open a file handle for writing. Attempting to create a file.");
            [[NSFileManager defaultManager] createFileAtPath:[documentsDirectory stringByAppendingPathComponent:@"/bucketListData.dat"] contents:nil attributes:nil];
            file = [NSFileHandle fileHandleForReadingAtPath:[documentsDirectory stringByAppendingPathComponent:@"/bucketListData.dat"]];
            if(file == nil)
            {
                NSLog(@"Unable to create new file.");
            }
       }

       [file writeData: encodedObject];
       [file closeFile];
   }
} 
```

# jquery - 对话框内的JQuery Datepicker不更新输入值

> ID：15752420
> 
> 赞同：1
> 
> 时间：2013-04-01T21:43:34.310
> 
> 标签：jquery, dialog, datepicker

我在对话框中创建了一个简单的 Web 表单。当我打开对话框时，我在 datepicker 输入中单击，日历会弹出。当我选择一个日期时，日期选择器关闭，但输入中的日期实际上并没有改变。

```
$("#ProductContractEntry").dialog({
    autoOpen: false,
    hide: { effect: "explode", duration: 500 },
    modal: false,
    width: 'auto',
    height: 'auto',
    position: 
    { 
        my: "left left", 
        at: "left left", 
        of: window, 
        collision: "fit", 
        within: "#mainContent" 
    },
    closeOnEscape: true,
});

$("#Expiration").datepicker(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:37:10.540

将原始日期格式化为`mm/dd/yyyy`：

```
<tr><td><input type="text" id="Expiration" value="04/01/2013" class="datepicker" /></td></tr> 
```

演示：http: [//jsfiddle.net/f6Tzx/2/](http://jsfiddle.net/f6Tzx/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:17:06.267

在我的页面上还有一个 jqGrid，其中一行的 colmodel 名称也为 Expiration。即使我在该行的 colmodel 中添加了一个索引：“g_Expiration”，但 ID 与我的 ID 为“Expiration”的输入冲突。在我将 colmodel 中的索引名称更改为“contract_Expiration”后，它在选择日期时开始正确设置输入。

# python - Python Pandas - 日期列到列索引

> ID：15752422
> 
> 赞同：23
> 
> 时间：2013-04-01T21:43:42.900
> 
> 标签：python, dataframe, pandas

我有一张从 CSV 文件导入 DataFrame 的数据表。

数据包含大约 10 个分类字段、1 个月列（日期时间格式），其余为数据系列。

如何将日期列转换为跨列轴的索引？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-01T21:54:37.990

您可以使用[`set_index`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.set_index.html)：

```
df.set_index('month') 
```

例如：

```
In [1]: df = pd.DataFrame([[1, datetime(2011,1,1)], [2, datetime(2011,1,2)]], columns=['a', 'b'])

In [2]: df
Out[2]: 
   a                   b
0  1 2011-01-01 00:00:00
1  2 2011-01-02 00:00:00

In [3]: df.set_index('b')
Out[3]: 
            a
b            
2011-01-01  1
2011-01-02  2 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-20T21:14:37.150

我有类似的问题，我刚刚通过 reset_index 解决了。但是您可以使用 set_index 或 reset_index：

```
df_ind = df.set_index(['A', 'B']) 
```

或者

```
df.reset_index(level=0, inplace=True) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-02T16:51:37.530

如果提前不知道日期列的名称，需要根据数据中的时间序列列自动设置索引

```
df.set_index((df.select_dtypes(include=[np.datetime64]).columns).tolist()) 
```

# ubuntu - 如何在 Ubuntu 上安装 Hadoop

> ID：15752423
> 
> 赞同：7
> 
> 时间：2013-04-01T21:43:49.580
> 
> 标签：ubuntu, configuration, hadoop

我正在尝试遵循本教程[http://mysolvedproblem.blogspot.com/2012/05/installing-hadoop-on-ubuntu-linux-on.html](http://mysolvedproblem.blogspot.com/2012/05/installing-hadoop-on-ubuntu-linux-on.html)而不是`hadoop-0.20.2.tar.gz`我下载的最新版本是`hadoop-0.23.6.tar.gz`. 我坚持了一步，我必须更改`hadoop-env.sh`文件。问题是我根本找不到`/conf/`文件夹。而且我也找不到这个文件。我可以在不更改此文件的情况下继续吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-08T00:18:24.490

对于 2.2.0 版，它位于：

```
etc/hadoop/ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T22:21:37.670

您可以在 /etc/hadoop 目录中手动创建文件 hadoop-env.sh。 [http://www.gmarwaha.com/blog/2011/12/08/no-hadoop-env-sh-in-hadoop-0-23/](http://www.gmarwaha.com/blog/2011/12/08/no-hadoop-env-sh-in-hadoop-0-23/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-14T01:16:12.657

我想它应该在 /hadoop/hadoop-common-project/hadoop-common/src/main/conf

# javascript - 当鼠标悬停在子元素上时如何设置父元素的样式？

> ID：15752427
> 
> 赞同：1
> 
> 时间：2013-04-01T21:43:58.113
> 
> 标签：javascript, css

当我将鼠标悬停在其下方列出的任何位上时，试图让导航栏的顶部更改文本颜色。

**HTML**

```
<div id="wrapper">
    <div id="navMenu">
        <ul>
            <li><a href="#">Home</a></li>
        </ul>
        <ul>
            <li><a href="#">example1</a>
                <ul>
                    <li><a href="#">example1.1</a></li>
                    <li><a href="#">example1.2</a></li>
                    <li><a href="#">example1.3</a></li>
                    <li><a href="#">example1.4</a></li>
                    <li><a href="#">example1.5</a></li>
                </ul>
            </li>
        </ul>

        <br class="clearFloat" />

    </div> <!-- end navMenu div -->
</div> <!-- end wrapper div --> 
```

**CSS**

```
#navMenu {margin:0;padding:0;}
#navMenu ul {margin:0;padding:0;line-height:30px;}
#navMenu li {margin:0;padding:0;list-style:none;float:left;position:relative;background:#999;}
#navMenu ul li a {text-align:center;text-decoration:none;height:30px;width:150px;display:block;color:#060;border:1px solid #666;}
#navMenu ul ul {position:absolute;visibility:hidden;top:32px;}
#navMenu ul li:hover ul {visibility:visible;}
#navMenu li:hover {background:#060;}
#navMenu ul li:hover ul li a:hover {background:#CCC;color:#FFF;}
#navMenu a:hover {color:#FFF;}
.clearFloat {clear:both;margin:0;padding:0;} 
```

这在纯 CSS 中可能吗？如果没有，我将如何使用 Javascript 或其他方式轻松完成这项工作？

编辑：当您将鼠标悬停在背景变为绿色时，文本变为白色。后者仍然存在，但前者没有。我认为这就是问题所在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T21:59:49.940

在 CSS 中悬停子项时无法选择父项，只能选择后面的兄弟姐妹或后代。

但是，我认为您只需悬停父事件就可以了，因为当您悬停子项时，父项也会悬停。添加这个：

[jsFiddle](http://jsfiddle.net/ndFeb/)

```
#navMenu li:hover a {color:#FFF;} 
```

# assembly - CBM Program Studio 汇编器语法

> ID：15752428
> 
> 赞同：5
> 
> 时间：2013-04-01T21:44:05.110
> 
> 标签：assembly, 6502, c64, 6510

我正在尝试学习 CBM Program Studio。但我无法让宏为我工作。没有宏，代码就可以了。但是当我添加宏部分时，它会在第 7 行给出“No Matching End Definition”。

任何的想法？

```
 *=$c000 ; sys 49152

        ; set screen colors to black 
        lda #$00
        sta $d020
        sta $d021

defm    waitmacro ;akumulatörü hacılıyor   
        TYA
mloop   DEY
        BNE mloop
        TAY     
        endm waitmacro

        ;color bars
        LDX #$FF
loop    LDY #$07
        STY $d020

        waitmacro

        INY
        STY $d020

        waitmacro

        DEX
        BNE loop
        RTS 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T05:37:20.340

如果您不指定名称，它应该可以正常工作`endm`。IE：

```
defm waitmacro ;akumulatörü hacılıyor
        TYA
mloop   DEY
        BNE mloop
        TAY     
        endm 
```

我不确定为什么会出现这种情况，或者文档为什么会提出其他建议。

# c# - C# 1024bit 加密出错

> ID：15752429
> 
> 赞同：-1
> 
> 时间：2013-04-01T21:44:11.057
> 
> 标签：c#, encryption

我正在使用此代码加密字节，我已经从 1-255 字节对其进行了测试，并且值大于 128 的每个字节都被解密为 63

![在此处输入图像描述](https://i.stack.imgur.com/FxNBT.png)

```
AEK is a 16char string
public byte[] AE1024(byte[] __test)
    {
        byte[] data = __test;
        byte[] rgbKey = ASCIIEncoding.ASCII.GetBytes(AEK.Substring(0, AEK.Length / 2));
        byte[] rgbIV = ASCIIEncoding.ASCII.GetBytes(AEK.Substring(AEK.Length / 2, AEK.Length / 2));
        MemoryStream memoryStream = new MemoryStream(1024);
        DESCryptoServiceProvider desCryptoServiceProvider = new DESCryptoServiceProvider();
        CryptoStream cryptoStream = new CryptoStream(memoryStream, desCryptoServiceProvider.CreateEncryptor(rgbKey, rgbIV), CryptoStreamMode.Write);
        cryptoStream.Write(data, 0, data.Length);
        cryptoStream.FlushFinalBlock();
        byte[] result = new byte[(int)memoryStream.Position];
        memoryStream.Position = 0;
        memoryStream.Read(result, 0, result.Length);
        cryptoStream.Close();
        memoryStream.Dispose();
        return result;
    } 
```

这是解密方法

```
public byte[] AD1024(byte[] __test)
    {
        byte[] data =__test;
        byte[] rgbKey = ASCIIEncoding.ASCII.GetBytes(AEK.Substring(0, AEK.Length / 2));
        byte[] rgbIV = ASCIIEncoding.ASCII.GetBytes(AEK.Substring(AEK.Length / 2, AEK.Length / 2));
        MemoryStream memoryStream = new MemoryStream(data.Length+1);
        DESCryptoServiceProvider desCryptoServiceProvider = new DESCryptoServiceProvider();
        ICryptoTransform x = desCryptoServiceProvider.CreateDecryptor(rgbKey, rgbIV);
        CryptoStream cryptoStream = new CryptoStream(memoryStream, x, CryptoStreamMode.Read);
        memoryStream.Write(data, 0, data.Length);
        memoryStream.Position = 0;
        string decrypted = new StreamReader(cryptoStream).ReadToEnd();
        cryptoStream.Close();
        memoryStream.Dispose();
        return Encoding.ASCII.GetBytes(decrypted);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:56:38.117

您看到 63 的原因是您使用的是 ASCII 编码。编码时任何超过 128 的整数都将变为 63（或？）：

```
static void Main()
{
    byte[] bytes = new[]{(byte)129};

    string asciiString = Encoding.ASCII.GetString(bytes);

    byte[] encodedBytes = Encoding.ASCII.GetBytes(asciiString);

    Console.WriteLine(bytes[0]);
    Console.WriteLine(asciiString);
    Console.WriteLine(encodedBytes[0]);

    Console.ReadLine();
} 
```

上述输出：

```
129
?
63 
```

由于字节 > 128 与 ASCII 或 Unicode 中的文本不对应，因此我建议@usr 在评论中说您的加密/解密例程已损坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T22:08:30.510

你的解密方法是……有创意……

你为什么使用流阅读器？您的原始加密数据是 byte[] ...不是 string ...

获取解密器

制作一个新的 MemoryStream

使用 CryptoStreamMode.Write 将其包装到一个新的 CryptoStream 中，使用解密器作为 ICryptoTransform

将您的加密字节写入 CryptoStream

掌握 MemoryStreams 缓冲区，它将保存您的明文字节数组

# android - 在 Android 中读取多个 JSON 数组

> ID：15752433
> 
> 赞同：0
> 
> 时间：2013-04-01T21:44:22.153
> 
> 标签：android, json

不久前我问了一个类似的问题，但还有更多问题。

我有一个有效的 JSON 数组：

但是，它不会像在 JSON 数组的第二部分中那样读取 task_goalid，错误出现为“task_goalid 没有值”。

知道如何引用 JSON 数组的第二部分吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T21:48:43.403

在从 JSONObject 获取键值之前，使用[JSONObject.has()检查 JSONObject 是否包含键。](http://developer.android.com/reference/org/json/JSONObject.html#has%28java.lang.String%29)

例如在你的情况下：

```
 String strgoalid;
 if(json_data.has("task_goalid")){

     //if json_data JSONObject contain task_goalid
   strgoalid=json_data.getString("task_goalid")
  }
  else{
    //if json_data JSONObject not contain task_goalid
    strgoalid="default value here";
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T21:52:01.297

你有一个`JSONArray`包含**两个** `JSONObject`孩子。

第一个`JSONObject`具有以下字段：

*   _ID
*   任务名称
*   任务日
*   任务优先级
*   任务描述
*   任务目标
*   用户

第二个`JSONObject`具有以下字段：

*   _ID
*   task_goalid
*   用户

由于您的第一个`JSONObject`不包含该`task_goalid`字段，因此您将无法从该对象中检索它。如果该字段是可选的，它看起来是，您可以在尝试使用它之前先检查该字段是否存在，[`JSONObject.has("task_goalid")`](http://developer.android.com/reference/org/json/JSONObject.html#has%28java.lang.String%29)或者使用[`JSONObject.optString("task_goalid", "No Value")`](http://developer.android.com/reference/org/json/JSONObject.html#optString%28java.lang.String,%20java.lang.String%29).

在这里使用`JSONObject.has()`是更安全的选择，因为您可以明确地说该字段是否存在。使用`JSONObject.optString()`允许您更轻松地为缺少的字段分配默认值。任何一种方法都行得通，所以由您决定哪一种更适合您的需求。

# python - 在任何（未捕获的）异常上打开 IPython shell

> ID：15752437
> 
> 赞同：2
> 
> 时间：2013-04-01T21:44:58.767
> 
> 标签：python, debugging, ipython

我在 Python 中定义了以下（嵌入式）shell：

```
from IPython.config.loader import Config
cfg = Config()
prompt_config = cfg.PromptManager
prompt_config.in_template = 'N.In <\\#>: '
prompt_config.in2_template = '   .\\D.: '
prompt_config.out_template = 'N.Out<\\#>: '
banner_msg = ("\n**Nested Interpreter:\n"
"Hit Ctrl-D to exit interpreter and continue program.\n"
"Note that if you use %kill_embedded, you can fully deactivate\n"
"This embedded instance so it will never turn on again")
exit_msg = '**Leaving Nested interpreter'

from IPython.frontend.terminal.embed import InteractiveShellEmbed
ipshell = InteractiveShellEmbed(config=cfg, banner1=banner_msg, exit_msg=exit_msg) 
```

我希望我的程序在出现异常时自动将我放入该 shell，**在异常发生的范围内。**

我尝试过：

```
def excepthook(type, value, traceback):
    ipshell(msg)

sys.excepthook = excepthook 
```

但这似乎不起作用（我只是得到标准的回溯）。此外，理想情况下，最好是：

1.  IPython 打印常规回溯
2.  **然后**把我放到一个 IPython shell

如果我上面写的代码有效，它只会把我放到一个 IPython shell 中，而不是打印回溯。

## 更新1：

我在[这里](https://stackoverflow.com/questions/1261668/cannot-override-sys-excepthook)读到，当从 IPython 运行代码时，IPython 负责捕获所有异常，并且可能无法直接覆盖`sys.excepthook()`. 如果是这种情况，我如何让 IPython`ipshell()`在发生异常的范围内以及在它打印回溯之后执行其他异常挂钩（例如 my ）？

## 更新 2：

开发列表中似乎有一个线程在讨论这个问题：[ipython 中的excepthook-like behavior](http://python.6.n6.nabble.com/excepthook-like-behavior-in-ipython-td4717949.html)。显然有一个功能[`set_custom_exc`](http://ipython.org/ipython-doc/dev/api/generated/IPython.core.interactiveshell.html#IPython.core.interactiveshell.InteractiveShell.set_custom_exc)可以解决这个问题，但我不确定如何将其插入到我的`ipshell()`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:17:22.333

我认为几乎不可能让异常一直通过调用堆栈来找出是否有人最终会捕获并处理它，然后返回到它最初引发的范围。当异常弹出时，原始范围已经消失。

您最好的选择可能是将您希望 shell 出现的所有部分包装起来，以使用专用块处理异常，`try ... except`如下所示：

```
try: 
   pass # stuff that may raise an exception
except KeyboardInterrupt:
   # some exception you want to handle
   raise 
except SystemExit:
   # another exception you want to handle
   raise 
except: 
   # get a hand on any unhandled exception
   ipshell(traceback.format_exc()) 
```

（不确定这是否可以更优雅地实现。我也会对更好的解决方案非常感兴趣！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T18:04:41.333

在我的 ipython shell 中定义以下内容似乎可以满足您的要求：

```
def custom_exc(shell, etype, evalue, tb, tb_offset=None):
    shell.showtraceback((etype, evalue, tb), tb_offset=tb_offset)
    ipshell()

get_ipython().set_custom_exc((Exception,), custom_exc) 
```

# visual-studio - 在 Chrome 中查找 NPAPI 插件内的崩溃位置

> ID：15752438
> 
> 赞同：0
> 
> 时间：2013-04-01T21:45:00.140
> 
> 标签：visual-studio, google-chrome-extension, npapi, browser-plugin

我有一个 NPAPI 插件，可以在 Chrome、Firefox 等上成功运行，除了一个用户，它在 Chrome 中崩溃，但在 Firefox 中没有。我已经在该用户的机器上安装了 Visual Studio，已经下载了我的插件的源文件，并且正在尝试调试崩溃。我可以附加到适当的 chrome.exe 进程（谢谢`--plugin-startup-dialog`），可以设置断点，并且可以遍历我的代码。但是要调试的代码有几十万行，每秒调用多次的代码，我还没有找到正确的断点。

当然，正常情况下，当一个进程 VS 正在调试崩溃时，VS 会报告崩溃，并让您有机会查看调用堆栈。但是对于 Chrome，崩溃显然永远不会被报告给 VS，因为进程只是静默退出。

[有人告诉我](http://pushingtheweb.com/2010/06/debugging-npapi-plugins-in-visual-studio/)，您可以禁用 Firefox 中的等效行为，以便 VS 可以处理错误，但我不确定如何在 Chrome 中执行此操作。关于如何将崩溃报告给 Visual Studio 的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:09:38.800

事实证明，我误诊了这个问题。有问题的机器上有一个激进的安全应用程序。它认为我们的 NPAPI 插件做了一些不恰当的事情（调用`SetWindowsHookEx`），因此默默地杀死了托管插件的 Chrome 进程。我怀疑 VS在正常情况下会看到某种异常*。*

# c# - 如何格式化命令以便在串口上写入

> ID：15752439
> 
> 赞同：0
> 
> 时间：2013-04-01T21:45:07.130
> 
> 标签：c#, serial-port, protocols, communication, serial-communication

我有一个读卡器/rfid 阅读器，我正在尝试为它创建一个测试应用程序。我确实有来自提供商的协议描述文档，但我以前从未编写过串口软件，一切对我来说看起来都很奇怪。我确实有编程技能，但只是不知道我做错了什么。

所以，设备的型号是CRT288。在规范文档中，我有以下数据：

波特率（BPS）：9600

通讯类型：异步通讯

传输类型：半双工

位细节：起始位：1位

数据位：8位

奇偶校验位：无

停止位：1位

起始位 D0 D1 D2 D3 D4 D5 D6 D7 停止位

传输控制代码：

代码 值 含义

STX 0x02 数据包起始字符

ETX 0x03 数据包结束符

ENQ 0x05 发送要求命令（主机 -> 阅读器）

ACK 0x06 肯定回答（读者主机）

NAK 0x15 否定答案（读者主机）

EOT 0x04 取消通讯

最重要的（我相信）命令的数据包格式：

STX(0x02) 命令包 ETX (0x03) BCC

BCC（块校验字符）= STX ^ 命令包 ^ ETX

（^ 是异或计算字符）

例如： 重置命令：

密件抄送=0x02 ^ 0x00 ^ 0x02 ^ 0x30 ^ 0x30 ^ 0x03

含义（STX ^ MSL ^ CMD ^ CMP ^ SDT ^ ETX）

(1) 发送文本的 MSL 长度

(2)CMD 指定一个命令。

(3)CMP命令参数。

(4)SDT 指定发送数据，长度可变（0~264bytes）。

我安装了一些名为 Serial Port Monitor 4.0 (Eltima) 的软件，我正在尝试发送命令，但它似乎不起作用。

0x02 ^ 0x00 ^ 0x02 ^ 0x30 ^ 0x30 ^ 0x03 好像是11什么的。

有人知道如何使用此规范发送正确的命令吗？

最重要的是，读者吃了一张卡，我什至不能拒绝这张卡。它正在为此发出一个命令:)

因此，如果你们有 java 或 c# 中的简单代码示例，或者如何正确格式化命令并将其发送到 rs232，请帮助我。

一个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:59:32.413

这种通用方法过去对我有用（刷卡阅读器、条形码阅读器等）：

```
byte[] commandNameHere = { 0x02, 0x00, 0x02, 0x30, 0x30, 0x03 };

yourSerialPortObject.Write(commandNameHere, 0, commandNameHere.Length); 
```

# hadoop - 使用 python hadoop 流找到平均中位数

> ID：15752444
> 
> 赞同：0
> 
> 时间：2013-04-01T21:45:20.397
> 
> 标签：hadoop, hadoop-streaming

非常愚蠢的问题..我的数据如下

```
id1, value
1, 20.2
1,20.4
.... 
```

我想找到 id1 的平均值和中位数？（注意.. 平均值，每个 id 的中值，而不是全局平均值，中值）我正在使用 python hadoop 流..

```
mapper.py
for line in sys.stdin:
    try:
    # remove leading and trailing whitespace
        line = line.rstrip(os.linesep)
        tokens = line.split(",")

            print '%s,%s' % (tokens[0],tokens[1])
    except Exception:
        continue

reducer.py
data_dict = defaultdict(list)
def mean(data_list):
    return sum(data_list)/float(len(data_list)) if len(data_list) else 0
def median(mylist):
    sorts = sorted(mylist)
    length = len(sorts)
    if not length % 2:
        return (sorts[length / 2] + sorts[length / 2 - 1]) / 2.0
    return sorts[length / 2]

for line in sys.stdin:
    try:
        line = line.rstrip(os.linesep)
        serial_id, duration = line.split(",")
        data_dict[serial_id].append(float(duration))
    except Exception:
        pass
for k,v in data_dict.items():
    print "%s,%s,%s" %(k, mean(v), median(v)) 
```

我期望每个键都有一个平均值，中位数但是我看到 id1 重复了不同的平均值和中位数..例如..在做 grep ..

```
mean_median/part-00003:SH002616940000,5.0,5.0   
mean_median/part-00008:SH002616940000,901.0,901.0   
mean_median/part-00018:SH002616940000,11.0,11.0 
mean_median/part-00000:SH002616940000,2.0,2.0   
mean_median/part-00025:SH002616940000,1800.0,1800.0 
mean_median/part-00002:SH002616940000,4.0,4.0   
mean_median/part-00006:SH002616940000,8.0,8.0   
mean_median/part-00021:SH002616940000,14.0,14.0 
mean_median/part-00001:SH002616940000,3.0,3.0   
mean_median/part-00022:SH002616940000,524.666666667,26.0    
mean_median/part-00017:SH002616940000,65.0,65.0 
mean_median/part-00016:SH002616940000,1384.0,1384.0 
mean_median/part-00020:SH002616940000,596.0,68.0    
mean_median/part-00014:SH002616940000,51.0,51.0 
mean_median/part-00004:SH002616940000,6.0,6.0   
mean_median/part-00005:SH002616940000,7.0,7.0 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:16:49.343

我在 hadoop-user 邮件列表中回答了同样的问题，如下所示：

你为这份工作开始了多少个减速器？如果您为此作业启动多个 Reducer，它将生成多个名为 part- *****的输出文件。并且每个部分只是特定 Reducer 分区的局部均值和中值。

两种解决方法： 1、调用setNumReduceTasks(1)方法将Reducer个数设置为1，只会产生一个输出文件，每个不同的key只会产生一个均值和中值。2、参考Hadoop源码中的org.apache.hadoop.examples.WordMedian。它通过一个本地函数处理多个Reducer产生的所有输出文件，并产生最终结果。

# java - 将字符串分隔为没有数组的单独变量

> ID：15752446
> 
> 赞同：-1
> 
> 时间：2013-04-01T21:45:24.380
> 
> 标签：java, string

我需要帮助将字符串分成单独的变量。我正在尝试制作一个使用 nextLine() 获取用户输入的程序，然后我需要分隔该字符串中的字符。

例如，用户可以输入行 23plus 或 2 3 plus。

我读过关于 .split 的内容，但这仅在输入中有空格时才有效。我可以说第一个数字是 charAt(0) 但我怎么能得到其余的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:51:09.873

您说，问题是带有后缀符号 23+ 的“一位数计算器”：

*   `digits = digits.replaceAll( "\\\\s","" );`
*   第一个数字：`int op1 = Integer.parseInt( digits.charAt(0));`
*   第二位数：`int op2 = Integer.parseInt( digits.charAt(1));`
*   operator : `digits.charAt(2)`，正如我建议使用 +、-、/、* 一样，用于 switch/case
*   结果：5

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:55:22.603

如何`String`通过 char 循环遍历 char 并检查它是否是数字：

```
 final List<Integer> values = new LinkedList<>();
    final StringBuilder operator = new StringBuilder();
    for (final char c : input.toCharArray()) {
        if (Character.isDigit(c)) {
            values.add(Integer.parseInt(Character.toString(c)));
        } else if (!Character.isWhitespace(c)) {
            operator.append(c);
        }
    } 
```

**注意：**这只有在输入的形式为“WdigitWdigitWoperator”时才有效，其中“W”是可选的空格。

但我明白你的问题就是这种情况。

另一种选择是使用正则表达式，这看起来像：

```
 final Pattern p = Pattern.compile("^\\s*+(?<firstDigit>\\d)\\s*+(?<secondDigit>\\d)\\s*+(?<operator>\\w++)$");

    final Matcher matcher = p.matcher(input);
    if(matcher.matches()) {
        System.out.println(matcher.group("firstDigit"));
        System.out.println(matcher.group("secondDigit"));
        System.out.println(matcher.group("operator"));
    } 
```

如果这是一个家庭作业（我怀疑它是），那么这可能不是一个可接受的解决方案。

# java - 在java中按整数间隔从数据库中选择多条记录

> ID：15752450
> 
> 赞同：2
> 
> 时间：2013-04-01T21:45:41.553
> 
> 标签：java, database, select, derby

如何按整数间隔从 derby 数据库中进行选择？它可以比使用循环更有效地完成，增加一个 int 并尝试从数据库中为间隔中的每个 int 选择记录吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T21:58:30.300

像这样的查询应该这样做：

```
select * 
from mytable
where some_column between ? and ? 
```

Derby 使用 JDBC 和 SQL，因此您可以为变量创建一个带有占位符（问号）的查询，然后在运行时提供值，`query.setInt(1, 3)` 例如`query.setInt(2, 7)`获取 3 到 7（含）的范围，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:49:33.080

在数据库端进行，例如，像这样执行 SQL 只会给你第三行。（假设您有一个名`mytable`为主键列的表`id`）

```
SELECT * FROM mytable WHERE id % 3 = 0 
```

# c++ - Seg Fault 11，（GMP 和初始化问题？？）

> ID：15752457
> 
> 赞同：-2
> 
> 时间：2013-04-01T21:45:57.060
> 
> 标签：c++, segmentation-fault, gmp

我在这段代码中有一个分段错误 11（编辑：不再显示）。

被告知要获取调试器并对数组进行排序后，我编辑了代码以修复数组从 0 开始。我还安装了 valgrind 并运行它，但在 OSX 上工作时它受到限制。我已经运行 gbd，问题如下所述。

如果这看起来非常不祥，或者需要代码来取得任何进展，请告诉我，我可以将问题编辑为论坛期望的格式。

在我的代码上运行 gdb 我得到：

```
Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_PROTECTION_FAILURE at address: 0x00007fff5e4c27c8
0x0000000100001048 in main () at TammesA3.cc:23
23    mpf_set_default_prec(1024); 
```

代码如下，问题是在我的循环甚至开始之前引起的！

```
#include <stdio.h> 
#include <string.h>
#include <math.h>
#include <iostream>
#include <iomanip>
#include <fstream>
#include <time.h>
#include <stdlib.h>
#include <sstream>
#include <gmpxx.h>
using namespace std;
#define PI 3.14159265358979323846

mpf_t E[100000];

int main()
{

  int a,b,c,d,f,i,j,k,m,n,s,Success,Fails;
  double p,theta,phi,Time,Averagetime,Distance,Length,DotProdForce,
         Forcemagnitude,ForceMagnitude[200],Force[200][3],Epsilon[3],
         x[200][3],new_x[200][3],y[200][3],A[200],alpha[200][200],degree,bestalpha[500];
  unsigned long int t;

  mpf_set_default_prec(1024);

  mpf_t Energy,energy,Power,D,En[500],Ep,e;

  mpf_init(Power);
  mpf_init(D);
  mpf_init(Ep);
  mpf_init(e);
  mpf_init(Energy);
  mpf_init(energy);

  for(i=0;i<100000;i++){
   mpf_init(E[i]);
  }

  for(i=0;i<500;i++){
    mpf_init(En[i]);
  }

  mpf_set_d(e,0.00000000000000000000000000000000000000000000000000000000001);

  clock_t t1,t2;
  t1=clock();

t=1000;

while(t<1001){

n=20;

while(n<21){

cout << "N=" << n << "\n";

  b=1;
  Time=0.0;

  while(b<2){

    clock_t t3,t4;
    t3=clock();

    if(n>200){
      cout << n << " is too many points for me :-( \n";
      exit(0);
    }

    srand((unsigned)time(0));  

    for (i=0;i<n;i++){
      x[i][0]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;
      x[i][1]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;
      x[i][2]=((rand()*1.0)/(1.0*RAND_MAX)-0.5)*2.0;

      Length=sqrt(pow(x[i][0],2)+pow(x[i][1],2)+pow(x[i][2],2));

      for (k=0;k<3;k++){
        x[i][k]=x[i][k]/Length;
      }
    }

    for(i=0;i<n;i++){
      for(j=0;j<3;j++){
        cout << "x[" << i << "][" << j << "]=" << x[i][j] << "\n";
      }
    }

    /* Points distributed randomly and normalised so they sit on unit sphere */

    mpf_set(Energy,0);

    for(i=0;i<n;i++){
      for(j=i+1;j<n;j++){
        Distance=sqrt(pow(x[i][0]-x[j][0],2)+pow(x[i][1]-x[j][1],2)
                     +pow(x[i][2]-x[j][2],2));

        mpf_set_d(D,Distance);

        mpf_pow_ui(Power,D,t);      
        mpf_ui_div(Power,1.0,Power);
        mpf_add(Energy,Energy,Power);

      }
    } etc. 
```

在此之后，我的代码进入一个循环，但是注释中所说的代码真的很长，所以除非要求，否则不要再把它放进去。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:28:24.480

剩下的问题^(（1）)是（三行）

```
mpf_set(Energy,0); 
```

它的原型是

```
void mpf_set (mpf_t ROP, mpf_t OP) 
```

an`mpf_t`是一个数组，

```
typedef __mpf_struct mpf_t[1]; 
```

所以你传递一个空指针来读取值。取消引用空指针是导致分段错误的另一个典型原因（除了访问超出数组边界）。

您打算使用`mpf_set_d`,`mpf_set_ui`或`mpf_set_si`那里（您使用哪一个并不重要）。

* * *

^((1))我从修订版 2 中复制了代码并将两个大数组移动`E`到`alpha`文件范围以减轻堆栈的负担，然后`mpf_set(variable,0)`在第 94、147 和 271 行修复三个，它运行完成。

这并不一定意味着代码是正确的，在我阅读的输出末尾

```
Successes=0 Failures=1
Success Rate=0.00000 
```

这暗示了代码逻辑中可能存在的问题，但我不知道期望什么输出。

# wpf - 文本换行不起作用

> ID：15752460
> 
> 赞同：0
> 
> 时间：2013-04-01T21:46:07.567
> 
> 标签：wpf, xaml

我得到了这个 XAML 代码，我已经尝试让它工作了几个小时（我对 WPF 很陌生）。如果没有足够的空间，我基本上想要`TextBlock`换行符中的文本。

```
<Grid>
  <Grid.ColumnDefinitions>
    <ColumnDefinition Width="60" />
    <ColumnDefinition Width="*" />
  </Grid.ColumnDefinitions>
  <Image Source="{Binding Path=imageurl}" Width="60" Height="60" Grid.Column="0" />
  <TextBlock TextWrapping="Wrap" Text="{Binding Path=content}" Grid.Column="1" />
</Grid> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:43:30.523

这很可能是由于父级为 Grid 提供了无限的布局宽度，这导致“*”为其列提供了无限的布局宽度。这种行为的一个可能罪魁祸首是包含 Grid 的外部 StackPanel（水平方向）。其他候选对象包括 Viewbox、DockPanel 或在 ListBox 中使用（ListBoxItem 容器对象的默认样式为其内容提供了无限的布局宽度。）

您提到它在 DataTemplate 中，这可能暗示了最后一种情况。如果是这样，您可以通过设置生成的容器对象的样式使其具有 Horizo​​ntalContentAlignment="Stretch" 来获得所需的行为。

```
 <ListBox Margin="3,0,3,3" HorizontalContentAlignment="Stretch"
                 ItemsSource="{Binding Items}">
            <ListBox.ItemContainerStyle>
                <Style TargetType="ListBoxItem" BasedOn="{StaticResource {x:Type ListBoxItem}}">
                    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                </Style>
            </ListBox.ItemContainerStyle>
        </ListBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:31:32.710

好吧，我基本上将网格`ColumnDefinition`宽度设置为固定宽度，现在它可以工作了。

# r - 拆分单元格中的值并添加到 R 中新创建的行

> ID：15752461
> 
> 赞同：3
> 
> 时间：2013-04-01T21:46:09.910
> 
> 标签：r, if-statement, conditional-statements

我有一个数据集，我需要在其中评估具有相同 id 代码的多个条目，如果满足一组条件，则在最后一行中拆分一个单元格值。

条件 = 该 id 的最后一行具有 action=="l" & time >60。

如果满足此条件，我想更改行操作 <- “e”，并且时间 <- 60。超过 60 的时间量应放在下面新形成的行中。新行的列内容应与父行相同，除了 action=="l" & time==original value - 60)。

样本数据集

```
id <- c("12_1","12_1","12_1","12_2","12_2","12_2")
action <- c("l","d","l","l","d","l")
time <- c(15,45,90,20,30,61)
dtfrm <-data.frame(cbind(id,action,time)) 
```

测试数据框

```
 id action time
1 12_1      l   15
2 12_1      d   45
3 12_1      l   90
4 12_2      l   20
5 12_2      d   30
6 12_2      l   61 
```

我希望转换后的数据框看起来像这样

```
 id action time
1 12_1      l   15
2 12_1      d   45
3 12_1      e   60
4 12_1      l   30
5 12_2      l   20
6 12_2      d   30
7 12_2      e   60
8 12_2      l    1 
```

最终，我将有更复杂的条件来评估，但我试图从简单的开始，逐步提高将这个数据集调整为工作顺序所需的更复杂的条件。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T22:35:30.677

我会编写一个对一组“id”进行操作的函数：

```
process.one <- function(df) {
  n <- nrow(df)
  last.action <- df$action[n]
  last.time   <- df$time[n]
  if (last.action == "l" & last.time > 60) {
    next.row <- df[n, ]
    next.row$action = "l"
    next.row$time   = last.time - 60
    df <- rbind(df, next.row)
    df$action[n] <- "e"
    df$time[n]   <- 60
  }
  df
} 
```

然后使用分割/应用/组合`plyr`：

```
ddply(dtfrm, "id", process.one)
#     id action time
# 1 12_1      l   15
# 2 12_1      d   45
# 3 12_1      e   60
# 4 12_1      l   30
# 5 12_2      l   20
# 6 12_2      d   30
# 7 12_2      e   60
# 8 12_2      l    1 
```

还要确保您的 data.frame 没有因素，否则附加到它可能会出现问题。在顶部，它应该是：

```
dtfrm <- data.frame(id, action, time, stringsAsFactors = FALSE) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T22:46:04.123

这有点涉及，但应该这样做：

```
# fix the time column, it should be numeric
dtfrm[, "time"] <- as.numeric(as.character(dtfrm[, "time"]))

library(data.table)
DT <- data.table(cbind(dtfrm, rowid=seq(nrow(dtfrm))), key="id")

# identify which rows need modification
DT[, needsMod := FALSE]
DT[unique(DT[, "id", with=FALSE])
   ,  needsMod := {L <- length(action); (action[L] == "l" && time[L] > 60)  }
   , by=id
   , mult="last"]

# append new rows
DT <- setkey(rbind(DT, 
       DT[c(needsMod), list(id, action, time=time-60, rowid=rowid+1e-2, needsMod=!needsMod)]), 
       id, rowid)

# modify the identified rows
DT[c(needsMod), c("action", "time") := list("e", 60)]

# optionally remove added columns, though personally, I would keep some form of rowid
DT[ , c("needsMod", "rowid") := NULL]
DT

#      id action time
# 1: 12_1      l   15
# 2: 12_1      d   45
# 3: 12_1      e   60
# 4: 12_1      l   30
# 5: 12_2      l   20
# 6: 12_2      d   30
# 7: 12_2      e   60
# 8: 12_2      l    1 
```

# stream - 在 Windows Phone 8 SD 卡上读取文件的问题

> ID：15752463
> 
> 赞同：4
> 
> 时间：2013-04-01T21:46:17.107
> 
> 标签：stream, windows-phone-8, sd-card, seek

我在读取 Windows Phone SD 卡上的文件时遇到问题。我使用 ExternalStorageFile.OpenForReadAsync 获得了有效的 Stream 对象。但是，尽管流 CanSeek 属性为真，但任何查找操作都将被忽略并且位置不会移动；

```
 private async void ReadFileOnSDCard(ExternalStorageFile file)
    {
        Stream stream = await file.OpenForReadAsync();
          using (stream)
          {
                 long curPos= stream.Seek(100, SeekOrigin.Begin);
                 long pos = stream.Position; 
```

// curPos 和 pos 都是 0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-27T23:46:44.327

我正在与同样的问题作斗争。在 Microsoft.Phone.Storage.NativeFileStream 中，Seek 确实被破坏了，这是 SD 卡上文件的流类型。最后，我用 ILspy 看了课程，就是这样：

```
public override long Seek(long offset, System.IO.SeekOrigin origin)
{
   ...
   uint num = (uint)((ulong)(offset & -4294967296L) >> 32);
   uint num2 = (uint)(offset & (long)((ulong)-1));
   uint num3 = NativeFileStream.SetFilePointer(this.m_handle, num, ref num2, 
   ...
} 
```

和功能 SetFilePointer：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa365541%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365541%28v=vs.85%29.aspx)

为了使搜索工作，偏移值应该在长的高 32 位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-11T23:23:36.813

我猜你正在阅读一个带有[Windows Phone 保留的](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207065%28v=vs.105%29.aspx)扩展名的文件。不幸的是，您无法从 Windows Phone 上的 SD 卡中读取它们。如果您正在阅读的文件属于这些保留的扩展名，Windows Phone 只是简单地忽略它们。

假设您没有阅读那些保留的扩展，您可以按照这两个步骤来解决您的问题。

1/ 首先检查你是否已经添加 `<Capability Name="ID_CAP_REMOVABLE_STORAGE" />`到你的 WMAppManifest.xml

2/ 如果您没有注册文件关联扩展名，例如 .gpx

```
<FileTypeAssociation TaskID="_default" Name="GPX" NavUriFragment="fileToken=%s">
  <Logos>
    <Logo Size="small" IsRelative="true">Assets/Route_Mapper_Logo33x33.png</Logo>
    <Logo Size="medium" IsRelative="true">Assets/Route_Mapper_Logo69x69.png</Logo>
    <Logo Size="large" IsRelative="true">Assets/Route_Mapper_Logo176x176.png</Logo>
  </Logos>
  <SupportedFileTypes>
    <FileType ContentType="application/gpx">.gpx</FileType>
  </SupportedFileTypes>
</FileTypeAssociation> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-30T07:25:03.697

如果文件很小，那么您可以简单地将流复制到 MemoryStream。我已经对此进行了测试，并且可以正常工作：

```
Stream s = await file.OpenForReadAsync();
MemoryStream ms = new MemoryStream();
s.CopyTo(ms); 
```

但是，如果文件太大，您将遇到内存问题，因此可以使用以下流包装类来纠正 Microsoft 的错误（尽管在未来版本的 Windows Phone 中，一旦错误出现，您需要禁用此修复固定的）：

```
using System;
using System.IO;

namespace WindowsPhoneBugFix
{
    /// <summary>
    /// Stream wrapper to circumnavigate buggy Stream reading of stream returned by ExternalStorageFile.OpenForReadAsync()
    /// </summary>
    public sealed class ExternalStorageFileWrapper : Stream
    {
        private Stream _stream; // Underlying stream

        public ExternalStorageFileWrapper(Stream stream)
        {
            if (stream == null)
                throw new ArgumentNullException("stream");

            _stream = stream;
        }

        // Workaround described here - http://stackoverflow.com/a/21538189/250254
        public override long Seek(long offset, SeekOrigin origin)
        {
            ulong uoffset = (ulong)offset;
            ulong fix = ((uoffset & 0xffffffffL) << 32) | ((uoffset & 0xffffffff00000000L) >> 32);
            return _stream.Seek((long)fix, origin);
        }

        public override bool CanRead
        {
            get { return _stream.CanRead; }
        }

        public override bool CanSeek
        {
            get { return _stream.CanSeek; }
        }

        public override bool CanWrite
        {
            get { return _stream.CanWrite; }
        }

        public override void Flush()
        {
            _stream.Flush();
        }

        public override long Length
        {
            get { return _stream.Length; }
        }

        public override long Position
        {
            get
            {
                return _stream.Position;
            }
            set
            {
                _stream.Position = value;
            }
        }

        public override int Read(byte[] buffer, int offset, int count)
        {
            return _stream.Read(buffer, offset, count);
        }

        public override void SetLength(long value)
        {
            _stream.SetLength(value);
        }

        public override void Write(byte[] buffer, int offset, int count)
        {
            _stream.Write(buffer, offset, count);
        }
    }
} 
```

代码可在此处放入您的项目： [https ://github.com/gavinharriss/ExternalStorageFileWrapper-wp8](https://github.com/gavinharriss/ExternalStorageFileWrapper-wp8)

# java - XMLResourceParser，我不确定如何阅读我拥有的 XML

> ID：15752466
> 
> 赞同：6
> 
> 时间：2013-04-01T21:46:35.223
> 
> 标签：java, android, xml

这是我的 XML 文件的示例：

```
<?xml version="1.0" encoding="utf-8"?>
<assurances>
<assurance hasReference="true">
    <message>You're Awesome!</message>
    <reference>Genesis 1:26</reference>
</assurance>
<assurance hasReference="true">
    <message>Your Wonderfull!</message>
    <reference>Genesis 1:26</reference>
</assurance>
</assurances> 
```

我正在使用这样的代码来尝试检索它：

```
int eventType = -1;
    while(eventType != XmlResourceParser.END_DOCUMENT)
    {
        XmlResourceParser assurances = getResources().getXml(R.xml.assurances); 
        String name = assurances.getText();
        Log.d(TAG, name);

        try {
            if (assurances.getEventType() == XmlResourceParser.START_TAG) {
                String s = assurances.getName();

                if (s.equals("assurance")) {
                    String strMessage = assurances.getAttributeValue(null, "message");
                    String strReference = assurances.getAttributeValue(null, "reference");

                    Log.d(TAG, strMessage);
                    Log.d(TAG, strReference);
                }
            }
        } catch (XmlPullParserException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

它没有获取数据，我不确定从这里去哪里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T22:15:47.743

您不需要使用 getAttributeValue 方法，而是需要使用 getText() 方法。我已经对您的代码进行了一些更改，因此如果您使用以下代码，它将正常工作：

```
int eventType = -1;
while(eventType != XmlResourceParser.END_DOCUMENT)
{
    XmlResourceParser assurances = getResources().getXml(R.xml.assurances); 
    String name = assurances.getText();
    Log.d(TAG, name);

    try {
        if (assurances.getEventType() == XmlResourceParser.START_TAG) {
            String s = assurances.getName();

            if (s.equals("assurance")) {
                assurances.next();   /// moving to the next node
                if(assurances.getName() != null && assurances.getName().equalsIgnoreCase("message")){
                    String strMessage = assurances.getText();  ///to get value getText() method should be used
                    assurances.next();   ///jumping on to the next node
                String strReference = assurances.getText();  ////similar to above
            }

                Log.d(TAG, strMessage);
                Log.d(TAG, strReference);
            }
        }
    } catch (XmlPullParserException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T22:16:22.367

希望这对您有所帮助。问候小号

```
public static void main(String[] args) {
    try {
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document doc = db.parse(new File("c:\\_work\\test.xml"));

        //get nodes by name
        NodeList nl = doc.getElementsByTagName("assurance");
        int nbrOfElements = nl.getLength();
        for (int i = 0; i < nbrOfElements; i++) {
            Element e = (Element) nl.item(i);
            System.out.print(e.getTagName());
            System.out.print(":");
            System.out.println(e.getTextContent());
        }
    } catch (Exception ex) {
        Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

# php - 如何在php中解析来自facebook帖子的json数据？

> ID：15752467
> 
> 赞同：0
> 
> 时间：2013-04-01T21:46:37.260
> 
> 标签：php, json, facebook-graph-api

我正在尝试获取 facebook 上某个页面的帖子链接。我正在使用此代码，但它不返回任何内容

```
$jsonobject = file_get_contents('https://graph.facebook.com/CnCArabic?fields=posts&access_token=AAACEdEose0cBAHlqSgWNZApirCn3S8Qfds7ZCYwsgYC1suJ1OOq0NqwPcET51jGp6j6zzHOwhsgydgTzebtytMfkePchDt3gKvspWKNQZDZD');

 $mydata = json_decode($jsonobject);

 foreach($mydata->data as $x)
{
  echo $x->link . '<br />';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:52:57.187

从您发布的 JSON 中，您应该寻找`$mydata->posts->data`，而不是`$mydata->data`.

# php - 从数据库中检索数据并显示在文本框中

> ID：15752469
> 
> 赞同：-5
> 
> 时间：2013-04-01T21:46:47.180
> 
> 标签：php, mysql, sql-update

好的，在 PHP 中不太好，我有一个数据库（mysql）和一个包含许多字段提交到数据库的表单，我需要调用所有值并将它们相应地显示到文本框中，以便可以再次编辑和提交它们. 请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:51:19.990

我将给出一个非常简单的示例，可以帮助您入门。

这些值可通过 (最有可能) 访问`$_POST['input_name']`。不使用[Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)，您只需获取输入值，例如：

```
$input_name = isset($_POST['input_name']) ? $_POST['input_name'] : ''; 
```

然后稍后您将以如下形式显示它：

```
echo '<input name="input_name" value="'
    . htmlspecialchars($input_name, ENT_QUOTES) . '">'; 
```

如果你想使用 P/R/G，你应该这样做，你需要将输入存储在`$_SESSION`.

```
session_start();
//initialize all inputs to the empty string
if (!isset($_SESSION['inputs'])) {
    $_SESSION['inputs'] = array('input_name' => '');
}
if ('POST' == $_SERVER['REQUEST_METHOD']) {
    $_SESSION['inputs']['input_name'] = isset($_POST['input_name']) /* etc. */;
} 
```

然后，您可以通过`$_SESSION`而不是在您的表单中输出它`$_POST`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T21:56:33.880

您可以使用 php 和 HTML 执行此操作：

```
<?php
    $con = new mysqli(host,user,pass,db_name);
    $query = "SELECT * FROM table";
    $result  = $con-> query($query);
    while ($row = $result->fetch_assoc()){
         $value = $row['column'];
         echo "<input type ='text' value ='".$value."'>";
     }

?> 
```

# winapi - 为什么这种同步不起作用？

> ID：15752475
> 
> 赞同：0
> 
> 时间：2013-04-01T21:46:57.913
> 
> 标签：winapi, manualresetevent, waitforsingleobject

我有这个代码：

```
 #include <windows.h>
#include <tchar.h>
#include <stdio.h>
#include <stdlib.h>

#include <time.h>

#define ITERATIONS 10

typedef struct NUMERE
{
    DWORD a;
    DWORD b;
} *PNUMERE;

HANDLE ghThreadHandle[2];
HANDLE ghEvents[2];
//HANDLE hEvent;

NUMERE nr;

DWORD WINAPI GenerateNumbers(PNUMERE nr)
{
    //PNUMERE nr = ((PNUMERE)param);
    if(nr == NULL)
        return -1;

    nr->a = rand() % 100;
    nr->b = (nr->a) * 2;

    _tprintf(TEXT("Generated\n"));

    //Sleep(10);

    return 0;
}

DWORD WINAPI DisplayNumbers(PNUMERE nr)
{
    //NUMERE nr = *((PNUMERE)param);

    _tprintf(TEXT("Displayed: %d %d\n"),nr->a,nr->b);

    return 0;
}

DWORD WINAPI DoStuff(PVOID param)
{
    int index = *((int*)param);

    for(unsigned int i = 0 ; i < ITERATIONS ; i++)
    {
        if(index == 0)
        {
            WaitForSingleObject(ghEvents[1],INFINITE);
            ResetEvent(ghEvents[0]);

            if(GenerateNumbers(&nr) == -1)
                _tprintf(TEXT("GenerateNumbers error!\n"));

            SetEvent(ghEvents[0]);
            ResetEvent(ghEvents[1]);
        }
        else
        {
            WaitForSingleObject(ghEvents[0],INFINITE);
            ResetEvent(ghEvents[1]);

            DisplayNumbers(&nr);

            SetEvent(ghEvents[1]);
            ResetEvent(ghEvents[0]);
        }
    }

    return 0;
}

DWORD GenerateThreads()
{
    int temp0 = 0, temp1 = 1;
    ghThreadHandle[0] = CreateThread(NULL
        ,0
        ,(LPTHREAD_START_ROUTINE)DoStuff
        ,(LPVOID)&temp0
        ,0
        ,NULL);

    if(NULL == ghThreadHandle[0])
        return -1;

    ghThreadHandle[1] = CreateThread(NULL
        ,0
        ,(LPTHREAD_START_ROUTINE)DoStuff
        ,(LPVOID)&temp1
        ,0
        ,NULL);

    if(NULL == ghThreadHandle[1])
    {
        CloseHandle(ghThreadHandle[0]);
        return -1;
    }

    return 0;
}

int main()
{   
    srand(time(NULL));

    ghEvents[0] = CreateEvent(NULL,TRUE,TRUE,TEXT("MyEvent0"));
    ghEvents[1] = CreateEvent(NULL,TRUE,TRUE,TEXT("MyEvent1"));

    if(NULL == ghEvents[0] || NULL == ghEvents[1])
    {
        _tprintf("Error creating events\n");
        return -1;
    }

    if(GenerateThreads() == -1)
    {
        _tprintf("Error GenerateThreads\n");
        return -1;
    }

    WaitForMultipleObjects(2,ghThreadHandle,TRUE,INFINITE);

    //getchar();

    CloseHandle(ghThreadHandle[0]);
    CloseHandle(ghThreadHandle[1]);

    CloseHandle(ghEvents[0]);
    CloseHandle(ghEvents[1]);

    return 0;
} 
```

我希望交替调用这两个函数 (`GenerateNumbers`和)。`DisplayNumbers`但是，在启动时，`GenerateNumbers`它会被调用两次，然后它只是等待。该`DisplayNumbers`方法永远不会被调用。有人可以解释造成这种僵局的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T22:37:14.993

该`GenerateThreads`函数将局部变量的地址传递给另一个线程（`temp0`和`temp1`）。然后该函数在启动线程后立即返回。这意味着其他线程现在正在访问已释放的内存。看来，当线程读取它们的`param`时，内存值变为零，因此两个线程都认为它们是`GenerateNumbers`线程。

添加额外的调试打印语句会更快地发现这个问题。

请注意，您在每个块的末尾仍然有一个竞争条件，因为您在重置唤醒事件之前通知另一个线程开始。另一个线程可能会醒来，完成它的工作，然后设置唤醒事件，这一切都在第一个线程从`SetEvent`. 然后第一个线程重置它的事件并等待它，导致它丢失唤醒事件并因此挂起。

# c# - DataContractJsonSerializer 反序列化 Json

> ID：15752476
> 
> 赞同：0
> 
> 时间：2013-04-01T21:47:04.170
> 
> 标签：c#, json, deserialization, datacontract, datacontractjsonserializer

我正在尝试反序列化一个`Json`字符串。我的反序列化最高可达`OrderData`. 当我反序列化时`OrderData`总是`null`并且`SourceData`也没有出现。它也没有抛出任何错误。有什么建议可以解决这个问题吗？

```
 string jsonString = @" 
        {
            ""RequestId"":514106,
            ""Warning"":[],
            ""CustomerData"": {
                ""Email"":""abc@abc.com"",
                ""FullName"":""OrTguOfE"",
                ""OrderData"":[{
                    ""OrderId"":""123"",
                    ""SourceId"":""0"",
                    ""SourceData"": [{
                        ""SourceDescription"":""This is sourcedesc"",
                        ""ProductName"":""xyzabc""
                    }]
                }]
            }
        }"; 
```

我的反序列化代码在这里：

```
RecordInfo records= Deserialize<RecordInfo>(jsonString);
private static T Deserialize<T>(string jsonString)
{

    using (var ms = new MemoryStream(Encoding.Unicode.GetBytes(jsonString)))
    {
       var serializer = new DataContractJsonSerializer(typeof(T));
       return (T)serializer.ReadObject(ms);
    }
} 
```

这是我使用的数据合同

```
[DataContract]
public class RecordInfo
{
    [DataMember(Name = "RequestId")]
    public string RequestId { get; set; }

    [DataMember(Name = "Warning")]
    public string Warning { get; set; }

    [DataMember(Name = "CustomerData")]
    public CustomerData CustomerData { get; set; }
}

[DataContract]
public class CustomerData
{
    [DataMember(Name = "Email")]
    public string RequestId { get; set; }

    [DataMember(Name = "FullName")]
    public string FullName { get; set; }

    [DataMember(Name = "OrderData")]
    public OrderData OrderData { get; set; }         
}

[DataContract]
public class OrderData
{
    [DataMember(Name = "OrderId")]
    public string OrderId { get; set; }

    [DataMember(Name = "SourceId")]
    public string SourceId { get; set; }

    [DataMember(Name = "SourceData")]
    public SourceData SourceData { get; set; }
}

[DataContract]
public class SourceData 
{
    [DataMember(Name = "SourceDescription")]
    public string SourceDescription { get; set; }

    [DataMember(Name = "ProductName")]
    public string ProductName { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T23:12:48.737

您的代码的问题在于，在您的 JSON 中，对象中`OrderData`成员的类型`CustomerData`是一个数组，但在您的类型定义中它是一个对象。同样，`SourceData`您的 JSON 中的 The 是一个数组，但在您的类型定义中是一个对象。

如果您如下所示更改类型定义，您应该能够使用`DataContractJsonSerializer`.

```
public class StackOverflow_15752476
{
    const string jsonString = @" 
        {
            ""RequestId"":514106,
            ""Warning"":[],
            ""CustomerData"": {
                ""Email"":""abc@abc.com"",
                ""FullName"":""OrTguOfE"",
                ""OrderData"":[{
                    ""OrderId"":""123"",
                    ""SourceId"":""0"",
                    ""SourceData"": [{
                        ""SourceDescription"":""This is sourcedesc"",
                        ""ProductName"":""xyzabc""
                    }]
                }]
            }
        }";

    public static void Test()
    {
        RecordInfo records = Deserialize<RecordInfo>(jsonString);
        Console.WriteLine(records.CustomerData.OrderData.Length);
        Console.WriteLine(records.CustomerData.OrderData[0].OrderId);
        Console.WriteLine(records.CustomerData.OrderData[0].SourceId);
        Console.WriteLine(records.CustomerData.OrderData[0].SourceData[0].ProductName);
    }

    private static T Deserialize<T>(string jsonString)
    {
        using (var ms = new MemoryStream(Encoding.Unicode.GetBytes(jsonString)))
        {
            var serializer = new DataContractJsonSerializer(typeof(T));
            return (T)serializer.ReadObject(ms);
        }
    }

    [DataContract]
    public class RecordInfo
    {
        [DataMember(Name = "RequestId")]
        public string RequestId { get; set; }

        [DataMember(Name = "Warning")]
        public string Warning { get; set; }

        [DataMember(Name = "CustomerData")]
        public CustomerData CustomerData { get; set; }
    }

    [DataContract]
    public class CustomerData
    {
        [DataMember(Name = "Email")]
        public string RequestId { get; set; }

        [DataMember(Name = "FullName")]
        public string FullName { get; set; }

        [DataMember(Name = "OrderData")]
        public OrderData[] OrderData { get; set; }
    }

    [DataContract]
    public class OrderData
    {
        [DataMember(Name = "OrderId")]
        public string OrderId { get; set; }

        [DataMember(Name = "SourceId")]
        public string SourceId { get; set; }

        [DataMember(Name = "SourceData")]
        public SourceData[] SourceData { get; set; }
    }

    [DataContract]
    public class SourceData
    {
        [DataMember(Name = "SourceDescription")]
        public string SourceDescription { get; set; }

        [DataMember(Name = "ProductName")]
        public string ProductName { get; set; }
    }
} 
```

# xcode - Mac OS X 上的 Cocoa Websocket 服务器

> ID：15752477
> 
> 赞同：4
> 
> 时间：2013-04-01T21:47:07.070
> 
> 标签：xcode, macos, cocoa, websocket

我正在使用 XCode 将我的应用程序从 Windows 移植到 Mac。我的应用程序做的一件事是它运行一个 WebSocket 服务器进行通信。

我在 github 上看到了许多 WebSocket 客户端库，但我很难找到一个处理服务器通信的库。

谁能指出我正确的方向？

这不是重复的： [如何将 WebSockets 合并到 Cocoa 应用程序中](https://stackoverflow.com/questions/2664002/how-to-incorporate-websockets-into-a-cocoa-application)

该库用于客户端，我需要处理服务器端的东西。另外我的问题是关于开发 Mac OSX 应用程序，而不是 iOS 应用程序。

我希望这是一个 Objective-C 解决方案，我的应用程序还有许多其他要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T15:40:10.123

我写道：[https ://github.com/mxcl/MBWebSocketServer](https://github.com/mxcl/MBWebSocketServer)

可能对你有用。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-06T09:01:15.970

如果你不介意不使用 Objective C，你可以使用Dart 语言的[Websockets 库](http://api.dartlang.org/docs/releases/latest/dart_html/WebSocket.html)。[您可以在此处](http://www.dartlang.org/docs/dart-up-and-running/contents/ch05.html)查看 WebSockets 服务器示例。

# clock - 对于 8 kHz 的采样率，如果 fosc = 8MHz，实时执行循环内可以有多少个指令周期？

> ID：15752478
> 
> 赞同：0
> 
> 时间：2013-04-01T21:47:18.777
> 
> 标签：clock, pic

我有一张 16f886 的照片，我想知道你能否解释一下你是如何得到 250 个指令周期的答案的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:54:47.913

PIC 16F886 上的每条指令需要四个时钟周期才能执行。

因此，如果您以 8Khz 的速率进行采样，则每个样本之间可以有 1000 次时钟转换，并且每个样本之间可以执行 1000 / 4 = 250 条指令。

# excel - 在 Excel 中使用 VBA 将新创建的电子表格写入主电子表格

> ID：15752486
> 
> 赞同：1
> 
> 时间：2013-04-01T21:48:16.257
> 
> 标签：excel, vba, import

目前我们有每天生成的文件，它们使用相同的标准格式，但是行数（对应于我们拥有的托盘数量）每天都在变化。我需要将这些新创建的电子表格中的信息提取到主电子表格中。我希望这样当我们输入批号（也是新创建的工作表的文件名）时，它会将电子表格中的数据拉到适当的列和行中，无论我们有多少托盘。如果有人可以为我提供解决方案，或者至少为我指明正确的方向以获得正确的分步教程，我将不胜感激。谢谢。

# php - 在 Extbase 存储库中组合两个 QueryResult

> ID：15752488
> 
> 赞同：4
> 
> 时间：2013-04-01T21:48:19.920
> 
> 标签：php, typo3, extbase, typo3-flow

我正在为网站编写 TYPO3 - 扩展程序。因为我使用的是 Extbase 框架，所以我有一个存储库类 (Tx_Extbase_Persistence_Repository)，我在其中连续执行两个 sql 查询：

```
$query1 = $this->createQuery();
$query1->statement($sql1);
$res1 = $query1->execute();

$query2 = $this->createQuery();
$query2->statement($sql2);
$res1 = $query2->execute(); 
```

`$res`1 和都`$res2`包含一个`Tx_Extbase_Persistence_QueryResult`. 现在我想返回组合结果，但我不知道这是如何完成的。返回原始数组不是一个选项，因为我依赖于`QueryResult`类的函数，而且我想避免组合 sql(UNION, JOIN)。我已经尝试过了：

```
$myResult = $this->objectManager->create('Tx_Extbase_Persistence_ObjectStorage')
foreach($res1 as $obj) {
    $myResult->attach($obj);
}
//foreach $res2 
```

..但这会引发错误（`"could not determine the child object type"`）

那么如何正确地将两者结合起来`Tx_Extbase_Persistence_QueryResult`呢？

**编辑：**

结合我的意思是不是两个单独的，`QueryResults`我只想要一个包含来自 和 的`$query1`结果`$query2`。不幸的是，SQL-UNION 或 JOIN 不是一个选项。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-21T12:18:45.077

QueryResult 实现了 QueryResultInterface，它在其他 ArrayAccess 中进行了扩展。有了这个，您可以使用 offsetSet 方法。

```
foreach ($res2->toArray() as $result) {
  $res1->offsetSet(($res1->count()), $result);
} 
```

QueryResult $res1 现在也包含来自 $res2 的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-19T08:26:24.510

如果您不需要 QueryResult-Object ，您可以使用[array_merge](http://php.net/manual/de/function.array-merge.php)来做到这一点。

```
$res1 = $this->createQuery()->execute();
$res2 = $this->createQuery()->execute();
$res = array_merge($res1->toArray(), $res2->toArray()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T22:46:15.310

*通过编写组合结果*很难猜出你的意思是什么，但是，我只是在猜测，你应该使用自定义，你应该使用 SQL 的连接等来`$query->statement($sql)`获得单一。`result`

# c++ - c ++与派生类成员级联

> ID：15752489
> 
> 赞同：0
> 
> 时间：2013-04-01T21:48:20.570
> 
> 标签：c++, polymorphism

**注意：这是作业！**

我目前正在做一个大型项目，其中我有 3 个（我们将重点关注）类，一个基类 Student，以及 2 个派生类 Grad 和 Undergrad，现在我永远不会明确使用学生类，但我将创建一个包含毕业生和本科生类型转换给学生的链接列表，我的问题是我如何实现与派生类的级联，即

在我的基类中，我有一个小函数，在 Undergrad 中完全覆盖了实现

基类：

```
virtual UnderGrad& setMajor(std::string) {} 
```

本科：

```
//purpose: sets the major       
UnderGrad& UnderGrad::setMajor(std::string maj)
{
    major = maj;
    return *this;
} 
```

我想知道这是否正确或函数的正确实现是什么，所以我可以使用级联，例如

```
curStudent.setStudentNum().setMajor()...... 
```

我在做什么正确？如果是这样，我的基类应该返回什么？IE

```
return *(new Undergrad(....)); 
```

**编辑** 要回答一些问题，我只需要一个包含两个类 Grad 和 UnderGrad 的链表，它们都是派生形式的学生，为了对这些列表进行排序，除此之外，我需要访问派生类（唯一变量）但是我有他们强制转换为学生（根据作业的要求），因此为了访问任何班级特定的数据，我需要编写一些虚拟方法来访问它（是的，在我看来这似乎没用，我可以在一个班级的学生中做所有我能做到的事情在这 3 个中，但我不能有 1 个类），因此我编写虚拟方法以专门用于派生类以访问否则会“超出我的能力范围”的变量，这会是错误的吗？接下来，Undergrad 的构造函数确实设置了专业，但是如果我想编辑任何数据，让所有旧数据删除旧节点似乎是多余的，然后用旧数据和新专业创建一个新节点

克里斯在下面的评论中的回答我认为我需要什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:54:49.437

对我来说，听起来你的基类是一个`Abstract Class`. 换句话说，你**永远不会**实例化一个 type 类`Student`，它只是一种抽象和代码共享机制。

在 C++ 中没有关键字 for`abstract`就像在其他 OO 语言中一样，如`C#, Java`. 但是您可以通过将函数标记为 来实现抽象机制`pure virtual`。为此，只需将虚函数设置为 0，如

```
virtual UnderGrad& setMajor(std::string) = 0; 
```

现在，如果任何派生类未覆盖此函数，您将收到编译器错误。这提供了一个合同，上面写着“任何派生学生，必须实施`setMajor`”。因此，`Student`该类将不会实现此函数并且不会返回任何内容，因为该函数是`abstract`or `pure virtual`。

至于

```
curStudent.setStudentNum().setMajor()...... 
```

我不知道如何`setStudentNum`返回一个学生类型的对象。您可能希望将它们分成两个单独的调用。例如

```
curStudent.setStudentNum(2058937);
curStudent.setMajor("Computer Science"); 
```

# c++ - 递归目录读取

> ID：15752490
> 
> 赞同：0
> 
> 时间：2013-04-01T21:48:38.627
> 
> 标签：c++, recursion

我正在尝试递归获取目录的所有文件和子文件夹。这是我到目前为止所拥有的。

```
#include <iostream>
#include "dirent.h"
#include <io.h>

using namespace std;

void listDir(char *directory)
{
    DIR *dir;
    struct dirent *ent;
    if((dir = opendir (directory)) != NULL)
    {
        while ((ent = readdir (dir)) != NULL)
        {
            if(strstr(ent->d_name,".") != NULL)
                cout<<ent->d_name<<endl;
            else
            {
                strcat(directory,ent->d_name);
                strcat(directory,"\\");
                strcat(directory,"\0");
                cout<<directory<<endl;
                cin.get();
                listDir(directory);
            }
        }
    }
    closedir (dir);
}

int main(int param, char **args)
{
    char *path = new char[];
    path = args[1];
    strcat(path, "\\");
    listDir(path);
    cin.get();
    return 0;
} 
```

我正在使用 dirent （实际上很酷，如果您还没有的话，请获取它）并且当我递归获取文件夹时，它似乎添加到我的子文件夹末尾的目录中。例如：

![](https://i.stack.imgur.com/x2Irb.png)

下载、图像和包含都是我的 Jakes625 文件夹的子文件夹。也许我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:13:35.900

```
#include <unistd.h>
#include <dirent.h>

#include <iostream>

using namespace std;

void listDir(const string& path)
{
  DIR *dir;
  struct dirent *ent;

  if((dir = opendir (path.c_str())) != NULL)
  {
    while ((ent = readdir (dir)) != NULL)
    {
      if(string(ent->d_name).compare(".") != 0)
      {
        cout<< ent->d_name << endl;
      }
      else
      {
        string nextDir = string(ent -> d_name);
        nextDir += "\\";

        cout <<  nextDir << endl;

        listDir(nextDir);
      }
    }
  }

  closedir (dir);
}

int main(int param, char **args)
{
  string path = string(args[1]);
  listDir(path);

  return 0;
} 
```

I rewrote it so that it uses c++ strings: there's no reason to use C strings here. It works now. There were a number of minor problems, but the most significant was that you didn't specify a size when you went to allocate a char array. This line was the culprit:

```
char *path = new char[]; // bad! 
```

If you don't specify a size then the allocator doesn't know how many bytes to request from the heap. Your program didn't require heap allocation because there was no case where data needed to outlive its enclosing lexical block.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-07T22:15:12.410

[https://en.cppreference.com/w/cpp/filesystem/recursive_directory_iterator](https://en.cppreference.com/w/cpp/filesystem/recursive_directory_iterator)

```
 for(auto& p: fs::recursive_directory_iterator("my_directory"))
        std::cout << p.path() << '\n'; 
```

这是一个例子

```
#include <fstream>
#include <iostream>
#include <filesystem>
namespace fs = std::filesystem;

int main()
{
    fs::current_path(fs::temp_directory_path());
    fs::create_directories("sandbox/a/b");
    std::ofstream("sandbox/file1.txt");
    fs::create_symlink("a", "sandbox/syma");
    for(auto& p: fs::recursive_directory_iterator("sandbox"))
        std::cout << p.path() << '\n';
    fs::remove_all("sandbox");
} 
```

输出：

```
"sandbox/a"
"sandbox/a/b"
"sandbox/file1.txt"
"sandbox/syma" 
```

# angularjs - $scope.headings 数据值在 $http.get 之外未定义

> ID：15752491
> 
> 赞同：1
> 
> 时间：2013-04-01T21:48:39.413
> 
> 标签：angularjs, angularjs-scope

**目标：**填充具有动态表标题（通过 GET 检索）的表。因此，用于填充表的值（通过另一个 GET 检索）具有可以连接两者的 header_id：

IE

> headers = [{name:header1, id:1}, {name:header2, id2}]
> list_entries = [{value:'pop', header_id:1},{value:'bop', header_id:3}]

我不能直接在 list_entries 上使用 ng-repeat 来填充表格，因为我必须尊重某些表格单元格将为空的事实（没有与标题匹配的值）。

我想访问 $scope.headings 以便我可以遍历它，然后使用逻辑来匹配它的值（比较 header_id）。

对其他人来说，这似乎是一个愚蠢的问题，但我真的已经尝试过寻找一个好的方法。我真的很感激在这方面被指出正确的方向。

```
<script>
    var list = angular.module('listApps', []);

    list.config(function($httpProvider) {
             ... set defaults ...
    });

    list.controller('ListCtrl', function ($scope, $http, $timeout){

        var table_headings = xxxxxx; //root + ending

        /* Pull Table Headings*/    
        $http.get(table_headings.toString()).success(function(data,status){
            $scope.headings = data.response.fields_names;
            $scope.status = status;
            console.log(data.response.fields_names);
        }).error(function(result,status){
            $scope.data = result.data || "Request failed";
            $scope.status = status;
        });

        // match table headings to the respective values in order to populate table correctly
        $scope.mapping = [];

        // At this point, not even focusing on the function; just need to access $scope.headings
        angular.forEach($scope.headings, function(value, key){
            this.push(key+':'+value);
        }, $scope.mapping);
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T05:24:26.077

您也可以这样做（想法是使用带有 ng-repeat 指令的字符串表示法来调用数据的属性，即：item['property'] 而不是 item.property）：

**结果** [[图片链接]](https://i.imgur.com/AUVpkZk.png) ![在此处输入图像描述](https://i.stack.imgur.com/4ovdx.png)

如您所见，如果对象不存在该字段，则该字段为空白。

**模板**

```
<table class="table table-bordered">
<thead>
    <tr>
        <th data-ng-repeat="head in headings">{{head.title}}</th>
    </tr>
</thead>
<tbody>
    <tr data-ng-repeat="item in data">
        <td data-ng-repeat="head in headings">{{item.id}} {{item[head.id]}}</td>
    </tr>
</tbody>
</table> 
```

**控制器**

```
function ListCtrl($scope, $http) {
    $http.get('api/headings.json').then(function(result) {
        $scope.headings = result.data;    
    });
    $http.get('api/data.json').then(function(result) {
        $scope.data = result.data;
    });
} 
```

**模板对应的数据字段**

```
[
    {"id": "H1", "title": "Heading 1"},
    {"id": "H3", "title": "Heading 3"},
    {"id": "H5", "title": "Heading 5"}
] /* headings.json */ 
```

和

```
[
    {"id": "D1", "H2": "Data H2D1", "H3": "Data H3D1", "H4": "Data H4D1", "H5": "Data H5D1"},
    {"id": "D2", "H1": "Data H1D2", "H2": "Data H2D2", "H3": "Data H3D2", "H4": "Data H4D2"},
    {"id": "D3", "H1": "Data H1D3", "H2": "Data H2D3", "H3": "Data H3D3", "H4": "Data H4D3", "H5": "Data H5D3"},
    {"id": "D4", "H1": "Data H1D4", "H2": "Data H2D4", "H4": "Data H4D4", "H5": "Data H5D4"},
    {"id": "D5", "H1": "Data H1D5", "H2": "Data H2D5", "H3": "Data H3D5", "H4": "Data H4D5", "H5": "Data H5D5"}
] /* data.json with missing fields*/ 
```

# python - 我如何将 key:value 字典中的项目数设置为 python 中的键值

> ID：15752492
> 
> 赞同：0
> 
> 时间：2013-04-01T21:48:40.593
> 
> 标签：python, list, key-value, content-length

大家好，我有一个独特的问题。

在 key:value 字典中，如何获取`len`项目列表的 并让`len`成为键值？

如

```
D = {'Chicago Cubs': 1907, 1908, 'World Series Not Played in 1904': [1904], 
     'Boston Americans': 1903, 'Arizona Diamondbacks': 2001, 
     'Baltimore Orioles':1966, 1970, 1983}

Chicago Cubs: 1907,1908

team = key and number of times shown = value 
```

在计算项目出现的次数后

```
Chicago Cubs - 2 
```

我需要的是：

```
Chicago Cubs: 2 
```

我所拥有的是：

```
D = {}
for e in l:
    if e[0] not in D:
        D[e[0]] = [e[1]]
    else:
      D[e[0]].append(e[1])

for k, v in sorted(D.items(), key=lambda x: -len(x[1])):
    max_team = ("%s - %s" % (k,len(v)))
    print(max_team)
return max_team 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T21:56:35.397

您的字典的语法似乎无效尝试这样的事情（注意所有值都包含在数组语法中）：

```
D = {'Chicago Cubs': [1907, 1908], 'World Series Not Played in 1904': [1904],  'Boston Americans': [1903], 'Arizona Diamondbacks': [2001],  'Baltimore Orioles':[1966, 1970, 1983]} 
```

然后使用这样的东西（因为它更有效，因为它只访问字典中的项目一次。

```
newDict = {}
for key, value in D.iteritems():
     newDict [key] = len(value) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T21:52:55.053

我不确定我是否理解您的问题，但请尝试一下：

```
d = {}
"""add some items to d"""

for key in d.keys():
    d[key] = len(d[key])

print d 
```

# linux - Webfactional 上的 Crontab Django 脚本

> ID：15752498
> 
> 赞同：0
> 
> 时间：2013-04-01T21:49:00.093
> 
> 标签：linux, django, cron, crontab, webfaction

我需要有人弄清楚为什么我的 cron 工作不能在 webfactional 上工作。有几个类似的问题，但我认为我的情况很特殊，因为我还不能让它工作。所以我在 python 上有这个脚本可以运行`python2.7 manage.py my_script_name`。我在 webfactional 上的项目具有以下结构：

```
home/my_username/webapps/bip/bip/
----apps/
----media/
----static/
----project/
--------manage.py
--------settings.py 
```

我的`crontab -e`样子是这样的：

```
PYTHONPATH=/home/my_username/webapps/bip/lib:/home/my_username/webapps/bip/lib/python2.7:/home/my_username/webapps/bip/bip:/home/my_username/webapps/bip/bip/project
DJANGO_SETTINGS_MODULE=project.settings

6,26,46 * * * * ~/webapps/django/apache2/bin/start
3,23,43 * * * * ~/webapps/bip/apache2/bin/start
0 0 * * * /usr/local/bin/python2.7 ~/webapps/bip/bip/project/manage.py my_script_name 
```

当然我的问题是 cron 没有运行我的脚本。我知道 crontab 使用有限的 ENV，所以这可能是问题所在。任何帮助表示赞赏。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:56:53.713

将其放在您的 crontab 中，以便您可以阅读日志。

```
0 0 * * * /usr/local/bin/python2.7 ~/webapps/bip/bip/project/manage.py my_script_name &>> ~/logs/user/my_script_name 
```

这将允许您查看脚本的输出以及出现的任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T17:26:15.073

我让它工作的方式如下：

制作一个包含以下内容的 bash 文件：

```
PYTHONPATH=/home/my_username/webapps/bip/lib:/home/my_username/webapps/bip/lib/python2.7:/home/my_username/webapps/bip/bip:/home/my_username/webapps/bip/bip/project
DJANGO_SETTINGS_MODULE=project.settings

/usr/local/bin/python2.7 ~/webapps/bip/bip/project/manage.py my_script_name &>> ~/logs/user/my_script_name 
```

并在 crontab 上：

```
0 0 * * * cd ~/bin/;./my_bash_file.sh >> $HOME/logs/user/cron.log 2>&1 
```

# neo4j - 使用节点属性过滤器查找 2 个节点之间的最短路径

> ID：15752500
> 
> 赞同：0
> 
> 时间：2013-04-01T21:49:11.407
> 
> 标签：neo4j, cypher

我有一个图形数据库，它由节点（公交车站）组成，如果公交车站正常运行，则该属性名为“is_in_operation”，该属性设置为“true”；否则设置为“假”。

如果公共汽车在两个车站之间行驶，则在两个节点之间建立关系。

我想找到路径中所有节点都可操作的两个节点之间停靠点最少的路径。

数据库中有一个示例，其中 2 个指定节点之间有 2 条路径。对于两条路径中的所有节点，“is_in_operation”属性都设置为“true”。当我运行以下查询时，我得到了正确的答案

```
START d=node(1), e=node(5) 
MATCH p = shortestPath( d-[*..15]->e ) where all (x in nodes(p) where x.is_in_operation='true')
RETURN p; 
```

当我将最短路径中的一个中间节点的“is_in_operation”属性设置为“false”并重新运行查询时，我希望它返回另一条路径。但是，我根本没有得到任何答案。

查询不正确？如果是这样，我应该如何指定查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T22:11:20.880

问题是`shortestPath`不能考虑`where`子句，所以你匹配最短路径，然后用你的`where`.

这个怎么样 - 它可能不如 shortestPath 高效，但它应该返回一个结果，如果存在的话：

```
START d=node(1), e=node(5) 
MATCH p = d-[*..15]->e
where all (x in nodes(p) where x.is_in_operation='true')
RETURN p
order by len(p)
limit 1; 
```

# macos - ChildWindow 可以在 MacOS 上运行吗？

> ID：15752501
> 
> 赞同：2
> 
> 时间：2013-04-01T21:49:13.323
> 
> 标签：macos, silverlight-5.0, childwindow

ChildWindow 是否可以在 Mac 上的浏览​​器外应用程序（或浏览器内）中工作？到目前为止，我还无法使其工作。

是否有在 Mac 上*无法*使用的所有 Silverlight 功能的列表？这将有助于评估 Silverlight 的“跨平台”开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T14:36:01.067

是的，它确实有效（ChildWindow 和 Popup）。确保在 Safari 的安全设置中禁用弹出窗口阻止选项。您可能还需要关闭并重新启动 Safari。

# java - JComboBoxes 在 JTable 中的每一行、同一列具有不同的值

> ID：15752507
> 
> 赞同：-1
> 
> 时间：2013-04-01T21:49:36.970
> 
> 标签：java, swing, jtable, jcombobox

我在 a`JComboBox`中`JTable`，但是当我插入带有新值的新行时`JComboBox`，所有行的所有`JComboBox`s 都具有该值。如何`JComboBox`为第三列中的每一行设置不同的值？我试过这段代码：

```
cc = new JComboBox();
cc.addItem(jComboBox5.getSelectedItem()+"/"+jComboBox6.getSelectedItem()+"/"+jComboBox7.getSelectedItem()+" "+jComboBox1.getSelectedItem()+"."+jComboBox2.getSelectedItem());                         
DefaultTableCellRenderer renderer = new DefaultTableCellRenderer();
renderer.setToolTipText("CLICCA PER LE DATE");
Object[][] stringa = {{jTextField1.getText(), jTextField2.getText(),jTextField3.getText()}};
model.addRow(stringa[0]);
      int n=model.getRowCount(); 
             for(int i=0; i<n;i++){
             if(i==n-1){
                //HERE HOW CAN I CHOOSE THE ROW WHERE PUT THIS JCOMBOBOX? BECAUSE WITH THIS CODE I CHANGE THE VALUES OF ALL COMBOBOXES WITH NEW VALUES
                 jTable1.getColumnModel().getColumn(3).setCellEditor(new DefaultCellEditor(cc));
              jTable1.getColumnModel().getColumn(3).setCellRenderer(renderer);}
             } 
```

但是，我很抱歉大声喊叫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:59:20.100

根据我的评论：

*   您需要在 TableCellEditor 的 JComboBox 中设置数据，将数据添加到相应的 TableColumn 中。
*   您还没有告诉我们您将使用什么标准来帮助您决定如何更改组合框中显示的对象。它是基于表的行号？还是基于行中保存的数据？
*   `getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column)`通过该方法可以获得行号和数据。您的将返回一个 JComboBox，其项目已根据您的条件填充，无论当前是什么。
*   请避免在您的问题或其标题中使用全大写，因为这相当于 SHOUTING 并且不友好。

# c++ - 由双 LL 构建的学生队列

> ID：15752512
> 
> 赞同：0
> 
> 时间：2013-04-01T21:49:58.163
> 
> 标签：c++, linked-list, queue

我正在做一个项目，我必须每天从队列中弹出 3 个学生。我的 popFront 函数似乎运行良好——因为它打印出正确的学生，但随后我的程序崩溃了。任何人都知道我的函数中是否有可能导致我的程序崩溃的东西？

```
void pop_front()
{
    int num = 0;

    if (front == NULL){
        cout<<"No students to pop "<<endl;
        return;
    }

        string value;
        while(num<3)
        {
            Node *temp = front;
            if(front->next)
            {   value = front->name;
                front = front->next;
                front->prev = NULL;
                size--;
                delete temp;
                cout<<value<<" ";
                num++;
                continue;
            }
            value=front->name;
            front = NULL;
            back = NULL;
            delete temp;
            cout<<" Last student in Priority1 list is:  "<<value;
            break;
        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:27:39.030

您编写的函数没有任何问题。由于代码中的其他功能，您的程序可能已经崩溃。检查您是否尝试访问非法内存，即您在程序中的任何其他位置之前尚未分配的内存。

# php - Wordpress add_action("wp_insert_comment", array($this, "myfunction"),1); 什么也没做

> ID：15752513
> 
> 赞同：0
> 
> 时间：2013-04-01T21:50:11.993
> 
> 标签：php, wordpress, plugins

嗨，我正在创建一个 wordpress 插件，我想在任何时候在 wordpress 博客文章中插入评论时弹出一个窗口。当我在 echo "This is a test" 的调用函数中放入一个简单的 PHP 代码时的事件；然后在我的 Wordpress 开发环境中发表评论，没有任何反应。由于我无法解决这个问题，我有什么遗漏吗？

请参阅下面的代码；

```
if (!class_exists("tweet_blog_comment")
    class tweet_blog_comment
      {
        function __construct()
            {
               add_action("wp_insert_comment", array($this, "twitter_window"), 1);
            }

        function twitter_window()
            {
               echo 
                    "<script>
                        mywindow = window.open('http://www.twitter.com', '', 'width=500, height=500');
                        mywindow.focus();
                    </script>";
            }
      }

if (class_exists("tweet_blog_comments"))
    {
        $tweet_comment = new tweet_blog_comment();
    } 
```

# c++ - 只有当 len < 3 时，我才会收到堆损坏错误。怎么会？

> ID：15752515
> 
> 赞同：0
> 
> 时间：2013-04-01T21:50:14.973
> 
> 标签：c++, oop, memory, memory-management, heap-memory

出于某种原因，如果 len<3，我将在 delete[] 缓冲区行收到堆损坏错误。

```
case WM_COMMAND:
{
    switch(LOWORD(wParam))
    {
    case ID_BUTTON_OK:
        {
            int len = SendMessage(mapName, WM_GETTEXTLENGTH, 0, 0);

            char* buffer = new char[len+1];
            ZeroMemory(buffer,sizeof(buffer));

            len = SendMessage(mapName, WM_GETTEXT, (WPARAM)len+1, (LPARAM)buffer);

            if(isMapNameLegal(buffer)) // Makes sure the map name is legal
            {
            }
            else
            {
                MessageBox(NULL,"The map name is illegal","Error",MB_ICONERROR);
            }

            delete[] buffer;
        }
        break; 
```

有MapNameLegal。顺便说一下，它是静态的：

```
bool Creator::isMapNameLegal(char* name)
{
    if(strlen(name)<=3)
        return false;

    int x=0;
    while(name[x]!='\0')
    {
        if(name[x]<48 && name[x]!=32)       //32=='\r', 48==0,
            return false;
        if(name[x]>57 && name[x]<65)        //57==9, 65==A
            return false;
        if(name[x]>90 && name[x]<97)        //90==Z, 97==a
            return false;
        if(name[x]>122)                     //122==z
            return false;
        x++;
    }

    return true;
} 
```

你知道腐败问题是从哪里来的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T21:52:33.753

`sizeof(buffer)`总是返回`sizeof(char*)`，恰好在您的系统上是 4，因此无论您如何分配，都`ZeroMemory(buffer,sizeof(buffer));`有效地变为。`ZeroMemory(buffer,4);``buffer`

当您分配少于 4 个字节时，就会发生损坏。

如果方法的名称暗示了它的作用，您可以将您所拥有的替换为

```
char* buffer = new char[len+1](); 
```

尾随`()`值初始化数组的元素。

# ruby-on-rails - Rails：.clear 与 .destroy 有何不同？

> ID：15752516
> 
> 赞同：2
> 
> 时间：2013-04-01T21:50:16.837
> 
> 标签：ruby-on-rails

.clear 是否调用回调？它只是清空对象数组而不是删除它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T22:01:47.500

我假设您正在谈论呼叫`clear`或`destroy`ActiveRecord 协会（如果是这样，请在您的问题中提供这些详细信息）。在这种情况下，`clear`不运行回调，而是运行`destroy`。请参阅[ActiveRecord::Associations::ClassMethods](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)。

# spring - 未找到属性：使用 Spring 的瓷砖中的 NoSuchAttributeException

> ID：15752519
> 
> 赞同：1
> 
> 时间：2013-04-01T21:50:40.400
> 
> 标签：spring, exception, tiles

我搜索了该网站上提出的所有问题并尝试了所有更改，但没有运气。所以在这里发布查询：

我收到以下异常：

```
HTTP Status 500 - org.apache.tiles.template.NoSuchAttributeException: Attribute 'body' not found.

type Exception report

message org.apache.tiles.template.NoSuchAttributeException: Attribute 'body' not found.

description The server encountered an internal error that prevented it from fulfilling this request.

exception

org.apache.jasper.JasperException: org.apache.tiles.template.NoSuchAttributeException: Attribute 'body' not found.
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:549)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:470)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1180)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)

root cause

org.apache.tiles.template.NoSuchAttributeException: Attribute 'body' not found.
    org.apache.tiles.template.DefaultAttributeResolver.computeAttribute(DefaultAttributeResolver.java:49)
    org.apache.tiles.template.InsertAttributeModel.resolveAttribute(InsertAttributeModel.java:187)
    org.apache.tiles.template.InsertAttributeModel.start(InsertAttributeModel.java:107)
    org.apache.tiles.jsp.taglib.InsertAttributeTag.doTag(InsertAttributeTag.java:306)
    org.apache.jsp.WEB_002dINF.views.home_jsp._jspx_meth_tiles_005finsertAttribute_005f0(home_jsp.java:146)
    org.apache.jsp.WEB_002dINF.views.home_jsp._jspService(home_jsp.java:79)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1180)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)

note The full stack trace of the root cause is available in the Apache Tomcat/7.0.35 logs.
Apache Tomcat/7.0.35 
```

我的tiles.xml为：

```
<tiles-definitions>
  <definition name="base.definition" template="/WEB-INF/views/home.jsp">
         <put-attribute name="body" value="/WEB-INF/views/menu.jsp" />
  </definition>
</tiles-definitions> 
```

最后我的 servlet-context.xml 有以下条目：

```
<beans:bean id="tilesViewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver">
        <beans:property name="viewClass" value="org.springframework.web.servlet.view.tiles2.TilesView"/>
    </beans:bean>

    <!-- 
    <beans:bean id="viewResolver" 
    class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <beans:property name="viewClass">
        <beans:value>
            org.springframework.web.servlet.view.tiles2.TilesView
        </beans:value>
    </beans:property>
    </beans:bean>
 -->
    <beans:bean id="tilesConfigurer" 
    class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
    <beans:property name="definitions">
        <beans:list>
            <beans:value>/WEB-INF/tiles.xml</beans:value>
        </beans:list>
    </beans:property>
    </beans:bean> 
```

有一些评论部分，因为我从以前发布的问题中尝试了这个答案，但发生了同样的问题。

我的 POM.xml 有以下条目。（只是为了确定）

```
 <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-core</artifactId>
        <version>2.2.2</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-template</artifactId>
        <version>2.2.2</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>

    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-jsp</artifactId>
        <version>2.2.2</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>

    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-servlet</artifactId>
        <version>2.2.2</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency> 
```

我的 home.jsp 中有这段代码：

```
<tiles:insertAttribute name="body" /> 
```

我的 menu.jsp 是：

```
<ul>
<li><a href="search.htm">Search</a></li>
<li><a href="showMessages.htm">Messages</a></li>
<li><a href="contacts.htm">My Contacts</a></li>
<li><a href="change.htm">Password</a></li>
<li><a href="logout.htm">Logout</a></li>
</ul> 
```

请帮忙。如果还需要什么，请询问。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-12T16:38:21.180

在对tiles.xml进行一些更改后，我找到了答案

它的主要问题是您不能直接使用定义。您必须扩展它，然后才能使用它。

请参考我编辑的代码：

```
<definition name="new.definition" template="/WEB-INF/layout/newlayout.jsp"> 
<put-attribute name="title" value="" /> 
<put-attribute name="body" value="" /> 
<put-attribute name="menu" value="" /> 
</definition> 

<definition name="choice" extends="new.definition"> 
<put-attribute name="title" value="" /> 
<put-attribute name="body" value="/WEB-INF/views/choice.jsp" /> 
<put-attribute name="menu" value="" /> 
<put-attribute name="right" value="" /> 
    </definition> 

<definition name="logout" extends="new.definition"> 
<put-attribute name="title" value="Logging out.." />
 <put-attribute name="body" value="/WEB-INF/views/logout.jsp" />
 <put-attribute name="menu" value="" /> 
<put-attribute name="right" value="" /> 
</definition> 
```

如您所见，我最初将新定义创建为“new.definition”，然后为了选择和注销，我正在扩展现有定义。

# php - 根据具有重复值的列更新具有 +1 增量的列

> ID：15752523
> 
> 赞同：2
> 
> 时间：2013-04-01T21:50:49.240
> 
> 标签：php, mysql

我有一个包含 3 列（、、、`itemid`）`altid`的mysql`counter`表

我很难循环遍历每一行以`counter`根据重复的数量更新列`itemid`。

我正在尝试完成的示例：

```
itemid | altid | counter
1        30      1
1        31      2
1        37      3
5        53      1
5        54      2
6        112     1
6        113     2
6        114     3
6        115     4 
```

注意`itemid`重复的地方，`counter`增加+1。

该列表大约有 2500 行。我的`counter`专栏是空的。我对在 php 中更新的 while 循环内的增量没有运气，因为我不知道如何检测该重复值（或检查该先前值）。

这就是我现在所拥有的（不起作用）：

```
$query = mysql_query("SELECT * FROM table") or die(mysql_error());
while ($row = mysql_fetch_assoc($query)){
$itemid = $row['itemid'];
$i=1;
    if($row['itemid']!=$itemid){
    $i=1;
    }
$id = $row['id'];
$query = mysql_query("UPDATE table SET counter='$i' WHERE id=$id") or die(mysql_error());
$i++;
} 
```

我搜索并没有找到太多可以帮助实现这一目标的东西。非常感谢任何帮助或朝着正确的方向前进！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T21:55:46.260

试试这个 MySQL：

```
SET @pos=0, @last=0;
UPDATE `table` SET `counter`=(
    @pos:=if(
        @last=`itemid`,
        @pos+1,
        (@last:=`itemid`) and 1
    )
) ORDER BY `itemid` ASC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T22:22:08.907

有一个专门用于此的命令（仅在 MySQL 中）：[`INSERT ... ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/refman/5.1/en/insert-on-duplicate.html)

# css - @font-face 在站点中未正确显示

> ID：15752525
> 
> 赞同：0
> 
> 时间：2013-04-01T21:50:56.217
> 
> 标签：css, font-face, shopify

我有一个 myshopify 网站，我试图在使用中显示字体`@font-face`.. 但由于某种原因，字体没有生效.. 这是我所拥有的：

资产文件夹中的字体文件

在 css 中使用 myshopify 资产 url：

```
 @font-face {
    font-family: 'LeagueGothicRegular';
    src: url('{{ 'League_Gothic-webfont.eot' | asset_url }}');
    src: url('{{ 'League_Gothic-webfont.eot?iefix' | asset_url }}') format('embedded-opentype'),
    url({{ 'League_Gothic-webfont.woff' | asset_url }}) format('woff'),
    url('{{ 'League_Gothic-webfont.ttf' | asset_url }}') format('truetype'),
    url('{{ 'League_Gothic-webfont.svg#LeagueGothicRegular' | asset_url }}') format('svg');
    font-weight: normal;
    font-style: normal;
}

..

#top-menu a{
    font-family: 'LeagueGothicRegular', sans-serif;
    background-color: #fff;
    border-top-left-radius: 5px;
    border-top-right-radius: 5px;
    color: #000000;
    display: inline-block;
    font-size: 1.97em;
    line-height: 1;
    text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.3);
  padding: 6px 18px;
  padding-top: 8px;
  text-decoration: none
} 
```

有什么弹出来？谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:58:09.043

我发现了一个[类似的 SO question](https://stackoverflow.com/questions/14519613/issue-with-font-face-on-mozilla-while-using-shopify) about using font-faces with Shopify 这似乎表明您需要从在 css url 中使用过滤器的任何地方*删除*外引号`asset_url`（这与我在原始答案中建议的相反） ：

```
@font-face {
    font-family: 'LeagueGothicRegular';
    src: url({{ 'League_Gothic-webfont.eot' | asset_url }});
    src: url({{ 'League_Gothic-webfont.eot?iefix' | asset_url }}) format('embedded-opentype'),
         url({{ 'League_Gothic-webfont.woff' | asset_url }}) format('woff'),
         url({{ 'League_Gothic-webfont.ttf' | asset_url }}) format('truetype'),
         url({{ 'League_Gothic-webfont.svg#LeagueGothicRegular' | asset_url }}) format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

`asset_url` [文档页面](http://wiki.shopify.com/Asset_url)（靠近底部）似乎证实了这一点。

根据另一个[问题](https://stackoverflow.com/questions/14519613/issue-with-font-face-on-mozilla-while-using-shopify)，您可能还需要修改包含字体的文件夹的 htaccess。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-26T19:57:03.610

我遇到了同样的问题。

经过进一步检查，我的字体文件与我的其他主题文件具有不同的权限。我使用 chmod 使它们像其他人一样成为 644，然后重新上传。像魅力一样工作。

`chmod 644 LeagueGoth*`

并重新上传。

# css - 在 div 中缩进长文本

> ID：15752527
> 
> 赞同：0
> 
> 时间：2013-04-01T21:51:00.600
> 
> 标签：css

我有两个并排的div。第二个 div 有很长的文本，因此它继续到下一行。但是，当它确实发生时，我希望它缩进以便与顶部文本对齐。

jsFiddle：http: [//jsfiddle.net/xLvHq](http://jsfiddle.net/xLvHq)

HTML

```
<div id="mainHeading">
<div id="imgBox">
    <span>Some image with img tag</span>
</div>
<div id="dataBox">
    <span>Very Long long long long long long long long long long long long long long long long text</span>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:56:51.747

这应该这样做：

```
#dataBox {
display: inline-block;
width: 200px;
float: left;
margin-left: 20px;
}

#imgBox {
display: block;
float: left;
} 
```

工作小提琴：

[http://jsfiddle.net/xLvHq/5/](http://jsfiddle.net/xLvHq/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T21:58:37.083

这样做的方法是删除 CSS 中的 -50 值，并在两个实例中将 display:inline 更改为 float:left

# sql - SQL通过分隔大写来修复名称列

> ID：15752529
> 
> 赞同：0
> 
> 时间：2013-04-01T21:51:04.097
> 
> 标签：sql, case

我们有一个技术支持代理搞砸了，不小心在我们的“全名”列中删除了第一个中间名和姓氏之间的空格。

所以而不是

```
John Alan Smith 
```

读到的名字

```
JohnAlanSmith 
```

我们没有单独列中的名称，也没有其他名称来源。这是针对第三方应用程序。

我们的数据库中有 1500 多个用户，因此我们需要轻松地纠正这个问题。我能想到的唯一方法是检测大写字母。当然，我们需要以某种方式排除姓氏中间的大写字母，例如 McDonald 等。

我们可以发出一条 SQL 语句来执行此操作吗？即使我们只需要手动更正 100 个名称，它也比 1500+ 好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:13:21.587

我忍不住尝试了这个。以下代码适用于 SQL Server，它确实有效（您可以在 sqlfiddle 上查看）。

这是一个多步骤的过程。这个想法是通过加入一堆数字并检查字符的值来确定名称中每个大写字母的位置，以查看它是否大写。每个大写字母都在自己的行中。

然后，为此提取名称部分并将每个字符串的字符串连接在一起。此方法有效，假设第一个字母大写（如果不是这种情况，很容易修复）。

另外，请记住一些大写字母不是“边缘”：“McGarvey”、“Chen-Smith”等等。

这些步骤中的每一个都将因数据库而异。

```
with somenums as (
      select 1 as n union all select 2 union all select 3 union all select 4 union all select 5
     ),
     nums as (
      select ROW_NUMBER() over (order by (select NULL)) as n
      from somenums s cross join somenums s2
     ),
     test as (
         select 'JohnAlanSmith' as name union all
         select 'MaryElizabethChou'
     ),
     caps as (
      select name, n
      from test join
           nums
           on ascii(SUBSTRING(test.name, nums.n, 1)) between ascii('A') and ascii('Z')
    ),
    nameparts as (
     select name, n, nextn, SUBSTRING(name, n, coalesce(nextn - n, 1000)) as namepart
     from (select name, n,
                  (select min(n) from caps c2 where c2.name = c.name and c2.n > c.n
                  ) as nextn
           from caps c
          ) c
    )
select name,
       STUFF((select ' '+namepart
              from nameparts np2
              where np2.name = np.name
              order by n
              for xml path ('')
             ), 1, 1, ''
            ) as betterName
from nameparts np
group by name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T22:12:04.150

对于 MySQL：

当您不想浪费太多时间编写复杂的函数时，您可以尝试以下方法：

```
/*test data*/
create table foo(name varchar(50));
insert into foo values ('JohnAndySmith');

select
name,
trim(replace(replace(name, 'A', ' A'), 'S', ' S'))
from
foo 
```

看到它住[在这里](http://sqlfiddle.com/#!2/3084b/3/0)。

当然，您必须对整个字母表都这样做。该`TRIM()`函数删除第一个字母前面的空格。

有关我使用的功能的更多信息，请参阅[手册](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T22:25:30.130

根据您的 RDBMS，这样的事情可能会起作用。这专门用于 SQL Serer，并使用一个函数，该函数接受字符串中的字段和位置并返回字符串直到下一个大写字母：

```
select field, fname, mname, dbo.ReturnCapString(field,len(fname)+len(mname)+1) lname
from
  (
    select field, fname, dbo.ReturnCapString(field,len(fname)+1) mname
    from
      (
      select field, dbo.ReturnCapString(field,1) fname
      from yourtable
        ) t
    ) t2 
```

而函数——函数的主要内容是`ASCII`检查字符是否为大写：

```
CREATE FUNCTION ReturnCapString (@String VARCHAR(100), @Pos int) 
RETURNS varchar(100)
AS 
BEGIN 
   DECLARE @return varchar(100) 
   DECLARE @position INT 
   DECLARE @counter INT 

   SET @position = @Pos + 1
   SET @counter = 1
   SET @return = ''

   WHILE @position <= DATALENGTH(@string) AND @return = ''
   BEGIN 
       IF ASCII(SUBSTRING(@string, @position, 1)) BETWEEN 65 AND 90  
           SELECT @return = SUBSTRING(@string, @pos, @counter)

       SET @position = @position + 1 
       SET @counter = @counter + 1 

   END 

   IF @return = '' 
   BEGIN
     SET @return = SUBSTRING(@String, @Pos, LEN(@string))
   END 

   RETURN @return 
END 
```

当然，还有要演示的[SQL Fiddle 。](http://sqlfiddle.com/#!3/7dd49/1)

顺便说一句——感谢您提出有趣的问题！虽然这并不完美（不要认为任何事情都会 100% 完美）如果您需要潜在地标记任何明显的问题，请使用此小提琴：[http ://sqlfiddle.com/#!3/77f446/10](http://sqlfiddle.com/#!3/77f446/10)

```
FLAG   FIELD            FNAME    MNAME    LNAME
       JohnAlanSmith    John     Alan     Smith
       McDonalds        Mc                Donalds
X      JimBobMacDonald  Jim      Bob      Mac 
```

# javascript - 保存和检索多个 js 实例

> ID：15752530
> 
> 赞同：1
> 
> 时间：2013-04-01T21:51:05.740
> 
> 标签：javascript

我有一个名为 myClass 的“类”

```
myClass= (function(config){
    var _data, _args, _config;
    var pubdata;
    var setData = function(d){_data = d;};
    var getData function(){return _data;};
    var priFun = function(){};
    return {
       setData: setData
       getData: getData
};
}) 
```

在 HTML js 块中，我发起

```
var obj1 = myClass(config);
var obj2 = myClass(config);

globalObjList= [];
globalObjList.push({'id': 'obj1', 'obj': obj1});
globalObjList.push({'id': 'obj2', 'obj': obj2});
obj1.setData(data1);
obj2.setData(data2); 
```

稍后，当用户执行某些操作时，我想根据用户的选择检索 obj1 或 obj2，因此我可以使用与对象关联的数据进行进一步的操作。

例如，通过单击 button1，检索 obj1。我想要类似的东西

```
var obj = getInstanceById('btn1');
obj.getData(); //this should return me data1 
```

我不确定 getInstanceById 函数将如何工作。我做了类似的事情

```
getInstanceById = function(id){
    //match the id with the id in globalObjList array, and return the obj
} 
```

但是，这样，当以这种方式获取 obj 并执行 getData() 时，它不是我想要的正确 obj....

除了将 obj1 和 obj2 声明为全局变量之外，我还能如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:59:34.257

您需要将事件处理程序设置在与`new`实例相同的闭包中。这将允许您访问处理程序中的变量。

# appfabric - AppFabric 缓存服务非 .NET 客户端？

> ID：15752531
> 
> 赞同：1
> 
> 时间：2013-04-01T21:51:08.950
> 
> 标签：appfabric, appfabric-cache

这个问题基本上总结在标题中：AppFabric Caching 有非.NET 客户端吗？问题来了是因为我认为 AppFabric 缓存服务很棒，但目前我们正在设计一种集成一系列异构组件的设计，我们可能需要从 .NET 世界之外访问缓存服务。

一如既往，提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:55:37.433

我最近在一个非常大的项目中用 Redis 替换了 Appfabric 的所有使用，每天处理数百万个事务，并且一个使用大量缓存的项目。

我发现 Redis 比 Appfabric 好一百倍，我的一些原因是：

*   AppFabric 的设置很痛苦（创建用户，为 appfabric.xml 配置创建共享文件夹）
*   对 AppFabric 和缓存客户端 dll 的 SUCKED 的更改（从它被称为速度缓存的时候开始转换 - 可能对您没有影响，但是一旦您经历过它，您就会知道）
*   AFAIK Appfabric 没有非.net 客户端
*   启动缓存有时需要几分钟，并且需要在屁股上踢一下才能开始工作（全方位痛苦）
*   不必在 xml 配置等中设置缓存区域（并管理多个部署）

只需尝试 redis 并使用 servicestacks redis 客户端 - 你不会出错！redis 是有史以来最好的东西，也将解决您的跨平台/客户端问题。

我无法足够强调 redis 比 appfabric 好多少——试试吧。

# emacs - 有什么作用。（句点）elisp中的符号引用？

> ID：15752536
> 
> 赞同：4
> 
> 时间：2013-04-01T21:51:19.933
> 
> 标签：emacs, elisp

正如它在锡上所说`.`，elisp 中的（句点）符号引用了什么？我在 Emacs 文档中找不到变量引用，而且谷歌（不出所料）没有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T22:08:50.977

句点是`cons`运算符，而不是 lisp 意义上的符号。例如：

```
(setq nums '(1 . 2)) 
```

这相当于：

```
(setq nums (cons 1 2)) 
```

# php - 清理凌乱的 URL

> ID：15752537
> 
> 赞同：1
> 
> 时间：2013-04-01T21:51:23.120
> 
> 标签：php, apache, url, mod-rewrite

假设我们有一个如下所示的 URL：[http](http://www.onegreatwebadress.com/index.php?sideID=home) ://www.onegreatwebadress.com/index.php?sideID=home ，我们希望它显示类似的内容：[http ://www.onegreatwebadress.com/home](http://www.onegreatwebadress.com/home)

如何使用 mod_rewrite -> apache 2.2 完成？

这是我的 .htaccess（放置在网络服务器的根文件中）：此外，我正在工作的网站位于子目录中：www\onegreatsite

RewriteBase上的 RewriteEngine
/onegreatwwebadress/
RewriteRule ^sideID([a-zA-Z0-9]+).php$ sideID.php?=$1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:55:46.697

这是通过将名为：的文件上传 `.htaccess`到您的 Web 目录来完成的。Apache 将阅读此内容，并允许您操作您的 URL 等。

我发现一个对执行操作很有用的网站，对新用户也很有帮助：

[http://roshanbh.com.np/2008/03/url-rewriting-examples-htaccess.html](http://roshanbh.com.np/2008/03/url-rewriting-examples-htaccess.html)

此页面上发布的示例将有助于解决您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T22:38:09.547

您的 .htaccess 似乎无法正常运行。这可以通过更改 Apache 配置来解决。通常这些 .htaccess 问题可以通过添加`AllowOverride all`到`<Directory>`Apache 配置文件中的部分来修复。这是一个例子。

```
<Directory /var/www/>
   AllowOverride all
</Directory> 
```

这将允许 .htaccess 文件覆盖任何先前声明的配置。

# ruby - S3：我的多部分上传器不适用于 > 5GB 的文件

> ID：15752544
> 
> 赞同：1
> 
> 时间：2013-04-01T21:52:13.493
> 
> 标签：ruby, linux, amazon-s3

我正在尝试使用分段上传功能将许多大（30GB+）文件上传到 S3 存储桶。

这是代码。我把它放在一个要点中以避免混乱这个页面：[https ://gist.github.com/twslankard/5296081](https://gist.github.com/twslankard/5296081)

上传小于 5GB 的文件没有问题。根据 S3 管理控制台中对象的大小，大于 5GB 的文件似乎会在 5GB 时被“剪辑”。

在上传期间，我没有收到任何异常或错误消息。我在文档中也没有发现任何东西表明我做错了什么。

谁能看到我做错了什么？

**编辑：我从 AWS 支持了解到 Ruby SDK 尚不支持分段上传**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T00:56:52.087

S3 有一个策略文档，该文档授权表单并对可以上传的文件施加限制。限制之一是内容长度。[来自亚马逊](http://aws.amazon.com/articles/1434)的逐字记录：

> 内容长度规则，检查上传文件的大小是否在给定的最小值和最大值之间。**如果此规则未包含在策略文档中，用户将能够上传任何大小的文件，最高可达 S3 施加的 5GB 限制。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:17:16.803

根据 AWS，Ruby SDK 不支持分段上传。

但是，我发现了一个基于 python boto 的分段上传脚本。

[https://gist.github.com/chrishamant/1556484](https://gist.github.com/chrishamant/1556484)

**编辑**：Ruby SDK 现在支持分段上传[http://docs.aws.amazon.com/AmazonS3/latest/dev/uploadobjusingmpu-ruby-sdk.html](http://docs.aws.amazon.com/AmazonS3/latest/dev/uploadobjusingmpu-ruby-sdk.html)

# html - 从 HAML 中的 html 内容变量中提取纯文本

> ID：15752545
> 
> 赞同：0
> 
> 时间：2013-04-01T21:52:13.587
> 
> 标签：html, haml, hamlc

我正在尝试从 HAML 中的某些 HTML 内容中提取纯文本。例如，如果我在一个名为 message.content 的变量中有这个 HTML：

```
Hi, this is a <strong>test</strong> message! 
```

我有这样的 HAML 行：

```
%p= message.content 
```

我想要这个作为输出：

```
<p>
  Hi, this is a test message!
</p> 
```

我有什么可能的方法吗？我看过，`!=`但它解释了 HTML，还有`:plain`过滤器，但没有运气。任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:03:42.583

我不知道为此目的的 HAML 助手，您必须使用外部助手或使用 RegExp。我知道 RegExp 并不是 HTML 处理的真正首选工具，但在简单的情况下它可以正常工作：

```
%p= message.content.replace(/<\/?\w+\/?>/g, '') 
```

由于您添加了`hamlc`标签并且您可能希望此解决方案在浏览器中工作，您可以使用 jQuery 来提取文本内容：

```
%p= $(message.content).text() 
```

# c - C中的二进制文件读/写

> ID：15752546
> 
> 赞同：3
> 
> 时间：2013-04-01T21:52:22.453
> 
> 标签：c, file, struct, binary

所以我有一个 input.bin 文件，其中包含以下内容

```
IK-SZH;jdl72u;John Doe;2013-03-28 11:05
IK-GRR;kat91n;Jane Doe;2013-03-21 15:41
IK-GRR;oat62f;Jane Doe;2013-03-24 08:08 
```

我正在做的是将它读入一个结构。用数据做一些事情。添加/删除行。然后我想以与上面相同的格式将结构的内容写回 input.bin 文件。

但不是像上面那样出现。是这样的（没有空格）：

```
IK-SZH NUL jdl72u NUL John Doe NUL NUL NUL NUL NUL 2013-03-28 NUL NUL NUL IK-GRR NUL kat91n NUL Jane Doe NUL NUL NUL NUL ... 
```

当我重新读取文件（使用 NUL）时，它只将第一行放入结构中

我的代码

```
typedef struct foo {
    char kid[7];    
    char jid[7];    
    char name[21];  
    char time[20];  

} Foo;

Foo foo[200];
FILE* fp;
int size; 
```

-------- 文件阅读器

```
void read(char* filename){
    fp = fopen(filename, "rb"); 
    int i = 0;

    while (!feof(fp)) {

        if (fp==NULL){perror("File opening error\n"); exit(1);}

        fscanf(fp,"%[^;]; %[^;]; %20[^\;]; %s\n", foo[i].kid, foo[i].jid,
                foo[i].name, foo[i].time);
        i++;
    }

    size = i;

    print();

    fclose(fp);
}

void print(){
    int i;
    for (i = 0; i < size; ++i){
        printf("%s\t %s\t %s\t %s\n", foo[i].kid, foo[i].jid,
               foo[i].name, foo[i].time);
    }
} 
```

----- 作家

```
void write(){
    char str[1000];

    FILE* f = fopen("input.bin", "wb");
    fseek(f, 0, SEEK_SET);
    int i;
    for (i = 0; i < jel_size; i++)
            fwrite(&foo[i], sizeof(struct foo), 1, f);
    fclose(f);

} 
```

试过这个，但这并没有向文件写入任何内容：

```
 char str[1000];
    sprintf(str,"%s;%s;%s;%s\n", jelent[i].kazon,
                    jelent[i].jazon,jelent[i].nev,  jelent[i].ido );

        write(f,&str,sizeof(str))!=sizeof(str); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T01:11:15.120

您的结构定义是：

```
typedef struct foo
{
    char kid[7];    
    char jid[7];    
    char name[21];  
    char time[20];  
} Foo; 
```

将结构写入文件的代码位于`write()`：

```
for (i = 0; i < jel_size; i++)
    fwrite(&foo[i], sizeof(struct foo), 1, f); 
```

如果将结构初始化为所有字节为零，那么对于您提到的第一行数据：

```
IK-SZH;jdl72u;John Doe;2013-03-28 11:05 
```

我们可以推断该结构包含：

```
IK-SZH\0
jdl72u\0
John Doe\0\0\0\0\0\0\0\0\0\0\0\0\0
2013-03-28 11:05\0\0\0\0 
```

这或多或少与您所说的文件包含的内容一致：

```
IK-SZH NUL jdl72u NUL John Doe NUL NUL NUL NUL NUL 2013-03-28 NUL NUL NUL 
```

据我估计，您在名称和时间之后缺少几个 NUL，在日期之后缺少一个 NUL。

如果您想要文本输出，则必须`write()`使用`fprintf()`类似于函数`fscanf()`中的语句来格式化数据。`read()`您可能应该从函数返回一个状态以指示它是否成功。您也可以为检查`fclose()`是否成功而争论。

```
void write(void)
{
    FILE *fp = fopen("input.bin", "w");
    if (fp != 0)
    {
        for (int i = 0; i < jel_size; i++)
            fprintf(fp, "%s;%s;%s;%s\n", foo[i].kid, foo[i].jid, foo[i].name, foo[i].time);
        fclose(fp);
    }
} 
```

如果你想要二进制输出，你应该在`read()`. 同样，您应该考虑返回成功或失败的指示；避免全局变量也很好。

```
void read(const char *filename)
{
    FILE *fp = fopen(filename, "rb"); 
    if (fp != 0)
    {
        for (i = 0; fread(&foo[i], sizeof(foo[i]), 1, fp) == 1; i++)
            ;
        fclose(fp);
        size = i;
    }
} 
```

任何一种技术都行得通；试图将一个用于输出而另一个用于输入将导致混乱和混乱。

请注意，POSIX 使用的函数`read()`和`write()`具有不同的接口。虽然您坚持使用标准 C，但这些名称对您来说是公平的，但您可能最好使用替代名称，例如`reader()`and`writer()`或`foo_read()`and `foo_write()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T23:56:50.150

[https://gist.github.com/anonymous/5288805](https://gist.github.com/anonymous/5288805)

稍微更改了代码，进行了注释，并进行了测试，因此可以肯定地工作。

# javascript - 仅从 Javascript 中的字符串中获取定价详细信息

> ID：15752547
> 
> 赞同：-2
> 
> 时间：2013-04-01T21:52:24.073
> 
> 标签：javascript, jquery

我有一个看起来像这样的字符串：

`string = 5ft - +$28.87`

我需要从那个字符串中取出价格（确保不要抢到 5）。

所以是这样的：

`money = 28.87`

该字符串有时也可能如下所示：

`3ft - Free`

在这种情况下，它应该返回 0。

我试过这个：

`money=parseFloat(string.substring(string.indexOf('$')+1));`

这似乎有效，除非`3ft - Free`它返回`3`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:55:55.500

> 这似乎有效，除了 3ft - Free 它返回 3

当然可以，如果找不到字符串则`indexOf`返回。是，所以你在做，结果是做的。`-1``-1 + 1``0``substring(0)``parseFloat`

放一个分支：

```
var index = string.indexOf('$');
money = index === -1 ? 0 : parseFloat(string.substring(index + 1)); 
```

# c++ - 如何使用 C++ 读取包含混合二进制和 ASCII 数据的文件

> ID：15752548
> 
> 赞同：3
> 
> 时间：2013-04-01T21:52:25.057
> 
> 标签：c++, ascii, tokenize, binary-data

我需要使用 C++ 和纯 std（无 Boost）读取包含混合二进制和 ASCII 数据的文件。此数据通常包含嵌套的二进制和 ASCII 标头的混合，然后是二进制数据和逗号分隔的数据。数据没有很好地对齐，并且二进制标头定义了 ASCII 数据的字节数，这可能因标头而异。部分数据如下所示：

```
[binary header][binary data]The,ASCII,data,[binary header][binary data]is,not,continuous,... 
```

**我发现使用read**处理二进制数据和**getline**处理 ASCII 数据的很好的教程，我知道我可以使用 chars 逐字节读取，但我想知道你们中是否有人必须处理这种情况，并且有任何有用的建议解决这个问题的最佳方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T22:08:29.667

如果你想解析一个文件，你需要事先知道它是如何构造的。

虽然一个文件可以是一个表，其中列由逗号分隔，行由新行分隔，但另一个文件可能是 XML 或具有特定字段定义的完全二进制文件。

如果您有二进制和 ASCII 数据的混合，则必须将其全部作为二进制文件读取。

ASCII 字符只不过是表示可读字符的二进制数。

所以你需要提前知道文件是如何构建的，文件中每个字节的含义是什么。

读取此类文件的一种常见方法是使用文件中的字段创建结构，然后将文件读入其中。

例如：

```
#include <stdio.h>
#include <stdlib.h>

typedef struct mystruct_st
{
     int var1;
     char var2;
     char text[10];
}mystruct_t;

mystruct_t mystruct;

int main () {
    FILE * pFile;

    pFile = fopen ( "myfile.bin" , "rb" );
    if (pFile==NULL) {fputs ("File error",stderr); exit (1);}

    fread (&mystruct,sizeof(mystruct_t),1,pFile);

    fclose (pFile);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T22:16:37.480

唯一真正的问题是知道您在文件中的格式之间更改的位置。您必须以二进制模式打开文件（但无论如何，便携式文件通常都是这种情况）。除此之外，您必须识别何时在二进制格式（您必须实现，因为标准中没有）和文本格式之间切换。

# excel - 对列范围求和

> ID：15752549
> 
> 赞同：0
> 
> 时间：2013-04-01T21:52:26.987
> 
> 标签：excel, excel-2007, excel-2010, vba

我是excel的新手，你能帮我解决下面的问题吗？

只有当行中的所有列都有值时，我才想要列的总和，你能帮我吗？

```
 A B C D E F

 1 1 2 3 4 5 10

 2 6 4 5 6 7 9

 3 8   5 6 7 10

 4 9    3 3  3 
```

我想做 f1:f100 的总和，并且我只想在 ABCDE 中有值时才求和，如果一行中的任何列有空值，我想忽略它。就像现在我需要忽略 F3 和 F4。

巴西尔亚伯拉罕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:58:08.737

你可以像这样使用 SUMIFS

`=SUMIFS(F1:F100,A1:A100,"<>",B1:B100,"<>",C1:C100,"<>",D1:D100,"<>",E1:E100,"<>")`

或者如果您想检查超过 5 列，此版本不太透明但更容易“扩展”

`=SUMPRODUCT((COUNTBLANK(OFFSET(A1:E1,ROW(A1:A100)-ROW(A1),0))=0)+0,F1:F100)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:57:59.257

选择要求和的行并使用 S 按钮，空行不关心你。

# c - 如何使用 C win32 CodeBlocks 创建设置向导？

> ID：15752553
> 
> 赞同：0
> 
> 时间：2013-04-01T21:52:42.857
> 
> 标签：c, winapi, windows-installer, installation, codeblocks

我听说 Code Blocks 没有用于处理设置创建的集成工具，但我想知道是否有任何我可以使用的 Windows API 函数。
我在 MSDN 上找到了一些，即 MSI 函数。不知道那是怎么回事..会试验，但我缺乏 msi 库。
搜索并没有帮助我找到它们。
请帮助！

编辑：至少有类似的功能`FolderBrowserDialog`，会提示一个对话框让用户选择安装/提取某些文件的路径？`FolderBrowserDialog`是 C++ 类中的一个方法。我正在 C 中寻找这样的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:16:24.817

I always recommend creating installation packages using the [WiX toolset](http://wixtoolset.org/). It's very powerful and creates very good MSI packages. It's also Open Source so if you are curious how it does its work, you can see that as well.

# javascript - javascript中是否有用于iOS上应用程序切换的事件？

> ID：15752555
> 
> 赞同：5
> 
> 时间：2013-04-01T21:52:44.607
> 
> 标签：javascript, ios

在 iOS 上，当我在浏览器中时，我可以切换到另一个应用程序，做一些事情，然后回到浏览器。

我知道在这种情况下不会重新加载网页。但是，我想知道当用户返回浏览器时是否存在我可以处理以执行某些操作（例如显示警报）的任何事件。

所以，它应该看起来像这样

*   用户打开页面并显示警报
*   用户转到另一个 iOS 应用程序
*   用户返回浏览器（在我的页面上）
*   再次显示警报。

# css - 文本被隐藏，但我在 css 中找不到位置

> ID：15752561
> 
> 赞同：0
> 
> 时间：2013-04-01T21:53:09.703
> 
> 标签：css

此页面上的成功故事（[http://www.eupraxia.us/success-stories/](http://www.eupraxia.us/success-stories/) - 特别是马克的第二个）正在被删减文本。我在主 CSS 样式表和插件文件中发现了一个溢出：隐藏的实例。当我删除它时没有任何改变，所以我将它重新添加。还尝试在高度周围闲逛，但也没有任何作用。知道为什么文本被切断了吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:57:16.430

这是js轮播实现的标准方式。其他部分是隐藏的，因为父元素`overflow`设置为`hidden`，这使得扩展它的所有内容都是`height`不`width`可见的。

```
<div id="slider" style="width: 641px; height: 782px; overflow: hidden;"> 
```

# css - 链接有时在页面加载时可点击，有时不可点击

> ID：15752567
> 
> 赞同：1
> 
> 时间：2013-04-01T21:53:26.033
> 
> 标签：css, debugging, hyperlink

我正在建立一个网站，它使用 Jquery 和一些花哨的 css 来驱动首页上的图片库。

该画廊基于本教程： [http ://tympanus.net/codrops/2012/02/06/3d-gallery-with-css3-and-jquery/](http://tympanus.net/codrops/2012/02/06/3d-gallery-with-css3-and-jquery/)

这是我遇到问题的网页：http: [//www.apexdesignstudios.com/index.html](http://www.apexdesignstudios.com/index.html)

我根据自己对网站的需要修改了 css 和 html，这是我拥有的代码：

```
<div class="content-bg">
<div class="container_16" id="content">
    <div id="dg-container" class="dg-container">
    <div class="dg-wrapper">
    <a href="#image-1"><img src="thumbs/1.jpg" alt="image01"></a>
    <a href="#image-2"><img src="thumbs/2.jpg" alt="image02"></a>
    <a href="#image-3"><img src="thumbs/3.jpg" alt="image03"></a>
    <a href="#image-4"><img src="thumbs/4.jpg" alt="image04"></a>
    <a href="#image-5"><img src="thumbs/5.jpg" alt="image05"></a>
    <a href="#image-6"><img src="thumbs/6.jpg" alt="image06"></a>
    <a href="#image-7"><img src="thumbs/7.jpg" alt="image07"></a>
    <a href="#image-8"><img src="thumbs/8.jpg" alt="image08"></a>
    <a href="#image-9"><img src="thumbs/9.jpg" alt="image09"></a>
    <a href="#image-10"><img src="thumbs/10.jpg" alt="image10"></a>
    <a href="#image-11"><img src="thumbs/11.jpg" alt="image11"></a>
    <a href="#image-12"><img src="thumbs/12.jpg" alt="image12"></a>
    <a href="#image-13"><img src="thumbs/13.jpg" alt="image13"></a>
    <a href="#image-14"><img src="thumbs/14.jpg" alt="image14"></a>
    <a href="#image-15"><img src="thumbs/15.jpg" alt="image15"></a>
    <a href="#image-16"><img src="thumbs/16.jpg" alt="image16"></a>
    </div>
<nav> 
    <span class="dg-prev"><</span>
    <span class="dg-next">></span>
</nav>
    </div>                   
</div> 
```

然后是单击缩略图时的叠加层：

```
<div class="gallery-overlay" id="image-1">
            <img src="images/1.jpg"/>
                <div>
                    <h3><img src="images/apex.png"/></h3>
                    <p>Aureus Evolution Proof<br>by Gabor Mechtler</p>
                </div>
                <a href="#page" class="gallery-close">CLOSE</a>
        </div>
        <div class="gallery-overlay" id="image-2">
            <img src="images/2.jpg"/>
                <div>
                    <h3><img src="images/apex.png"/></h3>
                    <p>BFX Proof<br>by Gabor Mechtler</p>
                </div>
                <a href="#page" class="gallery-close">CLOSE</a>
        </div> 
```

我省略了覆盖代码的其余部分，然后重复 16 幅图像。

CSS：

```
.dg-container
{
width: 100%;
height: 280px;
position: relative;
padding-top: 10px;
}
.dg-wrapper
{
width: 300px;
height: inherit;
margin-left: auto;
margin-right: auto;
position: relative;
-webkit-transform-style: preserve-3d;
-moz-transform-style: preserve-3d;
-o-transform-style: preserve-3d;
-ms-transform-style: preserve-3d;
transform-style: preserve-3d;
-webkit-perspective: 1000px;
-moz-perspective: 1000px;
-o-perspective: 1000px;
-ms-perspective: 1000px;
perspective: 1000px;
}

.dg-wrapper a
{
width: inherit;
height: inherit;
display: block;
position: absolute;
left: 0;
top: 0;
}

.dg-wrapper a.dg-transition
{
-webkit-transition: all 0.5s ease-in-out;
-moz-transition: all 0.5s ease-in-out;
-o-transition: all 0.5s ease-in-out;
-ms-transition: all 0.5s ease-in-out;
transition: all 0.5s ease-in-out;
}
.dg-wrapper a img
{
display: block;
margin-left: auto;
margin-right: auto;
padding: 5px 0px 2px 0px;
}
.dg-wrapper a div
{
font-style: italic;
text-align: center;
margin-top: 2%;
text-shadow: 1px 1px 1px rgba(255,255,255,0.5);
color: #333;
font-size: 16px;
width: 100%;
display: none;
position: absolute;
}

.dg-wrapper a.dg-center div
{
display: block;
}
.dg-container nav
{
width: 80px;
height: 50px;
position: relative;

margin-left: auto;
margin-right: auto;

}
.dg-container nav span
{
text-indent: -9000px;
float: left;
cursor:pointer;
width: 35px;
height: 40px;
opacity: 0.8;
background: transparent url(../images/arrows.png) no-repeat top left;
padding-bottom: 10px;
}
.dg-container nav span:hover
{
opacity: 1;
}
.dg-container nav span.dg-next
{
background-position: top right;
margin-left: 10px;
}

.gallery-overlay
{
width: 0px;
height: 0px;
position: fixed;
overflow: hidden;
left: 0px;
top: 0px;
padding: 0px;
z-index: 99;
text-align: center;
background: rgb(0,0,0);
/* background: -moz-radial-gradient(center, ellipse cover, rgba(255,255,255,0.56) 0%, rgba(241,210,194,1) 100%);
background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%,rgba(255,255,255,0.56)), color-stop(100%,rgba(241,210,194,1)));
background: -webkit-radial-gradient(center, ellipse cover, rgba(255,255,255,0.56) 0%,rgba(241,210,194,1) 100%);
background: -o-radial-gradient(center, ellipse cover, rgba(255,255,255,0.56) 0%,rgba(241,210,194,1) 100%);
background: -ms-radial-gradient(center, ellipse cover, rgba(255,255,255,0.56) 0%,rgba(241,210,194,1) 100%);
background: radial-gradient(center, ellipse cover, rgba(255,255,255,0.56) 0%,rgba(241,210,194,1) 100%); */
}

.gallery-overlay > div
{
position: relative;
color: rgba(27,54,81,0.8);
width: 550px;
height: 80px;
margin: 40px auto 0px auto;
text-shadow: 0px 1px 1px rgba(255,255,255,0.6);
}

.gallery-overlay div h3,
.gallery-overlay div p
{
padding: 0px 20px;
width: 200px;
height: 60px;
}
.gallery-overlay div h3
{
float: left;
border-right: 1px solid #0090ff;
}
.gallery-overlay div h3 span,
.gallery-overlay div p
{
color: #FFFFFF;
font-family: Constantia, Palatino, "Palatino Linotype", "Palatino LT STD", Georgia, serif;
}
.gallery-overlay div h3 span
{
display: block;
line-height: 6px;
}
.gallery-overlay div p
{
font-size: 1.25em;
text-align: right;
float: left;

}
.gallery-overlay a.gallery-close
{
z-index: 1001;
color: #F00;
position: absolute;
top: 50px;
left: 50%;
font-size: 1.5em;
line-height: 25px;
text-align: center;
width: 70px;
height: 25px;
overflow: hidden;
margin-left: -25px;
opacity: 0; /* filter: alpha(opacity=0); /* internet explorer */
/* -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)"; /*IE8*/
/* -webkit-box-shadow: 0px 1px 2px rgba(0,0,0,0.3);
-moz-box-shadow: 0px 1px 2px rgba(0,0,0,0.3);
box-shadow: 0px 1px 2px rgba(0,0,0,0.3); */
}
.gallery-overlay img
{
/* height: 100%; For Opera max-height does not seem to work */
max-height: 100%;
position: relative;
opacity: 0;
filter: alpha(opacity=0); /* internet explorer */
-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)"; /*IE8*/
-webkit-box-shadow: 1px 1px 4px rgba(0,0,0,0.3);
-moz-box-shadow: 1px 1px 4px rgba(0,0,0,0.3);
box-shadow: 0px 2px 7px rgba(0,0,0,0.2);
-webkit-transition: opacity 0.5s linear;
-moz-transition: opacity 0.5s linear;
-o-transition: opacity 0.5s linear;
-ms-transition: opacity 0.5s linear;
transition: opacity 0.5s linear;
}

.gallery-overlay:target 
{
width: auto;
height: auto;
bottom: 0px;
right: 0px;
padding: 80px 100px 120px 100px;
}
.gallery-overlay:target img,
.gallery-overlay:target a.gallery-close
{
opacity: 1;
filter: alpha(opacity=99); /* internet explorer */
-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=99)"; /*IE8*/
}
/* 
100% Height for Opera as the max-height seems to be ignored, not optimal for large screens 
http://bricss.net/post/11230266445/css-hack-to-target-opera 
*/
x:-o-prefocus, .gallery-overlay img 
{
height: 100%;
} 
```

因此，如果您加载页面，您可能会注意到前面中间的缩略图是可点击的，而其两侧的 2 是不可点击的。随机刷新页面次数后，侧面缩略图确实变得可点击。我只是无法弄清楚我哪里出错了......我认为它在某处的 CSS 文件中（CSS 文件是草稿/WIP），但我仍然不确定。

感谢您提前输入！皮特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T22:48:30.150

你的问题是因为你的不同元素的放置，一个快速解决这个问题的方法是将`z-index`98 的属性`.dg-container`应用于`styles.css`数字可以低于 99 的类，因为你已经将`z-index`类设置`.gallery-overlay`为 99

**CSS**

```
.dg-container {
    width: 100%;
    height: 280px;
    position: relative;
    padding-top: 10px;
    z-index: 98;
} 
```

# tabs - 在 Angular UI 选项卡中获取范围

> ID：15752577
> 
> 赞同：5
> 
> 时间：2013-04-01T21:54:13.633
> 
> 标签：tabs, angularjs, scope, angular-ui

我在选项卡（Angular UI）的上下文中遇到了角度范围的问题。

这是我的[jsfiddle 示例](http://jsfiddle.net/afrankel/ADukg/2227/)（精简示例，显示多个选项卡上的字段，选项卡外有一个提交按钮）。

这是基本的html布局：

```
<form...>
  <tab>
    <pane>
      <input...>
    </pane>
  </tab>
</form> 
```

查看[jsfiddle 示例](http://jsfiddle.net/afrankel/ADukg/2227/)，如果我提交一个非常基本的表单，没有选项卡，我会看到 $scope.user 是一个对象。由于字段位于窗格（选项卡）内，因此范围不正确。如何访问 createUser 中提交的用户对象？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T22:18:27.110

问题是`user`模型深埋在隔离范围内。要使代码按预期工作，您需要去掉not`alert`的值。这显然不是一个解决方案。`$scope.$$childHead.panes[0].$$nextSibling.user.first_name``$scope.user`

一个简单的解决方案是将一个空`user`对象添加到控制器范围。HTML 中的`ng-model`指令随后将绑定到该属性。您的控制器应如下所示：

```
function MyCtrl($scope) {
  $scope.user = {};
  $scope.createUser = function () {
    alert($scope.user);
  };
} 
```

# ios - 为什么 facebook 不接受我的 UIImage？

> ID：15752579
> 
> 赞同：0
> 
> 时间：2013-04-01T21:54:29.053
> 
> 标签：ios, facebook, sdk, upload, uiimage

如果我使用 Facebook 方法：

```
[FBRequestConnection startForUploadPhoto:sendPicture
                               completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
                                   if (!error) { 
```

在下面解释的相同情况下，Facebook 并不总是接受我的 UIImage。如果我创建一个图像，如下所示：

```
CASE 1: UIImage *sendPicture = [UIImage imageNamed:@"f_logo.png"] 
```

然后它确实接受我的 UIImage，但如果我创建它们的图像（在本例中，postImageView 是一个 UIImageView）：

```
CASE 2: UIImage *sendPicture = self.postImageView.image; 
```

然后它不**接受**我的 UIImage。

这里有什么问题？这是错误消息：

```
Error Domain=com.facebook.sdk Code=5 "The operation couldn’t be completed. (com.facebook.sdk error 5.)" UserInfo=0xa06c970 {com.facebook.sdk:ErrorInnerErrorKey=Error Domain=NSURLErrorDomain Code=-1001 "The request timed out." UserInfo=0xa076840 {NSErrorFailingURLStringKey=https://graph.facebook.com/me/photos?sdk=ios&access_token=BAAFZAZBNVZCfS0BACpZBJgjDz6kXZCt7t3pjiTz7rLVZAZCOXytAyReqvcuNjwJ4ntLHBrAtYodFcsoRFZBWZB5ZAzZA4w1HPLGdv1DtAevuur7yQCZC6N8gnc6U7WruoBLsN158nzTKvXa6MAZDZD&migration_bundle=fbsdk0X1.68E7002A9AC18P-98220130120&format=json, NSErrorFailingURLKey=https://graph.facebook.com/me/photos?sdk=ios&access_token=BAAFZAZBNVZCfS0BACpZBJgjDz6kXZCt7t3pjiTz7rLVZAZCOXytAyReqvcuNjwJ4ntLHBrAtYodFcsoRFZBWZB5ZAzZA4w1HPLGdv1DtAevuur7yQCZC6N8gnc6U7WruoBLsN158nzTKvXa6MAZDZD&migration_bundle=fbsdk0X1.3C8500A0449BP-85920130120&format=json, NSLocalizedDescription=The request timed out., NSUnderlyingError=0xb82a090 "The request timed out."}, com.facebook.sdk:HTTPStatusCode=200, com.facebook.sdk:ErrorSessionKey=<FBSession: 0xb85c5b0, state: FBSessionStateOpen, loginHandler: 0xb85b4b0, appID: 380400245374253, urlSchemeSuffix: , tokenCachingStrategy:<FBSessionTokenCachingStrategy: 0xb854bf0>, expirationDate: 2013-05-31 20:51:54 +0000, refreshDate: 2013-04-02 10:06:39 +0000, attemptedRefreshDate: 0001-12-30 00:00:00 +0000, permissions:(
"publish_stream")>} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:48:07.173

最后，问题是我`UIImage`的太大了。我把它缩小了，然后 Facebook 接受了我的帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T02:50:16.963

当您使用 imageNamed 方法创建 UIImage 时，它​​会创建一个自动释放的实例。

相反，请尝试自己初始化对象。

```
UIImage *sendPicture = [[UIImage alloc] initWithImageNamed:@"f_logo.png"]; 
```

我自己在使用自动释放的对象时遇到了问题。

# mysql - 在mysql中将数据从一个数据库迁移到另一个数据库

> ID：15752580
> 
> 赞同：6
> 
> 时间：2013-04-01T21:54:33.053
> 
> 标签：mysql

是否可以将具有不同列名的相关数据从一个数据库迁移到另一个数据库？我在这里谈论非常大量的数据。有人有想法吗？我尝试将其导出到 CSV 并导入到其他数据库，但我收到错误消息：

```
invalid column count in CSV input in line 1 
```

因此，如果有人有有效的方法来做到这一点，请分享。或者，如果有人可以通过excel中的这个CSV映射指导mo如何正确地做到这一点，我将不胜感激

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T17:38:32.117

这其中有两种情况：

1.  数据库存储在同一台服务器中
2.  数据库存储在不同的服务器中

## 解决方案 1：同一服务器中的数据库

您只需要在目标表中插入数据：

```
insert into dbDestination.tblDestination (field1, field2, ...)
select ...
from dbSource.tblSource 
```

***笔记***

1.  该`select`语句必须包含您需要复制到目标表的字段。
2.  语句中的字段必须与部分`select`字段列表中指定的字段顺序相同`insert`

## 解决方案2：不同服务器中的数据库

我会将数据导出到纯文本文件，然后将其导入。我个人更喜欢 .csv 文件，但这取决于你。

您有两种可能：使用`select... into outfile`或使用系统终端（命令窗口）。

**一个。使用`select... into outfile`和`load data`**

1.  在服务器中`dbSource`是：

    ```
    select ...
    from dbSource.tblSource
    into outfile [your destination file]
    ... 
    ```

2.  将文件复制到目标服务器。

3.  在服务器中`dbDestination`是：

    加载数据本地 infile [您的文件] ...

***笔记***

1.  语句中的字段必须与部分`select`字段列表中指定的字段顺序相同`insert`
2.  查看 MySQL 参考手册以了解`select... into outfile`和`load data...`

**湾。使用终端**

1.  在 Linux（或其他 Unix 系统）中，打开终端窗口并输入以下命令：

    ```
    $ mysql -h [sourceServer] -u [yourUser] -p[yourPassword] dbSource -e"select ..." | sed 's/\t/,/g' > yourDestinationFile.csv 
    ```

2.  将文件复制到目标服务器

3.  启动 MySQL 控制台，并使用 `load data ...`

***笔记***

1.  语句中的字段必须与部分`select`字段列表中指定的字段顺序相同`insert`
2.  该`| sed 's/\t/,/g'`部分将 mysql 查询的输出转换为 .csv 文件。您可以使用另一个分隔符代替`,`. 有关`sed`检查[http://lowfatlinux.com/linux-sed.html的进一步参考](http://lowfatlinux.com/linux-sed.html)
3.  目标文件**将具有行标题**，因此您在导入数据时需要忽略它们。只需在句`ignore 1 lines`末添加即可。`load data...`

* * *

将数据从一个数据库复制到另一个数据库是一项非常简单的任务。希望这能为您指明正确的方向。

一个忠告：下载你的 MySQL 版本的参考手册并随身携带。您可以在那里找到大部分解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-11T21:42:28.227

一个简单的方法是使用以下语法：

```
INSERT INTO Database.Table(field 1, field 2,...)
SELECT * FROM Database2.Table2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-11T12:45:04.617

谨防！！！

```
INSERT INTO dbname.tablename(fields...);
SELECT * FROM olddatabase.oldtable; 
```

只有在 id 跟随时才会起作用。

选择省略 ID 的字段，以便自动增量可以为导入的行提供新的 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-21T13:22:02.123

用这个：

```
INSERT INTO dbname.tablename(fields...);
SELECT * FROM olddatabase.oldtable; 
```

# objective-c - fsevents 命令行

> ID：15752583
> 
> 赞同：1
> 
> 时间：2013-04-01T21:54:39.960
> 
> 标签：objective-c, macos, fsevents

我编写了一个objective-c 类，用于使用FSEventStreamCreate() 观看特定文件夹。当我在基于 GUI 的应用程序中使用它时，该类按预期工作。

现在我正在尝试使用此类编写命令行应用程序。该项目无法链接:(

以下是错误信息

> 架构 x86_64 的未定义符号：
> “_FSEventStreamCreate”，引用自：
> -[MyFSWatcher initializeEventStream] in MyFSWatcher.o
> “_FSEventStreamScheduleWithRunLoop”，引用自：
> -[MyFSWatcher initializeEventStream] in MyFSWatcher.o
> “_FSEventStreamStart”，引用自：
> -[MyFSWatcher initializeEventStream]在 MyFSWatcher.old 中
> ：未找到架构 x86_64 的符号
> clang：错误：链接器命令失败，退出代码为 1

我猜我缺少一些链接器标志。有人可以指出吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T22:02:55.973

FSEvents API 是 CoreServices 的一部分，因此您需要链接它。

如果您从命令行编译，请使用：

`clang -framework CoreServices ...`

# entity-framework - 如何在同一属性上定义 PK 和 FK

> ID：15752587
> 
> 赞同：1
> 
> 时间：2013-04-01T21:54:50.637
> 
> 标签：entity-framework, ef-code-first

我重新实现了会员提供者并希望保留原始数据库方案。我有 2 节课：

```
class UserProfile
{
  public int UserId {get;set}   //PK
......
}

class Membership
{
  public int UserId {get;set;}  //FK to UserProfile.UserId
.........
} 
```

现在我使用 FluentAPI 将 Membership.UserId 作为 FK 附加到 UserProfile.UserId 并且我希望它也是 Membership 表的 PK。

我可以保证 UserProfile.UserId 是数据库生成的身份并且永远不会重复。我尝试了以下代码，但在创建迁移过程中失败并出现错误：

**类型中的每个属性名称都必须是唯一的。已定义属性名称“UserId”。**

```
HasKey(k => k.UserId);                        //Declare it as PK           !!!!
Map(m => m.ToTable("webpages_membership"));   //Setup table name

HasRequired(t => t.User)                        //Nav.property to the UserProfile
    .WithRequiredDependent(t1 => t1.Membership) //Rev.nav.property from the UserProfile
    .Map(m => m.MapKey("UserId"));              //FK to the UserProfile    !!!! 
```

如果我删除任何用感叹号标记的行，迁移创建得很好，但列名错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:31:56.930

我想这就是你所追求的...

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
...
modelBuilder.Entity<Membership>()
    .HasKey(x => new { x.UserId });

modelBuilder.Entity<Membership>()
            .HasRequired(x => x.User)
            .WithOptional(x => x.Membership); 
```

与实体...

```
public class UserProfile
{
    [Key] public int UserId { get; set; }
    public Membership Membership { get; set; }
}
public class Membership
{
    public int UserId { get; set; }
    public UserProfile User { get; set; }
} 
```

...或者只是`.WithOptional();`如果您想在用户上删除 Membership 导航属性。

# jenkins - jenkins - 如何查看外部作业的日志目录？

> ID：15752590
> 
> 赞同：1
> 
> 时间：2013-04-01T21:55:02.343
> 
> 标签：jenkins

我正在尝试使用 jenkins 来监控外部工作。外部作业的可选输入之一是临时日志目录的路径（例如，日志目录是`/tmp/testlog-UUID`），其中写入了测试的日志。

作业完成后，我可以使用什么方法让这个目录/文件夹通过浏览器可用，这样每个人都可以从浏览器看到测试结果（和日志），而不是登录主机并从`/tmp/testlog-UUID`.

说，像这样：`http://<server>/job/testlog-UUID`

此外，发布在这里：[https ://groups.google.com/forum/#!topic/jenkinsci-users/o0PMScDqllE](https://groups.google.com/forum/#!topic/jenkinsci-users/o0PMScDqllE)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:44:46.630

当前（从 1.510 开始）的外部作业监控功能仅支持发送单个数据流（也称为“控制台输出”），不支持其他任何内容。我们应该进行各种明显的改进，包括这一点，但似乎没有人有足够的周期来做到这一点，这是一种耻辱。

当前的解决方法是将所有内容都放入这个单一的“控制台输出”中，但您可能已经知道这一点。

# html - DL 就像一张桌子

> ID：15752591
> 
> 赞同：3
> 
> 时间：2013-04-01T21:55:11.827
> 
> 标签：html, css

我`DL`在一个 300px 宽的容器中有以下内容。

```
<style type="text/css">
dl {width: 300px}
dt {
  float:left;
  clear: left;
  width: 70px;
}
</style>
<dl>
  <dt>Row1</dt>
  <dd>Value1</dd>
  <dt>Row2</dt>
  <dd>Value2</dd>
  <dt>Row3 with longer title requiring line breaks</dt>
  <dd>Value 3</dd>
  <dt>Row4</dt>
  <dd>Value4</dd>
  <dt>Row5</dt>
  <dd>Value5.1</dd>
  <dd>Value5.2</dd>
  <dt>Row6</dt>
  <dd>Value6.1</dd>
  <dd>Value6.1</dd>
  <dd>Value6.1</dd>
</dl> 
```

我怎样才能对齐项目看起来像一张桌子，即：

*   `DT`左栏中有，右栏中有`DD`s
*   rowX 和 valueX 顶部对齐
*   多个`DD`s（代表一个`DT`）在彼此下方列出

[我在这里](https://stackoverflow.com/questions/1713048/how-to-style-dt-and-dd-so-they-are-on-the-same-line)、[这里](https://stackoverflow.com/questions/3284539/display-dl-like-a-table)和[这里](https://stackoverflow.com/questions/13708788/showing-definition-list-with-dt-and-dd-on-same-row)发现了多个相关的问题，但是我都没有设法将不同的情况进行顶部对齐（`DT`高于`DD`，多个`DD`s 高于`DT`）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T22:16:13.183

我认为这个解决方案将与你想要的一些小的调整一致。基本上，您还需要浮动所有`dd`s，但您需要清除它们以便它们垂直堆叠。但是，您无法清除第一个，因为您需要`dt`向左浮动。（下一个`+`兄弟）选择器对此很方便，因为您可以覆盖. 您可能还需要更新其他s 的边距。`clear``dd``dt``dd`

```
dl {width: 300px}
dt {
  float:left;
  clear: left;
  width: 70px;
}
dd {
    clear: left;
    float: left;
    margin-left: 70px;
}
dt + dd {
    float: left;
    clear: none;
    margin-left: 0;
} 
```

[http://jsfiddle.net/8VKng/2/](http://jsfiddle.net/8VKng/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T22:06:23.937

我会使用 Bootstrap 为您处理 DL。

[引导描述列表](http://twitter.github.com/bootstrap/base-css.html#typography)

他们有两个选项，您还可以根据自己的喜好自定义他们的设置。只是一个建议。

```
.dl-horizontal:before,
.dl-horizontal:after {
    display: table;
    content: "";
    line-height: 0;
}
.dl-horizontal dt {
  float: left;
  width: 160px;
  clear: left;
  text-align: left;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.dl-horizontal dd {
  margin-left: 180px;
} 
```

[http://jsfiddle.net/rzWnG/1/](http://jsfiddle.net/rzWnG/1/)

这就是 bootstrap 用来制作水平 DL 的方法。我对它进行了一些设计，以便更好地满足您的需求。我使用了他的 JSfiddle 中的 Explosion Pills html。为此，我会给他一个赞成票。

试试这个。准确了解您想要的内容会有所帮助。

# javascript - Uncaught SyntaxError：从自托管服务器迁移到托管服务器后出现意外令牌

> ID：15752600
> 
> 赞同：0
> 
> 时间：2013-04-01T21:55:43.370
> 
> 标签：javascript, uncaught-exception

大家好：我正在寻求帮助，而不是作为程序员，我相当决心找到解决应用程序问题的方法。我有一个建于 2009 年并在自托管服务器上实现的 Web 应用程序。我们最近决定关闭我们的服务器，因此我需要为该应用程序找一个新家，因此决定将其移至 Godaddy。

除了我认为我理解并将描述的一项功能外，大多数情况下都可以在应用程序上运行。

首先，应用程序实际上是两个共享信息的应用程序。一个是模型构建应用程序，我们在其中构建复杂的模型，这些模型成为配置产品的“外壳”。第二个应用程序使用“外壳”并引导最终用户完成配置产品功能和变量的过程。

就目前而言，应用程序的模型构建方面似乎工作正常。配置方面“大部分”有效。然而，我们在迁移到 GoDaddy 后创建的新 shell 在配置方面没有被正确读取。尽管可以编辑现有配置（它们位于配置端）并且功能都可以工作，但只有“新”模型（位于模型构建端）是看不到的。

这两个应用程序都托管在一个共享的豪华托管帐户 IIS6、ASP.NET 2 上。

创建新模型时，当配置端的用户选择构建新配置时，它会保存在模型目录中。配置应用程序应该读取该目录的内容并向用户提供一个模型列表以供选择配置。

在花费数小时寻找原因后，我认为问题与管理两个应用程序之间通信的那些功能特别相关。

使用 Chrome 时，我可以看到 Uncaught SyntaxError: Unexpected token {

任何想法或帮助解决此问题将不胜感激！

一些代码.... }

```
 function newConfigurationHandler(responseText) {
        var response = JSON.parse(responseText); 
```

* **Uncaught SyntaxError: Unexpected token { ***

```
 //alert(response.success + ', ' + response.error);

        if (response.total > 0) {
            var i = 0;
            var cb = '<select id="cmbModel">\n';
            cb = cb + '<option value="">- select a model -</option>';
            for (i = 0; i < response.results.length; i++) {
                cb = cb + '<option value="' + response.results[i].modelId + '">'
                        + response.results[i].name
                        + (response.results[i].description != '' ? ' - ' + response.results[i].description : '')
                        + '</option>\n';
            }
            cb = cb + '</select>';

            Ext.Msg.show({
                title: 'Select a model to configure',
                msg: 'Model: ' + cb,
                more code.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:39:11.010

```
{
    {
        "total": 0,
        "results": "",
        "error":""
    }
} 
```

不是有效的[JSON 对象](http://www.json.org/)。它必须只有一对`{}`或一个键来分配这些值，例如：

```
{
    "total": 0,
    "results": "",
    "error":""
} 
```

或者

```
{
    "response": {
        "total": 0,
        "results": "",
        "error":""
    }
} 
```

# gxt - 远程加载 ComboBox 的设置值

> ID：15752601
> 
> 赞同：0
> 
> 时间：2013-04-01T21:55:44.557
> 
> 标签：gxt

将 GXT 2.2.5 与 GWT 2.3.0 一起使用...

这把我难住了。我有一个 RpcProxy 检索要显示在 ComboBox 上供用户选择的项目列表。我在 ComboBox 旁边还有一个按钮，允许用户创建一个新项目。该按钮打开一个窗口，用户在其中输入信息，然后将新项目添加到数据库中。

我想要发生的是，当用户在操作结束时关闭窗口时，ComboBox 会自动选择新项目。我通过它的 ID 识别新项目，它通过 ComboBox 传递回容器。

首先，我尝试简单地设置 ComboBox 值：

```
Item item = comboBox.getStore().findModel("id", id);
if (item != null)
{
  comboBox.setValue(item);
} 
```

那没有用；据我所知，ComboBox 没有重新加载数据，因此不存在可供选择的新项目。

因此，接下来我尝试在选择之前重新加载商店：

```
comboBox.getStore().getLoader().load();
Item item = comboBox.getStore().findModel("id", id);
if (item != null)
{
  comboBox.setValue(item);
} 
```

那也没有用；该值仍未被选中。

最后，我尝试创建一个临时 LoadListener 以确保在进行选择之前重新加载商店：

```
LoadListener listener = new LoadListener()
{
  @Override
  public void loaderLoad(LoadEvent le)
  {
    super.loaderLoad(le);
    Item item = comboBox.getStore().findModel("id", id);
    if (item != null)
    {
      comboBox.setValue(item);
    }
  }
};
comboBox.getStore().getLoader().addLoadListener(listener);
comboBox.getStore().getLoader().load();
comboBox.getStore().getLoader().removeLoadListener(listener); 
```

仍然没有喜悦。一些检查显示甚至没有调用侦听器。

我做错了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:28:08.423

您是否尝试过设置`combobox.setUseQueryCache(false);`每次重新加载组合框？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-25T00:48:11.040

在 storeDataChanged 方法中使用 store 监听器 [https://www.sencha.com/forum/showthread.php?73979-How-to-manually-select-an-item-(combobox)](https://www.sencha.com/forum/showthread.php?73979-How-to-manually-select-an-item-(combobox))

```
store.addStoreListener(new StoreListener<BeanModel>(){
        @Override
        public void storeDataChanged(StoreEvent<BeanModel> se) {                
            super.storeDataChanged(se);         

            BeanModel item = se.getStore().findModel("id", id);
            if(item != null){
                //grid.getSelectionModel().select(item, false);
                comboBox.setValue(item);
            }

        }
    }); 
```

# delphi - TeeChart 网格线/刻度线间距

> ID：15752606
> 
> 赞同：1
> 
> 时间：2013-04-01T21:56:17.940
> 
> 标签：delphi, teechart

我有一个非常简单的图表，它显示一个或多个 XY 线系列。

X 轴是一个整数，表示从硬件读取值（样本）的相对时间（例如，250 mS 采样率的 10 个样本代表 2.5 秒）。Y 轴代表从 0 到 100 的百分比。

我试图让 X 轴以合理的间隔显示网格线、刻度线和标签。合理的意思是我想要四舍五入的数字（不再是 0.42、0.48、0.54——我想要 0.40、0.45、0.50）。

在决定何时触发 GetAxisLabel 事件（以及放置标签的位置）时，应考虑标签的宽度。

最后，当用户缩放图表时，我需要进行调整以在合理的间隔内再次显示合理的标签。我已经使用了其他自动处理这些东西的图表组件——我希望 TeeChart 也可以！

我正在使用 Rad Studio XE3 附带的 TeeChart 版本。

蒂亚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:05:55.913

我在这里看到的选项是：

1.  为底轴使用适当的“间隔”。但是，根据当前实际显示的 X 值，标签可以从舍入值开始，也可以不从舍入值开始，并且仍然使用您设置的间隔。

2.  使用自定义轴标签。当然，在这种情况下，您应该在每次缩放/取消缩放图表时重新计算要绘制的标签。

重现问题的简单示例项目将有助于了解您的案例的确切情况。

# java - HBase 独立连接失败（创建表失败）

> ID：15752608
> 
> 赞同：21
> 
> 时间：2013-04-01T21:56:19.620
> 
> 标签：java, hadoop, nosql, hbase, apache-zookeeper

我正在尝试在本文之后以独立模式部署 Hbase：http: [//hbase.apache.org/book.html#quickstart](http://hbase.apache.org/book.html#quickstart)。版本为0.92.1-cdh4.1.2

但是在尝试创建表时出现这些错误：

错误信息：

```
 13/04/01 14:07:10 ERROR zookeeper.RecoverableZooKeeper: ZooKeeper exists failed after 3 retries
13/04/01 14:07:10 WARN zookeeper.ZKUtil: hconnection Unable to set watcher on znode /hbase/master
org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /hbase/master
    at org.apache.zookeeper.KeeperException.create(KeeperException.java:99)
    at org.apache.zookeeper.KeeperException.create(KeeperException.java:51)
    at org.apache.zookeeper.ZooKeeper.exists(ZooKeeper.java:1021)
    at org.apache.hadoop.hbase.zookeeper.RecoverableZooKeeper.exists(RecoverableZooKeeper.java:154)
    at org.apache.hadoop.hbase.zookeeper.ZKUtil.watchAndCheckExists(ZKUtil.java:226)
    at org.apache.hadoop.hbase.zookeeper.ZooKeeperNodeTracker.start(ZooKeeperNodeTracker.java:82)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.setupZookeeperTrackers(HConnectionManager.java:580)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.<init>(HConnectionManager.java:569) 
```

输出日志：

```
13/04/01 14:06:39 INFO zookeeper.ZooKeeper: Initiating client connection, connectString=localhost:2181 sessionTimeout=180000 watcher=hconnection
13/04/01 14:06:39 INFO zookeeper.RecoverableZooKeeper: The identifier of this process is 10231@localhost
13/04/01 14:06:39 INFO zookeeper.ClientCnxn: Opening socket connection to server localhost/127.0.0.1:2181\. Will not attempt to authenticate using SASL (Unable to locate a login configuration)
13/04/01 14:06:39 WARN zookeeper.ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
        at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
        at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:599)
        at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:350)
        at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1068)
13/04/01 14:06:39 WARN zookeeper.RecoverableZooKeeper: Possibly transient ZooKeeper exception: org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /hbase/hbaseid 
```

我的配置：

1.  在 hbase-env.sh 中添加了 JAVA_HOME
2.  hbase_site.xml

    ```
    <name>hbase.rootdir</name>

    <value>file:///home/hadoop/data</value> 
    ```

    ```
    <name>hbase.zookeeper.property.dataDir</name>

    <value>file:///home/hadoop/zookeeper</value> 
    ```

我试图修改 /etc/hosts，它看起来像这样（oracle 是主机名）：

```
127.0.0.1   localhost oracle 
```

或者

```
[server ip]   localhost oracle 
```

但这些对我不起作用。

我的确切代码是：

```
[usr@oracle bin]$ ./start-hbase.sh 
starting master, logging to /home/hadoop/hbase-0.94.6/bin/../logs/hbase-usr-master-oracle.out
[usr@oracle bin]$ hbase shell
13/04/01 14:57:55 WARN conf.Configuration: hadoop.native.lib is deprecated. Instead, use io.native.lib.available
HBase Shell; enter 'help<RETURN>' for list of supported commands.
Type "exit<RETURN>" to leave the HBase Shell
Version 0.92.1-cdh4.1.2, rUnknown, Thu Nov  1 18:02:07 PDT 2012

hbase(main):001:0> create 'test','cf' 
```

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-19T17:57:49.253

看起来`hbase.zookeeper.quorum`您的配置中缺少。请查看此 HBase 指南章节，它可能会有所帮助：[http ://hbase.apache.org/book/zookeeper.html](http://hbase.apache.org/book/zookeeper.html)

另外请检查 zookeeper 是否在正确的端口上启动，并且（更常见的情况）正确的 IP 接口。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-24T10:48:04.897

我不确定你是否在 Mac 上，但我也遇到了这个问题。原来是因为 .DS_STORE 文件位于 -ROOT- 区域服务器的文件夹中，导致连接异常。很奇怪！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-14T13:30:45.180

在 HBase 1.2.3 中，我在独立模式下遇到了几乎相同的错误“ZooKeeper 存在 4 次重试后失败”。这是由于运行 ./start-hbase.sh 没有权限连接到端口 2181 造成的。解决方案结果非常简单：

```
sudo ./start-hbase.sh 
```

以防万一，hbase-site.xml 的配置是：

```
<configuration>
   <property>
      <name>hbase.rootdir</name>
      <value>file:///home/hadoop/HBase/HFiles</value>
   </property>
   <property>
      <name>hbase.zookeeper.property.dataDir</name>
      <value>/home/hadoop/zookeeper</value>
   </property>
</configuration> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-10T04:47:10.533

有些东西可能与您的配置有关。首先，我下载 HBase tar ( [http://hbase.apache.org/book/quickstart.html](http://hbase.apache.org/book/quickstart.html) ) 来运行 HBase。我没有按照链接做任何配置，只是下载，启动 HBase，运行“HBase shell”。但是在创建表格时，它给了我你提到的错误。然后，我在 Mac 上搜索 HBase 安装，因为我使用的是 Mac。我采用“brew install hbase”安装HBase（[http://chase-seibert.github.io/blog/2013/02/01/getting-starting-with-hbase-and-pig.html](http://chase-seibert.github.io/blog/2013/02/01/getting-starting-with-hbase-and-pig.html)）。完成安装后，我重新创建表。成功。

所以重新考虑你的错误，它必须与你的 JAVA_HOME 或 HBase 上的其他配置相关联。通过这种方式找到答案可能会对您有所帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-04-13T10:34:36.117

错误“ **ERROR zookeeper.RecoverableZooKeeper: ZooKeeper exists failed after 3 retries** ”很可能表明您没有`zookeeper`运行 - 在启动 HBase shell 之前，您可以使用以下方法验证 Zookeeper quorum 是否已启动：

```
$ jps 
```

该命令将列出机器上的所有 java 进程，即可能的输出必须是 - 对于您尝试设置的独立 HBase 设置（忽略左列中的数字，即 pid）：

```
62019 Jps
61098 HMaster        
61233 HRegionServer     
61003 HQuorumPeer 
```

如果您的输出没有`HQuorumPeer`- 表示 zookeeper 没有运行。

[HBase 集群需要Zookeeper](http://hbase.apache.org/0.94/book/zookeeper.html) - 因为它管理它。

* * *

**解决方案**：

在您的 HBase 目录中，首先停止 HBase：

```
$ ./bin/stop-hbase.sh 
```

如果您正在尝试制定“独立 HBase”示例 - 坚持示例中提供的最低配置：

```
<configuration>
  <property>
    <name>hbase.rootdir</name>
    <value>file:///home/adio/workspace/hadoop/hbase/directories/hbase</value>
  </property>
  <property>
    <name>hbase.zookeeper.property.dataDir</name>
    <value>/home/adio/workspace/hadoop/hbase/directories/zookeeper</value>
  </property>
</configuration> 
```

即你`conf/hbase-site.xml`应该有上述内容。

设置后，现在再次启动 HBase：

```
$ ./bin/start-hbase.sh 
```

**PS**如果通过这些步骤仍然没有解决问题的任何人 - 将您的问题留在评论部分。

* * *

很少有相关的答案：[1](https://stackoverflow.com/questions/20239072/zookeeper-exists-failed-after-3-retries/36594328#36594328) [2](https://stackoverflow.com/questions/31674331/hbase-error-zookeeper-exists-failed-after-3-retiries/36591944#36591944) [3](https://stackoverflow.com/questions/20969677/stand-alone-hbase-on-local-file-system-getting-zookeeper-error/36591479#36591479)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-02-25T11:36:05.833

通过 stop-hbase.sh 停止 hbase 定位到您的 zookeeper 文件夹并清空该文件夹的内容。然后重新启动 hbase 和 hbase shell。这为我解决了这个问题

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-01-11T11:57:27.597

我在设置 hbase 时也遇到了这个问题。几分钟后，我发现我忘记了通过运行以下命令来启动 hbase：

```
hbase-1.1.2/bin/start-hbase.sh 
```

运行此命令后，hbase shell 工作正常。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-12-02T06:31:06.670

`hbase-site.xml`conf中似乎有一些错误。根据快速入门[文档](http://hbase.apache.org/book.html#quickstart)，独立的 HBase`hbase-site.xml`应该是这样的：

```
<configuration>
  <property>
    <name>hbase.rootdir</name>
    <value>file:///home/testuser/hbase</value>
  </property>
  <property>
    <name>hbase.zookeeper.property.dataDir</name>
    <value>/home/testuser/zookeeper</value>
  </property>
</configuration> 
```

Zookeeper 配置中没有`file://`。并且当你启动 HBase 失败时要小心，你必须删除你存储 hbase 和 zookeeper 的文件。按照上面的配置，你要删除 和 下的所有`/home/testuser/hbase`文件`/home/testuser/zookeeper`。并尝试检查日志错误信息。当我拥有正确的 conf 并`JAVA_HOME`在`hbase-env.sh`.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-01-29T06:05:53.473

编辑 /etc/hosts 文件 ...在第二行将 127.0.1.1 更改为 127.0.0.1 然后启动 Hbase ...它应该可以正常工作。如果不起作用...尝试此链接上的步骤 [http://lets-do-something-big.blogspot.in/2014/01/hbase-installation-on-ubuntu-lubuntu.html](http://lets-do-something-big.blogspot.in/2014/01/hbase-installation-on-ubuntu-lubuntu.html)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-08-10T11:03:59.867

问题在于“ **hbase.zookeeper.property.dataDir** ”属性下的“hbase-site.xml”

```
 <property>
    <name>hbase.zookeeper.property.dataDir</name>
    <value>/usr/lib/hbase/zookeeperdata</value>
  </property> 
```

注意：在此属性下设置“**本地**”文件系统中的路径。

我们只需要在本地文件系统上指定 HBase 和 ZooKeeper 写入数据的目录即可。例如在这种情况下，您执行 1) start-hbase.sh 2) hbase shell 命令

导航到路径（在我的例子中是 /usr/lib/hbase/zookeeperdata），您将在其中看到一个名为**myid**的文件。

总结验证点

1) 在执行 jps 以下过程应运行 **HQuorumPeer** ,ResourceManager, **HMaster** ,NameNode,Main, **HRegionServer** ,SecondaryNameNode,DataNode,Jps,NodeManager

2) 在 hbase-site.xml 下，对于属性“hbase.zookeeper.property.dataDir”，路径应设置为本地路径，即文件夹应在本地存在。

3) 执行 start-hbase.sh 和 hbase shell 命令后 --> 导航到 hbase.zookeeper.property.dataDir 中指定的路径（在我的示例中，路径是 /usr/lib/hbase/zookeeperdata），一个名为 myid 的文件应该在场。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-03-29T11:35:49.527

我也有同样的问题。在两个文件夹 hbase.rootdir 和 hbase.zookeeper.property.dataDir 中正确设置所有者和组。给这两个文件夹授予 755 权限。

```
sudo chown -R hadoop_user:hadoop_user_group home/hadoop/data
sudo chmod -R 755 home/hadoop/data 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2016-10-02T15:58:14.713

(1) 只要运行`./$HBASE_HOME/bin/start-habse.sh`，下面的异常就会消失。

```
org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /hbase/hbaseid
    at org.apache.zookeeper.KeeperException.create(KeeperException.java:99)
    at org.apache.zookeeper.KeeperException.create(KeeperException.java:51)
    at org.apache.zookeeper.ZooKeeper.exists(ZooKeeper.java:1045)
    at org.apache.hadoop.hbase.zookeeper.RecoverableZooKeeper.exists(RecoverableZooKeeper.java:221)
    at org.apache.hadoop.hbase.zookeeper.ZKUtil.checkExists(ZKUtil.java:419)
    at org.apache.hadoop.hbase.zookeeper.ZKClusterId.readClusterIdZNode(ZKClusterId.java:65)
    at org.apache.hadoop.hbase.client.ZooKeeperRegistry.getClusterId(ZooKeeperRegistry.java:105)
    at org.apache.hadoop.hbase.client.ConnectionManager$HConnectionImplementation.retrieveClusterId(ConnectionManager.java:905)
    at org.apache.hadoop.hbase.client.ConnectionManager$HConnectionImplementation.<init>(ConnectionManager.java:648)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)

 - List item 
```

# wordpress - 使用 nginx 的多个 .conf 文件子域

> ID：15752609
> 
> 赞同：2
> 
> 时间：2013-04-01T21:56:20.167
> 
> 标签：wordpress, dns, nginx, webserver

例如，在我的域下`example.com`，我想要一个登录页面（点击 时将显示`example.com`）、一个 WordPress 博客（将位于`blog.example.com`）和我的 HTML 简历（将位于`resume.example.com`）。使用 nginx，我想拥有三个单独的 .conf 文件，以便我可以将它们彼此分开。DNS 设置为“resume”和“blog”是`example.com`.

我在 Linode 上运行它，所以我可以完全控制 DNS 和 Web 服务器。但是，当我尝试将 nginx .conf 条目拆分为一个单独的文件时，当我在 Web 浏览器中点击它时`blog.example.com`，我会得到一个重定向。`blog.example.com``www.example.com`

我知道 WordPress 的安装不是问题，因为当所有三个服务器条目都在一个 nginx 文件中时，一切正常。我还尝试为博客（`blogs-available`和`blogs-enabled`）创建一个单独的文件夹结构，然后将这些文件夹包含在包含`nginx.conf` **之前**`sites-enabled`，但这也不起作用。这给我留下了两个问题：

1.  有没有人对如何让它工作有任何建议？也许我的 DNS 设置不正确。

2.  nginx 关心加载顺序还是模棱两可？如果是后者，那么我会将所有内容保存在一个服务器块中，要么全部启动，要么全部关闭。

更新：

nginx.conf 用于`example.com`：

```
# Blog (WordPress site - blog.example.com)
server {
  listen <ip-address>;
  server_name blog.example.com;
  root /www/blog.example.com/public_html/current;

  access_log /www/blog.example.com/logs/access.log;
  error_log /www/blog.example.com/logs/error.log;

  location / {
    index index.html index.htm index.php;
    try_files $uri $uri/ /index.php;
  }

  location ~ \.php$ {
    include /etc/nginx/fastcgi_params;
    fastcgi_param  SCRIPT_FILENAME  /www/blog.example.com/public_html/current/$fastcgi_script_name;

    if ($uri !~ "^/images/") {
      fastcgi_pass unix:/var/run/php-fastcgi/php-fastcgi.socket;
    }
    fastcgi_index index.php;
  }

  location ~* \.(js|css|png|jpg|jpeg|gif|ico)$ {
    expires max;
    log_not_found off;
  }
}

# redirect example.com to www.example.com
server {
  listen <ip-address>;
  server_name example.com;
  rewrite ^(.*)$ $scheme://www.example.com$request_uri? permanent;
  break;
}

# static site - www.example.com
server {
  listen <ip-address>;
  server_name www.example.com;
  # static HTML / soon-to-be Sinatra site
  root /www/example.com/public_html/current/public;

  access_log /www/example.com/logs/access.log;
  error_log /www/example.com/logs/error.log;
} 
```

注意：我没有`resume.example.com`上面的站点，但这应该是微不足道的。此外，上述工作顺序不限，所以我不认为这是重定向问题。

**第二次更新**

`example.com`凭直觉，我在我的conf 文件中注释掉了以下内容：

```
server {
    listen <ip-address>:80;
        server_name example.com;
        rewrite ^(.*)$ $scheme://www.example.com$request_uri? permanent;
        break;
    } 
```

它按我的预期工作。我上面的非 www -> www 重定向规则有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:14:13.550

For 2nd question, nginx config is declarative. The server block order doesn't matter. So it's easy to manage each server block in its own .conf file.

**UPDATE** After seeing the nginx config file

can't find anything wrong with the nginx conf file. Tried it in my devbox and it worked fine. So it could be from dns setup. One possibility is that you setup "blog" as a CNAME record of "www" (a cname record is an alias). e.g.,

```
blog   IN   CNAME   www 
```

If that's the case, a web browser will send [http://blog.example.com](http://blog.example.com) to [http://www.example.com](http://www.example.com).

Also note that dns record could be cached inside your browser, or in your isp dns server. Even if you fix it for a while, the wrong record may still be cached. Try

```
dig blog.example.com 
```

to obtain some information of the dns setup.

# cadence - C# 用 SKILL 代码函数调用 Cadence Allegro

> ID：15752612
> 
> 赞同：0
> 
> 时间：2013-04-01T21:56:32.907
> 
> 标签：cadence

我正在尝试从 C# 调用 Cadence Allegro，我有一些 C++ 示例，但它们非常不完整。我在 S/O 上没有看到任何东西，一些 Allegro ......但是如果有人曾经调用过 Allegro PCB 等......，你能指出我正确的方向吗？我一直在看Cadence网站。

希望将“SKILL .il”代码从 C# 应用程序发送到 Cadence PCB / Editor 等，以便 .brd（板）文件显示违规。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T23:14:24.220

所以Cadence Systems有一个叫mpsc.dll的dll，还有一个头文件mpsc.h，里面有很多函数可以调用。

这东西确实有效，只是很旧，我会用 C# 包装它

# html - 如何使用 xslt 在 html 页面中显示一些 xml 节点？

> ID：15752617
> 
> 赞同：4
> 
> 时间：2013-04-01T21:56:51.153
> 
> 标签：html, xml, xslt

我正在使用 xslt 在 xml 文件上应用一些模板并输出一个 html 页面。所以我将'xsl:output'的方法定义为'html'。但是，我需要以原始格式显示 xml 文件中的一些 xml 节点，不幸的是它们没有像我预期的那样出现在 html 页面上。

这是示例 xml 文件：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<employees>
    <employee>
        <name>Hello World</name>
        <title>UI Designer</title>
    </employee>
</employees> 
```

我的xslt如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html"/>

    <xsl:template match="/">
    <html>
    <head>
        <title>Example of Employee Data</title>
    </head>  
    <body>
        <h2>The following shows the structure of employee data file: </h2>
        <div style="background-color: grey">
            <xsl:copy-of select="employees/employee"/>
        </div>
        ......
    </body> 
    </html> 
    </xsl:template>
</xsl:stylesheet> 
```

当我查看页面源时，节点“员工”及其子节点在那里，只是没有显示在 html 页面中。我认为这是因为我将输出方法指定为“html”。但我必须生成一个 html 页面并将一些 xml 格式的节点嵌入到我的页面中......

我一直在尝试但失败了......有人可以帮我吗？谢谢！！

我希望输出页面是： ![在此处输入图像描述](https://i.stack.imgur.com/xkKg0.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-28T14:59:58.477

这可能有点晚了，但我最终在这个页面上寻找完全相同的东西。

通过 XLST 在 HTML 页面上复制 XML 数据的一种非常简单的方法是使用框架。我在[这里](http://p2p.wrox.com/xslt/81659-how-can-i-display-xml-element-tags-html.html)找到了这个解决方案，显然它已经过时且不推荐使用，但我刚刚测试过并且它正在工作。

```
<xmp>
    <xsl:copy-of select="."/>
</xmp> 
```

正如您从屏幕截图中看到的那样，我在下面有一个带有 XML 数据的漂亮手风琴！ ![在此处输入图像描述](https://i.stack.imgur.com/2zf4r.jpg)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T06:18:20.547

如果浏览器要显示`<employee>`（尖括号和所有），那么转换的序列化输出需要是`&lt;employee&gt;`. XSLT 3.0 有一个功能可以让你做

```
<xsl:value-of select="serialize(emp)"/> 
```

这会给你想要的；其他一些处理器可能会将其作为扩展功能提供。如果没有，您可以使用用 XSLT 本身编写的序列化程序，例如：http: [//fgeorges.org/xslt/serial/](http://fgeorges.org/xslt/serial/)或此处列出的序列化程序之一： [http ://www.mhonarc.org/archive/html /xsl-list/2010-08/msg00186.html](http://www.mhonarc.org/archive/html/xsl-list/2010-08/msg00186.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T00:21:05.583

您可能会考虑使用一个`<textarea>`元素并应用相同的样式属性来设置背景颜色，并利用一些 JavaScript（例如[jQuery Autosize](http://www.jacklmoore.com/autosize/)）让 textarea 自动调整以适应内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html"/>

    <xsl:template match="/">
        <html>
            <head>
                <title>Example of Employee Data</title>
                <script src='http://www.jacklmoore.com/js/jquery.js'></script>
                <script src='http://www.jacklmoore.com/js/jquery.autosize.js'></script>
                <script type="text/javascript">
                    $(document).ready(function(){
                        $('textarea').autosize();   
                    });
                </script>
            </head>  
            <body>
                <h2>The following shows the structure of employee data file: </h2>
                <textarea style="background-color: grey; width:100%">
                    <xsl:text>&#xa;</xsl:text>
                    <xsl:copy-of select="employees/employee"/>
                </textarea>
                ......
            </body> 
        </html> 
    </xsl:template>
</xsl:stylesheet> 
```

# opencv - 在 Mac OS X（64 位）上构建具有 Java 支持的 OpenCV

> ID：15752619
> 
> 赞同：5
> 
> 时间：2013-04-01T21:56:54.507
> 
> 标签：opencv

[按照http://docs.opencv.org/2.4.4-beta/doc/tutorials/introduction/desktop_java/java_dev_intro.html](http://docs.opencv.org/2.4.4-beta/doc/tutorials/introduction/desktop_java/java_dev_intro.html)的指示，我遇到了这个：

> make -j8
> ...
> ...
> 链接CXX共享库../../lib/libopencv_java244.dylib
> ld：未知选项：-whole-archive
> clang：错误：链接器命令失败，退出代码1（使用-v查看调用)
> make[2]: *** [lib/libopencv_java244.dylib] 错误 1
> ​​make[1]: *** [modules/java/CMakeFiles/opencv_java.dir/all] 错误 2
> make: *** [all] 错误 2

有什么建议么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-09-08T12:25:32.167

安装 OpenCV 最简单的解决方案之一是使用[Homebrew](http://brew.sh/)。

您只需键入：

```
brew tap homebrew/science
brew install opencv --with-java 
```

它将自动加载所需的库并构建 opencv。

完成后，您将能够在

```
/usr/local/Cellar/opencv/2.4.9/share/OpenCV/java/ 
```

![opencv路径](https://i.stack.imgur.com/jUJEo.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T09:50:10.183

我猜你是从源代码构建的。如果是这样，我建议使用 CMake。通过使用 ccmake 启用它，我设法使用 Java 模块构建 OpenCV 2.4.4：

```
cd OpenCV-2.4.4
mkdir build
cd build
ccmake .. 
```

确保`BUILD_opencv_java`是`ON`（默认情况下应该打开） ![OpenCV的Java](https://i.stack.imgur.com/2PuRS.png)

完成设置后：

1.  按配置（`c`）
2.  按生成（`g`）
3.  继续往常`make`，`make install`

为方便起见，我还上传了为 osx 10.8 上的 x86_64 构建的 Java 包装器：

*   [libopencv_java.dylib](http://lifesine.eu/so/libopencv_java.dylib)
*   [opencv-2.4.4.jar](http://lifesine.eu/so/opencv-2.4.4.jar)
*   [opencv-2.4.4.jar.dephelper](http://lifesine.eu/so/opencv-2.4.4.jar.dephelper)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-14T14:35:03.947

我的解决方案是使用 MacPort 安装......它放置了你需要的所有东西，你不用担心配置、构建等等......

只需安装 MacPort，然后运行：“sudo port install opencv +java”

有关更多详细信息，请参阅： http: [//ladstatt.blogspot.com.br/2013/04/opencv-on-macosx-with-java-support.html](http://ladstatt.blogspot.com.br/2013/04/opencv-on-macosx-with-java-support.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-03T05:02:42.870

我确实遇到了完全相同的问题！通过一些挖掘，我发现链接器 ld 在 Unix 和 OS X 中具有不同的标志。因此错误：

```
ld: unknown option: -whole-archive 
```

要修复，您可以编辑文件`modules/java/CMakeLists.txt`以使用 OS X 标志。（搜索`-whole-archive`）

原来的：

```
target_link_libraries(${the_module} -Wl,-whole-archive ${__deps} -Wl,-no-whole-archive ${__extradeps} ${OPENCV_LINKER_LIBS}) 
```

新的：

```
foreach(_dep ${__deps})
  target_link_libraries(${the_module} -Wl,-force_load "${_dep}")
endforeach() 
```

我将看看是否可以将这些更改放入回购中。:)

**--编辑--**
我原来的答案有点错误（但部分正确！）；我已经改变了上面的答案。-force_load 仅适用于一个存档，因此适用于 foreach。同样，它应该转到链接器，因此是 -Wl。有关详细信息，请参阅[拉取请求 741](https://github.com/Itseez/opencv/pull/741)，有关最新代码，请参阅 git pull。

# css - 按钮底部的颜色条在 Firefox 中无法正确显示

> ID：15752620
> 
> 赞同：0
> 
> 时间：2013-04-01T21:56:57.500
> 
> 标签：css, firefox

我的导航按钮底部的颜色栏在 Firefox 中显示不正确。它在 Mac Chrome、Mac Safari、PC IE 10 中显示效果很好。但不是 Mac Firefox (v. 19.0.2)

[http://jsfiddle.net/trevoray/CEXts/](http://jsfiddle.net/trevoray/CEXts/)

```
 #navMenu ul, #navMenu {
list-style-type: none;
margin: 0;
padding: 0;
 } 
```

有人可以帮助我吗？非常感谢您的帮助！

特雷弗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:06:53.677

这是因为锚标签上的填充。删除填充，它应该正确显示。但我建议你在周围的 li 元素上设置底部边框样式。因为否则底部边框不会像火狐中的 li 那样宽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T22:20:42.917

移除此属性

```
.nav > li > a { height:100% ; ... } 
```

# php - PHP 查找 require_once 真实路径

> ID：15752625
> 
> 赞同：3
> 
> 时间：2013-04-01T21:57:15.610
> 
> 标签：php, require-once, realpath

我需要这个`require_once`文件`main.class.php`和`functions.php`。如何 php 查找需要真实路径？！`config.php``admin/test.php`

注意：`main.class.php`在`class folder`、`functions.php`在`includes folder`和`config.php`在`root`目录 和`test.php`在`admin folder`.

文件目录：

```
root
    /admin/
        ->test.php 
    /class/
        ->main.class.php
    /includes/
        ->functions.php
    /templates
    config.php
    phpinfo.php 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T22:02:14.613

我会将您的`root`文件夹添加到包含路径并从那里开始工作。

从`admin/test.php`

```
set_include_path(implode(PATH_SEPARATOR, array(
    realpath(__DIR__ . '/..'),
    get_include_path()
)));

require_once 'class/main.class.php';
require_once 'includes/functions.php';
require_once 'config.php'; 
```

## 更新

如果我正确地关注了你的问题，假设你想在`config.php`文件中定义它，你会做这样的事情

### 配置文件

```
set_include_path(implode(PATH_SEPARATOR, array(
    __DIR__,
    get_include_path()
)));

require_once 'class/main.class.php';
require_once 'includes/functions.php'; 
```

### 管理员/test.php

```
require_once __DIR__ . '/../config.php'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T22:13:30.400

这是一个不依赖于 $_SERVER 变量的解决方案：

```
require_once(__DIR__.'/../class/main.class.php');
require_once(__DIR__.'/../includes/functions.php');
require_once(__DIR__.'/../config.php'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T21:59:25.073

你`admin/test.php`会要求这样：

```
require_once("../class/main.class.php");
require_once("../includes/functions.php");
require_once("../config.php"); 
```

# django - Django ORM 通过 2 个相关路径的外键获取相关集

> ID：15752628
> 
> 赞同：2
> 
> 时间：2013-04-01T21:57:24.493
> 
> 标签：django, django-models, django-orm

我正在研究一个具有一些复杂关系的系统，并且我正在尝试找到一种有效的方法来过滤一些数据。

假设我有以下关系：

`model C`- FK -> `model B`- FK ->`model A`

`model C`- FK -> `model R`- FK -> `model T`- FK ->`model Z`

给定一个实例，`model A`我怎样才能获得`Z`与之关联的所有 s ？

一种方法（我认为有效 - 但效率不高）如下：

```
class A(models.Model):
    @property
    def get_related_Zs(self):
        Cs = models.C.objects.filter(B__A=self)
        Zs = models.Z.objects.filter(R__T__Z__in=Cs).distinct()
        return Zs 
```

也许这是最好的方法（我对此表示怀疑）。关于更有效的方法的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T22:12:41.227

那是：

```
class A(models.Model):
    @property
    def get_related_Ts(self):
        Ts = T.objects.filter( R__C__B__A = self ).distinct()
        return Ts 
```

**解释**：简单的方法是从需要的模型开始，`T`在你的情况下。然后，您可以导航到`A`通过关系。django 查询 api 会将其转换为您的数据库后端的 SQL 连接。

**注意**：记住模型应该在执行语句之前存在于数据库中。

# scala - 编译器错误？java.lang.ClassCastException：scala.collection.mutable.WrappedArray$ofRef 不能转换为 java.lang.Integer

> ID：15752629
> 
> 赞同：3
> 
> 时间：2013-04-01T21:57:29.520
> 
> 标签：scala, classcastexception, scala-2.10, autoboxing

为一个奇怪的运行时错误挠头：

```
// File: build.sbt
scalaVersion := "2.10.1"

// File: src/main/scala/bug/Bug.scala
package bug

class Foo(val args: Any*)
case class Bar(id: Int) extends Foo(id)

object Bug extends App {
  val msg = Bar(666)
  val id  = msg.id // boom!
} 
```

如果我用`sbt run`“

```
[error] (run-main) java.lang.ClassCastException: 
  scala.collection.mutable.WrappedArray$ofRef cannot be cast to java.lang.Integer
java.lang.ClassCastException: scala.collection.mutable.WrappedArray$ofRef cannot be 
  cast to java.lang.Integer
    at scala.runtime.BoxesRunTime.unboxToInt(Unknown Source)
    at bug.Bar.id(Test.scala:4)
    at bug.Bug$delayedInit$body.apply(Test.scala:8)
    at scala.Function0$class.apply$mcV$sp(Function0.scala:40)
        ... 
```

这是什么鬼？这似乎是 Scala 2.10.1 的一个新错误，因为如果我更改为`scalaVersion := "2.10.0"`，它运行没有问题。

有什么变通的想法吗？（例如魔术编译器标志）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T10:00:12.710

根据 Jason Zaugg 的说法，这是[SI-7436](https://issues.scala-lang.org/browse/SI-7436)，应该在 Scala 2.10.3 中修复。

# c# - 如何在 c# 中使用参数调用 powershell 脚本

> ID：15752630
> 
> 赞同：3
> 
> 时间：2013-04-01T21:57:35.730
> 
> 标签：c#, powershell

我正在尝试使用来自 c# 的参数调用 powershell 脚本。是否有任何选项可以仅提供 powershell 脚本文件以及参数，而不是在 c# 代码中将整个 powershell 命令作为字符串提供。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T11:49:18.077

快速的谷歌搜索确实可以满足您的所有需求。这个来自[http://www.devx.com/tips/Tip/42716](http://www.devx.com/tips/Tip/42716)

你需要参考`System.Management.Automation` 然后使用

```
using System.Management.Automation;
using System.Management.Automation.Runspaces; 
```

创建一个运行空间来托管 PowerScript 环境：

```
Runspace runSpace = RunspaceFactory.CreateRunspace();
runSpace.Open(); 
```

使用运行空间，为您的 cmdlet 创建一个新管道：

```
Pipeline pipeline = runSpace.CreatePipeline(); 
```

创建 Command 对象以表示要执行的 cmdlet 并将它们添加到管道中。此示例检索所有进程，然后按其内存使用情况对它们进行排序。

```
Command getProcess = new Command("Get-Process");
Command sort = new Command("Sort-Object");
sort.Parameters.Add("Property", "VM"); 
pipeline.Commands.Add(getProcess);
pipeline.Commands.Add(sort); 
```

上述代码的功能与以下 PowerShell 命令行相同：

`PS > Get-Process | Sort-Object -Property VM`

最后，执行管道中的命令并对输出做一些事情：

```
Collection output = pipeline.Invoke();
foreach (PSObject psObject in output)
{
  Process process = (Process)psObject.BaseObject;
  Console.WriteLine("Process name: " + process.ProcessName);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:40:40.947

我最后做了这样的事情

```
public static string RunScript(string scriptText)
    {
        Runspace runspace = RunspaceFactory.CreateRunspace();
        runspace.Open();
        Pipeline pipeline = runspace.CreatePipeline();
        pipeline.Commands.AddScript(scriptText);
        pipeline.Commands.Add("Out-String");
        try
        {
            Collection<PSObject> results = pipeline.Invoke();
            runspace.Close();
            StringBuilder stringBuilder = new StringBuilder();
            if (pipeline.Error.Count > 0)
            {
                //iterate over Error PipeLine until end
                while (!pipeline.Error.EndOfPipeline)
                {
                    //read one PSObject off the pipeline
                    var value = pipeline.Error.Read() as PSObject;
                    if (value != null)
                    {
                        //get the ErrorRecord
                        var r = value.BaseObject as ErrorRecord;
                        if (r != null)
                        {
                            //build whatever kind of message your want
                            stringBuilder.AppendLine(r.InvocationInfo.MyCommand.Name + " : " + r.Exception.Message);
                            stringBuilder.AppendLine(r.InvocationInfo.PositionMessage);
                            stringBuilder.AppendLine(string.Format("+ CategoryInfo: {0}", r.CategoryInfo));
                            stringBuilder.AppendLine(
                            string.Format("+ FullyQualifiedErrorId: {0}", r.FullyQualifiedErrorId));
                        }
                    }
                }
            }
            else
                stringBuilder.AppendLine(string.Format("Build is Success"));
            return stringBuilder.ToString();
        }
        catch (Exception ex)
        {
            string err = ex.ToString();
            err = "Build Failed!!!" + "\r\n" + "Check the Setup File Available or Path error";
            return err;
        }
    }

 SCRIPT = "buildmsi.ps1 " + ssource + " " + sdestination;
            projectbuildstatus.Text = RunScript(SCRIPT); 
```

感谢 Ale Tiro 的想法

# java - 将 Int 值添加到二维数组

> ID：15752635
> 
> 赞同：1
> 
> 时间：2013-04-01T21:57:56.433
> 
> 标签：java, int, multidimensional-array

我有这个代码，它打印一个所有值为 0 的 4x4 矩阵。如何将代码添加到文件中的输入值？

`matdata1.txt`文件内容如下：

> 4 4
> 
> 1 2 3 4
> 
> 2 4 6 8
> 
> 2 4 6 8
> 
> 3 2 3 4

这是我的代码：

```
File f = new File( args[0]);
Scanner s = new Scanner(f);

int row = s.nextInt();
int col = s.nextInt();
int [] [] mat = new int [row] [col];

for(int i =0; i < row; i++)
{
    for( int j =0; j < col; j++)
    {
        System.out.print (mat[i][j] + " ");
    }
    System.out.println( );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:11:34.180

您**已经有了**从文件中输入值的代码！

我在您发布的代码中添加了一些注释：

```
File f = new File( args[0]); // Get the input file
Scanner s = new Scanner(f);  // Open the file with a Scanner (a basic parsing tool)

int row = s.nextInt(); // Read the 1st number from the file as row count
int col = s.nextInt(); // Read the 2nd number from the file as column count
int [] [] mat = new int [row] [col]; // Use the row and column counts you read for the matrix dimensions 
```

查看文档以[`java.util.Scanner`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html)获取更多信息。

特别感兴趣的是[`nextInt()`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#nextInt%28%29)您的示例代码中使用的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T22:11:52.570

```
BufferedReader in = new BufferedReader(new FileReader("filename.txt"));
StringTokenizer tk = new StringTokenizer(in.readLine());
int row = Integer.parseInt(tk.nextToken());
int col = Integer.parseInt(tk.nextToken());
int elem = 0;
for(int i=0;i<row;i++){
  tk = new StringTokenizer(in.readLine());
  for(int j=0;j<col;j++){
    elem = Integer.parseInt(tk.nextToken());
    arr[i][j] = elem;
  }
} 
```

# lisp - 奇怪的类型函数

> ID：15752637
> 
> 赞同：0
> 
> 时间：2013-04-01T21:58:00.603
> 
> 标签：lisp

我做一个练习，我有以下功能：

```
(defun ifnot (test e1 e2)
   (if test e2 e1)) 
```

我被要求描述对以下表达式的评估：

```
(ifnot nil "OK" (error "Unexpected test outcome")) 
```

我不知道问题是关于令牌“nil”还是关于内置错误，你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T04:40:08.363

`ifnot`，正如你所写的，是一个函数。评估函数时，会在评估函数体之前评估所有参数。在您的示例中，虽然值`e2`被丢弃，`e2`但仍会被评估，因此`error`仍会被调用。如果它是一个宏，那么它会按照您的意图工作：

```
(defmacro ifnot (test e1 e2)
  `(if ,test ,e2 ,e1)) 
```

这样，代码

```
(ifnot nil "OK" (error "Unexpected test outcome")) 
```

在编译时被替换为：

```
(if nil (error "Unexpected test outcome") "OK") 
```

# c# - 如何抽象出 MVC4 中的 Response 对象进行测试？

> ID：15752640
> 
> 赞同：3
> 
> 时间：2013-04-01T21:58:06.023
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我的 MVC4 Web 应用程序中有某些控制器操作，它们使用 Response 对象来访问查询字符串变量等。将其抽象化以使其不干扰单元测试操作的最佳实践是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T22:02:32.287

MVC4 团队已经将`HttpContext`相关属性抽象化，以便可以模拟它们，所以`Response`现在是类型`HttpResponseBase`，所以已经被抽象掉了。你可以模拟对它的调用。

下面是我过去在单元测试场景中用于初始化控制器的标准方法。这是关于最小起订量。我创建了一个假的 http 上下文，它根据需要模拟出各种相关的属性。您可以修改它以适合您的确切情况。

在实例化控制器之后，我将它传递给这个方法（也许在一个基类中 - 我使用 NBehave 进行单元测试，但我不会在这里专门与任何相关的东西混淆水域）：

```
protected void InitialiseController(T controller, NameValueCollection collection, params string[] routePaths)
{
    Controller = controller;
    var routes = new RouteCollection();
    RouteConfig.RegisterRoutes(routes);
    var httpContext = ContextHelper.FakeHttpContext(RelativePath, AbsolutePath, routePaths);
    var context = new ControllerContext(new RequestContext(httpContext, new RouteData()), Controller);
    var urlHelper = new UrlHelper(new RequestContext(httpContext, new RouteData()), routes);
    Controller.ControllerContext = context;
    Controller.ValueProvider = new NameValueCollectionValueProvider(collection, CultureInfo.CurrentCulture);
    Controller.Url = urlHelper;
} 
```

这`ContextHelper`是所有模拟设置的地方：

```
public static class ContextHelper
{
    public static HttpContextBase FakeHttpContext(string relativePath, string absolutePath, params string[] routePaths)
    {
        var httpContext = new Mock<HttpContextBase>();
        var request = new Mock<HttpRequestBase>();
        var response = new Mock<HttpResponseBase>();
        var session = new Mock<HttpSessionStateBase>();
        var server = new Mock<HttpServerUtilityBase>();
        var cookies = new HttpCookieCollection();

        httpContext.Setup(x => x.Server).Returns(server.Object);
        httpContext.Setup(x => x.Session).Returns(session.Object);
        httpContext.Setup(x => x.Request).Returns(request.Object);
        httpContext.Setup(x => x.Response).Returns(response.Object);
        response.Setup(x => x.Cookies).Returns(cookies);
        httpContext.SetupGet(x => x.Request.Url).Returns(new Uri("http://localhost:300"));
        httpContext.SetupGet(x => x.Request.UserHostAddress).Returns("127.0.0.1");
        if (!String.IsNullOrEmpty(relativePath))
        {
            server.Setup(x => x.MapPath(relativePath)).Returns(absolutePath);
        }

        // used for matching routes within calls to Url.Action
        foreach (var path in routePaths)
        {
            var localPath = path;
            response.Setup(x => x.ApplyAppPathModifier(localPath)).Returns(localPath);
        }

        var writer = new StringWriter();
        var wr = new SimpleWorkerRequest("", "", "", "", writer);
        HttpContext.Current = new HttpContext(wr);
        return httpContext.Object;
    }
} 
```

我最近写了一篇博客文章，介绍了这种方法，但`Nsubstitute`用作模拟框架而不是`MOQ`：

[使用 NUnit 和 NSubstitute 对控制器进行单元测试](http://levelnis.co.uk/blog/unit-testing-controllers-using-nunit-and-nsubstitute)

# c - C正确访问数组

> ID：15752641
> 
> 赞同：0
> 
> 时间：2013-04-01T21:58:06.793
> 
> 标签：c

操作系统-sim.h

```
typedef enum {
    PROCESS_NEW = 0,
    PROCESS_READY,
    PROCESS_RUNNING,
    PROCESS_WAITING,
    PROCESS_TERMINATED
} process_state_t;

typedef struct _pcb_t {
    const unsigned int pid;
    const char *name;
    const unsigned int static_priority;
    process_state_t state;               <<---Trying to access this
    op_t *pc;
    struct _pcb_t *next;
} pcb_t; 
```

文件1.c

```
static pcb_t **current;

extern void yield(unsigned int cpu_id)
{
    /* FIX ME */
    while (1)
    {
    pthread_mutex_lock(&current_mutex);
    current[cpu_id].state = PROCESS_WAITING;  ///<-------ERROR HERE
    pthread_mutex_unlock(&current_mutex);
    break;
    }
    schedule(cpu_id);
}

in main method():  
current = malloc(sizeof(pcb_t*) * 10); 
```

我在这一行有错误`current[cpu_id].state = PROCESS_WAITING;`

```
error: request for member ‘state’ in something not a structure or union 
```

这个错误是什么意思？
这不是访问包含 pcb_t 的当前数组的正确方法吗？
如果是这样，我如何访问当前数组？和状态字段？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T22:01:58.263

您可能正在寻找：

```
current[cpu_id]->state = PROCESS_WAITING; 
```

的类型`current`是`pcb_t **`。所以 的类型`current[cpu_id]`是`pcb_t *`。

# android - 为 Android 发布登录 gradle.properties

> ID：15752646
> 
> 赞同：20
> 
> 时间：2013-04-01T21:58:15.613
> 
> 标签：android, build-automation, gradle, code-signing

所以我试图将我所有的 ant 构建脚本转换为 gradle，除了如何在 gradle.properties 文件中配置签名之外，我已经能够找到足够的资源和文档。

ant.properties 是这样的：

```
key.alias=alias
key.store.password=password
key.store=keystore.file
key.alias.password=password 
```

但是我如何在gradle中做同样的事情？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-01T23:09:41.773

在您的*gradle.properties文件中存储与**ant.properties*文件中相同的值，我认为您必须使用更简单的名称，`keyAlias`例如。只需删除这些点即可。

然后在您的*build.gradle*文件中执行以下操作：

```
android {
    signingConfigs {
        release
    }
    buildTypes {
        release {
            signingConfig signingConfigs.release
        }
    }
}

if (project.hasProperty('keyAlias')) {
    android.signingConfigs.release.keyAlias = keyAlias
}
// do the same for the three other properties
// ... 
```

这样做可以让您灵活地在具有或不具有*gradle.properties*文件的计算机上构建。“keyalias”属性只有在它存在时才会被读取，因此如果它不存在，代码不会失败。

如果所有属性都存在，`signingConfigs.release`则将完全配置并在构建期间用于对 apk 进行签名。如果它不存在，APK 将被构建但未签名。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-05-21T07:30:05.167

我能够通过以下方式做到这一点。我尝试了@Xav 的解决方案，但如果我没有设置属性，它会在发布验证步骤中抱怨。由于框架发生了很大变化，我确信这是最近的变化。我只是想通过在最后指出`else`，我能够强制发布signingConfig 为空来提供帮助。现在签名和未签名版本都取决于 gradle.properties 的存在。

```
signingConfigs {
    release {
        keyAlias = "blue_sleep"
    }
}

buildTypes {
    release {
        signingConfig signingConfigs.release
    }
}

if (project.hasProperty('storeFile') &&
        project.hasProperty('storePassword') &&
        project.hasProperty('keyPassword')) {
    android.signingConfigs.release.storeFile = file(storeFile)
    android.signingConfigs.release.storePassword = storePassword
    android.signingConfigs.release.keyPassword = keyPassword
} else {
    android.buildTypes.release.signingConfig = null
} 
```

其他一些有用的注释，如果您不希望它位于项目文件夹中，可以将 gradle.properties 放在 ~/.gradle/ 中。`storeFile`您也可以使用绝对路径设置属性，如下所示：`storePath=file:///Users/nick/Dropbox/mycompany.keystore`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-14T10:37:52.033

受 Eugens 解决方案的启发，我想出了一个更短的方差。代码必须在 android {} 任务配置中。

```
File signFile = rootProject.file('sign.properties')
if (signFile.exists()) {
    Properties p = new Properties()
    p.load(new FileInputStream(signFile))
    signingConfigs {
        releaseConfig {
            storeFile file(p.storeFile)
            storePassword p.storePassword
            keyAlias p.keyAlias
            keyPassword p.keyPassword
        }
    }
    buildTypes.release.signingConfig signingConfigs.releaseConfig
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-01-10T06:36:19.997

Gradle 1.9 不允许您定义属性。您现在只能将它们添加到 ext。对先前答案的小补充：

```
signingConfigs {
    debug {
        project.ext.loadSign = false
    }
    release {
        project.ext.loadSign = true
    }
}

buildTypes {
    debug {
        signingConfig signingConfigs.debug
    }
    release {
        signingConfig signingConfigs.release
    }
}

if ( project.ext.loadSign ) {
    Properties p = new Properties ()
    p.load ( new FileInputStream ( rootProject.file ( 'keys/sign.properties' ) ) )

    android.signingConfigs.release.storeFile file ( p.file )
    android.signingConfigs.release.storePassword p.password
    android.signingConfigs.release.keyAlias p.alias
    android.signingConfigs.release.keyPassword p.keyPassword
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-17T03:38:39.530

有一个很好的指南 - [https://github.com/almalkawi/Android-Guide/wiki/Generating-signed-release-APK-using-Gradle](https://github.com/almalkawi/Android-Guide/wiki/Generating-signed-release-APK-using-Gradle)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-09T05:23:18.833

我的要求是任何没有密钥库的人都应该能够正确构建。这是我能找到的最干净的方法：

```
android {
    signingConfigs {
        release    //Filled in readSigningConfigIfAvailable()
    }

    buildTypes {
        release {
            minifyEnabled true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-xyz.txt'
            readSigningConfigIfAvailable()
        }
    }
}

private void readSigningConfigIfAvailable() {
    if (hasAllSigningProperties()) {
        android.signingConfigs.release.storeFile = file(keystore_path)
        android.signingConfigs.release.storePassword = keystore_password
        android.signingConfigs.release.keyAlias = key_alias
        android.signingConfigs.release.keyPassword = key_password
        android.buildTypes.release.signingConfig = android.signingConfigs.release
    } else {
        android.buildTypes.release.signingConfig = null
    }
}

private boolean hasAllSigningProperties() {
    (hasProperty('keystore_path')
    && hasProperty('keystore_password')
    && hasProperty('key_alias')
    && hasProperty('key_password'))
} 
```

# php - PHP替换除图像alt之外的文本

> ID：15752649
> 
> 赞同：-4
> 
> 时间：2013-04-01T21:58:44.397
> 
> 标签：php, preg-replace

我想用 PHP 替换`"hello"`图像`"guys"`src 和 alt （不区分大小写）。

从

```
Hello hello HELLO <img src="hello.jpg" alt="hello" /> 
```

我想

```
Guys guys GUYS <img src="hello.jpg" alt="hello" /> 
```

或者

```
guys guys guys <img src="hello.jpg" alt="hello" /> 
```

我尝试了`str_replace`, `str_ireplace`，`preg_replace`但没有结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T22:12:21.637

如果您想在 alt=" 和 src=" 之后匹配两个 hello，您可以对这两个都使用“消极的后视”。就像是：

```
$string = 'Hello hello HELLO <img src="hello.jpg" alt="hello" />';
preg_replace('/(?<!(src|alt)=")hello/i', 'guys', $string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T22:02:05.457

您想使用“负前瞻”。这是我的概念验证代码。

```
<?php
$string = "Hello, hello, HELLO hello.jpg";
print preg_replace("/hello(?!.jpg)/i", 'Guys', $string); 
```

印刷

```
Guys, Guys, Guys hello.jpg 
```

# c++ - 隐式删除孩子时继承父赋值运算符

> ID：15752650
> 
> 赞同：3
> 
> 时间：2013-04-01T21:58:54.200
> 
> 标签：c++, inheritance, c++11, move, using-declaration

在 GCC 4.6 中，即使子的赋值运算符由于移动构造函数而被隐式删除，也可以继承父的赋值运算符。在更高版本的 GCC（以及 Clang）中，这不再可能。让子类使用父类的赋值运算符的正确方法是什么？

```
struct A
{
  A & operator=(A const & other) = default;
};

struct B : public A
{
  B() {}
  B(B && other) {}

  using A::operator=;
};

int main()
{
  B b1, b2;
  b1 = b2; // error: use of deleted function because B's operator= is implicitly deleted due to move constructor
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T22:19:55.350

被删除的函数仍然被*声明*，只是*定义*被删除。在您的类定义中扩展它：

```
struct B : A {
   using A::operator=;               // A& operator=(const A&)
   B& operator=(const B&) = delete;
}; 
```

此时，您可以注意到在派生类型中有两个声明，第一个（通过*using-declaration*`operator=`进入范围）接受一个参数，而第二个接受一个并被*删除*。*`const A&``const B&`*

 **当您稍后尝试分配时：

```
B b1, b2;
b1 = b2; 
```

编译器可以看到这两个声明，第二个是更好的匹配。因为它被标记为*已删除*，所以您会收到错误消息。另一方面，如果您分配了一个`A`对象，它将按预期工作：

```
B b1, b2;
b1 = static_cast<A&>(b2); // works, BUT... 
```

这种方法的问题在于它只是复制可能不是您想要的基本子对象。如果您只想要与编译器生成分配时相同的行为，则需要请求它：

```
struct B : A {
   // ...
   B& operator=(const B&) = default;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T22:22:56.010

当您将派生类型分配给自身时，这将取决于您希望发生的事情。如果您希望子赋值运算符像“正常”一样工作，尽管移动运算符抑制了隐式生成，您可以简单地将子赋值带回类中，使用以下方法：

```
 `B &operator=( B const & ) = default;`
```

`这可能等同于 GCC 4.6 所做的。我相信 GCC 4.6 没有按照标准要求正确抑制生成的运算符，因此您可能只是获得了正常的赋值运算符行为，以及您的 using 声明正在引入的基类的任何重载。`

 `如果您实际上只想分配类的基本部分，则需要实现自己的赋值运算符：

```
 `B &operator=( B const &that ) {
        static_cast<A&>(*this) = that;
        return *this;
    }` 
```

`不幸的是，我现在没有 GCC 4.7 可以试用，但是如果您实际上在派生类中获得了基类赋值运算符，我不会感到惊讶，但是派生类的已删除赋值运算符更适合您的示例. 您可以通过在 main() 中尝试这一行来测试这一点：`

```
 ``b1 = static_cast<A const&>(b2);``
````**

# ocaml - 在 OCaml 中简化后无法解构产品类型

> ID：15752651
> 
> 赞同：8
> 
> 时间：2013-04-01T21:58:54.470
> 
> 标签：ocaml, algebraic-data-types

我在 OCaml 中有这个简单的代码：

```
type int_pair = int * int;;
type a = A of int_pair;;
let extract (A x) = x;; 
```

测试我的`extract`功能，它似乎工作：

```
# extract (A (1,2));;
- : int_pair = (1, 2) 
```

我简化了它，所以它只需要一种类型：

```
type a' = A' of int * int;;
let extract' (A' x) = x;; 
```

但我得到了错误：

```
Error: The constructor A' expects 2 argument(s),
       but is applied here to 1 argument(s) 
```

有趣的是，我可以构造`a'`......

```
# A' (1,2);;
- : a' = A' (1, 2) 
```

...我就是无法解构它们。为什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-01T22:14:09.900

你需要使用

```
type a' = A' of (int * int) 
```

这是 OCaml 类型规范中棘手的地方之一。

涉及两种不同的类型，它们略有不同：

```
type one_field = F1 of (int * int)
type two_fields = F2 of int * int 
```

在类型`one_field`中有一个字段是一对整数。在该类型`two_fields`中有两个字段，每个字段都是一个 int。棘手的是构造函数看起来相同：

```
# F1 (3, 5);;
- : one_field = F1 (3, 5)
# F2 (3, 5);;
- : two_fields = F2 (3, 5) 
```

这两种类型是不同的，实际上在内存中的表示方式也不同。（双字段变体实际上占用的空间更少，访问速度稍快。）

# python - py2exe python24 numpy 错误 AttributeError "dtype"

> ID：15752652
> 
> 赞同：1
> 
> 时间：2013-04-01T21:58:57.297
> 
> 标签：python, numpy, py2exe

```
from distutils.core import setup
import py2exe

from distutils.filelist import findall
import os
import matplotlib
matplotlibdatadir = matplotlib.get_data_path()
matplotlibdata = findall(matplotlibdatadir)
matplotlibdata_files = []
for f in matplotlibdata:
    dirname = os.path.join('matplotlibdata', f[len(matplotlibdatadir)+1:])
    matplotlibdata_files.append((os.path.split(dirname)[0], [f]))

packages = ['matplotlib', 'pytz']
includes = []
excludes = []
dll_excludes = ['libgdk_pixbuf-2.0-0.dll',
                'libgobject-2.0-0.dll',
                'libgdk-win32-2.0-0.dll',
                'wxmsw26uh_vc.dll']

opts = { 'py2exe': { 'packages' : packages,
                     'includes' : includes,
                     'excludes' : excludes,
                     'dll_excludes' : dll_excludes
                    }
         }

setup ( console=['test.py'],
        options = opts,
        data_files = matplotlibdata_files
        ) 
```

我通过运行编译应用程序`>setup.py py2exe`

在编译阶段结束时，它是这样写的：

```
The following modules appear to be missing

['AppKit', 'FFT', 'Foundation', 'Image', 'LinearAlgebra', 'MA', 'MLab', 'Matrix', 'Numeric', 'PyObjCTools', 'P
yQt4', 'Pyrex', 'Pyrex.Compiler', 'RandomArray', '_curses', '_ssl', 'backends.draw_if_interactive', 'backends.
new_figure_manager', 'backends.pylab_setup', 'backends.show', 'cairo', 'cairo.gtk', 'fcompiler.FCompiler', 'fc
ompiler.show_fcompilers', 'fltk', 'gd', 'gobject', 'gtk', 'lib.add_newdoc', 'matplotlib.enthought.pyface.actio
n', 'mlab.amax', 'mlab.amin', 'numarray', 'numarray.convolve', 'numarray.fft', 'numarray.ieeespecial', 'numarr
ay.linear_algebra', 'numarray.linear_algebra.mlab', 'numarray.ma', 'numarray.numeric', 'numarray.random_array'
, 'numerix.ArrayType', 'numerix.Complex', 'numerix.Complex32', 'numerix.Complex64', 'numerix.Float', 'numerix.
Float32', 'numerix.Float64', 'numerix.Int', 'numerix.Int16', 'numerix.Int32', 'numerix.Int8', 'numerix.NewAxis
', 'numerix.UInt16', 'numerix.UInt32', 'numerix.UInt8', 'numerix.absolute', 'numerix.add', 'numerix.all', 'num
erix.allclose', 'numerix.alltrue', 'numerix.arange', 'numerix.arccos', 'numerix.arccosh', 'numerix.arcsin', 'n
umerix.arcsinh', 'numerix.arctan', 'numerix.arctan2', 'numerix.arctanh', 'numerix.argmax', 'numerix.argmin', '
numerix.argsort', 'numerix.around', 'numerix.array', 'numerix.arrayrange', 'numerix.asarray', 'numerix.asum',
'numerix.bitwise_and', 'numerix.bitwise_or', 'numerix.bitwise_xor', 'numerix.ceil', 'numerix.choose', 'numerix
.clip', 'numerix.compress', 'numerix.concatenate', 'numerix.conjugate', 'numerix.convolve', 'numerix.cos', 'nu
merix.cosh', 'numerix.cross_correlate', 'numerix.cumproduct', 'numerix.cumsum', 'numerix.diagonal', 'numerix.d
ivide', 'numerix.dot', 'numerix.equal', 'numerix.exp', 'numerix.fabs', 'numerix.fft.fft', 'numerix.fft.inverse
_fft', 'numerix.floor', 'numerix.fmod', 'numerix.fromfunction', 'numerix.fromstring', 'numerix.greater', 'nume
rix.greater_equal', 'numerix.hypot', 'numerix.identity', 'numerix.indices', 'numerix.innerproduct', 'numerix.i
scontiguous', 'numerix.less', 'numerix.less_equal', 'numerix.log', 'numerix.log10', 'numerix.logical_and', 'nu
merix.logical_not', 'numerix.logical_or', 'numerix.logical_xor', 'numerix.matrixmultiply', 'numerix.maximum',
'numerix.minimum', 'numerix.mlab.amax', 'numerix.mlab.amin', 'numerix.mlab.cov', 'numerix.mlab.diff', 'numerix
.mlab.hanning', 'numerix.mlab.rand', 'numerix.mlab.std', 'numerix.mlab.svd', 'numerix.multiply', 'numerix.nega
tive', 'numerix.newaxis', 'numerix.nonzero', 'numerix.not_equal', 'numerix.nx', 'numerix.ones', 'numerix.outer
product', 'numerix.pi', 'numerix.power', 'numerix.product', 'numerix.put', 'numerix.putmask', 'numerix.rank',
'numerix.ravel', 'numerix.repeat', 'numerix.reshape', 'numerix.resize', 'numerix.searchsorted', 'numerix.shape
', 'numerix.sin', 'numerix.sinh', 'numerix.size', 'numerix.sometrue', 'numerix.sort', 'numerix.sqrt', 'numerix
.subtract', 'numerix.swapaxes', 'numerix.take', 'numerix.tan', 'numerix.tanh', 'numerix.trace', 'numerix.trans
pose', 'numerix.typecode', 'numerix.typecodes', 'numerix.where', 'numerix.which', 'numerix.zeros', 'numpy.Comp
lex', 'numpy.Complex32', 'numpy.Complex64', 'numpy.Float', 'numpy.Float32', 'numpy.Float64', 'numpy.Infinity',
 'numpy.Int', 'numpy.Int16', 'numpy.Int32', 'numpy.Int8', 'numpy.UInt16', 'numpy.UInt32', 'numpy.UInt8', 'nump
y.inf', 'numpy.infty', 'numpy.oldnumeric', 'objc', 'paint', 'pango', 'pre', 'pyemf', 'qt', 'setuptools', 'setu
ptools.command', 'setuptools.command.egg_info', 'trait_sheet', 'matplotlib.numerix.Float', 'matplotlib.numerix
.Float32', 'matplotlib.numerix.absolute', 'matplotlib.numerix.alltrue', 'matplotlib.numerix.asarray', 'matplot
lib.numerix.ceil', 'matplotlib.numerix.equal', 'matplotlib.numerix.fromstring', 'matplotlib.numerix.indices',
'matplotlib.numerix.put', 'matplotlib.numerix.ravel', 'matplotlib.numerix.sqrt', 'matplotlib.numerix.take', 'm
atplotlib.numerix.transpose', 'matplotlib.numerix.where', 'numpy.core.conjugate', 'numpy.core.equal', 'numpy.c
ore.less', 'numpy.core.less_equal', 'numpy.dft.old', 'numpy.random.rand', 'numpy.random.randn'] 
```

1）第一个问题：`numpy\core\_internal.pyc not included in Library.zip`

```
No scipy-style subpackage 'core' found in C:\WinCE\Traces\py2exe test\dist\library.zip\numpy. Ignoring: No module named _internal
Traceback (most recent call last):
  File "profiler_ftt.py", line 15, in ?
    from matplotlib.backends.backend_wx import Toolbar, FigureCanvasWx,\
  File "matplotlib\backends\backend_wx.pyc", line 152, in ?
  File "matplotlib\backend_bases.pyc", line 10, in ?
  File "matplotlib\colors.pyc", line 33, in ?
  File "matplotlib\numerix\__init__.pyc", line 67, in ?
  File "numpy\__init__.pyc", line 35, in ?
  File "numpy\_import_tools.pyc", line 173, in __call__
  File "numpy\_import_tools.pyc", line 68, in _init_info_modules
  File "<string>", line 1, in ?
  File "numpy\lib\__init__.pyc", line 5, in ?
  File "numpy\lib\type_check.pyc", line 8, in ?
  File "numpy\core\__init__.pyc", line 6, in ?
  File "numpy\core\umath.pyc", line 12, in ?
  File "numpy\core\umath.pyc", line 10, in __load
AttributeError: 'module' object has no attribute '_ARRAY_API' 
```

我通过将文件添加`...\Python24\Lib\site-packages\numpy\core\_internal.pyc`到`...\test\dist\library.zip\numpy\core`.
每次编译该可执行文件时，我都会手动添加该文件。
有人知道如何自动添加该文件吗？

2）第二个问题：我不知道如何解决这个问题：

```
Traceback (most recent call last):
  File "profiler_ftt.py", line 15, in ?
    from matplotlib.backends.backend_wx import Toolbar, FigureCanvasWx,\
  File "matplotlib\backends\backend_wx.pyc", line 152, in ?
  File "matplotlib\backend_bases.pyc", line 10, in ?
  File "matplotlib\colors.pyc", line 33, in ?
  File "matplotlib\numerix\__init__.pyc", line 67, in ?
  File "numpy\__init__.pyc", line 35, in ?
  File "numpy\_import_tools.pyc", line 173, in __call__
  File "numpy\_import_tools.pyc", line 68, in _init_info_modules
  File "<string>", line 1, in ?
  File "numpy\random\__init__.pyc", line 3, in ?
  File "numpy\random\mtrand.pyc", line 12, in ?
  File "numpy\random\mtrand.pyc", line 10, in __load
  File "numpy.pxi", line 32, in mtrand
AttributeError: 'module' object has no attribute 'dtype' 
```

我`numpy.pxi`在文件树和`\test\dist\library.zip`.
我浏览了网页，希望找到解决方案，但什么也没有。
似乎这个问题是众所周知的，但邮件列表中没有提供解决方案。

# c++ - C++11 中的线程池

> ID：15752659
> 
> 赞同：174
> 
> 时间：2013-04-01T21:59:30.907
> 
> 标签：c++, multithreading, c++11, threadpool, stdthread

**相关问题**：

关于 C++11：

*   [C ++ 11：std :: thread池化？](https://stackoverflow.com/questions/12993451/c11-stdthread-pooled)
*   [C++11 中的 async(launch::async) 是否会使线程池过时以避免昂贵的线程创建？](https://stackoverflow.com/questions/14351352/will-asynclaunchasync-in-c11-make-thread-pools-obsolete-for-avoiding-expen)

关于升压：

*   [C++ boost线程重用线程](https://stackoverflow.com/questions/2659065/c-boost-thread-reusing-threads)
*   [boost::thread 并创建一个池！](https://stackoverflow.com/questions/3458397/boostthread-and-creating-a-pool-of-them)

* * *

如何获得一个**线程池**以**将任务发送到**，而无需一遍又一遍地创建和删除它们？这意味着持久线程无需加入即可重新同步。

* * *

我的代码如下所示：

```
namespace {
  std::vector<std::thread> workers;

  int total = 4;
  int arr[4] = {0};

  void each_thread_does(int i) {
    arr[i] += 2;
  }
}

int main(int argc, char *argv[]) {
  for (int i = 0; i < 8; ++i) { // for 8 iterations,
    for (int j = 0; j < 4; ++j) {
      workers.push_back(std::thread(each_thread_does, j));
    }
    for (std::thread &t: workers) {
      if (t.joinable()) {
        t.join();
      }
    }
    arr[4] = std::min_element(arr, arr+4);
  }
  return 0;
} 
```

与其在每次迭代中创建和加入线程，我更愿意在每次迭代时将任务发送到我的工作线程并且只创建一次。

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2015-09-15T19:12:14.177

这是从我对另一个非常相似的帖子的回答中复制的：

1.  从系统可以支持的最大线程数开始：

    ```
    int num_threads = std::thread::hardware_concurrency(); 
    ```

2.  对于一个高效的线程池实现，一旦根据 线程创建`num_threads`，最好不要创建新线程，或者销毁旧线程（通过加入）。会有性能损失，甚至可能使您的应用程序运行速度比串行版本慢。

每个 C++11 线程都应该在其函数中以无限循环运行，不断等待新任务的抓取和运行。

以下是如何将这样的函数附加到线程池：

```
int num_threads = std::thread::hardware_concurrency();
std::vector<std::thread> threads;
for (int i = 0; i < num_threads; i++)
{
    pool.push_back(std::thread(Infinite_loop_function));
} 
```

3.  无限循环功能。这是一个`while (true)`等待任务队列的循环。

```
void Pool::Infinite_loop_function()
{
    while (true)
    {
        {
            std::unique_lock<std::mutex> lock(queue_mutex);

            condition.wait(lock, [this](){
                return !queue.empty() || terminate_pool;
            });
            Job = queue.front();
            queue.pop();
        }

        Job(); // function<void()> type
    }
}; 
```

4.  制作一个将作业添加到队列的功能

```
void Pool::Add_Job(function<void()> New_Job)
{
    {
        std::unique_lock<std::mutex> lock(queue_mutex);
        queue.push(New_Job);
    }

    condition.notify_one();
} 
```

5.  将任意函数绑定到您的队列

```
Pool_Obj.Add_Job(std::bind(&Some_Class::Some_Method, &Some_object)); 
```

一旦你整合了这些成分，你就有了自己的动态线程池。这些线程始终运行，等待工作完成。

如果有一些语法错误，我深表歉意，我输入了这段代码，我记性不好。抱歉，我无法为您提供完整的线程池代码；那会违反我的职业操守。

编辑：终止池，调用`shutdown()`方法：

```
Pool::shutdown()
{
    {
        std::unique_lock<std::mutex> lock(threadpool_mutex);
        terminate_pool = true; // use this flag in condition.wait
    }

    condition.notify_all(); // wake up all threads.

    // Join all threads.
    for (std::thread &th : threads)
    {
        th.join();
    }

    pool.clear();  
    stopped = true; // use this flag in destructor, if not set, call shutdown() 
} 
```

注意：使用匿名代码块，以便当它们退出时，`std::unique_lock`在其中创建的变量会超出范围，从而解锁互斥锁。

* * *

## 回答 #2

> 赞同：100
> 
> 时间：2014-09-05T11:20:57.370

您可以使用 C++ 线程池库，[https://github.com/vit-vit/ctpl](https://github.com/vit-vit/ctpl)。

然后您编写的代码可以替换为以下内容

```
#include <ctpl.h>  // or <ctpl_stl.h> if ou do not have Boost library

int main (int argc, char *argv[]) {
    ctpl::thread_pool p(2 /* two threads in the pool */);
    int arr[4] = {0};
    std::vector<std::future<void>> results(4);
    for (int i = 0; i < 8; ++i) { // for 8 iterations,
        for (int j = 0; j < 4; ++j) {
            results[j] = p.push([&arr, j](int){ arr[j] +=2; });
        }
        for (int j = 0; j < 4; ++j) {
            results[j].get();
        }
        arr[4] = std::min_element(arr, arr + 4);
    }
} 
```

您将获得所需数量的线程，并且不会在迭代中一遍又一遍地创建和删除它们。

* * *

## 回答 #3

> 赞同：72
> 
> 时间：2013-04-01T22:27:10.370

线程池意味着您的所有线程一直在运行——换句话说，线程函数永远不会返回。为了给线程做一些有意义的事情，你必须设计一个线程间通信系统，既是为了告诉线程有事要做，也是为了传达实际的工作数据。

通常这将涉及某种并发数据结构，并且每个线程可能会在某种条件变量上休眠，当有工作要做时会通知它。收到通知后，一个或多个线程唤醒，从并发数据结构中恢复任务，处理它，并以类似的方式存储结果。

然后该线程将继续检查是否还有更多工作要做，如果没有则继续睡眠。

结果是您必须自己设计所有这些，因为没有普遍适用的“工作”的自然概念。这是一项相当多的工作，并且您必须解决一些微妙的问题。（如果你喜欢一个在幕后为你处理线程管理的系统，你可以在 Go 中编程。）

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2013-04-01T23:33:43.080

线程池的核心是一组线程，所有线程都绑定到作为事件循环工作的函数。这些线程将无休止地等待一个任务被执行，或者它们自己的终止。

线程池作业是提供一个提交作业的接口，定义（也许还可以修改）运行这些作业的策略（调度规则、线程实例化、池大小），并监控线程和相关资源的状态。

因此，对于一个多功能池，必须首先定义一个任务是什么，它如何启动、中断、结果是什么（请参阅该问题的 promise 和 future 的概念）、线程必须响应的事件类型to，他们将如何处理它们，如何将这些事件与任务处理的事件区分开来。正如您所看到的，这可能会变得非常复杂，并且随着解决方案变得越来越多，会对线程的工作方式施加限制。

当前处理事件的工具相当简单（*）：诸如互斥锁、条件变量之类的原语，以及在此之上的一些抽象（锁、屏障）。但在某些情况下，这些抽象可能会变得不合适（请参阅这个相关[问题](https://stackoverflow.com/questions/15686932/how-can-i-wait-on-multiple-things)），必须恢复使用原语。

还必须管理其他问题：

*   信号
*   输入/输出
*   硬件（处理器亲和性，异构设置）

这些将如何在您的环境中发挥作用？

**[这个](https://stackoverflow.com/questions/3988128/c-thread-pool)**对类似问题的回答指向一个用于 boost 和 stl 的现有实现。

我为另一个问题提供了一个[非常粗略](https://stackoverflow.com/questions/15252292/extend-the-life-of-threads-with-synchronization-c11)的线程池实现，它没有解决上面列出的许多问题。你可能想建立在它之上。您可能还想看看其他语言的现有框架，以寻找灵感。

* * *

[(*) 我不认为这是一个问题，恰恰相反。我认为这是从 C 继承而来的 C++ 精神。]

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2018-07-18T10:46:41.803

```
Follwoing [PhD EcE](https://stackoverflow.com/users/3818417/phd-ece) suggestion, I implemented the thread pool: 
```

> function_pool.h

```
#pragma once
#include <queue>
#include <functional>
#include <mutex>
#include <condition_variable>
#include <atomic>
#include <cassert>

class Function_pool
{

private:
    std::queue<std::function<void()>> m_function_queue;
    std::mutex m_lock;
    std::condition_variable m_data_condition;
    std::atomic<bool> m_accept_functions;

public:

    Function_pool();
    ~Function_pool();
    void push(std::function<void()> func);
    void done();
    void infinite_loop_func();
}; 
```

> 函数池.cpp

```
#include "function_pool.h"

Function_pool::Function_pool() : m_function_queue(), m_lock(), m_data_condition(), m_accept_functions(true)
{
}

Function_pool::~Function_pool()
{
}

void Function_pool::push(std::function<void()> func)
{
    std::unique_lock<std::mutex> lock(m_lock);
    m_function_queue.push(func);
    // when we send the notification immediately, the consumer will try to get the lock , so unlock asap
    lock.unlock();
    m_data_condition.notify_one();
}

void Function_pool::done()
{
    std::unique_lock<std::mutex> lock(m_lock);
    m_accept_functions = false;
    lock.unlock();
    // when we send the notification immediately, the consumer will try to get the lock , so unlock asap
    m_data_condition.notify_all();
    //notify all waiting threads.
}

void Function_pool::infinite_loop_func()
{
    std::function<void()> func;
    while (true)
    {
        {
            std::unique_lock<std::mutex> lock(m_lock);
            m_data_condition.wait(lock, [this]() {return !m_function_queue.empty() || !m_accept_functions; });
            if (!m_accept_functions && m_function_queue.empty())
            {
                //lock will be release automatically.
                //finish the thread loop and let it join in the main thread.
                return;
            }
            func = m_function_queue.front();
            m_function_queue.pop();
            //release the lock
        }
        func();
    }
} 
```

> 主文件

```
#include "function_pool.h"
#include <string>
#include <iostream>
#include <mutex>
#include <functional>
#include <thread>
#include <vector>

Function_pool func_pool;

class quit_worker_exception : public std::exception {};

void example_function()
{
    std::cout << "bla" << std::endl;
}

int main()
{
    std::cout << "stating operation" << std::endl;
    int num_threads = std::thread::hardware_concurrency();
    std::cout << "number of threads = " << num_threads << std::endl;
    std::vector<std::thread> thread_pool;
    for (int i = 0; i < num_threads; i++)
    {
        thread_pool.push_back(std::thread(&Function_pool::infinite_loop_func, &func_pool));
    }

    //here we should send our functions
    for (int i = 0; i < 50; i++)
    {
        func_pool.push(example_function);
    }
    func_pool.done();
    for (unsigned int i = 0; i < thread_pool.size(); i++)
    {
        thread_pool.at(i).join();
    }
} 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2019-06-20T08:41:33.580

您可以使用boost 库中的[thread_pool](https://www.boost.org/doc/libs/1_66_0/doc/html/boost_asio/reference/thread_pool.html)：

```
void my_task(){...}

int main(){
    int threadNumbers = thread::hardware_concurrency();
    boost::asio::thread_pool pool(threadNumbers);

    // Submit a function to the pool.
    boost::asio::post(pool, my_task);

    // Submit a lambda object to the pool.
    boost::asio::post(pool, []() {
      ...
    });
} 
```

* * *

您还可以使用来自开源社区的[线程池：](http://threadpool.sourceforge.net/)

```
void first_task() {...}    
void second_task() {...}

int main(){
    int threadNumbers = thread::hardware_concurrency();
    pool tp(threadNumbers);

    // Add some tasks to the pool.
    tp.schedule(&first_task);
    tp.schedule(&second_task);
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-01-27T13:08:18.210

像这样的东西可能会有所帮助（取自工作应用程序）。

```
#include <memory>
#include <boost/asio.hpp>
#include <boost/thread.hpp>

struct thread_pool {
  typedef std::unique_ptr<boost::asio::io_service::work> asio_worker;

  thread_pool(int threads) :service(), service_worker(new asio_worker::element_type(service)) {
    for (int i = 0; i < threads; ++i) {
      auto worker = [this] { return service.run(); };
      grp.add_thread(new boost::thread(worker));
    }
  }

  template<class F>
  void enqueue(F f) {
    service.post(f);
  }

  ~thread_pool() {
    service_worker.reset();
    grp.join_all();
    service.stop();
  }

private:
  boost::asio::io_service service;
  asio_worker service_worker;
  boost::thread_group grp;
}; 
```

你可以像这样使用它：

```
thread_pool pool(2);

pool.enqueue([] {
  std::cout << "Hello from Task 1\n";
});

pool.enqueue([] {
  std::cout << "Hello from Task 2\n";
}); 
```

请记住，重新发明一种*高效*的异步排队机制并非易事。

Boost::asio::io_service 是一个非常有效的实现，或者实际上是特定于平台的包装器的集合（例如，它包装了Windows 上的I/O 完成端口）。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-06-15T18:57:48.050

**编辑：这现在需要 C++17 和概念。（截至 2016 年 9 月 12 日，只有 g++ 6.0+ 就足够了。）**

但是，模板推导因此更加准确，因此值得努力获得更新的编译器。我还没有找到需要显式模板参数的函数。

它现在还接受任何适当的可调用对象（*并且仍然是静态类型安全的！！！*）。

它现在还包括一个使用相同 API 的可选绿色线程优先级线程池。不过，此类仅适用于 POSIX。它使用`ucontext_t`API 进行用户空间任务切换。

* * *

我为此创建了一个简单的库。下面给出一个使用示例。（我之所以回答这个问题，是因为这是我在决定有必要自己编写之前发现的事情之一。）

```
bool is_prime(int n){
  // Determine if n is prime.
}

int main(){
  thread_pool pool(8); // 8 threads

  list<future<bool>> results;
  for(int n = 2;n < 10000;n++){
    // Submit a job to the pool.
    results.emplace_back(pool.async(is_prime, n));
  }

  int n = 2;
  for(auto i = results.begin();i != results.end();i++, n++){
    // i is an iterator pointing to a future representing the result of is_prime(n)
    cout << n << " ";
    bool prime = i->get(); // Wait for the task is_prime(n) to finish and get the result.
    if(prime)
      cout << "is prime";
    else
      cout << "is not prime";
    cout << endl;
  }  
} 
```

您可以传递`async`具有任何（或 void）返回值和任何（或没有）参数的任何函数，它将返回相应的`std::future`. 要获得结果（或只是等到任务完成），您需要调用`get()`未来。

这是 github：[https](https://github.com/Tyler-Hardin/thread_pool) ://github.com/Tyler-Hardin/thread_pool 。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-14T23:13:19.363

看起来线程池是非常流行的问题/练习:-)

我最近用现代 C++ 写了一个；它归我所有，可在此处公开获取 - [https://github.com/yurir-dev/threadpool](https://github.com/yurir-dev/threadpool)

它支持模板化的返回值、核心固定、某些任务的排序。两个 .h 文件中的所有实现。

所以，原来的问题是这样的：

```
#include "tp/threadpool.h"

int arr[5] = { 0 };

concurency::threadPool<void> tp;
tp.start(std::thread::hardware_concurrency());

std::vector<std::future<void>> futures;
for (int i = 0; i < 8; ++i) { // for 8 iterations,
    for (int j = 0; j < 4; ++j) {
        futures.push_back(tp.push([&arr, j]() {
               arr[j] += 2;
            }));
    }
}

// wait until all pushed tasks are finished.
for (auto& f : futures)
    f.get();
// or just tp.end(); // will kill all the threads

arr[4] = *std::min_element(arr, arr + 4); 
```

# apex-code - 脚本语句过多

> ID：15752665
> 
> 赞同：0
> 
> 时间：2013-04-01T21:59:58.837
> 
> 标签：apex-code

如果我想使用循环填充具有大量原始类型值的数组。如何克服代码语句过多的限制？

```
Integer[] arr = new Integer[]{};
for(Integer i=0; i<500000; i++) {
     arr.add(i);
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:05:25.460

这可以帮助 [http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_gov_limits.htm](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_gov_limits.htm)

它显示了我认为您正在使用的代码中脚本数量的一些限制。

告诉我它是否有效！

# html-table - 如何在表格中选择多个 TR 元素？

> ID：15752666
> 
> 赞同：0
> 
> 时间：2013-04-01T22:00:13.267
> 
> 标签：html-table, multi-select, tablerow

```
<table>
   <tr>
     <td/>
     <td/>
     <td/>
   </tr>
  <tr>
     <td/>
     <td/>
     <td/>
  </tr>
  .....
</table> 
```

这是我拥有的表结构，我想在此表上提供多选功能。用户应该能够选择多个 TR 元素 - 非常类似于标签。但我不能使用，因为我想在上述结构中的每个 td 中添加多个 span 元素。

我想在 TR 上进行事件捕获。但我完全不知道如何进行。有什么建议么？

我尝试过的其他一些事情包括直接在 TR 中添加 DIV - 但这是不正确的。在这种情况下，在 TD 中添加一个 div 对我没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:05:58.033

试试 SlickGrid。它几乎为您提供了开箱即用的功能。不过，它使用 div 而不是 table。 [https://github.com/mleibman/SlickGrid](https://github.com/mleibman/SlickGrid)

# mysql - WARN SqlExceptionHelper:143 - SQL 错误: 0, SQLState: 08S01- SqlExceptionHelper:144 - 通信链路故障

> ID：15752667
> 
> 赞同：6
> 
> 时间：2013-04-01T22:00:26.573
> 
> 标签：mysql, hibernate

我对休眠有问题（**hibernate-core-4.1.9.Final.jar**）

案例 1：在 for 循环中进行休眠测试。一切顺利。

```
for(int i = 0; i < 1500; i++){
    UserDAO.getInstance.getById(1);
} 
```

案例 2：循环内的**Thread.sleep() 。**1分钟后出现异常。

```
 for(int i=0; i<1500; i++){
     UserDAO.getInstance.getById(1);
     Thread.sleep(60000);
 } 
```

例外：

```
00:20:06,447  WARN SqlExceptionHelper:143 - SQL Error: 0, SQLState: 08S01
00:20:06,448 ERROR SqlExceptionHelper:144 - Communications link failure

The last packet successfully received from the server was 120,017 milliseconds ago.  The last packet sent successfully to the server was 9 milliseconds ago.
Exception in thread "main" org.hibernate.exception.JDBCConnectionException: Communications link failure

The last packet successfully received from the server was 120,017 milliseconds ago.  The last packet sent successfully to the server was 9 milliseconds ago.
    at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:131)
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:129)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
    at sun.proxy.$Proxy11.executeQuery(Unknown Source)
    at org.hibernate.loader.Loader.getResultSet(Loader.java:2031)
    at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:1832)
    at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:1811)
    at org.hibernate.loader.Loader.doQuery(Loader.java:899)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:341)
    at org.hibernate.loader.Loader.doList(Loader.java:2516)
    at org.hibernate.loader.Loader.doList(Loader.java:2502)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2332)
    at org.hibernate.loader.Loader.list(Loader.java:2327)
    at org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:124)
    at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1621)
    at org.hibernate.internal.CriteriaImpl.list(CriteriaImpl.java:374)
    at org.hibernate.internal.CriteriaImpl.uniqueResult(CriteriaImpl.java:396)
    at com.fit.utilities.BaseDAO.getById(BaseDAO.java:35)
    at com.fit.test.Testiranje.main(Testiranje.java:51)
Caused by: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet successfully received from the server was 120,017 milliseconds ago.  The last packet sent successfully to the server was 9 milliseconds ago.
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1121)
    at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3603)
    at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3492)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4043)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2503)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2664)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2815)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2155)
    at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2322)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)
    ... 17 more
Caused by: java.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.
    at com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:3052)
    at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3503)
    ... 29 more 
```

这是我的**hibernate.cfg.xml**

```
<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
          "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
          "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>

    <session-factory>

         <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
          <property name="connection.url">jdbc:mysql://xxxxxx:3306/xxxx</property>
          <property name="connection.username">xxxx</property>
          <property name="connection.password">xxxx</property>
          <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
          <property name="hibernate.hbm2ddl.auto">update</property>
          <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>
          <property name="show_sql">false</property>
          <property name="hibernate.connection.pool_size">1</property>

        <mapping class="com.xxx.model.xxxxx" />
        <mapping class="com.xxx.model.xxxxx" />
        <mapping class="com.xxx.model.xxxxx" />

    </session-factory>
</hibernate-configuration> 
```

**更新：** 使用 C3P0 库解决了这个问题。

```
 <!-- configuration pool via c3p0--> 
<property name="c3p0.acquire_increment">1</property> 
<property name="c3p0.idle_test_period">100</property> <!-- seconds --> 
<property name="c3p0.max_size">100</property> 
<property name="c3p0.max_statements">0</property> 
<property name="c3p0.min_size">10</property> 
<property name="c3p0.timeout">100</property> <!-- seconds --> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-12T06:58:48.410

`time_out`问题的发生是因为MySQL 服务器上的变量值很小。

在我的情况下，`time_out`设置为 1 分钟。使用`C3PO`池化机制我们可以优化`JDBC`。

下载**c3p0** -> [http://sourceforge.net/projects/c3p0/](http://sourceforge.net/projects/c3p0/)

我正在使用**休眠 3.0**。

**休眠.cfg.xml**

```
<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
          "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
          "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>

    <session-factory>

         <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
          <property name="connection.url">jdbc:mysql://databasehost:3306/databasename</property>
          <property name="connection.username">user</property>
          <property name="connection.password">psw</property>
          <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
          <property name="hibernate.hbm2ddl.auto">update</property>

          <property name="show_sql">false</property>

       <!-- Hibernate c3p0 settings-->
        <property name="connection.provider_class">org.hibernate.connection.C3P0ConnectionProvider</property>
        <property name="hibernate.c3p0.acquire_increment">3</property>
        <property name="hibernate.c3p0.idle_test_period">10</property>
        <property name="hibernate.c3p0.min_size">5</property>
        <property name="hibernate.c3p0.max_size">75</property>
        <property name="hibernate.c3p0.max_statements">10</property>
        <property name="hibernate.c3p0.timeout">50</property>
        <property name="hibernate.c3p0.preferredTestQuery">select 1</property>
        <property name="hibernate.c3p0.testConnectionOnCheckout">true</property>

         <!-- Mapping files -->
        <mapping class="xxx.xxx.xxx.xxx" />
        <mapping class="xxx.xxx.xxx.xxx" />
        <mapping class="xxx.xxx.xxx.xxx" />
        <mapping class="xxx.xxx.xxx.xxx" />

    </session-factory>
</hibernate-configuration> 
```

**持久性管理器.java**

```
import java.io.PrintStream;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.AnnotationConfiguration;
import org.hibernate.cfg.Configuration;

public class PersistenceManager
{
  private static SessionFactory sessionFactory = null;

  private static PersistenceManager singleton = null;

  public static PersistenceManager getInstance()
  {
    if (singleton == null)
    {
      singleton = new PersistenceManager();
    }

    return singleton;
  }

  public SessionFactory getSessionFactory()
  {
    if (sessionFactory == null)
      createSessionFactory();
    return sessionFactory;
  }

  protected void createSessionFactory()
  {    
    sessionFactory = new AnnotationConfiguration().configure()
      .buildSessionFactory();
  }

  public void destroySessionFactory()
  {
    if (sessionFactory != null)
    {
      sessionFactory.close();
      sessionFactory = null;
    }
  }
} 
```

**示例 1：**

```
import org.hibernate.HibernateException;
import org.hibernate.Query;
import org.hibernate.Session;

public Users Login( String username,  String password)
  {
    Session session = null;
    try
    {
      String hql = "select u from Users u where u.username like :p1 and u.password like :p2";
      session = PersistenceManager.getInstance().getSessionFactory().openSession();

      Query q = session.createQuery(hql)
        .setParameter("p1", username)
        .setParameter("p2", password);

      if (q.list().size() == 0)
      {
        session.close();
        return new Users();
      }

      Users user = (Users)q.list().get(0);
      session.close();
      return user;
    }
    catch (Exception e)
    {
      session.close();

    }
  } 
```

**示例 2：**

```
import org.hibernate.HibernateException;
import org.hibernate.Query;
import org.hibernate.Session;
 public String Registration(Users u) { 

    Session session = null;
    try
    {
      String hql = "select u from Users u where u.username like :p1";

      session = PersistenceManager.getInstance().getSessionFactory().openSession();

      Query q = session.createQuery(hql).setParameter("p1", u.getUsername());

      if (q.list().size() == 0)
      {
        session.beginTransaction();
        session.persist(u);
        session.getTransaction().commit();
        session.close();
        return new Boolean(true).toString();
      }

      session.close();

      return new Boolean(false).toString();
    }
    catch (Exception e)
    {
      return e.toString();
    }
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-14T19:48:59.837

我有同样的问题只是因为我忘记将我的休眠代码包装在事务中。显然，在您提交事务之前，与 DB 的连接不会关闭。这是一个有效的例子：

```
Session session = HibernateUtils.getSession();
Transaction tx = session.beginTransaction();
Category cat = null;

try{
    cat = (Category)session.get(Category.class, 1);
    tx.commit();
}catch(Exception ex){
    tx.rollback();
}finally{           
    session.close();
}

return cat; 
```

# asp.net - 从数据集中搜索仍然有sql注入？

> ID：15752675
> 
> 赞同：1
> 
> 时间：2013-04-01T22:01:04.153
> 
> 标签：asp.net, sql-injection

如果我已经将数据库中的数据放入我的数据集中，并且我想在我的数据集中搜索一个名称，我是否还有 sql 注入问题的风险？如果是，删除它的方法是仅通过参数吗？还是有其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T22:04:13.887

不，a `DataSet`or`DataTable`不易受到 sql 注入的影响，因为它们是数据的内存表示。

所以你应该为填充它们的命令使用参数，从那时起你就安全了。

# ios - 使用 OpenGL ES 2 着色器重新实现的 GLImageProcessing 的性能问题

> ID：15752679
> 
> 赞同：1
> 
> 时间：2013-04-01T22:01:32.853
> 
> 标签：ios, opengl-es, fragment-shader

我使用 OpenGL ES 2 着色器重新实现了 Apple 的[GLImageProcessing 。](http://developer.apple.com/library/ios/#samplecode/GLImageProcessing/Introduction/Intro.html)效果是完美的，但清晰度滤镜的性能并不好——它只能以 20 FPS 运行。

着色器代码很简单：

1.  为水平模糊传递 0。
2.  通过 1 进行垂直模糊。
3.  通过 2 将模糊纹理与原始纹理混合。

基本上，Pass 2 中的纹理混合是缓慢的原因，因为 Pass 0 和 Pass 1 只完成一次，不会导致性能下降。

我怎样才能提高性能？

顶点着色器：

```
attribute vec4 a_position;
attribute vec2 a_texCoord;

varying highp vec2 v_texCoord;
varying highp vec2 v_texCoord1;
varying highp vec2 v_texCoord2;
varying highp vec2 v_texCoord1_;
varying highp vec2 v_texCoord2_;

uniform mat4 u_modelViewProjectionMatrix;
uniform lowp int u_pass;

const highp float blurSizeH = 1.0 / 320.0;
const highp float blurSizeV = 1.0 / 480.0;

void main()
{
    v_texCoord = a_texCoord;
    if (u_pass == 0) {
        v_texCoord1 = a_texCoord + vec2(1.3846153846 * blurSizeH, 0.0);
        v_texCoord1_ = a_texCoord - vec2(1.3846153846 * blurSizeH, 0.0);
        v_texCoord2 = a_texCoord + vec2(3.2307692308 * blurSizeH, 0.0);
        v_texCoord2_ = a_texCoord - vec2(3.2307692308 * blurSizeH, 0.0);
    } else if (u_pass == 1) {
        v_texCoord1 = a_texCoord + vec2(0.0, 1.3846153846 * blurSizeV);
        v_texCoord1_ = a_texCoord - vec2(0.0, 1.3846153846 * blurSizeV);
        v_texCoord2 = a_texCoord + vec2(0.0, 3.2307692308 * blurSizeV);
        v_texCoord2_ = a_texCoord - vec2(0.0, 3.2307692308 * blurSizeV);
    }

    gl_Position = u_modelViewProjectionMatrix * a_position;
} 
```

片段着色器：

```
varying highp vec2 v_texCoord;
varying highp vec2 v_texCoord1;
varying highp vec2 v_texCoord2;
varying highp vec2 v_texCoord1_;
varying highp vec2 v_texCoord2_;

uniform lowp int u_pass;
uniform sampler2D u_texture;
uniform sampler2D u_degenTexture;
uniform mediump mat4 u_filterMat;

void main()
{
    if (u_pass == 0) {
        gl_FragColor = texture2D(u_texture, v_texCoord) * 0.2270270270;
        gl_FragColor += texture2D(u_texture, v_texCoord1) * 0.3162162162;
        gl_FragColor += texture2D(u_texture, v_texCoord1_) * 0.3162162162;
        gl_FragColor += texture2D(u_texture, v_texCoord2) * 0.0702702703;
        gl_FragColor += texture2D(u_texture, v_texCoord2_) * 0.0702702703;
    } else if (u_pass == 1) {
        gl_FragColor = texture2D(u_degenTexture, v_texCoord) * 0.2270270270;
        gl_FragColor += texture2D(u_degenTexture, v_texCoord1) * 0.3162162162;
        gl_FragColor += texture2D(u_degenTexture, v_texCoord1_) * 0.3162162162;
        gl_FragColor += texture2D(u_degenTexture, v_texCoord2) * 0.0702702703;
        gl_FragColor += texture2D(u_degenTexture, v_texCoord2_) * 0.0702702703;
    } else {
        gl_FragColor = u_filterMat * texture2D(u_texture, v_texCoord) + (mat4(1.0) - u_filterMat) * texture2D(u_degenTexture, v_texCoord);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T16:04:42.567

在你继续这个之前，我可以建议你看看我的开源[GPUImage](https://github.com/BradLarson/GPUImage)项目吗？我有几个手动优化的锐化效果，包括你在这里尝试的不锐化蒙版。我还使提取图像和视频源变得相当容易。

对于您的具体问题，您的着色器运行速度比预期慢有几个原因。首先是您在片段着色器中使用分支。这会降低 iOS 设备的性能，应尽可能避免。如果您确实需要为不同的通道设置不同的条件，请将它们拆分为单独的着色器程序并根据需要交换程序，而不是使用统一的控制流。

我也不确定重复写入 gl_FragColor 是你可以在这里做的最快的事情。我会使用 lowp 或 mediump 中间颜色变量，将您的高斯分量添加到其中，然后在完成后将最终结果写入 gl_FragColor。

我确实看到您已将采样偏移计算移至顶点着色器，然后将这些偏移传递到片段着色器，这是人们通常会错过的一件好事。一旦你实施了上述调整（或尝试我的框架，看看我是如何处理的），你应该从你的过滤中得到更好的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T22:52:37.287

事实证明，这真的很简单。性能不佳的原因是矩阵向量乘法：

```
varying highp vec2 v_texCoord;

uniform sampler2D u_texture;
uniform sampler2D u_degenTexture;
uniform lowp float u_filterValue;

void main()
{
    gl_FragColor = u_filterMat * texture2D(u_texture, v_texCoord) + (mat4(1.0) - u_filterMat) * texture2D(u_degenTexture, v_texCoord);
} 
```

我最初以这种方式使用矩阵编写代码，以便我所有的过滤器可以共享相同的颜色混合代码。现在我吸取了教训，我只是回到编写过滤器特定的代码并尽可能使用标量操作：

```
varying highp vec2 v_texCoord;

uniform sampler2D u_texture;
uniform sampler2D u_degenTexture;
uniform lowp float u_filterValue;

void main()
{
    gl_FragColor = u_filterValue * texture2D(u_texture, v_texCoord) + (1.0 - u_filterValue) * texture2D(u_degenTexture, v_texCoord);
} 
```

现在它是真棒 60 fps！

从来没有想过这是一个如此幼稚的问题，但确实如此。

# ios - Flash builder 在 Release 构建中包含文件

> ID：15752680
> 
> 赞同：1
> 
> 时间：2013-04-01T22:01:36.637
> 
> 标签：ios, actionscript-3, flash-builder

我的设置：`Flash Builder 4.7`

我在 Flash Builder 中添加到项目树的文件夹“folder1”中有文本文件“1.txt”。我想在 iOS 设备上使用文件流在运行时读取这个文件。问题：

1.  如何在导出发布版本并在设备上运行时使 flash builder 打包此文件夹。
2.  如何访问此目录以读取此文件。

（如果我将“folder1”放入其中，我可以在设备/空气模拟器上运行/调试时成功打开“1.txt”运行时，`<path to my app>\bin-debug\`但在“导出发布构建”操作后它仍然无法工作）。 **更新：** 当我运行`Export Release Buid`对话框时，我没有进入`folder1`选项`Package Contents`卡，为什么？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T00:36:00.063

我终于弄明白了。我已将我的文件夹放在项目树的 src 节点中。我认为这样做不是正确的方法，但它确实有效......

# scala - 并行运行 ScalaTest 测试

> ID：15752681
> 
> 赞同：15
> 
> 时间：2013-04-01T22:01:37.127
> 
> 标签：scala, sbt, scalatest

给定以下测试套件：

```
class ParallelizeMe extends FunSuite with BeforeAndAfterAll {

  override def beforeAll() = println("before")              
  override def afterAll()  = println("after")               

  test("test 1") {                                          
    println("1a")
    Thread.sleep(3000)                                      
    println("1b")                                           
  }

  test("test 2") {                                          
    println("2a")
    Thread.sleep(1000)                                      
    println("2b")
  }

} 
```

如何并行运行测试（通过 sbt）？理想情况下，我希望执行顺序在标准输出上产生以下内容：

```
before
1a
2a
2b
1b
after 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-01T22:47:41.670

使用`ParallelTestExecution`和 的`-P`命令行参数`Runner`使它们并行运行：

```
import org.scalatest.{ParallelTestExecution, BeforeAndAfterAll, FunSuite}
class ParallelizableSpec extends FunSuite with BeforeAndAfterAll with ParallelTestExecution {
   ...
} 
```

请注意 -P 是必需的。从来源：

> 如果你`-P`在命令行中包含，`Runner`会将 a 传递 `Distributor`给`Suite`你用 指定的 s `-s`。`Runner`将设置一个线程池来并行执行`Suite`传递给`Distributor`' 方法的任何 s。`put`

它还将单独运行测试，因此`before`将`after`在每个线程中运行。[在ParallelTestExecution](http://www.artima.com/docs-scalatest-2.0.M2/org/scalatest/ParallelTestExecution.html)和[Runner](http://www.artima.com/docs-scalatest-2.0.M2/org/scalatest/tools/Runner%24.html)的文档中查看更多信息。

在 SBT 中，要使用该标志，请将其添加到`build.sbt`：

```
testOptions in Test += Tests.Argument("-P") 
```

# pagination - 添加模型时 Ember.js 会闪烁列表内容 - 我该如何解决？

> ID：15752682
> 
> 赞同：1
> 
> 时间：2013-04-01T22:01:38.060
> 
> 标签：pagination, ember.js

我正在使用 Ember.js 构建一个应用程序，该应用程序使用服务器发送事件来添加和更新实现分页的控制器。下面列出了控制器的完整实现。

```
 App.endpointsDisponiblesClass = Ember.ArrayController.extend({
    loading: true,
    completeList:[
         /*
         App.Endpoint.create({
             id: 1,
             id_manufacturer: 1,
             id_model: 1,
             mac_address: '00:11:22:33:44:55',
             last_known_ipv4:   '10.0.0.1',
             last_scanned:      '2012-12-31',
             last_configured:   null
         }),
         */
    ],
    content:    [],
    offset: null,
    limit:  10,
    displaySlice: function(offset) {
        if (offset >= this.completeList.length)
            offset = this.completeList.length - 1;
        if (offset < 0) offset = 0;
        offset = offset - (offset % this.get('limit'));
        if (this.get('offset') == null || offset != this.offset) {
            var slice = this.completeList.slice(offset, offset + this.get('limit'));
            this.set('offset', offset);
            this.set('content', slice);             
        }
    },
    displayStart: function() { this.displaySlice(0); },
    displayPrevious: function() { this.displaySlice(this.offset - this.limit); },
    displayNext: function() { this.displaySlice(this.offset + this.limit); },
    displayEnd: function() { this.displaySlice(this.completeList.length); },
    startPosition: function() {
        return this.get('offset') + 1;
    }.property('offset'),
    endPosition: function() {
        var pos = this.get('offset') + this.get('limit');
        if (pos > this.completeList.length)
            pos = this.completeList.length;
        return pos;
    }.property('offset', 'limit'),
    displayRefresh: function() {
        console.debug('displayRefresh');
        var offset = this.get('offset');
        this.set('offset', null);
        this.displaySlice(offset);
    }.observes('completeList.@each')
});
App.endpointsDisponibles = App.endpointsDisponiblesClass.create(); 
```

completeList 元素包含我要翻阅的元素的完整列表，其中一个作为注释列出。在我的实现中，我通过将完整列表的切片分配给 ArrayController 子类的“内容”元素来执行分页。此外，还有一些辅助方法可以从显示 Next、Back 等按钮的各种视图中调用。

呈现模型列表的模板片段如下所示：

```
{{#view tagName="tbody"}}
{{#each App.endpointsDisponibles}}
<tr class="neo-table-data-row">
    <td class="neo-table-data-row">{{view Ember.Checkbox checkedBinding="isSelected"}}</td>
    <td class="neo-table-data-row">{{mac_address}}</td>
    <td class="neo-table-data-row"><a target="_blank" {{bindAttr href="adminUrl"}}>{{last_known_ipv4}}</a></td>
    <td class="neo-table-data-row">{{name_manufacturer}}</td>
    <td class="neo-table-data-row">{{view Ember.Select
        contentBinding="modelSelect"
        optionValuePath="content.id_model"
        optionLabelPath="content.name_model"
        valueBinding="id_model"
        disabledBinding="App.endpointScanController.scanInProgress"}}</td>
</tr>
{{else}}
<tr class="neo-table-data-row">
    <td class="neo-table-data-row" colspan="7">No endpoints have been discovered or loaded.</td>
</tr>
{{/each}}
{{/view}} 
```

我准备了一个带有 onmessage 处理程序的事件源，该处理程序解析来自服务器的 JSON 消息，并通过在完整列表上添加/更新/删除模型来更新完整列表。由于我使用 displayRefresh() 观察了 completeList.@each，因此如果我查看最后一页并添加了模型，或者删除了查看的模型之一，则页面切片会更新。到目前为止，它运行良好。

问题是消息触发插入的一半时间，模板的重新呈现对用户来说是非常可见的。模板被清空，在大约几分之一秒内保持空白，然后重新填充适当的内容。另一半时间，模板内容可以顺利更新，无需清空和重新填充，这就是我想要的。SSE 消息流是突发的 - 它空闲几秒钟，然后在不到一秒的时间内触发大约 5 到 6 条消息，然后循环重复。在 Firefox 和 Google Chrome 中都观察到了丑陋的渲染。

在 Firefox 中，我安装了 Firebug，我可以从控制台调用控制器方法。当我这样做时，它们的行为与 SSE 案例中的行为完全相同。有时刷新很顺畅，有时可以看到模板的清空和重新填充。

我可以做些什么来确保模板渲染始终如一的流畅？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T03:00:30.477

我遇到了类似的问题 - 这个问题是我在谷歌搜索“arraycontroller flash”时出现的唯一结果。

当我重置阵列控制器的模型时出现问题：

```
 @set 'model', message 
```

~~有趣的是，我有一个几乎相同的应用程序，它是使用淘汰赛构建的——并且没有闪烁/刷新问题。~~

我偶然发现了这篇文章：[在 Ember 中刷新内容时缓解闪烁的 UI](https://stackoverflow.com/questions/14883553/mitigating-a-flickering-ui-when-refreshing-content-in-ember)并最终将我的更新包装在一个 Ember.run 函数中，这解决了闪烁问题，但对我来说仍然是错误的。

```
 Ember.run =>
        @set 'model', message 
```

[删除完整的红鲱鱼]

~~到目前为止，正确的路径似乎是包裹在 Ember.run 中 - 丑陋无比，但它确实解决了眼前的问题。我的猜测是 Ember 没有像淘汰赛那样优化/快速，或者 Ember 在更新排队方面存在错误。希望随着时间的推移会有所改善。~~

编辑 2013 年 7 月 23 日-

写完这篇文章后，我意识到 Ember 是完全正确的，而我是完全错误的。（淘汰赛是偶然的）

如此处所述：http: [//emberjs.com/guides/understanding-ember/managing-asynchrony/](http://emberjs.com/guides/understanding-ember/managing-asynchrony/)似乎 Ember 使用事件将更新捆绑在一起 - 在 Ember.run 中有效地包装事件处理程序

但在我的情况下（我认为是你的情况），我们调用的是异步的 ajax 方法。回调（或承诺 - 同样的问题）发生在 Ember 事件触发并返回之后。所以 Ember 无法知道它需要对更新进行排队。

仍然不确定“正确”的解决方案是将其包装在 Ember.run 中 - 文档（[http://emberjs.com/api/classes/Ember.run.html](http://emberjs.com/api/classes/Ember.run.html)）似乎表明它不正确，但文档也推向Ember Data，它不会有这个问题。

猜猜我需要阅读更多关于 Ember 的 runloop 的内容。

# intuit-partner-platform - 您如何将项目分类为服务、产品、折扣、折扣 %、其他费用、其他费用 %

> ID：15752686
> 
> 赞同：0
> 
> 时间：2013-04-01T22:01:52.767
> 
> 标签：intuit-partner-platform, quickbooks-online, intuit

在 Quickbooks 桌面中，每个项目都被归类为产品、服务或折扣等。在 Quickbooks Online 中，我需要下载项目列表并注意到它们不再被分类。

我正在使用的代码是这样的：

list = commonService.FindAll(new Intuit.Ipp.Data.Qbo.Item(), currentPage, itemListPageSize) as IEnumerable;

当我从 Quickbooks Online 下载此列表时，我需要知道它是否是产品/服务/折扣，以便我可以将其导入我们的系统，就像我们为 QB Desktop 所做的那样。

如何获取此项目的类别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T01:15:02.953

QuickBooks Online 没有多种不同的项目类型。这是一种不同的产品，与适用于 Windows/Mac 的 QuickBooks 的工作方式大不相同。

Intuit Anywhere/IDS API 目前不支持 QuickBooks Online 的任何库存概念，尽管 QuickBooks Online 本身确实支持该概念。

QuickBooks Online 根本没有“折扣”项目的概念（折扣只是发票上的另一个费率/金额字段，与 QuickBooks for Windows 中的行项目相比）。

这是 QuickBooks Online 界面的屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/wc4S3.png)

请注意，我添加了 10% 的折扣，但 10% 的折扣不会*显示*为正常的订单项。它只是发票上接受折扣金额的字段。因为它不是一个行项目，所以它根本不需要项目类型。

这也反映在 API 中。

这是一个 qbXML 示例（注意：它不是行项目，根本不涉及项目类型）：

```
<DiscountLineAdd> <!-- optional -->
  <!-- BEGIN OR -->
    <Amount >AMTTYPE</Amount> <!-- optional -->
  <!-- OR -->
    <RatePercent >PERCENTTYPE</RatePercent> <!-- optional -->
  <!-- END OR -->
  <IsTaxable >BOOLTYPE</IsTaxable> <!-- optional -->
  <AccountRef> <!-- optional -->
    <ListID >IDTYPE</ListID> <!-- optional -->
    <FullName >STRTYPE</FullName> <!-- optional -->
  </AccountRef>
</DiscountLineAdd> 
```

这是一个 IPP 示例（同样，notice 不是一个行项目，并且根本不涉及项目类型）：

```
 <Header>
        <DocNumber>00010</DocNumber>
        <TxnDate>2010-08-07-07:00</TxnDate>
        <Msg>No Black Ink Pens</Msg>
        <Note>Blue Ink pens only</Note>
        <CustomerId>5</CustomerId>
        <SalesTaxCodeId idDomain="QBO">1</SalesTaxCodeId>
        <SalesTaxCodeName>IS_TAXABLE</SalesTaxCodeName>
        <SubTotalAmt>200.00</SubTotalAmt>
        <TaxAmt>100.00</TaxAmt>
        <TotalAmt>298.75</TotalAmt>
        <DueDate>2010-08-16-07:00</DueDate>
        <BillEmail>john_doe@digitalinsight.com</BillEmail>
        <DiscountAmt>-1.25</DiscountAmt>
    </Header> 
```

# azure - 是否可以重新启动 Azure 队列（服务总线）？

> ID：15752687
> 
> 赞同：1
> 
> 时间：2013-04-01T22:01:52.720
> 
> 标签：azure, azure-servicebus-queues

今天我体验到 azure queue 不起作用。是否可以重新启动它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:17:22.143

您可以使用[更新队列休息 API启用/禁用服务总线队列](http://msdn.microsoft.com/en-us/library/windowsazure/jj839742.aspx)

在这里您需要更改队列的状态。

希望这可以帮助。

谢谢，

KK

# bash - 理解（多个和自动）文件名引用

> ID：15752688
> 
> 赞同：2
> 
> 时间：2013-04-01T22:01:54.470
> 
> 标签：bash, filenames, spaces

我正在启动 bash 脚本，但我无法处理带间隔的文件名。我在这里搜索了有关我的问题的其他问题，例如：

[如何在单行中输出用引号括起来的文件名？](https://stackoverflow.com/questions/6041596/how-to-output-file-names-surrounded-with-quotes-in-single-line)

在我的脚本中，我需要获取所有目录，为每个目录结束做一些工作。所以我的脚本的骨架是：

```
for directory in `find "$DIR" -type d`
do
# ... some work ...
done 
```

此脚本不适用于带间隔的文件名。所以我尝试将 find 与 exec 结合使用，这似乎是一个优雅而简单的解决方案，但没有任何改变。更准确地说，我尝试过：

```
(I)  find "$DIR" -type d -exec echo -n '"{}" ' \;
(II) find "$DIR" -type d -exec echo -n '"{}" ' + 
```

在使用命令 -exec 之前，我阅读了一些关于它的内容，但我仍然不清楚，所以：

1.  '"{}" ' \; 是什么以及如何工作
2.  是什么以及如何工作 '"{}" ' +
3.  我怎样才能为间隔文件名修复我的脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T00:42:31.360

> '"{}" ' \; 是什么以及如何工作

对于每个文件名，这将基本上执行 `echo -n "\"filename\" "`，产生一堆像`"filename"`.

添加文字引号并没有帮助，因为 bash 不会开始将数据解释为 shell 脚本代码。

如果是`read foo; ls $foo`，则不能只输入`$(rm /)`运行命令，也不能只输入`"foo bar"`以避免拆分文件名。数据是数据，而不是代码，并且不尊重 shell 语法。

> 是什么以及如何工作 '"{}" ' +

`+`对文件名组运行一次​​命令（为了提高效率，而不是一次一个）。由于替换的工作方式，它与 相同`{} +`，因为参数只是被删除并替换为一堆文件名。

> 我怎样才能为间隔文件名修复我的脚本？

`IFS`您可以通过使用变量简单地更改 bash 用于拆分的字符，使其在 95% 的情况下工作：

```
IFS=$'\n'
for dir in $(find "$DIR" -type d)
do 
   echo "Directory: >> $dir <<"
done 
```

这使得 bash 仅在换行符上拆分，而不是所有空格的默认值（这可能会在您的其余代码中产生一些有趣的副作用，因此您可能希望之后将 IFS 的值设置回其原始值）。

文件名也可以包含换行符。最好的方法是使用：

```
while IFS= read -d '' -r dir
do
    echo "Directory: >> $dir <<"
done < <(find "$DIR" -type d -print0) 
```

这使得`find`输出文件被 NUL 字节分割，文件名永远不能包含这些字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T22:36:49.013

这可能对您更有效：

```
while IFS= read -r adir ; do
    echo "Directory: $adir"
done < <(find "$DIR" -type d) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T22:45:14.663

我使用这种格式并且效果很好：

```
find '/path/to/directories' -type d |\
  while read DIRNAME
  do
    echo "${DIRNAME}"
  done 
```

# php - 我可以预加载图像以在 TCPDF 中使用吗？

> ID：15752692
> 
> 赞同：1
> 
> 时间：2013-04-01T22:02:12.983
> 
> 标签：php, tcpdf

我正在处理大量相同的页面（字母），除了地址和其他一些次要细节。我相信最能减慢 PDF 创建速度的是我在每一页上都包含的徽标图像（即使它相当小）。

我希望通过缓存徽标来加快该过程，即通过加载文件一次并将其存储在变量中并让 TCPDF 使用它而不是每次都加载图像。TCPDF 可以加载一个“PHP 图像数据流”，给出的例子是这样的：

```
$imgdata = base64_decode('iVBORw0KGgoAAAANSUhEUgAAABwAAAASCAMAAAB/2U7WAAAABlBMVEUAAAD///+l2Z/dAAAASUlEQVR4XqWQUQoAIAxC2/0vXZDrEX4IJTRkb7lobNUStXsB0jIXIAMSsQnWlsV+wULF4Avk9fLq2r8a5HSE35Q3eO2XP1A1wQkZSgETvDtKdQAAAABJRU5ErkJggg==');
$pdf->Image('@'.$imgdata); 
```

但是，我不知道如何从文件中创建这样的图像流。

我的徽标是一个小的 (4kB) PNG 文件。如果我使用`readfile($file)`并将其发送到`$pdf->Image`前面的“@”，它会出错 - 关于已经设置为 chmod 777 的缓存文件夹（它是一个测试服务器 - 我将在实时服务器上处理适当的权限）。我相信我也尝试过`base64_encode`，但也没有用。

关于如何做到这一点的任何想法？

PS：我已经注意到我在 PDF 中包含的页面越多，它变得越慢，所以我会找到一个好的中间件（每个文件可能 200-250 页而不是当前的 500 页）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:33:48.003

在 sourceforge 的 TCPDF 论坛上发布了同样的问题（[sourceforge forum post](https://sourceforge.net/p/tcpdf/discussion/435311/thread/3674b3fb/)），TCPDF 的作者回答了。

他说图像是在内部缓存的，但是如果图像需要处理，他建议使用`XObject()`模板系统（参见TCPDF 网站上的[示例 62](http://www.tcpdf.org/examples/example_062.phps)）。

我花了一段时间才让它工作（仍然不确定为什么一开始它对我不起作用），但是一旦我让它看起来与我的原始版本完全一样`Image()`，我用大约 3,000 个条目进行了一些测试，分为 PDF每个文件 500 页。

`XObject()`和之间根本没有速度提升`Image()`，`XObject()`实际上似乎使生成的文件稍微大了一点（1.2MB 文件中为 2.5kB）。

虽然这并不能直接回答我原来的问题（如何`Image('@'.$image)`使用`XObject()`对我的处境有任何好处。

# api - OAuth2 多台服务器访问服务

> ID：15752695
> 
> 赞同：0
> 
> 时间：2013-04-01T22:02:18.040
> 
> 标签：api, rest, authentication, oauth, restful-authentication

我有一个服务器端应用程序，它使用受 OAuth 2.0 保护的 API 进行一些工作。当我启动应用程序时，我会通过 OAuth 身份验证流程并获取访问和刷新令牌。

现在，问题是：我的应用程序可以跨多个服务器运行。

我可以在所有三台服务器之间共享访问令牌，还是我必须去为每台服务器获取一个新的（这需要用户交互——太麻烦了！）？？我注意到 Google 的 API 将访问令牌称为“Bearer”令牌，我假设这意味着任何拥有它们的人都可以使用它们，但是：

1.  这在其他 OAuth 2.0 API 中很常见吗？有更好的推荐做法吗？
2.  这真的是预期的意思吗？

建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:24:12.480

根据[这个](http://self-issued.info/docs/draft-ietf-oauth-v2-bearer.html)网站，

> 拥有不记名令牌（“不记名”）的任何一方都可以使用它来访问相关资源

这意味着是的，您可以在所有三台服务器上共享它。我引用的文档并非特定于 API，因此无论是 Google 还是其他网站都无关紧要。

# android - 带有选项卡的图形布局

> ID：15752700
> 
> 赞同：0
> 
> 时间：2013-04-01T22:02:40.113
> 
> 标签：android

我是 Android 的新程序员。我正在尝试将选项卡布局与 tabhost 一起使用。我有一个问题：我可以使用图形布局界面来设计不同的选项卡屏幕，还是必须直接在 XML 布局中进行？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:35:10.210

我总是在没有任何图形工具的情况下手动创建编写 XML 文件的 GUI，因此我无法回答您的问题*，但*我为您提供了很棒的示例——ActionBar Sherlock 示例是如何构建基于选项卡的应用程序的**绝佳示例：**

[https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/fragments/src/com/actionbarsherlock/sample/fragments/FragmentTabs.java](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/fragments/src/com/actionbarsherlock/sample/fragments/FragmentTabs.java)

[https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/fragments/src/com/actionbarsherlock/sample/fragments/FragmentTabsPager.java](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/fragments/src/com/actionbarsherlock/sample/fragments/FragmentTabsPager.java)

[https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/demos/src/com/actionbarsherlock/sample/demos/TabNavigation.java](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/demos/src/com/actionbarsherlock/sample/demos/TabNavigation.java)

此外，您可以在 google play store 上获得所有这些示例，并在无需自己构建的情况下试用它们！

[https://play.google.com/store/apps/details?id=com.actionbarsherlock.sample.demos](https://play.google.com/store/apps/details?id=com.actionbarsherlock.sample.demos)

[https://play.google.com/store/apps/details?id=com.actionbarsherlock.sample.fragments](https://play.google.com/store/apps/details?id=com.actionbarsherlock.sample.fragments)

我总是将基于选项卡的应用程序基于这些示例应用程序之一。很棒的东西！

# python - 在类的 __init__ 之外定义信号不起作用？

> ID：15752702
> 
> 赞同：0
> 
> 时间：2013-04-01T22:02:46.880
> 
> 标签：python, pyqt, signals-slots

我正在尝试了解信号和插槽....

读了几件事

[http://www.harshj.com/2010/05/06/pyqt-faq-custom-signals-jpeg-mouse-hovers-and-more/#custom](http://www.harshj.com/2010/05/06/pyqt-faq-custom-signals-jpeg-mouse-hovers-and-more/#custom)

[http://zetcode.com/tutorials/pyqt4/eventsandsignals/](http://zetcode.com/tutorials/pyqt4/eventsandsignals/)

这是问题：

```
class bla(object):
    blaSignal = QtCore.pyqtSignal() 
```

有效，但

bla 类（对象）：

```
def __init__(self):
    self.blaSignal = QtCore.pyqtSignal() 
```

不起作用，它说明了信号没有被绑定......我在这里不明白什么？为什么一个工作？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T22:09:33.047

这里的问题是您希望有一个由所有`bla`对象共享的单一信号。

如果每个 都有不同的信号，那么在不知道拥有特定信号的特定实例的情况`bla`下，没有人能够连接任何信号。`bla`这在程序中已经够糟糕的了，但想象一下类似`QtDesigner`或`QMetaObject`基于 - 的内省将如何处理它。即使它创建了一个`bla`实例，它也不会是`bla`您的代码在运行时创建的同一个实例。

这在文档中[定义新信号`pyqtSignal()`](http://pyqt.sourceforge.net/Docs/PyQt4/new_style_signals_slots.html#defining-new-signals-with-pyqtsignal)中有所解释。

# html - 环绕时跨度显示在彼此之上

> ID：15752703
> 
> 赞同：0
> 
> 时间：2013-04-01T22:02:50.723
> 
> 标签：html

查看图像发生了什么，显然填充时不计算在内

![在此处输入图像描述](https://i.stack.imgur.com/FdFMW.png)

如果没有这种行为，我怎样才能让它换行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T22:06:11.360

Span 不是块元素，它们是内联元素。根据定义，这意味着它们将与文本保持*一致。*它们不会根据顶部/底部填充/边距垂直移动或调整，也不会影响任何其他元素的垂直放置。如果您希望文本在行与行之间有更多空间，则需要设置文本的`line-height`属性。

这是一个演示，演示了块和内联元素之间的区别以及如何调整跨度高度：

[http://jsfiddle.net/35fgV/](http://jsfiddle.net/35fgV/)

当您调整跨度的填充时，填充应用于文本上方/下方，但不会调整文本或其上方或下方的任何内容的位置。如果您不希望填充与上方和下方的行重叠，则需要`line-height`在该文本块中设置一个属性（不一定是跨度，而是同一行文本中的任何内容，`<br>`例如标签之间。一行text 将继承`line-height`同一行中任何元素中最大的元素。

# php - jquery submit 只工作一次

> ID：15752714
> 
> 赞同：0
> 
> 时间：2013-04-01T22:03:41.790
> 
> 标签：php, javascript, jquery, html

我对 jquery 很陌生，但无法使以下内容正常工作。我的表格只能提交一次，之后就不能再提交了。

```
<script type="text/javascript" language="javascript">
$(document).ready(function() {
$('#register').submit(function() {
    $.ajax({
        data: $(this).serialize(), 
        type: $(this).attr('method'), 
        url: $(this).attr('action'),
        success: function(response) {
            $('#regrespons').html(response); 
            $("#regrespons").css("visibility", "visible");
            $("#regrespons").fadeOut(1000); 
        }
    });
    return false;
});
});
</script>

<form id="register" action="includes/register.php" method="post" autocomplete="off">
<input class="inp" name="gebr`enter code here`" type="text" />
<input class="inp" name="ww1" type="password" />
<input class="inp" name="ww2" type="password" />
<input class="inp" name="mail" type="text" />
<input class="but" type="submit" value="Registreren" />
</form> 
```

任何帮助都是非常重要的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:05:18.523

更改`$("#register").submit(function () {`为`$(document).on('submit', '#register', function () {`

# jquery - Jquery 动画和 Internet Explorer

> ID：15752720
> 
> 赞同：-2
> 
> 时间：2013-04-01T22:03:57.413
> 
> 标签：jquery, jquery-animate

我只有 internet explorer 有问题，我在 ie 8 和 9 中测试过

问题是，例如我有一个绝对位置的 div 容器，我可以在相对位置看到其他 div 的后面，好的，这一切都很完美

例如，当我使用 jquery 创建具有不透明度动画的效果时，问题就来了

```
$('body').animate({
opacity: 0.90
}); 
```

当我这样做时，在 Internet Explorer 中，所有这些 div 都覆盖了 body 的效果，我看不到，但是这个问题例如在 chrome 或 firefox 等其他 brownsers 中没有发生，代码很长，所以没有放都在这里，如果有必要我没问题

感谢您的帮助，问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:20:09.370

尝试做

```
$('body').fadeTo(.9); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T22:10:16.940

指定动画长度并确保它在文档中准备好：

```
$(document).ready(function(){
   $('body').animate({opacity: 0.90}, 500);
}); 
```

# android - ListView 项目背景根据滚动位置而变化

> ID：15752721
> 
> 赞同：0
> 
> 时间：2013-04-01T22:04:08.087
> 
> 标签：android, listview, background-color, baseadapter

我遇到了一个非常奇怪的 ListView 行为。我有一个简单的聊天应用程序，它使用 ListView 和 BaseAdapter 的自定义实现来显示消息。

我的想法是将来自“本地”用户的消息设为灰色，将来自“远程”用户的消息设为白色，以帮助用户区分两者。下面的两个屏幕截图显示了正在发生的事情。第二个是完全相同的活动、xml 等，只是向下滚动了一点。

向上滚动：

![向上滚动的图像](https://i.stack.imgur.com/1hzeB.jpg)

向下滚动：

![向下滚动图片](https://i.stack.imgur.com/rODGM.jpg)

看“我”@23:05发来的消息。当它在顶部时，它与它的邻居没有对比，但是当它滚动到底部时，差异是显而易见的。这发生在 4.2.2 上的连接 4 和 7 以及运行 4.1.2 的 GS3 上。

这是 ListView 项目之一的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/activity_view_conversation_message_list_item_wrapper"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingBottom="2dp"
    android:paddingLeft="5dp"
    android:paddingRight="10dp" >

    <ImageView
        android:id="@+id/activity_view_conversation_message_list_item_user_image"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_alignParentLeft="true"
        android:layout_marginTop="5dp"
        android:src="@drawable/default_user_image" />

    <TextView
        android:id="@+id/activity_view_conversation_message_list_item_heading"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="1dp"
        android:layout_toRightOf="@+id/activity_view_conversation_message_list_item_user_image"
        android:text="Martyn"
        android:textColor="#000000"
        android:textSize="18sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/activity_view_conversation_message_list_item_contents"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/activity_view_conversation_message_list_item_heading"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="5dp"
        android:layout_marginTop="2dp"
        android:layout_toLeftOf="@+id/activity_view_conversation_message_list_item_ack"
        android:layout_toRightOf="@+id/activity_view_conversation_message_list_item_user_image"
        android:text="Hello this is some text"
        android:textColor="#333333"
        android:textIsSelectable="true"
        android:textSize="18sp" />

    <TextView
        android:id="@+id/activity_view_conversation_message_list_item_time"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="2dp"
        android:paddingLeft="5dp"
        android:paddingRight="5dp"
        android:paddingTop="2dp"
        android:text="12:08"
        android:textSize="14sp" />

    <ImageView
        android:id="@+id/activity_view_conversation_message_list_item_ack"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/activity_view_conversation_message_list_item_time"
        android:layout_marginRight="2dp"
        android:layout_marginTop="8dp"
        android:layout_toLeftOf="@+id/activity_view_conversation_message_list_item_time"
        android:src="@drawable/red_dot_8dp" />

</RelativeLayout> 
```

这里是我设置RelativeLayout颜色的地方：

```
if(localUserId.equals(remoteUserId)){
    itemLayout.setBackgroundColor(Color.parseColor("#F9F9F9"));
} 
```

该代码在我的适配器的 getView() 方法中运行。

我在谷歌上搜索了一下，但什么也没找到，有很多关于 android:cacheColorHint 问题的 SO 问题，但我认为这不是这里发生的事情。

有没有人遇到过这个？我难住了！

编辑：这是基本适配器代码：

```
public class MessageListAdapter extends BaseAdapter {
    private ArrayList<Message> messageList;
    Context context;

    /**
     * Constructor
     * @param newConversationsList  An ArrayList of Conversation objects that this adapter will use
     * @param newContext            The context of the activity that instantiated this adapter
     */
    MessageListAdapter(ArrayList<Message> newMessageList, Context newContext){
        messageList = newMessageList;
        //reload();
        context = newContext;
    }

    public int getCount() {
        return messageList.size();
    }

    public Object getItem(int position) {
        return messageList.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    /**
     * Adds a message to the chat list
     * @param message       A Message object containing all the message's information
     */
    public void add(Message message){
        //nMessagesToShow++;        //A new message has been added, so increase the number to show by one
        Log.d(TAG, "COUNT: "+getCount());
        //refresh();
    }

    public void refresh(){
        this.notifyDataSetChanged();
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View view = convertView;

        if(view!=null){
            //return view;
        }

        LayoutInflater vi = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        //Get the Message object from the list
        Message message = messageList.get(position);

        //Get the data from the message
        String senderId = message.getFromUser();
        int messageType = message.getType();

        String senderFirstName;

        ImageView userImage, messageImage;
        TextView messageHeading, messageBody;

        switch(messageType){
        case Message.MESSAGE_TYPE_TEXT:             //Standard text message
            //The layout we inflate for this list item will vary depending on whether this message has the same sender as the previous
            if(position>0 && senderId.equals(messageList.get(position-1).getFromUser())){       //True if this is not the first message AND the sender id matches that of the previous message              
                view = vi.inflate(R.layout.activity_view_conversation_message_list_item_alternate, null);       //Inflate an alternate version of the list item which has no heading or user image
            }
            else{       //This is the first message OR the sender id is different to the previous               
                view = vi.inflate(R.layout.activity_view_conversation_message_list_item, null);                 //Inflate the standard version of the layout

                userImage = (ImageView) view.findViewById(R.id.activity_view_conversation_message_list_item_user_image);
                messageHeading = (TextView) view.findViewById(R.id.activity_view_conversation_message_list_item_heading);

                //Use the sender's ID to get the sender's image and first name
                Contact contact = database.getContact(senderId);
                if(senderId.equals(localUserId)){       //True if the local user sent this message
                    senderFirstName = "Me";
                }
                else{
                    senderFirstName = contact.getFirstName();
                }
                userImage.setImageBitmap(contact.getImageBitmap(100, 100, 6));
                messageHeading.setText(senderFirstName);
            }

            messageBody = (TextView) view.findViewById(R.id.activity_view_conversation_message_list_item_contents);
            messageBody.setText(message.getContents(null));

            break;              
        case Message.MESSAGE_TYPE_IMAGE:            //Image message
            view = vi.inflate(R.layout.activity_view_conversation_message_list_item_image, null);       //Inflate a list item template for displaying an image
            userImage = (ImageView) view.findViewById(R.id.activity_view_conversation_message_list_item_user_image);

            //Sender's first name
            messageHeading = (TextView) view.findViewById(R.id.activity_view_conversation_message_list_item_heading);
            Contact contact = database.getContact(senderId);
            if(senderId.equals(localUserId)){       //True if the local user sent this message
                senderFirstName = "Me";
            }
            else{
                senderFirstName = contact.getFirstName();
            }
            messageHeading.setText(senderFirstName);
            messageImage = (ImageView) view.findViewById(R.id.activity_view_conversation_message_list_item_image);
            String imageResourceId = null;
            //The message is a JSON object containing several fields, one of which is the file name which we will use to get the image
            try {
                JSONObject messageJSON = new JSONObject(message.getContents(null));
                String imagePath = Environment.getExternalStorageDirectory()+"/epicChat/resources/"+messageJSON.getString("fileName");
                int imageWidth = messageJSON.getInt("width");       //We want the dimensions in order to calculate the aspect ratio of the image
                int imageHeight = messageJSON.getInt("height");
                if(messageJSON.has("resourceId")){
                    imageResourceId = messageJSON.getString("resourceId");  //This is used when opening the image gallery
                }
                int displayWidth = 300;
                int displayHeight = (int) ((float) imageHeight / (float) imageWidth * (float) displayWidth);
                String imagePathFull = imagePath+displayWidth+displayHeight;            //For the caching
                Bitmap originalImage = null;
                //Check the bitmap cache exists. If not, reinstantiate it
                if(MainActivity.bitmapCache==null){                 //Cache is null
                    MainActivity.loadBitmapCache();
                }
                else{                                               //Cache is not null, so check it to see if this image is in it
                    originalImage = MainActivity.bitmapCache.get(imagePathFull);
                }
                if(originalImage==null){        //True if the bitmap was not in the cache. So we must load from disk instead
                    new Utils.LoadBitmapAsync(imagePath, messageImage, displayWidth, displayHeight, MainActivity.bitmapCache).execute();
                    messageImage.getLayoutParams().height = displayHeight;
                }
                else{
                    messageImage.setImageBitmap(originalImage);
                }
            }
            catch (JSONException e) {
                Log.e(TAG, "Error reading image JSON: "+e.toString());
            }
            if(imageResourceId!=null){      //Only attach the listener if we got a valid resource ID
                final String recourceIdFinal = imageResourceId;
                final String conversationIdFinal =  message.getUserList();
                messageImage.setOnClickListener(new OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        Intent showConversationImageGalleryIntent = new Intent(context, ViewConversationImageGalleryActivity.class);
                        showConversationImageGalleryIntent.putExtra("conversationId", conversationIdFinal);
                        showConversationImageGalleryIntent.putExtra("resourceId", recourceIdFinal);
                        startActivityForResult(showConversationImageGalleryIntent, ACTION_SHOW_CONVERSATION_IMAGE_GALLERY);
                    }
                });
            }
            userImage.setImageBitmap(contact.getImageBitmap(100, 100, 6));
            break;
        case Message.MESSAGE_TYPE_INVALID:
        default:
            break;
        }

        //Some layout items are present in all layouts. Typically these are the status indicator and the message time
        RelativeLayout itemLayout = (RelativeLayout) view.findViewById(R.id.activity_view_conversation_message_list_item_wrapper);
        //If the message is from the local user, give it a subtle grey background
        if(localUserId.equals(message.getFromUser())){
            itemLayout.setBackgroundColor(Color.parseColor("#E9E9E9"));
        }
        else{
            itemLayout.setBackgroundColor(Color.parseColor("#FFFFFF"));
        }
        TextView messageTimeText = (TextView) view.findViewById(R.id.activity_view_conversation_message_list_item_time);
        messageTimeText.setText(message.getFormattedTime());

        ImageView messageStatusImage = (ImageView) view.findViewById(R.id.activity_view_conversation_message_list_item_ack);
        //Set the status image according to the status of the message
        switch(message.getStatus()){
        case Message.MESSAGE_STATUS_PENDING:        //Pending messages should have a red dot
            messageStatusImage.setImageResource(R.drawable.red_dot_8dp);
            messageStatusImage.setVisibility(View.VISIBLE);
            break;
        case Message.MESSAGE_STATUS_ACK_SERVER:     //Messages that reached the server should have an orange dot
            messageStatusImage.setImageResource(R.drawable.orange_dot_8dp);
            messageStatusImage.setVisibility(View.VISIBLE);
            break;
        case Message.MESSAGE_STATUS_ACK_RECIPIENT:  //Messages that reached the recipient should have an green dot
            messageStatusImage.setImageResource(R.drawable.green_dot_8dp);
            messageStatusImage.setVisibility(View.VISIBLE);
            break;
        case Message.MESSAGE_STATUS_NOT_SET:        //Not set typically means the message came from another user, in which case the status image should be hidden
        default:                                    //Also default here
            messageStatusImage.setVisibility(View.INVISIBLE);
            break;
        }           
        return view;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:20:36.573

由于没有与您的 if 匹配的 else 语句，这可能是由于视图回收。当 ListView 中的项目滚出屏幕时，操作系统会将其移除并以与移除时相同的状态将其交还给适配器。这意味着当它不是本地用户的消息时，您也需要设置背景颜色。

# linux - 解码 ptrace 寄存器

> ID：15752722
> 
> 赞同：1
> 
> 时间：2013-04-01T22:04:10.637
> 
> 标签：linux, struct, bits, strace, ptrace

我想知道内容/成员在哪里

```
`struct user_regs_struct ur` 
```

这是通过调用来填写的

```
ptrace(PTRACE_GETREGS, pid, 0, &ur); // get registers 
```

我可以提取有关跟踪的子进程系统调用当前是*进入*还是*退出*的信息。经过一些测试，到目前为止我的结论是结构成员的低 8 位`ax`等于`0xda`退出。然而，我不确定这是否是一个正确的一般结论，所以我问这是否记录在任何地方。

在 strace 来源中，我找到了位掩码定义`TCB_INSYSCALL`，这可能是我正在寻找的内容，但我无法解码`user_regs_struct`读取信息源（？的某个成员）的位置。

# actionscript-3 - 如何从 Loader() 中加载的图像创建精灵？

> ID：15752726
> 
> 赞同：0
> 
> 时间：2013-04-01T22:04:27.770
> 
> 标签：actionscript-3, flash, sprite, loader, flashdevelop

我正在通过 Loader() 类加载背景图像，并想知道是否有办法从加载的图像创建精灵？

我想在外部类文件中放置一个函数以将图像放入加载器中，然后调用该类以从加载的图像中创建一个精灵。我什至不确定这是可能的。

注意：我使用的是 flashdevelop，没有时间线。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T22:53:32.183

您可以只使用加载器对象作为显示对象，或者您可以访问加载器中的位图对象并将其添加到精灵。

```
 var loader:Loader = new Loader();
 loader.load(new URLRequest(filename)); 
 addChild(loader);

 loader.x = 100;
 loader.y = 200;
 //so on 
```

要访问加载的位图和位图数据，只需添加一个事件侦听器并访问它们。

```
var loader:Loader = new Loader();
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onLoadComplete);
loader.load(new URLRequest(filename));  

private function onLoadComplete(e:Event):void 
{
   var loaderInfo:LoaderInfo = e.target as LoaderInfo;
   var loadedBitmap:Bitmap = loaderInfo.content as Bitmap;

   var sprite:Sprite = new Sprite();
   sprite.addChild(loadedBitmap);

   addChild(sprite);

   sprite.x = 100;
   sprite.y = 200;
   //so on

} 
```

# c# - 扩展方法中的可选字符串参数

> ID：15752727
> 
> 赞同：1
> 
> 时间：2013-04-01T22:04:34.760
> 
> 标签：c#, extension-methods, optional-arguments

我有一行代码说

```
string sendQueueName = ESResource.Service.TOPICA.Src(); 
```

类的布局方式如下：-

```
public static class ESResource{
    static ESResource() {
        //initialization code
    }
//other declarations and definitions

    public enum Service { TOPICA,TOPICB,TOPICC };
    public static string Path(this Service sn) { return FromKey(sn, "PATH"); }
    public static string Src(this Service sn) { return FromKey(sn, "SRC"); }
} 
```

我有一个功能要求我能够像这样传递一个字符串环境

```
string sendQueueName = ESResource.Service.TOPICA.Src(env); 
```

但是当我尝试修改我的 Src 函数以支持上述函数调用时，如下所示：

```
public static string Src(this Service sn, string env=""){ return FromKey(sn, "PATH", env); } 
```

它说它找不到具有一个参数的函数。传入可选参数 env 的最佳方法是什么？

# jquery - Jquery 在 aspx 内容页面上什么都不做

> ID：15752728
> 
> 赞同：0
> 
> 时间：2013-04-01T22:04:38.567
> 
> 标签：jquery, asp.net

我的孩子/ContentPage 中有这个，但什么也没发生。我错过了什么？

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="WFFHM.WebForm1" %>

<asp:Content ID="Content3" ContentPlaceHolderID="MainContent" runat="server">
        <asp:Button ID="Button2" runat="server" Text="Button" />
    <script src="Scripts/jquery-1.7.1.js"></script>
    <script type="text/javascript">
        $("#Button2").click(function () {
            alert("ASD");
        }
            );
    </script>

</asp:Content> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T22:06:22.317

您的 ID 选择器错误（缺少`#`，您还需要`clientIdMode="static"`为您的按钮设置。

你也可以这样做，这对 IMO 来说更丑。

```
$("#<%= Button2.ClientID %>") 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-01T22:06:23.423

我根本不知道 ASP，所以我可能会错过一些东西，但这应该可以解决它：

```
<script type="text/javascript">
    $("#Button2").click(function () {
        alert("ASD");
    });
</script> 
```

# java - 发布到 Html/PHP 表单的 Java 代码

> ID：15752729
> 
> 赞同：0
> 
> 时间：2013-04-01T22:04:40.020
> 
> 标签：java, html, http, post

我正在寻找有关如何转到 URL、将字符串粘贴/键入这些文本框并点击登录按钮的方法/代码。

```
<center><label>Username:   </label><input type="text" name="username"/></center>
<center><label>Password:   </label><input type="password" name="password"/><br/></center>
<center><input type="submit" value=" Login "/><br /></center>
</form> 
```

我对此很陌生，所以如果你能解释，请做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:08:12.073

[您可以使用 HttpComponents 来执行此操作](http://hc.apache.org/)。[这是网站上的一个示例，用于做一个基本的帖子](http://hc.apache.org/httpcomponents-core-ga/httpcore/examples/org/apache/http/examples/ElementalHttpPost.java)。

```
/*
 * ====================================================================
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 * ====================================================================
 *
 * This software consists of voluntary contributions made by many
 * individuals on behalf of the Apache Software Foundation.  For more
 * information on the Apache Software Foundation, please see
 * <http://www.apache.org/>.
 *
 */

package org.apache.http.examples;

import java.io.ByteArrayInputStream;
import java.net.Socket;

import org.apache.http.ConnectionReuseStrategy;
import org.apache.http.HttpEntity;
import org.apache.http.HttpHost;
import org.apache.http.HttpRequestInterceptor;
import org.apache.http.HttpResponse;
import org.apache.http.HttpVersion;
import org.apache.http.entity.ByteArrayEntity;
import org.apache.http.entity.InputStreamEntity;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.DefaultConnectionReuseStrategy;
import org.apache.http.impl.DefaultHttpClientConnection;
import org.apache.http.message.BasicHttpEntityEnclosingRequest;
import org.apache.http.params.HttpParams;
import org.apache.http.params.HttpProtocolParams;
import org.apache.http.params.SyncBasicHttpParams;
import org.apache.http.protocol.HttpContext;
import org.apache.http.protocol.BasicHttpContext;
import org.apache.http.protocol.ExecutionContext;
import org.apache.http.protocol.HttpProcessor;
import org.apache.http.protocol.HttpRequestExecutor;
import org.apache.http.protocol.ImmutableHttpProcessor;
import org.apache.http.protocol.RequestConnControl;
import org.apache.http.protocol.RequestContent;
import org.apache.http.protocol.RequestExpectContinue;
import org.apache.http.protocol.RequestTargetHost;
import org.apache.http.protocol.RequestUserAgent;
import org.apache.http.util.EntityUtils;

/**
 * Elemental example for executing multiple POST requests sequentially.
 * <p>
 * Please note the purpose of this application is demonstrate the usage of HttpCore APIs.
 * It is NOT intended to demonstrate the most efficient way of building an HTTP client.
 */
public class ElementalHttpPost {

    public static void main(String[] args) throws Exception {

        HttpParams params = new SyncBasicHttpParams();
        HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
        HttpProtocolParams.setContentCharset(params, "UTF-8");
        HttpProtocolParams.setUserAgent(params, "Test/1.1");
        HttpProtocolParams.setUseExpectContinue(params, true);

        HttpProcessor httpproc = new ImmutableHttpProcessor(new HttpRequestInterceptor[] {
                // Required protocol interceptors
                new RequestContent(),
                new RequestTargetHost(),
                // Recommended protocol interceptors
                new RequestConnControl(),
                new RequestUserAgent(),
                new RequestExpectContinue()});

        HttpRequestExecutor httpexecutor = new HttpRequestExecutor();

        HttpContext context = new BasicHttpContext(null);

        HttpHost host = new HttpHost("localhost", 8080);

        DefaultHttpClientConnection conn = new DefaultHttpClientConnection();
        ConnectionReuseStrategy connStrategy = new DefaultConnectionReuseStrategy();

        context.setAttribute(ExecutionContext.HTTP_CONNECTION, conn);
        context.setAttribute(ExecutionContext.HTTP_TARGET_HOST, host);

        try {

            HttpEntity[] requestBodies = {
                    new StringEntity(
                            "This is the first test request", "UTF-8"),
                    new ByteArrayEntity(
                            "This is the second test request".getBytes("UTF-8")),
                    new InputStreamEntity(
                            new ByteArrayInputStream(
                                    "This is the third test request (will be chunked)"
                                    .getBytes("UTF-8")), -1)
            };

            for (int i = 0; i < requestBodies.length; i++) {
                if (!conn.isOpen()) {
                    Socket socket = new Socket(host.getHostName(), host.getPort());
                    conn.bind(socket, params);
                }
                BasicHttpEntityEnclosingRequest request = new BasicHttpEntityEnclosingRequest("POST",
                        "/servlets-examples/servlet/RequestInfoExample");
                request.setEntity(requestBodies[i]);
                System.out.println(">> Request URI: " + request.getRequestLine().getUri());

                request.setParams(params);
                httpexecutor.preProcess(request, httpproc, context);
                HttpResponse response = httpexecutor.execute(request, conn, context);
                response.setParams(params);
                httpexecutor.postProcess(response, httpproc, context);

                System.out.println("<< Response: " + response.getStatusLine());
                System.out.println(EntityUtils.toString(response.getEntity()));
                System.out.println("==============");
                if (!connStrategy.keepAlive(response, context)) {
                    conn.close();
                } else {
                    System.out.println("Connection kept alive...");
                }
            }
        } finally {
            conn.close();
        }
    }

} 
```

# delphi - JPEG 错误 #61 在 Delphi 中的同一图像上随机发生

> ID：15752732
> 
> 赞同：0
> 
> 时间：2013-04-01T22:04:49.387
> 
> 标签：delphi, jpeg, delphi-7, internet-component-suite

我在测试我的程序时加载了相同的 JPEG 图像。有时它加载正常，有时它没有。该文件在此过程中不会发生任何变化。我使用 Overbyte ICS THttpCli 组件从 localhost 下载它。相同的代码怎么可能有时工作而有时不工作？

我使用德尔福 7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:09:00.250

问题出在 Overbyte ICS (Internet Component Suite) V8 的 THTTPCli 组件上。Delphi 7 和 Delphi XE 3 中发生错误。我的问题是因为我放了：

```
Application.Processmessages; 
```

在 HttpCli.OnDocData 分配的过程中。删除它后，组件工作正常。即使没有它，应用程序似乎也不会冻结。

# javascript - Javascript将主干模型实例存储在对象中

> ID：15752734
> 
> 赞同：0
> 
> 时间：2013-04-01T22:04:58.857
> 
> 标签：javascript, backbone.js, model, instance

我正在尝试将创建的实例存储在一个对象中，不幸的是它不断产生错误，例如`Uncaught SyntaxError: Unexpected token ,`

这是我的 Backbone 模型代码的示例：

```
Hero = Backbone.Model.extend({
    defaults: {
        id:         0,
        name:       ''
    },

    initialize: function(){
    }
}); 
```

这就是我尝试创建和存储实例的方式

```
var heroes = {
    new Hero({ 0, 'Orrin'}),
    new Hero({ 1, 'Valeska'})
} 
```

我应该如何存储这些实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:08:46.577

```
new Hero({ 0, 'Orrin'}),
new Hero({ 1, 'Valeska'}) 
```

那不是有效的Javascript。您将数组和对象组合在一起；你应该这样做：

```
new Hero([ 0, 'Orrin']),
new Hero([ 1, 'Valeska']) 
```

（这是有效的 Javascript，但不是有效的 Backbone）......或者，更有可能：

```
new Hero({index: 0, name: 'Orrin'}),
new Hero({index: 1, name: 'Valeska'}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T22:37:13.950

您是否注意到 `defaults: { id: 0, name: '', },`“name”属性的末尾有一个“,”？尝试删除它，看看是否可以解决问题。

# c# - 字符串“3/21/2013” 未被识别为有效日期时间

> ID：15752737
> 
> 赞同：-1
> 
> 时间：2013-04-01T22:05:13.250
> 
> 标签：c#, asp.net

我正在尝试将字符串转换为 C# 中的日期时间格式。

```
DateTime SnapDate = Convert.ToDateTime(valid(odr, 4)).Date;

protected string valid(OleDbDataReader myreader, int stval)//if any columns are found null then they are replaced by zero
{
   object val = myreader[stval];
   if (val != DBNull.Value)
      return val.ToString();
   else
   return Convert.ToString("");
} 
```

它给了我以下错误：“字符串未被识别为有效的日期时间。从索引 0 开始有一个未知单词。”

我尝试了几件事，例如：`parse`但`parseExact`仍然没有得到它。

我正在从 Excel 表中读取这些数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T22:08:35.417

看起来您的输入字符串是 en-US 格式。尝试`CultureInfo`在方法中指定对象`Parse`：

```
DateTime SnapDate = DateTime.Parse(valid(odr, 4), new CultureInfo("en-US")).Date; 
```

它将强制`Parse`方法以格式查找日期`M/d/yyyy`，该格式对您的输入字符串有效`3/21/2013`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T22:10:43.490

我想说，与其使用您的系统文化或选择一种文化，不如选择确切的日期格式并使用它，例如：

```
DateTime dt = DateTime.ParseExact("3/21/2013", "M\\/d\\/yyyy", null); 
```

参数顺序或日期分隔符没有歧义。

仅供参考：我在正斜杠之前使用反斜杠的原因是为了逃避正斜杠 - 正斜杠意味着[日期分隔符](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx#dateSeparator)，不一定是正斜杠，因此转义它可以消除任何可能的歧义。

# ruby-on-rails - 在 ruby on rails 中生成控制器的参数？

> ID：15752744
> 
> 赞同：1
> 
> 时间：2013-04-01T22:05:31.483
> 
> 标签：ruby-on-rails, ruby

使用命令时：

```
rails generate controller home index 
```

生成控制器时，我们总是必须生成视图吗？另外，控制器和视图可以自己生成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:22:06.033

不，您不必总是生成动作。在您的情况下，如果您只想生成一个空控制器，您可以拥有：

`rails generate controller home`

或者，可以手动生成控制器和视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T22:24:31.157

也许你弄错了脚手架。它应该为您提供一个开始的基本框架，在您工作的后期进展中，您将开始自己创建它。每次您需要创建自定义内容时，都意味着您正在进步，因此脚手架将不再适合您的需求。

# matlab - Matlab 伽马函数：我得到大值的 Inf

> ID：15752750
> 
> 赞同：4
> 
> 时间：2013-04-01T22:05:57.017
> 
> 标签：matlab

我正在为 Matlab 中的多元 t 分布的 pdf 编写自己的代码。有一段代码包含 gamma 函数。

```
gamma((nu+D)/2) / gamma(nu/2) 
```

问题是 nu=1000，所以我从 gamma 函数中得到 Inf。看来我将不得不使用伽玛函数的一些数学属性来以不同的方式重写它。

感谢您的任何建议

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T23:10:45.447

您可以使用 function `gammaln(x)`，它相当于`log(gamma(x))`但避免了溢出问题。你写的函数相当于：

```
exp(gammaln((nu+D)/2) - gammaln(nu/2)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T22:28:48.140

该数字`gamma(1000/2)`大于 MATLAB 支持的最大数量。因此它显示'inf'。要查看 MATLAB 中的最大数量，请检查`realmax`. 对于您的情况，如果 D 不是很大，您将不得不重写您的公式。让我们假设在您的情况下，“D”是偶数。那么你的公式将是：nu/2 * (nu/2 -1) * ....* (nu/2 - D/2 + 1)。

```
sum1 = 1
for i = 1:D/2
sum1 = sum1*(nu/2 - i+1);
end 
```

然后`sum1`就会得到你想要的结果。

# .net - 从 .net 4.0 下的 db4o 在 3.5 中加载数据

> ID：15752752
> 
> 赞同：1
> 
> 时间：2013-04-01T22:06:01.877
> 
> 标签：.net, db4o

我有一个运行 .net 4.0 的服务器，它正在创建一个 db4o 数据库并将其发送到客户端。客户端运行.net 3.5，无法打开数据库（这曾经在服务器也是3.5时工作）。

客户端抛出一个`Db4oIOException`堆栈跟踪，如下所示：

```
at Db4objects.Db4o.IO.ReadOnlyBin.Write(Int64 position, Byte[] bytes, Int32 bytesToWrite)
at Db4objects.Db4o.IO.BinDecorator.Write(Int64 position, Byte[] bytes, Int32 bytesToWrite)
at Db4objects.Db4o.IO.BlockAwareBin.BlockWrite(Int32 address, Int32 offset, Byte[] bytes, Int32 length)
at Db4objects.Db4o.Internal.IoAdaptedObjectContainer.WriteBytes(ByteArrayBuffer buffer, Int32 blockedAddress, Int32 addressOffset)
at Db4objects.Db4o.Internal.LocalObjectContainer.WritePointer(Int32 id, Slot slot)
at Db4objects.Db4o.Internal.LocalObjectContainer.AllocatePointerSlot()
at Db4objects.Db4o.Internal.Ids.PointerBasedIdSystem.NewId()
at Db4objects.Db4o.Internal.Ids.TransactionalIdSystemImpl.AcquireId()
at Db4objects.Db4o.Internal.Ids.TransactionalIdSystemImpl.NewId(SlotChangeFactory slotChangeFactory)
at Db4objects.Db4o.Internal.PersistentBase.Write(Transaction trans)
... 
```

关于如何以兼容格式保存数据库或无错误加载的任何想法？

**附加信息**

我似乎没有存储任何 .net 4.0 特定数据。在 LINQPad 中打开数据库并浏览它只显示我自己的自定义类（它们都是在 3.5 下构建的）。

似乎 db4o 试图写入的对象/类型是`System.Reflection.Cache.InternalCache`. [db4o 的 Jira 上](http://tracker.db4o.com/browse/COR-794)存在一个可能相关（或可能不相关）的问题。

还有一个[带有异常相似堆栈跟踪的错误](http://tracker.db4o.com/browse/COR-2078)。

使用`Db4oEmbedded.OpenFile(Db4oConfiguration.Default(), path)`会导致此异常。如果我`Db4oEmbedded.OpenFile(path)`改为使用，则不会引发异常，但恢复的数据中会丢失一些对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:08:34.763

看起来 db4o 正在尝试在只读数据库 (ReadOnlyBin) 上创建元数据。

您是否以只读模式打开数据库？

我可以使用以下代码重现您的问题（您甚至不需要拥有不同版本的框架）：

*   使用 ProxyTuple = System.Tuple 运行应用程序（以创建数据库）
*   使用 ProxyTyple = Db4objects.Db4o.Foundation.Tuple 再次运行它

在这种情况下，问题是我正在使用 System.Tuple（在 .Net 4.0 上可用）创建数据库，并尝试使用 Db4o 元组实现在 .Net 3.5 上打开数据库（因为 .Net 3.5 上不存在元组类型） .

你可能会遇到类似的情况。

```
using System;
using System.IO;
using Db4objects.Db4o;
using Db4objects.Db4o.Config;

using ProxyTuple = Db4objects.Db4o.Foundation.Tuple<int, string>;
//using ProxyTuple = System.Tuple<int, string>;

namespace db4oVersionTest
{
    class Program
    {
        static void Main(string[] args)
        {
            var databaseFileName = "test.odb";
            if (!typeof(ProxyTuple).FullName.Contains("Db4o"))
            {
                File.Delete(databaseFileName);

                using (var db = Db4oEmbedded.OpenFile(databaseFileName))
                {
                    db.Store(new Item { value = 42, tuple = new ProxyTuple(42, "forty two")});
                }
            }
            else
            {
                using (var db = Db4oEmbedded.OpenFile(NewConfiguration(), databaseFileName))
                {
                    foreach (var item in db.Query<Item>())
                    {
                        Console.WriteLine(item);
                    }
                }
            }
        }

        private static IEmbeddedConfiguration NewConfiguration()
        {
            var configuration = Db4oEmbedded.NewConfiguration();
            configuration.File.ReadOnly = true;

            return configuration;
        }
    }

    class Item
    {
        public int value;
        public ProxyTuple tuple;

        public override string ToString()
        {
            return value + " " + tuple;
        }
    }
} 
```

# tomcat - 无法在 tomcat 7 上加载本机 C .so 文件

> ID：15752761
> 
> 赞同：3
> 
> 时间：2013-04-01T22:06:26.863
> 
> 标签：tomcat, java-native-interface, shared-libraries, native

我在 ubumtu VM 上的 tomcat 7 上部署了一个 Web 应用程序。应用程序使用一个 jar 文件，该文件反过来对一些本机 C SO 进行 JNI 调用。我做了以下工作： 1.在tomcat home下创建/shared/lib，并添加未压缩的类文件和C SO。2\. 更新 catalina.properties 以在 shared.loader 下查找上述目录 3\. 将上述目录添加到 PATH 4\. 将 CATALINA_OPTS 添加到“-Djava.library.path”选项以指向上述目录

多次重启tomcat，仍然出现“无法加载文件XXXX.SO”

我错过了什么？我已经看过几乎所有关于这个问题的文档

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-06T14:46:03.027

添加并`LD_LIBRARY_PATH=/location/of/your/shared-objects`重新`$CATALINA_HOME/conf/tomcat.conf`启动 Tomcat。这在 CentOS 上对我有用。

# javascript - 回流/渲染的时间是如何工作的？

> ID：15752762
> 
> 赞同：3
> 
> 时间：2013-04-01T22:06:30.550
> 
> 标签：javascript, dom

鉴于此代码：

```
$('#foo').css('height', '100px'); // or any other change to the DOM
console.log('done!'); 
```

**当第二条语句执行时，假设回流完成是否安全？**

继续提问：如果你用这个替换了第二行，它会改变答案吗？

```
window.setTimeout('console.log("done");', 1); 
```

我希望我的基本问题很清楚。非常感谢您的任何意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T23:01:41.813

浏览器通常将需要重排/重绘的 DOM 修改排队，以避免多次执行该昂贵的操作。但是，也有例外，正如您在此问答中看到的那样：[回流在 DOM 环境中何时发生？](https://stackoverflow.com/questions/510213/when-does-reflow-happen-in-a-dom-environment).

考虑到您发布的代码，并假设控制台将同步记录输出^*，您的第一个问题的答案是**否定**的。如果您只是更改元素的高度，浏览器通常会在执行回流/重绘操作之前完成所有其他同步代码的运行。但是，正如上面链接上的答案所说，某些操作确实会触发立即重排，因此无法回答您问题的“或对 DOM 的任何其他更改”部分。

考虑到上述相同的假设，您的第二个问题的答案是肯定的。字符串“done”将在浏览器事件循环的下一个滴答声中记录到控制台，因此可以安全地假设这是在重排之后。

通常您不必担心这种浏览器行为，除非您正在优化代码以提高性能，并试图避免重排。

^(* 有时控制台输出比预期晚；不幸的是，我找不到一个很好的链接。)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-01T22:10:00.517

该`.css()`方法不是异步的，因此您可以放心地假设它之后的任何语句都将按照您的预期执行。

```
$('#foo').css('height', '100px');
console.log($('#foo').css('height')); // will log '100px' 
```

# java - 我应该如何使用 Hashmap 来存储对象？

> ID：15752764
> 
> 赞同：0
> 
> 时间：2013-04-01T22:06:35.690
> 
> 标签：java, hashmap, bukkit

我正在开发一个插件，它将在操作期间使用的 hashmap 中存储氏族（氏族类对象）。hasmap 将存储在一个文件中（将 hashmap 作为一个整体序列化是理想的，但我不确定这是否可能）供以后使用并重新加载。

我应该如何去保存对象？我可以序列化整个哈希图吗？提前致谢; 我是哈希图的新手：P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T22:16:59.147

HashMap 本身实现了 Serializable，因此如果键和值都是可序列化的，则可以序列化整个 HashMap。首先，您必须决定使用什么键。键可以是任何对象，但必须同时实现 equals(..) 和 hashCode() 方法，以便可以在 HashMap 中识别键。

在您的情况下，您可能会使用 Clan 名称作为表示为 String 对象的键。此外，Clan 应该实现 Serializable（或 Externalizable）。

```
public class Clan 
    implements Serializable 
{
    ...
} 
```

如下创建 HashMap（使用 Java 1.5 或更高版本）：

```
Map<String, Clan> clans = new HashMap<String, Clan>(); 
```

将其序列化为这样的文件：

```
FileOutputStream fos = new FileOutputStream("t.tmp");
ObjectOutputStream oos = new ObjectOutputStream(fos);

oos.writeObject(clans);

oos.close(); 
```

使用 ObjectInputStream 反序列化它。Java 序列化过程非常慢，所以如果速度是一个问题，您应该检查替代序列化技术。Kryo 是一个非常简单快速的序列化库（[https://code.google.com/p/kryo/](https://code.google.com/p/kryo/)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T22:10:15.523

是的，您可以序列化`HashMap`对象，因为该类已经实现了`Serializable`接口。从[`HashMap`](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)文档中：

> 公共类 HashMap 扩展 AbstractMap 实现 Map、Cloneable、Serializable

请注意，您的`Clan`类必须实现`Serializable`接口才能被序列化。如果您打算使用`Clan`该类作为地图中的键，则它必须覆盖`hashCode`and`equals`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T22:13:10.437

当然可以，因为 HashMap 是可序列化的。不要忘记`Clan`也使可序列化

写入文件：

```
FileOutputStream fos = new FileOutputStream("clans");
ObjectOutputStream oos = new ObjectOutputStream(fos);
oos.writeObject(clans);
oos.close(); 
```

从文件中读取：

```
FileInputStream fis = new FileInputStream("clans");
ObjectInputStream ois = new ObjectInputStream(fis);
HashMap<String, Clan> clans = (HashMap) ois.readObject();
ois.close(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T22:15:06.017

只要 map 中的所有项目都实现`Serializable`，您就可以轻松使用 Java 的内置序列化，这是一个简单的示例：

```
public static void main(String[] args) throws IOException, ClassNotFoundException {
    final Map<Serializable, Serializable> myMap = new HashMap<>();
    final File myFile = new File("/path/to/file");
    try (final ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(myFile))) {
        oos.writeObject(myMap);
    }
    final Map<Serializable, Serializable> myReadMap;
    try (final ObjectInputStream ois = new ObjectInputStream(new FileInputStream(myFile))) {
        myReadMap = (Map<Serializable, Serializable>) ois.readObject();
    }
} 
```

`Map myMap`包含键和值的`Serializable`保存到文件中，然后从文件中读取为`myReadMap`.

# c - _mm_crc32_u64 定义不明确

> ID：15752770
> 
> 赞同：7
> 
> 时间：2013-04-01T22:07:16.960
> 
> 标签：c, sse, crc, crc32, sse4

为什么在世界上被`_mm_crc32_u64(...)`这样定义？

```
unsigned int64 _mm_crc32_u64( unsigned __int64 crc, unsigned __int64 v ); 
```

“crc32”指令*总是*累积 32 位 CRC，而*不是*64 位 CRC（毕竟，CRC32 不是 CRC64）。如果机器指令 CRC32*恰好*有一个 64 位目标操作数，则高 32 位将被忽略，并在完成时用 0 填充，因此永远没有 64 位目标。我理解为什么英特尔允许在指令上使用 64 位目标操作数（为了统一），但如果我想快速处理数据，我想要一个尽可能大的源操作数（即，如果我有那么多数据，则为 64 位，尾端更小）并且始终是 32 位目标操作数。但是内在函数不允许 64 位源和 32 位目标。注意其他内在函数：

```
unsigned int _mm_crc32_u8 ( unsigned int crc, unsigned char v ); 
```

"crc" 的类型不是 8 位类型，返回类型也不是，它们是 32 位。为什么没有

```
unsigned int _mm_crc32_u64 ( unsigned int crc, unsigned __int64 v ); 
```

? 英特尔指令支持这一点，*这*是最有意义的内在。

**有没有人有可移植的代码（Visual Studio 和 GCC）来实现后者？谢谢。** 我的猜测是这样的：

```
#define CRC32(D32,S) __asm__("crc32 %0, %1" : "+xrm" (D32) : ">xrm" (S)) 
```

对于 GCC，以及

```
#define CRC32(D32,S) __asm { crc32 D32, S } 
```

对于 VisualStudio。不幸的是，我对约束的工作原理知之甚少，对汇编级编程的语法和语义也没有什么经验。

小编辑：注意我定义的宏：

```
#define GET_INT64(P) *(reinterpret_cast<const uint64* &>(P))++
#define GET_INT32(P) *(reinterpret_cast<const uint32* &>(P))++
#define GET_INT16(P) *(reinterpret_cast<const uint16* &>(P))++
#define GET_INT8(P)  *(reinterpret_cast<const uint8 * &>(P))++

#define DO1_HW(CR,P) CR =  _mm_crc32_u8 (CR, GET_INT8 (P))
#define DO2_HW(CR,P) CR =  _mm_crc32_u16(CR, GET_INT16(P))
#define DO4_HW(CR,P) CR =  _mm_crc32_u32(CR, GET_INT32(P))
#define DO8_HW(CR,P) CR = (_mm_crc32_u64((uint64)CR, GET_INT64(P))) & 0xFFFFFFFF; 
```

注意最后一个宏语句有多么不同。缺乏统一性当然表明内在的定义没有得到合理的定义。虽然没有必要`(uint64)`在最后一个宏中进行显式转换，但它是隐式的并且确实会发生。反汇编生成的代码显示了 32->64 和 64->32 的代码，这两者都是不必要的。

换句话说，它是`_mm_crc32_u64`，*不是* `_mm_crc64_u64`，但他们已经实现了它，就好像它是后者一样。

如果我能得到`CRC32`正确的上述定义，那么我想将我的宏更改为

```
#define DO1_HW(CR,P) CR = CRC32(CR, GET_INT8 (P))
#define DO2_HW(CR,P) CR = CRC32(CR, GET_INT16(P))
#define DO4_HW(CR,P) CR = CRC32(CR, GET_INT32(P))
#define DO8_HW(CR,P) CR = CRC32(CR, GET_INT64(P)) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T01:36:41.027

提供的 4 个内在函数确实允许英特尔定义的 CRC32 指令的所有可能用途。指令输出始终为 32 位，因为指令被硬编码为使用特定的 32 位 CRC 多项式。但是，该指令允许您的代码一次向其提供 8、16、32 或 64 位的输入数据。一次处理 64 位应最大限度地提高吞吐量。如果仅限于 32 位构建，则一次处理 32 位是最好的。如果输入字节数是奇数或不是 4/8 的倍数，一次处理 8 或 16 位可以简化代码逻辑。

```
#include <stdio.h>
#include <stdint.h>
#include <intrin.h>

int main (int argc, char *argv [])
    {
    int index;
    uint8_t *data8;
    uint16_t *data16;
    uint32_t *data32;
    uint64_t *data64;
    uint32_t total1, total2, total3;
    uint64_t total4;
    uint64_t input [] = {0x1122334455667788, 0x1111222233334444};

    total1 = total2 = total3 = total4 = 0;
    data8  = (void *) input;
    data16 = (void *) input;
    data32 = (void *) input;
    data64 = (void *) input;

    for (index = 0; index < sizeof input / sizeof *data8; index++)
        total1 = _mm_crc32_u8 (total1, *data8++);

    for (index = 0; index < sizeof input / sizeof *data16; index++)
        total2 = _mm_crc32_u16 (total2, *data16++);

    for (index = 0; index < sizeof input / sizeof *data32; index++)
        total3 = _mm_crc32_u32 (total3, *data32++);

    for (index = 0; index < sizeof input / sizeof *data64; index++)
        total4 = _mm_crc32_u64 (total4, *data64++);

    printf ("CRC32 result using 8-bit chunks: %08X\n", total1);
    printf ("CRC32 result using 16-bit chunks: %08X\n", total2);
    printf ("CRC32 result using 32-bit chunks: %08X\n", total3);
    printf ("CRC32 result using 64-bit chunks: %08X\n", total4);
    return 0;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T13:29:46.317

> 有没有人有可移植的代码（Visual Studio 和 GCC）来实现后者？谢谢。

我和我的朋友编写了一个 c++ sse 内在函数包装器，其中包含 crc32 指令与 64 位 src 的更优选用法。

[http://code.google.com/p/sse-intrinsics/](http://code.google.com/p/sse-intrinsics/)

请参阅 i_crc32() 指令。（遗憾的是，英特尔的 sse 内在规范在其他指令上存在更多缺陷，请参阅[此页面](http://code.google.com/p/sse-intrinsics/wiki/PmovIntrinsicBug)以获取更多有缺陷的内在设计示例）

# crash - Android AdMob 在启动时崩溃应用

> ID：15752773
> 
> 赞同：0
> 
> 时间：2013-04-01T22:07:44.507
> 
> 标签：crash, admob

我不知道这段代码有什么问题，但 AdMob 会使应用程序崩溃。我做了一个只有 AdMob 的新项目，但它仍然崩溃。有任何想法吗？

我导入了 AdMob .jar 右键单击​​项目 > 属性 > Java 构建路径 > 添加外部 JAR 并添加了 GoogleAdMobAdsSdk...jar

布局xml：

```
<LinearLayout xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
android:id="@+id/linearLayout"
android:layout_width="fill_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<com.google.ads.AdView
    android:id="@+id/adView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    ads:adUnitId="12345678901234567890"
    ads:adSize="BANNER"
    ads:loadAdOnCreate="true" />
</LinearLayout> 
```

主Java：

```
package com.example.admob;

import android.app.Activity;
import android.os.Bundle;
import com.google.ads.AdRequest;
import com.google.ads.AdView;

public class MainActivity extends Activity {
AdView adView;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    AdRequest adR = new AdRequest();
    adR.addTestDevice("4df1559f64826fed");
    adView = (AdView)findViewById(R.id.linearLayout);
    adView.loadAd(adR);

}

@Override
public void onDestroy() {
    if (adView != null) {
        adView.destroy();
    }
    super.onDestroy();
} 
```

}

请帮忙 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:03:55.690

你的问题是：

```
adView = (AdView)findViewById(R.id.linearLayout); 
```

相反，你想要：

```
adView = (AdView)findViewById(R.id.adView); 
```

找到 AdView 而不是 LinearLayout。您的应用程序正在崩溃，因为您试图将 LinearLayout 转换为 AdView。

我建议您查看 Android 的 LogCat 输出，以便了解它为何抱怨。当您开始使用 Android 时，它将是一个有用的工具。您可以通过以下方式将其添加到 Eclipse 中：

```
Window -> Show View -> Other... -> Android/Logcat 
```

# ruby-on-rails - 确保 gem 与 Rails 3.x 和 4.0 一起工作的 gem 测试策略？

> ID：15752774
> 
> 赞同：10
> 
> 时间：2013-04-01T22:08:04.183
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing, gem, ruby-on-rails-4

我已经看到了一些虚拟 Rails 应用程序的示例（用于测试，因此它们通常处于测试或规范目录下）与 Appraisals gem 一起使用，据称这些 gem 可以与 Rails 3.x 和 Rails 4 一起使用，但它们看起来很老套，而且功能不全。有点意料之中，因为它是一个精简的科学怪人怪物，试图与 Rails 3 和 Rails 4 的各种版本兼容。

我提到了尝试进行此类测试的项目（截至 2013 年 3 月下旬），例如 less-rails 和 ember-rails，但是这种使用各种版本的 Rails 进行测试的方法似乎不是很干净，而且它是尝试调试非标准 Rails 应用程序是非常重要的，尤其是在 Rails 的 beta 版本中。

最好有一种更简洁的测试方法，它允许您为每个版本的 Rails 拥有一个完整的 Rails 应用程序，通过一些魔法进行测试并不难设置或维护，并且不需要非标准的路径黑客在地方等

使用各种版本的 Rails（至少包括最新的 Rails 3.1.x、3.2.x 和 4.0.0.beta1）测试 gem 的可用策略是什么，每种策略的优缺点是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T19:28:01.267

rails-core 列表中[相关线程](https://groups.google.com/forum/?hl=en&fromgroups=#!topic/rubyonrails-core/AS6uGQhf8y0)的一些选项：

## 选项 1：评估 gem 和单个 Rails 虚拟应用程序

Ken Collins 提到使用评估和 Rails “虚拟”应用程序：

> 我使用评估和 dummy_app 的组合针对 3.0、3.1、3,2 和 4.0 测试 minitest-spec-rails，根据它所测试的 rails 版本对自身进行最低限度的配置。一些链接：
> 
> [https://github.com/metaskills/minitest-spec-rails](https://github.com/metaskills/minitest-spec-rails) [https://github.com/metaskills/minitest-spec-rails/blob/master/test/dummy_app/init.rb](https://github.com/metaskills/minitest-spec-rails/blob/master/test/dummy_app/init.rb)

类似的技术用于[less-rails](https://github.com/metaskills/less-rails/blob/master/test/dummy_app/init.rb)、[ember-rails](https://github.com/emberjs/ember-rails/tree/master/test/dummy)和[high_voltage](https://github.com/thoughtbot/high_voltage)等。

我在[restful_json (v3.3.0) 中使用了与](https://github.com/rubyservices/restful_json)[high_voltage](https://github.com/thoughtbot/high_voltage)类似的设置，但使用了一个使用 4.0.0-beta1 创建的完整 Rails 应用程序，我对其进行了最低限度的修改，以便也可以与 Rails 3.1.x/3.2.x 一起使用。

*更新*：可能希望查看[许可](https://github.com/permitters/permitters)者以获取最新示例。

优点：相当简单。可以从命令行等针对各种 Rails 版本进行测试。可以是非常小的 Rails 应用程序配置，或者可以使用具有细微差别的完整 Rails 应用程序。

缺点：仍然为多个 Rails 版本重用相同的 Rails 应用程序，因此需要一些条件和不需要的配置。（某些文件可能存在不适用于其他版本的 Rails 等的问题，但似乎不是大问题。）

## 选项 2：Rails 版本作为环境变量，单个 Gemfile，单个 Rails 虚拟应用程序，依赖 travis-ci 在多个版本中进行测试

Steve Klabnik 提到了一个解决方案，它可以与单个 Gemfile、单个完整的 Rails 应用程序一起使用（即使在“虚拟”目录下，并且不使用评估 gem，依靠 travis-ci 进行测试：

> 我一直想更多地讨论这个话题，因为我最近一直在为我的一堆宝石做这件事。我有两个这样做：
> 
> 德雷珀：[https ://github.com/drapergem/draper](https://github.com/drapergem/draper)
> 
> LocaleSetter：[https ://github.com/jcasimir/locale_setter/](https://github.com/jcasimir/locale_setter/)
> 
> 基本上，我将整个 Rails 应用程序嵌入到 gem 中，然后通过 env vars 在 travis 上针对多个版本的 Rails 运行它。

优点：简单。不依赖于评估宝石（不是说这是一个问题，但可能更容易维护）。

缺点：据我所知，仍然为多个 Rails 版本重用相同的 Rails 应用程序。除非使用 travis-ci 或以干净的 gemset 开头的东西（即，如果在命令行下运行），当前不区分 gemset，因此较新的 gem 可能与较旧的 Rails 一起使用，等等，但史蒂夫说如果这会导致问题，你可以把锁吹走并重新捆绑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-01T10:45:16.777

还有第三种选择：使用多个 gemfile 和多个虚拟应用程序。

## 宝石文件

Bundler 有一个有用的选项，名为`--gemfile`. 有了它，你可以指定用什么文件代替`Gemfile`，它会在同名后生成一个锁文件：

```
bundle install --gemfile Gemfile.rails3
bundle install --gemfile Gemfile.rails4 
```

这将生成 Gemfile.rails3.lock 和 Gemfile.rails4.lock。因此，这些 Gemfile 可以是您的主要 Gemfile 强制 rails 版本的副本：

```
source "http://rubygems.org"
gemspec
gem "jquery-rails"
gem "rails", '~>4' 
```

## 使用虚拟应用程序中的 gemfile

然后你有两个虚拟应用程序，一个用于 rails-3，一个用于 rails-4。要在运行（例如）迁移时使用它们正确的 gemfile：

```
cd test/dummy_rails3
BUNDLE_GEMFILE=../../Gemfile.rails3 bundle exec rake db:migrate
cd ../dummy_rails4
BUNDLE_GEMFILE=../../Gemfile.rails4 bundle exec rake db:migrate 
```

是的，这可能是最糟糕的部分。但这主要是一次性设置。

## 使用 rake 中的 gemfile

要在运行测试时指示使用哪个版本，请在 Rakefile 中设置环境变量 BUNDLE_GEMFILE ：

```
#!/usr/bin/env rake

rails_version = ENV[ 'RAILS_VERSION' ] || '4'

if rails_version == '3'
  ENV[ 'BUNDLE_GEMFILE' ] = 'Gemfile.rails3'
else
  ENV[ 'BUNDLE_GEMFILE' ] = 'Gemfile.rails4'
end

begin
  require 'bundler/setup'
rescue LoadError
  puts 'You must `gem install bundler` and `bundle install` to run rake tasks'
end 
```

我更喜欢让用户传递 RAILS_VERSION 而不是直接传递 BUNDLE_GEMFILE，因为它更容易记住，我们可以只传递“3”或“4”。

## 从测试中使用正确的虚拟应用程序

最后，在 test_helper 中，根据请求的 rails 版本切换虚拟应用程序：

```
# Configure Rails Environment
ENV["RAILS_ENV"] = "test"

dummy_app = ENV[ 'RAILS_VERSION' ] == '3' ? 'dummy_rails3' : 'dummy_rails4'

require File.expand_path("../#{dummy_app}/config/environment.rb",  __FILE__)
require "rails/test_help" 
```

## 从您的用户角度

为了让您的用户运行测试，他必须通过使用 BUNDLE_GEMFILE 运行迁移任务来进行一次性设置，这并不那么性感。

但是一旦完成，用户就可以针对 rails-3 和 rails-4 运行测试，而无需在每次想要切换版本时生成 Gemfile，并且您可以在测试应用程序中拥有特定于版本的代码和配置，而无需在`if Rails.version >= '4'`任何地方放置语句.

运行规格：

```
RAILS_VERSION=3 bundle exec rake test
bundle exec rake test # rails-4 is the default in code I wrote 
```

[您可以在我的activerecord_any_of gem](https://github.com/oelmekki/activerecord_any_of)中看到此方法的示例。

# ruby-on-rails - Rails“嵌套”连接查询

> ID：15752777
> 
> 赞同：1
> 
> 时间：2013-04-01T22:08:12.323
> 
> 标签：ruby-on-rails, activerecord, syntax

在我的数据库中，我有以下表格和关系：

> **检查** `--has_many--<` **样品** `--has_many--<` **结果**

如果一个样本有一个或多个与之相关的结果，则该样本被视为“已分析”。如果对所有样品进行了分析，则检查被认为是“完整的”。我需要找到所有“不完整”的检查；即，至少有一个样品未被分析的所有检查。

我在 mysql 数据库中执行此操作的查询是

```
SELECT DISTINCT inspections.*
    FROM inspections
    JOIN samples s ON inspections.id = s.inspection_id
    LEFT OUTER JOIN results r ON r.`sample_id` = s.`id`
    WHERE r.id IS NULL 
```

我正在尝试将其转换为一个不错的 ActiveRecord`find`调用（除了`find_by_sql`），但我不确定如何将“嵌套”关联（术语？）的左连接转换为语法。

谁能帮我吗？顺便说一句，这是针对 Rails 2.3 应用程序的。

* * *

现在我有

```
Inspection.all(:select => "distinct inspections.*",
  :joins => "join samples on samples.inspection_id = inspections.id " +
    "left join results on results.sample_id = samples.id",
  :conditions => "results.id is null") 
```

它可以工作，但仍然看起来很粗糙并且太接近整个 sql 语句。还有比这更干净的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:22:42.623

`:include`在 find 语句中使用：

```
Inspection.find(:all, :include => {:samples => :results}) 
```

**编辑：**

我错过了`INNER JOIN`和`LEFT JOIN`之前的组合。我很抱歉。

虽然它不会生成相同的查询，但您可以添加额外的 where 检查以过滤掉没有任何样本的检查。

```
Inspection.find(:all,
    :select => "DISTINCT inspections.*",
    :include => {:samples => :results},
    :conditions => "results.id IS NULL AND samples.id IS NOT NULL") 
```

但是请注意，这种方法的性能不如使用`JOIN`s.

# c# - 带有平衡组的正则表达式，不仅匹配最外面的匹配

> ID：15752778
> 
> 赞同：2
> 
> 时间：2013-04-01T22:08:14.743
> 
> 标签：c#, .net, regex

我已经阅读了有关如何使用平衡组的多个来源，但所有示例都只匹配最外面的匹配项。是否可以使用一个 RegEx 匹配与模式匹配的所有子字符串？（平台为.NET 4.0）

这是我想要的一个例子：输入：

> a + ((b + (c + d)) + (e + f))

所需的匹配项（“教科书”RegEx 仅生成第一个匹配项）：

> *   ((b + (c + d)) + (e + f))
> *   (b + (c + d))
> *   (c + d)
> *   (e + f)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T23:05:43.613

这可以通过正则表达式在前瞻的帮助下完成。但这并不是最优的，因为它会为每场比赛“重新解析”一些括号组。使用真正的解析器只会读取/解析字符串一次，并且效率更高。

示例（[ideone](http://ideone.com/gQURUk)）：

```
using System;
using System.Text.RegularExpressions;

public class Example
{
   public static void Main()
   {
      var re = @"(?x)  # ignore spaces and comments
(?=                    # lookahead (zero width)
  (
    \(                 # first (
    (?:
      (?<open> \( )*   # open++
      [^()]+
      (?<-open> \) )*  # open--
    )+
    \)                 # last )
    (?(open)(?!))      # fail if unblanaced: open > 0
  )
)
\(                     # eat a (, to advance the match a char";

      var str = "a + ((b + (c + d)) + (e + f)) + (x + ((y) + (z)) + x)";

      var m = Regex.Matches(str, re);

      Console.WriteLine("Matched: ");
      foreach (Match i in m)
        Console.WriteLine(i.Groups[1]);
   }
} 
```

输出：

```
Matched: 
((b + (c + d)) + (e + f))
(b + (c + d))
(c + d)
(e + f)
(x + ((y) + (z)) + x)
((y) + (z))
(y)
(z) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T22:35:36.143

如果您使用的是 javascript，这里有一个适用于上述输入的示例，

```
var rgx = /\([a-z]+\s*\+\s*(\([a-z]+\s*\+\s*[a-z]+\s*\))\s*\)/g;
var str = 'a + (b + (c + d))';  
console.log(rgx.exec(str)); 
```

它不适用于像这样的更多变量，因为它只是一个简单的测试用例

```
a + (d + (c + e) + x) 
```

# constants - 使用 const 参数错误的 C++ ostream 运算符重载

> ID：15752791
> 
> 赞同：0
> 
> 时间：2013-04-01T22:09:14.383
> 
> 标签：constants, overloading, operator-keyword

我正在尝试将标准格式用于 ostream 运算符的非成员函数重载，但是当我对向量迭代器进行内部赋值时，它不适用于 const 第二个参数。当使用 const 参数时，编译器会给出以下错误：error: no match for 'operator=' in j = bus.owAPI::owBus::owCompList.std::vector...

我的类的相关部分如下：

```
class owBus{
    public:
        std::vector<owComponent> owCompList;    //unsorted complete list
        friend std::ostream& 
            operator<<(std::ostream& os, const owBus& bus );
}; 
```

使用非成员函数：

```
std::ostream& operator<<(std::ostream& os, const owBus& bus ) {
    //iterate through component vector
    std::vector<owComponent>::iterator j;
    for(j=bus.owCompList.begin(); j!=bus.owCompList.end(); j++) {
    /*
        os << (*j).getComponentID() << ": ";
        os << (*j).getComponentType() << std::endl;
    */
    }
    return os;
} 
```

如果从友元声明和函数描述中的第二个参数中删除了 const，则此方法可以正常工作，否则会出现上述错误。我没有为该类定义赋值运算符，但我不清楚为什么这会有所作为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:12:42.270

那是因为您正在尝试使用非常量迭代器来迭代 const 对象。将声明更改`j`为：

```
std::vector<owComponent>::const_iterator j; 
```

或者只使用 C++11 风格：

```
for (auto j : bus.owCompList) { 
```

# r - R中的ARIMA检查和验证

> ID：15752796
> 
> 赞同：-1
> 
> 时间：2013-04-01T22:09:52.360
> 
> 标签：r

我想从我的数据中验证和检查 ARIMA 模型，结果为 (0,1,1)x(0,1,1)_12。 ![在此处输入图像描述](https://i.stack.imgur.com/n88LG.png)

我想用 R 确定这种模型的参数，然后进行交叉预测。我已经申请：

```
parameters  <- arima(x1_1_12, c(0, 1, 1),
               seasonal = list(order = c(0, 1, 1), period = 12)))
Coefficients:
      ma1     sma1
  -0.4018  -0.5569
s.e.   0.0896   0.0731

sigma^2 estimated as 0.0002543:  log likelihood = 353.96,  aic = -701.92 
```

我想获得 p 值并估计模型参数，最后检查模型。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T23:38:35.227

您已经估计了模型参数 - 它们就在您的输出中！

至于 p 值，请参阅这篇文章：

[https://stats.stackexchange.com/questions/8868/how-to-calculate-the-p-value-of-parameters-for-arima-model-in-r](https://stats.stackexchange.com/questions/8868/how-to-calculate-the-p-value-of-parameters-for-arima-model-in-r)

至于“检查模型”——这取决于你的意思。

# wpf - WPF快捷键未触发

> ID：15752797
> 
> 赞同：0
> 
> 时间：2013-04-01T22:09:54.797
> 
> 标签：wpf, prism

我有一个 prism 委托命令设置，用于刷新我的应用程序中的数据。我也有使用委托命令关闭和关于窗口的设置快捷方式。

使用 F5 也不会触发视图模型中的刷新。如果我使用 Alt+F4，应用程序将关闭。但它不执行视图模型中的 CloseApplication 方法。以下代码中缺少什么来使用手势快捷方式执行 ViewModel？

用户控制：

```
<UserControl.InputBindings>
    <KeyBinding Gesture="ALT+F4" Command="{Binding CloseCommand}" />
    <KeyBinding Gesture="F5" Command="{Binding RefreshCommand}" />
</UserControl.InputBindings>
<DockPanel>
    <Menu DockPanel.Dock="Top">
        <MenuItem Header="_File">
            <MenuItem Header="E_xit" Command="{Binding CloseCommand}" InputGestureText="Alt+F4" />
            <MenuItem Header="Refresh" Command="{Binding RefreshCommand}" InputGestureText="F5" />
        </MenuItem>
        <MenuItem Header="_Help">
            <MenuItem Header="_About" Command="{Binding AboutCommand}" />
        </MenuItem>
    </Menu>
    <ToolBar ToolBarTray.IsLocked="True">
        <Button Content="Home" MinHeight="50" MinWidth="80" VerticalContentAlignment="Bottom" />
        <Button Content="Page 1" MinHeight="50" MinWidth="80" VerticalContentAlignment="Bottom" />
        <Button Content="Page 2" MinHeight="50" MinWidth="80" VerticalContentAlignment="Bottom" />
    </ToolBar>
</DockPanel> 
```

UserControl 的 ViewModel

```
public class TopMenuViewModel:NotificationObject
    {
        private DelegateCommand _closeCommand;
        private DelegateCommand _aboutCommand;
        private DelegateCommand _refreshCommand;

        public TopMenuViewModel()
        {
            _closeCommand = new DelegateCommand(CloseApplication);
            _aboutCommand = new DelegateCommand(ShowAboutWindow);
            _refreshCommand = new DelegateCommand(RefreshApplication);
        }

        private void ShowAboutWindow()
        {
            Console.WriteLine("Show about window");
        }

        private void CloseApplication()
        {
            Application.Current.Shutdown();
        }

        private void RefreshApplication()
        {
            Console.WriteLine("Refreshing..");
        }

        public ICommand CloseCommand 
        {
            get { return _closeCommand; }
        }

        public ICommand AboutCommand
        {
            get { return _aboutCommand; }
        }

        public ICommand RefreshCommand
        {
            get { return _refreshCommand; }
        }

    } 
```

如果我使用鼠标单击菜单或使用 Alt+x 或 Alt+A，则会调用视图模型方法。但没有使用我放入的 KeyBinding。感谢您的帮助。

# ruby-on-rails - 为什么我会收到 AppFog Rails 错误 310：暂存失败：暂存任务失败？

> ID：15752800
> 
> 赞同：1
> 
> 时间：2013-04-01T22:10:00.090
> 
> 标签：ruby-on-rails, ruby, appfog

我正在尝试将 Rails 应用程序推送到 AppFog 并且不断收到 301 错误。

它进入了 Staging，因此它显示在我的 AppFog 帐户中，但拒绝激活。尝试更新它成功，但有同样的问题，它不会激活并且只显示 404 错误。

这是消息文本：

```
$ af push RubyMongoGranny --runtime=ruby193
Would you like to deploy from the current directory? [Yn]: 
Pushing application 'RubyMongoGranny'...
Creating Application: OK
Binding Service [ruby_mongo_granny]: OK
Uploading Application:
  Checking for available resources: OK
  Processing resources: OK
  Packing application: OK
  Uploading (236K): OK   
Push Status: OK
Staging Application 'RubyMongoGranny': ..........Error 310: Staging failed: 'Staging task failed:
 Staging plugin failed: /opt/cloudfoundry/vcap/staging/lib/vcap/staging/plugin/gemfile_task.rb:325:in `log_and_raise_error': Error resolving Gemfile: Error parsing Gemfile: /tmp/d20130401-19438-h0d0st/Gemfile not found (RuntimeError)
from /opt/cloudfoundry/vcap/staging/lib/vcap/staging/plugin/gemfile_task.rb:50:in `specs'
from /opt/cloudfoundry/vcap/staging/lib/vcap/staging/plugin/gemfile_task.rb:103:in `gem_info'
from /opt/cloudfoundry/vcap/staging/lib/vcap/staging/plugin/gemfile_support.rb:86:in `gem_info'
from /opt/cloudfoundry/vcap/staging/lib/vcap/staging/plugin/rails3/plugin.rb:188:in `rails_version'
from /opt/cloudfoundry/vcap/staging/lib/vcap/staging/plugin/rails3/plugin.rb:199:in `precompile_assets'
from /opt/cloudfoundry/vcap/staging/lib/vcap/staging/plugin/rails3/plugin.rb:85:in `block in stage_application'
from /opt/cloudfoundry/vcap/staging/lib/vcap/staging/plugin/rails3/plugin.rb:76:in `chdir'
from /opt/cloudfoundry/vcap/staging/lib/vcap/staging/plugin/rails3/plugin.rb:76:in `stage_application'
from /opt/cloudfoundry/vcap/stager/bin/run_plugin:19:in `<main>' 
```

我的 gemfile 看起来像：

```
source 'https://rubygems.org'

gem 'rails'
gem 'mongo_mapper'
gem 'bson_ext'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  gem 'uglifier', '>= 1.0.3'
end

gem 'cloudfoundry-jquery-rails 
```

**==UPDATE==** 将 config.server_static_assets = false 更改为

```
config.server_static_assets = true 
```

并预编译我的资产？

```
bundle exec rake assets:precompile 
```

但它仍然给我同样的错误。

改变了

```
gem 'jquery-rails' 
```

至

```
gem 'cloudfoundry-jquery-rails' 
```

仍然没有成功

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:23:06.913

你有没有改变你的`config/environments/production.rb`

```
config.server_static_assets = false 
```

至

```
config.server_static_assets = true 
```

并预编译您的资产？

```
bundle exec rake assets:precompile 
```

此外，对于 Ruby 1.9，AppFog 需要对 jquery-rails gem 进行调整。删除或注释掉`gem 'jquery-rails'`并添加`gem 'cloudfoundry-jquery-rails'`，如下所示：

```
# gem 'jquery-rails'
gem 'cloudfoundry-jquery-rails' 
```

更多文档[在这里](https://docs.appfog.com/languages/ruby/rails)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:39:47.357

对于这个问题并没有真正想出一个好的解决方案。但是，我创建了一个全新的 Rails 应用程序，并将我的所有文件从旧的移动到新的。现在它将推送到 AppFog。

我做了目录的差异，但所有差异都只是日志文件、应用程序名称和自述文件。没有什么真正突出作为错误的可能原因。

# objective-c - 切换网络后网络操作失败

> ID：15752802
> 
> 赞同：0
> 
> 时间：2013-04-01T22:10:01.940
> 
> 标签：objective-c, macos, cocoa, corewlan

我正在使用 Core WLAN 框架在 WiFi 网络之间切换。我面临一个问题，从 WiFi 网络 1 切换到 WiFi 2 后，我必须等待 10 秒才能实例化任何网络活动。尽管在我等待 10 秒之前 WiFi 符号显示了正确的值。任何人都知道为什么会发生这种情况？以及对此的任何补救措施。

核心 WLAN 框架链接：

[http://developer.apple.com/library/mac/#documentation/Networking/Reference/CoreWLANFrameworkRef/_index.html](http://developer.apple.com/library/mac/#documentation/Networking/Reference/CoreWLANFrameworkRef/_index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T00:40:32.417

无法预测给定网络为您的系统分配 IP 地址、DNS 解析开始工作等需要多长时间。与其等待特定超时，不如使用[SCNetworkReachability](https://developer.apple.com/library/mac/#documentation/SystemConfiguration/Reference/SCNetworkReachabilityRef/Reference/reference.html) API 在何时采取措施系统可以访问给定的主机或服务。

示例代码：http: [//developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)

# java - 在 Sybase 数据库中使用 Spring 未获取单个输出值

> ID：15752810
> 
> 赞同：0
> 
> 时间：2013-04-01T22:10:18.050
> 
> 标签：java, spring, stored-procedures, sybase

**存储过程**

```
CREATE PROCEDURE Proc1
AS
BEGIN
DECLARE @retVal int,
    @Err    int,
    @Rows   int

SELECT @retVal = isnull(max(col1), 0) + 1 FROM Table1

BEGIN tran

INSERT INTO Table1(
    col1,
    col2

)
VALUES(@col1,@col2)

SELECT @Err = @@error, @Rows = @@rowcount

IF @Err != 0 or @Rows != 1
BEGIN
     rollback tran
     return -75
END

commit tran
return @retVal
END 
```

**Java 代码**

```
public class InsTable1 extends StoredProcedure implements Executable
{

    public InsTable1 (DataSource dataSource)
    {
        super(dataSource, "Proc1");

        super.declareParameter(new SqlOutParameter("retval", Types.INTEGER));

        super.compile();

    }

    public String executeQuery()
    {
        String retval = "";
        Map<String, Object> inParams = new HashMap<String, Object>(1);

        Map outParams = execute(inParams);

        retval = outParams.get("retval") == null ? "" : outParams.get("retval").toString().trim();
        return retval;
    }
} 
```

**错误**

> 可调用语句返回的输出参数没有应用程序注册的那么多

记录确实被插入。但即使我删除了输出参数声明，它也不起作用。这里可能的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:02:02.153

您需要获取不是输出参数的*返回值。*

声明参数时 add`withReturnValue()`确保您在 outParams 映射中获得关键“返回”。

我认为您的代码应如下所示：（未测试）

```
public class InsTable1 extends StoredProcedure implements Executable
{
    public InsTable1 (DataSource dataSource)
    {
        super(dataSource, "Proc1");
        super.declareParameter(new SqlOutParameter("retval", Types.INTEGER));
        super.withReturnValue();
        super.compile();
    }

    public String executeQuery()
    {
        String retval = "";
        Map<String, Object> inParams = new HashMap<String, Object>(1);
        Map outParams = execute(inParams);
        retval = outParams.get("return") == null ? "" : outParams.get("return").toString().trim();
        return retval;
    }
} 
```

# youtube - 有年龄限制的视频 - “媒体：评级”是否足够？

> ID：15752811
> 
> 赞同：1
> 
> 时间：2013-04-01T22:10:19.923
> 
> 标签：youtube, youtube-api

我正在使用 Youtube 的 API 来确定视频是否有年龄限制。我读过查看**media:rating**标签的值就可以做到这一点。

但是，在使用《[战地 3：结束游戏启动预告片》（前面有内容警告的视频）对其进行测试时，我发现](http://www.youtube.com/watch?v=wo0O-DCQJeo)[元数据](https://gdata.youtube.com/feeds/api/videos/wo0O-DCQJeo?v=2)中没有“media:rating”标签。

在确定视频的年龄限制时是否只是检查**媒体：评级不足？**还有其他标签要检查吗？还是我完全错过了其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:22:39.127

这是 API v2 中唯一公开的属性，其中包含有关限制的信息。我经常看到这样的视频，它们有年龄限制，但缺少 media:rating 标签（我猜公共前端很可能使用不同的、未公开的属性来确定它如何限制视频） . 您可能想要报告视频，以便开发人员可以调查为什么它没有该元数据。

相关链接：

[https://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/4Bzbr_uLkdA](https://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/4Bzbr_uLkdA)

# github - 与 github 存储库自动同步

> ID：15752812
> 
> 赞同：2
> 
> 时间：2013-04-01T22:10:20.467
> 
> 标签：github

无论如何我可以将我的机器设置为每次提交 github 中的 repo 时自动下拉 repo？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:26:29.640

您可以为此使用[crontab](http://en.wikipedia.org/wiki/Cron)条目。使用从 GitHub 触发的提交挂钩需要您的主机可以直接从 Internet 访问。

仅当您未在本地更改或提交任何内容时，快进拉入您已签出的存储库才有效。否则，您必须重置更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T22:21:02.043

如果是用于同步文档，请尝试[Sparkleshare](http://sparkleshare.org)。

# canvas - 创建由渲染器获取的（仅数据）节点并根据数据而不是节点自己绘制来做事是不好的做法吗？

> ID：15752814
> 
> 赞同：1
> 
> 时间：2013-04-01T22:10:32.440
> 
> 标签：canvas, renderer

我目前正在构建一个游戏引擎（这与 2d 渲染器更相关），我想知道是否有一个不好的做法，例如，有一个对象 Image 只保留图像的 url、宽度和高度。然后，当您渲染此图像时，渲染器将请求加载图像，并且渲染器也知道如何渲染图像。

为什么我选择了这样的方法？

*   目前我使用画布，但有时我想用标签渲染图像，而不是绘制到画布上。当然，我希望最终用户（使用 Image 类的人）完全抽象它。如果图像是在画布上绘制的，或者在标签中，ti 应该取决于渲染器，它认为什么具有更高的性能......

矩形也将具有 ax、y、宽度和高度，但它不知道如何绘制自己，渲染器绘制矩形。

这种方法可能有什么不好的地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:47:27.597

显然，这取决于。

你问的是一个比“我的节点应该自己渲染”更难的问题。

如果您想要更一般的问题“我应该如何设计我的对象/类？”的真正 OOP 答案，请查看[Bob 叔叔的 SOLID 设计原则](http://butunclebob.com/ArticleS.UncleBob.PrinciplesOfOod)。或者只是搜索[“SOLID Design”](https://www.google.com/?q=solid%20design)。

*在这种特定情况下，我会说拥有仅*代表该数据的对象和能够*绘制*这些对象的其他对象是一个完全有效的想法。通过这种方式，您可以将相同的“数据对象”用于该数据的多种不同类型的视图，例如您当前正在解释的。

您的想法是边界线 MVC 或 MVVM（原则上），因此并非没有优点。

> 我想知道是否是一种不好的做法，例如让一个对象 Image 只保留图像的 url、宽度和高度。

简单地说，没有。这本身并不是坏习惯。它被称为“图像”的事实很糟糕，因为这是用于创建`<img>`标签的现有“类”。最好为此选择一个不同的名称。

> 然后，当您渲染此图像时，渲染器将请求加载图像，并且渲染器也知道如何渲染图像。

这闻起来很复杂。该对象将需要处理加载图像时的回调，或者找到某种同步加载图像的方法（如果可能的话，这很糟糕）。它还需要知道当图像无法加载时该怎么做。我*可能会*考虑在前面提到的“数据对象”上使用*承诺*来帮助解决部分复杂性，因为任何使用数据对象的类很可能需要加载图像。

另一个观察：你使用术语“渲染器”就像它是一个包罗万象的东西，可以渲染任何东西，因为它的唯一责任就是能够做*这件事*。如果这就是你的想法，那么从长远来看，这不会有那么好的结果。需要有特定的对象知道如何以某种方式呈现其他纯数据对象。那些“视图”对象将知道如何使用某种“渲染”api 来绘制那些仅数据对象，但绘图 api 应该被认为是一种实用程序，或者是隐藏绘制原始对象复杂性的东西。不要将其视为您知道如何“绘制任何东西/一切”的“找人”。

> 矩形也将具有 ax、y、宽度和高度，但它不知道如何绘制自己，渲染器绘制矩形。

听起来不错。通过这样做，您允许以您需要的任何方式绘制矩形。例如，红色、蓝色、径向渐变、根据某个矩阵进行变换等。

> 这种方法可能有什么不好的地方？

任何东西......一切......什么都没有......但很可能是不必要的复杂性。*假设*复杂性*实际上是*不需要的。

有时我们只需要编写一些代码来找出答案。

只是不要浪费时间去思考“我将来需要使用哪些方法”或“我如何使它成为可能的最通用的解决方案”，因为你最终会花费大量时间无所作为。

# java - 打印树的路径

> ID：15752822
> 
> 赞同：-1
> 
> 时间：2013-04-01T22:11:13.083
> 
> 标签：java, tree, binary-tree, binary-search-tree, binary-search

```
 static void printAllPathsFromRootToLeaf (BinaryTree<Integer> tree, ArrayList<Integer> path)
{
    if (tree.isEmpty())
    {
        System.out.println("Tree is Empty");
        return;
    }
    path.add(tree.root());

    if (tree.left().isEmpty() && tree.right().isEmpty())
    {
        System.out.println(path);
        printSum(path);
        //return;
    }
    else
    {
        printAllPathsFromRootToLeaf(tree.left(),new ArrayList(path));
        printAllPathsFromRootToLeaf(tree.right(),new ArrayList(path));
    }
} 
```

打印路径时，它只打印最后一条路径，或者只打印我的树中的一条路径。有人知道为什么吗？？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:19:12.253

> 它只打印最后一条路径，或者它只打印我树中的一条路径

这是因为您已选择使用此行来执行此操作：

```
if (tree.left().isEmpty() && tree.right().isEmpty()) 
```

AKA 如果节点是叶节点，则打印它。

将此添加到 else 语句

```
else
{
    System.out.println(path); //Not exactly sure what printing an ArrayList like this does, but you say it is doing what you want.
    printSum(path);
    printAllPathsFromRootToLeaf(tree.left(),new ArrayList(path));
    printAllPathsFromRootToLeaf(tree.right(),new ArrayList(path));
} 
```

# sql - oracle转换为数字

> ID：15752827
> 
> 赞同：0
> 
> 时间：2013-04-01T22:11:36.920
> 
> 标签：sql, oracle, type-conversion

我正在尝试在 oracle 中将 193 转换为 1000000193。193 可以是任何小于 1000000000 的数字

这不起作用。

```
select to_char(193,'1000000000') from dual; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T22:17:01.870

i suppose this works.

select '1' || LPAD('193',9,'0') from dual

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T22:17:03.920

Why can't we add them?

```
select 193+1000000000 from dual; 
```

# html - 为 3 个 div 设置固定高度

> ID：15752829
> 
> 赞同：0
> 
> 时间：2013-04-01T22:11:44.087
> 
> 标签：html, css, header

我的代码标题有问题。标题分为 3 个不同的列，其中两个当前填充有文本和图像。（中心尚未填充）。

我注意到，当我减小浏览器的大小（放大、缩小）时，两个标题列开始脱离内容。右列保持固定到下面的内容，因为它填充了文本，但是中心列和填充较少的左列开始分离。

是否可以强制我的 3 列标题保持连接到下面的内容？我担心如果有人在大屏幕或视网膜显示器上查看该网站，它会脱离。

![原始大小的屏幕截图](https://i.stack.imgur.com/jjnU8.png)

![浏览器被强制缩小时的屏幕截图](https://i.stack.imgur.com/ohMOg.png)

```
<div class="col span_1_of_3 a">
<div class="col span_1_of_3 b">
<div class="col span_1_of_3 c"> 
```

CSS如下：

```
.span_3_of_3 {
width: 100%;

}

/* line 28, ../sass/test.scss */
.span_2_of_3 {
width: 66.1%;
height:100%;
}

/* line 32, ../sass/test.scss */
.span_1_of_3 {
width: 33.32%%;
height:100%;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:23:17.210

将 div 包装在父 div 中。然后浮动孩子并给他们一个相对宽度。

```
<div class="header">
    <div class="col span_1_of_3 a">
    <div class="col span_1_of_3 b">
    <div class="col span_1_of_3 c">
</div> 
```

CSS：

```
.header { width:100%; overflow:auto; }
.col { float:left; width:30% } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T22:15:13.053

You can use `display: table-cell` on each `.col` and `display: table` on parent (*). That will force your "cells" to have the same height and stay on the same row.
Though I wonder how you managed your witdths? Is it in percentage or `em`? You didn't include any CSS so it's impossible to figure.

(*) Add `table-layout: fixed` on this same parent if you want precise widths to be applied, otherwise the browser will also adapt to the content of each "cell".

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T22:15:47.347

Image re sizing will be out of control unless you set the Width/Height to percentage or relative values.

if you don't want to do this, simply set the `min-width` and `min-height` CSS Properties.

i prefer the relative sizing (ex. `width: 30%; text-align: left;`)

# php - Php / Html - 数据库断开连接

> ID：15752830
> 
> 赞同：0
> 
> 时间：2013-04-01T22:11:47.103
> 
> 标签：php, html, mysql

我有一个工作 php 代码，它简单地连接数据库列出数据并关闭它。我将此工作 php 代码嵌入到我的 html 中，但它不解析 html 的其余部分。列出数据库中的数据和php关闭标签“？>”后，它是简单的空白。我试图摆脱 php 中的“$db->disconnect();”，现在它可以工作了。

你知道为什么吗？我真的需要使用 $db->disconnect(); 每次？

谢谢

```
beginning of the html code
                    <ul>
                        <?php
                        $db = new mysqli('localhost', 'root', 'root', 'troy');

                        if (mysqli_connect_errno()) {

                           printf("Can't connect to MySQL Server. Errorcode: %s\n", mysqli_connect_error());

                           exit;

                        }

                        $query = "SELECT * FROM platters";

                        $result = $db->query($query);

                        while($row = mysqli_fetch_array($result)) {
                             echo "<li>" . $row['name'] . "</li>";
                        } 
                        $db->disconnect();
                        ?>
                    </ul>
rest of the html code 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:27:40.450

`$db->disconnect();`未在文档下列出，这是您创建的自定义函数吗？

您应该执行以下操作，而不是*断开*整个数据库连接：

`$result->close();`

这将释放当前查询，并使您能够在整个 PHP 脚本中执行进一步的连接。

仅当您完成该脚本的 SQL 连接后，才完全关闭与数据库的连接

* * *

**编辑**

重新阅读您的问题后，`$db->disconnect();`不是 MySQli 的功能。在此处查看整个文档：

[http://php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php)

你应该使用：

`$db->close();`关闭与数据库的当前连接（如果在您的数据库变量上使用）

[http://www.php.net/manual/en/mysqli.close.php](http://www.php.net/manual/en/mysqli.close.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T22:27:50.300

在命令行上运行它

```
php test.php 
```

并查看错误消息

> PHP 致命错误：在第 28 行的 test.php 中调用未定义的方法 mysqli::disconnect()

这就是为什么它输出数据库中的所有内容，但忽略该行之后的所有内容的原因。

当您删除该`$db->disconnect();`语句时，错误就消失了，PHP 脚本可以一直运行到最后。

# php - MySQL/PHP/PHPMydamin 错误

> ID：15752833
> 
> 赞同：2
> 
> 时间：2013-04-01T22:11:53.820
> 
> 标签：php, mysql

我对 PHP 和 MySql 非常陌生，像大多数初学者一样，我正在尝试利用我正在学习的东西，所以我正在尝试制作一个简单的登录/注销系统。

我已经下载了 WAMP，在 PHPMyAdmin 和我的表等中创建了我的数据库，但是我无法让我的 PHP 代码识别数据库中的数据，我只是得到“查询失败”！我当然可以连接数据库，但我没有相信问题出在数据库上，但我的登录文件！我看过很多不同的教程，但我仍然无法让它工作。如果有人能指出我正确的方向，我将不胜感激！

如果有人想玩我的代码，那我在数据库中的字段是：id、用户名、密码、名字、姓氏（id 是自动递增的主键）

我的登录文件是

```
 <?php
    //require 'core.inc.php';
    //echo $current_file;

    if (isset($_POST['username'])&& isset ($_POST['password'])){
        $username= $_POST['username'];
        $password= $_POST['password'];

        if (empty ($username)&&empty ($password)){
            echo 'supply username and password';
        }

        $query = "SELECT * FROM 'test1' WHERE 'username'='$username'AND 'password'='$password'";
        $result= mysql_query($query);

    if($result) {
            if(mysql_num_rows($result) > 0) {
                //Login Successful
                session_regenerate_id();
                $member = mysql_fetch_assoc($result);

                $_SESSION['SURNAME_NAME'] = $member['username'];
                $_SESSION['SESS_ID'] = $member['password'];
                session_write_close();

                exit();
            }else {
                //Login failed
                echo 'user name and password not found';
                $errflag = true;
                if($errflag) {
                    $_SESSION['ERRMSG_ARR'] = $errmsg_arr;
                    session_write_close();

                    exit();
                }
            }
        }else {
            die("Query failed");
        }

    }

?>

    <form method="POST">
    Username: <input type = "text" name="username"> Password: <input type ="password" name="password">
    <input type="submit" value="Log in">
    </form> 
```

我的连接数据库文件是（我故意删除了我的密码）：

```
// assign the host user name and database name to variables
$db_host = "localhost";
$db_username = "";
$db_password = "";
$db_name = "";

session_start();
// connect to database, if not send error message
mysql_connect("$db_host", "$db_username", "$db_password") or die ("Could not connect to MySQL.");
// check database exists, if not send error message
mysql_select_db("$db_name") or die ("No database.");
// if sucessful connection etc print out the following!
//echo("Successful connection established.");
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:48:30.460

```
$query = "SELECT * FROM test1 WHERE username = '$username' AND password = '$password'"; 
```

或者

```
$query = "SELECT * FROM `test1` WHERE `username` = '$username' AND `password` = '$password'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T23:02:03.590

很多问题！这是一个正确的固定代码：

```
ini_set('display_errors', 1);
$database="******";
$host="localhost";
$table1="install_crawler";
$data_username="**********";
$data_password="*********";
$linkos = mysql_connect("$host", "$data_username", "$data_password") or die('no connection -'.mysql_error());
mysql_select_db("$database") or  die('no connection -' .mysql_error());
session_start();

if (isset($_POST['username'])&& isset ($_POST['password'])) {
            $username= mysql_real_escape_string($_POST['username']);
            $password= mysql_real_escape_string($_POST['password']);
            if (empty ($username)&&empty ($password)) { echo 'supply username and password <br />'; } 
            else {
                    $query = "SELECT * FROM $table1 WHERE username='$username' AND password='$password'";
                    $result = mysql_query($query) or die ( "Query problem!".mysql_error());         
            }
        }

if(isset($result)) {
    $member = mysql_fetch_row($result);
    if(isset($member[0])) //0 - is the first col of the table, 1 is the second etc.... 
        {
            //Login Successful - do your stuff - call your functions.
            echo "SUCCESS LOGIN!".$member[0];
            exit;
        }
        else
        {
            //Login failed - do your stuff - call your functions.
            echo 'User-name Or Password NOT Correct! Try agian: <br />';
            echo '<form method="POST">
                Username: <input type = "text" name="username"> Password: <input type ="password" name="password">
                <input type="submit" value="Log in">
                </form>';
            exit;
        }
    }
    else 
    {
    echo '<form method="POST">
        Username: <input type = "text" name="username"> Password: <input type ="password" name="password">
        <input type="submit" value="Log in">
        </form>';
    } 
```

笔记：

1.  你应该使用 *.mysql_error()*。并将其添加到您的 DIE() 语句中。
2.  键入表名和列时不要使用单引号。
3.  检查查询是否正常使用： *$result = mysql_query($query) 或 die ("Query problem!".mysql_error());*
4.  使用 mysql_real_escape_string() 来避免和转义 SQL 特殊字符。（重要的）。

请参阅编辑后的代码中的其余部分。

玩得开心！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T22:16:57.640

Change `die('....');` with `echo mysql_errno() . ": " . mysql_error(); exit();` to see whats going on. Also do not use this example code in your real application. It's not secure since it doesn't validate input.

At least do something like:

```
$sql = "SELECT * FROM bla WHERE x = '".mysql_real_escape_string($_POST['x'])."'"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-13T21:48:17.807

```
$query = "SELECT * FROM test1 WHERE username='".$username."'AND password='".$password."'";
$result= mysql_query($query); 
```

我总是把我的变量从字符串中分离出来，然后像上面一样将它们附加在一起。

使用上述方法后，您可能希望从以下测试开始

```
if($result) echo "success";
else echo mysql_error(); 
```

那么你的mysql代码会很合理。如果您使用 sql 功能创建 sql 语句，我将向您指出 PHPMyAdmin 有一个创建 php 代码按钮的方向。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-01T22:16:49.700

I noticed that your 'form' tags in the example do not contain an Action parameter, perhaps this is a problem.. If it is intentional then disregard.

You should put `action="siteexample.php"` as the page where the forum data gets processed.

Does this help?

# python - 如何配置 SciTE 使用 python 2？

> ID：15752834
> 
> 赞同：1
> 
> 时间：2013-04-01T22:11:55.527
> 
> 标签：python, python-2.7, scite

默认情况下，SciTE 使用系统中安装的任何 python 版本。我有 python3 作为默认和 python2.7，当我按下 F5 时我需要在 SciTE 中运行。

如何配置 SciTE 使用 python 2？

![在此处输入图像描述](https://i.stack.imgur.com/aVJv2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T22:30:04.613

从菜单中选择“选项 > 打开 python.properties”，这将打开与 scite python 首选项关联的文件。查找此内容（假设您使用 Linux 的屏幕截图）：

```
if PLAT_GTK
    command.go.*.py=python -u "$(FileNameExt)" 
```

并将单词更改`python`为命令来识别您想要的 python 版本。

# sql - 用于比较不同行中的日期字段并组合结果的 SQL 代码

> ID：15752837
> 
> 赞同：-1
> 
> 时间：2013-04-01T22:12:15.900
> 
> 标签：sql, oracle, crystal-reports

我需要正确的 Oracle SQL 代码帮助来组合水晶报表命令对象的行。这是我正在处理的更大查询的一部分，并且在过去几天中被卡住了。

例如。如果列如下所示

```
PatId   In_time                     Out_time  
151     01/01/2012 07:00:00 am      01/01/2012 10:00:00 am
151     01/01/2012 11:00:00 am      01/02/2012 08:00:00 am 
151     01/02/2012 11:00:00 am      01/02/2012 01:00:00 pm
151     01/03/2012 08:00:00 am      01/03/2012 03:00:00 pm
151     01/06/2012 03:30:00 pm      01/09/2012 07:00:00 am
167     01/03/2012 01:30:00 pm      01/09/2012 07:00:00 am
167     01/13/2012 03:30:00 pm      01/14/2012 07:00:00 am
167     01/14/2012 11:30:00 am      01/15/2012 11:30:00 am
167     01/18/2012 12:00:00 pm      01/19/2012 03:00:00 am 
```

在一个 PatId 中，代码应该将一行的 Out_time 与下一行的 In_time 进行比较，并检查时间间隔是否大于 48 小时。如果不是，则将其视为同一访问的一部分。我希望每个 PatID 和访问一个结果行，最小（In_time）和最大（Out_time）。访问（结果行）本身的时间跨度可能大于 48 小时。

对于此示例，对于 PatId 151，第一行的 out_time 和第二行的 In_time 之间的时间差小于 48 小时。第二行的 Out_time 和第三行的 In_time 以及第三行和第四行之间的时间差也小于 48 小时。在此之后，第 4 行的 Out_time 和第 5 行的 In_time 之间的差距大于 48 小时。PatId 151 的结果应如下所示，EmpId 167 的结果相同，链接应继续，直到发现大于 48 小时的间隙。

所以上表的结果应该显示为，

```
PatId     In_time                          Out_time  
151     01/01/2012 07:00:00 am      01/03/2012 03:00:00 pm
151     01/06/2012 03:30:00 pm      01/09/2012 07:00:00 am
167     01/03/2012 01:30:00 pm      01/09/2012 07:00:00 am
167     01/13/2012 03:30:00 pm      01/15/2012 11:30:00 am
167     01/18/2012 12:00:00 pm      01/19/2012 03:00:00 am 
```

我无法获得有关如何比较和合并行的逻辑。

提前致谢， 阿比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:04:47.580

减去时间的一般示例 - 复制/粘贴以查看输出。此示例将为您提供两个日期之间的小时、分钟、秒差异。基本公式是 (end_date - start_date) * 86400（24 小时内的秒数）...：

```
SELECT trunc(mydate / 3600) hr
     , trunc(mod(mydate, 3600) / 60) mnt
     , trunc(mod(mydate, 3600) / 60 /60) sec
  FROM 
  (
   SELECT (to_date('01/03/2012 10:00:00', 'mm/dd/yyyy  hh24:mi:ss') -
           to_date('01/01/2012 07:00:00', 'mm/dd/yyyy  hh24:mi:ss')) * 86400 mydate
     FROM dual
  )
 /

 HR | MNT | SEC
 ---------------
 51 |  0  |  0 
```

您需要检查您的示例和逻辑。我无法理解需要与什么进行比较...

# oracle - 触发器 - 您可以根据事务中设置的列有条件地执行吗？

> ID：15752840
> 
> 赞同：0
> 
> 时间：2013-04-01T22:12:34.963
> 
> 标签：oracle, triggers, oracle11g

如果更新语句中未指定列，是否控制触发器仅设置值？例如，如果我在表/列上执行以下更新语句 -

```
update sampleTable set firstname='test', lastname='me' where id='id1'; 
```

在上述情况下，由于 firstname 和 lastname 列都已更新，因此我不希望在更新触发器之前执行任何操作。但是，如果执行以下语句 -

```
update sampleTable set firstname='test' where id='id1'; 
```

在上述情况下，由于 lastname 列未更新，我希望触发器将 lastname 设置为 null。

我试过以下 -

```
Create or Replace Trigger testTrigger before update of firstname on sampleTable for each row
begin
   if :old.firstname != :new.firstname and :old.lastname = :new.lastname then
      :new.lastname = null;
   end if;
end; 
```

这背后的想法是，如果我执行上面的第一个更新语句，并且新的姓氏与以前的姓氏值不同，那么 :old 和 :new 的值将不同，因此 if 条件将不满足并且姓氏不会设置为空。当然我错了，在两个更新语句中，它仍然最终将 lastname 更新为 null。

我在这里有什么选择？我正在使用 Oracle 11g。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T23:09:22.147

如果您希望在`lastname`更新语句不引用此列的情况下设置为 null，则可以使用该`UPDATING()`函数。

```
Create or Replace Trigger testTrigger 
before update of firstname on sampleTable 
for each row
begin
   if not updating('LASTNAME') then
      :new.lastname := null;
   end if;
end;
/ 
```

# c# - 计算掷骰子的频率

> ID：15752843
> 
> 赞同：0
> 
> 时间：2013-04-01T22:12:43.887
> 
> 标签：c#

我为 C# windows 窗体项目编写了一个事件处理程序，该项目模拟 100 次两个骰子的掷骰，并为每个掷骰返回两个骰子的总和。代码对这些总和中的每一个做了三件事，将其放在名为“rollDisplay”的 RichTextBox 中，将总和写入文本文件，并将总和添加到称为“rolls”的整数列表中。所有这些都工作正常，但现在我需要计算每个和的频率，并在 ListBox 中显示这些频率。正如下面的代码所示，我使用了 11 个不同的计数器变量和 11 个不同的字符串来添加到 ListBox。我在下面的工作，但它真的很丑陋，在我看来这是一种非常低效的方法。

我的问题是。任何人都可以提出一种更清洁的方法吗？作业要求我有 11 个单独的计数器来识别掷骰子的频率，所以我不能像其他几个问题所建议的那样使用 Linq，但我真的很不确定这是完成什么的最佳方法我需要。

```
private void Roll_Click(object sender, EventArgs e)
    {
        int roll = 0, hitTwo = 0, hitThree = 0, hitFour = 0, hitFive = 0, hitSix = 0, hitSeven = 0, hitEight = 0,
            hitNine = 0, hitTen = 0, hitEleven = 0, hitTwelve = 0;
        String freq1, freq2, freq3, freq4, freq5, freq6, freq7, freq8, freq9, freq10, freq11;
        StreamWriter file = new StreamWriter("dicerolls.txt", true);
        List<int> rolls = new List<int>();

        for (int i = 0; i < 100; i++)
        {
            dieUno.setSide(dieUno.roll());
            dieDuo.setSide(dieDuo.roll());

            int diceTotal = dieUno.getSide() + dieDuo.getSide();
            rolls.Add(diceTotal);
            rollDisplay.AppendText(diceTotal.ToString() + "\u2028");

            try
            {
                file.WriteLine(diceTotal.ToString());
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        }

        file.Close();  

        for (int i = 0; i < rolls.Count; i++)
        {
            roll = rolls[i];

                if(roll==2)
                { hitTwo++; }
                else if(roll==3)
                { hitThree++; }
                else if(roll==4)
                { hitFour++; }
                else if(roll==5)
                { hitFive++; }
                else if(roll==6)
                { hitSix++; }
                else if(roll==7)
                { hitSeven++; }
                else if(roll==8)
                { hitEight++; }
                else if(roll==9)
                { hitNine++; }
                else if (roll == 10)
                { hitTen++; }
                else if (roll == 11)
                { hitEleven++; }
                else if (roll == 12)
                { hitTwelve++; }
        }

        freq1 = " 2 Occurs: " + hitTwo + " times"; freq2 = " 3 Occurs: " + hitThree + " times"; freq3 = " 4 Occurs: " + hitFour + " times";
        freq4 = " 5 Occurs: " + hitFive + " times"; freq5 = " 6 Occurs: " + hitSix + " times"; freq6 = " 7 Occurs: " + hitSeven + " times";
        freq7 = " 8 Occurs: " + hitEight + " times"; freq8 = " 9 Occurs: " + hitNine + " times"; freq9 = " 10 Occurs: " + hitTen + " times";
        freq10 = " 11 Occurs: " + hitEleven + " times"; freq11 = " 12 Occurs: " + hitTwelve + " times";

        frequency.Items.Add(freq1); frequency.Items.Add(freq2); frequency.Items.Add(freq3); frequency.Items.Add(freq4); frequency.Items.Add(freq5);
        frequency.Items.Add(freq6); frequency.Items.Add(freq7); frequency.Items.Add(freq8); frequency.Items.Add(freq9); frequency.Items.Add(freq10);
        frequency.Items.Add(freq11);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:49:10.037

`Roll_Click`做太多的工作。

首先，创建一个`GatherSamples`函数。

```
int[] GatherSamples()
{
    var rolls = new List<int>();

    // roll dice ...

    return rolls.ToArray();
} 
```

然后一个`DisplayRolls`方法

```
void DisplayRolls(int[] rolls)
{
     // output to your control      
} 
```

...和一种`WriteToDisk`方法

```
void WriteToDisk(int[] rolls, string file)
{
    using (var writer = new StreamWriter(file))  // research C# using if you don't understand this
    {
        ...
    }
} 
```

...然后进行频率分析

```
string[] AnalyzeRolls(int[] rolls)
{
    // though I don't approve of 11 counters, use them here

    return new [] { "2 occurs " ... };
} 
```

...然后这样称呼它：

```
foreach(var analysis in AnalyzeRolls(rolls))
{
    frequency.Items.Add(analysis);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T23:02:30.397

干得好。一个 6 面骰子滚轮。它对用户界面一无所知。它几乎没有公开其内部实现。

```
class SixSidedDiceRoller
{
  private static readonly RandomNumberGenerator rng = RandomNumberGenerator.Create();
  private SortedDictionary<int,int> frequencyTable;
  private List<Tuple<int,int,int>> rollHistory;

  public int Count { get { return rollHistory.Count; } }

  public IEnumerable<Tuple<int , int , int>> RollHistory
  {
    get { return rollHistory.AsReadOnly(); }
  }

  public IEnumerable<Tuple<int,int>> FrequencyTable
  {
    get
    {
      return frequencyTable.Select(
        x => new Tuple<int,int>(x.Key,x.Value)
        ) ;
    }
  }

  public SixSidedDiceRoller()
  {

    rollHistory = new List<Tuple<int , int , int>>();

    // initialize the frequency table
    for ( int i = 2 ; i <= 12 ; ++i )
    {
      frequencyTable[i] = 0;
    }

    return;
  }

  public int RollDice()
  {
    int d1 = RollDie();
    int d2 = RollDie();
    int n  = d1 + d2;

    rollHistory.Add( new Tuple<int , int , int>( d1 , d2 , n ) );
    ++frequencyTable[n];

    return n;
  }

  private int RollDie()
  {
    byte[] octets = new byte[1];
    rng.GetBytes( octets );
    int die = 1 + ( octets[0] % 6 );
    return die;
  }

} 
```

将它连接到 Windows 应用程序、wpf 应用程序、Web 应用程序、控制台应用程序等应该不会太难。

# knockout.js - 如何将 Durandal 过渡应用于元素而不是视图？

> ID：15752857
> 
> 赞同：2
> 
> 时间：2013-04-01T22:13:37.727
> 
> 标签：knockout.js, single-page-application, durandal

我有一个用户可以添加/删除的元素列表。有人可以提供一个示例，说明如何将过渡应用于这些单独的元素，而不是整个视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T02:45:20.393

这不是 Durandal 特有的，它是 Knockout 可以处理的：

[http://knockoutjs.com/examples/animatedTransitions.html](http://knockoutjs.com/examples/animatedTransitions.html)

忽略那些让您在 Knockout 之外摆弄 DOM 的答案。这就是KO可以帮助你的。

一个例子：

```
ko.bindingHandlers.animateForeach = {
        init: function(element, valueAccessor, allBindingsAccessor, viewModel) {
            return ko.bindingHandlers.foreach.init(element, valueAccessor, allBindingsAccessor, viewModel)
        },
        update: function(element, valueAccessor, allBindings, viewModel, context) {
            var value = ko.utils.unwrapObservable(valueAccessor())
            var newAccessor = function() {
                return {
                    data: value,
                    afterAdd: function(node) {
                        $(node).hide()
                        $(node).slideDown('fast')
                    },
                    beforeRemove: function(node) {
                    if (node.nodeType === 1) {
                        $(node).slideUp('fast', function() {
                            $(this).remove()
                        })
                    }
                }
                }
            }
            return ko.bindingHandlers.foreach.update(element, newAccessor, allBindings, viewModel, context)
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T02:18:08.710

假设您想使用同位素来添加或删除图像，然后您激活同位素内部

```
function viewActivate(){
    $("#container").isotope({
        layoutMode: "masonry",
        itemSelector: ".photo"
    });
} 
```

您想用来添加或删除图像的任何 JavaScript 回调

```
function addRemoveImages(newimage)
{
    $("#container").isotope('insert', newimage); //This will cause isotope to re-animate only the content not the view 
} 
```

# android - Permission request screen on android with App Engine backend

> ID：15752858
> 
> 赞同：3
> 
> 时间：2013-04-01T22:13:38.330
> 
> 标签：android, google-app-engine, authentication, authorization, google-play-services

I am using app engine as backend for an android app. I want users of my app to authenticate with their google accounts and on the backend, I use the [users service](https://developers.google.com/appengine/docs/python/users/) to access the user details.This approach is described [here](http://blog.notdot.net/2010/05/Authenticating-against-App-Engine-from-an-Android-app). The very first time user installs the android app, he gets a screen like the one shown below. The screen displays user's email, android app name (both redacted) and my app engine app shows up as "Google App Engine". Is there a way to customize this name? Because it can be very confusing to the user as they would not know what "Google App Engine" is.

![Screen shown first time user tries to get authentication token](https://i.stack.imgur.com/j3EAq.png)

# google-chrome - Multi-Window Chrome Packaged App?

> ID：15752860
> 
> 赞同：1
> 
> 时间：2013-04-01T22:13:41.640
> 
> 标签：google-chrome, multi-window

Hello I'm new to chrome packaged apps. How would I create a button image, that when clicked launches a new chrome packaged app window displaying a local html page.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T02:52:25.327

在您的第一个 html 页面中，只需添加按钮。此外，该页面将需要引用 Javascript 文件来添加事件处理程序：

```
<button id="thebutton">Open a New Window</button>
<script src="script.js"></script> 
```

然后，您将事件处理程序添加到`script.js`（或您为脚本页面命名的任何名称）中的按钮：

```
document.querySelector('#thebutton').addEventListener('click', function() {
  chrome.app.window.create('new.html', {"width":300, "height": 200});
}); 
```

如果您需要对该窗口进行沙盒处理（例如，不使用默认的内容安全策略），您需要指定该页面在以下位置进行沙盒处理`manifest.json`：

```
"sandbox": {
  "pages": ["new.html"]
} 
```

`new.html`加载后，它将在其自己的源中加载，该源无法访问打开的窗口或高级 API 。如果您需要沙盒页面使用高级 API 执行某些操作，您可以使用`postMessage`和接收消息以与仍在 CSP 中的窗口进行通信。

# facebook - 我如何通过 Facebook Graph API 知道一个 id 是属于用户还是属于页面？

> ID：15752869
> 
> 赞同：3
> 
> 时间：2013-04-01T22:14:41.283
> 
> 标签：facebook, facebook-graph-api

我有一个 ID，我想知道它是属于页面还是属于用户。我怎么知道？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T22:37:14.093

通过 API 访问该 ID，`metadata`参数设置为 true，响应中的“类型”字段将告诉您它是什么类型的对象

例如

`https://graph.facebook.com/<my user id>?metadata=1`

```
{
   "id": "1234567",
   "name": "xxxxxx",
   "first_name": "xxx",
   "last_name": "xxx",
   "username": "xxx.xxxxx",
   "gender": "male",
   "locale": "en_US",
   "type": "user"
   //removed other metdata 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T21:16:45.753

[https://graph.facebook.com/](https://graph.facebook.com/) ?metadata=1

{ “id”：“1234567”，“姓名”：“xxxxxx”，“名字”：“xxx”，“姓氏”：“xxx”，“用户名”：“xxx.xxxxx”，“性别”：“男性” , "locale": "en_US", "type": "user" //删除其他元数据

# c++ - LPWSTR 到 wstring c++

> ID：15752871
> 
> 赞同：3
> 
> 时间：2013-04-01T22:14:45.353
> 
> 标签：c++, wstring

我想从 .dll 字符串表中读取 utf-8 测试。像这样的东西

```
LPWSTR nnW;
LoadStringW(hMod, id, nnW, MAX_PATH); 
```

之后我想将其转换`LPWSTR nnW`为`std::wstring nnWstring`. 我试过这样：LPWSTR nnW; LoadStringW(hMod, id, nnW, MAX_PATH);

```
const int length = MultiByteToWideChar(CP_UTF8,
                                       0,   // no flags required
                                       (LPCSTR)nnW,
                                       -1,  // automatically determine length
                                       NULL,
                                       0);

std::wstring nnWstring(length, L'\0');

if (!MultiByteToWideChar(CP_UTF8,
                         0,
                         (LPCSTR)nnW,
                         -1,
                         &nnWstring[0],
                         length))

MessageBoxW(NULL, (LPCWSTR)nnWstring.c_str(),  L"wstring", MB_OK | MB_ICONERROR); 
```

之后在 MessageBoxW 中只显示第一个字母。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T22:17:33.000

无需转换或复制。

```
std::wstring nnWString(MAX_PATH, 0);
nnWString.resize(LoadStringW(hMod, id, &nnWString[0], nnWString.size()); 
```

注意：您的原始代码会导致未定义的行为，因为它使用未初始化的指针进行写入。肯定不是你想要的。

这是另一个变体：

*   [http://msmvps.com/blogs/gdicanio/archive/2010/01/05/stl-strings-loading-from-resources.aspx](http://msmvps.com/blogs/gdicanio/archive/2010/01/05/stl-strings-loading-from-resources.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T23:29:07.583

> 我想从 .dll 字符串表中读取 utf-8 测试。像这样的东西

通常，Windows 中的字符串表是 UTF-16。您正在尝试将 UTF-8 数据合二为一。UTF-8 数据被视为“扩展”ASCII，因此每个字节都被扩展为两个字节，它们之间有零字节。

您可能应该将 UTF-16 数据直接放入字符串表中。

如果必须在资源中存储 UTF-8 数据，可以将其放入 RCDATA 资源中，并使用较低级别的资源函数将数据取出。然后，您必须将其从 UTF-8 转换为 UTF-16 才能将其存储在 wstring 中。

# java - 整数的 JTextfield 侦听器

> ID：15752876
> 
> 赞同：1
> 
> 时间：2013-04-01T22:15:18.350
> 
> 标签：java, swing, jtextfield, documentlistener

我很难找到一个解决方案来编写一个监听器，`JTextField`专门只允许整数值（`String`不允许）。我已经在 Document Listener 上尝试过[这个推荐的链接](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)，但我不知道调用什么方法等。

我以前从未使用过这种类型的侦听器，所以谁能解释我如何在 a 上编写一个侦听器`JTextField`以只允许可以接受的整数值？

基本上在我单击 a 之后`JButton`，在将数据提取到变量上之前，Listener 将不允许处理它，直到输入一个整数。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T22:23:51.117

您不需要侦听器，您想从 中获取文本`JTextField`并测试它是否为`int`.

```
if (!input.getText().trim().equals(""))
{
    try 
    {
        Integer.parseInt(myString);
        System.out.println("An integer"):
    }
    catch (NumberFormatException) 
    {
        // Not an integer, print to console:
        System.out.println("This is not an integer, please only input an integer.");
        // If you want a pop-up instead:
        JOptionPane.showMessageDialog(frame, "Invalid input. Enter an integer.", "Error", JOptionPane.ERROR_MESSAGE);
    }
} 
```

您也可以使用正则表达式（有点矫枉过正，但它有效）：

```
boolean isInteger = Pattern.matches("^\d*$", myString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T22:22:25.870

您不需要文档侦听器。您希望在提交/确定按钮上有一个 ActionListener。

确保使用 JTextField 的句柄创建侦听器，然后将此代码放入`actionPerformed`调用中：

```
int numberInField;
try {
  numberInField = Integer.parseInt(myTextField.getText());
} catch (NumberFormatException ex) {
  //maybe display an error message;
  JOptionPane.showMessageDialog(null, "Bad Input", "Field 'whatever' requires an integer value", JOptionPane.ERROR_MESSAGE);
  return;
}
// you have a proper integer, insert code for what you want to do with it here 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T01:06:07.647

> 我如何在 JTextField 上编写一个侦听器以只允许可以接受的整数值？

您应该使用[JFormattedTextField](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html)或[Document Filter](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html#filter)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-26T04:33:34.457

JFormattedTextField 示例：

```
public static void main(String[] args) {
    NumberFormat format = NumberFormat.getInstance();
    format.setGroupingUsed(false);
    NumberFormatter formatter = new NumberFormatter(format);
    formatter.setValueClass(Integer.class);
    formatter.setMinimum(0);
    formatter.setMaximum(Integer.MAX_VALUE);
    JFormattedTextField field = new JFormattedTextField(formatter);
    JOptionPane.showMessageDialog(null, field);
} 
```

`JFormattedTextField`适用于限制输入。除了将输入限制为数字外，它还具有更高级的用途，例如电话号码格式。这提供了即时验证，而无需等待表单提交或类似事件。

# python - 对 python _for_ 函数的工作方式感到困惑

> ID：15752877
> 
> 赞同：0
> 
> 时间：2013-04-01T22:15:32.523
> 
> 标签：python

我有一个关于 python 函数如何*工作*的问题。我正在编写一个程序，其中涉及生成多个数字的素数分解。

```
for a in range(2,25):
    print primefactorize(a) 
```

当我在上面的范围内测试它时，终端中弹出的最后一个列表是 24 的素数分解输出，而不是 25。函数

```
for a in range(1,x): 
```

只遍历每个值直到 x-1？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T22:16:48.937

我认为你的困惑在于[范围](http://docs.python.org/2/library/functions.html#range)

```
range(2,25)
[2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24] 
```

从文档中：

> 这是创建包含算术级数的列表的通用功能。它最常用于 for 循环。参数必须是纯整数。如果省略 step 参数，则默认为 1。如果省略 start 参数，则默认为 0。完整形式返回纯整数列表 [start, start + step, start + 2 * step, ...] . 如果step为正，则最后一个元素是最大的start + i * step小于stop；如果 step 为负数，则最后一个元素是最小的 start + i * step 大于 stop。step 不能为零（否则会引发 ValueError）。例子：

在数学中，这称为[`start`包含性、`stop`排他性区间](http://en.wikipedia.org/wiki/Bracket_%28mathematics%29#Intervals)，如下所示：

```
[start, stop) 
```

# mysql - Mysql自增组合

> ID：15752892
> 
> 赞同：2
> 
> 时间：2013-04-01T22:16:32.710
> 
> 标签：mysql, database, innodb, auto-increment

我正在尝试使用自动增量让我的 InnoDB 发生以下情况

```
ID | AI
1    1
1    2
1    3
2    1
2    2
2    3 
```

我该如何设置？我尝试将两者都设置为 PK，但这并没有像在其他数据库引擎中那样工作。

谷歌没有帮助，或者我无法获得正确的搜索词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T22:44:07.273

一种方法是使用触发器。

您的表 DDL 可能如下所示

```
CREATE TABLE `composite` (
  `id` INT(11) UNSIGNED NOT NULL,
  `ai` INT(11) UNSIGNED NOT NULL,
  PRIMARY KEY (`id`,`ai`)
); 
```

和一个触发器

```
DELIMITER $$

CREATE TRIGGER tg_comp_insert
BEFORE INSERT ON composite
FOR EACH ROW 
BEGIN
    SET NEW.ai = (SELECT IFNULL(MAX(ai), 0) + 1 FROM composite WHERE id = NEW.id);
END $$

DELIMITER ; 
```

然后像这样使用它

```
INSERT INTO composite (id, ai) VALUES(1,0);
INSERT INTO composite (id, ai) VALUES(1,0); 
```

结果将是

```
+----+----+
| id | ai |
+----+----+
|  1 |  1 |
|  1 |  2 |
+----+----+ 
```

# functional-programming - APL 中的条件函数

> ID：15752895
> 
> 赞同：10
> 
> 时间：2013-04-01T22:16:44.430
> 
> 标签：functional-programming, conditional-operator, apl

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-08T20:04:16.940

The trouble with these:

```
(f t)[x]
x⌷f t
x⊃f t 
```

is that both `t` and `f` get evaluated.

If you want to short-circuit the thing, you can use guards:

```
{x:t ⋄ f} 
```

This is equivalent to

```
if (x) {
    return t;
}
f; 
```

in a C-like language.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-02T15:31:01.363

Yes, there are APL programmers on SO (but not many!).

I think the answer is that there is no standard on this.

For a scalar solution, I use "pick":

```
 x⊃f t 
```

While for a Boolean array I use indexing as you do above:

```
f t[x] 
```

I always use index origin zero, so there is no need to add 1, and the parens are not needed.

If these are not simple enough, I think you have to cover them with a function named "if". That will also let you put the true and false in the perhaps more natural ordering of t f.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-09-06T17:30:40.787

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-10-30T12:51:52.047

An old, old idiom which did something like C's ternary operator `? :` and returned a result was the following:

```
 r←⍎(¯3 3)[x=42]↑'6×8 ⋄ 6×7' 
```

Note that this is written for origin 0 and the parens around the -3 3 are there for clarity.

x=42 evaluates to zero or one, depending on this answer we choose -3 or 3, and thus select and execute either the first 3 elements ("6x8") or last 3 elements ("6x7") of the string. The diamond ⋄ is just there for decoration.

Needless to say, one would probably not code this way if one had :if :else avaiable, though the control structure form would not return a result.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-23T04:44:55.500

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-07T08:42:46.137

The APL expression:

```
(1+x=0)⌷y z 
```

should be the C language equivalent for

```
x?y:z 
```

And all the others

```
(1+x>0)⌷y z 
```

for

```
x<=0?y:z 
```

Etc. In general if a b c are expressions of respective languages the APL expression:

```
(1+~a)⌷b c 
```

It should be equivalent to the C language:

```
a?b:c 
```

# python - 使用 Python 发送数千个 post 请求的最快方法是什么？

> ID：15752906
> 
> 赞同：3
> 
> 时间：2013-04-01T22:17:18.900
> 
> 标签：python, http, post

我想以最快的方式发出数千个 POST 请求。我怎样才能用 Python 做到这一点？

到目前为止，我只有一个 for 循环，它多次调用以下函数：

```
def post(word):
    data = json.dumps({"word":word})
    url = "http://127.0.0.1:8000/updateword"
    req = urllib2.Request(url, data, {'Content-Type': 'application/octet-stream'})
    response=None
    try:
        f = urllib2.urlopen(req)
        response = f.read()
        f.close()
    except urllib2.HTTPError, error:
        k= open('error.html','w')
        k.write(error.read())
        k.close()
    return response 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T22:21:30.797

按照您编写代码的方式，它会在发送下一个请求之前等待对一个请求的响应。（最重要的是，它可能不会重用 HTTP 连接，这意味着您必须处理每个请求的套接字创建/关闭开销。再说一次，根据您正在测试的内容，很有可能实际上使它成为更好的测试。）

同时发出多个请求的最简单方法是使用线程。最简单的方法是使用[`concurrent.futures`](http://docs.python.org/3/library/concurrent.futures.html)（或[`futures`从 PyPI](https://pypi.python.org/pypi/futures)，如果您使用的是 2.x 或 3.1）：

```
with concurrent.futures.ThreadPoolExecutor(max_workers=10) as pool:
    results = pool.map(post, words)
    concurrent.futures.wait(results) 
```

如果您愿意，您可以编写自己的线程，并只给每个线程 1/10`words`并让它循环调用`post`：

```
def posts(words):
    for word in words:
        post(word)

groupsize = len(words)/10
t = [threading.Thread(target=posts, args=[words[i*groupsize:(i+1)*groupsize]]
     for i in range(10)]
for thread in t:
    thread.start()
for thread in t:
    thread.join() 
```

无论哪种方式，显然我只是凭空取出了第 10 个数字（因为它比大多数浏览器或 Web 服务客户端允许您创建的最大同时连接数多一点），但是您需要进行一些性能测试以找到最好的价值。

如果事实证明最好的价值是*巨大的*，比如 500 或其他东西，你可能会遇到线程可以做的限制。在这种情况下，您应该考虑使用greenlets。最简单的方法是使用`gevent`- 而最简单的方法是重写您的代码以使用[`grequests`](https://github.com/kennethreitz/grequests)而不是`urllib2`.

同时，如果实际读取在浪费时间，而您实际上并不需要响应，并且它们相当大，并且您没有尝试测试服务器发送真实响应的能力，您可能需要关闭套接字只要您知道您将获得正确的数据。您*可以*通过编写自己的处理程序来做到这一点`urllib2`，但这听起来需要做很多工作。我认为在这种情况下，只下降到套接字级别实际上会更简单。首先，记录为每个 POST 发送的请求，以及您在工作正常时返回的预期 200 行。然后做这样的事情：

```
with closing(socket.socket()) as c:
    c.connect(('127.0.0.1', 8000))
    c.send(REQUEST_STRING_FORMAT.format([word]))
    with c.makefile() as f:
        response = f.readline()
        if response != RESPONSE_200_STRING:
            response += f.read()
            with open('error.html','w') as k:
                k.write(response) 
```

# c++ - std::regex 线程安全吗？

> ID：15752910
> 
> 赞同：11
> 
> 时间：2013-04-01T22:17:43.367
> 
> 标签：c++, regex, thread-safety, std

与[静态 boost::wregex 实例线程安全吗？](https://stackoverflow.com/questions/12263013/is-a-static-boostwregex-instance-thread-safe)但对于标准化版本。我可以从具有相同正则表达式对象的多个线程调用 regex_search 吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-01T22:46:43.157

声称[`std::regex`](http://en.cppreference.com/w/cpp/regex/basic_regex)在各个方面都是线程安全的，这是一个非常大胆的声明。C++11 标准不对正则表达式库做出此类保证。

但是，查看 的原型[`std::regex_search`](http://en.cppreference.com/w/cpp/regex/regex_search)表明它将`basic_regex`对象作为 const 参数。这意味着它受到标准库保证的保护，即 const 修饰符暗示函数相对于该参数的[线程安全。](https://stackoverflow.com/questions/14127379/does-const-mean-thread-safe-in-c11)

用标准话来说，就是：

> **[17.6.5.9/1]** 本节规定了实现应满足的要求，以防止数据竞争 (1.10)。除非另有说明，否则每个标准库函数都应满足每个要求。实施可能会在下面指定的情况以外的情况下防止数据竞争。
> 
> **[17.6.5.9/3]** C++ 标准库函数不得直接或间接修改可由当前线程以外的线程访问的对象 (1.10)，除非通过函数的*非常量*参数直接或间接访问对象，包括`this`.

因此，除非您使用的标准库的实现中出现错误，否则对传入的对象的调用似乎`std::regex_search`是线程安全的。`regex`

* * *

**其他想法：**

仅仅因为`std::regex_search`它的论点是可重入的，`regex`并不意味着你完全不在水中。`regex`在线程安全调用的同时执行以非线程安全方式修改 a 的操作，例如`std::regex_search`仍然是未定义的行为。`basic_regex`的[赋值运算符](http://en.cppreference.com/w/cpp/regex/basic_regex/operator%3D)，[std::swap](http://en.cppreference.com/w/cpp/regex/basic_regex/swap)，并且相对于它们操作[`basic_regex::imbue`](http://en.cppreference.com/w/cpp/regex/basic_regex/imbue)的非线程安全函数浮现在脑海中。`basic_regex`知道了这一点，您最好制作一个`regex`对象的副本，这应该以最低的性能成本为每个线程在闲暇时使用/修改。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-01T18:44:09.637

虽然[Sean 的回答](https://stackoverflow.com/a/15753237/8701)对标准是正确的，但个别实施可能会达不到要求。至少，VC++ 2013 看起来在其复制构造函数和惰性求值变量中具有[竞争条件。](https://connect.microsoft.com/VisualStudio/feedback/details/1253646/std-regex-copy-constructor-is-not-thread-safe)

# c++ - C++ for 循环结构

> ID：15752911
> 
> 赞同：4
> 
> 时间：2013-04-01T22:17:44.763
> 
> 标签：c++

希望这不是一个蹩脚的问题，但我必须问这个:)

当我在 C++ 中编程并使用`for`循环时，我给出的参数是

```
for(int i = 0; i< something; i++) 
```

这是正确的前进方向，但是..这给了我编译警告，例如：

```
1>c:\main.cpp(185): warning C4018: '<' : signed/unsigned mismatch 
```

现在浏览书籍和在线阅读大多数for循环示例都是这种结构。

我总是忽略警告，因为我的程序总是工作并做了他们应该做的事情，直到我对这个警告感兴趣并做了一个小的研究......通过复制这个 Waring 和谷歌它发现如果我使用它会更好这种结构可以避免警告：

```
for(vector<int>::size_type i= 0; i < something; i++ ) 
```

现在我的问题是为什么......如果初始结构有效并且在许多书籍和在线资源中被描述和记录。

还有什么好处或技术上有什么显着差异.....？

我为什么要用这个

```
for(vector<int>::size_type i= 0; i < something; i++ ) 
```

除了摆脱警告......？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T22:29:13.017

不要忽视警告。他们试图告诉你一些事情。

我怀疑`something`是未签名的。

如果你有

```
unsigned int something = 0;
something--;  // Now something is a really large positive integer, not -1 
```

如果您忽略警告，并且您没有将编译器设置为将警告视为错误，那么这将编译得很好，但您不会得到您期望的结果。

`vector<int>::size_type`如果`unsigned int`警告消失，您可能会看到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T22:29:46.713

您的语句中的类型和类型之间只是`signed`/`unsigned`不匹配：`i``something`

```
for(int i = 0; i < something; i++) 
```

所以这与结构无关`for`，而是与比较有关。

```
bool b = i < something; 
```

会给你同样的警告。

如果您以某种方式使用`int i`并将其与`size_t`变量进行比较（这就是`std::vector::size()`给您的），就会出现这种情况。

因此，要修复它，只需将`for`循环更改为使用相同类型的 for`i`和 for `something`，例如：

```
for(size_t i = 0; i < something; i++) 
```

if`something`是类型`size_t`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-01T22:30:56.580

从广义上讲，C++ 中有两种整数类型：有*符号*和*无符号*。对于每个大小的整数，都有一个有符号和无符号版本。不同之处在于它们的范围：*n*位的有符号整数的范围为 -2 ^(n - 1)到 +2 ^(n - 1)  - 1；无符号整数，从 0 到 2 ^n  - 1。

将有符号整数类型与无符号进行比较时，将有符号值转换为无符号；负值将*换*行并被视为大的正值。这样做的结果是与的比较`<`可能不会达到您的预期，因此许多编译器会警告此类比较。

例如，`1u < -1`是真的。`u`是一个后缀，告诉编译器将`1`视为一个`unsigned int`值。

这样，含义就很清楚了：`int`是有符号类型，`vector<T>::size_type`也是无符号类型。由于`vector<T>::size()`is的结果`vector<T>::size_type`，您希望使用该类型或其他无符号类型，`size_t`以确保您的比较具有您想要的行为。

除了使用索引，您还可以使用不存在此类转换问题的迭代器：

```
for (vector<int>::iterator i = v.begin(); i != v.end(); ++i)
    cout << *i << '\n'; 
```

`auto`在 C++11 中可以更简洁：

```
for (auto i = v.begin(); i != v.end(); ++i)
    cout << *i << '\n'; 
```

如果您只是迭代整个容器，请使用 C++11 range-based `for`：

```
for (int i : v)
    cout << i << '\n'; 
```

如果要修改值，请使用参考：

```
for (int& i : v)
    ++i; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-01T22:31:39.193

> 我为什么要用这个

因为`signed int`和无符号值一样`size_t`具有不同的范围，如果其中一个包含另一个无法表示的值，您可能无法获得预期的结果。

也就是说，如果您认为代码*过于冗长*，则不必使用它。

像这样的代码：

```
for(vector<int>::size_type i= 0; i < myvector.size(); i++ )
{
    int val = myvector[i]; 
```

也可以这样写。

```
for ( int val : myvector ) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-01T22:29:55.483

`something`必须是`int`，否则你会收到警告。或者`i`必须是`unsigned int`，取决于您的需要。
假设一个 32 位整数，如果有符号，则`0x7FFFFFFF`( `2,147,483,647 decimal`) 以上的任何值都将被解释为负数，而对于`unsigned int`.

因此编译器发出警告，告诉您比较邮件会导致意外结果。

```
32 bits integers range from −2,147,483,648 to 2,147,483,647.
32 bits unsigned integers range from 0 to 4,294,967,295 
```

# css - Sitefinity CSS 类，用于带有子页面的基本垂直导航

> ID：15752913
> 
> 赞同：0
> 
> 时间：2013-04-01T22:17:48.717
> 
> 标签：css, navigation, sitefinity

我很难弄清楚如何使用 Sitefinity 中的下拉子页面来设置我的基本垂直导航的样式。我找不到简单的教程或解释我需要针对哪些 CSS 类来更改导航样式，提供的文档太不清晰了，我在论坛中也没有找到太多帮助。到目前为止，我所能找到的只是我需要创建一个 main.css 文件，我用它来创建一个自定义皮肤，但是我无法得到一个直接的答案来说明这个特定外观的目标是什么。

这位 Sitefinity 新人将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:19:43.807

对我来说最简单的方法似乎是使用 Sitefinity 模板构建器，然后按照以下步骤操作：

1.  转到[http://templatebuilder.sitefinity.com](http://templatebuilder.sitefinity.com)
2.  转到导航并拖动垂直菜单。
3.  转到外观，从“导航皮肤”下拉列表中选择导航皮肤。
4.  导出模板（将其保存到您的硬盘）。
5.  解压缩并转到 \css 文件夹。
6.  现在更改 Menu.SkinName.css。

希望这可以帮助。我猜 Telerik 的人并没有在样式菜单上提供更多信息，因为有一个模板构建器可以完成一些工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:45:48.253

Navigation Widget 使用 Telerik RadControls 来生成菜单。这可能是：

*   辐射菜单
*   辐射面板条
*   辐射树视图
*   ...

根据您选择的导航模式，呈现其中之一。可能您正在使用简单的垂直菜单？

您可以覆盖生成的类，或定义皮肤。

*   转到导航小部件的设计器
*   在“Wrapper CSS”字段中添加一个名称（例如 CustomSKin）。
*   使用例如 Firebug 或 Chrome 扩展程序检查您的标记。您将看到此前缀添加到导航部分的标记中。

然后你可以像这样声明你想要样式的类：

```
.RadPanelBar_CustomSkin .rpRootGroup {
   // Your css
} 
```

您可以随时查看 Telerik 提供的 RadControls 文档： [http ://www.telerik.com/help/aspnet-ajax/panelbar-appearance-css-selectors.html](http://www.telerik.com/help/aspnet-ajax/panelbar-appearance-css-selectors.html)

亲切的问候，丹尼尔·普洛普

# extjs - Extjs 4.2 DirectSubmit 不工作

> ID：15752917
> 
> 赞同：0
> 
> 时间：2013-04-01T22:18:08.763
> 
> 标签：extjs, ext-direct

我正在尝试使用 extjs 4.2 中的 DirectSubmit API 提交表单。

错误信息是：

TypeError: me.form.api.submit 不是一个函数 [Break On This Error]

me.form.api.submit(formInfo.formEl, 回调, 我);

完全相同的代码适用于 Extjs 4.1.1

我注意到代码（直接提交）在 4.2 中发生了变化

这是一个错误吗？有人有同样的问题吗？

我的代码：

Ext.define('ExtMVC.view.MyForm', { 扩展：'Ext.form.Panel',

```
height: 250,
width: 400,
bodyPadding: 10,
title: 'My Form'

initComponent: function() {
    var me = this;

    me.initialConfig = Ext.apply({
        api: {
submit: 'Actions.Verbis_Processo.update'},
        standardSubmit: false
    }, me.initialConfig);

    Ext.applyIf(me, {
        api: {
submit: 'Actions.Verbis_Processo.update'},
        items: [
            {
                xtype: 'textfield',
                anchor: '100%',
                fieldLabel: 'Label'
            },
            {
                xtype: 'button',
                handler: function(button, event) {
                    button.up('form').getForm().submit();
                },
                text: 'MyButton'
            }
        ]
    });

    me.callParent(arguments);
} 
```

});

我在 extdirect 配置中有@formhandler。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:42:04.967

这是一个错误，将在 4.2.1 中修复。

# python - 将范围值分配给数据表

> ID：15752922
> 
> 赞同：0
> 
> 时间：2013-04-01T22:18:50.403
> 
> 标签：python

假设我有两个包含 6 个值的字符串（将它们视为坐标的下限和上限）：

```
lo_values = c(1, 10, 20, 30, 40, 50)
hi_values = c(9, 19, 29, 39, 49, 60) 
```

并假设我有一个包含 6 列的数据表，其中包含 3 个可能的值（B、L、T）：

```
row1 = c(T, L, L, L, T, B)
row2 = c(B, B, B, T, T, T) 
```

ETC...

我想编写一个使用 lo_ 和 hi_values 的脚本，并根据数据表中的输入将它们分配给每一行。因此，例如， row1 将是：

```
row1 -> (1-9 = T, 10-39 = L, 40-49 = T, 50-60 = B) 
```

同样， row2 将是：

```
row2 -> (1-29 = B, 30-60 = T). 
```

我很难想出一种合适的方式来编程。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:47:06.210

先说几点。在 python 中，字符串用于文本。您所说的字符串是元组或列表。列表是对象的有序列表。在 python 中，它是这样表示的，`a = [1,2,3,4]`所以 a 是 4 个数字的列表。元组就像一个列表，但它是不可变的，一旦创建就不能修改。如果您想要一个不同的版本，您需要制作一个带有更改的新副本。

话虽如此，我想我明白你想要什么（但如果我理解不正确，请纠正我）。此代码应该适用于您的示例：

```
lo_values = (1, 10, 20, 30, 40, 50) # this a tuple
hi_values = (9, 19, 29, 39, 49, 60) # this too

rows = [ ('T', 'L', 'L', 'L', 'T', 'B'),
         ('B', 'B', 'B', 'T', 'T', 'T')] # rows is a list containing 2 tuples, one with each row

for row in rows:
    result = []
    previous_value = row[0]
    run_start = 0
    for i in range(1, len(row)):
        value = row[i]
        if value != previous_value:
            lower_bound = lo_values[run_start]
            upper_bound = hi_values[i-1]
            result.append((lower_bound, upper_bound, previous_value))
            run_start = i
        previous_value = value
    lower_bound = lo_values[run_start]
    upper_bound = hi_values[-1]
    result.append((lower_bound, upper_bound, row[-1]))
    print result 
```

运行结果：

```
[(1, 9, 'T'), (10, 39, 'L'), (40, 49, 'T'), (50, 60, 'B')]
[(1, 29, 'B'), (30, 60, 'T')] 
```

这应该让您开始了解如何解决问题。

# jquery - 表格单元格内文本颜色的条件更改

> ID：15752923
> 
> 赞同：1
> 
> 时间：2013-04-01T22:18:53.737
> 
> 标签：jquery, formatting, conditional

我正在尝试使用 jQuery 有条件地更改某些表格单元格的颜色。我有一张桌子：

```
<tr>
<td>Class Code</td>
<td class="qty">3</td>
<td>Science</td>
</tr>
<td>Class Code</td>
<td class="qty">4</td>
<td>Science</td>
</tr>
. . . 
```

样式定义 lowqty{color:red;}

当数字低于时，我想更改第二列的颜色`4`。我正在尝试通过以下方式做到这一点，但还没有让它发挥作用。

```
$('.qty').change(
function() {
    if ($(this).text() <= 3 ) {
        $(this).addClass('lowqty');
    }
    }); 
```

我已经尝试过`3`作为字符串和数字，并且除了更改之外，我还尝试了过滤和添加。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T22:27:01.660

```
$('.qty').each(function() {
    if (parseInt($(this).text()) < 4) {
        $(this).addClass('lowqty');
    }
}); 
```

这应该够了吧。此外，您还缺少一个开放的 TR 标签：

[http://jsfiddle.net/suDqH/](http://jsfiddle.net/suDqH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T22:21:53.690

使用`.val()`，而不是`.text()`应该工作。

此外，您不能在-上为元素调用`change`事件。`table cell``.change()``select`

# php - 如何使用 PHP 在多选项选择中获取所有选项？

> ID：15752924
> 
> 赞同：0
> 
> 时间：2013-04-01T22:18:54.897
> 
> 标签：php, javascript, jquery, select, options

我正在使用 2 个选择菜单，其中一个具有值，另一个为空，当用户从左侧选择项目并单击一个位时，所选项目将移动到右侧菜单。此页面上有一个类似的示例[http://jquerybyexample.blogspot.com/2012/05/how-to-move-items-between-listbox-using.html](http://jquerybyexample.blogspot.com/2012/05/how-to-move-items-between-listbox-using.html)

唯一的问题是，当我执行 $_POST['lstBox2 '] 时，我只能得到选定的值。但在这里我想 $_POST 所有选项天气他们是否被选中。

我已经完成了这个 jquery 代码，但是如果一个使用过的人错误地点击了一个选项，那么 php 将尝试只发布一个

```
$("#lstBox2 option").each(function() {
    $(this).attr('selected', 'selected');
}); 
```

有人可以告诉我是否有办法在 php 中始终 $_POST 他们所重视的？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T22:20:12.450

只需将问题中的 JavaScript 代码移动到`submit`表单的回调中即可。

```
$("form:has(#lstBox2)").on('submit', function () {
    $("#lstBox2 option").prop('selected', true);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T22:33:13.673

您可以将所选选项的信息以 JSON 格式发送，在服务器端，您可以轻松地使用 PHP json_decode() 来解析信息。

# pumping-lemma - 为 CFL 泵送引理

> ID：15752925
> 
> 赞同：1
> 
> 时间：2013-04-01T22:18:56.950
> 
> 标签：pumping-lemma

我试图证明以下语言不是上下文无关的：

```
{a^n b^m a^n b^m : n,m >= 0} 
```

我知道我需要使用抽水引理。所以我必须使用 w = uvxyz where |vy| > 0 和 |xyz| > p（泵送长度）。我知道我需要表明，当为每种情况抽取一个字符串时，它是在语言之外的。

我知道 v^i 或 y^i 包含某些内容而另一个为空但我不知道为我的字符串选择什么的情况。

# jquery - 当 jqgrid 中没有“id”值时，如何删除/更新一行？

> ID：15752928
> 
> 赞同：0
> 
> 时间：2013-04-01T22:19:04.413
> 
> 标签：jquery, jqgrid

我发现我能够向 jqgrid 添加没有分配 ID 值的行。
--这很好，因为我更愿意稍后在服务器端分配这个值。

但是，我无法在 jqgrid 中选择这样的行，即，为了执行客户端删除/更新操作。虽然，当我双击 ie 时，我***可以***访问“ ***iRow ”值，***

```
ondblClickRow: function(id, iRow, iCol, e) 
```

--但是，我不知道如何使用这个“iRow”值突出显示或删除/更新一行。

问题：如何选择/突出显示并最终更新/删除未分配“id”值的行？

例如，下面是我如何能够成功更新***已经***分配了“id”值的选定行...

```
var datarow = {theId: $("#theId").val(), something1: $("#something1").val(), something2: $("#something2").val()};
$("#mygrid").jqGrid('setRowData', $("#theId").val(), datarow); 
```

-- 同样，我将如何删除***未***分配 id 的选定行？

感谢对此的任何帮助/指导。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:33:50.883

jqGrid 不能使用没有`id`. 所有内部回调和内部函数仅适用于具有 id 的行。

如果您需要添加应该由服务器稍后分配的行，您必须添加具有一些 id 的行，并在服务器响应后稍后更改 id。例如[addRow](https://github.com/tonytomov/jqGrid/blob/v4.4.4/js/grid.inlinedit.js#L409-L444)方法用于`$.jgrid.randId()`为临时新行生成唯一的 rowid。jqGrid 将类`jqgrid-new-row`另外添加到新行。在我的错误报告中的代码片段中，[您](http://www.trirand.com/blog/?page_id=393/bugs/save-button-of-inlinenav-uses-editparams-instead-of-addparams-addrowparams-on-add-new-row/#p28525)可以找到`id`在服务器返回数据库中生成的行的新 id 之后如何更改行的。

# jquery - $(document).height() 和 html height:100% 问题

> ID：15752931
> 
> 赞同：0
> 
> 时间：2013-04-01T22:19:12.430
> 
> 标签：jquery

因此，理论上，当滚动条位于页面底部上方 500 像素时，我就有了这个函数。

```
$(document).ready(function() {
    var timeout = '';
    $(window).scroll(function (e) { 
        var intBottomMargin = 500; 
        clearTimeout(timeout);
        if ($(window).scrollTop() >= $(document).height() - $(window).height() - intBottomMargin) {
          timeout = setTimeout(function(){ 
                $("#next-paginav")[0].click(); 
          }, 300);
        }
    });
}); 
```

问题是，我的 html 需要 height:100% 所以文档高度和窗口高度将是“相同的”，对吗？因此该功能不起作用，除了在 OS X 上的 chrome/safari 中，您在底部会出现一点反弹，并且 window.scrolltop 暂时超过文档高度。

如何使这个函数在我的 html 为 100% 高度的情况下工作？

```
$(document).ready(function() {
    var timeout = '';
    $(window).scroll(function (e) { 
        var intBottomMargin = 500; 
        clearTimeout(timeout);
        if ($(window).scrollTop() >= $('body').height() - $(window).height() - intBottomMargin) {
          timeout = setTimeout(function(){ 
                $("#next-paginav")[0].click(); 
          }, 300);
        }
    });
}); 
```

不工作。

```
$(document).ready(function() {
    var timeout = '';
    $(window).scroll(function (e) { 
        var intBottomMargin = 500; 
        clearTimeout(timeout);
        if ($(window).scrollTop() >= $('body').height() - intBottomMargin) {

          timeout = setTimeout(function(){ 
                $("#next-paginav")[0].click(); 
          }, 300);
        }
    });
}); 
```

也不管用，什么都没有发生。

如何使这个函数在我的 html 和 body 为 100% 高度的情况下工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:20:22.213

使用`$('body').height()`而不是`$(document).height()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T21:03:24.517

我遇到了同样的问题，并找到了可能的解决方案。您可以克隆并在屏幕外加载正文的内容，计算高度，然后删除所述克隆。

```
function getDocumentHeight() {
    var $temp = $("<div>")
        .css("position","absolute")
        .css("left","-10000px")
        .append($("body").html());

    $("body").append($temp);
    var h = $temp.height();
    $temp.remove();
    return h;
} 
```

[资源](http://www.foliotek.com/devblog/finding-real-body-height-using-jquery/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T22:39:15.397

```
$(window).scrollTop() >= $('body').height() - intBottomMargin 
```

应该做的伎俩。$(window).height() 在 Firefox 中不会返回与 chrome 中相同的高度。

# mongodb - Mongodb恢复问题

> ID：15752940
> 
> 赞同：6
> 
> 时间：2013-04-01T22:20:09.510
> 
> 标签：mongodb

运行在 Ubuntu 12.04 机器上的 Mongodb 决定转储内核，因为它打开了太多文件（掌声）。在`mongod --repair`以 root 身份运行[http://docs.mongodb.org/manual/tutorial/recover-data-following-unexpected-shutdown/](http://docs.mongodb.org/manual/tutorial/recover-data-following-unexpected-shutdown/)暗示（但未指定）之后，我现在发现 mongo 显然已经淘汰了自己文件权限以某种方式 - 每次我尝试开始时我都会得到

```
Mon Apr  1 15:10:08 [initandlisten] options: { bind_ip: "127.0.0.1", config: "/etc/mongodb.conf", dbpath: "/var/lib/mongodb", logappend: "true", logpath: "/var/log/mongodb/mongodb.log", nojournal: "true" }
Mon Apr  1 15:10:09 [initandlisten] couldn't open /var/lib/mongod/cerebro_test_import_ayp_part2.ns errno:1 Operation not permitted
Mon Apr  1 15:10:09 [initandlisten] error couldn't open file /var/lib/mongodb/cerebro_test_import_ayp_part2.ns terminating 
```

“不允许操作”？真的吗？即使

```
$ sudo chmod -R 777 /var/lib/mongodb 
```

? 我距离将整个数据库吹走并将其归结为 Mongo 糟糕的另一个原因还有几毫米的距离。我能做些什么来让 mongo 再次快乐，所以我不必这样做？我没试过什么？是什么赋予了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T09:24:40.800

你试过了 `sudo chown -Rh mongodb:mongodb /var/lib/mongod*`吗？

这具有 Linux 权限问题的所有特征，chmod'ding 777 总是一个坏主意。

# extjs - 如何向右滚动 extjs 面板

> ID：15752942
> 
> 赞同：0
> 
> 时间：2013-04-01T22:20:21.667
> 
> 标签：extjs

我有一个 extjs 面板。每次按下按钮时，此面板都会添加动态内容。这个动态内容被添加到面板的末尾，在我手动水平滚动之前它是不可见的。

每次添加新内容并且用户立即看到该内容时，我都想滚动到最右侧（无需手动向右滚动）

有什么办法，我可以自动将面板水平滚动到右侧面板的末尾

谢谢

# java - XStream 不会调用 readObject()

> ID：15752945
> 
> 赞同：2
> 
> 时间：2013-04-01T22:20:41.370
> 
> 标签：java, serialization, deserialization, xstream

我有这样建模的代码：

```
class A {
    private transient Foo foo = new Foo();
    private void readObject(ObjectInputStream in) throws IOException, ClassNotFoundException {
        in.defaultReadObject();
        foo = new Foo();
    }
}

class B extends A {} 
```

我将 readObject() 添加到 A 以便在反序列化期间`foo`初始化瞬态。但是，我在代码中设置了断点，并且可以看到 XStream 根本没有调用 readObject()。我还尝试将 readObject() 粘贴在 B 类中，该类在 A 中调用 initFoo() 函数，但这也不起作用。

网站上的常见问题解答似乎并不意味着任何其他样板文件都是必要的。为什么不被调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:22:32.183

XStream 文档似乎不正确，或者至少具有误导性。它在[http://x-stream.github.io/faq.html#Serialization_initialize_transient](http://x-stream.github.io/faq.html#Serialization_initialize_transient)中说，

> 在类层次结构中使用后者 [readObject]，基类不调用 readResolve。

但是，替换`readObject()`为`readResolve()`我在问题中列出的代码，它似乎被调用并且 foo 被正确初始化。这很令人困惑，因为根据 XStream 和 java.io.Serializable 的文档，readObject() 似乎是我需要的。

然而，方法内的断点仍然没有被命中。这可能与调用这些 Serializable 方法的方式有关。

# performance - Excel：使用外部链接可以提高性能吗？

> ID：15752947
> 
> 赞同：9
> 
> 时间：2013-04-01T22:21:01.213
> 
> 标签：performance, excel, external-links

我想知道使用外部链接与打开电子表格和复制单元格（使用 VBA）相比是否有性能提升。

我想 Excel 必须以同样的方式打开文件，但是当我使用以下代码进行测试时，外部链接会更快：

```
Dim t As Double
Dim rng As Range

For Each rng In shtId.Range("A1:A5")
    t = Now
    ThisWorkbook.Names("rngID").RefersToRange = rng
    ThisWorkbook.UpdateLink "H:\manualData.xlsx", xlExcelLinks
    Debug.Print "link: " & Format(Now - t, "######.0000000")

    t = Now
    Workbooks.Open "H:\manualData.xlsx", readonly:=True
    ActiveWorkbook.Close False
    Debug.Print "open: " & Format(Now - t, "######.0000000")
Next

Results:

link: .0000116
open: .0000231
link: .0000116
open: .0000347
link: .0000000
open: .0000347
link: .0000000
open: .0000347
link: .0000000
open: .0000347 
```

该工作簿具有一系列单元格，其中查找公式键入 ID 字段。这些公式有外部链接。为了测试它，我更改了 ID 并强制更新。为了测试文件打开方法，我只是打开和关闭源文件。

我正在寻求加快由于网络带宽低而出现问题的进程。我已经探索了各种选项，只是想了解这是否有效。我搜索了这个主题，有些人说外部链接可能会导致性能问题，而有些人则不然。我想更好地了解外部链接背后的机制，以便了解实施时的预期。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-13T10:07:53.283

这是更多的工作，但是从/向 XML 文件读取/写入数据（使用 MSXML）将解决性能问题。这是我在某些带宽较低的情况下被迫采用的路线。

VBA 检索数据和运行计算的速度比使用多个链接要快得多。视情况而定；您可以在工作簿打开事件甚至特定更改事件（组合框等）上执行此操作，因为您只使用 kB 数据。

# python - 事务管理错误？

> ID：15752950
> 
> 赞同：1
> 
> 时间：2013-04-01T22:21:19.537
> 
> 标签：python, django, postgresql

您好，感谢您的阅读。我正在 Django 中创建一个快速站点，并且我在对我的 Postgres 数据库进行的原始 SQL 中有一个非常简单的更新语句。这里有一些麻烦：

```
from django.http import HttpResponse
from django.db import connection, transaction

def rsvp_update(request, rsvp_id, status):
  cursor = connection.cursor()
  cursor.execute("UPDATE public.rsvp SET status=%s WHERE rsvp_id = %s", [status, rsvp_id])
  transaction.commit()
  return HttpResponse('okay') 
```

我收到一条错误消息，显示“[URL] 处的 TransactionManagementError 此代码不在事务管理之下”。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T22:25:30.077

您需要在[`commit_manually`](https://docs.djangoproject.com/en/1.5/topics/db/transactions/#django.db.transaction.commit_manually)手动管理事务的代码中使用装饰器。

# xcode - 在 Main.m 中解析问题预期标识符

> ID：15752956
> 
> 赞同：0
> 
> 时间：2013-04-01T22:21:44.383
> 
> 标签：xcode, parsing, identifier

在这部分代码中

```
int main(int argc, char *argv[])
{
    @autoreleasepool {

        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate]));
    }
} 
```

调试器说存在解析问题和预期标识符。当我在模拟器中测试应用程序时，它立即崩溃。如何让我的应用程序在模拟器中运行而不带我到 main.m？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:24:10.290

你期待`[AppDelegate]`做什么？这不是有效的语法。您可能的意思是`[AppDelegate class]`，尽管`NSStringFromClass([AppDelegate class])`当您可以键入时该构造毫无意义`@"AppDelegate"`。

# php - Xcode AES 加密/解密 - php 兼容性问题

> ID：15752959
> 
> 赞同：1
> 
> 时间：2013-04-01T22:21:57.737
> 
> 标签：php, ios, xcode, aes, rijndael

我正在尝试在 Xcode 中加密字符串并使用 PHP 解密，或者使用 PHP 加密并使用 Xcode 解密。

所以首先我想得到同样的`AES encryption`结果。

这是我的 Xcode 文件（为简单起见，我将所有内容放在一个文件中）：

```
#import "t.h"
#import <CommonCrypto/CommonCryptor.h>

@interface NSData(AES)
- (NSData*)AES256EncryptWithKey:(NSString*)key;
- (NSData*)AES256DecryptWithKey:(NSString*)key;
@end

@implementation NSData (AES)

- (NSData*)AES256EncryptWithKey:(NSString*)key {
char keyPtr[kCCKeySizeAES256];

[key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSASCIIStringEncoding];

NSString *iv = @"1234567812345678";
char ivPtr[kCCKeySizeAES128];

[iv getCString:ivPtr maxLength:sizeof(ivPtr) encoding:NSASCIIStringEncoding];    

NSUInteger dataLength = [self length];

size_t bufferSize           = dataLength + kCCBlockSizeAES128;
void* buffer                = malloc(bufferSize);

size_t numBytesEncrypted    = 0;
CCCryptorStatus cryptStatus = CCCrypt(kCCEncrypt, kCCAlgorithmAES128, NULL,
                                      keyPtr, kCCKeySizeAES256,
                                      ivPtr /* initialization vector (optional) */,
                                      [self bytes], dataLength, /* input */
                                      buffer, bufferSize, /* output */
                                      &numBytesEncrypted);

if (cryptStatus == kCCSuccess)
{
    return [NSData dataWithBytesNoCopy:buffer length:numBytesEncrypted];
}

free(buffer); //free the buffer;
return nil;
}

- (NSData*)AES256DecryptWithKey:(NSString*)key {
char keyPtr[kCCKeySizeAES256];  

NSString *iv = @"1234567812345678";
char ivPtr[kCCKeySizeAES128];

[iv getCString:ivPtr maxLength:sizeof(ivPtr) encoding:NSASCIIStringEncoding];

// fetch key data
[key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSASCIIStringEncoding];

NSUInteger dataLength = [self length];

size_t bufferSize           = dataLength + kCCBlockSizeAES128;
void* buffer                = malloc(bufferSize);

size_t numBytesDecrypted    = 0;
CCCryptorStatus cryptStatus = CCCrypt(kCCDecrypt, kCCAlgorithmAES128, NULL,
                                      keyPtr, kCCKeySizeAES256,
                                      ivPtr /* initialization vector (optional) */,
                                      [self bytes], dataLength, /* input */
                                      buffer, bufferSize, /* output */
                                      &numBytesDecrypted);

if (cryptStatus == kCCSuccess)
{
    return [NSData dataWithBytesNoCopy:buffer length:numBytesDecrypted];
}

free(buffer); //free the buffer;
return nil;
}

@end

@interface t ()
@end

@implementation t

- (void)viewDidLoad
{
[super viewDidLoad];

NSString *key = @"12345678123456781234567812345678";

NSData *plaintext =  [[@"aaa0000000000000" dataUsingEncoding:NSASCIIStringEncoding] AES256EncryptWithKey: key];

label1.text = [[NSString alloc] initWithData:plaintext encoding:NSASCIIStringEncoding];

}

@end 
```

现在是 PHP 代码：

```
<?php

$key256 = "12345678123456781234567812345678";
$iv128 = "1234567812345678";
$text = "aaa";

$blocksize = 16;
$len = strlen($text);
$pad = $blocksize - ($len % $blocksize);

$text .= str_repeat("0", $pad);

$cipher = mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $key256, $text, MCRYPT_MODE_CBC, $iv128);

echo $cipher;

?> 
```

Xcode 加密字符串和 php 加密字符串是不同的。

PHP：`â5¢Ð[Iüf#hÂ(Æ`

代码：`¡#yZPbEs¿D6ñ`

我该怎么做才能让它发挥作用？难道我做错了什么？

我将进一步解释代码的作用及其结构，以便您更容易理解问题（如果我错了，请纠正我）：

1.  PHP 和 Xcode 都使用 CBC 进行 AES 加密，所以我想那里没有问题。

2.  正如您所看到的，我只是想获得相同的结果——安全性在这里并不重要——所以我没有使用填充——文本的长度正好是 128 位（16 个字符）。

3.  密钥为 256 位（32 个字符）。

4.  初始化向量为 128 位（16 个字符）。

非常感谢你。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:33:32.560

终于明白了！（在询问苹果之后）

显然，从 NSString 获取 getCString 是错误的，因为例程尝试以空值终止字符串，而 32 字节的缓冲区不足以终止 32 字符的字符串。

获取密钥或 IV 的正确方法是：

```
[key cStringUsingEncoding:NSASCIIStringEncoding]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T22:40:01.663

改变：

```
[key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSASCIIStringEncoding]; 
```

到

```
[key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSUTF8StringEncoding]; 
```

我相信这是一个编码问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-29T21:13:58.917

从页面的最开始使用此代码时，我只能加密 16 个字符的文本。实际上我可以加密任何大小的文本，但是当我解密加密的 NSData 时，我只得到 16 个字符或 128 位。

这与IV有关吗？这段代码是否只加密 128 位，如果我有更大的文本，我需要提供（为了更好的安全性）新的 IV 并加密第二个块？

# safari - Safari中url中的特殊字符

> ID：15752961
> 
> 赞同：4
> 
> 时间：2013-04-01T22:22:08.513
> 
> 标签：safari, uri, special-characters

我们在 Web 应用程序中使用了一些特殊字符，如下所示：`example.com/foo#вап`.

`decodeURI(window.location.hash)`我们使用（有时哈希包含未编码的特殊字符）解析哈希并设置新值，如`window.location.hash = "вап"`.

在 Chrome、Firefox、Opera 甚至 IE 中一切正常，但在 Safari 中我们得到`20?`了`вап`.

如果在 Safari 中设置哈希值，`window.location.hash = encodeURI("вап");`它可以正常工作，但当然它在 Chrome、FF 等中不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T11:06:16.740

最后我找到了解决方案。如果通过设置散列`window.location.href`一切正常。

这是代码：

```
var newHash = ...
var sharpIdx = window.location.href.indexOf("#");
if (sharpIdx === -1) {
  window.location.href = window.location.href + "#" + newHash;
} else {
  window.location.href = window.location.href.substr(0, sharpIdx) + "#" + newHash;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-07T09:12:49.110

我遇到了同样的问题，找到了另一种解决方法

```
window.location.hash = path;
// For safari url change fix
if (window.location.hash !== path) {
    window.location.hash = encodeURI(path);
} 
```

# python - Python Qtconsole：QApp = QCoreApplication.instance() 在 Linux 上返回 None，在 Windows 上返回有效的 QApplication

> ID：15752963
> 
> 赞同：0
> 
> 时间：2013-04-01T22:22:11.180
> 
> 标签：python, pyqt4, ipython, qtconsole

我有一个具有 GUI 界面和命令行界面的软件。它应该做的是检测它是否在 qtconsole 中运行。如果是，它不会创建新的 QApplication 并以非阻塞方式显示 GUI。脚本存在后，会有一个 cmd 对象，用户可以在其中与较低级别的事物进行交互。

```
from PyQt4.QtCore import QCoreApplication
from PyQt4.Qt import QApplication
import sys

QApp = QCoreApplication.instance() 
new_qapp_bit = False
if QApp == None:
    print 'running without the qt console'
    new_qapp_bit = True
    QApp = QApplication(sys.argv)
else:
    print 'found the qt console'

cmd = MyCMDInterface(use_gui=True)

if new_qapp_bit
    sys.exit(QApp.exec_()) 
```

在 Windows 上这工作得很好，QCoreApplication.instance() 返回一个有效的 QApplication，一切都按计划进行，但在 Linux 和 Mac 上它返回 None。我一直在研究这个问题，但我没有看到任何答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T22:59:32.820

问题是我在运行时忘记了“--pylab=qt”参数

```
ipython qtconsole --pylab=qt --color=Linux -c "%run main.py" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T22:45:02.380

我猜想在 Windows 中你正在使用 IDE 或其他东西来执行你的代码。通过提供的示例，我总是得到 None 的返回值。

```
Python 2.6.2 (r262:71605, Apr 14 2009, 22:40:02) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> from PyQt4.QtCore import QCoreApplication
>>> from PyQt4.Qt import QApplication
>>> import sys
>>>
>>> QApp = QCoreApplication.instance()
>>> new_qapp_bit = False
>>> if QApp == None:
...     print 'running without the qt console'
...     new_qapp_bit = True
...     QApp = QApplication(sys.argv)
... else:
...     print 'found the qt console'
running without the qt console 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T06:06:13.810

这里有一个误解，试图从内核确定您是否不是从 qtconsole 运行的没有意义。并且 --pylab=qt 只是运行与事件循环的集成。这就像询问开发人员他的网站是用 Firefox 还是 Internet Explorer 编写的。以同样的方式，您可以使用多个浏览器访问网站，使用 IPython，您可以使用多个客户端（控制台、qtconsole、笔记本、emacs ......）连接到内核

# spring - TransactionRequiredException：没有事务正在进行 JPA 2 与 JpaRepository

> ID：15752964
> 
> 赞同：1
> 
> 时间：2013-04-01T22:22:17.330
> 
> 标签：spring, transactions, spring-data-jpa

我想将 JPA 与 Spring 数据一起使用。

# pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>net.betlista</groupId>
    <artifactId>tests-jpa-spring</artifactId>
    <version>0.0.1-SNAPSHOT</version>

    <dependencies>
        <dependency>
            <groupId>org.springframework.data</groupId>
            <artifactId>spring-data-jpa</artifactId>
            <version>1.3.0.RELEASE</version>
            <exclusions>
                <exclusion>
                    <artifactId>spring-core</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-context</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-aop</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-tx</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-beans</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-orm</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>3.2.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>3.2.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>3.2.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>3.2.2.RELEASE</version>
        </dependency>
        <dependency> 
             <groupId>org.springframework</groupId> 
             <artifactId>spring-aspects</artifactId> 
             <version>3.2.2.RELEASE</version> 
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>3.2.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>3.2.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>2.2.2</version>
        </dependency>

        <dependency>
            <groupId>org.hsqldb</groupId>
            <artifactId>hsqldb</artifactId>
            <version>2.2.9</version>
            <scope>system</scope>
            <systemPath>c:\JavaLibs\hsqldb-2.2.9\hsqldb.jar</systemPath>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>4.1.10.Final</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>4.1.10.Final</version>
        </dependency>
        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>1.4</version>
        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.10</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>3.2.2.RELEASE</version>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <inherited>true</inherited>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.5.1</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <encoding>UTF-8</encoding>
                    <showWarnings>true</showWarnings>
                    <showDeprecation>true</showDeprecation>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <repositories>
        <repository>
            <id>Apache Nexus</id>
            <url>https://repository.apache.org/content/repositories/snapshots/</url>
            <releases>
                <enabled>false</enabled>
            </releases>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
        </repository>
        <repository>
          <id>jboss-public-repository-group</id>
          <name>JBoss Public Maven Repository Group</name>
          <url>https://repository.jboss.org/nexus/content/groups/public-jboss/</url>
          <layout>default</layout>
          <releases>
            <enabled>true</enabled>
            <updatePolicy>never</updatePolicy>
          </releases>
          <snapshots>
            <enabled>true</enabled>
            <updatePolicy>never</updatePolicy>
          </snapshots>
        </repository>
    </repositories>

</project> 
```

# 应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:util="http://www.springframework.org/schema/util"
    xmlns:c="http://www.springframework.org/schema/c"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:jdbc="http://www.springframework.org/schema/jdbc"
    xsi:schemaLocation="
            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
            http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd
            http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-beans-3.1.xsd
            http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
            http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
        ">

    <tx:annotation-driven transaction-manager="transactionManager" />

<!--        class="org.springframework.jdbc.datasource.DataSourceTransactionManager" -->
    <bean id="transactionManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager"
        p:sessionFactory-ref="sessionFactory" />

    <bean
        scclass="org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate"
        c:dataSource-ref="dataSource" />

    <bean class="org.springframework.jdbc.core.JdbcTemplate"
        c:dataSource-ref="dataSource" />

    <util:properties id="hibernateProperties">
        <prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</prop>
        <prop key="hibernate.show_sql">false</prop>
        <prop key="hibernate.connection.release_mode">auto</prop>
        <prop key="hibernate.connection.autocommit">false</prop>
        <prop key="hibernate.default_batch_fetch_size">32</prop>
        <prop key="hibernate.jdbc.batch_size">32</prop>
    </util:properties>

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
<!--        <property name="mappingResources"> -->
<!--            <list> -->
<!--            </list> -->
<!--        </property> -->
<!--        <property name="annotatedClasses"> -->
<!--            <util:list> -->
<!--            </util:list> -->
<!--        </property> -->
        <property name="hibernateProperties" ref="hibernateProperties" />
    </bean>

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="org.hsqldb.jdbc.JDBCDriver" />
<!--        <property name="url" value="jdbc:hsqldb:file:src\main\resources\db\person" /> -->
        <property name="url" value="jdbc:hsqldb:file:c:/Betlista/WSs/Wicket/tests-jpa-spring/src/main/resources/db/person" />
        <property name="username" value="user" />
        <property name="password" value="password" />
    </bean>

    <bean
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
        id="entityManagerFactory">
        <property name="dataSource" ref="dataSource" />
    </bean>

    <context:spring-configured />
    <context:annotation-config />

</beans> 
```

# META-INF/persistence.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    version="1.0"
    xsi:schemaLocation="
            http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd
        ">
    <persistence-unit name="JpaPersistenceUnit"
        transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
    </persistence-unit>

</persistence> 
```

# 实体类

```
package net.betlista.tests.jpa.entity;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table( name = "PERSON" )
public class Person {

    @Id
    @GeneratedValue
    private Long id;

    @Column
    private String name;

    @Column
    private int age;

    public Long getId() {
        return this.id;
    }

    public void setId( final Long id ) {
        this.id = id;
    }

    public String getName() {
        return this.name;
    }

    public void setName( final String name ) {
        this.name = name;
    }

    public int getAge() {
        return this.age;
    }

    public void setAge( final int age ) {
        this.age = age;
    }

} 
```

# 服务

```
package net.betlista.tests.jpa.service;

import net.betlista.tests.jpa.entity.Person;

import java.util.List;

import org.springframework.stereotype.Service;

@Service
public interface IPersonService {

    List<Person> getAll();

    Person create( Person p );

} 
```

执行

```
package net.betlista.tests.jpa.service;

import net.betlista.tests.jpa.dao.IPersonRepository;
import net.betlista.tests.jpa.entity.Person;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

@Service
@Transactional
public class PersonService implements IPersonService {

    @Autowired
    IPersonRepository personRepository;

    // @Autowired
    // EntityManagerFactory entityManagerFactory;

    @Override
    public List<Person> getAll() {
        return this.personRepository.findAll();
    }

    @Transactional
    @Override
    public Person create( final Person p ) {
        // final EntityTransaction transaction = this.entityManagerFactory.createEntityManager().getTransaction();
        // transaction.begin();
        final Person savedPerson = this.personRepository.saveAndFlush( p );
        // transaction.commit();
        return savedPerson;

    }

} 
```

# 存储库

```
package net.betlista.tests.jpa.dao;

import net.betlista.tests.jpa.entity.Person;

import org.springframework.data.jpa.repository.JpaRepository;

public interface IPersonRepository extends JpaRepository<Person, Long> {

} 
```

# 配置

```
package net.betlista.tests.jpa.dao;

import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.ImportResource;
import org.springframework.data.jpa.repository.config.EnableJpaRepositories;

@Configuration
@EnableJpaRepositories
@ComponentScan( "net.betlista.tests.jpa" )
@ImportResource( "classpath:applicationContext.xml" )
public class JavaConfig {

} 
```

# 最后测试

```
package net.betlista.tests.jpa2;

import net.betlista.tests.jpa.dao.JavaConfig;
import net.betlista.tests.jpa.entity.Person;
import net.betlista.tests.jpa.service.IPersonService;

import java.util.List;

import org.junit.Assert;
import org.junit.Test;
import org.junit.runner.RunWith;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

@RunWith( SpringJUnit4ClassRunner.class )
@ContextConfiguration( classes = { JavaConfig.class } )
public class PersonServiceTest {

    @Autowired
    IPersonService personService;

    @Test
    public void testGetAll() {
        final List<Person> allPersons = this.personService.getAll();
        Assert.assertNotNull( allPersons );
        System.out.println( "person count: " + allPersons.size() );
    }

    @Test
    public void testCreate() {
        final Person person = new Person();
        person.setName( "B" );
        person.setAge( 22 );
        this.personService.create( person );
    }

} 
```

为了验证它是否是 HSQLDB 问题的可能性，我迁移到了 MySQL，但我仍然遇到同样的问题。我刚刚更换了`dataSource`配置。

```
<bean>
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://localhost:3306/person" />
    <property name="username" value="root" />
    <property name="password" value="pass" />
</bean> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:21:02.817

我完全改变了我的配置。测试和目标是一样的。当我写的时候我改变了我的配置，这意味着`persistence.xml`和`applicationContext.xml`（服务、实体和存储库是相同的）。

# 持久性.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.0"
    xsi:schemaLocation="
            http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd
        ">

    <persistence-unit name="personPersistenceUnit">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5InnoDBDialect"/>
        </properties>
    </persistence-unit>

</persistence> 
```

# 应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
    ">

    <tx:annotation-driven transaction-manager="transactionManager" />

    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="persistenceUnitName" value="personPersistenceUnit" />
        <property name="persistenceUnitManager">
            <bean class="org.springframework.orm.jpa.persistenceunit.DefaultPersistenceUnitManager">
                <property name="defaultDataSource" ref="dataSource" />
            </bean>
        </property>
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:3306/avon" />
        <property name="username" value="root" />
        <property name="password" value="" />
    </bean>

</beans> 
```

# perl - 在 Perl 中，如何测试字符串是否为回文？

> ID：15752965
> 
> 赞同：-3
> 
> 时间：2013-04-01T22:22:22.420
> 
> 标签：perl

我正在尝试编写一个 Perl 程序来确定 7 个字符的用户输入是否是回文。

不使用任何数组、字符串或反向函数。

期望的输出：

```
 Enter in a 7 character item: 1111111
    PALINDROME! 
```

或者

```
 Enter in a 7 character item: 1234567
    NOT A PALINDROME! 
```

这是我到目前为止所拥有的：

```
print "Enter in a 7 character item: \n";
my ($a, $b, $c, $d, $e, $f, $g);
chomp ($a=<>); chomp ($b=<>); chomp ($c=<>); chomp ($d=<>);
chomp ($e=<>); chomp ($f=<>); chomp ($g=<>);
if ($a~~$g && $b~~$g && $c~~$e){
    print "PALINDROME!\n";
}
else{
    print "NOT A PALINDROME! \n";
} 
```

不幸的是，这给了我这个结果：

```
 Enter in a 7 character item:
    1
    1
    1
    1
    1
    1
    1
    PALINDROME! 
```

如果有人有建议，将不胜感激。

我期待听到您的意见。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T22:29:54.970

这在我看来是正确的，毕竟`1111111`是回文！

但是，智能匹配运算符并不是一个非常有用的东西，并且您想在此处测试字符串是否相等，因此请使用`eq`而不是`~~`.

更好的是，我建议您允许用户输入整个字符串，所以

```
chomp(my $str = <>);

if ( $str eq reverse($str) ) {
     print "PALINDROME!\n";
}
else {
     print "NOT A PALINDROME! \n";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T23:18:28.890

不使用`reverse`：

```
#!/usr/bin/perl
use strict;
use warnings;

my ($word) = @_;

my @chars = split //, $word;
my $palindrome = 1;
for (0..@chars/2-1) {
   $palindrome = $chars[$_] eq $chars[-($_+1)]
      or last;
}

print "$word ".($palindrome ? "is" : "isn't")." a palindrome\n"; 
```

用法：

```
script word 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T22:36:19.497

改变

$b~~$g 到 $b~~$f 也可能有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-07T16:36:46.020

没有使用反向，而是正则表达式（和递归）。

```
 sub palyndromeP{
     my $s=shift;
     if (length($s)<2) {return 1}        
     if ($s !~ /^(.)(.*)\1$/) {return 0}
     return palyndromeP($2);
 } 
```

# java - JFormattedTextField 空指针异常

> ID：15752970
> 
> 赞同：0
> 
> 时间：2013-04-01T22:22:42.667
> 
> 标签：java, swing, nullpointerexception, jformattedtextfield

我有一个显示患者列表（ID/姓名/年龄）的面板。我有一个 jlist，当我单击患者时，它会将患者的数据链接到面板中的文本字段。

问题：当我尝试更新患者信息时，我的年龄 JFormattedTextField 出现 nullpointerexception，仅当我在点击更新之前未单击年龄文本字段时。

验证 1\. 所有文本字段为空 2\. 我单击一个患者，它使用患者信息更新文本字段 3\. 我将患者 ID 更改为不同的内容，然后单击更新 - > nullpointerexception

但是，如果我改为单击患者，然后单击年龄 JFTF，然后单击更新，它可以很好地读取数据。

有没有办法“点击”文本字段？

我的代码 = 当我点击 jlist

```
 int patientIndex = patientList.getSelectedIndex();
    if (patientIndex == -1) {
        return;
    }
    Object info = listModel.get(patientIndex);
    String infoString = (String) info;
    StringTokenizer st = new StringTokenizer(infoString);
    idTF.setText(st.nextToken());
    if (idTF.getText().equals("Empty")) {
        idTF.setText("");
        return;
    }

    firstNameTF.setText(st.nextToken());
    lastNameTF.setText(st.nextToken());
    ageTF.setText(st.nextToken()); 
```

-

```
 String fName, lName, id, id2;    //  For now the ID will be name+age
    int age;
    Patient p = new Patient();
    boolean gender;

    //  attempts to read the text fields 
    try {
        fName = firstNameTF.getText();
        lName = lastNameTF.getText();
        id = idTF.getText();
        age = ((Number) ageTF.getValue()).intValue();            
        System.out.println("age = " + age);
        } catch (NullPointerException ex) {
        System.out.println(ex.getMessage());
        statusLabel.setText("All fields marked by a * are requried!");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:52:03.333

我使用错误的函数将年龄添加到年龄字段。由于它已格式化，我必须使用 setValue()。

旧代码

```
ageTF.setText(st.nextToken());

ageTF.setValue(Integer.valueOf(st.nextToken())); 
```

# php - 分离 foreach 项目并单独打印

> ID：15752971
> 
> 赞同：0
> 
> 时间：2013-04-01T22:22:47.540
> 
> 标签：php, arrays, foreach

我目前在尝试解耦这个 foreach 数组时遇到了一些麻烦。它基本上将所有复选框作为一个组（小部件）打印在一个表单中。

```
<?php foreach ($widgets as $id => $widget): ?>  
 <label for="<?php print $widget->id; ?>">
      <?php print $widget->label; ?>
 </label>
      <?php print $widget->id; ?> 
```

在 $widgets 上执行 print_r 函数会显示 ff: 数组：

```
Array
(
[filter-tid] => stdClass Object
    (
        [widget] => 
Option 1
Option 2
Option 3
        [operator] => 
        [label] => label here
        [id] => edit-id-here
    )

[filter-tid_1] => stdClass Object
    (
        [widget] => 
Option 1
Option 2
Option 3
        [operator] => 
        [label] => label here
        [id] => edit-id-here
    )

   ....... and so on.... 
```

我将如何分别打印 foreach 中的每个项目？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:28:05.863

你可以嵌套`foreach`and 循环`$widget->widget`

```
<?php foreach ($widgets as $id => $widget): ?>
    <?php foreach ($widget->widget as $option): ?> 
```

# python - Python：如何同时发送多个 http 请求？（像叉子）

> ID：15752973
> 
> 赞同：6
> 
> 时间：2013-04-01T22:22:59.023
> 
> 标签：python, django, process, fork, httprequest

假设我有一种方法可以将[http 请求发送](http://docs.python-requests.org/en/latest/)到服务器。如何同时向服务器发送两个（或更多）请求？例如，也许通过分叉一个进程？我该怎么做？（我也在使用 django）

```
#This example is not tested...
import requests

def tester(request):
    server_url = 'http://localhost:9000/receive'

    payload = {
        'd_test2': '1234',
        'd_test2': 'demo',
        }
    json_payload = simplejson.dumps(payload)
    content_length = len(json_payload)

    headers = {'Content-Type': 'application/json', 'Content-Length': content_length}
    response = requests.post(server_url, data=json_payload, headers=headers, allow_redirects=True)

    if response.status_code == requests.codes.ok:
        print 'Headers: {}\nResponse: {}'.format(response.headers, response.text) 
```

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-01T22:41:27.203

我认为您想在这里使用线程而不是分叉新进程。虽然在某些情况下线程很糟糕，但这里并非如此。另外，我认为您想使用[`concurrent.futures`](http://docs.python.org/3/library/concurrent.futures.html)而不是直接使用线程（或进程）。

例如，假设您有 10 个 URL，并且您当前正在连续执行一个，如下所示：

```
results = map(tester, urls) 
```

但是现在，您想一次发送 2 个。只需将其更改为：

```
with concurrent.futures.ThreadPoolExecutor(max_workers=2) as pool:
    results = pool.map(tester, urls) 
```

如果您想一次尝试 4 个而不是 2 个，只需更改`max_workers`. 事实上，您可能应该尝试不同的值来查看最适合您的程序的值。

如果您想做一些更花哨的事情，请参阅文档——主要的[ThreadPoolExecutor 示例](http://docs.python.org/3/library/concurrent.futures.html#threadpoolexecutor-example)几乎正是您正在寻找的。

不幸的是，在 2.7 中，该模块不附带标准库，因此您必须从 PyPI安装[backport 。](https://pypi.python.org/pypi/futures)

如果您已经[`pip`](http://www.pip-installer.org/en/latest/)安装，这应该很简单：

```
pip install futures 
```

……或者也许`sudo pip install futures`，在 Unix 上。

如果您没有`pip`，请先获取它（按照上面的链接）。

* * *

您有时想要使用进程而不是线程的主要原因是您有大量的 CPU 密集型计算，并且您希望利用多个 CPU 内核。在 Python 中，线程不能有效地用完所有的内核。因此，如果任务管理器/活动监视器/任何显示您的程序在一个内核上使用了 100% 的 CPU，而其他内核都为 0%，那么进程就是答案。有了`futures`，您所要做的就是更改`ThreadPoolExecutor`为`ProcessPoolExecutor`.

* * *

同时，有时您需要的不仅仅是“给我一个神奇的工人池来运行我的任务”。有时您想运行一些非常长的作业而不是一堆小的作业，或者自己对作业进行负载平衡，或者在作业之间传递数据，等等。为此，您想使用[`multiprocessing`](http://docs.python.org/2/library/multiprocessing.html)or[`threading`](http://docs.python.org/2/library/threading.html)代替`futures`.

很少，即使*是*太高级了，直接告诉 Python 创建一个新的子进程或线程。为此，您一直到[`os.fork`](http://docs.python.org/2/library/os.html#os.fork)（仅在 Unix 上）或[`thread`](http://docs.python.org/2/library/thread.html).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T22:29:59.547

我会使用`gevent`，它可以在所谓的绿色线程中启动所有这些：

```
# This will make requests compatible
from gevent import monkey; monkey.patch_all()
import requests

# Make a pool of greenlets to make your requests
from gevent.pool import Pool
p = Pool(10)

urls = [..., ..., ...]
p.map(requests.get, urls) 
```

当然，这个例子提交了`get`s，但是 pool 被泛化为将输入映射到任何函数，包括，比如说，你的请求。这些 greenlets 将几乎与使用同时运行，`fork`但速度更快，重量更轻。

# css - 我的 LI 按钮在 Firefox 中“更高”

> ID：15752975
> 
> 赞同：0
> 
> 时间：2013-04-01T22:23:03.233
> 
> 标签：css, firefox

我有一个导航菜单，它使用列表项作为按钮，按钮底部有一个颜色条。在大多数浏览器中，颜色栏显示在按钮底部，按钮内部。但在 Mac Firefox 上，颜色栏显示在按钮底部，超出按钮。因此，仅在 Mac Firefox 上，我的按钮比应有的高得多。有关如何让这些按钮在 Firefox 中正确显示以匹配它们在其他浏览器上显示更短的任何建议？

[http://jsfiddle.net/trevoray/CEXts/3/](http://jsfiddle.net/trevoray/CEXts/3/)

```
 .nav > li {
padding: 0;
float: left;
background: linear-gradient(to bottom,  rgba(255,255,255,1) 0%, rgba(183,183,183,1) 50%, rgba(249,249,249,1) 100%);
border-right: 1px solid #5d5d5d;
border-left: 1px solid #929292;
width: 169px;
height: 45px;
border-top: 1px solid #797979;
border-bottom: 1px solid #575757;
font-family: "Lucida Sans Unicode", "Lucida Grande", Verdana, Arial, Helvetica, sans-serif;
letter-spacing: -0.5px;
font-size: 14px;
text-shadow: 0 -1px 3px #CCCCCC;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:27:43.493

老实说，我不知道为什么会这样，但如果你`height: 45px`从`li`样式中删除，一切看起来都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T22:28:25.853

只需将边距设置为 0

```
 .nav > li {
 margin: 0;
 } 
```

在我看来很好...

# node.js - 我的 node.js 网络“事件：数据”回调是否阻塞并阻止了新的 TCP 消息接收？

> ID：15752977
> 
> 赞同：0
> 
> 时间：2013-04-01T22:23:14.660
> 
> 标签：node.js, tcp, blocking

我有一个使用 net.connect 创建的 node.js TCP 连接，它使用 Event:'data' 回调来侦听传入数据。如果我几乎同时收到两条或更多条消息，我会丢失所有消息，但第一条除外。我在 Event:'data' 回调中所做的处理会导致我错过传入的消息吗？

```
myConnection = net.connect(18000, 192.168.1.50);
myConnection.on('data', function(data) {
  console.log("Received data");
  //time consuming process here (more than a few milliseconds)
}); 
```

如果两个或多个 TCP 消息（每个小于 200 字节）快速（在几毫秒内）发送到我的节点应用程序，则控制台仅打印一条消息：

```
Received data 
```

运行 onData 回调时，Node 是否丢失了第二条和以后的消息？节点是否对消息进行排队，所以即使我在回调中，后续消息也会等待读取？发送我的 Node 应用程序消息的程序有可能没有正确发送它们，但我看过它，它似乎正在发送它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T01:59:45.807

您是否尝试输出接收到的数据？我认为您的所有数据都已正确接收。不能保证`data`事件的数量会等于`write`方法的数量，因为它只是一个流。

# drupal-7 - Drupal 7，使用 WHERE 和 AND 进行查询

> ID：15752981
> 
> 赞同：1
> 
> 时间：2013-04-01T22:23:46.843
> 
> 标签：drupal-7

我会使用这个查询：

```
SELECT g.id_site, g.commune, g.latitude, g.longitude, g.altitude, g.date, g.id_fiche, a.essence, e.nom_espece, e.effectif 
FROM general g, arbre a, espece e
WHERE g.nom = a.nom AND g.id_fiche = e.id_fiche AND g.id_fiche = a.id_fiche 
```

使用 drupal 7 API。我试试这个：

```
 $query = db_select('general' ,'g');
        $query -> join ('arbre','a','a.nom = g.nom');
        $query -> join ('espece','e','e.nom = a.nom');
        $query -> fields ('g', array('commune','latitude','longitude','altitude','date','id_fiche'));
        $query -> fields ('a', array('essence'));
        $query -> condition ('g.id_fiche','e.id_fiche','=');
        $query -> condition ('g.id_fiche','a.id_fiche','='); 
```

但我没有得到任何结果：/问题是这两行：

```
 $query -> condition ('g.id_fiche','e.id_fiche','=');
        $query -> condition ('g.id_fiche','a.id_fiche','='); 
```

如果我评论这两行，我有一个结果（但没有 WHERE 子句）。我应该怎么做才能正确使用 WHERE 子句？

谢谢=）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:32:39.723

忽略查询问题，只关注答案：

试试这个：我认为您只需要定义您实际要使用的所有字段。如果这仍然不起作用，请尝试使用[Where](http://drupal.org/node/310086)子句

```
$query = db_select('general' ,'g');
$query -> join ('arbre','a','a.nom = g.nom');
$query -> join ('espece','e','e.nom = a.nom');
$query -> fields ('e', array('id_fiche','nom'));
$query -> fields ('g', array('commune','latitude','longitude','altitude','date','id_fiche','nom'));
$query -> fields ('a', array('essence','nom'));
$query -> condition ('g.id_fiche','e.id_fiche','=');
$query -> condition ('g.id_fiche','a.id_fiche','='); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T17:45:11.663

你可以使用 db_query()，我发现这个方法更有用。

# c++ - Boyer Moore 实现 C++

> ID：15752986
> 
> 赞同：-4
> 
> 时间：2013-04-01T22:24:10.897
> 
> 标签：c++, boyer-moore

[http://igm.univ-mlv.fr/~lecroq/string/node14.html#SECTION00140](http://igm.univ-mlv.fr/~lecroq/string/node14.html#SECTION00140)

我不知道那个函数：“OUTPUT(j)”是什么意思，有人可以帮我吗？函数 MAX()？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:25:38.703

`MAX`只是`std::max`（存在于 C++ 中但不存在于 C 中；该页面是 C 代码）。

`OUTPUT(j)`你必须提供，在找到匹配项时做一些事情。

# jquery - 相同名称和值的 JQuery 单选按钮 - 单击单选按钮时显示隐藏的 div | 埃克维德

> ID：15752990
> 
> 赞同：0
> 
> 时间：2013-04-01T22:24:31.653
> 
> 标签：jquery, radio-button

我正在使用 Ecwid 购物车，并希望根据是否选中单选按钮来隐藏/显示产品中的一些选项。

我的测试产品在这里：

[http://www.farmboutique.com/testproduct1.html#!/~/product/category=5128132&id=21349373](http://www.farmboutique.com/testproduct1.html#!/~/product/category=5128132&id=21349373)

我隐藏了一些关于使用 javascript 加载页面的选择。

现在我想在有人单击单选按钮时显示隐藏的选择：

> 是（不超过 9 厘米 x 9 厘米）（+4.50 英镑）

在“您需要刺绣徽标”选项下。

加载页面时始终选择默认值“不需要”。

同样，如果有人在页面加载后单击“是”选项，然后通过选择“不需要”改变主意，它应该会使其他选项再次消失。

“是（不超过 9 厘米 x 9 厘米）（+4.50 英镑）”和“不需要”单选按钮的 html 代码是：

```
 <div id="ecwid-productoption-21349373-Do_You_Require_An_Embroidered_Logo-container" class="ecwid-productBrowser-details-optionPanel ecwid-productBrowser-details-optionPanel-radio ecwid-productoption-Do_You_Require_An_Embroidered_Logo-container">

    <label class="ecwid-fieldLabel" for="gwt-uid-5">Do You Require An Embroidere​d Logo</label>

    <div id="gwt-uid-5"><span class="gwt-RadioButton ecwid-productBrowser-details-optionRadioButton ecwid-productoption-Do_You_Require_An_Embroidered_Logo-Yes_:0028no_more_than_9cm_x_9cm:0029" id="ecwid-productoption-21349373-Do_You_Require_An_Embroidered_Logo-Yes_:0028no_more_than_9cm_x_9cm:0029">

    <input type="radio" name="21349373-Do You Require An Embroidered Logo" value="on" id="gwt-uid-3" tabindex="0">

    <label for="gwt-uid-3"><span class="ecwid-productBrowser-details-optionRadioButton-name">Yes (no more than 9cm x 9cm)</span>

    <span class="ecwid-productBrowser-details-optionRadioButton-price"> <span class="ecwid-productBrowser-details-optionRadioButton-bracket">(</span>

    <span class="ecwid-productBrowser-details-optionRadioButton-sign">+</span>

    <span>£</span>4.50<span class="ecwid-productBrowser-details-optionRadioButton-bracket">)</span></span></label></span>

    <span class="gwt-RadioButton ecwid-productBrowser-details-optionRadioButton ecwid-productoption-Do_You_Require_An_Embroidered_Logo-Not_Required" id="ecwid-productoption-21349373-Do_You_Require_An_Embroidered_Logo-Not_Required">

<input type="radio" name="21349373-Do You Require An Embroidered Logo" value="on" id="gwt-uid-4" tabindex="0" checked="">

<label for="gwt-uid-4"><span class="ecwid-productBrowser-details-optionRadioButton-name">Not Required</span></label></span></div></div> 
```

上面的21349373就是product Id = page.productId

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:39:14.020

我认为你可以这样做。主要问题是我找不到任何有效的选择器来定位您的单选按钮，因为它的名称中有空格，我不能确定生成的`id`不会改变。尝试在您的元素上添加一些静态属性，以便更轻松地查询它们。如果您无法控制`id`和`name`属性，则可以添加一些其他自定义属性。

```
$(function () {
    //get a reference to your hidden div
    var $divIfRequired = $('[id*=If_you_require_a_logo_to_be]');

    //add a click handler on your radio button
    $('put_some_selector_here').click(function () {
        //show or hide the div based on the checked status of the radio button
        $divIfRequired[this.checked? 'show': 'hide']();
    });
}); 
```

# c++ - 这个语法是什么意思

> ID：15752992
> 
> 赞同：1
> 
> 时间：2013-04-01T22:24:48.690
> 
> 标签：c++, most-vexing-parse

以下代码编译。但是如果我编写代码来调用`test`使用`jar`它的方法会给我一个编译错误。这里真正发生了什么。

```
#include <iostream>    

using namespace std;

class A {
public:
  void test() {
    cout << "working" << endl;
  }
};

int main() {
  A foo;
  A jar();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T22:28:27.850

```
 A jar(); 
```

声明一个`jar`没有任何参数的函数，返回类型是类的对象`A`。

你不能在里面声明一个函数`main`，因此你得到了错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T22:31:11.830

如果你试图声明一个名为的函数指针`ptr`，你应该像这样声明它：

```
A (*ptr)(void); 
```