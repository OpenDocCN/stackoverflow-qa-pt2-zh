# StackOverflow 问答 15429000-15429999

# c# - 如何在windows phone中本地化电话号码？

> ID：15429003
> 
> 赞同：1
> 
> 时间：2013-03-15T09:42:06.483
> 
> 标签：c#, localization, windows-phone, string-formatting

我可以按照当前文化格式化电话号码吗？例如，要根据文化格式化价格，我使用这个：

```
public object Convert(object value, Type targetType, object para, System.Globalization.CultureInfo culture)
        {
            string currency = value.ToString();
        if (!string.IsNullOrEmpty(currency) && !string.IsNullOrWhiteSpace(currency))
        {
            Int64 C;
            bool result = Int64.TryParse(currency, out C);

            if (result)
            {
                currency = "Price: " + C.ToString("C", culture);
            }
        }

        return currency;
    } 
```

这将根据文化显示我的价格（对于 es-ES 文化 -> 价格：如果值 = 5，则为 5 美元）。有没有办法为电话号码做类似的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:04:38.153

我不相信有显示本地化电话号码的内置方法，但 Stack Overflow 上的一个非常相似的问题提供了一个适合您的解决方案概念。请参阅此处： [在 asp.net 中以不同国家/地区格式显示电话号码。使用语言环境](https://stackoverflow.com/questions/7481539/display-phone-number-in-different-country-format-in-asp-net-using-locale)

# c++ - 如何在列表框中而不是编辑框中显示信息？

> ID：15429007
> 
> 赞同：0
> 
> 时间：2013-03-15T09:42:15.553
> 
> 标签：c++, visual-studio, mfc, listbox, editbox

我想在 mfc 中创建一个客户端服务器程序，我从这个网站找到了一些非常好的源代码：http: [//www.softwareandfinance.com/Visual_CPP/TCP_Client_Server.html](http://www.softwareandfinance.com/Visual_CPP/TCP_Client_Server.html)

好的，有人可以帮我在列表框中而不是编辑框中显示信息吗？

这是处理客户端的代码：

```
static void f(void *p)
{
    CSocketTestServerDlg *pDlg = reinterpret_cast<CSocketTestServerDlg*>(p);
    pDlg->ProcessClientRequest();
}

void CSocketTestServerDlg::ProcessClientRequest()
{
    SOCKADDR_IN clientaddr;
    struct hostent *hostentry;
    int len = sizeof(clientaddr);
    SOCKET clientsocket = accept(m_serversocket, (sockaddr*)&clientaddr, &len);

    if(len == -1)
    {
        AfxMessageBox("Error accpeting the client socket");
    }
    else
    {
        char *p = inet_ntoa(clientaddr.sin_addr);
        int portno = ntohs(clientaddr.sin_port);
        // int inet_pton(int af, const char *restrict src, void *restrict dst);

        char rbuf[1024];
        recv(clientsocket, rbuf, 1024, 0);
        for(int i = 1024; i >= 1; i--)
        {
            if(rbuf[i] == '\n' && rbuf[i - 1] == '\r')
            {
                rbuf[i-1] = '\0';
                break;
            }
        }

        CString strRecvData;

        strRecvData.Format("%s\r\n%s %d\r\n%s\r\n\r\n", (const char*)CTime::GetCurrentTime().Format("%B %d, %Y %H:%M:%S"), p, portno, rbuf);
        m_recvData += strRecvData;
        m_bRefershData = true;
        strcat(rbuf, "\r\n");
        send(clientsocket, rbuf, 1024, 0);
        closesocket(clientsocket);
    }
} 
```

那么我怎样才能从客户端获取 IP 地址以显示在列表框中？我不需要所有其他信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:32:55.837

好吧，您已经将 IP 作为字符串 in 了`p`，不是吗？

您可以从中创建一个 CString 以避免 UNICODE 问题。然后使用 CListBox::AddString 输出你的字符串：

```
char *p = inet_ntoa(clientaddr.sin_addr);

CString str(p);

//CListBox listbox;

listbox.AddString(str); 
```

# java - 如何在 Java 中将 TIFF 转换为 JPEG/PNG

> ID：15429011
> 
> 赞同：13
> 
> 时间：2013-03-15T09:42:25.343
> 
> 标签：java, image, tiff, jai

最近我在尝试显示图像文件时遇到了问题。不幸的是，图像格式是主要网络浏览器不支持的 TIFF 格式（我知道只有 Safari 支持这种格式）。由于某些限制，我必须将此格式转换为主流浏览器支持的其他格式。但是，当我尝试转换格式时，它给我带来了很多问题。

我在网上搜索过，虽然在这个链接中发布了类似的问题[How do I convert a TIF to PNG in Java?](https://stackoverflow.com/questions/2291358/how-do-i-convert-a-tif-to-png-in-java) “但我不能得到它建议的结果..

因此，我再次提出这个问题，希望大家能得到更好的解释和指导。

在解决建议的解决方案过程中，我遇到的问题很少：

**1）根据Jonathan Feinberg**提出的答案，需要安装JAI和JAI/ImageIO。但是，在我安装了它们之后，我仍然无法在 Netbean 7.2 中导入文件。NetBean 7.2 仍然建议导入默认 imageIO 库。

2) 当我使用默认 ImageIO 库读取方法时，它将返回 NULL 值，我无法继续进行。

3）我也尝试了其他方法，例如使用 BufferedOutputStream 方法将 TIFF 文件转换为 BIN 文件，但结果文件大于 11 MB，太大而无法加载，最终加载失败。

```
 if (this.selectedDO != null) {
        String tempDO = this.selectedDO.DONo;
        String inPath = "J:\\" + tempDO + ".TIF";
        String otPath = "J:\\" + tempDO + ".bin";

        File opFile = new File(otPath);

        File inFile = new File(inPath);

        BufferedInputStream input = null;
        BufferedOutputStream output = null;
        try {
            input = new BufferedInputStream(new FileInputStream(inPath), DEFAULT_BUFFER_SIZE);
            output = new BufferedOutputStream(new FileOutputStream(otPath), DEFAULT_BUFFER_SIZE);

            byte[] buffer = new byte[DEFAULT_BUFFER_SIZE];
            int length;
            while ((length = input.read(buffer)) > 0) {
                output.write(buffer, 0, length);
            }

        } finally {
            try {
                output.flush();
                output.close();
                input.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        } 
```

因此，希望能得到大家的帮助和建议，以便我可以将 TIFF 格式转换为其他格式，例如 JPEG/PNG。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-07-10T02:31:39.943

经过一些研究和测试，找到了一种将 TIFF 转换为 JPEG 的方法，很抱歉这么久才上传这个答案。

```
SeekableStream s = new FileSeekableStream(inFile);
TIFFDecodeParam param = null;
ImageDecoder dec = ImageCodec.createImageDecoder("tiff", s, param);
RenderedImage op = dec.decodeAsRenderedImage(0);

FileOutputStream fos = new FileOutputStream(otPath);
JPEGEncodeParam jpgparam = new JPEGEncodeParam();
jpgparam.setQuality(67);
ImageEncoder en = ImageCodec.createImageEncoder("jpeg", fos, jpgparam);
en.encode(op);
fos.flush();
fos.close(); 
```

`otPath`是您想要存储 JPEG 图像的路径。例如：“C:/image/abc.JPG”；
`inFile`是输入文件，它是 TIFF 文件

至少这种方法对我来说是可行的。如果还有其他更好的方法，请与我们一起分享。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-11-15T07:05:24.557

1.  添加依赖

    ```
     <dependency>
     <groupId>com.github.jai-imageio</groupId>
     <artifactId>jai-imageio-core</artifactId>
     <version>1.3.1</version> </dependency> 
    ```

[https://mvnrepository.com/artifact/com.github.jai-imageio/jai-imageio-core](https://mvnrepository.com/artifact/com.github.jai-imageio/jai-imageio-core)

[https://mvnrepository.com/artifact/com.github.jai-imageio/jai-imageio-core/1.3.1](https://mvnrepository.com/artifact/com.github.jai-imageio/jai-imageio-core/1.3.1)

2.  编码

    ```
    final BufferedImage tif = ImageIO.read(new File("test.tif"));
    ImageIO.write(tif, "png", new File("test.png")); 
    ```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-05-25T08:29:55.320

如果页面很多，请执行以下操作：

1.  添加依赖：

    ```
    <dependency>
        <groupId>com.github.jai-imageio</groupId>
        <artifactId>jai-imageio-core</artifactId>
        <version>1.4.0</version>
    </dependency> 
    ```

2.  使用以下 Java8 代码

    ```
    public void convertTiffToPng(File file) {
    try {
        try (InputStream is = new FileInputStream(file)) {
            try (ImageInputStream imageInputStream = ImageIO.createImageInputStream(is)) {
                Iterator<ImageReader> iterator = ImageIO.getImageReaders(imageInputStream);
                if (iterator == null || !iterator.hasNext()) {
                    throw new RuntimeException("Image file format not supported by ImageIO: " + file.getAbsolutePath());
                }

                // We are just looking for the first reader compatible:
                ImageReader reader = iterator.next();
                reader.setInput(imageInputStream);

                int numPage = reader.getNumImages(true);

                // it uses to put new png files, close to original example n0_.tiff will be in /png/n0_0.png
                String name = FilenameUtils.getBaseName(file.getAbsolutePath()); 
                String parentFolder = file.getParentFile().getAbsolutePath();

                IntStream.range(0, numPage).forEach(v -> {
                    try {
                        final BufferedImage tiff = reader.read(v);
                        ImageIO.write(tiff, "png", new File(parentFolder + "/png/" + name + v + ".png"));
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                });
            }
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
    } 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-17T17:51:32.087

如果您的目标是 Android，您可以在 Github 上尝试[这个很棒的 Java 库](https://github.com/Beyka/Android-TiffBitmapFactory)，它提供了许多用于处理、打开和编写 .tiff 文件的实用程序。

来自 Git 的一个简单示例展示了如何将 TIFF 转换为 JPEG：

```
TiffConverter.ConverterOptions options = new TiffConverter.ConverterOptions();
//Set to true if you want use java exception mechanism
options.throwExceptions = false; 
//Available 128Mb for work
options.availableMemory = 128 * 1024 * 1024; 
//Number of tiff directory to convert;
options.readTiffDirectory = 1;         
//Convert to JPEG
TiffConverter.convertTiffJpg("in.tif", "out.jpg", options, progressListener); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T09:54:22.490

首先，看看[什么是最好的 java 图像处理库/方法？](https://stackoverflow.com/questions/603283/what-is-the-best-java-image-processing-library-approach). 对于您的代码，您可以使用

```
javax.imageio.ImageIO.write(im, type, represFile); 
```

就像您在[将图像写入文件示例](http://www.mkyong.com/java/how-to-write-an-image-to-file-imageio/)中看到的那样。

# php - 如何在一个表单html&php上设置两个按钮

> ID：15429016
> 
> 赞同：0
> 
> 时间：2013-03-15T09:42:51.583
> 
> 标签：php, html

这个表单应该计算数字并保存现在有两个按钮一个是调用计算器，两个调用保存如果我按计算器我得到表单操作将文件名 save.php 我不希望这样我该如何设置它向上那个按钮做别的事例

计算器 = 计算器

保存=保存.php

是否可以设置它因为它是一种形式感谢任何可以帮助的人

```
<?php
error_reporting (0);
$NUM = $_POST["NUM"];
$NUM2 = $_POST["NUM2"];
$NUM = "$NUM";
$NUM2 = "$NUM2";
$subtotal= $NUM+$NUM2;
?>

<form action="save.php" method="POST" name="Calculator">
<p>
<input name="NUM" type="text" value="<?php echo $_POST["NUM"]; ?>" />
</p>
<p>+</p>
<p>
<input name="NUM2" type="text" value="<?php echo $_POST["NUM2"]; ?>" />
</p>
<p>
<input name="subtotal" type="text" value="<?php echo "$subtotal";?>" />
 </p>
<p>
<input name="submit" type="submit" value="Calculator" />
 <p>
<input name="submit" type="submit" value="Save" />
</p>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T09:45:44.957

您可以在一个 PHP 脚本中包含所有逻辑（无需根据按钮指向不同的脚本）。如果逻辑复杂，可以使用include语句来分隔代码。

以不同的方式命名按钮：

```
<input name="calculator_submit" type="submit" value="Calculator" />
<input name="save_submit" type="submit" value="Save" /> 
```

然后在 PHP 中：

```
if (isset($_GET['calculator_submit'])) {
  // ...
} else if (isset($_GET['save_submit'])) {
  // ...
} else {
  // ...
} 
```

如果您真的需要不同的 PHP 脚本，那么您将不得不使用 Javascript（当单击提交时，该函数将更改表单操作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:45:47.570

由于您现在使用两个提交按钮，因此两者都将提交表单并转到 save.php。

使您的“计算器”按钮成为输入类型=按钮而不是提交，并通过 JavaScript 处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T09:56:18.657

仅供参考：

HTML5 允许通过[`formaction`](http://www.w3.org/TR/html5/forms.html#attr-fs-formaction)在提交按钮上指定属性来定义不同的表单目标 URL——但[目前浏览器支持很糟糕](http://mdn.beonex.com/en/HTML/Element/button.html#Compatibility)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-15T09:54:43.810

表单和按钮

```
<input name="submit" type="button" onclick="submitForm('Calculator')" value="Calculator" />
<input name="submit" type="button" onclick="submitForm('Save.php')" value="Save" /> 
```

一些jQuery：

```
function submitForm(path) {
    $('#Calculator').attr('action', path);
    $('#Calculator').submit();
} 
```

# c# - 在sql中使用'if'

> ID：15429017
> 
> 赞同：-5
> 
> 时间：2013-03-15T09:43:02.013
> 
> 标签：c#, sql, sql-server-express

我的应用程序中有一个搜索字段，并且我正在使用 SQL。

我的应用程序有 3 个独立`ComboBox`的 es，允许用户选择他/她想要搜索的内容。

例如，我们有,`Name`在搜索字段中，我想选择有 的人或有的人。`family name``age``age 20``age 20 and named "john" or other states`

那么我应该使用`IF`, `ELSE`,的一般程序`WHERE`来支持所有这些状态吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:47:38.677

假设变量`@Age`,`@Name`和`@FamilyName`

```
SELECT *
FROM tbl
WHERE
    (@Age IS NULL OR Age == @Age)
    AND (@Name IS NULL OR Name LIKE '%' + @Name + '%')
    AND (@FamilyName IS NULL OR FamilyName LIKE '%' + @FamilyName+ '%') 
```

不需要做if。但是如果你想在 sql 中做一个 IF 它是`CASE WHEN <true state> THEN <true action> ELSE <false action> END`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:47:27.293

sql 中 If-Else 的语法是

```
IF yourconditon
BEGIN
  //sql query
END
ELSE
  BEGIN
     //sqlquery
   End 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T09:51:55.110

你如何在数据库中执行你的sql？它是数据库中的存储过程，还是您只是将 sql 语句发送到数据库。

如果是第二个，只需在您的 c# 代码中执行 if-then-else 操作并将不同的 sql 语句发送到您的数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T09:54:15.673

您有几个不同的选择，并且建议对两者进行性能测试（一如既往）。

1.  动态 SQL。

根据使用的参数动态构建 SQL，所以；

```
declare sqlTxt VARCHAR(max)
delcare params VARCHAR(128)

params = 'Age INT, Name VARCHAR(128), FamilyName VARCHAR(128)'
sqlText = 'SELECT field Name From Table WHERE 1=1'

IF (IS NOT NULL) sqlText += 'AND Age == @Age '
IF (IS NOT NULL) sqlText += 'AND Name LIKE %@Name%'
IF (IS NOT NULL) sqlText += 'AND FamilyName LIKE %FamilyName%'

EXEC sp_executesql @sqlText, @params, @Age = @Age, @Name = @Name, @FamilyName = @FamilyName 
```

1.  SQL 中的句柄

使用 Eli Gassert 发布的解决方案。

一般来说，对于较小的查询，您应该可以使用选项 2，但如果您扩展搜索以包含许多不同的参数，请注意“参数嗅探”，这可能会减慢您的速度。

如果性能是一个问题，基本上测试两种方式。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-15T09:51:55.513

您应该做的是根据用户选择的内容在您的 Windows 项目中创建 SQL。

```
StringBuilder mySQL = new StringBuilder();

if(Name != "")
  mySQL.Append("Name like '%" + Name + "'%");

if(mySQL != "" && (familyName != "" || age != ""))
  mySQL.Append(" AND");

if(familyName != "")
  mySQL.Append(" familyName like '%" + familyName + "%'); 
```

并继续你的其他条件。将 stringbuilder 字符串附加到您的 SELECT 查询中。

```
string finalSQL = "SELECT * FROM MyTable WHERE " + mySQL.toString(); 
```

# c# - Asp.net web api windows 模拟和实体框架

> ID：15429021
> 
> 赞同：0
> 
> 时间：2013-03-15T09:43:16.687
> 
> 标签：c#, asp.net-mvc, entity-framework

我有通过 Active Directory 域获得 Windows 授权的 asp.net mvc 4 web api 站点。其中一部分是api控制器，通过实体框架查询sql server。Asp.net 调整得很好 - 我知道，该用户在 api 方法中被模拟。但是 EF 使用匿名凭据查询数据库。

web.config 的一部分

```
 <authentication mode="Windows" />
    <identity impersonate="true" />

    <authorization>
      <deny users="?" />
    </authorization> 
```

部分方法：

```
 var winId = (WindowsIdentity) HttpContext.Current.User.Identity;            
    WindowsImpersonationContext ctx = null;
    try
    {
        ctx = winId.Impersonate();

        var ret = DAL.DBPort.Instance.GetDivisionStructure();
        // ret.Name = identy.AuthenticationType.ToString();
        return ret;
    }
    catch (Exception exception)
    {
        return null;
    }
    finally
    {
        if (ctx != null)
        {
            ctx.Undo();
        }
    } 
```

我`m constantly getting "underlying provider failed to open". While having impersonation, asp.net still uses anonymous or system account in database connection. Don`不知道，在这里做什么。

# sql-server-2008 - 将月份列表与表格的日期字段进行比较

> ID：15429032
> 
> 赞同：0
> 
> 时间：2013-03-15T09:44:11.223
> 
> 标签：sql-server-2008, count, comparison, smalldatetime

我正在使用 sql server 2008 我的数据库中的表是这样的：

![桌子](../Images/e15d014554a3c3169cd36856f53fd00a.png)

我想要这样的输出：

![在此处输入图像描述](../Images/6519a57f7476cbc90b3269464baa54cd.png)

正如我的表中所示，我有 DateField，它具有 smalldatetime 数据类型以及水果和蔬菜字段。我想要这样的输出，它显示每月的数据。月份比较应该基于我的表的 DateField 进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:32:47.430

你可以使用类似的东西：

```
select [Month] = month(DateField)
  , [MonthName] = left(datename(mm, DateField), 3)
  , TotalAmountApple = sum(case when fruits = 'Apple' then 1 else 0 end)
  , TotalAmountOnion = sum(case when vegi = 'Onion' then 1 else 0 end)
from produce
group by month(DateField)
  , left(datename(mm, DateField), 3)
order by [Month] 
```

完整的测试详细信息（没有 SQL Fiddle，因为它遇到了问题）：

```
create table produce
(
  id int
  , fruits varchar(10)
  , vegi varchar(10)
  , DateField smalldatetime
)

insert into produce
select 1, 'Apple', 'Chilly', '01-jan-2013'
insert into produce
select 1, 'Mango', 'Onion', '15-jan-2013'
insert into produce
select 1, 'Mango', 'Chilly', '20-jan-2013'
insert into produce
select 1, 'Apple', 'Chilly', '01-Feb-2013'
insert into produce
select 1, 'Mango', 'Onion', '15-Feb-2013'
insert into produce
select 1, 'Apple', 'Onion', '20-Feb-2013'

select [Month] = month(DateField)
  , [MonthName] = left(datename(mm, DateField), 3)
  , TotalAmountApple = sum(case when fruits = 'Apple' then 1 else 0 end)
  , TotalAmountOnion = sum(case when vegi = 'Onion' then 1 else 0 end)
from produce
group by month(DateField)
  , left(datename(mm, DateField), 3)
order by [Month] 
```

![在此处输入图像描述](../Images/0691784352478c5d46d0d004add2f8f4.png)

# multithreading - 多线程人脸检测停止工作

> ID：15429035
> 
> 赞同：2
> 
> 时间：2013-03-15T09:44:12.393
> 
> 标签：multithreading, qt, opencv, qthread

我正在尝试实现一个多线程的人脸检测器。问题是在从相机捕获和处理一些帧后，程序意外停止工作。这是代码：

```
cascadeClassifier cad;

class myThread: public QThread
{
private:
    Mat threadRoi;
    vector<Rect> faces;
protected:
    void run()
    {
        cad.detectMultiScale(threadRoi,faces,1.4,4,CV_HAAR_DO_CANNY_PRUNING|CV_HAAR_FIND_BIGGEST_OBJECT,Size(30,30));
        if ( !faces.empty())
                  rectangle(threadRoi,faces[0],Scalar(0,255,0),2);
    }
public:
    myThread(Mat &r)
    {
        threadRoi = r;
    }
    vector<Rect> getFaces()
    {
        return faces;
    }
};
int main()
{
    cad.load("C:/opencv/data/lbpcascades/lbpcascade_frontalface.xml");
    VideoCapture cap(0);
    Mat frame;
    while(1)
    {
       if(!cap.read(frame))   break;
       cvtColor(frame,frame_gray));
       myThread a(frame_gray(Rect(0,0,frame.cols/2,frame.rows/2));
       myThread b(frame_gray(Rect(frame.cols/4,0,frame.cols/2,frame.rows/2));
       myThread c(frame_gray(Rect(frame.cols/2,0,frame.cols/2,frame.rows/2));
       a.start();
       b.start();
       c.start();
       a.wait();
       b.wait();
       c.wait();
    }
    return 0;
} 
```

我注意到，如果我对所有线程都使用一个通用的 cascadeClassifier，那么就会出现这个问题。当我给每个线程单独的 cascadeClassifiers 作为它们自己的私有类成员时，它们工作正常。但是在主循环中，每当创建线程时，每次加载级联文件似乎对性能没有好处。所以我的问题是为什么当线程有公共级联文件时程序会停止？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T09:59:33.560

似乎有一个死锁。我怀疑功能 CascadeClassifier::detectMultiScale 负责。首先，对于多个线程，您有一个**相同的 cascadeClassifier 。**当这些线程调用 detectMultiScale 时，它​​们会在**同一个实例**上调用它。（这就像在所有操作都转到同一个文件的不同线程中使用相同的文件句柄。）

进一步的 detectMultiScale 已经是多线程/并行化的。在[文档](http://docs.opencv.org/modules/objdetect/doc/cascade_classification.html?highlight=cascadeclassifier#cascadeclassifier)中它说

> 该函数与 TBB 库并行化。

因此，您很可能通过从不同线程多次调用 detectMultiScale 来死锁 CascadeClassifier 的唯一实例。

顺便说一句，这个[线程](https://stackoverflow.com/questions/7285480/opencv-cascadeclassifier-c-interface-in-multiple-threads)可以帮助你进一步

# java - 如何捕获 WTObject 的修订事件？

> ID：15429038
> 
> 赞同：1
> 
> 时间：2013-03-15T09:44:20.740
> 
> 标签：java, events, ptc-windchill

我正在使用 Windchill 10.0 M030。我创建了一个捕获一些操作的 Windchill 服务。我已经完成了删除、签入和状态更改事件的捕获，但我不知道如何捕获对象的修订事件。有人可以帮我吗？

一些示例代码片段会有所帮助。工作正常的事件如下：

```
public void notifyEvent(KeyedEvent event) throws RemoteException,
            WTException {

        if (event instanceof PersistenceManagerEvent) {
            notifyEvent((PersistenceManagerEvent) event);
        }
        if (event instanceof WorkInProgressServiceEvent) {
            notifyEvent((WorkInProgressServiceEvent) event);
        }
        if (event instanceof EPMWorkspaceManagerEvent) {
            notifyEvent((EPMWorkspaceManagerEvent) event);
        }

        if (event instanceof LifeCycleServiceEvent) {
            notifyEvent((LifeCycleServiceEvent) event);
        }
    } 
```

是否有任何单独的事件，如修改事件以这种方式被捕获？我怎样才能做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T10:32:10.837

这是您的 ListenerAdapter 的代码：

```
public class VersionEventListenerAdapter extends ServiceEventListenerAdapter {

public VersionEventListenerAdapter(String serviceId) {
    super(serviceId);
}

public void notifyVetoableEvent(Object event) throws WTException, WTPropertyVetoException {
    if (!(event instanceof KeyedEvent)) {
        return;
    }

    Object target = ((KeyedEvent) event).getEventTarget();
    Object eventType = ((KeyedEvent) event).getEventType();

    if (eventType.equals(VersionControlServiceEvent.NEW_VERSION)
    {
       /** Call your business code here 
           example : yourMethod(target);
        **/
    }
} 
```

然后服务注册监听器

```
public class MyStandardListenerService extends StandardManager implements MyListenerServiceInterface {

private static final long serialVersionUID = 1L;

protected synchronized void performStartupProcess() throws ManagerException {

    VersionEventListenerAdapter versionEventListenerAdapter = new VersionEventListenerAdapter(getName());
    getManagerService().addEventListener(versionEventListenerAdapter, VersionControlServiceEvent.generateEventKey(VersionControlServiceEvent.NEW_VERSION));

}

public static MyStandardListenerService newMyStandardListenerService() throws WTException {
    MyStandardListenerService instance = new MyStandardListenerService();
    instance.initialize();
    return instance;
} 
```

这个新服务需要在 wt.properties 中注册。有关如何注册它的更多详细信息，请参阅定制器指南（使用 xconfmanager 命令行实用程序）

# c# - WPF ComboBox 选择更改 TabItem 选择更改

> ID：15429039
> 
> 赞同：1
> 
> 时间：2013-03-15T09:44:23.107
> 
> 标签：c#, mvvm, combobox, tabs, selecteditem

我在 MVVM 的选项卡项中有一个组合框。这个选项卡可以在我的应用程序中创建多次（相同的视图、相同的视图模型但不同的实例），因此我可以从一个选项卡切换到另一个选项卡（但它们是相同类型的选项卡）。

它适用于每个 WPF 控件，但是对于组合框，我有一个奇怪的行为：焦点选项卡，当它失去焦点时，获取应用程序关注的选项卡的组合框的选定项目。

如果我从 2 个不同类型的选项卡切换，一切正常，有什么想法吗？谢谢。

XAML：

```
<CollectionViewSource x:Key="StatusView" Source="{Binding Path=StatusList}"/>
<ComboBox Name="_spl2Status" Grid.Column="3" Grid.Row="0"
          ItemsSource="{Binding Source={StaticResource StatusView}}"
          SelectedValue="{Binding Path=CurrentSPL2.ID_SPL2_STATUS, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
          SelectedValuePath="FL_TYPE"
          DisplayMemberPath="ID_TYPE">
</ComboBox> 
```

虚拟机：

```
public List<NullableByteEnumType> StatusList
{
    get
    {
        return (SPC_SPL2.SPL2StatusCollection.Skip(1)).ToList();
    }
}

private SPC_SPL2 _currentSPL2 = null;

public SPC_SPL2 CurrentSPL2
{
    get
    {
        if (_currentSPL2== null)
            Controller.Execute(delegate(IResult result)
            {
                Dictionary<string, object> parameters = new Dictionary<string, object>();
                parameters.Add("FL_ACTIVE", true);
                parameters.Add("ID_SPL2", _itemcode);
                Model.Invalidate(typeof(SPC_SPL2), Filter.GENERIC<SPC_SPL2>(parameters, "ID_SPL2"));
                Model.Include<SPC_SPL2>();

                if (Model.Appendload(result) == false)
                    return false;

                Debug.Assert(Context.SPC_SPL2.Count == 1);
                _currentSPL2= Context.SPC_SPL2.FirstOrDefault();

                return result.Successful;
            });

        return _currentSPL2;
    }
    set
    {
        _currentSPL2= value;
        OnPropertyChanged(() => CurrentSPL2);
    }
} 
```

我的标签以这种方式处理：

```
<Grid>
    <Border Grid.Row="0">
        <ContentControl 
            Content="{Binding Path=Workspaces}" 
            ContentTemplate="{StaticResource MasterWorkspacesTemplate}"
            />
    </Border>
</Grid> 
```

在哪里

```
 <DataTemplate x:Key="MasterWorkspacesTemplate">
            <TabControl IsSynchronizedWithCurrentItem="True" 
                        BorderThickness="0" 
                        ItemsSource="{Binding}" 
                        SelectedItem="{Binding}"
                        ItemContainerStyleSelector="{StaticResource TabItemTemplate}"
                        />
        </DataTemplate> 
```

和工作区（我的视图模型列表）（T 是从 viewModelBase 继承的类）

```
 public T CurrentWorkspace
    {
        get { return WorkspacesView.CurrentItem as T; }
    }

    private ObservableCollection<T> _workspaces;
    public ObservableCollection<T> Workspaces
    {
        get
        {
            if (_workspaces == null)
            {
                _workspaces = new ObservableCollection<T>();
                _workspaces.CollectionChanged += _OnWorkspacesChanged;
            }

            return _workspaces;
        }
    }
    protected ICollectionView WorkspacesView
    {
        get
        {
            ICollectionView collectionView = CollectionViewSource.GetDefaultView(Workspaces);
            Debug.Assert(collectionView != null);
            return collectionView;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:20:45.737

我已经重现了你的问题。但我找不到任何问题。请查看下面的代码，您可能会得到解决方案。这是我的解决方案。

`MyTab`查看模型

```
public class MyTab : ViewModelBase
{
    #region Declarations

    private ObservableCollection<string> statusList;
    private string selectedStatus;

    #endregion

    #region Properties

    /// <summary>
    /// Gets or sets the header.
    /// </summary>
    /// <value>The header.</value>
    public string Header { get; set; }

    /// <summary>
    /// Gets or sets the content.
    /// </summary>
    /// <value>The content.</value>
    public string Content { get; set; }

    /// <summary>
    /// Gets or sets the status list.
    /// </summary>
    /// <value>The status list.</value>
    public ObservableCollection<string> StatusList
    {
        get
        {
            return statusList;
        }
        set
        {
            statusList = value;
            NotifyPropertyChanged("StatusList");
        }
    }

    /// <summary>
    /// Gets or sets the selected status.
    /// </summary>
    /// <value>The selected status.</value>
    public string SelectedStatus
    {
        get
        {
            return selectedStatus;
        }
        set
        {
            selectedStatus = value;
            NotifyPropertyChanged("SelectedStatus");
        }
    }

    #endregion
} 
```

`MainViewModel`查看模型

```
public class MainViewModel : ViewModelBase
{
    #region Declarations

    private ObservableCollection<MyTab> tabs;
    private MyTab selectedTab;

    #endregion

    #region Properties

    /// <summary>
    /// Gets or sets the tabs.
    /// </summary>
    /// <value>The tabs.</value>
    public ObservableCollection<MyTab> Tabs
    {
        get
        {
            return tabs;
        }
        set
        {
            tabs = value;
            NotifyPropertyChanged("Tabs");
        }
    }

    /// <summary>
    /// Gets or sets the selected tab.
    /// </summary>
    /// <value>The selected tab.</value>
    public MyTab SelectedTab
    {
        get
        {
            return selectedTab;
        }
        set
        {
            selectedTab = value;
            NotifyPropertyChanged("SelectedTab");
        }
    }

    #endregion

    #region Constructors

    /// <summary>
    /// Initializes a new instance of the <see cref="MainViewModel"/> class.
    /// </summary>
    public MainViewModel()
    {
        this.Tabs = new ObservableCollection<MyTab>();

        MyTab tab1 = new MyTab();
        tab1.Header = "tab1";
        tab1.Content = "Tab 1 content";
        ObservableCollection<string> tab1StatusList = new ObservableCollection<string>();
        tab1StatusList.Add("tab1 item1");
        tab1StatusList.Add("tab1 item2");
        tab1StatusList.Add("tab1 item3");
        tab1.StatusList = tab1StatusList;
        tab1.SelectedStatus = tab1StatusList.First();
        this.Tabs.Add(tab1);

        MyTab tab2 = new MyTab();
        tab2.Header = "tab2";
        tab2.Content = "Tab 2 content";
        ObservableCollection<string> tab2StatusList = new ObservableCollection<string>();
        tab2StatusList.Add("tab2 item1");
        tab2StatusList.Add("tab2 item2");
        tab2StatusList.Add("tab2 item3");
        tab2.StatusList = tab2StatusList;
        tab2.SelectedStatus = tab2StatusList.First();
        this.Tabs.Add(tab2);

        this.SelectedTab = tab1;
    }

    #endregion
} 
```

最后这是我的`XAML`

```
 <Window x:Class="ComboboxSelectedItem.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:viewModel="clr-namespace:ComboboxSelectedItem.ViewModels"
    Title="MainWindow" Height="350" Width="525">
<Grid Name="mainGrid">

    <Grid.DataContext>
        <viewModel:MainViewModel />
    </Grid.DataContext>

    <TabControl
        ItemsSource="{Binding Tabs, Mode=TwoWay}"
        SelectedItem="{Binding SelectedTab}">

        <TabControl.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="{Binding Header}" Margin="0 0 20 0"/>
                </StackPanel>
            </DataTemplate>
        </TabControl.ItemTemplate>

        <!--Content section-->
        <TabControl.ContentTemplate>
            <DataTemplate>
                <Grid>
                    <StackPanel Orientation="Vertical">
                        <TextBlock
                            Text="{Binding Content}" />
                        <ComboBox
                            ItemsSource="{Binding StatusList}"
                            SelectedItem="{Binding SelectedStatus}" />
                    </StackPanel>

                </Grid>
            </DataTemplate>
        </TabControl.ContentTemplate>

    </TabControl>
</Grid>
</Window> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:58:40.023

您是否绝对确定您正在创建视图模型的新实例。如果不是，则组合框共享相同的 collectionviewsource，这意味着一个组合框的更改将反映在所有组合框中。我自己也有同样的问题。

尝试在代码中声明集合视图源：

```
CollectionViewSource StatusListViewSource = new CollectionViewSource();
StatusListViewSource.Source = SPL2StatusCollection; 
```

然后在 xaml 中更改绑定到 collectionviewsource：

```
ItemsSource="{Binding StatusListViewSource.View}" 
```

我从 vb 转换，所以它可能需要一些编辑。
这有帮助吗？

# hadoop - 将多个文件添加到 HIVE 中的分布式缓存

> ID：15429040
> 
> 赞同：2
> 
> 时间：2013-03-15T09:44:24.780
> 
> 标签：hadoop, hive

我目前在将文件夹内容添加到 Hives 不受信任的缓存时遇到问题。我可以使用以下方法成功地将多个文件添加到 Hive 中的分布式缓存：

```
ADD FILE /folder/file1.ext;
ADD FILE /folder/file2.ext;
ADD FILE /folder/file3.ext;
etc. 
```

.

我还看到有一个`ADD FILES`（复数）选项，在我看来这意味着您可以指定一个目录，例如：`ADD FILES /folder/;`并且文件夹中的所有内容都被包含在内（这适用于 Hadoop Streaming -files 选项）。但这不适用于 Hive。现在我必须明确添加每个文件。

我做错了吗？有没有办法将整个文件夹的内容放到分布式缓存中。

PS我尝试了通配符`ADD FILE /folder/*`，`ADD FILES /folder/*`但也失败了。

**编辑：**

从 hive 0.11 开始，现在支持这样：

```
ADD FILE /folder 
```

现在工作。

我正在使用的是将文件夹位置作为参数传递给配置单元脚本，因此：

```
$ hive -f my-query.hql -hiveconf folder=/folder 
```

在 my-query.hql 文件中：

```
ADD FILE ${hiveconf:folder} 
```

现在又漂亮又整洁！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T15:01:45.427

Add 不支持目录，但作为一种解决方法，您可以**压缩**文件。然后将它作为*存档*( `ADD ARCHIVE my.zip`) 添加到分布式缓存中。当作业运行时，存档的内容将被解压到从节点的本地作业目录中（见`mapred.job.classpath.archives`属性）

如果您要传递的文件数量相对较少，并且您不想处理档案，您还可以编写一个小脚本，为给定目录中的所有文件准备*添加文件命令*
： 例如：

```
#!/bin/bash
#list.sh

if [ ! "$1" ]
then
  echo "Directory is missing!"
  exit 1
fi

ls -d $1/* | while read f; do echo ADD FILE $f\;; done 
```

然后从 Hive shell 调用它并执行生成的输出：

```
!/home/user/list.sh /path/to/files 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T14:04:33.613

好吧，就我而言，我必须移动一个包含子文件夹和文件的文件夹。

我使用了`ADD ARCHIVE xxx.gz`，它正在添加文件，但在从属机器中*没有*爆炸（解压缩）。

相反，`ADD FILE <folder_name_without_traling_slash>`实际上将整个文件夹递归地复制到从属服务器。

礼貌：[评论帮助调试](http://qnalist.com/questions/4392895/is-there-a-mechanism-similar-to-hadoop-archive-in-hive-add-archive-is-not-apparently)

希望这可以帮助 ！

# python - 在python中计算组合

> ID：15429041
> 
> 赞同：0
> 
> 时间：2013-03-15T09:44:25.093
> 
> 标签：python, count, combinations, set

几个小时以来，我一直在困惑如何为这个问题制作一个程序。我搜索了类似的解决方案，但没有成功。

有6组2个值`a [a1,a2] ; b [b1, b2] ; ... f [f1, f2].`

每个组合都需要每个集合中至少有一个值，但它也可以同时具有。因此，有 64 种组合。

我需要计算所有这些组合，并打印如下内容：

```
Combination 1: a1, b1, c1, d1, e1, f1 Sum:  (sum of those listed)

Combination 2: ...

Total sum: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:53:16.613

```
>>> from itertools import product   
>>> for item in product(['a1', 'a2'], ['b1', 'b2'], ['c1', 'c2']):
...     print item
...     
('a1', 'b1', 'c1')
('a1', 'b1', 'c2')
('a1', 'b2', 'c1')
('a1', 'b2', 'c2')
('a2', 'b1', 'c1')
('a2', 'b1', 'c2')
('a2', 'b2', 'c1')
('a2', 'b2', 'c2') 
```

看起来您的 a1、a2 等是数字。那也很好

```
>>> from itertools import product
>>> for item in product([1, 2], [3, 4], [5, 6]):
...     print item, sum(item)
... 
(1, 3, 5) 9
(1, 3, 6) 10
(1, 4, 5) 10
(1, 4, 6) 11
(2, 3, 5) 10
(2, 3, 6) 11
(2, 4, 5) 11
(2, 4, 6) 12 
```

# php - 从多维数组中获取“相同的键”值

> ID：15429042
> 
> 赞同：0
> 
> 时间：2013-03-15T09:44:25.160
> 
> 标签：php, multidimensional-array

我有一组用户，我想根据他们的`first_names`. 但问题是我保留`first_name`在`last_name`另一个数组元素数组中。

让我用代码解释一下：

```
$users = [
    [
        'id' => 1,
        'username' => 'asd',
        'info' => ['first_name' => 'John', 'last_name' => 'Doe']
    ],
    [
        'id' => 2,
        'username' => 'martin',
        'info' => ['first_name' => 'Martin', 'last_name' => 'Brown']
    ]
]; 
```

我想`$users`根据`first_name`.

我找不到任何解决方案，可能是因为我无法理解 , 或任何其他我可以使用的数组函数的`array_filter`逻辑`array_map`。

任何帮助都会对我很有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T09:48:05.717

您可以使用[`uasort`](http://www.php.net/uasort)它，使用一个简单地比较名称的回调。

```
function fncompare($a, $b)
{
    return strcmp($a['info']['first_name'], $b['info']['first_name']);
}

uasort($users, "fncompare"); 
```

文档中的示例非常清楚。

* * *

由于您使用的是 PHP5.4，因此您可以使用匿名函数使其看起来更整洁，因为您可能不会在排序之外使用此方法：

```
uasort($users, function($a, $b) {
    return strcmp($a['info']['first_name'], $b['info']['first_name']);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:49:29.217

试试这个：使用`array_multisort`：[http ://www.php.net/manual/en/function.array-multisort.php](http://www.php.net/manual/en/function.array-multisort.php)

```
$arr = array(
    array(
        'id' => 1,
        'username' => 'asd',
        'info' => array('first_name' => 'John', 'last_name' => 'Doe')
    ),
    array(
        'id' => 2,
        'username' => 'martin',
        'info' => array('first_name' => 'Martin', 'last_name' => 'Brown')
    )
);

$sort = array();
foreach($arr as $k=>$v) {
    $sort['first_name'][$k] = $v['info']['first_name']; 
}

array_multisort($sort['first_name'], SORT_ASC, $arr);

echo "<pre>";
print_r($arr); 
```

# ssl - 如何使用 nginx 反向代理在同一端口上从 http 重定向到 https

> ID：15429043
> 
> 赞同：42
> 
> 时间：2013-03-15T09:44:27.947
> 
> 标签：ssl, proxy, nginx, reverse-proxy

我在 Nginx 中使用反向代理，我想强制请求进入 HTTPS，所以如果用户想使用 http 访问 url，他将自动重定向到 HTTPS。

我也在使用非标准端口。

这是我的 nginx 反向代理配置：

```
server {
    listen 8001  ssl;
    ssl_certificate /home/xxx/server.crt;
    ssl_certificate_key /home/xxx/server.key;
    location / {
        proxy_pass https://localhost:8000;
        proxy_redirect off;
        proxy_set_header Host $host:$server_port;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Ssl on;
        proxy_set_header  X-Forwarded-Proto  https;
    }
} 
```

我尝试了很多事情，也阅读了有关它的帖子，包括[这个 serverfault question](https://serverfault.com/questions/67316/in-nginx-how-can-i-rewrite-all-http-requests-to-https-while-maintaining-sub-dom "在 Nginx 中，如何在维护子域的同时将所有 http 请求重写为 https？")，但到目前为止没有任何效果。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-03-15T15:09:41.077

发现一些运行良好的东西：

```
server {
        listen 8001  ssl;
        ssl_certificate /home/xxx/server.crt;
        ssl_certificate_key /home/xxx/server.key;
        error_page 497 301 =307 https://$host:$server_port$request_uri;
        location /{
            proxy_pass http://localhost:8000;
            proxy_redirect off;
            proxy_set_header Host $host:$server_port;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Ssl on;
        }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T11:21:03.817

您确定您的解决方案有效吗？它正在监听 8001 ssl。它会接受http请求吗？

我这样做：

```
server {
    listen   80;
    server_name  yourhostname.com;

    location / {
            rewrite ^(.*) https://yourhostname.com:8001$1 permanent;
    }
} 
```

然后是你的配置：

```
server {
    listen 8001  ssl;
    ssl_certificate /home/xxx/server.crt;
    ssl_certificate_key /home/xxx/server.key;
    location / {
        proxy_pass https://localhost:8000;
        proxy_redirect off;
        proxy_set_header Host $host:$server_port;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Ssl on;
        proxy_set_header  X-Forwarded-Proto  https;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-06T20:28:32.693

这对我有用：

```
server {
listen       80;
server_name  localhost;
...
if ($http_x_forwarded_proto = "http") {
      return 301 https://$server_name$request_uri;
}
location / {
    proxy_set_header X-Forwarded-Host $host;
    proxy_set_header X-Forwarded-Server $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_pass http://localhost:8080;
}

...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T11:47:30.867

你可以

1.  使用 $server_name 避免再次对您的域名进行硬编码（DRY），
2.  使用 return 301 更容易阅读（网络开发人员应该知道这个 http 状态代码）

注意：我为 https 服务器设置了 443。如果你真的想听，你可以听 8001。

```
server {
    listen   80;
    server_name  your_hostname.com;

    return 301 https://$server_name$request_uri;
}
...
server {
    listen 443 ssl;
    server_name your_hostname.com
    ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-25T15:19:54.890

这是我的方法，我认为它很干净，并且允许您在需要时添加更多位置。我在 $http_x_forwarded_proto 属性上添加了一个测试，如果为真，则在 NGINX 反向代理设置上强制所有 HTTP 流量到 HTTPS

```
upstream flask_bootstrap {
    server flask-bootstrap:8000;
}

server {
    # SSL traffic terminates on the Load Balancer so we only need to listen on port 80
    listen 80;

    # Set reverse proxy
    location / {
        proxy_pass http://flask_bootstrap;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $host;
        proxy_redirect http://localhost/;

        # Permanently redirect any http calls to https
        if ($http_x_forwarded_proto != 'https') {
            return 301 https://$host$request_uri;
        }
    }
} 
```

# jquery - jquery选择器和点击事件不起作用

> ID：15429046
> 
> 赞同：2
> 
> 时间：2013-03-15T09:44:44.393
> 
> 标签：jquery, jquery-selectors

我正在尝试让 jquery 选择器工作并`console.log()`在点击时给出响应，但我似乎无法让它工作。

这是[网址](http://garden.paperfish.co/index.php/problem-solving/roses)

代码是：

```
$("div#tabs > div#problem-categories > div > div a").click(function() {
    console.log('pass');
}); 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:47:28.910

您需要防止链接被提交，试试这个：

```
$("#problem-categories a").click(function(e) {
    e.preventDefault();
    console.log('pass');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:48:24.337

这对我很有用：

```
$("div#tabs > div#problem-categories > div > div a").on("click", function () {
    console.log('pass');
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T09:51:34.163

用这个：

```
$("div#problem-categories div.scrollbox").find('a').click(function(ev) {
   ev.preventDefault(); // <-----use this to prevent the jump 
   console.log('pass');
}); 
```

你必须穿过这条路。`Get into problem-categories' scrollbox`并`find a`在其中和`do the click`。

### [在小提琴中查找](http://jsfiddle.net/MuNaT/)

# android - Android整数作为计时器等待时间

> ID：15429047
> 
> 赞同：0
> 
> 时间：2013-03-15T09:44:44.270
> 
> 标签：android, variables, time, timer

我正在尝试根据用户选择来更改计时器等待时间。我的计时器正在工作，但设置时间的变量没有。等待 ime`((60/bpm)*1000)-190`和 for的公式`bpm=60`是给`810`的，这是正确的，但是当我`61`在应用程序论坛中增加 bpm 时给`-190`。为什么？

定时器代码：

```
metronomepp.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                Log.i("Metronome", ""+timetw);
                //timetw=810;
                if(isChecked) {
                    currentTask = new TimerTask() {
                        @Override
                        public void run() {
                            if (metronome.isPlaying()) { metronome.pause(); }
                            metronome.seekTo(0);
                            metronome.start();
                        }
                    };
                    myTimer.schedule(currentTask, 0, timetw); 
                } else {
                    currentTask.cancel();
               }   
        }
    });

Bpm increase and timetw change code:
    plus.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
                    bpm++;
                    timetw=(60000/(bpm*1000))-190;
                    Log.i("PlusTW", ""+timetw);
                    Log.i("PlusBPM", ""+bpm);
                    curbpm.setText(""+bpm);
            }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:09:16.333

就像 njzk2 所说，您可以使用浮点数，然后 do `Float.valueOf(float f).intValue()`，这将通过舍入和截断将浮点数强制转换为 int 。它应该足以满足您的目的。

# nhibernate - 两个自然键列之间的休眠外键关系

> ID：15429052
> 
> 赞同：0
> 
> 时间：2013-03-15T09:44:50.443
> 
> 标签：nhibernate, fluent-nhibernate, fluent-interface

我想使用自然键定义两个表之间的外键关系...默认情况下，nhibernate 将另一列视为主键...

```
Class A{
   public virtual int id {get; set;}
   public virtual int username {get; set;}
}

Class B{
   public virtual int id {get; set;}
   public virtual int username {get; set;}
} 
```

我想在 A 类（col：用户名）上定义 B 类（col：用户名）的外键关系

```
ManyToOne<ClassA>( x=> x.ClassA, map => { map.Column("username"); }; 
```

Nhibenate 是在用户名到 id 上创建它，而不是在用户名到用户名上创建它。我怎么能做到这一点？

谢谢，市长

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T09:17:19.800

请查看链接：[NHibernate - 映射字符串外键](https://stackoverflow.com/questions/462281/nhibernate-mapping-a-string-foreign-key)

您需要在关键部分使用 property-ref 标记并指定在其他表中唯一的列的名称。

```
<bag name=”Inventory” table=”INVENTORY” lazy=”true”&gt;
 <key column=”ID” property-ref=”OID” />
 <one-to-many class=”GuitarStore.Common.Inventory” />
 </bag> 
```

# php - 解析 URL-String 并从中获取参数

> ID：15429057
> 
> 赞同：1
> 
> 时间：2013-03-15T09:45:06.400
> 
> 标签：php, symfony, silex

在 UrlMatcher 类的帮助下，我在解析 URL 字符串并从中获取参数时遇到问题。

资源：

```
<?php 
//RouteCollection
$routes = $this->container->get('routes');
//SubRequest to a Controller (POST)
$response = $this->forward(...);

if($response instanceof RedirectResponse){
    //TargetUrl looks like this 
    //dev.php/admin/twitter-modul/1/show
    //1 is the id of the Entity
    $context = new RequestContext($response->getTargetUrl());
    $matcher = new UrlMatcher($routes, $context);
    //match throws a ResourceNotFoundException
    $parameters = $matcher->match($response->getTargetUrl());
    //Here i need the id paramater from the url
    var_dump($parmeters);
}

return $response; 
```

如何解析 URL-String 并从中获取参数？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-15T13:21:52.553

这并不理想，但您可以从字符串中提取数字：

```
preg_match_all('!\d+!', $response->getTargetUrl(), $matches);
$id = implode('', $matches[0]);
var_dump($id); 
```

# fortran - 在 Fortran 中使用 OpenMP 写入文件时出现线程问题

> ID：15429058
> 
> 赞同：0
> 
> 时间：2013-03-15T09:45:08.493
> 
> 标签：fortran, openmp

正在写入的文件数始终小于线程数。从逻辑上对我来说，当我可以有 4 个线程并且 CPU 以 400% 的速度工作时，我期望文件数为 4（每个对应于每个线程）。我不知道我的代码是否有问题，或者它应该如何工作。代码如下：

```
 !!!!!!!! module 
      module common
      use iso_fortran_env
      implicit none
      integer,parameter:: dp=real64
      real(dp):: aa,bb

       contains

      subroutine evolve(y,yevl)
      implicit none
      integer(dp),parameter:: id=2
      real(dp),intent(in):: y(id)
      real(dp),intent(out):: yevl(id)
        yevl(1)=y(2)+1.d0-aa*y(1)**2
        yevl(2)=bb*y(1)
      end subroutine evolve

      end module common

      use common
      implicit none
      integer(dp):: iii,iter,i
      integer(dp),parameter:: id=2
      real(dp),allocatable:: y(:),yt(:)
      integer(dp):: OMP_GET_THREAD_NUM, IXD

       allocate(y(id)); allocate(yt(id)); y=0.d0; yt=0.d0; bb=0.3d0
       !$OMP PARALLEL PRIVATE(iii,iter,y,i,yt) SHARED(bb)
         IXD=OMP_GET_THREAD_NUM()
       !$OMP DO
        do iii=1,20000; print*,iii  !! EXPECTED THREADS TO BE OF 5000 ITERATIONS EACH
          aa=1.d0+dfloat(iii-1)*0.4d0/80000.d0
            loop1: do iter=1,10 !! THE INITIAL CONDITION LOOP
               call random_number(y)!! RANDOM INITIALIZATION OF THE VARIABLE
                loop2: do i=1,70000  !! ITERATION OF THE SYSTEM
                    call evolve(y,yt)
                    y=yt
                enddo loop2     !! END OF SYSTEM ITERATION
              write(IXD+1,*)aa,yt  !!! WRITING FILE CORRESPONDING TO EACH THREAD
            enddo loop1 !!INITIAL CONDITION ITERATION DONE
         enddo
        !$OMP ENDDO
        !$OMP END PARALLEL
        end 
```

这种行为是由代码中的某些种族问题引起的吗？在 ubuntu 上，ifort 版本 13.1.0 的代码编译和执行都很好，没有任何警告或错误。非常感谢您的任何意见或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:53:32.943

该变量`IXD`应明确声明为私有，以确保每个线程都有自己的副本。更改线路

```
 !$OMP PARALLEL PRIVATE(iii,iter,y,i,yt) SHARED(bb)
   IXD=OMP_GET_THREAD_NUM() 
```

到

```
 !$OMP PARALLEL PRIVATE(iii,iter,y,i,yt,ixd) SHARED(bb)
  IXD=OMP_GET_THREAD_NUM() 
```

解决问题。

# iphone - 如何解析这个 xml 并在 iPhone 中检索数据

> ID：15429065
> 
> 赞同：-7
> 
> 时间：2013-03-15T09:45:35.263
> 
> 标签：iphone, ios

我正在开发一个 iPad 应用程序。我们以 XML 格式获取数据。我`NSXMLParser`用于解析，所有数据都打印到控制台。如何分别检索值？

另一个问题是如何检查 iPhone 中的内存泄漏？

```
 <Result>

 <Movieoftheweek>
         <Movie_id>3809</Movie_id>
         <Movieoftheweek_img_Url>"http://www.add.com/adogs/11055.jpg</Movieoftheweek_img_Url>
         <Movie_Name>Luck</Movie_Name>
         <gender>Movie</gender>
    </Movieoftheweek>
<Movie_List_in_theater>  
          <movie_in_theater>
             <Movie_id>3809</Movie_id>
             <Movie_img_Url>http://www.add.com/adogs/11055.jpg</Movie_img_Url>
             <Movie_Name>Luck</Movie_Name>
             <gender>Movie</gender>
          </movie_in_theater>

 <movie_in_theater>
             <Movie_id>3809</Movie_id>
             <Movie_img_Url>http://www.add.com/adogs/6055.jpg</Movie_img_Url>
             <Movie_Name>Luck</Movie_Name>
             <gender>Movie</gender>
          </movie_in_theater>

<movie_in_theater>
             <Movie_id>3809</Movie_id>
             <Movie_img_Url>http://www.add.com/adogs/525.jpg</Movie_img_Url>
             <Movie_Name>Luck</Movie_Name>
             <gender>Movie</gender>
          </movie_in_theater>

</Movie_List_in_theater>  

<Movie_List_Coming_Soon>
          <movie_Coming_Soon>
             <Movie_id>3803</Movie_id>
             <Movie_img_Url>http://www.add.com/adogs/5000.jpg</Movie_img_Url>
             <Movie_Name>Kode</Movie_Name>
             <gender>Movie</gender>
          </movie_Coming_Soon>

 <movie_Coming_Soon>
             <Movie_id>3803</Movie_id>
             <Movie_img_Url>http://www.add.com/adogs/5900.jpg</Movie_img_Url>
             <Movie_Name>Kode</Movie_Name>
             <gender>Movie</gender>
          </movie_Coming_Soon>
 <movie_Coming_Soon>
             <Movie_id>3803</Movie_id>
             <Movie_img_Url>http://www.add.com/adogs/5500.jpg</Movie_img_Url>
             <Movie_Name>Kode</Movie_Name>
             <gender>Movie</gender>
          </movie_Coming_Soon>
</Movie_List_Coming_Soon>
</Result> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:31:17.827

您好，在发布之前做一些 r 和 D 很多帖子都可用，只需查看此[链接](https://stackoverflow.com/questions/11323326/xml-parsing-in-ios-tutorial)，它可能会对您有所帮助

在你的方法中

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict
{

    if([elementName isEqualToString:@"Result"])
    {
        //Initialize the array.
        arrXMLData = [[NSMutableArray alloc] init];
    }
    else if([elementName isEqualToString:@"Movieoftheweek"])
    {
        currentElementValue = [[NSMutableString alloc] init];
    } 
    else if([elementName isEqualToString:@"Movie_List_in_theater"])
    {
        currentElementValue = [[NSMutableString alloc] init];
    }}
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    if(!currentElementValue)
        currentElementValue = [[NSMutableString alloc] initWithString:string];
    else
        [currentElementValue appendString:string];
    NSLog(@"Processing Value: %@", currentElementValue);
}
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if([elementName isEqualToString:@"Result"])
        return;
    else if([elementName isEqualToString:@"Movieoftheweek"])
    {
        [arrXMLData addObject:currentElementValue];
    }
    else if([elementName isEqualToString:@"Movie_List_in_theater"])
    {
        [arrXMLData addObject:currentElementValue];
    }
    [currentElementValue release];
   } 
```

# javascript - LeafletJS 弹出窗口位置和标记添加和删除问题

> ID：15429071
> 
> 赞同：3
> 
> 时间：2013-03-15T09:45:49.587
> 
> 标签：javascript, html, openstreetmap, leaflet

我正在使用leafletjs API 在openstreetmaps 上实现显示位置。这是场景，当页面加载时，触发了一个 JS 函数，该函数将查询 DB 以获取所有设备的当前位置并将它们显示为地图上的标记。我面临两个主要问题：

--> 我正在尝试将弹出窗口与每个标记绑定，以便它可以是描述性的。换句话说，用户应该了解这个标记用于什么设备。问题是弹出窗口显示在标记上，使标记不可见。这是屏幕截图：

![在此处输入图像描述](../Images/48d292203e058bbc14c7d82ab0c91547.png)

标记如下所示（关闭一个弹出窗口后）：

![在此处输入图像描述](../Images/89fff446dfc027d3e221bab6e82c96bb.png)

--> 在此页面上，我在表格中显示设备名称。该表的第一列是复选框。当用户检查设备时，其标记会按预期显示在地图上（工作正常）。之后，如果用户取消选中该设备，则其标记消失。但是当用户再次重新选择该设备时，它的标记不会出现。

这是我的代码：

```
function OnPageLoad() {
var IDs = GetAllSelectedDeviceIDs();
LoadOpenStreetMap(IDs);
}

var map;
var markers = new Array();

function LoadOpenStreetMap(deviceIDs) {
for (var i = 0; i < deviceIDs.length; i++) {
    $.ajax({
        url: "../Database/getcurrentlocation.php",
        cache: false,
        type: "post",
        data: "deviceId=" + deviceIDs[i] + "&r=" + Math.random(),
        dataType: "html",
        async: false,
        success: function (data) {
            if (data != null) {
                var dataArray = data.split(/~/);
                SetOpenStreetMap(dataArray[0], dataArray[1], deviceIDs[i], i, flags[i]);
            }
        }
    });
}
deviceIDs = GetAllSelectedDeviceIDs();
setTimeout(function () { LoadOpenStreetMap(deviceIDs); }, 500);
}

function SetOpenStreetMap(lati, longi, deviceID, markerIndex, markerFlag) {
if (!map) {
    map = L.map('map').setView([lati, longi], 12);
    L.tileLayer('http://{s}.tile.cloudmade.com/XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX/997/256/{z}/{x}/{y}.png', {
        attribution: '',
        maxZoom: 18
    }).addTo(map);
}

if (markerFlag == 1) {
//need to add marker
    if (!markers[markerIndex]) {
        var popupLocation1 = new L.LatLng(lati, longi);
        var popupContent1 = 'This is a nice popup.';
        popup1 = new L.Popup();
        popup1.setLatLng(popupLocation1);
        popup1.setContent(popupContent1);
        markers[markerIndex] = L.marker([lati, longi]).addTo(map);
        markers[markerIndex].bindPopup(popupContent1);
        map.addLayer(popup1);
    }
    else
        markers[markerIndex].setLatLng([lati, longi]).update();
}
else {
//need to remove marker
    if (markers[markerIndex]) {
       map.removeLayer(markers[markerIndex]);
    }
}
} 
```

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-15T14:08:53.953

创建弹出窗口时设置*选项*对象内的偏移量。

```
var options = {
  offset:  new L.Point(1, -20)
};

var popup = L.popup(options)
  .setLatLng([ lat, lng ])
  .setContent('Your popup content goes here!')
  .openOn(map)
  ; 
```

“选项”对象是传递给 L.popup() 的第一个对象

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T09:56:34.273

要将弹出窗口放在带有一些偏移量的标记上，存在一个偏移量属性：

```
if (markerFlag == 1) { //need to add marker
    if (!markers[markerIndex]) {
        var popupLocation1 = new L.LatLng(lati, longi);
        var popupContent1 = 'This is a nice popup.';
        popup1 = new L.Popup();
        popup1.setLatLng(popupLocation1);
        popup1.setContent(popupContent1);
        popup1.offset = new L.Point(0, -20);
        markers[markerIndex] = L.marker([lati, longi]).addTo(map);
        /* markers[markerIndex].bindPopup(popupContent1);  */
        map.addLayer(popup1);
     } else
        markers[markerIndex].setLatLng([lati, longi]).update();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T01:41:50.223

要在标记上显示弹出窗口，只需调用`bindPopup`标记上的方法。这在[QuickStart](http://leafletjs.com/examples/quick-start.html)中显示。

您不需要自己实例化弹出窗口。

# scala - 在对象中注入依赖项

> ID：15429080
> 
> 赞同：5
> 
> 时间：2013-03-15T09:46:04.513
> 
> 标签：scala, dependency-injection, playframework-2.0

我是 Play 框架和 scala 的新手，我正在尝试在伴随对象中注入依赖项。

我有一个简单的案例类，例如：

```
case class Bar(foo: Int) {} 
```

有一个伴随对象，如：

```
object Bar {
  val myDependency =
  if (isTest) {
    // Mock
  }
  else
  {
    // Actual implementation
  }

  val form = Form(mapping(
    "foo" -> number(0, 100).verifying(foo => myDependency.validate(foo)), 
  )(Bar.apply)(Bar.unapply))
} 
```

这很好用，但这并不是一种真正干净的方法。我希望能够在构建时注入依赖项，以便在测试时注入不同的模拟对象，并在开发和生产中注入不同的实际实现。

实现这一目标的最佳方法是什么？

任何帮助都非常感谢。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:13:28.667

沿着*蛋糕*的路线，我们可以尝试将您的示例更改为

```
trait Validator {
    def validate(foo: Int): Boolean
}

trait TestValidation {
    val validator = new Validator {
        def validate(foo: Int): Boolean = ...   
    }
}

trait ImplValidation {
    val validator = new Validator {
        def validate(foo: Int): Boolean = ...   
    }
}

trait BarBehavior {
    def validator: Validator

    val form = Form(mapping(...))(Bar.apply)(Bar.unapply)
}

//use this in your tests
object TestBar extends BarBehavior with TestValidation

//use this in production
object ImplBar extends BarBehavior with ImplValidation 
```

您还应该尝试测试此示例是否也适合 Play 框架

# sql - 在大桌子上快速使用 LIMIT 和 OFFSET 进行 SELECT

> ID：15429081
> 
> 赞同：3
> 
> 时间：2013-03-15T09:46:04.840
> 
> 标签：sql, postgresql, indexing, postgresql-9.1, postgresql-9.2

我在一个表中有超过 1000 万条记录。

```
SELECT * FROM tbl ORDER BY datecol DESC
LIMIT 10
OFFSET 999990 
```

[explain.depesz.com](http://explain.depesz.com/s/9iee)`EXPLAIN ANALYZE`上的输出。 执行上述查询大约需要 10 秒。我怎样才能让它更快？

### 更新

通过使用子查询，执行时间减少了一半：

```
SELECT * FROM tbl where id in 
(SELECT id FROM tbl ORDER BY datecol DESC LIMIT 10 OFFSET 999990) 
```

[explain.depesz.com](http://explain.depesz.com/s/ibV)`EXPLAIN ANALYZE`上的输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T01:53:44.580

您需要在中使用的列上创建索引`ORDER BY`。理想情况下以相同的排序顺序，但 PostgreSQL 可以以几乎相同的速度向后扫描索引。

```
CREATE INDEX tbl_datecol_idx ON tbl (datecol DESC); 
```

[有关索引](http://www.postgresql.org/docs/current/interactive/indexes.html)和[`CREATE INDEX`](http://www.postgresql.org/docs/current/interactive/sql-createindex.html)当前手册的更多信息。
测试[`EXPLAIN ANALYZE`](http://www.postgresql.org/docs/current/interactive/sql-explain.html)以获取除查询计划之外的实际时间。

当然，所有[关于性能优化的常用建议](https://wiki.postgresql.org/wiki/Performance_Optimization)也适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-01T09:11:14.373

我试图用一个非常大的表（>100m 记录）做一些与我自己类似的事情，并发现使用 Offset / Limit 会降低性能。前 10m 条记录的偏移量（限制为 1）大约需要 1.5 分钟才能检索，并且它呈指数增长。通过记录 50m，我每次选择最多 3 分钟 - 即使使用子查询。

我在[这里看到了一篇文章，其中详细介绍了有用的替代方案](https://stackoverflow.com/questions/29307991/postgres-why-is-the-performance-so-bad-on-subselects-with-offset-limit?noredirect=1&lq=1)。

我稍微修改了一下以适应我的需要，并提出了一种可以很快获得结果的方法。

```
CREATE TEMPORARY TABLE 
just_index AS SELECT ROW_NUMBER() 
OVER (ORDER BY [VALUE-You-need]), [VALUE-You-need] 
FROM [your-table-name]; 
```

这是一次性的——大约花了 4 分钟，但我得到了我想要的所有值下一步是创建一个函数，该函数将在我需要的“偏移”处循环：

```
create or replace
function GetOffsets () 
returns void as $$ 
declare 
-- For this part of the function I only wanted values after 90 million up to 120 million
counter bigint := 90000000;
maxRows bigInt := 120000000;
begin
drop table if exists OffsetValues;
create temp table OffsetValues
(
    offset_myValue bigint
);

while counter <= maxRows loop 
    insert into OffsetValues(offset_myValue)
    select [VALUE-You-need] from just_index where row_number > counter
    limit 1;

    -- here I'm looping every 500,000 records - this is my 'Offset'
    counter := counter + 500000 ;
end loop ;
end ;$$ LANGUAGE plpgsql; 
```

然后运行函数：

```
select GetOffsets(); 
```

再次，一次性的时间量（我从大约 3 分钟获得我的偏移值之一到 3 毫秒获得我的偏移值之一）。然后从临时表中选择：

```
select * from OffsetValues; 
```

就性能而言，这对我来说非常有效 - 如果我能提供帮助，我认为我不会继续使用偏移量。

希望这可以提高任何较大表的性能。

# selenium - 如何使用 junit4 和 selenium webdriver 使用 chrome 运行我的场景

> ID：15429086
> 
> 赞同：2
> 
> 时间：2013-03-15T09:46:15.580
> 
> 标签：selenium, junit, selenium-webdriver, junit4

在 2 天前使用了这个场景并且它工作但一直知道她没有我不知道为什么，我使用 Selenium webdriver 和 junit4 所以这是我的场景以及我如何使用 cmd 运行 chrome-driver 和错误

```
package com.example.test;
import java.util.concurrent.TimeUnit;
import org.junit.*;
import static org.junit.Assert.*;
import org.openqa.selenium.*;
import org.openqa.selenium.remote.DesiredCapabilities;
import org.openqa.selenium.remote.RemoteWebDriver;
public class SearchWithCH {
  private WebDriver driver;
  private String baseUrl;
  private StringBuffer verificationErrors = new StringBuffer();
  @Before
  public void setUp() throws Exception {
    driver = new RemoteWebDriver(DesiredCapabilities.chrome());
    baseUrl = "http://localhost:8080/";
    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
  }
  @Test
  public void testUntitled() throws Exception {
    driver.get(baseUrl + "/myapp/pages/accueil/login.xhtml#loaded");
    driver.findElement(By.id("login")).clear();
    driver.findElement(By.id("login")).sendKeys("login");
    driver.findElement(By.id("password")).clear();
    driver.findElement(By.id("password")).sendKeys("password");
    driver.findElement(By.id("loginButton")).click();
    driver.findElement(By.xpath("//*[@id='mainMenu']/ul/li[2]/a")).click();
    driver.findElement(By.xpath("//*[@id='menu_contact_search']")).click();
    driver.findElement(By.id("formRecherche:nom")).clear();
    driver.findElement(By.id("formRecherche:nom")).sendKeys("Jean");
    driver.findElement(By.id("formRecherche:button_recherche")).click();
    try {
      assertTrue(driver.findElement(By.xpath("//*[@id='panel_contact_id_header']/span")).getText().matches("^[\\s\\S]*Contact : 9673 [\\s\\S]*$"));
    } catch (Error e) {
      verificationErrors.append(e.toString());
    }
  }
  @After
  public void tearDown() throws Exception {
    //driver.quit();
    String verificationErrorString = verificationErrors.toString();
    if (!"".equals(verificationErrorString)) {
      fail(verificationErrorString);
    }
  }
} 
```

我正在运行 chrome 驱动程序

```
> java -jar selenium-server-standalone-2.30.0.jar -Dwebdriver.chrome.driver=C:\Users\lenovo\Desktop\Projet\chromedriver_win_26.0.1383.0\chromedriver.exe 
```

但我有这个错误

```
> org.openqa.selenium.WebDriverException: The path to the driver executable must be set by the webdriver.chrome.driver system property; for more information, see http://code.google.com/p/selenium/wiki/ChromeDriver. The latest version can be downloaded from http://code.google.com/p/chromedriver/downloads/list
Command duration or timeout: 130 milliseconds
Build info: version: '2.30.0', revision: 'dc1ef9c', time: '2013-02-19 00:15:57'
System info: os.name: 'Windows 7', os.arch: 'x86', os.version: '6.1', java.version: '1.7.0_13'
Driver info: org.openqa.selenium.remote.RemoteWebDriver
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:187)
    at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:145)
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:554)
    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:216)
    at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:111)
    at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:129)
    at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:119)
    at com.QD2.Search.SearchWithCH.setUp(SearchWithCH.java:17)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.IllegalStateException: The path to the driver executable must be set by the webdriver.chrome.driver system property; for more information, see http://code.google.com/p/selenium/wiki/ChromeDriver. The latest version can be downloaded from http://code.google.com/p/chromedriver/downloads/list
    at com.google.common.base.Preconditions.checkState(Preconditions.java:176)
    at org.openqa.selenium.remote.service.DriverService.findExecutable(DriverService.java:105)
    at org.openqa.selenium.chrome.ChromeDriverService.createDefaultService(ChromeDriverService.java:75)
    at org.openqa.selenium.chrome.ChromeDriver.<init>(ChromeDriver.java:129)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at org.openqa.selenium.remote.server.DefaultDriverFactory.callConstructor(DefaultDriverFactory.java:57)
    at org.openqa.selenium.remote.server.DefaultDriverFactory.newInstance(DefaultDriverFactory.java:51)
    at org.openqa.selenium.remote.server.DefaultSession$BrowserCreator.call(DefaultSession.java:213)
    at org.openqa.selenium.remote.server.DefaultSession$BrowserCreator.call(DefaultSession.java:1)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at org.openqa.selenium.remote.server.DefaultSession$1.run(DefaultSession.java:167)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:48:10.137

首先使用以下命令启动 selenium 服务器

```
java -Dwebdriver.chrome.driver=latest\chromedriver.exe -jar selenium-server-standalone-2.31.0.jar 
```

然后使用以下逻辑创建 chrome 驱动程序实例

```
System.setProperty("webdriver.chrome.driver", "D:\\selenium\\latest\\chromedriver.exe");
DesiredCapabilities dc=new DesiredCapabilities();
dc.setBrowserName("chrome");
driver=new RemoteWebDriver(new URL("http://localhost:4444/wd/hub"),dc); 
```

**并使用驱动程序**实例运行您的测试用例

```
driver.get("http://www.google.com"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:51:29.840

在初始化 Chromedriver**之前**尝试添加代码：

```
 System.setProperty("webdriver.chrome.driver", "C:\\Users\\lenovo\\Desktop\\Projet\\chromedriver_win_26.0.1383.0\\chromedriver.exe"); 
```

**编辑** 关于您的评论。试试这个：

*   按 Ctrl + Alt + Del
*   选择任务管理器
*   切换到进程
*   按名称分类
*   杀死**所有**“chromedriver”进程
*   可选：重新启动计算机
*   再试一次

顺便说一句，你安装了 Chrome 吗？

**EDIT2** 现在我意识到，您正在使用 RemoteWebDriver！所以你必须像这样启动集线器和节点：

第一个枢纽：

```
 java -jar lib/selenium-server-standalone-2.31.0.jar -role hub 
```

第二个节点：

```
java -jar selenium-server-standalone-2.31.0.jar -role node -hub http://localhost:4444/grid/register -maxSession 15 -browser browserName="chrome",version=ANY,platform=WINDOWS,maxInstances=15 -Dwebdriver.chrome.driver=C:\Users\lenovo\Desktop\Projet\chromedriver_win_26.0.1383.0\chromedriver.exe 
```

然后运行你的测试

# html - CSS - 溢出 - 滚动条滚动太多

> ID：15429088
> 
> 赞同：1
> 
> 时间：2013-03-15T09:46:26.810
> 
> 标签：html, css

我的页面宽度为 1920 像素，出于某种我不知道的原因，我的滚动条想要将页面滚动到右侧，那里只有空白区域。我尝试指定`<html style="width: 1920px;">`，但什么也没做，底部滚动条就像页面是 2100px 一样滚动......我能做些什么吗？比如，指定固定的水平溢出？

**编辑：**这是页面的链接：只看主页，因为在其他页面上它看起来不错：`http://scyk.pl`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:52:56.017

您在按钮栏中遇到问题，您必须在代码中查找：

```
<div class="frontPageButtons"> 
```

div 的位置是相对的，您将 left 设置为 30% ：

```
.frontPageButtons {
    left: 30%;
    position: relative;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:53:25.547

您很可能有一个子元素将包含块推得更宽。溢出隐藏将起作用，但通常最好避免为子元素设置固定宽度，除非您正在定义新的布局上下文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T09:59:09.560

尝试`min-height:500px;`在css中设置

快乐的编码...

# paypal - 使用 Magento 和标准付款的 PayPal 错误 3005

> ID：15429094
> 
> 赞同：0
> 
> 时间：2013-03-15T09:46:57.543
> 
> 标签：paypal, magento-1.6

我已经在 PayPal mts 和 x.com 网站上发布了这个，但没有任何回应。

我正在查看一个客户网站，该网站在使用 PayPal 标准付款进行付款时遇到问题。基于 Magento 的站点 (CE 1.6.10) 可以很好地重定向到 Paypal，但是当客户尝试付款时，PayPal 会转到错误页面并显示错误代码 3005。我曾尝试在该站点的开发版本上使用沙箱，并且效果很好。

Magento 网站使用辅助电子邮件地址作为 PayPal 地址，在经过验证的 PayPal 帐户中，这一切似乎都很好。

您对为什么这可能会失败有任何想法吗？

# java - 从泛型类型获取类对象

> ID：15429098
> 
> 赞同：1
> 
> 时间：2013-03-15T09:47:07.943
> 
> 标签：java, android, generics, reflection

我想通过删除无用的类来简化项目。通过无用的类，我的意思是：

```
public class MainPage extends TileGridFragment<MainModel> {} 
```

该类的整个逻辑由 实现`TileGridFragment`，数据由 提供`MainModel`，通过单例类访问哪个实例。

我想将此类的实例化推迟到以后，所以我只是传递`MainPage.class`给我的方法。

`MainPage`相当于，我`TileGridFragment<MainModel>`想删除这个类，而是使用类似的东西`TileGridFragment<MainModel>.class`。

但这不起作用，我没有主意。

我也试过`Class.forName`了，但它抛出了一个`ClassNotFoundException`.

任何的想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:37:33.130

如果实际执行的`MainPage`是`{}`，就通过`TileGridFragment.class`。实际的类型参数与运行时无关，因为它们被**擦除删除**。

此外，由于擦除，您可以将新的`TileGridFragment`（使用原始类型，作为 的结果`TitleGridFragment.class.newInstance()`）转换为`TitleGridFragment<MainModel>`，并且不会产生附带损害（除了编译器的一点警告，可以抑制）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:53:00.890

你真的不能，你可能会从反思中得到一些快乐，但我不确定你到底想做什么。

在这里尝试： [在运行时获取类的泛型类型](https://stackoverflow.com/questions/3403909/get-generic-type-of-class-at-runtime)

# c#-4.0 - 错误 1001：在 vs2010 中没有完成帐户名和安全 ID 之间的映射

> ID：15429099
> 
> 赞同：1
> 
> 时间：2013-03-15T09:47:12.840
> 
> 标签：c#-4.0

MSI 是从针对 .NET Framework 4 的 .NET Windows 服务的 VS 2010 安装项目生成的。我的 MSI 可以正常安装，并且在使用 VS 2005 时服务可以正常启动。只有在将服务解决方案转换为 VS 2010 之后，我才开始获得问题。请指导我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-05T11:29:08.987

刚遇到同样的问题；

在 ProjectInstaller.cs 设计器中 - 右键单击​​“serviceProcessInstaller1”（默认名称）并选择属性。

在“帐户”下将其更改为“用户”默认值以外的**其他内容。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-21T17:09:08.200

似乎如果安装项目是使用 Visual Studio 2010 构建的，它不喜欢 DOMAIN\USERNAME 格式。它只喜欢用户名@域的格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-30T15:25:58.297

我得到了解决方案.. \ 被替换为 \\ 在代码中，因此存在问题。所以通过代码在内部用 \ 替换它，这样一切都会正常工作。

# c# - 重置 SendKeys 消息

> ID：15429101
> 
> 赞同：3
> 
> 时间：2013-03-15T09:47:19.130
> 
> 标签：c#, sendkeys

我创建了一个程序，它将通过使用 SendKeys 命令自动为我键入文本。当我按下开始按钮时，文本将按原样输入，当我按下开始按钮时，文本将停止输入。键入是通过使用间隔计时器完成的，该计时器将决定何时开始键入并在键入 2 行之间有一个简短的空间。

问题是，当我开始键入并键入部分消息然后在程序可以键入整个消息然后再次开始键入之前按停止时，消息将从停止的位置继续键入。例如，我想输入消息“123456789”。我开始输入，然后程序输入“1234”，然后按停止，这样程序就不会再输入了。然后，当我再次按开始时，程序应该从 1 开始输入，但我的程序输入的是“56789”。

停止时如何重置线路，然后重新开始？我试图将消息作为“消息”变量，当我按下停止按钮时它会被重置，但它不起作用。

这就是我设置输入每个间隔刻度的方式：

```
 private void Space(object sender, EventArgs e)
    {
        if (cbRandomLine.Checked || tickCount < lbMessage.Items.Count)
        {
            var index = cbRandomLine.Checked ? randomLine : tickCount;
            var item = lbMessage.Items[index].ToString();

            SendKeys.Send(item.Substring(currentChar++, 1));

            if (currentChar == item.Length)
            {
                SendKeys.Send("{enter}");
                tmrSpace.Enabled = false;
                currentChar = 0;
            }
        }

        tmrSpace.Interval = random.Next(10, 100);
    }

    private void Delay(object sender, EventArgs e)
    {
        if (delayCount == 0)
        {
            tmrDelay.Stop();
            tmrInterval.Start();
            lblDelay.Text = "Typing...";
        }
        else lblDelay.Text = "Typing in: " + delayCount;

        delayCount--;
    }

    // METHODS

    private void WhenStarted()
    {
        tickCount = 0;
        delayCount = 2;
        lbMessage.Enabled = false;
        txtMessage.Enabled = false;
        if (cbDelay.Checked)
        {
            lblDelay.Text = "Typing...";
            tmrInterval.Enabled = true;
        }
        else
        {
            lblDelay.Text = "Typing in: 3";
            tmrDelay.Enabled = true;
        }
        cbPause.Enabled = false;
        cbDelay.Enabled = false;
        cbRandomLine.Enabled = false;
        btnStart.Enabled = false;
        btnStop.Enabled = true;
        btnStop.Focus();
    }

    private void WhenStopped()
    {
        lblDelay.Text = string.Empty;
        whenStart = false;
        tickCount = 0;
        txtMessage.Text = string.Empty;
        lbMessage.Enabled = true;
        txtMessage.Enabled = true;
        cbPause.Enabled = true;
        cbDelay.Enabled = true;
        cbRandomLine.Enabled = true;
        btnStart.Enabled = true;
        btnStop.Enabled = false;
        btnStart.Focus();
        tmrDelay.Enabled = false;
        tmrInterval.Enabled = false;
        tmrSpace.Enabled = false;
    }

    private void SetInterval()
    {
        if (nudPlusMinus.Value == 0)
        {
            tmrInterval.Interval = int.Parse(nudInterval.Value.ToString());
        }
        else
        {
            tmrInterval.Interval = random.Next(int.Parse(nudInterval.Value.ToString()) - int.Parse(nudPlusMinus.Value.ToString()), int.Parse(nudInterval.Value.ToString()) + int.Parse(nudPlusMinus.Value.ToString()));
        }
    }

    private void ListBoxContentCheck()
    {
        if (lbMessage.Items.Count > 0)
        {
            btnStart.Enabled = true;
        }
        else
        {
            btnStart.Enabled = false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-17T01:43:06.647

您需要重置`currentChar`变量。

# android - ListView 标头中的 SupportMapFragment

> ID：15429102
> 
> 赞同：1
> 
> 时间：2013-03-15T09:47:24.653
> 
> 标签：android, android-maps-v2

我正在使用`Fragment`基于应用程序并且需要使用 Google Maps API v2 来显示地图。我正在尝试`SupportMapFragment`进入`ListView`标题，但不知道如何实现。

我尝试创建`newInstance`片段并调用`getView`设置为 headerView，但`getView`返回 null。

这不起作用：

```
SupportMapFragment s = SupportMapFragment.newInstance();
list.addHeaderView(s.getView()); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:28:33.623

通过在自己的 xml 文件中定义片段、扩展该视图并将其添加为标题视图来使其工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T08:05:36.930

解决方案是像这样在新实例上使用 getView()

```
SupportMapFragment mapFrag=SupportMapFragment.newInstance();
View listHeaderView = mapFrag.getView();
listView.addHeaderView(listHeaderView); 
```

# java - 确定为哪个聚合创建 bean

> ID：15429107
> 
> 赞同：0
> 
> 时间：2013-03-15T09:47:29.150
> 
> 标签：java, spring, javabeans

我有以下定义：

```
<bean id="logger" factory-method="createLog" scope="prototype" class="com.test.beans.LogBean" ></bean>

<bean id="aone" class="com.test.beans.AggregationOne">
    <property name="log" ref="logger"></property>
</bean>

<bean id="atwo" class="com.test.beans.AggregationTwo">
    <property name="log" ref="logger"></property>
</bean> 
```

是否可以识别正在创建哪个对象（一个或两个）bean“记录器”？

为什么我要问：在一个遗留应用程序中，我有一个所有类的日志实例。我想更改某些包的级别，但不能这样做（除了使用过滤器，我不想要什么）。为此，我想利用一些弹簧魔法，如果它存在于那种情况下）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:15:47.570

我不认为它可以这样做。您可以尝试一种`BeanPostProcessor`实现，它检测 bean 中的常见记录器对象并将其替换为特定的记录器对象。

# php - 匹配旁边带有特殊字符的数字

> ID：15429112
> 
> 赞同：0
> 
> 时间：2013-03-15T09:47:47.210
> 
> 标签：php, regex

我有一个可以以不同方式查看的字符串。

```
$str = "11:00 Team1 - Team2 0-0"
$str = "4' Team1 - Team2 2-1"
$str = "Half time Team1 - Team2 2-1"
$str = "55' Team1 - Team2 3-1"
$str = "Finished Team1 - Team2 2-1" 
```

通过使用正则表达式，我想知道字符串何时包含“Number+:+Number”、“Number+'”而前两种组合都不包含。此外，我想提取“数字+-+数字”。

我在第二个例子中试过这个：

```
preg_match("/[0-9+']/", $str) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:56:57.493

**这些是您需要的正则表达式：**

对于第一个：（数字+：+数字）

```
/[0-9]+:[0-9]+/ 
```

对于第二个：（数字+'）

```
/[0-9]+'/ 
```

对于第三个：（数字 + - + 数字）

```
/[0-9]+-[0-9]+/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:56:44.130

```
$ret = preg_match_all('/^([0-9]+\'|:)/', $str, $matches);
var_dump($ret) // 0 for no match, 1 for match 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:01:26.733

匹配所有情况的正确表达式是

```
\d+[:'-]\d* 
```

它匹配一个或多个数字，然后是冒号、' 或破折号，然后是零个或多个数字。

PHP 示例

```
$str[] = "11:00 Team1 - Team2 0-0";
$str[] = "4' Team1 - Team2 2-1";
$str[] = "Half time Team1 - Team2 2-1";
$str[] = "55' Team1 - Team2 3-1";
$str[] = "Finished Team1 - Team2 2-1";

foreach($str as $s) {
    preg_match_all("/\d+[:'-]\d*/", $s, $res);
    print_r($res);
} 
```

印刷

```
Array ( [0] => Array ( [0] => 11:00 [1] => 0-0 ) )
Array ( [0] => Array ( [0] => 4' [1] => 2-1 ) )
Array ( [0] => Array ( [0] => 2-1 ) )
Array ( [0] => Array ( [0] => 55' [1] => 3-1 ) )
Array ( [0] => Array ( [0] => 2-1 ) ) 
```

[现场小提琴](http://phpfiddle.org/main/code/6i7-hps)

# push-notification - 发送推送通知时出现 Worklight 错误

> ID：15429116
> 
> 赞同：0
> 
> 时间：2013-03-15T09:47:55.323
> 
> 标签：push-notification, ibm-mobilefirst

我正在尝试使用 Worklight 推送通知来发送推送 iOS+Android 应用程序。

我在我的适配器中创建了 submitNotification 函数，当我调用它时，它说推送已成功发送，但实际上我的设备中没有收到推送。

当我看到日志时，我可以阅读：

```
Couldn't connect to APNS server
java.net.PlainSocketImpl.socketConnect(Native Method)
java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
java.net.SocksSocketImpl.connect(SocksSocketImpl.java:432)
java.net.Socket.connect(Socket.java:529)
com.sun.net.ssl.internal.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:570)
com.sun.net.ssl.internal.ssl.SSLSocketImpl.<init>(SSLSocketImpl.java:371)
com.sun.net.ssl.internal.ssl.SSLSocketFactoryImpl.createSocket(SSLSocketFactoryImpl.java:71)
com.notnoop.apns.internal.ApnsConnectionImpl.socket(ApnsConnectionImpl.java:133)
com.notnoop.apns.internal.ApnsConnectionImpl.sendMessage(ApnsConnectionImpl.java:160)
com.notnoop.apns.internal.ApnsServiceImpl.push(ApnsServiceImpl.java:46)
com.notnoop.apns.internal.AbstractApnsService.push(AbstractApnsService.java:52)
com.notnoop.apns.internal.ApnsServiceImpl.push(ApnsServiceImpl.java:36)
com.worklight.integration.notification.apns.ApplicationConnection.sendNotification(ApplicationConnection.java:84)
com.worklight.integration.notification.apns.APNSMediator.sendNotification(APNSMediator.java:85)
com.worklight.integration.notification.Mediator$4.run(Mediator.java:174)
java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439)
java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
java.util.concurrent.FutureTask.run(FutureTask.java:138)
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
java.lang.Thread.run(Thread.java:680) 
```

和

```
Couldn't send message com.notnoop.apns.EnhancedApnsNotification@96eee2c0                                  com.notnoop.apns.internal.ApnsConnectionImpl.socket(ApnsConnectionImpl.java:146)
com.notnoop.apns.internal.ApnsConnectionImpl.sendMessage(ApnsConnectionImpl.java:160)
com.notnoop.apns.internal.ApnsServiceImpl.push(ApnsServiceImpl.java:46)
com.notnoop.apns.internal.AbstractApnsService.push(AbstractApnsService.java:52)
com.notnoop.apns.internal.ApnsServiceImpl.push(ApnsServiceImpl.java:36)
com.worklight.integration.notification.apns.ApplicationConnection.sendNotification(ApplicationConnection.java:84)
com.worklight.integration.notification.apns.APNSMediator.sendNotification(APNSMediator.java:85)
com.worklight.integration.notification.Mediator$4.run(Mediator.java:174)
java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439)
java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
java.util.concurrent.FutureTask.run(FutureTask.java:138)
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
java.lang.Thread.run(Thread.java:680) 
```

然后

```
 Failed to send message com.notnoop.apns.EnhancedApnsNotification@96eee2c0... trying again 
```

我的 submitNotification 功能：

```
function submitNotification(userId, notificationText) {
    var userSubscription = WL.Server.getUserNotificationSubscription(
            'myAdapter.MyPushEventSource', userId);

    if (userSubscription == null) {
        return {
            result : "No subscription found for user :: " + userId
        };
    }

    WL.Logger.debug("submitNotification >> userId :: " + userId + ", text :: "
            + notificationText);

    WL.Server.notifyAllDevices(userSubscription, {
        badge : 1,
        activateButtonLabel : "Open",
        alert : notificationText
    });

    return {
        result : "Notification sent to user :: " + userId
    };
} 
```

我的代码有问题吗？或与我的网络？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:43:29.433

最后是网络问题。

我们更改了防火墙配置以允许访问 Google 和 Apple 推送服务器。对于 Apple 服务器，您可以在此地址找到更多详细信息：http: [//developer.apple.com/library/ios/#technotes/tn2265/_index.html#//apple_ref/doc/uid/DTS40010376-CH1-TNTAG41](http://developer.apple.com/library/ios/#technotes/tn2265/_index.html#//apple_ref/doc/uid/DTS40010376-CH1-TNTAG41)

> 整个 17.0.0.0/8 地址块分配给 Apple，因此您可以在防火墙规则中指定该范围。

# perl - 是否有任何 perl 脚本用于检查基本 clearcase 中新添加的 vobs 和模块

> ID：15429117
> 
> 赞同：1
> 
> 时间：2013-03-15T09:47:58.947
> 
> 标签：perl, clearcase

***是否有任何 perl 脚本来检查基本 clearcase 中新添加的 vobs 和模块？***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:56:25.873

从来没听说过。

通常的技术是设置可以执行您想要的任何操作的触发器（例如，包括发送通知电子邮件）：

*   如[该线程](http://www.ibm.com/developerworks/forums/thread.jspa?threadID=42495)中所述，您无法在 mkvob 上设置触发器（创建新 vob）
*   [`cleartool mktrtype`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_mktrtype.htm)您可以在`mkcomp`（创建新组件）上创建触发器（ ）

所以唯一的其他解决方案是某种轮询守护程序，它会定期执行

```
cleartool lsvob
# for each UCM vob
cleartool lscomp -invob \anUCMVob 
```

# php - 在 wordpress 用户表中添加列

> ID：15429118
> 
> 赞同：0
> 
> 时间：2013-03-15T09:48:00.680
> 
> 标签：php, wordpress

我目前的管理部分有问题。我想添加一些关于我的用户的信息并在数组中显示这些信息。

这是一个屏幕截图：[表格视图](http://awesomescreenshot.com/09a11nkd14)

你可以看到我添加了一些列。

当您单击用户帐户时，与这些列对应的字段会出现并填充。该信息也在 sql 库中。但表格中没有显示任何内容:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T11:16:47.510

您必须使用用户元来对 Wordpress 友好这是添加用户元的方法： http: [//codex.wordpress.org/Function_Reference/add_user_meta](http://codex.wordpress.org/Function_Reference/add_user_meta)

但是，如果您愿意，可以使用像这样的元管理器：[http ://wordpress.org/extend/plugins/user-meta-manager/](http://wordpress.org/extend/plugins/user-meta-manager/)

# c# - 具有长处理线程的 ASP.NET 异步网页

> ID：15429121
> 
> 赞同：0
> 
> 时间：2013-03-15T09:48:07.473
> 
> 标签：c#, asp.net, asynchronous

我有一个执行长时间处理的页面（在某处写一些pdf），所以我有以下内容：

**我的 ArchiveDoc.aspx 页面**：（该页面在页面指令中有一个标签（称为进度）和 Async="true"）

```
delegate void archiveFuncDelegate(int idTurnover, string serverMapPath);
delegate void UpdateUIDelegate(string Text);

protected void Page_Load(object sender, EventArgs e)
{
    Page.AddOnPreRenderCompleteAsync(BeginTask, EndTask);
    this.progress.Text = "0";
}

private void UpdateUI(string Text)
{
    this.progress.Text = Text;
}

private IAsyncResult BeginTask(object sender, EventArgs e, AsyncCallback cb, object state)
{

    // invoke
    archiveFuncDelegate del = asyncArchivageFacture;
    IAsyncResult result = del.BeginInvoke(cb,null); 
    return result;
}

private void EndTask(IAsyncResult ar)
{
    if (!ar.IsCompleted)
    {
        progress.Text = "Error";
    }
    else
    {
        progress.Text = "OK";
    }
}

#region Archive (thread)

// long processing task (exemple)
public void asyncArchivageFacture()
{
    // exemple
    int total = 101;
    int progress = 0;

    for(int i=0; i<total; i++)
    {
        progress = i*100 / total;
        updateUi.Invoke(progress + "%");
        Thread.Sleep(2000);
     }

}

#endregion 
```

当我调用我的页面时，线程被调用（asyncArchivageFacture（）以及UpdateUI（）），但网页永远不会更新：我在浏览器中获得了带有空白页面的加载符号，一旦线程完成，页面最终显示“OK”。它不显示进度（10%.. 20%..）

知道有什么问题吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:23:07.463

这是因为只有在调用 EndTask 方法之后才会将 response(html) 发送到客户端。无论您对 progress.Text 进行什么更改，都在服务器端，您只更改服务器端变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:14:46.447

我最终使用了一个简单的

> 线程 t = 新线程（..）

没有 delaring 页面 async=true。

# ruby-on-rails - Rails：inverse_of 错误

> ID：15429122
> 
> 赞同：1
> 
> 时间：2013-03-15T09:48:08.010
> 
> 标签：ruby-on-rails, ruby

```
class User < ActiveRecord::Base
  attr_accessible :email, :password, :picture, :username
  has_many :entries, :class_name => "Entry", :inverse_of => :user

  has_many :sent_messages, :inverse_of => :sender, :class_name => "Message", :foreign_key => "sender_id"
  has_many :recieved_messages, :inverse_of => :target, :class_name => "Message", :foreign_key => "target_id"

  has_many :mails, :inverse_of => :user
  ...
end

class Message < ActiveRecord::Base
  attr_accessible :message, :seen, :title
  belongs_to :sender, class_name => "User", :inverse_of => :sent_messages
  belongs_to :target, class_name => "User", :inverse_of => :recieved_messages
end

class CreateMessages < ActiveRecord::Migration
  def change
    create_table :messages do |t|
      t.references :sender
      t.references :target
      t.string :title
      t.string :message
      t.boolean :seen

      t.timestamps
    end
  end
end 
```

我有这两个模型。当我尝试获取用户发送的消息（user.sent_messages）时，我收到如下错误：

```
Could not find the inverse association for sent_messages (:sender in Message) 
```

这是我使用 Rails 的第二天，所以它可能是微不足道的，但我没有看到它。

PS：如果我从 User 类中删除 :inverse_of => :sender，user.sent_messages 可以工作，但据我所知 :inverse_of 很重要。

**PPS：发现错误！在 Message 类中，我使用的是 class_name 而不是 :class_name。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:45:49.723

这就是为什么我更喜欢尽可能使用新风格的哈希

```
class Message < ActiveRecord::Base
attr_accessible :message, :seen, :title
belongs_to :sender, class_name: 'User', inverse_of: :sent_messages
belongs_to :target, class_name: 'User', inverse_of: :recieved_messages
end 
```

尽管与许多事情一样，这通常是个人品味的问题:)

# python-2.7 - 如何从python中的日期时间字符串中删除秒和毫秒

> ID：15429124
> 
> 赞同：5
> 
> 时间：2013-03-15T09:48:11.957
> 
> 标签：python-2.7, selenium-webdriver, robotframework

如何将日期格式转换`"2013-03-15 05:14:51.327"`为`"2013-03-15 05:14"`，即删除秒和毫秒。我认为机器人框架工作没有办法。请让我知道是否有人在python中有解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T09:50:04.880

试试这个（感谢搅拌机！）

```
>>> date = "2013-03-15 05:14:51.327"
>>> newdate = date.rpartition(':')[0]
>>> print newdate
2013-03-15 05:14 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-02T17:00:56.107

在 Robotframework 中，最直接的方法是[`Split String From Right`从 String 库](http://robotframework.org/robotframework/latest/libraries/String.html#Split%20String%20From%20Right)库中获取用户：

```
${datestring}=    Set Variable    2019-03-15 05:14:51.327
${parts}=  Split String From Right    ${datestring}    :    max_split=1
# parts is a list of two elements - everything before the last ":", and everything after it
# take the 1st element, it is what we're after
${no seconds}=    Get From List     ${parts}    0
Log    ${no senods}    # 2019-03-15 05:14 
```

# java - 可以从android中的另一个类访问单选按钮检查状态

> ID：15429126
> 
> 赞同：0
> 
> 时间：2013-03-15T09:48:16.560
> 
> 标签：java, android, class

我有一个“MainActivity 类”，在里面我有单选按钮的对象。我在'MainActivity'中有另一个类'classB'我如何能够从classB访问单选按钮检查状态“RB1.isChecked（）”？

```
 public class MainActivity extends Activity 
 { 
    public RadioButton RB1

    protected void onCreate(Bundle savedInstanceState) 
     {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.test_layout);

    RB1 = (RadioButton)findViewById(R.id.radioButtonA);
     }

   public class classB extends BroadcastReceiver
      {

      }

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:52:35.230

rb1 对象可以在您的嵌套类中访问，所以像这样使用它：

```
 rb1.isChecked()

   public class classB extends BroadcastReceiver
  {

        void doSomething(){
              if(rb1.isChecked()){

                         //place your code here
               }

  } 
```

B 类是一个非静态内部类，因此它可以访问其封闭类的成员而无需任何更改：

[http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T09:50:12.457

将单选按钮设为静态，以便您可以在任何其他类中访问它。

```
public static RadioButton RB1; 
```

在`classB`访问单选按钮使用`MainActivity.RB1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T11:24:44.797

即使您需要在其他地方使用 B 类，上述两个答案都是正确的，您可以像这样使用共享首选项

```
SharedPreferences prefs1 = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());

save the state of the radiobutton inside onCheckedChangeListener

onCheckedChange(boolean ischecked)
{

  SharedPreferences.Editor editor = prefs1.edit();
        editor.putBoolean("confirm", isChecked);
        editor.commit();

}

and then you can access this anywhere 

boolean rbcheckedState=prefs1.getBoolean("confirm",true); 
```

# android - 终止正在进行的流程和当前活动

> ID：15429129
> 
> 赞同：0
> 
> 时间：2013-03-15T09:48:29.163
> 
> 标签：android, android-asynctask, progressdialog

我被这个问题难住了，我的`onBackPressed()`方法在必要时不起作用。我的情况是，一旦活动开始，就会出现进度对话框，因为我调用`asynctask.execute()`了 onCreate。当过程需要很长时间时，我想为用户提供一个功能，他可以关闭正在进行的过程（从服务器下载数据），所以我尝试关闭对话框并在按下后退按钮时完成活动，但它不起作用。

当我在获得数据后通常按下返回按钮时，控件似乎在`onBackPressed()`.

**下面是我的代码片段：**

```
public void onBackPressed() {

            if(progressDialog != null && progressDialog.isShowing())
            {
                progressDialog.dismiss();
            }
                         finish();

        } 
```

有没有其他方法可以让用户有机会随时取消。请建议我如何在用户按下后退按钮时终止整个过程和活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:27:52.163

要取消进度对话框，请将进度对话框取消设置为 true。

```
dialog.setCancelable(true); 
```

# asp.net-mvc - 无法将系统从 EF 4.3.1 升级到 5

> ID：15429131
> 
> 赞同：0
> 
> 时间：2013-03-15T09:48:34.663
> 
> 标签：asp.net-mvc, entity-framework

背景：我已将系统从 Entity Framework 4.3.1 升级到 5，并从 VS 2010 移动到 VS 2012。我还从 MVC3 升级到 MVC4。我首先使用 EF 迁移代码。

所有这一切都在我的机器上完美运行，因此我尝试使用新代码升级我的测试服务器。

首先，我在服务器上安装了 .Net 4.5，没有发生任何事故（包括所有后续的 Windows 更新）。然后我验证了系统继续在升级后的服务器上运行，确实如此。

然后我在 VS2012 中使用新的“发布...”向导构建了一个部署包。在这里，我决定不选中名为“执行代码优先迁移（在应用程序启动时运行）”的复选框，因为我想在安装后直接通过我自己对 migrate.exe 的显式调用来执行此操作。

现在，我尝试升级测试系统。部署工作没有问题，但是当我尝试运行对 migrate.exe 的调用时，我首先收到消息：

“没有挂起的基于代码的迁移。” 然后出现一个大红色文本块，说明：

“错误：无法更新数据库以匹配当前模型，因为存在挂起的更改并且自动迁移已禁用。将挂起的模型更改写入基于代码的迁移或启用自动迁移。将 DbMigrationsConfiguration.AutomaticMigrationsEnabled 设置为 true 以启用自动迁移。”

当我尝试使用系统时，这个验证数据库有效性的调用返回 false： context.Database.CompatibleWithModel(true) 这不被我的系统接受，它会关闭。

然后，在替换 __MigratHistory 中的 CreatedOn 列后，我恢复到以前的包，系统再次像魅力一样工作。下面是我用来恢复的sql sript...

```
alter table dbo.__MigrationHistory
add CreatedOn datetime null
go

Update s
Set s.CreatedOn = CAST(SUBSTRING(s.MigrationId, 1, 8) as datetime) + CAST(SUBSTRING(s.MigrationId, 9, 2) + ':' + SUBSTRING(s.MigrationId, 11, 2) as time),
s.ProductVersion = '4.3.1'
from dbo.__MigrationHistory s 
```

关于我做错了什么的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T06:58:21.900

在 Configuration.cs 文件中进行更改 ==>

```
public Configuration()
    {
        AutomaticMigrationsEnabled = **true**;
    } 
```

# google-swiffy - 我们可以看看 runtime.js 的未编译的 JavaScript 源代码吗？

> ID：15429141
> 
> 赞同：5
> 
> 时间：2013-03-15T09:49:05.710
> 
> 标签：google-swiffy

查看可读源代码将使使用 Swiffy 作为更完整的 Flash 替代品/替代品的一部分变得更加容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-28T17:16:54.783

使用这样的 javascript 美化器：http: [//jsbeautifier.org/](http://jsbeautifier.org/) 只需复制并粘贴 runtime.js 代码。它也没有编译。它已经通过一个 javascript 最小化程序。

# eclipse - 在 Eclipse 中为项目添加 Maven 存储库？

> ID：15429142
> 
> 赞同：18
> 
> 时间：2013-03-15T09:49:10.047
> 
> 标签：eclipse, repository, eclipse-juno

如何为项目添加 Maven 存储库。我正在使用 Eclipse Juno 版本：Juno Service Release 1 Build id: 20120920-0800 并使用 Fedora 作为我的操作系统。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-15T12:56:16.220

您可以将其包含在您的`pom.xml`. 只需在`<project>`标签内添加存储库信息

```
<repositories>
    <repository>
        <id>maven-restlet</id>
        <name>Public online Restlet repository</name>
        <url>http://maven.restlet.org</url>
    </repository>
</repositories> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T10:28:00.130

您必须将存储库添加到您的`settings.xml`：[Maven 设置参考](http://maven.apache.org/settings.html#Repositories)。例如：

```
 <repositories>
    <repository>
      <id>codehausSnapshots</id>
      <name>Codehaus Snapshots</name>
      <releases>
        <enabled>false</enabled>
        <updatePolicy>always</updatePolicy>
        <checksumPolicy>warn</checksumPolicy>
      </releases>
      <snapshots>
        <enabled>true</enabled>
        <updatePolicy>never</updatePolicy>
        <checksumPolicy>fail</checksumPolicy>
      </snapshots>
      <url>http://snapshots.maven.codehaus.org/maven2</url>
      <layout>default</layout>
    </repository>
  </repositories> 
```

检查 eclipse `Window`-> `Preferences`-> `Maven`->中的设置`Installations`以查看此文件所在的位置。

您还可以在`pom.xml`项目中添加一个存储库，使其仅可用于该项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-17T12:53:43.473

对于全新安装，请按照以下步骤操作：

From the Windows “Start” button on the menu, select the “Run” menu item. Into the dialog box, enter the command “cmd” and press the “Ok” button. This will open a command window with a shell prompt.

```
Type cd “C:/Documents and Settings/<windows username>”/
Type mkdir .m2
Type cd .m2
Type notepad settings.xml. 
```

This will open a new document in Notepad and show you a warning “Cannot find the settings.xml file. Do you want to create a new file?”. Select “Yes”. Enter the following code into the document:

```
<settings>
<localRepository>
D:/mavenrepository (Give here path of your choice)
</localRepository>
</settings> 
```

Save the file and close out of notepad. Congrates, You are done. Happy Learning !!

from [http://howtodoinjava.com/2013/01/04/how-to-change-maven-local-repository-path-in-windows/](http://howtodoinjava.com/2013/01/04/how-to-change-maven-local-repository-path-in-windows/)

# algorithm - 用 Ocaml 中的另一个子列表替换一个子列表

> ID：15429144
> 
> 赞同：1
> 
> 时间：2013-03-15T09:49:13.173
> 
> 标签：algorithm, replace, ocaml, sublist

我想用列表中的另一个**子列表替换一个****子** 列表以实现以下结果：`lista` **`listb``listo`**

 **```
let replace_sublist listo lista listb = 
```

在 listo 中，如果有 sublist = lista，则将这个 sublist 替换为 listb。

我发现在 python 中实现了一个类似的问题。

链接： [用python中的另一个子列表替换一个子列表](https://stackoverflow.com/questions/12898023/replacing-a-sublist-with-another-sublist-in-python)

有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:52:26.613

```
type 'a strip_result =
| No_match
| Too_short
| Tail of 'a list

(** [try_strip li subli] tries to
    remove the prefix [subli] from the list [li] *)
let rec try_strip li subli = match li, subli with
  | _, [] -> Tail li
  | [], _ -> Too_short
  | hli::tli, hsub::tsub ->
    if hli <> hsub then No_match
    else try_strip tli tsub

let rec replace_sublist li from_sub to_sub =
  match li with
    | [] -> []
    | head::tail ->
      match try_strip li from_sub with
        | Too_short -> li
        | No_match -> head :: replace_sublist tail from_sub to_sub
        | Tail rest -> to_sub @ replace_sublist rest from_sub to_sub

let test =
  (* simple replace *)
  assert (replace_sublist [1;2;3;4] [2;3] [-2;-3] = [1;-2;-3;4]);
  (* multiple replace *)
  assert (replace_sublist [1;2;3;2;4] [2] [0] = [1;0;3;0;4]);
  (* stop while partial match *)
  assert (replace_sublist [1;2;3;4] [3;4;5] [0] = [1;2;3;4]);
  (* stop at match *)
  assert (replace_sublist [1;2;3;4] [3;4] [2;1] = [1;2;2;1]);
  (* tricky repeating sublist case *)
  assert (replace_sublist [2;2;3] [2;3] [0] = [2;0]);
  ()

(* tail-rec version: instead of concatenating elements before
   the recursive call
     head :: replace_sublist ...
     to_sub @ replace_sublist ...
   keep an accumulator parameter `acc` to store the partial result,
   in reverse order
     replace (t :: acc) ...
     replace (List.rev_append to_sub acc) ...
*)
let replace_sublist li from_sub to_sub =
  let rec replace acc li = match li with
    | [] -> List.rev acc
    | head::tail as li ->
      match try_strip li from_sub with
        | Too_short -> List.rev (List.rev_append li acc)
        | No_match -> replace (head :: acc) tail
        | Tail rest -> replace (List.rev_append to_sub acc) rest
  in replace [] li 
```

PS：众所周知，这个算法可以通过在`try_strip`失败后移动来改进，不仅仅是移动到列表中的下一个元素，而是通过一些我们知道不能开始新匹配的元素。但是，要跳过的元素数量并不是简单的`List.length from_sub - 1`，它需要从模式结构中预先计算（这取决于“棘手的重复子列表”的存在）。这就是[Knuth-Morris-Pratt](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm)算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:57:35.423

你可以这样做：

```
let replace listo lista listb =
  let rec loop listo lista listb accu =
    match listo with
      [] -> List.rev accu
    | x :: xs ->
      if xs = lista then List.rev_append (x :: accu) listb
      else loop xs lista listb (x :: accu) in
  loop listo lista listb [] 
```

首先，您需要找到 sublist `lista`。找到此列表后，您只需还原累加器`accu`，然后附加`listb`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T14:57:39.943

这本质上是一个子字符串搜索和替换。如果您的列表很长，您可能需要使用像[Knuth-Morris-Pratt](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm)这样的奇特算法来避免二次比较。

（我打算写一些代码，bug gasche 已经做得很好了。）**

# c# - Crystal Report垂直文本框对齐

> ID：15429145
> 
> 赞同：1
> 
> 时间：2013-03-15T09:49:18.587
> 
> 标签：c#, .net, crystal-reports

我目前正在创建水晶报表，并希望将页眉中的文本框设置为底部位置并在上部行上生长。但现在我不能而且只能点击 can grow 属性，我还能做些什么来实现这一点？

![在此处输入图像描述](../Images/ff12cba58c3e105155f2b1792d606496.png)

# sql - SSIS 2012 - 控制流停止中的条件拆分和重新加入

> ID：15429151
> 
> 赞同：1
> 
> 时间：2013-03-15T09:49:41.763
> 
> 标签：sql, ssis, constraints

我创建了一个 SSIS 包来处理一些文件导入、操作等，但是我创建的条件拆分存在问题。

我有一个执行 SQL 任务，它只是对表进行计数。一个约束有一个结果是否为 0 的表达式，另一个是否大于 0。对于它为 0 的约束，我还有三个执行 SQL 任务用​​于删除和创建各种表。对于另一个约束，它跳过这三个任务到下一个执行 SQL 任务，我们暂时称它为 Bob。等 0 约束一旦完成重新加入 Bob，然后是包的其余部分。

当我运行包时，满足零条件，三个执行SQL任务完成然后它停止，说包执行完成。它似乎没有重新加入主流。

我尝试将这三个任务放在一个序列容器中，但没有任何区别。我显然做了一些奇怪的事情或错过了某处的配置。如果有人能对此有所了解，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:53:25.267

难以置信的。我已经整理好了。最后一个等于 0 部分的约束需要逻辑 OR 选项设置。

# algorithm - 在堆中删除，为什么这个实现会切换最后一个元素的值，而不是直接替换？

> ID：15429164
> 
> 赞同：1
> 
> 时间：2013-03-15T09:50:21.783
> 
> 标签：algorithm, data-structures, heap, pseudocode, performance

(USC CSCI 303 作业 4) 问题 7 (6.5-7)：

> 该操作从堆中`Heap-Delete(A, i)`删除节点中的项目。给出一个在*O* ( *lg n* ) 时间内运行*n*元素最大堆的实现。`i``A``Heap-Delete`

 ***这是参考解决方案的伪代码和描述：

```
Heap-Delete(A, i)
    A[i] ↔ A[length(A)] 
    length(A) ← length(A) - 1
    Heapify(A, i) 
```

> 该算法删除节点处的元素`i`，并将其替换为最后一个元素。然后算法`Heapify`从节点运行`i`。

如果“↔”改为“←”不是更好吗？**或者**这真的有必要吗？

我从 [http://www-scf.usc.edu/~csci303/cs303hw4solutions.pdf](http://www-scf.usc.edu/~csci303/cs303hw4solutions.pdf)得到这个（第 4 页）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:56:19.740

这不是真的必要。也许目的是返回该元素，在这种情况下，您需要将其存储在*某个地方*，然后再被覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:45:27.363

也许这样做是为了`Heap-Delete()`在执行堆排序期间可以重复调用。在堆排序中，最大的项从堆中取出，存放在堆的最后一项中，堆大小减一。然后堆被重新堆化，然后你继续到下一个最大的项目。当堆大小为 1 时，最终结果是堆所基于的数组从小到大排序。`Heap-Delete()`以这种方式编写`Heap-Sort()`可以非常简单：

```
while (HeapSize>0)
   HeapDelete(0) 
```

现在看起来您并没有`Heap-Delete()`跟踪 之外的堆大小`length`，这可能是反对我的理论的证据。但无论如何，这是我最好的猜测。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-01-30T12:56:42.797

这里只给出了指向根节点的指针，所以如果你还想删除最后一个节点（对于那些说删除叶节点需要 o(1) 的人）

您必须遍历 log(n) 才能到达叶子，然后只有答案是 b。***

# git - 如何在 smartgit 中签出特定的提交

> ID：15429165
> 
> 赞同：9
> 
> 时间：2013-03-15T09:50:22.700
> 
> 标签：git, smartgit

我想检查 SmartGit 中的特定提交。我怎么做？是否可以在 SVN 中检查某个版本？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-15T09:59:28.037

是的，签出某个提交类似于签出某个 SVN 修订版。

首选方法是打开*Log 窗口*，找到所需的提交，调用**Branch|Check Out**并在那里选择提交。

或者，您可以从*工作树窗口*执行此操作：确保您的焦点在**目录**视图中，选择**分支|签出**并选择那里的提交。

# jquery - 如果 td 为空，如何将 td 中的表数据向上移动 td

> ID：15429171
> 
> 赞同：0
> 
> 时间：2013-03-15T09:50:35.217
> 
> 标签：jquery, html-table

我有两个非常简单`html table` 的数据，其中分布着一些数据，请参阅下面的代码这是我到目前为止所做的。我在这里卡住了，请帮帮我。

```
var x = 0,y=0;
$("table tr td").each(function(){
    if($(this).text() !== ""){
        alert($(this).text());
        y++;
    }
    x++;
});
alert(x);//indicates how many td's 
alert(y);//indicates how many td have values 
```

现在，如果其中没有数据，我只想将每个 td 中的数据向上移动 td 。请点击下面的 Js FIDDLE 链接

[JS FIDDLE 链接](http://jsfiddle.net/twkUR/5/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T09:55:20.760

以相反的顺序（从下往上）循环遍历行。对于每个`td`有数据的，查看`td`前一行中对应索引处的 是否为空。如果是这样，请将内容移到该行中。您可以使用[`index`](http://api.jquery.com/index)或[`:eq`](http://api.jquery.com/eq-selector/)选择器来访问前一行的`td`. 您需要多次传递来处理列中有多个空白的情况，但代码要简单得多。

更复杂的方法是当你找到一个空白时向前推进并洗牌整个列。我对它的样子很感兴趣，所以：

```
var rows = $("#xyz tr");
var row, n;

for (row = 0; row < rows.length - 1; ++row) {
  $(rows[row]).children().each(function(col) {
    var thisCell, cellBelow, text, foundText;

    foundText = true;
    thisCell = $(this);
    while (!thisCell.text() && foundText) {
      // This cell has no text, shuffle the column up
      foundText = false;
      for (n = row; n < rows.length - 1; ++n) {
        cellBelow = $($(rows[n + 1]).children()[col]);
        text = cellBelow.text();
        if (text) {
          foundText = true;
        }
        $($(rows[n]).children()[col]).text(text);
        cellBelow.text('');
      }
    }
  });
} 
```

[实例](http://jsbin.com/ohafev/1)| [来源](http://jsbin.com/ohafev/1/edit) *（对不起，无法**忍受**jsFiddle——根据我的经验，速度慢而且有问题）*

现在，这是相当低效的，并且做了一些 DOM 操作，但它确实有效。正因为如此，如果表格很大，我会很想走另一条路，也许在建立一个列数组数组后遍历表格，只向每列添加非空白单元格，然后完全替换表格基于这些新数据。

# windows-installer - 将语言转换为单个 MSI 的正式 MSI 支持

> ID：15429178
> 
> 赞同：1
> 
> 时间：2013-03-15T09:51:03.887
> 
> 标签：windows-installer

我有一个关于将转换 (.mst) 嵌入单个 MSI 的问题。我意识到这更像是一个微软的问题，但我希望这里有一些 MSI 忍者可以帮助提供答案。

问题：MSI (Microsoft) 是否正式支持将特定语言转换 (.mst) 嵌入到单个 msi 安装程序中？我意识到这是可以做到的，但基于我的 google-foo 尚不清楚这是否真的合适/受支持。

更多信息：我正在使用带有 InstallShield 2012 Spring 的基本 MSI 项目来生成单个（基于英语的）msi 安装程序。作为构建的一部分，我还生成了一组非英语转换 (.mst)，可以使用 misexec TRASNFORMS 属性将其应用于 msi。但是，我真正想做的是生成一个嵌入转换的 msi，这样我就不需要携带所有的 mst 文件来支持多语言。

我已经使用 WiSubStg.vbs 和 WiLangId.vbs 命令将转换嵌入到我的 msi 中（在 InstallShield/msi 构建后），一切似乎都在工作。但是，我担心这种方法是否受支持/正确。在我的搜索中，我发现了一些网站声明这种方法不受 MSI 的正式支持，但那些已有多年历史的帖子，我已经看到了 MSI 技术在该领域取得进步的帖子。此外，我看到 Windows 开发中心正式讨论嵌入式转换，这使我相信该方法受支持。

顺便说一句——我的目标平台有：Windows ® 安装程序。V 5.0.9200.16384

资源：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa368347(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368347(v=vs.85).aspx) [http://www.installsite.org/pages/en/msi/articles/embeddedlang/](http://www.installsite.org/pages/en/msi/articles/embeddedlang/) [http://go4answers.webhost4life.com/Example/multiple-language-setup-package-213354.aspx](http://go4answers.webhost4life.com/Example/multiple-language-setup-package-213354.aspx)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T14:12:28.407

请参阅：[不带 Setup.exe 启动器的多语言 MSI 程序包](http://www.installsite.org/pages/en/msi/articles/embeddedlang/)（您已列出）

Microsoft 确实支持嵌入式转换，但他们没有正式支持的是这种技术，可以在不使用 setup.exe 调用它们的情况下隐式应用它们。虽然它没有记录也没有经过彻底测试，但据观察，它已由 Microsoft 产品团队发布的各种 MSI 实施。

据我了解，如果我错了，有人会纠正我，这仅支持 ANSI 语言而不是 Unicode 语言，因此更完整的解决方案将涉及使用外部 UI 而不是 Windows Installer 本机 UI。

# client - 为 Spring 数据休息服务生成客户端库

> ID：15429179
> 
> 赞同：4
> 
> 时间：2013-03-15T09:51:06.950
> 
> 标签：client, spring-data-rest

我正在编写 spring 数据休息服务，并希望将 Java 客户端生成为 jar 文件以供我的其他项目使用。那么是否有一些自动生成客户端的方法，或者我必须自己编写一个。如果有任何一种方式，你可以帮助我开始这个。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T10:00:06.587

检查这个：[Spring Data Web Exporter Client](https://github.com/onlyabout/spring-data-rest-client)。您可以组装构建脚本来创建客户端 jar 存档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T07:37:19.970

我没有使用 Spring Data Web Exporter Client 但这似乎是一个不错的方法，但如果你想另辟蹊径并编写自己的客户端，你可以使用 Spring RestTemplate 来使用服务器端的所有 url。

# c# - 解决基于接口的方法中的歧义

> ID：15429182
> 
> 赞同：1
> 
> 时间：2013-03-15T09:51:18.460
> 
> 标签：c#, asp.net, oop, design-patterns, repository-pattern

我尝试了以下存储库模式实现

```
interface IRepository<T>
{
    IQueryable<T> All { get; }
    T Find(object id);
    void Insert(T model); 
} 
```

然后我在下面定义了 IAdminRepository

```
interface IAdminRepository : IRpository<Role>, IRepository<User>
{
}

public class AdminRepository:IAdminRepository
{
    IQueryable<User> IRepository<User>.All
    {
        get { throw new NotImplementedException(); }
    }

    User IRepository<User>.Find(object id)
    {
        throw new NotImplementedException();
    }

    void IRepository<User>.Insert(User model)
    {
        throw new NotImplementedException();
    }

    IQueryable<Role> IRepository<Role>.All
    {
        get { throw new NotImplementedException(); }
    }

    Role IRepository<Role>.Find(object id)
    {
        throw new NotImplementedException();
    }

    void IRepository<Role>.Insert(Role model)
    {
        throw new NotImplementedException();
    }
} 
```

在我的业务层中，我使用基于接口的调用。

```
public interface IAdminService
{
    bool CreateUser(User user);        
    List<User> GetAllUsers();
}

public class AdminService : IAdminService
{
    private readonly IAdminRepository AdminRepository;

    public AdminService(IAdminRepository _adminRepository)
    {
        AdminRepository = _adminRepository;
    }

    public bool CreateUser(User user)
    {
        AdminRepository.Insert(user);
        return true;
    }

    public List<User> GetAllUsers()
    {
        return AdminRepository.All; // Here is error 
    }
} 
```

> 错误：IRepository.All 和 IRepository.All 之间存在歧义。

如何解决这个问题？我以这种方式使用存储库模式的方法有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:52:04.537

消除调用歧义的一种简单方法是创建别名方法：

```
public class AdminRepository : IAdminRepository {

  public IQueryable<User> AllUsers {
    get { throw new NotImplementedException(); }
  }

  public IQueryable<Role> AllRoles {
    get { throw new NotImplementedException(); }
  }

  IQueryable<User> IRepository<User>.All {
    get { return AllUsers; }
  }

  IQueryable<Role> IRepository<Role>.All {
    get { return AllRoles; }
  }

  ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T10:01:58.337

我猜这条线

```
return AdminRepository.All; // Here is error 
```

应该

```
return ((IRepository<User>)AdminRepository).All.ToList(); 
```

`.All`您可能注意到，如果不显式编写您正在实现的接口，您将无法声明。这是因为，对于一个给定的类，两个同名的属性不能有不同的返回类型。

调用时也是一样。您必须准确说明您正在调用哪个属性。这是通过将对象转换为所需的接口来完成的。

无论如何，您似乎最终会为您的所有实体类型实现存储库。`IRepository<T>`对于可以从同一机制中检索的实体类型，您应该只实现一次。

如果您希望您的存储库仅适用于某些类，例如，您可以使用接口标记这些类。比方说`IEntity`。

```
public interface IEntity
{
} 
```

然后

```
public interface IRepository<T> where T:IEntity
{
    IQueryable<T> All { get; }
    T Find(object id);
    void Insert(T model);
} 
```

您甚至可以拥有仅适用于您标记为 db 实体的实体的 db 存储库，如下所示：

```
public interface IDbEntity: IEntity
{
}

public class DbRepository<T> : IRepository<T> where T:IDbEntity
{
    public IQueryable<T> All { get; private set; }
    public T Find(object id)
    {
        throw new NotImplementedException();
    }

    public void Insert(T model)
    {
        throw new NotImplementedException();
    }
} 
```

# multithreading - perl 代码的多线程

> ID：15429183
> 
> 赞同：15
> 
> 时间：2013-03-15T09:51:23.013
> 
> 标签：multithreading, perl

我需要知道如何为以下代码实现多线程。我需要每秒调用一次此脚本，但睡眠计时器会在 2 秒后处理它。总脚本每 3 秒调用一次。但是我需要每秒调用一次，任何人都可以为我提供解决方案或指出正确的方向。

```
#!usr/bin/perl
use warnings;

sub print
{
local $gg = time;
print "$gg\n";
}

$oldtime = (time + 1);
while(1)
{
if(time > $oldtime)
{
    &print();
    sleep 2;
    $oldtime = (time + 1);
            }
        } 
```

它只是一个例子。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-15T10:31:13.323

这是一个使用线程的简单示例：

```
use strict;
use warnings;
use threads;

sub threaded_task {
    threads->create(sub { 
        my $thr_id = threads->self->tid;
        print "Starting thread $thr_id\n";
        sleep 2; 
        print "Ending thread $thr_id\n";
        threads->detach(); #End thread.
    });
}

while (1)
{
    threaded_task();
    sleep 1;
} 
```

这将每秒创建一个线程。线程本身持续两秒钟。

要了解有关线程的更多信息，请参阅[文档](http://perldoc.perl.org/threads.html)。一个重要的考虑因素是线程之间不共享变量。当你开始一个新线程时，你所有的变量都会被复制。

如果您需要共享变量，[请查看`threads::shared`](http://perldoc.perl.org/threads/shared.html).

*但是，请注意，正确的设计取决于您实际尝试做的事情。从你的问题中不清楚。*

对您的代码的其他一些评论：

*   始终`use strict;`帮助您在代码中使用最佳实践。
*   声明词法变量的正确方法是`my $gg;`而不是`local $gg;`. `local`实际上并没有创建词法变量；它为全局变量提供本地化值。这不是您需要经常使用的东西。
*   避免给子例程赋予与系统函数相同的名称（例如`print`）。这令人困惑。
*   不建议`&`在调用子例程之前使用（在您的情况下，由于与系统函数名称冲突，这是必要的，但正如我所说，应该避免这种情况）。

# java - 使用正则表达式分隔句子

> ID：15429185
> 
> 赞同：1
> 
> 时间：2013-03-15T09:51:25.197
> 
> 标签：java, regex

我想使用特定单词作为分隔符来拆分句子

```
Lun. 08:00 - 12:15 13:15 - 16:15 Mar. 08:00 - 12:15 13:15 - 16:15 Mer. 08:00 - 12:15 13:15 - 16:15 Jeu. 08:00 - 12:15 13:15 - 16:15 Ven. 08:00 - 12:15 13:15 - 16:15 "; 
```

结果我想要一个这样的列表：

```
Lun. 08:00 - 12:15 13:15 - 16:15 
Mar. 08:00 - 12:15 13:15 - 16:15 
Mer. 08:00 - 12:15 13:15 - 16:15 
Jeu. 08:00 - 12:15 13:15 - 16:15 
Ven. 08:00 - 12:15 13:15 - 16:15 
```

我从下面的正则表达式开始：

```
final Pattern pattern = Pattern.compile("((Lun|Mar|Mer|Jeu|Ven|Sam). [0-9 \\-:]*)");
final Matcher matcher = pattern.matcher(horaires);
while (matcher.find())
{   
    myListe.add(matcher.group())
} 
```

但它给了我这样的结果：

```
 matcher.group(1) = Lun. 08:00 - 12:15 13:15 - 16:15 matcher.group(2) = Lun. 08:00 - 12:15 13:15 - 16:15 
```

你们中的任何人都可以帮我找到正确的正则表达式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:58:47.780

尝试改变你所拥有的：

```
 String string = "Lun. 08:00 - 12:15 13:15 - 16:15 Mar. 08:00 - 12:15 13:15 - 16:15 Mer. 08:00 - 12:15 13:15 - 16:15 Jeu. 08:00 - 12:15 13:15 - 16:15 Ven. 08:00 - 12:15 13:15 - 16:15 ";
        final Pattern pattern = Pattern.compile("((Lun|Mar|Mer|Jeu|Ven|Sam)\\. [0-9 \\-:]*)");
        final Matcher matcher = pattern.matcher(string);
        List<String> list = new ArrayList<String>();
        while (matcher.find())
        {   
            list.add(matcher.group(1));
        }

        for(String str : list)
        {
            System.out.println(str);
        } 
```

产量：

> 伦。08:00 - 12:15 13:15 - 16:15
> 三月 08:00 - 12:15 13:15 - 16:15
> Mer. 08:00 - 12:15 13:15 -
> 16:15 08:00 - 12:15 13:15 -
> 16:15 08:00 - 12:15 13:15 - 16:15

编辑：似乎我无法复制您的代码不起作用的情况（我已经设法做到了，但似乎不能再做一次......）。您的代码在我的机器上运行，上面的代码也是如此。

您可以尝试我建议的替代方法，因此不会删除答案，至少现在不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:49:59.893

你的正则表达式是正确的！我已经实施了。它提供了您需要的相同输出。
请参阅[此演示程序。](http://ideone.com/98J3ER)

```
final Pattern pattern = Pattern.compile("((Lun|Mar|Mer|Jeu|Ven|Sam). [0-9 \\-:]*)");
final Matcher matcher = pattern.matcher(horaires);
while (matcher.find())
{   
    myListe.add(matcher.group())
}

//Iterate your list.
for (String str : myListe) {
      System.out.println(str);
} 
```

它给出输出：

```
Lun. 08:00 - 12:15 13:15 - 16:15 
Mar. 08:00 - 12:15 13:15 - 16:15 
Mer. 08:00 - 12:15 13:15 - 16:15 
Jeu. 08:00 - 12:15 13:15 - 16:15 
Ven. 08:00 - 12:15 13:15 - 16:15 
```

可能是您忘记迭代列表“myListe”数据并使用 matcher.group() 而不是 matcher.group(1)。

# php - PHP：找到多个字符串之间的最大重叠

> ID：15429186
> 
> 赞同：3
> 
> 时间：2013-03-15T09:51:29.267
> 
> 标签：php, arrays

我有这个数组：

```
$array = array('abc123', 'ac123', 'tbc123', '1ac123'); 
```

我想将每个字符串相互比较并找到最长的公共子字符串。在上面的示例中，结果将是`c123`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T09:53:32.927

**更新**

我完全误解了这个问题；目的是找到字符串数组之间最大的重叠：

```
$array = array('abc123', 'ac123', 'tbc123', '1ac123');

function overlap($a, $b)
{
        if (!strlen($b)) {
                return '';
        }

        if (strpos($a, $b) !== false) {
                return $b;
        }

        $left = overlap($a, substr($b, 1));
        $right = overlap($a, substr($b, 0, -1));

        return strlen($left) > strlen($right) ? $left : $right;
}

$biggest = null;
foreach ($array as $item) {
        if ($biggest === null) {
                $biggest = $item;
        }
        if (($biggest = overlap($biggest, $item)) === '') {
                break;
        }
}

echo "Biggest match = $biggest\n"; 
```

我不擅长递归，但我相信这应该可行;-)

**旧答案**

我可能会使用[`preg_grep()`](http://www.php.net/preg_grep)它；它返回一个数组，其中包含根据您的搜索字符串找到的匹配项：

```
$matches = preg_grep('/' . preg_quote($find, '/') . '/', $array); 
```

或者，您可以使用`array_filter()`：

```
$matches = array_filter($array, function($item) use ($find) {
    return strpos($item, $find) !== false;
}); 
```

> 我需要提取值“c123”，就像它是数组中所有字符串的最大匹配一样

我认为您在这里想要做的是根据字符串长度（即首先是最小字符串长度）对上述输出进行排序，然后取第一项：

```
if ($matches) {
    usort($matches,  function($a, $b) {
        return strlen($a) - strlen($b);
    });
    echo current($matches); // take first one: ac123
} 
```

让我知道我是否错了。

* * *

如果您刚刚知道是否`$find`完全匹配某个元素：

```
$matching_keys = array_keys($array, $find, true); // could be empty array 
```

或者：

```
$matching_key = array_search($find, $array, true); // could be false 
```

或事件：

```
$have_value = in_array($find, $array, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:52:43.150

```
in_array($find, $array); 
```

如果它在数组中，则返回 true，但它必须是完全匹配的，在你的情况下它不会找到“ac123”。

如果你想看看它是否包含字符串，那么你需要遍历数组并使用 preg_match() 或类似的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T09:58:33.560

您可以将 array_filter 与回调一起使用。

```
$output = array_filter ($input, function ($elem) { return false !== strpos ($elem, 'c123'); }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T10:00:10.370

```
<?php
$array1 = array('abc123', 'ac123', 'tbc123', '1ac123');

if (in_array("c123", $array1)) {
    echo "Got c123";
}

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T10:17:55.873

您可以使用此处使用的 in_array [http://codepad.org/nOdaajNe](http://codepad.org/nOdaajNe) 或使用此处使用的 array_search [http://codepad.org/DAC1bVCi](http://codepad.org/DAC1bVCi)

看看能不能帮到你。。

文档链接： http: [//php.net/manual/en/function.array-search.php](http://php.net/manual/en/function.array-search.php)和[http://www.php.net/manual/en/function.in-array.php](http://www.php.net/manual/en/function.in-array.php)

# java - 为数百万条记录创建 XML

> ID：15429191
> 
> 赞同：0
> 
> 时间：2013-03-15T09:51:35.977
> 
> 标签：java, mysql, xml, stax

我必须创建一个包含超过 6000 万条记录的大型 XML 文件。我需要一种快速的方法来执行此操作，因为它会定期重复。

我在两个地方有数据

1.  在数据库中的两个不同表中。
2.  On File System 在两个管道分隔的文件中。

目前，我正在尝试使用 StaX 解析器在 JAVA 中创建 XML 文件。

在这里我需要知道是否应该使用数据库/文本文件来读取数据并创建 XML 文件。

哪一个会是更快的选择？
此外，是否有任何特定的 API 可以以优化的方式处理将此类大数据创建/转换为 XML 的方式？

我也愿意使用 linux 命令进行文件处理，前提是它是一个更快的选项。

**更新评论**

*   从两个单独的文件与 DB Query CSV 转储中获取 XML 元素信息的速度有多快？数据库中可用的任何内容都可以在 PIPE 分隔文件中使用。我们如何快速获取/创建 XML 元素信息正是这里问题的意图。这正是影响整体运行速度的因素。

*   映射复杂性：映射是一对多。第一个文件中的 1 条记录映射到第二个文本文件/表中的大约 8000 条记录。

**更新评论 - >使用大输出缓冲区。**

明白了。将以较大的块从数据库/文件中读取数据，并在我处理完一个完整的块后将其刷新。但是我应该再次通过 Database read 还是 File read 来做？

*更新* 我可以使用 MySQL 数据库中的任何工具将其导出，自动转换为 XML 格式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:03:55.697

您可以使用**perl**和[XML::Simple](http://search.cpan.org/~grantm/XML-Simple-2.20/lib/XML/Simple.pm) / [XML::Writer](http://search.cpan.org/~josephw/XML-Writer-0.615/Writer.pm) perl 模块。Perl 还能够从数据库和文本文件中读取数据。

# ruby - 如何在闭包（Proc，lambda）中“打破”外部循环？

> ID：15429196
> 
> 赞同：7
> 
> 时间：2013-03-15T09:51:51.983
> 
> 标签：ruby

`loop { break }`可以正常工作，但是

```
block = Proc.new { break }
# or
# block = lambda { break }
loop(&block) # => LocalJumpError: break from proc-closure 
```

有可能`break`在一个`block variable`？

更新：

一个解释更多的例子：

```
def odd_loop
    i = 1
    loop do
        yield i
        i += 2
    end
end

def even_loop
    i = 2
    loop do
        yield i
        i += 2
    end
end

# This work
odd_loop do |i|
    puts i
    break if i > 10
end

# This doesn't work
break_greater_10 = Proc.new do |i|
    puts i
    break if i > 10
end

odd_loop(&break_greater_10) # break from proc-closure (LocalJumpError)
even_loop(&break_greater_10) # break from proc-closure (LocalJumpError) 
```

根据我的理解，`Proc.new`应该与块相同（它可以是块中`return`的函数），但我不明白为什么不能打破循环。

PS对不起我的英语不好>~<

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-05T15:54:25.717

To solve this problem you could

```
raise StopIteration 
```

this worked for me.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T10:14:28.737

要从块中返回，您可以使用`next`关键字。

```
def foo
  f = Proc.new {next ; p 1}
  f.call
  return 'hello'
end

puts foo     # => 'hello' , without 1 
```

# android - 使用 selenium 进行 Android Webdriver 自动化测试

> ID：15429201
> 
> 赞同：1
> 
> 时间：2013-03-15T09:52:01.310
> 
> 标签：android, selenium, webdriver

我正在尝试运行 Android sdk 中给出的示例项目，但出现错误：

> 找不到名称为：q 的元素

这是示例代码：

```
{
driver.get("google.com"); 
WebElement searchBox = driver.findElement(By.name("q")); 
searchBox.sendKeys("Android Rocks!"); 
searchBox.submit(); 
String title = driver.getTitle(); 
assertTrue("Got title: " + title, title.contains("Google")); 
assertTrue(driver.findElements(By.partialLinkText("Android")).size() > 1);
} 
```

我正在模拟器（2.2 版）上运行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:58:09.797

***请阅读我对最近（和完整）问题的更完整答案。链接如下：***

[带有硒的 ANDROID 网络驱动程序](https://stackoverflow.com/questions/15491935/android-webdriver-with-selenium/15590293#15590293)

* * *

*我留下了以下答案，以防万一它也有用......*

Neha，首先，您是否阅读过 Selenium 项目中 Android 驱动程序的相关 wiki 页面？[http://code.google.com/p/selenium/wiki/AndroidDriver](http://code.google.com/p/selenium/wiki/AndroidDriver)

正如它所说，支持 Android 2.2 的 Android WebDriver 的最后一个版本是 APK 的 2.16 版，[http://code.google.com/p/selenium/downloads/detail ?name=android-server-2.16.apk](http://code.google.com/p/selenium/downloads/detail?name=android-server-2.16.apk)

如果您希望使用当前版本的 Android 驱动程序，我建议您尝试使用更新版本的 Android，例如至少 2.3。你可能知道，很容易创建一个新的模拟器，一个新的 AVD，因为他们也知道，它有 2.3

如果您在 2.2 模拟器中尝试使用 2.16 的 Android-WebDriver 或在具有 2.3 或更高版本 Android 的模拟器中尝试使用当前版本的 Android-WebDriver 后仍然卡住，也许您可​​以添加堆栈跟踪和在此处在线为您的代码提供完整的 Java 源代码。那会帮助人们帮助你:)祝你好运朱利安。

# api - Google Mail 中的自动学习过滤器

> ID：15429203
> 
> 赞同：2
> 
> 时间：2013-03-15T09:52:02.630
> 
> 标签：api, email, filter, gmail

在 Gmail 中设置单个过滤器需要大量点击，尤其是在您必须一直这样做的情况下。
我正在寻找一种用一块石头杀死两只鸟的方法，并**在我选择一条或多条消息并将它们手动移动到某个标签时让 Gmail 自动创建过滤器。**因此，基本上该插件会查看我在将电子邮件移动到标签时所做的事情，并将该行为自动复制到过滤器中。

如果这仅基于所述邮件的发件人，我会很满意，但当然，如果对电子邮件进行分析，并且 - 如果模棱两可 - 我会看到一个选项（例如“你想要创建基于“从”或“到”的过滤器？”）

**示例：**
我的收件箱中有两封电子邮件：

```
 o From: mail@amazon.xx     To: me@gmail.com   Subject: Your shopping order
 o From: service@amazon.xx  To: me@gmail.com   Subject: Your shopping return 
```

我选择了两封电子邮件并单击**“移动到 >*购物*”**（我之前创建的标签）。现在，Gmail 会根据我刚刚完成的操作自动创建一个过滤器，我再也不需要这样做了。理想情况下，这会智能地发生，例如通过查看两封电子邮件的共同点并向我提供一个弹出问题：

```
AUTO-FILTER: 
>>Label with "Shopping" and archive<<
=====================================
Do you want to create the filter based on:
1) only mail from mail@amazon.xx and service@amazon.xx (the individual senders)
2) all mail from @amazon.xx (the sender domain)
3) all mail to me@gmail.com (the recipient)
4) all mail from 1 to 3 (the individual senders to the recipient)
5) all mail from 2 to 3 (the sender domain to the recipient)
6) all mail containing the subject "Your shopping"
_____________
Enter number: 
```

1

```
OK   |   Cancel 
```

现在我的问题是：
**有没有人知道可以完成这个（或类似的东西）的工具/插件？**

如果没有，我怎么能自己开发一个工具（是否有 Gmail 过滤器 API 或编写自己的实验室插件的方法）。

我知道*Smart Label* Labs 插件，但这确实不符合我的需求，因为它仅限于五个我什至无法调整的预设类别（比如尝试编辑其过滤器，只会给出“无效”错误）。似乎做了半心半意的工作并且很长时间没有更新（也在我的收件箱中产生了很多误报）。

我感谢任何帮助、见解、指示等。

非常感谢！

# c# - 带有 Wpf 和 c# 的信号/插槽系统，例如 Qt

> ID：15429205
> 
> 赞同：0
> 
> 时间：2013-03-15T09:52:06.423
> 
> 标签：c#, wpf, qt

我想知道Wpf/c#中是否有类似Qt的信号/槽的系统#

换句话说，这是我想要的：

我的视图.cs

```
public partial class myWindow :Window
{

    protected MyLambdaCollectionVM _myLambdaCollection;

    public myWindow ()
    {
        InitializeComponent();
        _myLambdaCollection = new MyLambdaCollectionVM ();
        connect(this._myLambdaCollection, (SIGNAL(WhenIAddAnObject(str fileName)), SLOT(this.funcCalledWhenIaddAnObject(str fileName)));
    }
} 
```

`connect(...)`是一个 Qt 风格的信号/槽。

我尝试了绑定方法，但就我而言，我需要创建动态图像（所以不是在 Xaml 中而是在 C# 中），我没有找到如何在 WPF 中实现 C# 到 C# 的绑定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:57:51.677

在 C# 中，它被称为事件和委托，连接被称为事件连接的东西所取代。

```
myEventSource.EventName += new delegate(method to be called); 
```

这大致是它在 C# 中的样子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:14:27.390

尝试查看 TPL 数据流。 [http://msdn.microsoft.com/en-us/library/hh228603.aspx](http://msdn.microsoft.com/en-us/library/hh228603.aspx)

GUI 应用程序存在示例。

# c# - 通过 IIS 访问 Web 服务时，名称以无效字符错误开始

> ID：15429213
> 
> 赞同：0
> 
> 时间：2013-03-15T09:52:52.793
> 
> 标签：c#, web-services, iis

我通过 Visual Studio 2010 创建了一个 Web 服务项目，并在 Visual Studio 中通过 Debugging 它的工作良好进行了测试，之后我在 IIS 中添加了一个虚拟目录，当我尝试通过 localhost 访问它时，我收到一条错误消息，例如

```
A name was started with an invalid character. Error processing resource 'http://localhost/service/Service1.svc'. Line 1, P...

<%@ ServiceHost Language="C#" Debug="true" Service="WcfRest.Service1" CodeBehind="Service1.svc.cs"%>
-^ 
```

我在虚拟目录的属性中检查了 ASP.NET 版本，并将其更改为 4.0.30319 仍然无法纠正我的错误。

那么在我的情况下可能是什么错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:57:09.003

> ## [名称以无效字符开头。错误处理资源](https://stackoverflow.com/a/3322907/1115937)
> 
> 这个问题是因为我需要从 IIS 服务器运行网站，而不是直接从我发布它的文件夹中启动它。哎呀。

> ## [名称以无效字符开头。处理资源“http://localhost/ursite/”时出错。1 号线，Posi… 已解决](http://mirnauman.wordpress.com/2011/01/28/a-name-was-started-with-an-invalid-character-error-processing-resource-httplocalhostursite-line-1-posi-solved/)
> 
> 当 .NET Framework 的多个版本在单台计算机上并行执行时，映射到 ASP.NET 应用程序的 ASP.NET ISAPI 版本决定了该应用程序使用哪个版本的公共语言运行时 (CLR)。ASP.NET IIS 注册工具 (Aspnet_regiis.exe) 允许管理员或安装程序轻松更新 ASP.NET 应用程序的脚本映射，以指向与该工具关联的 ASP.NET ISAPI 版本。该工具还可用于显示所有已安装 ASP 版本的状态。NET，注册与工具耦合的 ASP.NET 版本，创建客户端脚本目录，并执行其他配置操作。

# hibernate - Hibernate 不插入外键

> ID：15429217
> 
> 赞同：1
> 
> 时间：2013-03-15T09:52:57.250
> 
> 标签：hibernate, orm, foreign-keys, mapping, reverse-engineering

我有多对一的关系，当我尝试插入一个值时，没有传递前键。

实体国家

```
<hibernate-mapping>
<class name="servicedb.dal.domain.Country" table="Country" catalog="DB">
    <composite-id name="id" class="servicedb.dal.domain.CountryId">
        <key-property name="countryCode" type="string">
            <column name="countryCode" length="2" />
        </key-property>
        <key-property name="localeId" type="int">
            <column name="localeId" />
        </key-property>
    </composite-id>
    <many-to-one name="locale" class="servicedb.dal.domain.Locale" update="false" insert="false" fetch="select">
        <column name="localeId" not-null="true" />
    </many-to-one>
    <property name="name" type="string">
        <column name="name" length="60" not-null="true" />
    </property>
    <set name="cities" table="City" inverse="true" lazy="true" fetch="select">
        <key>
            <column name="countryCode" length="2" not-null="true" />
            <column name="localeId" not-null="true" />
        </key>
        <one-to-many class="servicedb.dal.domain.City" />
    </set>
</class> 
```

实体城

```
<hibernate-mapping>
    <class name="servicedb.dal.domain.City" table="City" catalog="DB">
        <composite-id name="id" class="servicedb.dal.domain.CityId">
            <key-property name="id" type="int">
                <column name="id" />
            </key-property>
            <key-property name="localeId" type="int">
                <column name="localeId" />
            </key-property>
        </composite-id>
        <many-to-one name="country" class="servicedb.dal.domain.Country" update="false" insert="false" fetch="select">
            <column name="countryCode" length="2" not-null="true" />
            <column name="localeId" not-null="true" />
        </many-to-one>
        <property name="name" type="string">
            <column name="name" length="100" not-null="true" />
        </property>
        <set name="localizedLocations" table="LocalizedLocation" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="cityId" />
                <column name="localeId" not-null="true" />
            </key>
            <one-to-many class="servicedb.dal.domain.LocalizedLocation" />
        </set>
    </class>
</hibernate-mapping> 
```

当我创建 City 实体时，我正确设置了 Country 并且 countryCode 不为空。但生成的查询如下所示：

```
insert into Db.City (name, id, localeId) values (?, ?, ?) 
```

但它应该是：

```
insert into Db.City (name, id, localeId, countryCode) values (?, ?, ?, ?) 
```

并且休眠抛出以下异常

```
org.hibernate.exception.GenericJDBCException: Field 'countryCode' doesn't have a default value 
```

我希望提供的信息足以了解错误的原因。如果没有，请专门询问其他信息。

我还使用 eclipse 和 reveng.xml 对数据库进行逆向工程，所以我的**hbm**文件是自动生成的，我没有使用 EJB3 注释。

**编辑：**发布国家和城市实体的完整映射。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:56:00.440

您的`update="false" insert="false"`City 映射中的多对一适用于`countryCode`和`localeId`。由于`localeId`也映射在您的复合 ID 中，因此它用于生成的查询中，但`countryCode`...

# ios - 如何在 Objective-C 中舍入小数点后两位小数

> ID：15429221
> 
> 赞同：16
> 
> 时间：2013-03-15T09:53:12.177
> 
> 标签：ios, objective-c

让我知道如何在 Objective-C 中为小数点后两位四舍五入。

我想这样做。（句子后面的所有数字都是浮点值）

• 圆形的

10.118 => 10.12

10.114 => 10.11

• 细胞

10.118 => 10.12

• 地面

10.114 => 10.11

感谢您检查我的问题。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-15T10:00:30.600

如果您确实需要对数字进行四舍五入，而不仅仅是在呈现它时：

```
float roundToN(float num, int decimals)
{
    int tenpow = 1;
    for (; decimals; tenpow *= 10, decimals--);
    return round(tenpow * num) / tenpow;
} 
```

或者总是保留两位小数：

```
float roundToTwo(float num)
{
    return round(100 * num) / 100;
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-15T10:01:14.710

您可以使用以下代码将其格式化为两位小数

```
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
formatter.numberStyle = NSNumberFormatterDecimalStyle;
formatter.setMaximumFractionDigits = 2;
formatter.setRoundingMode = NSNumberFormatterRoundUp;

NSString *numberString = [formatter stringFromNumber:@(10.358)];
NSLog(@"Result %@",numberString); // Result 10.36 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:00:31.347

```
float roundedFloat = (int)(sourceFloat * 100 + 0.5) / 100.0; 
```

# java - 抛出 RuntimeException 的线程 - 对线程池的影响

> ID：15429227
> 
> 赞同：2
> 
> 时间：2013-03-15T09:53:32.003
> 
> 标签：java, threadpool

我刚刚阅读[了这篇文章](http://codeidol.com/java/java-concurrency/Cancellation-and-Shutdown/Handling-Abnormal-Thread-Termination/)`Runnable`，并认为如果抛出异常并退出，线程池可能会耗尽工作线程。我做了一个小代码并检查了，但池大小没有变化。

```
public class ThreadPoolTest {

public static void main(String[] args) throws InterruptedException {
    ThreadPoolExecutor tp = new ThreadPoolExecutor(1, 1, 5, TimeUnit.SECONDS, new ArrayBlockingQueue<Runnable>(1));
    Thread.sleep(1000);
    System.out.println(tp.getPoolSize());
    tp.execute(new Runnable(){

        @Override
        public void run() {
            System.out.println("Executing & Throwing");
            throw new NullPointerException();
        }

    });
    Thread.sleep(1000);
    System.out.println(tp.getPoolSize());
    tp.execute(new Runnable(){

        @Override
        public void run() {
            System.out.println("Executing & Throwing");
            throw new NullPointerException();
        }

    });
    Thread.sleep(1000);
    System.out.println(tp.getPoolSize());
    tp.shutdown();
} 
```

}

我得到的输出是

```
0
Exception in thread "pool-1-thread-1" java.lang.NullPointerException
    at threads.ThreadPoolTest$1.run(ThreadPoolTest.java:18)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Executing & Throwing
1
Exception in thread "pool-1-thread-2" java.lang.NullPointerException
    at threads.ThreadPoolTest$2.run(ThreadPoolTest.java:29)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Executing & Throwing
1 
```

这是在 Java 7 上。**如文章中所述，是否有任何易受攻击的 java Threadpool 实现？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:57:24.000

阅读这篇文章，要点是写得不好的线程池可能会遇到这个问题。事实上，任何创建线程并且不/不能处理来自该线程的未捕获异常的应用程序。

我希望任何有信誉的线程池来源都能以某种方式处理这种情况。信誉良好，我将包括 Oracle 采购的解决方案。我怀疑如果有人手工编写线程池并且他们缺乏经验，那么他们会编写一个不太健壮的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T10:07:03.160

文章指出：

> 标准线程池允许未捕获的任务异常终止池线程

就是这样。稍加修改的代码版本显示，当前一个线程因异常而死亡时，ThreadPool 将创建一个新线程。

作为旁注，您通常会使用该`submit`方法，并尝试`get`在返回的 Future 上查看是否引发了异常。

输出：

```
0
Creating new thread
Executing & Throwing
Creating new thread
Exception in thread "Thread-0" java.lang.NullPointerException
    at javaapplication4.Test2$2.run(Test2.java:47)
    ....
1
Executing & Throwing
Creating new thread
Exception in thread "Thread-1" java.lang.NullPointerException
    at javaapplication4.Test2$3.run(Test2.java:56)
    ....
1 
```

代码：

```
public static void main(String[] args) throws InterruptedException {
    ThreadPoolExecutor tp = new ThreadPoolExecutor(1, 1, 5, TimeUnit.SECONDS, new ArrayBlockingQueue<Runnable>(1), new ThreadFactory() {

        @Override
        public Thread newThread(Runnable r) {
            System.out.println("Creating new thread");
            return new Thread(r);
        }
    });
    Thread.sleep(1000);
    System.out.println(tp.getPoolSize());
    tp.execute(new Runnable() {
        @Override
        public void run() {
            System.out.println("Executing & Throwing");
            throw new NullPointerException();
        }
    });
    Thread.sleep(100);
    System.out.println(tp.getPoolSize());
    tp.execute(new Runnable() {
        @Override
        public void run() {
            System.out.println("Executing & Throwing");
            throw new NullPointerException();
        }
    });
    Thread.sleep(100);
    System.out.println(tp.getPoolSize());
    tp.shutdown();
} 
```

# lua - 如何检查 Lua 中是否存在模块？

> ID：15429236
> 
> 赞同：8
> 
> 时间：2013-03-15T09:54:03.820
> 
> 标签：lua

我正在使用[xdg-menu-to-awesome-wm](https://github.com/chouilleur/xdg-menu-to-awesome-wm)生成一个包含 GNOME 菜单[的 Lua 文件，以](https://github.com/l0b0/tilde/blob/ccc39fe2a584242933e074cccb921b50ed7193c0/scripts/cleanup.sh#L74-L83)[包含](https://github.com/l0b0/tilde/blob/3666e0033922d462bba2cab413147540dc7f87d5/.config/awesome/rc.lua#L11)在 Awesome WM 中。由于可能没有安装生成器脚本，我需要一些方法让 Lua 仅`require`在`menu`模块*存在的情况下使用它*。

我不想查看文件名，因为它可能位于`package.path`. 一种选择是忽略模块不存在时创建的异常，但我宁愿不忽略任何*其他*异常 - 我*确实*想知道模块是否包含任何语法或其他错误。不幸的是，该[参考](http://www.lua.org/manual/5.1/manual.html#pdf-require)没有指定可以生成哪些异常，所以我不知道该怎么做。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-15T14:19:23.060

如果需要区分缺失模块和语法错误，可以直接访问`package.searchers`.

这些功能将：

*   如果成功则返回一个加载器函数
*   如果找不到模块，则返回一个字符串
*   如果存在语法错误，则抛出错误

所以你可以做的是模仿`require`搜索模块的方式，依次调用每个搜索器，直到其中一个返回一个函数。与 不同`require`的是，如果找不到模块，即如果每个搜索器函数都返回一个字符串，我们不需要抛出错误。

```
function isModuleAvailable(name)
  if package.loaded[name] then
    return true
  else
    for _, searcher in ipairs(package.searchers or package.loaders) do
      local loader = searcher(name)
      if type(loader) == 'function' then
        package.preload[name] = loader
        return true
      end
    end
    return false
  end
end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-27T11:22:18.997

看，我对“luafilesystem”模块有同样的问题，我是这样解决的，

```
local haslfs,lfs = pcall(require,"lfs")
if haslfs then
  configLines["PROJECT_HOME"] = lfs.currentdir()
else
  configLines["PROJECT_HOME"] = prompt("Project path > ")
end 
```

'lfs' 这里是模块句柄。并且 pcall 用于知道模块是否真的被加载而不传播错误。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-15T10:30:22.060

我所做的是将 require 包装在 pcall 中，以便加载模块并且可以捕获加载失败。有一个完整的功能，我用它来从我们的服务器下载和安装缺少的模块： [http ://www.fhug.org.uk/wiki/doku.php?id=plugins:code_snippets:module_require_with_load](http://www.fhug.org.uk/wiki/doku.php?id=plugins:code_snippets:module_require_with_load)

```
function loadrequire(module)
    local function requiref(module)
        require(module)
    end
    res = pcall(requiref,module)
    if not(res) then
        -- Do Stuff when no module
    end
end
loadrequire('menu') 
```

# mongodb - 如何检索 Mongo DB 中数组中存在的所有匹配元素？

> ID：15429243
> 
> 赞同：4
> 
> 时间：2013-03-15T09:54:17.767
> 
> 标签：mongodb, mongodb-query, mongodb-java, spring-data-mongodb

我的文件如下所示：

```
{
  name: "testing",
  place:"London",
  documents: [ 
                        {   
                            x:1,
                            y:2,
                        },
                        {
                            x:1,
                            y:3,
                        },
                        {
                            x:4,
                            y:3,
                        }
            ]
    } 
```

我想检索所有匹配的文档，即我想要以下格式的 o/p：

```
{
    name: "testing",
    place:"London",
    documents: [ 
                        {   
                            x:1,
                            y:2,
                        },
                        {
                            x:1,
                            y:3,
                        }

            ]
    } 
```

我试过的是：

```
db.test.find({"documents.x": 1},{_id: 0, documents: {$elemMatch: {x: 1}}}); 
```

但是，它只给出第一个条目。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T02:03:47.967

正如 JohnnyHK 所说，[MongoDB 中的答案：选择子集合的匹配元素](https://stackoverflow.com/questions/15415023/mongodb-select-matched-elements-of-subcollection)很好地解释了这一点。

在您的情况下，聚合将如下所示：

（注意：第一个匹配不是绝对必要的，但它有助于提高性能（可以使用索引）和内存使用（有限集合上的 $unwind）

```
> db.xx.aggregate([
...      // find the relevant documents in the collection
...      // uses index, if defined on documents.x
...      { $match: { documents: { $elemMatch: { "x": 1 } } } }, 
...      // flatten array documennts
...      { $unwind : "$documents" },
...      // match for elements, "documents" is no longer an array
...      { $match: { "documents.x" : 1 } },
...      // re-create documents array
...      { $group : { _id : "$_id", documents : { $addToSet : "$documents" } }}
... ]);
{
    "result" : [
        {
            "_id" : ObjectId("515e2e6657a0887a97cc8d1a"),
            "documents" : [
                {
                    "x" : 1,
                    "y" : 3
                },
                {
                    "x" : 1,
                    "y" : 2
                }
            ]
        }
    ],
    "ok" : 1
} 
```

有关聚合（）的更多信息，请参阅[http://docs.mongodb.org/manual/applications/aggregation/](http://docs.mongodb.org/manual/applications/aggregation/)

# pcm - 在 RHEL6 中使用 alsa 播放 PCM 音频

> ID：15429247
> 
> 赞同：2
> 
> 时间：2013-03-15T09:54:23.000
> 
> 标签：pcm, alsa

我正在尝试在 Qt 的 C 代码中使用 alsa 库调用在 RHEL6 中播放波形文件。我正在读取缓冲区（wave_buffer）中的波形文件（“t15.wav”）。由于 alsa 库需要播放原始 PCM 样本，因此已去除波头。此外，我还使用 'snd_pcm_hw_params(PCM, params)' & 'snd_pcm_sw_params_current(PCM, swparams)' 和许多其他调用设置了 PCM 硬件和软件参数。我正在使用“snd_pcm_writei”命令在 PCM 句柄上编写 PCM 样本。为此，我正在从 wave_buffer 读取数据块（32 或 1024 或 2048 或 4096 或 8192 字节），并使用 snd_pcm_writei 命令将其发送以进行播放。如果我选择一小块音频质量会下降，但播放不会中断。如果我使用更大的块（大于 4096 即 8192）我获得了完美的音频质量，但它被中断（当播放需要下一个数据块时）。我的限制是我只能访问块中的数据，而不是文件或整个缓冲区。任何人都可以帮助我消除播放波形数据的中断，以便我可以不间断地播放音频。以下是我的代码： 两个变量 buffer_time 和 period_time 返回周期大小，即块的大小。if buffer_time = 5000 & period_time=1000 alsa 库返回的 period_size 为 32 字节 //音频质量下降但没有中断 如果 buffer_time = 500000 & period_time=100000 alsa 库返回的 period_size 为 8192 字节 //音频质量好但中断了 Tuning这些参数似乎没用，因为我在这方面浪费了很多时间。

波形文件结构：采样率：44100 位/采样：16 通道：2

```
mainwindow.h----

#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include <alsa/asoundlib.h>
#define BLOCKSIZE 44100 * 2 * 2 // Sample Rate * Channels * Byte per Sample(Bits per sample / 8)
namespace Ui {
    class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    int init_alsa();
    int play_snd();
    ~MainWindow();
    snd_pcm_t *PCM;
    snd_pcm_sframes_t delayp;
    snd_pcm_sframes_t availp;
    snd_pcm_sw_params_t *swparams;
    snd_pcm_hw_params_t *params;
    static snd_pcm_sframes_t period_size;
    static snd_pcm_sframes_t buffer_size;
    unsigned char wave_buffer[900000];
    unsigned char play_buffer[BLOCKSIZE];
    int filesize;
    FILE *fp;

private:
    Ui::MainWindow *ui;
};

#endif // MAINWINDOW_H

mainwindow.cpp---

#include "mainwindow.h"
#include "ui_mainwindow.h"

snd_pcm_sframes_t MainWindow::period_size;
snd_pcm_sframes_t MainWindow::buffer_size;
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    if((fp = fopen("t15.wav","rb"))==NULL)
        printf("Error Opening File");
    fseek(fp,0L,SEEK_END);
    filesize = ftell(fp)-44;
    fseek(fp,0L,SEEK_SET);
    fseek(fp,44,SEEK_SET);
    fread(wave_buffer,filesize,1,fp);
    fclose(fp);
    delayp = 0;
    init_alsa();
    play_snd();
}

MainWindow::~MainWindow()
{
    delete ui;
}

int MainWindow::init_alsa()
{
    unsigned int rate = 44100;
    int err,dir;

    unsigned int rrate  = 44100;
    snd_pcm_uframes_t size;
    static unsigned int buffer_time = 500000;
    static unsigned int period_time = 100000;

    static int period_event = 0;

    if ((err=snd_pcm_open(&PCM,"plughw:0,0",SND_PCM_STREAM_PLAYBACK, 0)) < 0)
    {
        fprintf(stderr, "Can't use sound: %s\n", snd_strerror(err));
        return err;
    }

            snd_pcm_hw_params_alloca(&params);
            snd_pcm_sw_params_alloca(&swparams);
            //snd_pcm_nonblock(PCM,0);
        /* choose all parameters */
        err = snd_pcm_hw_params_any(PCM, params);
        if (err < 0) {
                printf("Broken configuration for playback: no configurations available: %s\n", snd_strerror(err));
                return err;
        }
        /* set hardware resampling */
        err = snd_pcm_hw_params_set_rate_resample(PCM, params, 1);
        if (err < 0) {
                printf("Resampling setup failed for playback: %s\n", snd_strerror(err));
                return err;
        }
        /* set the interleaved read/write format */
        err = snd_pcm_hw_params_set_access(PCM, params, SND_PCM_ACCESS_RW_INTERLEAVED);
        if (err < 0) {
                printf("Access type not available for playback: %s\n", snd_strerror(err));
                return err;
        }
        /* set the sample format */
        err = snd_pcm_hw_params_set_format(PCM, params, SND_PCM_FORMAT_S16_LE);
        if (err < 0) {
                printf("Sample format not available for playback: %s\n", snd_strerror(err));
                return err;
        }
        /* set the count of channels */
        err = snd_pcm_hw_params_set_channels(PCM, params, 2);
        if (err < 0) {
                printf("Channels count (%i) not available for playbacks: %s\n", 2, snd_strerror(err));
                return err;
        }
        /* set the stream rate */
        rrate = rate;
        err = snd_pcm_hw_params_set_rate_near(PCM, params, &rrate, 0);
        if (err < 0) {
                printf("Rate %iHz not available for playback: %s\n", 44100, snd_strerror(err));
                return err;
        }
        if (rrate != 44100) {
                printf("Rate doesn't match (requested %iHz, get %iHz)\n", rrate, err);
                return -EINVAL;
        }
        /* set the buffer time */
        err = snd_pcm_hw_params_set_buffer_time_near(PCM, params, &buffer_time, &dir);
        if (err < 0) {
                printf("Unable to set buffer time %i for playback: %s\n", buffer_time, snd_strerror(err));
                return err;
        }
        err = snd_pcm_hw_params_get_buffer_size(params, &size);
        if (err < 0) {
                printf("Unable to get buffer size for playback: %s\n", snd_strerror(err));
                return err;
        }
        buffer_size = size;

        /* set the period time */
        err = snd_pcm_hw_params_set_period_time_near(PCM, params, &period_time, &dir);
        if (err < 0) {
                printf("Unable to set period time %i for playback: %s\n", period_time, snd_strerror(err));
                return err;
        }
        err = snd_pcm_hw_params_get_period_size(params, &size, &dir);
        if (err < 0) {
                printf("Unable to get period size for playback: %s\n", snd_strerror(err));
                return err;
        }
        period_size = size;
        /* write the parameters to device */
        err = snd_pcm_hw_params(PCM, params);
        if (err < 0) {
                printf("Unable to set hw params for playback: %s\n", snd_strerror(err));
                return err;
        }
        printf("Size = %ld",period_size);

        snd_pcm_sw_params_current(PCM, swparams);                /* get the current swparams */

                                    /* start the transfer when the buffer is almost full: */
                                    /* (buffer_size / avail_min) * avail_min */
        snd_pcm_sw_params_set_start_threshold(PCM, swparams, (buffer_size / period_size) * period_size);

                                    /* allow the transfer when at least period_size samples can be processed */
                                    /* or disable this mechanism when period event is enabled (aka interrupt like style processing) */
        snd_pcm_sw_params_set_avail_min(PCM, swparams, period_event ? buffer_size : period_size);
        snd_pcm_sw_params(PCM, swparams);/* write the parameters to the playback device */
        return 1;
}

int MainWindow::play_snd()
{
int curr_pos = 0;
int buff_size = 0;
long val = 0;

while(curr_pos < filesize)
{
    if(filesize-curr_pos >= period_size)
    {
        memcpy(play_buffer,wave_buffer+curr_pos,period_size);

        buff_size = period_size;
        curr_pos += buff_size;
    }
    else
    {
        memcpy(play_buffer,wave_buffer+curr_pos,filesize-curr_pos);

        buff_size = filesize - curr_pos;
        curr_pos += buff_size;
    }

    int i=1;
    unsigned char *ptr = play_buffer;
    while(buff_size > 0)
    {
        val = snd_pcm_writei(PCM,&play_buffer,buff_size);
        if (val == -EAGAIN)
           continue;
        ptr += val * 2;
        buff_size -= val;
    }
}
return 0;
} 
```

我有一个类似的 alsa 库的 C 代码，它在运行时生成正弦波样本并使用相同的 snd_pcm_writei 命令播放它们，它可以完美播放而没有任何中断......这是 alsa 库代码---

```
/*
 *  This small demo sends a simple sinusoidal wave to your speakers.
 */

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sched.h>
#include <errno.h>
#include <getopt.h>
#include "alsa/asoundlib.h"
#include <sys/time.h>
#include <math.h>

static char *device = "plughw:0,0";                     /* playback device */
static snd_pcm_format_t format = SND_PCM_FORMAT_S16_LE; /* sample format */
static unsigned int rate = 44100;                       /* stream rate */
static unsigned int channels = 2;                       /* count of channels */
static unsigned int buffer_time = 5000;               /* ring buffer length in us */
static unsigned int period_time = 1000;               /* period time in us */
static double freq = 440;                               /* sinusoidal wave frequency in Hz */
static int resample = 1;                                /* enable alsa-lib resampling */
static int period_event = 0;                            /* produce poll event after each period */

static snd_pcm_sframes_t buffer_size;
static snd_pcm_sframes_t period_size;
static snd_output_t *output = NULL;
snd_pcm_sframes_t delayp;
snd_pcm_sframes_t availp;

static void generate_sine(const snd_pcm_channel_area_t *areas, 
                          snd_pcm_uframes_t offset,
                          int count, double *_phase)
{
        static double max_phase = 2\. * M_PI;
        double phase = *_phase;
        double step = max_phase*freq/(double)rate;
        unsigned char *samples[channels];
        int steps[channels];
        unsigned int chn;
        int format_bits = snd_pcm_format_width(format);
        unsigned int maxval = (1 << (format_bits - 1)) - 1;
        int bps = format_bits / 8;                              /* bytes per sample */
        int phys_bps = snd_pcm_format_physical_width(format) / 8;
        int big_endian = snd_pcm_format_big_endian(format) == 1;
        int to_unsigned = snd_pcm_format_unsigned(format) == 1;
        int is_float = (format == SND_PCM_FORMAT_FLOAT_LE ||
                        format == SND_PCM_FORMAT_FLOAT_BE);

                                                                /* verify and prepare the contents of areas */
        for (chn = 0; chn < channels; chn++) {
                samples[chn] = /*(signed short *)*/(((unsigned char *)areas[chn].addr) + (areas[chn].first / 8));
                steps[chn] = areas[chn].step / 8;
                samples[chn] += offset * steps[chn];
        }
                                                                 /* fill the channel areas */
        while (count-- > 0) {
                union {
                        float f;
                        int i;
                      } fval;
                int res, i;
                if (is_float)
                {
                        fval.f = sin(phase) * maxval;
                        res = fval.i;
                }
                else
                    res = sin(phase) * maxval;
                if (to_unsigned)
                        res ^= 1U << (format_bits - 1);
                for (chn = 0; chn < channels; chn++) {
                                                                  /* Generate data in native endian format */
                        if (big_endian) {
                                for (i = 0; i < bps; i++)
                                        *(samples[chn] + phys_bps - 1 - i) = (res >> i * 8) & 0xff;
                        } else {
                                for (i = 0; i < bps; i++)
                                        *(samples[chn] + i) = (res >>  i * 8) & 0xff;
                        }
                        samples[chn] += steps[chn];
                }
                phase += step;
                if (phase >= max_phase)
                        phase -= max_phase;
        }
        *_phase = phase;
}

static int set_hwparams(snd_pcm_t *handle, snd_pcm_hw_params_t *params, snd_pcm_access_t access)
{
        unsigned int rrate;
        snd_pcm_uframes_t size;
        int dir;
        snd_pcm_hw_params_any(handle, params);                        /* choose all parameters */
        snd_pcm_hw_params_set_rate_resample(handle, params, resample);/* set hardware resampling */
        snd_pcm_hw_params_set_access(handle, params, access);         /* set the interleaved read/write format */
        snd_pcm_hw_params_set_format(handle, params, format);         /* set the sample format */
        snd_pcm_hw_params_set_channels(handle, params, channels);     /* set the count of channels */
        rrate = rate;                                                 /* set the stream rate */
        snd_pcm_hw_params_set_rate_near(handle, params, &rrate, 0);
        snd_pcm_hw_params_set_buffer_time_near(handle, params, &buffer_time, &dir);/* set the buffer time */
        snd_pcm_hw_params_get_buffer_size(params, &size);
        buffer_size = size;
        snd_pcm_hw_params_set_period_time_near(handle, params, &period_time, &dir);/* set the period time */
        snd_pcm_hw_params_get_period_size(params, &size, &dir);
        period_size = size;
        snd_pcm_hw_params(handle, params);                            /* write the parameters to device */
        return 0;
}

static int set_swparams(snd_pcm_t *handle, snd_pcm_sw_params_t *swparams)
{
        snd_pcm_sw_params_current(handle, swparams);                /* get the current swparams */

                                            /* start the transfer when the buffer is almost full: */
                                            /* (buffer_size / avail_min) * avail_min */
        snd_pcm_sw_params_set_start_threshold(handle, swparams, (buffer_size / period_size) * period_size);

                                            /* allow the transfer when at least period_size samples can be processed */
                                            /* or disable this mechanism when period event is enabled (aka interrupt like style processing) */
        snd_pcm_sw_params_set_avail_min(handle, swparams, period_event ? buffer_size : period_size);
        snd_pcm_sw_params(handle, swparams);/* write the parameters to the playback device */
        return 0;
}

/*
 *   Transfer method - write only
 */

static int write_loop(snd_pcm_t *handle, signed short *samples, snd_pcm_channel_area_t *areas)
{
        double phase = 0;
        signed short *ptr;
        int err, cptr;
        int i=0;
        printf("Period Size = %ld",period_size);
        while (1) {
        fflush(stdout);
                generate_sine(areas, 0, period_size, &phase);
                ptr = samples;
                cptr = period_size;
            i=1;
                while (cptr > 0) {

                    err = snd_pcm_writei(handle, ptr, cptr);
                snd_pcm_avail_delay(handle,&availp,&delayp);
               printf("available frames =%ld  delay = %ld  i = %d\n",availp,delayp,i);
                        if (err == -EAGAIN)
                                continue;
                        ptr += err * channels;
                        cptr -= err;
            i++;
                }
        }
}

/*
 *   Transfer method - asynchronous notification
 */

int main()
{
        snd_pcm_t *handle;
        snd_pcm_hw_params_t *hwparams;
        snd_pcm_sw_params_t *swparams;
        signed short *samples;
        unsigned int chn;
        snd_pcm_channel_area_t *areas;

        snd_pcm_hw_params_alloca(&hwparams);
        snd_pcm_sw_params_alloca(&swparams);

        snd_output_stdio_attach(&output, stdout, 0);

        printf("Playback device is %s\n", device);
        printf("Stream parameters are %iHz, %s, %i channels\n", rate, snd_pcm_format_name(format), channels);
        printf("Sine wave rate is %.4fHz\n", freq);

        snd_pcm_open(&handle, device, SND_PCM_STREAM_PLAYBACK, 0);
        set_hwparams(handle, hwparams, SND_PCM_ACCESS_RW_INTERLEAVED);
        set_swparams(handle, swparams);
        samples = malloc((period_size * channels * snd_pcm_format_physical_width(format)) / 8);
        areas = calloc(channels, sizeof(snd_pcm_channel_area_t));

        for (chn = 0; chn < channels; chn++) {
                areas[chn].addr = samples;
                areas[chn].first = chn * snd_pcm_format_physical_width(format);
                areas[chn].step = channels * snd_pcm_format_physical_width(format);
        }

        write_loop(handle, samples, areas);
        free(areas);
        free(samples);
        snd_pcm_close(handle);
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T10:10:22.027

我通过改变 snd_pcm_writei 的长度参数解决了这个问题......以前我给它的数据等于 play_buffer 中包含的数据......现在我把它改成了“buff_size/4”，音频播放完美而没有中断。实际上，根据我的理解，它是系统应该开始缓冲新 pcm 样本的大小。以前它在播放整个长度 buff_size 后进行缓冲，导致音频输出中断......

# java - 使用 Async Provider 进行 GWT 代码拆分

> ID：15429252
> 
> 赞同：0
> 
> 时间：2013-03-15T09:55:00.153
> 
> 标签：java, gwt, split, gwt-compiler

我在 GWT 中使用 runAsync 将我的代码拆分为我的应用程序的不同子系统，使用 Async 提供程序模式（在[代码拆分文档](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting)中找到）。因此，每次我需要使用 runAsync 实例化我的任何类时，我都会为该子系统创建一个方法 - getAsync(..) - 使用包含 onSuccess(Subsystem instance) 的接口参数（在下载代码时调用）。当我需要为该类实例调用方法时，我首先调用 getAsync(...)，然后在接口的 onSuccess(instance) 中调用 instance.myMethod()。问题是大部分代码都放在剩余代码中，而不是放在该子系统的独占分割点中。我在这里想念什么？

# c# - WPF 进度条在几个栏后停止

> ID：15429256
> 
> 赞同：13
> 
> 时间：2013-03-15T09:55:10.310
> 
> 标签：c#, wpf, timer, progress-bar

在我的 WPF 应用程序中，我必须在计时器滴答事件中显示进度条进度，如下所示，

```
System.Windows.Forms.Timer timer;
public MainWindow()
{
    timer = new System.Windows.Forms.Timer();
    timer.Interval = 1000;
    this.timer.Tick += new System.EventHandler(this.timer_Tick);
} 
```

加载事件如下

```
private void Window_Loaded(object sender, RoutedEventArgs e)
{
      progressBar1.Minimum = 0;
      progressBar1.Value = DateTime.Now.Second;
      progressBar1.Maximum = 700;
      timer.Start();         
 } 
```

最后在tick事件中，

```
private void timer_Tick(object sender, EventArgs e)
{
    Duration duration = new Duration(TimeSpan.FromSeconds(20));

    //progress bar animation
    System.Windows.Media.Animation.DoubleAnimation doubleanimation = new    System.Windows.Media.Animation.DoubleAnimation(200.0, duration);
    progressBar1.BeginAnimation(ProgressBar.ValueProperty, doubleanimation);
} 
```

当程序的进度条显示两到三个条的进度时，它会停止递增。后来对进度完全没有影响。

为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T10:22:46.730

由于您`ProgressBar`与任何特定行为无关，因此它看起来像是**不确定**酒吧的工作。

[*This other SO question*](https://stackoverflow.com/questions/2844833/how-do-you-show-progress-when-isindeterminate-true-in-a-wpf-progress-bar)提供了一些关于它的见解。简而言之，它是 XAML 单行代码：

```
<!-- MinVal, MaxVal, Height needed for this to work -->
<ProgressBar x:Name="progressBar1" Margin="5" IsIndeterminate="True" 
    MinimumValue="0" MaximumValue="700" value="0" Height="20"/> 
```

然后在代码中，你会这样：

```
progressBar1.IsIndeterminate = true; // start animation
progressBar1.IsIndeterminate = false; // stop animation 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-15T10:07:03.037

> 在我的**WPF**应用程序中，我有...`System.Windows.Forms.Timer timer;`

那是错误的计时器类型。请改用[DispatcherTimer](https://docs.microsoft.com/en-us/dotnet/api/system.windows.threading.dispatchertimer)。

> 当我执行我的程序时，进度条显示两三个条的进度，然后它停止

这让我感到惊讶，我根本没想到它会起作用。~~这意味着您可能还会遇到其他问题，例如阻塞主（调度程序）线程。~~

您只需在 Loaded 事件中设置一次值：

```
 progressBar1.Value = DateTime.Now.Second; 
```

`progressBar1.Value`Tick 事件中的to 没有变化。所以它认为它停止移动。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-15T12:49:11.787

使用 DispatcherTimer 代替 Timer（Forms 对象），并使用 ProgressBar 的 Value 属性。

试试这个：

MainWindows.xaml：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="55" Width="261">
    <Grid>
        <ProgressBar Name="pb" Maximum="60" />
    </Grid>
</Window> 
```

MainWindows.xaml.cs：

```
using System.Windows;
using System.Windows.Threading;

namespace WpfApplication1
{
    public partial class MainWindow : Window
    {
        private DispatcherTimer timer;

        public MainWindow()
        {
            InitializeComponent();

            this.timer = new DispatcherTimer();
            this.timer.Tick += timer_Tick;
            this.timer.Interval = new System.TimeSpan(0, 0, 1);
            this.timer.Start();
        }

        private void timer_Tick(object sender, System.EventArgs e)
        {
            this.pb.Value = System.DateTime.Now.Second % 100;
        }
    }
} 
```

您可以通过更改 Value 属性来更改进度条的行为（不要忘记在 xaml 中定义 Maximum 属性）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-23T20:44:14.560

我发现这个（[WPF Multithreading: Using the BackgroundWorker and Reporting the Progress to the UI.link](http://elegantcode.com/2009/07/03/wpf-multithreading-using-the-backgroundworker-and-reporting-the-progress-to-the-ui/)）包含了一个很好的解决方案来满足我的需求，尽管有一个对话框。

我发现非常有用的一件事是工作线程无法访问 MainWindow 的控件（以它自己的方法）。但是，当在主窗口事件处理程序中使用委托时，这是可能的。

```
worker.RunWorkerCompleted += delegate(object s, RunWorkerCompletedEventArgs args)
{
    pd.Close();
    // Get a result from the asynchronous worker
    T t = (t)args.Result
    this.ExampleControl.Text = t.BlaBla;
}; 
```

# java - 如何在java中将字节数组转换为hexString？

> ID：15429257
> 
> 赞同：35
> 
> 时间：2013-03-15T09:55:11.783
> 
> 标签：java

我有由十六进制值组成的字节数组，例如`CA ,FA,21,33`

但我想将它们`JList`列为单个元素`CAFA2133`。为了在 JList 中列出它们，我想我需要将其转换为`string`. 那么有什么推荐吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-15T10:02:53.047

```
public static String bytesToHex(byte[] in) {
    final StringBuilder builder = new StringBuilder();
    for(byte b : in) {
        builder.append(String.format("%02x", b));
    }
    return builder.toString();
} 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-03-15T09:59:23.887

您需要查看[String.format()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html)和[Formatter](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html#syntax)规范。

例如

`String.format("%02x", byteValue);`

遍历数组并将每个`String.format()`结果附加到`StringBuilder`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-15T09:58:59.187

怎么样：

```
public static String bytesToHex(byte[] bytes) {
    final char[] hexArray = {'0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F'};
    char[] hexChars = new char[bytes.length * 2];
    int v;
    for ( int j = 0; j < bytes.length; j++ ) {
        v = bytes[j] & 0xFF;
        hexChars[j * 2] = hexArray[v >>> 4];
        hexChars[j * 2 + 1] = hexArray[v & 0x0F];
    }
    return new String(hexChars);
} 
```

[**来源**](https://stackoverflow.com/a/9855338/12860)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T10:06:18.723

此方法应该为您执行此操作..将字节数组作为参数传递以返回十六进制字符串...

```
private static String convertToHexString(byte[] data) {
StringBuffer buf = new StringBuffer();
for (int i = 0; i < data.length; i++) {
    int halfbyte = (data[i] >>> 4) & 0x0F;
    int two_halfs = 0;
    do {
        if ((0 <= halfbyte) && (halfbyte <= 9))
            buf.append((char) ('0' + halfbyte));
        else
            buf.append((char) ('a' + (halfbyte - 10)));
            halfbyte = data[i] & 0x0F;
        } while(two_halfs++ < 1);
    }
return buf.toString();
} 
```

希望有帮助..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T09:58:25.930

您可以使用[`Integer.toStringint i, int radix)`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html#toString%28int,%20int%29)将每个数字转换为十六进制字符串，然后将它们连接在一起。现在您只需要将字节转换为 int。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T10:00:45.563

参考`Integer`'s [`toHexString`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#toHexString%28int%29)。将您的转换`byte`为`int`然后获取结果字符串应该可以解决问题。当然，您必须将字符串与`StringBuilder`then 连接起来。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-15T10:01:32.467

如果这个数组有 4 个字节长，你可以连接字节并使用 Integer.toString(int, int) 方法。

```
byte[] array = /* initialization */;
int x = 0;
for (int i = 0, l = Math.min(array.length, 4); i < l; i++) {
    x <<= 8;
    x |= (array[i] & 0xFF);
}
String hex = Integer.toString(x, 16); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-15T10:35:03.677

```
import java.util.HashMap;

public class NumUtil
{   private static HashMap<Byte,char[]>byteToHex=new HashMap<Byte, char[]>();
    static
    {   for(int i=0;i<16;++i)
            byteToHex.put((byte)i, new char[]{'0',Integer.toHexString(i).charAt(0)});
        for(int i=16;i<256;++i)
            byteToHex.put((byte)i, Integer.toHexString(i).toCharArray());
    }
    public static String toHexString(byte[]bytes)
    {   StringBuilder stringBuilder = new StringBuilder(bytes.length*2);
        for(byte b:bytes)
            stringBuilder.append(byteToHex.get(b));
        return stringBuilder.toString();
    }
} 
```

# c++ - C++ 如何确定重载运算符的参数？

> ID：15429265
> 
> 赞同：1
> 
> 时间：2013-03-15T09:55:48.277
> 
> 标签：c++, arguments, operator-overloading, istream, ostream

我重载了 I/O 操作符：

```
struct Time {
  int hours;
  int minutes;
};

ostream &operator << ( ostream &os, Time &t ) {
  os << setfill('0') << setw( 2 ) << t.hours;
  os << ":";
  os << setfill('0') << setw( 2 ) << t.minutes;
  return os;
}

istream &operator >> ( istream &is, Time &t ) { 
  is >> t.hours;
  is.ignore(1, ':');
  is >> t.minutes;
  return is;
} 
```

我想知道当我调用`cin >> time`编译器如何确定`is &is`参数时。这是我的`main()`程序：

```
operator>>( cin, time );
cout << time << endl;

cin >> (cin , time);
cout << time << endl;

cin >> time;                     //Where is cin argument???
cout << time << endl; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T09:57:15.137

```
cin >> time; 
```

这是`>>`具有两个操作数的运算符。如果重载的运算符函数被发现为非成员，则左操作数成为第一个参数，右操作数成为第二个参数。所以它变成：

```
operator>>(cin, time); 
```

所以`cin`参数只是运算符的第一个操作数。

见标准§13.5.2：

> 二元运算符应由具有一个参数的非静态成员函数 (9.3) 或由具有两个参数的非成员函数实现。因此，对于任何二元运算符`@`，`x@y`都可以解释为`x.operator@(y)`或`operator@(x,y)`。

如果您想知道这如何适用于链式运算符，请使用：

```
cin >> time >> something; 
```

这相当于：

```
(cin >> time) >> something; 
```

这也相当于：

```
operator>>(operator>>(cin, time), something); 
```

# android - Android 应用程序无法在模拟器上加载

> ID：15429266
> 
> 赞同：0
> 
> 时间：2013-03-15T09:55:49.683
> 
> 标签：android, emulation

我的应用程序没有错误，但是当我在模拟器上运行它时，模拟器运行但不显示我的应用程序并提出了这个

错误信息 -

> [2013-03-15 09:47:57 - Writees] 未找到启动器活动！[2013-03-15 09:47:57 - Writees] 启动只会同步设备上的应用程序包！

这是我的清单——

> ?xml 版本="1.0" 编码="utf-8"?>
> 
> ```
>  android:allowBackup = "True">
>        <activity
>            android:name="com.example.writees.LoginActivity"
>            android:label="@string/app_name" >
>            <intent-filter>
>                <action android:name="android.intent.action.MAIN" />
> 
>                <intent-filter>
>                    <category android:name="android.intent.category.LAUNCHER" />
>                </intent-filter>
>            </intent-filter>
>        </activity>
>        <!-- dashboard Activity  -->
>        <activity
>            android:name="com.example.writees.DashboardActivity"
>            android:label="dashboard" >
>        </activity>
> 
>        <!-- main Activity -->
>        <activity
>            android:name="com.example.writees.MainActivity"
>            android:label="main" >
>        </activity>
> 
>        <!-- Register Activity -->
>        <activity
>            android:name="com.example.writees.RegisterActivity"
>            android:label="Register New Account" >
>        </activity>
> 
>        <!-- Book Activity -->
>        <activity
>            android:name="com.example.writees.BookActivity"
>            android:label="book" >
>        </activity> 
> ```
> 
> />

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:56:26.367

> 未找到启动器活动！

您没有将任何活动设置为启动器`AndroidManifest.xml`

```
<activity android:name=".ExampleActivity" android:label="@string/app_name">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:06:49.420

您必须将要首先启动的任何一项活动作为 Launcher 活动。

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.helloworld.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

# c# - 如何强制 AbstractValidator 中的 IRuleBuilder 充当“if”语句？

> ID：15429268
> 
> 赞同：1
> 
> 时间：2013-03-15T09:55:49.690
> 
> 标签：c#, fluentvalidation

这是我的代码：

```
RuleFor(x => x.Content).NotEmpty().Must(content => content.Trim().Length > 0); 
```

我希望它应该表现为

```
if (NotEmpty(x.Content) && x.Content.Trim().Length > 0) 
```

声明，但它抛出`NullReferenceException`if `x.Content`is `null`。

请帮助我解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:08:41.050

有[`Unless`](http://fluentvalidation.codeplex.com/wikipage?title=Customising&referringTitle=Documentation&ANCHOR#WhenUnless)它允许您根据条件执行规则。但是，您需要将规则分成两部分：

```
RuleFor(x => x.Content).NotEmpty();
RuleFor(x => x.Content).Must(content => content.Trim().Length > 0).Unless(x => x == null); 
```

或者您可以使用`??`更紧凑的运算符：

```
RuleFor(x => (x.Content ?? "").Trim()).NotEmpty(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T16:15:12.130

看来这段代码也很完美：

```
RuleFor(x => x.Content)   
    .Cascade(CascadeMode.StopOnFirstFailure)    
        .NotEmpty()   
        .Must(content => content.Trim().Length > 0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T10:07:22.633

您可以编写[自定义规则](http://fluentvalidation.codeplex.com/wikipage?title=Custom)。如果规则返回 true，则创建一个`ValidationFailure`. 像这样的东西：

```
public class ViewModelValidator : AbstractValidator<ViewModel>
{
    public ViewModelValidator()
    {
        Custom(r => ContentIsEmpty(r) ? new ValidationFailure("Content", "Content must not be empty.") : null);
    }

    private static bool ContentIsEmpty(ViewModel viewModel)
    {
        return string.IsNullOrWhiteSpace(viewModel.Content);
    }
} 
```

# android - android中的线性布局排列

> ID：15429270
> 
> 赞同：0
> 
> 时间：2013-03-15T09:55:52.650
> 
> 标签：android

我正在学习线性布局，我有些困惑。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
   android:orientation="vertical"
    tools:context=".MainActivity" >   

    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello_world" 
        android:layout_weight=".33"/>

    <Button
        android:id="@+id/button1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Button" 
        android:layout_weight=".33"/> 

     <Button
        android:id="@+id/button2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"   
        android:text="Button" 
        android:layout_weight=".3"/>

</LinearLayout> 
```

在这些代码中有三个元素。

1.  文本视图 2\. 按钮 1 3\. 按钮 2

线性布局方向是垂直的，我只在一个权重值中给了它们相同的权重调整。

现在在垂直方向我给

```
android:layout_width="fill_parent"
android:layout_height="wrap_content" 
```

所以它同时填充了高度和宽度。

但是当我使用水平布局和写作时

```
 android:layout_height="fill_parent"
    android:layout_width="wrap_content" 
```

它是填充宽度但不是填充高度

而不是给 android:layout_height="fill_parent" 为什么它不填充高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:02:01.743

复制粘贴此代码并尝试它..它将填充高度。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
   android:orientation="horizontal"
    tools:context=".MainActivity" >   

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:text="@string/hello_world" 
        android:layout_weight=".33"/>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:text="Button" 
        android:layout_weight=".33"/> 

     <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"   
        android:text="Button" 
        android:layout_weight=".3"/>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:12:48.827

我认为您需要对这个主题有所了解，而不是有人向您扔代码。工作代码如上面的@Nirali 所示。

因此，在本速成课程中，您需要了解什么是 fill_parent 和 wrap_content。线性布局是您的父​​级，或者您可以将其视为设备的屏幕。如果将高度设置为 fill_parent，它将填满屏幕的整个高度。

Wrap_content 用于包装您的对象，例如您的按钮。如果您将高度设置为 wrap_content，它只会将高度设置为很好地包裹您的按钮。

以上是我脑海中浮现的解释，为了更好地理解，请参阅这篇文章[fill_parent和wrap_content有什么区别？](https://stackoverflow.com/questions/432763/whats-the-difference-between-fill-parent-and-wrap-content)

# api - 当我有restful api时在sencha touch 2中使用哪个代理

> ID：15429277
> 
> 赞同：0
> 
> 时间：2013-03-15T09:56:01.423
> 
> 标签：api, sencha-touch-2

我正在尝试制作 sencha touch 2 移动应用程序。我在服务器中有一个安静的 api，我想在我的移动应用程序中使用它。我应该使用哪个 sencha 代理（rest、ajax、jsonp）？Rest 和 ajax 存在跨站点域问题，因此 jsonp 可以成为解决方案。但是，如果我有参数，如何将 jsonp 请求发送到 rest api？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:03:29.277

如果您的服务真正遵循 REST 标准，您可以使用`REST`代理，因为这样代理可以为您提供开箱即用的功能来操作模型。

关于跨域问题，请注意应用程序在桌面浏览器中的行为方式与在手机中运行时的行为方式不同，因此您不需要强制使用`JSONP`，`AJAX`也可以为您工作。如果您可以使用 JSONP，那就太好了，但请记住它不支持 HTTP 标头和其他有用的方法（如 POST、PUT 和 DELETE）的局限性。

请通过此了解更多信息：[How to use json proxy to access remote services during development](https://stackoverflow.com/questions/14118053/how-to-use-json-proxy-to-access-remote-services-during-development)

# android - Libgdx 在 Android 4 上无法正确获取屏幕分辨率

> ID：15429278
> 
> 赞同：0
> 
> 时间：2013-03-15T09:56:02.437
> 
> 标签：android, libgdx

我有 960*540 分辨率和 Android 4.04 的 Sony Xperia P。Libgdx 0.9.7（2012 年 12 月）检测到它的分辨率为 569*320。代码在这里：

```
 public void create() {
        Gdx.input.setInputProcessor(this);
        SCREEN_WIDTH = Gdx.graphics.getWidth();
        SCREEN_HEIGHT = Gdx.graphics.getHeight(); 
```

在我尝试过的所有其他设备上，它都可以正常工作。那么该怎么办？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T23:20:08.850

我不能给你一个可靠的答案，因为我没有索尼 Xperia P。我已经在许多设备上测试了 LibGDX，还没有遇到这个问题。我唯一的建议是将 LibGDX 更新到[最新的夜间版本](http://libgdx.badlogicgames.com/nightlies/)，看看他们是否已修复它。您也可以使用他们的[更新工具](http://libgdx.badlogicgames.com/nightlies/dist/gdx-setup-ui.jar)来执行此操作。

libGDX 开发的工作方式，夜间构建实际上非常稳定。由于该框架是积极开发的，如果像这样重要的东西漏掉了，我会感到惊讶。如果使用最新的夜间版本不起作用，我建议在[此处](https://code.google.com/p/libgdx/issues/list)提交错误报告。他们通常很快就能解决问题。

# php - 如何在 SOAP 响应中发送纯 XML？

> ID：15429279
> 
> 赞同：5
> 
> 时间：2013-03-15T09:56:10.070
> 
> 标签：php, soap, encoding, soapserver

我正在使用 PHP SoapServer 类并尝试将纯 XML 放入 SOAP 响应的正文中。

**情况1：**

我的 WSDL 有

```
<element name="getDataResponse" type="xsd:string"/> 
```

我对响应进行编码

```
return new SoapVar($my_xml,XSD_ANYXML) 
```

PHP SoapClient 说

```
SOAP-ERROR: Encoding: Violation of encoding rules 
```

**案例二：**

WSDL

```
<element name="getDataResponse" type="xsd:string"/> 
```

响应编码

```
return new SoapVar($my_xml,XSD_STRING) 
```

响应 XML 将所有 < 编码为 < 和 > 作为 >

**案例3：**

WDSL

```
<element name="getDataResponse">
  <complexType>
   ... 
  </complexType>
</element> 
```

其中 complexType 对应要返回的 XML 的结构

响应编码

```
return new SoapVar($my_xml,XSD_ANYXML) 
```

现在返回类型是一个对象，而不是 XML 字符串

**案例4**

除了编码为 SOAP_ENC_OBJECT 外，与案例 3 相同。再次结果将是对象。

请帮忙！如何获取纯 XML 文本作为 SOAP 响应的正文？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T10:25:40.240

你试过这个吗？

```
return new SoapVar(
     '<ns1:xmlDocument>'.$my_xml.'</ns1:xmlDocument>',
     XSD_ANYXML
); 
```

[在这个 PHP 页面上](http://php.net/manual/soapvar.soapvar.php)还有其他解决方案。（参见“用户贡献的笔记”部分）

# wordpress - Wordpress 强制发布以选择类别

> ID：15429280
> 
> 赞同：2
> 
> 时间：2013-03-15T09:56:11.983
> 
> 标签：wordpress, wordpress-theming

我正在使用 WordPress 帖子来构建帖子。当我没有为帖子选择类别时，是否有任何插件或某些功能会发出警告。每当我发布一个类别时，我都会错过一些时间，因为有很多一段时间后要在类别中发布帖子，看到那些未分类的帖子非常头疼。

```
add_theme_support('menus'); 
```

**

**> 上面的代码什么都不是，因为堆栈溢出不允许我

> 发布我的问题，因为它说标准低。**

** 提前致谢。希望我能找到一个合适的答案

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T09:59:16.430

哈哈..它太有趣了，但你可以在你的functions.php文件中尝试如下

```
function force_post_categ_init() 
{
  wp_enqueue_script('jquery');
}
function force_post_categ() 
{
  echo "<script type='text/javascript'>\n";
  echo "
  jQuery('#publish').click(function() 
  {
    var cats = jQuery('[id^=\"taxonomy\"]')
      .find('.selectit')
      .find('input');
    category_selected=false;
    for (counter=0; counter<cats.length; counter++) 
    {
        if (cats.get(counter).checked==true) 
        {
            category_selected=true;
            break;
        }
    }
    if(category_selected==false) 
    {
      alert('You have not selected any category for the post. Please select post category.');
      setTimeout(\"jQuery('#ajax-loading').css('visibility', 'hidden');\", 100);
      jQuery('[id^=\"taxonomy\"]').find('.tabs-panel').css('background', '#F96');
      setTimeout(\"jQuery('#publish').removeClass('button-primary-disabled');\", 100);
      return false;
    }
  });
  ";
   echo "</script>\n";
}
add_action('admin_init', 'force_post_categ_init');
add_action('edit_form_advanced', 'force_post_categ'); 
```

**注意：-**必须启用 javascript 才能运行它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-14T14:05:07.627

我建议使用 jQuery 对象来读取输入的实际值，因为可以使用选中的值加载页面，然后可以取消选中并保存输入。这使用 jQuery 对象`.is('checked')`方法：

```
function force_post_categ() 
{
    $custom_js = <<<CUSTOM_JS
    <script type='text/javascript'>
    jQuery('#publish').click(function() 
    {

      var cats = jQuery('[id^="taxonomy"]').find('.selectit').find('input');
      category_selected = false;

      $.each(cats, function(key,value){
          if ( $(this).is(':checked') == true ) {
            category_selected = true;
            return false;
          }
      });

      if (category_selected == false) 
      {
        alert('You have not selected any metro or country for the post. Please select a metro.');
        setTimeout("jQuery('#ajax-loading').css('visibility', 'hidden');", 100);
        jQuery('[id^="taxonomy"]').find('.tabs-panel').css('background', '#F96');
        setTimeout("jQuery('#publish').removeClass('button-primary-disabled');", 100);
        return false;
      }
    });
    </script>
CUSTOM_JS;

    echo $custom_js;
} 
```

# c# - Visual Studio 2012 没有正确关闭我的 applicationhost.config

> ID：15429297
> 
> 赞同：0
> 
> 时间：2013-03-15T09:56:47.183
> 
> 标签：c#, asp.net, asp.net-mvc, visual-studio, asp.net-mvc-4

`Visual Studio 2012`没有`applicationhost.config`正确关闭我的文件。然后当这种情况发生时，我的 web 项目不想加载。我创建了一个`ASP.NET MVC 4`项目。

配置元素的结束标签没有关闭，那么它看起来很奇怪，例如：

```
</configuratai 
```

然后我必须通过正确拼写配置来修复它。当我这样做时，我只需要重新加载我的 Web 项目就可以了。

为什么这样做？

# ios - 对核心数据中的重复值求和

> ID：15429310
> 
> 赞同：0
> 
> 时间：2013-03-15T09:57:29.653
> 
> 标签：ios, objective-c, core-data

我将类别和金额值存储到核心数据中。我想向用户显示前 5 个类别。我能够得到结果，但是如何对相似类别的金额求和并显示前 5 个。

我已经尝试了一些逻辑来总结该类别的数量，但我被困在那里，我也想知道我是否做对了。

```
 NSArray *results = [moc executeFetchRequest:request error:&error];
for(int i = 0; i < [results count] ; i ++){
    double sum = 0;
    NSString *temp = [[results objectAtIndex:i]valueForKey:@"category"];
    for( int j = 0; j< [results count] ; j ++){
        if([temp isEqualToString:[[results objectAtIndex:j]valueForKey:@"category"]]){
            sum = sum + [[[results objectAtIndex:j]valueForKey:@"amount"]doubleValue];
        }
    }
NSLog(@"%f",sum);
NSLog(@"%f",temp);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:20:19.947

当您从核心数据中获取值时，您可以使用

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"amount=%d",previousValueotNot]; 
```

然后在下面添加此代码

```
 [request setPredicate:predicate];
NSError *error;
    NSArray *tempResults = [context executeFetchRequest:request error:&error];
    NSLog(@"temparray coun is %d",[tempResults count]);
if ([tempResults count] > 0)
    {

       //sum here the duplicates.
       //sample code is 

NSArray *tempResults = [self.managedObjectContext executeFetchRequest:request error:&error];
NSMutableArray *tempBudsArray = [[NSMutableArray alloc] init];
for ( Favorite *fav in tempResults) 
    {
      //.. Here u get the values from the core data and sum here  ,then store all the values, later u can put in ascending order
    }

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:08:54.587

你想要的是一个计数集。继承人的文档：[https](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSCountedSet_Class/Reference/Reference.html) ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSCountedSet_Class/Reference/Reference.html 基本上，您只需放入所有您拥有的对象，然后询问物体的数量。计数的集合将返回特定项目在集合中的次数。只要确保你使用`-countForObject`而不是`-count`. 玩得开心

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:10:31.420

您可以按升序或降序将结果总和存储到数组中。从该数组中，您可以显示其索引中的前 5 个总和。

比你

# groovy - 如何在 Groovy 中构建可重新初始化的惰性属性？

> ID：15429315
> 
> 赞同：4
> 
> 时间：2013-03-15T09:57:46.517
> 
> 标签：groovy, lazy-evaluation

这就是我想做的：

```
class MyObject {
    @Lazy volatile String test =  {
        //initalize with network access
    }()
}

def my = new MyObject()
println my.test

//Should clear the property but throws groovy.lang.ReadOnlyPropertyException
my.test = null 

//Should invoke a new initialization
println my.test 
```

不幸的是，惰性字段在 Groovy 中是只读字段，清除该属性会导致异常。

知道如何在不重新实现 @Lazy 注释提供的双重检查逻辑的情况下使惰性字段可重新初始化吗？

**更新：**

考虑到 soft=true （来自第一个答案）让我进行了一些测试：

```
class MyObject {
    @Lazy() volatile String test =  {
        //initalize with network access
        println 'init'
        Thread.sleep(1000)
        'test'
    }()
}

def my = new MyObject()
//my.test = null 
10.times { zahl ->
    Thread.start {println "$zahl: $my.test"}
} 
```

大约 1 秒后，我的 Groovy 控制台上会出现以下输出：

```
init
0: test
7: test
6: test
1: test
8: test
4: test
9: test
3: test
5: test
2: test 
```

这是预期的（和想要的）。现在我添加`soft=true`，结果发生了巨大变化，需要 10 秒：

```
init
init
0: test
init
9: test
init
8: test
init
7: test
init
6: test
init
5: test
init
4: test
init
3: test
init
2: test
1: test 
```

也许我做错了测试或者 soft=true 完全破坏了缓存效果。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T10:12:11.387

你不能使用`soft` [Lazy 的属性](http://groovy.codehaus.org/gapi/groovy/lang/Lazy.html#soft)，即：

```
class MyObject {
  @Lazy( soft=true ) volatile String test =  {
    //initalize with network access
  }()
} 
```

## 编辑

使用`soft=true`，注释会生成一个 setter 和一个 getter，如下所示：

```
private volatile java.lang.ref.SoftReference $test 

public java.lang.String getTest() {
    java.lang.String res = $test?.get()
    if ( res != null) {
        return res 
    } else {
        synchronized ( this ) {
            if ( res != null) {
                return res 
            } else {
                res = { 
                }.call()
                $test = new java.lang.ref.SoftReference( res )
                return res 
            }
        }
    }
}

public void setTest(java.lang.String value) {
    if ( value != null) {
        $test = new java.lang.ref.SoftReference( value )
    } else {
        $test = null
    }
} 
```

没有`soft=true`，你不会得到一个 setter

```
private volatile java.lang.String $test 

public java.lang.String getTest() {
    java.lang.Object $test_local = $test 
    if ( $test_local != null) {
        return $test_local 
    } else {
        synchronized ( this ) {
            if ( $test != null) {
                return $test 
            } else {
                return $test = { 
                }.call()
            }
        }
    }
} 
```

所以变量是只读的。目前不确定这是故意的，还是使用的副作用`soft=true`......

## 编辑#2

这看起来可能是 Lazy 的实现中的一个错误`soft=true`

如果我们将 getter 更改为：

```
 public java.lang.String getTest() {
    java.lang.String res = $test?.get()
    if( res != null ) {
      return res 
    } else {
      synchronized( this ) {
        // Get the reference again rather than just check the existing res
        res = $test?.get()
        if( res != null ) {
          return res
        } else {
          res = { 
            println 'init'
            Thread.sleep(1000)
            'test'
          }.call()
          $test = new java.lang.ref.SoftReference<String>( res )
          return res 
        }
      }
    }
  } 
```

我认为它正在工作......我会修复错误

# javascript - 使用 Extjs 创建表结构

> ID：15429321
> 
> 赞同：1
> 
> 时间：2013-03-15T09:58:10.367
> 
> 标签：javascript, extjs, extjs4, extjs4.1, extjs-mvc

在 Extjs 4.1.1a 中，我试图创建一个类似表格的结构，使用`containers`or`panels`完全水平和垂直延伸到其父组件。

这是[示例小提琴](http://jsfiddle.net/7qQMv/)

在**视图**中：

```
Ext.define("MyApp.view.Main", {
    extend: 'Ext.panel.Panel',       
    layout: {type: 'vbox',align:'stretch'},
    title: 'hello',
    id: 'mainContainer' 
}) 
```

* * *

在**控制器**中：

```
var items = [];
for(var i=0;i<6;i++){

    var vContainer = [];
    var hContainer = [];
    for(var j=0;j<7;j++){
       hContainer.push({
         xtype: 'panel',
         flex:1,                            
       })                       
    }                       
    vContainer.push({
        xtype:'panel',
        flex: 1,
        layout: {type:'hbox',align:'stretch'},                          
        items: hContainer
    })
} 
```

* * *

```
var mainController = Ext.getCmp('mainController');  //Calling the id here
mainController.add(items);  //adding the items variable which is mentioned above 
```

我不确定为什么这不起作用（没有显示任何内容）。请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T10:44:16.780

[小提琴](http://jsfiddle.net/7qQMv/5/)

您将一个数组推入一个数组并将其作为主面板中的项目传递：

这是固定代码：

```
 var items = [];
    for(var i=0;i<6;i++){

        var vContainer; //THE PROBLEM - NO NEED FOR IT TO BE AN ARRAY
        var hContainer = [];
        for(var j=0;j<7;j++){
           hContainer.push({
             xtype: 'panel',
               title : 'H',
             flex:1,                            
           });                      
        }                       
        vContainer = {
            xtype:'panel',
            flex: 1,
            layout: {type:'hbox',align:'stretch'},
            title : 'V',
            items: hContainer
        }
        items.push(vContainer);
    }

Ext.create('Ext.panel.Panel',{
    renderTo: Ext.getBody(),
    layout: {type: 'vbox',align:'stretch'},
    title: 'hello',
    minHeight : 500,
    minWidth : 500,
    items: items        
}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T10:52:37.530

编辑：为时已晚，无论如何都将示例留在这里。

你建错了：

```
/*****************************************/
    var items = [];
    for(var i=0;i<6;i++){               

        var hContainer = [];
        for(var j=0;j<7;j++){
           hContainer.push({
             xtype: 'panel',
             flex:1
           });                  
        }                       
        items.push({
            xtype:'panel',
            flex: 1,
            layout: {type:'hbox',align:'stretch'},                          
            items: hContainer
        });
    }

/*****************************************/

Ext.create('Ext.panel.Panel',{
    renderTo: Ext.getBody(),
    layout: {type: 'vbox',align:'stretch'},
    title: 'hello',
    height: 400,
    items: items        
}); 
```

这是小提琴：http: [//jsfiddle.net/johanhaest/ptZp7/](http://jsfiddle.net/johanhaest/ptZp7/)

# python - 主循环旁边的多处理

> ID：15429323
> 
> 赞同：3
> 
> 时间：2013-03-15T09:58:17.327
> 
> 标签：python, multiprocessing

我正在为一个问题苦苦挣扎一段时间。我正在构建一个使用主循环的小脚本。这是一个需要用户注意的过程。用户对步骤做出响应，然后使用某些功能会发生一些魔术

除此之外，我想生成另一个进程来监视计算机系统中的某些特定事件，例如按下特定键。如果这些事件发生，那么它将启动与用户提供正确值时相同的功能。

所以我需要做两个过程： - 主循环（允许用户交互） - 后台“事件扫描器”，它搜索特定事件然后对其做出反应。

我通过启动一个主循环和一个守护进程多处理进程来尝试这个。问题是当我启动后台进程时它会启动，但之后我没有启动主循环。我简化了一切以使其更清晰：

```
import multiprocessing, sys, time

def main_loop():
    while 1:
        input = input('What kind of food do you like?')
        print(input)

def test():
    while 1:
        time.sleep(1)
        print('this should run in the background')

if __name__ == '__main__':
    try:
        print('hello!')
        mProcess = multiprocessing.Process(target=test())
        mProcess.daemon = True
        mProcess.start()
        #after starting main loop does not start while it prints out the test loop fine.
        main_loop() 
    except:
        sys.exit(0) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T10:58:51.100

你应该做

`mProcess = multiprocessing.Process(target=test)`

代替

`mProcess = multiprocessing.Process(target=test())`

您的代码实际上`test`在父进程中调用，并且该调用永远不会返回。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-15T11:00:17.357

您可以使用锁定同步来更好地控制程序的流程。奇怪的是，输入函数会引发 EOF 错误，但我相信您可以找到解决方法。

```
import multiprocessing, sys, time

def main_loop(l):
    time.sleep(4)
    l.acquire()

    # raise an EOFError, I don't know why .
    #_input = input('What kind of food do you like?') 

    print(" raw input at 4 sec ")
    l.release()

    return

def test(l):
    i=0
    while i<8:
        time.sleep(1)

        l.acquire()
        print('this should run in the background : ', i+1,  'sec')
        l.release()

        i+=1

    return

if __name__ == '__main__':

    lock = multiprocessing.Lock()

    #try:
    print('hello!')
    mProcess = multiprocessing.Process(target=test, args = (lock, ) ).start()

    inputProcess = multiprocessing.Process(target=main_loop, args = (lock,)).start()

    #except:
        #sys.exit(0) 
```

# macos - 在mac上将文件夹显示为文件

> ID：15429324
> 
> 赞同：3
> 
> 时间：2013-03-15T09:58:23.817
> 
> 标签：macos, directory

Mac Finder 能够将一些文件夹显示为纯文件。例如，它可以将具有 .app 和 .xcodeproj 扩展名的文件夹显示为文件。

我正在开发一个将文件存储在所谓项目中的应用程序。项目是一个文件夹，其中包含一些文件和特定于应用程序的扩展名。

我应该怎么做才能强制 Finder 将我的应用程序的项目显示为文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:08:58.687

这个概念被称为“文件包”或[“文档包”](https://developer.apple.com/library/mac/documentation/CoreFOundation/Conceptual/CFBundles/DocumentPackages/DocumentPackages.html#//apple_ref/doc/uid/10000123i-CH106-SW3)（通常也用稍微错误的术语“包”来指代）。

应用程序可以在其 Info.plist 中声明一个文档类型并将`LSTypeIsPackage`密钥设置为`true`. 在 Xcode UI 中有一个名为“文档作为捆绑分发”的复选框。

![在此处输入图像描述](../Images/495e9fa4be5aa84bcc02cc2e34813924.png)

当应用程序安装在 Mac 上时，Finder 会将带有文档类型扩展名的任何目录显示为文件。

# c - 初始化结构的第一个元素还是整个结构？

> ID：15429326
> 
> 赞同：5
> 
> 时间：2013-03-15T09:58:26.260
> 
> 标签：c, gcc

全部：
在 C 语言中：

```
struct A  
{
    int a;
    int b;
};

A aa = {0}; 
```

该语句仅初始化 aa.a 还是初始化整个结构？或者行为取决于编译器？
提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T10:07:57.987

```
One more ex:
struct A  
{
    int a;
    int b;
};

struct A aa = {5}; 
```

这将初始化整个结构，但 aa.b 将被初始化为 0。如果您仅初始化结构的少数成员，则该结构的所有其他成员将自动初始化为 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T10:05:10.297

根据 C99 标准，第 6.7.8.17 节，只有第一个成员（按声明顺序，即`a`字段）在您的示例中显式初始化：

> 每个大括号括起来的初始值设定项列表都有一个关联的当前对象。当没有指定时，当前对象的子对象根据当前对象的类型按顺序初始化：数组元素按递增下标顺序，结构成员按声明顺序，以及联合的第一个命名成员。

通过“指定”标准手段

```
A aa = {.b = 0}; 
```

这是让程序员决定初始化哪些字段的更精确的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T10:21:13.017

> 该语句仅初始化 aa.a 还是初始化整个结构？

看看下面的例子，用 {3} 初始化结构，类似于用 {3,0} 初始化。

因此，在您的程序中，当您使用 {0} 进行初始化时，您实际上是在使用 {0,0} 初始化 a 和 b（整个结构）

```
#include<stdio.h>

typedef struct A  
{
    int a;
    int b;
}a;

int main()
{
a aa = {3};
printf("\na1 = %d",aa.a);
printf("\nb1 = %d",aa.b);

a bb = {3,0};
printf("\na2 = %d",bb.a);
printf("\nb2 = %d",bb.b);

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T12:03:42.967

从标准（[N1570](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)）

> ### 6.7.9 初始化
> 
> ...
> 10 如果具有自动存储持续时间的对象未显式初始化，则其值是不确定的。如果具有静态或线程存储持续时间的对象未显式初始化，则：
> — 如果它具有指针类型，则将其初始化为空指针；
> — 如果它具有算术类型，则将其初始化为（正或无符号）零；
> — 如果是聚合，则每个成员都根据这些规则（递归地）初始化，并且任何填充都被初始化为零位；
> — 如果是联合，则根据这些规则（递归地）初始化第一个命名的成员，并将任何填充初始化为零位；
> ...
> 21 如果大括号括起来的列表中的初始值设定项少于聚合的元素或成员，或者用于初始化已知大小数组的字符串文字中的字符少于数组中的元素，则聚合的剩余部分应隐式初始化与具有静态存储持续时间的对象相同。

因此，在您的示例`aa.a`中，由于初始化程序，将显式初始化为 0，而`aa.b`由于上述子句，将隐式初始化为 0。

# bash - 如何指定多行shell变量？

> ID：15429330
> 
> 赞同：147
> 
> 时间：2013-03-15T09:58:34.577
> 
> 标签：bash, shell

我写了一个查询：

```
function print_ui_hosts
{
local sql = "select ........."
print_sql "$ sql"
} 
```

本地 sql - 一个很长的字符串。查询未格式化。如何将字符串拆分为多行？

* * *

## 回答 #1

> 赞同：202
> 
> 时间：2013-03-15T10:07:10.327

只需在必要时插入新行

```
sql="
SELECT c1, c2
from Table1, Table2
where ...
" 
```

shell 将寻找右引号

* * *

## 回答 #2

> 赞同：168
> 
> 时间：2013-03-15T10:04:05.130

与heredoc一起使用`read`，如下所示：

```
read -d '' sql << EOF
select c1, c2 from foo
where c1='something'
EOF

echo "$sql" 
```

* * *

## 回答 #3

> 赞同：88
> 
> 时间：2014-05-22T08:24:57.043

我想给出一个额外的答案，而其他答案在大多数情况下就足够了。

我想在多行上写一个字符串，但它的内容需要是单行的。

```
sql="                       \
SELECT c1, c2               \
from Table1, ${TABLE2}      \
where ...                   \
" 
```

如果这有点离题，我很抱歉（我不需要这个用于 SQL）。但是，在搜索多行 shell 变量时，这篇文章出现在第一个结果中，另外一个答案似乎是合适的。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-02-22T15:44:27.277

感谢[dimo414 对类似问题的回答](https://stackoverflow.com/a/35049057/26510)，这显示了他出色的解决方案是如何工作的，并表明您也可以轻松地在文本中包含引号和变量：

### 示例输出

```
$ ./test.sh

The text from the example function is:
  Welcome dev: Would you "like" to know how many 'files' there are in /tmp?

  There are "      38" files in /tmp, according to the "wc" command 
```

### 测试.sh

```
#!/bin/bash

function text1()
{
  COUNT=$(\ls /tmp | wc -l)
cat <<EOF

  $1 Would you "like" to know how many 'files' there are in /tmp?

  There are "$COUNT" files in /tmp, according to the "wc" command

EOF
}

function main()
{
  OUT=$(text1 "Welcome dev:")
  echo "The text from the example function is: $OUT"
}

main 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-10-18T08:38:12.017

`read`不导出变量（大多数时候这是一件好事）。这是一种替代方法，可以在一个命令中导出，可以保留或丢弃换行符，并允许根据需要混合引用样式。适用于 bash 和 zsh。

```
oneLine=$(printf %s \
    a   \
    " b "   \
    $'\tc\t'    \
    'd '    \
)
multiLine=$(printf '%s\n' \
    a   \
    " b "   \
    $'\tc\t'    \
    'd '    \
) 
```

我承认引用的需要使 SQL 变得丑陋，但它回答了标题中的（更普遍表达的）问题。

我这样用

```
export LS_COLORS=$(printf %s    \
    ':*rc=36:*.ini=36:*.inf=36:*.cfg=36:*~=33:*.bak=33:*$=33'   \
    ...
    ':bd=40;33;1:cd=40;33;1:or=1;31:mi=31:ex=00') 
```

在来自 my`.bashrc`和`.zshrc`.

# android - 在android中的“创建新联系人”表单上访问“完成”按钮

> ID：15429332
> 
> 赞同：0
> 
> 时间：2013-03-15T09:58:39.030
> 
> 标签：android

我是android的初学者，有以下问题。

我在 android 中创建了 OCR 应用程序。在对文本进行 OCR 处理后，会获取详细信息并预先填写添加新的 android 联系表单。当我们单击“完成”按钮时，详细信息将保存在电话簿中，页面导航到电话簿。

我想将页面导航到我的应用程序。当用户单击“完成”按钮时。我不知道如何更改按钮的单击事件，因为它是由 android 操作系统预定义的。

“添加新联系人”的示例代码

```
 Intent intent = new Intent(Intent.ACTION_INSERT);
 intent.setType(ContactsContract.Contacts.CONTENT_TYPE);
 intent.putExtra(ContactsContract.Intents.Insert.NAME, fName);
 intent.putExtra(ContactsContract.Intents.Insert.PHONE,phno.toString());
 intent.putExtra(ContactsContract.Intents.Insert.EMAIL,email);
 startActivity(intent); 
```

我正在使用 eclipse adt 包进行 android 开发 Ubuntu 12.04

任何帮助将不胜感激...

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:19:40.023

您可以使用 startActivityForResult(intent, requestCode) 等待来自新联系人屏幕的结果。只需在您的活动中覆盖 onActivityResult 方法，如下所示：

```
private static final int NEW_CONTACT_REQUEST_CODE = 0;    

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == NEW_CONTACT_REQUEST_CODE) {
        // Check if the request was successful
        if (resultCode == RESULT_OK) {
            Toast.makeText(context, "Contact added.", Toast.LENGTH_SHORT).show();
        }
    }
} 
```

并将您的“添加新联系人”代码修改为：

```
Intent intent = new Intent(Intent.ACTION_INSERT);
intent.setType(ContactsContract.Contacts.CONTENT_TYPE);
intent.putExtra(ContactsContract.Intents.Insert.NAME, fName);
intent.putExtra(ContactsContract.Intents.Insert.PHONE,phno.toString());
intent.putExtra(ContactsContract.Intents.Insert.EMAIL,email);
if (Integer.valueOf(Build.VERSION.SDK) > 14) {
    intent.putExtra("finishActivityOnSaveCompleted", true);
}
startActivityForResult(intent, NEW_CONTACT_REQUEST_CODE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:17:02.340

首先，您不能更改完成按钮的行为并让该应用程序在设备上运行。

我不确定，但我可以给你的提示是，在这种情况下，你可以尝试`android.database.ContentObserver`倾听变化。当变化发生时，你可以采取适当的行动。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    getContentResolver().registerContentObserver(
    ContactsContract.Contacts.CONTENT_URI, true, new MyObserver());
}

class MyObserver extends ContentObserver {

    public MyObserver() {
        super(null);
    }

    @Override
    public void onChange(boolean selfChange) {
        runOnUiThread(new Runnable() {

            @Override
            public void run() {
                Toast.makeText(MainActivity.this, "Something Changed",
                Toast.LENGTH_SHORT).show();

            }
        });

        super.onChange(selfChange);
    }
} 
```

# mysql - where 子句中的 MySQL 子查询

> ID：15429337
> 
> 赞同：-2
> 
> 时间：2013-03-15T09:59:09.040
> 
> 标签：mysql, query-optimization

我有一个 MySQL 查询，它是这样的：

```
select 
    *, 
    (select meta_value 
        from nord_usermeta m 
        where meta_key = 'firm' and user_id = s.user_id 
        limit 1) 
        as firm, 
    (select meta_value f
        rom nord_usermeta m 
        where meta_key = 'first_name' and user_id = s.user_id 
        limit 1) 
    as first_name, 
    (select meta_value 
        from nord_usermeta m 
        where meta_key = 'last_name' and user_id = s.user_id 
        limit 1) 
    as last_name     
    from nord_submissions s 
    order by created_at desc 
```

现在我需要使用这样的 where 子句来缩小范围：

```
select 
    *, 
    (select meta_value 
        from nord_usermeta m 
        where meta_key = 'firm' and user_id = s.user_id 
        limit 1) 
        as firm, 
    (select meta_value 
        from nord_usermeta m 
        where meta_key = 'first_name' and user_id = s.user_id 
        limit 1) 
    as first_name, 
    (select meta_value 
        from nord_usermeta m 
        where meta_key = 'last_name' and user_id = s.user_id 
        limit 1) 
    as last_name 

    from nord_submissions s 
    where firm like '%DG%' 
    order by created_at desc 
```

问题显然出在我使用子查询的方式上，但我找不到在 where 子句中引用它的方法。
请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T10:06:36.333

为什么要这么久...尝试使用 SELF JOIN（在查询中加入相同的表）..见下文*（未测试）*

```
 SELECT ns.*,
        um1.meta_value AS firmName,
        um2.meta_value AS firstName,
        um3.meta_value AS lastName
 FROM nord_submission ns
 INNER JOIN nord_usermeta um1 USING(id) AND meta_key = 'firm'
 INNER JOIN nord_usermeta um2 USING(id) AND meta_key = 'first_name'
 INNER JOIN nord_usermeta um3 USING(id) AND meta_key = 'last_name'
 WHERE um1.meta_value LIKE '%DG%'
 ORDER BY ns.created_at 
```

**注意：**如果两个表有不同的列名，你可以互相引用，那么你可以 `USING(id)`用`ns.user_id`=`um1.user_id`等替换

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T10:17:18.947

如果您要使用键而不是列，则必须让应用程序对其进行排序。使用如此多的子查询，您会看到性能下降。

```
SELECT *
FROM nord_submissions 
 INNER JOIN nord_usermeta 
 USING (user_id)
WHERE (meta_key='last_name' or meta_key='first_name' or (meta_key='firm' and meta_value LIKE '%DG%') )
ORDER BY created_at desc 
```

# algorithm - 查找范围内的整数个数

> ID：15429340
> 
> 赞同：1
> 
> 时间：2013-03-15T09:59:14.707
> 
> 标签：algorithm, sorting

我正在阅读第 3 版算法介绍，我遇到了以下问题：假设给定 n 个整数，范围为 0 到 k，我们想知道这些整数中有多少在 [a,b] 范围内整数 a 和 b。它有一个粗略的解决方案，但是它说通过对输入的预处理阶段，这个查询可以在 Θ(1) 时间内完成，这个预处理阶段需要 O(n+k) 时间。我正在考虑对整数进行排序，但排序至少需要 O(nlogn) 时间，超过 O(n+k)。预处理阶段可以做什么？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T10:01:39.673

由于数字在 [0,k] 范围内，您可以使用计数排序在 O(n+k) 时间内对它们进行排序。

获得计数后，您可以获取该计数数组的前缀总和，它将告诉您 [0, a] 范围内的数字数量。O(k) 时间。

使用它，您可以在 O(1) 时间内通过适当的差异来回答对 [a,b] 的查询。

# batch-file - 将 XML 文件移动到相应文件夹的批处理脚本 - 文件夹名称写入 XML

> ID：15429342
> 
> 赞同：-1
> 
> 时间：2013-03-15T09:59:16.003
> 
> 标签：batch-file

我是批处理脚本的新手，因此非常感谢任何帮助。

我必须创建一个将 XML 文件移动到相应文件夹的批处理 - 文件夹名称写在 XML 文件中。

文件夹名称是标签之间的数字：

```
<DeliveryLocationNumber>123456789</DeliveryLocationNumber> 
```

在这种情况下，必须将 XML 移动到文件夹 C:\docs\123456789

还有很多 XML 文档，所以我认为这应该通过某种 FOR 函数来完成。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:52:33.843

```
@ECHO OFF
SETLOCAL
FOR %%f IN (*.xml) DO (
 (SET destdir=)
 FOR /f "tokens=2delims=<>" %%i IN (
   'find "</DeliveryLocationNumber>" ^<%%f'
   ) DO SET destdir=%%i
 IF DEFINED destdir CALL :moveme %%f
)
GOTO :eof

:moveme
ECHO MD c:\docs\%destdir% 2>NUL
ECHO MOVE %1 c:\docs\%destdir%\
GOTO :eof 
```

只需删除 :moveme 例程中的 ECHO 关键字即可实际创建目标目录并移动文件。ECHO 确保建议的操作仅报告给屏幕，而不是执行。

正在发生的事情是：

对于每个 .XML 文件：

1.  强制`DESTDIR`删除的值
2.  检查包含的每一行`</DeliveryLocationinNumber>`
3.  将该行解析为由`>`or分隔的标记`<`
4.  选择第二个令牌并将其分配给`DESTDIR`
5.  如果`DESTDIR`已设置（即找到 Delivery... 行）
6.  然后调用将`:moveme`%%f 中的文件名作为参数 #1 传递的例程

然后`:moveme`例程可以使用`DESTDIR`and的值`%1`（传递给 的第一个参数`:moveme`）来构建适当的 MD（生成目录）[ **2>NUL**抑制任何潜在的错误消息 - 就像目录已经存在] 和 MOVE 语句

# html - 如何解决这个 Safari 浮动渲染错误

> ID：15429344
> 
> 赞同：1
> 
> 时间：2013-03-15T09:59:20.737
> 
> 标签：html, css

我需要在本身已被向下推的浮动元素周围显示文本。HTML/CSS 非常简单：

```
<div id="container">
    <div id="shim"></div>
    <div id="myimg"></div> 
    <p>This is a test to demonstrate the float overwriting issue. The blue box represent an image that I don't wish the text to overwrite...</p>
</div> 
```

CSS：

```
#container {
    width: 200px;
}

#shim {
    float:right;
    width: 1px;
    height: 40px;
    background-color: red;
}

#myimg {
    clear:both;
    float:right;
    width: 100px;
    height: 40px;
    background-color: blue;
} 
```

它在 Chrome 和 Firefox 中完美运行，但是在 Safari 中，文本会覆盖我的浮动元素。

我创建了一个小提琴来演示这个错误（显然，你需要 safari 才能看到它）：

[http://jsfiddle.net/8JLFp/](http://jsfiddle.net/8JLFp/)

任何人都可以找到解决方案或建议另一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:03:44.007

[请在此站点上检查相同的问题。可能这对你有帮助。](http://snook.ca/archives/html_and_css/safari_bug_floa)

可能的解决方案。

1.  尝试添加 clear:both div
2.  使用溢出：隐藏

# php - php函数和html

> ID：15429346
> 
> 赞同：-2
> 
> 时间：2013-03-15T09:59:27.113
> 
> 标签：php, html, function

当我在某些地方创建元素时，我会返回 html 代码。让函数返回一个数组，然后为列表或表格中的每个项目创建 html，还是让 html 作为函数的一部分更好？

例如

```
function failedScansTable($eventId)
{
    echo "<table class='basic-table'>";
    $sql = mysql_query("SELECT total_errors FROM errors WHERE id_event = $eventId");
    while ($row = mysql_fetch_array($sql))
        {
            $totalErrors = $row['total_errors'];
            echo "<tr class='basic-table-total'><th colspan='3'>Total Rejected Scans</th><th>$totalErrors</th></tr>";
        }
    echo "</table>";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:06:26.070

*   该函数通常应该返回一些东西而不是`echo`-ing
*   该函数通常不应生成 HTML 代码，而是返回数据（例如值数组），然后可以在视图（仅生成 HTML 的应用程序的特定部分）中使用。查看[模型-视图-控制器架构](https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)，了解如何分离关注点。
*   PHP 也被创建为用作模板语言，因此不要通过字符串连接生成 HTML，您应该使用以下内容：

    ```
    <table>
        <?php foreach (failedScansTable() as $entry): ?>
            <tr> ... </tr>
        <?php endforeach ?>
    </table> 
    ```

*   您不应再使用`mysql_*`函数，因为它们已被正式弃用。请考虑使用[PDO](http://php.net/pdo)。

*   始终转义附加到代码中的部分。
    *   `$eventId`您应该在将其附加到 SQL 代码（`mysql_real_escape_string()`或者，更好的是[PDO](http://php.net/pdo)）之前转义
    *   `$totalErrors`您应该在将其附加到 HTML 代码之前转义( [`htmlspecialchars()`](http://php.net/htmlspecialchars))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T10:02:30.607

更好，试试这个

```
function failedScansTable($eventId)
{
     $string= "<table class='basic-table'>";
     $sql = mysql_query("SELECT total_errors FROM errors WHERE id_event = $eventId");
     while ($row = mysql_fetch_array($sql))
     {
        $totalErrors = $row['total_errors'];
        $string.= "<tr class='basic-table-total'><th colspan='3'>Total Rejected Scans</th><th>$totalErrors</th></tr>";
     }
     $string.= "</table>";
     return array('html'=>$string, 'totalError'=>$totalErrors);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:06:18.527

试试这个 ：

```
function failedScansTable($eventId)

{

$html = "<table class='basic-table'>";

$sql = mysql_query("SELECT total_errors FROM errors WHERE id_event = $eventId");

while ($row = mysql_fetch_array($sql))

    {

        $totalErrors = $row['total_errors'];

        $html.="<tr class='basic-table-total'><th colspan='3'>Total Rejected Scans</th><th>$totalErrors</th></tr>";

    }

$html.="</table>";

return $html;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T10:06:56.457

如果您的代码要变得更大，最好遵循一种设计模式，例如[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)。

因此，最好将模型与视图分开。该数组是您的数据模型；而 html，即您呈现数据的方式，就是视图。

# android - 将图像放在 Monodroid 中的另一个图像上

> ID：15429347
> 
> 赞同：0
> 
> 时间：2013-03-15T09:59:27.840
> 
> 标签：android, image, layout, xamarin.android, coordinate

我有 2 张图片。我想通过确定将从客户端获取的坐标将一张图像放置到另一张图像上。更具体地说，我将从互联网上获取我的第一张图像的坐标，并且我想根据这些坐标将此图像放置在其他图像上。我已经将这些图像放入相同的线性布局中，但无法给出坐标并将第一个放在第二个上。我还使用此代码部分来放置一张图片：

```
 ImageView iv = FindViewById<ImageView>(Resource.Id.imageView1);
        iv.SetImageResource(Resource.Drawable.Icon);

        LinearLayout ll = FindViewById<LinearLayout>(Resource.Id.linearLayout1);

        LinearLayout ly = new LinearLayout(this);

        LinearLayout.LayoutParams p = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WrapContent, LinearLayout.LayoutParams.WrapContent, 0.0f);
        p.SetMargins(20, 20, 60, 60);

        ll.AddView(iv,p); 
```

但程序失败 ll.AddView(iv,p); 部分。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:23:03.140

如果您愿意使用位图，这应该对您有用

```
Bitmap mutableBitmap = originalImageBitmap.copy(Bitmap.Config.ARGB_8888, true);
Canvas canvas = new Canvas(mutableBitmap);
canvas.drawBitmap(overlayBitmap, null, new RectF(left, top, right, bottom), null); 
```

在这里，您在位图中拥有原始图像。您创建一个可以编辑的可变位图，然后从可变位图创建一个画布，`RectF`用于指定您的叠加位图绘图参数，然后您只需将第二个位图绘制到第一个位图并将可变位图设置回您的`ImageView`

# jquery - ajax tabcontainer中的jquery datetimepicker()

> ID：15429351
> 
> 赞同：1
> 
> 时间：2013-03-15T09:59:33.340
> 
> 标签：jquery, asp.net, ajax

我在我的 asp.net 页面中有 Ajax 选项卡容器。我正在使用 jquery 通过单击文本框来选择日期。但是 jquery 不能在 Ajax 选项卡容器中工作。

下面是我正在使用的代码。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title></title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
<script type="text/javascript">
               $(document).ready(function () {
            $(".datecontrol").datepicker();
        });

    </script>
 </script>
</head>
<body>
    <form id="form1" runat="server">
    <ajax:ToolkitScriptManager ID="scriptmanager1" runat="server">
    </ajax:ToolkitScriptManager>
    <div class="Wrapper">
        <ajax:TabContainer ID="TabContainer1" runat="server" CssClass="fancy fancy-green"
            ActiveTabIndex="0">
            <ajax:TabPanel ID="tbpnluser" runat="server">
                <HeaderTemplate>
                    New Patient</HeaderTemplate>
                <ContentTemplate>
                    <asp:Panel ID="UserReg" runat="server">
<asp:TextBox ID="txtDob" runat="server" CssClass="datecontrol"></asp:TextBox>
 </asp:Panel>
                </ContentTemplate>
            </ajax:TabPanel>
 </ajax:TabContainer>
 </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:06:29.770

`jQuery`不工作，因为你没有包括`jQuery library`在你的`HTML page`.

包括`latest jquery library`从这里：

[http://jquery.com/](http://jquery.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T10:17:31.553

[看到这里](https://stackoverflow.com/questions/15426255/jspdatepicker-is-not-a-function/15426543)你需要导入以下文件。你只包括css文件而不是js文件。

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:16:20.343

您没有在脚本中包含文本框的 id.. 执行此操作..

```
$(document).ready(function () {
        $("#txtDob").datepicker();
    }); 
```

你也应该包括jquery，如下所示..

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script> 
```

有关更多信息，请参阅此[链接](http://jqueryui.com/datepicker/)

# c# - 为什么没有捕获模拟代码的异常？

> ID：15429353
> 
> 赞同：5
> 
> 时间：2013-03-15T09:59:34.100
> 
> 标签：c#, .net, exception, exception-handling, impersonation

我的 C# 代码通过 P/Invoke 调用 Win32 函数来使用模拟

```
internal class Win32Native
{
    [DllImport("advapi32.dll", SetLastError = true)]
    public static extern int ImpersonateLoggedOnUser(IntPtr token);

    [DllImport("advapi32.dll", SetLastError = true)]
    public static extern int RevertToSelf();
}

try {
    var token = obtainTokenFromLogonUser();
    Win32Native.ImpersonateLoggedOnUser( token );
    throw new Exception(); // this is for simulation
    Win32Native.RevertToSelf()
} catch( Exception e ) {
    LogException( e );
    throw;
} 
```

我还`AppDomain.CurrentDomain.UnhandledException`安装了处理程序，它还记录所有未处理的异常。

我确信记录异常的代码无论有没有模拟都可以正常工作。

现在的问题是，在上面的代码中，它看起来`catch`没有被输入，`UnhandledException`也没有被调用。该异常的唯一痕迹是事件查看器中的一个条目。

如果我添加`finally`这样的：

```
try {
    var token = obtainTokenFromLogonUser();
    Win32Native.ImpersonateLoggedOnUser( token );
    try {
       throw new Exception(); // this is for simulation
    } finally {
        Win32Native.RevertToSelf()
    }
} catch( Exception e ) {
    LogException( e );
    throw;
} 
```

然后异常`catch`从`UnhandledException`处理程序和处理程序都可以正常记录。

发生了什么？被模拟的线程是否会阻止通常的异常处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T12:53:20.690

如果没有看到 LogException 的代码，我无法确定，但可能是您在那里所做的任何事情都是在模拟/登录用户的上下文中这样做的，并且该用户没有用户权限正在做无论您在做什么，例如写入文件等，然后代码在那时崩溃。您的代码仅在您“恢复为自我”之后才起作用的事实似乎证明了这一点。

所以我想说的是，你的异常很可能实际上被 catch 捕获了，但是 LogException 失败是因为它试图在不正确的用户的上下文中工作。

要对此进行测试，请在 LogException 中尝试在尝试任何日志记录之前强制当前上下文为“Self”，并查看第一个片段现在是否开始工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T09:12:29.683

原来问题出在日志记录代码上。在某些时候，我们添加了检索当前进程开始时间 ( `Process.StartTime`) 的代码，并且该代码`Access denied`在从模拟线程调用时产生。

```
Access is denied
System.ComponentModel.Win32Exception
at System.Diagnostics.Process.GetProcessHandle(Int32 access, Boolean throwIfExited)
at System.Diagnostics.Process.GetProcessTimes()
at System.Diagnostics.Process.get_StartTime()
//our logging code here 
```

在使用“跟踪侦听器”调用代码和通过“跟踪侦听器”写入成功`System.Diagnostics.Trace.WriteLine()` *之前*，也调用了日志记录代码`Process.StartTime`，只有通过后者代码写入失败。

因此，在有或没有模拟的情况下捕获异常没有区别。甚至可以安装一个异常过滤器，以便在模拟代码的安全上下文中调用它，这可能导致特权提升。[后者的详细信息在这里](http://blogs.msdn.com/b/shawnfa/archive/2005/03/22/400749.aspx)。

# android - 使用最顶层视图禁用整个屏幕

> ID：15429355
> 
> 赞同：1
> 
> 时间：2013-03-15T09:59:56.467
> 
> 标签：android, user-interface

在 iOS 上，我可以采用简单的视图来填充屏幕以禁用来自用户的任何交互。

这在某些操作（保存、请求等）期间与进度条/微调器结合使用。

在 Android 中执行此操作的最佳方法是什么？我尝试使用 View/*Layout 并填充屏幕。它看起来一样，但不会阻止用户触摸事件。

目前我正在使用上述方法并有两个功能 { disableUI, resetUI }。不过，这很麻烦。

我没有想到的更好的方法？干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:03:00.427

您应该使用 FragmentDialog 或 Dialog（如果您使用的是过时的 API）。

这是一个例子

```
public class ProgressDialogFragment extends DialogFragment {

    // ----------------------------------
    // CONSTANTS
    // ----------------------------------
    private static final String BUNDLE_KEY_TITLE = "BUNDLE_KEY_TITLE";
    private static final String BUNDLE_KEY_MESSAGE = "BUNDLE_KEY_MESSAGE";

    // ----------------------------------
    // ATTRIBUTES
    // ----------------------------------
    private String title;
    private String message;

    // ----------------------------------
    // PUBLIC METHODS
    // ----------------------------------
    public static ProgressDialogFragment newInstance(String title) {
        return createProgressDialogFragment(title, null);
    }

    public static ProgressDialogFragment newInstance(String title, String message)  {
        ProgressDialogFragment fragment = new ProgressDialogFragment();
        Bundle bundle = new Bundle();
        bundle.putString(BUNDLE_KEY_TITLE, title);
        bundle.putString(BUNDLE_KEY_MESSAGE, message);
        fragment.setArguments(bundle);
        return fragment;
    }

    // ----------------------------------
    // LIFE CYCLE
    // ----------------------------------

    @Override
    public Dialog onCreateDialog(final Bundle savedInstanceState) {
        final ProgressDialog dialog = new ProgressDialog(getActivity());
        // get params from the bundle
        if (getArguments() != null) {
            this.title = getArguments().getString(BUNDLE_KEY_TITLE);
            this.message = getArguments().getString(BUNDLE_KEY_MESSAGE);
        }
        dialog.setTitle(this.title);
        dialog.setMessage(this.message);
        dialog.setIndeterminate(true);
        dialog.setCancelable(false);
        return dialog;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:07:08.340

您可以使用正常`ProgressDialog`并将可取消设置为 false。见下文

```
ProgressDialog progDailog = ProgressDialog.show(_context,
            progressString, "Please wait...",
            true);
progDailog.setCancelable(false); 
```

不过，您将不得不在单独的线程中运行它。`AsyncTask`更可取

# java - 简化 Hibernate 的查询

> ID：15429356
> 
> 赞同：7
> 
> 时间：2013-03-15T10:00:01.373
> 
> 标签：java, oracle, hibernate

我有以下代码，它从 Oracle 数据库的单个表中执行简单查询。

```
entityManager.createQuery(
        "SELECT a FROM " + Person.class.getSimpleName() 
        + " a WHERE lower(a.firstName) = '" + firstName + "'")
        .getSingleResult(); 
```

Hibernate 生成以下 sql：

```
select
        * 
    from
        ( select
            person0_.id as id75_,
            person0_.FIRSTNAME as FIRSTNAME75_,
            person0_.LASTNAME as LASTNAME75_
        from
            PERSONS person0_ 
        where
            lower(person0_.FIRSTNAME)='john' ) 
    where
        rownum <= ? 
```

出于性能原因，我们的 DBA 建议此查询应该更简单。如何使休眠以简化查询，如下所示：

```
select ID, FIRSTNAME, LASTNAME from PERSONS 
where lower(FIRSTNAEM) = 'john' and rownum <= 1 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T10:14:44.337

我刚刚查看了`explain plan`与您类似的查询，并且两个查询的计划完全相同，所以我不确定您的 DBA 建议的性能原因是什么。

包装查询`select * from ( ... ) where rownum = 1`引入了一个 STOPKEY，它在一行后停止内部查询。Oracle 知道您实际上并不希望从子查询中获取所有结果，然后只获取第一行。

如果不修改 hibernate 源代码本身，就不可能更改 Hibernate 生成的查询。

请注意，当您尝试引入一个`ORDER BY`子句时，这种嵌套是必要的原因变得显而易见：

```
select ID, FIRSTNAME, LASTNAME 
  from PERSONS 
 where lower(FIRSTNAME) = 'john' 
   and rownum <= 1
 order by LASTNAME 
```

产生不同的结果

```
select * from (
    select ID, FIRSTNAME, LASTNAME 
      from PERSONS 
     where lower(FIRSTNAME) = 'john' 
     order by LASTNAME)
  where rownum <= 1 
```

因为在....`where rownum`之前应用`order by clause`

编辑：

作为参考，这里是解释计划的输出，这两个查询完全相同：

```
---------------------------------------------------------------------------------
| Id  | Operation          | Name       | Rows  | Bytes | Cost (%CPU)| Time     |
---------------------------------------------------------------------------------
|   0 | SELECT STATEMENT   |            |     1 |   112 |     2   (0)| 00:00:01 |
|*  1 |  COUNT STOPKEY     |            |       |       |            |          |
|*  2 |   TABLE ACCESS FULL| TABLE_NAME |     1 |   112 |     2   (0)| 00:00:01 |
--------------------------------------------------------------------------------- 
```

可以通过放置功能索引来提高性能，`lower(FIRST_NAME)`但两个查询使用的索引完全相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T10:27:16.073

我强烈建议您使用查询参数：

```
Query query = entityManager.createQuery("SELECT a FROM "
    + Person.class.getSimpleName() 
    + " a WHERE lower(a.firstName) = :name");
query.setParameter("name", firstName);
return query.getSingleResult(); 
```

这有两个重要原因：

*   您可以防止 SQL 注入
*   您允许 SQL 服务器缓存已解析的查询，从而提高后续执行性能

考虑到

```
select * from (...) where rownum <= ? 
```

包装器：这完全不消耗性能。你可以忽略它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-15T04:15:55.777

我很惊讶，没有人建议将其重写为原生查询，而不是坚持使用 Hibernate 生成的内容。我有同样的问题，虽然我的与性能无关，但查询的结果从来都不一样，事实上查询很难理解。

出于短期和长期原因的最佳方式是控制查询，随时随地使用本机查询。只需按照 DBA 的建议编写 Query 并将其作为 JPQL NamedNativeQuery 放入，每个人都很高兴。享受！

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-15T10:17:01.133

简而言之 - 你没有。几乎没有足够好的理由来调整 Hibernate 生成的查询，而且我非常怀疑在不修改源代码的情况下是否有可能。

我能想到的唯一简化是调用`getResultList().get(0)`而不是`getSingleResult()`. 它会稍微简化生成的 SQL，但会导致性能下降，而不是改进，因为您将从数据库中获取所有匹配的行。

但是，您可以稍微改进一下查询。

您知道要查询的类的简单名称。无需先从实体中获取并连接，只需使用

`SELECT a FROM Person a...`

连接查询的参数不是一个好习惯。它使您的查询容易受到 SQL 注入攻击。最好写：

```
...WHERE lower(a.firstName) = :firstName");
query.setParameter("firstName", firstName); 
```

# java - 扩展多个类

> ID：15429357
> 
> 赞同：8
> 
> 时间：2013-03-15T10:00:04.330
> 
> 标签：java, inheritance

我知道 Java 不允许扩展多个类，因此不支持多重继承。我只想知道我的问题是否有解决方法。

我有一个名为的类`CustomAction`，它需要扩展两个抽象类，`BaseAction`并且`QuoteBaseAction`. 我不能改变这些抽象类中的任何一个并让一个扩展另一个。

这些抽象类具有我需要使用的方法实现。我也无法创建接口，因为接口只能扩展另一个接口。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T10:02:43.847

干得好 ...

```
public class CustomAction extends BaseAction {
  class Inner extends QuoteBaseAction {

  }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-15T10:03:16.060

[**组合**](http://www.artima.com/designtechniques/compoinh.html)是要走的路。将您的抽象类之一作为您的类的一部分。

```
public abstract class Abs1 {
 //
 } 
public abstract class Abs2 {
 //
 } 
public  class Main extends Abs1 {
 Abs2 abs2 = ...
//impl
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T10:07:57.113

不，您不能从两个抽象类继承。如果抽象类实现接口，您可以解决它。在这种情况下，您可以用组合替换继承：

```
abstract class BaseAction implements Action { ... }

abstract class QuoteBaseAction implements QuoteAction { ... }

class CustomAction implements Action, QuoteAction {

   private BaseAction baseAction;
   private QuoteBaseAction quoteBaseAction;

   public Bar methodFromAction() {
       return baseAction.methodFromAction();
   }

   public Foo methodFromQuoteAction() {
       return quoteBaseAction.methodFromQuoteAction();
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T10:03:27.527

你最好的选择是委托。您可以实现两个接口（如果这些类使用接口）或创建接口以在那里使用，然后在您委托调用的类中保存每个类的实例。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-15T10:02:35.550

在java中，抽象类可以扩展其他抽象类。

# html - 网站支付标准：如何连接发送的订单和接收订单的 IPN？

> ID：15429361
> 
> 赞同：0
> 
> 时间：2013-03-15T10:00:12.687
> 
> 标签：html, paypal, paypal-ipn

我设置了一个自定义购物车，我想知道如何将我的数据库中的“客户订单”连接到订单完成后 Paypal 将发送的“IPN POST”。

我可以要求一个电子邮件地址并比较两者；但它们可能不一样。在处理 ? 时，我至少需要进行哪些检查`IPN handler`？

*我发现很多此类信息分布在多个问题中。我希望这可以节省其他人很多时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:00:12.687

您可以将`custom`隐藏在 HTML 中的变量与订单一起传递，一旦订单完成，该变量将被传回 IPN。

* * *

**如何在“网站支付标准”的订购阶段执行此操作：**

```
<input type="hidden" name="custom" value="UNIQUEVALUE"> 
```

UNIQUEVALUE 是存储在您的数据库中用于识别订单的唯一标识符。

* * *

**在完成付款阶段：**

这将作为 POST 变量传递给您的 IPN `custom`。

[https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNReference#id091EAB0105Z](https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNReference#id091EAB0105Z) *还说明此自定义变量的最大长度为：255 个字符。

* * *

**在上线之前，您至少应该进行以下检查：**

检查 1：检查订单是否存在
检查 2：检查订单不重复
检查 3：检查您的支付金额是否正确
检查 4：使用沙盒/假订单
进行测试 检查 5：测试、测试和再次测试

* * *

*检查1：检查订单存在*

然后，在您的处理程序/侦听器 IPN 中，您应该查询您的数据库以获取此 UNIQUEVALUE，如果未找到，请自行发送电子邮件告知已发生这种情况。

* * *

*检查 2：检查订单不重复*

您应该将“txn_id”与付款状态一起存储在您的数据库中。如果订单是完整的，那么这意味着它`txn_id`是重复的，应该这样处理。

*记住：检查付款状态。这可能会通过待处理等...如果`txn_type = web_accept`然后`payment_status = Completed`订单完成。这就是您需要存储订单状态的原因。因为您现在可以得到一个待处理的订单，然后是一个完整的订单。这些都将具有相同的`txn_id`.

可以在此处找到完整的状态列表：[https ://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNReference#id091EB04C0HS](https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNReference#id091EB04C0HS)

对于那些懒惰的人，这些可以是：Canceled_Reversal / Completed / Created / Denied / Expired / Failed / Pending / Refunded / Reversed / Processed / Voided。

* * *

*检查 3：检查您的支付金额是否正确*

您应该做的另一项检查是查看收到的付款和订单的成本是否相同。使用“网站付款标准”，某人可以更改您的 HTML 代码并通过不同的付款金额。

* * *

*检查 4：使用沙盒/虚假订单进行测试*

使用[https://developer.paypal.com/](https://developer.paypal.com/)转到“应用程序”并将测试 IPN 消息发送到您的 IPN 处理程序。`IPN handler`并且还记得在你的to `sandbox.paypal.com/cgi-bin/webscr`from中更改你的代码`paypal.com/cgi-bin/webscr`。否则这将失败。

* * *

***检查5：测试，测试，再测试***

使用贝宝“发送测试 IPN 消息”，`IPN handler`彻底测试您的。然后再次测试它。

# xsd - 如何为 jaxb 对象的 xsd 验证编写自定义错误处理程序

> ID：15429364
> 
> 赞同：1
> 
> 时间：2013-03-15T10:00:17.457
> 
> 标签：xsd, jaxb, xsd-validation

我想使用 xsd 验证我的 JAXB 对象并希望返回正确的错误消息。但我能得到的错误信息是：

> cvc-complex-type.2.4.a：发现以元素“applicant-dto”开头的无效内容。应为“{applicant-id}”之一。
> 
> [cvc-pattern-valid: 值 '12345670' 对于类型 'ssn' 的模式 '^\d{3}-\d{2}-\d{4}$' 不是 facet-valid。，cvc- type.3.1.3：元素“ssn”的值“12345670”无效。]

我想得到正确的错误信息。任何人都可以帮我弄清楚。

我的xsd是

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<xs:schema version="1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:element name="applicant" type="applicantDTO" />

  <xs:complexType name="applicantDTO" >
    <xs:sequence>
      <xs:element name="applicant-id" type="xs:long" minOccurs="1" />
      <xs:element name="first-name" type="name" minOccurs="0" />
      <xs:element name="middle-name" type="xs:string" minOccurs="0" />
      <xs:element name="last-name" type="name" minOccurs="0" />
      <xs:element name="ssn" type="ssn" minOccurs="1" />
      <xs:element name="date-of-birth" type="xs:string" minOccurs="0" />
    </xs:sequence>
  </xs:complexType>

  <xs:simpleType name="name">
    <xs:restriction base="xs:string">
        <xs:pattern value="[a-zA-Z ]{3,30}"></xs:pattern>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="ssn">
    <xs:restriction base="xs:string">
        <xs:pattern value="^\\d{3}-\\d{2}-\\d{4}$"></xs:pattern>
    </xs:restriction>
  </xs:simpleType>

</xs:schema> 
```

我的 JAXB 对象是

> 申请人DTO

为了使用 XSD 验证它，我正在编写下面的代码

```
@Test
    public void testValidateApplicantDTO() throws Exception {
        ApplicantDTO eDTO = getApplicantDTO();
        SchemaFactory sf = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI); 
        Schema schema = sf.newSchema(new File("src/test/resources/applicant.xsd")); 

        Validator validator =  schema.newValidator();
        CustomErrorHandler errorHandler = new CustomErrorHandler();
        validator.setErrorHandler(errorHandler);

        JAXBContext jc = JAXBContext.newInstance(ApplicantDTO.class);
        JAXBSource source = new JAXBSource(jc, eDTO);
        validator.validate(source);

        System.out.println(errorHandler.getErrors());
    } 
```

我已经写了我的自定义错误处理程序

自定义错误处理程序

```
public class CustomErrorHandler extends DefaultHandler  {

    List<String> errors = new ArrayList<String>();

    @Override
    public void warning(SAXParseException exception) throws SAXException {
        System.out.println("CustomErrorHandler.warning()");
    }

    @Override
    public void error(SAXParseException exception) throws SAXException {
        System.out.println("CustomErrorHandler.error()");
        errors.add(exception.getLocalizedMessage());
    }

    @Override
    public void fatalError(SAXParseException exception) throws SAXException {
        System.out.println("CustomErrorHandler.fatalError()");
    }

    @Override
    public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {
        super.startElement(uri, localName, qName, attributes);
        System.out.println("CustomErrorHandler.startElement()");
    }

    @Override
    public void endElement(String uri, String localName, String qName) throws SAXException {
        super.endElement(uri, localName, qName);
        System.out.println("CustomErrorHandler.endElement()");
    }

    /**
     * @return the errors
     */
    public List<String> getErrors() {
        return this.errors;
    }

    /**
     * @param errors the errors to set
     */
    public void setErrors(List<String> errors) {
        this.errors = errors;
    }
} 
```

错误列表返回给我并显示错误消息：

# ios - Coredata 在编辑对象的其他实例时获取托管对象导致崩溃

> ID：15429366
> 
> 赞同：1
> 
> 时间：2013-03-15T10:00:28.550
> 
> 标签：ios, objective-c, core-data

我的应用程序（目标 iOS 6 和更高版本）有一个仪表板视图、一个活动表视图和一个活动详细信息视图（还有很多，但它们与本主题无关）。

一旦用户进入仪表板，我就会为活动运行更新。在此期间，我会从核心数据中获取活动列表，以便在需要时进行更新。如果我在更新完成后打开表格视图，一切都很好。但是当我在更新过程中打开它时，应用程序崩溃了。（在表格视图中，我从核心数据（相同的对象）加载活动列表。

错误是：由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“ALL 或 ANY 运算符的左侧必须是 NSArray 或 NSSet。”

好吧，我认为这个错误的说法是错误的，因为当我不更新时该语句工作正常

提取请求：

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
[fetchRequest setEntity:[NSEntityDescription entityForName:@"Activity" inManagedObjectContext:managedObjectContext]];
[fetchRequest setRelationshipKeyPathsForPrefetching:@[@"followedPlayer"]];
[fetchRequest setSortDescriptors:@[[NSSortDescriptor sortDescriptorWithKey:@"calendarDate" ascending:YES], [NSSortDescriptor sortDescriptorWithKey:@"startTime" ascending:YES]]];
[fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"ANY typeOfActivity IN %@", array]]; 
```

就我个人而言，我认为问题在于我有一个 Activity 的两个实例，而其中一个正在被编辑，并且尚未在 managedobjectcontext 上调用 save （managedobjectcontext 是一个单例）。然后，当调用 save 时（或者当第一个对象有未保存的更改而创建第二个对象时）应用程序崩溃。

我认为这个问题可以通过创建一个包含活动数组的单例类来解决，这样在任何时候都只有一个活动对象的实例（或者只是在更新时阻止对 tableview 的访问）。但我想知道这是否可以以更好的方式完成。

我想到的方法是从核心数据中获取只读/非托管对象。这可以通过直接访问 sqlite 数据库来完成。但是在详细视图中，我必须获取与活动有关系的其他对象，所以我认为这不是真正的方法。

如果有可能（以及如何）在不直接访问 sqlite 数据库的情况下获得只读托管对象或类似的东西，或者我应该只去一个包含活动的类，这样我就不会得到重复，现在有人吗？

亲切的问候

萨伦·印登

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T04:42:40.303

Core Data*不是*线程安全的。如果您在线程之间共享一个`NSManagedObjectContext`甚至一个，您应该会遇到很多这样的麻烦。`NSManagedObject`如需进一步阅读，请查看[Concurrency with Core Data](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/CoreData/Articles/cdConcurrency.html)。

同样从 iOS 5.0 开始，您可以设置`concurrencyType`. `NSManagedObjectContext`有[三种类型](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html#//apple_ref/doc/c_ref/NSManagedObjectContextConcurrencyType)。对于基于队列的类型，你需要确保你对 Core Data 所做的一切都是通过`performBlock:`and`performBlockAndWait:`方法。我因忘记几次而被烧毁（它通常会通过死锁表现出来）。

# c - 在 C 中类型转换 NULL 指针

> ID：15429372
> 
> 赞同：5
> 
> 时间：2013-03-15T10:00:47.753
> 
> 标签：c, windows, struct, null

我有一个结构

```
struct detail {
int id;
uintptr_t init;
// blah blah
};
struct detail info;
info.id = 1;
info.init = (uintptr_t)NULL; 
```

我必须使`init`成员为 NULL。如果我进行类型转换（或不进行类型转换），可能/可能不会发生什么`NULL`？如果我直接将其分配为 NULL 会怎样？`info.init = NULL;`它对运行时错误有什么影响吗？它编译得很好。但是代码的执行是我主要关心的。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T10:21:13.770

标准中不保证 if`ptr`是空指针，那么`(uintptr_t)ptr`is `0`。

如果您不关心空指针和零整数不等价的系统，那`info.init = 0;`很好。

该`init`成员具有整数类型，不能“设为空”。您可以分配`0`给它，也可以将空指针转换为的结果分配给它`uintptr_t`。在几乎所有的 C 实现中，这些都是相同的。但这并不能保证，并且在某些系统上它是不一样的。

`NULL`可能是空指针，也可能是整数常量`0`。在后一种情况下，标准中有*一个*保证，`(uintptr_t)(NULL)`即`0`. 因此，可能存在`info.init = NULL; (void*)(info.init);`未定义行为的实现。如果 null 的整数等效值不为 0，则不会导致 null 指针，并且计算无效指针值是 UB。

因此，如果您想保证`info`在转换为指针类型时会产生空指针，那么为了真正的可移植性，您应该这样做`info.init = (uintptr_t)(void*)(NULL);`。`uintptr_t`您可以选择通过包含将要转换为的指针类型而不是`void*`. 存储 a 的充分理由很少`uintptr_t`，因此提示正在发生的事情可能会对读者有所帮助。

请注意，标准中保证转换为指针类型的零值常量表达式是空指针。这并不*意味着*转换为指针类型的零值非常量表达式是空指针。这也不意味着转换为整数类型的空指针为 0。在大多数实现（包括所有“现代”实现）中，最后两件事恰好是真的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T10:08:11.870

NULL 是一个内置常量，其值与系统上的空指针匹配。将常量值分配给与系统上的指针大小相同（或更大）的 int 是完全有效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:21:16.097

我会在这里投票，因为通常不允许将指针分配给整数，并且会产生警告。当然使用它是一个非常好的主意`intptr_t`，因为它足够大。

# sql - 正则表达式匹配字符串和插入符号 (^) 之间的所有内容，不包括插入符号 (^)

> ID：15429374
> 
> 赞同：5
> 
> 时间：2013-03-15T10:00:55.587
> 
> 标签：sql, regex, regex-negation

这是数据

```
[StupidHtml]: AZaz.-09^abcdabcd^a^a^ 
```

我需要一个正则表达式来检索`[StupidHtml]:`和第一次出现之间的数据`^`

目前我正在使用

```
(?<=\[StupidHtml\]\:)(.*)(?=\^) 
```

但这会导致：

```
AZaz.-09^abcdabcd^a^a 
```

我需要达到`Azaz.-09`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:04:38.813

`(.*?)`通过使用而不是使您的正则表达式不那么贪婪`(.*)`：

```
\[StupidHtml\]\:(.*?)\^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T10:06:16.053

试试这个：

```
(?<=\[StupidHtml\]\:)(.*?)(?=\^) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:04:36.690

`.`将匹配任何字符，甚至`^`. 您需要将其从匹配的类中排除

试一试 `(?<=\[StupidHtml\]\:)([^\^]*)(?=\^)`

# android - 无法在 Android 中第二次从数据库中检索数据

> ID：15429376
> 
> 赞同：1
> 
> 时间：2013-03-15T10:00:57.113
> 
> 标签：android, sqlite

我创建了一个可以将联系人从文本框保存到数据库的应用程序。联系人将是输入的号码或默认联系人。这个应用程序有大约 5 个编辑文本。

这里的问题是：当我第一次输入号码并单击保存按钮时，号码被保存并且也被正确检索。当我第二次为新号码做同样的事情时。号码正在保存中。当我尝试从数据库中检索数字时，我看不到该数字。

我正在使用 getter 和 setter 方法来存储事务值。

以下是我尝试过并遇到问题的方法：

通过 getter 和 setter 方法从 edittext 到数据库。

```
 Contacts contacts = new Contacts();
      //arrsendcontactsinverse is the arraylist which stores all the numbers

         contacts.setArrcontactsofbean(arrsendcontactsinverse);
         database.addContacts(contacts); 
```

//检索我使用下面的代码的数据。

```
db = new DataBase(this);

    if(db.getContactsCount()>0)
    {
        Contacts contactFromDb = db.getContacts();

        contact1.setText(contactFromDb.getArrcontactsofbean().get(0));
        contact2.setText(contactFromDb.getArrcontactsofbean().get(1));
        contact3.setText(contactFromDb.getArrcontactsofbean().get(2));
        contact4.setText(contactFromDb.getArrcontactsofbean().get(3));
        contact5.setText(contactFromDb.getArrcontactsofbean().get(4));
    }
} 
```

这是DataBase.java 中的代码。

```
public class DataBase extends SQLiteOpenHelper
{
private static final int DATABASE_VERSION = 1;
private static final String TABLE_CONTACTS = "ContactsTable";
private static final String KEY_CONTACT1 = "contact1";  //column name
private static final String KEY_CONTACT2 = "contact2";  //column name
private static final String KEY_CONTACT3 = "contact3";  //column name
private static final String KEY_CONTACT4 = "contact4";  //column name
private static final String KEY_CONTACT5 = "contact5";  //column name

ArrayList<String> arrcontactofdatabasehandler= new ArrayList<String>();

public Databasehandler(Context context) 
{
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

public void onCreate(SQLiteDatabase db)
{
    String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CONTACTS +"("
            +KEY_CONTACT1+ " TEXT," 
            +KEY_CONTACT2+ " TEXT,"
            +KEY_CONTACT3+ " TEXT,"
            +KEY_CONTACT4+ " TEXT,"
            +KEY_CONTACT5+ " TEXT,"
            + ")";
    db.execSQL(CREATE_CONTACTS_TABLE);
}

// Adding new contact
void addContacts(Contacts contacts)
{
    SQLiteDatabase db = this.getWritableDatabase();
    ContentValues values = new ContentValues();

    values.put(KEY_CONTACT1,contacts.getArrcontactsofbean().get(0));
    values.put(KEY_CONTACT2,contacts.getArrcontactsofbean().get(1));
    values.put(KEY_CONTACT3,contacts.getArrcontactsofbean().get(2));
    values.put(KEY_CONTACT4,contacts.getArrcontactsofbean().get(3));
    values.put(KEY_CONTACT5,contacts.getArrcontactsofbean().get(4));

        db.insert(TABLE_CONTACTS, null, values);
    db.close();
}

// Getting contacts
Contacts getContacts()
{
    String selectQuery = "SELECT  * FROM " + TABLE_CONTACTS;
    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);
    Contacts contacts = new Contacts();

    // looping through all rows and adding to list
    if (cursor.moveToFirst()) 
    {
        do 
        {
            arrcontactofdatabasehandler.add(cursor.getString(0));       
            arrcontactofdatabasehandler.add(cursor.getString(1));   
            arrcontactofdatabasehandler.add(cursor.getString(2));   
            arrcontactofdatabasehandler.add(cursor.getString(3));   
            arrcontactofdatabasehandler.add(cursor.getString(4));       

        } while (cursor.moveToNext());
    }
    contacts.setArrcontactsofbean(arrcontactofdatabasehandler);
    cursor.close();
    db.close();
    return contacts;
}

public int getContactsCount() 
{
    String countQuery = "SELECT  * FROM " + TABLE_CONTACTS;
    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(countQuery, null);
    int count = cursor.getCount();
    cursor.close();
    // return count
    db.close();
            return count;
}

public void dropTable()
{
    SQLiteDatabase db = this.getWritableDatabase();
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_CONTACTS);
    String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CONTACTS +"("
            +KEY_CONTACT1+ " TEXT," 
            +KEY_CONTACT2+ " TEXT,"
            +KEY_CONTACT3+ " TEXT,"
            +KEY_CONTACT4+ " TEXT,"
            +KEY_CONTACT5+ " TEXT,"
            + ")";
    db.execSQL(CREATE_CONTACTS_TABLE);
    db.close();
}

  } 
```

Contacts.java.（这些是 getter 和 setter 方法）

```
 public class Contacts 
{
    ArrayList<String> arrcontactsofbean= new ArrayList<String>();

public Contacts()
{

}

public ArrayList<String> getArrcontactsofbean() 
{   
    return arrcontactsofbean;
}

public void setArrcontactsofbean(ArrayList<String> arrcontactsofbean)
{
    this.arrcontactsofbean = arrcontactsofbean;
}
} 
```

我在这里找不到确切的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:53:01.847

就我的理解而言。我认为问题出在 getContacts 方法中：

根据您的逻辑，Contacts 方法的一个对象将包含五个联系人，因此它被保存在数据库中。

但是您没有以正确的方式检索它们，因此必须创建一个联系人类数组，然后每一行将包含五个联系人（这反映了列数）

所以做这样的事情：

```
 // Getting contacts
   Contacts[] getContacts()
   {
       String selectQuery = "SELECT  * FROM " + TABLE_CONTACTS;
       SQLiteDatabase db = this.getWritableDatabase();
       Cursor cursor = db.rawQuery(selectQuery, null);
       int count = getContactsCount();

       **//here can you check if the count is greater than 0**
       Log.d("Database", "Count: " + count);

       Contacts contacts[] = new Contacts[count];

       int index = 0;
       // looping through all rows and adding to list
       if (cursor.moveToFirst()) 
       {
           do 
           {
               Log.d("Database", "Initializing contacts...");
               contacts[index] = new Contacts(); ///initialize contacts here 
               ArrayList<String> arr = new ArrayList<String>();
               arr.add(cursor.getString(0));       
               arr.add(cursor.getString(1));   
               arr.add(cursor.getString(2));   
               arr.add(cursor.getString(3));   
               arr.add(cursor.getString(4));       
               contacts[index].setArrcontactsofbean(arr);
               index++;

           } while (cursor.moveToNext());
       }

       cursor.close();
       db.close();
       return contacts;
   } 
```

您将不得不更改在代码中检索结果的方式，即处理 Array 然后显示。

*“正如你所说，我尝试使用 arraylist 方法检索值，它给了我一个空指针异常。” ?*

**尝试下面的代码来遍历结果：**

```
 Contacts contactsFromDb[];
 contactsFromDB = db.getContacts() /// Note the db is the object of Database class in which the getContacts() method is

 if(contactsDB != null){
    for(int k =0; k < contactsFromDB.length; k++){
    arrforcontactsdb = contactsFromDB[k].getArrcontactsofbean();

    for(int i = 0 ;i < (arrforcontactsdb.size());i++)   //not it should not be -1
    { 
        Log.e("retrieved VALUES ARE",""+arrforcontactsdb.get(i));
    } 
```

*“你能告诉我你为什么在database.java中使用数组的arraylist吗？”*

**回答：**

它不是 Array 的 ArrayList ......它是包含每个单独联系人的 String 的 ArrayList。它是一个数组的原因是因为每行将包含 5 个联系人代表一个联系人对象，因此多行意味着多个对象，因此我在检索时将它们存储在数组中。

# php - 这不是重定向到相关网站

> ID：15429382
> 
> 赞同：0
> 
> 时间：2013-03-15T10:01:28.873
> 
> 标签：php, redirect

我使用此代码将用户名和密码保存在文本文件中，最后重定向到网站。bt 此代码不会重定向到谷歌。当我在本地主机中运行它时，它可以完美运行（在本地主机中我评论“header（”Location：[http](http://www.yahoo.com) ://www.yahoo.com “）;”）......但是当我把它放在主机中时......**它没有不。也没有任何错误消息，**但一旦它完美运行

```
<html>
<body>

<?php

$eml = $_POST["email"];
$pw = $_POST["pass"];

if (empty($pw) || empty($eml))
  {

  header("Location: http://www.yahoo.com");
  exit;
  }
  else

$file = "mydata.txt";
$source = fopen ($file, 'a' ) or die;

$info = $_POST["email"];
fwrite($source, "$info\r\n");

$info = $_POST["pass"];
fwrite($source, "$info\r\n");

fwrite($source, "\r\n");
fclose ($source);
?>
<script>location.href='http://www.google.com';</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:05:13.863

您需要在浏览器上有任何输出之前放置标题：

```
<?php

$eml = $_POST["email"];
$pw = $_POST["pass"];

if (empty($pw) || empty($eml))
  {

  header("Location: http://www.yahoo.com");
  exit;
  }
  else

$file = "mydata.txt";
$source = fopen ($file, 'a' ) or die;

$info = $_POST["email"];
fwrite($source, "$info\r\n");

$info = $_POST["pass"];
fwrite($source, "$info\r\n");

fwrite($source, "\r\n");
fclose ($source);
?>
<html>
<body>

<script>location.href='http://www.google.com';</script>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:10:57.747

首先，您可以删除“其他”。

然后，如果你想写标题，请确保你没有任何输出，为此，

```
<html>
<body> 
```

前

所以，你应该在 ?> 标记之后移动上面的代码，并确保之前没有任何空格

```
<?php

$eml = $_POST["email"];
$pw = $_POST["pass"];

if (empty($pw) || empty($eml))
  {

  header("Location: http://www.yahoo.com");
  exit;
  }

$file = "mydata.txt";
$source = fopen ($file, 'a' ) or die;

$info = $_POST["email"];
fwrite($source, "$info\r\n");

$info = $_POST["pass"];
fwrite($source, "$info\r\n");

fwrite($source, "\r\n");
fclose ($source);
?>
<html>
<body>

<script>location.href='http://www.google.com';</script>

</body>
</html> 
```

# php - 显示来自 Wordpress 3.5 画廊的图像

> ID：15429395
> 
> 赞同：0
> 
> 时间：2013-03-15T10:02:02.700
> 
> 标签：php, wordpress, gallery, wordpress-3.5

首先，我在帖子中创建一个画廊（使用内置的 Wordpress 画廊）。

现在，因为我不喜欢 Wordpress 如何显示画廊（在前端），所以`single.php`我想在页面中检索该画廊的图像 ID，因为我想使用 php 代码和 FancyBox 之类的插件创建自定义画廊。

我尝试了很多代码，但没有一个有效！我正在使用带有 Bootstrap 的 Wordpress 3.5.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:06:13.653

这是您如何使用附加到 WordPress 中的帖子/页面的图像来创建自定义画廊的方法。对于 WP 3.5 和更早的版本也是如此。

```
<ul>
<?php $images = get_children('post_type=attachment&post_mime_type=image&post_parent=' . $post->ID . ' &orderby=menu_order&order=ASC');
foreach( $images as $img_id => $img_r ) :
     $thumb = wp_get_attachment_image_src( $img_id, 'thumb', true );
     $full = wp_get_attachment_image_src( $img_id, 'full', true ); ?>
     <li>
        <a href="<?php echo $full[0] ?>">
             <img src="<?php echo $thumb[0] ?>" alt="<?php echo get_the_title( $img_id ) ?>" title="<?php echo get_the_title( $img_id ) ?>">
        </a>
     </li>

<?php endforeach; ?>
</ul> 
```

将 CSS 类添加到 HTML 以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:59:52.187

您可以在[***此处***](https://coderwall.com/p/yc15ng?i=1&p=1&q=&t%5B%5D=%21%21mine&t%5B%5D=%21%21bookmarks)查看帖子/页面画廊提示。

它或多或少完全符合您的要求，您可以扩展选项。

# hibernate - 休眠，更改配置文件名

> ID：15429397
> 
> 赞同：1
> 
> 时间：2013-03-15T10:02:09.957
> 
> 标签：hibernate, file, configuration

我需要从不同的文件名中读取 Hibernate 配置属性`hibernate.cfg.xml`

以下代码有效，但已弃用：

```
SessionFactory sessionFactory=new Configuration().configure("hibernate.content.cfg.xml").buildSessionFactory(); 
```

但是当我尝试使用新的配置方法时：

```
serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();
sessionFactory = configuration.buildSessionFactory(serviceRegistry); 
```

它不起作用。

我应该如何让 Hibernate 读取不同的配置文件？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-09T10:11:28.987

我们可以使用以下代码

```
configuration = new Configuration();
sessionFactory = configuration.configure("filename.cfg.xml").buildSessionFactory(); 
```

在这里，filename.cfg.xml 应该存在于类路径中。

# java - JSP 中的 JDBC 连接：java.lang.RuntimePermission accessClassInPackage.sun.jdbc.odbc

> ID：15429398
> 
> 赞同：2
> 
> 时间：2013-03-15T10:02:10.670
> 
> 标签：java, sql-server, jsp, web-applications, jdbc

在这里，我试图通过`JDBC`.

这是我的代码，最终出现以下异常。

```
<%@ page import ="java.sql.*" %>
<%@ page import ="javax.sql.*" %>

<%
  Connection con = null;
  String url = "jdbc:jtds:sqlserver://192.168.0.123:4070/";
  String db = "RUTHER_FORD";
  String driver = "net.sourceforge.jtds.jdbc.Driver";
  String userName ="RUTHER";
  String password="SORRY_CONFIDENTIAL";

  int sumcount=0;
  Statement st;
  try{
      Class.forName(driver).newInstance();
      con = DriverManager.getConnection(url+db,userName,password);
      String query = "select * from user_master";
      st = con.createStatement();
      ResultSet rs = st.executeQuery(query);
%>
<%
      while(rs.next()){
%>

        <%System.out.println(rs.getString(1));%>
        <%System.out.println(rs.getString(2));%>

<%
      }
%>
<%
  }
  catch(Exception e){
      e.printStackTrace();
  }
%>

<html>

.
.
.
. 
```

//下面是我在调度页面时面临的异常

```
 java.security.AccessControlException: access denied (java.lang.RuntimePermission accessClassInPackage.sun.jdbc.odbc)
        at java.security.AccessControlContext.checkPermission(AccessControlContext.java:323)
        at java.security.AccessController.checkPermission(AccessController.java:546)
        at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
        at com.google.appengine.tools.development.DevAppServerFactory$CustomSecurityManager.checkPermission(DevAppServerFactory.java:166)
        at java.lang.SecurityManager.checkPackageAccess(SecurityManager.java:1512) 
```

下面我又看到了一个例外

```
java.security.AccessControlException: access denied (java.io.FilePermission C:\Windows\TEMP read)
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:323)
    at java.security.AccessController.checkPermission(AccessController.java:546)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
    at com.google.appengine.tools.development.DevAppServerFactory$CustomSecurityManager.checkPermission(DevAppServerFactory.java:166)
    at java.lang.SecurityManager.checkRead(SecurityManager.java:871)
    at java.io.File.isDirectory(File.java:752)
    at net.sourceforge.jtds.jdbc.ConnectionJDBC2.unpackProperties(ConnectionJDBC2.java:1253)
    at net.sourceforge.jtds.jdbc.ConnectionJDBC2.<init>(ConnectionJDBC2.java:280)
    at net.sourceforge.jtds.jdbc.ConnectionJDBC3.<init>(ConnectionJDBC3.java:50)
    at net.sourceforge.jtds.jdbc.Driver.connect(Driver.java:184)
    at java.sql.DriverManager.getConnection(DriverManager.java:582)
    at java.sql.DriverManager.getConnection(DriverManager.java:185)
    at org.apache.jsp.mmrda_005fsupplierportal.index_002dleft_002dcontainer_jsp._jspService(index_002dleft_002dcontainer_jsp.java:71)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
P.S I added jtdc.1.2.5 jar to my `class path`. 
```

我缺少什么？对此有任何建议吗？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:42:19.437

创建 server.policy 文件并将文件放在您的 java 文件所在的位置。在文件中添加以下行并保存。试试这个，告诉我们它是否有效

```
grant {
permission java.security.AllPermission;
}; 
```

# android - Android - PhoneGap 视频播放器插件

> ID：15429399
> 
> 赞同：1
> 
> 时间：2013-03-15T10:02:14.133
> 
> 标签：android, cordova, webintents

我尝试编写一个小应用程序来播放视频流。我在[https://gist.github.com/macdonst/1507162](https://gist.github.com/macdonst/1507162)`PhoneGap`找到了一个插件。我试过了，但它对我不起作用。

有没有人有一个示例 Eclipse 项目要发送给我？

非常感谢 ！

对不起我的英语不好，我是法国人！

或者我的问题的另一种方式可能是如何从我的 html 页面调用活动？我已经测试过了：

```
public class App extends DroidGap {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.loadUrl("file:///android_asset/www/index.html");

    /* Call MX PLayer */
    String videoUrl = "http://myserveur.com:1400";
    Intent i = new Intent(android.content.Intent.ACTION_VIEW);
    i.setDataAndType(Uri.parse(videoUrl), "video/*");
    startActivity(i);

} 
```

它工作正常！当然，当我启动应用程序时，它会启动具有良好视频链接的 MXPlayer。那么如何从 html 页面调用 MxPlayer 呢？

# jpa - JPA OneToOne 和 OneToMany：更新和删除

> ID：15429401
> 
> 赞同：1
> 
> 时间：2013-03-15T10:02:21.010
> 
> 标签：jpa

我希望一个模型对象包含另一个具有 OneToOne 关系的对象，但我希望在保存第一个对象时自动更新第二个对象（object.save()），并在删除第一个对象时自动删除。

我对包含其他对象列表的对象有同样的需求，对保存/更新和删除有相同的要求。在特殊情况下：保存第一个对象时，我希望根据第一个对象中的新列表更新、创建或删除第二个对象。

一个类似的例子是一篇博客文章，其中包含可以添加、编辑或删除的评论。

我做了很多尝试，使用“cascade = CascadeType.ALL”和其他“mappedBy”，这些尝试是在使用 HSQLDB 的单元测试中完成的，但我无法取得任何成功...... :-(

你能帮助我吗 ？

谢谢，

泽维尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:14:27.467

我想我已经找到了问题——声明`orphanRemoval=true`的不能正常工作——`PostDetails`实体不再被`Post`.

这似乎是 Hibernate 的一个问题 - 孤儿删除不像预期的那样工作。请参阅[**这篇文章**](http://mcls.github.com/blog/2012/08/07/pojo-binding-and-jpas-orphanremoval-in-play/)，解释如何在 Play 中解决它。

这和[**这**](https://hibernate.onjira.com/browse/HHH-6484)似乎是 Hibernate 的相关错误票[**。**](https://hibernate.onjira.com/browse/HHH-5559)

# python - Jinja2 和 WTForms 嵌套

> ID：15429404
> 
> 赞同：1
> 
> 时间：2013-03-15T10:02:32.137
> 
> 标签：python, google-app-engine, python-2.7, jinja2, wtforms

我目前正在使用以下代码生成标签：

```
{{ form.code.label(class="control-label required") }} 
```

注意所需的类。这现在是硬编码的，但我想根据 WTForms 字段信息动态添加：

```
form.code.flags.required 
```

我尝试了类似的东西

```
{{ form.code.label(class="control-label {% if form.code.flags.required 
%}required{% endif %}") }} 
```

但它没有奏效。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T06:58:50.447

这个例子不起作用，因为 Jinja2 没有将 '{{}}' 括号内的语法视为模板的一部分，尽管它尝试了一些智能解析来试图找出你想要的（更多信息在这里：[http： //jinja.pocoo.org/docs/templates/#variables](http://jinja.pocoo.org/docs/templates/#variables)）。

最简单的方法是将逻辑移到外面：

```
{% if form.code.flags.required %}
    {{ form.code.label(class="control-label required") }}
{% else %}
    {{ form.code.label(class="control-label") }}
{% endif %} 
```

# java - 如何通过 JAVA 代码从 CQ DAM/repository 上传和下载任何文件

> ID：15429414
> 
> 赞同：0
> 
> 时间：2013-03-15T10:03:12.580
> 
> 标签：java, aem

我是 CQ5.4 的新手，并且熟悉 CQ 的内容拉链和内容加载器模块。我们如何通过任何 JAVA 代码来做同样的事情？

谢谢瑞诗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T23:21:41.070

不完全确定你在问什么，但你应该能够使用像 Fiddler 这样的工具来检查发送到 CQ 服务器的请求，并用你的 Java 代码重新创建这些请求。

# sql - 这里不允许的约束规范是什么意思？

> ID：15429417
> 
> 赞同：0
> 
> 时间：2013-03-15T10:03:21.123
> 
> 标签：sql

```
CREATE TABLE MyTable
   (FName Varchar2(20) CONSTRAINT MyTable_FName_def DEFAULT 'MyName',
   LName varchar2(20) ); 
```

运行上述查询时出现以下错误，

```
constraint specification not allowed here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:13:21.363

如果您查看[Oracle 手册](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_7002.htm#CEGEDHJE)，您会发现`DEFAULT`值不需要`CONSTRAINT`关键字

你应该使用：

```
CREATE TABLE MyTable
    (
        FName Varchar2(20) DEFAULT 'MyName',
        LName Varchar2(20)
    ); 
```

# javascript - 何时使用 parseInt

> ID：15429418
> 
> 赞同：14
> 
> 时间：2013-03-15T10:03:26.160
> 
> 标签：javascript, jquery, parseint

从 DOM 中提取数字并使用它们进行计算时，我必须遵循哪个规则？javascript 如何知道一个值是否为数字？我应该总是使用 parseInt 吗？

给定以下代码：

HTML

```
<div id="myvalue">5</div>
<div id="withParseInt"></div>
<div id="withoutParseInt"></div>
<div id="withoutParseIntButIncrement"></div> 
```

JS 和 jQuery：

```
var value = $('#myvalue').text();
$('#withParseInt').text(parseInt(value) + 1);
$('#withoutParseInt').text(value + 1);
$('#withoutParseIntButIncrement').text(value++); 
```

给出以下输出：

```
5
6
51
5 
```

小提琴：http: [//jsfiddle.net/ytxKU/3/](http://jsfiddle.net/ytxKU/3/)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T10:06:22.680

该`.text()`方法将始终返回一个字符串。一些运算符（如`+`运算符）被重载以执行算术和字符串运算。在字符串的情况下，它执行连接，因此结果为“51”。

如果您有一个字符串并且需要使用非强制运算符，则必须使用`parseInt`（或其他一些转换为数字的方法）。

但是，`*`操作员例如隐式执行此强制，因此在这种情况下您不需要`parseInt`调用（例如，请参阅[更新的小提琴](http://jsfiddle.net/ytxKU/6/)）。

请注意，增量`++`运算符*确实会*强制其操作数，但您使用了后缀运算符，因此它不会产生任何影响。使用前缀运算符，您可以看到它的工作：

```
$('#withoutParseIntButIncrement').text(++value); 
```

所以，总结一下：

```
// Parses string to number and adds 1
$('#withParseInt').text(parseInt(value) + 1);

// Coerces number 1 to string "1" and concatenates
$('#withoutParseInt').text(value + 1);

// Implicity coerces string to number, but after it's been inserted into the DOM
$('#withoutParseIntButIncrement').text(value++);

// Implicity coerces string to number, before it's been inserted into the DOM
$('#withoutParseIntButIncrement').text(++value);

// Implicity coerces to number
$('#withoutParseIntButMultiply').text(value * 2); 
```

* * *

旁注：始终将第二个参数（基数）传递给`parseInt`. 这可确保以正确的基数解析数字：

```
parseInt(value, 10); // For base 10 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-15T10:06:17.953

一个也是唯一的规则：

> 您从 DOM 检索的每个值都是一个字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T10:06:16.273

是的，为了安全起见，您应该始终使用 parseInt() 或 Number()。否则 Javascript 将决定如何处理它

*   值本身是一个字符串
*   使用运算符`+`将​​连接两个字符串
*   使用运算符`-`将​​计算数值差异
*   ...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T10:08:38.937

为了安全起见，使用它总是好的`parseInt`，尤其是当您可以提供第二个参数供数值系统使用时。

`++value`顺便说一句，在你的最后一个例子中，如果你希望它等于 6，它应该是。

# bash - 给定 IP 和网络掩码，如何使用 bash 计算网络地址？

> ID：15429420
> 
> 赞同：17
> 
> 时间：2013-03-15T10:03:30.717
> 
> 标签：bash, ip, subnet, netmask

在 bash 脚本中，我有一个类似 192.168.1.15 的 IP 地址和一个类似 255.255.0.0 的网络掩码。我现在想计算这个网络的起始地址，这意味着在两个地址上都使用 & 运算符。在示例中，结果将为 192.168.0.0。有人准备好这样的东西吗？我正在寻找一种优雅的方式来处理来自 bash 的 IP 地址

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-15T10:18:11.623

使用按位`&`( `AND`) 运算符：

```
$ IFS=. read -r i1 i2 i3 i4 <<< "192.168.1.15"
$ IFS=. read -r m1 m2 m3 m4 <<< "255.255.0.0"
$ printf "%d.%d.%d.%d\n" "$((i1 & m1))" "$((i2 & m2))" "$((i3 & m3))" "$((i4 & m4))"
192.168.0.0 
```

另一个 IP 和掩码的示例：

```
$ IFS=. read -r i1 i2 i3 i4 <<< "10.0.14.97"
$ IFS=. read -r m1 m2 m3 m4 <<< "255.255.255.248"
$ printf "%d.%d.%d.%d\n" "$((i1 & m1))" "$((i2 & m2))" "$((i3 & m3))" "$((i4 & m4))"
10.0.14.96 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-09-21T08:35:16.957

一些 Bash 函数总结了所有其他答案。

```
ip2int()
{
    local a b c d
    { IFS=. read a b c d; } <<< $1
    echo $(((((((a << 8) | b) << 8) | c) << 8) | d))
}

int2ip()
{
    local ui32=$1; shift
    local ip n
    for n in 1 2 3 4; do
        ip=$((ui32 & 0xff))${ip:+.}$ip
        ui32=$((ui32 >> 8))
    done
    echo $ip
}

netmask()
# Example: netmask 24 => 255.255.255.0
{
    local mask=$((0xffffffff << (32 - $1))); shift
    int2ip $mask
}

broadcast()
# Example: broadcast 192.0.2.0 24 => 192.0.2.255
{
    local addr=$(ip2int $1); shift
    local mask=$((0xffffffff << (32 -$1))); shift
    int2ip $((addr | ~mask))
}

network()
# Example: network 192.0.2.0 24 => 192.0.2.0
{
    local addr=$(ip2int $1); shift
    local mask=$((0xffffffff << (32 -$1))); shift
    int2ip $((addr & mask))
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-07-24T15:20:37.770

如果您只有可用的网络前缀（没有网络掩码），只需添加一个替代方案：

```
IP=10.20.30.240
PREFIX=26
IFS=. read -r i1 i2 i3 i4 <<< $IP
IFS=. read -r xx m1 m2 m3 m4 <<< $(for a in $(seq 1 32); do if [ $(((a - 1) % 8)) -eq 0 ]; then echo -n .; fi; if [ $a -le $PREFIX ]; then echo -n 1; else echo -n 0; fi; done)
printf "%d.%d.%d.%d\n" "$((i1 & (2#$m1)))" "$((i2 & (2#$m2)))" "$((i3 & (2#$m3)))" "$((i4 & (2#$m4)))" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-11-17T15:00:45.650

对于在谷歌搜索时遇到此问题并需要在 BusyBox 中以及因此在许多路由器上有效的答案的人来说，这里有一些适合这种情况的东西`ash`：`sh`

```
IP=10.20.30.240
MASK=255.255.252.0
IFS=. read -r i1 i2 i3 i4 << EOF
$IP
EOF
IFS=. read -r m1 m2 m3 m4 << EOF
$MASK
EOF
read masked << EOF
$(( $i1 & $m1 )).$(( $i2 & $m2 )).$(( $i3 & $m3 )).$(( $i4 & $m4 ))
EOF
echo $masked 
```

如果您只有前缀长度，请执行以下操作：

```
IP=10.20.30.240
PREFIX=22
IFS=. read -r i1 i2 i3 i4 << EOF
$IP
EOF
mask=$(( ((1<<32)-1) & (((1<<32)-1) << (32 - $PREFIX)) ))
read masked << EOF
$(( $i1 & ($mask>>24) )).$(( $i2 & ($mask>>16) )).$(( $i3 & ($mask>>8) )).$(( $i4 & $mask ))
EOF
echo $masked 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-25T21:34:38.743

很好的答案，尽管上面的答案中有轻微的错字。

```
$ printf "%d.%d.%d.%d\n" "$((i1 & m1))" "$(($i2  <-- $i2 should be i2 
```

如果有人知道如何计算广播地址（XOR 网络），那么计算网络和广播之间的可用节点我会对接下来的步骤感兴趣。我必须在 /23 内的列表中查找地址。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-18T22:01:27.270

除了@Janci 回答

```
IP=10.20.30.240
PREFIX=26
IFS=. read -r i1 i2 i3 i4 <<< $IP
D2B=({0..1}{0..1}{0..1}{0..1}{0..1}{0..1}{0..1}{0..1})
binIP=${D2B[$i1]}${D2B[$i2]}${D2B[$i3]}${D2B[$i4]}
binIP0=${binIP::$PREFIX}$(printf '0%.0s' $(seq 1 $((32-$PREFIX))))
# binIP1=${binIP::$PREFIX}$(printf '0%.0s' $(seq 1 $((31-$PREFIX))))1
echo $((2#${binIP0::8})).$((2#${binIP0:8:8})).$((2#${binIP0:16:8})).$((2#${binIP0:24:8})) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-14T18:16:20.417

基于[https://stackoverflow.com/a/64877749/2716218](https://stackoverflow.com/a/64877749/2716218)我试图简化并想出了

```
IP=10.20.30.240
PREFIX=22
IFS=. read -r i1 i2 i3 i4 <<< $IP
mask=$(( ((1<<32)-1) & (((1<<32)-1) << (32 - $PREFIX)) ))
masked=$(( $i1 & ($mask>>24) )).$(( $i2 & ($mask>>16) )).$(( $i3 & ($mask>>8) )).$(( $i4 & $mask ))
echo $masked 
```

# jquery - 使用相对 URL 的 Ajax Jquery 帖子

> ID：15429423
> 
> 赞同：1
> 
> 时间：2013-03-15T10:03:46.240
> 
> 标签：jquery, post, antiforgerytoken

我有一个创建视图和一个编辑视图，几乎相同。它们都包含一个级联下拉列表。第二个列表的值是正在创建或编辑的数据的一部分。第一个下拉列表只是第二个列表中值的过滤器。

两个视图都使用相同的脚本，该脚本在第一个下拉列表中附加了更改事件的处理程序。处理程序对控制器中的方法进行发布。

当我运行创建视图并更改第一个下拉列表时，它工作正常。第二个列表已更新。当我在编辑视图中尝试时，我收到 500 内部服务器错误。

我看过Firebug。我在处理程序中放了一个中断。选择时在这两种情况下都会调用它。发送的数据看起来是一样的（ $(this).serialize() 看起来一样）。
Firebug 控制台显示：所需的防伪表单字段“__RequestVerificationToken”不存在。我没有看到我需要一个调用此方法，但当然还有其他方法（操作）确实需要一个。

不过，我在昨天之前从未使用过 Firebug，所以如果有人知道如何使用，可能还有很多东西可以检查。（总的来说，我对 MVC 和 Web 应用程序完全陌生。）

我的控制器方法也有中断。仅在从创建视图调用时会被击中。

无奈之下，我尝试将调用类型更改为 GET 而不是 POST。这导致调用了一个具有不同名称的控制器方法（HttpGet EDIT），我觉得至少可以说令人不安。

我感觉找不到我正在调用的方法（在编辑中）。相反，尝试使用其他方法（我不知道是哪一种），并且该方法需要防伪令牌。

**编辑：** 一阵新鲜空气，我意识到我当然知道调用哪个动作：这是 HttpPost Edit 动作（需要防伪令牌）。这当然是正常的表单提交操作。在调试器中快速运行证实了这一点。这个调用由于手头的原因而失败的事实是清楚的。但是为什么这个动作会被调用呢？

**更新：** Firebug 控制台指示正在调用不同的操作。在 Create 案例中，它是 .../_an_alphanumeric_literal_/Order/PopulateAvtalDDL，这正是我想要的。在 Edit 情况下，它是 .../_an_alphanumeric_literal_/Order/ **Edit** /PopulateAvtalDDL。这是路由问题吗？如果是这样，我还是不明白。两个调用都是从同一个脚本发出的，我只设置了一个路由（基本上是 MVC 4 的默认路由）：

```
routes.MapRoute(
            name: "Default",
            url: "_an_alphanumeric_literal_/{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        ); 
```

**更新：** 我终于找到了一些相关信息：[AJAX 请求中的相对 URL](https://stackoverflow.com/questions/4765740/relative-urls-in-ajax-requests?rq=1)。那就是路由问题。如果我将我的脚本 URL 从相对`PopulateAvtalDDL`更改为绝对`/_an_alphanumeric_literal_/Order/PopulateAvtalDDL`，则它适用于两个视图。引用链接中的答案表明路径相对于浏览器中的当前 URL。在我的情况下是`http://localhost:51852/_an_alphanumeric_literal_/Order/Edit/6?markedOrderId=0`and `http://localhost:51852/_an_alphanumeric_literal_/Order/Create?markedOrderId=0`。当构建相对 URL 时，最后一段被替换。在 Create 案例中是**Create**，但在 Edit 案例中它是**6**（已编辑数据的 ID）。我明白发生了什么！

然后我的解决方案：

在过滤器 DDL 周围添加一个 div（在两个视图中）设置 URL: `<div id="kundDDL" data-url="@Url.Action("PopulateAvtalDDL", "Order")">`。然后在脚本中访问那个 URL `url: $('#kundDDL').data('url')`。

这是创建视图的代码：

```
@model AssetMgmt.Models.OrderEditVM
@using AssetMgmt.Models;

@{
    ViewBag.Title = MsgString.LblCreateNew + " order";
}

<h2>@ViewBag.Title</h2>

@using (Html.BeginForm(null, null, FormMethod.Post))
{
    @Html.ValidationSummary(true)
    @Html.AntiForgeryToken()

    @Html.HiddenFor(m => m.MarkedOrderId)

    <fieldset>
        <legend>Filter</legend>

        <div class="editor-label">
            @Html.LabelFor(m => m.KundId)
        </div>
        <div class="dropdownlist">
            @Html.DropDownListFor(m => m.KundId, Model.KundDropDown, string.Empty)
        </div>
        <div class="dropdown-validation-error">
            @Html.ValidationMessageFor(model => model.KundId)
        </div>
    </fieldset>

    <fieldset>
        <legend>Orderdata</legend>

        <div id="avtalDDL">
            @Html.Partial("_AvtalDDL")
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Ordernummer)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Ordernummer)
            @Html.ValidationMessageFor(model => model.Ordernummer)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Beställare)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Beställare)
            @Html.ValidationMessageFor(model => model.Beställare)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Orderdatum)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Orderdatum)
            @Html.ValidationMessageFor(model => model.Orderdatum)
        </div>

        <p>
            <input type="submit" value="@MsgString.LblSave" />
        </p>
    </fieldset>
}
<div>
    @Html.ActionLink(MsgString.LblBack, "Index", new { markedOrderId = Model.MarkedOrderId })
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script type="text/javascript" src="~/Scripts/jquery.maskedinput-1.3.1.min.js"></script>
    <script type="text/javascript" src="~/Scripts/assetMgmtMasks.js"></script>
    <script src="~/Scripts/assetMgmtOrderPopulateDDL.js" type="text/javascript"></script>
} 
```

这是编辑视图：

```
@model AssetMgmt.Models.OrderEditVM
@using AssetMgmt.Models;

@{
    ViewBag.Title = MsgString.LblEdit + " order";
}

<h2>@ViewBag.Title</h2>

@using (Html.BeginForm(null, null, FormMethod.Post))
{
    @Html.ValidationSummary(true)
    @Html.AntiForgeryToken()

    @Html.HiddenFor(model => model.OrderId)
    @Html.HiddenFor(model => model.Timestamp)
    @Html.HiddenFor(model => model.MarkedOrderId)

    <fieldset>
        <legend>Filter</legend>

        <div class="editor-label">
            @Html.LabelFor(m => m.KundId)
        </div>
        <div class="dropdownlist">
            @Html.DropDownListFor(m => m.KundId, Model.KundDropDown, string.Empty)
        </div>
        <div class="dropdown-validation-error">
            @Html.ValidationMessageFor(model => model.KundId)
        </div>
    </fieldset>

    <fieldset>
        <legend>Orderdata</legend>

        <div id="avtalDDL">
            @Html.Partial("_AvtalDDL")
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Ordernummer)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Ordernummer)
            @Html.ValidationMessageFor(model => model.Ordernummer)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Beställare)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Beställare)
            @Html.ValidationMessageFor(model => model.Beställare)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Orderdatum)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Orderdatum)
            @Html.ValidationMessageFor(model => model.Orderdatum)
        </div>

        <p>
            <input type="submit" value="@MsgString.LblSave" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink(MsgString.LblBack, "Index", new { markedOrderId = Model.MarkedOrderId })
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script type="text/javascript" src="~/Scripts/jquery.maskedinput-1.3.1.min.js"></script>
    <script type="text/javascript" src="~/Scripts/assetMgmtMasks.js"></script>
    <script src="~/Scripts/assetMgmtOrderPopulateDDL.js" type="text/javascript"></script>
} 
```

剧本：

```
$(document).ready(function () {
    //Kund select
    $('#KundId').change(function () {
        $.ajax({
            url: 'PopulateAvtalDDL',
            type: 'post',
            data: $(this).serialize(),
            success: function (result) {
                $('#avtalDDL').html(result);
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert(xhr.status);
                alert(xhr.statusText);
                alert(thrownError);
            }
        });
        return false;
    });
}); 
```

控制器方法的签名：

```
[HttpPost]
public PartialViewResult PopulateAvtalDDL(int kundId = 0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:01:50.820

我终于找到了一些相关信息：AJAX 请求中的相对 URL。这是一个路由问题。如果我将我的脚本 URL 从相对 PopulateAvtalDDL 更改为绝对 /_an_alphanumeric_literal_/Order/PopulateAvtalDDL 它适用于两个视图。引用链接中的答案表明路径相对于浏览器中的当前 URL。在我的情况下是
`http://localhost:51852/_an_alphanumeric_literal_/Order/Edit/6?markedOrderId=0`
and
`http://localhost:51852/_an_alphanumeric_literal_/Order/Create?markedOrderId=0`。当构建相对 URL 时，最后一段被替换。在 Create 案例中为 Create，但在 Edit 案例中为 6（已编辑数据的 ID）。

然后我的解决方案：

在过滤器 DDL 周围添加一个 div（在两个视图中）设置 URL:
`<div id="kundDDL" data-url="@Url.Action("PopulateAvtalDDL", "Order")">`。
然后在脚本中访问那个 URL
`url: $('#kundDDL').data('url')`。

# java - 在 DJ Native Swing 上启用 Google Chrome Frame

> ID：15429425
> 
> 赞同：3
> 
> 时间：2013-03-15T10:04:00.717
> 
> 标签：java, swt, google-chrome-frame, djnativeswing

我的 Windows XP + IE8 机器上安装了 Google Chrome Frame。当我使用 IE8 导航到启用 chrome 框架的页面时，它可以工作。但是，当我通过使用 DJ Native Swing 的 Java 应用程序导航到该站点时，该插件未激活。

该应用程序使用 SWT 版本 3.740。

是否可以在 DJ Native Swing 浏览器中启用 Chrome Frame？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:57:51.623

**尝试将带有 V8 JavaScript 引擎的 WebKit**布局引擎嵌入到 Swing 中。

[在 Java 应用程序中获取 Chrome 浏览器](https://stackoverflow.com/questions/7244653/getting-chrome-browser-in-java-applications)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:03:57.427

根据[JavaDoc: JWebBrowser](http://djproject.sourceforge.net/ns/documentation/javadoc/chrriis/dj/nativeswing/swtimpl/components/JWebBrowser.html)的文档，它只支持 IE 和 Mozilla：

> 本机 Web 浏览器，在 Windows 上使用 Internet Explorer 或 Mozilla，在其他平台上使用 Mozilla。

但是，根据代码，它实现了`"XULRunner Runtime"`NSOption，根据[XULRunner Wikipedia 文章](http://en.wikipedia.org/wiki/XULRunner)XULRunner 出现在 Chrome 的学分中，因此它可能适合您使用 Mozilla 的要求，但它不会是 Chrome。

这些方法似乎是唯一的内置选项，但如果您知道要传递的正确变量名，则可以使用`JWebBrowser.useWebkitRuntime()`该类定义您自己的选项。`JWebBrowser.useXULRunnerRuntime()``NSOption`

我希望这有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T11:29:21.957

上次在 Swing 项目中，当我们不得不将浏览器集成到 Swing 应用程序中时，我们最终使用了默认为 IE 的 Eclipse SWT 组件。这使得构建仅适用于 Windows，但它有效，并消除了一些 Swing 错误。

**尝试对浏览器使用 Eclipse SWT 控件。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-11T11:47:10.693

首先，浏览器的 SWT 控件是 DJ Native Swing 所使用的，但它也有各种胶水代码以使其与 Swing 线程安全。因此，更改为纯 SWT 会产生相同的问题，以及要解决的线程问题。

关于 SWT 中的 Google Chrome Frame 以及 DJ Native Swing 中的 SWT 本身目前不支持。看到这个错误： [https ://bugs.eclipse.org/bugs/show_bug.cgi?id=317322](https://bugs.eclipse.org/bugs/show_bug.cgi?id=317322)

SWT 和 DJ Native Swing 允许创建自己的 ActiveX 桥。也许您可以为 Windows 上的 Google Chrome Frame ActiveX 创建自己的组件，类似于 DJ Native Swing 为 Windows Media Player 组件所做的事情。

# java - 使用 jodatime 获取 2 个 sql 日期之间的天数：错误的日期转换（-1 天）

> ID：15429428
> 
> 赞同：0
> 
> 时间：2013-03-15T10:04:07.883
> 
> 标签：java, jodatime

我想计算 2 个 sql 日期之间的天数，我目前正在使用：

```
Days.daysBetween(new DateMidnight(date1), new DateMidnight(date2)); 
```

但是，当传递 sql 日期时`1900-01-01`，它会变成：`1899-12-31`.

我知道这与时区有关，但是如何防止这种情况发生？

我也尝试过使用： Instants

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:11:11.823

应避免将 DateMidnight 与时区结合使用。有些日子甚至没有午夜...

尝试使用`LocalDate.toDateTimeAtStartOfDay`而不是`DateMidnight`

# r - 捕获段错误（R 调用 C）

> ID：15429433
> 
> 赞同：2
> 
> 时间：2013-03-15T10:04:29.407
> 
> 标签：r, segmentation-fault

当我在 Linux 中使用 R 中的 .c 函数时，我收到错误消息， *** 捕获 segfault ***地址 0x10，导致“内存未映射”。我检查了指针的分配和释放是否有问题，但到目前为止我找不到任何错误。我可以在 Windows 的 R 中执行 .c 函数，这很奇怪。

谢谢你的帮助。

PS这是我的c代码中指针分配和释放的一部分：

```
double **x;
x= (double **)calloc(nRow ,sizeof(double*));
for(i = 0; i < nRow; ++i)
 x[i] = (double *)calloc(nCol, sizeof(double));

....

 for(i = 0; i < nRow; i++)
    free(x[i]);
 free(x); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:30:31.343

代码看起来不错。您可能在其他地方存在导致`x`损坏的内存错误。

[`valgrind`](http://valgrind.org/)或许能帮上忙。

# javascript - 为什么我收到 SyntaxError: missing ; 声明之前

> ID：15429436
> 
> 赞同：1
> 
> 时间：2013-03-15T10:04:38.523
> 
> 标签：javascript

我得到一个 SyntaxError: missing ; 声明之前。我不知道为什么会出现此错误，因为我的代码与我使用的教科书完全相同。请帮忙。我将发布代码，并评论语法错误的位置：

```
<!DOCTYPE html>
<html lang="en">
<head>
<title> Practive</title>
<meta charset="utf-8">
<style>
input{display: block;
padding-bottom: 10px;
width: 250px;
text-align: left;}

label {float:left;}
</style>

<script type="text/javascript">
<!--
fuction validateForm()                           // SyntaxError: missing ; before statement
    //  before v
{
if (document.forms[0].userAge.value < 18){
alert ("Age is less than 18!");
return false;
} // end if 
alert ("Age is valid.");
return true;
} // end function validateForm
// -->
</script>
</head>

<body>
<h1> JavaScript Form Handling </h1>
<form method="post" action="http://webdevfoundations.net/scripts/formdemo.asp" onsubmit="return             validateForm();"> 
<label for="userName">Name: </label>
<input type="text" name="userName" id="userName">
<label for="userAge">Age:   &nbsp </label>
<input type="text" name="userAge" id="userAge">
<input type="submit" value="send information" id="submit">
</form>     

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T10:07:10.997

请注意：

```
fuction validateForm() 
```

应该：

```
function validateForm() 
```

您忘记了 N in word 功能并修复它是您问题的解决方案。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T10:07:48.320

`function`像这样在你的脚本中写而不是函数

```
function validateForm()                        
{
    if (document.forms[0].userAge.value < 18) {
        alert("Age is less than 18!");
        return false;
    } 
    alert("Age is valid.");
    return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T10:09:27.093

你在调用函数时犯了错误

**代替**

```
fuction validateForm() 
```

**和**

```
function validateForm() 
```

**您在调用函数时犯了拼写错误。**

# sql - 如果列值等于同一个表，则排除行

> ID：15429439
> 
> 赞同：1
> 
> 时间：2013-03-15T10:04:41.557
> 
> 标签：sql

```
 ![TABLE][1] 
```

大家好，

我有一个包含上述记录的表，您可以在其中每个记录 2 个条目`N_ID`。只有满足以下条件，我才想从中获取记录。

比如说

N_ID = 2 的状态列值为 1 和 2，N_ID = 5 的状态列值为 2 和 1，这意味着状态值不同（即 1 和 2 两者）。

但是，如果您看到 N_ID=3，则 Status 列有 1 和 1，它们是相同的。

所以我想要不包括具有相同状态值的 N_ID 的记录（即具有 1 & 1 或 2 & 2 等）。

在上述情况下，我只想要 N_ID=2,5 的记录。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:09:36.557

您可以使用`EXISTS`

```
SELECT * FROM dbo.TableName t1
WHERE EXISTS(
    SELECT 1 FROM dbo.TableName t2
    WHERE t1.N_ID = t2.N_ID
    AND   t1.Status <> t2.Status
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T10:19:49.420

您可以排除每个 ID 多次出现相同状态的行

```
 SELECT * 
   FROM TABLENAME tb 
   WHERE tb.N_ID NOT IN (
     SELECT tb.N_ID 
       FROM TABLENAME tb
       GROUP BY tb.N_ID, tb.CONFIG_TYPE, tb.STATUS
       HAVING COUNT(*) > 1) 
```

![桌子](../Images/70a687b3aa1060f46c48c2789de51f4b.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:34:25.727

尝试使用 EXISTS() 选项并检查 COUNT(*)

```
SELECT *
FROM dbo.test16 t
WHERE t.Config_Type != 2 AND EXISTS (
              SELECT 1
              FROM dbo.test16 t2
              WHERE t.Networkelemenid = t2.Networkelemenid                
              GROUP BY t2.Networkelemenid, t2.Config_Type
              HAVING COUNT(DISTINCT t2.Status) > 1
              ) 
```

此脚本对 t2.Config_Type 上的数据进行分组。HAVING COUNT(DISTINCT t2.Status) 指定结果集中只能出现唯一行。（例如 1,2 = 2；1,1 或 2,2 = 1）

对于第二个条件，您需要此脚本

```
SELECT *
FROM dbo.test41 t
WHERE t.Config_Type != 2 AND EXISTS (
              SELECT 1
              FROM dbo.test41 t2
              WHERE t.Networkelemenid = t2.Networkelemenid                
              GROUP BY t2.Networkelemenid, t2.Config_Type, t2.Status
              HAVING COUNT(t2.Status) > 1
              ) 
```

![桌子](../Images/d49cb5862cfac7724b0d10919773c7bf.png)

![表2](../Images/df8c85276902796c0118c744830218df.png)

# javascript - 在所有类型的设备上获得真正的分辨率

> ID：15429440
> 
> 赞同：-1
> 
> 时间：2013-03-15T10:04:42.070
> 
> 标签：javascript, mobile, desktop, resolution

如何使用 javascript 在移动设备上获得真正的分辨率？该网站在桌面和移动设备上运行。

```
if ($(window).width() >= 640 && isMobile)  // wide screen or android
{
    isSmartphone=true;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:31:24.817

您可以访问这些属性

```
window.screen.width
window.screen.height 
```

或可用的宽度/高度（删除未使用的空间，如 Windows 任务栏）：

```
window.screen.availHeight
window.screen.availWidth 
```

# php - 如何在 url 中传递一个数组以供 javascript 检索？

> ID：15429441
> 
> 赞同：0
> 
> 时间：2013-03-15T10:04:43.617
> 
> 标签：php, javascript, arrays

我正在尝试在 url 中传递一个数组，所以我尝试了这个：

```
?question_id=10&value=1&array=["Saab","Volvo","BMW"] 
```

这没有用（没想到会，但这是一个开始）。

无论如何，它是一个键值数组，所以我需要这样的东西：

```
&array[28]=1&array[9]=1&array[2]=0&array[28]=0 
```

但这也不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:08:04.383

在 jquery 中试试这个

```
var arr = [1, 4, 9];
var url = '/page.php?arr=' + JSON.stringify(arr);
window.location.href = url; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T10:10:00.203

如果你想传递一个数组，你只需要在 URI 中设置数组的不同部分，比如

```
http://example.com/myFile.php?cars[]=Saab&cars[]=volvo&cars[]=BMW 
```

所以你得到你的格式化数组`$_GET['cars']`

```
print_r($_GET['cars']); // array('Saab', 'Volvo', 'BMW') 
```

要在 javascript 中获得这样的结果，您可以使用这种代码

```
var cars = ['Saab', 'Volvo', 'BMW'],
    result = '';

for (var i = cars.length-1; i >= 0; i--) {
    results += 'cars[]='+arr[i]+'&';
}

results = results.substr(0, results.length-1); // cars[]=BMW&cars[]=Volvo&cars[]=Saab 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:08:16.610

尝试像这样通过

```
?question_id=10&value=1&my_array=Saab,Volvo,BMW 
```

你可以像

```
<?php
    $my_array = explode(',',$_GET['my_array']);
?> 
```

或者你可以这样尝试

```
$aValues = array('Saab','Volvo','BMW');
$url = 'http://example.com/index.php?';
$url .= 'aValues[]=' . implode('&amp;aValues[]=', array_map('urlencode', $aValues)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T10:11:06.467

你也可以试试这个：

```
?arr[]="Saab"&arr[]="BMW" 
```

使用 jQuery getUrlParam 扩展我可以很容易地获取 url 变量

或在 PHP 中

```
var_dump($_GET); 
```

# r - 为什么我的用户在 ggplot2 的 geom_text 中提供的标签会产生错误？

> ID：15429447
> 
> 赞同：2
> 
> 时间：2013-03-15T10:05:16.863
> 
> 标签：r, plot, ggplot2

首先是一些背景。我正在尝试使用 ggplot2 创建瀑布图。我编写了以下函数来解决问题。但是，在尝试为 geom_text 标签提供用户提供的格式化功能时，我遇到了一个小问题。

```
plotIt<-function()
{
  require(ggplot2)
  require(scales)

  # Define formatting functions
  formatter<-function(x, ...) format(x, big.mark = ' ', trim = TRUE, scientific = FALSE, ...)
  strwr<-function(x) gsub(" ", "\n", x)

  # Build data frame to plot
  mydf<-structure(list(Description = structure(1:6, .Label = LETTERS[1:6], class = "factor"), 
                       change = c(0.86, 0.14, 0.08, -0.05, -0.03, 1.00), 
                       id = 1:6, 
                       end = c(0.86, 1.00, 1.08, 1.03, 1.00, 0.00), 
                       start = c(0, 0.86, 1.00, 1.08, 1.03, 1.00), 
                       type = structure(c(2L, 2L, 2L, 1L, 1L, 2L), .Label = c("Neg", "Pos"), class = "factor")), 
                  .Names = c("Description", "change", "id", "end", "start", "type"), 
                  row.names = LETTERS[1:6], class = "data.frame")

  # Plot it
  ggplot(mydf, aes(Description, fill = type)) + 
    geom_rect(aes(x = Description, xmin = id - 0.45, xmax = id + 0.45, ymin = end, ymax = start)) + 
    scale_y_continuous(labels = formatter) +
    scale_x_discrete("", breaks = levels(mydf$Description), labels = strwr(levels(mydf$Description))) +
    geom_text(aes(x = id, y = end, label = formatter(change)), vjust = 1, size = 3)
} 
```

调用此函数会生成以下错误消息：

> eval 中的错误（expr、envir、enclos）：找不到函数“格式化程序”

罪魁祸首是最后一行 geom_text 中的 label = formatter(change) 代码。如果我用 label = comma(change) 替换它，一切正常。“逗号”功能来自 scales 包。简而言之：

```
geom_text(aes(x = id, y = end, label = comma(change)), vjust = 1, size = 3) 
```

有效，但

```
geom_text(aes(x = id, y = end, label = formatter(change)), vjust = 1, size = 3) 
```

才不是。

输出如下所示： ![Waterfall plot](../Images/7075fb19308faa4d23b3d213a2cc995f.png)

Why doesn't geom_text accept my own formatting function? I'm sure it's something simple but I cannot see it.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:11:47.957

I think this is an issue with the environment in the `ggplot` call. If you add `environment = environment()`, it works:

```
 ggplot(mydf, aes(Description, fill = type), environment = environment()) + 
    geom_rect(aes(x = Description, xmin = id - 0.45, xmax = id + 0.45, ymin = end, ymax = start)) + 
    scale_y_continuous(labels = formatter) +
    scale_x_discrete("", breaks = levels(mydf$Description), labels = strwr(levels(mydf$Description))) +
    geom_text(aes(x = id, y = end, label = formatter(change)), vjust = 1, size = 3) 
```

As I understand it, this is because the function from `scales` is available in the global environment, but since you're defining `formatter` inside the function `plotIt()`, it is not available.

You can see this by the fact that if you run your code outside a defined function (start from inside your curly brackets), it all works. That is because this puts `formatter` in the global environment.

As a bit more explanation, you're error message is: `Error in eval(expr, envir, enclos) : could not find function "formatter"`. If you look at the `base` function `eval()`, the default `envir` argument is `parent.frame()`. If you look at the output from `environment()`, you see it's `<environment: R_GlobalEnv>`. So when `eval()` operates, this tells it to look in the right place.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-28T08:52:21.227

You may also use the [waterfall package](http://cran.r-project.org/web/packages/waterfall/index.html). Here's a brief [example](http://lamages.blogspot.de/2012/05/waterfall-charts-in-style-of-economist.html) showing the functionality. I think you wont have to care so much about the formatting.

# github - 如何配置 Cloudbees Jenkins 以在推送到 Github 时触发构建

> ID：15429448
> 
> 赞同：2
> 
> 时间：2013-03-15T10:05:17.070
> 
> 标签：github, jenkins, cloudbees

我尝试按照本文中的说明进行操作：

[http://developer.cloudbees.com/bin/view/DEV/GitHub+Commit+Hooks+HOWTO](http://developer.cloudbees.com/bin/view/DEV/GitHub+Commit+Hooks+HOWTO)

但是我有两个问题：

1.  它不起作用。当我推送到 github 时，詹金斯方面没有任何反应。在 Jenkins 上，GitHub Hook 日志显示“轮询尚未运行”。

2.  造成这种情况的可能原因是我无法指定 git 存储库，如此图片中所述：

![在此处输入图像描述](../Images/21e8b761c1cd3041d52201088e772a8a.png)

没有用于公钥的文本字段，也没有其他字段。相反，我有这些领域

```
Repository URL, Name, Refspec 
```

我也可以指定一个 http url（以及除触发之外的所有内容）。但是，如果我在图像中指定 git/ssh url，则会收到以下错误：

> 无法连接到存储库：命令“git ls-remote -h git@github.com:schauder/degraph.git HEAD”返回状态码 128：stdout：stderr：警告：永久添加 'github.com,207.97.227.239'（ RSA) 到已知主机列表。权限被拒绝（公钥）。致命：无法从远程存储库中读取。
> 
> 请确保您具有正确的访问权限并且存储库存在。

我从 github 复制了 url，所以不太可能出现拼写错误。

我确认我已经安装了 github 插件（升级到 1.5 版）

任何提示如何解决或至少调试问题？

**更新评论中的回答问题：**

是的，我在作业配置中选中了“将更改推送到 GitHub 时构建”复选框。

是的，我在 GitHub 中设置了 webhook。当我单击那里的测试按钮时，没有任何反应。当我将 webhook 中的 url 放入浏览器时，我得到一个 http 500 说

> 不打算以交互方式浏览（必须指定有效负载参数）

加上一些冗长的堆栈跟踪。

**另一个更新**

我检查了 Jenkins 端安装的 GIT 相关插件。在文本中显示他们与 GIT 的所有内容都已安装并且是最新版本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T12:58:42.593

根据上面的 Git 错误消息，我假设您无法通过身份验证。[您是否按照此处](http://wiki.cloudbees.com/bin/view/DEV/How+to+use+Private+GitHub+Repositories+with+CloudBees)所述在 GitHub 上添加了 CloudBees 公共 SSH 密钥？

**OP的澄清**

问题中引用的图像似乎表明有人将 GitHub 中的公钥放入 CloudBees。但实际上情况正好相反，而且所有标签似乎都已更改，因此很难将该屏幕截图与您在 CloudBees 中看到的内容相匹配。

所以我做的是这样的：

*   在 Cloudbees 的作业配置中有一个公钥（由 CloudBee 生成）。我将它放在该`CloudBees DEV@cloud Authorization`部分并标记为`CloudBees Public Key`. 复制该密钥。

*   跳到 GitHub 并转到`Settings > Deploy Keys`. 在那里添加密钥。

*   去`Settings > Service Hooks > WebHook URLs`。点击测试按钮。你不会在 GitHub 上看到太多东西。

*   跳回 CloudBees Jenkins。从作业的主页转到“GitHub Hook Log”。在那里你应该看到类似的东西：

    ```
    Started on Mar 15, 2013 8:55:14 AM
    Using strategy: Default
    [poll] Last Built Revision: Revision 581acde89a62317fd8dabaa3f4c6025d1c9dd413     (origin/master)
    Fetching changes from the remote Git repositories
    Polling for changes in
    Done. Took 0.34 sec
    Changes found 
    ```

    你的工作应该开始了。

    如果最后一行说`No Changes`这意味着钩子有效，但您已经构建了当前版本，因此不会再次触发构建。

*   如果您仍有问题，请查看“疑难解答”下的[https://wiki.jenkins-ci.org/display/JENKINS/Github+Plugin#GitHubPlugin-TriggerabuildwhenachangeispushedtoGitHub ，它会告诉您如何在 jenkins 端设置日志记录。](https://wiki.jenkins-ci.org/display/JENKINS/Github+Plugin#GitHubPlugin-TriggerabuildwhenachangeispushedtoGitHub)有了这个，我在 Jenkins SystemLog 中得到了各种各样的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T22:09:47.677

我刚刚发布了一篇关于使用 CloudBees 对托管在 GitHub 上的 Play 应用程序进行持续集成的教程。这旨在提供一个全面的指南：

[http://ics-software-engineering.github.io/play-example-continuous-integration/](http://ics-software-engineering.github.io/play-example-continuous-integration/)

# android - 在android中解析字符串到日期并进行比较

> ID：15429450
> 
> 赞同：0
> 
> 时间：2013-03-15T10:05:27.033
> 
> 标签：android

我有个问题。我有两个字符串。每个元素都有日期格式。我可以`Date.parse(string)`用来解析字符串到日期。现在我有一个问题，如何比较这两个字符串，因为我想检查哪个日期更高。如果我有一个字符串`6-05-2012`和第二个字符串，`12-05-2012`我想检查哪个日期更高（在这种情况下是`12-05-2012`）。我怎么能这样做？也许是其他方式，没有解析到日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:07:21.140

像这样做。

您也可以使用`after`and`before`方法。

[在这里](http://developer.android.com/reference/java/util/Date.html)检查。

```
public void compareDate() {
    try {
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
        Date date1 = sdf.parse("2009-12-31");
        Date date2 = sdf.parse("2010-01-31");

        if(date1.compareTo(date2)>0){
            Log.v("app","Date1 is after Date2");
        }else if(date1.compareTo(date2)<0){
            Log.v("app","Date1 is before Date2");
        }else if(date1.compareTo(date2)==0){
            Log.v("app","Date1 is equal to Date2");
        }
    } catch(Exception e) { }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T10:09:27.390

```
private Date compareDates(final String dateString)
{

    SimpleDateFormat  format = new SimpleDateFormat("dd-MM-yyyy");  
    Date date = null;
    try {  
        format.parse(dateString);  
    } catch (Exception e) {  
        Log.d(getClass().getName(), e.getMessage());           
    }
    return date;
} 
```

现在您可以比较两个日期。希望这将有助于更多参考，`SimpleDateFormat`请[在此处查看](http://developer.android.com/reference/java/text/SimpleDateFormat.html)。Noe 你可以`date.getTime()`用来比较你的日期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T10:09:30.217

尝试这个 -

```
String dtStart = "2010-10-15T09:27:37Z";  
SimpleDateFormat  format = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");  
try {  
    Date date = format.parse(dtStart);  
    System.out.println(date);  
} catch (ParseException e) {  
    // TODO Auto-generated catch block  
    e.printStackTrace();  
} 
```

或者

```
public static long compareTo( java.util.Date date1, java.util.Date date2 )  
{  
//returns negative value if date1 is before date2  
//returns 0 if dates are even  
//returns positive value if date1 is after date2  
  return date1.getTime() - date2.getTime();  
} 

String strDate1 = "10-JAN-1920";  
String strDate2 = "10-APR-1950";  

SimpleDateFormat sdf = new SimpleDateFormat( "dd-MMM-yyyy" );  
java.util.Date d1 = sdf.parse( strDate1 );  
java.util.Date d2 = sdf.parse( strDate2 );  

System.out.println( "1\. " + sdf.format( d1 ).toUpperCase() );  
System.out.println( "2\. " + sdf.format( d2 ).toUpperCase() );  

if ( compareTo( d1, d2 ) < 0 )  
{  
   System.out.println( "d1 is before d2" );  
}  
else if ( compareTo( d1, d2 ) > 0 )   
{  
   System.out.println( "d1 is after d2" );  
}  
else  
{  
   System.out.println( "d1 is equal to d2" );  
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T10:13:04.003

我这是比较日期的另一种最佳方法，它使用日期类本身

```
 void dateComparator() throws ParseException {
      SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
      Date date1 = sdf.parse("2009-12-31");
      Date date2 = sdf.parse("2010-01-31");

      if (date1.before(date2)) {
         System.out.println("Date1 is before Date2");
      } else if (date1.after(date2)) {
         System.out.println("Date1 is after Date2");
      } else if (date1.equals(date2)) {
         System.out.println("Date1 is equal to Date2");
      } else {
         System.out.println("How to get here?");
      }
   } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T10:08:18.203

你最好使用 Joda 时间。有关详细信息，请参阅[http://joda-time.sourceforge.net/index.html](http://joda-time.sourceforge.net/index.html)。标准 API 在某种程度上是有限和复杂的，并迫使你重新发明在 Joda 时代已经制作的方法

# c++ - C++类中的ID数据成员

> ID：15429451
> 
> 赞同：5
> 
> 时间：2013-03-15T10:05:28.317
> 
> 标签：c++, data-structures, types, datamember

我的老师要求我们创建自动生成的ID数据成员，并且一旦建立就不能修改。最合适的类型是什么？如果答案是 **static const int ID；**

我怎样才能在它是 const 时自动生成它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T10:15:18.607

由于 ID 必须是唯一的，因此应确保两个实例永远不会获得相同的 ID。此外，课堂外的任何人都不应干预 UID 的生成。

首先，在类中定义一个静态字段：

```
class Data
{
private:
    static int newUID;

(...)
};

// The following shall be put in a .cpp file
int Data::newUID = 0; 
```

然后，在创建每个实例之后，它应该采用一个新的 ID 值并增加 newUID 计数器：

```
class Data
{
(...)
    const int uid;  

public:
    Data()
        : uid(newUID++)
    {
    }

    int GetUid()
    {
        return uid;
    }
}; 
```

除了类，没有人可以访问内部 newUID，ID 是为每个实例自动生成的，并且您（几乎¹）确定没有两个实例具有相同的 ID 号。

* * *

¹除非您生成略多于 40 亿个实例

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T10:15:38.363

这是一个例子：

```
class SomeClass {
   static int currID;

public:
   const int ID;

   SomeClass() :
      ID(currID++) {  // Initialization list used to initialize ID

   }
}; 
```

你必须把它放在你的 .cpp 文件中的某个地方：

```
int SomeClass::currId = 0; 
```

这使用[初始化列表](https://stackoverflow.com/questions/4589237/c-initialization-lists)来解决问题。我们必须这样做，因为它仅在您可以分配给`const`实例中的成员的初始化列表中。

核心概念是您必须有一个“全局设置”来跟踪将分配给将来创建的实例的 ID。在`currID`这个例子中。对于在您的类中创建的每个实例，您将 的值分配为该`currID`实例的 ID，然后将其递增 ( `currID`)。通过这种方式，您可以获得具有唯一 ID 的实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T10:09:12.383

创建一个 const ID 作为 int ，在构造函数初始化列表中对其进行初始化，如

```
 SomeClass(): id(++staticIncrementingInt){
   ///other stuf here
 } 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T10:22:28.040

您实际上可以在构造初始化列表中调用一个函数（在本例中为*rand ）。*现在由您决定如何播种。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-15T10:32:30.360

如果您的老师允许使用 boost 库，请尝试[Boost.Uuid](http://www.boost.org/doc/libs/1_53_0/libs/uuid/)。一个例子是[here](https://stackoverflow.com/questions/3247861/example-of-uuid-generation-in-c)。它符合[RFC 4122 。](http://tools.ietf.org/pdf/rfc4122.pdf)

# django - 使用 django doc 时出错

> ID：15429454
> 
> 赞同：0
> 
> 时间：2013-03-15T10:05:41.683
> 
> 标签：django

我在 ./manage.py shell 中输入的以下代码

> > > import datetime
> > > from django.db import models
> > > class ContactForm(forms.Form):
> > > ... date = DateField(widget=CalendarWidget)
> > > ... name = CharField(max_length=40, widget=OtherWidget)
> > > ...
> > > Traceback (最近的电话last):
> > > File "", line 1, in
> > > File "", line 2, in ContactForm
> > > NameError: name 'DateField' is not defined
> > > 
> > > 如果还有什么要导入的。如果是这样，请告诉我，并提前感谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:08:12.203

```
class ContactForm(forms.Form):
    date = forms.DateField(widget=CalendarWidget)
    name = forms.CharField(max_length=40, widget=OtherWidget) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T10:10:41.117

您应该导入`django.forms`：

```
from django import forms

class ContactForm(forms.Form):
    date = forms.DateField(widget=CalendarWidget)
    name = forms.CharField(max_length=40, widget=OtherWidget) 
```

编辑：或者让你的代码工作，你可以这样做：

```
from django import forms
from django.forms.fields import *

class ContactForm(forms.Form):
    date = DateField(widget=CalendarWidget)
    name = CharField(max_length=40, widget=OtherWidget) 
```

# c# - 是否可以“在运行时使用别名”？

> ID：15429460
> 
> 赞同：0
> 
> 时间：2013-03-15T10:06:16.860
> 
> 标签：c#, using, using-directives

```
namespace
    {
    using Itest = IMyInterface
    } 
```

> 然后我将 Itest 用于其余代码但根据新要求，根据某些条件，我需要在运行时设置别名。>喜欢使用 Itest = {pick at runtime}

# java - java如何管理会导致其性能不佳的hashmap大小分配？

> ID：15429466
> 
> 赞同：2
> 
> 时间：2013-03-15T10:06:22.073
> 
> 标签：java, hash, hashmap, hashtable, hashcode

例如，如果我分配一个大小为 100 的 Hashmap，并且如果创建了 100 个存储桶，那么 Hashmap 的性能会不会很差？（因为执行模块化散列不会在所有 100 个桶中均匀分配密钥）

java如何处理这个问题？它是否随机选择接近 100 的素数作为 Hashmap 大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:11:02.290

正如您在[源代码](http://www.docjar.com/html/api/java/util/HashMap.java.html)中看到的那样，它选择了下一个最大的 2 次幂（第 197 行 ff）：

```
 // Find a power of 2 >= initialCapacity
       int capacity = 1;
       while (capacity < initialCapacity)
           capacity <<= 1;

       this.loadFactor = loadFactor;
       threshold = (int)(capacity * loadFactor);
       table = new Entry[capacity]; 
```

# windows-phone - 在 windows phone 中操作滑块时提高软件响应能力

> ID：15429473
> 
> 赞同：1
> 
> 时间：2013-03-15T10:06:33.747
> 
> 标签：windows-phone

我的 windows phone 7.1 项目中有一个滑块。操作时，此滑块会触发一个事件，该事件启动后台工作程序以执行多个三角运算。

如果我在滑块上移动光标，虽然我在操作启动事件中实现了后台工作程序 cancelAsync 方法，但我的响应会有一定的延迟，我想要更多的响应能力，我该如何实现？

代码：

```
 private void sliderCosinus_ManipulationStarted(object sender,ManipulationStartedEventArgs e)
    {
        if (bw.WorkerSupportsCancellation == true)
        {
            bw.CancelAsync();   // Cancel the asynchronous operation.
        }
    }

     private void sldCosinus_ManipulationCompleted(object sender, ManipulationCompletedEventArgs e)
    {
        try
        {
            Value = Convert.ToInt32(sldCosinus.Value) * 10;
        }
        catch
        {
             // errore message here
        }
        finally 
        {
        }
    }
     private void bw_DoWork(object sender, DoWorkEventArgs e)
    {
        BackgroundWorker worker = sender as BackgroundWorker;

            if ((worker.CancellationPending == true))
            {
                e.Cancel = true;
            }
            else
            {
                Dispatcher.BeginInvoke(() => app.IsEffectApplied=TrigonometricTrans()
    // TrigonomtriecTrans calculate sin and cosinus for every pixel in image 
            }
    }
    private void bw_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        // progress bar here 
    }
    private void bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        if ((e.Cancelled == true))
        {
            //this.tbProgress.Text = "Canceled!";
        }
        else if (!(e.Error == null))
        {
            //this.tbProgress.Text = ("Error: " + e.Error.Message);
        }
        else
        {
           DoubleBufferToScreen();
        }
    } 
```

# java - 如何使用 ScheduledExecutorService 实现固定速率轮询器？

> ID：15429474
> 
> 赞同：4
> 
> 时间：2013-03-15T10:06:35.807
> 
> 标签：java, multithreading, scheduled-tasks, runnable, scheduledexecutorservice

给定以下课程：

```
public class Poller implements Runnable {
    public static final int CORE_POOL_SIZE = 4;

    public boolean running;
    public ScheduledExecutorService ses;

    public void startPolling() {
        this.ses = Executors.newScheduledThreadPool(CORE_POOL_SIZE);
        this.ses.scheduleAtFixedRate(this, 0, 1, TimeUnit.SECONDS);
    }

    public void run() {
        running = true;
        // ... Do something ...
        running = false;
    }
} 
```

核心线程池大小为 4 ，`ScheduledExecutorService`但会创建多个轮询线程吗？既然`this`被传递到`scheduleAtFixedRate`，这是否意味着只会有一个线程 - 或者在幕后发生更复杂的事情？

还有 2 个奖励问题：-

1.  应该`running`是`static`？
2.  是`CORE_POOL_SIZE`多余的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T10:20:29.977

> ScheduledExecutorService 的核心线程池大小为 4，但是否会创建多个轮询线程？

这取决于 - 如果您运行程序足够长的时间，它可能会创建 4 个线程。如果您只运行一次或两次计划任务后退出，您可能只会看到 2 或 3 个线程。

为什么这有关系？

监视线程创建的一种方法是提供您自己的`ThreadFactory`：

```
this.ses = Executors.newScheduledThreadPool(CORE_POOL_SIZE, new ThreadFactory() {

            @Override
            public Thread newThread(Runnable r) {
                System.out.println("Creating thread");
                return new Thread(r);
            }
        }); 
```

> 跑步应该是静态的吗？

这取决于您要实现的目标...由于您在示例中并没有真正使用它，因此很难说。例如，如果您有多个 Poller 实例并且您不希望它们同时运行，您可能需要将其设为静态。

无论是静态的还是非静态的，如果你把它作为一个标志使用，你应该让它变得易变以确保可见性。

> CORE_POOL_SIZE 是多余的吗？

不明白你的意思。它是一个强制参数，因此您需要提供一个值。如果您确定不会同时运行两个执行，那么您只能有一个线程。这也将阻止并发执行（因此，如果一个计划任务需要启动但另一个已在运行，则新任务将被延迟）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T04:27:00.827

**scheduleAtFixedRate (Runnable, long initialDelay, long period, TimeUnit timeunit)**

此方法调度要定期执行的任务。该任务在 initialDelay 之后第一次执行，然后每次周期到期时重复执行。

如果给定任务的任何执行引发异常，则不再执行该任务。如果没有抛出异常，任务将继续执行，直到 ScheduledExecutorService 关闭。

**如果一个任务的执行时间比其计划执行之间的时间长，则下一次执行将在当前执行完成后开始。计划任务一次不会被多个线程执行。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T11:06:59.643

你为什么把你的执行者服务放在`Runnable`课堂上？您应该将您的`ScheduledExecutorService`作为 Singleton 分开，而不是作为可运行类的变量。

提醒这`ScheduledExecutorService`是一个线程容器，所以当你编码时

```
this.ses = Executors.newScheduledThreadPool(CORE_POOL_SIZE); 
```

当您放置此代码时，它将同时基于大小的值创建很多线程

```
this.ses.scheduleAtFixedRate(this, 0, 1, TimeUnit.SECONDS); 
```

将`ScheduledExecutorService`随机选择一个空闲的线程每 1 秒运行一次此类，直到它完成。如果您`sleep`输入的运行方法长于传递给预定线程的周期时间值，则在第一个线程完成之前，它不会创建另一个线程。因此，如果您希望多个线程同时运行它`Poller`，则创建多个`Poller`实例并将其传递给`ScheduledExecutorService`

`CORE_POOL_SIZE`它对我来说不是多余的，最好是从配置文件中获取的常量。

跑步应该是静态的吗？这取决于你需要什么。如果您打算创建多个实例，`Poller`那么您不应该

# jquery - 用jquery关注ajax结果中的下一个链接

> ID：15429476
> 
> 赞同：2
> 
> 时间：2013-03-15T10:06:39.587
> 
> 标签：jquery

我想使用向上/向下箭头键来选择搜索结果中的项目，

下一个链接不会集中但是，我做错了什么？

住在[http://jsfiddle.net/JJDfL/1/](http://jsfiddle.net/JJDfL/1/)

```
$('#hitbox').on('keyup','a', function(event) {
    //focus prev/next with arrows, enter and escape
    if (event.keyCode == 27) {
      $('#hitbox').slideUp(100);
      $('#searchbox').val('');
      $('#searchbox').focus();
    }
    if(event.keyCode == 40) {
      var focused = $(':focus');    
      focused.parent().next().focus();
      alert(focused.parent().next().html()); //returns '<a href="asdf">bb</a>'
    }
  }); 
```

更新：

现在工作：

```
 focused.parent().next().find('a').focus(); 
```

解决了这个问题。

[http://jsfiddle.net/JJDfL/4/](http://jsfiddle.net/JJDfL/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:38:43.023

编辑：

有几个问题，但我编辑了你的小提琴，它应该适合你：http: [//jsfiddle.net/JJDfL/6/](http://jsfiddle.net/JJDfL/6/)

问题 1：当您按下时（一旦您选择了第一个链接），您没有选择正确的元素。通过以下方式修复：

```
$(this).parent().next().find("a").focus(); 
```

注意 .find("a") 选择 <p> 元素内的 <a> 元素，您也可以使用 children("a") 方法。

问题 2：您没有停止事件的传播，这也会使事件触发最近关注的项目，通过以下方式解决：

```
event.stopPropagation(); 
```

此外，如果您在函数完成后返回，您的查询变量似乎是不必要的。

# python-2.7 - 无法打开包含文件：'libxml/xmlversion.h'：没有这样的文件或目录

> ID：15429482
> 
> 赞同：0
> 
> 时间：2013-03-15T10:06:53.777
> 
> 标签：python-2.7

尝试安装“lxml-3.1.0”时，出现以下错误。

```
C:\Users\affine\Desktop\lib\lxml-3.1.0\src\lxml\includes\etree_defs.h(9) : 
    fatal  error C1083: Cannot open include file: 'libxml/xmlversion.h':
    No such file or directory
    error: command '"C:\Program Files\Microsoft Visual Studio 10.0\VC\BIN\cl.exe"'
    failed with exit status 2 
```

有人可以帮助我理解这一点并克服这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-17T15:31:01.870

当我想`pyshark==0.3.3`为 python2.7 安装时，有一个错误`xslt-config`。它的建议是为python2.7安装VC++9.0。`Microsoft Visual C++ Compiler for Python 2.7`从[http://www.microsoft.com/en-us/download/details.aspx?id=44266](http://www.microsoft.com/en-us/download/details.aspx?id=44266)下载后，我安装了它。然后发生了类似的错误：

> src\lxml\includes\etree_defs.h(14)：致命错误 C1083：无法打开包含文件：'libxml/xmlversion.h'：没有这样的文件或目录编译失败：命令'C:\Users\Jeremy\AppData\Local \Programs\Common\Microsoft\Visual C++ for Python\9.0\VC\Bin\cl.exe' 失败，退出状态为 2

因此，我使用以下目录中的`lxml`命令在 Windows 命令提示符中安装：`easy_install.exe lxml``G:\ProgramFiles\Python27\Scripts`

```
 G:\ProgramFiles\Python27\Scripts>easy_install.exe lxml 
```

在我第一次运行此命令时，它回答了我超时。然后我再次运行它，它确实有效。

# android - 在 Viewpager 中，自定义 ListView 文本颜色不会根据主题而改变

> ID：15429486
> 
> 赞同：1
> 
> 时间：2013-03-15T10:06:59.727
> 
> 标签：android, android-viewpager, android-theme, custom-lists, textcolor

在我的应用程序中，我`ViewPager`在主屏幕中有一个，其中 2 个片段具有**自定义 ListViews**。该应用程序具有不同的主题，每个主题中具有不同的文本颜色。

我已经在不同的主题下实现了 XML 本身的所有 UI 属性，并且工作正常，除了我从代码控制的***ViewPager 内的自定义 ListViews 中的 TextColor 。***

**问题：如何从 XMl 控制 TextColor？**

我尝试将 3 个主题的颜色属性设置为`TextStyle`、`TextAppearence`等`TextColor`。但是当这些自定义 ListView 不在 ViewPager 中时，相同的代码正在工作时没有任何效果。

我没有添加任何特定代码，因为我尝试了很多方法。但作为示例，这是我用于设置 TextColor 的代码。

```
android:textColor="?attr/listItemContentTextColor" 
```

属性在哪里，

```
 <attr name="listItemContentTextColor" format="color" /> 
```

在主题中指定为，

```
<item name="listItemContentTextColor">@android:color/white</item> 
```

有什么办法可以从 XML 本身控制它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:42:27.023

好吧，我找到了我的问题的答案。

我无法从 XML 本身控制它，但我可以*动态*实现它而不是硬编码它。**:)**

问题仅**在于 ViewPager**中的那些自定义列表视图没有从 XML 中获取属性。这就是我解决它的方法。

在**/values/attr.xml**

```
 <attr name="listFontColor" format="color" /> 
```

在每个 中`Theme`，我相应地设置了 listFontColor 属性值。

```
<item name="listFontColor">@android:color/white</item> 
```

我没有检查代码中的每个主题，而是获取了当前主题并在我的代码中分配了字体颜色，`Adapter`就像这样，

```
//dynamically fetching the theme's list font Color and setting it to textview
TypedArray a = ((MyActivity)context).getTheme().obtainStyledAttributes(((MyApplication)(context.getApplicationContext())).getcurrentTheme(), new int[] {R.attr.listFontColor});     
int attributeResourceId = a.getResourceId(0, 0);
listTitle.setTextColor(context.getResources().getColor(attributeResourceId)); 
```

感谢您的[参考](https://stackoverflow.com/a/8794120/1237656) **:)**

# c# - 浮动错误计算

> ID：15429487
> 
> 赞同：2
> 
> 时间：2013-03-15T10:07:00.780
> 
> 标签：c#

结果必须是 806603.77 但为什么我得到 806603.8 ？

```
float a = 855000.00f;
float b = 48396.23f;

float res = a - b;
Console.WriteLine(res);
Console.ReadKey(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T10:13:26.253

A `float`（也称为`System.Single`）的精度相当于大约**七位**小数。您的`res`差异需要**八位**有效的十进制数字。因此，可以预期 a 中没有足够的精度`float`。

添加：

一些额外信息：接近 806,000（806,000），a`float`只剩下四位用于小数部分。所以`res`它必须在

```
806603 + 12/16 == 806603.75000000, and
806603 + 13/16 == 806603.81250000 
```

它选择第一个，因为它最接近理想结果。但是这两个值都`"806603.8"`在调用时输出`ToString()`（`Console.WriteLine(float)`确实调用）。`ToString`一般调用最多显示 7 位有效小数。要显示两个浮点数是不同的，即使它们使用标准格式打印相同，请使用格式字符串`"R"`，例如

```
Console.WriteLine(res.ToString("R")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T10:13:34.397

您应该改用[小数](http://msdn.microsoft.com/en-us/library/364x0z75%28v=vs.80%29.aspx)，因为[float](http://msdn.microsoft.com/en-us/library/b1e65aza%28v=vs.80%29.aspx)仅具有***7 位***精度，这就是结果不同的原因，另一方面具有***28-29 位***精度。`32-bit`*`decimal``128-bit`*

 **```
decimal a = 855000.00M;
decimal b = 48396.23M;

decimal res = a - b;
Console.WriteLine(res);
Console.ReadKey(); 
```

输出：`806603.77`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T10:09:52.677

因为`float`精度有限（32 位）。使用`double`or`decimal`如果你想要更精确。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T10:23:57.733

请注意，仅仅盲目地使用 Decimal 是不够的。

阅读 Oded 发布的链接：[每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

*然后才*决定使用适当的数字类型。

不要陷入认为只使用 Decimal 就能得到准确结果的陷阱；它不会总是。

考虑以下代码：

```
Decimal d1 = 1;
Decimal d2 = 101;
Decimal d3 = d1/d2;
Decimal d4 = d3*d2; // d4 = (d1/d2) * d2 = d1

if (d4 == d1)
{
    Console.WriteLine("Yay!");
}
else
{
    Console.WriteLine("Urk!");
} 
```

如果 Decimal 计算准确，则该代码应打印“Yay！” 因为 d1 应该和 d4 一样，对吧？

好吧，它没有。

另请注意，十进制计算比双精度计算慢数千倍。它们并不总是适用于非货币计算（例如计算像素偏移或物理事物，如速度，或任何涉及超越数等）。**

# silverlight - 列表框首先显示第二项

> ID：15429490
> 
> 赞同：0
> 
> 时间：2013-03-15T10:07:04.733
> 
> 标签：silverlight, xaml, windows-phone-8

我目前正坐在 Silverlight-Listbox 上，并且在正确设置我的 listBox 时遇到了一些麻烦。

它（视觉上）从第二个项目开始。我必须向上滚动才能看到第一个。

为什么会发生这种情况，我该如何解决？

```
<ListBox x:Name="ServingsList" 
        Foreground="White" 
        Background="#FFB88A8A" 
        SelectionChanged="servingSelected" 
        Margin="0,0,0,297">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Height="70" Width="432">
                <Rectangle x:Name="Linie" 
               Fill="#FF8D8D8D" 
               HorizontalAlignment="Right" 
               Height="2" 
               StrokeThickness="0" 
               VerticalAlignment="Top" 
               Width="380" 
               Margin="0,-30,0,0" />
                <TextBlock x:Name="ServingTitel" 
               TextWrapping="Wrap" 
               Text="{Binding name}" 
               FontSize="21.333" 
               Margin="50,-60,0,0" />
                <Image x:Name="Ribbon" 
               HorizontalAlignment="Right" 
               Height="30" 
               VerticalAlignment="Top" 
               Width="151" 
               Source="/TEX/GrayRibbon.png" 
               Stretch="UniformToFill" 
               Margin="0,-60,0,0" />
                <TextBlock x:Name="Kcal" 
               TextWrapping="Wrap" 
               Text="{Binding kalorien]}" 
               FontSize="18.667" 
               Height="23" 
               Margin="0,-92,8,0" 
               TextAlignment="Right" />
                <Button Content="1" 
               Width="55" Height="55" 
               BorderThickness="3" 
               FontSize="18.667" 
               Padding="-1,-2,0,0" 
               Margin="-400,-87,0,0" 
               FontWeight="Bold" 
               Click="servingButtonClicked" />
            </StackPanel>
        </DataTemplate>
    </ListBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:34:05.997

您需要检查您的`Margin`值 - 在主列表中，您在列表框下方放置了 297 像素的空白。其他元素也有奇怪的值。如果从 StackPanel 更改为 Grid，Expression Blend 有时会弄乱边距。

例如：Margin="0,0,0,297">

# android - 如何在您的 Android 应用程序中使用 google 帐户

> ID：15429491
> 
> 赞同：3
> 
> 时间：2013-03-15T10:07:07.167
> 
> 标签：android, authentication, accountmanager

我想开发一个 Android 应用程序，允许用户使用他们的 Google 帐户登录（我认为它始终是一个电子邮件地址），而不是强迫用户创建一个新帐户。我对此有3个问题：

*   当用户第一次启动应用程序时，我必须使用 AccountManager，对吗？如果用户只有一个 com.google 帐户，我会使用那个帐户，如果没有，我会问他要使用哪个帐户。我的问题是，我能否确定 AccountManager 中的每个 com.google 帐户都经过了正确的身份验证，并且应用程序可以确定用户是他所说的那个人，这样我就不必让他选择帐户每次应用程序启动时？

*   该应用程序将有一个服务器，该服务器将在数据库中存储用户已解锁的受限内容，这就是它需要 Google 帐户的原因，以将用户的外键与内容的外键匹配以了解该用户已解锁的内容. 您如何建议我将 Google 帐户保存在数据库中作为用户表的主键？我可以存储 Google 帐户的电子邮件，但这不会有任何隐私问题吗？我还能用什么？我想 Google 帐户没有类似 Facebook ID 的整数值。

*   我是否需要对我提到的任何这些操作使用 OpenID 或 oAuth 2.0？我问这个是因为当应用程序没有互联网连接时，我希望用户仍然能够访问他解锁并先前下载到手机中的受限内容。如果我使用需要互联网连接的 OpenID，对吗？所以用户不应该能够进入应用程序，这不是我想要的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:27:47.740

使用客户经理检查手机上可用的帐户并询问用户他想使用哪个帐户听起来是个好主意。我认为使用 OAuth 2.0 并在客户端应用程序中获取用户信息的 OAuth 2.0 访问令牌（[可能](https://developers.google.com/accounts/docs/OAuth2Login#scopeparameter)`https://www.googleapis.com/auth/userinfo.profile`是您想要使用的范围）并在客户端与服务器通信时将其发送到您的服务器是一个好主意。然后使用[userinfo Google API](https://developers.google.com/accounts/docs/OAuth2Login) ，您的服务器可以使用访问令牌来确保用户是他声称的那个人。使用此 api，您可以获取可以使用的用户 ID，而不是用户的电子邮件。

获取身份验证令牌将需要访问 Internet，但由于仅在与自己的服务器通信时才需要它，因此您可以在那时获取令牌。

我不能 100% 确定 AccountManager 提供的帐户是否可以信任，但它会为您提供手机上可用的 google 帐户，而且我不知道有任何方法可以在没有访问权限的情况下将帐户添加到手机到帐户。如果这是可能的，那也将是一个非常大的安全问题，所以我认为您可以相信 AccountManager 提供的帐户是真实的。

当您在客户端上获得 OAuth 2.0 令牌时，如果可能的话，我建议您使用 Google Play 的 GoogleAuthUtil 而不是帐户管理器。有关这方面的更多详细信息，请参阅：[简而言之，使用 OAuth2 请求 getAuthToken 和 getToken 有什么区别](https://stackoverflow.com/questions/14365219/in-a-nutshell-whats-the-difference-from-using-oauth2-request-getauthtoken-and-g/)

# javascript - jQuery - MaxImage 2.0 和 Cycle - 具有单独循环选项的多个幻灯片

> ID：15429497
> 
> 赞同：0
> 
> 时间：2013-03-15T10:07:10.357
> 
> 标签：javascript, jquery, jquery-cycle

我有一个使用[MaxImage 2.0](http://www.aaronvanderzwan.com/maximage/) jQuery 插件（又使用[jQuery Cycle](http://jquery.malsup.com/cycle/)）的带有两个幻灯片的页面。

MaxImage 允许您传递循环插件的选项。我遇到的问题是只有最后一组循环选项生效。这似乎也适用于其他一些 MaxImage 选项，包括“fillElement”。

这是我的 jQuery：

```
$(function () {
$('#slider-one').maximage({
    cycleOptions: {
        fx: 'fade',
        speed: 800,
        timeout: 1000,
    },
    fillElement: '#panel-one',
    backgroundSize: 'contain'
});
});

$(function () {
$('#slider-two').maximage({
   cycleOptions: {
       fx: 'fade',
       speed: 800,
       timeout: 2000,
     },
     fillElement: '#panel-two',
     backgroundSize: 'contain'
});

}); 
```

以及 jsfiddle 上的所有内容 - [http://jsfiddle.net/seanhawkridge/FNgXe/1](http://jsfiddle.net/seanhawkridge/FNgXe/1) - 如果您删除/注释掉第二个函数，您就会明白我的意思。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-25T11:50:14.147

如果您仍然需要问题的答案 - 您应该在第一个回调中运行第二个幻灯片（由 Maximage [http://blog.aaronvanderzwan.com/2012/07/maximage-2-0/提供的 onFirstImageLoaded 或 onImagesLoaded #选项](http://blog.aaronvanderzwan.com/2012/07/maximage-2-0/#options)）

```
$(function () {
$('#slider-one').maximage({
    cycleOptions: {
        fx: 'fade',
        speed: 800,
        timeout: 1000,
    },
    fillElement: '#panel-one',
    backgroundSize: 'contain',
    onImagesLoaded: function() {
        $('#slider-two').maximage({
           cycleOptions: {
               fx: 'fade',
               speed: 400,
               timeout: 2000,
             },
             fillElement: '#panel-two',
             backgroundSize: 'contain'
        });       
    }

});
}); 
```

结帐[http://jsfiddle.net/FNgXe/30/](http://jsfiddle.net/FNgXe/30/)。

# c# - 使用任务并行库时得到奇怪的结果？

> ID：15429500
> 
> 赞同：2
> 
> 时间：2013-03-15T10:07:20.313
> 
> 标签：c#, .net, multithreading, c#-4.0, task-parallel-library

我正在尝试使用 TPL 执行一些过滤任务。在这里，我正在简化代码以根据条件过滤数字。这是代码。

```
public static void Main (string[] args)
    {
        IEnumerable<int> allData = getIntData ();

        Console.WriteLine ("Complete Data display");
        foreach (var item in allData) {
            Console.Write(item);
            Console.Write(" | ");
        }

        Console.WriteLine ();
        filterAllDatas (ref allData, getConditions ());

        foreach (var item in allData) {
            Console.Write(item);
            Console.Write(" | ");
        }
        Console.WriteLine ();
    }

    static void filterAllDatas(ref IEnumerable<int> data, IEnumerable<Func<int,bool>> conditions)
    {
        List<int> filteredData = data.ToList ();
        List<Task> tasks = new List<Task>();
        foreach (var item in data.AsParallel()) {
            foreach (var condition in conditions.AsParallel()) {

                tasks.Add(Task.Factory.StartNew(() => {
                    if (condition(item)) {
                        filteredData.Remove(item);
                    }
                }));

            }
        }
        Task.WaitAll(tasks.ToArray());
        data = filteredData.AsEnumerable ();
    }
    static IEnumerable<Func<int,bool>> getConditions()
    {
        yield return (a) => { Console.WriteLine("modulo by 2"); return a % 2 == 0;};
        yield return (a) => { Console.WriteLine("modulo by 3"); Thread.Sleep(3000); return a % 3 == 0;};

    }
    static IEnumerable<int> getIntData ()
    {
        for (int i = 0; i < 10; i++) {
            yield return i;
        }
    } 
```

在这里，过滤掉除以二或三的整数是简单的代码。现在，如果我删除该线程睡眠代码可以完美地工作，但如果我说它不是。

通常意味着没有 Thread.Sleep ，两个条件都执行 10 次，例如每个数字。但如果我添加 Thread.Sleep 第一个条件执行 7 次，第二个条件执行 13 次。并且由于这几个数字跳过了条件。我尝试调试但没有得到任何可以指出我的代码问题的东西。

有什么好的方法可以实现这一目标吗？像数据上的过滤条件可以异步和并行工作以提高性能吗？

代码仅用于演示目的。

仅供参考：目前我在 Windows 机器上使用 Mono 和 Xamarine studio。

如果需要任何进一步的细节，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:18:21.007

我猜这与你的任务的 lambda 如何关闭循环变量有关`condition`。尝试如下更改：

```
 foreach (var condition in conditions.AsParallel()) {
            var tasksCondition = condition
            tasks.Add(Task.Factory.StartNew(() => {
                if (tasksCondition(item)) {
                    filteredData.Remove(item);
                }
            })); 
```

请注意，您还关闭了循环变量`item`，这可能会导致类似的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T13:27:40.400

首先，您可以更改 getConditions 方法以查看内部发生的情况：

```
static IEnumerable<Func<int, bool>> getConditions()
{
    yield return (a) => { Console.WriteLine(a + " modulo by 2"); return a % 2 == 0; };
    yield return (a) => { Console.WriteLine(a + " modulo by 3"); Thread.Sleep(3000); return a % 3 == 0; };
} 
```

如果您停止捕获 foreach 的变量，它将起作用：

```
static void filterAllDatas(ref IEnumerable<int> data, IEnumerable<Func<int, bool>> conditions)
{
    List<int> filteredData = data.ToList();
    List<Task> tasks = new List<Task>();
    foreach (var item in data.AsParallel())
    {
        var i = item;
        foreach (var condition in conditions.AsParallel())
        {
            var c = condition;
            tasks.Add(Task.Factory.StartNew(() =>
            {
                if (c(i))
                {
                    filteredData.Remove(i);
                }
            }));

        }
    }
    Task.WaitAll(tasks.ToArray());
    data = filteredData.AsEnumerable();
} 
```

# android - 如何将字符串值传递给android中单独的异步任务？

> ID：15429503
> 
> 赞同：0
> 
> 时间：2013-03-15T10:07:25.667
> 
> 标签：android, android-asynctask

我为异步任务创建了一个单独的类。如何将字符串值传递给该异步任务类？请参考下面我的代码。

**在 Main 类中调用异步任务类**

```
 String product_id,av_quantity;
 Stock_updatetask = new Stock_update();
 Stock_updatetask.execute(product_id,av_quantity); 
```

如何将字符串 product_id、av_quantity 值发送​​到异步任务类

**异步任务类**

```
public class Stock_update extends AsyncTask<String, Void, String> {

JSONObject json = new JSONObject();

JSONArray jsonarray;

protected String doInBackground(String... params) {

    try {

        // checkInternetConnection();

        HttpClient client = new DefaultHttpClient();
        HttpConnectionParams.setConnectionTimeout(client.getParams(),20000);
        HttpConnectionParams.setSoTimeout(client.getParams(), 20000);

        HttpResponse response;

        HttpPost post = new HttpPost("http://www.name.in/cakefoodnew/customer/stockUpdate?json=");

        /*json.put("submenu_id", "" + product_id);
        json.put("available_quantity", "" + av_quantity);*/
        // Log.v("id", ""+json);

        post.setHeader("json", json.toString());
        StringEntity se = new StringEntity(json.toString());

        se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE,"application/json"));
        post.setEntity(se);
        response = client.execute(post);

        if (response != null) {
            // get a data
            InputStream in = response.getEntity().getContent();
            String a = convertStreamToString(in);
            // Log.v("id", ""+a);

            try {

                jsonarray = new JSONArray("[" + a + "]");
                json = jsonarray.getJSONObject(0);
                //stock_update = (json.getString("Success"));

            } catch (Exception e) {

            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }

    return null;
}
}

// Json response
private String convertStreamToString(InputStream is) {
        // TODO Auto-generated method stub
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
        StringBuilder sb = new StringBuilder();

        String line = null;

        try {
            while ((line = reader.readLine()) != null) {

                sb.append(line + "\n");
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                is.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return sb.toString();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:09:35.820

在方法中获取 product_id,av_quantity 值 `doInBackground`：

```
 //....your code here...
   json.put("submenu_id", "" + params[0]); //<<<< get product_id
   json.put("available_quantity", "" + params[1]); //<<< get av_quantity
    // Log.v("id", ""+json);

    post.setHeader("json", json.toString()); 
```

因为`doInBackground`方法参数是`Varargs`您可以在此处获得有关 Varargs的更多信息

[http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)

或者第二种方法是您可以通过创建`Stock_update`构造函数来传递两个值：

```
public class Stock_update extends AsyncTask<String, Void, String> {
 String product_id,av_quantity;
public Stock_update(String product_id,String av_quantity){

   this.product_id=product_id;
   this.av_quantity=av_quantity;
 }
//your code here
} 
```

在创建 Stock_update 类的对象时传递这两个值：

```
Stock_updatetask = new Stock_update(product_id,av_quantity); 
```

现在您可以`product_id,av_quantity`在`Stock_update`全班使用，包括`doInBackground`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:13:28.267

看到这个代码

```
DownloadingProgressTask downloadingProgressTask = new DownloadingProgressTask(
                                    Utilities.arrayRSSDownload.get(0).getUrl(),
                                    mainprogressbar, Utilities.arrayRSSDownload
                                            .get(0).getTitle());
                            downloadingProgressTask.execute(); 
```

然后在课堂上

```
private class DownloadingProgressTask extends
        AsyncTask<String, Integer, Boolean> {

    String fileName;
    ProgressBar progressbar;

    /** progress dialog to show user that the backup is processing. */

    public DownloadingProgressTask(String url1, ProgressBar progress,
            String filetitle) {

        urllink = url1;
        fileName = filetitle;
        progressbar = progress;
    }

    protected void onPreExecute() {

        mainprogressbar.setProgress(0);
        progressbar.setProgress(0);

        myDatabase.updateDownloadStatus(fileName, 2);
        // Updating the home screen list
        setListData();
    }

       --- rest of code 
```

# forms - 静态和非静态方法或全局类对象

> ID：15429508
> 
> 赞同：1
> 
> 时间：2013-03-15T10:07:45.257
> 
> 标签：forms, static, global, non-static

我正在用 VS2012 C++ 制作一个 Windows 窗体应用程序。仅以情况为例，实际项目更复杂：我有一个包含 TextBox、Button 和 Timer 的表单。按钮只是触发计时器。定时器只是调用增加一些变量的函数。我需要在 TextBox 中显示递增的函数变量。

在 Form1.h 我添加代码：

```
 public: void Timer_Function(); //function activated by timer Tick
    void Set_Text(String ^str); //function to set TextBox Text
private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) 
         {
             if (timer1->Enabled == false)  timer1->Enabled = true;
             else   timer1->Enabled = false;
         }
private: System::Void timer1_Tick(System::Object^  sender, System::EventArgs^  e) 
         {
             Timer_Function();
         } 
```

在这样的 My_app.cpp 代码中：

```
#include "stdafx.h"
#include "Form1.h"
#include "resource.h"

using namespace test_staticfunc;
[STAThreadAttribute]

int main(array<System::String ^> ^args)
{
Application::EnableVisualStyles();
Application::SetCompatibleTextRenderingDefault(false); 

Application::Run(gcnew Form1());
return 0;
}

void Form1::Timer_Function()
{
Timer_Func();
}

void Form1::Set_Text(String ^str)
{
textBox1->Text = str;
}

void Timer_Func()
{
static int I=0;
I++;

Form1::Set_Text(I.ToString());
} 
```

函数 Timer_Func() 在“resource.h”中指定，如下所示：

```
void Timer_Func(); 
```

即，我试图通过将 Timer_Func() 的内部变量 I 传递给 Form1 公共方法 Set_Text() 来显示其当前状态。所以。这里的错误是 Set_Text() 不是静态方法。我试图将其设为静态，但收到错误“С2227：“->Text”左侧的操作数不是指向类、结构或联合的指针。” 如何正确处理？在那种情况下，静态方法正在尝试实现非静态方法，对吗？

或另一种方式：制作 Form1 的实例 - 而不是

```
Application::Run(gcnew Form1()); 
```

插入代码

```
Form1 ^My_form = gcnew Form1();
Application::Run(My_form); 
```

并使用 Set_Text 作为类实例 My_form 的非静态方法。但 My_form 仅在 main() 中可用！我无法在其他任何地方制作 My_form。有没有办法让它全球化或什么？

可能有其他方法可以解决这个问题吗？

请帮忙！我已经搜索了几个论坛的答案，但没有找到答案。更准确地说，他们都不适合。PS对不起我的英语不好！^_^

# javascript - 如何在帮助程序中使用 unobustrive JS 重构 link_to_function？

> ID：15429511
> 
> 赞同：1
> 
> 时间：2013-03-15T10:07:57.330
> 
> 标签：javascript, ruby-on-rails, ruby, refactoring, unobtrusive-javascript

我正在使用`link_to_function`我的`ApplicationHelper`一种方法：

```
def link_to_add_fields(name, f, association)
  new_object = f.object.class.reflect_on_association(association).klass.new
  fields = f.fields_for(association, new_object, :child_index => "new_#{association}") do |builder|
    render(association.to_s + "_fields", :f => builder)
  end
  link_to_function(name, ("add_fields(this, '#{association}', '#{escape_javascript(fields)}')").html_safe)
end 
```

由于它将在 Rails 4 中被弃用，我想摆脱`link_to_function`使用 Unobustrive JS。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-18T10:03:07.667

我知道这是一个老问题，但我很高兴用与我完全相同的代码片段遇到这个问题......祝福你 Ryan Bates 和 RailsCasts！

无论如何，这被证明是一个非常简单的重构。您只需将该函数作为 link_to 的“onclick”参数传递：

```
link_to(name, '#', onclick: "add_fields(this, '#{association}', '#{escape_javascript(fields)}')") 
```

# programming-languages - 当（表达式）{做事}

> ID：15429514
> 
> 赞同：6
> 
> 时间：2013-03-15T10:08:05.813
> 
> 标签：programming-languages

有谁知道您可以使用哪种编程语言：

```
when( expression ){ do stuff } 
```

它应该在某个数组中注册表达式和代码块，然后由后台线程每 Q 毫秒/微秒/纳秒解析一次，并且对于每个计算结果为 true 的表达式，执行它各自的代码块。

正如你可能想的那样，我已经有了一个实现。我问是因为我认为在某些编程语言中本地支持它会很好。

对于谁可能会问这样的指令有什么用 - 假设您在程序中创建了一些变量/对象，并且希望每次/而/每当变量/对象具有特定值/状态时都执行一个过程。优点是您不必将代码绑定到变量/对象，甚至在您声明`when(){}`. 这将是某种触发器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-14T22:59:58.313

SR 语言的结构与您要查找的语言非常相似。语法是

```
do guard -> command 
[] guard -> command
[] guard -> command
...
od 
```

您可以在此处找到信息（和实施）：[http ://www.cs.arizona.edu/sr/](http://www.cs.arizona.edu/sr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-09T15:18:59.583

Haskell的[软件事务内存](http://hackage.haskell.org/package/stm-2.4.5.0/docs/Control-Monad-STM.html)库有类似的东西：

```
do
    a <- readTVar x
    b <- readTVar y
    check (a < b)
    writeTVar z (b - a) 
```

`x`这会将and的当前值读取`y`到`a`and`b`中，并等到`a < b`变为 true 后再继续下一行。

它可以在*没有忙等待的情况下*这样做。如果条件`a < b`为假，它会中止事务并开始侦听对迄今为止已读取的 TVar 的写入，即`x`和`y`。当通知其中一个 TVar 已更新时，它才会从顶部重新启动事务以再次尝试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-21T11:33:48.873

我不知道任何语言级别的构造，如您所描述的，但它在原则上听起来与[ReactiveX](http://reactivex.io/intro.html)对其可观察对象所做的相似。我相信 Observable 类型也将被合并到 Javascript 的未来版本中。

它看起来有点不同：

```
observable.doNext(() => { // do stuff }) 
```

与：

```
when(expression) { // do stuff } 
```

在示例中，您给出的表达式将返回类似于 ReactiveX 可观察对象的内容，并且语句的主体可以等同于`.doNext(() => do stuff)`. 事实上，Rx 为如何处理不同的可观察事件提供了许多选项，它可以做一些非常强大的东西，让您可以链接操作。

# virtualenv - pip -r 在 vi rtualenv 中没有按预期工作

> ID：15429515
> 
> 赞同：3
> 
> 时间：2013-03-15T10:08:05.930
> 
> 标签：virtualenv, pip, distribute

我对虚拟环境中 pip 的行为有一个非常奇怪的问题。

我已经设定

```
export PIP_REQUIRE_VIRTUALENV=true
export PIP_DOWNLOAD_CACHE=$HOME/.pip/cache
export VIRTUALENV_DISTRIBUTE=true 
```

现在，当我在我的 virtualenv 中并想要安装我的依赖项时：

```
pip install -r requirements/_base.txt 
```

（出于测试目的， requirements/_base.txt 仅包含：）

```
Django==1.5 
```

无论如何，当我尝试安装它时，我只会得到：

```
Downloading/unpacking Django==1.5 (from -r requirements/_base.txt (line 1))
Running setup.py egg_info for package Django

warning: no previously-included files matching '__pycache__' found under directory '*'
warning: no previously-included files matching '*.py[co]' found under directory '*' 
```

之后，没有安装 Django。

奇怪的部分来了：当我手动安装 Django 时

```
pip install Django==1.5 
```

它运行良好（尽管出现了相同的两个警告）：

```
Downloading/unpacking Django==1.5
Running setup.py egg_info for package Django

warning: no previously-included files matching '__pycache__' found under directory '*'
warning: no previously-included files matching '*.py[co]' found under directory '*'
Installing collected packages: Django
Running setup.py install for Django
changing mode of build/scripts-2.7/django-admin.py from 644 to 755

warning: no previously-included files matching '__pycache__' found under directory '*'
warning: no previously-included files matching '*.py[co]' found under directory '*'
changing mode of /usr/local/share/python/django-admin.py to 755
Successfully installed Django
Cleaning up... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-07T13:26:01.280

我遇到了类似的问题，并意识到删除版本要求解决了这个问题。虽然不知道为什么...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-16T22:22:48.563

我弄清楚为什么这会发生在我身上，这也可能为看到此页面的其他人解决问题。对我来说，问题是我有一个不能通过 pip 自动安装的要求。pip freeze 导出了包名称和版本，但无论出于何种原因，pip 都无法直接在需求安装中安装该包。我必须改为从 zip 文件手动安装它。

那么，您可能遇到的问题是您有一个无法通过 pip 的需求安装程序安装的需求。检查您的输出日志中是否有红色文本、错误等。

我用这篇文章弄清楚了这一点： [pip failed to install packages from requirements.txt](https://stackoverflow.com/questions/11015692/pip-fails-to-install-packages-from-requirements-txt)

# highcharts - 是否可以更改高图的背景颜色？

> ID：15429518
> 
> 赞同：4
> 
> 时间：2013-03-15T10:08:12.203
> 
> 标签：highcharts

考虑以下情况：

```
 chart.options.chart.backgroundColor= {
        linearGradient: [0, 0, 0, 400],
        stops: [ [0, 'rgb(96, 96, 96)'], 
        [1, 'rgb(16, 16, 16)'] ]
    };
    chart.redraw(): 
```

都在这里：http: [//jsfiddle.net/S8f86/3/](http://jsfiddle.net/S8f86/3/)

是否可以通过事件更改图表的背景颜色？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T11:40:57.050

Highcharts 没有执行此操作的 API 调用。但是，您可以获取底层元素并对它们应用一些 css 样式。例如

```
chart.chartBackground.css(
        {
            color: '#555555',
        }); 
```

[http://jsfiddle.net/xzUcC/](http://jsfiddle.net/xzUcC/)

由于您直接操作 dom，因此无需在图表上调用 redraw()。

正如另一张海报所提到的，您可以按如下方式进行毕业背景：

```
 var gradient = {
        linearGradient: [0, 0, 0, 400],
                 stops: [ [0, 'rgb(96, 96, 96)'], 
                          [1, 'rgb(16, 16, 16)'] ]
        };
        chart.chartBackground.attr({
                 fill:gradient
        }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-15T12:14:14.697

您可以使用图表渲染器和 svg 属性。

[http://jsfiddle.net/S8f86/4/](http://jsfiddle.net/S8f86/4/)

```
this.renderer.button('Change background color', 74, 30, function(){

                        var gradient = {
                            linearGradient: [0, 0, 0, 400],
                            stops: [ [0, 'rgb(96, 96, 96)'], 
                                     [1, 'rgb(16, 16, 16)'] ]
                        };

                    chart.chartBackground.attr({
                        fill:gradient
                    });

                    }).add(); 
```

# node.js - 在 node.js 中使用 http.request() 在每个请求中获取请求超时

> ID：15429527
> 
> 赞同：1
> 
> 时间：2013-03-15T10:08:29.873
> 
> 标签：node.js, express

我正在使用 nodejs http.request 方法将一些数据发布到外部 API。我这样测试：

```
var options={
hostname:'www.google.com',
port:80,
method:'POST'
};

var req=http.request(options,function(res){
  console.log('STATUS: ' + res.statusCode);
  console.log('HEADERS: ' + JSON.stringify(res.headers));
  res.setEncoding('utf8');
  res.on('data', function (chunk) {
    console.log('BODY: ' + chunk);
  });

});
//console.log(req);
req.on('error', function(e) {
  console.log('problem with request: ' + e.message);

}); 
```

这整个包裹在一个快递服务器的邮政路线中。但在控制台中，它总是在一段时间后显示连接超时。我一无所知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:25:29.067

您只是在创建一个`request`对象。您也必须发送它。用于`req.end()`实际发送请求。

```
req.on('error', function(e) {
  console.log('problem with request: ' + e.message);
});
req.end();  //add it 
```

# android - 保护应用程序数据

> ID：15429531
> 
> 赞同：2
> 
> 时间：2013-03-15T10:08:36.293
> 
> 标签：android, security, root

可以限制用户访问任何应用程序数据，如 SQLite db 文件、共享首选项。文件..等 我已将其限制在一定水平。但是，如果用户以 root 用户或超级用户身份启动设备，用户仍然可以访问这些文件。

需要做什么来限制用户访问我的安全应用程序数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T10:17:08.960

我在某个地方看到了一个关于这个的博客（如果我能找到它，我会得到链接），但基本上，你无能为力。博客作者说，您在用户设备上放置的任何数据现在都是他们的，如果他们想要的足够糟糕，他们就会得到它。root 用户可以访问设备上的所有内容。这就是生根应该做的事情。

真正保护您的数据的唯一方法是从安全服务器中提取数据而不是缓存它，如果您想对用户保密，这是您应该这样做的唯一方法。

找到了标题合适的博客文章，“这是用户的数据，该死。” [http://commonsware.com/blog/2012/05/01/its-the-users-data-dammit.html](http://commonsware.com/blog/2012/05/01/its-the-users-data-dammit.html)

你真的应该订阅这个家伙的博客。他那里有一些好东西。（不，我没有插电。我希望我能成为这个人。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:17:20.997

如果手机已植根，则您几乎无法停止访问存储在设备上的文件。

您可以做的最好的事情是使用用户每次启动应用程序时必须输入的密钥来加密写入文件或数据库中的字段的数据。

# drupal - Drupal 媒体库模块不播放上传的视频？想法

> ID：15429532
> 
> 赞同：1
> 
> 时间：2013-03-15T10:08:37.887
> 
> 标签：drupal, module, gallery, colorbox, media

我在 Drupal 7 安装上使用媒体库模块来创建一些混合图片和视频库。我在使用该模块时遇到问题，因为它似乎不会播放我上传的视频，但是如果我检查我的媒体库并查看它播放的文件本身。有什么可做的？

# regex - 使用 AWK 进行文本解析

> ID：15429535
> 
> 赞同：-1
> 
> 时间：2013-03-15T10:08:43.543
> 
> 标签：regex, bash, shell, awk, pattern-matching

我有以下格式的日志文件：

```
MTV     (B) VAR H'03 7F5B H'147 H'72FD
        (B) VAR H'00 5B30 H'147 H'2718
        (B) VAR H'05 C41F H'147 H'3AA4
        (B) VAR H'06 4901 H'147 H'2DFD
        (B) VAR H'00 D36E H'147 H'628A
MNC     (B) VAR H'03 500A H'147 H'3B1D
        (B) VAR H'06 743C H'147 H'2F60
        (B) VAR H'04 6C8C H'147 H'88C5
MTV     (B) VAR H'00 9C7D H'147 H'2DEB
        (B) VAR H'02 0A1B H'147 H'36B2
        (B) VAR H'03 1247 H'147 H'5693
        (B) VAR H'04 C757 H'147 H'6331 
```

大约15000个条目！我希望用户提供模式说 MTV 以及相关的文本坐标，脚本会逐行解析它们！例如，用户提供模式为 MTV，相对坐标为（行 = 2，列 = 4）。所以输出会是这样的：

```
MTV 5B30
MTV 0A1B 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:19:00.310

```
awk -v p="MTV" -v r=2 -v c=4 '$1==p{a=NR-1}NR==a+r{print p,r==1?$(c+1):$c}' file
MTV 5B30
MTV 0A1B 
```

# php - facebook 评论插件 - 无法在网络服务器上工作

> ID：15429537
> 
> 赞同：2
> 
> 时间：2013-03-15T10:08:51.080
> 
> 标签：php, facebook, codeigniter, facebook-comments

当我使用 facebook 评论插件时，它在本地主机上工作，但当我将文件上传到 Web 服务器时不工作。

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

和

```
<div class="fb-comments" data-href="<?php echo base_url(); ?>" data-width="470" data-num-posts="10"></div> 
```

[从https://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/)生成的这两个代码块 在第二个代码块中，我更改了 data-href="" 的值并放置了我的基本 url。我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:28:21.967

您可能会在此处遇到评论问题，`base_url();`因为它可能需要您的域 url，但它可能在 config.xml 中为空白。

从您的问题中很难用有限的数据（没有错误）来判断。

我假设您使用 Chrome Inspector（或类似工具）来检查 HTML 的输出？

# iphone - iOS - TextView 框架的更改如何使其在 pdf 导出后无法选择文本？

> ID：15429538
> 
> 赞同：1
> 
> 时间：2013-03-15T10:08:53.307
> 
> 标签：iphone, objective-c, cocoa-touch, pdf-generation, uitextview

**textView 框架的更改如何使其在 pdf 导出后无法选择文本？**它是简单的光栅化与可怕的压缩。如果我导出 textView 并且不更改框架，我会得到完美的向量。

我用 textView 查看，然后用 textView 的内容导出 pdf，如下所示：

```
- (void) generatePDFWithFilename:(NSString *)filename
{
    // Creates a mutable data object for updating with binary data, like a byte array
    NSMutableData *pdfData = [NSMutableData data];

    //  pdf view
    _pdfView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 612, 792)];

    //  adding subview - for easier positioning
    CGRect tempFrame;
    UIView *tempView = [[UIView alloc] initWithFrame:CGRectMake(10, 10, _pdfView.bounds.size.width - 20, _pdfView.bounds.size.height - 20)];
    tempView.backgroundColor = [UIColor redColor];
    _pdfView.backgroundColor = [UIColor lightGrayColor];
    [_pdfView addSubview:tempView];

    UITextView *pdfDescriptionTextView = [[UITextView alloc] initWithFrame:CGRectZero];
    pdfDescriptionTextView = _workDescriptionTextView;
    [tempView addSubview:pdfDescriptionTextView];
    // pdfDescriptionTextView.center = CGPointMake(50, 200); // working - vector data are preserved
    tempFrame = pdfDescriptionTextView.frame;
    tempFrame.origin = CGPointMake(100, 100);
    tempFrame.size = CGSizeMake(tempView.bounds.size.width - 40, pdfDescriptionTextView.contentSize.height);
    pdfDescriptionTextView.frame = tempFrame;
    pdfDescriptionTextView.backgroundColor = [UIColor greenColor];

    UIGraphicsBeginPDFContextToData(pdfData, CGRectZero, nil);
    UIGraphicsBeginPDFPageWithInfo(_pdfView.bounds, nil);
    CGContextRef pdfContext = UIGraphicsGetCurrentContext();

    [_pdfView.layer renderInContext:pdfContext];

    // remove PDF rendering context
    UIGraphicsEndPDFContext();

    // Retrieves the document directories from the iOS device
    NSArray* documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES);

    NSString* documentDirectory = [documentDirectories objectAtIndex:0];
    NSString* documentDirectoryFilename = [documentDirectory stringByAppendingPathComponent:filename];

    // instructs the mutable data object to write its context to a file on disk
    BOOL success = [pdfData writeToFile:documentDirectoryFilename atomically:YES];
    if(success)
    {
        [self sendEmailWithData:pdfData];
    }
} 
```

![框架未更改 - 矢量数据](../Images/1088225b6eaacf80f5c1faa0446461a2.png) ![框架改变 - 光栅化文本](../Images/892bb09c460b8152b9349f067a9e2416.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:14:13.640

只是改变它的编辑模式......

```
pdfDescriptionTextView.editable = FALSE; 
```

在此之后，用户将无法再更改文本

# c - 使用 C 在窗口中显示字符串输出（在 WIN32 API 中）

> ID：15429541
> 
> 赞同：7
> 
> 时间：2013-03-15T10:08:56.527
> 
> 标签：c, windows, winapi, textout

我想要一种正确的方式来输出字符串并将其显示在创建的窗口上。我一直在使用 textout() 函数，但由于它只绘制窗口，一旦窗口最小化并恢复回来，窗口上显示的数据就会消失。同样当要显示的数据超过Window的大小时，只显示等于窗口大小的数据，其他数据被截断。有没有其他方法可以在窗口上输出数据？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-15T13:55:53.910

您可以在窗口上放置一个[`Static`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760769(v=vs.85).aspx)或一个[`Edit`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775458(v=vs.85).aspx)控件（标签和文本框）来显示数据。

在 期间调用其中之一`WM_CREATE`：

```
HWND hWndExample = CreateWindow("STATIC", "Text Goes Here", WS_VISIBLE | WS_CHILD | SS_LEFT, 10,10,100,100, hWnd, NULL, hInstance, NULL); 
```

或者

```
HWND hWndExample = CreateWindow("EDIT", "Text Goes Here", WS_VISIBLE | WS_CHILD | ES_LEFT, 10,10,100,100, hWnd, NULL, hInstance, NULL); 
```

如果您使用 an ，`Edit`那么用户还可以滚动、复制和粘贴文本。

在这两种情况下，都可以使用以下方式更新文本[`SetWindowText()`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms633546(v=vs.85).aspx)：

```
SetWindowText(hWndExample, TEXT("Control string")); 
```

（[由 Daboyzuk 提供](https://stackoverflow.com/questions/15429541/displaying-string-output-in-a-window-using-c-in-win32-api/15434274?noredirect=1#comment21831177_15434274)）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-15T11:43:55.363

TextOut 应该工作得很好，如果这是在 WM_PAINT 中完成的，它应该每次都被绘制。（包括最小化和重新调整大小）

```
LRESULT CALLBACK MyWndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    switch(message)
    {
        case WM_PAINT:
            PAINTSTRUCT ps;
            HDC hdc = BeginPaint(hWnd, &ps);

            TextOut(hdc, 10, 10, TEXT("Text Out String"),strlen("Text Out String"));

            EndPaint(hWnd, &ps);
            ReleaseDC(hWnd, hdc);
            break;
        default:
            return DefWindowProc(hWnd, message, wParam, lParam);
    }
    return 0;
} 
```

您可能还对 DrawText 感兴趣

```
LRESULT CALLBACK MyWndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    switch(message)
    {
        case WM_PAINT:
            PAINTSTRUCT ps;
            HDC hdc = BeginPaint(hWnd, &ps);

            RECT rec;
            //       SetRect(rect, x ,y ,width, height)
            SetRect(&rec,10,10,100,100);
            //       DrawText(HDC, text, text length, drawing area, parameters "DT_XXX")
            DrawText(hdc, TEXT("Text Out String"),strlen("Text Out String"), &rec, DT_TOP|DT_LEFT);

            EndPaint(hWnd, &ps);
            ReleaseDC(hWnd, hdc);
            break;
        default:
            return DefWindowProc(hWnd, message, wParam, lParam);
    }
    return 0;
} 
```

这会将文本绘制到给定矩形中的窗口，

* * *

绘制文本将在给定矩形内自动换行。
如果您想将整个窗口作为绘图区域，您可以使用`GetClientRect(hWnd, &rec);`而不是`SetRect(&rec,10,10,100,100);`

# asp.net - 如何在 ASP.NET 中以安全的方式调用 JSON 服务

> ID：15429546
> 
> 赞同：1
> 
> 时间：2013-03-15T10:09:16.610
> 
> 标签：asp.net, json

您好，我有从服务提供商那里获得的某些 API。密钥包含我们需要通过 JSON 与 API 的每个请求一起发送的安全 ID 和密码。

目前我正在使用

```
$.ajax({
    url: "http://api",
    dataType: 'jsonp',
    data : {'UserName':'abce','Password':'Password'}
    success: function(results){
    console.log(results);
    }
}); 
```

那么有什么方法我不想在 JSON 请求中显示它。我在 ASP.NET 中创建应用程序。你能建议我做些什么来加密它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:10:21.357

不，如果您从 javascript 进行调用，则没有办法。一种可能性是在您的域上有一个服务器端脚本，它将充当桥梁。然后，您可以将 AJAX 请求发送到您的脚本，该脚本又会将调用委托给远程服务。在这种情况下，您不需要 JSONP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:18:33.827

不，没有办法。

如果您通过 https（女巫为您提供基于硬件的隧道加密），您可以隐藏旅行信息。-> 如果 SSL 将由他提供，这避免了监听，但不是中间人

我建议您应该使用会话 + httponly cookie，这在这种情况下是有意义的。即使会话将被捕获，身份也无法被黑客入侵。将通信放在 https 上，您就尽了最大的努力。

[如果 API 是由第 3 方提供的 - 那么你根本没有机会]

# mercurial - 在 Jenkins 目标中运行的 Msbuild 调用 HgPull 失败并出现 HgProcessException：命令 不可用

> ID：15429547
> 
> 赞同：1
> 
> 时间：2013-03-15T10:09:17.660
> 
> 标签：mercurial, msbuild, jenkins, cruisecontrol.net

我正在从 CCnet 移植 MSBuild 脚本以在 Jenkins 中运行。MSBuild 项目用于创建部署包。我宁愿让詹金斯自己推动这个过程，但这是一个长期目标。

我遇到的问题是（如标题所示）当我们尝试使用 HgPull 目标时，从 MSBuild mecurial 任务（[http://msbuildhg.codeplex.com/](http://msbuildhg.codeplex.com/)）我们收到错误消息

HgProcessException：命令 hg.exe 不可用 [*项目路径*]

我在项目网站上看到有人通过将 LibraryLocation 属性添加到目标来解决它，但这似乎没有任何区别。我的目标目前看起来像这样：

目标名称="UpdateSources">

```
<HgPull
        LibraryLocation="C:\Program Files\TortoiseHg\hg.exe"
        Force="true"
        Update="true"
        LocalPath="$(SourcePath)" 
        />

<HgUpdate
        LibraryLocation="C:\Program Files\TortoiseHg\hg.exe"
        Clean="true"
        LocalPath="$(SourcePath)" 
        /> 
```

我比较茫然。如果您需要在这篇文章中添加更多信息来解决这个问题，请告诉我。我对 MSBuild 真的很陌生，所以真的不知道从哪里开始调查这个问题。

编辑：

我忘记提到的一件事是，我尝试在构建服务器的控制台窗口中运行 MSbuild 命令，但仍然得到相同的结果。这真的很奇怪，因为它在 CCNet 中运行良好，CCNet 做了什么魔法来使这个命令工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:59:35.923

现在已经解决了，不幸的是我不确定我做了哪些更改来纠正这些问题。我相信这可能取决于路径分隔符以及它们是否在配置文件的另一部分中。这让我很恼火，因为应用程序之间缺乏弹性/一致性，您需要指定带/不带斜杠的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:02:25.940

只是一个想法，但尝试将“C:\Program Files\TortoiseHg”添加到您的系统路径。也许 CCNet 指定了 Jenkins 无法访问的某个地方。

另外，为了理智起见，请验证 hg.exe 是否确实存在于该位置。

# php - fwrite($fp,$schema_insert) 不工作

> ID：15429549
> 
> 赞同：-2
> 
> 时间：2013-03-15T10:09:25.643
> 
> 标签：php, mysql

我正在使用此代码从数据库中获取我的数据并下载 xls 文件，但它没有将我的实际数据写入工作表。我认为这行不通。我应该在我的代码中添加更多内容吗？

```
 <?php 
include 'functions.php';
 ob_start();

?>
<?php
if($_POST['types'] == 'name') {  

    $query = "SELECT * FROM visitor_detail WHERE name='".$_POST['filter']."' ORDER BY id DESC ";  
}  
elseif($_POST['types'] == 'mobile') {  

    $query = "SELECT * FROM visitor_detail WHERE mobile='".$_POST['filter']."' ORDER BY id DESC ";  
} 
elseif($_POST['types'] == 'OccasionType') {  

    $query = "SELECT * FROM visitor_detail WHERE OccasionType='".$_POST['filter']."' ORDER BY id DESC ";  
} 

elseif($_POST['types'] == 'InquiryDate') {  
    $query="SELECT * FROM visitor_detail WHERE TodayDate between '".$_POST['From']."' and '".$_POST['TO']."' ORDER BY id DESC " ;  
}

 elseif($_REQUEST['types'] == 'OccasionDate') {  
    $query="SELECT * FROM visitor_detail WHERE date between '".$_POST['From']."' and '".$_POST['To']."' ORDER BY id DESC ";  
                            }
else {  
    $query = "SELECT * FROM visitor_detail ORDER BY id DESC ";  
    } 

$result = mysql_query($query); 

$sep = "\t"; //tabbed character 
$fp = fopen('database.xls', "w"); 
$schema_insert = ""; 
$schema_insert_rows = ""; 
//start of printing column names as names of MySQL fields

//start of adding column names as names of MySQL fields 
for ($i = 1; $i < mysql_num_fields($result); $i++) 
{ 
$schema_insert_rows.=mysql_field_name($result,$i) . "\t"; 
} 
$schema_insert_rows.="\n"; 
echo $schema_insert_rows; 
fwrite($fp, $schema_insert_rows); 
//end of adding column names

while($row = mysql_fetch_row($result))
{
$schema_insert = ""; 
for($j=1; $j<mysql_num_fields($result);$j++) 
{ 
if(!isset($row[$j])) 
$schema_insert .= "NULL".$sep; 
elseif ($row[$j] != "") 
$schema_insert .= strip_tags("$row[$j]").$sep;
else 
$schema_insert .= "".$sep; 
} 
$schema_insert = str_replace($sep."$", "", $schema_insert); 

//this corrects output in excel when table fields contain \n or \r 
//these two characters are now replaced with a space 

$schema_insert = preg_replace("/\r\n|\n\r|\n|\r/", " ", $schema_insert); 
$schema_insert .= "\n"; 
//$schema_insert = (trim($schema_insert)); 
//print $schema_insert .= "\n"; 
//print "\n";

fwrite($fp,$schema_insert); }

fclose($fp);

header('Content-Type: application/xls');
header('Content-Disposition: attachment; filename=my.xls');
header('Pragma: no-cache');

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:25:55.927

两个误解：

1.  也许该功能称为“下载 Excel 文件”，但这并不意味着您必须创建一个真实文件。

2.  PHP 不会神奇地将您在服务器端创建的所有文件发送到浏览器。

摆脱所有与文件相关的代码并简单地改变它：

```
fwrite($fp,$schema_insert); 
```

...进入这个：

```
echo $schema_insert; 
```

另外，将这些行移到第一行之前`echo`：

```
header('Content-Type: application/xls');
header('Content-Disposition: attachment; filename=my.xls');
header('Pragma: no-cache'); 
```

**编辑：**尽管多次提到 XLS 格式，但有问题的代码基本上会创建一个 CSV 文件，并使用伪造的 HTTP 标头发送它以欺骗 Excel 打开它。正如 Mark 指出的那样，PHP 具有[创建 CSV 文件的内置函数，](http://php.net/fputcsv)因此您不必自己编写代码。这个函数需要一个文件指针，但同样，[实际上不需要创建一个文件](http://www.php.net/manual/en/function.fputcsv.php#104980)：你可以调用[fopen()](http://php.net/fopen)作为文件名，`php://output`所有内容都会自动发送到浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:17:54.603

也许服务器不能让你写文件。您只能从数据库中查询数据并将其格式化为表格，并使用标题功能将其下载。

# jquery - Jquery Animate（）不工作

> ID：15429553
> 
> 赞同：3
> 
> 时间：2013-03-15T10:09:33.153
> 
> 标签：jquery, jquery-animate

[在此](http://livedemo00.template-help.com/wt_41832/index.html#/)站点的“特色项目”部分有一个动画效果。

我正在尝试为我的网站制作它，实际上我在大约一个月前开始这样做。但现在令人惊讶的是，它根本不起作用，只是让我有点模棱两可地弄清楚问题可能是什么。

我选择了错误的库，我的脚本是否有问题，或者它是一个错误？

HTML。

```
 <a class="MainMiddleTwoEach MMTE1"  href="#" title="This is the title 1">
           <label class="MainMiddleTwoLabel1"></label>
           <span class="MainMiddleTwoLabel2"></span>    
      </a> 
```

JS。

```
 $('.MainMiddleTwoEach').mouseenter(function (e) {
            pageId = $(this).attr('href');
            $(this).children('label').animate({ top: '150px' }, 300);
            $(this).children('label').animate({ top: '-100px' }, 300);
            $(this).children('span').animate({ top: '20px' }, 300);
            $(this).children('span').animate({ top: '230px' }, 300);
        }).mouseleave(function (e) {
            $(this).children('label').animate({ top: '130px' }, 300);
            $(this).children('label').animate({ top: '80px' }, 300);
            $(this).children('span').animate({ top: '-10px' }, 300);
            $(this).children('span').animate({ top: '55px' }, 300);
        }); 
```

[http://jsfiddle.net/K4Ak2/3](http://jsfiddle.net/K4Ak2/3)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T10:12:25.020

您需要将元素的位置设置为`relative`or`absolute`才能使用、`top`或`right`属性。`bottom``left`

在这里查看我的编辑：http: [//jsfiddle.net/K4Ak2/4/](http://jsfiddle.net/K4Ak2/4/)

我在 CSS 中添加了一行

```
label, span { position: relative; } 
```

它应该按预期工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T10:22:12.133

来自 Animate 的 jQuery api：http: [//api.jquery.com/animate/](http://api.jquery.com/animate/)

> 方向属性（上、右、下、左）如果元素的位置样式属性是静态的（默认情况下是静态的），则对元素没有明显的影响。

您可以尝试将位置设置为“相对”

# c# - 循环检查复选框、文本框和标签

> ID：15429556
> 
> 赞同：0
> 
> 时间：2013-03-15T10:09:43.060
> 
> 标签：c#, foreach

基本上我试图将下面的代码变成一个循环。每次我尝试遍历控件时，我似乎都遇到了某种死胡同，无法弄清楚如何更新相关标签或检查相关文本框。

```
if (checkBox1.Checked && !string.IsNullOrEmpty(textBox1.Text))
{
    if (RemoteFileExists(textBox1.Text) == true)
    {
        label1.Text = "UP";
    }
    else
    {
        label1.Text = "DOWN";
    }
}

if (checkBox2.Checked && !string.IsNullOrEmpty(textBox2.Text))
{
    if (RemoteFileExists(textBox2.Text) == true)
    {
        label2.Text = "UP";
    }
    else
    {
        label2.Text = "DOWN";
    }
}

if (checkBox3.Checked && !string.IsNullOrEmpty(textBox3.Text))
{
    if (RemoteFileExists(textBox3.Text) == true)
    {
        label3.Text = "UP";
    }
    else
    {
        label3.Text = "DOWN";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:15:11.820

您可以使用`Form.Controls`来迭代页面上的所有控件，例如：

```
foreach(Control control in Controls) {
   if (control is Checkbox) {
       ...
   } else if (control is TextBox) {
       ...
   } else {
       ...
   }
} 
```

但是，这将执行所有控制，因此可能效率不高。您也许可以使用`Tag`您的控件和 LINQ 扩展来改进它，例如：

```
IEnumerable<Checkbox> needed_checkboxes = Controls.Where(control => control is Checkbox && control.Tag == someValue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:17:39.050

您可以通过动态查找控件来使用它：

```
for (int i = 1; i < count; i++)
            {
                CheckBox chbx = (CheckBox) this.FindControl("checkBox" + i);
                TextBox txtb = (TextBox)this.FindControl("textBox" + i);
                Label lbl = (Label) this.FindControl("label" + i);
                if (chbx.Checked && !string.IsNullOrEmpty(txtb.Text))
                {
                    if (RemoteFileExists(txtb.Text) == true)
                    {
                        lbl.Text = "UP";
                    }
                    else
                    {
                        lbl.Text = "DOWN";
                    }
                }
            } 
```

# c - 符号“|” 在目标 C

> ID：15429557
> 
> 赞同：-2
> 
> 时间：2013-03-15T10:09:43.443
> 
> 标签：c

这条线代表什么？请任何人解释一下`|`符号？

```
self.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:12:52.587

`|`是按位或运算符。

[你可以在这里](http://processing.org/reference/bitwiseOR.html)找到更多关于它的信息。

两个常量的值都是一样的，它在它们上按位查找。

```
UIViewAutoresizingFlexibleWidth  = 1 << 1 //2

UIViewAutoresizingFlexibleHeight = 1 << 4 //16 
```

这将是 ：

```
UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight = 18 
```

# php - PHP Codesniffer 空格

> ID：15429565
> 
> 赞同：0
> 
> 时间：2013-03-15T10:10:08.163
> 
> 标签：php, jenkins, codesniffer

你遇到过这样的问题吗？：

詹金斯报告说，在第 49 行的末尾有一些空格，但我检查了存储库中的代码，并且评论的结尾肯定是行尾：

```
048      * @var integer|timestamp|string
049      */
050     protected $created; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:57:23.133

我找到了解决方案。问题是行尾字符（\r\n），更改为 \n 后问题解决了:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:14:10.230

这应该可以解决问题

```
048      * @var integer|timestamp|string */
049      protected $created; 
```

# cakephp - 在 cake 中上传多个文件不起作用

> ID：15429567
> 
> 赞同：2
> 
> 时间：2013-03-15T10:10:19.470
> 
> 标签：cakephp, cakephp-2.1

我有以下表格：

```
<form enctype="multipart/form-data" method="post" accept-charset="utf-8">
    <input type="file" name="data[MyModel][myfiles]" multiple="multiple">
</form> 
```

当我选择许多文件并提交时`$this->request->data['MyModel']['myfiles']`只包含最后选择的文件而不是多个...`$_FILES`还包含最后选择的文件...

我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T11:31:24.887

IE不支持多文件上传，safari也

用这个：

```
echo $form->input('files. ', array(
    'label' => 'Files:',
    'type' => 'file',
    'multiple' => 'multiple',
)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-15T10:52:56.177

这是因为文件输入需要具有正确的名称属性。这里是例子^

```
<input type="file" name="data[Album][images][]"/> 
```

请注意，它的末尾有一个空括号——这是您需要在文件输入中添加的内容。提交表单后，您的数据将具有以下结构：

```
Array
    (
        [Album] => Array
            (
                [images] => Array
                    (
                        [0] => Array
                            (
                                [name] => goldenWS.jpg
                                [type] => image/jpeg
                                [tmp_name] => E:\xampp\tmp\php8EB5.tmp
                                [error] => 0
                                [size] => 1107065
                            )

                        [1] => Array
                            (
                                [name] => ground_floor__please_by_ether-d4c1ru7.jpg
                                [type] => image/jpeg
                                [tmp_name] => E:\xampp\tmp\php8EC6.tmp
                                [error] => 0
                                [size] => 1027305
                            )
                    )
            )
    ) 
```

请注意，我们在名称属性中放置的空括号现在填充了文件的索引。

# windows - nodejs解码（子进程使用）

> ID：15429571
> 
> 赞同：3
> 
> 时间：2013-03-15T10:10:29.980
> 
> 标签：windows, node.js, utf-8, decode

我将 spawn 用于 JScript（来自 Windows）我的解码文本问题

？？？？？？T-SQL 微软 SQL Server 2012

？？？？？？- 俄语文本。

```
var worker,path = require('path'), spawn = require('child_process').spawn, cscript = path.join(process.env.SystemRoot, 'system32', 'cscript.exe')

 function startCscript() {
    worker = spawn( cscript, [ '/nologo', 'testwsh.js' ] );
    worker.stdout.setEncoding('utf8');
    worker.stdout.on( 'data', onData );
}

function onData (data) {
    console.log(data.toString());
}
startCscript(); 
```

我如何获得俄文字母？谢谢大家）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T04:55:12.123

您可以尝试将工作人员编码设置为`ucs2`或`utf16le`。改变这个

```
worker.stdout.setEncoding('utf8'); 
```

对此

```
worker.stdout.setEncoding('ucs2'); 
```

告诉它是否解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T05:12:07.733

看[问题 2190](https://github.com/joyent/node/issues/2190)和[问题 2196](https://github.com/joyent/node/issues/2196)：

> Node.js 确实总是希望子进程输出 UTF-8，但具有俄语语言环境的 Windows 默认为 CP866

您需要执行`chcp 65001`更改当前控制台代码页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-18T17:55:46.990

我的解决方案：使用 iconv-lite，在控制台中获取俄语文本。

# php - 我要发送 cURL 帖子的页面必须做什么才能“响应”？

> ID：15429573
> 
> 赞同：2
> 
> 时间：2013-03-15T10:10:32.463
> 
> 标签：php, post, curl

我在网站上有一个非常简单的脚本。该脚本正在向我可以控制的另一个站点发送 HTTP POST。我了解如何使用 cURL 发送 POST，但是我发送它的脚本必须在它上面做出响应吗？

例如，这是发送 POST 的代码（如果此脚本回显站点 B 的响应，我希望它，但我什至不知道如何让站点 B 响应该帖子）：

```
<?php
//
// A very simple PHP example that sends a HTTP POST to a remote site
//

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL,"http://www.mysite.com/tester.phtml");
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS,
            "postvar1=value1&postvar2=value2&postvar3=value3");

// receive server response ...
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$server_output = curl_exec ($ch);

curl_close ($ch);

echo $server_output;

?> 
```

然后站点 b，在上面的 POST 发送到的 URL 处，有以下代码：

```
<?php

$postvar1 = $_POST['postvar1'];

if ($postvar1="apples and oranges") {
$echo "This is what you see if postvar1 has been posted and is equal to apples and oranges"; } else {echo "this is what you see if postvar1 has not been posted or is not equal to apples and oranges"; }

?> 
```

站点 B 上的脚本需要做什么才能根据脚本中的“if 逻辑”响应屏幕上显示的文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:05:32.633

站点 B 的响应是发送的任何输出。您的代码中有错误：

```
$echo "This is what you see..." 
```

应该

```
echo "This is what you see..." 
```

我想这就是为什么你没有看到任何回复。

为了查看请求是否成功，您可以（在测试期间）在脚本的开头或结尾将一些字符串作为站点 B 回显。示例：

```
<?php
echo 'Hi, I\'m site B!<br/>';
$postvar1 = $_POST['postvar1']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:11:51.100

您只需执行正常的 HTML 输出（或 JSON，或其他），就像您响应 Web 浏览器完成的正常 POST 一样。

# linux - 停止tomcat服务器的脚本间歇性地工作

> ID：15429575
> 
> 赞同：1
> 
> 时间：2013-03-15T10:10:33.493
> 
> 标签：linux, tomcat

我对 linux 和这个论坛非常陌生。我正在为一个拥有 10 多台 Red Hat Linux 5.5 64 位服务器的客户解决一个问题。他们想使用停止脚本（脚本使用'kill -15'）来停止tomcat 进程。在某些服务器上，脚本运行良好，并在几秒钟内停止了tomcat 进程。在某些服务器上，有时它会很快停止，有时它会持续运行几分钟，最后客户必须使用“kill -9”命令来停止 tomcat。日志没有任何指示。

您知道为什么此脚本会出现间歇性行为吗？我们如何在日志等中捕获它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:50:04.517

进程可能会忽略该`SIGTERM(15)`信号。

来自维基百科：[http ://en.wikipedia.org/wiki/Unix_signal](http://en.wikipedia.org/wiki/Unix_signal)

> SIGTERM 信号被发送到进程以请求其终止。与 SIGKILL 信号不同，它可以被进程捕获、解释或忽略。这允许进程执行良好的终止释放资源并在适当的情况下保存状态。

如果它被忽略，剩下的唯一选择就是杀死它，`SIGKILL(9)`这是不可忽略的。

# mediawiki - 是否有可以在 java 中创建对象树的 wiki 标记语言解析器

> ID：15429577
> 
> 赞同：1
> 
> 时间：2013-03-15T10:10:38.937
> 
> 标签：mediawiki

我正在为 wikipedia 使用的 wiki 标记语言寻找一个解析器，它可以将输入的 wiki 标记文本转换为 java 对象的解析树。我遇到了一些解析器，但它们将标记文本解析为 HTML，例如：

java-维基百科解析器

米林维基文库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-28T08:28:33.927

WikiText 并没有真正设置为以这种方式解析。

您可能会考虑查看[Parsoid](https://www.mediawiki.org/wiki/Parsoid) - 它生成带有足够注释的 HTML，您可以将其转换为解析树。

否则，MediaWiki.org 有[一个](https://www.mediawiki.org/wiki/Alternative_parsers)关于替代解析器的页面。不过，它可能已经过时了。

# c# - IP RemoteEndPoint 块接收到的文本

> ID：15429587
> 
> 赞同：0
> 
> 时间：2013-03-15T10:10:59.660
> 
> 标签：c#

我创建了一个 TCP 侦听器，我从客户端接收来自 pc 的 IP 和 HWID。现在我希望侦听器通过 hiwd 接收并保存在文本文件中来阻止从客户端接收到的 ip。那可能吗？这是监听器代码。

```
tcpListener = new TcpListener(IPAddress.Any, 8000);
listenThread = new Thread(new ThreadStart(ListenForClients));
listenThread.Start();

private static void HandleClientComm(object client)
{
    TcpClient tcpClient = (TcpClient)client;
    //   NetworkStream clientStream = tcpClient.GetStream();
    clientStream = tcpClient.GetStream();

    byte[] message = new byte[65536];
    int bytesRead;

    bytesRead = 0;

    // Blocks until a client sends a message      

    bytesRead = clientStream.Read(message, 0, message.Length);
    {
        // Message has successfully been received
        ASCIIEncoding encoder = new ASCIIEncoding();

        // Output message
        string hwidban = File.ReadAllText("hwid.txt");

        if (encoder.GetString(message, 0, bytesRead) == hwidban)
        {
        //BLOCK IP CODE

        }
        else
        {

        //Console.WriteLine("To: " + tcpClient.Client.LocalEndPoint);
        textFromClient = ("IP at:  " + tcpClient.Client.RemoteEndPoint + " HardwareID:" + encoder.GetString(message, 0, bytesRead));

            //Console.WriteLine(encoder.GetString(message, 0, bytesRead));

        } while (clientStream.DataAvailable) ;

        // Release connections
        //  clientStream.Close();

        //tcpClient.Close();
    }
} 
```

# oracle - 如何在oracle中将整数与包含用逗号分隔的数字的varchar匹配

> ID：15429588
> 
> 赞同：0
> 
> 时间：2013-03-15T10:11:01.507
> 
> 标签：oracle, oracle10g, oracle9i

我面临一个奇怪的场景，我需要将一个整数与 varchar 匹配，其中包含在 oracle 中用逗号分隔的数字

例子：

**表 t1：**

```
id 整数
关键整数

```

表 t2

```
id 整数，
键 varchar2

```

**T1 值为：**

```
1,111
2,201
3,301

```

**T2 值为：**

```
1、《111301》
2、《111201》
3、《201301》

```

问题：有什么方法可以匹配或正则表达式匹配 T1 的键和 T2 的键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:16:41.440

你可以在没有正则表达式的情况下进行常规加入：

```
select *
  from t1
       inner join t2
               on ','||t2.keys||',' like '%,'||to_char(t1.key)||',%'; 
```

例如：

```
SQL> create table t1(id, key)
  2  as
  3  select 1, 111 from dual union all
  4  select 2, 201 from dual union all
  5  select 3, 301 from dual;

Table created.

SQL> create table t2(id, keys)
  2  as
  3  select 1, '111,301' from dual union all
  4  select 2, '111,201' from dual union all
  5  select 3, '201,301' from dual;

Table created.

SQL> select *
  2    from t1
  3         inner join t2
  4                 on ','||t2.keys||',' like '%,'||to_char(t1.key)||',%';

        ID        KEY         ID KEYS
---------- ---------- ---------- -------
         1        111          1 111,301
         1        111          2 111,201
         2        201          2 111,201
         2        201          3 201,301
         3        301          1 111,301
         3        301          3 201,301

6 rows selected. 
```

这不是正则表达式，只是连接。例如，假设我们想比较

```
KEY    KEYS
111    111,301 
```

我们可以说

```
where keys like '%'||key||'%' 
```

即扩展，这是

```
where '111,301' like '%111%' 
```

匹配得很好。但我也在那里添加了一些逗号。即我这样做了：

```
where ',111,301,' like '%,111,%' 
```

为什么？想象一下，您有以下数据：

```
KEY    KEYS
111    1111,301 
```

如果我们进行简单的连接：

```
where '1111,301' like '%111%' 
```

它会错误地匹配。通过在两边注入前导和尾随逗号：

```
where ',1111,301,' like '%,111,%' 
```

is 不再错误匹配，因为`,1111,`is not like `,111,`。

# php - Foursquare 无效授权错误

> ID：15429592
> 
> 赞同：2
> 
> 时间：2013-03-15T10:11:07.957
> 
> 标签：php, foursquare

我是foursquare的新手，我希望通过foursquare api自动填充文本框。为此，我参考了[https://developer.foursquare.com/overview/auth](https://developer.foursquare.com/overview/auth)并在foursquare 注册了我的应用程序。当我写

```
https://foursquare.com/oauth2/access_token
    ?client_id=YOUR_CLIENT_ID
    &client_secret=YOUR_CLIENT_SECRET
    &grant_type=authorization_code
    &redirect_uri=YOUR_REGISTERED_REDIRECT_URI
    &code=CODE 
```

在浏览器 url（所有参数已替换）中，我收到以下错误：

```
 {

    "error": "invalid_grant"

} 
```

我该如何解决这个问题？我如何实现自动填充文本框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-22T08:40:29.037

扩展 pfhayes 答案：CODE 不是一个常数。您应该用真实的代码实际替换它。

它可能会让人感到困惑，因为在身份验证流程的某个时刻，有一些常量，例如 code 和 access_token，应该在示例中完全采用 ad。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:40:40.743

您提供的代码必须是成功的用户授权返回的代码，如下所示：[https](https://developer.foursquare.com/overview/auth) ://developer.foursquare.com/overview/auth 。当用户使用foursquare 授权您的应用程序时，他们将被重定向到带有`code`HTTP 参数的页面。此代码将是您交换有效访问令牌的代码。

# c++ - 通过文本文件往返的浮点校验和

> ID：15429593
> 
> 赞同：1
> 
> 时间：2013-03-15T10:11:09.483
> 
> 标签：c++, floating-point, crc32

我需要将几个浮点数写入文本文件并与它们一起存储 CRC32 校验和。然后，当我从文本文件中读取浮点数时，我想重新计算校验和并将其与之前保存文件时计算的校验和进行比较。我的问题是校验和有时会失败。这是因为相等的浮点数可以用不同的位模式表示。为了完整起见，我将在接下来的段落中总结代码。

我在阅读[这个问题后发现了](https://stackoverflow.com/questions/302914/crc32-c-or-c-implementation)[这个 CRC32 算法](http://web.archive.org/web/20080303102530/http://c.snippets.org/snip_lister.php?fname=crc_32.c)。这是它的样子：

```
uint32_t updC32(uint32_t octet, uint32_t crc) {
    return CRC32Tab[(crc ^ octet) & 0xFF] ^ (crc >> 8);
}

template <typename T>
uint32_t updateCRC32(T s, uint32_t crc) {
    const char* buf = reinterpret_cast<const char*>(&s);
    size_t len = sizeof(T);

    for (; len; --len, ++buf)
        crc = updC32(static_cast<uint32_t>(*buf), crc);
    return crc;
} 
```

`CRC32Tab`包含与上面链接的文件中的大数组完全相同的值。

这是我如何将浮点数写入文件并计算校验和的简化版本：

```
float x, y, z;

// set them to some values

uint32_t crc = 0xFFFFFFFF;
crc = Utility::updateCRC32(x, crc);
crc = Utility::updateCRC32(y, crc);
crc = Utility::updateCRC32(z, crc);
const uint32_t actualCrc = ~crc;

// stream is a FILE pointer, and I don't mind the scientific representation
fprintf(stream, " ( %g %g %g )", x, y, z);
fprintf(stream, " CRC %u\n", actualCrc); 
```

我从文件中读取值如下。由于文件具有更复杂的语法并且必须进行解析，因此实际上涉及的内容更多，但我们假设它`getNextFloat()`返回之前编写的每个浮点数的文本表示。

```
float x = std::atof(getNextFloat());
float y = std::atof(getNextFloat());
float z = std::atof(getNextFloat());

uint32_t crc = 0xFFFFFFFF;
crc = Utility::updateCRC32(x, crc);
crc = Utility::updateCRC32(y, crc);
crc = Utility::updateCRC32(z, crc);
const uint32_t actualCrc = ~crc;

const uint32_t fileCrc = // read the CRC from the file
assert(fileCrc == actualCrc); // fails often, but not always 
```

此问题的根源在于 std::atof 将返回从文件读取的字符串中编码的浮点数的位表示，而不是用于将该字符串写入文件的浮点数的位表示。

所以，我的问题是：除了对字符串本身进行校验和之外，还有其他方法可以实现我的校验和浮点数的目标吗？

谢谢阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:39:29.590

如果文本文件不必是人类可读的，请改用[十六进制浮点文字](https://stackoverflow.com/questions/4825824/hexadecimal-floating-constant-in-c)，它们是精确的，因此您不会遇到文本和内存值之间存在差异的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T11:00:09.797

从您的评论中可以看出问题的根源：

> 如果我没有完全弄错，这里没有四舍五入。说明`%g`符选择准确表示数字的最短字符串表示。

这是不正确的。如果未指定精度，则默认为 6，并且对于大多数浮点输入*肯定会进行舍入。*

如果您需要一种人类可读的往返格式，`%a`这是迄今为止最好的选择。否则，您将需要指定至少 9 的精度（假设`float`您的系统上是 IEEE-754 单精度）。

你可能仍然会被 NaN 编码绊倒，因为标准没有指定如何或是否必须打印它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:45:13.100

如果您的标准库的浮点到文本和文本到浮点转换进行了适当的舍入，那么除非您还具有 Infs 和 NaN，否则您只需要足够的有效数字来使 float->text->float 往返无损，但它仍然应该我认为是“保值”，不一定是位模式，因为无穷大或 NaN 有多种表示形式。对于 IEEE-754 64 位双 17 位有效数字足以使往返相对于实际值无损。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T10:54:46.923

对于单个值具有多个二进制表示的任何类型，您的 CRC 算法都是有缺陷的。IEEE 754 对 0.0 有两种表示，即 +0.0 和 -0.0。其他非有限值（例如 NaN）也可能很麻烦。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T11:14:14.833

在更新 CRC 之前规范化您的号码是否可以接受？因此，在保存时，您将获得数字的临时字符串版本（使用 sprintf 或与您的序列化格式匹配的任何内容），然后将此字符串转换回数值，然后使用此结果更新 CRC。这样，您就知道 CRC 将匹配反序列化的值。

# java - 如何从另一个系统访问在 localhost 上运行的 Axis2 Web 服务？

> ID：15429594
> 
> 赞同：0
> 
> 时间：2013-03-15T10:11:09.640
> 
> 标签：java, web-services, ip, tomcat7, axis2

我使用 Eclipse 制作了一个非常基本的 Web 服务（Axis2），该服务在带有 URL 的 localhost 上成功运行`"localhost:8080/webApp/services/Hello?wsdl"`。现在根据我的需要，我必须从另一个系统浏览器访问此 Web 服务。我在浏览器的 URL 地址栏中写什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:20:26.357

两个系统都必须属于同一个网络，然后只需将 localhost 替换为 URL 中托管系统的 IP 地址

```
URL "localhost:8080/webApp/services/Hello?wsdl" 
```

成为托管 Web 服务的系统的 ip = 192.111.111.111

```
URL "192.111.111.111:8080/webApp/services/Hello?wsdl" 
```

# xml-serialization - XmlMessageFormatter 序列化 System.Version 的模糊行为

> ID：15429597
> 
> 赞同：0
> 
> 时间：2013-03-15T10:11:10.950
> 
> 标签：xml-serialization

我将 MSMQ 与 XmlMessageFormatter 序列化程序一起使用。

mq.Formatter = new XmlMessageFormatter(new Type[] { typeof(TransportEnvelop), typeof(System.Version) } ); msg = new TransportEnvelop(new Version(0, 1, 0, 1), DateTime.Now); mq.发送（味精）；

我正在将生成的消息写到控制台，设置的版本就在那里。

如果我从队列中读回消息，System.Verion 值为“0.0”[通过 Console.WriteLine]。

如果我使用管理工具查看队列，我会看到：

```
<Version/> 
```

如果我用我自己的 Version 类替换 System.Version 类，一切都如我所料。

有人可能有想法，我做错了什么？？？

无论如何，谢谢，最好的问候，

++马布拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-22T01:54:34.980

这似乎是重复的： [System.Version not serialized](https://stackoverflow.com/questions/2085866/system-version-not-serialized)

我在发送版本作为 WCF 调用的属性时遇到了类似的问题，但它现在无法正常工作，而且它曾经很好。我认为这与从 VS2010 升级到 VS2012 有关。但是，它在本地工作得很好，但在服务器上却不行。因此，我推测它可能会受到系统配置或 IIS 设置方式的影响。我不是 100% 确定那可能在哪里。

# xcode - 如何在 Xcode 中每分钟重新加载一个视图？

> ID：15429600
> 
> 赞同：0
> 
> 时间：2013-03-15T10:11:34.850
> 
> 标签：xcode, parsing, view, radio

我有以下问题 - 我有一个收音机应用程序。我正在从 Web HTML 元素解析当前歌曲的标题并将其显示在标签中。我每分钟都在我的函数中使用 NSTimer 加载此元素，以查看它是否已更改。这是我的功能：

```
-(void)parsing
{
    NSURL *url = [NSURL URLWithString:@"http://live.radioeuphoria.bg:41232/played.html?sid=1"];
    NSData *webData = [NSData dataWithContentsOfURL:url];
    NSString *xPathQuery = @"//tr[2]/td[2]";
    TFHpple *parser = [TFHpple hppleWithHTMLData: webData];
    NSArray *array = [parser searchWithXPathQuery:xPathQuery];
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    {
        CLTickerView *ticker = [[CLTickerView alloc] initWithFrame:CGRectMake(200, 798, 556, 50)]; // movable text
        for (TFHppleElement *element in array)
        {
            ticker.marqueeStr = [[element firstChild] content];
        }
    // ticker.marqueeStr = @"Current song's title";
        ticker.marqueeFont = [UIFont boldSystemFontOfSize:42];
        [self.view addSubview:ticker];
        NSLog(@"bla bla");
    }
    else
    {
        CLTickerView *ticker = [[CLTickerView alloc] initWithFrame:CGRectMake(86, 346, 230, 30)]; // movable text
        for (TFHppleElement *element in array)
        {
            ticker.marqueeStr = [[element firstChild] content];
        }
        ticker.marqueeFont = [UIFont boldSystemFontOfSize:22];
        [self.view addSubview:ticker];
        NSLog(@"bla bla");
    }
} 
```

在我 viewDidLoad 我这样做：

```
- (void)viewDidLoad
{
    [self parsing];
    timer = [NSTimer scheduledTimerWithTimeInterval:60.0 target:self selector:@selector(parsing) userInfo:nil repeats:YES];
    [super viewDidLoad];

} 
```

这样，标签每分钟都会出现在旧标签上，而不是替换它。如何用新视图替换我正在显示的旧视图 ([self.view addSubview:ticker];)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:33:03.897

一旦参考这个

```
 -(void)parsing
        {
            NSURL *url = [NSURL URLWithString:@"http://live.radioeuphoria.bg:41232/played.html?sid=1"];
            NSData *webData = [NSData dataWithContentsOfURL:url];
            NSString *xPathQuery = @"//tr[2]/td[2]";
            TFHpple *parser = [TFHpple hppleWithHTMLData: webData];
            NSArray *array = [parser searchWithXPathQuery:xPathQuery];
            if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
            {
                CLTickerView *ticker = [[CLTickerView alloc] initWithFrame:CGRectMake(200, 798, 556, 50)]; 
    // here every time you are creating ticker that's why it overlaps remove this on here and add in viewDidload (define ticker globally). 

                for (TFHppleElement *element in array)
                {
                    ticker.marqueeStr = [[element firstChild] content];
                }
            // ticker.marqueeStr = @"Current song's title";
                ticker.marqueeFont = [UIFont boldSystemFontOfSize:42];
                [self.view addSubview:ticker];
                NSLog(@"bla bla");
            }
            else
            {
                CLTickerView *ticker = [[CLTickerView alloc] initWithFrame:CGRectMake(86, 346, 230, 30)];
 // here every time you are creating ticker that's why it overlaps remove this on here and add in viewDidload (define ticker globally).
                for (TFHppleElement *element in array)
                {
                    ticker.marqueeStr = [[element firstChild] content];
                }
                ticker.marqueeFont = [UIFont boldSystemFontOfSize:22];
                [self.view addSubview:ticker];
                NSLog(@"bla bla");
            }
        } 
```

# database - H2 DB CSVWRITE 字符串中的重复双引号

> ID：15429605
> 
> 赞同：2
> 
> 时间：2013-03-15T10:11:45.600
> 
> 标签：database, csv, h2

我试图`H2`使用函数将 DB 中的表导出到 CSV 中`CSVWRITE`，并发现双引号是否包含在`varchar`列中，它们将被复制。

例如。-`'hello"howareyou' will be 'hello""howareyou' in the written csv.`

尝试使用转义字符和其他一些组合保存此 varchar 列，但结果是相同的。

以下是我为测试此问题而创建的表格列以及得到的 CSV 值。

```
 My column         CSV written value
    ------------------------------
    hello"how         hello""how
    hello\"how        hello\""how
    hello""how        hello""""how
    hello\""how       hello\""""how
    hello\\"how       hello\\""how
    hello\\\\"how     hello\\\\""how
    hello["]how       hello[""]how
    hello&quote;how   hello&quote;how 
```

以下是我的 CSVWrite 命令：

```
 CALL CSVWRITE(
      '#DELTA_CSV_DIR#/DELTA.csv', 
      'SELECT ccc from temptemp', 
      null,  '|',  ''); 
```

我做错了吗？或者我可以使用任何选项或解决方法来避免这种情况？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T13:37:03.193

您当前正在使用带有以下选项[的内置 CSVWRITE 函数：](http://h2database.com/html/functions.html#csvwrite)

*   文件名 = '#DELTA_CSV_DIR#/DELTA.csv'
*   查询 = '从 temptemp 中选择 ccc'
*   字符集 = 默认 (UTF-8)
*   字段分隔符 = '|'
*   fieldDelimiter = ''（空字符串）

[如文档所述，默认转义字符是双引号](http://h2database.com/html/grammar.html#csv_options)，因此使用双引号对双引号进行转义（与在 Java 字符串中使用反斜杠转义反斜杠的方式相同）。需要转义字符来转义字段分隔符。

您可以按如下方式禁用转义字符：

```
CALL CSVWRITE(
  '#DELTA_CSV_DIR#/DELTA.csv', 
  'SELECT ccc from temptemp', 
  'fieldSeparator=| fieldDelimiter= escape='); 
```

这也为选项使用了更具可读性的新格式。

# html - CSS：隐藏具有第二个深度的ul的第一个列表项

> ID：15429614
> 
> 赞同：2
> 
> 时间：2013-03-15T10:12:17.627
> 
> 标签：html, css, css-selectors

我有以下导航结构……</p>

```
<ul role="navigation">
    <li class="page_item page-item-2">
        <a href="#">Sections</a>
        <ul class="children">
            <li class="page_item"><a href="#">One</a></li>
            <li class="page_item"><a href="#">Two</a></li>
            <li class="page_item"><a href="#">Three</a></li>
        </ul>
    </li>
    <li class="page_item page-item-6">
        <a href="#">About</a>
        <ul class="children">
            <li class="page_item"><a href="#">Contact</a></li>
            <li class="page_item"><a href="#">Members</a></li>
            <li class="page_item"><a href="#">Become Member</a></li>
            <li class="page_item"><a href="#">Whatever</a></li>
        </ul>
    </li>
</ul> 
```

如何隐藏`<a>`外部列表元素中每个元素的第一次出现？就我而言，我说的`<a href="#">Sections</a>`是`<a href="#">About</a>`

我想

```
ul li > a { display:none; } 
```

或者

```
ul > li > a { display:none; } 
```

应该做的伎俩，但它隐藏了一切。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T10:14:18.823

那是因为所有的`a`s 都是 s 的孩子，`li`它们都是 s 的孩子`ul`。

您的顶层`ul`有一个`role="navigation"`，因此您可以选择：

```
ul[role="navigation"] > li > a { display:none; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:47:13.443

我认为最简单和最有效的方法是添加类 like `.hidden {display: none;}`，但您也可以向外部添加一个类`ul`，然后：

`.ul-outer-class > li > a { display: none; }`

它也比使用属性选择器更有效。

# asp.net - 将链接按钮添加到网络表单中的用户控件？

> ID：15429616
> 
> 赞同：3
> 
> 时间：2013-03-15T10:12:28.067
> 
> 标签：asp.net, user-controls, webforms

我的应用程序（gridview）中有一个产品列表用户控件。对于最终用户和管理页面（产品列表），我有几乎相同的逻辑。

> “最终用户”角色只能查看产品，管理员可以“编辑”和“删除”产品。

我计划对产品使用用户控件，以及如何根据用户角色动态添加按钮。网络表单可以做到这一点，还是我应该完全放弃这个想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:14:11.573

您可以根据您的情况在服务器端 RowDataBound 事件上显示/隐藏按钮。隐藏控件 html 不会在客户端生成和发送。

```
void gridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
  if (e.Row.RowType == DataControlRowType.DataRow)
  {

      if(DataBinder.Eval(e.Row.DataItem, "ColumnName").ToString() == "SomeValue")
           e.Row.FindControl("YourControlID").Visible = false; 
  }
} 
```

# asp.net - 使用数据绑定导航 Url

> ID：15429620
> 
> 赞同：1
> 
> 时间：2013-03-15T10:12:36.627
> 
> 标签：asp.net

我正在尝试将超链接与产品名称绑定并根据 id 导航到产品详细信息页面。导航网址始终使用产品 ID 0。这是我的代码

```
<asp:TemplateField HeaderText="Product Name">
     <ItemTemplate>
        <asp:HyperLink 
            ID="hl1" 
            Text='<%# Bind("Product_name") %>' 
            runat="server"
            DataNavigateUrlFields="ProductId" 
            ControlStyle-ForeColor="#0066FF" 
            DataNavigateUrlFormatString="~/ProductDetails.aspx?ProductId{0}"
            NavigateUrl="~/ProductDetails.aspx?ProductId{0}" />
      </ItemTemplate>
</asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T10:14:55.100

像这样使用——

```
NavigateUrl='<%# Eval("ProductId","~/ProductDetails.aspx?ProductId{0}" ) %>' 
```

# google-bigquery - 谷歌 bigQuery 最新版本

> ID：15429624
> 
> 赞同：0
> 
> 时间：2013-03-15T10:12:56.550
> 
> 标签：google-bigquery, google-api-java-client

作为一个 Maven 用户，我想知道在哪里可以找到**最新**的bigQuery 修订版。

实际上，我正在从[code.google.com 上的 Api wiki](http://code.google.com/p/google-api-java-client/wiki/APIs#BigQuery_API)检索它，但不确定这是指定的最新版本：

> *注意：服务器上的最新版本号 (rev#) 可能略高于此处指定的版本号。*

我问这个问题是因为我阅读[了昨天（14 月 3 日）发布的文章](http://googledevelopers.blogspot.fr/2013/03/bigquery-gets-big-new-features-to-make.html)，其中宣布了 BQ 的一些更改，例如引入 TIMESTAMP 字段，但我无法使用以下修订版使其工作

> v2-rev67-1.13.2-beta

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:49:24.983

刚刚在 2013 年 3 月 13 日更新了 Maven 仓库。

有关最新 Java 库的信息在这里： [https ://google-api-client-libraries.appspot.com/apis/bigquery/v2?lang=java](https://google-api-client-libraries.appspot.com/apis/bigquery/v2?lang=java)

示例 pom.xml 添加：

```
<repositories>
    <repository>
      <id>google-api-services</id>
      <url>http://google-api-client-libraries.appspot.com/mavenrepo/</url>
    </repository>
  </repositories>
  ...
  <dependencies>
    <dependency>
      <groupId>com.google.apis</groupId>
      <artifactId>google-api-services-bigquery</artifactId>
      <version>v2-rev67-1.13.2-beta</version>
    </dependency>
  </dependencies> 
```

# php - 使用 PHP 和 Grunt 开发单页应用程序的工作流程

> ID：15429629
> 
> 赞同：3
> 
> 时间：2013-03-15T10:13:11.947
> 
> 标签：php, single-page-application, yeoman, gruntjs

我希望我的 PHP 单页应用程序对搜索引擎和无 js 浏览器都友好，所以按照[Addy Osmani 的这篇文章](http://addyosmani.com/blog/building-spas-jquerys-best-friends/)，我认为我应该编写一个可以响应 url 参数的 index.html 页面的 php 版本。

据我所知，我的 index.php 应该类似于使用 Grunt 构建后生成的 dist/index.html 的调整版本，我将在其中添加我的 php 代码。但是，我发现这不是一个非常干燥的方法，因为每次我对 index.html 进行更改时，它都会涉及手动编辑我的 index.php（或我为其选择的任何其他文件名）。

我确信在 Grunt/Yeoman 工作流程中必须有其他方式（可能很明显）来处理这个问题，但我现在想不通，如果有任何提示，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T00:09:46.720

我通常把网站设计成一个多页网站，

后来我使用 ajax-loading 将其转换为单页。

ajaxify JQuery 插件是一个快速完成的好方法：

[http://www.swook.net/p/jquery-ajaxify-plugin.html](http://www.swook.net/p/jquery-ajaxify-plugin.html)

优点：SEO不会受到伤害，搜索引擎会跟随链接。

# ssis - 从 SSIS 中的地址中提取城市、省、国家等

> ID：15429633
> 
> 赞同：0
> 
> 时间：2013-03-15T10:13:23.547
> 
> 标签：ssis, substring, extract

我正在做 ETL，想从 1000 个地址中提取城市、省份。我曾尝试`SUBSTRING( «character_expression», «start», «length» )`在 SSIS 中进行转换，但无法得到结果，因为我不知道在每个地址中，子字符串的开头在哪里以及每个所需子字符串的长度是多少。

以下是我想要“MDA ROAD”、“MULTAN”等的例子。

```
PAKISTAN COTTON GINNERS' ASSOCIATION PCGA HOUSE, M.D.A. ROAD, MULTAN
PAKISTAN CROP PROTECTION ASSOCIATION 2-A, INDUSTRIAL ESTATE ROOMY COTTON FACTORY, MULTAN
PAKISTAN AGRICULTURE & DAIRY FARMERS ASSOCIATION 16-C, PEOPLES COLONY, FAISALABAD
THE FAISALABAD CHAMBER OF COMMERCE & INDUSTRY FCCI COMPLEX, EAST, CANAL ROAD, FAISALABAD 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:28:10.970

您可以使用两种策略，具体取决于地址结构是否正常

1.  使用`,`字符的位置将地址分解为组件
2.  使用已知街道和省份的查找表在地址中识别它们

选项 1 是最简单的 - 但依赖于一致的地址格式：即所有组件由 a 分隔`,`，省始终是最后一个组件，城市始终是倒数第二个。

您将使用该`TOKEN`函数将地址分解为`,`

对于省（最后一个组成部分），它将类似于：

```
TRIM(TOKEN([Address], ",", TOKENCOUNT([Address], ","))) 
```

对于城市（倒数第二部分），它将是：

```
TRIM(TOKEN([Address], ",", TOKENCOUNT([Address], ",") - 1)) 
```

# ipad - 在 webapp 中打开外部网站时，如何保持标题栏保持不变？

> ID：15429639
> 
> 赞同：1
> 
> 时间：2013-03-15T10:13:32.523
> 
> 标签：ipad, web-applications, jquery-mobile, header, navigation

我正在尝试使用 Web 应用程序访问业务中的一些关键内部站点。Web 应用程序全屏打开，没有地址栏等。主页面有一个带返回和主页按钮的标题栏。要在 webapp 中打开内部链接，使用了以下代码

```
<script type="text/javascript">
function OpenLink(theLink){
window.location.href = theLink.href;
}
</script> 
```

以及“a href”中的以下内容

```
onclick="OpenLink(this); return false" 
```

新页面在没有地址栏等的 Web 应用程序中打开，但是如何保留 Web 应用程序标题栏以及其中的后退和主页按钮以进行基本导航？

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:19:08.767

您应该为此使用 iFrame。这是一个例子：http: [//jsbin.com/aziqap/1](http://jsbin.com/aziqap/1)

# c++ - 从 C++ 调用 Fortran；返回时字符串损坏

> ID：15429644
> 
> 赞同：4
> 
> 时间：2013-03-15T10:13:42.543
> 
> 标签：c++, string, fortran

我从 C++ 调用一个 Fortran 77 函数，它传递一个文件句柄、一个字符串和长度。文件成功打开，Fortran 子例程退出。但是，在 C++ 代码中，传递给 fortran 的字符串已损坏。当到达函数 openFile 的底部时，程序崩溃。

崩溃仅出现在发布中，而不出现在调试中。绘制字符串，我看到在 release 变量 fileNameToFortran 中充满了垃圾。

谢谢你的帮助

我在发行版（Windows 7 机器（32 位））中使用带有以下编译器标志的 ifort： /names:lowercase /f77rtl /traceback /iface:cref /threads /recursive /LD

并在调试中： /names:lowercase /f77rtl /traceback /iface:cref /threads /recursive /LDd /Zi /debug:full /check:all /traceback

* * *

这是C代码：

```
typedef void  (FORTCALL *sn_openfile_func) (int *,
                                            char[],
                                            int *,
                                            int);
void openFile(const int fileHandle, const std::string fileName)
{
  int fileHandleToFortran = fileHandle; 
  char fileNameToFortran[20]; 
  assert(fileName.size() < 20);

  strcpy(fileNameToFortran, fileName.c_str()); 
  int lstr = strlen(fileNameToFortran);
  openfile_func_handle(&fileHandleToFortran, fileNameToFortran, &lstr, lstr);
} 
```

这是 Fortran 代码：

```
 SUBROUTINE SN_OPENFILE(FILENR,FILENAME,FSIZE)
      !DEC$ ATTRIBUTES DLLEXPORT :: SN_OPENFILE
      IMPLICIT NONE
      INTEGER FILENR, FSIZE
      CHARACTER FILENAME*FSIZE
      OPEN (FILENR,FILE = FILENAME, 
     &       ACCESS = 'SEQUENTIAL' , STATUS = 'REPLACE', ERR=222)
      GOTO 333
222   WRITE(*,*) 'Error opening file'
333   END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:38:52.200

好的，我自己找到了答案。

宏 FORTCALL 被定义为 __STDCALL 现在，当使用 iface:cref 时，它只会在发布时崩溃。这很奇怪，但是在我删除它之后，它可以用于发布和调试。

# c# - 如何监控正在执行硬删除的 SQL 语句

> ID：15429647
> 
> 赞同：0
> 
> 时间：2013-03-15T10:13:59.140
> 
> 标签：c#, sql-server, sql-server-profiler

我有一个与 SQL Server 2008 交互的应用程序。我想编写一个工具来帮助我识别导致表中硬删除的 SQL 语句。是否可以使用 SQL Profiler 进行查找？还是我应该在所有存储过程中编写触发器来找出答案？如何实现它。任何方向都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:23:17.053

首先，看一下[在 SQL SERVER 中监控 SQL 查询的进度](https://stackoverflow.com/questions/3289670/monitoring-the-progress-of-an-sql-query-in-sql-server)。要监视某些 sql 查询的进度，请参见[示例](http://myqol.com/CodeSamples/CSharpConsole/CSharpConsoleExample.aspx?id=141)。

# python - 有谁知道如何通过标签增加分数

> ID：15429650
> 
> 赞同：0
> 
> 时间：2013-03-15T10:14:09.470
> 
> 标签：python, user-interface, python-2.7, tkinter

Baically我创建了一个简单的数学游戏，并让它显示问题是对还是错，但我无法更新分数，还有人知道我如何让问题刷新到另一个问题，我试过应用程序。更新 ？：

```
 self.a1button = Tkinter.Button(self, background="blue",foreground="white", text = (random_row.A1), command = self.QUESTION1)
            self.a1button.grid(row = 9, column = 1, sticky = 'W')

            self.label5 = Tkinter.Label(self, text = "Score:")
            self.label5.grid(row = 14, column = 1, columnspan = 5, sticky = 'S')

            self.label7 = Tkinter.Label(self, text = 0 )
            self.label7.grid(row = 14, column = 6, columnspan = 1, sticky = 'E')

def QUESTION1(self):

    if self.a1button['text'] == self.label6['text']:
        tkMessageBox.showinfo("CORRECT", "WELL DONE")
        label7 = +100
        app.refresh
    else:
        tkMessageBox.showinfo("INCORRECT", "YOU FULLY GOT IT WRONG :/")
        label7 = -100
        app.refresh 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:17:52.413

您需要先从标签中*读取*当前分数，加上或减去 100 分，然后再次*设置*标签：

```
score = int(self.label7.get())
score += 100
self.label7.set(str(score))
app.refresh() 
```

请注意，您还需要*调用*该`refresh`方法，而不仅仅是引用它。

使用 -= 减去。

# java - 如何将 JFrame 设置为 JDialog 的父级

> ID：15429653
> 
> 赞同：14
> 
> 时间：2013-03-15T10:14:11.710
> 
> 标签：java, swing, jframe, modal-dialog, jdialog

我无法将框架设置为对话框的所有者。通常，当我扩展`JDialog`类以创建对话框时，我会使用`super(frame)`来指定对话框的所有者，以便在您按下 时它们都不会脱节`alt+tab`。`new`但是，当我使用like创建对话框时，我`JDialog dialog = new JDialog()`无法将框架指定为对话框的所有者。

以下示例演示了上述两种方法。`Top Click`按钮打开一个**没有扩展 JDialog**的对话框。`Bottom Click`按钮打开一个**扩展 JDialog**的对话框。

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;

public class DialogEx {

    public static void main(String[] args) {
        Runnable r = new Runnable() {
            public void run() {
                new DialogEx().createUI();
            }
        };
        EventQueue.invokeLater(r);
    }   

    private void createUI() {
        final JFrame frame = new JFrame();
        frame.setLayout(new BorderLayout());

        JButton button1 = new JButton("Top Click");
        JButton button2 = new JButton("Bottom Click");

        button2.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                new DialogExtend(frame).createUI();
            }
        });

        button1.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent event) {
                new DialogWithoutExtend(frame).cretaUI();
            }
        });

        frame.setTitle("Test Dialog Instances.");
        frame.add(button1, BorderLayout.NORTH);
        frame.add(button2, BorderLayout.SOUTH);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(new Dimension(300, 200));
        frame.setVisible(true);
    }

    class DialogExtend extends JDialog {
        private JFrame frame;
        public DialogExtend(JFrame frame) {
            super(frame);
            this.frame = frame;
        }

        public void createUI() {
            setLocationRelativeTo(frame);
            setTitle("Dialog created by extending JDialog class.");
            setSize(new Dimension(400, 100));
            setModal(true);
            setVisible(true);
        }
    }

    class DialogWithoutExtend {

        private JFrame frame;
        public DialogWithoutExtend(JFrame frame) {
            this.frame = frame;
        }

        public void cretaUI() {
            JDialog dialog = new JDialog();
            dialog.setTitle("Dialog created without extending JDialog class.");
            dialog.setSize(new Dimension(400, 100));
            dialog.setLocationRelativeTo(frame);
            dialog.setModal(true);
            dialog.setVisible(true);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-15T11:00:23.210

对话框（或窗口）的所有者*只能*在构造函数中设置，因此设置它的唯一方法是使用以所有者为参数的构造函数，例如：

```
class DialogWithoutExtend {

    private JFrame frame;
    public DialogWithoutExtend(JFrame frame) {
        this.frame = frame;
    }

    public void cretaUI() {
        JDialog dialog = new JDialog(frame);
        dialog.setTitle("Dialog created without extending JDialog class.");
        dialog.setSize(new Dimension(400, 100));
        dialog.setLocationRelativeTo(frame);
        dialog.setModal(true);
        dialog.setVisible(true);
    }
} 
```

# c# - 没有特殊字符的文本框最大字符数

> ID：15429656
> 
> 赞同：-1
> 
> 时间：2013-03-15T10:14:17.703
> 
> 标签：c#, textbox

我有一个带有数值和千位分隔符等的文本框。例如：12,111,111,111.804

最大长度为 14 个字符。

问题是，当我编辑该文本框时，它会计算特殊字符并且不允许在框中输入新值。我如何简单地消除最大长度中的特殊字符。

编辑：

对不起，伙计们不在城里。假设我们采用以下编号：12,312,312,312,312。所以有14位数字。我删除了最后 3 个。所以它将是 12,312,312,312，。现在我想为我删除后添加另外 3 位数字。我正在使用.net 2.0。这是一个 Windows 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:30:01.733

添加一个 keyPress 事件并包含以下代码。将 >= 5 替换为文本框的最大大小，不包括小数或逗号。

```
private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
{
    if(Char.IsNumber(e.KeyChar))
        if(textBox1.Text.Replace(",", "").Replace(".", "").Length >= 5)
            e.Handled = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:27:27.197

您可以通过根据需要自定义它来尝试使用以下 jquery 代码：

```
$(document).ready(function ()
{
    $('#textbox1').keyup(function (event)
    {
        var currentValue = $(this).val();
        var length = currentValue.length;
        var commaCount = 0;

        // Get Comma Count
        for (i = 0; i < this.value.length; i++)
        {
            if (this.value.charAt(i) == ',')
                commaCount++;
        }

        if (length > 3)
        {
            // remove comma's to work out the number of digits.
            length = length - commaCount;
        }

        if (length<=14)
        {
            $(this).val(currentValue);
        }
        else
        {
            alert("validation fails! length can not exceed 14 digits");
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:43:42.257

您可以使用`Linq`来计算字符串中的数字

```
int count = textBox1.Text.Count(char.IsNumber); 
```

所以你可以使用喜欢

```
if (textBox1.Text.Count(char.IsNumber) <= 14)
{
    //valid
} 
```

# windows-store-apps - Windows 8 Store App 使用 HTML/WINJS winjs.ui.listview 聚类数据项

> ID：15429658
> 
> 赞同：0
> 
> 时间：2013-03-15T10:14:20.543
> 
> 标签：windows-store-apps, winjs

我已经创建了一个 Winjs.UI.ListView（在 GridViewtemplate 中使用 Binging：一些图像和标题），一切都很好，但我想去集群（使组）我的项目彼此靠近，其他项目在下一列列表显示 。如果有人有想法或部分代码，我会考虑周到。

# c# - 消费网络服务

> ID：15429659
> 
> 赞同：0
> 
> 时间：2013-03-15T10:14:24.633
> 
> 标签：c#, wpf, wcf, visual-studio-2012, ria

我有一个通过 RIA 使用数据的 silverlight 应用程序。一些方法以一种可以通过服务参考在 Silverlight 和 WPF 应用程序中使用的方式公开。在开发时，这些服务通过 localhost 调用，一切正常。我已经设置了我的主机文件，以便它可以在子域.domain.com。现在（也经过几次重新启动）当我通过不同的浏览器访问 .svc 时，我在同一 URL 上的 Chrome 和 Internet Explorer 中得到不同的响应。

**Chrome 显示**：[Name of] Service，要测试此服务，您需要创建一个客户端并使用它来调用该服务。您可以使用命令行中的 svcutil.exe 工具执行此操作，语法如下： ...您还可以将服务描述作为单个文件访问：...

**Internet explorer, Firefox 显示**：[未显示名称] 服务，要测试此服务，您需要创建一个客户端并使用它来调用该服务。您可以使用命令行中的 svcutil.exe 工具执行此操作，语法如下： ... Internet Explorer 中缺少最后一部分（第二个 url，单个文件访问链接）。

但最糟糕的是，如果我在添加服务引用时在 VS2012 中输入相同的 url，我会收到以下消息：

> 请求失败，HTTP 状态为 404：未找到。元数据包含无法解析的引用：...

服务如何对几乎相同的请求给出三种不同的响应？

更新：也许有用的信息是该服务不包含在单独的 .svc 文件中，而是一个 ProjectDomainService.cs（和 AuthenticationDomainService.cs），并且 .svc url 以某种方式自动捕获（服务器上不存在此类文件）。而且，如果我删除，Chrome 的行为与 Internet Explorer 相同

```
<add name="Soap" type="Microsoft.ServiceModel.DomainServices.Hosting.SoapXmlEndpointFactory, Microsoft.ServiceModel.DomainServices.Hosting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/> 
```

来自 web.config。

此外，ping subdomain.domain.com 会显示我的本地 IP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:24:51.530

问题似乎是一个简单的 ID-10-T 错误。我们公司在 Internet 选项（连接）下为 LAN 设置设置了自动配置脚本。取消选中这会使所有浏览器都可以使用主机条目，并且一切似乎都按预期/期望工作。虽然我知道代理在使用主机文件时会导致问题，但我不知道我的系统设置（它没有设置为在设置中可见，但隐藏在网络共享的配置文件中）。

在这些（旧）设置下工作的唯一浏览器是未安装的浏览器，而是便携式副本。

由于这解决了我的问题，我不确定天气我现在可以期待其他意想不到的问题......但至少它有效。

# jquery - 根据日期选择重定向到网站

> ID：15429663
> 
> 赞同：-1
> 
> 时间：2013-03-15T10:14:32.183
> 
> 标签：jquery, jquery-ui-datepicker

我在我的网页上插入了一个日期选择器。我希望用户选择一个日期，并根据他们的选择能够转到某个页面。

我想我必须设置像`day1 = <a href:http//www.yahoo.com>`.

到目前为止我所拥有的：

```
$(function() {
    $("#datepicker").datepicker({ showOtherMonths: false });
});

$('#datepicker').datepicker({onSelect: function(dateText, inst) 
    { 
        window.location = 'http://www.yahoo.com' + dateText;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:20:56.683

```
$(".date").datepicker({
  onSelect: function(dateText) {
   callFunction(this.val);
  }
});

function callFunction(value)
{
 window.location = 'http://www.yahoo.com' + value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:23:30.567

假设您知道要检查的日期，您可以使用 if 语句：

```
$('#datepicker').datepicker({onSelect: function(dateText, inst) 
{ 
    //this will show a message box showing you the date format. just remove this line after.
    alert(dataText);  
    if(dateText == "some-day-1") window.location = "link to some page";
    if(dateText == "some-day-2") window.location = "link to another page";
    if(dateText == "some-day-3") window.location = "link to yet another page";
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:25:54.827

首先，您可以写下下面的代码来结帐首先想要 onSelect，您可以写下下面的代码来结帐想要在控制台中触发 onSelect 事件：

```
onSelect: function(dateText, inst) {
    console.log(arguments);
} 
```

而且我不确定您是否真正想要，我可以告诉您的是，dateText 将是使用选择的格式化文本，您可以通过

```
inst.selectedDay
inst.selectedMonth
inst.selectedYear 
```

# c++ - 来自 C++ 的 QML 回调，自定义类型作为参数

> ID：15429669
> 
> 赞同：1
> 
> 时间：2013-03-15T10:14:48.797
> 
> 标签：c++, qt, qml

我希望能够使用自定义类的实例作为参数从 C++ 调用 QML 函数，然后从 QML 操作该实例。

这是我到目前为止所做的：

数据.h

```
class Data : public QObject
{
    Q_OBJECT
    Q_PROPERTY(QString text READ text WRITE setText)

    public :
        Data() : QObject(), _text("Foo")  { }
        virtual ~Data()                   { }
        Data(const Data & other)          { _text = other._text; }

        QString text() const               { return _text; }
        void setText(const QString & text) { _text = text; }

    private :
        QString _text;
};

Q_DECLARE_METATYPE(Data); 
```

主文件

```
#include "Data.h"

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    Data callBackData;
    QQmlEngine engine;

    QQmlComponent rootComponent(&engine, QUrl::fromLocalFile("CallBack.qml"));
    QObject * rootObj = rootComponent.create();

    QMetaObject::invokeMethod(rootObj, "callMeBack",
                              Q_ARG(QVariant, QVariant::fromValue(callBackData)));

    return app.exec();
} 
```

回调.qml

```
import QtQuick 2.0

Item {
    function callMeBack(data) {
        console.log(data.text)
    }
} 
```

控制台输出`"Undefined"`. 我做错什么了吗 ？

将函数体更改为`console.log(data)`输出`"QVariant(Data)"`时，为什么我不能访问 data 的 text 属性？

我尝试`Data`使用注册为 QML 类型，`qmlRegisterType<Data>();`但这并没有改变任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:51:32.283

尝试传递一个 QObject 指针：

```
Data *callbackData = new Data;
...
QMetaObject::invokeMethod(rootObj, "callMeBack",
                          Q_ARG(QVariant, QVariant::fromValue(callBackData))); 
```

未经测试，但应该可以工作（QML 识别 QObject* 类型）。

# windows - 当我拥有 UIAccess 权限时，为什么 SetWindowPos 无法将窗口置于 z 顺序的前面？（Windows 7的）

> ID：15429673
> 
> 赞同：1
> 
> 时间：2013-03-15T10:15:07.737
> 
> 标签：windows, uac, z-order, uia

我遇到了 SetWindowPos 无法可靠地将外部进程窗口置于 z 顺序顶部的问题。我可以将窗户放在前面，例如：

```
 NativeMethods.SetWindowPos(hwnd, new IntPtr(-1), Left, Top, Width, Height, 0x10);
     NativeMethods.SetWindowPos(hwnd, new IntPtr(-2), Left, Top, Width, Height, 0x10); 
```

虽然它不是 100% 的时间。经过一番阅读，我发现了一些东西。

SetWindowPos 文档状态：

```
 To use SetWindowPos to bring a window to the top, the process that owns the window must have SetForegroundWindow permission. 
```

MSDN 上的一篇文章然后指出

```
 A process that is started with UIAccess rights has the following abilities:
    * Set the foreground window. 
```

AllowSetForeground 提及

```
 The calling process must already be able to set the foreground window 
```

我已经签署了我的 .exe 并启用了 UIAccess，以便我可以在清单中设置前景窗口：

```
 <requestedExecutionLevel  level="highestAvailable" uiAccess="true" /> 
```

我的程序启动，我收到 UAC 提示请求许可。然后我测试 UIAccess、管理员权限和 TokenElevationType。前 2 个返回 true，第 3 个返回 TokenElevationTypeFull。尽管我的新代码仍然遇到同样的问题。

我的代码是：

```
 uint processid=0;
    NativeMethods.GetWindowThreadProcessId(hwnd, out processid);
    NativeMethods.AllowSetForegroundWindow((int)processid);
    NativeMethods.SetWindowPos(hwnd, IntPtr.Zero, Left, Top, Width, Height, 0x10);
    NativeMethods.RedrawWindow(hwnd, IntPtr.Zero, IntPtr.Zero, NativeMethods.RedrawWindowFlags.Erase | NativeMethods.RedrawWindowFlags.Invalidate | NativeMethods.RedrawWindowFlags.NoChildren);
    NativeMethods.RedrawWindow(hwnd, IntPtr.Zero, IntPtr.Zero, NativeMethods.RedrawWindowFlags.Erase | NativeMethods.RedrawWindowFlags.Invalidate | NativeMethods.RedrawWindowFlags.UpdateNow | NativeMethods.RedrawWindowFlags.AllChildren); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:37:04.360

您想要做的与 Windows 为防止行为不端的程序从用户手中夺取控制权而制定的（复杂的）规则背道而驰。（控制不仅仅意味着输入焦点，还包括对可见和不可见的控制。）尽管您的意图可能与用户的意图一致，但您所要求的与破坏性程序通常试图做的没有区别。

有[其他方法](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680538%28v=vs.85%29.aspx)可以通知用户非前景窗口需要注意。[`FlashWindowEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679347%28v=vs.85%29.aspx)例如，退房。您还可以考虑弹出[通知气球](http://msdn.microsoft.com/en-us/library/windows/desktop/aa511497.aspx)的托盘图标。这些似乎是适当且有效的解决方案。

# bash - 如何在不提示用户名和密码的情况下运行 SVN 导出

> ID：15429674
> 
> 赞同：8
> 
> 时间：2013-03-15T10:15:09.247
> 
> 标签：bash, svn, shell, command

我是否可以在不提示用户并通过的情况下进行 SVN 导出？

我在命令中给出我的用户名并通过：

```
svn export --username bavhbavh --password blahblah svn://svn.someSite.com/folder/folder2/exportFile" 
```

但是在运行它时，它似乎仍然要求我输入用户名并通过。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-15T10:27:25.710

我在我的一个构建脚本中做了同样的事情，虽然我也使用了这个参数`--non-interactive`（不做交互式提示），而且它似乎工作得很好。

所以你的命令看起来像这样：

```
svn export --username bavhbavh --password blahblah --non-interactive svn://svn.someSite.com/folder/folder2/exportFile" 
```

# javascript - JStree在加载时打开所有父节点

> ID：15429677
> 
> 赞同：0
> 
> 时间：2013-03-15T10:15:16.863
> 
> 标签：javascript, jstree

所以，

这是一个来源

```
 <ul>
  <li id="1">
    <a href="#">
      Product root
    </a>
    <ul>
      <li id="2">
        <a href="#">
          Electronicis
        </a>
        <ul>
          <li id="445">
            <a href="#">
              Computers
            </a>
            <ul>
              <li id="446">
                <a href="#">
                  SSD
                </a>
              </li>
            </ul>
            <ul>
              <li id="447">
                <a href="#">
                  GPU
                </a>
              </li>
            </ul>
            <ul>
              <li id="448">
                <a href="#">
                  MoBo
                </a>
              </li>
            </ul>
          </li>
        </ul>
        <ul>
          <li id="449">
            <a href="#">
              Navigation
            </a>
          </li>
        </ul>
      </li>
    </ul>
    <ul>
      <li id="3">
        <a href="#">
          Whatever
        </a>
      </li>
    </ul>
  </li>
</ul> 
```

没有什么特别的只是几个嵌套列表......

这是我的 jsTree 加载脚本

```
$("#jsTreeContainer")
            .jstree({
                "plugins": ["themes", "html_data", "ui" , "search"]
            })            
            .bind("select_node.jstree", function(event, data) {

                var selectedObj = data.selected;
                alert(selectedObj.attr("id"));

            })            
            .delegate("a", "click", function (event, data) { event.preventDefault(); });
    }); 
```

我现在想要完成的是，在页面加载时打开节点“导航”（id：449）。我试过 initally_open，initally_select 参数没有运气，我什至试过摆弄搜索插件，再次没有运气。

有没有人设法做到这一点，以及如何做到的？

这一定是一个非常常见的请求，但我找不到解决方案。

我正在使用来自 gitHub 的 master 分支，这里... [https://github.com/vakata/jstree](https://github.com/vakata/jstree)

干杯，T。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:23:11.823

您可以尝试使用 $(treeid).jstree('open_node',id);

```
$("#tree").bind("open_node.jstree", function (event, data) { 
  if((data.inst._get_parent(data.rslt.obj)).length) { 
    data.inst._get_parent(data.rslt.obj).open_node(this, false); 
  } 
}); 
```

有关更多详细信息，请参阅此 [jsTree 打开一个分支](https://stackoverflow.com/questions/4171111/jstree-open-a-branch)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T12:51:15.123

不知道有没有帮助。但这就是我所做的：

```
 function openNode(tree, nodeId) {
        $(tree).jstree("select_node", "#" + nodeId);
        $(tree).jstree("toggle_expand", "#" + nodeId);
    } 
```

只需将 jsTree DOM 元素和 ID (449) 传递给函数。

# google-maps - 折线（路线）悬停时的工具提示

> ID：15429680
> 
> 赞同：3
> 
> 时间：2013-03-15T10:15:33.187
> 
> 标签：google-maps, google-maps-api-3

我已经在地图上制作了路线。使用一些坐标生成的路线，这些坐标完成了附加信息（速度）。我希望当路线悬停时，会出现一个工具提示并在这些坐标处显示信息（速度）。我很困惑如何显示速度的工具提示。

```
<html>
<head>
   <title>Polyline Route v3 Example</title>
   <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?v=3&amp;sensor=false"></script>
   <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>   
   <script type="text/javascript">
    var locations = [
        {"speed":"13","lat":"-6.246192976751192","lon":"106.79324626922607"}, {"speed":"33","lat":"-6.245723710157699","lon":"106.79603576660156"}, {"speed":"23","lat":"-6.245723710157699","lon":"106.79796695709229"}, {"speed":"43","lat":"-6.243334710069922","lon":"106.79800987243652"},
        {"speed":"12","lat":"-6.245723810157699","lon":"106.79796725709229"}, {"speed":"1","lat":"-6.245723860157699","lon":"106.79796735709229"}, {"speed":"45","lat":"-6.245723890157699","lon":"106.79797755709229"}, {"speed":"21","lat":"-6.245723910157699","lon":"106.79797895709229"}
    ];
    var map;
    function createRouteMap(){
    var listRoute = [];
    for (var i = 0; i < locations.length; i++) {
        listRoute.push(new google.maps.LatLng(locations[i].lat, locations[i].lon));
    }
    var mapOptions = {
      zoom: 16,
      center: listRoute[Math.ceil(listRoute.length/2)],
      mapTypeId: google.maps.MapTypeId.ROADMAP,
    };
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
    showMap(listRoute);
    createMarkers(locations);
}

function showMap(listRoute){
    if((listRoute.length < 1) || (listRoute == null)){
        jQuery("#map_canvas").html('<div class="alert alert-info"> <strong>Empty Trail!</strong> This trip still has no trail </div>'+
        '<div class="btn-toolbar"> <p><code>The gps device </code>in the car still not sent position!</p> </div>');
    }else{
        var flightPath = new google.maps.Polyline({
            path: listRoute,
            strokeColor: "#FF0000",
            strokeOpacity: 5,
            strokeWeight: 3.7
        });
        flightPath.setMap(map);
    }
}

function createMarkers(locations) {
    for (var i = 0; i < locations.length; i++) {
        var point = locations[i];
        var myLatLng = new google.maps.LatLng(point.lat, point.lon);
        var marker = new google.maps.Marker({
            position: myLatLng,
            map: map,
            icon: 'greencirclemarker.png',
            title: point.speed
        });
    }
}

$(document).ready(function() {
    createRouteMap();
});

</script>
</head>
<body>
<div id="map_canvas" style="height:400px; border:1px 00f solid;"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:54:01.727

您的“速度”与积分相关联。你有几个选择：

1.  添加标记并在鼠标悬停时显示速度（或作为标记的工具提示）

2.  使用自己的鼠标悬停事件处理程序将线的每一段渲染为单独的折线。您将需要指定如何将速度应用于线段。使用单个折线可以使用更复杂的方法，但是使用鼠标悬停事件可能会出现性能问题。

# java - 是否可以创建类似于字符串的对象池？

> ID：15429682
> 
> 赞同：5
> 
> 时间：2013-03-15T10:15:38.957
> 
> 标签：java

由于 jvm 为 String 管理字符串池，它从中查找任何新的 String 分配，类似地，我们可以开发任何其他对象或原语的池吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T10:21:09.297

Java 字符串常量的实习池对于 Java 编译器来说是已知的，因此您无法自己模仿确切的行为。

然而，池本身只不过是一个哈希映射。如果你的对象有一个合适的标识符，你当然可以为你自己的对象滚动一个池：只需创建一个静态方法，它接受一个键，在静态哈希映射中查找它，并且只有在它没有被池化时才构建一个新对象然而。但是请注意，为了使这个简单的方案起作用，您的对象必须是不可变的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T10:21:00.863

字符串池并不是Java中唯一的池/缓存，Integer等包装类使用缓存，可以以Integer源码为例

```
public static Integer valueOf(int i) {
    assert IntegerCache.high >= 127;
    if (i >= IntegerCache.low && i <= IntegerCache.high)
        return IntegerCache.cache[i + (-IntegerCache.low)];
    return new Integer(i);
} 
```

你也可以看看[http://commons.apache.org/proper/commons-pool//](http://commons.apache.org/proper/commons-pool//)

# java - java中配置对象的对象类型

> ID：15429683
> 
> 赞同：0
> 
> 时间：2013-03-15T10:15:41.607
> 
> 标签：java, configuration-files

我想知道如何制作一个包含用户填写到配置文件中的所有配置设置的对象。配置文件是给程序的唯一参数。我想解析这个配置文件一次并检查键值对。这个对象必须在所有其他对象中都是已知的。

现在我有一个只有静态方法的配置对象，但首先必须调用 parseConfigurationFile 方法。我希望在此类的某种构造函数中使用它。静态构造函数不能有参数（这是逻辑，因为您不创建对象）。

是否有可能在另一个对象中获得赋予程序的第一个参数？还是我的配置对象设计错误？或者这是我的问题的最佳解决方案？

也许另一种解决方案是记住该对象的第一个方法调用，当第一次调用时，在主类中请求配置文件并解析参数然后......

哪个选项将是我的问题的最佳解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:19:14.620

通常这是由`.properties`java 中的文件完成的：[How to read Properties File in Java](http://javarevisited.blogspot.de/2012/03/how-to-read-properties-file-in-java-xml.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:19:29.347

在我看来，您想要一个`ConfigurationManager`. 将`ConfigurationManager`作为程序初始化的一部分进行实例化（可能在`main()`方法中）

该实例将被传递给需要它的每个组件。当每个组件调用一个方法`manager.getConfiguration()`时，该方法*本身会*检查配置是否已加载，并在需要时加载它（即它是第一次初始化吗？）

我不会做任何静态的。我宁愿有一个类的实例。这使得管理生命周期等变得更加容易。请注意，在第一次调用时读取配置的要求被绑定（封装）在管理器中，您的客户（那些使用管理器的人）不必担心这一点。

请注意，以上内容并不担心您如何读取该配置（使用属性文件，使用 Apache Commons 配置等）

# gwt-ext - 在工具栏上添加 GWT-EXT 按钮的显示方式与在面板上添加它的方式不同

> ID：15429684
> 
> 赞同：1
> 
> 时间：2013-03-15T10:15:44.760
> 
> 标签：gwt-ext

我想知道，当我将 GWT-EXT 按钮添加到工具栏时，它看起来好像是一个链接，您可以看到边框不可见，它只是与工具栏混合在一起。

![图片1](../Images/40ad636619927c74f984f4ad67a9c082.png "图片1")

但是，当将相同的按钮添加到面板时，它会正确查看。

![图片2](../Images/c2b012f3d85406e4f914940e8cffe8e5.png "图片2")

我只希望按钮添加到面板的工具栏时与添加到面板时完全相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T12:27:34.817

去那个按钮并写监听器，

```
 listeners: {
        render: function() {
            this.addCls("x-btn-default-small");
            this.removeCls("x-btn-default-toolbar-small");
        }
    } 
```

这将解决您的问题

# php - 将 PHP 变量传递给其他页面

> ID：15429686
> 
> 赞同：-1
> 
> 时间：2013-03-15T10:15:48.060
> 
> 标签：php, session

我有一个表单，用户可以在其中输入详细信息，结果显示在同一页面上。然后可以提交这些结果。

```
First_page.php

<?php
session_start();

if (isset($_POST['applySubmit'])) { 
    $_SESSION['amountdiv'] = $amountdiv;
    $_SESSION['fixedrate'] = $fixedrate;
    $_SESSION['deliverydiv'] = $deliverydiv;
    $_SESSION['date'] = $date;  
    $_SESSION['total'] = $total;    
    $_SESSION['grandtotal'] = $grandtotal;      
    $_SESSION['reference'] = $reference;
}
?> 
```

我已经看到了很多关于这方面的例子，我正在使用这篇文章[PHP Pass variable to next page](https://stackoverflow.com/questions/871858/php-pass-variable-to-next-page)中的这个例子。我遇到的问题是，在我想输出详细信息的第二页上，什么都没有出现。

```
Second_page.php

<?php
session_start();
//*************Session form details to carry through*****************//
$amountdiv = $_SESSION['amountdiv'];
$fixedrate = $_SESSION['fixedrate'];
$deliverydiv = $_SESSION['deliverydiv'];
$date = $_SESSION['date'];  
$total = $_SESSION['total'];    
$grandtotal = $_SESSION['grandtotal'];
$reference = $_SESSION['reference'];
?> 
```

然后我想将此信息回显到屏幕上，但什么也没有出现。

```
<td class="blaah1"><?php echo $_SESSION['amountdiv'] ;?></td>
<td class="blaah1"><?php echo $_SESSION['grandtotal'] ;?></td>
<td class="blaah3"><?php echo $_SESSION['date'] ; ?></td> 
```

为什么什么都没有出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:45:32.810

您需要为这些变量分配一些东西。目前，看起来您在`$amountdiv`为它分配任何东西之前就在使用它，所以它将是`null`.

```
<?php
session_start();

if (isset($_POST['applySubmit'])) { 
    $amountdiv = $_POST['applySubmit'];
    $_SESSION['amountdiv'] = $amountdiv; 
```

但实际上，这一切都可能一步到位：

```
<?php
session_start();

if (isset($_POST['applySubmit'])) { 
    $_SESSION['amountdiv'] = $_POST['amountdiv']; 
```

显然，您还应该验证和清理输入。例如

```
<?php
session_start();

if (isset($_POST['applySubmit'])) { 
    $_SESSION['amountdiv'] = (int)$_POST['amountdiv']; 
```

或使用`filter_var()`,`filter_input()`或您自己的自定义过滤/清洁功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:26:59.187

这里 ：

```
if (isset($_POST['applySubmit'])) { 
    $_SESSION['amountdiv'] = $amountdiv;
    $_SESSION['fixedrate'] = $fixedrate;
    $_SESSION['deliverydiv'] = $deliverydiv;
    $_SESSION['date'] = $date;  
    $_SESSION['total'] = $total;    
    $_SESSION['grandtotal'] = $grandtotal;      
    $_SESSION['reference'] = $reference;
} 
```

你在哪里为这些变量赋值：`$amountdiv`，`$fixedrate`......所有变量看起来都是空的。

其次，检查您的代码是否`if`在第一页的条件内执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:27:22.407

```
<form method="POST" action="Second_page.php">
    <input type="text" name="amountdiv" />
    <input type="text" name="fixedrate" />
    <input type="text" name="deliverydiv" />
    <input type="text" name="date" />
    <input type="text" name="total" />
    <input type="text" name="grandtotal" />
    <input type="text" name="reference" />
    <input type="submit" name="applySubmit" />
</form> 
```

**second_page.php**

```
<?php
   echo "<pre>";
   print_r($_POST);
   echo "</pre>";
?>

<td class="blaah1"><?php echo $_POST['amountdiv'] ;?></td>
<td class="blaah1"><?php echo $_POST['grandtotal'] ;?></td>
<td class="blaah3"><?php echo $_POST['date'] ; ?></td> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-15T10:23:05.280

第一页.php

```
 <?php
    session_start();

    extract($_POST);

    if (isset($_POST['applySubmit'])) { 
        $_SESSION['amountdiv'] = $amountdiv;
        $_SESSION['fixedrate'] = $fixedrate;
        $_SESSION['deliverydiv'] = $deliverydiv;
        $_SESSION['date'] = $date;  
        $_SESSION['total'] = $total;    
        $_SESSION['grandtotal'] = $grandtotal;      
        $_SESSION['reference'] = $reference;
    }
    ?> 
```

1.  session_start() 之前没有空格。
2.  并使用此“提取（$_POST）；” 在 firstpage.php => 它工作正常。

# c++ - 如何停止客户端向服务器发送消息？

> ID：15429688
> 
> 赞同：0
> 
> 时间：2013-03-15T10:15:49.223
> 
> 标签：c++, visual-studio, mfc, client-server

我想在 mfc 中创建一个客户端服务器程序，我从这个网站找到了一些非常好的源代码：http: [//www.softwareandfinance.com/Visual_CPP/TCP_Client_Server.html](http://www.softwareandfinance.com/Visual_CPP/TCP_Client_Server.html)

但在这个程序中，客户端向服务器发送一条消息，然后服务器显示客户端的 IP 地址、端口号、时间、日期和消息。

我不希望客户端发送消息。当客户端单击按钮时，我只想让它连接到服务器。它不需要做任何其他事情。我尝试删除发送消息但会导致大量编译错误的代码。

这是来自客户端的一些代码：

```
 char sbuf[1024], rbuf[1024];
    UpdateData(TRUE);
    sprintf(sbuf,"%s\r\n", (const char*) m_senddata);
    if(send(s, sbuf, strlen(sbuf), 0) == strlen(sbuf))
    {
        recv(s, rbuf, 1024, 0);
        m_recvData = rbuf;
        UpdateData(FALSE);
    }
    ::closesocket(s); 
```

这是来自服务器的一些代码：

```
 char rbuf[1024];
        recv(clientsocket, rbuf, 1024, 0);
        for(int i = 1024; i >= 1; i--)
        {
            if(rbuf[i] == '\n' && rbuf[i - 1] == '\r')
            {
                rbuf[i-1] = '\0';
                break;
            }
        }
        CString strRecvData;

        strRecvData.Format("%s\r\n%s %d\r\n%s\r\n\r\n", (const char*)CTime::GetCurrentTime().Format("%B %d, %Y %H:%M:%S"), p, portno, rbuf);
        m_recvData += strRecvData;
        m_bRefershData = true;
        strcat(rbuf, "\r\n");
        send(clientsocket, rbuf, 1024, 0);
        closesocket(clientsocket);
    enter code here 
```

如果有人想要，我可以发布其余的功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:38:00.867

你能提供你得到的那些编译器错误吗？

为了连接到服务器，您只需使用[socket()](http://msdn.microsoft.com/ru-ru/library/windows/desktop/ms740506%28v=vs.85%29.aspx)函数创建套接字，获取套接字处理程序并将其传递给[connect()](http://msdn.microsoft.com/ru-ru/library/windows/desktop/ms737625%28v=vs.85%29.aspx)函数。

它应该在客户端看起来像这样：

```
SOCKET getNewSocket() {
    SOCKET client = socket(AF_INET, SOCK_STREAM, 0);
    if (client == INVALID_SOCKET) {
        return NULL;
    }

    char host[15];
    strcpy(host, "127.0.0.1");
    int port = 80;

    sockaddr_in addr;
    addr.sin_family = AF_INET;
    addr.sin_port = htons(port);
    if (inet_addr(host) == INADDR_NONE) {
        closesocket(client);
        return NULL;
    }
    addr.sin_addr.s_addr = inet_addr(host);

    if (connect(client, (sockaddr*)&addr, sizeof(addr))) {
        closesocket(client);
        return NULL;
    }

    return client;
} 
```

# python - Python .format 切片长字符串并添加点

> ID：15429689
> 
> 赞同：5
> 
> 时间：2013-03-15T10:15:53.010
> 
> 标签：python, string

在 Python 中，如何使用高级格式使长字符串“Foo Bar”变为“Foo ...”，并且不更改像“Foo”这样的短字符串？

```
"{0:.<-10s}".format("Foo Bar") 
```

只是用点填充字符串

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T10:20:37.907

您需要为此使用单独的功能；Python 格式的迷你语言不支持截断：

```
def truncate(string, width):
    if len(string) > width:
        string = string[:width-3] + '...'
    return string

"{0:<10s}".format(truncate("Foo Bar Baz", 10)) 
```

输出：

```
>>> "{0:<10s}".format(truncate("Foo", 10))
'Foo       '
>>> "{0:<10s}".format(truncate("Foo Bar Baz", 10))
'Foo Bar...' 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-05-08T04:07:22.487

您可以配置需要多少个点以及多少个字符。我在 3 个字符后分配 10 个点

```
text = "Foo Bar"
dots = "." * 10
output = text[0:3] + dots
print output 
```

输出是：

```
Foo.......... 
```

# asp.net-web-api - ASP.NET Web api 文件上传和 IIS

> ID：15429691
> 
> 赞同：0
> 
> 时间：2013-03-15T10:15:53.650
> 
> 标签：asp.net-web-api

这是我上传文件的代码。当我在`dev`服务器上运行它时，一切正常。但是当我将我的应用程序发布到 IIS 时，它停止工作。该类的`fileInfo`行为就像文件不存在一样。

`fileInfo.Length`抛出错误也是`fileInfo.Exists`错误的。

并且 `provider.FormData.Get("Note");`返回 null。

```
var provider = new MultipartFormDataStreamProvider("~/files");

Task<HttpResponseMessage> task =  Request.Content.ReadAsMultipartAsync(provider).ContinueWith(t =>
{
var fileInfo = new FileInfo(provider.FileData[0].LocalFileName);
float size = Convert.ToSingle(fileInfo.Length);
string note = provider.FormData.Get("Note");

..
..
..                                     
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:44:10.153

问题是文件夹没有写权限。

# android - 样式不适用于 Spinner？

> ID：15429695
> 
> 赞同：1
> 
> 时间：2013-03-15T10:16:11.467
> 
> 标签：android, android-layout, android-spinner, android-styles

![在此处输入图像描述](../Images/93f9c4e2f84038c878f9c1b541df3413.png)

在这个应用程序中，我想将 Spinner 的项目居中。我试过`android:gravity="center"`了，但它不起作用？我必须在微调器上添加小图像。我是怎么做到的。请指导我。

在`res/layout` **spinner_layout.xml中**

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"`
             android:layout_width="fill_parent"
             android:layout_height="match_parent">`
      <Spinner
               android:id="@+id/spinner1"
               android:layout_width="fill_parent"
           android:layout_height="55dp" 
               android:prompt="@string/spinner_promt"
              style="@style/spinnerStyleView"
        />
        </LinearLayout> 
```

风格`**style.xml**`

```
 <style name="spinnerStyleView">
              <item name="android:background"> @drawable/notetvbg</item>
              <item name="android:textColor">@android:color/darker_gray</item>
           </style>` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:28:54.893

只需更改您的微调器样式，如下所示：

> ```
>  <style name="spinnerStyleView"  parent="@android:style/Widget.TextView.SpinnerItem">
>         <item name="android:background"> @drawable/notetvbg</item>
>           <item name="android:textColor">@android:color/darker_gray</item>
>     </style> 
> ```

还可以查看[轻松创建默认自定义样式的微调器](http://www.mokasocial.com/2011/03/easily-create-a-default-custom-styled-spinner-android/)，它精美地解释了微调器样式。

**在中心制作微调器项目**

以下代码修改了 Hello Spinner 教程应用程序，以水平居中显示微调器文本内容，如以下两个屏幕截图所示。

res/layout/my_spinner_textview.xml

> ```
>  <?xml version="1.0" encoding="utf-8"?>
>       <TextView
>          xmlns:android="http://schemas.android.com/apk/res/android"
>           style="?android:attr/spinnerItemStyle"
>           android:layout_width="fill_parent"
>           android:layout_height="wrap_content"
>           android:gravity="center" /> 
> ```

**主要活动**

```
 public class MainActivity extends Activity
     {
        @Override
        public void onCreate(Bundle savedInstanceState)
        {
          super.onCreate(savedInstanceState);
          setContentView(R.layout.main);

          Spinner spinner = (Spinner) findViewById(R.id.spinner);
          ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this, R.array.planets_array,
       //android.R.layout.simple_spinner_item);
        R.layout.my_spinner_textview);
        adapter.setDropDownViewResource(R.layout.my_spinner_textview);
       spinner.setAdapter(adapter);
      spinner.setOnItemSelectedListener(new MyOnItemSelectedListener());
    } 
```

![](../Images/62894b38c7c5d2c49dbb943fa6ddaf18.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T10:27:36.230

使用此代码制作样式微调器..

> 可绘制/slim_spinner_normal.9.png

![在此处输入图像描述](../Images/c5f8e9b755b862ebab2a903d3fd5c6d8.png)

> drawable/slim_spinner_pressed.9.png

![在此处输入图像描述](../Images/14fecab4803640f224f058403ce56238.png)

> 可绘制/spinner_back.xml

```
<?xml version="1.0" encoding="utf-8"?>
        <selector xmlns:android="http://schemas.android.com/apk/res/android">
             <item android:state_pressed="true"
                   android:drawable="@drawable/slim_spinner_pressed" />
             <item android:drawable="@drawable/slim_spinner_normal" />
        </selector> 
```

> 布局/main.xml

```
<RelativeLayout
    android:id="@+id/RL_TAG_FRAME"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <Spinner
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/spinner_back.xml" />

</RelativeLayout> 
```

额外的皮肤

![在此处输入图像描述](../Images/bcd41a1415099eaf72c4d7e8b3a53498.png) ![在此处输入图像描述](../Images/2a6ce9835bef93ca0afbb0b98f192f04.png) ![在此处输入图像描述](../Images/03570a1d22a1cc78fa23284bbd735123.png) ![在此处输入图像描述](../Images/53b4bb6aeaa332f36ce0eeab9ef26dfb.png) ![在此处输入图像描述](../Images/c3e233b8f09742c085d2111a2c189b9a.png)

# php - php 的 rpmbuild 在 make 测试中失败

> ID：15429700
> 
> 赞同：0
> 
> 时间：2013-03-15T10:16:22.270
> 
> 标签：php, pdo, centos5, rpmbuild

我正在尝试从 rpm 源构建 php，但它在 centos 5 32bit 上失败。php 5.2.6 的构建。我收到如下错误：

```
Checking for unpackaged file(s): /usr/lib/rpm/check-files /var/tmp/php-5.2.6-2-root-root
error: Installed (but unpackaged) file(s) found:
   /usr/lib/php/modules/pdo_dblib.so

RPM build errors:
    Installed (but unpackaged) file(s) found:
   /usr/lib/php/modules/pdo_dblib.so 
```

我想构建包括 pdo_dblib 所以我做了一些修改但不确定我改变了什么。以下是我所拥有的

```
ln -sf ../configure
%configure \
    --enable-maintainer-zts \
        --cache-file=../config.cache \
        --with-libdir=%{_lib} \
        --with-config-file-path=%{_sysconfdir} \
        --with-config-file-scan-dir=%{_sysconfdir}/php.d \
        --disable-debug \
        --with-pic \
        --disable-rpath \
        --without-pear \
        --with-bz2 \
        --with-curl \
        --with-exec-dir=%{_bindir} \
        --with-freetype-dir=%{_prefix} \
        --with-png-dir=%{_prefix} \
        --enable-gd-native-ttf \
        --without-gdbm \
        --with-gettext \
        --with-gmp \
        --with-iconv \
        --with-jpeg-dir=%{_prefix} \
        --with-openssl \
        --with-png \
        --with-pspell \
        --with-expat-dir=%{_prefix} \
        --with-pcre-regex=%{_prefix} \
        --with-zlib \
        --with-layout=GNU \
        --enable-exif \
        --enable-ftp \
        --enable-magic-quotes \
        --enable-sockets \
        --enable-sysvsem --enable-sysvshm --enable-sysvmsg \
        --enable-track-vars \
        --enable-trans-sid \
        --enable-yp \
        --enable-wddx \
        --with-kerberos \
        --enable-ucd-snmp-hack \
        --with-unixODBC=shared,%{_prefix} \
        --enable-memory-limit \
        --enable-shmop \
        --enable-calendar \
        --enable-dbx \
        --enable-dio \
        --without-mime-magic \
        --without-sqlite \
        --with-libxml-dir=%{_prefix} \
        --with-xml \
        --with-system-tzdata \
        --with-tsrm-pthreads \
        --with-mssql=shared,%{_prefix} \
        --enable-pdo \
        --with-pdo-odbc=unixODBC,%{_prefix} \
        $*
if test $? != 0; then
  tail -500 config.log
  : configure failed
  exit 1
fi

make %{?_smp_mflags}
}

# Build /usr/bin/php-cgi with the CGI SAPI, and all the shared extensions
pushd build-cgi
build --enable-force-cgi-redirect \
      --enable-pcntl \
      --with-imap=shared --with-imap-ssl \
      --enable-mbstring=shared --enable-mbstr-enc-trans \
      --enable-mbregex \
      --with-ncurses=shared \
      --with-gd=shared \
      --enable-bcmath=shared \
      --enable-dba=shared --with-db4=%{_prefix} \
      --with-xmlrpc=shared \
      --with-ldap=shared --with-ldap-sasl \
      --with-mysql=shared,%{_prefix} \
      --with-mysqli=shared,%{_bindir}/mysql_config \
      --with-mssql=shared,%{_prefix} \
      --enable-dom=shared \
      --with-dom-xslt=%{_prefix} --with-dom-exslt=%{_prefix} \
      --with-pgsql=shared \
      --with-snmp=shared,%{_prefix} \
      --enable-soap=shared \
      --with-xsl=shared,%{_prefix} \
      --enable-xmlreader=shared --enable-xmlwriter=shared \
      --enable-fastcgi \
      --enable-pdo=shared \
      --with-pdo-odbc=shared,unixODBC,%{_prefix} \
      --with-pdo-mysql=shared,%{_prefix} \
      --with-pdo-pgsql=shared,%{_prefix} \
      --with-pdo-sqlite=shared,%{_prefix} \
      --with-pdo-dblib=shared,%{_prefix} \
      --enable-json=shared \
      --enable-zip=shared \
      --with-readline \
      --enable-dbase=shared \
      --with-mcrypt=shared,%{_prefix} \
      --with-mhash=shared,%{_prefix} \
      --with-tidy=shared,%{_prefix} \
      --with-mssql=shared,%{_prefix}
popd

# Build Apache module, and the CLI SAPI, /usr/bin/php
pushd build-apache
build --with-apxs2=%{_sbindir}/apxs \
      --without-mysql --without-gd \
      --without-odbc --disable-dom \
      --disable-dba --with-unixODBC \
      --enable-pdo --disable-xmlreader --disable-xmlwriter \
      --disable-json
popd

# Build for inclusion as embedded script language into applications,
# /usr/lib[64]/libphp5.so
pushd build-embedded
build --enable-embed \
      --without-mysql --without-gd \
      --without-odbc --disable-dom \
      --disable-dba --with-unixODBC \
      --enable-pdo --disable-xmlreader --disable-xmlwriter \
      --disable-json
popd 
```

这个对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:25:58.163

通常，该错误归因于未将文件包含在[%files](http://www.rpm.org/max-rpm/s1-rpm-inside-files-list-directives.html)部分中。只需将其添加到该部分，您就可以开始使用了，或者至少在出现问题时收到更多信息的错误。

# facebook - 如何在 ios6 上获取 facebook 原生权限对话框，要求用户接受应用程序的条款和隐私政策？

> ID：15429701
> 
> 赞同：0
> 
> 时间：2013-03-15T10:16:22.493
> 
> 标签：facebook, ios6, facebook-ios-sdk

由于 ios6 用户可以将他们的 facebook 帐户直接连接到他们的 ios 设备。除了这个 facebook 更新了他们的 ios sdk 以允许应用程序开发人员通过本机对话框请求基本权限（不包括“写权限”），如下所述：http: [//developers.facebook.com/docs/howtos/ios- 6/](http://developers.facebook.com/docs/howtos/ios-6/)

如果用户使用较旧的 ios 版本或没有在他/她的 facebook 帐户和 ios 之间建立连接，facebook sdk 仍然有一个备用方案，它将使用 fast-app-switch 方法。

由于我们的应用程序依赖于让用户在使用我们的应用程序之前接受我们的条款和隐私政策，我想知道为什么（如果是 facebook sdk 的“本地登录”）没有对话框告诉用户他/她必须接受应用程序的条款和隐私政策。

通过快速应用程序切换条款和隐私政策查看“旧方式”仍然是对话的一部分，因此用户必须接受它们。

我想知道是否可以更改本机登录的行为以确保用户接受条款和隐私政策。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:07:48.410

Apple 的 ARG 通常希望您从 iTunes Connect 将 EULA 添加到您的应用程序中，而不是在应用程序本身中显示它们。一旦用户接受协议，他们就会下载该应用程序。我建议从那里更新您的 EULA，而不是在应用程序中使用“如果您使用的是旧版本的 iOS”或类似内容的免责声明。

[http://developer.apple.com/library/ios/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/8_AddingNewApps/AddingNewApps.html](http://developer.apple.com/library/ios/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/8_AddingNewApps/AddingNewApps.html)

# dokuwiki - 在 dokuwiki 页面上包含 jquery

> ID：15429703
> 
> 赞同：1
> 
> 时间：2013-03-15T10:16:32.450
> 
> 标签：dokuwiki

我正在尝试将 html/javascript 页面添加到我们的 dokuwiki 中。

我看到该标签适用于页面主体并运行简单的 javascript。(alert()) 但是我们的 javascript 可以与 Jquery 一起使用，我不知道如何将它包含到我的新 dokuwiki 页面中。

有什么办法吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:59:11.247

DokuWiki 已经包含 jQuery - 无需自己加载。

# wpf - Caliburn Micro 动作绑定

> ID：15429704
> 
> 赞同：1
> 
> 时间：2013-03-15T10:16:32.860
> 
> 标签：wpf, caliburn.micro

我想在更改任何绑定参数时调用 CanExpressionSave 方法

在 caliburn micro 中使用长语法设置绑定。

```
<controls:ImageButton DockPanel.Dock="Right" Image="/Resources/Save.png" AlternativeImage="/Resources/SaveDisabled.png" 
                      Text="Save" Style="{StaticResource ControlButtonStyle}" x:Name="ExpressionSave">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Click">
            <cal:ActionMessage MethodName="ExpressionSave">
                <cal:Parameter Value="{Binding ElementName=firsttag, Path=Text}"></cal:Parameter>
                <cal:Parameter Value="{Binding ElementName=firstoperation, Path=Content}"></cal:Parameter>
                <cal:Parameter Value="{Binding ElementName=secondtag, Path=Text}"></cal:Parameter>
                <cal:Parameter Value="{Binding ElementName=SecondOperation, Path=Content}"></cal:Parameter>
                <cal:Parameter Value="{Binding ElementName=thirdtag, Path=Text}"></cal:Parameter>
            </cal:ActionMessage>
        </i:EventTrigger>
    </i:Interaction.Triggers>
</controls:ImageButton> 
```

代码隐藏：

```
 public void ExpressionSave(string firsttag, string firstoperation, string secondtag,
        string secondoperation, string thirdtag){ }

    public bool CanExpressionSave(string firsttag, string firstoperation, string secondtag,
        string secondoperation, string thirdtag){} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:07:48.753

问题在于绑定中的几个外壳。

我以为我从参数中获取了正确的数据，因为我不期望任何值，但是由于绑定错误而得到的值。

xaml 和上面的代码是有效的，因为 CanExpressionSave 将被 Caliburn 隐式绑定。这意味着对任何绑定属性的任何更改都将触发 CanExpressionSave。

希望这对某人有帮助:)

# python - 如何通过 SSH 区分本地文件系统路径和文件系统路径？

> ID：15429705
> 
> 赞同：1
> 
> 时间：2013-03-15T10:16:37.130
> 
> 标签：python, regex

在 Linux 上的 Python 中，我需要区分本地文件系统路径 à la`/mnt/data/wherever/%Y-%m-%d.txt`或`~/data/bla.txt`一方面，以及 SSH“路径”à la`user@host1:/data/bla.txt`或`user@host2.mydomain.com:blupp.txt`.

我怎样才能有效地做到这一点？

**编辑：**在我的示例中，没有 file `/mnt/data/wherever/%Y-%m-%d.txt`，因为`%Y`etc 只是占位符。因此，检查具有给定名称的文件/目录是否存在将不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:34:58.307

唯一知道的方法是使用启发式方法，因为 ssh 路径也是有效的文件名（尽管非常奇怪）。

从 scp 文档：

> 文件名可以包含用户和主机规范，以指示文件将被复制到该主机/从该主机复制。本地文件名可以使用绝对或相对路径名明确，以避免 scp 将包含 ':' 的文件名视为主机说明符。

因此，请检查它们是否以显式路径开头，或者在正确的位置没有冒号。然后假设它是本地路径，否则假设它是远程路径。

例子：

```
pattern = '(\.?/|/)|(^:?[^:]*$)'
re.match(pattern, ":home/test") # match, is a local path
re.match(pattern, "user@host:blah") # no match 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:28:04.557

你可以这样做——

1.  首先在本地文件系统中检查路径 X （这说明了 - 之类的路径`user@host1:/data/bla.txt`）。
2.  如果本地文件系统中不存在路径 X，则检查`SSH`路径 Y（对“@”和“:”进行额外检查，否则该文件不存在于任何机器中）。

使用[glob](http://docs.python.org/library/glob.html)根据模式列出文件。

```
>>> import glob
>>> glob.glob('/mnt/data/wherever/*.txt')   # all txt files within the directory will be listed 
```

[`os.path.isfile(path)`](http://docs.python.org/library/os.path.html#os.path.isfile)`True`如果路径是现有的常规文件，则返回。所以这用于检查文件是否已经存在并且不支持通配符。`glob`做。要检查路径是否是本地文件系统中的现有文件，请使用：

# svn - 强制 SVN（乌龟）签入文件以更新 Revision

> ID：15429708
> 
> 赞同：4
> 
> 时间：2013-03-15T10:16:52.690
> 
> 标签：svn, tortoisesvn, revision, checkin

我有一个文件，其中包含以下形式的修订占位符：

```
$Rev: 123456 $ 
```

该文件仅在它发生更改时才被签入，因此，如果我想提交它只是为了更新修订号，我不得不在为了能够在更改列表中看到它并提交它，获得我正在寻找的结果。即使我修改了修订标志，例如：

```
$Rev: 0 $ 
```

SVN 足够“聪明”，可以忽略这种变化......

有没有一种（干净的）方法可以简单地告诉 SVN（乌龟）必须在不使用这些“技巧”的情况下签入文件？

注意：这是必需的，因为在构建中使用了修订号。这使我们能够在运行时清楚地识别构建的版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-18T00:11:25.620

另一种方法是，简单地在同一位置添加一个占位符（空文本文件）并将这个新文件与未更改的文件一起提交。稍后可以删除文本文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T10:12:57.220

1.  正如链接主题中所建议的，您始终可以在提交之前更改文件的某些属性。但是，如果您想玩内容， TortoiseSVN FAQ[的部分答案](http://tortoisesvn.net/faq.html#detectmodification)将对您有用（从“Subversion 确定文件是否已使用以下方法更改...”开始）
2.  另一方面，我会认真建议您重新考虑当前的工作流程并为正确的工作使用正确的事情-不要依赖文件的关键字（文件修订）来获得全局存储库范围的修订

对于“获取存储库修订”任务，您至少有 3 个不同的工具，其中 2 个是**任何**Subversion 的一部分，1 个是 TortoiseSVN 的一部分：

*   版本。`svnversion <Path-to-WC>`输出链接到 WC 存储库的全局修订号，没有装饰的干净数字，准备好包含到任何东西中

`>svnversion`

`37`

（在 WC 内我跳过了路径，假设为“。”）。输出必须被翻译成某种东西。比如“repo 中的最新版本是 37，工作副本是干净的/没有未提交的更改，没有备用目录，最近可以复制 WC 的状态/”

`>svnversion`

`37M`

*相同的工作副本，但已执行更改但仍未提交*

*   信息。`svn info <TARGET>`输出有关目标的更详细信息，但也可以与**存储库 URL**一起使用，不仅仅是工作副本

`>svn info`

`...`

`Revision: 37`

`...`

`Last Changed Date: 2013-01-09 11:45:39 +0600 (Ср, 09 янв 2013)`

在这种情况下，只有`Revision`字段（可能`Last Changed Date`还有 ）值感兴趣，但必须从输出中提取此数据

*   [SubWCRev](http://tortoisesvn.net/faq.html#subwcrev)和 FAQ-topic 中 TortoiseSVN 代码的使用示例

# ios - 当无内容存在时，在 TableView 中显示无内容横幅

> ID：15429718
> 
> 赞同：-1
> 
> 时间：2013-03-15T10:17:22.507
> 
> 标签：ios

我想知道 Tumblr 是如何实现这个功能的。我有一个从服务器获取数据的表格视图，如果没有内容，我想添加一个横幅，上面写着，没有评论，没有帖子等。有人可以指点我正确的方向吗？

这就是 Tumblr 的做法

![在此处输入图像描述](../Images/13e819ed0444560b730caf99f0c9a498.png)

这是我到目前为止的实现。所以不要改变标题说没有评论。我想要一个像 Tumblr 这样的横幅

![在此处输入图像描述](../Images/69dd96ca01ec4481d939a4e4a18e8d6f.png)

# 编辑

我不知道为什么这篇文章不受欢迎。我清楚地指定了我在寻找什么。我也上传了图片来支持我的话。这是一个学习的地方，至少我是这么看的。如果用户因这样的不喜欢而气馁，我认为这不会破坏一个非常健康的学习环境。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:22:08.540

您可以在数组计数为 0 时添加横幅。

```
if([yourArrayName count] == 0)
{
   // Code here to show banner
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:26:22.437

从服务器接收到的数据被解析并保存在一个数组中，以便在您的表格上显示。所以在 UITableView 方法中

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
 {
      // put your content of the array "Show Favors" in some string and check whether the string is 

      NSString *string = [yourDataArray objectAtIndex:indexPath.row];

      if([yourDataArray count] <= 1 && [string isEqualToString:@"Show Favors"])
      {
           yourTableView.hidden = YES; 
           // add your banner here wherever you want to add it
      }

      else
           yourTableView.hidden = NO;

      return [yourDataArray count];

  } 
```

**请注意**，这里我假设当您没有来自服务器的数据时，您有一个单元格显示“Show Favor”，并且标题显示“No Comments”。假设根据图像。如果有其他问题，请在您的问题中详细说明，以便我可以给您准确的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:27:54.793

尝试在tableview下面添加一个imageview，比如

[self.view addSubView:someImageView]; // 图像视图将在没有数据源时显示您想要显示的图像。

& 一旦 dataSource 数组计数为零，隐藏 tableview

[yourtableView setHidden:YES];

& 一旦数据源数组计数不为零，则显示 tableView。

[yourtableView setHidden:NO];

# node.js - node.js 代码完成/智能感知

> ID：15429719
> 
> 赞同：5
> 
> 时间：2013-03-15T10:17:25.490
> 
> 标签：node.js, visual-studio-2012, webmatrix-2

我在 webmatrix2/visual studio2012 中的 node.js 代码完成有问题我已经阅读了所有我能找到的方法，但我找不到合适的解决方案。

代码完成和智能感知工作有限。

大多数情况下它适用于主要模块和对象

```
var server = net.createServer(function (socket){ 
```

在“套接字”的情况下。它不起作用

或使用其他解决方案，完成工作但智能感知没有。

我错过了什么？

我已经阅读了这些解决方案：

[http://holtcode.blogspot.hu/2012/12/typescript-nodejs-development-part-1.html](http://holtcode.blogspot.hu/2012/12/typescript-nodejs-development-part-1.html)

[https://bitbucket.org/kurouninn/node.js-visualstudio-intellisense](https://bitbucket.org/kurouninn/node.js-visualstudio-intellisense)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-02T12:04:36.087

它可能无法回答您的问题，但这是将 Visual Studio 与 Node.js 结合使用的更好方法。
如果您注册，他们已经发布了测试版访问权限。

Visual Node - 具有完全支持 IntelliSense、模块和调试的特殊绑定，以及 Visual Studio 提供的良好体验。

[http://www.visualnode.info/](http://www.visualnode.info/)

# matlab - Matlab错误：TRAINING中每组的协方差矩阵必须是正定的

> ID：15429720
> 
> 赞同：0
> 
> 时间：2013-03-15T10:17:26.550
> 
> 标签：matlab, signal-processing, classification, quantization

我目前正在研究分类过程中采样率和量化对肿瘤信号的影响。我收到错误“训练的合并协方差矩阵必须是正定的。” 仅当我尝试对量化信号（8 位）进行分类时。如果 quantizatoin 设置为 >8 位，则代码运行完美！

我有点困惑，如果有人可以提供任何帮助，我将不胜感激。

我的代码如下：

```
 clear all;
    close all;
    clc;

    load('AllSignalsModified.mat')

    % =================================%
    % PCA - Feature Extraction
    % =================================%
    [cl, pcaAll]= princomp(allSignals);
    bestFeatures = pcaAll(:,1:100);

    %==============================%
    % Decimate allSignals
    %==============================%

    nsamp = 100;
    fs1 = 50e9;
    N = 2;
    fs2 = fs1/N;
    x = allSignals;

    % iterate thru each tumour signal

    for i = 1:960,
        oneRow= allSignals(i,:);
        downSampleRow(i,:) = oneRow(1:N:end);
    end;

    oneSampleRow = downSampleRow(1,:);

    %==========================================%
    % Quantisation 
    %==========================================%

    nbits = 8;

    for i = 1:960,
        x = downSampleRow(i,:);
        x2 = x / max(abs(x));
        x3= x2 .* 2^(nbits-1)-1;
        quantisedSig(i,:) = round(squeeze(x3));
    end;

    % =================================%
    % LDA Classification 
    % =================================%

    typeOfTumour(typeOfTumour<=2) = 0;
    typeOfTumour(typeOfTumour>=3) = 1;

    testSetResult = classify(quantisedSig,quantisedSig,typeOfTumour,'linear');
    testSetResult1 = classify(quantisedSig,quantisedSig,typeOfTumour,'quadratic');

    count = 0;
    for i = 1:960,
        if(testSetResult(i) == typeOfTumour(i))
            count = count + 1;
        end;
    end;

    count1 = 0;
    for i = 1:960,
        if(testSetResult1(i) == typeOfTumour(i))
            count1 = count1 + 1;
        end;
    end;

    percentageCorrect = (count/960)*100;
    percentageCorrect1 = (count1/960)*100;
    display(percentageCorrect);
    display(percentageCorrect1); 
```

# amazon-ec2 - 为什么我的私有 RSA 密钥不是亚马逊的有效密钥？

> ID：15429722
> 
> 赞同：3
> 
> 时间：2013-03-15T10:17:34.667
> 
> 标签：amazon-ec2, openssl

我使用以下命令生成了 CSR 和私钥：

`openssl req -nodes -newkey rsa:2048 -keyout myserver.key -out myserver.csr`

在过去的 3 年中，我选择了以下格式的正确私钥：

```
BEGIN RSA PRIVATE KEY
...
END RSA PRIVATE KEY 
```

此格式对 Amazon 有效，并且密钥已被接受。

我不得不续订相同的证书，因此我在使用 Ubuntu 12.04 的新 EC2 实例上重新创建了密钥和 CSR。

相同的命令按以下格式创建了一个私钥：

```
BEGIN PRIVATE KEY
...
END PRIVATE KEY 
```

尽管密钥和证书对 Web 服务器（Nginx、Tomcat）有效，但该格式对 Amazon 不再有效。

那么，为什么行为发生了变化？我是否必须使用旧版本的 OpenSSL 生成私钥或有可用选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-22T00:58:29.347

运行以下命令将密钥转换为 AWS 兼容格式

`openssl rsa -in myserver.key > myserver.key.pem`

# gwt - 绘制/重排时浏览器“缓冲”鼠标事件

> ID：15429730
> 
> 赞同：1
> 
> 时间：2013-03-15T10:18:01.703
> 
> 标签：gwt, browser, user-input, paint, reflow

我正在创建一个 GWT 应用程序，其中使用 a`CellList`和 a显示元素列表`ListDataProvider`。我想在每个单元格中显示的数据只包含两个字符串。我创建了一个从`AbstractCell`. 为了创建我的自定义单元格，我使用了 UIBinder 并基于 HTML 创建了 UI。每个单元格包含两个字符串和一个按钮。单击该按钮会从绑定列表中删除该元素。在我的分辨率下，大约有 20 个元素是可见的，所以我将页面大小设置为 30，以便在用户想要向下滚动时有一点“缓冲区”。前三个元素如下所示：

[http://imageshack.us/f/201/listox.png/](http://imageshack.us/f/201/listox.png/)

在 tomcat 上运行已部署的应用程序时没有问题。但是在开发模式下运行时，我在删除元素时注意到以下问题：

*   我单击第一个元素的“删除元素”按钮
*   我再次单击第一个元素的“删除元素”按钮（而第一个元素仍然可见）
*   从列表中删除第一个元素
*   第二个元素也从列表中删除

我对已部署的版本进行了相同的尝试，但是我无法单击第一个元素的“删除元素”按钮两次，因为它被删除得太快了。所以我将显示元素的数量增加到 500，这导致了同样的问题。我切换到较慢的系统（1GHz 的 AMD G-T40R），同样的情况发生在我将页面大小设置为 50 或更大。

为了进一步深入研究这个问题，我在自定义 Cell的方法中添加了一个`NativePreviewHandler`并安排了一个`ScheduleCommand`via ，以查看发生了什么。这是结果（在开发模式下运行，Chrome 27.0.1438.7 dev-m，添加了检查订单的时间戳）：`Scheduler.get().scheduleDeferred``onBrowserEvent`

*   在 1363340977109 mousedown （在第一个元素的“删除元素”按钮上）
*   在 1363340977206 mouseup （在第一个元素的“删除元素”按钮上）
*   在 1363340977225 单击（在第一个元素的“删除元素”按钮上）

*   在 1363340981341 scheduleDeferred in onBrowserEvent

*   在 1363340981366 mousedown （在与第一次单击相同的位置，但现在在第二个元素的“删除元素”按钮上，因为第一个元素已被删除）

*   在 1363340981386 mouseup （在第二个元素的“删除元素”按钮上）
*   在 1363340981394 单击（在第二个元素的“删除元素”按钮上）

*   在 1363340985184 scheduleDeferred in onBrowserEvent

**这里的问题**是：第二次点击是否真的以某种方式“缓冲”了，因为浏览器正忙于渲染/（重新）绘制内容。有没有办法确定渲染何时完成或在浏览器忙碌时禁用用户输入？

**我当前的解决方案/解决方法：**删除元素时禁用按钮。所以点击被忽略。为了模拟浏览器完成渲染，我在执行后添加了一定的时间（~50ms）`ScheduleCommand`。然后我再次启用所有按钮。这暂时有效，但如果有一天浏览器缓冲输入超过 50 毫秒，问题会再次出现。

# javascript - 是否可以在没有输入文件的情况下从文件名加载带有 JS/HTML5 FileReader 的文件？

> ID：15429732
> 
> 赞同：0
> 
> 时间：2013-03-15T10:18:10.123
> 
> 标签：javascript, html, filereader

我想`<article>`用另一个 html 文件内容更改元素内容，但搜索我发现由于本地文件的 Chrome 安全性，JS 加载功能不可能。

我尝试的另一种情况是包含`<embed>`or`<object>`元素，但对于那些我无法动态控制高度的元素，只能以具有“高度”属性的静态方式。

最后，我找到了`FileReader utility`，但我只使用一个`<input type="file">`元素观看了它。

如何仅使用文件名加载 Html 文件？

```
// No input needed, I know what I want to read
var reader = new FileReader();
reader.readAstext( "anotherpage.html", "UTF-8" ); 
```

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:24:22.047

你可以用ajax做到这一点：

```
$.ajax({
    type : 'GET',
    url : path + name + '.html',
    dataType : "text",
    success : function(data) {
        // TODO success, for example
        $(articleSelector).html(data);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T07:34:04.920

不可能。在客户端 JavaScript 中，禁止直接读取磁盘中的文件。即使在 Chrome 扩展中（[https://developer.chrome.com/extensions/index.html](https://developer.chrome.com/extensions/index.html)）也很难获得权限。你可以想这是一个安全策略。

# windows - Windows下使用FreeSSHd的Git服务器

> ID：15429734
> 
> 赞同：3
> 
> 时间：2013-03-15T10:18:12.650
> 
> 标签：windows, git, ssh

我正在尝试将 git 设置为 Windows 上的服务器。

1.  安装 freesshd，配置它，并从 linux 机器检查 ssh，它可以工作。
2.  下载 Git for Windows 并安装它，在 PATH 添加 git\bin 和 git\libexec\git-core
3.  在 d:\GitRepo\u7.git 中创建了裸存储库

当我尝试

```
git clone serhiy@192.168.75.2:d:/gitrepo/u7.git 
```

我广为人知的“坏行长字符：fata”。

但是打字

```
ssh 192.168.75.2 git-receive-pack d:/gitrepo/u7.git 
```

我有合法的答案

> 0090000000000000000000000000000000000000000000 能力^{}报告状态删除参考边带64k安静的三角洲代理=git/1.8.1.msysgit.1 0000

有什么问题？据我了解，在“git clone”时我无法进入正确的文件夹，我尝试了 ssh://，sh.exe 而不是 cmd.exe，尝试了 cmd /K "d: && cd \gitrepo" то 设置当前文件夹，什么都没有。但我有工作 git-receive-pack d:/gitrepo/u7.git。我需要为存储库指向当前文件夹吗？

**更新：** 阅读[本主题](https://stackoverflow.com/questions/1092583/how-to-stop-git-via-ssh-on-windows-from-resolving-the-wrong-path)的最后一篇文章后，我创建了指向文件并克隆了项目

使用行创建文件 gup.sh

> git-upload-pack.exe $*

和grp.sh

> git-receive-pack.exe $*

在服务器上！

然后克隆存储库

```
git clone -u 'sh gup.sh' ssh://serhiy@192.168.75.2/d/gitrepo/u7.git 
```

并设置一些配置

```
git config --global remote.origin.uploadpack 'sh gup.sh'
git config --global remote.origin.receivepack 'sh grp.sh' 
```

它似乎在linux下工作。在 Windows 下，我不能只登录，Permession 被拒绝。

**更新：** 因为我已经开始使用 RSA 密钥，所以一切正常，所以我有：

1.  视窗服务器 2003
2.  安装 FreeSHHd 就可以了
3.  使用 RSA 身份验证从 Linux 和 Windows 机器访问 Git 存储库。
4.  作为服务器上的外壳，我使用 git 的 sh.exe
5.  第一次克隆存储库的奇怪方法 git clone -u 'sh gup.sh' ssh://192.168.75.2/d/gitrepo/u7.git

# git - Maven 安装以检查和构建

> ID：15429741
> 
> 赞同：2
> 
> 时间：2013-03-15T10:18:30.230
> 
> 标签：git, maven, github, github-api

我有一个 Maven 项目，它依赖于 git 上的另一个远程项目。我添加了一个

```
<scm>
    <connection>scm:git:git@github.com:MY-Group/my.project.git</connection>
    <url>https://github.com/MY-Group/my.project</url>
</scm> 
```

进入我当前的项目 pom.xml。

当我这样做时`mvn scm:checkout`，项目被下载到目标/结帐文件夹中。

我想做的是覆盖`mvn install`到

1.  首先将此远程项目检出到目标文件夹中
2.  从目标文件夹构建并安装此远程项目
3.  然后构建当前项目

这可能吗？如果是这样，我们怎样才能做到这一点？任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T03:29:19.077

详细说明 khmarbaise 在评论中的回答，项目间的签出和构建依赖并不是 Maven 的本意，而是*一个*自动构建系统，Maven 存储库可以做得很好。

[像Artifactory](http://www.jfrog.com/home/v_artifactory_opensource_overview)或[Nexus](http://www.sonatype.org/nexus/)这样的 Maven 存储库就像Maven Central 的私有版本。

[Jenkins](http://jenkins-ci.org)是一个持续集成系统（希望您已经在运行它）。您可以将 Jenkins 配置为轮询您的 SCM 服务器以进行更改，并在看到更改时开始构建。Jenkins 将使用 Maven 构建您的工件并将其部署到您的私有存储库。Jenkins 还可以了解项目间的依赖关系，并在上游项目更改后开始下游构建。

除了这是处理您的 Maven 项目集合的“正确”方式之外，如果项目规模很大，它还可以节省您的时间。假设您有一些非常大的核心服务器代码，并且您正在编写一个与服务器对话的接口。在您最初的问题中，您必须检查并编译服务器才能处理您的界面代码，即使您不打算修改服务器。更好的是让 Jenkins 为您构建服务器。现在，在服务器项目上工作的人检查并编辑它，依赖服务器项目的人从私有存储库中获得构建的工件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:35:42.187

使用 apache [archiva](http://archiva.apache.org/index.cgi)，问题已解决

# ios - PKPassLibrary 不起作用

> ID：15429744
> 
> 赞同：2
> 
> 时间：2013-03-15T10:18:36.007
> 
> 标签：ios, objective-c, passbook

我正在使用 PKPassLibrary 来确定存折应用程序中的通行证计数。：

```
if ([PKPassLibrary isPassLibraryAvailable]) {
  PKPassLibrary * passLib = [[PKPassLibrary alloc] init];
  NSLog(@"Count of passes: %i", [passLib passes].count);
} 
```

即使存折中有一些通过（例如来自 www.coupons.com），输出也始终**为“通过次数：0” 。**我正在 iPhone 4、iOS 6.1.2 上开发

有没有人有同样的问题？

编辑：[在我的应用程序中找到如何从存折访问通行证的原因？](https://stackoverflow.com/questions/14017551/how-to-access-passes-from-passbook-in-my-app/14026170#14026170):(

# firefox - 如何使用 FireFox 通过命令行将 html 导出到文件

> ID：15429745
> 
> 赞同：24
> 
> 时间：2013-03-15T10:18:43.323
> 
> 标签：firefox, command-line

所以这个问题很好地解释了自己。

是否有控制台命令行可以用 firefox 保存 html？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-05-22T22:13:38.520

无法通过命令行要求 Firefox 保存页面（截至 2015 年 5 月）。但是，有一个脚本可以自动执行启动 Firefox、保存页面、退出 Firefox 的过程。

[https://github.com/abiyani/automate-save-page-as](https://github.com/abiyani/automate-save-page-as)

从自述文件：

> 当 wget 不削减它时的快速破解。
> 
> tl;dr 从命令行执行浏览器的“将页面另存为”（Ctrl+S）操作，无需人工干预
> 
> 这个小 bash 脚本模拟了一系列按键，在浏览器中打开给定的 url，保存页面 (Ctrl+S)，然后关闭浏览器选项卡/窗口 (Ctrl+F4)。
> 
> ```
> # Use Firefox to open a web-page and save it in /tmp
> # (the default name for the file (Page title) is used)
> $ ./save_page_as "www.example.com" --browser "firefox" --destination "/tmp" 
> ```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-07-23T07:57:11.007

使用 wget 的建议不会处理访问内容需要特殊登录或其他需要从浏览器内部进行一些用户操作的身份验证的情况（例如，将身份验证结果存储在 Firefox 的 cert8.db 或 keys.db 或登录中.sqlite 甚至在 locatsore.rdf 中）。wget --load-cookies 使用 firefox cookie 可能无法工作，如果身份验证是通过加载网页内的 javascript 完成的。

所以用户想要某种方式来运行 Firefox，如下所示：

```
firefox "<some-url-with-complex-authentication>" -save-to-folder ./somewhere 
```

（当它完成保存它获取的 URL 时，Firefox 退出）。是的，它很重，但是如果您可以在浏览器中查看页面，但不能通过 wget 或类似方式查看，那么目前似乎没有任何方法可以从命令行使用。

但是，可能只是用户没有从 FF 导出最新的 cookie 文件，以便可以通过 wget --load-cookies 加载，因为创建 wget 兼容（netscape 样式）cookie 文件需要：1）安装像 Export Cookies 这样的插件 2) 导出 cookies.txt 文件供 wget 使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-02T22:56:01.040

使用[`pup`](https://github.com/EricChiang/pup). 与[automatic-save-page-as](https://github.com/abiyani/automate-save-page-as)不同，[`pup`](https://github.com/EricChiang/pup)它不保存原始 HTML，而是输出解析后的 H​​TML。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-17T09:12:41.307

我在带有 PowerShell 的 Windows 上使用这种方式：

```
[system.Diagnostics.Process]::Start("Firefox","https://stackoverflow.com/questions/15429745/how-can-i-export-html-to-file-via-command-line-with-firefox")
Sleep 2;

$obj_Shell = New-Object -ComObject wscript.shell;
$obj_Shell.AppActivate('Firefox');
Sleep 1;

$obj_Shell.SendKeys("^(s)");
Sleep 3;

$obj_Shell.SendKeys("{ENTER}");

Select-String -Path $env:USERPROFILE + "\Downloads\how-can-i-export-html-to-file-via-command-line-with-firefox.html" 
```

# transactions - 关于使用 XA Transaction 的任何教程、示例或经验？

> ID：15429746
> 
> 赞同：1
> 
> 时间：2013-03-15T10:18:46.420
> 
> 标签：transactions, jms, hornetq, xa

关于使用 XA Transaction 和两个资源的任何教程、示例或经验：jms 代理（HornetQ）和数据库（使用 HibernateDaoSupport）？

我有两种情况（如果任何资源操作失败，我想要事务回滚）：

1)

1.  留言
2.  将其保存在数据库中
3.  将其发送到队列 A

2)

1.  从队列 B 接收消息
2.  处理消息
3.  如果过程成功，更新数据库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:55:19.987

对于教程，谷歌这本书“javatransactionsbook.pdf”，它包含了关于XA的大部分概念，也许对你有帮助！

# c# - 解决依赖项目

> ID：15429747
> 
> 赞同：0
> 
> 时间：2013-03-15T10:18:55.947
> 
> 标签：c#, visual-studio-2010, msbuild

msbuild 和 Visual Studio 似乎以不同的方式解决项目依赖关系：解决方案文件包含主要可执行文件的项目，以及可执行文件所依赖的 dll 的一些项目。其中一个 dll 项目依赖于另一个不属于解决方案的项目。

只是为了展示这种情况下的主要参与者，以及重现它的简单方法：解决方案包含 ExeProject 和 MainDllProject，MainDllProject 依赖于不属于解决方案的 SubDllProject（但在文件系统的同一层次结构中）。ExeProject 依赖于 MainDllProject 的 MainDllProjectClass1（该类不依赖于 SubDllProject；只有 MainDllProjectClass2 依赖于 SubDllProject，但 ExeProject 和 MainDllProjectClass1 都不使用它）：

```
Solution
    ExeProject
        Form1 (depends on MainDllProject.MainDllProjectClass1)
    MainDllProject
        MainDllProjectClass1
        MainDllProjectClass2 (depends on SubDllProject.SubDllProjectClass)
Not part of the solution
    SubDllProject
        SubDllProjectClass 
```

使用 Visual Studio 2010 构建解决方案时，失败：无法构建 MainDllProject，因为找不到 SubDllProject。

使用 msbuild 构建解决方案时，构建成功。奇怪的是，尽管参数 /p:Configuration=Release，但仍构建了 SubDllProject 的调试版本。

msbuild 的日志文件大约 374 kB，你有一些如何分析它的提示吗？我想了解它为什么要构建 SubDllProject，为什么它是调试版本，以及最终如何防止在未引用时构建它（我希望解决方案包含所有引用的项目，并且当忘记了依赖项时，我想看到错误信息）。

注意：这种情况类似于[Visual Studio 在解决方案中构建非依赖项目](https://stackoverflow.com/questions/12836023/visual-studio-build-non-dependent-projects-in-solution)，但恰恰相反......我从[http://blogs.msdn.com/b/visualstudio/archive/2010/12/21了解到/incorrect-solution-build-ordering-when-using-msbuild-exe.aspx](http://blogs.msdn.com/b/visualstudio/archive/2010/12/21/incorrect-solution-build-ordering-when-using-msbuild-exe.aspx) msbuild 将 sln 文件转换为自己的格式 - 但 sln.metaproj 文件也没有显示对 SubDllProject 的任何引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-06T21:11:44.680

对，我刚刚遇到了一个听起来非常相似的问题。
我们在版本控制的同一目录中有一堆解决方案，其中一些共享项目。我们在解决方案 1 中将项目 A 更改为引用项目 B，但忘记了解决方案 2 也使用项目 A，但不包括项目 B。

msbuild 在构建时碰巧找到了项目 B，因为路径引​​用解析为真实的东西，但显然没有在解决方案中构建它的说明，因此使用默认值（调试）。

长话短说; 如果您有多个解决方案项目引用多个共享项目，请确保所有解决方案都具有所有项目。

# core-data - 更新后应用程序崩溃。核心数据错误

> ID：15429749
> 
> 赞同：1
> 
> 时间：2013-03-15T10:19:00.080
> 
> 标签：core-data, crash, core-data-migration

我在我的应用程序 1.1 的应用程序商店版本中发布。然后我更改了我的数据库并发布了 app 1.2 版本。更新后应用程序在启动时崩溃。你能帮助我吗？我有这个错误：

```
Unresolved error Error Domain=NSCocoaErrorDomain Code=134130 "The operation couldn’t be completed. (Cocoa error 134130.)" UserInfo=0x1e182af0 {URL=file://localhost/var/mobile/Applications/CE08D1B7-3457-4654-B1DA-86AAC25CC6D8/Documents/DataModel.sqlite, metadata={
NSPersistenceFrameworkVersion = 419;
NSStoreModelVersionHashes =     {
    AppUser = <72f4a69b 62ebdb70 4cc9cc62 a5e256e5 25959da5 6cfad758 9f6b269d 43e1ecf1>;
    Comment = <788972fe 80274647 72ec8208 4140ff92 0ab98923 880e70e8 d9867f51 e7b847e9>;
    Friend = <67c863fe e2f6e86f fc419fd9 13d6a86f 9e53eddf 59be2c66 2c48972c a52aad08>;
    Gallery = <f6760bb4 67312c33 a40c7807 57550cce a2a4d699 9b2aab0b 5758cbb2 febdbb1e>;
    Image = <09c8a368 7da0eda2 f3cbd57b 90fc19e3 572b0456 61f7721b 29b329f3 edd27cd1>;
    Post = <14b4277b c8870cc9 a2b42894 ac549a9f 51fa899d 6270cf9a 542c29f1 433ae232>;
    PostBody = <86d4998a f19d61cc 98804a95 17b0c32a b7d0100a 57f0ee64 307a51cf ca087fd4>;
    Region = <96801c5d bfb5af34 bb83c7d7 c41ef4df 267efc18 6c6f46b1 07715f4d 8dff0ead>;
    SocialNet = <71290cd1 ac2dd061 49fb9766 f0019440 6d59f930 755f8c06 bbc9cc84 baaf04e2>;
    Tag = <a506a246 97683534 dfb6a120 c440ac0e 3075d305 2d22bd69 d27c33c8 0c5db8f5>;
    Theme = <9412b895 04891719 8c9342ba 7616ee61 3df27a2c 57efa3ac a7b97d0c 4d0d8dd6>;
    ThemeAll = <95d80c80 18755ade 6ca83731 222a95c6 2575c83c 3e266ef3 667ef48c 850ed742>;
    ThemeDisplayable = <ece3436f d55e61a0 a3b2c0b1 0179a52e 16842058 28614280 37c9092f e5cab28f>;
    User = <49e38bf1 225eed1f f5cd771a 6e7707b4 1a2f0629 79aad8bc d220eaf6 5395a97f>;
};
NSStoreModelVersionHashesVersion = 3;
NSStoreModelVersionIdentifiers =     (
    ""
);
NSStoreType = SQLite;
NSStoreUUID = "218F9A44-2939-49AB-A9F3-3A90E2205F26";
"_NSAutoVacuumLevel" = 2;
}, reason=Can't find model for source store}, {
URL = "file://localhost/var/mobile/Applications/CE08D1B7-3457-4654-B1DA-86AAC25CC6D8/Documents/DataModel.sqlite";
metadata =     {
    NSPersistenceFrameworkVersion = 419;
    NSStoreModelVersionHashes =         {
        AppUser = <72f4a69b 62ebdb70 4cc9cc62 a5e256e5 25959da5 6cfad758 9f6b269d 43e1ecf1>;
        Comment = <788972fe 80274647 72ec8208 4140ff92 0ab98923 880e70e8 d9867f51 e7b847e9>;
        Friend = <67c863fe e2f6e86f fc419fd9 13d6a86f 9e53eddf 59be2c66 2c48972c a52aad08>;
        Gallery = <f6760bb4 67312c33 a40c7807 57550cce a2a4d699 9b2aab0b 5758cbb2 febdbb1e>;
        Image = <09c8a368 7da0eda2 f3cbd57b 90fc19e3 572b0456 61f7721b 29b329f3 edd27cd1>;
        Post = <14b4277b c8870cc9 a2b42894 ac549a9f 51fa899d 6270cf9a 542c29f1 433ae232>;
        PostBody = <86d4998a f19d61cc 98804a95 17b0c32a b7d0100a 57f0ee64 307a51cf ca087fd4>;
        Region = <96801c5d bfb5af34 bb83c7d7 c41ef4df 267efc18 6c6f46b1 07715f4d 8dff0ead>;
        SocialNet = <71290cd1 ac2dd061 49fb9766 f0019440 6d59f930 755f8c06 bbc9cc84 baaf04e2>;
        Tag = <a506a246 97683534 dfb6a120 c440ac0e 3075d305 2d22bd69 d27c33c8 0c5db8f5>;
        Theme = <9412b895 04891719 8c9342ba 7616ee61 3df27a2c 57efa3ac a7b97d0c 4d0d8dd6>;
        ThemeAll = <95d80c80 18755ade 6ca83731 222a95c6 2575c83c 3e266ef3 667ef48c 850ed742>;
        ThemeDisplayable = <ece3436f d55e61a0 a3b2c0b1 0179a52e 16842058 28614280 37c9092f e5cab28f>;
        User = <49e38bf1 225eed1f f5cd771a 6e7707b4 1a2f0629 79aad8bc d220eaf6 5395a97f>;
    };
    NSStoreModelVersionHashesVersion = 3;
    NSStoreModelVersionIdentifiers =         (
        ""
    );
    NSStoreType = SQLite;
    NSStoreUUID = "218F9A44-2939-49AB-A9F3-3A90E2205F26";
    "_NSAutoVacuumLevel" = 2;
};
reason = "Can't find model for source store";
} 
```

# android - OnItemClick 不响应点击

> ID：15429752
> 
> 赞同：0
> 
> 时间：2013-03-15T10:19:03.427
> 
> 标签：android, listview, onitemclick

搜索了[listview OnClick not](https://stackoverflow.com/questions/15334893/android-horizontallistview-onitemclick-not-working) [working pages](https://stackoverflow.com/questions/14308192/android-programming-onitemclicklistener-for-multiple-listviews-doesnt-work)，没有解决。

我的活动通过调用 扩展*ArrayAdapter*类的自定义适配器*MyArrayAddapter来填充列表视图。*

 ***问题：onItemClick() 或 setOnItemClick() 没有响应。**

当我单击任何项​​目时，不会发生任何操作，甚至不会执行日志语句。

<<>>

代码片段：

在扩展 Activity 的类实现 OnItemClickListener 下，**我在 OnCreate() 方法中初始化并调用以下函数：**

```
 private void listViewSet() {

        MyArrayAdapter adapter = new MyArrayAdapter(    this,   R.id.tvrow, rootListWrapper );
        // Assign adapter to ListView
        listView.setAdapter(    adapter     );  
        listView.setOnItemClickListener(    this    );  //******
        listView.performClick();
    } 
```

连吐司都没有出现:(

```
@Override
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
        Log.v(  "OnCLick", "asdfhjdf" );
        Toast.makeText(  this,  "Component "+ rootListWrapper.get( position ).toString() + " clicked.", Toast.LENGTH_LONG ).show();

        root = rootListWrapper.get(  position  );
        rootListWrapper = root.children;        
        this.listViewSet();
    } 
```

注意：当我单击列表视图的一个项目时，我会得到完全相同的消息，只是时间戳不同。我收到 7-8 条这样的新消息。点击前的 LogCat：

```
03-15 09:54:06.507: W/Trace(1825): Unexpected value from nativeGetEnabledTags: 0
03-15 09:54:06.877: W/Trace(1825): Unexpected value from nativeGetEnabledTags: 0
03-15 09:54:06.877: W/Trace(1825): Unexpected value from nativeGetEnabledTags: 0
03-15 09:54:06.947: W/Trace(1825): Unexpected value from nativeGetEnabledTags: 0
03-15 09:54:06.947: W/Trace(1825): Unexpected value from nativeGetEnabledTags: 0
03-15 09:54:07.117: W/Trace(1825): Unexpected value from nativeGetEnabledTags: 0
03-15 09:54:07.117: W/Trace(1825): Unexpected value from nativeGetEnabledTags: 0
03-15 09:54:07.297: W/Trace(1825): Unexpected value from nativeGetEnabledTags: 0 
```

点击后：

```
03-15 10:05:36.458: W/Trace(1825): Unexpected value from nativeGetEnabledTags: 0
03-15 10:05:36.458: W/Trace(1825): Unexpected value from nativeGetEnabledTags: 0
03-15 10:05:36.480: W/Trace(1825): Unexpected value from nativeGetEnabledTags: 0
03-15 10:05:40.817: W/Trace(1825): Unexpected value from nativeGetEnabledTags: 0
03-15 10:05:40.817: W/Trace(1825): Unexpected value from nativeGetEnabledTags: 0
03-15 10:05:40.917: W/Trace(1825): Unexpected value from nativeGetEnabledTags: 0
03-15 10:05:40.960: W/Trace(1825): Unexpected value from nativeGetEnabledTags: 0 
```

活动布局：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".BigClass" >

   <ListView
        android:id="@+id/mylist"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</RelativeLayout> 
```

行项目的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"

    android:padding="20dp"
      >     

    <TextView android:id="@+id/tvrow"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:text="Component" />

    <LinearLayout android:weightSum="9"   android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:layout_below="@id/tvrow"   >

    <Button      android:id="@+id/bL"
        android:layout_weight="4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/blue_right"        
         />    
    <Button
        android:id="@+id/bC
        android:layout_weight="1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"       
        android:background="@drawable/component2"
         />
    <Button
        android:layout_weight="4"
        android:id="@+id/bR"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"  
        android:background="@drawable/blue_right"
        /> 
   </LinearLayout>
</RelativeLayout> 
```

它第一次完美填充，但我希望当我单击时我应该能够通过更改参数并再次调用 setAdapter() 方法来重新填充它。

解决这个问题肯定会帮助许多其他人，因为我看到许多人有未解决的疑问。

有问题的类的java文件：

```
public class BigClass extends Activity implements OnItemClickListener{

    List<Node> rootListWrapper;
    Node root;
    ListView listView;
    GetMethodEx getJSONString;
    JSONObject jObject;
    BigClass HealthNext;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_health_display);

        listView = (ListView) findViewById(R.id.mylist);
        rootListWrapper = new ArrayList<Node>();
        root = new Node();
        getJSONString = new GetMethodEx();
        jObject = new JSONObject();

        //values = new String[] { "Android", "iPhone", "WindowsMobile",
        //        "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
        //        "Linux", "OS/2" };

        this.jsonDataFetch();
        this.listViewSet();

    }
        private void jsonDataFetch() {
        // TODO Auto-generated method stub
         try{
             jObject=new JSONObject(    getJSONString.getInternetData() );           
             root = root.createNode(    jObject );  
             Log.v( "component",    jObject.getString("status") );
             rootListWrapper.add(   root    );
        }catch(Exception e){
            e.printStackTrace();
        }
        Log.v("component", rootListWrapper.toString());
    }

        private void listViewSet() {
            // Define a new Adapter
            // First parameter - Context
            // Second parameter - Layout for the row
            // Third parameter - ID of the TextView to which the data is written
            // Fourth - the Array of data

            MyArrayAdapter adapter = new MyArrayAdapter(    this,   R.id.tvrow, rootListWrapper );
            // Assign adapter to ListView
            listView.setAdapter(    adapter     );  
            listView.setOnItemClickListener(    this    );
            listView.performClick();
        }

    @Override
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
        Log.v(  "OnCLick", "asdfhjdf" );
        Toast.makeText(  BigClass.this,  "Component "+ rootListWrapper.get( position ).toString() + " clicked.",    Toast.LENGTH_LONG ).show();

        root = rootListWrapper.get(  position  );
        rootListWrapper = root.children;
        HealthNext.jsonDataFetch();
        HealthNext.listViewSet();
    }

} 
```

LOGCAT 更新：在 3 个按钮上使用 focusable:false 属性后。

```
03-15 10:57:44.798: V/OnCLick(958): asdfhjdf
03-15 10:57:44.952: D/AndroidRuntime(958): Shutting down VM
03-15 10:57:44.952: W/dalvikvm(958): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
03-15 10:57:44.992: E/AndroidRuntime(958): FATAL EXCEPTION: main
03-15 10:57:44.992: E/AndroidRuntime(958): java.lang.NullPointerException
03-15 10:57:44.992: E/AndroidRuntime(958):  at com.example.@@@@@@.BigClass.onItemClick(BigClass.java:86)
03-15 10:57:44.992: E/AndroidRuntime(958):  at android.widget.AdapterView.performItemClick(AdapterView.java:298)
03-15 10:57:44.992: E/AndroidRuntime(958):  at android.widget.AbsListView.performItemClick(AbsListView.java:1100)
03-15 10:57:44.992: E/AndroidRuntime(958):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:2749)
03-15 10:57:44.992: E/AndroidRuntime(958):  at android.widget.AbsListView$1.run(AbsListView.java:3423)
03-15 10:57:44.992: E/AndroidRuntime(958):  at android.os.Handler.handleCallback(Handler.java:725)
03-15 10:57:44.992: E/AndroidRuntime(958):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-15 10:57:44.992: E/AndroidRuntime(958):  at android.os.Looper.loop(Looper.java:137)
03-15 10:57:44.992: E/AndroidRuntime(958):  at android.app.ActivityThread.main(ActivityThread.java:5039)
03-15 10:57:44.992: E/AndroidRuntime(958):  at java.lang.reflect.Method.invokeNative(Native Method)
03-15 10:57:44.992: E/AndroidRuntime(958):  at java.lang.reflect.Method.invoke(Method.java:511)
03-15 10:57:44.992: E/AndroidRuntime(958):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-15 10:57:44.992: E/AndroidRuntime(958):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-15 10:57:44.992: E/AndroidRuntime(958):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:21:52.113

编辑：

用这个替换你的行 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:descendantFocusability="true"
    android:padding="20dp"
      >     

    <TextView android:id="@+id/tvrow"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:text="Component" />

    <LinearLayout android:weightSum="9"   android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:layout_below="@id/tvrow"   >

    <Button  android:id="@+id/bL"
        android:layout_weight="4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
           android:focusable="false"
        android:background="@drawable/blue_right"        
         />    
    <Button
        android:id="@+id/bC"
        android:layout_weight="1"
   android:focusable="false"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"       
        android:background="@drawable/component2"
         />
    <Button
        android:layout_weight="4"
        android:id="@+id/bR"
      android:focusable="false"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"  
        android:background="@drawable/blue_right"
        /> 
   </LinearLayout>
</RelativeLayout> 
```

* * *

您的自定义适配器可能有一个可聚焦的项目，如（EditText、Button）等，尝试将行项目的焦点设置为 false

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:22:07.960

```
listView.performClick();
```

将在列表视图上触发 onClick()，而不是在列表中的单个项目上触发。

因此，您还应该实现 onClick() 方法来拦截列表视图上的点击。*

# c# - 使用 LINQ / Lambda 在 C# 中聚合对象的重复成员

> ID：15429753
> 
> 赞同：2
> 
> 时间：2013-03-15T10:19:04.993
> 
> 标签：c#, linq, lambda, aggregate-functions

我的工作是使用 LINQ 聚合存在于 2 个不同数据库中的公司员工，标准是找到同名的公司，然后在这些公司中找到同名的部门，然后将所有员工合并到一个新的公司对象中。

我将两个数据库中的所有公司合二为一`List<Company>`，他们是否可以使用该`Aggregate`功能合并具有相同名称的公司，然后找到具有相同名称的部门并合并其所有员工？使用聚合函数似乎很容易合并“1 级”数据，我正在努力进入 3 级聚合（公司>部门>员工）

`List<Company> AllCompanies`我的对象示例：

```
Company       Department      Employees   Source
-----------|--------------|-------------|---------
ABC Inc    |  Sales       | Sam         | DB1
           |              | Laura       |
-----------|--------------|-------------|---------
ABC Inc    |  Sales       | Joe         | DB2
-----------|--------------|-------------|---------
ABC Inc    |  Sales       | Joe         | DB1
-----------|--------------|-------------|---------
ABC Inc    |  IT          | Matt        | DB2
-----------|--------------|-------------|---------
XYZ Inc    |  Sales       | Steve       | DB1
-----------|--------------|-------------|---------
XYZ Inc    |  Sales       | Steve       | DB2 
-----------|--------------|-------------|---------
XYZ Inc    |  HR          | Mark        | DB2 
```

我正在尝试将以上内容转换为：

```
Company       Department      Employees
-----------|--------------|-------------
ABC Inc    |  Sales       | Sam
           |              | Laura
           |              | Joe
           |--------------|-------------
           |  IT          | Matt
-----------|--------------|-------------
XYZ Inc    |  Sales       | Steve
           |--------------|-------------
           |  HR          | Mark 
```

为了这个例子，我的匹配标准只是名称。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T10:28:58.530

```
 from c in allCompanies
 group c by c.Company into departments
 select new {
    Company = departments.Key,
    Departments = from d in departments
                  group d by d.Department into employees
                  select new {
                      Department = employees.Key,
                      Employees = employees.Select(e => e.Employees)
                                           .Distinct()
                  }
 } 
```

# c# - 数据集中错误

> ID：15429755
> 
> 赞同：0
> 
> 时间：2013-03-15T10:19:08.487
> 
> 标签：c#, .net, database, sql-server-2005, dataset

我正在制作`Windows Application`，因为我正在创建用于制作报告的数据集，因为我正在使用一个已经成功运行的查询来显示网格中的数据。但它不适用于数据集。

**查询**：

```
select sum (case when Buy_sell=1 then Trade_Qty else 0 end) as BuyQty,
       sum (case when Buy_sell=1 then Market_Rate else 0 end) as BuyRate,
       sum (case when Buy_sell=1 then Trade_Qty*Market_Rate else 0 end) as BuyAmount,

       sum (case when Buy_sell=2 then Trade_Qty else 0 end) as SellQty,
       sum (case when Buy_sell=2 then Market_Rate else 0 end) as SellRate,
       sum (case when Buy_sell=2 then Trade_Qty*Market_Rate else 0 end) as SellAmount
from tradeFile
where Party_Code=@pcode and Sauda_Date like @saudaDate% and Scrip_Code=@scripCode 
```

它给我在 Sauda_Date 附近的 % 错误，如 @saudaDate%。如果我删除 % 它不会给出错误，但它没有给我预期的结果。

**查询文本**：

```
Error in WHERE clause near 'AND'.
Unable to parse query text. 
```

是否有另一种方法可以为数据集编写 like-% 查询？

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:23:33.093

它应该是

```
string query="select sum (case when Buy_sell=1 then Trade_Qty else 0 end) as BuyQty,
       sum (case when Buy_sell=1 then Market_Rate else 0 end) as BuyRate,
       sum (case when Buy_sell=1 then Trade_Qty*Market_Rate else 0 end) as BuyAmount,

       sum (case when Buy_sell=2 then Trade_Qty else 0 end) as SellQty,
       sum (case when Buy_sell=2 then Market_Rate else 0 end) as SellRate,
       sum (case when Buy_sell=2 then Trade_Qty*Market_Rate else 0 end) as SellAmount
from tradeFile
where Party_Code="+@pcode+" and Sauda_Date like "+ @saudaDate+"%"+" and Scrip_Code="+@scripCode; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T10:26:21.443

如果您对文字字符使用串联，它将起作用：

```
where Party_Code=@pcode and Sauda_Date like @saudaDate+'%' and Scrip_Code=@scripCode 
```

# postgresql - postgreSQL：如何复制一行

> ID：15429756
> 
> 赞同：51
> 
> 时间：2013-03-15T10:19:09.150
> 
> 标签：postgresql

这是我的表 web_book 的方案：

```
 Column     |          Type          |                       Modifiers                       
----------------+------------------------+-------------------------------------------------------
 id             | integer                | not null default nextval('web_book_id_seq'::regclass)
 page_count     | integer                | not null
 year_published | integer                | not null
 file           | character varying(100) | not null
 image          | character varying(100) | not null
 display_on_hp  | boolean                | not null
 name           | character varying(128) | not null
 description    | text                   | not null
 name_cs        | character varying(128) | 
 name_en        | character varying(128) | 
 description_cs | text                   | 
 description_en | text                   | 
```

该表包含一行，其中`id=3`. 我想复制该行，但如果我尝试这个：

```
INSERT INTO web_book SELECT * FROM web_book WHERE id=3; 
```

我明白了：

```
ERROR:  duplicate key value violates unique constraint "web_book_pkey"
DETAIL:  Key (id)=(3) already exists 
```

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-03-15T10:59:58.590

您需要为新插入的行创建一个新 ID：

```
INSERT INTO web_book( 
   id, page_count, year_published, file, image, 
   display_on_hp, name, description, name_cs, 
   name_en, description_cs, description_en
)
SELECT nextval('web_book_id_seq'), 
       page_count, 
       year_published, 
       file, 
       image, 
       display_on_hp, 
       name, 
       description, 
       name_cs, 
       name_en, 
       description_cs, 
       description_en 
FROM web_book WHERE id=3; 
```

正如 ClodoaldoNeto 所提到的，您可以通过简单地省略 ID 列并让默认定义完成其工作来使事情变得更容易：

```
INSERT INTO web_book( 
   page_count, year_published, file, image, 
   display_on_hp, name, description, name_cs, 
   name_en, description_cs, description_en
)
SELECT page_count, 
       year_published, 
       file, 
       image, 
       display_on_hp, 
       name, 
       description, 
       name_cs, 
       name_en, 
       description_cs, 
       description_en 
FROM web_book WHERE id=3; 
```

在这种情况下，您不需要知道序列名称（但发生的事情不太明显）。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-16T18:29:30.260

仅当您指定其值时才指定`id`列（这不是您的情况）。您想使用下一个序列`web_book_id_seq`值，因此不要在 INSERT 查询中指定它。

您的 INSERT 应如下所示：

```
INSERT INTO web_book (page_count, year_published, file, image, display_on_hp, name, description, name_cs, name_en, description_cs, description_en)
SELECT page_count, year_published, file, image, display_on_hp, name, description, name_cs, name_en, description_cs, description_en
FROM web_book
WHERE id = 3; 
```

# r - R中的函数topicmodels::lda出错

> ID：15429760
> 
> 赞同：1
> 
> 时间：2013-03-15T10:19:25.743
> 
> 标签：r, lda, topic-modeling

我正在尝试使用 R 中 topicmodels 包中的 LDA 模型。我需要测量方法的不稳定性，因此我从 Dirichlet 分布中生成了 w = 3000 个单词、t = 8 个主题和 d = 50 个文档的真实参数，其中大约 60 个单词每一个：

```
Theta = t(rdirichlet(d, alpha))

Phi = t(rdirichlet(t, beta))

docs = matrix(0, nrow = d, ncol = w)

for (i in 1:d)  {   
    curn = rnorm(1, mean = 60, sd = 10)    
    for (j in 1:curn)   {
        curt = rdiscrete(1, Theta[,d], 1:t)
        curw = rdiscrete(1, Phi[,curt], 1:w)
        docs[i, curw] = docs[i, curw] + 1
        }
    } 
```

所以我的 docs 矩阵是一个稀疏矩阵 d * w，几乎所有元素都是 0 或 1。

然后我需要我的文档矩阵成为 DocumentTermMatrix 类的对象，以便在 topicmodels:lda() 中使用它：

```
docs = as.DocumentTermMatrix(docs, weighting = weightTf) 
```

我需要使用吉布斯采样方法，所以我写

```
ldafitmodel <- lda(docs, t, method = "Gibbs") 
```

然后我得到：

> lda.default(docs, t, method = "Gibbs") 中的错误：nrow(x) 和 length(grouping) 不同

我猜这个 topicmodels 包使用 MASS 包，但是这个分组参数是我无法明确控制的，可以吗？或者我对我的数据做错了什么？

请帮我！

BR，玛丽亚

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T13:13:40.707

您的确切问题无法重现，因为您没有定义 d、t、w、alpha 或 beta，并且没有为您的`rdirichlet()`和`rdiscrete()`函数调用加载适当的包。但是，我很确定您的问题是调用`lda()`MASS 包中的函数 - 这是用于线性判别分析，而不是潜在的狄利克雷分配 - 而不是`LDA()`topicmodels 包中的函数。R 区分大小写，因此这些大写字母会有所不同。另请注意，如果您认为您将来可能会遇到类似的问题，但对象具有完全相同的名称，那么您可以通过 :: 形式的命名空间指定您想要的确切对象，例如`topicmodels::LDA()`.

无论如何，我无法重现您的示例，但我认为此示例应该说明您的错误和可行的解决方案。

```
> library(topicmodels)
> data(AssociatedPress)
> docs = AssociatedPress[1:100]
> ldafitmodel <- lda(docs, 4, method = "Gibbs")
Error in lda.default(docs, 4, method = "Gibbs") : 
  nrow(x) and length(grouping) are different
> (ldafitmodel <- LDA(docs, 4, method = "Gibbs"))
A LDA_Gibbs topic model with 4 topics. 
```

# .htaccess - .htaccess 带有查询参数

> ID：15429765
> 
> 赞同：1
> 
> 时间：2013-03-15T10:19:40.823
> 
> 标签：.htaccess

我想设置一个 .htaccess 规则来重定向一些此类旧 URL

`www.example.com/index.php?id=4&language=deutsch`

至

`www.example.com/deutsch`

使用 301 重定向的 Apache 服务器。

我怎样才能捕捉到语言参数来做到这一点？此外，我想避免使用 id 参数（旧 URL 将被重定向到单个页面）。

这个 htaccess 规则正确吗？

```
RewriteCond %{QUERY_STRING} .*\blanguage=deutsch
RewriteRule ^deutsch [R=301] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:35:21.633

你`RewriteUrl`错了：

```
RewriteCond %{QUERY_STRING} .*\blanguage=deutsch
RewriteRule ^(.*)$ deutsch? [R=301,L] 
```

此处用于删除重写 url 中的`?`查询字符串。

# java - 检测在 ContentEditable div 中输入的单词

> ID：15429768
> 
> 赞同：1
> 
> 时间：2013-03-15T10:20:09.500
> 
> 标签：java, javascript, gwt, contenteditable, jsni

我有一个要求，我需要获取在`contenteditable`div 中输入的单词。

每当我输入一个单词并点击空格时，我都想知道输入了什么单词。单词可以在末尾或中间的任何地方输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T07:00:40.257

在 GWT 中，我相信`contentEditable`div 指的是`Textbox`,`Numberbox`或`RichTextArea`. （如果还有其他人，请告诉我）。

解决方案看起来相当简单。

您可以轻松地覆盖上述`onBrowseEvent()`每个小部件。一旦击键匹配，要么`space or Enter`从 div 获取值并将其存储在`current value or any other string`. 维护一个`previous value`字符串并与之比较。一旦你遇到字符串中的第一个变化，你就会得到你正在寻找的单词。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T01:13:43.680

您可以使用 on keyUp 事件来检查空间，而不是使用 diff 算法来检查所做的更改。见谷歌“javascript diff”算法 - 你会群众....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:29:32.623

如果您使用的是 javascript，则此堆栈溢出链接很有用：

[通过 javascript 从 contenteditable div 获取文本内容](https://stackoverflow.com/questions/3593626/get-the-text-content-from-a-contenteditable-div-through-javascript)

# emacs - 在 GNU Emacs 24 上重做+.el

> ID：15429771
> 
> 赞同：6
> 
> 时间：2013-03-15T10:20:18.603
> 
> 标签：emacs

我正在尝试在 OSX 上的 GNU Emacs 24 中使用[redo+.el](http://emacswiki.org/emacs/redo+.el)。当我尝试加载文件（使用`M-x load-file`, 或`(require 'redo+)`在我的`.emacs`文件中）时，我收到此错误：

```
Attempt to modify read-only object 
```

调试器的完整输出如下（也作为 Gist [here](https://gist.github.com/johnjcamilleri/5168982)）。

```
Debugger entered--Lisp error: (error "Attempt to modify read-only object")
  setcar(((and (not buffer-read-only) (not (eq t buffer-undo-list)) (if (eq last-command (quote undo)) (listp pending-undo-list) (consp buffer-undo-list))) :help "Undo last operation") (and (not buffer-read-only) (consp buffer-undo-list) (or (not (or (eq last-buffer-undo-list buffer-undo-list) (eq last-buffer-undo-list (cdr buffer-undo-list)))) (listp pending-undo-list))))
  (lambda (map) (setcar (cdr (memq :enable (assq (quote undo) (cdr map)))) (quote (and (not buffer-read-only) (consp buffer-undo-list) (or (not (or (eq last-buffer-undo-list buffer-undo-list) (eq last-buffer-undo-list ...))) (listp pending-undo-list))))))((keymap (undo menu-item "Undo" undo :enable (and (not buffer-read-only) (not (eq t buffer-undo-list)) (if (eq last-command (quote undo)) (listp pending-undo-list) (consp buffer-undo-list))) :help "Undo last operation") (separator-undo "--") (cut menu-item "Cut" kill-region :enable (and mark-active (not buffer-read-only)) :help "Cut (kill) text in region between mark and current position") (copy menu-item "Copy" ns-copy-including-secondary :enable mark-active :help "Copy text in region between mark and current position" :keys "\\[ns-copy-including-secondary]") (paste menu-item "Paste" yank :enable (and (or (and (fboundp (quote x-selection-exists-p)) (x-selection-exists-p (quote CLIPBOARD))) (if (featurep (quote ns)) (cdr yank-menu) kill-ring)) (not buffer-read-only)) :help "Paste (yank) text most recently cut/copied") (select-paste menu-item "Select and Paste" yank-menu :enable (and (cdr yank-menu) (not buffer-read-only)) :help "Choose a string from the kill ring and paste it") (clear menu-item "Clear" delete-region :enable (and mark-active (not buffer-read-only)) :help "Delete the text in region between mark and current position") (mark-whole-buffer menu-item "Select All" mark-whole-buffer :help "Mark the whole buffer for a subsequent cut/copy") (separator-search "--") (search menu-item "Search" (keymap (search-forward menu-item "String Forward..." nonincremental-search-forward :help "Search forward for a string") (search-backward menu-item "String Backwards..." nonincremental-search-backward :help "Search backwards for a string") (re-search-forward menu-item "Regexp Forward..." nonincremental-re-search-forward :help "Search forward for a regular expression") (re-search-backward menu-item "Regexp Backwards..." nonincremental-re-search-backward :help "Search backwards for a regular expression") (separator-repeat-search "--") (repeat-search-fwd menu-item "Repeat Forward" nonincremental-repeat-search-forward :enable (or (and (eq menu-bar-last-search-type (quote string)) search-ring) (and (eq menu-bar-last-search-type (quote regexp)) regexp-search-ring)) :help "Repeat last search forward") (repeat-search-back menu-item "Repeat Backwards" nonincremental-repeat-search-backward :enable (or (and (eq menu-bar-last-search-type (quote string)) search-ring) (and (eq menu-bar-last-search-type (quote regexp)) regexp-search-ring)) :help "Repeat last search backwards") (separator-tag-search "--") (tags-srch menu-item "Search Tagged Files..." tags-search :help "Search for a regexp in all tagged files") (tags-continue menu-item "Continue Tags Search" tags-loop-continue :help "Continue last tags search operation") (separator-tag-isearch "--") (i-search menu-item "Incremental Search" (keymap (isearch-forward menu-item "Forward String..." isearch-forward :help "Search forward for a string as you type it") (isearch-backward menu-item "Backward String..." isearch-backward :help "Search backwards for a string as you type it") (isearch-forward-regexp menu-item "Forward Regexp..." isearch-forward-regexp :help "Search forward for a regular expression as you type it") (isearch-backward-regexp menu-item "Backward Regexp..." isearch-backward-regexp :help "Search backwards for a regular expression as you type it") "Incremental Search")) "Search")) (replace menu-item "Replace" (keymap (query-replace menu-item "Replace String..." query-replace :enable (not buffer-read-only) :help "Replace string interactively, ask about each occurrence") (query-replace-regexp menu-item "Replace Regexp..." query-replace-regexp :enable (not buffer-read-only) :help "Replace regular expression interactively, ask about each occurrence") (separator-replace-tags "--") (tags-repl menu-item "Replace in Tagged Files..." tags-query-replace :help "Interactively replace a regexp in all tagged files") (tags-repl-continue menu-item "Continue Replace" tags-loop-continue :help "Continue last tags replace operation") "Replace")) (goto menu-item "Go To" (keymap (go-to-line menu-item "Goto Line..." goto-line :help "Read a line number and go to that line") (go-to-pos menu-item "Goto Buffer Position..." goto-char :help "Read a number N and go to buffer position N") (beg-of-buf menu-item "Goto Beginning of Buffer" beginning-of-buffer) (end-of-buf menu-item "Goto End of Buffer" end-of-buffer) (separator-tags "--") (find-tag menu-item "Find Tag..." find-tag :help "Find definition of function or variable") (find-tag-otherw menu-item "Find Tag in Other Window..." find-tag-other-window :help "Find function/variable definition in another window") (next-tag menu-item "Find Next Tag" menu-bar-next-tag :enable (and (boundp (quote tags-location-ring)) (not (ring-empty-p tags-location-ring))) :help "Find next function/variable matching last tag name") (next-tag-otherw menu-item "Next Tag in Other Window" menu-bar-next-tag-other-window :enable (and (boundp (quote tags-location-ring)) (not (ring-empty-p tags-location-ring))) :help "Find next function/variable matching last tag name in another window") (apropos-tags menu-item "Tags Apropos..." tags-apropos :help "Find function/variables whose names match regexp") (separator-tag-file "--") (set-tags-name menu-item "Set Tags File Name..." visit-tags-table :help "Tell Tags commands which tag table file to use") "Go To")) (bookmark menu-item "Bookmarks" menu-bar-bookmark-map) (separator-bookmark "--") (fill menu-item "Fill" fill-region :enable (and mark-active (not buffer-read-only)) :help "Fill text in region to fit between left and right margin") (spell menu-item "Spell" ispell-menu-map) (props menu-item "Text Properties" facemenu-menu) "Edit"))
  mapc((lambda (map) (setcar (cdr (memq :enable (assq (quote undo) (cdr map)))) (quote (and (not buffer-read-only) (consp buffer-undo-list) (or (not (or (eq last-buffer-undo-list buffer-undo-list) (eq last-buffer-undo-list ...))) (listp pending-undo-list)))))) ((keymap (undo menu-item "Undo" undo :enable (and (not buffer-read-only) (not (eq t buffer-undo-list)) (if (eq last-command (quote undo)) (listp pending-undo-list) (consp buffer-undo-list))) :help "Undo last operation") (separator-undo "--") (cut menu-item "Cut" kill-region :enable (and mark-active (not buffer-read-only)) :help "Cut (kill) text in region between mark and current position") (copy menu-item "Copy" ns-copy-including-secondary :enable mark-active :help "Copy text in region between mark and current position" :keys "\\[ns-copy-including-secondary]") (paste menu-item "Paste" yank :enable (and (or (and (fboundp (quote x-selection-exists-p)) (x-selection-exists-p (quote CLIPBOARD))) (if (featurep (quote ns)) (cdr yank-menu) kill-ring)) (not buffer-read-only)) :help "Paste (yank) text most recently cut/copied") (select-paste menu-item "Select and Paste" yank-menu :enable (and (cdr yank-menu) (not buffer-read-only)) :help "Choose a string from the kill ring and paste it") (clear menu-item "Clear" delete-region :enable (and mark-active (not buffer-read-only)) :help "Delete the text in region between mark and current position") (mark-whole-buffer menu-item "Select All" mark-whole-buffer :help "Mark the whole buffer for a subsequent cut/copy") (separator-search "--") (search menu-item "Search" (keymap (search-forward menu-item "String Forward..." nonincremental-search-forward :help "Search forward for a string") (search-backward menu-item "String Backwards..." nonincremental-search-backward :help "Search backwards for a string") (re-search-forward menu-item "Regexp Forward..." nonincremental-re-search-forward :help "Search forward for a regular expression") (re-search-backward menu-item "Regexp Backwards..." nonincremental-re-search-backward :help "Search backwards for a regular expression") (separator-repeat-search "--") (repeat-search-fwd menu-item "Repeat Forward" nonincremental-repeat-search-forward :enable (or (and (eq menu-bar-last-search-type ...) search-ring) (and (eq menu-bar-last-search-type ...) regexp-search-ring)) :help "Repeat last search forward") (repeat-search-back menu-item "Repeat Backwards" nonincremental-repeat-search-backward :enable (or (and (eq menu-bar-last-search-type ...) search-ring) (and (eq menu-bar-last-search-type ...) regexp-search-ring)) :help "Repeat last search backwards") (separator-tag-search "--") (tags-srch menu-item "Search Tagged Files..." tags-search :help "Search for a regexp in all tagged files") (tags-continue menu-item "Continue Tags Search" tags-loop-continue :help "Continue last tags search operation") (separator-tag-isearch "--") (i-search menu-item "Incremental Search" (keymap (isearch-forward menu-item "Forward String..." isearch-forward :help "Search forward for a string as you type it") (isearch-backward menu-item "Backward String..." isearch-backward :help "Search backwards for a string as you type it") (isearch-forward-regexp menu-item "Forward Regexp..." isearch-forward-regexp :help "Search forward for a regular expression as you type it") (isearch-backward-regexp menu-item "Backward Regexp..." isearch-backward-regexp :help "Search backwards for a regular expression as you type it") "Incremental Search")) "Search")) (replace menu-item "Replace" (keymap (query-replace menu-item "Replace String..." query-replace :enable (not buffer-read-only) :help "Replace string interactively, ask about each occurrence") (query-replace-regexp menu-item "Replace Regexp..." query-replace-regexp :enable (not buffer-read-only) :help "Replace regular expression interactively, ask about each occurrence") (separator-replace-tags "--") (tags-repl menu-item "Replace in Tagged Files..." tags-query-replace :help "Interactively replace a regexp in all tagged files") (tags-repl-continue menu-item "Continue Replace" tags-loop-continue :help "Continue last tags replace operation") "Replace")) (goto menu-item "Go To" (keymap (go-to-line menu-item "Goto Line..." goto-line :help "Read a line number and go to that line") (go-to-pos menu-item "Goto Buffer Position..." goto-char :help "Read a number N and go to buffer position N") (beg-of-buf menu-item "Goto Beginning of Buffer" beginning-of-buffer) (end-of-buf menu-item "Goto End of Buffer" end-of-buffer) (separator-tags "--") (find-tag menu-item "Find Tag..." find-tag :help "Find definition of function or variable") (find-tag-otherw menu-item "Find Tag in Other Window..." find-tag-other-window :help "Find function/variable definition in another window") (next-tag menu-item "Find Next Tag" menu-bar-next-tag :enable (and (boundp (quote tags-location-ring)) (not (ring-empty-p tags-location-ring))) :help "Find next function/variable matching last tag name") (next-tag-otherw menu-item "Next Tag in Other Window" menu-bar-next-tag-other-window :enable (and (boundp (quote tags-location-ring)) (not (ring-empty-p tags-location-ring))) :help "Find next function/variable matching last tag name in another window") (apropos-tags menu-item "Tags Apropos..." tags-apropos :help "Find function/variables whose names match regexp") (separator-tag-file "--") (set-tags-name menu-item "Set Tags File Name..." visit-tags-table :help "Tell Tags commands which tag table file to use") "Go To")) (bookmark menu-item "Bookmarks" menu-bar-bookmark-map) (separator-bookmark "--") (fill menu-item "Fill" fill-region :enable (and mark-active (not buffer-read-only)) :help "Fill text in region to fit between left and right margin") (spell menu-item "Spell" ispell-menu-map) (props menu-item "Text Properties" facemenu-menu) "Edit") (keymap (new-file menu-item "Visit New File..." find-file :enable (menu-bar-non-minibuffer-window-p) :help "Specify a new file's name, to edit the file" :image (find-image (cond ((not (display-color-p)) (quote (... ... ... ...))) ((< (display-color-cells) 256) (quote (... ... ... ...))) (t (quote (... ... ...))))) :label "New File" :vert-only t) (open-file menu-item "Open File..." menu-find-file-existing :enable (menu-bar-non-minibuffer-window-p) :help "Read an existing file into an Emacs buffer" :image (find-image (cond ((not (display-color-p)) (quote (... ... ... ...))) ((< (display-color-cells) 256) (quote (... ... ... ...))) (t (quote (... ... ...))))) :label "Open" :vert-only t) (dired menu-item "Open Directory..." dired :enable (menu-bar-non-minibuffer-window-p) :help "Read a directory, to operate on its files" :image (find-image (cond ((not (display-color-p)) (quote (... ... ... ...))) ((< (display-color-cells) 256) (quote (... ... ... ...))) (t (quote (... ... ...))))) :vert-only t) (kill-buffer menu-item "Close" kill-this-buffer :enable (kill-this-buffer-enabled-p) :help "Discard (kill) current buffer" :image (find-image (cond ((not (display-color-p)) (quote (... ... ... ...))) ((< (display-color-cells) 256) (quote (... ... ... ...))) (t (quote (... ... ...))))) :vert-only t) (save-buffer menu-item "Save" save-buffer :enable (and (buffer-modified-p) (buffer-file-name) (menu-bar-non-minibuffer-window-p)) :help "Save current buffer to its file" :image (find-image (cond ((not (display-color-p)) (quote (... ... ... ...))) ((< (display-color-cells) 256) (quote (... ... ... ...))) (t (quote (... ... ...))))) :label "Save") (separator-1 "--") (undo menu-item "Undo" undo :enable (and (not buffer-read-only) (not (eq t buffer-undo-list)) (if (eq last-command (quote undo)) (listp pending-undo-list) (consp buffer-undo-list))) :help "Undo last operation" :image (find-image (cond ((not (display-color-p)) (quote (... ... ... ...))) ((< (display-color-cells) 256) (quote (... ... ... ...))) (t (quote (... ... ...)))))) (separator-2 "--") (cut menu-item "Cut" kill-region :enable (and mark-active (not buffer-read-only)) :help "Cut (kill) text in region between mark and current position" :image (find-image (cond ((not (display-color-p)) (quote (... ... ... ...))) ((< (display-color-cells) 256) (quote (... ... ... ...))) (t (quote (... ... ...))))) :vert-only t) (copy menu-item "Copy" ns-copy-including-secondary :enable mark-active :help "Copy text in region between mark and current position" :keys "\\[ns-copy-including-secondary]" :image (find-image (cond ((not (display-color-p)) (quote (... ... ... ...))) ((< (display-color-cells) 256) (quote (... ... ... ...))) (t (quote (... ... ...))))) :vert-only t) (paste menu-item "Paste" yank :enable (and (or (and (fboundp (quote x-selection-exists-p)) (x-selection-exists-p (quote CLIPBOARD))) (if (featurep (quote ns)) (cdr yank-menu) kill-ring)) (not buffer-read-only)) :help "Paste (yank) text most recently cut/copied" :image (find-image (cond ((not (display-color-p)) (quote (... ... ... ...))) ((< (display-color-cells) 256) (quote (... ... ... ...))) (t (quote (... ... ...))))) :vert-only t) (separator-3 "--") (isearch-forward menu-item "Forward String..." isearch-forward :help "Search forward for a string as you type it" :image (find-image (cond ((not (display-color-p)) (quote (... ... ... ...))) ((< (display-color-cells) 256) (quote (... ... ... ...))) (t (quote (... ... ...))))) :label "Search" :vert-only t))))
  (if nil nil (mapc (function (lambda (map) (setcar (cdr (memq :enable (assq ... ...))) (quote (and (not buffer-read-only) (consp buffer-undo-list) (or ... ...)))))) (append (list menu-bar-edit-menu) (if window-system (list tool-bar-map)))) (define-key-after menu-bar-edit-menu [redo] (quote (menu-item "Redo" redo :enable (and (not buffer-read-only) (not (eq buffer-undo-list t)) (not (eq last-buffer-undo-list nil)) (or (eq last-buffer-undo-list buffer-undo-list) (let (...) (and ... ...) (while ... ...) (eq last-buffer-undo-list p))) (not (eq (cdr buffer-undo-list) pending-undo-list))) :help "Redo the most recent undo")) (quote undo)) (if window-system (progn (tool-bar-add-item-from-menu (quote redo) "redo" nil :visible (quote (not (eq (quote special) (get major-mode ...))))) (define-key-after tool-bar-map [redo] (cdr (assq (quote redo) tool-bar-map)) (quote undo)) (if (boundp (quote x-gtk-stock-map)) (setq x-gtk-stock-map (cons (quote ("etc/images/redo" . "gtk-redo")) x-gtk-stock-map))) (defalias (quote redo-toolbar-update) (function (lambda (&optional bgn end lng) (interactive) (set-buffer-modified-p (buffer-modified-p))))) (add-hook (quote after-change-functions) (quote redo-toolbar-update)))))
  eval-buffer(#<buffer  *load*> nil "/Users/john/Documents/scripts/emacs/redo+.el" nil t)  ; Reading at buffer position 11262
  load-with-code-conversion("/Users/john/Documents/scripts/emacs/redo+.el" "/Users/john/Documents/scripts/emacs/redo+.el" nil t)
  require(redo+)
  eval((require (quote redo+)) nil)
  eval-last-sexp-1(nil)
  eval-last-sexp(nil)
  call-interactively(eval-last-sexp nil nil) 
```

我`.el`之前在 Ubuntu 系统上成功使用过完全相同的文件。有什么想法可以解决这个问题吗？

## 更新

从[这个 URL](http://lists.gnu.org/archive/html/emacs-bug-tracker/2012-10/msg00051.html)获取信息（感谢 Daniel Martin），我可以通过注释掉这段代码来让模块加载工作：

```
 (mapc (lambda (map)
          (setcar (cdr (memq :enable (assq 'undo (cdr map))))
              '(and (not buffer-read-only)
                (consp buffer-undo-list)
                (or (not (or (eq last-buffer-undo-list
                         buffer-undo-list)
                         (eq last-buffer-undo-list
                         (cdr buffer-undo-list))))
                    (listp pending-undo-list)))))
        (append (list menu-bar-edit-menu)
            (if window-system (list tool-bar-map)))) 
```

这并不困扰我，因为我只通过键盘快捷键使用撤消/重做，而不是从菜单项。但是该链接建议可以使用此代码来解决它，但老实说，我无法弄清楚如何做到这一点（我在 Lisp 上很垃圾）...

```
 (let ((elem (copy-sequence (cdr (assq 'undo menu-bar-edit-menu)))))
   (setcar (cdr (memq :enable elem)) <your-exp-here>)
   elem)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T02:07:48.937

如果您在 GNU Emacs 24.2.50 或更高版本中使用 redo+.el 版本 1.15 或更早版本，则会出现此问题。

我使用了 Daniel Martin 提供的链接中的信息，并[在](https://stackoverflow.com/users/1914276/daniel-martin)[EmacsWiki](http://lists.gnu.org/archive/html/emacs-bug-tracker/2012-10/msg00051.html)上创建了一个希望修复[的 redo+ 版本 1.16](http://emacswiki.org/emacs/redo+.el)

# java - 在java中查询一个JSONObject

> ID：15429775
> 
> 赞同：48
> 
> 时间：2013-03-15T10:20:28.590
> 
> 标签：java, json, jackson, gson

我想知道某个地方是否存在能够查询 JSONObject 的 java 库。更深入地，我正在寻找类似的东西：

```
String json = "{ data: { data2 : { value : 'hello'}}}";

...
// Somehow we managed to convert json to jsonObject
...

String result = jsonObject.getAsString("data.data2.value");

System.out.println(result); 
```

我希望得到“你好”作为输出。

到目前为止，我发现最快的方法是使用 Gson：

```
jsonObject.getAsJsonObject("data").getAsJsonObject().get("data2").getAsJsonObject("value").getAsString(); 
```

写和读实际上并不容易。有什么更快的吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-21T15:16:48.590

我刚刚意外发现了一个非常有趣的项目：[JSON Path](https://github.com/jayway/JsonPath)

> JsonPath 之于 JSON 就像 XPATH 之于 XML，这是一种提取给定文档部分的简单方法。

有了这个库，您可以更轻松地完成您的要求，然后是我之前的建议：

```
String hello = JsonPath.read(json, "$.data.data2.value");

System.out.println(hello); //prints hello 
```

希望这也可能有所帮助。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-03-16T18:46:56.450

虽然不完全相同，但 Jackson 具有类似于 Gson 的树模型表示：

```
JsonNode root = objectMapper.readTree(jsonInput);
return root.get("data").get("data2").get("value").asText(); 
```

所以你需要一步一步地遍历它。

**编辑**（2015 年 8 月）

实际上，现在（从 Jackson 2.3 开始）支持 Jackson 的[JSON 指针](https://www.rfc-editor.org/rfc/rfc6901)表达式。所以你可以选择使用：

```
return root.at("/data/data2/value").asText(); 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-03-15T10:38:31.643

首先，我建议考虑 JSON 对象绑定。

但是，如果您获得任意 JSON 对象并且希望以您描述的方式处理它们，我建议将[Jackson JSON 处理器](http://jackson.codehaus.org/)与 Apache 的[Commons Beanutils](http://commons.apache.org/proper/commons-beanutils/)结合起来。

想法如下：Jackson 默认将所有 JSON 处理为`java.util.Map`实例，同时 Commons Beanutils 简化了对象的属性访问，包括数组和 Map 支持。

所以你可以像这样使用它：

```
//actually it is a Map instance with maps-fields within
Object jsonObj = objectMapper.readValue(json, Object.class);

Object hello = PropertyUtils.getProperty(jsonObj, "data.data2.value")

System.out.println(hello); //prints hello 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-07-12T16:12:58.430

您可以使用 org.json

```
 String json = "{ data: { data2 : { value : 'hello'}}}";
    org.json.JSONObject obj = new org.json.JSONObject(json);
    System.out.println(obj.query("/data/data2/value")); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-15T10:36:21.567

我觉得没办法。

考虑一个java类

```
class Student {
    Subject subject = new Subject();
}

class Subject {
    String name;
} 
```

在这里，如果我们想访问主题名称，那么

```
Student stud = new Student();
stud.subject.name; 
```

我们不能直接访问名称，如果是这样，我们将无法获得正确的主题名称。像这儿：

```
jsonObject.getAsJsonObject("data")
          .getAsJsonObject()
          .get("data2")
          .getAsJsonObject("value")
          .getAsString(); 
```

如果您想使用与 java 对象相同的对象，请使用

```
ClassName classObject = new Gson().fromJson(JsonString, ClassName.class); 
```

ClassName 必须具有与 jsonstring 匹配的所有字段。如果您在 jsonobject 中有一个 jsonobject，那么您必须像我在 Student 和 Subject 类中那样创建单独的类。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-07-16T18:20:47.507

使用 Java JSON API 1.1.x (javax.json) 可以利用新的`JavaPointer`接口。实现此接口的实例在某种程度上可以被认为是一种 XPath 表达式模拟（有关详细信息，请参阅[RFC-6901](https://www.rfc-editor.org/rfc/rfc6901)）。所以在你的情况下，你可以这样写：

```
import javax.json.*;
//...
var jp = Json.createPointer("/data/data2/value");
System.out.println(jp.getValue(jsonObject)); 
```

在 JSON 的 1.1.4 版本中，还对`JsonStructure`接口（由`JsonObject`和实现`JsonArray`）做了很好的补充，即`getValue(String jsonPointer)`. 所以这一切都归结为这个简单的单行：

```
System.out.println(jsonObject.getValue("/data/data2/value")); 
```

# sql-server - 将聚合 SUM 函数与其他表中的行散布

> ID：15429780
> 
> 赞同：0
> 
> 时间：2013-03-15T10:20:37.017
> 
> 标签：sql-server, aggregate-functions, partitioning

我有两张桌子：

```
QuantityUsed       Date
12                 01/01/2013 12:35:00
12                 01/01/2013 13:42:20
243                01/01/2013 17:12:00
33                 03/01/2013 12:04:09
34                 03/01/2013 15:09:01
154                03/01/2013 19:00:03 
```

和

```
EventID            Date
1                  01/01/2013 14:02:00
2                  03/01/2013 13:00:01 
```

我目前有一个查询，它正在执行按 DAY 分组的第一个表的简单总和，以便我可以看到按使用日期分组的已使用项目的数量：例如。

```
SumOfQuantity      Date

263                01/01/2013
221                03/01/2013 
```

我现在想将这些汇总数据与表 2 中的事件散布。例如。

```
SumOfQuantity      Date

24                 01/01/2013
EVENT ID 1         01/01/2013
243                01/01/2013
33                 03/01/2013
EVENT ID 2         03/01/2013
188                03/01/2013 
```

我每天都会得到多行，但这是可取的。

我玩过 SQL 中的 OVER 函数，但我似乎遗漏了一些东西。理想情况下，这将向后兼容到 SQL2000，但如果不实用，那么 SQL2005 就可以了。

任何帮助将不胜感激。非常感谢

# android - 文件在 Android 中保存在哪里？

> ID：15429783
> 
> 赞同：0
> 
> 时间：2013-03-15T10:20:47.107
> 
> 标签：android

我正在开发一个在文本文件中写入一些 JSON 数据的应用程序：

```
FileOutputStream fOut;
fOut = openFileOutput("myfile.txt", MODE_PRIVATE);
OutputStreamWriter osw = new OutputStreamWriter(fOut);
osw.write(myJSONData); 
```

我正在设备上测试此应用程序，当我将其插入计算机时，我无法看到该文件。你能告诉我它存储在哪个目录下，我需要将文件的操作模式设置为`MODE_WORLD_READABLE`才能看到它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T10:25:25.290

它将文件保存在文件`/data/app_package_name/files`夹中。用户无法通过文件管理器访问此位置 - 只有您的应用可以通过代码访问它。

此外，如果您真的渴望访问私人文件，那么您需要考虑**生根**设备的选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T10:25:21.507

通常，将其插入计算机就是将其安装到 SD 卡上。要保存到该文件，请获取 SD 卡根目录文件，`Environment.getExternalStorageDirectory()`然后使用该文件和所需的字符串文件名作为参数构造一个新文件。这会将它保存到您的 SD 卡中，这应该是您在计算机上安装它时看到的第一个文件夹。

顺便说一句，要将文本/JSON 直接写入文件，只需使用[FileWriter](http://developer.android.com/reference/java/io/FileWriter.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T10:21:49.460

在移动设备为 root 之前，您无法直观地看到内部文件。如果您想查看它，请将其存储在 SD 卡中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-04T06:14:14.177

要将文件保存到 Android 上的内部存储（从 SDK 23 开始），请使用应用程序的文件存储位置`getFilesDir()`并将它们保存在那里。然后应将文件保存到`/data/user/0/your.app.name/files`. 请参阅：[保存文件](https://developer.android.com/training/basics/data-storage/files.html)。

```
File filename = new File(getFilesDir(), "filename.txt"); 
```

编写完成后，您可以使用 adb 从计算机中检索此文件：

```
adb pull "/data/user/0/your.app.name/files/filename.txt" 
```

# java - 设置 GridPane 列/行

> ID：15429784
> 
> 赞同：2
> 
> 时间：2013-03-15T10:20:53.143
> 
> 标签：java, javafx-2, fxml

有没有办法设置 GridPane 的列和行数量？

我目前有这样的事情：

```
<fx:root type="GridPane" xmlns:fx="http://javafx.com/fxml"
         stylesheets="view/Style.css"
         maxHeight="Infinity" maxWidth="Infinity">
<gridLinesVisible>true</gridLinesVisible>
    <children>
        <Pane fx:id="center"
              GridPane.columnIndex="1" GridPane.rowIndex="1"
              GridPane.columnSpan="5" GridPane.rowSpan="3"
              GridPane.hgrow="always" GridPane.vgrow="always"/>
        <Pane fx:id="options"
              GridPane.columnIndex="0" GridPane.rowIndex="5"
              GridPane.columnSpan="6"/>
    </children>
</fx:root> 
```

我动态地向其中添加元素。

问题来了，如果行/列没有任何元素，它会被删除，所以窗格的外观很奇怪（比如向 (3,0) 添加一个元素，然后在 (2, X) 上添加元素，(1 , X) (3,0) 上的元素不会在窗格中居中，因为 (4,X) 和 (5,X) 上没有元素)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:16:11.890

使用 adicional HBox 和 VBox

```
HBox HB = new HBox();
HB.getChildren().addAll(btnexample1, btnexample2);

GridPane.setHalignment(HB, HPos.LEFT);
HB.setSpacing(5);
grid.add(HB, 0, 8); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-15T21:49:09.930

你说它发生在没有元素的时候。只是总是有一个元素，但让它有空白数据。像 Label.text = "";

# javascript - 输入键按下调用javascript函数

> ID：15429785
> 
> 赞同：-1
> 
> 时间：2013-03-15T10:20:56.153
> 
> 标签：javascript, asp.net, cross-browser, keycode

我的页面上有一个 asp:TextBox，我想检测回车键来调用 javascript 函数。这就是我所拥有的：

代码隐藏

```
txtSearch.Attributes.Add("OnKeyPress", "ProcessKeyPressed()") 
```

页面

```
 function ProcessKeyPressed() {
    if (event.keyCode == 13 || event.keyCode == 10 ) {
        Search();
    }
 } 
```

这适用于 chrome 和 IE，但不适用于 Firefox……知道为什么会这样吗？

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:25:29.707

尝试：

```
function ProcessKeyPressed(event) {
   if (event.keyCode == 13 || event.keyCode == 10 ) {
       Search();
   }
} 
```

有关更多信息，请参见此处：[window.event.keyCode 如何在 Firefox 上执行此操作？](https://stackoverflow.com/questions/6116933/window-event-keycode-how-to-do-it-on-firefox)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T10:29:02.143

后面的代码：

```
txtSearch.Attributes.Add("OnKeyPress", "ProcessKeyPressed(event || window.event)") 
```

和 JS：

```
function ProcessKeyPressed(event) {
    if (event.keyCode == 13 || event.keyCode == 10 ) {
        Search();
    }
 } 
```

基于[此](http://javascript.info/tutorial/obtaining-event-object#cross-browser-solution)

[演示](http://jsfiddle.net/ReALs/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:29:56.717

你可以试试这个

```
function ProcessKeyPressed(e) {
    var event = e || window.event;
    var key = event.charCode || event.keyCode
    if (key == 13 || key == 10 ) {
        Search();
    }
} 
```

# c# - 以编程方式将按钮添加到 GridView

> ID：15429787
> 
> 赞同：2
> 
> 时间：2013-03-15T10:20:57.793
> 
> 标签：c#, asp.net, button, gridview

我有一个`GridView`，我正在`BoundField`使用代码在其中添加 s。现在我想使用代码添加用于编辑和删除的按钮。我知道如何`ButtonField`使用代码将 a 添加到网格中，但我想添加一个按钮，因为`ButtonField`没有 CommandArgument 属性。

这是我的`GridView`标记：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false" CellPadding="4"
                BorderWidth="1px" ForeColor="#333333" GridLines="None">
     <AlternatingRowStyle BackColor="White" />
     <FooterStyle BackColor="#990000" ForeColor="White" Font-Bold="True" />
     <HeaderStyle Height="30px" BackColor="#990000" Font-Bold="True" ForeColor="White" />
     <PagerStyle ForeColor="#333333" HorizontalAlign="Center" BackColor="#E2E2E2" />
     <RowStyle CssClass="test" BackColor="#E2E2E2" Height="25px" BorderWidth="1px" ForeColor="#333333" />
     <SelectedRowStyle BackColor="#E2E2E2" Font-Bold="True" ForeColor="Navy" />
     <SortedAscendingCellStyle BackColor="#FDF5AC" />
     <SortedAscendingHeaderStyle BackColor="#4D0000" />
     <SortedDescendingCellStyle BackColor="#FCF6C0" />
     <SortedDescendingHeaderStyle BackColor="#820000" />
</asp:GridView> 
```

这是我的 C# 代码：

```
 GridView1.DataKeyNames = new string[] { PrimaryKey };

 if (dtOutPutResult.Rows.Count > 0)
 {
     foreach (DataColumn dcDtOutPutResult in dtOutPutResult.Columns)
     {
         foreach (DataRow drDtColumns in dtColumns.Rows)
         {
             if (drDtColumns["OrignalColumn"].ToString() == dcDtOutPutResult.ColumnName)
             {
                 BoundField bfield = new BoundField();
                 bfield.DataField = dcDtOutPutResult.ColumnName;
                 bfield.HeaderText = drDtColumns["DisplayColumn"].ToString();
                 GridView1.Columns.Add(bfield);
             }
         }
     }

     foreach (DataRow dr in dtOutPutResult.Rows)
     {
         var buttonField = new ButtonField
         {
             ButtonType = ButtonType.Button,
             Text = "My button",
             CommandName = "DoSomething",
         };
         GridView1.Columns.Add(buttonField);
         break;
     }

     GridView1.DataSource = dtOutPutResult;
     GridView1.DataBind();
     lblMessage.Visible = false;
 }
 else
 {
     GridView1.DataSource = dtOutPutResult;
     GridView1.DataBind();
     lblMessage.Visible = true;
     lblMessage.Style.Add("Color", "Red");
     lblMessage.Text = "No Record Found.";
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:37:11.670

听起来您想添加一个[CommandField](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.commandfield.aspx)。

```
CommandField cField = new CommandField();
cField.EditText = "Edit";
cField.DeleteText = "Delete";
cField.UpdateText = "Update";
cField.CancelText = "Cancel";

cField.ShowEditButton = true;
cField.ShowDeleteButton = true;

GridView1.Columns.Add(cField); 
```

这些按钮将按照您的意愿发送 CommandArgument，并且应该触发 RowCommand 事件（如果您想处理它）。

# android - 背景渐变与每页上的图像相结合

> ID：15429790
> 
> 赞同：1
> 
> 时间：2013-03-15T10:21:04.127
> 
> 标签：android, android-layout, background-image, background-color, android-xml

有没有办法为我的应用程序的背景制作一个带有渐变的 xml 文件，同时将徽标放入其中。

因此，当我设置布局的背景时，我会得到带有徽标的渐变。

当然可以只定义渐变并在每一页上放上徽标，但是我想要完成的方式不是更好吗？

我尝试将两者结合在一个 xml 文件中，但这并没有成功并导致应用程序崩溃。

由 xml 和 logo 创建的渐变是一个图像 1 一个 xml 文件，并在每个页面上使用它。当我更改 background.xml 中的徽标时，我需要在其他所有页面上更改它。

我想使用以下 xml 作为我所有布局的背景

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
<gradient
    android:startColor="#000"
    android:endColor="#008d36"
    android:gradientRadius="326"
    android:type="radial"/>
</shape>

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_marginRight="18dp"
    android:layout_marginTop="89dp"
    android:layout_toLeftOf="@+id/logo"
    android:src="@drawable/logo" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T10:31:49.720

是的，可以从 XML 布局中给出渐变。

但是在您的场景中，您想为徽标添加渐变？

简要说明您的要求。

在 res 中创建 drawable 文件夹并创建 xml 名称为 gradient.xml 并复制这些代码。

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle" >

<gradient
    android:endColor="#008d36"
    android:gradientRadius="326"
    android:startColor="#000"
    android:type="radial" />

</shape> 
```

还要在你的主布局/main.xml 中正确地处理这些代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
   <RelativeLayout
    android:id="@+id/imageView1"
    android:layout_width="100dip"
    android:layout_height="100dip"
    android:background="@drawable/gradient" >

        <ImageView
            android:id="@+id/imageView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:src="@drawable/yourlogoimage" />
    </RelativeLayout>

</LinearLayout> 
```

# python - Blender 脚本：选定顶点的索引

> ID：15429796
> 
> 赞同：8
> 
> 时间：2013-03-15T10:21:15.657
> 
> 标签：python, blender

**问：**在 Blender 2.64 中，我有一个处于编辑模式的网格，其中一些顶点被选中。如何获取或生成 Python 脚本中选定顶点的索引列表？

我发现 Blender Python API 参考非常难以导航，而且 Google 大多指向过时的 API。希望这对于 Blender 脚本专家来说是微不足道的。

索引应与网格的 OBJ 导出中的顶点索引一致。我想编写一个脚本来导出文本文件中的顶点索引，以便在 C++ 程序中访问这些顶点。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-21T00:07:53.607

只有在执行之前切换到对象模式，您的代码才能可靠地工作。原因是在编辑模式下，网格数据与对象模式下的网格不同步。这在您切换回对象模式时完成。您可以通过切换到编辑模式来验证这一点，从您的对象中选择一些顶点，执行您的代码，然后选择不同的顶点（仍处于编辑模式）并再次运行您的脚本。您会注意到 Python 控制台中的选定顶点列表不会改变。此行为[已](http://www.blender.org/documentation/blender_python_api_2_66_4/bmesh.html#bmesh.from_edit_mesh) [记录在案](http://www.blender.org/documentation/blender_python_api_2_63_2/bmesh.html)。要在编辑模式下获取选定的顶点，可以使用以下代码作为第一个指针（使用 2.66.5 r56033 测试）：

```
import bpy
import bmesh

obj=bpy.context.object
if obj.mode == 'EDIT':
    bm=bmesh.from_edit_mesh(obj.data)
    for v in bm.verts:
        if v.select:
            print(v.co)
else:
    print("Object is not in edit mode.") 
```

选择/取消选择节点并执行脚本以查看顶点更改。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-15T12:59:18.580

终于在一个[Blog](http://blenderscripting.blogspot.de/2011/07/getting-index-of-currently-selected.html)中找到了，好看又紧凑：

```
Verts = [i.index for i in bpy.context.active_object.data.vertices if i.select] 
```

它确实与 OBJ 导出 (Blender.2.64) 中的顶点排序一致。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-08-11T16:44:49.480

基于 @hochl 和 @DCS，在编辑模式下，在 Python 控制台中运行以下行：

```
import bmesh; [i.index for i in bmesh.from_edit_mesh(bpy.context.active_object.data).verts if i.select] 
```

*Blender 版本 2.70（2.70，2014 年 4 月 10 日）

# ios - "\P{Letter}" 和 NSRegularExpression

> ID：15429798
> 
> 赞同：0
> 
> 时间：2013-03-15T10:21:27.487
> 
> 标签：ios, objective-c, regex, xcode, nsregularexpression

我有一个 NSString，我想用 NSRegularExpression 进行测试，但它并没有像我预期的那样发挥作用，我也不知道在哪里寻找答案了。

所以这是我的代码：

```
 BOOL companyNameContainsOnlyAuthorizedCharacters = YES;

    NSError *error = nil;
    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"[\P{Letter}]" options:0 error:&error];
    NSArray *matches = [[NSArray alloc] init];
    matches = [regex matchesInString:[model editorName] options:0 range:NSMakeRange(0,[[model editorName] length])];

    if ([matches count] > 0) {

        companyNameContainsOnlyAuthorizedCharacters = NO;

    } 
```

据我所知， [\P{Letter}] 应该匹配除字母之外的任何内容。尽管如此，它只匹配字符“\”、“P”、“{”、“L”、“e”、“t”、“r”和“}”。我也试过不带括号 []，但它根本不匹配任何东西。

任何帮助将不胜感激，在此先感谢您。

编辑：另外，xcode 警告我 \P 是一个未知的转义序列......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:29:51.960

你需要两个反斜杠：

```
regularExpressionWithPattern:@"[\\P{Letter}]" 
```

因为反斜杠本身需要在字符串中转义。

检查“仅字母”的一个可能更简单的解决方案是

```
NSString *stringToTest = ...;
NSCharacterSet *letterCharset = [NSCharacterSet letterCharacterSet];
BOOL lettersOnly = [[stringToTest stringByTrimmingCharactersInSet:letterCharset] length] == 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:35:41.747

你需要两个反斜杠。此外，您不需要将其括在模式括号中。

```
regularExpressionWithPattern:@"\\P{Letter}" 
```

# jquery - jquery获取触发功能以在jquery ui滑块上使用某些鼠标坐标触发

> ID：15429799
> 
> 赞同：1
> 
> 时间：2013-03-15T10:21:47.860
> 
> 标签：jquery, jquery-ui

我不会打扰项目的背景，但我在获取 jquery ui 滑块以使用触发器功能注册点击时遇到问题。

基本上设计规定标签（或任何 dom 元素）位于滑块的顶部。这必须通过调整css中的元素z-index来完成。但是，您随后显然无法单击滑块，因为该元素位于顶部，因此挡住了路，没有任何记录。

我在这里设置了一个小提琴，有助于详细说明问题。基本上我不会让两个滑块在功能上相同（有或没有标签）。

[http://jsfiddle.net/adrianjacob/5StND/](http://jsfiddle.net/adrianjacob/5StND/)

js 参考：

```
$("ul > li").each(function () {

    $(this).children('span').slider({
        value: 100,
        min: 0,
        max: 500,
        step: 25
    });

    $(this).on('click', 'label', function (e) {
        var evt = {
            'type': 'click',
            'pageX': e.pageX,
            'pageY': e.pageY
        };
        $(this).siblings('span.ui-slider').trigger(evt);
    });

}); 
```

干杯，阿迪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:11:32.553

这是一个将 span 元素插入到句柄中的解决方案，因此它保持“连接”到句柄。

```
$(this).children('span')
    .slider({
        value: 100,
        min: 0,
        max: 500,
        step: 25
    })
    .siblings("label")
        .appendTo($(this).find(".ui-slider-handle"))
; 
```

这是[**jsfiddle 的链接**](http://jsfiddle.net/martyk/5StND/5/)

# jquery - 执行另一个动作时调用事件

> ID：15429801
> 
> 赞同：0
> 
> 时间：2013-03-15T10:21:49.420
> 
> 标签：jquery

这是我单击按钮时执行的操作：

```
$('div.my-button').on('click', 'button', function(e) {
        // some code
}); 
```

在执行其他操作时如何调用此事件，例如在按键上？我应该将此事件的代码移动到单独的函数还是可以调用单击或其他什么？

我试图打电话给点击：

```
$('div.my-button').click() 
```

但未执行该操作。

我使用 jquery 1.9+

编辑1：

```
 $('div.my-button').on('click', 'button', function(e) {
        var $this = $(this);
        var request = $.ajax({
            url: "/my_url/",
            type: "POST",
            data: {
                "value": $this.val(),
            },
            success: function(result){
                //some actions
            },
            error: function(result){
                //some actions
            }
        });
    }); 
```

我尝试使用以下方法调用它：

```
 jQuery(document).bind('keydown', 's',function (e){
        $('div.my-button').trigger('click');
    }); 
```

对于绑定键，我使用[jquery.hotkey](https://github.com/jeresig/jquery.hotkeys/blob/master/README.md)

.trigger 对我不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:23:49.957

```
$('div.my-button').trigger('click') ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T10:24:20.417

使用[触发器（）](http://api.jquery.com/trigger/) ...

> 当相应的事件发生时，任何附加了 .on() 或其快捷方法的事件处理程序都会被触发。但是，可以使用 .trigger() 方法手动触发它们。对 .trigger() 的调用以与用户自然触发事件相同的顺序执行处理程序：

```
$('div.my-button button').trigger('click') ; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T10:24:38.413

使用[.triggerHandler](http://api.jquery.com/triggerHandler/)因为您可能不希望发生默认的点击行为或事件传播

```
$('div.my-button button').triggerHandler('click') ; 
```

# bash - 奇怪的 Bash 模式替换行为

> ID：15429810
> 
> 赞同：0
> 
> 时间：2013-03-15T10:22:13.437
> 
> 标签：bash

这个函数`f()`应该非常简单，但它的工作方式令人费解：

```
f() {
  a=(cyan red green blue orange violet)
  shopt -s extglob
  echo 1: -${a[@]/!($1)}-
  echo 2: -${a[@]/!($1)/}-
  echo 3: -${a[@]/!("$1")/}-
  echo 4: -"${a[@]/!($1)/}"-
  echo 5: -${a[@]/!($1)/x}-
}
echo ORANGE
f orange # ends in e like blue
echo YELLOW
f yellow 
```

输出是（请同时注意空白/间距）：

```
ORANGE
1: - e -
2: - e -
3: - e -
4: -    e -
5: -x x x x xe x-
YELLOW
1: - -
2: - -
3: - -
4: -     -
5: -x x x x x x- 
```

为什么只搜索单词的最后一个字符？！（在这种情况`e`下`orange`）

期望的输出`orange`不仅仅是`e`

注意：我也希望在一些我看到*一个*空白的地方看不到*空白*..

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T11:10:55.560

问题是模式没有锚定，例如对于`orange`，不匹配的最长字符串`orange`是`orang`。因此它被移除并且只`e`保留在那里。由于无法在 bash 中指定锚点，因此您必须自己创建它们：

```
#! /bin/bash
f() {
    a=(cyan red green blue orange violet '1 2')
    a=("${a[@]/#/|}")
    a=("${a[@]/%/|}")
    shopt -s extglob
    echo ["${a[@]/|!($1)|/-}"]
}
echo ORANGE
f orange # ends in e like blue
echo YELLOW
f yellow 
```*

# .net - ClaimsPrincipalPermission 和单元测试

> ID：15429811
> 
> 赞同：3
> 
> 时间：2013-03-15T10:22:14.247
> 
> 标签：.net, wif

我喜欢在我的代码中使用 ClaimsPrincipalPermission，但是有一个问题：授权代码干扰了单元测试。

你将如何解决这个问题？在我的脑海中，我可以想到三个解决方案：

*   有一个单独的配置部分用于测试目的，加载一个身份验证管理器，该管理器总是对所有 CheckAccess 调用返回 true
*   将代码片段添加到真正的身份验证管理器中，当单元测试运行时，该代码片段始终对所有 CheckAccess 调用返回 true
*   创建在单元测试中不调用身份验证管理器的自定义授权属性

对于解决方案还有其他建议吗？如果您实施了上述解决方案之一，我很想看看您做了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:36:56.287

使用始终为单元测试返回 true 的自定义 ClaimsAuthorizationManager。

PrincipalPermissions 通常对单元测试不太友好。

# c++ - 为现有的大型 C++ 代码构建图形用户界面

> ID：15429814
> 
> 赞同：0
> 
> 时间：2013-03-15T10:22:22.453
> 
> 标签：c++, swing, qt, user-interface, gtkmm

我目前正在使用一些现有的大型 C++ 代码开发一个工具。我目前正在考虑使用模型-视图-控制器 (MVC) 设计。该模型应包含所有 C++ 代码。视图是用户看到的，而控制器基本上是模型和视图之间的粘合剂。

我正在寻找的功能是：

*   使用 MVC 的可扩展设计
*   文本用户界面 (TUI)、终端和图形用户界面 (GUI) 选项
*   GUI 应该加载一些文本文件
*   GUI 应该使用用户的一些文本输入来运行一些算法并生成一些输出值
*   GUI 最终应该会弹出、保存、显示一些带有 GNU 绘图的图形。
*   C++ 代码在 Eclipse 中运行良好（库、包含、构建选项）
*   及时将新算法添加到 C++ 代码中，这不应该成为一个大问题。

现在我找到了 3 个解决方案：

*   QT -> QT Creator 几乎要求使用 IDE，尽管有 QT 的优点，但从 Eclipse 转到它会很麻烦。QT 似乎也需要围绕 GUI 的奇怪结构，所以我对如何制作控制器感到困惑。eclipse插件目前已经死了，我在QT和诺基亚的FTP上都找不到。
*   GTKmm -> 来自 C，有时有点难以理解为什么需要一些东西。我相信我可以在 MVC 设计中完成这项工作。
*   Java Swing 使用共享库 (JNI) -> 使用 Java 和 C++，这有点奇怪。使用 JNI 可能需要对现有 C++ 代码进行一些额外的工作。

我对 Java Swing 有一些经验，而对 QT 和 GTKmm 几乎没有经验。

那么当我作为一个没有经验的 UI 开发人员已经拥有现有的 C++ 代码时，制作 GUI 的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T17:46:57.497

在您的 3 个选项中，我肯定会选择 Qt。

基本上，要让 Qt 成为一个功能性 GUI，您需要启动某种小部件，然后启动应用程序的事件循环 ( `QApplication`) 。`show()``QApplication::exec()`

[http://qt-project.org/doc/qt-4.8/qapplication.html](http://qt-project.org/doc/qt-4.8/qapplication.html)

[http://qt-project.org/doc/qt-4.8/qapplication.html#exec](http://qt-project.org/doc/qt-4.8/qapplication.html#exec)

Qt 非常灵活且经过深思熟虑，并且拥有强大的追随者。它有令人难以置信的文档。

要与现有的 C++ 数据结构进行交互，只需将它们构造为成员变量，作为 GUI 的主要小部件之一。然后，当您想要访问并显示其上的信息时，它就是小菜一碟。

[http://qt-project.org/doc/qt-4.8/qwidget.html](http://qt-project.org/doc/qt-4.8/qwidget.html)

[http://qt-project.org/doc/qt-4.8/qmainwindow.html](http://qt-project.org/doc/qt-4.8/qmainwindow.html)

Qt 中的大多数 GUI 元素仅充当视图，并且没有任何明确的模型和控制器设置。那是留给开发商的。如果您正在显示数据库或树或项目网格，则存在[模型/视图流](http://qt-project.org/doc/qt-4.8/model-view-programming.html)，但我认为它不适用于您的应用程序。

理解和使用 SIGNALS 和 SLOTS 对于在 Qt 中制作交互式 GUI 至关重要，而且非常轻松。

[http://qt-project.org/doc/qt-4.8/signalsandslots.html](http://qt-project.org/doc/qt-4.8/signalsandslots.html)

[http://qt-project.org/doc/qt-4.8/qobject.html#details](http://qt-project.org/doc/qt-4.8/qobject.html#details)

阅读所有不同类型的 QWidgets，您应该能够找到您在问题中列出的每个元素。

这里有一些你应该看的：

[http://qt-project.org/doc/qt-4.8/qtextstream.html](http://qt-project.org/doc/qt-4.8/qtextstream.html)

[http://qt-project.org/doc/qt-4.8/qtextedit.html](http://qt-project.org/doc/qt-4.8/qtextedit.html)

[http://qt-project.org/doc/qt-4.8/qlineedit.html](http://qt-project.org/doc/qt-4.8/qlineedit.html)

[http://qt-project.org/doc/qt-4.8/qlabel.html](http://qt-project.org/doc/qt-4.8/qlabel.html)

当然，还要查看 Qt 附带的教程和示例。

如何在 Qt 中使用 GNUPlot

[http://lists.trolltech.com/qt-interest/2002-12/thread00068-0.html](http://lists.trolltech.com/qt-interest/2002-12/thread00068-0.html)

此外，作为同时使用 Qt Creator 和 Eclipse 的开发人员，我更喜欢 Qt Creator，并且将项目移植到 Qt Creator 中工作非常简单。如果您想更改 Eclipse 的构建链以使用 Qt 库和 QMake，也可以。

[http://qt-project.org/doc/qt-4.8/qmake-project-files.html](http://qt-project.org/doc/qt-4.8/qmake-project-files.html)

[http://qt-project.org/doc/qt-4.8/qmake-project-files.html#declaring-other-libraries](http://qt-project.org/doc/qt-4.8/qmake-project-files.html#declaring-other-libraries)

[http://therning.org/magnus/archives/1023](http://therning.org/magnus/archives/1023)

我希望这会有所帮助。祝你好运。

# jakarta-ee - 配置参数类以用于开发/生产

> ID：15429819
> 
> 赞同：0
> 
> 时间：2013-03-15T10:22:30.647
> 
> 标签：jakarta-ee, jsf-2

我的课程在开发和生产模式上应该有不同的论据价值。据我所知，我可以`facesconfig.xml`用来传递参数，`ManagedBeans`但我使用注释而不是 *.xml 配置文件，我不想混合这两种解决方案。这样做的最佳解决方案是什么？我想使用内置的 JavaEE/JSF 机制而不是创建新的配置文件。我将不胜感激。

我的应用程序使用 JSF2/JPA 并部署在 OpenShift 服务器上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T10:34:21.740

您可以使用`@ManagedProperty`注释来获取上下文参数：

```
@ManagedProperty(value = "#{initParam['javax.faces.PROJECT_STAGE']}"
private String stage;

// getter and setter 
```

您的`stage`字段将有价值`Development`，或者`Production`根据您的意愿使用它们。

# c# - 清除 TreeView 项 ChildNodes 也会清除父引用？

> ID：15429821
> 
> 赞同：0
> 
> 时间：2013-03-15T10:22:39.727
> 
> 标签：c#, asp.net, treeview

我正在开发一个 ASP.NET 4.0 Web 应用程序，并且我正在使用 TreeView 控件。我有一个问题，我真的不明白为什么会这样。我有与树项目关联的复选框。

如果未选中该复选框，则一切正常，但是当我执行以下行时：

```
node.ChildNodes.Clear(); 
```

如果选中该节点的复选框，则在 Clear() 之后 node.Parent 为空。如果未选中，则 parent 仍然正确。我真的不明白为什么清除子节点集合也会清除我的父引用。我实际上没有在此调用中使用或修改选中的属性。我也 100% 确定我的父母也不是我节点的孩子（如果检查与否，为什么会有所不同）。

为了使代码按预期工作，我需要使用的解决方法是：

```
TreeNode[] checkedNodes = new TreeNode[tvResults.CheckedNodes.Count];
tvResults.CheckedNodes.CopyTo(checkedNodes, 0);
foreach (TreeNode checkedNode in checkedNodes) // Uncheck all nodes temporary.
    checkedNode.Checked = false;

node.ChildNodes.Clear(); // Now it is ok to clear and parent is "saved".

foreach (TreeNode checkedNode in checkedNodes) // Recheck all checked nodes again.
    checkedNode.Checked = true; 
```

有人知道这个问题吗？

谢谢， 马蒂亚斯

PS！请善待，这是我有史以来的第一个问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:25:57.213

下面是来自 ASP.NET `TreeNodeCollection.Clear`（来自 .NET 4.5）的代码。如您所见，它确实清除了所有已检查的节点而不执行任何验证。所以这是设计使然（而是设计上的错误），而不是代码中的错误。我的建议是添加一个扩展方法来执行您在问题中列出的解决方法，以便您可以轻松地重用它。

```
// System.Web.UI.WebControls.TreeNodeCollection
/// <summary>Empties the <see cref="T:System.Web.UI.WebControls.TreeNodeCollection" /> object.</summary>
public void Clear()
{
if (this.Count == 0)
{
    return;
}
if (this._owner != null)
{
    TreeView owner = this._owner.Owner;
    if (owner != null)
    {
        if (owner.CheckedNodes.Count != 0)
        {
            owner.CheckedNodes.Clear();
        }
        for (TreeNode treeNode = owner.SelectedNode; treeNode != null; treeNode = treeNode.Parent)
        {
            if (this.Contains(treeNode))
            {
                owner.SetSelectedNode(null);
                break;
            }
        }
    }
}
foreach (TreeNode current in this._list)
{
    current.SetParent(null);
}
this._list.Clear();
this._version++;
if (this._isTrackingViewState)
{
    this.Log.Clear();
}
this.Log.Add(new TreeNodeCollection.LogItem(TreeNodeCollection.LogItemType.Clear, 0, this._isTrackingViewState));
} 
```

# css - IE 不显示页边距

> ID：15429823
> 
> 赞同：0
> 
> 时间：2013-03-15T10:22:47.477
> 
> 标签：css, internet-explorer, google-chrome, margin

我刚刚让开发人员重新设计我的网站，我注意到了一件事。在谷歌浏览器中，我的网页周围有一个很好的边距，大约 2"。但在 IE 上，页面一直到页面的边缘，使页面看起来超级大。我希望它们在页面周围都有一个边距.我正在谈论的网页是，[网页设计报价](http://www.fourquotes.co.uk/webdesign)。我需要在 CSS 中更改代码吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:32:50.843

此链接将向您展示如何制作“响应式网页设计”，使其适合所有分辨率。

[http://blog.teamtreehouse.com/beginners-guide-to-responsive-web-design](http://blog.teamtreehouse.com/beginners-guide-to-responsive-web-design)

* * *

你可以试试这个。当它在 IE 中不起作用时，它可以帮助你

```
body {
    margin:50px 0px; padding:0px;
    text-align:center;
    }

#Content {
    width:500px;
    margin:0px auto;
    text-align:left;
    padding:15px;
    border:1px dashed #333;
    background-color:#eee;
    } 
```

在您的身体中，您提供边距，在您的内容中，您执行自动边距。

如此处所述：http: [//bluerobot.com/web/css/center1.html](http://bluerobot.com/web/css/center1.html)

# angularjs - 为什么这个资源在使用 $delete 方法后没有更新视图

> ID：15429825
> 
> 赞同：6
> 
> 时间：2013-03-15T10:23:01.293
> 
> 标签：angularjs

在我的角度应用程序中，我有一个控制器，如下所示：

```
function TemplateListControl($scope, TemplateService){
    $scope.templates = TemplateService.get(); // Get objects from resource

    // Delete Method
    $scope.deleteTemplate = function(id){
        $scope.templates.$delete({id: id});
    }
} 
```

在视图中，我有一个绑定到`templates`模型的表。如下：

```
<table ng-model="templates">
    <thead>
        <tr>
            <th style="width:40%">Title</th>
            <th style="width:40%">controls</th>
        </tr>
    <thead>
    <tbody>
        <tr ng-repeat="template in templates">
            <td>
                <!-- Link to template details page -->
                <a href="#/template/[[template.id]]">
                    [[template.title]]
                </a>
            </td>
            <td>
                <!-- Link to template details page -->
                <a class="btn btn-primary btn-small"
                   href="#/template/[[template.id]]">Edit
                </a>
                <!-- Link to delete this template -->
                <a class="btn btn-primary btn-small"
                   ng-click="deleteTemplate(template.id)">Delete
                </a>
            </td>
        </tr>
    </tbody>
</table> 
```

现在，当我单击上述模板中的删除链接时，它会调用该`deleteTemplate`方法并成功`DELETE`调用 REST api。`$scope.templates = TemplateService.get();`但是视图在刷新并再次启动之前不会更新。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-11T15:26:12.710

我更喜欢使用承诺而不是回调。Promise 是处理异步进程的新方法。您可以在结果从服务器返回后立即使用 apromise 检查结果。

```
//Controller
myApp.controller('MyController',
    function MyController($scope, $log, myDataService) {

 $scope.entities = myDataService.getAll();
 $scope.removeEntity = function (entity) {       
        var promise = myDataService.deleteEntity(entity.id);
        promise.then(
            // success
            function (response) {
                $log.info(response);
                if (response.status == true) {
                    $scope.entities.pop(entity);
                }
            },
            // fail
            function (response) {
                $log.info(response);
                // other logic goes here
            }
        );
    };
 });

 //DataService
 myApp.factory('myDataService', function ($log, $q, $resource) {

return {
    getAll: function () {
        var deferred = $q.defer();
        $resource('/api/EntityController').query(
            function (meetings) {
                deferred.resolve(meetings);
            },
            function (response) {
                deferred.reject(response);
            });

        return deferred.promise;
    },

    deleteEntity: function (entityId) {
        var deferred = $q.defer();
        $resource('/api/EntityController').delete({ id: entityId},
            function (response) {
                deferred.resolve(response);
            },
            function (response) {
                deferred.reject(response);
            });

        return deferred.promise;
    }
   };
});

//Web API Controller
public class MeetingController : BaseApiController
{
   // .... code omited 

   public OperationStatus Delete(int entityId)
    {
        return _repository.Delete(_repository.Single<MyEntity>(e => e.EntityID == entityId));
    }
} 
```

注意：$log、$q、$resource 是内置在服务中的。希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T11:10:36.700

您还必须更新客户端，因此修改您的源代码如下

```
 ng-click="deleteTemplate($index)">

$scope.delete = function ( idx ) {
  var templateid = $scope.templates[idx];

  API.Deletetemplate({ id: templateid.id }, function (success) {
    $scope.templates.splice(idx, 1);
  });
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-11T12:37:41.550

您可以将回调函数传递给 $resource.$delete

```
function TemplateListControl($scope, TemplateService){
  $scope.templates = TemplateService.get(); // Get objects from resource

  // Delete Method
  $scope.deleteTemplate = function(id){
    TemplateService.$delete({id: id}, function(data) {
      $scope.templates = data;
    });
  }
} 
```

**注意** 如果您的 REST API 删除函数返回一个数组，您必须在 Angular $resource 中设置 isArray: true 以避免 AngularJS $resource 错误 - *TypeError: Object # has no method 'push'*

```
$resource(URL, {}, {
  delete: {method:'DELETE', isArray: true}
}); 
```

# triggers - 如何以编程方式单击剑道树视图节点

> ID：15429831
> 
> 赞同：-4
> 
> 时间：2013-03-15T10:23:14.863
> 
> 标签：triggers, click, kendo-ui, kendo-treeview

如何以编程方式单击剑道树视图节点”？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:39:42.223

[在Kendo API 参考](http://docs.kendoui.com/api/web/treeview#methods-select)上有一些很好的信息

这是有关如何以编程方式选择节点的摘录。

> 选择 HTML id="firstItem" 的节点
> 
> ```
> var treeView = $("#treeView").data("kendoTreeView");
> treeView.select($("#firstItem")); 
> ```
> 
> 选择树视图中的第一个节点
> 
> ```
> var treeView = $("#treeView").data("kendoTreeView");
> treeView.select(".k-item:first"); 
> ```

# c - Flex Bison：构建 C 编译器 - 错误消息中的行号

> ID：15429834
> 
> 赞同：2
> 
> 时间：2013-03-15T10:23:27.150
> 
> 标签：c, compiler-construction, bison, flex-lexer

当我尝试在 yyerror 函数中打印行号时，出现错误。我在 OSX 上工作。

（compiler.l 中的行号）

```
%{

#include "compiler.tab.h"
int lineNumber = 1;

%}
%%

int { return INT; }
float { return FLOAT; }
void { return VOID; }
do { return DO; }
while { return WHILE; }
if { return IF; }
return { return RETURN; }
else { return ELSE; }
\/\/(.)* { return COMMENT; }
\/\*(.)*\*\/ { return COMMENT; }
[a-zA-Z][a-zA-Z0-9_]* { return IDENT; }
[0-9]+\.[0-9]+ { sscanf(yytext, "%lf", &yylval.reell); return FVAL; }
[0-9]+ { yylval.integer = atoi(yytext); return IVAL; }
\( { return OPA; }
\) { return CPA; }
\{ { return OB; }
\} { return CP; }
\; { return SEMICOLON; }
\, { return COMMA; }
\! { return NOT; }
\-\- { return DECREMENT; }
\+\+ { return INCREMENT; }
\<\< { return LSHIFT; }
\=\= { return EQUALS; }
\<\= { return LTOE; }
\>\= { return GTOE; }
\&\& { return AND; }
\|\| { return OR; }
\= { return ASSIGNMENT; }
\< { return LT; }
\> { return GT; }
\/ { return DIVIDE; }
\* { return MULTIPLY; }
\+ { return PLUS; }
\- { return MINUS; }
[ ]+ { return BLNK; }
[\n]* { ++lineNumber; return NL; }

%% 
```

编译器.c

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include "compiler.h"

extern int lineNumber;

int main (void)
{
    yyparse();
    return 0;
}

void yyerror(char * str)
{
    fprintf(stderr, "Error: %s, Line %d\n", str, lineNumber);
} 
```

我收到以下错误消息：

> 架构 x86_64 的未定义符号：“_lineNumber”，引用自：compiler.o 中的 _yyerror ld：未找到架构 x86_64 的符号 collect2：ld 返回 1 个退出状态

这是我用来编译的命令（shell 文件）：

```
#!/bin/bash

flex  compiler.l
bison -d compiler.y

gcc -g -c compiler.tab.c -o compiler_y.o
gcc -g -Wall -std=c99 -c lex.yy.c
gcc -g -c compiler.tab.c -o compiler_y.o

gcc -g -Wall -std=c99 -c compiler.c
gcc -g -o compiler compiler.o compiler_y.o lex.yy.o -lm -lfl 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T13:43:23.410

您可以`%option yylineno`在 flex 源中使用，然后变量`int yylineno`将给出当前标记的行号。注意不要使用`yylineno`语法（bison/yacc），因为标记器通常在解析器之前。如果要在解析器中使用行号，通常行号附加到标记上，因此解析器可以通过标记进行访问。

该错误消息可能是由于未链接到`compiler.tab.o`，通过在其`compiler.l`上运行`flex`然后将其传递给 C 编译器而获得的。

# tfs - 使用 TeamCity 在 TFS 中构建版本分支

> ID：15429835
> 
> 赞同：2
> 
> 时间：2013-03-15T10:23:30.147
> 
> 标签：tfs, continuous-integration, teamcity

我正在考虑使用 TeamCity 7.1 作为我们的构建服务器，并且我试图弄清楚是否可以做我想做的事情。

我们的 TFS 分支看起来像这样

*   我的项目
    *   标签
        *   1.0.0.0
        *   1.1.0.0
        *   2.0.0.0
    *   树干

所以我们的过程是在主干中工作，当我们到达我们想要部署的点时，我们使用该代码创建一个分支。在上面的示例中，版本 2.0.0.0 正在生产中，并且主干对其进行了进一步的更改。因此，如果我需要修复生产中的错误，那么我将在 2.0.0.0 分支中修复它。

我能够建立一个检查主干、运行测试等的构建，没有任何问题，并且它可以通过签入主干来触发。但我还想监控所有版本特定的分支，这样当我在 2.0.0.0 分支中检入错误修复时，就会触发构建，并运行我的所有测试。

似乎一些 VCS 选项添加了一个新功能来支持这个称为“分支规范”（[https://tom.cabanski.com/2012/11/19/teamcity-7-1-branch-builds-rock /](https://tom.cabanski.com/2012/11/19/teamcity-7-1-branch-builds-rock/) ) 但在 TFS VCS 根上不可用。

是否可以在不为我的每个版本分支创建单独的构建配置的情况下执行此操作？或者有没有办法通过使用我现有的主干构建配置来手动启动特定分支的构建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:14:55.333

由于 TeamCity 中的 TFS 不支持“功能分支”（目前仅适用于 Git 和 Mercurial），因此创建单独的构建配置是构建单独分支的最佳方式。实际上，即使对于 Git 和 Mercurial，也建议为长期版本分支（而不是来来去去的特性分支）创建单独的构建配置。

我不确定 TFS 中如何处理分支，但如果您使用标签，我相信无法在 TeamCity ( [TW-7370](https://youtrack.jetbrains.com/issue/TW-7370) ) 中构建 TFS 标签。

# database - 在 Hibernate 中自动或手动创建表？

> ID：15429837
> 
> 赞同：0
> 
> 时间：2013-03-15T10:23:30.930
> 
> 标签：database, hibernate, production-environment

我目前正在开发一个 servlet 主页（spring + hibernate + mysql）。我目前使用 Hibernate 属性 hibernate.hbm2ddl.auto 设置更新。这工作正常，Hibernate 创建和更新我的表。但是，我已经在多个地方读到过，不建议在生产中这样做，而且不安全。但是如果我不设置这个选项，我的表就不会创建，我真的不想在服务器上手动创建我的表。我一个人做这件事的时间有限。

这通常是怎么做的？似乎手动添加所有表是相当多的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:30:44.680

在生产环境中，您通常已经拥有包含大量数据的现有表，这些数据不想丢失，并且想要迁移到新架构。Hibernate 无法自动为您执行此操作。它不知道以前在 A 列中的数据现在必须在新 B 列中。

因此，您需要创建一个迁移脚本。当然，您可以在开发中使用 Hibernate 为您生成新的模式，看看与旧模式的区别是什么，并因此创建您的脚本。但是，是的，将应用程序投入生产并进行迁移需要完成一些工作。

# iphone - 从 URL 解析 Xml 并保存到 IOS 中的文档目录

> ID：15429847
> 
> 赞同：-1
> 
> 时间：2013-03-15T10:23:54.653
> 
> 标签：iphone, ios, objective-c, cocoa-touch

大家好，任何人都可以向我推荐任何有关“如何从 URL 下载 XML，将其作为 XML 文件存储在文档文件夹中”的教程，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:30:58.767

下面的代码会帮助你。

```
NSString *URLString = @"http://www.Sample.com/Sample.xml";
NSURL *URL = [NSURL URLWithString:
          [URLString stringByAddingPercentEscapesUsingEncoding:
           NSASCIIStringEncoding]];

NSData *xmldata = [NSData dataWithContentsOfURL:URL];

NSString *documentsDir =[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
NSString *path = [documentsDir stringByAppendingPathComponent:@"savedxml.xml"];
[xmldata writeToFile:storePath atomically:TRUE]; 
```

希望这可以帮助 ！！！

# php - PHP, MYsql, Codeigniter

> ID：15429851
> 
> 赞同：0
> 
> 时间：2013-03-15T10:24:01.533
> 
> 标签：php, mysql, codeigniter

我有一张桌子

```
CREATE TABLE IF NOT EXISTS forum_comments (
comment_id int(11) NOT NULL AUTO_INCREMENT,
comment_by int(11) NOT NULL,
topic_id int(11) NOT NULL,
parent int(11) NOT NULL DEFAULT '0',
comment text NOT NULL,
commented_date datetime NOT NULL,
commented_type enum('user','admin') NOT NULL DEFAULT 'user',
level int(11) NOT NULL DEFAULT '1',
status enum('publish','unpublish','block') NOT NULL,
PRIMARY KEY (comment_id)
) 
```

`comment_by`是发表评论的用户 id 是发表评论的用户 ID
`topic_id`如果
`parent`评论是对其他评论的回复
`comment`是评论文本
`level`是评论的深度（1 到 n 级），1 是针对主题的第一级评论。

评论深度可以是第 n 级。我需要一个查询来按主题 ID 获取评论。

```
select * from forum_comments where topic_id = 1 
```

我想按主题 id 检索所有评论，但评论应该有回复，这些回复也存储在带有“父”的评论表中（父表示该回复发布到的原始评论 id）并且所有评论和回复都应该采用树视图格式因为我需要以树格式显示评论。

```
1 Comment (main comment with "parent" 0)
  2 reply (reply with "parent" 1)
    3 reply (reply with "parent" 2)
       4 reply (reply with "parent" 3) 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:33:16.470

所以试试这样

```
SELECT * FROM forum_comments WHERE comment_id = 1 ORDER BY comment_id ASC 
```

或者您也可以尝试使用日期

```
SELECT * FROM forum_comments WHERE comment_id = 1 ORDER BY comment_date ASC 
```

# android - Android：Lint 说 - 布局文件中引用的类，在项目或库中找不到

> ID：15429852
> 
> 赞同：19
> 
> 时间：2013-03-15T10:24:02.577
> 
> 标签：android, lint

在我的应用程序中，我正在使用[Pull TO Refresh 列表视](https://github.com/chrisbanes/Android-PullToRefresh)图库。我分别为所有屏幕设计了布局。当我在我的项目上运行 lint 时，在我的 xlarge 屏幕布局文件之一中，它给了我致命错误：

> 在项目或库中找不到布局文件 com.handmark.pulltorefresh.library.PullToRefreshListView 中引用的类

在其他屏幕的相同布局文件中，它完全没有错误。此外，我在文件的其他布局中使用了相同的库，它没有给出任何错误。它也为`Google Maps`api 提供相同的错误。我的项目以 Google Api 16 级为目标，我已经检查过，所有库都已添加到其中。但是，即使在清洁项目中，错误也不会消失。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-11T12:08:17.480

这是一个 lint 错误，您可以放心地忽略它。Lint 旨在提供帮助，而不是阻碍您的开发时间。将 lint Errors 更改为警告，您就可以正常编译和运行该应用程序。我不建议将其关闭，因为它有助于保持代码更干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-18T11:48:10.257

制作一个项目`Project -> Clean...`，为我重置错误错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-30T08:37:43.700

我也遇到了类似的错误，对我来说，它是通过添加`android.enableJetifier=true`到**gradle.properties**来解决的。

# c# - 从庞大的数据库中选择 id

> ID：15429853
> 
> 赞同：3
> 
> 时间：2013-03-15T10:24:03.827
> 
> 标签：c#, sql, sql-server

我有一个超过 3,000,000 行的数据库，每行都有一个带有 varchar(6000) 的 id 和 xml 字段。

如果我这样做`SELECT id FROM bigtable`，则需要 +- 2 分钟才能完成。有什么方法可以在 30 秒内完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T10:25:58.273

在 id 列上构建聚集索引

请参阅[http://msdn.microsoft.com/en-us/library/ms186342.aspx](http://msdn.microsoft.com/en-us/library/ms186342.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T10:25:20.757

您可以将索引应用于您的表。在您的情况下是聚集索引。

**聚集索引：**

[http://msdn.microsoft.com/en-gb/library/aa933131(v=sql.80).aspx](http://msdn.microsoft.com/en-gb/library/aa933131(v=sql.80).aspx)

我还建议过滤您的查询，这样它就不会每次都返回所有 300 万行，这可以通过使用`TOP`or来完成`WHERE`。

**最佳：**

```
SELECT TOP 1000 ID
FROM bigtable 
```

**在哪里：**

```
SELECT ID FROM
bigtable
WHERE id IN (1,2,3,4,5) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:58:15.973

您可以[索引](https://www.simple-talk.com/sql/learn-sql-server/sql-server-index-basics/)您的表以获得更好的性能。

您还可以使用其他选项来提高性能，例如[分区](http://msdn.microsoft.com/en-gb/library/ms190787.aspx)功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T10:29:21.323

首先，300 万条记录不会构成“巨大”表。

要优化您的查询，您应该执行以下操作。

> 1.  过滤您的查询，为什么需要获取所有 ID？
> 2.  为 ID 列创建聚集索引，以便在指向选定行之前先搜索一个较小的查找表。

有用的线程，[这里](https://stackoverflow.com/questions/10025569/improve-sql-server-query-performance-on-large-tables)和[这里](https://stackoverflow.com/questions/337744/whats-your-approach-for-optimizing-large-tables-1m-rows-on-sql-server)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T10:36:24.890

好吧，你为什么要重新调整所有的`Id`s 给客户端？

即使您的表没有聚集索引（我怀疑），绝大多数处理时间将在客户端，`Id`通过网络传输值并将它们显示在屏幕上。

查询所有值反而会破坏拥有查询引擎的意义。

* * *

我能想到（也许我缺乏想象力）获取所有`Id`s 的唯一原因是某种被误导的缓存。

如果你想知道很多你有做

```
SELECT count(*) FROM [bigtable] 
```

如果你想知道是否`Id`存在做

```
SELECT count([Id[) FROM [bigtable] WHERE [Id] = 1 /* or some other Id */ 
```

这将返回 1 行，其中 1 或 0 表示指定的存在`Id`。

这两个查询都将极大地受益于聚集索引，`Id`并将返回最少的数据和最多的信息。

这两个查询都将在 30 秒内返回，如果您有一个聚集索引，则在 30 毫秒内返回`Id`

选择所有`Id`s 将不会提供比这些查询更有用的信息，它所实现的只是对您的网络和客户端的锻炼。

# iphone - UITableView scrollIndicator 位置不正确

> ID：15429854
> 
> 赞同：8
> 
> 时间：2013-03-15T10:24:04.323
> 
> 标签：iphone, objective-c, uitableview, scroll

所以我有一个`UITableView`. 它的数据源是`NSArray`搜索后加载的自定义对象。当我滚动到底部时，一切正常，根据`scrollIndicator`需要滚动到底部。

现在，当我滚动回顶部时，scrollIndicator 在 UINavigationbar 下方约 50 像素处停止。

我不知道为什么这种行为只发生在 this 中`tableViewController`，因为我`UITabBarController`由 5 个组成，`UITableViewcontrollers`每个都继承自同一个超类。任何帮助表示赞赏，在此先感谢:)

**编辑：**

将以下代码放入`viewWillAppear:`

```
self.tableView.scrollIndicatorInsets   = UIEdgeInsetsMake(0, 0, 0, 0); 
```

解决了这个问题。虽然我仍然不知道为什么这个问题只出现在五个 tableViewController 之一中......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T11:00:33.650

看起来您可能`scrollIndicatorInsets` 错误地设置了滚动视图的属性。底部和顶部可能相同。设置它，以便您只有底部的边距。

即`UIEdgeInsetMake( <top> , <left>,<bottom>,<right>);`用于此。即你的情况

```
yourScrollView.scrollIndicatorInsets   = UIEdgeInsetMake(0, 0,bottomInset,0); //Here bottom inset would be the value you have right now . 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T10:56:08.877

作为`UITableView's`超类`UIScrollView`，最好将`UIScrollView's` `scrollIndicatorInsets`属性设置为所需位置。

# grails - 无法在 Grails 2.2 中为具有枚举的域创建视图

> ID：15429855
> 
> 赞同：0
> 
> 时间：2013-03-15T10:24:10.043
> 
> 标签：grails, enums

我在 windows pc 上使用 Grails 2.2.0 (Groovy 2)、Java 1.7。我有一个简单的测试 Grails 项目，只有三个域类。

我在使用枚举创建域视图时遇到问题。

这是我的代码：

```
package com.testapp

class Visit {

    enum States { ACCEPTED, DECLINED, COMPLETED, IGNORED }
    States state = States.ACCEPTED

    String name

    static constraints = {
    }
} 
```

当我运行时： generate-all com.testapp.Visit 或 generate-views com.testapp.VisitType 它不会创建任何视图并在控制台上给出以下错误，

```
| Error Error executing script GenerateViews: (class: com/testapp/VisitType$States, method: getGormPersistentEntity signature: ()Lorg/grails/datastore/mapping/model/PersistentEntity;) Incompatible type for getting or setting field (Use --stacktrace to see the full trace) 
```

我在这里有点迷路，我是grails的新手。请你指出我正确的方向，我哪里错了？你也知道我如何在 GGTS 中看到 Stacktrace 吗？

非常感谢ish

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:14:35.170

```
public Enum State {

    ACCEPTED, DECLINED, COMPLETED, IGNORED 
}

public class Visit {

    State state = State.ACCEPTED

    String name
} 
```

# android - LinearLayout 不会填满屏幕的宽度

> ID：15429857
> 
> 赞同：0
> 
> 时间：2013-03-15T10:24:18.717
> 
> 标签：android, layout, dynamic

我一直在研究 StackOverflow 上的一堆示例来创建动态布局。我已经取得了一些进展，但现在停滞在一个特定的错误上。

如何使此代码填充父级的宽度？

```
 LinearLayout masterLayout = (LinearLayout) findViewById(R.id.button_views);

        for(int i=0; i<(launchers.length/3+1); i++){
        layout[i] = new LinearLayout(getBaseContext());
        layout[i].setLayoutParams(new LinearLayout.LayoutParams(
                ViewGroup.LayoutParams.FILL_PARENT,
                ViewGroup.LayoutParams.WRAP_CONTENT));
        layout[i].setWeightSum(3);

            for(int i1=0; i1<(3); i1++){

                launchers[i1] = new Button(this);
                launchers[i1].setText(titles[i1]);
                launchers[i1].setLayoutParams(new LinearLayout.LayoutParams(
                    ViewGroup.LayoutParams.WRAP_CONTENT,
                        ViewGroup.LayoutParams.WRAP_CONTENT));
                launchers[i1].setOnClickListener(this);
                layout[i].addView(launchers[i1]);
            }
            masterLayout.addView(layout[i]); 
```

该代码主要按需要工作，我缺少的部分是按钮的宽度均匀，并且在屏幕的整个长度上均匀分布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:06:23.737

发现 LinearLayout.LayoutParams 在其末尾有一个权重选项。这是适合屏幕宽度的动态按钮布局系统的最终代码。

```
 LinearLayout masterLayout = (LinearLayout) findViewById(R.id.button_views);

    for(int i=0; i<(launchers.length/3+1); i++){
    layout[i] = new LinearLayout(getBaseContext());
    layout[i].setLayoutParams(new LinearLayout.LayoutParams(
            ViewGroup.LayoutParams.FILL_PARENT,
            ViewGroup.LayoutParams.WRAP_CONTENT));
    layout[i].setWeightSum(3);

        for(int i1=0; i1<(3); i1++){

            launchers[i1] = new Button(this);
            launchers[i1].setText(titles[i1]);
            launchers[i1].setLayoutParams(new LinearLayout.LayoutParams(
                ViewGroup.LayoutParams.FILL_PARENT,
                    ViewGroup.LayoutParams.WRAP_CONTENT, 1.0f));
            launchers[i1].setOnClickListener(this);
            layout[i].addView(launchers[i1]);
        }
        masterLayout.addView(layout[i]); 
```

如果有人想尝试的话，有什么方法可以让按钮始终是方形的……

# mysql - 获取品牌名称和部门名称

> ID：15429866
> 
> 赞同：0
> 
> 时间：2013-03-15T10:24:35.203
> 
> 标签：mysql

第一个是具有brand_id 及其名称的品牌表。第二个表是部门表，其中包含 dept_id n 它的名称和第三个表 product_details 表，其中包含brand_id、dept_id、site_id 和site_name。

我想要特定品牌的品牌名称、部门名称和网站数量。

我尝试了这个查询，但它返回的brand_id 和dept_id 而不是brand_name 和dept_name，因为product_details 表不包含brand_name 和dept_name。

按brand_id从product_details组中选择department_id,brand_id,count(site_id)；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:27:23.947

加入您的表格：

```
SELECT   dept_name, brand_name, COUNT(*)
FROM     product_details
    JOIN department USING (dept_id)
    JOIN brand      USING (brand_id)
GROUP BY dept_id, brand_id 
```

# ios - 在 UITabBarController 中实现注销按钮

> ID：15429872
> 
> 赞同：-3
> 
> 时间：2013-03-15T10:24:41.400
> 
> 标签：ios, objective-c, ipad, tabbarcontroller

我有一个 iPad 应用程序，其初始视图为登录屏幕视图控制器。

登录后，会出现一个带有 3 个视图控制器选项卡的选项卡栏控制器。我想添加第 4 个选项卡，用作注销按钮。我该如何实施？

我尝试创建一个自定义标签栏控制器类，但我不知道之后该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:28:10.203

只需在、 添加按钮或任何您想使用的注销功能中添加另一个项目 ( `viewController`) 。`UITabBarController`如果您确实添加了 3 个选项卡，那么添加第 4 个选项卡有什么问题？

# c# - 为什么交叉线程以这种方式工作？

> ID：15429873
> 
> 赞同：10
> 
> 时间：2013-03-15T10:24:52.563
> 
> 标签：c#, winforms, multithreading

## 解决了

看来奥利弗是对的。经过几次尝试后，我得到了异常，并且在调试模式下我确定了。所以这必须与时间有关。您还应该检查 Matthew wattsons 的答案；）

## 例子

首先是一个小例子，可以解释我的困惑。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Threading;

namespace testCrossThreading
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            new Thread(ThreadJob).Start();
        }

        void ThreadJob()
        {
            //label1.Text = "1";
            changeText(label1, "1");
        }

        void changeText(Label L, String message)
        {
            L.Text = message;
        }
    }
} 
```

## 问题

所以现在我的问题是：如果我`label1.Text = "1";`在函数“ThreadJob”中取消注释，那么我会按预期得到一个跨线程异常。但是，如果我留下评论，就像示例显示它确实有效。但为什么？该函数由子线程调用，我不调用任何东西。因此，更改标签 imo 文本的仍然是子线程，而不是 GUI 线程。还是我错过了什么？

我会这样写。

```
void ThreadJob()
        {
            Action a = () => label1.Text = "1";
            this.Invoke(a);
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T10:34:45.940

我认为这只是一个时间问题。如果您尝试从非 gui 线程更新 gui 元素，**则可能**会引发跨线程异常。您甚至可以通过调用禁用整个跨线程异常

```
Form.CheckForIllegalCrossThreadCalls = false; 
```

但是在异常消失后，进一步的行为是未定义的，并且可能导致非常微妙的错误。因此，将异常作为代码异味的提示，但请注意，有时即使应该抛出异常也不会抛出异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T10:42:36.133

我*认为*您可能有竞争条件，这就是结果不同的原因。

如果您尝试更改`Text`当前未显示的控件的属性，则 .Net 不关心哪个线程更改它。

在您的代码中，您从构造函数启动一个线程。在设置属性的线程中的代码执行之前，实际显示表单的代码可能已经显示，也可能不显示。

当你调用一个额外的函数来设置属性时，时间会改变并暴露竞争条件。

您可以通过`Thread.Sleep(100)`在`ThreadJob()`.

# c++ - 为什么在前向声明后会出现未定义的类型错误？

> ID：15429876
> 
> 赞同：2
> 
> 时间：2013-03-15T10:25:01.843
> 
> 标签：c++, .net, visual-c++, c++-cli

我在 C++ CLI 中使用此代码。但是，这应该与 C++ 没有任何区别。
我正在寻找摆脱该错误的解决方案。

代码 ：

```
ref class B;
ref class A;

public ref class A
{
public:
    A() {}
    B^ b;
    void HelloFromA(){
        b->HelloFromB();
    }
};

public ref class B
{
public :
    A^ a;
    B() {}
    void HelloFromB(){
        a->HelloFromA();
    }
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T10:27:07.423

您需要将调用前向声明的类上的成员函数的函数的主体移到标头之外的位置，以便定义可用：

```
void A::HelloFromA(){
    b->HelloFromB();
} 
```

否则，编译器知道它`B`是可用的，但它不知道它`B`具有`HelloFromB`不带参数的成员函数。

# javascript - 等待触摸动作，为什么？

> ID：15429877
> 
> 赞同：1
> 
> 时间：2013-03-15T10:25:02.440
> 
> 标签：javascript, touch, dom-events, flexslider

我正在开发一个基于触摸的 JS 应用程序，我研究了 Flex 和 Royal 滑块作为示例。我注意到两个滑块在获取`touchmove`事件时的行为相似：

```
var started,touched ;
el.bind('touchstart',function(e){
    started = Number(new Date()) ;
    // Get pageX and pageY etc...
}) ;
el.bind('touchmove',function(e){
    touched = Number(new Date()) ;
    if (started-touched > 500) {
        // Handle touch moves etc...
    }
}) ; 
```

没有这些，我的 JS 应用程序可以无缝运行，但为什么他们需要这样做呢？为什么他们要等待 500 毫秒才能获取移动数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:53:16.547

我相信这是某种**灵敏度**设置。如果用户在设备上移动他或她的手指至少 500 毫秒（在此示例中），您只想注册一个触摸移动（拖动）事件。

这对于区分点击和拖动可能很有用。否则，如果用户在点击按钮时会稍微移动他/她的手指，那么应用程序也会记录一次拖动。由于某些控件同时接受这两个事件，这可能会导致错误行为。

# google-chrome - 插入阴影声明不适用于最新的 Chrome？

> ID：15429880
> 
> 赞同：1
> 
> 时间：2013-03-15T10:25:08.927
> 
> 标签：google-chrome, css

铬版本：25.0.1364.172

编码：

```
<div style="
  border: 2px solid black;
  width: 100px;
  height: 100px;
-webkit-box-shadow: inset 0px 5px 8px -10px red, inset 0px -5px 8px -10px red;
">
</div> 
```

任何人都可以试一试吗？

使用此代码，我希望仅在 TOP 和 BOTTOM 上有嵌入的阴影。

没有骰子。

[http://jsfiddle.net/ngZNv/](http://jsfiddle.net/ngZNv/)

如果它对您也不起作用，您能否建议一种可能的替代方法？

这个声明似乎（或多或少）有效：

```
 -webkit-box-shadow: inset 0px 1px 0px red, inset 0px -1px 0px red; 
```

但这是一个明显不同的解释。

总结一下：这适用于Mozilla（没有前缀）：

```
box-shadow: inset 0px 5px 8px -10px red, inset 0px -5px 8px -10px red; 
```

铬没有运气。

请指教

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T10:34:40.930

似乎 -10px 正在阻止显示阴影，该值正在改变阴影的传播，因此，它是负数没有多大意义。不确定你打算让它看起来像什么。`10px`但是，如果您将它们更改为而不是，它至少是可见的`-10px`。

```
<div style="
  border: 2px solid black;
  width: 100px;
  height: 100px;
-webkit-box-shadow: inset 0px 5px 8px 10px red, inset 0px -5px 8px 10px red;
">
</div> 
```

用法如下：

`box-shadow: [inset] <horizontal-offset> <vertical-offset> [blur] [spread] [color];`

编辑：

这是否与您想要的效果相似？

`-webkit-box-shadow: inset 0px 5px 10px -5px #F00, inset 0px -5px 10px -5px #F00;`

# javascript - Javascript 滑块和响应式设计

> ID：15429881
> 
> 赞同：0
> 
> 时间：2013-03-15T10:25:17.900
> 
> 标签：javascript, jquery, css, bxslider

我有一个运行良好的媒体查询，除了当用户调整窗口大小时，jQuery 滑块上的图像不会调整大小，直到用户手动刷新页面。我知道滑块（[http://bxslider.com/](http://bxslider.com/)）在呈现页面时获取窗口大小，而不是在运行中。以前有人经历过同样的事情吗？

所有帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:30:01.887

好吧，因为您使用的是 jQuery，您可以检查正在调整大小的窗口，然后重新加载滑块。

事件挂钩是：

```
window.onresize = function(event) {
    //Now reload your slider from the link in your post it seems like it's:
     $('.bxslider').bxSlider();
} 
```

# .htaccess - 链接不会使用 mod_rewrite 指向正确的页面

> ID：15429891
> 
> 赞同：1
> 
> 时间：2013-03-15T10:25:37.227
> 
> 标签：.htaccess, mod-rewrite

我刚刚开始尝试重写我所有的网站 URL，但我不明白这一点。在我的 htaccess 文件中，我有以下代码：

```
RewriteEngine On
RewriteBase /
RewriteRule ^tjanster/([^/.]+)/?$ tjanster.php?page=$1 [L] 
```

例如，当我点击链接时

```
<a href="tjanster/rackochskapbyggnation/tjanster.php?page=design">Design</a> 
```

它应该去，`mypage.com/tjanster/design`但它没有它仍然去

```
mypage.com/tjanster/rackochskapbyggnation/tjanster.php?page=design 
```

但是，如果我`mypage.com/tjanster/design`直接在 URL 中写入，它会转到页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:31:30.223

不，它不是以这种方式工作的，而是相反：

```
<a href="tjanster/design">Design</a> 
```

会导致`tjanster/rackochskapbyggnation/tjanster.php?page=design`.

mod_rewrite 的想法之一是处理此类不存在的 URI 请求并将它们转换为现有的请求，使您能够美化您拥有的 URL 或隐藏某些特定的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:34:58.160

您必须在 PHP 中进行试验才能弄清楚，但您也可以让 PHP 在直接访问时重定向到有效的 URL。

该代码可能如下所示：

```
<?php
if (preg_match('~^/tjanster/rackochskapbyggnation/tjanster\/.php~i', $_SERVER['REQUEST_URI'])) {
    if (isset($_GET['page'])) {
        header('Location: /tjanster/' . $_GET['page']);
    } else {
        header('Location: /tjanster/');
    }
    exit;
} 
```

此代码查看`REQUEST_URI`变量以查看请求的 URL 是否看起来像正在直接访问脚本，如果是，则重定向到漂亮的页面结构。您还必须保留您的重写规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:38:03.060

尝试这个 ：

RewriteRule tjanster.php?page=(.*) tjanster/$1 [L]

第一个参数是输入的uri，第二个怎么改写 $1 指的是()里面的数据

# javascript - 如何确定是否在 JavaScript Date 实例中指定了小时和分钟？

> ID：15429892
> 
> 赞同：1
> 
> 时间：2013-03-15T10:25:37.677
> 
> 标签：javascript, date

如何确定是否在 JavaScript Date 实例中指定了小时和分钟？

没有小时：分钟的日期对象：

```
var date = new Date('2013-03-15');
date.getHours();
> 1
date.getMinutes();
> 0 
```

当我指定默认小时：分钟（01:00）时，返回似乎是相同的。

```
var date2 = new Date('2013-03-15 01:00');
date2.getHours();
> 1
date2.getMinutes();
> 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:52:26.790

那`+1`是因为应用了*您的本地*时区偏移量。奥斯陆是欧洲中部时间，因此从 UTC +1。

. `getHours()`根据本地时间返回指定日期的小时 (0-23) - 请参阅[MDN 日期文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)。

您可以使用 。`getUTCHours()`改为返回非本地化时间。

或者，您可以`.getTime()`使用返回毫秒且不受时区影响的我们，然后除以`86400000`（一天中的毫秒数），如果您得到一个整数，则小时、分钟、秒都为 0。

例如：

```
d = new Date(2013, 2, 15)
if (d.getTime() / 86400000 % 1 === 0) // date is midnight 
```

注意：从[如何检查数字是浮点数还是整数？](https://stackoverflow.com/questions/3885817/how-to-check-if-a-number-is-float-or-integer)

# c++ - 在控制台视觉 C++ 实时图形

> ID：15429893
> 
> 赞同：-1
> 
> 时间：2013-03-15T10:25:39.647
> 
> 标签：c++, graph, console-application, real-time

我想根据传感器的结果制作图表，我从 arduino 板上读取传感器。我在 VC++ 2010 中使用控制台应用程序。

但是在我在谷歌中搜索之后，从控制台应用程序中制作图表似乎是不可能的。

是否有任何库或其他应用程序可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:31:20.213

您*可以*在控制台程序中制作图形，但它们必须使用 ASCII 而不是图形。像这样的东西：

```
是
^
| *
| * *
| * *
| * * *
+-------> X
  美国广播公司

```

如果您想要一个“正确的”图形应用程序，则必须在创建项目时使用另一种项目类型。

不幸的是，如果您拥有 Visual Studio 的 Express 版本，您将无法真正轻松地制作 GUI 应用程序，您必须制作一个 WIN32 项目并自己处理 GUI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:43:57.950

您不能在 Visual Studio 控制台应用程序中真正做图形。您最好的选择是将您的应用程序移植到 Win32 或 .Net

或者，如果你真的想留在控制台，你可以回到老派的 Turbo C++ 并在那里进行图形编程。提示：graphics.h

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:28:32.077

如果您不使用 VC++ 2010 的 Express 版本，则创建 MFC Dialog 应用程序可能会更容易 - 这将为您提供一个简单的 GUI，您可以使用它来开始创建图形。

# java - Android - 卡在正在运行的项目中

> ID：15429895
> 
> 赞同：0
> 
> 时间：2013-03-15T10:25:46.677
> 
> 标签：java, android, android-emulator

我正在为平板设备开发 Android 应用程序。当我运行 My 时，我主要在控制台中得到一个错误，如下所示

```
[2013-03-15 15:52:01 - Gprs] Failed to install Gprs.apk on device 'emulator-5554!
[2013-03-15 15:52:01 - Gprs] (null)
[2013-03-15 15:52:01 - Gprs] Launch canceled! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T11:20:04.257

**我认为以下任何一种选择都可以：**

1.  尝试更改 ADB 连接超时。我认为默认值为**5000**毫秒，我们需要将其更改为**10000 毫秒**才能解决问题。如果您在 Eclipse 中，您可以通过 Window -> Preferences 执行此操作，然后它位于 Android 下的 DDMS 中。

2.  重启设备。

3.  增加 SD 卡容量和最大 VM 应用程序堆大小。为此，编辑虚拟设备并进行修改。仿真器参数的任何更改及其重建也很好。

4.  构建应用程序。然后使用命令提示符安装 apk。亚行安装

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:32:03.953

尝试更改**ADB 连接超时**。

默认 - 5000 毫秒

将其更改为 10000 毫秒

如果您在 Eclipse 中，您可以通过**Window -> Preferences**来完成此操作，然后它位于**Android 下的 DDMS**中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:29:44.823

您可以尝试以下步骤：
尝试更改 ADB 连接超时。如果您在 Eclipse 中，您可以通过 Window -> Preferences 执行此操作，然后它位于 Android 下的 DDMS 中。默认为 5 秒，尝试将其设为 10 秒。

如果这不起作用，请重新启动您的设备

或者试试，

```
adb kill-server
adb start-server 
```

来自命令行的命令。

# javascript - 依次导航到一个页面并再次导航到另一个页面

> ID：15429899
> 
> 赞同：0
> 
> 时间：2013-03-15T10:25:57.137
> 
> 标签：javascript, jquery

我想使用`window.open`链接打开一个页面以点击 servlet，并且我需要从中点击另一个 servlet 链接，但值得注意的是我无法修改这些 servlet 中的任何内容。

我是否可以使用 Javascript 或 jQuery 从我的第一个 JSP 页面本身进行这两个导航？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:31:42.330

在 serverJsp.jsp 的最后添加此代码（在您完成所有其他代码之后）。

```
 response.sendRedirect("page2.jsp"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:32:32.560

我可能会尝试避免将这样的序列暴露给浏览器，你能在服务器端完成这一切吗？

如果网络浏览器的连接速度较慢，那么所有这些请求都会对性能造成很大影响。

或者，如果您需要在浏览器中执行此操作，请让服务器返回一个 http 301 状态代码，其中包含标头中的 location 字段，以引用您希望浏览器访问的下一个位置。

使用状态码方法对浏览器来说是最轻的，如果你涉及到必须解释 javascipt 的浏览器，它会慢很多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:28:39.767

使用该`window.onload`事件打开您的其他 servlet 页面。

# javascript - 图像缩放大小取决于浏览器大小

> ID：15429903
> 
> 赞同：0
> 
> 时间：2013-03-15T10:26:02.263
> 
> 标签：javascript, html, css

以本站为例：[http ://www.reebok.com/en-GB/](http://www.reebok.com/en-GB/)

标题 div 高度根据浏览器的大小进行调整，内部内容具有 100% 的高度和宽度。

这是由javascript控制的吗？这只能用CSS来完成吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T10:28:53.987

你只能在 html & css 的帮助下做到这一点。像这样写：

```
img{
 width:100%;
 height:auto;
} 
```

检查这个[http://jsfiddle.net/e8V47/](http://jsfiddle.net/e8V47/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T10:33:26.393

在您的页面中，实际上使用的是 Javascript。

容器的高度被内联修改（`style`属性）

```
<div class="module module-hero use-full-width displayed" data-module="Hero" style="height: 232px;"> 
```

然而，可以用 CSS 做类似的事情，使用`%`高度。例如 ：

```
.module{
   height:40%;        // A percentage relative to the parent element
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:32:25.130

您的示例中的图像是由浏览器调整的，它在 中，如果您只设置宽度或高度，浏览器会自动调整另一个。

# c++ - 复制初始化变量时， const 限定符有用吗？

> ID：15429904
> 
> 赞同：4
> 
> 时间：2013-03-15T10:26:07.193
> 
> 标签：c++

我想知道在使用值的副本`const`初始化**非引用/指针变量时使用可选限定符有哪些优点和缺点：**

例如：

*   `void f(const T v)`代替`void f(T v) // v does not need to be changed`
*   `if (const int err = f()) {/*...*/}` 代替`if (int err = f()) {/*...*/}`
*   甚至`void f() {const T* const v = p; /*...*/}`代替`void f() {const T* v = p; /*...*/}`

只是风格问题吗？C++11 标准在其示例中使用了什么？不能`const`提示编译器将变量存储在一些特殊的只读内存中（在某些实现中）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:32:01.533

在这种情况下`const`，这是对您自己的一种提醒，这个变量不应该改变。这样以后（可能很久以后），当您需要修改此函数时，您不会意外更改变量并破坏此函数中依赖于变量不变性的其他代码。如果变量类型（类）具有平凡的构造函数，编译器只会将`const`变量存储在只读内存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T10:37:44.900

`const`在这 3 种情况下，意味着您无法更改变量。但是如果你把它排除在外，编译器仍然会看到你没有改变变量。现代编译器将检查对变量的所有分配，并发现只有一个初始化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T10:45:11.473

不，这毫无价值。没有基于`const`. 将此类变量声明为`const`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T10:38:46.320

像这样的函数原型：

```
void f(const T& arg); 
```

对调用者说：*“我不会更改传递的参数，尽管你通过引用传递它”*。

但是对于按值传递：

```
void f(const T arg); 
```

调用者看不到对传递参数的更改，因为正在创建副本，因此对于调用者来说，不管它是否存在都没有区别`const`。但它说：*“创建参数的副本后，在执行此函数期间此副本不会更改”*，当您想确保将实现此函数的人将其视为持续的。

但是除了使您的代码设计更容易被将来阅读它的人理解之外，使用`const`限定符在这里没有多大意义。

# sql-server-2008 - 如何在 sql server 2008 中的表的所有列中允许 null？

> ID：15429908
> 
> 赞同：0
> 
> 时间：2013-03-15T10:26:25.727
> 
> 标签：sql-server-2008, sql-server-2008-r2

我有一个空表，其中所有列都设置为“NOT NULL”。我想在不重新创建表的情况下将其设置为 ALLOW NULL。

我该怎么做呢 ？我正在使用 SQL Server 2008 r2 和管理工作室。

**编辑** -我想将所有列设置为允许 null 而不必知道列的数据类型。也就是说，将 all 设置为 null，同时保持数据类型与以前相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:40:30.137

ALTER COLUMN 指定要更改或更改的命名列。修改后的列不能是以下任何一项：

具有时间戳数据类型的列。

• 表的ROWGUIDCOL。

• 计算列或在计算列中使用。

• 在索引中使用，除非列是 varchar、nvarchar 或 varbinary 数据类型，数据类型未更改，新大小等于或大于旧大小，并且索引不是 PRIMARY 的结果键约束。

• 用于由 CREATE STATISTICS 语句生成的统计信息，除非列是 varchar、nvarchar 或 varbinary 数据类型，数据类型未更改，并且新大小等于或大于旧大小，或者列是从不为空更改为空。首先，使用 DROP STATISTICS 语句删除统计信息。查询优化器自动生成的统计信息由 ALTER COLUMN 自动删除。

• 在PRIMARY KEY 或[FOREIGN KEY] REFERENCES 约束中使用。

• 在CHECK 或UNIQUE 约束中使用。但是，允许更改 CHECK 或 UNIQUE 约束中使用的可变长度列的长度。

• 与默认定义相关联。但是，如果不更改数据类型，则可以更改列的长度、精度或小数位数。

只能通过以下方式更改 text、ntext 和 image 列的数据类型： ◦ text 为 varchar(max)、nvarchar(max) 或 xml

◦ ntext 到 varchar(max)、nvarchar(max) 或 xml

◦ 图像到 varbinary(max)

某些数据类型更改可能会导致数据发生更改。例如，将 nchar 或 nvarchar 列更改为 char 或 varchar 可能会导致扩展字符的转换。有关详细信息，请参阅 CAST 和 CONVERT (Transact-SQL)。降低列的精度或小数位数可能会导致数据截断。

分区表的列的数据类型不能更改。

该文档可以在这里找到：http: [//msdn.microsoft.com/en-us/library/ms190273 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms190273(v=sql.105).aspx)

# ruby - 有人可以解释这种heroku行为吗？

> ID：15429909
> 
> 赞同：1
> 
> 时间：2013-03-15T10:26:30.690
> 
> 标签：ruby, heroku, eventmachine

这是我的代码`config.ru`：

```
require 'rubygems'
require 'bundler'
Bundler.require
require 'faye'

$stdout.sync = true

EM.synchrony do

  EM.error_handler do |e|
    puts e.message
    puts e.backtrace
  end

  Faye::WebSocket.load_adapter('thin')

  o_faye_server = Faye::RackAdapter.new(:mount => '/faye', :timeout => 15)

  puts "Running thin with update"
  thin = Rack::Handler.get("thin")

  thin.run(o_faye_server,:Port => ENV["PORT"].to_i)
  puts "Thin started on #{ENV["PORT"]}"

  EM.add_periodic_timer(120) do
    Fiber.new do
      puts "Output"
    end.resume
  end
end 
```

在应用程序日志中，我看到：

```
2013-03-15T10:10:52+00:00 app[web.1]: Running thin with update
2013-03-15T10:10:52+00:00 app[web.1]: >> Thin web server (v1.5.0 codename Knife)
2013-03-15T10:10:52+00:00 app[web.1]: >> Maximum connections set to 1024
2013-03-15T10:10:52+00:00 app[web.1]: >> Listening on 0.0.0.0:21453, CTRL+C to stop
2013-03-15T10:10:52+00:00 app[web.1]: Thin started on 21453
2013-03-15T10:10:52+00:00 app[web.1]: Output
2013-03-15T10:10:54+00:00 heroku[web.1]: Process exited with status 0 
```

EventMachine 已停止，但 Faye 应用程序继续为 Web 请求提供服务。为什么会这样？其他时候，当我推送代码时，我会看到如下内容：

```
2013-03-15T10:24:47+00:00 app[web.1]: Running thin with update
2013-03-15T10:24:47+00:00 app[web.1]: >> Thin web server (v1.5.0 codename Knife)
2013-03-15T10:24:47+00:00 app[web.1]: >> Maximum connections set to 1024
2013-03-15T10:24:47+00:00 app[web.1]: >> Listening on 0.0.0.0:32679, CTRL+C to stop
2013-03-15T10:24:47+00:00 app[web.1]: Thin started on 32679
2013-03-15T10:24:47+00:00 app[web.1]: Output
2013-03-15T10:24:47+00:00 app[web.1]: Output
2013-03-15T10:24:47+00:00 app[web.1]: Output
2013-03-15T10:24:47+00:00 app[web.1]: Output
2013-03-15T10:24:47+00:00 app[web.1]: Output
2013-03-15T10:24:47+00:00 app[web.1]: Output 
```

它要么以一种奇怪的方式将它们排队，要么没有正确地停止发布之间的过程。有没有人遇到过这个？

# java - 如何在php中读取字节数组

> ID：15429910
> 
> 赞同：1
> 
> 时间：2013-03-15T10:26:31.543
> 
> 标签：java, php

我正在使用以下代码向服务器发送一个 mp3 文件。在服务器中，我想要一个 php 代码来接收这个 mp3 字节数组并将其转换为文件并将其存储在那里。

```
try {
    final ByteArrayOutputStream out = new ByteArrayOutputStream();
    File file = new File(Environment.getExternalStorageDirectory()+ "/my.mp3");
    final InputStream in = new FileInputStream(file);
    final byte[] buf = new byte[2048];
    int n;
    while ((n = in.read(buf)) >= 0) {
        out.write(buf, 0, n);
    }
    final byte[] data = out.toByteArray();
    String urlString = "http://10.0.0.56/upload.php";
    HttpPost postRequest = new HttpPost(urlString);
    postRequest.setEntity(new ByteArrayEntity(data));
    HttpClient client = new DefaultHttpClient();
    HttpResponse response = client.execute(postRequest);
    HttpEntity entity = response.getEntity();
    InputStream ins = entity.getContent();
    BufferedReader br = new BufferedReader(new InputStreamReader(ins));
    String temp_str;
    StringBuilder sb = new StringBuilder();
    while((temp_str = br.readLine()) != null) {
        sb.append(temp_str);
    }
    Log.e("response", sb.toString());
} catch (Exception e) {
    // handle exception here
    Log.e(e.getClass().getName(), e.getMessage());
    return "exception";
} 
```

任何人都知道如何使用 php 读取 mp3 文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T10:53:00.877

您的 upload.php 可能如下所示：

```
$mp3_bin = file_get_contents('php://input');
file_put_contents( '/path/to/my/mp3', $mp3_bin ); 
```

简短而甜蜜；）

编辑：

```
# A bit of golfing gives a one liner:
file_put_contents('/path/to/my.mp3', file_get_contents('php://input')); 
```

# json - “要写入流的字节超过指定的 Content-Length 字节大小”，使用 UTF8 编码的 json

> ID：15429911
> 
> 赞同：4
> 
> 时间：2013-03-15T10:26:33.433
> 
> 标签：json, utf-8, mandrill

在将 JSON 对象发送到 Mandrill API 时，我遇到了编码问题。在使用 UTF8 编码写入流写入器时，会引发以下异常：

“要写入流的字节超过指定的 Content-Length 字节大小。” 并紧随其后：“在写入所有字节之前无法关闭流。”

这是用于发送 JSON 对象的代码部分：

```
var httpWebRequest = (HttpWebRequest)WebRequest.Create(mandrillUrl + "/messages/send.json");
httpWebRequest.ContentType = "application/json";
httpWebRequest.Method = "POST";
var ser = new DataContractJsonSerializer(wrapper.GetType());
var ms = new MemoryStream();
ser.WriteObject(ms, wrapper);

var json = Encoding.UTF8.GetString(ms.ToArray());
httpWebRequest.ContentLength = json.Length;
var stream = httpWebRequest.GetRequestStream();

using (var strWriter = new StreamWriter(stream, Encoding.UTF8))
{
 strWriter.Write(json);
}

var httpResponse = (HttpWebResponse)httpWebRequest.GetResponse();
using (var streamReader = new StreamReader(httpResponse.GetResponseStream()))
{
 var responseText = streamReader.ReadToEnd();
} 
```

在我看来，这个错误与 UTF8 中的字节长度有关，但即使我将 httpWebRequest.ContentLength 值加倍，我仍然会得到同样的错误。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-15T11:52:50.617

`Content-Length`必须以字节指定，而不是`char`s

```
var json = Encoding.UTF8.GetString(ms.ToArray());
httpWebRequest.ContentLength = Encoding.UTF8.GetByteCount(json); 
```

# php - 在升序列表中查找缺失的数字

> ID：15429912
> 
> 赞同：0
> 
> 时间：2013-03-15T10:26:40.120
> 
> 标签：php, math, directory

如果有 2 个文件夹名称`1`和`3`in `./path/1` `./path/3`，现在我尝试添加一个新文件夹，但是如何对已经存在的文件夹名称进行排序并找到缺少的数字是`2`？

```
<?php 
    $file = 0;
    $folder = 0;
    $dir = new RecursiveDirectoryIterator('./img/product/tmp', FilesystemIterator::SKIP_DOTS);
    $it  = new RecursiveIteratorIterator($dir, RecursiveIteratorIterator::SELF_FIRST);
    $it->setMaxDepth(0);
    foreach ($it as $fileinfo) {
        if ($fileinfo->isDir()) {
            printf("Folder - %s\n", $fileinfo->getFilename());
            $folder++;
        } elseif ($fileinfo->isFile()) {
            printf("File From %s - %s\n", $it->getSubPath(), $fileinfo->getFilename());
            $file++;
        }
    }

    if(/* find the missing number */){
        $folder_new = //missing number
        $dir = './path/'.$folder_new;
        if(!is_dir($dir)){
        mkdir($dir);
    }else{
        $folder_new = $folder+1;
        $dir = './path/'.$folder_new;
        if(!is_dir($dir)){
            mkdir($dir);
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:39:55.583

基本上：

```
$root = $_SERVER['DOCUMENT_ROOT']; // '.' doesn't work on the backend for going to the root.
$path = "$root/path/";

$dirs = glob("$path*"); // this creates an array with everything inside $path
sort($dirs); //you wanted the directories sorted

//deleting the files (not dirs)
foreach($dirs as $k => $dir){
    if(!is_dir($dir)){
        unset($dirs[$k]);
    }
}

$max = array_max($dirs); //folder number with the highest number as name.

// this is the part finding out what number is missing
    for($i = 0; $i <= $max; $i++){
        if(!is_dir($path.$i){
            mkdir($path.$i);
        }
    } 
```

没有测试，只是从我的脑海中写出来的，希望它对你有用:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:49:04.427

你想做这样的事情吗？

```
<?php

$to = 5;

for ($i = 1; $i <= $to; $i++) {
  echo '<br/>';
  $my_path = dirname(__FILE__) . '/path/' . $i;
  if (!is_dir($my_path)) {
    echo $i . ' dir not exist ';
    if (mkdir($my_path, 0777)) {
      echo $i . ' dir created ';
    } else {
      echo $i . ' dir not created ';
    }
  } else {
    echo $i . ' dir already exists ';
  }
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:40:40.770

我会认为，如果您可以获取目录（./path）中的文件夹列表，那么您可以比较以查看存在哪些目录：

```
for ( $i = 0; $i < 100; $i++ ) {
  if (  ! is_dir( './path/' . $i ) ) {
    mkdir( './path/' . $i );
  }
} 
```

# jquery - 选择具有指定类的第一个元素，如果没有选择另一个元素

> ID：15429913
> 
> 赞同：2
> 
> 时间：2013-03-15T10:26:47.027
> 
> 标签：jquery

我正在尝试突出显示 div 内带有“main”类的第一个链接，如果没有，只需突出显示第一个链接

IE：

```
<div class="group1">
 <a href="product1">product1</a>
 <a href="product2" class="main">product2</a>
 <a href="product3">product3</a>
</div>

<div class="group2">
 <a href="product1">product1</a>
 <a href="product2">product2</a>
 <a href="product3">product3</a>
</div> 
```

所以 in`group1 product2`将成为`group2`亮点`product1`

现在我正在这样做：

```
 obj=$('.group2 a.main').first();
 if (obj.length==0) {obj=$('.group2 a').first();}
 obj.css('color','red'); 
```

但我想知道是否有更紧凑的方法来做到这一点。

```
$('.group1 a.main,.group1 a').first().css('color','red') 
```

不起作用，因为 jquery 按文档顺序返回元素，这会给出错误的结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:38:35.413

试试这个：

```
var obj = $('div[class^="group"]');
obj.each(function(){
   if($('a',this).hasClass('main')){
      $('.main').css('color','red');
   }else{
      $('a:first',this).css('color','red');
   }
}); 
```

### [小提琴](http://jsfiddle.net/NV68M/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:31:48.763

```
$(function(){  
    // Iterating over each div
    $('div').each(function(){  

       if($(this).find('a.main:first').length){
         // If any hyperlink with class main is present
         $(this).find('a.main:first').css({'color':'red'});
       }else{
         // Select any hyperlink
         $(this).find('a:first').css({'color':'red'});
       }

    });   
 }); 
```

[**现场演示**](http://jsfiddle.net/h27w4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:28:32.430

首先使用伪类：

```
$('.group2 a.main:first').css({'color':'red'}); 
```

或者使用变量它应该是：

```
$obj = $('.group2 a.main:first');
if(!$obj.length)
    $obj = $('.group2 a:first');
$obj.css('color','red'); 
```

如果您需要在每个组上执行此操作，那将给出：

```
$('div[class^=group]').each(function(i, e) { 
    $obj = $(e).find('a.main:first');
    if(!$obj.length)
        $obj = $(e).find('a:first');
    $obj.css('color','red');
}); 
```

看到这个[小提琴](http://jsfiddle.net/soyuka/MMGM4/2/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T10:27:46.477

尝试

```
 obj=$('.group2 a.main').eq(0).css({'color':'red'}); 
```

或者

```
obj=$('.group2 a.main').eq(0).style('color','red'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T10:37:41.603

```
$('div[class^=group] a')
    .filter(':has(a.main) a.main, :not(:has(a.main)) a:first-child')
    .css({color:'red'}) 
```

如此处所示：http: [//jsfiddle.net/6AWmq/2/](http://jsfiddle.net/6AWmq/2/)

# iphone - 在 iPhone 中使用 AFNetworking 下载队列中的文件

> ID：15429915
> 
> 赞同：3
> 
> 时间：2013-03-15T10:26:55.083
> 
> 标签：iphone, ios, sdk, afnetworking

我需要在队列中下载多个文件。现在我的代码正在运行并且所有文件正在同时下载，但是我需要一次下载一个文件，并且所有其他文件都在队列中，下面是代码，请让我知道我做错了什么。我只需要一次下载一个文件，所有其他文件都应该在队列中。

```
 AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:videoURL];
         [httpClient.operationQueue setMaxConcurrentOperationCount:1];
         for (NSURL *videoString in videoArray) {

             NSURLRequest *request = [NSURLRequest requestWithURL:videoString];

             AFDownloadRequestOperation *operation = [[AFDownloadRequestOperation alloc] initWithRequest:request targetPath:path shouldResume:YES];
             [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
                 if(operation.response.statusCode == 200) {

                     UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Alert" message:@"Successfully Downloaded" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
                     [alertView show];

                  }

             }failure:^(AFHTTPRequestOperation *operation, NSError *error) {

                 if(operation.response.statusCode!= 200) {

                     UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Alert" message:@"Error While Downloaded" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
                     [alertView show];
                 }
             }];

             [httpClient enqueueHTTPRequestOperation:operation];

             [operation setProgressiveDownloadProgressBlock:^(NSInteger bytesRead, long long totalBytesRead, long long totalBytesExpected, long long totalBytesReadForFile, long long totalBytesExpectedToReadForFile) {

                 float percentDone = ((float)totalBytesRead) / totalBytesExpectedToReadForFile;

                 }
             }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:42:19.773

要将队列一次限制为一个操作，

您可以在排队之前尝试在每个操作之间添加依赖项。

像这样

`[Operation2 addDependency:Operation1];`

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:53:12.350

在块之后使用调度队列（GCD）`setCompletionBlockWithSuccess:`

像以下方式：

```
 dispatch_async(dispatch_get_main_queue(), ^{
// Call any method from on the instance that created the operation here.
  [self doSomework]; // example
 }); 
```

# jquery - FullCalendar - 一页上的所有月份？

> ID：15429922
> 
> 赞同：2
> 
> 时间：2013-03-15T10:27:19.623
> 
> 标签：jquery, jquery-plugins, fullcalendar

我找不到使用**FullCalendar 插件**在页面上显示从一月到十二月的所有月份的方法。我想看起来像这样： ![在此处输入图像描述](../Images/9e56863f2c1a3eba0d9cdb681aa2c31b.png)

每个月我想把它调整到大约 250px

我试过这段代码，它没有调整大小`width to 250px`：

```
$('#calendarJan').fullCalendar({
          editable: false,
          events: 'ajax-calender.php?month=jan',
          height: 50,
          eventAfterRender: function(event, element, view) {
                     $(element).css('width','250px');
               }
}); 
```

HTML

```
 <div style='background-color:white; padding:5px;'>
   <div id='calendarJan'></div>
   <div id='calendarFeb'></div>
   <div id='calendarMar'></div>
  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:29:02.630

尝试设置您要放置的 div 的宽度.. 像这样：

```
document.getElementById('calendarJan').setAttribute("style", "width: 250px"); 
```

# android - 禁用 youtube api 的全屏

> ID：15429928
> 
> 赞同：14
> 
> 时间：2013-03-15T10:27:31.347
> 
> 标签：android, youtube, fullscreen

我有一个带有片段的应用程序，在这些片段中我有框架布局，我在其中添加了 YouTubePlayerSupportFragment。但是当我单击全屏时，会引发此异常：

> java.lang.RuntimeException：无法启动活动 ComponentInfo{com.example.xxx/com.example.xxx.MainActivity}：java.lang.IllegalArgumentException：找不到 id 0x7f040039 的视图（com.example.xxx:id/frame_youtube）对于片段 YouTubePlayerSupportFragment{4282a068 #11 id=0x7f040039}

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2015-01-29T07:55:04.413

或者您可以通过 1 行禁用它：

```
player.setShowFullscreenButton(false); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-20T17:19:04.770

我遇到了同样的问题，并找到了一种对我有用的方法来处理它。在`OnInitializedListener()`片段中，我这样做：

```
@Override
public void onInitializationSuccess(Provider arg0,
final YouTubePlayer player, boolean arg2) {
//Tell the player you want to control the fullscreen change
player.setFullscreenControlFlags(YouTubePlayer.FULLSCREEN_FLAG_CUSTOM_LAYOUT);
//Tell the player how to control the change
player.setOnFullscreenListener(new OnFullscreenListener(){
@Override
public void onFullscreen(boolean arg0) {                    
// do full screen stuff here, or don't. I started a YouTubeStandalonePlayer 
// to go to full screen
}});

}}); 
```

而且我仍然遇到错误，因为我使用*YouTubeStandalonePlayer*来处理我的全屏，所以我通过调用解决了这个问题

```
finish(); 
```

在我`OnPause()`的活动中。请记住，如果您的用户点击后退按钮，您将不会回到您离开的地方。您还可以通过意图将用户发送到 YouTube 应用程序，这在我测试时不需要`finish()`OnPause，但不适合我的需求以及独立播放器。

**编辑：**如果要删除全屏按钮，也可以像这样设置播放器样式：

```
PlayerStyle style = PlayerStyle.MINIMAL;
player.setPlayerStyle(style); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-05T06:52:21.623

1.  如果要**全屏显示**，`youTubePlayer.setFullscreen(true);`

2.  如果您想在全屏或竖屏模式下**隐藏全屏按钮**`youTubePlayer.setShowFullscreenButton(false);`

3.  您还可以使用最新 API 中提供的 PlayerStyle 选项

*   `YouTubePlayer.PlayerStyle.CHROMELESS` 一种不显示交互式播放器控件的样式。（无控制）

*   `YouTubePlayer.PlayerStyle.DEFAULT` 默认样式，显示所有交互控件。（所有控件）

*   `YouTubePlayer.PlayerStyle.MINIMAL` 极简风格，仅显示时间栏和播放/暂停控件。（只能暂停/播放）

# objective-c - 可拖动的 MKPinAnnotationView 不起作用。draggable = YES，callout有title和subtitle，setCoordinate实现

> ID：15429929
> 
> 赞同：0
> 
> 时间：2013-03-15T10:27:32.417
> 
> 标签：objective-c, iphone, ios6, mapkit

当我尝试拖动图钉时，它不会移动。当我触摸它时，它会变暗。但是，它永远不会抬起，也永远不会移动。

这是我的注释类的头文件：

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>
#import <Parse/Parse.h>

@interface GeoPointAnnotation : NSObject <MKAnnotation>

- (id)initWithObject:(PFObject *)aObject;

@property (nonatomic, readwrite, assign) CLLocationCoordinate2D coordinate;
@property (nonatomic, readonly, copy) NSString *title;
@property (nonatomic, readonly, copy) NSString *subtitle;

- (void)setCoordinate:(CLLocationCoordinate2D)newCoordinate;

@end 
```

这是我在视图控制器中创建注释的地方：

```
- (void)updateMap
{
    [self.mapView removeAnnotations:self.mapView.annotations];

    PFGeoPoint *geoPoint = [self.post location];

    // center the map around the geopoint
    [self.mapView setRegion:MKCoordinateRegionMake(
       CLLocationCoordinate2DMake(geoPoint.latitude, geoPoint.longitude),
       MKCoordinateSpanMake(0.01, 0.01)
       )];

    GeoPointAnnotation *annotation = [[GeoPointAnnotation alloc] initWithObject:self.post.object];
    [self.mapView addAnnotation:annotation];
}

// from Geolocations by Parse
#pragma mark - MKMapViewDelegate

- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation {
    static NSString *GeoPointAnnotationIdentifier = @"RedPin";

    MKPinAnnotationView *annotationView = (MKPinAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:GeoPointAnnotationIdentifier];

    if (!annotationView) {
        annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:GeoPointAnnotationIdentifier];
        annotationView.pinColor = MKPinAnnotationColorRed;
        annotationView.canShowCallout = YES;
        annotationView.draggable = YES;
        annotationView.animatesDrop = YES;
    }

    return annotationView;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:36:05.190

Found the problem: I forgot to hook up the Map View's delegate in my Storyboard xib. h/t Nitin Gohel - thanks!

# java - Java 时间戳 - 添加五分钟

> ID：15429931
> 
> 赞同：32
> 
> 时间：2013-03-15T10:27:41.453
> 
> 标签：java

寻找一些我正在处理的Java代码的帮助，我有以下代码可以打印出日期和时间：

```
 Date dNow = new Date( ); // Instantiate a Date object
  SimpleDateFormat ft = new SimpleDateFormat ("MMM d, yyyy k:mm:ss");  // Time at server 
```

结果：2013年3月15日10:19:48

我正在创建一个 javascript 计数器来使用这个数字并从 5 分钟开始倒计时。所以我需要在 Java 中的当前日期时间上增加 5 分钟。

所以，如果当前日期时间是：Mar 15, 2013 10:19:48

我需要向 Java 添加 5 分钟以便打印出来：2013 年 3 月 15 日 10:24:48

有任何想法吗？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-03-15T10:30:23.870

而不是从

```
new Date() 
```

从...开始

```
new Date(System.currentTimeMillis() + TimeUnit.MINUTES.toMillis(5)) 
```

这将为您提供一个`Date`代表您所需时间点的实例。您无需更改代码的任何其他部分。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-01-30T20:42:15.597

忽略`Dates`并专注于问题。

我的偏好是使用它，`java.util.concurrent.TimeUnit`因为它增加了我的代码的清晰度。

在 Java 中，

```
long now = System.currentTimeMillis(); 
```

`now`使用后 5 分钟`TimeUtil`是：

```
long nowPlus5Minutes = now + TimeUnit.MINUTES.toMillis(5); 
```

参考：[http ://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeUnit.html](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeUnit.html)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-03-15T10:30:28.433

您应该使用[**Calendar 类**](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html)来操作日期和时间：

> Calendar 类是一个抽象类，它提供了在特定时刻和一组日历字段（例如 YEAR、MONTH、DAY_OF_MONTH、HOUR 等）之间进行转换的方法，以及用于操作日历字段（例如获取日期）的方法下周的

```
 Date dNow = new Date( ); // Instantiate a Date object
  Calendar cal = Calendar.getInstance();
  cal.setTime(dNow);
  cal.add(Calendar.MINUTE, 5);
  dNow = cal.getTime(); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-01-23T06:39:20.103

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-15T10:28:29.280

用这个 ...

```
 Calendar calendar = Calendar.getInstance();
    System.out.println(calendar.getTime());
    calendar.add(Calendar.MINUTE, 5);
    System.out.println(calendar.getTime()); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-15T10:38:05.240

```
Date dNow = new Date(System.currentTimeMillis()+5*60*1000)
SimpleDateFormat ft = new SimpleDateFormat ("MMM d, yyyy k:mm:ss");
System.out.println(ft.format(dNow)); 
```

在不推荐使用的方法的帮助下`getMinutes(),setMinutes(int)`

```
 Date dNow = new Date( ); // Instantiate a Date object
 int mm = dNow.getMinutes();
 dNow.setMinutes(mm+5); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-15T10:30:52.247

Java 日期使用以毫秒为单位的[Unix 时间](http://en.wikipedia.org/wiki/Unix_time)。因此，您要么计算 5 分钟的毫秒数，然后将它们添加到您的日期，要么使用为您执行此操作的 Calendar 类。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-02T05:35:48.967

你可以试试这个最好的表现

```
 ```
 GregorianCalendar gc = new GregorianCalendar();
            gc.setTimeInMillis(System.currentTimeMillis());
            gc.add(Calendar.MINUTE, -5);
            System.out.println(new java.util.Date().getTime());
            System.out.println(new java.util.Date(gc.getTime().getTime()).getTime());
``` 
```

# excel - Excel vba进度条不起作用

> ID：15429932
> 
> 赞同：0
> 
> 时间：2013-03-15T10:27:41.900
> 
> 标签：excel, vba

我尝试按照一个简单的 vba 进度条教程进行操作，但它无法正常工作。

这是[教程链接](http://www.vbaexpress.com/kb/getarticle.php?kb_id=411)

我不明白第 4 步和第 5 步，进度代码对于进度条的目标也没有任何意义，还是我错了？

我的目标是在我的代码中设置一些引用，以在栏中添加进度。- 如何添加这些参考？以及如何让进度条看到它。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:54:51.740

MS 进度条默认不可用。通过添加对 Common Controls 的引用，您可以使进度条可用。这就是第 4 步和第 5 步所做的。

首先，删除 PROGRESS 部分中的代码，以 For M... 开头并以 Unload Me 结尾。你希望这部分在你的代码中运行，让它在这个事件中运行是一种愚蠢的教程。所以删除它。

接下来，用户窗体有一个 ShowModal 属性。此属性必须设置为 False。显示非模态意味着您的代码将在用户窗体可见时继续运行。

大概你的代码中有两个循环。在这些循环中，您需要设置进度条的值。在循环之前，调用 ShowForm 过程。在循环内，设置像

```
Userform1.Progress1 = M
Userform1.Progress2 = N 
```

在循环之后，杀死用户表单。

```
Unload Userform1 
```

本教程在 Activate 事件中有两个循环，仅用于演示目的。但是您希望代码中的循环驱动进度条的值。如果没有看到您的代码，很难更具体。

# c# - Property Descriptor 如何使用相同的代码行获取两个控件的值？

> ID：15429933
> 
> 赞同：2
> 
> 时间：2013-03-15T10:27:42.243
> 
> 标签：c#, .net, gridview, webforms

我在一个由 Ex-Employee 为自定义 gridview 开发的项目中找到了这段代码，该项目带有自定义控件，效果很好，但我不确定它到底在做什么，

**代码**：

```
public class aBoundField : ImageField
{
    //here I got some get set properties defined
    protected override void OnDataBindField(object sender, EventArgs e)
    {
        Control control = (Control)sender;

        PropertyDescriptor propertyA = TypeDescriptor.GetProperties(DataBinder.GetDataItem(control.NamingContainer)).Find("boundField", true);
        PropertyDescriptor propertyB = TypeDescriptor.GetProperties(DataBinder.GetDataItem(control.NamingContainer)).Find("boundField", true);

        PropertyAFieldValue = this.GetValue(control.NamingContainer, this._PropertyAField, ref propertyA).ToString();
        PropertyBFieldValue = this.GetValue(control.NamingContainer, this._PropertyBField, ref propertyB).ToString();
            base.OnDataBindField(sender, e);
    } 
```

方法中发生了什么， `OnDataBindField`尤其是在获取 PropertyDescriptor 时。我做了一些研究，发现它是一个属性包，但如果它是一个属性包，它怎么知道这段代码中属性 A 或属性 B 的值是多少。

```
 PropertyDescriptor propertyA = TypeDescriptor.GetProperties(DataBinder.GetDataItem(control.NamingContainer)).Find("boundField", true);
 PropertyDescriptor propertyB = TypeDescriptor.GetProperties(DataBinder.GetDataItem(control.NamingContainer)).Find("boundField", true); 
```

**我不完全明白的是**

**属性描述符**如何 使用相同的代码行获取两个控件的值

```
TypeDescriptor.GetProperties(DataBinder.GetDataItem(control.NamingContainer)).Find("boundField", true) 
```

上面的代码行将如何确定它是用于属性 A 还是属性 B。

我试图从一个属性描述符中获取值，认为它是一个属性包，但它不能正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T11:12:14.893

```
GetValue(control.NamingContainer, this._PropertyAField, ref propertyA) 
```

ProperyA 是作为参考给出的，因此在该方法中发生在 propertyA 上的所有事情都将更新上面定义的 propertyA。

使用

```
PropertyDescriptor propertyA = null; 
```

代替

```
PropertyDescriptor propertyA = TypeDescriptor.GetProperties(DataBinder.GetDataItem(control.NamingContainer)).Find("boundField", true); 
```

仍然可以工作。

**延伸阅读**
[ref 方法参数关键字](http://msdn.microsoft.com/en-us/library/14akc2c7%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:48:23.927

鉴于您最近的编辑：

> 属性描述符如何使用相同的代码行获取两个控件的值

它不能。出于某种原因，前员工希望两者都`propertyA`相同`propertyB`，或者存在拼写错误，这实际上是某种错误。

# c# - 服务正常工作时出现客户端通信异常

> ID：15429934
> 
> 赞同：16
> 
> 时间：2013-03-15T10:27:42.650
> 
> 标签：c#, asp.net, .net, wcf, exception

目前我面临一个我不明白的问题。我有一个 wcf 客户端，它同时通过多个线程（都在同一台机器上）调用 wcf 服务。有时，我遇到众所周知的 System.ServiceModel.CommunicationException

**“接收对 xxx 的 HTTP 响应时发生错误。这可能是由于服务端点绑定未使用 HTTP 协议。这也可能是由于服务器中止 HTTP 请求上下文（可能是由于服务关闭） )。有关更多详细信息，请参阅服务器日志。”** ,

有时它会起作用。如果服务调用成功，这似乎是完全随机的。

请求非常小，它只是一个 (int, bool, enum) 调用。该请求包含约。来自 MSSQL 数据库的 300-500 KB 记录。

我在网站上搜索了数百个解决方案，增加了客户端和服务端的超时值、缓冲区值、请求和响应大小值。如果缺少它们，我添加了 [DataContract] 和 [DataMember] 属性。仍然没有任何变化。

我激活了完全跟踪，只是为了看到一个非常奇怪的行为：

来自客户端的调用因给定异常而在本地停止 - 但服务器处理它们并发送响应，该响应永远不会到达客户端。检查给定跟踪的时间 - 客户端中止，服务器继续。

在跟踪中，我看到了这张图中的重量：

![在此处输入图像描述](../Images/0f80a3e146dc27d05fe7cce9f46fe3a9.png)

拜托，任何人都可以帮助停止这种无休止的搜索吗？

**更新1：**

我上传了[客户端](http://pastebin.com/W7jV6YD2)和[服务器](http://pastebin.com/kASwDEmt)配置，也许这​​有帮助。

**更新 2：**

根据 Yahia 的建议，我们包含了ConnectionLimit (connection=80) 的[配置参数](http://msdn.microsoft.com/en-us/library/fb6y0fyc%28v=vs.100%29.aspx)。目前，这似乎解决了问题，但我们仍然尝试重现错误。

**更新 3：**

该死。三个小时后，我可以再次看到相同的行为......我们有另一个建议：如您所见，我们在客户端使用quartz.net，从20个线程开始。石英引擎执行的作业连接到我们的服务。现在我试着想象如果 7 个线程同时尝试连接服务会发生什么。

**更新 4：**

我们已经在注册表和配置中设置了 tcp 参数。重新启动后，完全没有变化:(

这些是注册表更改：

HKLM\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters - TcpNumConnections=65534
HKLM\System\CurrentControlSet\Services\Tcpip\Parameters - MaxUserPort=65534
HKCU\Software\Microsoft\Windows\CurrentVersion\Internet 设置 - MaxConnectionsPer1_0Server=20
HKLM\Software\ Microsoft\Internet Explorer\MAIN\FeatureControl\FEATURE_MAXCONNECTIONSPERSERVER - iexplore.exe=20
HKLM\Software\Microsoft\Internet Explorer\MAIN\FeatureControl\FEATURE_MAXCONNECTIONSPERSERVER - MyClientsExeName.exe=20

**更新 5：**

![客户跟踪](../Images/642865a1dcdcb3af7981c3c7d5a00392.png) ![服务器跟踪](../Images/69b2950575ae6ae3ec5464e2dbc1ce11.png)

**更新 6：**

```
[DataContract]
public class Currency
{
    [DataMember]
    public int Id { get; set; }

    [DataMember]
    public string Code { get; set; }

    [DataMember]
    public string Name { get; set; }

    [DataMember]
    public ForeignNoteDetails ForeignNoteDetails { get; set; }

    [DataMember]
    public CurrencyRates Rates { get; set; }

    [DataMember]
    public PreciousMetallDetails PreciousMetallDetails { get; set; }

    [DataMember]
    public CurrencyType Type { get; set; }
}

[DataContract]
public class ForeignNoteDetails
{
    [DataMember]
    public double CardholderBillingCurrencyCode { get; set; }

    [DataMember]
    public string Country { get; set; }

    [DataMember]
    public string CountryCode { get; set; }

    [DataMember]
    public int CurrencyUnit { get; set; }

    [DataMember]
    public List<string> Notes { get; set; }
}

[DataContract]
public class CurrencyRates
{
    [DataMember]
    public ExchangeRate PurchaseRate { get; set; }

    [DataMember]
    public ExchangeRate SellRate { get; set; }
}

[DataContract]
public class PreciousMetallDetails
{
    [DataMember]
    public string PreciousMetalType { get; set; }

    [DataMember]
    public double Fineness { get; set; }
} 
```

致电服务：

```
 protected IEnumerable<Currency> GetCurrencyLevel(int id, bool netRate = true, RatesCalculationSource ratesSource = RatesCalculationSource.ReutersRates)
    {
        return this.calculationClient.GetCurrencyLevel(new RatesCalculationSetting() { CalculationLevelId = id, CalculateGrossRates = !netRate, Soruce = ratesSource });
    } 
```

客户端创建：

```
protected ICalculationServiceClientService calculationClient = IoC.DependencyManager.Resolve<ICalculationServiceClientService>(); 
```

对服务的另一个调用（工作）：

```
this.calculationClient.DistributeTradingOfficeRatesLevels(branchOfficeLevelId, tradingLevelId); 
```

这被定义为

```
void DistributeTradingOfficeRatesLevels(int branchOfficeRatesLevelId, int tradingOfficeRatesLevelId) 
```

**更新 7：**

![异常详情](../Images/9963147d62b95724485e4149e487e5a1.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T14:32:38.583

Ok, this is what happening - you have a faulty network card that is being overheated after few hours and when that happens it begins to short-circuit, as result your client side "thinks" that the server was shut down. End of story - 100% sure. where's my bounty?

btw: it is overheated either cause of bad design especially if you are using laptop or due to a damage already exists in it.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T14:45:31.783

HTTP 协议定义了同一 Web 服务器的 2 个连接的限制...

由于您使用的是 http，因此您看到的行为可能与该限制有关...

有一个[注册表设置](http://support.microsoft.com/kb/282402/en-us)和一种[编程方式](https://stackoverflow.com/questions/2960056/trying-to-run-multiple-http-requests-in-parallel-but-being-limited-by-windows)- 您可能需要增加对客户端的限制（取决于您使用的线程数量）......

其他相关设置（客户端）可以在[这里](http://smallvoid.com/article/winnt-tcpip-max-limit.html)找到。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T06:00:50.943

尝试在 WCF 端启用跟踪，您将获得有关服务器端正在发生的事情的详细信息。

当客户端发送大量请求时，有时 WCF 通道工厂会突然关闭。当我们对 WCF 使用证书身份验证时，我们遇到了类似的问题。在这一点上，我们已经围绕这个瞬态错误设置了 RetryPolicy。如果我们得到这个错误，我们会中止通道工厂，重新创建并再次发送，而不是抛出异常。

```
 while (retryCount <= MAXRETRY)
            {
                try
                {
                    return _proxyService.GetData(); // _proxyService is WCF proxy class
                }
                catch (CommunicationException transientException)
                {
                     if (SLEEPINTERVAL> 0)
                    {
                        Thread.Sleep(SLEEPINTERVAL);
                    }
                    ((IClientChannel) _proxyService).Abort();
                    _proxyService = functionToCreateProxy();
                }

                retryCount++;
            } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-28T21:17:05.843

我建议验证2点：

1.  **在服务器上进行[节流，例如](http://msdn.microsoft.com/en-us/library/vstudio/ms735114%28v=vs.90%29.aspx)**

    行为名称="Throttled"
    serviceThrottling
    maxConcurrentCalls="1"
    maxConcurrentSessions="1"
    maxConcurrentInstances="1"

2.  **未关闭 WCF 会话 - 使用后是否关闭所有会话（客户端代理）？**
    在我的情况下，当我将所有超时扩大到最大值时，我遇到了在 X 调用后服务变得“卡住”的情况。当我更改超时时，我收到了像你一样的异常。

几年前的事了，具体记不太清了。另外，我记得我找到了一篇很好的文章，描述了如何以及为什么要更改服务实例模式来帮助解决这个（会话）问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-19T00:44:35.053

我有同样的问题。就我而言，这是我的错误。我在启动线程后关闭了 channelFactory（代理）。

# java - 在对话框中显示数据库中的数据

> ID：15429935
> 
> 赞同：-1
> 
> 时间：2013-03-15T10:27:44.183
> 
> 标签：java, mysql

我是使用java的新手。有人可以帮我回答这个问题吗？

是否可以使用java语言在对话框中显示数据库（mysql）中的数据？

等待您的回复和thanx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:35:42.870

好吧，这样的全局答案只能有全局答案：

首先[google for JDBC](https://www.google.nl/search?q=jdbc&aq=f&oq=jdbc&aqs=chrome.0.57j0l3j62.1432&sourceid=chrome&ie=UTF-8) (Java Database Connectivity)，然后下载[MySQL 的 Connector/J](http://www.mysql.com/products/connector/)。

与上述设置连接后，您可以查询您的数据库以获取该日期。要在对话框中显示它，您必须将其格式化为用户可读的格式。只需 google for [java convert mysql date](https://www.google.nl/search?q=java+convert+mysql+date&aq=f&oq=java+convert+mysql+date&aqs=chrome.0.57j0l3j60j62.530&sourceid=chrome&ie=UTF-8)，您就会获得大量示例教程和其他有用的资源。

# .htaccess - 如何检查.htaccess 中特定文件夹中是否存在文件？

> ID：15429936
> 
> 赞同：1
> 
> 时间：2013-03-15T10:27:45.863
> 
> 标签：.htaccess, url, mod-rewrite, uri

我使用这段代码：

```
RewriteCond public/%{REQUEST_FILENAME} -f [OR]
RewriteCond public/%{REQUEST_FILENAME} -d 
RewriteRule public/.* - [L] 
```

它不起作用。

例如，我希望该 URL： [http://example.com/style.css](http://example.com/style.css) 像这样被 Interpeted

公共/style.css

如果 style.css 存在于公共目录中。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:12:52.457

如果我没记错的话：

```
RewriteCond %{DOCUMENT_ROOT}/public%{REQUEST_URI} -f [OR]
RewriteCond %{DOCUMENT_ROOT}/public%{REQUEST_URI} -d 
RewriteRule public/.* - [L] 
```

**编辑**

`%{REQUEST_FILENAME}`包含所请求文件的完整路径。所以例如`/var/www/example.com/index.html`。所以添加`public/`到前面将导致`public/var/www/example.com/index.html`，它永远不存在。因此，您使用`%{DOCUMENT_ROOT}`which contains`/var/www/example.com`和`%{REQUEST_URI}`which contains`/index.html`

还要注意，`-f`需要`-d`一个完整的路径，而不仅仅是一个相对于 wwwroot 的路径。

# android - 在Android中修改一个算子

> ID：15429939
> 
> 赞同：0
> 
> 时间：2013-03-15T10:27:51.700
> 
> 标签：android, android-listview, operators

我目前使用两个不同的片段来显示一半 Lis​​t ：

片段 1

```
if (i%2 != 1) {
Show first half List;
} 
```

片段 2

```
if (i%2 == 1) {
Show second half List;
} 
```

但我想要一个更清洁的片段，其中一个片段被称为两次：

分段

```
prefOperator = bundle.getInt(WHICH_HALF);
if (prefOperator == 1) OPERATOR = "!=";
else if (prefOperator == 2) OPERATOR = "==";

if (i%2 OPERATOR 1) {
Show List;
} 
```

我想这是可能的，但找不到怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T10:31:12.453

不要更改运算符，而是更改您要比较的值：

```
// Since WHICH_HALF has value 1 or 2, we will subtract one.
int prefOperator = bundle.getInt(WHICH_HALF) - 1;

if (i%2 == prefOperator) {
  // Show first half of list
} else {
  // Show second half of list
} 
```

# mysql - 如何验证 MySQL 中也有字母数字日期的日期

> ID：15429942
> 
> 赞同：1
> 
> 时间：2013-03-15T10:27:56.530
> 
> 标签：mysql, sql

我基本上有一个表格，用户在表格中输入了他们的出生日期。

日-月-年（2012 年 12 月 1 日）

表中的数据有混合错误，有些人将该字段为空，其他人只有“DAY-MONTH-YEAR”字样，其他人有“--”，其他“”，其他人只有“02-12-YEAR”和其他有'--1985'。我知道……可怕

我现在正在尝试进行过滤，以便仅在我的查询中获取仅以正确格式输入完整 DoB 的人员。

我的 REGEXP 不是很好......我想知道是否有人可以帮助我如何验证 MySQL 中的日期。我可以在 PHP 中轻松实现这一点，但尝试将此过程保留在我的应用程序模型中。

```
SELECT m_dob FROM `mariners` WHERE m_dob IS NOT NULL AND m_dob != '' and m_dob != 'Day-Month-Year' AND m_dob != '--' AND m_dob REGEXP '^1[() -]*[[:digit:]]{3}[() -]*[[:digit:]]{3}[() -]*[[:digit:]]{4}$'; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T10:30:51.383

从使用正则表达式的痛苦中解脱出来，只需调用 MySQL 的[`STR_TO_DATE()`](https://dev.mysql.com/doc/en/date-and-time-functions.html#function_str-to-date)函数即可：

```
SELECT m_dob FROM mariners WHERE STR_TO_DATE(m_dob, '%d-%b-%Y') IS NOT NULL 
```

如手册中所述：

> 如果从中提取的日期、时间或日期时间值***`str`***非法，则[`STR_TO_DATE()`](https://dev.mysql.com/doc/en/date-and-time-functions.html#function_str-to-date)返回`NULL`并产生警告。

* * *

### 更新

如您的评论中所述，在某些情况下[`STR_TO_DATE()`](https://dev.mysql.com/doc/en/date-and-time-functions.html#function_str-to-date)可以返回零日期。为了避免这种情况，要么：

*   启用[`NO_ZERO_DATE`](https://dev.mysql.com/doc/refman/5.5/en/server-sql-mode.html#sqlmode_no_zero_date)SQL 模式：

    ```
    SET SESSION sql_mode = 'NO_ZERO_DATE' 
    ```

*   或者使用其他功能，例如[`TO_DAYS`](https://dev.mysql.com/doc/en/date-and-time-functions.html#function_to-days)验证日期的有效性：

    ```
    SELECT m_dob
    FROM   mariners
    WHERE  TO_DAYS(STR_TO_DATE(m_dob, '%d-%b-%Y')) IS NOT NULL 
    ```

我不建议手动尝试捕获可能导致零日期的输入日期的所有实例，因为很可能会忽略其他一些极端情况。

# css - 调整大小时父 div 中的 DIV 重叠

> ID：15429944
> 
> 赞同：0
> 
> 时间：2013-03-15T10:28:00.483
> 
> 标签：css, html

在 CSS 方面，我并不是真正的冠军，所以我希望能得到一些帮助。

现在我有一个父 div 和两个子 div。目前，每当我调整浏览器的大小时，两个 div 都会相互重叠。我希望左 div 始终可见。

可以在此处查看实际操作：http: [//unlimitedbrettworks.com/forums/](http://unlimitedbrettworks.com/forums/)

**CSS：**

```
#header {
     position: relative;
     height: 140px;
     overflow: hidden;
     background-color: #E1E1E1; }
#logo a {
    overflow: hidden;
    float: right;
    width: 620px !important;
    height: 190px !important;
    cursor: pointer;
    background: url(../images/art/logo.png) no-repeat;
}
#userarea {
    float: left;
    margin: 0 1em; 
    padding: 1.5em 1em 0 1em;
    text-align: left;
    font-size: 0.95em;
    width: 38em;
    color: #313131;
    font-family: tahoma, sans-serif;
    line-height: 130%;
}
#userarea a:link, #userarea a:visited {
    color: #333333;
}
#userarea a:hover {
    color: #800000;
    text-decoration: underline;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:40:45.163

```
#header {
     position: relative;
     height: 140px;
     overflow: hidden;
     background-color: #E1E1E1; }
#logo a {
    overflow: hidden;
    float: right;
    width: 620px !important;
    height: 190px !important;
    cursor: pointer;
    background: url(../images/art/logo.png) no-repeat;
}
#userarea {
    float: left;
    margin: 0 1em; 
    padding: 1.5em 1em 0 1em;
    text-align: left;
    font-size: 0.95em;
    width: 38em;
    color: #313131;
    font-family: tahoma, sans-serif;
    line-height: 130%;
    height: 122px; /* is value is the height min the padding you use.*/
}
#userarea a:link, #userarea a:visited {
    color: #333333;
}
#userarea a:hover {
    color: #800000;
    text-decoration: underline;
} 
```

这是第一个问题。第二个在您的 css 文件的第 128 行。

```
div#wrapper
{
    margin: 0 auto;
    min-width: 764px;
    max-width: 2300px;
    border: 10px solid #333333;
} 
```

需要：

```
div#wrapper
{
    margin: 0 auto;
    min-width: 1024px;
    max-width: 2300px;
    border: 10px solid #333333;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:41:25.293

我去了你的网站，和 Chrome 的检查员一起玩，找到了答案。

尝试将这些属性添加到#userarea：

```
#userarea {
  position: absolute;
  background-color: #E1E1E1;
  height: 100%;
} 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:42:05.147

抱歉，我没有收到您的问题...在您链接的页面中，即使您调整窗口大小，#userarea div 也始终可见。

要完整查看#logo div，请从父div #header 中删除“height”属性，如果窗口不够大，它将换行。

# java - Java中的JAXB解组问题

> ID：15429946
> 
> 赞同：1
> 
> 时间：2013-03-15T10:28:06.480
> 
> 标签：java, xml, jaxb

请，我的代码可能有什么问题..下面是我的菜单类..

```
package commuinity;

import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Menu {

    String menu;
    String menuitem;
    String name;
    String action;

    public String getMenu() {
        return menu;
    }

    @XmlElement
    public void setMenu(String menu) {
        this.menu = menu;
    }
    public String getMenuitem() {
        return menuitem;
    }

    @XmlElement
    public void setMenuitem(String menuitem) {
        this.menuitem = menuitem;
    }
    public String getName() {
        return name;
    }

    @XmlAttribute
    public void setName(String name) {
        this.name = name;
    }
    public String getAction() {
        return action;
    }
    @XmlAttribute
    public void setAction(String action) {
        this.action = action;
    }

} 
```

这是我的 Jaxb 实用程序类

```
import java.io.File;
import java.io.IOException;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Unmarshaller;

public class JAXBExcer {

    public JAXBExcer(){

            try {
                File file = new File("sr/resources/file.xml");
                file.createNewFile();

            JAXBContext jaxbContext = JAXBContext.newInstance(Menu.class);

            Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();

             Menu menuApp= (Menu)jaxbUnmarshaller.unmarshal(file);

            System.out.println(menuApp);

            }
            catch(IOException e){
                System.out.println("File is not created!");
            }

           catch (JAXBException e) {
            System.out.println("JaxB having issues!");
          }

        }

    } 
```

问题是它没有创建文件。它进入了第一个流行语“未创建文件”，然后我尝试在我的文件系统中手动创建它，但随后跳转到下一个流行语“JAXB 有问题”有人能指出原因吗？我只是在试验 JAXB。我正在关注此链接上的教程：`http://www.mkyong.com/java/jaxb-hello-world-example/` 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:30:13.240

解组是将 XML 转换为对象的过程。[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现要求文件包含 XML 内容。编组是从对象创建 XML 文件的过程，这可能是您正在寻找的。

# android - 谷歌地图Android API获取wifi位置

> ID：15429952
> 
> 赞同：1
> 
> 时间：2013-03-15T10:28:19.920
> 
> 标签：android, geolocation, wifi, google-maps-android-api-2

所以我正在开发这个应用程序，它将通过使用手机的传感器 wifi 检测它来获取 wifi 热点的位置（手机实际上并没有连接到热点 wifi，它只是检测到）。在开始开发应用程序之前，我做了一些初步研究，似乎 Google Geolocation API 将为我完成这项工作。但是，它不是免费的（至少我在阅读 API 后所理解的）。我检查了检测 wifi 热点的其他应用程序，我只是想知道这些应用程序是否有自己的数据库，其中包含所有 wifi 热点信息（SSID、位置坐标等），所以当 wifi 传感器检测到 wifi 热点时，它会查找数据库并获取位置等信息。另外，我的一位同事提到谷歌地图也存储 wifi 信息。是真的吗？因为我不能

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T10:48:20.983

Android 有多个 LocationProviders，包括：

*   `LocationManager.GPS_PROVIDER`：使用 GPS 获取位置
*   `LocationManager.NETWORK_PROVIDER`：使用 Wifi、蜂窝网络等获取位置。
*   `LocationManager.PASSIVE_PROVIDER`：使用已经运行的提供者提供的数据获取位置。这允许多个应用程序共享地理位置信息）

**您无需支付任何费用**即可使用`NETWORK_PROVIDER`
*某些提供商可能并非出现在所有设备上，具体取决于手机型号和 Android 版本。*

提供者有不同的特点：NETWORK 速度快但并不总是足够精确，GPS 精确但速度慢且耗电等。最好的策略是向多个提供者请求位置，并在您获得一个好的位置后立即取消挂起的请求足够取决于您的标准（精度、响应时间等）

我发现Reto Meier 的[这篇文章对于了解 Android 上的地理定位非常有用](http://android-developers.blogspot.de/2011/06/deep-dive-into-location.html?m=1)

# php - PHP 编码转换为 Windows-1252，同时保持 UTF-8 兼容性

> ID：15429953
> 
> 赞同：0
> 
> 时间：2013-03-15T10:28:22.687
> 
> 标签：php, encoding, utf-8, character-encoding, windows-1252

我需要将上传的具有未知编码的文件名转换为 Windows-1252，同时还要保持 UTF-8 兼容性。

当我将这些文件传递给控制器​​（我对其没有任何影响）时，这些文件必须是 Windows-1252 编码的。然后，该控制器再次生成通过 MySQL 存储到数据库中的有效文件（名称）列表 - 因此我需要 UTF-8 兼容性。传递给控制器​​的文件名和写入数据库的文件名必须匹配。到目前为止，一切都很好。

在极少数情况下，当转换为“Windows-1252”时（例如使用 te 字符“ï”），该字符会转换为 UTF-8 中无效的内容。MySQL 然后删除这些无效字符 - 结果磁盘上的文件名和存储到数据库的文件名不再匹配。这种有时会失败的转换是通过简单的重新编码来实现的：

```
$sEncoding       = mb_detect_encoding($sOriginalFilename);
$sTargetFilename = iconv($sEncoding, "Windows-1252//IGNORE", $sOriginalFilename); 
```

为了防止转换生成无效字符，我可以再次从重新编码的字符串中删除所有无效的 UTF-8 字符：

```
ini_set('mbstring.substitute_character', "none");
$sEncoding       = mb_detect_encoding($sOriginalFilename);
$sTargetFilename = iconv($sEncoding, "Windows-1252//TRANSLIT", $sOriginalFilename);
$sTargetFilename = mb_convert_encoding($sTargetFilename, 'UTF-8', 'Windows-1252'); 
```

但这将完全删除/重新编码字符串中留下的任何特殊字符。例如，我丢失了所有在德语中很常见的“äöüÄÖÜ”等。

如果您知道一种更简洁的编码到 Windows-1252 的方法（不会丢失有效的特殊字符），请告诉我。

非常感谢任何帮助。先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T10:31:24.257

您不能同时将字符串设为 Windows-1252 和 UTF-8。前 128 个字符的字符集是相同的（它们包含例如基本的拉丁字母），但是当它超出此范围时（如元音变音符号），它要么是一个，要么是另一个。它们在 UTF-8 中的代码点与在 Windows-1252 中的不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T10:44:15.067

我认为主要问题是[mb_detect_encoding()](http://php.net/mb_detect_encoding)并没有完全按照你的想法做。它试图检测字符编码，但它是从相当有限的预定义编码列表中进行的。默认情况下，这些编码是[mb_detect_order()](http://php.net/mb_detect_order)返回的编码。在我的电脑中，它们是：

*   ASCII
*   UTF-8

所以这个函数是完全没用的，除非你负责编译一个候选编码列表并将它提供给函数。

此外，基本上没有可靠的方法来猜测任意输入字符串的编码，即使您将自己限制在编码的一小部分。在您的情况下，`Windows-1252`非常接近，`ISO-8859-1`除了`ISO-8859-15`目视检查 ¤ 或 € 等关键字符外，您无法区分它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T11:19:21.030

在文件系统中保持 ASCII - 如果您需要在文件名中保留 ASCII 以外的字符，可以使用一些方案来表示 unicode 字符，同时保持 ASCII。

例如，百分比编码：

`äöüÄÖÜ.txt`<->`%C3%A4%C3%B6%C3%BC%C3%84%C3%96%C3%9C.txt`

当然，这会很快达到文件名限制，并且不是非常理想。

[punycode](http://en.wikipedia.org/wiki/Punycode)怎么样？

`äöüÄÖÜ.txt`<->`xn--4caa7cb2ac.txt`

# regex - htaccess 人类可读

> ID：15429954
> 
> 赞同：1
> 
> 时间：2013-03-15T10:28:25.200
> 
> 标签：regex, .htaccess, mod-rewrite, human-readable

我有一个站点，它已经定义了 htaccess 以使 url 更好

```
DirectoryIndex index.php
RewriteEngine On
RewriteBase /

Options -indexes

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule (.*) index.php 
```

一切正常（根文件夹中有 cms）。

现在我想在根目录中创建一个文件夹并为其制定另一个规则：

```
DirectoryIndex index.php
RewriteEngine On
RewriteBase /

Options -indexes

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !tip [NC]

RewriteRule (.*) index.php [NC]

RewriteCond %{QUERY_STRING} ^$
RewriteRule ^tip/([^/]+)/? /tip/?id=$1 
```

所以我想从 url 重定向所有内容：`.../tip/?id=N`->`../tip/N`

它似乎工作正常，传递了 id，但加载了数据。网站内的所有网址都是错误的（javascript、css）。它们没有加载。

看：[http ://wincode.org/tip/3](http://wincode.org/tip/3)

例如，代码：`<script defer src="js/filtrify.js"></script>`产生：`http://wincode.org/tip/js/filtrify.js`但如果您尝试将其加载到另一个选项卡中，我认为它将`js/filtrify.js`作为`id`参数传递。如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T10:45:14.080

A. 在 $DOCUMENT_ROOT/.htaccess 中更改您的 .htaccess 代码：

```
DirectoryIndex index.php
RewriteEngine On
RewriteBase /

Options -indexes

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule (?!^tip(/.*|)$)^.*$ /index.php [L,NC] 
```

B. 在 $DOCUMENT_ROOT/tip/.htaccess 中更改您的 .htaccess 代码：

```
DirectoryIndex index.php
RewriteEngine On
RewriteBase /tip

Options -indexes

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteCond %{QUERY_STRING} ^$
RewriteRule ^([^/]+)/?$ /tip/?id=$1 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-24T14:22:58.637

我只是改进了一点 anubhava 回复，这个是基于根文件夹的例子，但是你可以对你需要的其他目录使用相同的方法。

```
DirectoryIndex index.php
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  Options -indexes

  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME} !-l
  RewriteRule (?!^tip(/.*|)$)^.*$ /index.php [L,NC]
</IfModule>

<IfModule !mod_rewrite.c>
    # Mod_rewrite not installed, redirect all 404 errors to index.php.
    ErrorDocument 404 index.php
</IfModule> 
```

# bash - 检查传递给函数的参数中的值

> ID：15429972
> 
> 赞同：0
> 
> 时间：2013-03-15T10:29:03.667
> 
> 标签：bash, shell, csh

当我尝试记录参数时，我得到了正确的值。我如何比较参数是否是 csh 脚本中的特定字符串。bash中对应的代码是什么。

```
checkstatus()
{
  /bin/echo $1 >> outfile.txt

if ["$1" = "show"]
then
    /bin/echo "it is show" >> outfile.txt
else
    /bin/echo "it is not show" >> outfile.txt
fi
}

checkstatus show 
```

我在输出文件中得到显示，但在 if 条件下出现错误情况。一定是我想念的一个简单的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:39:41.280

在 bash 中，如果您 (1) 在“[]”括号周围添加一个空格并且 (2) 使用“==”而不是“=”，则它可以工作：

```
if [ "$1" == "show" ] 
```

(2) 不是绝对必要的，但更清楚一点，因为“=”通常用作赋值运算符。

# objective-c - 使用条件运算符的 else 什么都不做的等价物是什么？

> ID：15429973
> 
> 赞同：2
> 
> 时间：2013-03-15T10:29:12.840
> 
> 标签：objective-c, if-statement, inline

我想知道这个 if 语句的等价物是什么：

```
if (condition) {
        // do something
    }else{
        // do nothing

    } 
```

使用条件运算符：

```
(condition) ? // [do nothing] : {do nothing} " 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:31:52.090

使用条件运算符不可能“什么都不做”。尽管两个表达式都可以转换为`void`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T10:45:13.547

这是三元运算符（ ?: ）的缺点之一。

它需要在所有三个地方都有表达。你不能跳过任何一个。

您可以对其进行一些调整，但是可以将其 True-part 和/或 False-part 分配给相同的：

```
int big=100;
big= (10 > 100) ? 0 : big; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:31:23.680

```
if (!condition) {
        // do something
    }else{
        // do nothing

    } 
```

现在看看 !before contition :-)

这 ！在条件只是将“如果”切换为“如果不是”之前......

那是你一直在寻找的吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T11:00:07.717

在普通代码中，答案是没有等价的——表达式的所有子表达式都必须有一个值，但是......

**以下不是建议**

在一般情况下，以下内容应该可以工作：

```
condition ? ( (^{ do something })(), 0 ) : 0; 
```

这是针对一般情况的。如果*做某事*是一个单一的、非复合的陈述；比如方法调用；然后可以删除该块以给出：

```
condition ? (do something, 0) : 0; 
```

**同样不建议在实际代码中这样做！**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T11:00:52.917

你可以做这样的事情

```
someBool ? [self someFunction] : (^{})(); //empty block 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T10:49:37.870

```
originalValue = (condition) ? newValue : originalValue 
```

然后编译器应该删除不必要的*originalValue*分配给它自己。

GCC 有一个扩展可以为您提供更多您正在寻找的东西，例如

```
originalValue = condition ?: newValue; 
```

所以它也可能在 clang 中可用。你将不得不！条件虽然。

# solr - 使用 lucene 的拼写检查器

> ID：15429978
> 
> 赞同：0
> 
> 时间：2013-03-15T10:29:26.580
> 
> 标签：solr, lucene, spell-checking, autocorrect

我正在尝试使用 lucene 拼写检查器编写拼写校正器。我想给它一个带有博客文本内容的文本文件。问题是它只有在我的字典文件中每行给出一个句子/单词时才有效。此外，建议 API 会返回结果，而不会对出现次数给予任何权重。以下是源代码

```
 public class SpellCorrector {

        SpellChecker spellChecker = null;

        public SpellCorrector() {
                try {
                        File file = new File("/home/ubuntu/spellCheckIndex");
                        Directory directory = FSDirectory.open(file);

                        spellChecker = new SpellChecker(directory);

                        StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_36);
                        IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_36, analyzer);
                        spellChecker.indexDictionary(
                                        new PlainTextDictionary(new File("/home/ubuntu/main.dictionary")), config, true);
                                                                        //Should I format this file with one sentence/word per line?

                } catch (IOException e) {

                }

        }

        public String correct(String query) {
                if (spellChecker != null) {
                        try {
                                String[] suggestions = spellChecker.suggestSimilar(query, 5);  
                                 // This returns the suggestion not based on occurence but based on when it occured

                                if (suggestions != null) {
                                        if (suggestions.length != 0) {
                                                return suggestions[0];
                                        }
                                }
                        } catch (IOException e) {
                                return null;
                        }
                }
                return null;
        }
} 
```

我需要做一些改变吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:36:29.567

[关于您的第一个问题，听起来像是PlainTextDictionary API](http://lucene.apache.org/core/4_1_0/suggest/org/apache/lucene/search/spell/PlainTextDictionary.html)中预期的、记录在案的字典格式。如果你想传入任意文本，你可能想索引它并使用[LuceneDictionary](http://lucene.apache.org/core/4_1_0/suggest/org/apache/lucene/search/spell/LuceneDictionary.html)代替，或者可能是[HighFrequencyDictionary](http://lucene.apache.org/core/4_1_0/suggest/org/apache/lucene/search/spell/HighFrequencyDictionary.html)，这取决于你的需要。

拼写检查器会根据单词之间的相似性（基于[Levenstein 距离](http://lucene.apache.org/core/4_1_0/suggest/org/apache/lucene/search/spell/LevensteinDistance.html)）建议替换，然后再考虑其他问题。如果您希望它只推荐更流行的术语作为建议，您应该将[SuggestMode](http://lucene.apache.org/core/4_1_0/suggest/org/apache/lucene/search/spell/SpellChecker.html#suggestSimilar%28java.lang.String,%20int,%20org.apache.lucene.index.IndexReader,%20java.lang.String,%20org.apache.lucene.search.spell.SuggestMode%29)传递给[SpellChecker.suggestSimilar](http://lucene.apache.org/core/4_1_0/suggest/org/apache/lucene/search/spell/SuggestMode.html)。这确保了建议的匹配至少与它们打算替换的词一样强大、受欢迎。

如果您必须覆盖 Lucene 决定最佳匹配的方式，您可以使用 SpellChecker.setComparator 来实现，[在 SuggestWord](http://lucene.apache.org/core/4_1_0/suggest/org/apache/lucene/search/spell/SuggestWord.html)[上](http://lucene.apache.org/core/4_1_0/suggest/org/apache/lucene/search/spell/SpellChecker.html#setComparator%28java.util.Comparator%29)创建您自己的 Comparator 。由于 SuggestWord向您展示，应该很容易按受欢迎程度排列找到的匹配项。`freq`

# sql - 单个 IF 语句中的多个条件

> ID：15429983
> 
> 赞同：12
> 
> 时间：2013-03-15T10:29:48.427
> 
> 标签：sql, sql-server, sql-server-2008

我想在 SQL 的单个 IF 语句中添加多个条件。

我不擅长 SQL 并引用了一些示例，所有示例都只显示 IF 中的一个条件。

这是我的程序。

```
CREATE PROCEDURE [dbo].[AddApplicationUser]    
(  
@TenantId BIGINT,  
@UserType TINYINT,
@UserName  NVARCHAR(100),  
@Password NVARCHAR(100)  
)  

AS    

BEGIN   

IF ((@TenantId IS NULL)  AND (@UserType=0 OR @UserType=1) )
  RAISERROR('The value for @TenantID should not be null', 15, 1) -- with log 
```

**对于 IF 中的多条件，这在 SQL 中是正确的语法吗？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-04-06T15:08:04.817

是的，这是有效的语法，但它可能不会做你想做的事。

`RAISERROR`除非您添加`RETURN`. 所以你需要添加一个块`BEGIN ... END`来保存这两个语句。

此外，我不确定您为什么选择严重级别 15。这[通常表示语法错误](http://www.sommarskog.se/error-handling-I.html#severitylevels)。

最后我会使用简化条件`IN`

```
CREATE PROCEDURE [dbo].[AddApplicationUser] (@TenantId BIGINT,
                                            @UserType TINYINT,
                                            @UserName NVARCHAR(100),
                                            @Password NVARCHAR(100))
AS
  BEGIN
      IF ( @TenantId IS NULL
           AND @UserType IN ( 0, 1 ) )
        BEGIN
            RAISERROR('The value for @TenantID should not be null',15,1);

            RETURN;
        END
  END 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-15T10:31:43.670

是的，在 IF 之后必须有布尔表达式。在这里你有一个直接的[链接](http://msdn.microsoft.com/en-gb/library/ms182717.aspx)。我希望它有所帮助。GL！

# html - 在图像上放置背景图像

> ID：15429984
> 
> 赞同：0
> 
> 时间：2013-03-15T10:29:48.970
> 
> 标签：html, css

我试图将背景图像放在图像上。

基本上它显示“用户”是否批准或拒绝了某事。

如果获得批准，我希望在用户显示图像上显示一个绿色勾号。

我试图创建它，但我所拥有的不起作用。

这是我到目前为止所拥有的：

html

```
<img class="small-profile-img accepted" src="http://www.image.com/image.gif" alt=""> 
```

CSS

```
.small-profile-img{
    width:30px;
    display:inline;
    border:2px solid #000000;
}

.accepted{
    background-image:url("tick.png") !important;
    background-repeat:no-repeat;
    background-position:right bottom;
    z-index:100;
    background-size:18px;
} 
```

有关工作示例，请参见 jsfiddle。

[jsfiddle](http://jsfiddle.net/vpgjr/1/ "jsfiddle")

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:34:28.297

背景图像*位于*前景内容的后面。An`<img>`是前景内容。

您可以看到背景图像的唯一方法是前景图像在背景图像上具有半透明像素。

刻度似乎是内容（而不是装饰），因此它可能应该表示为`<img>`无论如何。

```
<div class="image-container">
    <img class="small-profile-img"
         src="http://www.image.com/image.gif" 
         alt="">
    <img class="approved"
         src="tick.png"
         alt="Approved">
</div>

.image-container { 
    position: relative;
}

.image-container .small-profile-img {
    position: relative;
    z-index: 2;
}

.image-container .approved {
    position: absolute;
    z-index: 3;
    top: 50px;
    left: 50px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T10:39:45.667

解决方案是对类使用带有`after`伪元素的包装器`accepted`：

```
.accepted:after {
    content: '';
    display: block;
    height: 18px;
    width: 18px;
    position: absolute;
    bottom: 0;
    right: 0;
    background-image:url("http://cdn1.iconfinder.com/data/icons/checkout-icons/32x32/tick.png");
    background-repeat: no-repeat;
    background-position: right bottom;
    z-index: 100;
    background-size: 18px;
} 
```

HTML

```
<div class="small-profile-img accepted">
    <img src="http://2.bp.blogspot.com/-KLcHPORC4do/TbJCkjjkiBI/AAAAAAAAACw/zDnMSWC_R0M/s1600/facebook-no-image1.gif" alt="">
</div> 
```

[http://jsfiddle.net/vpgjr/7/](http://jsfiddle.net/vpgjr/7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:36:31.463

你为什么不使用位置：绝对

HMTL

```
<div class="wrap">
<img src="http://2.bp.blogspot.com/-KLcHPORC4do/TbJCkjjkiBI/AAAAAAAAACw/zDnMSWC_R0M/s1600/facebook-no-image1.gif" alt="">
    <div class="inner"> <img src="http://cdn1.iconfinder.com/data/icons/checkout-icons/32x32/tick.png" width="18"/></div>
    </div> 
```

CSS

```
.wrap{
    position:relative;
    background:red;
    height:auto; width:30px;
    font-size:0
}
.wrap > img{
        width:30px;
        display:inline;
    }
.inner{
        position:absolute; 
        top:30%; 
        left:50%;
        margin:-5px 0 0 -9px
} 
```

**[演示](http://jsfiddle.net/vpgjr/4/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T10:37:09.587

放

```
position:absolute 
```

然后设置left，top（如果需要，bottom，right）属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T10:54:07.310

是的，我会反过来。接受时更改 img 的类。

HTML：

```
<div class='holder'>
    <img  class='unaccepted' src="http://cdn1.iconfinder.com/data/icons/checkout-icons/32x32/tick.png" alt="">    
</div> 
```

CSS：

```
 .small-profile-img{
        width:30px;
        display:inline;
        border:2px solid #000000;
    }
.holder{
    width:40px;
    height:30px;
    background-image:url("http://2.bp.blogspot.com/-KLcHPORC4do/TbJCkjjkiBI/AAAAAAAAACw/zDnMSWC_R0M/s1600/facebook-no-image1.gif");
    background-size: 100%, 100%;
    background-repeat:no-repeat;
    background-position:center;
    text-align: center;
}

    .accepted{
        border:none;
        display:inline;
    }
.unaccepted{
    display:none;
} 
```

# ant - Ant wsimport 任务失败

> ID：15429989
> 
> 赞同：5
> 
> 时间：2013-03-15T10:29:58.247
> 
> 标签：ant, jax-ws, jdk1.6, wsimport

我有一个简单的 ant 脚本来从 sdl 构建我的类。不幸的是 wsimport 立即失败。我怀疑它与类路径有关。

```
<taskdef name="wsimport" classname="com.sun.tools.ws.ant.WsImport">
    <classpath>
        <pathelement location="${jaxws.lib.dir}/jaxws-tools.jar" />
    </classpath>
</taskdef>

<wsimport
    wsdl="${project.wsdl.dir}\some.wsdl"
    destdir="${jaxws.output.dir}"
    keep="false"
    extension="true"
    verbose="true"
    wsdlLocation="http://localhost/wsdl"
    target="2.1">
    <depends file="${project.wsdl.dir}"/>
    <produces dir="${jaxws.output.dir}"/>
</wsimport> 
```

这是它产生的输出：

> [wsimport] 2013 年 3 月 15 日下午 12:23:25 com.sun.xml.bind.v2.util.XmlFactory createDocumentBuilderFactory [wsimport] 严重：空 [wsimport] java.lang.AbstractMethodError：javax.xml.parsers.DocumentBuilderFactory.setFeature (Ljava/lang/String;Z)V [wsimport] at com.sun.xml.bind.v2.util.XmlFactory.createDocumentBuilderFactory(XmlFactory.java:176) [wsimport] at com.sun.tools.xjc.reader。 internalizer.DOMForest.(DOMForest.java:162) [wsimport] 在 com.sun.tools.xjc.api.impl.s2j.SchemaCompilerImpl.resetSchema(SchemaCompilerImpl.java:215) [wsimport] 在 com.sun.tools.xjc .api.impl.s2j.SchemaCompilerImpl.(SchemaCompilerImpl.java:114) [wsimport] 在 com.sun.tools.xjc.api.XJC.createSchemaCompiler(XJC.java:72) [wsimport] 在 com.sun.tools。 ws.wscompile.WsimportOptions.(WsimportOptions.java:152) [wsimport] 在 com.sun.tools.ws。wscompile.WsimportTool.(WsimportTool.java:89) [wsimport] 在 com.sun.tools.ws.wscompile.WsimportTool.(WsimportTool.java:92) [wsimport] 在 com.sun.tools.ws.ant.WsImport2。在 com.sun.istack.tools.ProtectedTask.execute(ProtectedTask.java:103) [wsimport] 在 org.apache.tools.ant.UnknownElement.execute(UnknownElement.java: 269) [wsimport] 在 org.apache.tools.ant.Task.perform(Task.java:364) [wsimport] 在 org.apache.tools.ant.Target.execute(Target.java:301) [wsimport] 在org.apache.tools.ant.helper.ProjectHelper2.parse(ProjectHelper2.java:135) [wsimport] 在 org.eclipse.ant.internal.launching.remote.InternalAntRunner.parseBuildFile(InternalAntRunner.java:192) [wsimport] 在org.eclipse.ant.internal.launching.remote.InternalAntRunner.run（InternalAntRunner.java：401）[wsimport]在org.eclipse.ant.internal.launching.remote.InternalAntRunner.main（InternalAntRunner.java:138）

如果我运行由详细日志记录创建的命令行，在 wsimport 上，从 jax-ws bin 目录中一切正常

```
[wsimport] command line: wsimport -d C:\Development\Source\ccs\jaxws-output -extension -verbose -target 2.1 C:\Development\Source\ccs\wsdl\some.wsdl -wsdllocation http://localhost/wsdl 
```

我试图寻找解决方案，但现在我没有想法

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T13:32:49.807

我认为在您提到的方法中使用的一件乏味的事情 (`taskdef`和`wsimport`) 是添加环境变量，尤其是当您想在 Web 服务中使用 SSL 和基本身份验证时。另一方面，您可以在`wsimport`不定义新任务的情况下使用该工具。像这样的东西：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE project>
<project name="generate-client" default="main" basedir=".">
    <property name="java.home" 
        value="X:\Software\jdk1.7.0_11" />
    <property name="wsdl.location" 
        value="http://localhost/wsdl" />
    <target name="main">
        <exec executable="${java.home}\bin\wsimport.exe">
            <arg line="${wsdl.location} -s src -Xdebug -verbose -Xnocompile" />
        </exec>
    </target>
</project> 
```

既然有了想法，就可以自定义输出目录，添加目标版本...

# android - 如何在基于服务的android应用程序中发送数据

> ID：15429990
> 
> 赞同：3
> 
> 时间：2013-03-15T10:30:00.310
> 
> 标签：android, aidl

我想使用 AIDL 文件将数据从一个应用程序 A 发送到另一个应用程序 B。我的应用程序 A 如下所示，

```
public class LibValue  {       
    public static native int intFromJNI(int n);   
    static {
        System.loadLibrary("hello");
        System.out.println("LibValue : Loading library");
    } 
```

我从 JNI 文件中获得价值到上面的类。上述类中使用 AIDL 服务发送另一个应用程序 B 的数据如下所示。

```
IEventService.aidl

interface IEventService {

   int intFromJNI(in int n);
} 
```

为此，我编写了 IEventImpl.java 类

```
 public class IEventImpl extends IEventService.Stub{

        int result;

        @Override
        public int intFromJNI(int n) throws RemoteException {
            // TODO Auto-generated method stub

            System.out.println("IEventImpl"+LibValue.intFromJNI(n));
            return LibValue.intFromJNI(n);
        }
} 
```

要访问上面的类，我会写如下服务类

公共类 EventService 扩展服务 {

```
public IEventImpl iservice;

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub

    Log.i("EventService", "indside onBind");
    return this.iservice;
}

@Override
public void onCreate() {
    // TODO Auto-generated method stub
    super.onCreate();

    this.iservice = new IEventImpl();

    Log.i("EventService", "indside OncREATE");
}

@Override
public boolean onUnbind(Intent intent) {
    // TODO Auto-generated method stub
    return super.onUnbind(intent);
}

@Override
public void onDestroy() {
    // TODO Auto-generated method stub

    this.iservice = null;
    super.onDestroy();
} 
```

以上所有类都是服务器端的。下面的类是用于访问数据的 Client(app) 类。

```
public class EventClient extends Activity implements OnClickListener, ServiceConnection{    

    public IEventService myService;
    private Button button;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_event_client); 

        button = (Button)findViewById(R.id.button1);
        this.button.setOnClickListener(this);

    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();

        if (!super.bindService(new Intent(IEventService.class.getName()),
                this, BIND_AUTO_CREATE)) {
            Log.w("EventClient", "Failed to bind to service");
            System.out.println("inside on resume");
        }
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        super.unbindService(this);
    }

    @Override
    public void onServiceConnected(ComponentName name, IBinder service) {
        // TODO Auto-generated method stub

        this.myService = IEventService.Stub.asInterface(service);
        Log.i("EventClient", "ServiceConnected");

    }

    @Override
    public void onServiceDisconnected(ComponentName name) {
        // TODO Auto-generated method stub

        Log.d("EventClient", "onServiceDisconnected()'ed to " + name);
        // our IFibonacciService service is no longer connected
        this.myService = null;

    } 
```

我正在尝试从服务类访问数据，但无法找到方法。谁能告诉如何从服务访问数据到客户端应用程序？

谢谢

# jquery - jquery .get 在 ie9 中无法针对 google api 工作

> ID：15429995
> 
> 赞同：8
> 
> 时间：2013-03-15T10:30:12.803
> 
> 标签：jquery, ajax, get, google-api

我不明白为什么以下代码在 FF 中可以完美运行，但在 IE9 中却不行。

该脚本的作用是，在单击按钮时，它会从表单中选择一些值，例如街道、邮政编码和城镇，构建一个字符串，将其提交给 google，然后返回该地址的纬度和经度（并将其分为两个表格中的字段）

```
$("#google_coordinates").live("click", function(){

    var string = encodeURIComponent($('#sAddressStreet1').val())+",";
    if($('#sAddressStreet2').val() != ""){
        string += encodeURIComponent($('#sAddressStreet2').val())+",";
    }
    string += encodeURIComponent($('#sAddressPostalcode').val())+",";
    string += encodeURIComponent($('#sAddressTown').val())+",";
    string += encodeURIComponent($('#sAddressCountryCode option:selected').text());

/* test with an alert - string shows fine in both FF and IE */    
    alert(string);

    $.get("http://maps.googleapis.com/maps/api/geocode/xml?address="+string+"&sensor=false", function(xml){
       $(xml).find('location').each(function() {
           lat = $(this).find('lat').text();
           lng = $(this).find('lng').text();

/* test with an alert - fine in FF not in IE */    
alert(lat + ',' + lng);

               $("#sAddressLatitude").val(lat);

           $("#sAddressLongitude").val(lng);
       });
    });

    return false;
}); 
```

在这种情况下，此脚本提交的 url 是：=1363342459585">http://maps.googleapis.com/maps/api/geocode/xml?address=Servicev%C3%A4gen%207,311%2033,Falkenberg,Sweden&sensor=false& =1363342459585

我尝试将缓存更改为 false，使用 $.ajax 而不是 $.get 通过放入一些警报进行测试，但我似乎无法进入 $.get 函数

I've tried changing the MIME type as is suggested here [http://docs.jquery.com/Specifying_the_Data_Type_for_AJAX_Requests](http://docs.jquery.com/Specifying_the_Data_Type_for_AJAX_Requests), but that didn't help eather.

Any ideas anyone?

EDIT: Even tried with json result from google, to see if the problem lies in the XML, but that does not work either.

```
$.ajax({
    type: "GET",
    url: "http://maps.googleapis.com/maps/api/geocode/json?address="+string+"&sensor=false",
    dataType: "json",
    cache: false,
    success: function(json){
        alert("hiero");
        lat = json.results[0].geometry.location.lat;
        lng = json.results[0].geometry.location.lng;

        $("#sAddressLatitude").val(lat);
        $("#sAddressLongitude").val(lng);
    }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T12:43:42.407

Because you're performing a [cross-domain request](http://enable-cors.org/), the browser needs to support this. Most modern browsers (like FF and Chrome) support it, but IE9 only supports it when specific requirements are met.

[Here's what Microsoft has to say about it](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx), including some pointers on how to get it working (provided all the requirements as mentioned on the Microsoft page *can* be met).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T17:40:32.850

Did you try setting crossDomain to true in your $.ajax params?

Check the reference here for the crossDomain:bool param: [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

It should work seamlessly between browsers.

**Edit**

After checking jQuery's source, seems there's no mention of XDomainRequest (the way ie8/9 support CORS), so I'm not sure it works. Otherwise, if you really want to support those, make a wrapper around $.ajax with XDomainRequest if browser == ie9 or ie8.

# javascript - 真正跨浏览器获取文档高度的方法？

> ID：15429997
> 
> 赞同：0
> 
> 时间：2013-03-15T10:30:17.203
> 
> 标签：javascript, web-applications, web

我的 ASP.NET Web 应用程序页面上的 iframe 中包含一个控件。控件根据用户在其上选择的内容相应地更改其垂直大小（一些元素进入，其他元素退出）。因此，我必须精确设置 iframe 大小以显示整个控件，而不是在 iframe 与其下方的元素之间产生间隙。

在网络上的某个地方，我找到了一种以跨浏览器方式获取文档高度的方法：

```
 function getDocHeight(document) {
        return Math.max(
            Math.max(document.body.scrollHeight, document.documentElement.scrollHeight),
            Math.max(document.body.offsetHeight, document.documentElement.offsetHeight),
            Math.max(document.body.clientHeight, document.documentElement.clientHeight)
        );
    } 
```

因此，在控制页面上的 self.document.body.onload 上，我调用了这个函数：

```
 function adjustIframeHeight() {
        var iframe = window.parent.document.getElementById(window.frameElement.id);
        var iframeHeight = getDocHeight(iframe.contentWindow.document);
        iframe.style.height = iframeHeight + "px";
    } 
```

问题是它在 Firefox 中运行良好，但在某些情况下，控件的底部部分在 Chrome 和 IE 中被截断。

是否有一些真正的跨浏览器方法来获得这个高度，或者我做错了什么？谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:36:07.607

我会使用 jQuery 之类的东西来帮助解决这个问题（因为使用高度方法似乎因浏览器而异），这里有一些 jQuery 代码可以提供帮助：

```
$(document).height(); // height of HTML doc 
```