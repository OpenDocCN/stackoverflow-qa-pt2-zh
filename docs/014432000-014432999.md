# StackOverflow 问答 14432000-14432999

# javascript - textarea 重复字符串检查忽略前导和尾随空格

> ID：14432000
> 
> 赞同：1
> 
> 时间：2013-01-21T03:12:10.977
> 
> 标签：javascript, duplicates, duplicate-removal

用户将在一个`textarea`. 每个换行符将指示一个新序列。一些要求/限制：

*   不允许前导和尾随空格。
*   序列中的空白是可以的。
*   不允许出现空白序列
*   我宁愿不使用 JQuery。
*   存储重复项，以便向用户显示它们。

根据我的测试，我有一个可行的解决方案。我想确保我没有遗漏或忽略任何东西。我的问题是：

*   有没有更有效的方法来检查重复项？
*   是否有我的解决方案无法捕捉到的明显测试用例？

**工作示例**：http: [//jsbin.com/ivusuj/1/](http://jsbin.com/ivusuj/1/)

```
function duplicateCheck() {
    var output = document.getElementById('Output');
    output.innerHTML = '';
    var duplicateSerials = [];
    var count = 0;
    var textArea = document.getElementById('Serials'); 
    var serials = textArea.value.trim().split(/ *\n */);

    for(var i = 0;i < serials.length;i++){
      var serial = serials[i];

      if(serials.indexOf(serial) != serials.lastIndexOf(serial) && 
         duplicateSerials.indexOf(serial) == -1 && serial !== '') {        
        duplicateSerials.push(serial);
      }  

    }    

  // For testing
  output.innerHTML = '<pre>Serials:\t' + serials.toString() + "<br />" +
                     'Duplicates:\t' + duplicateSerials.toString() + "<br>" +
                     '</pre>';
} 
```

**注意：**以上内容用于客户端检查。服务器端也将执行相同的检查，以确保数据有效。

* * *

**更新**

方案对比：http: [//jsbin.com/ivusuj/4/edit](http://jsbin.com/ivusuj/4/edit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T04:00:30.820

我整理了一个 jsfiddle 她：http: [//jsfiddle.net/wrexroad/yFJjR/3/](http://jsfiddle.net/wrexroad/yFJjR/3/)

实际上以这种方式检查重复是非常低效的。

这不是检查重复项，而是将属性添加到属性名称为序列的对象中。然后它打印出所有的属性名称。

这样，如果您有重复项，它只会创建属性，然后覆盖它。

这是功能：

```
function duplicateCheck() {
    var output = document.getElementById('Output');
        output.innerHTML = '';

    var textArea = document.getElementById('Serials'); 
    var inputSerials = 
        textArea.value.trim().split(/ *\n */);
    var outputSerials = new Object();

    for(var i = 0;i < inputSerials.length;i++){
        var serial = inputSerials[i];

        //build an object whose properties are serials
        //if the serial exists, incremint a counter
        if(outputSerials[serial]){
            outputSerials[serial]++;
        }else{
            outputSerials[serial] = 1;
        }
    }    

   output.innerHTML = 
      'Serials: <br />'; 

   for(var i in outputSerials){
      output.innerHTML += i + " ";
   }

   output.innerHTML += 
      '<br /><br />Duplicate Serials: <br />'; 

    for(var i in outputSerials){
    //check to see if we have any duplicates
       if(outputSerials[i] > 1){
           output.innerHTML += i + " ";
       }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T03:38:05.910

我认为如果你使用一个对象来确定你以前看过哪些连续剧，你会得到明显更好的性能。更接近于这个：

```
var seen = {};
for (var i = 0, j = serials.length; i < j; ++i) {
  var serial = serials[i];
  if (seen.hasOwnProperty(serial)) {
    // Dupe code goes here.
    continue;
  }
  // Can't be a duplicate if we get to this point.
} 
```

虽然这不适用于使用句点的连续剧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T04:32:19.650

这是过滤掉重复项的解决方案。

```
function formatInput() {
    var arrUnique = [], dups = [],
    str = document.getElementById('Serials').value
        .replace(/\r\n?/g,'\n')
        // normalize newlines - not sure what PC's
        // return. Mac's are using \n's
        .replace(/(^((?!\n)\s)+|((?!\n)\s)+$)/gm,'')
        // trim each line
        .replace(/^\n+|\n+$|\n+(?=\n(?!\n))/g,''),
        // delete empty lines and trim the whole string
    arr = str.length ? str.split(/\n/) : [];
    // split each line, if any
    for (var i = 0; i < arr.length; i++) {
        if (arrUnique.indexOf(arr[i]) == -1)
            arrUnique.push(arr[i]);
        else dups.push(arr[i]);
    }
    //document.getElementById('Serials').value = arrUnique.join('\n');
    console.log('serials:', arr);
    console.log('unique:', arrUnique);
    console.log('duplicates:', dups);
} 
```

# c# - 在 Windows 8 (C#/XAML) 中同时播放一个音频文件

> ID：14432001
> 
> 赞同：0
> 
> 时间：2013-01-21T03:12:10.663
> 
> 标签：c#, audio, windows-8

我想从一个音频文件中同时播放多个音效。所以，我有一个 audio.wav 文件，我想在单击按钮时独立播放它。我在[这里](https://stackoverflow.com/questions/10960952/play-two-sounds-simultaneously-in-windows-8-metro-app-c-xaml)找到了类似的问题，但该解决方案对我不起作用，因为声音之间存在滞后。我也尝试从[这里](http://loekvandenouweland.com/index.php/2012/11/playing-wav-files-in-a-xamlc-windows-store-app-using-sharpdx/)使用 SharpDX，但声音之间仍然存在延迟，有时它不会播放。

在 Windows Phone 中，我使用 SoundEffect，它可以完美运行。我的问题有什么解决方案吗？

任何想法将不胜感激。:)

# php - 如何将数据保存到会话

> ID：14432003
> 
> 赞同：0
> 
> 时间：2013-01-21T03:12:41.910
> 
> 标签：php, codeigniter

当用户单击“选择”链接时，我希望将选择的任何内容保存到会话中。然后另一个视图将显示会话中存储的所有项目。我怎样才能做到这一点？或者是否有更好的解决方案或方法可用于此应用程序？

这是我当前的代码：

```
<?php
foreach($query as $row){
  echo $row ->firstname; 
  echo $row ->lastname;
  echo "<a href=".base_url()."index.php/controller/function/$row->username /> Select </a>" 
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:37:50.923

这应该在您的控制器中：

```
function my_function($username) {
    $users = json_decode($this->session->userdata('users'), true);
    $users[] = $username;
    $this->session->set_userdata('users', json_encode($users));
    print_r($this->session->userdata('users'));
} 
```

确保[会话库已加载](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)。[建议自动加载](http://ellislab.com/codeigniter/user-guide/general/autoloader.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T03:34:22.013

例如，在页面顶部：

```
<?PHP
    session_start();

    if (isset($_SESSION['yourvar']))
        echo $_SESSION['yourvar'];
    else
        $_SESSION['yourvar'] = 10;
?> 
```

# django - 在 Django 中，如何在视图中生成 CSRF 输入元素？

> ID：14432004
> 
> 赞同：1
> 
> 时间：2013-01-21T03:12:43.673
> 
> 标签：django

在 Django 模板中，我可以使用`{% csrf_token %}`CSRF 标记作为值来生成隐藏的输入元素。

我如何在视图中做同样的事情？例如，

```
def my_view(request):
  csrf_input = somehow_generate_csrf_token_input()
  return HttpResponse(csrf_input) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T03:21:00.163

按照[文档](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#how-to-use-it)，使用处理器生成 CSRF 令牌：

```
from django.core.context_processors import csrf

def my_view(request):
    # csrf(request) returns a dict like {'csrf_token': 'xxx'}
    csrf_token = csrf(request)['csrf_token'] 
```

# perl - 使用 HTML::TreeBuilder::XPath 访问 href 值

> ID：14432005
> 
> 赞同：3
> 
> 时间：2013-01-21T03:13:08.593
> 
> 标签：perl, xpath

我正在使用[`LWP::UserAgent`](https://metacpan.org/module/LWP%3a%3aUserAgent), [`HTML::Selector::XPath`](https://metacpan.org/module/HTML%3a%3aSelector%3a%3aXPath)和 [`HTML::TreeBuilder::XPath`](https://metacpan.org/module/HTML%3a%3aTreeBuilder%3a%3aXPath)模块来获取`href`一组搜索结果中第一个 YouTube 视频的属性值。

到目前为止，我的代码是：

```
use LWP::UserAgent;
use HTML::TreeBuilder::XPath;
use HTML::Selector::XPath;

my $ua = LWP::UserAgent->new;

#my $response =..
my $html = "http://www.youtube.com/results?search_query=run+flo+rida";

my $tree = HTML::TreeBuilder::XPath->new;

my $xpath = HTML::Selector::XPath::selector_to_xpath("(//*[@id = 'search-results']/li)[1]/div[2]/h3/a/@href/");
my @nodes = $tree->findnodes($xpath);
print" $nodes[0]"; 
```

我不确定我的打印是否不正确，或者其他语法是否错误。截至目前它打印

```
HTML::TreeBuilder::XPath=HASH(0x1a78250) 
```

当我在找它打印时

```
/watch?v=JP68g3SYObU 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T04:35:54.523

这里有很多问题。

*   您*必须始终* 处于每个 Perl 程序的顶部`use strict`。`use warnings`它会捕获许多您很容易忽略的错误，并且仅在您寻求代码帮助时才礼貌。在这种情况下，它会警告您您的 XPath 字符串包含数组变量名称`@id`，`@href`并且您可能不打算将其插入到字符串中。

*   您正在使用`HTML::Selector::XPath`，它将 CSS 选择器转换为 XPath 表达式。但是您为它提供了一个 XPath 表达式，因此它不起作用并且不需要该模块。

*   根本不需要使用`LWP`，构造函数将为您获取 HTML 页面。`HTML::TreeBuilder``new_from_url`

该程序似乎可以满足您的需求。我还添加了从属性值`URI`中的相对 URL 派生绝对 URL 的模块。`href`

```
use strict;
use warnings;

use HTML::TreeBuilder::XPath;
use URI;

my $url = "http://www.youtube.com/results?search_query=run+flo+rida";

my $tree = HTML::TreeBuilder::XPath->new_from_url($url);

my $anchor = $tree->findnodes('//ol[@id="search-results"]//h3[@class="yt-lockup2-title"]/a/@href');
my $href = URI->new_abs($anchor->[0]->getValue, $url);
print $href; 
```

**输出**

```
http://www.youtube.com/watch?v=JP68g3SYObU 
```

# javascript - 在javascript中禁用布局

> ID：14432007
> 
> 赞同：1
> 
> 时间：2013-01-21T03:13:14.280
> 
> 标签：javascript, zend-framework

有没有等价于

`ZendFrameWork's disableLayout and setNoLayout for javascript`

在哪里我可以在没有网站渲染的情况下将对象打印到浏览器？

我问的原因只是方便和易于使用（对我来说）。以这种方式快速扫描数据对我来说比打印`objects`到`firebug's console`. （发现很难通过大尺寸点击我的方式`objects`）。

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T03:33:20.590

布局或标记由 Zend 呈现并由浏览器按原样接收。现在从技术上讲，如果您知道输出从哪里开始，您可以使用 jQuery 去除标记，但是您本身不能使用 javascript 禁用布局，因为浏览器不知道布局是什么以及内容是什么。

如果内容包含在一个 id 为“content”的容器中，那么它周围的一切就是布局。

你可以做到`jQuery("body").html(jQuery("#content"))`，只有那一部分会继续剥离其他一切。CSS 等仍将保留。您始终可以将 html 替换为结构化渲染，或者简单地将 head 标签设为 null 以删除样式。`$("head").remove();`

# php - jQuery - 带有 Eval() 的表单提交一般问卷

> ID：14432009
> 
> 赞同：2
> 
> 时间：2013-01-21T03:13:20.257
> 
> 标签：php, jquery, eval, form-submit

我使用 jquery 的 $.ajax() AP 将数据发送到服务器进行验证。（并非所有形式，但那些确实需要更多服务器端验证的形式）

因此，我的服务器端脚本接收 POSTED 数据，并且它是验证魔法。如果所有数据都经过验证，那么我只返回数字“1”，否则我返回零“0”

表单.html

```
<form class="systemform" id="testform">
   <input type="text" name="emailaddy" id="emailaddy" value="me@me.com" />
   <input type="submit" name="button" id="272746866" value="Submit Form">
</form>

<script language="javascript" type="text/javascript">
$(document).ready(function(){

   $("form.systemform").submit(function(){
      var formid = $(this).attr("id");
      var allFormValues = $(this).serialize();
      $.ajax({ url:"validate.php",
               data:allFormValues+"&formId="+formid,
               success:function(response){
                   if(response == "0"){ alert("invalid data"); }
                   if(response == "1"){ alert("data validated"); }

               }
       });return false;

});
</script> 
```

* * *

```
<?php
    // validate.php

      /* validate the serialized data here */

      die("1"); // if everything checks out
    ?> 
```

我很想听听有关这种验证表单数据的方法的其他意见/策略。好处是没有浏览器刷新。
但是现在我很好奇验证后最好执行什么。

目前，上面的代码并没有做太多。因此，`success`在 $.ajax API 的部分中，我有 eval() 方法等待从服务器端脚本获取指示。

```
success:function(response){
    eval(response); return false;
} 
```

eval() 通过传回 js 函数或命令，为服务器提供了更大的灵活性。

2 die() 例子：

```
<?php
//validation.php

die('alert("your email is incorrect");');  
die('$("selector").html("fix this part");');
?> 
```

我知道有人会想对 eval() 说些什么，而且它是不安全的。我想听听。我想知道为什么。（这对我们所有人都有好处）但是请详细说明一些好的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T03:21:53.923

`eval`在任何时候都可能不安全，因为它可以执行任何 JS 并且很容易对用户执行攻击。想象一下，黑客有能力执行任何脚本，并且可以向用户发送恶意 URL 或链接。如果他们使用特定的输入值，他们可以让你的服务器发出这个：

```
die('window.location.href = "http://evilsite.com"'); 
```

此外，您的客户端和服务器实现之间根本不应该存在耦合。可能依赖于某些元素名称，但不依赖于代码。当您尝试集成 php 代码和 JavaScript 时，您实际上会失去灵活性。如果`eval`真的更灵活，这可能表明您可能想要重新考虑如何在客户端处理事情。

至于进行服务器端验证与客户端验证，您总是需要分别进行。规避您可能拥有的任何类型的客户端安全性都是微不足道的。拥有它的唯一原因是为了用户方便（通过避免页面重新加载、突出显示受影响的字段等），但您还*需要*进行服务器端验证以保护自己。

我可以看到使用 ajax 进行验证的唯一原因是您是否需要检查数据库中的某些值（例如：查看是否已使用用户名）。我不会使用 ajax 来验证必填字段之类的东西。

# mysql - mySQL 表上的唯一字段 - 生成促销代码

> ID：14432013
> 
> 赞同：1
> 
> 时间：2013-01-21T03:14:06.990
> 
> 标签：mysql

我正在开发一个 PHP 脚本，我有一个这样的表：

```
TABLE_CODE
   code  varchar  8
   name  varchar  30 
```

此代码列必须是使用从 A 到 Z 的随机字母和从 0 到 9 的字符的代码，并且必须是唯一的。全大写。就像是

```
A4RTX33Z 
```

我已经创建了一种使用 PHP 生成此代码的方法。但这是一项繁重的任务，因为在继续之前我必须查询数据库以查看生成的代码是否唯一，并且表可能有很多记录。

因为我知道 mySQL 是一堆技巧，但现在还没有高级知识，所以我想知道是否可以在表中构建一些机制，以便每次在该表上创建新记录时运行脚本（或其他东西）用唯一值填充代码列。

谢谢

* * *

编辑：我想知道是否有一种方法可以即时创建代码，因为记录被添加到表中并且该代码是唯一的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:28:25.083

更好地在 SQL 中生成这些代码。这是 8 个字符的随机“促销代码生成器”：

```
INSERT IGNORE INTO 
TABLE_CODE(name, code)
VALUES(
    UPPER(SUBSTRING(MD5(RAND()) FROM 1 FOR 8)), -- random 8 characters fixed length
    'your code name'
) 
```

按照@JW 的建议添加字段，并`UNIQUE`在`code`PHP 中进行一些错误处理，因为有时生成的值可能不是`UNIQUE`，并且 MySQL 在这种情况下会引发错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T03:34:03.210

在代码列上添加 UNIQUE 约束是您需要做的第一件事。然后，要插入代码，我会写一个像这样的小循环：

```
// INSERT IGNORE will not generate an error if the code already exists
// rather, the affected rows will be 0.
$stmt = $db->prepare('INSERT IGNORE INTO table_code (code, name) VALUES (?, ?)');
$name = 'whatever name';
do {
    $code = func_to_generate_code();
    $stmt->execute(array($code, $name));
} while (!$stmt->rowCount()); // repeat until at least one row affected 
```

随着表的增长，循环次数可能会增加，因此如果您认为它应该只尝试 3 次，您可以将其添加为循环条件，如果发生这种情况则抛出错误。

顺便说一句，我建议使用事务来确保代码生成后是否发生错误，回滚将确保代码被删除（可以重用）。

# css - 如何启用和禁用 Vim 语法脚本？

> ID：14432014
> 
> 赞同：5
> 
> 时间：2013-01-21T03:14:27.710
> 
> 标签：css, vim, plugins

我正在使用[css_color.vim](http://www.vim.org/scripts/script.php?script_id=2150)插件用实际颜色突出显示 CSS 十六进制颜色代码。一直打开突出显示有点让人分心，所以我想知道是否有任何方法可以打开和关闭语法插件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T06:31:27.400

而是创建新语法。

将文件放入`.vim/syntax/css_color.vim`并`runtime syntax/css.vim`在顶部添加。现在它就像它自己的语法定义一样，恰好继承了基本的 CSS 语法。

当您想要具有智能颜色的 CSS 时，请使用`:setf css_color`. 当你想回到股票 CSS 时，`:setf css`.

* * *

编辑：绑定一个键：

```
function! ToggleCssColor()
    if &filetype == 'css'
        setf css_color
    else
        setf css
    endif
endfunction

noremap <Leader>c :call ToggleCssColor()<CR> 
```

然后`\``c`会在正常模式下在两种风格之间切换。您可以将密钥设置为您想要的任何内容，用于`inoremap`在插入模式下绑定密钥等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:24:52.600

看看替代插件。我使用[colorizer - Highlight #rrggbb 或 #rgb color](http://www.vim.org/scripts/script.php?script_id=3567)，因为它具有高级功能，不仅适用于 CSS，而且可以轻松打开/关闭。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T12:34:39.493

使用其他[Colorizer](http://www.vim.org/scripts/script.php?script_id=3963) [插件](http://www.vim.org/scripts/script.php?script_id=3567)之一。它们具有切换功能，通常在终端 vim 中工作得更好，加载速度更快。

# java - 当我从 TreeMap 打印出值时，为什么会得到一个空值列表？

> ID：14432015
> 
> 赞同：1
> 
> 时间：2013-01-21T03:14:57.997
> 
> 标签：java

我是 Java 新手，正在使用本网站上的 TreeMap 代码示例，但是当我尝试遍历 TreeMap 时，我得到一个空值列表，但是当我直接打印地图时，我可以看到键/值对。我该如何纠正这个问题？

```
import java.util.*;
public class Testing {

    public static void main(String[] args) {

        HashMap<String,Double> map = new HashMap<String,Double>();
        ValueComparator1 bvc =  new ValueComparator1(map);
        TreeMap<String,Double> sorted_map = new TreeMap<String,Double>(bvc);

        map.put("A",99.5);
        map.put("B",67.4);
        map.put("C",67.4);
        map.put("D",67.3);

        System.out.println("unsorted map: "+map);

        sorted_map.putAll(map);

        System.out.println("results: "+sorted_map);

        for(String key: sorted_map.keySet())
        {
            System.out.println(sorted_map.get(key)); //null values-Why?
        }
    }
}

class ValueComparator1 implements Comparator<String> {

    Map<String, Double> base;
    public ValueComparator1(Map<String, Double> base) {
        this.base = base;
    }

    // Note: this comparator imposes orderings that are inconsistent with equals.    
    public int compare(String a, String b) {
        if (base.get(a) >= base.get(b)) {
            return -1;
        } else {
            return 1;
        } // returning 0 would merge keys
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T03:38:17.747

它不起作用，因为当给定相同的键时，比较器不会返回 0，例如 compare("A", "A")。将其更改为

```
 public int compare(String a, String b) {
        Double va = base.get(a);
        Double vb = base.get(b);
        if(va > vb) {
            return -1;
        } else if(va < vb) {
            return 1;
        } else {
            return a.compareTo(b);
        }
    } 
```

它会起作用的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T03:42:57.840

对不起，但你的例子有点颠倒。您将键放入已排序的映射（树形映射）中，然后在按值比较的意义上将值用作键。看起来您正在寻找处理具有键和值的对象，因此您可能需要考虑以下内容。这肯定是处理“复合”概念的 OOP 方式，例如您正在使用地图建模的概念。

```
class Pair implements Comparable<Pair> {
    String value;
    double key;

    Pair(String value, double key) {
        this.value = value;
        this.key = key;
    }

    public int compareTo(Pair p) {
        return Double.compare(key, p.key);
    }

    public String toString(Pair p) {
        return value + "," + key;
    }
}

static void main(String[] args) {
    Set<Pair> unsortedSet = new HashSet<Pair>();
    unsortedSet.add(new Pair("A", 99.5));
    unsortedSet.add(new Pair("B", 67.4));
    unsortedSet.add(new Pair("C", 67.4));
    unsortedSet.add(new Pair("D", 67.3));

    Set<Pair> sortedSet = new TreeSet<Pair>();
    sortedSet.add(new Pair("A", 99.5));
    sortedSet.add(new Pair("B", 67.4));
    sortedSet.add(new Pair("C", 67.4));
    sortedSet.add(new Pair("D", 67.3));

    System.out.println("Unsorted set: " + unsortedSet);
    System.out.println("Sorted set: " + sortedSet);

    for (Pair pair : sortedSet) {
        System.out.println(pair);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T03:50:04.883

由于您的比较器永远不会返回 0 TreeMap.get() 不起作用。您仍然可以像这样迭代 TreeMap 条目

```
 for (Entry<String, Double> e : sorted_map.entrySet()) {
        System.out.println(e);
    } 
```

印刷

```
A=99.5
C=67.4
B=67.4
D=67.3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T03:57:26.847

Adam Crume 的代码非常重要。为了对此进行更多解释，当您调用您的 时`sorted_map.get(key)`，它会转到`java.util.TreeMap`class',`getEntryUsingComparator`方法，因为您已明确设置了比较器。这种方法看起来像

```
final Entry<K,V> getEntryUsingComparator(Object key) {
        K k = (K) key;
        Comparator<? super K> cpr = comparator;
        if (cpr != null) {
            Entry<K,V> p = root;
            while (p != null) {
                int cmp = cpr.compare(k, p.key);
                if (cmp < 0)
                    p = p.left;
                else if (cmp > 0)
                    p = p.right;
                else
                    return p;
            }
        }
        return null;
    } 
```

由于在`compare`值比较器的方法中存在键比较，因此条目将为空，因此值也将为空，因为`map.get`实现为

```
 public V get(Object key) {
        Entry<K,V> p = getEntry(key);
        return (p==null ? null : p.value);
    } 
```

# python - 在不区分大小写的字符串查找之前和之后插入

> ID：14432020
> 
> 赞同：2
> 
> 时间：2013-01-21T03:15:29.223
> 
> 标签：python, regex

我试图在另一个字符串中找到一个字符串，并在每次以不区分大小写的方式找到它之前和之后插入文本。

我想出了以下方法，它有效，但感觉不太理想，所以我想知道是否有人有更有效的方法。

```
import re

test_string = "My name is Jon not jon."

search = re.compile(re.escape('jon'), re.IGNORECASE)

find = re.findall(search, test_string)

for found in find:
    test_string = test_string.replace(found, '<span>%s</span>' % found)

print test_string

"My name is <span>Jon</span> not <span>jon</span>" 
```

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T03:19:14.217

这是`re.sub`为了：

```
>>> re.sub('(?i)(jon)', r'<span>\1</span>', s)
'My name is <span>Jon</span> not <span>jon</span>.' 
```

（注意我使用了`(?i)`代替`re.I`（但是，两者之间没有区别），并捕获了组，这是`\1`替换字符串）

另一方面：您可能希望考虑使用单词边界或类似的词，以便您实际上只替换单词“jon”，而不是说“jonathan”等 - 取决于要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T03:22:59.630

```
import re
test_string = "My name is Jon not jon."
output = re.sub('([jJ]on)',r'<span>\1</span>', test_string)
print output 
```

输出：

```
My name is <span>Jon</span> not <span>jon</span>. 
```

如果您想更明智地过滤您的正则表达式匹配，最好在like`space`之前和之后放置一个。所以它只会匹配单词。`[Jj]on``( [Jj]on )``jon`

```
output = re.sub('( [jJ]on )',r'<span>\1</span>', test_string) 
```

或 **编辑：** 正如@Jon Clements 建议的那样，您可以使用单词边界而不是空格。

# python - PySide：分离精灵表/将图像分离成连续的颜色区域

> ID：14432021
> 
> 赞同：3
> 
> 时间：2013-01-21T03:15:34.967
> 
> 标签：python, image-processing, pyside, sprite-sheet

我正在开发一个程序，**我需要在其中分离 spritesheets**，或者换句话说，**将图像分离成连续的颜色区域。**

我以前从来没有做过任何图像处理，所以我想知道我会怎么做。测试像素颜色后我会做什么？确定每个精灵对应哪个像素的最佳方法是什么？

所有输入图像都有统一的背景，与背景不同的 alpha 通道算作颜色。输出图像的顺序需要从左到右，从上到下。我的项目是用 PySide 编写的，所以我也希望将它用于此任务，但如有必要，我可以导入更多库。

感谢您的回复！

PS：我不确定 PySide 标签是否合适，因为我使用的是 PySide，但问题不涉及它的 GUI 方面。如果一个模组觉得它不属于它，请随意删除它。

* * *

例如，我有一个看起来像这样的精灵表：

![输入图像](../Images/4f37b0fa2907116dff5790ff59dc70c9.png)

我想把它分成这些：

![输出 1](../Images/f5ca020a98a209d95ce31ddb25330a2a.png) ![输出 2](../Images/295913f77be7a53496241cda173d761d.png) ![输出 3](../Images/dbd1b1cb6df4d9672d2a57c9b191848b.png) ![输出 4](../Images/7207cd57991ce50620ca36c3fb07ea29.png) ![输出 5](../Images/517529771a8f75b4c4776e32cda58f50.png) ![输出 6](../Images/070a0aa215a6aaf4725e2f60cd5a6f25.png) ![输出 7](../Images/8a5a3667a77f97452e4c25a257fd521c.png) ![输出 8](../Images/08ddd89cf255944b8ce297de619d09dc.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T04:08:35.503

这听起来像是应该在任何处理精灵的东西中实现的东西，但在这里我们将实现我们自己的精灵分割器。

我们在这里需要做的第一件事是提取单个对象。在这种情况下，只需要确定一个像素是否是背景像素。如果我们假设原点是背景像素，那么我们就完成了：

```
from PIL import Image

def sprite_mask(img, bg_point=(0, 0)):
    width, height = img.size
    im = img.load()

    bg = im[bg_point]
    mask_img = Image.new('L', img.size)
    mask = mask_img.load()
    for x in xrange(width):
        for y in xrange(height):
            if im[x, y] != bg:
                mask[x, y] = 255
    return mask_img, bg 
```

如果您保存`mask`上面创建的图像并打开它，您会看到以下内容（我在您的空窗口中添加了一个矩形）：

![在此处输入图像描述](../Images/7a5e2c7104d24de023c9ae2f3a3d6ff3.png)

有了上图，如果我们想加入其他内部的精灵（如添加的矩形，见上图），接下来我们需要填充它的洞。这是另一个简单的规则：如果从 [0, 0] 处的点无法到达某个点，那么它就是一个洞，必须将其填充。剩下的就是在单独的图像中分离每个精灵。这是通过连接组件标记来完成的。对于每个组件，我们获取其轴对齐的边界框以定义块的尺寸，然后我们从原始图像中复制属于给定组件的点。为了简短起见，以下代码`scipy`用于这些任务：

```
import sys
import numpy
from scipy.ndimage import label, morphology

def split_sprite(img, mask, bg, join_interior=True, basename='sprite_%d.png'):
    im = img.load()

    m = numpy.array(mask, dtype=numpy.uint8)
    if join_interior:
        m = morphology.binary_fill_holes(m)
    lbl, ncc = label(m, numpy.ones((3, 3)))

    for i in xrange(1, ncc + 1):
        px, py = numpy.nonzero(lbl == i)
        xmin, xmax, ymin, ymax = px.min(), px.max(), py.min(), py.max()

        sprite = Image.new(img.mode, (ymax - ymin + 1, xmax - xmin + 1), bg)
        sp = sprite.load()
        for x, y in zip(px, py):
            x, y = int(x), int(y)
            sp[y - int(ymin), x - int(xmin)] = im[y, x]

        name = basename % i
        sprite.save(name)
        print "Wrote %s" % name

sprite = Image.open(sys.argv[1])
mask, bg = sprite_mask(sprite)
split_sprite(sprite, mask, bg) 
```

现在您拥有与问题中包含的完全相同的所有部分（sprite_1.png、sprite_2.png、...、sprite_8.png）。

# php - 使用 simple_html_dom.php 并提取行和列但丢失标签&

> ID：14432022
> 
> 赞同：1
> 
> 时间：2013-01-21T03:16:02.997
> 
> 标签：php, dom

桌子

```
<table>
<tr>
<td>text <sub>1</sub></td>
<td>text 2</td>
<td>text <sup>3</sup></td>
</tr>
<tr>
<td>text <sub>11</sub></td>
<td>text 12</td>
<td>text <sup>13</sup></td>
</tr>
<tr>
<td>text <sub>1</sub></td>
<td>text 2</td>
<td>text <sup>3</sup></td>
</tr>
<tr>
<td>text 12</td>
<td>text 22</td>
<td>text 32</td>
</tr>
</table> 
```

我想提取所有 tr's 和 td' 并将所有 td' 存储在数据库表行中

我试过 simple_html_dom.php

它工作正常，但删除/删除/消除标签就像 `<sub>1</sub>` 简而言之 `<sub>1</sub>`被 1 取代

我不想丢失标签 `<sub>1</sub>`

解决此问题的其他方法提取`<tr> & </tr>` **数组中的**所有内容，以便我可以将每一行存储在数组
中，这样我将拥有（

```
$tr[0]="     
    <td>text <sub>1</sub></td>
    <td>text 2</td>
    <td>text <sup>3</sup></td>
     ";

$tr[1]="     
    <td>text <sub>11</sub></td>
    <td>text 12</td>
    <td>text <sup>13</sup></td>
     ";

$tr[2]="     
<td>text 12</td>
<td>text 22</td>
<td>text 32</td>
     "; 
```

然后提取所有值并将它们存储在数据库中

我想要解决方案来分隔数组中的行（如上所述）或更改 simple_html_dom.php 来解决这个问题

任何其他解决方案...

我什至试过

```
$html = '<td class="header subject">T<sup>e</sup>x<sub>t</sub></td>';
//echo "<br>".$html;
$dom = new DOMDocument();
$dom->loadHTML( $html );

// Text
echo "<br>".$dom->getElementsByTagName("td")->item(0)->textContent; 
```

但标签`T<sup>e</sup>x<sub>t</sub>`被删除，我得到纯文本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:53:57.490

以下删除不需要的标签

```
$str1 = preg_replace('/width.*?>/', '> ', $str1);
 $str1 = preg_replace('/<td style=.*?>/', '<td~> ', $str1);
 $str1 = preg_replace('/<col >/',  " ", $str1);
 $str1 = preg_replace('/<div.*?>/',  " ", $str1);
 $str1 = preg_replace('/<\/div>/',  " ", $str1);
 $str1 = preg_replace('/<span.*?an>/',  " ", $str1);
 $str1 = preg_replace('/<tr >/',  "<tr>", $str1);
 $str1 = preg_replace('/<table.*?>/',  "", $str1);
 $str1 = preg_replace('/<\/table>/',  "", $str1); 
```

因为`<table>`&`</table>`标签被删除（最重要的） preg_split 可以分隔数组中的行

```
$trr= preg_split('/<tr>/',  $str1); 
 echo count($trr); 
 print_r($trr); 
```

# macos - 神秘链接错误。我从哪说起呢？

> ID：14432024
> 
> 赞同：2
> 
> 时间：2013-01-21T03:16:20.240
> 
> 标签：macos, compiler-construction, matplotlib-basemap

我正在尝试从源代码构建底图工具包，以便 matplotlib 在 OS X 10.8 下的 MacBook Pro 上运行。C 和 C++ 编译器包含在最新的 Xcode 包中。该包包括geos-3.3.3 包，需要在构建主底图python 包之前单独构建和安装。当我使用提供的 Makefile 执行此操作时，当 makefile 尝试构建 libgeos.dylib 库时出现以下错误：

```
Undefined symbols for architecture x86_64:
  "std::auto_ptr<geos::geom::Envelope>::auto_ptr(std::auto_ptr_ref<geos::geom::Envelope>)", referenced from:
      virtual thunk to geos::geom::GeometryCollection::computeEnvelopeInternal() constin libgeom.a(GeometryCollection.o)
  "__ZNSt8auto_ptrIN4geos4geom8EnvelopeEEcvSt12auto_ptr_refIT_EIS2_EEv", referenced from:
      virtual thunk to geos::geom::GeometryCollection::computeEnvelopeInternal() constin libgeom.a(GeometryCollection.o)
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

在使用 gcc 4.7 的 Fedora 17 机器上，这个库可以成功构建，因此 Mac 编译器/链接器显然有问题。但是，我不知道如何解码此消息。例如，什么是“虚拟重击”？关于如何在 Mac 上编译和构建它的任何见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T01:31:57.003

我使用了不同的编译器，问题就消失了。尝试：

使 CXX=c++

为我工作。OSX 10.8.3，XCode 4.6.1。

# android - 使用 ActionBar 选项卡切换视图

> ID：14432027
> 
> 赞同：1
> 
> 时间：2013-01-21T03:17:06.383
> 
> 标签：android

有没有办法使用 ActionBar 选项卡，但选项卡切换 ContentViews 而不是片段？问题是我在大屏幕上有双窗格布局，两个窗格中的每一个都有一个片段，我想在选择该选项卡时切换整个容器视图。

目前我正在使用自己的选项卡机制，但我想更好地集成到 ActionBar 的内置功能和行为中，并尽可能通过不必有单独的 ActionBar 和选项卡栏来节省空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:07:12.510

来自操作栏文档——

> 要开始，您的布局必须包含一个 ViewGroup，您可以在其中放置与选项卡关联的每个 Fragment。确保 ViewGroup 具有资源 ID，以便您可以从选项卡交换代码中引用它。或者，如果选项卡内容将填充活动布局（不包括操作栏），那么您的活动根本不需要布局（您甚至不需要调用 setContentView()）。相反，您可以将每个片段放在默认的根 ViewGroup 中，您可以使用 android.R.id.content ID 来引用它（您可以在片段事务期间在下面的示例代码中看到此 ID）。

`ActionBar.TabListener`如果你为你的 Activity 指定了一个包含两个 Fragment 的插槽的布局，你可以在回调中同时替换它们（或者甚至只替换一个，如果这对你的应用有意义的话） 。回调仍然让您控制布局。

# iphone - 如何取消 NSOperationQueue

> ID：14432029
> 
> 赞同：3
> 
> 时间：2013-01-21T03:17:12.063
> 
> 标签：iphone, ios, cocoa-touch, nsoperationqueue

想知道我是否正确实施了以下方法，因为`isCancelled`没有取消线程。我有一个正在缩放的​​图像，当它完成缩放时，调用此方法来更新图像。因此，当用户将手指从按钮上移开时，这被称为。如果他们在完成之前尝试再次按下按钮，我会调用`cancelAllOperations`队列但它不起作用。甚至不确定 cancelAllOperations 是否触发标志，或者我是否需要继续调用它以获得结果。有人对此有任何见解吗？

```
- (void) refreshImage
{
    NSBlockOperation *operation = [[NSBlockOperation alloc] init];
    __unsafe_unretained NSBlockOperation *weakOperation = operation;

    [operation addExecutionBlock:
     ^{
         UIImage *image = [[self.graphicLayer imageForSize:self.size] retain];
         if (![weakOperation isCancelled])
         {
             [[NSOperationQueue mainQueue] addOperationWithBlock:
              ^{
                  self.image = image;
                  [image release];
              }];
         }
         else
         {
             [image release];
             return;
         }
     }];

    [self.queue addOperation: operation];
    [operation release];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:40:31.273

发现问题，必须更换：

```
__unsafe_unretained NSBlockOperation *weakOperation = operation; 
```

和：

```
__block NSBlockOperation *weakOperation = operation; 
```

顺便说一句，对于任何感兴趣的人，都有一个关于并发的好视频，特别是在一个单独的线程上绘制并`NSOperationQueue`在 WWDC2012 中使用 's 在 IOS 上构建并发用户界面。

# c - 检查 *char[] 的指针是否为 NULL 而不会破坏 gcc

> ID：14432030
> 
> 赞同：1
> 
> 时间：2013-01-21T03:17:21.767
> 
> 标签：c, pointers, gcc, syntax, null

我有`char *words[]`它可以容纳不同长度的字符串。

让我们`words`包含 5 个动态分配的字符串：`["zero","one","two","three","four"]`.

我释放了其中一个字符串并将其指针设置为`NULL`：

```
free(words[1]);
*(words[1]) = NULL; 
```

稍后我遍历`words`数组并检查每个项目是否`NULL`像这样：

```
if(*words[i] == NULL) 
```

当我编译 gcc 时说`warning: comparison between pointer and integer`. 一些谷歌搜索告诉我，我可以通过将检查更改为：

`if(*words[i] == 0)`或者`if(*words[i])`

我知道它很挑剔，但这些检查并不像使用`NULL`. 有没有办法在`NULL`不改变 gcc 标志或使用`#define`-esque 解决方案的情况下进行比较？

* * *

作为参考，我的编译命令是：

```
gcc -m32 -g -O0 -std=gnu99 -Wall -Wfloat-equal -Wtype-limits -Wpointer-arith -Wlogical-op -fno-diagnostics-show-option  -m32  words.c   -o words 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T03:24:16.367

代码没有按照你的想法做。`*words[i]`为您提供第 i 个字符串中的第一个字符（即 a `char`），而不是第 i 个字符串本身（即 a `char*`）。你想要的只是`words[i]`. 请记住，在 C`char* words[]`中基本上是`char** words`.

警告来自 C 认为`char`是整数的事实。在这种情况下，编译器警告您是一件好事！

# java - 用于重复事件的 Java 日期库

> ID：14432032
> 
> 赞同：4
> 
> 时间：2013-01-21T03:17:54.807
> 
> 标签：java, date

我正在编写一个需要支持事件的日期和日期范围的应用程序。我特别希望能够为定期重复的活动提供强有力的支持，例如商店营业时间或定期旅行。我希望能够支持用户输入查询，例如：

“我们每个工作日上午 8 点至下午 6 点开放，周六上午 8 点至 10 点开放”
“我每周五下午 6 点至晚上 10 点有空，每个月的第三个星期五除外”
“每月 25 日定期会议”“定期
会议从 11 月 3 日开始，每 28 天举行一次会议”

然后，能够快速判断给定的 DateTime 是否在指定的范围内，或者两个用户指定的时间之间的重叠在哪里。

有没有可以满足我需求的图书馆？

编辑：澄清一下，我并不特别需要自然语言解析，只需要复杂的间隔和重叠。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T03:37:26.853

你应该看看 Joda-Time [http://joda-time.sourceforge.net/](http://joda-time.sourceforge.net/)。它几乎是最好的 Java 日期时间库，我认为您可以使用间隔来指定商店何时开放：Joda-Time 中的间隔表示从一个瞬间到另一个瞬间的时间间隔。
您还应该查看[http://code.google.com/p/google-rfc-2445/](http://code.google.com/p/google-rfc-2445/)，因为它似乎更接近您想要使用的重复事件。另外我认为这个库实际上使用了 Joda Time。

# powershell - 是否有一个 PowerShell 命令来复制和重命名文件？

> ID：14432033
> 
> 赞同：32
> 
> 时间：2013-01-21T03:17:55.677
> 
> 标签：powershell

我正在使用以下命令将文件从网络共享复制到基于 CSV 文件的本地硬盘驱动器。

```
import-csv C:\TEST\test.csv | foreach {copy-item -path $_.npath -destination 'C:\TEST\'} 
```

下一步是使用不同的 CSV 文件根据当前文件名重命名这些文件。

是否有一个命令可以让我复制和项目并重命名它？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-21T07:20:55.043

If you have a CSV containing two columns, oldfilepath and newfilename, then you can use the following.

```
Import-Csv C:\test.csv | % { Copy-Item -Path $_.oldfilepath -Destination "C:\TEST\$($_.newfilename)" } 
```

Notice how the `$_.newfilename` is encapsulated inside a `$()`. That's because `$_.newfilename` is an expression (since we are getting a property out of the variable), and not a variable. `$()` tells PowerShell to solve the expression before using it in the string. If we don't use it, it would have used the whole csv-object for that row(`$_`) as a string and returned an error.

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-01-21T03:22:05.527

如果您的原始 CSV 中也有新名称，您将能够使用它在复制路径的末尾指定一个文件名。复制项 CMDlet 允许您指定目标文件名

```
Copy-Item C:\TEST\file1.jpg C:\TEST\file2.jpg 
```

将复制 file1.jpg 并将其重命名为 file2.jpg

要将变量连接到路径字符串的末尾，您可以使用这样的双引号：

```
Copy-Item C:\Path\To\File\file.ext "C:\Path\To\New\File\$newfilename" 
```

请注意， -path 和 -destination 并不是真正必要的，因为它们是由位置暗示的。

# maven - 如何让maven使用版本范围内的最新版本？

> ID：14432039
> 
> 赞同：20
> 
> 时间：2013-01-21T03:19:05.450
> 
> 标签：maven, maven-2

在我的 Maven 项目中，我使用这样的依赖项：

```
<dependency>
    <groupId>org.apache.httpcomponents</groupId>
    <artifactId>httpclient</artifactId>
    <version>[4.2.2, 5.0)</version>
</dependency> 
```

由于下一个主要版本（5.0）可能会更改 API，我希望我的项目使用可用于分支 4.x 的最新**稳定**版本。

今天早上的错误调查告诉我这个表达式 [4.2.2, 5.0) 可以抓取**任何**可用的版本。就我而言：4.3-alpha1。

如何让maven使用版本范围内的最新版本？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-21T08:32:37.033

查看[Maven range selections](https://cwiki.apache.org/confluence/display/MAVENOLD/Dependency+Mediation+and+Conflict+Resolution)的文档，我注意到以下评论：

> 依赖范围的解析不应解析为快照（开发版本），除非它被包含为显式边界。

除非工件版本以 结尾，否则`-SNAPSHOT`Maven 将认为它是有效的发布版本。据我所知，`-alpha1`对 Maven 没有特殊意义。这只是另一个随机限定符。

无论如何，我强烈建议您放弃版本范围。可预测的构建应该是任何稳定项目的目标，而版本范围则与此背道而驰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-21T14:08:35.420

Maven 3 也支持 alpha、beta 和快照的版本控制，顺序如下 `alpha < beta < snapshot`

# c++ - C ++中的浮点格式

> ID：14432043
> 
> 赞同：23
> 
> 时间：2013-01-21T03:19:23.567
> 
> 标签：c++, floating-point, cout

如何在 C++ 中格式化浮点数以输出到四舍五入的两位小数？我没有运气，`setw`因为`setprecision`我的编译器只是告诉我它们是`not defined`.

`cout << "Total : " << setw(2) << total << endl;`

总产出：`Total : 12.3961`

我希望它是：`12.40`或者`12.39`如果它的工作量太大而无法汇总。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-21T03:23:00.377

您需要包含`<iomanip>`并提供命名空间范围`setw and setprecision`

```
#include <iomanip>
std::setw(2)
std::setprecision(5) 
```

尝试：

```
cout.precision(5);
cout << "Total : " << setw(4)   << floor(total*100)/100 << endl; 
```

或者

```
 cout << "Total : " << setw(4)   << ceil(total*10)/10 << endl; 
```

iostream 提供了精度功能，但要使用 setw，您可能需要包含额外的头文件。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-08-05T22:58:47.450

使用`cout << fixed`or`cout.setf(ios::fixed)`和`std::cout.precision(<# of decimal digits>)`，如下所示（使用 OSX Mavericks 附带的 Clang-503.0.40 编译器）：

```
#include <iostream>

int main()
{
   using namespace std;

   float loge = 2.718;
   double fake = 1234567.818;
   cout << fixed;
   cout.precision(2);
   cout << "loge(2) = " << loge << endl;
   cout << "fake(2) = " << fake << endl;
   cout.precision(3);
   cout << "loge(3) = " << loge << endl;
   cout << "fake(3) = " << fake << endl;
} 
```

输出是（注意四舍五入）：

```
loge(2) = 2.72
fake(2) = 1234567.82
loge(3) = 2.718
fake(3) = 1234567.818 
```

这是简单的版本。代替 using `cout << fixed;`，您可以使用`cout.setf(ios::fixed);`（用于显示科学记数法，将*fixed*替换为*Scientific*；两者都将设置小数点右侧的位数）。*请注意，如果格式标志不包括fixed*或*scientific*，则 cout.precision() 还用于设置小数点两侧总显示的位数。网上有这方面的教程。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-01-21T04:11:49.800

要还包括尾随零，仅设置精度是不够的。您还必须将浮点格式更改为*固定*格式，它使用所告知的位数作为`setprecision`小数点*后的位数*：

```
std::cout << std::fixed << std::setprecision(2) << v; 
```

[在线工作示例代码](http://ideone.com/fAgESu)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-21T03:29:17.927

如果你想从四舍五入中得到尾随零，你可以使用 C 函数`printf`。

```
#include <iostream>
#include <cstdio>

int main() {
    float v = 12.3961;
    std::printf("%.2f",v); //prints 12.40
} 
```

相比：

```
#include <iostream>
#include <iomanip>

int main() {
    float v = 12.3961;
    std::cout << std::setprecision(4) << v; //prints 12.4
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-05-27T16:12:52.670

你可以用 C++20 做到这一点[`std::format`](https://en.cppreference.com/w/cpp/utility/format/format)：

```
std::cout << std::format("Total     : {:.2f}\n", total); 
```

或[{fmt} 库](https://github.com/fmtlib/fmt)`fmt::format`中的函数，基于。{fmt} 还提供了整合格式化和输出的功能，使它更容易和更高效（[godbolt](https://godbolt.org/z/1f6Yddq8r)）：`std::format``print`

```
#include <fmt/core.h>

int main() {
  fmt::print("Total     : {:.2f}\n", 12.3961);
} 
```

输出：

```
Total     : 12.40 
```

这使用 IEEE754 默认舍入模式（四舍五入到最接近的偶数），因此您必须自己四舍五入（[如何向上/向下舍入浮点值的小数位？C++](https://stackoverflow.com/q/35107354/471164)）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-09-13T21:47:21.647

这个有点脏。。。

```
template <typename T>
string sFormat(const char *f, T value)
{
    char buffer[64];
    snprintf(buffer, sizeof(buffer), f, value);
    return string(buffer);
} 
```

并做这样的事情：

```
cout << "Result :" << sFormat(" %5.2f", 3.14) << sFormat(" %5d", 2300) << endl; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-31T11:01:05.370

当我在 Mac 上使用一些 C++ 时，只是偶然发现了这个问题 ..（Xcode 在 Intel 上安装 OSX 11.5.2）

这是我发现总结上面提供的内容并显示我的结果。

我发现令人惊讶的是，“cout << fixed”会杀死舍入和最后一位数字，从而导致您在下面看到的变化：

```
#include <iostream>
using namespace std;

int main() {
    // insert code here...

    int yearInt = 1972;
    cout << "yearInt = " << 1972 << "\n";

    double myDouble = 2.123456789123456789;
    cout << "myDouble = " << myDouble << "\n";

    cout.precision(2);
    cout << "Setting cout.precision(2)\n";
    cout << "myDouble = " << myDouble << "\n";
    cout.precision(3);
    cout << "Setting cout.precision(3)\n";
    cout << "myDouble = " << myDouble << "\n";
    cout.precision(4);
    cout << "Setting cout.precision(4)\n";
    cout << "myDouble = " << myDouble << "\n";
    cout.precision(9);
    cout << "Setting cout.precision(9)\n";
    cout << "myDouble = " << myDouble << "\n";
    cout.precision(14);
    cout << "Setting cout.precision(14)\n";
    cout << "myDouble = " << myDouble << "\n";
    cout << fixed;
    cout.precision(14);
    cout << "Setting cout.fixed & cout.precision(14)\n";
    cout << "myDouble = " << myDouble << "\n";

    return 0;
} 
```

给出：

```
yearInt = 1972                   // as expected
myDouble = 2.12346               // default showing 5 decimal places displayed, but you can see it's rounded up also
Setting cout.precision(2)
myDouble = 2.1                   // should be 2, but it's showing 1, rounded down from .12
Setting cout.precision(3)
myDouble = 2.12                  // should be 3, but it's showing 2, rounded down from .123
Setting cout.precision(4)
myDouble = 2.123                 // should be 4, but it's showing 3, rounded down from .1234
Setting cout.precision(9)
myDouble = 2.12345679            // should be 9, but it's showing 8, rounded up from .123456789
Setting cout.precision(14)
myDouble = 2.1234567891235       // should be 14, but it's showing 13, rounded up from . .. 2345
Setting cout.fixed & cout.precision(14)
myDouble = 2.12345678912346      // should be 14 places and it is, but still rounding up
Program ended with exit code: 0 
```

# c++ - 用于按位运算的高性能库？

> ID：14432050
> 
> 赞同：11
> 
> 时间：2013-01-21T03:20:20.133
> 
> 标签：c++, c, performance, bit-manipulation

处理非常大的布尔数据集，尝试使用按位操作来处理它，寻找一些处理位集的库，可以：

1.  动态集合，可以通过指针或引用传递。
2.  按位读写。
3.  计数设置位和快速。

显然`std::bitset`，它的功能太有限了，有什么建议吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-21T03:37:01.773

[GMP](http://gmplib.org/)在任意大小的自然数上提供[低级位函数。](http://gmplib.org/manual/Low_002dlevel-Functions.html#Low_002dlevel-Functions)这些是“低级 GMP 功能，用于实现高级 GMP 功能，但也适用于时间关键的用户代码”。

这些包括`mpn_popcount`计数 1 位和`mpn_copyi`提取子序列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T10:12:01.917

BitMagic[库](http://bmagic.sourceforge.net/index.html)也可能是您的朋友。

# r - 如何从 R 中的 linux 进程状态（ps）命令读取输出？

> ID：14432052
> 
> 赞同：5
> 
> 时间：2013-01-21T03:20:36.830
> 
> 标签：r, memory, io, system, text-formatting

这是data.txt：

```
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND  
root         1  0.0  0.0   2280   728 ?        Ss   20:44   0:00 init [2]    
root         2  0.0  0.0      0     0 ?        S    20:44   0:00 [kthreadd]  
root       202  0.0  0.0      0     0 ?        S<   20:44   0:00 [ext4-dio-unwri  
root       334  0.0  0.1   2916  1452 ?        Ss   20:44   0:00 udevd --daemon 
```

如何将数据读入data.frame？
1.can not to determine separator
最后一个字段有问题，`space`不能是分隔符，
init [2] ,udevd --daemon 是一个字段，不能用.分隔`space`。
2.没有固定宽度
，每条线都有不同的宽度。

那么，我怎样才能将 data.txt 读入 data.frame？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T12:47:42.047

我会这样做：

```
library(stringr) # has a convenient function for splitting to a fixed length 

raw          <- system("ps aux", intern = TRUE)
fields       <- strsplit(raw[1], " +")[[1]]
ps           <- str_split_fixed(raw[-1], " +", n = length(fields))
colnames(ps) <- fields 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T10:15:33.207

这是一个可以解决问题的单线：

```
do.call(rbind, lapply(strsplit(readLines("data.txt"), "\\s+"), function(fields) c(fields[1:10], paste(fields[-(1:10)], collapse = " ")))) 
```

这是它的详细操作：

1.  通过读取文件的所有行`readLines`（产生一个字符向量，其中每个向量元素都是文件的一行）

2.  用于`strsplit`将每一行拆分为由空格分隔的字符串 ( `\\s+`)

3.  对于每一行（`lapply`），将第 10 个字段之后的所有字段合并为一个（通过`paste(..., collapse = " ")`）---这将创建一个列表，其中每个列表元素代表文件的一行，并且是长度为 11 的字符向量（每个字段一个)

4.  最后，调用`rbind`将列表合并为矩阵（或数据框）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T03:29:06.530

你的数据是什么格式的？如果您可以在 Excel 中将其打开，则将其保存为制表符分层文件很可能是前进的最佳方式。

将文件另存为制表符分隔文件是准备数据以导入`R`. 这可以通过“另存为”“.txt（制表符分隔）”在 Excel 中完成。一旦完成：

```
my_data <- read.table("path/to/file/", header = TRUE, sep = "\t") 
```

`sep = "\t"`告诉 R 你的文件是制表符分隔的

# c# - 如何使用“this”而不是 Main.ActiveForm？

> ID：14432053
> 
> 赞同：1
> 
> 时间：2013-01-21T03:20:45.253
> 
> 标签：c#, .net

我有以下代码，当表单失去焦点时（单击另一个程序时）抛出 NullReference 异常：

```
namespace MyProg
{
    public partial class Main : Form
    {
        public Main()
        {
            InitializeComponent();
        }

        private void Main_Load(object sender, EventArgs e)
        {
            Mouse Mouse = new Mouse();
            Thread Thread = new Thread(new ThreadStart(Mouse.Hook));
            Thread.Start();
        }

        internal static bool IsTransparent = true;
        internal static void TransparentForm()
        {
            Main.ActiveForm.TransparencyKey = (Main.IsTransparent ? Color.Firebrick : Color.AliceBlue);
        }
    }

    public class Mouse
    {
        public void Hook()
        {
            while(true)
            {
                if(Screen.AllScreens.Length > 1)
                {
                    if(Cursor.Position.X < 1300)
                    {
                        Main.IsTransparent = true;
                        Main.ActiveForm.Invoke(new MethodInvoker(Main.TransparentForm));
                    }
                    // .....
                }
            }
        }
} 
```

我怎样才能消除`Main.ActiveForm`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:46:02.210

根据规范[`Form.ActiveForm`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.activeform.aspx)，如果您的程序中没有任何表单处于活动状态（如果另一个程序具有焦点，就是这种情况），它应该返回 null。

尝试将调用包装在检查以确保不为空的`Main.ActiveForm.Invoke`内部。`if``Main.ActiveForm`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:37:22.953

作为对您问题的直接回答，请遵循您的代码样式：

```
Thread Thread = new Thread(new ParameterizedThreadStart(Mouse.Hook));
        Thread.Start(this); 
```

接着

```
public void Hook(object mainObject)
    {
        Main form = (Main)mainObject;
        while(true)
        {
             // ... 
```

# c - 是否有类似 Clojure 的 C STM 库

> ID：14432055
> 
> 赞同：10
> 
> 时间：2013-01-21T03:20:58.587
> 
> 标签：c, clojure, stm

是否有任何库将`ref`s、`atom`s 和`agent`s 带入 C 代码？

是否还有结构共享库供 C 伴随？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T04:15:50.140

据我所知没有。

即使有，恕我直言，它也不是特别适合 C 代码：

*   这些方法严重依赖 JVM 来提供**内存管理和垃圾收集**。特别是，结构共享意味着您不能轻易确定还有谁在使用数据结构的特定块。因此，当对结构组件的最后一个引用消失时，您真的希望自动 GC 将其清除。
*   STM 构造的用处实际上是在**并发情况下**。用 C 语言编写好的并发代码比用 JVM 语言编写好的并发代码要困难得多，因为在 JVM 语言中，线程支持无处不在，并且跨平台/库更加一致。
*   至少就它们在 Clojure 中的使用方式而言，STM 结构被设计用于**函数式编程语言**（即，函数是纯函数的语言，您通常通过组合高阶函数和数据不可变进行编码）。例如`swap!`，更新原子的函数本身就是一个高阶函数。

虽然我并不是说如果你有足够的决心，你就不能用 C 编写函数式 STM 代码……但它并不适合，而且你最终可能会重新发明像 Lisp 这样的东西。我想起了 Greenspun 的第十条编程规则：

> 任何足够复杂的 C 或 Fortran 程序都包含一个临时的、非正式指定的、充满错误的、缓慢的 Common Lisp 一半的实现。

基本上，为工作使用正确的工具:-)

# javascript - 为什么当我缩小窗口时谷歌地图会被阻止？

> ID：14432058
> 
> 赞同：0
> 
> 时间：2013-01-21T03:21:18.927
> 
> 标签：javascript, google-maps, google-maps-api-3, dojo

我有一个使用谷歌地图的[网页。](http://development.danrumney.com/development/cta-voronoi.html)我正在使用 Dojo，并且我创建了一个小部件来封装地图。

问题是，每当我缩小浏览器的宽度时，地图就会被白色区域覆盖，只有在我稍微扩大窗口时才会消失。在做了一些研究之后，我*认为*这与谷歌试图确保版权警告没有被隐藏有关。

如果您查看 v3 的[API 参考](https://developers.google.com/maps/documentation/javascript/reference#Map)，您将在 resize 事件下看到：

> 当 div 改变大小时，开发者应该在地图上触发这个事件： google.maps.event.trigger(map, 'resize')

因此，如果您查看我的[GMaps.js](http://development.danrumney.com/development/app/GMaps.js)文件：

```
 postCreate: function() {
        this._map = new gmaps.Map(this.domNode, this.mapOptions);
        win.global.GM = gmaps;
        on(win.global, 'resize', lang.hitch(this,function(){
            console.log("Resizing");
            gmaps.event.trigger(this._map, 'resize');
            this._map.setZoom( this._map.getZoom() );
        }))
    }, 
```

所以，我已经连接到窗口调整大小事件并且它肯定会触发，但它似乎没有帮助。

我的问题：

*   我认为这是由于 Google 试图保护其版权的理论是否正确？
*   如果没有，我还能做些什么来导致这个问题吗？
*   如果是这样，我需要做些什么来确保不会出现这个白色阻滞剂？

我在 Firefox 中看不到这个。我在 Chrome 版本 24.0.1312.52 m 中看到了这一点。这是在 Windows 上。

# python - 我们可以在 .NET ironpython 中加载 pandas DataFrame 吗？

> ID：14432059
> 
> 赞同：10
> 
> 时间：2013-01-21T03:21:21.000
> 
> 标签：python, .net, pandas, ironpython, python.net

我们可以使用 Iron python 在 .NET 空间中加载 pandas DataFrame 吗？如果不是，我正在考虑将 pandas df 转换为 csv 文件，然后在 .net 空间中读取。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T16:34:02.520

不，Pandas 与 CPython 紧密相关。就像你说的，你最好的办法是用 Pandas 在 CPython 中进行分析并将结果导出到 CSV。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-26T13:20:07.117

关于包括序列化在内的选项：

我仍在调查类似的案例——我们想在 python 中处理数据，然后在 c# 中使用结果。我们的要求是（最好）保持 python 部分平台独立，以便我们可以在 linux 或 windows 上运行我们的数字运算。长话短说，我们决定使用带有消息包的二进制序列化/反序列化：http: [//msgpack.org/index.html](http://msgpack.org/index.html)

我们将 DataFrame 值转换为列表，并序列化为文件：

```
import msgpack as mp
data_as_list = df.values.tolist()
mp.pack(data_as_list, open("d:\\msgpack1.mp",'wb')) 
```

然后在 C# 端，我们使用 MessagePack 的 .net 实现来反序列化数据：

```
using MsgPack;
var serializer =
   SerializationContext.Default.GetSerializer<MessagePackObject[][]>();
var unpackedObject = serializer.Unpack(File.OpenRead("d:\\msgpack1.mp")); 
```

二进制序列化的主要优点：

*   与基于文本的序列化格式（如 csv、json 或 xml）相比，更不容易出现任何与编码相关的问题
*   根据数据，它可能比 CSV 更快（在我们的例子中）： http: [//matthewrocklin.com/blog/work/2015/03/16/Fast-Serialization/](http://matthewrocklin.com/blog/work/2015/03/16/Fast-Serialization/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-30T16:54:47.757

可以使用 Python.NET 从 .NET 调用 CPython：

[https://github.com/pythonnet/pythonnet/tree/develop](https://github.com/pythonnet/pythonnet/tree/develop)

# html - css菜单子菜单水平

> ID：14432060
> 
> 赞同：3
> 
> 时间：2013-01-21T03:21:26.667
> 
> 标签：html, css

如何创建这样的 CSS 菜单和子菜单。

当我在菜单上单击或移动鼠标时，底部有一个小图标

![在此处输入图像描述](../Images/2e5fd7ad5916c1a9f1e58fb04ab362cb.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T03:36:36.243

HTML

```
<ul class="nav">
   <li><a href=#><span>Main item text</span><span class="bullet"></span></a>
      <ul>
        <li><a href=#><span>Sub item text</span><span class="bullet"></span></a></li>
      </ul>
   </li>
</ul> 
```

CSS

```
ul.nav li ul { position: absolute; display: none; }
ul.nav li { float: left; }
ul.nav li:hover ul { display: block; } 
```

当然，除此之外，您必须正确设置样式列表。在这里，您可以尝试它如何与子弹[http://jsfiddle.net/9r4Lf/1/一起使用](http://jsfiddle.net/9r4Lf/1/)

# openssl - DES中关于pc1操作的函数

> ID：14432074
> 
> 赞同：1
> 
> 时间：2013-01-21T03:24:09.003
> 
> 标签：openssl, des

当我阅读“openssl”的des来源时。有评论说“在 47 个简单的操作中做 PC1 :-) * 感谢 John Fletcher (john_fletcher@lccmail.ocf.llnl.gov) * 的灵感。:-)”

```
PERM_OP (d,c,t,4,0x0f0f0f0fL);
HPERM_OP(c,t,-2,0xcccc0000L);/
HPERM_OP(d,t,-2,0xcccc0000L);/
PERM_OP (d,c,t,1,0x55555555L);
PERM_OP (c,d,t,8,0x00ff00ffL);
PERM_OP (d,c,t,1,0x55555555L); 
```

它可以将 56 操作减少到 47 。

谁能告诉我这个理论。?

和数组 static const DES_LONG des_skb[8][64]={

它没有在算术语句中定义

为什么openssl优化了~~~？

# java - Java简单的for循环不迭代

> ID：14432078
> 
> 赞同：2
> 
> 时间：2013-01-21T03:24:41.143
> 
> 标签：java, for-loop, loops

在执行期间，该方法被调用并且整数`i`显示为`0`屏幕上。但是，for 循环内部没有输出，表明 for 循环没有执行。我还用断点对此进行了测试，并获得了相同的结果。任何帮助表示赞赏。

```
private void decrypt_btnActionPerformed(java.awt.event.ActionEvent evt) {
    int ciphertext_length = Ciphertext().length();
    String decrypted_char = "";
    int i = 0;

    System.out.println("increment" + i);    

    try {
        for (i = 0; i == ciphertext_length; i++) {

            System.out.println("test" + i);

            String cipher_current_char = getLetterAtIndex(Ciphertext(), i);
            int pos_char_in_alphabet = getIndexAtLetter(Alphabet(), cipher_current_char);

            decrypted_char = decrypted_char +
                getLetterAtIndex(Alphabet(), pos_char_in_alphabet - 5);

            status_label.setText(100 / i + "%");
        }
    } catch (Exception e) {
        e.getMessage();
    }

    plain_ta.setText(decrypted_char);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T03:25:42.500

```
 for (i = 0; i==ciphertext_length; i++){ 
```

很可能应该是

```
 for (i = 0; i<ciphertext_length; i++){ 
```

# c# - WCF：指定的注册表项在 base.Channel 调用中不存在

> ID：14432079
> 
> 赞同：20
> 
> 时间：2013-01-21T03:24:43.150
> 
> 标签：c#, wcf, exception, registry

执行以下 WCF 代码时出现错误：“指定的注册表项不存在”：

```
return base.Channel.GetRateSheet(request); 
```

这是使用它的方法的其余部分：

```
public GetRateSheetResponse GetRateSheet(GetRateSheetRequest request)
{
    return base.Channel.GetRateSheet(request);
} 
```

此端点的配置是：

```
<endpoint address="http://*********/*******/Service.svc"
          binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IBusinessService"
          name="Endpoint_RateSheetService"
          contract="*********.RateSheetService" /> 
```

这段代码曾经工作了好几个星期，今天早上开始抛出这个错误。

没有内部异常，我得到的唯一堆栈跟踪是：

```
at Microsoft.Win32.RegistryKey.Win32Error(Int32 errorCode, String str) 
```

我做了所有常见的轮胎踢：重新启动VS，重新启动机器，获得最新版本的源代码。

运行 XP 32 位。

[编辑：] 当我转到解决方案的 bin 文件夹并直接运行可执行文件时，它可以工作 - 没有错误。该错误仅在从 Visual Studio 运行时发生

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-21T04:26:57.040

似乎人们在为 .NET Framework 安装安全补丁后遇到了[类似的问题：](https://stackoverflow.com/questions/13141434/httpclient-request-throws-ioexception) [MS12-074：.NET Framework 中的漏洞可能允许远程代码执行：2012 年 11 月 13 日](http://support.microsoft.com/kb/2745030)

你可以[让微软在这里修复它](https://connect.microsoft.com/VisualStudio/feedback/details/773666/webrequest-create-eats-an-ioexception-on-the-first-call#details)

解决方法 - 添加以下注册表项：

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETFramework]
"LegacyWPADSupport"=dword:00000000 
```

对于 64 位机器

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\.NETFramework]
"LegacyWPADSupport"=dword:00000000 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-11T05:33:27.763

我今天在调试某些东西时遇到了这个问题。如果您在 VS 的调试设置中选中“仅我的代码”选项，异常就会消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-07T07:59:39.717

转到 --> Debug--> Exceptions 并取消选中“Common Language Runtime Exceptions”

这应该解决问题。

# php - php - 从包含模式的字符串中提取数字

> ID：14432081
> 
> 赞同：2
> 
> 时间：2013-01-21T03:24:58.087
> 
> 标签：php

我有一个这样的字符串

```
4-1,4-1,,,1-1,,5-4,2-1, 
```

我需要提取每对中的第一个数字。例如， ( **4** -1, **4** -1,,, **1** - 1,, **5** - 4, **2** -1 ,)

有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:27:37.287

```
$string = '4-1,4-1,,,1-1,,5-4,2-1,';

preg_match_all('/(\d+)-/', $string, $matches);
// search for 1 or more digits that are followed by a hyphen, and return all matches

print_r($matches[1]); 
```

输出：

```
Array
(
    [0] => 4
    [1] => 4
    [2] => 1
    [3] => 5
    [4] => 2
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T03:29:01.163

```
$couples = explode(",", $data);
$values = Array();

foreach ($couples as $couple)
{
    if ($couple != "")
    {
        $split = explode("-", $couple);
        $values[] = $split[0];
    }
} 
```

# jquery - jQuery单击加载视频/更改缩略图不起作用

> ID：14432083
> 
> 赞同：3
> 
> 时间：2013-01-21T03:25:05.073
> 
> 标签：jquery, html, css, vimeo

[大理念](http://bigideahelm.com/)

我正在研究这个 Vimeo 集成。当您单击特定缩略图时，我正在尝试换出视频。使用 addClass 和 removeClass 交换类的快速而肮脏的方法。还用 html 功能换出视频。

尝试在不重新加载页面的情况下执行此操作。它看起来像 html 更新，但视频没有正确更新。有人有什么想法吗？

这是HTML：

```
 <div class="thumbnails">
        <div class="jake"><img style="display:inline; position: relative;" src="wp-content/themes/skeleton/images/jake.jpg" /></div>
        <div class="katy"><img style="display:inline; position: relative;" src="wp-content/themes/skeleton/images/katy.jpg" /></div>
        <div class="cary"><img style="display:inline; position: relative;" src="wp-content/themes/skeleton/images/cary.jpg" /></div>
    </div> 
```

还有 jQuery 代码（我只包含了一段代码，每个视频缩略图都会重复）：

```
//CARY
jQuery(".cary").click(function(){
  jQuery('#videoplayer').html('<iframe src="http://player.vimeo.com/video/57695418?api=1" width="470" height="264" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>');

  if(!(jQuery('div').hasClass('jake'))) {
    jQuery('.cary').html('<img style="display:inline; position: relative;" src="wp-content/themes/skeleton/images/jake.jpg" />');
    jQuery('.cary').addClass('jake');
    jQuery('.jake').removeClass('cary');
  }

  if(!(jQuery('div').hasClass('katy'))) {
    jQuery('.cary').html('<img style="display:inline; position: relative;" src="wp-content/themes/skeleton/images/katy.jpg" />');
    jQuery('.cary').addClass('katy');
    jQuery('.katy').removeClass('cary');
  }

  if(!(jQuery('div').hasClass('roderick'))) {
    jQuery('.cary').html('<img style="display:inline; position: relative;" src="wp-content/themes/skeleton/images/roderick.jpg" />');
    jQuery('.cary').addClass('roderick');
    jQuery('.roderick').removeClass('cary');
  }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T03:48:49.907

使用 on 函数似乎可以更新 DOM，现在一切似乎都按预期工作。我试图更改页面上的元素，而不是显示/隐藏已加载的元素。

# linux - ec2实例上的linux cli选项卡自动完成功能损坏

> ID：14432088
> 
> 赞同：3
> 
> 时间：2013-01-21T03:25:55.913
> 
> 标签：linux, ubuntu, ec2-ami

当我制作 2 个新的 ubuntu x64 实例时，其中一个具有选项卡自动完成功能。另一个只是在切换时抛出空格。此外，第二个实例不会让我使用向上和向下箭头键循环浏览历史。

有谁知道如何解决这一问题。谷歌搜索没有提供太多。

两个实例之间的唯一区别是每个实例的大小。#1 是中号，#2 是小号。但两者都以相同的图像启动

```
ubuntu/images/ebs/ubuntu-precise-12.04-amd64-server-20121001 (ami-0d153248) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T07:03:58.773

好的，回答我自己的问题。

对于上述特定的 ubuntu ami，在添加用户时我必须使用

```
sudo adduser instead of useradd 
```

通过使用 adduser，它会放入一个 .bashrc 文件。我还没有花时间通过 bashrc 来查看哪些条目使选项卡起作用。但确实如此。如果有人感兴趣，这里是 .bashrc 文件。

```
# ~/.bashrc: executed by bash(1) for non-login shells.
# see /usr/share/doc/bash/examples/startup-files (in the package bash-doc)
# for examples

# If not running interactively, don't do anything
[ -z "$PS1" ] && return

# don't put duplicate lines or lines starting with space in the history.
# See bash(1) for more options
HISTCONTROL=ignoreboth

# append to the history file, don't overwrite it
shopt -s histappend

# for setting history length see HISTSIZE and HISTFILESIZE in bash(1)
HISTSIZE=1000
HISTFILESIZE=2000

# check the window size after each command and, if necessary,
# update the values of LINES and COLUMNS.
shopt -s checkwinsize

# If set, the pattern "**" used in a pathname expansion context will
# match all files and zero or more directories and subdirectories.
#shopt -s globstar

# make less more friendly for non-text input files, see lesspipe(1)
[ -x /usr/bin/lesspipe ] && eval "$(SHELL=/bin/sh lesspipe)"

# set variable identifying the chroot you work in (used in the prompt below)
if [ -z "$debian_chroot" ] && [ -r /etc/debian_chroot ]; then
    debian_chroot=$(cat /etc/debian_chroot)
fi

# set a fancy prompt (non-color, unless we know we "want" color)
case "$TERM" in
    xterm-color) color_prompt=yes;;
esac

# uncomment for a colored prompt, if the terminal has the capability; turned
# off by default to not distract the user: the focus in a terminal window
# should be on the output of commands, not on the prompt
#force_color_prompt=yes

if [ -n "$force_color_prompt" ]; then
    if [ -x /usr/bin/tput ] && tput setaf 1 >&/dev/null; then
    # We have color support; assume it's compliant with Ecma-48
    # (ISO/IEC-6429). (Lack of such support is extremely rare, and such
    # a case would tend to support setf rather than setaf.)
    color_prompt=yes
    else
    color_prompt=
    fi
fi

if [ "$color_prompt" = yes ]; then
    PS1='${debian_chroot:+($debian_chroot)}\[\033[01;32m\]\u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$ '
else
    PS1='${debian_chroot:+($debian_chroot)}\u@\h:\w\$ '
fi
unset color_prompt force_color_prompt

# If this is an xterm set the title to user@host:dir
case "$TERM" in
xterm*|rxvt*)
    PS1="\[\e]0;${debian_chroot:+($debian_chroot)}\u@\h: \w\a\]$PS1"
    ;;
*)
    ;;
esac

# enable color support of ls and also add handy aliases
if [ -x /usr/bin/dircolors ]; then
    test -r ~/.dircolors && eval "$(dircolors -b ~/.dircolors)" || eval "$(dircolors -b)"
    alias ls='ls --color=auto'
    #alias dir='dir --color=auto'
    #alias vdir='vdir --color=auto'

    alias grep='grep --color=auto'
    alias fgrep='fgrep --color=auto'
    alias egrep='egrep --color=auto'
fi

# some more ls aliases
alias ll='ls -alF'
alias la='ls -A'
alias l='ls -CF'

# Add an "alert" alias for long running commands.  Use like so:
#   sleep 10; alert
alias alert='notify-send --urgency=low -i "$([ $? = 0 ] && echo terminal || echo error)" "$(history|tail -n1|sed -e '\''s/^\s*[0-9]\+\s*//;s/[;&|]\s*alert$//'\'')"'

# Alias definitions.
# You may want to put all your additions into a separate file like
# ~/.bash_aliases, instead of adding them here directly.
# See /usr/share/doc/bash-doc/examples in the bash-doc package.

if [ -f ~/.bash_aliases ]; then
    . ~/.bash_aliases
fi

# enable programmable completion features (you don't need to enable
# this, if it's already enabled in /etc/bash.bashrc and /etc/profile
# sources /etc/bash.bashrc).
if [ -f /etc/bash_completion ] && ! shopt -oq posix; then
    . /etc/bash_completion
fi 
```

# html - 当 Spring Form 标签受限时该怎么办

> ID：14432089
> 
> 赞同：2
> 
> 时间：2013-01-21T03:26:01.483
> 
> 标签：html, spring, data-binding, spring-mvc

当使用**SpringMVC**并且**Spring Tag 库**没有您需要的标签时会发生什么？开发人员可以使用什么来允许自动**数据绑定**，开发人员现在是否必须使用旧的**数据绑定**方式，包括使用**http** * *request* *、**response**来获取和设置表单元素？

开发人员可以添加到**Spring-Form 标签**吗？我对如何解决这个问题感到困惑，因为我使用的是**html5格式的标签，并且它们在****Spring Tag 库**中不存在。

 **有人可以建议我处理此类问题的最佳方法。我一直在询问有关如何在**SpringMVC**`**<canvas>**`中使用标签的问题，以便它允许像 spring标签这样的自动**数据绑定**。****`<form>`****

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:15:11.813

您仍然可以通过提供与`name`您要绑定值的 pojo 中的字段名称相同的 canvas 标签的属性值来完成绑定。

例如。如果您在 pojo 中的字段名称是 myCanvas，那么您可以在`name`canvas 标签的属性中给出相同的名称。这样绑定就完成了。

希望这对您有所帮助。干杯。******

# c++ - 为什么这个 cpp 看到一个函数，而其对应的标头却没有？

> ID：14432092
> 
> 赞同：2
> 
> 时间：2013-01-21T03:26:09.033
> 
> 标签：c++

这个让我挠头太久了。

我在标题 test.h 中有以下内容：

```
inline void anything(){
std::cout<<" anything "<<ii;
} 
```

然后我有啊，其中包括test.h：

```
class Fooness{
public: 
Fooness(){
    anything(); //compiler reports "use of undeclared identifier"
    };
}; 
```

但是，如果我只是将函数定义移动到 a.cpp：

```
Fooness::Fooness(){
anything();
} 
```

有用。a.cpp 包含 test.h 其中包含 ah 为什么`anything()`只在 a.cpp 中可见而不是啊？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T03:32:40.393

正如您在评论中指出的那样，您包括`a.h`在内`test.h`，*反之亦然*。*由于循环依赖*（也称为*交叉包含*），这会引入错误，因为函数和类“未定义” 。

在您的情况下，当`.cpp`文件包含**时**`test.h`，它*首先包含`a.h`*然后定义函数，这显然不是您想要的，因为在处理时，未定义。**`anything();``a.h``anything()`**

 **在编译包含`test.h`(before `a.h`) 的单元时，您的代码会扩展为与此类似的内容，该单元本身首先包含`a.h`其他任何内容：

```
/* INCLUDED FROM a.h */
class Fooness{
public: 
Fooness(){
    anything();
    };
};

inline void anything() {
    ....
} 
```

如您所见，使用时没有`anything()`定义。但是，如果一个编译单元包含`a.h`(before `test.h`)，而它本身包含`test.h`，它会扩展为如下内容：

```
/* INCLUDED FROM test.h */
inline void anything() {
    ....
}

class Fooness{
public: 
Fooness(){
    anything();
    };
}; 
```

所以顺序是正确的。

为了使其在这两种情况下都能正常工作，您可以在包含之前进行前**向声明** ：`anything()``test.h``a.h`

***test.h*****的更正版本**：

```
#ifndef TEST_H
#define TEST_H

void anything(); // forward-declaration

#include "a.h"   // <-- this is important to be *below* the forward-declaration

inline void anything() {
    ....
}

// more stuff

#endif 
```

然后，当包含`test.h`(before `a.h`) 时，它会扩展为以下内容：

```
void anything();

/* INCLUDED FROM a.h */
class Fooness{
public: 
Fooness(){
    anything();
    };
};

inline void anything() {
    ....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T03:32:31.230

确保“未声明的标识符”是关于`anything()`而不是`ii`我在`operator<<`...中看到的**

# sql-server - 基于连接多行SQL Server更新表

> ID：14432094
> 
> 赞同：2
> 
> 时间：2013-01-21T03:26:11.140
> 
> 标签：sql-server, sql-update, inner-join

我正在尝试更新连接到另一个表的表中的某些行。左表按ID索引；右表连接在同一个 ID 上，但每个 ID 有多个行。我的查询看起来像：

```
UPDATE t1
SET    t1.modified = t2.created
FROM   table1 t1
       INNER JOIN table2 t2
            ON  t1.ID = t2.ID 
```

请注意，t1.modified 和 t2.created 都是日期时间。如前所述，t2 每个 ID 有几行，每行都有不同的 created 值（因此主键是 t2，created）。我想要做的是设置 t2.created=t1.modified 的最大值。但是，在加入时， t1.modified 值不会以特定顺序更新，因此无论哪一行最后更新，这就是 t1.modified 获得的值。我尝试使用 t1.modified=max(t2.created)，但显然我不能在更新查询中使用聚合函数，也不能使用 order 子句（即对行进行排序，以便更新的最后一行有效地成为更新查询中的 t2.created 的最新值。

非常感谢您能为我提供的任何帮助！谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:53:21.803

这个怎么样？这会满足你的需要吗？

```
UPDATE t1
   SET modified = isnull((SELECT max(t2.created) 
                            FROM table2 t2 
                           WHERE t2.ID = t1.ID), modified) 
  FROM table1 t1; 
```

如果返回值为 null，则使用 isnull 函数将 modified 设置为自身。这应该解决空问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-21T03:51:51.790

您可以这样做，尽管它可能不是标准 SQL。但是它应该适用于 SQL Server。

```
update t1 
    set t1.modified = (select max([created]) from t2 where t1.ID = t2.id) 
```

# java - 当 PreparedStatement.close 引发 SQLException 时，我应该采取什么措施？

> ID：14432095
> 
> 赞同：2
> 
> 时间：2013-01-21T03:26:15.903
> 
> 标签：java, sql, sqlexception

到目前为止，我从未见过 PreparedStatement throws an SQLException on `close`，但我想知道它何时会抛出异常以及处理它的最佳实践是什么。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:30:14.153

我会将其记录为警告。如果这种情况不时发生，我想调查这里发生了什么。

如果这是事务的一部分，我会中止并回滚事务（这可能也会失败，但我不想继续使用此连接）。所以我想，这意味着：如果方法已经有此异常，则作为 SQLException 重新抛出，否则作为 RuntimeException （因为这根本不应该发生，而且我不想因此而弄乱我声明的异常）。

如果这是在最后的清理步骤中提交之后，我会忽略它并继续尝试关闭其余的连接。

# android - 按下按钮时应用程序强制关闭

> ID：14432097
> 
> 赞同：-1
> 
> 时间：2013-01-21T03:26:20.030
> 
> 标签：android, layout, button, android-intent, onclicklistener

我刚刚开始一个新的应用程序，我添加了一个按钮，过去我没有遇到任何问题，但由于某种原因它现在不起作用。我只是想教那个按钮到另一个页面。你认为问题是什么？（忽略我还没有设置的微调器）

短信项目活动

```
public class TextingprojectActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button tut1 = (Button) findViewById(R.id.tutorial1);
        tut1.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                startActivity(new Intent("practice.practice.TUTORIALONE "));
            }
        });
    }
} 
```

教程1 Java

```
public class TutorialOne extends Activity
{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tutorial1);
    }

} 
```

主要 XML

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Spinner
        android:id="@+id/spinner1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:entries="@array/place_arrays"
        android:prompt="@string/Place"/>
    <Spinner 
        android:id="@+id/spinner2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
         />
    <Button 
        android:id="@+id/tutorial1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/save"
        />

</LinearLayout> 
```

教程1 XML

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

</LinearLayout> 
```

安卓清单

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="practice.practice"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".TextingprojectActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".TutorialOne"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="practice.practice.TUTORIALONE" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
            </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:36:26.800

将您的意图调用更改为

```
Button tut1 = (Button) findViewById(R.id.tutorial1);
    tut1.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            Intent n = new Intent(TextingprojectActivity.this,TutorialOne.class);
            startActivity(n);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T03:49:27.240

改变你的意图呼叫

```
Intent n = new Intent(TextingprojectActivity.this,TutorialOne.class);
        startActivity(n); 
```

还要`intent-filter`从清单中删除其余活动的声明。

```
 <intent-filter>
            <action android:name="practice.practice.TUTORIALONE" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter> 
```

改成喜欢...

```
 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".TextingprojectActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".TutorialOne"
        android:label="@string/app_name">

        </activity>
</application> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T03:54:25.150

如果只需要重定向到第二个活动将您的代码更改为

```
Button tut1 = (Button) findViewById(R.id.tutorial1);
tut1.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub

        startActivity(new Intent(TextingprojectActivity.this,TutorialOne.class););
    }
}); 
```

并从您的清单 XML 中删除此块

```
 <intent-filter>
            <action android:name="practice.practice.TUTORIALONE" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter> 
```

这是什么`practice.practice.TUTORIALONE???`

# vba - Excel 函数（或 VBA）检查单元格中的相同值

> ID：14432099
> 
> 赞同：2
> 
> 时间：2013-01-21T03:26:24.837
> 
> 标签：vba, excel

如果我喜欢

在 sheet1 的第一个表中看起来像这样

```
A1 B1
aaa-是的
啊——不
啊——不
啊——不
啊——不
aaa-是的
啊——不
bbb-不
bbb-不
bbb-不
bbb-不
bbb-不
bbb-不
ccc-没有
ccc-没有
ccc-是的

```

下一个答题纸2就像

```
A1 B1
aaa-是的
bbb-没有
ccc-是的

```

我可以向您询问正在检查的功能或（VBA 代码）吗

如果 sheet1 上的任何相同名称为“是”，则 sheet2 中的答案为“是”
，如果全部为否，则 sheet2 上的答案为“否”

如果这听起来令人困惑，请询问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T03:49:49.973

如果我正确理解了您的问题，则可以使用公式来解决。以下公式假定工作表 1 数据位于 A1:B16 范围内。

```
 =IF(ISERROR(MATCH(A1&"yes",Sheet1!$A$1:$A$16&Sheet1!$B$1:$B$16,0)),"no","yes") 
```

这将是工作表 2 中第一个条目的公式，我假设它位于单元格 A1 中。

请注意，这是一个数组公式，因此需要使用 Control-Shift-Enter 组合键输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T08:37:15.507

在 Excel 2007 或更高版本中，您可以像这样使用 COUNTIFS：

`=IF(COUNTIFS(Sheet1!A:A,A1,Sheet1!B:B,"yes"),"Yes","No")`

# eclipse - 如何在 Eclipse 中更改 javadoc 视图字体颜色？

> ID：14432101
> 
> 赞同：6
> 
> 时间：2013-01-21T03:26:29.780
> 
> 标签：eclipse, ubuntu, colors, javadoc, foreground

![Java 文档视图看起来像这样](../Images/cbc6f4305c1e20f99e3e3b17b0280dfe.png)

Java doc显示这样，似乎字体颜色是白色的，那么如何更改字体颜色？

我的配置：

Ubuntu 12.10 64bit 桌面 eclipse 4.2 经典主题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T00:08:34.770

好吧，你是对的.. JavaDoc 似乎是白色的！您可以检查只是从您自己的 JavaDoc 中更改“字体颜色”以对其进行测试，如下所示：

```
/**
 * <font color="white">This is some text with some color!</font>
 * 
 */ 
```

但这并不能回答您的问题，所以也许您可以研究一下：

*   Window > Preferences > General > Appearance --> 尝试更改您的主题，看看它是否适合您。

    或者

*   窗口 > 首选项 > 常规 > 外观 > 颜色和字体 > Java > Javadoc 查看背景

这不完全是答案，但这是一个好的开始！也许能够改变您的 JavaDoc 背景，您可以阅读所有 javadocs 并跟上出色的工作！;P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-15T09:24:30.990

首先，我在 /usr/share/themes/Mint-X/gtk-3.0/gtk-main.css 中手动添加（我使用主题“Mint-X”，Ubuntu Menu -> Preferences -> Appearance -> Tab Theme）在“@define-color **theme_tooltip_fg_color** #000000;”之后 以下：

```
@define-color tooltip_bg_color #F6FBA0;
@define-color tooltip_fg_color #000000; 
```

这适用于背景。由于某种原因，它不适用于前台。我尝试设置几乎所有变量都没有成功。最后，我在 /usr/share/themes/Mint-X/gtk-3.0/gtk-widgets.css 中将工具提示颜色硬编码为 #000000（第 2214 行：“颜色：#000000;”）：

```
/***********
 * tooltip *
 ***********/

.tooltip {
    padding: 3px;
    border: 1px solid @border;
    border-radius: 4px;
    background-color: @theme_tooltip_bg_color;
    color: #000000;
    box-shadow: none;    
}

.tooltip * {
    background-color: transparent;
} 
```

有用信息：更改只会在 Eclipse 重新启动后应用。

# jquery - 选择器在 jquery 1.8+ 中失败

> ID：14432102
> 
> 赞同：1
> 
> 时间：2013-01-21T03:26:42.810
> 
> 标签：jquery, jquery-selectors

知道为什么这个选择器会失败吗？

```
$('.Demographics :input["data-name"]') 
```

你可以[在 jsfiddle](http://jsfiddle.net/Jb2TA/)看到它。

我正在尝试获取所有`input`具有`data-name`属性的元素。

在 jquery 1.9 中，我得到了这个：

```
Syntax error, unrecognized expression: .Demographics :input["data-name"] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T03:31:03.680

改变：

```
$('.Demographics :input["data-name"]') 
```

到

```
$('.Demographics :input[data-name]').length 
```

演示；[jsFiddle](http://jsfiddle.net/Jb2TA/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T03:33:36.333

属性名称不能有引号，只能是属性值。 `"data-name"`不是有效的属性名称。唯一`data-name`的就是：

```
$(".Demographics :input[data-name]") 
```

但是，对于值，您可以使用引号：

```
$(".Demographics :input[data-name='test1']") 
```

后者不是必需的，但建议使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T03:32:04.413

```
$('.Demographics').find('input[data-name]').length 
```

要不就：

```
$('.Demographics :input[data-name]').length 
```

# postgresql-9.2 - 我如何在 Postgres 9.2 中使用 dblink

> ID：14432104
> 
> 赞同：1
> 
> 时间：2013-01-21T03:26:50.490
> 
> 标签：postgresql-9.2, dblink

我们最近将我们的 Postgres DB 从 9.0 升级到 9.2，但我们面临着在这个 DB 引擎上安装和使用 dblink 的挑战。请就如何在 Postgres 9.2 上安装和使用 dblink 提供帮助和建议。

# c# - 在 Scintilla.NET 中更改语法颜色

> ID：14432106
> 
> 赞同：5
> 
> 时间：2013-01-21T03:27:02.440
> 
> 标签：c#, .net, scintilla

我已经用 Scintilla.NET 搞砸了一两个小时，但我遇到了一个看起来应该很容易解决的问题。我似乎无法找到一种方法来更改 Scintilla.NET 中关键字的实际突出显示颜色。据我所见，他们的文档非常缺乏，我在那里找不到任何帮助。我也在这里看到了许多对我没有帮助的问题。似乎无论我做什么，关键字的亮点总是深蓝色，这在我的表单主题上非常难以阅读。

到目前为止，我已经将这种 XML 样式放在一起，并正在使用 C# 代码来加载该样式。我将几个示例中的 XML 放在一起，C# 代码来自他们网站上的一个问题。

```
<?xml version="1.0" encoding="utf-8"?>
<ScintillaNET>

    <Language Name="65c816 asm">
        <Indentation TabWidth="4"/>
        <Lexer LineCommentPrefix=";" >
            <Keywords List="0" Inherit="False">
            adc adc and asl bcc bcs beq bit bmi bne bpl
            bra brk brl bvc bvs clc cld cli clv cmp cop
            cpx cpy dec dex dey eor inc inx iny jmp jsr
            lda ldx ldy lsr mvn mvp nop ora pea pei per
            pha phb phd phk php phx phy pla plb pld plp
            plx ply rep rol ror rti rtl rts sbc sec sed
            sei sep sta stp stx sty stz tax tay tcd tcs
            tdc trb tsb tsc tsx txa txs txy tya tyx wai
            wdm xba xce
            </Keywords>
        </Lexer>
        <Style Name="CHARACTER" ForeColor="#00AAFF"/>
        <Style Name="NUMBER" ForeColor="#00AA00"/>
    </Language>
</ScintillaNET> 
```

C#代码如下：

```
scintilla1.Lexing.LexerLanguageMap["65c816 asm"] = "cpp";
scintilla1.ConfigurationManager.CustomLocation = System.IO.Path.GetFullPath("65c816.xml");
scintilla1.ConfigurationManager.Language = "65c816 asm";
scintilla1.ConfigurationManager.Configure(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T03:31:56.487

看来我犯的错误是没有将我`<Style>`的 ' 包装在`<Styles>`标签内。这样做之后，它似乎工作。在发布问题后直接发现是一件令人尴尬的事情。

现在工作：

```
<?xml version="1.0" encoding="utf-8"?>
<ScintillaNET>

    <Language Name="65c816 asm">
        <Indentation TabWidth="4"/>
        <Lexer LineCommentPrefix=";" >
            <Keywords List="0" Inherit="False">
            adc adc and asl bcc bcs beq bit bmi bne bpl
            bra brk brl bvc bvs clc cld cli clv cmp cop
            cpx cpy dec dex dey eor inc inx iny jmp jsr
            lda ldx ldy lsr mvn mvp nop ora pea pei per
            pha phb phd phk php phx phy pla plb pld plp
            plx ply rep rol ror rti rtl rts sbc sec sed
            sei sep sta stp stx sty stz tax tay tcd tcs
            tdc trb tsb tsc tsx txa txs txy tya tyx wai
            wdm xba xce
            </Keywords>
        </Lexer>
        <Styles>
            <Style Name="CHARACTER" ForeColor="#00AAFF"/>
            <Style Name="NUMBER" ForeColor="#00AA00"/>
        </Styles>
    </Language>
</ScintillaNET> 
```

# database - ScriptDb，如何判断对象是否有键

> ID：14432113
> 
> 赞同：1
> 
> 时间：2013-01-21T03:27:40.033
> 
> 标签：database, google-apps-script

我在 ScriptDb 中有这样的对象，[{a:1,b:2,c:3},{a:0,b:0}] 如何在没有键 c 的情况下查询对象？似乎唯一的方法是使用 db.query({}) 查询所有对象，然后使用“typeof result.c == 'undefined'”之类的东西。有没有办法在 ScriptDb 中做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:32:16.200

您可以使用它来获取没有 c 的记录：

```
var db = ScriptDb.getMyDb();
var result = db.query({c: db.not(db.anyValue())});
while (result.hasNext()) {
  var current = result.next();
  Logger.log ("a= "+current.a+", c="+current.c);
} 
```

带有c的那些：

```
var result = db.query({c: db.anyValue()}); 
```

这些函数（不是 anyValue...）记录在[Class ScriptDbInstance 中](https://developers.google.com/apps-script/class_scriptdbinstance)

# java - 如何在java中返回一个布尔方法？

> ID：14432114
> 
> 赞同：25
> 
> 时间：2013-01-21T03:27:44.747
> 
> 标签：java, function, methods, boolean

我需要有关如何在 java 中返回布尔方法的帮助。这是示例代码：

```
public boolean verifyPwd(){
        if (!(pword.equals(pwdRetypePwd.getText()))){
                  txtaError.setEditable(true);
                  txtaError.setText("*Password didn't match!");
                  txtaError.setForeground(Color.red);
                  txtaError.setEditable(false);
           }
        else {
            addNewUser();
        }
        return //what?
} 
```

每当我`verifyPwd()`想调用该方法时，我都希望返回 true 或 false 的值。我想这样调用该方法：

```
if (verifyPwd()==true){
    //do task
}
else {
    //do task
} 
```

如何设置该方法的值？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-21T03:31:58.097

您可以拥有多个`return`声明，因此编写是合法的

```
if (some_condition) {
  return true;
}
return false; 
```

也没有必要将布尔值与`true`or进行比较`false`，因此您可以编写

```
if (verifyPwd())  {
  // do_task
} 
```

* * *

编辑：有时你不能早点回来，因为还有更多的工作要做。在这种情况下，您可以声明一个布尔变量并在条件块内适当地设置它。

```
boolean success = true;

if (some_condition) {
  // Handle the condition.
  success = false;
} else if (some_other_condition) {
  // Handle the other condition.
  success = false;
}
if (another_condition) {
  // Handle the third condition.
}

// Do some more critical things.

return success; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-21T03:32:55.240

尝试这个：

```
public boolean verifyPwd(){
        if (!(pword.equals(pwdRetypePwd.getText()))){
                  txtaError.setEditable(true);
                  txtaError.setText("*Password didn't match!");
                  txtaError.setForeground(Color.red);
                  txtaError.setEditable(false);
                  return false;
           }
        else {
            return true;
        }

}

if (verifyPwd()==true){
    addNewUser();
}
else {
    // passwords do not match 
```

System.out.println("密码不匹配"); }

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-21T03:32:33.397

```
public boolean verifyPwd(){
        if (!(pword.equals(pwdRetypePwd.getText()))){
                  txtaError.setEditable(true);
                  txtaError.setText("*Password didn't match!");
                  txtaError.setForeground(Color.red);
                  txtaError.setEditable(false);
                  return false;
           }
        else {
            addNewUser();
            return true;
        }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-21T03:36:06.083

为了便于阅读，您也可以这样做

```
boolean passwordVerified=(pword.equals(pwdRetypePwd.getText());

if(!passwordVerified ){
    txtaError.setEditable(true);
    txtaError.setText("*Password didn't match!");
    txtaError.setForeground(Color.red);
    txtaError.setEditable(false);
}else{
    addNewUser();
}
return passwordVerified; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-07T16:39:46.163

最好的方法是`Boolean`在代码块中声明变量并在代码`return`末尾声明变量，如下所示：

```
public boolean Test(){
    boolean booleanFlag= true; 
    if (A>B)
    {booleanFlag= true;}
    else 
    {booleanFlag = false;}
    return booleanFlag;

} 
```

我觉得这是最好的方法。

# java - Spring Hello World Web 应用程序

> ID：14432115
> 
> 赞同：4
> 
> 时间：2013-01-21T03:27:50.827
> 
> 标签：java, spring, tomcat, spring-mvc

我正在为 Web 应用程序尝试 Spring Framework，但似乎无法让它与简单的 hello world MVC Web 应用程序一起使用。使用 Spring 3.2、Tomcat 6（上下文设置为“/spring”）。也许没有找到带注释的Controller类？

我在打`http://localhost:8080/spring/hello`

web.xml

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<web-app version="2.4"
         xmlns="http://java.sun.com/xml/ns/j2ee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
         http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd" > 
    <display-name>
      Spring
    </display-name>
    <description>
     Spring Test
    </description>

     <servlet>
    <servlet-name>springapp</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>springapp</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>

</web-app> 
```

springapp-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation=" http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">
    <context:component-scan base-package="com.test.web" />
    <bean
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/jsp/" />
        <property name="suffix" value=".jsp" />
    </bean>
</beans> 
```

我的控制器

```
package com.test.web;

import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

@Controller
@RequestMapping("/hello")
public class HelloController {

    @RequestMapping(method = RequestMethod.GET)
    public String printHello(ModelMap model) {
        model.addAttribute("name", "Test");
        return "hello";
    }

} 
```

Tomcat 输出（找到并加载了 springapp-servlet.xml）

```
INFO: Deploying configuration descriptor spring.xml
Jan 20, 2013 10:22:27 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring FrameworkServlet 'springapp'
Jan 20, 2013 10:22:27 PM org.springframework.web.servlet.FrameworkServlet initServletBean
INFO: FrameworkServlet 'springapp': initialization started
Jan 20, 2013 10:22:27 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing WebApplicationContext for namespace 'springapp-servlet': startup date [Sun Jan 20 22:22:27 EST 2013]; root of context hierarchy
Jan 20, 2013 10:22:27 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/springapp-servlet.xml]
Jan 20, 2013 10:22:27 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@7897aaa6: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.web.servlet.view.InternalResourceViewResolver#0,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor]; root of factory hierarchy
Jan 20, 2013 10:22:27 PM org.springframework.web.servlet.FrameworkServlet initServletBean
    INFO: FrameworkServlet 'springapp': initialization completed in 321 ms
Jan 20, 2013 10:22:29 PM org.springframework.web.servlet.DispatcherServlet noHandlerFound
WARNING: No mapping found for HTTP request with URI [/spring/hello] in DispatcherServlet with name 'springapp' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T03:32:59.987

您尚未启用带[注释的 MVC 配置](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-config)

```
<mvc:annotation-driven /> 
```

前任：

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="http://www.springframework.org/schema/mvc 
                    http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
                    http://www.springframework.org/schema/beans 
                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                    http://www.springframework.org/schema/context 
                    http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<context:component-scan base-package="..." />

<mvc:annotation-driven /> 
```

编辑：
这是应用程序的类路径的问题，因为它在下面的评论中证明

# c# - 从其他应用程序锁定设备（网络摄像头）

> ID：14432116
> 
> 赞同：3
> 
> 时间：2013-01-21T03:28:00.130
> 
> 标签：c#, hardware, device, webcam

我有一个从网络摄像头捕获图像的应用程序。

我注意到如果我的计算机中安装了 Microsoft LifeCam，当从 c# 启动设备时，Windows 会自动启动 LifeCam。

显然，简单的方法是卸载 LifeCam，但有没有办法将设备仅锁定到我的应用程序？原因是因为我设置了图像大小、亮度、曝光等，当 LifeCam 启动时，我的所有设置都设置为默认值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:38:40.680

从来没听说过。LifeCam 最有可能使用 DirectShow 来访问相机，虽然一些 directshow 过滤器允许并发访问，但 DirectShow API 中没有任何内容可以让您阻止其他应用程序尝试实例化驱动程序。通常发生的情况是第二个应用程序收到一堆错误，说“设备正在使用”，但有时不会。

我认为你最好的选择是卸载 lifecam 软件。

# extjs - 未在 extjs 中关联 Child 的 Parent 数据

> ID：14432119
> 
> 赞同：2
> 
> 时间：2013-01-21T03:28:23.307
> 
> 标签：extjs, extjs4

希望你做得很好。

我是 extjs4 的新手，正在研究关联的示例。

我有 2 个不同的类用户和文凭，我已经定义了。

**用户拥有许多文凭，而文凭属于用户**

**我的模型如下**

**用户.js**

```
Ext.define('MyApp.model.User', {
    extend : 'Ext.data.Model',
    idProperty : 'userId',
    fields : [{
        name : 'userId',
        type : 'integer'
    }, {
        name : 'userName',
        type : 'string',

    }],

    hasMany : {
        model : 'MyApp.model.Diploma',
        name : 'diplomas',
    },

}); 
```

**文凭.js**

```
Ext.define('MyApp.model.Diploma', {
    extend : 'Ext.data.Model',
    idProperty : 'diplomaId',
    fields : [{
        name : 'diplomaId',
        type : 'integer'
    }, {
        name : 'diplomaName',
        type : 'string',
    }, {
        name : 'userId',
        type : 'integer'
    }],

    associations : [{
        model : 'MyApp.model.User',
        name : 'user',
        type : 'belongsTo'
    }]

}); 
```

===================== 我的店铺如下======================= =

**文凭.js**

```
Ext.define('MyApp.store.Diploma', {
    extend : 'Ext.data.Store',
    model : 'MyApp.model.Diploma',
    autoLoad : true,

    listeners : {
        'load' : {
            fn : function(store, records, success, operation) {
                console.log('Diplomas are loaded');
            }
        }
    }

}); 
```

**用户.js**

```
 Ext.define('MyApp.store.User', {
        extend : 'Ext.data.Store',
        model : 'MyApp.model.User',
        requires:['Ext.data.proxy.LocalStorage'],
        autoLoad : true,

        listeners : {
            'load' : {
                fn : function(store, records, success, operation) {
                    console.log('User is loaded');
                }
            }
        },

        data : [{
            userId : 1,
            userName : 'Rishabh Shah',
            diplomas:{
                userId : 1,
                diplomaId:1,
                diplomaName:'IT'
            }
        }, {
            userId : 2,
            userName : 'Rakesh Shah',
            diplomas:{
                userId : 2,
                diplomaId:2,
                diplomaName:'CE'
            }
        }, {
            userId : 3,
            userName : 'Rashmin Shah'
        }],

        proxy:{
            type:'memory',
            reader:{
                root:'data'
            }
        }
    }); 
```

我可以从这样的用户那里获得文凭并且可以获得结果

```
Ext.getStore("User").getAt(0).diplomasStore.getAt(0) 
```

但是，当我尝试这样做时

```
Ext.getStrore("Diploma") or Ext.getStrore("Diploma").getAt(0) 
```

我什么也得不到。items 不包含任何内容...如何从文凭中获取用户。

还有一件事..如果我不在我的文凭模型中编写代理..它给了我这样的错误..

**Ext.data.proxy.Server.buildUrl()：您正在使用 ServerProxy，但尚未为其提供 url。**

请指导我。

谢谢。

* * *

感谢您的回复..@john..我可以从用户那里获得文凭..我想从文凭中获得用户...我自己尝试过..找到了解决方案...

我将有以下 json。

```
[
    {
        "depId": 1,
        "depName": "CE",
        "employees": [
            {
                "empId": 1,
                "firstName": "Rishabh",
                "lastName": "Shah"
            }, {
                "empId": 2,
                "firstName": "Smit",
                "lastName": "Patel"
            }
        ]
    }, {
        "depId": 2,
        "depName": "IT",
        "employees": [
            {
                "empId": 1,
                "firstName": "Parag",
                "lastName": "Raval"
            }, {
                "empId": 2,
                "firstName": "Rakesh",
                "lastName": "Prajapati"
            }
        ]
    }, {
        "depId": 3,
        "depName": "EE",
        "employees": [
            {
                "empId": 1,
                "firstName": "Parag EE",
                "lastName": "Raval EE"
            }, {
                "empId": 2,
                "firstName": "Rakesh EE",
                "lastName": "Prajapati EE"
            }
        ]
    }, {
        "depId": 4,
        "depName": "EC",
        "employees": [
            {
                "empId": 1,
                "firstName": "Parag EC",
                "lastName": "Raval EC"
            }, {
                "empId": 2,
                "firstName": "Rakesh EC",
                "lastName": "Prajapati EC"
            }
        ]
    }, {
        "depId": 5,
        "depName": "Chemial E",
        "employees": [
            {
                "empId": 1,
                "firstName": "Parag",
                "lastName": "Raval"
            }, {
                "empId": 2,
                "firstName": "Rakesh",
                "lastName": "Prajapati"
            }
        ]
    }, {
        "depId": 6,
        "depName": "ME",
        "employees": [
            {
                "empId": 1,
                "firstName": "Parag",
                "lastName": "Raval"
            }, {
                "empId": 2,
                "firstName": "Rakesh",
                "lastName": "Prajapati"
            }
        ]
    }, {
        "depId": 7,
        "depName": "Civil Engineer",
        "employees": [
            {
                "empId": 1,
                "firstName": "Parag",
                "lastName": "Raval"
            }, {
                "empId": 2,
                "firstName": "Rakesh",
                "lastName": "Prajapati"
            }
        ]
    }
] 
```

我会**`model.getAssociatedData().user`** 根据我的要求使用

其中**模型是我的子类记录，用户是我的父类**..

我在我的文凭模型中使用了不需要的代理......所以，正在

**Ext.data.proxy.Server.buildUrl()：您正在使用 ServerProxy，但尚未为其提供 url。**

上面提到的错误。

谢谢大家！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:01:52.070

究竟是什么不工作？您是否能够使用魔术方法，例如，`User.diplomas()`？正如@VDP 所述，为关联创建的存储是`Ext.data.Store`父模型（在本例中为用户）的数据集的正常范围。也就是说，如果你有一个带有of的`User`模型，调用该方法将返回一个过滤后的只包含带有 a的's 。`id``1``User.diplomas()``Ext.data.Store``Diploma``user_id``1`

理解这一点非常重要！**如果您没有`foreignKey`在关联中指定属性`hasMany`，它将默认为所有者模型的小写名称加上“_id”，**您应该修改`User`模型的`hasMany`关联，如下所示：

```
Ext.define('MyApp.model.User', {
/** Model Definition */
hasMany : {
    model : 'MyApp.model.Diploma',
    name : 'diplomas',
    foreignKey : userId /** This is what you're missing */
}
}); 
```

也许您会发现这篇博文很有用？[http://extjs-tutorials.blogspot.com/2012/05/extjs-hasmany-relationships-rules.html](http://extjs-tutorials.blogspot.com/2012/05/extjs-hasmany-relationships-rules.html)

博客文章中的一些重要提示（以防链接在某个时候失效）

*   始终将您的代理放在您的模型中，而不是您的商店中，除非您有充分的理由不这样做 *
*   如果在 hasMany 关系中使用它们，则始终需要您的子模型。**
*   如果您想随意加载孩子，请始终使用 foreignKey
*   如果您在与父级相同的响应中返回子级，请始终使用 associationKey
*   如果您愿意，可以同时使用 foreignKey 和 associationKey
*   始终命名您的 hasMany 关系
*   始终在您的 hasMany 关系中使用完全限定的模型名称
*   考虑给读者根一个有意义的名字（除了“数据”）
*   子模型不需要为 hasMany 工作的 belongsTo 关系

*商店将继承其模型的代理，您可以随时覆盖它

**为方便起见，并避免潜在的循环引用，您可以在 app.js 中要求它们

信用：尼尔麦圭根（[http://www.blogger.com/profile/14122981831780837323](http://www.blogger.com/profile/14122981831780837323)）

# c# - Web 服务调用 - 错误

> ID：14432121
> 
> 赞同：-2
> 
> 时间：2013-01-21T03:28:32.647
> 
> 标签：c#, web-services, xsd

我参考了第三方服务参考，它创建了 .svcinfo、.svcmap 和几个 .xsd 文件。

在我的代码中，我创建了该服务的代理并尝试调用一个方法`CreateAccount`（带有值）。调用此方法后，出现以下错误：

> 命名空间“https://www.mysite.com/MyOrder”中的顶部 XML 元素“OrderItems”引用了不同的类型 APITest.ServiceReference1.OrderItems 和 APITest.ServiceReference1.OtherOrderItems。使用 XML 属性为元素或类型指定另一个 XML 名称或命名空间。

我能够使用 SOAPUI 工具调用此方法，并从服务中获得有效结果，说明帐户已创建，并且它返回给我帐号。

我正在使用 Visual Studio 、 c#/vb 、 windows forms app 来引用此服务。

我确实做了很多搜索，但没有得到解决这个错误的正确答案。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T05:18:43.860

您是否尝试过在代理类中检查您的序列化。

[命名空间中名为“name”的 XML 元素引用了不同的类型](https://stackoverflow.com/questions/10532271/the-xml-element-named-name-from-namespace-references-distinct-types)

# android - 如何使用一个手势缩放两个 imageView？

> ID：14432126
> 
> 赞同：0
> 
> 时间：2013-01-21T03:28:57.870
> 
> 标签：android, imageview, zooming, gestures

我想将缩放手势传递给另一个 imageView 或使用捏缩放缩放两个 imageView....

我正在使用这个库[https://github.com/jasonpolites/gesture-imageview](https://github.com/jasonpolites/gesture-imageview)

它已经有缩放、平移、双击监听器......

现在我的目标是当我捏/缩放最顶层时，两个图像都将被缩放，包括它后面的图像....

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/my_frame"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@color/background" >

<com.polites.android.GestureImageView
    android:id="@+id/image_areas"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scaleType="fitCenter"
    android:src="@drawable/p2_ship_mask"
    android:visibility="invisible" />

<com.polites.android.GestureImageView
    android:id="@+id/image"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scaleType="fitCenter"
    android:src="@drawable/p2_ship_default" />

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T05:50:51.197

您可以`ImageView`在缩放侦听器中从正在缩放的​​ 中获取缩放值，并将其设置为另一个的值`ImageView`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T02:32:47.293

明白了...我创建了设置第二个图像视图的比例和位置并重绘它的方法...

这是我的代码....

```
 imageAreas.setScale(iv.getScale());
                imageAreas.setPosition(iv.getImageX(), iv.getImageY());
                imageAreas.redraw(); 
```

# javascript - 组合框中的随机选择1、3、5？

> ID：14432133
> 
> 赞同：1
> 
> 时间：2013-01-21T03:29:22.143
> 
> 标签：javascript, html, random

首先，如果我在英语中有一些错误，我很抱歉。

```
<select id="listserver">
    <option value="http://radio.xx.net/live/128">Vietel - 128 kbps</option>
    <option value="http://radio.xx.net/live/64">Vietel - 64 kbps</option>
    <option value="http://123.30.xx.xx:8000/live/128">VNPT - 128 kbps</option>
    <option value="http://123.30.xx.xx:8000/live/64">VNPT - 64 kbps</option>
    <option value="http://210.245.xx.xx:8000/live/128">FPT - 128 kbps</option>
    <option value="http://210.245.xx.xx:8000/live/64">FPT - 64 kbps</option>
</select> 
```

我有一个代码来选择服务器来收听这样的广播。现在我想与我的 3 台服务器保持带宽平衡，默认情况下质量为 128 kbps。

我已阅读此[链接](https://stackoverflow.com/questions/4889207/random-selection-in-combobox)，它可以帮助我做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T03:42:14.343

为每个选项标签添加一个 id：

```
<select id="listserver">
    <option id="1" value="http://radio.xx.net/live/128">Vietel - 128 kbps</option>
    <option id="2" value="http://radio.xx.net/live/64">Vietel - 64 kbps</option>
    <option id="3" value="http://123.30.xx.xx:8000/live/128">VNPT - 128 kbps</option>
    <option id="4" value="http://123.30.xx.xx:8000/live/64">VNPT - 64 kbps</option>
    <option id="5" value="http://210.245.xx.xx:8000/live/128">FPT - 128 kbps</option>
    <option id="6" value="http://210.245.xx.xx:8000/live/64">FPT - 64 kbps</option>
</select> 
```

然后您可以将 selected='selected' 或简单地分配给您想要选择的选项。您可以使用 Javascript 和 JQuery 生成 1 到 3 之间的随机数：

```
<script>
    var num = Math.floor((Math.random()*3)+1); 
```

最后将 selected 属性添加到随机选择的选项中：

```
 if(num == 1){
        $('#1').attr('selected', 'selected');
    }elseif(num == 2){
    etc....

</script> 
```

希望这足够清楚:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T03:42:57.127

您可以保留一组默认项目并只选择那些。在这种情况下，在索引 0、2 和 4 处可以找到 128 kbps 的项目。

```
var defaultItems = [0,2,4]
var select = document.getElementById('listserver');
var index = Math.floor(Math.random() * defaultItems.length);

select.selectedIndex = defaultItems[index]; 
```

[JSFiddle 示例](http://jsfiddle.net/dHLax/54/)

# c# - 将 Crystal Report 文档导出为 PDF 时登录参数不正确

> ID：14432134
> 
> 赞同：0
> 
> 时间：2013-01-21T03:29:23.020
> 
> 标签：c#, crystal-reports, export-to-pdf

我正在尝试将水晶报告文档导出为 PDF，并且收到此错误消息。我可以连接到数据库并查询数据，将其放入数据集并将数据集绑定到报告对象。但是当我导出到 HttpResponse 时出现以下错误。有人遇到过这个问题吗？请帮忙。谢谢。

```
Logon failed.
Details: ADO Error Code: 0x
Source: Microsoft OLE DB Provider for SQL Server
Description: Login failed for user '727_User'.
SQL State: 42000
Native Error: Error in File C:\Windows\TEMP\ABCDReport {9242A97D-A37F-4B18-A22E-8F0F22416D73}.rpt:
Unable to connect: incorrect log on parameters. 
```

这是我背后的 C# 代码。

```
rep.SetDataSource(ds.Tables[0]);  
rep.ExportToHttpResponse(CrystalDecisions.Shared.ExportFormatType.PortableDocFormat, Response, true, "ABCDReport"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:56:26.013

我发现了问题。我**忘记将第二个数据表绑定到子报表**，这导致了问题。以下是我的最终代码。谢谢。

```
rep.SetDataSource(ds.Tables[0]);
        if (ds.Tables.Count > 1)
        {
            if (ds.Tables[1].Rows.Count > 0)
            {
                rep.OpenSubreport("Subrep1").SetDataSource(ds.Tables[1]);
            }

        }

rep.ExportToHttpResponse(CrystalDecisions.Shared.ExportFormatType.PortableDocFormat, Response, true, "ABCDReport"); 
```

# ajax - Rails 返回 406 Not Acceptable for ajax 请求

> ID：14432136
> 
> 赞同：1
> 
> 时间：2013-01-21T03:29:59.583
> 
> 标签：ajax, jquery, ruby-on-rails-3.2

我完全被这个困住了，几个小时的搜索还没有出现结果。当我尝试执行 ajax 请求时出现 406 错误。这是我的代码..

层控制器

```
 def index
      series = Series.find_by_id(params[:series_id])
      respond_to do |format|
        format.json { render :json => series.tiers }  
      end
    end 
```

Javascript

```
 $('#series_id').change ->
      series_id = $('#series_id').val()

    $.get '/admin/tiers', {series_id:series_id}, (result) ->
      element = $('select[name *= "tier_id"]')
      element.empty()
      $.each result, (index, item) ->
        element.append $('<option/>', value:item.id, text: item.title) 
```

这是我从 Rails 服务器得到的错误

```
 Started GET "/admin/tiers/1" for 127.0.0.1 at 2013-01-21 14:19:38 +1100
      Processing by Admin::TiersController#index as JSON
        Parameters: {"series_id"=>"1"}
        User Load (0.4ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
          (0.1ms)  begin transaction
          (0.5ms)  UPDATE "users" SET "last_request_at" = '2013-01-21 14:19:38.827810', "perishable_token" = 'y0TMicsW2l4zgSiQcJx', "updated_at" = '2013-01-21 14:19:38.829452' WHERE "users"."id" = 1
          (2.5ms)  commit transaction
        Tier Load (0.3ms)  SELECT "tiers".* FROM "tiers" WHERE "tiers"."id" IS NULL LIMIT 1
        Tier Load (0.3ms)  SELECT "tiers".* FROM "tiers" 
        Series Load (0.2ms)  SELECT "series".* FROM "series" 
        Series Load (0.2ms)  SELECT "series".* FROM "series" WHERE "series"."id" = 1 LIMIT 1
      Completed 406 Not Acceptable in 30ms (ActiveRecord: 4.4ms) 
```

真的不知道在塞什么东西，控制器看起来不错，看起来内容类型是 json。

我也在使用 rails 3.2.11

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T03:53:33.503

如此变化

```
 respond_to do |format|
    format.json { render :json => series.tiers }  
  end 
```

到

```
 render :json => series.tiers 
```

解决问题，但我仍然不确定为什么:(如果有人知道为什么您的输入将不胜感激。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T04:11:09.893

我不能告诉你为什么解决了这个问题，但我认为更好的解决方案可能是使用[`.getJSON`](http://api.jquery.com/jQuery.getJSON/)call 而不是`.get`.

当 Rails 在标头中找不到请求类型的正确响应类型时，会生成 406 `Accept`。当我使用[Fiddler2](http://www.fiddler2.com/fiddler2/version.asp)从 a 窥探请求时`.get`，我看到了请求标头：

```
Accept: */* 
```

这不会为 Rails 提供任何可使用的信息。如果请求的 URL 上有扩展名，例如`.js`在 javascript 的情况下，它也可以从中直觉，但这不适用于您的 JSON 请求。

当我`.getJSON`拨打电话时，我会看到请求标头：

```
Accept: application/json, text/javascript, */*; q=0.01 
```

这可能足以让 Rails 将请求的类型与您的 json 处理程序匹配。

# applescript - 尝试通过 iTunes 中的 Applescript 将剧集 ID 添加到电视节目

> ID：14432145
> 
> 赞同：0
> 
> 时间：2013-01-21T03:31:19.817
> 
> 标签：applescript, itunes

我有以下代码：

```
tell application "iTunes"
repeat with thetrack in tracks of playlist "foo"
    set showName to name of thetrack
    set showName to ((characters 17 through -1 of showName) as string)
    set episode ID of thetrack to name of thetrack
end repeat
end tell 
```

我正在尝试将电视节目的剧集 ID 设置为曲目名称。如果我注释掉 set episode ID 行，showName 肯定会设置为正确的字符串。当我尝试实际设置剧集 ID 时，我收到以下错误：

> iTunes 出现错误：无法将播放列表“Fitness & Nutrition”的每个曲目的第 1 项的剧集 ID 设置为播放列表“Fitness & Nutrition”的每个曲目的第 1 项的名称。

我承认，我被难住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:32:16.903

尝试：

```
set episode ID of thetrack to (name of thetrack as text) 
```

因为

```
return class of name of thetrack --> property 
```

和

```
return class of (name of thetrack as text) --> text 
```

![在此处输入图像描述](../Images/91c24faf546272ab68ea43596a33d135.png)

# sequence - 从 wso2 ESB 中的消息中删除 SOAP 包装器

> ID：14432148
> 
> 赞同：0
> 
> 时间：2013-01-21T03:31:55.230
> 
> 标签：sequence, wso2, esb, wso2esb, mediator

我试图通过 WSO2esb 调用 Web 服务。我的 Web 服务只接受这样的肥皂消息。

```
<?xml version="1.0" encoding="UTF-8"?>
<ns1:Envelope xmlns:ns1="http://www.webserviceX.NET/ConversionRate/Input" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="C:\Documents and Settings\RoGulk\Desktop\SPM\Envelope.xsd">
    <ns1:Body>
        <ns2:ConversionRate xmlns:ns2="http://www.webserviceX.NET/">
         <ns2:FromCurrency>USD</ns2:FromCurrency>
          <ns2:ToCurrency>USD</ns2:ToCurrency>
        </ns2:ConversionRate>
    </ns1:Body>
</ns1:Envelope> 
```

但问题是当我将输入消息读取到 esb 时，esb 会像这样向我的 meaasage 添加一个额外的包装器

```
<?xml version='1.0' encoding='utf-8'?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
<soapenv:Body>
<ns1:Envelope xmlns:ns1="http://www.webserviceX.NET/ConversionRate/Input">
  <ns1:Body>
    <ns2:ConversionRate xmlns:ns2="http://www.webserviceX.NET/">
      <ns2:FromCurrency>INR</ns2:FromCurrency>
      <ns2:ToCurrency>NAD</ns2:ToCurrency>
    </ns2:ConversionRate>
  </ns1:Body>
</ns1:Envelope>
</soapenv:Body>
</soapenv:Envelope> 
```

我认为可以在调用端点之前使用“应用程序/XML”消息格式化程序来完成。但问题是我不知道如何调用“应用程序/XML”消息格式化程序以及在哪里使用它。* * 请各位大侠帮帮我，谢谢

**已编辑**

我认为添加我的代理服务配置会有所帮助。

在这我没有使用默认输出序列。而不是我使用名为“currencyFileWriter”的序列，它负责将文件写入输出目录。

这是我的代理服务

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="CurrencyProxy" transports="https,http,vfs" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence>
         <property name="messageType" value="application/xml" scope="default" type="STRING"/>
         <property name="ContentType" value="application/xml" scope="default"/>
         <log level="custom">
            <property name="MessageType" expression="$axis2:ContentType"/>
         </log>
         <log level="full"/>
         <log level="custom">
            <property name="insequance" value="================================Forwerded to out File writer sequance====================="/>
         </log>
         <send receive="currencyFileWriter" buildmessage="true">
            <endpoint key="CurrencyConverter"/>
         </send>
         <log level="custom">
            <property name="After" value="============================AFTER SEND================"/>
         </log>
         <log level="full"/>
      </inSequence>
   </target>
   <parameter name="transport.PollInterval">5</parameter>
   <parameter name="transport.vfs.ActionAfterProcess">MOVE</parameter>
   <parameter name="transport.vfs.FileURI">file:///C:/test/Orginal1/</parameter>
   <parameter name="transport.vfs.MoveAfterProcess">file:///C:/test/Pass1/</parameter>
   <parameter name="transport.vfs.MoveAfterFailure">file:///C:/test/Failures1/</parameter>
   <parameter name="transport.vfs.FileNamePattern">currencytest.xml</parameter>
   <parameter name="transport.vfs.ContentType">application/xml</parameter>
   <parameter name="transport.vfs.ActionAfterFailure">MOVE</parameter>
   <description></description>
</proxy> 
```

tihs 是我的 CurrencyFilewriter 序列

```
<sequence xmlns="http://ws.apache.org/ns/synapse" name="currencyFileWriter">
   <log level="custom">
      <property name="sequance" value="=====================RECIVED TO CURRENCYFILEWRITER=========================="/>
   </log>
   <log level="full"/>
   <property name="transport.vfs.ReplyFileName" value="result.xml" scope="default" type="STRING"/>
   <property name="OUT_ONLY" value="true" scope="default" type="STRING"/>
   <send>
      <endpoint>
         <address uri="vfs:file:///C:/test/Out1"/>
      </endpoint>
   </send>
</sequence> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:07:59.850

我使用了以下配置，并在 VFS 文件夹中得到了以下结果。

这是我所做的：

端点配置：

```
<endpoint xmlns="http://ws.apache.org/ns/synapse" name="CurrencyConverter">
   <address uri="http://www.webservicex.net/CurrencyConvertor.asmx"></address>
</endpoint> 
```

序列配置：

```
<sequence xmlns="http://ws.apache.org/ns/synapse" name="currencyFileWriter">
   <log level="custom">
      <property name="sequance" value="=====================RECIVED TO CURRENCYFILEWRITER=========================="/>
   </log>
   <log level="full"/>
   <property name="transport.vfs.ReplyFileName" value="result.xml" scope="default" type="STRING"/>
   <property name="OUT_ONLY" value="true" scope="default" type="STRING"/>
   <send>
      <endpoint>
         <address uri="vfs:file:///home/ravi/esb/wso2esb-4.5.1/vfs-temp/Out1"/>
      </endpoint>
   </send>
</sequence> 
```

代理配置：

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="CurrencyProxy" transports="https,http,vfs" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence>
         <log level="custom">
            <property name="insequance" value="================================Forwerded to out File writer sequance====================="/>
         </log>
         <send>
            <endpoint key="CurrencyConverter"/>
         </send>
         <log level="custom">
            <property name="After" value="============================AFTER SEND================"/>
         </log>
         <log level="full"/>
      </inSequence>
      <outSequence>
         <sequence key="currencyFileWriter"/>
      </outSequence>
   </target>
   <parameter name="transport.vfs.ActionAfterProcess">MOVE</parameter>
   <parameter name="transport.PollInterval">5</parameter>
   <parameter name="transport.vfs.MoveAfterProcess">file:///home/ravi/esb/wso2esb-4.5.1/vfs-temp/Pass1/</parameter>
   <parameter name="transport.vfs.FileURI">file:///home/ravi/esb/wso2esb-4.5.1/vfs-temp/Orginal1/</parameter>
   <parameter name="transport.vfs.MoveAfterFailure">file:///home/ravi/esb/wso2esb-4.5.1/vfs-temp/Failures1/</parameter>
   <parameter name="transport.vfs.FileNamePattern">currencytest.xml</parameter>
   <parameter name="transport.vfs.ContentType">application/xml</parameter>
   <parameter name="transport.vfs.ActionAfterFailure">MOVE</parameter>
   <description></description>
</proxy> 
```

这是从客户端（在我的情况下为 SOAP UI）传递到 ESB 的内容 - 我在这里使用 SOAP 1.2，将命名空间 ns1 指向[http://www.w3.org/2003/05/soap-envelope](http://www.w3.org/2003/05/soap-envelope)：

```
<?xml version="1.0" encoding="UTF-8"?>
<ns1:Envelope xmlns:ns1="http://www.w3.org/2003/05/soap-envelope" xmlns:ns2="http://www.webserviceX.NET/ConversionRate/Input">

    <ns1:Body>
        <ns2:ConversionRate xmlns:ns2="http://www.webserviceX.NET/">
         <ns2:FromCurrency>USD</ns2:FromCurrency>
          <ns2:ToCurrency>LKR</ns2:ToCurrency>
        </ns2:ConversionRate>
    </ns1:Body>
</ns1:Envelope> 
```

这是 ESB 发送到后端服务的内容：

```
POST /CurrencyConvertor.asmx?WSDL HTTP/1.1
Content-Type: application/soap+xml; charset=UTF-8; action="urn:mediate"
Accept-Encoding: gzip,deflate
Transfer-Encoding: chunked
Host: localhost:5000
Connection: Keep-Alive
User-Agent: Synapse-HttpComponents-NIO

<?xml version='1.0' encoding='UTF-8'?>
<ns1:Envelope xmlns:ns1="http://www.w3.org/2003/05/soap-envelope" xmlns:ns2="http://www.webserviceX.NET/ConversionRate/Input">
    <ns1:Body>
        <ns2:ConversionRate xmlns:ns2="http://www.webserviceX.NET/">
            <ns2:FromCurrency>USD</ns2:FromCurrency>
            <ns2:ToCurrency>LKR</ns2:ToCurrency>
        </ns2:ConversionRate>
    </ns1:Body>
</ns1:Envelope> 
```

这是 Web 服务返回给 ESB 的内容，也保存在 Out1 文件中：

```
Cache-Control: private, max-age=0
Content-Length: 380
Content-Type: application/soap+xml; charset=utf-8
Server: Microsoft-IIS/7.0
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Wed, 23 Jan 2013 15:53:53 GMT

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <soap:Body>
        <ConversionRateResponse xmlns="http://www.webserviceX.NET/">     
            <ConversionRateResult>127.05</ConversionRateResult>
        </ConversionRateResponse>
    </soap:Body>
</soap:Envelope> 
```

希望这对这个设置有所帮助，我似乎没有遇到您遇到的问题 - ESB 重新包装了请求。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-19T08:47:42.733

您需要在发送调解器上方（在调用您的端点之前）添加以下属性，以从消息中删除额外的肥皂信封包装器。

```
<property name="messageType" value="application/xml" scope="axis2" type="STRING"/> 
```

我使用以下示例代理对其进行了测试，它对我有用。

```
<?xml version="1.0" encoding="UTF-8"?>
    <proxy xmlns="http://ws.apache.org/ns/synapse"
           name="test"
           transports="https,http"
           statistics="disable"
           trace="disable"
           startOnLoad="true">
       <target>
          <inSequence>

             <property name="messageType"
                       value="application/xml"
                       scope="axis2"
                       type="STRING"/>
             <log level="full"/>
             <send>
                <endpoint>
                   <address uri="http://www.google.com"/>
                </endpoint>
             </send>
          </inSequence>
       </target>
       <description/>
    </proxy> 
```

谢谢

# javascript - $.post 在最新的 firefox 中不工作，但在所有其他浏览器中工作

> ID：14432158
> 
> 赞同：-1
> 
> 时间：2013-01-21T03:33:00.043
> 
> 标签：javascript, jquery, ajax, forms, post

当用户单击继续按钮时，我有这个 jquery 被调用：

```
<script type="text/javascript">     
        function register()  
        {   
            $.post("<?php echo site_url('register'); ?>", {
                    email: $('#email').val(), 
                    storename: $('#storename').val(), 
                    password: $('#password').val()
            }, 
            function(data){ alert('testingdfgf');
                var obj = jQuery.parseJSON(data); 
                alert(obj.message);
                if(obj.result === 'success'){
                    document.location.href="<?php echo site_url('activationpage'); ?>";
                }
            });
        }        
    </script> 
```

该函数调用在所有其他主要浏览器中 100% 正确工作，但在 Firefox 中它什么也不做。我知道它的 $.post 方法就是问题所在，但不确定它为什么会导致问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T03:53:36.823

试试**`window.location`**吧。它在所有浏览器中都能正常工作。

```
window.location = "<?php echo site_url('activationpage'); ?>"; 
```

# vb.net - 编写一个程序，使用事件仅打印 6 到 16 之间的偶数

> ID：14432162
> 
> 赞同：0
> 
> 时间：2013-01-21T03:33:37.160
> 
> 标签：vb.net

如您所见，我是编程新手。我需要添加一个事件。我们正在了解事件，真的没有任何帮助，我已经尝试使用互联网几个小时。我只是想学习。提前谢谢。

```
Module Modulel

Public Event PrintThis(ByVal val as Integer)

SubMain()

Dim number as Integer = 6
While number <= 16
// PRINT Goes here .. ??? Not sure if right or code
number = number + 2
End While 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:21:46.983

像这样的东西应该工作。[当您调用RaiseEvent](http://msdn.microsoft.com/en-us/library/fwd3bwed%28v=vs.100%29.aspx)时，您需要使用[AddHandler](http://msdn.microsoft.com/en-us/library/7taxzxka%28v=vs.100%29.aspx)添加将响应您的事件的方法。

```
Module Module1
    Public Event PrintThis(ByVal val As Integer)
    Sub Main()

        AddHandler PrintThis, AddressOf PrintThisMethod
        Dim number As Integer = 6
        While number <= 16
            RaiseEvent PrintThis(number)
            number = number + 2
        End While
        Console.ReadLine()
    End Sub

    Private Sub PrintThisMethod(val As Integer)
        Console.WriteLine(val)
    End Sub

End Module 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T03:48:58.367

下面的链接将使您清楚地了解事件。 [http://www.simple-talk.com/dotnet/.net-framework/custom-events-in-vb.net-2005/](http://www.simple-talk.com/dotnet/.net-framework/custom-events-in-vb.net-2005/)。

如果有帮助，请告诉我。

# python - 带有 @abstractproperry 的 epydoc 警告

> ID：14432163
> 
> 赞同：0
> 
> 时间：2013-01-21T03:33:41.840
> 
> 标签：python, warnings, decorator, epydoc

我不是我所缺少的，而是以下代码：

```
from abc import ABCMeta, abstractproperty

class Abstra(object):
    __metaclass__ = ABCMeta

    def __init__(self):
        self.var = 77

    @abstractproperty
    def varb(self):
        '''
        returns var
        ''' 
```

生成文档时出现以下 epydoc 错误：

```
/test> epydoc -v abstra.py
+--------------------------------------------------------------------------
| File /test/abstra.py, in abstra.Abstra.varb
|   Warning: Possible mal-formatted field item.
|   Warning: Improper paragraph indentation.
| 
```

当我将`@abstractproperty`装饰器更改为装饰器时，警告消失`@property`。所以我的问题是这是一个错误还是我错过了什么？

# javascript - Uncaught SyntaxError: Unexpected token with JSON.parse

> ID：14432165
> 
> 赞同：234
> 
> 时间：2013-01-21T03:34:08.600
> 
> 标签：javascript, jquery, json

what causes this error on the third line?

```
var products = [{
  "name": "Pizza",
  "price": "10",
  "quantity": "7"
}, {
  "name": "Cerveja",
  "price": "12",
  "quantity": "5"
}, {
  "name": "Hamburguer",
  "price": "10",
  "quantity": "2"
}, {
  "name": "Fraldas",
  "price": "6",
  "quantity": "2"
}];
console.log(products);
var b = JSON.parse(products); //unexpected token o
```

^(Open console to view error)

* * *

## 回答 #1

> 赞同：249
> 
> 时间：2013-01-21T03:36:29.857

`products` is an object. (creating from an object literal)

`JSON.parse()` is used to convert a **string** containing JSON notation into a Javascript object.

Your code turns the object into a string (by calling `.toString()`) in order to try to parse it as JSON text.
The default `.toString()` returns `"[object Object]"`, which is not valid JSON; hence the error.

* * *

## 回答 #2

> 赞同：161
> 
> 时间：2014-12-31T19:13:02.453

Let's say you know it's valid JSON but your are still getting this...

In that case it's likely that there are hidden/special characters in the string from whatever source your getting them. When you paste into a validator, they are lost - but in the string they are still there. Those chars, while invisible, will break `JSON.parse()`

If `s` is your raw JSON, then clean it up with:

```
// preserve newlines, etc - use valid JSON
s = s.replace(/\\n/g, "\\n")  
               .replace(/\\'/g, "\\'")
               .replace(/\\"/g, '\\"')
               .replace(/\\&/g, "\\&")
               .replace(/\\r/g, "\\r")
               .replace(/\\t/g, "\\t")
               .replace(/\\b/g, "\\b")
               .replace(/\\f/g, "\\f");
// remove non-printable and other non-valid JSON chars
s = s.replace(/[\u0000-\u0019]+/g,""); 
var o = JSON.parse(s); 
```

* * *

## 回答 #3

> 赞同：74
> 
> 时间：2013-01-21T03:40:16.947

It seems you want to **stringify** the object, not parse. So do this:

```
JSON.stringify(products); 
```

The reason for the error is that `JSON.parse()` expects a `String` value and `products` is an `Array`.

*Note: I think it attempts `json.parse('[object Array]')` which complains it didn't expect token `o` after `[`.*

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2013-05-09T07:36:44.403

I found the same issue with `JSON.parse(inputString)`.

In my case the input string is coming from my server page *[return of a page method]*.

I printed the `typeof(inputString)` - it was string, still the error occurs.

I also tried `JSON.stringify(inputString)`, but it did not help.

Later I found this to be an issue with the new line operator `[\n]`, inside a field value.

I did a *replace [with some other character, put the new line back after parse]* and everything is working fine.

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2016-10-23T11:09:39.510

JSON.parse is waiting for a String in parameter. You need to stringify your JSON object to solve the problem.

```
products = [{"name":"Pizza","price":"10","quantity":"7"}, {"name":"Cerveja","price":"12","quantity":"5"}, {"name":"Hamburguer","price":"10","quantity":"2"}, {"name":"Fraldas","price":"6","quantity":"2"}];
console.log(products);
var b = JSON.parse(JSON.stringify(products));  //solves the problem 
```

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2018-06-06T23:11:32.560

You should validate your JSON string [here](https://jsonformatter.curiousconcept.com/).

A valid JSON string must have double quotes around the keys:

```
JSON.parse({"u1":1000,"u2":1100})       // will be ok 
```

If there are no quotes, it will cause an error:

```
JSON.parse({u1:1000,u2:1100})    
// error Uncaught SyntaxError: Unexpected token u in JSON at position 2 
```

Using single quotes will also cause an error:

```
JSON.parse({'u1':1000,'u2':1100})    
// error Uncaught SyntaxError: Unexpected token ' in JSON at position 1 
```

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2013-01-21T03:35:58.497

```
products = [{"name":"Pizza","price":"10","quantity":"7"}, {"name":"Cerveja","price":"12","quantity":"5"}, {"name":"Hamburguer","price":"10","quantity":"2"}, {"name":"Fraldas","price":"6","quantity":"2"}]; 
```

change to

```
products = '[{"name":"Pizza","price":"10","quantity":"7"}, {"name":"Cerveja","price":"12","quantity":"5"}, {"name":"Hamburguer","price":"10","quantity":"2"}, {"name":"Fraldas","price":"6","quantity":"2"}]'; 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2018-08-28T10:07:19.567

If there are leading or trailing spaces, it'll be invalid. Trailing/Leading spaces can be removed as

```
mystring = mystring.replace(/^\s+|\s+$/g, ""); 
```

Source: [http://www.toptip.ca/2010/02/javascript-trim-leading-or-trailing.html](http://www.toptip.ca/2010/02/javascript-trim-leading-or-trailing.html)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-08-31T19:35:21.543

Here's a function I made based on previous replies: it works on my machine but YMMV.

```
 /**
             * @description Converts a string response to an array of objects.
             * @param {string} string - The string you want to convert.
             * @returns {array} - an array of objects.
            */
            function stringToJson(input) {
              var result = [];

              //replace leading and trailing [], if present
              input = input.replace(/^\[/,'');
              input = input.replace(/\]$/,'');

              //change the delimiter to 
              input = input.replace(/},{/g,'};;;{');

              // preserve newlines, etc - use valid JSON
              //https://stackoverflow.com/questions/14432165/uncaught-syntaxerror-unexpected-token-with-json-parse
            input = input.replace(/\\n/g, "\\n")  
            .replace(/\\'/g, "\\'")
            .replace(/\\"/g, '\\"')
            .replace(/\\&/g, "\\&")
            .replace(/\\r/g, "\\r")
            .replace(/\\t/g, "\\t")
            .replace(/\\b/g, "\\b")
            .replace(/\\f/g, "\\f");
            // remove non-printable and other non-valid JSON chars
            input = input.replace(/[\u0000-\u0019]+/g,""); 

              input = input.split(';;;');

              input.forEach(function(element) {
                // console.log(JSON.stringify(element));

                result.push(JSON.parse(element));
              }, this);

              return result;
            } 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-10-10T23:32:09.270

One other gotcha that can result in `"SyntaxError: Unexpected token"` exception when calling `JSON.parse()` is using any of the following in the string values:

1.  New-line characters.

2.  Tabs (yes, tabs that you can produce with the Tab key!)

3.  Any stand-alone slash `\` (but for some reason not `/`, at least not on Chrome.)

(For a full list see the [String section here](http://www.json.org/).)

For instance the following will get you this exception:

```
{
    "msg" : {
        "message": "It cannot
contain a new-line",
        "description": "Some discription with a     tabbed space is also bad",
        "value": "It cannot have 3\4 un-escaped"
    }
} 
```

So it should be changed to:

```
{
    "msg" : {
        "message": "It cannot\ncontain a new-line",
        "description": "Some discription with a\t\ttabbed space",
        "value": "It cannot have 3\\4 un-escaped"
    }
} 
```

Which, I should say, makes it quite unreadable in JSON-only format with larger amount of text.

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-03-06T09:24:42.227

```
[
  {
    "name": "Pizza",
    "price": "10",
    "quantity": "7"
  },
  {
    "name": "Cerveja",
    "price": "12",
    "quantity": "5"
  },
  {
    "name": "Hamburguer",
    "price": "10",
    "quantity": "2"
  },
  {
    "name": "Fraldas",
    "price": "6",
    "quantity": "2"
  }
] 
```

* * *

Here is your perfect Json that you can parse.

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-11-11T01:51:02.687

Hopefully this helps someone else.

My issue was that I had commented HTML in a PHP callback function via AJAX that was parsing the comments and return invalid JSON.

Once I removed the commented HTML, all was good and the JSON was parsed with no issues.

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-01-06T04:33:52.250

When you are using POST or PUT method, make sure to stringify the body part.

I have documented an example here [https://gist.github.com/manju16832003/4a92a2be693a8fda7ca84b58b8fa7154](https://gist.github.com/manju16832003/4a92a2be693a8fda7ca84b58b8fa7154)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-09-14T05:11:48.497

The only mistake you are doing is, you are parsing already parsed object so it's throwing error, use this and you will be good to go.

```
var products = [{
  "name": "Pizza",
  "price": "10",
  "quantity": "7"
}, {
  "name": "Cerveja",
  "price": "12",
  "quantity": "5"
}, {
  "name": "Hamburguer",
  "price": "10",
  "quantity": "2"
}, {
  "name": "Fraldas",
  "price": "6",
  "quantity": "2"
}];
console.log(products[0].name); //name of item at 0th index
```

if you want to print entire json then use JSON.stringify()

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-01-21T03:48:56.980

products is an array which can be used directly:

```
var i, j;

for(i=0;i<products.length;i++)
  for(j in products[i])
    console.log("property name: " + j,"value: "+products[i][j]); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-03-20T15:22:17.007

Now apparently `\r`, `\b`, `\t`, `\f`, etc aren't the only problematic chars that can give you this error.

Note that some browsers may have *additional* requirements for the input of `JSON.parse`.

Run this test code on your browser:

```
var arr = [];
for(var x=0; x < 0xffff; ++x){
    try{
        JSON.parse(String.fromCharCode(0x22, x, 0x22));
    }catch(e){
        arr.push(x);
    }
}
console.log(arr); 
```

Testing on Chrome, I see that it doesn't allow `JSON.parse(String.fromCharCode(0x22, x, 0x22));` where `x` is 34, 92, or from 0 to 31\.

Chars 34 and 92 are the `"` and `\` characters respectively, and they are usually expected and properly escaped. It's chars 0 to 31 that would give you problems.

To help with debugging, before you do `JSON.parse(input)`, first verify that the input doesn't contain problematic characters:

```
function VerifyInput(input){
    for(var x=0; x<input.length; ++x){
        let c = input.charCodeAt(x);
        if(c >= 0 && c <= 31){
            throw 'problematic character found at position ' + x;
        }
    }
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-05-30T13:44:12.030

Oh man, solutions in all above answers provided so far didn't work for me. I had a similar problem just now. I managed to solve it with wrapping with the quote. See the screenshot. Whoo.

[![enter image description here](../Images/7fc317645117540b4e2cd3ff42caea4f.png)](https://i.stack.imgur.com/E5H4x.png)

**Original:**

```
var products = [{
  "name": "Pizza",
  "price": "10",
  "quantity": "7"
}, {
  "name": "Cerveja",
  "price": "12",
  "quantity": "5"
}, {
  "name": "Hamburguer",
  "price": "10",
  "quantity": "2"
}, {
  "name": "Fraldas",
  "price": "6",
  "quantity": "2"
}];
console.log(products);
var b = JSON.parse(products); //unexpected token o
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-07-15T11:54:14.597

The error you are getting i.e. "unexpected token o" is because json is expected but object is obtained while parsing. That "o" is the first letter of word "object".

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-10-31T12:45:05.057

It can happen for a lot of reasons, but probably for an invalid char, so you can use `JSON.stringify(obj);` that will turn your object into a JSON but remember that it is a JQUERY expression.

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-02-01T12:31:00.197

In my case there is following character problems in my `JSON` string

1.  \r
2.  \t
3.  \r\n
4.  \n
5.  :
6.  "

I have replaced them with another characters or symbols, and then revert back again from coding.

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-04-07T17:20:13.130

This is now a JavaScript Array of Object, not JSON format. TO convert it into JSON format you need to use a function called **JSON.stringify()**

```
JSON.stringify(products) 
```

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2017-09-14T05:03:00.123

Why you need JSON.parse? It's already in array of object format.

Better use JSON.stringify as below : `var b = JSON.stringify(products);`

This may help you.

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2020-01-27T06:57:24.553

The mistake I was doing was passing `null` (unknowingly) into JSON.parse().

So it threw `Unexpected token n in JSON at position 0`

But this happens whenever you pass something which is not JS Object in JSON.parse()

* * *

## 回答 #24

> 赞同：-24
> 
> 时间：2013-09-20T05:34:28.940

Use `eval`. It takes JavaScript expression/code as string and evaluates/executes it.

```
eval(inputString); 
```

# java - 通过填写表单中的详细信息对另一个服务进行 REST URL 调用

> ID：14432167
> 
> 赞同：2
> 
> 时间：2013-01-21T03:34:26.053
> 
> 标签：java, jsp, spring-mvc, restful-url

我最近开始使用 Spring MVC 框架。在网上阅读大量教程时，我取得了很大进步。

**关于我的应用程序的背景-**

我必须使用表单中提供的详细信息对另一个服务（已在 tomcat 上部署）进行 REST URL 调用。所以我已经使用 JSP 制作了一个表单，其内容如图所示 - 我不确定如何通过从表单条目中创建 url 来进行 REST url 调用，然后显示该 url 的响应下一个屏幕。

所以在上面的表格中，如果我写了`User Id as 1000012848`，`checkbox is selected (means true) for Debug Flag`并且在`Attribute Name I have selected first row`（通常我们也可以选择所有三个），`Machine Name is localhost`然后`Port Number is 8080`url 应该看起来像这样 -

```
http://localhost:8080/service/newservice/v1/get/PP.USERID=1000012848,debugflag=true/host.profile.ACCOUNT 
```

因此，在我们将从表单条目创建的所有 URL 中，下面的行将始终在同一个位置 - 然后之后每个表单条目将开始附加

```
service/newservice/v1/get/ 
```

现在，在创建上面的 url 之后，只要我点击提交，它就会调用上面的 url 以及它从 URL 获得的任何响应，它将显示在我的下一个屏幕（result.jsp 文件）中不知道该怎么做？以下是我创建的文件。谁能帮我解决我的问题？为了解决这个问题，我需要进行哪些代码更改？

student.jsp 文件（生成表单）

```
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<html>
<res:head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="layout" content="main" />
    <title>First Tutorial</title>
</res:head>
<res:body>

    <form:form method="POST" action="/_hostnewapp/addStudent">
        <table>
            <tr>
                <td><form:label path="userId">User Id</form:label></td>
                <td><form:input path="userId" /></td>
            </tr>
            <tr>
                <td>Debug Flag :</td>
                <td><form:checkbox path="debugFlag" /></td>
            </tr>
            <tr>
                <td>Attribute Name</td>
                <td><form:select path="attributeNames" items="${attributeNamesList}"
                        multiple="true" /></td>
            </tr>
<!--        <tr>
                <td>Environment</td>
                <td><form:checkboxes items="${environmentList}"
                        path="environments" /></td>
            </tr>
 -->            
            <tr>
                <td><form:label path="machineName">Machine Name</form:label></td>
                <td><form:input path="machineName" /></td>
            </tr>
            <tr>
                <td><form:label path="portNumber">Port Number</form:label></td>
                <td><form:input path="portNumber" /></td>
            </tr>

            <tr>
                <td colspan="2"><input type="submit" value="Submit" /></td>
            </tr>
        </table>
    </form:form>

</res:body>
</html> 
```

result.jsp 文件（我将在点击该 url 后使用它来显示结果）

```
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<html>
<res:head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="layout" content="main" />
    <title>HostDomain</title>
</res:head>
<res:body>

    <h2>Response after submitting the result</h2>
    // Not sure what I need to add here to show the result after hitting the url

</res:body>
</html> 
```

控制器类-

```
@Controller
public class SampleRaptorController {

    @RequestMapping(value = "/student", method = RequestMethod.GET)
    public ModelAndView student() {
        return new ModelAndView("student", "command", new Student());
    }

    @RequestMapping(value = "/addStudent", method = RequestMethod.POST)
    public String addStudent(@ModelAttribute("SpringWeb") Student student,
            ModelMap model) {
        model.addAttribute("userId", student.getUserId());

        return "result";
    }

    @ModelAttribute("attributeNamesList")
    public Map<String,String> populateSkillList() {

        //Data referencing for java skills list box
        Map<String,String> attributeNamesList = new LinkedHashMap<String,String>();
        attributeNamesList.put("ACCOUNT","host.profile.ACC");
        attributeNamesList.put("ADVERTISING","host.profile.ADV");
        attributeNamesList.put("SEGMENTATION","host.profile.SEG");  

        return attributeNamesList;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T09:20:57.320

您可以`RestTemplate`用于从您的 spring 组件调用 RESTful URL

所以，你的控制器方法可以如下

```
@Controller
public class SampleRaptorController {

    @Autowired
    RestTemplate restTemplate;

    @RequestMapping(value = "/addStudent", method = RequestMethod.POST)
    public String addStudent( @ModelAttribute("SpringWeb") Student student,
                    Model model){

        // Build URL
        StringBuilder url = new StringBuilder().
                        append("http://localhost:8080/service/newservice/v1/get").
                        append("?PP.USERID=" + student.getUserId).
                        append("&debugflag=" + student.isDebugFlag);// so on

        // Call service
        String result = restTemplate.getForObject(url.toString(), String.class);
        model.addAttribute("result", result);

        return "result";
    }

} 
```

您的 spring 配置应该注册 restTemplate 如下：

```
<bean id="restTemplate" class="org.springframework.web.client.RestTemplate"/> 
```

有关更多详细信息，请参阅[RestTemplate 文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/remoting.html#rest-resttemplate)。

以上应该可以。

一个建议.. 你的 RESTful URL ( `http://localhost:8080/service/newservice/v1/get/PP.USERID=1000012848, debugflag=true/host.profile.ACCOUNT`) 真的很糟糕。一旦你解决了你的问题，我建议你去谷歌看看一个好的 RESTful URL 应该是什么样子。

干杯，维奈

# ruby-on-rails - 将 attr_accessible 应用于给定角色的所有字段

> ID：14432168
> 
> 赞同：1
> 
> 时间：2013-01-21T03:34:26.503
> 
> 标签：ruby-on-rails, attr-accessible

我正在寻找一种方法来轻松地将 attr_accessible 应用于给定角色的模型中的所有字段，以便我可以在我的管理控制台中批量分配所有字段。我想做这样的事情：

```
 class User < ActiveRecord::Base
         attr_accessible :name
         attr_accessible :all, :as => :admin
    end 
```

使用 :all 显然不起作用。有没有一种简单的方法可以将 attr_accessible 应用于所有字段而不必全部列出，因为我有很多字段，而且我不想每次添加字段时都必须记住这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-20T19:25:47.777

```
attr_accessible *column_names, :as => :admin 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T03:49:22.633

我恳请您真正花时间添加每个字段，因为这为您提供了一个机会来思考它是否真的需要 attr_accessible。也就是说，这可以实现：

```
columns.each do |column|
  attr_accessible column.name.to_sym, :as => :admin
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T07:58:04.283

我想知道 column_names 而不是 column ：

```
(column_names - ['col1', 'col2', 'col3']).each do |column|
  attr_accessible column.to_sym
end 
```

# linux - 如何检查进程是否已填满 STDOUT 或 STDERR 缓冲区

> ID：14432169
> 
> 赞同：1
> 
> 时间：2013-01-21T03:34:27.033
> 
> 标签：linux, debugging, command-line

鉴于 Linux 机器上的一个进程似乎被卡住，我如何判断它是否由于 STDOUT 或 STDERR 缓冲区已满而被卡住？

在我的特殊情况下，我有一个进程没有执行 CPU 活动，但在我希望它在几秒钟内退出时仍然运行。我的怀疑是该进程已经填满了 STDOUT 或 STDERR 的缓冲区，并且应该从缓冲区读取的进程由于某种原因已经停止这样做。

有什么办法可以证实这个怀疑吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T03:57:26.103

附加 gdb 并运行回溯几乎证实了我的理论......

```
$ gdb /opt/our_process pid
...blah blah blah...
(gdb) bt
#0  0x0000003f27adae60 in __write_nocancel () from /lib64/libc.so.6
#1  0x0000003f27a71583 in _IO_new_file_write () from /lib64/libc.so.6
#2  0x0000003f27a7144a in _IO_new_file_xsputn () from /lib64/libc.so.6
#3  0x0000003f27a49531 in buffered_vfprintf () from /lib64/libc.so.6
#4  0x0000003f27a4449e in vfprintf () from /lib64/libc.so.6
#5  0x0000003f27a4f03a in printf () from /lib64/libc.so.6
...out process's stack... 
```

[而作为庇护所建议](https://stackoverflow.com/a/14432284/797)的strace似乎也可以解决问题......

```
$ strace -p 27689
Process 27689 attached - interrupt to quit
write(1, "some_text"..., 293 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T03:50:42.827

这是一个标准的 linux 进程，一个专门安装的 3rd 方包还是自定义编写的代码？

标准 linux 进程应该没有这样的问题，而自定义代码最有可能是罪魁祸首。调试这种情况的最简单方法是添加特殊的调试代码。

否则，请查看您的 std 实用程序或 3rd-party 包是否具有详细模式，通常是`-v, or -vv, or -vvv`.

`truss (for solaris)`最后，对于某些 Linux 版本，您可以使用操作系统的版本`strace`来查看它挂在哪里。

IHTH

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T03:53:56.340

关于您的替代理论，请查看[SO](https://stackoverflow.com/questions/10803122/how-can-i-check-if-a-cli-program-is-waiting-for-input-from-stdin)。我发现[这](http://www.pixelbeat.org/programming/stdio_buffering/)很有趣，我希望这里的东西有用。干杯

# lambda - Coq 中的奇数 Lambda 语法

> ID：14432175
> 
> 赞同：1
> 
> 时间：2013-01-21T03:35:58.483
> 
> 标签：lambda, coq

我正在阅读[CPDT](http://adam.chlipala.net/cpdt/html/toc.html)并且有一个我不理解的示例：

```
Definition plus_rec : nat -> nat -> nat :=
  nat_rec (fun _ : nat => nat -> nat) (fun m => m) (fun _ r m => S (r m)). 
```

除了`fun _ : nat => nat -> nat`. 我根本不明白这有什么意义，这个函数似乎返回了一个没有值的类型。

我是否误解了关于 Coq 的一些基本内容？那个 lambda 的意义是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T05:04:13.470

让我们来看看`nat_rec`：

```
nat_rec :
  forall P : nat -> Set,
  P O ->
  (forall n : nat, P n -> P (S n)) ->
  forall n : nat, P n 
```

它的第一个参数是 a `P`，给定 a `nat`，返回 a `Set`。然后你将给出集合`P O`的一个元素，`P (S n)`假设你有一个来自的元素`P n`，最后给你一个类型`forall n, P n`的元素，这意味着它可以`P n`为每个`n`你构造一个类型的元素作为输入传入（如果传递 O，它将返回`P O`您提供的值，否则它将通过重复应用第三个参数来构建您的结果）。

* * *

现在，让你感到困惑的是`P`我一直在谈论的那个 lambda。它被赋予一个`nat`并从中构建“返回类型”。特别是我们试图有返回类型`nat_rec`，即`forall n : nat, P n`是类型`plus_rec`，即`nat -> nat -> nat`。这可以通过`P`对所有 n,进行实例化来完成`P n = nat -> nat`。这是我们使用 lambda-term 获得的`fun _ : nat => nat -> nat`。

该术语忽略了输入`nat`（因为`nat_rec`对于构建其类型取决于`nat`它们接收的第一个参数的事物来说足够通用，但`plus_rec`部分应用于任何第一个参数的类型实际上并不依赖于该参数的值）。然后它只是返回`nat -> nat`（这是对一个操作数进行部分加法的类型：我们仍然期望 a`nat`才能返回 sum `nat`）。

* * *

现在，如果你看一下`nat_rec`部分应用于那个有趣的 lambda 项，类型是：

```
nat_rec (fun _ : nat => nat -> nat) :
  (fun _ : nat => nat -> nat) O ->
  (forall n : nat, (fun _ : nat => nat -> nat) n -> (fun _ : nat => nat -> nat) (S n)) ->
  forall n : nat, (fun _ : nat => nat -> nat) n 
```

（我刚刚回答`P`了`(fun _ : nat => nat -> nat)`。现在，这简化为：

```
nat_rec (fun _ : nat => nat -> nat) :
  (nat -> nat) ->
  (forall n : nat, (nat -> nat) -> (nat -> nat)) ->
  forall n : nat, (nat -> nat) 
```

现在这肯定会令人困惑。

您应该将需要提供的第一个参数视为 to 的部分应用的`plus`类型`O`。它接收第二个操作数，并返回两者之和：

```
(fun m => m) (* morally, O + m *) 
```

第二个参数是一个`(n : nat)`，一个函数`r : nat -> nat`，另一个`m : nat`，并且需要返回一个final `nat`。它是这群人中最令人困惑的。从道德上讲，`r`是 a `P n`，也就是说，给定我们的目标，“一个知道如何将 n 添加到其输入的函数”。再次从道德上讲，最后一个`(nat -> nat)`应该是 a `P (S n)`，即“知道如何将 (S n) 添加到其输入的函数”。特别是，我们将此输入命名为`m`。您应该能够说服自己结果应该是：

```
(fun _ r m => S (r m))
(* ignore n, use r (which is the "+ n" function) on m, to get (n + m), and add 1 to get (n + 1) + m *) 
```

有了这一切，我们设法构建了函数`plus`。

* * *

请注意，这是一种非常容易出错的定义方式`plus_rec`，特别是因为您必须非常努力地记住什么是什么，否则您将不会定义您想要的函数，因为打字真的很松散（看看我们如何忽略`n`最的时间）。事实上，在同一函数的早期草案中存在一个错误，该函数进行了类型检查。

我相信这表明一切都在地毯下，但不要认为这是你应该定义 plus_rec 的一般方式。

* * *

最后，这很难解释，我很确定我的答案不会很清楚。随意发表评论，我将编辑答案以使事情更干净。

# android - 使用自定义属性设置 View 子类的自定义属性？

> ID：14432178
> 
> 赞同：2
> 
> 时间：2013-01-21T03:35:58.807
> 
> 标签：android, android-layout

如果我有以下设置：

```
public class ABCView extends View {
    //implementation here
} 
```

具有以下自定义属性：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name = "ABCView" >
       <attr name="foo" format="boolean"/>
    </declare-styleable>
</resources> 
```

如果我想用另一个视图子类化这个视图，但仍然能够在 XML 中指定自定义属性的值，我该怎么做？

```
public class DEFView extends ABCView {
    //implementation here
} 
```

但是当我尝试在 XML 中使用子视图时，我收到一个错误 - 它无法识别该属性适用，因为它似乎不知道 java 类之间的关系。我该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T05:54:30.587

**由于 XML 不涉及 java 类层次结构，因此您可能还希望为子子类视图显式指定自定义属性。**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name = "DEFView" >
       <attr name="foo" format="boolean"/>
    </declare-styleable>
</resources> 
```

# python - Python noob 的 While 循环

> ID：14432192
> 
> 赞同：4
> 
> 时间：2013-01-21T03:37:09.790
> 
> 标签：python

我正在尝试教我儿子如何编程，我给了他一个我自己无法完成的挑战。

他必须提示用户输入 A、B 或 C。根据他们的选择，他将打印一些结果和其他内容。当我们完成这项工作时，我正在尝试进行一些错误处理并检查输入不是 A、B 或 C 的情况。下面列出了代码。我当然感谢您提供的任何指导。

```
print "************************************************************"
print "*                                                          *"
print "*            Welcome to the cinemas                        *"
print "*                                                          *"
print "************************************************************"
print "*                                                          *"
print "*  What movie would you like to see ?                      *"
print "*                                                          *"
print "*  A) Star Wars                                            *"
print "*  B) Bourne Identity                                      *"
print "*  C) The Hunger Games                                     *"
print "*                                                          *"
print "************************************************************"
movie=raw_input()
while(movie!="A","B","C"):
    print "************************************************************"
    print "*                                                          *"
    print "*            Welcome to the cinemas                        *"
    print "*                                                          *"
    print "************************************************************"
    print "*                                                          *"
    print "*  What movie would you like to see ?                      *"
    print "*                                                          *"
    print "*  A) Star Wars                                            *"
    print "*  B) Bourne Identity                                      *"
    print "*  C) The Hunger Games                                     *"
    print "*                                                          *"
    print "************************************************************"
    movie=raw_input()

print "************************************************************"
print "*                                                          *"
print "*  How many tickets would you like ?                       *"
print "*                                                          *"
print "************************************************************"
quantity =input()
cost = 7.5
if movie =="A":
    print "You are seeing Star Wars"
    price = cost*quantity
    print "You owe ", price
elif movie =="B":
    print "You are seeing Bourne Identity"
    price = cost*quantity
    print "You owe ", price
elif movie =="C":
    print "You are seeing The Hunger Games"
    price = cost*quantity
    print "You owe ", price 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T03:38:05.313

你想做的`while movie not in ("A", "B", "C")`。

`movie != "A", "B", "C"`检查是否`movie`等于三元素元组`("A", "B", "C")`，它永远不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T04:14:43.800

这里有一些更好的方法来构建你的循环以避免重复。

第一种方法是将电影设置为无效值，这意味着循环将始终至少执行一次

```
movie = None
while movie not in ("A", "B", "C"):
    print "************************************************************"
    print "*                                                          *"
    print "*            Welcome to the cinemas                        *"
    print "*                                                          *"
    print "************************************************************"
    print "*                                                          *"
    print "*  What movie would you like to see ?                      *"
    print "*                                                          *"
    print "*  A) Star Wars                                            *"
    print "*  B) Bourne Identity                                      *"
    print "*  C) The Hunger Games                                     *"
    print "*                                                          *"
    print "************************************************************"
    movie = raw_input() 
```

第二种方法是使用`while True:`循环

```
while True:
    print "************************************************************"
    print "*                                                          *"
    print "*            Welcome to the cinemas                        *"
    print "*                                                          *"
    print "************************************************************"
    print "*                                                          *"
    print "*  What movie would you like to see ?                      *"
    print "*                                                          *"
    print "*  A) Star Wars                                            *"
    print "*  B) Bourne Identity                                      *"
    print "*  C) The Hunger Games                                     *"
    print "*                                                          *"
    print "************************************************************"
    movie = raw_input()
    if movie in ("A", "B", "C"):
        break 
```

然后您可以按照 Alex 的建议将电影存储在变量中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T03:58:56.053

此外，您可以使用多行字符串，而不是打印每一行：

```
welcometext = """
************************************************************
*                                                          *
*            Welcome to the cinemas                        *
*                                                          *
************************************************************
*                                                          *
*  What movie would you like to see ?                      *
*                                                          *
*  A) Star Wars                                            *
*  B) Bourne Identity                                      *
*  C) The Hunger Games                                     *
*                                                          *
************************************************************""" 
```

这样，您的程序可以非常紧凑：

```
print welcometext
movie = raw_input(">>")
while movie.upper() not in ("A","B","C"):
    print welcometext
    movie = raw_input(">>") 
```

* * *

如果你想做一些更高级的事情：

```
movies = {
    "A": "Star Wars", 
    "B": "Bourne Identity", 
    "C": "The Hunger Games", 
    "D": "Kill Bill"
}

welcometext = """
************************************************************
*                                                          *
*            Welcome to the cinemas                        *
*                                                          *
************************************************************
*                                                          *
*  What movie would you like to see ?                      *
"""

for letter, movie in movies.items():
    welcometext += "*  {}) {: <52} *\n".format(letter, movie)

# ( <52 is for padding 52 spaces, \n is for the newline )

welcometext += """*                                                          *
************************************************************"""

movieletter = ''
while movieletter.upper() not in movies:
    print welcometext
    movieletter = raw_input(">>")

moviename = movies[movieletter.upper()]
print "You have selected {}!".format() 
```

然后稍后您也可以将价格等添加到`movies`字典中。享受！

# php - 为什么我的电子邮件地址字段没有像我希望的那样显示在单选按钮的右侧？

> ID：14432193
> 
> 赞同：0
> 
> 时间：2013-01-21T03:37:15.787
> 
> 标签：php, javascript, html, css

以前是这样，但我改变了一些东西，现在不会了。我会分享代码，但我不知道什么是完全相关的。当然，这一切都可以通过检查员获得。

[实时页面](http://web.cs.dal.ca/~selig/serverside/assignment1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T04:14:08.173

@Doug Smith`width: 95px;`从#email 中删除

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T03:39:45.667

具有 id 的 div`gender`的宽度太小，以至于所有单选按钮和标签都不能在一行上。从 中删除宽度 css 属性`#gender`。

# meteor - 流星中的 child_process.spawn

> ID：14432194
> 
> 赞同：3
> 
> 时间：2013-01-21T03:37:18.767
> 
> 标签：meteor

有没有人在任何平台上在流星上使用节点的 childprocess.spawn() 取得任何成功？我已经在 OS X 和 Windows 上进行了如下尝试，应用程序立即崩溃：

```
if (Meteor.isServer) {
  Meteor.startup(function() {
    cmd = __meteor_bootstrap__.require('child_process').spawn('irb', [], {detached: true, stdio:'pipe'});
    cmd.stdout.on('data', function(data){
      Fiber(function(){
        Replies.remove({});
        Replies.insert({message: data});
      }).run();
    });

 });
} 
```

在控制台中，我在 OS X 上收到以下消息，在 Windows 上收到类似消息：

```
Assertion failed: (handle->InternalFieldCount() > 0), function Unwrap, file ../src/node_object_wrap.h, line 61.
Exited from signal: SIGABRT 
```

有人有想法吗？

谢谢！
-格雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:49:23.737

`data`是不能插入到集合中的节点[缓冲区；](http://nodejs.org/api/buffer.html)首先将其转换为字符串。

另请注意，当数据从子进程流式传输时，您的数据事件回调将被多次调用（除非输出太小以至于您碰巧将所有数据都放在一个缓冲区中）。您需要在缓冲区中累积数据，然后在收到流结束事件时将其插入您的集合中。

如果您的子进程有可能输出 utf-8（纯 ASCII 以外的任何内容），请确保先将数据累积到节点 Buffer 中，*然后*将整个 Buffer 转换为字符串，而不是转换每个块将数据转换为字符串并将数据累积为字符串。（utf-8 字符可以跨越多个字节，因此您不能将字节流切成任意片段并将每个片段分别解析为 utf-8）。

# javascript - 阻止html页面直接访问但可以从链接查看？

> ID：14432195
> 
> 赞同：0
> 
> 时间：2013-01-21T03:37:22.813
> 
> 标签：javascript, html, redirect

好的，所以基本上我已经整理了一个安全性非常低的登录页面（javascript用户名和密码），这没什么大不了的，因为它并没有真正保护任何东西，我只是为我的年轻人制作了一个登录页面教会网站查看和学习主日学资料。我想要的是让它你不能直接在你的“个人资料”中输入 html 或添加书签，我希望他们必须使用 javascript 登录。例如，脚本会将 bob 定向到他的bob.html 中的“个人资料”，但我只想在 bob.html 来自 login.html 的情况下才转到 bob.html，有没有办法在不变得非常复杂的情况下做到这一点？我期待没有，但我想我还是会问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T03:40:57.530

如果不涉及服务器端编程，您将不得不使用简单的 JavaScript 重定向，它甚至不被视为“低级”安全性，而是“非级”安全性:)

无论如何，您可以使用 document.referrer 检查引荐来源网址，并在其不正确时重定向到主页，请记住，这很容易被用户操作。

有关 document.referrer 的更多详细信息，请参见[http://www.w3schools.com/jsref/prop_doc_referrer.asp](http://www.w3schools.com/jsref/prop_doc_referrer.asp)

if ((document.referrer).indexOf('login.html') > 0 && username=='someone' && password=='pass') {do stuff} else {用户没有从 login.html 到达或用户名是错误或密码错误}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T04:26:21.900

如果这全部来自客户端javascript，那么您将无法做任何真正安全的事情。我假设你知道这一点。

但是，您可以通过让登录页面的链接设置一个非常短的过期 cookie（如 1-5 分钟）来为临时查看者直接访问创建一个轻微的障碍，然后转到个人资料页面并让个人资料页面拥有所有默认情况下隐藏的配置文件内容（通过 CSS 规则）。然后，您的 javascript 可以在加载时检查 cookie 是否存在，如果存在，则显示内容。

如果查看者尝试直接转到个人资料页面，则 cookie 将不存在并且页面内容将不会被 javascript 显示。显然，内容仍然存在于页面中，因此任何了解网页如何工作的查看者仍然可以通过其他方式查看内容，但默认情况下不会在浏览器中显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T05:10:37.953

多种方案是可能的，例如上面 jfriend00 提出的方案。

您还可以使用滚动 URL。

假设您的个人资料页面位于[http://example.com/profile/foo](http://example.com/profile/foo)。将其更改为[http://example.com/profile/foo?time=yyMMddhhmm](http://example.com/profile/foo?time=yyMMddhhmm)其中 yyMMdd 代表当前日期，hhmm 代表当前服务器时间。然后确保服务器在时间不匹配时拒绝提供此页面。

很容易看出如果有人将此链接添加为书签会发生什么。他们的书签最多只能工作一分钟。

不幸的是，页面上的链接也会在一分钟后过期。您可以解决这个大约每分钟更新一次 URL 的问题，但它并不像看起来那么简单。您需要考虑用户计算机上的时间可能与服务器时间不同的事实。

另一种方法是使用[会话 cookie](http://en.wikipedia.org/wiki/HTTP_cookie#Session_cookie)。在浏览器关闭之前，会话 cookie 一直有效。当您关闭它时，它们会自动过期。这是 jfriend00 原始答案的变体。

希望这可以帮助。

# ios - 如何在 IOS 中使用 HTML.fromhtml？

> ID：14432200
> 
> 赞同：0
> 
> 时间：2013-01-21T03:37:56.467
> 
> 标签：ios, objective-c

我想发出这样的 NSString 通知：“你必须支付 4.00 美元。”。钱是红色的。在 Android 中，我可以使用 HTML.formhtml 做到这一点。但我不知道如何在 IOS 中做到这一点。谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:31:25.580

试试这个代码

```
CATextLayer *aTextLayer_= [[[CATextLayer alloc]init] autorelease];
    aTextLayer_.frame = CGRectMake(10, 100, 300, 50);
    aTextLayer_.backgroundColor=[UIColor clearColor].CGColor;
    aTextLayer_.foregroundColor = [[UIColor redColor] CGColor];
    aTextLayer_.alignmentMode=kCAAlignmentCenter;
    aTextLayer_.contentsScale = [[UIScreen mainScreen] scale];
    aTextLayer_ .wrapped=YES;
    [aTextLayer_ setAlignmentMode:kCAAlignmentLeft];

    UIFont *smallFont = [UIFont systemFontOfSize:25];
    CTFontRef ctSmallFont = CTFontCreateWithName((CFStringRef)smallFont.fontName, smallFont.pointSize, NULL);

    UIFont *boldFont = [UIFont systemFontOfSize:25];
    CTFontRef ctBoldFont = CTFontCreateWithName((CFStringRef)boldFont.fontName, boldFont.pointSize, NULL);

    CGColorRef cgColor = [UIColor greenColor].CGColor;
    CGColorRef cgColor1 = [UIColor redColor].CGColor;

    NSDictionary *attributes = [NSDictionary dictionaryWithObjectsAndKeys:
                                (id)ctSmallFont, (id)kCTFontAttributeName,
                                cgColor, (id)kCTForegroundColorAttributeName, nil];

    NSDictionary *subattributes = [NSDictionary dictionaryWithObjectsAndKeys:
                                   (id)ctBoldFont, (id)kCTFontAttributeName,
                                   cgColor1, (id)kCTForegroundColorAttributeName, nil];
    CFRelease(ctBoldFont);
    NSString *subString=@"You must pay 4.00 dollar.";
    NSMutableAttributedString *attrStr = [[NSMutableAttributedString alloc] initWithString:subString attributes:attributes];

    [attrStr addAttributes:subattributes range:NSMakeRange(13,4)];
    aTextLayer_.string=attrStr;
    [self.view.layer addSublayer:aTextLayer_]; 
```

![在此处输入图像描述](../Images/3521822a4d2f45b2ff83f65062443c3b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T05:07:17.193

如果您不想使用 a`UIWebView`您最好的选择是使用 a `NSAttributedString`。

一个不关心极端情况和错误检查的幼稚实现将类似于

```
NSString * string = @"You must pay 4.00 dollar";
NSString * pattern = @"You must pay (.+) dollar";
NSRegularExpression * regex = [[NSRegularExpression alloc] initWithPattern:pattern options:0 error:NULL];
NSArray * matches = [regex matchesInString:string options:0 range:NSMakeRange(0, string.length)];
NSRange priceRange = [matches[0] rangeAtIndex:1];
NSMutableAttributedString * attrString = [[NSMutableAttributedString alloc] initWithString:string];
[attrString addAttribute:NSForegroundColorAttributeName value:[UIColor redColor] range:priceRange]; 
```

请注意，我假设您的模式将始终是`You must pay (.+) dollar`. 如果它不同，只需调整正则表达式以检索`NSRange`需要风格化的子字符串。

然后你可以使用属性字符串作为任何接受 a 的内容`NSAttributedString`，例如从 iOS 6 开始`UILabel`就有一个`attributedText`属性，因此你可以做类似的事情

```
yourLabel.attributedText = attrString; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T04:17:06.677

您可以将 html 代码添加到 UIWebView

```
 [_webView loadHTMLString:@"<p>You must pay <font color=\"red\">4.00</font> dollar. </p> " baseURL:nil]; 
```

试试这个代码

-----------------备用选项----------------------------

如果要修复此文本格式（您必须支付 XXXX.XXX 美元。）更好地创建自定义组件

1.  创建类扩展 UIView
2.  添加具有不同字体颜色的 UILable

# rad - 无法在 RAD 6.0 上创建本地服务器配置文件

> ID：14432202
> 
> 赞同：1
> 
> 时间：2013-01-21T03:38:00.753
> 
> 标签：rad

我需要在 RAD 6.0.0 中创建一个新的服务器配置文件我面临的问题是，在转到 Windows -> 首选项 -> 服务器 -> Websphere 后，我无法看到“Websphere v6.0 本地服务器配置文件创建”部分。

可能是安装的问题，因为我终止了 JVM，安装时退出代码 = 1 错误，我再次收到此错误，我启动 RAD。到目前为止，我可以通过启动 eclipse 而不是 RAD 来摆脱它，即通过转到 RAD 安装目录 -> eclipse ->

额外细节 -

操作系统 - Windows7（64 位）

提前感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-23T22:41:16.397

如果已经在其他机器上创建了配置文件。最好获取以下文件夹并在您的机器上替换。

\runtimes\base_v6\properties

或者可以参考以下 IBM 文章来创建新的配置文件

[http://pic.dhe.ibm.com/infocenter/wasinfo/v6r0/index.jsp?topic=%2Fcom.ibm.websphere.nd.doc%2Finfo%2Fae%2Fae%2Ftpro_instancessaappserv.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r0/index.jsp?topic=%2Fcom.ibm.websphere.nd.doc%2Finfo%2Fae%2Fae%2Ftpro_instancessaappserv.html)

# vb.net - 逗号、')' 或预期的有效表达式继续。错误

> ID：14432208
> 
> 赞同：0
> 
> 时间：2013-01-21T03:38:29.133
> 
> 标签：vb.net

以下代码无法编译并出现此错误：

> 逗号、')' 或预期的有效表达式继续。

我想不通。请帮忙。

```
Dim ExeName As String = IO.Path.GetFileNameWithoutExtension(Application.Ex ecutablePath) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T03:39:19.130

```
Application.Ex ecutablePath 
```

这里有一个无关的空间；去掉它。

# regex - 使用 awk 替换正则表达式模式

> ID：14432209
> 
> 赞同：23
> 
> 时间：2013-01-21T03:38:44.293
> 
> 标签：regex, linux, awk

我正在尝试编写一个正则表达式来用空格替换文件中存在的一个或多个“+”符号。我尝试了以下方法：

```
 echo This++++this+++is+not++done | awk '{ sub(/\++/, " "); print }'
 This this+++is+not++done 
```

预期的：

```
This this is not done 
```

任何想法为什么这不起作用？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-21T03:43:44.167

使用`gsub`which 进行全局替换：

```
echo This++++this+++is+not++done | awk '{gsub(/\++/," ");}1' 
```

`sub`函数仅替换第一个匹配项，替换所有匹配项使用`gsub`.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-21T03:47:12.687

或`tr`命令：

```
echo This++++this+++is+not++done | tr -s '+' ' ' 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-21T14:15:57.293

惯用的 awk 解决方案是将输入字段分隔符转换为输出分隔符：

```
$ echo This++++this+++is+not++done | awk -F'++' '{$1=$1}1'
This this is not done 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-21T05:12:12.850

试试这个

`echo "This++++this+++is+not++done" | sed -re 's/(\+)+/ /g'`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-21T03:46:03.267

你也可以用`sed`。

```
echo This++++this+++is+not++done | sed -e 's/+\{1,\}/ /g' 
```

这匹配一个或多个`+`并将其替换为空格。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2022-01-23T22:52:34.133

对于这种情况，我推荐`sed`，这对于替换很强大，并且语法很短。

解决方案`sed`：

```
echo This++++this+++is+not++done | sed -En 's/\\++/ /gp' 
```

结果：

```
This this is not done 
```

For `awk`：您必须使用该`gsub`函数进行全局行替换（多个替换）。语法： `gsub(regexp, replacement [, target])`. 如果省略第三个参数，则为`$0`目标。目标必须是变量或数组元素。gsub 在目标中工作，用替换覆盖目标。

解决方法：

```
echo This++++this+++is+not++done | awk 'gsub(/\\++/," ") 
```

结果：

```
This this is not done 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2015-03-25T08:40:48.600

```
echo "This++++this+++is+not++done" | sed 's/++*/ /g' 
```

* * *

## 回答 #8

> 赞同：-7
> 
> 时间：2017-03-17T13:09:23.430

如果您可以访问计算机上的节点，则可以通过安装 rexreplace 来实现

```
npm install -g regreplace 
```

然后运行

```
rexreplace '\++' ' ' myfile.txt 
```

如果您在目录中有更多文件，`data`您可以这样做

```
rexreplace '\++' ' ' data/*.txt 
```

# java - 这个片段怎么会在旋转时使我的程序崩溃？

> ID：14432215
> 
> 赞同：0
> 
> 时间：2013-01-21T03:40:02.030
> 
> 标签：java, android, android-widget, android-fragments

我有以下片段。它工作得很好，直到我旋转我的设备。`RadarSelectionFragment`然后它会因失败而崩溃`Instantiate`。`FragmentPagerAdapter`和有问题的代码`Fragment`如下：

```
@SuppressLint("DefaultLocale")
public class SectionsPagerAdapter extends FragmentPagerAdapter {

    public SectionsPagerAdapter() {
           // Do some stuff     
    }

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        if (position == 0) {
            Fragment fragment = new RadarSelectionFragment();
            Bundle args = new Bundle();
            args.putInt(RadarSelectionFragment.ARG_SECTION_NUMBER, position + 1);
            fragment.setArguments(args);
            return fragment;
        } else if (position == 1) {
            Fragment fragment = new WeatherMapDisplayFragment();
            Bundle args = new Bundle();
            args.putInt(WeatherMapDisplayFragment.ARG_SECTION_NUMBER, position + 1);
            fragment.setArguments(args);
            return fragment;
        } else {
            Fragment tf = new RadarSelectionFragment();
            return tf;
        }
    }

    @Override
    public int getCount() {
        return 2;
    }

    @SuppressLint("DefaultLocale")
    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
        case 0:
            return getString(R.string.title_section1).toUpperCase();
        case 1:
            return getString(R.string.title_section2).toUpperCase();
        }
        return null;
    }
}

public static class RadarSelectionFragment extends Fragment {

    public static final String ARG_SECTION_NUMBER = "section_number";

    public RadarSelectionFragment() {}

    @Override
    public final View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        if (getArguments().getInt(ARG_SECTION_NUMBER) == 1) {
            return inflater.inflate(R.layout.radars, container, false);
        } else {
            return container;
        }

    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setRetainInstance(true);
    }

     @Override
     public void onSaveInstanceState(Bundle outState) {

         super.onSaveInstanceState(outState);
     }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        setRetainInstance(true);

        ...
    }

    public void onNothingSelected(AdapterView<?> parent) {
                // Another interface callback
            }
        });
    }

} 

public class WeatherMapDisplayFragment extends Fragment {

    public static final String ARG_SECTION_NUMBER = "section_number";

    public WeatherMapDisplayFragment() {
    }

    @Override
    public final View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        if (getArguments().getInt(ARG_SECTION_NUMBER) == 2) {
            return inflater.inflate(R.layout.display, container, false);
        } else {
            return container;
        }
    }
} 
```

我试过用谷歌搜索这个问题，但我一直在寻找各种与确保问题相关的解决方案`Fragment Class`（`static`我已经完成了）。

我对 Android 编程比较陌生，所以如果您回答，如果您有时间，能否请您发布一个示例和/或链接到其他示例。

提前致谢！

编辑 1：堆栈跟踪

```
01-21 13:46:31.907: E/AndroidRuntime(1101): FATAL EXCEPTION: main
01-21 13:46:31.907: E/AndroidRuntime(1101): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.radarau/com.example.radarau.MainActivity}: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.example.radarau.MainActivity$WeatherMapDisplayFragment: make sure class name exists, is public, and has an empty constructor that is public
01-21 13:46:31.907: E/AndroidRuntime(1101):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-21 13:46:31.907: E/AndroidRuntime(1101):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-21 13:46:31.907: E/AndroidRuntime(1101):     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3692)
01-21 13:46:31.907: E/AndroidRuntime(1101):     at android.app.ActivityThread.access$700(ActivityThread.java:141)
01-21 13:46:31.907: E/AndroidRuntime(1101):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1240)
01-21 13:46:31.907: E/AndroidRuntime(1101):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-21 13:46:31.907: E/AndroidRuntime(1101):     at android.os.Looper.loop(Looper.java:137)
01-21 13:46:31.907: E/AndroidRuntime(1101):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-21 13:46:31.907: E/AndroidRuntime(1101):     at java.lang.reflect.Method.invokeNative(Native Method)
01-21 13:46:31.907: E/AndroidRuntime(1101):     at java.lang.reflect.Method.invoke(Method.java:511)
01-21 13:46:31.907: E/AndroidRuntime(1101):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-21 13:46:31.907: E/AndroidRuntime(1101):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-21 13:46:31.907: E/AndroidRuntime(1101):     at dalvik.system.NativeStart.main(Native Method)
01-21 13:46:31.907: E/AndroidRuntime(1101): Caused by: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.example.radarau.MainActivity$WeatherMapDisplayFragment: make sure class name exists, is public, and has an empty constructor that is public
01-21 13:46:31.907: E/AndroidRuntime(1101):     at android.support.v4.app.Fragment.instantiate(Fragment.java:405)
01-21 13:46:31.907: E/AndroidRuntime(1101):     at android.support.v4.app.FragmentState.instantiate(Fragment.java:97)
01-21 13:46:31.907: E/AndroidRuntime(1101):     at android.support.v4.app.FragmentManagerImpl.restoreAllState(FragmentManager.java:1767)
01-21 13:46:31.907: E/AndroidRuntime(1101):     at android.support.v4.app.FragmentActivity.onCreate(FragmentActivity.java:208)
01-21 13:46:31.907: E/AndroidRuntime(1101):     at com.example.radarau.MainActivity.onCreate(MainActivity.java:35)
01-21 13:46:31.907: E/AndroidRuntime(1101):     at android.app.Activity.performCreate(Activity.java:5104)
01-21 13:46:31.907: E/AndroidRuntime(1101):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-21 13:46:31.907: E/AndroidRuntime(1101):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-21 13:46:31.907: E/AndroidRuntime(1101):     ... 12 more
01-21 13:46:31.907: E/AndroidRuntime(1101): Caused by: java.lang.InstantiationException: can't instantiate class com.example.radarau.MainActivity$WeatherMapDisplayFragment; no empty constructor
01-21 13:46:31.907: E/AndroidRuntime(1101):     at java.lang.Class.newInstanceImpl(Native Method)
01-21 13:46:31.907: E/AndroidRuntime(1101):     at java.lang.Class.newInstance(Class.java:1319)
01-21 13:46:31.907: E/AndroidRuntime(1101):     at android.support.v4.app.Fragment.instantiate(Fragment.java:394)
01-21 13:46:31.907: E/AndroidRuntime(1101):     ... 19 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:49:04.967

你的日志猫说

```
Caused by: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.example.radarau.MainActivity$WeatherMapDisplayFragment: make sure class name exists, is public, and has an empty constructor that is public 
```

您应该为此提供一个公共默认构造函数

```
public WeatherMapDisplayFragment() {
   // Do some stuff     
} 
```

如果该类是嵌套的，则将其`class`设置为`static class`并提供公共默认构造函数或将该片段移动到新的 java 文件中。

# c++ - 不执行派生类版本的虚函数

> ID：14432216
> 
> 赞同：1
> 
> 时间：2013-01-21T03:40:03.427
> 
> 标签：c++, inheritance, object-slicing

我有一组要流出的 SceneElement。这是聚合类：

```
class scene{
public:
    vector<sceneElement> elements;
    void addElement(sceneElement);
    void toStream(std::ostream &);
    void fromStream(std::istream &);
};

void scene::addElement(sceneElement e){
    elements.insert(elements.end(), e);
}

void scene::toStream(std::ostream &strm){
    strm << SCENE_PRE;
    int i;
    for(i=0; i<elements.size(); i++){
        elements[i].toStream(strm);
    }
    strm << SCENE_POST;
} 
```

这是基类：

```
class sceneElement{
public:
    virtual void toStream(std::ostream &);
    virtual void fromStream(std::istream &);
};

void sceneElement::toStream(std::ostream &str){
    str << "SCENE ELEMENT";
}

void sceneElement::fromStream(std::istream &){
    std::cerr << "this is not supposed to be called";
} 
```

这是派生类之一：

```
class camera : public sceneElement{
public:
    P3d location;
    P3d direction;
    double fov;
    int toString(char**);
    virtual void toStream(std::ostream &);
    virtual void fromStream(std::istream &);
};

void camera::toStream(std::ostream &strm){
    strm << CAMERA_PRE << TAG_LOCATION;
    location.toStream(strm);
    strm << TAG_DIRECTION;
    direction.toStream(strm);
    strm << TAG_FOV << fov << CAMERA_POST;
} 
```

但是当我运行这段代码时：

```
scene sc;
sc.addElement(s);
sc.toStream(cout); 
```

它显示

```
<_SCN>SCENE ELEMENT<SCN_> 
```

而不是它应该的实际元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T03:45:08.270

您需要在向量中存储指向基类的指针。
虽然您认为您将派生类对象添加到向量中，但向量中的每个元素只有足够的空间用于基类对象。因此，实际存储在向量中的只是 Base 对象部分。派生类的内容只是被***切掉了***。
这种现象通常被称为C++ 中的***[对象切片](http://en.wikipedia.org/wiki/Object_slicing)***。

此外，您应该考虑使用智能指针，而不是将原始指针存储在向量中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T04:43:55.397

STL 容器不能多态使用，因为它的值语义和需要同质的存储大小。

每个派生对象的大小可以与基础对象的大小不同。

在容器中，很难实现简单的功能，例如：

```
vector<Element> v;
..
int i;
Element e = v [i+5]; 
```

如果 i 和 i+5 之间的每个“元素”可以具有不同的大小。

因此，它只为每个项目使用静态类型的大小，即基数。

绕过这个限制的方法是使用指针容器。因为所有指针的大小都相同，无论其类型如何。我们可以多态地使用指针。

# mysql - MySQL 查询结果返回意外数据

> ID：14432223
> 
> 赞同：2
> 
> 时间：2013-01-21T03:40:45.180
> 
> 标签：mysql, sql

我正在尝试对自定义报告运行查询，该报告应该根据指定日期范围内的贷款还款类型为符合五个条件的客户返回数据。标准是**`Salary Deduction`**、**`Bank Standing Order`**、**`Self-Pay`**和**`Post Dated Cheques`**。**`Bank Debit`**结果应返回来自指定的每个条件的客户端数量的计数。但是，这不是我目前得到的结果；这些查询正在针对这个软件[Mambu](http://www.mambu.com/)进行测试。结果取决于一个**`customfield`**和**`customfieldvalue`**（*它指定要使用的还款类型*）列。这就是我期望的结果应该是这样的：

```
++++++++++++++++++++++++++++++++++++++++++++++++++++++
| LoanProduct           | RepaymentType    | Clients |
++++++++++++++++++++++++++++++++++++++++++++++++++++++
| JUMPSTART LOAN WEEKLY | Self-Pay         | 35      |
------------------------------------------------------
| PAYDAY LOAN MONTHLY   | Salary Deduction | 5       |
------------------------------------------------------
| MICRO-BIZ LOAN        | Bank Debit       | 26      |
------------------------------------------------------
| PAYDAY LOAN WEEKLY    | Self-Pay         | 1       |

  .......
and so on ... 
```

到目前为止我尝试过的解决方案：

**QUERY #1：**
对于这个查询，我只是想找回所有的客户，而不需要计算特定的还款类型；它适用于那种情况。

```
SELECT CONCAT(client.FIRSTNAME, ' ', client.LASTNAME) AS Client, 
    CONCAT(user.FIRSTNAME, ' ', user.LASTNAME) AS Originator, 
    loanproduct.PRODUCTNAME AS LoanProduct, customfieldvalue.VALUE AS RepaymentType
FROM client, user, customfieldvalue, loanaccount
INNER JOIN loanproduct ON loanaccount.PRODUCTTYPEKEY = loanproduct.ENCODEDKEY 
WHERE client.ASSIGNEDUSERKEY = user.ENCODEDKEY 
    AND loanaccount.ACCOUNTHOLDERKEY = client.ENCODEDKEY
    AND customfieldvalue.VALUE = "Bank Debit"
    AND loanaccount.DISBURSEMENTDATE BETWEEN "2012-01-01" AND "2013-01-31"
GROUP BY user.LASTNAME, client.LASTNAME 
```

**QUERY #1.1**
在上面 添加 an`OR`不会产生任何结果：

```
SELECT CONCAT(client.FIRSTNAME, ' ', client.LASTNAME) AS Client, 
    CONCAT(user.FIRSTNAME, ' ', user.LASTNAME) AS Originator, 
    loanproduct.PRODUCTNAME AS LoanProduct, customfieldvalue.VALUE AS RepaymentType
FROM client, user, customfieldvalue, loanaccount
INNER JOIN loanproduct ON loanaccount.PRODUCTTYPEKEY = loanproduct.ENCODEDKEY 
WHERE client.ASSIGNEDUSERKEY = user.ENCODEDKEY 
    AND loanaccount.ACCOUNTHOLDERKEY = client.ENCODEDKEY
    AND customfieldvalue.VALUE = "Bank Debit" OR customfieldvalue.VALUE = "Self-Pay"
    AND loanaccount.DISBURSEMENTDATE BETWEEN "2012-01-01" AND "2013-01-31"
GROUP BY user.LASTNAME, client.LASTNAME 
```

**QUERY #2**
我什至尝试使用`CASE`语句执行此操作，但它只返回`Clients`as的所有行`NULL`并且需要大约 12.1 秒才能完成。

```
SELECT
    loanproduct.PRODUCTNAME AS LoanProduct, customfieldvalue.VALUE AS RepaymentType,
    CASE
       WHEN customfieldvalue.VALUE = "Salary Deduction" THEN COUNT(CONCAT(client.FIRSTNAME, ' ', client.LASTNAME))
       WHEN customfieldvalue.VALUE = "Bank Standing Order" THEN COUNT(CONCAT(client.FIRSTNAME, ' ', client.LASTNAME))
       WHEN customfieldvalue.VALUE = "Self-Pay" THEN COUNT(CONCAT(client.FIRSTNAME, ' ', client.LASTNAME))
       WHEN customfieldvalue.VALUE = "Post Dated Cheques" THEN COUNT(CONCAT(client.FIRSTNAME, ' ', client.LASTNAME))
       WHEN customfieldvalue.VALUE = "Bank Debit" THEN COUNT(CONCAT(client.FIRSTNAME, ' ', client.LASTNAME))
    END AS Clients
FROM client, user, customfieldvalue, loanaccount
INNER JOIN loanproduct ON  loanaccount.PRODUCTTYPEKEY = loanproduct.ENCODEDKEY
WHERE client.ASSIGNEDUSERKEY = user.ENCODEDKEY
    AND loanaccount.ACCOUNTHOLDERKEY = client.ENCODEDKEY
    AND loanaccount.DISBURSEMENTDATE BETWEEN "2012-01-01" AND "2013-01-31"
GROUP BY user.LASTNAME, client.LASTNAME 
```

我在这里做错了什么，这阻止了我得到想要的结果？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:50:57.897

对于查询 2，您需要添加括号，或使用`in`语法：

```
AND customfieldvalue.VALUE in ('Bank Debit', 'Self-Pay') 
```

与正确使用 where 语法一样重要的是修复子句`join`中的语法：`from`

```
FROM client join
     user
     on client.ASSIGNEDUSERKEY = user.ENCODEDKEY join
     loanproduct
     ON loanaccount.PRODUCTTYPEKEY = loanproduct.ENCODEDKEY and
        loanaccount.ACCOUNTHOLDERKEY = client.ENCODEDKEY CROSS JOIN
    customFieldValue
where loanaccount.DISBURSEMENTDATE BETWEEN "2012-01-01" AND "2013-01-31" and
      customfieldvalue.value in ('Bank Debit') 
```

天哪，您会立即看到可能有问题。您通常不希望在设计良好的数据仓库中交叉连接表。CustomFieldValue 如何连接到其他表？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T03:48:40.670

报价（操作顺序）在这里非常重要，你错过了它们，这就是问题所在。

```
SELECT CONCAT(client.FIRSTNAME, ' ', client.LASTNAME) AS Client, 
    CONCAT(user.FIRSTNAME, ' ', user.LASTNAME) AS Originator, 
    loanproduct.PRODUCTNAME AS LoanProduct, customfieldvalue.VALUE AS RepaymentType
FROM client, user, customfieldvalue, loanaccount
INNER JOIN loanproduct ON loanaccount.PRODUCTTYPEKEY = loanproduct.ENCODEDKEY 
WHERE client.ASSIGNEDUSERKEY = user.ENCODEDKEY 
    AND loanaccount.ACCOUNTHOLDERKEY = client.ENCODEDKEY
    AND (customfieldvalue.VALUE = "Bank Debit" OR customfieldvalue.VALUE = "Self-Pay")
    AND loanaccount.DISBURSEMENTDATE BETWEEN "2012-01-01" AND "2013-01-31"
GROUP BY user.LASTNAME, client.LASTNAME 
```

另一种方法是使用“IN()”

```
SELECT CONCAT(client.FIRSTNAME, ' ', client.LASTNAME) AS Client, 
    CONCAT(user.FIRSTNAME, ' ', user.LASTNAME) AS Originator, 
    loanproduct.PRODUCTNAME AS LoanProduct, customfieldvalue.VALUE AS RepaymentType
FROM client, user, customfieldvalue, loanaccount
INNER JOIN loanproduct ON loanaccount.PRODUCTTYPEKEY = loanproduct.ENCODEDKEY 
WHERE client.ASSIGNEDUSERKEY = user.ENCODEDKEY 
    AND loanaccount.ACCOUNTHOLDERKEY = client.ENCODEDKEY
    AND customfieldvalue.VALUE IN("Bank Debit", "Self-Pay")
    AND loanaccount.DISBURSEMENTDATE BETWEEN "2012-01-01" AND "2013-01-31"
GROUP BY user.LASTNAME, client.LASTNAME 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T03:56:30.337

有几个项目脱颖而出。首先，您似乎正在尝试加入 4 个文件，但只定义了 1 个连接 - 在构建复杂连接时，一次添加 1 个文件有时会有所帮助。

此外，您正在使用 GROUP BY 而不汇总任何内容 - 您确定这是您想要的吗？如果您想要一个可以使用的计数`count(*)`，那么所有其他列都需要包含在 GROUP BY 子句中。

# javascript - Canvas/Javascript 仅在开始时周期性减速

> ID：14432225
> 
> 赞同：1
> 
> 时间：2013-01-21T03:41:02.793
> 
> 标签：javascript, canvas

我在使用 canvas 元素时遇到了问题，似乎无法找到问题所在。

最初加载页面时，每 5-15 秒发生一次减速。但是，在浏览了一段时间的 Facebook 并与朋友聊天后，它奇迹般地停止了减速。

我的朋友也看到了周期性的减速，他们使用 chrome/firefox

我不知道发生了什么！我正在阅读内存泄漏/堆分析，但我很难找到问题所在。

我最初只有一个球弹跳，但我决定放入 1000 个球来尝试测试性能，对不起：P

***EDIT1：***好的，我尝试在 Firefox 上运行相同的代码（我一直在使用 chrome），并且球在 Firefox 上的移动速度明显变慢减去我在 chrome 上看到的可怕的口吃......是什么导致浏览器使用不同的球的速度？

**警告 警告 癫痫警告** [现场演示链接](http://sunwooz.xp3.biz/)

[这是代码](https://github.com/sunwooz/jspong)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:28:35.253

因为您正在使用请求动画帧，所以它会尝试达到 60 fps，如果不能，它将满足 30 fps，直到它可以提供 60 fps。所以减速是你的画布以 30 fps 运行，而跳到 60 fps 会使事情看起来加速。

开始时您只能达到 30 fps 的原因可能会有所不同。就我而言，我的计算机功能强大，但我有多个显示器，我只是在新显示器上的新窗口中打开了示例，我怀疑我的操作系统一次只能将 1 个显示器限制为 60 fps，除非我全屏显示在占用所有 3 个显示器的游戏中。但这不是你的问题，我只是用它作为一个例子，说明为什么你需要在各种设置上自己分析和运行性能测试，因为有很多事情可能会导致性能问题。

您感觉到“减速”和“加速”的原因之一是因为您正在逐帧更新位置，但帧之间的时间从 33 毫秒到 16 毫秒不等，具体取决于当前帧速率是多少. 建议让您的所有更新函数使用增量时间（或自上一帧以来经过的时间）作为更新位置的量度。

你有什么：

```
Ball.prototype.update = function() {
  this.x += this.velocity.x;
  this.y += this.velocity.y;
} 
```

我们想在这里包含一个增量时间

```
Ball.prototype.update = function(deltaTime) {
  this.x += this.velocity.x * deltaTime;
  this.y += this.velocity.y * deltaTime;
} 
```

这里唯一的区别是你必须用时间来表达你的速度。例如，您的速度将表示为每秒 100 个像素，而您的 delta Time 也将以秒表示（值约为 0.016 或 0.033）

这不会修复 30 fps，但它会让你的球以一致的速度移动。当您第一次加载页面时，浏览器需要加载您包含的所有其他脚本，解析和评估它们，并且在某些情况下会触发一些垃圾收集（就像包含的 jQuery 一样）。如果您不需要 jQuery 或其他此类附加文件，则可以避免包含它们。

更重要的是，您不必在页面加载后立即开始全速渲染。就游戏而言，他们将在实际游戏渲染之前拥有自己的加载屏幕和标题屏幕，玩家无论如何都无法区分 30 fps 和 60 fps 之间的区别。

# vba - Word 2010 - 使用 VBA 保存为 PDF - 保留目录链接？

> ID：14432228
> 
> 赞同：2
> 
> 时间：2013-01-21T03:42:46.723
> 
> 标签：vba, pdf, ms-word

我的任务是为 Word 2010 编写一个宏，使用 Words **Save As PDF 输出为 PDF**。

我将宏保存为 PDF，它从选定的目录向下迭代，并将所有`.doc`文件导出为 PDF。

在目录未设置为“使用超链接而不是页码”的文档中，我丢失了 PDF 版本文件中的链接。

本质上，我需要执行[此处](http://blogs.adobe.com/acrolaw/2011/03/ensuring-that-word-tocs-create-hyperlinks-in-acrobat/)详述的前 4 个步骤。

有谁知道如何使用 VBA 设置此选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T04:43:42.220

```
Sub AddTOCLinks()
Dim TOC As TableOfContents
With ActiveDocument
  For Each TOC In .TablesOfContents
    With TOC.Range.Fields(1)
      If InStr(.Code.Text, "\h") = 0 Then
        .Code.Text = Trim(.Code.Text) & " \h"
        .Update
      End If
    End With
    TOC.Update
  Next
End With
End Sub 
```

在[这里找到](http://social.msdn.microsoft.com/Forums/en-US/worddev/thread/2b676845-93fb-4823-9fca-a4a3ad85514f)

# c# - 透明度和鼠标事件 WinForms

> ID：14432230
> 
> 赞同：0
> 
> 时间：2013-01-21T03:42:52.387
> 
> 标签：c#, winforms, events, transparency

我目前有一个具有完全透明背景的表单。目前，当用户将鼠标悬停在表单上的控件上时，我必须绘制出现在论坛顶部的框。

![截屏！](../Images/260b478900ffc3b53298d255fac845f9.png)

将鼠标悬停在 PictureBox 上会`MouseEnter`正确触发事件并将按钮`Visible`状态设置为 true，`MouseLeave`事件将其设置为 false。按钮本身具有相同的`MouseEnter`和`MouseLeave`事件，但是当 Winforms 将鼠标事件传递给表单上透明的任何空间下的表单（我在按钮中使用的图像在它们周围也是透明的）时，每当我点击按钮时，它们就会消失因为表单认为鼠标已经“离开”了按钮或表单。有谁知道阻止事件传递的任何方法？

你问一些代码？你得到一些代码:)

```
// Form Constructor!
// map = picturebox, this = form, move = first button, attach = second button
public Detached(PictureBox map)
{
    InitializeComponent();
    doEvents(map, this, this.attach, this.move);
}

// doEvents method! I use this to add the event to all controls
// on the form!
void doEvents(params Control[] itm)
{
    Control[] ctls = this.Controls.Cast<Control>().Union(itm).ToArray();
    foreach (Control ctl in ctls)
    {
        ctl.MouseEnter += (s, o) =>
        {
            this.attach.Visible = true;
            this.move.Visible = true;
        };
        ctl.MouseLeave += (s, o) =>
        {
            this.attach.Visible = false;
            this.move.Visible = false;
        };
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T06:04:38.183

感谢 Hans Passant 为我指明了正确的方向。我最终创建了一个线程，每 50 毫秒检查一次鼠标是否在边界内。

```
public Detached(PictureBox map)
{
    Thread HoverCheck = new Thread(() =>
    {
        while (true)
        {
            if (this.Bounds.Contains(Cursor.Position))
            {
                ToggleButtons(true);
            }
            else
            {
                ToggleButtons(false);
            }
            Thread.Sleep(50);
        }
    });
    HoverCheck.Start();
}

void ToggleButtons(bool enable)
{
    if (InvokeRequired)
    {
        Invoke(new MethodInvoker(() => ToggleButtons(enable)));
        return;
    }

    this.attach.Visible = enable;
    this.move.Visible = enable;
    this.pictureBox1.Visible = enable;
} 
```

谢谢 ：）

# git - 如何将我的远程 git 存储库移动到另一个远程 git 存储库？

> ID：14432234
> 
> 赞同：15
> 
> 时间：2013-01-21T03:43:05.380
> 
> 标签：git, git-remote

我想将我的远程 git 存储库及其所有分支移动到新的远程存储库。

旧遥控器 =`git@github.com:thunderrabbit/thunderrabbit.github.com.git`

新遥控器 =`git@newhub.example.net:tr/tr.newrepo.git`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-21T03:43:05.380

在本地机器上的终端中：

```
cd ~
git clone <old-remote> unique_local_name
cd unique_local_name

for remote in `git branch -r | grep -v master `; \
do git checkout --track $remote ; done

git remote add neworigin <new-remote>
git push --all neworigin 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-27T19:20:39.360

因此，这些其他答案都没有很好地解释的是，如果您想使用 Git 的`push` 机制将所有远程存储库的分支移动到新的远程，**那么您需要每个远程分支的本地分支版本。**

您可以使用`git branch`创建本地分支。这将在您的目录下创建一个分支引用`.git/refs/heads/`，所有本地分支引用都存储在其中。

然后您可以使用`git push`and`--all`选项`--tags`标志：

```
git push <new-remote> --all  # Push all branches under .git/refs/heads
git push <new-remote> --tags # Push all tags under .git/refs/tags 
```

注意`--all`和`--tags`不能一起使用，所以你必须推两次。

### 文档

这是相关[`git push`文档](https://www.kernel.org/pub/software/scm/git/docs/git-push.html)：

> ```
> --all 
> ```
> 
> 不是命名要推送的每个 ref，而是指定推送下的所有 ref `refs/heads/`。
> 
> ```
> --tags 
> ```
> 
> `refs/tags`除了在命令行上明确列出的 refspecs 之外，所有的 refs 都会被推送。

## `--mirror`

另请注意，它`--mirror`可用于同时推送分支和标记引用，但此标志的问题在于它将***所有引用***推送到中 `.git/refs/`，而不仅仅是`.git/refs/heads`and `.git/refs/tags`，这可能不是您想要推送到远程的内容。

例如，`--mirror`可以从位于 下的旧遥控器`.git/refs/remotes/<remote>/`以及其他引用（例如）推送远程跟踪分支`.git/refs/original/`，这是[`git filter-branch`](https://www.kernel.org/pub/software/scm/git/docs/git-filter-branch.html).

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-21T04:08:51.893

整个想法是为每个旧的远程分支做：

*   查看
*   拉
*   推送到新的遥控器（不要忘记标签！）

像那样：

```
#!/bin/bash

new_remote_link=git@newhub.example.net:tr/tr.newrepo.git
new_remote=new_remote
old_remote_link=git@github.com:thunderrabbit/thunderrabbit.github.com.git
old_remote=origin

git remote add ${old_remote} ${old_remote_link}

git pull ${old_remote}

BRANCHES=`git ls-remote --heads ${old_remote}  | sed 's?.*refs/heads/??'`

git remote add ${new_remote} ${new_remote_link}

for branch in ${BRANCHES}; do
    git checkout ${branch}
    git pull ${old_remote} ${branch}
    git push ${new_remote} ${branch} --tags
    printf "\nlatest %s commit\n" ${branch}
    git log --pretty=format:"(%cr) %h: %s%n%n" -n1
done 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T09:23:48.767

您可以简单地更改`origin`存储库的 URL：

```
git clone <old-remote-url> unique_local_name
cd unique_local_name
git pull --all

git remote set-url origin <new-remote-url>
git push --all 
```

# php - 如何获取购物车插入 ID 和更新的购物车 ID magento

> ID：14432236
> 
> 赞同：0
> 
> 时间：2013-01-21T03:43:08.250
> 
> 标签：php, magento-1.7

我正在做一个magento定制站点，是magento anyboby的新手，请帮助获取addtocart插入ID和购物车更新ID。我应该在控制器中应用什么编码

```
app\code\core\Mage\Checkout\controllers\CartController.php 
```

或者我应该在哪里找到购物车插入操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T04:09:22.800

要获取购物车 ID，在将产品添加到购物车后，运行以下语句：

```
<?php
$cart = Mage::getSingleton('checkout/session');
$cart_id = $cart->getQuote()->getId();
echo $cart_id;
?> 
```

我没有测试它。但希望它有效。

# php - HTML 到 PDF 的转换：tcpdf 在大数据上抛出错误

> ID：14432238
> 
> 赞同：0
> 
> 时间：2013-01-21T03:43:11.700
> 
> 标签：php, pdf, tcpdf

我有一个网页，我想将其转换为 PDF 格式。这个页面是 PHP 的，所以它的输出是动态的。我使用了 tcpdf，但它会引发错误。它包含大量数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T03:47:06.350

我推荐[`wkhtmlpdf`](http://code.google.com/p/wkhtmltopdf/)，它使用 WebKit 来呈现 PDF。这是一个 PHP 包装器（不能专门担保这个）： http: [//mikehaertl.github.com/phpwkhtmltopdf/](http://mikehaertl.github.com/phpwkhtmltopdf/)。我过去常常`exec`生成它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T18:13:55.730

如果您在 html 中使用具有大量数据的固定宽度，那么它将不会生成 pdf。我建议你尝试一些事情。这不是一个永久的解决方案，但希望它对你有用。

```
1) Use LANDSCAPE orientation if large amount of data in your page .
2) Change default page format A4 to A3 
```

您可以使用以下行更改这两种排列。

```
$pdf->AddPage('L', 'A3'); 
```

而不是**$pdf->AddPage();**

和

```
3) increase set_time_limit value, default it is 30\. 

  for e.g set_time_limit(60); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-22T00:03:28.833

[Prince](http://www.princexml.com)将 HTML 转换为 PDF 并且还有一个[PHP 包装器](http://www.princexml.com/download/wrappers)。

# iphone - 我想使用 UIImageView 从事件中显示图像

> ID：14432240
> 
> 赞同：0
> 
> 时间：2013-01-21T03:43:39.280
> 
> 标签：iphone, ios, objective-c, uiimageview, uiimage

所以我现在对 Objective-C 和 Xcode 感到非常沮丧，哈哈……如果代码输入和 if 语句，我试图弹出一个图像，它基本上检查用户是否猜到了正确的字母我的游戏中的单词（想想吊人）。一旦它进入 if 语句，我想弹出一个图像，上面写着“恭喜！你得了 50 分！” 然后移动到游戏中的下一个单词...

所以代码看起来像这样：

```
if (isWordCompleted)
{
    //do some code that has the pop up image
    //other stuff as well
} 
```

我已经查看了整个stackoverflow，但似乎无法得到我正在寻找的答案：S

编辑：

```
if(isWordComplete)
    {

        //create an image reference to have pop up congratulating the user for guessing the right answer
        UIImage *congratsImage = [UIImage imageNamed:@"Congrats.png"];
        UIImageView *congratsImageView = [[UIImageView alloc] initWithImage:congratsImage];

        [congratsImageView setFrame:CGRectMake(0, 0, 250, 158)];
        [myDisplay setHidden:YES];
        [myDisplay2 setHidden:YES];
        [myDisplay3 setHidden:YES];
        [myDisplay4 setHidden:YES];
        [myDisplay5 setHidden:YES];
        [myDisplay6 setHidden:YES];
        [myDisplay7 setHidden:YES];
        [self checkNumberofWordsUserCompleteInLevel:isWordComplete];
        [self moveToNextWord];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T03:49:04.620

当你的 if 语句执行然后在 if 语句中打开另一个 UIView & on View 放一个

ImageView & 还将您的图像放入 ImageView。或者您也可以尝试在 iPhone 中使用 PopupView。

将您的图像放在 Popupview 中。下面工具中的 UIView 是图像： ![在此处输入图像描述](../Images/955d0e4e5b9193ed6f61713e808e5db1.png)

另请参阅图像视图添加图像图片： ![在此处输入图像描述](../Images/93bed5dfe64fd01bbc6f033abfd77b90.png)

# jasper-reports - 如何水平重复分组归档（碧玉报告）

> ID：14432243
> 
> 赞同：0
> 
> 时间：2013-01-21T03:44:47.510
> 
> 标签：jasper-reports

数据库表 - 运行记录

```
Name      Student_ID   Meter(m)   Time(s)
ABC       1016         100        13   

ABC       1016         200        26

ACB       1017         100        15

BAA       1018         100        18

BAA       1018         200        22

BBB       1019         100        14

CDE       1020         200        22

CDE       1020         100        14 
```

我应该怎么做才能在 Jasper 报告中得到以下结果？

```
 Student Run Record

                  ABC           ACB           BAA        BBB         CDE
100M              13            15            18         14          14
200M              26                          22                     22 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T10:58:14.320

您可以通过使用**`crosstab`**元素来实现这一点。

我使用了您提供的查询，我的示例中有这些字段：

*   名称：字符串
*   米：长
*   时间：长

从 Palette拖放**`crosstab`**到报表设计器中报表的摘要带中，将弹出一个向导。

按照向导：

*   选择包含查询的数据集。
*   配置为行**计量器**，分组设置为*唯一*，作为您选择**名称**的列，分组也设置为 *唯一*。
*   作为度量，您使用**Time**，并将聚合器更改为*Sum*（除了*count*，因为每个学生只有一个值，并且距离*总和*将与值相同）。

添加交叉表后，单击 Report Inspector 并展开交叉表，单击 row groups > Meter 并在 Properties 面板中选择 as **`Total Position:None`**。与列组 > 名称相同。

然后输出将如下图所示。

![报告草案](../Images/6515d744f527e91caf9d67ff423f6cb2.png)

为了使输出更接近您在查询中起草的内容：

*   在 Report Inspector 中选择 Row Groups > Meter，在 Properties 面板中将 Bucket Value Class 更改为`java.lang.String`。然后在设计器中编辑保存的字段`$V{Meter}`并将其更改为 `$V{Meter} + "m"`输出*100m*而不是*100*。
*   为了隐藏*0*，请在设计器中单击包含度量的字段并将其从 更改`$V{TimeMeasure}`为`$V{TimeMeasure} == 0 ? null : $V{TimeMeasure}`。*在属性面板中，选中属性Blank when null*的复选框。

![完成报告](../Images/9ee99ff71cb2d881f632757a62cb0edb.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-24T06:29:48.960

更改报表行组的桶表达式。通过连接几个字段来制作桶表达式。例如：

```
<bucket class="java.lang.String">
    <bucketExpression><![CDATA[$F{field1}+""+$F{field2}]]></bucketExpression>
</bucket> 
```

# php - 如何使用正则表达式来获得我想要的东西，而两者之间什么都没有

> ID：14432248
> 
> 赞同：-1
> 
> 时间：2013-01-21T03:46:23.860
> 
> 标签：php, regex, html-parsing

我已经用 Regex 搞砸了几个小时，但我陷入了僵局。可以说我有这个：

```
<a href="/link here/faqs"></a><a href="/link/here/contacts"></a><a href="/link here/faqs"> 
```

我想使用 PHP preg_replace 来匹配和删除常见问题链接，所以剩下的就是中间的联系人链接。我该怎么做？我发现了如何使它匹配 `<a href` 并且也匹配`/faqs"></a>` ，但事实上它`/faqs"></a>`也在第三个链接中，然后它删除了第二个链接。

在第三个链接之后可能还有更多，所以我不能使用行尾或任何东西来阻止正则表达式匹配更多。

所以再一次，我如何让它匹配第一个并匹配最后一个，但保持中间位置？请记住，在最后一个常见问题解答之后可能还有其他链接，并且在它们之后可能有更多常见问题解答链接。但我想删除所有常见问题解答。

作为旁注，如果我想删除所有常见问题解答以及所有名为帮助的问题，它将如何工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T04:15:03.287

在这里使用 XML 解析器可能有点过头了：

```
$html = '<a href="/link here/faqs"></a><a href="/link/here/contacts"></a><a href="/link here/faqs">';
$dom = new DomDocument();
$dom->loadHtml($html);

$xpath = new DomXPath($dom);
$links = $xpath->evaluate('//a');

$newHtml = '';

// rebuild html, and leave out any links that contain "faq"
// in the href attribute
foreach($links as $link)
  if(strpos($link->getAttribute('href'), 'faq') === false)
    $newHtml .= $dom->saveXml($link);

print $newHtml; 
```

# directx-11 - Alt-tab 全屏

> ID：14432254
> 
> 赞同：3
> 
> 时间：2013-01-21T03:47:00.817
> 
> 标签：directx-11

我将 DX11 用于主要以全屏运行的小型应用程序。
问题是当我`alt`-`tab`应用程序进入窗口模式时，如果我`alt`-`tab`返回它不会返回全屏。

我看到其他应用程序和游戏在alt-tabbing后保持全屏状态，按下`alt`-时如何保持全屏模式？`tab`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:27:39.967

创建 SwapChain 时，您使用 IDXGIFactory 对象。同一个对象有一个名为**MakeWindowAssociation**的方法，使用以下标志调用该方法：**DXGI_MWA_NO_ALT_ENTER**。（更多信息： http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb174540](http://msdn.microsoft.com/en-us/library/windows/desktop/bb174540(v=vs.85).aspx) (v=vs.85).aspx ）

它将防止从全屏模式自动更改为窗口模式。

您还可以研究**IDXGISwapChain**的这种方法，以了解如何处理从完全到窗口的手动更改：**SetFullscreenState**（更多信息： http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb174540 (v=vs .85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb174540(v=vs.85).aspx) )

# javascript - IE8 PRE 标签问题

> ID：14432257
> 
> 赞同：5
> 
> 时间：2013-01-21T03:47:21.503
> 
> 标签：javascript, jquery, html, internet-explorer-8, angularjs

我提到了其他类似的讨论。这是该讨论的链接。

> [pre 中的代码在 IE8 上排成一行](https://stackoverflow.com/questions/7445502/code-inside-pre-goes-in-one-line-on-ie8)

外部 HTML 工作正常。但我的要求是内部 HTML。不使用外部 HTML 的原因是我使用的是 AngularJS，它对 HTML 本身有条件。所以我需要将内容添加到innerHTML。

这是HTML。

```
<p ng-show="preview=='text' && !file.showUploadPanel && file.fileContent!='null' && file.fileContent!='undefined'" ng-bind-html-unsafe="file.fileContent" class="pre fileContent"></p> 
```

这是支持它的JS。

```
var elem = $(".pre.fileContent")[1];
if (elem.tagName == "P" && "innerHTML" in elem){
    elem.innerHTML = "<pre>" + elem.innerHTML + "</pre>";
} 
```

我也尝试用`"<pre>" + elem.innerHTML + "</pre>"`范围变量替换导致`"<pre>" + $scope.file.fileContent + "</pre>";`

这是我在 IE8 上遇到的错误。

```
Error: Unknown runtime errorundefined 
```

如果我`<pre>`从`elem.innerHTML`错误中删除，则不会发生。此外，对于 outerHTML，不会出现此错误。

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T04:54:29.033

看起来您只是想将内容包装在一个`pre`元素中？如果是这样，你可以这样做：

```
var pre = document.createElement('pre');
while(elem.firstChild) pre.appendChild(elem.firstChild);
elem.appendChild(pre); 
```

这具有保留任何属性值和事件处理程序的额外好处。

或者，您可以将 CSS 应用于相关元素：

```
white-space:pre;
font-family:monospace; 
```

编辑：CSS 解决方案可能会更好——我认为在标签`<pre>`内有一个块级元素是无效的。`<p>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-12T03:33:42.653

其实我自己找到了答案。当我使用`AngularJS`时，我使用了错误的指令`ng-bind-html-unsafe`。我切换`ng-bind-html-unsafe`到`ng-bind`，然后我的问题就解决了！

感谢大家帮助我！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-10T05:51:42.157

抱歉，我对段落类选择器感到困惑，

```
<p ng-show="preview=='text' && !file.showUploadPanel && file.fileContent!='null' && file.fileContent!='undefined'" ng-bind-html-unsafe="file.fileContent" class="pre fileContent"></p> 
```

上面的`<p>`标签同时包含类“.pre”和“.filecontent”，您是否尝试使用选择器 $(".pre.fileContent")，它在类“.pre”的元素中查找类“.fileContent”的元素” 。

我只是想确定它是正确还是错误输入。:)

**解决方案：**

获取文本区域或源容器内的内容，用“\n”分割字符串，并使用循环将`<p>`标签添加到所有数组元素。

```
var textVal = jQuery("#wmd-input").val();
textVal = textVal.split("\n");
var temp = "";
for (var i=0; i < textVal.length; i++) { 
  temp += "<p>" + textVal[i] + "</p>";
}

/* Assing the temp html in your target div or container*/ 
```

# linux - 操作系统存储在磁盘上的什么位置，引导加载程序如何定位它？

> ID：14432260
> 
> 赞同：3
> 
> 时间：2013-01-21T03:48:09.503
> 
> 标签：linux, operating-system, bootloader

这可能是特定于操作系统的，我不确定（我正在使用 Linux）。当 BIOS 将引导加载程序带入内存并且 CPU 开始执行它时，它如何定位操作系统？它是否存储在特殊的磁盘分区/知名扇区等中？如果它存储在文件系统上，那么引导加载程序需要与存储在操作系统中的文件系统代码进行交互。这个先有鸡的问题是如何解决的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T11:02:57.927

引导加载程序分为几个部分。首先，BIOS 获取一些与一种非常特殊的格式相匹配的代码，称为 MBR（*主引导记录*）。记住您的旧计算机：您必须告诉 BIOS 它将按什么顺序浏览某些设备以搜索该 MBR。一旦它找到一个 MBR（MBR 长 512 字节，以一个幻数 - 结尾`0x55aa`），它会在物理内存中的给定偏移处复制这段代码（`0x7c00`在 x86 上），并将指令指针设置为该地址。大多数时候，MBR 包含一个分区表，并且会从设备中加载一些额外的代码来帮助加载实际系统：这被称为*链加载*或多*阶段加载*。

让我们详细说明最后一点。请记住，系统在此时以*实模式运行*，因此您只能访问 1MB 的物理内存，但另一方面，您可以通过*BIOS 中断调用*以非常简单的方式访问您的硬盘。如今，操作系统要求的内存比 1MB 多得多，并且他们希望将处理器切换到*保护模式*，以便访问完整的地址空间（4GB，至少在 32 位系统上）。但是一旦系统处于*保护模式*，*BIOS 中断调用*就不再可用，并且与 HDD 的输入/输出必须通过复杂的设置通信，例如*DMA*，并且该设置通常不会发生在引导加载程序中。引导加载程序将从*实模式*来回切换到*保护模式*。它从 HDD 获取一个扇区到 1MB 地址空间，然后切换到保护模式以将该扇区复制到某个位置到 4GB 地址空间中，最后它切换回实模式以获取另一个扇区硬盘。一旦所有扇区都被提取并复制到物理内存中，引导加载程序就会跳转到操作系统。

总结一下：

1.  BIOS 在设备列表中查找位于每个设备第一个扇区的 MBR。如果第一个扇区的最后一个 halword 匹配一个幻数，则找到一个 MBR。BIOS 将 MBR 复制到物理内存，然后跳转到它。
2.  MBR 嵌入了一个分区表，因此它知道应该从哪个位置（基本上是 HDD 的哪个柱面扇区）将更多代码加载到物理内存。例如，此步骤可能是加载 GRUB。
3.  假设在 GRUB 中，`multiboot`规范用于定位操作系统。检查下面的链接以获取更多信息`multiboot`。

您可能想看看这些资源：

*   [http://en.wikipedia.org/wiki/Master_boot_record](http://en.wikipedia.org/wiki/Master_boot_record)
*   [http://en.wikipedia.org/wiki/BIOS_interrupt_call](http://en.wikipedia.org/wiki/BIOS_interrupt_call)
*   [http://wiki.osdev.org/Boot_Sequence](http://wiki.osdev.org/Boot_Sequence)
*   [http://duartes.org/gustavo/blog/post/how-computers-boot-up](http://duartes.org/gustavo/blog/post/how-computers-boot-up)
*   [http://www.gnu.org/software/grub/manual/multiboot/multiboot.html](http://www.gnu.org/software/grub/manual/multiboot/multiboot.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T06:06:39.143

BootPrompt [HOWTO](http://www.tldp.org/HOWTO/BootPrompt-HOWTO.html)与您的问题相关。[BIOS](http://en.wikipedia.org/wiki/Basic_Input_Output_System)包含加载引导磁盘第一个扇区的代码（在 FlashROM 中）；第一个扇区包含一个引导加载程序，如 GRUB（或 LILO）。GRUB 将内核加载到 RAM 中（使用一些 initrd）。

BIOS 设置保存在一个小的（电池保存）特殊 RAM 中。

今天的[GRUB](http://en.wikipedia.org/wiki/GNU_GRUB)是一个相当复杂的程序。它了解磁盘分区和常见文件系统的结构。它能够读取其配置文件，并从分区读取内核（在该文件中配置）。它还能够加载[initrd](http://en.wikipedia.org/wiki/Initrd)（包含基本内核模块）。

另请参阅[OSDEV](http://osdev.org/)维基

# shell - 如何使用 awk 命令剪切字段？

> ID：14432261
> 
> 赞同：2
> 
> 时间：2013-01-21T03:48:17.570
> 
> 标签：shell

有一个文件，你可以`ps aux`在linux中通过命令获取。

```
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root         1  0.0  0.0   2280   732 ?        Ss   08:20   0:00 init [2]  
root       327  0.0  0.1   2916  1456 ?        Ss   08:20   0:00 udevd --daemon
root      1681  0.0  0.0   2376   800 ?        Ss   08:20   0:00 /sbin/rpcbind -w
root      2071  0.0  0.1  27920  1708 ?        Sl   08:20   0:00 /usr/sbin/rsyslogd -c5 
```

我想获取最后一个字段的内容，例如：

```
COMMAND
init [2]
udevd --daemon
/sbin/rpcbind -w
/usr/sbin/rsyslogd -c5 
```

当我使用 $ awk '{print $11}' 测试时，我得到：

```
COMMAND
init
udevd
/sbin/rpcbind
/usr/sbin/rsyslogd 
```

当我使用，$ awk '{print $12}' 测试时，我得到：

```
[2]
--daemon
-w
-c5 
```

我能怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T03:51:19.293

```
awk '{for(i=1;i<11;i++)$i="";print }' 
```

或者你可以这样做：

```
awk '{print $11,$12}' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T06:38:45.533

您可以遍历最后一个字段的单词并打印它们：

```
ps aux | awk '{ for( i=11 ; i <=NF ; i++ ) { printf( "%s ", $i ) } ; print "" }' 
```

如果你想在之后处理命令，你可以把它放在一个变量中：

```
ps aux | awk '{ CMD = "" ; for( i=11 ; i <=NF ; i++ ) { CMD = CMD " " $i } ; sub( /^ /, "", CMD ) ; print CMD }' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T04:04:22.403

如果您不需要使用 awk，则以下方法也有效：

```
ps aux | tr -s ' ' ' ' | cut -d' ' -f11- 
```

稍微破译一下。由于`ps`用空格分隔它的列，

```
tr -s ' ' ' ' 
```

用单个空格（在第二个字符串中指定）替换重复的空格字符串（由第一个字符串 [第一组 ' '] 指定）。现在，由于字段现在是单个空格分隔的，我们可以使用

```
cut -d' ' -f11- 
```

这表示字段由空格分隔（'-d' 之后的字符），并选择字段 11 到行尾（表示为 '-f11-'）。

乍一看，这似乎有点复杂，但一旦你掌握了它，它确实简化了对分隔值字符串的解析。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-10T23:52:30.700

对于上述输出，这应该有效：

```
ps aux | cut -c66- 
```

注意：注意最后一个“-”。如果你错过了，你将只得到第 66 个字符！！！

但是，为了每次都能正常工作，**COMMAND**列应该从第 66 个字符位置开始。如果不同，请记下**COMMAND**列的编号并像这样更改剪切命令

```
cut -c<column#>- 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-31T18:18:14.797

现有答案在 awk 版本 20070501 上不起作用，它打印了前导空格。这行得通。

```
awk '{for(i=1;i<11;i++)$i="";$0=$0;$1=$1;print}' 
```

# java - 使用套接字的 Java 屏幕抓取？

> ID：14432262
> 
> 赞同：0
> 
> 时间：2013-01-21T03:48:32.930
> 
> 标签：java, sockets, networking, screen, scrape

我正在尝试从该网站[http://movies.about.com/od/actorsalphalist/Actors_Detailed_Movie_News_Interviews_Websites.htm收集 HTML](http://movies.about.com/od/actorsalphalist/Actors_Detailed_Movie_News_Interviews_Websites.htm)

我打开一个套接字并尝试读取和打印 HTML 页面的每一行。当我运行它时，我只会得到“EOF 为假”，然后是“1”。

我完全不确定出了什么问题，因为我知道这应该在另一个示例中起作用...非常感谢您的帮助！

```
import java.net.*;
import java.io.*;
import java.util.*;

public class Twitter {

    static final int DEFAULT_PORT = 80;

    protected DataInputStream reply = null;
    protected PrintStream send = null;
    protected Socket sock = null;

    // ***********************************************************
    // *** The constructors create the socket and set up the input
    // *** and output channels on that socket.

    public Twitter() throws UnknownHostException, IOException {
        this(DEFAULT_PORT);
    }

    public Twitter(int port) throws UnknownHostException, IOException {
        sock = new Socket("movies.about.com", port);
        System.out.println(sock);
        reply = new DataInputStream(sock.getInputStream());
        System.out.println();
        send = new PrintStream(sock.getOutputStream());
    }

    // ***********************************************************
    // *** forecast uses the socket that has already been created
    // *** to carry on a conversation with the Web server that it
    // *** has been contacted through the socket.

    public void forecast() {
        int i;
        String HTMLline;
        boolean eof, gotone;

        // *** This issues the same query that a Web browser would issue
        // *** to the Web server.

        try {
            send.println("GET /od/actorsalphalist/Actors_Detailed_Movie_News_Interviews_Websites.htm HTTP/1.1");
        } catch (Exception e) {
            System.out.println("about.com server is down.");
        }

        // *** This section parses the response from the Web server.
        // *** NOTE THAT "real" EOF does not occur until the Web server
        // *** has closed the connection.

        eof = false;
        gotone = false;
        while (!eof) {
            System.out.println("EOF is false");
            try {
                System.out.println("1");
                HTMLline = reply.readLine();
                System.out.println("2");
                System.out.println(HTMLline);
                System.out.println("Here?");
                if (HTMLline != null) {
                    System.out.println("its not null");
                }
                if (HTMLline == null) {
                    System.out.println("WTFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF");
                } else {
                    eof = true;
                    System.out.println("is it?");
                }
            } catch (Exception e) {
                System.out.println("this exception happend");
                e.printStackTrace();
                eof = true;
            }
        }
    }

    // ***********************************************************
    // *** We need to close the socket when this class is destroyed.

    protected void finalize() throws Throwable {
        sock.close();
    }

    // ***********************************************************
    // *** The main program creates a new Twitter class and
    // *** sends that class the command line args (via findNumber).

    public static void main(String[] args) {
        Twitter aboutCom;
        DataInputStream cin = new DataInputStream(System.in);

        try {
            aboutCom = new Twitter();
            aboutCom.forecast();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:56:35.563

您尚未发送有效的 HTTP 请求，因此服务器仍在等待您完成它。GET 行必须以 \r\n 结尾，然后您需要另一行作为空白行来分隔请求标头。

但是，您应该为此使用 URL、openConnection()、getInputStream() 等，而不是冗余地尝试自己重新实现 HTTP。正如你正在做的那样，你所得到的只是一个错误的机会。

# iphone - 为什么必须填充 UITextField 才能使 UIButton 作为子视图消失

> ID：14432267
> 
> 赞同：2
> 
> 时间：2013-01-21T03:48:54.137
> 
> 标签：iphone, ios, objective-c, xcode

当我专注于 UITextField 控件时，我将按钮添加为子视图。当我从 UITextField 中移除焦点时，我移除了添加按钮。这在 UITextField 中有一些文本时有效。但是当没有文本时，按钮不会消失。

```
Q. How can I remove the UIButton from UITextField when the UITextField is empty. 
I also want to be able to show *default* placeholder-text for UITextField when add button is removed. 
```

这是我添加和删除取消按钮作为子视图的代码

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    UIButton *button = [UIButton buttonWithType:UIButtonTypeContactAdd];
    if(textField == txtToEmailAddress)
    {
        txtToEmailAddress.rightView = button;
        txtToEmailAddress.rightViewMode = UITextFieldViewModeAlways;
        [button addTarget:self action:@selector(AddEmailAddress:) forControlEvents:UIControlEventTouchUpInside];

        [self.txtToEmailAddress addSubview:button];
    }
    if(textField == txtCallPhoneNum)
    {
        txtCallPhoneNum.rightView = button;
        txtCallPhoneNum.rightViewMode = UITextFieldViewModeAlways;
        [button addTarget:self action:@selector(AddPhoneNumber:) forControlEvents:UIControlEventTouchUpInside];
        [self.txtCallPhoneNum addSubview:button];
    }
    if(textField == txtTextNumbers)
    {
        txtTextNumbers.rightView = button;
        txtTextNumbers.rightViewMode = UITextFieldViewModeAlways;
        [button addTarget:self action:@selector(AddTextNumber:) forControlEvents:UIControlEventTouchUpInside];
        [self.txtTextNumbers addSubview:button];
    }

    return YES;
}

- (BOOL)textFieldDidEndEditing:(UITextField *)textField
{
    UIButton *button = nil;

    if(textField == txtToEmailAddress)
    {
        button = (UIButton *)[txtToEmailAddress.subviews objectAtIndex:1];
    }
    if(textField == txtCallPhoneNum)
    {
        button = (UIButton *)[txtCallPhoneNum.subviews objectAtIndex:1];
    }
    if(textField == txtTextNumbers)
    {
        button = (UIButton *)[txtTextNumbers.subviews objectAtIndex:1];
    }

    if (button != nil)
    {
            button.hidden = YES;
        [button removeFromSuperview];
    }

    return YES;
} 
```

这是需要消失的空 UITextField 中的添加按钮。

![在此处输入图像描述](../Images/ab0acd3564d4e09f0aaf8db044a59c29.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T04:02:25.227

在此块中执行按钮删除操作..

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

    NSString *newString = [textField.text stringByReplacingCharactersInRange:range withString:string];

    if(newString.length==0) {
         button.hidden=YES;
         textField.text=@"Default text";
    }

    return YES;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T06:45:04.250

您的代码工作正常。但问题在于按钮和`textFieldDidEndEditing:`方法的索引

**首先**

如果文本字段中有占位符文本和文本，则按钮的索引为 2

**接下来**该方法应该像这样实现

```
- (void)textFieldDidEndEditing:(UITextField *)textField 
```

最后为您的代码添加一些优化，工作代码如下所示

```
-(void)textFieldDidBeginEditing:(UITextField *)textField{

     UIButton *button = [UIButton buttonWithType:UIButtonTypeContactAdd];
     textField.rightView = button;
     textField.rightViewMode = UITextFieldViewModeAlways;
     [button addTarget:self action:@selector(AddTextNumber:) forControlEvents:UIControlEventTouchUpInside];
     [textField addSubview:button];
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
    UIButton *button = nil;
    NSLog(@"textField>>%@",[textField.subviews description]);
    if([textField.text isEqualToString:@""])
        button = (UIButton *)[textField.subviews objectAtIndex:2];
    else
        button = (UIButton *)[textField.subviews objectAtIndex:1];

    if (button != nil)
    {
        button.hidden = YES;
        [button removeFromSuperview];
    }
} 
```

这应该与 dotnet 中的文本框的 Focus() 方法完全相同：)**无需填充 textField 以隐藏按钮**。希望对您有所帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-11T17:27:57.100

这是我的解决方案：

（在 UITextField 的子类中）

```
- (UITextFieldViewMode)rightViewMode
{
    return [self.text isEqualToString:@""] ? UITextFieldViewModeNever : UITextFieldViewModeAlways;
} 
```

# c# - 字典值阅读和分配性能

> ID：14432275
> 
> 赞同：4
> 
> 时间：2013-01-21T03:49:31.313
> 
> 标签：c#, performance, dictionary

我在这里能找到的最接近的问题是[C# Dictionary Loop Enhancment](https://stackoverflow.com/questions/2408192/c-sharp-dictionary-loop-enhancment)，但这对我没有帮助。

以下代码是我在我的项目中拥有的。数据结构非常复杂，所以为了解释，我在这里创建了它们的简单形式：

```
public class BusinessObject
{
    public Dictionary <int, InnerObject> objList = new Dictionary <int, InnerObject>();
    public string Name {set;get;}

    public Dictionary <int, InnerObject> ObjectList // <index, InnerObject>
    {
        get
        {
            return ojbList;
        }
    }
}

...
...
...
// <Name of the BusinessObject, BusinessObject>
public Dictionary <string, BusinessObject> BusinessObjectList; 
// names of all the business objects has an index in this dictionary
public Dictionary <int, string> BusinessObjectListIndexes 

...
...
...

//On receiving the values over TCP, following loop executes. This loop will iterate over about a million values depending on the type of that value:

int currentIndex = 0;
string name = "";
InnerObject tempInnerObject;

for(int i = 0; i < valueCountReceivedOverTCP; i++) // valueCountReceivedOverTCP can be up to 1 million
{
/* 1\. */ name = BusinessObjectListIndexes[i];                                     
/* 2\. */ tempInnerObject = BusinessObjectList[name].ObjectList[i];                
/* 3\. */ tempInnerObject.ReceivedTime = valuesReceivedOverTCP->Time;               

    switch(valuesReceivedOverTCP->Type)
    {
        case TCPType.INT:
            bytearray[0] = valuesReceivedOverTCP->Values[++currentIndex];
                        bytearray[1] = valuesReceivedOverTCP->Values[++currentIndex];
                        bytearray[2] = valuesReceivedOverTCP->Values[++currentIndex];
                        bytearray[3] = valuesReceivedOverTCP->Values[++currentIndex];

                        tempint = BitConverter.ToInt32(bytearray, 0);
 /* 4\. */           tempInnerObject.Value = tempint;                      
        break;

        case TCPType.DOUBLE:                                                
                        bytearray[0] = valuesReceivedOverTCP->Values[currentIndex+1];
                        bytearray[1] = valuesReceivedOverTCP->Values[currentIndex+2];

                        bytearray[2] = valuesReceivedOverTCP->Values[currentIndex+3];
                        bytearray[3] = valuesReceivedOverTCP->Values[currentIndex+4];

                        bytearray[4] = valuesReceivedOverTCP->Values[currentIndex+5];
                        bytearray[5] = valuesReceivedOverTCP->Values[currentIndex+6];

                        bytearray[6] = valuesReceivedOverTCP->Values[currentIndex+7];
                        bytearray[7] = valuesReceivedOverTCP->Values[currentIndex+8];

                        currentIndex += 8;                        
                        tempdouble = BitConverter.ToDouble(bytearray, 0);
/* 5\. */                tempInnerObject.Value = tempdouble; 

        break;
    }

} 
```

从 1 到 5 标记的行是有问题的行。我发现上述行使用 ANTS Performance Profiler 需要时间。它们都需要相当长的时间。2 号线是主要的浪费时间。对于大约 700,000 个值，for 循环大约需要 250 毫秒。即使它以毫秒为单位，我也想减少它，因为这对于软件来说是不可接受的。我也尝试过将此 for 循环拆分为 4 个并行循环，`System.Threading.Tasks.Parallel.Invoke()`但没有成功。

我的问题是——你看到这个逻辑或代码有什么明显的错误吗？有什么办法可以让这段代码运行得更快。我知道如果我达到了 .NET Dictionary 的性能限制，那么我必须以不同的方式实现整个事情。即使这意味着更改我的设计/实现以使此代码运行得更快，我也愿意提出任何建议。

**编辑：** 作为第一个 TCP 消息，我得到了这些值的顺序和总数。我将订单保存为键，并将业务对象名称保存为`BusinessObjectListIndexes`. 从第一条消息开始，我没有得到 BusinessObject 名称。仅以与第一条消息指定的顺序相同的顺序接收值。然后，我使用在每条消息中收到的值更新 BusinessObjectList。这是我需要改进性能的地方。每 250 毫秒收到一条 TCP 消息，提供更新的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:10:37.007

您似乎只使用`BusinessObjectListIndexes`和`ObjectList`属性中的键作为索引。该类`Dictionary`虽然不知道这一点，但仍然必须搜索您的键/索引。

如果您将它们更改为`Array`，如果您事先知道尺寸，甚至是`List<int>`，如果您不知道尺寸或只是觉得它更易于使用，我怀疑您会获得更好的性能。根据（平均？）大小，您可能会发现另一种更适合的类型，但关键是字典在这里似乎不是正确的选择。

# iphone - 从弧视图控制器中呈现非弧视图控制器

> ID：14432276
> 
> 赞同：1
> 
> 时间：2013-01-21T03:49:35.107
> 
> 标签：iphone, ios, objective-c, automatic-ref-counting

-- 集成到主应用程序后更新的名称和添加的回溯 --

我有一个简单的 iOS 应用程序，它由两个控制器组成：

1.  BXDemoViewController**不使用 ARC**。
2.  **利用 ARC**的TestViewController 。

我正在尝试使用以下代码从 TestViewController 中呈现 BXDemoViewController，该代码在触摸 UIButton 时被调用：

```
-(IBAction) invokeScanner: (id)sender {
    BXDemoViewController * scannerController = [[BXDemoViewController alloc] init];
    [self presentViewController:scannerController animates:YES completion:nil];
} 
```

控制器被正确调用并且运行良好，但是当dismissViewControllerAnimated：被调用时，我得到一个EXEC_BAD_ACCESS。将呈现控制器 (TestViewController) 转换为非 ARC 代码可以解决这个问题，这表明它与我分配和使用 BXDemoViewController 的方式有关，但我想将 TestViewController 保留在 ARC 中。

我对 iOS 开发比较陌生，我有限的知识告诉我，我想以某种方式桥接 BXDemoViewController，因为它是在 ARC 控制源中调用的，但我不确定如何。

任何帮助将不胜感激。

**回溯输出：**

```
thread #1: tid = 0x2503, 0x32d5f5b0 libobjc.A.dylib`objc_msgSend + 16, stop reason = EXC_BAD_ACCESS (code=1, address=0x8002b192)
frame #0: 0x32d5f5b0 libobjc.A.dylib`objc_msgSend + 16
frame #1: 0x31df0b5e CoreFoundation`+[__NSArrayI __new:::] + 58
frame #2: 0x31df03b6 CoreFoundation`-[__NSPlaceholderArray initWithObjects:count:] + 270
frame #3: 0x39682fe6 UIKit`-[UIView dealloc] + 98
frame #4: 0x32d61488 libobjc.A.dylib`(anonymous namespace)::AutoreleasePoolPage::pop(void*) + 168
frame #5: 0x31de9440 CoreFoundation`_CFAutoreleasePoolPop + 16
frame #6: 0x31e79f40 CoreFoundation`__CFRunLoopRun + 1296
frame #7: 0x31decebc CoreFoundation`CFRunLoopRunSpecific + 356
frame #8: 0x31decd48 CoreFoundation`CFRunLoopRunInMode + 104
frame #9: 0x39bea2ea GraphicsServices`GSEventRunModal + 74
frame #10: 0x396a82f8 UIKit`UIApplicationMain + 1120
frame #11: 0x00002296 BXDemo`main + 90 at main.m:15

thread #3: tid = 0x2903, 0x31084648 libsystem_kernel.dylib`kevent64 + 24
frame #0: 0x31084648 libsystem_kernel.dylib`kevent64 + 24
frame #1: 0x344a54f0 libdispatch.dylib`_dispatch_mgr_invoke + 796
frame #2: 0x34497df8 libdispatch.dylib`_dispatch_mgr_thread$VARIANT$up + 36

thread #5: tid = 0x2b03, 0x31083eb4 libsystem_kernel.dylib`mach_msg_trap + 20
frame #0: 0x31083eb4 libsystem_kernel.dylib`mach_msg_trap + 20
frame #1: 0x3108404c libsystem_kernel.dylib`mach_msg + 40
frame #2: 0x31e7b044 CoreFoundation`__CFRunLoopServiceMachPort + 128
frame #3: 0x31e79da2 CoreFoundation`__CFRunLoopRun + 882
frame #4: 0x31decebc CoreFoundation`CFRunLoopRunSpecific + 356
frame #5: 0x31decd48 CoreFoundation`CFRunLoopRunInMode + 104
frame #6: 0x36148a44 WebCore`RunWebThread(void*) + 444
frame #7: 0x344df310 libsystem_c.dylib`_pthread_start + 308
frame #8: 0x344df1d8 libsystem_c.dylib`thread_start + 8

thread #6: tid = 0x2427, 0x3109408c libsystem_kernel.dylib`__psynch_cvwait + 24
frame #0: 0x3109408c libsystem_kernel.dylib`__psynch_cvwait + 24
frame #1: 0x344d7d2e libsystem_c.dylib`_pthread_cond_wait + 646
frame #2: 0x344e1f18 libsystem_c.dylib`pthread_cond_wait + 40
frame #3: 0x381f39a8 CoreMedia`FigSemaphoreWaitRelative + 260
frame #4: 0x3499035a MediaToolbox`fpa_AsyncMovieControlThread + 26
frame #5: 0x3821198a CoreMedia`figThreadMain + 194
frame #6: 0x344df310 libsystem_c.dylib`_pthread_start + 308
frame #7: 0x344df1d8 libsystem_c.dylib`thread_start + 8

thread #9: tid = 0x2e03, 0x000aa468 BXDemo`BitmapIsPixelOn(tagBITMAP const&, long, long) + 60
frame #0: 0x000aa468 BXDemo`BitmapIsPixelOn(tagBITMAP const&, long, long) + 60
frame #1: 0x000a9df2 BXDemo`PointMoveTillOffNoisy(tagPOINT&, Direction, tagBITMAP&, long, long) + 290
frame #2: 0x0007f966 BXDemo`ReaderDataMatrix::FindBarcodeBoundaries(tagBITMAP&, tagPOINT, tagPOINT, _BCDM*, signed char) + 3278
frame #3: 0x0007df6c BXDemo`ReaderDataMatrix::DMBarcodeRecognition(BarcodeReaderInfo&, tagBITMAP&) + 324
frame #4: 0x0007de08 BXDemo`ReaderDataMatrix::Recognize(BarcodeReaderInfo&, tagBITMAP&, BarcodeResultList&) + 236
frame #5: 0x000abba2 BXDemo`BarcodeReader::PerformRecognition(tagBITMAP&) + 686
frame #6: 0x000ab858 BXDemo`BarcodeReader::AnalyzeBarcode(ImageBase*, long, long*) + 112
frame #7: 0x000ab186 BXDemo`BXiOSAPI::recognize(void const*, int, int, long, long, bool, IOSResult&) + 398
frame #8: 0x000af860 BXDemo`-[BXRuntime RecognizeImage:width:height:stride:result:] + 244 at BXRuntime.mm:630
frame #9: 0x000ae2ee BXDemo`-[BXRuntime recognizeData:] + 234 at BXRuntime.mm:215
frame #10: 0x000b11cc BXDemo`-[BXThreadQueue dispatchThread:] + 296 at BXThreadQueue.mm:133
frame #11: 0x33a9067c Foundation`__NSThread__main__ + 972
frame #12: 0x344df310 libsystem_c.dylib`_pthread_start + 308
frame #13: 0x344df1d8 libsystem_c.dylib`thread_start + 8

thread #10: tid = 0x2f03, 0x344d489c libsystem_c.dylib`start_wqthread
frame #0: 0x344d489c libsystem_c.dylib`start_wqthread 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T06:30:08.383

使用以下方法将非弧视图控制器转换为弧控制器

Targets->Compiler Sources->双击添加的非ARC Viewcontroller的.m文件，并给出标志为-fno-objc-arc。现在它会正常工作。

# ios - 如何将 tableviewcell 对象连接到 tableviewcontroller？

> ID：14432279
> 
> 赞同：0
> 
> 时间：2013-01-21T03:50:08.577
> 
> 标签：ios, uitableview

使用带有 UISwitch 和 UIActivityIndi​​cator 的原型单元和自定义 UITableViewCell。翻转开关会导致 NSURL Post 请求并禁用开关。这工作正常。

现在，我想连接活动指示器，让它在网络请求工作期间旋转。

~~在子类 UITableViewCell .h/.m 中添加了这个~~

 ~~~~```
@property (nonatomic, weak) IBOutlet UIActivityIndicatorView *activity;

@synthesize activity; 
```~~  ~~然后在 UITableViewController 中，接收开关更改：

```
- (IBAction)changeSwitch:(id)sender
{
     UISwitch *mySwitch = (UISwitch *)sender;
    [sender setEnabled:NO];
    // turn on activity indicator  (**Edited next 2 lines**)
    UIActivityIndicatorView *av = (UIActivityIndicatorView*) [[self view] viewWithTag:2101];
    [av setHidden:YES];
    // create a datamanager to send the request
    ...
} 
```

我查看了标签、连接并考虑调用 TableViewCell 的方法来启动/停止指示器，但找不到答案。

开关的动作如何连接以启动活动指示器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:45:01.450

解决了连接到这些原型单元对象的问题，首先在情节提要属性检查器中为它们提供一个标记号，用于活动指示器和开关，然后使用以下方法从 UITableViewController（子类）中访问它们的属性：

```
UIActivityIndicatorView *av = (UIActivityIndicatorView*) [[self view] viewWithTag:2101];
[av setHidden:YES];

UISwitch *sw = (UISwitch*) [[self view] viewWithTag:210];
[sw setEnabled:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T04:20:37.753

为什么不使用这样的代码：

`self.activity.hidden = NO;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T07:00:16.850

当您提出请求时，启动指标。当 didReceiveResponse 函数被调用时停止你的指标。~~~~

# java - Java 正则表达式转义逗号

> ID：14432290
> 
> 赞同：1
> 
> 时间：2013-01-21T03:51:52.850
> 
> 标签：java, regex, split

我有一个 csv 文件，我想使用该`String split()`方法。我希望返回的数组的每个元素都是`split()`csv 中的逗号分隔值。但是，csv 文件中还有其他逗号。

幸运的是，这些其他逗号被转义为`'\,'`

我无法为该`split()`方法获取正确的正则表达式。我想用没有转义字符的逗号分隔。

我目前的代码是：

```
String[] columns = new String[CONST];
columns = someString.split("*^\\,*"); 
```

对我来说，这就是说：用逗号分隔，但逗号之前的字符不能是转义字符。逗号前后可以有任意数量的字符。

1.  如何获得正确的正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T04:41:11.400

首先，逗号在您使用的位置没有特殊含义，因此您可以省略转义

正则表达式中最大的问题是，`*`单独没有任何意义。`*`表示先前标记的任何出现。

所以正则表达式应该是

`.*,.*` （我认为转义逗号应该还是可以的 `.*\,.*`）

然后，开始使用，您正在使用`String.split()`. `String.split()`期望分隔符的正则表达式。因此，您应该只传递 a`,`作为正则表达式。拥有`.*,.*`“分隔符”会给您带来意想不到的结果（您可以尝试一下）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-14T19:58:49.483

由于我在搜索时点击了此页面，因此我将按所述回答问题并输入正确的模式（并为了完整性）：

```
columns = someString.split("[^\\\\],"); 
```

请注意，您需要 4 个转义字符，因为您需要 2 个转义字符才能在字符串中创建 1 个转义字符。换句话说， "\\" 创建字符串 \ 。所以“\\\\”创建了字符串\\，它在正则表达式中转义以在正则表达式中创建字符\。因此，您需要一个字符串中的 4 个转义字符才能在正则表达式中创建一个。方括号和克拉是做出非声明的一种方式（特别是对于单个字符）。

您还可以用引号将您不想拆分的 CSV 条目括起来。然后使用以下解决方案：[Java：拆分逗号分隔的字符串，但忽略引号中的逗号](https://stackoverflow.com/questions/1757065/java-splitting-a-comma-separated-string-but-ignoring-commas-in-quotes)。

由于我编码的环境，我个人的偏好是使用拆分而不是 3rd 方解析器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-29T15:17:47.667

正确的方法是使用解析器（处理`\\,` `\,` `,`），但使用简单的正则表达式可以工作；

```
jshell> "a,b".split("(?!\\\\),")
$2 ==> String[2] { "a", "b" } 
```

如何测试不起作用的东西；

```
jshell> "a,b".split("[^\\\\],")
$1 ==> String[2] { "", "b" } 
```

和

```
jshell> "a,b".split("*^\\,*")
|  java.util.regex.PatternSyntaxException thrown: Dangling meta character '*' near index 0
*^\,*
^
|        at Pattern.error (Pattern.java:1997)
|        at Pattern.sequence (Pattern.java:2172)
|        at Pattern.expr (Pattern.java:2038)
|        at Pattern.compile (Pattern.java:1760)
|        at Pattern.<init> (Pattern.java:1409)
|        at Pattern.compile (Pattern.java:1065)
|        at String.split (String.java:2307)
|        at String.split (String.java:2354)
|        at (#6:1) 
```

# couchdb - 在 couchDB 中列出没有评论的博客文章

> ID：14432296
> 
> 赞同：1
> 
> 时间：2013-01-21T03:52:45.760
> 
> 标签：couchdb

我正在编写一个使用 CouchDB 作为其数据库的应用程序。该应用程序与经常用于说明 Couchdb 的博客示例具有相似的品质。有“锚”文档，例如帖子，其中包含引用特定帖子的其他文档，例如博客上的评论。（每个“评论”都有一个字段，就像一个 sql 外键。它包含“帖子”的唯一 ID）

但是，“评论”文档有多种类型，其中一种类型会使博客文章不再与应用程序相关。（博客“post”是医疗记录，我指的“comment”类型是表示治疗结束的报告）。

我一直在努力研究如何编写一个视图，该视图将发出所有“帖子”的列表，这些“帖子”没有附加这些处理完成的文档（如“评论”）。有人可以帮我吗？

我不能只在主“发布”文档上有一个“活动”字段，因为有多个移动客户端更新此文档，如果两个客户端在来之前修改锚文档，我希望避免任何修订冲突回到网络覆盖范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:44:28.360

如果您在一个数据库中有帖子，而*在另一个数据库中有**评论*，那么 couchdb 无法解决此问题，因为您将尝试执行“加入”并且**couchdb 中没有加入**。在这种情况下，您需要在服务器客户端中分别查询两个数据库并仅显示那些带有允许评论的帖子。

否则，如果您在一个数据库中拥有所有内容，那么您需要将您的评论嵌入到您的帖子中，然后编写一个仅发出具有有效评论的帖子的视图将是微不足道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T23:56:13.447

您可以使用聚合来计算带有 map 的帖子中的评论，并减少并过滤掉带有列表功能的超过 0 条评论的帖子，就像对问题“CouchDB 等效于 Sql NOT IN？”的[回答一样。](https://stackoverflow.com/questions/14413953/couchdb-equivalent-of-sql-not-in/14415896#14415896)

查看“count_comments”：

```
map: function(doc) {
  if (!doc.type) return;
  if (doc.type == "post") emit(doc._id, null);
  if (doc.type == "comment" && doc.post) emit(doc.post, null);
}

reduce: _count 
```

列表：

```
no_comments: function(head, req) {
  var row;
  while (row = getRow()) {
    if (row.value == 1)
      send(row.key + "\n");
  }
} 
```

询问：

```
http://127.0.0.1:5984/mydb/_design/post_n_comments/_list/no_comments/count_comments?group_level=1 
```

# mysql - /etc/my.cnf 是否应该设置为添加 character-set-server=utf8 和 default-character-set=utf8？

> ID：14432299
> 
> 赞同：3
> 
> 时间：2013-01-21T03:53:18.647
> 
> 标签：mysql

我在处理 Utf8 时遇到问题。我已经将数据库和表更改为如下所示：

```
 mysql>alter database database_name character set Utf8 collate utf8_unicode_ci;
       mysql>alter table table_name character set Utf8 collate utf8_unicode_ci; 
```

当我检查其变量以显示字符配置和排序规则配置时，它显示如下：

```
 mysql> show variables like '%character%';
              +--------------------------+----------------------------+
              | Variable_name            | Value                      |
              +--------------------------+----------------------------+
              | character_set_client     | latin1                     |
              | character_set_connection | latin1                     |
              | character_set_database   | utf8                       |
              | character_set_filesystem | binary                     |
              | character_set_results    | latin1                     |
              | character_set_server     | latin1                     |
              | character_set_system     | utf8                       |
              | character_sets_dir       | /usr/share/mysql/charsets/ |
              +--------------------------+----------------------------+
              8 rows in set (0.00 sec)

       mysql> show variables like '%collation%';
              +----------------------+-------------------+
              | Variable_name        | Value             |
              +----------------------+-------------------+
              | collation_connection | latin1_swedish_ci |
              | collation_database   | utf8_unicode_ci   |
              | collation_server     | latin1_swedish_ci |
              +----------------------+-------------------+
              3 rows in set (0.00 sec) 
```

当我将 /etc/my.cnf 设置为如下所示时，它运行良好：

```
 [mysqld]
        character-set-server=utf8

        [mysql]
        default-character-set=utf8 
```

仅供参考，这是 JavaScript 上 Utf8 编码的代码：

```
 var Utf8 = {
            encode : function (string) {
                     string = string.replace(/\r\n/g,"\n");
                      var utftext = "";
                      deleteCookie('unicodeLength');
                      for (var n = 0; n < string.length; n++) {
                      var c = string.charCodeAt(n);
                      if (c < 128) {
                            utftext += String.fromCharCode(c);
                      }
                      else if((c > 127) && (c < 2048)) {
                            utftext += String.fromCharCode((c >> 6) | 192);
                            utftext += String.fromCharCode((c & 63) | 128);
                      }
                      else {
                            utftext += String.fromCharCode((c >> 12) | 224);
                            utftext += String.fromCharCode(((c >> 6) & 63) | 128);
                            utftext += String.fromCharCode((c & 63) | 128);
                      }
               }
            return utftext;
         }
    }; 
```

当这 2 行从 /etc/my.cnf 中删除时，问题就出现了。有什么建议么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-30T08:15:46.303

我认为您应该将 skip-character-set-client-handshake 添加到您的 /etc/my.cnf 中。

这是我的。

```
[mysqld]

default-character-set=utf8   
character-set-server=utf8  
skip-character-set-client-handshake  
collation-server=utf8_unicode_ci  
init-connect='SET NAMES utf8'  
init_connect='SET collation_connection = utf8_general_ci'  
port = 3306 
```

# android - 以编程方式阅读电子邮件应用程序未响应消息

> ID：14432304
> 
> 赞同：1
> 
> 时间：2013-01-21T03:53:57.960
> 
> 标签：android

我能够以编程方式阅读电子邮件，但并非没有问题。弹出“应用程序未响应”消息对话框。单击等待后，应用程序运行正常。我该如何解决这个问题，因为我无法克服这个问题。每次我在阅读电子邮件时都必须回复这个对话框。发送工作正常。我感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:05:05.473

我猜你不习惯`AsyncTask`阅读电子邮件。UI 线程中的繁重工作将导致 ANR 消息。

您应该使用`AsyncTask`来执行阅读。首先显示一个`ProgressDialog`at`onPreExecute()`让用户知道你正在做一些工作，阅读邮件中的邮件，并在得到结果后`doInBackground()`执行任何操作；`doInBackground()`你也想把你的藏在`ProgressDialog`这里。

也请查看[有关线程的官方指南](http://developer.android.com/guide/components/processes-and-threads.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T04:05:38.440

您可能正在主 UI 线程上下载电子邮件。您绝对应该使用单独的线程或`AsyncTask`完成下载，然后在下载完成后更新主 UI。

在此处阅读有关使用`AsyncTask`主 UI 线程执行网络操作的信息：http: [//developer.android.com/training/basics/network-ops/connecting.html](http://developer.android.com/training/basics/network-ops/connecting.html)

# apache - .htaccess 将 /foo/bar/ 重写为 /foo/bar.php

> ID：14432305
> 
> 赞同：2
> 
> 时间：2013-01-21T03:54:02.393
> 
> 标签：apache, .htaccess, mod-rewrite

我希望在我的 .htaccess 文件中设置规则，以便可以通过用斜杠替换扩展名来访问所有具有 .php 扩展名的文件（`/foo/bar/`将静默加载`/foo/bar.php`）。以前，我找到[了 this](https://stackoverflow.com/questions/9608413/htaccess-rewrite-all-php-files)，这正是我正在寻找的，除了它只更改`/foo/bar.php`为`/foo/bar`（注意没有结束斜杠）。

当谈到 htaccess 时，我几乎是一个全新的新手，大约 30 分钟的时间调整了上一个链接中的代码，并没有产生大量的`500 internal server error`s。我确信这是一个如此简单的修复，但无论是谷歌还是反复试验都没有给我带来任何结果。

任何人都可以查看上述帖子中的代码（复制如下）并更改它以便`/foo/bar/`重写为`/foo/bar.php`？

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

## hide .php extension
# To externally redirect /dir/foo.php to /dir/foo
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1 [R,L,NC]

## To internally redirect /dir/foo to /dir/foo.php
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^ %{REQUEST_URI}.php [L] 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T05:08:27.207

根据下面的评论，目的是让用户可见的 URL 像 /foo/bar/ 这样实际运行像 /foo/bar.php 这样的 php 脚本。此外，您可能希望将尝试直接加载 /foo/bar.php 的用户重定向到 /foo/bar/ 以保持一致性。

```
#Redirect users loading /foo/bar.php to /foo/bar/
RewriteRule ^(.*)\.php$ $1/ [R]

#Rewrite /foo/bar/ (what the user sees) silently to /foo/bar.php
RewriteRule ^(.*)/$ $1.php [L] 
```

第一条`[R]`规则末尾的 指定重定向而不是重写，以便用户加载 /foo/bar/。第二`$1`条规则末尾的 匹配括号（终止斜杠之前的所有内容），然后在末尾添加 .php 。`[L]`停止评估的手段`RewriteRules`。

正如我最初的回复一样，替换字符串使用前导斜杠取决于上下文。使用这些规则，您将能够看到第一条规则的效果，因为它是重定向。如果重定向尝试转到 `mydomain.comfoo/bar/`而不是`mydomain.com/foo/bar/`，则`$1`在每个规则中的 之前添加一个前导斜杠。

另一个注意事项 - 您的 php 脚本是否需要任何查询字符串？如果确实如此，可能需要进行额外的调整。

[Apache mod_rewrite 参考](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)有更多细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:13:29.407

最终，我使用以下代码完成了这项工作，结合了我最初的发现和 David Ravetti 的帮助。

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /
## hide .php extension
# To externally redirect /dir/foo.php to /dir/foo
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1/ [R,L,NC]
## To internally redirect /dir/foo to /dir/foo.php
RewriteRule ^(.*)/$ $1.php [L] 
```

# c++ - 一旦找到文本之前的关键字，如何开始阅读文件中的某些文本

> ID：14432308
> 
> 赞同：0
> 
> 时间：2013-01-21T03:54:21.643
> 
> 标签：c++, visual-c++, character, getline, words

这是我写的代码......非常基本，因为我是初学者......

源文件如下所示：

```
Integers:
1 2 3 4 56 ...

String:
This is a string......
...(text)..... 
```

代码应该根据它在开头遇到的关键字来读取文本，，，

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main ()
{
    int i;
    string STRING;
    char *inname = "source.txt";
    ifstream infile(inname);

    if (!infile) 
    {
        cout << "There was a problem opening file "<< inname<< " for reading."<< endl;
        return 0;
    };
    while (STRING != "Integer:")
        {
            getline(infile,STRING); // Saves the line in STRING.

            cout<<STRING<<endl; // Prints our STRING.
        };

    };
    cout << "Opened " << inname << " for reading." << endl<<endl<<"Integers:";
    while (infile >> i) {
        cout<<endl<<i<<endl;
    infile.close();
    return 0;
    }
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:21:35.283

IMHO you are missing some state in your parser, some check if the file is still valid and parsing the integers.

Here is a proof of concept:

```
#include <fstream>
#include <iostream>
#include <vector>

namespace {

  void parse_integers(std::vector<int> & vi, std::string const & line) {
    // Using strtol here - other tokenizers are possible.
    char const * ip { line.c_str() };
    char * ep;

    do {
      long int const v { strtol( ip, &ep, 10 ) };
      vi.push_back( v );
      ip = ep;
    } while( *ep != '\0' );

  }
}

int main() {

  std::string   inname { "source.txt" };
  std::ifstream infile { inname };

  if( ! infile ) {
    std::cout << "There was a problem opening file "
          << inname << " for reading." << std::endl;
        return 0;
  };

  enum class ParseState {
    outer, found_integers, found_string
  };

  ParseState ps { ParseState::outer };

  std::vector<int> s_integers;
  std::string      s_string;

  while( infile ) {
    std::string line;
    getline( infile, line );

    // Skip empty lines
    if( line.size() == 0 ) {
      continue;
    }

    if( line == "Integers:" ) {
      ps = ParseState::found_integers;
      continue;
    } else if( line == "String:" ) {
      ps = ParseState::found_string;
      continue;
    }

    // Hope that a section was already found....
    if( ps == ParseState::outer ) {
      std::cerr << "Line with data but without a section found ["
        << line << "]" << std::endl;
      continue;
    }

    switch( ps ) {
    case ParseState::found_integers:
      parse_integers(s_integers, line);
      break;

    case ParseState::found_string:
      s_string += line + "\n";
      break;

    case ParseState::outer:
      // Cannot happen
      abort();
    }
  }

  std::cout << "Dump file contents" << std::endl;
  std::cout << "Strings: [" << s_string << "]" << std::endl;
  std::cout << "Integers: ";
  for(int i : s_integers) {
    std::cout << "[" << i << "] ";
  }
  std::cout << std::endl;

  return 0;
} 
```

Input:

```
Integers:
1 2 3 4 56 111 761 777

String:
This is a string......
...(text)..... 
```

Output:

```
Dump file contents
Strings: [This is a string......
...(text).....
]
Integers: [1] [2] [3] [4] [56] [111] [761] [777] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T04:12:56.757

您需要标记在该行中找到的单词。有很多方法可以做到这一点，您可以使用[stringstream](http://www.cplusplus.com/reference/sstream/stringstream/)、[boost tokenizer](http://www.boost.org/doc/libs/1_52_0/libs/tokenizer/)，甚至编写自己的代码。

假设您创建了一个规则，其中每个单词（标记）由空格分隔，并且您已经设法标记了这些行，那么您可以编写一个代码检查该行中的第一个标记并适当地采取行动

# xcode - 嵌入 Segue - iOS 5

> ID：14432310
> 
> 赞同：6
> 
> 时间：2013-01-21T03:54:31.630
> 
> 标签：xcode, ios5, uistoryboardsegue

我已经将一个容器视图拖到我的一个视图控制器上。这带有一个嵌入 Segue。运行产生这个：

```
'Could not instantiate class named UIStoryboardEmbedSegueTemplate' 
```

因此，从其他几个 stackoverflow 问题来看，这似乎没有在 iOS 5 中实现。但是，这些问题并没有建议修复。XCode 不会让我使用任何其他类型的 segue。

如果答案是创建一个自定义容器视图，我会这样做。在过去的几天里，我已经看到了大量的代码。只是想知道是否有办法使用提供的 Container View 对象来做到这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T15:46:47.060

问题是 Embed segue 是 iOS 6+。它失败是因为您试图实例化 iOS 5 中不存在的 EmbedSegue 内部类。如果您需要 iOS 5 支持，明显的解决方案是不要使用 EmbedSegue :)

另一个问题来了——改用什么？我现在遇到了同样的问题；如果我找到任何优雅的架构解决方案，我会分享。

* * *

对于任何“老派”的 iOS 开发人员来说，这个解决方案似乎都很明显。这是你如何做到的。

1.  在您的“父”视图控制器中实例化“子”视图控制器 viewDidLoad: 或任何合适的时候
2.  [自我 addChildViewController:childVC];
3.  [self.view addSubview:childVC.view];
4.  childVC.view.frame = ....;

现在您应该在 nib 中看到您为子 VC 所做的视图，或者情节提要将显示在您指定它的父视图中。

希望这将有助于任何寻求灵魂的人解耦他们的逻辑:)

干杯，丹

# php - 如何根据学生 ID 获取用户数据或信息？

> ID：14432312
> 
> 赞同：0
> 
> 时间：2013-01-21T03:54:31.770
> 
> 标签：php

流程是这样的，登录（login.php）->更改密码（changepass.php），每个用户都必须更改密码->重定向到主页（homepage.php），用户可以在其中查看他/她的帐户详细信息。 ...我在主页上想要的是，根据用户的信息或学生ID及其全名向用户致意，但只有我可以显示用户的学生ID，因为我回显会话。这是我的 homepage.php 代码

```
 <?php session_start(); ?>
       <?php require('connect/connect.php'); ?>
       <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"                 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
       <html xmlns="http://www.w3.org/1999/xhtml">
      <head>
       <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      <title>Home Page</title>

    <link href="mm_spa.css" rel="stylesheet" type="text/css" />
      </head>

         <body class="oneColElsCtrHdr">

      <td width="487" valign="top">

    <?php
    // this is the session id where i could only get from the user(student id)
echo $_SESSION['username'];
$voter = $_SESSION['username'];
function getuserinfo($info){

$info_select = mysql_query ("SELECT `$info` FROM new_reg_student WHERE studid='$voter'");

     //this is my line 116 which i got an error saying 
     //Warning: mysql_query() expects parameter 1 to be string, 
     //resource given in C:\xampp\htdocs\project\homepage.php on line 116
if ($query_get = mysql_query($info_select)) { 

if ($result = mysql_result($query_get, 0, $info)) {
return $result;
}
}

}
$fname = getuserinfo('fname');
$lname = getuserinfo('lname');
echo 'hello '. $fname .' '.$lname.'';

   ?>

  </td>
    <div id="footer">
   <p>Footer</p>
    <!-- end #footer --></div>
  <!-- end #container --></div>
   </body>
  </html> 
```

这是我的 homepage.php 的预览

![主页预览](../Images/94959e1a3cacd2a1aa4e970d68327e79.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:57:33.090

你使用[mysql_query()](http://php.net/manual/en/function.mysql-query.php)两次，所以改变：

```
$info_select = mysql_query ("SELECT ... "); 
```

至

```
$info_select = "SELECT..."; //remove mysql_query from here
if ($query_get = mysql_query($info_select)) { //as you have it here
  ... 
```

**注意**：不推荐使用 mysql_*，而是使用[MySQLi](http://php.net/manual/en/book.mysqli.php)或[PDO_MySQL](http://php.net/manual/en/ref.pdo-mysql.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T04:12:35.277

您没有将 传递`studid`到您的`getuserinfo($info)`函数中，并且在您的查询中使用`$voter`了您在函数外部定义的，`global`如果您想从函数外部访问变量，请使用。

```
$voter = $_SESSION['username'];

function getuserinfo($info){

// Call the Student ID
global $voter;

$info_select = "SELECT $info FROM new_reg_student 
                    WHERE studid='".mysql_real_escape_string($voter)."'";

if ($query_get = mysql_query($info_select)) { 
    ......
}
} // Function Close 
```

# wpf - 在 DataGridTemplateColumn 中添加图像

> ID：14432313
> 
> 赞同：5
> 
> 时间：2013-01-21T03:54:53.140
> 
> 标签：wpf, datagrid, datagridtemplatecolumn

```
BitmapImage im = new BitmapImage();

string path1 = @"C:\abc.png";

im.UriSource=new Uri(path1);

DataGridTemplateColumn one = new DataGridTemplateColumn();

this.dataGrid1.Columns.Add(one); 
```

现在我必须在 datagridTemplateColumn 中添加 BitmapImage im。

如何在列中添加图像？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-21T09:34:57.220

在代码中使用控件模板很困难。在 WPF 中，标准且有效的方法是在 XAML 中创建模板布局。然后，如果您需要将任何数据传递给您的控件，您可以使用数据绑定。除了极少数情况外，您通常不需要在代码中构造模板。

要使用 XAML 获得与上述相同的效果，请编写：

```
 <DataGrid x:Name="dataGrid1">
        <DataGrid.Columns>
            <DataGridTemplateColumn>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Image Source="file:///C:\abc.png" />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

如果每个网格行的图像路径必须是动态的，您可以像这样修改它：

```
 <DataGrid x:Name="dataGrid1" AutoGenerateColumns="False">
        <DataGrid.Columns>
            <DataGridTemplateColumn>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Image Source="{Binding ImageFilePath}" />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

这是用一些数据填充网格的示例代码：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        List<MyDataObject> list = new List<MyDataObject>();
        list.Add(new MyDataObject() { ImageFilePath = new Uri("file:///c:\\abc.png") });
        list.Add(new MyDataObject() { ImageFilePath = new Uri("file:///c:\\def.png") });
        dataGrid1.ItemsSource = list;
    }
}

public class MyDataObject
{
    public Uri ImageFilePath { get; set; }
} 
```

# php - $_SESSION 查询差异

> ID：14432314
> 
> 赞同：-2
> 
> 时间：2013-01-21T03:55:01.580
> 
> 标签：php, session

我只是想知道这个查询有什么区别：

```
$query = "SELECT * FROM users WHERE id='".$_SESSION['mysql_result_id']."'"; 
```

并像这样创建一个变量：

```
$mysql_result_id = $_SESSION['mysql_result_id'];
$query = "SELECT * FROM users WHERE id='".$mysql_result_id."'"; 
```

两者似乎相似，但第二个不起作用。如果我只需要会话的值，为什么还需要连接？假设存储在 my `$_SESSION['mysql_result_id']`is中的值`'2'`与说的一样`id=2`吗？为什么我必须连接它？为什么我不能放`"WHERE id=$mysql_result_id"`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T04:14:03.820

您正在函数之外初始化变量

```
$mysql_result_id = $_SESSION['mysql_result_id']; 
```

此变量超出了您的函数的范围，而 $_SESSION 则不是。这就是为什么它不起作用。在此处阅读有关[PHP 变量范围](http://php.net/manual/en/language.variables.scope.php)的信息。

如果您希望方法 2 起作用，那么您必须移动它

```
$mysql_result_id = $_SESSION['mysql_result_id']; 
```

在您的函数内部（您刚刚粘贴在您的问题中，然后将其删除）

并回答您的第二个问题：您不必将数值用引号括起来。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-21T03:57:11.990

这就像问有什么区别：

```
mysql_query("select now() from dual"); 
```

和：

```
$sql = "select now() from dual";
mysql_query($sql); 
```

这只是无缘无故地浪费内存。

# orientation - 强制视图仅支持横向模式

> ID：14432316
> 
> 赞同：0
> 
> 时间：2013-01-21T03:55:23.630
> 
> 标签：orientation, modal-dialog, landscape

我只想在我的应用程序中支持横向模式。我设置了以下内容：

1.  应用程序中所有视图控制器的方向都设置为横向。一些视图控制器在情节提要中，而一对则不在
2.  对于 LandscapeLeft 和 LandscapeRight 方向，所有 viewController的`shouldAutorotateToInterfaceOrientation`方法都设置为返回 TRUE，否则返回 FALSE
3.  info.plist 中支持的方向也设置为横向

现在，当我运行应用程序时，一切都按预期工作，应用程序以横向模型启动。

但是在某些情况下，我必须在应用程序开始时抛出一个模式。我使用以下代码从`rootviewcontroller`my打开模型：`UINavigationController`

```
 AskInfoViewController *askInfo = [[AskInfoViewController alloc] init];
    [askInfo setModalPresentationStyle:UIModalPresentationFormSheet];
    [askInfo setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
    [self presentModalViewController:askInfo animated:YES]; 
```

在这些情况下，模态框打开得很好，但模态框的背景是纵向模式。

知道如何确保我的应用程序中的所有视图始终处于带有或不带有模态的横向模型中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:47:36.357

所以我终于找到了如何让它工作。`viewDidLoad`我没有在方法中打开模式，而是在`viewDidAppear`.

# c++ - 黑屏 OpenGL

> ID：14432318
> 
> 赞同：1
> 
> 时间：2013-01-21T03:55:48.670
> 
> 标签：c++, opengl

我正在尝试学习如何使用着色器程序在 OpenGL 2.0 中进行一些基本的渲染，但我很难让任何顶点数据显示在屏幕上。现在我不知道我的问题出在哪里。我已经浏览了许多示例，在我的代码中没有任何明显的错误之处，但我确信我遗漏了一些简单的东西。我会尽量缩短我的代码。

我在这里也问过同样的问题：[gamedev.stackexchange](https://gamedev.stackexchange.com/questions/47414/blank-screen-open-gl-2-0)，但不幸的是，我没有收到任何能够解决我的问题的答案。

尝试的答案的快速摘要：

1.  我可以将背景颜色清除为红色，所以我知道我的显示代码有效。
2.  相机代码不会修改矩阵堆栈。
3.  没有着色器编译器错误。

感谢您提供任何帮助。

```
bool GameCore::Start(int iCmdShow)
{
    const LPCWSTR appname = TEXT("Maze Game");
    // Create the Window and kill the program if this fails.
    if(!wm->Create(appname))
    {
        return FALSE;
    }

    // Initialize OpenGL
    wm->InitGraphics();
    cam = wm->cam;

    Vector3 *v = new Vector3(0.0f,0.0f,0.0f);
    wm->testSprite = new Sprite(v);

    // Start the update loop.
    _beginthread(&GameCore::Execute, 0, this);

    // Blocking function to run the application.
    wm->RunWindow(iCmdShow);
    return true;
}

// Initialize OpenGL graphics
void OpenGLWM::InitGraphics()
{
    hDC = GetDC(hWnd);

    SetupPixelFormat();

    hRC = wglCreateContext(hDC);
    wglMakeCurrent(hDC, hRC);

    glClearColor(1, 0, 0, 0);
    glClearDepth(1.0);
    glEnable(GL_DEPTH_TEST);

    GLenum err = glewInit();
    if (GLEW_OK != err)
    {
        // Add error handling.
    }

    cam = new Camera(0, 0, -10);
    program = new ShaderProgram();
    program->Initialize();
}

// Set up pixel format for graphics initialization
void OpenGLWM::SetupPixelFormat()
{
    PIXELFORMATDESCRIPTOR pfd, *ppfd;
    int pixelformat;

    ppfd = &pfd;

    ppfd->nSize = sizeof(PIXELFORMATDESCRIPTOR);
    ppfd->nVersion = 1;
    ppfd->dwFlags = PFD_DRAW_TO_WINDOW | PFD_SUPPORT_OPENGL | PFD_DOUBLEBUFFER;
    ppfd->dwLayerMask = PFD_MAIN_PLANE;
    ppfd->iPixelType = PFD_TYPE_COLORINDEX;
    ppfd->cColorBits = 16;
    ppfd->cDepthBits = 16;
    ppfd->cAccumBits = 0;
    ppfd->cStencilBits = 0;

    pixelformat = ChoosePixelFormat(hDC, ppfd);
    SetPixelFormat(hDC, pixelformat, ppfd);
}

// Camera Constructor
Camera::Camera(double dX, double dY, double dZ)
{
    Vector3 V(dX, dY, dZ);
    Vector3 R(0,0,0);
    Initialization(V, R);
}

bool ShaderProgram::Initialize()
{
    GLint giLinked;
    GLbyte vShaderStr[] =
    "#version 110               \n"
    "attribute vec3 in_Position;\n"
    "void main()\n"
    "{\n"
        "gl_Position = vec4(in_Position, 1.0);\n"
    "}\n";

    GLbyte pShaderStr[] =
    "#version 110               \n"
    "precision mediump float;\n"
    "void main()\n"
    "{\n"
        "gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n"
    "}\n";

    // Load the shaders
    vertexShader.LoadShader((const char *)&vShaderStr, GL_VERTEX_SHADER);
    pixelShader.LoadShader((const char *)&pShaderStr, GL_FRAGMENT_SHADER);

    guiProgram = glCreateProgram();

    if(guiProgram == 0)
    {
        return false;
    }
    // Add the shaders to the program
    glAttachShader(guiProgram, vertexShader.guiShader);
    glAttachShader(guiProgram, pixelShader.guiShader);

    // Bind the position coordinates
    glBindAttribLocation(guiProgram, 0, "in_Position");

    // Link the program
    glLinkProgram(guiProgram);
    int iError = glGetError();
    // Get the link status
    glGetProgramiv(guiProgram, GL_LINK_STATUS, &giLinked);

    if(giLinked == 0)
    {
        // Add error handling.
        return false;
    }
    return true;
}

GLuint BaseShader::LoadShader(const char *cShaderSrc, GLenum type)
{
    GLint guiCompiled;
    // Creates an empty shader object.
    guiShader = glCreateShader(type);

    if(guiShader == 0)
    {
        return 0;
    }
    // Load the shader.
    glShaderSource(guiShader, 1, &cShaderSrc, NULL);

    // Compile the shader
    glCompileShader(guiShader);

    // Check the compile status
    glGetShaderiv(guiShader, GL_COMPILE_STATUS, &guiCompiled);

    if(guiCompiled == 0)
    {
        // TODO: ADD ERROR LOGGING
        GLint infoLen = 0;
        glGetShaderiv(guiShader, GL_INFO_LOG_LENGTH, &infoLen);
        if(infoLen > 1)
        {
            char* infoLog = (char *)malloc(sizeof(char) * infoLen);
            glGetShaderInfoLog(guiShader, infoLen, NULL, infoLog);
            free(infoLog);
        }
        return 0;
    }
    return guiShader;
}

// Sprite inherits from Render Object
Sprite::Sprite(Vector3 *_vPosition)
{
    // Initialize the position.
    vPosition = _vPosition;
    // Create verticies
    vertexStruct * v = new vertexStruct[4];
    v[0].SetPosition(-2, 2, -40);
    v[0].SetColor(128, 128, 128, 255);
    v[1].SetPosition(2, 2, -40);
    v[1].SetColor(128, 128, 128, 255);
    v[2].SetPosition(2, -2, -40);
    v[2].SetColor(128, 128, 128, 255);
    v[3].SetPosition(-2, -2, -40);
    v[3].SetColor(128, 128, 128, 255);

    // Create the indicies.
    GLubyte * i = new GLubyte[6];
    i[0] = 0;
    i[1] = 1;
    i[2] = 2;
    i[3] = 0;
    i[4] = 2;
    i[5] = 3;

    Initialize(v, 4, i, 6);
}

void RenderObject::Initialize(vertexStruct *_vertices, unsigned int _uiNumVertices, GLubyte *_indices, unsigned int _uiNumIndicies)
{
    vertices = _vertices;
    indices = _indices;
    uiNumVertices = _uiNumVertices;
    uiNumIndices = _uiNumIndicies;
    CreateBufferObjects();
}

void RenderObject::CreateBufferObjects()
{
    // Get an id for the Vector3 buffer.
    glGenBuffers((GLsizei)1, &uiVertexBuffer);
    // Bind the buffer so we can "upload" the data.
    glBindBuffer(GL_ARRAY_BUFFER, uiVertexBuffer);
    // Upload the data to OpenGL.
    glBufferData(GL_ARRAY_BUFFER, sizeof(vertexStruct) * uiNumVertices, vertices, GL_STATIC_DRAW);

    // Get an id for the indice buffer.
    glGenBuffers(1, &uiIndiceBuffer);
    // Bind the indice buffer so we can "upload" the data.
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, uiIndiceBuffer);
    // Upload the data to OpenGL.
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(GLubyte) * uiNumIndices, indices, GL_STATIC_DRAW);
}

bool WindowManager::RunWindow(int iCmdShow)
{
    // Display the window
    ShowWindow(hWnd, iCmdShow);
    UpdateWindow(hWnd);

    // Event loop
    while (1)
    {
        if (PeekMessage(&msg, NULL, 0, 0, PM_NOREMOVE) == TRUE)
        {
            if (!GetMessage(&msg, NULL, 0, 0))
            {
                return TRUE;
            }

            TranslateMessage(&msg);
            DispatchMessage(&msg);
        }
        // It would be better if this was its own thread.
        if(!DoWork())
        {
            return false;
        }
    }
return true;
}

// "Draw" function.
bool OpenGLWM::DoWork()
{
    glClearColor(0, 0, 0, 1);
    glClear(GL_COLOR_BUFFER_BIT);

    glUseProgram(program->guiProgram);

    testSprite->Draw();
    // Show the new scene
    SwapBuffers(hDC);
    return true;
}

void RenderObject::Draw()
{
    // Bind the vertex buffer.
    glBindBuffer(GL_ARRAY_BUFFER, uiVertexBuffer);
    // Set where the vertex data is.
    glVertexAttribPointer(VertexEnum::Data, 3, GL_FLOAT, GL_FALSE, sizeof(vertexStruct), 0);
    glEnableVertexAttribArray(0);//VertexEnum::Data);

    // Load the colors.
    glVertexAttribPointer(VertexEnum::Color, 4, GL_UNSIGNED_BYTE, GL_TRUE, 12, (void*)offsetof(vertexStruct, color));

    glEnableVertexAttribArray(1);//VertexEnum::Color);
    // Bind the indice buffer.
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, uiIndiceBuffer);
    glDrawElements(GL_TRIANGLE_STRIP, uiNumIndices, GL_UNSIGNED_BYTE, 0);
}

void OpenGLWM::ResizeGraphics()
{
    // Get new window size
    RECT rect;
    int width;
    int height;
    GLfloat aspect;

    GetClientRect(hWnd, &rect);
    width = rect.right;
    height = rect.bottom;
    aspect = (GLfloat)width / height;

    // Adjust graphics to window size
    glViewport(0, 0, width, height);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(45.0, aspect, 1.0, 100.0);
    glMatrixMode(GL_MODELVIEW);
    // Call the base function
    WindowManager::ResizeGraphics();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T07:06:51.007

该程序存在一些问题，这些问题共同导致缺乏渲染：

1.  首先，世界坐标顶点到屏幕坐标的转换没有发生。具体来说，顶点着色器仅将输入顶点值复制到最终顶点位置（通常称为“直通”着色器）。这个问题有多种解决方案：

    *   使用非常古老的`ftransform()`GLSL 例程，它将返回转换后的顶点值：

        ```
        gl_Position = ftransform(); 
        ```

    *   使用隐式定义的 GLSL 矩阵：

        ```
        gl_Position = gl_ModelViewProjectionMatrix * vec4(in_Position, 1.0); 
        ```

    *   或使用单独定义的矩阵：

        ```
        gl_Position = gl_ProjectionMatrix * gl_ModelViewMatrix * vec4(in_Position, 1.0); 
        ```

2.  下一个问题是定义的几何图形与其渲染方式不一致。特别是索引元素数组，定义如下

    ```
    // Create the indicies.
    GLubyte * i = new GLubyte[6];
    i[0] = 0;
    i[1] = 1;
    i[2] = 2;
    i[3] = 0;
    i[4] = 2;
    i[5] = 3; 
    ```

    是针对两个三角形的，但是`glDrawElements`调用将 GL_TRIANGLE_STRIP 指定为几何图元。这可以通过两种方式解决：

    *   将 GL_TRIANGLES 用于几何图元类型，或
    *   将三角形条带的索引元素列表修复为：

        ```
        // Create the indicies.
        GLubyte * i = new GLubyte[4];
        i[0] = 1;
        i[1] = 0;
        i[2] = 2;
        i[3] = 3; 
        ```

    这将在一条带中产生两个三角形，并带有适当的顶点缠绕，以进行正确的背面剔除。

3.  最后，当请求深度缓冲区并启用深度测试时，深度缓冲区不会每帧都被清除。在调用中添加 GL_DEPTH_BUFFER_BIT 即可`glClear`完成此操作。

# google-maps-api-3 - 圆形谷歌地图 API 3

> ID：14432319
> 
> 赞同：1
> 
> 时间：2013-01-21T03:56:11.837
> 
> 标签：google-maps-api-3

我知道如何使用 png 制作圆角 - [http://search.missouristate.edu/map/mobile/examples/corners.htm](http://search.missouristate.edu/map/mobile/examples/corners.htm)

但我想做这样的东西 - [http://www.netflame.pl/map.jpg](http://www.netflame.pl/map.jpg) 在这种情况下，png会遍布整个地图，它不会工作。

已经找到了一个半解决方案，但它只适用于“iframe”方法：www.netflame.pl/test2.html

当我尝试将其实现为 API 方法时，它仅在 FF 中看起来不错：/ www.netflame.pl/test3.html

是否有其他解决方案可以使用 API3 显示圆形地图？

提前致谢！

# apache - 动态加载css时，我不断收到403，可能是什么原因？

> ID：14432321
> 
> 赞同：0
> 
> 时间：2013-01-21T03:56:31.623
> 
> 标签：apache, .htaccess, mod-rewrite

在[此站点上](http://siliconbeachla.com/events-2/calendar/)，我无法加载 CSS，因为我的 CSS 不断收到 403，这是从以下地址加载的：[http ://siliconbeachla.com/?ai1ec_render_css=1358530067&ver=3.5](http://siliconbeachla.com/?ai1ec_render_css=1358530067&ver=3.5)

必须有一些重写规则阻止它，这是他们的 .htaccess 文件的一部分，可能对此负责（我不是 Apache 专家）。

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
#RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress
# BEGIN Better WP Security
# Begin HackRepair.com Blacklist
RewriteEngine On
#Block comment spammers, bad bots and some proxies
RewriteCond %{REMOTE_HOST} 12.226.240.248 [OR]
RewriteCond %{REMOTE_HOST} 24.111.102.26 [OR]
RewriteCond %{REMOTE_HOST} 24.117.121.113 [OR]
RewriteCond %{REMOTE_HOST} 65.30.216.140 [OR]
RewriteCond %{REMOTE_HOST} 67.87.64.23 [OR]
RewriteCond %{REMOTE_HOST} 68.12.149.198 [OR]
RewriteCond %{REMOTE_HOST} 69.139.167.203 [OR]
RewriteCond %{REMOTE_HOST} 74.95.182.57 [OR]
RewriteCond %{REMOTE_HOST} 91.121.3.29 [OR]
RewriteCond %{REMOTE_HOST} 203.94.229.227 [OR]
RewriteCond %{REMOTE_HOST} 208.96.122.142 [OR]
RewriteCond %{REMOTE_HOST} 210.0.141.247 [OR]
RewriteCond %{REMOTE_HOST} 210.197.97.67 [OR]
RewriteCond %{REMOTE_HOST} 212.179.127.188 [OR]
RewriteCond %{REMOTE_HOST} 216.246.60.183 [OR]
RewriteCond %{REMOTE_HOST} 220.156.189.233 [OR]
RewriteCond %{REMOTE_HOST} 222.36.12.42 [OR]
# Abuse Agent Blocking
RewriteCond %{HTTP_USER_AGENT} ^BlackWidow [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Bolt\ 0 [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Bot\ mailto:craftbot\@yahoo\.com [NC,OR]
RewriteCond %{HTTP_USER_AGENT} CazoodleBot [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^ChinaClaw [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Custo [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Default\ Browser\ 0 [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^DIIbot [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^DISCo [NC,OR]
RewriteCond %{HTTP_USER_AGENT} discobot [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Download\ Demon [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^eCatch [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ecxi [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^EirGrabber [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^EmailCollector [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^EmailSiphon [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^EmailWolf [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Express\ WebPictures [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^ExtractorPro [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^EyeNetIE [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^FlashGet [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^GetRight [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^GetWeb! [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Go!Zilla [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Go-Ahead-Got-It [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^GrabNet [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Grafula [NC,OR]
RewriteCond %{HTTP_USER_AGENT} GT::WWW [NC,OR]
RewriteCond %{HTTP_USER_AGENT} heritrix [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^HMView [NC,OR]
RewriteCond %{HTTP_USER_AGENT} HTTP::Lite [NC,OR]
RewriteCond %{HTTP_USER_AGENT} HTTrack [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ia_archiver [NC,OR]
RewriteCond %{HTTP_USER_AGENT} IDBot [NC,OR]
RewriteCond %{HTTP_USER_AGENT} id-search [NC,OR]
RewriteCond %{HTTP_USER_AGENT} id-search\.org [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Image\ Stripper [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Image\ Sucker [NC,OR]
RewriteCond %{HTTP_USER_AGENT} Indy\ Library [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^InterGET [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Internet\ Ninja [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^InternetSeer\.com [NC,OR]
RewriteCond %{HTTP_USER_AGENT} IRLbot [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ISC\ Systems\ iRc\ Search\ 2\.1 [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Java [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^JetCar [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^JOC\ Web\ Spider [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^larbin [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^LeechFTP [NC,OR]
RewriteCond %{HTTP_USER_AGENT} libwww [NC,OR]
RewriteCond %{HTTP_USER_AGENT} libwww-perl [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Link [NC,OR]
RewriteCond %{HTTP_USER_AGENT} LinksManager.com_bot [NC,OR]
RewriteCond %{HTTP_USER_AGENT} linkwalker [NC,OR]
RewriteCond %{HTTP_USER_AGENT} lwp-trivial [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Mass\ Downloader [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Maxthon$ [NC,OR]
RewriteCond %{HTTP_USER_AGENT} MFC_Tear_Sample [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^microsoft\.url [NC,OR]
RewriteCond %{HTTP_USER_AGENT} Microsoft\ URL\ Control [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^MIDown\ tool [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Mister\ PiX [NC,OR]
RewriteCond %{HTTP_USER_AGENT} Missigua\ Locator [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Mozilla\.*Indy [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Mozilla\.*NEWT [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^MSFrontPage [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Navroad [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^NearSite [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^NetAnts [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^NetSpider [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Net\ Vampire [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^NetZIP [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Nutch [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Octopus [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Offline\ Explorer [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Offline\ Navigator [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^PageGrabber [NC,OR]
RewriteCond %{HTTP_USER_AGENT} panscient.com [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Papa\ Foto [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^pavuk [NC,OR]
RewriteCond %{HTTP_USER_AGENT} PECL::HTTP [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^PeoplePal [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^pcBrowser [NC,OR]
RewriteCond %{HTTP_USER_AGENT} PHPCrawl [NC,OR]
RewriteCond %{HTTP_USER_AGENT} PleaseCrawl [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^psbot [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^RealDownload [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^ReGet [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Rippers\ 0 [NC,OR]
RewriteCond %{HTTP_USER_AGENT} SBIder [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^SeaMonkey$ [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^sitecheck\.internetseer\.com [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^SiteSnagger [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^SmartDownload [NC,OR]
RewriteCond %{HTTP_USER_AGENT} Snoopy [NC,OR]
RewriteCond %{HTTP_USER_AGENT} Steeler [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^SuperBot [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^SuperHTTP [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Surfbot [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^tAkeOut [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Teleport\ Pro [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Toata\ dragostea\ mea\ pentru\ diavola [NC,OR]
RewriteCond %{HTTP_USER_AGENT} URI::Fetch [NC,OR]
RewriteCond %{HTTP_USER_AGENT} urllib [NC,OR]
RewriteCond %{HTTP_USER_AGENT} User-Agent [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^VoidEYE [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Web\ Image\ Collector [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Web\ Sucker [NC,OR]
RewriteCond %{HTTP_USER_AGENT} Web\ Sucker [NC,OR]
RewriteCond %{HTTP_USER_AGENT} webalta [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^WebAuto [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^[Ww]eb[Bb]andit [NC,OR]
RewriteCond %{HTTP_USER_AGENT} WebCollage [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^WebCopier [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^WebFetch [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^WebGo\ IS [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^WebLeacher [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^WebReaper [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^WebSauger [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Website\ eXtractor [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Website\ Quester [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^WebStripper [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^WebWhacker [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^WebZIP [NC,OR]
RewriteCond %{HTTP_USER_AGENT} Wells\ Search\ II [NC,OR]
RewriteCond %{HTTP_USER_AGENT} WEP\ Search [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Wget [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Widow [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^WWW-Mechanize [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^WWWOFFLE [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Xaldon\ WebSpider [NC,OR]
RewriteCond %{HTTP_USER_AGENT} zermelo [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Zeus [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Zeus\.*Webster [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ZyBorg [NC]
RewriteRule ^.* - [F,L]
# Abuse bot blocking rule end
order allow,deny
allow from all
# Start Custom Blocks
# Bluecoat
deny from 8.21.4.254
deny from 65.46.48.192/30
deny from 65.160.238.176/28
deny from 85.92.222.0/24
deny from 206.51.36.0/22
deny from 216.52.23.0/24
# cyveillance (already blocked 38.*)
deny from 38.100.19.8/29
deny from 38.100.21.0/24
deny from 38.100.41.64/26
deny from 38.105.71.0/25
deny from 38.105.83.0/27
deny from 38.112.21.140/30
deny from 38.118.42.32/29
deny from 65.213.208.128/27
deny from 65.222.176.96/27
deny from 65.222.185.72/29
# Cyberpatrol
deny from 38.103.17.160/27
# Internet Identity - Anti-Phishing
deny from 66.113.96.0/20
deny from 70.35.113.192/27
# Ironport
deny from 204.15.80.0/22
# Lightspeed Systems Security
deny from 66.17.15.128/26
deny from 69.84.207.32/27
deny from 69.84.207.128/25
# Layered Technologies
deny from 72.36.128.0/17
deny from 72.232.0.0/16
deny from 72.233.0.0/17
deny from 216.32.0.0/14
# M86
deny from 67.192.231.224/29
deny from 208.90.236.0/22
# McAfee-Secure-Computing
deny from 69.48.241.64/26
deny from 80.66.0.0/19
deny from 192.55.214.0/24
deny from 207.67.117.0/24
# Phish-Inspector.com
deny from 209.147.127.208/28
# Prescient Software, Inc. Phishmongers
deny from 198.186.190.0/23
deny from 198.186.192.0/23
deny from 198.186.194.0/24
# urlfilterdb
deny from 207.210.99.32/29
# websense-in.car1.sandiego1.level3.net
deny from 4.53.120.22
# Websense
deny from 66.194.6.0/24
deny from 67.117.201.128/28
deny from 69.67.32.0/20
deny from 131.191.87.0/24
deny from 204.15.64.0/21
deny from 208.80.192.0/21
deny from 212.62.26.64/27
deny from 213.168.226.0/24
deny from 213.168.241.0/30
deny from 213.168.242.0/30
deny from 213.236.150.16/28
# Yandex
deny from 77.88.0.0/18
deny from 77.88.22.0/23
deny from 77.88.24.0/21
deny from 77.88.24.0/22
deny from 77.88.28.0/22
deny from 77.88.36.0/23
deny from 77.88.42.0/23
deny from 77.88.44.0/24
deny from 77.88.50.0/23
deny from 87.250.224.0/19
deny from 87.250.230.0/23
deny from 87.250.252.0/22
deny from 93.158.128.0/18
deny from 93.158.137.0/24
deny from 93.158.144.0/21
deny from 93.158.144.0/23
deny from 93.158.146.0/23
deny from 93.158.148.0/22
deny from 95.108.128.0/17
deny from 95.108.128.0/24
deny from 95.108.152.0/22
deny from 95.108.216.0/23
deny from 95.108.240.0/21
deny from 95.108.248.0/23
deny from 178.154.128.0/17
deny from 178.154.160.0/22
deny from 178.154.164.0/23
deny from 199.36.240.0/22
deny from 213.180.192.0/19
deny from 213.180.204.0/24
deny from 213.180.206.0/23
deny from 213.180.209.0/24
deny from 213.180.218.0/23
deny from 213.180.220.0/23
# End HackRepair.com Blacklist
# END Better WP Security

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_REFERER} ^http://[w.]*([^/]+)
RewriteCond %{HTTP_HOST}/%1 !^[w.]*([^/]+)/\1$ [NC]
RewriteCond %{REQUEST_METHOD} ^(HEAD|TRACE|DELETE|TRACK) [NC]
RewriteRule ^(.*)$ - [F,L]
RewriteCond %{QUERY_STRING} \.\.\/ [NC,OR]
RewriteCond %{QUERY_STRING} boot\.ini [NC,OR]
RewriteCond %{QUERY_STRING} tag\= [NC,OR]
RewriteCond %{QUERY_STRING} ftp\:  [NC,OR]
RewriteCond %{QUERY_STRING} http\:  [NC,OR]
RewriteCond %{QUERY_STRING} https\:  [NC,OR]
RewriteCond %{QUERY_STRING} (\<|%3C).*script.*(\>|%3E) [NC,OR]
RewriteCond %{QUERY_STRING} mosConfig_[a-zA-Z_]{1,21}(=|%3D) [NC,OR]
RewriteCond %{QUERY_STRING} base64_encode.*\(.*\) [NC,OR]
RewriteCond %{QUERY_STRING} ^.*(\[|\]|\(|\)|<|>|ê|"|;|\?|\*|=$).* [NC,OR]
RewriteCond %{QUERY_STRING} ^.*(&#x22;|&#x27;|&#x3C;|&#x3E;|&#x5C;|&#x7B;|&#x7C;).* [NC,OR]
RewriteCond %{QUERY_STRING} ^.*(%24&x).* [NC,OR]
RewriteCond %{QUERY_STRING} ^.*(%0|%A|%B|%C|%D|%E|%F|127\.0).* [NC,OR]
RewriteCond %{QUERY_STRING} ^.*(globals|encode|localhost|loopback).* [NC,OR]
RewriteCond %{QUERY_STRING} ^.*(request|select|insert|union|declare).* [NC]
RewriteCond %{HTTP_COOKIE} !^.*wordpress_logged_in_.*$
RewriteRule ^(.*)$ - [F,L]
</IfModule> 
```

你能帮我找出问题所在吗？

编辑 - 似乎将“索引”添加到 url 可以解决问题，但它是唯一给我带来问题的服务器。所以基本上这工作[http://siliconbeachla.com/index?ai1ec_render_css=1358419759&ver=3.5](http://siliconbeachla.com/index?ai1ec_render_css=1358419759&ver=3.5)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:39:37.793

我仍在寻找错误，但您可以通过打开[RewriteLog](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html#rewritelog)更快地自己找到它。

```
RewriteLog "/usr/local/var/apache/logs/rewrite.log" 
```

这记录了哪些规则被比较并应用于请求，这使得调试比盯着复杂的重写规则容易得多。

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

这是捕获对 CSS 的请求并重定向到 index.php - 它神秘地给出了 403 错误，以及提供页面内容。随着服务器上的行为发生变化，您似乎已经在修改它。

顺便说一句，我建议不要为动态 CSS 设置空路径。而不是这个：

```
?ai1ec_render_css=1358530067&ver=3.5 
```

有：

```
ai1ec_render.css?somevar=1358530067&ver=3.5 
```

这将使编写重写规则变得更加容易，并且对于其他试图遵循重写的人来说更加明显。

# for-loop - 在 C++ 中对数字求平方

> ID：14432330
> 
> 赞同：-2
> 
> 时间：2013-01-21T03:57:58.777
> 
> 标签：for-loop, math, visual-c++, int, perfect-square

好的，所以我正在阅读关于 c++ 的 bjarn stroustrups 书，他的一个练习要求我在不使用乘法运算符的情况下计算数字的平方。所以我开始使用的样板代码是一个名为 square 的函数，其类型为 int，参数 x 为 int 类型，代码块返回 x*x; 很简单。所以我想了想，我知道我需要一个循环，我知道它可能是一个 for 循环。我知道我希望循环听起来像这样将 x 添加到 x 并循环 x 次的值。我刚开始使用 c++，所以我不知道如何创建循环。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T04:16:04.393

所以这个问题的重点实际上只是为了让你自己的乘法函数。有几种方法可以做到这一点。您可以递归地执行此操作（我个人认为这是最简单的）或通过循环。递归：

```
int mult(int a, int b){

    if (b == 0) {
        return 0;
    }

    b -= 1;

    return (a + mult(a, b));
}

int power(int base, int deg){
    if (deg == 0) {
        return 0;
    }

    deg-=1;

    return mult(base, base)+power(base, deg);
} 
```

或者正如@Cris 上面所做的那样，没有使用嵌套的 for 循环进行递归：

```
int pow(int a, int b)
    {
      if (b == 0)
        return 1;
      int answer = a;
      int increment = a;
      int i, j;
      for(i = 1; i < b; i++)
      {
         for(j = 1; j < a; j++)
         {
            answer += increment;
         }
         increment = answer;
      }
      return answer;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T04:04:25.227

在你的情况下 b=2

```
 int pow(int a, int b)
    {
      if (b == 0)
        return 1;
      int answer = a;
      int increment = a;
      int i, j;
      for(i = 1; i < b; i++)
      {
         for(j = 1; j < a; j++)
         {
            answer += increment;
         }
         increment = answer;
      }
      return answer;
    } 
```

# android - 如何在 Android 上获得 DOP

> ID：14432333
> 
> 赞同：0
> 
> 时间：2013-01-21T03:58:34.133
> 
> 标签：android, gps

是否可以获得 Android 手机内 GPS 接收器的 DOP（位置水平稀释）？过去使用 GPS 接收器时，我发现卫星的数量和 DOP 对确定信号的准确性和误差有很大帮助。我正在编写一个应用程序，如果可能的话，我希望获得有关 GPS 读取的额外元数据。我知道我可以通过遍历 getSatellites 列表来获得卫星的数量，但我还没有找到任何可以提供 DOP 或一些错误解决方案的东西。

更多关于 DOP 的信息可以在[这里找到](http://en.wikipedia.org/wiki/Dilution_of_precision_%28GPS%29)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T05:05:24.643

你不能从 NMEA 字符串中得到 DOP 吗？

[NMEA 监听器](http://developer.android.com/reference/android/location/GpsStatus.NmeaListener.html)

特别是 GGA 字符串

[GPS 字符串参考](http://aprs.gids.nl/nmea/#gga)

编辑我继续测试代码，NMEA 监听器的输出对我来说是

```
01-21 16:54:34.446: D/GPS(31835): Location[gps -xx.350320,xxx.764615 acc=15 et=+2d7h44m55s515ms alt=-57.70001220703125 vel=0.37530002 bear=350.0 {Bundle[mParcelledData.dataSize=44]}]
01-21 16:54:35.423: D/GPS(31835): $GPGSA,A,3,05,18,21,25,29,31,,,,,,,2.1,1.2,1.7*35
01-21 16:54:35.423: D/GPS(31835): $GPGSV,2,1,07,25,56,055,22,29,56,156,21,21,45,315,18,31,33,246,17*78
01-21 16:54:35.423: D/GPS(31835): $GPGSV,2,2,07,05,22,111,15,30,11,213,11,18,08,001,12*4E
01-21 16:54:35.446: D/GPS(31835): $GPGGA,xxxx38.000,xxx1.019145,S,xxx45.876838,E,1,06,1.2,-27.1,M,-29.7,M,,*7A
01-21 16:54:35.446: D/GPS(31835): $GPRMC,xxxx38.000,A,xx21.019145,S,xxxx45.876838,E,0.9,8.2,210113,,,A*76 
```

请注意，HDOP 可以在 GPGSA 和 GPGGA 字符串中找到，对于这些字符串，它是 1.2

```
$GPGGA,xxxx38.000,xxx1.019145,S,11545.876838,E,1,06,**1.2**,-27.1,M,-29.7,M,,*7A
$GPGSA,A,3,05,18,21,25,29,31,,,,,,,2.1,**1.2**,1.7*35 
```

# .htaccess - 具有动态 url 重写规则的 Facebook PHP SDK

> ID：14432338
> 
> 赞同：0
> 
> 时间：2013-01-21T03:59:28.653
> 
> 标签：.htaccess, mod-rewrite, facebook-php-sdk

这是我的页面用于访问数据库值的示例链接

```
http://www.examlpe.com/product-line2/sales/'dynamic-value' 
```

和 Facebook 身份验证在最后添加状态和代码，并导致身份验证的无限循环

```
http://www.example.com/product-line2/sales/'dynamic-value'?state=foo&code=bar 
```

这个动态值就像 lkji98。MySQL 使用它从数据库中获取所需的值。我的问题是 Facebook 身份验证重定向后如何返回动态 URL

```
http://www.example.com/product-line2/sales/'dynamic-value' 
```

我当前的 .htaccess 文件是

```
Options -Multiviews
Options +FollowSymlinks
RewriteBase /product-line2/sales/
RewriteEngine on
RewriteRule   ^([1-9a-z]*)$ index.php\?u=$1 [L] 
```

index.php 用于从数据库中获取结果。如果我将重定向 url 设置为 index.php，那么它只是重定向到 index.php 并带有状态和代码值

```
http://www.example.com/product-line2/sales/index.php?state=foo&code=bar 
```

facebook 身份验证有效，但动态 url 丢失。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:59:31.387

通过 QSA 解决问题。

```
 Options -Multiviews
 Options +FollowSymlinks
 RewriteBase /product-line2/sales/
 RewriteEngine on
 RewriteRule ^([A-Za-z0-9-]+)?$ index.php\?u=$1 [QSA,L] 
```

# jquery - 我们可以使用 Jquery 移动框架开发 windows phone 8 应用程序吗？

> ID：14432339
> 
> 赞同：1
> 
> 时间：2013-01-21T03:59:46.357
> 
> 标签：jquery, jquery-mobile

我是开发移动应用程序的新手。我可以为 Windows Phone 8 使用 jQuery 移动框架吗？它是否支持 Windows Phone 8 应用程序开发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T03:38:58.623

您可以使用 Jquery mobile 创建 Web 应用程序（移动网站）并使用 Windows Phone 8 Web 浏览器控件作为应用程序的包装器。

对此有一些考虑；

1- Web 浏览器控制不会为您提供 100% 的手机本机浏览器功能，因此您可能会遇到一些性能问题。

2-您的应用程序将无法访问手机的核心功能，例如手机列表、相机和手机处理器的电源。

3- 你可以有一个混合应用程序，你可以用 Jquery mobile 编写一些部分，用 XAML 和 C# 编写一些部分。然后，您可以平衡性能和开发时间。

PhoneGap 非常适合这个用途； [http://www.infragistics.com/community/blogs/mihail_mateev/archive/2013/02/07/phonegap-jquery-mobile-for-windows-phone-8-hybrid-applicarions.aspx](http://www.infragistics.com/community/blogs/mihail_mateev/archive/2013/02/07/phonegap-jquery-mobile-for-windows-phone-8-hybrid-applicarions.aspx)

# maven - 如何使用包含来自 OSGi 片段的非代码资源的 maven 构建 OSGi 包？

> ID：14432346
> 
> 赞同：2
> 
> 时间：2013-01-21T04:00:46.827
> 
> 标签：maven, osgi, bnd, maven-bundle-plugin

我有一个包含非代码资源的 OSGi 片段——它实际上是一个包含一组资源（图像文件等）的 jar 文件——我用 maven 构建的。

我想用 maven 构建另一个包，它依赖于带有资源的片段。也就是说，当这个包中的代码被执行时，我希望我的片段中的资源被加载并可以通过 Java 的 getResources() 命令获得。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:19:48.237

如果你使用 bnd maven bundle 插件构建，那么你可以只做 com.example.resource,com.example.images。这会将资源从 maven 类路径复制到您自己的 jar 中。如果你在某个已知的地方有片段，你也可以做@resources/fragment.jar。@ 指示 bnd 提取给定 jar 的内容并将其包含在包中。

另一种解决方案是让你的包不是一个片段，而是一个普通的包，让它注册一个对象。在运行时，您获得此服务并从中执行 getClass().getResource() ：

```
 Object resource;

 @Reference(target="resource=myresource")
 void setObject(Object o) {
   this.resource = o;
 }

 void foo() {
       URL u = resource.getClass().getResource();
       ...
 } 
```

您在资源包中唯一需要做的就是注册一个服务，您可以使用激活器轻松完成该服务（激活器当然必须驻留在此包中）。或者，您可以使用 BundleTracker 编写扩展程序。您在清单中放置一个标头，然后在找到时注册一个提供资源的服务。最后，您当然也可以在已安装集中找到捆绑包并从那里读取资源。

一般来说，这些基于服务的解决方案比（不幸的是）更知名的类加载器“hacks”灵活得多。

# php - 如何配置 JBoss AS 7 以支持 PHP 和 MySQL？

> ID：14432349
> 
> 赞同：0
> 
> 时间：2013-01-21T04:00:57.933
> 
> 标签：php, mysql, jboss

我有一个主要使用 PHP 和 MySql 开发的 Web 应用程序，但需要将其部署在 JBoss AS 7 服务器上。我已经安装并配置了 JBoss 7.1 并将其与 Eclipse 集成，并将 PHP 应用程序导入到动态 Web 项目中。该网页可以使用 HTML，但是当我尝试访问任何 PHP 页面时，它只显示 PHP 代码。如何部署 PHP5 以解释 PHP，并集成 MySQL 数据源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:48:23.780

由于 JBoss 使用 java 作为服务器端编程，因此您无法在 jboss 中运行 php 代码。您可以使用模块 mod_jk 将 jboss AJP 与 apache 集成，并使用 mysql-connector for JDBC 将 jboss 连接到 mysql。

# iphone - 使用 MPMoviePlayerController 将使辅助触摸消失

> ID：14432350
> 
> 赞同：1
> 
> 时间：2013-01-21T04:01:09.587
> 
> 标签：iphone, ios, xcode, ios6, mpmovieplayercontroller

我编写了一个应用程序，它使用 MPMoviePlayerController 类在子视图中播放一些 .mov 文件。在 iOS5 上，所有的东西都像设计一样工作。

但是，我发现它在 iOS6 上运行时发生了一些奇怪的事情 - 视频开始播放时辅助触摸正在消失，而当视频自动或由用户暂停或停止时，辅助触摸会重新出现。

此外，当我尝试使用以下代码释放播放器并返回父视图时：

```
[player stop];
[player.view removeFromSuperView];

[player release]; 
```

辅助触摸将在我的应用程序中消失，直到我按一次硬主页键并重新进入我的应用程序。

经过一些测试，我尝试在电影播放后保持辅助触摸仍然可见的环绕方法是将呼叫`[player stop]`与匹配`[player play]`，即我必须检查播放器是否已经停止或暂停，当我必须跳过`[player stop]`呼叫时释放播放器。

有没有人有类似的问题或只有我？

# android - 尝试从 Android 中的 EditText 框中获取文本（），但抛出 nullPointerException

> ID：14432352
> 
> 赞同：-1
> 
> 时间：2013-01-21T04:01:37.877
> 
> 标签：android, android-edittext

我正在尝试从两个 EditText 字段中获取文本，然后将其转换为整数值并执行更多基于此的代码。这是我的代码与我的 onCreate 方法的距离

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button go = (Button)findViewById(R.id.button1);
    go.setOnClickListener(new OnClickListener(){

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            EditText timer = (EditText)findByViewId(R.id.editText2);
            EditText beeps = (EditText)findByViewId(R.id.editText1);
            try{
                int length =        Integer.valueOf(timer.getText().toString());
                int beepRepeat = Integer.valueOf(beeps.getText().toString());
                Log.d("onClick","starting alarm");
                initializeAlarm(length, beepRepeat);//(length,    beepRepeat);
            }
            catch (Exception numberFormatException){
                Log.d("Catch","Caught number format exception");
                //Log.d("Catch",timer.getText().toString());
                //Log.d("Catch",beeps.getText().toString());
                initializeAlarm(2,3);
            };
        }
    });
} 
```

但是，我在 Log.d("Catch",timer.getText().toString()); 处抛出了一个错误。为什么我会在那里出错！我所做的就是将文本打印为字符串。这是错误 java.lang.nullPointerException 和线程以未捕获的异常退出 (group=0x40015560)

有谁知道为什么我的 getText() 会抛出 nullPointerException？

编辑：这是我的 activity_main.xml

```
<EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/editText2"
        android:layout_below="@+id/textView2"
        android:ems="10"
        android:inputType="number" />

    <EditText
        android:id="@+id/editText2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/editText1"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="46dp"
        android:ems="10"
        android:inputType="number|numberDecimal" >

    </EditText> 
```

编辑：这是来自 numberFormatException 错误的信息

```
01-21 00:08:53.789: W/System.err(325): java.lang.NullPointerException
01-21 00:08:53.800: W/System.err(325):  at com.example.americancheesecakesupreme5000.MainActivity$1.onClick(MainActivity.java:31)
01-21 00:08:53.800: W/System.err(325):  at android.view.View.performClick(View.java:2485)
01-21 00:08:53.811: W/System.err(325):  at android.view.View$PerformClick.run(View.java:9080)
01-21 00:08:53.811: W/System.err(325):  at android.os.Handler.handleCallback(Handler.java:587)
01-21 00:08:53.820: W/System.err(325):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-21 00:08:53.820: W/System.err(325):  at android.os.Looper.loop(Looper.java:123)
01-21 00:08:53.830: W/System.err(325):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-21 00:08:53.830: W/System.err(325):  at java.lang.reflect.Method.invokeNative(Native Method)
01-21 00:08:53.830: W/System.err(325):  at java.lang.reflect.Method.invoke(Method.java:507)
01-21 00:08:53.840: W/System.err(325):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-21 00:08:53.840: W/System.err(325):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-21 00:08:53.840: W/System.err(325):  at dalvik.system.NativeStart.main(Native Method) 
```

编辑：我的问题是我由 EditText 通过调用 Find **ByViewId**而不是 Find **ViewByID**声明的，无论出于何种原因，它显然编译并运行良好......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T04:16:59.460

导致 NullPointerException 的两种可能性：

1.  您的 activity_mail.xml 没有`editText1`或没有`editText2`声明。请检查您的布局文件。

2.  您的编辑文本出现，但其中一个（或两者）没有任何文本输入。在这种情况下，editText.getText() 将返回 null。您应该在传递数据以进行整数解析之前执行验证。例如：

    ```
    int length = 0;
    if(timer.getText()!=null)
            length = Integer.parseInt(timer.getText().toString()); 
    ```

**编辑：**

请使用`Integer.parseInt()`而不是`Integer.valueOf()`，因为`valueOf()`返回一个`Integer`对象，而不是`int`。

# php - PHP不上传图片但mySQL查询更新

> ID：14432353
> 
> 赞同：0
> 
> 时间：2013-01-21T04:01:45.280
> 
> 标签：php, mysql

我正在创建一个带有图片上传的博客。

这是我的 add_post 函数：

```
function add_post($title, $txt_content, $img_content, $tags, $file_temp, $file_extn){
    $title = mysql_real_escape_string($title);
    $txt_content = mysql_real_escape_string($txt_content);
    $tags = mysql_real_escape_string($tags);
    $file_path = 'simpleblog/resources/images/'.  substr(md5(time()), 0, 20) . '.' . $file_extn;
    move_uploaded_file($file_temp, $file_path);

    mysql_query("INSERT INTO `posts` SET
                        `tag_id` = '$tags',
                        `title` = '$title',
                        `txt_content` = '$txt_content',
                        `img_content` = '". mysql_real_escape_string($file_path) ."',
                        `date_posted` = NOW()");
} 
```

这是 add_post.php 的 php 脚本

```
<?php
include 'resources/init.php';

    if (isset($_FILES['img_content']) === true){
    if(empty($_FILES['img_content']['name']) === true){
        echo '<script type = "text/javascript">window.alert("Please pick a file!");</script>';
    }   else    {
        $allowed = array('jpg','jpeg','gif','png');
        $file_size = $_FILES['img_content']['size'];
        $file_name = $_FILES['img_content']['name'];
        $file_extension= explode('.', $file_name); 
        $file_extn= strtolower(end($file_extension));
        $file_temp = $_FILES['img_content']['tmp_name'];

        $title = $_POST['title'];
        $txt_content = $_POST['txt_content'];
        $tags = $_POST['tags'];

        if(in_array($file_extn, $allowed) === true && isset($_POST['txt_content']) === true){
            add_post($title, $txt_content, $tags, $file_temp, $file_extn);

            $post_id = mysql_insert_id();
            header("Location: index.php?post_id=" . $post_id);
            exit();
        }else if (in_array($file_extn, $allowed)=== false){
            echo '<script type = "text/javascript">window.alert("The only file type allowed are .jpg, .gif, .png");</script>';
        }
    }
}
?> 
```

mySQL 数据库使用图像文件的名称进行更新。但是，是不是把上传的文件搬进去了，有`simpleblog/resources/images/` 什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:59:16.860

首先，这种类型的检查是不对的：

```
 $file_name = $_FILES['img_content']['name'];
 $file_extension= explode('.', $file_name); 
 file_extn= strtolower(end($file_extension)); 
```

如果我用 name 上传文件`image.php.jpg`，您的支票说这是一张图片，但我发送 php-file，并且可以将此文件作为 php-file 请求。

第二，你的函数 add_post 有参数`$img_content`，但在函数调用中你忽略它：

```
 add_post($title, $txt_content, $tags, $file_temp, $file_extn); 
```

**并且move_uploaded_file**函数中的文件路径必须有你的站点根路径

# javascript - JPlayer - IE 中的媒体错误

> ID：14432354
> 
> 赞同：1
> 
> 时间：2013-01-21T04:01:49.337
> 
> 标签：javascript, .htaccess, mime-types, jplayer

当我尝试访问我的 JPlayer 2.2.0 @ IE 时，我遇到了一个奇怪的错误。

使用 Chrome 和 FF 我没有问题，但是当我尝试运行 @ IE10/IEtester 时出现此错误：

**“无法加载媒体 URL。请检查媒体 URL 是否有效。”**

我在这里发现了一些有类似问题的线程，但我不知道为什么这不起作用。

我的播放器：[http ://www.fbnet.org/barra/barra.php](http://www.fbnet.org/barra/barra.php)

我的.htaccess：

```
AddType audio/mpeg mp3
AddType audio/mp4 m4a
AddType audio/ogg ogg
AddType audio/ogg oga
AddType audio/webm webma
AddType audio/wav wav 
```

我的服务器允许 .htaccess 更改，所以很好。

然后我测试了这个东西@我的 JS 文件：

```
$(document).ready(function(){
    $("#jquery_jplayer_1").jPlayer({
        ready: function (event) {
            $(this).jPlayer("setMedia", {
                mp3:"http://62.75.159.237:8888/;stream/1"
            }).jPlayer("play");
        },
        swfPath: "http://www.fbnet.org/jp/js/",
        supplied: "mp3",
        solution: "html,flash",
        errorAlerts:true,
        wmode: "window"
    });         
}); 
```

切换**解决方案：“html，flash”**到**“flash，html”**和播放器工作@ IE。

问题是：我希望将 HTML 作为第一个选项。

我在这里想念什么？有任何想法吗 ？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T15:07:04.777

我知道这是用于视频的，但是我遇到了这样的问题，所以如果您可以查看 IE 中的 Inspector 是否正在查找文件，然后将 ../ 添加到它.. 可能将 .fla 文件添加到 IE 并添加 . ./ 在代码中，就像我的前任一样。为flv。

希望没关系，我只是添加一些信息，公元前。我在 IE 中遇到了同样的问题，但找到了一个搜索网络的修复程序。

可以看到IE有很多问题，搜索后“无法加载媒体URL”，我发现如果我对IE使用FLV fil并对路径做了../，那么它将适用于IE。

所以我从这个开始。

```
<script type="text/javascript">
        //<![CDATA[
        $(document).ready(function () {

            $("#jquery_jplayer_1").jPlayer({
                ready: function () {
                    $(this).jPlayer("setMedia", {
                        mp4: "video/Soccer.mp4",
                        webmv: "video/Soccer.webm",
                        flv: "video/Soccer.flv",
                        m4v: "video/Soccer.m4v",
                        ogv: "video/Soccer.ogv",
                        poster: "video/Soccer.png"
                    });
                },
                //error: function (event) {
                   // console.log(event.jPlayer.error);
                   // console.log(event.jPlayer.error.type);
                //},
                swfPath: "add/jplayer.swf",
                errorAlerts: true,
                supplied: "mp4, webmv, flv, m4v, ogv",
                solution: "html,flash",
                size: {
                    width: "640px",
                    height: "360px",
                    cssClass: "jp-video-360p"
                },
                smoothPlayBar: true,
                keyEnabled: true
            });

            $("#jplayer_inspector").jPlayerInspector({ jPlayer: $("#jquery_jplayer_1") });
        });
        //]]>
</script> 
```

这在 IE 中不起作用，但在 FF 和 Safari、iPhone/iPad 中不起作用。最后，这在 FF、Safari、IE 和 iPhone/iPad 中 100% 有效……

```
<script type="text/javascript">
    //<![CDATA[
    $(document).ready(function () {

        $("#jquery_jplayer_1").jPlayer({
            ready: function () {
                $(this).jPlayer("setMedia", {        
                    mp4: "video/Soccer.mp4",
                    webmv: "video/Soccer.webm",  //WEBM. works for FF
                    flv: "../video/Soccer.flv",  //FLV. works for IE, but u need ../ in front of the path...
                    m4v: "video/Soccer.m4v",  //M4V. works for FF, Saf, iPhone/iPad
                    ogv: "video/Soccer.ogv",                   
                    poster: "video/Soccer.png"
                });
            },
            //error: function (event) {
               // console.log(event.jPlayer.error);
               // console.log(event.jPlayer.error.type);
            //},
            swfPath: "add/jplayer.swf",
            errorAlerts: true,
            supplied: "mp4, webmv, flv, m4v, ogv",
            solution: "html,flash",
            size: {
                width: "640px",
                height: "360px",
                cssClass: "jp-video-360p"
            },
            smoothPlayBar: true,
            keyEnabled: true
        });

        $("#jplayer_inspector").jPlayerInspector({ jPlayer: $("#jquery_jplayer_1") });
    });
    //]]> 
```

# c# - protobuf.net 继承 - 使用 ImplicitFields = ImplicitFields.AllFields

> ID：14432357
> 
> 赞同：3
> 
> 时间：2013-01-21T04:02:15.727
> 
> 标签：c#, protobuf-net

我有一个用 [ProtoContract(ImplicitFields = ImplicitFields.AllFields)] 装饰的基类

为了能够序列化派生类，我只需要添加 ProtoInclude 吗？由于派生类字段没有被序列化 - 继承是否仅适用于 Protomember？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T04:16:41.567

Protobuf 不完全支持继承，您需要在基类中进行一些修饰。

```
[
ProtoContract(),
ProtoInclude(100, typeof(Peer)),
ProtoInclude(101, typeof(Instruction))
]
class Base {...}

[ProtoContract()]
class Peer: Base
{ ... }

[ProtoContract()]
class Instruction: Base
{ ... } 
```

对于仅通过基类提供属性的派生类。

# php - 通过 web vs CLI 调用 PHP exec()

> ID：14432359
> 
> 赞同：2
> 
> 时间：2013-01-21T04:02:22.740
> 
> 标签：php, web, exec, command-line-interface

我正在尝试在 PHP 中使用 exec()，当通过 Web 浏览器和命令行 shell 使用它时，我得到了不同的结果。

简单的事情：

`<?php exec('mount 10.0.0.1:/mnt/test /home/user/test', $output) ?>`

从 Web 浏览器调用它不会导致任何内容被挂载并通过命令行 (php-cli) 运行它会导致挂载成功执行。也没有错误返回到 $output 数组。所以我没有什么可以通过的。我以同一个用户的身份运行 web 和 cli，所以这不应该是权限问题。SElinux 被禁用，因此不会阻止任何内容。防火墙也是如此 - 也被禁用。

如何使 PHP exec() 在 Web 浏览器和命令行中的行为方式相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T04:46:08.380

您只能以 root 身份挂载分区，也许将 www-data（我假设那是运行 apache 的用户）添加到 sudoers 可以解决问题，但它会给您带来很大的安全漏洞。但是，由于它是一项服务，因此您无法编写密码，因此您必须告知不要向该用户询问密码。

将此添加到您的 sudoers 的底部：

```
www-data ALL=NOPASSWD: ALL 
```

并将命令用作

```
<?php exec('sudo mount 10.0.0.1:/mnt/test /home/user/test', $output) ?> 
```

**显然，这是一个前所未有的安全漏洞。**

避免它的一种方法可能是使用队列来放置作业并使用服务来处理它，该服务验证作业是否安全并在必要时安装。

一个不错的具有 php 接口的队列是[beanstalk](http://kr.github.com/beanstalkd/)

# c# - Windows Phone 8(WP8) C# 不安全代码？

> ID：14432361
> 
> 赞同：4
> 
> 时间：2013-01-21T04:02:26.993
> 
> 标签：c#, windows-phone-8, unsafe, c++-cx

**编辑：您可以使用不安全的代码...您只需手动编辑 proj 文件。**

当我可以在手机上使用本机 C++ 代码时，为什么或为什么 WP8 上的 C# 不支持不安全代码（我没想到会这样）？我的意思是 rly 来吧，我对微软试图强迫 C# 进入的东西感到非常失望。

未来有没有 MS 计划在 WP8 上支持这一点？我将着色器常量从 C# 传递到 C++ 并使用不安全的代码来优化此过程，但在 WP8 上，与 PC 相比，我将被迫在速度慢得多的设备上以某种缓慢的方式执行此操作，这让这非常令人沮丧。

作为将vector4传递给C ++的示例，我会这样做：

```
public unsafe void Set(Vector4 value)
{
    com.Set((int)&value, sizeof(Vector4));
} 
```

然后在 C++ 中：

```
void ShaderVariableCom::Set(__int32 data, int size)
{
    void* ptr = (void*)data;
    if (vertexOffset != -1) memcpy(vertexBytes + vertexOffset, ptr, size);
    if (pixelOffset != -1) memcpy(pixelBytes + pixelOffset, ptr, size);
} 
```

没有不安全的代码，任何人都有一个很好的快速方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:10:01.217

我找到了解决方案。

对于简单的向量类型，只需执行以下操作：

```
Marshal.StructureToPtr(vector, nativePtr, false); 
```

对于数组来说：

```
var data = new Vector[10];
int size = Marshal.SizeOf(data[0]);
for (int i = 0; i != data.Length; ++i)
{
    Marshal.StructureToPtr(data[i], nativePtr + (size * i), false);
} 
```

如果有人有更好的答案，那也很高兴知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:19:55.377

这正是 C++/CX 需要解决的问题（同时保持沙箱的完整性）。

例如，将 int 数组从 C# 传递到 C++ `Platform::Array<int>`，在 C++/CX ref 类或接口定义中使用。查看 MSDN 以了解如何使用此类型的详细信息。

( [http://msdn.microsoft.com/en-us/library/windows/apps/hh700131.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh700131.aspx) )

# microsoft-metro - WinJS IndexedDB 实现 - 如何在应用程序版本更改时使用相同的数据库

> ID：14432363
> 
> 赞同：1
> 
> 时间：2013-01-21T04:02:38.117
> 
> 标签：microsoft-metro, winjs, indexeddb

我正在构建一个 WinJS Metro 应用程序，它将在 Surface 和 Win8 平板电脑中运行。在发送到服务器之前使用 IndexedDB 存储本地数据。对于分发，我们可能会使用 SideLoading 或企业分发并避免使用 Store。为了测试，我正在创建 APP 包并发送给我的同事。 **问题 1**：每次我安装 app-package 时，它​​都会重新创建数据库和对象存储，而我想使用现有的数据库和对象存储来保留旧数据。 **问题 2** - 我的意图是创建一个对象存储结构，捆绑一些主数据并与安装包一起分发。我现在可以通过代码在一定程度上实现这一点，但无法分离出数据库组件。 **问题 3**- 我还没有为win8找到一个好的索引数据库查看器，我可以在其中查看所有数据库、对象存储、结构和数据。

提前致谢 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:33:24.147

我已经围绕 indexeddb 编写了一个库，其中包含一种用于调试的查看器。您可以在 codeplex：[linq2indexed](http://linq2indexeddb.codeplex.com)上找到它。它还带有一个 nuget 包。我还写了一篇关于如何使用它的[帖子。](http://www.kristofdegrave.be/2012/07/linq2indexeddb-debugging-indexeddb.html)

我也有一个适用于网络的查看器，但尚未将其移植到 Windows 8。也许你可以试一试，我认为这并不难。您还可以在 codeplex 上通过 nuget en 找到查看器。有关查看器的更多信息，请查看此[帖子](http://www.kristofdegrave.be/2012/11/indexeddbviewer-take-look-inside-your.html)。

我希望这可以进一步帮助你。欢迎任何评论，改进，...。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T05:35:30.570

因此，您要在这里解决一些问题：

## 问题 1

通过侧面加载应用程序，它将创建一个新的应用程序安装，进而创建一个新的应用程序被提供的路径。由于 IndexedDB 与应用程序的*域*相关联，因此它将被丢弃（WinJS 有点特殊，因为它在技术上不是一个新域，但它是一个新的位置，它仍然可以从中提供服务）。

据我了解，由于应用程序包的更新方式，商店安装应用程序的方式不会触发这种情况。不幸的是，我认为这是一个你无法避免侧载包的问题。

## 问题 2

[微软实际上在他们的博客](http://blogs.msdn.com/b/ie/archive/2012/01/25/debugging-indexeddb-applications.aspx)上提供了一个用于调试 IndexedDB（它是一个小型 JS 库）的 UI 。我个人没有使用过它，但如果没有其他适合您的包装器，这将是一个很好的起点。

## 问题 3

要进行初始数据库加载，我将执行以下过程：

*   监听`onupgradeneeded`事件
*   在事件处理程序中读取应用程序提供的 JSON 文件，或将数据嵌入 JS 文件中（取决于大小）

这样，您可以为不同版本的数据库（甚至应用程序）拥有不同版本的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T16:20:17.747

要“预捆绑”索引数据库数据，我建议您创建一个批量导入器，以 JSON 格式从磁盘加载数据，然后对其进行迭代，根据需要添加数据。Kristof 的 linq2indexed 或我的[db.js](http://github.com/grork/db.js)迭代可以很好地解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T02:54:06.653

看起来 indexedDB 实例已附加到应用程序的发布。例如，在同一台机器（我的开发箱）中，我有一个版本 1.0.0.5 和 1.0.0.7。两者都使用不同的 indexeddb 存储和不同的数据集。我也卸载了任何与版本相关的数据库也被卸载。另外我认为我无法在覆盖模式下安装相同的版本（如果我错了，请纠正我）。虽然我确实了解这种实现的底层逻辑，但这本质上意味着我无法向我的应用程序发布补丁，因为在这种情况下将初始化持久数据。

我可以使用 SQLite 做到这一点吗？如果是，我需要遵循那条路线......

# c++ - 这会正确释放数据吗？

> ID：14432366
> 
> 赞同：0
> 
> 时间：2013-01-21T04:03:53.717
> 
> 标签：c++, memory, iterator, memory-leaks, allocation

我只想知道这是否会正确释放数据。

伪代码：

```
std::map<std::string, ClassPointer*>::iterator tempIterator;

    for(tempIterator = directory.begin(); tempIterator < directory.end; 
        tempIterator++)
        delete &tempIterator; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T04:30:13.790

由于目录存储原始指针，因此您有责任在必要时删除这些指针。

```
std::map<std::string, ClassPointer*>::iterator tempIterator;

for(tempIterator = directory.begin(); tempIterator < directory.end(); 
    tempIterator++)
{
    delete tempIterator->second;
} 
```

始终，更好的解决方案是在 STL 容器中使用智能指针：

```
 std::map<std::string, std::shared_ptr<ClassPointer>> directory; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T04:06:24.013

如果`ClassPointer*`用 分配`new[]`，这段代码可能无法正常工作。使用智能指针是一个更好的主意。

仅供参考，应该是

```
for (auto tempIterator = directory.begin(); tempIterator != directory.end(); 
    ++tempIterator) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T04:11:54.397

正确的方法是：

```
for (
    std::map<std::string, ClassPointer*>::iterator it = directory.begin()
  , last = directory.end()     // avoid call to end() every time
  ; it != last                 // use operator != (NOT operator <)
  ; ++it                       // prefer prefix increment for iterators!
  ) delete it->second;         // iterator points to std::pair actually! 
```

或 C++11 方式：

```
for (auto& item : directory) delete item.second; 
```

顺便说一句，这只会释放一个类指针，而不是一个映射元素！（因此地图中的指针无效，但项目仍保留在地图中）

# android - Android片段强制关闭错误？

> ID：14432370
> 
> 赞同：0
> 
> 时间：2013-01-21T04:04:22.613
> 
> 标签：android

当我在 android 3.0 及更高版本中运行我的应用程序时，我正在处理 android 片段，它工作正常，但是当我尝试在 3.0 以下运行时，它给出了 forceclose 错误，我不明白出了什么问题。下面是日志猫错误和我的代码。

如果在智能手机中运行我的应用程序，那么我需要在另一个窗口中显示视图而不打开新活动。你能指导我如何做到这一点。它在平板电脑上运行良好。我正在发送平板电脑的工作屏幕截图。

```
01-21 09:29:24.272: E/AndroidRuntime(398): FATAL EXCEPTION: main
01-21 09:29:24.272: E/AndroidRuntime(398): java.lang.NoSuchMethodError: com.example.fragment_demo.MainActivity.getFragmentManager
01-21 09:29:24.272: E/AndroidRuntime(398):  at com.example.fragment_demo.MainActivity.onCreate(MainActivity.java:19)
01-21 09:29:24.272: E/AndroidRuntime(398):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-21 09:29:24.272: E/AndroidRuntime(398):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
01-21 09:29:24.272: E/AndroidRuntime(398):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-21 09:29:24.272: E/AndroidRuntime(398):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-21 09:29:24.272: E/AndroidRuntime(398):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-21 09:29:24.272: E/AndroidRuntime(398):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-21 09:29:24.272: E/AndroidRuntime(398):  at android.os.Looper.loop(Looper.java:123)
01-21 09:29:24.272: E/AndroidRuntime(398):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-21 09:29:24.272: E/AndroidRuntime(398):  at java.lang.reflect.Method.invokeNative(Native Method)
01-21 09:29:24.272: E/AndroidRuntime(398):  at java.lang.reflect.Method.invoke(Method.java:507)
01-21 09:29:24.272: E/AndroidRuntime(398):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-21 09:29:24.272: E/AndroidRuntime(398):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-21 09:29:24.272: E/AndroidRuntime(398):  at dalvik.system.NativeStart.main(Native Method)

public class MainActivity extends Activity { 
    Button b1, b2, b3;   
    @Override   
    public void onCreate(Bundle savedInstanceState)
    {       
        super.onCreate(savedInstanceState); 
        setContentView(R.layout.main_fdemo);     
        FragmentManager fm = getFragmentManager();   
        FragmentTransaction ft = fm.beginTransaction();  
        StartFragment sf = new StartFragment();   
        ft.add(R.id.myFragment, sf);     
        ft.commit();      
        b1 = (Button) findViewById(R.id.button1);     
        b2 = (Button) findViewById(R.id.button2);   
        b3 = (Button) findViewById(R.id.button3); 

        b1.setOnClickListener(onButtonClick);  
        b2.setOnClickListener(onButtonClick);  
        b3.setOnClickListener(onButtonClick); 
    }   
    Button.OnClickListener onButtonClick = new Button.OnClickListener(){ 
        @Override    
        public void onClick(View v) 
        {        
            // TODO Auto-generated method stub     
            Fragment fragment = null;     
            if(v == b1){    
                fragment = new Fragment1();   
            }else if(v == b2){     
                fragment = new Fragment2();    
            }else if(v == b3){       
                fragment = new Fragment3();   
            }        
            FragmentTransaction ft = getFragmentManager().beginTransaction();
            ft.replace(R.id.myFragment, fragment);    
            ft.commit();  
        }   
    };

}

main_fdemo.xml:-

<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Fragment 1" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Fragment 2" />

        <Button
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Fragment 3" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/myFragment"
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_weight="3" >
    </LinearLayout>

</LinearLayout>

public class StartFragment extends Fragment
{     
    @Override    
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {      
        // TODO Auto-generated method stub      
        return inflater.inflate(R.layout.start_fragment, container, false); 
    }
}

start_fragment.xml:-

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#ffffff"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center"
        android:text="Select the Fragments"
        android:textSize="20dp" />

</LinearLayout>

public class Fragment1 extends Fragment
{     
    @Override    
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {      
        // TODO Auto-generated method stub      
        return inflater.inflate(R.layout.fragment_1, container, false); 
    }
}

fragment_1.xml code:-

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#F97C7C"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center"
        android:text="Select the Fragments"
        android:textSize="20dp" />

</LinearLayout> 
```

![在此处输入图像描述](../Images/f34e3a7cd11e47720fcbd6726b023b58.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T04:09:10.247

请参考安卓文档。Android`Fragment`仅支持 3.0 及更高版本。所以低于 3.0 的片段和片段管理器将不可用。如果您想使用片段和片段管理器，请使用 Android 兼容库并[参考支持库](http://developer.android.com/tools/extras/support-library.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T04:08:09.543

您需要使用 Android 支持库来向后兼容 API 4。使用该库时，您将使用 getSupportFragmentManager() 等支持方法而不是 getFragmentManager()。 [http://developer.android.com/training/basics/fragments/support-lib.html](http://developer.android.com/training/basics/fragments/support-lib.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T04:10:25.593

您可以使用 Android 支持库在 3.0 以下设备中添加片段支持检查此链接 [http://developer.android.com/training/basics/fragments/support-lib.html](http://developer.android.com/training/basics/fragments/support-lib.html)

# generics - Go（语言）通用数字类型/接口

> ID：14432374
> 
> 赞同：5
> 
> 时间：2013-01-21T04:04:53.977
> 
> 标签：generics, interface, go

我正在尝试在 Go 中编写一个使用“通用”类型计算方程的包。具体来说，我想实现runge kutta 5 近似。

此近似计算仅使用 at 的值、开始时间、步长和微分方程在该点处的（未知）函数的值，该微分方程的`y`形式为where is some function。`t0 + h``y``t0``t0``h``dgl``dy/dt = g(t,y)``g`

在使用标量类型时，这种近似的行为与使用向量（甚至矩阵）时的行为完全相同。更一般地说：它适用于可以添加/减去相同类型的值并且可以通过标量缩放的所有内容（我使用`float64`）

所以我试图将其表达为一个 Go 接口：

```
type Numeric interface {
    Add(rhs Numeric) Numeric
    Sub(rhs Numeric) Numeric
    Mul(rhs float64) Numeric
} 
```

但是当我尝试“实现”这个接口时，由于参数类型，我遇到了麻烦：

```
type Vec6F struct {
    x, y, z float64
    vx, vy, vz float64
}

func (lhs *Vec6F) Add(rhs *Vec6F) rk5.Numeric {
    result := new(Vec6F)
    result.x = lhs.x + rhs.x
    result.y = lhs.y + rhs.y
    result.z = lhs.z + rhs.z
    result.vx = lhs.vx + rhs.vx
    result.vy = lhs.vy + rhs.vy
    result.vz = lhs.vz + rhs.vz
    return result
} 
```

这给了我错误

```
cannot use result (type *Vec6F) as type rk5.Numeric in return argument:
        *Vec6F does not implement rk5.Numeric (wrong type for Add method
                have Add(*Vec6F) rk5.Numeric
                want Add(rk5.Numeric) rk5.Numeric 
```

也就是说，一方面对我来说绝对合乎逻辑（因为 rhs 可能是另一个实现 Numeric 的对象）

但另一方面：我如何在 Go 中表达类似的东西？在 C++ 中，我可以改用运算符重载，但这在 go 中是不可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:51:25.470

为了通用，您的`Add`方法必须带一个`Numeric`参数。处理这个问题的正常方法是使用这样的类型断言（[在操场上](http://play.golang.org/p/R64gIl-Nck)）

```
func (lhs *Vec6F) Add(_rhs Numeric) Numeric {
    result := new(Vec6F)
    rhs := _rhs.(*Vec6F) // type assertion - will panic if wrong type passes
    result.x = lhs.x + rhs.x
    result.y = lhs.y + rhs.y
    result.z = lhs.z + rhs.z
    result.vx = lhs.vx + rhs.vx
    result.vy = lhs.vy + rhs.vy
    result.vz = lhs.vz + rhs.vz
    return result
} 
```

如果您想要在不同类型之间进行转换，您也可以使用类型开关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:49:38.647

事实上，go 中不支持泛型。如果你想让一个类型实现一个接口，方法的原型需要完全匹配：你需要`func (lhs *Vec6F) Add(rhs Numeric) Numeric`.

这是使用类型断言编写此方法的尝试：

```
func (lhs *Vec6F) Add(rhs Numeric) Numeric {
    vrhs := rhs.(*Vec6F)
    result := new(Vec6F)
    result.x = lhs.x + vrhs.x
    result.y = lhs.y + vrhs.y
    result.z = lhs.z + vrhs.z
    result.vx = lhs.vx + vrhs.vx
    result.vy = lhs.vy + vrhs.vy
    result.vz = lhs.vz + vrhs.vz
    return result
} 
```

它可以编译并且在使用正确类型的参数调用时应该可以工作，但是，我会说这是一种滥用。

没有什么能阻止您（除了运行时错误）使用此方法将向量添加到标量，因为它们都将实现`Numeric`. 最后，您不会从使用接口抽象中获得任何收益。

在这种情况下，go 哲学将决定使用特定于类型的方法/函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T07:50:58.547

您遇到了两个问题。

1.) 它没有编译，并抱怨接口不匹配的原因是因为 Vec6F 不满足 rk5.Numeric 的函数签名。返回值和输入参数都必须匹配类型。

[http://play.golang.org/p/kc9V9EXxJq](http://play.golang.org/p/kc9V9EXxJq)解决了这个问题，但创建了一个新问题......

2.) 为了使方法签名匹配，以便 Vec6F 满足 Numeric 的签名，它破坏了对属性值执行数字操作的能力。这是因为接口只有方法，没有属性。

在您的用例中，Numeric 接口提供一个访问器方法是否有意义，该方法将返回一个矩阵数组，然后接收器将执行 Add|Sub|Multi ？这可能会使每个接口实现的方法中需要做的事情变得复杂，但我认为这会让你得到你想要的。

# javascript - 如何根据数据库值在组中设置默认选择的单选按钮？

> ID：14432377
> 
> 赞同：1
> 
> 时间：2013-01-21T04:05:46.207
> 
> 标签：javascript, jquery, html, mysql

html:

```
<label><input type="radio" name="league" value="Bronze">Bronze</label>
<label><input type="radio" name="league" value="Silver">Silver</label>
<label><input type="radio" name="league" value="Gold">Gold</label>
<label><input type="radio" name="league" value="Platinum">Platinum</label>
<label><input type="radio" name="league" value="Diamond">Diamond</label>
<label><input type="radio" name="league" value="Master">Master</label>
<label><input type="radio" name="league" value="Grand Master">Grand Master</label> 
```

我有一个数据库列，它将他们选择的一个保存为 VARCHAR（我应该使用其他东西吗？）。如何设置它以便选择与数据库中存储的内容一致的单选按钮？

我也可以将其更改为下拉菜单，但我仍然需要知道如何设置选定的值。

这是我尝试过的，但由于某种原因它似乎不起作用。

```
<?php
     $leagues = array('Bronze', 'Silver', 'Gold', 'Platinum', 'Diamond', 'Master', 'Grand Master');
     foreach ($leagues as $key=>$value) {
          $selected = ($value == $user_data['league'] ? ' selected="selected"' :  '');
          echo '<label><input type="radio" name="league"' . $selected . ' value="' . $value . '">' . $value . '</label> ';
     }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:26:11.487

首先，从您的数据库中获取存储的值。您使用的是什么服务器端语言？

编辑：添加 php.ini

```
<?php
 $leagues = array('Bronze', 'Silver', 'Gold', 'Platinum', 'Diamond', 'Master', 'Grand Master');
 foreach ($leagues as $key=>$value) {
      $selected = ($value == $user_data['league'] ? ' checked="checked"' :  '');
      echo '<label><input type="radio" name="league"' . $selected . ' value="' . $value . '">' . $value . '</label> ';
 }
?>

<script>
var value = <? /* Your PHP code to get the stored value from the db...*/ ?>;

/* radioOptions will store the array of radio buttons.*/
var radioOptions = document.getElementsByName("league");
var i;
for (i = 0; i < radioOptions.length; i++) {
    /* Check if the value of the radio option matches the stored value.*/
    if (radioOptions[i] === value) {
        radioOptions[i].checked = true;
        /* No need to check the others.*/
        break;
    }
}    
</script> 
```

# iphone - 如何在放大点向 UIView 添加按钮？

> ID：14432378
> 
> 赞同：0
> 
> 时间：2013-01-21T04:05:47.527
> 
> 标签：iphone, ios, uiview, uiscrollview, pinchzoom

我想`UIView`在放大到指定点后添加一个按钮，我有一个`UIView`打开`UIScrollview`，借助`UITapGestureRecognizer`我可以点击视图并放大视图`UIScrollviewDelegates`，但现在的问题是如何将按钮添加到缩放的看法。

它就像展示销到`MKMapView`.,

这是我的代码 [http://pastebin.com/3zjgbzA1](http://pastebin.com/3zjgbzA1) 这是我的`UIView` ![在此处输入图像描述](../Images/d8ce668339d08c790bb63d5eccb36129.png)

我需要将按钮添加到此缩放级别 ![在此处输入图像描述](../Images/04ed50a69294077ca71f69339b037099.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T04:41:07.620

要在触摸位置的滚动视图上添加按钮，您需要找到与滚动视图相关的触摸点，而不是在 self.view 上。

为了找到接触点，您可以使用以下语句：

CGPoint touchPoint = [tapgesture locationInView:scroller];

谢谢

# azure - 如何将较大的文件上传到 azure hadoop 集群？

> ID：14432381
> 
> 赞同：0
> 
> 时间：2013-01-21T04:06:18.423
> 
> 标签：azure, hadoop, mapreduce

如何将较大的文件上传到 azure hadoop 集群？

有没有办法通过远程桌面连接浏览到 hadoop 集群中的 /example/apps 目录，以便我可以复制文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T20:06:15.087

HDInsight 使用 Windows Azure Blob 存储 (WASB)。有几种方法可以将数据上传到 WASB：

*   复制
*   Windows Azure PowerShell
*   第三方工具包括 Azure Storage Explorer、Cloud Storage Studio 2、CloudXplorer 等。
*   Hadoop 命令行。您必须先启用 RDP。

有关详细信息，请参阅[http://www.windowsazure.com/en-us/manage/services/hdinsight/howto-upload-data-to-hdinsight/](http://www.windowsazure.com/en-us/manage/services/hdinsight/howto-upload-data-to-hdinsight/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:31:26.483

通过 HTTP/HTTPS 将文件复制到 Azure Blob 存储，然后通过指向已上传文件的 HTTP URL 从 Azuure 上的 Hadoop (HDInsight) 中对它们进行 MapReduce。

干杯

# jquery - 根据屏幕宽度隐藏正确的内容

> ID：14432388
> 
> 赞同：0
> 
> 时间：2013-01-21T04:07:15.207
> 
> 标签：jquery

当我在文件中使用以下代码时。

```
var width=jQuery(window).width();
    if(width<980){
        jQuery('.std .home-right').hide();
    }else{
     jQuery('.std .home-right').show();
     } 
```

当我将窗口宽度调整为小于 980 像素时，.std .home-right 无法隐藏，当我将窗口宽度小于 980 像素调整为大于 980 时，.std .home-right 无法显示。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T04:14:05.273

对于您的情况，在样式表中使用宽度检测而不是 jquery 可能更简单：

在您的 CSS 中添加以下内容：

```
@media all and (min-width: 980px) {  .std .home-right { display:none; } }

@media all and (max-width: 979px) {   .std .home-right { display:block; } } 
```

希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T04:14:09.807

您需要监视调整大小事件。

```
$(window).resize(function () {
  var width = $(window).width();
  console.log(width);
  if (width < 500) {
    $('.std .home-right').hide();
  } else {
    $('.std .home-right').show();
  }
}); 
```

[http://jsfiddle.net/C2Kx9/](http://jsfiddle.net/C2Kx9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T04:14:12.427

添加`$(window)`到调整大小事件，如下所示：

```
function setWidth(){
    var width = $(window).width();
    if(width < 980){
        jQuery('.std .home-right').hide();
        console.log(1);
    } else {
        jQuery('.std .home-right').show();
        console.log(2);
    }
}
$(document).ready(function(){
    setWidth();
});
$(window).resize(function(){
    setWidth();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T04:14:52.273

您所做的是（希望文档准备好）只需设置浏览器的宽度。如果你希望它在调整大小的同时工作，你需要做这样的事情；

```
$( window ).resize( function () {

    var width = $( window ).width();

    if ( width < 980 ) {
        $( '.std .home-right' ).hide();
    } else {
        $( '.std .home-right' ).show();
    }

}); 
```

这将导致浏览器隐藏和显示所需的元素。但在您继续将代码转储之前，我建议您先看看这个页面

> [http://benalman.com/code/projects/jquery-throttle-debounce/examples/throttle/](http://benalman.com/code/projects/jquery-throttle-debounce/examples/throttle/)

resize 事件会产生很多事件，这通常被认为是一件坏事。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T04:22:42.850

您应该像这样在窗口调整大小函数中编写此代码

```
$(window).resize(function () {
var width=jQuery(window).width();
    if(width<980){
        jQuery('.std .home-right').hide();
    }else{
     jQuery('.std .home-right').show();
     }
}); 
```

这可能对你有用

# ios - 将图像拉伸为视图的背景

> ID：14432392
> 
> 赞同：0
> 
> 时间：2013-01-21T04:08:19.417
> 
> 标签：ios

我制作了一个自定义 UITableViewCell 并且它的高度是动态的，我想拉伸图像以适应它的高度，如何使用 UIEdgeInsetsMake 呢？我尝试了很多 EdgeInsets 并且视图看起来很奇怪，它似乎只是垂直重复图像。

```
UIImage *cell_bg=[UIImage imageNamed:@"cell_bg"];

cell_bg=[cell_bg resizableImageWithCapInsets: UIEdgeInsetsMake(0, 10, 0, 300)];

UIImageView *backgroundView=[[UIImageView alloc]initWithImage:cell_bg];

self.backgroundView=backgroundView;
[backgroundView release]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:36:36.583

您可以尝试如下：

[[UIImage imageNamed:@"yourimage.png"] stretchableImageWithLeftCapWidth:yourvalue topCapHeight:yourvalue];

谢谢

# ios - 如何使用 IBAction 将新内容加载到 UITableView 中？

> ID：14432393
> 
> 赞同：-1
> 
> 时间：2013-01-21T04:08:23.503
> 
> 标签：ios, objective-c, uitableview, load, updates

仅供参考 - 新手`iOS`开发人员在这里。

我当前的设置是一个`UIViewController`带有 UIView 的内部，然后是一个`UITableView`内部的`UIVIew`. 所以事情是这样的……

```
UIViewController --> UIView --> UITableView 
```

这样做的原因是因为我用 tableview 包装了其他元素。将`UIViewController`动态内容加载到表格视图中。我有一个分段控件，我想用它来切换表格视图中的内容。

我读过一些东西`[table reload]`，`[table beginUpdate]`但不明白如何使用它。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T04:17:38.150

您需要为此 `UIControlEventValueChanged`事件实现一个方法`UISegmentedControl`。

```
[yourSegmentedControl addTarget:self action:@selector(segmentChanged:) forControlEvents:UIControlEventValueChanged]; 
```

并实现如下`segmentChanged`方法：

```
- (void)segmentChanged:(id)sender
{
   UISegmentedControl *mySegment = (UISegmentedControl *)sender;

   switch ([mySegment selectedSegmentIndex])
   {
       case 1:
           //load first contents
       break;
       case 2:
          //load second contents   
       break;
       default:
       break;
   }
   [self.yourTableView reloadData];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T04:14:07.563

例如，

你的`UIView`named`*myView`和你的`UITableView`named `*myTableView`，你想重新加载的时间`tableview`，在你的`UIViewController`，你应该`tableview`像这样重新加载：

```
[self.myView.myTableView reload]; 
```

并确保`tableview's` `delegate`和`dataSourceDelegate`设置正确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T04:18:29.820

好的，所以`[table reloadData]`将重新加载数据（因此，如果您更改数据并希望使用必要的数据更新表格，请调用此命令），但在您调用该命令后，请确保调用`[table setNeedsDisplay]`以刷新 UI。`[table beginUpdates]` 开始一系列插入、删除或选择接收器的行和部分的方法调用。您以`[table endUpdates];`

确保将表格视图的`dataSource`和设置`delegate`为 self，这可以通过 xib 和以编程方式完成，如下所示：

```
[table setDelegate: self]; 
```

或者

```
[table setDataSource: self]; 
```

如前所述：

调用此`delegate`方法`UISegmentedControl`

```
 - (void)segmentedControl:(UISegmentedControl*)segmentedControl didSelectIndex:(NSUInteger)selectedIndex
{
   if(selectedIndex == 0)
   {
     // Update the data
   }
   else if(selectedIndex == 1)
   {
     // Update the data
   }

   [table reloadData];
   [table setNeedsDisplay];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T05:08:21.900

需要在 ViewController.h 文件中为 tableview 设置委托和数据源，例如

UITableViewDataSource，UITableViewDelegate。

在 ViewController.m 文件中实现委托和数据源方法

```
[tableview SetDelagate:self];

[tableview SetDatasource:self]; 
```

实现委托方法。

并使用重新加载表

```
[tableView reloadData]; 
```

方法。

# javascript - 从内页隐藏横幅 - magento

> ID：14432395
> 
> 赞同：1
> 
> 时间：2013-01-21T04:08:34.067
> 
> 标签：javascript, magento

我想从内页隐藏横幅，但我需要在主页中显示它

我已将此横幅放在 left-col.phtml

所以我尝试使用 javascript 识别基本 url。如果它在基本 url 中显示横幅，否则隐藏它

像这样

```
<script type="text/javascript">

if([removed].pathname !="/")
{

var ele = document.getElementById("flashcontent");
ele.style.display = 'none';

}
else
{

}

</script> 
```

但它不起作用。任何人都有一个想法来做到这一点。

注意：我在 CMS>Pages 中没有主页。这是购买的模板

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T05:21:34.027

检查此代码。

```
<?php
if($this->getUrl('') == $this->getUrl('*/*/*', array('_current'=>true, '_use_rewrite'=>true))):
    echo "Homepage";
else:
    echo "Not in Homepage";
endif;
?> 
```

这对你会有帮助。

# php - 将 ajax 响应附加/预先附加到 div 的顶部

> ID：14432397
> 
> 赞同：0
> 
> 时间：2013-01-21T04:08:37.890
> 
> 标签：php, ajax

在我的应用程序中，如果这是正确的词，我想附加或预先附加，这是对已显示的人员帖子列表的 ajax 请求的结果。我的意思是当用户点击帖子并触发 ajax 请求时，结果应该被推送到 div 中现有帖子列表的顶部。我想到的一种方法是在用户发布内容以获取按时间戳排序的新帖子列表后触发第二个 ajax 请求，这样帖子将自动出现在顶部，但这似乎是通过不必要的调用来惩罚数据库。

请建议最好和有效的方法。请不要为此建议 jquery，我想在原始 javascript 中执行此操作，稍后当我没有任何方法可以实现我想要实现时，我将使用 jquery。

我的 JavaScript 代码：

```
 function postAjaxFade(){

 t = document.getElementById("post").value;
 // other element values like timestamp etc...
 params = "post="+t+"&fl="+f;

 if (window.XMLHttpRequest)
  { 
  xmlhttp=new XMLHttpRequest();
 }
 else
 {
 xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
 }
  xmlhttp.onreadystatechange=function()
 {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
  {
 // what do i add here to append the value to top of this div below..
   document.getElementById("postContainer").innerHTML=xmlhttp.responseText;

  }
 }
 xmlhttp.open("POST","search.php",true);
 xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
 xmlhttp.send(params);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T04:11:27.267

改变：

```
document.getElementById("postContainer").innerHTML=xmlhttp.responseText; 
```

到

```
var inner = document.getElementById("postContainer").innerHTML;
inner = xmlhttp.responseText + inner;
document.getElementById("postContainer").innerHTML = inner; 
```

# rad - 在 RAD 安装中找不到 eclipse.ini

> ID：14432398
> 
> 赞同：1
> 
> 时间：2013-01-21T04:08:46.790
> 
> 标签：rad

当我尝试打开安装在 Windows 7 - 64 位上的 RAD 6.0 时，我得到了 JVM Teriminated ，Exit code =1。在寻找问题的解决方案时，我发现这个问题的解决方案位于 eclipse.ini 文件中的某个位置。我在安装目录中找不到 eclipse.ini。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-15T01:25:24.360

RAD 中没有 eclipse.ini。RAD 在 RAD 主目录中有rationalsdp.ini。

# android - 无法在启动 android swipe view 应用程序时更改按钮文本

> ID：14432399
> 
> 赞同：-1
> 
> 时间：2013-01-21T04:08:48.623
> 
> 标签：android, views, swipe

我正在使用 eclipse 并制作一个 android 应用程序

我正在尝试保存按钮的设置，但是当我尝试在应用程序启动时设置按钮文本时，它会失败并且出现很多错误。

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Create the adapter that will return a fragment for each of the three
    // primary sections of the app.
    mSectionsPagerAdapter = new SectionsPagerAdapter(
            getSupportFragmentManager());

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

    LoadPreferences();

  .........

}private void LoadPreferences(){
        SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
        floz = sharedPreferences.getBoolean("floz", false);

        Button button = (Button) findViewById(R.id.buttonVolumeType);
        button.setText("mls");
       } 
```

如果我删除该`button.setText("mls");`行它工作正常

这是 logcat 消息

```
12-22 23:35:38.064: E/Trace(1384): error opening trace file: No such file or directory (2) 12-22 23:35:38.663: D/AndroidRuntime(1384): Shutting down VM 
12-22 23:35:38.663: W/dalvikvm(1384): threadid=1: thread exiting with uncaught exception (group=0x40a13300) 
12-22 23:35:38.684: E/AndroidRuntime(1384): FATAL EXCEPTION: main
12-22 23:35:38.684: E/AndroidRuntime(1384): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.cheapchug/com.example.cheapchug.MainActivity}: java.lang.NullPointerException
12-22 23:35:38.684: E/AndroidRuntime(1384):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
12-22 23:35:38.684: E/AndroidRuntime(1384):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
12-22 23:35:38.684: E/AndroidRuntime(1384):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
12-22 23:35:38.684: E/AndroidRuntime(1384):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
12-22 23:35:38.684: E/AndroidRuntime(1384):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-22 23:35:38.684: E/AndroidRuntime(1384):     at android.os.Looper.loop(Looper.java:137)
12-22 23:35:38.684: E/AndroidRuntime(1384):     at android.app.ActivityThread.main(ActivityThread.java:4745)
12-22 23:35:38.684: E/AndroidRuntime(1384):     at java.lang.reflect.Method.invokeNative(Native Method)
12-22 23:35:38.684: E/AndroidRuntime(1384):     at java.lang.reflect.Method.invoke(Method.java:511)
12-22 23:35:38.684: E/AndroidRuntime(1384):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-22 23:35:38.684: E/AndroidRuntime(1384):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-22 23:35:38.684: E/AndroidRuntime(1384):     at dalvik.system.NativeStart.main(Native Method)
12-22 23:35:38.684: E/AndroidRuntime(1384): Caused by: java.lang.NullPointerException
12-22 23:35:38.684: E/AndroidRuntime(1384):     at com.example.cheapchug.MainActivity.LoadPreferences(MainActivity.java:260)
12-22 23:35:38.684: E/AndroidRuntime(1384):     at com.example.cheapchug.MainActivity.onCreate(MainActivity.java:70)
12-22 23:35:38.684: E/AndroidRuntime(1384):     at android.app.Activity.performCreate(Activity.java:5008)
12-22 23:35:38.684: E/AndroidRuntime(1384):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
12-22 23:35:38.684: E/AndroidRuntime(1384):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
12-22 23:35:38.684: E/AndroidRuntime(1384):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:19:12.710

在 onCreate 方法中，该行`setContentView(R.layout.main);`仅加载 main.xml，因此尚未加载按钮并且无法更改按钮文本。但是`onCreateOptionsMenu(Menu menu)`在运行时，会加载用于滑动视图的 tab.xml 文件。

# java - 为什么 FutureTask 中的结果对象是非易失的？

> ID：14432400
> 
> 赞同：8
> 
> 时间：2013-01-21T04:08:50.457
> 
> 标签：java, concurrency, lock-free

我在 jsr166 中阅读 FutureTask 类，发现结果对象是非易失性的，代码中的注释是“非易失性，受状态读/写保护”第 75 行，状态是 volatile int。我从[Java Language Spec](http://docs.oracle.com/javase/specs/jvms/se7/html/index.html)阅读了 Java Memory Model ，但没有找到准确的答案。有人知道原因吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T05:30:06.753

考虑这个程序：

```
volatile int state;  

Integer   result;

void succeed(Integer result)
    if(state==PENDING)              vr0
        this.result = result;        w1
        state = DONE;               vw1

Integer peekResult()
    if(state==DONE)                 vr2 
        return result;               r2
    return null; 
```

`vr2`如果看到volatile read `DONE`，则表示它发生在 volatile write 之后`vw1`。所以我们有发生之前的关系： `w1 -> vw1 -> vr2 -> r2`. 因此 write`w1`对 read 可见`r2`。

但是`succeed()`不是线程安全的，因为`vr0`并且`vw1`不是原子的。如果我们使用 CAS

```
void succeed(Integer result)
    if( compareAndSet(state, PENDING, DONE) )      vr0+vw0
        this.result = result;                       w1 
```

它解决了原子性问题。但是， now`w1`不一定对`r2`. CAS的记忆屏障效应有点像

```
void succeed(Integer result)
    if(state==PENDING)         vr0
        state=DONE;            vw0
        this.result = result;   w1 
```

我们这里有`vw0 -> vr2 -> r2`，但`w1`不在链上，没有`w1 -> r2`

我们必须执行 volatile write `state=DONE`after`w1`以建立happens-before 链。

```
void succeed(Integer result)
    if(state==PENDING)            vr0
        state=TMP;                vw0
        this.result = result;      w1
        state=DONE;               vw1 
```

或在 CAS

```
void succeed(Integer result)
    if( compareAndSet(state, PENDING, TMP) )       vr0+vw0
        this.result = result;                       w1
        state=DONE;                                vw1 
```

# sql - 加速 SQL 数据库收缩过程

> ID：14432405
> 
> 赞同：1
> 
> 时间：2013-01-21T04:09:25.047
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我必须每周收缩和备份一个大约 100+ GB 大小的数据库。

通常需要2-3个小时才能收缩。这非常令人沮丧，尤其是当管理层希望快速部署此数据库时。

我的问题是

1-有什么方法可以快速缩小庞大的数据库。2-而不是缩小，如果我在启用缩小选项的情况下进行备份，它是否会做同样的事情，比如删除不必要的页面。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T04:14:34.457

1：不，通常您不会缩小“真实”数据库（大小）。特别是SQL Server备份不会备份数据库中没有使用的页面，所以一个1000gb的空数据库的备份非常小，缩水没有意义。你认为人们如何对重要的东西进行真正的备份（比如每 15 分钟运行一次增量备份）？一般不要使用自动增长，不要对任何大尺寸的东西使用收缩。

2：按1模拟。不要缩水。

为什么您认为首先需要缩小数据库？顺便说一句，100gb 非常小 - 一旦达到 1000gb 或更大，事情就会变得稀松平常。

# vb.net - DataGridView 的 RowCount 为零

> ID：14432408
> 
> 赞同：0
> 
> 时间：2013-01-21T04:10:35.607
> 
> 标签：vb.net, datagridview

我在下面的代码中遇到问题：

```
 For x As Integer = 0 To family_grid.RowCount

                family_composition = family_grid.Rows(x).Cells(0).Value
                age = family_grid.Rows(x).Cells(1).Value
                status = family_grid.Rows(x).Cells(2).Value
                relation = family_grid.Rows(x).Cells(3).Value
                educational_attainment = family_grid.Rows(x).Cells(4).Value
                occupation = family_grid.Rows(x).Cells(5).Value
                income = family_grid.Rows(x).Cells(6).Value

                dbConnect.Open()
                Dim str1 As String = "INSERT INTO tbl_general_intake_family(id, family_composition, age, status, relation, educational_attainment, occupation, income)values(id, family_composition, age, status, relation, educational_attainment, occupation, income)"
Dim da As New OleDbDataAdapter()
    Dim ds As New DataSet()
                    Dim com As New OleDb.OleDbCommand(str1, dbConnect)
                    com.Parameters.AddWithValue("id", var_document_id)
                    com.Parameters.AddWithValue("family_composition", family_composition)
                    com.Parameters.AddWithValue("age", age)
                    com.Parameters.AddWithValue("status", status)
                    com.Parameters.AddWithValue("relation", relation)
                    com.Parameters.AddWithValue("educational_attainment", educational_attainment)
                    com.Parameters.AddWithValue("occupation", occupation)
                    com.Parameters.AddWithValue("income", income)
                    com.ExecuteNonQuery()
                    com.Dispose()
                    dbConnect.Close()
                Next 
```

for 循环永远不会执行，因为`family_grid.RowCount`它返回的值为零。

在 中，我使用以下代码`form_load event`填充：`DataGridView`

```
Dim mycon As New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;" & _
                    "Data Source=" + My.Application.Info.DirectoryPath + "\mswd-rms.mdb")
                mycon.Open()
                Dim mycomm As New OleDbCommand("SELECT * FROM tbl_general_intake_family WHERE id=" & main_general_intake.document_id, mycon)
                Dim da As New OleDbDataAdapter()
                da.SelectCommand = mycomm
                Dim ds As New DataSet()
                da.Fill(ds)
                family_grid.Columns.Clear()
                family_grid.ReadOnly =  true
                family_grid.DataSource = ds.Tables(0)
                family_grid.Columns(0).HeaderText = "ID"
                family_grid.Columns(1).HeaderText = "Name"
                family_grid.Columns(2).HeaderText = "Age"
                family_grid.Columns(3).HeaderText = "Status"
                family_grid.Columns(4).HeaderText = "Relation"
                family_grid.Columns(5).HeaderText = "Educational Attainment"
                family_grid.Columns(6).HeaderText = "Occupation"
                family_grid.Columns(7).HeaderText = "Income" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:50:09.470

鉴于表格在 Form_Load 中填充了单个行，因此 RowCount 不可能为零。RowCount*应该*返回 1。

要解决此问题，请将数据表保存到私有表单级别变量并使用其 Row.Count。

```
private dtCurrentGrid As DataTable

..

dtCurrentGrid = ds.Tables(0)

..

 For x As Integer = 0 To dtCurrentGrid.Rows.Count 
```

# c++ - 字符串的词频（即文件 I/O）？

> ID：14432410
> 
> 赞同：-1
> 
> 时间：2013-01-21T04:10:50.080
> 
> 标签：c++, memory-management, file-io

我编写了一个读取文本文件的 C++ 程序。但是，我希望程序计算一个单词出现的次数。例如，输出应如下所示：

```
Word Frequency Analysis

Word          Frequency
I                1
don't            1
know             1
the              2
key              1
to               3
success          1
but              1
key              1
failure          1
is               1
trying           1
please           1
everybody        1 
```

注意每个单词只出现一次。我需要做什么才能达到这个效果？？

这是文本文件（即名为 BillCosby.txt）：

```
I don't know the key to success, but the key to failure is trying to please everybody. 
```

到目前为止，这是我的代码。我有一个极端的精神障碍，无法找到一种方法让程序读取一个单词出现的次数。

```
#include <iostream>
#include <fstream>
#include <iomanip>

const int BUFFER_LENGTH = 256;
const int NUMBER_OF_STRINGS = 100;

int numberOfElements = 0;
char buffer[NUMBER_OF_STRINGS][BUFFER_LENGTH];
char * words = buffer[0];
int frequency[NUMBER_OF_STRINGS];

int StringLength(char * buffer);
int StringCompare(char * firstString, char * secondString);

int main(){

int isFound = 1;
int count = 1;

std::ifstream input("BillCosby.txt");

if(input.is_open())
{
    //Priming read
    input >> buffer[numberOfElements];
    frequency[numberOfElements] = 1;

while(!input.eof())
    {
    numberOfElements++;
    input >> buffer[numberOfElements];

    for(int i = 0; i < numberOfElements; i++){
        isFound = StringCompare(buffer[numberOfElements], buffer[i]);
            if(isFound == 0)
                ++count;
    }

    frequency[numberOfElements] = count;

    //frequency[numberOfElements] = 1;

    count = 1;
    isFound = 1;
    }
    numberOfElements++;
}
else
    std::cout << "File is not open. " << std::endl;

std::cout << "\n\nWord Frequency Analysis " << std::endl;
std::cout << "\n" << std::endl;

std::cout << "Word " << std::setw(25) << "Frequency\n" << std::endl;

for(int i = 0; i < numberOfElements; i++){
    int length = StringLength(buffer[i]);
    std::cout << buffer[i] << std::setw(25 - length) << frequency[i] << 

 std::endl;
}

return 0;
}

int StringLength(char * buffer){
char * characterPointer = buffer;

while(*characterPointer != '\0'){
    characterPointer++;
}

return characterPointer - buffer;
}

int StringCompare(char * firstString, char * secondString)
   {
    while ((*firstString == *secondString || (*firstString == *secondString - 32) ||    

(*firstString - 32 == *secondString)) && (*firstString != '\0'))
{
    firstString++;
    secondString++;
}

if (*firstString > *secondString)
    return 1;

else if (*firstString < *secondString)
    return -1;

return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T04:20:09.190

你的程序读起来很混乱。但这部分对我来说很突出：

```
frequency[numberOfElements] = 1; 
```

（在while循环中）。您意识到无论单词出现多少次，您总是将频率设置为 1 对吗？也许您的意思是增加值而不是将其设置为 1？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T04:17:34.530

一种方法是标记化（将行拆分为单词），然后使用 c++ map 容器。该地图将单词作为键，单词计数作为值。

对于每个标记，将其添加到地图中，并增加字数。地图键是唯一的，因此您不会有重复项。

您可以将[stringstream](http://www.cplusplus.com/reference/sstream/stringstream/)用于您的标记器，并且可以在[此处找到地图容器参考（包括示例）](http://www.cplusplus.com/reference/map/map/)。

别担心，一个优秀的程序员每天都会处理心理障碍——所以要习惯它:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T04:25:19.147

解决方案的流程应该是这样的： - 初始化存储（你知道你显然有一个非常小的文件吗？） - 将初始计数设置为零（不是一） - 将单词读入数组。当你得到一个新单词时，看看你是否已经有了它；如果是，则在该位置的计数中加一；如果没有，将其添加到单词列表中（“嘿 - 一个新单词！”）并将其计数设置为 1 - 循环遍历文件中的所有单词

小心空白 - 确保您只匹配非空白字符。现在你有两次“钥匙”。我怀疑这是一个错误？

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T04:31:11.353

这是我使用 codepad.org 测试的代码示例：

```
#include <iostream>
#include <map>
#include <string>
#include <sstream>

using namespace std;

int main()
{
string s = "I don't know the key to success, but the key to failure is trying to please everybody.";
string word;
map<string,int> freq;

for ( std::string::iterator it=s.begin(); it!=s.end(); ++it)
{
    if(*it == ' ')
    {
         if(freq.find(word) == freq.end()) //First time the word is seen
         {
             freq[word] = 1;
         }
         else //The word has been seen before
         {
             freq[word]++;
         }
         word = "";
    }
    else
    {
         word.push_back(*it);
    }
}

for (std::map<string,int>::iterator it=freq.begin(); it!=freq.end(); ++it)
    std::cout << it->first << " => " << it->second << '\n';

} 
```

当它找到一个空格时它会停止，所以语法符号会把事情搞砸，但你明白了。

输出：

I => 1
but => 1
don't => 1
failure => 1
is => 1
key => 2
know => 1
please => 1
success, => 1 //注意这并不完美，因为逗号。一个快速的改变可以解决这个问题，我会让你自己解决这个问题。
=> 2
到 => 3
尝试 => 1

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T06:00:05.990

对于看起来很像家庭作业的事情，我有点犹豫是否要直接回答，但我很确定如果有人把它作为家庭作业提交，任何中途体面的老师/教授都会要求一些非常严肃的解释，所以如果你这样做，你最好仔细研究它，并准备好回答一些关于所有部分是什么以及它们如何工作的严肃问题。

```
#include <map>
#include <iostream>
#include <iterator>
#include <algorithm>
#include <string> 
#include <fstream>
#include <iomanip>
#include <locale>
#include <vector>

struct alpha_only: std::ctype<char> {
    alpha_only() : std::ctype<char>(get_table()) {}

    static std::ctype_base::mask const* get_table() {
        static std::vector<std::ctype_base::mask> 
            rc(std::ctype<char>::table_size,std::ctype_base::space);
        for (int i=0; i<std::ctype<char>::table_size; i++)
            if (isalpha(i)) rc[i] = std::ctype_base::alpha;
        return &rc[0];
    }
};

typedef std::pair<std::string, unsigned> count;

namespace std { 
    std::ostream &operator<<(std::ostream &os, ::count const &c) { 
        return os << std::left << std::setw(25) << c.first 
                  << std::setw(10) << c.second;
    }
}

int main() { 
    std::ifstream input("billcosby.txt");
    input.imbue(std::locale(std::locale(), new alpha_only()));

    std::map<std::string, unsigned> words;

    std::for_each(std::istream_iterator<std::string>(input),
                    std::istream_iterator<std::string>(),
                    [&words](std::string const &w) { ++words[w]; });
    std::copy(words.begin(), words.end(),
              std::ostream_iterator<count>(std::cout, "\n"));
    return 0;
} 
```

# ruby-on-rails - 当我得到多个 CSS 文件时，我应该只转储主 application.css 中的所有样式吗？

> ID：14432414
> 
> 赞同：0
> 
> 时间：2013-01-21T04:11:34.450
> 
> 标签：ruby-on-rails, ruby-on-rails-3, asset-pipeline

我和前端设计师一起工作，他们给了我一堆 HTML 和 CSS 文件。有些东西是非常直接的——比如用于 Twitter Bootstrap 或任何其他框架的 CSS。

但是当设计师创建了一堆其他样式表时，我应该将它们包含在样式表目录中还是应该将所有样式复制到主`application.css`文件中？

这只是风格问题还是我的方法真的（或不）与资产管道有关？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T04:19:57.460

该方法通常无关紧要，但如果您不想在最后一页的一个样式表链接中包含所有内容，则可能很重要。我强烈建议保持样式表分开，原因与保持代码分开的原因相同。更容易维护，每个文件的概念开销更少，并且更容易找到需要进行更改的位置。

尽管它们通过资产管道组合在一起，但我倾向于为每个控制器或组件制作一个样式表，并在它们自己的文件中使用某些共享样式（导航、表单、常见 UI 表单）。我还没有找到完美的解决方案（我仍然在为想要“DRYer”样式表而苦苦挣扎），但这很好用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T04:20:15.383

`application.css`是要组织css文件，我记得上面有注释`application.css`告诉不要直接在里面写css文件。您应该为前端人员给您的样式表内容创建一个新的 css 文件。由于 application.css 将自动包含 styletheet 文件夹下的所有文件。它会起作用的。

# javascript - jQuery - 滚动文本或图像链接，暗淡文本和链接图像与子菜单

> ID：14432418
> 
> 赞同：1
> 
> 时间：2013-01-21T04:12:29.300
> 
> 标签：javascript, jquery, jquery-ui

我正在尝试创建一个菜单，其中文本链接和图像链接链接在一起。通过滚动文本或图像链接，其他文本和图像变暗。

当翻转文本或图像链接时，我试图让每个主链接的子链接淡入淡出。

**问题**：我需要帮助获取特定的 div 子菜单以显示链接或图像何时翻转。 [http://jsfiddle.net/philoman/bWYwn/67/](http://jsfiddle.net/philoman/bWYwn/67/)。谢谢你的帮助。

```
<ul id="buttons" class="together">
<li><a href="#">Button 1</a>
    <ul id="button-1-submenu">
        <li><a href="#">Sub-Menu 1</a>
        <li><a href="#">Sub-Menu 2</a>
        <li><a href="#">Sub-Menu 3</a>
    </ul>
</li>

<li><a href="#">Button 2</a>
    <ul id="button-2-submenu">
        <li><a href="#">Sub-Menu 1</a>
        <li><a href="#">Sub-Menu 2</a>
        <li><a href="#">Sub-Menu 3</a>
    </ul>
</li>

<li><a href="#">Button 3</a>
    <ul id="button-3-submenu">
        <li><a href="#">Sub-Menu 1</a>
        <li><a href="#">Sub-Menu 2</a>
        <li><a href="#">Sub-Menu 3</a>
    </ul>
</li>
</ul>

<ul id="button-images" class="together">
    <li><a href="#"><img src="Button-1-image.jpg" width="50px" /></a></li>
    <li><a href="#"><img src="Button-2-image.jpg" width="50px" /></a></li>
    <li><a href="#"><img src="Button-3-image.jpg" width="50px" /></a></li>
</ul> 
```

# java - JFrame 组件之间的触发延迟

> ID：14432423
> 
> 赞同：1
> 
> 时间：2013-01-21T04:13:10.763
> 
> 标签：java, swing, timer, jframe, delay

我想展示合并排序如何在视觉上使用`JFrame`. 我想要做的是在`JLabel`一些时间延迟后使其可见。我尝试了很多方法，但它们都出现在同一时刻，没有中间延迟。

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
        // TODO add your handling code here:
       // jLabel1.setVisible(false);
        jLabel2.setVisible(false);
        jLabel3.setVisible(false);
        jLabel4.setVisible(false);
        jLabel5.setVisible(false);
        jLabel6.setVisible(false);
        jLabel7.setVisible(false);
        final Timer t=new Timer((4000), null);
         final int delay=2000;
        final ActionListener taskPerformer = new ActionListener() {
      public void actionPerformed(ActionEvent evt) {

          jLabel1.setVisible(true);
          t.getDelay();

          jLabel2.setVisible(true);
          t.setDelay(3000);

          jLabel3.setVisible(true);
          t.setDelay(2000);

          jLabel4.setVisible(true);
          t.setDelay(2000);

          jLabel5.setVisible(true);
          t.setDelay(2000);

          jLabel6.setVisible(true);
          t.setDelay(2000);
                }
  };

  new Timer(delay, taskPerformer).start(); 
```

但是，当我单击按钮时，所有标签都出现在同一个时刻，尽管我一直在延迟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T04:39:02.820

您需要更新计时器的动作侦听器中的图标，如此处[所示](https://stackoverflow.com/a/12228640/230513)。您可以实现该接口以呈现大小与元素的比较值成比例的图标，如此[处](https://stackoverflow.com/a/2834484/230513)`Icon`所示。

附录：*你能说得具体一点吗？*

您希望以最初的随机顺序对 a`List<Number>`大小排序的中间步骤进行动画处理。子类 implement ，所以已经完成了。每个具有 的A可用于显示值。展示了如何创建具有比例大小的图标；您需要在区间内改变高度。& Mad 的[示例](https://stackoverflow.com/a/14436567/230513)展示了如何以某种顺序对图标的显示进行动画处理。`N``Number``Comparable<T>``compareTo()``GridLayout(1, 0)``JLabel``Icon`[`DecRenderer`](https://stackoverflow.com/a/2834484/230513)`[0, N)`[`GrayIcons`](https://stackoverflow.com/a/12228640/230513)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T10:23:07.220

There are a number of reasons why this won't work. Firstly, `javax.swing.Timer` doesn't work this way. It waits in the background until the given delay has past and then calls the registered `ActionListener`s `actionPerformed` method.

Secondly, if it did work this way, it would block the Event Dispatching Thread, preventing it from processing repaint requests.

I think you will find [How to use Swing Timers](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html) of use.

```
public class BlinkOut {

    public static void main(String[] args) {
        new BlinkOut();
    }

    public BlinkOut() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class TestPane extends JPanel {

        private JLabel[] labels;
        private int[] delays;
        private Timer timer;
        private int index;

        public TestPane() {
            setLayout(new GridLayout(0, 1));
            labels = new JLabel[7];
            for (int index = 0; index < 7; index++) {
                labels[index] = new JLabel("Label " + (index + 1));
                add(labels[index]);
            }
            delays = new int[] {2000, 3000, 2000, 2000, 2000, 2000, 2000};
            JButton hide = new JButton("Hide");
            add(hide);
            hide.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    System.out.println("Click");
                    index = 0;
                    labels[index].setVisible(false);
                    timer.setDelay(delays[index]);
                    timer.start();
                }
            });
            timer = new Timer(delays[0], new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    System.out.println("Tick");
                    timer.stop();
                    index++;
                    if (index < 7) {
                        labels[index].setVisible(false);
                        timer.setDelay(delays[index]);
                        timer.start();
                    }
                }
            });
            timer.setRepeats(false);
            timer.setCoalesce(true);
        }
    }

} 
```

# asp.net-mvc - Ajax 刷新不能远程工作

> ID：14432433
> 
> 赞同：0
> 
> 时间：2013-01-21T04:14:26.177
> 
> 标签：asp.net-mvc, asp.net-ajax, kendo-ui

我现在正在使用 Kendo 窗口，他们有一个 ajax 方法可以将新内容加载到窗口中。这适用于我的本地主机，但由于某些原因，当我将站点发布到远程服务器时会停止。内容从未加载，我已经调试了服务器上的 javascript，并且正在进行 ajax 调用。任何帮助，将不胜感激。

这是我正在使用的代码。

```
@(Html.Kendo().Window()
    .Name("window")
    .Title("test")
    .Actions(Image => Image
        .Custom("custom")
        .Minimize()
        .Maximize()
        .Close()
        )
    //.LoadContentFrom(@Model.selectedModule, "Modules")
    .Draggable()
    .Resizable()
    .Width(500)
    .Modal(true)
    .Height(500)
    .Visible(false)
    ) 
```

```
function test(link) {
    var use = link.title;
    var dialog = $("#window").data("kendoWindow");
    dialog.refresh({
        url: "/Modules/" + use
    });
    setTimeout("open()", 200);

};

function open() {
    var dialog = $("#window").data("kendoWindow");
    dialog.center();
    dialog.open();
}
</Script> 
```

最后，我接受了建议并用 URL 助手替换了该方法。代码块如下。

```
function test(link) {
    var use = link.data('url');
    var dialog = $("#window").data("kendoWindow");
    dialog.refresh({
        url: use
    });
    setTimeout("open()", 200); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T04:55:35.657

对我来说，在使用部署环境时，URL 似乎没有被解析。您可以尝试使用 MVC 提供的 URL 助手吗？您也可以使用浏览器的网络工具来查看服务器实际响应的内容。

# c# - 澄清 c# 委托/方法

> ID：14432439
> 
> 赞同：1
> 
> 时间：2013-01-21T04:14:46.980
> 
> 标签：c#, .net, sql-server, entity-framework, transactions

我过去使用过代表，所以我熟悉它们的用途和好处。我也做了很多阅读/研究，但我试图把我的脑袋绕在这个问题上，却一无所获。我想使用委托（我相信）来封装一些代码或在方法中使用委托来调用一些外部代码。

我在 20 个不同的地方使用相同的代码将实体框架更新包装在事务中。我想把代码放在一个地方；但是，我不能单独在一个方法中做到这一点，因为有一个中间部分每次都会改变。我正在寻找一些关于如何最好地做到这一点的想法/说明（.net 3.5，ms sql 2010）。- 谢谢

代码示例：

```
 void AddItem(string objDetails)
    {
        // setup method specific entity objects
        SomeObject obj = new SomeObject { Details = objDetails };

        //////// Begin transaction code that I would like to encapsulate  ///////
        bool success = false;

        using (Entities data = new Entities())
        {
            for (int i = 0; i < s.BaseSettings.CommandRetries; i++)
            {
                using (TransactionScope transaction = new TransactionScope())
                {
                    try
                    {
                        //////////////////////////////////////////////////////////////
            ///////// BEGIN Code that I would like to change / call different each time ////////

            data.AddToSOMEOBJECTs(obj);

            //////////////// END //////////////////////////////////

            //// RETURN TO ENCAPSULATED CODE ////

                        data.SaveChanges(false);
                        transaction.Complete();
                        success = true;
                        break;
                    }
                    catch (Exception ex)
                    {
                        if (ex.GetType() != typeof(UpdateException))
                        {
                            throw new Exception("Unhandled db exception.");
                        }
                    }
                }
            }
            if (success)
            {
                data.AcceptAllChanges();
            }
            else
            {
                throw new Exception();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T04:22:32.727

您将函数传递给执行自定义位的委托（或 lambda）

像这样

```
void AddItem<T>(string objDetails, Func<T> custom) {
  . 
  . common 
  . 
  .
  T someReturn = custom();
  . 
  . common 
  . 
} 
```

添加这样的调用可能：

```
Func<int> custom = () => {
     // do something custom
     return 9;
}

// Call common function    
AddItem<int>(..., custom); 
```

重要的是 Func 的接口符合您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T04:23:47.373

您可以使用委托和事件传递不同的方法。这是执行此操作的类的示例：

```
class SampleClass
{
    public delegate void TransactionDelegate(); 
    public event TransactionDelegate MyTransactionDelegate;

    public void DoSomething()
    {
        MyTransactionDelegate(); 
    }

} 
```

然后，您可以使用 lambda 表达式将方法传递给事件，如下所示：

```
class MainClass
{
    public static void Main (string[] args)
    {
        var test = new SampleClass(); 
        test.MyTransactionDelegate += () => {Console.WriteLine("Success");}; 
        test.DoSomething(); 
    }
} 
```

# mysql - 语法中出现 Sql 错误，需要高效的 sql 查询

> ID：14432444
> 
> 赞同：0
> 
> 时间：2013-01-21T04:15:16.937
> 
> 标签：mysql, sql

根据我的要求，我进行了以下查询。现在它不起作用。查询是：

```
SELECT *
FROM   T_INV_DTL T
       LEFT JOIN (
                SELECT inv_dtl_id,
                       Employee_id AS emp_id,
                       GROUP_CONCAT(DISTINCT Employee_id) AS Employee_id
                FROM   T_INV_INVESTIGATOR
                GROUP BY
                       inv_dtl_id
            )TII
            ON  T.inv_dtl_id = TII.inv_dtl_id
       JOIN T_INVESTIGATION TI
            ON  T.inv_id = TI.inv_id
       LEFT JOIN (
                SELECT inv_dtl_id
                FROM   T_INV_BILL
                GROUP BY
                       inv_dtl_id
            )TIB
            ON  T.inv_dtl_id = TIB.inv_dtl_id
       JOIN T_Insurance_company TIC
            ON  TI.client_id = TIC.ins_cmp_id
WHERE  1 T.Report_dt != '0000-00-00'
       AND (
               T.inv_dtl_id NOT IN (SELECT inv_dtl_id
                                    FROM   T_INV_BILL TIBS
                                    WHERE  TIBS.inv_dtl_id NOT IN (SELECT 
                                                                          inv_dtl_id
                                                                   FROM   
                                                                          T_INV_BILL
                                                                   WHERE  
                                                                          Bill_submitted_dt = 
                                                                          '0000-00-00'))
           )
ORDER BY
       Allotment_dt DESC 
       LIMIT 20 
```

任何人都可以告诉问题，请您修改为更有效的查询（假设如果我们有超过 100 条记录，那么我们对其进行计数以进行分页应该更快）。

T_INV_DTL 是主表，它连接到其他表。所以我的问题是这个表T_INV_DTL的每个条目在表T_INV_BILL中有多个调查账单。T_INV_DTL 中的 Report_dt。所以我的结果是，如果 T_INV_DTL 中有报告日期，并且 T_INV_BILL 中没有至少一个账单日期，我需要结果。

如果 T_INV_DTL 中有报告日期并且 T_INV_BILL 中没有至少一个账单日期，我需要两者的结果（如果所有人都输入了账单提交日期，则不需要它）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:55:22.550

虽然我承认不知道您遇到了什么问题（请提供附加信息），但您的查询看起来确实可以优化。

删除您的 Where 条件并添加到您的 Join 应该保存 2 个表扫描：

```
SELECT *
FROM   T_INV_DTL T
       LEFT JOIN (
                SELECT inv_dtl_id,
                       Employee_id AS emp_id,
                       GROUP_CONCAT(DISTINCT Employee_id) AS Employee_id
                FROM   T_INV_INVESTIGATOR
                GROUP BY
                       inv_dtl_id
            )TII
            ON  T.inv_dtl_id = TII.inv_dtl_id
       JOIN T_INVESTIGATION TI
            ON  T.inv_id = TI.inv_id
       LEFT JOIN (
                SELECT inv_dtl_id
                FROM   T_INV_BILL
                WHERE Bill_submitted_dt != '0000-00-00'
                GROUP BY inv_dtl_id
            )TIB
            ON  T.inv_dtl_id = TIB.inv_dtl_id
       JOIN T_Insurance_company TIC
            ON  TI.client_id = TIC.ins_cmp_id
WHERE  T.Report_dt != '0000-00-00' 
    AND TIB.inv_dtl_id IS NULL
ORDER BY
       Allotment_dt DESC 
       LIMIT 20 
```

# profiling - 使用 jvisualvm 进行内存采样

> ID：14432445
> 
> 赞同：3
> 
> 时间：2013-01-21T04:15:22.630
> 
> 标签：profiling, visualvm, sampling, memory-profiling

我正在使用 Java Visual VM 的内存采样功能，但无法回答以下问题：

1.  为什么会创建这么多实例？

2.  为什么这些实例和字节数不断增加？

例如，我创建了一个非常简单的 Java 程序，如下所示：

```
public class TestMemory{
    public static void main(String[] args) throws InterruptedException {
        System.out.println("Hello");
        Thread.sleep(60 * 60 * 1000);
    }
} 
```

我可以在 Java Visual VM 中看到有 611 个类。实例数量不断从 25,000 增加到接近 50,000，然后回落到 25,000 左右。实例减少的原因可能是由 GC 引起的，但我不知道为什么这些数字如此动态，即使我没有对我的程序做任何事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-11T00:49:08.723

您正在查看的实例数和字节数是[从 VisualVM 监控应用程序的成本](https://weblogs.java.net/blog/emcmanus/archive/2006/07/how_much_does_i.html)。VisualVM 正在轮询各种 JVM MBean，不断分析应用程序的值变化。

要确认这一点，您可以转到**Sampler**选项卡。单击**每个线程分配**子选项卡。查看繁忙线程是否为 RMI TCP Connection(n)。这个线程每秒应该有一个高字节分配。

我也很好奇如何优化它，因此发布了一个更具体的[问题](https://stackoverflow.com/questions/17028168/how-to-reduce-heap-usage-impact-from-visualvm)。

# mysql - 狮身人面像增量索引配置

> ID：14432446
> 
> 赞同：0
> 
> 时间：2013-01-21T04:15:34.610
> 
> 标签：mysql, sphinx

以下文档来自：[http ://sphinxsearch.com/docs/manual-2.0.6.html#delta-updates](http://sphinxsearch.com/docs/manual-2.0.6.html#delta-updates)

我对`sph_counter`Is it used to identify an index table 的目的感到困惑，所以如果我要使用带有 delta 的第二个索引，`sph_counter`for 它只会是 2？

**主要来源变成？**

```
sql_query_pre = REPLACE INTO sph_counter SELECT 2, MAX(id) FROM table_2 
```

**三角洲源变成了？**

```
sql_query = SELECT id, title, body FROM table_2 \
        WHERE id>( SELECT max_doc_id FROM sph_counter WHERE counter_id=2 
```

谢谢，仅此而已。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:03:00.563

确切地。表的第一列`sph_counter`是计数器标识符。您还可以将其定义为 varchar 列并将表名存储到其中。

在您的情况下，该值不必是 2 - 它可以是您想要的任何值，只要每个表都不同。

# javascript - 如何在 div 背景中添加 DOM 图像对象

> ID：14432449
> 
> 赞同：-1
> 
> 时间：2013-01-21T04:15:56.317
> 
> 标签：javascript, jquery, css, html

我需要在 Div 背景中添加 DOM 图像对象。如果我在 Div 背景中直接添加图像 URL 加载需要时间。但是如果我将它放在图像对象中，那么我将在图像加载事件上显示 div。但我不知道如何在 div 背景中添加图像对象..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T04:20:02.870

使用 jQuery，你可以很容易地通过创建一个图像元素而不是附加它来预加载图像：

```
$("<img>").attr('src', sourceToPreload); 
```

如果您正在谈论更改背景图像 CSS，只需使用`.css`.

# android - 在密码锁屏中显示 Toast

> ID：14432450
> 
> 赞同：1
> 
> 时间：2013-01-21T04:16:00.073
> 
> 标签：android, toast, lockscreen

我想在Android的默认密码锁屏中显示一个Toast，比如：

```
Toast.makeText(getContext(), "Invalid password", Toast.LENGTH_LONG).show(); 
```

但是，这个 toast 实际上出现在主屏幕而不是锁屏中。我认为这个吐司被钥匙卫隐藏了。
我还发现它`WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED`可以用来在锁屏上显示一些东西。我的障碍是它需要 getWindow() 在活动中设置此标志，但是，Android 框架中的默认 LockScreen 没有活动。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:50:58.277

我就是这样做的......

在代码中执行以下操作..

```
LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View layout = inflater.inflate(R.layout.toast,  null);  // toast is a custom layout for the toast message
Toast t= new Toast(getApplicationContext());
t.setGravity(Gravity.TOP | Gravity.FILL_HORIZONTAL, 0, 0);
t.setDuration(Toast.LENGTH_SHORT);
t.setView(layout);
t.show(); 
```

我想这就是你想要的答案。

# matlab - 64 位 fortran DLL

> ID：14432455
> 
> 赞同：1
> 
> 时间：2013-01-21T04:16:36.583
> 
> 标签：matlab, compiler-construction, fortran

我想在 fortran 中编写一个 DLL 并在 MATLAB 中调用它（我使用 MATLAB 64 位）。似乎 MinGW 和 CygWin 提供了 fortran 32 位编译器，并且可以使用这些编译器创建 DLL。但我不确定输出 DLL 是否可以在 MATLAB 中使用。我不想选择 Intel Fortran，因为它太贵了。我想知道是否必须使用 64 位 fortran 编译器。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:55:56.390

您可以使用 Rtools（参见[此处](http://cran.r-project.org/)），这是用于为统计包 R 构建程序的编译器。它具有 32 位和 64 位编译器（gcc 工具链）。

**编辑**：gcc（包括 Ada、C、C++ 和 Fortran 编译器）可以从 SourceForge 上的 MinGW-builds 获得：http: [//sourceforge.net/projects/mingwbuilds/files/host-windows/releases/](http://sourceforge.net/projects/mingwbuilds/files/host-windows/releases/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T06:40:01.950

这取决于您的 Matlab 版本。例如，Matlab 2012a 不支持 Intel[最新的编译器（这并不奇怪），但](http://software.intel.com/en-us/intel-visual-fortran-composer-xe-evaluation)[Intel Visual Fortran Composer XE 2011](http://software.intel.com/en-us/articles/intel-fortran-composer-xe-2011-release-notes)支持。如果您有以前的 matlab 版本搜索支持和兼容的编译器列表，例如 Matalb 2012a 的列表在[这里](http://www.mathworks.com/support/compilers/R2012a/)...

# java - 在程序文件夹中创建锁定文件会导致异常

> ID：14432460
> 
> 赞同：0
> 
> 时间：2013-01-21T04:16:57.350
> 
> 标签：java, locking, file-permissions, h2

我最近决定为我的 Java 应用程序使用官方安装程序。

该应用程序将其自身安装在 Programs Files 下的相应文件夹中。

在我的应用程序的 jar 所在的 bin 文件夹中，我有一个 h2.db 文件，其中包含应用程序读取的一堆信息。

当我尝试在安装位置运行应用程序时，出现异常：

```
org.h2.jdbc.JdbcSQLException: IO Exception: "java.io.FileNotFoundException: C:\Program Files (x86)\Aurora Game Hub\bin\AuroraDB.lock.db (Access is denied)"; "C:/Program Files (x86)/Aurora Game Hub/bin/AuroraDB.lock.db" [90031-167]
        at org.h2.message.DbException.getJdbcSQLException(DbException.java:329)
        at org.h2.message.DbException.get(DbException.java:158)
        at org.h2.message.DbException.convertIOException(DbException.java:315)
        at org.h2.store.fs.FilePathDisk.newOutputStream(FilePathDisk.java:265)
        at org.h2.store.fs.FileUtils.newOutputStream(FileUtils.java:223)
        at org.h2.store.FileLock.save(FileLock.java:197)
        at org.h2.store.FileLock.lockFile(FileLock.java:333)
        at org.h2.store.FileLock.lock(FileLock.java:128)
        at org.h2.engine.Database.open(Database.java:542)
        at org.h2.engine.Database.openDatabase(Database.java:222)
        at org.h2.engine.Database.<init>(Database.java:217)
        at org.h2.engine.Engine.openSession(Engine.java:56)
        at org.h2.engine.Engine.openSession(Engine.java:159)
        at org.h2.engine.Engine.createSessionAndValidate(Engine.java:138)
        at org.h2.engine.Engine.createSession(Engine.java:121)
        at org.h2.engine.Engine.createSession(Engine.java:28)
        at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:305)
        at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:110)
        at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:94)
        at org.h2.Driver.connect(Driver.java:72)
        at java.sql.DriverManager.getConnection(Unknown Source)
        at java.sql.DriverManager.getConnection(Unknown Source)
        at aurora.engine.V1.Logic.ASimpleDB.searchAprox(ASimpleDB.java:828)
        at aurora.V1.core.GameSearch.searchGame(GameSearch.java:249)
        at aurora.V1.core.GameSearch.run(GameSearch.java:346)
        at java.lang.Thread.run(Unknown Source)
Caused by: java.io.FileNotFoundException: C:\Program Files (x86)\Aurora Game Hub\bin\AuroraDB.lock.db (Access is denied)
        at java.io.FileOutputStream.open(Native Method)
        at java.io.FileOutputStream.<init>(Unknown Source)
        at java.io.FileOutputStream.<init>(Unknown Source)
        at org.h2.store.fs.FilePathDisk.newOutputStream(FilePathDisk.java:257)
        ... 22 more 
```

当它不在程序文件位置时它工作正常，因为我在开发时会注意到这一点。

我认为它与权限有关，并且无法创建锁定文件或其他东西。有没有办法给予/要求明确的权限来创建锁定文件，或者我可以告诉 H2 不创建锁定文件？

我们曾考虑将静态数据库放置在安装位置以外的位置，但由于它必须在 Mac 和 PC 上运行，而且安装程序的设置方式会使事情变得更加复杂。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:52:14.197

似乎没有写入此目录的访问权限。您需要将数据库文件存储在您拥有访问权限的目录中。

对于 H2，如果使用数据库 URL `jdbc:h2:~/data/db`，则数据库相对于当前用户主目录存储。另一种选择是使用绝对路径，例如`jdbc:h2:c:/dir/to/db/file`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T04:20:29.570

这是由改进的 Windows 安全性引起的。只有当你有提升的权限时你才能写。例如，如果您以“以管理员身份运行”启动程序，那么它可能能够写入程序文件区域。那么这不是一个好主意 - 请参阅： [绕过 Windows 对程序文件文件夹的权限限制](https://stackoverflow.com/questions/3169404/bypass-windows-permission-restrictions-on-program-files-folder)

您应该使用“ProgramData”变量指向的文件夹。或良好的旧 user.home 区域

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T04:29:19.020

在 Mac OS X 上，您可以使用[这里](https://stackoverflow.com/a/14233171/230513)`user.home`引用的已知子目录。

[](https://stackoverflow.com/tags/java-web-start/info)*具有适当[权限的](http://www.h2database.com/html/tutorial.html#web_start)[*Java Web Start*](https://stackoverflow.com/tags/java-web-start/info)可能是一种替代方法，尽管我还没有尝试过。*

# android - 安卓驱动开发

> ID：14432463
> 
> 赞同：4
> 
> 时间：2013-01-21T04:17:07.557
> 
> 标签：android, printing, driver

我打算为商店创建一个系统。我将使用安卓平板电脑和收据打印机。我打算使用的打印机不支持 Android。

**我的问题是：**

*   我可以为打印机创建驱动程序吗？
*   我是否需要了解有关打印机的任何信息，例如（芯片或任何其他电子产品）
*   创建驱动程序难吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:43:26.043

我会尽量避免这种设置。*商店*和*收据*这两个词听起来好像需要一些可靠性和用户友好性。今天，与打印机的通信大多是双向的，因为它们会发回各种信息。至少处理其中一些（碳粉不足，纸张用完）肯定会对您的用户有所帮助。除此之外，对特定打印机的协议进行逆向工程并不一定很有趣，尤其是如果您对打印机协议没有经验的话。此外，低成本打印机将各种逻辑委托给驱动程序，因为这降低了设备的成本。我不会依赖可用的相关文档。

您选择的打印机是否适合的一个很好的指示可能是它是否受某些开源打印框架的支持。这样的框架也可能是您回答相关问题的第一个地址。

只是我的两分钱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:35:24.333

I believe that the best choice would be to firstly try some open-source printer software which might work with this printer. If any open-source software doesn't work, you would get a good understanding after going over the open-source driver for another similar printer.

You would not be needing to know information about the chip and other electronic stuff to write a driver. Although, you would need a documentation of the printer which says the protocol the printer follows.

I don't think that it should be really tough writing a driver for a printer, although it depends on how much flexible driver you want to write. If you want to write a driver which just fulfils the specialized jobs you want it to do, the driver should not be tough to write although the driver could not then be extended beyond the requirements of your application and not used for any generic use. If you want to write a generic driver which can be used to print anything, then it might not be that easy.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T18:40:34.053

您是否绝对必须使用特定的打印机型号？因为如果没有，您可能想看看[Google Cloud Print](http://www.google.com/cloudprint/learn/)。您将需要一个兼容 Android 的应用程序（其中有很多，列表可[在此处](http://www.google.com/cloudprint/learn/apps.html)获得）和云就绪打印机（同样，其中有很多，您可以在[此处](http://www.google.com/cloudprint/learn/printers.html)找到列表），或传统打印机，那里也是一种连接它们的方法。

# db2 - 定制 DB2 命令行处理器

> ID：14432467
> 
> 赞同：0
> 
> 时间：2013-01-21T04:17:49.350
> 
> 标签：db2

我用 java 编写了一个程序，它读取 .csv 文件并将它们存储到数据库表中。但是存储操作的性能很慢。当我使用 DB2 命令行处理器时，性能发生了巨大的变化，而且速度非常快。因此，我正在尝试根据我的要求定制 DB2 命令行处理器。我在谷歌上搜索，但我只找到了如何使用它的主题。在开始之前，我想弄清楚以下主题。

1.  “DB2 命令行处理器”是开源的吗？
2.  使用哪种编程语言？
3.  有没有像 DB2 命令行处理器这样的替代方案，在 java 中有开源代码？
4.  有没有办法从 java 程序中调用 DB2 命令行处理器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:08:22.360

可能值得研究 Java 程序，缓慢的运行时间可能与您提交数据的频率有关（即您可能在自动提交模式下运行（每次插入后提交））。

在每 500 次插入后提交可能比在每条记录后提交要快得多

有关自动提交的详细信息，请参阅[DB2 自动](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=/com.ibm.db2z9.doc.java/src/tpc/imjcc_r0052353.htm)提交

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T20:20:48.473

1) DB2 CLP（命令行处理器）是 DB2 的一部分。它不是开源的，它包含在所有版本（Express-C、express、workgroup、extended）和数据服务器客户端中。最后一个可以免费下载并安装在所有客户端中。

2) 使用 os DB2CLP 功能的最佳方式是通过脚本，例如 bash 脚本或 windows 脚本。您还可以从另一个程序（例如 java 应用程序（运行时））调用 db2clp。

3）有开源许可证的数据库外壳，但是，你混合了两件事：一个外壳，通常是一个黑屏，你可以在其中键入命令。还有一个驱动程序可以从自己开发的程序中查询数据库。

4) 同样，通过运行时，[http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html)

最后，最好是使用 JDBC 驱动程序，以便直接执行操作，而不是使用很多层。您必须检查您的 Java 代码，可能阅读效率不高。此外，检查 DB2 Java 驱动程序的属性。

还有一件事，如果你想要最快的，尝试使用 LOAD 将数据插入到数据库中。它不执行任何日志。您可以从 java 应用程序调用 LOAD（记住在执行任何命令之前加载 db2 环境）

# android - 如何在选项卡中显示 ListView 项目

> ID：14432469
> 
> 赞同：0
> 
> 时间：2013-01-21T04:17:56.463
> 
> 标签：android, facebook, android-listview, android-facebook

在**Contacts Tab**中，尝试获取所有 Facebook 好友的列表

在**Month Tab**中，尝试获取当月生日的 Facebook 好友列表

在**Week Tab**中，尝试获取当前周生日的 Facebook 好友列表

我已经为所有人编写了代码，并且*在构建和运行我的程序时没有收到任何错误*，但我没有在任何选项卡中获得朋友列表。

请让我知道，我在哪里犯了愚蠢的错误......我在哪里失踪......

*TabSample.Java：-*

```
public class TabSample extends TabActivity {

String response;

private static JSONArray jsonArray;
public static TabHost mTabHost;
private MyFacebook fb = MyFacebook.getInstance();
public static MyLocalDB db = null;
private BcReceiver bcr = null;
private BcReceiverAlarm bcra = null;
private PendingIntent mAlarmSender;
private boolean isAlarmSet;
private ProgressDialog busyDialog;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mAlarmSender = PendingIntent.getService(TabSample.this, 0, new Intent(
            TabSample.this, BdRemService.class), 0);
    setContentView(R.layout.main);
    if (db == null) {
        db = new MyLocalDB(this);
        db.open();
    }
    if (!fb.isReady()) {
        Log.v(TAG, "TabSample- initiating facebook");
        fb.init(this);// after finishing, this will call loadContents itself
    } else {
        loadContents();
    }
    busyDialog = new ProgressDialog(this);
    busyDialog.setIndeterminate(true);
    busyDialog.setMessage("Refreshing");
    Bundle extras = getIntent().getExtras();
    if (extras == null) {
        return;
    }
    response = getIntent().getStringExtra("FRIENDS");
    try {
        jsonArray = new JSONArray(response);
    } catch (JSONException e) {
        FacebookUtility.displayMessageBox(this,
        this.getString(R.string.json_failed));
    }
    setTabs();

}
private void setTabs() {

    addTab("Contacts", com.chr.tatu.sample.friendslist.ContactTab.class);
    addTab("Month", com.chr.tatu.sample.friendslist.MonthTab.class);
    addTab("Week", com.chr.tatu.sample.friendslist.WeekTab.class);

}
private void setupTabHost() {
    mTabHost = (TabHost) findViewById(android.R.id.tabhost);
    mTabHost.setup();

}
private void setupTab(final View view, final String tag, Intent intent,
        int id) {
    View tabview = createTabView(mTabHost.getContext(), tag, id);
    TabSpec setContent = mTabHost.newTabSpec(tag).setIndicator(tabview)
    .setContent(intent);
    mTabHost.addTab(setContent);
}
private void addTab(String labelId, Class<?> c) {
    TabHost tabHost = getTabHost();
    Intent intent = new Intent(this, c);
    intent.putExtra("FRIENDS", response);
    TabHost.TabSpec spec = tabHost.newTabSpec("tab" + labelId);
    View tabIndicator = LayoutInflater.from(this).inflate(
    R.layout.tab_indicator, getTabWidget(), false);
    TextView title = (TextView) tabIndicator.findViewById(R.id.title);
    title.setText(labelId);
    spec.setIndicator(tabIndicator);
    spec.setContent(intent);
    tabHost.addTab(spec);
}
private static View createTabView(final Context context, final String text,
final int id) 
{
    View view = LayoutInflater.from(context).inflate(
    R.layout.tab_indicator, null);
    return view;
}
@Override
protected void onResume() {
if (bcr == null) {
    bcr = new BcReceiver();
    registerReceiver(bcr, new IntentFilter(MyUtils.BIRTHDAY_ALERT));
}
if (bcra == null) {
    bcra = new BcReceiverAlarm();
    registerReceiver(bcra, new IntentFilter(MyUtils.ALARM_RESET));
}
super.onResume();
}
public void loadContents() {
if (fb.getFriendsCount() > 0) {
    return;
}
fb.setMyFriends(db.getAllFriends());
if (fb.getFriendsCount() > 0) {
    notifyTabSample(Note.FRIENDLIST_CHANGED);
} else {
    fb.reLoadAllFriends();
}
// 4\. initiate alarm
if (!isAlarmSet) {
    setAlarm(true);
}
}
private void setAlarm(boolean isON) {
AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
if (isON) {
    am.setRepeating(AlarmManager.RTC_WAKEUP, MyUtils
            .getAlarmStartTimeAsLong(MyUtils.getAlarmHour(), MyUtils
                    .getAlarmMinute()), 24 * 60 * 60 * 1000,
            mAlarmSender);
    isAlarmSet = true;
    Log.v(TAG, "TabSample- alarm set");
} else {
    am.cancel(mAlarmSender);
    isAlarmSet = true;
    Log.v(TAG, "TabSample- alarm cancelled");
}
}
public void notifyTabSample(Note what) {
switch (what) {
case FRIENDLIST_RELOADED:
    db.syncFriends(fb.getMyFriends());
    sendBroadcast(new Intent(MyUtils.FRIENDLIST_CHANGED));
    break;
case FRIENDLIST_CHANGED:
    sendBroadcast(new Intent(MyUtils.FRIENDLIST_CHANGED));
    // setup timer
    break;
default:
    break;
}
} 
```

*ContactTab.Java :-*

```
public class ContactTab extends ListActivity {
private MyFacebook fb = MyFacebook.getInstance();
private BcReceiver bcr = null;
private MyAdapter adapter;
private List<MyFriend> list;
private ProgressDialog busyDialog;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    busyDialog = new ProgressDialog(this);
    busyDialog.setIndeterminate(true);
    busyDialog.setMessage("Refreshing");
}

private void refreshList() {

    new Thread() {
        public void run() {
            list = fb.getAllFriends();
            Log.v(TAG, "contactstab- refresh called. " + list.size());
            adapter = new MyAdapter(ContactTab.this, list);
            handler.sendEmptyMessage(0);
        }
    }.start();
}

@Override
protected void onResume() {
    if (bcr == null) {
        bcr = new BcReceiver();
        registerReceiver(bcr, new IntentFilter(MyUtils.FRIENDLIST_CHANGED));
    }
    refreshList();
    super.onResume();
}

@Override

protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    MyFriend friend = (MyFriend) this.getListAdapter().getItem(position);

    Intent intent = new Intent(ContactTab.this, PersonalGreeting.class);
    intent.putExtra("fbID", friend.getFbID());
    intent.putExtra("name", friend.getName());
    intent.putExtra("pic", friend.getPic());
    startActivity(intent);
}

public boolean onCreateOptionsMenu(Menu menu) {
    new MenuInflater(getApplication()).inflate(R.layout.menu, menu);
    return (super.onPrepareOptionsMenu(menu));
}

public boolean onOptionsItemSelected(MenuItem item) {
    Intent intent;
    switch (item.getItemId()) {
    case R.id.globalGreeting:
        intent = new Intent(ContactTab.this, com.chr.tatu.sample.friendslist.GlobalGreeting.class);
        startActivity(intent);
        break;
    case R.id.Settings:
        intent = new Intent(ContactTab.this, com.chr.tatu.sample.friendslist.Settings.class);
        startActivity(intent);
    }
    return (super.onOptionsItemSelected(item));
}

public class BcReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        runOnUiThread(new Runnable() {
            public void run() {
                refreshList();
            }
        });
    }
}

private Handler handler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        setListAdapter(adapter);
        //busyDialog.dismiss();
    }
};
   } 
```

*MonthTab.Java :-*

```
public class MonthTab extends ListActivity {
private MyFacebook fb = MyFacebook.getInstance();
private BcReceiver bcr = null;
private MyAdapter adapter;
private List<MyFriend> list;
private ProgressDialog busyDialog;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    busyDialog = new ProgressDialog(this);
    busyDialog.setIndeterminate(true);
    busyDialog.setMessage("Please wait ...");
    busyDialog.show();
    refreshList();
}

private void refreshList() {
    // list = fb.getFilteredFriends(Filter.MONTH);
    list = fb.getFilteredFriends(Filter.MONTH);
    adapter = new MyAdapter(MonthTab.this, list);
    setListAdapter(adapter);
    busyDialog.dismiss();
}

@Override
protected void onResume() {
    if (bcr == null) {
        bcr = new BcReceiver();
        registerReceiver(bcr, new IntentFilter(MyUtils.FRIENDLIST_CHANGED));
    }
    super.onResume();
}

@Override
@SuppressWarnings("unchecked")
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    MyFriend friend = (MyFriend) this.getListAdapter().getItem(position);

    Intent intent = new Intent(MonthTab.this, PersonalGreeting.class);
    intent.putExtra("fbID", friend.getFbID());
    intent.putExtra("name", friend.getName());
    startActivity(intent);
}

public boolean onCreateOptionsMenu(Menu menu) {
    new MenuInflater(getApplication()).inflate(R.layout.menu, menu);
    return (super.onPrepareOptionsMenu(menu));
}

public boolean onOptionsItemSelected(MenuItem item) {
    Intent intent;
    switch (item.getItemId()) {
    case R.id.globalGreeting:
        intent = new Intent(MonthTab.this, GlobalGreeting.class);
        startActivity(intent);
        break;
    case R.id.Settings:
        intent = new Intent(MonthTab.this, Settings.class);
        startActivity(intent);
    }
    return (super.onOptionsItemSelected(item));
}

public class BcReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        runOnUiThread(new Runnable() {
            public void run() {
                refreshList();
            }
        });
    }
}
   } 
```

# machine-learning - 使用 LIBSVM 时选择什么内核

> ID：14432470
> 
> 赞同：0
> 
> 时间：2013-01-21T04:18:07.773
> 
> 标签：machine-learning, svm, libsvm

我目前正在使用 matlab 中的 libsvm 对两个标签进行分类。我已经提取了这些特征，其中大约有 69 个。我只是想知道是否可以使用线性内核进行具有大约 69 个特征的两类分类。

谢谢

马库斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:25:58.010

它始终取决于数据的性质。如果它是线性可分的，那么线性核就足够了。

如果数据是非线性的并且是局部封装的（换句话说，如果存在一个包含所有数据的超球体——包括新点），那么 RBF 内核听起来像是适合这项工作的内核。

如果数据是非线性的但它没有被封装（所以它可能总是远离你的训练集数据的一个新点）那么你可能想尝试使用一个连续的内核，比如多项式内核）

在高维空间中很难推断出数据的性质，因此大多数时候实际的解决方案是尝试不同的场景并使用交叉验证来选择合适的内核和参数。

然而，有时绘制不同的特征对有助于我了解我的数据性质，但这只是一个非常粗略的指标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T04:44:18.537

是的，完全没问题。我对具有大约 5000 个特征的数据使用了线性内核。（并不是说这是最好的方法，但有可能。）

更好的是，为什么不试试 RBF 内核并比较结果呢？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T04:49:14.903

这真的取决于情况。在不同的场景下，不同内核的结果会有所不同。你需要尝试。

试试RBF核，多项式核。不同的内核给出不同的结果。你得试试。

# c# - 使用 c# 以编程方式最小化应用程序

> ID：14432473
> 
> 赞同：3
> 
> 时间：2013-01-21T04:19:01.190
> 
> 标签：c#, minimize

我有以下代码片段

```
List<String> sensitiveApps = testConnection.SelectSensitive();

foreach (string sensitiveApp in sensitiveApps)
        {
            Console.Write(sensitiveApp);

            // retrieve applications to minimize handle (connect to database and systematically minimize all applications?)
            IntPtr hwnd = UnsafeNativeMethods.FindWindow(sensitiveApp, null);
            StringBuilder stringBuilder = new StringBuilder(256);
            UnsafeNativeMethods.GetWindowText(hwnd, stringBuilder, stringBuilder.Capacity);
            Console.WriteLine(stringBuilder.ToString());

            if (!hwnd.Equals(IntPtr.Zero))
            {
                // SW_SHOWMAXIMIZED to maximize the window
                // SW_SHOWMINIMIZED to minimize the window
                // SW_SHOWNORMAL to make the window be normal size
                ShowWindowAsync(hwnd, SW_SHOWMINIMIZED);
            }
        } 
```

其中sensitiveApps 是包含字符串“Notepad”、“Recuva”和“VLC media player 2.0.3”的列表。

但是，唯一可以使用此代码最小化的应用程序是记事本。调试程序发现

```
Console.WriteLine(stringBuilder.ToString()); 
```

不会为最后 2 个程序返回任何值，但会返回一个无标题 - 记事本。

有什么我做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T05:03:44.800

尝试使用[Spy++](http://msdn.microsoft.com/en-us/library/aa264396%28VS.60%29.aspx)并检查 FindWindow 名称是否正确。

*MS Word 是 OpusApp，VLC 是 QWidget。*

# twitter-bootstrap - 关于动态添加元素的 Twitter Bootstrap 工具提示

> ID：14432478
> 
> 赞同：0
> 
> 时间：2013-01-21T04:19:31.110
> 
> 标签：twitter-bootstrap

工具提示（弹出框）是否应该适用于新添加的元素？

如果它们只是用 jquery 插入圆顶：

关联

只有在我手动附加 $('a').tooltip() 插件后，它才对我有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T04:28:00.343

是的，您应该调用`.tooltip()`" 来初始化它，尤其是在动态插入新元素时。大多数插件也是如此。

否则，您将不得不实现一个侦听器来检查是否添加了任何需要工具提示的元素（即 via`setTimeout`等）；这不会那么有效。

另一方面; 一些插件功能可能不完全依赖于 Javascript 触发器。当创建新元素并在样式表中具有引用的 CSS 类或 id 时，纯 CSS 控件将始终选择它。

# asp.net - 仅针对 10000 条记录引发了“System.OutOfMemoryException”类型的异常

> ID：14432480
> 
> 赞同：0
> 
> 时间：2013-01-21T04:19:49.080
> 
> 标签：asp.net

当用户尝试在 excel 表 (.xlsx) 中上传数据时，我收到此错误。它不是一个永久性的问题。我曾经遇到过这个问题，可能一周一次。但今天它经常发生。

```
 private void ExportToExcelOpenOffice(DataTable dataDump)
    {

        long? empUserId = null;
        bool showTeamData = false;

        if (this.IsUserEntryValid())
        {
            if (CurrentUser.Details.UserType == UserType.User)
            {
                empUserId = CurrentUser.Details.EmployeeUserId;
                showTeamData = true;
            }

            if (dataDump.IsValid(true))
            {
                // ExcelHelper.ToExcel(dataDump, "ELogger_DataDump.xls", this.Response);
                // RichExcelHelper.ToExcel(dataDump, "ELogger_DataDump.xls", this.Response);

                using (ExcelPackage pck = new ExcelPackage())
                {
                    ExcelWorksheet ws = pck.Workbook.Worksheets.Add("Page 1");
                    ws.Cells["A1"].LoadFromDataTable(dataDump, true);

                    //Write it back to the client
                    Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
                    Response.AddHeader("content-disposition", "attachment;  filename=ELogger_DataDump.xlsx");
                    Response.BinaryWrite(pck.GetAsByteArray());
                    Response.Flush();
                    Response.End();
                }

            }
            else
            {
                lblMessage.Visible = true;
                lblMessage.Text = "No records found.";
            }
        }
        else
        {
            lblMessage.Visible = true;
            lblMessage.Text = this.errorMessage;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T20:10:24.217

> 好吧，只是为了让任何一个到达这里的人遇到类似的问题。让我澄清一下，上面提到的代码没有任何问题。我优化了我的 Sql 存储过程。我做的一件事是我向某些列添加了非聚集索引，从而提高了性能。
> 
> 在存储过程中也很少进行其他与业务需求相关的更改。
> 总而言之，优化查询对我有用。

# php - 调试 PHP 文件上传器

> ID：14432485
> 
> 赞同：0
> 
> 时间：2013-01-21T04:20:27.133
> 
> 标签：php, forms, file, debugging, upload

我在测试站点上制作文件上传表单时遇到问题。使用的教程：

*   [http://www.tizag.com/phpT/fileupload.php](http://www.tizag.com/phpT/fileupload.php)
*   [http://p2p.wrox.com/php-faqs/11585-q-how-do-i-upload-file-directory.html](http://p2p.wrox.com/php-faqs/11585-q-how-do-i-upload-file-directory.html)

在第一种情况下，在创建表单和 PHP 文件之后，它会说它没有给出任何理由就无法上传文件（根据给出的代码，这不足为奇）。然后我尝试使用第二个教程重做它，即使在我修改了代码之后它也给了我更多信息（一个有效的文件还没有上传）所以它在那个 IF 门检查的唯一事情就是大小是否太大的。

我搜索了一会儿，发现有人推荐 dumping `$_FILES`，它给出了一个空数组。其他人建议 echoing `$_FILES['userfile']['error']`，但没有提供任何信息。

所以我检查以确保表单具有正确的 enctype（确实如此）。然后我从 cpanel 检查了 PHP 信息。上传文件已启用，最大大小为 2M（我尝试上传的内容小于此大小）。

我不知道下一步该去哪里解决这个问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T04:23:43.937

在脚本顶部打开错误报告，从该列表中选择适合您需要的错误报告：

```
<?php

// Turn off all error reporting
error_reporting(0);

// Report simple running errors
error_reporting(E_ERROR | E_WARNING | E_PARSE);

// Reporting E_NOTICE can be good too (to report uninitialized
// variables or catch variable name misspellings ...)
error_reporting(E_ERROR | E_WARNING | E_PARSE | E_NOTICE);

// Report all errors except E_NOTICE
// This is the default value set in php.ini
error_reporting(E_ALL ^ E_NOTICE);

// Report all PHP errors (see changelog)
error_reporting(E_ALL);

// Report all PHP errors
error_reporting(-1);

// Same as error_reporting(E_ALL);
ini_set('error_reporting', E_ALL);

?> 
```

还要检查服务器上的错误日志是否有错误。:) 这是解决大多数问题的最佳方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-25T19:42:34.493

If changing any of the above parameters doesn't seem to make any difference, it can be that a html form somewhere contains the name MAX_FILE_SIZE as a hidden field.

`<input type="hidden" name="MAX_FILE_SIZE" value="10000000">`

In the example above, any file over 10MB will not be uploaded.

# javascript - Javascript。可以在拆分词上添加 id 吗？使用 word.split("")

> ID：14432491
> 
> 赞同：-1
> 
> 时间：2013-01-21T04:21:13.307
> 
> 标签：javascript

```
var wtc = document.getElementById("sw").value;
var cw = wtc.split("").join('&nbsp;&nbsp;&nbsp;&nbsp;');
cw.toString();
var x=document.getElementById("demo");
x.innerHTML=cw; 
```

我有这个代码。我如何将 id 添加到拆分（我对我的任期是否正确？？）这个词.. 有可能吗？我想要的是在每个拆分的字母上添加 id。我不知道字母的确切数量，因为它取决于用户输入的单词。

例如。我有这个词来自分裂。

```
[W][O][R][M] 
```

我希望它是这样的。或任何有 id 的东西 :)

```
<div id="DIVtext1">W</div> 
<div id="DIVtext2">O</div> 
<div id="DIVtext3">R</div> 
<div id="DIVtext4">M</div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T04:33:07.270

你的意思是这样的：

```
var word = "WORM".split("");
var demoEle = document.getElementById("demo");
for(var w = 0, len = word.length; w < len; w++) {
    var divEle = document.createElement("div");
    divEle.id = "DIVtext"+(w+1);
    divEle.onclick = (function(v) { 
        return function() { copyDiv( "DIVtext" + (v+1) ) };
    })(w);
    divEle.innerHTML = word[w];
    demoEle.appendChild( divEle );
} 
```

演示：[jsFiddle](http://jsfiddle.net/PTuZR/)

更新演示:: [jsFiddle 更新](http://jsfiddle.net/PTuZR/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T04:27:03.230

您可以使用循环 ( `for(i=0;i<splittedArray;i++)`) 和 jQuery 将 div 标签添加到 dom，其中 innerHtml 是单词。

基本上，一旦你把它放在你的阵列中，你就可以把它放在你想要的任何地方。我发现 jQuery 让它变得简单；但是，您也可以单独通过 jscript 来完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T04:27:10.773

这可以很容易地使用**[jQuery](http://www.jquery.com/)**来实现。

```
var letters = $('#sw').val().split('');

$.each(letters, function(i, letter) {
    $('<div />', {
        id: 'DIVtext'+ i,
        text: letter
    }).appendTo('#demo');
}); 
```

**[JSFiddle](http://jsfiddle.net/2E6zk/)**

如果 jQuery 不是一个选项，这就是你可以用 vanilla JS 做的事情。

```
var letters = document.getElementById('sw').value.split(''),
    demo = document.getElementById('demo');

for(var i = 0; i < letters.length; i++) {
    var letter = document.createElement('div');

    letter.innerHTML = letters[i];
    letter.id = 'DIVtext'+ i;

    demo.appendChild(letter);
} 
```

**[JSFiddle](http://jsfiddle.net/uhukv/)**

# paypal - 如何通过 Paypal API 获取用户国家

> ID：14432496
> 
> 赞同：2
> 
> 时间：2013-01-21T04:21:59.917
> 
> 标签：paypal

是否可以使用他们的电子邮件获取国家/地区？或验证用户的国家。在我们的系统中，用户提交他们的电子邮件和国家。我们需要检查国家是否正确指定。

对不起我的英语不好。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T04:58:06.150

您必须强制用户登录贝宝（您不想允许没有贝宝帐户的人进行交易）

见[SetExpressCheckout](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_SetExpressCheckout) `SOLUTIONTYPE = Mark`

在用户完成快速结账后，为了确认它，您应该检查它的街道地址是否已确认，是否是您需要的国家：

[GetExpressCheckout详细信息](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_GetExpressCheckoutDetails)

```
PAYERSTATUS must be "verified"
COUNTRYCODE must be the country you require 
```

如果这两个值都ok，可以通过“DoExpressCheckoutPayment”确认支付

* * *

因为你是新人，如果你喜欢我的回答，别忘了把它设置为“接受”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-29T15:18:23.657

在不启动交易的情况下验证客户的 PP 帐户国家/地区的替代解决方案是使用您自己的客户登录/注册管理实施“使用 PayPal 登录”。

它基于 PayPal REST 身份 API，您可以更轻松地获取和管理客户帐户信息（在用户同意的情况下）。

这是供您参考的开发资源：[https ://developer.paypal.com/docs/integration/direct/identity/](https://developer.paypal.com/docs/integration/direct/identity/)

# php - PHP 日期返回错误

> ID：14432497
> 
> 赞同：0
> 
> 时间：2013-01-21T04:22:07.667
> 
> 标签：php

我正在从格式化的 MySQL 数据库中提取日期值，因为`01/20/13`我在返回的值上调用 PHP 日期函数以获取它是星期几，`01/20/13`今天的日期也是星期天，但它一直返回星期三的值。我已经包含了下面的代码我是编程新手，所以这可能是我忽略的一个愚蠢的错误。

```
<?php

        require '../TimeCard/DB.php';

    try{
    $stmt = $conn->prepare('SELECT `date` FROM `timeRecords` WHERE `employeeID`= 1 ');
    $stmt->execute();
    } catch(PDOException $e){
        echo'ERROR: ' . $e->getMessage();
    }

    while($row = $stmt->fetch())
  {
    echo date("l", $row['date']) . "<br>";
    echo $row['date'] . "<br>";
  }

        ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T04:23:40.650

Mysql 不会将日期存储为 m/d/y 它将它们存储为 Ymd 你是 mysql 数据库会将“01/20/13”变成 0000-00-00。

但是，如果您不使用日期类型，并将其存储为字符串，请使用

```
strtotime($row['date']) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T04:23:48.863

在你的mysql存储日期上使用strtotime，然后在它上面使用日期函数

```
$day = date('l',strtotime($row['date'])); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T04:24:32.697

尝试使用[strtotime()](http://php.net/manual/en/function.strtotime.php)

```
echo date("l", strtotime($row['date'])) . "<br>"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T04:26:02.413

PHP 函数的第二个参数[`date()`](http://php.net/manual/en/function.date.php)是一个整数时间戳。你会有更好的运气使用[`DateTime`](http://php.net/manual/en/class.datetime.php)，例如

```
$dt = DateTime::createFromFormat('m/d/y', $row['date']);
echo $dt->format('l'); 
```

这为您提供了额外的好处，即定制日期解析器以匹配您的源格式，而不是依赖于`strtotime()`哪个肯定有其怪癖，例如将带有正斜杠的日期（13 年 10 月 12 日）视为美国（10 月 12 日）与带有连字符的日期(10-12-13) 作为欧盟 (12 月 10 日)

这里的例子 - [http://codepad.viper-7.com/iVXxA1](http://codepad.viper-7.com/iVXxA1)

# ruby - 在 Ruby 中，如何将另一个目录中的文件指定为输入？

> ID：14432498
> 
> 赞同：2
> 
> 时间：2013-01-21T04:22:09.607
> 
> 标签：ruby, relative-path, directory

这可能有一个简单的答案，但我正在开发一个需要位于不同文件夹中的输入文件的测试套件。我想使用相对路径，如下所示：

```
@graph = Graph.new('../lib/test_input.txt') 
```

但鲁比不喜欢那样。使用这样的相对文件路径的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T04:29:08.113

如果您的意思是相对于当前文件，您可能需要以下内容：

```
@graph = Graph.new(File.expand_path(__FILE__, "../lib/test_input.txt")) 
```

如果您的意思是相对于当前目录，您可能需要以下内容：

```
@graph = Graph.new(File.expand_path(Dir.pwd, "../lib/test_input.txt")) 
```

[奖金链接！](http://ruby-doc.org/core-1.9.3/File.html#method-c-expand_path)

# image-processing - 具有 2D 贝塞尔曲面的图像扭曲

> ID：14432499
> 
> 赞同：5
> 
> 时间：2013-01-21T04:22:17.430
> 
> 标签：image-processing

有谁知道 2D Bezier Surface 的实现？如果您查看[此链接](http://fatlinesofcode.philipandrews.org/2011/02/20/warping-bitmaps-with-a-bezier-surface/)，作者使用了一个为他执行此操作的 flash 库。我想做同样的事情，除了我需要自己实现一个常规图像，并将其转换为贝塞尔曲面。

我相信他的实现映射到用于扭曲图像的三角形几何网格。根据[这个链接](http://web.cs.wpi.edu/~matt/courses/cs563/talks/surface/bez_surf.html)和[这篇文章](https://stackoverflow.com/questions/10887782/generating-polygon-mesh-from-control-points-of-bezier-patch)，如果你把它分解直到你得到一个像素级的映射，那么质量会因为速度而提高。最终我对最高质量感兴趣，所以牺牲速度是可以的。

有人知道这样的实现吗？我将用 C# 编写它，但任何 Java/C++/C/Py/伪代码都将不胜感激 - 已经找了好几天了！

# java - java中是否有唯一标识对象的方法

> ID：14432501
> 
> 赞同：2
> 
> 时间：2013-01-21T04:22:32.773
> 
> 标签：java, object, jvm

我搜索了这些问题，但没有找到任何令人满意的答案。

[jvm中的Java对象ID](https://stackoverflow.com/q/3289550/1176000)

在 Cpp/C++ 中，我可以使用对象地址来检查两个对象的地址，说这两个对象是相同的，或者是不同的对象但具有相同的值。在python中，我可以使用id方法来获取每个对象的ID 在java中，有没有不需要重新实现的方法`hashCode()`来做到这一点？我想可能根据JVM，下次可能会释放和回收对象，那么java中没有这种方法吗？我对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T04:59:26.347

我不打算在这里尝试答案，但需要更正。文档中的实际措辞是：

> **尽可能合理地实用**，由 Object 类定义的 hashCode 方法确实为不同的对象返回不同的整数。（这**通常**通过将对象的内部地址转换为整数来实现，**但 JavaTM 编程语言不需要这种实现技术**。）

这*不能*保证哈希码是唯一的，只是实现尝试使它们唯一。此外，按理说，如果将一个 64 位物理地址（对于 64 位 JVM）折叠成一个 32 位哈希值，则必须存在别名，实际上每个哈希值有 40 亿个别名。

Java API 特别避免提供对物理地址的访问，因为它希望允许 JVM 使用复制收集器，其中对象的物理地址可以随时更改。

即使对于 32 位 JVM，如果有一个复制收集器，并且对象的哈希是在创建时从其地址计算的，那么该对象被复制到不同的代（通常发生），相同的哈希很可能是为在短暂（年轻）代的同一位置创建的不同新对象计算。

毫无疑问，由于性能开销，Java 默认不提供唯一 ID。如果需要，可以使用静态计数器自己实现它们，以便在各自的构造函数中分配唯一的 id，这很简单。

```
interface ObjectWithUniqueId {
  public long getId();
}

class BaseObjectWithUniqueId implements ObjectWithUniqueId {
  private static long currentId = 0;
  private final long id;
  // TODO Synchronize me if we are in a multithreaded environment!
  public BaseObjectWithUniqueId() {  id = ++currentId; }
  public long getId() { return id }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T04:47:39.167

答案是不。根据 Object.hashCode API `the hashCode method defined by class Object does return distinct integers for distinct objects`。如果即使 Object.hashCode 是基于对象地址的，它也不能保证唯一性，因为 Java 对象可以通过 GC 在堆上移动。

# networking - 这个霍夫曼表是如何创建的？

> ID：14432503
> 
> 赞同：2
> 
> 时间：2013-01-21T04:22:43.240
> 
> 标签：networking, language-agnostic, probability, huffman-code

我有一张表格，显示事件发生的概率。我对第 1 部分很好，但第 2 部分不适合我。我试图弄清楚第 2 部分中二进制数是如何得出的？

我知道 0 被分配给最大概率，我们从那里开始工作，但是我们如何计算出下一组二进制数是什么？数字周围的圆圈意味着什么/ 2个灰色阴影区分？

它只是没有点击。也许有人可以用一种让我理解的方式来解释它？

![图1](../Images/8b1595b6fc3c8ee2bf13f80287a49701.png) ![图 2](../Images/005d88db70096eb7167868f3da029892.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T07:14:42.690

要构建霍夫曼代码，一种方法是构建二叉树，使用优先队列，其中插入要分配代码的数据，按频率排序。

首先，您有一个只有叶节点的队列，代表您的每个数据。

在每个步骤中，您从队列中取出两个最低优先级节点，创建一个频率等于两个已删除节点之和的新节点，然后将这两个节点作为左右子节点附加。这个新节点会根据它的频率重新插入到队列中。

重复此操作，直到队列中只有一个节点，即根节点。

现在您可以从根到任何叶节点遍历树，并且您在每个级别所走的路径（无论是向左还是向右）都会给您一个 0 或 1，以及路径的长度（向下多远）节点所在的树）为您提供代码的长度。

实际上，您可以在构建树时构建此代码，但在每个节点的代码中附加 0 或 1，具体取决于它所属的子树是添加到某个新父节点的左侧还是右侧.

在您的图表中，圆圈中的数字表示在构建树的每个阶段已组合的两个节点的频率之和。

您还应该看到被组合的两者被分配了不同的位（一个为 0，另一个为 1）。

图表可能会有所帮助。为我的手写道歉：

![在此处输入图像描述](../Images/a9e0b7aaca65cf4d5d7128c52ce481be.png)

# java - 设置图标在 JLabel 上给出错误

> ID：14432509
> 
> 赞同：1
> 
> 时间：2013-01-21T04:23:19.713
> 
> 标签：java, eclipse, swing, jlabel, windowbuilder

我在尝试更改`JLabel`. 我在eclipse中使用windowbuilder插件来制作这个程序，所以只需忽略标签的所有错误命名选择以及所有这些，它们稍后会被更改。

我遇到的错误是在我尝试更改图标的代码底部`label_1`，我收到以下消息。

> jlabel 类型中的方法 seticon(icon) 不适用于参数（字符串）

有谁知道这可能是什么？

这是我的代码。对不起，它很长，我想那是你的窗口构建器：

```
import java.awt.EventQueue;
import javax.swing.*;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;
import javax.swing.JLabel;
import java.awt.Font;
import javax.swing.JButton;
import java.awt.Color;
import javax.swing.ImageIcon;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
public class Game  {
public Timer bomb1;
public JLabel label;
public JLabel label_1;
public JLabel lblScore;
public JButton btnQuit;
public JLabel label_2;
public JLabel label_3;
public JLabel label_4;
public JLabel label_5;
public JLabel label_6;
public JLabel label_7;
public JLabel label_8;
public JLabel label_9;
public JLabel label_10;
public JLabel label_11;
public JLabel label_12;
public JLabel label_13;
public JLabel label_14;
public JLabel label_15;
public JLabel label_16;
public JLabel lblDodgeTheBombs;
public JFrame frame;
private JPanel contentPane;
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                Game window = new Game();
                window.frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}
public Game() {
    frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setBounds(100, 100, 489, 512);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    frame.setContentPane(contentPane);
    contentPane.setLayout(null);

    label_1 = new JLabel("");
    label_1.setIcon(new ImageIcon("C:\\Users\\Josh\\Desktop\\WHITE.png"));
    label_1.setBackground(Color.WHITE);
    label_1.setBounds(59, 44, 80, 80);
    contentPane.add(label_1);

    label = new JLabel("0");
    label.setFont(new Font("Tahoma", Font.PLAIN, 14));
    label.setBounds(71, 12, 46, 14);
    contentPane.add(label);

    lblScore = new JLabel("Score:");
    lblScore.setFont(new Font("Tahoma", Font.PLAIN, 14));
    lblScore.setBounds(28, 11, 45, 17);
    contentPane.add(lblScore);

    btnQuit = new JButton("Quit");
    btnQuit.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            frame.dispose();
        }
    });
    btnQuit.setBounds(359, 10, 89, 23);
    contentPane.add(btnQuit);

    label_2 = new JLabel("");
    label_2.setIcon(new ImageIcon("C:\\Users\\Josh\\Desktop\\WHITE.png"));
    label_2.setBackground(Color.WHITE);
    label_2.setBounds(149, 44, 80, 80);
    contentPane.add(label_2);

    label_3 = new JLabel("");
    label_3.setIcon(new ImageIcon("C:\\Users\\Josh\\Desktop\\WHITE.png"));
    label_3.setBackground(Color.WHITE);
    label_3.setBounds(239, 44, 80, 80);
    contentPane.add(label_3);

    label_4 = new JLabel("");
    label_4.setIcon(new ImageIcon("C:\\Users\\Josh\\Desktop\\WHITE.png"));
    label_4.setBackground(Color.WHITE);
    label_4.setBounds(329, 44, 80, 80);
    contentPane.add(label_4);

    label_5 = new JLabel("");
    label_5.setIcon(new ImageIcon("C:\\Users\\Josh\\Desktop\\WHITE.png"));
    label_5.setBackground(Color.WHITE);
    label_5.setBounds(59, 138, 80, 80);
    contentPane.add(label_5);

    label_6 = new JLabel("");
    label_6.setIcon(new ImageIcon("C:\\Users\\Josh\\Desktop\\WHITE.png"));
    label_6.setBackground(Color.WHITE);
    label_6.setBounds(149, 135, 80, 80);
    contentPane.add(label_6);

    label_7 = new JLabel("");
    label_7.setIcon(new ImageIcon("C:\\Users\\Josh\\Desktop\\WHITE.png"));
    label_7.setBackground(Color.WHITE);
    label_7.setBounds(239, 135, 80, 80);
    contentPane.add(label_7);

    label_8 = new JLabel("");
    label_8.setIcon(new ImageIcon("C:\\Users\\Josh\\Desktop\\WHITE.png"));
    label_8.setBackground(Color.WHITE);
    label_8.setBounds(329, 135, 80, 80);
    contentPane.add(label_8);

    label_9 = new JLabel("");
    label_9.setIcon(new ImageIcon("C:\\Users\\Josh\\Desktop\\WHITE.png"));
    label_9.setBackground(Color.WHITE);
    label_9.setBounds(329, 320, 80, 80);
    contentPane.add(label_9);

    label_10 = new JLabel("");
    label_10.setIcon(new ImageIcon("C:\\Users\\Josh\\Desktop\\WHITE.png"));
    label_10.setBackground(Color.WHITE);
    label_10.setBounds(59, 229, 80, 80);
    contentPane.add(label_10);

    label_11 = new JLabel("");
    label_11.setIcon(new ImageIcon("C:\\Users\\Josh\\Desktop\\WHITE.png"));
    label_11.setBackground(Color.WHITE);
    label_11.setBounds(149, 229, 80, 80);
    contentPane.add(label_11);

    label_12 = new JLabel("");
    label_12.setIcon(new ImageIcon("C:\\Users\\Josh\\Desktop\\WHITE.png"));
    label_12.setBackground(Color.WHITE);
    label_12.setBounds(239, 229, 80, 80);
    contentPane.add(label_12);

    label_13 = new JLabel("");
    label_13.setIcon(new ImageIcon("C:\\Users\\Josh\\Desktop\\WHITE.png"));
    label_13.setBackground(Color.WHITE);
    label_13.setBounds(329, 229, 80, 80);
    contentPane.add(label_13);

    label_14 = new JLabel("");
    label_14.setIcon(new ImageIcon("C:\\Users\\Josh\\Desktop\\WHITE.png"));
    label_14.setBackground(Color.WHITE);
    label_14.setBounds(239, 320, 80, 80);
    contentPane.add(label_14);

    label_15 = new JLabel();
    label_15.setIcon(new ImageIcon("C:\\Users\\Josh\\Desktop\\WHITE.png"));
    label_15.setBackground(Color.WHITE);
    label_15.setBounds(149, 320, 80, 80);
    contentPane.add(label_15);

    label_16 = new JLabel("");
    label_16.setIcon(new ImageIcon("C:\\Users\\Josh\\Desktop\\WHITE.png"));
    label_16.setBackground(Color.WHITE);
    label_16.setBounds(59, 323, 80, 80);
    contentPane.add(label_16);

    lblDodgeTheBombs = new JLabel("Dodge the bombs!");
    lblDodgeTheBombs.setForeground(Color.RED);
    lblDodgeTheBombs.setFont(new Font("Tahoma", Font.PLAIN, 25));
    lblDodgeTheBombs.setBounds(137, 418, 217, 33);
    contentPane.add(lblDodgeTheBombs);

    bomb1 = new Timer(1000, new TimerListener());
    bomb1.start();
}
private class TimerListener implements ActionListener {
    public void actionPerformed(ActionEvent e) {
        label_1.setIcon("C:\\Users\\Josh\\Desktop\\blank.png");

    }
}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T04:43:39.720

> jlabel 类型中的方法 seticon(icon) 不适用于参数（字符串）

是的，因为根据[此处](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JLabel.html#setIcon%28javax.swing.Icon%29)找到的文档，setIcon() 接受图标作为参数而不是字符串。所以，你的代码应该是......

```
label_1.setIcon(new ImageIcon("C:\\Users\\Josh\\Desktop\\blank.png")); 
```

我建议您将来使用文档。这真的是一个非常好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T04:41:33.530

我认为错误消息对于出了什么问题是不言自明的。“setIcon()”方法需要 Icon 类的实例而不是字符串实例。

```
jLabelObject.setIcon("string")    // Do not pass image path 
```

# winapi - 关于 windows GDI 的困惑。新手程序员

> ID：14432510
> 
> 赞同：4
> 
> 时间：2013-01-21T04:23:25.127
> 
> 标签：winapi

我是一名中国学生，这是我在外国论坛上提出的第一个问题。我写了两个程序，一个可以正常运行，另一个失败。

这是正常的：

 **```
 case WM_PAINT:
      hdc = BeginPaint (hwnd, &ps) ;

      if(fIsTime)
          ShowTime(hdc, &st);
      else
          ShowDate(hdc, &st);

      EndPaint (hwnd, &ps) ;
      return 0 ; 
```*  *这是失败的一个：

 **```
 case WM_PAINT:
      hdc = BeginPaint (hwnd, &ps) ;
      hdcMem = ::CreateCompatibleDC(hdc);
      hBitmap = ::CreateCompatibleBitmap(hdc, cxClient, cyClient);
      ::SelectObject(hdcMem, hBitmap);

      if(fIsTime)
          ShowTime(hdcMem, &st);
      else
          ShowDate(hdcMem, &st);
      ::BitBlt(hdcMem, 0, 0, cxClient, cyClient, hdc, 0, 0, SRCCOPY);

      ::DeleteObject(hBitmap);
      ::DeleteDC(hdcMem);
      EndPaint (hwnd, &ps) ;
      return 0 ; 
```*  *两个代码之间唯一的区别是`WM_Paint`代码块，后一个不能显示任何东西。我对后一个代码中的错误在哪里感到困惑？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T04:37:13.227

您最大的问题是您为`BitBlt`呼叫交换了源 DC 和目标 DC。第一个参数应该是目的地，而不是来源。

此外，当您将位图设置为 DC 时，您必须记住返回给您的旧值并在完成后恢复它。

尝试以下操作：

```
 hdc = BeginPaint (hwnd, &ps) ;
  hdcMem = ::CreateCompatibleDC(hdc);
  hBitmap = ::CreateCompatibleBitmap(hdc, cxClient, cyClient);
  hbmpOld = ::SelectObject(hdcMem, hBitmap);

  if(fIsTime)
      ShowTime(hdcMem, &st);
  else
      ShowDate(hdcMem, &st);
  ::BitBlt(hdc, 0, 0, cxClient, cyClient, hdcMem, 0, 0, SRCCOPY);

  ::SelectObject(hdcMem, hbmpOld);
  ::DeleteObject(hBitmap);
  ::DeleteDC(hdcMem);
  EndPaint (hwnd, &ps) ;
  return 0 ; 
```****

# macos - 如何使用 shell 命令从钥匙串中删除密码？

> ID：14432511
> 
> 赞同：2
> 
> 时间：2013-01-21T04:23:32.523
> 
> 标签：macos, shell, terminal, automator

我想制作一个 shell 脚本，通过创建网络连接到我的 macbook pro 上的隐藏无线网络。但是，我只想在需要时连接到该网络，并且为了防止机场自动连接，我必须从钥匙串中删除网络密码。

到目前为止，我有：

```
networksetup -setairportnetwork en1 $ssid $networkpassword
networksetup -removepreferredwirelessnetwork en1 $ssid 
```

我还知道在 OSX 10.7 中该`security`命令可以修改钥匙串。

无论如何，我将不胜感激有人可以给我的任何帮助。如果可行，我也愿意使用 applescript 或其他东西。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T06:44:15.867

我想到了。我使用的命令是：

```
sudo security delete-generic-password -l $ssid "/Library/Keychains/System.keychain" 
```

sudo 是必需的，因为此钥匙串位于系统库中。`security`还包含更多删除和有用的命令，您可以指定如何在此命令中指示位置。

* * *

编辑：我在使用这个命令时遇到了一些麻烦，然后回过头来得知我可以使用另一个命令来完全不记得如果我找到它之前会使用的网络。使用此选项，您可以使用适配器和 networksetup 选项做很多事情。

这是我的最终脚本，它首先以 root 身份运行。然后它将系统偏好更改为不记住新网络。然后它会断开与任何当前网络的连接。然后它添加新网络。最后，它使系统记住新的 wifi 网络。

```
sudo -i
sudo /System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport prefs RememberRecentNetworks=NO
sudo /System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport -Z
networksetup -setairportnetwork en1 $ssid $password
sudo /System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport prefs RememberRecentNetworks=YES 
```

# c# - 验证在 Action 委托中执行的代码

> ID：14432517
> 
> 赞同：1
> 
> 时间：2013-01-21T04:24:15.077
> 
> 标签：c#, unit-testing, moq

这是界面：

```
public interface IFacebookChatClient
{
    Action OnLogin { get; set; }
    bool Login(string apiKey, string accessToken);
    void SendMessage(string message, string receiverId);
    void Close();
} 
```

这是一个示例用法：

```
client.Login("...", "...");

client.OnLogin = () =>
{
    client.SendMessage("Testing", "Hello World!");
    client.Close();
}; 
```

在单元测试中，我想验证`SendMessage`是用特定值调用的。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:13:54.590

这可以通过将*属性行为*附加到`OnLogin`属性来实现：

```
var mock = new Mock<IFacebookChatClient>();
// Tell mock to treat OnLogin as regular property
// Second parameter is initial value (doesn't matter in your case)
mock.SetupProperty(m => m.OnLogin, () => { });

// perform test

mock.Verify(m => m.SendMessage("Testing", "Hello World!")); 
```

通常，尝试调用属性 getter 会导致`NullReferenceException`除非`SetupGet`作为模拟初始化的一部分被调用。这里的问题是，我们不想从 getter 返回固定值，因为它是由测试代码设置的。我们需要财产作为财产，没有起订量。就是`SetupProperty`这样 - 告诉 Moq 属性设置器/获取器应该保持不变。

# schema - 如何为 Pig 中的包装元组指定字段名称？

> ID：14432518
> 
> 赞同：0
> 
> 时间：2013-01-21T04:24:24.843
> 
> 标签：schema, apache-pig

我有一个元组，其架构`(a:int, b:int, c:int)`存储在 alias 中`first`。我想将每个元组转换为`second`与这样的模式建立新关系：

```
(d: (a:int, b:int, c:int)) 
```

基本上，我已经将我的初始元组包装在另一个元组中并命名了该字段。这是为`cross`我想要跨越两个关系但将每个关系保留在一个命名字段中的操作做准备。

这是我期望它的样子，除了有一个错误：

```
second = FOREACH first GENERATE TOTUPLE(*) AS (d:tuple); 
```

这也出错了：

```
second = FOREACH first GENERATE TOTUPLE(*) AS (d:tuple (a:int, b:int, c:int)); 
```

谢谢！乌里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:29:41.153

关于什么：

```
second = FOREACH first GENERATE TOTUPLE(*) AS d;
describe second;
second: {d: (a: int,b: int,c: int)} 
```

# android - 通话的背景音乐

> ID：14432521
> 
> 赞同：3
> 
> 时间：2013-01-21T04:24:36.820
> 
> 标签：android, phone-call, background-music

我想开发一个播放背景音乐的应用程序，并且只有呼叫者和听众才能听到。是否有任何已经可用的应用程序，是否可以在 android 中使用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T06:31:15.983

一些移动平台确实在平台级别支持此功能（例如，我已经使用 Qualcomm APQ8064 对此进行了测试，我已经相应地配置了硬件编解码器路由，并且它可以工作）。但是 Android 没有 API 可以让你作为应用程序开发人员使用它，所以在非 root 手机上，你真的无能为力。
为什么没有它的 API——或者未来的 Android 版本中是否会有 API——我不知道。在某些市场中可能存在法律问题，或者可能只是因为它被认为是一种半晦涩的功能，他们没有看到很大的需求，并且仅由相对较少的平台支持。

另一件要考虑的事情是，你*真的*想在通话期间在后台播放音乐吗？
音频将是 8 kHz 单声道（如果您在进行宽带通话，则为 16 kHz 单声道），并且将与其他语音信号一起进行 AMR 编码（AMR 是一种低比特率编解码器，专为编码语音）。换句话说，您通过语音呼叫上行链路播放的任何音乐听起来都会非常非常糟糕。

**更新：**对于您具有 root 访问权限的基于 APQ8064 的手机，该过程将是这样的（我不记得我脑海中的确切语法）：

```
audioManager.setParameters("incall_music_enabled=true");

// Execute the following using e.g. Runtime.exec()
amix 'SLIMBUS_4_RX Audio Mixer MultiMedia2' 1
aplay -Dhw:0,1 mono_8khz_data.pcm

// When you want to stop music playback, stop the aplay process, and then do
audioManager.setParameters("incall_music_enabled=false"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T04:37:35.937

目前没有办法做到这一点，因为硬件不支持它。

# mongodb - Mongoose js：如何删除多个子文档？

> ID：14432523
> 
> 赞同：0
> 
> 时间：2013-01-21T04:24:56.933
> 
> 标签：mongodb, mongoose

我需要从集合中删除子文档

```
tasks = item.tasks; // item is mongodb collection element, tasks is array of sub docs

tasks.forEach(function(task){
if (!task.finished)
     tasks.remove(task)
})

item.save() 
```

之后，我得到的情况并非所有带有finished==true的子文档都被删除。

还有其他更正确的方法来做我需要的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:44:37.350

您可以使用`update`with[`$pull`](http://docs.mongodb.org/manual/reference/operator/pull/#_S_pull)运算符以原子方式执行此操作：

```
Items.update({_id: item._id}, {$pull: {tasks: {finished: true}}}, ...); 
```

似乎您也可以这样做，[`MongooseArray#pull`](http://mongoosejs.com/docs/api.html#types_array_MongooseArray-pull)但是上面的文档太薄了，我从来没有弄清楚如何使用它。

# scala - sbt retrieveManaged 不会获取使用 publish-local 生成的 jar

> ID：14432528
> 
> 赞同：3
> 
> 时间：2013-01-21T04:25:34.847
> 
> 标签：scala, sbt

假设我有一个项目，我曾经在其中`sbt publish-local`生成 .jar 文件的本地副本`~/.ivy2/local`。

同一台机器上的另一个 sbt 项目可以成功定位这些 jar 以满足依赖关系。但是，如果在那个项目中我使用 option `retrieveManaged := true`，sbt 永远不会将 jar 复制`~/.iv2/local`到`lib_managed`目录中。

> 我怎样才能做到这一点？（这种行为是有意的吗？）

（我使用的是 sbt 0.12.1。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T21:51:28.200

我正在使用相同的设置。当我更新本地发布的依赖项时，我首先删除托管 jar，然后运行更新：

```
$ rm -r lib_managed/jars/my-package-prefix
$ sbt test:compile 
```

（`test:compile`将找出罐子丢失并`update`自行完成）。

在旧版本的 sbt 中，我相信在使用`-SNAPSHOT`版本时会出现问题，但在 sbt 0.12 中我再也没有看到这个问题。

在极少数情况下，Ivy 缓存会出现问题，因此您无法强制执行更新。当使用损坏的 Ivy 元数据文件时，可能就是这种情况。`~/.ivy2/local`然后唯一的解决方案是从and中擦除所有出现的依赖`~/.ivy2/cache`项，重新发布并重新更新。

# ios - 这个日期是什么格式？

> ID：14432529
> 
> 赞同：1
> 
> 时间：2013-01-21T04:25:41.003
> 
> 标签：ios, nsdateformatter

*2012-05-02T15:44:20.000Z*是什么格式

 *我一直试图让它解析，但在这部分有一些问题。

```
NSString *articleDateString = [item valueForChild:@"published"];
        NSDate *articleDate = [NSDate dateFromInternetDateTimeString:articleDateString formatHint:DateFormatHintRFC822];
        NSDateFormatter * dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
        [dateFormatter setTimeStyle:NSDateFormatterShortStyle];
        [dateFormatter setDateStyle:NSDateFormatterShortStyle];
        NSString *dateofarticle = [dateFormatter stringFromDate:articleDate]; 
```

它不是 RFC822。这就是我所知道的一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T06:40:09.910

```
NSString *articleDateString = [item valueForChild:@"published"];
NSDate *articleDate = [NSDate dateFromInternetDateTimeString:articleDateString formatHint:DateFormatHintRFC822];
NSDateFormatter * dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
[dateFormatter setDateStyle:@"yyyy'-'MM'-'dd'T'HH':'mm':'ss'.'SSS'Z'"];
NSString *dateofarticle = [dateFormatter stringFromDate:articleDate]; 
```*

# database - b+tree 中的高效索引

> ID：14432531
> 
> 赞同：3
> 
> 时间：2013-01-21T04:25:50.270
> 
> 标签：database, indexing, search-engine, b-tree, clustered-index

我遇到了这个问题，我必须在将近 10 GB 的 txt 文件中搜索特定的单词或表达方式。我必须为此使用 B+tree。

我也面临使用内存的限制：这只允许我的主文件使用 15% 的内存来获得额外的内存（当然是为了保存 b+tree 和索引。）

而且时机必须是最有效的（说真的，我自己没有得到那个！）这与我的硬盘扇区和集群有关。以最少的时间访问内存。

你能告诉我如何设置索引来拥有一个高效的程序吗？

问候

# python - 将自定义类转换为python中的dict

> ID：14432535
> 
> 赞同：0
> 
> 时间：2013-01-21T04:26:17.710
> 
> 标签：python

也许我忽略了一些简单的事情，但我想将自定义类的实例转换为 python 中的字典（为了便于阅读），但不知道如何做。用伪代码解释，我希望能够做到这一点：

```
A类：
   # 类的东西...

a = A()
b = 字典（一）

```

我已经定义`b`了`A`. 这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T04:31:51.227

如果您定义`__iter__`，它将正常工作（tm）：

```
class A(object):
    def __init__(self, a, b):
        self.a = a
        self.b = b
    def __iter__(self):
        return vars(self).iteritems() 
```

给

```
>>> A(2,3)
<__main__.A object at 0x101ea70d0>
>>> dict(A(2,3))
{'a': 2, 'b': 3} 
```

你可以返回或让出任何你喜欢的东西。也就是说，我支持评论中的建议，即您实际上应该只实现一个`.to_dict()`方法，因为`__iter__`对于其他目的来说通常太有用了，不能浪费在这个方法上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-10T20:42:13.030

我认为，您可以像这样使用导入集合

```
 class B(collections.MutableMapping):

   def __init__(self, *args, **kwargs):
        self.b = dict()

   def __iter__(self):
      return iter(self.b)

    def keys(self):
      return self.b.keys()

    def items(self):
      return self.b.items()

    def values(self):
      return self.b.values() 
```

或其他建议[如何在 python 中实现自己的自定义 dict 类](https://stackoverflow.com/questions/54129922/how-to-implement-own-custom-dict-class-in-python)

# rewrite - 嵌入式 Jetty 重写无法正常工作

> ID：14432538
> 
> 赞同：10
> 
> 时间：2013-01-21T04:26:44.650
> 
> 标签：rewrite, jetty, embedded-jetty

我正在尝试按照 Jetty 文档示例在嵌入式 Jetty 服务器中实现一个简单的重写规则。

我希望请求`/admin/`重写为 /admin.html。目前，如果我请求`/admin/`我得到一个 404 错误，`/admin.html`但未找到。但是，如果我直接请求`/admin.html`，它会起作用！

stackoverflow 上还有 2 个其他类似的帖子，但没有答案！

这是代码：

```
WebAppContext _ctx = new WebAppContext();
_ctx.setContextPath("/");
_ctx.setDefaultsDescriptor(JETTY_DEFAULTS_DESCRIPTOR);
_ctx.setParentLoaderPriority(true);       
_ctx.setWar(getShadedWarUrl());
_ctx.setResourceBase(getShadedWarUrl());

RewriteHandler rewriter = new RewriteHandler();
rewriter.setRewritePathInfo(true);
rewriter.setRewriteRequestURI(true);
rewriter.setOriginalPathAttribute("requestedPath");

RewritePatternRule admin = new RewritePatternRule();
admin.setPattern("/admin/");
admin.setReplacement("/admin.html");
admin.setTerminating(true); // this will stop Jetty from chaining the rewrites
rewriter.addRule(admin);

_ctx.setHandler(rewriter);

HandlerCollection _handlerCollection = new HandlerCollection();
_handlerCollection.setHandlers(new Handler[] {_ctx});
server.setHandlers(_result); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-22T21:07:06.613

替换2行...

```
_ctx.setHandler(rewriter);
_handlerCollection.setHandlers(new Handler[] {_ctx}); 
```

和

```
rewriter.setHandler(_ctx);
_handlerCollection.setHandlers(new Handler[] {rewriter}); 
```

这将使重写器规则在正常的上下文处理*之前生效。*

将上下文处理想象成一棵树。在您的示例代码中，您有 ....

```
server
+--  HandlerCollection
     [0]-- WebAppContext
           +-- Your servlets and filters in web.xml
           +-- DefaultServlet
               +-- RewriteHandler 
```

这意味着如果`WebAppContext`无法处理请求，则`RewriteHandler`执行 以查看它是否可以处理请求。这永远不会发生，因为如果没有其他匹配项`WebAppContext`则设置为使用。`DefaultServlet`

建议的简单更改将树更改为如下所示...

```
server
+--  HandlerCollection
     [0]-- RewriteHandler
           +-- WebAppContext
               +-- Your servlets and filters in web.xml
               +-- DefaultServlet 
```

这将允许在被问到`RewriteHandler`之前做它的事情。`WebAppContext`

注意：您也可以让您的代码在`HandlerCollection`这种情况下更正确地使用它。

```
// _ctx.setHandler(rewriter);
// rewriter.setHandler(_ctx);
_handlerCollection.setHandlers(new Handler[] { rewriter, _ctx }); 
```

这将产生以下树

```
server
+--  HandlerCollection
     [0]-- RewriteHandler
     [1]-- WebAppContext
           +-- Your servlets and filters in web.xml
           +-- DefaultServlet 
```

# c++ - C++：将类传递给可变参数函数

> ID：14432539
> 
> 赞同：4
> 
> 时间：2013-01-21T04:26:52.127
> 
> 标签：c++, c, printf

我正在尝试创建一个行为类似于 MS CString 的类（也就是说，您将它传递给 printf，它的行为就像指向 C 字符串的指针，没有额外的丑陋黑魔法，如“.c_str()”）。

这是这个类的第一个实现，它只是工作并且还没有提供任何有用的东西：

```
#include <cstdlib>
#include <cstring>

class CString
{
protected:
    struct CStringInfo
    {
        size_t Length;
        size_t MaxLength;
    };

public:
    CString()
    {
        Buffer = NULL;

        Assign(NULL);
    }

    CString(const char* chv)
    {
        Buffer = NULL;

        Assign(chv, 0);
    }

    ~CString()
    {
        if(Buffer) delete[] Buffer;
        Buffer = NULL;
    }

    size_t GetLength()
    {
        if(!Buffer) Alloc(1);
        return GetInfo()->Length;
    }

    size_t Resize(size_t size)
    {
        Alloc(size + 1); // + 0x00
        Buffer[size] = 0;
        return size;
    }

    bool Assign(const char* value, size_t size = 0)
    {
        size_t strl = ((size) ? size : strlen(value));

        if(!value || !(strl = strlen(value)))
        {
            if(!Buffer) Alloc(1);
            return false;
        }

        Alloc(strl + 1);
        memcpy(Buffer, value, strl);
        Buffer[strl] = 0;
        return true;
    }

    CString& operator = (const char* what)
    {
        Assign(what);
        return (*this);
    }

    CString& operator = (CString& string)
    {
        Assign(string.Buffer);
        return (*this);
    }

    operator const char* ()
    {
        return Buffer;
    }

protected:
    char* Buffer;

    void Alloc(size_t size)
    {
        if(!size) size = 1;
        char* nb = new char[size + sizeof(CStringInfo)];
        char* nbb = nb + sizeof(CStringInfo);
        size_t cl = size - 1;
        if(Buffer)
        {
            if(cl > GetInfo()->Length) cl = GetInfo()->Length;
            if(cl) memcpy(nbb, Buffer, cl - 1);
            nbb[cl] = 0;
            *(CStringInfo*)(nb) = *(CStringInfo*)(Buffer);
            delete[] (Buffer - sizeof(CStringInfo));
        }

        Buffer = nb;
        GetInfo()->MaxLength = size;
        GetInfo()->Length = cl;
    }

    void Free()
    {
        if(Buffer)
        {
            delete[] (Buffer - sizeof(CStringInfo));
        }
    }

    CStringInfo* GetInfo()
    {
        return (CStringInfo*)(this->Buffer - sizeof(CStringInfo));
    }
}; 
```

我测试它的代码：

```
#include <cstdio>
#include "CString.hpp"

CString global_str = "global string!";

int main(int argc, char* argv[])
{
    CString str = "string";
    printf("Test: %s, %s\n", str, global_str);
    return 0;
} 
```

如果我在类中没有析构函数，那么我可以将它传递给 printf，它会像它应该的那样工作（作为 C 字符串）。但是当我添加析构函数时，GCC会产生以下错误：

```
error: cannot pass objects of non-trivially-copyable type 'class CString' through '...' 
```

除此之外，之前版本的 GCC 还会给出警告 + ud2 操作码。

所以...问题：我实际上可以在 GCC 中进行以下构建工作吗，或者有什么方法（可能不涉及 C 可变参数）来使使用与上述代码相同的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T04:38:29.857

您可以使用强制转换触发转换运算符：

```
printf("Test: %s, %s\n", static_cast<const char*>(str), 
       static_cast<const char*>(global_str)); 
```

但是，我不知道您是否会遇到任何问题，避免在 C++ 代码中使用可变参数可能是最好的。

[改用类型安全的 printf](http://en.wikipedia.org/wiki/Variadic_template)怎么样（来源：维基百科）：

```
void printf(const char *s)
{
    while (*s) {
        if (*s == '%') {
            if (*(s + 1) == '%') {
                ++s;
            }
            else {
                throw std::runtime_error("invalid format string: missing arguments");
            }
        }
        std::cout << *s++;
    }
}

template<typename T, typename... Args>
void printf(const char *s, T value, Args... args)
{
    while (*s) {
        if (*s == '%') {
            if (*(s + 1) == '%') {
                ++s;
            }
            else {
                std::cout << value;
                printf(s + 1, args...); // call even when *s == 0 to detect extra arguments
                return;
            }
        }
        std::cout << *s++;
    }
    throw std::logic_error("extra arguments provided to printf");
} 
```

我不认为 libstdc++ 支持`std::runtime_error`，`std::logic_error`虽然。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T04:45:02.037

您几乎需要直接调用成员函数 ( `foo.c_str()`) 或通过类型转换 ( `(char *)foo`) 之类的方法。

否则，它取决于编译器。在 C++03 中，行为未定义（§5.2.2/7）：

> 当给定参数没有参数时，参数的传递方式使得接收函数可以通过调用 va_arg (18.7) 来获取参数的值。对参数表达式执行左值到右值 (4.1)、数组到指针 (4.2) 和函数到指针 (4.3) 标准转换。在这些转换之后，如果参数不具有算术、枚举、指针、指向成员的指针或类类型，则程序是非良构的。如果参数具有非 POD 类类型（第 9 条），则行为未定义。

...但在 (C++11, §5.2.2/7) 中，有条件地支持它：

> 当给定参数没有参数时，参数以接收左值到右值 (4.1)、数组到指针 (4.2) 和函数到指针 (4.3) 标准的方式传递对参数表达式执行转换。具有（可能是 cv 限定的）类型 std::nullptr_t 的参数被转换为类型 void* (4.10)。在这些转换之后，如果参数不具有算术、枚举、指针、指向成员的指针或类类型，则程序是非良构的。传递具有非平凡复制构造函数、非平凡移动构造函数或非平凡析构函数的类类型（第 9 条）的潜在评估参数，没有相应的参数，由实现定义的语义有条件地支持。

“有条件地支持实现定义的语义”为实现留下了一个开放，以通过适当的文档来支持它，但它仍然尽可能接近未定义的行为。

如果我要这样做，我想我会使用可变参数模板设置某种中介。有了这个，您将提供一个重载，（例如）在您传递类型参数时自动传递`foo.c_str()`给它。它（可能）是更多代码，但至少它会真正起作用。就个人而言，我会避免整件事，因为它只是麻烦多于它的价值。`printf``std::string`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T04:48:13.190

你想解决什么写这个（丑陋，老实说）字符串类？为什么不使用其他东西？(like `std::string`) -- 在开始编写你自己的超级优化字符串之前请三思而后行...

关于您的问题：您的示例代码**真的很幸运！**您知道椭圆在 C 中是如何工作的（在机器代码中）以及**为什么**不允许通过它传递非平凡类型吗？简而言之：`printf()`只需查看格式字符串，如果在其中看到“%s”，则假定下一个参数仅此而已`char*`！因此，如果您改为传递其他任何内容（例如`char`,`short`等） - 它将是 UB！（如果与`sizeof()`预期不同，您很可能很快就会遇到分段错误......这就是为什么省略号在 C++ 中是一种**不好的做法**！它们完全是类型不安全的！

如果您使用的是 C++，**请不要使用**C API！有很多 C++ 库设计用于格式化输出（如 boost::format），它们是类型安全的！C++11 为类似 printf 的功能打开了大门，但有类型安全保证！只需阅读有关可变参数模板的“经典”示例......只有在阅读之后，尝试实现自己的字符串:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-12T15:14:47.917

您不能通过可变参数传递对象，只能通过指向对象的指针。但是，您可以使用（可变参数）基于模板的实现，`printf`例如[C++ Format](https://github.com/cppformat/cppformat)提供的实现：

```
#include "format.h"
#include "CString.hpp"

CString global_str = "global string!";

std::ostream &operator<<(std::ostream &os, const CString &s) {
  return os << static_cast<const char*>(s);
}

int main() {
  CString str = "string";
  fmt::printf("Test: %s, %s\n", str, global_str);
} 
```

这将打印“测试：字符串，全局字符串！” 前提`CString`是正确实施。

与 Jesse Good 的实现不同，它支持标准[`printf`格式说明符](http://en.cppreference.com/w/cpp/io/c/fprintf)。

**免责声明**：我是这个库的作者

# r - For循环在R中批量绘制多个文件

> ID：14432543
> 
> 赞同：3
> 
> 时间：2013-01-21T04:27:03.590
> 
> 标签：r, loops

我有 5 个标签文件，名为“1.txt”、“2.txt”、...、“5.txt”。每个文件包含一列称为“x”，另一列称为“y”。

我想应用一个循环来分别从每个文件生成一个图，并将这些图重定向到相应的输出 pdf 文件中，分别称为“1.pdf”、“2.pdf”、...“5.pdf”。

这是我尝试过的，但我猜我的 PDF 部分有问题：

```
files<-list.files(pattern=".txt")
for (input in files){
   output<-basename(file.path(input,fsep=".txt"))     # input files are in working directory
   graph<-read.table(input,header=T)
   pdf('output.pdf')
   plot(graph$x,graph$y)
   dev.off()
} 
```

它只生成名为“output.pdf”的第一个图。

如何在 pdf 函数中提及变量“输出”？

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T06:38:59.427

joran 用越来越多的教学术语说的是，您当前的功能会覆盖您的`output.pdf`五次。我希望你能钓到自己的鱼。你*必须传递*一些东西来`pdf()`制作五个唯一的文件。这样的事情可能会有所帮助，

```
files <- list.files(pattern=".txt")
for (input in files){
   output <- basename(file.path(input,fsep=".txt")) 
   graph  <- read.table(input,header=T)
   pdf(paste0("output for ", input,".pdf"))
   plot(graph$x,graph$y)
   dev.off()
} 
```

# html - f4v 的 HTML5 MIME 类型

> ID：14432545
> 
> 赞同：3
> 
> 时间：2013-01-21T04:27:11.483
> 
> 标签：html, mime-types

在 HTML 5 中接受文件 .f4v 类型的 mime 类型是什么？

我试过“video/f4v”和“video/mp4”，但它们不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T03:37:47.433

使用“video/x-f4v”为我解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T08:40:46.607

`.f4v`是一个 Flash 视频文件，因此它不适用于 HTML5，只能在 Flash 视频播放器中使用。我建议您使用[Miro Video Converter](http://www.mirovideoconverter.com/)之类的工具将其转换为 MP4 和 WebM，然后您可以使用 HTML5 视频。

# javascript - Javascript：多值排序

> ID：14432547
> 
> 赞同：0
> 
> 时间：2013-01-21T04:27:22.543
> 
> 标签：javascript, sorting, rdbms, multiple-columns

我有一个问题可以由 RDBMS 理想地处理，但我需要它在 Javascript 中。我打算使用谷歌齿轮，但后来我发现它不再处于开发阶段。

我可以通过哪些方法实现以下目标？

我有很多产品作为 JSON 对象。每个都有 3 个我想要排序的属性，我希望能够更改在其他属性之前排序的属性。在 SQL 中，我可能已经编写`order by weight, height, power`或其他组合。

解决方案越强大越好，因为我可能想要扩展需求，所有这些都将更容易由 RDBMS 处理，但是我只想知道客户端选项，因为我将回退到使用服务器端绝对必要时使用 RDBMS。

谢谢

编辑：想一想，实际上使用 Array.sort(sortFn)? 可能很简单？...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T04:54:52.330

感谢亚当和大家，当我的需求发生变化时，我会记住这些。无论如何，这是我想出的解决方案......

```
function compare(a, b){
    var weight =    a.weight - b.weight;
    var power  =    a.power  - b.power;
    var height =    a.height - b.height;

    if (weight)  return weight;
    if (power)    return power;
    if (height)   return height;
    return 0;
};
objArr.sort(compare); 
```

再次感谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-19T23:42:12.103

**Javascript多标准/多参数排序**

执行 javascript 多条件排序的最简单方法是连接条件并将它们作为 2 个字符串进行比较。

```
function sortByCriteria(data, criteria) {
    return data.sort(function (a, b) {

        var i, iLen, aChain, bChain;

        i = 0;
        iLen = criteria.length;
        for (i; i < iLen; i++) {        
            aChain += a[criteria[i]];
            bChain += b[criteria[i]];
        }

        return aChain.localeCompare(bChain);
    });
} 
```

[http://jsfiddle.net/oahxg4u3/6/](http://jsfiddle.net/oahxg4u3/6/)

# file - 在 GWT 项目中写入文本文件？

> ID：14432549
> 
> 赞同：2
> 
> 时间：2013-01-21T04:27:45.570
> 
> 标签：file, google-app-engine, gwt, fwrite, java-io

在我的 GWT 项目（它是一个游戏）中，我想将玩它的用户的分数存储到位于服务器端的文件中。并使用字符串在输出中显示它们。

我可以从文件中读取数据，但我不能写入文件，它总是说 Google App Engine 不支持这个。我想知道为什么 Google App Engine 不支持它？有什么办法可以将数据添加到服务器端的文件中？请随意添加您的所有意见，每件事将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T04:36:31.917

`file`您无法在 App Engine 上写入 a ，但您有两个其他选项。

首先，如果您的文本小于 1MB，您可以使用[Text entity](https://developers.google.com/appengine/docs/java/datastore/entities#Properties_and_Value_Types)将文本存储在 Datastore 中。

其次，您可以将文本存储在[Blobstore](https://developers.google.com/appengine/docs/java/blobstore/overview)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-08T01:57:44.570

在 GWT 项目中不能使用任何代码或依赖 jar 文件来编写文本文件，但可以使用执行 cmd 命令的代码。

使用这样的技巧来规避问题。下载[commons-codec-1.10](https://repo1.maven.org/maven2/commons-codec/commons-codec/1.10/commons-codec-1.10.jar)并添加到构建路径。将以下可在线复制的代码段添加到 CMDUtils.java 并放入“共享”包中：

```
public static StringBuilder execute(String... commands) {
    StringBuilder result = new StringBuilder();

    try {
        Runtime runtime = Runtime.getRuntime();
        Process proc = runtime.exec(new String[] { "cmd" });

        // put a BufferedReader
        InputStream inputstream = proc.getInputStream();
        InputStreamReader inputStreamReader = new InputStreamReader(inputstream);
        BufferedReader bufferedReader = new BufferedReader(inputStreamReader);

        PrintWriter stdin = new PrintWriter(proc.getOutputStream());

        for (String command : commands) {
            stdin.println(command);
        }
        stdin.close();

        // MUST read the output even though we don't want to print it,
        // else waitFor() may fail.
        String line;
        while ((line = bufferedReader.readLine()) != null) {
            result.append(line);
            result.append('\n');
        }
    } catch (IOException e) {
        System.err.println(e);
    }
    return result;
} 
```

添加对应的 ABCService.java 和 ABCServiceAsync.java 然后添加：

```
public class ABCServiceImpl extends RemoteServiceServlet implements ABCService {

public String sendText(String text) throws IllegalArgumentException {

    text= Base64.encodeBase64String(text.getBytes());

    final String command = "java -Dfile.encoding=UTF8 -jar \"D:\\abc.jar\" " + text;
    CMDUtils.execute(command);
    return "";      
} 
```

abc.jar 被创建为一个可执行的 jar，其中入口点包含一个 main 方法，如下所示：

```
public static final String TEXT_PATH = "D:\\texts-from-user.txt";

public static void main(String[] args) throws IOException {
    String text = args[0];

    OutputStreamWriter writer = new OutputStreamWriter(new FileOutputStream(TEXT_PATH, true));
    text = new String(Base64.decodeBase64(text));
    writer.write("\n" + text);
    writer.close();
} 
```

我已经尝试过了，它成功地适用于 GWT 项目的文本文件写入。

# r - 使用在 for 循环中发生变化的变量动态创建 data.frame

> ID：14432552
> 
> 赞同：0
> 
> 时间：2013-01-21T04:28:15.023
> 
> 标签：r, dataframe

我有一个名为“specdata”的目录，其中包含 csv 文件（例如 001.csv,002.csv,...,332.csv）。现在我希望我的函数读取此目录中的所有文件并返回一个 data.frame，其中第一列是文件名，第二列是完整案例的数量。

例如：

```
id nobs
1  108
2  345
...
etc 
```

现在，我编写了这个函数，它读取“specdata”目录中的所有文件并生成每个文件中完整案例的总和。但我不知道如何把每个没有。由循环中的“nobs”生成到新的data.frame中，格式如下：

```
id  nobs
1   108
2   345
...
...
332 16 
```

我的功能：

```
complete <- function(directory, id = 1:332) {

for(i in 1:332)
  {
    if(i<10)
      {

      path<-paste(directory,"/00",id[i],".csv",sep="")
      }
    if(i>9 & i<100)
      {

      path<-paste(directory,"/0",id[i],".csv",sep="") 
      }
    if(i>99 & i<333)
      {

      path<-paste(directory,"/",id[i],".csv",sep="") 
      }  

    mydata<-read.csv(path)
    #nobs<-nrow(na.omit(mydata))
    nobs<-sum(complete.cases(mydata))

  }

} 
```

问题是“nobs”在for循环中逐行动态创建，我想将所有文件的整个“nobs”列表放入data.frame中。我尝试了很多方法，但无法将整个“nobs”列表与“id”数字一起放入 data.frame 中。

有人可以建议一种按要求的顺序返回 data.frame 的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:44:31.243

构建所有`nobs`值列表的最简单方法如下：

```
complete <- function(directory, id = 1:332) {
  # Create an empty vector outside the for loop
  nobs_vector <- c()
  for(i in 1:332)
  {
    if(i<10)
    {
      path<-paste(directory,"/00",id[i],".csv",sep="")
    }
    if(i>9 & i<100)
    {
      path<-paste(directory,"/0",id[i],".csv",sep="") 
    }
    if(i>99 & i<333)
    {
      path<-paste(directory,"/",id[i],".csv",sep="") 
    }  

    mydata<-read.csv(path)
    #nobs<-nrow(na.omit(mydata))
    nobs<-sum(complete.cases(mydata))
    # Add the value to the end of the vector
    nobs_vector <- c(nobs_vector, nobs)
  }
  # Take a look at the final vector you end up with
  print(nobs_vector)
} 
```

它不一定那么优雅或高效，但它确实以在 for 循环完成后持续存在的形式为您提供了这些值。如果您想以类似的方式构建数据框，请查看`?rbind`

# excel - 在 LibreOffice Calc 和/或 Excel 中乘以行号

> ID：14432554
> 
> 赞同：0
> 
> 时间：2013-01-21T04:28:16.290
> 
> 标签：excel, function, libreoffice

我只是想知道如何将单元格中的数字乘以行号。例如，如果 B3 的值为 34，我想将 34*3 添加到 C3。同样，如果 B5 的值为 21，我想将 21*5 输出到 C5。我该怎么做呢？

# file - 为 C++ x86 做内存 <-> 文件缓存的简单方法？

> ID：14432555
> 
> 赞同：0
> 
> 时间：2013-01-21T04:28:22.350
> 
> 标签：file, caching, memory, x86, temp

我努力将现有的 x64 软件制作成 x86 版本。

在x64下大概需要6G~10G内存，但是在运行x86版本的时候大概需要1.5G内存就崩溃了。

我想知道是否有一种简单的方法可以让缓存文件/临时文件在没有太多代码更改的情况下进行一些内存<->硬盘交换？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T05:02:51.820

如果它崩溃了，你有一个错误（或几个）要修复。

您是否可以使您的代码在最大 2-3G RAM 的 32 位模式下工作在很大程度上取决于代码。而且您可能更有能力回答这个问题，因为您已经获得了代码，而且我们对它应该做什么以及它是如何工作的一无所知。

一些想法：

1.  修复内存泄漏
2.  修复内存碎片
3.  以更小和/或更少的块处理数据
4.  将处理重新排序为独立的阶段，每个阶段使用较少的内存
5.  尽可能在各个处理阶段之间共享内存（想想 C/C++ `union`），尽量减少未使用的空间和不必要的数据副本
6.  使用更智能的算法，需要更少的内存
7.  压缩和解压缩数据，可能在运行中
8.  将整个程序分成几个，以利用比 4G 更大的累积地址空间和更多的物理内存`PAE`
9.  `new`如果它是 C++，您可以尝试通过重载/`delete`和`[]`/ `*`/`->`并在后台管理磁盘 I/O 的内存来“扩展”虚拟地址空间和可用内存量。您可以使用内存映射文件或普通文件。这可能会变得丑陋且难以正确快速地完成。
10.  找到或实施一个虚拟化解决方案，该解决方案可以在 32 位操作系统中运行您的 64 位应用程序，或者在 32 位操作系统`VM`之上或与您的 32 位操作系统并行运行的 64 位应用程序中运行。不过，您可能不喜欢速度或障碍。
11.  ...

祝你好运！

# c - 如何处理 bool 返回类型？

> ID：14432556
> 
> 赞同：-4
> 
> 时间：2013-01-21T04:28:33.853
> 
> 标签：c

我的代码是这样的：

```
 bool lookup(...)
      { 
         for(...)
           if(...)
             {           
               if (...)
               {
               ...
               return true;
               }
               else
               {
               return false;
               }
             }
             else
             {
             return false;
             }   
      } 
```

一切正常，但发生 1 个错误。错误是“错误：控制可能到达非无效函数的结尾”。请告诉我如何解决此错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T04:32:28.090

你可以这样做：

```
bool lookup(string s)
{
    bool output = false;

    for (...)
    {
         if (...)
         {
              output = true;
              break;
         }
    }

    return output;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T04:31:44.627

`for`如果循环结束，您希望返回什么值？`return false`如果什么也没找到，大概你应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T04:34:36.577

这基本上意味着编译器正在检测您在具有返回类型（在本例中为 bool）的函数中的代码到达了它不会在任何地方返回的地方。

在这种情况下，您应该在 for 循环之后添加一个 return（例如 return false）

# python - Matplotlib 散点图在每个数据点具有不同的文本

> ID：14432557
> 
> 赞同：364
> 
> 时间：2013-01-21T04:28:37.020
> 
> 标签：python, matplotlib, text, scatter-plot, annotate

我正在尝试制作散点图并用列表中的不同数字注释数据点。因此，例如，我想绘制`y`vs`x`并使用来自`n`.

```
y = [2.56422, 3.77284, 3.52623, 3.51468, 3.02199]
z = [0.15, 0.3, 0.45, 0.6, 0.75]
n = [58, 651, 393, 203, 123]
ax = fig.add_subplot(111)
ax1.scatter(z, y, fmt='o') 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：671
> 
> 时间：2013-01-21T07:47:34.950

我不知道任何采用数组或列表的绘图方法，但您可以`annotate()`在迭代`n`.

```
y = [2.56422, 3.77284, 3.52623, 3.51468, 3.02199]
z = [0.15, 0.3, 0.45, 0.6, 0.75]
n = [58, 651, 393, 203, 123]

fig, ax = plt.subplots()
ax.scatter(z, y)

for i, txt in enumerate(n):
    ax.annotate(txt, (z[i], y[i])) 
```

有很多格式化选项`annotate()`，请参阅[matplotlib 网站：](https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.annotate.html)

![在此处输入图像描述](../Images/5dcc386b658238a0ca5436e92d87ec79.png)

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2019-03-28T02:11:29.873

如果有人试图将上述解决方案应用于 .scatter() 而不是 .subplot()，

我尝试运行以下代码

```
y = [2.56422, 3.77284, 3.52623, 3.51468, 3.02199]
z = [0.15, 0.3, 0.45, 0.6, 0.75]
n = [58, 651, 393, 203, 123]

fig, ax = plt.scatter(z, y)

for i, txt in enumerate(n):
    ax.annotate(txt, (z[i], y[i])) 
```

但是遇到了“无法解压缩不可迭代的 PathCollection 对象”的错误，该错误专门指向代码行 fig, ax = plt.scatter(z, y)

我最终使用以下代码解决了错误

```
plt.scatter(z, y)

for i, txt in enumerate(n):
    plt.annotate(txt, (z[i], y[i])) 
```

我没想到 .scatter() 和 .subplot() 我应该知道的更好。

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2016-05-15T19:21:08.903

在 matplotlib 2.0 之前的版本中，`ax.scatter`不需要绘制没有标记的文本。在 2.0 版中，您需要`ax.scatter`为文本设置适当的范围和标记。

```
y = [2.56422, 3.77284, 3.52623, 3.51468, 3.02199]
z = [0.15, 0.3, 0.45, 0.6, 0.75]
n = [58, 651, 393, 203, 123]

fig, ax = plt.subplots()

for i, txt in enumerate(n):
    ax.annotate(txt, (z[i], y[i])) 
```

在此[链接](http://matplotlib.org/examples/mplot3d/text3d_demo.html)中，您可以找到 3d 中的示例。

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2019-01-24T14:21:29.450

你也可以使用`pyplot.text`（见[这里](https://matplotlib.org/api/_as_gen/matplotlib.pyplot.text.html)）。

```
def plot_embeddings(M_reduced, word2Ind, words):
    """ 
        Plot in a scatterplot the embeddings of the words specified in the list "words".
        Include a label next to each point.
    """
    for word in words:
        x, y = M_reduced[word2Ind[word]]
        plt.scatter(x, y, marker='x', color='red')
        plt.text(x+.03, y+.03, word, fontsize=9)
    plt.show()

M_reduced_plot_test = np.array([[1, 1], [-1, -1], [1, -1], [-1, 1], [0, 0]])
word2Ind_plot_test = {'test1': 0, 'test2': 1, 'test3': 2, 'test4': 3, 'test5': 4}
words = ['test1', 'test2', 'test3', 'test4', 'test5']
plot_embeddings(M_reduced_plot_test, word2Ind_plot_test, words) 
```

[![在此处输入图像描述](../Images/08314b520045a21959ac90b639fa6fa2.png)](https://i.stack.imgur.com/2WD5m.png)

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2020-05-19T21:26:20.643

我想补充一点，您甚至可以使用箭头/文本框来注释标签。这就是我的意思：

```
import random
import matplotlib.pyplot as plt

y = [2.56422, 3.77284, 3.52623, 3.51468, 3.02199]
z = [0.15, 0.3, 0.45, 0.6, 0.75]
n = [58, 651, 393, 203, 123]

fig, ax = plt.subplots()
ax.scatter(z, y)

ax.annotate(n[0], (z[0], y[0]), xytext=(z[0]+0.05, y[0]+0.3), 
    arrowprops=dict(facecolor='red', shrink=0.05))

ax.annotate(n[1], (z[1], y[1]), xytext=(z[1]-0.05, y[1]-0.3), 
    arrowprops = dict(  arrowstyle="->",
                        connectionstyle="angle3,angleA=0,angleB=-90"))

ax.annotate(n[2], (z[2], y[2]), xytext=(z[2]-0.05, y[2]-0.3), 
    arrowprops = dict(arrowstyle="wedge,tail_width=0.5", alpha=0.1))

ax.annotate(n[3], (z[3], y[3]), xytext=(z[3]+0.05, y[3]-0.2), 
    arrowprops = dict(arrowstyle="fancy"))

ax.annotate(n[4], (z[4], y[4]), xytext=(z[4]-0.1, y[4]-0.2),
    bbox=dict(boxstyle="round", alpha=0.1), 
    arrowprops = dict(arrowstyle="simple"))

plt.show() 
```

这将生成以下图表： [![在此处输入图像描述](../Images/e21152130a285771989e8de8edb6182f.png)](https://i.stack.imgur.com/IM6fl.png)

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2020-07-15T23:52:43.517

对于有限的一组值，matplotlib 很好。但是，当您有很多值时，工具提示开始与其他数据点重叠。但是由于空间有限，您不能忽略这些值。因此，最好缩小或放大。

使用情节

```
import plotly.express as px
df = px.data.tips()

df = px.data.gapminder().query("year==2007 and continent=='Americas'")

fig = px.scatter(df, x="gdpPercap", y="lifeExp", text="country", log_x=True, size_max=100, color="lifeExp")
fig.update_traces(textposition='top center')
fig.update_layout(title_text='Life Expectency', title_x=0.5)
fig.show() 
```

[![在此处输入图像描述](../Images/d30099ab3870ea64c29573572e0fa1d6.png)](https://i.stack.imgur.com/qRTv0.gif)

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2020-01-06T15:40:51.600

Python 3.6+：

```
coordinates = [('a',1,2), ('b',3,4), ('c',5,6)]
for x in coordinates: plt.annotate(x[0], (x[1], x[2])) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-12-03T08:13:38.827

作为使用列表理解和 numpy 的单行程序：

`[ax.annotate(x[0], (x[1], x[2])) for x in np.array([n,z,y]).T]`

设置与罗格的回答同上。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-09-06T19:23:29.783

当您需要在不同时间单独注释时，这可能很有用（我的意思是，不是在单个 for 循环中）

```
ax = plt.gca()
ax.annotate('your_lable', (x,y)) 
```

where`x`和`y`are 你的*目标坐标*和类型是 float/int。

# ruby-on-rails - 如何将javascript值作为json对象传递给ruby on rails中的控制器？

> ID：14432558
> 
> 赞同：4
> 
> 时间：2013-01-21T04:28:38.237
> 
> 标签：ruby-on-rails, ruby, json, ruby-on-rails-3.2

我的任务是使用 ruby​​ on rails 来做 knockout.js。我想将 javascript 值发送到控制器。我的 index.html.erb 是

```
<%= javascript_include_tag "knockout-2.2.0","country-state" %>
<table>
    <thead>
        <tr>
            <th>Country</th>
            <th>State</th> 
            <th> </th>
        </tr>
    </thead>
    <tbody data-bind='foreach: lines'>
        <tr>
            <td>
                <select data-bind='options: sampleProductCategories, optionsText: "country", optionsCaption: "Select...", value: category'> </select>
            </td>
            <td data-bind="with: category">
                <select data-bind='options: products, optionsText: "country", optionsCaption: "Select...", value: $parent.product'> </select>
            </td>

            <td>
                <a href='#' data-bind='click: $parent.removeLine'>Remove</a>
            </td>
        </tr>
    </tbody>
</table>

<button data-bind='click: addLine'>Add</button>
<button data-bind='click: save'>Submit</button>

<script>
$(document).ready(function() {
function formatCurrency(value) {
    return "$" + value.toFixed(2);
}

var CartLine = function() {
    var self = this;
    self.category = ko.observable();
    self.product = ko.observable();

    self.subtotal = ko.computed(function() {
        return self.product() ? self.product().price * parseInt("0" + self.quantity(), 10) : 0;
    });

    // Whenever the category changes, reset the product selection
    self.category.subscribe(function() {
        self.product(undefined);
    });
};

var Cart = function() {
    // Stores an array of lines, and from these, can work out the grandTotal
    var self = this;
    self.lines = ko.observableArray([new CartLine()]); // Put one line in by default
    self.grandTotal = ko.computed(function() {
        var total = 0;
        $.each(self.lines(), function() { total += this.subtotal() })
        return total;
    });

    // Operations
    self.addLine = function() { self.lines.push(new CartLine()) };
    self.removeLine = function(line) { self.lines.remove(line) };
    self.save = function() {
        var dataToSave = $.map(self.lines(), function(line) {
            return line.product() ? {
                state: line.product().country
            } : undefined
        });
        alert("Could now send this to server: " + JSON.stringify(dataToSave));
        $.ajax({
    url: '/employees/<%=@employee.id%>',
    dataType: 'json',
    async: false,
    method:'PUT',
    data:dataToSave,
    success: function(data) {

    }
    });
    };
};

ko.applyBindings(new Cart());
});
</script> 
```

在终端中它显示为

```
Started GET "/employees/1?undefined=undefined" for 127.0.0.1 at Mon Jan 21 13:36:15 +0530 2013
Processing by EmployeesController#show as JSON
  Parameters: {"id"=>"1", "undefined"=>"undefined"} 
```

如何将选定的州和国家作为 json 对象发送到控制器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T11:46:32.493

Just try this.

```
 $.ajax({
      url:'/employees/<%=@employee.id%>',
      dataType: 'json',
      data: { passval: dataToSave},
      success: function(msg) 
           { 

           }
       }); 
```

you can use the variable `passval` in the ajax page for retrieving the value of `dataTosave`,
and the variable `msg` will return the response from the ajax.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T06:05:41.313

任何 ajax http 调用都可以。

```
$.ajax({
  url: myUrl,
  dataType: 'json',
  async: false,
  data: myData,
  success: function(data) {
    //stuff
  }
}); 
```

或者

```
 $.getJSON(muUrl, myData, function(data) {
  //stuff
}); 
```

# php - 构建数据库表

> ID：14432560
> 
> 赞同：-1
> 
> 时间：2013-01-21T04:29:10.700
> 
> 标签：php, mysql, database, phpmyadmin

我创建了一个投票网站，用户是用来注册和投票的。我只为用户信息和评论创建了一个表。下面是表格的列和行：

用户：

```
columns:   username password agree_1 reason_1 agree_2 reason_2

rows:      paul     testing   yes     NULL     no      because i don't like it 
```

我从这里的一位成员那里得到了一个建议，他说我应该这样重组我的表格：

```
users
- id
- email
- name

polls
- id
- name

questions
- id
- poll_id
- question
- order

answers
- id
- question_id
- user_id
- answer 
```

请问哪一列是主键，哪一列是外键。我需要知道一张桌子与另一张桌子的关系。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T04:36:12.680

更常见的是，“ **id** ”是该特定表的**主键，而****table1name_id**是该表中将该表与 table1 相关联的**外键。**

例如，在您的示例中，每个表的 id 是该表的主键，并且是**将“问题”表与轮询“表”相关联**的表中`poll_id`的外键。`questions`

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T04:40:13.857

从技术上讲，这两种方法都是可用的。

这个问题真的归结为重用之一。如果您打算将此站点用于其他民意调查，那么您的同事的方法是正确的。

但是，如果这是单次交易，那么您开始的交易就可以了。

您的方法将减少代码/设置。他将花费更多时间让您了解 EAV 模型的复杂性；尤其是在报告方面。使用 EAV 设计构建高性能查询并不适合胆小的人。

当然有一个中间立场。即将登录信息分离到自己的表中，并创建一个“投票”答案表，其中仅包含您关心的 4 列。这种方法不具备 EAV 方法的任何灵活性，但符合有关结构的标准 DB 设计标准，并且肯定很容易组合和查询。

最后，还有第四个选择：不用自己编写，只需在提供免费投票的网站之一上注册即可。例如： http: [//www.micropoll.com/](http://www.micropoll.com/) 注意：我不隶属于他们，也没有使用过他们的产品。这只是一个在 2 秒谷歌搜索中弹出的网站。

* * *

**因评论而**更新是的，您可以针对您最初拥有的结构执行简单查询。**例如：**

 **1.  统计用户数：
    `select count(*) from users`

2.  计算说是的人数：
    同意同意_1：`select count(*) from users where agree_1 = 'yes'`
    双方同意：同意`select count(*) from users where agree_1='yes' and agree_2='yes'`
    以下任何一项：`select count(*) from users where agree_1='yes' or agree_2='yes'`

3.  计算拒绝的人数：
    不同意_1：`select count(*) from users where agree_1 = 'no'`
    对两者都拒绝：`select count(*) from users where agree_1='no' and agree_2='no'`
    对任何一个都拒绝：`select count(*) from users where agree_1='no' or agree_2='no'`

4.  仅显示
    评论：`select reason_1, reason_2 from users`
    仅是评论：`select reason_1 from users where agree_1 = 'yes'`
    来自任一列中的评论任何是：
    `select reason_1 from users where agree_1 = 'yes' union all select reason_2 as reason_1 from users where agree_2 = 'yes'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T04:41:46.027

在数据库中使用关系保持数据验证和规范化，尝试使用不包含冗余数据的结构，那个人建议你很好地开始，你所要做的就是使用 InnoDB 引擎表。在用户、投票、问题和答案表中使 id 为主，并为外键列添加索引，即（question_id、poll_id、user_id）。地图

```
 answers.question_id to questions.id 
    questions.poll_id to polls.id
    answers.user_id  to users.id 
```

这可以在 phpmyadmin 的关系视图中轻松完成****

# bash - sed 意外字符

> ID：14432562
> 
> 赞同：1
> 
> 时间：2013-01-21T04:29:36.803
> 
> 标签：bash, sed

我正在编写以下脚本：

```
v="1,pop";
sed "$v/d" dir/file1 
```

它给了我这个错误：

```
char 3: unexpected `,' 
```

如何解决这个问题？注意： 的值`$v`无法控制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:08:06.833

您`sed`以错误的方式使用。

```
$ v="1,pop";
$ cat file 
1,pop
Suku
JohnGeorge
stackoverflow
serverfault

$ sed '/'$v'/d' file
Suku
JohnGeorge
stackoverflow
serverfault

$ sed "/"$v"/d" file
Suku
JohnGeorge
stackoverflow
serverfault 
```

如果你想在 bash 中替换一个变量`sed`，你需要用引号将它括起来，就像我上面显示的那样。此外，如果您想将修改写入文件，则需要使用`sed`with `-i`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T09:33:15.437

在脚本中使用这种方式

v="1,流行"

sed "/^$v$/{

d

}" 目录/文件1

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-21T04:55:21.423

您需要[hashbang](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)，以便您的 shell 知道如何执行脚本。

```
#!/bin/sh 
```

然后你会得到...

> sed: 1: "1,pop/d": 预期的上下文地址

...这告诉你命令已执行。:)

# linux - 如何在 /tmp 文件夹中创建永久符号链接以启动 postgres？

> ID：14432563
> 
> 赞同：1
> 
> 时间：2013-01-21T04:29:43.177
> 
> 标签：linux, postgresql

我正在运行 postgresql 但每次系统重新启动时，符号链接 /tmp/.s.PGSQL.5432 都会被删除，所以我必须通过手动创建它

```
sudo ln -s /tmp/.s.PGSQL.5432 /var/run/postgresql/.s.PGSQL.5432 
```

然后才开始postgres。无论如何我可以自动化这个（比如在系统启动时运行的命令）？还有为什么这个 postgres 的 /tmp 链接？我相信有更好的解决方案，然后在每次重新启动后继续创建 /tmp 链接

我在 ubuntu 12.10 顺便说一句

编辑 - 代码确实以相反的顺序显示，但它现在正在工作，也见[https://askubuntu.com/a/213462](https://askubuntu.com/a/213462)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T04:32:40.850

将它添加到[启动脚本](http://www.debianadmin.com/manage-linux-init-or-startup-scripts.html)中。您不需要 sudo，因为所有启动脚本都以 root 身份运行。它应该位于 中`/etc/init.d`，因此您可以使用 编辑它`sudo vim /etc/init.d/postgres`。

# android - 是否有可能使用 Open Graph API 发布到群组？

> ID：14432566
> 
> 赞同：0
> 
> 时间：2013-01-21T04:29:59.690
> 
> 标签：android, facebook, facebook-graph-api, facebook-opengraph

由于 /PROFILE_ID/feed 将不受支持（请参阅[此](https://developers.facebook.com/blog/post/2012/10/10/growing-quality-apps-with-open-graph/)），是否可以使用 OpenGraph API 向用户组发布消息？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T04:12:54.290

是否可以使用 OpenGraph API 向用户组发布消息？是的

[https://graph.facebook.com/PAGE_ID/feed](https://graph.facebook.com/PAGE_ID/feed)

# css - 使用 CSS 将图像写入外部样式

> ID：14432567
> 
> 赞同：0
> 
> 时间：2013-01-21T04:30:02.663
> 
> 标签：css

我的 HTML 代码如下：

```
<img src="../images/ffp.jpg" alt="Adiscos membre de la F&eacute;d&eacute;ration de la Formation Professionnelle" name="Adiscos membre de la F&eacute;d&eacute;ration de la Formation Professionnelle" width="100" id="Adiscos membre de la F&eacute;d&eacute;ration de la Formation Professionnelle" /> 
```

我想把它写成外部 CSS。这个应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T04:35:22.460

这在 CSS 中是不可能的。图像的源是标记的一部分，而不是 CSS。您需要使用 JavaScript。

```
 document.getElementById("ImageID").src = "ImageSource"; 
```

但是如果你真的需要 CSS 来做这件事，请改用 DIV。

`<div id="image1"></div>`

```
/* In external CSS file */
#image1 { width: 100px; height: 50px; background-image: url(image.gif); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T04:37:52.287

```
Adiscos membre de la F&eacute;d&eacute;ration de la Formation Professionnelle {
background-image:url(""../images/ffp.jpg");
width : 100;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T04:35:03.533

.classname{background:url(../images/ffp.jpg) 无重复；}

# jquery - if/else 与 jquery 中的选择值

> ID：14432568
> 
> 赞同：1
> 
> 时间：2013-01-21T04:30:06.003
> 
> 标签：jquery

我有一个“类别”选择，我试图获得所选答案的价值。然后通过这个值，我的网站需要更改 css 属性。

我不知道出了什么问题，但这不起作用。请帮我。附言。对不起我的英语不好。

```
 $('select#kategorie').change(function() {
    var value = $('select#kategorie:selected').val();
    if (value=="1" || value=="10")
    {
    $("#liczba-pokoi").css("display","block");
    }
    if else (value=="2" || value=="11")
    {
    $("#liczba-pokoi").css("display","none");
    }
    if else ((value=="3" || value=="12")
    {
    $("#liczba-pokoi").css("display","none");
    }
    if else (value=="4" || value=="13")
    {
    $("#liczba-pokoi").css("display","block");
    }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T04:32:58.463

`else if`，不是`if else`。

您应该首先检查语法错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T04:56:46.393

一个更整洁的解决方案：

```
var val, liczba_pokoi = $("#liczba-pokoi");

$('#kategorie').change(function() {

  val = $(this).val();

  if(val == 1 || val == 4 || val == 10 || val == 13) liczba_pokoi.show();
  if(val == 2 || val == 3 || val == 11 || val == 12) liczba_pokoi.hide();  

}); 
```

见小提琴：http: [//jsfiddle.net/pBxfX/](http://jsfiddle.net/pBxfX/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T04:32:52.893

您使用的 If Else 语法不正确。它必须像

```
$('select#kategorie').change(function() {
    var value = $(this).val();
    if(value=="1" || value=="10")
    {
       $("#liczba-pokoi").css("display","block");
    }
    else if(value=="2" || value=="11")
    {
       $("#liczba-pokoi").css("display","none");
    }
    else if((value=="3" || value=="12")
    {
       $("#liczba-pokoi").css("display","none");
    }
    else if(value=="4" || value=="13")
    {
       $("#liczba-pokoi").css("display","block");
    }
  }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T04:33:13.050

你的 if else 条件应该`else if`是`if else`

```
$('select#kategorie').change(function() {

    var value = $('select#kategorie:selected').val();

if (value=="1" || value=="10")
{
$("#liczba-pokoi").css("display","block");
}
else if (value=="2" || value=="11")
{
$("#liczba-pokoi").css("display","none");
}
else if ((value=="3" || value=="12")
{
$("#liczba-pokoi").css("display","none");
}
else if (value=="4" || value=="13")
{
$("#liczba-pokoi").css("display","block");
}
}); 
```

点击链接了解更多。[IF ELSE 语句](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/if...else)

# jquery - 控制 HTML5 验证气球滚动？

> ID：14432571
> 
> 赞同：7
> 
> 时间：2013-01-21T04:30:25.087
> 
> 标签：jquery, html, forms, validation, twitter-bootstrap

我正在使用 Twitter Bootstrap 开发一个表单，该表单使用固定在顶部的导航菜单（随页面滚动，但保持固定在其顶部）和[http://reactiveraven.github.com/jqBootstrapValidation/](http://reactiveraven.github.com/jqBootstrapValidation/)用于简单的表单验证样式。

但是，我遇到的问题是，当弹出一个验证气球说“请填写此字段”时，浏览器会向上滚动到输入框位于页面最顶部的位置。在正常情况下，这很好，但是由于我的菜单设置，它被隐藏了。有什么办法可以接管此滚动并为其添加偏移量以防止这种情况发生？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T22:00:44.853

`form`我正在使用完全相同的设置，我发现使用该元素没有简单的方法。我的技巧是观察无效的`input`// `select`，`textarea`然后从中引发一些问题。这不是最好的解决方法，尤其是在有很多无效输入的情况下，但它帮助我解决了我需要的问题。希望其他人会过来并能够清理一下。

```
function scrollToInvalid() {
  // Height of your nav bar plus a bottom margin
  var navHeight = 60;
  // Offset of the first input element minus your nav height
  var invalid_el = $('input:invalid').first().offset().top - navHeight;

  // If the invalid element is already within the window view, return true. If you return false, the validation will stop.
  if ( invalid_el > (window.pageYOffset - navHeight) && invalid_el < (window.pageYOffset + window.innerHeight - navHeight) ) {
    return true;
  } else {
    // If the first invalid input is not within the current view, scroll to it.
    $('html, body').scrollTop(invalid_el);
  }
}

$('input').on('invalid', scrollToInvalid); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-03-12T12:36:54.583

这可以通过 html 元素上的简单 css 来完成

```
html {
  scroll-padding-top: 100px;
} 
```

`scroll-padding-bottom: 100px;`如果您有粘性页脚，请类似地使用

适用于所有现代浏览器，当然 IE 除外 有关更多信息，请参见此处 [https://css-tricks.com/almanac/properties/s/scroll-padding/](https://css-tricks.com/almanac/properties/s/scroll-padding/)

# android - android中的Handler未执行可运行程序

> ID：14432572
> 
> 赞同：0
> 
> 时间：2013-01-21T04:30:59.887
> 
> 标签：android, multithreading, handler, runnable

我的 android 应用程序中有一个`IntentService`类，它将 UDP 数据包发送到服务器。在我早期的实现中，我没有使用处理程序并且代码运行良好。我想在发送之前实现数据包的排队。因此，我创建了两个可运行文件，分别用于写入和读取队列。并尝试使用处理程序执行它们。但是可运行对象不会被执行并且会抛出 NullPointerExecption。我认为我的处理程序实现有问题。我想知道使用处理程序执行可运行文件的正确方法。提前致谢。我在下面发布了一些代码片段和 logcat：

```
wHandler = new Handler();
rHandler = new Handler();
writer = new Runnable(){
    public void run(){
            switch (pType) {
            case 0:
                while (send) {
                    queueMessageForSending(msg.getBytes());
                }
            case 1:
                // Float f = new Float(delayField.getString());
                // for(int i=0;i<2000;i++)
                while (send) {
                    try {
                        Thread.currentThread().sleep(delay);
                    } catch (Exception e) {
                    }
                    if(send)
                        queueMessageForSending(msg.getBytes());
                }
                // break;
            case 2:
                // for(int i=0;i<10000;i++)
                while (send) {
                    int u = want(30);
                    // int e=(int)Math.floor(-1*log(u)/(log((float)2.718)*2));
                    // System.out.println(e);
                    String data1 = "";
                    while ((u--) > 0)
                        data1 = data1 + msg;
                    if(send)
                        queueMessageForSending(data1.getBytes());
                }
                // break;
            case 3:
                //float f2 = Float.parseFloat(delayField.getText().toString());
                // for(int i=0;i<50;i++)
                while (send) {
                    int u = want(30);
                    // int e=(int)Math.floor(-1*log(u)/(log((float)2.718)*2));
                    System.out.println(u);
                    String data1 = "";
                    while ((u--) > 0)
                        data1 = data1 + msg;
                    System.out.println("data length :" + data1.length());
                    try {
                        Thread.currentThread().sleep(delay);
                    } catch (Exception e) {
                    }
                    if(send)
                        queueMessageForSending(data1.getBytes());
                }

            }
            wHandler.post(this);
        }
    };
    reader = new Runnable(){
        public void run(){
            while(send){
                if (!writeQueue.isEmpty())
                {
                    byte[] sendData = (byte[]) writeQueue.elementAt(0);
                    sendPacket(sendData);
                }
            }
            rHandler.post(this);
        }
    };

wHandler.post(writer);
rHandler.post(reader);

void sendPacket(byte[] data) {
    //if(socket!=null){
    try {
        System.out.println("\nClient:: Sending packet: " + " to " + addr
                + port);
        if(seq==100000)
        {
         seq=0;
        }
        Date d = new Date();
        Calendar c = Calendar.getInstance();
        c.setTime(d);
        String time = c.get(Calendar.HOUR_OF_DAY) + ":" +
        c.get(Calendar.MINUTE) + ":" +
        c.get(Calendar.SECOND);
    //System.out.println(time);
        long sentTime = c.getTime().getTime();
        //System.out.println(sentTime+"  "+seq);
        header=" "+seq+" "+sendData.length+"  "+sentTime+"  "+time+"  ";
        seq++;

        String s1= new String(sendData);
        String s2= header+s1;
       // System.out.println(s2);
        byte[] sendDataFinal = (byte[]) s2.getBytes();
        spacket = new DatagramPacket(sendDataFinal, sendDataFinal.length, addr, port);
        socket.send(spacket);
        writeQueue.remove(data);
        String resultTxt="Sent Packet at:"+DateFormat.format("MM/dd/yy h:mmaa", System.currentTimeMillis());
        broadcastIntent1.putExtra(PARAM_OUT_MSG, resultTxt);
        sendBroadcast(broadcastIntent1);
    } catch (Exception e) {
        System.out.println("Error:" + e.getMessage());
        e.printStackTrace();
        return;
    }
}

void queueMessageForSending(byte[] data)
{
    if (data.length > DEFAULT_DATAGRAM_SIZE)
    {
    throw new IllegalArgumentException(
    "Message too long: limit is " +
    DEFAULT_DATAGRAM_SIZE + " bytes");
    }
    synchronized(writeQueue)
    {
    writeQueue.addElement(data);
    writeQueue.notify();
    }
} 
```

日志猫：

```
01-21 09:46:59.022: E/AndroidRuntime(915): FATAL EXCEPTION: IntentService[UdpService]
01-21 09:46:59.022: E/AndroidRuntime(915): java.lang.NullPointerException
01-21 09:46:59.022: E/AndroidRuntime(915):  at com.example.udpmessageclient.UdpSendService$1.run(UdpSendService.java:119)
01-21 09:46:59.022: E/AndroidRuntime(915):  at android.os.Handler.handleCallback(Handler.java:615)
01-21 09:46:59.022: E/AndroidRuntime(915):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-21 09:46:59.022: E/AndroidRuntime(915):  at android.os.Looper.loop(Looper.java:137)
01-21 09:46:59.022: E/AndroidRuntime(915):  at android.os.HandlerThread.run(HandlerThread.java:60) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:36:01.107

`runnables`像这样开始这些`Thread`：

```
Thread t =new Thread(new Runnable() {

        public void run() {
            // do whatever you want to do inside runnable

            // after functionality inside runnable is complete...call handler
            Message msg= new Message();
            msg.what=1;
            h.sendMessage(msg);
        }
}); 
```

之后，您可以在内部执行所需的功能`handler`

```
 Handler h =new Handler(){
        public void handleMessage(android.os.Message msg)
        {
            // do whatever you want to do in handler            
        } 
    }; 
```

# iphone - UITextField 动画完成，但在用户触摸后弹回到原来的位置

> ID：14432574
> 
> 赞同：1
> 
> 时间：2013-01-21T04:31:05.690
> 
> 标签：iphone, ios, xcode, uitextfield

我有三个`UITextField`通过 setFrame: 方法制作动画的 s。动画本身效果很好，但是当用户触摸屏幕时，问题在动画之前就开始了。发生的情况是所有三个`UITextField`s 都消失了。

需要注意的一件事是，当我按下取消，然后按下重新实例化动画的按钮时，`UITextField`s 重新出现并且仍然具有用户先前输入的字符串。所以它们并没有真正消失……我想只是在视觉上消失了。

我得到的代码：

```
- (IBAction)signupPressed:(UIButton *)sender
{
    self.isSigningUp = YES;
    [UIView animateWithDuration:0.3f
                          delay:0.0f
                        options:UIViewAnimationOptionCurveEaseOut
                     animations:^{
                         self.krtiqueButton.alpha = 0.0f;
                         self.krtiqueButton.enabled = NO;
                         self.facebookButton.alpha = 0.0f;
                         self.facebookButton.enabled = NO;
                     } completion:^(BOOL finished){
                         if (finished) {
                             [self animateSignUpCredentials];
                         }
                     }];
}
- (void)animateSignUpCredentials
{
    [UIView animateWithDuration:0.3f
                          delay:0.0f
                        options:UIViewAnimationOptionCurveEaseOut
                     animations:^{
                         self.fullnameTextField.frame = CGRectMake(20, 59, 280, 30);
                         self.emailTextField.frame = CGRectMake(20, 97, 280, 30);
                         self.passwordTextField.frame = CGRectMake(20, 135, 280, 30);
                         self.continueButton.alpha = 1.0f;
                     } completion:nil];
} 
```

我尝试通过将 setFrame: 从 setFrame, 更改为`[self.fullnameTextField sefFrame: ...]`. 不然我真的什么都想不出来哈哈。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T05:18:24.937

您是否使用自动布局（iOS 6 的一项功能，它根据称为约束的算术规则控制控件的放置）？要查看是否启用了自动布局，请打开故事板/NIB，按`option`+ `command`-`1`转到“文件检查器”（或只需单击最右侧面板上的“文件检查器”选项卡）并查看“自动布局”是否被选中或不是。

如果启用自动布局，即使在更改帧之后，也会重新应用约束，并且控件将移回约束指定的位置。您可以关闭自动布局，或者保持自动布局打开，然后以编程方式删除约束或以编程方式更改约束而不是更改框架。

有关如何通过更改约束来制作动画的示例，请参见此[答案。](https://stackoverflow.com/a/14190042/1271826)

# javascript - 根据国家/地区重定向页面

> ID：14432577
> 
> 赞同：0
> 
> 时间：2013-01-21T04:31:15.430
> 
> 标签：javascript, web-services

我创建了一个将返回国家代码的 Web 服务，现在我想要将此 Web 服务添加到我的 webconfig 文件上的 JavaScript 中，以便根据国家代码重定向它。我知道这很简单，但我对此很陌生，没有找到任何答案。

我再次需要一个 JS，它将根据 Web 服务的结果将我的页面重定向到不同的链接，所以我需要知道如何在 JS 中调用这个 WS 并重定向它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:35:33.337

在谷歌上查找`window.location.replace`...

我要做的是在标题中调用一个小的 jscript webservice 来获取国家代码，然后将重定向信息从上面写入页面本身。您必须进行测试，但这是我自己开始的地方。

想法是这样的： - 调用 web 服务来获取国家代码 - 设置一个 switch 语句 javascript 方法，该方法将考虑不同的国家代码并使用该`window.location.replace('newUrl')`方法将页面重定向到正确的 url。

如果不知道您的确切代码、服务调用、返回值等，就无法为您编写所有内容；但是，如果您进行 5 分钟的研究，您将使用上面的总体思路找到答案。

# linux - 为什么 ant build 在以 root 用户身份运行时成功，但使用 sudo 失败？

> ID：14432582
> 
> 赞同：1
> 
> 时间：2013-01-21T04:31:55.460
> 
> 标签：linux, apache, ant, java, redhat

我正在使用 java 构建工具 ant 在服务器上编译 Android 应用程序。

当我以 root 用户身份运行以下命令时，构建成功：

```
export ANT_HOME=/usr/local/ant
export JAVA_HOME=/usr/local/jdk
export PATH=${PATH}:${ANT_HOME}/bin
cd /path/to/android/file
/usr/local/ant/bin/ant release 
```

但是，当我以 netuser（或我测试过的任何其他用户）身份运行以下命令时：

```
export ANT_HOME=/usr/local/ant
export JAVA_HOME=/usr/local/jdk
export PATH=${PATH}:${ANT_HOME}/bin
cd /path/to/android/file
sudo /usr/local/ant/bin/ant release 
```

我收到以下错误：

```
BUILD FAILED
/path/to/android/file/build.xml:83: The following error occurred while executing this line:
/usr/share/android-sdk/tools/ant/build.xml:206: Class org.apache.tools.ant.taskdefs.condition.And doesn't support the nested "matches" element. 
```

我尝试更改 sudoers 文件，甚至使用 netuser ALL=(ALL) ALL 为 netuser 授予所有权限，但我得到相同的结果......有人能告诉我我做错了什么吗？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:15:55.460

我怀疑您在 as 运行时没有选择环境变量`sudo`。错误消息表明它使用的 Ant 任务版本比您预期的要旧。

要查看是否是这种情况，请尝试以下操作（在导出之后），看看它是否是您所期望的：

```
sudo env 
```

要保留环境变量，请修改`sudoers`文件或使用`-E`选项。

# windows - 窗口站和桌面

> ID：14432589
> 
> 赞同：2
> 
> 时间：2013-01-21T04:32:37.737
> 
> 标签：windows, winapi

我正在尝试在隐藏的桌面上启动一个应用程序，但没有取得太大进展，并且找不到关于桌面和窗口站到底是什么的详细文档。这是我删除了错误处理的代码（但相信我它在那里并且没有捕获任何错误）：

```
HWINSTA winSta = CreateWindowStation(_T("hiddenWinSta"), 0, 0, NULL);
SetProcessWindowStation(winSta);
HDESK desktop = CreateDesktop(_T("hiddenDesktop"), NULL, NULL, 0, DESKTOP_CREATEWINDOW, NULL);
OpenDesktop(_T("hiddenDesktop"), 0, TRUE, GENERIC_ALL);
SetThreadDesktop(desktop)

HWINSTA r = GetProcessWindowStation();
printf("winsta: %x %x\n", r, winSta);
HDESK curdesk = GetThreadDesktop(GetCurrentThreadId());
printf("desktop: %x %x\n", curdesk, desktop);

STARTUPINFO si;
PROCESS_INFORMATION pi;

ZeroMemory( &si, sizeof(si) );
si.cb = sizeof(si);
//si.lpDesktop = _T("hiddenDesktop");
ZeroMemory( &pi, sizeof(pi) );
TCHAR szCommand[MAX_PATH];
_sntprintf_s(szCommand, MAX_PATH, _T("%s"), _T("c:\\windows\\system32\\calc.exe"));
DWORD res = CreateProcess(NULL, szCommand, NULL, NULL, FALSE, 0, NULL, NULL, &si, &pi); 
```

如果我取消注释 si.lpDesktop 行，则进程无法以可怕的错误 0x000142 开始。如果我评论 si.lpDesktop 进程在当前桌面上启动。我究竟做错了什么？是否有可能做我想做的事（即启动一个完全不可见的 Windows GUI 应用程序）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:16:10.427

取消注释

```
si.lpDesktop = _T("hiddenDesktop"); 
```

评论

```
// HWINSTA winSta = CreateWindowStation(_T("hiddenWinSta"), 0, 0, NULL);
// SetProcessWindowStation(winSta); 
```

# c++ - 三元运算符使用的奇怪错误

> ID：14432591
> 
> 赞同：0
> 
> 时间：2013-01-21T04:32:42.620
> 
> 标签：c++

我有以下代码：

```
#include <iostream>
int main() {
    int i = 3;
    do {
        (i == 3) ? (std::cout << "Is 3.\n") : ++i;
        ++i;

    } while ( i < 4 );
    return 0;
} 
```

并得到以下错误响应：

```
ternary.cc: In function ‘int main()’:
ternary.cc:5:43: error: invalid conversion from ‘void*’ to ‘int’ [-fpermissive] 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T04:37:41.697

你有点滥用三元运算符，因为任何给定`a ? b : c`的我都希望结果存储在*某个地方*，我不会推荐`b`或`c`有副作用。

您的问题的根源是三元运算符需要`b`and`c`是相同/等效的类型。安德鲁关于他们需要能够“解析到相同的......类型”的解释可能更准确。

对于它的价值，您可以使用花招（甚至更多滥用，取决于您的观点）[来使代码工作](http://ideone.com/UXg3CN)：

```
#include <iostream>
int main() {
    int i = 3;
    do {
        (i == 3) ? (std::cout << "Is 3.\n", 0) : ++i;
        ++i;

    } while ( i < 4 );
    return 0;
} 
```

或者，[更明确地](http://ideone.com/rRDEST)说，确保两者都是同一类型：

```
#include <iostream>
int main() {
    int i = 3;
    do {
        (i == 3) ? (std::cout << "Is 3.\n") : (void*)++i;
        ++i;

    } while ( i < 4 );
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T04:39:41.410

三元运算符要求两个备选方案解析为相同的数据类型。你不能以你的方式使用它。

编译器告诉你这两种类型是不同的——它不能从`void*`（第一个路径的`int`类型）转换为（第二个路径的类型）。

# php - 任何 PHP IDE 都遵循 PSR 标准？

> ID：14432593
> 
> 赞同：1
> 
> 时间：2013-01-21T04:32:51.927
> 
> 标签：php, psr-0, php-ide

是否有任何 PHP IDE 遵循 PSR 0 到 PSR 3 标准的所有规则作为其代码格式化标准？

我知道所有 IDE 都遵循特定的代码格式标准，但不确定是否有任何完全/大部分遵循 PSR 0 到 PSR 3 标准。

如果有任何这样的 PHP IDE，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T05:09:19.157

IDE PHPStorm [为 PSR-1/PSR-2 和 Symfony2 提供更多 PHP 格式化选项和捆绑代码样式](http://blog.jetbrains.com/webide/2012/11/more-php-formatting-options-and-bundled-code-styles-for-ps/)

# django - 是网址还是视图？

> ID：14432599
> 
> 赞同：0
> 
> 时间：2013-01-21T04:33:17.043
> 
> 标签：django

似乎它应该工作......但是......这里是views.py

```
from django.shortcuts import render_to_response
from django.template import RequestContext
from create_lesson.models import Lesson
from django.contrib.auth.models import User
from add_material.models import Materials

def Use_Lesson(request, lesson):
    user=request.user
    lessons = Lesson.objects.get(slug=lesson)
    lessons.attributes=Materials.objects.filter(lesson=lessons.pk)
    context = {'user':user,'lesson':lessons,}
    return render_to_response('use_lesson/use_lesson.html', context, context_instance=RequestContext(request)) 
```

urls.py 看起来像这样

```
from django.conf.urls.defaults import *

urlpatterns= patterns('',
    (r'^browse/', 'use_lesson.views.Browse'),
    (r'^lesson/(?P<lesson>[a-zA-Z0-9-]+)', 'use_lesson.views.Use_Lesson'), 
```

这是基本错误消息请求方法：GET 请求 URL：.../lesson/superfarts Django 版本：1.4.1 异常类型：DoesNotExist 异常值：课程匹配查询不存在。

它是说问题就在这里：课程= Lesson.objects.get(slug=lesson)

当我在“python manage.py shell”中执行相同的查询时，我得到了我正在寻找的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:41:42.630

尝试将其更改为：

```
(r'^lesson/(?P<lesson>[a-zA-Z0-9-]+)/$', 'use_lesson.views.Use_Lesson') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T09:30:29.873

一个 slugfield 在正则表达式中最好用 \W 表示，它等于 [a-zA-Z0-9_]

```
(r'^lesson/(?P<lesson>\W+)/$', 'use_lesson.views.Use_Lesson') 
```

# mysql - 在 wordpress 中更改表 SQL 命令

> ID：14432600
> 
> 赞同：2
> 
> 时间：2013-01-21T04:33:19.253
> 
> 标签：mysql, database, wordpress, alter-table

由于我的插件的数据库发生了一些变化，我需要更改一个表以向其中添加一些列，但即使该函数正在运行，该表也不会被更改。这是我写的函数

```
 $sql = "ALTER TABLE `wp_tnt_videos` ADD `date_created` INT NOT NULL DEFAULT '0' AFTER `video_order`, ADD `date_modified` INT NOT NULL DEFAULT '0' AFTER  `date_created`, ADD `user_id` INT NOT NULL DEFAULT '0' AFTER `date_modified`;";

    require_once(ABSPATH . 'wp-admin/includes/upgrade.php');
    dbDelta($sql); 
```

我读了这个：[http](http://hungred.com/how-to/wordpress-dbdelta-function/) ://hungred.com/how-to/wordpress-dbdelta-function/ 并试图仔细检查 sql 命令。我也在 mysql 中运行那个 sql 命令并且它工作！所以，请帮助我！:|

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T16:49:53.350

您的答案在法典中：

> *   您必须在 SQL 语句中将每个字段放在自己的行中。
> *   PRIMARY KEY 和主键定义之间必须有两个空格。
> *   您必须使用关键字 KEY 而不是其同义词 INDEX，并且您必须至少包含一个 KEY。
> *   不得在字段名称周围使用任何撇号或反引号。
> 
> [http://codex.wordpress.org/Creating_Tables_with_Plugins#Adding_an_Upgrade_Function](http://codex.wordpress.org/Creating_Tables_with_Plugins#Adding_an_Upgrade_Function)

一方面，您在字段名称周围有反引号。该规则可能也适用于表名，但我不确定。

此外，您尝试使用`dbDelta`就像对数据库进行直接查询一样。它不是那样工作的。您需要为其提供完整的所需表结构`CREATE TABLE`，就好像您每次都在创建新的一样......

> dbDelta 函数检查当前表结构，将其与所需的表结构进行比较，并根据需要添加或修改表，因此它对于更新非常方便（请参阅 wp-admin/upgrade-schema.php 以获得更多示例如何使用 dbDelta)。
> 
> [http://codex.wordpress.org/Creating_Tables_with_Plugins#Adding_an_Upgrade_Function](http://codex.wordpress.org/Creating_Tables_with_Plugins#Adding_an_Upgrade_Function)

你不给它`ALTER TABLE`命令或只给它你想要改变的部分。它不是那种通用的数据库更改工具。而且，正如已经提到的，它非常挑剔。完全按照示例中的格式格式化您的 SQL，包括换行符。

我要补充一点，您需要非常仔细地观察此功能。它默默地失败了，似乎不应该做某些事情，比如删除索引——至少我在这方面遇到了很多麻烦。我不确定它是否会移动列以插入新列或只是添加到末尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-07T11:48:42.757

你只需要像这样执行你的 SQL 命令：

```
global $wpdb;
$wpdb->query($sql); 
```

# php - 使用加入我的网页显示数据

> ID：14432606
> 
> 赞同：0
> 
> 时间：2013-01-21T04:34:28.340
> 
> 标签：php, sql

大家好，我是 php 新手，我正在开发一个网站，我正在使用内部连接来检索数据，它在 sql 中工作正常，但是当我在 php 中使用时，它显示错误并且不显示，请帮助我了解代码。这是我的代码

```
<? do
  {
    ?>  
      <tr>

        <td><?php echo $fet_2['hemember.name'];?></td> 
        <td><?php echo $fet_2['ccase.comments'];?></td> 

    <?php }while($fet_2=mysql_fetch_assoc($result))?>

 $result = mysql_query("SELECT hemember.name, ccase.comments
 FROM hemember
 INNER JOIN ccase ON hemember.memid = ccase.he
 ORDER BY ccase.date desc"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T04:55:05.110

第一件事：

> 请不要将 mysql_* 函数用于新代码。[自 PHP 5.5.0 起，](http://php.net/manual/en/intro.mysql.php)它们不再被维护并被弃用。看到[红框](http://goo.gl/GPmFd)了吗？而是学习[准备好的语句](http://goo.gl/vn8zQ)并使用 [PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你不能决定，[这篇文章](http://goo.gl/3gqF9)将帮助你选择。如果你想学习，这里有很好的[PDO 教程](http://goo.gl/vFWnC)。

现在你可以这样做（使用**mysqli**）：

```
<table>
<thead>
    <tr>
        <th>Name</th>
        <th>Comments</th>
    </tr>
</thead>
<tbody>

<?php
$db = new mysqli("db_host", "db_user", "db_pwd", "db_name");
$qry = "SELECT hemember.name, ccase.comments
          FROM hemember INNER JOIN ccase ON hemember.memid = ccase.he
         ORDER BY ccase.date desc";

echo "<tr>";
if ($result = $db->query($qry)) {
    while ($row = $result->fetch_array(MYSQLI_ASSOC)) {
        echo "<td>".$row['hemember.name']. "</td>";
        echo "<td>".$row['ccase.comments']. "</td>";
    }
$result->close();
}
echo "</tr>";
$db->close();
?>

</tbody>
</table> 
```

代码没有经过测试。

# html - 我怎样才能在边框周围而不是元素周围有一个带阴影的边框？

> ID：14432612
> 
> 赞同：1
> 
> 时间：2013-01-21T04:35:04.777
> 
> 标签：html, css

`div`我的小提琴会告诉你一切，但我需要一个带阴影的边框，现在如果我使用没有高度的空，这很好，我使用`box-shadow`属性，但当我`div`包含一些文本时没有得到这种效果......所以有什么解决方法为了这？我需要添加一个空元素来实现这种效果吗？

[**小提琴**](http://jsfiddle.net/hRh93/)

CSS

```
.what_i_want {
    width: 100px;
    border-bottom: 2px solid #000000;
    margin: 50px;
    box-shadow: 0 0 5px #000;
}

.how_i_achieve_the_above_here {
    margin: 50px;
    border-bottom: 2px solid #000000;
} 
```

HTML

```
<div class="what_i_want"></div>
<div class="how_i_achieve_the_above_here">Vaibhav</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T04:39:40.397

[jsfiddle](http://jsfiddle.net/hRh93/1/)

```
.how_i_achieve_the_above_here:after{
    position:absolute;
    content: '';
    width:100%;
    height:2px;
    box-shadow: 0 0 5px #000;
    left:0;
    bottom:-2px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T04:38:55.317

box-shadow 不会在单词周围的“盒子”周围放置一个阴影吗？你不能只使用 100% 宽度的`<h1>`or`<p>`标记和带阴影的底部边框吗？未经测试，但似乎它应该工作。

# c# - 如何使用 Moq 并仅检查传递给函数的对象的一部分？

> ID：14432614
> 
> 赞同：0
> 
> 时间：2013-01-21T04:35:15.093
> 
> 标签：c#, .net, unit-testing, mocking, moq

我正在尝试将单元测试添加到我拥有的身份验证类中。所以，基本上它所做的就是我调用它`Login`，我希望它会返回 true，并且作为副作用会添加一个 cookie。

到目前为止，这是我的单元测试：

```
var mock=new Mock<IServerContext>(); //AddCookie method is within IServerContext
FSCAuth.Config.Server=mock; //set authentication to use mocked interface
mock.Setup(x=>x.AddCookie(new HttpCookie().Name=="??")); //question here
FSCAuth.Login("foo", "bar", false);
mock.VerifyAll(); 
```

我的问题是如何检查传递给 AddCookie 的参数？基本上，我想做的就是

```
bool AddCookieVerify(HttpCookie cookie)
{
    return cookie.Name=="foobar"
} 
```

如果我的验证函数返回 false，则抛出错误。我不明白如何在起订量中表达这个操作。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T04:53:26.183

Moq 包含`It`静态类，可让您指定您期望的参数类型。例如，而不是您的占位符行

```
mock.Setup(x => x.AddCookie(new HttpCookie().Name == "??")); 
```

你可以做

```
mock.Setup(x => x.AddCookie(It.Is<HttpCookie>(cookie => cookie.Name == "Whatever"))); 
```

然后它将失败验证，除非它传递了一个满足该表达式的值。

此外，您可能会考虑从`Setup()`follow by切换到事后`VerifyAll()`简单使用的东西，例如：`Verify()`

```
var mock = new Mock<IServerContext>(); // AddCookie method is within IServerContext
FSCAuth.Config.Server = mock.Object; //set authentication to use mocked interface
FSCAuth.Login("foo", "bar", false);
mock.Verify(x => x.AddCookie(It.Is<HttpCookie>(cookie => cookie.Name == "Whatever")), Times.Once()); 
```

这避免了您需要提前明确设置您的期望，并将其简化为一行额外的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T04:46:20.820

下面您将设置`AddCookie`为期望任何将属性设置为特定值`HttpCookie`的实例。`Name`

```
var mock=new Mock<IServerContext>(); //AddCookie method is within IServerContext
FSCAuth.Config.Server = mock.Object; //set authentication to use mocked interface
mock.Setup(x => x.AddCookie(It.Is<HttpCookie>(h => h.Name == "foobar"))); //question here
FSCAuth.Login("foo", "bar", false);

mock.VerifyAll(); 
```

另请注意，设置`FSCAuth.Config.Server`时必须使用`MockedInstance.Object`.

# sql - 如何在 Oracle 中检索最后更新的记录

> ID：14432625
> 
> 赞同：-2
> 
> 时间：2013-01-21T04:36:07.253
> 
> 标签：sql, oracle

嗨，你能帮我解决这个问题吗？

表：Mail_Archives

```
 Mail_ID     Archived_by         Archived_date
   001        Sam                21/11/2011
   002        Tina               10/10/2012
   002        Tina               10/10/2012
   004        Zark               10/10/2011 
```

如何对此输出形成查询，我需要最近存档日期的查询结果，包括计数。例如

```
 Count      Archived_by     Archived_Date

   2          Tina           10/10/2012 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:41:10.550

尝试：

```
select * from (
   select * from Mail_Archives order by Archived_date desc
) where rownum=1 
```

**更新**：

```
select count(a.Mail_ID) top_one, b.archived_by, b.archived_date 
from Mail_Archives a, 
    (select * from (
           select * from Mail_Archives order by Archived_date desc
        ) where rownum=1
    ) b
where a.archived_by = b.archived_by 
group by b.archived_by, b.archived_date 
```

你可以看到它[**在这里工作**](http://sqlfiddle.com/#!4/2178a/6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T05:17:53.147

这是一个 MySQL 查询，我没有 Oracle 来测试它，但它可能会给你一个很好的尝试。注意：表名称为“测试”。LIMIT 1 将只取前一个（显示最大计数）表属性中的大写或小写在查询中没有区别，并且默认情况下整数之前的 00 将被截断

```
SELECT COUNT(mail_ID) as top_one, archived_by, archived_date
FROM test
GROUP BY mail_id
HAVING COUNT(*) = (
    SELECT COUNT(*) AS total
    FROM test
    GROUP BY mail_id
    ORDER BY total DESC
    LIMIT 1
)

top_one     archived_by     archived_date
2           Tina             2012-10-10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T06:17:07.477

尝试：

```
select mail_id, archived_by, archived_date, cnt
from (
select mail_id, archived_by, archived_date, count(*) cnt
from Mail_Archives
group by mail_id, archived_by, archived_date
order by archived_date desc)
where rownum = 1; 
```

或者（如果你喜欢窗口函数）

```
select mail_id, archived_by, archived_date, cnt from (
select mail_id, 
       archived_by, 
       archived_date, 
       row_number() over (order by archived_date desc) rn,
       count(*) over (partition by mail_id, archived_by, archived_date) cnt
from Mail_Archives)
where rn = 1; 
```

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/2b77d/29)

* * *

**更新**假设您只需要 mail_id 的最大日期和计数

```
select mail_id, archived_by, archived_date, cnt from (
select mail_id, 
       archived_by, 
       archived_date, 
       row_number() over (order by archived_date desc) rn,
       count(*) over (partition by mail_id) cnt
from Mail_Archives)
where rn = 1; 
```

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/9b5d8/8)

# php - 将辅助导航添加到站点的 SmartStart WP 主题...？

> ID：14432632
> 
> 赞同：0
> 
> 时间：2013-01-21T04:36:49.547
> 
> 标签：php, wordpress, menu, navigation

我是初学者级别的网站“设计师”，我经常在搜索中找到您的网站。无论如何，我希望有人可以提供帮助。（我是在这里发帖的新手，所以请告诉我，我会留下任何重要信息。）

我想为 Wordpress 的 SmartStart 主题添加一个基于类别的辅助导航栏。我已经在functions.php中添加了额外的wp_nav_menu，但不知道如何将它插入到我想要的位置。（我也已经在WP的菜单设计区设置了菜单参数。）

网站所有者希望菜单#2 直接浮动（右）在全局主导航下方。

我应该尝试在 header.php 文件或索引文件中添加菜单吗？

这是标题代码：

```
<!DOCTYPE html>
<head>
<meta charset="<?php bloginfo( 'charset' ); ?>">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title><?php wp_title('|', true, 'right'); ?></title>
<?php if( of_get_option('ss_favicon') ): ?>
<link rel="icon" type="image/png" href="<?php echo of_get_option('ss_favicon'); ?>">
<?php endif; ?>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="pingback" href="<?php bloginfo( 'pingback_url' ); ?>" />
<?php wp_head(); ?>
</head>
<body <?php body_class(); ?>>
<header id="header" class="container clearfix">
<a href="<?php echo home_url('/'); ?>" id="logo" title="<?php echo esc_attr( get_bloginfo('name', 'display') ); ?>">
<?php if( of_get_option('ss_logo') ): ?>
<img src="<?php echo of_get_option('ss_logo'); ?>" alt="<?php bloginfo('name'); ?>">
<?php else: ?>
<h1><?php bloginfo('name'); ?></h1>
<?php endif; ?>
</a>
<nav id="main-nav">
<?php echo ss_framework_main_navigation(); ?>
</nav><!-- end #main-nav --> 
```

这是主题演示的链接，以防有帮助：[http](http://themeforest.net/item/smartstart-wp-responsive-html5-theme/full_screen_preview/2067920) ://themeforest.net/item/smartstart-wp-responsive-html5-theme/full_screen_preview/2067920 。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:48:40.657

这是注册自定义菜单的方法，必须更改为您的`functions.php`文件。

```
// Registering Menus For Theme

add_action( 'init', 'register_my_menus' );

function register_my_menus() {
register_nav_menus(
    array(
        'main-nav-menu' => __( 'Main Navigation Menu' ),
        'sidebar-menu' => __( 'Sidebar Menu' ),
        'footer-menu' => __( 'Footer Menu' )
    )
);
} 
```

现在在主题部分你必须调用：

```
wp_nav_menu (array ( 'theme_location' => 'main-nav-menu') ); 
```

我只在主题部分调用了第一个注册菜单，只要你想要这样的菜单就可以了。

要了解有关深度的更多信息，请查看给定的链接[Register Navigation in WP](http://www.wphub.com/how-add-navigation-menu-wordpress-theme/)。希望这会帮助你。

# r - R CMD BATCH - 终端输出

> ID：14432637
> 
> 赞同：7
> 
> 时间：2013-01-21T04:37:34.827
> 
> 标签：r, batch-processing

刚刚学习 R，我认为在 unix 终端中以批处理模式使用它而不是在 R 终端中编写会很棒。

所以我决定写 test.r

```
 x <- 2
    print(x) 
```

然后在终端我做了

```
 R CMD BATCH test.r 
```

它运行，但输出一个 test.r.Rout 文件。我可以通过运行 R CMD BATCH test.r out.txt 将其输出为文本文件。

问题是，是否可以将输出打印到终端？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-21T06:36:24.753

塞巴斯蒂安-C 发布：

```
 Rscript test.r 
```

这在终端中工作并产生了所需的输出

谢谢塞巴斯蒂安-C

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-31T06:21:17.800

有点迟到的反应，但前几天我正在寻找 Blakedallen 发布的问题的答案。这是我的解决方案：

```
mkfifo fifo   # create a named pipe
cat fifo &    # show everything to the terminal 
              # (or do 'cat fifo' in another terminal)
R CMD BATCH input # 'input' contains your R commands 
```

奇迹般有效 ：-）

'fifo' 命名管道可以再次用于您可能想要执行的任何未来 R CMD BATCH 命令。在“R CMD BATCH”命令之后，“cat”命令也结束。

# hibernate - hibernate如何与mysql中的多个数据库交互？

> ID：14432641
> 
> 赞同：1
> 
> 时间：2013-01-21T04:38:00.073
> 
> 标签：hibernate

我必须在 MySQL 中使用休眠。我也在使用spring MVC。有一个表单，其中有十个字段必须存储在三个不同的表中。其中两个在同一个数据库中，而第三个在另一个数据库中。我怎样才能存储它们？通常我使用 @modelattribute 。我如何构造实体类？和数据库连接。有一个 jdbc.properties 文件，其中给出了数据库的名称。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:10:39.807

在[hibernate-forum](https://forum.hibernate.org/viewtopic.php?t=953983)上发布了类似的问题。

所以解决方案基本上是为两个数据库创建两个 hibernate.cfg.xml 文件。然后创建两个会话工厂。实体类不会发生剧烈变化，但您需要通过两个会话工厂的会话对象以编程方式调用两个不同的 save()。

如果您的架构中有许多复杂的映射，您最好选择[hibernate shards](http://www.hibernate.org/subprojects/shards.html)。这是一个[类似的参考](https://stackoverflow.com/questions/2100985/use-two-databases-concurrently-in-hibernate?rq=1)

**编辑：**

由于您使用的是*spring MVC*，因此您需要在 jdbc 属性文件中指定两个 jdbc 配置，并`datasource beans`在*applicationContext.xml 和 spring-servlet.xml*中创建两个，无论您创建了 bean。为两个 DataSource创建相应`session factory`的 bean，并以编程方式使用它们在两个数据库上调用您的 save()。

它应该工作:)

# iphone - 如何在地图上拖动 MKPinAnnotation 时获取位置

> ID：14432642
> 
> 赞同：1
> 
> 时间：2013-01-21T04:38:06.313
> 
> 标签：iphone, mkmapview, mkannotationview

`MKPinAnnotation`当用户拖动对象时，我试图在 Iphone 地图上显示放大镜玻璃效果。要求是当用户当时移动大头针时，我想在手指下方显示地图区域。

为此，我有一个想法，即我将在另一个地图视图中显示地图的那一部分。为此，我使用了：

```
pinAnnotation.draggable = YES; 
```

当用户拿起别针时，我进入`MKAnnotationViewDragStateStarting`了委托方法。

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view didChangeDragState:(MKAnnotationViewDragState)newState fromOldState:(MKAnnotationViewDragState)oldState {
} 
```

但是当用户在地图上移动图钉时..这个方法不会被连续调用。我的印象是这个方法会不断被调用，`MKAnnotationViewDragStateDragging`我会得到相应的坐标。

1.  为什么在拖动针点时不调用此方法。
2.  有没有其他方法可以实现这样的要求。
3.  用户拖动针点时如何获取坐标。

谢谢

# java - 解析 XML 文件并在 Java 中打印出对应的 NodeList

> ID：14432653
> 
> 赞同：0
> 
> 时间：2013-01-21T04:40:01.713
> 
> 标签：java, xml, parsing, dom

我有一个 XML 文件，我想根据 Java 中的控制台输入进行搜索。如果输入在某个标签内找到匹配项，它应该打印出相应的 NodeList。我已经搜索过，但找不到我要找的东西。

XML 文件：

```
<DATABASE>
    <USER>
        <ID>1</ID>
        <FIRSTNAME>User</FIRSTNAME>
        <LASTNAME>Name</LASTNAME>
        <USERNAME>username</USERNAME>
        <PASSWORD>password</PASSWORD>
    </USER>
     <USER>
        <ID>2</ID>
        <FIRSTNAME>John</FIRSTNAME>
        <LASTNAME>Doe</LASTNAME>
        <USERNAME>john.doe</USERNAME>
        <PASSWORD>password</PASSWORD>
    </USER>
</DATABASE> 
```

爪哇：

```
private void viewByUsername() throws ParserConfigurationException, IOException,
    SAXException, TransformerConfigurationException{
    Scanner scan = new Scanner(System.in);
    System.out.println("Enter username to find: ");
    String input = scan.nextLine();

    DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
    Document doc = docBuilder.parse("XMLData/UserDatabase.xml");

    doc.getDocumentElement().normalize();

    NodeList users = doc.getElementsByTagName("USER");

    for (int temp = 0; temp < users.getLength(); temp++){
        Node nNode = users.item(temp);
        if (nNode.getNodeType() == Node.ELEMENT_NODE) {
            Element eElement = (Element) nNode;

        }
    } 
```

# c# - 带有十进制数字的屏蔽文本框

> ID：14432659
> 
> 赞同：3
> 
> 时间：2013-01-21T04:40:48.513
> 
> 标签：c#, winforms, textbox, decimal, maskedtextbox

在我的窗口应用程序中，我需要接受真实十进制数字的屏蔽文本框。

> 例如。
> 1) 1.56
> 2) 22.34
> 3)
> 123.34 4) 12312.34
> 这所有的值都应该是有效的。

谁能告诉我我该怎么做？
而且，如果有人对真正的十进制数有更好的解决方案，而不是这个蒙面的文本框，那么我喜欢看到它。
谢谢...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T04:50:08.927

不要使用 MaskedTextbox，`NumericUpDown`而是考虑使用。它支持`System.Decimal`的数字支持您应该关心的大多数实数。

该`NumericUpDown.DecimalPlaces`属性最多支持 99 位小数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T04:54:21.337

使用像这样的自定义控件（修改它以满足您的需要）：

```
using System; 
using System.ComponentModel; 
using System.Text; 
using System.Windows.Forms; 
using System.Drawing; 

namespace CustomControls 
{ 
    public enum PasteRejectReasons 
    { 
        Unknown = 0, 
        NoData, 
        InvalidCharacter, 
        Accepted 
    } 

    public class DecimalTextBox : TextBox 
    { 
        public const int WM_PASTE = 0x0302; 
        public event EventHandler<KeyRejectedEventArgs> KeyRejected; 
        public event EventHandler<PasteEventArgs> PasteRejected; 

        private bool _DecimalSeparator = false; 
        private int _Precision; 

        public new HorizontalAlignment TextAlign 
        { 
            get { return base.TextAlign; } 
            set { base.TextAlign = value; } 
        } 

        public int Precision 
        { 
            get { return _Precision; } 
            set { _Precision = value; } 
        } 

        public DecimalTextBox() 
        { 
            TextAlign = HorizontalAlignment.Right; 
            Precision = 3; 
        } 

        protected override void OnGotFocus(EventArgs e) 
        { 
            SelectAll(); 
            base.OnGotFocus(e); 
        } 

        protected override void OnKeyDown(KeyEventArgs e) 
        { 
            bool validate = true; 

            if (Text.Contains(".") || Text.Contains(",")) 
            { 
                int indexSep; 
                string[] split; 
                string partiDecimal = ""; 

                if (Text.Contains(".")) 
                    indexSep = Text.IndexOf('.'); 
                else 
                    indexSep = Text.IndexOf(','); 

                split = Text.Split(new char[] { ',', '.' }); 
                partiDecimal += split[1]; 

                if (partiDecimal.Length >= Precision) 
                    if (SelectionStart > Text.Length - (partiDecimal.Length + 1)) 
                        validate = false; 
            } 

            bool result = true; 

            bool validateKeys = (e.KeyCode == Keys.Enter); 

            bool numericKeys = ( 
                ((e.KeyCode >= Keys.D0 && e.KeyCode <= Keys.D9) || 
                (e.KeyCode >= Keys.NumPad0 && e.KeyCode <= Keys.NumPad9)) 
                && e.Modifiers != Keys.Shift 
                && validate); 

            bool ctrlA = e.KeyCode == Keys.A && e.Modifiers == Keys.Control; 

            bool editKeys = ( 
                (e.KeyCode == Keys.Z && e.Modifiers == Keys.Control) || 
                (e.KeyCode == Keys.X && e.Modifiers == Keys.Control) || 
                (e.KeyCode == Keys.C && e.Modifiers == Keys.Control) || 
                (e.KeyCode == Keys.V && e.Modifiers == Keys.Control) || 
                e.KeyCode == Keys.Delete || 
                e.KeyCode == Keys.Back); 

            bool navigationKeys = ( 
                e.KeyCode == Keys.Up || 
                e.KeyCode == Keys.Right || 
                e.KeyCode == Keys.Down || 
                e.KeyCode == Keys.Left || 
                e.KeyCode == Keys.Home || 
                e.KeyCode == Keys.End); 

            bool decimalSeparator = (( 
                e.KeyCode == Keys.Decimal || 
                e.KeyValue == 190 || 
                e.KeyValue == 188)&& 
                TextLength != 0 && 
                SelectionLength == 0); 

            if (decimalSeparator)  
            { 
                if (!_DecimalSeparator) 
                    _DecimalSeparator = true; 
                else 
                    decimalSeparator = false; 
            } 

            if (!(numericKeys || editKeys || navigationKeys || decimalSeparator || validateKeys)) 
            { 
                if (ctrlA)
                    SelectAll();

                result = false; 
            } 

            if (!result)
            { 
                e.SuppressKeyPress = true; 
                e.Handled = true; 

                if (!ctrlA)
                    OnKeyRejected(new KeyRejectedEventArgs(e.KeyCode)); 
            } 
            else 
                base.OnKeyDown(e); 
        } 

        protected override void OnKeyPress(KeyPressEventArgs e) 
        { 
            if (e.KeyChar == ';' || e.KeyChar == '?') 
            { 
                if (!(Text.Contains(",") || Text.Contains("."))) 
                    _DecimalSeparator = false; 
                e.Handled = true; 
            } 
        } 

        protected override void OnTextChanged(EventArgs e) 
        { 
            bool invalid = false; 
            int i = 0; 
            foreach (char c in Text) // Check for any non digit characters. 
            { 
                if (!(char.IsDigit(c) || c == ',' || c == '.')) 
                { 
                    invalid = true; 
                    break; 
                } 

                if (c == ',' || c == '.') 
                    i++; 
            } 

            if (i == 0) 
                _DecimalSeparator = false; 
            else if (i > 1) 
                invalid = true; 

            if (invalid) 
            { 
                Text = ""; 
                return; 
            } 

            if (Text.Contains(".") || Text.Contains(",")) 
            { 
                string charSep = ""; 
                string[] split; 
                string partiEntier = ""; 

                if (Text.Contains(".")) 
                    charSep = "."; 
                else 
                    charSep = ","; 

                split = Text.Split(new char[] { ',', '.' }); 
                partiEntier += split[0]; 
                if (partiEntier == "") 
                    Text = "0" + charSep + split[1]; 
            } 
            base.OnTextChanged(e); 
        } 

        protected override void WndProc(ref Message m) 
        { 
            if (m.Msg == WM_PASTE) 
            { 
                PasteEventArgs e = CheckPasteValid(); 
                if (e.RejectReason != PasteRejectReasons.Accepted) 
                { 
                    m.Result = IntPtr.Zero; 
                    OnPasteRejected(e); 
                    return; 
                } 
            } 
            base.WndProc(ref m); 
        } 

        private PasteEventArgs CheckPasteValid() 
        { 
            PasteRejectReasons rejectReason = PasteRejectReasons.Accepted; 
            string originalText = Text; 
            string clipboardText = string.Empty; 
            string textResult = string.Empty; 

            try 
            { 
                clipboardText = Clipboard.GetText(TextDataFormat.Text); 
                if (clipboardText.Length > 0)
                { 

                    textResult = ( 
                        Text.Remove(SelectionStart, SelectionLength).Insert(SelectionStart, clipboardText)); 
                    foreach (char c in clipboardText)
                    { 
                        if (!char.IsDigit(c)) 
                        { 
                            rejectReason = PasteRejectReasons.InvalidCharacter; 
                            break; 
                        } 
                    } 
                } 
                else 
                    rejectReason = PasteRejectReasons.NoData; 
            } 
            catch 
            { 
                rejectReason = PasteRejectReasons.Unknown; 
            } 
            return new PasteEventArgs(originalText, clipboardText, textResult, rejectReason); 
        } 

        protected virtual void OnKeyRejected(KeyRejectedEventArgs e) 
        { 
            EventHandler<KeyRejectedEventArgs> handler = KeyRejected; 
            if (handler != null) 
                handler(this, e); 
        } 

        protected virtual void OnPasteRejected(PasteEventArgs e) 
        { 
            EventHandler<PasteEventArgs> handler = PasteRejected; 
            if (handler != null) 
                handler(this, e); 
        } 
    } 
} 
```

# j - 使用每个循环列出目录中的文件

> ID：14432661
> 
> 赞同：2
> 
> 时间：2013-01-21T04:40:53.053
> 
> 标签：j

我已经阅读了一些示例代码，但我只是不明白如何使用类似 foreach 的循环来遍历文件集合。这是我获取文件列表的方法：

```
ls=:0 dir '*.*' 
```

我可以回应这个，它工作正常。但我需要做的是使用某种循环一次处理每个文件 1 。所以像：

```
ls=:0 dir '*.*'
foreach (file in ls) {
 do something(file)
 do something else.. so on
} 
```

在手册中，每个循环的 a 看起来像这样：

```
smoutput each i.10 
```

显然这没有用，它打印 1 到 10，我不知道如何修改它以使用我的目录列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:15:32.577

`each`关键字用于单行循环。有一个[`for`循环](http://www.jsoftware.com/help/dictionary/cfor.htm)，您可以在定义的函数（或动词）中使用它。

例子：

```
myFunction =: 3 : 0
    ls =. 1 dir '*.*'
    for_file. ls do.
        doSomething ;file
        doSomethingElse ;file
    end.
) 
```

该`for_.`变体可以说是最有用的。变量的名称`file`正好位于下划线和句点之间。要记住的重要一点是，for 循环将给出数组中出现的每个项目，所以如果`ls`是一个装箱字符串的数组，每个项目都`file`将显示为一个装箱字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T23:18:40.523

您可能需要此表单的列表：

```
ls =: 1 dir '*.*' 
```

这是一个文件列表，而不是像`0 dir '*.*'`.

您可以`each`在此列表中使用，例如：

```
]ls =: 1 dir '*'
┌──────────┬──────────────┬──────────┬───────────┬───────┐
│build_defs│build_jconsole│build_libj│build_tsdll│jconfig│
└──────────┴──────────────┴──────────┴───────────┴───────┘

;# each ls  NB. number of characters for each filename
10 14 10 11 7 
```

# jquery - 在 ul 从 ajax 添加 li 后，在 ul 中计算 li

> ID：14432666
> 
> 赞同：0
> 
> 时间：2013-01-21T04:41:16.160
> 
> 标签：jquery, count, html-lists

通过添加更多 li 后，如何计算 ul 中的 li 数`ajax`？

我试过`$("#mylist li").size()`了，但它不计算新添加的。

我知道有这个选项，`$(returnedHTML).find('li').length`但我想要现有和新添加的 li 的总数

代码：html

```
<ul id="mylist">
   <li> item 1</li>
   <li> item 2</li>
</ul> 
```

jQuery：

```
function updateNotificationCount(){    
    var nCount=$("#mylist li").length;      
        $("#Counter").html(nCount);     
    }

 $(document).ready(function(){
   $.ajax({
        type: "GET",
        url: "../scripts/getNotifications.php",
        data: "",

        success: function (data) {

              $('#mylist').append(data);
              updateNotificationCount();

        },
        error: function (xhr, ajaxOptions, thrownError) {alert("error");
            alert(xhr.statusText);
            alert(xhr.responseText);
            alert(xhr.status);
            alert(thrownError);
        }

        });
}); 
```

我可以毫无问题地更新。只有计数处于不确定状态

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T04:42:54.107

只需在使用 ajax`$("#mylist li").length`添加 s 后使用。`<li>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T05:12:19.273

你可以试试这个

```
$( "#mylist li" ).ajaxComplete(function(){
  var nCount=$("#mylist li").length;      
  $("#Counter").html(nCount);
}); 
```

您`li`被动态添加到 DOM 中，因此可以在您的 ajax 调用完成时尝试。您确实调用了`updateNotificationCount()`成功，但如果这似乎不起作用，那么您可以使用`live()`或`delegate()`处理动态计数。

# android - 如何删除 SQLite 数据库

> ID：14432669
> 
> 赞同：0
> 
> 时间：2013-01-21T04:41:49.863
> 
> 标签：android, database, sqlite

我希望能够通过在我的应用程序中按下按钮来删除 SQLite 数据库。但是，当我使用删除数据库的功能时，会出现编译器错误。如何使用该功能？

问题是如何使用这种方法；ourContext.deleteDatabase(DATABASE_NAME); 我是在也定义了 DATABASE_NAME 的 DBcontroller 类中定义方法，还是在我想使用 onclick 侦听器调用该方法的其他类中定义它。如何在我的应用程序中使用此 deleteDatabase() 方法而不会出错？

我将 deleteDatabase 放在 deleteDB() 方法中，并希望在另一个名为 SQLiteExample 的类的 onclick 侦听器中调用此方法

这是具有删除其中定义的数据库功能的类。

```
public class DBcontroller {

    public static final String KEY_ROWID="_id";
    public static final String KEY_NAME="persons_name";
    public static final String KEY_NUMBER="persons_number";

    private static final String DATABASE_NAME="sampledb";
    private static final String DATABASE_TABLE="peopleTable";
    private static final int DATABASE_VERSION = 1;

    private DbHelper ourHelper;
    private final Context ourContext;
    private SQLiteDatabase ourDatabase;

    private static class DbHelper extends SQLiteOpenHelper{
    // DbHelper methods
    }

    // function to delete database defined here
    public void deleteDB(){
    ourContext.deleteDatabase(DATABASE_NAME);
} 
```

这是第二个名为 SQLiteExample 的类，我想从另一个类中调用 deleteDB 方法来删​​除名为 DATABASE_NAME 的数据库

```
public class SQLiteExample extends Activity implements OnClickListener {
    public void onClick(View arg0){
        switch(arg0.getId()){
            case R.id.deleteDatabase:

            // want to put code to call delete database here
            // so database is deleted with a button click 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:45:32.727

要删除数据库，请使用它，

```
context.deleteDatabase(DATABASE_NAME); 
```

# php - Wrapper 的 Codeigniter 表单验证错误

> ID：14432671
> 
> 赞同：0
> 
> 时间：2013-01-21T04:41:55.590
> 
> 标签：php, codeigniter, validation

我在 PHP Codeigniter 框架下构建了一个登录表单，并设置了它的验证规则。规则运行良好，但我想要实现的是不同的东西。

**登录表单在名为control-group**的容器下设置了用户名和密码文本框。那些使用 HTML 的 Bootstrap 框架的人都非常清楚这一点。

所以文本框代码是这样的：

```
<div class="control-group">
    <label for="username">Username:</label>
    <input type="text" id="username" name="username" value="" placeholder="Username" class="login username-field" />
    <?php echo form_error('username','<span class="help-inline error">', '</span>'); ?>
</div> 
```

您可以看到我也将 span 包装器放置到错误中，以便它可以以红色样式显示。但我想做的另一件事是，我想将**错误**类应用于**control-group**。

让它从

```
<div class="control-group"> 
```

到

```
<div class="control-group error"> 
```

我已经尝试过使用**$error_class**变量并像这样从 Controller 传递它。

```
$data['error_class'] = '';
$this->form_validation->set_rules('username', 'Username', 'required');
$this->form_validation->set_rules('password', 'Password', 'required');

if ($this->form_validation->run() == FALSE){
    $data['error_class'] = 'error';
    $this->load->view('administrator/login_view', $data);
} 
```

但它所做的是，它一直将**错误**类别应用于**对照组**。即使没有提交表格。

知道如何实现这一目标吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T04:46:58.573

您必须仅在用户提交表单时运行验证。

尝试这样做

```
if($this->input->post())
{
 //your form validation
} 
```

这只会在用户提交发布请求时运行。

编辑：

除了在每个单独的字段上填充错误之外，还可以`form_error('field_name')`用于检查每个单独的字段中的错误并回显错误类

例如。

```
<?=(form_error('field_name')?'error':'')?> 
```

# google-chrome-extension - Chrome扩展：空白新标签+地址栏焦点

> ID：14432675
> 
> 赞同：3
> 
> 时间：2013-01-21T04:42:28.287
> 
> 标签：google-chrome-extension, setfocus, address-bar

每次打开新标签时，我都使用 [此扩展程序获取空白页，不幸的是，打开新标签后地址栏没有聚焦。](https://chrome.google.com/webstore/detail/empty-new-tab-page/dpjamkmjmigaoobjbekmfgabipmfilij)

我更改了新页面内容以发送击键 9 来模拟 Tab 键。这会导致浏览器专注于地址栏，但它不起作用。

```
<title>&#65279;</title>
<script>
function init() {
    var k = 9;

    var oEvent = document.createEvent('KeyboardEvent');

    // Chromium Hack
    Object.defineProperty(oEvent, 'keyCode', {
                get : function() {
                    return this.keyCodeVal;
                }
    });     
    Object.defineProperty(oEvent, 'which', {
                get : function() {
                    return this.keyCodeVal;
                }
    });     

    if (oEvent.initKeyboardEvent) {
        oEvent.initKeyboardEvent("keydown", true, true, document.defaultView, false, false, false, false, k, k);
    } else {
        oEvent.initKeyEvent("keydown", true, true, document.defaultView, false, false, false, false, k, 0);
    }

    oEvent.keyCodeVal = k;

    if (oEvent.keyCode !== k) {
        alert("keyCode mismatch " + oEvent.keyCode + "(" + oEvent.which + ")");
    }

    document.dispatchEvent(oEvent);
}
</script>
<body onload="init()">
</body> 
```

有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T06:39:04.323

# 扩展中的问题

*   它没有使用更新的清单版本
*   使其符合内容脚本政策。

消除上述问题后，我让您的代码正常工作。

# 工作版本

### 清单.json

添加清单版本

```
{
    "update_url": "http://clients2.google.com/service/update2/crx",
    "name": "Empty New Tab Page",
    "version": "1.1",
    "description": "With this extension, new tabs display a blank page instead of the usual new tab page with thumbnails.",
    "icons": {
        "128": "icon_128.png"
    },
    "chrome_url_overrides": {
        "newtab": "empty_ntp.html"
    },
    "manifest_version": 2
} 
```

### empty_ntp.html

添加`<Script>`标签以符合 CSP。

```
<!--
Chrome insists on putting "chrome://newtab"
as title
if there 's no title,
instead of putting something useful like a localized "New Tab" there.

As a workaround, use a space as title. An empty tab is better than one saying
something cryptic. Chrome puts "chrome://newtab" if the title is whitespace too,
but it doesn'
t recognize all the whitespace characters listed at
http: //en.wikipedia.org/wiki/Space_(punctuation) :-)
-->
<
title > & #65279;</title>
<script src= "empty.js" > < /script> 
```

### 空.js

使用您的代码并添加了一个`DOMContentLoaded`事件监听器

```
function init() {
    var k = 9;

    var oEvent = document.createEvent('KeyboardEvent');

    // Chromium Hack
    Object.defineProperty(oEvent, 'keyCode', {
        get: function () {
            return this.keyCodeVal;
        }
    });
    Object.defineProperty(oEvent, 'which', {
        get: function () {
            return this.keyCodeVal;
        }
    });

    if (oEvent.initKeyboardEvent) {
        oEvent.initKeyboardEvent("keydown", true, true, document.defaultView, false, false, false, false, k, k);
    } else {
        oEvent.initKeyEvent("keydown", true, true, document.defaultView, false, false, false, false, k, 0);
    }

    oEvent.keyCodeVal = k;

    if (oEvent.keyCode !== k) {
        alert("keyCode mismatch " + oEvent.keyCode + "(" + oEvent.which + ")");
    }

    document.dispatchEvent(oEvent);
}//Added an Event Listener
document.addEventListener("DOMContentLoaded", function () {
    init();
}); 
```

# 参考

*   [内容安全政策](https://developer.chrome.com/extensions/contentSecurityPolicy.html)
*   [清单密钥 V.2](https://developer.chrome.com/extensions/manifestVersion.html)

# sql - 计算按日历月分组的逗留时间

> ID：14432682
> 
> 赞同：3
> 
> 时间：2013-01-21T04:43:10.750
> 
> 标签：sql, sql-server-2008, group-by, aggregation

这是我正在处理的内容：我得到了一个表（访问），其中包含示例数据的以下模式。

访问

```
VisitNo   Location  AdmissionDate  DischargeDate LengthOfStay
1         A         2012-04-28     2012-05-30     32
2         A         2012-04-20     2013-05-20     90
3         B         2012-04-01     2012-05-01     30
4         B         2012-05-01     2012-05-03     2
..................................................... 
```

要求是返回的数据集为如下结构。每个位置的总 LengthOfStay 按日历月 (YYYYMM)。

```
CalendarMonth  TotalLengthOfStayEachMonth(AdmissionToDate)  Location
201204          xxx                                          x
201205          yyyy                                         y
201206          zzzz                                         z
.........      ............... 
```

TotalLengthOfStayEachMonth 的计算有点棘手。从 AdmissionDate (admissionToDate) 算起的天数，而不是每月 30 天。例如， VISIT 表中的第一条记录有；

*   201204入住2天
*   2+30 = 201205 中的 32 天，依此类推...

提前感谢您的建议...仅供参考，我们有数百个地点、数千次访问和 5 年的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T05:16:37.283

虽然我更希望看到您想要的输出，但也许这样的事情会帮助您入门：

```
SELECT 
    CONVERT(char(6), AdmissionDate, 112)  as CalendarMonth  ,
    SUM(DAY(DATEADD(s,-1,DATEADD(mm, DATEDIFF(m,0,AdmissionDate)+1,0)))-DAY(AdmissionDate)) as TotalLengthOfStayEachMonth,
    Location
FROM VISIT
GROUP BY CONVERT(char(6), AdmissionDate, 112), Location 
```

添加位置可能会给您重复的 CalendarMonths，但我认为没关系。

编辑 -

我对此进行了更多尝试，因为我意识到如果 DischargeDate 比 AdmissionDate 大 1 个月，则有些月份会丢失日期，并想出了这个——它使用了 spt_values 表：

```
select 
   CONVERT(char(6), AdmissionDate+v.number, 112)  as CalendarMonth,
   COUNT(*) Days,
   Location
from Visit t
inner join master..spt_values v
  on v.type='P' and v.number <= DATEDIFF(d, AdmissionDate, DischargeDate)
group by Location, CONVERT(char(6), AdmissionDate+v.number, 112)
order by CONVERT(char(6), AdmissionDate+v.number, 112), Location 
```

这是[SQL 小提琴](http://sqlfiddle.com/#!3/4cd3f/1)。

-- 另一个编辑

在查看另一个答案时，并没有真正了解您的情况（需要所需的输出），如果您的第一条记录所需的输出是 4 月 2 天，那么您只需将 v.number <> 0 添加到上面的连接中 - - 很简单，只是不确定你要求什么。这应该是最简单的解决方案：

```
select 
   CONVERT(char(6), AdmissionDate+v.number, 112)  as CalendarMonth,
   COUNT(*) Days,
   Location
from Visit t
inner join master..spt_values v
  on v.type='P' and v.number <= DATEDIFF(d, AdmissionDate, DischargeDate) and v.number <> 0
group by Location, CONVERT(char(6), AdmissionDate+v.number, 112)
order by CONVERT(char(6), AdmissionDate+v.number, 112), Location 
```

更多的[小提琴](http://sqlfiddle.com/#!3/4cd3f/2)。

希望有些帮助。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T06:03:34.893

这会做（[SQLFiddle](http://sqlfiddle.com/#!3/2afb1/7)）：

```
with everyday (VisitNo, Location, dateOfStay)
AS (
  SELECT VisitNo, Location, dateadd(dd, 1, AdmissionDate)
  FROM VISIT
  UNION ALL
  SELECT e.VisitNo, e.Location, dateadd(dd, 1, e.dateOfStay)
  FROM VISIT v INNER JOIN everyday e ON v.VisitNo = e.VisitNo and
    e.dateofStay < v.DischargeDate
  )
SELECT CONVERT(VARCHAR(7), dateofstay, 121), VisitNo, Location, count(*) 
FROM everyday 
GROUP BY CONVERT(VARCHAR(7), dateofstay, 121), VisitNo, Location
ORDER BY 2,1
OPTION (MAXRECURSION 500); 
```

如果您只想按位置分组，请使用这个：

```
with everyday (VisitNo, Location, dateOfStay)
AS (
  SELECT VisitNo, Location, dateadd(dd, 1, AdmissionDate)
  FROM VISIT
  UNION ALL
  SELECT e.VisitNo, e.Location, dateadd(dd, 1, e.dateOfStay)
  FROM VISIT v INNER JOIN everyday e ON v.VisitNo = e.VisitNo and
    e.dateofStay < v.DischargeDate
  )
SELECT CONVERT(VARCHAR(7), dateofstay, 121), Location, count(*) 
FROM everyday 
GROUP BY CONVERT(VARCHAR(7), dateofstay, 121), Location
ORDER BY 2,1
OPTION (MAXRECURSION 500); 
```

# javascript - 运行日期时间返回值的 Javascript 在 chrome 中有效，但在 Internet Explorer 中无效

> ID：14432686
> 
> 赞同：2
> 
> 时间：2013-01-21T04:43:28.653
> 
> 标签：javascript, html

我有一个 javascript 函数以不同的方式运行时间。它在 Chrome 浏览器中运行良好，但在 Internet Explorer 中没有显示出适当的价值。

**在 Chrome 中：**

> 2011 年 12 月 13 日 13:14:19

**在 IE8 中：**

> 0NaN-未定义-NaN 0NaN:0NaN:0NaN

您可以从两个浏览器的此[页面链接中查看此内容。](http://chemfluence.org.in/monetarist/sample.php)[另请查看页面http://chemfluence.org.in/monetarist/sample.php](http://chemfluence.org.in/monetarist/sample.php)的源代码

**我的代码：**

```
 <div id="txt" title="Industries will generate products on every 3 Virtual days. 
 12 Virtual Days = 1 Real day. dd-Mon-yyyy HH:MM:SS ."></div> 
```

**Javascript**

```
<script type='text/javascript'>//<![CDATA[ 

var virtualOrigin = Date.parse("2012-02-27T00:00:00"),
    game_start_realdate=Date.parse("2013-01-27T12:00:00"),
    realOrigin = Date.now(),
    factor = 12;

function getVirtual(time) {
    return new Date( virtualOrigin + ((time - realOrigin) * factor)  +(realOrigin-game_start_realdate)*factor);
}

function pad2(num) {
    return ("0"+num).substr(-2);
}
function format(time) {
var month=new Array();
month[0]="Jan";
month[1]="Feb";
month[2]="Mar";
month[3]="Apr";
month[4]="May";
month[5]="Jun";
month[6]="Jul";
month[7]="Aug";
month[8]="Sep";
month[9]="Oct";
month[10]="Nov";
month[11]="Dec";
     return pad2(time.getDate())
        + "-" + month[time.getMonth()]
        + "-" + time.getFullYear()
        + " " + pad2(time.getHours())
        + ":" + pad2(time.getMinutes())
        + ":" + pad2(time.getSeconds());
}

function startTime() {
    var now = new Date();
    var display = getVirtual(now);
    output.innerText = format(display);
    setTimeout(startTime, 1000/factor - (now.getMilliseconds() % (1000/factor)));
}

var output = document.getElementById("txt");
startTime();

</script> 
```

我需要修改上述 Javascript 以在 Internet Explorer 和 Chrome/Firefox 中工作； **请给我修改后的代码；**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T05:14:35.053

尝试使用 moment.js。它是跨浏览器的，可以让在 javascript 中做日期变得不那么痛苦。文档非常详尽。[http://momentjs.com/docs/](http://momentjs.com/docs/)

您可以使用以下内容来格式化您的日期：

`var day = moment("12-25-1995", "MM-DD-YYYY");`

[http://momentjs.com/docs/#/parsing/string-format/](http://momentjs.com/docs/#/parsing/string-format/)

**更新**

这是一个完整用法的示例。

```
var mysql_date = '2013-01-25 10:00:00'; // Date from MySQL database

/**
 * @param     string     mysql_data     Date string
 * @param     string     format         Format in which mysql_data is set
 */
var date = moment(mysql_date , 'YYYY-MM-DD HH:mm:ss'); // new moment.js object.

// To display the date in a different format use:
var date_format1 = date.format('MMM, Do'); // Format here would be Jan, 25th
var date_format2 = date.format('MMMM, Do, YYYY'); // January, 25th, 2013

console.log(date_format1, date_format2); 
```

您可以随时更改格式。您无需重新创建它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T22:39:07.060

使用自定义解析函数以确保无论浏览器是什么，您都可以解析该日期格式：

```
function parse(datestring){
    var timearray = datestring.split(/[\-T\:]/g)
    return +new Date(+timearray[0],timearray[1]-1,+timearray[2],+timearray[3],+timearray[4],+timearray[5])
} 
```

并通过不使用负值来修复`pad2`函数以与 IE8一起使用：`substr`

```
function pad2(num) {
    return ("0"+num).slice(-2);
} 
```

那应该这样做。

# exception - 为什么Haskell中的()是Enum类型却没有实现succ函数

> ID：14432687
> 
> 赞同：2
> 
> 时间：2013-01-21T04:43:34.417
> 
> 标签：exception, haskell, enums, ghc, typeclass

我发现

```
Prelude> :i ()
data () = ()    -- Defined in `GHC.Tuple'
instance Bounded () -- Defined in `GHC.Enum'
instance Enum () -- Defined in `GHC.Enum'
instance Eq () -- Defined in `GHC.Classes'
instance Ord () -- Defined in `GHC.Classes'
instance Read () -- Defined in `GHC.Read'
instance Show () -- Defined in `GHC.Show' 
```

因此，这意味着 () 是 Enum 的一个实例，并且应该已经实现了该`succ`功能。但是，当我尝试时`succ ()`，我得到了`*** Exception: Prelude.Enum.().succ: bad argument`

`GHC.Tuple`我搜索了应该定义 () 类型的源代码，但是`GHC.Tuple`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-21T04:54:59.213

该`succ`函数仅针对具有后继参数的参数定义。

```
Prelude> succ False
True
Prelude> succ True
*** Exception: Prelude.Enum.Bool.succ: bad argument

Prelude> succ 0
1
Prelude> succ 1
2
Prelude> succ ((2^63 - 1) :: Int)
*** Exception: Prelude.Enum.succ{Int}: tried to take `succ' of maxBound

Prelude> succ ()
*** Exception: Prelude.Enum.().succ: bad argument 
```

所以答案是：函数被实现了，它总是（正确地）返回一个错误。

# javascript - 在 Angular 的 ng 属性上使用属性选择器进行样式设置

> ID：14432691
> 
> 赞同：2
> 
> 时间：2013-01-21T04:43:50.167
> 
> 标签：javascript, css, css-selectors, angularjs

根据 Angular 的 ng 属性设置元素的样式是不好的做法吗？为什么或者为什么不？请解释你的答案。

**例子：**

```
<!-- HTML -->
<ul ng-controller="todoCtrl">
    <li></li>
    ...
</ul> 
```

```
/* CSS */
[ng-controller="todoCtrl"] {
    list-style: none;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T06:57:41.907

是的。您要小心不要将您的实现代码与您的演示代码联系得太紧密。如果它们交织在一起，您的样式和控制器都将不那么便携（即可重复使用）。

# c# - “属性”没有定义？

> ID：14432692
> 
> 赞同：0
> 
> 时间：2013-01-21T04:43:52.370
> 
> 标签：c#, wpf

我试图按照本教程进行用户设置：

[http://blogs.msdn.com/b/patrickdanino/archive/2008/07/23/user-settings-in-wpf.aspx](http://blogs.msdn.com/b/patrickdanino/archive/2008/07/23/user-settings-in-wpf.aspx)

我定义了一个名称为 Selected、type int、scope user 的设置。在 App.xaml 中，我有：

```
<Application.Resources>
        <properties:Selected x:Key="Selected"/>
    </Application.Resources> 
```

但是我收到了这个错误信息：

“名称空间前缀“属性”未定义”

我不知道为什么......欢迎任何建议。

PS。如果你能看看我的另一个问题，那就太好了！:)

[找不到绑定源](https://stackoverflow.com/questions/14419248/cannot-find-source-for-binding)

编辑：解决了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:49:00.087

您需要确保在某处定义了属性命名空间，如您链接的示例所示：

```
<Application x:Class="SampleApp.App"
   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
   xmlns:properties="clr-namespace:SampleApp.Properties"
   Exit="OnExit"
   StartupUri="MainWindow.xaml">
     <Application.Resources>
         <properties:Settings x:Key="Settings" />
     </Application.Resources>
</Application> 
```

注意这一行：`xmlns:properties="clr-namespace:SampleApp.Properties"`

您可能需要在此错误消失之前重新编译。

# c# - c# - SQL CE - TableAdaptor @@IDENTITY

> ID：14432694
> 
> 赞同：0
> 
> 时间：2013-01-21T04:44:03.587
> 
> 标签：c#, sql-server-ce, tableadapter, dataadapter

我有以下插入语句：在我的表中，ID 是主键...

```
INSERT INTO Student(Name,Family,Address); 
```

我在名为 SelectID 的 TableAdapter 中创建了其他查询

```
SELECT @@IDENTITY; 
```

现在回到我的代码：我调用 Insert ：

```
TableAdapter .Insert("Elli",Stuart","tt11");
Display("Record Added.....And Student ID is:" + TableAdapter .SelectID); 
```

问题是@@IDENTITY 假设要返回我的 ID，但它没有在这里返回任何东西！我做错了什么？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T05:09:08.077

由于 TableAdapter.SelectID 是数据库的新命令，它可能与之前发生的插入无关。

试试这个 [http://forums.asp.net/post/1413442.aspx](http://forums.asp.net/post/1413442.aspx)

# ajax - Spring MVC 控制器抛出 JSON 请求不支持的 415 错误媒体

> ID：14432695
> 
> 赞同：3
> 
> 时间：2013-01-21T04:44:07.340
> 
> 标签：ajax, json, spring-mvc, dojo

我已经查看了这个问题的所有其他答案并尝试了大多数解决方案，但似乎没有任何效果。我正在使用 Dojo.xhrPOST(xhrArgs) 这显然是在 xhrArgs 定义之后出现的。

我的 xhrArgs：

```
 xhrArgs = 
 {
     headers: 
     { 
       'Accept': 'application/json',
       'Content-Type': 'application/json' 
     },
  'url': thisUrl,
  'postData':requestString,
  'dataType' : 'json',
  'userId': userId,
  'measurementSystem': measurementSystem,
  'systemId': openedSystemId,
  'handleAs': 'text',
  'load': function(data)
     {
         // Replace newlines with nice HTML tags.
         data = data.replace(/\n/g, "<br/>");
         dojo.byId(target).innerHTML = data;
     },
    'error': function(error)
    {
       dojo.byId(target).innerHTML = error;
    }
}; 
```

我的控制器方法签名和注释如下

```
@RequestMapping(value="/saveSystemConditions", method= RequestMethod.POST,  headers =                                                                               {"content-type=application/json"})
 public String saveSystemConditions(HttpServletRequest request, HttpServletResponse response, @Valid @RequestBody Load load, BindingResult result) 
```

我的 requestString 如 xhrArgs 所示是

```
"{'systemID':'76', 'system.systemType':'1', 'unitsOfMeasure':'english', 'loadID':'63', 'dispersionInstallationLocation':'Duct+or+AHU', 'humidificationSystemType':'1', 'totalAirVolume':'1200.0', 'desiredDryBulb':'70.0', 'desiredAirMoistureType':'2', 'desiredAirMoisture':'55.0', 'outsideAirConditionsType':'1', 'outsideAirIntakeRateMeasuredAs':'0', 'loadCountry':'United+States', 'outsideAirVolumeMeasuredIn':'0', 'loadState':'Minnesota', 'outsideAirIntakeRate':'25.0', 'loadCity':'Minneapolis', 'elevationFeet':'837.0', 'outsideDryBulb':'-6.8', 'outsideAirMoisture':'57.3', 'userEnteredLoad':'7.43'}" 
```

我得到 415（不支持的媒体类型）

任何建议将不胜感激。大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:50:54.593

这是 spring mvc 映射处理程序的显式声明以及`<mvc:annotation-conig />`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-24T03:08:29.823

将以下行添加到您的应用程序上下文中，它将解决该问题。

```
<mvc:default-servlet-handler/>
<mvc:annotation-driven /> 
```

# function - 这个函数签名在 sml 中是什么意思？

> ID：14432696
> 
> 赞同：2
> 
> 时间：2013-01-21T04:44:14.947
> 
> 标签：function, sml, smlnj

我正在查看我的教授给出的关于语言 SML 的一些注释，其中一个函数如下所示：

```
fun max gt = 
    let fun lp curr [] = curr
           | lp curr (a::l) = if gt(a,curr)
                             then lp a l
                             else lp curr l
in
    lp
end 
```

有人可以帮助解释这是在做什么吗？我最困惑的是这条线：

```
 let fun lp curr [] = curr 
```

这到底是什么意思？据我所知，有一个函数被调用`lp`，但这是什么`curr []`意思？这些是论据吗？如果是这样，您不是只允许sml中的一个参数吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T07:39:28.960

这意味着这`lp`是一个带有 2 个参数的函数，第一个是`curr`，第二个是一个列表，从逻辑上讲，它可能是空的 ( `[]`) 或包含至少一个元素*(`(a::l)`是列表的模式，`a`其中头，列表的其余部分是`l`)*。

如果要将那段 FP 代码翻译成某种著名的命令式语言，它看起来像：

```
function lp(curr, lst) {
  if (lst.length == 0) {  
    return curr;
  } else {
    var a = lst[0];                   // first element
    var l = lst.slice(1, lst.length); // the rest
    if (gt(a, curr)) {
      return lp(a, l);
    } else {
      return lp(curr, l)
    }
  }
} 
```

相当拗口，但它是一个忠实的翻译。

函数式语言基于[Lambda 演算](http://en.wikipedia.org/wiki/Lambda_calculus)，其中函数只取一个值并返回一个结果。虽然 SML 和其他 FP 语言基于此理论，但在实践中相当不方便，因此其中许多语言允许您通过所谓的[Currying](http://en.wikipedia.org/wiki/Currying)将多个参数传递给函数。

所以是的，在 ML 函数中实际上只取一个值，但是柯里化可以让你模拟多个参数。

让我们创建一个名为 的函数`add`，它添加 2 个数字：

```
fun add a b = a + b 
```

应该这样做，但我们定义了 2 个参数。是什么类型的`add`？如果你看一下 REPL，它是`val add = fn : int -> int -> int`. 其中写道，*“add 是一个函数，它接受一个 int 并返回另一个函数（它接受一个 int 并返回一个 int）”*

所以我们也可以这样定义`add`：

```
fun add a = 
  fn b => a + b 
```

你会发现它们是相似的。事实上，可以肯定地说，前者在某种程度上是后者的语法糖。因此，您在 ML 中定义的所有函数，即使是具有多个参数的函数，实际上也是具有一个参数的函数，它们返回接受第二个参数的函数，依此类推。一开始有点难以适应，但很快就会成为第二天性。

```
fun add a b = a + b  (* add is of type  int -> int -> int *)

add 1 2 (* returns 3 as you expect *)

(* calling add with only one parameter *)

val add1 = add 1 
```

是什么`add1`？这是一个将添加到您传递给它的单个参数的*函数！*`1`

```
add1 2 (* returns 3 *) 
```

这是一个*部分应用*的例子，你正在调用一个函数，一次一个参数，每次返回，另一个函数接受其余的参数。

此外，还有另一种方法可以*显示*多个参数：元组：

```
(1, 2);     (* evaluates to a tuple of (int,int) *)

fun add (a,b) = a + b;

add (1, 2)  (* passing a SINGLE argument to a function that
               expects only a single argument, a tuple of 2 numbers *) 
```

在您的问题中，`lp` *也可以*实现为`lp (curr, someList)`：

```
fun max gt curr lst = 
    let fun lp (curr, []) = curr
          | lp (curr, (a::l)) = if gt(a,curr) then lp (a, l)
                                else lp (curr, l)
in
    lp (curr, lst)
end 
```

请注意，在这种情况下，我们必须声明`max`为`max gt curr lst`！

在您发布的代码中，`lp`显然是用柯里化实现的。而 `max`它本身的类型是`fn: ('a * 'a -> bool) -> 'a -> 'a list -> 'a`. 把它分开：

```
('a * 'a -> bool) ->  (* passed to 'max' as 'gt' *)   
    'a ->             (* passed to 'lp' as 'curr' *)
       'a list ->     (* passed to 'lp' as 'someList' *)
          'a          (* what 'lp' returns (same as what 'max' itself returns) *) 
```

注意 的*类型*，`gt`第一个参数`max`：`fn : (('a * 'a) -> bool)`- 它是**一个**参数的函数，`('a * 'a)`一个 2 的元组，`'a`它返回一个`'a`. 所以这里没有咖喱。

使用哪个是品味、惯例和实际考虑的问题。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T12:41:37.377

只是从 Faiz 的出色回答中澄清一下柯里化。

如前所述，SML 仅允许函数采用 1 个参数。这样做的原因是因为函数`fun foo x = x`实际上是 (语法糖) 的派生形式`val rec foo = fn x => x`。好吧，实际上这并不完全正确，但让我们保持简单一秒钟

现在以这个幂函数为例。这里我们声明函数“接受两个参数”

```
fun pow n 0 = 1 
  | pow n k = n * pow n (k-1) 
```

如上所述，`fun ...`是一个派生形式，因此幂函数的等价形式是

```
val rec pow = fn n => fn k => ... 
```

正如您可能在这里看到的，我们在表达原始函数声明的两种不同模式匹配时遇到了问题，因此我们不能再保持它“简单”了，`fun`声明的真正等价形式是

```
val rec pow = fn n => fn k =>
    case (n, k) of 
      (n, 0) => 1
    | (n, k) => n * pow n (k-1) 
```

为了完整起见，cases其实也是一种派生形式，以匿名函数为等价形式

```
val rec pow = fn n => fn k => 
    (fn (n,0) => 1
      | (n,k) => n * pow n (k-1)) (n,k) 
```

请注意，`(n,k)`它直接应用于最内部的匿名函数。

# php - $_REQUEST 正在替换 . 和 _

> ID：14432700
> 
> 赞同：5
> 
> 时间：2013-01-21T04:44:35.537
> 
> 标签：php

> **可能重复：**
> [我可以让 PHP 停止替换 '.' $_GET 或 $_POST 数组中的字符？](https://stackoverflow.com/questions/68651/can-i-get-php-to-stop-replacing-characters-in-get-or-post-arrays)

因此，我正在编写一个简单的长轮询测试应用程序，为了清除所有错误，我直接进入浏览器中的处理页面并预先删除所有内容以查看发生了什么，这就是我来了与...我去网址...

```
localhost/long_polling/poll.php?user.user1=logged_in&user.user2=logged_out&user.user3=logged_out 
```

poll.php 中我的 php 代码的第一行（用于测试）是

```
echo "<pre>";
print_r($_REQUEST);
echo "</pre>"; 
```

输出的是什么

```
Array
    (
    [user_user1] => logged_in
    [user_user2] => logged_out
    [user_user3] => logged_out
    ) 
```

有谁知道为什么用“_”替换用户名中的“。”？我在数据库中的所有用户名都是 firstname.lastname 所以整个事情都失败了。如果这只是默认的 php 行为，虽然很糟糕，有没有比使用类似的东西更好的解决方案......

```
foreach($_REQUEST as $key => $value) {
    $statuses[str_replace('_', '.', $key)] = $value;
} 
```

我只是不喜欢这样，因为如果稍后使用它并且实际上其中包含“_”怎么办。

提前感谢您的帮助

# ruby-on-rails - 加载新动作会产生奇怪的错误

> ID：14432701
> 
> 赞同：0
> 
> 时间：2013-01-21T04:44:41.850
> 
> 标签：ruby-on-rails

我正在尝试创建一个登录系统。我的 UserController 有这个来控制`new`动作：

```
def new
    @user = User.new

    respond_to do |format|
        format.json { render :json => @user }
        format.html
    end
end 
```

我的 routes.rb 有这个链接：

```
resources :user 
```

View 创建新用户的表单是这样的：

```
<%= form_for @user do |f| %> 
```

但是，我收到一个 Action Controller 错误：

```
undefined method `users_path' for #<#<Class 
```

令我困惑的是它为什么使用`users_path`. 这是对我的路线的复数参考。为什么它返回复数错误`user_path`？当我路由“资源：用户”时，它会清除错误，但当然我没有为该资源设置任何内容，因此会产生其他错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T04:57:34.247

它在内部`form_for`根据模型是否持久化创建适当的操作和方法。

如果一个模型是非持久化的，它将创建一个动作`:new`和方法`:post`。如果它被持久化，那么它将是`:update`，`:put`而不是。

`:new`默认 url 是“/users”，默认是“ / `:edit`users/:id”。

正如吉姆所说，解决办法是。（击败我。）将 url 选项应用于`form_for`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T04:49:14.980

`resources :users`实际上是正确的结构，因为它是用户的集合，而不是单个用户。路由构造还需要一个复数路径（IIRC，它需要一个复数路径，除非它找到 a `resource`，而不是`resources`路由），因此尝试使用`users_path`.

传递显式 url 参数是另一种选择`<%= form_for @user, :url => user_path do |f| %>`，因为您已经有了期望单一路由的东西

# modx - MODx：使用 tv 将结果输出到块中的复选框

> ID：14432702
> 
> 赞同：0
> 
> 时间：2013-01-21T04:44:59.697
> 
> 标签：modx, modx-evolution

使用 Evo 1.0.6

我用单选 Yes No 制作了一台电视并将其分配给一个模板。如果管理员选择是，则资源的长标题应输出到块中。如果选择否，则无。

例如，我想要一个复选框，同时添加一个显示“将此页面列为热门”的资源。如果选中，则会在列表中的一个块中显示资源的长标题，例如

块输出：

```
<h3>Popular Pages</h3>
<ul>
<li><a href="[*id*]">[*longtitle*]</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:02:23.260

在 TV Input Option Values 中，添加以下内容：

```
Yes=={{nameOfChunk}} 
```

Then when the checkbox is selected, the chunk will be displayed wherever your TV tag appears in your templates.

# eclipse - 一次打印 Eclipse 中的所有代码

> ID：14432704
> 
> 赞同：1
> 
> 时间：2013-01-21T04:45:02.297
> 
> 标签：eclipse, printing

有没有办法在eclipse中一次打印我项目中的所有代码脚本？现在，我坚持逐个打印每个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:49:24.447

看看[这个](https://stackoverflow.com/questions/1921178/print-the-sourcecode-of-a-whole-java-project)线程。解释了如何使用`enscript`. 如果您使用的是 Windows，则需要安装 cygwin。

# command - adb 命令打开设置并更改它们

> ID：14432706
> 
> 赞同：9
> 
> 时间：2013-01-21T04:45:24.223
> 
> 标签：command, settings, adb

我正在寻找 adb 命令来打开设置并更改它们。例如：这个命令打开显示设置

```
adb shell am start -n com.android.settings/.DisplaySettings 
```

我想在菜单中进一步显示输出模式，然后选择 720P 60HZ

因为我的菜单在 android 电视盒上是这样的：

设置 > 显示 > 显示输出模式 > HDMI 720P60HZ 等

是否有 adb 命令通过设置然后直接使用 shell 选择 720P60Hz ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2018-11-15T12:35:12.040

使用此命令查看`help`如何使用设置 adb shell 命令：

```
adb shell settings 
```

使用`get`和`put`命令（在 之后`settings`）更改设置。

您必须自己弄清楚 KEY（使用`list`）和可接受的 VALUE（阅读文档，如[https://developer.android.com/reference/android/provider/Settings.Global](https://developer.android.com/reference/android/provider/Settings.Global)以了解全局命名空间）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-06T08:35:34.917

据我所知，没有这样的功能。但是，您可以使用

```
adb shell input tap <x> <y> 
```

命令触发触摸事件。不幸的是，这样的代码不会独立于设备运行，因为您的设置在屏幕上的位置取决于您使用的设备。

或者，您可以尝试

```
adb shell input keyevent <19|20|21|22> 
```

命令模拟光标事件以选择要更改的设置。

最后，您可以使用

```
adb shell input keyevent 66 
```

触发回车键。这应该适用于设置子菜单中具有相同选项的所有设备。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-08-04T17:47:17.000

我不确定如何直接更改值，但要扩展另一个答案（也因为听起来这就是您所要求的），您可以使用 adb 在设置窗口中导航并在用户界面。我已经通过一些设置完成了此操作，我似乎无法从单个 adb 命令设置值。我只是使用虚拟 Tab 键浏览菜单项，然后按 Enter 选择子菜单或切换选项。

我没有安卓电视盒，所以我没有你做的设置，但命令看起来像这样：

```
adb shell am start -a android.settings.DISPLAY_SETTINGS
adb shell input keyevent TAB
adb shell input keyevent TAB
adb shell input keyevent ENTER
adb shell input keyevent TAB
adb shell input keyevent TAB
adb shell input keyevent TAB
adb shell input keyevent TAB
adb shell input keyevent ENTER
adb shell am force-stop com.android.settings 
```

您可以尝试一次发送一个选项卡命令，以查看需要发送多少个才能到达您想要的项目。

* * *

*提示：*

您还可以使用 Back 按钮返回一个页面：

```
adb shell input keyevent BACK 
```

您可以使用箭头键浏览确认弹出窗口（或移动亮度/音量滑块）：

```
adb shell input keyevent DPAD_RIGHT
adb shell input keyevent DPAD_LEFT
adb shell input keyevent DPAD_UP
adb shell input keyevent DPAD_DOWN 
```

这是您可以使用的更多关键命令的列表（只需查找前面的命令`KEYCODE_`，然后删除该部分。例如`KEYCODE_BACK`，`BACK`如上图所示）：

[https://developer.android.com/reference/android/view/KeyEvent](https://developer.android.com/reference/android/view/KeyEvent)

以下是您可以启动的更直接设置窗口的列表：

[https://stackoverflow.com/a/39873312](https://stackoverflow.com/a/39873312)

*复制在这里：（*只是在他们之前`adb shell am start -a` 发布）

```
com.android.settings
com.android.settings.APPLICATION_DEVELOPMENT_SETTINGS
com.android.settings.DISPLAY_SETTINGS
com.android.settings.DOCK_SETTINGS
com.android.settings.QUICK_LAUNCH_SETTINGS
com.android.settings.SOUND_SETTINGS
com.android.settings.TTS_SETTINGS
com.android.settings.VOICE_INPUT_OUTPUT_SETTINGS
android.settings.ACCESSIBILITY_SETTINGS
android.settings.ACCOUNT_SYNC_SETTINGS
android.settings.ACCOUNT_SYNC_SETTINGS_ADD_ACCOUNT
android.settings.ADD_ACCOUNT_SETTINGS
android.settings.AIRPLANE_MODE_SETTINGS
android.settings.APN_SETTINGS
android.settings.APPLICATION_SETTINGS
android.settings.BLUETOOTH_SETTINGS
android.settings.DATA_ROAMING_SETTINGS
android.settings.DATE_SETTINGS
android.settings.DEVICE_INFO_SETTINGS
android.settings.DISPLAY_SETTINGS
android.settings.INPUT_METHOD_SETTINGS
android.settings.INTERNAL_STORAGE_SETTINGS
android.settings.LOCALE_SETTINGS
android.settings.LOCATION_SOURCE_SETTINGS
android.settings.MANAGE_ALL_APPLICATIONS_SETTINGS
android.settings.MANAGE_APPLICATIONS_SETTINGS
android.settings.MEMORY_CARD_SETTINGS
android.settings.PRIVACY_SETTINGS
android.settings.SECURITY_SETTINGS
android.settings.SETTINGS
android.settings.SOUND_SETTINGS
android.settings.SYNC_SETTINGS
android.settings.SYSTEM_UPDATE_SETTINGS
android.settings.USER_DICTIONARY_SETTINGS
android.settings.WIFI_IP_SETTINGS
android.settings.WIFI_SETTINGS
android.settings.WIRELESS_SETTINGS
ACCESSIBILITY_FEEDBACK_SETTINGS
android.net.vpn.SETTINGS
android.search.action.SEARCH_SETTINGS
android.search.action.WEB_SEARCH_SETTINGS 
```

# android - 如何将值设置为动态创建的编辑文本

> ID：14432708
> 
> 赞同：1
> 
> 时间：2013-01-21T04:45:33.183
> 
> 标签：android, android-edittext

在我的应用程序中，我动态创建了一组 editText。我们如何将值设置为动态创建的editText。我创建了editText并将这个editText添加到列表中

下面给出了创建editText的代码

```
LinearLayout layout = new LinearLayout(context);
    layout.setId(expRow2);
    layout.setOrientation(LinearLayout.HORIZONTAL);
    layout.setGravity(Gravity.CENTER);
    for(int i=1;i<=4;i++)
    {
        EditText editText = new EditText(context);
        editText.setHint(exp_EditTextName[i]);
        editText.setId(expRow+i);
        editText.setEms(10);
        editText.setLayoutParams(margins);
        layout.addView(editText);
        expEditTextList.add(editText);
    } 
```

我需要在我的代码的其他部分设置值来编辑文本

```
final LinearLayout exp = new LinearLayout(context);
        exp.setOrientation(LinearLayout.VERTICAL);
        exp.setBackgroundColor(Color.GRAY);
        exp.setDescendantFocusability(LinearLayout.FOCUS_AFTER_DESCENDANTS);
        Button expAdd = new Button(context);
        expAdd.setId(123);
        expAdd.setBackgroundResource(R.drawable.small_add);
        expAdd.setLayoutParams(marginLeftElement);
        exp.addView(expAdd);
        exp.addView(layout);
EditText edittext  = (EditText)expEditTextList.get(0);
edittext.setText("hai"); 
```

但我不能为editText设置值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T05:10:54.593

试试这样。。

```
final EditText text1 = (EditText) findViewById(R.id.text1);
final EditText text2 = (EditText) findViewById(R.id.text2);
final EditText text3 = (EditText) findViewById(R.id.text3);

text2.addTextChangedListener(new TextWatcher() {
    void afterTextChanged(Editable s) {
        text3.setText(text1.getText().toString() + text2.getText().toString());
    };
}); 
```

有关更多信息，请尝试链接

[在android中动态创建的edittext上设置文本？](https://stackoverflow.com/questions/9339315/set-text-on-dynamically-created-edittext-in-android)

# c++ - 如何从模板参数（std::vector 和普通指针）中提取 value_type？

> ID：14432709
> 
> 赞同：7
> 
> 时间：2013-01-21T04:45:36.937
> 
> 标签：c++, templates, c++11

我有一个具有以下界面的排序：

```
template< class RandomIt >
void my_sort( RandomIt first, RandomIt last )
{

} 
```

我希望`RandomIt`成为一个迭代器`std::vector<T>.begin()/end()`或一个普通的指针类型`T* first,T* last`。我想如果我假设`RandomIt`是一个向量，我可以从中得到它`RandomIt::value_type`，但是这对`T* first,T* last`.

我的问题是，`value_type T`在这两种情况下如何从模板参数中提取？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-21T04:47:02.350

使用`iterator_traits<T>::value_type`（[cppreference](http://en.cppreference.com/w/cpp/iterator/iterator_traits)）。请注意，标准库为`T*`and提供了 iterator_traits 定义`const T*`，因此它也适用于普通指针。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-21T05:04:42.407

由于您使用的是 C++11，因此您可以应用`decltype`迭代器本身来获取`value_type`：

```
typedef decltype(*first) value_type; 
```

`iterator_traits`如果程序员没有专门`iterator_traits`针对他的迭代器，或者他没有定义满足标准要求的迭代器，则注释可能不适用于程序员定义的类型。

但是，`decltype`即使那样，这个技巧也会奏效。

# css - 如何在移动网站中设置页脚

> ID：14432710
> 
> 赞同：0
> 
> 时间：2013-01-21T04:45:50.470
> 
> 标签：css, html4

我已经在移动网站中设置了页脚，但问题是当我第一次滚动页面时，我的页脚在它固定在底部位置后也会滚动，这个问题来自一些电话和一些电话工作正常。

**已编辑**

我附上了截图供您参考。

![页脚图片](../Images/97ae341144e7be35e923d7111f093984.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T14:59:27.083

使用以下方法将页脚固定到底部：

```
position: absolute;
bottom: 0;
left: 0; 
```

然后根据需要添加宽度。

# javascript - 在侦听 socket.io 消息时循环代码

> ID：14432712
> 
> 赞同：0
> 
> 时间：2013-01-21T04:46:22.413
> 
> 标签：javascript, node.js, socket.io

我有一个连接到 node.js 服务器并使用 socket.io 的页面。

*   Q1 - 我想**总是循环**一些代码
*   Q2 - 我希望页面**监听 socket.io 消息**
*   Q3 - 我希望他们同时做***这两***件事。

这是我的基本大纲...

```
loop {
  doSomeCodeHere;
}

//socket.io code here (i know this part) 
```

所以基本上我需要两者同时发挥作用，有什么建议吗？

# css - 当视口很小时，为什么我的响应式网站看起来不好？

> ID：14432713
> 
> 赞同：0
> 
> 时间：2013-01-21T04:46:29.590
> 
> 标签：css, mobile-safari, responsive-design

我已经在这个网站上工作了几天，并试图让它在窗口/视口为任何大小时看起来都很棒......目前它在宽屏或普通 1024 显示器上对我来说看起来相当不错......但是我在为 iPhone / iPad 和更小尺寸拨出它时遇到问题......

我希望一切都能响应和流畅...目前在 iPhone 上查看时，只有第一个块看起来不错...其他块的内容超出窗口右侧，因此用户必须滚动用他/她的手指查看内容。

我玩过视口（设置最小值和最大值），我现在在每个块上都有一个 980 像素的最小宽度，以确保背景覆盖屏幕......不太确定我哪里出错了这里...

希望能提供一些指示或任何使我的网站更具响应性的东西！提示... WTFS... 等等 ;)

再次感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:47:21.110

*（发布这些评论作为答案，因为它原来是答案）*

我建议掌握[Zurb Foundation](http://foundation.zurb.com)或 Twitter Bootstrap（推荐 Foundation）并将其用作您的基本布局，同时您更熟悉响应式设计。一旦你看到它们是如何组合在一起的，你就可以再次处理你的布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T04:52:11.997

借助媒体查询更改移动版本的布局我的意思是桌面类型的设计在移动版本中看起来不太好，例如主菜单在桌面上看起来不错，对于较低的屏幕尺寸，您必须更改菜单，如下拉菜单。

# wcf - wcf 服务和 windows phone 设备

> ID：14432714
> 
> 赞同：0
> 
> 时间：2013-01-21T04:46:37.153
> 
> 标签：wcf, windows-phone-8, iis-express

我正在开发一个使用我的 wcf 服务的 Windows phone 8 应用程序。我可以在我的笔记本电脑上本地托管我的服务（使用 iis express）并使用我的手机使用该服务吗？我可以从 wp8 模拟器连接到服务，但是当我在手机上部署和测试时它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T01:19:31.747

我相信这是由于您在模拟器上使用的服务可以直接访问您的本地主机 ip (127.0.0.1)，但是当您移动软件以在设备上运行时，它不再在该 IP 中找到该服务.

这个页面有很多关于这个问题的配置信息，可能你正在寻找什么：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/jj684580%28v=vs.105% 29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj684580%28v=vs.105%29.aspx)

# java - 在jar中查找静态文件

> ID：14432715
> 
> 赞同：0
> 
> 时间：2013-01-21T04:46:41.617
> 
> 标签：java, jar

我正在尝试使用一个 jar 文件，它本身就是另一个 web 项目中的 web 应用程序。在我使用 eclipse 的导出到 jar 功能创建的 jar 中，我在文件夹中存储了一个 csv 文件。要在 jar 中的代码中使用相对路径，我使用

```
MyClass.class.getResource(ApplicationConstants.ALIASESFILE).getPath(); 
```

当我部署（glassfish）并将项目用作单独的应用程序时，这可以正常工作。但是当我在另一个项目中使用它时，它会给出如下所示的路径

```
D:\javaProjects\AutomodeGS_Prachi\lib\internal\RESTWSGS.jar!\aliases\aliases.csv 
```

我收到一个文件未找到异常。可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T05:02:11.523

这在 glassfish 上运行良好可能是因为 glassfish 在文件系统上爆炸了 jar，因此您的 csv 文件实际上是文件系统的文件，

如果您尝试从另一个项目中读取它，它会失败，因为包含您的文件的 jar 在类路径中，这很好，但是 csv 文件在 jar 文件下，它不再是`File`

您可以将其阅读为 Stream

```
InputStream is = MyClass.class.getResourceAsStream(ApplicationConstants.ALIASESFILE); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T05:03:44.140

该`getResource()`方法返回一个“jar:”URL。该 URL 的路径组件不是普通的文件系统路径名，不能直接使用 Java 的文件类打开。

执行此操作的简单方法是使用`Class.getResourceAsStream(...)`打开流。如果您需要 JAR 条目的“标识符”，请使用`Class.getResource(...)`，然后使用 . 打开流`URL.openStream()`。

# android - Android 屏幕兼容性问题

> ID：14432716
> 
> 赞同：1
> 
> 时间：2013-01-21T04:46:43.043
> 
> 标签：android, android-layout, google-play, android-screen-support

我已将一个应用程序上传到 Google Play 商店，该应用程序仅与高分辨率屏幕兼容。我在 Manifest.xml 文件中使用以下代码使应用程序仅与高分辨率屏幕兼容

```
<compatible-screens>
<!-- small size screens -->
<screen android:screenSize="small" android:screenDensity="hdpi" />
<!-- all normal size screens -->
<screen android:screenSize="normal" android:screenDensity="hdpi" />     
<!-- large screens -->
<screen android:screenSize="large" android:screenDensity="hdpi" /> 
```

```
<supports-screens android:smallScreens="false"
                      android:normalScreens="false"
                      android:largeScreens="true"
                      android:xlargeScreens="false"
                       /> 
```

当我从浏览器在 Google Play 上搜索我的应用程序时，我可以查看应用程序详细信息，但显示与设备不兼容。此外，当我从设备搜索时，该应用程序似乎不可用/未找到结果。谁能建议我在清单文件中需要进行哪些修改，以便我能够下载该应用程序？

**注意：**我尝试过使用三星 Galaxy S、Galaxy Duos 和索尼 Xperia J。

提前致谢，

蒂姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:50:13.777

`android:largeScreens="true"`倾向于大小为 7 英寸的平板电脑，因此，如果您通过 7 英寸平板电脑搜索您的应用程序，那么您就能看到。

你的`<compatible-screens>`标签似乎没问题，我想你不需要使用`support-screen>`see [here](http://developer.android.com/guide/topics/manifest/compatible-screens-element.html)

# c - 从另一个函数中检索数组值

> ID：14432720
> 
> 赞同：0
> 
> 时间：2013-01-21T04:47:23.363
> 
> 标签：c, linux

```
static void retrieveData(const char* filename)
{
    FILE *f;
    char s[256];
    int a[10];
    int b[10];
    char c[10][10];
    ...
    .....
    long j[10];

    sprintf(s, "some code %s", filename);
    if ((f = popen(s, "r")) != NULL) {
        while (fgets(s, sizeof(s), f)) {
            if (strncmp(s, "A........ {
                sscanf (s,"........
                a[0] = var1;
                b[0] = var2;
                c[0] = var3;
                ...
                .....
            }
            else if (strncmp(s, "B........ {
                sscanf (s,".........
                a[1] = var4;
                b[1] = var5;
                c[1] = var6;
                ...
                .....
            }
            else if .........more codes
        }
        pclose(f);
    }
} 
```

我想获取数组 a,b,c....,j 中的所有数据。

```
void getData(int argc, char **argv)
{
    int n;
    int a[10];
    int b[10];
    char c[10][10];
    ...
    .....
    long j[10];

    retrieveData("filename1");

    for (n = 0; n < 10; ++n) {
        printf("%d\n", a[n]);
    }

    for (n = 0; n < 10; ++n) {
        printf("%d\n", b[n]);
    }

    ...... more codes

    retrieveData("filename2");

    for (n = 0; n < 10; ++n) {
        printf("%d\n", a[n]);
    }

    for (n = 0; n < 10; ++n) {
        printf("%d\n", b[n]);
    }

    ...... more codes

} 
```

filename1 和 filename2 包含相同的数据结构但不同的值。请有人告诉我如何......我正在linux c下编译。对不起我糟糕的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T04:50:41.053

您可能需要将它们定义为全局变量，而不是本地变量，然后您可以在任何函数中访问它们。

`.cpp`把它放在包含这两个函数的文件的顶部。

```
int a[10];
int b[10];
char c[10][10]; 
```

请使用更好的名称:)

或者，由于在您的情况下，一个函数调用另一个函数，您可以将数组作为指针作为函数的参数传递，但这至少在 2D 指针的情况下会很痛苦。

第三个，语法上更简单的选项是将 3 个数组包装在 a 中`struct`并传递一个指向它的指针`struct`，感谢 Basile Starynkevitch。

```
typedef struct{
    int a[10];
    int b[10];
    char c[10][10];
} Arrays;

void getData(int argc, char **argv)
{
    ...
    Arrays a;
    retrieveData("...",&a);
    ...
}

void retrieveData(const char* filename, Arrays *a){
    a->b[1] = 1;
    ....
} 
```

# ruby-on-rails - 在 Rails 中选择标记的 Onchange 事件

> ID：14432725
> 
> 赞同：0
> 
> 时间：2013-01-21T04:47:49.133
> 
> 标签：ruby-on-rails, associations, html-select, onchange

我有 4 个模型：

类.rb

```
 has_many :studies
  has_many :students 
```

研究.rb

```
belongs_to :class
has_many :grades 
```

学生.rb

```
belongs_to :class, :counter_cache => :student_count
has_many :grades 
```

等级.rb

```
belongs_to :student
belongs_to :course 
```

关于成绩/_form.html.erb

```
<div class="field">
        <%= f.label :class_id %><br />
         <%= f.select :class_id, Class.all.collect {|x| [x.name, x.id]}, {:include_blank => "chose class"}, :multiple => false %>
      </div>

      <div class="field">
        <%= f.label :study_id %><br />
         <%= f.select :study_id, Study.all.collect {|x| [x.name+" "+x.class.name, x.id]}, {:include_blank => "chose study"}, :multiple => false %>
      </div>
      <div class="field">
        <%= f.label :student_id %><br />
        <%= f.select :student_id, Student.where(:study_id => :study_id).collect {|x| [x.name, x.id]}, {:include_blank => "Chose Student"}, :multiple => false %>
      </div> 
```

如何更改值`select_tag`，`study_id`以及`student_id`当我选择`select_tag`, `class_id`, (class `has_many` `:studies`and `has_many` `:students`) 时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:47:02.850

好的问题用javascript解决了

# python - 网络服务器编程

> ID：14432728
> 
> 赞同：-3
> 
> 时间：2013-01-21T04:48:19.663
> 
> 标签：python, ios, database

总而言之，这个问题可能很广泛；非常广泛。很长一段时间以来，我一直试图回答这个问题，但通常最终没有得到回答，我继续做我平常的工作。

假设我有一个 iOS 应用程序需要：

1.  存储和检索用户信息 &
2.  从手机发送一些动作来做一些云处理

我在 iOS 和 C 编程方面经验丰富。至于脚本，我擅长 Python 和 Perl。但问题是，我似乎无法理解如何进行。

我需要回答的具体问题：

1.  如何进行高效且可扩展的服务器编程？我是一个支持 Python 的人，我真的不喜欢摆弄 PHP。
2.  这个设置会是什么样子？

有人可以指出一些很好的例子来说明如何设置所有这些吗？

在这一点上，初学者的介绍就足够了。

编辑：我看到人们寻找教程、书籍、指南等的问题。但事实证明，它们已关闭。这个问题太宽泛了，对stackoverflow来说没有意义。这将被修剪或删除。道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:04:19.323

如何进行可扩展的服务器编程的简短答案是将问题拆分为多个部分。如果涉及数据存储，那么您需要一个可扩展的数据库。如果涉及 Web 前端，则需要一个可扩展的 Web 服务器场。您可能需要在它前面进行负载平衡。

前端和后端由现成的零件组装而成，剩下的就是奶油中心。您当然可以使用 PHP 脚本来做到这一点，因为您有多个 Web 服务器来运行它们，并且它们背后有一个可扩展的数据库。

# excel - 如何查找取决于多于 1 列（Excel）的值？

> ID：14432729
> 
> 赞同：1
> 
> 时间：2013-01-21T04:48:22.147
> 
> 标签：excel

我的工作簿中有两张纸。一个是针对唯一客户的，另一个是包含客户和其他详细信息的组合表。

在表 A 中说：

```
ID  |  Name  |  Addr
1   |  Peter |  10a...
2   |  Aaron |  18...
.   |    .   |   .
.   |    .   |   . 
```

在表 B 中：

```
ID  |  Name  |  Addr
    |  Peter |  10a...
    |  Peter |  10a...
    |  Aaron |  18...
    |  Aaron |  18... 
```

我想根据客户详细信息在工作表 B 中设置 ID。比如说，如果工作表 B 中“名称”和“地址”列的内容等于工作表 A 中“名称”和“地址”的内容，则将工作表 A 的“ID”值放入工作表 B。

所以，工作表 B 应该是这样的：

```
ID  |  Name  |  Addr
1   |  Peter |  10a...
1   |  Peter |  10a...
2   |  Aaron |  18...
2   |  Aaron |  18... 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T05:16:46.860

**将 VLOOKUP 与连接一起使用：**

在工作表 1 中，通过连接名称和地址为每一行创建一个唯一的连接键。 `&`是连接运算符。公式：`=B2&C2`

现在在工作表 2 中，使用连接键使用 VLOOKUP：

```
 = VLOOKUP(B2&C2, Sheet1!$A$2$:$D$500,2,FALSE) 
```

这里有一些要点：

*   您正在查找匹配键 (B2&C2)
*   您需要完全匹配（FALSE），
*   你会拿起身份证（第2栏）。
*   不要忘记锚定参考表（使用 $）。在上面的示例中，我假设表 1 中有 500 个唯一客户。根据需要填写。

表 1：

![表 1](../Images/98d7965700b99089dec5aabfc639d056.png)

表 2：

![在此处输入图像描述](../Images/0fa290df78544eaaf48c1c953471bf56.png)

# php - 带有更新的查询字符串的 php 重新加载页面

> ID：14432731
> 
> 赞同：0
> 
> 时间：2013-01-21T04:48:31.203
> 
> 标签：php, url, query-string

假设我有一个这样的网址

```
http://www.domain.com/myscript.php?p1=xyz&p2=10&p3=ghj 
```

现在我想`p2=100`使用 php 更新和重新加载页面

这里的参数可以是无限`(p1,p2,...pn)`的，我们可以更新任何参数并重新加载页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T04:54:34.180

很简单，你可以这样做

```
$_GET['p2'] = 100;
header("Location: http://www.domain.com" . $_SERVER['REDIRECT_URI'] . '?' . http_build_query($_GET)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T05:12:28.273

试试下面的代码：

```
$varURL = 'http://www.domain.com/myscript.php?p1=xyz&p2=10&p3=ghj';
$varNEwURL = preg_replace('/p2=([0-9]*)&/', 'p2=100&', $varURL);
header('location:'.$varNEwURL); 
```

或者

```
$varURL = 'http://www.domain.com/myscript.php?p1=xyz&p2=10&p3=ghj';
$varNEwURL = $varURL.'&p2=100';
header('location:'.$varNEwURL); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T04:54:45.323

这个问题有点含糊，但假设您想使用 javascript 从客户端重新加载：

```
window.location = "http://www.domain.com/myscript.php?p1=xyz&p2=100&p3=ghj" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T04:55:00.040

[重新加载您的页面](http://www.metatags.info/meta_http_equiv_refresh)，您只需在 URL 字段中按照您希望的方式设置变量

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T04:59:16.650

如果要使用所需参数重新加载页面，请使用 JS

以下脚本可能会对您有所帮助

```
window.location = "http://www.domain.com/myscript.php?p1=xyz&p2=100&p3=ghj"
window.location = "http://www.domain.com/myscript.php?p2=200&p1=dfgb&p3=asdhahskh&etc=alotofparameters" 
```

现在，如果您想在特定时间间隔后重新加载页面，那么您可以使用以下元标记

```
<meta http-equiv="refresh" content="30; ,URL=http://www.metatags.info/login"> 
```

Njoy编码。:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-21T05:06:00.243

这是我想更改 1`$var`值然后重定向时使用的内容。

```
function getUrlWithout($getNames){
  $url = $_SERVER['REQUEST_URI'];
  $questionMarkExp = explode("?", $url);
  $urlArray = explode("&", $questionMarkExp[1]);
  $retUrl=$questionMarkExp[0];
  $retGet="";
  $found=array();
  foreach($getNames as $id => $name){
        foreach ($urlArray as $key=>$value){
            if(isset($_GET[$name]) && $value==$name."=".$_GET[$name])
                unset($urlArray[$key]);
      }
  }
  $urlArray = array_values($urlArray);
  foreach ($urlArray as $key => $value){
      if($key<sizeof($urlArray) && $retGet!=="")
          $retGet.="&";
      $retGet.=$value;
  }
  return $retUrl."?".$retGet;
} 
```

这需要 url ( `$_SERVER['REQUEST_URI']`)，删除所需的值 ( `$getNames`) [可以是一个或多个值]，然后重建 url。它可以像 -

```
$newurl = getUrlWithout(array("p2"));
header( 'Location: http://www.domain.com/'.$newurl.'&p2=100' ); 
```

# php - 用户名、密码、加盐、加密、哈希 - 这一切是如何工作的？

> ID：14432733
> 
> 赞同：12
> 
> 时间：2013-01-21T04:48:39.790
> 
> 标签：php, mysql, security, web, passwords

> **可能重复：**
> [PHP 密码的安全哈希和盐](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords)

我在 stackoverflow 和其他网站上阅读了很多关于网络安全的帖子。例如加盐加密等。而且我有点不明白，所以一个简单的解释会非常有帮助。

这就是我目前所知道的。用户登录输入他的用户名和密码。然后输入经过一个过程。假设用户名和密码组合在一起，例如：

```
$username = (USERS USERNAME INPUT);
$password = (USERS PASSWORD INPUT);
$userinput = $username . $password; 
```

然后我们加点盐。

```
$salt1 = "13$13aVc!kd";
$salt2 = "4kr$!vlmeoc";

$salted = $salt1 . $userinput . $salt2; 
```

然后我们对其进行加密。

```
$encrypted = encrypt($salted); 
```

然后检查数据库，看看它的正确用户是否登录。

这就是它的工作原理吗？但我读过关于蛮力攻击的文章。它猜对了输入值吗？用上面的程序。这不是说明攻击者只需要正确获取 $userinput 信息就可以进入吗？他不需要猜测很长的 $encrypted 字符串是否正确？

注意：假设在这种情况下没有验证码，没有尝试次数限制，没有锁定，除了上面的没有别的。

注意：要温柔我还在学习。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T04:50:55.250

如果您排除验证码，请尝试限制、锁定等...然后是的。你只需要暴力破解纯文本字符串。

但是，这确实需要*时间*——至少，它受到服务器响应登录请求的速率的限制。即使开发者不添加任何防止暴力破解的措施，服务器本身也只能这么快的完成加密+验证的过程，也只能处理这么多的并行请求。

也就是说，这就是为什么重要的是

*   作为用户，使用强大的、难以暴力破解的密码
*   作为开发人员，有足够的措施来防止你的登录过程被暴力破解

* * *

散列和加盐密码并不是为了防止那些暴力破解自然登录过程的人（还有其他东西可以防止这种情况发生）。相反，它们是为了防止密码存储本身的潜在危害（例如，有人转储数据库的内容）。

散列和加盐都用于降低有权访问存储密码的人检索纯文本字符串的*速度*，他们需要能够通过自然登录过程（您的站点**或其他站点**，假设密码是通常在站点之间共享）而不会触发反暴力破解安全措施。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T04:53:05.460

散列和加盐的想法更多是为了防止有人在数据库本身受到破坏时获取用户密码。如果密码存储为加盐和散列的字符串，攻击者就不能只使用它们来访问另一个站点上的用户帐户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T04:53:56.687

密码加密是单向加密（或者更确切地说，它假设在安全站点中）。也就是说，您获取密码并对其进行哈希处理。例如，bcrypt 是当今可接受的标准。

如果它是单向加密，很多人想知道它如何检查密码。但是您只需对用户提交的密码进行哈希处理，并将其与您存储在数据库中的哈希值进行比较。这样，如果您的数据库被盗，攻击者必须更加努力地工作。

仅散列密码的问题很容易被暴力破解或彩虹表。您可以谷歌彩虹表以了解更多信息。但本质上它是一种将这些哈希值转换回密码的方法。

加入盐腌。加盐基本上是在每个密码中添加随机数据。这胜过彩虹表。这意味着受损的数据库将意味着蛮力。如果您使用的是像 bcrypt 这样的哈希系统，那么被攻击者需要花费大量的时间和精力。

说了这么多。最好不要重新发明轮子。如果可以，请使用已知良好的授权系统。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T05:02:21.810

[在这里](https://stackoverflow.com/questions/13459031/storing-password-salts-separately-from-password-hashes/13459125#13459125)查看我的答案

当您创建哈希时，您应该为每个条目生成唯一的盐。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T06:43:27.030

蛮力攻击的一个问题是当您使用 SHA1 或 MD5 等快速加密时。构建这些函数是为了通过算法快速运行密码。相反，您可以使用我不是专家的 Blowfish 方法，但长话短说，它需要比 SHA1 或 MD5 更多的计算来计算返回值。这意味着暴力破解密码可能需要 5 年，由于计算时间的原因，使用 Blowfish 进行哈希处理。

下一个示例是使用 SHA1 和 MD5 制作的，因此它很容易受到暴力攻击，但是 salt 部分应该可以使用：

```
$salt = md5(microtime().uniqueid()); 
```

这将输出一个唯一的 32 个字符的 salt，您将把它与密码放在一起。

```
$passwod = $_POST['password'];
$hashed_password = sha1($password.$salt); 
```

现在您必须将密码和盐值都存储在数据库中。当你检查用户输入密码时，你会得到盐，并对整个事情进行哈希处理。

```
$temp_pass = $_POST['temp_pass'];
$salt = //from database;
$database_pass = //hashed pass from database;

$hashed_temp_pass = sha1($temp_pass.$salt);

if(hashed_temp_pass == $database_pass){
//Welcome user!
}
else{
//go away
} 
```

# image - Silverstripe Uploadify 添加字段

> ID：14432739
> 
> 赞同：8
> 
> 时间：2013-01-21T04:49:11.240
> 
> 标签：image, uploadify, silverstripe

我希望将多张图片附加到 silverstripe 中的页面（最终将充当旋转画廊），并且想知道用户在上传每张图片时是否可以为每张图片添加链接？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-21T05:03:18.650

是的。这可以通过与包含图像和链接对象`has_many`的自定义建立关系来实现。`DataObject`

在下面的示例中，我们有一个`HomePage`与 有`has_many`关系`Slide`。`Slide`包含一个`Image`和`Link`。

[SilverStripe 第 9 课 - 处理数据关系 - $has_many](http://www.silverstripe.org/learn/lessons/working-with-data-relationships-has-many)中有一些关于此主题的好信息。

我在此示例中使用的可选排序模块是[SortableGridField](https://github.com/UndefinedOffset/SortableGridField)。

## 银条 3.1

**幻灯片.php**

```
class Slide extends DataObject {

    private static $db = array(
        'Title' => 'Text',
        'SortOrder' => 'Int'
    );

    private static $has_one = array(
        'HomePage' => 'HomePage', 
        'Image' => 'Image', 
        'Link' => 'SiteTree'
    );

    private static $field_labels = array( 
        'Image.CMSThumbnail' => 'Image', 
        'Link.Title' => 'Link'
    ); 

    private static $summary_fields = array( 
        'Title',
        'Image.CMSThumbnail', 
        'Link.Title'
    ); 

    private static $default_sort = 'SortOrder ASC';
    private static $singular_name = 'Slide';
    private static $plural_name = 'Slides';

    public function getCMSFields() {

        $image = UploadField::create('Image', 'Image');
        $image->setFolderName('slides');

        $fields = FieldList::create(
            TextField::create('Title'), 
            $image, 
            TreeDropdownField::create('LinkID', 'Link', 'SiteTree')
        );
        return $fields;
    }

} 
```

**主页.php**

```
class HomePage extends Page {

    private static $has_many = array(
        'Slides' => 'Slide'
    );

    public function getCMSFields() {
        $fields = parent::getCMSFields();  

        $slidesFieldConfig = GridFieldConfig_RecordEditor::create();

        // The following requires the SortableGridField module installed
        $slidesFieldConfig->addComponent(new GridFieldSortableRows('SortOrder'));

        $slidesField = GridField::create(
            'Slides',
            'Slide',
            $this->Slides(),
            $slidesFieldConfig
        );

        $fields->addFieldToTab('Root.Slides', $slidesField);

        return $fields;
    }

} 
```

**布局/主页.ss**

```
<% if $Slides %>
    <div class="slideshow">
        <% loop $Slides %>
            <% if $Link %>
                <a class="slide" href="$Link.URL" title="Go to the $Link.Title.XML page">
                    <img src="$Image.URL" alt="$Title" />
                </a>
            <% else %>
                <div class="slide">
                    <img src="$Image.URL" alt="$Title" />
                </div>
            <% end_if %>
        <% end_loop %>
    </div>
<% end_if %> 
```

## 银条 2.4

使用 DataObjectManager 和 Uploadify 模块：

**幻灯片.php**

```
class Slide extends DataObject {

    static $db = array(
        'Title' => 'Text'
    );

    static $has_one = array(
        'HomePage' => 'HomePage', 
        'SlideImage' => 'Image', 
        'Link' => 'SiteTree'
    );
    static $singular_name = 'Slide';
    static $plural_name = 'Slides';

    public function getCMSFields_forPopup()
    {
        return new FieldSet(
            new TextField('Title'),
            new SimpleTreeDropdownField('LinkID', 'Slide Link', 'SiteTree'),
            new ImageUploadField('SlideImage', 'Slide Image')
        );
    }

} 
```

**主页.php**

```
class HomePage extends Page {

    public static $has_many = array(
        'Slides' => 'Slide'
    );

    public function getCMSFields()
    {
        $fields = parent::getCMSFields();

        $slideManager = new ImageDataObjectManager(
            $this,
            'Slides',
            'Slide',
            'Image', 
            array(
            ),
            'getCMSFields_forPopup'
        );
        $fields->addFieldToTab('Root.Content.Slides', $slideManager);

        return $fields;
    }

} 
```

**布局/主页.ss**

```
<% if Slides %>
    <div class="slideshow">
        <% control Slides %>
            <% if Link %>
                <a class="slide" href="$Link.URL" title="Go to the $Link.Title.XML page">
                    <img src="$Image.URL" alt="$Title" />
                </a>
            <% else %>
                <div class="slide">
                    <img src="$Image.URL" alt="$Title" />
                </div>
            <% end_if %>
        <% end_control %>
    </div>
<% end_if %> 
```

# magento - 从继续购物页面中删除右侧栏

> ID：14432743
> 
> 赞同：-3
> 
> 时间：2013-01-21T04:49:53.013
> 
> 标签：magento, sidebar

用户点击“下单”，进入下单页面。现在我的问题是，如果我想从此页面中删除右侧栏，那么我必须遵循哪个程序。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:06:17.863

在 magento\app\design\frontend\base\default\layout\checkout.xml 中，替换

```
<checkout_onepage_success translate="label">
    <label>One Page Checkout Success</label>
    <reference name="root">
        <action method="setTemplate"><template>page/2columns-right.phtml</template></action>
    </reference>
    <reference name="content">
        <block type="checkout/onepage_success" name="checkout.success" template="checkout/success.phtml"/>
    </reference>
</checkout_onepage_success> 
```

和 ...

```
<checkout_onepage_success translate="label">
    <label>One Page Checkout Success</label>
    <reference name="root">
        <action method="setTemplate"><template>page/1column.phtml</template></action>
    </reference>
    <reference name="content">
        <block type="checkout/onepage_success" name="checkout.success" template="checkout/success.phtml"/>
    </reference>
</checkout_onepage_success> 
```

您实际上在结帐显示页面的成功页面中说 1 列

# asp.net-mvc-3 - Windows Media Player - 500 内部服务器错误

> ID：14432751
> 
> 赞同：0
> 
> 时间：2013-01-21T04:50:34.820
> 
> 标签：asp.net-mvc-3, media-player, wmv

嗨，我的应用程序是 MVC，有一个带有 windows 媒体播放器的视图，它在我的本地主机上播放，但不在托管服务器上，MIME 设置正确。这是我的脚本：

```
<object codebase="http://www.apple.com/qtactivex/qtplugin.cab" 
        classid="clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6" 
        type="application/x-oleobject"> 
        <param name="url" value="../../Video/1.wmv"/> 
        <embed src="../../Video/1.wmv" 
            type="application/x-mplayer2" 
            pluginspage="http://www.microsoft.com/Windows/MediaPlayer/"></embed> 
    </object> 
```

我在一个简单的 HTML 文件中尝试了相同的脚本，它在服务器上运行良好。

我收到 500 内部服务器错误（在 Fiddler 中显示）。有什么建议么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T06:22:59.567

尝试使用助手：

```
<param name="url" value="@Url.Content("~/Video/1.wmv")" /> 
<embed src="@Url.Content("~/Video/1.wmv")" 
```

这将确保生成视频文件的正确 url。在此示例中，我假设您有一个`Video`子目录，并且该文件位于该目录中。

就 500 错误而言，我想它与您显示的代码片段无关。尝试查看跟踪未处理异常的服务器的 EventLog。

# css - Bootstrap 布局在宽显示器上表现得很奇怪

> ID：14432753
> 
> 赞同：0
> 
> 时间：2013-01-21T04:50:39.550
> 
> 标签：css, html, twitter-bootstrap

我一直在使用 Bootstrap 在一个网站上工作，一切都进展顺利，直到我在宽显示器上查看了一些东西。

如果您查看[此](http://wedgetire.com/services.html)页面，您可以在 3 行中看到不同的公司徽标（第一行和第二行 5 个，第三行 2 个）。但是，如果我将浏览器扩展得尽可能宽，您会看到一切都开始变得有些奇怪。有什么想法可以简单地解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T05:05:11.210

我假设您的意思是，当在宽显示器上查看时，某些徽标会脱节 - 尝试在 css 的这一部分中删除 width:170px 规则：

```
@media (min-width: 1200px)
.span2 {
width: 170px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T05:09:11.650

那是因为您没有在父 div 上指定跨度类或宽度

试试这个：（在你的课堂上添加“span12”）

```
<div class="row span12" align="center">
        <div class="span2 offset1" id="hankook" align="center"><img src="img/hankook_logo.png" alt="hankook tires"></div>
        <div class="span2" id="geotrac" align="center"><img src="img/geotrac_logo.png" alt="geo trac tires"></div>
        <div class="span2" id="nankang" align="center"><img src="img/nankang_logo.png" alt="nankang tires"></div>
        <div class="span2" id="geostar" align="center"><img src="img/geostar_logo.png" alt="geostar tires"></div>
        <div class="span2" id="milestar" align="center"><img src="img/milestar_logo.png" alt="milestar tires"></div>
    </div> 
```

# webserver - 如何使用我的 xampp 服务器，以便外部网络的每个人都可以访问它

> ID：14432760
> 
> 赞同：6
> 
> 时间：2013-01-21T04:51:44.553
> 
> 标签：webserver, xampp, port80

我现在有一个多星期的问题。我在我的电脑上运行我的世界服务器。因此，我使用 no-ip.org 来获得“固定”IP。我转发了服务器的所有端口，我的朋友可以毫无问题地访问。后来我想我可以为统计数据和其他东西制作一个小小的 Homegape。所以我安装了xampp。我转发了端口 80、8080、8000、7171。我（以及我本地网络中的其他所有人）可以通过 no-ip.org 地址访问它。但是没有其他人！（我想重申一下，人们可以通过 minecraft 端口（25565）访问我的计算机，而没有其他端口！）

我该如何解决这个问题？我很确定其中一个配置中有一个我还没有看到的简单节点。我用谷歌搜索了几天。所以我发现我应该转发这些端口。但这就是我能找到的全部。

我的防火墙（当然是为了测试！）禁用了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T05:00:27.550

可能您的防火墙阻止了 xampp 或 apache。如果您使用的是 Windows 7，请尝试转到“控制面板”->“系统安全”->“Windows 防火墙”>“允许程序通过 Windows 防火墙”，然后搜索“apache”或“xampp”并标记为允许公共和私人连接

另外你也可以试试这个：

*   启动“Windows 防火墙”
*   转到“高级设置”
*   在左侧窗格中选择“入站规则”
*   在右侧窗格中选择“新规则”
*   在新建入站规则向导中，选择“端口”作为规则类型，然后单击“下一步”
*   选择“TCP并在“特定本地端口”中输入“80”（以及您要打开的任何其他端口），然后单击“下一步”
*   选择“允许连接”，然后单击“下一步”
*   选择应该应用规则的网络位置（如果不确定，请选择它们），然后单击“下一步”
*   提供名称和可选描述

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T05:33:01.033

我解决了这个问题。

我正在使用 cox，他们正在阻止端口 80。现在我正在使用 https 和端口 443，一切正常！

# android - 如何在 phonegap 中为混合 android 应用添加谷歌云打印？

> ID：14432762
> 
> 赞同：2
> 
> 时间：2013-01-21T04:51:58.143
> 
> 标签：android, cordova, printing, google-cloud-print

我正在使用 phonegap 为 android 开发一个混合应用程序。我需要添加打印功能来打印 html 内容。在进行了多次 google 搜索后，我发现我们可以在我们的应用程序中使用 google cloud print api。有没有在 phonegap 应用程序中添加云打印 api 的示例。提前致谢。

# javascript - 使用 History.js - 我很困惑

> ID：14432766
> 
> 赞同：0
> 
> 时间：2013-01-21T04:52:50.233
> 
> 标签：javascript, jquery, history.js

我正在实现 ajax 导航，我想利用 html5 历史 API，所以我偶然发现了 History.js。

我不确定如何使用它，它的文档不是很好，例子也不是。

我试图弄乱它...

```
$("a[href]:not(.no-ajax-navigate)").click(function(e){
    e.preventDefault();
    var path = $(this).attr('data-path');//this is "path/to/page" (clean url's)
    //so I got the path.. now what? pushState?
}); 
```

我不知道现在该怎么做..提前谢谢！

## 更新 1

我查看了@OneTrickPony 评论的[源代码](http://html5.gingerhost.com/new-york)，我得到了它的工作。但似乎在页面加载时触发了 popstate 事件。这应该发生吗？我的页面基本上淡入/淡出，这在您最初加载（刷新）浏览器时有点烦人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:14:54.413

需要注意的是，您可以在不使用 History.js 的情况下使用 HTML5 历史记录（参见 参考资料[）](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)。

History.js 确实为您提供了一些不错的功能，例如能够在历史调用堆栈中存储额外的数据。以下将设置您的 URL 路径而无需刷新。

```
$("a[href]:not(.no-ajax-navigate)").click(function(e){
  e.preventDefault();
  var path = $(this).attr('data-path');//this is "path/to/page" (clean url's)

  // Set the URL using History.js (note the capital H)
  var History = window.History;
  History.pushState(null, null, path);
}); 
```

您可以使用 pushState 中的前两个参数来存储其他数据（有关详细信息， 请参见[此处）。](https://github.com/balupton/History.js/#functions)

要返回使用：`History.back();`

要捕获 URL 更改事件，您可以使用：

```
History.Adapter.bind(window,'statechange',function(){
  var History = window.History;
  var State = History.getState();
  // Do something here with State
}); 
```

# ruby-on-rails - 无法通过 insightTrafficSourceType 获得观看次数 — YouTube Analytics API

> ID：14432767
> 
> 赞同：0
> 
> 时间：2013-01-21T04:52:56.123
> 
> 标签：ruby-on-rails, ruby, youtube-api, analytics

因此，我在 Rails 中使用了“google-api-client”gem，并且尝试调用下面的 URL 以获取`day`和的视频观看次数`insightTrafficSourceType`。[从“可用报告”](https://developers.google.com/youtube/analytics/v1/available_reports%20Available%20Reports)文档页面看来，这是一个允许的调用。

此外，我发现我可以使用 Google 提供的 API Explorer 工具进行此调用。

网址：

[https://www.googleapis.com/youtube/analytics/v1beta1/reports?metrics=views&ids=channel==CHANNEL_ID&dimensions=day,insightTrafficSourceType&filter=video==VIDEO_ID&start-date=2013-01-15&end-date=2013-01- 16&开始时间=1970-01-01](https://www.googleapis.com/youtube/analytics/v1beta1/reports?metrics=views&ids=channel==CHANNEL_ID&dimensions=day,insightTrafficSourceType&filter=video==VIDEO_ID&start-date=2013-01-15&end-date=2013-01-16&start-time=1970-01-01)

结果：

```
{
  :error=>
    {
      "errors"=>[
        {
          "domain"=>"global",
          "reason"=>"invalid",
          "message"=>"Unknown identifier (insightTrafficSourceType) given in field parameters.dimensions."
        }
      ],
      "code"=>400,
      "message"=>"Unknown identifier (insightTrafficSourceType) given in field parameters.dimensions."
    }
} 
```

我不确定我可以在这个错误的初始描述中提供哪些额外数据，但如前所述，我使用 Google::APIClient Ruby 库调用 API。实际代码本身如下所示：

```
client.execute(
  :api_method => api.reports.query,
  :parameters => options
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T14:08:50.233

您仍在引用旧的 beta API，即，在您的 URL 中，您有“v1beta”，并且应该有“v1”。尝试替换它并再次运行它。此外，您可以在此处查看 api explorer 以查看应在您的帐户（启用 OAuth 后）的实时示例中生成的确切 URL： [https](https://developers.google.com/youtube/analytics/v1/) ://developers.google.com/youtube/analytics/v1/ （看在页面的底部。）

最后，开始时间不是 API 生产版本中列出的参数，因此您也需要删除它。

# java - 用于将 RTF 文件转换为 PDF 的 Java 库。

> ID：14432768
> 
> 赞同：4
> 
> 时间：2013-01-21T04:52:56.447
> 
> 标签：java

我有一个 java 桌面服务。它目前使用速度模板来创建格式化的 RTF 文件。有很多这样的模板，更改它们（或从速度移动）不是一种选择。

我正在寻找一种使用 java 代码将 RTF 文件更改为 PDF 的快速简便的方法。我已经检查了以下途径。1.iText 2.OpenOffice 3.JodConverter

但是，他们都是 PDF 创建者。我需要一些可以将 RTF 转换为 PDF 的东西。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-05-27T15:44:51.740

我长期以来一直在谷歌上搜索同一个问题，这是我的解决方案：Using documents4j and microsoft office 2010（未尝试过较新版本）（不需要在后台运行）。此解决方案将 .rtf 转换为 .pdf

POM 文件：

```
<dependencies>
    <dependency>
        <groupId>com.documents4j</groupId>
        <artifactId>documents4j-api</artifactId>
        <version>0.2.1</version>
    </dependency>       

    <dependency>
        <groupId>com.documents4j</groupId>
        <artifactId>documents4j-util-conversion</artifactId>
        <version>0.2.1</version>
    </dependency>

    <dependency>
        <groupId>com.documents4j</groupId>
        <artifactId>documents4j-transformer</artifactId>
        <version>0.2.1</version>
    </dependency>

    <dependency>
        <groupId>com.documents4j</groupId>
        <artifactId>documents4j-util-all</artifactId>
        <version>0.2.1</version>
    </dependency>

    <dependency>
        <groupId>com.documents4j</groupId>
        <artifactId>documents4j-local</artifactId>
        <version>0.2.1</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.8.0-beta2</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-simple</artifactId>
        <version>1.8.0-beta2</version>
    </dependency>
    <dependency>
        <groupId>com.documents4j</groupId>
        <artifactId>documents4j-util-standalone</artifactId>
        <version>1.0.3</version>
    </dependency>
    <dependency>
        <groupId>com.documents4j</groupId>
        <artifactId>documents4j-transformer-msoffice-word</artifactId>
        <version>1.0.3</version>
    </dependency>
    <dependency>
        <groupId>com.google.guava</groupId>
        <artifactId>guava</artifactId>
        <version>23.0</version>
    </dependency>
</dependencies> 
```

包括所有这些！在 .rtf 文件中，您需要其中一些用于字体和类似的东西。java中的使用示例：

```
import com.documents4j.api.DocumentType;
import com.documents4j.api.IConverter;
import com.documents4j.job.LocalConverter;
import java.io.BufferedInputStream;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.Future;
import java.util.concurrent.TimeUnit;

/**
 *
 * @author Neon/Jan Madle
 */
public class NewMain {

/**
 * @param args the command line arguments
 * @throws java.io.FileNotFoundException
 */
public static void main(String[] args) throws FileNotFoundException,             IOException, InterruptedException, ExecutionException {

    ByteArrayOutputStream bo = new ByteArrayOutputStream();

    InputStream in = new BufferedInputStream(new FileInputStream(System.getProperty("user.dir") + File.separator +"out.rtf"));
    IConverter converter = LocalConverter.builder()
            .baseFolder(new File(System.getProperty("user.dir") + File.separator +"test"))
            .workerPool(20, 25, 2, TimeUnit.SECONDS)
            .processTimeout(5, TimeUnit.SECONDS)
            .build();

    Future<Boolean> conversion = converter
            .convert(in).as(DocumentType.RTF)
            .to(bo).as(DocumentType.PDF)
            .prioritizeWith(1000) // optional
            .schedule();
    conversion.get();
    try (OutputStream outputStream = new FileOutputStream("out.pdf")) {
        bo.writeTo(outputStream);
    }
    in.close();
    bo.close();
}
} 
```

希望有人觉得这很有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T04:56:25.780

[JODConverter](http://www.artofsolving.com/opensource/jodconverter)帮助您使用 Java 将 RTF 文件转换为 PDF。最新版本可以在[这里](http://code.google.com/p/jodconverter/)找到。

根据他们的网站，

> JODConverter，Java OpenDocument 转换器，可以在不同的办公格式之间转换文档。它利用了 OpenOffice.org，它为当今可用的 OpenDocument 和 Microsoft Office 格式提供了可以说是最好的导入/导出过滤器。

# php - 在 PHP 中将 Epoch 时间转换为 H:mm 时间戳

> ID：14432775
> 
> 赞同：2
> 
> 时间：2013-01-21T04:53:14.663
> 
> 标签：php, mysql, time, epoch

这似乎应该有一个非常简单的解决方案，但是我正在尝试的一切要么给我一个错误，要么给我错误的结果。

我从 MySQL 表中提取数据，时间以 Epoch 格式存储在数据库中。当我在网站上进行查询时，它显示：3672（与数据库中显示的数字相同）。我尝试过使用 date() 函数、许多不同的 str* 函数、不同的算术运算，但是没有什么能给我实际时间，它应该显示为：'1:02'。

我不是想提取日期、实际时间等。我只是想将一个 Epoch 时间字符串转换为传统的 'H:mm' 格式，因为这些是持续时间，而不是时间戳。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T05:13:23.503

正如其他人已经注意到的那样，这实际上不是任何标准的纪元时间，而只是自午夜以来的秒数。

查看您的示例，您只需要几小时和几分钟（四舍五入）。这会给你那些：

```
$h = (int)($number / 3600);
$m = ceil(($number - $h * 3600) / 60);
$result = sprintf('%d:%02d', $h, $m); 
```

将数字除以 3600（60 秒 * 60 分钟）将为您提供小时数。使用您的 3672 示例，这将为您提供 1。

要获得分钟，您只需删除小时以获得秒（72），然后将其除以 60 以获得分钟（1 分钟和 12 秒）。由于您的示例指定 1:02 是结果，因此您可以简单地取下一个上整数 (2)。

正如您指定的那样，最终结果是 1:02。

# css - Internet Explorer 的 css 文件大小限制是多少？

> ID：14432776
> 
> 赞同：1
> 
> 时间：2013-01-21T04:53:25.410
> 
> 标签：css, internet-explorer

> **可能重复：**
> [IE9 对 CSS 有文件大小限制吗？](https://stackoverflow.com/questions/11080560/does-ie9-have-a-file-size-limit-for-css)

我遇到了一个问题，在 IE9 中它看起来好像我的 CSS 样式的某些部分没有加载。我跟踪了问题，发现我的 css 文件超出了限制大小。我想问一下IE的css文件大小限制是多少，IE6、IE7、IE8和IE9是一样的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T04:55:45.707

CSS 文件中可能的选择器的最大数量 - 4095

[http://demos.telerik.com/testcases/4095issues.html](http://demos.telerik.com/testcases/4095issues.html)

每个文件 31 个样式表

[http://demos.telerik.com/testcases/BrokenTheme.aspx](http://demos.telerik.com/testcases/BrokenTheme.aspx)

# javascript - JS marginTop 中的滚动功能没有改变

> ID：14432782
> 
> 赞同：0
> 
> 时间：2013-01-21T04:54:12.190
> 
> 标签：javascript, html

我有一个函数，我试图通过使用鼠标滚轮的事件在 div 的内容上创建滚动效果。

听者：

```
document.getElementById('menu_base').addEventListener("mousewheel", scrollfunc, false); 
```

我的滚动事件有这个：

```
function scrollfunc(e){
console.log(e);
        if(e.wheelDeltaY == 120) { //this does work
            document.getElementById('menu_base').style.marginTop += 50; //no change
        } else if(e.wheelDeltaY == -120){ //as does this
            document.getElementById('menu_base').style.marginTop -= 50; //no change
        }           
} 
```

console.log 显示：

```
WheelEvent {webkitDirectionInvertedFromDevice: false, wheelDeltaY: -120, wheelDeltaX: 0, wheelDelta: -120, webkitMovementY: 0…} 
```

`menu_base`属性是：

```
.menu_base{
    width:100%;
    height:600px;   
    position:absolute; 
    left: 0; 
    top: 0;     
    text-align:center;
    border:1px solid black;
    overflow:hidden;
} 
```

然而内容没有移动，marginTop 似乎没有改变。

关于可能的原因有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T05:14:24.370

您需要`marginTop`使用单位来定义，例如使用`px`：

```
var menu_base = document.getElementById('menu_base');

function scrollfunc(e) {
    console.log(e);
    var mtop = parseInt(menu_base.style.marginTop, 10) || 0;

    if (e.wheelDeltaY == 120) { //this does work
        mtop += 50; //no change
    } else if (e.wheelDeltaY == -120) { //as does this
        mtop -= 50; //no change
    }
    menu_base.style.marginTop = mtop + 'px';
} 
```

[**小提琴**](http://jsfiddle.net/ebFfU/)

# ruby-on-rails - 自定义友谊模型或 Amistad 宝石？

> ID：14432784
> 
> 赞同：1
> 
> 时间：2013-01-21T04:54:21.197
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我最好建立一个自定义的友谊模型还是应该实施 amistad？如果是 Amisad，是否有任何问题。喜欢不一定有效的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T21:42:16.690

这实际上取决于您要实现的功能。

坦率地说，像 Amistad 这样的 Gem 通常不会为您节省太多时间，尤其是在您最终需要扩展 Gem 的情况下。如果是我，我会草拟一份朋友功能的愿望清单，看看 Amistad 是否可以提供一个坚实的基础（例如，为我完成 90% 的工作）。在大多数情况下，您最好推出自己的解决方案。这样一来，您将永远不会受到一开始并没有带来太多好处的宝石的限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T14:34:17.290

我第一次在这里使用 Amistad，我觉得它很可爱，它是如此的小……“不要重新发明轮子”的本能也响起，为什么要从头开始构建它？如果一个家伙以前已经这样做了，我不想检查我的整个实现！:P 它也为贡献等敞开了大门……

因此，我想扩展 Amistad 的功能，更准确地说，是在邀请时创建邮箱通知，我遵循了我在[Null Object Pattern 中发现的用于 Rails 关联的一个不错的小模式](https://stackoverflow.com/questions/15121737/null-object-pattern-for-associations-in-rails/15508169#15508169)

基本上：

```
class Profile < ActiveRecord::Base
  include Amistad::FriendModel

  module AmistadExtension
    def invite(user)
    p "works!"
    super
  end

  include AmistadExtension
end 
```

现在在`rails c`：

```
> p = Profile.first
> p.invite p # this returns false because it's sending friend request to itself
"works!"
false 
```

不知道这是否可以解决我需要的所有问题，但它节省了我的时间。

# django - 在 Django 中显示简单消息

> ID：14432787
> 
> 赞同：0
> 
> 时间：2013-01-21T04:54:37.783
> 
> 标签：django

我想知道在 Django 中显示简单消息的正确方法是什么。我指的是不值得为其创建专用模板的简单消息。诸如：错误的激活密钥，您的帐户已被激活，您可以开始使用它等等。如果我为每个错误/信息消息创建一个模板，我最终会创建数十个模板。

当然，我需要将这些消息显示在当前应用程序的布局中。

请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T09:13:36.980

你为什么不使用[django 消息框架](https://docs.djangoproject.com/en/dev/ref/contrib/messages/)？

您可以将它与任何模板一起使用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T05:11:54.577

您可以创建一个接受错误消息变量的通用模板，然后它会显示该变量。显然，通过这种方法，您可以使用模板的所有功能，例如扩展等。

```
{% inherit 'base.html' %}
{% block content %}
    {{ message }}
{% endblock %} 
```

在视图中：

```
def foo_view(request):
    message = 'Some message here'
    data = {'message': message}
    return render_to_response('message_template.html', data) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T20:51:43.203

最好的方法是使用 Pradnya Mhatre 建议的 django 消息框架。我通常将消息放在基本模板中，如下所示：

**base.html：**

```
{% block messages %}
  {% if messages %}
    {% for message in messages %}
      <div class="{{message.tags}} box">
        <p>
          {{ message|safe }}
        </p>
      </div>
    {% endfor %}
  {% endif %}
{% endblock %} 
```

在视图中，您可以放置​​：

django.contrib.messages.add_message（请求，django.contrib.messages.ERROR，消息））

您可以在此处放置错误、信息和成功消息。

您的视图将如下所示：

```
import django.contrib.messages
import django.shortcuts

def some_view(request):
    do_something()
    django.contrib.messages.add_message(request, django.contrib.messages.SUCCESS, 'It worked \o/')
    return django.shortcuts.render_to_response(
        'template_that_extends_base.html',
        {},
        context_instance=django.template.RequestContext(request)) 
```

# python - 对于在 python 中使用 `with` 关键字的类，我可以拥有它 __repr__ (print) 本身吗？

> ID：14432790
> 
> 赞同：3
> 
> 时间：2013-01-21T04:54:52.697
> 
> 标签：python, with-statement

我正在尝试创建一个与`with`Python 中的关键字很好地配合的对象。我知道您必须创建`__enter__`和`__exit__`方法，但我不太确定如何操作对象。作为一个具体的例子，我编写了一个创建本地工作空间并在退出时清理的类：

```
import tempfile, os, shutil
class temp_workspace(object):

    def __enter__(self):
        self.local_dir = os.getcwd()
        self.temp_dir  = tempfile.mkdtemp()
        os.chdir(self.temp_dir)

    def __exit__(self, exc_type, exc_value, traceback):
        os.chdir(self.local_dir)
        shutil.rmtree(self.temp_dir)

    def __repr__(self):
        return self.temp_dir 
```

这工作得很好，但是当我尝试打印本地目录名称时：

```
with temp_workspace() as T:
    print "Temp directory name is ", T 
```

它显示为`None`，`__repr__`甚至没有被调用！这真的很令人困惑，因为`T`is also `NoneType`。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T04:57:03.577

您没有从[上下文管理器协议](http://docs.python.org/2/reference/datamodel.html#context-managers)`__enter__`指定的返回对象。添加到方法的末尾。`return self``__enter__`

# android - 其他活动中使用的上下文，除了主要，在数据库操作中给出空指针异常

> ID：14432793
> 
> 赞同：0
> 
> 时间：2013-01-21T04:55:04.363
> 
> 标签：android, android-context

```
@Override
public void onCreate(Bundle savedInstanceState) {

    /*Intent z=new Intent(this, HomePage.class);
    startActivityForResult(z, REQUEST_CODE);*/

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    ctx = this;
    datasource = new CommentsDataSource(this);
    datasource.open();
    refresh();
}
private void refresh(){
    List<Comment> values = datasource.getAllComments();
    List<Comment> value_dif= new ArrayList<Comment>();
    for(int i=0;i<values.size();i++){
        Comment comment=new Comment();
        comment=values.get(i);
        if(comment.getToGive()>comment.getToTake())
            comment.setComment(comment.getComment()+" "+(comment.getToGive()-comment.getToTake()));
        else
            comment.setComment(comment.getComment()+" "+(comment.getToTake()-comment.getToGive()));
            value_dif.add(i,comment);
    }
    ArrayAdapter<Comment> adapter = new ArrayAdapter<Comment>(this,
            android.R.layout.simple_list_item_1, value_dif);
    setListAdapter(adapter);

    ListView listView = (ListView)findViewById(android.R.id.list);
    listView.setAdapter(new ArrayAdapter<Comment>(this, android.R.layout.simple_list_item_1, value_dif) {
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            TextView textView = (TextView) super.getView(position, convertView, parent);
            List<Comment> values = datasource.getAllComments();
            Comment comment=datasource.getHisaab(values.get(position).getComment());
            if(comment.getToGive()>comment.getToTake()){
                textView.setTextColor(Color.RED);
            }
            else{
                textView.setTextColor(Color.GREEN);
            }
            /*String currentLocation = RouteFinderBookmarksActivity.this.getResources().getString(R.string.Current_Location);
            int textColor = textView.getText().toString().equals(currentLocation) ? R.color.holo_blue : R.color.text_color_btn_holo_dark;
            textView.setTextColor(RouteFinderBookmarksActivity.this.getResources().getColor(textColor));*/
            return textView;
        }
    });

} 
```

如果我在其他活动中使用数据库操作，通过再次创建数据源对象并给出上下文，那么它会显示错误......如果我在这个活动中进行数据库操作，一切运行正常......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T05:00:13.263

在您的方法中初始化`ListView listView = (ListView)findViewById(android.R.id.list);`in your`onCreate`或 before`setListAdapter(adapter);`行`refresh()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T05:02:05.597

尝试使用应用程序的上下文而不是活动的上下文：替换`this`为`this.getApplicationContext()`

# touch - 如何在 Angular.js 中使用hammer.js

> ID：14432799
> 
> 赞同：12
> 
> 时间：2013-01-21T04:55:27.217
> 
> 标签：touch, angularjs, hammer.js

我是[Angular.js](http://angularjs.org)的新手，阅读我知道 Angular 没有点击、双击等事件。我试图与[Hammer.js](http://eightmedia.github.com/hammer.js/)结合但没有成功。

来自[要点的代码](https://gist.github.com/3298323)

```
/**
 * angular-hammer.js
 * Inspired by AngularJS' implementation of "click dblclick mousedown..." 
 *
 * This ties in the Hammer events to attributes like:
 * 
 *   hm-tap="add_something()"
 *   hm-swipe="remove_something()"
 *
 * and also has support for Hammer options with:
 *
 *  hm-tap-opts="{hold: false}"
 *
 * or any other of the "hm-event" listed underneath.
 */
angular.forEach('hmTap:tap hmDoubletap:doubletap hmHold:hold hmTransformstart:transformstart hmTransform:transform hmTransforend:transformend hmDragstart:dragstart hmDrag:drag hmDragend:dragend hmSwipe:swipe hmRelease:release'.split(' '), function(name) {
  var directive = name.split(':');
  var directiveName = directive[0];
  var eventName = directive[1];
  angular.module('MYMODULE').directive(directiveName, 
  ['$parse', function($parse) {
    return function(scope, element, attr) {
      var fn = $parse(attr[directiveName]);
      var opts = $parse(attr[directiveName + 'Opts'])(scope, {});
      element.hammer(opts).bind(eventName, function(event) {
        scope.$apply(function() {
          console.log("Doing stuff", event);
          fn(scope, {$event: event});
        });
      });
    };
  }]);
}); 
```

现在我已经添加到我的 html 文件中

```
<!--...-->
<script src="/js/jquery-1.9.0.js"></script>
    <script src="/js/angular.js"></script>

    <script src="/js/hammer.js"></script>
    <script src="/js/jquery.hammer.js"></script>
    <script src="/js/angular-hammer.js"></script>

    <script src="/js/app/controllers.js"></script>
</html> 
```

但是当我尝试在我的 html 中使用它时它不起作用。

我试过了

```
<li hmTap="click($event)">...</li>
<li ngTap="click($event)">...</li>
<li hm-tap="click($event)">...</li>
<li ng-tap="click($event)">...</li> 
```

没有人工作，能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-22T12:58:30.567

试一试。

将hammer.js 和jquery.hammer.js 添加到您的解决方案中。使用 JQuery 和 Angular。

像这样的东西：

```
<script src="js/jquery/jquery.min.js"></script>
<script src="js/hammer/hammer.js"></script>
<script src="js/hammer/jquery.hammer.js"></script>
<script src="js/angular/angular.min.js"></script> 
```

[然后使用 Angular 指令定义新的 HTML 属性。](http://docs.angularjs.org/guide/directive)

在这个例子中，我正在创建一个名为的新属性**`on-tap`**

```
angular.module('myApp.directives', [])
       .directive('onTap', function () {
         return function (scope, element, attrs) {
           return $(element).hammer({
             prevent_default: false,
             drag_vertical: false
           })
             .bind("tap", function (ev) {
               return scope.$apply(attrs['onTap']);
             });
         };
       }); 
```

然后，您可以为每个 Hammer 事件创建一个指令：

按住，点击，双击，transformstart，transform，transformend，dragstart，拖动，dragend，释放，滑动。

您的 HTML 将如下所示：

```
<button on-tap="DoAngularMethod()">Tap me</button> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-05-21T08:04:01.777

这正是你要找的东西：
[https ://github.com/wzr1337/angular-gestures](https://github.com/wzr1337/angular-gestures)

这个新的库允许你实现你需要的所有手势。
另请阅读：
[http ://www.ng-newsletter.com/posts/angular-on-mobile.html](http://www.ng-newsletter.com/posts/angular-on-mobile.html)

希望你觉得它很有趣。:)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-07-26T03:40:25.780

您可以尝试使用一些 Angular 的锤子指令实现：

[https://github.com/randallb/angular-hammer](https://github.com/randallb/angular-hammer)

[https://github.com/dreame4/angular-hammer](https://github.com/dreame4/angular-hammer)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-13T23:10:18.227

我使用*了 randallb* lib 并添加了

```
'hmPan:pan',
'hmPanLeft:panleft',
'hmPanRight:panright', 
```

在 hmGestures 数组中，所以我也可以使用 pan！

# java - java - 如何让两台计算机在java中相互通信以获得即时消息？

> ID：14432801
> 
> 赞同：0
> 
> 时间：2013-01-21T04:55:39.133
> 
> 标签：java, networking, client-server, messenger, instant

一段时间以来，我一直在仅使用 Java 代码开发即时通讯工具。只有当我在同一台计算机上运行服务器和客户端然后它们进行通信时，我才能让它工作。但**我无法让 2 台不同的计算机连接到同一台服务器并进行通信**。我看了很多例子，但我仍然不明白需要改变什么。我将在下面显示大部分代码，其中大部分可以忽略，只需要查看网络部分。服务器连接位于客户端代码的底部。我是初学者，我很感激任何帮助。谢谢。

**客户代码：**

```
import javax.swing.*;
import javax.swing.text.DefaultCaret;

import java.awt.*;
import java.awt.event.*;
import java.text.*;
import java.util.Date;
import java.net.*;
import java.io.*;

public class NukeChatv3 extends JFrame
{

private JTextArea showtext;
private JTextField usertext;
private String hostname;
private Socket connectionsock;
private BufferedReader serverinput;
private PrintWriter serveroutput;
private int port;

private static final long serialVersionUID = 1L;

private class entersend implements KeyListener
{
      public void keyTyped ( KeyEvent e )
      {  

      }  
      public void keyPressed ( KeyEvent e)
      {  
          String text = usertext.getText();

          if(e.getKeyCode()== KeyEvent.VK_ENTER)
          {
              if (usertext.getText().equals(""))
                    return;
                else
                {
                    //try{
                    serveroutput.println(text);

                    usertext.setText("");
                    //showtext.append("[" + ft.format(dNow) + "]" + "\n" + "UserName: " + serverdata +"\n\n");
                    //}
                    /*catch(IOException in)
                    {
                        showtext.append(in.getMessage());
                    }*/

                }
          }
          else 
              return;
      }  
      public void keyReleased ( KeyEvent e )
      {  

      } 
}

private class sender implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        if (usertext.getText().equals(""))
            return;
        else
        {
            Date dNow = new Date( );
            SimpleDateFormat ft = new SimpleDateFormat ("hh:mm:ss");
            String text = usertext.getText();
            usertext.setText("");

            //* Send message to server

            showtext.append(ft.format(dNow) + "\n" + "UserName: " + text +"\n\n");
        }
    }
}

private class startconnection implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        clientconnection connect = new clientconnection();
        connect.start();
    }
}

private class CheckOnExit implements WindowListener
{
    public void windowOpened(WindowEvent e)
    {}

    public void windowClosing(WindowEvent e)
    {
        ConfirmWindow checkers = new ConfirmWindow( );
        checkers.setVisible(true);
    }

    public void windowClosed(WindowEvent e)
    {}

    public void windowIconified(WindowEvent e)
    {}

     public void windowDeiconified(WindowEvent e)
    {}

    public void windowActivated(WindowEvent e)
    {}

    public void windowDeactivated(WindowEvent e)
    {}
}

private class ConfirmWindow extends JFrame implements ActionListener
{

    private static final long serialVersionUID = 1L;

    public ConfirmWindow( )
    {
        setSize(200, 100);
        getContentPane( ).setBackground(Color.LIGHT_GRAY);
        setLayout(new BorderLayout( ));

        JLabel confirmLabel = new JLabel(
                       "Are you sure you want to exit?");
        add(confirmLabel, BorderLayout.CENTER);

        JPanel buttonPanel = new JPanel( );
        buttonPanel.setBackground(Color.GRAY);
        buttonPanel.setLayout(new FlowLayout( ));

        JButton exitButton = new JButton("Yes");
        exitButton.addActionListener(this);
        buttonPanel.add(exitButton);

        JButton cancelButton = new JButton("No");
        cancelButton.addActionListener(this);
        buttonPanel.add(cancelButton);

        add(buttonPanel, BorderLayout.SOUTH);
    }

    public void actionPerformed(ActionEvent e) 
    {
        String actionCommand = e.getActionCommand( );

        if (actionCommand.equals("Yes")) 
            System.exit(0);
        else if (actionCommand.equals("No"))
            dispose( );
        else
            System.out.println("Unexpected Error in Confirm Window.");
    }
}

public static void main(String[] args) 
{

    NukeChatv3 nuke = new NukeChatv3();
    nuke.setVisible(true);

}

public NukeChatv3()
{       
        setTitle("NukeChat v3");
        setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
        setSize(550, 400);
        setResizable(false);
        addWindowListener(new CheckOnExit());
        addWindowListener(new WindowAdapter(){
            public void windowOpened(WindowEvent e){
                usertext.requestFocus();
            }
        });
        getContentPane().setBackground(Color.BLACK);
        setLayout(new GridBagLayout());
        GridBagConstraints c = new GridBagConstraints();

        showtext = new JTextArea(15, 35);
        showtext.setEditable(false);
        showtext.setLineWrap(true);
        DefaultCaret caret = (DefaultCaret)showtext.getCaret();
        caret.setUpdatePolicy(DefaultCaret.ALWAYS_UPDATE);

        JScrollPane scrollbar = new JScrollPane(showtext);
        scrollbar.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
        scrollbar.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
        c.anchor = GridBagConstraints.FIRST_LINE_START;
        //c.gridwidth = 2;
        c.insets = new Insets(20, 20, 20, 20);
        c.weightx = .5;
        c.weighty = .5;
        c.gridx = 0;
        c.gridy = 0;
        add(scrollbar, c);

        usertext = new JTextField(35);

        usertext.requestFocusInWindow();
        usertext.addKeyListener(new entersend());
        //c.gridwidth = 1;
        c.insets = new Insets(0, 20, 0, 0);
        c.weightx = .5;
        c.gridx = 0;
        c.gridy = 1;
        add(usertext, c);

        JPanel empty = new JPanel();
        c.gridx = 1;
        c.gridy = 0;
        empty.setLayout(new GridLayout(2,1));

        JButton test1 = new JButton("test1");
        empty.add(test1);

        JButton test2 = new JButton("test2");
        empty.add(test2);

        add(empty, c);

        JButton send = new JButton("Send");
        send.addActionListener(new sender());
        c.ipady = -5;
        c.insets = new Insets(0, 0, 20, 0);
        c.gridx = 1;
        c.gridy = 1;
        add(send, c);

        JMenu menu = new JMenu("File");
        JMenuItem connection = new JMenuItem("Connect");
        connection.addActionListener(new startconnection());
        menu.add(connection);

        JMenuBar bar = new JMenuBar();
        bar.add(menu);
        setJMenuBar(bar);

}

private class clientconnection  extends Thread
{
    public void run()
    {
        try
        {
            // Set host name and port//
            hostname = "localhost";
            port = 16666;

            // connect to socket of the server//
            connectionsock = new Socket(hostname, port);

            // set up client input from server//
            serverinput = new BufferedReader(new InputStreamReader(connectionsock.getInputStream()));

            // set up client output to server//
            serveroutput = new PrintWriter(connectionsock.getOutputStream(), true);

            // set up a looping thread to constantly check if server has sent anything 
            String serverdata = "";

            while ((serverdata = serverinput.readLine()) != null)
            {
                Thread.sleep(500);
                Date dNow = new Date( );
                SimpleDateFormat ft = new SimpleDateFormat ("hh:mm:ss");
                showtext.append("[" + ft.format(dNow) + "]" + "\n" +"Recieved from server: \n" + "UserName: " + serverdata +"\n\n");
            }

        }

        catch(IOException e)
        {
            System.out.println(e.getMessage());
        }
        catch(InterruptedException inter)
        {
            showtext.append("Unexpected interruption\n\n");
        }
    }

} 
```

}

**服务器代码：**

```
import java.net.ServerSocket;
import java.io.*;
import java.net.Socket;
import java.io.DataOutputStream;
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.IOException;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class servertest extends JFrame
{

private JButton start;
private JTextArea text;
private BufferedReader clientinput;
private PrintWriter clientoutput;

private class listen implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        connection connect = new connection();
        connect.start();
    }
}

public servertest ()
{
    setSize(400,300);
    setLayout(new BorderLayout());
    start = new JButton("Start");
    start.addActionListener(new listen());
    add(start, BorderLayout.SOUTH);

    text = new JTextArea(6, 10);
    text.setEditable(false);
    add(text, BorderLayout.CENTER);
}
private class connection extends Thread
{
    public void run()
    {
    try
    {
        // Sets up a server socket with set port//
        text.setText("Waiting for connection on port 16666");
        ServerSocket serversock = new ServerSocket(16666);

        // Waits for the Client to connect to the server//
        Socket connectionsock = serversock.accept();

        // Sets up Input from the Client to go to the server//
        clientinput = new BufferedReader(new InputStreamReader(connectionsock.getInputStream()));

        // Sets up data output to send data from server to client//
        clientoutput = new PrintWriter(connectionsock.getOutputStream(), true);

        // Test server to see if it can perform a simple task//
        text.setText("Connection made, waiting to client to send there name");
        clientoutput.println("Enter your name please.");

        // Get users name//
        String clienttext = clientinput.readLine();

        // Reply back to the client//
        String replytext = "Welcome " + clienttext;
        clientoutput.println(replytext);
        text.setText("Sent: " + replytext);

        while ((replytext = clientinput.readLine()) != null)
        {
            clientoutput.println(replytext);
            text.setText("Sent: " + replytext);
        }

        // If you need to close the Socket connections
        // clientoutput.close();
        // clientinput.close();
        // connetionsock.close();
        // serversock.close();

    }

    catch(IOException e)
    {
        System.out.println(e.getMessage());
    }
    }
}

public static void main(String[] args)
{
    servertest test = new servertest();
    test.setVisible(true);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T05:00:47.017

在您的客户端代码中，指定服务器正在运行的正确主机名/IP 地址：

```
private class clientconnection  extends Thread
{
    public void run()
    {
        try
        {
            // Set host name and port//
            hostname = "localhost"; //<---- Change this to server IP address
            port = 16666; 
```

# c++ - 有没有办法在 Visual Studio 2012 中使用委托构造函数？

> ID：14432802
> 
> 赞同：7
> 
> 时间：2013-01-21T04:55:44.313
> 
> 标签：c++, visual-studio, visual-c++, c++11, visual-studio-2012

纵观 C++11 的新特性，委托构造函数似乎在我的情况下特别有用。

不幸的是，我需要使用 Visual Studio。我正在从事的项目有几个月的截止日期，使用实验性/损坏的编译器与我无关。是否有可以让我进行构造函数委托的 Visual C++ 版本？

见[http://www.stroustrup.com/C++11FAQ.html#inheriting](http://www.stroustrup.com/C++11FAQ.html#inheriting)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-21T06:11:25.817

是的，有一个支持委托构造函数的编译器测试版 - [Visual C++ Compiler November 2012 CTP](http://www.microsoft.com/en-us/download/details.aspx?id=35515)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-30T10:37:27.407

同时，尝试

```
#define INHERIT_CONSTRUCTOR(BaseName,DerivedName) template <class... Args> DerivedName(Args&&... args) : BaseName(std::forward<Args>(args)...) { } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T14:04:08.550

一旦您通过上面由 Karel Petranek 提供的链接成功安装了 CTP，只需创建任何旧的 C++ 项目。

然后，在项目的“Property Pages > Configuration Properties > General > Platform Toolset”下，选择“Microsoft Visual C++ Compiler Nov 2012 CTP (v120_CTP_Nov2012)”。

就这样。现在您可以访问[VS2012 中的这些附加 C++ 编译器功能](http://aka.ms/vc-ctp-tour)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-04T09:22:49.307

您不必再安装 CTP。
[Visual Studio 2013](http://msdn.microsoft.com/en-us/library/bb386063%28v=vs.120%29.aspx)将支持委托构造函数，您可以尝试现在可用的预览版。

# iphone - 在 Facebook-Ios-Sdk 中关闭 Facebook 会话

> ID：14432808
> 
> 赞同：11
> 
> 时间：2013-01-21T04:56:22.610
> 
> 标签：iphone, ios, facebook, facebook-graph-api

`Facebook-iOS-Sdk`每次启动我的应用程序时，我如何关闭活动会话，或者在杀死应用程序后，它会为我提供以前的登录会话详细信息。当我点击 facebook 按钮时。我已经使用了所有东西`[appDelegate.session closeAndClearTokenInformation];` `[FBSession.activeSession close];` `[FBSession.activeSession closeAndClearTokenInformation]`..但是活动会话仍然没有关闭..如何在点击时关闭上一个会话数据。

我使用下面的代码来清除，但是每当我单击 facebook 按钮开始新会话时，它都会让我返回以前的凭据。

```
- (IBAction)buttonClickHandler:(id)sender {

appDelegate = [[UIApplication sharedApplication]delegate];

// this button's job is to flip-flop the session from open to closed
if (appDelegate.session.isOpen) {

    [appDelegate.session closeAndClearTokenInformation];
    [FBSession.activeSession close];
    [FBSession.activeSession  closeAndClearTokenInformation];
    FBSession.activeSession=nil;

} else {
    if (appDelegate.session.state != FBSessionStateCreated) {
        // Create a new, logged out session.
        appDelegate.session = [[FBSession alloc] init];
    }

    // if the session isn't open, let's open it now and present the login UX to the user
    [FBSession.activeSession closeAndClearTokenInformation];
    FBSession.activeSession=nil;
    [FBSession.activeSession openWithBehavior:FBSessionLoginBehaviorForcingWebView

                            completionHandler:^(FBSession *session,

                                                FBSessionState state,

                                                NSError *error) {
                                // and here we make sure to update our UX according to the new session state

                                NSLog(@" state=%d",state);

                                [FBRequestConnection
                                 startForMeWithCompletionHandler:^(FBRequestConnection *connection,
                                                                   id<FBGraphUser> user,
                                                                   NSError *error) {

                                     userInfo = @"";

                                     // Example: typed access (name)
                                     // - no special permissions required
                                     userInfo = user.username;

                                     NSLog(@"string %@", userInfo); 
                                          [self checkfacebook];

                                 }];

                            }];    } 

 } 
```

并在**ViewDidLoad**

```
- (void)viewDidLoad
{
[super viewDidLoad];

AppDelegate *appDelegate = [[UIApplication sharedApplication]delegate];
if (!appDelegate.session.isOpen) {
    // create a fresh session object
    appDelegate.session = [[FBSession alloc] init];

    if (appDelegate.session.state == FBSessionStateCreatedTokenLoaded) {
        // even though we had a cached token, we need to login to make the session usable
        [FBSession.activeSession close];
        FBSession.activeSession=nil;
   }
}

NSHTTPCookieStorage* cookies = [NSHTTPCookieStorage sharedHTTPCookieStorage];
NSArray* facebookCookies = [cookies cookiesForURL:[NSURL URLWithString:@"http://login.facebook.com"]];

for (NSHTTPCookie* cookie in facebookCookies) {
    [cookies deleteCookie:cookie];
}    

} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-21T06:11:38.767

嗨克里斯蒂安可能在下面两个链接它的帮助你请重新引用这两个链接`developers.facebook`

[http://developers.facebook.com/docs/reference/ios/3.0/class/FBSession/](http://developers.facebook.com/docs/reference/ios/3.0/class/FBSession/)

[http://developers.facebook.com/docs/reference/ios/3.0/class/FBSession/#close](http://developers.facebook.com/docs/reference/ios/3.0/class/FBSession/#close)

```
[FBSession.activeSession closeAndClearTokenInformation];
[FBSession.activeSession close];
[FBSession setActiveSession:nil]; 
```

您还可以检查与您的问题相关的这两个问题：-

[Facebook graph api注销不起作用](https://stackoverflow.com/questions/12194876/facebook-graph-api-log-out-not-working)

[Facebook iOS SDK 3.1.1“closeAndClearTokenInformation”方法不起作用](https://stackoverflow.com/questions/12896676/facebook-ios-sdk-3-1-1-closeandcleartokeninformation-method-no-working)

希望它可以帮助你

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-07T07:06:14.310

打电话后

```
 [FBSession.activeSession closeAndClearTokenInformation]; 
```

使用以下清除 cookie。它对我有用！

```
 NSHTTPCookieStorage* cookies = [NSHTTPCookieStorage sharedHTTPCookieStorage];
for (NSHTTPCookie* cookie in
     [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies]) {
    [cookies deleteCookie:cookie];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-14T13:33:20.313

Nitin 的 Gohel 回答，Swift 版本：

```
 FBSession.activeSession().closeAndClearTokenInformation()
    FBSession.activeSession().close()
    FBSession.setActiveSession(FBSession()) 
```

您可以使用

```
 FBSession.setActiveSession(nil) 
```

但是该函数要求一个未包装的对象，因此“nil”似乎不是一个很好的传递参数

# c# - 按名称获取线程以检查 IsAlive 状态

> ID：14432810
> 
> 赞同：0
> 
> 时间：2013-01-21T04:56:40.520
> 
> 标签：c#, c#-4.0

我目前在我的应用程序中使用各种线程，每个线程都有一个不同的名称。我想知道是否有一种方法可以确定该线程是否正在运行或不使用 IsAlive 属性。我确实[在这里](https://stackoverflow.com/questions/2182917/get-a-thread-by-its-name)找到了一些数据。但我想不通。

# java - 在读取操作中使用休眠的 StaleObjectStateException？

> ID：14432813
> 
> 赞同：10
> 
> 时间：2013-01-21T04:57:01.290
> 
> 标签：java, spring, hibernate, spring-integration

我在 Spring 的侦听器中使用 Hibernate `DefaultMessageLisenerContainer`。

当我让监听器使用多个线程运行时，我经常会遇到这种`StaleStateException`只读操作：

```
Query q = session.createQuery("SELECT k FROM Keyword k WHERE k.name = :name").setParameter("name", keywordName);
List<Keyword> kws = q.list() 
```

在 q.list() 处抛出异常：

> 乐观锁定失败；嵌套异常是 org.hibernate.StaleObjectStateException：行已被另一个事务更新或删除（或未保存值映射不正确）

```
Caused by: org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.aurora.common.model.Keyword#7550]
at org.hibernate.persister.entity.AbstractEntityPersister.check(AbstractEntityPersister.java:1934)
at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2578)
at org.hibernate.persister.entity.AbstractEntityPersister.updateOrInsert(AbstractEntityPersister.java:2478)
at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2805)
at org.hibernate.action.EntityUpdateAction.execute(EntityUpdateAction.java:114)
at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:267)
at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:259)
at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:179)
at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321)
at org.hibernate.event.def.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:64)
at org.hibernate.impl.SessionImpl.autoFlushIfRequired(SessionImpl.java:1175)
at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1251)
at org.hibernate.impl.QueryImpl.list(QueryImpl.java:102) 
```

这真的很奇怪，因为读取操作应该从 DB 读取一个新副本，而不是检查版本冲突并抛出`StaleObjectStateException`。

该`name`属性不是 Keyword 对象的主键。

**更新**：我的数据访问代码：我正在使用`HibernateTransactionManager`支持线程绑定 Hibernate 会话的 Spring。通过 SessionFactory.getCurrentSession() 方法检索 Hibernate 会话。

每个事务通过将 HibernateTransactionManager 分配给 MessageListenerContainer 来围绕侦听器的调用：

```
<jms:listener-container connection-factory="connectionFactory" concurrency="3-3" prefetch="6" transaction-manager="transactionManager">
        <jms:listener destination="${requests}" response-destination="${replies}" ref="chunkHandler" method="handleChunk" />
    </jms:listener-container> 
```

**更新：** 在建议的答案中，可能有其他操作导致 staleObjectStateException。对于之前的所有其他操作，我已经尝试注销 Session.isDirty()。它们都是读操作。有趣的是，在关键字 select by name 操作之后，会话实际上被标记为脏。实际的代码是这样的：

```
for (String n : keywordNames) {
    Keyword k = keywordDao.getKeywordByName(n);
} 
```

在第一次迭代后会话是脏的。（KeywordDao.getKeywordByName 实现如上）。任何的想法 ？谢谢，库。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-21T06:27:39.337

我相信给出的其他答案是不正确的。访问不存在的行不会给出 StaleObjectStateException，并且简单地查询一个实体也不会触发该实体的乐观锁。

进一步检查堆栈跟踪将为原因提供一些提示：

`at org.hibernate.impl.QueryImpl.list(QueryImpl.java:102)`当您调用 query.list()

`at org.hibernate.impl.SessionImpl.autoFlushIfRequired(SessionImpl.java:1175)`Hibernate 将确定是否需要自动刷新会话。由于某种原因，Hibernate 认为需要自动刷新。（可能是由于您之前在同一会话中对某些关键字实体或其他实体进行了更新……这是我无法诚实地说出来的）

`at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2805)`然后 Hibernate 会将会话中的所有更改刷新到 DB。并且，这里出现了 StaleObjectStateException 的问题，即乐观并发检查失败。乐观并发检查失败可能与关键字实体有关（因为它只是将会话中所有更新的实体刷新到数据库）。但是，在您的情况下，它实际上与`Keyword`实体 ( `Caused by: org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.ncs.singtel.aurora.common.model.Keyword#7550]`)

请验证乐观并发失败的原因。通常我们只是简单地将乐观并发异常重新抛出给调用者，让调用者决定是否要再次调用该函数。然而，这一切都取决于您的设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T05:10:04.003

`stalestateException`当我们尝试访问不存在的行时会发生这种情况。检查你的`keyword.getName()`，看看它返回什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T05:19:33.847

其他一些事务可能会在您读取的同时更新关键字实体，并且您的读取操作可能会导致过时的对象。

这是乐观锁定。可以考虑悲观锁，但是会严重影响性能。

我建议抓住`StaleObjectStateException`并尝试再次阅读。

# java - 如何移动图像（动画）？

> ID：14432816
> 
> 赞同：6
> 
> 时间：2013-01-21T04:57:10.050
> 
> 标签：java, image, animation

我正在尝试在 x 轴上移动船（还没有键盘）。如何将运动/动画与`boat.png`而不是任何其他图像相关联？

```
public class Mama extends Applet implements Runnable {

    int width, height;
    int x = 200;
    int y = 200;
    int dx = 1;
    Image img1, img2, img3, img4;

    @Override
    public void init(){
        setSize(627, 373);
        Thread t = new Thread(this);
        img1 = getImage(getCodeBase(),"Background.png");
        img2 = getImage(getCodeBase(), "boat.png");
        img3 = getImage(getCodeBase(), "LeftPalm.png");
        img4 = getImage(getCodeBase(), "RightPalm.png");

    }

    @Override
    public void paint(Graphics g){
        g.drawImage(img1, 0, 0, this);
        g.drawImage(img2, 200, 200, this);
        g.drawImage(img3, 40, 100, this);
        g.drawImage(img4, 450, 130, this);
    }

    @Override
    public void run() {
        while(true){

            x += dx;
            repaint();
            try {
                Thread.sleep(17);
            } catch (InterruptedException e) {
                System.out.println("Thread generates an error.");
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-21T10:09:01.437

有几件事很突出...

## 问题”

如前所述，您需要为图像绘制过程提供可变参数。 `g.drawImage(img2, x, y, this);`，这将允许您定义图像的绘制位置。

虽然您已经实现`Runnable`了 ，但实际上您还没有启动任何线程来调用它。这意味着，实际上并没有改变变量。

在你`start`的方法中，你应该调用类似`new Thread(this).start()`.

## 建议

尽管您已将问题标记为 Swing，但您使用的是 AWT 组件。不建议这样做（事实上，通常不鼓励小程序，因为它们很麻烦 - 恕我直言）。另一个问题，您很快就会发现，它们不是双缓冲的，这通常会在执行动画时导致闪烁，这是不可取的。

作为旁注，也不鼓励覆盖`paint`顶级容器的方法，例如`Applet`. 顶级容器往往包含许多额外的组件，通过覆盖这样的`paint`方法，您会破坏此设置。此外，顶级容器也不倾向于双缓冲。

下面的示例使用 a `JFrame`，但将其转换为使用 a 并不需要太多`JApplet`（只需将其`AnimationPanel`放在上面。这是通常不鼓励从顶级容器扩展的另一个原因；）

![在此处输入图像描述](../Images/7373cb749a286389bc8dc31db700fa8d.png)

```
public class AnimatedBoat {

    public static void main(String[] args) {
        new AnimatedBoat();
    }

    public AnimatedBoat() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new AnimationPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class AnimationPane extends JPanel {

        private BufferedImage boat;
        private int xPos = 0;
        private int direction = 1;

        public AnimationPane() {
            try {
                boat = ImageIO.read(new File("boat.png"));
                Timer timer = new Timer(40, new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        xPos += direction;
                        if (xPos + boat.getWidth() > getWidth()) {
                            xPos = getWidth() - boat.getWidth();
                            direction *= -1;
                        } else if (xPos < 0) {
                            xPos = 0;
                            direction *= -1;
                        }
                        repaint();
                    }

                });
                timer.setRepeats(true);
                timer.setCoalesce(true);
                timer.start();
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return boat == null ? super.getPreferredSize() : new Dimension(boat.getWidth() * 4, boat.getHeight());
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            int y = getHeight() - boat.getHeight();
            g.drawImage(boat, xPos, y, this);

        }

    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T07:27:06.783

您需要替换`g.drawImage(img2, 200, 200, this);`为`g.drawImage(img2, x, y, this);`

# java - 在 JTextArea 中键入会影响其他组件

> ID：14432819
> 
> 赞同：1
> 
> 时间：2013-01-21T04:58:04.357
> 
> 标签：java, swing, jpanel, jtextarea

我正在处理具有四个组件的面板： a `label`，`textfield`不可编辑的 a ，另一个标签和 a `JTextArea`。这些组件一个接一个地垂直对齐，我为此面板使用了 Box Layout。我注意到的是，当我输入文本区域组件时，它会逐个字符地移动标签，直到它不能再移动。它们的标签最初是向左对齐的，但是一旦我开始打字，它们就会开始向右移动。我已经尝试了很多其他组件，但 Box Layout 似乎做了我想要的，我只需要修复这个错误。任何一个想法？这是我的面板代码：

```
JPanel Panel = new JPanel();
Panel.setLayout(new BoxLayout(Panel,BoxLayout.Y_AXIS));
Panel.add(new JLabel("just a label here"));
Panel.add(textFieldComponent);
Panel.add(new JLabel("just a label here"));
Panel.add(textAreaComponent); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T06:05:24.330

使用另一个`LayoutManager`例如`GridBagLayout`或

将 放置`JLabel`在带有水平`BoxLayout`（或`BorderLayout`）的面板中以激活所需的对齐方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T07:06:00.293

另一种选择：

将 textAreaComponent 添加到 JScrollPane（将 scrollPane 的 alignmentX 设置为 0.0f）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-06T17:02:32.157

我也有这个问题，我补充说：`textArea.setLineWrap(true)`. 当您在字段中键入时，它会阻止其他对象被推送。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-21T09:36:19.030

您绝对应该使用另一个布局。我个人最喜欢的一个是[JGoodies 的表格](http://www.jgoodies.com/freeware/libraries/forms/)。我还没有看到任何接近的Java Swing 布局。

# d3.js - d3边重叠节点

> ID：14432821
> 
> 赞同：2
> 
> 时间：2013-01-21T04:58:24.323
> 
> 标签：d3.js

我在 D3.js 中创建了一个网络，当您来回移动滑块时，它会更新链接（删除和添加）。

但是边缘与节点重叠（因为边缘被绘制在节点之上......）我认为[https://github.com/agfk/knowledge-maps/issues/1](https://github.com/agfk/knowledge-maps/issues/1)着眼于这个问题，但我不太确定这是什么意思。

我可能与绘制线条而不是节点的顺序有关，但我不知道如何解决这个问题。Svgs 也没有 z-indexes，所以我可以通过 css 操作它。

任何帮助，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T01:56:47.977

此链接讨论如何确定绘制元素的顺序。在您的情况下，也许您想先绘制边缘然后绘制节点：
[https ://groups.google.com/forum/?fromgroups=#!topic/d3-js/JCXKef_GRCQ](https://groups.google.com/forum/?fromgroups=#!topic/d3-js/JCXKef_GRCQ)

# vb.net - 如何在 Visual Basic 中将 url 拼凑在一起？

> ID：14432822
> 
> 赞同：0
> 
> 时间：2013-01-21T04:58:29.193
> 
> 标签：vb.net, url

我在这方面基本上是*全新*的，我自己无法弄清楚。我的问题是如何获取现有的网址（具体来说是 http://www.minecraft.net/haspaid.jsp?user=，它是一个部分检查我的世界用户是否是高级用户的程序）并在末尾添加一个用户名在文本框中指定。因此，当 textbox1.Text =whateverguy123 时，它将建立链接[http://www.minecraft.net/haspaid.jsp?user=whateverguy123 。](http://www.minecraft.net/haspaid.jsp?user=whateverguy123)我仍在努力从网页中实际获取文本并检查它是否显示“真”或“假”，所以这在技术上不是我问题的一部分，但我希望你能得到任何帮助折腾我的方式。谢谢，很抱歉这个相当简单的问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T05:04:37.890

您想要的称为连接字符串。

所以说你有

```
Dim url as String
url = "http://www.minecraft.net/haspaid.jsp?user=" + textbox1.Text 
```

有些人更喜欢 & 而不是 +。两者都做同样的事情。但是在任何一种情况下，您都需要确保两个变量都是字符串。

从您的问题中不确定您想对链接等做什么。但这会让你走上正确的轨道，我希望。

# ruby - 使用 Ruby 正则表达式获取字符串中间的内容

> ID：14432825
> 
> 赞同：0
> 
> 时间：2013-01-21T04:58:50.687
> 
> 标签：ruby, regex

我有一个这样的字符串：

> src="http://www.google.com/calendar/embed?showTitle=0&mode=WEEK&height=600&wkst=1&bgcolor=%23FFFFFF&src= **59flluvbaj110hp6ht5hrveof8%40group.calendar.google.com** &color=%23B1365F&src=cnuvtn9nofljk5kq9381icgroup.endg% google.com&color=%232952A3&ctz=America%2FNew_York" style="border-width:0" width="800" height="600" frameborder="0" scrolling="no"

我想以粗体提取部分。它总是在 a`src=`和之间`&`。目前，我正在做

```
"sample string above".match(/;src.*?&/)[0][5, length-5] 
```

但这似乎真的很不雅。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T05:07:34.037

```
"sample string above"[/&src=(.*?)&/, 1] 
```

1 表示第一个捕获组

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T06:40:43.870

您根本不需要正则表达式，只需了解发生了什么。问题在于 的内容`src`已针对 HTML 实体进行了编码，因此，`&`在变量之间嵌入了编码到`&amp;`.

解决方法是首先解码字符串以反转编码，然后将字符串拆分回其组件。你可以这样做：

```
require 'cgi'
require 'uri'

uri = URI.parse(src)
hash = Hash[URI::decode_www_form(CGI::unescapeHTML(uri.query))]
hash['src'] # => "cnuvtn9nofljk5kq9381ic5odg@group.calendar.google.com" 
```

将查询解码为哈希的替代方法是：

```
hash = Hash[CGI::unescapeHTML(uri.query).split('&').map{ |q| q.split('=') }] 
```

通过拆分`&`，`=`我们得到一个数组数组，并且可以轻松地将其转换回哈希，从而可以轻松访问字符串中的任何变量。

虽然这些看起来像是一条更长的路径，但它们解决了问题并将值返回到其原始形式。

通常我们希望它作为一个散列，但在这种情况下，我们不能这样做，因为它们`"src"`在查询中有两个参数，导致第二个参数踩到第一个参数。如果您想要第一个而不是第二个，则需要在不转换为哈希的情况下获取它：

```
URI::decode_www_form(CGI::unescapeHTML(uri.query)).select{ |k,v| k == 'src' }
=> [["src", "*59flluvbaj110hp6ht5hrveof8@group.calendar.google.com*"], ["src", "cnuvtn9nofljk5kq9381ic5odg@group.calendar.google.com"]]

URI::decode_www_form(CGI::unescapeHTML(uri.query)).select{ |k,v| k == 'src' }[0]
=> ["src", "*59flluvbaj110hp6ht5hrveof8@group.calendar.google.com*"]

URI::decode_www_form(CGI::unescapeHTML(uri.query)).select{ |k,v| k == 'src' }[1]
=> ["src", "cnuvtn9nofljk5kq9381ic5odg@group.calendar.google.com"] 
```

您显示的字符串虽然看起来不正确，但它看起来像是您从 HTML 中剪切和粘贴的内容。如果是这样，您应该使用解析器来提取内容，而不是正则表达式。而且，在这种情况下，这是正确的方法：

```
require 'nokogiri'

html = '<img src="http://www.google.com/calendar/embed?showTitle=0&mode=WEEK&height=600&wkst=1&bgcolor=%23FFFFFF&src=59flluvbaj110hp6ht5hrveof8%40group.calendar.google.com&color=%23B1365F&src=cnuvtn9nofljk5kq9381ic5odg%40group.calendar.google.com&color=%232952A3&ctz=America%2FNew_York" style=" border-width:0 " width="800" height="600" frameborder="0" scrolling="no">'

doc = Nokogiri.HTML(html)
src = doc.at('img')['src']
=> "http://www.google.com/calendar/embed?showTitle=0&mode=WEEK&height=600&wkst=1&bgcolor=%23FFFFFF&src=59flluvbaj110hp6ht5hrveof8%40group.calendar.google.com&color=%23B1365F&src=cnuvtn9nofljk5kq9381ic5odg%40group.calendar.google.com&color=%232952A3&ctz=America%2FNew_York" 
```

Nokogiri[`at`方法](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-at) `doc.at('img')`可能会根据标签在文档中的位置而改变`<img>`，但处理它是一个单独的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T07:18:43.143

### Fix Your Quote Delimiters

Your string, as originally posted, has quoting issues. Make sure you escape your string properly. For example, you might use this alternate syntax:

> src = %q{http://www.google.com/calendar/embed?showTitle=0&mode=WEEK&height=600&wkst=1&bgcolor=%23FFFFFF&src=59flluvbaj110hp6ht5hrveof8%40group.calendar.google.com&color=%23B1365F&src=cnuvtn9nofljk5kq9381ic5odg%40group.calendar.google.com&color=%232952A3&ctz=America%2FNew_York" style=" border-width:0 " width="800" height="600" frameborder="0" scrolling="no"}

### Using Positive Lookbehind

You can use a positive lookbehind assertion to scan your string for all matches, and then use an appropriate Array method to access the one you're interested in. For example:

```
src.scan(/(?<=src=)[^&]+/).first
# => "59flluvbaj110hp6ht5hrveof8%40group.calendar.google.com" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T06:39:47.070

您可以使用捕获组来执行此操作，如下所示：

```
"sample string above".sub(/^.*src=(.*?)&.*$/, '\1') 
```

# python - 如何使用Python在一行中查找字符串并更改字符串后n行的文本

> ID：14432826
> 
> 赞同：0
> 
> 时间：2013-01-21T04:59:01.140
> 
> 标签：python, string, text, replace, text-manipulation

我需要在文本文件中找到“翻译”的每个实例，并在找到文本后替换 4 行的值：

```
"(many lines)
                }
            }   
        translateX xtran        
            {   
            keys    
                {
                k  0  0.5678
                }
            }   
(many lines)" 
```

值 0.5678 需要为 0。它将始终位于`"translate"`字符串下方 4 行。该文件最多有大约 10,000 行。示例文本文件名：`01F.pz2`.

我还想循环浏览文件夹并为每个带有`pz2`扩展名的文件（最多 40 个）重复该过程。

任何帮助，将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:53:22.547

我不太确定在您的文件中替换 0.5678 的逻辑，因此我使用了一个函数 - 将其更改为您需要的任何内容，或者更详细地解释您想要的内容。排队的最后一个数字？只有浮点数？

尝试：

```
import os    

dirname = "14432826"
lines_distance= 4

def replace_whatever(line):
    # Put your logic for replacing here
    return line.replace("0.5678", "0")

for filename in filter(lambda x:x.endswith(".pz2") and not x.startswith("m_"), os.listdir(dirname)):
    print filename
    with open(os.path.join(dirname, filename), "r") as f_in, open(os.path.join(dirname,"m_%s" % filename), "w") as f_out:
        replace_tasks = []
        for line in f_in:
            # search marker in line
            if line.strip().startswith("translate"):
                print "Found marker in", line,
                replace_tasks.append(lines_distance)                
            # replace if necessary
            if len(replace_tasks)>0 and replace_tasks[0] == 0:
                del replace_tasks[0]
                print "line to change is", line,
                line_to_write = replace_whatever(line)
            else:
                line_to_write = line
            # Write to output
            f_out.write(line_to_write)
            # decrease counters
            for i, task in enumerate(replace_tasks):
                replace_tasks[i] -= 1 
```

代码中的注释应该有助于理解。主要概念是`replace_tasks`记录下一行要修改的时间的列表。

备注：您的代码示例表明您的文件中的数据是结构化的。阅读此结构并对其进行处理肯定会比在纯文本文件上进行搜索和替换方法更节省。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:11:28.467

Thorsten，我将原始文件重命名为具有 .old 扩展名，并且以下代码有效：

```
import os
target_dir = "."

# cycle through files
for path, dirs, files in os.walk(target_dir):
    # file is the file counter
    for file in files:
        # get the filename and extension
        filename, ext = os.path.splitext(file)
        # see if the file is a pz2
        if ext.endswith('.old') :
            # rename the file to "old"
            oldfilename = filename + ".old"
            newfilename = filename + ".pz2"
            old_filepath = os.path.join(path, oldfilename)
            new_filepath = os.path.join(path, newfilename)
            # open the old file for reading
            oldpz2 = open (old_filepath,"r")
            # open the new file for writing
            newpz2 = open (new_filepath,"w")
            # reset changeline
            changeline = 0
            currentline = 0
            # cycle through old lines
            for line in oldpz2 :
                currentline = currentline + 1
                if line.strip().startswith("translate"):
                        changeline = currentline + 4
                if currentline == changeline :
                    print >>newpz2,"                k  0  0"
                else :
                    print >>newpz2,line 
```

# wcf - 保存从 WCF/web 服务接收到的 windows phone 中的数据。

> ID：14432828
> 
> 赞同：0
> 
> 时间：2013-01-21T04:59:14.583
> 
> 标签：wcf, web-services, windows-phone-7, local-database

保存从 WCF/web 服务接收到的 windows phone 中的数据。一段时间后可能会收到响应，因此如何处理这种情况。保存数据没问题，但是数据接收晚了怎么处理

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T05:18:36.250

您可以使用此代码（显示我项目中的代码）：

```
public void sendPost(string postData, Action<MyResponse, Exception> callback, CreateResponse creater)
        {
            HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(UrlRequest);
            webRequest.Method = "POST";
            webRequest.ContentType = "application/x-www-form-urlencoded";
            webRequest.Accept = "application/json";
            webRequest.AllowAutoRedirect = true;
            webRequest.BeginGetRequestStream(new AsyncCallback(getRequestStreamCallback), new Request()
            {
                HttpRequest = webRequest,
                PostData = postData,
                Url = UrlRequest,
                CallBack = callback,
                Creater = creater
            });
        }

 private void getRequestStreamCallback(IAsyncResult asynchronousResult)
        {
            var request = (Request)asynchronousResult.AsyncState;
            // End the stream request operation
            Stream postStream = request.HttpRequest.EndGetRequestStream(asynchronousResult);

            byte[] byteArray = Encoding.UTF8.GetBytes(request.PostData);

            // Add the post data to the web request
            postStream.Write(byteArray, 0, byteArray.Length);
            postStream.Close();

            // Start the web request
            request.HttpRequest.BeginGetResponse(new AsyncCallback(getResponseCallback), request);
        }

private void getResponseCallback(IAsyncResult asynchronousResult)
        {
            var request = (Request)asynchronousResult.AsyncState;
            try
            {

                HttpWebResponse response;

                // End the get response operation
                response = (HttpWebResponse)request.HttpRequest.EndGetResponse(asynchronousResult);
                Stream streamResponse = response.GetResponseStream();
                StreamReader streamReader = new StreamReader(streamResponse);
                var myResponse = streamReader.ReadToEnd();
                streamResponse.Close();
                streamReader.Close();
                response.Close();
                MyResponse response_obj = request.Creater.CreateResponseObj();
                using (MemoryStream stream = new MemoryStream(Encoding.Unicode.GetBytes(myResponse)))
                {
                    DataContractJsonSerializer serializer = new DataContractJsonSerializer(response_obj.GetType());
                    response_obj = (GYResponse)serializer.ReadObject(stream);
                    if (request.CallBack != null)
                    {
                        request.CallBack.Invoke(response_obj, null);
                    }
                }
            }
            catch (WebException e)
            {

                if (request.CallBack != null)
                {
                    request.CallBack.Invoke(null, e);
                }
            }
        }
public void getInfo(string uid, Action<MyResponse, Exception> callback)
        {
            CreateResponse creater = new CreateResponseGetInfo();
            string model = "User";
            string method = "getInfo";
            Params parametrs = new Params();
            parametrs.Uid = uid;
            //create yor request
            string request = getRequestString(model, method, parametrs, Atoken);                 
            sendPost(request, callback, creater);
        } 
```

因此，您调用方法，该方法将请求发送到 Web 服务`postRequester.getInfo(uid, ResponseHandler)`并使用委托来处理结果。

```
private void ResponseHandler(MyResponse result, Exception error)
        {
            if (error != null)
            {
                string err = error.Message;
                return;
            }
            else
            {
                var infoResponse = result as ResponseGetInfo;
                if (infoResponse != null)
                {
                      //result processing..              
                }

            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T06:19:23.210

您在 Windows Phone 应用程序中发出的所有 Web 请求都是异步的。这意味着，您从您的应用程序发出一个 Web 请求并附加一个处理程序来处理响应时的响应。在响应处理程序中，您必须处理响应并使用它做任何您想做的事情。

检查此链接[使用 WebClient 和 HttpWebRequest](http://blogs.msdn.com/b/silverlight_sdk/archive/2008/04/01/using-webclient-and-httpwebrequest.aspx)

# twitter-bootstrap - 流星中的引导包是否包含引导工具提示？

> ID：14432835
> 
> 赞同：9
> 
> 时间：2013-01-21T04:59:54.573
> 
> 标签：twitter-bootstrap, meteor

我`meteor add bootstrap`在控制台中这样做，这是否添加了引导工具提示 javascript？如果不是我如何添加它？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-21T08:32:15.390

是的，引导插件包括工具提示！我自己用它。bootstrap 的工具提示需要注意的一点是，由于性能问题，它不能像许多其他功能一样单独在 HTML 上运行。每个工具提示都必须手动初始化，您可以`.tooltip()`在要工具提示的元素上使用 jquery

例如在您的 html 文件中的模板中

```
<template name="myTemplate">
    <a href="#" rel="tooltip" title="first tooltip">hover over me</a><br/>
    <a href="#" rel="tooltip" title="second tooltip">hover over me</a><br/>
    <a href="#" rel="tooltip" title="third tooltip">hover over me</a><br/>
</template> 
```

并在 javascript 文件中使用以下内容来初始化工具提示

```
Template.myTemplate.rendered = function() {
   $('a[rel=tooltip]').tooltip() //initialize all tooltips in this template
}; 
```

不要`<script>`像各种教程中建议的那样将标签放在模板中，因为流星会在 javascript 文件中处理这个问题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T05:07:42.503

是的。当您. [_](http://twitter.github.com/bootstrap) `meteor add bootstrap`调试或部署时，所有必需的 js 和 css 文件都将与您的项目捆绑在一起。添加后，您可以简单地开始使用 api：

```
Template.myTemplate.rendered = function() {
   $('#element').tooltip('show')
}; 
```

请注意，您可能想要探索[大气](http://atmosphere.meteor.com)存储库以获取更新的引导选项，包括`bootboxjs`和`bootstrap-updated`项目。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T05:04:56.550

您可以在 Github 上的 Meteor 存储库中查看包中包含哪个特定版本的 Bootstrap：

[https://github.com/meteor/meteor/tree/master/packages/bootstrap/js](https://github.com/meteor/meteor/tree/master/packages/bootstrap/js)

它似乎确实包含引导工具提示。

# android - 如何根据语音命令打开Activity

> ID：14432836
> 
> 赞同：3
> 
> 时间：2013-01-21T04:59:56.820
> 
> 标签：android, voice, voice-recognition

我正在做仪表板应用程序，其中有很多屏幕。当用户根据我需要打开活动来告诉语音命令时。我不知道从哪里开始我已经完成了所有的屏幕，我想实现语音搜索。我的应用程序屏幕是预付款、请假、招聘、权限、通知等示例：当用户说“预付款”时，它应该打开预付款屏幕。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T06:01:12.840

1）启动语音识别意图

2）在onActivityResult()中处理返回的数据来决定启动哪个activity

**1.启动语音识别意图**

```
Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
intent.putExtra(RecognizerIntent.EXTRA_PROMPT, "Choose Activity");
startActivityForResult(intent, REQUEST_SPEECH); 
```

**2.处理返回的数据**

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data){
        if (requestCode == REQUEST_SPEECH){
            if (resultCode == RESULT_OK){
                ArrayList<String> matches = data
                    .getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);

                if (matches.size() == 0) {
                    // didn't hear anything
                } else {
                    String mostLikelyThingHeard = matches.get(0);
                    // toUpperCase() used to make string comparison equal
                    if(mostLikelyThingHeard.toUpperCase().equals("ADVANCES")){
                        startActivity(new Intent(this, Advances.class));
                    } else if() {
                    }
                }
            }
        }

        super.onActivityResult(requestCode, resultCode, data);
    } 
```

# javascript - 如何安装 ZeroClipboard？

> ID：14432838
> 
> 赞同：2
> 
> 时间：2013-01-21T05:00:09.490
> 
> 标签：javascript

根据他们网站上的说明：[https ://github.com/jonrohan/ZeroClipboard/blob/master/docs/instructions.md](https://github.com/jonrohan/ZeroClipboard/blob/master/docs/instructions.md)

我复制并粘贴了页面底部的最小示例，并复制了 2 个文件

ZeroClipboard.swf & ZeroClipboard.js

进入我网站的根目录。

我似乎无法让按钮工作。我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-03T19:46:31.283

在基本示例中，您需要包含 ZeroClipboard.js 脚本。我补充说：

```
<script src="ZeroClipboard.js"></script> 
```

到 html 头部分。然后 - 这对我来说也不是很清楚 - main.js 脚本需要在按钮之后添加。我没有引用该文件（据我所知，该文件不在包中），而是直接包含了脚本-这样：

```
<button id="copy-button" data-clipboard-text="Copy Me!" title="Click to copy me.">Copy to Clipboard</button>

<script type="text/javascript">
    var client = new ZeroClipboard( document.getElementById("copy-button") );

    client.on( "ready", function( readyEvent ) {
    // alert( "ZeroClipboard SWF is ready!" );

    client.on( "aftercopy", function( event ) {
    // `this` === `client`
    // `event.target` === the element that was clicked
    event.target.style.display = "none";
    alert("Copied text to clipboard: " + event.data["text/plain"] );
  } );
} );
</script> 
```

希望这可以帮助某人（我猜你已经解决了一年多或继续前进！！）

# linux - 如何删除vim中每一行的第一个字符串？

> ID：14432842
> 
> 赞同：1
> 
> 时间：2013-01-21T05:00:28.677
> 
> 标签：linux, text-editor, vi

我有一个长达数千行的文本文件。每行都以一串 8 个十六进制数字开头。我需要在每一行上删除这个字符串。我如何在 vim 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T05:03:47.673

用空字符串替换任何行上的前 8 个十六进制字符（0-9 位，af/AF 字母）：

```
 :%s/^[0-9a-fA-F]\{8\}//gc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T05:04:07.460

用于`^V`块选择，突出显示您的八列，然后照常删除。

或使用`:s`：

```
:%s/\v^[a-fA-F0-9]{8}// 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T05:04:22.200

如果线路是

```
12345678 Something else 
```

在 VIM 中，每行的开头总共要删除 9 个字符

```
:1,$s/^.........// 
```

应该做的伎俩（9个点），

*   `:`告诉 vim 你想输入一个命令
*   `1,$`表示命令影响从第 1 行到最后（或`g`全局）
*   `s`意味着替代
*   `^`表示行首
*   `.....`表示 5 个（任意）字符
*   `s/^.....//`表示将行首的 5 个字符替换为空

*编辑*以匹配问题中的十六进制字符数..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-11T13:06:09.197

使用`cut`命令。这种方式更**直接。**

```
echo '12345678 Something else' | cut -c 10- 
```

结果：

```
Something else 
```

提醒一下，`cut`索引字符串从 1 而不是 0 开始。

在中`vi`，我们可以运行：`cut``vi`

```
:%!cut -c 10- 
```

# xml - 如何使用 R 处理 XML 中的两步转换？

> ID：14432845
> 
> 赞同：-1
> 
> 时间：2013-01-21T05:00:41.837
> 
> 标签：xml, r, markup

我正在使用 R（XML 包）解析一个 xml。XML 有以下标记。

```
 <  &lt;
 >  &gt;
 &  &amp;

Input Text: 
       My age is &amp;gt; 65 years years. 

       output: My age is gt;65 years. 
```

预期输出：我的年龄>65 岁。

```
 How to get 2-step(1) for converting &amp; into & (2)  &gt; into '>' ? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T06:34:34.453

```
sub("&gt;" , ">", 
          sub("(&amp;)", "&", 
                "My age is &amp;gt; 65 years.") )
[1] "My age is > 65 years." 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T07:27:51.107

你可以写一个这样的函数

```
batchgsub <- function(patternmatrix, string) {
    for (i in 1:nrow(patternmatrix)) {
        p = patternmatrix[i,1]
        r = patternmatrix[i,2]
        string <- gsub(p,r,string)
    }
    return(string)
} 
```

并像这样指定要替换的模式

```
> pm
     [,1]    [,2]
[1,] "&amp;" "&" 
[2,] "&gt;"  ">" 
```

然后，您可以根据需要多次“链接”替换。

```
> s <- "My age is &amp;gt; 65 years."
> batchgsub(pm, s)
[1] "My age is > 65 years." 
```

# java - 返回布尔值的问题

> ID：14432848
> 
> 赞同：0
> 
> 时间：2013-01-21T05:01:36.143
> 
> 标签：java, nullpointerexception

在 Java 中使用 RESTful Web 服务时。我无法返回布尔值。在此代码中，我正在检查重复项。如果存在重复，它应该脱离循环。如果不是，它应该进一步进行插入。在这种情况下，我的 ELSE 部分工作正常。但是 IF 循环无法显示错误这是我的一段代码。

**代码**

```
 public  Boolean addCategory(String catname,String parentid)throws Exception {
            PreparedStatement pst = null;
            boolean resultdata = false;
            boolean resultdata1 = false;
            ResultSet rst=null;
            Statement st = null;
            int flag = 0;
            String sql,sql1 = null;
            try {
                con = getConnection();
                st = con.createStatement();
                sql1="select * from xxx where parent_id='"+parentid+"' and category_description='"+catname+"'";
                    System.out.println("Checks for Duplicate Catgory");
                    rst = st.executeQuery(sql1);
                    System.out.println("ResultSet"+rst);
                        if(rst!=null&&rst.next()){
                        String catname1=(String) rst.getObject("category_description");
                        System.out.println("Category description : "+catname1);
                        System.out.println("Duplicate value is trying to get inserted");
                        return resultdata1;
                    }
else{

/** Is working fine
} 
```

**控制台错误报告**

```
Database connection -->
Database established
Checks for Duplicate Catgory
ResultSetcom.mysql.jdbc.JDBC4ResultSet@1c1eceb
Category description : Test3
Duplicate value is trying to get inserted
Jan 21, 2013 10:23:23 AM com.sun.jersey.spi.container.ContainerResponse mapMappableContainerException
SEVERE: The RuntimeException could not be mapped to a response, re-throwing to the HTTP container
java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:23:36.680

仔细检查 addCategory(ParentEntity.java:157) 处的代码。如果您使用任何 finally 块，也请检查它。

# python - 使用正则表达式创建 Python 类

> ID：14432849
> 
> 赞同：0
> 
> 时间：2013-01-21T05:01:39.667
> 
> 标签：python, regex, class

我为新手的问题道歉，但这是我第一次使用课程。我正在尝试创建的类旨在对字典中的所有键和值执行正则表达式查找和替换。具体的查找和替换是在实例化时定义的。

我有两个问题。第一个问题是类的每个实例都需要接受一个新字典。我不清楚如何创建一个接受通用字典的类，我可以在创建实例时指定它。第二个问题是我的课程根本不起作用。我`TypeError: expected string or buffer`在类行中收到错误消息`v = re.sub(self.find,self.replace,v)`。

我要创建三个实例，每个输入字典一个：`input_iter1`、`input_iter2`和`input_iter3`。

以下是类：

```
class findreplace:
    values = []
    keys = []
    def __init__(self, find, replace):
        self.find = find
        self.replace = replace
    def value(self):
        for k,v in input_iter1.items():
            v = re.sub(self.find,self.replace,v)
            findreplace.values.append(v)
    def key(self):
        for k,v in input_iter1.items():
            k = re.sub(self.find,self.replace,k)
            findreplace.keys.append(k) 
```

以下是实例：

```
values1 = findreplace('[)?:(]','')
values1.value()
values2 = findreplace(r'(,\s)(,\s)(\d{5})({e<=1})',r'\2\3')
values2.value()
keys1 = findreplace(r'(?<=^)(.+)(?=$)',r'(?:\1)')
keys1.key()
keys2 = findreplace(r'(?=$)',r'{e}')
keys2.key()

print values
print keys 
```

如果有人对我如何解决这两个问题有任何见解，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T05:11:50.933

首先，Python 2 的类应该这样开始：

```
class Foo(object): 
```

否则，你会得到一个“老式课程”，这是一种没有人使用的古老硬壳。

此外，Python 中的类名通常以`CamelCase`.

其次，**不要**使用可变值（如列表！）作为类属性，就像您在这里使用`keys`and所做的那样`values`。它们将在您班级的所有实例中共享！看起来您甚至都知道这一点，因为您`findreplace.keys`直接引用，但是将特定于实例的值存储在这样的类属性中是没有意义的。

但是，最重要的是：为什么这是一个类？a`findreplace` *代表*什么？如果它只是一个函数，看起来会更清楚。

* * *

要回答您的实际问题：

1.  你传入一个字典，就像你传入`find`and一样`replace`。向 中添加另一个参数`__init__`，并在构造类时传递另一个参数。

2.  据推测，您得到的是`TypeError`因为字典中的一个值不是字符串，并且您只能对字符串执行正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T05:10:38.917

您对 input_iter 字典的定义在哪里？他们看起来怎么样？您的错误表明您的 dicts 的值不是字符串。

# git - 如何理解 Git 的命令语法？

> ID：14432850
> 
> 赞同：1
> 
> 时间：2013-01-21T05:01:43.990
> 
> 标签：git, version-control

作为 Windows 用户，我正在使用带有 Git和[Pro Git](http://git-scm.com/book)[的版本控制](https://rads.stackoverflow.com/amzn/click/com/B008Y4OR3A)来学习 Git 。不幸的是，没有一本书，也没有 Git 官方手册，解释了如何正确构建/编写 Git 命令。是否有 Git 命令语法的指南？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T06:39:34.633

1.  您无法想象/预测 Git 命令的完全正确语法
2.  手册（形式`git help <COMMAND>`）**是必须的，任何时候，所有情况**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T06:40:24.753

Git 的内置文档非常棒。大多数问题通常可以像这个例子一样解决

```
git commit --help 
```

这将打开该命令的手册页。这些页面非常冗长，通常会有部分

```
NAME
SYNOPSIS
DESCRIPTION
OPTIONS
EXAMPLES
DISCUSSION
ENVIRONMENT AND CONFIGURATION VARIABLES 
```

# python - Python - Pygame - 获取是否正在播放特定的声音

> ID：14432851
> 
> 赞同：2
> 
> 时间：2013-01-21T05:01:49.557
> 
> 标签：python, audio, pygame

Pygame 的混合器模块`pygame.mixer.get_busy`返回一个简单的布尔值。
我的问题是我一直在播放声音，例如爆炸和枪声，并且需要知道何时播放特定声音以防止游戏对话重叠。

我考虑过列出当前正在播放的对话，创建一个计时器，在触发每个声音时倒计时，但这需要我在主游戏循环中添加声音效果（我处理声音的模块）更新。
这看起来很混乱，就像一个巨大的减速。

有没有更清洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T07:44:45.540

您可以使用通道对象。

在频道中播放特定类型的音频并检查声音是否正在播放。

```
import pygame

def main(filepath):
    pygame.mixer.init()

    # If you want more channels, change 8 to a desired number. 8 is the default number of channel

    pygame.mixer.set_num_channels(8)

    # This is the sound channel
    voice = pygame.mixer.Channel(5)

    sound = pygame.mixer.Sound(filepath)

    voice.play(sound)

    if voice.get_busy():
        #Do Something 
```

# c# - 如何将xml元素转换为字符串

> ID：14432852
> 
> 赞同：0
> 
> 时间：2013-01-21T05:01:58.810
> 
> 标签：c#, asp.net, xml

下面是我的代码：我在 putContactResponse 中得到 XML 响应，我想将其节点转换为字符串

```
if (putContactResponse != string.Empty)
    {
        var responseElement = XElement.Parse(putContactResponse);
        string statusCode = responseElement.XPathSelectElement("/Status").Value;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T05:03:57.503

如果内容是文本，这将获取元素的内容：

```
responseElement.Value 
```

这将以 XML 格式获取元素的内容：

```
responseElement.InnerXML 
```

这将获取元素及其内容作为 XML

```
responseElement.OuterXML 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T06:26:14.007

XElement 有一个属性 FirstNode 和 NextNode，您可以在 responseElement 上使用它来获取节点。

否则，您可以使用 XElement.Name 和 XElement.Value 属性来获取 XPathSelectElement 之后的值

# ios - 我如何分别获得 iPhone / iPad 的 Wifi 和 GPRS (GSM) 的总下载数据

> ID：14432856
> 
> 赞同：1
> 
> 时间：2013-01-21T05:02:12.833
> 
> 标签：ios

如何获得总下载字节数以及我如何知道使用 wifi 下载了多少字节以及使用 GSM（iPhone + iPad）下载了多少？

**提前致谢。**

**穆扎马尔·侯赛因。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:02:41.333

您将需要使用 NSURLConnection 的以下委托方法：

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
// Append the new data to receivedData.
// receivedData is an instance variable declared elsewhere.
[receivedData appendData:data];
} 
```

通过这种方式，您可以在一个变量中获得 NSData。然后你可以在委托方法中获取它的大小：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
```

或者

```
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error 
```

在这条线的帮助下：

```
NSLog(@"Data downloaded==%d",receivedData.length); 
```

希望这可以帮助。

# ruby - 具有对象属性的 Ruby 对象

> ID：14432858
> 
> 赞同：0
> 
> 时间：2013-01-21T05:02:23.753
> 
> 标签：ruby, rake, ruby-on-rails-2

我有一个使用[AWS S3 gem](http://amazon.rubyforge.org/)的类，并且在我的类中有几个使用 gem 的方法。我的问题是，我不想在多个位置配置它，而是想让它成为我的对象的属性。

在 PHP 中，我们会这样做；

```
<?php
  class myClass {

    private $obj;

    public function __construct() {
      $this->obj = new Object();
    }
  }
?> 
```

然后我可以在 myClass 的任何地方使用 $this->obj->method()。

我很难像在 ruby​​ 中工作一样。

我的情况与此类似；

```
require 'aws/s3'

class ProfileVideo < ActiveRecord::Base

  def self.cleanup

    # <snip> YAML load my config etc etc

    AWS::S3::Base.establish_connection!(
      :access_key_id     => @aws_config['aws_key'],
      :secret_access_key => @aws_config['aws_secret']
    )      

  end

  def self.another_method
    # I want to use AWS::S3 here without needing to establish connection again
  end

end 
```

我还注意到，在我的课堂上，初始化无法执行——一个简单的“把“放在这里””什么也没做。考虑到这是一项 rake 任务，我可以将“这里”放在其他方法中。我不确定 rake 是否不像运行 ProfileVideo.new 那样初始化？

无论如何，提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:34:18.977

我特别不熟悉 S3 gem，但这里有几种方法可以解决这个问题。

如果您只是想让建立连接更容易，您可以在模型中创建一个方法，如下所示：

```
def open_s3
  return if @s3_opened
  AWS::S3::Base.establish_connection!(
    :access_key_id     => @aws_config['aws_key'],
    :secret_access_key => @aws_config['aws_secret']
  )
  @s3_opened = true
end 
```

然后你可以`open_s3`在任何需要它的方法的顶部调用它，它只会打开一次。

您可以采取的另一条路线是将连接代码放在设置为在任何其他钩子之前触发的前钩子中（IIRC，您定义它们的顺序设置它们触发的顺序），然​​后进行调用。

无论哪种情况，我都建议不要将您的 AWS 密钥和密码放入您的代码中。相反，那些应该进入配置文件的配置文件会被您的版本控制系统忽略，并在部署时为远程系统生成。

# php - 在 PHP 中使用 strrpos()

> ID：14432860
> 
> 赞同：3
> 
> 时间：2013-01-21T05:02:43.870
> 
> 标签：php

> **可能重复：**
> [如何使 strpos 不区分大小写](https://stackoverflow.com/questions/6795383/how-to-make-strpos-non-case-sensitive)

我正在测试一个字符串是否包含文本“喜欢的人”。好吧，代码效果很好！除了它是区分大小写的。我能做些什么来防止这种情况发生？

如果字符串是“喜欢跑步的人”，则返回 false 如果字符串是“喜欢跑步的人”，则返回 true

我希望它不区分大小写。

代码：

```
<?php

$string = "People who like to run";

if (strrpos($string, 'People who like') === false) {
    echo "False";
}
else {
    echo "True";
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-21T05:04:57.710

请参阅[`strripos`](http://php.net/manual/en/function.strripos.php)的不区分大小写版本`strrpos`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-21T05:03:50.610

改用[strripos](http://php.net/manual/en/function.strripos.php) _

或者

在测试之前对字符串使用 strtolower

```
$string = "People who like to run";

if (strrpos(strtolower($string), strtolower('People who like')) === false) {
    echo "False";
}
else {
    echo "True";
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-21T05:04:52.543

使用 strripos 进行不区分大小写的匹配

# mongodb - 如何在pymongo中获取具有map-reduce字段最大值的文档？

> ID：14432862
> 
> 赞同：15
> 
> 时间：2013-01-21T05:02:55.920
> 
> 标签：mongodb, mapreduce, field, max, pymongo

如何`uid`在 pymongo 中使用 map-reduce 找到具有最大字段的文档？

我尝试了以下方法，但它打印出空白：

```
from pymongo import Connection
from bson.code import Code

db = Connection().map_reduce_example
db.things.insert({  
    "_id" : "50f5fe8916174763f6217994", 
    "deu" : "Wie Sie sicher aus der Presse und dem Fernsehen wissen, gab es in Sri  Lanka mehrere Bombenexplosionen mit zahlreichen Toten.\n", 
    "uid" : 13, 
    "eng" : "You will be aware from the press and television that there have been a  number of bomb explosions and killings in Sri Lanka." 
})

db.things.insert({  
    "_id" : "50f5fe8916234y0w3fvhv234", 
    "deu" : "Ich bin schwanger foo bar.\n", 
    "uid" : 14, 
    "eng" : "I am pregnant foobar." 
})

db.things.insert({  
    "_id" : "50f5fe8916234y0w3fvhv234", 
    "deu" : "barbar schwarz sheep, haben sie any foo\n", 
    "uid" : 14, 
    "eng" : "barbar black sheep, have you any foo" 
})

m = Code("function () {emit(this.uid,{'uid':this.uid,'eng':this.eng})}")

r = Code("function (key, values) {var total = 0;for (var i = 0; i < values.length; i++) {total += values[i];}return total;}")

result = db.things.inline_map_reduce(m, r)

for r in result:
    print 
```

如下所示的示例文档：

```
{ 
    "_id" : ObjectId("50f5fe8916174763f6217994"), 
    "deu" : "Wie Sie sicher aus der Presse und dem Fernsehen wissen, gab es mehrere Bombenexplosionen mit zahlreichen Toten.\n", 
    "uid" : 13, 
    "eng" : "You will be aware from the press and television that there have been a 
             number of bomb explosions and killings." 
} 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-21T06:19:58.760

您可以通过按降序对该字段进行排序[`find_one`](http://api.mongodb.org/python/current/api/pymongo/collection.html#pymongo.collection.Collection.find_one)来查找具有最大值的文档：`uid`

```
db.things.find_one(sort=[("uid", -1)]) 
```

或使用定义的常量：

```
db.things.find_one(sort=[("uid", pymongo.DESCENDING)]) 
```

# ruby-on-rails - 如何调整 date_select / time_select 字段大小

> ID：14432863
> 
> 赞同：0
> 
> 时间：2013-01-21T05:02:57.043
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我一直在尝试调整表单字段的大小。我试过像这样使用大小......

```
<%= f.date_select(:form_date, order: [:month, :day, :year], prompt: { month: 'Select Month', day: 'Select Day', year: 'Select Year' }, start_year: 2000, size: 1) %> 
```

我是否只是按错误的顺序输入尺寸（尺寸：1 不应该是最后一个）？这在我的样式表中处理得最好吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:18:31.027

原来我正在混合选项和 html_options

```
date_select(object_name, method, options = {}, html_options = {}) Link 
```

这是我将代码行从上面更改为...

```
<%= f.date_select(:form_date, options = { order: [:month, :day, :year], prompt: { month: 'Select Month', day: 'Select Day', year: 'Select Year' }, start_year: 2000 }, html_options = { size: 1 }) %> 
```

# function - 如何从函数中获取数据值？

> ID：14432872
> 
> 赞同：1
> 
> 时间：2013-01-21T05:03:48.060
> 
> 标签：function, get, gnuplot

我有一个问题，如何从 gnuplot 中的函数获取数据值？例如我做

```
plot [0:pi] sin(x) 
```

但我想从这个图中获取数据值，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:28:07.253

您可以使用[表格模式](http://www.gnuplot.info/docs_4.2/gnuplot.html#x1-27000043.61)。

```
set samples 100
set table "sin.dat"
plot [0:pi] sin(x) 
```

# function - 如何在 Haskell 中从 a -> IO b 创建一个 IO (a->b) 函数

> ID：14432883
> 
> 赞同：3
> 
> 时间：2013-01-21T05:04:56.170
> 
> 标签：function, haskell, tree, monads

我想编写一个函数，可以在 Haskell 中以广度优先递归方式列出目录。如您所见，我需要一个可以将 a (a -> IO b) 转换为 IO (a->b) 的函数。看起来很简单，我做不到。我想知道该怎么做或是否有可能。

```
dirElem :: FilePath -> IO [FilePath]
dirElem dirPath = do
  getDirectoryContents'' <- theConvert getDirectoryContents'
  return $ takeWhile (not.null) $ iterate (concatMap getDirectoryContents'') [dirPath] where
    getDirectoryContents' dirPath = do
      isDir <- do doesDirectoryExist dirPath
      if isDir then dirContent else return [] where
        dirContent = do
          contents <- getDirectoryContents dirPath
          return.(map (dirElem</>)).tail.tail contents
    theConvert :: (a -> IO b) -> IO (a -> b)
    theConvert = ?????????? 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T08:30:48.850

通常，您不能以纯方式执行此操作，但是如果您可以枚举所有参数值，则可以预先执行所有 IO 并返回纯函数。就像是

```
cacheForArgs :: [a] -> (a -> IO b) -> IO (a -> b)
cacheForArgs as f = do
    bs <- mapM f as
    let abs = zip as bs
    return $ \ a -> fromMaybe (error "argument not cached") $ lookup a abs

cacheBounded :: (Enum a, Bounded a) => (a -> IO b) -> IO (a -> b)
cacheBounded = cacheForArgs [minBound .. maxBound] 
```

但是这个函数在你的用例中并没有真正帮助你。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-21T21:16:25.473

**这是无法做到的。**原因是该函数可以使用其类型参数`a`来确定`IO`执行什么操作。考虑

```
action :: Bool -> IO String
action True  = putStrLn "Enter something:" >> getLine
action False = exitFailure 
```

现在，如果您以某种方式将其转换为`IO (Bool -> String)`并评估此操作，会发生什么？没有解决办法。我们无法决定是否应该读取字符串或退出，因为我们还不知道`Bool`参数（如果结果函数没有在参数上调用，我们可能永远都不知道）。

约翰的回答是个*坏*主意。它只是让 IO 动作逃逸到纯粹的计算中，这将使您的生活变得悲惨，并且您将失去 Haskell 的引用透明性！例如运行：

```
main = unsafe action >> return () 
```

即使调用了 IO 操作，也不会执行任何操作。此外，如果我们稍微修改一下：

```
main = do
   f <- unsafe action
   putStrLn "The action has been called, calling its pure output function."
   putStrLn $ "The result is: " ++ f True 
```

您会看到`action`请求输入的`f`. 您无法保证何时（如果有的话）执行该操作！

**编辑：**正如其他人指出的那样，它不仅仅针对`IO`. 例如，如果 monad 是`Maybe`，则您无法实现`(a -> Maybe b) -> Maybe (a -> b)`. 或者`Either`，您无法实施`(a -> Either c b) -> Either c (a -> b)`. 关键始终是，`a -> m b`我们可以根据 选择不同的效果`a`，而`m (a -> b)`效果必须是固定的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-21T10:47:32.737

您无法以安全的方式创建此类功能。假设我们有`f :: a -> IO b`和`g = theConvert f :: IO (a -> b)`。它们是两个非常不同的函数`f`，一个函数接受一个类型的参数`a`并返回一个`IO`带有结果的动作`b`，其中 io-action 可能取决于给定的参数。`g`另一方面是一个`IO`作为结果函数`a->b`的动作，io-action 不能依赖于任何参数。现在来说明这个问题让我们看看

```
theConvert putStr :: IO (String -> ()) 
```

现在它运行时应该做什么，它当然不能打印给定的参数，因为它没有参数。因此，与 putStr 不同的是，它只能执行一项操作，然后返回一些 type 的函数`String -> ()`，该函数只有一个选项`const ()`（假设不使用`error`or `undefined`）。

* * *

就像一面不一样，也可以反过来做，它增加了结果动作取决于论点的概念，而实际上并非如此。它可以写成

```
theOtherConvert :: IO (a -> b) -> (a -> IO b)
theOtherConvert m x = m >>= \f -> return $ f x 
```

尽管它适用于任何 monad，或以应用形式`theOtherConvert m x = m <*> pure x`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-21T23:56:14.850

Petr Pudlák 的回答非常好，但我觉得它可以通过从 中抽象出来，并从和类型类`IO`的角度来看待它。`Applicative``Monad`

`Applicative`考虑来自和的“组合”操作的类型`Monad`：

```
(<*>) :: Applicative m => m (a -> b) -> m a -> m b
(>>=) :: Monad m => m a -> (a -> m b) -> m b 
```

所以你可以说你的类型`a -> IO b`是“monadic”而`IO (a -> b)`“applicative”——这意味着你需要monadic操作来组成看起来像的类型`a -> IO b`，但只有适用于`IO (a -> b)`

`Monad`和之间的“功率”差异有一个众所周知的直观陈述`Applicative`：

*   应用计算具有固定的静态结构；将执行哪些操作、执行的顺序以及组合结果的方式是提前知道的。
*   一元计算没有这样固定的静态结构；一元计算可以检查其子操作之一的结果值，然后在执行时在不同的结构之间进行选择。

彼得的回答就是对这一点的具体说明。我将重复他的定义`action`：

```
action :: Bool -> IO String
action True  = putStrLn "Enter something:" >> getLine
action False = exitFailure 
```

假设我们有`foo :: IO Bool`. 然后，当我们编写将' 参数`foo >>= action`绑定到' 结果时，生成的计算不亚于我的第二个要点描述的内容；它检查执行结果，并根据其值在替代操作之间进行选择。这正是使您无法做到的事情之一。除非您同时预先确定要采用哪个分支，否则您不能 Petr进入。`action``foo``foo``Monad``Applicative``action``IO (Bool -> String)`

类似的评论适用于augustss 的回应。通过要求提前指定值列表，它所做的是让您提前选择要采用的分支，将它们全部取出，然后允许您在它们的结果之间进行选择。

# c# - System.Collections.IDictionary 不包含“设置”的定义？

> ID：14432886
> 
> 赞同：4
> 
> 时间：2013-01-21T05:04:58.023
> 
> 标签：c#, wpf

```
 public partial class App : Application
    {
        private void OnExit(object sender, ExitEventArgs e)
        {
            Properties.Settings.Default.save();
        }
    } 
```

如何解决这个问题？有什么地方需要“注册”我的设置吗？挥动线位于设置下方。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T05:12:11.350

Properties.Settings 可用于您的应用程序。您必须使用应用程序名称空间引用属性。

```
WpfApplication1.Properties.Settings.Default.Save(); 
```

`WpfApplication1`您的应用程序的命名空间在哪里。

# html - td 的最大宽度 50%

> ID：14432888
> 
> 赞同：5
> 
> 时间：2013-01-21T05:05:02.757
> 
> 标签：html, css

**HTML**

```
<table>
    <tr>
        <td>td1td1td1td1 td1td1td1td1td1td1td1td1td1td1td1</td>
        <td>td2</td>
    </tr>
</table> 
```

**CSS**

```
td{
    border:black thin solid;
    max-width:50%;
}
table{
    width:100%
} 
```

我想设置 to 的最大宽度`td`，`50%`但它对我不起作用......
希望有人能帮助解决这个问题。

请查看输出：http: [//jsfiddle.net/38bf2/](http://jsfiddle.net/38bf2/)

**PS**
我已经尝试通过 Chrome 和 Firefox 查看结果。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-21T05:06:54.770

添加`table-layout:fixed;`. 将表格上的 CSS 更改为：

```
table{
    width:100%;
    table-layout:fixed;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/38bf2/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T05:08:49.047

使用以下代码

```
td{
    border:black thin solid;
    max-width:50%;
    width:50%;
}
table{
    width:100%;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T05:07:49.400

而不是`max-width`尝试`width:50%;`

# java - Java 泛型的新手 - 为什么泛型中有返回类型为 void 的类型？

> ID：14432895
> 
> 赞同：0
> 
> 时间：2013-01-21T05:05:38.387
> 
> 标签：java

我是 JAVA 泛型的新手，返回类型为 void 但他们为什么要给出类型。

```
public static <U> void addBox(U u,List<Box<U>> boxes){
    Box<U> box = new Box<U>();
    box.setT(u);
    boxes.add(box);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T05:08:41.650

`<U>`不是返回类型。它声明这`U`是一个泛型类，将在方法的参数和方法体中使用。

[您可以在此处](http://docs.oracle.com/javase/tutorial/extra/generics/methods.html)阅读有关泛型方法及其语法的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T05:08:59.683

是为输入参数定义的，而不是返回类型。之所以在这里声明，是因为它是在方法级别定义的，而不是像类 Abc 那样的类级别

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T06:15:07.727

我建议阅读[有效的 Java](https://rads.stackoverflow.com/amzn/click/com/0321356683)，. 作者 Joshua Bloch 在第 5 章中给出了很好的插图。

# sql - Rails 嵌套资源连接安全最佳实践

> ID：14432897
> 
> 赞同：1
> 
> 时间：2013-01-21T05:05:40.283
> 
> 标签：sql, ruby-on-rails, security, ruby-on-rails-3.2

我开始了一个新项目，该项目要求帐户能够查看其候选人和相关任务。

帐号.rb

```
has_many :candidates 
```

候选人.rb

```
has_many :tasks
belongs_to :account 
```

任务.rb

```
belongs_to :candidate 
```

路由设置为允许 /candidates/4/tasks/3 帐户 X 可以访问具有任务 3 的候选人 4。

tasks_controller.rb 目前是这样的：

```
def show
  @task = Task.find params[:id]
end 
```

**问题：确保其他帐户无权访问任务 3 的最佳做法是什么？**

一个想法可能是这样的，但看起来很混乱：

```
def show
  @task = Account.find(current_account).candidates.find(params[:candidate_id]).tasks.find(params[:id)
end 
```

因此，如果加入失败，您将无权访问。

另一种方法可以使用**scopes**来完成。您确保所有查询的任务都与候选人和 current_account 连接。

我还可以做一个**before_filter**对候选表进行独立查询，以检查该帐户是否具有访问权限。这将添加一个额外的查询，因此并不理想。

我在这里胡扯...但很想知道其他人是怎么做的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T06:35:35.387

用铁轨做...

current_account = Account.find 参数[:id]

@tasks = current_account.candidates.collect(&:tasks)

这将完成你的工作。

# c# - AjaxCalendar Extender 在 Chrome、Firefox 或 Safari 中不显示星期六

> ID：14432898
> 
> 赞同：3
> 
> 时间：2013-01-21T05:05:46.930
> 
> 标签：c#, google-chrome, firefox, safari, calendarextender

在项目中使用 CalendarExtender 有点麻烦。基本上，它不会在 Chrome、Firefox 或 Safari 中显示星期六，而是在 IE 中完美显示它们。显然，这有点问题。

我试过塞满 CSS 无济于事，所以我来这里寻求帮助！周六有，但没有显示，就像这张照片（由于我的新手，我不允许直接发布图片！）：

[http://i.neoseeker.com/mgv/385085/85/87/calendarerror_display.png](http://i.neoseeker.com/mgv/385085/85/87/calendarerror_display.png)

希望你能在图片中看出来，但实际上我确实选择了星期六，正如弹出窗口所证实的那样，但它没有用。

这是代码，希望这可以让我了解我做错了什么 D：

```
<div id="left">
<h1>FIND EVENT</h1>
<br />
<asp:TextBox ID="txtFind" runat="server" AutoPostBack="True" CssClass="txt" OnTextChanged="txtFind_TextChanged" Width="175px" ForeColor="#999999">Click to Find Date</asp:TextBox>  
<asp:CalendarExtender ID="calFindDate" runat="server" TargetControlID="txtFind" Format="dd/MM/yyyy"></asp:CalendarExtender> 
<br />
<asp:ListBox ID="lstbxFind" runat="server" AutoPostBack="True" Height="390px"     Width="182px" OnSelectedIndexChanged="lstbxFind_SelectedIndexChanged"></asp:ListBox>
<br />
<asp:LinkButton ID="lnkbtnNew" runat="server" CssClass="lnk" OnClick="lnkbtnNew_Click">New</asp:LinkButton>
<asp:LinkButton ID="lnkbtnDelete" runat="server" CssClass="lnk" OnClientClick="return confirm('Are you sure you want to delete this fixture event?')"                              onclick="lnkbtnDelete_Click">Delete</asp:LinkButton>
 <div id="email" runat="server" class="confirm">Event Saved</div>
 <asp:LinkButton ID="lnkbtnSave" runat="server" CssClass="lnk" OnClick="lnkbtnSave_Click" ValidationGroup="Group1">Save</asp:LinkButton>
 <br />  
 <br />
 <!-- <br />       
 <asp:Label ID="Label1" runat="server" ForeColor="#F6F6F6" Text="Label"></asp:Label>-->
 </div> 
```

希望这对某人有意义，并且至少可以为我指明正确的方向。我对 C# 和诸如此类的东西很陌生，所以我肯定在这里学习工作！谢谢。

# android - 在 onSaveInstanceState() 中设置标志以确定 onDestroy() 中的退出类型

> ID：14432902
> 
> 赞同：8
> 
> 时间：2013-01-21T05:06:01.723
> 
> 标签：android, android-activity

对于在线游戏，很高兴知道 Android`Activity`的 onDestroy() 是否仅因为 Android 将重新创建它（例如设备旋转）或用户选择退出游戏而被调用。

我的计划是在 Android 可能正在重新创建时在`Activity`'s中设置一个标志：`onSaveInstanceState()``Activity`

```
private boolean mDestroyedForReCreation;
...
protected void onSaveInstanceState() {
    ...
    mDestroyedForReCreation = true;
} 
```

如果你这样做了，你可以签`mDestroyedForReCreation`入`onDestroy()`：

*   如果设置了标志 (true)，请不要将用户从在线游戏中解散。
*   如果该标志未设置（假），则将用户从在线游戏中移除，因为他确实自愿退出了游戏。

这是一个正确的方法吗？如果是，是否推荐或有更好的解决方案？我希望如此，因为我真的不喜欢那个解决方案......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T10:06:17.590

I suggest you to remove such kind of game logic from activity's life cycle. Create a Service. If no one binded - all activities are dead. Is someone binded - keep working.

If you do not want to create service, you can use [onRetainNonConfigurationInstance](http://developer.android.com/reference/android/app/Activity.html#onRetainNonConfigurationInstance%28%29) method. [Here is example](https://stackoverflow.com/questions/7295804/is-that-possible-to-check-was-oncreate-called-because-of-orientation-change).

You should use onRetainNonConfigurationInstance because it is called by the system, as part of destroying an activity due to a configuration change, when it is known that a new instance will **immediately** be created for the new configuration. onSaveInstanceState called when android going to kill activity and maybe restore it sometimes or maybe not ).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T12:44:06.060

您可以通过代码处理此配置更改来简单地避免轮换重新启动。你可以这样做`Manifest.xml`：

```
<activity
    android:name=".MainActivity"
    android:configChanges="orientation|screenSize|keyboard|keyboardHidden"
    android:label="@string/app_name" > 
```

因此，如果键盘打开/关闭，您的应用将不会在旋转时重新启动。

我认为这个解决方案要简单得多。

在这种情况下，您几乎不需要处理`onSaveInstanceState()`退出，除非您开始另一个需要保存游戏状态的意图/活动。请注意，电话也会中断您的代码。我知道一些有有趣错误的游戏，其中时间重置但分数不重置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T13:14:05.720

我只想简化整个事情，并设置一个在用户退出游戏时切换的标志，例如：

```
void exitGame() {
   mUserExited = true;
   finish();
} 
```

（或者，如果您需要销毁多个活动，您可能需要更多逻辑）

然后检查 onDestroy() 中的标志。

无论您对配置更改（旋转等）有什么逻辑，都与退出游戏标志无关。

另外，请记住，“后退”按钮的默认行为是完成（）当前活动（如果上面没有其他活动）——在这种情况下，这不会算作“退出”。这里的行为取决于你。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-29T20:39:21.863

`Activity`有一个名为[isFinishing()](http://developer.android.com/reference/android/app/Activity.html#isFinishing%28%29)的方法，这可能是您正在寻找的。

请参阅：[https ://stackoverflow.com/a/9621078/445348](https://stackoverflow.com/a/9621078/445348)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-21T05:14:47.607

如果您需要知道这一点，您应该考虑自己处理轮换和其他配置更改事件，而不是让系统来处理。如果您在清单中设置活动处理 configChanges，它将在旋转时调用 onConfigChange，而不是销毁和重新创建活动。大量的应用程序都这样做了，Android 所做的整个循环破坏和重建是绝对迟钝的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-25T10:36:41.407

onRestoreInstanceState() 如果在恢复 /recreated 时将被调用，如果活动被 android 杀死，它会保存其活动 UI 状态和一些值，你可以覆盖 onSaveInstanceState 但因为不能保证调用 onSaveInstanceState()，你应该使用它只是为了记录活动的瞬时状态（UI 的状态）——你永远不应该用它来存储持久数据。相反，当用户离开活动时，您应该使用 onPause() 来存储持久数据（例如应该保存到数据库中的数据）。当当前活动重新显示给用户时，onRestart 也会在 onStop() 之后调用。因此，您可能可以将状态保存在 onPause / 如果 onRestart 被调用，它就像它被重新显示，而如果 onCreate 被调用而没有 onRestart 它被重新创建。

# asp.net - Sitecore 对其他项目的内联编辑

> ID：14432903
> 
> 赞同：1
> 
> 时间：2013-01-21T05:06:06.117
> 
> 标签：asp.net, sitecore

我被告知要`inline editing`为`Sitecore`网站做。

它适用于文章页面等简单页面。

`<sc:text ID="sct1" ruat="server" ... />`

但如果页面更复杂，我相信现在是不可能的。

示例页面如..

`About Us`将有 3 个不同的单选按钮。

根据选择的按钮，将显示相应的内容。该内容实际上是 的子内容`About Us`。

如果我愿意`inline editing`，我必须检查它是否是`editing mode`

如果是这样，我可以显示所有 3 套内容。

用户可以对其进行编辑。但是当他保存时，只保存了主页。子页面未保存。

我们有替代解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:10:59.203

您的断言是不正确的，即在保存页面时，仅保存正在呈现的项目。如果您使用字段渲染器从任何项目输出字段（如`sc:text`在幕后所做的那样），Sitecore 将跟踪该项目已被编辑，并保存所做的更改。

您可以填充`Item`or`Datasource`属性`sc:text`以编辑另一个项目的字段。

`Item`数据绑定对象时的示例语法：

```
<sc:Text runat="server" ID="uxNameText" Field="Name" Item="<%#Container.DataItem%>" /> 
```

或者Datasource可以用来绑定一个item path（不推荐）或者ID（稍微好一点）：

```
<sc:Link Field="Link" DataSource="/sitecore/content/home" runat="server" /> 
```

您也可以在代码隐藏中填充`Item`或填充。`Datasource`

作为替代方案，使用诸如自定义项生成器之类的框架来创建一个 .NET 类，该类将允许您以支持内联编辑的方式轻松地从任何项输出字段值。

参考：

[http://blog.velir.com/index.php/2010/10/19/custom-item-generator/](http://blog.velir.com/index.php/2010/10/19/custom-item-generator/)

[http://www.techphoria414.com/Blog?tag=custom+item+generator](http://www.techphoria414.com/Blog?tag=custom+item+generator)

# ruby-on-rails - Rails]在开发环境中初始化Fog

> ID：14432904
> 
> 赞同：2
> 
> 时间：2013-01-21T05:06:35.820
> 
> 标签：ruby-on-rails, heroku, carrierwave, fog

我将我的 rails 应用程序部署到 Heroku 上，并在服务器上将 aws 访问密钥设置为环境变量。但是，要在开发环境中测试我的应用程序，我需要在本地机器上的某个地方初始化它们。所以我决定以下。

/config/inittailizers/init_aws_locally.rb

```
ENV['AWS_ACCESS_KEY_ID'] = 'my key'
ENV['AWS_SECRET_ACCESS_KEY'] = 'my secret key' 
```

该文件被添加到`.gitignore`

但是，当我在开发环境中上传时，我收到以下错误消息：

`Missing required arguments: aws_access_key_id, aws_secret_access_key`

我想不知何故，我忽略了一个简单的步骤，将我的 aws 密钥包含在我的开发环境中。但是我不确定为什么在我已经初始化密钥时出现错误的原因。

供您参考，我使用的是carrierwave、S3 和Fog。

*配置/初始化程序/fog.rb*

```
CarrierWave.configure do |config|
  config.fog_credentials = {
    :provider               => 'AWS',                        # required
    :aws_access_key_id      => ENV['AWS_ACCESS_KEY_ID'],       # required
    :aws_secret_access_key  => ENV['AWS_SECRET_ACCESS_KEY'], # required
    :region                 => 'us-east-1',                  # optional, defaults to 'us-east-1'
  }
  config.fog_directory  = 'd'                         # required
  config.fog_public     = true                                # optional, defaults to true
end 
```

谢谢你。我感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T06:05:00.130

您的初始化程序将按字母顺序运行。请参阅[文档](http://guides.rubyonrails.org/configuring.html)：

> 如果你的初始化器中有任何顺序依赖，你可以通过命名来控制加载顺序。例如，01_critical.rb 将在 02_normal.rb 之前加载。

您遇到的问题是您的 fog.rb 初始化程序在您的 init_aws_locally.rb 之前运行（因为*f*出现在*i*之前）。所以 ENV['AWS_ACCESS_KEY_ID'] 在设置fog_credentials 时（还）尚未定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T05:10:56.747

我会避免将任何凭据放入代码中。这是一个非常糟糕的想法，而 Heroku 的想法是正确的。所以我要做的是使用 RVM 并将文件 .rvmrc 放在我的项目文件夹中。我也将 .rvmrc 放入 .gitignore 中。

然后你编辑 .rvmrc 有

导出 AWS_ACCESS_KEY_ID="BLAH"

等等等等。每当我“cd”到这个目录时，我的 env 都是由 RVM 为我设置的那个项目。如果您不使用 RVM，还有其他选择。

导轨

它将具有您放入 .rvmrc 脚本中的所有环境变量设置。无需初始化程序或仅开发 yaml 配置文件，这些文件不受源代码控制。根据我的经验，这是最简单的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-12T06:14:07.977

我去了我的外壳并输入：

$ 回声 $AWS_SECRET_ACCESS_KEY

它返回空白。原来我最近搬到了一个新的虚拟机上，忘记把它添加到 .bashrc 文件中。以防万一，值得检查一下 shell 环境。一旦我将这两行添加到我的 .bashrc 中，一切就又恢复了。

# html - 预期结束 ASP 错误

> ID：14432905
> 
> 赞同：0
> 
> 时间：2013-01-21T05:06:49.063
> 
> 标签：html, asp-classic, ado

我不确定如何修复以下错误：

```
Microsoft VBScript compilation error '800a03f6'

Expected 'End'

/junk/test.asp, line 103

else
^ 
```

相关代码：

```
 <%
    con.MoveNext()
    Wend
      %>
  </table>

  <% else %>

  <p>No seminars available.</p>

  <%
  end if
  con.close
  %> 
```

整个代码：

```
<%@ LANGUAGE="VBSCRIPT" %>

<%
        Dim connectString, connect, conDB, con, src_st
        connectString = "Driver={Microsoft Text Driver (*.txt; *.csv)}; DBQ=" & Server.MapPath("data")
        src_st = Request.QueryString("state")
        set connect = Server.CreateObject("ADODB.connection")
        connect.open connectString
        if src_cat = "" then
        conDB = "SELECT * FROM travel.csv"  
        else
        conDB = "SELECT * FROM travel.csv where state = ' & src_st & '" 

        set con = connect.execute(conDB)
%>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>

<title>Seminars &amp; workshops - AvSafety Seminars</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" media="screen" href="/style/screen.css" />
<link rel="stylesheet" type="text/css" media="screen" href="/style/avsafety.css" />
<link rel="stylesheet" type="text/css" media="handheld" href="/style/handheld.css" />
<link rel="stylesheet" type="text/css" media="print" href="/style/print.css" />

<meta name="MSSmartTagsPreventParsing" content="true" />

<style type="text/css">
<!--
.style2 {color: #666666 }
-->
</style>

<!--

-->

</head>
<body>

<div id="printtitle">Civil Aviation Safety Authority</div>
<div id="outer_wrapper">
<div id="wrapper"> 
<div id="container"> 
<div id="title"><h1>&nbsp;</h1></div>

      <img src="images/windsock.jpg" alt="" width="166" height="500" align="right" />
<div id="content"> 

<!--Start of main content area-->

<div id="right"> <img src="/wcmswr/_assets/main/seminars/images/AVSAFETY-LOGO.GIF" alt="AVSafety logo" border="0" width="250px" height="50px">

</div>
      <h1>AvSafety Seminars</h1>

<p>CASA is  continuing with the Safety Seminar program, targeting pilots in regional Australia and run in partnership with the local aviation industry. </p>
<p>We also hold seminars targeted at engineers.</p>
<p><a href="/scripts/nc.dll?WCMS:STANDARD::pc=PC_100841">View further information on safety issues and topics</a>.</p>

<h2>Request a seminar</h2>
<p> If you would like to request an AvSafety seminar in your local town, use the <a href="/scripts/nc.dll?WCMS:STANDARD::pc=PC_100683">AvSafety request from</a>.</p>

<h2>2013 Seminar schedule</h2>

<p>In 2013 CASA ASAs will be focusing on visiting organisations to discuss the forthcoming aviation regulatory changes. They will be in all regions of Australia and individuals or organisations are welcome to contact their local region ASA to arrange an appointment time. The approximate travel schedule for each region is shown below. ASAs are available and active each month for visits within capital city environs (approximately within 2 hours driving of a capital city).</p>
<p>Aero clubs and other aviation organisation are welcome to run Aviation Safety Seminars with ASAs presenting topics, however CASA will not be financially supporting the events. If you would like to run a seminar with ASA attendance, please use the <a href="/scripts/nc.dll?WCMS:STANDARD::pc=PC_100683">AvSafety request from</a> and complete the details of the request. Every effort will be made to provide support however it will be advantageous to consider timings when an ASA is visiting a local region.
</p>

<p><a href="avsafety?src_st=ACT">ACT</a> | <a href="avsafety?src_st=NSW">NSW</a> | <a href="avsafety?src_st=ACT">QLD</a> | <a href="avsafety?src_st=ACT">SA</a> | <a href="avsafety?src_st=ACT">TAS</a> | <a href ="avsafety?src_st=ACT">VIC</a> | <a href="#">WA</a></p>

   <table>
    <tr>
        <th>Location</th>
        <th>State</th>
        <th>Date</th>
    </tr>

 <% while (NOT con.EOF) %>

    <tr>
        <td><%=con("location")%></td>
        <td><%=con("state")%></td>
        <td><%=con("date")%></td>
    </tr>

      <%
    con.MoveNext()
    Wend
      %>
  </table>

  <% else %>

  <p>No seminars available.</p>

  <%
  end if
  con.close
  %>

<!--End of main content area-->
</div> <!-- content -->
</div> <!-- container -->

<div id="sidebar">
<h2 id = "sidebarhome"><a href="/index.htm">CASA home</a></h2>
<h2><a href="/seminars/index.htm">Seminars &amp; workshops</a></h2>
<ul>

<li><a href="/seminars/avsafety.asp">AvSafety Seminars</a> </li>
    <li> <a href="/seminars/eng.htm">Maintenance seminars</a></li>
    <li><a href="/seminars/archerfield.htm">Archerfield chief pilots</a></li>
<li><a href="/seminars/cbt/index.htm">Competency Based Training Education</a></li>
<li><a href="/seminars/manufacturing.htm">Manufacturing & certification workshop</a></li>
</ul>

<form action="http://agencysearch.australia.gov.au/search/search.cgi" name="agencysearch"> 
<input type="text" name="query" size="13" maxlength="50" value="" alt="Search field" /> 
<input type="hidden" name="collection" value="agencies" /> 
<input type="hidden" name="form" value="simple" /> 
<input type="hidden" name="profile" value="casa" /> 
<input type="submit" value="Search" name="Search" alt="Search button" /> 
</form>

</div>

<div class="clearing">&nbsp;</div>
</div><!-- wrapper -->
</div> <!-- outer_wrapper -->

 <div class="extras"> 
<a href="/tools/contacts.asp">Contact CASA</a> 
</div>

<div class="footer"> 
<a href="/tools/siteinfo.htm">Site&nbsp;help</a>&nbsp; |&nbsp;
<a href="/tools/cpyright.htm">Copyright </a>&nbsp; |&nbsp; <a href="/tools/privacy/index.htm">Privacy</a>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:05:58.170

如果您将代码更改为此怎么办？

```
<%
        Dim connectString, connect, conDB, con, src_st
        connectString = "Driver={Microsoft Text Driver (*.txt; *.csv)}; DBQ=" & Server.MapPath("data")
        src_st = Request.QueryString("state")
        set connect = Server.CreateObject("ADODB.connection")
        connect.open connectString
        if src_cat = "" then
        conDB = "SELECT * FROM travel.csv"  
        else
        conDB = "SELECT * FROM travel.csv where state = '" & src_st & "'"   
        end if

        set con = connect.execute(conDB)
%>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>

<title>Seminars &amp; workshops - AvSafety Seminars</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" media="screen" href="/style/screen.css" />
<link rel="stylesheet" type="text/css" media="screen" href="/style/avsafety.css" />
<link rel="stylesheet" type="text/css" media="handheld" href="/style/handheld.css" />
<link rel="stylesheet" type="text/css" media="print" href="/style/print.css" />

<meta name="MSSmartTagsPreventParsing" content="true" />

<style type="text/css">
<!--
.style2 {color: #666666 }
-->
</style>

<!--

-->

</head>
<body>

<div id="printtitle">Civil Aviation Safety Authority</div>
<div id="outer_wrapper">
<div id="wrapper"> 
<div id="container"> 
<div id="title"><h1>&nbsp;</h1></div>

      <img src="images/windsock.jpg" alt="" width="166" height="500" align="right" />
<div id="content"> 

<!--Start of main content area-->

<div id="right"> <img src="/wcmswr/_assets/main/seminars/images/AVSAFETY-LOGO.GIF" alt="AVSafety logo" border="0" width="250px" height="50px">

</div>
      <h1>AvSafety Seminars</h1>

<p>CASA is  continuing with the Safety Seminar program, targeting pilots in regional Australia and run in partnership with the local aviation industry. </p>
<p>We also hold seminars targeted at engineers.</p>
<p><a href="/scripts/nc.dll?WCMS:STANDARD::pc=PC_100841">View further information on safety issues and topics</a>.</p>

<h2>Request a seminar</h2>
<p> If you would like to request an AvSafety seminar in your local town, use the <a href="/scripts/nc.dll?WCMS:STANDARD::pc=PC_100683">AvSafety request from</a>.</p>

<h2>2013 Seminar schedule</h2>

<p>In 2013 CASA ASAs will be focusing on visiting organisations to discuss the forthcoming aviation regulatory changes. They will be in all regions of Australia and individuals or organisations are welcome to contact their local region ASA to arrange an appointment time. The approximate travel schedule for each region is shown below. ASAs are available and active each month for visits within capital city environs (approximately within 2 hours driving of a capital city).</p>
<p>Aero clubs and other aviation organisation are welcome to run Aviation Safety Seminars with ASAs presenting topics, however CASA will not be financially supporting the events. If you would like to run a seminar with ASA attendance, please use the <a href="/scripts/nc.dll?WCMS:STANDARD::pc=PC_100683">AvSafety request from</a> and complete the details of the request. Every effort will be made to provide support however it will be advantageous to consider timings when an ASA is visiting a local region.
</p>

<p><a href="avsafety?src_st=ACT">ACT</a> | <a href="avsafety?src_st=NSW">NSW</a> | <a href="avsafety?src_st=ACT">QLD</a> | <a href="avsafety?src_st=ACT">SA</a> | <a href="avsafety?src_st=ACT">TAS</a> | <a href ="avsafety?src_st=ACT">VIC</a> | <a href="#">WA</a></p>

   <table>
    <tr>
        <th>Location</th>
        <th>State</th>
        <th>Date</th>
    </tr>

 <%
if NOT con.eof then
 while (NOT con.EOF) %>

    <tr>
        <td><%=con("location")%></td>
        <td><%=con("state")%></td>
        <td><%=con("date")%></td>
    </tr>

      <%
    con.MoveNext()
    Wend
      %>
  </table>

  <% else %>

  <p>No seminars available.</p>

  <%
  end if
  con.close
  %>

<!--End of main content area-->
</div> <!-- content -->
</div> <!-- container -->

<div id="sidebar">
<h2 id = "sidebarhome"><a href="/index.htm">CASA home</a></h2>
<h2><a href="/seminars/index.htm">Seminars &amp; workshops</a></h2>
<ul>

<li><a href="/seminars/avsafety.asp">AvSafety Seminars</a> </li>
    <li> <a href="/seminars/eng.htm">Maintenance seminars</a></li>
    <li><a href="/seminars/archerfield.htm">Archerfield chief pilots</a></li>
<li><a href="/seminars/cbt/index.htm">Competency Based Training Education</a></li>
<li><a href="/seminars/manufacturing.htm">Manufacturing & certification workshop</a></li>
</ul>

<form action="http://agencysearch.australia.gov.au/search/search.cgi" name="agencysearch"> 
<input type="text" name="query" size="13" maxlength="50" value="" alt="Search field" /> 
<input type="hidden" name="collection" value="agencies" /> 
<input type="hidden" name="form" value="simple" /> 
<input type="hidden" name="profile" value="casa" /> 
<input type="submit" value="Search" name="Search" alt="Search button" /> 
</form>

</div>

<div class="clearing">&nbsp;</div>
</div><!-- wrapper -->
</div> <!-- outer_wrapper -->

 <div class="extras"> 
<a href="/tools/contacts.asp">Contact CASA</a> 
</div>

<div class="footer"> 
<a href="/tools/siteinfo.htm">Site&nbsp;help</a>&nbsp; |&nbsp;
<a href="/tools/cpyright.htm">Copyright </a>&nbsp; |&nbsp; <a href="/tools/privacy/index.htm">Privacy</a>
</div>

</body>
</html> 
```

# javascript - 检查有效 DOM 页面的父元素

> ID：14432908
> 
> 赞同：0
> 
> 时间：2013-01-21T05:07:12.933
> 
> 标签：javascript, html, dom

我有一些 HTML 元素，我想验证它们是否适合它们的父元素宽度。基本上，我不希望任何子容器元素超过父元素的宽度。例如：

```
 <div id="parent" style="width:100px;">
   <div id="child" style="width:120px;"> //wrong
</div> 
```

在一个大型 html 页面和多个开发人员工作的情况下，如果添加了违反此规则的新元素，页面对齐将崩溃。是否有一个 js 可以告诉我验证这个子元素，并在 DOM 上运行页面，以检查该元素是否通过了这个测试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T05:16:23.550

您不应该为此使用javascript。最好的解决方案是为您的项目提供良好的 CSS 模式。

但是，是的，您可以验证对象。

像这样的东西：

```
function validateParent(element, prop, callback) {
  var parentProp = element.parentElement.style[prop];
  var childProp = element.style[prop];
  if(parseFloat(childProp) > parseFloat(parentProp)) {
    // do something here like execute the callback
    if(typeof callback === 'function') {
      callback.call(element, prop, parentProp);
    }
  }
} 
```

使用示例：

```
// make the children value equals the parent
validateParent(document.getElementById('foo'), 'width', function(prop, val) {
  this.style[prop] = val;
});
// Dispatch an alert
validateParent(document.getElementById('foo'), 'width', function(prop, val) {
  alert('The value from ' + this.id + ' is bigger then it parent, that is ' + val;
}); 
```

# jquery - 在 IE9 上托管 jquery、ssl

> ID：14432909
> 
> 赞同：2
> 
> 时间：2013-01-21T05:07:16.613
> 
> 标签：jquery, ssl, internet-explorer-9

我将托管 jQuery 用于启用 SSL 的站点。在 IE 中显示此消息：

> 此网页包含不会使用安全 HTTPS 传送的内容。

如果我点击“ok”，我可以使用 jQuery；如果我点击“否”，我不能。

当我检查 jQuery 的托管链接时，它以“http”开头。

1.  是否有“https”托管的 jQuery 作为替代方案？

2.  如果我单击“确定”是否存在安全风险？

3.  有什么方法可以抑制这个消息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T05:10:43.520

Google 有一个启用 SSL 的 CDN，它托管 jQuery
[https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js](https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js)或[https://ajax.aspnetcdn.com/ajax/jquery/jquery -1.9.0.js](https://ajax.aspnetcdn.com/ajax/jquery/jquery-1.9.0.js)

[jQuery 下载页面](http://jquery.com/download/)包含有关托管 jQuery 的不同 cdn 的信息。它说[谷歌](https://developers.google.com/speed/libraries/devguide#jquery)和[微软](http://www.asp.net/ajaxlibrary/cdn.ashx)都托管了支持 SSL 的 jQuery。

# django - django 上下文到内置页面

> ID：14432919
> 
> 赞同：0
> 
> 时间：2013-01-21T05:08:05.927
> 
> 标签：django, django-templates, django-admin, django-views

我有一个看起来像这样的模板：

主模板，home.html：

```
{% extends "framed.html" %}
<h2> stuff <h2> 
```

framed.html 看起来像

```
{% block header %}
<h1>{{ sitename }}</h1>
{% endblock %} 
```

通常，当我调用这些视图时，我会给它一个上下文，其中包含一个分配了 get_current_site().name 的键“sitename”，它工作正常。

但是，我也想在一组模板的顶部使用 framed.html，这些模板也被 django 默认视图调用。例如：

```
 return HttpResponseRedirect(reverse('django.contrib.auth.views.login')) 
```

该页面的顶部永远不会显示 {{sitename}}，因此我最终在页面顶部有一些空白区域。平面页面、注销等也是如此。有没有办法可以将相关上下文添加到所有这些“内置”页面中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T06:08:36.600

您可以编写自己的模板上下文处理器，它将在提供给每个模板的参数中添加所需的变量。

更多细节在[编写你自己的上下文处理器](https://docs.djangoproject.com/en/dev/ref/templates/api/#writing-your-own-context-processors)

# matlab - 如何使用 Matlab 确定 PCA 中变量的重要性？

> ID：14432922
> 
> 赞同：5
> 
> 时间：2013-01-21T05:08:30.327
> 
> 标签：matlab, pca

我在网上遇到了许多类似的问题，但找不到能解决我能理解的问题的问题。我会很感激这里的一些解释，以帮助我理解。提前致谢！

所以，

```
[COEFF,SCORE,latent,tsquare] = princomp(X) 
```

我知道对于`coeff`，各列按分量方差递减的顺序排列。但是我是否知道我的变量（原始数据集）的重要性，而不是主成分（PC）的重要性，正如答案`coeff`可能出现的那样。有没有办法对我拥有的变量的重要性进行排名？

我看到许多统计软件都能够做到这一点，显示哪些原始变量对绘图的贡献最大，哪些可以删除以防止过度拟合问题。有没有办法用 MatLab 做到这一点？

我的目标是在 2D 图中绘制数据，这意味着我将使用 PC1 和 PC2，它们具有最显着的分量方差。再说一遍，我怎么知道哪些变量应该保留，哪些应该丢弃？

谁能给我解释一下？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T06:09:39.580

如果您只关心将数据投影到 2D 平面以进行可视化，那么请务必从中获取每个点的前两个坐标`SCORE`- 这些是您在问题中提到的`PC1`坐标`PC2`。

但是，如果您想知道哪个是贡献最大的两个组件**，`X`**您必须在前两列中找到具有最大绝对值的条目。由于 的前两列表示产生和的元素的线性组合。`PC1``PC2``COEFF``COEFF``X``PC1``PC2`

# fastreport - 快报工具栏图标可以完全替代吗？

> ID：14432928
> 
> 赞同：0
> 
> 时间：2013-01-21T05:09:05.420
> 
> 标签：fastreport

我正在使用快速报告，我想更改他们的默认预览工具栏。

我需要用我自己的图标替换一些图标，**并且** 我需要能够添加我自己的自定义按钮。

我从他们的支持中查看了这个[线程。](http://goo.gl/VB5uy)

它提到了如何将图标更改为其他快速报告提供的图标，但我需要放入自定义图标并添加新按钮。

有没有人这样做过？或者知道这是否可能与 FastReport 一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:31:35.337

If you have the professional edition of fastreports you have access to the source code. I have heard of people editing this and recompiling to create thier own custom preview window

# asp.net - 如何在 asp .net 中选择另一个下拉列表时获取 dropdonwlist 内容

> ID：14432931
> 
> 赞同：-2
> 
> 时间：2013-01-21T05:09:15.440
> 
> 标签：asp.net

asp .net中的依赖下拉列表行为实现

当有人从一个下拉列表中选择值时，有两个下拉列表 On SelectedIndexChanged 来自其他下拉列表的值需要更改。没有像ajax这样的页面刷新的任何方法。我们可以通过填充所有值来避免数据库调用吗？

意思是说第一个下拉列表是州，其他是城市。当用户选择没有数据库的州时，该州的城市才可见。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T05:15:06.740

您可以通过将一个下拉列表与其他下拉列表绑定来在另一个下拉列表的基础上填充一个下拉列表

您可以找到有用资源的链接，如下所示

[根据另一个中的选择填充下拉列表](http://www.aspdotnet-suresh.com/2010/10/how-to-populate-dropdown-based-on-other.html)

# django - Django 的全局模板

> ID：14432935
> 
> 赞同：2
> 
> 时间：2013-01-21T05:09:48.793
> 
> 标签：django, templates

我正在创建一个网页，其中包含几个看起来总是相同的区域。只是想知道 Django 是否支持“全局”模板？

如果是这样，是否有任何我可以遵循的参考。（我尝试用谷歌搜索“Django 全局模板”，但没有出现类似的事情）。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T05:18:27.480

Django 的[模板继承](https://docs.djangoproject.com/en/dev/topics/templates/#template-inheritance)正好解决了这个问题。您可以创建一个基本模板并仅更改派生子页面中需要更改的块。

# android - WakefulIntentService 在调度后立即启动

> ID：14432939
> 
> 赞同：0
> 
> 时间：2013-01-21T05:10:10.213
> 
> 标签：android, commonsware-cwac

我正在尝试在新应用程序中使用 CommonsWare 的 WakefulIntentService，特别是它能够轻松安排意图服务在以后运行。

我有一个 PreferenceActivity 允许用户选择服务运行的时间表（例如每天早上 5 点）。一旦用户更改了偏好值，我调用：

```
AutoDownloadIntentServiceAlarmListener alarmListener = new AutoDownloadIntentServiceAlarmListener();
alarmListener.setForcedHour(5);  // we want to schedule alarm for 5am everyday.

WakefulIntentService.scheduleAlarms(alarmListener, this, true); 
```

出于某种原因，所需的 IntentService（扩展了 WakefulIntentService）会立即启动并执行其工作。

下面是 AutoDownloadIntentServiceAlarmListener 的实现：

```
public class AutoDownloadIntentServiceAlarmListener implements WakefulIntentService.AlarmListener {

private static final String TAG = "AutoDownloadIntentServiceAlarmListener";
    private int mForcedHour = -1;

    @Override
    public long getMaxAge() {
        return AlarmManager.INTERVAL_DAY * 2;
    }

    public void setForcedHour(int forcedHour) {
        mForcedHour = forcedHour;
    }

    @Override
    public void scheduleAlarms(AlarmManager alarmManager, PendingIntent pendingIntent, Context context) {
        Calendar calendar = Calendar.getInstance();
        calendar.setTimeInMillis(System.currentTimeMillis());
        String autoDownloadTimePref = MyApplication.getInstance().getPrefs().getString("autoDownloadEpisodesSchedule", "0");

        int hourOfAlarm = Integer.parseInt(autoDownloadTimePref);
            // if this class has been created with a specific hour
            // use it instead of the value obtained from SharedPreferences above.
        if (mForcedHour > -1) {
            Log.w(TAG, "Forced hour has been set for this AlarmListener. " + mForcedHour);
            hourOfAlarm = mForcedHour;
        }
        calendar.set(Calendar.HOUR_OF_DAY, hourOfAlarm);
        calendar.set(Calendar.MINUTE, 0);
        calendar.set(Calendar.SECOND, 0);

        alarmManager.setInexactRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), AlarmManager.INTERVAL_DAY, pendingIntent);

        Log.d(TAG, String.format("Scheduled inexact alarm for %d", hourOfAlarm));
    }

    @Override
    public void sendWakefulWork(Context context) {
        Intent serviceIntent = new Intent(context, AutoDownloadIntentService.class);

        WakefulIntentService.sendWakefulWork(context, serviceIntent);
    }

} 
```

我的意图是该服务不会在预定后立即启动，而是仅在第二天早上 5 点启动。（并继续无限期地重复此计划，或直到用户选择禁用或更改其计划）

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T12:41:23.430

> 我的意图是该服务不会在预定后立即启动，而是仅在第二天早上 5 点启动。

除非这不是您的代码所做的，大约 80% 的时间。您的代码说它应该在*今天*早上 5 点运行，因为您正在获取当前时间而不是更改日期。大多数时候，今天凌晨 5 点已经过去，因此`AlarmManager`会立即开始工作。

您需要查看您的计算`Calendar`是否比现在更早，如果是，请添加一天。

# android - 相对布局 onDraw

> ID：14432940
> 
> 赞同：1
> 
> 时间：2013-01-21T05:10:14.470
> 
> 标签：android, android-relativelayout, ondraw

我创建了一个RelativeLayout的子类，在布局文件中使用它。在布局文件中还定义了一些组件widget。覆盖OnDraw画了一张图片，图片不能画在上面，而是控制块。
像这样：

[![在此处输入图像描述](../Images/21605aee0e825218f729658f1fa574c9.png)](https://i.stack.imgur.com/hJFHS.png)

我如何将图片放到上面的布局中。图片是根据手指运动移动的。谢谢。

# opencl - clEnqueueNDRangeKernel 函数

> ID：14432941
> 
> 赞同：0
> 
> 时间：2013-01-21T05:10:18.733
> 
> 标签：opencl

如果我理解错误，请纠正我。

```
err= clEnqueueNDRangeKernel(command_queue,kernel,1,NULL,global,wg,0,NULL,&gpuExec); 
```

**CPU代码（写在这两个函数之间）是否在CPU上同时执行，当内核在GPU上执行时......意味着它们同时执行？**

```
err=clEnqueueReadBuffer(command_queue,output,CL_TRUE,0,sizeof(cl_int)*100,results,0,NULL,NULL); 
```

2) 这个函数

```
err= clEnqueueNDRangeKernel(command_queue,kernel,1,NULL,global,wg,0,NULL,&gpuExec); 
```

立即返回，CPU 可以在此函数调用后做另一项工作（意味着内核开始在不同内核上的 GPU 上执行之后）并且在内核执行的同时，CPU 可以做另一项工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:33:09.177

你的两个问题都可以用*yes*来回答。内核在 GPU 上异步执行，因此您可以同时在 CPU 上执行其他工作。你可以使用虽然明确地等待你的`gpuExec`事件。`clWaitForEvents(1, &gpuExec)`

# c# - 无法在 VSE 2010 中打开 mvc c# 项目

> ID：14432950
> 
> 赞同：2
> 
> 时间：2013-01-21T05:10:43.537
> 
> 标签：c#, visual-studio-2010, csproj

我有由`MVC3, C#, VSE 2010`Web 开发人员创建的项目文件。刚刚安装了最新的`VSE 2010`Web 开发人员。当我尝试打开**.sln**文件时，我收到以下消息：

```
D:\Work\tech_descr\Site\Site.csproj : error  : The project file 'D:\Work\tech_descr\Site\Site.csproj' cannot be opened.
The project type is not supported by this installation. 
```

我检查了论坛提出的解决方案，但它不起作用。看起来我的软件版本很好。这是来自**csproj 的字符串：**

```
<ProjectGuid>{9F99CE4B-6664-401C-AEFD-DD53C3281B42}</ProjectGuid>
<ProjectTypeGuids>{F85E285D-A4E0-4152-9332-AB1D724D3325};{349c5851-65df-11da-9384-00065b846f21};{fae04ec0-301f-11d3-bf4b-00c04f79efbc}</ProjectTypeGuids> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T05:18:15.610

不要双击 .sln 文件打开解决方案，从 VSE 2010 的文件->打开菜单中打开它，它会提示您转换

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T05:21:53.747

我将从重新安装 MVC 3 开始。

有趣的是，这些指南分别是：

视觉 C#

视窗 (C#)

Web应用程序

[http://msdn.microsoft.com/en-us/library/hb23x61k%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/hb23x61k%28v=vs.80%29.aspx) http://www.mztools.com/articles/2008/mz2008017.aspx

# php - joomla 管理员登录表单中的记住我复选框。如何？

> ID：14432951
> 
> 赞同：1
> 
> 时间：2013-01-21T05:10:46.827
> 
> 标签：php, mysql, joomla, checkbox, remember-me

有人知道如何在 joomla ADMIN 登录表单中创建“记住我”复选框吗？每次我需要在后端更改某些内容时，我都厌倦了“重新登录”。

我已经创建了该复选框，但我面临一些问题以使其工作。先感谢您

我做错了什么吗？还是行不通。

这是我在 default.php 中添加到 mod_login 的代码`"\administrator\modules\mod_login\tmpl\default.php":`

```
<!-- BEGIN - Trying to create Remember me-->
<p id="form-login-remember">
<label for="modlgn-remember"><?php echo 'Remember-me' ?>&#160;</label>
<input id="modlgn-remember" type="checkbox" name="remember" class="inputbox" value="yes"/>
</p>
<!-- END - Trying to create Remember me--> 
```

这是控制器的一部分：

```
 /**
 * Method to log in a user.
 *
 * @return  void
 */
public function login()
{
    // Check for request forgeries.
    JSession::checkToken('request') or jexit(JText::_('JINVALID_TOKEN'));

    $app = JFactory::getApplication();

    $model = $this->getModel('login');
    $credentials = $model->getState('credentials');
    $return = $model->getState('return');

    $result = $app->login($credentials, array('action' => 'core.login.admin'));

    if (!($result instanceof Exception)) {
        $app->redirect($return);
    }

    parent::display();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T06:56:43.533

您只需要创建一个名称记住的复选框。

它会做剩下的事情。admin登录表单提交时对应的任务写在

```
administrator/compoenets/com_login/controller.php 
```

你可以找到一个名为 login() 的函数

只需检查类似这样的代码。

```
$options['remember'] = JRequest::getBool('remember', true); 
```

还要确保 cookie 路径正确，如果您使用子域，有时路径会产生问题。

希望这可以帮助你..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T05:13:09.380

你可以试试[这个插件](http://extensions.joomla.org/extensions/authoring-a-content/admin-interface/8690)来保持会话活跃，但也有限制。

# ruby - IRB中的哈希检查？

> ID：14432954
> 
> 赞同：2
> 
> 时间：2013-01-21T05:11:16.293
> 
> 标签：ruby, hash, irb

我有一个哈希：

```
hash = { test: 'Test' } 
```

如果我在 irb 会话中输入`hash`，它会输出散列的内容：

```
{
  :test => 'Test'
} 
```

`hash`当我这样做时，正在对变量调用什么方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T05:14:07.180

方法是[`Hash#inspect`](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-inspect)。

```
hash = { test: 'Test' }
# => {:test=>"Test"}

hash.inspect
# => "{:test=>\"Test\"}" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T05:13:17.147

```
Object.inspect 
```

该方法通常用于打印对象结构。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T05:13:34.527

IRB`#inspect`在您的表达式上调用方法并打印其结果。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-21T06:34:35.923

当您的哈希包含大量数据时，在一行中读取其内容可能会很痛苦。

我喜欢`y`在 yaml 中使用打印散列。

```
h = {:a => 1, :b => 2}
y h
# --- 
#  :b: 2
#  :a: 1
# => nil 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-21T05:14:08.467

IRB 将调用[Hash#inspect](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-inspect)。

```
hash.inspect 
```

# php - PHP在while循环内切换

> ID：14432961
> 
> 赞同：1
> 
> 时间：2013-01-21T05:12:08.873
> 
> 标签：php, html, mysql, foreach, switch-statement

我使用 PHP 开关从我的 mysql 数据库中获得了两个相同的条目。我已经把问题隔离到这里了，也许有人可以放纵我？$mySQL->Fetch() 只是获取查询中的下一行。

这是我正在使用的：

```
while($row = $mySQL->Fetch())
{
switch($filter)
{
    case 1:
    case 2:
        $data[] = array(150, $row["lastName"]);
        $data[] = array(125, $row["firstName"]);
        $data[] = array(100, $row["city"]);
        $data[] = array(75, $row["state"]);
        $data[] = array(100, FormatPhone($row["phone"]));
        $data[] = array(125, $row["registrationDate"]);
        $data[] = array(125, $row["expirationDate"]);
        $id = $row["id"];

        echo "<a href=\"?dp=profile&filter=member&id=$id\"><ul class=\"search\">";
        foreach($data as $key => $value)
        {
             echo "<li style=\"width:$value[0]px\">$value[1]</li>";
        }
        echo "</ul></a>";
        break;
}
} 
```

由于某种原因，列表不断增加。我一定忽略了一些明显的东西，但我无法追踪它。

这是 HTML 输出的内容：

```
<ul class="search">
    <li style="width:150px">Jones</li>
    <li style="width:125px">Bob</li>
    <li style="width:100px">City</li>
    <li style="width:75px">NH</li>
    <li style="width:100px">(123) 456-7890</li>
    <li style="width:125px">2013-01-20</li>
    <li style="width:125px">2014-07-31</li>
    <li style="width:150px">Doe</li>
    <li style="width:125px">Jane</li>
    <li style="width:100px">Little Town</li>
    <li style="width:75px">NH</li>
    <li style="width:100px">(123) 456-7890</li>
    <li style="width:125px">2013-01-20</li>
    <li style="width:125px">2014-07-31</li>
</ul> 
```

它没有一个，而是结合了两个。但是我确保关闭了我的无序列表标签。更不用说，此后的每个条目的大小都在继续增长，并结合了迄今为止的所有条目。我每次都需要清除查询吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T05:18:41.100

发生的事情是在第一次迭代中添加第一次之后，对于下一次迭代，它再次将下一个元素放入`$data`并且当您使用 like`$data[]= $next_element`时，**先前的数据不会从 $data 数组中删除，因此在每次迭代后，取消设置数组。**这应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T06:18:42.680

我相信您的答案在于 PHP 变量范围的动态特性。请注意您不必在使用 $data 之前声明它吗？PHP 假设您想要一个名为 data 的变量，并推断您想要一个数组，因为您使用 [] 附加到它。在 while 循环的每次迭代中，您都应该将行结果附加到 $data 中，但您从未告诉 PHP 您想要一个“新的”$data 变量。我建议明确声明 $data 如下：

```
while ($row = $mySQL->Fetch()) {
    $data = array();
    switch ($filter) {
        // case statements 
```

这将在每次迭代开始时将 $data 重新初始化为一个空数组，以确保您只为当前行创建列表项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T06:19:36.937

代替：

```
$data[] = array(150, $row["lastName"]);
$data[] = array(125, $row["firstName"]);
$data[] = array(100, $row["city"]);
$data[] = array(75, $row["state"]);
$data[] = array(100, FormatPhone($row["phone"]));
$data[] = array(125, $row["registrationDate"]);
$data[] = array(125, $row["expirationDate"]); 
```

和：

```
$data = array(
    array(150, $row["lastName"]);
    array(125, $row["firstName"]),
    array(100, $row["city"]),
    array(75, $row["state"]),
    array(100, FormatPhone($row["phone"])),
    array(125, $row["registrationDate"]),
    array(125, $row["expirationDate"]),
); 
```

您每次迭代都会改变单个`$data`数组，而不是每次迭代都创建一个新数组。

# jquery - Jquery ajax post请求与旧请求重叠

> ID：14432966
> 
> 赞同：0
> 
> 时间：2013-01-21T05:12:26.797
> 
> 标签：jquery, ajax

我正在 wamp 服务器上使用 php 和 jquery 构建 rss 提要阅读器。

在页面加载时，我有网站列表，

```
<ul class='list'>
     <li>Site1 <input type='hidden' value='http://site1.rss/' /></li>
     <li>Site2 <input type='hidden' value='http://site2.rss/' /></li>
     <li>Site3 <input type='hidden' value='http://site3.rss/' /></li>
</ul> 
```

为了从“getFeed.php”页面获取提要，我使用 jquery 代码，

```
$('.list li').live('click', function() {
     var url = $(this).find('input').val();
     $.post("getFeed.php",
            {url:url},
            function(data) {
                 $('.feed').html(data);
            });
}); 
```

这段代码就像一个魅力。现在，如果我在第一个站点的请求完成之前单击另一个站点，则会出现问题。

那时如果第一个站点的响应很慢，那么我应该从第二个站点得到结果。但是，当第一个站点响应较晚时，结果将更改为第一个站点。

问题类似于 [question]: [Abort Ajax requests using jQuery](https://stackoverflow.com/questions/446594/abort-ajax-requests-using-jquery)

我已经尝试过此代码，但无法正常工作

```
$(document).ready(function() {
     var xhr;

     $('.list li').live('click', function() {
          xhr.abort();
          alert("testing flag");
          var url = $(this).find('input').val();
          xhr = $.post("getFeed.php",
                 {url:url},
                 function(data) {
                      $('.feed').html(data);
                 });
     });
}) 
```

但是，此代码无法发送请求。因此，我在 xhr.abort() 行之后放置了一个测试警报标志。但警报也不起作用。可能是 xhr.abort() 中的问题；线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T05:17:33.270

`xhr.abort();`将导致错误，因为 xhr 在您第一次调用该函数时未定义，请尝试类似`xhr && xhr.abort();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T08:34:46.273

你确定要中止吗？我什至不确定它是否适用于所有浏览器，如果可以，用户可能会惊讶于他没有得到他点击的内容。我会

a）不推荐使用`.on`而不是使用， b）在获取结果或更好的情况下阻止点击：对点击进行排队`.live`

请参阅：[jQuery 中的队列是什么？](https://stackoverflow.com/questions/1058158/can-somebody-explain-jquery-queue-to-me/3314877#3314877)

有一个ajax队列示例

# java - 为什么我们不能在 JAVA 接口中创建受保护的方法？

> ID：14432978
> 
> 赞同：0
> 
> 时间：2013-01-21T05:13:30.033
> 
> 标签：java

> **可能重复：**
> [Java 中的接口：不能使实现的方法受保护或私有](https://stackoverflow.com/questions/423032/interfaces-in-java-cannot-make-implemented-methods-protected-or-private)

默认情况下，接口中的所有方法都是公共的和抽象的。我们不能在接口中定义私有方法，因为它的范围将在接口本身内部。所以私有是没有意义的导致编译时错误。

现在问题来了，为什么我们不能保护？

# jquery - 是否可以使用具有相同速度的 jquery.tagcanvas.min.js 插件进行旋转？

> ID：14432982
> 
> 赞同：1
> 
> 时间：2013-01-21T05:13:41.567
> 
> 标签：jquery, tagcanvas

嗨，我是 jquery 的新手，我正在使用这个插件 jquery.tagcanvas.min.js 来旋转图像可以使相同的方向和速度吗？提前致谢。我使用的这段代码

```
if(!$('#myCanvas').tagcanvas({
          textColour: '#ff0000',
          outlineColour: 'transparent',
          reverse: true,
          depth: 0.8,
          maxSpeed: 0.04,
          minSpeed: 0.04,
          initial:  [0.04,0.04],
          zoom:1

        },'tags' )) {
          // something went wrong, hide the canvas container
          $('#myCanvasContainer').hide();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:13:03.320

使用此链接 [http://www.goat1000.com/jquery.tagcanvas.js?2.0](http://www.goat1000.com/jquery.tagcanvas.js?2.0)

并更改 MouseMove 和 MouseOut 功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T15:14:16.783

添加选项 minSpeed: 0.8 或任何所需的值

# jquery - 为什么选择器的子代在 jquery 中不起作用？

> ID：14432993
> 
> 赞同：1
> 
> 时间：2013-01-21T05:15:19.563
> 
> 标签：jquery

我正在尝试改变`background color`使用`li`的课程`jquery children`，但它不起作用。以下是我测试它的网址：http: [//jsfiddle.net/kFUqK/1/](http://jsfiddle.net/kFUqK/1/)

我更改了代码

```
$('ul.level-2').children().css('background-color', 'red');
$('ul.level-2').children('.level-33').css('background-color', 'blue'); 
```

到

```
//$('ul.level-2').children().css('background-color', 'red');
$('ul.level-2').children('.level-33').css('background-color', 'blue'); 
```

然后我发现`li.level-33`它的背景并没有改变。

这有什么原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T05:17:19.167

来自 jQuery 文档：

> 该`.children()`方法的不同之处`.find()`在于`.children()`仅在DOM 树中向下移动一个**级别**`.find()`，同时也可以向下遍历多个级别以选择后代元素（孙子等）。

所以你想要`find`.

# sql-server-2005 - SQL 2005 获取当前年份的数据

> ID：14432994
> 
> 赞同：1
> 
> 时间：2013-01-21T05:15:26.793
> 
> 标签：sql-server-2005

我有一个包含 2012 年至今的销售数据的视图，我需要编写只显示当年销售额（2013 年）的查询。

这是我在第一阶段尝试的

```
SELECT * 
FROM [Sales_Data] 
WHERE invoiceDate  between '2013-01-01' and '2013-12-31' 
```

此查询需要 2 秒来加载数据，但我更改查询以获取不需要我手动更新的数据，这是我在网上找到的：

```
select * from [Sales_Data]  
where datepart(yyyy,invoiceDate) =datepart(yyyy,getdate()) 
and datepart(yyyy,invoiceDate) =datepart(yyyy,getdate()) 
```

因此，此查询需要更长的时间才能显示数据（9 秒）。请让我知道是否有更好的查询可以在更短的时间内定义和获取数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T05:40:49.167

您的第二个查询需要 sql server 为您查询的每一行执行计算。

以下查询更接近您的原始选择语句。

```
select * from [Sales_data]
where invoiceDate between DATEADD(YEAR, DATEDIFF(YEAR, 0, GETDATE()), 0) --- First Day of current year
and DATEADD(MILLISECOND, -3,DATEADD(YEAR, DATEDIFF(YEAR, 0, GETDATE()) + 1, 0)) --- Last Day of current year 
```

根据您查询的视图的情况，您还可以从包含 invoiceDate 字段的索引中受益。

您可能需要检查运行查询时生成的执行计划，以了解查询运行时幕后发生的情况。

# javascript - 对象选择和调整大小的常用方法

> ID：14432996
> 
> 赞同：2
> 
> 时间：2013-01-21T05:15:32.287
> 
> 标签：javascript, html, canvas, html5-canvas

是否有一种通用方法可以在画布上选择对象并应用重新调整大小和其他转换。未在单个绘图对象中指定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:10:19.197

我认为这个网站可以帮助你了解你的要求这是[测试](https://github.com/demelziraptor/html5-canvas-tests/blob/master/index.html)

# php - 集成 PHP 的 Autotask API 文档

> ID：14432998
> 
> 赞同：-1
> 
> 时间：2013-01-21T05:16:20.997
> 
> 标签：php, web-services, api, symfony

这里有人有这方面的经验吗？他们的 API 文档中的示例使用 VB .NET。我只是想知道是否可以改用 PHP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-04T20:30:38.817

对的，这是可能的。

我最近做了这个，我正在研究一个 CAKEPHP 框架。

第一步是正确连接 Autotask 任务。完成后，您可以使用各种功能，例如查询、创建等