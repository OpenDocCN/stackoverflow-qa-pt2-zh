# StackOverflow 问答 14160000-14160999

# ios - 理解 JSON 解析为 NSDictionary

> ID：14160002
> 
> 赞同：-2
> 
> 时间：2013-01-04T15:29:45.797
> 
> 标签：ios, nsdictionary, nsjsonserialization

> **可能重复：**
> [来自 NSString 的 NSJSONSerialization](https://stackoverflow.com/questions/8858814/nsjsonserialization-from-nsstring)

我有这个旧代码，我该如何完成使用`NSJSONSerialization`？

以下用途`SBJSON`

```
+ (NSDictionary *) parseJSONResponse: (NSString *) response {
    NSDictionary *dictionary = [response JSONValue];
    return dictionary;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:34:17.030

您需要响应 NSData 来执行以下操作：

```
NSError *error;
NSDictionary *dictionary = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error]; 
```

# asp.net - 在实体框架中加入两个以上的实体

> ID：14160004
> 
> 赞同：-2
> 
> 时间：2013-01-04T15:29:48.713
> 
> 标签：asp.net, entity-framework, join, ado.net

我有四个实体，我需要加入它们。是否可以加入两个以上的实体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:46:21.193

好的 LINQ 方法是您应该尽可能避免 JOIN。如果您的实体是属性连接的，您应该能够在没有“JOIN”的情况下查询相关实体，这就是 LINQ 的美妙之处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-12T12:29:14.167

是的，可以加入两个以上的实体，尽管它开始变得混乱并且生成的 SQL 并不漂亮...[阅读此 SO 帖子以获取示例](https://stackoverflow.com/questions/11537757/multiple-join-in-entity-framework)和此 SO 帖子中的[另一个示例](https://stackoverflow.com/questions/21051612/entity-framework-join-3-tables)

PS 正如 JW 所暗示的，如果数据库正确/完全使用外键等，则不需要 JOIN。

除了简单的内连接之外，不同类型的连接可能会变得很糟糕......左外连接很痛苦......[看这里](http://www.thinqlinq.com/Post.aspx/Title/Left-Outer-Joins-in-LINQ-with-Entity-Framework)

# macos - 有没有办法在 Mac 中禁用网络摄像头以用于开发目的？

> ID：14160005
> 
> 赞同：0
> 
> 时间：2013-01-04T15:29:49.917
> 
> 标签：macos, webcam

我正在尝试为我的软件创建一个网络摄像头不可用的场景。由于它内置在我的笔记本电脑中，我不能简单地拔掉它。有没有办法禁用网络摄像头（例如在硬件级别或设备驱动程序），以便我可以为没有网络摄像头的用户模拟没有网络摄像头的场景？这是针对 Mac OSX 的吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:38:03.100

只需通过移动驱动程序文件或更改权限来使驱动程序文件无法访问。据我所知，它将禁用所有网络摄像头，包括 USB 网络摄像头（假设所有与 mac 兼容的网络摄像头都使用相同的驱动程序）。

无论如何，你可以在这里找到一个自动化脚本：http: [//techslaves.org/isight-disabler/](http://techslaves.org/isight-disabler/)

# javascript - Express中的Routes文件夹

> ID：14160025
> 
> 赞同：14
> 
> 时间：2013-01-04T15:30:50.680
> 
> 标签：javascript, node.js, express

当你创建一个 Express 应用程序时，你会得到一个 routes 文件夹。所有路由都在 app.js 文件中注册。然而，发生的逻辑位于路由文件夹的文件中。这是其他框架中控制器文件夹的同义词吗？这是您应该添加请求/响应逻辑的位置吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-04T15:44:59.353

是的，与控制器文件夹有点像。IMO，您最好使用不同的文件，就像使用另一种语言的控制器一样，因为当应用程序变得越来越大时，当所有请求/响应逻辑都在同一个文件中时，很难理解代码。

例子 ：

**应用程序.js**：

```
var express = require('express'),
    employees = require('./routes/employee');

var app = express();

app.get('/employees', employees.findAll);
app.get('/employees/:id', employees.findById);

app.listen(80); 
```

**路线/employee.js**：

```
exports.findAll = function(req, res) {
    res.send([{name:'name1'}, {name:'name2'}, {name:'name3'}]);
};

exports.findById = function(req, res) {
    res.send({id:req.params.id, name: "The Name", description: "description"});
}; 
```

# android - 多个水平列表视图

> ID：14160027
> 
> 赞同：1
> 
> 时间：2013-01-04T15:30:50.910
> 
> 标签：android, android-listview

在我的活动中，我有三个水平列表视图。每个列表视图都是不同的。

我在尝试使某个布局起作用时遇到了困难：我想在一个页面上有多个列表；每个列表不必是可滚动的，但应该完全显示。

如果总内容比屏幕长，页面本身应该能够滚动（其中包含列表），例如[Allrecipes.com Dinner Spinner](https://play.google.com/store/apps/details?id=com.allrecipes.spinner.free)应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:37:09.557

将您的滚动视图添加到列表视图。您可以创建一个 listadapter 来返回您的水平列表视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-08T11:31:55.143

android 中有一个名为**Recycler View**的视图。它是 android 中列表视图的重新实现，具有许多新功能。在 Recycler 视图中，您可以轻松地制作水平列表视图。我找到了一个教程，源代码包含在教程中。

[http://android-pratap.blogspot.in/2015/12/horizo​​ntal-recyclerview-in-vertical.html](http://android-pratap.blogspot.in/2015/12/horizontal-recyclerview-in-vertical.html)

# c# - 单击子窗体的菜单条时，父窗体将显示在前面

> ID：14160033
> 
> 赞同：1
> 
> 时间：2013-01-04T15:31:10.910
> 
> 标签：c#, .net, winforms, menustrip

我有一个非常奇怪但可重现的问题。

我有一个`MenuStrip`可以使用该方法打开一个新的无模式表单`Form.Show()`。

子窗体也有一个菜单条。

当您通过单击子窗体的菜单条开始时会发生奇怪的事情。然后父表单返回前台并打招呼。那是一个真正的痛苦。

如何预防这个问题？

[通过点击此链接zippyshare.com](http://www44.zippyshare.com/v/4833978/file.html) (3Mo)的 Scorcese 电影来说明我的问题

正如您在视频中看到的那样，父表单没有获得焦点，它只是被其他东西带到了前面。

请注意，`MenuStrip`通过`ToolStrip`更正问题来解决问题。

重现问题的一些代码：

```
public class DemoLostfocus : Form
{
    private void InitializeComponent()
    {
        this.menuStrip1 = new MenuStrip();
        this.fileToolStripMenuItem = new ToolStripMenuItem();
        this.openModelessFormToolStripMenuItem = new ToolStripMenuItem();
        this.menuStrip1.SuspendLayout();
        this.SuspendLayout();

        this.menuStrip1.Items.AddRange(new ToolStripItem[] {
        this.fileToolStripMenuItem});
        this.menuStrip1.Location = new System.Drawing.Point(0, 0);
        this.menuStrip1.Name = "menuStrip1";
        this.menuStrip1.Size = new System.Drawing.Size(284, 24);
        this.menuStrip1.TabIndex = 0;
        this.menuStrip1.Text = "menuStrip1";

        this.fileToolStripMenuItem.DropDownItems.AddRange(new ToolStripItem[] {
        this.openModelessFormToolStripMenuItem});
        this.fileToolStripMenuItem.Name = "fileToolStripMenuItem";
        this.fileToolStripMenuItem.Size = new System.Drawing.Size(37, 20);
        this.fileToolStripMenuItem.Text = "File";

        this.openModelessFormToolStripMenuItem.Name = "openModelessFormToolStripMenuItem";
        this.openModelessFormToolStripMenuItem.Size = new System.Drawing.Size(187, 22);
        this.openModelessFormToolStripMenuItem.Text = "Open Modeless Form";
        this.openModelessFormToolStripMenuItem.Click += new System.EventHandler(this.openModelessFormToolStripMenuItem_Click);

        this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
        this.AutoScaleMode = AutoScaleMode.Font;
        this.ClientSize = new System.Drawing.Size(284, 262);
        this.Controls.Add(this.menuStrip1);
        this.MainMenuStrip = this.menuStrip1;
        this.Name = "DemoLostfocus";
        this.Text = "DemoLostfocus";
        this.menuStrip1.ResumeLayout(false);
        this.menuStrip1.PerformLayout();
        this.ResumeLayout(false);
        this.PerformLayout();
    }

    private MenuStrip menuStrip1;
    private ToolStripMenuItem fileToolStripMenuItem;
    private ToolStripMenuItem openModelessFormToolStripMenuItem;

    public DemoLostfocus()
    {
        InitializeComponent();
    }

    private void openModelessFormToolStripMenuItem_Click(object sender, EventArgs e)
    {
        (new DemoLostfocus()).Show();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T16:08:39.593

这是 .NET 4.5 中引入的一个非常讨厌的错误。知识库文章[可在此处获得](http://support.microsoft.com/kb/2769674)。该修复程序目前仅作为修补程序提供，希望它很快会成为服务更新。我将复制/粘贴描述：

> 假设您有一个基于 .NET Framework 4.5 的 Windows 窗体应用程序。当您单击菜单项以在应用程序中打开子窗口时，与菜单和子窗口的交互行为不正确。
> 
> 例如，您可能会遇到以下情况：
> 
> 当您在子窗口中打开上下文菜单时，主窗口将获得焦点。
> 您不能使用助记符访问菜单项。
> 
> 出现此问题的原因是 IMessageFilter 接口过于激进地脱钩。因此，.NET Framework 4.5 不会过滤与菜单相关的窗口消息。

* * *

更新：此问题已在 2013 年 1 月 8 日发布的 .NET 4.5 更新中得到修复。知识库文章[在此处](http://support.microsoft.com/kb/2750149)。

# ios - UICollectionView 在 reloadData 后在屏幕外崩溃

> ID：14160035
> 
> 赞同：3
> 
> 时间：2013-01-04T15:31:17.807
> 
> 标签：ios, xcode, uicollectionview

在我的应用程序中，我有一个`UICollectionView`和一个`UITableView`. 我使用电视进行导航，使用 CV 进行详细介绍。用户可以更改电视和 CV 的宽度（每次平移；像一个灵活的`UISplitViewController`）。

当用户在电视中选择一个项目时，应用程序会使用相应的详细项目更新 CV。我用

```
[myCV reloadData]; 
```

用于更新简历。当 CV 可见时，这非常有效。

允许用户将导航电视缩放到最大（全屏宽度） - 为此我将 CV 宽度设置为零。当 CV 不可见时，用户选择另一个项目（-> cv reloadData），然后用户重新打开 content-CV，出现以下错误：

> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“当集合视图中只有 1 个部分时，请求第 2 部分之前的项目数”

到目前为止，我可以弄清楚 - CV 在 reloadData 时不会正确更新自身，当它不可见时（因为它的宽度为零，或者它不在屏幕上，或者被另一个视图隐藏）。当我再次将 CV 宽度设置为 > 0 的值时，会发生错误。似乎 CV 句柄仍然是旧的 cellItems，而不是 dataDelegate 提供的新 cellItems。

知道如何解决这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T17:52:40.407

我通过变通方法解决了这种情况。

在我将内容视图设置为零宽度之前，我从其父视图中删除了内容视图。而且我没有将内容视图宽度设置为 0。当用户再次滑动内容视图打开时，我应该设置宽度 > 0，我再次将视图添加到其超级视图，然后将新宽度设置为其框架.

它不是很优雅，但就像魅力一样。

# sql - sql server 存储过程返回选定的数据

> ID：14160037
> 
> 赞同：1
> 
> 时间：2013-01-04T15:31:23.087
> 
> 标签：sql, sql-server, asp-classic

我无法在经典的 asp 代码中使用以下存储过程。它应该返回数据行。我会很感激你的帮助。谢谢

代码：

```
Set cmdSessionProc = Server.CreateObject("ADODB.Command")
cmdSessionProc.ActiveConnection = conn
cmdSessionProc.CommandText = "GetDetails"
cmdSessionProc.CommandType = adCmdStoredProc
    cmd.Parameters.Append cmd.CreateParameter("RetVal", adInteger, adParamReturnValue)
cmdSessionProc.Parameters.Append 
   cmdSessionProc.CreateParameter "SessionID", adInteger, adParamReturnValue 
cmdSessionProc("SessionID")= required data value (int)
cmdSessionProc.execute

ALTER Procedure [xxxxxxx].[GetDetails]
(@ID   int)
AS
    SELECT  *
    FROM [xxxtablexxx] 
    WHERE [ID] = @ID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:51:35.863

在经典 VB 中，`Execute`返回一个`ADODB.Recordset`. 你可以阅读它：

```
Set rstRecordSet = cmdSessionProc.execute
For i = 1 To rstRecordSet.RecordCount
    MsgBox rstRecordSet.Fields(0).Name & "=" & rstRecordSet.Fields(0)
    rstRecordSet.MoveNext
Next
rstRecordSet.Close 
```

[MSDN 上](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675104%28v=vs.85%29.aspx)有很好的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:34:02.567

除了 Andomar 对实际阅读结果集的回答之外，我注意到您还有其他一些问题。

*   您使用 xxxxxxx 掩盖了存储过程的架构。如果架构不是连接字符串中指定的用户的默认值（通常是 dbo），您还应该在 CommandText 中指定架构，即`cmdSessionProc.CommandText = "xxxxxxx.GetDetails"`. 实际上，无论如何，您都应该*始终*指定架构，而不是出于性能原因让它默认。
*   您的存储过程有 1 个参数 @ID，但您的示例代码指定了 2 个参数，“RetValue”作为返回值（没关系）和 SessionID***也作为返回值***。第二个必须是`adParamInput`并且名称必须与存储的过程的参数名称匹配（因为您不必按照与过程中相同的顺序创建参数）。事实上，我相信你也需要在字符串中加入 @ 符号。`cmdSessionProc.Parameters.Append cmdSessionProc.CreateParameter "@ID", adInteger, adParamInput`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T17:40:19.873

我为所有页面创建了一个函数，即使是标准查询或 SP，我也使用这种方法。试试这个，希望它对你有用。

```
dsn = "" 'your SQL connection param
Set conn = Server.CreateObject("ADODB.Connection") 
Set rs = Server.CreateObject("ADODB.Recordset")
conn.mode = 3
conn.Open dsn
sql = "exec GetDetails 'yourparam1','yourparam2'"
rs.open sql, conn
'codes to manage the results here
'...... 
```

# tsql - 如何从 SQL Server 2008 R2 架构中的一组表中进行 SELECT 和 UNION

> ID：14160038
> 
> 赞同：0
> 
> 时间：2013-01-04T15:31:24.310
> 
> 标签：tsql, sql-server-2008-r2

我的 SQL Server 2008 R2 数据库中有一组表，它们都具有相同的列。

我需要`SELECT`和`UNION`这些表。我可以`SELECT`这样的表格：

```
SELECT TABLE_NAME FROM information_schema.tables
where (TABLE_NAME like '%_CH1' or TABLE_NAME like '%_CH0')
and TABLE_NAME not like '%test%' 
```

我现在需要的是`SELECT Column1, Column2, Column3`从该列表中的第一个人开始，`UNION SELECT Column1, Column2, Column3`从该列表中的下一个人开始，依此类推。

我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T16:01:39.243

动态查询示例；

```
--CREATE TABLE Utable1 (Col1 INT, Col2 INT, Col3 INT)
--CREATE TABLE Utable2 (Col1 INT, Col2 INT, Col3 INT)
--CREATE TABLE Utable3 (Col1 INT, Col2 INT, Col3 INT)

DECLARE  @SelectClause  VARCHAR(100)    = 'SELECT Col1, Col2, Col3'
        ,@Query         VARCHAR(1000)   = '' 

SELECT @Query = @Query + @SelectClause + ' FROM ' + TABLE_NAME + ' UNION ALL '
FROM INFORMATION_SCHEMA.TABLES
WHERE (TABLE_NAME LIKE '%_CH1' OR TABLE_NAME LIKE '%_CH0')
AND TABLE_NAME NOT LIKE '%test%'

SELECT @Query = LEFT(@Query, LEN(@Query) - LEN(' UNION ALL '))

EXEC (@Query) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T16:27:21.580

[如果列名相同， @MarkD 的答案](https://stackoverflow.com/questions/14160038/how-to-select-and-union-from-a-group-of-tables-in-the-schema-in-sql-2008-r2/14160497#14160497)会很好，但如果列名不同，那么您将需要查询`INFORMATION_SCHEMA.COLUMNS`以获取列名。

这是应该也可以工作的版本：

```
select row_number() over(order by (select 1)) id, table_name
into #tempTables
from information_schema.tables
where table_name like 'Table%'

declare @tempColumns table
(
    id int,
    column_name varchar(50),
    table_name varchar(50)
) 

declare @query varchar(max) = ''
declare @rownum int = 1
declare @maxrownum int = (select max(id) from #temptables)
declare @table varchar(50)

declare @colrow int = 1

while @rownum <= @maxrownum
  begin
    set @table = (select TABLE_NAME from #tempTables where id = @rownum)

    set @query = @query + ' SELECT '

    insert into @tempColumns    
    select row_number() over(order by (select 1)) id, COLUMN_NAME, @table
    from INFORMATION_SCHEMA.COLUMNS
    where TABLE_NAME = @table
        and ORDINAL_POSITION in (1, 2, 3)

        -- reset colrow to 1
        set @colrow = 1

        while @colrow <= 3
            begin

                set @query = @query + (select Column_name 
                                        from @tempColumns 
                                        where id = @colrow
                                            and table_name = @table) + ' as Col' + CAST(@colrow as varchar(50))

                if @colrow < 3
                    set @query = @query + ', '

                if @colrow <= 3
                    set @colrow = @colrow + 1

            end

    set @query = @query + ' FROM ' + @table

    if @rownum < @maxrownum
        set @query = @query + ' UNION ALL '

    if @rownum <= @maxrownum
        set @rownum = @rownum + 1
  end

exec(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/5d4bf/1)

# mysql - 在每个广告的每个日期存储点击次数的最佳数据库设计

> ID：14160042
> 
> 赞同：0
> 
> 时间：2013-01-04T15:31:38.110
> 
> 标签：mysql, sql, database, postgresql, model

我有一个特别的问题。我正在建模一个在线广告数据库系统，但我不知道在数据库中存储给定广告的特定日期的点击次数的最佳解决方案是什么。

* * *

### 简短的系统解释（要求）：

系统在不同的网站 (ad_page) 上展示广告。每个网站 (ad_page) 可以有许多广告位置 (ad_spot)。每个广告必须在一段时间内仅在一个位置上处于活动状态。广告不断变化的位置和页面。

对于每个广告，系统必须知道：

*   该广告处于活动状态的每个页面和时间
*   每天的点击次数（每页可选）

对于每个网站（ad_page）系统必须知道：

*   整个网站上的广告点击次数（不是特定的 ad_spot）

* * *

我拥有的当前（简化）模型：[LINK](http://s7.postimage.org/vqal4aqij/problem.png)

我知道这可能不是最好的解决方案，但我想不出更好的办法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:32:07.827

根据您的评论：

1）[归一化](https://stackoverflow.com/questions/1258743/normalization-in-mysql)。您不应该在多个地方存储相同的数据[即：点击次数]，因为它会使事情复杂化并导致这个确切的问题。创建一个单独的表来跟踪它们一次，并且只跟踪一次。

```
TABLE clicks
  ad_id INT PK
  date DATE PK
  clicks INT 
```

2）[您不一定需要预先检查日期是否存在。](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

```
INSERT INTO clicks (ad_id, date, numclicks) 
  VALUES (TODAY(), 123, 1)
  ON DUPLICATE KEY UPDATE clicks=clicks+1 
```

# symfony - 我应该从 Symfony 2 的服务容器中删除未使用的服务吗？

> ID：14160043
> 
> 赞同：4
> 
> 时间：2013-01-04T15:31:40.427
> 
> 标签：symfony, dependency-injection, symfony-2.1

我不知道这是否有一些好处：是否应该从服务容器中删除未使用的服务？

例如，在我的包配置中，我可以禁用`lang`选项提供程序：

```
my_bundle:
    providers:
        lang:
            enabled: false 
```

`lang`启用提供程序后，应`provider`添加标记。该服务在`services.xml`文件中定义并通过扩展加载：

```
<service id="my_bundle.provider.lang" class="My\Provider\LangOptionsProvider"> 
```

所以，删除这个定义是个好主意，为什么？

```
public function load(array $configs, ContainerBuilder $container)
{
    // ...

    $loader->load('services.xml'); // Loads "my_bundle.provider.lang"

    if($config['providers']['lang']['enabled']) {
        // lang provider is enabled, add the tag
        $container->getDefinition('my_bundle.provider.lang')->addTag('provider');
    }
    else { // Is this really needed?
        // Remove lang provider definition (or just the tag?!)
        $container->removeDefinition('my_bundle.provider.lang');
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T22:24:18.220

开销很小，因为在请求服务时会发生实例化，因此是否删除它并不重要。

> 当您从容器请求 my_mailer 服务时，容器会构造对象并返回它。这是使用服务容器的另一个主要优势。即，在需要之前永远不会构建服务。如果您定义了一个服务并且从不在请求中使用它，则永远不会创建该服务。这可以节省内存并提高应用程序的速度。这也意味着定义大量服务对性能的影响很小或没有。从未使用过的服务永远不会被构建。

[http://symfony.com/doc/current/book/service_container.html](http://symfony.com/doc/current/book/service_container.html)

# html - 设备上的固定宽度视口大于所述宽度

> ID：14160045
> 
> 赞同：0
> 
> 时间：2013-01-04T15:31:45.400
> 
> 标签：html, mobile, viewport

我有一个针对移动、大字体、大图像等优化的网站。目前，我有以下视口：

```
<meta name="viewport" content="width=640, user-scalable=no, maximum-scale=1"> 
```

到目前为止，它在我测试过的所有设备上都非常有效。但是，在分辨率大于 640 的 iPad（第一个）上，我在右侧得到了一些空白。

我想要它，以便它根据设备放大或缩小，这是我可以做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:11:36.650

问题是由`maximum-scale=1`属性引起的。您的视口大小 (640px) 小于 iPad 显示屏的宽度，但 Safari 不会放大以消除此空白，因为比例固定为 100%。删除该`maximum-scale=1`属性，空格应该会消失。

# iphone - iOS UITextField 自定义键盘

> ID：14160046
> 
> 赞同：0
> 
> 时间：2013-01-04T15:31:47.660
> 
> 标签：iphone, uitextfield, custom-view, becomefirstresponder, inputview

我的应用程序上有一个自定义键盘视图，位于屏幕底部，它基于 Fabrizio Prosperi 的 FPNumberPadView。

我也有几个 UITextFields，我希望这个键盘总是在屏幕上，无论文本字段是否有焦点。

这是有效的，但是，无论我最初在屏幕上分配给键盘的位置如何，只要我点击第一个文本字段（并成为第一响应者），它就会消失并立即像常规系统键盘一样滑入屏幕将。

这就是我想要摆脱的。我希望从一开始就将键盘放在底部，当我点击文本字段时，他们会从这个自定义键盘接收字符。

有关如何完成此操作的任何提示/链接/帮助？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:54:23.643

首先，我认为将键盘一直放在屏幕上并不是一个好主意。我很确定这违反了 Apple 的指导方针。

无论如何，为了实现它，一个解决方案是在其他文本字段之一辞去其第一响应者角色后，让一个不可见（隐藏和/或视图之外）文本字段成为“第一响应者”。

# google-maps - Apple Maps 和 Google Maps API 的参数相同吗？

> ID：14160049
> 
> 赞同：8
> 
> 时间：2013-01-04T15:31:59.723
> 
> 标签：google-maps, google-maps-markers, compatibility, apple-maps

在 iPhone 和 iPad 等 iOS 6 设备以及最新的 Mac 设备上，[maps.apple.com/maps?q=cupertino](http://maps.apple.com/maps?q=cupertino)的链接在 Apple 的本地地图应用程序中打开。

在非 Mac 计算机和其他设备上，它会转到[maps.google.com/maps?q=cupertino](http://maps.google.com/maps?q=cupertino)。

这是开发人员欢迎的功能，但是，Google 地图是否支持 Apple 的 API？

换句话说，[以下所有 Apple Maps 参数](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html#//apple_ref/doc/uid/TP40007894-SW1)是否都可以完美地转换为网络上 Google Maps 中的某些内容？

```
q=      The query parameter.
near=   The location part of the query.
ll=     The latitude and longitude points for the map center point.
sll=    The latitude and longitude points from which a business search should be performed.
spn=    The approximate latitude and longitude span.
sspn=   A custom latitude and longitude span format used by Apple.
t=      The type of map to display.
z=      The zoom level.
saddr=  The source address, which is used when generating driving directions
daddr=  The destination address, which is used when generating driving directions. 
```

还是最好不要在网站上使用其中一些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-11T14:50:42.477

现在唯一的负面部分是[https://maps.apple.com](https://maps.apple.com)在 Apple 设备上显示证书错误，但在非 Apple 设备上直接转到 google。当然，您可以直接链接到[http://maps.apple.com](http://maps.apple.com)，但 HTTPS 无处不在，不是吗？

# coding-style - 为什么在许多示例中函数被称为 foo

> ID：14160050
> 
> 赞同：1
> 
> 时间：2013-01-04T15:32:13.213
> 
> 标签：coding-style

也许这是错误的站点，但我真的很好奇为什么在这么多不同语言的示例中他们使用**foo**作为函数或方法的名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:34:18.920

这可能来自 FUBAR 的首字母缩略词，它代表`F***ed Up Beyond All Repair`，并很快适应了编程`foobar`，然后`foo`是 , `bar`（以及`baz`作为附加项）。

这真的是编程的民间传说。

`FUBAR`有关更多历史琐事，请参见 Wikipedia 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:37:49.707

这是一个 wiki 页面，它解释了其历史的一些可能原因。[http://en.wikipedia.org/wiki/Foobar#History_and_etymology](http://en.wikipedia.org/wiki/Foobar#History_and_etymology)

然而，军事术语“FUBAR（F *** ED 超出所有认知/任何维修/所有原因）”但也有一些例子表明它更早的使用。

# javascript - 检测到谷歌地图被关闭并且谷歌地图信息窗口被关闭

> ID：14160052
> 
> 赞同：0
> 
> 时间：2013-01-04T15:32:23.760
> 
> 标签：javascript, google-maps, jquery-ui-dialog

我正在尝试创建一个地图对话框，允许用户选择他或她想要的位置。

我有一个位于[http://jsfiddle.net/HCUPa/1/](http://jsfiddle.net/HCUPa/1/)的工作示例，源代码如下。

当信息窗口关闭时（通过单击信息窗口上的 X），如何删除关联的标记？然后我是否需要从数组中删除 infowindows 名称，如果需要，如何？

此外，当地图（或对话框，然后是地图）关闭时，我如何检测到它正在关闭，我应该清理任何资源，如果是的话，怎么做？

如示例中所示，我尝试对两者都使用 addListeners ，但它不起作用。

最后，这不是我的正式问题，但如果我通常这样做是否正确，我将不胜感激。这是我第一次尝试 Google map api，我仍然是 JavaScript 新手，如果有任何建议、批评等，我将不胜感激。

谢谢

```
<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
        <style type="text/css">
            #googleMap { height: 100%;width: 100%;}
            div.modify-title-bar div.ui-dialog-titlebar {border:0;background-image:none;background-color:transparent;padding:0;margin:0;}
            #dialog-map,div.modify-title-bar {padding:0;margin:0;}
        </style>
        <script src="http://code.jquery.com/jquery-latest.js"></script> 
        <link type="text/css" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" rel="stylesheet" />
        <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script> 
        <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDY0kkJiTPVd2U7aTOAwhc9ySH6oHxOIYM&sensor=false"></script>
        <script type="text/javascript">

            function createMap(geocoder,myCenter,address) {

                var map = new google.maps.Map(document.getElementById("googleMap"),{center:myCenter,zoom:5,mapTypeId:google.maps.MapTypeId.ROADMAP});

                var marker = new google.maps.Marker({position: myCenter,map: map,});

                var infowindow = new google.maps.InfoWindow({content: '<span>'+address+'</span><br><button class="accept">Select Address</button>'});
                infowindow.open(map,marker);

                google.maps.event.addListener(map, 'close', function(event) {
                    //How do I detect map closing, what and how should I clean up?  Maybe move to dialog close?
                    alert('close map');
                    delete geocoder,myCenter,address,map,marker,infowindow;
                });

                google.maps.event.addListener(map, 'click', function(event) {
                    marker.setMap(null);
                    marker = new google.maps.Marker({
                        position: event.latLng,
                        map: map,
                    });
                    geocoder.geocode({location: event.latLng}, function(GeocoderResult, GeocoderStatus) {
                        infowindow.close();
                        infowindow = new google.maps.InfoWindow({content: '<span>'+GeocoderResult[0].formatted_address+'</span><br><button class="accept">Select Address</button>'});
                        infowindow.open(map,marker);
                    });
                    google.maps.event.addListener(infowindow,'closeclick',function(){
                        //How do I detect if infowindow is closed?  Do I then need to remove the infowindows name from the array, and if so, how?
                        alert('Remove marker');
                        marker.setMap(null);
                    });
                });
            }

            $(function(){
                $("#googleMap").on("click", "button.accept", function(){
                    $('#address').val($(this).parent().children('span').eq(0).text());
                    $("#dialog-map").dialog('close');
                });

                $("#findIt").click(function(){$("#dialog-map").dialog("open");return false;});
                $("#dialog-map").dialog({
                    autoOpen    : false,
                    resizable   : false,
                    height      : 500,
                    width       : 800, 
                    modal       : true,
                    dialogClass : 'modify-title-bar',
                    open        : function() {
                        var address=$.trim($('#address').val()),
                        geocoder=new google.maps.Geocoder,
                        LatLng,
                        //Default LatLng
                        Ya=47.6204901, Za=-122.34964839999998,
                        //Give default address to limit geocoder calls
                        default_address='400 Broad Street, Seattle, WA 98109, USA';
                        if(address) {
                            geocoder.geocode({address: address}, function(GeocoderResult, GeocoderStatus) {
                                if (GeocoderStatus=='OK') {
                                    LatLng=GeocoderResult[0].geometry.location;
                                }
                                else {
                                    LatLng=new google.maps.LatLng(Ya,Za);
                                    adderss=default_address;
                                }
                                createMap(geocoder,LatLng,address);

                            });
                        }
                        else {
                            LatLng=new google.maps.LatLng(Ya,Za);
                            createMap(geocoder,LatLng,default_address);
                        }
                    }
                });

            });

        </script>
    </head>
    <body>
        <button id="findIt">Find it on a map</button>
        <input id="address" type="text" value="1600 Pennsylvania Avenue Northwest Washington, DC">
        <div id="dialog-map" title="Select a location">
            <div id="googleMap"></div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:11:41.703

创建一个监听 infowindow 关闭事件的新函数

```
function infowindowClose(infowindow, marker) {
    google.maps.event.addListenerOnce(infowindow, 'closeclick', function() {
        marker.setMap(null);
    });
} 
```

每次创建新信息窗口时调用它。

[工作演示](http://jsfiddle.net/HCUPa/7/)

您第一次使用 API 就做得很好。如果您想要多个标记和信息框，则需要进行一些更改，否则就可以了。

# javascript - 从字符串中检测 CSS 选择器的类型

> ID：14160055
> 
> 赞同：0
> 
> 时间：2013-01-04T15:32:26.650
> 
> 标签：javascript, regex, css-selectors

我有一些 JSON，其中包含数千种不同的 CSS 选择器，这里是各种示例......

```
"#mid_ad_title",
"#mid_mpu",
"#mid_roll_ad_holder",
".SidebarAdvert",
".SitesGoogleAdsModule",
".SkyAdContainer",
"a[href$=\"/vghd.shtml\"]",
"a[href*=\"/adrotate/adrotate-out.php?\"]",
"a[href^=\"http://ad-apac.doubleclick.net/\"]",
"#mn #center_col > div > h2.spon:first-child + ol:last-child",
"#resultspanel > #topads",
"#rhs_block > #mbEnd" 
```

如您所见，JSON 由各种选择器组成——有些只是一个类，有些只是一个 ID，有些是混合的。

我想根据选择器的类型使用相关的 JavaScript“get”方法，所以对于只是 ID 的选择器，我会使用`document.getElementById()`等。

有谁知道任何正则表达式或在我循环遍历 JSON 时会告诉我选择器类型的东西？即`"class", "id", "other"`。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:39:06.340

我认为您会在 a 中找到更多用途`switch`：

```
var results = [];
for(var i = 0; i < selectors.length; i++){
    var s = selectors[i];
    if( s.indexOf(' ') !== -1){
        s = s.substring(0, s.indexOf(' '));
    }
    switch(selectors[i][0]){
        case '#': // ID
        results.push(document.getElementById(s.substr(1)));
        break;
    case '.': // Class
        results.push(document.getElementsByClassName(s.substr(1)));
        break;
    default: // Tag
        results.push(document.getElementsByTagName(s));
        break;
    }
} 
```

* * *

**但是**，唯一可靠的解决方案是使用：

```
document.querySelectorAll(selector); 
```

# iis - 从CF9升级到CF10后，网站只显示黑屏

> ID：14160065
> 
> 赞同：0
> 
> 时间：2013-01-04T15:33:06.363
> 
> 标签：iis, iis-7, coldfusion, coldfusion-9, coldfusion-10

我已经成功安装了 ColdFusion 10。但是，如果没有运行以前的 Coldfusion 9 实例，我的网站将无法运行。

就像 CF10 看不到我的 IIS 网站一样。当我尝试使用 CF10 时，我没有收到任何错误，它只是不呈现屏幕（全为空白）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T14:38:04.967

这可能有很多原因，因为相当多的人似乎在升级到 ColdFusion 10 时遇到问题。根据您提供的信息，听起来 IIS 仍然连接到 ColdFusion 9 而不是冷融合 10。

您可以通过将以下代码段添加到 ColdFusion 页面以输出您的 ColdFusion 版本（当 ColdFusion 9 运行时）来验证这一点：

```
<cfoutput>#SERVER.ColdFusion.ProductVersion#</cfoutput> 
```

如果它以 9 开​​头，则 IIS 正在连接到旧的 ColdFusion 版本。如果是这种情况，我建议重新运行 ColdFusion 连接器（适用于版本 10）。使用配置器的说明可在[http://help.adobe.com/en_US/ColdFusion/10.0/Installing/WSc3ff6d0ea77859461172e0811cdec18a15-7ffb.html](http://help.adobe.com/en_US/ColdFusion/10.0/Installing/WSc3ff6d0ea77859461172e0811cdec18a15-7ffb.html)获得，但它应该是运行它的情况（ColdFusion 10 配置器，而不是 ColdFusion 9一），从所有 IIS 站点中删除 ColdFusion，然后在配置器中读取这些条目。

然后你应该发现在加载页面时使用了 ColdFusion 10。如果这不起作用，您应该确保 ColdFusion 10 服务正在运行，按照 Aaron Greenlee 的建议查看日志文件。

# python - 如何使 OpenERP 中的字段仅用于特定的工作流状态？

> ID：14160068
> 
> 赞同：11
> 
> 时间：2013-01-04T15:33:20.467
> 
> 标签：python, postgresql, openerp

在我的 OpenERP 安装中，我有以下字段，以前不需要，但我将所需的参数更改为 True。

```
'fiscal_position': fields.many2one(
    'account.fiscal.position',
    'Fiscal Position',
    required=True,
    readonly=True,
    states={'draft':[('readonly',False)]}
    ), 
```

在调试日志中，我看到 ORM 尝试为数据库中的该字段设置非空约束。

```
2013-01-04 15:28:56 EET STATEMENT:  ALTER TABLE "account_invoice"
    ALTER COLUMN "fiscal_position" SET NOT NULL 
```

我怎样才能防止这种情况？我的想法是拥有所需的 True 标志，仅用于新记录并且没有 NOT NULL 约束。在其他情况下，会发生 PostgreSQL 完整性错误：

```
IntegrityError: null value in column "fiscal_position" violates
    not-null constraint 
```

那么，我怎样才能在表单视图中有一个必填字段，而不使 ORM 触及数据库方案约束？或者如何根据对象的状态动态更改所需的字段？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-04T16:44:37.423

要使某个字段仅在某些状态下需要，请在模型中将其保留为不需要，并在表单视图中设置需要该字段的条件：

```
<field
    name="fiscal_position"
    attrs="{'required':[('state','in',['pending','open'])]}"
    /> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-05T07:38:54.270

如果您`required=True`在`.py`文件中写入，则 ORM 将向该字段添加非空约束。

有多种方法可以编写代码。

1.  `required=True`在文件中制作`.py`并为该字段设置默认值。
2.  制作`required=False`并安装`required=True`在`view.xml`.
3.  制作`required=False`并设置对象`required=True`的`view.xml`某些状态。

这可能有助于解决您的问题。

# jquery - removeAttr('style') 只能随机工作

> ID：14160069
> 
> 赞同：0
> 
> 时间：2013-01-04T15:33:22.107
> 
> 标签：jquery, css, attr

当当前幻灯片离开我的 jcarousel 容器时，我在一堆对象上调用以下内容：

```
$.fn.removeAnimation = function() {
    var o = $(this);
    o.stop(true, true).removeAttr('style');
} 
```

$(this) 指的是幻灯片上存在的一堆对象，例如 h2、h3、p、img 等。

奇怪的是，如果我继续在幻灯片上来回循环，则样式不会从某些元素中删除。这里影响哪些元素也是非常随机的。

有谁知道这是为什么？

# inheritance - Symfony2 继承工作

> ID：14160073
> 
> 赞同：-1
> 
> 时间：2013-01-04T15:33:37.973
> 
> 标签：inheritance, symfony, bundle

我想使用 Symfony2 Bundle 继承特性来覆盖它的核心翻译组件。在我继续之前，我想对它有一些建议。有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T22:29:02.330

Symfony2 有一种简单的方法来覆盖**bundles**，但您想覆盖 Translation **Component （有关**[此答案](https://stackoverflow.com/a/7122099/1149495)中 bundles、components 和 bridge 之间差异的更多信息）。

如果你想覆盖翻译组件，你可以利用依赖注入的优势。如果 Symfony2 框架使用翻译，它使用翻译服务之一。因此，如果您需要覆盖任何您想要的内容，请编辑翻译服务。您可以在 中找到所有翻译服务和参数`vendor/symfony/src/symfony/bundle/frameworkbundle/resources/config/translation.xml`。

您可以看到 Symfony 将他们用作服务的每个类都存储为参数，您只需将参数更改为您想要的类名，您就可以准备好了！

例如，我们想要覆盖`Translator`. 我们可以生成一个`Acme\DemoBundle\Translation\Translator`至少扩展的类`Symfony\Component\Translation\TranslatorInterface`并将其添加到我们的服务配置中：

```
parameters:
    translator.class: Acme\Demobundle\Translation\Translator 
```

# sharepoint - 子站点中的 CrossListQueryInfo

> ID：14160078
> 
> 赞同：1
> 
> 时间：2013-01-04T15:33:49.703
> 
> 标签：sharepoint, caching, sharepoint-2010

情况是：
我有子站点（SPWeb）htp://servername/subsitename/
，我需要使用 CrossListQueryInfo 在所有列表中查找项目，但只是在这个子站点（SPWeb）中我这样做：

```
 var query = new CrossListQueryInfo
                            {
                                Lists = "<Lists ServerTemplate=\"100\" />",
                                ViewFields =  "...",
                                Webs = "<Webs Scope=\"Recursive\" />",
                                WebUrl = web.ServerRelativeUrl,
                                UseCache = true,
                                Query =  "..."
                            };
var cache = new CrossListQueryCache(query);
var dataTable = cache.GetSiteData(web.Site, CrossListQueryCache.ContextUrl())) 
```

但是在整个站点集合中进行此搜索，使用它的正确方法是什么？我想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T15:12:09.900

为了仅检索特定站点的项目，请为[Webs](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.publishing.crosslistqueryinfo.webs.aspx)属性指定空值。

根据 MSDN：

> **Webs**属性指定要包括在查询中的网站。默认情况下，查询只考虑调用 GetSiteData 方法的网站。
> 
> **您可以通过将 Webs 属性设置为包含Webs**标记和 **Scope**属性的字符串来扩大查询的范围。Scope 属性的可能值包括 Recursive 和 SiteCollection。
> 
> ```
> <Webs Scope="Recursive" />
> 
> <Webs Scope="SiteCollection" /> 
> ```
> 
> 当 Scope 属性设置为 Recursive 时，查询会考虑当前网站和当前网站的所有子网站。
> 
> 当 Scope 属性设置为 SiteCollection 时，查询会考虑与当前网站位于同一网站集中的所有网站。在两个属性值中，这是更具包容性的

* * *

所以，更新的代码：

```
var query = new CrossListQueryInfo
                            {
                                Lists = "<Lists ServerTemplate=\"100\" />",
                                ViewFields =  "...",
                                Webs = string.Empty,  // considers only the Web site from which the GetSiteData method was invoked
                                WebUrl = web.ServerRelativeUrl,
                                UseCache = true,
                                Query =  "..."
                            };
var cache = new CrossListQueryCache(query);
var dataTable = cache.GetSiteData(web.Site, CrossListQueryCache.ContextUrl())) 
```

# wpf - WPF Charting Toolkit：数据点样式

> ID：14160082
> 
> 赞同：0
> 
> 时间：2013-01-04T15:33:54.073
> 
> 标签：wpf, xaml, charts, styles, datapoint

我有一个自定义我的线系列的数据点的 pb。我尝试通过设置我的自定义模板来使用用于折叠数据点的示例，但是，如果我自定义数据点模板，则线系列消失并且只显示数据点。

这是我的曲线样式的一部分：

```
 <visualizationToolkit:ResourceDictionaryCollection x:Key="ChartPaletteDataPoints">
            <!-- Curve 1 -->
            <ResourceDictionary>
                <Style x:Key="DataPointStyle" TargetType="Control" >
                    <Setter Property="Background" Value="{Binding Data.Children[0].Color, Source={StaticResource proxyCurv}}" />
                    <Setter Property="Width" Value="19" />
                    <Setter Property="Height" Value="19" />
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="chartingToolkit:LineDataPoint">
                                <Grid x:Name="Root">
                                    <ToolTipService.ToolTip>
                                        <StackPanel Orientation="Horizontal" >
                                            <Label Content="("/>
                                            <Label Content="{TemplateBinding IndependentValue}"/>
                                            <Label Content=","/>
                                            <Label Content="{TemplateBinding DependentValue}"/>
                                            <Label Content=")"/>
                                        </StackPanel>
                                    </ToolTipService.ToolTip>
                                    <Label Margin="3,3,0,0" HorizontalContentAlignment="Center" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" VerticalContentAlignment="Center" >
                                        <Label.Content>
                                            <MultiBinding Converter="{StaticResource GroupSymbolToShapeConverter}">
                                                <Binding Path="Data.Children[0].Symbol" Source="{StaticResource proxyCurv}"/>
                                                <Binding Path="Data.Children[0].Color" Source="{StaticResource proxyCurv}"/>
                                            </MultiBinding>
                                        </Label.Content>
                                    </Label>
                                </Grid>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
                <Style x:Key="DataShapeStyle" TargetType="Shape">
                    <Setter Property="Stroke" Value="{Binding Data.Children[0].Color, Source={StaticResource proxyCurv}}" />
                    <Setter Property="StrokeThickness" Value="2" />
                    <Setter Property="StrokeMiterLimit" Value="1" />
                    <Setter Property="Fill" Value="{Binding Data.Children[0].Color, Source={StaticResource proxyCurv}}" />
                </Style>
            </ResourceDictionary>
    <!--Other Curves...-->
    </visualizationToolkit:ResourceDictionaryCollection> 
```

PS：`GroupSymbolToShapeConverter`返回一个包含数据点形状的形状对象。

# emacs - 无法在 nrepl + emacs 中评估表单

> ID：14160083
> 
> 赞同：9
> 
> 时间：2013-01-04T15:33:55.030
> 
> 标签：emacs, clojure

我已经安装了*nrepl*、*clojure-mode*和*starter-kit-lisp*包。我可以通过打开我的 .clj 文件然后打开 Mx nrepl-jack-in 来启动 nrepl。

但是，当我通过 Cx Ce 评估 .clj 文件中的任何表单时，我会收到以下消息：

```
 inferior-lisp-proc: No Lisp subprocess; see variable `inferior-lisp-buffer' 
```

我怎样才能正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T23:09:55.537

我已经多次遇到这个问题。在所有情况下，这是因为当*nrepl*启动时，在 clj 缓冲区中尚未启用 nrepl 次要模式。因此，任何评估尝试都会因此错误而失败。

*应该*有一个“nrepl”菜单项。如果没有，这可能是你的问题。Mx nrepl-enable-on-existing-buffers 应该修复它。

我有一段时间遇到这个问题，现在它似乎已经消失了；您可能想尝试重新安装 clojure-mode 和 nrepl。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T14:14:02.147

你确定`M-x nrepl-jack-in`工作了吗？如果是这样，您应该在 emacs 中收到 repl 提示，如下所示：

![nrepl 插件](../Images/65deeea4ddfa30366bc82d376d1efeb7.png)

nrepl 需要 leiningen 2，因此请确保您在项目中使用正确的版本并且正确安装了 nrepl 插件。

还要确保编辑 .clj 文件时的主要模式是`clojure-mode`.

您可能需要发布屏幕截图以便更轻松地发现问题。

# mysql - 如何在mysql中返回值出现在位置n的字符串中的所有匹配项？

> ID：14160089
> 
> 赞同：0
> 
> 时间：2013-01-04T15:34:11.717
> 
> 标签：mysql, phpmyadmin, position, substring, where-clause

我希望在 phpmyadmin (mysql) 中运行一个查询，该查询将在字符串中的特定位置检查表中的特定值，我是 mysql 新手，这是我尝试过的，但存在语法问题。我希望在位置 5 处找到值“1”并显示所有拥有此值的用户。

```
SELECT* 
FROM`user` 
WHERE`options`LOCATE(`options`,1,5) 
LIMIT 0 , 30 
```

问候，筒仓

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T15:36:38.047

Locate 用于在字符串中的 ANYWHERE 中查找值。您只需要特定位置，因此请[`substr()`](http://dev.mysql.com/doc/refman/5.0/en//string-functions.html#function_substr)改用：

```
SELECT * 
FROM user
WHERE substr(options, 5, 1) = '1' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:36:29.527

你可以试试

```
SELECT* 
FROM`user` 
WHERE options LIKE '____1%'
LIMIT 0 , 30 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T15:44:29.763

其他 ;）

```
SELECT * 
FROM user
WHERE instr(options, '1') = 5 
```

**Duh** .. 好吧，因为它只返回第一次出现，所以行不通：$ 但是请检查参考，

*   [SQLFIDDLE](http://sqlfiddle.com/#!2/cd5bc/3)使用`Locate()`

样本数据：

```
COL1    COL2
G11     112
G11-1   0
G11-2   2
G12-2   111 
```

查询1：

```
-- to check on varchar columns
SELECT * 
FROM tablex
where locate('1',col1,5)
; 
```

varchar 上的结果：

```
COL1    COL2
G11-1   0 
```

查询 2：

```
-- to check on int columns
SELECT * 
FROM tablex
where locate(1,col2,2)
; 
```

int 的结果：

```
COL1    COL2
G11     112
G12-2   111 
```

# jakarta-ee - jdk安装时发生的一系列事件然后出错

> ID：14160091
> 
> 赞同：0
> 
> 时间：2013-01-04T15:34:16.483
> 
> 标签：jakarta-ee, sdk, java

我正在尝试从[这里获取我的系统上的 JDK (EE)](http://www.oracle.com/technetwork/java/javaee/downloads/index.html)

我有 Windows 32 位，我得到了正确的版本`java_ee_sdk-6u4-jdk7-windows.exe`

发生的一系列事件是

1.  ![在此处输入图像描述](../Images/af184864dcf46cb11449bec9287763a3.png)

2.  ![在此处输入图像描述](../Images/25f980a343aaf15582bd2189e3382bf7.png)

3.![在此处输入图像描述](../Images/3c4b57a35e4353c1abf501b96e72cd4a.png)

为什么？我的理解`JRE`是部分或`JDK`。

我必须先`JRE`分开吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:39:17.853

`Java Platform, Standard Edition`我认为您需要（Java SE）的副本来安装它。

# c - 计算数组的重复排列

> ID：14160098
> 
> 赞同：0
> 
> 时间：2013-01-04T15:34:29.687
> 
> 标签：c, algorithm

假设我有一个包含 5 个元素的数组。如何在 C 中计算此数组的所有可能重复排列。

编辑：我的意思是使用 5 个数字创建所有可能的数组。所以位置很重要。

例子：

```
array = [1,2,3,4,5]

[1,1,1,1,1]
[1,1,1,1,2]
[1,1,1,2,3]
.
. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T15:44:59.017

生成组合或排列的常用方法是使用递归：枚举第一个元素的每种可能性，并将这些可能性添加到减少一个元素的同一集合的每个组合或排列中。因此，如果我们说您正在寻找一次取*k的**n 个*事物的排列数，并且我们使用符号 perms( *n* , *k* )，您会得到：

 ***```
perms(5,5) = {
    [1, perms(5,4)]
    [2, perms(5,4)]
    [3, perms(5,4)]
    [4, perms(5,4)]
    [5, perms(5,4)]
} 
```

同样，对于 perms(5,4) 你会得到：

```
perms(5,4) = {
    [1, perms(5,3)]
    [2, perms(5,3)]
    [3, perms(5,3)]
    [4, perms(5,3)]
    [5, perms(5,3)]
} 
```

所以 perms(5,5) 的一部分看起来像：

```
[1, 1, perms(5,3)]
[1, 2, perms(5,3)]
[1, 3, perms(5,3)]
[1, 4, perms(5,3)]
[1, 5, perms(5,3)]
[2, 1, perms(5,3)]
[2, 2, perms(5,3)]
... 
```

定义 perms( *n* , *k* ) 很容易。至于任何递归定义，您需要两件事：基本案例和递归步骤。基本情况是*k* = 0：perms( *n* , 0) 是一个空数组 []。对于递归步骤，您通过将集合中的每个可能值添加到 perms( *n* , *k* -1) 的所有元素来生成元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T15:42:31.467

如果我的问题正确，您需要生成所有 5 位数字，数字为 1、2、3、4 和 5。所以有一个简单的解决方案 - 生成所有以 5 为基数的数字`44444`，然后将 0 映射到 1、1到 2 以此类推。在需要的地方添加前导零 - 所以`10`变成`00010`or `[1,1,1,2,1]`。

注意：您实际上**不必**自己生成数字，您可以将数字迭代到 5**5（不包括），并通过获取以 5 为底的数字来为每个数字找到相应的序列。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T15:48:02.030

```
int increment(size_t *dst, size_t len, size_t base) {
    if (len == 0) return 0;
    if (dst[len-1] != base-1) {
        ++dst[len-1];
        return 1;
    } else {
        dst[len-1] = 0;
        return increment(dst, len-1, base);
    }
} 
```

有了这个函数，你可以从 . 开始迭代 (0 ... 4) 的所有重复排列`{0, 0, 0, 0, 0}`。当重复排列用完时，该函数将返回 0。

然后对于每个重复排列，将内容用作数组的索引，以便获得数组的重复排列，而不是 (0 ... 4)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-04T15:43:39.430

在您给定的示例中，每个位置都可以被`1`, `2`, `3`, `4`,占据`5`。由于有 5 个位置，所以可能性的总数 = `5 * 5 * 5 * 5 * 5 = 5 ^ 5 = 3125`. 一般来说，它会是`N ^ N`。（其中 ^ 是幂运算符）。

为了产生这些可能性，在每个位置上，一个接一个地输入数字`1`, `2`, `3`, `4`, `5`, 并从最后一个位置开始递增，类似于 5 位计数器。

因此，从`11111`. 增加最后一个位置以获得`11112`...直到`11115`。然后回绕到`1`，并增加下一个数字`11121`继续`11122`...`11125`等。重复此操作直到到达第一个位置，您将在 结束`55555`。***

# java - RXTX 如何从 comport 发送和读取数据

> ID：14160099
> 
> 赞同：-2
> 
> 时间：2013-01-04T15:34:34.523
> 
> 标签：java, rxtx

我是**rxtx**库的新手，我只想知道如何使用 rxtx 从 com 端口**发送**数据和**接收**数据，我是一个***窗口的***用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:43:46.477

你可以开始看[从COM](http://www.java-samples.com/showtutorial.php?tutorialid=11)和[串口通信](http://codeglobe.blogspot.ro/2009/02/serial-port-communication-in-java.html)的读取。用于此的库是 jSSC。

# php - 在控制器 zf2 学说 2 中使用动态实体

> ID：14160104
> 
> 赞同：0
> 
> 时间：2013-01-04T15:35:10.103
> 
> 标签：php, doctrine, doctrine-orm, zend-framework2

如何在控制器操作中使用动态实体名称，在 Zend 框架 2 中使用 Doctrine 2？

例如。

```
public function indexAction()
    {
        return new ViewModel(array(
            'albums' => $this->getEntityManager()->getRepository('Album\Entity\[dynamic_entity_name]')->findAll() 
        ));
    } 
```

另外，首先，我什至可以在一个控制器中使用多个实体，就像我在这里的情况一样？

**这样做的根源是**，我的应用程序中基本上有两种模式，实时和测试，用户可以在任何一种模式下保存数据（例如支付网关后端的沙盒和实时模式）。

我需要有两个不同的表，每个模式一个；例如，用户付款的 payment_test 和 payment_live 表。

因此，在我的控制器中，根据用户正在使用的当前模式（测试或实时），应从相应实体（PAYMENT_LIVE 或 PAYMENT_TEST）中检索/保存数据。

我相信在所有地方检查当前模式的条件是一个坏主意，因此我只需将其设置为某个 CURRENT_MODE CONSTANT 一次，然后将其用于动态使用实体名称，例如：

```
 public function indexAction()
        {
            return new ViewModel(array(
                'payments' => $this->getEntityManager()->getRepository('Payment\Entity\Payment_'.CURRENT_MODE.')->findAll() 
));
        } 
```

根据 CURRENT_MODE = "live" 或 "test" 的值，它将使用 Payment_live 实体进行实时模式，使用 Payment_test 实体进行测试模式。

有什么想法我应该如何实施这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:31:47.590

我的第一个想法是：为什么有两个表而不仅仅是一个标识符来查询模式。一个字段 insire you table`payments`称为`payment_modus`（可能是实时真/假的布尔值）或其他东西。

除此之外，当然您可以在一个控制器中拥有多个存储库。

```
$repo = 'Payment\Entity\Payment_'.$this->getCurrentMode();
$em->getRepository($repo); 
```

有点难以回答，因为我真的不明白你的问题到底出在哪里。

# actionscript-3 - MovieClip 对齐（具有多个状态的角色）而不使用元电影剪辑

> ID：14160105
> 
> 赞同：2
> 
> 时间：2013-01-04T15:35:12.287
> 
> 标签：actionscript-3, flash, flash-cs6

我正在开发一个游戏，屏幕上有 4 个角色，每个角色都有几个不同的状态和相应的 MovieClip，所以我的库看起来有点像这样：

字符 1：
IdleAnimation
SleepAnimation
..
字符 2：
IdleAnimation
SleepAnimation
..

每个动画（由第 3 方提供）都有不同的锚点，因此当角色 A 位于屏幕上的位置 100、100 并从空闲动画移动到睡眠动画时，由于锚点，他突然向右跳了 20 个像素。

通常我会将所有不同的状态存储在一个 MovieClip 中的不同帧中，并手动调整每个状态的位置，直到它们匹配为止，但是我也试图将其移植到 Android 上，因此必须同时保持屏幕上的孩子数量最低限度。

除了存储每个角色和每个动画的偏移 x 和 y 值，并在状态发生变化时通过代码简单地设置 x/y 之外，我还能做些什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T04:56:06.930

为了让 numChildren 失望，我想你别无选择

但要跟踪每个角色动画的 x 和 y 偏移

可能存储在 { state: registration_point } 形式的 Object 变量中。

然后在更改状态时您可以设置注册点

通过 Emanuel Feronato 的这种方法：

[http://www.emanueleferonato.com/2010/08/04/changeing-a-movieclip-registration-point-on-the-fly-with-as3/](http://www.emanueleferonato.com/2010/08/04/changing-a-movieclip-registration-point-on-the-fly-with-as3/)

一个尝试的想法是将注册点简单地放置在每个动画状态的中心：

```
 var reg_x:Number = mc.width / 2;
    var reg_y:Number = mc.height / 2; 
```

# hibernate - 使用 c3p0 连接池作为数据源进行持久化

> ID：14160108
> 
> 赞同：0
> 
> 时间：2013-01-04T15:35:17.933
> 
> 标签：hibernate, jpa, jboss, persistence, datasource

我已经使用 jBoss 作为应用服务器，实现了一个持久化的 jBPM 项目。我已经有一个在 c3p0 文件中定义的数据源，我想将它用作我的持久性单元的数据源。问题是我收到以下错误：

```
Deployment "persistence.unit:unitName=project.ear/#persUnit" is in error due to the following reason(s): javax.naming.NameNotFoundException: myProjDS not bound 
```

我已经使用 jboss 默认数据源对其进行了测试，一切都按预期工作。那么，无论如何我可以忽略文件 hsqldb-ds.xml 中的 defaultDS 并直接引用 c3p0 定义的数据源吗？

谢谢

# php - 检查 PHP 脚本中的 cookie

> ID：14160110
> 
> 赞同：0
> 
> 时间：2013-01-04T15:35:36.427
> 
> 标签：php, javascript, jquery, ajax, cookies

嘿，我仍然需要一些关于评级系统的帮助，但是我在检查 cookie 是否存在时遇到了问题，这是

```
<?php

    $rating = new ratings($_POST['widget_id']);

    isset($_POST['fetch']) ? $rating->get_ratings() : $rating->vote();

class ratings {

    var $data_file = './ratings.data.txt';
    private $widget_id;
    private $data = array();

function __construct($wid) {

    $this->widget_id = $wid;

    $all = file_get_contents($this->data_file);

    if($all) {
        $this->data = unserialize($all);
    }
}

public function get_ratings() {
    if($this->data[$this->widget_id]) {
        echo json_encode($this->data[$this->widget_id]);
    }
    else {
        $data['widget_id'] = $this->widget_id;
        $data['number_votes'] = 0;
        $data['total_points'] = 0;
        $data['dec_avg'] = 0;
        $data['whole_avg'] = 0;
        echo json_encode($data);
    } 
}
public function vote() {

    # Get the value of the vote
    preg_match('/star_([1-5]{1})/', $_POST['clicked_on'], $match);
    $vote = $match[1];

    $ID = $this->widget_id;
    # Update the record if it exists

    # doesn't update if it already exists
    if (!isset($_COOKIE[$id])) {

    if($this->data[$ID]) {
        $this->data[$ID]['number_votes'] += 1;
        $this->data[$ID]['total_points'] += $vote;
    }
    # Create a new one if it doesn't
    else {
        $this->data[$ID]['number_votes'] = 1;
        $this->data[$ID]['total_points'] = $vote;
    }

    $this->data[$ID]['dec_avg'] = round( $this->data[$ID]['total_points'] / $this->data[$ID]['number_votes'], 1 );
    $this->data[$ID]['whole_avg'] = round( $this->data[$ID]['dec_avg'] );

    file_put_contents($this->data_file, serialize($this->data));
    $this->get_ratings();
}
} //ends if isset
# ---
# end class
}

?> 
```

应该检查 cookie 是否存在的部分是：

```
if (!isset($_COOKIE[$id])) { 
```

但是由于某种原因，当我添加它时，脚本中的任何内容都不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:41:35.353

```
if (!isset($_COOKIE[$id])) { 
```

您将所有内容声明为`$ID`，但您正在使用`$id`. 试着把它换掉，看看它是否有效。

```
if (!isset($_COOKIE[$ID])) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:44:07.777

我认为你想做的是 isset （如果存在）而不是 !isset （如果不存在）

```
if (isset($_COOKIE[$id])) { 
```

# javascript - Location对象的原型对象是什么？

> ID：14160116
> 
> 赞同：6
> 
> 时间：2013-01-04T15:35:56.203
> 
> 标签：javascript, prototype

location 是 window 和 document 的所有属性。

```
window.hasOwnProperty("location")
true

document.hasOwnProperty("location")
true 
```

但是当我尝试将位置原型与 Location.prototype 进行比较时，我得到了位置未定义的错误。

虽然我可以在 Location 对象中看到 Location 构造函数。

定位的原型对象是什么？

理想情况下，我们应该能够看到 Location.prototype 及其上的方法，例如 assign 和其他两个。

铬错误？ ![在此处输入图像描述](../Images/a97cbc4819e8bfc0389570131d082f0f.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T15:42:36.107

原型可能不可见，即使它已列出。

尝试这个 ：

```
​var a = (function(){ // this is a closure protecting A
    var A = function(b){
        this.b = b;
    }
    return new A('test');
})();
console.log(a); // logs ▸A
console.log(A); // error, as A isn't defined 
```

浏览器没有理由使其`Location`可见。当然也没有理由让全局命名空间变得混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T16:07:54.830

w3 将位置对象称为“接口”，请参见[http://www.w3.org/html/wg/drafts/html/master/browsers.html#location](http://www.w3.org/html/wg/drafts/html/master/browsers.html#location) 所以扩展它的原型可能不是好主意。

为什么要扩展Location的原型？有没有更好的方法来解决您的起源问题？

# widget - 检测 tk::text 小部件中的更改

> ID：14160122
> 
> 赞同：1
> 
> 时间：2013-01-04T15:36:27.453
> 
> 标签：widget, tk

我想监视 tk::text 小部件中的每一个变化。

我的第一步只是获取所有`<Key>`事件并将它们发送到我的监控例程，但是如果我将一些文本复制到文本小部件中，这将不起作用。

我发现了一个`<Modified>`虚拟事件。这将使我能够对文本小部件中的每个更改做出反应，但我没有找到确定更改类型的方法。

对于我的实际问题，如果我将每个字符或文本都插入到我的小部件中就足够了。获取插入的位置或其他属性并不重要。

我尝试的下一件事是绑定`<Button-2>`事件。这会给我一个通知，但我无法获得插入的文本。有没有办法从 X 中获取实际选择的文本并将其复制到小部件中？这也足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:54:33.833

如果您只想通知插入、删除和替换（所有其他修改归结为），最简单的方法是拦截`insert`,`delete`和`replace`方法。以下是使用 TclOO 包装器的方法：

```
oo::class create Text {
    unexport destroy
    constructor {w} {
        rename $w [namespace current]::realwidget
        bind $w <Destroy> [namespace code {my destroy}]
    }
    self method create {w args} {
        rename [my new [::text $w {*}$args]] ::$w
        return $w
    }

    method DoingModification args {
        # Override this method to find out
    }

    method delete args {
        my DoingModification {*}$args
        tailcall realwidget delete {*}$args
    }
    method insert args {
        my DoingModification {*}$args
        tailcall realwidget insert {*}$args
    }
    method replace args {
        my DoingModification {*}$args
        tailcall realwidget replace {*}$args
    }
}
# Everything else should just be forwarded; there's a lot of methods to do
# so we loop over them all...
foreach method {
    bbox cget compare configure count debug dlineinfo dump edit get image
    index mark peer scan search see tag window xview yview
} {
    oo::define Text forward $method realwidget $method
} 
```

之后，您可以制作一个小部件并很容易地找出修改，否则一切都会像平常一样工作：

```
set w [Text create .t]
oo::objdefine $w method DoingModification {method args} {
    puts "Doing a $method on $args"
}
pack $w 
```

# input - 如何在verilog中声明输入输出类型

> ID：14160130
> 
> 赞同：0
> 
> 时间：2013-01-04T15:36:53.067
> 
> 标签：input, verilog, output

我有一个实例化两个模块的顶级模块：

```
fillRam fillRam1(
  .clk(mclk),
  .ramaddrb(ramaddrb),
  .romaddrb(romaddrb),
  .romoutb(romoutbwire),
  .raminb(raminb));

vga vgainst(
  .ck(mclk),
  .HS(HS),
  .VS(VS),
  .outRed(OutRed),
  .outGreen(OutGreen),
  .outBlue(OutBlue),
  .sw(sw),
  .romouta(romoutawire),
  .ramouta(ramoutawire),
  .romaddra(romaddra),
  .ramaddra(ramaddra)); 
```

在这个顶部模块中，我还有两个模块可以连接 RAM 和 ROM。

```
rom rom_instance (
  .clka(mclk), // input clka
  .addra(romaddrawire), // input [14 : 0] addra
  .douta(romouta), // output [7 : 0] douta
  .clkb(ck), // input clkb
  .addrb(romaddrbwire), // input [14 : 0] addrb
  .doutb(romoutb) // output [7 : 0] doutb
); 
```

我想做的是，从 vga 模块获取 romaddra 值，将其提供给 rom_instance，然后获取 romouta 值并将其返回给 vga 模块。我为此声明了两个变量：

```
reg  [14:0] romaddra;
wire  [14:0] romaddrawire;
reg [7:0] romouta;
wire [7:0] romoutawire;
assign romaddrawire = romaddra;
assign romoutawire = romouta; 
```

在每个时钟周期中，我从 vga 实例中获取 romaddra 值，将其写入 romaddrawire 并将其提供给 ROM 实例。然后我获取 romouta 值，将其写入 romoutawire 并将其返回给 VGA 实例。

我对其他 rom 端口和 ram 端口也有类似的声明。但在所有这些中，我都得到了这个错误。

```
ERROR:HDLCompilers:102 - "top.v" line 82 Connection to output port 'romaddra' must be a net lvalue 
```

在 vga verilog 代码中：

```
output reg [14:0] romaddra; 
```

在 rom verilog 中：

```
output [7 : 0] douta; 
```

我对整个 reg 和 wire 类型感到非常困惑。如果有人解释这里出了什么问题以及原因，我会很高兴。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:45:12.697

如果您的工作流程允许您使用 SystemVerilog，那么这些都可以`logic`代替`reg`or`wire`并且您的问题就会消失。

您可以稍后阅读更多内容，但现在使用`wire`for 连接或作为分配语句的一部分。`reg`当您想在块中定义值时使用`always`：

```
wire a_wire;
wire b_wire;

example_a_module(
  .a( a_wire )
);

example_b_module( 
  .a( a_wire )
);

assign b_wire = ~a_wire ; 
```

注册

```
reg a_reg;
reg b_reg;

always @* begin
  a_reg = something_else;
end

always @(posedge clk or negedge rst_n) begin
  if (~rst_n) begin
    b_reg <= 1'b0;
  end
  else begin
    b_reg <= something_else;
  end
end 
```

输出端口可以是任何类型，如果您按名称（看起来像您拥有）而不是按顺序连接它们。

输出 a 为线型：

```
module example_a_module(
  output a
);
endmodule 
```

这里 b 是一个 10 位的 reg 类型：

```
module example_c_module(
  output reg [9:0] b
);
endmodule 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:56:13.637

您可以将 regs 视为粘性，而电线只是连接两个点（如物理电线）。这并不一定意味着 reg 将始终被合成到触发器中，但 reg 将保持其先前的值，直到分配新的值。另一方面，电线是无记忆的。

一般来说，模块的输出往往是regs，模块之间的互连往往是wire。这是因为生成正确输出的逻辑往往被封装在模块中，因此实例化模块可以只传递输出。当然，在更复杂的系统中，如果模块嵌套在模块中，这将不成立。但是这个概念保持不变——如果你只是想将数据从一个模块传递到另一个模块，请使用电线。如果您需要数据“粘性”，请使用 reg。

说了这么多，制作`romaddra`reg而不是wire的原因是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T01:13:38.680

在顶层，只需声明总线并在实例化中使用这些总线。将 reg 和 assign 视为驱动程序，您不需要驱动程序，您需要电线，因此使用“电线”。当您执行“wire a=1”时，它实际上是一个分配，它创建了一个驱动程序。最重要的是，当您想要连接时，请仅使用电线，而不是分配或注册。

```
wire  [14:0] connector_15;
wire  [8:0] connector_9;

fillRam fillRam1(
  .clk(mclk),
  .ramaddrb(ramaddrb),
  .romaddrb(romaddrb),
  .romoutb(romoutbwire),
  .raminb(raminb));

vga vgainst(
  .ck(mclk),
  .HS(HS),
  .VS(VS),
  .outRed(OutRed),
  .outGreen(OutGreen),
  .outBlue(OutBlue),
  .sw(sw),
  .romouta(connector_9),
  .ramouta(ramoutawire),
  .romaddra(connector_15),
  .ramaddra(ramaddra));

rom rom_instance (
  .clka(mclk), // input clka
  .addra(connector_15), // input [14 : 0] addra
  .douta(connector_9), // output [7 : 0] douta
  .clkb(ck), // input clkb
  .addrb(romaddrbwire), // input [14 : 0] addrb
  .doutb(romoutb) // output [7 : 0] doutb
); 
```

# magento - 我如何加入 2 个产品系列（Magento）

> ID：14160135
> 
> 赞同：0
> 
> 时间：2013-01-04T15:37:14.567
> 
> 标签：magento, entity-attribute-value

我有放置在类别中的可配置产品。

例子：

可配置产品：ID 为 6 的类别中的衬衫。

此商品有多个简单商品：绿色衬衫，属性“尺码”=XL、L 和 M。

这是商店中的一种产品。

不，我想要一个集合，所以我可以选择所有具有“尺寸”= XL 的简单产品，并且简单产品的可配置产品属于 id 6 的类别。

我想我需要加入 2 个集合（简单 + 可配置）。但我在网上找不到有关它的信息。有人解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:02:53.513

您不需要为此加入 2 个集合，您可以简单地根据父项获取子产品。

//循环通过可配置产品

$simpleProducts = Mage::getModel('catalog/product_type_configurable')->getUsedProducts(null, $product);

编辑或简化：$_product->getTypeInstance()->getUsedProducts(); 这将是最好的解决方案

# glassfish-3 - 在 Glassfish 中部署 Guvnor 的步骤

> ID：14160138
> 
> 赞同：4
> 
> 时间：2013-01-04T15:37:29.463
> 
> 标签：glassfish-3, drools-guvnor

[当我尝试将 Guvnor 部署到 Glassfish 上时，我遇到了与此处](https://stackoverflow.com/questions/13684673/drools-guvnor-on-glassfish-error)相同的问题。

如果有人成功部署，将最新版本的 Guvnor（例如 5.4）部署到最新版本的 Glassfish（例如 3.1）的步骤是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T09:03:03.523

部署 Guvnor 5.4 的步骤是：

1.  取 guvnor-5.4.0.Final-jboss-as-7.0.war 二进制战争文件
2.  从二进制war文件中删除WEB-INF/lib/javassist-3.14.0-GA.jar
3.  将 glassfish-web.xml 文件添加到 WEB-INF[参见此处](https://github.com/snowch/glassfish-guvnor/blob/master/src/main/webapp/WEB-INF/glassfish-web.xml)
4.  [用这个](https://github.com/snowch/glassfish-guvnor/blob/master/src/main/webapp/WEB-INF/web.xml)替换 WEB-INF/web.xml
5.  重新打包二进制war文件并部署到glassfish

我在 git hub 上有一个项目，可以自动创建一个 glassfish 特定版本的 guvnor。有关更多信息，请参见此处：[链接](https://github.com/snowch/glassfish-guvnor)

# css - 表问题中的引导最大宽度内容

> ID：14160143
> 
> 赞同：0
> 
> 时间：2013-01-04T15:37:46.810
> 
> 标签：css, twitter-bootstrap

`img { max-width: 100%;`

这是破坏内容，即图像在我的基于引导程序的模板中缩小 - 我无法理解为什么会这样。

内容是一个包含行和一些图标图像的表格，例如

```
<table>
  <tr class="sectiontableentry2 even" id="tree_row_26">
    <td align="center" valign="middle" width="20">4</td>

    <td id="jlms_step_26" valign="middle" width="20"><img alt="accept" border=
    "0" class="JLMS_png" height="16" src="../lms_images/toolbar/btn_accept.png"
    width="16"></td>

    <td align="center" valign="middle" width="16">
      <div style="text-align: center; vertical-align: middle">
        <span style="text-align:center;"><img alt="content" border="0" class=
        "JLMS_png" height="16" src=
        "http://demo1.bwood1.wok.catn.com/components/com_joomla_lms/lms_images/files/file_content.png"
        width="16"></span>
      </div>
    </td>

    <td align="left" colspan="1" valign="middle" width="100%"><a href=
    "javascript:seek_step_id=26;ajax_action('lpath_seek');">Automation
    criteria</a></td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-02T12:02:31.167

@_pier 的一个很好的解决方法是：

`table td img { display: block; width: 100%; }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:43:58.770

所有行的宽度加在一起大于表格的宽度。

只设置表格的宽度和固定宽度的列的宽度。

```
<table style="width: 100%">
  <tr class="sectiontableentry2 even" id="tree_row_26">
    <td align="center" valign="middle" width="20">4</td>

    <td id="jlms_step_26" valign="middle" width="20"><img alt="accept" border=
    "0" class="JLMS_png" height="16" src="../lms_images/toolbar/btn_accept.png"
    width="16"></td>

    <td align="center" valign="middle" width="16">
      <div style="text-align: center; vertical-align: middle">
        <span style="text-align:center;"><img alt="content" border="0" class=
        "JLMS_png" height="16" src=
        "http://demo1.bwood1.wok.catn.com/components/com_joomla_lms/lms_images/files/file_content.png"
        width="16"></span>
      </div>
    </td>

    <td align="left" colspan="1" valign="middle"><a href=
    "javascript:seek_step_id=26;ajax_action('lpath_seek');">Automation
    criteria</a></td>
  </tr>
</table> 
```

[http://jsfiddle.net/LqVyu/](http://jsfiddle.net/LqVyu/)

*下次，请询问“为什么会发生这种情况”或“我做错了什么”以防止被否决。因为这个问题本身是有效的。*

# javascript - qUnit 对我不起作用

> ID：14160159
> 
> 赞同：-1
> 
> 时间：2013-01-04T15:38:54.857
> 
> 标签：javascript, jquery

```
<!DOCTYPE html>
<html>
    <head>

        <title>qUnit basic example</title>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

            <link type="text/css" rel="stylesheet" href="http://jqueryjs.googlecode.com/svn-history/r6606/trunk/jquery/test/data/testsuite.css"/>
    <script src="http://jqueryjs.googlecode.com/svn-history/r5920/trunk/qunit/testrunner.js"></script>
        <script>
            test("a basic test example",function(){
                ok(true,"This test is fine");
                var value="hello";
                equals(value,"hello","We expect value to be hello");
            });

             test("222222222",function(){
                ok(true,"This t fine");
                var value="hello";
                equals(value,"hllo","We eaaaaaaaavalue to be hello");
            });
            </script>
    </head>

    <body>

        <div id="main"></div>
    </body>
</html> 
```

这是我上面的标记。如果您复制并粘贴它，您将主要查看测试的结果..但是它们是捆绑在一起的，即它显示了测试总数与假货总数的比较。我需要查看断言失败的位置，以及每次测试失败的总成功次数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:46:34.393

1.  不要使用太旧的 QUnit 版本，以至于您从*旧*VCS 热链接它（甚至不是该 VCS 中的最新版本！）
2.  `qunit`不要打电话给你的div`main`
3.  一般来说，请按照[QUnit 主页上的说明进行操作](http://qunitjs.com/)

这样的：

```
<link type="text/css" rel="stylesheet"
    href="http://code.jquery.com/qunit/qunit-git.css">
<script src="http://code.jquery.com/qunit/qunit-git.js"></script>
<!-- etc -->
<div id="qunit"></div> 
```

# css - 意外行为：伪元素和显示：表格单元格

> ID：14160162
> 
> 赞同：0
> 
> 时间：2013-01-04T15:39:02.160
> 
> 标签：css, pseudo-element

为什么`display: table-cell`在伪元素上使用时表现不同？

例如，以下元素将并排放置：

```
<div style="display:table-cell">one</div>
<div style="display:table-cell">two</div> 
```

**示例：http: [//jsfiddle.net/tQKzq/](http://jsfiddle.net/tQKzq/)**

但是，在`display: table-cell`伪元素上使用时，元素是堆叠的：

```
div::after{
   content: "two";
   display: table-cell;   
} 
```

```
<div style="display:table-cell">one</div> 
```

**示例：http: [//jsfiddle.net/tQKzq/1/](http://jsfiddle.net/tQKzq/1/)**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T15:46:36.183

`::after`伪元素呈现为 your 的子元素，`div`因此它不会填充与单元格相同的行，而是位于`div`单元格内自己的匿名块级表中`div`，位于其自己的行中，位于文本“one”下方。

如果您`div`改为显示为表格行，则文本“one”将包含在其自己的匿名表格单元格中，而`::after`伪元素将包含在同一行的另一个单元格中：

```
div {
  display: table-row;
}

div::after {
  content: "two";
  display: table-cell;
}
```

```
<div>one</div>
```

# web-services - 请提供有关 WSDL 的建议

> ID：14160164
> 
> 赞同：1
> 
> 时间：2013-01-04T15:39:07.990
> 
> 标签：web-services, proxy, wsdl, cxf, mule

我创建了一个 WSDL 来创建问候服务。下面给出的是 WSDL。

我正在使用 thsi wsdl 创建生成并使用 mule 中的 cxf:proxy-service 公开 Web 服务。

这给了我错误。

请查看并帮助我了解此 WSDL 有什么问题。

```
<?xml version='1.0' encoding='UTF-8'?>
<wsdl:definitions name="HelloService"
    targetNamespace="http://example.org/HelloService"
    xmlns:tns="http://example.org/HelloService" 
    xmlns:ns1="http://schemas.xmlsoap.org/soap/http"
    xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"  
    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <wsdl:types>
        <xsd:schema targetNamespace="http://example.org/HelloService" >
              <xsd:element name="LastName">
                <xsd:complexType>
                  <xsd:sequence>
                    <xsd:element name="lName" type="xsd:string"/>
                  </xsd:sequence>
                </xsd:complexType>
              </xsd:element>
              <xsd:element name="FirstName">
                <xsd:complexType>
                  <xsd:sequence>
                    <xsd:element name="fName" type="xsd:string"/>
                  </xsd:sequence>
                </xsd:complexType>
              </xsd:element>

              <xsd:element name="Greeting">
                <xsd:complexType>
                  <xsd:sequence>
                    <xsd:element name="greet" type="xsd:string"/>
                  </xsd:sequence>
                </xsd:complexType>
              </xsd:element>
            </xsd:schema>
    </wsdl:types>

    <wsdl:message name="shortRequest">
        <wsdl:part type="tns:LastName" name="lastName"/>
      </wsdl:message>

      <wsdl:message name="fullRequest">
        <wsdl:part type="tns:FirstName" name="firstName"/>
        <wsdl:part type="tns:LastName" name="lastName"/>
      </wsdl:message>

      <wsdl:message name="greetingResponse">
        <wsdl:part type="tns:greeting" name="greetings"/>
      </wsdl:message>   

      <wsdl:portType name="HelloServicePortType">

        <wsdl:operation name="simpleGreeting">
          <wsdl:input message="tns:shortRequest" name="shortRequest" />
          <wsdl:output message="tns:greetingResponse" name="greetingResponse" />
        </wsdl:operation>

        <wsdl:operation name="fullGreeting">
          <wsdl:input message="tns:fullRequest" name="fullRequest" />
          <wsdl:output message="tns:greetingResponse"  name="greetingResponseFull" />
        </wsdl:operation>

      </wsdl:portType>

    <wsdl:binding name="HelloServiceSOAP" type="tns:HelloServicePortType">
        <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>

        <wsdl:operation name="simpleGreeting">
          <soap:operation soapAction=""  style="document" />
          <wsdl:input name="shortRequest">
            <soap:body use="literal"/>
          </wsdl:input>
          <wsdl:output name="greetingResponse">
            <soap:body use="literal"/>
          </wsdl:output>
        </wsdl:operation>

       <wsdl:operation name="fullGreeting">
          <soap:operation soapAction=""  style="document" />
          <wsdl:input name="fullRequest">
            <soap:body use="literal"/>
          </wsdl:input>
          <wsdl:output name="greetingResponseFull">
            <soap:body use="literal"/>
          </wsdl:output>
        </wsdl:operation>

      </wsdl:binding>

    <wsdl:service name="ProxyService">
        <wsdl:port binding="tns:HelloServiceSOAP" name="HelloServiceSOAPB">
            <soap:address location="http://localhost:8080/HelloService" />
        </wsdl:port>
    </wsdl:service>     
</wsdl:definitions> 
```

如果我的 WSDL 有问题，请帮助我。当我在 mule cxf:proxy-service 中使用它时它不起作用。

FGiven 下面是使用此 WSDL 公开服务的 Mule Flow。

```
<flow name="WS_In">
    <http:inbound-endpoint address="http://localhost:8080/HelloService" exchange-pattern="request-response">
        <cxf:proxy-service  wsdlLocation="classpath:globalid3.wsdl" namespace="http://example.org/HelloService" service="ProxyService" />
    </http:inbound-endpoint>        
    <component>             
        <prototype-object class="com.example.ServiceProxy">                                                         
        </prototype-object>
    </component>        
    <echo-component></echo-component>
    <logger level="INFO"        />
</flow> 
```

错误是：

```
org.mule.api.lifecycle.LifecycleException: Lifecycle Manager 'WS_In.stage1' phase 'start' does not support phase 'dispose'
at org.mule.lifecycle.AbstractLifecycleManager.invokePhase(AbstractLifecycleManager.java:156) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T19:32:56.720

您的 WSDL 中存在大小写问题。代替：

```
 <wsdl:message name="greetingResponse">
    <wsdl:part type="tns:greeting" name="greetings"/>
  </wsdl:message> 
```

你应该有：

```
 <wsdl:message name="greetingResponse">
    <wsdl:part type="tns:Greeting" name="greetings"/>
  </wsdl:message> 
```

修复此问题后，以下生成的 Web 服务在从 SOAPui 调用时可以正常工作：

```
<flow name="WS_In">
    <http:inbound-endpoint address="http://localhost:8080/HelloService"
        exchange-pattern="request-response">
        <cxf:proxy-service wsdlLocation="classpath:globalid3.wsdl"
            namespace="http://example.org/HelloService" service="ProxyService" />
    </http:inbound-endpoint>
    <custom-processor class="com.example.ServiceProxy" />
</flow> 
```

消息处理器：

```
package com.example;

import javax.xml.namespace.QName;

import org.apache.commons.lang.StringEscapeUtils;
import org.mule.api.MuleEvent;
import org.mule.api.MuleException;
import org.mule.api.processor.MessageProcessor;

public class ServiceProxy implements MessageProcessor
{
    private final static QName SIMPLE_GREETING = new QName("http://example.org/HelloService",
        "simpleGreeting");

    public MuleEvent process(final MuleEvent event) throws MuleException
    {
        final QName operation = event.getFlowVariable("cxf_operation");

        if (operation.equals(SIMPLE_GREETING))
        {
            final String lastName = event.getMuleContext()
                .getExpressionLanguage()
                .evaluate("xpath('/lastName').text", event);

            final String responseXml = "<greetings><greet>Hi " + StringEscapeUtils.escapeXml(lastName)
                                       + "</greet></greetings>";

            event.getMessage().setPayload(responseXml);
            return event;
        }

        throw new UnsupportedOperationException(operation.getLocalPart() + " " + operation.getNamespaceURI()
                                                + " " + operation.getPrefix());
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T16:19:30.320

使用 cxf:jaxws-service 有一种方法可以做到这一点，但您需要生成服务类。[在此处](https://community.jboss.org/wiki/JBossWS-CXFWS-ReliableMessagingTutorial)查看 如何执行此操作。

之后，您可以以非常简单的方式配置服务。

```
 <cxf:jaxws-service
            serviceClass="mypackage.webservices.MyServicePortType"
            validationEnabled="false">
        </cxf:jaxws-service> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T19:22:27.433

工作流程如下。

```
<flow name="WS_In">
    <http:inbound-endpoint address="http://localhost:8080/HelloService" exchange-pattern="request-response">
            <cxf:proxy-service  wsdlLocation="classpath:helloservice.wsdl" namespace="http://example.org/HelloService" service="ProxyService" />
        </http:inbound-endpoint>        
        <component>             
            <prototype-object class="com.example.ServiceProxy">     
            </prototype-object>
        </component>        
        <echo-component></echo-component>
        <logger level="INFO"        />
 </flow> 
```

WSDL 是

```
<?xml version='1.0' encoding='UTF-8'?>
<wsdl:definitions name="HelloService"
    targetNamespace="http://example.org/HelloService"
    xmlns:tns="http://example.org/HelloService" 
    xmlns:ns1="http://schemas.xmlsoap.org/soap/http"
    xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"  
    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema">

      <wsdl:message name="shortRequest">
        <wsdl:part type="xsd:string" name="lastName"/>
      </wsdl:message>

      <wsdl:message name="fullRequest">
        <wsdl:part type="xsd:string" name="firstName"/>
        <wsdl:part type="xsd:string" name="lastName"/>
      </wsdl:message>

      <wsdl:message name="greetingResponse">
        <wsdl:part type="xsd:string" name="greetings"/>
      </wsdl:message>   

      <wsdl:portType name="HelloServicePortType">

        <wsdl:operation name="simpleGreeting">
          <wsdl:input message="tns:shortRequest" name="shortRequest" />
          <wsdl:output message="tns:greetingResponse" name="greetingResponse" />
        </wsdl:operation>

        <wsdl:operation name="fullGreeting">
          <wsdl:input message="tns:fullRequest" name="fullRequest" />
          <wsdl:output message="tns:greetingResponse"  name="greetingResponseFull" />
        </wsdl:operation>

      </wsdl:portType>

    <wsdl:binding name="HelloServiceSOAP" type="tns:HelloServicePortType">
        <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>

        <wsdl:operation name="simpleGreeting">
          <soap:operation soapAction=""  style="document" />
          <wsdl:input name="shortRequest">
            <soap:body use="literal"/>
          </wsdl:input>
          <wsdl:output name="greetingResponse">
            <soap:body use="literal"/>
          </wsdl:output>
        </wsdl:operation>

       <wsdl:operation name="fullGreeting">
          <soap:operation soapAction=""  style="document" />
          <wsdl:input name="fullRequest">
            <soap:body use="literal"/>
          </wsdl:input>
          <wsdl:output name="greetingResponseFull">
            <soap:body use="literal"/>
          </wsdl:output>
        </wsdl:operation>

      </wsdl:binding>

    <wsdl:service name="ProxyService">
        <wsdl:port binding="tns:HelloServiceSOAP" name="HelloServiceSOAPB">
            <soap:address location="http://localhost:8080/HelloService" />
        </wsdl:port>
    </wsdl:service>

</wsdl:definitions> 
```

感谢大家的帮助和支持。

# javascript - Google V3 - 参考标记

> ID：14160165
> 
> 赞同：1
> 
> 时间：2013-01-04T15:39:09.383
> 
> 标签：javascript, google-maps

我有一个脚本，可以将标记一一添加到地图

```
var marker = new google.maps.Marker({
                    position: new google.maps.LatLng(51,-117)
                });
marker.setIcon(getIconFile(initialIconId));
markers.push(new Array(id,marker)); // id, marker
marker.setMap(map); 
```

稍后在脚本中，当我按下自定义按钮时，我希望能够更改标记图标。因此，我通过标记数组中的 id 获取标记并调用：

```
 markers[markerIndex].setIcon(getIconFile(newIconId)); // which returns a string url of the icon 
```

但是我收到：**TypeError: markers[markerId].setIcon is not a function**

我打印了 markerId 并且它是有效的，我还打印了标记标记 [markerId] 的索引结果，它返回一个标记对象。我没有其他方法可以调试这个我迷路了！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:48:58.677

似乎您正在将一个数组推入标记中，而不仅仅是一个元素。

为什么不：

```
markers = []
markers.push(marker)
markers[markerIndex].setIcon(getIconFile(newIconId)); 
```

或者如果你坚持插入一个数组：

```
markers.push(new Array(id,marker));
markers[markerIndex][1].setIcon(getIconFile(newIconId)); 
```

# apache-flex - 如何为给定的文本字符串创建正确的 KeyboardEvent 对象？

> ID：14160166
> 
> 赞同：2
> 
> 时间：2013-01-04T15:39:11.240
> 
> 标签：apache-flex, actionscript, keyboard-events

我想通过[`KeyboardEvent`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/KeyboardEvent.html)手动调度对象来模拟一些键盘输入。创建此类事件涉及传递关键代码。

唉，我只有一个给定的字符串

```
const text: String = "Hello"; 
```

我可以使用 轻松获取字符代码[`String::charCodeAt`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/String.html#charCodeAt%28%29)，但是如何获取密钥代码？对于任何给定的字符（例如：“H”），可能只有一个键码、一个键码加上一些修饰符（在本例中：Shift + keycode_of_h）甚至多个键码。有没有办法获取给定字符代码的键码（可能通过考虑用户的键盘映射）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:35:17.123

这不是太难，但只需要一点点设置。

首先创建一个字典或对象，将 UTF-8 值映射到键值，如下所示：

```
var keyCodes:Dictionary = new Dictionary();
keyCodes[49] = Keyboard.NUMBER_1; //1
// add the rest of the mappings... 
```

然后因为你需要指定 SHIFT

```
var shiftedKeyCodes:Dictionary = new Dictionary();
shiftedKeyCodes[33] = Keyboard.NUMBER_1; //!
// add the rest of the shifted mappings 
```

然后像这样创建一个实用函数：

```
public function charCodeToKeyboardEvent(charCode:int):KeyboardEvent{
    var event:KeyboardEvent = new KeyboardEvent(KeyboardEvent.KEY_UP);
    event.charCode = charCode;
    if(keyCodes[charCode]){
        event.keyCode = keyCodes[charCode];
    } else if (shiftedKeyCodes[charCode]){
        event.keyCode = shiftedKeyCodes[charCode];
        event.shiftKey = true;
    } else {
        return null;
    }
    return event;
} 
```

然后遍历您的字符串并执行以下操作：

```
for(var i:int = 0; i < myString.length; i++){
    dispatchEvent(charCodeToKeyboardEvent(myString.charCodeAt(i)));
} 
```

编辑：我更新了它以使用键盘类上的常量，这样它就可以独立于设备或操作系统工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T10:21:43.327

事实证明，我首先不需要 100% 正确的 KeyboardEvent。相反，我缺少两件事：

1.  [`flash.events.TextEvent`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/TextEvent.html) 需要为纯文本（如“Hello”）输入分派A。
2.  需要将事件分派到可以使用该`textDisplay`属性访问的嵌入式编辑控件。

# c# - Visual Studio 2010 与 silverlight 项目一起疯狂

> ID：14160170
> 
> 赞同：0
> 
> 时间：2013-01-04T15:39:26.793
> 
> 标签：c#, visual-studio-2010, silverlight

我第一次尝试在 Visual Studio 2010（终极版）中创建一个新的 Silverlight 项目。

它告诉我在创建任何之前我必须安装最新版本的 Silverlight。

```
You need to install the latest silverlight developer runtime before creating a silverlight project 
```

我单击消息上的链接，下载并安装那里的任何内容。

然后当我尝试创建一个新项目时，它告诉我必须安装“Silverlight 3 sdk”。

我删除了新版本，并安装了 Silverlight 3 sdk。

再一次，当我尝试创建一个新项目时，我收到错误消息，指出我必须安装最新版本。

有点像这样，然后在互联网上搜索后，我从计算机中删除了名称中带有“Silverlight”的所有内容，安装了Visual Studio SP 1，重新安装了Silverlight 5（这次我注意安装x64版本，因为事实证明，无论您运行什么操作系统，Microsoft 在错误消息中都提供了 x86 版本的链接）。

我设法创建了一个新项目，一切都很好。

然后我下载了一些 Silverlight.FX 示例（可能适用于版本 3）。

它们没有正确打开（这本身就是一个令人沮丧的），然后我再次收到一条消息，告诉我必须安装最新版本。

我关闭了 Visual Studio，尝试创建一个新项目，并再次收到相同的消息。

似乎问题再次出现只是因为我打开了一个旧项目。

是否有意义？为什么我的 Visual Studio 如此不稳定？我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T18:04:39.447

您的 silverlight 插件版本、silverlight sdk 和 silverlight 开发者工具版本应该是相同的版本。请检查这个。

# r - PCA：如何获得指向新坐标系原点的向量？

> ID：14160174
> 
> 赞同：1
> 
> 时间：2013-01-04T15:39:46.497
> 
> 标签：r, pca

PCA 将原始数据点投影到一个新的坐标系中，我想确定连接旧坐标系原点和 R 中新坐标系原点的向量。

到目前为止，这是我编写的代码：

```
data <- data.frame(cbind(c(5,15,21,29,31,43,49,51,61,65),
c(33,35,24,21,27,16,18,10,4,12)))

# Subtract columns by their mean and 
# divide with their standard deviation
scaled_data <- scale(data, center=TRUE, scale=TRUE)
scaled_data
plot(scaled_data)

# Correlation Matrix
corrmat <- cor(scaled_data)
corrmat

# Compute Eigenvalues and Eigenvectors
eigen <- eigen(corrmat)

eigenvectors <- eigen$vectors
eigenvectors

eigenvalues <- eigen$values
eigenvalues

# Transform data
transformed_data <- (data.matrix(scaled_data) %*% eigenvectors)*sqrt(2)
transformed_data

plot(transformed_data) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:16:09.660

新坐标系的原点是数据集的重心（又名质心）：

```
colMeans(data)
# X1 X2 
# 37 20 
```

# c#-2.0 - 从 sql 中查找最大数并生成下一个数

> ID：14160176
> 
> 赞同：1
> 
> 时间：2013-01-04T15:39:49.347
> 
> 标签：c#-2.0, auto-generate

请帮助我在 c# 上的新人刚刚阅读它脚本上有错误它没有生成下一个数字错误在这一行上显示“使用分配的局部变量 max”

```
"maxCommand.Parameters.Add("@acn", SqlDbType.VarChar).Value = max.ToString();" 
```

完整编码

```
private void contact_edit_Click(object sender, EventArgs e)
        {
            int max;
            SqlConnection con = new SqlConnection("Data Source=.\\SQLEXPRESS;AttachDbFilename=D:\\fuda\\Fuda.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True");
            con.Open();
            SqlCommand maxCommand = new SqlCommand();
            maxCommand = con.CreateCommand();
            maxCommand.CommandText = ("SELECT max(acn) from contacts");
            maxCommand.Parameters.Add("@acn", SqlDbType.VarChar).Value = max.ToString();
            maxCommand.ExecuteNonQuery();
            max = max ++;
            acn.Text = max.ToString();

        } 
```

怎么安排？？？

```
example acn = 2253  \\ in table "contact" coulmn acn (A/c number)
if acn = 2253 \\collected max number from acn
acn + 1 \\ add 1 to acn
acn = 2254 \\this should be generate 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:45:27.247

max 的初始值未知。分配一个值可以解决问题。

```
 int max = 0; 
```

要找到最大值和下一个值，您可以尝试

```
 maxCommand.CommandText = ("SELECT acn FROM contacts ORDER BY acn DESC");
    SqlDataReader reader = maxCommand.ExecuteReader();
    reader.Read();
    max = Convert.ToInt32(reader[0]); // the max value
    max++;// the next value
    acn.Text = max.ToString(); 
```

# python - 给python“平台”库假平台信息？

> ID：14160178
> 
> 赞同：3
> 
> 时间：2013-01-04T15:40:04.990
> 
> 标签：python, cross-platform

在脚本的开头，我使用`platform.system`and`platform.release`来确定脚本在哪个操作系统和版本上运行（所以它知道它的数据在 Mac 上的应用程序支持中，在类 unix 和非 Mac 的 unix 上的主页中，在 windows 上的 appdata <= XP 和 Windows >= Vista 上的 appdata/roaming）。我想测试我的系列`if`s、`elif`s 和`else`s 是什么决定了操作系统和版本，但我只能访问 Mac 10.6.7、一些未知版本的 Linux 和 Windows 7。有没有办法喂`platform`假系统和发布信息，以便我可以确定 XP、Solaris 等无需安装即可正确处理脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:43:28.260

也许像

```
>>> platform.system = lambda: "whatever"
>>> platform.system()
'whatever' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:42:02.313

您可能想探索[模拟](http://pypi.python.org/pypi/mock) `platform`测试。或者，您可以直接使用猴子补丁`platform`，甚至`sys.modules`直接混淆以覆盖默认`platform`模块，但是模拟已经被设计为自包含的并且还具有在您的代码中非常清楚地显示什么是测试仪器和不是测试仪器的好处，所以你不要意外地在您的生产代码中发布测试功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T15:42:23.080

您可以创建初始化函数以将这些变量作为参数，因此很容易在测试中欺骗它们

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-21T18:07:17.663

对我来说，直接`platform.system`用 pytest-mock 打补丁是行不通的。不过，一个简单的技巧是将这些信息的检索抽象到您自己的实用程序函数中（这次您可以成功地使用 pytest-mock 进行修补）。

因此，在您的实现模块/类中：

```
def _get_system() -> str:
    return platform.system().lower()

def _is_windows() -> bool:
    return _get_system() == 'windows' 
```

在你的测试中，这里使用 pytest + pytest-mock：

```
def test_win_no_pad_code():
    with patch('module_name._get_system', MagicMock(return_value='windows')):
        assert module_name._is_windows() 
```

这是使用模块的一种方法，但您可以使用类来代替。

# wordpress - Wordpress 目录功能将点添加到 URL

> ID：14160181
> 
> 赞同：1
> 
> 时间：2013-01-04T15:40:09.567
> 
> 标签：wordpress, wordpress-theming

我在我的代码中做了以下事情：

```
/**
 * Enqueue scripts and styles
 */
function design_scripts() {
    wp_enqueue_style( 'style', get_stylesheet_uri() );

    if ( is_singular() && comments_open() && get_option( 'thread_comments' ) ) {
        wp_enqueue_script( 'comment-reply' );
    }

    wp_enqueue_script( 'navigation', get_template_directory_uri() . 'js/navigation.js', array( 'jquery' ), '20120206', true );
}
add_action( 'wp_enqueue_scripts', 'design_scripts' ); 
```

但不知何故，该函数在 url 上添加了一个点，如下所示：

```
http://domain/wp-content/themes/design/./style.css 
```

有人知道为什么吗？我自己还没有弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:46:34.030

尝试这个：

```
wp_enqueue_style( 'style', get_bloginfo('stylesheet_url') ); 
```

附带说明一下，如果这是您正在构建的主题，则无需将主题的正常样式表排入队列。直接将其添加到您的标题中就可以了。

```
<link rel="stylesheet" type="text/css" media="all" href="<?php bloginfo( 'stylesheet_url' ); ?>" /> 
```

# c++ - 从 Iplimage 到 Mat 的转换不保留深度信息

> ID：14160182
> 
> 赞同：1
> 
> 时间：2013-01-04T15:40:14.043
> 
> 标签：c++, opencv

好的......我不知道我错过了什么，但opencv文档说你可以从IplImage构造一个Mat。我有一个 IplImage，但是在构建 Mat 之后，它会丢失深度信息。在将深度信息传递给 calcHist 函数之前，我需要检查它。

```
cout<<"image depth:"<<image->depth<<endl;
cout<<"image size: "<<image->height<<" "<<image->width<<endl;

Mat src(image);
cout<<"src   depth:"<<src.depth()<<endl;
cout<<"src   size: "<<src.size().height<<" "<<src.size().width<<endl; 
```

我的输出看起来像这样。请注意，深度信息已消失：

```
image depth:8
image size: 257 109
src   depth:0
src   size: 257 109 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T16:03:35.400

基本上，这是正确的，因为 CV_8U==0。有关更多详细信息，请参见[此处](http://opencv-users.1802565.n2.nabble.com/depth-alway-return-0-td6267914.html)。

*   当您在结构中加载图像时`IplImage`，深度设置`IPL_DEPTH_8U`为 8，即 8。
*   在`Mat`结构中加载图像时，深度为`CV_8U`，即 0。

我对一张普通的图片做了一个小测试：

```
Mat frame=imread(szImagefile,CV_LOAD_IMAGE_GRAYSCALE);
cout<<"image depth:"<<frame.depth()<<endl; 
```

结果：

```
image depth:0 
```

# java - 返回字符串数组

> ID：14160183
> 
> 赞同：0
> 
> 时间：2013-01-04T15:40:27.887
> 
> 标签：java, jax-ws, arrays

我无法在客户端和服务器环境中返回字符串数组。当我编译客户端应用程序时，我得到的结果是什么。

**服务器应用程序**

```
public String[] getFlight() throws Exception {

     AvailableFlights todayFlight = new AvailableFlights();
    List<Flight> flights_today =  todayFlight.getFlightDetail();

    List<String> flights = new ArrayList<String>(); 

    try {
        flights_today = this.unmarshal(new File("Flights.xml"));

            for (Flight flight : flights_today) {
        String flightDetail = flight.getJourney() 
                    + " " + flight.getAirline() 
                    + " "+ String.valueOf(flight.getConnections())
                    + " "+ String.valueOf(flight.getCost())
                    + " "+ flight.getDestination()
                    + " "+ flight.getOrigin()
                    + " "+ String.valueOf(flight.getSeats()); 
                flights.add(flightDetail);
                System.out.println(flightDetail);
                }

      } catch (Exception e) {

      }

    return (String[]) flights.toArray();
 } 
```

**客户端 Java 应用程序**

```
import org.me.kettravel.*;

public class JavaApplication5 {   

    public static void main(String[] args) {

        try {
    System.out.println(getFlight());
        } catch (Throwable ex) {          
        }   
    }

    private static java.util.List<java.lang.String> getFlight() throws Exception_Exception {
        org.me.kettravel.ReadFlightService service = new org.me.kettravel.ReadFlightService();
        org.me.kettravel.ReadFlight port = service.getReadFlightPort();
        return port.getFlight();
    } 
```

此外，我在服务器应用程序上尝试了一个像下面的“hello”的小实验，它运行良好，所以我知道网络服务运行良好，但我似乎无法将航班字符串数组传递/返回给客户端应用程序。

```
String i = "hello"; 
return i; 
```

PS：当我尝试使用`public static void main (String[] args) {`构造函数运行服务器应用程序且不返回时，该应用程序从解组 xml 中完美打印出 arraylist 并将其转换为 arraylist 并执行`system.out.print`.

如果有人能提供一些启示，我将不胜感激，因为我真的坚持这一点。谢谢。

**2012 年 4 月 1 日(19:16)** - Genzer 建议进行调整，客户端应用程序仍未收到服务器应用程序的任何响应。

**2012 年 4 月 1 日(23:24)** - Bohemian 建议进行调整，如下所示，客户端应用程序现在进行错误检查`javax.xml.ws.soap.SOAPFaultException: [Ljava.lang.Object; cannot be cast to [Ljava.lang.String;`

```
public static void main(String[] args) {
    try {
        Object obj = getFlight();
System.out.println(obj);
    } catch (Throwable ex) { 
        System.out.println(ex);
    }   
} 
```

**06/01/2013 (16:20)** - 我刚刚解决了我的错误，因为 XML 文件从测试到测试都是空的，但是现在 xml 文件中有数据。我刚刚创建了一个测试类，以查看 readFlight 是否将任何内容返回给它在同一个项目/源包中的类。结果是成功的......真的没有想法了=/因为我已经通过向客户端应用程序发送一个简单的hello字符串来测试Web服务并且没有问题。

**测试类** 公共类测试{

```
public static void main(String[] args) {

readFlight rF = new readFlight();

    try {
System.out.println(rF.getFlight());
    } catch (Throwable ex) { 
        System.out.println(ex);
    }       
} 
```

}

**测试类的输出：** `[London to Amsterdam KLM 1 200.0 Amsterdam London 100, London to Kuala Lumper Malaysia Airline 1 750.0 Kuala Lumper London 100, London to Manchester British Airway 1 50.0 Manchester London 56]`

**10/01/2013 (18:13)** - 问题已解决。您必须为解组文件提供完整目录。例子：`C:/Users/User/Documents/NetBeansProjects/WebService/booking.xml`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:42:12.590

问题是您有两个不同的变量名为`flights`. 您填充一个并返回另一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:24:11.783

您已经提交了“不不”，这可能隐藏了问题：

```
catch (Exception e) {
} 
```

你不应该（嗯，很少）捕获异常。特别是当您的 catch 块为空时。

可能会在循环中抛出未经检查的异常，例如 NullPointerException，但您不会知道。

尝试删除捕获并仅留下声明为抛出的特定异常（如果有）。

如果其中一种方法被声明为抛出异常，那么至少，你应该这样做：

```
catch (Exception e) {
    System.out.println(e);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T16:23:09.490

您可以像这样删除`public static String[] flights`和修改该方法：

```
public List<String> getFlight() throws Exception {

    Flight nextFlight = new Flight();
    AvailableFlights todayFlight = new AvailableFlights();
    List<Flight> flights_today =  todayFlight.getFlightDetail();

    // Since you you List for Flight, why not here
    List<String> flights = new ArrayList<String>(); 

    try {
        flights_today = readFlight.unmarshal(new File("Flights.xml"));

        for (Flight flight : flights_today) {
            String flightDetail = flight.getJourney() 
                    + " " + flight.getAirline() 
                    + " "+ String.valueOf(flight.getConnections())
                    + " "+ String.valueOf(flight.getCost())
                    + " "+ flight.getDestination()
                    + " "+ flight.getOrigin()
                    + " "+ String.valueOf(flight.getSeats());
            flights.add(flightDetail);
        }
      } catch (Exception e) {

      }

    return flights;
 } 
```

# javascript - 访问数组元素

> ID：14160184
> 
> 赞同：0
> 
> 时间：2013-01-04T15:40:30.290
> 
> 标签：javascript

当我写这个

```
 var table = document.getElementById("tableKon");
        var rowlen = table.rows.length;
        var row = table.insertRow(rowlen);
        var cell1 = row.insertCell(0);
        var dkkTo = [0.13,0.17,0.17,1,15.43,0.98,1.15,0.16,0.11,0.18,8.34]; 
```

然后例如

```
 cell1.innerHTML = dkkTo[0]; 
```

它在列中给了我 NaN 。

# qt - 如何在 qt 中制作此效果：单击按钮时添加新的 lineedit

> ID：14160186
> 
> 赞同：1
> 
> 时间：2013-01-04T15:40:38.480
> 
> 标签：qt

新手来了 我想在我的停靠小部件中具有 GUI 效果，每当我单击“添加更多”按钮或链接时，底部都会出现一个新的 lineEdit 字段。

我看到很多软件都有类似的东西

```
point-1 (_____,_____)
point-2 (_____,_____)
+ Add More Points 
```

而当你点击“ `+ Add More Points`”时，会出现一个新的point-3，等待输入。

我现在的代码是这样的：

```
#include "perfectPanel.hpp"

perfectPanel::perfectPanel(QWidget *parent) : QWidget(parent)
{
    setupUi(this);
    readInfo();

    connect
    (
        btn_accept,
        SIGNAL(clicked()),
        this,
        SLOT(readInfo()),
        Qt::UniqueConnection
    );
}

// Destructor
perfectPanel::~perfectPanel()
{}

void perfectPanel::readInfo()
{
    xObject_ = vtkDoubleArray::New();
    yObject_ = vtkDoubleArray::New();
    xObject_->InsertNextValue( lineEdit_xObject01X->text().toDouble() );
    xObject_->InsertNextValue( lineEdit_xObject02X->text().toDouble() );
    yObject_->InsertNextValue( lineEdit_yObject01Y->text().toDouble() );
    yObject_->InsertNextValue( lineEdit_yObject02Y->text().toDouble() );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:05:57.660

您需要将该`+ Add More Points`按钮添加到`perfectPanel`类中。假设您已经在班级的私有数据部分中使用此声明完成了该操作：

`QPushButton* m_AddPoint;`

现在，将按钮的`clicked()`信号连接到某个插槽以添加点。从示例代码中，您似乎已经知道如何执行此操作，因此我不会详细说明。假设您已将按钮的单击事件连接到`addPoint`函数。

```
void perfectPanel::addPoint()
{
    /* The "this" argument is needed to prevent memory leaks */
    QLineEdit* Field = new QLineEdit(this);

    /* Your perfectPanel class has some layout where the existing LineEdit rows
       are. I'm assuming m_Layout is a pointer to that layout here. */
    m_Layout->addWidget(Field);
    Field->show();
} 
```

# wpf - TextBlock Wrap 和 scrollView

> ID：14160187
> 
> 赞同：0
> 
> 时间：2013-01-04T15:40:48.597
> 
> 标签：wpf, scrollview, textblock

下面的代码运行良好，但`ScrollBar`即使`TextBlock`. 我该如何启用它？

```
 <UserControl.DataContext>
        <viewModels:CommentsViewModel/>
    </UserControl.DataContext>
    <Grid>
        <DockPanel >
            <TreeView DockPanel.Dock="Top"/>
            <Expander Header="Yo" DockPanel.Dock="Bottom" VerticalAlignment="Bottom">
                <ScrollViewer HorizontalScrollBarVisibility="Disabled">
                    <TextBlock TextWrapping="Wrap"  MaxHeight="250" 
                         Text="{Binding Article.Article.Content}"/>
                </ScrollViewer>
            </Expander>
        </DockPanel>
    </Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:40:14.773

我发现。

```
MaxHeight="250" 
```

标签不应在 中`TextBlock`，而应在`Grid`限制高度中。然后它将完美地工作。

```
<UserControl.DataContext>
    <viewModels:CommentsViewModel/>
</UserControl.DataContext>
<Grid>
    <DockPanel >
        <TreeView DockPanel.Dock="Top"/>
        <Expander Header="Yo" DockPanel.Dock="Bottom" VerticalAlignment="Bottom">
            <Grid MaxHeight="250"> 
            <ScrollViewer HorizontalScrollBarVisibility="Disabled">
                <TextBlock TextWrapping="Wrap"   
                     Text="{Binding Article.Article.Content}"/>
            </ScrollViewer>
            </Grid>
        </Expander>
    </DockPanel>
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:56:38.027

如果您只是显示文本，为了确定它会起作用，请使用`TextBox`：

```
 <Expander Header="Yo" DockPanel.Dock="Bottom" VerticalAlignment="Bottom">
            <Grid IsReadOnly="True">
                <TextBox TextWrapping="Wrap"  MaxHeight="250" 
                     Text="{Binding Article.Article.Content}"/>
            </Grid>
        </Expander> 
```

# rest - REST 服务 - SSL 实施（HTTP 错误 403.7 - 禁止）

> ID：14160188
> 
> 赞同：0
> 
> 时间：2013-01-04T15:40:47.857
> 
> 标签：rest, restful-authentication

为了保护我的 Rest 服务，我在 IIS 中启用了 SSL 并创建了一个自签名证书并将其分配给 IIS 中的 HTTPS 绑定。我导出了与 pfx 文件相同的文件并在 IE 中添加了相同的文件，但是当我尝试访问服务时，在 Windows 7 企业版上出现以下错误

HTTP 错误 403.7 - 禁止您尝试访问的页面要求您的浏览器具有 Web 服务器可识别的安全套接字层 (SSL) 客户端证书。

在 Windows Server 2003 上，这是

HTTP 错误 403.7 - 禁止：需要 SSL 客户端证书。互联网信息服务 (IIS)

我不知道除了在“个人”和“受信任的根证书颁发机构”下添加 IE 中的证书之外我该怎么做？您能否建议我采取一些步骤，以完成这项工作。

注意：我尝试过使用“自签名证书”以及从 Microsoft“证书服务”生成的证书。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:56:52.797

SSL 用于验证服务器的身份，而不是客户端的身份。该错误表明（[http://support.microsoft.com/kb/199​​215](http://support.microsoft.com/kb/199215)，“这用于将您验证为资源的有效用户。”）服务器想要识别客户端。你想做什么两者中的哪一个？

编辑：SSL 要求 SSL 证书的公共部分可供客户端使用。在我看来，将其添加到受信任的根证书中似乎是使自签名证书的公共部分可供浏览器使用的唯一方法。

# android-sqlite - sqlite3_close 失败 27

> ID：14160189
> 
> 赞同：0
> 
> 时间：2013-01-04T15:40:51.453
> 
> 标签：android-sqlite

我有时会收到此“sqlite3_close（0x1f7f708）失败：27”错误，我不明白为什么。这是我的代码：

```
 xMessage[] msgs = new xMessage[howMany];
    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor, cursorData = null;

    cursor = db.query(mail_bridge_table_name, new String[] {mbfn_mbridge_PK, mbfn_mdata_FK, mbfn_contacts, mbfn_subject, mbfn_sentTime, mbfn_receivedTime, mbfn_maccount_FK }, null,
              null, null, null, mbfn_sentTime + " desc", first + "," + howMany);

    if (cursor != null)
          cursor.moveToFirst();
    else
    {
        msgs[0] = new xMessage();
        msgs[0].set_bodyPlain("Mail data not found!");
        return msgs;
    }
    long count = cursor.getCount();
    for (int i = 0; i < count; i++)
    {
             [omissis: db unrelated code....]

        cursorData = db.query(mail_data_table_name, new String[] {mdfn_mdata_PK, mdfn_header, mdfn_body }, mdfn_mdata_PK + "=?",
                  new String[]{cursor.getString(mbfi_mdata_FK)}, null, null, null, null);

        if (cursorData != null)
        {
            cursorData.moveToFirst();
        }
        cursor.moveToNext();
    }
    if (cursor != null)
    {
        cursor.close();
    }
    if (cursorData != null)
    {
        cursorData.close();
    }
    db.close();    <----- here I get sometime the error
    return msgs; 
```

我有另一个线程使用同一个数据库，但即使停止它也会出现错误。我环顾四周，在论坛上发现 failed: 27 持续尝试关闭数据库，但某些操作仍处于打开状态......但我只打开了两个我关闭的游标。

有人可以帮忙吗？自两天以来，我一直在解决这个问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:48:34.773

我想这就是答案。[sqlite3_close 失败 27 是什么意思？](https://stackoverflow.com/questions/9398123/what-does-sqlite3-close-failed-27-mean). 这基本上意味着有语句没有调用 close()。

# java - 我的 JSP 和 servlet 出现 ClassNotFound 异常

> ID：14160191
> 
> 赞同：-1
> 
> 时间：2013-01-04T15:40:59.027
> 
> 标签：java, web-services, jsp, servlets

我在使用 JSP 和 servlet 发布 json 对象时遇到了一些问题。我使用 tomcat 6.0 和 JDK 1.7.0_09。我想我包括了所有必要的罐子。这是错误信息：

> java.lang.ClassNotFoundException: JsonParser 在 org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526) 在 org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680) 在 org.apache。 catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1128) at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:827) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java: 129) 在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) 在 org.apache.catalina.valves.ErrorReportValve 的 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) .invoke(ErrorReportValve.java:103) 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:861) 在 org.apache.coyote.http11.Http11Protocol $Http11ConnectionHandler.process(Http11Protocol.java:606) at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489) at java.lang.Thread.run(Thread.java:722)
> 
> 2013 年 1 月 4 日上午 10:24:07 org.apache.catalina.core.StandardWrapperValve 调用严重：为 servlet JsonParser java.lang.ClassNotFoundException 分配异常：org.apache.catalina.loader.WebappClassLoader.loadClass 的 JsonParser(WebappClassLoader.java :1680) 在 org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1128) 在 org.apache.catalina.core.org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)。 StandardWrapper.allocate(StandardWrapper.java:827) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:129) at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) at org .apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) 在 org.apache.catalina.valves.ErrorReportValve。在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293) 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) 调用(ErrorReportValve.java:103) .coyote.http11.Http11Processor.process(Http11Processor.java:861) 在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606) 在 org.apache.tomcat.util.net.JIoEndpoint$Worker .run(JIoEndpoint.java:489) 在 java.lang.Thread.run(Thread.java:722)Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606) at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489) at java.lang.Thread.run(Thread.java:722)Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606) at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489) at java.lang.Thread.run(Thread.java:722)

关于出了什么问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:35:41.243

确保你正确命名了你的包，因为

> 在 Tomcat 4.x 及更高版本中，JSP 的包永远不会与默认包相同。

# ruby-on-rails - 像在 Sublime Text 4 Ruby 中一样为 Aptana Studio 3 创建命令行工具

> ID：14160193
> 
> 赞同：-1
> 
> 时间：2013-01-04T15:41:01.530
> 
> 标签：ruby-on-rails, ruby, osx-snow-leopard, aptana3, command-line-tool

我正在尝试 Ruby On Rails 教程 (railstutorial.org) 并想使用 Aptana Studio 3，但是，作者给出了一些 gvim、subl 或 mate 的缩写，而不是 Aptana。我怎样才能做到这一点[http://www.sublimetext.com/docs/2/osx_command_line.html](http://www.sublimetext.com/docs/2/osx_command_line.html)使用 aptana 而不是 sublime ??? 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:45:48.213

我目前没有在这台计算机上安装 Aptana Studio 3，但我通过谷歌快速查找找到了这个答案`aptana command line`

[http://www.aptana.com/products/studio3/getting_started](http://www.aptana.com/products/studio3/getting_started)

它基本上说aptana提供了一个名为的命令行工具`studio3`

这就是它所说的

> 如果以这种方式设置登录 PATH 对您来说不切实际，您可以通过使用 studio3 命令行实用程序从命令行启动 Aptana Studio 3 来解决此问题。该实用程序可以在 Aptana Studio 3 安装文件夹的顶层找到，因此您可以将该文件夹放在您的 PATH 中以方便使用。（也可以在 Aptana Studio 3 运行后调用命令行实用程序，以打开源代码文件进行编辑。）

# java - Spring Integration - 聚合分散的消息

> ID：14160199
> 
> 赞同：1
> 
> 时间：2013-01-04T15:41:29.930
> 
> 标签：java, spring, file, spring-integration

我有一个 Spring Integration 应用程序，它将传入的文件放到一个通道上。从那里我希望能够将相同的文件发送到两个不同的处理管道（一个归档到 S3，另一个解析内容），然后有一个下游组件可以识别两者何时都已成功处理，从而删除实际的本地文件。

语义就像我需要一个拆分器/聚合器，但不是拆分消息，我需要复制它。

有什么方法可以使用可用的组件来实现这一点，还是需要一些自定义类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T16:14:24.283

是的，a `<publish-subscribe-channel/>`(with `apply-sequence="true"`) 的工作方式类似于拆分器 - 但是频道的两个订阅者都将获得相同的`File`对象。默认情况下，这两个分支将串行执行，但如果您想并行处理，可以引入 ExecutorChannel。

如果您希望每个订阅者获得不同的`File`对象，您可以添加一个转换器...

`<transformer ... expression="new java.io.File(payload.absolutePath)" />`

# javascript - javascript：如何在语句中使用变量值？

> ID：14160201
> 
> 赞同：0
> 
> 时间：2013-01-04T15:41:38.830
> 
> 标签：javascript

如何在语句中使用变量值？它是这样的：

```
var skillsSelect = document.getElementById("selUnidade");           
var unidade = skillsSelect.options[skillsSelect.selectedIndex].text;
if ( unidade == "" ) {
    alert("Escolha uma Unidade de Estoque!");
    return false;
}
else
{
    alert("Cheguei!");
    self.opener.document.frmIncluir.id_Unidade.value = unidade; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:50:28.797

你的赋值语法没问题。问题在于您的代码以打开页面上的输入为目标。

```
self.opener.document.frmIncluir.id_Unidade.value = unidade; 
```

在这一行，`frmIncluir`需要是表单**名称**（不是 ID）并且`id_Unidade`需要是输入元素**名称**（不是 ID）。

如果`id_Unidade`是 ID，您可以将其更改为：

```
self.opener.document.getElementById("id_Unidade").value = unidade; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:44:22.260

```
var message = "Foo Bar " + unidade + " blah blah";
alert(message); 
```

# php - Laravel 调试 404 路由

> ID：14160202
> 
> 赞同：9
> 
> 时间：2013-01-04T15:41:50.063
> 
> 标签：php, laravel, http-status-code-404, laravel-routing

好的，`routes.php`我使用的完整文件......我刚刚将它粘贴在这里： http: [//pastebin.com/kaCP3NwK](http://pastebin.com/kaCP3NwK)

## 路由.php

```
//The route group for all other requests needs to validate admin, model, and add assets
Route::group(array('before' => 'validate_admin|validate_model'), function()
{
    //Model Index
    Route::get('admin/(:any)', array(
        'as' => 'admin_index',
        'uses' => 'admin@index'
    )); 
```

管理员配置：

```
...
'models' => array(
'news' => array(
    'title' => 'News',
    'single' => 'news',
    'model' => 'AdminModels\\News',
),
... 
```

链接生成器：

```
@foreach (Config::get('administrator.models') as $key => $model)
    @if (Admin\Libraries\ModelHelper::checkPermission($key))
        <?php $key = is_numeric($key) ? $model : $key; ?>
        <li>
            {{ HTML::link(URL::to_route('admin_index', array($key)), $model['title']) }}
        </li>
    @endif
@endforeach 
```

## 控制器/admin.php

```
public function action_index($modelName)
{
    //first we get the data model
    $model = ModelHelper::getModelInstance($modelName);

    $view = View::make("admin.index",
        array(
            "modelName" => $modelName,
        )
    );

    //set the layout content and title
    $this->layout->modelName = $modelName;
    $this->layout->content = $view;
} 
```

所以，当访问`http://example.com/admin/news`被`news`发送到`action_index`...但由于某种原因它没有到达那里并返回`404`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T16:22:17.640

请注意，我定义了以下内容`'model' => 'AdminModels\\News',`

实际上我的`namespace`寄存器是`Admin\Models`，所以将它设置`'model' => 'Admin\Models\\News',`为我的 404 问题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T20:37:54.343

路由按照注册的顺序进行评估，因此 (:any) 路由应该在最后。您正在（我认为）被发送到 admin@index - 如果尚未定义该功能，这就是您收到 404 的原因。

# java - 这个 Java 语法 [ 1.class$noNamespace$PrintAgreementDocument ] 是什么？

> ID：14160203
> 
> 赞同：-1
> 
> 时间：2013-01-04T15:41:50.593
> 
> 标签：java, syntax

有人知道Java语法`1.class$noNamespace$PrintAgreementDocument`吗？

eclipse显示错误如下：

```
Multiple markers at this line

- Syntax error on token "1.", . expected after this token
- Syntax error on token "class$noNamespace$PrintAgreementDocument", delete 
 this token
- Syntax error on token "1.", . expected after this token
- Syntax error on token "class$noNamespace$PrintAgreementDocument", delete 
 this token
- Syntax error on token "class$noNamespace$PrintAgreementDocument", delete 
 this token 
```

代码：

```
package noNamespace;

import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.io.Reader;
import java.net.URL;
import javax.xml.stream.XMLStreamReader;
import org.apache.xmlbeans.SchemaType;
import org.apache.xmlbeans.SchemaTypeLoader;
import org.apache.xmlbeans.SchemaTypeSystem;
import org.apache.xmlbeans.XmlBeans;
import org.apache.xmlbeans.XmlException;
import org.apache.xmlbeans.XmlObject;
import org.apache.xmlbeans.XmlOptions;
import org.apache.xmlbeans.XmlString;
import org.apache.xmlbeans.xml.stream.XMLInputStream;
import org.apache.xmlbeans.xml.stream.XMLStreamException;
import org.w3c.dom.Node;

public abstract interface PrintAgreementDocument extends XmlObject
{
    public static final SchemaType type = (SchemaType)XmlBeans.typeSystemForClassLoader(
        (1.class$noNamespace$PrintAgreementDocument == null ? 
            (1.class$noNamespace$PrintAgreementDocument = 1.class$("noNamespace.PrintAgreementDocument")) 
            : 1.class$noNamespace$PrintAgreementDocument).getClassLoader(), 
                 "schemaorg_apache_xmlbeans.system.s95BAEA12C764073D07067A316EACE")
                     .resolveHandle("printagreement7eb6docty"); 
```

下面的代码在同一类

代码：

```
 public static final class Factory
  {
    public static PrintAgreementDocument newInstance()
    {
      return    (PrintAgreementDocument)XmlBeans.getContextTypeLoader().newInstance(PrintAgreementDocument.type, null);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:22:22.483

基本 Java 语法 -**所有标识符都应以字母（A 到 Z 或 a 到 z）、货币字符 ($) 或下划线 (_) 开头**

# ms-access-2003 - ms-access 2003 表单数据输入停止工作

> ID：14160209
> 
> 赞同：0
> 
> 时间：2013-01-04T15:42:26.357
> 
> 标签：ms-access-2003

我有一个带有子表单的表单，该表单一度允许修改数据。现在，当我尝试更改字段时，它会发出声音“bing”。我的保存 cmd 按钮现在显示错误“命令或操作‘SaveRecord’现在不可用。” 我在总机上的表单设置为命令：在编辑模式下打开，表单和子表单都设置为数据选项卡上的数据输入“是”。我错过了什么会导致字段不允许更新和保存命令不再起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:52:09.747

以前用过吗？

我在文本框缩放方面遇到了类似的神秘问题，即一个时间点开始产生错误，仅以一种形式出现。解决方案是创建一个新的空白表单并将所有控件从有缺陷的空白表单复制/粘贴到新的空白表单，对 VBA 中的代码进行相同的操作，一切都恢复正常。

您可以尝试执行此操作，如果问题仍然存在，则说明您的代码或表单属性中存在问题。希望这会有所帮助

# javascript - 为什么 `toString` 不等同于 `window.toString`？

> ID：14160211
> 
> 赞同：8
> 
> 时间：2013-01-04T15:42:31.580
> 
> 标签：javascript, console, global-variables, firebug

我相信所有全局变量都可以从全局对象访问。因此，如果我可以访问`x`（并且`x`没有在本地绑定），那么`window.x`是相同的值。

但是，在网页中（[在 JSFiddle 上](http://jsfiddle.net/HtFZB/4/)）：

```
window === this // true in Chrome and Firefox
toString === window.toString // true in Chrome and Firefox 
```

但在控制台中：

```
window === this // true in Chrome console and Firebug, false in Firefox web console
toString === window.toString // false in Chrome, Firebug and Firefox web console 
```

为什么是这样？为什么`window`Chrome 控制台中的全局对象`toString`没有绑定到`window.toString`？`toString`Firefox 的控制台绑定了什么？控制台中还有哪些其他全局值不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T15:46:01.310

`toString`不是全局变量。它是几乎所有对象共享的方法，包括`window`对象。

实际的全局变量将*始终*`window`在对象上可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T15:53:37.277

也许这与[这个问题有关](https://stackoverflow.com/questions/8944233/why-do-tostring-and-this-tostring-produce-different-results-in-chromes-cons)？这一切都与上下文有关，我相信

```
toString.call("foo") == this.toString.call("foo") 
```

但

```
tostring.call("foot") != window.toString.call("foo") when this != window 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T16:06:44.057

我无法在 Firefox 中重现您的声明。他们都回来了`[xpconnect wrapped native prototype]`。

为了帮助澄清这一点：全局可用的所有东西都可以通过全局对象获得。但是，可能存在通过全局对象可用的属性，这些属性不一定全局可用。这是由于 Javascript 中的原型继承模式以及缺乏关于如何处理这种情况的规范。

那么，解释器是否应该尝试通过全局对象链中的原型继承来解决全局查找？全局对象是否继承自其他对象？我认为各种 Javascript 解释器在这里是不一致的，但更熟悉 ECMAScript 规范的人可能会参与进来。

# java - 需要 Head First Java 示例说明

> ID：14160215
> 
> 赞同：1
> 
> 时间：2013-01-04T15:42:59.507
> 
> 标签：java

你好！我正在阅读 Head First Java，但我无法理解以下代码的行为：

```
public class Dog {
    String name;
    public static void main(String[] args) {
        // make a Dog object and access it
        Dog dog1 = new Dog();
        dog1.bark();
        dog1.name = "Bart";

        // now make a Dog array
        Dog[] myDogs = new Dog[3];
        // and put some dogs in it
        myDogs[0] = new Dog();
        myDogs[1] = new Dog();
        myDogs[2] = dog1;

        // now acces the Dogs using the array references
        myDogs[0].name = "Fred";
        myDogs[1].name = "Marge";

        // Hmmm... what is MyDogs[2] name?
        System.out.print("last dog name is ");
        System.out.println(myDogs[2].name);

        // now loop through the array
        // and tell all dogs to bark
        int x = 0;
        while (x < myDogs.length) {
            myDogs[x].bark();
            x = x + 1;
        }
    }

    public void bark() {
        System.out.println(name + " says Ruff!");
    } 
```

此代码产生的输出如下：

```
null says Ruff!
last dog name is Bart
Fred says Ruff!
Marge says Ruff!
Bart says Ruff! 
```

我很难理解这一点，IMO 代码应该运行到某种无限循环。据我了解（并且我之前在 python 中编程过）：当类被激活时，main 方法被调用，然后在 main 方法中，创建了另外两个相同类型的类。（现在到了难以理解的部分——>）当新类被创建时，在它的 main 方法中，又创建了 2 个类，依此类推.. 当它创建一个 infinte 时，它​​怎么会产生上面显示的输出类的数量，因此代码实际上应该永远不会完成运行。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T15:44:17.750

你误解了`main()`方法。

`main()`当您开始执行程序时，Java 会调用该方法。
实例化一个类不会运行该`main()`方法；它只会运行类的构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T15:45:35.943

您发布的代码仅实例化了该类的总共 3 个实例`Dog`。该`myDogs`数组有 3 个元素，因此`while`循环肯定会终止。
什么不清楚？

`main`仅在执行程序时调用该方法。你的程序可以这样写（我认为对于 Java 初学者来说更清楚）：

```
class Dog {
    String name;
    public void bark() {
        System.out.println(name + " says Ruff!");
    }
}

public class MyDogTest {

    public static void main(String[] args) {

        // make a Dog object and access it
        Dog dog1 = new Dog();
        dog1.bark();
        dog1.name = "Bart";

        // now make a Dog array
        Dog[] myDogs = new Dog[3];
        // and put some dogs in it
        myDogs[0] = new Dog();
        myDogs[1] = new Dog();
        myDogs[2] = dog1;

        // now acces the Dogs using the array references
        myDogs[0].name = "Fred";
        myDogs[1].name = "Marge";

        // Hmmm... what is MyDogs[2] name?
        System.out.print("last dog name is ");
        System.out.println(myDogs[2].name);

        // now loop through the array
        // and tell all dogs to bark
        int x = 0;
        while (x < myDogs.length) {
            myDogs[x].bark();
            x = x + 1;
        }

    }

} 
```

如果将两个类（`Dog`和`MyDogTest`）放在同一个`.java`文件中，请注意 only`MyDogTest`应该声明为`public`，否则程序将无法编译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T15:52:01.087

实例化一个类将调用该类的构造函数。您没有定义一个，因此您的构造函数实际上是一个没有参数且没有主体的构造函数，如下所示：

```
public Dog () {

} 
```

当然，这个构造函数永远不会导致无限循环。

main 方法是在启动程序时调用的方法，因此只调用了一次。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T16:09:37.950

注意方法声明`static`中的关键字。`main()`这意味着该方法始终是可访问的，与特定的类实例无关。（由于您来自 Python 世界，欢迎您阅读有关[字段修饰符](http://docs.oracle.com/javase/tutorial/reflect/member/fieldModifiers.html)的内容）。
您可以在某种程度上将其视为“外部”方法（这意味着您始终可以在外部访问它并使用 执行它`Dog.main(your string args)`），而不是“意识到”类的存在。另请注意，您使用的多个类可以有`main`方法，在这种情况下，您应该通过在文件中声明它来确定哪个是真正的主要类`manifest`，但这是一个有点高级的主题，留待您进一步研究。
当然，正如其他人已经解释的那样，`main`方法是 JVM 运行一次的特定方法，在您执行程序的那一刻。

# ssrs-2008 - 分组页总计和结转总计

> ID：14160219
> 
> 赞同：2
> 
> 时间：2013-01-04T15:43:12.673
> 
> 标签：ssrs-2008, reporting-services

我对此进行了很多搜索，但没有发现任何有用的信息。以前在[这里](https://stackoverflow.com/questions/9257032/running-totals-per-page-in-ssrs-2008-to-display-cumulative-totals)问过这个问题，但没有人回应。

我有一个 tablix，它显示带有数量列的分组数据：

```
Tablix (data)
             Name (group)
                         Amount (rows) 
```

如果“名称”组跨越多个页面，我想显示第一页上存在的金额总和的页面总数。在下一页上必须显示上一页的结转总额。

我已经尝试了很多东西，尤其是我的自定义程序集（比如保存一个包含每个组总数的字典，并在报告的页脚中尝试显示总数等）。真正搞砸任何实现的是报告的页眉、正文和页脚“执行”的顺序。

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:18:04.653

由于：

*   无法获取分组数据的一个实例是否在详细级别拆分在一页以上的事实（以便结转总计可以显示在重复的列标题下方）
*   页眉和页脚总是在正文元素之后“评估”
*   您只能在页眉和页脚中使用的表达式中引用 ReportItem
*   您不能从页眉或页脚更改正文元素（主要是因为上述几点）
*   您不能扩展 tablix 控件来添加您自己的功能

我决定在页脚中显示组页面总数，将其存储并拾取以将其显示到下一页。

这是通过使用累积总计列来完成的

```
= IIf(RunningValue(Fields!AmountDC.Value, Sum, "Group1") <> Sum(Fields!Amount.Value, "Group1"), code.SetTotal(RunningValue(Fields!Amount.Value, Sum, "Group1")), Nothing) 
```

最后一个详细信息行将其设置为“无”

在页脚中，一个文本框会选取该累积总计字段的最后一个值。

```
= code.SetTotal(Last(ReportItems!CumTotal.Value)) 
```

并将当前总数存储在嵌入代码的私有字段中。

```
Private running As Double = 0

Public Function SetTotal(ByVal val As Double) As Double
    running = val
    Return val
End Function

Public Function GetTotal() As Double
    Return running
End Function 
```

最后在页脚中提取存储的总数

```
= code.GetTotal() 
```

这太简单了，但它仍然是我经过多次试验后能得到的最接近的东西！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T11:39:22.820

试试这个帖子[...分开的页面答案..](https://stackoverflow.com/questions/13604502/page-number-in-landscape-reports/13701507#13701507)

这不是一个直接的答案，但如果你有创意并使用 sql 分隔页面或使用运行总计，这可以让你开始。

但是，要回答您的问题，它不是 ssrs 的功能。

# javascript - 无法让活动在我的网站上运行

> ID：14160220
> 
> 赞同：0
> 
> 时间：2013-01-04T15:43:15.530
> 
> 标签：javascript, video.js

我正在尝试在播放器播放/暂停时执行 js 代码。我尝试了许多在谷歌上找到的解决方案，但没有任何效果。该网站是[http://www.ihousing.cz](http://www.ihousing.cz)。

我试过的代码：

```
var myFunc = function(){
  var VideoJS = this;
  jQuery('.nivo-slider').data('nivoslider').stop();
  };
VideoJS.addEvent("play", myFunc); 
```

正在返回我 TypeError: elem.addEventListener is not a function...

我在这里想念什么？感谢您的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T22:32:48.327

好的，问题是我需要为播放器获取一个变量，而不仅仅是调用 VideoJS（它期望 DOM 对象作为第一个参数）......所以正确的代码应该是：

```
var myPlayer = _V_("video-142-video");
var myFunc = function(){
  var myPlayer = this;
  jQuery('.nivo-slider').data('nivoslider').stop();
  };
myPlayer.addEvent("play", myFunc); 
```

您的代码也有效...

感谢所有参与的人：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T10:07:14.553

尝试在播放器的就绪函数上设置事件处理程序。

```
var onPlay = function(){
  //do something on play
};

_V_("your-video-id").ready(function(){
  var myPlayer = this;
  myPlayer.addEvent("play", onPlay);
}); 
```

# python - Django 读取/上传 CSV

> ID：14160221
> 
> 赞同：4
> 
> 时间：2013-01-04T15:43:16.680
> 
> 标签：python, django

我需要上传并读取 CSV，然后保存到数据库。我是一个初学者，下面是我到目前为止使用'django-adaptors'（http://django-adaptors.readthedocs.org/en/latest/index.html）所取得的成就我知道它不是很多，但我'我这样做是为了了解更多信息:)

我在代码的视图中苦苦挣扎（如下）。我不知道如何上传然后将文件读入 CodeCSvModel() 函数？谁能帮忙解释一下？非常感谢。:)

**视图.py**

```
from django.template import RequestContext
from django.shortcuts import render_to_response
from web.forms import codeUploadForm
from web.csvTools import CodeCSvModel

def codeImport(request):
    # If we had a POST then get the request post values.
    if request.method == 'POST':
        form = codeUploadForm(request.POST, request.FILES)
      # handle_uploaded_file(request.FILES['file'])

                ====[HELP HERE]=====

        #form = codeUploadForm(request.POST)

        CodeCSvModel.import_from_file(form['file'])

    else:
         form = codeUploadForm()
         context = {'form':form}
         return render_to_response('import.html', context, context_instance=RequestContext(request)) 
```

**表格.py**

```
class codeUploadForm(forms.Form):

    file = forms.FileField()
    place = forms.ModelChoiceField(queryset=Incentive.objects.all()) 
```

**csv工具.py**

```
from datetime import datetime
from adaptor.fields import *
from adaptor.model import CsvModel, CsvDbModel, ImproperlyConfigured,\
    CsvException, CsvDataException, TabularLayout, SkipRow,\
    GroupedCsvModel, CsvFieldDataException
from web.models import *

class CodeCSvModel(CsvModel):

    codeid = CharField()
    remotecode = CharField()
    active = BooleanField()
    created = DateField()
    modified = DateField()
    incentiveid = CharField()

    class Meta:
        delimiter = ";"
        dbModel = Code 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T01:43:42.693

Django 仅将上传的文件保留在内存中，如果它是 2.5MB 或更小，否则它会写入临时位置。

您缺少的步骤是您实际将文件从内存/临时位置写入某个磁盘的位置，例如

```
if request.method == 'POST':
    form = MyForm(request.POST, request.FILES)
    if form.is_valid():
        uploaded_file = request.FILES['html-file-attribute-name']

        # Write the file to disk
        fout = open("path/to/save/file/to/%s" % uploaded_file.name, 'wb')
        for chunk in uploaded_file.chunks():
            fout.write(chunk)
        fout.close() 
```

如果文件非常大，分块是要走的路，因为 Django 会在写入磁盘之前将文件的每个块读入内存。如果您改用 read()，它会将整个文件读入内存，因此块是您最好的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T17:25:38.287

所以这行得通，我几乎就在那里：

```
 file = request.FILES['file']
        CodeCSvModel.import_from_file(file)
        return render_to_response('import.html', context_instance=RequestContext(request)) 
```

# asp.net-mvc-3 - 根据登录用户 MVC3 控制器的角色过滤 linq 查询

> ID：14160222
> 
> 赞同：0
> 
> 时间：2013-01-04T15:43:16.733
> 
> 标签：asp.net-mvc-3, linq-to-entities, asp.net-roles

我要做的是根据我的 MVC3 控制器中登录用户的角色过滤查询。我限制用户只有一个角色；任何用户都不能拥有多个角色。我有一些代码片段，但我不确定这是要走的路。如果有人可以帮助我实现我的目标

```
 string[] roles = Roles.GetRolesForUser();

    string color= roles[0];

    string vcolor = color.Substring(0, 4);

    switch (vcolor)
                {
                    case "Rewa":
                        vcolor = "white";
                        break;
                    case "Ukau":
                        vcolor == "black";
                        break;
                    case "Whau":
                        vcolor = "green";
                        break;
                    case "Angi":
                        vcolor = "Blue";
                        break;
                }

public ActionResult _MembersView()
    {
        var pagenew = db.Members

            .Where(u => u.color == vcolor)(I will want to then set this condition to the vcolor dynamically)
            .OrderBy(u => u.Tcd);
            //.Take(12);
        return PartialView(pagenew);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:46:49.133

将您的逻辑放入一个方法中：

```
private string GetVColorForCurrentUser()
{
    string[] roles = Roles.GetRolesForUser();
    string color = roles[0];
    string vcolor = color.Substring(0, 4);
    switch (vcolor)
    {
        case "Rewa":
            return "white";
        case "Ukau":
            return "black";
        case "Whau":
            return "green";
        case "Angi":
            return "Blue";
    }
    return vcolor;
} 
```

然后调用这个方法：

```
public ActionResult _MembersView()
{
    var pagenew = db
        .Members
        .Where(u => u.color == GetVColorForCurrentUser())
        .OrderBy(u => u.Tcd);
    return PartialView(pagenew);
} 
```

或者直接写成过滤方法：

```
private bool CurrentUserHasSameVColor(Member member)
{
    string[] roles = Roles.GetRolesForUser();
    string color = roles[0];
    string vcolor = color.Substring(0, 4);
    switch (vcolor)
    {
        case "Rewa":
            vcolor = "white";
            break;
        case "Ukau":
            vcolor = "black";
            break;
        case "Whau":
            vcolor = "green";
            break;
        case "Angi":
            vcolor = "Blue";
            break;
    }
    return member.color == vcolor;
} 
```

接着：

```
public ActionResult _MembersView()
{
    var pagenew = db
        .Members
        .Where(CurrentUserHasSameVColor)
        .OrderBy(u => u.Tcd);
    return PartialView(pagenew);

} 
```

# zsh - Zsh PROJECT 环境变量

> ID：14160226
> 
> 赞同：0
> 
> 时间：2013-01-04T15:43:27.543
> 
> 标签：zsh

我一直在尝试找出如何为ropevim设置一个rope项目的目录以自动查找（我仍然没有成功），并且在这样做时我发现`$PROJECT`了`zsh`.

一旦我将此变量设置为特定路径，例如我的项目的根目录

```
~ # cd my_project_folder
~/my_project_folder # export PROJECT=`pwd` 
```

提示已更改，因此所有路径都打印为相对于`PROJECT`项目根目录，就像这样

```
PROJECT # cd sub_folder
PROJECT/sub_folder # 
```

这非常简洁，因为它缩短了路径，但我想更改提示以显示例如项目名称而不是`PROJECT`.

我试图在`zsh`文档中搜索有关此环境变量的任何提及，但没有运气。有没有人遇到过这个变量？`bash`似乎忽略了这个环境变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T00:12:37.273

您可能可以使用项目特定的[命名目录](http://www.manpagez.com/man/1/zshexpn/)。

例如，使用目录结构：

```
~/projects/foo
~/projects/foo/bar 
```

在你的`~/.zshrc`：

```
FOO=~/projects/foo 
```

您的提示可能与此类似：

```
 ~/projects  #ls
foo
 ~/projects  #cd foo 
 ~FOO  #ls
 bar
 ~/FOO  #cd bar
 ~/FOO/bar  # 
```

这用于[`%~`](http://www.manpagez.com/man/1/zshmisc/)在提示符内展开当前目录：

> **`%d`** 和一样 **`%/`**，但如果当前工作目录有一个命名目录作为其前缀，则该部分将替换为 a**`~`**后跟目录的名称。

（在链接`man zshmisc`页面的“简单提示转义”下找到）。

# ios - ios按下时更改按钮标题字体

> ID：14160235
> 
> 赞同：2
> 
> 时间：2013-01-04T15:43:50.097
> 
> 标签：ios, button, fonts

我是 ios 的新手，我想知道是否可以在按下按钮时更改按钮的标题字体，我可以在按钮突出显示时更改按钮的颜色：

```
[button setTitleColor:[UIColor colorWithRed:255/255.0 green:255/255.0 blue:255/255.0 alpha:1.0] forState:UIControlStateHighlighted]; 
```

有没有这样的东西可以改变按钮的字体大小，而不用写按钮按下的方法。（我想在突出显示的状态下改变字体，所以我不确定 buttonPressed 方法是否能正常工作）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T15:50:38.290

您可以使用该`titleLabel`属性：

```
button.titleLabel.font = [UIFont systemFontOfSize: 12]; 
```

**编辑**：您必须在操作中使用它`UIControlEventTouchDown`，`UIControlEventTouchUpInside`并且`UIControlEventTouchUpOutside`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T15:54:51.413

如果您坚持不编写按钮按下方法，则可以使用属性字符串试试运气。UIButton 有方法

```
– setAttributedTitle:forState: 
```

您可以更改突出显示的状态以通过这种方式使用具有正确字体的字符串版本。

[您可以在Apple 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/AttributedStrings/AttributedStrings.html)中了解有关属性字符串的更多信息。

另一种解决方案是为您的按钮使用自定义图像。并使用方法

```
– setImage:forState: 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-14T09:24:27.193

```
UIButton *myButton = [UIButton buttonWithType:UIButtonTypeCustom];
[myButton setTitle:@"Click Button" forState:UIControlStateNormal];
myButton.frame = CGRectMake(80.0, 210.0, 160.0, 40.0);
[myButton.titleLabel setFont:[UIFont systemFontOfSize:10]];
[self.view addSubview:myButton]; 
```

# css - 如何删除 p:commendlink 中的边框？

> ID：14160236
> 
> 赞同：1
> 
> 时间：2013-01-04T15:43:52.317
> 
> 标签：css, image, jsf, user-interface, primefaces

我在 xhtml 页面中有 ap:commandLink

```
<p:commandLink onclick="routeDeleteConfirmation.show()" title="Delete">
                    <h:graphicImage class="deleteBinButtonLnk" />
                    <f:setPropertyActionListener value="#{route}" 
                    target="#{routeController.selectedRouteHeader}"/>
</p:commandLink> 
```

CSS：

```
.deleteBinButtonLnk {  width: 17px; height: 19px;
                       border-style: none !important;
                       padding: 2px 2px;
                       background: url('../images/buttons/delete_bin_off.png')
                       no-repeat;
}

.deleteBinButtonLnk:hover{ width: 17px; height: 19px;
                           border: none;
                           background: url('../images/buttons/delete_bin_on.png')
                           no-repeat; 
```

在这里它显示 h:graphicImage 中图像的边框。我不需要边框。

请告诉一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:47:09.660

我得到了它。

styleClass 而不是`<h:graphicImage>`

```
<p:commandLink 
   styleClass="accountEditBtn"
   update="@form"
   actionListener="#{someBean.someListener}"
</p:commandLink> 
```

CSS类

```
.accountEditBtn { background-image: url('../resources/image/pencil_black.png'); } 
```

# c# - 搜索正确的数据结构（添加头、交换、删除……）

> ID：14160238
> 
> 赞同：0
> 
> 时间：2013-01-04T15:43:55.893
> 
> 标签：c#, data-structures

我正在寻找一种数据结构，它提供：

1.  在前面添加一个元素
2.  交换两个元素
3.  移除元素
4.  当我添加一个元素（不是在最后一个位置）时，其他元素应该向后滑动（比如在队列中）
5.  访问每个元素
6.  通用会很好，但不是必需的

我在 MSDN 上找到的数据结构不能满足我的要求

*   `List`并且`LinkedList`不提供交换方法
*   我可以用`ArrayList`.
*   `HashTable`不提供订单
*   `Queue`并且`Stack`不提供交换，随机访问，...

我可以编写自己的数据结构，但我不想重新发明轮子，因为 .NET 库非常庞大。

编辑：

我需要一个数据结构来提供类似的东西，比如进程优先级调度程序。第一个条目的优先级最高，最后一个条目的优先级最低。有时我必须更改元素的优先级（交换）或完全删除元素（删除）。我最近添加的元素应该具有最高优先级（这就是我将它添加到前面位置的原因）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T15:51:26.143

您确实需要弄清楚您将多久执行一次这些操作，因为您列出了其中的极端数量。

以下是我对您的想法的看法：

*   如果您已索引 get/set，则实现交换方法是微不足道的。
*   如果您担心复制时间，然后反转您的列表，以便您可以在前面插入便宜的插入，您需要重写一些逻辑来将其拉下来，但这不会停止使用数组作为后端。

另外作为最后一点，您确定您不需要某种自动排序，因为这会使这变得更加容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T16:22:51.307

听起来你正在寻找的是一个堆。

[维基百科：堆](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)

堆通常用于管理优先级，并且可以在队列顶部拥有最高优先级的项目，并根据从堆中添加或删除的具有不同优先级的项目重新排列。

这是一个具有间隔堆实现的通用集合库：

[http://www.itu.dk/research/c5/](http://www.itu.dk/research/c5/)

# iphone - 调用了dismissViewControllerAnimated，但ViewController在设备上没有被解除，但在模拟器上工作正常，为什么？

> ID：14160239
> 
> 赞同：0
> 
> 时间：2013-01-04T15:43:56.813
> 
> 标签：iphone, objective-c, ios

我有一个主`UITableViewController`按钮和一个按钮可以转到设置，在设置上我有另一个按钮可以返回主视图。这在模拟器上运行良好，但是当我在设备上测试时，该应用程序不起作用。设置上返回主视图的按钮不起作用。

我不知道为什么这在模拟器上运行良好并且在设备上不起作用。两者都有相同的ios版本。

```
- (IBAction)CancelCreation{

   // [self dismissModalViewControllerAnimated:YES];
   // [self dismissViewControllerAnimated:YES completion:nil];
    [viewControllerMain.presentingViewController dismissViewControllerAnimated:YES completion:NULL];
   // UIViewController *parentController = self.presentingViewController;
  //  [self.navigationController popToRootViewControllerAnimated:YES];
//    [self.view.window.rootViewController dismissViewControllerAnimated:YES completion:NULL];
} 
```

所有注释行都是我尝试查看是否有效但无效。在 de 模拟器上一切正常，但在设备上没有任何工作。也许是有问题，因为我使用 ARC。

我使用 segue 从主视图控制器转到新控制器。在我使用的新控制器上

```
- (IBAction)CancelCreation{ 
    [self dismissViewControllerAnimated:YES completion:NULL];
} 
```

关闭视图控制器。我想这行得通，我的意思是视图不再响应但没有消失。

奇怪的是，这一次有效，现在不起作用。

我只有一个 ipad 来测试应用程序，所以我只制作了 iphone 应用程序并测试它是否可以在设备上运行。今天我再次使该应用程序通用，并在设备上进行了测试，一切正常。我有两个不同的故事板，一个用于 iphone，一个用于 ipad。也许这就是我在不同的故事板上使用同名的不同类型的segue的问题。我不知道。

# linux - Jmeter 远程运行和 CSV 文件

> ID：14160241
> 
> 赞同：3
> 
> 时间：2013-01-04T15:44:00.240
> 
> 标签：linux, jmeter

我有 JMeter (2.8) 测试，这些测试在本地运行时运行良好，而在远程运行时失败。
我运行它们的唯一区别是`-r`开关（或`-R <list of machines>`），所有其他参数完全相同。

测试在远程模式下失败，因为应该包含 CSV 文件中的值的变量包含`<EOF>`值 - 这意味着测试无法加载 CSV 文件。

我已将 CSV 文件上传到`bin`每台远程机器上的 JMeter 目录（[正如有人建议的那样](https://stackoverflow.com/a/3998522/1387438)），但这无济于事。

我正在使用Linux机器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T15:55:43.130

来自 Jmeter 文档：

```
Relative file names are resolved with respect to the path of the active test plan.
For distributed testing, the CSV file must be stored on the server host system in the 
correct relative directory to where the jmeter server is started.</b>
Absolute file names are also supported, but note that they are unlikely to work in remote 
mode, unless the remote server has the same directory structure. 
```

另一种选择是使用变量作为 CSV 文件的基本文件夹，并在每个远程服务器上启动时设置它：

```
-Jresdir=<CSV Folder> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-16T11:24:06.317

原来 jmeter-server 正在路径“jmeter/file-from-ui.csv”上寻找一些东西。通过使用 strace 找到了这个。

我通过在我启动 jmeter-server 的目录中添加一个 jmeter 文件夹并将我的 csv 文件放在那里解决了我的问题。

# android - 如何在android代码中获得像facebook这样的通知？

> ID：14160245
> 
> 赞同：0
> 
> 时间：2013-01-04T15:44:06.200
> 
> 标签：android

在我的活动中，我不断轮询服务器以获取更新，并将该数据存储在数据库中并从那里显示。我的问题是，当我获得更新时，如何在不刷新的情况下显示在该活动屏幕上（就像 FACEBOOK 一样）请帮帮我。

* * *

在登录活动中，我调用此函数，

```
 public void PollingViaAlarm() {
try {
        Calendar cal = Calendar.getInstance();
                cal.setTimeInMillis(System.currentTimeMillis());
 Intent intent = new Intent(getApplicationContext(),PollingAlarm.class);
 intent.putExtra("title", "Polling Via Server");
 PendingIntent pendingIntent = PendingIntent.getBroadcast(getApplicationContext(), 0,  intent,
PendingIntent.FLAG_CANCEL_CURRENT);
AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,System.currentTimeMillis() + 5 * 60  * 1000, 5 * 60 * 1000,pendingIntent);
} catch (Exception e) {

}} 
```

在 PollingAlarm 类中，我调用函数来轮询服务器。

```
 cnstnt.getUserMessagesPollingAlarm(patient_id,username,password, "123");
 cntxt.startService(new Intent(cntxt, NotificationService.class)); 
```

在通知类中，

```
 package com.vcare.cnstnt;

import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
 import android.util.Log;

public class NotificationService extends Service {

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
}

@Override
public void onStart(Intent intent, int startId) {
    // TODO Auto-generated method stub
    super.onStart(intent, startId);
    SharedPref shrd = new SharedPref(getApplicationContext());
    Intent i = new Intent("android.intent.action.MAIN").putExtra(
            "msg_count", "" + shrd.getMsgCount());
    Log.e("msg_count in notification service", "" + shrd.getMsgCount());
    if (shrd.getMsgCount() > 0) {
        Log.e("starting broadcasting","");
        this.sendBroadcast(i);
        this.stopSelf();
    }
}

 } 
```

如果可能的话，你能看看我想做的事情吗？我需要实现 facebook 类型的通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:29:33.447

1.  使用 a`BroadcastReciever`并启动 a`Service`来轮询服务器。
2.  在`Service`创建一个接口和一个调用类似的函数

    `public void setOnListener(Listener listener) {...}`

3.  `Activity`在和覆盖函数中实现该接口。

4.  绑定到接口：

    ```
    private ServiceConnection mConnection = new ServiceConnection() {

        @Override
        public void onServiceConnected(ComponentName name, IBinder service) {
            final MyService mBoundService = ((MyService.LocalBinder) service)
                    .getService();
            mBoundService.setOnListener(MyActivity.this);
        }

        @Override
        public void onServiceDisconnected(ComponentName name) {
        }

    }; 
    ```

5.  绑定`Activity`到`Service`：

    ```
    @Override
    public void onStart() {
        super.onStart();
        final Intent intent = new Intent(this, MyService.class);
        bindService(intent, mConnection, 0);
    } 
    ```

6.  `Service`现在只需在下载服务器更新时调用接口函数。

7.  确保取消绑定`Service`：

    ```
    @Override
    public void onStop() {
        super.onStop();
        unbindService(mConnection);
    } 
    ```

* * *

笔记！我没有测试下面的代码。

响应更新的代码：您的警报似乎没问题，但您根本没有绑定到服务。为了能够绑定到服务，该服务需要看起来像这样：

```
public class NotificationService extends Service {

    private final IBinder mBinder = new LocalBinder();
    private NotificationListener listener;

    public void setListener(NotificationListener listener) {
        this.listener = listener;
    }

    @Override
    public IBinder onBind(Intent intent) {
        return mBinder;
    }

    @Override
    public void onCreate() {
        SharedPref shrd = new SharedPref(getApplicationContext());
        Log.e("msg_count in notification service", "" + shrd.getMsgCount());
        if (listener != null && shrd.getMsgCount() > 0) {
            Log.e("starting broadcasting", "");
            listener.onMessageRecieved(shrd.getMsgCount());
        }
        this.stopSelf();
    }

    public interface NotificationListener {
        public void onMessageRecieved(int messageCount);
    }

    public class LocalBinder extends Binder {
        public NotificationService getService() {
            return NotificationService.this;
        }
    }
} 
```

所有应该收到更新的活动都必须实施`NotificationListener`. 然后绑定到服务，并在服务连接到活动的过程中，绑定监听器。它应该看起来像这样。

```
public class TestActivity extends Activity implements NotificationService.NotificationListener {

    private ServiceConnection mConnection = new ServiceConnection() {

        @Override
        public void onServiceConnected(ComponentName name, IBinder service) {
            final NotificationService mBoundService = ((NotificationService.LocalBinder) service).getService();
            mBoundService.setListener(TestActivity.this);
        }

        @Override
        public void onServiceDisconnected(ComponentName name) {
        }

    };

    @Override
    public void onMessageRecieved(int messageCount) {
        // DO WHATEVER YOU'D LIKE HERE,
        // LIKE UPDATE YOUR UI!
    }

    @Override
    public void onResume() {
        super.onResume();
        // Bind service
        final Intent serviceIntent = new Intent(this, NotificationService.class);
        // 0 means do not create service if it doesnt exist
        bindService(serviceIntent, mConnection, 0);
    }

    @Override
    public void onPause() {
        super.onPause();
        unbindService(mConnection);
    }
} 
```

现在，每当执行该警报时，如果有任何活动绑定到服务（意味着如果用户打开了应用程序），该活动将收到更新。现在实现您想要处理更新的任何代码。

我真的建议您阅读[Android Developers 中的绑定服务](http://developer.android.com/guide/components/bound-services.html)。那是我学会绑定到服务的地方，我的代码深受该链接的影响。

# maven - maven pmd插件报告没有问题

> ID：14160246
> 
> 赞同：0
> 
> 时间：2013-01-04T15:44:08.117
> 
> 标签：maven, report, pmd

我已将 maven pmd 插件配置为一个 maven 父 pom，我将其与一个名为 MFactors3 的测试项目一起使用。当我在 Eclipse 中使用 m2Eclipse 构建这个小项目时，PMD 报告了很多违规行为。当我从命令行构建相同的项目时，PMD 在目标/站点文件夹中生成一个空的违规文件。

我的父 pom 有部分直接取自推荐的 maven pmd 文档。我现在没有显示任何 pom 材料，因为插件正在被调用并且它运行成功。

下面是从命令行运行 'mvn pmd:pmd -X' 的输出。配置数据看起来完全正确。但未检测到任何违规行为。为什么？

```
[DEBUG] Configuring mojo 'org.apache.maven.plugins:maven-pmd-plugin:2.7.1:pmd' with basic configurator -->
[DEBUG]   (f) aggregate = false
[DEBUG]   (f) compileSourceRoots = [/Users/Robert/Documents/workspace-sts-3.1.0-psgv/MFactors30 /src/main/java]
[DEBUG]   (f) excludeRoots = [/Users/Robert/Documents/workspace-sts-3.1.0-psgv/MFactors30/target/generated-sources/stubs]
[DEBUG]   (f) excludes = [**/*Bean.java, **/generated/*.java]
[DEBUG]   (f) format = xml
[DEBUG]   (f) includeTests = false
[DEBUG]   (f) linkXRef = true
[DEBUG]   (f) minimumPriority = 5
[DEBUG]   (f) outputDirectory = /Users/Robert/Documents/workspace-sts-3.1.0-psgv/MFactors30/target/site
[DEBUG]   (f) project = MavenProject: edu.psu.sweng497a:MFactors30:0.0.1-SNAPSHOT @ /Users/Robert/Documents/workspace-sts-3.1.0-psgv/MFactors30/pom.xml
[DEBUG]   (f) reactorProjects = [MavenProject: edu.psu.sweng497a:MFactors30:0.0.1-SNAPSHOT @ /Users/Robert/Documents/workspace-sts-3.1.0-psgv/MFactors30/pom.xml]
[DEBUG]   (f) skip = false
[DEBUG]   (f) sourceEncoding = utf-8
[DEBUG]   (f) targetDirectory = /Users/Robert/Documents/workspace-sts-3.1.0-psgv/MFactors30/target
[DEBUG]   (f) targetJdk = 1.6
[DEBUG]   (f) testSourceRoots = [/Users/Robert/Documents/workspace-sts-3.1.0-psgv/MFactors30/src/test/java]
[DEBUG]   (f) xrefLocation = /Users/Robert/Documents/workspace-sts-3.1.0-psgv/MFactors30/target/site/xref
[DEBUG]   (f) xrefTestLocation = /Users/Robert/Documents/workspace-sts-3.1.0-psgv/MFactors30/target/site/xref-test
[DEBUG] -- end configuration --
[DEBUG] Preparing ruleset: rulesets/basic.xml
[DEBUG] Before: rulesets/basic.xml After: basic.xml
[DEBUG] The resource 'rulesets/basic.xml' was not found with resourceLoader org.codehaus.plexus.resource.loader.FileResourceLoader.
[DEBUG] The resource 'rulesets/basic.xml' was not found with resourceLoader org.codehaus.plexus.resource.loader.JarResourceLoader.
[DEBUG] The resource 'rulesets/basic.xml' was found as jar:file:/Users/Robert/.m2/repository/pmd/pmd/4.3/pmd-4.3.jar!/rulesets/basic.xml.
[DEBUG] Preparing ruleset: rulesets/unusedcode.xml
[DEBUG] Before: rulesets/unusedcode.xml After: unusedcode.xml
[DEBUG] The resource 'rulesets/unusedcode.xml' was not found with resourceLoader org.codehaus.plexus.resource.loader.FileResourceLoader.
[DEBUG] The resource 'rulesets/unusedcode.xml' was not found with resourceLoader org.codehaus.plexus.resource.loader.JarResourceLoader.
[DEBUG] The resource 'rulesets/unusedcode.xml' was found as jar:file:/Users/Robert/.m2/repository/pmd/pmd/4.3/pmd-4.3.jar!/rulesets/unusedcode.xml.
[DEBUG] Preparing ruleset: rulesets/imports.xml
[DEBUG] Before: rulesets/imports.xml After: imports.xml
[DEBUG] The resource 'rulesets/imports.xml' was not found with resourceLoader org.codehaus.plexus.resource.loader.FileResourceLoader.
[DEBUG] The resource 'rulesets/imports.xml' was not found with resourceLoader org.codehaus.plexus.resource.loader.JarResourceLoader.
[DEBUG] The resource 'rulesets/imports.xml' was found as jar:file:/Users/Robert/.m2/repository/pmd/pmd/4.3/pmd-4.3.jar!/rulesets/imports.xml.
[WARNING] Unable to locate Source XRef to link to - DISABLED
[DEBUG] Exclusions: **/*~,**/#*#,**/.#*,**/%*%,**/._*,**/CVS,**/CVS/**,**/.cvsignore,**/RCS,**/RCS/**,**/SCCS,**/SCCS/**,**/vssver.scc,**/project.pj,**/.svn,**/.svn/**,**/.arch-ids,**/.arch-ids/**,**/.bzr,**/.bzr/**,**/.MySCMServerInfo,**/.DS_Store,**/.metadata,**/.metadata/**,**/.hg,**/.hg/**,**/.git,**/.git/**,**/BitKeeper,**/BitKeeper/**,**/ChangeSet,**/ChangeSet/**,**/_darcs,**/_darcs/**,**/.darcsrepo,**/.darcsrepo/**,**/-darcs-backup*,**/.darcs-temp-mail,**/*Bean.java,**/generated/*.java
[DEBUG] Inclusions: **/*.java
[DEBUG] Velocimacro : added #link(  href name target img position alt border width height ) : source = org/apache/maven/doxia/siterenderer/resources/default-site.vm
[DEBUG] Velocimacro : added #image(  img alt border width height ) : source = org/apache/maven/doxia/siterenderer/resources/default-site.vm
[DEBUG] Velocimacro : added #banner(  banner id ) : source = org/apache/maven/doxia/siterenderer/resources/default-site.vm
[DEBUG] Velocimacro : added #links(  links ) : source = org/apache/maven/doxia/siterenderer/resources/default-site.vm
[DEBUG] Velocimacro : added #breadcrumbs(  breadcrumbs ) : source = org/apache/maven/doxia/siterenderer/resources/default-site.vm
[DEBUG] Velocimacro : added #displayTree(  display item ) : source = org/apache/maven/doxia/siterenderer/resources/default-site.vm
[DEBUG] Velocimacro : added #menuItem(  item ) : source = org/apache/maven/doxia/siterenderer/resources/default-site.vm
[DEBUG] Velocimacro : added #mainMenu(  menus ) : source = org/apache/maven/doxia/siterenderer/resources/default-site.vm
[DEBUG] Velocimacro : added #copyright(  ) : source = org/apache/maven/doxia/siterenderer/resources/default-site.vm
[DEBUG] Velocimacro : added #publishDate(  position publishDate version ) : source = org/apache/maven/doxia/siterenderer/resources/default-site.vm
[DEBUG] Velocimacro : added #poweredByLogo(  poweredBy ) : source = org/apache/maven/doxia/siterenderer/resources/default-site.vm
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:15:08.027

我会回答我自己的问题。基本上这是用户错误，因为我从父 pom.xml 中删除了一部分 maven-pmd-plugin 配置代码。我这样做是因为取自文档的示例显示了正在使用的自定义规则集。我想要默认规则集。

我花了很长时间才意识到我的错误，因为插件在没有任何规则集的情况下运行并且没有指示任何问题（不应该至少警告没有使用规则集吗？）。

这是所需的正确配置元素：

```
<!-- Customize rulesets here -->
<rulesets>
  <ruleset>rulesets/basic.xml</ruleset>
  <ruleset>rulesets/naming.xml</ruleset>
  <ruleset>rulesets/design.xml</ruleset>
</rulesets> 
```

我还想指出，这些规则集嵌入在插件 jar 文件中。您不会在任何地方的文件系统上找到它们。

# ruby-on-rails - 如何将此代码转换为不显眼的 javascript？

> ID：14160247
> 
> 赞同：0
> 
> 时间：2013-01-04T15:44:09.487
> 
> 标签：ruby-on-rails

在我看来，我有以下代码：

```
<div class="answer">
<% tarea = 'ta' + j.to_s %>
<%= text_area_tag(tarea, nil) %>
<script>
$("<%="#"+tarea%>").change(function() { $.get("/answer", function(data){ $("<%= "#"+ tarea%>").val(data)})});
</script>
</div> 
```

我正在使用 rails3.2，并且想使用 UJS（我没有使用 form_for）。我该怎么做呢？我尝试将 :remote=>true 添加到 text_area_tag，但这似乎不起作用

# java - 我应该使用哪种服务？

> ID：14160253
> 
> 赞同：0
> 
> 时间：2013-01-04T15:44:29.987
> 
> 标签：java, android, service

我有 2 个类：A（Activity 子类）无限生成电话位置，B 类（线程子类）从 A 获取位置并将其发送到数据库。由于这是一项活动，一旦我关闭我的应用程序，它就会停止生成位置，所以我猜服务会完成这项工作。

我在这里阅读了有关服务的[信息（http://developer.android.com）](http://developer.android.com/guide/components/services.html)

但我不明白我应该使用**哪种**服务以及如何使用？我打算做的改变是将A变成一个服务并创建启动和停止A的类C（活动）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:52:40.417

您可以为此使用计时器..

```
private void startservice() {

timer.scheduleAtFixedRate( new TimerTask() {

public void run() {

//Do whatever you want to do every “INTERVAL”

}

}, 0, INTERVAL);

; } 
```

在特定时间执行或调用方法。

你可以[在这里](http://www.brighthub.com/mobile/google-android/articles/34861.aspx)阅读更多细节。

# xaml - Xaml MergedDictionaries 找不到彼此的资源

> ID：14160255
> 
> 赞同：2
> 
> 时间：2013-01-04T15:44:35.930
> 
> 标签：xaml, windows-runtime, dictionary

我有两个字典的问题：

```
<ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="Styles1.xaml"/>
    <ResourceDictionary Source="Styles2.xaml"/>
</ResourceDictionary.MergedDictionaries> 
```

当我在第一个字典中设置一个资源时，例如颜色。然后它不会在第二本词典中找到它？？？？

第一的：

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Color x:Key="ApplicationPageBackgroundColor">#FFFFFFFF</Color>
    <SolidColorBrush x:Key="ApplicationPageBackgroundColorBrush" Color="{StaticResource ApplicationPageBackgroundColor}" />
</ResourceDictionary> 
```

第二：（Setter Property="Background" Value .... 产生错误）

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Style x:Key="LayoutRootStyle" TargetType="Panel">
        <Setter Property="Background" Value="{StaticResource ApplicationPageBackgroundColorBrush}" />
    </Style>
</ResourceDictionary> 
```

如果我将它们放在同一个字典中，它会起作用，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T22:02:22.787

`Styles2.xaml`没有参考，`Styles1.xaml`反之亦然。要使 StaticResource 工作，字典条目必须在使用点（“在范围内”）静态可见。同样，您不能引用稍后在同一 XAML 文件中定义的资源。

在 WPF 中，DynamicResource 可能会执行您想要的操作，但这在 WinRT 中不可用。您必须将第一个资源合并到第二个资源中（并且没有任何循环依赖），或者将共享部分放置在两者都可见的地方（例如`Application.Resources`）。

# c# - 重用保持活动的 HTTP Web 请求对象

> ID：14160256
> 
> 赞同：2
> 
> 时间：2013-01-04T15:44:38.747
> 
> 标签：c#, .net, http, httpwebrequest, keep-alive

假设我想发送 10 个请求，每个请求都有不同的 URI（相同的主机，但不同的资源），并且我想以第一个请求创建 keep-alive 持久连接的方式重用连接，该连接被以下 9 个请求重用。使用 WebRequest.Create 似乎将请求专用于特定资源，因此需要有 10 个`HttpWebRequest`对象，每个对象都带有 keep-alive 标头。[.NET 框架如何重用使用HttpWebRequest](http://msdn.microsoft.com/en-us/library/8y7x3zz2.aspx)类和[KeepAlive](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.keepalive.aspx)属性创建的 HTTP 保持连接？它是透明地工作还是需要在代码中手动重用请求对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:58:14.977

我也在寻找解决同样问题的方法。据我所知，这是不可能的，因为`request.RequestURI`它只是只读的。

我的解决方案是使用包含所需命令的 POST 参数调用“通用”前端控制器。然后，该控制器调用所需的命令并将响应代理返回给您。所以你只需要改变一个 POST 参数而不是整个 url。

# wcf - wcf 客户端映射路径

> ID：14160257
> 
> 赞同：1
> 
> 时间：2013-01-04T15:44:43.107
> 
> 标签：wcf, ssrs-2008, relative-path

WCF 服务“ProjB”需要在同一解决方案中的另一个项目“ProjA”中调用函数“ProcRpt(string Date)”。该函数位于处理 SSRS 的“Common”类中。并且在该函数中需要添加子报告路径。在 Wcf 服务端

```
Common cmn = new Common();
cmn.ProcRpt(t); 
```

在通用 ProcRpt() 中：

```
viewerF.ProcessingMode = ProcessingMode.Local;
viewerF.LocalReport.ReportPath = System.Web.Hosting.HostingEnvironment.MapPath("~\\RDLC\\rptSub.rdlc");
viewerF.LocalReport.DataSources.Add(LoadDataSource(shfDeptID, StatementDate, "f")); 
```

问题是运行wcf，子报表路径指向wcf文件夹ProjB的路径不是ProjA的；我应该如何使它回到它的原始路径“ProjA/RDLC/rptSub.rdlc”。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:08:25.417

有大约 1000 种方法可以给猫剥皮。发生这种情况的原因是因为这是您的程序/服务/网站运行的实际路径，因此使用相对路径会导致应用程序当前运行的路径的子文件夹.

您可以尝试的第一件事是更改您的相对路径以适应您正在尝试做的事情。使用几个点 (..) 应该可以让您从您所在的位置上一个文件夹，即：

```
"..\\ProjA\\RDLC\\rptSub.rdlc" 
```

这可能是最“正确”的方法。您*可以*使用绝对路径，但这样做会带来安全隐患，在 Web 应用程序和服务中（因为在 leet haxor 中可能会知道有关您的文件系统的一些信息，如果他/她知道如何移动，那将是不好的在您的服务器的目录中。

最后，您可以（虽然工作量更大，但更简洁）将二进制文件移动到 bin 文件夹中，并拥有这些子报表的相对路径。在最终构建中将所有这些（二进制文件）放在一个地方并不是世界末日，从长远来看可能会缓解一些类似的问题。

# antlr3 - 如何检查属性的值是否以特定字符串开头？

> ID：14160284
> 
> 赞同：1
> 
> 时间：2013-01-04T15:46:21.887
> 
> 标签：antlr3, stringtemplate

例如，属性的`<greeting>`值为“Hello, world!”。

我想要的是检查是否`<greeting>`以“Hello”开头，如果是，则应用模板`<response>`。

我的字符串模板片段：

`<if(/*do not know how to write the condition here*/)><greeting:response()><endif>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:49:44.040

您所追求的表达式违反了 StringTemplate 中严格的模型视图分离的核心原则之一。*设计*上不存在这样的表达式，因此您需要将条件放置在使用模板的 Java 代码中的某个位置。

# javascript - SlickGrid 排序后重新应用/修复过滤器

> ID：14160286
> 
> 赞同：1
> 
> 时间：2013-01-04T15:46:24.520
> 
> 标签：javascript, slickgrid

我正在[此处](http://mleibman.github.com/SlickGrid/examples/example5-collapsing.html)找到的树/展开折叠 SlickGrid 示例上进行构建。

我已经向它添加了排序（在 % Complete 列上），但是一旦用户触发了排序，过滤器就不会更新 - 展开/折叠图标不起作用并且位于错误的位置。

排序后如何重新应用文件管理器？我已经尝试使用下面的代码，但它不起作用：

```
 dataView.setFilter(myFilter);
 grid.render(); 
```

你可以看到我在[这里的小提琴](http://jsfiddle.net/davidoleary/aKeup/)

**更新** 我注意到，当我打开 jsFiddle 页面时，html 部分可能会显示为空白，如果您刷新页面，代码似乎会出现。

**更新** 我设法创造了一个丑陋的工作。[你可以在这里](http://jsfiddle.net/davidoleary/8mJRR/)找到一个更新的例子

基本上我对数据进行排序，然后销毁并重新创建网格。我仍然想知道是否有更优雅的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:10:54.090

您的小提琴链接实际上并没有为我的机器运行，但是通过阅读您的源代码，您要么必须重建 DataView，要么必须强制 DataView 触发 fitler 重新创建所有缩进和折叠/展开元素.

强制刷新的最简单方法是先`grid.invalidate()`调用`grid.render()`. 如果这不起作用，您可以`updateItem()`在排序时调用每个元素。其中任何一个都将强制网格重新计算行索引和这些索引的视觉效果。

请注意，您必须小心排序，因为父关系不会强制行排序 - 也就是项目 (id 2) 的子 (id 5) 可以求助于其父级上方的第 1 行并折叠父母仍然会让它消失。看起来您的排序算法已经处理了这个问题，但对于其他阅读该问题的人来说，这很重要。

# javascript - 使用 javascript 查看完整站点链接的移动重定向

> ID：14160287
> 
> 赞同：1
> 
> 时间：2013-01-04T15:46:24.593
> 
> 标签：javascript, mobile

我无法让这个脚本工作。基本上，需要网站自动转到移动网址，然后在移动网站上时，有一个链接可以返回完整的网站。

```
if ((navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(android)|(webOS)|(Windows Phone)|(BlackBerry)/i))) {
    document.location = "http://domainame.com/mobile";
(function(a,b) {
    if (document.cookie.indexOf('fullsite') > -1) {
        return; // skip redirect
    }
    if (location.search.indexOf('fullsite') > -1) {
        document.cookie = 'fullsite=true; path=/;'
        return; // skip redirect
    } 
})(navigator.userAgent || navigator.vendor || window.opera, 'http://domainname.com/mobile') 
```

链接到这个网址： http: [//flagstaffchamber.com?fullsite =true](http://flagstaffchamber.com?fullsite=true)

# http - Windows Phone 8 无法处理 BackgroundFileTransfer 或 BackgroundAudioPlayer 中的 HTTP 代码 301？

> ID：14160292
> 
> 赞同：1
> 
> 时间：2013-01-04T15:46:41.060
> 
> 标签：http, windows-phone-8

我正在使用 BackgroundFileTransfer 方法在 Windows Phone 中下载大型音频文件。一切在 Windows Phone 7 上运行良好，但在 Windows Phone 8 上似乎我得到 TransferError = "The HTTP network provider returned an error" 对于某些 URL，我看到状态代码为 301（永久移动）。

如果我尝试在 BackgroundAudioPlayer（也适用于 WP7）中打开此 URL，我也会收到 SystemException。

那么 WP8 不知道如何处理 HTTP 代码 301 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T12:46:47.823

我进行了更多调查，并获得了更多信息；此问题与 HTTP 301 无关，但与 HTTPS 连接无关。两个不起作用的 URL 都在 HTTPS 后面。

WP8 甚至不会尝试获取任何东西，因为它在握手后发送“FIN, ACK”。WP8 就放弃了。另一方面，WP7 按应有的方式发送“SYN”并开始下载文件（在收到 HTTP 301 后）。

我已经让 MS 知道了这个问题：[http](http://social.msdn.microsoft.com/Forums/en-US/wpdevelop/thread/f4cc446d-534c-496f-86e2-d21e72001177) ://social.msdn.microsoft.com/Forums/en-US/wpdevelop/thread/f4cc446d-534c-496f-86e2-d21e72001177 。让我们看看有没有什么事情发生。

# python - 将 ElasticSearch 配置为默认使用 ngram。- SQL LIKE %% 行为

> ID：14160295
> 
> 赞同：0
> 
> 时间：2013-01-04T15:46:49.017
> 
> 标签：python, elasticsearch, django-haystack

是否可以将弹性搜索索引行为配置为 SQL 的 LIKE 关键字。

如果索引包含“此文档名为 MySuperInvoice”，我希望在查找 super、doc 或 voice 时能够找到它”

感谢您的帮助。

**编辑：**

有人告诉我，我需要在搜索词周围加上 *：`*query*`

让我们看看如何使用 haystack 来完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:31:19.217

好吧，我终于到了。谢谢@zebuline。

```
cluster:
        name: webapp
network:
        bind_host: 0.0.0.0
        publish_host: _eth0_
index:
        analysis:
                analyzer:
                        default_index:
                                type:           custom
                                tokenizer:      standard
                                filter:         [standard, lowercase, asciifolding, webapp_ngram]
                        default_search:
                                type:           custom
                                tokenizer:      standard
                                filter:         [standard, lowercase, asciifolding]
                filter:
                        webapp_ngram:
                                type:           nGram
                                min_gram:       1
                                max_gram:       30 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-06T17:36:20.397

看看 ES 中的默认映射。它应该可以帮助你。

[http://www.elasticsearch.org/guide/reference/mapping/dynamic-mapping.html](http://www.elasticsearch.org/guide/reference/mapping/dynamic-mapping.html)

# rest - 开发演示 RESTful Web 服务的最简单方法

> ID：14160300
> 
> 赞同：0
> 
> 时间：2013-01-04T15:47:02.693
> 
> 标签：rest, restful-architecture

我正在为初学者准备一个关于单一网页开发（你知道，javascript，jquery，骨干网）的研讨会，我虽然开发一个基本的 restful web 服务会很好，但我想要一些快速和基本的东西开始

理想情况下，我正在寻找这样的东西：

*   定义一些 sql 语句来创建一些具有关系的表并填充它们
*   定义端点和到 sql 实体的映射
*   就行了

其他所需的功能

*   多平台
*   可扩展（添加错误和自定义验证）
*   简单的编程（可能是 python、ruby、groovy）
*   开箱即用的身份验证（oauth 会很棒）
*   cors 支持（将其上传到某处然后使用它）

换句话说，我正在寻找一种快速而好的方法来构建一个基本的宁静 Web 服务。如果这可以成为生产 Web 服务的基础，那就太棒了

你会建议我研究什么框架或工具包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:52:24.407

过去我使用过免费版的 SoapUI 看看这个链接是否对你有好处[http://www.soapui.org/Service-Mocking/mocking-rest-services.html](http://www.soapui.org/Service-Mocking/mocking-rest-services.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T08:18:00.467

这是一个看起来很像我正在寻找的python项目

[https://github.com/nicolaiarocci/eve](https://github.com/nicolaiarocci/eve)

我会试试看效果如何

这是一个演示文稿：[https ://speakerdeck.com/nicola/developing-restful-web-apis-with-python-flask-and-mongodb](https://speakerdeck.com/nicola/developing-restful-web-apis-with-python-flask-and-mongodb)

# java - 如何使用 thymeleaf 格式化 HTML5 中的货币

> ID：14160304
> 
> 赞同：42
> 
> 时间：2013-01-04T15:47:31.347
> 
> 标签：java, html, thymeleaf, currency-formatting

我坚持在 HTML 5 中格式化货币。我有一个应用程序，我必须在其中格式化货币。我有以下代码片段

```
 <td class="right"><span th:inline="text">$ [[${abc.value}]]</span></td> 
```

我从 DAO abc 读取货币值的位置，它应该被格式化。当前打印 $ 1200000.0 它应该打印 $ 1,200,000.0 .0

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-01-04T22:15:29.410

您可以使用`#numbers`实用程序对象，您可以在此处查看哪些方法：[http ://www.thymeleaf.org/apidocs/thymeleaf/2.0.15/org/thymeleaf/expression/Numbers.html](http://www.thymeleaf.org/apidocs/thymeleaf/2.0.15/org/thymeleaf/expression/Numbers.html)

例如：

```
<span th:inline="text">$ [[${#numbers.formatDecimal(abc.value, 0, 'COMMA', 2, 'POINT')}]]</span> 
```

不过，您也可以在不进行内联的情况下执行此操作（这是 thymeleaf 推荐的方式）：

```
<td>$ <span th:text="${#numbers.formatDecimal(abc.value, 0, 'COMMA', 2, 'POINT')}">10.00</span></td> 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-05-13T19:09:26.687

如果您的应用程序必须处理不同的语言，我建议使用**DEFAULT**值（= 基于区域设置）：

```
${#numbers.formatDecimal(abc.value, 1, 'DEFAULT', 2, 'DEFAULT')} 
```

来自[Thymeleaf 文档](http://www.thymeleaf.org/doc/tutorials/2.1/usingthymeleaf.html#numbers)（更准确地说是[NumberPointType](http://www.thymeleaf.org/apidocs/thymeleaf/2.1.4.RELEASE/org/thymeleaf/util/NumberPointType.html)）：

```
/* 
 * Set minimum integer digits and thousands separator: 
 * 'POINT', 'COMMA', 'NONE' or 'DEFAULT' (by locale).
 * Also works with arrays, lists or sets
 */
${#numbers.formatInteger(num,3,'POINT')}
${#numbers.arrayFormatInteger(numArray,3,'POINT')}
${#numbers.listFormatInteger(numList,3,'POINT')}
${#numbers.setFormatInteger(numSet,3,'POINT')}

/*
 * Set minimum integer digits and (exact) decimal digits, and also decimal separator.
 * Also works with arrays, lists or sets
 */
${#numbers.formatDecimal(num,3,2,'COMMA')}
${#numbers.arrayFormatDecimal(numArray,3,2,'COMMA')}
${#numbers.listFormatDecimal(numList,3,2,'COMMA')}
${#numbers.setFormatDecimal(numSet,3,2,'COMMA')} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-02-05T07:20:40.857

您现在可以更简单地调用实用程序`formatCurrency`中的方法：`numbers`

`#numbers.formatCurrency(abc.value)`

这也将消除对货币符号的需求。

例子： `<span th:remove="tag" th:text="${#numbers.formatCurrency(abc.value)}">$100</span>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-12T20:54:05.073

您将使用 Thymeleaf 的 numbers 实用程序对象进行内联，如下所示：

```
<span>[[${#numbers.formatCurrency(abc.value)}]]</span> 
```

在视图中，它甚至会为您添加美元符号 ($)。

# javascript - 使用变量遍历数组并显示匹配 JQuery

> ID：14160306
> 
> 赞同：1
> 
> 时间：2013-01-04T15:47:31.780
> 
> 标签：javascript, jquery, arrays, function, variables

我在这里阅读了多篇关于数组、.each 和其他解决方案的文章，但没有一篇文章向我展示了我正在尝试做的事情。

我想让它到达单击按钮的位置，存储该按钮的值，然后与数组中对象的值进行比较。如果找到匹配项，我希望将该匹配项 .append 附加到页面的一部分中。

我知道按钮点击正在注册。我已将其附加到页面中并显示了正确的值。我知道我可以使用 .each 和 .append 迭代数组中的所有对象，因为我也这样做了。但是，如果我只是从下面的示例中 .append employee 我得到 [object Object] ，因此我知道我的比较运算符无法正常工作。非常感谢向我展示我的问题或解释它为什么不起作用的任何帮助。

这是按钮：

```
<button type="button" id="german" class="searchButton" value="German">German</button> 
```

这就是我的数组的一行

```
employees = [
{ "firstName":"Alex",    "lastName":"Hagerman",  "language":"German",    "department":"Nuerology",   "position":"Nurse",         "skill":"Infection" },
] 
```

还有更多行，但这适用于示例。

这是我想将按钮值与数组值进行比较的函数。（如果我只是在这里添加员工，我会得到 [object Object]）

```
$(document).ready(function(){
    $('button').click(function(){
        var buttonValue = $(this).val();
        $.each(employees, function (i, employee) {
                if (employee == buttonValue) {
                    $('#resultsView').append('<div class="searchResults">'+employee.firstName+employee.lastName+'<br />'+employee.language+'<br />'+employee.department+employee.position+'<br />'+employee.skill+'</div>');
            }
                else {
                    $('#resultsView').append('<div id="resultsView" class="noResult">No results found</div>');
                }

        });
    });
}); 
```

目前我只得到没有找到结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:01:21.320

您遇到了一些问题 - 第一个是您试图将原始对象与按钮值进行比较：`(employee == buttonValue)`. 相反，您需要与您正在寻找的任何内容进行比较，即语言`employee.language == buttonValue`

第二个是如果数组中的任何对象不匹配，它将追加`no results`. 这可以通过设置一个标志来指示是否找到结果来解决 - 在`.each`循环之外制作标志并设置为 false - 如果找到结果，则将标志设置为 true。循环后`.each`检查是否设置了结果 - 如果没有，则不显示任何结果。

这是一个[有效的解决方案](http://jsfiddle.net/NazbN/)。

```
$('button').click(function(){
    var but = this;
    var results = false;
    $.each(employees, function(index, employee){
        if(employee.language == but.value)
        {
            results = true;
            $('#resultsView').append('<div class="searchResults">' + employee.firstName + employee.lastName + '<br />' + employee.language + '<br />' + employee.department + employee.position + '<br />' + employee.skill + '</div>');
        }
    });
    if(!results)
    {
        $('#resultsView').append('<div id="resultsView" class="noResult">No results found</div>');
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:56:54.930

如果要将按钮值与员工语言值进行比较，则需要更改`if statement`如下：

**改变：**

```
if (employee == buttonValue) { 
```

**到：**

```
if (employee.language == buttonValue) { 
```

工作示例：http: [//jsfiddle.net/fewds/7MYED/](http://jsfiddle.net/fewds/7MYED/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T15:57:58.810

首先，您检查的是整个员工对象，而不是员工对象中的给定值。

其次，如果员工与按钮值不匹配，您的“未找到”逻辑将打印出来，因此我将其移至整个搜索的末尾。

```
 $(function(){
        $('button').click(function(){
            var buttonValue = $(this).val(), totalFinds = 0;
            $.each(employees, function (i, employee) {
              var isFound=false;
              $.each(employee, function(key,value){
               //remove the 'key' check if it does not make sense for your needs
                if(key == buttonValue || value == buttonValue){
                  isFound = true;
                }
              }); //end employee loop
              if(isFound){
                $('#resultsView').append('<div class="searchResults">'+employee.firstName+employee.lastName+'<br />'+employee.language+'<br />'+employee.department+employee.position+'<br />'+employee.skill+'</div>');
                totalFinds += 1;
              }  
            });// end employees loop
            if(totalFinds ===0){
              $('#resultsView').append('<div id="resultsView" class="noResult">No results found</div>');
            }
        }); //end .click()

    });//end .ready() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T16:01:48.070

Employee 是一个键值对（即）一个对象......而您正在尝试将一个对象与一个变量值进行比较......所以它不起作用......

尝试获取您需要比较的值...只需尝试使用“。”从对象中获取值。操作员...说员工.名字...

然后进行比较......它会工作......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T16:05:19.027

您可以改用[$.grep()](http://api.jquery.com/jQuery.grep/)来获取所有匹配的结果。如果有元素，则循环并追加元素。如果没有结果，则追加

```
$(document).ready(function() {
    $('button').click(function() {
        var buttonValue = $(this).val();
        var results = $.grep(employees, function(data) {
            return data.language == buttonValue; // return objects that have language = to button value
        })
        if (results.length > 0) { // if 1 or more results loop through and print
            $.each(results, function(i, employee) {
                $('#resultsView').append('<div class="searchResults">' + employee.firstName + employee.lastName + '<br />' + employee.language + '<br />' + employee.department + employee.position + '<br />' + employee.skill + '</div>');
            })
        } else { // else append no results found
            $('#resultsView').append('<div id="resultsView" class="noResult">No results found</div>');
        }
    });
});​ 
```

因为由于您正在遍历数组，所以即使您可能在数组中找到至少一个匹配的对象，当它不匹配时您也会附加 No Results

[JSFIDDLE](http://jsfiddle.net/wirey00/Su4CA/ "例子")

# android - 无法在 Android 应用中保存图像

> ID：14160307
> 
> 赞同：0
> 
> 时间：2013-01-04T15:47:35.550
> 
> 标签：android, api, camera

我正在开发一个使用其他相机应用程序拍照的应用程序。我可以成功启动另一个相机应用程序，但我没有看到图片已保存到我想要的文件夹中。这是我的代码：

```
 Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        File imagesFolder = new File(Environment.getExternalStorageDirectory(), "MyImages");
        imagesFolder.mkdirs();
        File image = new File(imagesFolder, "image_001.jpg");
        Uri uriSavedImage = Uri.fromFile(image);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, uriSavedImage); 
        startActivityForResult(intent, 0); 
```

我预计会创建 MyImages 文件夹，但我在我的设备上找不到它。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:50:24.177

检查清单文件中的此权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# javascript - xhr.upload.onprogress 不起作用

> ID：14160308
> 
> 赞同：12
> 
> 时间：2013-01-04T15:47:38.210
> 
> 标签：javascript, xmlhttprequest-level2

以下代码中的所有内容都将起作用，除了它永远不会触发 xhr.upload.onprogress 事件。

```
$(function(){

    var xhr;

    $("#submit").click(function(){
        var formData = new FormData();
        formData.append("myFile", document.getElementById("myFileField").files[0]);
        xhr = new XMLHttpRequest();
        xhr.open("POST", "./test.php", true);
        xhr.send(formData);

        xhr.onreadystatechange = function(){
            if(xhr.readyState === 4 && xhr.status === 200){
                console.log(xhr.responseText);              
            }
        }

        xhr.upload.onprogress = function(e) {
           // it will never come inside here
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-04T17:13:27.943

您应该在打开连接之前创建侦听器，如下所示：

```
$(function(){

    var xhr;

    $("#submit").click(function(){
        var formData = new FormData();
        formData.append("myFile", document.getElementById("myFileField").files[0]);
        xhr = new XMLHttpRequest();

        xhr.onreadystatechange = function(){
            if(xhr.readyState === 4 && xhr.status === 200){
                console.log(xhr.responseText);              
            }
        }

        xhr.upload.onprogress = function(e) {
           // it will never come inside here
        }

        xhr.open("POST", "./test.php", true);
        xhr.send(formData);
    });
}); 
```

希望有帮助。

# python - 使用python、scipy进行目标检测

> ID：14160318
> 
> 赞同：0
> 
> 时间：2013-01-04T15:48:15.057
> 
> 标签：python, image-processing, scipy

我创建了一个程序，将 96x512 numpy 数组显示为图像。在这些图像中，有目标（数据是水池中球体的图像......这最终将用于鱼跟踪）。我已经达到了用户通过鼠标单击输入将给出目标坐标的地步。

我什至不确定该怎么做是使用 scipy （我猜测通过过滤等......我还是 python 的新手）来自主区分目标（例如，任何低于 X 值的目标）。然后，如果该目标移动……例如，小于 5 个像素，则用于目标跟踪。

有谁知道是否有任何好的模块或指南可以做到这一点？

最终目标是能够判断有多少目标，跟踪它们的运动，并获得大小......但那是在路上。

编辑：为了澄清（抱歉），我一直在使用 pyqtgraph 和 PyQt 来显示图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:52:23.113

你还没有说你是如何产生你的图像的。如果你使用[matplotlib](http://matplotlib.org/)，那么你可以很容易地在它之上创建一个漂亮的 GUI，请参阅这个问题：[如何为 matplotlib 创建一个前端？](https://stackoverflow.com/questions/5285912/how-can-i-create-a-frontend-for-matplotlib)

事实上，matplotlib 带有一个 GUI 中性（与 matplotlib 支持的任何工具包一起工作：wxpython、tkinter、qt、fltk、macosx）处理点击等事件的方式，请参阅此页面：[事件处理和拾取](http://matplotlib.org/users/event_handling.html)

关于对象检测和跟踪，请查看[OpenCV](http://opencv.willowgarage.com/wiki/)和这个问题：[如何在 Python 中使用 OpenCV 跟踪运动？](https://stackoverflow.com/questions/3374828/how-do-i-track-motion-using-opencv-in-python)

# ravendb - RavenDb 查询简单地图变换索引

> ID：14160319
> 
> 赞同：1
> 
> 时间：2013-01-04T15:48:18.153
> 
> 标签：ravendb

我已经为此苦苦挣扎了一段时间。

我有一个`clients/513`看起来像这样的客户端对象 ( )：

```
{  
  "Risks": [
    {
      "Id": "421eacf0-14e9-4004-ab0b-95d20e976aac",
      "RiskFactor": "ElectricalEquipment",
      "Description": "Should be allowed to play with electronics."
    },
    {
      "Id": "4bbecbe2-acfc-45c3-b87a-3321e1eca95a",
      "RiskFactor": "ViolenceToStaffVerbal",
      "Description": "Tourettes"
    }
} 
```

我创建了一个包含以下代码的索引：

地图

```
from c in docs.Clients
from r in c.Risks
select new { ClientId = c.Id, RiskId = r.Id } 
```

转换

```
from c in results
from r in c.Risks
select new { ClientId = c.Id, RiskId = r.Id } 
```

我**认为**我了解 MAP 只是定义了您希望能够搜索的属性。并且 TRANSFORM 以某种形状返回实际数据。

我想返回 ClientId、RiskId 以及可能与风险相关的其他一些属性，以便我可以这样做`.As<ViewModel>()`，但是当我执行查询时，我似乎得到了一些不一致的结果。（它喜欢改变它返回的结果数量，这取决于我执行查询的次数，有时是 4 次，有时是 5 次）。

另外：按 RiskId 过滤似乎会返回一个，有时会返回多个风险，其 id 不是指定的 Id。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T21:25:41.913

你不需要转换。这是一个对您尝试做的事情更有用的索引：

```
public class ClientRiskIndex : AbstractIndexCreationTask<Client, ClientRiskResult>
{
    public ClientRiskIndex()
    {
        Map = clients => from c in clients
                         from r in c.Risks
                         select new {
                                        ClientId = c.Id,
                                        RiskId = r.Id,
                                        r.RiskFactor,
                                        r.Description
                                    };

        StoreAllFields(FieldStorage.Yes);
    }
} 
```

这假定类结构如下：

```
public class Client
{
    public string Id { get; set; }
    public IList<Risk> Risks { get; set; }
}

public class Risk
{
    public Guid Id { get; set; }
    public string RiskFactor { get; set; }
    public string Description { get; set; }
}

public class ClientRiskResult
{
    public string ClientId { get; set; }
    public Guid RiskId { get; set; }
    public string RiskFactor { get; set; }
    public string Description { get; set; }
} 
```

现在，当您查询时，您可以执行以下操作：

```
session.Query<ClientRiskResult, ClientRiskIndex>()
       .Where(x => x.RiskFactor == "ElectricalEquipment")
       .AsProjection<ClientRiskResult>(); 
```

如果您想对风险描述进行全文搜索，只需将此行添加到索引定义中：

```
Index(x => x.Description, FieldIndexing.Analyzed); 
```

然后你可以像这样搜索：

```
session.Query<ClientRiskResult, ClientRiskIndex>()
       .Search(x => x.Description, "electronics")
       .AsProjection<ClientRiskResult>(); 
```

请注意，通过将数据存储在索引中并从中进行投影，您将获得“最终一致”的结果。这可能是您描述的结果的来源。您需要留出时间让索引变得陈旧，或者您需要专门定制要等待的查询。

在现实世界中，您将有足够的时间来追赶索引。在您的测试中，通过`.Customize(x=> x.WaitForNonStaleResults())`在查询中等待来模拟这一点。

# c++ - 包含在标头或 cpp 中 - Qt 中的首选

> ID：14160320
> 
> 赞同：4
> 
> 时间：2013-01-04T15:48:21.797
> 
> 标签：c++, qt, header, include

当我编写一个 C++ 类时，我只在标头中包含特定情况。我更喜欢前向声明，我相信这是 C++ 中的最佳实践。但是 Qt 类通常有这么多标准 Qt 类的字段，因此将它们全部写在前向声明中似乎不是一个好主意。有一些首选的方法吗？Qt 有大量文档，所以我认为它可以回答我的问题，但我才刚刚开始阅读它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T16:29:54.027

我的规则是头文件只包含那些定义相关头文件使用的功能的文件。

假设您在标头中有指向某个类的指针和引用，`Foo`但标头从不插入或实例化这些对象。在这种情况下，您不需要类的定义。您所需要的只是一个前向声明。

另一方面，如果您插入一个类型的对象`Foo`，或者如果您有一个类型的数据成员或变量，则前向声明是不够的`Foo`。现在您确实需要完整的定义，所以现在是`#include`定义 class 的头文件的时候了`Foo`。（或者，如果使用在内联函数定义中，您可能需要重新考虑内联并将实现放在单独的源文件中。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T16:09:23.207

头文件只是说“我们能做什么”。该`cpp`文件说“我们可以这样做，这就是我们的意图”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T16:04:43.230

为此，Qt 只是一个 C++ 库。您当然可以继续编写前向声明。如果您的类变得臃肿，这可能表明您将 UI（表示）和数据/逻辑代码混合在一个类中。更清晰的职责分离可能使您能够用大量更简单的类替换一些复杂的类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T16:30:45.690

这是给 JvO - 你说

*这始终是一种权衡；前向声明迫使您： a) 仅在其他头文件中使用指向您的前向类的指针；b) 在每个使用该类的 .cc/.cpp 文件中包含头文件。*

这些是有效的：

```
class Ditto;

Ditto letsHaveANewOne();
void useIt(Ditto X); 
```

那么指针在哪里呢？

前向声明避免了依赖关系。这很好，因为它使编译器能够将一些麻烦交给链接器。还要考虑许多具有该头文件的代码，并且必须为类声明打开文件、解析它们等。从长远来看，您可以节省时间。

*前向声明仅在以下情况下才有用 IMO c) 您的代码处于不断变化的状态，并且您希望避免大量重新编译；d) 你的类声明很大。*

见上文 - 它也称为解耦。试试看 - 从长远来看会节省时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T16:11:04.117

这始终是一种权衡；前向声明迫使您：
a) 仅在其他头文件中使用指向您的前向类的指针；
b) 在每个使用该类的 .cc/.cpp 文件中包含头文件。

有时两者都有些麻烦。特别是a）您不能使用或返回对转发声明的类的引用，并且点b）在您的c ++文件中键入并生成长长的#includes列表很烦人。

前向声明仅在以下情况下才有用 IMO
c) 您的代码处于不断变化的状态，并且您希望避免大量重新编译；
d) 你的类声明是*巨大的*。

c) 点不适用于 Qt（假设您不是每天都更新库）。d) 确实适用，但如果您的编译器支持，可以通过使用预编译的头文件来缓解这种情况。

Qt（至少 4.7）没有捆绑前向声明，除了 QtContainerFwd 中的容器（list、set、map 等）。如果您发现自己一遍又一遍地键入相同的前向声明列表，您可能需要考虑使用这些声明创建自己的头文件。

# ios - 移动增强现实

> ID：14160322
> 
> 赞同：0
> 
> 时间：2013-01-04T15:48:35.137
> 
> 标签：ios, mobile, unity3d, augmented-reality, air-native-extension

我需要创建一个理想的移动应用程序

*   适用于安卓和ios
*   支持多标记检测（检测3个标记）
*   支持同一图像的多标记检测
*   使用自然照片样式标记（不是旧的黑色块样式标记，例如 Flarmanager）
*   理想情况下使用 ANE 和 Air（从未原生开发或使用过 Unity3D）

我注意到下面的帖子，但在 2 年前，可能已经过时了。 [手机上的增强现实](https://stackoverflow.com/questions/4175113/augmented-reality-on-mobile-phones)

我一直在研究 [http://www.in2ar.com/](http://www.in2ar.com/)这似乎几乎可以满足我的需求，但是与他们的一位开发人员交谈后发现他们不支持对同一图像进行多标记检测。不过，他们的支持速度给我们留下了深刻的印象。

现在已经开始研究 Qualcomm 的解决方案 Vuforia [https://developer.vuforia.com/](https://developer.vuforia.com/)，并打算尝试使用这个来制作原型（还读过使用这个库更好地检测？），已经询问了他们的论坛是否支持同一图像的多标记支持，虽然在撰写本文时没有回应。 [https://developer.vuforia.com/forum/vuforia-sdk/does-vulforia-support-multimarker-tracking-copies-same-marker](https://developer.vuforia.com/forum/vuforia-sdk/does-vulforia-support-multimarker-tracking-copies-same-marker)。还想知道如果使用这个解决方案，我可以期待什么样的学习曲线来学习 Unity。

如果有人有任何建议或指示？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:17:08.957

我已经成功地使用带有 Unity 3D 的 Vuforia AR SDK 构建了一个平板电脑应用程序，该应用程序在去年在巴塞罗那举行的世界移动通信大会上展示。该平板电脑运行的是 Android，但您可能知道，将 Unity3D 中的应用程序/游戏移植到新平台是轻而易举的事。框架很好地支持逼真的标记，前提是您用作标记的图片具有高度精细的细节（例如，避免使用单一纯色的大面积图片）。在任何情况下，Qualcomm 的标记生成器在线工具都会根据图像在实时跟踪中的表现来分析和评估您的图像。

关于多标记功能，我自己没有测试过，但 Unity3D 插件包含一个 QCarBehavior 类，该类导出以下属性：“最大同时图像目标”（“图像目标”是代表您的 AR 标记的 Unity3D 实体）。我不知道是否有额外的许可限制或任何其他限制，但 Vuforia SDK 似乎足以满足您的目的。

# node.js - 如何获得对http请求文件上传中止的响应？

> ID：14160323
> 
> 赞同：2
> 
> 时间：2013-01-04T15:48:35.430
> 
> 标签：node.js, http, express, formidable

我将使用带有**express的****nodejs**上传文件。

 **我看到 bodyParser 完成了工作......

```
app.use(express.bodyParser({"limit": '2mb'})); 
```

但是如果我想限制请求的大小，我发现它不会以某种方式取消上传。客户端不断发送数据。

所以我写了这个中间件：

```
app.use(function (err, req, res, next) {

   if(err.status == 413){
       req.destroy();
       return res.json({
            "status": 413,
            "message": err
       },413);
   }else
       next(err);
}); 
```

它可以工作，取消上传，但客户端没有得到（或忽略）响应！

我认为这可能是 http 协议的一种行为，因此不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T13:05:26.433

我认为您的代码应该可以工作，但不要破坏请求！只需`req.destroy();`从您的代码中删除行。为了不使用中间件，您也可以尝试这样的事情（它在我这边工作）：

```
express = require 'express'
app = express()
swig = require 'swig'
cons = require 'consolidate'
swig.init {
  root: __dirname + '/views'
  allowErrors: true
}
app.set 'views', __dirname + '/views'
app.set 'view options', {layout: false}
app.engine '.html', cons.swig
app.set 'view engine', 'html'

# set upload dir
app.use express.bodyParser {uploadDir: './upload'}

app.get '/', (req, res) ->
  res.render 'index.html', {}

app.post '/file-upload', (req, res) ->
  # you can get some info about files here (size, path, name, type)
  console.log req.files
  # check that size is good
  if req.files.thumbnail.size > 200
    res.send 413
  else
    res.send 'Uploaded!'

console.log 'listen port 3000'
app.listen 3000 
```

并以形式：

```
<form method="post" enctype="multipart/form-data" action="/file-upload">
<input type="file" name="thumbnail">
<input type="submit">
</form> 
```

[在这里](http://expressjs.com/api.html#req.files)查看详细信息。希望这会帮助你。**

# android - BroadcastReceiver 不起作用，上下文错误（接听电话）？

> ID：14160335
> 
> 赞同：0
> 
> 时间：2013-01-04T15:49:25.957
> 
> 标签：android, broadcastreceiver, sip

以下是 SipDemo（voip 接听电话）的一部分：

```
public class WalkieTalkieActivity extends Activity {
...
public IncomingCallReceiver callReceiver;
public SipManager manager = null;

@Override
public void onCreate(Bundle savedInstanceState) {

...

     IntentFilter filter = new IntentFilter();
    filter.addAction("android.SipDemo.INCOMING_CALL");
    callReceiver = new IncomingCallReceiver();
    this.registerReceiver(callReceiver, filter);

    initializeManager();
}

public void initializeManager() {
    initializeLocalProfile();
}

public void initializeLocalProfile() {

        SipProfile.Builder builder = new SipProfile.Builder(username, domain);
        builder.setPassword(password);
        me = builder.build();

        Intent i = new Intent();
        i.setAction("android.SipDemo.INCOMING_CALL");
        PendingIntent pi = PendingIntent.getBroadcast(this, 0, i, Intent.FILL_IN_DATA);
        manager.open(me, pi, null); 
```

和广播接收器

```
public class IncomingCallReceiver extends BroadcastReceiver {
@Override
public void onReceive(Context context, Intent intent) {
SipAudioCall incomingCall = null;
    try {

        SipAudioCall.Listener listener = new SipAudioCall.Listener() {
        };

        WalkieTalkieActivity wtActivity = (WalkieTalkieActivity) context;
        incomingCall = wtActivity.manager.takeAudioCall(intent, listener);

        incomingCall.answerCall(30);
    ...

        wtActivity.call = incomingCall; 
```

它工作得很好，但即使应用程序在后台运行，我也需要能够接听电话。所以我尝试以其他方式实现广播接收器（不是在活动中，而是在清单中）。于是删了：

```
 IntentFilter filter = new IntentFilter();
    filter.addAction("android.SipDemo.INCOMING_CALL");
    callReceiver = new IncomingCallReceiver();
    this.registerReceiver(callReceiver, filter); 
```

并在清单中添加

```
 <intent-filter>
             <action android:name="android.SipDemo.INCOMING_CALL"/>
        </intent-filter> 
```

但现在它不起作用，incomingCall 始终为空。

在更改之前，BroadcastReceiver 得到了

```
context ==  com.example.android.sip.WalkieTalkieActivity@4051c5e8 
```

和改变后

```
context == android.app.ReceiverRestrictedContext@4058ac48 
```

也许这是问题，但有人知道如何解决它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:58:48.823

您应该将这些`SipProfile`东西从您的活动中移出并放入服务中。然后您的 BroadcastReceiver`onReceive()`可以启动服务并让它处理呼叫。`context`你进入的是`onReceive()`短暂的，你只能用它做某些事情。

# html - 表格单元格首尾间距

> ID：14160336
> 
> 赞同：1
> 
> 时间：2013-01-04T15:49:31.240
> 
> 标签：html, css, layout, menu

我有一个使用无序列表创建的水平菜单。菜单包含在固定宽度的 div 中：

```
<div class="mainContainer">
  <div>
    <ul class="menu">
      <li class="menuItem">One</li>
      <li class="menuItem">Two</li>
      <li class="menuItem">Three</li>
      <li class="menuItem">Four</li>
      <li class="menuItem">Five</li>
      <li class="menuItem">Six</li>
      <li class="menuItem">Seven</li>
    </ul>
  </div>
</div>​ 
```

为了在宽度上均匀分布菜单项，我在 UL 上使用了“display: table”，在列表项上使用了“display: table-cell”。我试图通过使用“border-spacing:3px 0px;”在每个单元格之间创建一个空间。

```
.mainContainer {
    width: 960px;
    margin: 0 auto;
    background-color:#999;
    height:100px;
}
.menu {
    list-style-type: none;
    border-spacing:3px 0px;
    padding: 0px;
    display: table;
    margin: 5px 0px 0px;
    text-align:center;
    height: 26px;
    width: 960px;

}
.menuItem {
    background-color: #eee;
    display: table-cell;
    position: relative;
    margin:0px 5px 0px 0px;
    padding:6px 0px;
    width: auto;
    cursor: default;
    color: #002F68;
}​ 
```

但是我不想要第一个菜单项左侧的空格和最后一个菜单项右侧的空格。如何删除这些空格？需要 IE8+ 兼容性。

[jsFiddle 中的完整示例](http://jsfiddle.net/bESSf/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T16:07:25.343

[这是一个小提琴。](http://jsfiddle.net/jcurran/bESSf/3/)

不要在整个菜单上使用边框间距，而是在列表项上使用边框属性：

```
.menu {
    list-style-type: none;
    /*border-spacing:3px 0px;*/  <-----remove this
    padding: 0px;
    display: table;
    margin: 5px 0px 0px;
    text-align:center;
    height: 26px;
    width: 960px;

}

.menuTab {
    background-color: #D2DCE0;
    display: table-cell;
    position: relative;
    margin:0px 5px 0px 0px;
    padding:6px 0px;
    width: auto;
    cursor: default;
    color: #002F68;
    border-left: 3px solid #999;  <-----Add this
} 
```

然后，为了更正最左边的边框，添加这个伪选择器（兼容 ie8）：

```
.menuTab:first-child{
     border-left: none;   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:06:53.307

最常见的解决方案是为列表的第一个和最后一个元素创建两个 css`first`类`last`。在你的情况下：

```
<div class="mainContainer">
  <div>
    <ul class="menu">
      <li class="menuItem first">One</li>
      <li class="menuItem">Two</li>
      <li class="menuItem">Three</li>
      <li class="menuItem">Four</li>
      <li class="menuItem">Five</li>
      <li class="menuItem">Six</li>
      <li class="menuItem last">Seven</li>
    </ul>
  </div>
</div> 
```

然后使用这个类：

```
.menu .first{
margin-left:0;
}
.menu .last{
margin-right: 0;
} 
```

# html - Ruby on Rails 验证文本字段

> ID：14160338
> 
> 赞同：1
> 
> 时间：2013-01-04T15:49:41.570
> 
> 标签：html, ruby-on-rails, ruby, validation, model-view-controller

Ruby on Rails 的新手，在验证方面遇到了一些问题。基本上，我有一个需要验证的文本字段，然后才能持续到下一页。我以前使用过验证，但是我写这个页面时没有考虑验证（出于某种不敬虔的原因）。

这是模型页面：

```
class Certificate

include ActiveModel::Validations
include ActiveModel::Conversion
extend ActiveModel::Naming

attr_accessor :lot, :part_number, :quality_selected, :include_l  

validates :lot, :part_number, :quality_selected, :presence => true

def initialize(attributes = {})
  attributes.each do |name, value|
    send("#{name}=", value)
  end
end

def persisted?

  false
end
end 
```

风景：

```
<%= form_for @certificate, :url => '/lot/certificate_print' do |f| %>

      <% if @certificate.errors.any? %>

        <div id="error_explanation">

          <h2><%= pluralize(@certificate.errors.count, "error") %> prohibited this quality from being saved:</h2>

          <ul>

          <% @certificate.errors.full_messages.each do |msg| %>

            <li><%= msg %></li>

          <% end %>

          </ul>

        </div>

      <% end %>

    <div class="modal">

      <div class="dialog" style="height:380px;">

        <div class="wrapper">

          <h4>Prepare Certificate of Analysis</h4>

          <p style="height:60px;overflow:hidden">Please enter 5 digit part number and select L* value if required by customer.</p>

          <div class="form-container" style="background:#ffffff;">

            <div class="wrapper">

              <div class="group-field"> 

                <div class="field" style="margin:0 10px 0 0;min-width:120px;">

                  <%= f.label :part_number, 'Part Number' %><br />

                  <%= f.text_field :part_number, {:style => 'text-align:center;width:200px;'} %>

                </div>

                <div class="field" style="margin:34px 10px 0 17px;min-width:120px;">

                  <%= check_box_tag 'certificate[include_l]' %>

                  <%= f.label :include_l, 'Include L*?' %>

                </div>

              </div>

            </div>

            <%= hidden_field_tag :certificate_quality_selected, params[:quality_to_include], { :name => 'certificate[quality_selected]' } %>

          </div>

          <div class="actions">

            <a href="#" class="back-link">Back</a>&nbsp;&nbsp;&nbsp;<%= button_tag 'Generate', :type => 'button', :id => 'print-button' %>

          </div>

        </div>

      </div>

    </div>

    <% end %> 
```

我知道这不习惯，我只是不完全确定我应该从这里采取的方法。如果有人能对此有所了解，将不胜感激。

编辑：这是控制器，

```
class LotController < ApplicationController

      before_filter :authenticate_user!
      before_filter :check_permission

      def certificate

        @lots = Quality.lots.all.map { |l| [l.lot, l.lot] }
        @certificate = Certificate.new

        respond_to do |format|
          format.html
          format.js
        end
      end

      def certificate_review
        @qualities = Quality.find(params[:quality_to_include].split(','))        

        respond_to do |format|
          format.html { render action: "certificate_review", :layout => false }
        end
      end        

      def certificate_print
        @qualities = Quality.find(params[:certificate][:quality_selected].split(','))
        @quality_lots = Quality.group('lot').find_all_by_id(params[:certificate][:quality_selected].split(','))
        @quality_lots_list = @quality_lots.map(&:lot)
        @certificate = Certificate.new(params[:certificate])
        @average_moisture = Quality.where('id IN (?)',@qualities).average(:last_moisture_value)
        @average_viscosity = Quality.where('id IN (?)',@qualities).average(:last_viscosity_value)
        @average_color_l = Quality.where('id IN (?)',@qualities).average(:last_color_l_value)

        Quality.update_all('coa_printed = "true"', 'id IN (' + params[:certificate][:quality_selected] + ')')

        respond_to do |format|
          format.html { render action: "certificate_print", :layout => 'blank' }
        end
      end

      def certificate_generate
        @certificate = Certificate.new

        respond_to do |format|
          format.html { render action: "certificate_generate", :layout => false }
        end
      end

      private

        def check_permission #checks permissions for the reporting section
          if current_user.labSupervisor?
            #allow past
          elsif !current_user.administrator?
            flash[:alert] = 'Your account must have the Administrator roles to access Certificate functionality.';
            redirect_to '/'
          end
        end                 
    end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T17:32:25.863

所以你有模型和视图。最后一部分通常是控制器。你需要：

1.  在呈现表单的操作中，您需要分配给`@certificate`

    `@certificate = Certificate.new`

2.  您需要将按钮类型更改为`submit`，目前为`button`.

3.  在接收提交表单的操作中，您需要验证参数

    `@certificate = Certificate.new(params[:certificate])`

    `@certificate.valid?`

您应该根据验证结果决定下一步该做什么。呈现上一个操作（以便您可以打印错误）或继续。

# cakephp - CakePHP 1.3 - 从 shell 使用路由器创建的 URL 调用 requestAction() 会导致“缺少控制器”错误

> ID：14160339
> 
> 赞同：2
> 
> 时间：2013-01-04T15:49:43.143
> 
> 标签：cakephp, cakephp-1.3

我有一个 CakePHP 1.3 shell，它需要使用 requestAction() 从单独的控制器生成 HTML。该调用的 URL 是使用以下命令生成的：

```
$url = Router::url(array('controller' => 'my_controller', 'action' => $action_str));
$data = array('url' => array('ext' => 'json'), 
              'return' => 'return',
              'pass' => array('an_id_str' => $an_id)); 
```

$action_str、'an_id_str' 和 $an_id 是我的代码中唯一在调用之间发生变化的东西，并且 requestAction() 是这样调用的：

```
$this->requestAction($url, $data); 
```

注意：由于 $action_str 可以为每个调用更改，它会为每个单独的 requestAction() 调用生成新的 $url。

第一次调用 requestAction() 时，效果很好。我第二次调用 requestAction() 时，它会抛出以下错误：

```
"Error: Missing Controller 'c:\...\cake\console'" 
```

有什么想法可能导致路由器搞砸了，我该如何解决？

注意——这实际上发生在几个使用类似功能的不同 shell 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:15:04.860

感谢您的评论，这澄清了您所问的问题。您需要做的是`Router::url`在构建时指定要使用完整 URL 的调用。为此，您只需将`true`选项放在最后。

```
$url = Router::url(array('controller' => 'tests', 'action' => 'trial'), true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:32:39.047

这个问题的正确解决方法是在我的 $url 数组中

```
Router::url(array('controller' => 'my_controller', 'action' => $action_str)); 
```

我需要添加“基本”键并将其设置为 false，如下所示：

```
Router::url(array('controller' => 'my_controller', 'action' => $action_str, 'base' => false)); 
```

[来自http://api13.cakephp.org/view_source/router#line-733](http://api13.cakephp.org/view_source/router#line-733)的文档：

'有一些'特殊'参数可以改变生成的最终 URL 字符串

*   `base`- 设置为 false 以从生成的 url 中删除基本路径。如果您的应用程序不在根目录中，这可用于生成“蛋糕相关”的 url。使用 requestAction 时需要 cake 相对 url。"'

# svg - Wkhtmltopdf 无法打印 SVG 路径（highchart）

> ID：14160340
> 
> 赞同：9
> 
> 时间：2013-01-04T15:49:46.177
> 
> 标签：svg, highcharts, wkhtmltopdf

我正在尝试从 JS highchart 图表创建 PDF，如下所示：[http ://www.highcharts.com/stock/demo/](http://www.highcharts.com/stock/demo/)

它需要JS延迟所以

> wkhtmltopdf --javascript-delay 1000 [http://www.highcharts.com/stock/demo/](http://www.highcharts.com/stock/demo/) pdftest1.pdf

结果我只看到一条灰色的粗线。

我在 Windows 7 上使用该组件的 0.11.0 rc2 版本。还有其他人遇到同样的问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-04T16:15:11.447

这里有一个[解决方法](http://code.google.com/p/wkhtmltopdf/issues/detail?id=689)。诀窍是将 plotOptions.series.enableMouseTracking 设置为 false。

这是因为灰线是图表的“鼠标轨迹”区域，并且由于某些原因它没有被 wkhtmltopdf 隐藏。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-02T00:56:24.930

聚会有点晚了，但我发现将它添加到我发送到 wkhtmltopdf 的 CSS 中会隐藏有问题的鼠标轨迹区域，以及在 PDF 版本中看起来不太好的线条下方的阴影。

```
g.highcharts-tracker, g.highcharts-tooltip, path[isShadow] { display:none; } 
```

# javascript - 将要由 Javascript 选择的表格单元格（在列中）分组

> ID：14160342
> 
> 赞同：0
> 
> 时间：2013-01-04T15:49:51.520
> 
> 标签：javascript, html-table

**我想要实现**
的目标 是根据用户给出的日期生成日历的一部分。问题是我生成它的方式，它允许用户将一些信息放入其中（如学校时间表，日程安排）。现在我希望能够在 1 天（例如星期一）、1 天（1 月 6 日）内选择所有单元格。

**有什么问题？**
由于它们是表格中的单元格，它们是由行（星期一的第一行，星期一的第二行等）生成的，我还没有找到任何好的方法来选择列中的一系列单元格。

**到目前为止我尝试了什么？**
好吧，我正在考虑为`name`列中的每个单元格赋予属性，带有日期，所以我可以用 选择它们`getElementsByName()`，但是我还需要区分每个单元格，所以我可以从组中选择一个。但是我没有想法，要使用什么属性。我使用了名称，我可能会使用类来设置它的样式，并且 ID 需要是唯一的，所以我不能使用它，因为每个日期都有 1-8 个 ID。

```
<td class="pion" rowspan="8">Monday</td><td class="szerokie">1</td>        
<td name=30.9.2013></td><td name=7.10.2013></td><td name=14.10.2013></td>
<td name=21.10.2013></td><td name=28.10.2013></td><td name=4.11.2013></td>
<td name=11.11.2013></td><td name=18.11.2013></td><td name=25.11.2013></td>
<td name=2.12.2013></td><td name=9.12.2013></td><td name=16.12.2013></td>
<td name=23.12.2013></td><td name=30.12.2013></td><td name=6.1.2014></td>
<td name=13.1.2014></td><td name=20.1.2014></td><td name=27.1.2014></td> 
```

那**只是星期一第一**行的代码。如您所见，每一列的名称中都有其他日期，但现在我需要一个想法，如何将它们与下一行区分开来（看起来几乎相同，除了星期一之后的第一列，得到数字 2 ( `<td class="szerokie">2</td>`) 。

整个表在这里：http: [//jsfiddle.net/ptUTm/2/](http://jsfiddle.net/ptUTm/2/)

当然，全新的想法，如何将它们分组，然后从组中只得到一个想要的也是受欢迎的。我不“要求”代码，只有想法也可以！

# c# - 我需要更快的 .NET C# 浮点数学运算（用于大数组的乘法和除法）

> ID：14160345
> 
> 赞同：15
> 
> 时间：2013-01-04T15:50:01.210
> 
> 标签：c#, math, optimization, .net-3.5

我需要最快的方法来乘除大数据数组。

我读过这个（由 Ben Voigt[在这里](https://stackoverflow.com/questions/14158956/simple-math-operations-faster-on-double-than-on-float-datatype)写的）：

> 从当前版本开始，.NET 不使用 MMX 或 SSE 或 AVX
> 
> (...)
> 
> 现代 C++ 编译器不仅允许使用 SIMD，而且可以将看起来普通的代码自动向量化为 SIMD 指令

.

我想我需要：

*   SSE 支持向量运算（一次乘以 4 个浮点数）

*   多线程支持（不会与 C# 线程发生冲突的解决方案/库）

**有没有我可以使用的库/dll？**

编辑：八度的任何替代品？我只需要 2 个操作：除法，乘法。如果我正确理解 Octave 是什么以及它是如何工作的 - 我将需要解析输出......它不能很快......

* * *

**根据“你试过什么”和“为什么你不想使用简单`for`”：**

我需要这个来进行神经网络训练。网络（现在）有超过 50 个输入，许多神经元（每个 50+ 权重）。学习数据包含 100.000 多行，每行 50 多个字段。每个神经元输入需要很少（至少 5 个）乘法运算。

我不知道我需要多少个学习时期，但我尝试只对乘法运算进行基准测试，我得到了结果：在我的 Intel Core Duo T2500 2.0GHz CPU 上每个时期大约 16 秒。

当然我可以买更快的电脑，但新电脑比我工作几个小时更有价值，所以我希望它看起来合乎逻辑......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T16:06:16.603

当我看到这个问题时，我搜索了在 C# 中使用 GOTO BLAS 库的方法。GOTO 库（以作者命名，而不是邪恶的编程关键字）被广泛认为是最快的基于 CPU 的线性代数库，因为它们是由一位才华横溢的编码人员编写的，他为每个特定的 CPU 架构（Opteron、Xeon ， ETC。）

事实证明，[Math.NET Numerics](http://mathnetnumerics.codeplex.com/)可能就是您想要的。

来自[MSDN 描述](http://msdn.microsoft.com/en-us/library/hh304368%28v=vs.100%29.aspx)：

Math.NET Numerics 旨在成为 .NET Framework 的标准开源数学库。它为科学、工程和日常使用中的数值计算提供了方法和算法。Math.NET Numerics 涵盖的功能包括特殊函数、线性代数、概率模型、统计、随机数、插值和积分变换 (FFT)。Math.NET Numerics 提供了一个完全托管的实现，可以在 .NET 4.0、Silverlight 4 和 Mono 上运行（但可以针对其他平台进行编译）。它还提供并行托管实现，并支持使用本机 BLAS/LAPACK 库（GotoBLAS、Intel MKL 和 AMD ACML）进行优化。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-04T16:03:54.583

**假设您的向量是巨大的 N 维数组/向量**

如果我使用像 C# 这样的慢速语言并且想要乘以和除以巨大的数组并且需要利用所有处理器尽快完成，我将使用 GNU Octave 的 C# 接口。GNU octave 是一种矢量化语言，因此矩阵乘法使用的资源比嵌套 for 循环少一个数量级。

因此，您将在 GNU Octave 中定义一些自定义脚本，将两个 50 维数组相乘，然后让 C# 调用 octave 并将参数传递给它。然后让 C# 收集结果。

GNU Octave 旨在利用本书中的每一个技巧来使矩阵计算使用尽可能少的资源并尽可能快地完成。

[http://en.wikibooks.org/wiki/Octave_Programming_Tutorial/Getting_started](http://en.wikibooks.org/wiki/Octave_Programming_Tutorial/Getting_started)

有人问如何将 C# 与 Octave 接口：

[八度与 C# 的接口](https://stackoverflow.com/questions/8026951/interfacing-octave-with-c-sharp)

编辑：除非计算时间超过 10 分钟，否则做所有这些额外的工作是没有意义的，并且减少处理时间非常重要。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-04T17:39:49.360

我发现了这样的东西：[Microsoft Research Accelerator v2](http://research.microsoft.com/en-us/projects/accelerator/)

> Accelerator 是一个高级数据并行库，它使用 GPU 或多核 CPU 等并行处理器来加速执行。

有趣的功能（从 M$ 网站粘贴）：

> *   除了 DX9 GPU 和 CUDA 之外，还可以在 32 位和 64 位的多核 CPU 上执行。
> *   能够在单个加速器实例中的多个设备上执行

不幸的是我不能使用它，它不能免费用于商业用途，我什至不想问他们要花多少钱……对我来说可能太贵了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T16:19:41.720

如果您有能力使用 Mono（.NET 的开源替代运行时）运行它，您可以使用 Mono.Simd (http://docs.go-mono.com/index.aspx?link=N:Mono.Simd )，这使得 SIMD 在结构周围可用，但仅在 Mono 中，JIT 将方法调用内联到 SIMD 操作。

# ajax - Grails 从 xhr 获取文件

> ID：14160355
> 
> 赞同：0
> 
> 时间：2013-01-04T15:50:38.397
> 
> 标签：ajax, grails, file-upload

grails如何从xhr获取文件？我的阿贾克斯

```
var xhr = new XMLHttpRequest()  
xhr.open("POST", "actionGrails", true)
xhr.setRequestHeader("Cache-Control", "no-cache");
xhr.setRequestHeader("X-File-Name", file.fileName);
xhr.setRequestHeader("X-File-Size", file.fileSize);
xhr.setRequestHeader("Content-Type", "multipart/form-data");
xhr.send(file); 
```

在我的控制器中时

```
def actionGrails() {
def f = request.getFile('file')
println f//get error
} 
```

有什么解决方案吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T19:29:54.173

这是一个简单的解决方案：使用[Fine Uploader](http://github.com/Widen/fine-uploader)。它有一个[演示页面](http://fineuploader.com/#demo)。

打包库的 Grails 插件在[这里](http://grails.org/plugin/ajax-uploader)。

# jquery - 垂直滚动外部 div，水平滚动内部 div，但也隐藏滚动条

> ID：14160357
> 
> 赞同：0
> 
> 时间：2013-01-04T15:51:00.200
> 
> 标签：jquery, html, css, scroll

我在尝试将滚动应用到我的 HTML 时遇到问题。这个想法是有一个网格。可以垂直滚动。但我也想让该网格的**一部分**水平滚动。

作为奖励，我不希望任何滚动条可见，我将在 Android 上使用 WebView 使用它。

我正在摆弄几个组件的溢出，但我通常最终得到：

*   能够水平滚动整个网格，而不仅仅是“数据”div。
*   'data' 和 'header' div 有 2 个单独的垂直滚动条。

我的 HTML：

```
<button id='scroll_up'>scroll up</button>
<button id='scroll_down'>scroll down</button>
<button id='scroll_left'>scroll left</button>
<button id='scroll_right'>scroll right</button>
<div id="grid">
    <div id="header">
        <a id='row_header'>Some Header</a>
        <a class="row">1</a>
        <a class="row">2</a>
        <a class="row">3</a>
        <a class="row">4</a>
        <a class="row">5</a>
        <a class="row">6</a>
        <a class="row">7</a>
        <a class="row">8</a>
        <a class="row">9</a>
        <a class="row">10</a>
        <a class="row">11</a>
        <a class="row">12</a>
        <a class="row">13</a>
        <a class="row">14</a>
        <a class="row">15</a>
        <a class="row">16</a>
        <a class="row">17</a>
        <a class="row">18</a>
        <a class="row">19</a>
        <a class="row">20</a>
    </div>
    <div id="data">
        <div id="column_header">
            <a class="header">h1</a>
            <a class="header">h2</a>
            <a class="header">h3</a>
            <a class="header">h4</a>
            <a class="header">h5</a>
            <a class="header">h6</a>
            <a class="header">h7</a>
            <a class="header">h8</a>
            <a class="header">h9</a>
            <a class="header">h10</a>
            <a class="header">h11</a>
            <a class="header">h12</a>
        </div>
                    <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>  
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>  
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>          
    </div>
</div> 
```

CSS：

```
body {
    font: 18px arial,sans-serif;        
}
#grid {
    display: block;
    position: absolute;
    top: 100px;
    left: 0px;

    width: 100%;
    height: 517px;
    margin: 0;
}
#header {
    display: inline-block;
    width: 25%; 
    height: 100%;
    float: left;
    overflow: auto;
}

#data {
    float: left;
    display: inline-block;
    width: 75%;
    height: 100%;
    overflow: auto;

}

.row, #row_header {
    display: block;
    padding-left: 8px;
    height: 50px;
    border: 1px solid black;

    text-align: center;
    line-height: 50px;
}

.row_data, #column_header {
    display: inline-block;
    white-space: nowrap;
    width: 100%;
}

.data, .header {
    display: inline-block;  
    border: 1px solid black;    
    width: 20%;         
}

#row_header, .header {
    height: 30px;
    line-height: 30px;
}

#row_header, #column_header {
    text-align: center;
}

.data, .row {
    height: 50px;
    text-align: center;
    line-height: 50px;
} 
```

还有我的 JS：

```
$(document).ready(function() {        
    $('#scroll_up').click(function() {
        var height = $('#grid').height();
        $('#grid').scrollTo( '-=' + height + 'px', { axis:'y' } );
    });

    $('#scroll_down').click(function() {
        var height = $('#grid').height();
        $('#grid').scrollTo( '+=' + height + 'px', { axis:'y' } );
    });

    $('#scroll_left').click(function() {
        var width = $('#data').width();
        $('#data').scrollTo( '-=' + width + 'px', { axis:'x' } );
    });

    $('#scroll_right').click(function() {
        var width = $('#data').width();
        $('#data').scrollTo( '+=' + width + 'px', { axis:'x' } );
    });
});​ 
```

为方便起见：http : [//jsfiddle.net/xFPtj/1/](http://jsfiddle.net/xFPtj/1/)

关于我应该做什么的任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:59:12.400

我希望我已经正确理解了您的问题，据我所知，我认为您想要以下内容：

[http://jsfiddle.net/hGTw3/2/](http://jsfiddle.net/hGTw3/2/)

我使用溢出技巧隐藏了滚动条，它可能被认为是一种 hack，但它使用纯 HTML + CSS（不需要 JavaScript）并且在跨浏览器工作时很容易调整。

如果你好奇，可以[在这里](https://stackoverflow.com/questions/13684403/hide-scrollbar-with-overflowscroll-enabled)阅读更多。

不幸的是，我不得不在其中包含几个`div`' 用于溢出技巧，但我不认为这是一个主要缺点。

为了将来参考，修改了 HTML：

```
<div class="buttons">
    <button id='scroll_up'>scroll up</button>
    <button id='scroll_down'>scroll down</button>
    <button id='scroll_left'>scroll left</button>
    <button id='scroll_right'>scroll right</button>
</div>
<div id="grid">
    <div id="header-container">
    <div id="header">
        <a id='row_header'>Some Header</a>
        <a class="row">1</a>
        <a class="row">2</a>
        <a class="row">3</a>
        <a class="row">4</a>
        <a class="row">5</a>
        <a class="row">6</a>
        <a class="row">7</a>
        <a class="row">8</a>
        <a class="row">9</a>
        <a class="row">10</a>
        <a class="row">11</a>
        <a class="row">12</a>
        <a class="row">13</a>
        <a class="row">14</a>
        <a class="row">15</a>
        <a class="row">16</a>
        <a class="row">17</a>
        <a class="row">18</a>
        <a class="row">19</a>
        <a class="row">20</a>
    </div>
</div>
    <div id="data-container">
    <div id="data">
        <div id="column_header">
            <a class="header">h1</a>
            <a class="header">h2</a>
            <a class="header">h3</a>
            <a class="header">h4</a>
            <a class="header">h5</a>
            <a class="header">h6</a>
            <a class="header">h7</a>
            <a class="header">h8</a>
            <a class="header">h9</a>
            <a class="header">h10</a>
            <a class="header">h11</a>
            <a class="header">h12</a>
        </div>
                    <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>    
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>    
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>
        <div class="row_data">
            <a class="data">data 1</a>
            <a class="data">data 2</a>
            <a class="data">data 3</a>
            <a class="data">data 4</a>
            <a class="data">data 5</a>
            <a class="data">data 6</a>
            <a class="data">data 7</a>
            <a class="data">data 8</a>
            <a class="data">data 9</a>
            <a class="data">data 10</a>
            <a class="data">data 11</a>
            <a class="data">data 12</a>
        </div>            
    </div>
</div>
</div> 
```

并修改了 CSS（JavaScript 不变）：

```
body {
    font: 18px arial,sans-serif;
    overflow: hidden;
}
#grid {
    clear: left;
    display: block;
    position: absolute;
    right: -16px;
    top: 100px;
    left: 0px;
    bottom: 0;
    overflow-y: auto;
    margin: 0;
}
#header-container {
    float: left;
    overflow: hidden;
    width: 25%;    
}
#header {
    margin: 16px 0 0 0;
    overflow: auto;
    width: 100%;
}

#data-container {
    float: left;
    overflow: hidden;
    width: 75%;
}
#data {
    margin: 16px 0 -16px 10px;
    overflow: auto;
    width: 100%;
}

.row, #row_header {
    display: block;
    padding-left: 8px;
    height: 50px;
    border: 1px solid black;

    text-align: center;
    line-height: 50px;
}

.row_data, #column_header {
    display: inline-block;
    white-space: nowrap;
    width: 100%;
}

.data, .header {
    display: inline-block;    
    border: 1px solid black;    
    width: 20%;            
}

#row_header, .header {
    height: 30px;
    line-height: 30px;
}

#row_header, #column_header {
    text-align: center;
}

.data, .row {
    height: 50px;
    text-align: center;
    line-height: 50px;
} 
```

您可能想仔细检查 CSS，因为我没有，它可能有点乱。

# speed-test - Windows 7 上传速度慢

> ID：14160358
> 
> 赞同：2
> 
> 时间：2013-01-04T15:51:04.180
> 
> 标签：speed-test

我被难住了。在工作中，我的 Windows 7 笔记本电脑配备 Atheros AR8152/8158 PCI-E 快速以太网控制器，下载速度超过 10 Mbps，但上传速度低于 1 Mbps。

在我家的有线互联网上，两种速度都是 12+ Mbps。

顺便说一句，我使用 www.speedtest.com 来测试我的速度。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-04T15:51:04.180

答案是我的 NIC 上的**大型发送卸载 (IPv4)**设置。默认情况下已启用。当我禁用它时，我的工作上传速度跃升至 12+ Mbps。看来，如果基础设施（例如路由器、交换机）不支持此选项，则传输会变得“突发”并变慢。我的家用路由器（Apple Airport Extreme）显然支持此选项。

要禁用，请转到开始->控制面板->设备管理器->网络适配器->Atheros AR8152/8158 PCI-E 快速以太网控制器 (NDIS 6.20)，右键单击然后选择属性。在 Advance 选项卡上，找到属性 Large Send Offload (IPv4) 并将其值更改为**Enabled** ，然后单击 OK。

[![在此处输入图像描述](../Images/36dc2da75d122ac4a1ccc9f098004184.png)](https://i.stack.imgur.com/1AVoA.jpg)

# azure - Shared DataContract Worker 角色/Web 角色

> ID：14160364
> 
> 赞同：0
> 
> 时间：2013-01-04T15:51:34.140
> 
> 标签：azure, internal, web-worker, endpoints, datacontracts

我有一个 Azure Web 角色通过内部端点链接到工作角色，目的是使用工作角色向 Web 角色提供数据，保持 Web 角色和数据库 [包含敏感数据] 之间的隔离。有一个类库项目，其中包含工作角色和 Web 角色都引用的所有必要数据协定。

在开发环境中，一切都很好，而且效果很好。一旦我上传到 Azure，工作角色就无法启动。错误消息是：

```
Message string  Failed with ExceptionSystem.IO.FileNotFoundException: Could not load file or assembly 'ReadOnly_DC, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The system cannot find the file specified.
File name: 'ReadOnly_DC, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'
   at System.Signature.GetSignature(SignatureStruct& signature, Void* pCorSig, Int32 cCorSig, RuntimeFieldHandleInternal fieldHandle, IRuntimeMethodInfo methodHandle, RuntimeType declaringType)
   at System.Reflection.RuntimeMethodInfo.get_Signature()
   at System.Reflection.RuntimeMethodInfo.GetParameters()
   at System.ServiceModel.Description.ServiceReflector.ValidateParameterMetadata(MethodInfo methodInfo)
   at System.ServiceModel.Description.TypeLoader.CreateOperationDescriptions(ContractDescription contractDescription, ContractReflectionInfo reflectionInfo, Type contractToGetMethodsFrom, ContractDescription declaringContract, MessageDirection direction)
   at System.ServiceModel.Description.TypeLoader.CreateContractDescription(ServiceContractAttribute contractAttr, Type contractType, Type serviceType, ContractReflectionInfo& reflectionInfo, Object serviceImplementation)
   at System.ServiceModel.Description.TypeLoader.LoadContractDescriptionHelper(Type contractType, Type serviceType, Object serviceImplementation)
   at System.ServiceModel.Description.ContractDescription.GetContract(Type contractType, Type serviceType)
   at System.ServiceModel.ServiceHost.CreateDescription(IDictionary`2& implementedContracts)
   at System.ServiceModel.ServiceHostBase.InitializeDescription(UriSchemeKeyedCollection baseAddresses)
   at System.ServiceModel.ServiceHost..ctor(Type serviceType, Uri[] baseAddresses)
   at DA_Worker.WorkerRole.StartWS_Host() in C:\Users\grant.roy\Documents\Visual Studio 2010\Projects\CraigAzure\DA_Worker\WorkerRole.cs:line 80

WRN: Assembly binding logging is turned OFF.
To enable assembly bind failure logging, set the registry value [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) to 1.
Note: There is some performance penalty associated with assembly bind failure logging.
To turn this feature off, remove the registry value [HKLM\Software\Microsoft\Fusion!EnableLog].
; TraceSource 'WaWorkerHost.exe' event 
```

它似乎无法打开数据协定类库“ReadOnly_DC”。

对 ReadOnly_DC 的引用设置为复制本地，我已尝试对与数据协定类库一起使用的所有引用“复制本地”，但无济于事。

任何建议都非常感谢！

授予

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:57:05.797

当您在解决方案资源管理器中右键单击辅助角色项目时，请确保在“项目依赖项...”中选择了类库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T20:31:23.090

好的 - 我不敢相信这是答案，但这就是我让它工作的方式。我将各种类库中的所有逻辑直接移动到我的 Worker Role 项目中，毫不奇怪，它可以找到它需要的各种方法和数据协定，并且 Worker Role 开始工作了！

为了与 Web 角色共享“共享”资源，我通过解决方案资源管理器中的“添加现有项目”功能将必要的类 [数据协定、YubiKey-Class 和 IWebService 本身] 添加到 Web 角色，将它们添加为“链接”，而不是拥有文件的重复副本。

因此，这将我的 [隐藏] woker 角色中的所有秘密内容 [连接字符串和共享存储访问密钥] 与我暴露于 Internet 的 Web 角色分开。

# android - 循环浏览文件列表并下载 - 仅保存最后一个文件

> ID：14160368
> 
> 赞同：0
> 
> 时间：2013-01-04T15:51:47.297
> 
> 标签：android, actionscript-3, flash, air

我正在使用此帖子[链接](https://stackoverflow.com/questions/12031095/as3-air-for-android-downloading-and-saving-remote-files)中的代码将远程 SWF 文件下载到磁盘。

我有一个列出 3 个 SWF 文件的 XML 文件，并且我使用 for each 循环来遍历它们。跟踪名称，显示所有 3 个唯一文件名。

在 for each 循环中使用文件下载代码时，仅保存列表中的最后一个文件。

我的确切代码：

```
function onPlaylistComplete(e:Event)
{
    var List:XML = new XML(e.target.data);
    trace("List : " + List);

    for each(var item in List.playlist_ads.ad.ad_file_path)
    {
        var urlString:String = site_url + "/" + item;
        var urlReq:URLRequest = new URLRequest(urlString);
        var urlStream:URLStream = new URLStream();

        urlStream.addEventListener(Event.COMPLETE, loaded);
        urlStream.load(urlReq);

        function loaded(event:Event):void
        {
            var fileData:ByteArray = new ByteArray();
            urlStream.readBytes(fileData, 0, urlStream.bytesAvailable);
            writeBinaryFile(item, fileData);
        }

    }
}

function writeBinaryFile(name : String, array : ByteArray) : void {
    try {
        var f : File = File.documentsDirectory.resolvePath(name);
        var fs : FileStream = new FileStream();
        fs.open(f, FileMode.WRITE);
        fs.writeBytes(array);
        fs.close();
        trace(f.nativePath + " written.");
    }
    catch (err : Error) {
        trace(err.name);
    }
} 
```

我在想字节数组没有被清除，或者我需要为每个文件使用一个字节数组？

希望你能帮忙。

更新 - 我尝试了以下代码，将完成事件处理程序从循环中取出，仍然有同样的问题，并且正在使用最后一个文件名。在过去的几个小时里一直在尝试各种各样的事情！

```
for(i = 0; i < adArray.length; i++)
    {
        var swfItem = adArray[i];
        var urlString:String = site_url + "/" + adArray[i];
        var urlReq:URLRequest = new URLRequest(urlString);
        var urlStream:URLStream = new URLStream();

        urlStream.addEventListener(Event.COMPLETE, urlStreamComplete);
        urlStream.load(urlReq);

    }
    function urlStreamComplete(event:Event):void
        {
            var fileData:ByteArray = new ByteArray();
            var stream = event.target;
            stream.readBytes(fileData, 0, stream.bytesAvailable);
            try {
                var f : File = File.documentsDirectory.resolvePath(swfItem);
                var fs : FileStream = new FileStream();
                fs.open(f, FileMode.WRITE);
                fs.writeBytes(fileData);
                fs.close();
                trace(f.nativePath + " written.");
            }
            catch (err : Error) {
                trace(err.message);
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:09:16.233

首先将加载的函数移到循环之外，现在它被多次声明。至于你的问题；在您加载的函数中，您指的是在循环中分配的 urlStream 。在循环结束时，它会将流保存到最后一项，而最后一项将由加载的方法使用。使用传递给加载函数的事件 (event.target) 来获取调度事件的 urlStream。加载函数中的项目也是如此，您需要某种字典设置来获取它。

# java - 如何在 Java 中插入动画 gif

> ID：14160374
> 
> 赞同：0
> 
> 时间：2013-01-04T15:52:19.463
> 
> 标签：java

> **可能重复：**
> [在 Java 中显示动画 gif](https://stackoverflow.com/questions/2935232/show-animated-gif-in-java)

如何在 Java 中插入动画 gif 图像？

我已经看过不同的答案和问题。但是当我对此进行编码时，它不会显示 gif 动画。

```
Image image = Toolkit.getDefaultToolkit().getImage("yourFile.gif");
Image image=ImageIO.read(new File("yourFile.gif")); 
```

最后，我使用了方法`drawImage`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T15:56:00.710

你可以简单地使用一个 JLabel （从[这里](https://stackoverflow.com/questions/2935232/show-animated-gif-in-java)偷来的，如果这是你需要的，去给他信用。）

```
public static void main(String[] args) throws MalformedURLException {

    URL url = new URL("<URL to your Animated GIF>");
    Icon icon = new ImageIcon(url);
    JLabel label = new JLabel(icon);

    JFrame f = new JFrame("Animation");
    f.getContentPane().add(label);
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.pack();
    f.setLocationRelativeTo(null);
    f.setVisible(true);
} 
```

# mysql - mysql：找不到命令，但它在我的 PATH 中

> ID：14160375
> 
> 赞同：0
> 
> 时间：2013-01-04T15:52:21.557
> 
> 标签：mysql, macos, bash, terminal

.bashrc 说：

```
PATH=$PATH:/usr/local/mysql/bin/:$HOME/.rvm/bin # Add RVM to PATH for scripting 
```

但`mysql -u root`返回

```
-bash: mysql: command not found 
```

但如果我这样做`/usr/local/mysql/bin/mysql -u root` 一切正常。为什么不使用 PATH 进行搜索？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:00:39.917

您需要使用：

```
export PATH=$PATH:... 
```

或者`export PATH`在此语句之后添加语句。

您所做的更改不会在您的`.bashrc`. `export`在分配之前添加（或`export PATH`稍后添加）将确保您的更改导出到 shell 的子进程。

# c# - 替代会话/静态变量 ASP.NET/C#

> ID：14160378
> 
> 赞同：2
> 
> 时间：2013-01-04T15:52:26.073
> 
> 标签：c#, asp.net, .net, session-variables, static-variables

我想知道.NET 环境中是否存在有效的会话或静态。我需要的是一个变量来存储一些维持其值的数据，可以通过所有 ASP.NET 页面/C# 表单访问，**但对于使用该应用程序的所有用户来说并不是唯一的**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:07:03.617

我认为您正在寻找应用程序状态而不是应用程序缓存。应用程序状态的工作方式与会话状态相同，但会在所有会话之间共享。

示例用法：

```
 Application["Message"] = "Welcome to my Website"; 
```

更多信息： http: [//www.codeproject.com/Articles/87316/A-walkthrough-to-Application-State](http://www.codeproject.com/Articles/87316/A-walkthrough-to-Application-State)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T15:54:41.537

那么您的答案很可能是应用程序缓存。看看 System.Web.Caching

由于有一些关于缓存对象生命周期的讨论，您可以设置它。用户没有具体说明，但它必须存活多长时间。在应用程序回收之间？在单个实例的生命周期内，是否需要在实例之间。缓存将适用于最简单的要求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T15:57:22.973

你可以使用应用程序缓存吗？它为整个应用程序中的所有用户共享，可从所有页面访问，并且每个用户不是唯一的。

有关如何使用缓存 API 的更多详细信息，请参阅[此](http://msdn.microsoft.com/en-us/library/ms178597%28v=vs.100%29.aspx)和[此](http://msdn.microsoft.com/en-us/library/aa478965.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T16:04:38.287

您可以尝试使用应用程序范围的变量来处理这个问题。

首先在 Global.asax 文件中，添加以下内容：

```
void Application_Start(object sender, EventArgs e)
{
    [Other Stuff Already Here Omitted]
    Application["MyVariable"] = "My Default value";
} 
```

然后在任何页面上，您都可以访问：

```
var myVar = Application["MyVariable"]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T15:58:37.440

您可以将类公开为静态。这将使它在所有会话中可用，但仅限于该应用程序实例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-04T16:09:35.250

答案是不。在那个级别上不存在“.Net 环境”。您的 .Net 代码也从主机获得运行时限制。让我们定义两个主机（还有更多）：IIS 和“简单的主 exe”。

对于 IIS 托管代码，您在主机创建线程（或者更确切地说分配一个线程）并在该线程上执行您的代码的环境中运行。主机本身定义何时以及是否重置进程。您不能，或者更确切地说，不应该假设关于哪个进程或线程正在执行您的代码。当您谈论农场中的 iis 时，这会得到增强。

对于 exe 中的简单主代码，操作系统会创建进程和初始第一个线程，并将执行指针设置为主函数中的第一条语句。

“静态”在拥有过程的整个生命周期内保持状态，这是 .Net 给您的保证。

“会话”是处理比静态属性更多的特定实现。

我建议您在描述您的主机时对问题进行改进。对于 iis，答案可能是 AppFabric 缓存。

希望这可以帮助

# c# - 如何在 vsto 2010 中捕获 slide.moveto 事件

> ID：14160379
> 
> 赞同：1
> 
> 时间：2013-01-04T15:52:30.910
> 
> 标签：c#, event-handling, vsto, powerpoint

我正在创建一个 powerpoint 插件 - 每当我向演示文稿添加新幻灯片时都会调用一个特定的函数。为此，我正在使用该`Application.PresentationNewSlide`事件但我也想在用户移动现有幻灯片时进行捕获。有谁知道这个活动`slide.MoveTo`？

# css - 跨度无法正常工作

> ID：14160380
> 
> 赞同：0
> 
> 时间：2013-01-04T15:52:36.203
> 
> 标签：css, html

我有一个顶部导航，我希望导航的一部分位于左侧，另一部分位于右侧。我已经坐了一段时间了，不明白。我不明白为什么它在这里不起作用是我的代码：

```
<div id="overhead">
    <div id="overheadText">

    <!-- Home -->
    <a href="index.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Home','','Images/List/diverse/home_mo.png',1)"><img src="Images/List/diverse/home.png" alt="Home" name="Home" width="65" height="30"   border="0" id="Home" /></a>    
    <!-- Request Streams -->
    <a href="RequestStream.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('RequestStream','','Images/List/diverse/requestStream_mo.png',1)"><img src="Images/List/diverse/requestStream.png" alt=    "RequestStream" name="RequestStream" width="113" height="30" border="0" id="RequestStream" /></a>
    <!-- About&Contact -->
    <a href="AboutContact.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('AboutContact','','Images/List/diverse/AboutContact_mo.png',1)"><img src="Images/List/diverse/AboutContact.png" alt="About&amp;Contact" name="AboutContact" width="113" height="30" border="0" id="AboutContact" /></a>
    <!-- Play LoL -->
    <a href="http://www.leagueoflegends.com" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Lol','','Images/List/diverse/Lol_mo.png',1)"><img src="Images/List/diverse/Lol.png" alt="Play LeagueofLegends" name="Lol" width="160" height="30" border="0" id="Lol" /></a>

    <!-- All links following should be rightsided (But wont work) -->

    <span style="text-align:right">
    <!-- Facebook -->
    <a href="http://www.facebook.com" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('FB','','Images/List/diverse/fb_mo.png',1)"><img src="Images/List/diverse/fb.png" alt="Facebook" name="FB" width="31" height="30" border="0" id="FB" /></a>
    <!-- Twitter -->
    <a href="http://www.twitter.com" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Twitter','','Images/List/diverse/tw_mo.png',1)"><img src="Images/List/diverse/tw.png" alt="Twitter" name="Twitter" width="31" height="30" border="0" id="Twitter" /></a>
    </span>

    </div>
</div> 
```

有任何想法吗？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T15:56:16.340

它不能工作，因为你的 span 是一个`inline`html 组件。所以它需要它的孩子的宽度。

您可以使用`float: right;`样式。它应该工作得更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:59:22.557

这将解决您的问题

```
<div id="overhead">
    <div id="overheadText">
    <div style="float:left">
    <!-- Home -->
    <a href="index.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Home','','Images/List/diverse/home_mo.png',1)"><img src="Images/List/diverse/home.png" alt="Home" name="Home" width="65" height="30"   border="0" id="Home" /></a>    
    <!-- Request Streams -->
    <a href="RequestStream.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('RequestStream','','Images/List/diverse/requestStream_mo.png',1)"><img src="Images/List/diverse/requestStream.png" alt=    "RequestStream" name="RequestStream" width="113" height="30" border="0" id="RequestStream" /></a>
    <!-- About&Contact -->
    <a href="AboutContact.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('AboutContact','','Images/List/diverse/AboutContact_mo.png',1)"><img src="Images/List/diverse/AboutContact.png" alt="About&amp;Contact" name="AboutContact" width="113" height="30" border="0" id="AboutContact" /></a>
    <!-- Play LoL -->
    <a href="http://www.leagueoflegends.com" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Lol','','Images/List/diverse/Lol_mo.png',1)"><img src="Images/List/diverse/Lol.png" alt="Play LeagueofLegends" name="Lol" width="160" height="30" border="0" id="Lol" /></a>
    </div>
    <!-- All links following should be rightsided (But wont work) -->

    <div style="float:right">
    <!-- Facebook -->
    <a href="http://www.facebook.com" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('FB','','Images/List/diverse/fb_mo.png',1)"><img src="Images/List/diverse/fb.png" alt="Facebook" name="FB" width="31" height="30" border="0" id="FB" /></a>
    <!-- Twitter -->
    <a href="http://www.twitter.com" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Twitter','','Images/List/diverse/tw_mo.png',1)"><img src="Images/List/diverse/tw.png" alt="Twitter" name="Twitter" width="31" height="30" border="0" id="Twitter" /></a>
    </div>

    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T16:00:35.220

尝试将它们放在 DIV 中并将它们浮动在左侧/右侧：

```
<div style="float:left;"> <!-- Left part -->

    <!-- Home -->
    <a href="index.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Home','','Images/List/diverse/home_mo.png',1)"><img src="Images/List/diverse/home.png" alt="Home" name="Home" width="65" height="30"   border="0" id="Home" /></a>    
    <!-- Request Streams -->
    <a href="RequestStream.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('RequestStream','','Images/List/diverse/requestStream_mo.png',1)"><img src="Images/List/diverse/requestStream.png" alt=    "RequestStream" name="RequestStream" width="113" height="30" border="0" id="RequestStream" /></a>
    <!-- About&Contact -->
    <a href="AboutContact.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('AboutContact','','Images/List/diverse/AboutContact_mo.png',1)"><img src="Images/List/diverse/AboutContact.png" alt="About&amp;Contact" name="AboutContact" width="113" height="30" border="0" id="AboutContact" /></a>
    <!-- Play LoL -->
    <a href="http://www.leagueoflegends.com" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Lol','','Images/List/diverse/Lol_mo.png',1)"><img src="Images/List/diverse/Lol.png" alt="Play LeagueofLegends" name="Lol" width="160" height="30" border="0" id="Lol" /></a>

</div>
    <!-- All links following should be rightsided (But wont work) -->

<div style="float:right;"> <!-- Right part -->

    <span style="text-align:right;">
    <!-- Facebook -->
    <a href="http://www.facebook.com" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('FB','','Images/List/diverse/fb_mo.png',1)"><img src="Images/List/diverse/fb.png" alt="Facebook" name="FB" width="31" height="30" border="0" id="FB" /></a>
    <!-- Twitter -->
    <a href="http://www.twitter.com" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Twitter','','Images/List/diverse/tw_mo.png',1)"><img src="Images/List/diverse/tw.png" alt="Twitter" name="Twitter" width="31" height="30" border="0" id="Twitter" /></a>
    </span>

</div> 
```

更多信息在这里：[http ://www.w3schools.com/css/css_float.asp](http://www.w3schools.com/css/css_float.asp)

# php - php获取cookie的刷新值

> ID：14160383
> 
> 赞同：1
> 
> 时间：2013-01-04T15:52:39.087
> 
> 标签：php

我已经使用 javascript 设置了 cookie 值，然后我想使用 php 检索刷新的 cookie 值......但我得到了 cookie 的旧值......有人可以在这里发布解决方案......这是代码：

```
onClick="javascript:document.cookie='title=< ?php echo $title; ? >';" 
```

和检索cookie的代码..但没有刷新：

```
<?php $tit=$_COOKIE['title']; ?> 
```

所以当我回显时，`$tit;`我得到旧值...有人可以在这里发布解决方案来刷新 cookie 值并将其读取到 php 变量`$tit`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:07:35.537

`onMouseDown`正如@datasage指出的那样`onClick`，您的`addHit`javascript 在设置cookie 值之前运行。有关详细信息，请参阅[此页面](http://www.quirksmode.org/js/events_mouse.html)

编辑：我明白你现在想要做什么。您将需要创建另一个 php 文件（在我的示例中为 datagetter.php）来处理目录扫描并以有用的格式返回数据，我相信如果不重新加载页面或添加一个文件，您想要做的所有事情都不会同时发生在一个文件中ajax 处理程序到您的 php 代码的开头。

使用 php 回显您的链接

```
<a href="ftp://<?php echo $source . '/' . $source2 . '/' . $genre . '/' . $title ?>" id="PopUpItUp" class="detail" data-title="<?php echo $title; ?>" data-id="<?php echo $id; ?>"><?php echo $title ?> (Episodes)</a> 
```

使用 jQuery 将事件处理程序附加到每个链接

```
<script>
$(window).load(function () {
    $('.detail').each().mousedown(function () {
        //set title cookie  access this in php with $_COOKIE['title']
        $.cookie('title', $(this).attr('data-title'));
    });
    $('.detail').each().click(function (e) {
        //increment hitcount
        var titleid = $(this).attr('data-id')
        addHit('./count.php?id=' + titleid , titleid);
        //get data to display via ajax call you may want this IN addHit somewhere
        //there will be a delay in getting the data you want so display something to show progress while we wait
        $("#popup").html("<div><img src='progresshappens.gif' width='25px' height='25px' />");
        $.ajax({
            url: 'http://yourdomain.com/datagetter.php?id=' + titleid,
            success: function(data) {
                //Do something with data, probably add to popup window? here is a starting point
                //Check into using javascript 'for each' function
                $('#popup').html('<div>' + data + '</div>');
            },
            error: function(request, error, errormessage) {
                //show error, something bad happened
                $("#messages").html(error + '\n' + errormessage);
            }
        });
        //don't follow link
        e.preventdefault();
        return false;
    });
</script> 
```

# ruby-on-rails - Rails：带有嵌套 JSON 的 POST API

> ID：14160384
> 
> 赞同：1
> 
> 时间：2013-01-04T15:52:42.030
> 
> 标签：ruby-on-rails, ruby, json, api

我创建了一个需要使用 JSON 进行 POST 的 API。此 API 用于在请求期间创建多个新项目。我正在尝试在下面显示的 JSON 中提取特定信息。

JSON 结构如下所示：

```
{ "Items": [ {"item_id": 1 }, { "item_id": 2 }. { "item_id": 3 }, ...  ] } 
```

在控制器内部，我有以下内容：

```
def create
    all_items = params[:items]
    ... 
    # Need something here to extract the item_id's from all_items and 
    # saved into a variable called item_id
    # Possibly a loop to do this
    new_item = Item.new(item_id)
    new_item.save
    render :json => {'Message' => 'Successfully created #{item_id}'}.to_json, :status => 200
end 
```

我曾尝试使用`ActiveSupport::JSON.decode(all_items)`，但我收到错误消息`cant convert Array into String`。不确定我是否需要使用它。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:10:58.110

```
all_items.each do |item|
  new_item = Item.new(item["item_id"])
  new_item.save
end 
```

# java - How to make managed entities context aware?

> ID：14160385
> 
> 赞同：2
> 
> 时间：2013-01-04T15:52:46.310
> 
> 标签：java, spring, hibernate

I have an application using **hibernate/JPA** for persistence. It uses **Spring**.
Some of the persisted beans depend on **external objects** that I retrieve from a **REST service.**

The client stub of this REST service is a **registered Spring service**.

I would like to wrap the load of those external objects in the process of the hibernate load. This way, I know for sure that my objects will always be valid after the load, even when I get those objects via complex HQL queries.

The problem is that, whatever method I use, I have hard time obtaining the **Spring application context** (and thus the REST client) in my persisted beans.

I have tried the following:

*   Use **UserType** to fetch my object from REST via their ID :
    the CustomUserType is instanciated by Hibernate, and thus, no Spring injection can occur.
*   Use **@AfterLoad** JPA annotation :
    This one is worse, no EntityManager, Session or Spring context available
*   User **LifeCycle** interface, onLoad(Session s, Serializable id) method :
    I have access to the session here. But I don't know how to make a custom Session that would be **ApplicationContext** aware.

For the time being, I am using a dirty workaround : An **ApplicationHolder** Spring service, that provides a static getter, for objects out of the Spring wolrd to have access to it.

Do you have any best practive on how to make hibernate or the persisted beans context aware ?

THks

**EDIT**

Doing it in my DAO was my first approach, but actually I have many sub objects that need fetching, like so :

```
LocalObject
* - localSubObject1
    - refToExternalObject ----------> externalObject1
* - localSubObject2 
    - refToExternalObject ----------> externalObject2
    - refToExternalObject ----------> externalObject3 
```

I would like my LocalObject to have a consistent, clean load.

This way, I can write Complex HQL in my DAO and not bother about external object fetching anymore.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:24:27.070

A quick sketch of a solution to explain my comment:

```
@Component
public class HibernateDao {

    @Resource
    private SessionFactory sessionFactory;
    @Resource
    private RestClient restClient;

    public LocalObject loadLocalObject(Serializable id) {
        LocalObject localObject = sessionFactory.getCurrentSession().load(id);
        ExternalObject externalObject = restClient.getExternalObject(id);

        localObject.setVal(externalObject.getVal())
        // ... more of this ...

        return localObject;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:19:30.790

If you don't want to do it in the Dao then maybe this could work:

```
@Component
public class MyPostLoadEventListener implements PostLoadEventListener {

    @Resource
    private SessionFactoryImpl sessionFactoryImpl;
    @Resource
    private RestClient restClient;

    @PostConstruct
    public void installAsEventListener() {
        sessionFactoryImpl.getServiceRegistry()
                              .getService(EventListenerRegistry.class)
                              .getEventListenerGroup(EventType.POST_LOAD)
                              .appendListener(this);
    }

    @Override
    public void onPostLoad(PostLoadEvent event) {
        if (event.getEntity() instanceof LocalObject) {
            // fill with data from RestClient
        }
    }
} 
```

This is a little bit messy, but unfortunately the alternative ways of registering Hibernate EventListeners (in configuration or via [Integrators](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html_single/#integrators)) can't be used with Spring beans as they are instantiated directly (as mentioned on this [abandoned JIRA entry](https://jira.springsource.org/browse/SPR-9187)).

Hope that helps.

# matlab - 在matlab中使用ismember或intersect

> ID：14160386
> 
> 赞同：3
> 
> 时间：2013-01-04T15:52:49.993
> 
> 标签：matlab, matrix

我有两个列向量 [ab] 和 [cd]。我只想选择 'a' 中的那些数据点，其中 'c' 匹配 'a' 以及相应的 'b' 值。由于“a”中有一些重复，这使得“ismember”命令无法正常工作。'For loop' 是另一种选择，但列向量的大小对于制作循环来说太大了。下面给出了一个简短的例子。有什么解决办法吗？谢谢

> > [ab]

答案=

```
1.0000    0.1000
2.0000    0.2000
2.0000    0.2000
3.0000    0.4000
4.0000    0.5000 
```

> > [光盘]

答案=

```
 2     7
 3    12 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:36:39.917

如果我理解正确，解决方案是从以下开始：

```
[a idx] = unique(a);
b = b(idx); 
```

通过这种方式，您删除了所有重复的 a，因此现在您可以使用常规方法，例如`ismember`or `intersect`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T16:05:08.640

你的问题有点不清楚。我假设您想要的输出是：

```
2.0000    0.2000
2.0000    0.2000
3.0000    0.4000 
```

我这样定义你的矩阵：

```
AB = [a b];
CD = [c d]; 
```

使用 ismember：

```
ismember(AB(:,1), CD(:,1)); % Compare first columns. 
```

会给你行号。像这样：

```
 0
 1
 1
 1
 0 
```

所以，你需要做的是：

```
AB(ismember(AB(:,1), CD(:,1)),:); % Get the entire corresponding row. 
```

输出将是：

```
2.0000    0.2000
2.0000    0.2000
3.0000    0.4000 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T17:51:38.650

如果 的 重复值`a`总是与 相同的值`b`，您可以使用的第二个输出`ismember`作为一个简单的解决方案：

```
ab=[1.0000    0.1000
2.0000    0.2000
2.0000    0.2000
3.0000    0.4000
4.0000    0.5000];
cd=[2     7
3    12];

[~,idx]=ismember(cd(:,1),ab(:,1))
out = ab(idx,:)

out =

    2.0000    0.2000
    3.0000    0.4000 
```

如果重复值`a`有时可能有不同的值`b`（例如`[2 0.2; 2 0.3]`，您需要先`unique`调用`a`：

```
[~,idx] = unique(ab(:,1));
ab = ab(idx,:);
out = ab(ismember(ab(:,1),cd(:,1)),:); 
```

# html - 自定义 HTML5 视频

> ID：14160389
> 
> 赞同：0
> 
> 时间：2013-01-04T15:53:11.287
> 
> 标签：html, video, html5-video, customization

我可以动态更改 HTML5 中的视频以显示自定义内容，例如视频中显示的用户名吗？

（如果不是 HTML5，还有什么其他方法可以做到这一点）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:22:57.207

是的。我推荐[Popcorn.js](http://popcornjs.org/)，这是一个 Javascript 库，可以轻松地将动态内容与视频同步。Popcorn 有许多插件可以生成不同类型的动态内容和效果，有些甚至可以制作非常丰富的动画。或者，您可以编写自己的插件。

如果您想在不编写代码的情况下尝试一下，Popcorn 有一个图形界面。 [https://popcorn.webmaker.org/](https://popcorn.webmaker.org/)

如果您只想在视频上叠加内容，则可以使用 HTML 和 CSS 完成很多工作。使用画布的主要优点是您可以在动态内容和/或视频本身上运行像素效果。（例如，[Seriously.js](http://seriouslyjs.org)）。

使用画布还有另一个奇怪的原因，那就是 HTML/CSS 内容看起来比视频更干净，因为视频是压缩的并且通常是缩放的，而 HTML 内容不是。如果你想让动态内容看起来像视频的一部分，你可以在画布中生成它并缩放、模糊或以其他方式降级它。

# c++ - query.evaluteTo 适用于 QStringList 但不适用于 xml 中的特定项目

> ID：14160391
> 
> 赞同：1
> 
> 时间：2013-01-04T15:53:32.053
> 
> 标签：c++, qt, xml-parsing

我尝试在 xml 中为每个产品获取“报价”。

结构看起来像这样

```
<response>
 <results>
  <products>
   <product>
     <offers>
       <offer>
       <offer>//HERE IS A PROBLEM
   <product>
     <offers>
       <offer>
       <offer> 
```

报价如下所示：

```
 <offer price_retail="10.99" percent_off="23.02" merchant="101" currency_iso="USD" price_merchant="8.46" image_url_large="" description="Description " name="111 Musician's Gear T" id="2822961" url="http://specificlink.com"/> 
```

问题是我可以将所有值检索到 QStringList 但我不能这样做来分隔变量，例如 `@price_retail/string()`

我将发布我的代码：

```
 QXmlQuery queryOffers;
    QXmlQuery query1;
    query1.bindVariable("mySearch", &searchXml);
    query1.setQuery("declare variable $mySearch external;doc($mySearch)/response/results/products/product");

     QXmlResultItems items;
     query1.evaluateTo(&items);
     QXmlItem item( items.next() );

     while( !item.isNull() )
         {
             query1.setFocus(item);

             QString prodDesc;
             query1.setQuery("@description/string()");
             query1.evaluateTo(&prodDesc);

             QXmlResultItems itemsOffers;
             query1.setQuery("offers/offer");
             query1.evaluateTo(&itemsOffers);

             QXmlItem offer( itemsOffers.next() );

             while(!offer.isNull()){

                 QString offerUrl;
                 QString offerList;

                 queryOffers.setFocus(offer);

                   queryOffers.setQuery("@*/string()");
                   queryOffers.evaluateTo(&offerList);
                   qDebug()<<offerList;  //This returns all values
                   queryOffers.setQuery("@url/string()");
                   queryOffers.evaluateTo(&offerUrl);
                   qDebug()<<offerUrl; //this returns empty

                 offer = itemsOffers.next();
             }

             item = items.next();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-10T17:51:46.297

由于我有同样的问题，我在寻找解决方案时发现了这篇文章。这对我有用（QT5 Archlinux+KDE）

只需添加`QXmlNamePool`一个`QXmlQuery`：

```
 QXmlNamePool  m_namePool;
    QXmlQuery queryOffers(m_namePool);
    QXmlQuery query1(m_namePool); 
```

似乎内部查询（从 QXmlItem 获取其 fokus）没有正确设置其名称，因此无法识别属性名称（在本例中为 @url）。

这可能与 Qt-Doc 中的一点有关，`QXmlNamePool`当您想稍后在程序中比较名称时，您应该保留这一点。

# c - 如何使用 C 将具有 2 个变量的 IF 语句转换为 switch 函数？

> ID：14160392
> 
> 赞同：0
> 
> 时间：2013-01-04T15:53:33.063
> 
> 标签：c, variables, if-statement, switch-statement

我有一个 IF 语句，我想将其转换为一个 Switch 语句......但它有 2 个变量！可以在C上做到吗？

这是一个石头、纸、剪刀的游戏：

（R 代表石头，P 代表纸，S 代表剪刀）

```
 char play1, play2;

     printf("\nPlayer 1 - Enter your Play: ");
     scanf ("%c", &play1);
     printf("\nPlayer 2 - Enter your Play: ");
     scanf (" %c", &play2); 

     if (play1 == 'R' && play2 == 'P') {
       printf ("Paper wins!"); }
      else if (play1 == 'R' && play2 == 'S') {
        printf ("Rock wins!");}
      else if (play1 == 'R' && play2 == 'R) {
        printf ("Draw!");} 
```

我必须为其他选项这样做，所以最好使用 switch！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T17:38:19.907

```
#include <stdio.h>

#define SWITCH(a, b) char _a = a; char _b = b; if (0)
#define CASE(a, b) } else if ((a == _a) && (b == _b)) {

int main(void)
{
    char play1, play2;

    printf("\nPlayer 1 - Enter your Play:");
    scanf ("%c", &play1);
    getchar();
    printf("\nPlayer 2 - Enter your Play:");
    scanf ("%c", &play2);
    getchar();

    SWITCH(play1, play2) {
        CASE('R','P') printf ("Paper wins!");
        CASE('R','S') printf ("Rock wins!");
        CASE('R','R') printf ("Draw!");
    }
    return 0;
} 
```

这是个笑话：P

编辑：“：”的案例支持

```
#define PASTE(a, b) a##b
#define LABEL(a, b) PASTE(a, b)
#define SWITCH(a, b) char _a = a; char _b = b; if (0)
#define CASE(a, b) } else if ((a == _a) && (b == _b)) { LABEL(LBL, __LINE__) 
```

但不适用于：

```
CASE('R','R'): printf ("Draw a!"); CASE('S','R'): printf ("Draw!"); 
```

同一行中的两个案例

使用解决：

```
#define SWITCH(a, b) char _a = a; char _b = b; if (0)
#define CASE(a, b) } else if ((a == _a) && (b == _b)) {switch(1) case 1 
```

希望没有人使用它:)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-04T15:57:54.577

一般来说，答案是“否”：`switch`语句使用单个变量。但是，在某些情况下，您可以进行转换。例如，如果您有两个变量，`a`and `b`，其中`a`可以是 0、1 或 2，并且`b`可以是`0, 1, 2, or 3`，您可以进行如下切换：

```
switch (a*10+b) {
    case  0: break; // a == 0, b == 0
    case 10: break; // a == 1, b == 0
    case 20: break; // a == 2, b == 0
    case  1: break; // a == 0, b == 1
    case 11: break; // a == 1, b == 1
    case 21: break; // a == 2, b == 1
    case  2: break; // a == 0, b == 2
    case 12: break; // a == 1, b == 2
    case 22: break; // a == 2, b == 2
    case  3: break; // a == 0, b == 3
    case 13: break; // a == 1, b == 3
    case 23: break; // a == 2, b == 3
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T16:25:13.970

```
#include <stdio.h>
#include <stdlib.h>

#define PAIR(X,Y) (X<<8)|Y

int main()
{
    char play1, play2;

    printf("\nPlayer 1 - Enter your Play: ");
    scanf ("%c", &play1);
    printf("\nPlayer 2 - Enter your play: ");
    scanf (" %c", &play2); 

    switch (PAIR(play1, play2)) {
        case PAIR('R','P'):
            printf ("Paper wins!\n");
            break;
        case PAIR('R','S'):
            printf ("Rock wins!\n");
            break;
        case PAIR('R','R'):
            printf ("Draw!\n");
            break;
        default: //any thing else
            printf ("Default!\n");
            break;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T21:43:02.080

我会推荐多字符字符常量以简洁的方式实现这一点：

```
switch ((play1 << 8) + play2) {

  case 'RP':

    printf ("Paper wins!");
    break;

  case 'RS':

    printf ("Rock wins!");
    break;

  case 'RR':

    printf ("Draw!");
    break;
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T22:35:30.990

由于`switch`对单个变量进行操作，因此您必须能够以某种方式将多个输入组合成一个值。给定 ASCII 字符“R”、“P”和“S”的数值，将这两个字符加在一起将为每个配对提供唯一的总和。但是，生成的代码可能比等效的`if`树更难阅读。一般来说，这通常不是一个好的选择，因为当[添加新的输入选项](https://en.wikipedia.org/wiki/Rock-paper-scissors-lizard-Spock)并且您的“组合”操作（例如唯一总和）的基本假设不再成立时，您的代码将很容易中断。 `switch`随着可能输入值数量的增加，它也会变得笨拙。由于您需要一个`case`适合所有可能的组合，因此您的`switch`当与少数输入选项一起使用时，会变得很大并且难以维护。

一个`switch`块实际上会导致比`if`在这种特殊情况下使用更多的代码。使用`if`使您能够一次处理多个案例。例如，您不需要检查平局的三个不同版本的代码。`switch`您还可以使用表格而不是或来查找答案`if`。这是一个结合了这些方法的示例：

```
// Table of outcomes.  The option in the second
// column wins over the option in the first column.
char matchup[3][2] = {
  {'P', 'S'}, // paper is cut and destroyed
  {'S', 'R'}, // scissors are smashed and destroyed
  {'R', 'P'}, // rock is ... covered up?
};

void announce_winner(char player1, char player2)
{
  int i;

  if (player1 == player2) {
    printf("Draw\n");
    return;
  }

  for (i=0; i<3; ++i) {
    if (player1 == matchup[i][0])
      printf("%c wins\n", (player2 == matchup[i][1]) ? player2 : player1);
  }
} 
```

表格方法的最大好处是您的代码与数据是分开的。如果游戏规则发生变化，或者如果有人正在学习游戏并想知道谁在什么情况下获胜，那么表格变得比挖掘大量代码更加用户友好。`switch`块本质上是查找表和处理代码混合在一起，对于复杂的情况，它会很快变得丑陋。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-04T16:14:28.357

您可以`switch`为每个表达式嵌套语句，例如

```
switch(a)
{
  case 'A':
    switch(b)
    {
      case 0: // do something with A0
        break;
      case 1: // do something with A1
        break;
      ...
    }
    break;

  case 'B':
    switch(b)
    {
      case 0: // do something with B0
        break;
      ...
    }
    break;
  ...
} 
```

如您所见，这有可能很快变得非常丑陋。如果您必须基于值的组合进行分支，那么您最好保留当前结构。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-04T17:49:31.793

过于聪明的解决方案：

```
enum Play { Rock = 0, Paper = 1, Scissors = 2 };
enum Outcome { Tie = 0, P1Win = 1, P2Win = 2 };

enum Play parseMove(char input) {
    switch (input) {
        case 'R': return Rock;
        case 'P': return Paper;
        case 'S': return Scissors;
        default: /* invalid input */;
    }
}

enum Outcome gameResult(enum Play p1, enum Play p2) {
    return (3 + p1 - p2)%3;
}

...

switch(gameResult(parseMove(play1), parseMove(play2))) {
    case Tie: printf("Tie!\n");
    case P1Win: printf("Player 1 wins!\n");
    case P2Win: printf("Player 2 wins!\n");
} 
```

# jquery - 保存 jQuery UI 选项卡的状态

> ID：14160394
> 
> 赞同：1
> 
> 时间：2013-01-04T15:53:39.757
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

我正在使用 jQuery UI 1.9，并且我已经实现了选项卡小部件，几乎与演示页面上的详细信息一样。PHP 动态提供选项卡内的数据。

```
<script>

$(function()
    {
        $( "#tabs" ).tabs(
            {
                collapsible: true                   
            });
    });

</script>

<div id="tabs">

    <ul>
        <li><a href="#holdings">Holdings</a></li>
        <li><a href="#personal">Personal</a></li>
        <li><a href="#account">Account</a></li>
    </ul>

    <div id="holdings">
        blah blah blah
    </div>

    <div id="personal">
        blah blah blah
    </div>

    <div id="account">
        blah blah blah
    </div>

</div> 
```

我的问题是——如何保存标签的状态？因此，如果我正在查看一个客户端，并且打开“个人”选项卡，我如何加载下一个客户端并自动显示相同的选项卡？

我浏览了网络，以前的答案指向使用 cookie 选项。失败的测试和一些进一步的研究表明此功能在 1.9 中已被弃用，所以我不确定是否还有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-16T05:44:39.170

似乎 jQuery UI 通过最新的实现摆脱了维护状态。

以前，使用 jQuery 选项卡在页面加载时保持状态非常简单。这是使用新代码执行此操作的一种可能方法。它仍然很容易，只是有点不同。

```
$("#tabs").tabs({
    activate: function (e, ui) { 

    $.cookie('selected-tab', ui.newTab.index(), { path: '/' }); 

}, 
   active: $.cookie('selected-tab')  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:12:25.680

这是我将如何实现会话跟踪变量......

```
$(function()
    {
        $( "#tabs" ).tabs(
            {
               **create: function( event, ui ) {
                    //use the create method to see if a 'client-tab-index' session 
                    //variable is set.  if so, use it to open the needed tab. if not
                    // do nothing.
                },**
                collapsible: true  ,
                **activate: function( event, ui ) {
                      //use the activate method to store the current active tab
                      //to a 'client-tab-index' session variable.  the current tab 
                      //index value is referenced with ui.newTab
                }**
            });
    });

</script>

<div id="tabs">

    <ul>
        <li><a href="#holdings">Holdings</a></li>
        <li><a href="#personal">Personal</a></li>
        <li><a href="#account">Account</a></li>
    </ul>

    <div id="holdings">
        blah blah blah
    </div>

    <div id="personal">
        blah blah blah
    </div>

    <div id="account">
        blah blah blah
    </div>

</div> 
```

我只是为可能的解决方案提供一些逻辑。它应该可以帮助您入门。

# python - Python MySQLdb 将列表数据转换为来自 SELECT 的 CSV 输出

> ID：14160397
> 
> 赞同：0
> 
> 时间：2013-01-04T15:53:45.607
> 
> 标签：python, mysql, select

我正在努力解决以下（相对简单的）问题。我在 MySQLdb 中使用 SELECT 查询，它返回以下数据：

```
select * from extension_recording where filename = "20091030_135711-out.wav";
+----+--------------+------+-------------------------+----------+--------+--------------------+---------------------------+--------+-----------------+------+-------+
| id | extension_id | flow | filename                | filesize | unread | cr_date             | callerid                  | length | callid          | info | party |
+----+--------------+------+-------------------------+----------+--------+---------------------+---------------------------+--------+-----------------+------+-------+
|  1 |           41 | out  | 20091030_135711-out.wav |   264684 | 1      | 2009-10-30 13:57:31 | Some user <01273123456> |     20 | 1256911031.5482 |      | NULL  |
+----+--------------+------+-------------------------+----------+--------+---------------------+---------------------------+--------+-----------------+------+-------+ 
```

我正在尝试通过以下方式使用它：

```
cur.execute ("SELECT * FROM extension_recording WHERE filename = %s;", (file))
csv_result = cur.fetchone()
csv_list.append ([csv_result]) 
```

这会产生一个包含 Python 数据类型的列表：

```
print csv_list
(1L, 41L, 'out', '20091030_135711-out.wav', 264684L, '1', datetime.datetime(2009, 10, 30, 13, 57, 31), 'Some user <01273123456>', 20L, '1256911031.5482', '', None) 
```

我需要将数据作为 MySQL 数据类型输出到 CSV，因此我需要适当地转换每个字段，即将 id 和 extension_id 字段转换为整数而不是长整数，并将日期转换为字符串。这一切的重点是我最终得到了一个类似这样的 CSV 文件：

```
1,41,'out','20091030_135711-out.wav',264684,'1','2009-10-30 13:57:31','Some user <01273123456>',20,'1256911031.5482','',None 
```

我可以看到我可能需要遍历 csv_result 但我无法终生了解如何为每种数据类型做不同的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:04:45.590

您可以使用该`csv`模块在事后自动转换回字符串，或者您可以`Connection`使用自定义值初始化对象`conv`以覆盖默认类型转换字典，从而为您提供从 MySQL 返回的原始字符串的所有内容。只要意识到这意味着您必须手动进行所有转换，或者如果您希望在代码中的任何其他点进行自动类型转换，则必须对同一个数据库进行第二次自动转换连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:44:10.577

为什么这些价值观很特别？`MySQLdb`会自动转换成 python 类型（`int`变成`long`、`DATE`变成`datetime`等）。只是[csv](http://docs.python.org/2/library/csv.html)元组返回：

```
import csv  
with open('file.csv', 'wb') as csvfile:
    csv_ = csv.writer(csvfile)
    csv_.writerow(csv_list) 
```

这可以满足您的一切需求。
（如果您需要引号，请添加`quotechar="'", quoting = csv.CONSTANTHERE`关键字）

文件内容：

```
1,41,out,20091030_135711-out.wav,264684,1,2009-10-30 13:57:31,Some user <01273123456>,20,1256911031.5482,, 
```

（注意：`None`使用这个是一个空字符串。）

# graphviz - 固定时间序列图的位置

> ID：14160399
> 
> 赞同：0
> 
> 时间：2013-01-04T15:54:06.700
> 
> 标签：graphviz

我有一个（时间）序列的有向循环图。每个时间步都只对过去的一个进行一些修改。有没有办法修复（可能不完全）音符的位置，使变化变得更加明显。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:33:19.190

我同样需要修复部分节点（图是双叶的）。我需要从一个叶修复节点。我尝试使用graphviz，但后来意识到它没有这样的选项。这就是为什么我在 Matlab 上为双叶图编写了自己的代码。可能您将不得不应对同样的情况。

# hibernate - 合并具有唯一约束的实体

> ID：14160402
> 
> 赞同：3
> 
> 时间：2013-01-04T15:54:15.170
> 
> 标签：hibernate, jakarta-ee, jpa, jpa-2.0, java-ee-6

我有一个类似于以下的实体：

```
@Entity
@Table( name="marchi", uniqueConstraints=@UniqueConstraint(columnNames="codice") )
public class Marchio implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "id")
    private Long id;

    private String codice;

    private String nome;
//...
} 
```

我用*codice* = 123创建了一个*Marchio*，然后我坚持它。好的！

 *然后我通过查询从数据库中检索它，用某些东西编辑“nome”属性并调用*merge()*。好的！

然后我用*codice = 123 创建另一个**Marchio*。我在 nome 中放了一些东西并调用*merge()*。

 **结果是：

> ConstraintViolationException：键“代码”的重复条目“123”

很好，其实我可以使用第一种方式：查询、编辑属性*名*和合并。

考虑一下我不仅有“名字”。我有 35 个不同的属性，所以我不想：

```
Marchio m = em.findCodice("123");
m.setP1("1");
m.setP2("2");
...
m.setPN("N");
em.merge(m); 
```

我能怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T08:16:55.113

如果我理解得很好，您已经有了一个具有更新值的分离对象，并且您不想从数据库中检索相应的对象并调用许多 set 方法对其进行更新。完成此操作的唯一方法是删除旧对象，然后保留分离的新对象：

```
em.remove(oldobj);
em.persist(newobj); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-23T11:38:48.570

在spring数据中，您可以简单地

```
myRepository.save(entity) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-16T09:43:25.007

merge 方法的主要目的是使用分离实体实例中的新字段值更新**持久实体**实例。首先，我们需要从持久化上下文中获取一个持久化实体实例，并用这个分离实例的新值更新它的字段。因此，merge 方法正是这样做的：通过从传递的对象中获取的 id 找到一个实体实例（从持久性上下文中检索现有的实体实例，或者从数据库中加载一个新的实例）将字段从传递的对象复制到这个实例返回一个新更新的实例。当你这样做时：*“然后我用 codice = 123 创建另一个马尔乔”*你会创建一个处于**瞬态的新马尔乔**（没有身份证）。新马尔乔与数据库中的马尔乔不同。对于处于瞬态操作 MER​​GE 的新 Marchio，请执行 sql 插入。对于处于持久状态操作 MER​​GE 的老 Marchio 执行 sql 更新。对于 Insert 你有一个唯一的约束。这是数据库中的异常。首先，从基础（ find() 或 getReference() ）中获取 Marchio。然后更改其中的字段（Persistent Marchio），然后调用 MERGE。所有这些都应该是一个工作单元（一个事务）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-04T16:36:56.313

试试这个：

```
@Table(name = "marchi", uniqueConstraints={@UniqueConstraint(columnNames="codice"), @UniqueConstraint(columnNames="nome")})

I believe with the above you can have:

codice nome
123     A
123     B
123     C 
```***

# objective-c - 获取整页 WebView 的框架减去 UINavigationBar

> ID：14160403
> 
> 赞同：0
> 
> 时间：2013-01-04T15:54:16.327
> 
> 标签：objective-c, ios, uiview

如何获得完整页面 web 视图减去导航栏的正确框架。

我试过这个

```
CGRect screenFrame = [[UIScreen mainScreen]bounds];
webView = [[UIWebView alloc]initWithFrame:CGRectMake(0, 0, screenFrame.size.width, screenFrame.size.height-self.navigationController.navigationBar.bounds.size.height)]; 
```

但是当我向下滚动时，滚动条会被切断。看起来 webView 的框架高度仍然太大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:58:02.807

假设您的导航栏是从导航控制器添加的，您可以使用：

```
self.view.bounds.size.height 
```

但是，如果您自己在 IB 或其他方式中添加它，请使用：

```
self.view.bounds.size.height - myNavBar.bounds.size.height 
```

...

```
webView = [[UIWebView alloc]initWithFrame:CGRectMake(0, 0, self.view.bounds.size.width, self.view.bounds.size.height)]; 
```

# ldap - 具有新 OLC (cn=config) 配置的在线 LDAP 书籍，例如 zytrax.com

> ID：14160406
> 
> 赞同：0
> 
> 时间：2013-01-04T15:54:25.983
> 
> 标签：ldap, openldap

是否有类似于[zytrax ldap book](http://www.zytrax.com/books/ldap)的优秀在线书籍或博客文章，他们使用新的在线配置 OLC (cn=config)？

我对 ldap 比较陌生，正在寻找一个好的参考和快速入门。我想在 debian 系统上为 sogo、exim、dovecot 驱动的邮件服务器配置 OpenLDAP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:17:16.587

看起来我会被听到的。这是一篇关于此的优秀文章：[http ://www.rjsystems.nl/en/2100-d6-openldap-provider.php](http://www.rjsystems.nl/en/2100-d6-openldap-provider.php)

# c++ - 围绕世界 0,0,0 而不是对象中心旋转

> ID：14160407
> 
> 赞同：1
> 
> 时间：2013-01-04T15:54:27.120
> 
> 标签：c++, opengl, rotation, scene

我的对象围绕 0,0,0 旋转，但我希望它在 Y 轴上围绕自身旋转。我知道还有其他情况

> [在OpenGL中围绕自身旋转对象](https://stackoverflow.com/questions/13554075/rotating-object-around-itself-in-opengl)
> 
> [glRotatef 没有按预期旋转](https://stackoverflow.com/questions/8119157/glrotatef-not-rotating-as-expected)

但我在旋转之前没有任何翻译，但它仍然不起作用。

我的**编辑**代码：

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();

glRotatef(_angle,0.0f,1.0f,0.0f);
glPushMatrix();

glTranslatef(0.0f,0.0f,-6.0f);
glBegin(GL_TRIANGLES);
    //Front
    glVertex3f(-1.0f, -1.0f, 1.0f);
    glVertex3f(-1.0f, 1.0f, 1.0f);
    glVertex3f(1.0f, 1.0f, 1.0f);

    glVertex3f(-1.0f, -1.0f, 1.0f);
    glVertex3f(1.0f, -1.0f, 1.0f);
    glVertex3f(1.0f, 1.0f, 1.0f);

    //Back
    glVertex3f(-1.0f, -1.0f, -1.0f);
    glVertex3f(-1.0f, 1.0f, -1.0f);
    glVertex3f(1.0f, 1.0f, -1.0f);

    glVertex3f(-1.0f, -1.0f, -1.0f);
    glVertex3f(1.0f, -1.0f, -1.0f);
    glVertex3f(1.0f, 1.0f, -1.0f);

    //Right
    glVertex3f(1.0f, 1.0f, 1.0f);
    glVertex3f(1.0f, -1.0f, 1.0f);
    glVertex3f(1.0f, -1.0f, -1.0f);

    glVertex3f(1.0f, 1.0f, 1.0f);
    glVertex3f(1.0f, 1.0f, -1.0f);
    glVertex3f(1.0f, -1.0f, 1.0f);

    //Left
    glVertex3f(-1.0f, 1.0f, 1.0f);
    glVertex3f(-1.0f, -1.0f, 1.0f);
    glVertex3f(-1.0f, -1.0f, -1.0f);

    glVertex3f(-1.0f, 1.0f, 1.0f);
    glVertex3f(-1.0f, 1.0f, -1.0f);
    glVertex3f(-1.0f, -1.0f, -1.0f);

    //Top
    glVertex3f(-1.0f, 1.0f, -1.0f);
    glVertex3f(-1.0f, 1.0f, 1.0f);
    glVertex3f(1.0f, 1.0f, 1.0f);

    glVertex3f(-1.0f, 1.0f, -1.0f);
    glVertex3f(1.0f, 1.0f, -1.0f);
    glVertex3f(1.0f, 1.0f, 1.0f);

    //Bottom
    glVertex3f(-1.0f, -1.0f, -1.0f);
    glVertex3f(-1.0f, -1.0f, 1.0f);
    glVertex3f(1.0f, -1.0f, 1.0f);

    glVertex3f(-1.0f, -1.0f, -1.0f);
    glVertex3f(1.0f, -1.0f, -1.0f);
    glVertex3f(1.0f, -1.0f, 1.0f);
glEnd();
glPopMatrix();

glutSwapBuffers(); 
```

我的原始代码：

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

glMatrixMode(GL_MODELVIEW);

glLoadIdentity();

glRotatef(angle,0.0f,1.0f,0.0f);  //The angle is a float that slowly increases until it reaches 360 Degrees, and then resets to 0.0
    /* This is a Cube */
glBegin(GL_TRIANGLES);
    //Front
    glVertex3f(-1.0f, -1.0f, -5.0f);
    glVertex3f(-1.0f, 1.0f, -5.0f);
    glVertex3f(1.0f, 1.0f, -5.0f);

    glVertex3f(-1.0f, -1.0f, -5.0f);
    glVertex3f(1.0f, -1.0f, -5.0f);
    glVertex3f(1.0f, 1.0f, -5.0f);

    //Back
    glVertex3f(-1.0f, -1.0f, -7.0f);
    glVertex3f(-1.0f, 1.0f, -7.0f);
    glVertex3f(1.0f, 1.0f, -7.0f);

    glVertex3f(-1.0f, -1.0f, -7.0f);
    glVertex3f(1.0f, -1.0f, -7.0f);
    glVertex3f(1.0f, 1.0f, -7.0f);

    //Right
    glVertex3f(1.0f, 1.0f, -5.0f);
    glVertex3f(1.0f, -1.0f, -5.0f);
    glVertex3f(1.0f, -1.0f, -7.0f);

    glVertex3f(1.0f, 1.0f, -5.0f);
    glVertex3f(1.0f, 1.0f, -7.0f);
    glVertex3f(1.0f, -1.0f, -5.0f);

    //Left
    glVertex3f(-1.0f, 1.0f, -5.0f);
    glVertex3f(-1.0f, -1.0f, -5.0f);
    glVertex3f(-1.0f, -1.0f, -7.0f);

    glVertex3f(-1.0f, 1.0f, -5.0f);
    glVertex3f(-1.0f, 1.0f, -7.0f);
    glVertex3f(-1.0f, -1.0f, -7.0f);

    //Top
    glVertex3f(-1.0f, 1.0f, -7.0f);
    glVertex3f(-1.0f, 1.0f, -5.0f);
    glVertex3f(1.0f, 1.0f, -5.0f);

    glVertex3f(-1.0f, 1.0f, -7.0f);
    glVertex3f(1.0f, 1.0f, -7.0f);
    glVertex3f(1.0f, 1.0f, -5.0f);

    //Bottom
    glVertex3f(-1.0f, -1.0f, -7.0f);
    glVertex3f(-1.0f, -1.0f, -5.0f);
    glVertex3f(1.0f, -1.0f, -5.0f);

    glVertex3f(-1.0f, -1.0f, -7.0f);
    glVertex3f(1.0f, -1.0f, -7.0f);
    glVertex3f(1.0f, -1.0f, -5.0f);
glEnd();

glutSwapBuffers(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:01:19.120

确保对象的中心位于其局部坐标系的原点。

对于您的立方体，您的 X/Y 似乎居中，但您的 Z 中心看起来在 -6。

# c++ - MPI_Isend 到非监听进程

> ID：14160410
> 
> 赞同：0
> 
> 时间：2013-01-04T15:54:36.607
> 
> 标签：c++, mpi

在我的程序中的某个时刻，我`MPI_Isend`用来宣布某个事件的所有其他进程，但其中一些没有在听，这很好。我已经测试了这种情况，它似乎完成了。

如果我这样做可以吗？我是否应该保留每个 Isend 的请求参数并在一定时间后取消它，如果它没有被交付？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:51:33.337

如果不是为了可伸缩性，您可能应该保留和取消不会完成的请求，那么只是一般原则。但理想情况下，您甚至不应该发布您知道不会收到的发送。如果您无法分辨谁在听谁在听，您可能需要重新考虑您的设计。

# python - Jinja2：TemplateSyntaxError：遇到未知标签

> ID：14160414
> 
> 赞同：19
> 
> 时间：2013-01-04T15:54:55.327
> 
> 标签：python, highcharts, flask, jinja2

“我正在使用 Flask、Jinja2、higHighcharts”

示例（Python/Flask）：

```
@app.route("/column/")
定义列（）：
    data=[{"data": [49.9, 54.4], "name": "东京"}, {"data": [42, 30.4], "name": "AC"}]
    return render_template('column.html', data=data)
```

示例（html，Jinja2，highcharts），我的代码错误，如何更改？谢谢！

```
Errormsg:jinja2.exceptions.TemplateSyntaxError
TemplateSyntaxError: Encountered unknown tag 'data'. 
```

我正在使用 Highcharts-2.3.5\examples\column-basic\index.html

我改变了它但是错误，烧瓶日志：“GET /column/ HTTP/1.1”200

```
$(function () {
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'column'
            },
            title: {
                text: 'Monthly Average Rainfall'
            },
            subtitle: {
                text: 'Source: WorldClimate.com'
            },
            xAxis: {
                categories: [
                    'Jan',
                    'Feb'
                ]
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'Rainfall (mm)'
                }
            },
            legend: {
                layout: 'vertical',
                backgroundColor: '#FFFFFF',
                align: 'left',
                verticalAlign: 'top',
                x: 100,
                y: 70,
                floating: true,
                shadow: true
            },
            tooltip: {
                formatter: function() {
                    return ''+
                        this.x +': '+ this.y +' mm';
                }
            },
            plotOptions: {
                column: {
                    pointPadding: 0.2,
                    borderWidth: 0
                }
            },
                series: {{ data }} // i change
        });
    });

}); 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-04T17:15:50.657

代替

```
series: {% data %} 
```

和

```
series: {{ data }} 
```

`{{ variable }}`当您想要使用从 python 脚本传递到模板的变量时使用。

# django - Django：计数项目并按父类别和子类别排序

> ID：14160416
> 
> 赞同：1
> 
> 时间：2013-01-04T15:55:13.560
> 
> 标签：django

我希望有人能帮帮忙。我想实现类似于您在分类网站或博客上看到的内容，其中您有一个带有类别（带有子类别的父类别）的侧边栏，以及该父类别和子类别中有多少分类广告或博客文章的计数。看起来像这样：

![侧边栏：显示父类别和子类别中所有广告的计数](../Images/6eec536524fc017cb4313203c9f91cd8.png)

这是我的模型

```
class Category(models.Model):
    name = models.CharField(max_length=120, unique=True)
    slug = models.SlugField(null=False, editable=False)
    parent = models.ForeignKey('self', null=True, blank=True, related_name='child_set')

class Classified(models.Model):
    category = models.ForeignKey(Category, related_name='categories')
    title = models.CharField(max_length=255, null=False, unique=True, blank=False)
    price = models.CharField(max_length=10, null=False, blank=False, default=0)
    description = models.TextField(null=False, blank=True, editable=True)
    user = models.ForeignKey(User)
    sold = models.BooleanField(blank=True, default=False)
    slug = models.SlugField(max_length=255, null=False, editable=False) 
```

这是我的模板标签：

```
class Categories(template.Node):
    def render(self, context):
        categories = Category.objects.filter(parent=None).order_by('parent')
        context['categories'] = categories
        return '' 
```

这是我用于获取计数的模板过滤器：

```
# Parent Category Count
@register.filter
def parent_category_count(value):
    count = Classified.objects.select_related().filter(category__in=Category.objects.filter(parent=value)).exclude(sold=True).count()
    return count

# Child Category Count
@register.filter
def child_category_count(value):
    count = Classified.objects.select_related().filter(category=value).exclude(sold=True).count()
    return count 
```

这是我的模板：

```
{% regroup categories by parent as cat_list %}

{% for parent in cat_list %}
    <ul class="category">
        {% for item in parent.list %}
            <li class="parent-category-item">
                {% block parent-category %}
                    {% if item|parent_category_count %}
                        <span class="category-count">{{ item|parent_category_count }}</span>
                    {% else %}
                    {% endif %}
                <a {% if item.name == category %}class="parent selected"{% else %}class="parent"{% endif %} href="{% url classifieds_home %}{{ item.slug }}/">{{ item.name }}</a>
                {% endblock %}
            </li>
            <ul {% if item.name == category %}class="child-categories"{% else %}class="child-categories hide"{% endif %}>
                {% for i in item.child_set.all %}
                    <li class="child-category-item">
                        {% block category_child %}
                            {% if i|child_category_count %}
                                <span class="category-count">{{ i|child_category_count }}</span>
                            {% else %}
                            {% endif %}
                        <a {% if i.name == child_category %}class="child selected"{% else %}class="child"{% endif %} href="{% url classifieds_home %}{{ item.slug }}/{{ i.slug }}/">{{ i.name }}</a>
                        {% endblock %}
                    </li>
                {% endfor %}
            </ul>
        {% endfor %}
    </ul>
{% endfor %} 
```

我已经厌倦了使用模板标签，它适用于除计数之外的所有内容。我厌倦了使用自定义模板过滤器来获取每个类别的计数，但这需要很长时间（141.91 毫秒内有 277 个查询）。

所以我知道过滤器计数导致数据库被多次命中，这不好。如果子计数会随着父计数快速加载而起作用，那么一切都会起作用，但我猜这与父类别较少有关。

我也厌倦了在 Django 中使用 raw()、extra() 和 annotate() 但无济于事，除非我做得不对。我不确定目前最好的方法是什么，但我确信以前有人这样做过，我不必重新发明轮子。

# jenkins - Jenkins参数化构建页面无法显示

> ID：14160417
> 
> 赞同：1
> 
> 时间：2013-01-04T15:55:16.087
> 
> 标签：jenkins

我们有一个基本的 Jenkins 安装。当我创建参数化构建然后尝试“立即构建”选项时，我得到的只是一个页面无法显示。这一切都是通过使用 Jenkins GUI 完成的，没什么特别的。如果我创建另一个作业并使用参数调用参数化作业，它工作正常。

有什么推荐吗？

在 WAS 8.5 服务器上运行的 Jenkins Ver 1.496

![参数化构建屏幕截图](../Images/32955bd597deb995bf22dc8228d8a71f.png)

**编辑 01/05/2013**

认为这可能是 IE 和我今天在 Google Chrome 中尝试的其他浏览器之间的问题，至少我得到了更多信息来展示。

![铬错误](../Images/8f503285be7b54f2d9b80b40e9857a50.png)

# linux - 为什么我的两个线程不交错运行？

> ID：14160418
> 
> 赞同：2
> 
> 时间：2013-01-04T15:55:15.747
> 
> 标签：linux, multithreading, pthreads, multicore

我今天写了一个pthread代码：

```
#include <pthread.h>
#include <stdio.h>

pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;

void *thread1(void *arg)
{
    while (1) {
        pthread_mutex_lock(&mutex);
        sleep(1);
        printf("thread1...\n");
        pthread_mutex_unlock(&mutex);
    }
}

void *thread2(void *arg)
{
    while (1) {
        pthread_mutex_lock(&mutex);
        sleep(1);
        printf("thread2...\n");
        pthread_mutex_unlock(&mutex);
    }
}

int main()
{
    pthread_t tid1, tid2;
    pthread_create(&tid1, NULL, thread1, NULL);
    pthread_create(&tid2, NULL, thread2, NULL);

    pthread_join(tid1, NULL);
    pthread_join(tid2, NULL);

    return 0;
} 
```

我希望它会像这样运行：

```
thread1...
thread2...
thread1...
thread2... 
```

但实际上它运行：

```
thread1...
thread1...
thread1...
thread1... 
```

thread2 似乎没有运行。因此，我运行此代码超过一小时，thread2 只打印一行。他们为什么不交错运行？

我的环境：

*   Ubuntu 10.04 x86_64
*   Linux ubuntu 2.6.32-36-generic #79-Ubuntu SMP Tue Nov 8 22:29:53 UTC 2011 x86_64 GNU/Linux
*   CPU：Intel Core i7 930（4核8线程）

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:01:18.060

将睡眠移到互斥锁之外，以便释放操作系统进程调度算法来查看其他线程。问题是当你睡觉时，另一个线程可以被安排，但锁被设置了，所以它没有。当线程 1 唤醒时，它会释放锁，但随后会立即循环返回以设置它。线程 2 几乎没有机会进入。它正在挨饿。

# android - 如果addProximityAlert过期为-1，触发后是否会removeProximityAlert？

> ID：14160425
> 
> 赞同：0
> 
> 时间：2013-01-04T15:55:59.487
> 
> 标签：android, proximity

如果`addProximityAlert`过期为-1，触发后会取消吗？或者`removeProximityAlert`如果你想删除它，你是否需要进入或退出？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T00:43:34.207

我想通了，如果过期是-1，那么它永远不会过期。即使在被触发之后。您将需要使用 removeProximityAlert 将其删除。

# ruby-on-rails - Rails 3.2 自定义路由错误

> ID：14160432
> 
> 赞同：0
> 
> 时间：2013-01-04T15:56:48.543
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes, ruby-on-rails-3.2, custom-routes

在 Rails 3.2.8 站点中，我收到以下错误：

```
Routing Error
No route matches {:controller=>"tasks", :action=>"complete", :list_id=>1, :id=>nil} 
```

在我的路线文件中，我有以下内容：

```
resources :lists do
  resources :tasks
end

match 'lists/:list_id/tasks/:id/complete' => 'tasks#complete', :as => :complete_task 
```

在视图中：

```
<% @list.tasks.each do |task| %>
  <li><%= task.description %> - <%= button_to "Complete", 
                                    complete_task_path(@list.id, task.id) %></li>
<% end %> 
```

在做 rake 路线时：

```
complete_task        /lists/:list_id/tasks/:id/complete(.:format) tasks#complete 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T20:42:51.180

此错误可能是因为与 @list 关联的一个或多个任务具有 nil id。最近版本的 Rails 对使用非 nil id 来生成路径非常挑剔。

您得到的错误是试图告诉您出了点问题（您正在为尚未持久化的对象生成路由）。

虽然@eriklinde 的解决方案可能“有效”（可能输出一个缺少 :id 值的无效路径），但它不是一个好的形式。手动构建 url 使以后更新路径变得更加困难，并且可能隐藏了您的应用程序的问题。您*应该*尽可能使用 xxx_path 帮助，就像您在示例中所做的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T12:13:36.973

为什么不直接将其更改为以下内容？

```
<%= button_to "Complete", "/lists/#{@list.id}/tasks/#{task.id}/complete" %> 
```

Rails 魔法旨在节省时间 - 因此它存在 - 但如果需要更多时间来弄清楚如何使用它，那么有时选择不使用该魔法可能是有意义的；）

仅出于调试目的，因为这可能会解决您的原始问题，我将在您现有的标签下方添加以下内容`li`，以观察变量，并确保它们都不是零：

```
<li>List ID: <%=@list.id%>, Task ID: <%=task.id%></li> 
```

# django - 以 empty_form 更改查询集

> ID：14160436
> 
> 赞同：2
> 
> 时间：2013-01-04T15:56:55.167
> 
> 标签：django, django-forms

我有一些课程

```
class person
class organization
class relation
    person = ForeignKey(person)
    organization = ForeignKey(organization)
    what = ForeignKey(...) 
```

我想为一个有表单集的人设置一些关系：

```
InlineFormset = inlineformset_factory(person, relation, form=Form)
Formset = InlineFormset(initial=[...]) 
```

要将表单添加到模板中的表单集，我使用 Formset.empty_form 生成新表单。Formset.forms[0].fields['organization'] 的默认查询集是 Organization.objects.all()

此人不得查看所有组织，因此我想更改 empty_form 的查询集。

我可以为 initial=[...] 制作的所有表单轻松更改此查询集，但是当我尝试更改 Formset.empty_form.fields['organization'].queryset 时，它将不起作用。Django 丢弃 empty_form 的所有更改。

我也尝试以表单集使用的表单更改查询集，但它也无济于事。

如何为 empty_form 设置查询集？谢谢！

# python - 使用 SPARQLWrapper 的 INSERT/DELETE/UPDATE 查询

> ID：14160437
> 
> 赞同：7
> 
> 时间：2013-01-04T15:56:58.713
> 
> 标签：python, sparql, rdflib, sparqlwrapper

虽然我在网上浏览了很多示例，解释了使用 python SPARQLWrapper 使用 SELECT 语句从芝麻三重存储中获取数据，但不确定我们如何使用它在芝麻中插入/删除/更新语句。你们中的任何人都可以在这方面进行指导。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-10T12:54:32.650

SPARQL 查询作为 GET 请求发送，但 UPDATE（如 INSERT、DELETE 等）要求将查询作为 POST 请求发送。只需在 sparql.query() 之前添加以下行

```
sparql.method = 'POST' 
```

此外，更新的 url 与查询不同。更新基于工作台而不是芝麻网址。例如，如果查询 url 是：

```
http://localhost:8080/openrdf-sesame/repositories/test/ 
```

或者

```
http://localhost:8080/openrdf-workbench/repositories/test/query 
```

那么更新网址将是：

```
http://localhost:8080/openrdf-workbench/repositories/test/update 
```

因此，UPDATE/INSERT 请求应如下所示：

```
queryString = "INSERT DATA { GRAPH <http://example.com/> { "b" a "c". } }" 
sparql = SPARQLWrapper("http://localhost:8080/openrdf-workbench/repositories/test/update")

sparql.setQuery(queryString) 
sparql.method = 'POST'
sparql.query() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T07:03:05.230

这在文档中并不是特别清楚，但我*认为*您可以像执行查询一样执行更新语句：

```
queryString = "DELETE WHERE { ?s ?p ?o. }" 
sparql = SPARQLWrapper("http://localhost:8080/openrdf-sesame/repositories/test/statements")

sparql.setQuery(queryString) 
ret = sparql.query() 
```

对于 Sesame，要记住的一件事是更新端点 ( `repositories/<repId>/statements`) 的 URL 与查询端点 ( `repositories/<repId>`) 的 URL 不同。有关详细信息，请参阅[Sesame 协议文档](http://www.openrdf.org/doc/sesame2/system/ch08.html)。

# sql-server - 从存储过程运行exe文件失败，而手动成功

> ID：14160438
> 
> 赞同：1
> 
> 时间：2013-01-04T15:57:02.003
> 
> 标签：sql-server, security, stored-procedures, batch-file

我使用 SQL Server 2008。目前我正在处理一个需要（除其他外）打印文件的存储过程。

问题：我在sp中创建的文本文件需要打印为横向。我使用了一个程序 DOSPrinter.exe，它是一个通用打印机驱动程序，它从命令行向（默认）打印机提示添加一个文件。

我使用 xp_cmdshell 来执行此操作。我猜 xp_cmdshell 有足够的权限。我用它来执行一些文件复制操作，在我为使用的目录设置安全性之后，它可以完美地工作。

我给了 DOSPrinter 和打印设备一样的权限。

但是，当在命令窗口中手动键入命令 (C:\temp\DOSPrinter "C:\temp\test.txt") 时，文件会出现在打印提示中。当我将相同的命令放入 bat 文件并从 cmd 窗口手动调用 bat 文件时，该文件将发送到打印提示。

当我尝试将命令放在存储过程中时：

```
 SET @bcpCommand = 'C:\temp\DOSPrinter.exe C:\temp\test.txt'
    EXEC master..xp_cmdshell @bcpCommand 
```

该文件未发送到打印提示。如果我尝试从 sp 调用 bat 文件，打印提示中也没有文件。我有点绝望

也许有人可以帮我给我一些关于如何进行的想法？

谢谢，

jan_solo

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:00:25.370

我有一个周末来考虑它，答案实际上比我预期的要简单......

关键是通用打印机驱动程序将文本文档发送到**默认**打印机，正如我所指出的。XP_cmdshell 在与我登录时不同的用户下执行。

我唯一要做的就是在打印文件之前用 XP_cmdshell 添加一个默认打印机：

```
 SET @bcpCommand = 'rundll32 printui.dll,PrintUIEntry /y /q /n "My_Printer"'
    EXEC master..xp_cmdshell @bcpCommand

    SET @bcpCommand = 'C:\temp\DOSPrinter.exe C:\temp\test.txt'
    EXEC master..xp_cmdshell @bcpCommand 
```

当我运行存储过程时，文件确实出现在打印提示中。

大家，无论如何都感谢您的答案:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:12:55.123

您是否尝试过在 SSMS 窗口而不是命令窗口中运行命令？我不认为问题在于存储过程本身。我认为问题是 SQL Server 访问可执行文件和/或文件。

现在，一个愚蠢的问题。您是否在运行 SSMS 的同一台计算机上运行 SQL Server？如果没有，问题很简单。该命令在您的本地计算机上，但不在服务器计算机上。

如果您在同一台机器上运行所有程序并且您知道 xp_cmdshell 正在工作，那么问题就会变得更加困难。这可能是权限问题的委托。可能是运行 SQL Server 代理的用户没有查看临时文件的权限。或者可能有其他原因。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T16:00:04.770

确保该功能已启用：

```
exec sp_configure ‘show advanced options’, 1
go
reconfigure
go
exec sp_configure ‘xp_cmdshell’, 1
go
reconfigure
go 
```

如果是，您可以发布命令发送给您的输出吗？如果你尝试跑步会发生什么`dir *.*`？

# ember.js - 可能会误解路由和控制器

> ID：14160440
> 
> 赞同：2
> 
> 时间：2013-01-04T15:57:12.443
> 
> 标签：ember.js

我目前正在与 Ember.js 合作开展一个工作项目 - 尽管我似乎一切正常，因为没有错误，但我只是想重构代码，因为我觉得我可能会遇到这个错误。

对于我的 Ember 应用程序的核心设置，我有以下代码，它允许我为标题和主要部分使用许多模板。主要部分包含一个出口，我可以将我的观点连接到：

```
App.ApplicationView = Em.ContainerView.extend({
    childViews: [ 'headerView', 'mainView' ],
    headerView: Ember.View.create({
        tagName: 'header',
        ariaRole: 'banner',
        templateName: 'header'
    }),
    mainView: Em.ContainerView.create({
        elementId: 'wrapper',
        childViews: [ 'outletView' ],
        outletView: Ember.View.create({
            template: Ember.Handlebars.compile( '{{outlet}}' ),
        })
    })
}); 
```

然后我建立了我的观点。为了这篇文章的目的而剥离 - 并且不包括用户模型，因为这是不言自明的（用户名设置用于测试目的）：

```
App.LoginView = Ember.View.extend({
    templateName: 'log-in',
    tagName: 'section',
    ariaRole: 'main'
});

App.LoginViewController = Ember.ObjectController.extend({
        content: App.User.create({ 'userName' : 'ben' })
}); 
```

然后我有我的路由器：

```
App.Router = Ember.Router.extend({
    root: Ember.Route.extend({
        index: Ember.Route.extend({
            route: '/',
            connectOutlets: function (router, context) {
                router.get('applicationController').connectOutlet('login');
            }
        })
    })
}); 
```

而我的观点：

```
<script type="text/x-handlebars" data-template-name="log-in">
    <h1>Sign In</h1>
    <p>Sign in using the form below.</p>
    <form id="log-in">
        {{view Ember.TextField valueBinding="userName" name="UserName" id="UserName" type="email" placeholder="your.name@domain.com" required="required" }}
        {{view Ember.TextField valueBinding="userPassword" name="UserPassword" id="UserPassword" type="password" required="required" }}
        <input type="submit" value="Sign In" />
    </form>
</script> 
```

我的主要问题是控制器，现在从我在 Ember.js 上阅读的内容来看，这就是*应该*如何设置所有内容，但是使用上面的代码，我的 valueBindings 不起作用。

据我所知，这是因为我的索引路由使用的是 applicationController，而不是我的 loginViewController。因此，如果我将控制器更改为此：

```
App.ApplicationController = Ember.ObjectController.extend({
    user: App.User.create({ 'userName': 'ben' })
}); 
```

然后我可以通过引用`user.userName`fine 来访问我的视图中的对象，但是我的所有视图肯定都需要使用相同的控制器——这对我来说似乎不正确。当然每个视图都应该使用它自己的控制器？

如果我将路由器更改为连接到 loginViewController 而不是 applicationController - 那么应用程序会中断，因为我的 loginView 不包含 {{outlet}} 参数。

```
router.get('loginViewController').connectOutlet('login'); 
```

我错过了什么吗？它把我逼到了墙角，试图让这个完美。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:26:27.787

这是命名约定的问题。尝试将控制器的名称更改为 LoginController 而不是 LoginViewController。

在后台，connectOutlet('login') 将在 App 命名空间中搜索 LoginView 和 LoginController 类。如果找不到控制器，它只会连接视图。因此，在您的版本中，正在连接 LoginView，但 LoginViewController 被忽略了。然后 LoginView 在 ApplicationController 的上下文中呈现，这就是当您尝试将用户属性放在那里时一切正常的原因。

此外，最佳实践是在 connectOutlets 回调中设置控制器内容。这应该有效：

```
App.LoginView = Ember.View.extend({
    templateName: 'log-in',
    tagName: 'section',
    ariaRole: 'main'
});

App.LoginController = Ember.ObjectController.extend({});
App.Router = Ember.Router.extend({
  root: Ember.Route.extend({
    index: Ember.Route.extend({
        route: '/',
        connectOutlets: function (router, context) {
            user = App.User.create({ 'userName' : 'ben' })
            router.get('applicationController').connectOutlet('login', user);
        }
    })
  })
}); 
```

# php - 从 JavaScript 执行 PHP 伪代码的 JSON 块

> ID：14160442
> 
> 赞同：-1
> 
> 时间：2013-01-04T15:57:15.767
> 
> 标签：php, javascript, ajax, json

在我正在开发的插件中，我想提供执行 PHP 伪代码的 JSON 块的功能。我意识到我需要设计一种专门形成 JSON 的方式，以允许我的后端 PHP 解析它并在其中执行伪代码。

这是一个有问题的 JSON 块，在它被发送到服务器之前，它存在于 JavaScript 中：

```
var codeBlock = {
    opts: 
    [
        {
            http: {
                method: "GET",
                header: "Accept-language: en\r\n" +
                        "Cookie: foo=bar\r\n"
            }
        }
    ],
    context: 
    {
        stream_context_create: ['opts']
    },
    contents: 
    {
        file_get_contents: ['http://www.YourDomain.com/', false, 'context']
    },
    html: 
    {
        htmlentities: ['contents']
    }
} 
```

在上面的代码块中，我告诉 PHP 我想调用`file_get_contents`. 为了做到这一点，我需要定义一个名为的选项数组`$opts`，并传递给`stream_context_create`. 然后将返回的结果`stream_context_create`存储在名为 的变量中`$contents`。然后我们将返回的结果存储`file_get_contents`到一个名为 的变量`$contents`中。最后，我们将返回的数据 from`file_get_contents`转换为变量`$html`。

当然，首先我们需要构建一个简单的处理程序，将我们的 JSON 发送到服务器。

最重要的是，我们需要创建一个后端函数来解析我们的结果并发回我们的数据。

问题是，我们如何在开放式上下文中执行此操作（可能会传递任何可能的 PHP 函数调用和代码序列）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:57:15.767

下面是处理这种动态解析和执行 JSON“编码”PHP 的主要功能。本质上，我们解析 JSON 顺序识别变量名称。当我们遇到一个 PHP 对象时，我们就知道其中存在一个 PHP 函数调用。我们遍历函数参数的数组，寻找字符串“指针”，然后用这些指针值替换。指针只是对 JSON 中先前定义的变量的引用，这些变量需要作为参数发送给我们的函数调用。创建新的参数数组后，我们使用这些参数调用请求的函数，然后将结果返回到该函数对象变量定义中，在那里它可能会或可能不会用作另一个函数调用的参数。

```
/**
 * Iterates over an array containing PHP and handles calls to enabled functions and executes them.
 * @param {phpObj} array A JSON decoded array of representational PHP.
 * @return {*} Will return the results of the last function call passed in through phpObj.
 */
function parse_php_object( $arr, $config ) {

    // We define a pointer array that contains reference names to parameter placeholders
    // that will be replaced by real data.
    $pointers = array();

    foreach ( $arr as $k => $v ) {

        // Create variable definition with our first level array keys
        ${$k} = $v;

        // Populate our pointers index
        $pointers[$k] = $k;

        // When a value is an object we attempt to call functions defined within
        if ( is_object( ${$k} ) ) {

            // Convert our function object to an array
            $funcArr = (Array)${$k};

            // Use the first key of the function array as our function name to call
            $func_name = array_keys($funcArr);
            $func_name = $func_name[0];

            // Get the array of arguments to parse to our arguments array
            $func_args = $funcArr[$func_name];

            // Create an array to store the arguments to pass to our function call
            $args_arr = array();

            // Now we iterate over our function arguments looking for reference strings
            foreach ( $func_args as $arg ) {

                // We compare against the keys in our pointers index which was created above
                if ( array_key_exists( $arg, $pointers ) ) {

                    // This is now a reference to ${$k}, the originally defined definition, the returned
                    // result of the last sucessful function call
                    $p = ${$arg};

                    // We push our arguments onto the args_array which will be passed to our function call
                    array_push( $args_arr, $p );

                } else {

                    // We push our arguments onto the args_array which will be passed to our function call
                    array_push( $args_arr, $arg );
                }
            }

            // Based on the security mode selected, use either our blacklist or whitelist.
            switch ( $config['SEC_MODE'] ) {
                case 'blacklist' :
                    if ( function_exists( $func_name ) 
                         && !in_array( $func_name, $config['LISTS']['blacklist'] ) ) {
                        $function_allowed = true;
                    } else {
                        $function_allowed = false;
                    }
                    break;

                case 'whitelist' :
                    if ( function_exists( $func_name ) 
                         && in_array( $func_name, $config['LISTS']['whitelist'] ) ) {
                        $function_allowed = true;
                    } else {
                        $function_allowed = false;
                    }
                    break;
            }

            // Call the requested function if permitted
            if ( $function_allowed === true ) {

                // Reassign our variable the returned value of a function call so that further function calls can
                // search for the existence of pointers and then use the updated variable definitions. This logic
                // takes advantage of the procedural nature of PHP and the order of the sub-blocks in the php object. 
                ${$k} = call_user_func_array( $func_name, $args_arr );
            } else {
                return ("Function you requested $func_name has been disabled by backend configuration.");
            }
        }

        // When we're not an object we're something else like an array, string, int, etc. If we're an array we need
        // to recursively iterate over ourselves to convert any objects into arrays.
        else {  
            if ( is_array( ${$k} ) ) {
                array_walk_recursive( ${$k}, 'object_to_array' );
            }
        }

    }

    // Return the returned result from our final function call
    return ${$k};
}

/**
 * Converts PHP objects to arrays by typecasting.
 * @param {object} Object A self referencing PHP object.
 */
function object_to_array( &$object ) {
    if ( is_object( $object ) ) {
        (Array)$object;
    }
} 
```

我相信这种方法使用反射模式，因为命令决策是根据传递的数据类型做出的。此外，这可以与大量基于 AJAX 的项目一起使用，而无需专门定义函数的处理接口。

在我们将结果发送回客户端之前，当然还有更多的代码可以进行一些类型检查、安全测试和 JSON 编码，但是上面显示的函数完成了大部分工作。

# c++ - 为 iOS 5.0 编译/链接 FreeImage

> ID：14160444
> 
> 赞同：4
> 
> 时间：2013-01-04T15:57:21.497
> 
> 标签：c++, ios5, c++11, makefile, freeimage

我最近决定尝试在 iOS 设备上运行我的一些图形代码，但我使用 FreeImage 来加载纹理。因此，我需要为 iOS 5.0 构建它。

我目前在尝试使用 FreeImage 库时遇到链接错误。链接错误都与标准 C++ 库相关。例如...

```
Undefined symbols for architecture i386:
  "std::basic_string<char, std::char_traits<char>, std::allocator<char>>::~basic_string()", referenced from:
  _FreeImage_GetMetadata in libfreeimage-iphonesimulator.a(BitmapAccess.o-i386)
  _FreeImage_SetMetadata in libfreeimage-iphonesimulator.a(BitmapAccess.o-i386)
  _FreeImage_CloneMetadata in libfreeimage-iphonesimulator.a(BitmapAccess.o-i386)
  _FreeImage_Clone in libfreeimage-iphonesimulator.a(BitmapAccess.o-i386)
  std::pair<std::string const, FITAG*>::~pair() in libfreeimage-iphonesimulator.a(BitmapAccess.o-i386)
  Load(FreeImageIO*, void*, int, int, void*) in libfreeimage-iphonesimulator.a(PluginEXR.o-i386)
  C_OStream::write(char const*, int) in libfreeimage-iphonesimulator.a(PluginEXR.o-i386)
  ... 
```

不幸的是，为 iOS 构建 FreeImage 提供的 makefile 有点过时，所以我被迫更新它。此外，在我的 XCode 项目中，我切换了编译器以支持 C++11 功能并使用 libc++（如此处所述[我可以将 C++11 与 Xcode 一起使用吗？](https://stackoverflow.com/questions/4574246/can-i-use-c11-with-xcode)）

所以我试图在 FreeImage 的 makefile 中镜像这些更改，但我仍然收到这些错误。

我的 makefile 看起来像这样（我发现这篇文章有些帮助[http://sourceforge.net/p/freeimage/discussion/36110/thread/51445acc](http://sourceforge.net/p/freeimage/discussion/36110/thread/51445acc)）

```
# Configuration for iPhone OS, making static libs
# this will generate both iPhone (arm) and iPhoneSimulator (i686) libs

include Makefile.srcs

CFLAGS =  -g -O2 -Wall -Wmissing-prototypes -std=c99 -ffast-math -fno-strict-aliasing
CXXFLAGS = -g -O2 -Wall -fno-strict-aliasing -std=c++0x -stdlib=libc++

GCC_VERSION = 4.2
IPHONEOS_DEPLOYMENT_TARGET = 5.0
MACOSX_DEPLOYMENT_TARGET = 10.6

PLATFORM_SIM = iPhoneSimulator
PLATFORM_PHONE = iPhoneOS

ARCH_SIM = i386
ARCH_PHONE = armv7

PLATFORM_SIM_DEVELOPER_BIN_DIR = /Developer/Platforms/$(PLATFORM_SIM).platform/Developer/usr/bin
PLATFORM_PHONE_DEVELOPER_BIN_DIR = /Developer/Platforms/$(PLATFORM_PHONE).platform/Developer/usr/bin

SDKROOT_SIM = /Developer/Platforms/$(PLATFORM_SIM).platform/Developer/SDKs/$(PLATFORM_SIM)$(IPHONEOS_DEPLOYMENT_TARGET).sdk
SDKROOT_PHONE = /Developer/Platforms/$(PLATFORM_PHONE).platform/Developer/SDKs/$(PLATFORM_PHONE)$(IPHONEOS_DEPLOYMENT_TARGET).sdk

EXTRA_CFLAGS_SIM += -arch $(ARCH_SIM) -pipe -mdynamic-no-pic -fvisibility=hidden $(INCLUDE) -isysroot $(SDKROOT_SIM)
EXTRA_LDFLAGS_SIM += -arch $(ARCH_SIM) -isysroot $(SDKROOT_SIM) -Wl,-dead_strip
EXTRA_CFLAGS_SIM += -D__IPHONE_OS_VERSION_MIN_REQUIRED=20000 -mmacosx-version-min=$(MACOSX_DEPLOYMENT_TARGET)
EXTRA_LDFLAGS_SIM += -mmacosx-version-min=$(MACOSX_DEPLOYMENT_TARGET)

EXTRA_CFLAGS_PHONE += -arch $(ARCH_PHONE) -pipe -mdynamic-no-pic -fvisibility=hidden $(INCLUDE) -isysroot $(SDKROOT_PHONE)
EXTRA_LDFLAGS_PHONE += -arch $(ARCH_PHONE) -isysroot $(SDKROOT_PHONE) -Wl,-dead_strip
EXTRA_CFLAGS_PHONE += -miphoneos-version-min=$(IPHONEOS_DEPLOYMENT_TARGET)
EXTRA_LDFLAGS_PHONE += -miphoneos-version-min=$(IPHONEOS_DEPLOYMENT_TARGET)

AR_SIM = $(PLATFORM_SIM_DEVELOPER_BIN_DIR)/ar
AR_PHONE = $(PLATFORM_PHONE_DEVELOPER_BIN_DIR)/ar

CC_SIM = $(PLATFORM_SIM_DEVELOPER_BIN_DIR)/llvm-gcc-$(GCC_VERSION)
CC_PHONE = $(PLATFORM_PHONE_DEVELOPER_BIN_DIR)/llvm-gcc-$(GCC_VERSION)

CFLAGS_SIM = $(CFLAGS) $(EXTRA_CFLAGS_SIM)
LDFLAGS_SIM = $(EXTRA_LDFLAGS_SIM)
CXX_SIM = $(PLATFORM_SIM_DEVELOPER_BIN_DIR)/clang++
CXXFLAGS_SIM += $(EXTRA_CFLAGS_SIM) -fvisibility-inlines-hidden 
LIBTOOL_SIM = /Developer/Platforms/$(PLATFORM_SIM).platform/Developer/usr/bin/libtool

CFLAGS_PHONE = $(CFLAGS) $(EXTRA_CFLAGS_PHONE)
LDFLAGS_PHONE += $(EXTRA_LDFLAGS_PHONE)
CXX_PHONE = $(PLATFORM_PHONE_DEVELOPER_BIN_DIR)/clang++
CXXFLAGS_PHONE += $(EXTRA_CFLAGS_PHONE) -fvisibility-inlines-hidden
LIBTOOL_PHONE = /Developer/Platforms/$(PLATFORM_PHONE).platform/Developer/usr/bin/libtool

TARGET = freeimage
STATICLIB_SIM = lib$(TARGET)-iphonesimulator.a
STATICLIB_PHONE = lib$(TARGET)-iphone.a
HEADER = Source/FreeImage.h

.SUFFIXES: .o-i386 .o-arm
MODULES_ARM = $(SRCS:.c=.o-arm)
MODULES_ARM := $(MODULES_ARM:.cpp=.o-arm)
MODULES_i386 = $(SRCS:.c=.o-i386)
MODULES_i386 := $(MODULES_i386:.cpp=.o-i386)

default: all

all: dist

dist: FreeImage
    cp *.a Dist
    cp Source/FreeImage.h Dist

FreeImage: $(STATICLIB_SIM) $(STATICLIB_PHONE)

$(STATICLIB_SIM): $(MODULES_i386)
    $(LIBTOOL_SIM) -arch_only $(ARCH_SIM) -o $@ $(MODULES_i386)

.c.o-i386:
    $(CC_SIM) $(CFLAGS_SIM) -c $< -o $@

.cpp.o-i386:
    $(CXX_SIM) $(CXXFLAGS_SIM) -c $< -o $@

$(STATICLIB_PHONE): $(MODULES_ARM)
    $(LIBTOOL_PHONE) -arch_only $(ARCH_PHONE) -o $@ $(MODULES_ARM)

.c.o-arm:
    $(CC_PHONE) $(CFLAGS_PHONE) -c $< -o $@

.cpp.o-arm:
    $(CXX_PHONE) $(CXXFLAGS_PHONE) -c $< -o $@

clean:
    rm -f core Dist/*.* u2dtmp* $(MODULES_i386) $(MODULES_ARM) $(STATICLIB_SIM) $(STATICLIB_PHONE) 
```

也许有人可以指出我哪里出错了

编辑：我修复了一个问题，它没有重建 i386 目标文件，希望这是解决方案，但是它仍然有相同的链接错误。

编辑：我调整了我的makefile以使用clang++

我还在链接的框架中添加了 libc++

![在此处输入图像描述](../Images/78330c8e414463e09b9bdccb6aac8b1d.png)

这是我对 XCode 项目的 C++ 设置

![在此处输入图像描述](../Images/472e0046d309a8cb000b1dfcb3b9a6ac.png)

我的 XCode 项目中也有 .cpp 文件。然而，错误仍然存​​在。

编辑3：

请求查询的结果：

```
nm libfreeimage-iphonesimulator.a | c++filt | grep '~basic_string()' | sort -u
nm: no name list
nm: no name list
         U std::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string() 
```

完整的链接器错误输出可以在这里找到：http: [//pastebin.com/wjbWgE4S](http://pastebin.com/wjbWgE4S)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T17:34:50.753

Objective C 项目使用`clang`编译器（您可能仍在使用 gcc），它是（从技术上讲）`C`编译器，而不是`C++`编译器。使用文件扩展名来确定是将代码编译为`C`,`Objective C`还是`C++`.

当您链接一个 Objective C 项目时，它使用 链接`clang`，它不会在`C++`运行时链接。您需要在运行时链接。

如果您正在使用该库构建您的`libc++`库，那么您将需要添加`libc++`到链接到`Build Phases -> Link Binary With Libraries`. 如果您正在使用`libstdc++`库进行构建，那么您将需要添加`libstdc++`到链接的库列表中。

Xcode 足够智能，`clang++`即使`C++`项目中只有一个文件也可以使用链接，在这种情况下无需在`C++`运行时显式链接。

**tl; dr** - 看起来您没有`C++`使用与构建主应用程序相同的标志来编译模拟器的代码。该行：

```
CXXFLAGS_SIM += $(EXTRA_CFLAGS_SIM) -fvisibility-inlines-hidden 
```

实际上缺少基本`$(CXXFLAGS)`项目，应阅读：

```
CXXFLAGS_SIM += $(CXXFLAGS) $(EXTRA_CFLAGS_SIM) -fvisibility-inlines-hidden 
```

同样的`CXXFLAGS_PHONE`线

结果，您正在混合`libc++`和`libstdc++`编译导致链接错误的代码。它应该暗示该`CXXFLAGS`行没有像`c++`在编译行开头那样被使用，如果在任何代码中使用它都会触发编译错误。

还有其他问题，例如要使用`libc++`您的 iPhone 部署目标必须是 iOS 5 或更高版本（`__IPHONE_OS_VERSION_MIN_REQUIRED=50000`模拟器编译需要如此），并且由于符号扩展问题，您需要修复一些文件，例如

```
Source/LibRawLite/./internal/dcraw_common.cpp:3926:19: error: constant expression evaluates to 128 which cannot be narrowed to type 'signed char' [-Wc++11-narrowing] 
```

如果您想检查`C++`代码是否已使用`-stdlib=libc++`或编译`-stdlib=libstdc++`，您可以执行`nm`任何生成的编译代码，将其传递给`c++filt`. 如果您看到命名空间`std::__1::`，则代码是用 编译的`-stdlib=libc++`，否则它是用 编译的`-stdlib=libstdc++`

# javascript - Popcorn popcorn.js 字幕/字幕的开/关按钮

> ID：14160447
> 
> 赞同：0
> 
> 时间：2013-01-04T15:57:38.870
> 
> 标签：javascript, button, html5-video, caption, popcornjs

我正在使用 popcorn.js 为我的视频添加一些字幕/字幕。这些会自动显示在视频中。我目前正在使用 html 和 JavaScript 创建自定义视频控件。我想要一个我创建的按钮来打开和关闭字幕。

这是我的html按钮和视频（目前onclick功能“Captions”为空）

```
 <input type="button" value="Captions" id="captions" onclick="Captions()" class="button"/>

<video id="video" width="896" height="504" data-setup="{}" >
<source src="video/MyVideo.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"' />
<source src="video/MyVideo.webmhd.webm" type='video/webm; codecs="vp8, vorbis"'>
<source src="video/MyVideo.oggtheora.ogv" type='video/ogg; codecs="theora, vorbis"' />
<p>Your browser doesn't support HTML5\. Maybe you should upgrade.</p>
</video> 
```

这是我使用爆米花的一些 JavaScript

```
document.addEventListener( "DOMContentLoaded", function() {

       var popcorn = Popcorn( "#video" );true;

       popcorn.subtitle({
            start: .5,
            end: 2.5,
            text: "Subtitle Text"

       popcorn.subtitle({
            start: 2.5,
            end: 9.5,
            text: "Or captions"
       });
        }, false ); 
```

我是 JavaScript 新手，因此我们将不胜感激。

更新：我如何得到它，所以字幕不会自动播放。我希望他们在视频开始播放时关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:08:10.890

Popcorn 具有可以打开`enable`和`disable`关闭任何给定插件的方法。

因为您在事件侦听器函数中定义了爆米花实例，所以您还需要在其中设置点击处理程序。所以，对于你的 html...

```
<input type="button" value="Captions" id="captions" class="button"/> 
```

还有你的剧本...

```
document.addEventListener( "DOMContentLoaded", function() {

    var popcorn = Popcorn( "#video" );
    var showSubtitles = true;
    document.getElementById('captions').addEventListener('click', function () {
        //toggle subtitles
        showSubtitles = !showSubtitles;
        if (showSubtitles) {
            popcorn.enable('subtitle');
        } else {
            popcorn.disable('subtitle');
        }
    }, false);

    /* fill in your subtitles here... */
}, false ); 
```

官方文档在这里： http: [//popcornjs.org/popcorn-docs/media-methods/#disable](http://popcornjs.org/popcorn-docs/media-methods/#disable)

# entity-framework - 使用 EF5 对 DB First Approach 和 POCO 生成感到困惑

> ID：14160448
> 
> 赞同：4
> 
> 时间：2013-01-04T15:57:47.883
> 
> 标签：entity-framework, visual-studio-2012

当我执行创建 .edmx 文件的数据库优先方法时，我对 VS.NET 2012 中的 EF5 发生的事情有点困惑。我感到困惑的原因是因为关于 EF 4.x 的信息太多了，以至于我相信很多与 EF5 相关的信息都不准确。

在 EF4 中，要使用具有数据库优先方法的 POCO，需要创建 POCO 类，并确保设置**Code Generation Strategy = None**。然后创建一个单独的“实体”类，该类继承自“ObjectContext”，该类具有我们的 POCO 类的知识，可与 EF 一起使用。

在带有 VS.NET 2012 的 EF5 中，当我使用数据库优先方法时，**Code Generation Strategy = None** is *already set*，并且由默认 T4 模板生成的结果类似乎已经为我创建了 POCO 类。`ObjectContext`结果类在or上没有继承`DBContext`。这是默认情况下将自动生成的实体创建为 POCO 类的方式吗？

如果答案是“是”，我实际上非常喜欢。我的主要问题是，我可以将那些 POCO 类拉到另一层吗？现在它们显示在“MyModel.tt”下，所以如果我删除它们，我想如果我更新模型，任何更改都不会反映，对吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T16:31:17.587

> 在 EF4 中，要使用具有数据库优先方法的 POCO，需要创建 POCO 类，并确保将代码生成策略设置为无。然后创建一个单独的“实体”类，该类继承自“ObjectContext”，该类具有我们的 POCO 类的知识，可与 EF 一起使用。

这是一个核心思想，但您也可以使用从 VS Gallery 下载的其他 T4 模板，它会为您生成 POCO 类。

> 在带有 VS.NET 2012 的 EF5 中，当我使用数据库优先方法时，已经设置了 Code Generation Strategy = None，并且由默认 T4 模板生成的结果类似乎已经为我创建了 POCO 类。生成的类对 ObjectContext 或 DBContext 没有继承。这是默认情况下将自动生成的实体创建为 POCO 类的方式吗？

是的。VS 2012 默认使用 T4 模板从模型生成 POCO 类。

> 我可以将那些 POCO 类拉到另一层吗？现在它们显示在“MyModel.tt”下，所以如果我删除它们，我想如果我更新模型，任何更改都不会反映，对吗？

是的，你可以有一些限制。您可以将整个 .tt 文件移动到另一个文件夹或项目，您只需更新此文件中的路径以指向 EDMX 文件的正确位置。.tt 文件是负责生成 POCO 类的 T4 模板。主要限制可能是自动更新 - 在默认配置下，模板会在保存 EDMX 文件时自动更新和保存。保存模板将触发所有 POCO 类的重新生成（= 另一个限制 - 不要修改那些自动生成的类）。当您将模板移动到另一个项目时，此自动魔法不起作用，您必须从 .tt 文件的上下文菜单中手动触发*Run custom tool以强制重新生成类。*

# windows - 我可以在一个 Mahout 项目中使用多种推荐类型，并结合它们的结果吗？

> ID：14160455
> 
> 赞同：1
> 
> 时间：2013-01-04T15:58:15.417
> 
> 标签：windows, mahout, evaluation

我正在尝试实现一个推荐系统 uisng Mahout 框架。由于我没有 Linux 机器，我无法使用 Hadoop 处理大型矩阵。（在 Windows 上安装 Hadoop 的教程对我不起作用。）

我的用户具有三种类型的功能，每种类型包含 5 到 9 个功能。我想知道我是否可以将这些功能构建到一个 FileDataModel 中，或者我是否可以单独处理每组功能并将结果组合起来。

如果后一个有效，那么我需要从之前的处理结果中获取 UserId，以便为下一组功能创建一个新的 FileDataModel。可行吗？

在这里我仍然有一些我没有找到答案的问题，希望任何人都可以帮助：在没有Hadoop的Windows环境下，Mahout实际上可以处理多少功能？在一种算法投入生产后，我们需要多久重新优化一次系统？它会自动工作吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:03:24.607

好吧..mahout 可以在没有 hadoop 的情况下运行，如果它没有找到 HADOOP_HOME env 变量集..另一方面..我不确定 mahout 是否可以立即在 Window 上运行，因为我没有找到任何 .bat 文件或 Windows conf ...如果你想在 Windows 上运行它们，你需要为 hadoop 和 mahout 安装 cygwin。

这与未设置 HADOOP_HOME 时 Pig 的工作方式非常相似。

# python - 在并集或交集中执行数据库搜索

> ID：14160458
> 
> 赞同：0
> 
> 时间：2013-01-04T15:58:41.543
> 
> 标签：python, sqlite, radio-button, union, intersect

我的代码允许人们在提供的空间中输入关键字并单击搜索按钮，在数据库中搜索这些关键字并显示在其行中包含该关键字的 url。代码自动执行联合搜索。

我在名为 union 和 intersect 的页面中添加了两个单选按钮。如何更改我的代码以允许用户通过选择单选按钮来选择他们执行的搜索？

```
#!/usr/bin/env python2.7

import sys
import sqlite3
from string import Template
from cgi import FieldStorage
from dateutil import parser
from textwrap import dedent
from eicpy.www import CGIHandler
from eicpy.sql import ezsql

from eicpy import www
from eicpy import cgierror
cgierror.enable(display=True)

DB = ezsql().connect("/usr/HTTPServer/dev7/data/asq1.db")

class Page(CGIHandler):

def handle1(self):
   search_terms = self.fs.getfirst("searchinp", None)
   if search_terms:
      fields = search_terms.split(" ")
      steps = []
      apps = []

      for field in fields:
        recs = DB.execute("select issue, url, steps from help where k1='%s' or
        k2='%s' or k3='%s' or k4='%s' or k5='%s' or k6='%s' or k7='%s' or
        k8='%s' or k9='%s' or k10='%s' or k11='%s' or k12='%s' or k13='%s'" %
        (field, field, field, field, field, field, field, field, field, field,
        field, field, field)).fetchall()

#self.debug(recs)

for r in recs:
  if r.steps == "S":
    steps.append({
    "issue" : r.issue,
    "size" : "600x460",
    "location" : "/" + r.url
    })

if r.steps =="A":
    apps.append({
    "issue" : r.issue,
    "size" : "600x460",
    "location" : "/" + r.url
    })

#self.debug(steps)
#self.debug(apps)

self.show({"steps": steps, "apps": apps})

else :
   self.show({})

if __name__ == '__main__':
    p = Page('Agent Support Query'
        ,'pt/asq.xml'
        , ['/styles/asq.css'])
    p.handle1() 
```

**编辑：HTML/XML 代码：**

```
<html>
  <head>
    <title>Agent support Query</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="/styles/asq.css" />
    <script type="text/javascript" src="/yui/yahoo-dom-event/yahoo-dom-event.js">
       </script>
    <script type="text/javascript" src="/yui/connection/connection-min.js"></script>
    <script type="text/javascript" src="/scripts/eiLib.js"></script>
    <script type="text/javascript" src="/scripts/win7.js"></script>
  </head>

  <body>
    <div id="container">
      <div id="header">
        <div id="body">
          <div id="hd">
            <a href="/"><img src="/images/eic_small.jpg" width="145" height="45" /></a>
          </div><!-- hd -->
          <div id="title">
            <div><h1>Agent Support Query</h1></div>
          </div><!-- title -->
        </div><!-- body -->
      </div><!-- header -->
      <form action="#">
        <div id="searchspace">
          <div id="searchform">
            <div id="radio">
              Union<input type="radio" name="accept" value="iaccept">
                <br>
              Intersect<input type="radio" name="accept" value="notaccept">
            </div><!-- radio -->
            <div id="dropbox">
              <select>
                <option>keyword</option>
                <option></option>
                <option></option>
              </select>
            </div> <!-- dropbox -->            
            <div id="keyword">keyword(s) -</div>
              <input type="text" id="searchinp" name="searchinp" />
              <input type="submit" id="srch" name="srch" value="?" />
          </div><!-- searchform -->
        </div><!-- searchspace -->

    <!-- This is the important bits for creating the help links -->

        <div id="help">
          <div id="steps">
            <div tal:condition="exists:vars/steps">
              <div tal:repeat="item vars/steps">
                <h1 tal:attributes="onclick string:window.open('${item/location}',
                   'popup',
                      '${item/size},scrollbars=yes')"
                      tal:content="item/issue"></h1>
              </div><!-- tal:repeat -->
            </div><!-- tal:condition -->
         </div><!-- steps -->
         <div id="append">
           <div tal:condition="exists:vars/apps">
             <div tal:repeat="item vars/apps">
               <h1 tal:attributes="onclick string:window.open('${item/location}',
                   'popup',
                    '${item/size},scrollbars=yes')"
                     tal:content="item/issue"></h1>
             </div><!-- tal:repeat -->
           </div><!-- tal:condition -->
      </div><!-- append -->
    </div><!-- help -->
   </form>
  </div><!-- container -->
 </body>
</html> 
```

# jquery - 自动完成不适用于某些输入

> ID：14160460
> 
> 赞同：0
> 
> 时间：2013-01-04T15:58:49.623
> 
> 标签：jquery, jquery-ui, jquery-autocomplete

jQuery UI 自动完成插件不起作用

我的代码：

```
$(document).ready(function() {
    $('#category').autocomplete({
        source : 'suggestion.do',
        width : 300,
        max : 10,
        delay : 100,
        cacheLength : 1,
        scroll : true,
        highlight : false
    });
}); 
```

写这个作品

> ["abcd","abc"]

这个不起作用，除非它是直接提供的（不是从外部文件加载的）：

> [{标签：“选择1”，价值：“价值1”}，{标签：“选择2”，价值：“价值2”}]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:03:24.760

您没有将键值放在引号中。这将是

```
[{"label": "Choice1", "value": "value1" },{ "label": "Choice2", "value": "value2" }] 
```

# android - 导出签名 apk 时出错 - Dalvik 格式失败，错误 1

> ID：14160461
> 
> 赞同：2
> 
> 时间：2013-01-04T15:58:53.820
> 
> 标签：android, eclipse, apk, dalvik

我知道有很多类似的问题，但我无法真正解决它。我已经失去了一个星期，我仍然在第一方。

我正在尝试导出一个在 Facebook 上执行登录的非常基本的应用程序。该代码与示例中的代码相同。它在调试中工作，但导出它会返回错误`Dalvik format failed with error 1`

如果我删除引用并创建一个空白应用程序，一切正常。如果我添加对 Facebook sdk 的引用，它就会崩溃。我检查了我的参考资料、路径，清理了所有内容，重新启动了机器。没有任何作用！我没有使用proguard。我已经安装了 Java 6。我在 win 8 64 位上。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-11-20T07:03:37.053

我的问题通过这样做解决了：

**取消选中** `Project -> Build Automatically`

现在导出您的 apk。它应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:13:34.433

请参阅[外部 JAR 上的“转换为 Dalvik 格式失败并出现错误 1”](https://stackoverflow.com/questions/2680827/conversion-to-dalvik-format-failed-with-error-1-on-external-jar)

> 转到项目»属性»Java构建路径»库并删除除“Android XY”之外的所有内容（在我的情况下为Android 1.5）。单击确定。转到项目»清理»清理下面选择的项目»选择您的项目并单击确定。那应该行得通。

如果这样做没有帮助，请尝试更新您的 Android 工具（帮助 --> 检查更新），或者只需下载新的 Eclipse 副本并再次安装 Android SDK。

我遇到了这个问题，我不得不重新安装 android-sdks

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T15:37:40.067

使用 Facebook SDK 的应用程序也遇到了这个问题。我正在尝试各种各样的东西，所以我不确定到底修复了什么，但这里的设置对我有用：

FacebookSDK > 属性 > Java 构建路径 > 排序和导出

Android 2.2 - 未选中

Android 私有库 - 已选中

Android 依赖项 - 已检查

MyApp > 属性 > Java 构建路径 > 排序和导出

Android 4.2.2 - 选中

Android 私有库 - 已选中

Android 依赖项 - 已检查

另外，我以前做过，不确定是否重要。从 3.5.2 恢复到 Facebook SDK 版本 3.5。更新到最新的 ADT 22.2.1。将 Facebook SDK 从 4.2.2 更改为使用 Android 2.2。

# objective-c - 使用 Graph API 获取页面的 facebook 事件

> ID：14160462
> 
> 赞同：1
> 
> 时间：2013-01-04T15:59:05.583
> 
> 标签：objective-c, ios, facebook, facebook-graph-api

我想使用图形 API 获取（仅显示，而不是修改）页面的 facebook 事件。

该 URL 将是：[http](http://graph.facebook.com/nowavezene?fields=events) : //graph.facebook.com/nowavezene?fields=events 其中“nowavezene”是页面 ID。

生成的 JSON 显示“请求此资源需要访问令牌”。我什至尝试了[Graph API Explorer](https://developers.facebook.com/tools/explorer)但这只是给了我

```
{
  "data": [
  ]
} 
```

我的第一个问题是：**为什么？**为什么我需要访问令牌才能查看事件？即使我没有登录 Facebook，我也可以查看活动。

**我需要什么权限？**

我和应用程序的用户都不是页面的所有者，所以我不能要求 user_events 或 create_event 权限。

如果相关，我想在 iOS 上执行此操作。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:04:24.440

CBroe 在他们的评论中是正确的。阅读手册让我得到答案，特别是您需要一个通用**访问令牌**，它将验证请求并返回事件。

# z3 - z3 C++ API & ite

> ID：14160468
> 
> 赞同：5
> 
> 时间：2013-01-04T15:59:45.847
> 
> 标签：z3

也许我错过了一些东西，但是使用 z3 C++ API 构造 if-then-else 表达式的方法是什么？

我可以为此使用 C API，但我想知道为什么 C++ API 中没有这样的功能。

问候，朱利安

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T16:25:59.427

我们可以混合使用 C 和 C++ API。该文件`examples/c++/example.cpp`包含一个使用 C API 创建 if-then-else 表达式的示例。该函数`to_expr`本质上是`Z3_ast`用 C++“智能指针”包装 a，`expr`它自动为我们管理引用计数器。

```
void ite_example() {
    std::cout << "if-then-else example\n";
    context c;

    expr f    = c.bool_val(false);
    expr one  = c.int_val(1);
    expr zero = c.int_val(0);
    expr ite  = to_expr(c, Z3_mk_ite(c, f, one, zero));

    std::cout << "term: " << ite << "\n";
} 
```

[我刚刚将该`ite`函数添加到 C++ API](http://z3.codeplex.com/SourceControl/changeset/c430fe26aa30)。它将在下一个版本 (v4.3.2) 中提供。如果需要，您可以添加到`z3++.h`系统中的文件中。一个包含的好地方是在函数之后`implies`：

```
/**
   \brief Create the if-then-else expression <tt>ite(c, t, e)</tt>

   \pre c.is_bool()
*/
friend expr ite(expr const & c, expr const & t, expr const & e) {
    check_context(c, t); check_context(c, e);
    assert(c.is_bool());
    Z3_ast r = Z3_mk_ite(c.ctx(), c, t, e);
    c.check_error();
    return expr(c.ctx(), r);
} 
```

使用这个函数，我们可以写：

```
void ite_example2() {
    std::cout << "if-then-else example2\n";
    context c;
    expr b = c.bool_const("b");
    expr x = c.int_const("x");
    expr y = c.int_const("y");
    std::cout << (ite(b, x, y) > 0) << "\n";
} 
```

# sql-server - SQL Profiler 不显示所有 ADO.NET 操作

> ID：14160469
> 
> 赞同：2
> 
> 时间：2013-01-04T15:59:47.467
> 
> 标签：sql-server, sql-server-2008, entity-framework, ado.net, sql-server-profiler

我有以下代码创建一个可序列化的事务。该应用程序按预期工作：

```
using (var tx = new TransactionScope(TransactionScopeOption.Required, new TransactionOptions { IsolationLevel = IsolationLevel.Serializable, Timeout = new TimeSpan(0, 2, 0) }))
{
  // Modify database using EF.
  tx.Complete();
} 
```

但是，分析数据库让我有些困惑。

```
// Start of transaction (and the first query). Login has invalid ISO LEV.
Audit Login       ... set transaction isolation level read committed ...
SQLTransaction    0 - Begin
RPC:Completed     exec sp_executesql N'SELECT TOP (1)... 

// Second query in transaction. Login now has valid ISO LEV.
Audit Logout
RPC:Completed     exec sp_reset_connection
Audit Login       ... set transaction isolation level read serializable ...
RPC:Completed     exec sp_executesql N'SELECT TOP (1)... 
```

由于我可以看到第一个查询实际上是在可序列化下执行的（我可以从它获取的锁中推断出这一点），我可以得出的唯一理由是 Audit Login 只是在登录时声明了 SPID 的 ISO 级别，并且*不是*它正在改变它。

如果是这样，那么触发 ISO 更改的事件在哪里？我已打开所有事件，但什么都看不到...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:08:02.663

更改事务隔离级别不是`RPC:Completed`事件。

仔细检查您是否正在监视`SQL:BatchStarting`和`SQL:BatchCompleted`事件。

# c# - 无法从 Global.asax 文件将 URL 存储在会话中

> ID：14160473
> 
> 赞同：1
> 
> 时间：2013-01-04T16:00:15.693
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-4

我正在尝试将 url 存储在 Session 中，以便稍后在我重定向响应以整理我的 URL 时获取。这是在 Global.asax 文件中。我正在获取原始响应并将 url 存储在会话中

```
 protected void Application_Error(object sender, EventArgs e)
    {
        Exception exception = Server.GetLastError();
        HttpException httpException = exception as HttpException;

        // get the url
        var url = Request.RawUrl;

        // store in session
        Session["requestUrl"] = url;

        if (exception is HttpException && ((HttpException)exception).GetHttpCode() == 404) {
            Response.Redirect("/CMS/CMS");
        }

    } 
```

如果我查看 Session 内容，它就在那里

然后我尝试在我的 CMS/CMS 操作中提取它，但变量 url 为空？？：

```
 public ActionResult CMS(String aspxerrorpath)
    {
        var url = Session["requestUrl"]; // this is null??

        Response.StatusCode = 404;
        Response.TrySkipIisCustomErrors = true;
        return View();
    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:42:55.437

Darin 的方法更有意义，但万一其他人有同样的问题，*需要*在 Session 对象中设置一个值......

我不确定我是否理解发生了什么，但是，这就是我发现的。如果您*已经*设置了 Session 变量，那么您拥有的代码可以正常工作。因此，例如，如果您有这样的事情：

```
protected void Session_Start(object sender, EventArgs e) {
 Session["asdasd"] = true;
} 
```

然后你点击一个页面，*然后*你在另一个请求上触发错误，然后`Session[requestUrl]`工作就很好了。

这让我想到，如果页面上有错误，ASP.NET 可能不会发送会话 cookie。果然，如果你`Server.ClearError();`在你的`Application_Error`函数中调用，那么`Session[requestUrl]`工作就很好，即使你还没有会话。啊哈，我想，肯定看起来没有发送cookie，除非你先清除服务器错误。然而，然后我打破了 Fiddler，你瞧，在这两种情况下都发送了一个*cookie*。所以，我不知道为什么调用`Server.ClearError();`会保存你的 Session 变量。:) 但是，无论出于何种原因，它确实有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T16:07:18.483

抱歉，我不知道为什么会话不工作，但如果你想*整理*你的 url 然后重写路径，不要重定向：

```
protected void Application_Error(object sender, EventArgs e)
{
    var exception = Server.GetLastError();
    var httpException = exception as HttpException;

    if (exception is HttpException && ((HttpException)exception).GetHttpCode() == 404) 
    {
        Server.ClearError();

        // get the url
        var url = Request.RawUrl;

        var routeData = new RouteData();
        routeData.Values["controller"] = "Cms";
        routeData.Values["action"] = "Cms";
        routeData.Values["aspxerrorpath"] = url;

        IController cmsController = new CmsController();
        var rc = new RequestContext(new HttpContextWrapper(Context), routeData);
        cmsController.Execute(rc);
    }
} 
```

这样您就不需要执行额外的重定向，也不需要依赖 Session。

您还可以查看我借用代码的[以下帖子。](https://stackoverflow.com/a/5229581/29407)

# xml - XSLT 对重复属性之间的同级元素进行分组

> ID：14160476
> 
> 赞同：0
> 
> 时间：2013-01-04T16:00:20.183
> 
> 标签：xml, xslt

几天来我一直在绞尽脑汁，而对于我的一生，我无法弄清楚如何做到这一点。采用以下 XML：

```
<Root>
   <container>
        <widget type="nav">
            <links>
                <tab type="label" header="Top Level Tab1"/>
                <tab type="page" header="submenu of tab1"/>
                <tab type="page" header="submenu of tab1"/>
                <tab type="page" header="submenu of tab1"/>
                <tab type="label" header="Top Level Tab2"/>
                <tab type="page" header="submenu of tab2"/>
                <tab type="page" header="submenu of tab2"/>
                <tab type="page" header="submenu of tab2"/>
                <tab type="page" header="submenu of tab2"/>
                <tab type="page" header="submenu of tab2"/>
                <tab type="label" header="Top Level Tab3"/>
                <tab type="page" header="submenu of tab3"/>
                <tab type="page" header="submenu of tab3"/>
                <tab type="page" header="submenu of tab3"/>
                <tab type="page" header="submenu of tab3"/>
                <tab type="page" header="submenu of tab3"/>
            </links>
        </widget>
   </container>
</root> 
```

我需要做的是将其转换为导航区域，在每个选项卡上使用“标签”类型分隔，并将以下兄弟姐妹放在其下。例如

```
<ul>
    <li>
        <a href="link for label">Top Level Header1</a>
        <div class="submenu">
            <ul>
                <li>Submenu Link 1</li>
                <li>Submenu Link 1</li>
                <li>Submenu Link 1</li>
            </ul>
        </div>
    </li>
    <li>
        <a href="link for label">Top Level Header2</a>
        <div class="submenu">
            <ul>
                <li>Submenu Link 2</li>
                <li>Submenu Link 2</li>
                <li>Submenu Link 2</li>
            </ul>
        </div>
    </li>
    <li>
        <a href="link for label">Top Level Header3</a>
        <div class="submenu">
            <ul>
                <li>Submenu Link 3</li>
                <li>Submenu Link 3</li>
                <li>Submenu Link 3</li>
            </ul>
        </div>
    </li>
</ul> 
```

任何指导肯定会受到赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:18:58.460

那么 XPath 允许您选择具有相应轴的以下或前面的兄弟元素。为了提高效率，您可以使用密钥：

```
<xsl:stylesheet version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:key name="subs" match="widget[@type = 'nav']/links/tab[@type = 'page']"
  use="generate-id(preceding-sibling::tab[@type = 'label'][1])"/>

<xsl:output method="html" indent="yes"/>
<xsl:strip-space elements="*"/>

<xsl:template match="container/widget[@type = 'nav']">
  <ul>
    <xsl:apply-templates select="links/tab[@type = 'label' and starts-with(@header, 'Top Level')]"/>
  </ul>
</xsl:template>

<xsl:template match="links/tab[@type = 'label' and starts-with(@header, 'Top Level')]">
  <li>
    <a href="link for label">
      <xsl:value-of select="@header"/>
    </a>
    <div class="submenu">
      <ul>
        <xsl:apply-templates select="key('subs', generate-id())"/>
      </ul>
    </div>
  </li>
</xsl:template>

<xsl:template match="links/tab[@type = 'page']">
  <li>
    <xsl:value-of select="@header"/>
  </li>
</xsl:template>

</xsl:stylesheet> 
```

该样式表转换

```
<Root>
   <container>
        <widget type="nav">
            <links>
                <tab type="label" header="Top Level Tab1"/>
                <tab type="page" header="submenu of tab1"/>
                <tab type="page" header="submenu of tab1"/>
                <tab type="page" header="submenu of tab1"/>
                <tab type="label" header="Top Level Tab2"/>
                <tab type="page" header="submenu of tab2"/>
                <tab type="page" header="submenu of tab2"/>
                <tab type="page" header="submenu of tab2"/>
                <tab type="page" header="submenu of tab2"/>
                <tab type="page" header="submenu of tab2"/>
                <tab type="label" header="Top Level Tab3"/>
                <tab type="page" header="submenu of tab3"/>
                <tab type="page" header="submenu of tab3"/>
                <tab type="page" header="submenu of tab3"/>
                <tab type="page" header="submenu of tab3"/>
                <tab type="page" header="submenu of tab3"/>
            </links>
        </widget>
   </container>
</Root> 
```

进入

```
<ul>
   <li><a href="link for label">Top Level Tab1</a><div class="submenu">
         <ul>
            <li>submenu of tab1</li>
            <li>submenu of tab1</li>
            <li>submenu of tab1</li>
         </ul>
      </div>
   </li>
   <li><a href="link for label">Top Level Tab2</a><div class="submenu">
         <ul>
            <li>submenu of tab2</li>
            <li>submenu of tab2</li>
            <li>submenu of tab2</li>
            <li>submenu of tab2</li>
            <li>submenu of tab2</li>
         </ul>
      </div>
   </li>
   <li><a href="link for label">Top Level Tab3</a><div class="submenu">
         <ul>
            <li>submenu of tab3</li>
            <li>submenu of tab3</li>
            <li>submenu of tab3</li>
            <li>submenu of tab3</li>
            <li>submenu of tab3</li>
         </ul>
      </div>
   </li>
</ul> 
```

# javascript - 在 DataTables aaData 中发送 JSON 对象而不是数组

> ID：14160483
> 
> 赞同：14
> 
> 时间：2013-01-04T16:00:43.033
> 
> 标签：javascript, jquery, datatables

我在我的应用程序上使用 jquery DataTables 插件，到目前为止，我对该功能感到非常满意，尽管我想将数据稍微不同地传递给 aaData 属性。

目前它似乎只接受 javascript 数组作为

```
 [
    ['value','value','value'],
    ...,
    ...,
] 
```

我希望能够使用对象而不是数组，因为它会更干净并帮助我扩展一些我正在做的过滤。我怎样才能将一个看起来像这样的 javascript 变量传递给它（不通过 AJAX 加载）。

```
[
   {'id':1,'status':0,'name': 'hello world'},
   ...,
   ...,
] 
```

尝试将 sAjaxSource 与局部变量 [http://live.datatables.net/utecax/edit#一起使用的示例](http://live.datatables.net/utecax/edit#)

示例尝试使用带有 aaData 的对象数组 [http://live.datatables.net/iyavud/5/edit](http://live.datatables.net/iyavud/5/edit)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-04T17:06:00.833

您可以通过 aaData 属性传入对象数组，然后使用 aoColumns 属性定义应接收哪些数据的列

```
 $('#example').dataTable({
        "bProcessing": true,
        "aaData": data,// <-- your array of objects
        "aoColumns": [
            { "mData": "render_engine" }, // <-- which values to use inside object
            { "mData": "browser" },
            { "mData": "platform" },
            { "mData": "enging_version" },
            { "mData": "css_grade" }
        ]
  }); 
```

# winapi - 加载智能卡微型驱动程序而不注入卡

> ID：14160486
> 
> 赞同：1
> 
> 时间：2013-01-04T16:01:04.240
> 
> 标签：winapi, driver, smartphone, smartcard, cryptoapi

我目前正在评估是否可以在我的项目中使用智能卡微型驱动程序。我的项目是将智能手机用作读卡器，并使用它进行智能卡登录。我想知道的是，是否可以让 Microsoft Base CSP 加载智能卡微型驱动程序，而无需将卡插入通过 USB 连接的任何实际读卡器。这个想法是要么编写一个新的 csp，要么编写一个智能卡微型驱动程序，通过智能手机与智能卡通信。为了实现这一点，我通过简单的 TCP 网络连接或蓝牙连接实现了 CSP 或智能卡微型驱动程序之间的通信。无论如何，在这两种情况下，我都需要 CSP 在没有插入卡的情况下加载驱动程序。有谁知道如何实现这一目标？

仅作记录，我使用 Windows 7 作为目标平台。

# c# - 我有一个网站，每当我调试它时，浏览器都会给我和错误。

> ID：14160487
> 
> 赞同：0
> 
> 时间：2013-01-04T16:01:05.737
> 
> 标签：c#, asp.net

我不知道是什么导致了此错误，如果您需要查看我的代码，请告诉我，它是附加到我的 default.aspx 的 MasterPage.master。

这是我在浏览器中遇到的错误：

```
Server Error in '/WebSite1' Application.
--------------------------------------------------------------------------------

Content controls have to be top-level controls in a content page or a nested master page that references a master page. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Web.HttpException: Content controls have to be top-level controls in a content page or a nested master page that references a master page.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  

Stack Trace: 

[HttpException (0x80004005): Content controls have to be top-level controls in a content page or a nested master page that references a master page.]
   System.Web.UI.MasterPage.CreateMaster(TemplateControl owner, HttpContext context, VirtualPath masterPageFile, IDictionary contentTemplateCollection) +8690104
   System.Web.UI.Page.get_Master() +51
   System.Web.UI.Page.ApplyMasterPage() +15
   System.Web.UI.Page.PerformPreInit() +45
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +282

--------------------------------------------------------------------------------
Version Information: Microsoft .NET Framework Version:2.0.50727.5466; ASP.NET Version:2.0.50727.5456 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:06:25.280

在您的一个服务器控件中查找未关闭的标签或标签的无效关闭。

[内容控件必须是顶级控件](https://stackoverflow.com/questions/313442/content-controls-have-to-be-top-level-controls)

# c# - C# 在不使用 System.IO.FileInfo 的情况下获取文件属性

> ID：14160489
> 
> 赞同：1
> 
> 时间：2013-01-04T16:01:11.960
> 
> 标签：c#, filenames, fileinfo, getfiles, system.io.fileinfo

是否可以从给定文件中提取“某些”属性而不使用`System.IO.FileInfo`？

我的意思是，我喜欢`FileInfo`在我只有几个文件要处理的情况下使用，但是如果，例如，我想从 50 万个文件中获取文件名列表，我决定使用`FileInfo`.. . 它需要永远！

我怀疑`FileInfo`将有关该文件的一堆其他内容加载到内存中（对吗？）。如果是这样，我觉得应该有一种更快的方法来获取名称或文件扩展名。

另一方面，我可以只使用`Directory.GetFiles(myPath)`，但这给了我一个包含每个文件的**完整路径**的数组，而我只需要每个文件**的名称**！（我想我可以解析路径字符串以从中提取名称......这会比使用更快`FileInfo`吗？）

如果我想更快地完成此操作（获取文件名或获取文件扩展名），还有哪些其他选择？

非常感谢你！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T16:02:20.317

您正在寻找`Path`类中的方法。

具体来说，`Path.GetFileName()`和`Path.GetExtension()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T17:41:57.887

受您的问题启发，我比较了 FileInfo 和 FileSystemObject。我测量了遍历 SSD 驱动器所需的时间。

**本质上，FileInfo 比 FileSystemObject 快大约三倍。**

我在我的系统上重复了测量以排除缓存效应：

```
test FileInfo Files: 489557 Directories: 66023
FileInfo traversal needed 12,07s

test FileSystemObject. Files: 489557 Directories: 66023 
FileInfo traversal needed 38,59s 
```

尝试使用 Windows API 可能是值得的。但是由于 Marshalling，调用和参数传递必须支付性能费用。

一个自制的 C 实用程序需要大约 8 秒来扫描 SSD。

编码：

```
using System;
using System.Linq;

using Scripting;
using System.Diagnostics;
using System.IO;

namespace akTest
{
    class Program
    {
        static void Main(string[] args)
        {
            Stopwatch watch = new Stopwatch();

            watch.Start();
            testFileInfo(@"c:\");
            watch.Stop();
            o("FileInfo traversal needed " + (watch.ElapsedMilliseconds/1000.0).ToString("#.##") + "s");

            watch.Start();
            testFSO(@"c:\");
            watch.Stop();
            o("FileInfo traversal needed " + (watch.ElapsedMilliseconds / 1000.0).ToString("#.##") + "s");

            o("");
            o("Ciao!");
        }

        static void o(string s)
        {
            Console.WriteLine(s);
        }

        static void testFileInfo(string dir)
        {
            DirectoryInfo di = new DirectoryInfo(dir);
            long fileCount = 0;
            long dirCount = 0;
            long calls = 0;

            o("Testing FileInfo");

            WalkDirectoryTree(di, ref fileCount, ref dirCount, ref calls);

            o("testFileInfo completed. Files: " + fileCount + " Directories: " + dirCount + " Calls: " + calls);
        }

        static void testFSO(string dir)
        {
            FileSystemObject fso = new FileSystemObject();
            Folder folder = fso.GetFolder(dir);

            long fileCount = 0;
            long dirCount = 0;
            long calls = 0;

            o("Testing FSO");

            WalkDirectoryTree(folder, ref fileCount, ref dirCount, ref calls);

            o("testFSO completed. Files: " + fileCount + " Directories: " + dirCount + " Calls: " + calls);
        }

        static void WalkDirectoryTree(DirectoryInfo root, ref long fileCount, ref long dirCount, ref long calls)
        {
            FileInfo[] files = null;
            DirectoryInfo[] subDirs = null;

            if (++calls % 10000 == 0)
                o("" + calls);

            try
            {
                files = root.GetFiles("*.*");

                if (files != null)
                {
                    fileCount += files.Count();
                    subDirs = root.GetDirectories();
                    dirCount += subDirs.Count();

                    foreach (DirectoryInfo dirInfo in subDirs)
                    {
                        WalkDirectoryTree(dirInfo, ref fileCount, ref dirCount, ref calls);
                    }
                }
            }
            catch (Exception)
            {
            }
        }

        static void WalkDirectoryTree(Folder root, ref long fileCount, ref long dirCount, ref long calls)
        {
            Files files = null;
            Folders subDirs = null;

            if (++calls % 10000 == 0)
                o("" + calls);

            try
            {
                files = root.Files;

                if (files != null)
                {
                    fileCount += files.Count;
                    subDirs = root.SubFolders;
                    dirCount += subDirs.Count;

                    foreach (Folder fd in subDirs)
                    {
                        WalkDirectoryTree(fd, ref fileCount, ref dirCount, ref calls);
                    }
                }
            }
            catch (Exception)
            {
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T16:03:13.237

`Path.GetFilename`如果您只对文件名感兴趣，您可以使用它来获取文件名。

# qt - 在代码中连接信号和插槽并在 QtCreator“信号和插槽编辑器”窗口中设置它们有什么区别？

> ID：14160495
> 
> 赞同：2
> 
> 时间：2013-01-04T16:01:28.950
> 
> 标签：qt

在 C++ 代码中连接信号和插槽并在 QtCreator“信号和插槽编辑器”窗口中设置它们有什么区别？

我在 QtCreator 窗口中看到，还有一个“信号和插槽编辑器”小部件和“动作编辑器”小部件，以便我可以添加和编辑。但是我应该什么时候使用它？还是我可以忽略它？请告诉我最好遵循的规则是什么。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T16:35:59.753

> 在 C++ 代码中连接信号和插槽并在 QtCreator“信号和插槽编辑器”窗口中设置它们有什么区别？

没有。当您使用编辑器时，它会将数据写入您的`.ui`文件，然后用于使用`uic`预处理器创建 C++ 代码。

> 还有一个“信号和插槽编辑器”小部件和“动作编辑器”小部件，以便我可以添加和编辑。但是我应该什么时候使用它？还是我可以忽略它？请告诉我最好遵循的规则是什么。

没有“要遵循的规则”，这是个人品味。我*个人*觉得 Designer 是一个生硬的工具，所以除了对话框，我很少使用它；而其他人则认为它很有帮助，并尽可能多地使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T16:35:45.037

功能上没有区别。你可以使用任何更适合你的东西。但是，我建议保持一致，并尽可能坚持使用一种方法。这使得更容易找到建立了哪些连接 - 特别是如果代码要由其他人维护。

如果您经常将信号连接到非视觉对象，您可能会发现在源代码中保持所有连接更容易，但您的里程可能会非常大。

# javascript - 如何按数据属性的数值对元素进行排序？

> ID：14160498
> 
> 赞同：62
> 
> 时间：2013-01-04T16:01:45.950
> 
> 标签：javascript, html, jquery

我有多个具有属性的元素：`data-percentage`，有没有一种方法可以先使用 JavaScript 或 jQuery 将元素排序为最低值的升序？

HTML：

```
<div class="testWrapper">
  <div class="test" data-percentage="30">
  <div class="test" data-percentage="62">
  <div class="test" data-percentage="11">
  <div class="test" data-percentage="43">
</div> 
```

期望的结果：

```
<div class="testWrapper">
  <div class="test" data-percentage="11">
  <div class="test" data-percentage="30">
  <div class="test" data-percentage="43">
  <div class="test" data-percentage="62">
</div> 
```

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2013-01-04T16:04:03.377

使用[`Array.sort`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)：

```
var $wrapper = $('.testWrapper');

$wrapper.find('.test').sort(function(a, b) {
    return +a.dataset.percentage - +b.dataset.percentage;
})
.appendTo($wrapper); 
```

这是小提琴：http: [//jsfiddle.net/UdvDD/](http://jsfiddle.net/UdvDD/)

* * *

如果您使用的是 IE < 10，则不能使用该`dataset`属性。改用`getAttribute`：

```
var $wrapper = $('.testWrapper');

$wrapper.find('.test').sort(function(a, b) {
    return +a.getAttribute('data-percentage') - +b.getAttribute('data-percentage');
})
.appendTo($wrapper); 
```

这是小提琴：http: [//jsfiddle.net/UdvDD/1/](http://jsfiddle.net/UdvDD/1/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-16T09:30:53.173

```
$('.testWrapper').find('.test').sort(function (a, b) {
   return $(a).attr('data-percentage') - $(b).attr('data-percentage');
})
.appendTo('.testWrapper'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-01-15T00:11:45.963

出于某种原因，在 Firefox 64.0.2 上，没有一个答案对我有用。这就是最终奏效的方法，混合了 Joseph Silber 和 Jeaf Gilbert 的答案：

```
var $wrapper = $('.testWrapper');

$wrapper.find('.test').sort(function(a, b) {
    return +$(a).data('percentage') - +$(b).data('percentage');
})
.appendTo($wrapper); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T16:21:41.417

我认为 Tinysort Jquery 插件应该是一个选项，你可以在这里得到它：http: [//tinysort.sjeiti.com/](http://tinysort.sjeiti.com/)

我没有尝试过，但代码应该如下所示：

```
$("#test > div").tsort("",{attr:"data-percentage"}); 
```

希望这会有所帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-14T17:08:47.823

一个更强大的选项，此功能可以让您根据多个选项对元素进行排序。

[https://jsfiddle.net/L3rv3y7a/1/](https://jsfiddle.net/L3rv3y7a/1/)

```
// This calls the function
DOYPSort('#wrapper', '.element', value, order);

    // Parameters must be strings
    // Order of must be either 'H' (Highest) or 'L' (Lowest)
    function DOYPSort(wrapper, elementtosort, AttrToSort, orderof) {
        $(wrapper).find(elementtosort).sort(function (a, b) {
            if (orderof === 'H') {
                return +b.getAttribute(AttrToSort) - +a.getAttribute(AttrToSort);
            } 
            if (orderof === 'L') {
                return +a.getAttribute(AttrToSort) - +b.getAttribute(AttrToSort);
            }
        }).appendTo(wrapper);
    } 
```

# jsp - 如何使用 useBean 从哈希表中打印 JSP 页面上的值

> ID：14160500
> 
> 赞同：0
> 
> 时间：2013-01-04T16:01:48.917
> 
> 标签：jsp, shopping-cart

我使用 jsp 和 servlet 创建了一个购物车应用程序。

我可以将商品添加到购物车。

但我想**以下表格式显示****“查看购物车”** jsp页面上的项目。

 **```
Item    |   Quantity   |   Price
book1   |       1      |   100
book2   |       2      |   200
Total   |       3      |   300 
```

我也想在页面中使用`updateQuantity()`和`removeFromCart()`功能。`ViewCart.jsp`

我该怎么做？

页面代码如下。

* * *

**购物车.java**

```
 package beans;

import java.util.Enumeration;
import java.util.Hashtable;

public class ShoppingCart {

protected Hashtable items=new Hashtable();

public void addItem(String itemId,String desc,float price,int quantity)
{
    String [] item={itemId,desc,Float.toString(price),Integer.toString(quantity)};

    if(items.containsKey(itemId))
    {
        String [] tmpItem=(String[])items.get(itemId);
        int tmpQuant=Integer.parseInt(tmpItem[3]);
        quantity+=tmpQuant;
        tmpItem[3]=Integer.toString(quantity);
    }

    else
    {
        items.put(itemId,item);
    }
}

public void removeItem(String itemId)
{
    if(items.containsKey(itemId))
    {
        items.remove(itemId);
    }
}

public void updateQuantity(String itemId,int quantity)
{
    if(items.contains(itemId))
    {
        String [] tmpItem=(String[])items.get(itemId);
        tmpItem[3]=Integer.toString(quantity);
    }
}

public Enumeration getEnumeration()
{
    return items.elements();
}

public float getCost()
{
    Enumeration enumeration=items.elements();
    String [] tmpItem;
    float totalCost=0.00f;

    while(enumeration.hasMoreElements())
    {
        tmpItem=(String[]) enumeration.nextElement();
        totalCost+=(Integer.parseInt(tmpItem[3]))*(Float.parseFloat(tmpItem[2]));
    }

    return totalCost;
}

public int getNumberOfItems()
{
    Enumeration enumeration=items.elements();
    String [] tmpItem;
    int numberOfItems=0;

    while(enumeration.hasMoreElements())
    {
        tmpItem=(String[])enumeration.nextElement();
        numberOfItems+=Integer.parseInt(tmpItem[3]);
    }

    return numberOfItems;
}

public String[] showCart()
{
    String itemId = null;
    String [] tmpItem = null;
    int tmpId;
    String desc = null;
    float price = 0;
    int quantity = 0;
    String [] item={itemId,desc,Float.toString(price),Integer.toString(quantity)};
    Enumeration enumeration=items.elements();
    while(enumeration.hasMoreElements())
    {
         tmpItem=(String[])enumeration.nextElement();
        tmpId=Integer.parseInt(tmpItem[0]);

    }

   return tmpItem;
}
} 
```

* * *

**产品.jsp**

```
<%@page import="beans.ShoppingCart"%>
<%@page import="java.util.*" %>
<%@page import="javax.servlet.http.*" %>
<jsp:useBean id="cart" scope="session" class="beans.ShoppingCart" />

<head>
<title>Product</title>  
</head>  

<body>     
   <p>Shopping Cart  Quantity : <%=cart.getNumberOfItems()  Price : <%=cart.getCost() %></p>
   <h2>Book 1 </h2><br>

   <h2> Price :  250</h2><br>

   <form action="Product.jsp" method="POST">
    <input type="submit" name="Submit" value="Add to Cart">
    <input type="hidden" name="id" value="1">
    <input type="hidden" name="desc" value="Book 1">
    <input type="hidden" name="price" value="250">
  </form>

  <h2> BOOK 2</h2><br>

  <h2> Price : 300</h2>><br>    

  <form action="Product.jsp" method="POST">
  <input type="submit" name="Submit" value="Add to Cart">
    <input type="hidden" name="id" value="2">
    <input type="hidden" name="desc" value="Book 2">
    <input type="hidden" name="price" value="300">
  </form>

</body>
</html> 
```**

# java - Android, ListView 和 ArrayAdapter, getView 只调用一次

> ID：14160504
> 
> 赞同：0
> 
> 时间：2013-01-04T16:02:24.123
> 
> 标签：java, android, listview

我正在尝试在列表视图上显示一些数据。我的问题是我的列表视图中只显示了一项。

我在这里找到了很多主题，但没有一个对我有帮助。

我看到 getView() 方法只被调用一次（我检查了我的列表，它的大小是 178）。

这是我的代码：

```
public class RiverListArrayAdaptater extends ArrayAdapter<LinkedList<River>> {

    private Context context;
    private LinkedList<River> list;

    public RiverListArrayAdaptater(Context context,LinkedList<River> list) {
        super(context,R.layout.list_river);
        this.context = context;
        this.list = list;
    }

    public View getView(int pos, View convertView, ViewGroup parent) {
        // Get variables
        LayoutInflater inflater = (LayoutInflater) cont        ext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);       
        View rowView = inflater.inflate(R.layout.list_river, parent, false);
        TextView textViewName = (TextView) rowView.findViewById(R.id.name);
        TextView textViewValue = (TextView) rowView.findViewById(R.id.value);
        ImageView imageView = (ImageView) rowView.findViewById(R.id.logo);
        textViewName.setText(list.get(pos).getName());
        textViewValue.setText(list.get(pos).getDebit());
        imageView.setImageResource(R.drawable.down);

        return rowView;
    }

} 
```

我在 onCreate() 中的代码：

```
 LinkedList<River> list = parser.parse(getter.getData());
            RiverListArrayAdaptater adaptater = new     RiverListArrayAdaptater(this,list);
            adaptater.notifyDataSetChanged();
            adaptater.add(list);
            list1.setAdapter(adaptater); 
```

这里是我的两个 XML 文件：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

     <ListView
        android:id="@+id/listRiver"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
      />

</RelativeLayout> 
```

和：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="5dp" >

    <ImageView
        android:id="@+id/logo"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="20dp"
        android:layout_marginTop="5dp"
        android:contentDescription="@+id/up_or_down"
        >
    </ImageView>

    <TextView
        android:id="@+id/name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="20sp" >
    </TextView>

    <TextView
        android:id="@+id/value"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="15sp" >
    </TextView>

</LinearLayout> 
```

谢谢你的时间...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:06:43.883

您需要在 ArrayAdapter 中覆盖 getCount 并返回列表中有多少项。

查看[ArrayAdapter 的源代码以](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/widget/ArrayAdapter.java)获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T18:24:09.313

我从未使用过`ArrayAdapter`，但我认为你应该从而`River`不是`LinkedList<River>`和

```
public class RiverListArrayAdaptater extends ArrayAdapter<LinkedList<River>> {...} 
```

应替换为：

```
public class RiverListArrayAdaptater extends ArrayAdapter<River> {...} 
```

该列表被视为基本对象，您最终得到一个列表`LinkedList`而不是列表`River`；因此，您只有一项，`ListView`因为您只有一项`LinkedList`。

# google-fusion-tables - 如何在谷歌融合表的窗口布局中添加按钮？

> ID：14160505
> 
> 赞同：0
> 
> 时间：2013-01-04T16:02:26.787
> 
> 标签：google-fusion-tables

如何在谷歌融合表的窗口布局中添加按钮？当我单击“GO”按钮时，我想获得从特定点到该点的方向。（https://developers.google.com/fusiontables/docs/samples/infowindow_driving_directions）

是否可以在自定义窗口布局中添加脚本？我想将这些功能添加到此页面。我在自定义窗口布局中添加了这个。

```
<div class='googft-info-window' style='font-family: sans-serif'>
<b>FamilyID:</b> {FamilyID}<br>
<b>FamilyHead:</b> {FamilyHead}<br>
<b>Ward:</b> {Ward}<br>
Get direction : <input type="button">Go</button>
</div> 
```

按钮不显示。下面给出了我的融合表的链接。

[https://www.google.com/fusiontables/DataSource?docid=1cabvZOod51ubZI815QTLL8Py2CM4DWkSE3E3Pds&pli=1#map:id=3](https://www.google.com/fusiontables/DataSource?docid=1cabvZOod51ubZI815QTLL8Py2CM4DWkSE3E3Pds&pli=1#map:id=3)

问候， 撒迦利亚 Cherian

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:59:16.080

你的语法不正确。

```
<input type="button" value="Go"> 
```

但是你可能也想让它实际做一些事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:33:19.327

指定信息窗口内容有两种不同的方式：(1) 在 Fusion Tables UI/信息窗口模板内 (2) 单击后，使用 Javascript 和 Google Maps API 指定信息窗口内容。

方法（1）不接受脚本。您将无法使您的按钮工作。方法（2）将支持您的按钮。但是，您不能在 Fusion Tables UI 中执行此操作。您必须使用 Google Maps API 将您的地图设置为 Fusion Tables 图层（FusionTableslayer 向导可以提供帮助），然后抑制 Fusion Tables 信息窗口并指定您自己的信息窗口内容。有关如何执行此操作的模型，请参阅[示例代码。](https://developers.google.com/fusiontables/docs/samples/infowindow_driving_directions)

-丽贝卡

# excel - Excel 2010 VBA - 错误：对象变量或未设置块变量

> ID：14160510
> 
> 赞同：3
> 
> 时间：2013-01-04T16:02:49.447
> 
> 标签：excel, vba, excel-2010

我有一个自己的类（ClassFoo），它有一个简单的属性（pName），我无法设置它，因为我总是得到错误......

```
Class Modules - ClassFoo
---
Public pName as String

Public Property Let Name(Value as String)
   pName = Value
End Property
----
Somewhere else in the ModuleX
...
Dim Foo as ClassFoo
Foo.Name = "foo" <- throws error 
Foo.pName = "foo" <- throws error 
```

或者

```
With Foo
.pName = "foo" <- throws error 
End With 
```

我将“Instancing”类从“Private”更改为“PublicNotCreatable”（来回）但我仍然有同样的错误......

感谢您提前回复。

CS

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T16:04:31.193

您需要创建一个实例并将其分配给它`Foo`；

```
Dim Foo as ClassFoo
Set Foo = new ClassFoo 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T16:04:47.313

你需要实例化它我相信尝试

```
 Dim foo as new ClassFoo 
```

# php - 导出到 csv wordpress

> ID：14160511
> 
> 赞同：8
> 
> 时间：2013-01-04T16:02:52.703
> 
> 标签：php, wordpress, csv, header

我需要将数据导出到 csv 文件中的一个表中。我能够很好地获取数据，但浏览器没有生成 CSV 文件。

我的代码是这样的：标题的问题。我只得到带有逗号分隔值的输出，但没有得到 csv 文件。

```
/* Converting data to CSV */

public function CSV_GENERATE($getTable)
{
    ob_clean();
    global $wpdb;
    $field='';
    $getField ='';

    if($getTable){
        $result = $wpdb->get_results("SELECT * FROM $getTable");
        $requestedTable = mysql_query("SELECT * FROM ".$getTable);
        // echo "hey";die;//var_dump($result);die;

        $fieldsCount = mysql_num_fields($requestedTable);

        for($i=0; $i<$fieldsCount; $i++){
            $field = mysql_fetch_field($requestedTable);
            $field = (object) $field;         
            $getField .= $field->name.',';
        }

        $sub = substr_replace($getField, '', -1);
        $fields = $sub; # GET FIELDS NAME
        $each_field = explode(',', $sub);
        $csv_file_name = $getTable.'_'.date('Ymd_His').'.csv'; 
        # CSV FILE NAME WILL BE table_name_yyyymmdd_hhmmss.csv

        # GET FIELDS VALUES WITH LAST COMMA EXCLUDED
        foreach($result as $row){
            for($j = 0; $j < $fieldsCount; $j++){
                if($j == 0) $fields .= "\n"; # FORCE NEW LINE IF LOOP COMPLETE
                $value = str_replace(array("\n", "\n\r", "\r\n", "\r"), "\t", $row->$each_field[$j]); # REPLACE NEW LINE WITH TAB
                $value = str_getcsv ( $value , ",", "\"" , "\\"); # SEQUENCING DATA IN CSV FORMAT, REQUIRED PHP >= 5.3.0
                $fields .= $value[0].','; # SEPARATING FIELDS WITH COMMA
            }
            $fields = substr_replace($fields, '', -1); # REMOVE EXTRA SPACE AT STRING END
        }

        header("Content-type: text/x-csv"); # DECLARING FILE TYPE
        header("Content-Transfer-Encoding: binary");
        header("Content-Disposition: attachment; filename=".$csv_file_name); # EXPORT GENERATED CSV FILE
        header("Pragma: no-cache");
        header("Expires: 0"); 
        header("Content-type: application/x-msdownload");
        //header("Content-Disposition: attachment; filename=data.csv");

        return $fields; 
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-06T15:42:20.843

这现在工作得很好。我们可以将其用作插件。我修改[了这篇](http://wordpress.org/support/topic/export-wordpress-db-table-to-excel)文章。感谢 sruthi sri。

希望这对某人有帮助:)

```
<?php

class CSVExport
{
/**
* Constructor
*/
public function __construct()
{
if(isset($_GET['download_report']))
{
$csv = $this->generate_csv();

header("Pragma: public");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Cache-Control: private", false);
header("Content-Type: application/octet-stream");
header("Content-Disposition: attachment; filename=\"report.csv\";" );
header("Content-Transfer-Encoding: binary");

echo $csv;
exit;
}

// Add extra menu items for admins
add_action('admin_menu', array($this, 'admin_menu'));

// Create end-points
add_filter('query_vars', array($this, 'query_vars'));
add_action('parse_request', array($this, 'parse_request'));
}

/**
* Add extra menu items for admins
*/
public function admin_menu()
{
add_menu_page('Download Report', 'Download Report', 'manage_options', 'download_report', array($this, 'download_report'));
}

/**
* Allow for custom query variables
*/
public function query_vars($query_vars)
{
$query_vars[] = 'download_report';
return $query_vars;
}

/**
* Parse the request
*/
public function parse_request(&$wp)
{
if(array_key_exists('download_report', $wp->query_vars))
{
$this->download_report();
exit;
}
}

/**
* Download report
*/
public function download_report()
{
echo '<div class="wrap">';
echo '<div id="icon-tools" class="icon32">
</div>';
echo '<h2>Download Report</h2>';
//$url = site_url();

echo '<p>Export the Subscribers';
}

/**
* Converting data to CSV
*/
public function generate_csv()
{
$csv_output = '';
$table = 'users';

$result = mysql_query("SHOW COLUMNS FROM ".$table."");

$i = 0;
if (mysql_num_rows($result) > 0) {
while ($row = mysql_fetch_assoc($result)) {
$csv_output = $csv_output . $row['Field'].",";
$i++;
}
}
$csv_output .= "\n";

$values = mysql_query("SELECT * FROM ".$table."");
while ($rowr = mysql_fetch_row($values)) {
for ($j=0;$j<$i;$j++) {
$csv_output .= $rowr[$j].",";
}
$csv_output .= "\n";
}

return $csv_output;
}
}

// Instantiate a singleton of this plugin
$csvExport = new CSVExport(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-04T14:50:16.063

我是一个大器晚成的人，但对你们工作并希望分享的代码做了一个小的“改进”。**如果代码粘贴在主插件 .php 文件中，则无需执行这 3 个步骤。只需根据需要更改脚本底部的值。**我喜欢保持整洁，尽管有很多评论给你们。

对于可能需要此功能并增加每个人使用的灵活性的初学者：

1.  首先添加全局变量`define('MY_PLUGIN_DIR', plugin_dir_path(__FILE__));`
2.  之后添加`require_once(PARTS_MY_PLUGIN_DIR . '/databasestuff/table_to_csv.php')`
3.  在`your_plugin_directory/databasestuff/table_to_csv.php`保存以下类并根据需要更改最后几行。
4.  调整最后几行

    ```
    class export_table_to_csv{

      private $db;
      private $table_name;
      private $separator;

      function __construct($table_n, $sep, $filename){

        global $wpdb;                                               //We gonna work with database aren't we?
        $this->db = $wpdb;                                          //Can't use global on it's own within a class so lets assign it to local object.
        $this->table_name = $table_n;                               
        $this->separator = $sep;

        $generatedDate = date('d-m-Y His');                         //Date will be part of file name. I dont like to see ...(23).csv downloaded

        $csvFile = $this->generate_csv();                           //Getting the text generated to download
        header("Pragma: public");
        header("Expires: 0");
        header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
        header("Cache-Control: private", false);                    //Forces the browser to download
        header("Content-Type: application/octet-stream");
        header("Content-Disposition: attachment; filename=\"" . $filename . " " . $generatedDate . ".csv\";" );
        header("Content-Transfer-Encoding: binary");

        echo $csvFile;                                              //Whatever is echoed here will be in the csv file
        exit;

      }

      function generate_csv(){

        $csv_output = '';                                           //Assigning the variable to store all future CSV file's data
        $table = $this->db->prefix . $this->table_name;             //For flexibility of the plugin and convenience, lets get the prefix

        $result = $this->db->get_results("SHOW COLUMNS FROM " . $table . "");   //Displays all COLUMN NAMES under 'Field' column in records returned

        if (count($result) > 0) {

            foreach($result as $row) {
                $csv_output = $csv_output . $row->Field . $this->separator;
            }
            $csv_output = substr($csv_output, 0, -1);               //Removing the last separator, because thats how CSVs work

        }
        $csv_output .= "\n";

        $values = $this->db->get_results("SELECT * FROM " . $table . "");       //This here

        foreach ($values as $rowr) {
            $fields = array_values((array) $rowr);                  //Getting rid of the keys and using numeric array to get values
            $csv_output .= implode($this->separator, $fields);      //Generating string with field separator
            $csv_output .= "\n";    //Yeah...
        }

        return $csv_output; //Back to constructor

      }
    }

    // Also include nonce check here - https://codex.wordpress.org/WordPress_Nonces
    if(isset($_POST['processed_values']) && $_POST['processed_values'] == 'download_csv'){  //When we must do this
      $exportCSV = new export_table_to_csv('table_name',';','report');              //Make your changes on these lines
    } 
    ```

记住：

1.  表前缀将添加到表名中。
2.  该脚本使用核心 WordPress 函数，这意味着最后 3 行实际上是您必须更改的所有内容才能使其正常工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-24T23:27:25.000

只需对@Developer 进行一些小调整，因为它并没有在管理员中完全启动，或者下载 csv。但现在它会:)：

```
<?php

/**
 * CSV Exporter bootstrap file
 *
 * This file is read by WordPress to generate the plugin information in the plugin
 * admin area. This file also includes all of the dependencies used by the plugin,
 * registers the activation and deactivation functions, and defines a function
 * that starts the plugin.
 *
 * @since             1.0.0
 * @package           CSV Export
 *
 * @wordpress-plugin
 * Plugin Name:       CSV Export
 * Plugin URI:        http://example.com/plugin-name-uri/
 * Description:       exports csvs derrr
 * Version:           1.0.0
 * Author:            Your Name or Your Company
 * Author URI:        http://example.com/
 * License:           GPL-2.0+
 * License URI:       http://www.gnu.org/licenses/gpl-2.0.txt
 * Text Domain:       csv-export
 * Domain Path:       /languages
 */
class CSVExport {

  /**
   * Constructor
   */
  public function __construct() {
    if (isset($_GET['report'])) {

      $csv = $this->generate_csv();
      header("Pragma: public");
      header("Expires: 0");
      header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
      header("Cache-Control: private", false);
      header("Content-Type: application/octet-stream");
      header("Content-Disposition: attachment; filename=\"report.csv\";");
      header("Content-Transfer-Encoding: binary");

      echo $csv;
      exit;
    }

// Add extra menu items for admins
    add_action('admin_menu', array($this, 'admin_menu'));

// Create end-points
    add_filter('query_vars', array($this, 'query_vars'));
    add_action('parse_request', array($this, 'parse_request'));
  }

  /**
   * Add extra menu items for admins
   */
  public function admin_menu() {
    add_menu_page('Download Report', 'Download Report', 'manage_options', 'download_report', array($this, 'download_report'));
  }

  /**
   * Allow for custom query variables
   */
  public function query_vars($query_vars) {
    $query_vars[] = 'download_report';
    return $query_vars;
  }

  /**
   * Parse the request
   */
  public function parse_request(&$wp) {
    if (array_key_exists('download_report', $wp->query_vars)) {
      $this->download_report();
      exit;
    }
  }

  /**
   * Download report
   */
  public function download_report() {
    echo '<div class="wrap">';
    echo '<div id="icon-tools" class="icon32">
</div>';
    echo '<h2>Download Report</h2>';
    echo '<p><a href="?page=download_report&report=users">Export the Subscribers</a></p>';
  }

  /**
   * Converting data to CSV
   */
  public function generate_csv() {
    $csv_output = '';
    $table = 'wp_users';

    $result = mysql_query("SHOW COLUMNS FROM " . $table . "");

    $i = 0;
    if (mysql_num_rows($result) > 0) {
      while ($row = mysql_fetch_assoc($result)) {
        $csv_output = $csv_output . $row['Field'] . ",";
        $i++;
      }
    }
    $csv_output .= "\n";

    $values = mysql_query("SELECT * FROM " . $table . "");
    while ($rowr = mysql_fetch_row($values)) {
      for ($j = 0; $j < $i; $j++) {
        $csv_output .= $rowr[$j] . ",";
      }
      $csv_output .= "\n";
    }

    return $csv_output;
  }

}

// Instantiate a singleton of this plugin
$csvExport = new CSVExport(); 
```

只需创建一个名为 csv_export.php 的文件，将其放在 plugins/csv_export/ 中，您就是 gtg！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T16:38:40.853

我不确定，但可能有几件事。

您的大括号不匹配 - 您在`}`某处缺少闭合。

您实际上并没有将生成的内容发送到任何地方，除非您在调用例程中执行此操作？也许你的意思是`echo $fields;`，不是`return $fields;`？

您在打电话`ob_clean()`- 您是否打开了输出缓冲？也许您`ob_end_clean()`的意思是 - 丢弃缓冲区并关闭缓冲？

我正在创建一个用于导出的 CSV；它仅使用以下标头：

```
header('Content-Type: text/csv');
header('Content-Disposition: attachment; filename="' . $csv_file_name . '"');
header('Pragma: no-cache');
header('Expires: 0'); 
```

在与您的电话的差异方面：

1.  您要发送两个`Content-Type`标头
2.  我的文件名有引号
3.  我没有指定`Content-Transfer-Encoding`

我不知道这些差异中的任何一个都与您的问题有关，我只是列出它们以防万一。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-13T11:09:48.823

我遇到了同样的问题。我发现问题不是标题代码，而是你点击导出的链接。你需要添加一个名为“noheader”的参数：</p>

```
 <a href="admin.php?page=export&export=posts&noheader=1">Export</a> 
```

我用这个问题中提到的完全相同的标头代码替换了我的代码，它也可以正常工作。我的导出过程代码如下所示：

```
if( isset( $_GET['export'] ) ) {

    $csv = generate_csv();

    $filename = 'results.csv';
    $now = gmdate('D, d M Y H:i:s') . ' GMT';

    header( 'Content-Type: application/octet-stream' ); // tells browser to download

    header( 'Content-Disposition: attachment; filename="' . $filename .'"' );
    header( 'Pragma: no-cache' ); // no cache
    header( 'Expires: ' . $now ); // expire date

    echo $csv;
    exit;
} 
```

最后两个标头告诉浏览器不要缓存导出的内容。

# c# - 编组后字段中的值错误

> ID：14160512
> 
> 赞同：4
> 
> 时间：2013-01-04T16:02:54.063
> 
> 标签：c#, c++, marshalling

我正在尝试将原始结构从 C++ 编组为 C#，并具有以下代码：

```
using System;
using System.Runtime.InteropServices;

namespace dotNet_part
{
    class Program
    {
        static void Main(string[] args)
        {
            Custom custom = new Custom();
            Custom childStruct = new Custom();

            IntPtr ptrToStructure = Marshal.AllocCoTaskMem(Marshal.SizeOf(childStruct));
            Marshal.StructureToPtr(childStruct, ptrToStructure, true);

            custom.referenceType = ptrToStructure;
            custom.valueType = 44;

            Custom returnedStruct = structureReturn(custom);
            Marshal.FreeCoTaskMem(ptrToStructure);

            returnedStruct = (Custom)Marshal.PtrToStructure(returnedStruct.referenceType, typeof(Custom));
            Console.WriteLine(returnedStruct.valueType); // Here 'm receiving 12 instead of 44
        }

        [return:MarshalAs(UnmanagedType.I4)]
        [DllImport("CPlusPlus part.dll")]
        public static extern int foo(Custom param);

        // [return:MarshalAs(UnmanagedType.Struct)]
        [DllImport("CPlusPlus part.dll")]
        public static extern Custom structureReturn(Custom param);
    }

    [StructLayout(LayoutKind.Sequential)]
    struct Custom
    {
        [MarshalAs(UnmanagedType.I4)]
        public int valueType;
        public IntPtr referenceType;
    }
} 
```

和 C++ 部分：

```
typedef struct Custom CUSTOM;
extern "C"
{
    struct Custom
    {
       int valueType;
       Custom* referenceType;
    } Custom;

    _declspec(dllexport) int foo(CUSTOM param)
    {
      return param.referenceType->valueType;
    }

    _declspec(dllexport) CUSTOM structureReturn(CUSTOM param)
    {
      return param;
    }
} 
```

为什么我收到 12 而不是 44 in `returnedStruct.valueType`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T16:09:03.597

您在这里有两个错误：

从语义上讲，您正在设置`custom.valueType = 44`但在结构返回时，您正在检查`custom.referenceType->valueType`，它不应该是 44 - 它应该是 0。

第二个错误是你在解组*之前*`Marshal.FreeCoTaskMem()`调用了这个指针（`custom.referenceType`）！这意味着您正在将*未分配的内存*解组到您的结构中。此时，这是未定义的行为，答案为 12 与收到访问冲突一样有效。**`Custom`**

 *** * *

要解决第一个问题，您要么需要在不解组的情况下进行检查，要么需要在将其`returnedStruct.valueType` *编组*为44 之前将其设置为.`returnedStruct.referenceType``childStruct.valueType``ptrToStructure`

要解决第二个问题，您需要颠倒调用`Marshal.PtrToStructure()`和的顺序`Marshal.FreeCoTaskMem()`。**

# security - 是否可以在网络级别严格限制前端和后端 Azure IaaS VM 之间的入口和出口流量？

> ID：14160514
> 
> 赞同：8
> 
> 时间：2013-01-04T16:03:08.140
> 
> 标签：security, networking, azure, dmz

我想使用[IaaS VM](http://channel9.msdn.com/Events/Build/2012/2-011)在 Azure 上创建一个超偏执的中心辐射型[DMZ](http://en.wikipedia.org/wiki/DMZ_(computing))设置。

我有一个面向公共 Internet 的前端服务器（即 IIS Web 服务器），我想严格锁定它。但是，前端需要访问一些后端服务器（即数据库、域控制器等）。我想确保：

1.  只有前端服务器可以与后端服务器通信，并且只能在商定的端口上进行通信。
2.  后端服务器无法从/向公共互联网接收**或发送流量。**
3.  后端服务器无法相互通信。
4.  **这些规则在 VM 操作系统层之外实施，以提供深度防御。**

这似乎是一个合理的场景，但我似乎无法在 Azure 上实现它。我能做的最接近的是：

*   创建 IaaS VM 前端并适当限制其端点
*   创建具有“前端”和“后端”子网的[Azure 虚拟网络，将每台计算机放置在适当的子网上。](http://www.windowsazure.com/en-us/home/features/networking/)
*   阻止 RDP 访问后端虚拟机。如果我想 RDP 到后端机器，我必须通过前端 VM 来完成。
*   在每台机器上设置 Windows 防火墙规则，以强制执行这些中心辐射式规则。

这工作正常，但它不像我想要的那样锁定。我真的很想进行深度防御，这样我就不必依赖每台机器上的 Windows/Linux 防火墙设置。例如，假设后端服务器必须使用管理员凭据运行应用程序（假设没有替代方案）。我想要一个额外的保护层，这样后端服务器上的错误（或恶意查询）就不能：

*   重新配置后端的防火墙以减少限制。
*   与前端机器以外的任何人交谈（包括公共互联网）。

据我所知，这在使用虚拟网络的 Azure 上是不可能的，因为：

*   Azure 虚拟网络似乎没有公开 ACL 或任何其他高级筛选支持。
*   Azure IaaS VM 仅支持单个 NIC，因此前端不能同时在前端和后端子网上进行多宿主。

我错过了什么吗？似乎我可以使用多个虚拟网络一起破解某些东西，并将它们作为一堆 /30 子网一起使用 VPN，但这看起来很糟糕。如果我无法在 Azure 上解决这个问题，似乎我唯一合理的选择是尝试使用[Virtual Private Cloud (VPC)在](http://aws.amazon.com/vpc/)[AWS](http://aws.amazon.com/)上设置类似的东西。任何帮助/指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-02T12:25:26.980

截至 2015 年 11 月，现在可以交付您所要求的内容，尽管是在 IaaS v2 中。

类似防火墙的规则，仅限于地址范围、端口和协议，可以通过网络安全组 (NSG) 交付。这在 Microsoft 的网站上有很好的记录：[什么是网络安全组 (NSG)？](https://azure.microsoft.com/en-gb/documentation/articles/virtual-networks-nsg/)

您现在还可以创建具有多个 NIC 的 VM（同样是 IaaS v2），但请注意，您可能需要增加 VM 大小才能添加多个 NIC。同样，这里有一篇合理的文章详细解释了它：[Create a VM with multiple NICs](https://azure.microsoft.com/en-gb/documentation/articles/virtual-networks-multiple-nics/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:36:09.900

我收到了 Azure 团队的私人答复，该答复有效地表示目前不可能。这是一项要求的功能，但没有设定其实施的时间表。

# c - C 中的高阶函数作为语法糖，只需最少的努力

> ID：14160516
> 
> 赞同：6
> 
> 时间：2013-01-04T16:03:13.897
> 
> 标签：c, compiler-construction, higher-order-functions

我想以最小的努力将 C 中的高阶函数 (HOF) 实现为语法糖。例如，对于以下代码

```
function add(int x) {
  return int(int y) {
    return x + y;
  };
}

int main() {
  function add1 = add(1);
  return add1(2);
} 
```

它被*转*译成纯 C

```
#include <stdlib.h>

typedef struct {
  void *ctx;
  void* (*fun)(void *arg, void *ctx);
} function;

function new_function(void *ctx, void* (*fun)(void *, void *)) {
  function f = {.ctx=ctx, .fun=fun};
  return f;
}

void* apply(function f, void *arg) {
  return (*(f.fun))(arg, f.ctx);
}

typedef struct {
  int x;
} context$1;

void* new_context$1(int x) {
  context$1 *ctx = malloc(sizeof(context$1));
  ctx->x = x;
  return ctx;
}

void* function$1(void *arg, void *ctx) {
  int y = (int)arg;
  int x = ((context$1*)ctx)->x;
  return (void*)(x + y);
}

function add(int x) {
  return new_function(new_context$1(x), function$1);
}

int main() {
  function add1 = add(1);
  return (int)apply(add1, (void*)2);
} 
```

我已经运行了这个（手动）转编译版本，它工作正常。对于实现，我相信一些 AST 操作和 lambda 提升就足够了。

我的方法有任何潜在的缺陷吗？是否有任何更简单的 HOF 方法，或者我可以改进我的方法以使其更易于实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:25:18.540

目前有两个明显的问题：

*   使用 void* 表示任何类型的参数和返回值最终都会中断。考虑 ia-32 上的“long long”参数，或任何按值传递的结构。
*   如果没有垃圾收集，很难（如果可能的话）使高阶函数有用。您可以从您自己的示例中看到它，其中 context$1 是 malloc 的，但从来没有 free 的。Boehm GC 在这里可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T19:04:27.423

请注意，您生成的代码会调用未定义的行为。在几个地方，您通过直接转换在整数类型和指针类型之间进行转换。这在 C 中是不合法的。您无法保证指针和 an`int`的大小相同，或者您甚至可以在它们之间进行转换而不会更改或破坏值。该代码可能会巧合地在您的特定系统上运行，但它会在许多其他系统上中断。

您可以通用处理指针和整数类型（以及结构，就此而言）的唯一方法是使用可变长度参数列表传递参数。这样，无论底层数据类型的大小如何，您都可以提取每个参数。

另一种选择是删除通用`function`结构并为代码中的每个 HOF 创建自定义结构。然后，函数指针可以直接列出所有必要的参数，而不是尝试将它们抽象到通用接口后面，这将消除有问题的强制转换并允许代码按预期工作，而不管使用的数据类型如何。

就可用性而言，请考虑更改您的接口，以便在声明它的行上指定（或至少*列出）HOF 的返回类型。*C 对象总是在声明中列出它们的类型。在您的示例中，声明是`function add1 = add(1);`. 要找出此函数返回的数据类型，您必须深入研究 HOF 的定义。对于您的示例代码而言，这不是一项艰巨的任务，但对于更复杂的代码而言，这可能并非易事。如果 HOF 来自库，您可能根本没有代码。也许类似的东西`function(int) add1 = add(1);`可能更明确。

附带说明一下，我建议您定义自动生成的函数，`static`以帮助防止模块之间的名称冲突。

# gwt - gwt - 带有 jpa 和 rdbms 的 datanucleus 的 requestfactory

> ID：14160518
> 
> 赞同：0
> 
> 时间：2013-01-04T16:03:22.437
> 
> 标签：gwt, jpa, datanucleus, requestfactory, build.xml

我正在尝试将 GWT 与 RequestFactory 和 DataNucleus（JPA 与 MySQL）一起使用，但我无法编译它。

代理类中的错误非常奇怪：UserProxy.java:12: 找不到类似于 long getId() 的域方法

在我的域类 User.java 我有这样的方法。我想知道问题出在哪里！！！

顺便说一句，如果有人可以向我展示具有类似配置（不使用 GAE）和 ant build.xml 文件的项目，我将不胜感激。

```
package com.test.shared;

import com.test.domain.User;
import com.google.web.bindery.requestfactory.shared.EntityProxy;
import com.google.web.bindery.requestfactory.shared.EntityProxyId;
import com.google.web.bindery.requestfactory.shared.ProxyFor;

@ProxyFor(User.class)
public interface UserProxy extends EntityProxy {

public long getId();

public void setId(Long id);

public Integer getVersion();

public String getFirstName();

public void setFirstName(String firstName);

public String getLastName();

public void setLastName(String lastName);

public String getEmail();

public void setEmail(String email);

    EntityProxyId<UserProxy> stableId();

}

package com.test.domain;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.EntityManager;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Version;
import javax.validation.constraints.NotNull;

@Entity
public class User {

@Id
@Column(name = "id")
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Long id;

@Version
@Column(name = "version")
private Integer version; //require to persist

@NotNull
private String firstName;

@NotNull
private String lastName;

@NotNull
private String email;

public User() {
}

public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
}

public Integer getVersion() {
    return version;
}

public void setVersion(Integer version) {
    this.version = version;
}

// -----------------------

public String getFirstName() {
    return firstName;
}

public void setFirstName(String firstName) {
    this.firstName = firstName;
}

public String getLastName() {
    return lastName;
}

public void setLastName(String lastName) {
    this.lastName = lastName;
}

public String getEmail() {
    return email;
}

public void setEmail(String email) {
    this.email = email;
}

// get EntityManager

public static final EntityManager entityManager() {
    return EMF.get().createEntityManager();
}

// implementing a service in an entity class

public static User findUserByEmail(String email) {
    if (email == null) {
        return null;
    }
    EntityManager em = entityManager(); 
    try {
        User user = em.find(User.class, email);
        return user;
    } finally {
        em.close();
    }
}

public void persist() {
    EntityManager em = entityManager();
    try {
        em.persist(this);
    } finally {
        em.close();
    }
}

public void remove() {
    EntityManager em = entityManager();
    try {
        User attached = em.find(User.class, this.id);
        em.remove(attached);
    } finally {
        em.close();
    }
}

@Override
public String toString() {
    StringBuilder sb = new StringBuilder();
    sb.append("Id: ").append(getId()).append(", ");
    sb.append("Version: ").append(getVersion()).append(", ");
    sb.append("FirstName: ").append(getFirstName()).append(", ");
    sb.append("LastName: ").append(getLastName()).append(", ");
    sb.append("Email: ").append(getEmail()).append(";");
    return sb.toString();

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:26:26.540

`Long`不是`long`。选择其中一个，但在域类和`EntityProxy`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:26:44.607

我希望自动装箱能够处理代理中的“public long getId()”和 DTO 中的“public Long getId()”之间的区别，但也许您可以尝试更改它们，以便它们都返回“long”或两者都返回返回“长”。

# javascript - 单独文档中的事件处理程序

> ID：14160521
> 
> 赞同：1
> 
> 时间：2013-01-04T16:03:37.060
> 
> 标签：javascript

我得到了这个 HTML：

```
<a href="http://www.commercial.com" onclick="confirmLeave()" target="_blank"> 
```

和

```
<IMG SRC="folder/picture_small.jpg" alt="Desrciption" onClick="view(this);"> 
```

然后我用这个 JS 代码得到了一个单独的 Javascript 文档：

```
 function confirmLeave()
  {
     if(confirm("Do you want to leave my page??")) {
      return true;
    } else {
      if(window.event) {
        window.event.returnValue = false;
      } else {
        e.preventDefault();
      }
      return false;
    }
  } 
```

和

```
function view(img) {
   imgsrc = img.src.split("_")[0] + "_big.jpg";
   viewwin = window.open(imgsrc,'viewwin', "width=790,height=444,location=0");  
  viewwin.focus();  
} 
```

我也想将我的事件处理程序移动到我的 javascript 文档中，因此我不需要在我的 HTML 中使用 onClick 命令。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:06:06.183

如果您乐于使用 jQuery，那么您可以使用[jQuery 事件](http://api.jquery.com/category/Events/)，它可以让您为各种事件附加事件处理程序，包括[click](http://api.jquery.com/click/)。

HTML...

```
<div id="target">
  Click here
</div> 
```

单独的 JavaScript 文件...

```
$("#target").click(function() {
  alert("Handler for .click() called.");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:06:49.983

这很简单：

```
document.getElementById("mylinkid").onclick = confirmLeave; 
```

顺便说一句，您应该看看（现代）JavaScript 库。

# c++ - 获取多帧的平均值

> ID：14160523
> 
> 赞同：0
> 
> 时间：2013-01-04T16:03:40.310
> 
> 标签：c++, opencv

我想在 Opencv 中获得让我们 10 帧的平均值。我没有找到任何有用的东西。

有人这样做吗？提前致谢

# iphone - 在 iOS6 中查看控制器方向问题

> ID：14160528
> 
> 赞同：0
> 
> 时间：2013-01-04T16:04:01.050
> 
> 标签：iphone, uinavigationcontroller, ios6, orientation

我的根视图控制器处于纵向模式。我在这个根视图控制器上有一个按钮，按钮操作代码如下所示：

```
-(IBAction)VideosView
{
    VideosDetailViewController *videoview=[[VideosDetailViewController alloc] initWithNibName:@"VideosDetailViewController" bundle:[NSBundle mainBundle]];
    [self.navigationController pushViewController:videoview animated:YES];
    [videoview release];
} 
```

我希望我的 VideosDetailViewController 处于横向模式。为了解决这个问题，我尝试了很多方法，但没有一个适合我。这是我到目前为止所尝试的：

```
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskLandscapeLeft;
}

 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{
    return (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft);
 } 
```

但这对我不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:20:30.860

在 iOS6 中，只有根视图可以设置支持的界面方向，在这种情况下，您的根视图是导航控制器，因此您的 VideosDetailViewController 中的 supportedInterfaceOrientations 方法甚至不会被调用。

解决此问题的一种方法是使用以下方法在 UINavigationController 上创建一个类别。然后将查询您的 VideosDetailViewController 或导航控制器中的任何当前视图。

```
-(BOOL)shouldAutorotate {
    return [[self.viewControllers lastObject] shouldAutorotate];
}

-(NSUInteger)supportedInterfaceOrientations {
    return [[self.viewControllers lastObject] supportedInterfaceOrientations];
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    return [[self.viewControllers lastObject] preferredInterfaceOrientationForPresentation];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:22:38.500

您可以使用此方法解决您的问题。它用于自动旋转功能。

```
-(NSUInteger) supportedInterfaceOrientations
{
   return [self.topViewController supportedInterfaceOrientations];
} 
```

# iphone - UIAlertViewStylePlainTextInput 未声明

> ID：14160531
> 
> 赞同：0
> 
> 时间：2013-01-04T16:04:08.503
> 
> 标签：iphone, objective-c, ios

当它应该在框架中可用时，我一直将这个属性设为未声明。

```
UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Email Alert" message:@"Enter your Email Address" delegate:self cancelButtonTitle:@"Hide" otherButtonTitles:nil];
[alert setAlertViewStyle:UIAlertViewStyleSecureTextInput];
[alert show];
[alert release]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:50:00.033

我以这种方式使用了 UIAlertViewStylePlainTextInput。请根据需要修改代码。

```
 alertType = @"phoneNumberAlert";
                 UIAlertView *phoneNumberAlert = [[UIAlertView    
                 alloc]initWithTitle:@"Notice"     
                 message:@"Please enter your Phone Number" delegate:self 
                 cancelButtonTitle:nil otherButtonTitles:@"Ok", nil];
                 [phoneNumberAlert setAlertViewStyle:UIAlertViewStylePlainTextInput];
                 UITextField *alertTextField = [phoneNumberAlert textFieldAtIndex:0];
                 alertTextField.keyboardType = UIKeyboardTypeNumberPad;
                 [phoneNumberAlert show];
                 [phoneNumberAlert release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:09:08.400

您是否正确实现了 UIAlertViewDelegate 的方法？

喜欢这个（不重命名）？

```
 - (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:57:33.687

> ```
> > alertView.alertViewStyle = UIAlertViewStylePlainTextInput;
> >     [alertView textFieldAtIndex:0].keyboardType = UIKeyboardTypeNumberPad; 
> ```

# java - java库仍然有问题

> ID：14160532
> 
> 赞同：1
> 
> 时间：2013-01-04T16:04:10.393
> 
> 标签：java, maven, import, jar, httpclient

我从来没有真正理解过 java 库，如果有人能澄清我的理解，我会很高兴：

1.  当我需要一个包时，Java 默认不提供该包，然后我用谷歌搜索它并下载二进制文件。即“HttpClient”然后我`httpcomponents-client-4.2.2-bin.zip`从 apache.org下载
2.  我首先需要将 .zip 文件导入 netbeans，然后使用`import`命令（通常会自动建议）。

我还有一些疑问/问题。

HttpClient 类似乎是 apache 客户端库的一部分，但有人告诉我`import sun.net.www.http.HttpClient`为什么？（即使我这样做也不能解决其他问题）

然后尝试使用`HttpClient httpclient = new DefaultHttpClient();`说找不到 DefaultHttpClient 符号，但该库已添加到 Netbeans。

看看这个类似的例子[http://www.vogella.com/articles/ApacheHttpClient/article.html](http://www.vogella.com/articles/ApacheHttpClient/article.html)我下载的包中没有一些导入。

这在我身上经常发生，有时我在没有真正理解的情况下设法修复它。Atm 我正在尝试实现这个答案[https://stackoverflow.com/a/3325065/960086](https://stackoverflow.com/a/3325065/960086)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T17:20:13.350

好的，关于 JVM 如何创建类的实例，您需要了解一些事情，我将从底部开始。

当 JVM 启动时，它需要加载将用于运行应用程序的类。为此，需要使用 3 个类加载器——引导类加载器、扩展类加载器和系统类加载器。前 2 个分别从 $JAVA_HOME/lib 和 $JAVA_HOME/lib/ext 中的 jar 文件加载类。它们基本上是让 JVM 运行所需要的——暂时不要担心这些。第三个类加载器，系统类加载器，是您感兴趣的。正是这个系统类加载器使用*类路径*来查找要添加到 JVM 以形成应用程序的类。

类加载器还有更多功能，但现在就可以了。

所以系统类加载器使用*类路径*来加载类。在其最简单的形式中，*类路径*只不过是对 Java 编译器将其创建的类输出到的目录的引用。在该目录中，您将找到一个目录层次结构，这些目录代表您在编写类时使用的包结构（.java 文件顶部的包声明，用于在应用程序上下文中组织您的类）和 .class 文件包含已编译的类。当 JVM 需要一个类时，系统类加载器会解析代表包的目录结构并加载该类（如果找不到则抛出 ClassNotFoundException）。

现在，Java 的优势之一是可用的 3rd 方库的绝对数量。显然，通过复制目录来共享代码是行不通的，因此使用了*Java Archive*或*JAR*文件。*JAR*只不过是一个 zip 文件，其中包含几个标准目录以及代表包结构的相同目录和我之前提到的 .class 文件。当然它会选择扩展名 .jar 但任何能够打开 zip 文件的工具都会打开一个*JAR*。要使用*JAR*，您只需像添加目录一样将其添加到类路径中，并且与目录一样，系统类加载器将解析它包含的结构以根据需要加载类。

也就是说，当您决定使用 3rd 方库时，您很少只下载一个*JAR ，就像您使用 HttpClient 的情况一样。*显然，任何 3rd 方库都不仅仅是类，大多数将包括文档、示例甚至源代码。但是，要使用 3rd 方库，过程是相同的，您需要提取包含您要使用的类的*JAR并将该**JAR*添加到您的*classpath*中。

这几乎是完整的故事——随着典型应用程序使用的 3rd 方库数量的增加，管理这些库的问题也随之增加，因此带有 Ivy 的 Ant 和最近的 Maven 变得流行起来。除了它们的构建功能之外，它们都提供了一种声明应用程序所依赖的第三方库的方法，并简化了下载这些库并将它们添加到类路径的过程。但是他们所做的就像您要下载库并手动将其添加到类路径中一样。

# android - onSensorChanged 方位角值跳跃

> ID：14160533
> 
> 赞同：0
> 
> 时间：2013-01-04T16:04:10.867
> 
> 标签：android, android-activity, compass-geolocation

我是 Android 新手，所以我相信我在某个地方犯了错误，无法修复它。我有一个主活动，我们称之为主菜单。从这里我开始其他活动，按下相应的按钮来启动我想要的活动。问题是我在其中一项已启动的活动中使用了 onSensorchanged()。如果应用程序第一次启动，启动的活动值会按预期运行，但如果我关闭活动（换句话说，现在我回到主菜单）并再次启动活动，则从 onSensorchanged() 读取的值跳跃。正确的值与错误的值相结合。我使用意图来启动第二个活动，并认为问题出在此。

主菜单代码：

```
public class MainMenuActivity extends Activity{

Button gps_btn,lineFollow_btn,man_control_btn;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main_menu);
    addListenerOnButton();
    Debug.startMethodTracing("Navigation Trace");
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main_menu, menu);
    return true;
}

@Override
protected void onPause() 
{

    super.onPause();
    Debug.stopMethodTracing();

}

public void addListenerOnButton() 
{

    final Context context = this;

    gps_btn = (Button) findViewById(R.id.GPS_btn);

    gps_btn.setOnClickListener(new OnClickListener() 
    {

        public void onClick(View arg0) 
        {

            Intent intent = new Intent(context, AutoControl.class);
                        startActivity(intent);   

        }

    });

    lineFollow_btn = (Button) findViewById(R.id.line_follower_btn);

    lineFollow_btn.setOnClickListener(new OnClickListener() 
    {

        public void onClick(View arg0) 
        {

            Intent intent2 = new Intent(context, CamDemoActivity.class);
                        startActivity(intent2);   

        }

    });

    man_control_btn = (Button) findViewById(R.id.man_ctrl_btn);

    man_control_btn.setOnClickListener(new OnClickListener() 
    {

        public void onClick(View arg0) 
        {

            Intent intent2 = new Intent(context, ManualAct_PLC.class);
                        startActivity(intent2);   

        }

    });

} 
```

OnSensorChanged 的​​代码：

```
 public void onSensorChanged(SensorEvent event) 
{
    if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER)
        gravity = event.values;
    if (event.sensor.getType() == Sensor.TYPE_MAGNETIC_FIELD)
        geoMagnetic = event.values;
    if (gravity != null && geoMagnetic != null) 
    {
        float R[] = new float[9];
        float I[] = new float[9];
        boolean success = SensorManager.getRotationMatrix(R, I, gravity,geoMagnetic);

        if (success) 
        {
            /* Orientation has azimuth, pitch and roll */
            float orientation[] = new float[3];
            SensorManager.getOrientation(R, orientation);
            float azimut = orientation[0];
            updateSensorInfoView(azimut);           
            steerRobot(azimut);
            System.out.println("Raw Sensor value:"  + Double.toString(Math.toDegrees(azimut)));
            System.out.println("Degree Sensor value:"  + calculations.compassDegString(azimut));
        }
    }

} 
```

查看记录的值，一旦 AutoControl Activity 再次启动，我的传感器数据是意外的：

```
 01-04 17:52:34.925: I/System.out(31387): Calculatebearing value:2.168326647225342
    01-04 17:52:34.925: I/System.out(31387): Raw Sensor value:-116.11590698474976
    01-04 17:52:34.925: I/System.out(31387): Degree Sensor value:244.0
    01-04 17:52:34.955: I/System.out(31387): Calculatebearing value:173.96307878454928
    01-04 17:52:34.955: I/System.out(31387): Raw Sensor value:72.0893408779263
    01-04 17:52:34.955: I/System.out(31387): Degree Sensor value:72.0
    01-04 17:52:35.065: I/System.out(31387): Calculatebearing value:108.5784565015826
    01-04 17:52:35.065: I/System.out(31387): Raw Sensor value:137.473963160893
    01-04 17:52:35.070: I/System.out(31387): Degree Sensor value:137.0 
```

请注意，度数传感器值在短时间内大幅跃升。我有一个基于计算出的方位角在屏幕上绘制的箭头，一旦第二次加载活动，它就会像疯了一样跳来跳去。

我怀疑创建了此活动的第二个实例，但使用 Manifest 文件中的 android:launchMode="singleInstance" 标记来尝试阻止这种情况。

我有其他人遇到过这样的问题吗？我似乎没有在网上找到类似的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T20:49:59.097

将问题活动移到自己的应用程序中后，我仍然遇到了同样的问题。消除对同一活动的多个实例正在运行的担忧。

阅读此内容后： [https ://groups.google.com/forum/?fromgroups=#!topic/android-developers/UNMaDEUcXb0](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/UNMaDEUcXb0)

我通过更改代码 OnSensorchanged 方法解决了这个问题。多次运行后指针似乎存在问题，因此最好使用更改传感器值对象的克隆：

改变

case Sensor.TYPE_MAGNETIC_FIELD: mag = event.values;

至

case Sensor.TYPE_MAGNETIC_FIELD: mag = event.values.clone();

# c# - 在多层应用程序的 DbContext 上使用 Ninject

> ID：14160534
> 
> 赞同：2
> 
> 时间：2013-01-04T16:04:15.577
> 
> 标签：c#, entity-framework, ninject, dbcontext, n-tier-architecture

我正在尝试掌握 Ninject，但似乎在这里找不到任何有助于解决我的问题的文章。我创建了一个简单的 n 层解决方案，其中包含 Web、业务逻辑和数据访问层。在 DAL 中，我为我的数据库（简单的两个表 DB）和通用存储库（`IRepository`和`ItemRepository`）创建了一个模型，如下所示。

```
public interface IRepository<T> where T : class
{
    IQueryable<T> GetAll();
} 
```

这个接口的实现看起来像这样。

```
public class ItemRepository : IRepository<Item>
{

    public IQueryable<Item> GetAll()
    {
        IQueryable<Item> result;
        using (GenericsEntities DB = new GenericsEntities()) {
            result = DB.Set<Item>();
        }
        return result;
    }

} 
```

在我的 BLL 中，我创建了一个`DataModule`、一个`Item`Object 和一个类 ( `DoWork`) 来使用它们。这些看起来如下......

```
public class DataModule : NinjectModule
{
    public override void Load()
    {
        Bind(typeof(IRepository<>)).To<ItemRepository>();
    }

} 
```

项目对象

```
public class Item
{

    DAL.IRepository<DAL.Item> _repository;

    [Inject]
    public Item(DAL.IRepository<DAL.Item> repository) {
        _repository = repository;
    } 

    public List<DAL.Item> GetItems(){

        List<DAL.Item> result = new List<DAL.Item>();
        result = _repository.GetAll().ToList();
        return result;            

    }

} 
```

DoWork 类

```
public DoWork()
    {
        var DataKernel = new StandardKernel(new DataModule());            
        var ItemRepository = DataKernel.Get<IRepository<DAL.Item>>();

        Item thisItem = new Item(ItemRepository);
        List<DAL.Item> myList = thisItem.GetItems();
    } 
```

我遇到的问题是，当我从 Web 项目中使用此代码时，我得到一个“DbContext 已处理”运行时错误。我试图让事情变得简单，只是为了掌握框架，但不明白如何让`DbContext`范围正确。我已经查看了这里的其他文章，但所有文章都针对某些场景，我想掌握正确的基础知识。

任何人都可以帮助或指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:38:16.250

您得到*“DbContext 已处置”*，因为您在将`GetAll`方法留在您的方法之前处置它`ItemRepository`并且查询尚未执行。`GetItems`当调用 时，查询在方法内部执行`ToList()`- 那时您的数据上下文已经因为该`using`闭包而被释放。如果您想返回`Items`，`IQueryable`则必须让数据上下文处于活动状态，直到您完成查询。

我建议将您`GenericsEntities`的请求范围内（ninject 将在请求范围内为您处理）为 Web 应用程序或在某些自定义范围内（如果它是桌面应用程序）并注入您的存储库。

**登记**

```
Bind<GenericEntities>().ToSelf().InRequestScope(); 
```

**存储库**

```
public class ItemRepository : IRepository<Item>
{
    private readonly GenericEntities DB;

    public ItemRepository(GenericEntities db)
    {
         this.DB = db;                            
    } 

    public IQueryable<Item> GetAll()
    {
        return DB.Set<Item>();
    }   
} 
```

# android - hdpi 和 large-hdpi 的区别？

> ID：14160535
> 
> 赞同：1
> 
> 时间：2013-01-04T16:04:18.220
> 
> 标签：android, android-layout

有人知道 hdpi 和 large-hdpi 之间的区别吗？mdpi 和大 mdpi？大 mdpi 和 sw600dp？

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:08:45.567

从 API 文档：

> [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)
> 
> ... 两种报告屏幕尺寸正常的设备可能具有实际屏幕尺寸和纵横比，用手测量时略有不同。同样，报告 hdpi 屏幕密度的两个设备的实际像素密度可能略有不同。Android 将这些差异抽象为应用程序，因此您可以提供为通用尺寸和密度设计的 UI，并让系统根据需要处理任何最终调整。

另请注意（相同链接）：

> 从 Android 3.2（API 级别 13）开始，这些尺寸组已被弃用，取而代之的是一种基于可用屏幕宽度管理屏幕尺寸的新技术

这就是“smallestWidth sw600dp”和朋友们进来的地方：

[http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts)

主要问题是“Android API 如何以最少的开发人员努力适应各种设备？”

'希望有帮助

# symfony - Symfony2 控制器上的添加和删除操作

> ID：14160536
> 
> 赞同：-2
> 
> 时间：2013-01-04T16:04:22.123
> 
> 标签：symfony

我是 Symfony 的新手，我正在开发一个支持移动应用程序的网络应用程序。我需要建立一个食品杂货清单。产品可以按名称搜索，如果我有兴趣，我可以将它们添加/删除到购物清单中，增加单位和“+”或“-”。我有`Product`实体`ShoppingList`，但我不知道如何构建这些功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:32:39.980

如果您已经生成并注册了新捆绑包，那么我最好的建议是从这里开始：

[http://symfony.com/doc/current/bundles/SensioGeneratorBundle/commands/generate_doctrine_crud.html](http://symfony.com/doc/current/bundles/SensioGeneratorBundle/commands/generate_doctrine_crud.html)

这将帮助您创建“CRUD”操作（创建、读取、更新、删除）。因此，您将拥有一整套 URL，您可以点击这些 URL 来执行诸如“创建产品”或“删除购物清单”之类的操作。

从那里，您可以启动应用程序需要的其他操作，例如“将产品添加到 ShoppingList”或“在 ShoppingList 中显示产品列表”。

不过，首先，最好确保您熟悉该框架。从这里开始：http: [//symfony.com/doc/current/book/index.html](http://symfony.com/doc/current/book/index.html)

# javascript - 如何缩放 iframe 内容（使用所见即所得编辑器嵌入）？

> ID：14160538
> 
> 赞同：1
> 
> 时间：2013-01-04T16:04:30.240
> 
> 标签：javascript, css, iframe, wysiwyg, inline-code

我有这个 iframe 代码：

```
<iframe frameborder="0" height="549" scrolling="auto" src="http://change4life.artscience.co.uk/" width="520"></iframe> 
```

使用 Drupal - 我需要将此 iframe 嵌入到 520 宽的页面模板（使用 WYSIWYG 编辑器）中。我知道如何更改宽度和高度，但这样做实际上并不能缩放 iframe 中内容的大小。该内容位于单独的服务器上，这意味着我无法更改原始内容 - 是否有任何代码可以扩展内容？请记住，我仅限于内联 CSS/HTML，因为我在 CMS 中的页面模板上的 WYSIWYG 编辑器中工作。

`zoom`希望除了它似乎只在 IE 中有效之外，还有其他东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:09:31.300

您可以尝试使用 CSS 2D 变换缩放 iframe：[https](https://developer.mozilla.org/en-US/docs/CSS/transform) ://developer.mozilla.org/en-US/docs/CSS/transform 。像这样：

```
iframe {
    transform: scale(0.5);
} 
```

我还没有测试过，但这是我能想到的唯一可行的方法......

# objective-c - 使用 NSNumberFormatter 自定义 NSTextField 中的错误消息

> ID：14160548
> 
> 赞同：0
> 
> 时间：2013-01-04T16:04:59.867
> 
> 标签：objective-c, xcode, cocoa

我正在做一个学习Objectiv-C的小项目。现在我遇到了一个问题：

我创建了一个带有 NSTextField 和 NumberFormatter 的 Cocoa 应用程序。现在，如果用户单击文本字段并尝试插入一些诸如“asd”之类的内容，他会听到错误提示音。

但我想给用户一些关于错误的未来信息，可能是面板或类似的东西。我怎样才能收到这个错误信息并且可以添加我自己的功能？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:24:12.313

NSNumberFormatter 的任何方法都应该有一个返回 YES/NO 的回调。

即使它没有，子类化它并添加你自己的方法。

# ios - iOS 上的 ICMP 与 TCP 协议

> ID：14160549
> 
> 赞同：2
> 
> 时间：2013-01-04T16:05:03.297
> 
> 标签：ios, c, networking, tcp, icmp

我正在尝试在 c 中为 ios 实现 traceroute。（例如：为了找出哪个路由器不工作）。不幸的是，我不能使用每次路由器杀死我的数据包时都会向我发送响应的 ICMP 协议。有没有办法用 TCP 或其他协议来实现它。我需要一些关于如何完成的思考方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:15:52.640

基本上，一个人可以同时使用这三个，ICMP、UDP 和 TCP。BSD 实现使用 UDP AFAIK，如下源文件：

[http://www.opensource.apple.com/source/network_cmds/network_cmds-307/traceroute.tproj/traceroute.c](http://www.opensource.apple.com/source/network_cmds/network_cmds-307/traceroute.tproj/traceroute.c)

正如你所看到的，这不是太琐碎。

编辑：

FreeBSD的traceroute的来源：

[http://svnweb.freebsd.org/base/release/9​​.1.0/contrib/traceroute/](http://svnweb.freebsd.org/base/release/9.1.0/contrib/traceroute/)

# c# - 反序列化 xml 返回空

> ID：14160555
> 
> 赞同：2
> 
> 时间：2013-01-04T16:05:15.150
> 
> 标签：c#, xml, deserialization

这是反序列化的代码：

```
XmlRootAttribute xRoot = new System.Xml.Serialization.XmlRootAttribute();
xRoot.ElementName = "myList";
xRoot.IsNullable = true;
xRoot.Namespace = "http://schemas.datacontract.org/2006/05/Blah.Blah.Blah";
XmlSerializer serializer = new XmlSerializer(typeof(myList), xRoot);
XmlReader reader = new System.Xml.XmlTextReader(url);
myList myDeserializedList = (myList)serializer.Deserialize(reader);
reader.Close(); 
```

而且 myDeserializedList 是空的，尽管当我转到 URL 时，我看到了一个相当大的 XML。

这是我的课程：

```
[Serializable()]
public class myItem
{
    [System.Xml.Serialization.XmlElement("Key")]
    public long Key { get; set; }
    [System.Xml.Serialization.XmlElement("Discount")]
    public double Discount { get; set; }
}

[Serializable, System.Xml.Serialization.XmlRoot("myList")]
public class myList
{
    [System.Xml.Serialization.XmlArray("myList")]
    [System.Xml.Serialization.XmlArrayItem("myItem", typeof(myItem))]
    public List<myItem> myItem { get; set; }
} 
```

这是xml：

```
<myList xmlns="http://schemas.datacontract.org/2006/05/Blah.Blah.Blah" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
    <myItem>
        <Key>3465</Key>
        <Discount>0.00000000</Discount>
    </myItem>
</myList> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T16:25:42.343

您的代码正在尝试读取/写入如下所示的 XML：

```
<myList xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.datacontract.org/2006/05/Blah.Blah.Blah">
  <myList>
    <myItem>
      <Key>3465</Key>
      <Discount>0.00000000</Discount>
    </myItem>
  </myList>
</myList> 
```

注意`myList`包装集合的第二个标签。

您需要做的就是放弃`XmlArray`and`XmlArrayItem`属性，而是使用`XmlElement`. 这将指示将`XmlSerializer`项目集合放置在行内，而不是嵌套在另一个元素中。

```
[Serializable, System.Xml.Serialization.XmlRoot("myList")]
public class myList
{
    [XmlElement]
    public List<myItem> myItem { get; set; }
} 
```

编辑：另外，您不需要使用大多数属性；XmlSerializer 在应用默认值方面做得很好，重新声明它们变得有点多余，所以你可以有：

```
public class myItem
{
    public long Key { get; set; }
    public double Discount { get; set; }
}

public class myList
{
    [XmlElement]
    public List<myItem> myItem { get; set; }
} 
```

甚至放弃这`xRoot.ElementName = "myList";`条线，它仍然会产生完全相同的 XML。如果您想让它非常明确地说明您的期望，或者如果您希望您可以在不更改 XML 的情况下更改您的属性/类标识符，请随意保留它。

# python - 现有项目的 Python 单元测试以设置 BDD

> ID：14160557
> 
> 赞同：4
> 
> 时间：2013-01-04T16:05:19.780
> 
> 标签：python, unit-testing, testing, python-2.7, bdd

我们可能有兴趣开始将单元测试套件合并到我们的项目中，它是用 Python 编码的（它使用 Redis、PostgreSQL 和一些第三方库，如果这适用于解决方案）。我们想要实现的好处是：

1.  一旦项目加快速度，我们希望能够快速有效地指定新行为，以帮助提高沟通和团队生产力。阅读：**我们想要 BDD，但已经开始在没有它的情况下进行编码**。
2.  出色的文本支持（即测试几乎可以像自然文本一样阅读），从而使**编写和阅读测试更容易**。
3.  能够**自动运行测试**（至少，能够将运行包含在 Bash 脚本或类似的东西中）。我们使用 Windows 和 Linux 进行开发，使用 Linux 服务器，因此 Linux 支持是我们的主要要求。
4.  **与 github 集成**。我不知道这是否可能，但我在 github 中看到了一些项目，它们的状态为“通过”或“失败”，如果我们的项目有这样的状态，那就太好了。

有哪些好的工具/库可以帮助我们做到这一点，最重要的是，将 BDD 合并到 Python 项目中的好方法是什么？

非常感谢！任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T00:36:13.027

我很喜欢：

*   [http://heynemann.github.com/pyvows](http://heynemann.github.com/pyvows)
*   [https://github.com/rlisgor/freshen](https://github.com/rlisagor/freshen)
*   [http://pypi.python.org/pypi/behave](http://pypi.python.org/pypi/behave)

您可以通过搜索找到更多信息：

```
pip search bdd 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-15T04:06:16.330

我在 Python 中搜索了一些小的、有文化的、非魔法的东西来做测试，但一无所获，所以我想出了[https://github.com/kislyuk/ensure](https://github.com/kislyuk/ensure)。

你需要使用另一个测试框架来围绕它构建你的测试（我个人对 unittest 很满意），并且它没有 github 集成，我认为你最好使用 Travis。

# tridion - TemplateBeginRepeat 以相反的顺序

> ID：14160560
> 
> 赞同：6
> 
> 时间：2013-01-04T16:05:38.407
> 
> 标签：tridion, tridion-2011

我需要使用`TemplateBeginRepeat`需要输出自定义标签的位置创建 2 个循环

```
<!-- TemplateBeginRepeat name="customtag" -->
    ${RenderComponentPresentation(Field, rendercustomtagstarttemplate)}
<!-- TemplateEndRepeat --> 
```

输出一些html

```
<!-- TemplateBeginRepeat name="customtag" -->
    ${RenderComponentPresentation(Field, rendercustomtagclosetemplate)}
<!-- TemplateEndRepeat --> 
```

由于第二个循环关闭了第一个循环呈现的自定义标签，因此第二个循环应该以相反的顺序运行。（因为标签需要以相反的顺序关闭）。如何使用 TemplateBeginRepeat 以组件的相反顺序运行第二个循环？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T16:27:41.327

没有内置的方法可以以相反的顺序循环重复的项目。

* * *

如果您`customtag`是包中的数组项（通常是组件或组件表示的数组），您可以将列表以相反的顺序推送到包含相同项的包中，然后循环该项。

```
<!-- TemplateBeginRepeat name="customtag_reversed" --> 
```

* * *

如果您`customtag`是一个字段，这将不起作用，因为您无法将字段推送到包中。在这种情况下，我建议创建一个自定义函数，以正确的顺序输出您的自定义标签，例如：

```
@@RenderCustomTags('customtag', 'Order.Reverse')@@ 
```

* * *

**更新**

如果`customtag`是一个**组件链接**字段，最好将那些链接的组件作为组件数组项简单地添加到包中。Nuno 在 SDL Tridion World 上提供了一个 TBB 链接，但这是最关键的片段：

```
//  Tridion.ContentManager.Templating.ComponentPresentation
var list = new List<ComponentPresentation>(); 

list.Add(new ComponentPresentation(Component.Id, ComponentTemplate.Id));
// you'll want to do a loop of these for every linked Component

var item = package.CreateStringItem(ContentType.ComponentArray,
                                    ComponentPresentationList.ToXml(list));
package.PushItem("customtag_Components", item); 
```

您需要为每个链接的组件执行这些循环：

```
list.Add(new ComponentPresentation(Component.Id, ComponentTemplate.Id)); 
```

除了在 C# 代码中硬编码组件模板 ID，您还可以考虑在 C# 中将其留空，并将其保留`RenderComponentPresentation`在 DWT 的调用中，就像您已经做的那样。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-05T07:55:08.323

这里的问题似乎是 Dreamweaver 语法只适用于最简单的编程任务。Frank 和 Nuno 已经表明，将*一些*逻辑移至 C# 模板会有所改进，但您还应该考虑将此输出的生成*完全*移至 C# 模板。换句话说，一旦你需要使用 DWT 以外的东西，你的问题定义就会改变，因为现在描述的问题是以 DWT 为中心的。

仅存在反向循环的需要，因为您想以正确的顺序关闭构造。在像 C# 这样的语言中，您可以通过使用嵌套（甚至递归）函数调用或（可能更有可能）通过将关闭输出推送到堆栈来实现此结果。

# android - 在gridview中加载图像[通用图像加载器]

> ID：14160561
> 
> 赞同：0
> 
> 时间：2013-01-04T16:05:38.633
> 
> 标签：android

我正在尝试使用通用图像加载器将图像加载到网格视图中，但是当活动加载时我的应用程序似乎正在崩溃，我无法识别问题。我正在从数组中加载图像，然后调用图像适配器来填充它们。

我通过应用程序进行了调试，但在 LogCat 中没有看到任何突出的内容。

所有帮助将不胜感激:)

```
public class MainActivity extends Activity {

    String[] imageUrls;

    DisplayImageOptions options;
    protected ImageLoader imageLoader = ImageLoader.getInstance();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Bundle bundle = getIntent().getExtras();
        imageUrls = bundle.getStringArray(Extra.IMAGES);

        options = new DisplayImageOptions.Builder()
            .showStubImage(R.drawable.stub_image)
            .showImageForEmptyUri(R.drawable.image_for_empty_url)
            .cacheInMemory()
            .cacheOnDisc()
            .bitmapConfig(Bitmap.Config.RGB_565)
            .build();

        GridView gridView = (GridView) findViewById(R.id.gridview);
        gridView.setAdapter(new ImageAdapter());

    }

    public class ImageAdapter extends BaseAdapter {
        @Override
        public int getCount() {
            return imageUrls.length;
        }

        @Override
        public Object getItem(int position) {
            return null;
        }

        @Override
        public long getItemId(int position) {
            return position;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            final ImageView imageView;
            if (convertView == null) {
                imageView = (ImageView) getLayoutInflater().inflate(R.layout.item_grid_image, parent, false);
            } else {
                imageView = (ImageView) convertView;
            }

            imageLoader.displayImage(imageUrls[position], imageView, options);

            return imageView;
        }
    }
} 
```

**编辑：Logcat 错误：“AndroidRuntime(6789): java.lang.RuntimeException: ImageLoader 在使用前必须通过配置初始化”**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:49:26.243

快速回答：要在 LogCat 中获取某些内容，您可以执行以下操作

```
try{

// Your code

}catch (Exception e){

    log.e(e.tostring());
} 
```

而且，我一般把列表/数组放在适配器类里面，通过函数修改，

```
ImageAdapter.add(string s) 
```

在适配器中：

```
List<String> imageURLs = new List<String>;

public int add(String s) {
    imageURLs.add(s);
    notifyDataSetChanged();
} 
```

我希望这有帮助！

# twitter-bootstrap - Bootstrap 带分页点的多个轮播

> ID：14160562
> 
> 赞同：0
> 
> 时间：2013-01-04T16:05:39.930
> 
> 标签：twitter-bootstrap

我正在使用 Bootstrap 框架，但在尝试在同一页面上设置多个带有分页点的轮播时遇到了麻烦。我使用了 GitHub 上的 bootstrap-carousel.js 更新脚本（带有药丸选项的脚本）来进行分页。

我找到了带有下一个导航的多个轮播的解决方案，但没有关于带点的多个轮播的解决方案。

有什么想法可以解决这个问题吗？任何帮助，将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:30:49.623

你可以试试这个[jsfiddle](http://jsfiddle.net/mmfansler/fSGnG/)

需要`bootstrap-carousel.js`和 carousel.less。

```
(function(){ $('head style[type="text/css"]').attr('type', 'text/less');less.refreshStyles(); })();

$('#myCarousel').carousel(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T06:48:17.410

使用最新的轮播，您可以使用**carousel-indicators**类：

```
 <ol class="carousel-indicators">
    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
    <li data-target="#myCarousel" data-slide-to="1"></li>
    <li data-target="#myCarousel" data-slide-to="2"></li>
 </ol> 
```

[http://getbootstrap.com/2.3.2/javascript.html#carousel](http://getbootstrap.com/2.3.2/javascript.html#carousel)

# java - 设置类路径后是否需要从 jar 文件中导入包？

> ID：14160563
> 
> 赞同：0
> 
> 时间：2013-01-04T16:05:46.473
> 
> 标签：java, import, classpath, plc

所以这是交易 - 我下载了一个需要与 Allen Bradley PLC 通信的 jar 文件。自然地，我设置了 CLASSPATH 并希望能够从 jar 文件中的一个类中创建一个带有构造函数的程序，然后按照我的方式进行操作。此情况并非如此。

这是我的类路径：

```
nick@ubuntu:~/Java/PLC Program$ echo $CLASSPATH
/home/nick/Java/PLC Program/ethernetip4j-0.2.jar 
```

这是我程序中的代码：

```
ControlLogixConnector test = new ControlLogixConnector(ENBTIP,44818); 
```

我编译并得到以下错误：

```
nick@ubuntu:~/Java/PLC Program$ javac PLCServer.java
PLCServer.java:13: error: cannot find symbol
    ControlLogixConnector test = new ControlLogixConnector(ENBTIP,44818);
    ^
symbol:   class ControlLogixConnector
location: class PLCServer
PLCServer.java:13: error: cannot find symbol
    ControlLogixConnector test = new ControlLogixConnector(ENBTIP,44818);
                                     ^
symbol:   class ControlLogixConnector
location: class PLCServer
2 errors 
```

我的程序和 jar 文件在同一个目录中。我是否需要导入 jar 文件中的任何包，或者我是否缺少其他完全不同的东西？

提前致谢

编辑：

这是我的代码：

```
import java.io.*;
import java.net.*;
import se.opendataxchange.ethernetip4j.clx.ControlLogixConnector;

class PLCServer
{
    public static void main(String argv[]) throws IOException
    {
        // IP address of the ethernet card
        String ENBTIP = "192.168.10.14";
        ControlLogixConnector test = new ControlLogixConnector(ENBTIP,44818);
    }
} 
```

我收到错误说 se.opendataexchange.ethernetip4j.clx.ControlLogixConnector 不存在并且 ControlLogixConnector 对象不存在（使用 javac PLCServer.java 编译）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:25:47.803

您的导入语句`import home.nick.Java.PLCProgram.ethernetip4j.*;`似乎表明了项目中**jar**的位置。

这是不正确的。

相反，它旨在引用 jar 的**包结构**，解析为您尝试使用的类（或类集，如果使用通配符）。

如果您不知道该类`ControlLogixConnector`驻留在哪个包中，您可以解压缩 jar 包，目录结构应该很明显。（@allergic 在评论中指出它是`se.opendataexchange.ethernetip4j.clx`）。

`.class`您可以通过使用 JAD 之类的实用程序或类似工具从 jar 中反编译文件来获得更精确的结果。不过，将 Jar 导入任何 IDE 都应该可以解决问题 - jar 中的类应该按包在树视图中分解。

# xquery - BaseX 中的 XQuery：从映射的输出返回平均值

> ID：14160567
> 
> 赞同：0
> 
> 时间：2013-01-04T16:06:00.357
> 
> 标签：xquery, basex

我正在尝试管理 BaseX 中的 map:get 函数的输出。

映射文件如下所示：

```
 <around>
   <point NR="51151">161</point>
   <point NR="31252">82</point>
   <point NR="54321">323</point>
   <point NR="54321">319</point>
   <point NR="54321">327</point>
 </around> 
```

并以编号为属性（NR），以与某个搜索点的距离为值来表示一些地理点。有些点出现了不止一次（如上例中的点 54321）。这是与内容相关的，因为这些是具有相同编号的点的“分支”。

如果我查找这些 NR，我想要得到的是距离的平均值。

我的查询：

```
 let $c :=
      <around>
        <point NR="51151">161</point>
        <point NR="31252">82</point>
        <point NR="54321">323</point>
        <point NR="54321">319</point>
        <point NR="54321">327</point>
      </around>
 for $r in $c//point
 let $m := map { data($r/@NR) := $r/text() }
 return
 if ( map:contains($m, '54321'  ) ) then
 avg(map:get($m, '54321'))
 else
 () 
```

... 返回`323 319 327` ，因此忽略“avg”，尽管 BaseX 中没有语法错误消息。

我怎样才能实现上述目标？提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:41:23.283

映射将一个键与一个值相关联。您实际上在这里所做的是为循环`$m`的每次迭代创建一个单条目映射`for`。您的代码与此完全相同：

```
for $r in $c/point
return if ($r/@NR eq '54321') then avg($r/text()) else () 
```

如果您只查找一个键，我建议您根本不要使用地图，而是这样做，这更简单、更快：

```
return avg($c/point[@NR='54321']) 
```

即使您正在查找多个键，如果 BaseX 在您正在查询的文档上有一个新的属性索引，那么一个简单的实现使用`group by`或者`distinct-values()`可能仍然比映射更快。

也就是说，要使用地图，您需要使用[`map:new`](http://docs.basex.org/wiki/Map_Module#map%3anew)和[`group by`](http://docs.basex.org/wiki/XQuery_3.0#Group_By)

```
let $c :=
      <around>
        <point NR="51151">161</point>
        <point NR="31252">82</point>
        <point NR="54321">323</point>
        <point NR="54321">319</point>
        <point NR="54321">327</point>
      </around>
let $m := map:new(
    for $r in $c/point
    let $key := $r/@NR, $value := $r/text()
    group by $key
    return map {$key := $value}
) 
return avg($m('54321')) 
```

您也可以使用函数缩减（`fold-`函数）而不是 group-by 来执行此操作：

```
let $c :=
      <around>
        <point NR="51151">161</point>
        <point NR="31252">82</point>
        <point NR="54321">323</point>
        <point NR="54321">319</point>
        <point NR="54321">327</point>
      </around>
let $reducer := function($points as map(*), $point as item()) {
    map:new((
      $points, 
      map { $point/@NR := ($points($point/@NR), $point/text())}
    ))
}
let $m := fold-left($reducer, map{}, $c/point)
return avg($m('54321')) 
```

请记住，在生产代码中，您需要生成*一次*映射，然后使用您的键查找列表来查看使用映射带来的速度优势。

# ios - 在导航栏上的后退按钮旁边添加栏按钮项目

> ID：14160570
> 
> 赞同：0
> 
> 时间：2013-01-04T16:06:15.813
> 
> 标签：ios, ios5, ios6, uinavigationbar, uibarbuttonitem

我已经从情节提要中拖放了导航栏，并且在最左侧放置了一个栏按钮项。

我想在它旁边添加另一个按钮，但我无法做到，它只是在右边的极端除外。我不想要那个。

它在 iPad 上，所以导航栏上有很多空间。我该如何实现？

我尝试创建一个栏按钮项，但它涵盖了导航栏，这不是我真正想要的。

如果可能的话，我想隐藏工具栏的 1 按钮，以便可以看到导航栏的后退按钮。

请向我建议一些关于如何在导航栏上获得左极端按钮下一个栏按钮项目的信息？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:14:45.403

如果您打算使用自己的自定义后退按钮，并且愿意手动链接后退操作（我猜您是因为您在 IB 中添加了一个导航栏，而不是从导航控制器），您可以使用[UIToolBar](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIToolbar_Class/Reference/Reference.html)代替。

工具栏支持多个按钮，并允许您使用固定和灵活的空间 UIBarButtonItems 更精确地排列它们。

![在此处输入图像描述](../Images/52880879f45aa0d73b0713b4e5c0f148.png)

要对导航控制器添加的导航栏执行此操作，您必须以编程方式添加按钮：

```
UIBarButtonItem *myItem1 = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:self action:@selector(someMethod)];
UIBarButtonItem *myItem2 = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(someMethod)];

[[self navigationItem] setLeftBarButtonItems:[NSArray arrayWithObjects:myItem1,myItem2, nil]]; 
```

# ios - 如何禁用 UITextField 中的文本提示？

> ID：14160573
> 
> 赞同：3
> 
> 时间：2013-01-04T16:06:25.087
> 
> 标签：ios, uitextfield, uisearchbar

有没有办法在屏幕上禁用无用`UITextField`和烦人的弹出文本提示？`UISearchBar`

![在此处输入图像描述](../Images/999e4fea9f8abf12f9c59674e8cefa5b.png)

我怎样才能做到这一点？

我找不到任何对此负责的财产。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T16:15:30.103

如果您在 Interface Builder 中创建了视图，请单击文本字段，然后从属性检查器（第 6 个图标，共 6 个）中，将 Correction 设置为 No。这似乎对我有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-04T16:16:19.927

我相信您需要为文本字段设置自动更正类型：

[http://developer.apple.com/library/ios/documentation/uikit/reference/UITextInputTraits_Protocol/Reference/UITextInputTraits.html#//apple_ref/occ/intfp/UITextInputTraits/autocorrectionType](http://developer.apple.com/library/ios/documentation/uikit/reference/UITextInputTraits_Protocol/Reference/UITextInputTraits.html#//apple_ref/occ/intfp/UITextInputTraits/autocorrectionType)

因此，要关闭它，我会使用以下内容：

```
myTextField.autocorrectionType = UITextAutocorrectionTypeNo; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T16:19:02.953

您可以将`setAutoCorrectionType:`属性设置`UITextField`为`UITextAutoCorrectionTypeNo`

```
[yourField setAutoCorrectionType:UITextAutoCorrectionTypeNo]; 
```

# mongodb - 使用远程 Mongodb 进行弹性搜索

> ID：14160574
> 
> 赞同：1
> 
> 时间：2013-01-04T16:06:29.343
> 
> 标签：mongodb, elasticsearch

我正在尝试在我的工作站上配置 ElasticSearch 以使用远程 mongo 数据库上的大型集合。我安装了河，但我不能让它工作。我有这个配置元素：

```
curl -XPUT 'http://localhost:9200/_river/mongodb/_meta' -d '{ 
"type": "mongodb", 
"mongodb": { 
"host":"10.42.210.214",
"port":"27017",
"login":"admin",
"password":"something",
    "db": "somedb", 
    "collection": "somecollection"
}, 
"index": {
    "name": "mongoindex", 
    "type": "somecollection" 
}
}' 
```

当我搜索时：

```
http://localhost:9200/somecollection/_search?query=matchAll&pretty=true 
```

... 它说：

```
{ "error" : "IndexMissingException[[somecollection] missing]", "status" : 404 } 
```

我怎样才能让它索引东西/调试问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:49:00.683

您确定 Elasticsearch 的答案是`no collection`？

我很想看看 ES 发送的结果。

顺便说一句，您是否启用了 mongodb[副本集](http://www.mongodb.org/display/DOCS/Replica+Set+Tutorial)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-23T08:07:55.883

你应该`http://localhost:9200/mongoindex/_search?query=matchAll&pretty=true`用来做搜索。查看**mongoindex**。

# javascript - 在 Google Earth API 中：使用单选按钮更改视图

> ID：14160575
> 
> 赞同：2
> 
> 时间：2013-01-04T16:06:35.850
> 
> 标签：javascript, radio-button, google-earth, google-earth-plugin

我正在尝试创建一个界面，用户可以在其中使用三个简单的 HTML 单选按钮选择他们的视图。我已经设法让插件使用适当的视图进行初始化（由我选择的默认单选按钮决定），但选择不同的单选按钮仍然没有任何作用。相关代码如下：

```
document.getElementById('ui').innerHTML =
'<div>' +
'<h2>Select View:</h2>' +
'<input type="radio" name="view" value="valley" id="valley" onclick="ge.getView().setAbstractView(\'valleyview\');"/ checked> Full Valley<br/>' +
'<input type="radio" name="view" value="takten" id="takten" onclick="ge.getView().setAbstractView(\'taktenview\');"/> Takten Ling Monastery<br/>' +
'<input type="radio" name="view" value="stupa" id="stupa" onclick="ge.getView().setAbstractView(\'stupaview\');"/> Jonang Stupa<br/>' +
'</div>' +
'<br/>';

  }

  function initCallback(instance) {
ge = instance;
ge.getWindow().setVisibility(true);

// add a navigation control
ge.getNavigationControl().setVisibility(ge.VISIBILITY_AUTO);

// add some layers
ge.getLayerRoot().enableLayerById(ge.LAYER_BORDERS, false);
ge.getLayerRoot().enableLayerById(ge.LAYER_ROADS, false);

var la = ge.createLookAt('');

if(document.getElementById('valley').checked) {
la.set(29.36890346613675, 88.0025304326977,
25, // altitude
ge.ALTITUDE_RELATIVE_TO_GROUND,
180, // heading
60, // straight-down tilt
500 // range (inverse of zoom)
);
   }else if(document.getElementById('takten').checked) {
la.set(30.36890346613675, 88.0025304326977,
25, // altitude
ge.ALTITUDE_RELATIVE_TO_GROUND,
180, // heading
60, // straight-down tilt
500 // range (inverse of zoom)
);
}else if(document.getElementById('stupa').checked) {
la.set(31.36890346613675, 88.0025304326977,
25, // altitude
ge.ALTITUDE_RELATIVE_TO_GROUND,
180, // heading
60, // straight-down tilt
500 // range (inverse of zoom)
);
}
    ge.getView().setAbstractView(la);    

var valleyview = ge.createLookAt('');
  valleyview.set(29.36890346613675, 88.0025304326977,
25, // altitude
ge.ALTITUDE_RELATIVE_TO_GROUND,
180, // heading
60, // straight-down tilt
500 // range (inverse of zoom)
);

   var taktenview = ge.createLookAt('');
  taktenview.set(30.36890346613675, 88.0025304326977,
25, // altitude
ge.ALTITUDE_RELATIVE_TO_GROUND,
180, // heading
60, // straight-down tilt
500 // range (inverse of zoom)
);

   var stupaview = ge.createLookAt('');
  stupaview.set(31.36890346613675, 88.0025304326977,
25, // altitude
ge.ALTITUDE_RELATIVE_TO_GROUND,
180, // heading
60, // straight-down tilt
500 // range (inverse of zoom)
); 
```

任何关于我可能做错的指针都将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T00:51:31.860

问题是每个`onclick`处理程序中的代码......

```
onclick="ge.getView().setAbstractView(\'valleyview\');" 
```

该`setAbstractView`方法应该传递一个从`KmlAbstractView`a`KmlCamera`或对象继承的`KmlLookAt`对象 - 但您正在传递一个字符串值。

要修复它，只需从参数周围删除单引号。

```
onclick="ge.getView().setAbstractView(valleyview);" 
```

此外，我会将功能封装到一种方法中，以使调用更清晰。类似于以下内容。

```
var lookat = function(abstractView) {
  ge.getView().setAbstractView(abstractView);
} 
```

那么你的html将只是......

```
onclick="lookat(valleyview);" 
```

**编辑 ：**

查看它，您还需要将各种视图移到 initCallBack 函数之外，因为您无法从外部引用您在其中创建的变量......

总而言之，更好的方法是重写您创建视图的方式并将视图设置为 a) 删除所有重复项和 b) 使代码更清晰。类似于以下内容。

```
document.getElementById('ui').innerHTML =
    '<div>' +
    '<h2>Select View:</h2>' +
    '<input type="radio" name="view" value="valley" id="valley" onclick="lookat(29.36890346613675, 88.0025304326977);"/ checked> Full Valley<br/>' +
    '<input type="radio" name="view" value="takten" id="takten" onclick="lookat(30.36890346613675, 88.0025304326977);"/> Takten Ling Monastery<br/>' +
    '<input type="radio" name="view" value="stupa" id="stupa" onclick="lookat(31.36890346613675, 88.0025304326977);"/> Jonang Stupa<br/>' +
    '</div>' +
    '<br/>';

function initCallback(instance) {
    ge = instance;
    ge.getWindow().setVisibility(true);

    // add a navigation control
    ge.getNavigationControl().setVisibility(ge.VISIBILITY_AUTO);

    // add some layers
    ge.getLayerRoot().enableLayerById(ge.LAYER_BORDERS, false);
    ge.getLayerRoot().enableLayerById(ge.LAYER_ROADS, false);

    // only valley can be checked here so no need for the conditional logic.
    lookat(29.36890346613675, 88.0025304326977);
}

var lookat = function(lat, lng) {
    var la = ge.createLookAt('');
    la.set(lat, lng, 25, ge.ALTITUDE_RELATIVE_TO_GROUND, 180, 60, 500);
    ge.getView().setAbstractView(la);    
} 
```

# c# - 获取 System.ArgumentException

> ID：14160577
> 
> 赞同：-1
> 
> 时间：2013-01-04T16:06:38.093
> 
> 标签：c#, winforms, paint

我正在尝试制作一个简单的游戏，但因此异常而失败。

```
System.ArgumentException: Parameter is not valid.
   at System.Drawing.Graphics.GetHdc()
   at System.Drawing.BufferedGraphics.RenderInternal(HandleRef refTargetDC, BufferedGraphics buffer)
   at System.Drawing.BufferedGraphics.Render()
   at System.Windows.Forms.Control.WmPaint(Message& m)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ScrollableControl.WndProc(Message& m)
   at System.Windows.Forms.Form.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
   at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
   at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
   at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
   at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
   at System.Windows.Forms.Application.Run(Form mainForm)
   at GECS.Core.Game.runGame(Game g) in c:\Users\sriharshachilakapati\Documents\SharpDevelop Projects\GECS\GECS\Core\Game.cs:line 16
   at GECS.Test.GameTest.Main(String[] args) in c:\Users\sriharshachilakapati\Documents\SharpDevelop Projects\GECS\GECS\Test\GameTest.cs 
```

这是我使用的代码。

```
public class Game : Form {

    public Game() : base() {
        gameLoop();
    }

    public static void runGame(Game g){
        Application.Run(g);
    }

    public virtual void initResources(){}

    public virtual void update(long elapsedTime){}

    public virtual void render(Graphics g){}

    private void gameLoop(){
        DoubleBuffered = true;
/** The following line gives me exception **/
        Paint += delegate(object sender, PaintEventArgs e) { render(e.Graphics); };
        initResources();
        int now = getCurrentTime();
        int gameTime = getCurrentTime();
        long elapsedTime = 1000 / Global.STEPS_PER_SECOND;
        while (this.Created){
            this.Text = Global.TITLE;
            now = getCurrentTime();
            while (now>gameTime){
                update(elapsedTime);
                gameTime += (int)elapsedTime;
            }
            Refresh();
        }
    }

    public static int getCurrentTime(){
        return System.Environment.TickCount;
    }

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:46:24.203

找到了解决方案。这是因为我在调用之前调用了循环`Application.Run`。

# mongodb - Grails - Mongo：将图像存储为字节数组

> ID：14160581
> 
> 赞同：2
> 
> 时间：2013-01-04T16:06:44.760
> 
> 标签：mongodb, grails, grails-plugin

我正在努力将图像存储为 Mongo 中的字节数组。我的域名很简单

```
class Book {
    String title
    String author
    byte[] photo
    String photoType
} 
```

这些图像都低于 300kB，所以我首先会避免使用 GridFS。保存后，照片似乎存储为字符串（始终为 11 个字节）

> db.book.find() { "_id" : NumberLong(15), "author" : "", "photo" : "[B@774dba87", "photoType" : "image/jpeg", "title" : " ", "版本" : 0 }

我的控制器内容如下： def saveImage() {

```
 def bookInstance
    if(request instanceof MultipartHttpServletRequest) {

        MultipartHttpServletRequest multiRequest = (MultipartHttpServletRequest)request;
        CommonsMultipartFile file = (CommonsMultipartFile)multiRequest.getFile("photo");

        params.photoType  = file.getContentType()
        print "nb bytes " +file.bytes.length    //TODO

        bookInstance = new Book(params)
        bookInstance.photo=new byte[file.bytes.length]
        bookInstance.photo = file.getBytes()

        def okcontents = ['image/png', 'image/jpeg', 'image/gif']
        if (! okcontents.contains(file.getContentType())) {
            flash.message = "Photo must be one of: ${okcontents}"
            render(view:'create', model:[bookInstance:bookInstance])
            return;
        }

        log.info("File uploaded: " + bookInstance.photoType)
    }

    if (!bookInstance.save()) {
        render(view:'create', model:[bookInstance:bookInstance])
        return;
    }
    flash.message = "Book Photo (${bookInstance.photoType}, ${bookInstance.photo.size()} bytes) uploaded."
    redirect(action: "show", id: bookInstance.id)
} 
```

我正在使用带有 mongo 插件的 Grails 2.2...

提前感谢您的提示（顺便说一句，2013 年快乐！）

干杯菲利普

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:31:23.397

encodeBase64 / decodeBase64 是适合您的正确方法。

您提供的代码在以前的 mongo-gorm 插件版本中运行良好。在`grails 2.2.0`和`1.1.0.GA mongodb`数组没有正确转换的情况下，提交了错误GPMONGODB-265的情况。

考虑使用[替代 gorm 插件](http://www.grails.org/plugin/mongodb-morphia)或纯 groovy mongo 包装器[gmongo](https://github.com/poiati/gmongo)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:11:16.563

```
def imgStream = file.getInputStream()
byte[] buf = new byte[310000]
int len =imgStream.read(buf, 0, 310000)
ByteArrayOutputStream bytestream = new ByteArrayOutputStream()
while(len > 0) {
    bytestream.write(buf, 0, len)
    len =imgStream.read(buf, 0, 310000)
}
bookInstance.photo = bytestream.toByteArray()
bookInstance.save() 
```

# function - HASKELL 函数 next 字母表

> ID：14160584
> 
> 赞同：0
> 
> 时间：2013-01-04T16:06:59.460
> 
> 标签：function, haskell, alphabet

我必须在 HASKELL 中编写一个名为 siguienteLetra 的函数，该函数接受一个变量，该变量是一个字母并返回下一个字母。我怎样才能做到这一点？

示例： siguienteLetra 'a' 和函数返回 me 'b' 或 siguienteLetra 'c' 并且函数返回 me 'd'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:09:20.443

## 提示 1

这两个函数`Data.Char`将很有帮助：

```
ord :: Char -> Int
chr :: Int -> Char 
```

第一个将字符转换为其数字表示（例如，'a' → 97，'b' → 98），而另一个进行反向转换（97 → 'a'，98 → 'b'）。以合理的方式使用这些功能将使您能够实现`siguienteLetra`.

## 提示 2

`ord`除了and之外，您将需要第三个函数，`chr`它应该做什么？第三个函数在 中`Prelude`，但*可能*很难猜出它的名字（取决于你的背景）。幸运的是，该函数非常简单，您将轻松编写它。

## 提示 3

签名应该是什么`siguienteLetra`？查看您的三个函数（ 和第三个函数）的签名，`ord`并`chr`考虑它们应该组合的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:28:04.893

Bolo 感谢您的帮助，这就是结果。

```
module Ejercicio1 where

import Data.Char
import Data.Ord()

siguienteLetra :: Char -> Char    -- you should not put pure computations
                                  -- in the IO Monad!
siguienteLetra y = chr z
 where x = ord y
       z = x+1

ejercicio1 :: IO ()
ejercicio1 = do
    y <- getChar
    print $ siguienteLetra y 
```

# node.js - 我可以使用反向代理将 cloundfoundry 服务器重定向到我的本地服务器吗？

> ID：14160588
> 
> 赞同：0
> 
> 时间：2013-01-04T16:07:05.140
> 
> 标签：node.js, reverse-proxy, cloud-foundry

我正在编写一个发布到 cloudfoundry 的 nodejs Web 服务器。

第三个服务将访问我的网络服务器。

现在我想在本地调试但没有独立的 ip。

所以我想知道我可以这样做：

1.  在 cloudfoundry 设置代理网络服务器，调用 A
2.  在本地启动 Web 服务器，调用 B
3.  开始到 A 的网络连接，然后通过管道连接它们。
4.  当第三个服务访问 A 时，请求将发送到 B 并响应。
5.  然后我可以在本地机器上开发和调试，每次保存后不需要 vmc 推送。

我可以通过编写一些nodejs代码来做到这一点吗？如何？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T04:38:23.350

当您只想将网络流量通过隧道传输到您的本地主机时，为什么还要使用 cloudfoundry？

您也可以使用其他隧道服务。像[本地隧道](http://progrium.com/localtunnel/)？

做就是了

```
gem install localtunnel
localtunnel <port> 
```

您将收到一个唯一的网址 {uniq}.localtunnel.com - 一旦您点击那里，您就会将其发送到您的本地。

# mysql - MySQL 不能接受我的表

> ID：14160589
> 
> 赞同：0
> 
> 时间：2013-01-04T16:07:06.833
> 
> 标签：mysql, sql, create-table

我使用 MySQL Workbench 对我的表进行建模，但不知何故，在创建软件生成的表的 SQL 中存在逻辑错误。

以下是代码：

```
-- -----------------------------------------------------
-- Table `trickani_main`.`user`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `trickani_main`.`user` (
  `iduser` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `fb_id` VARCHAR(50) NOT NULL ,
  `email` VARCHAR(40) NOT NULL ,
  `first_name` VARCHAR(15) NOT NULL ,
  `gender` VARCHAR(1) NOT NULL ,
  PRIMARY KEY (`iduser`) ,
  UNIQUE INDEX `fb_id_UNIQUE` (`fb_id` ASC) ,
  UNIQUE INDEX `email_UNIQUE` (`email` ASC) )
ENGINE = InnoDB
AUTO_INCREMENT = 1;

-- -----------------------------------------------------
-- Table `trickani_main`.`quiz_list`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `trickani_main`.`quiz_list` (
  `id_quiz_list` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `difficult` TINYINT(4) NOT NULL ,
  PRIMARY KEY (`id_quiz_list`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `trickani_main`.`user_quiz_list`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `trickani_main`.`user_quiz_list` (
  `iduser` INT UNSIGNED NOT NULL ,
  `id_quiz_list` INT UNSIGNED NOT NULL ,
  `level_reached` INT UNSIGNED NOT NULL DEFAULT 0 ,
  PRIMARY KEY (`iduser`, `id_quiz_list`) ,
  INDEX `fk_quiz_list_user1_idx` (`iduser` ASC) ,
  INDEX `fk_user_quiz_list_quiz_list1_idx` (`id_quiz_list` ASC) ,
  CONSTRAINT `fk_quiz_list_user1`
    FOREIGN KEY (`iduser` )
    REFERENCES `trickani_main`.`user` (`iduser` )
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_user_quiz_list_quiz_list1`
    FOREIGN KEY (`id_quiz_list` )
    REFERENCES `trickani_main`.`quiz_list` (`id_quiz_list` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1; 
```

结果我收到以下消息：

> **#1005 - 无法创建表 'trickani_main.quiz_level' (errno: 150)**

我不明白！即使阅读代码本身，我也看不到任何错误！

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:37:10.790

你的桌子似乎在这里工作

你在数据库和表之间混合。只需使用您想要创建的表格。

[**sqlfiddle**](http://sqlfiddle.com/#!2/ae97b)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T16:11:47.790

您可能想尝试使您的 PK 不签名。

请参阅此问题/答案：[将带有 FOREIGN KEY 的表添加到 MySQL 数据库会导致 errno 150](https://stackoverflow.com/questions/11414685/adding-table-with-foreign-key-to-a-mysql-database-causes-errno-150)

**编辑**：您可能想尝试使所有 PK 签名或所有 PK 未签名。我的猜测是，`quiz_level`当前未在您的问题中显示的定义有一个 PK，其符号与其他表不同。

# jquery - Javascript 上的 event.keycode

> ID：14160592
> 
> 赞同：0
> 
> 时间：2013-01-04T16:07:09.693
> 
> 标签：jquery, dom-events, keyevent

我正在处理一个包含带有 textarea 元素的表单的网页。我想使用 JavaScript 将输入值限制为仅数字。我发现的一种方法是在用户输入数据时检查键值：

```
function checkForEnter() {
if (!((event.keyCode >= 48) || (event.keyCode <= 57))) {                            
//event.stopPropagation(); throw error with IE ver 8
event.cancelBubble = true;
event.returnValue = false;
return false;

  }
} 
```

我可以使用什么其他方法来限制输入的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:08:34.853

**谢谢你的帮助**

这个解决方案对我有用

inputext 将两个事件附加到同一个函数（checkForEnter），onkeypress 和 onkeydown

这两种情况我只验证数字

没有了 bla bla bla

```
function checkForEnter() { 
if (event.keyCode == 13) {

var txt = event.srcElement;      

                    }
//that was my problem
//var chCode = ('charCode' in event) ? event.which : event.keyCode;

//that was my solution
var chCode = event.keyCode; 

                    if (chCode != 8 || chCode != 46) {

//alphanumeric keyboard
                        if (chCode >= 48) {
                            if (chCode <= 57) {
                            }
                            else {
//numeric keyboard
if (chCode > 95 && chCode < 106) {
                                } else {
                                    event.cancelBubble = true;
                                    event.returnValue = false;
                                    return false;
                                }
                            }
                        }
if (chCode == 32) {
   event.cancelBubble = true;
event.returnValue = false;
return false;
}        
}                                      
} 
```

附言。我不能

我不能在javascript中进行多重比较

: (

出于这个原因，使用 if .. if .. if

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:10:00.943

你想要[`event.preventDefault()`](https://developer.mozilla.org/en-US/docs/DOM/event.preventDefault)，没有`event.stopPropagation()`。`preventDefault`停止按键事件的默认行为（即，在文本字段中添加一个字符）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T16:38:34.597

您的函数缺少`event`参数，因此调用未定义变量的方法自然会导致错误。尝试：

```
function checkForEnter(event) {
    ...
} 
```

# ios - 移动设备网络间歇性

> ID：14160594
> 
> 赞同：0
> 
> 时间：2013-01-04T16:07:15.427
> 
> 标签：ios, iis, mobile, web

这是在 iOS 5 上使用 Titanium SDK 2.1.3.GA 开发的移动应用程序。

一段时间以来，我一直在与我的应用程序中的错误作斗争，它们可能仍然存在，但我似乎无法超越这个问题。我什至不知道这是否是 Titanium Mobile 问题，但我没有想法。

我有一个我编写的 Web 服务（WCF 服务）和一个可以连接的 Titanium Mobile 应用程序。在我的模拟器上，它在硬连线的 MAC 上运行良好。我进行了所有测试并将应用程序部署到运行 IOS 5.1.1 (9B206) 的 iPhone 4gs 上。现在我在启用了 3g 和 WiFi 的 iPhone 上运行它。我发送数据请求，它可能会或可能不会回来。它经常超时。这些请求在工作时似乎有些迟缓。这是通过我们的 WiFi 连接在我们的内部网络上。然后我关闭了手机上的 WiFi，它似乎开始工作 100%。最重要的是，它很快。最初，这个问题出现在只有 WiFi 的 iPad 2 上，这让我切换到了手机。iPad 和 iPhone 都运行相同版本的 OS IOS 5.1.1 (9B206)。然后，我将我的应用程序部署在运行 IOS 6（忘记完整版）的 iPhone 5 上，并进行了相同的测试。在 WiFi 上似乎有问题，但在 4G LTE 上似乎很棒。

现在，我正在查看运行 IIS 6 的 Web 服务器日志。在我的连接似乎超时的情况下，它会在日志中显示 200 0 64。根据另一个stackoverflow帖子（http://stackoverflow.com/questions/372149/iis-file-download-hangs-timeouts-sc-win32-status-64），这意味着网络名称不再可用。所以看起来网络请求超时了。我所有的请求都设置为 30000 毫秒超时。然后，我从 IIS 日志中获取了手机的 IP 地址，并决定运行 tracert，它会从服务器向设备（WiFi）报告单跳。我在服务器上启动 ping -t 到设备 IP，这就是我感兴趣的时候。最初，它报告请求超时。在设备上，我拨打网络电话，在网络电话期间，我收到 2 条回复，在服务器和电话设备之间的网络通信过程中，1 次超时，然后又有 2 次回复。然后它返回到请求超时。我觉得当它应该保持打开状态以接收请求时，设备正在关闭网络连接。

对如何进行进一步的故障排除有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:23:05.430

有另一个 WiFi 路由器进行测试，看起来它已经运行得更好了。对于这种情况，我将把问题归咎于网络基础设施或故障设备。因此，解决方案显然是消除该网络设备作为问题的可能来源，并获得另一个进行测试。似乎已经修好了。

# c# - asp excel错误80040154

> ID：14160598
> 
> 赞同：2
> 
> 时间：2013-01-04T16:07:32.550
> 
> 标签：c#, asp.net, excel, com

我的 asp 项目 (C#) 有问题。

我有以下错误：由于以下错误，**检索具有 CLSID {00024500-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败：**当我尝试从服务器生成 Excel 文件时抛出 80040154。我已经看过一些关于它的帖子，我不知道它们是否适用于我，也无法解决我的问题。让我向您展示我的代码并解释一下。

```
using Excel = Microsoft.Office.Interop.Excel;
using System.Reflection;

private Excel.Application oXL;
private Excel._Workbook oWB;
private ExcelFile f;

protected void bExcel_Click(object sender, EventArgs e)
{
    if (Session["mode"] == null)
    Response.Redirect(accueil);

    // Set the values
    oXL = new Excel.Application();
    oWB = (Excel._Workbook)(oXL.Workbooks.Add(Missing.Value));
    f = new ExcelFile((Excel._Worksheet)oWB.ActiveSheet);

    oXL.Visible = true;

    /* displaying data from a gridview, non revelant here (?) */

    oXL.Visible = true;

    f = null;
    oXL = null;
    oWB = null;

} 
```

以及错误的解释（第 225 行）：

```
Erreur source: 

Ligne 224 : // Set the values
Ligne 225 : oXL = new Excel.Application();
Ligne 226 : oWB = (Excel._Workbook) oXL.Workbooks.Add(Missing.Value));
Ligne 227 : f = new ExcelFile((Excel._Worksheet)oWB.ActiveSheet); 
```

好的，所以当我尝试从服务器生成 excel 文件时遇到了这个问题，但当我使用本地版本运行调试模式时却没有（代码有效）。我公司的所有工作站都在计算机上安装了 MS Office Excel，但没有在我使用的服务器上安装，我的问题是**有没有不必在服务器上安装 Excell 的解决方案？**

我尽量避免在服务器上安装 Excel，因为服务器不是来自我的服务，所以我想避免它（但如果它是唯一（和最好/安全）的解决方案，我会这样做）如果可以的话。我尝试将库复制到服务器上的程序集文件夹中（因为所有工作站都相同，所以引用应该工作？）但我找不到我必须授予允许从服务器访问库的权限（我希望我没有解释得太糟糕）。

提前致谢，

编辑：有一件事我不明白，那就是在之前已经编写的代码中，可以像这样启动 Excel 应用程序：

```
Response.Clear();
Response.Buffer = true;
Response.ContentType = "application/vnd.ms-excel";
Response.AddHeader("Content-Disposition", "attachment;filename=registrationData.xls");

// Pour les caractères spéciaux (é, à, etc...)
Response.ContentEncoding = System.Text.Encoding.Unicode;
Response.BinaryWrite(System.Text.Encoding.Unicode.GetPreamble());

using (StringWriter sw = new StringWriter())
using (HtmlTextWriter htw = new HtmlTextWriter(sw))
{
    Table table = new Table();
    TableRow tRow = new TableRow();

    /* Adding each information of the grid using tRow.Cells.Add() */

    table.RenderControl(htw);
//  Response needs the Htmlwriter
    HttpContext.Current.Response.Write(sw.ToString());
    HttpContext.Current.Response.End();
} 
```

这是工作，没有安装 Excel，因为（我不确定）它只调用 Excel 应用程序，用缓冲区（StringWriter）填充它。但我不想使用表格，因为表格使用起来很无聊，而且我已经使用 Interop 制作了文件......如果我能找到使用服务器上安装的程序集的权限，知道所有工作站有 Excel，我应该可以像这段代码那样使用它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T16:12:22.077

**[MS 在服务器场景中不支持互操作](http://support.microsoft.com/default.aspx?scid=kb;EN-US;q257757#kb2)。**

有许多选项可以读取/编辑/创建 Excel 文件，而无需在服务器上进行互操作/安装 Excel：

MS 提供免费的 OpenXML SDK V 2.0 - 请参阅[http://msdn.microsoft.com/en-us/library/bb448854%28office.14%29.aspx](http://msdn.microsoft.com/en-us/library/bb448854%28office.14%29.aspx)（仅限 XLSX）

这可以读写 MS Office 文件（包括 Excel）。

另一个免费选项参见[http://www.codeproject.com/KB/office/OpenXML.aspx](http://www.codeproject.com/KB/office/OpenXML.aspx)（仅限 XLSX）

如果您需要更多处理旧 Excel 版本（如 XLS，不仅是 XLSX）、渲染、创建 PDF、公式等，那么有不同的免费和商业库，如[ClosedXML](http://closedxml.codeplex.com/)（免费，仅限 XLSX）、[EPPlus](http://epplus.codeplex.com/)（免费，仅限 XLSX） , [Aspose.Cells](http://www.aspose.com/categories/.net-components/aspose.cells-for-.net/default.aspx) , [SpreadsheetGear](http://www.spreadsheetgear.com/) , [LibXL](http://www.libxl.com/)和[Flexcel](http://www.tmssoftware.com/site/flexcelnet.asp)等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T15:13:30.280

由于我的实习这周结束了（是的，找到这样的东西有点晚了），我现在不能做任何新的事情，已经太晚了，所以我将恢复更改并使用之前创建 Excel 文件的过程（即不过我已经改进了）。

我相信，解决此问题的方法可能是授予使用服务器中的互操作程序集的权限，然后调用用户 Excel 程序，但我无法设置权限（它不起作用，不知道为什么）。现在为时已晚，我只是做一些维护，确保项目的连续性。

谢谢你们的答案。

# java - SQLite 高分，CursorIndexOutOfBounds - Android

> ID：14160600
> 
> 赞同：0
> 
> 时间：2013-01-04T16:07:42.237
> 
> 标签：java, android, sqlite, cursor, indexoutofboundsexception

我在下面的代码中评论了发生 IOOF 异常的两个地方。我通过测试确定数据库创建正确并且我能够插入其中。我正在尝试在测试后将所有内容集成在一起，但现在无法正常工作。LogCat 也在下面。

数据库助手.java

```
private static final String RANK = "_id"; 
private static final String SCORE = "score"; 
private static final String PERCENTAGE = "percentage";
private static final String SUM = "sum";

public long getScore(int rank) {
    Cursor c = db.rawQuery("SELECT " + SCORE + " FROM " + TABLE + " WHERE " + RANK + " = " + rank, null);
      c.moveToFirst();
    long i = c.getInt(c.getColumnIndex("SCORE") + 1);
    c.close();
    return i;
}

public int getPercentage(int rank) {
    Cursor c = db.rawQuery("SELECT " + PERCENTAGE + " FROM " + TABLE + " WHERE " + RANK + " = " + rank, null);
      c.moveToFirst();
    int i = c.getInt(c.getColumnIndex("PERCENTAGE") + 1);  //Line 56
    c.close();
    return i;
}

public void onCreate(SQLiteDatabase db) {
    db.execSQL("CREATE TABLE " + TABLE + " ("
        + RANK + " INTEGER PRIMARY KEY AUTOINCREMENT,"
        + SCORE + " LONG,"
        + PERCENTAGE + " INTEGER,"
        + SUM + " INTEGER"
        + ");"); 
```

高分.java

```
onCreate(...) {

    r1p.setText("Row1 P: " + dh.getPercentage(1));  //Row 90
    r1s.setText("Row1 S: " + dh.getScore(1));

    r2p.setText("Row2 P: " + dh.getPercentage(2));
    r2s.setText("Row2 S: " + dh.getScore(2));

    r3p.setText("Row3 P: " + dh.getPercentage(3));
    r3s.setText("Row3 S: " + dh.getScore(3));

    //etc... 
```

LogCat 输出

```
01-04 00:30:28.462: E/AndroidRuntime(5440): FATAL EXCEPTION: main
01-04 00:30:28.462: E/AndroidRuntime(5440): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.test/com.example.test.Highscores}: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
01-04 00:30:28.462: E/AndroidRuntime(5440):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-04 00:30:28.462: E/AndroidRuntime(5440):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-04 00:30:28.462: E/AndroidRuntime(5440):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-04 00:30:28.462: E/AndroidRuntime(5440):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-04 00:30:28.462: E/AndroidRuntime(5440):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-04 00:30:28.462: E/AndroidRuntime(5440):     at android.os.Looper.loop(Looper.java:137)
01-04 00:30:28.462: E/AndroidRuntime(5440):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-04 00:30:28.462: E/AndroidRuntime(5440):     at java.lang.reflect.Method.invokeNative(Native Method)
01-04 00:30:28.462: E/AndroidRuntime(5440):     at java.lang.reflect.Method.invoke(Method.java:511)
01-04 00:30:28.462: E/AndroidRuntime(5440):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-04 00:30:28.462: E/AndroidRuntime(5440):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-04 00:30:28.462: E/AndroidRuntime(5440):     at dalvik.system.NativeStart.main(Native Method)
01-04 00:30:28.462: E/AndroidRuntime(5440): Caused by: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
01-04 00:30:28.462: E/AndroidRuntime(5440):     at android.database.AbstractCursor.checkPosition(AbstractCursor.java:424)
01-04 00:30:28.462: E/AndroidRuntime(5440):     at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:136)
01-04 00:30:28.462: E/AndroidRuntime(5440):     at android.database.AbstractWindowedCursor.getInt(AbstractWindowedCursor.java:68)
01-04 00:30:28.462: E/AndroidRuntime(5440):     at com.example.test.DatabaseHelper.getPercentage(DatabaseHelper.java:58)
01-04 00:30:28.462: E/AndroidRuntime(5440):     at com.example.test.Highscores.onCreate(Highscores.java:90)
01-04 00:30:28.462: E/AndroidRuntime(5440):     at android.app.Activity.performCreate(Activity.java:5104)
01-04 00:30:28.462: E/AndroidRuntime(5440):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-04 00:30:28.462: E/AndroidRuntime(5440):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-04 00:30:28.462: E/AndroidRuntime(5440):     ... 11 more 
```

编辑：我整合了建议的内容，现在错误在同一行，但我认为略有不同。我更新了上面的 LogCat 输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T16:08:39.383

你需要在`moveToFirst()`上车前打电话`Cursor`。

```
 Cursor c = db.rawQuery("SELECT " + SCORE + " FROM " + TABLE + " WHERE " + RANK + " = " + rank, null);
    c.moveToFirst();
    //It is always better to do hasNext() check here. Just to make sure rows are available otherwise it may throw exception.
    long i = c.getInt(c.getColumnIndex("SCORE") + 1); 
```

请参阅此[示例](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)以了解如何使用光标。

# c# - RedirectToAction 调用视图时 mvc4 模型为空

> ID：14160602
> 
> 赞同：1
> 
> 时间：2013-01-04T16:07:47.157
> 
> 标签：c#, view, model, asp.net-mvc-4, controller

我将首先说我是 MVC4 的新手......所以要温柔

我有一个模型

```
public class LoginModel
{
    [Required]
    [Display(Name = "User name")]
    public string UserName { get; set; }

    [Required]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    [Display(Name = "Remember me?")]
    public bool RememberMe { get; set; }

    public double CurrentBalance { get; set; }
} 
```

这只是标准登录模型的扩展，我刚刚添加了 CurrentBalance 变量。

然后，我向 AccountModel 添加了代码，该代码使用用户名和密码登录另一个系统，成功登录后，我用返回的值更新 CurrentBalacnce 值，然后使用 RedirectToAction 加载登录页面。

```
[AllowAnonymous]
[HttpPost]
public ActionResult Login(LoginModel model, string returnUrl)
{
    if (ModelState.IsValid)
    {
        //Log into the server

        if (server_loggedIn)
        {
            server.LogOut();
        }
        if (server.LogIn("****", "****", "****") == 0)
        {
            if (server.GetUserInfoByUserName(model.UserName) == 0)
            {
                if (server.GetUserTransactionInfo(model.UserName) == 0)
                {

                    model.UserName = server.m_sLoggedInUser;
                    model.CurrentBalance = server.m_currentBalance;
                    FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);

                    return RedirectToAction("Index","Account", new {model});
                }
            }
          }
        else
        {
            ModelState.AddModelError("", "The user name or password provided is incorrect.");
        }
    }

    // If we got this far, something failed, redisplay form
    return View(model);
} 
```

正如您所看到的，我现在正在使用标准代码，而我完全了解它，但是当我加载索引页面时，我在模型中得到一个空值

```
@model Print_Management.Models.LoginModel

@{
    ViewBag.Title = "Your Account";
}

@section Header {
    @Html.ActionLink("Back", "Index", "Home", null, new { data_icon = "arrow-l", data_rel = "back" })
    <h1>@ViewBag.Title</h1>
}

<p>
    Logged in as <strong>@User.Identity.Name</strong>.
    /n\nCurrent Balance <strong>@Model.CurrentBalance</strong>
</p>

<ul data-role="listview" data-inset="true">
    <li>@Html.ActionLink("Deposit", "ChangePassword")</li>
    <li>@Html.ActionLink("Log off", "LogOff")</li>
</ul> 
```

我确信我在做一些非常基本的错误......但任何帮助将不胜感激，因为今后我将需要在视图之间传递变量..

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T16:13:30.170

重定向时不能传递复杂对象。您必须明确决定要将此模型的哪些属性与重定向一起作为查询字符串参数发送：

```
return RedirectToAction(
    "Index",
    "Account", 
    new {
        username = model.UserName,
        password = model.Password, // oops, be careful the password will appear in the query string
        rememberMe = model.RememberMe,
        currentBalance = model.CurrentBalance
    }
); 
```

实际上这样做的正确方法是在重定向时不发送任何参数：

```
return RedirectToAction("Index", "Account"); 
```

然后在目标操作中，您将能够从表单身份验证 cookie 中检索当前经过身份验证的用户：

```
[Authorize]
public ActionResult Index()
{
    string username = User.Identity.Name;

    // Now that you know who the current user is you could easily 
    // query your data provider to retrieve additional information about him
    ...
} 
```

# java - 使用 Spring 从属性文件加载嵌套占位符

> ID：14160607
> 
> 赞同：7
> 
> 时间：2013-01-04T16:07:59.650
> 
> 标签：java, spring, properties-file

是否可以从属性文件中加载嵌套占位符？我正在尝试动态加载 URL。

例如，如果我的属性文件包含

```
my.url=http://localhost:8888/service/{nestedProperty}/ 
```

有没有办法在运行时加载 {nestedProperty} 的值？类似于 ResourceBundle 的行为。如果是这样，我将如何有效地实例化字符串？到目前为止我在想

```
<bean id="myURLString" class="java.lang.String" scope="prototype" lazy-init="true">
    <property name="URL" value="${my.url}" />
</bean> 
```

...但我不确定要嵌套哪些属性。如果可能的话，我想使用 Annotations 获得一个 bean，尽管我目前有一些类似的东西

```
ctx.getBean("myURLString", String.class, new Object[] { nestedProperty} ); 
```

我在这里查看了 PropertyPlaceholderConfigurer 和其他几个属性文件问题，但我似乎无法弄清楚这是否可能。

我还应该注意，我想从我的代码中动态加载这个嵌套属性，或者至少从那里操作它们（可能通过@PostConstruct？）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T16:12:43.660

是的，有可能：

```
my.url=http://localhost:8888/service/${nestedProperty}
nestedProperty=foo/bar/baz 
```

在您的示例中的大括号前添加美元符号，您就设置好了！

要实际使用完全解析的属性，请执行以下操作：

```
@Value("${my.url}")
private String url; 
```

在 Spring bean 中。

# java - 我如何使这个 jApplet 工作？

> ID：14160611
> 
> 赞同：-2
> 
> 时间：2013-01-04T16:08:02.233
> 
> 标签：java, japplet

如何使此代码作为 jApplet 运行？

我的小程序现在看起来像这样：

```
public class TickTackToeApplet extends JApplet implements ActionListener {
    private static final long serialVersionUID = 1L;
    private ArrayList<JButton> buttons = new ArrayList<JButton>();

    private JPanel panel = new JPanel();
    private Game game = new Game();
    private Player player1;
    private Player player2;
    private int numberOfPlacedOutChars = 0;
    private String winner = "None";

    public void init() {
        try {
            SwingUtilities.invokeAndWait(new Runnable() {
                public void run() {
                    game = new Game();
                    game.setSize(4);

                    try {
                        PlayerManager pm = new PlayerManager();
                        player1 = pm.getPlayer("Henrik", "temp123");
                        player2 = pm.getPlayer("test", "test");
                    } catch (IOException e) {
                        e.printStackTrace();
                    }

                    createGUI(game.getSize());
                }
            });
        } catch (InvocationTargetException e) {
            e.printStackTrace();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

    public void CreateButtons(int gameBoardSize)
    {
        for(int x=0; x<gameBoardSize; x++)
        {
            for(int y=0; y<gameBoardSize; y++)
            {
                JButton btn = new JButton("");
                btn.setFont(new Font("Tahoma", Font.PLAIN, 32));
                btn.setName(x + ";" + y);
                btn.addActionListener(this);
                buttons.add(btn);
            }
        }
    }

    public void PlaceOutButtons()
    {
        for(JButton btn : buttons)
            panel.add(btn);
    }

    public void createGUI(int gameBoardSize) {

        panel.setSize(gameBoardSize*25, gameBoardSize*25);
        panel.setBackground(Color.BLACK);
        getContentPane().add(panel, BorderLayout.CENTER);
        panel.setLayout(new GridLayout(gameBoardSize, gameBoardSize));

        CreateButtons(gameBoardSize);
        PlaceOutButtons();
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        JButton buttonClicked = (JButton)e.getSource();
        String coordinates = buttonClicked.getName();
        String[] strArr = coordinates.split(";");
        int x = Integer.parseInt(strArr[0]);
        int y = Integer.parseInt(strArr[1]);

        if (this.numberOfPlacedOutChars % 2 == 0) {
            this.player1.setGameChar('X');
            this.game.placeChar('X', x, y);
            buttonClicked.setText("X");
            buttonClicked.setEnabled(false);
        }
        else {
            this.player2.setGameChar('O');
            this.game.placeChar('O', x, y);
            buttonClicked.setText("O");
            buttonClicked.setEnabled(false);
        }

        numberOfPlacedOutChars++;

        if(this.game.checkWin() == true) {

            updatePlayersInfo(); 

            for(JButton btn : buttons) {
                btn.setEnabled(false);
            }

            int choice = JOptionPane.showConfirmDialog(this, "Winner is: " + this.winner + 
                    ", play again?", "WINNER", JOptionPane.YES_NO_OPTION);

            if(choice == 0) {
                clearGameBoard();
                return;
            }
            //stop the applet
            stop();
        }

        if(this.game.IsDonePlaying() && this.game.checkWin() == false) {

            int choice = JOptionPane.showConfirmDialog(this, "Winner is: " + this.winner + 
                    ", play again?", "WINNER", JOptionPane.YES_NO_OPTION);

            if(choice == 0) {
                clearGameBoard();
                return;
            }
            //stop the applet
            stop();
        }
    }

    public void startGame(int gameSize, Player player1, Player player2) {
        this.game.setSize(gameSize);
        this.player1 = player1;
        this.player2 = player2;
    }

    private void updatePlayersInfo() {
        if(this.game.getWinningChar() == this.player1.getGameChar()) {
            this.player1.incrementWins();
            this.player2.incrementLosses();
            this.winner = this.player1.getUserName();
        }

        if(this.game.getWinningChar() == this.player2.getGameChar()) {
            this.player2.incrementWins();
            this.player1.incrementLosses();
            this.winner = this.player2.getUserName();
        }

        try {
            PlayerManager playerManager = new PlayerManager();
            playerManager.savePlayer(this.player1);
            playerManager.savePlayer(this.player2);
        } catch (IllegalArgumentException | IOException | InterruptedException e1) {
            JOptionPane.showMessageDialog(this, "Couldn't update player info!");
        }
    }

    private void clearGameBoard() {
        for(JButton btn : this.buttons) {
            btn.setEnabled(true);
            btn.setText("");
            this.winner = "None";
            this.game.setWinningChar('\0');
        }
    }

} 
```

但是我的小程序没有显示在浏览器中。

我可以在 html 文件中使用这个小程序标签吗？

```
<applet codebase="bin" code="gui/TickTackToeApplet.class" width=500 height=500>
<p>Testing my applet...</p>
</applet> 
```

或者我应该在小程序标签中写什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:24:57.183

您的代码太长，无法深入研究。

我不能确保它会工作甚至编译，但我将提供一些基本指南。

1 使用增量编程，编写一些东西，确保它正常工作，添加更多功能。

2 不要用大写字母调用方法，改成`placeOutButtons`

```
public void PlaceOutButtons() 
```

3`SwingUtilities.invokeLater`创建 GUI 时使用

```
 SwingUtilities.invokeLater(new Runnable() {
    public void run() {
        createAndShowGUI();
    }
}); 
```

[http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)

4 `init()`是您的小程序的入口点，方法浏览器将调用。因为它是空的，所以什么也没有发生。

[http://docs.oracle.com/javase/tutorial/deployment/applet/appletMethods.html](http://docs.oracle.com/javase/tutorial/deployment/applet/appletMethods.html)

5 你永远不会在类上调用构造函数`TickTackToeApplet`。试着在里面做`init`

6 如果您使用 Eclipse，您可以使用其内置的 Applet Viewer 启动小程序。

# jquery - Fancybox 在 .html 中工作，但不在 .xml 中

> ID：14160614
> 
> 赞同：0
> 
> 时间：2013-01-04T16:08:26.727
> 
> 标签：jquery, fancybox

我正在为大学做一个项目，并希望在 .xml 格式的 XHTML 页面上使用 Fancybox。

现在的问题是，使用 .html 文件是可行的，但在 .xml 文件中使用几乎相同的代码根本不起作用。表示fancybox的路径是正确的。

这是 .xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>fancybox testing</title>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script type="text/javascript" src="fancybox/source/jquery.fancybox.js?v=2.1.3"></script>
        <link rel="stylesheet" type="text/css" href="fancybox/source/jquery.fancybox.css?v=2.1.3" media="screen" />

        <script type="text/javascript">
            $(document).ready(function(){
                $(".fancybox").fancybox();
            });
        </script>   
    </head>

    <body>
        <div>
            <a class="fancybox" href="1.png">image</a>
        </div>
    </body>
</html> 
```

.html 文件中的此代码有效。知道为什么吗？我需要.xml中的fancybox：-/

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:14:16.567

请注意，XML 与 XHTML 不同。

XML 是可扩展的标记语言（您可以发明自己的标签），而 XHTML 是“完美的”HTML。如果您使用 .XML 扩展名，您的服务器会向您的浏览器发送一组不同的标头（告诉浏览器这是一个 XML 页面，因此浏览器不会将其显示为 HTML 网页），而不是使用 .XHTML 时扩展名（标题告诉您的浏览器它是“超级干净”的 HTML）。

如果您无法更改文件扩展名，则应在请求此文件时更改服务器发送的标头。否则这将不起作用，因为浏览器不知道如何处理 XML。

# .net - 具有不变类型化集合的 WCF OData 服务方法

> ID：14160616
> 
> 赞同：2
> 
> 时间：2013-01-04T16:08:35.217
> 
> 标签：.net, wcf, inheritance, wcf-data-services, odata

我正在尝试使用 WCF OData Services 5.2 发布服务方法，该方法应返回派生类型（POCO 对象）的集合：

```
 public class WcfDataService1 : DataService<MyProvider>
    {
        public static void InitializeService(DataServiceConfiguration config)
        {

            config.SetEntitySetAccessRule("*", EntitySetRights.All);
            config.SetServiceOperationAccessRule("*", ServiceOperationRights.All);
            config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V3;
            config.UseVerboseErrors = true;
            config.SetServiceActionAccessRule("*", ServiceActionRights.Invoke);

        }

        [WebGet]
        public List<Vehicle> GetStuff()
        {
            var c = new List<Vehicle>() 
                {
                    new Motorbike() {Id = 1},
                    new Car() {Id = 2}
                };
            return c;
        }
    }

    public class MyProvider
    {
        public IQueryable<Car> Cars { get; set; }
        public IQueryable<Motorbike> Motorbikes { get; set; } 
    }

    [DataServiceEntity]
    [DataServiceKey("Id")]
    public abstract class Vehicle
    {
        public int Id { get; set; }
        public string Name { get; set; }
    } 
    public class Motorbike : Vehicle
    {
        public int MaxSpeed { get; set; }
    } 
    public class Car: Vehicle
    {
        public int NumberOfTyres { get; set; }
    } 
```

我收到以下异常：服务操作“System.Collections.Generic.List`1[ODataV3.Vehicle] GetStuff()”生成“ODataV3.Vehicle”类型的实例，但需要为该类型设置一个实体。

如果我将实体集添加到我的上下文中，它会导致不同的异常：属性“车辆”和“汽车”是“ODataV3.Vehicle”和“ODataV3.Car”类型的 IQueryable，而“ODataV3.Vehicle”类型是祖先对于“ODataV3.Car”类型。请确保每个类型层次结构只有一个 IQueryable 属性。

如果没有服务方法，我将获得具有预期基本类型属性的正确元数据。

有什么方法可以实现我的 GetStuff() 方法并拥有所有必要的 OData 元数据？我试图结合基本/继承类型的属性，但没有成功。我不会在 WebAPI 项目中手动编写元数据（使用额外的 OData 模块进行扩展）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:55:24.553

目前这是不可能的。每种实体类型必须只有一个实体集（适用于服务操作，一般不适用，但大多数情况下只有自定义提供程序才有可能）。在您的情况下，实体类型 Vehicle 有两个实体集。

通常，此类服务将通过返回单个实体集 Vehicles（类型为 Vehicle）来建模，该实体集返回所有内容。在客户端上，您可以使用 V3 类型段功能限制摩托车：~/Vehicles/NS.Motorbike

还可以为服务器上的特定类型（如果需要）提供可查询的服务操作，然后（几乎）像实体集一样工作。

# entity-framework - 实体框架 Database First 与 Visual Studio 2008

> ID：14160619
> 
> 赞同：0
> 
> 时间：2013-01-04T16:08:40.583
> 
> 标签：entity-framework, visual-studio-2008

我需要访问现有的数据库。如何使用 Database First 创建与**Visual Studio 2008**映射到现有数据库的框线模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:36:17.683

您必须拥有 .NET 3.5 SP1 和 VS 2008 SP1 - 这是 EF 可用的第一个版本。之后，您将拥有可用于添加到您的项目的 ADO.NET 实体数据模型项。添加项目后，将运行一个向导，您将能够为您的数据库优先方法定义源数据库。

# c++ - 矩阵初始化

> ID：14160621
> 
> 赞同：0
> 
> 时间：2013-01-04T16:08:43.900
> 
> 标签：c++, matrix

有人可以解释下面标记线的意义吗？通常它正在初始化矩阵。

假设 size = 3。那么它应该创建一个有 6 个位置的矩阵，即一个 1x6 矩阵。但是每次都需要在这里第二行。为什么每次都推-1？

```
for (unsigned i = 0; i < size(); i++) { 
    vector<int> *t = new vector<int>;       // (1)
    for (unsigned j = 0; j <= i; j++) { 
        t->push_back(-1);                   // (2)
    }
    matrix.push_back(*t);   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:21:12.637

代码构造并初始化方阵的上三角形或下三角形（取决于索引的解释）。Line`(1)`分配一个新的行或列向量。Line`(2)`使用任意值 ( `-1`) 初始化直到并包括矩阵对角线的值。为什么代码`-1`用作初始值只能通过检查代码或阅读随附的文档来回答。

除了功能线`(1)`产生内存泄漏。由于`matrix`不拥有所有权，因此在超出范围`t`时无法回收内存。`t`更正后的代码如下所示：

```
for (unsigned i = 0; i < size(); i++) { 
    vector<int> t;       // (1)
    for (unsigned j = 0; j <= i; j++) { 
        t.push_back(-1); // (2)
    }
    matrix.push_back(t);
} 
```

请注意，line`(1)`分配了一个在超出范围时自动销毁的对象。这修复了原始代码中的内存泄漏。假设大小为 3，这将产生：

```
-1 -1 -1          -1
   -1 -1    or    -1 -1
      -1          -1 -1 -1 
```

取决于矩阵的第一个索引是引用行还是列。

# php - 使用 PHP 从一组 mp3 中创建自己的 mp3

> ID：14160626
> 
> 赞同：0
> 
> 时间：2013-01-04T16:08:59.143
> 
> 标签：php, mp3

我看过这个问题

[使用 PHP 在服务器上合并/连接 MP3](https://stackoverflow.com/questions/2164562/combine-concatenate-mp3s-on-server-using-php)

只是想知道是否有一种方法可以扩展功能，以便您不仅可以连接而且可以覆盖 2 个 mp3？这可能吗？

我的意思是覆盖。MP3 A MP3 B 创建 MP3 C

谁的音频像

mp3 一个

mp3乙

同时

# apache - 在 Apache 中：该部分是否 仅适用于目录还是也适用于 URI？

> ID：14160630
> 
> 赞同：1
> 
> 时间：2013-01-04T16:09:10.013
> 
> 标签：apache, security, http, rest, authorization

我想知道是否可以通过该部分限制对某些 URI（不是目录）的访问。

我需要将特定 URI 的访问限制为某些用户，而某些其他用户可以完美地访问该 URI。我想知道这一点以实现对特定资源的授权（在具有 REST 架构风格的应用程序上下文中的资源）。

如果可以这样使用，我可以使用 Apache 中的授权模块来限制对 URI 的访问。

# php - 什么基于浏览器的所见即所得编辑器尊重我的 HTML 格式？

> ID：14160631
> 
> 赞同：3
> 
> 时间：2013-01-04T16:09:10.240
> 
> 标签：php, javascript, jquery, dojo, wysiwyg

当我切换回所见即所得视图时，哪个基于浏览器的所见即所得编辑器尊重我在代码视图中键入的 HTML？我使用了基于 dojo 的（dijit.Editor），但这会删除它不知道的所有标签，并重新格式化我的代码。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T16:11:53.963

到目前为止我用过的最好的是CKeditor。它并不完美，但非常有用。

[http://ckeditor.com/](http://ckeditor.com/)

但是，您必须对其进行配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T16:18:00.683

试试Xinha，我觉得是最好的，你可以配置你想要什么样的插件：

[http://xinha.raimundmeyer.de/x_examples/ext_example.html](http://xinha.raimundmeyer.de/x_examples/ext_example.html)

# redirect - Nginx 重定向到 domain.com > /blog，同时仍然能够指定 domain.com/mycustomdir

> ID：14160632
> 
> 赞同：1
> 
> 时间：2013-01-04T16:09:12.243
> 
> 标签：redirect, nginx

我正在使用 Nginx 1.0.15

我想重定向 domain.com > domain.com/wordpress 但我仍然希望能够专门浏览到 domain.com/mycustomdirectory 例如 domain.com/files/

这是我当前的配置。这里已经有重写了。

```
server {
    listen       80 default_server;
    server_name  domain.com;

    #charset koi8-r;

    #access_log  logs/host.access.log  main;

    location / {
        root   /usr/share/nginx/html;
        index  index.php index.html index.htm;
}
        location /twitter {
        rewrite ^ http://twitter.com/name permanent;
}
        location /music {
        rewrite ^ http://domain.com:8080 permanent;
}
        location /plus {
        rewrite ^ http://gplus.to/name permanent;
}

     error_page  404              /404.html;
     location = /404.html {
       root   /usr/share/nginx/html;
} 
```

# prolog - 错误：read_util:read_line_to_codes/2： 不存在

> ID：14160637
> 
> 赞同：0
> 
> 时间：2013-01-04T16:09:26.560
> 
> 标签：prolog, swi-prolog

当我尝试读取文件并对输入进行一些处理并将它们写入另一个文件时，我遇到了这个错误，

```
ERROR: read_util:read_line_to_codes/2: <stream> Number does not exist 
```

其中 Number 是流的数量（例如：04068B20））并且每次都会更改。

```
read_File(Stream,[H|T],LineNumber):-
    read_line_to_codes(Stream, H),      
    (H \= end_of_file -> /*open other file and write in it*/). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T03:59:55.137

您的信息流不存在。你能以某种方式关闭流和/或移动/删除文件吗？

# .net - 欺骗 .net 程序集并讨论以前发布的注释

> ID：14160644
> 
> 赞同：3
> 
> 时间：2013-01-04T16:09:41.663
> 
> 标签：.net, assemblies, spoofing

我搜索了保护 .net 程序集免受欺骗，发现[这篇文章](https://stackoverflow.com/questions/13346265/how-to-prevent-spoofing-of-dlls-in-net)非常有用。但是，我在帖子中看到了一个非常明显的矛盾。有一点指出，如果用户是同谋，则强名称是没有用的：

> 但是，如果用户是欺骗的同谋（如果他试图作弊，就会出现这种情况），那么代码签名将只不过是一个减速带，并不能提供真正的保护。当然，强名称不提供与例如 PunkBuster 相媲美的保护。

几行之后，作者完全相反地陈述了一些事情：

> 然后，当您添加对已签名程序集的引用时，如果有人尝试使用相同的程序集名称（不是完全限定的程序集，只是没有版本、哈希和公钥的名称）和相同类型名称的不同程序集，则尝试加载类型时CLR填充失败，表示找不到；使用完全限定的程序集名称以及命名空间和类型名称来解析类型。

所以：

1）这是矛盾还是我失去了什么？第一段中的作者是否在谈论验证强名称被禁用并且不会重新启用的情况？

此外，令人惊讶的是，它指出：

> 如果攻击者能够修改您引用的程序集的强名称，那么他们就可以轻松修改您的程序集和所有其他参与执行的程序集

2) 如何修改已部署程序集（例如 DLL）的强名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:40:05.453

这里似乎没有矛盾 - 第二个引用正确地表明，简单地将引用的程序集替换为另一个包含相同名称类型、具有不同（或没有）强名称的程序集将失败，因为此程序集将不匹配参考文献中指出的那个。本质上，这是系统保护自己免受用户非预期修改的方式。

但是，如果打算进行修改（*即*用户是同谋，根据第一个引号），那么有简单的方法可以加载修改后的程序集，例如通过禁用强名称检查（这将允许程序集具有无效签名，比如说因为它已经被修改）仍然被加载，或者通过改变程序集引用本身。

在回答您的第二个问题时，虽然标准程序集签名工具`sn`没有选项可以将程序集的强名称替换为另一个，但这当然是可能的，并且简单的搜索应该会找到能够这样做的各种工具。（事实上​​，用一个简单的十六进制编辑器就很容易做到）。

# python - 在 Django 中过滤评估的 QuerySet

> ID：14160647
> 
> 赞同：1
> 
> 时间：2013-01-04T16:09:57.297
> 
> 标签：python, django

在这种情况下，要求是我能够通过字符串属性访问*评估*的QuerySet 的成员`name`。我不喜欢在 QuerySet 上循环的想法，因为似乎有一种更有效的方法。

在我打电话给类似的东西之后：

```
my_objects = MyObject.objects.all() 
```

我用类似的东西来评估它：

```
len(my_objects) 
```

在这种情况下，从评估的 QuerySet 中按名称获取特定结果的最佳方法是什么`my_objects`？理想情况下，我希望看到类似`my_objects.filter(foo='bar')`.

请注意，在此过程中，我需要评估的 QuerySet 中的所有结果，这就是我在一个初始查询中拥有它的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:12:59.130

没有直接的方法可以根据查询集中的字段值获取对象。但是您可以做的一件事是从查询集创建一个字典并设置`name`为键（必须是唯一的）：

```
my_objects = MyObject.objects.all()
obj_dict = {obj.name: obj for obj in my_objects}
print obj_dict['any_name'] 
```

仅供参考：如果您只想从表中检索单个对象，则可以使用[.get](https://docs.djangoproject.com/en/dev/topics/db/queries/#retrieving-a-single-object-with-get)方法：

```
obj = MyObject.objects.get(pk=id)
or
obj = MyObject.objects.get(name='unique_name') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-22T20:55:54.893

评估的查询集是一个列表。列表元素没有索引，因此无论如何都需要循环。但是假设评估的查询集不是那么大，最多几百个条目，所以循环是可以的。不要评估大型查询集。

顺便说一句，类似的对象列表由`prefetch_related()`. 有一个实现`ListQuerySet`支持许多过滤器、排序和不同的过滤器，从而可以对这样的对象列表运行许多（尽管不是全部）查询：

[https://github.com/Dmitri-Sintsov/django-jinja-knockout/blob/master/django_jinja_knockout/query.py](https://github.com/Dmitri-Sintsov/django-jinja-knockout/blob/master/django_jinja_knockout/query.py)

# asp.net - 当我停止调试时，Visual Studio 会删除 cookie

> ID：14160648
> 
> 赞同：4
> 
> 时间：2013-01-04T16:09:58.620
> 
> 标签：asp.net, visual-studio-2010, visual-studio, internet-explorer-9

我们的 Web 应用程序身份验证使用 cookie，因此用户身份验证不依赖于可以过期的会话。这很好用，除非我在调试时。当我停止调试时，Visual Studio 似乎删除了所有“localhost”cookie。这意味着我每次开始调试时都必须重新登录。

当我停止调试时，我能否以某种方式阻止 Visual Studio 删除 cookie？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-12-17T09:43:38.673

我也遇到了您的问题，通过禁用“停止调试器...”选项，我的问题得到了解决。我正在使用 Visual Studio 2019。

![在此处输入图像描述](../Images/a698afc1b2974f36ae7374b7721734c4.png)

# c# - 如何检查 System.IO.File.Delete 是否成功删除文件

> ID：14160656
> 
> 赞同：13
> 
> 时间：2013-01-04T16:10:38.740
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-4

使用 system.io.file 类删除文件后：

```
System.IO.File.Delete(openedPdfs.path); 
```

如果文件被成功删除，我需要运行一些代码。只要该方法不返回任何值，我就会在 delete 方法之后检查文件是否存在。如果它仍然存在，我认为操作失败了。

问题是，删除方法工作正常，但要删除文件有几秒钟的时间。Exist 函数返回 true，因为当时它正在检查文件是否存在。

如何确定是否`System.IO.File.Delete(openedPdfs.path);`已成功完成？

**代码：**

```
FileInfo file = new FileInfo(openedPdfs.path);    
System.IO.File.Delete(openedPdfs.path);
if (file.Exists == false)
{ ... }
else 
{ ... } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-04T16:37:23.153

正如其他人指出的那样，该`File.Delete`方法将在失败的情况下抛出异常。

他们没有指出的是，**几乎**在所有情况下都会抛出异常，但**并非在所有情况下**都会抛出异常。具体来说，如果要删除的文件碰巧不存在，该`File.Delete`方法**不会抛出异常。**（呃？他们在想什么？）

因此，您应该在删除文件**之前检查文件是否存在；**如果它不存在，你不应该做任何事情。如果它存在，你应该调用`File.Delete`，如果它抛出一个异常，那么你不应该做任何事情，因为文件没有被删除。否则，你应该做你的post-successful-deletion-of-existing-file。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T16:12:17.683

`Delete`如果文件没有被删除，应该抛出异常。因此，您的电话`Exists`是多余的。

查看. [_`Delete`](http://msdn.microsoft.com/en-us/library/system.io.file.delete.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T16:23:29.063

这是 Daniel A. White 的回答：我们可以看到[该方法的签名](http://msdn.microsoft.com/en-us/library/system.io.file.delete.aspx)是`public static void Delete(string path)`. 很明显，除非例外，否则您不会从 Delete 调用中获得反馈。但是让我们假设您有一个由另一个进程定期写入或更新的文件：

1.  您的程序已成功删除该文件。
2.  另一个进程在删除后立即重新创建它。
3.  您的程序使用`file.Exists`. 有一个同名的新文件，因此返回 true。从技术上讲，您走错了路。

对于您当前尝试解决的问题，这种确切的情况可能不正确，但检查 Delete 调用是否引发异常比依赖当前实现更可靠。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T16:13:35.783

如果文件不存在，它不会抛出异常。如果出现错误，如果无法删除，则会抛出异常，请检查[`File.Delete`](http://msdn.microsoft.com/en-us/library/system.io.file.delete.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T16:13:47.207

您可以随时使用

```
 System.IO.File.Exists(path) 
```

虽然我同意丹尼尔的观点，但如果删除不抛出异常，你应该很好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-04T16:28:36.620

从评论和建议中，您应该能够使用以下内容来实现您想要的结果

```
try {
  FileInfo file = new FileInfo(openedPdfs.path);    
  System.IO.File.Delete(openedPdfs.path);
  // if no exception is thrown then you should assume all has gone well and put  
  // your file successfully deleted code here.
} catch /*(Specfic exceptions can be referenced here in separate catch blocks see Daniel A. White answer)*/ {
  // If something bad happened and the file was not deleted put handling code here
} finally {
  // if some action needs to be taken regardless of whether the file was successfully deleted or not put 
  // that code here
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-05T21:24:58.027

我发现如果您使用 FileInfo Delete() 实例方法，则 FileInfo 实例属性 Exists 不会更新。
例如，下面的代码将抛出一个文件未找到异常，因为该文件已被删除，但第二个`if (output_file.Exists)`仍然评估为真。

```
FileInfo output_file;
if (output_file.Exists) output_file.Delete();   

FileStream fs;
if (output_file.Exists)
{
     fs = new FileStream(fi.FullName, FileMode.Open, FileAccess.ReadWrite);
}
else
{
     fs = new FileStream(fi.FullName, FileMode.CreateNew, FileAccess.ReadWrite);
} 
```

我发现从旧文件创建一个新的 FileInfo 解决了这个问题：

```
FileInfo output_file;
if (output_file.Exists)
{
    output_file.Delete();
    output_file = new FileInfo(output_file.FullName);      
}

FileStream fs;
if (output_file.Exists)
{
     fs = new FileStream(fi.FullName, FileMode.Open, FileAccess.ReadWrite);
}
else
{
     fs = new FileStream(fi.FullName, FileMode.CreateNew, FileAccess.ReadWrite);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-29T02:29:29.733

```
private String del(String fileLocation) {

 if (File.Exists(@fileLocation)) {
  try {
   File.Delete(@fileLocation);
  } catch (Exception e) {
   return "File couldn't be deleted because: " + e.GetType().Name;
  }
 } else {
  return "File doesn't exist";
 }

 return "File successfully deleted";
} 
```

# c++ - 我应该如何在 Windows 中从另一个程序运行一个程序？

> ID：14160659
> 
> 赞同：2
> 
> 时间：2013-01-04T16:10:42.893
> 
> 标签：c++, c, windows

> **可能重复：**
> [如何在 Windows 上用 C++ 创建进程？](https://stackoverflow.com/questions/1067789/how-to-create-a-process-in-c-on-windows)

我应该如何在 Windows 中从另一个程序运行一个程序？为什么`system()`不好？我读过[这个](https://stackoverflow.com/questions/17140/how-do-you-spawn-another-process-in-c)，但从 Unix 的角度来看，它似乎涵盖了这个主题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:28:28.923

生成子进程是一个非常依赖于操作系统的过程。stdlib.h 中的 system() 在设计时考虑了 Unix 环境，并且不是线程安全的。使用 system() 可以在任何 C 环境中工作，但结果是严格没有定义的。此外，当使用 system() 时，父进程必须等到子进程退出将显着减慢您的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T16:14:14.017

如果您需要更多的控制和监控，还有更复杂的选项。对于 unix 系统，有 fork() 函数和 exec() 函数。对于 Windows，特别是有 CreateProcess() 函数。

第二，

`system()`对于简单的程序来说没问题，但是系统提供的灵活性较低，而且它会比用 C/C++ 语言实现的东西慢得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T17:40:15.680

有一种简单的方法可以从另一个程序中运行一个程序。假设您想从另一个程序运行 HelloWorld.cpp。只需编写如下内容：

```
 #include<iostream>
    using namespace std;
    int main(void)
    {
       system("g++ -o abcd HelloWorld.cpp && ./abcd");
      return 0;
    } 
```

（这假设程序位于您所在的目录中。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T18:14:28.670

`system`不是魔鬼。在大多数情况下，这只是您不打算做的事情。

首先，您要问的几乎是不可能的：操作系统管理进程的方式是使操作系统与众不同的原因之一，因此不要指望一种单一的方式可以与所有操作系统一起工作。

除非您正在使用非常基本的功能，例如`system`. 但做什么`system`，其实不只是启动一个程序。它启动操作系统默认命令解释器，并为它提供您传递给该函数的字符串。对于大多数操作系统，这将导致启动程序。但是之后会发生什么，不仅取决于目标操作系统是什么，还取决于它的配置方式以及调用进程相对于它的权限。

很容易欺骗这样的命令：只要让解释器沿着它的搜索路径找到一个与你要调用的程序同名的批处理文件，它就会被执行。简单地说，任何人，即使不接触您的代码，也可以在您或您的用户不知情的情况下让您的代码执行他喜欢的任何事情。一个非常棒的特洛伊木马竞技场！不是可以依赖的东西，尤其是在安全性很重要的地方。

但是......如果您正在编写一个系统实用程序，其目的是自动化一组系统操作，`system`那么很可能是您需要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T17:48:29.043

为什么 system() 不好？

好吧，我不知道它本身是否不好，但如果你正在生成另一个进程，你最想对进程进行某种控制。像[ShellExecute](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153%28v=vs.85%29.aspx)这样的调用为您提供了更多选项来微调过程，最重要的是获得一个句柄，您可以使用该句柄进行进一步的通信。`system()`OTOH 不会告诉您该过程是否已经开始。

如果您正在进行 Windows 编程（并且没有可移植性要求），那么我建议您尽可能使用 WinAPI 以获得最佳结果。例如文件处理、共享内存等。

# asp.net-mvc - Rotativa / Wkhtmltopdf图像不显示

> ID：14160662
> 
> 赞同：8
> 
> 时间：2013-01-04T16:10:50.417
> 
> 标签：asp.net-mvc, image, path, wkhtmltopdf, rotativa

我目前正在创建一个 MVC 4 Web 应用程序。

我有一个动作，它的基本背景图像总是相同的，然后是一个箭头图像，它根据动作中收集的信息而改变程度。

我称这个动作使用

```
<img src="@Url.Action("trend-image", "NonReg_Reports")" alt="background" width="245" height="105" /> 
```

当它被调用并且只是显示一个 HTML 网页时，它工作正常。它给了我HTML。

```
<img src="/nonreg-report/01495344/trend-image" alt="background" width="245" height="105"> 
```

然后我使用 Rotativa / Wkhtmltopdf 将此 HTML 页面转换为 PDF。这运行与上面相同的代码。

问题是如果我使用上面的代码，我只会得到一个带有替代文本的白框。

如果我使用`<img src="~/Content/images/trend_back_medium.png" alt="astuff" />`which 是我项目中的实际背景图像，它可以正常工作。

由于使用方式，上面代码中的图像无法保存在任何地方。我认为这是一个路径问题，但是在尝试了很多不同的事情之后，我仍然无法让它工作。

任何建议或帮助将不胜感激谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-07-14T11:03:55.267

我有同样的问题。正常的 html 视图可以显示图片，pdf 不显示。我用 Server.MapPath 指向图片，没关系...

```
<img src="@Server.MapPath("~/Folder/SubFolder/Subfolder/ImageName.png")" /> 
```

我希望这个能帮上忙

亚当

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-03T19:05:10.420

我遇到了同样的问题，我找到了一种解决方法，虽然不是很好，但它适合我的需要。

Rotativa(Wkhtmltopdf?) 似乎对从 http 处理程序返回的图像有问题（至少在我的情况下）。因此，为了处理这种情况，在控制器操作中，在返回`new ViewAsPdf...`我的代码之前手动将文件保存到某个本地“临时”文件夹，并将渲染视图中的图像“src”替换为以服务器路径方式指向该本地文件的路径，例如：`http://localhost/img/temp/trend-image.png`. 这不是一个好的解决方案，如果您已经找到更好的解决方案，请告诉我。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-02T09:23:14.380

将属性 [System.Web.Mvc.AllowAnonymous] 添加到返回图像的控制器方法中为我解决了这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-24T14:22:34.020

通过css似乎可以正常工作...

我试图在页面顶部显示一个徽标并用 div 切换它并将高度和宽度设置为图像的高度和宽度。

CSS：

```
div.logo {
    background-image: url("/images/logo/logo.png");
    height: 53px;
    width: 185px;
} 
```

HTML：

```
<div class="logo"></div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-04T12:10:26.157

我认为这可能归结为基本上缺少“.png”位。

您可以添加这样的映射`/nonreg-report/01495344/trend-image.png`»`/nonreg-report/01495344/trend-image`并使两个 url 都处于活动状态，为什么不呢？这样 wkhtmltopdf 就被愚弄了，您仍然拥有动态图像，而无需将其保存在磁盘上的任何位置。动态网址可以工作，我这样做是为了将 gif2png 实时转换为 wkhtmltopdf。

拥有一个绝对网址也可能会有所帮助，我认为您可以这样做：

```
src="@Url.Action("trend-image", "NonReg_Reports", null, Request.Url.Scheme)" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-03T23:11:18.260

我发现在我的页面中，图像没有显示，因为它们是 .gif 文件。Rotativa 可能会遇到 GIF 问题。当我将图像更改为 .jpg 或 .png 时，一切正常。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-08-05T10:33:57.857

如果您要指定高度和宽度，请确保您应该将其写在样式标签中，例如`<some-tag style="height: 100px; width:100px">`

# sql-server-2008 - 如何在 sql server 2008 中添加时间？

> ID：14160664
> 
> 赞同：-2
> 
> 时间：2013-01-04T16:10:52.020
> 
> 标签：sql-server-2008

我想计算员工在上午 9:00 到晚上 18:00 之间的总小时数。

我的数据库看起来像这样。

我怎样才能做到这一点？？

```
AttendanceId     EmpId           CheckTime                  CheckType
-------------------------------------------------------------------------
   3               5             2013-01-03 09:00:15.000           1 (Login)
   4               5             2013-01-03 11:00:00.000           2 (Logout)
   5               5             2013-01-03 11:30:00.000           1 
   6               5             2013-01-03 13:00:00.000           2 
   7               5             2013-01-03 13:30:00.000           1 
   8               5             2013-01-03 16:00:00.000           2 
   9               5             2013-01-03 16:30:00.000           1 
  10               5             2013-01-03 18:00:00.000           2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:57:36.760

由于您的`Login`/值在同一列中，因此首先登录/注销时间`Logout`可能更容易，然后再确定员工在场的总时间。`PIVOT``datediff`

查询的`PIVOT`部分是这样的：

```
select empid, [1], [2]
from
(
  select empid, checktime, checktype,
    row_number() over(partition by empid, checktype order by checktime) rn
  from yourtable
) src
pivot
(
  max(checktime)
  for checktype in ([1], [2])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/e94f3/3)

结果是：

```
| EMPID |                              1 |                              2 |
---------------------------------------------------------------------------
|     5 | January, 03 2013 09:00:15+0000 | January, 03 2013 11:00:00+0000 |
|     5 | January, 03 2013 11:30:00+0000 | January, 03 2013 13:00:00+0000 |
|     5 | January, 03 2013 13:30:00+0000 | January, 03 2013 16:00:00+0000 |
|     5 | January, 03 2013 16:30:00+0000 | January, 03 2013 18:00:00+0000 | 
```

[`DateDiff()`](http://msdn.microsoft.com/en-us/library/ms189794.aspx)一旦数据处于这种结构中，您可以通过应用函数轻松获得时间差异。

生成员工登录时间的最终查询是：

```
select empid, sum(SecondsDiff) / 3600 as TotalHours
from
(
  select empid, datediff(ss, [1], [2]) SecondsDiff
  from
  (
    select empid, checktime, checktype,
      row_number() over(partition by empid, checktype order by checktime) rn
    from yourtable
  ) src
  pivot
  (
    max(checktime)
    for checktype in ([1], [2])
  ) piv
) src
group by empid 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/0dab2/9)

结果是：

```
| EMPID | TOTALHOURS |
----------------------
|     5 |          7 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:17:51.823

要获得两个日期之间的差异，请使用以下`DATEDIFF`函数：http: [//msdn.microsoft.com/en-us/library/ms189794.aspx](http://msdn.microsoft.com/en-us/library/ms189794.aspx)

不过，我认为您需要逐行执行此操作。由于表的结构，您不能只进行简单的查询。

# visual-studio-2012 - 无法将 SpecFlow 项目添加到 Visual Studio 2012 Premium 中的项目

> ID：14160666
> 
> 赞同：0
> 
> 时间：2013-01-04T16:10:59.163
> 
> 标签：visual-studio-2012, specflow

我使用 Visual Studo 2012 Premium 安装了 SpecFlow v1.9.1，但是当我尝试将新的 SpecFlow 项目添加到类库项目时，我无法添加 SpecFlow 项目，因为它不在我可以添加的项目列表中。

经过一番搜索，我发现 SpecFlow 在 Visual Studio Express 上存在问题，但我使用的是高级版。如果 SpedFlow 不支持高级版，我会感到惊讶。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:40:27.463

不确定这是否可行，因为它是一个 VSIX 包，但是您是否尝试过关闭所有 VS 窗口，然后从 VS 命令提示符

```
devenv /setup 
```

# android - android facebook sdk 3.0 自定义点赞按钮

> ID：14160667
> 
> 赞同：1
> 
> 时间：2013-01-04T16:11:01.613
> 
> 标签：android, facebook-android-sdk

我正在使用适用于 Android 的 Facebook SDK 3.0。

如何制作自定义喜欢按钮

```
Request request = new Request(session, page_id + "/likes", null, HttpMethod.POST,  new Callback()
{
    @Override
    public void onCompleted(Response response)
    {
        Log.i(DEBUG_TAG, response.toString());
        // TODO Auto-generated method stub
        if (response.getGraphObject() != null)
        {
            //Log.i(DEBUG_TAG, response.toString());
        }
    }
});
RequestAsyncTask task = new RequestAsyncTask(request);
task.execute(); 
```

page_id = 417732304946490

有 OAuthException (#3) 应用程序没有能力进行这个 API 调用。

没有办法在应用程序中使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T09:47:59.500

Facebook 图形 API 不提供给 Facebook 页面点赞的功能。相反，您可以使用您的页面 URL 打开 web 视图，以便您可以登录并喜欢您的页面。

```
 // To open webview
 String url = "your page URL";
 Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
 startActivity(i); 
```

# c# - 将泛型类型参数限制为 System.Enum

> ID：14160669
> 
> 赞同：6
> 
> 时间：2013-01-04T16:11:06.300
> 
> 标签：c#, generics, enums

我有一个应该用类型指定的泛型类型`Enum`（实际上，它是几个指定的枚举之一，但我会接受`System.Enum`）。

当然，编译器会拒绝以下代码：

```
class Generic<T> where T : Enum {} 
```

带有*“约束不能是特殊类'System.Enum'”*异常。

到目前为止，我能够提出的唯一解决方案是使用静态类型初始化程序来检查类型参数，如果它实际上不是 Enum，则抛出异常，如下所示：

```
class Generic<T> 
{
  static Generic()
  {
    if (typeof(T).BaseType != typeof(Enum))
      throw new Exception("Invalid Generic Argument");
  }
} 
```

这至少给了我运行时安全性，我们不会将其与非枚举参数一起使用。然而，这感觉有点 hacky，那么有没有更好的方法来完成这个，理想情况下使用编译时构造？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T16:16:05.637

您可以使用[Jon Skeet 的](https://stackoverflow.com/users/22656/jon-skeet) [Unconstrained Melody](https://github.com/jskeet/unconstrained-melody)项目来执行此操作。

使用不受约束的旋律，你会写：

```
class Generic<T> where T : IEnumConstraint 
```

这将完成同样的事情。

[有关 Unconstrained Melody 的更多信息以及使用示例。](https://codeblog.jonskeet.uk/2009/09/10/generic-constraints-for-enums-and-delegates/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T16:13:34.710

不幸的是，没有办法确保传递给泛型类的类型在编译时是枚举。您只能添加以下约束：

```
class Generic<T> where T : struct { } 
```

为了排除所有引用类型，但运行时检查仍然是必要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T16:14:35.130

我认为你可以使用结构：

```
class Generic<T> where T : Struct 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T16:19:41.813

枚举还实现了 IConvertible 接口，因此您可以将其与结构一起添加为约束。

```
class Generic<T> where T : struct, IConvertible {} 
```

# vba - On error resume next 不适用于 IE 自动化

> ID：14160676
> 
> 赞同：0
> 
> 时间：2013-01-04T16:11:37.627
> 
> 标签：vba, excel

我正在尝试从某些网页（公司拥有）获取数据，我曾经使用 Getelementsbyid 方法从网站返回值

问题是如果特定元素有数据，宏会从该页面获取数据，否则它会引发错误，我尝试了错误恢复下一步，如果特定元素没有任何数据，则错误处理程序方法跳过错误..

```
Elementid = ctl00_conMainPageContent_lblGeneralNotesData 
```

实际上它的标签框..主要是它有一些数据有时可能没有

```
Code :

on error resume next

Sheets("AVS").Range("I" & lRow + 1).Value =ie.Document.getElementById("ctl00_conMainPageContent_lblGeneralNotesData").Value 
```

如果有人在这方面帮助我，那就太好了..我希望我的解释有点清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:12:28.530

就像是

```
Dim var As Variant
On Error resume Next
var = ie.Document.getElementById("ctl00_conMainPageContent_lblGeneralNotesData").Value

If Len(var) > 0 then
    Sheets("AVS").Range("I" & lRow + 1).Value = var 
Else
    'nothing in there
    On Error GoTo 0
    Exit Sub/Function 
End If
On Error GoTo 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-23T15:47:22.273

或尝试在 VBE 中的类模块中设置中断 (Tool\Options\General)

# scala - 如何在 sbt 中编译单个文件

> ID：14160677
> 
> 赞同：19
> 
> 时间：2013-01-04T16:11:39.240
> 
> 标签：scala, sbt

我正在做一些重构，使编译器暂时在几个文件中给出错误。我想与他们一一合作（从常见的依赖项开始）并且需要一些工具来检查修改是否正确。

sbt compile 很不方便，因为它给出了太多错误，并且花费大量时间来编译没有好处的东西。

我正在寻找一种使用 sbt 编译单个文件的方法或一种提取 sbt 端库定义以将它们传递给普通 scalac 编译器的方法

有一个类似的主题：[How to compile just some files with sbt?](https://stackoverflow.com/questions/13647225/how-to-compile-just-some-files-with-sbt) 原来是源代码错误讨论，而不是 sbt 功能披露。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T12:38:56.580

您可以将以下行添加到`build.sbt`：

```
sources in Compile <<= (sources in Compile).map(_ filter(_.name == "Particular.scala")) 
```

然后修复`Particular.scala`，然后编辑`build.sbt`并输入下一个源文件的名称。如果您保持 sbt 控制台打开，`reload`将在您修改后重新读取 .sbt 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-20T13:01:02.230

我只想在这里提一下，我遇到了 sbt-compile-quick-plugin ( [https://github.com/etsy/sbt-compile-quick-plugin](https://github.com/etsy/sbt-compile-quick-plugin) )。它按照罐头上说的做，只需添加`addSbtPlugin("com.etsy" % "sbt-compile-quick-plugin" % "1.3.0")`到您的`project/plugins.sbt`，然后您就可以启动`sbt`并运行`compileQuick /path/to/your/file`

# python - 与创建 `webdriver.Remote` 实例分开启动 `RemoteWebDriver` 服务器？

> ID：14160679
> 
> 赞同：0
> 
> 时间：2013-01-04T16:11:41.313
> 
> 标签：python, selenium, webdriver

使用 Selenium Python 绑定，是否可以与创建实例`RemoteWebDriver`分开启动服务器？`webdriver.Remote`这样做的目的是节省重复启动和停止服务器所花费的时间，而我真正需要的只是客户端的新实例。（这可以通过 ChromeDriver 实现。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:10:39.527

服务器独立启动。创建实例`webdriver.Remote`不会启动服务器。

# lisp - 临时编辑全局变量

> ID：14160680
> 
> 赞同：1
> 
> 时间：2013-01-04T16:11:44.837
> 
> 标签：lisp, common-lisp

> **可能重复：**
> [LISP - 全局变量在重新初始化后保持其旧值](https://stackoverflow.com/questions/14071198/lisp-global-variable-keep-their-old-value-after-reinitialization)

我目前正在使用 Lisp（使用 Common Lisp）做一些课程作业，并且没有其他地方可以解决我遇到的这个问题。

解释起来很棘手，但这里有..

**情况：** 我有两个全局变量 p1 和 p2，它们是多项式表达式。我的任务是创建一个多项式计算器，目前进展顺利。

我将多项式元素保持为特定格式：3x^2 == ((x 2) 3)，并且我创建了两个函数，它们递归地遍历两个多项式元素列表。

如果我想将 3x^2 和 2x^2 相加，答案将是 5x^2（或“((x 2) (3+2))”）。

我有第三个列表，即结果，每当计算/无法计算元素时都会附加到该列表。

**问题：** 我可以将两个元素加在一起，创建一个临时变量以添加到结果中。但是，尽管我做了什么，全局变量还是发生了变化。

我已经尝试过 let、lambda、各种函数等。我已经被困了几天了，非常感谢你能给我的任何帮助:)

**这是我的意思的一个小例子：**

```
(setf p1 '((x 2) 2))
    ;2x^2

(setf p2 '((x 2) 3))
    ;3x^2 

(if (equal (first p1) (first p2)) 
    (progn
      (setf temp p1)
      (setf (second temp) (+ (second p1) (second p2)))
      (append-to-result temp)
      (print p1)
      (print temp))) 
```

**输出：**

> ((x 2) 5)
> 
> ((x 2) 5)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:17:34.573

当你这样做时：

```
(setf temp p1) 
```

您不是在复制所`p1`引用的列表结构。这两个变量现在都引用相同的 cons 单元格。那么当你这样做时：

```
(setf (second temp) ...) 
```

您正在修改两个变量仍然引用的列表结构。改成：

```
(setf temp (copy-tree p1)) 
```

# java - 尝试从 URL 获取状态代码 - 获取 java.net.ProtocolException: Unsupported protocol: https

> ID：14160681
> 
> 赞同：0
> 
> 时间：2013-01-04T16:11:46.277
> 
> 标签：java, jakarta-ee

> **可能重复：**
> [是否有可能使用 HTTPS 协议的 URL 以“http://”开头的站点](https://stackoverflow.com/questions/14161386/is-it-possible-for-a-site-having-url-starting-with-http-using-https-protoco)

尝试从 URL 获取状态代码 - 获取 java.net.ProtocolException: Unsupported protocol: https 用于我想要检索其 http 状态代码的特定 URL。

```
String link = "http://abc.def.ghi.jkl";
URL thisURL;
HttpURLConnection conn = null;

thisURL = new URL(link);
conn = (HttpURLConnection) thisURL.openConnection();
System.out.println(conn.getResponseCode());   // getting exception in this line
System.out.println(conn.getResponseMessage()); 
```

这是异常堆栈跟踪：

```
java.net.ProtocolException: Unsupported protocol: https'
    at weblogic.net.http.HttpClient.openServer(HttpClient.java:342)
    at weblogic.net.http.HttpClient.New(HttpClient.java:238)
    at weblogic.net.http.HttpURLConnection.connect(HttpURLConnection.java:172)
    at weblogic.net.http.HttpURLConnection.followRedirect(HttpURLConnection.java:643)
    at weblogic.net.http.HttpURLConnection.getInputStream(HttpURLConnection.java:422)
    at           weblogic.net.http.SOAPHttpURLConnection.getInputStream(SOAPHttpURLConnection.java:36)
    at weblogic.net.http.HttpURLConnection.getResponseCode(HttpURLConnection.java:947)
    at com.cingular.cscape.da.struts.action.thisAction.executeAction(thisAction.java:56)
    at com.cingular.cscape.da.struts.action.BaseAction.execute(BaseAction.java:300)
    at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:421)
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:226)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1164)
    at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:397)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:292)
    at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:26)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:42)
    at org.extremecomponents.table.filter.AbstractExportFilter.doFilter(AbstractExportFilter.java:53)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:42)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3496)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(Unknown Source)
    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2180)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2086)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1406)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:173) 
```

任何帮助将不胜感激。谢谢。

# c++ - C++ 新手 - 参数前面的 & 符号

> ID：14160683
> 
> 赞同：0
> 
> 时间：2013-01-04T16:11:51.070
> 
> 标签：c++, reference

我是 ac# 开发人员在 C++ 上学习/重新学习/复习

我正在研究数据库访问我有以下代码，但我无法理解 & 在这种情况下的作用。

```
SQLHENV     hEnv = NULL;

if (SQLAllocHandle(SQL_HANDLE_ENV, SQL_NULL_HANDLE, &hEnv) == SQL_ERROR)
    { 
```

如果我删除 & 我得到这个错误。

```
'SQLAllocHandle' : cannot convert parameter 3 from 'SQLHENV' to 'SQLHANDLE *' 
```

起初我以为它只是将此字段作为参考传递，但基于错误，它读起来更像是如何允许它转换？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T16:14:18.793

在表达式中作为一元运算符出现时，`&`是地址运算符。您显示的代码将指针传递给`hEnv`into `SQLAllocHandle()`。

您可能想选择一[本好的 C++ 书籍](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-04T16:22:35.510

在您当前示例的上下文中，`&`运算符用于获取变量的地址。

从错误消息中，看起来`SQLAllocHandle`参数 3 是类型`SQLHANDLE *`（指向 的指针`SQLHANDLE`）。

当您“删除” 时`&`，您将 a 传递`SQLHENV`给它，它无法转换为所需的类型。但是，当您确实“包含” the`&`时，它​​起作用了，因为我猜`SQLHANDLE`是`typedef`ed to `SQLHENV`，或者 a由于继承或其他原因`SQLHENV*`可转换为。`SQLHANDLE*`

我需要做猜测，因为问题中没有提到and的签名`SQLAllocHandle`和类关系。`SQLHENV``SQLHANDLE`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T16:13:55.317

`&`是地址运算符。它采用本地 hEnv 并传递它的地址。现在您没有类型，而是指向您所指的类型的指针。

所以

```
void foo()
{
     int i = 1; 
     int * iptr = &i; 
} 
```

当您跳过地址运算符时，您仍然拥有类型，而不是指向类型的指针。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-01-04T16:14:29.333

& 确实意味着通过引用传递。编译器只是告诉你它不能从引用转换为值类型

编辑：当一个函数接受一个地址（指针）时，它被称为按引用传递。如果我的回答让某些人感到困惑，我很抱歉，但在这种情况下，您的函数期望一个变量的引用，因此您需要将该变量的地址传递给它。

# python - 从 Python 中的函数获取类引用

> ID：14160686
> 
> 赞同：4
> 
> 时间：2013-01-04T16:12:03.670
> 
> 标签：python, introspection, inspect

我正在编写一个 python (3.2+) 插件库，我想创建一个函数，该函数将创建一些从配置文件自动处理的变量。

用例如下（类变量）：

```
class X:
    option(y=0)
    def __init__(self):
        pass 
```

（实例变量）：

```
class Y:
    def __init__(self):
        option(y=0) 
```

期权草案代码如下：

```
def option(**kwargs):
    frame   = inspect.stack()[1][0]
    locals_ = frame.f_locals
    if locals_ == frame.f_globals:
        raise SyntaxError('option() can only be used in a class definition')

    if '__module__' in locals_:
        # TODO

    else:
        for name, value in kwargs.items():
            if not name in locals_["self"].__class__.__dict__:
                setattr(locals_["self"].__class__, name, VirtualOption('_'+name, static=False))
            setattr(locals_["self"], '_'+name,value) 
```

I have problem the first case, when option is declared as class variable. 是否有可能以某种方式获得对使用此函数的类的引用（例如对类 X）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:36:38.077

您无法获得对该类的引用，因为尚未创建该类。您的父框架指向一个临时函数，该函数`locals()`完成后将用作类主体。

因此，您需要做的就是将您的变量添加到父框架局部变量，这些将在类构建完成时添加到类中。

简短演示：

```
>>> def foo():
...     import sys
...     flocals = sys._getframe(1).f_locals
...     flocals['ham'] = 'eggs'
... 
>>> class Bar:
...     foo()
... 
>>> dir(Bar)
['__class__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__', '__init__', '__le__', '__locals__', '__lt__', '__module__', '__ne__', '__new__', '__qualname__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', 'ham']
>>> Bar.ham
'eggs' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:21:30.590

在我看来，元类在这里很合适：

**python2.x 语法**

```
def class_maker(name,bases,dict_):
    dict_['y']=0
    return type(name,bases,dict_)

class X(object):
    __metaclass__ = class_maker
    def __init__(self):
        pass

print X.y
foo = X()
print foo.y 
```

**python3.x 语法**

似乎python3`metaclass`在类定义中使用了一个关键字：

```
def class_maker(name,bases,dict_):
    dict_['y']=0
    return type(name,bases,dict_)

class X(metaclass=class_maker):
    def __init__(self):
        pass

print( X.y )
foo = X()
print( foo.y )
print( type(foo) ) 
```

或者，更符合您的问题：

```
def class_maker(name,bases,dict_,**kwargs):
    dict_.update(kwargs)
    return type(name,bases,dict_)

class X(metaclass=lambda *args: class_maker(*args,y=0)):
    def __init__(self):
        pass

print( X.y )
foo = X()
print( foo.y )
print( type(foo) ) 
```

# html - 带有“％”的图像名称未在浏览器中呈现

> ID：14160689
> 
> 赞同：1
> 
> 时间：2013-01-04T16:12:18.347
> 
> 标签：html

我正在引用名称为“a%1.jpg”的图像。它不在浏览器中呈现。我的图像标签看起来像`<img src="a%1.jpg" id="Image1" />`我可以做些什么来使用转义序列 - 正确渲染图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T16:16:00.923

URL 中的百分号应[编码](http://www.blooberry.com/indexdot/html/topics/urlencoding.htm)为`%25`：

```
<img src="a%251.jpg" id="Image1" /> 
```

# c# - 从 C# 访问 C++ 类枚举值

> ID：14160695
> 
> 赞同：1
> 
> 时间：2013-01-04T16:12:43.407
> 
> 标签：c#, c++

我正在尝试从 C# 访问 C++ 类头 (.h) 中的枚举。有没有一种简单的方法可以做到这一点？我看到的每个示例都涉及将类编译为 .dll，这对于本示例来说有点浪费，因为此类的功能非常有限。

按要求编辑：可以修改 C++ 库。事实上，C++ 库是项目（固件）的主要组成部分，由我团队的其他成员开发，C#（我的部分）仅用于单元测试目的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T16:15:39.310

实际上，您有三个选择：

1.  创建一个导出`extern "C"`包含此标头的 C 函数 ( ) 并返回您感兴趣的枚举值的胶水库，然后从 C# 中 P/Invoke 此库。
2.  硬编码 C# 代码中的值。
3.  编写一个 C++ 解析器并以这种方式提取值。（最好是一个完整的 C++ 解析器，或者您可以懒惰并编写一个简单的正则表达式解析器，该解析器将在这个特定版本的 C++ 标头上工作，但如果代码以您没有的方式更改，将来可能会中断没想到。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:03:54.123

Well, this freaks the CS pre-compiler out a bit, but it builds:

```
#if CSHARP

namespace Test
{
    public enum SharedEnum

#endif //CSHARP

#if CPP
    typedef enum SharedEnum 
#endif //CPP
    {
        One,
        Two,
        Three
    }
#if CPP
    SharedEnum 
#endif //CPP
    ;
#if CSHARP
};
#endif 
```

Just add the Conditional Compilation symbol `CSHARP` to your C# project, add the existing .cs file and the preprocessor definition `CPP` to your C++ project.

(credit to Yakk for having the same idea)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T16:16:12.603

为了访问 C++ 枚举，您必须将 C++ 类转换为 .NET 可以识别的东西，这意味着将其编译为 C++/CLI（如果这是一个选项）或转换为 .NET 互操作可以的 DLL使用权。

# mysql - mysql优化5表左连接

> ID：14160700
> 
> 赞同：1
> 
> 时间：2013-01-04T16:13:00.067
> 
> 标签：mysql, query-optimization, left-join

我目前有 5 张桌子：

```
trialSum
-------------
id    total
-------------
1     2000
2     1000
3     500

trialLand
-------------
id    total
-------------
1     1000
2     250
3     500

trialImp
-------------
id    total
-------------
2     250

trialBldg
-------------
id    total
-------------
1     1000
2     500

trial
---------------------
id    name     info
---------------------
1     xxxxx    xxxxx
2     xxxxx    xxxxx
3     xxxxx    xxxxx
4     xxxxx    xxxxx 
```

试用表将具有最多的条目，并且所有“id”字段都相互匹配。每个表将有超过 7000 个条目。我正在尝试创建一个看起来像这样的大表：

```
 trial
    ----------------------------------------------------------------------
    id    name     info    totalSum    totalLand    totalImp    totalBldg
    ----------------------------------------------------------------------
    1     xxxxx    xxxxx    2000        1000         0           1000
    2     xxxxx    xxxxx    1000        250          250         500
    3     xxxxx    xxxxx    500         500          0           0
    4     xxxxx    xxxxx    0           0            0           0 
```

如果我执行一个包含 4 个左连接的巨型 MySQL 查询，则需要 40 多分钟才能完成。必须有一个更简单的方法。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:23:07.687

我会说，左连接确实是一个很好的方法。您对这些 id 列有索引吗？尝试添加索引，速度应该会提高。请记住使用 EXPLAIN 来确认索引的使用是否正确。更多关于解释[http://www.dbtuna.com/article.asp?id=14](http://www.dbtuna.com/article.asp?id=14)。

# python - 如何在 Windows 中运行 python cgi Web 服务器

> ID：14160709
> 
> 赞同：2
> 
> 时间：2013-01-04T16:13:40.670
> 
> 标签：python, html, python-3.x, webserver, cgi

我想在 Windows 环境中运行一个非常简单的基于 python 的服务器，以测试 CGI 脚本。我想在 Windows 中执行此操作，但最终在 unix 环境中运行。到目前为止，我有一个简单的服务器和一个简单的程序。当我访问该站点时，我看到一个空白页面，源代码中没有任何内容，我无法弄清楚发生了什么。

服务器

```
from http.server import HTTPServer, CGIHTTPRequestHandler

class Handler(CGIHTTPRequestHandler):
    cgi_directories = ["/cgi-bin"]

PORT = 8080

httpd = HTTPServer(("", PORT), Handler)
print("serving at port", PORT)
httpd.serve_forever()
httpd.serve_forever() 
```

应用程序：

```
#!/usr/bin/env python
# -*- coding: UTF-8 -*-

import cgi, cgitb
form = cgi.FieldStorage() 

# Get data from fields
first_name = form.getvalue('first_name')
last_name  = form.getvalue('last_name')

print ("Content-type:text/html\r\n\r\n")
print ("<html>")
print ("<head>")
print ("<title>Hello - Second CGI Program</title>")
print ("</head>")
print ("<body>")
print ("<h2>Hello %s %s</h2>" % (first_name, last_name))
print ("</body>")
print ("</html>") 
```

我在我的网络浏览器中访问该程序，我得到一个可下载的输出，它是文件的名称。文件似乎已执行，但我没有获得有效的网站。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T16:17:56.357

当然，我在发布它时就想出了答案......我应该只使用 a `\n\n`，而不是`\r\n\r\n`。

```
print ("Content-Type: text/html\n\n") 
```

# php - 使用 PHP 发布到 Facebook

> ID：14160710
> 
> 赞同：1
> 
> 时间：2013-01-04T16:13:46.157
> 
> 标签：php, facebook

> **可能重复：**
> [必须使用活动访问令牌来查询不同 url 上当前用户的信息](https://stackoverflow.com/questions/9180023/an-active-access-token-must-be-used-to-query-information-about-the-current-user)

我一直在试图弄清楚如何从 php 表单向 Facebook 发布内容，但我不断收到错误消息，我不明白：

> 2500：必须使用活动访问令牌来查询有关当前用户的信息。

我创建了一个应用程序，获取了 appID 和 appSecret，并使用了以下代码：

```
 $config = array(
                    'appId' => $this->config->Facebook->Api,
                    'secret' => $this->config->Facebook->Secret,
                    'cookie' => true
                    );

        $facebook = new Facebook($config);

        echo "Facebook: " . print_r($facebook, true) . "<br>";

        $token = $facebook->getAccessToken();

        $facebook->setAccessToken($token);

        echo "Facebook: " . print_r($facebook, true) . "<br>";

        $attachment = array(
            'message' => 'this is my message',
            'name' => 'This is my demo Facebook application!',
            'caption' => "Caption of the Post",
            'link' => 'http://mylink.com',
            'description' => 'this is a description',
            'picture' => 'http://mysite.com/pic.gif'
        );

        $result = $facebook->api('/me/feed/', 'post', $attachment);
        echo "Result: " . print_r($result, true) . "<br>"; 
```

我也尝试不使用 setAccessToken，将令牌设置为消息中的参数：

```
 $config = array(
                    'appId' => $this->config->Facebook->Api,
                    'secret' => $this->config->Facebook->Secret,
                    'cookie' => true
                    );

        $facebook = new Facebook($config);

        echo "Facebook: " . print_r($facebook, true) . "<br>";

        $token = $facebook->getAccessToken();

        echo "Token: " . print_r($token, true) . "<br>";

        $attachment = array(
            'message' => 'this is my message',
            'name' => 'This is my demo Facebook application!',
            'caption' => "Caption of the Post",
            'link' => 'http://mylink.com',
            'description' => 'this is a description',
            'picture' => 'http://mysite.com/pic.gif',
            'access_token' => $token
        );

        $result = $facebook->api('/me/feed/', 'post', $attachment);
        echo "Result: " . print_r($result, true) . "<br>"; 
```

我测试了两种方式，因为我浏览了其他站点的几个 stackoverflow 帖子和其他资源，但是这些都不起作用，因为我不断收到以下错误：

> 2500：必须使用活动访问令牌来查询有关当前用户的信息。

# webbrowser-control - vb.net中的壁虎，objectreference需要objectinstance吗？

> ID：14160714
> 
> 赞同：0
> 
> 时间：2013-01-04T16:13:58.603
> 
> 标签：webbrowser-control, vb.net-2010, gecko

我想在我的 vb.net (2008) 项目中实现一个 Webbrowser，但是，我不喜欢内置的 IE。

我还记得在过去，像 gecko-webbrowser 这样的 mozilla 工具很容易实现......

它比我记得的要复杂得多，因为我必须下载 xulrunner 和 Skybound.Gecko.dll，它们可能都必须包含在已完成项目的任何发布中......我还将 x86 定义为目标 CPU 并制作了所有在我的应用程序中使用 GeckoWebBrowser 所需的步骤。`Skybound.Gecko.Xpcom.Initialize(My.Application.Info.DirectoryPath & "/xulrunner")`我也在编译之前打电话。

但是，当我尝试`GeckoWebBrowser1.navigate("http://...")`（每个设计器使用此名称插入元素）时，IDE 告诉我 objectreference 未设置为 objectinstance，就好像尚未定义 GeckoWebBrowser1 一样......但该`GeckoWebBrowser1.Created`属性返回 true。

有谁知道为什么它还没有工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:22:09.753

我的解决方案中有同样的错误。尝试使用 GeckoFX 程序集。我使用 15 版本的 dll 和错误修复。 [https://bitbucket.org/geckofx/geckofx-16.0/downloads](https://bitbucket.org/geckofx/geckofx-16.0/downloads)

# iphone - JQuery 移动图标包在 iPhone 上被压扁

> ID：14160716
> 
> 赞同：3
> 
> 时间：2013-01-04T16:14:12.807
> 
> 标签：iphone, jquery-mobile, mobile-safari

JQueryMobile 的 FA 图标包似乎存在[一个当前错误](https://github.com/commadelimited/jQuery-Mobile-Icon-Pack/issues/25)，如果您滚动自定义 JQueryMobile 主题，那么当您在实际 iPhone 上查看它时，所有 JQueryMobile 的原始图标[都会出现挤压。](http://games.contraterrene.com/screenshots/custom_theme.png)

建议的解决方法是使用 FA 图标名称而不是原始名称，但这并不能解决列表视图和复选框图标被压扁的问题。

由于 JQuery Mobile 的受欢迎程度，我希望有人遇到过这个问题并一起快速修复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:41:02.373

实际上有一个非常简单的解决方法，因为我遇到了同样的问题。只需确保您的自定义主题滚动 CSS 文件在您的 FA 图标包 CSS**之前**注入您的 HTML 。

# java - 使用 Swing 绘制逆曲线？

> ID：14160718
> 
> 赞同：1
> 
> 时间：2013-01-04T16:14:18.173
> 
> 标签：java, swing, graphics, shape

虽然我熟悉重写 Swing 的 paintComponent(Graphics g) 方法和绘制自定义形状，但我很难用一些反向曲线绘制一个矩形（请参阅[http://imgur.com/ih25X](http://imgur.com/ih25X)）。

有谁知道我将如何创建可以让我画这个的 Shape 对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T16:50:07.967

我相信[GeneralPath](http://docs.oracle.com/javase/6/docs/api/java/awt/geom/GeneralPath.html)是描述任意形状的典型方式。

在您的情况下，看起来您将有两条用 描述的线`lineTo`和两条（曲线）用 描述`quadTo`，然后调用 closePath() 来表示一个封闭的多边形，例如（在这里选择方便的坐标，您可能需要一些好交易更大）：

```
GeneralPath polygon = 
    new GeneralPath(GeneralPath.WIND_EVEN_ODD, 4);
polygon.moveTo(2.0, 1.0);
polygon.lineTo(2.0, 5.0);
polygon.quadTo(1.25, 4.75, 1.0, 4.0);
polygon.lineTo(1.0, 2.0);
polygon.quadTo(1.75, 1.75, 2.0, 1.0);
polygon.closePath();
g.draw(polygon); 
```

另外，请查看[GeneralPath 上的本教程](http://docs.oracle.com/javase/tutorial/2d/geometry/arbitrary.html)

# javascript - 在发出多个 AJAX 请求时使用 jQuery 显示加载栏

> ID：14160728
> 
> 赞同：1
> 
> 时间：2013-01-04T16:14:57.517
> 
> 标签：javascript, jquery, ajax

我有使用 jQuery 发出多个 AJAX 请求的功能，例如：

```
function() {
    $.ajax({
        url: "/url",
        data: {
            params: json_params,
            output: 'json'
        },
        async: false,
        success: function(res) {
            data1 = res
        }
    });

    $.ajax({
        url: "/url",
        data: {
            params: json_params,
            output: 'json'
        },
        async: false,
        success: function(res) {
            data2 = res;
        }
        return data1 + data2;
    });
} 
```

当这个函数正在运行并且数据正在加载时，我想显示一个加载图像而不阻塞它。

我尝试使用 ajaxSend ajaxComplete 显示加载图标，但不起作用，因为我有多个 ajax 调用。我还尝试在函数开头显示加载并在函数结尾隐藏，但失败了。

这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:23:15.900

您究竟是如何尝试加载的？在元素上使用 ajaxStart/ajaxStop 事件是实现您想要的一种方式。它可能看起来像这样：

```
$('#loadingContainer')
.hide()  // at first, just hide it
.ajaxStart(function() {
    $(this).show();
})
.ajaxStop(function() {
    $(this).hide();
})
; 
```

也许这对你有帮助，我以前经常使用它，它就像一个魅力..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T16:34:32.530

我认为答案实际上是其中几个的组合。我会从 ajax start 开始，在 0 处显示加载图像（或者任何你想要的开始位置）。然后我会使用一个回调函数来增加加载栏并重新绘制它。

例如

```
 //when ajax starts, show loading div
$('#loading').hide().on('ajaxStart', function(){
    $(this).show();
});
//when ajax ends, hide div
$('#loading').on('ajaxEnd', function(){
    $(this).hide();
});
function ajax_increment(value) {
    //this is a function for incrementing the loading bar
    $('#loading bar').css('width', value);
}

//do ajax request
$.ajax({
  url:"", //url here 
  data: {params:json_params,output:'json'},
  async: false,
  success: function (res) {
    data1=res
    ajax_increment(20); //increment the loading bar width by 20
  }
});

$.ajax({
  url:"", //url here 
  data: {params:json_params,output:'json'},
  async: false,
  success: function (res) {
    data1=res
    ajax_increment($('loading bar').css('width') + 10); // a little more dynamic than above, just adds 10 to the current width of the bar.
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T16:19:36.113

您应该能够绑定到开头，然后以以下内容结尾：

```
$('#loading-image').bind('ajaxStart', function() {
    $(this).show();
}).bind('ajaxStop', function() {
    $(this).hide();
}); 
```

或者您可以使用 beforeSend 和 on Complete

```
$.ajax({
    url: uri,
    cache: false,
    beforeSend: function() {
        $('#image').show();
    },
    complete: function() {
        $('#image').hide();
    },
    success: function(html) {
        $('.info').append(html);
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T16:23:31.423

您可以尝试这样的事情：定义一个带有计数器的回调，并且回调在调用所需的次数后隐藏图像。

```
showLoadingImage();

var callbackCount = 0;
function ajaxCallback() {
  ++callbackCount;
  if(callbackCount >= 2) {
    hideImage();
  }
}

$.ajax({
  url:"/url", 
  data: {params:json_params,output:'json'},
  async: false,
  success: function (res) {
    data1=res
    ajaxCallback();
  }
});

$.ajax({
  url:"/url", 
  data: {params:json_params,output:'json'},
  async: false,
  success: function (res) {
    data2=res;  
    ajaxCallback();
  }
}); 
```

不过，这只是异步调用所必需的。你这样做的方式（你所有的 AJAX 调用都是同步的），你应该能够在你的外部函数结束之前调用 hideImage() 。

# database-design - 引用无外键约束的表

> ID：14160731
> 
> 赞同：1
> 
> 时间：2013-01-04T16:15:05.840
> 
> 标签：database-design, foreign-keys, relationship

我有一个数据库和一个编辑数据库的应用程序

我有一个名为 ADDRESS (ID, STREETID, NUMBER) 的地址表

我有一个名为 STREET (ID, STREETNAME, CREATIONUSERID) 的街道名称表

我还有一个名为 USER (ID, USERNAME, PASSWORD) 的用户表

我的表 STREET 中的街道名称已经填满。该表被用户用作查找表以在我的应用程序中的某处输入地址（字段 ADDRESS.STREETID），但有时用户必须输入将插入 STREET 以供进一步使用的新街道。当用户在我的表中添加一条街道时，我希望能够跟踪哪个用户进行了添加。

现在我想到了两个选项：

第一种：**创建一个虚假用户**，STREET 的默认街道将引用该用户，然后为创建的新街道创建一个外键约束（STREET.CREATIONUSERID 引用 USER.ID）

第二：**不创建外键约束**，为 STREET 的默认街道保留 CREATIONUSERID 为空，并仅为创建的新街道更新它以跟踪添加每个街道的用户

***哪个更好？为什么？***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T16:21:57.860

最好使用外键。它将强制引用完整性

[检查链接以了解外键的优点](https://stackoverflow.com/questions/1629537/sql-server-foreign-key-constraint-benefits)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:19:22.347

当您的系统的某个用户不再是一个用户并且必须从您的 USER 表中删除时，您打算做什么？

# django - Django - 如何保存（） ModelForm 的？

> ID：14160733
> 
> 赞同：0
> 
> 时间：2013-01-04T16:15:11.400
> 
> 标签：django, django-forms

我正在尝试保存 ModelForm，但出现错误：

```
InternalError at /submeter/anuncio/
current transaction is aborted, commands ignored until end of transaction block 
```

我将尝试解释我在做什么。

好的，我有 5 个模型需要以一种形式一次保存。我正在测试保存两个模型，但正如我所说，我在保存方法上遇到错误。作为一个初学者，我对完成任务的最佳方式有点迷茫。

我做了什么：

模板：

```
<form method="post" action="/submeter/anuncio/">{% csrf_token %}
    {{form_main}}
    {{form_bicyclead}}
    <input type="hidden" name="section" value="5" />
    <input type="submit">
</form> 
```

视图.py：

```
def submit_data_entry_view(request):
    if request.method == 'GET': #first time rendering the form
    form_main      = MainForm()
    form_bicyclead = BicycleAdForm()

    return render_to_response('app_t/submit_data_entry.html', {'form_main': form_main, 'form_bicyclead': form_bicyclead}, context_instance=RequestContext(request))

def submit_ad_view(request):
    if request.method == 'POST':
        post_values = request.POST.copy()

        post_values['user'] = request.user.username

        post_values['bicycleadtype']      = 2
        post_values['bicycleaditemkind']  = 4
        post_values['bicycleadcondition'] = 2
        post_values['city']               = 4803854  

        form_main      = MainForm(post_values)
        form_bicyclead = BicycleAdForm(post_values)

    if form_main.is_valid() and form_bicyclead.is_valid():
        form_main.save()
        #form_bicyclead.save()

        resultado = 'valid'
    else:
        resultado = 'n_valid'
    pdb.set_trace()

    return render_to_response('app_t/submit_ad.html', {'resultado': resultado}, context_instance=RequestContext(request)) 
```

表格.py：

```
class MainForm(forms.ModelForm):
    class Meta:
    model = Main
    exclude = ('user', 'section')

class BicycleAdForm(forms.ModelForm):
    class Meta:
    model = BicycleAd
    exclude = ('main', 'bicycleadtype', 'bicycleaditemkind', 'bicycleadcondition', 'city') 
```

模型.py：

```
class Main(models.Model):
    section             = models.ForeignKey(Section)
    user                = models.ForeignKey(User)
    title               = models.CharField(max_length=250)
    date_inserted       = models.DateTimeField(auto_now_add=True)
    date_last_update    = models.DateTimeField(auto_now=True)

    def __unicode__(self):
    return self.title

    class Meta:
    ordering = ['date_inserted']

class BicycleAd(models.Model):
    main                = models.ForeignKey(Main)
    bicycleadtype       = models.ForeignKey(BicycleAdType)
    bicycleaditemkind   = models.ForeignKey(BicycleAdItemKind) # MPTT Model
    bicycleadcondition  = models.ForeignKey(BicycleAdCondition)
    country             = models.ForeignKey(GeonamesCountry)       
    city                = models.ForeignKey(GeonamesLocal) 
    date_inserted       = models.DateTimeField(auto_now_add=True)
    date_last_update    = models.DateTimeField(auto_now=True)

    class Meta:
    ordering = ['date_inserted'] 
```

我的问题是：如何“覆盖”views.py 中的 form_main.save() 并告诉他们我在模型“部分、用户和标题”中拥有的所有字段？我认为错误是因为“部分”和“用户”字段没有传递给保存方法。我怎样才能传递这个值？

另一个问题：我这样做是正确的，还是有更简单的方法来实现我想要实现的目标？

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:25:45.870

将您的模型形式修改为：

```
class MainForm(forms.ModelForm):
    def __init__(self, *args, **kw):
        self.user = kw.pop('user')
        self.section = kw.pop('section')
        super(MainForm).__init__(*args, **kw)

    class Meta:
        model = Main
        exclude = ('user', 'section')

    def save(self, *args, **kw):
        instance = super(MainForm).save(commit=False)
        instance.user = self.user
        instance.section = self.section
        instance.save()
        return instance 
```

现在，当您在视图中创建表单的实例时，您需要传递`user`and ：`section`

```
form_main = MainForm(request.POST or None, user=request.user, section=section) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T16:30:43.053

我的方法是替换此代码：

```
def submit_ad_view(request):
    if request.method == 'POST':
        post_values = request.POST.copy()

        post_values['user'] = request.user.username

        post_values['bicycleadtype']      = 2
        post_values['bicycleaditemkind']  = 4
        post_values['bicycleadcondition'] = 2
        post_values['city']               = 4803854  

        form_main      = MainForm(post_values) 
```

经过：

```
def submit_ad_view(request):
    if request.method == 'POST':

        model = Main()  #if model exists get it!
                        #Notice, Main is the name of your model.

        model.user = request.user.username
        ...
        model.bicycleaditemkind = 4
        ...        
        form_main      = MainForm(request.POST, instance = model ) 
```

您可以了解更多关于从模型django doc[创建表单。](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/)

# php - PHP 一次处理 2 个表单

> ID：14160735
> 
> 赞同：1
> 
> 时间：2013-01-04T16:15:28.407
> 
> 标签：php

我想知道是否可以一次处理 2 个表格？我的情况是这样的：

我的网站上有一个联系页面，其中包括：

*   1) 客户资料

*   2a) 一般查询

*   2b) 获取报价

*   2c) 检查可用性

第 1 部分始终相同，它本身就是一个表单，第 2 部分将仅显示其中一个选项的详细信息（可从下拉框中选择。）

所以我总共有 4 种表格，其中 2 种将始终填写，我需要处理它们以通过电子邮件发送给我。如果我能提供帮助，我不想在每个表格的顶部包含第 1 部分）

我希望这一切都有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:18:12.440

您一次只能提交一份表格。你有几个选择：

1) 将两个表单合并为一个表单，并使用 CSS/JavaScript 显示/隐藏相关字段。这样，所有的表单域都会被提交（包括那些你不感兴趣的）。这就是我会做的。

2）当用户提交表单时，使用 JavaScript 将相应的数据发送到后端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T16:20:05.387

长话短说：您一次只能提交一份表格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T16:21:06.730

你有什么理由不想让它成为一种形式？似乎将其制成一种形式并在另一侧进行所有处理会容易得多。

# javascript - 像fancybox这样的弹出插件可以在触摸设备上使用吗？

> ID：14160739
> 
> 赞同：2
> 
> 时间：2013-01-04T16:15:38.920
> 
> 标签：javascript, jquery, fancybox

我需要一个可以包含 iframe 的弹出插件（如 fancybox），并且在桌面浏览器和 ipad、android 和 iphone 等触摸浏览器中都能很好地工作。当我捏住触摸浏览器时，Fancybox 的行为很奇怪。我真正需要它做的是：

1.  包含一个 iframe
2.  当我放大触摸浏览器时，我仍然可以左右滚动首页，而不会到处乱跳。它的行为应该与页面中的任何其他元素一样。
3.  我应该可以说它应该是（例如）800 像素宽和 90% 的视口高度
4.  如果视口大小发生变化，它应该最好重排
5.  如果它后面的页面滚动，它应该保持在页面的中心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:17:41.983

[jQueryUI 对话框](http://jqueryui.com/dialog/)怎么样？

根据我的经验，它在移动设备上表现良好，并且支持 iframe 作为对话内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T15:16:23.037

默认的 Fancybox2 内置了一些对触摸的支持。如果您查看源代码，您将看到`isTouch`在整个代码和默认设置中使用的变量。默认设置`autoCenter`的默认值为`!isTouch`，因此在移动浏览器上它不会居中，因为它没有得到很好的支持。我建议您测试这些默认值：

```
 <script>
        $(document).ready(function() {
            $('#selector').fancybox({
                modal: false
                ,type: 'iframe'
                ,minWidth: 960
                ,height: '90%'
                ,closeClick: false
                ,padding: 0
                ,scrolling: 'no'
                ,autoSize      : false
                ,helpers: {
                    overlay :{
                        closeClick:false
                        ,speedOut:0
                        ,showEarly:true
                    }
                }
            });
        });
    </script> 
```

...

# ios - 如何在 iOS 6+ 中通过 SKStoreProductViewController 监控下载进度？

> ID：14160740
> 
> 赞同：1
> 
> 时间：2013-01-04T16:15:42.787
> 
> 标签：ios, in-app-purchase, itunes, storekit, itunes-store

我刚刚通过 SKStoreProductViewController 添加了 InApp 下载。我想知道是否有一种方法可以获得正在下载的项目的下载状态。理想情况下，我想监视下载，完成后，我想执行一些代码。

我查看了文档，但那里没有列出任何内容。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:12:25.380

你不能那样做。如果用户选择安装该项目，您甚至不会收到通知。

这是非常不幸的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:36:27.163

有点脏，但如果你想下载自己的应用程序，你可以把[海关网址](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/AdvancedAppTricks/AdvancedAppTricks.html)放在上面，然后循环

```
- (BOOL)canOpenURL:(NSURL *)url 
```

当它返回“true”时，表示您的应用程序已安装。

# .htaccess - 使用 htaccess 缩短 URL

> ID：14160743
> 
> 赞同：0
> 
> 时间：2013-01-04T16:16:04.177
> 
> 标签：.htaccess, mod-rewrite

使用 wordpress，我已经将我的网址缩短到这个**domain.com/(article)/image-(image-slug)**

其中 (article) 和 (image-slug) 是变量。请注意，括号仅用于显示变量是什么。

我想使用 htaccess 文件以这种形式的 url **domain.com/(image-slug)结束。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:18:21.263

请从另一个有类似问题的用户那里查看这篇文章，他们在 .htacess 中使用 PHP 解决了这个问题。

[.htaccess 使用 php $_GET 缩短 URL](https://stackoverflow.com/questions/9649636/htaccess-shorten-url-using-php-get)

# javascript - 如何在 JSON 上应用复杂的数据过滤器，例如 SQL where 子句

> ID：14160748
> 
> 赞同：2
> 
> 时间：2013-01-04T16:16:34.410
> 
> 标签：javascript, json, underscore.js

我正在使用 Json 在客户端（javascript）表示数据，我将 .net 数据表对象转换为 json，现在需要对 Json 数据应用过滤器。我使用 _.where 来应用基本数据过滤器，但需要复杂的过滤，例如：

```
where = (stundentID = 55 and school='abc') AND (City='xyz' or City ='abc') 
```

它是我们在 Oracle 或 sql server 查询中使用的一种基本过滤类型。现在我如何使用 underscore.js 或 Json 或 javascript 结构上的一些等价物来应用这种机制。我可能还需要在 javascript 中使用聚合 [ Sum(sales)==500] 来查询获取 Top N 记录。等待您的宝贵建议。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T16:21:02.543

假设您将此 JSON 表示为常规 JavaScript 对象（毕竟没有 JSON 对象之类的东西），您最好使用[linq.js](http://linqjs.codeplex.com/)

您将能够执行以下操作：

```
var studentFilteredArray = 
          Enumerable.From(students)
                    .Where(function(s) { return s.studenId == 55;  })
                    .OrderBy(function(s) { return s.LastName; })
                    .ToArray(); 
```

或者从你上面的例子：

```
.Where(function(s) { 
      return s.studentID === 55 && s.school === 'abc' && (s.City === 'xyz' || s.City === 'abc') 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-30T10:08:52.693

您也可以尝试[alasql.js](https://github.com/agershun/alasql)，您可以在其中使用标准 SQL SELECT WHERE 语句。Alasql 专门设计用于处理 JSON 数组，如数据库中的表。

```
// Create database and describe the table
var db = new alasql.Database();
db.exec('CREATE TABLE students ([studentID] INT, school STRING, [City] STRING)');

// Assign you array here
db.tables.students.data = [
       {studentID: 55, school: 'abc', City:'abc'},
       {studentID: 56, school: 'klm', City:'xyz'},
       {studentID: 57, school: 'nyz', City:'xyz'}
    ];

// Use regular SQL 
console.log(db.exec("SELECT * FROM students "
  +" WHERE ([studentID] = 55 AND school='abc') AND ([City]='xyz' OR [City] ='abc')")); 
```

[在 jsFiddle](http://jsfiddle.net/606ksx2g/1/)试试这个例子。

# java - Firebird SQL Query with @ (at) sign - 如何在 JDBC (Jaybird) 中运行查询？

> ID：14160750
> 
> 赞同：1
> 
> 时间：2013-01-04T16:16:41.943
> 
> 标签：java, sql, jdbc, firebird, jaybird

我有一个使用 Firebird 的应用程序。该应用程序会执行一长串查询，例如，每次您列出您的项目时。我想取出这些查询，并在我自己的 Java 应用程序中运行它们（这样我就可以操作列表、显示它等等。）

问题是......应用程序中有一个调试选项，您可以在其中查看应用程序运行的查询类型。一些原始查询有`@`迹象。如果我在其中运行查询，则会`@`收到错误消息。如果我取出查询的那一部分，一切都会“按预期”运行和工作。没有错误，就像一个魅力。

详细错误消息：
错误代码：-104
Token unknown - 第 8 行，第 32 列

我们使用 IntelliJ IDEA，它会在需要时自动应用转义字符。
原始查询中的这样一部分：

```
SELECT  TBL4487."Id" "database.id",
       TBL4487."Code" "database.code",
       TBL4487."Name" "database.name",
       TBL4487."Barcode" "database.barcode",
       TBL4488."Name" "Datagroup",
       TBL4489."Name" "Mey",
       (SELECT FIRST 1   TBL4494."Price" / (CASE
    WHEN (TBL4487."GrossPrices" = @Param4495) THEN 1
    ELSE (TBL4492."Rate" + 100) / 100
END) "productprice.price"
FROM "ProductPrice" TBL4494
WHERE (TBL4494."Product" = TBL4487."Id") AND (TBL4494."PriceCategory" = @Param4497) AND (TBL4494."ValidFrom" <= @Param4498) AND (TBL4494."Currency" = @Param4499) AND (TBL4494."QuantityUnit" = TBL4487."QuantityUnit")
ORDER BY TBL4494."ValidFrom" DESC) "xyz",
       (SELECT FIRST 1   TBL4500."Price" / (CASE
    WHEN (TBL4487."GrossPrices" = @Param4501) THEN 1
    ELSE (TBL4492."Rate" + 100) / 100 
```

问题是..我怎么能运行这个查询？如何替换`@`符号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T09:46:46.353

您不能直接使用 Jaybird 运行此查询。这些`@ParamXXXX`似乎是参数查询中的占位符。但是 Firebird 和 Jaybird 都支持这种类型的占位符（它们只支持`?`在 DSQL 中作为占位符）。

要使用 Jaybird 执行此操作，您需要`@ParamXXXX`用 a 替换其中的每个实例，并为 a`?`中的每个占位符设置正确的值`PreparedStatement`，或者使用查询文本本身中的实际值。

Firebird .NET 提供程序确实支持`@....`- 样式的占位符（它将它们转换为 Firebird 样式的`?`占位符），因此如果您不想自己替换，可以尝试使用 C#/.NET。

*全面披露：我是 Jaybird 的开发者*

# compilation - 编译时如何使用 fortran 检测架构？

> ID：14160753
> 
> 赞同：1
> 
> 时间：2013-01-04T16:16:46.570
> 
> 标签：compilation, 64-bit, fortran, 32-bit, cpu-architecture

我实际上在 Fortran 中从事一个科学项目，所使用的函数集分为 64 位和 32 位版本。此外，一些变量在两种不同的体系结构中为相同的功能定义了不同的属性。例如，在 32 位中，变量是 INTEGER*4，而在 64 位中，变量是 INTEGER*8。

现在，我看到在 C++ 中，可以在文件开头使用 #ifndef 来检查这一点，就像在[这篇文章](https://stackoverflow.com/questions/152016/detecting-cpu-architecture-compile-time)中解释的那样。Fortran 中有什么可用的吗？您会建议我哪些可能的解决方案？

请记住，该项目应在具有多种架构的 Windows 和 Linux 上运行。但仍有任何建议将不胜感激！

编辑：要回复一些评论，假设您想使用 MKL 库的一部分 PARDISO 求解器。我们可以调用两个子例程：pardiso 和 pardiso_64。Pardiso 需要一个变量，在手册（第 6 页，[此处](http://www.pardiso-project.org/manual/manual.pdf)）中称为 PT，它允许 pardiso 处理数据。在 32 位版本中，它是 INTEGER*4，而在 64 位版本中，它是 INTEGER*8。基本上，我不想为两者分配内存，然后使用 IF 语句选择正确的变量。

我现在想象预处理可以完成这项工作，但即使我在 Fortran 中工作，它也必须是 C 预处理器吗？例如，英特尔 Fortran 会像 gcc/gfortran 那样调用 C 预处理器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:18:53.317

您可以使用 Fortran 内部函数（例如范围）测试变量的属性。无需为此使用预处理器指令。作为语言的一部分，内在函数将是标准的和可移植的。

正如已经回答的那样，大多数 Fortran 编译器确实支持预处理器指令。

# c - 如何在 Windows 上检测进程的体系结构？

> ID：14160757
> 
> 赞同：1
> 
> 时间：2013-01-04T16:17:14.667
> 
> 标签：c, windows, 64-bit

> **可能重复：**
> [如何以编程方式知道进程是 32 位还是 64 位](https://stackoverflow.com/questions/1953377/how-to-know-a-process-is-32-bit-or-64-bit-programmatically)

我正在编写一个将 dll 注入其他应用程序的应用程序。为了使其正常工作，我需要知道其他应用程序是在 32 位还是 64 位模式下运行。有什么方法可以检测到这一点，而无需尝试解析应用程序的 PE 标头？

请*不要*建议[IsWow64Process](http://msdn.microsoft.com/en-us/library/ms684139%28VS.85%29.aspx)。这不符合我的要求，特别是这一点使它无用：

```
If the process is a 64-bit application running under 64-bit Windows, the value is also set to FALSE. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:23:32.000

试试这个页面上的代码，如果你想在 C# 中使用它，它需要一个 int 的大小来检查。

[如何以编程方式确定特定进程是 32 位还是 64 位](https://stackoverflow.com/questions/1953377/how-to-know-a-process-is-32-bit-or-64-bit-programmatically)

或者也许这在 C++ 中。

[如何动态获取系统架构？](https://stackoverflow.com/questions/4073815/how-can-i-dynamically-get-the-system-architecture)

# grails - 所有方法和属性在哪里连接到 grails 控制器？

> ID：14160761
> 
> 赞同：1
> 
> 时间：2013-01-04T16:17:27.243
> 
> 标签：grails, controller

我在看 grails (2.2)，它很漂亮，甚至很神奇，它是如何工作的。我正在查看一个使用`grails create-controller`开箱即用创建的 Controller 类，它有许多可用的方法和属性，如 render()、redirect()、params、request，我认为它会一直持续下去。所有这些都连接到哪里？我在代码/项目/框架中的哪个位置看到 render() 可以作为一种方法使用？它是如何实施的？作为一名 java 开发人员，我习惯于继承和代码注入和反射。并且在 javascript 原型中可以做一些黑魔法。但是 XXController.groovy 只是一个独立的对象。是名称 (XXController) 还是位置 (grails-app/controllers?) 还是 IDE 可以接收到一些注入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:18:04.800

欢迎来到 Grails 的奇妙世界，这里有几个链接可以帮助您：

*   Web 层文档中的[控制器](http://grails.org/doc/latest/guide/theWebLayer.html#controllers)部分。
*   [以及渲染](http://grails.org/doc/latest/ref/Controllers/render.html)方法的文档。查看右侧的“快速参考”列，了解控制器上可用的更多方法。

如果你想知道这个魔法是如何做到的，Grails 是一个[开源项目](https://github.com/grails/grails-core)，所以像往常一样，去 Github 为自己服务吧（警告，这是一个相当大的项目）。

Grails 工作在 Groovy 之上，Groovy 是一种动态语言，对元编程有强大的支持。Tha基本上是Grails所有魔法的诀窍

最后，Grails 是一个基于 CoC（Convection over configuration）的框架，因此控制器将是目录“grails-app/controllers”下的任何类，并带有后缀“Controller”。（在控制器文件夹中也可能是“commandObjects”）。

与知名ide的集成也很强大，你应该[看看](http://www.grails.org/IDE+Integration)

**编辑** 您还可以在 github 上找到渲染方法的行为[方式](https://github.com/grails/grails-core/blob/master/grails-plugin-controllers/src/main/groovy/org/codehaus/groovy/grails/web/metaclass/RenderDynamicMethod.java)。[在Controllers 元类包](https://github.com/grails/grails-core/tree/master/grails-plugin-controllers/src/main/groovy/org/codehaus/groovy/grails/web/metaclass)中还有更多感染的东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:54:57.313

从 Grails 2.0+ 开始，它是使用 AST 转换实现的——以前是通过将方法添加到 Groovy MetaClass 来完成的。新方法的好处是事情会更快一些并且使用更少的内存。

GORM 域类方法现在也使用这种方法（除了必须动态添加到元类中的动态方法，如 findByFooAndBar），并且由于 AST 将方法添加到字节码，因此这些方法具有可从 Java 调用的好处。这对控制器没有帮助，因为它们只是作为 Web 请求的结果从 Grails 本身调用。

对于血腥的细节，[ControllersApi](https://github.com/grails/grails-core/blob/master/grails-plugin-controllers/src/main/groovy/org/codehaus/groovy/grails/plugins/web/api/ControllersApi.java)是方法所在，它们通过[ControllerTransformer和](https://github.com/grails/grails-core/find/mastert)[ControllersGrailsPlugin](https://github.com/grails/grails-core/blob/master/grails-plugin-controllers/src/main/groovy/org/codehaus/groovy/grails/plugins/web/ControllersGrailsPlugin.groovy)`doWithDynamicMethods`中闭包中的代码的组合混合到每个控制器类中

# font-face - 使用 webfont 加载器加载多个重量自定义字体

> ID：14160763
> 
> 赞同：2
> 
> 时间：2013-01-04T16:17:32.500
> 
> 标签：font-face, webfonts, google-webfonts

当使用[webfont 加载器](https://developers.google.com/webfonts/docs/webfont_loader?hl=fr)（[这里的 repo](https://github.com/typekit/webfontloader)`custom` ）定义字体时，我们基本上定义了加载的系列和相关的 URL：

```
WebFont.load({
    custom: {
        families : [ "My font" ],
        urls     : [ "assets/css/fonts.css" ]
    }
}); 
```

但是，加载器似乎没有检测`weight`到文件中为同一字体定义的多个`css`：

```
@font-face {
  font-family: 'My font';
  src: url("../fonts/my-font.eot");
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'My font';
  src: url("../fonts/my-font.eot");
  font-weight: bold;
  font-style: normal;
} 
```

因此，加载器在加载`active`第一个字体时触发事件。`fontactive`如果我们检查只会触发一次的事件，则可以确认这一点：

```
WebFont.load({
    fontactive: function( fontname, fontdescription ) {
        console.log( fontname, fontdescription );
        // Only trigger once `My font, n4`
    }
}); 
```

那么，有没有办法告诉 webfont 加载器有多个权重（有点像他们的 google webfonts 界面）？

*（解决方法是为每个字体粗细使用多个名称，但这不是我在这里寻找的解决方案）*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T07:14:24.337

我是 webfontloader 的开发者之一。您是正确的，自定义模块不支持加载多个变体。幸运的是，我们最近添加了对此的支持，因此如果您升级您的 webfontloader 版本（或使用 Google CDN 上的版本），您将获得对它的支持。

你可以像这样使用它：

```
WebFont.load({
  custom: {
    families: ['My Font', 'My Other Font:n4,i4,n7'],
    urls: ['/fonts.css']
  }
}); 
```

加载“我的其他字体”的“n4”、“i4”和“n7”变体。

# delphi - 如何在 Delphi Docking 示例中添加持久性

> ID：14160766
> 
> 赞同：11
> 
> 时间：2013-01-04T16:17:39.727
> 
> 标签：delphi, persistence, docking, delphi-xe3

虽然我意识到除了包含的 Delphi 对接演示之外，还有[其他更好](https://stackoverflow.com/questions/9319747/how-do-i-do-drag-and-dock-like-the-delphi-ide-with-pins-and-tabs)的对接库可用，例如[Developer Express Library](http://www.devexpress.com/Products/VCL/ExBars/DockingLib.xml)和[JVCL Docking Library](http://wiki.delphi-jedi.org/wiki/Category:JVCL.Docking)，但对于特定的演示项目，我仅限于使用 Delphi 内置功能（尽管有一些注意到的缺陷）。

我的问题与向停靠状态添加持久性有关。我通过检查 Controls.pas 看到 TDockTree 是默认的停靠管理器，并且它具有 Stream I/O 例程。尽管我看不出有人如何调用这些例程，但在 SO 和各种论坛上进行挖掘。我已经尝试从相关的 Create 和 OnDrop 事件加载并保存到文件中，但我在黑暗中刺伤。我很高兴保存和恢复表单大小和状态，但我正在为我应该保存的概念而苦苦挣扎。有好心人能给我一个起点吗？

我正在使用 Delphi XE3，所以所有（？）事情都是可能的！

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T11:54:30.203

我正在使用[J. Russels 的 Toolbar 2000](http://www.jrsoftware.org/tb2k.php)。它提供面板、工具窗口和工具栏。

那一个提供功能，例如`TBRegSavePositions`并将`TBRegSavePositions`用户自定义存储到注册表中。

加载“视图”可以通过代码行轻松完成：

```
TBRegLoadPositions(self, HKEY_CURRENT_USER, c_BaseUserRegKey); 
```

在这种情况下，自我是我的形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-22T07:29:27.687

`LoadFromStream`您可以使用和`SaveToStream`方法通过将数据存储在字符串中来加载和保存对接配置。

因此，需要以下方法：

*   将当前停靠配置保存到字符串
*   从字符串加载当前的对接配置

这是一些执行此操作的代码：

```
function GetDockString(const AManager: IDockManager): AnsiString;
var
  LStream: TMemoryStream;
begin
  LStream := TMemoryStream.Create();
  try
    AManager.SaveToStream(LStream);
    SetLength(Result, 2 * LStream.Size);
    BinToHex(LStream.Memory, PAnsiChar(Result), LStream.Size);
  finally
    FreeAndNil(LStream);
  end;
end;

procedure ReadDockString(const ADockString: AnsiString; const AManager: IDockManager);
var
  LStream: TMemoryStream;
begin
  LStream := TMemoryStream.Create();
  try
    LStream.Size := Length(ADockString) div 2;
    HexToBin(PAnsiChar(ADockString), LStream.Memory, LStream.Size);
    LStream.Position := 0;
    AManager.LoadFromStream(LStream);
  finally
    FreeAndNil(LStream);
  end;
end; 
```

我已经在应用程序中使用这些方法来创建可停靠窗口，但`vcl`只提供了非常基本的用户体验。你可以做点什么，但很难测试和调试——我已经花了太多时间来使用和覆盖`TCustDockDragObject`and `TCaptionedTabDockTree`，所以我*建议*使用对接框架。

这是一个创建两个表单并读取对接配置的最小示例。

```
TForm1 = class(TForm)
  procedure FormCreate(Sender: TObject);
  procedure FormDblClick(Sender: TObject);
private
    FPanel: TPanel;
end; 
```

执行：

```
procedure TForm1.FormCreate(Sender: TObject);
var
  LWindow: TForm;
const
  LDockExample = '0000080000000000000000000000000000000000000000000000000100000000000000000B0000004368696C6457696E646F77FFFFFFFF';
begin
  FPanel := TPanel.Create(Self);
  FPanel.Align := alTop;
  FPanel.Height := 300;
  FPanel.DockSite := true;
  FPanel.Parent := Self;

  LWindow := TForm.CreateNew(Self);
  LWindow.Name := 'ChildWindow';
  LWindow.DragKind := dkDock;
  LWindow.BoundsRect:=Rect(10, 10, 400, 400);
  LWindow.Color := clGreen;
  LWindow.Show;

  ReadDockString(LDockExample, FPanel.DockManager);
end;

procedure TForm1.FormDblClick(Sender: TObject);
begin
  ShowMessage(GetDockString(FPanel.DockManager));
end; 
```

# c# - 在处理程序中将 Json 反序列化为 Object

> ID：14160768
> 
> 赞同：3
> 
> 时间：2013-01-04T16:17:43.097
> 
> 标签：c#, json, handler, deserialization

我有一个简单的课程：

```
public class site
        {
            public string URL { get; set; }
        } 
```

它存在于 http 处理程序中。目前我正在将 json 发布到这个处理程序并尝试反序列化它以从字符串中获取 URL。但是，我对它的反序列化部分有疑问。

我有一个字符串“jsonString”，它的 json 格式如下：

```
[{"URL":"http://www.google.com/etc/"}] 
```

这是我的反序列化代码：

```
JavaScriptSerializer jsonSerializer = new JavaScriptSerializer();

        string jsonString = String.Empty;

        HttpContext.Current.Request.InputStream.Position = 0;
        using (StreamReader inputStream = new StreamReader(HttpContext.Current.Request.InputStream))
        {
            jsonString = inputStream.ReadToEnd();
        }

        site currSite = new site();
        currSite = jsonSerializer.Deserialize<site>(jsonString);

        //set response types
        HttpContext.Current.Response.ContentType = "application/json";
        HttpContext.Current.Response.ContentEncoding = Encoding.UTF8;

       //send response 
       HttpContext.Current.Response.Write(jsonSerializer.Serialize(currSite.URL)); 
```

然后我尝试使用 currSite.URL 发送响应，但它失败了。我在这里想念什么？我有理由相信它在反序列化部分，因为如果我发送 jsonString 而不是 currSite.URL 的响应，它将起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T16:22:29.240

您的 json 字符串显示它是一个数组，而不是单个实体。你应该这样反序列化它：

```
var result = jsonSerializer.Deserialize<site[]>(jsonString); 
```

并且`result[0].Url`应该包含您要查找的内容。

**更新**

添加示例代码：

```
 string json = @"[{""URL"":""http://www.google.com/etc/""}]";

 JavaScriptSerializer js = new JavaScriptSerializer();
 var result = js.Deserialize<site[]>(json);
 Console.WriteLine(result[0].URL); 
```

打印： [http ://www.google.com/etc/](http://www.google.com/etc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:21:52.557

如果您只是尝试将 URL 作为响应（只是字符串）发回，则无需序列化该值。只需传递`currSite.URL`给`Write`方法。

否则，我猜你应该`currSite`为响应序列化整个对象，而不仅仅是 URL。这完全取决于调用者期望的响应类型（您尚未指定）。

# code-analysis - 如何使 fx cop 警告 CS0067 静音？

> ID：14160776
> 
> 赞同：8
> 
> 时间：2013-01-04T16:18:09.693
> 
> 标签：code-analysis, fxcop

在构建服务器上，我看到一些奇怪的消息。它没有这么说，但我认为它来自一些名为“fx cop”的软件

> 警告 CS0067：从未使用过事件“SunGard.Adaptiv.AnalyticsEngine.UI.CommonControls.DisabledCommand.CanExecuteChanged”

我怎样才能使这条消息静音？在不改变我的班级所做的事情的情况下。

```
sealed class DisabledCommand : ICommand
{
    public event EventHandler CanExecuteChanged; 
```

我偶然发现了[`System.Diagnostics.CodeAnalysis.SuppressMessageAttribute`](http://msdn.microsoft.com/en-us/library/system.diagnostics.codeanalysis.suppressmessageattribute.aspx)一些听起来很有用的文档，但我的警告没有任何示例。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-04T16:22:15.473

如果您需要创建一个从不引发的事件，您应该创建一个 noop 事件：

```
public EventHandler CanExecuteChanged {
    add { }
    remove { }
} 
```

编译器抱怨是因为默认（“类字段”）事件将创建一个隐藏的支持字段来存储处理程序。由于您从不引发事件，因此该字段只会浪费内存。

# xcode - 如何在不改变图像尺寸的情况下减小图像尺寸？

> ID：14160777
> 
> 赞同：0
> 
> 时间：2013-01-04T16:18:12.503
> 
> 标签：xcode, image

图像的大小约为 1.5MB。这个太大了。我要将图像转换为 pdf 文件。如何减小图像的大小（宽度，高度相同）？或者在将图像转换为 pdf 后更改 pdf 文件大小的方法是什么？

目前我正在使用下面的代码：

```
img = [UIImage imageWithData:UIImageJPEGRepresentation(img, 0.01f)]; 
```

但图像的大小仍然很大。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:29:47.027

您确定问题出在图像的大小而不是“PDF 中的图像”的大小吗？

你说大小是 1,5MB，但是什么时候呢？线前还是`[UIImage imageWithData:UIImageJPEGRepresentation(img, 0.01f)];`线后？

您正在使用高压缩比，因此如果大小为 1.5MB 之后……您的图像可能具有非常高的分辨率。压缩不能创造奇迹 ;-)

但是我怀疑您的问题出在PDF转换中，因此请检查`[UIImage imageWithData:UIImageJPEGRepresentation(img, 0.01f)];`行后图像的图像大小并告诉我

# desire2learn - 尝试创建 D2L 用户帐户时获得无效的令牌响应

> ID：14160781
> 
> 赞同：1
> 
> 时间：2013-01-04T16:18:29.567
> 
> 标签：desire2learn

我正在尝试使用他们的 Valence API 从 3rd 方应用程序中修改 D2L 数据库。我已经完成了一些操作，但我一直在尝试创建一个新的用户帐户。有人告诉我，我正在使用的帐户有权执行此操作。

我定义了一个 JSON 对象来保存我想要的值： { "OrgDefinedId": "XX000TEST", "FirstName": "Tom", "MiddleName": "", "LastName": "Foolery", "ExternalEmail": “tom@something.com”、“用户名”：“Tom.Foolery”、“RoleId”：“78”、“IsActive”：“true”、“SendCreationEmail”：“false”}

我将上述文本复制到 HTTP 发布缓冲区，然后调用以下链接：/d2l/api/lp/1.0/users/?

参数字符串包含在 Valence 文档中指定的 ID 和签名（x_a、x_b 等）。我假设授权值是正确的，因为在其他 Valence 查询上使用相同的算法时我得到了正确的结果。

任何有关如何通过“无效令牌”消息的建议将不胜感激。

——斯坦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T00:21:46.683

如果您收到 403“无效令牌”消息，那么由于某种原因，您没有正确形成 x_a、x_b、x_c 或 x_d 身份验证令牌。我们过去看到的常见问题是：

*   尝试重用为一个 API 调用生成的 x_c 和/或 x_d 签名与另一个

*   交换令牌：x_a 是 App ID，x_c 是 App Sig，x_b 是 User ID，x_d 是 User Sig

*   使用错误的 HTTP*方法*生成签名（该方法是签名的基本字符串的组成部分之一）

*   基本字符串中的 HTTP 方法不使用全部大写字母（组件不应`GET`为`get`）

*   没有在基本字符串中对 API 路由使用所有*小写*字母，或者包含不正确的字符：例如，在您的问题中，您似乎暗示您正在`?`作为路由的一部分传递；你不应该这样做。在这种情况下，您用于创建 URL 的基本字符串应该在`POST&/d2l/api/lp/1.0/users/&1234567`where`1234567`应该替换为您生成的时间戳并传入 x_t

*   使用提供 API 版本组件的 API 路由，但在调用时，使用另一个版本组件（即生成时使用`/d2l/api/lp/1.0/...`但调用时使用`/d2l/api/lp/1.1/...`）

*   在基本字符串中使用不正确/不匹配的时间戳值（用于基本字符串的时间戳应以秒为单位，并且与 x_t 值相同）

*   虽然之前调用有效，但突然之间没有一个调用使用 403 无效令牌结果：用户令牌可能已过期，您需要重新验证用户

*   虽然调用以前针对测试实例有效，但当您尝试移动到不同的 LMS（例如 prod 实例）时，调用不起作用：可能 App ID/Key 对没有出现在这个新的 LMS 上，或者您重新尝试使用来自一个 LMS 的用户 ID/密钥对在不同的 LMS 上生成签名

另外，请注意您的 JSON 对象的格式严格不正确：`IsActive`and`SendCreationEmail`属性应该分别具有 and 的值，`true`而`false`不是`"true"`and `"false"`，尽管服务器端的 LMS 解析器可能会原谅这一点。

如果这些要点都不能帮助您，请随时在我们的问题跟踪器中打开问题，或联系我们的 Valence 支持电子邮件地址，我们可以尝试帮助您解决此问题。

**注意**请注意，无效的令牌会让您返回 403（但消息将是“无效令牌”或“过期令牌”或类似消息）。如果您的令牌正确生成，但您的调用用户上下文不允许创建用户，那么您*也会*收到 403，但这次消息将是“不允许”或“未授权”或类似的消息。确保您仔细检查您返回的 403*类型。*

在这种特殊情况下，创建用户的权限有点棘手。您不仅必须有权创建用户，还必须有权修改您将在 CreateUserData 结构（OrgDefinedId、Email 等）中传递给 API 的属性，*并且*您还必须能够查看“用户信息隐私”设置中的所有这些字段，*并且*您必须有权注册您在组织级别提供的用户*角色*……最后两位过去曾让我们的一些客户感到不安。

# java - Log4J2 - 如何在单元测试中禁用日志记录？

> ID：14160782
> 
> 赞同：23
> 
> 时间：2013-01-04T16:18:32.603
> 
> 标签：java, unit-testing, logging, log4j2

我在我的应用程序中使用 Log4J v2.0 Beta3 进行日志记录，并且在运行单元测试时生成了日志消息。我检查了 API 以了解将日志级别设置为 CRITICAL 之类的某种方式，但我找不到任何方法来更改记录器配置。

事实上，我在 log4j2 网站上读到了这个：

> 请注意，与 Log4j 1.x 不同，公共 Log4j 2 API 不公开添加、修改或删除附加程序和过滤器或以任何方式操作配置的方法。

所以就这么说了。从单元测试中禁用日志记录的正确方法是什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-04T16:28:45.740

我在 log4j2 网站的“ [Testing in Maven](https://logging.apache.org/log4j/2.x/manual/configuration.html#UnitTestingInMaven) ”下找到了我的答案。推荐的方法似乎是在 src/test/resources 中放置一个 log4j2-test.xml 文件。将 xml 文件放入此目录将导致使用它而不是 log4j2.xml。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-11-27T22:32:26.137

您可以通过将根级别设置为关闭 ( `<Root level="off"/>`) 来禁用日志记录。

因此，将 log4j2.xml 文件放入 src/test/resources 中，内容如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<Configuration status="warn">
    <Loggers>
        <Root level="off"/>
    </Loggers>
</Configuration> 
```

编辑：删除`<!DOCTYPE xml>`（基于 sprynter 的建议）以使 xml 有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-10T21:37:57.760

只要您将文件放入当前模块， [@Jbug](https://stackoverflow.com/a/14160959/1175279)和[@Dove](https://stackoverflow.com/a/53509257/1175279)的答案都有效。`src/test/resources`如果您的应用程序依赖于一个库来包含`log42.xml`它，它将无法用于测试运行，因为库`jar`不会包含测试类和资源。

# c# - 如何正确使用 TransactionScope？

> ID：14160788
> 
> 赞同：34
> 
> 时间：2013-01-04T16:19:05.077
> 
> 标签：c#, .net, vb.net, transactionscope

我一直想尝试使用`TransactionScope`，但我就是不知道人们看到了什么有用的东西。所以我们举个例子：

```
using(TransactionScope tran = new TransactionScope()) {
    CallAMethodThatDoesSomeWork1();
    CallAMethodThatDoesSomeWork2();
    tran.Complete();
} 
```

所以最基本的问题：`CallAMethodThatDoesSomeWork1()`如果假设“ `CallAMethodThatDoesSomeWork2()`”抛出异常，我如何编写“”以便它知道如何回滚其动作？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-04T16:30:18.030

您调用的方法中的代码需要具有事务意识并参与活动事务。这意味着创建或使用作为资源管理器的类（请参阅[实现您自己的资源管理器](http://www.codeguru.com/csharp/.net/net_data/sortinganditerating/article.php/c10993/SystemTransactions-Implement-Your-Own-Resource-Manager.htm)。

您可以通过实现[IEnlistmentNotification](http://msdn.microsoft.com/en-us/library/system.transactions.ienlistmentnotification.aspx)并在事务中登记来做到这一点。事务完成后，事务管理器将调用该接口上定义的方法，以便您的代码可以执行/撤消工作。

# c# - 可以在 C# 中使用除英语以外的默认 UI 语言吗？

> ID：14160795
> 
> 赞同：6
> 
> 时间：2013-01-04T16:19:37.690
> 
> 标签：c#, localization, internationalization, globalization

我们已经开始着手开发最初由德语开发人员为德国用户创建的 C# 项目。大多数代码，包括类名、注释和调试消息都是用德语编写的，用户界面也是如此。由于我们的主要目标之一是全球化，因此我们决定将默认语言保留为德语，并为其他语言（包括英语）添加语言资源库，因为任何其他选项一开始在时间上都会变得过于昂贵。

我的问题是：这是一个好主意，还是像其他人一样至少将用户界面的默认设置切换为美国英语更好？使用美国英语以外的默认语言有什么缺点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T16:23:53.980

尽管没有理由将默认设置为英语，但我的方法是想象当人们从您没有翻译的地方访问该站点时，您希望发生什么。

例如，您所有讲德语的访问者都可以获得德语翻译，而您所有讲美国英语的访问者都会获得美国英语翻译，但是当讲法语的访问者访问该站点时会发生什么？他们默认使用德语或英语会更好吗？

您需要真正考虑这些术语，并根据您认为需要支持的人来决定。

如果您有不同的默认设置，它应该会影响您的德语使用者，因为他们仍然应该获得德语版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T16:23:02.420

使用英语以外的默认语言没有任何问题。所有默认语言（实际上是文化）所做的就是提供资源以供当前文化没有资源时使用。

默认语言的文本和图像资源应该适用于您打算首先推销的文化 - 在时间允许的情况下添加其他语言。

# xslt - 如何使用 xsl 从给定的 xml 中获取前 x 次出现

> ID：14160799
> 
> 赞同：2
> 
> 时间：2013-01-04T16:20:08.223
> 
> 标签：xslt, xpath

如何使用 xslt 从下面的 xml 中获取第一个 x 出现的行元素

下面是一个示例 xml

```
 <document>
    <line>
        <name>MAR111</name>
        <value>1</value>
    </line>

    <line>
        <name>MAR111</name>
        <value>3</value>
    </line>
    <line>
        <name>MEA111</name>
        <value>1</value>
    </line>
    <line>
        <name>MPR111</name>
        <value>1</value>
    </line>
    <line>
        <name>MEA111</name>
        <value>4</value>
    </line>
    <line>
        <name>MPR111</name>
        <value>2</value>
    </line>
</document> 
```

例如，如果我想要前 3 次出现，结果应该是

```
 <document>
    <line>
        <name>MAR111</name>
        <value>1</value>
    </line>

    <line>
        <name>MAR111</name>
        <value>3</value>
    </line>
    <line>
        <name>MEA111</name>
        <value>1</value>
    </line>
 </document> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:49:43.850

你可以测试`postition()`...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="document">
        <xsl:copy>
            <xsl:apply-templates select="@*|line[3 >= position()]"/>
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T04:25:45.560

**使用**：

```
/*/line[not(position() > $x)] 
```

where`$x`必须是一个变量，其中包含要选择的“第一个”元素的所需数量。

或者，`$x`可以替换为所需的数字本身。

**请注意**：

这个问题是一个纯 XPath 问题，因此有一个纯 XPath 解决方案——根本不需要 XSLT。

# clojure - 从 Clojure core.logic 中提取地图元素

> ID：14160802
> 
> 赞同：6
> 
> 时间：2013-01-04T16:20:44.930
> 
> 标签：clojure, clojure-core.logic

我正在尝试使用 Clojure core.logic 从地图中提取数据。此代码按我的意愿执行：

```
 (run 10 [q] 
   (fresh [?id ?type ?name] 
      (membero ?type [:t2 :t1])
      (== q [?id ?name])
      (membero {:id ?id :type ?type :name ?name}  
           [
           {:id 1 :type :t1 :name "one"}
           {:id 2 :type :t2 :name "two"}
           ])))
=> ([2 "two"] [1 "one"]) 
```

但是，如果我向地图添加一些其他元素，则它无法匹配：

```
(run 10 [q] 
   (fresh [?id ?type ?name] 
      (membero ?type [:t2 :t1])
      (== q [?id ?name])
      (membero {:id ?id :type ?type :name ?name}  
           [
           {:id 1 :type :t1 :name "one" :other1 :o1}
           {:id 2 :type :t2 :name "two" :other2 :o2}
           ]))) 
```

我明白为什么`matcho`地图不再一样了。我的问题是，我怎样才能改变它以使其再次工作？如何使其仅匹配地图中的某些键，或者如何使其匹配地图可能具有的任何随机键？

编辑：

我让它工作`patial-map`（感谢[https://github.com/clojure/core.logic/pull/10](https://github.com/clojure/core.logic/pull/10)）

```
(run 10 [q] 
   (fresh [?id ?type ?name] 
          (membero ?type [:t2 :t1])
          (== q [?id ?name])
          (membero (partial-map {:id ?id :type ?type :name ?name} )
                   [
                    {:id 1 :type :t1 :name "one" :other1 :o2}
                    {:id 2 :type :t2 :name "two" :other2 :o1}
                    ]))) 
```

但是我发现了一个`featurec`应该用来代替的注释`partial-map`。我的新问题：如何将其更改为使用`featurec`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T17:18:00.853

回答我自己的问题：

这是工作代码：

```
(run 10 [q] 
   (fresh [?id ?type ?name ?pm] 
          (membero ?type [:t2 :t1])
          (== q [?id ?name])
          (featurec ?pm  {:id ?id :type ?type :name ?name} )
          (membero ?pm
                   [
                    {:id 1 :type :t1 :name "one" :other1 :o2}
                    {:id 2 :type :t2 :name "two" :other2 :o1 :another :ao2}
                    {:id 3 :type :t3 :name "three" :other2 :o1 :another :ao1}
                    ])))) 
```

这段代码允许我从地图中提取值，但只关注真正重要的键。其余的键值对将被忽略。

# mysql - 如何使这个多重连接 MySQL 查询更干净/性能更好？

> ID：14160805
> 
> 赞同：0
> 
> 时间：2013-01-04T16:20:48.647
> 
> 标签：mysql

我正在尝试为我正在处理的网站构建搜索查询，该查询构建最近/在线玩家的列表，他们正在玩或想要玩的游戏，他们正在玩的平台，如果他们有麦克风，他们在平台上的玩家标签/图像以及他们想要玩的游戏模式。以下查询为我做这件事。但是，它非常缓慢。我已经为存活 1 分钟的数据创建了一个缓存。

~~此外，`users_games_modes ugm`它加入了`user_id`而不是`game_id`像我想要的那样。我不知道如何在加入之前`game_id`不移动也使其匹配。`games_modes`如果我在连接之前移动连接，我将如何连接连接结果中的数据`ugm`？（我希望这是有道理的）~~

*   通过使用`ou1.game_id`

我对 where 或 join on 语句中的每个项目都有索引。 是通过使用 PHP 和 MySQL的PDO 语言动态添加
的`ou1.stop`

```
SELECT
    ou1.id as oid,
    ou1.user_id,
    ou1.game_id as game_id,
    CONCAT(SUBSTRING(ou1.comment, 1, 7), '...') as comment,
    users_systems.mic,
    users_gamernames.user_name,
    games.game_name,
    ou1.start,
    ou1.stop,
    ou1.system_id as system_id,
    (select value from users_settings where users_settings.user_id = ou1.user_id and users_settings.setting = 'display_name') as display_name,
    CASE
        WHEN ou1.system_id = '1' THEN 'xbox_tile'
        WHEN ou1.system_id = '2' THEN 'ps3_tile'
        WHEN ou1.system_id = '3' THEN 'steam_tile'
    END AS platform,
    (select value from users_settings where users_settings.user_id = ou1.user_id and users_settings.setting = platform) as platform_tile,
    GROUP_CONCAT(DISTINCT gm.short_name ORDER BY gm.short_name SEPARATOR ', ') as modes
FROM online_users as ou1
LEFT JOIN online_users ou2 ON (ou1.user_id = ou2.user_id and ou1.id < ou2.id and ou1.stop < '2013-01-28 23:59:59')
LEFT JOIN users_gamernames ON (users_gamernames.user_id = ou1.user_id AND users_gamernames.system_id = ou1.system_id)
LEFT JOIN users_systems ON (ou1.user_id = users_systems.user_id AND ou1.system_id = users_systems.system_id)
LEFT JOIN users_games_modes ugm ON (ou1.user_id = ugm.user_id AND ugm.game_id = ou1.game_id)
LEFT JOIN games_modes gm ON (ugm.mode_id = gm.id AND ou1.game_id = ou1.game_id)
RIGHT JOIN games ON (ou1.game_id = games.id)
WHERE ou2.id IS NULL
AND ou1.id IS NOT NULL
AND ou1.stop<='2013-01-28 23:59:59'
GROUP BY ou1.system_id, ou1.user_id
ORDER BY ou1.stop ASC
LIMIT 50; 
```

这是 sql-adminer 的 EXPLAIN 输出：

[http://i.imgur.com/N1ykp.png](https://i.imgur.com/N1ykp.png)

![http://i.imgur.com/N1ykp.png](../Images/e9abb13463981a000d00a381f3bd544e.png)

游戏模式索引：

[http://i.imgur.com/m9DLF.png](https://i.imgur.com/m9DLF.png)

![http://i.imgur.com/m9DLF.png](../Images/53bba39788be880d66d61ceb77652648.png)

在线用户指数：

[http://i.imgur.com/jf0wz.png](https://i.imgur.com/jf0wz.png)

![http://i.imgur.com/jf0wz.png](../Images/28a25adad2588f13a430a2587b086870.png)

users_games_modes 索引：

[http://i.imgur.com/I0PUR.png](https://i.imgur.com/I0PUR.png)

![http://i.imgur.com/I0PUR.png](../Images/9ed77e82579281d22f08e1078ee6cdc3.png)

*   编辑 1：删除了 2 个 JOIN，添加了一个 CASE 和一个子选择，从运行时中删除了一些内容，并使其更好地用于未来的更新。
*   *   绝大多数运行时间似乎都来自`users_games_modes`连接。当我删除它时，它从 16 秒变为 0.32 秒。我在`user_id`. （我附上了索引的屏幕截图`users_games_modes`
*   编辑 2：添加了一个`game_id`列`users_games_modes`，将运行时间从 16 秒降低到 2.4 秒。
*   *   更新了`users_games_modes` [4的索引截图](https://i.stack.imgur.com/Y9qoJ.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:48:48.927

```
 SELECT 
            ou1.id as oid,
            ou1.user_id,
            ou1.comment,
            users_systems.mic,
            users_gamernames.user_name,
            games.game_name,
            ou1.start,
            ou1.stop,
            ou1.system_id as system_id,
                (select value from users_settings where users_settings.user_id = ou1.user_id and users_settings.setting = 'display_name') as display_name,
                CASE
                    WHEN ou1.system_id = '1' THEN 'xbox_tile'
                    WHEN ou1.system_id = '2' THEN 'ps3_tile'
                    WHEN ou1.system_id = '3' THEN 'steam_tile'
                END AS platform,
                (select value from users_settings where users_settings.user_id = ou1.user_id and users_settings.setting = platform) as platform_tile,
                ugmt.modes
        FROM online_users as ou1
        LEFT JOIN users_gamernames ON (users_gamernames.user_id = ou1.user_id AND users_gamernames.system_id = ou1.system_id)
        LEFT JOIN users_systems ON (ou1.user_id = users_systems.user_id AND ou1.system_id = users_systems.system_id)
        LEFT JOIN users_games_modes_temp ugmt ON (ou1.user_id = ugmt.user_id AND ugmt.game_id = ou1.game_id)
        RIGHT JOIN games ON (ou1.game_id = games.id)
        WHERE ou1.expired=0
        AND ou1.start<='2013-01-04 21:47'
        AND ou1.stop>='2013-01-04 21:47'
        GROUP BY ou1.id
        ORDER BY ou1.stop DESC
        LIMIT 50; 
```

我删除了 LEFT JOIN 和 GROUP_CONCAT`users_games_modes`并`games_modes`更改了更新工具中的代码以在更改`users_games_modes`时更新条目`users_games_modes_temp`。

这将整个查询从 16 秒更改为 0.002 秒。

我认为运行时的巨大变化是由于连接`users_games_modes`为每行查询中的所有用户拉取所有游戏。

# python - Python中的直方图匹配

> ID：14160806
> 
> 赞同：3
> 
> 时间：2013-01-04T16:20:50.253
> 
> 标签：python, numpy, histogram, cdf

我正在尝试将模拟数据与观测到的降水数据进行直方图匹配。下面显示了一个简单的模拟案例。我得到了模拟数据和观察数据的 CDF 并被困在那里。我希望一个线索能帮助我理解..提前谢谢你

```
import numpy as np
import matplotlib.pyplot as plt
from scipy.interpolate import interp1d
import scipy.stats as st

sim = st.gamma(1,loc=0,scale=0.8) # Simulated
obs = st.gamma(2,loc=0,scale=0.7) # Observed
x = np.linspace(0,4,1000)
simpdf = sim.pdf(x)
obspdf = obs.pdf(x)
plt.plot(x,simpdf,label='Simulated')
plt.plot(x,obspdf,'r--',label='Observed')
plt.title('PDF of Observed and Simulated Precipitation')
plt.legend(loc='best')
plt.show()

plt.figure(1)
simcdf = sim.cdf(x)
obscdf = obs.cdf(x)
plt.plot(x,simcdf,label='Simulated')
plt.plot(x,obscdf,'r--',label='Observed')
plt.title('CDF of Observed and Simulated Precipitation')
plt.legend(loc='best')
plt.show()

# Inverse CDF
invcdf = interp1d(obscdf,x)
transfer_func = invcdf(simcdf)

plt.figure(2)
plt.plot(transfer_func,x,'g-')
plt.show() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T06:27:03.813

我试图重现您的代码，并收到以下错误：

```
ValueError: A value in x_new is above the interpolation range. 
```

如果您查看两个 CDF 的图，很容易弄清楚发生了什么：

![在此处输入图像描述](../Images/0352c4c3ac16e83ed5dda349e275dc0f.png)

当您现在定义`invcdf = interp1d(obscdf, x)`时，请注意`obscdf`范围从

```
>>> obscdf[0]
0.0
>>> obscdf[-1]
0.977852889924409 
```

因此`invcdf`只能在这些限制之间插入值：超出它们我们将不得不进行外推，这并不是很好定义的。SciPy 的默认行为是在被要求推断时引发错误。这正是您要求时发生的情况`invcdf(simcdf)`，因为

```
>>> simcdf[-1]
0.99326205300091452 
```

超出插值范围。

如果您阅读[文档](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.interp1d.html)[，`interp1d`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.interp1d.html)您会看到可以修改此行为

```
invcdf = interp1d(obscdf, x, bounds_error=False) 
```

现在一切正常，尽管您需要将绘图参数的顺序反转为`plt.plot(x, transfer_func,'g-')`与您发布的图中相同：

![在此处输入图像描述](../Images/6d3bab3c9d43ee0ebd1bd4105eee3aee.png)

# objective-c - UIAlertView wait_fences：未能收到回复：10004003

> ID：14160807
> 
> 赞同：1
> 
> 时间：2013-01-04T16:20:52.607
> 
> 标签：objective-c, ios, xcode, uialertview, reachability

当我想在没有互联网连接时提醒用户时收到此错误

请帮助我，这是我的代码：

```
- (void)viewDidAppear:(BOOL)animated
{
[super viewDidAppear:animated];
    __block UIAlertView *alert = nil; 
//---------- Check Connection -------
// allocate a reachability object
Reachability* reach = [Reachability reachabilityWithHostname:@"www.google.com"];

// set the blocks
reach.unreachableBlock = ^(Reachability*reach) // not connected
{
    //NSLog(@"UNREACHABLE!");
    alert =
    [[UIAlertView alloc]
     initWithTitle: @"No Network Connection!"
     message:@"Sorry, we can't currently connect you to the app. Please check your internet connection."
     delegate:nil
     cancelButtonTitle:@"OK"
     otherButtonTitles:nil];

    [alert show];
    //[alert release];

};

reach.reachableBlock = ^(Reachability*reach)
{
    //NSLog(@"REACHABLE!");
};

// start the notifier which will cause the reachability object to retain itself!
[reach startNotifier];

} 
```

错误是“wait_fences：未能收到回复：10004003”有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:26:55.770

我之前遇到过类似的问题。因为我试图在一个块中显示警报视图。

我将以下行添加到我的块中，而不是 `[alert show];`一切正常。

```
[alertview performSelectorOnMainThread:@selector(show) withObject:nil waitUntilDone:false]; 
```

尝试**仅从主线程****更新您`UI`**的，否则会导致问题或显示不可预测的结果。

# xml - Jquery .find 适用于 xml 但不适用于 JSON

> ID：14160810
> 
> 赞同：1
> 
> 时间：2013-01-04T16:20:57.180
> 
> 标签：xml, json, jquery

这适用于 XML

```
$(document).ready(function() {
            $.ajax({
                type: "GET",
                url: "http://api.soundcloud.com/users/123/playlists.xml?client_id=ID",
                dataType: "xml",
                success: parse
            });
        });

        function parse(xml) {
           $(xml).find("playlists").each(function(){
                        //var title = $(this).find('title').text();
                        $("#catTitle").append($(this).text()+ "<br />"); 
                    });
        } 
        ​ 
```

但是当我把它改成这个时，它就不起作用了。我在之后放了一个 alert() `$(json).find("playlists").each(function(){`，它永远不会被调用。有什么想法吗？

```
$(document).ready(function() {
        $.ajax({
            type: "GET",
            url: "http://api.soundcloud.com/users/123/playlists.json?client_id=ID",
            dataType: "json",
            success: parse
        });
    });

    function parse(json) {
       $(json).find("playlists").each(function(){
                    //var title = $(this).find('title').text();
                    $("#catTitle").append($(this).text()+ "<br />"); 
                });
    } 
​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T16:22:53.450

这不是 jQuery 旨在做的事情。如果要使用 JSON 定义的对象或数组，请直接使用该对象或数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:24:40.067

尝试这个：

```
function parse(json) {
   $.each(json.playlists,function(idx,el){
       $("#catTitle").append(el+ "<br />"); 
   });
} 
```

# scilab - 为什么我的 plot3d 在 SciLab 中是白色的？

> ID：14160817
> 
> 赞同：0
> 
> 时间：2013-01-04T16:21:11.453
> 
> 标签：scilab

```
t = 0:%pi/50:10*%pi;
plot3d(sin(t),cos(t),t) 
```

当我执行此代码时，绘图已完成，但线条不可见，只有框。任何想法我必须更改哪些属性？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:17:58.947

在这种情况下，第三个参数应该是大小为 (length arg1) x (length arg2) 的矩阵。

您希望`plot3d`表现得像 and 的扩展，`plot`但`plot2d`事实并非如此。

二维图采用 x 的向量和 y 的向量，并在 (x1,y1)、(x2,y2) 等处绘制点，根据样式设置与线连接或不连接。这符合我们通常用于 2d 绘图的概念模型 - 在大多数情况下 (y = f(x))，将一件事的关系绘制为另一件事的函数。使用 2d 图还有其他方法：散点图很常见，但使用两行数据概念很容易生成散点图。

这并不能平滑地扩展到 3d，因为还有许多其他方法可以使用 3d 图来表示数据。如果你给它三个坐标向量并让它在它们之间画一条线，我们想用它做什么？这是使用 3d 绘图最有用的方法吗？

大多数包为不同类型的数据提供不同的可视化类型。Mathematica 有很多 3d 可视化类型，Python/Scipy/Mayavi2 有更多。`plot3d`Matlab 也有一个数字，但 Scilab 虽然通常镜像 Matlab，但在这种情况下更喜欢用函数来处理它。

我认为它就像一个等高线图：你给它一个 x 向量和一个 y 向量，它使用这些来创建 (x,y) 点的网格。第三个参数是一个矩阵，其尺寸与保存每个点的 z 坐标的 (x,y) 网格的尺寸相匹配。[文档](http://help.scilab.org/docs/5.3.3/en_US/plot3d.html)中的第一个示例做了我认为你所追求的：

```
t=[0:0.3:2*%pi]';
z=sin(t)*cos(t');
plot3d(t,t,z); 
```

第一行创建一个长度为 21 的列向量

```
-->size(t)
 ans  =

    21\.    1\. 
```

第二行计算 sin(t) 与 cos(t) 的排列乘积的 21 x 21 矩阵 - 注意`cos(t')`元素中的转置。

```
-->size(z)
 ans  =

    21\.    21\. 
```

然后当它绘制它们时，它会绘制 (x1,y1,z11)、(x1,y2,x12)、(x2,y2,z22) 等等。它在网格中的相邻点之间绘制线，或者没有线，或者只是表面。

# ruby-on-rails - 使用设计创建个人资料页面时如何创建会话#show

> ID：14160822
> 
> 赞同：1
> 
> 时间：2013-01-04T16:21:30.690
> 
> 标签：ruby-on-rails, ruby, devise, ruby-on-rails-3.2

第一次发海报，如果我遇到非常菜鸟之类的，我深表歉意。

我已经开始开发一个 TODO Rails 应用程序，它允许人们登录并为自己创建多个列表。

我想让用户流程正常工作，以便在用户登录后，他们会看到一个“个人资料页面”，其中显示了一些重要的链接、用户信息，然后是一个包含他们列表的网格等。

现在到查询，什么是最好的方法，因为我有一个用户模型和一个列表模型。我是否需要创建一个配置文件控制器，上面有一个简单的#index 操作，我可以从 2 个模型中提取信息，还是有更可接受的方式？

我希望 Devise 能提供这样的东西，但如果他们这样做了，我就找不到了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:37:16.797

我不确定我是否会将我的用户个人资料页面与 Devise 结合起来。Devise 是一种用于用户身份验证的工具，在我看来，用户个人资料页面与身份验证并不真正相关。

我会将您的用户个人资料放在用户显示页面上，即`app/views/user/show.html.erb`. （如果它不存在，您可能必须创建一个`UserController`and`app/views/user`目录。）

至于在登录时将用户重定向到个人资料页面，这（基本上）是我如何做到的`app/controllers/application_controller.rb`：

```
class ApplicationController < ActionController::Base
  def after_sign_in_path_for(resource_or_scope)
    user_show_path(current_user)
  end
end 
```

为了解决您的最后一个问题，至少部分地，不，我不会创建配置文件控制器。以 RESTful 的方式思考，在我看来，用户个人资料页面在`UserController#show`.

# c# - 反汇编代码

> ID：14160828
> 
> 赞同：-1
> 
> 时间：2013-01-04T16:21:54.340
> 
> 标签：c#, .net, reflection, disassembly

> **可能重复：**
> [如何编写反汇编程序？](https://stackoverflow.com/questions/924303/how-to-write-a-disassembler)

我想开始写一个反汇编程序。你能帮我正确的开始吗？我搜索了论坛，其中大多数是反汇编程序。

我想开始写一个的原因是我想有一些定制的功能来满足我的要求。

编辑：这是反汇编由 .NET 生成的 IL 代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:16:48.977

您需要的大部分内容都可以通过 .Net 中的反射直接获得 - 直到使用给定类的给定方法的 IL 代码获取字节。下一步是解析 IL，通常建议[Mono Cecil](http://www.mono-project.com/Cecil)这样做（也可以根据 IL 文档从头开始完成）。

还要检查这个问题[Open Source Alternatives to Reflector？](https://stackoverflow.com/questions/2425973/open-source-alternatives-to-reflector)列出了其他现有的 IL 反汇编程序。

# vector - 相交两个先验排序向量的惯用/高效Clojure方法？

> ID：14160830
> 
> 赞同：10
> 
> 时间：2013-01-04T16:22:01.417
> 
> 标签：vector, clojure

我有一对向量`x`和`y`独特的项目，我知道每个项目都可以排序。我希望有两者的交集，保持排序顺序。理想情况下，结果将是另一个向量，用于快速随机访问。

下面的生成仅仅是为了举例，我的`x`和`y`将预先分类和预先区分（它们实际上是时间样本）。

```
(defn gen-example [c] (-> (repeatedly c #(-> c rand int)) distinct sort vec))

user=> (def x (gen-example 100000)) (count x)
#'user/x
63161
user=> (def y (gen-example 100000)) (count y)
#'user/y
63224 
```

我知道 Clojure`clojure.set/intersection`可以在`sorted-set`. My`x`和`y`具有相同的属性（已排序的不同元素）但类型不同。

**问题 1：有没有更好/更快的方法来转换`x`和s，而不是`y`考虑到它们已经是不同的和排序的？`sorted-set``(apply sorted-set x)`**

```
user=> (time (def ssx (apply sorted-set x)))
"Elapsed time: 607.642592 msecs"
user=> (time (def ssy (apply sorted-set y)))
"Elapsed time: 617.046022 msecs" 
```

现在我准备好执行我的交叉点了

```
user=> (time (count (clojure.set/intersection ssx ssy)))
"Elapsed time: 355.42534 msecs"
39992 
```

这有点令人失望，粗略地看一下`(source clojure.set/intersection)`似乎并没有对这些集合进行排序这一事实进行任何特殊处理。

**问题 2：是否有比 s 更好/更快的方法来执行`sorted-set`s的交集`clojure.set/intersection`？**

```
(defn intersect-sorted-vector [x y] 
  (loop [x (seq x) y (seq y) acc []] 
    (if (and x y)
      (let [x1 (first x) 
            y1 (first y)] 
      (cond 
        ( < x1 y1) (recur (next x) y acc) 
        ( > x1 y1) (recur x (next y) acc) 
        :else (recur (next x) (next y) (conj acc x1))))
    acc))) 
```

事实证明，这速度更快（近 10 倍）。

```
user=> (time (count (intersect-sorted-vector x y)))
"Elapsed time: 40.142532 msecs"
39992 
```

但是，我不禁觉得我的代码过于程序化/迭代。

**问题 3：谁能提出一种更惯用的方法来处理 Clojure 中的一对向量？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T17:24:49.640

通常情况下，快速的 Clojure 代码看起来有点势在必行。函数式代码通常很优雅，但会带来一些相关的性能成本，您必须为此付出代价（懒惰、来自丢弃的不可变对象的额外 GC 压力等）

此外，转换成套装总是会更昂贵。构建一个集合`O(n log n)`本身就是一个操作，但是您可以利用已经支持向量的事实及时实现相交操作`O(n)`。

您的代码已经很不错了，但您还可以进行更多优化：

*   使用[瞬态](http://clojure.org/transients)向量来收集结果。对于许多顺序 conj 操作，这些比常规持久向量快一点。
*   使用带有原语的索引访问向量，而不是使用第一个/下一个遍历序列。这避免了创建临时 seq 对象（和相关的 GC）

生成的代码可能类似于：

```
(defn intersect-sorted-vector [x y]
  (loop [i (long 0), j (long 0), r (transient [])]
    (let [xi (nth x i nil), yj (nth y j nil)]
      (cond 
        (not (and xi yj)) (persistent! r)
        (< xi yj) (recur (inc i) j r)
        (> xi yj) (recur i (inc j) r)
        :else (recur (inc i) (inc j) (conj! r xi))))))

(time (count (intersect-sorted-vector x y)))
=> "Elapsed time: 5.143687 msecs"
=> 40258 
```

如您所见，这可能会给您额外的 6-8 倍加速或大约。

# c# - WCF 中的 endPointBehavior 中的任何内容都取消了元数据公开吗？

> ID：14160835
> 
> 赞同：0
> 
> 时间：2013-01-04T16:22:22.437
> 
> 标签：c#, wcf, web-services, web-config

这是我的 web.config 文件：

```
<bindings>
  <basicHttpBinding>
    <binding 
      name="ExtremeBinding" 
      maxBufferSize="12354000" 
      maxReceivedMessageSize="12354000" />
  </basicHttpBinding>
</bindings>

<services>
  <service name="WcfService3.Service1" behaviorConfiguration="myServiceBehaviour">
    <endpoint 
      address="" 
      binding="basicHttpBinding" 
      bindingConfiguration="ExtremeBinding"
      contract="WcfService3.IService1" 
      behaviorConfiguration="epBehavior"/>
  </service>
</services>

<behaviors>
  <endpointBehaviors>
    <behavior name="epBehavior">

    </behavior>
  </endpointBehaviors>
  <serviceBehaviors>
    <behavior name="myServiceBehaviour">
      <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpGetEnabled="true"/>
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" /> 
```

如果我保持这样，并运行 WCF 测试客户端，一切正常。

但是，如果我在 endPoint Behavior 中添加任何内容，例如：

```
 <behavior name="epBehavior">
      <callbackDebug includeExceptionDetailInFaults="true"/>
    </behavior> 
```

WCF 测试客户端失败并出现错误：

```
Failed to add a service. Service metadata may not be accessible. Make sure your service is running and exposing metadata. 
```

似乎我在 . 例如：

```
<behavior name="epBehavior">
    <webHttp/>
</behavior> 
```

我很清楚我错过了一些基本的东西，但我不知道它是什么。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:02:59.183

I don't know the exact reason why this happens, but I think you can fix this by adding a serviceMetadata behavior:

```
<behaviors>
 <serviceBehaviors>
  <behavior name="NewBehavior">
    <serviceMetadata httpsGetEnabled="true" 
     httpsGetUrl="https://myComputerName/myEndpoint" />
  </behavior>
 </serviceBehaviors>
</behaviors> 
```

This is from: [http://msdn.microsoft.com/en-us/library/ms731317.aspx](http://msdn.microsoft.com/en-us/library/ms731317.aspx)

# extjs - sencha 命令不创建压缩 js

> ID：14160836
> 
> 赞同：2
> 
> 时间：2013-01-04T16:22:22.800
> 
> 标签：extjs, extjs4

我正在尝试使用 sencha v2.0.0 Beta 3 来创建我的脚本的压缩版本。

我有一个名为 mdisp.html 的文件，其中包含对 ExtJS 脚本的以下引用：

```
<script src="scripts/stores.js" type="text/javascript"></script>
<script src="scripts/menus.js" type="text/javascript"></script>
<script src="scripts/parts.js" type="text/javascript"></script>
<script src="scripts/user.js" type="text/javascript"></script> 
```

我正在使用以下命令来创建压缩脚本：

```
sencha create jsb -a http://localhost:8100/display/mdisp.html -p mdisp.jsb3 -v 
```

和

```
sencha build -p mdisp.jsb3 -d . -v 
```

似乎正在发生的事情是生成的任何一个 js 文件中都没有任何内容！

我在这里错过了什么吗？有什么我需要改变才能让它工作吗？？？

有人请指教...

# html - 成本和收益一行html

> ID：14160839
> 
> 赞同：1
> 
> 时间：2013-01-04T16:22:28.857
> 
> 标签：html, optimization

有人可以告诉我为什么（或不）我们创建一行 html 的原因吗？

我知道只是减少文件大小（好处），但是在服务器中我们必须添加一些函数来生成一行 html（服务器成本），否则当我们需要更改一些代码时我们会遇到麻烦（编辑成本）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:02:08.413

You don't manually create HTML like that. Personally, my CMS caches it's output as static files to be served to the user. Before it caches, it runs:

$tocache is the contents of the page to be displayed. I do this, then write it to disk. Apache then serves the static content instead avoiding the DB and PHP on subsequent access.

```
// Remove white space
$tocache = str_replace(array("\n", "\t","\r")," ",$tocache);

// Remove unnecessary closing tags (I know </p> could be here, but it caused problems for me)
$tocache = str_replace(array("</option>","</td>","</tr>","</th>","</dt>","</dd>","</li>","</body>","</html>"),"",$tocache);

// remove ' or " around attributes that don't have spaces
$tocache = preg_replace('/(href|src|id|class|name|type|rel|sizes|lang|title|itemtype|itemprop)=(\"|\')([^\"\'\`=<>\s]+)(\"|\')/i', '$1=$3', $tocache);

// Turn any repeated white space into one space
$tocache = preg_replace('!\s+!', ' ', $tocache); 
```

Now, I run that once per page change, then serve up the smaller HTML to users.

This is pretty much pointless though, as the process of gzipping makes the biggest difference. I do it because I might as well – I already am caching these files, so why not make myself feel clever first!

For CSS and JS I use SASS's compressed option, and uglifyJS to get those as one small file.

That means on a page I have 1 HTML file, 1 CSS and 1 JS, minimising the number of HTTP reqs and the amount of data to be transmitted.

Gzip + ensuring 1 css and 1 js is the biggest savings though.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:54:22.480

你不应该缩小你的 HTML。编辑时不值得花时间和工作。看看这个非常好的[答案](https://stackoverflow.com/a/1102101/1941910)。
不过，您应该优化您的 CSS。有一个免费程序：[**Scout**](http://mhs.github.com/scout-app/)，它会检查您的 css 文件的更改并自动创建它的缩小版本。它实现了[**Sass**](http://sass-lang.com/)，这将使编写 CSS 变得更加容易。你应该试试看。

# php - 提交表单时从 URL 中删除 %5B%5D

> ID：14160843
> 
> 赞同：8
> 
> 时间：2013-01-04T16:22:40.920
> 
> 标签：php, html, forms, rewrite

当我提交包含多个具有相同名称的复选框的表单时，我得到一个如下所示的 URL：www.mysite.com/search.php?myvalue%5B%5D=value1&myvalue%5B%5D=value2

有什么方法可以删除 %5B%5D 以使 URL “漂亮”，例如 htaccess？

代码：

```
<form>
     <input type="checkbox" name="myvalue[]" value="value1">
     <input type="checkbox" name="myvalue[]" value="value2">
</form> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-04T16:41:06.700

> *有什么方法可以删除 %5B%5D 以使 URL “漂亮”，例如 htaccess？*

不。`[]`是 URL 中的[保留字符](http://en.wikipedia.org/wiki/Percent-encoding#Types_of_URI_characters)，因此它们肯定需要进行[URL 编码](http://en.wikipedia.org/wiki/Percent-encoding)。

如果使用 POST 不是一个选项，考虑到它是一个搜索表单，这是有道理的，你最好的选择是给它们每个不同的名称，值为 1 左右。

```
<form>
    <input type="checkbox" name="option1" value="1" />
    <input type="checkbox" name="option2" value="1" />
</form> 
```

`[]`或者，如果您真的坚持它们具有相同的名称，那么您应该自己提取查询字符串，而不是在获取名称中带有后缀的参数时依赖于返回数组的 PHP 特定功能。

```
$params = explode('&', $_SERVER['QUERY_STRING']);

foreach ($params as $param) {
    $name_value = explode('=', $param);
    $name = $name_value[0];
    $value = $name_value[1];
    // ... Collect them yourself.
} 
```

这样您就可以继续使用无括号的名称。

```
<form>
    <input type="checkbox" name="option" value="option1" />
    <input type="checkbox" name="option" value="option2" />
</form> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T16:53:51.963

`[`并且`]`是 URL 中的保留字符，因此浏览器必须对它们进行编码才能使 URL 正常工作。URL 中不能包含这些字符。您也不能有任何其他保留字符，例如空格、& 号等。它们都会自动为您编码（在许多情况下，即使您在浏览器中手动键入 URL）。

如果您需要一个“漂亮的 URL”，您可以：

1.  根本不使用表格；提供一个指向已知“漂亮”URL 的链接。

2.  接受丑陋的 URL，但立即将其重定向到上面第 1 点中的漂亮 URL。

3.  避免在字段名称中使用尖括号（但这也意味着对后端代码进行大量更改）

4.  在表单上使用一种`POST`方法，以便字段数据根本不会显示在 URL 上（但这意味着您没有用户可以添加书签的链接）。

如果你必须“美化”这个 URL，我的建议是上面的选项 2。

不过，坦率地说，我不会担心。人们对“漂亮”的 URL 感到压力很大。我真的不明白为什么。

*   我认识的很少有人真正输入比域名更长的 URL。
*   如果您为此担心 SEO，请不要 - 搜索引擎机器人知道 ULR 编码是什么，并且可以忽略它。
*   The only other reason for wanting a "pretty" URL is so that it looks good if users share it via an email link or something. To be honest, if you're worried about URL prettyness for that and it's got form fields in it then it's already too ugly, with just the `&` and `=` signs all over the place. The encoded brackets really don't make it any worse.

So my honest answer is: don't sweat it. It's normal; ignore it; get on with more important parts of your web development work.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-08T11:54:53.197

If that is really a problem for you, how about "merging" everything into a single param using some kind of separator like `,` (or whatever you want). So, instead of having a URI like `myvalue%5B%5D=value1&myvalue%5B%5D=value2`, you would end up with a URI like `myvalue=value1,value2`.

This is just an idea, don't have the code right now, but you will need to do it with JS, and parse the param value on your backend (in order to have an array).

# android - Robospice：找不到 CachedSpiceReques.getSpiceRequest

> ID：14160844
> 
> 赞同：1
> 
> 时间：2013-01-04T16:22:47.303
> 
> 标签：android, rest, robospice

我只是尝试将 robospice 框架[https://github.com/octo-online/robospice](https://github.com/octo-online/robospice)集成到我的 android 应用程序中。我没有使用 maven，所以我按照此线程[https://github.com/octo-online/robospice/issues/17](https://github.com/octo-online/robospice/issues/17)中建议的步骤以“非 maven”样式运行它，其中我包含了在步骤中生成的库并将其包含在我的 android 项目中：robospice-1.3.2-SNAPSHOT.jar 等等

一切似乎都工作得很好，但是在发送 REST 调用后它崩溃了，崩溃了：

```
01-04 16:42:43.164: E/AndroidRuntime(2369): FATAL EXCEPTION: Thread-8
01-04 16:42:43.164: E/AndroidRuntime(2369): java.lang.NoSuchMethodError:com.octo.android.robospice.request.CachedSpiceRequest.getSpiceRequest
01-04 16:42:43.164: E/AndroidRuntime(2369):     at com.octo.android.robospice.SpringAndroidSpiceService.addRequest(SpringAndroidSpiceService.java:35)
01-04 16:42:43.164: E/AndroidRuntime(2369):     at com.octo.android.robospice.SpiceManager.run(SpiceManager.java:179)
01-04 16:42:43.164: E/AndroidRuntime(2369):     at java.lang.Thread.run(Thread.java:1096) 
```

所以在我看来，我没有正确的框架文件，因此缺少 CachedSpiceRequest.getSpiceRequest 。

有谁知道这个问题可能来自哪里？也许有人有解决方案或知道哪个版本的框架工作得很好，因为 github 站点上只有一个简短的教程似乎已经过时了。

我感谢任何帮助。

迈克

*更新* 这是我的服务：

```
public class TractiveJSONSpiceService extends JacksonSpringAndroidSpiceService {
 /** Timeout when calling a web service (in ms). */
private static final int WEBSERVICES_TIMEOUT = 30000;

@Override
public RestTemplate createRestTemplate() {
    RestTemplate restTemplate = super.createRestTemplate();

    HttpComponentsClientHttpRequestFactory httpRequestFactory = new HttpComponentsClientHttpRequestFactory();
    httpRequestFactory.setReadTimeout( WEBSERVICES_TIMEOUT );
    httpRequestFactory.setConnectTimeout( WEBSERVICES_TIMEOUT );
    restTemplate.setRequestFactory( httpRequestFactory );

    return restTemplate;
} 
```

该请求与推文示例中的请求相同：

```
public class TweetsRequest extends SpringAndroidSpiceRequest< ListTweets > {

private String keyword;

public TweetsRequest( String keyword ) {
    super( ListTweets.class );
    this.keyword = keyword;
}

@Override
public ListTweets loadDataFromNetwork() throws Exception {

    // With Uri.Builder class we can build our url is a safe manner
    Uri.Builder uriBuilder = Uri.parse( "http://search.twitter.com/search.json" ).buildUpon();
    uriBuilder.appendQueryParameter( "q", keyword );
    uriBuilder.appendQueryParameter( "rpp", "100" );
    uriBuilder.appendQueryParameter( "lang", "en" );

    String url = uriBuilder.build().toString();

    return getRestTemplate().getForObject( url, ListTweets.class );
}

/**
 * This method generates a unique cache key for this request. In this case our cache key depends just on the
 * keyword.
 * 
 * @return
 */
public String createCacheKey() {
    return "tweets." + keyword;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T07:06:04.733

当您使用 SpringAndroidSpiceService 或其任何子类时，您应该使用 SpringAndroidSpiceRequest。这些请求在执行时将从服务接收 Spring Android 休息模板。

# objective-c - searchBar:shouldChangeTextInRange:replacementText 未调用

> ID：14160846
> 
> 赞同：0
> 
> 时间：2013-01-04T16:22:51.353
> 
> 标签：objective-c, ios, iphone-developer-program

searchBar *:shouldChangeTextInRange:replacementText*从未调用过。定义了委托，方法 - **searchBarShouldBeginEditing:**和**searchBarTextDidBeginEditing** : 工作正常， 但未调用**shouldChangeTextInRange**。我发现当在使用**alertview**的方法中设置时，并且在我尝试使用搜索栏之后..调用 shouldChangeTextInRange ......但之前没有

```
-(void) searchBarTextDidBeginEditing:(UISearchBar *)searchBar {
     }

- (BOOL)searchBarShouldBeginEditing:(UISearchBar *)searchBar
{
 return YES;
}

-(BOOL)searchBar:(UISearchBar *)searchBar shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
 return YES;
}

-(BOOL)searchBarShouldEndEditing:(UISearchBar *)searchBar {
return  YES;
 }

 -(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText {

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:35:36.307

我错过了 appDelegate ，***applicationDidFinishLauching下面的代码***

```
 self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
[self.window makeKeyAndVisible]; 
```

现在 SearchBar 工作正常！

# c# - 从 http 地址读取 XML 文件

> ID：14160848
> 
> 赞同：10
> 
> 时间：2013-01-04T16:22:52.540
> 
> 标签：c#, asp.net, xml, stream

我需要使用 c#/.net 从如下来源读取 xml 文件：`https://10.1.12.15/xmldata?item=all`

那基本上只是一个xml文件。

StreamReader 不喜欢这样。

阅读该链接内容的最佳方式是什么？

该文件如下所示：

```
- <RIMP>
     - <HSI>
       <SBSN>CZ325000123</SBSN> 
       <SPN>ProLiant DL380p Gen8</SPN> 
       <UUID>BBBBBBGGGGHHHJJJJ</UUID> 
       <SP>1</SP> 
       <cUUID>0000-000-222-22222-333333333333</cUUID> 
- <VIRTUAL>... 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-04T16:25:32.423

您需要使用[LINQ to XML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)来处理 XML 文件。[XDocument.Load 方法](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.load.aspx)支持从URI 加载 XML 文档：

```
var document = XDocument.Load("https://10.1.12.15/xmldata?item=all"); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-04T16:36:16.877

另一种方法是使用`XmlDocument`类。世界各地的许多服务器仍在运行 .Net Framework < 3.0，因此很高兴知道此类仍然存在`XDocument`，以防您正在开发将在服务器上运行的应用程序。

```
string url = @"https://10.1.12.15/xmldata?item=all";
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.Load(url); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-16T22:38:24.893

也许正确的答案必须从阅读有关如何“从 URL（或者在本例中从 Http 地址）读取 XML 文件”的初始问题开始。

我认为这对您来说是最好的，请看下一个简单的演示：

（在这种情况下 XmlTextReader 但今天您可以使用 XmlReader 而不是 XmlTextReader） [http://support.microsoft.com/en-us/kb/307643](http://support.microsoft.com/en-us/kb/307643)

（平行您也可以阅读此文档）。 [https://msdn.microsoft.com/en-us/library/system.xml.xmlreader(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.xml.xmlreader(v=vs.110).aspx)

问候

# unix - 在运行时更新/刷新进程的 gid

> ID：14160856
> 
> 赞同：1
> 
> 时间：2013-01-04T16:23:13.990
> 
> 标签：unix, process

是否有可能“刷新” Unix 中正在运行的进程的 gid 信息？如果已使用新用户更新了 gid，是否可以使在该 gid 下运行的进程知道更改，而无需重新启动进程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:32:40.167

不，这不对。进程启动时会读取 uid/gid，进程将保留相同的信息。如果用户/组权限在此过程中发生变化，则该过程将 ie。尝试写入文件系统时遇到问题。

更新 gid 的唯一方法是重新启动进程。

# linux - Linux Expect SFTP + put 文件

> ID：14160859
> 
> 赞同：1
> 
> 时间：2013-01-04T16:23:18.947
> 
> 标签：linux, upload, sftp, expect, put

我刚刚在使用**Expect的****SFTP**连接期间自动输入密码方面获得了一些帮助。

 **然后我尝试发出一个 put 命令，事情又变得复杂起来。我正在使用以下代码：

```
#!/usr/bin/expect
#!/bin/sh

expect -c "
spawn sftp remoteuser@*.*.*.*
expect \"remoteuser@*.*.*.*'s password:\"
send \"passwrd\r\"
interact "

echo "put output/data.xml\r"
echo "quit\r" 
```

我的密码输入和与远程服务器的连接工作正常，但我很难让*put output/data.xml*命令在 SFTP 提示符下显示和执行。

我的**echo "put output/data.xml\r"**和**echo "quit\r"**行只是打印为文本，这并不完全令人惊讶，但我真的不知道还有什么可能起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T18:49:29.473

我知道您需要一些帮助，但您至少应该尝试阅读。当您说 时`expect -c 'some stuff ...'`，您将*整个*期望脚本指定为`-c`选项的参数。之后，Expect 会话将不存在。

此外，尝试了解`interact`命令的作用，而不是盲目地应用某人的建议。

无论如何，解决方案：

```
expect  <<'END_EXPECT'
set timeout -1
spawn sftp remoteuser@1.2.3.4
expect "[Pp]assword:"
send "passwrd\r"
expect "whatever the sftp prompt looks like"
send "put output/data.xml\r"
expect "whatever the sftp prompt looks like"
send "quit\r"
expect eof
END_EXPECT 
```

请注意，当您第一次看到 here-doc 分隔符时，它会被引用。这样，您将不会受到任何外壳扩展的影响。就像整个 here-doc 都是单引号的。**

# directx - 为什么我的像素没有被近/远平面裁剪

> ID：14160861
> 
> 赞同：1
> 
> 时间：2013-01-04T16:23:27.127
> 
> 标签：directx, directx-10

我有一个非常奇怪的问题。我使用 D3D10 在场景中渲染了一些三角形，令人惊讶的是，这些像素的颜色值并未针对近/远平面进行裁剪。另一方面，深度值似乎被裁剪得很好。正如我刚才所描述的那样有效的证据如下：

*   当我在“内”视锥体的 z 范围内渲染对象时，一切都很好
*   当一个物体在 z 范围内并且一个物体在它前面（在相机的眼睛和近平面之间）时，z 范围内的物体会“透过”更近的物体。所以 z-buffering 工作得很好
*   我还检查了输出 VS 顶点值；所有在 z 范围之外并且应该被剪裁的顶点（它们在 z 缓冲区中但不在颜色缓冲区中）的 Z/W 值在 [0, 1] 区间之外

想法想法什么可能是错的？我认为这可能是一些渲染状态设置不正确，但我真的不知道在哪里看。

# javascript - 更改样式属性的正确“浏览器兼容”方式是什么？

> ID：14160867
> 
> 赞同：-1
> 
> 时间：2013-01-04T16:23:31.260
> 
> 标签：javascript, dom

以下代码不起作用，它会提醒正确的值，但不会更改`style="display: none;"`为`style="display: block;"`

```
function toggleZoomImage(id, state){
    alert(id);
    alert(state);
    if(state == 'open'){
        document.getElementById(id).style.display == "block";
    } else {
        document.getElementById(id).style.display == "none";
    }   
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T16:25:21.410

```
function toggleZoomImage(id, state){
    alert(id);
    alert(state);
    if(state == 'open'){
        document.getElementById(id).style.display = "block";
    } else {
        document.getElementById(id).style.display = "none";
    }   
} 
```

失去那些是比较运算符的双等号。单身是分配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T16:25:35.917

您使用了错误的运算符 - 使用“=”而不是“==”。第一个是分配，这是你想要的。第二个是比较，在您的代码中没有做任何事情。

# css - 不同浏览器上元素的位置略有不同？

> ID：14160868
> 
> 赞同：1
> 
> 时间：2013-01-04T16:23:34.543
> 
> 标签：css, cross-browser, height

在我的网站上，我的#header 和#nav 的高度在chrome/safari 和firefox 中看起来不同，我有一个重置的css，并且一直在努力找出这种微小但非常烦人的差异的原因。也许我需要别人的新眼睛来帮助我看到它。

[http://kimcolemanprojects.com/index.html](http://kimcolemanprojects.com/index.html)

任何想法都非常感谢。

安吉拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:39:44.567

浏览器自动添加边距和内边距

尝试将以下代码添加到您的 CSS：

```
body {
   margin: 0px;
   padding: 0px;
}

h1 {
   margin: 0px;
   padding: 0px;
} 
```

顺便说一下，为每个`h`标签添加
您的网站看起来很棒；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T16:48:33.737

我的猜测是您的媒体查询。Chrome 正在加载媒体查询，而 FireFox 没有。尝试将此添加到您的脑海中，看看它是否可以解决问题。

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

**我在 Firefox 中看到了这个**

```
#header {
    line-height: 24px;
    margin: 8px 20px;
    position: fixed;
    width: 50%;
} 
```

**而这在 Chrome**

```
@media only screen and (min-width: 701px)
#header {
position: fixed;
width: 50%;
margin: 8px 20px;
line-height: 24px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T17:00:19.753

您的重置样式表应该在您的主样式表之前。

只需交换它们，看看是否有帮助。

# cordova - Phonegap jQuery Mobile 应用程序遇到随机重定向

> ID：14160870
> 
> 赞同：1
> 
> 时间：2013-01-04T16:23:46.577
> 
> 标签：cordova, jquery-mobile, phonegap-plugins

我有一个使用原生[标签栏](https://github.com/AndiDog/phonegap-ios-tabbar-plugin)和[导航栏](https://github.com/AndiDog/phonegap-ios-navigationbar-plugin)插件以及 jQuery Mobile 的 Phonegap 2.2 应用程序。我通常在浏览我的应用程序时没有问题，尽管在某些情况下我会打开一个页面，但很快就会被重定向回上一页。

我怀疑标签栏或 jQuery Mobile 代码（或者更有可能是它们的交集）是造成此错误的原因。我有一个多页模板，在 jQuery Mobile 的术语中，并且正在以编程方式进行导航，如下所示：

```
$.mobile.changePage('#page-id') 
```

本机标签栏项目的配置如下：

```
plugins.tabBar.createItem("contact", "Unused, iOS replaces this text by Contacts", "tabButton:Contacts", {onSelect: function() {
  $.mobile.changePage('#contact')
  plugins.navigationBar.setTitle("Contacts")
}}) 
```

我正在收听 jQuery Mobile`pageshow`和`pagehide`事件，并且页面转换对于所有页面更改都正常触发，因此看起来原始页面正在正常加载。当然，我只是不知道*为什么*要更改第二页，回到原始页面。

我怀疑选项卡按钮`onSelect`回调再次被触发，因为问题似乎主要是当我从带有随附选项卡栏项目的页面转到没有的页面时，只是为了被重定向回来。

有没有人遇到过这个？jQuery Mobile 中是否还有其他挂钩可以用来监控页面状态和状态变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T11:39:03.290

我有完全一样的问题。这不是一个*phonegap*错误。

我在几种情况下使用*JQM ：* *phonegap*、web mobile 和 web。

我仅在一种特殊情况下在网络模式（没有*phonegap ）中检测到该错误。*

我们有一个网页闪屏，当所有内容通过*changePage*初始化到我们的主页时，它就会消失。

当更改太快时（这就是为什么我认为它只出现在桌面上），我们也有你的随机错误（20%）。*JQM*返回上一页 ( *splashscreen* ) 并且不启动*pagebeforechange*事件。

似乎唯一可行的方法是使用`setTimeout()`2s （这是巨大的）来延迟更改页面。

如果有人有解释...

提前谢谢。

# c - C 编程错误处理

> ID：14160873
> 
> 赞同：5
> 
> 时间：2013-01-04T16:24:01.973
> 
> 标签：c, error-handling, pthreads

我希望我的代码能够处理错误情况，例如函数返回不成功。例如`pthread_create`，通常我使用下面的函数：

```
int thread_check1;
 pthread_t function;
 thread_check1 = pthread_create( &function, NULL, function_function,  NULL);
if(thread_check1 != 0){
   fprintf(stderr, "pthread_create error\n");
   exit(1);
} 
```

考虑到错误情况，调用相同的函数直到它返回 0（对于这个特定函数）是否正确，如下所示？

```
thread_check1 = pthread_create( &function, NULL, function_function,  NULL);
while(thread_check1 != 0){
    thread_check1 = pthread_create( &function, NULL, function_function,  NULL);
} 
```

我可以将相同的逻辑应用于返回值的其他 C 函数吗？否则，您将如何建议在不退出程序的情况下处理错误情况（对于函数返回）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T16:35:26.850

你*可以*这样做，但更正确。假设有一个函数`f`具有不同的返回值。您可以执行以下操作：

```
tries_left = 1000;
do
{
    ret = f(params);
    if (ret == OK)
        break;
    else if (ret == SOMETHING_UNRECOVERABLE)
        /* break with failure */
    else if (ret == SOMETHING_FIXABLE)
        /* fix params */
    else
        /* sleep a little */
} while (--tries_left); 
```

这里有很多事情需要考虑：

*   *避免无限循环*。如果存在本质上的错误，您就不想陷入循环。所以经过一些尝试，你会想要打破和失败。这就是`tries_left`发挥作用的地方。
*   *如果无法恢复则失败*。如果错误告诉您问题无法解决，请停止尝试。例如，如果您尝试安装一个驱动器并且它告诉您`/dev/sda6`不存在，那么重试是没有意义的。
*   *尝试实际处理问题*。在某些情况下，您可以尝试不同的参数。例如，如果您尝试创建备份文件但不能，您可以尝试更改文件的目录或名称，然后重试。
*   *不要使用 100% CPU*。如果您想重试，至少在尝试之间留出一些喘息的空间，以解决任何问题，或者至少避免使用最大 CPU。

最后，如果您有不同的功能需要像这样处理，为了避免重复自己，您可以将整个事情放在一个宏中并调用它`CHECK_AND_RETRY(f(params));`，假设可以理解什么返回值是不可恢复的，什么是可修复的无论功能如何（有点限制，但没有漂亮的解决方案）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T16:29:20.380

正如乔已经提到的，这在很大程度上取决于您的要求和您要使用的方法。每当某事失败时，通常都是有原因的。例如，如果`malloc`返回零，则没有更多可用内存。

在这种情况下尝试获取新内存而不实际使用`free`通常会导致无限循环，所以这是你不应该做的事情。另一方面，当您想打开一个文件但它当前被另一个进程阻止时，您可以执行类似的操作。

但是，请记住，这样的循环通常会使 CPU 保持忙碌并减慢其他进程/线程的速度。您也可以在当前解决方案之间使用一个东西，并在退出之前尝试几次：

```
error_count = 0;
thread_check1 = pthread_create( &function, NULL, function_function,  NULL);
while(thread_check1 != 0){
    sleep(1); // wait some time before we try again
    if(++error_count == 10){
        fprintf(stderr, "Could not create thread\n");
        return 1;
    }
    thread_check1 = pthread_create( &function, NULL, function_function,  NULL);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T16:30:54.037

我绝对不建议处理这样的错误。如果出现真正的问题，您将陷入无限循环。一个示例是在文件已在使用时打开它。我会说您应该执行以下操作之一：

*   打印/记录错误并停止执行。

*   允许某些错误（在 if 中添加 &&），此示例仅在错误代码为 3 时重试

    > 如果（thread_check1！= 0）{

    ```
     If (thread_check1 == 3) retry; 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T16:31:23.867

发生故障时应该做什么完全取决于您的要求。通常它取决于错误的类型（致命的、可接受的等）以及它对程序的影响。回到您的示例，未能创建线程可能应该被视为致命错误，因为阻止它创建的问题很可能不会在第二次或第三次尝试时消失（再次，这取决于您的要求和环境）因此不循环是这里可能是更好的方法。再一次，在失败的情况下你是否想退出程序取决于你——你的程序可以在没有这个线程的情况下继续运行吗？如果是，则无需终止程序。否则 - 终止。

# python - 为已被覆盖的 ModelForms 设置“required=True”

> ID：14160876
> 
> 赞同：0
> 
> 时间：2013-01-04T16:24:15.533
> 
> 标签：python, django, django-forms

假设我必须覆盖`ModelForm`(in `forms.py`) 以设置`labels`或`widgets`不同。IE：

```
class SomeForm(ModelForm):
    def __init__(self,*args,**kwargs):
        super(someForm, self).__init__(*args, **kwargs)
            self.fields['someVal'].label = ...
            self.fields['someVal'].widget = ... 
```

那我该如何设置`required=True`呢？

我知道我可以在这样之前做到这`__init__`一点：

```
class SomeForm(ModelForm):
    someVal = CharField(required=True)  # << here
    def __init__(self,*args,**kwargs):
        super(someForm, self).__init__(*args, **kwargs)
            self.fields['someVal'].label = ...
            self.fields['someVal'].widget = ... 
```

但我正在做一些动态的东西，我想在`__init__`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:30:01.197

您需要覆盖表单中的字段。只需使用与模型中相同的字段名称：

```
class SomeForm(forms.ModelForm):
    field_a = forms.CharField(
        'My new label', max_length=30, required=True)  # << here

    def __init__(self,*args,**kwargs):
        super(someForm, self).__init__(*args, **kwargs)

    class Meta:
        model = MyModel 
```

*为什么采用这种方法？*

我认为如果您想覆盖许多属性，例如，，通过定义新字段直接覆盖字段是一个好`required`方法`label``widget`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T16:29:47.313

```
self.fields['someVal'].required = True 
```

是的，就这么简单:) 你的字段字典中的类具有相同的属性

# windows - 在 Windows 中从旧源安装包的早期版本

> ID：14160878
> 
> 赞同：2
> 
> 时间：2013-01-04T16:24:31.230
> 
> 标签：windows, r, installation, package

> **可能重复：**
> [如何从源代码安装 R 包？](https://stackoverflow.com/questions/1474081/how-do-i-install-an-r-package-from-source)

如何使用“旧资源”中提供的 .gz 文件来创建 R 本地安装所需的 .zip 文件？

# sql - SQL：具有多个根/父级的分层查询

> ID：14160882
> 
> 赞同：2
> 
> 时间：2013-01-04T16:24:41.743
> 
> 标签：sql, oracle

我有一个表格，描述了以树状结构组织的元素：

```
ID, PARENT_ID, NAME  
0   null       TOP  
1   0          A  
2   0          B  
3   0          C  
4   1          AA  
5   2          BA 
6   3          CA  
7   6          CAA
... 
```

此层次结构中可以有许多级别。

假设有一个元素列表（比如 ID 2 和 3），我想从表中获取所有子记录。

像这样的东西：

```
select *
from MY_TABLE 
start with PARENT_ID in (2,3)
connect by PARENT_ID = prior ID 
```

将返回：

```
ID, PARENT_ID, NAME 
5   2          BA
6   3          CA
7   6          CAA 
```

但是，我希望将每个输出记录映射到列表 (2,3) 中的原始父项，以便输出如下所示：

```
ORIGINAL_PARENT_ID, ID, PARENT_ID, NAME 
2                   5   2          BA
3                   6   3          CA
3                   7   6          CAA 
```

如何做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T16:49:49.317

`connect_by_root`可能是你所追求的？

```
SQL> select t.*, connect_by_root parent_id as ORIGINAL_PARENT_ID
  2  from MY_TABLE  t
  3  start with PARENT_ID in (2,3)
  4  connect by PARENT_ID = prior ID
  5  /

        ID  PARENT_ID NAM ORIGINAL_PARENT_ID
---------- ---------- --- ------------------
         5          2 BA                   2
         6          3 CA                   3
         7          6 CAA                  3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:34:56.943

假设你的名字真的和你的名字一样，那么这个问题可以不用`connect by`. 您可以使用简单的字符串操作。

```
with ToFind (
    select 'C' as parent from dual union all
    select 'B' as parent from dual
   )
select t.*
from t join
     ToFind tf
     on t.name like tf.parent, 100)||'%' and t.name <> tf.parent 
```

# c# - 广播器重新启动时 C# UdpClient.Receive 如何工作？

> ID：14160885
> 
> 赞同：0
> 
> 时间：2013-01-04T16:25:02.380
> 
> 标签：c#, multicast, udpclient

我正在编写一个需要从硬件接收多播数据的应用程序。我让它工作正常。有时，在我的应用程序无法控制的情况下，正在广播的硬件会重新启动。我从阅读文档中了解到，该`UdpClient.Receive`方法将阻塞，直到它接收到数据。所以我假设当硬件重启时，这行代码会阻塞。最终，当硬件重新上线并再次广播时，我的应用程序应该在该行再次启动。这个对吗？我不明白什么吗？我在我的应用程序中看到的是这条线被阻塞并且它永远不会再次启动，即使在硬件重新启动后也是如此。这是一个代码片段。

```
IPAddress _groupAddress = IPAddress.Parse("172.16.20.1");
UdpClient _client = new UdpClient(7095);
IPEndPoint _ep = new IPEndPoint(_groupAddress, 7095);
_client.JoinMulticastGroup(_groupAddress);
bool _cancelled = false;

while (!_cancelled)
{
    byte[] _bytes = _client.Receive(ref _ep);

    ..process bytes..
} 
```

# android - Android Java：通过http POST发送数组中的数组？

> ID：14160886
> 
> 赞同：3
> 
> 时间：2013-01-04T16:25:04.963
> 
> 标签：android, post, request

我对 android 上的 http POST 请求有疑问。

主要目的是发送一个“字典中的字典”，在 API 中它看起来像

array('make_event'=>array(event_name'=>'测试事件','event_start'=>'2012-12-01 10:00:00','event_end'=>'2012-12-02 10:00 :00','host'=>10001001000,'is_global'=>0,'place_name'=>'Vasya\'s Appartments','place_id'=>666666666,'lat'=>49.00003,'long'=> 54.30001,'受邀'=>'135,1002541,21231,32321'))

这是我对请求的实现

```
List<BasicNameValuePair> pairs = new ArrayList<BasicNameValuePair>();
Bundle bndl = new Bundle();

bndl.putString("event_name","New Test Event");
bndl.putString("event_start", "2013-01-04 10:12:09");
bndl.putString("event_end", "2013-02-04 12:12:09");
bndl.putLong("host", 100003017925182L);
bndl.putInt("is_global", 1);
bndl.putString("place_name","Some PLace");
bndl.putString("place_id", "42cc7080f964a520e9251fe3");
bndl.putDouble("lat", 37.78573590563453);
bndl.putDouble("long", -122.40610713227913);
bndl.putString("invited","100000879281531");

String tmpStr = bndl.toString();

tmpStr = tmpStr.replace("Bundle", "");
pairs.add(new BasicNameValuePair("make_event", tmpStr));

post.setEntity(new UrlEncodedFormEntity(pairs));

Log.v("My Post", "" + pairs.toString());

//HttpResponce
HttpResponse response = client.execute(post); 
```

我的任务是发送一个 http POST 并接收一个 JSON 响应。

所以我的问题是：我做得还好吗，还是有另一种方法可以通过 http POST 在数组中发送数组？

* * *

已解决问题的答案是： [Java Android: How to make complex POST requests to API?](https://stackoverflow.com/questions/14169634/java-android-how-to-make-complex-post-requests-to-api)

# sql - 如何从多个表 SQL 中查询数据范围和信息？

> ID：14160891
> 
> 赞同：0
> 
> 时间：2013-01-04T16:25:18.743
> 
> 标签：sql, range

我有两张桌子——一张用于 Jobs，另一张用于 Connections。一份工作可以有很多联系。Connetion 的 PK 是 connid + timestamp，它有一个外键（JOBID）指向 Job 的 JOBID。

```
JOBID  | NAME
-------+-------
  id1  | Name of Job 1
  id2  | Job 2's Name

CONNID | TIMESTAMP | JOBID | AMOUNT
-------+-------+--------+----------
012    |  doesn't  |  id1  | 11
012    |  matter   |  id1  | 15
012    |           |  id1  | 20
012    |           |  id1  | 30
020    |           |  id1  | 2
020    |           |  id1  | 5
549    |           |  id2  | 19
549    |           |  id2  | 30
549    |           |  id2  | 50
549    |           |  id2  | 57
549    |           |  id2  | 60 
```

所以我想要做的是，从连接表中，获取每个作业的每个连接的范围的总和。所以对于job-id1，我想要（30-11）+（5-2），即22，对于job-id2，我想要（60-19），即41。现在我可以弄清楚如何做最大值减去最小值对于每个连接...

```
SELECT 
   CONNID ,
   MAX(AMOUNT) - MIN(AMOUNT) AS range
FROM Connection 
GROUP BY CONNID 
```

...但我对 sql 还不够熟悉，无法弄清楚我还需要什么（就像几年前我在大学里上过一门数据库课一样）。除此之外，我希望它按作业名称排序，因为我必须从作业表中获取它，所以我确信这会增加一个完整的“另一层复杂性”。

基本上，我希望结果集看起来像

```
NAME          | range
--------------+------
Name of Job 1 |  22
Job 2's Name  |  41 
```

最后，我希望能够在最后 24 小时内执行此操作，但这应该只是在其中添加一个 WHERE 子句，这应该非常简单。

我希望的答案将包含一个查询，它只是对带有 JOBID 的 Connection 表的查询（所以不用担心答案第一部分的作业名称），然后是我实际正在寻找的查询这给了我上面的结果集，这样我就可以明确地看到到达那里所需的额外步骤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:29:35.847

你的思路是正确的，你只需要走得更远。

第一个 group by 需要按连接和工作。这将为您提供每项工作的个人范围。然后，您想在连接级别将它们组合在一起。您可以使用子查询来执行此操作：

```
select connid, SUM(range) as range
from (SELECT CONNID, jobid, MAX(AMOUNT) - MIN(AMOUNT) AS range
      FROM Connection 
      GROUP BY CONNID, jobid
     ) cj
group by connid 
```

如果您想要一份工作的总时间并按*工作*名称排序，请尝试以下操作：

```
select jobname, SUM(range) as range
from (SELECT CONNID, jobid, MAX(AMOUNT) - MIN(AMOUNT) AS range
      FROM Connection 
      GROUP BY CONNID, jobid
     ) cj join
     job j
     on j.jobid = cj.jobid
group by jobname 
```

这总结了连接中的工作以获取*范围*，然后将其相加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T16:30:59.543

你很近。这是一个两站过程：

1.  获取每个 CONNID+JOBID 的最大值/最小值
2.  然后得到每个JOBID的每个CONNID+JOBID的最小值/最大值之和

所以第1步：

```
SELECT 
   CONNID, JOBID
   MAX(AMOUNT) - MIN(AMOUNT) AS Range1
FROM Connection 
GROUP BY CONNID, JOBID 
```

然后步骤 2 获取步骤 1 的结果并进一步聚合它

```
SELECT JOBID, SUM([Range]) AS [Range]
FROM
(
    SELECT 
       CONNID, JOBID
       MAX(AMOUNT) - MIN(AMOUNT) AS [Range]
    FROM Connection 
    GROUP BY CONNID, JOBID
) AS t0
GROUP BY JOBID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T16:46:39.587

如果你想把它分开来理解，我用一个临时表来小计

```
 SELECT 
       JOBID
       , CONNID 
       , MAX(AMOUNT) - MIN(AMOUNT) AS range
       into #subtotal
    FROM Connection 
    --Where timestamp between "low" and "high"
    GROUP BY JOBID, CONNID 

    select * from #subtotal

    Select job.Name
           , sum(range) as range 
    from #subtotal inner join job on job.jobid = #subtotal.jobid 
    group by job.Name

    drop table #subtotal 
```

# visual-studio - NuGet 包管理器控制台无法加载 PowerShell

> ID：14160894
> 
> 赞同：5
> 
> 时间：2013-01-04T16:25:31.690
> 
> 标签：visual-studio, powershell, nuget

从 Windows 7 Pro 到 8 Pro 执行就地升级后，我无法让 NuGet 的包管理器控制台在 Visual Studio 2012 Pro 中运行。我收到的错误是：

```
The following error occurred while loading the extended type data file: Microsoft.PowerShell.Core, C:\WINDOWS\SysWOW64\WindowsPowerShell\v1.0\types.ps1xml(2977) : Error in type "System.Security.AccessControl.ObjectSecurity": Exception: The getter method should be public, non void, static, and have one parameter of type PSObject.
The following error occurred while loading the extended type data file: Microsoft.PowerShell.Core, C:\WINDOWS\SysWOW64\WindowsPowerShell\v1.0\types.ps1xml(2984) : Error in type "System.Security.AccessControl.ObjectSecurity": Exception: The getter method should be public, non void, static, and have one parameter of type PSObject.
The following error occurred while loading the extended type data file: Microsoft.PowerShell.Core, C:\WINDOWS\SysWOW64\WindowsPowerShell\v1.0\types.ps1xml(2991) : Error in type "System.Security.AccessControl.ObjectSecurity": Exception: The getter method should be public, non void, static, and have one parameter of type PSObject.
The following error occurred while loading the extended type data file: Microsoft.PowerShell.Core, C:\WINDOWS\SysWOW64\WindowsPowerShell\v1.0\types.ps1xml(2998) : Error in type "System.Security.AccessControl.ObjectSecurity": Exception: The getter method should be public, non void, static, and have one parameter of type PSObject.
The following error occurred while loading the extended type data file: Microsoft.PowerShell.Core, C:\WINDOWS\SysWOW64\WindowsPowerShell\v1.0\types.ps1xml(3005) : Error in type "System.Security.AccessControl.ObjectSecurity": Exception: The getter method should be public, non void, static, and have one parameter of type PSObject.
The term 'Get-ExecutionPolicy' is not recognized as the name of a cmdlet, function, script file, or operable program. Check the spelling of the name, or if a path was included, verify that the path is correct and try again. 
```

在过去的几天里，我一直在寻找解决此问题的方法，但一直空无一物。我已经尝试了所有这些都无济于事：

*   禁用所有 Visual Studio 附加组件
*   重置所有设置
*   重新安装 Visual Studio
*   修复 Visual Studio
*   在 Visual Studio 之前启动 PowerShell（这是否只是意味着启动 PowerShell，然后启动 Visual Studio？）
*   以管理员身份运行 PowerShell 和 Visual Studio
*   在安全模式下运行 Visual Studio
*   将 Power Shell ExecutionProperty 设置为不受限制

Visual Studio 一直表现出其他奇怪的行为，例如在尝试将 Click 事件添加到特定页面上的 XAML 时持续崩溃，因此我的直觉说这不是真正的 Power Shell 或 NuGet，而是我的 OS/Visual 的问题工作室。

除非有人有解决方案，否则我认为我只能对 Windows 8 进行全新安装并希望能够修复它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T22:26:08.230

我发现这个问题与您的问题非常相似：

[在 Windows 8 RTM 上的 .NET 应用程序中嵌入 Powershell v2.0](https://stackoverflow.com/questions/12638289/embedding-powershell-v2-0-in-net-app-on-windows-8-rtm)

你能尝试解决这个问题，看看它是否能解决问题吗？

# ember.js - 编译 ember 数据

> ID：14160898
> 
> 赞同：5
> 
> 时间：2013-01-04T16:25:37.283
> 
> 标签：ember.js, bundler, ember-data

在[ember-data 的自述文件中，](https://github.com/emberjs/data/blob/master/README.md)我发现了以下几行：

> **获取 ember-data：**
> 目前您必须自己构建 ember-data.js。克隆存储库，`bundle`然后运行`rake dist`。您将在`dist`目录中找到 ember-data.js。”

我有点困惑......“运行捆绑”是什么意思？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T16:36:29.870

这是一个红宝石。Bundler 是一个用于管理应用程序依赖关系的 ruby​​gem。bundle 命令用于安装 ember-data 项目所需的所有 ruby​​gem。尝试这个：

```
git clone git://github.com/emberjs/data.git
cd data
bundle install
rake 
```

如果缺少 bundle 命令，您需要安装 bundler gem：

`gem install bundler`

当然，您还需要拥有现代版本的 ruby​​ 和 ruby​​gems ;-)

有关捆绑器的更多信息，请参见[http://gembundler.com/](http://gembundler.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T16:32:45.560

`run bundle`意味着通过[Bundler](http://gembundler.com/)安装包依赖项，它将读取`Gemfile`并安装其中定义的依赖项。

要安装依赖项，请运行命令`bundle install`

# heroku - 如何修复heroku登台数据库的连接数

> ID：14160905
> 
> 赞同：1
> 
> 时间：2013-01-04T16:25:47.320
> 
> 标签：heroku

我正在使用 heroku 部署我的 Rails 2.3.6 应用程序。我正在为我的登台服务器使用生产数据库备份。但是当我使用此命令重新启动 heroku 时。

```
 heroku restart --app gentle-gorge-9319 
```

重新启动 heroku 后，当我重新启动应用程序主页时，我在 heroku 日志中有此消息

```
 remaining connection slots are reserved for non-replication 
           superuser   connections + heroku staging error 
```

我如何增加登台服务器的连接池。

任何帮助将不胜感激......

谢谢

# javascript - 删除名称中具有特定字符串的所有 cookie

> ID：14160907
> 
> 赞同：3
> 
> 时间：2013-01-04T16:25:55.807
> 
> 标签：javascript, cookies

我想在我的应用程序中删除一些 cookie。它们都是在应用程序本身中创建的。

在我的例子中，所有带有特殊字符串的 cookie 都应该被销毁。

目前我有以下代码来取消设置单个cookie：

```
var expires = new Date();
expires.setTime(expires.getTime() - 100);
document.cookie = name + '=' + value + '; expires=' + expires.toUTCString() + '; path=' + path + '; domain=' + domain; 
```

我的 cookie 名称都是这样的：cookiename_identifier 和所有带有 cookiename_ 的都应该被删除。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T17:08:18.513

你可以这样做：

```
// Get an array of cookies
var arrSplit = document.cookie.split(";");

for(var i = 0; i < arrSplit.length; i++)
{
    var cookie = arrSplit[i].trim();
    var cookieName = cookie.split("=")[0];

    // If the prefix of the cookie's name matches the one specified, remove it
    if(cookieName.indexOf("cookiename_") === 0) {

        // Remove the cookie
        document.cookie = cookieName + "=;expires=Thu, 01 Jan 1970 00:00:00 GMT";
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T17:07:07.937

```
// Get an array of all cookie names (the regex matches what we don't want)
var cookieNames = document.cookie.split(/=[^;]*(?:;\s*|$)/);

// Remove any that match the pattern
for (var i = 0; i < cookieNames.length; i++) {
    if (/^cookiename_/.test(cookieNames[i])) {
        document.cookie = cookieNames[i] + '=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=' + path;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-05T10:16:20.117

这对我来说非常有效。

```
function createCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    } else 
        var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function eraseCookie(name) {
    createCookie(name,"",-1);
}

var cookieNames = document.cookie.split(/=[^;]*(?:;\s*|$)/);
for (var i = 0; i < cookieNames.length; i++) {
    if (cookieNames[i].includes(pattern)) {
        eraseCookie(cookieNames[i]);
    }
} 
```

函数`eraseCookie`和`createCookie`取自这里[https://www.quirksmode.org/js/cookies.html](https://www.quirksmode.org/js/cookies.html)。希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-27T04:10:17.023

```
 document.cookie.split(";").forEach(function(cookie) {

        var cookieName = cookie.trim().split("=")[0];

        // If the prefix of the cookie's name matches the one specified, remove it
        if (cookieName.indexOf("cookiename_") === 0) {

            // Remove the cookie
            document.cookie = cookieName + "=;expires=Thu, 01 Jan 1970 00:00:00 GMT";
        }
    }); 
```

# ruby-on-rails - 没有 *_id 的 ActiveRecord 查询

> ID：14160910
> 
> 赞同：0
> 
> 时间：2013-01-04T16:26:11.847
> 
> 标签：ruby-on-rails, activerecord

我有 3 个简单的模型：

```
class User < ActiveRecord::Base
    has_many    :subscriptions
end

class Product < ActiveRecord::Base
    has_many    :subscriptions
end

class Subscription < ActiveRecord::Base
    belongs_to  :user
    belongs_to  :product
end 
```

我能做到`a_subscription.product = a_product`，AR 知道我的意思是 product_id，一切正常。

但如果我这样做：

```
Subscription.where :product => a_product 
```

它向我抛出了一个错误`Unknown column 'subscriptions.product'`- 它在第一种情况下知道我的意思是 product_id 但在后者中没有。我只是想知道这是应该是这样还是我错过了什么？我可以说

```
Subscription.where :product_id => a_product 
```

我必须指定`_id`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:07:00.750

是的，现在您不能将关联传递给该`where`方法。但是你可以在 Rails 4 中做到这一点。[这](https://github.com/rails/rails/commit/3da275c4396d7fad250d2b786027ba4f14344bd4)是一个具有此功能的提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:07:02.667

我认为没有一种优雅的方法（截至目前，请参阅@nash 的回答）。但是，如果你有一个实例`a_product`并且它有`has_many`on `subscriptions`，为什么不直接转过来说：

```
subscriptions = a_product.subscriptions 
```

# xml - 获取整个月的总值

> ID：14160911
> 
> 赞同：1
> 
> 时间：2013-01-04T16:26:11.750
> 
> 标签：xml, parsing, charts

我的来自 highCharts 的 xml 图表有问题。我试着做一个图表，在那里我可以看到我每个月的收入。但我不知道我是如何将 2012 年 12 月的所有内容放在一起的，依此类推。

这是我的 XML 文件中的测试

```
<invoices>
    <invoice>
        <ID>0000152</ID>
        <Date>2012 17 12</Date>
        <Client>Wunderman</Client>
        <Amount>9,171.87</Amount>
        <Status>Sent</Status>
    </invoice>
    <invoice>
        <ID>0000151</ID>
        <Date>2012 19 12</Date>
        <Client>Valtech</Client>
        <Amount>83,281.25</Amount>
        <Status>Paid</Status>
    </invoice>
    <invoice>
        <ID>0000150</ID>
        <Date>2011 16 11</Date>
        <Client>Skanlog</Client>
        <Amount>3,125.00</Amount>
        <Status>Due</Status>
    </invoice>
</invoices> 
```

这是我的 JS 文件。

```
$.get('includes/invoices.xml', function(xml) {

    // Split the lines
    var $xml = $(xml);
    var yearArray = new Array();

    // Push Years
     $xml.find('invoice').each(function(i, invoices) {
         var seriesOptions = {
         name : $(invoices).find('Date').text().substring(0, 4),
         data : []
     };

     if(jQuery.inArray(seriesOptions.name, yearArray) == -1) {
            $('<p></p>').html(seriesOptions.name).appendTo('body');
            yearArray.push(seriesOptions.name);             
        }

        // Push Amount ?        
        $(invoices).find('Amount').each(function(i, amounts) {
            var thisYear = $(invoices).find('Date').text().substring(0, 4)
            var thisMonth = $(invoices).find('Date').text().substring(8, 10)

            if($(invoices).find("Date").indexOf('2012') > -1){
                alert("sss");                   
            }
         });

        // add it to the options
        options.series.push(seriesOptions);
    });

    var chart = new Highcharts.Chart(options);
}); 
```

});

希望你能帮忙，所以我可以继续:(

# ios - performSelector:withObject:afterDelay：应用返回前台后未按计划触发

> ID：14160913
> 
> 赞同：0
> 
> 时间：2013-01-04T16:26:23.327
> 
> 标签：ios

我正在使用 performSelector:withObject:afterDelay: 安排一个选择器，延迟五分钟。如果设备在计划期间进入睡眠状态超过五分钟，则会发生以下两种情况之一：

1）如果设备已连接到我的笔记本电脑，并且应用程序正在调试器中运行，那么当应用程序重新唤醒时，选择器会立即触发。延迟似乎是“时钟一直在运行”。

2) 如果设备没有连接，那么在选择器触发之前会有一个延迟。延迟选择器似乎“时钟暂停”。

根据设备是否连接到调试器，会有两种不同的行为似乎很奇怪。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:38:34.830

我注意到调试器似乎在后台强制应用程序处于活动状态。

通常，如果您在真实设备上进行调试并按下主页按钮，即使 10 分钟后也不会发生任何特殊情况。

另一方面，如果您在设备上强制终止您的应用程序，您最终会收到一个 SIGKILL 信号，该信号将终止您的调试会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:44:00.353

应用程序在后台暂停。您通常应该将计时器等保存`applicationDidEnterBackground`在`applicationDidBecomeActive`.

# php - 当我移动到本地服务器时 PHP 图像路径发生变化

> ID：14160916
> 
> 赞同：0
> 
> 时间：2013-01-04T16:26:27.290
> 
> 标签：php, apache, localhost, relative-path, absolute-path

我有一个在远程开发服务器上部署时可以正常工作的网站。但是，当我将其移动到本地计算机时，所有图像路径现在都没有指向正确的目录。

在`<img src="/images/breadicon.png" />`以前工作的地方，我现在找不到 404 文件。

当我将其更新为 时`<img src="./images/breadicon.png" />`，会找到该图像，但我不想在重新部署此站点时恢复所有链接 - 当然我不想从远程服务器工作。

问题是，没有`.`，路径被视为`http://localhost/images/breadicon.png`而不是`http://localhost/sitename/images/breadicon.php`

在不破坏重新部署代码的情况下，我可以做些什么来解决所有链接并拥有我的链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:40:55.397

您最好的选择可能是在您的本地机器上设置一个网络主机。

例如，如果您的实时/远程站点是`http://www.example.com/`，您可以将本地网络主机设置为`http://example/`.

我假设您在 Windows 上并使用 Apache。您需要编辑主机文件（使用记事本，以管理员身份运行，通常在此处找到：C:\Windows\System32\drivers\etc）以包含：

```
127.0.0.1 example 
```

然后创建一个 Apache 主机配置文件，例如：

```
<VirtualHost *:80>
ServerName example
DocumentRoot C:/Path/To/Site/example
</VirtualHost> 
```

然后重新启动 Apache 并转到`http://example/`. 假设您遵循链接等的标准约定，这应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:32:48.370

配置您的网络服务器，以便可以在`http://localhost/`而不是`http://localhost/sitename`.

如果该名称已用于其他目的，`sitename`请在网络服务器中创建一个名为 eg 的虚拟主机并编辑您的主机文件，使其`sitename`指向`127.0.0.1`.

# scala - 为什么不将 val 或 var 变量标记为私有？

> ID：14160917
> 
> 赞同：1
> 
> 时间：2013-01-04T16:26:40.520
> 
> 标签：scala, encapsulation

来自 java 背景，我总是将实例变量标记为私有。我正在学习 scala，几乎所有我查看过的 val/var 实例的代码都具有默认（公共）访问权限。为什么这是访问？它不会破坏信息隐藏/封装原则吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T16:58:50.900

它将帮助您指定*哪些*代码，但请记住，某些示例代码采用简化形式，以突出显示该示例应该向您展示的内容。由于默认访问是公开的，这意味着为了简单起见，您经常会忽略修饰符。

也就是说，由于 a是不可变的，*只要您认识到它现在是您的 class 的 API 的一部分，*`val`将其公开并没有太大的危害。这完全可以：

 *```
class DataThingy(data: Array[Double) {
  val sum = data.sum
} 
```

或者它可以是您不应该公开的实现细节：

```
class Statistics(data: Array[Double]) {
  val sum = data.sum
  val sumOfSquares = data.map(x => x*x).sum
  val expectationSquared = (sum * sum)/(data.length*data.length)
  val expectationOfSquare = sumOfSquares/data.length 
  val varianceOfSample = expectationOfSquare - expectationSquared
  val standardDeviation = math.sqrt(data.length*varianceOfSample/(data.length-1))
} 
```

在这里，我们在课堂上散布了计算标准差的所有中间步骤。这尤其愚蠢，因为这不是用浮点数计算标准差的最稳定的数值方法。

如果可能的话，最好使用本地块或`private[this]`定义来执行中间计算，而不是仅仅将所有这些私有化：

```
val sum = data.sum
val standardDeviation = {
  val sumOfSquares = ...
  ...
  math.sqrt(...)
} 
```

或者

```
val sum = data.sum
private[this] def findSdFromSquares(s: Double, ssq: Double) = { ... }
val standardDeviation = findMySD(sum, data.map(x => x*x).sum) 
```

如果您需要存储计算以供以后使用，那么`private val`or`private[this] val`是要走的路，但如果它只是计算的中间步骤，则上面的选项更好。

`var`同样，如果 a 是接口的一部分（例如可变向量上的向量坐标），则暴露它也没有害处。但是当它是一个实现细节时，你应该制作它们`private`（更好：`private[this]`如果可以的话！）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T17:20:36.120

Java 和 Scala 之间的一个重要区别是，在 Java 中，您不能在不破坏源代码和二进制兼容性的情况下用 getter 和 setter 方法替换公共变量（反之亦然）。在 Scala 中你可以。

所以在Java中，如果你有一个公共变量，它是一个变量的事实将暴露给用户，如果你改变它，用户必须改变他的代码。在 Scala 中，您可以用`var`getter 和 setter 方法（或`val`仅用 getter 方法的 public）替换 public，而用户不知道它们之间的区别。所以从这个意义上说，没有公开实现细节。

* * *

例如，让我们考虑一个矩形类：

```
class Rectangle(val width: Int, val height:Int) {
  val area = width * height
} 
```

现在，如果我们后来决定不希望将区域存储为变量，而是应该在每次调用时计算它，会发生什么？

在 Java 中情况是这样的：如果我们使用了一个 getter 方法和一个私有变量，我们可以只删除变量并更改 getter 方法来计算面积，而不是使用变量。无需更改用户代码。但是由于我们使用了公共变量，我们现在被迫破坏用户代码:-(

在 Scala 中就不同了：我们可以改变`val`to就可以`def`了。无需更改用户代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T16:47:26.230

实际上，一些 Scala 开发人员倾向于过多地使用默认访问。但是您可以在著名的 Scala 项目中找到合适的示例（例如，Twitter 的 Finagle）。

另一方面，将对象创建为不可变值是 Scala 的标准方式。如果它们是完全不可变的，我们不需要隐藏所有属性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-04T17:25:26.587

我想用更通用的方法来回答这个问题。我认为您正在寻找的答案与构建 Scala 的设计范例有关。与您在 Java 中看到的经典过程/面向对象方法不同，函数式编程被用于更高的扩展。当然，我无法涵盖您提到的所有代码，但总的来说（编写良好的）Scala 代码不需要很多可变性。

正如 Rex 所指出的，`val`'s 是不可变的，所以没有什么理由让它们不公开。但在我看来，不变性本身并不是一个目标，而是函数式编程的结果。因此，如果我们将函数视为类似部件的东西，`x -> function -> y`那么`function`它就变成了一个黑盒子；我们并不真正关心它做了什么，只要它正确地做。正如[Haskell Wiki](http://www.haskell.org/haskellwiki/Functional_programming#Immutable_data)所写：

> 纯函数式程序通常对不可变数据进行操作。不是更改现有值，而是创建更改的副本并保留原始值。

这也解释了缺少闭包的原因，因为我们传统上想要隐藏的部分是在函数中执行的，因此无论如何都是隐藏的。

所以，简而言之，我认为可变性和封闭性在 Scala 中变得更加多余。既然可以避免，为什么还要用 getter 和 setter 把事情搞得一团糟呢？*

# c - 如何在 FreeBSD 中调试 malloc/memleaks

> ID：14160921
> 
> 赞同：2
> 
> 时间：2013-01-04T16:26:49.673
> 
> 标签：c, memory-management, freebsd

我遇到过这篇文章： http: [//keramida.wordpress.com/2008/10/15/extracting-useful-info-from-freebsd-malloc-tracing/](http://keramida.wordpress.com/2008/10/15/extracting-useful-info-from-freebsd-malloc-tracing/)

好像文章中引用的那个脚本已经过时了，第一条评论的链接是404。

Valgrind 似乎没有在 FreeBSD 上为我工作，因为一些系统调用和我自己实现它们的错误，我没有兴趣这样做。

有没有像这个脚本所说的那样可以跟踪 malloc/free 的东西？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-30T18:53:14.600

[devel/valgrind](http://freshports.org/devel/valgrind)端口最近已升级，现在可以满足您的需求。

但是 FreeBSD 的 malloc 实现（也称为 phk-malloc）也有一些内置功能。阅读[malloc(3)](http://www.freebsd.org/cgi/man.cgi?query=malloc&sektion=3)手册页了解详细信息——“TUNING”部分也包含对开发人员有用的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:30:18.803

在 Linux 上，您可以在程序中启用[mtrace](http://en.wikipedia.org/wiki/Mtrace)，但这是代码更改。

在 OpenBSD 上，您可以尝试 malloc 统计信息。

Google 的泄漏检查器可能也值得一看，并且与 mtrace 不同，您可以使用 LD_PRELOAD 来避免重新编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T18:28:27.213

您可以尝试使用`devel/ElectricFence`端口检测（链接）您的代码。只要您的代码不分配大量的小块，这应该可以帮助您找到过去分配的内存的访问。如果您只是检查泄漏，ElectricFence 可能不是您想要的。

# perl - 在 Perl 中创建一个新文件并保存到打开的目录

> ID：14160925
> 
> 赞同：0
> 
> 时间：2013-01-04T16:26:59.217
> 
> 标签：perl, directory

基本上，我正在尝试使用今天的日期创建一个新目录，然后创建一个新文件并将其保存在该文件夹中。

我可以让所有步骤单独工作，但是文件不想保存在目录中。基本上我正在使用：

```
mkdir($today);
opendir(DIR, $today) or die "Error in opening dir $today\n";

    open SAVEPAGE, ">>", $savepage
    or die "Unable to open $savepage for output - $!";
    print SAVEPAGE $data;
    close(SAVEPAGE);

closedir(DIR); 
```

我进行了很多搜索以尝试找到合适的示例，但不幸的是，我尝试过的查询中的每个单词都获得了数百万次点击“打开/保存/文件/目录”等。我意识到我可以更好地处理错误等，一旦我的功能正常工作，这将是下一步。任何指针将不胜感激，干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T16:32:11.773

只需在要打开的文件前加上目录名称即可。不需要opendir

```
mkdir($today);
open SAVEPAGE, ">>", "$today/$savepage"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T15:59:43.143

`chdir $today`您可能更愿意在打开文件之前使用，而不是一直使用完全限定的文件名。这将更改当前工作目录并强制使用相对路径或根本没有路径指定的文件相对于新目录打开。

此外，使用[`autodie`](https://metacpan.org/module/autodie)pragma 将避免需要检查等的状态`open`；`close`出于多种原因，最好使用词法文件句柄，包括当文件句柄变量超出范围时隐式关闭文件。

这就是您的代码的外观。

```
use strict;
use warnings;

use autodie;

my $today = 'today';
my $savepage = 'savepage';
my $data = 'data';

mkdir $today unless -d $today;
{
  chdir $today;
  open my $fh, '>>', $savepage;
  print $fh $data;
} 
```

但是，如果您的程序处理多个目录中的文件，那么`chdir`在它们之间来回切换会很尴尬，并且必须显式保存原始目录，否则会被遗忘。在这种情况下，该[`File::chdir`](https://metacpan.org/module/File%3a%3achdir)模块可能会有所帮助。它提供了`$CWD`包变量，如果它的值改变了，它将改变当前的工作目录。它也可以像任何其他变量包一样本地化，以便在本地化块的末尾恢复原始值。

这是一个例子。

```
use strict;
use warnings;

use File::chdir;
use autodie;

my $today = 'today';
my $savepage = 'savepage';
my $data = 'data';

mkdir $today unless -d $today;
{
  local $CWD = $today;  # Change working directory to $today

  open my $fh, '>>', $savepage;
  print $fh $data;
}

# Working directory restored to its previous value 
```

# r - 加快“for-loop”删除符合条件的行

> ID：14160926
> 
> 赞同：1
> 
> 时间：2013-01-04T16:27:01.640
> 
> 标签：r, for-loop

我正在使用 R 回测一些投资策略，下面有一段脚本：

```
set.seed(1)
output.df <- data.frame(action=sample(c("initial_buy","sell","buy"),
          10000,replace=TRUE),stringsAsFactors=FALSE)
output.df[,"uid"] <- 1:nrow(output.df)

cutrow.fx <- function(output.df) {
  loop.del <- 2
  while (loop.del <= nrow(output.df)) {
    if ((output.df[loop.del,"action"]=="initial_buy" & 
            output.df[loop.del-1,"action"]=="initial_buy")|
          (output.df[loop.del,"action"]=="sell" & 
            output.df[loop.del-1,"action"]=="sell")|
          (output.df[loop.del,"action"]=="buy" & 
            output.df[loop.del-1,"action"]=="sell")|
          (output.df[loop.del,"action"]=="initial_buy" & 
            output.df[loop.del-1,"action"]=="buy")){
      output.df <- output.df[-loop.del,]
    } else {
      loop.del <- loop.del + 1
    }
  }
output.df<<-output.df
}

print(system.time(cutrow.fx(output.df=output.df))) 
```

该策略将决定：1）何时开始购买股票；2) 何时增加对股票的额外贡献；3) 何时出售所有股票。我有一个数据框，其中包含过去 10 年的股票价格。我写了 3 个脚本来指示我应该在哪个日期买/卖股票，结合 3 个结果和`order`它们。

我需要删除一些“不可能的动作”，例如我不能在不预先购买新单位的情况下两次出售同一股票，所以我使用上面的脚本删除了那些不可能的动作。但是`for`循环有点慢。

有什么建议可以加快速度吗？

### 更新01

我已将其更新`cutrow.fx`为以下但失败：

```
cutrow.fx <- function(output.df) {
  output.df[,"action_pre"] <- "NIL"
  output.df[2:nrow(output.df),"action_pre"] <- output.df[1:(nrow(output.df)-1),"action"]                    
  while (any(output.df[,"action_pre"]=="initial_buy" & output.df[,"action"]=="initial_buy")|
           any(output.df[,"action_pre"]=="sell" & output.df[,"action"]=="sell")|
           any(output.df[,"action_pre"]=="sell" & output.df[,"action"]=="buy")|
           any(output.df[,"action_pre"]=="buy" & output.df[,"action"]=="initial_buy")) {
    output.df <- output.df[!(output.df[,"action_pre"]=="initial_buy" & output.df[,"action"]=="initial_buy"),]
    output.df <- output.df[!(output.df[,"action_pre"]=="sell" & output.df[,"action"]=="sell"),]
    output.df <- output.df[!(output.df[,"action_pre"]=="sell" & output.df[,"action"]=="buy"),]
    output.df <- output.df[!(output.df[,"action_pre"]=="buy" & output.df[,"action"]=="initial_buy"),]
    output.df[,"action_pre"] <- "NIL"
    output.df[2:nrow(output.df),"action_pre"] <- output.df[1:(nrow(output.df)-1),"action"]                    
  }        
  output.df[,"action_pre"] <- NULL
  output.df<<-output.df
} 
```

我使用矢量比较作为某种灵感（我以某种方式使用，因为我不确定我是否得到他在答案中的确切含义），使用 while 循环重复。但是输出不一样。

这里的for循环是不可避免的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:03:32.187

It looks like all you're doing is checking the last action. This doesn't require a loop at all. All you have to do is shift the vector and do straight vector comparisons. Here's an artificial example.

```
x <- sample(1:11)
buysell <- sample(c('buy', 'sell'), 11, replace = TRUE) 
```

So, I have 11 samples, x, and whether I've bought or sold them. I want to make a boolean that shows whether I bought or sold the last sample.

```
bought <- c(NA, buysell[1:10])
which( bought == 'buy' ) 
```

Examine the x and buysell variables and you'll see the results here are the index of the x items where a buy was made on the prior item.

Also, you might want to check out he function `%in%`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T20:21:16.940

我试图用矢量化做一些聪明的事情，但失败了，因为循环的先前迭代可以改变数据关系以供以后迭代。因此，我无法将数据滞后一定数量并与实际结果进行比较。

我能做的就是尽量减少所涉及的复制操作。R 是按副本分配的，因此当您编写类似 的语句时`output.df <- output.df[-loop.del,]`，您将复制被删除的每一行的整个数据结构。我没有更改（和复制）数据框，而是更改了逻辑向量。其他一些加快速度的尝试包括使用*逻辑与*( `&&`) 而不是*按位与*( `&`)、`%in%`用于进行更少的比较以及最小化对 的访问`output.df`。

为了比较这两个函数，我稍微修改了 OP 解决方案，使得原始数据帧不会被覆盖。看起来这可以将速度提高 10 倍，但仍然需要相当长的时间（>0.5 秒）。我很想看到任何更快的解决方案。

OP的解决方案（返回值略有修改，没有全局赋值）

```
cutrow.fx <- function(output.df) {
  loop.del <- 2
  while (loop.del <= nrow(output.df)) {
    if ((output.df[loop.del,"action"]=="initial_buy" & 
            output.df[loop.del-1,"action"]=="initial_buy")|
          (output.df[loop.del,"action"]=="sell" & 
            output.df[loop.del-1,"action"]=="sell")|
          (output.df[loop.del,"action"]=="buy" & 
            output.df[loop.del-1,"action"]=="sell")|
          (output.df[loop.del,"action"]=="initial_buy" & 
            output.df[loop.del-1,"action"]=="buy")){
      output.df <- output.df[-loop.del,]
    } else {
      loop.del <- loop.del + 1
    }
  }
return(output.df)
}
ans1 <- cutrow.fx(output.df) 
```

我的解决方案

```
cutrow.fx2 <- function(output.df) {
    ##edge case if output.df has too few rows
    if (nrow(output.df) < 2) return(output.df)
    ##logical vector of indices of rows to keep
    idx <- c(TRUE,logical(nrow(output.df)-1))
    ##keeps track of the previous row
    prev.row <- 1
    prev.act <- output.df[prev.row,"action"]
    for (current.row in seq_len(nrow(output.df))[-1]) {
        ##access output.df only once per iteration
        current.act <- output.df[current.row,"action"]
        ##checks to see if current row is bad
        ##if so, continue to next row and leave previous row as is
        if ( (prev.act %in% c("initial_buy","buy")) && 
             (current.act == "initial_buy") ) {
            next
        } else if ( (prev.act == "sell") &&
            (current.act %in% c("buy","sell")) ) {
            next
        }
        ##if current row is good, mark it in idx and update previous row
        idx[current.row] <- TRUE
        prev.row <- current.row
        prev.act <- current.act
    }
    return(output.df[idx,])
}
ans2 <- cutrow.fx2(output.df) 
```

检查答案是否相同

```
identical(ans1,ans2)
## [1] TRUE

#benchmarking
require(microbenchmark)
mb <- microbenchmark(
  ans1=cutrow.fx(output.df)
  ,ans2=cutrow.fx2(output.df),times=50)
print(mb)
# Unit: milliseconds
  # expr       min        lq    median         uq        max
# 1 ans1 9630.1671 9743.1102 9967.6442 10264.7000 12396.5822
# 2 ans2  481.8821  491.6699  500.6126   544.4222   645.9658

plot(mb)
require(ggplot2)
ggplot2::qplot(y=time, data=mb, colour=expr) + ggplot2::scale_y_log10() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T23:59:59.297

这是一些更简单且更快的代码。它不会遍历所有元素，而只会在匹配之间循环。它向前而不是向后匹配。

首先，修改你的`cutrow.fx`函数。删除`<<-output.df`最后一行的，并简单地返回结果。然后您可以运行两个函数并比较结果。

```
cutrow.fx1 <- function(d) {
  len <- length(d[,1])
  o <- logical(len)
  f <- function(a) {
    switch(a,
           initial_buy=c('buy', 'sell'), 
           buy=c('buy', 'sell'),
           sell='initial_buy'
           )
  }
  cur <- 1
  o[cur] <- TRUE
  while (cur < len) {
    nxt <- match(f(d[cur,1]), d[(cur+1):len,1])
    if (all(is.na(nxt))) {
      break
    } else {
      cur <- cur + min(nxt, na.rm=TRUE);
      o[cur] <- TRUE
    }
  }
  d[o,]
} 
```

证明结果是正确的：

```
identical(cutrow.fx1(output.df), cutrow.fx(output.df))
## [1] TRUE 
```

而且速度要快得多。这是由于问题的部分向量化，`match`用于查找要保留的下一行，而不是迭代以丢弃行。

```
print(system.time(cutrow.fx(output.df)))
##   user  system elapsed 
##  5.688   0.000   5.720 

print(system.time(cutrow.fx1(output.df)))
##   user  system elapsed 
##  1.050   0.000   1.056 
```

# linq - 复杂的 Linq 到实体查询

> ID：14160927
> 
> 赞同：0
> 
> 时间：2013-01-04T16:27:09.550
> 
> 标签：linq, entity-framework, linq-to-entities

我已经完成了简单的 LINQ 查询，但我对现在需要创建的 2 个问题感到困惑。基本上我会收到一个类 ID。我将在下面发布实体所基于的类。

```
public class ScheduledClass
{
    public ScheduledClass()
    {
        Attendees = new List<ClassAttendee>();
    }

    [HiddenInput(DisplayValue = false)]
    public int ID { get; set; }

    [HiddenInput(DisplayValue = false)]
    [Required(ErrorMessage = "Please enter a topic")]
    public int ClassTopicID { get; set; }

    [Display(Name = "Topic")]
    public virtual ClassTopic ClassTopic { get; set; }

    [HiddenInput(DisplayValue = false)]
    public int ClassTypeID { get; set; }

    [Display(Name = "Class Type")]
    public virtual ClassType ClassType { get; set; }

    [Required]
    [DataType(DataType.Date)]
    [Display(Name = "Class Date")] 
    public DateTime ClassDate { get; set; }

    [Display(Name = "Attendees")] 
    public virtual ICollection<ClassAttendee> Attendees { get; set; }
}

 public ClassTopic()
    {
        Products = new List<ClassTopicProduct>();
    }

    [HiddenInput(DisplayValue = false)]
    public int ID { get; set; }

    [Required(ErrorMessage = "Please enter a title")]
    public string Title { get; set; }

    [DataType(DataType.MultilineText)]
    public string Description { get; set; }

    [Display(Name = "Products")]
    public virtual ICollection<ClassTopicProduct> Products { get; set; }
}

public class ClassTopicProduct
{
    [HiddenInput(DisplayValue = false)]
    public int ID { get; set; }

    [HiddenInput(DisplayValue = false)]
    public int ClassTopicID { get; set; }

    [ForeignKey("ClassTopicID")]
    public ClassTopic ClassTopic { get; set; }

    [HiddenInput(DisplayValue = false)]
    public int ProductID { get; set; }

    [ForeignKey("ProductID")]
    public ProductType ProductType { get; set; }
}

public class CustomerEmail
{

    public CustomerEmail()
    {
        CustomerEmailModules = new List<CustomerEmailModule>();
    }

    [HiddenInput(DisplayValue = false)]
    public int ID { get; set; }

    [HiddenInput(DisplayValue = false)]
    public int CustomerID { get; set; }

    public virtual Customer Customer { get; set; }

    public string Name { get; set; }
    public string Email { get; set; }

    [DataType(DataType.PhoneNumber)]
    public string PhoneNumber { get; set; }

    [Display(Name = "Product Update")]
    public Boolean SendProductUpdateEmail { get; set; }
    [Display(Name = "Expiration ")]
    public Boolean SendExpirationEmail { get; set; }

    [Display(Name = "Products")]
    public virtual ICollection<CustomerEmailModule> CustomerEmailModules { get; set; }
}

public class CustomerEmailModule
{
    [HiddenInput(DisplayValue = false)]
    public int ID { get; set; }

    [HiddenInput(DisplayValue = false)]
    public int CustomerEmailID { get; set; }

    public CustomerEmail CustomerEmail { get; set; }

    [HiddenInput(DisplayValue = false)]
    public int? ProductID { get; set; }

    [ForeignKey("ProductID")]
    public ProductType ProductType { get; set; }
} 
```

编辑***_* _ __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* _**

```
public class ProductType
{
    [HiddenInput(DisplayValue = false)]
    public int ID { get; set; }

    [Required(ErrorMessage = "Please enter a product type description")]
    public string Description { get; set; }

    public virtual ICollection<ProductTypeDetail> ProductDetails { get; set; }
} 
```

编辑***_* _ __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* _**

所以我基本上是在尝试向可能对即将到来的课程感兴趣的人发送电子邮件。每个班级都有一个班级主题。课程主题有 1 个或多个与之关联的产品。当我获得班级 ID 时，我需要获取与班级主题相关的所有产品。一旦我有了，我需要去看看 CustomerEmails。每个 CustomerEmail 都有他们感兴趣的任意数量的产品与之相关联。我需要找到任何具有 CustomerEmailModules 的 CustomerEmail，其中 PRoductID = Class Topic Products 结果中的任何产品 ID。这是我在下面尝试做的事情，但它不起作用。

```
 public JsonResult GetEmailClassInterest(int id)
    {
         var classprods = UoW.ScheduledClasses 
            .Where(o => o.ID == id)
            .Select(p => new
            {
                p.ClassTopic.Products
            });

        var customeremails = from p in UoW.CustomerEmails where classprods.Any(z => z.Products.Any(x => x.ID == p.ID)) select p.Email;
        return Json(customeremails, JsonRequestBehavior.AllowGet);
    } 
```

查询似乎运行正常，但我没有得到任何结果，并且应该以我拥有的数据为基础。如果有人能告诉我我做错了什么，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:29:12.707

尝试这样做：

```
var classprods = UoW.ScheduledClasses 
            .Where(o => o.ID == id)
            .SelectMany(sched => sched.ClassTopic.Products.Select(prod => prod.ProductID));

var customerEmails = UoW.CustomerEmailModules.Include("CustomerEmails")
                                             .Where(mod => mod.ProductID != null && classprods.Contains(mod.ProductID)
                                             .Select(mod => mod.CustomerEmail.Email); 
```

# r - ggplot2 在绘制 Kaplan-Meier 图时在生存数据框中找到空行

> ID：14160928
> 
> 赞同：3
> 
> 时间：2013-01-04T16:27:10.667
> 
> 标签：r, graphics, graph, plot, ggplot2

我正在尝试使用**ggplot2**和在以下位置找到的代码绘制一些 Kaplan-Meier 曲线：[https ://github.com/kmiddleton/rexamples/blob/master/qplot_survival.R](https://github.com/kmiddleton/rexamples/blob/master/qplot_survival.R)

我在不同的数据库中使用这个很棒的代码得到了很好的结果。但是，在这种情况下，它给了我以下错误......好像我的数据框中有空行：

`Error en if (nrow(layer_data) == 0) return() : argument is of length zero.`

以前有关此类错误的问题似乎对我没有用，因为在我的情况下，数据和函数的类型并不相同。

我对使用 R 进行统计分析比较陌生，而且我没有编程背景，所以我认为这一定是我的数据中的一个“愚蠢的错误”，但我找不到它在哪里……看来 ggplot2 绝对可以'找不到要绘制的行。拜托，你能以任何方式帮助我，提供线索、建议等吗？

这是我的数据和使用的代码，按顺序为控制台准备好-我在 knitr 脚本中尝试过-。最后，我发布了我的 sessionInfo：

```
library(splines)
library(survival)
library(abind)
library(ggplot2)
library(grid) 
```

我创建了一个名为**acbi30**（真实数据）的数据框：

```
mort28day <- c(1,0,1,0,0,0,0,1,0,0,0,1,1,0,1,0,0,1,0,1,1,1,1,0,1,1,1,0,0,1)
daysurv <- c(4,29,24,29,29,29,29,19,29,29,29,3,9,29,15,29,29,11,29,5,13,20,22,29,16,21,9,29,29,15)
levo <- c(0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0)
acbi30 <- data.frame(mort28day, daysurv, levo)
save(acbi30, file="acbi30.rda")
acbi30 
```

然后，我粘贴以下命令以使用 ggplot2 创建一个函数：

```
t.Surv <- Surv(acbi30$daysurv, acbi30$mort28day)
t.survfit <- survfit(t.Surv~1, data=acbi30)

#define custom function to create a survival data.frame#
createSurvivalFrame <- function(f.survfit){

#initialise frame variable#
f.frame <- NULL

#check if more then one strata#
if(length(names(f.survfit$strata)) == 0){

#create data.frame with data from survfit#
f.frame <- data.frame(time=f.survfit$time, n.risk=f.survfit$n.risk, n.event=f.survfit$n.event, n.censor = f.survfit
$n.censor, surv=f.survfit$surv, upper=f.survfit$upper, lower=f.survfit$lower)
#create first two rows (start at 1)#
f.start <- data.frame(time=c(0, f.frame$time[1]), n.risk=c(f.survfit$n, f.survfit$n), n.event=c(0,0),
n.censor=c(0,0), surv=c(1,1), upper=c(1,1), lower=c(1,1))
#add first row to dataset#
f.frame <- rbind(f.start, f.frame)
#remove temporary data#
rm(f.start)
}
else {
#create vector for strata identification#
f.strata <- NULL
for(f.i in 1:length(f.survfit$strata)){
#add vector for one strata according to number of rows of strata#
f.strata <- c(f.strata, rep(names(f.survfit$strata)[f.i], f.survfit$strata[f.i]))
}
#create data.frame with data from survfit (create column for strata)#
f.frame <- data.frame(time=f.survfit$time, n.risk=f.survfit$n.risk, n.event=f.survfit$n.event, n.censor = f.survfit
$n.censor, surv=f.survfit$surv, upper=f.survfit$upper, lower=f.survfit$lower, strata=factor(f.strata))
#remove temporary data#
rm(f.strata)
#create first two rows (start at 1) for each strata#
for(f.i in 1:length(f.survfit$strata)){
#take only subset for this strata from data#
f.subset <- subset(f.frame, strata==names(f.survfit$strata)[f.i])
#create first two rows (time: 0, time of first event)#
f.start <- data.frame(time=c(0, f.subset$time[1]), n.risk=rep(f.survfit[f.i]$n, 2), n.event=c(0,0),
n.censor=c(0,0), surv=c(1,1), upper=c(1,1), lower=c(1,1), strata=rep(names(f.survfit$strata)[f.i],
2))
#add first two rows to dataset#
f.frame <- rbind(f.start, f.frame)
#remove temporary data#
rm(f.start, f.subset)
}
#reorder data#
f.frame <- f.frame[order(f.frame$strata, f.frame$time), ]
#rename row.names#
rownames(f.frame) <- NULL
}
#return frame#
return(f.frame)
}

#define custom function to draw kaplan-meier curve with ggplot#
qplot_survival <- function(f.frame, f.CI="default", f.shape=3){
#use different plotting commands dependig whether or not strata's are given#
if("strata" %in% names(f.frame) == FALSE){
#confidence intervals are drawn if not specified otherwise#
if(f.CI=="default" | f.CI==TRUE ){
#create plot with 4 layers (first 3 layers only events, last layer only censored)#
#hint: censoring data for multiple censoring events at timepoint are overplotted#
#(unlike in plot.survfit in survival package)#
ggplot(data=f.frame) + geom_step(aes(x=time, y=surv), direction="hv") + geom_step(aes(x=time,
y=upper), directions="hv", linetype=2) + geom_step(aes(x=time,y=lower), direction="hv", linetype=2) +
geom_point(data=subset(f.frame, n.censor==1), aes(x=time, y=surv), shape=f.shape)
}
else {
#create plot without confidence intervals#
ggplot(data=f.frame) + geom_step(aes(x=time, y=surv), direction="hv") +
geom_point(data=subset(f.frame, n.censor==1), aes(x=time, y=surv), shape=f.shape)
}
}
else {
if(f.CI=="default" | f.CI==FALSE){
#without CI#
ggplot(data=f.frame, aes(group=strata, colour=strata)) + geom_step(aes(x=time, y=surv),
direction="hv") + geom_point(data=subset(f.frame, n.censor==1), aes(x=time, y=surv), shape=f.shape)
}
else {
#with CI (hint: use alpha for CI)#
ggplot(data=f.frame, aes(colour=strata, group=strata)) + geom_step(aes(x=time, y=surv),
direction="hv") + geom_step(aes(x=time, y=upper), directions="hv", linetype=2, alpha=0.5) +
geom_step(aes(x=time,y=lower), direction="hv", linetype=2, alpha=0.5) +
geom_point(data=subset(f.frame, n.censor==1), aes(x=time, y=surv), shape=f.shape)
}
}
} 
```

**绘制全局生存曲线（95% CI）：**

它没有给出任何错误：

```
# Kaplan-Meier plot, global survival (with CI)
t.survfit <- survfit(t.Surv~1, data=acbi30)
t.survframe <- createSurvivalFrame(t.survfit)
t.survfit
qplot_survival(t.survframe, TRUE, 20) 
```

**绘制分层生存曲线：**

给出上述错误：

```
# Kaplan-Meier plot, stratified survival
t.survfit2 <- survfit(t.Surv~levo, data=acbi30)
t.survframe2 <- createSurvivalFrame(t.survfit2)
t.survfit2
qplot_survival(t.survframe2, TRUE, 20) 
```

**在没有 ggplot2 的情况下绘制结果：**

t.survframe2 的结构对我来说似乎还可以，没有任何空行，所以它一定是 qplot_survival 读取我在*t.survframe2*中的数据的问题。制作一个简单的情节不会返回任何错误：

```
t.survframe2
plot(t.survfit2) 
```

我的数据框的问题在哪里？创建的函数适用于其他数据集，但不适用于这个......

先感谢您，

马列维夫

**会话信息：**

```
sessionInfo() 
```

R 版本 2.15.2 (2012-10-26) 平台：i386-w64-mingw32/i386（32 位）

```
locale:

[1] LC_COLLATE=Spanish_Spain.1252  LC_CTYPE=Spanish_Spain.1252   
[3] LC_MONETARY=Spanish_Spain.1252 LC_NUMERIC=C                  
[5] LC_TIME=Spanish_Spain.1252    

attached base packages:
[1] grid      splines   stats     graphics  grDevices utils     datasets 
[8] methods   base     

other attached packages:
[1] ggplot2_0.9.3    abind_1.4-0      survival_2.36-14 knitr_0.8       

loaded via a namespace (and not attached):
 [1] colorspace_1.1-1   dichromat_1.2-4    digest_0.5.2      
 [4] evaluate_0.4.2     formatR_0.7        gtable_0.1.2      
 [7] labeling_0.1       MASS_7.3-22        munsell_0.4       
[10] plyr_1.8           proto_0.3-9.2      RColorBrewer_1.0-5
[13] reshape2_1.2.1     scales_0.2.3       stringr_0.6.1     
[16] tools_2.15.2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T06:13:03.587

`qplot_survival()`我对你的功能做了一点整容手术。主要问题似乎是您在`data =`论点中的子集条件`geom_point`；在`t.survframe`和`t.survframe2`中，生成`n.censor`值 0、3 和 12 的表。通过将子集条件更改为`n.censor > 0`，我设法在所有情况下都得到了一个图。我也没有看到`f.CI = "default"`，所以我将默认设置为 TRUE 并相应地修改了 if 条件。

```
qplot_survival <- function(f.frame, f.CI= TRUE, f.shape=3)
{
 # use different plotting commands depending whether 
 # or not strata are given#
if(!("strata" %in% names(f.frame)))
{
  #confidence intervals are drawn if not specified otherwise#
   if( isTRUE(f.CI) )
   {
      # create plot with 4 layers (first 3 layers only events, 
      # last layer only censored)#
      # hint: censoring data for multiple censoring events at 
      # timepoint are overplotted#
      # (unlike in plot.survfit in survival package)#
   ggplot(data=f.frame) + 
      geom_step(aes(x=time, y=surv), direction="hv") + 
      geom_step(aes(x=time, y=upper), direction ="hv", linetype=2) + 
      geom_step(aes(x=time,y=lower), direction="hv", linetype=2) +
      geom_point(data=subset(f.frame, n.censor > 0), 
                 aes(x=time, y=surv), shape=f.shape)
   } else {
  #create plot without confidence intervals#
   ggplot(data=f.frame) + 
      geom_step(aes(x=time, y=surv), direction="hv") +
      geom_point(data=subset(f.frame, n.censor > 0), 
                 aes(x=time, y=surv), shape=f.shape)
          }
} else {
  if( !(isTRUE(f.CI)) ){
#without CI#
  ggplot(data=f.frame, aes(group=strata, colour=strata)) + 
     geom_step(aes(x=time, y=surv), direction="hv") + 
     geom_point(data=subset(f.frame, n.censor > 0), 
                aes(x=time, y=surv), shape=f.shape)
} else {

#with CI (hint: use alpha for CI)#
  ggplot(data=f.frame, aes(x = time, colour=strata, group=strata)) + 
      geom_step(aes(y=surv), direction="hv") + 
      geom_step(aes(y=upper), direction="hv", 
                   linetype=2, alpha=0.5) +
      geom_step(aes(y=lower), direction="hv", 
                   linetype=2, alpha=0.5) +
      geom_point(data=subset(f.frame, n.censor > 0), 
                 aes(y=surv), shape=f.shape)
      }
   }
} 
```

进行这些更改后，以下图表都对我有用：

```
qplot_survival(t.survframe2, TRUE, 20)
qplot_survival(t.survframe2, FALSE, 20)
qplot_survival(t.survframe, TRUE, 20)
qplot_survival(t.survframe, FALSE, 20) 
```

一些评论：

1.  函数内部的子集化可能很危险，因为有时，如本例所示，满足条件会返回零行数据帧。我会考虑该`geom_point()`层是否真的有必要。
2.  在几个地方，你有`directions = "hv"`一个`geom_step()`电话。这个论点不是复数形式，上面已经改变了。
3.  我认为这可以更有效地完成，但是从`survfit`对象中提取感兴趣的列的一种方法`t.survfit`是这样的：

（当存在地层时扩展组合）

```
comps <- c(2:6, 8, 10);
t.fit <- as.data.frame(do.call(cbind, lapply(comps, function(j) t.survfit[[j]])))
names(t.fit) <- names(t.survfit)[comps] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-17T20:33:53.983

这是另一个版本，它也解释了数据中没有审查点的情况（@Dennis 的版​​本在这种情况下仍然失败）。这可以提高效率，可能是通过创建一个变量来预先存储整个数据帧中有多少审查点，然后重新使用它，而不是像我在每种情况下再次进行测试。

```
# deﬁne custom function to draw kaplan-meier curve with ggplot
qplot_survival <- function(f.frame, f.CI="default", f.shape=3){
  # use different plotting commands dependig whether or not strata's are given
  if("strata" %in% colnames(f.frame) == FALSE){
    # conﬁdence intervals are drawn if not speciﬁed otherwise
    if(f.CI=="default" | f.CI==TRUE ){
      # create plot with 4 layers (ﬁrst 3 layers only events, last layer only censored)
      # hint: censoring data for multiple censoring events at timepoint are overplotted

      # (unlike in plot.survfit in survival package)
      p <- ggplot(data=f.frame) + geom_step(aes(x=time, y=surv), direction="hv") + geom_step(aes(x=time, 
                                                                                            y=upper), directions="hv", linetype=2) + geom_step(aes(x=time,y=lower), direction="hv", linetype=2)
      if(nrow(subset(f.frame, n.censor > 0)) > 0){
        p+geom_point(data=subset(f.frame, n.censor > 0), aes(x=time, y=surv), shape=f.shape)
      }else{
        p
      }
    }
    else {
      # create plot without conﬁdence intervalls
      p <- ggplot(data=f.frame) + geom_step(aes(x=time, y=surv), direction="hv")
      if(nrow(subset(f.frame, n.censor > 0)) > 0){
        p + geom_point(data=subset(f.frame, n.censor > 0), aes(x=time, y=surv), shape=f.shape)
      }else{
        p
      }
    }
  }
  else {
    if(f.CI=="default" | f.CI==FALSE){
      # without CI 
      p <- ggplot(data=f.frame, aes(group=strata, colour=strata)) + geom_step(aes(x=time, y=surv), 
                                                                         direction="hv") 
      if(nrow(subset(f.frame, n.censor > 0)) > 0){
        p +geom_point(data=subset(f.frame, n.censor > 0), aes(x=time, y=surv), shape=f.shape)
      }else{
        p
      }
    }
    else {
      # with CI (hint: use alpha for CI)
      p <- ggplot(data=f.frame, aes(colour=strata, group=strata)) + geom_step(aes(x=time, y=surv), 
                                                                         direction="hv") + geom_step(aes(x=time, y=upper), directions="hv", linetype=2, alpha=0.5) + 
        geom_step(aes(x=time,y=lower), direction="hv", linetype=2, alpha=0.5)
      if(nrow(subset(f.frame, n.censor > 0)) > 0){
        p + geom_point(data=subset(f.frame, n.censor > 0), aes(x=time, y=surv), shape=f.shape)
      }else{
        p
      }
    }
  }
} 
```

# css - Chrome 在设备上以不同的方式呈现基于 em 的字体大小

> ID：14160931
> 
> 赞同：2
> 
> 时间：2013-01-04T16:27:14.403
> 
> 标签：css, google-chrome, font-size, em, nexus-7

我在比较布局中页面之间的字体大小时遇到​​问题。我在正文上设置了字体`font-size: 100%;`，在我的段落标签上设置了`font-size: 1em;`.

我有一个带有 CSS 列和单列布局的两列页面集。字体在单列页面上呈现更大。`font-size: .75em;`它在页脚和我网站的主要部分的呈现方式也不同。

我已经确定它只是 Chrome 并且似乎导致了 Nexus 7 上的问题。这个问题在 iPad 3 中的 Chrome 上不是问题。

有人对这个有经验么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:36:07.677

这些是 2 个不同的操作系统，这通常是在设备之间存在这些不规则性的情况。EM 是基于默认字体大小的，如果没有声明一个，则取决于屏幕分辨率的操作系统将声明一个。`font-size:100%`不会做任何事情，你应该`font-size:12px`在正文中声明一个恒定的字体大小。

那么你应该有一致性或接近它。

# ruby-on-rails-3 - 如何在 Rails 3.2.1 中查看已编译的咖啡脚本？

> ID：14160933
> 
> 赞同：0
> 
> 时间：2013-01-04T16:27:16.167
> 
> 标签：ruby-on-rails-3, coffeescript, rubymine

我正在使用 RubyMine，想知道是否有任何方法可以*在我开发时*（在页面加载之前）查看 Coffeescript 编译到的 Javascript。

这不是必需的，我比其他任何事情都更好奇。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T16:36:59.030

在编辑器或项目视图中右键单击文件，选择“Preview Compiled CoffeeScript File...”

# java - 电池耗尽问题

> ID：14160934
> 
> 赞同：-2
> 
> 时间：2013-01-04T16:27:17.443
> 
> 标签：java, android, multithreading

我在我的应用程序中使用了许多一直在运行的线程。这些线程用于定期向服务器发送数据。通过服务调用。问题是我的应用程序消耗了大量电池。我想解决这个问题。如何？我的意思是gmail等不会消耗那么多电池。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:07:44.477

我建议您查看[Google 的 Android 培训，了解如何最大限度地减少电池使用量](http://developer.android.com/training/efficient-downloads/index.html)，并专注于有效访问网络并在那里发送文件的方式。

谷歌的 IO 活动中还有一个[很好的视频演示，](https://developers.google.com/events/io/sessions/gooio2012/101/)它触及了这个话题（大约占视频的 1/3）。它提供了一些代码，可能比前面提到的文档更容易理解但没有那么深入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:40:26.233

像 Gmail 这样的应用程序不会频繁地请求服务器，您可能需要检查解决方案的架构，您需要其他机制来执行此操作：http: [//developer.android.com/reference/android/os/AsyncTask .html](http://developer.android.com/reference/android/os/AsyncTask.html) http://developer.android.com/guide/components/services.html

# html - 当其中一个孩子具有`width：100％`样式时如何避免换行

> ID：14160937
> 
> 赞同：3
> 
> 时间：2013-01-04T16:27:21.343
> 
> 标签：html, css, layout

我想水平对齐容器 div 元素内的 div 元素，避免子元素之间的换行。

但是，当其中一个子 div 元素具有`width:100%`如下样式时：

```
<div style="float:left;overflow-x:hidden;background-color:blue;width: 300;">
  <div style="display:inline-block;background-color:yellow;">1</div>
  <div style="display:inline-block;background-color:green;width:100%;">2</div>
  <div style="display:inline-block;background-color:yellow;">3</div>
</div> 
```

该元素本身被放置在一个新的行上，如下所示：

![实际的](../Images/39ef504db31804a5416b1ccceb2400bc.png)

在任何情况下如何避免换行？当子元素的宽度之和大于父元素的宽度时，我希望元素的那部分被切断（隐藏）。我用`overflow-x:hidden`上面的方法试过了，但没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T16:36:29.743

你的意思是当它们的总和大于父元素时，你希望所有元素都推到父元素之外？如果是这样，请尝试将其添加到父级：

```
{ white-space:nowrap; } 
```

[**在 JSFiddle 上查看**](http://jsfiddle.net/LMfrZ/)

这是可行的，因为子元素被设置为内联块元素，因此它们被视为文本。[Chris Coyier 对此处](http://css-tricks.com/almanac/properties/w/whitespace/)的所有空白都有很好的解释（带有漂亮的图表），您可能会觉得这很有趣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T16:42:07.353

你可以试试这个而不是**inline-block**使用**table-cell**：

```
<div style="float:left;overflow-x:hidden;background-color:blue;width: 300;">
  <div style="display:table-cell;background-color:yellow;">1</div>
  <div style="display:table-cell;background-color:green;">2</div>
  <div style="display:table-cell;background-color:yellow;">3</div>
</div> 
```

结果： ![在此处输入图像描述](../Images/71a246699cd2b0d444604004c920b493.png) [完整显示属性列表](http://www.w3schools.com/cssref/pr_class_display.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T16:38:26.540

一种方法是使用另一个 DIv，但使用 px 宽度而不是百分比，因为使用 100% 作为宽度永远不会起作用。

```
<div style="float:left;overflow:hidden;background-color:blue;width:300px;">
    <div style="width:3000px; overflow:auto;">

        <div style="display:inline-block;background-color:yellow;width:100px">1</div>
        <div style="display:inline-block;background-color:green;width:300px;">2</div>
        <div style="display:inline-block;background-color:yellow;width:100px;">3</div>

    </div>
</div> 
```

# logging - 使用 Logback 错误滚动日志文件

> ID：14160941
> 
> 赞同：1
> 
> 时间：2013-01-04T16:27:47.477
> 
> 标签：logging, logback

我正在使用 Logback 创建每日滚动日志文件。它确实重命名了现有日志文件并创建了一个新文件，但是它没有正确执行（或者我告诉它不正确）。下面是我正在使用的 logback.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <timestamp key="today" datePattern="yyyyMMdd"/>

    <appender name="ScreenAppender" class="ch.qos.logback.core.ConsoleAppender">
        <filter class="ch.qos.logback.classic.filter.ThresholdFilter">
            <level>debug</level>
        </filter>
        <encoder>
            <pattern>%date{HH:mm:ss.SSS} %-5level %logger{20} [%file:%line] - %msg%n</pattern>
        </encoder>
    </appender>

    <appender name="UpdateAppender" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <append>true</append>
        <filter class="ch.qos.logback.classic.filter.ThresholdFilter">
            <level>info</level>
        </filter>
        <file>${CATALINA_HOME}/logs/update-server.log</file>
        <encoder>
            <pattern>%date{HH:mm:ss.SSS} %-5level %logger{40} [%file:%line] - %msg%n</pattern>
        </encoder>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>update-server.%d{yyyy-MM-dd}.zip</fileNamePattern>
            <maxHistory>180</maxHistory>
        </rollingPolicy>
    </appender>

    <root level="debug">
        <appender-ref ref="ScreenAppender"/>
        <appender-ref ref="UpdateAppender"/>
    </root>
</configuration> 
```

日志文件确实被创建为 update-server.log。当这一天过去时，下一条生成的日志消息确实会导致该日志文件被重命名，但不是我期望的那样。结果名称为 update-server.log1161295506996864.tmp。而且，文件本身没有压缩，只是重命名。

我希望该文件被命名为 update-server.20120103.log 并将该文件压缩。有谁知道为什么？

作为第二个（次要）问题，我希望将原始日志文件称为 update-server-YYYYMMDD.log，但是当我尝试这样做时，创建的日志文件保持不变，并且在午夜，该文件被覆盖。我使用了下面的行，但似乎 Logback 不会增加`${today}`值：

```
<file>${CATALINA_HOME}/logs/update-server-${today}.log</file> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-28T18:27:48.077

注意日志文件路径之间的区别

```
<file>${CATALINA_HOME}/logs/update-server.log</file> 
```

和

```
<fileNamePattern>update-server.%d{yyyy-MM-dd}.zip</fileNamePattern> 
```

更新你`<fileNamePattern>`的

```
<fileNamePattern>${CATALINA_HOME}/logs/update-server.%d{yyyy-MM-dd}.zip</fileNamePattern> 
```

我遇到过同样的问题。

# algorithm - 数学组合的完美最小散列

> ID：14160942
> 
> 赞同：3
> 
> 时间：2013-01-04T16:27:50.830
> 
> 标签：algorithm, hash, combinations, perfect-hash

首先，定义两个整数`N`和`K`，其中`N >= K`，都在编译时已知。例如：`N = 8`和`K = 3`。

接下来，定义一组整数`[0, N)`（或者`[1, N]`如果这使答案更简单）并将其命名为`S`. 例如：`{0, 1, 2, 3, 4, 5, 6, 7}`

`S`带有元素的子集的数量`K`由公式给出`C(N, K)`。例子

我的问题是：为这些子集创建一个完美的最小散列。示例哈希表的大小将为`C(8, 3)`或`56`。

我不关心排序，只关心哈希表中有 56 个条目，并且我可以从一组`K`整数中快速确定哈希。我也不关心可逆性。

示例哈希：`hash({5, 2, 3}) = 42`. （数字 42 并不重要，至少在这里不重要）

是否有适用于任何值`N`和的通用算法`K`？我无法通过搜索谷歌或我自己的天真努力找到一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T16:30:28.827

有一种算法可以按照给定的所有组合的字典顺序将组合编码和解码为其编号`K`。该算法`N`对于组合的编码和解码都是线性的。你对什么语言感兴趣？

编辑：这是 c++ 中的示例代码（它在 n 元素的**所有**组合的序列中找到组合的字典序号，而不是带有`k`元素的组合，但这是一个很好的起点）：

```
typedef long long ll;

// Returns the number in the lexicographical order of all combinations of n numbers
// of the provided combination. 
ll code(vector<int> a,int n)
{
    sort(a.begin(),a.end());
    int cur = 0;
    int m = a.size();

    ll res =0;
    for(int i=0;i<a.size();i++)
    {
        if(a[i] == cur+1)
        {
            res++;
            cur = a[i];
            continue;
        }
        else
        {
            res++;
            int number_of_greater_nums = n - a[i];
            for(int j = a[i]-1,increment=1;j>cur;j--,increment++)
                res += 1LL << (number_of_greater_nums+increment);
            cur = a[i];
        }
    }
    return res;
}
// Takes the lexicographical code of a combination of n numbers and returns the 
// combination
vector<int> decode(ll kod, int n)
{
    vector<int> res;
    int cur = 0;

    int left = n; // Out of how many numbers are we left to choose.
    while(kod)
    {
        ll all = 1LL << left;// how many are the total combinations
        for(int i=n;i>=0;i--)
        {
            if(all - (1LL << (n-i+1)) +1 <= kod)
            {
                res.push_back(i);
                left = n-i;
                kod -= all - (1LL << (n-i+1)) +1;
                break;
            }
        }
    }
    return res;
} 
```

很抱歉，我有一个算法可以解决您现在要求的问题，但我相信尝试**理解**我在上面所做的事情将是一个很好的练习。事实是，这是我在“算法的设计和分析”课程中教授的算法之一，这就是我预先编写它的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-07T14:07:56.927

这就是你（和我）需要的：

`hash()`映射`k-tuples`from`[1..n]`到 set `1..C(n,k)\subset N`。努力是`k`减法（`O(k)`无论如何都是一个下限，请参见上面 Strandjev 的评论）：

```
// bino[n][k] is (n "over" k) = C(n,k) = {n \choose k}
// these are assumed to be precomputed globals

int hash(V a,int n, int k) {// V is assumed to be ordered, a_k<...<a_1
  // hash(a_k,..,a_2,a_1) = (n k) - sum_(i=1)^k (n-a_i   i) 
  // ii is "inverse i", runs from left to right

  int res = bino[n][k];
  int i;

  for(unsigned int ii = 0; ii < a.size(); ++ii) {
    i = a.size() - ii;   
    res = res - bino[n-a[ii]][i];
  }
  return res;
} 
```

# jmx - 在 tomcat7-maven-plugin 上启用 jmx

> ID：14160944
> 
> 赞同：4
> 
> 时间：2013-01-04T16:27:55.557
> 
> 标签：jmx, catalina, maven-tomcat-plugin

我想在 tomcat7-maven-plugin 上启用 JMX。如何将 CATALINA_OPTS 传递给插件配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T18:17:47.713

两种可能的解决方案（未测试）：

*   在 MAVEN_OPTS 中添加 sys 道具
*   或尝试[http://tomcat.apache.org/maven-plugin-2.2/tomcat6-maven-plugin/examples/add-system-properties.html](http://tomcat.apache.org/maven-plugin-2.2/tomcat6-maven-plugin/examples/add-system-properties.html)也适用于 tomcat7。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-11T08:18:19.547

如果你想启用 jmxremote.authenticate 然后使用它。

在 setenv.sh

```
 -Dcom.sun.management.jmxremote.port=7091 \
 -Dcom.sun.management.jmxremote.ssl=false \
 -Dcom.sun.management.jmxremote.authenticate=true \
 -Djava.rmi.server.hostname=127.0.0.1 \
 -Dcom.sun.management.jmxremote.password.file=/usr/tomcat/conf/jmxremote.password \
 -Dcom.sun.management.jmxremote.access.file=/usr/tomcat/conf/jmxremote.access" 
```

vi jmxremote.access 文件

```
monitor   readonly
admin     readwrite \
              create javax.management.monitor.*,javax.management.timer.* \
              unregister 
```

vi jmxremote.password 文件

```
monitor pass1
admin pass2 
```

更改权限

```
sudo chown tomcat7:tomcat7 /usr/tomcat/conf/jmxremote.*
sudo chmod 0600 /usr/tomcat/conf/jmxremote.* 
```

控制我们需要添加 jmx listener
/usr/tomcat/conf/server.xml 文件的端口，如下所示：

```
<Listener className="org.apache.catalina.mbeans.JmxRemoteLifecycleListener"
  rmiRegistryPortPlatform="7091" rmiServerPortPlatform="7091" /> 
```

在 tomcat lib:/usr/tomcat/lib/ 中添加 jmx jar 文件。

```
The jar we are looking for is called catalina-jmx-remote.jar. 
```

重启 tomcat 然后尝试使用 jconsole 或 jvisualvm 连接

```
参考：
1\. https://blog.markshead.com/1129/connecting-visual-vm-to-tomcat-7/

2.https://geekflare.com/enable-jmx-tomcat-to-monitor-administer/#:~:text=JMX%20(Java%20Management%20Extension)%20is,Classes%2C%20and%20configure%20various %20MBean。

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-11T12:36:46.437

在我的 .profile 中添加了以下行

```
 export MAVEN_OPTS="-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=9000 -Xmx1024m -XX:MaxPermSize=256m -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=1099 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false" 
```

# java - Hibernate Envers 如何记录额外的审计数据，例如被审计的表名

> ID：14160947
> 
> 赞同：0
> 
> 时间：2013-01-04T16:28:06.117
> 
> 标签：java, spring, hibernate, jboss, hibernate-envers

我已经实现了 Hibernate **Envers**的解决方案。

我通过创建自己的类来存储系统用户名来扩展 RevisionLister：

```
 import org.hibernate.envers.RevisionListener;

    public class CustomRevisionListener implements RevisionListener {

        public void newRevision(Object revisionEntity) {
            CustomRevisionEntity revision = (CustomRevisionEntity) revisionEntity;
            revision.setUsername(System.getProperty("user.name")); // for testing

        }

    } 
```

这可以完成工作，但我想做的是制作更全面的记录，其中包括被审计的表名。

有谁知道我怎么能做到这一点。我找不到任何与记录表名有关的文档？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T19:25:24.860

请参阅[envers 文档中的示例 15.2](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch15.html#envers-tracking-modified-entities-revchanges)如何获取修改后的实体类。然后稍微更改代码以从实体类中获取表名（假设您在实体类上使用 JPA/Hibernate 注释）：

```
public class CustomEntityTrackingRevisionListener
             implements EntityTrackingRevisionListener {
    @Override
    public void entityChanged(Class entityClass, String entityName,
                              Serializable entityId, RevisionType revisionType,
                              Object revisionEntity) {
        // either javax.persistence.Table or org.hibernate.annotations.Table
        Table tableAnnotation = entityClass.getAnnotation(Table.class);
        if (tableAnnotation != null)
          String tableName = tableAnnotation.getName();
          ((CustomTrackingRevisionEntity)revisionEntity).addTable(tableName);
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:45:25.163

我不知道 Envers 是否可以跟踪开箱即用的被审计记录的表名，但我知道它可以跟踪**实体名称**，而这可以通过[三种不同的方式启用](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch15.html#envers-tracking-modified-entities-revchanges)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-20T05:51:57.803

您可以将`DefaultTrackingModifiedEntitiesRevisionEntity`org.hibernate.envers.track_entities_changed_in_revision 参数扩展或配置为 true。

请参阅 Envers Doc：[跟踪修订期间修改的实体名称](http://docs.jboss.org/hibernate/orm/4.2/devguide/en-US/html/ch15.html#envers-tracking-modified-entities-revchanges)

# javascript - Node.js 服务器压力测试

> ID：14160949
> 
> 赞同：2
> 
> 时间：2013-01-04T16:28:10.690
> 
> 标签：javascript, node.js, reporting, load-testing, stress-testing

对 node.js 驱动的服务器进行压力测试的最佳选择是什么？我需要发送大量单个请求并测量延迟时间并验证响应。如果可能，我需要导出数据或生成图形。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T18:06:20.943

如果您愿意为这项服务支付一点费用，[blitz.io](http://blitz.io)可能是一个不错的选择。否则，[apache 基准测试](http://httpd.apache.org/docs/2.2/programs/ab.html)也是一个不错的选择，尽管您必须更加努力地进行响应验证和图形处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T18:17:52.783

一[组 JMeter 实例](http://jmeter.apache.org/usermanual/remote-test.html)可以解决问题。JMeter 可以导出所有测量结果，您可以使用 Excel^H^H^H^H^H 您最喜欢的电子表格来绘制图形。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-13T10:19:02.167

试试贝吉塔。它专注于使实现每秒请求的目标速率变得容易。我的意思是您可以每秒多次请求测试您的服务的行为。那么您的报告要求呢，您还可以在此处添加`-output`标志，该标志指定将写入二进制结果的输出文件。[github页面](https://github.com/tsenart/vegeta)上的链接。

# database-design - 大型持久类阵列结构

> ID：14160953
> 
> 赞同：2
> 
> 时间：2013-01-04T16:28:19.270
> 
> 标签：database-design, data-structures

您将使用哪种数据结构来实现类似结构的大型持久数组（大小 > 10 个 Mio 元素）

数据结构的接口应该支持以下操作：

```
YType get(IdxType idx) // random access  
void insertIdx(IdxType idx, YType yValue) // random insert   
void deleteIdx(IdxType idx) // random delete 
```

让索引为标量无符号值，`IdxType`例如标量值或结构。`unsigned long long``YType`

这些操作的复杂性永远不应大于 O(log n)，如果随机访问的复杂性在一段时间后下降到 O(1)，这将非常有效，因为对于许多用例来说，读取操作将被使用得最多。

这些要求排除了可以写入磁盘的内存数据结构（例如向量或列表），因为向量的插入复杂度是 O(n)，而列表的随机访问也是 O(n)。

**编辑**：
请注意，带有索引键的哈希映射或树状数据结构不符合要求。某个索引的值可以更改。即，当为索引插入一个值时，所有后续索引都会更改它们的值。这正是插入元素时数组中后续索引发生的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:00:43.133

You might want to use an order statistic tree, a tree data structure that supports O(log n) insertions, deletions, and lookups. Typically, order statistic trees are used to store sorted data, though it is relatively straightforward to modify them to store an unsorted sequence.

Intuitively, an order statistic tree is a binary tree where each node stores the number of children in its left subtree. That way, you can recursively look up the nth element as follows:

1.  If the tree is null, there is no element.
2.  If n is less than or equal to the number of elements in the left subtree (call it I), recursively look up the element in the left subtree.
3.  If n = k + 1, the root of the tree is the nth element.
4.  Otherwise, look up the n - k - 1st element in the right subtree.

To do an insertion before node n, use this same procedure to find the nth node and insert the new value as that nodes inorder predecessor (go left, then keep going right until you walk off the tree and insert the node there). Then walk back up the tree from nth element upward and adjust the value of k for all nodes on the insertion path that need to be updated.

To prevent the tree from getting too imbalance, you can use any standard tree balancing scheme (AVL, red/black, etc.) to keep the height at O(log n). This gives O(log n) performance for all the operations on the data structure.

Hope this helps!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:44:42.330

取决于您是否需要*同时*访问它...

## 不

如果您只需要一个可以在任何给定时间访问它的客户端应用程序，请使用内存中的结构，例如[rope](https://stackoverflow.com/a/2826448/533120)（或者甚至只是使用“数组”索引作为键的哈希表），这可以在访问和修改之间提供良好的平衡复杂。完成后，将其序列化为一个简单文件。如今，RAM 既便宜又丰富，除非每个元素都非常大，否则 1000 万个元素应该可以放入其中。

## 是的

如果您需要并发访问、事务等，请使用数据库。您的“数组”实际上是一个 B 树，其键是数组索引。如果您的 DBMS 支持，请使用[集群](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)来消除“不必要的”表堆并将所有内容保留在 B-Tree 中。像这样的东西：

```
CREATE TABLE THE_ARRAY (
    INDEX INT PRIMARY KEY,
    DATA VARCHAR(50) -- Whatever...
) ORGRANIZATION INDEX 
```

*（ORGRANIZATION INDEX 是 Oracle 特定的语法，用于其他 DBMS 中所谓的“集群”；使用适合您的 DBMS 的任何语法。）*

插入将是 O(N)（因为您需要在插入后更新索引）并且查找将是 O(log(N))。此外，一些 DBMS 支持哈希索引，这应该允许 O(1) 查找，但对于插入来说可能比 B-Tree 更糟糕。

# .net - 实施 WCF 数据服务 OData 操作

> ID：14160955
> 
> 赞同：3
> 
> 时间：2013-01-04T16:28:30.067
> 
> 标签：.net, wcf, wcf-data-services, odata

我已阅读[WCF Data Service 5.0 release notes](http://blogs.msdn.com/b/astoriateam/archive/2012/04/09/wcf-data-services-5-0-rtm-release.aspx)，其中提到了[OData 操作](http://www.odata.org/blog/2011/10/7/actions-in-odata)（不是服务方法）的实现。

在分析了一个[教程](http://blogs.msdn.com/b/astoriateam/archive/2012/04/10/actions-in-wcf-data-services-part-1-service-author-code.aspx)后，我得出结论，我需要为自己构建[实体框架的 WCF 数据服务操作提供程序](http://efactionprovider.codeplex.com/)。

那个项目只有一次签到，从那以后就没有更新过。我认为它没有错误，但根据统计数据，我不希望有太多的客户群可以分享经验。

您知道在 .NET 中实现 OData 操作的任何其他选项吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:58:11.827

您是否考虑过使用 ASP.NET Web API OData？它支持 OData 操作，并且可以直接使用 Web API 实现它们。[您可以在此博客文章](http://blogs.msdn.com/b/alexj/archive/2012/08/15/odata-support-in-asp-net-web-api.aspx)中找到更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T09:18:57.793

我认为你是对的。基本思想类似于：

```
/// <summary>
/// Invokation helper for Actions in the ReSTful world, this is provided since currently no methods exist to 
/// do this in the Microsoft Services framework that I could find.
/// </summary>
/// <typeparam name="InType">The type of the entity to invoke the method against</typeparam>
public class InvokationHelper<InType, OutType>
{

    /// <summary>
    /// Invokes the action on the entity passed in.
    /// </summary>
    /// <param name="container">The service container</param>
    /// <param name="entity">The entity to act upon</param>
    /// <param name="ActionName">The name of the action to invoke</param>
    /// <returns>OutType object from the action invokation</returns>
    public OutType InvokeAction(Container container, InType entity, string ActionName)
    {
        string UriBase = container.GetEntityDescriptor(entity).SelfLink.AbsoluteUri;
        string UriInvokeAction = UriBase + "/" + ActionName;

        Debug.WriteLine("InvokationHelper<{0}>.InvokeAction: {1}", typeof(InType), UriInvokeAction);

        try
        {
            IEnumerable<OutType> response;

            response = container.Execute<OutType>(
                new Uri(UriInvokeAction),
                "POST",
                true
                );
            return response.First();
        }
        catch (Exception e)
        {
            throw e;
        }
    }

    /// <summary>
    /// Invokes the action on the entity passed in.
    /// </summary>
    /// <param name="container">The service container</param>
    /// <param name="entity">The entity to act upon</param>
    /// <param name="ActionName">The name of the action to invoke</param>
    /// <returns>An enumeration of OutType object from the action invokation</returns>
    public IEnumerable<OutType> InvokeActionEnumerable(Container container, InType entity, string ActionName)
    {
        string UriBase = container.GetEntityDescriptor(entity).SelfLink.AbsoluteUri;
        string UriInvokeAction = UriBase + "/" + ActionName;

        Debug.WriteLine("InvokationHelper<{0}>.InvokeAction: {1}", typeof(InType), UriInvokeAction);

        try
        {
            IEnumerable<OutType> response;

            response = container.Execute<OutType>(
                new Uri(UriInvokeAction),
                "POST",
                true
                );
            return response;
        }
        catch (Exception e)
        {
            throw e;
        }
    }
} 
```

}

我相信有很多更优雅的方法可以做到这一点。如果您为此编写了任何代码，我很乐意看到它。我在语言边缘的 C#（比如创建通用方法来调用直到运行时才定义的类型的方法等）并不是最强的。

调用类似于：

```
 InvokationHelper<MyObjectType, MyObjectType> helper = new InvokationHelper<MyObjectType, MyObjectType>();

 try
 {
    MyObjectType resultObject = helper.InvokeAction(container, myServiceObject, "MyActionName");
 }
 catch (Exception e)
 {
    // Handle failure of the invokation
 } 
```

需要注意的是，为了获得扩展类型，您需要使用 [FromODataUri] 属性装饰您的 EntitySetControllers Action 方法。这将强制对传递的关键参数进行适当的 Edm 键入。如果没有这个，你会从 Edm 中得到 URI 行中修饰的类型的解析错误。例如，具有 .../EntitySet(12345L)/ActionName 之类的 URI 的 EntitySet 将在解析时引发错误。名义上，目的是将参数解码为 Edm.Int64 类型，但如果没有 [FromODataUri] 属性，则不会发生这种情况：

```
[HttpPost]
public ReturnEntityType ActionName([FromODataUri]long key)
{
    ...
} 
```

这对我来说是一个非常令人沮丧的错误，我已经将它作为错误提交给 MS。原来它只需要在输入参数上进行类型修饰。

# sql - SQL Server 查询 - 如果不匹配则返回空值

> ID：14160958
> 
> 赞同：17
> 
> 时间：2013-01-04T16:28:43.423
> 
> 标签：sql, sql-server, join

我遇到了一个由于某种原因我无法弄清楚的问题。我正在尝试编写一个连接两个表的查询，其中可能在表中找不到匹配项。如：

```
SELECT 
    Table1.IDField, Table2.IDField
FROM 
    Table1
LEFT OUTER JOIN 
    Table2 ON Table1.PersonID = Table2.PersonID
WHERE 
    (Table1.IDField = '12345')
    AND (Table2.Category = 'Foo') 
```

如果 中没有匹配项`Table2`，则不会返回任何内容。但是，如果没有匹配项，我需要它只为该列返回一个 NULL 并且仍然从`Table1`.

我已经改变了`JOIN`我能想到的一切，但无济于事。

`Table2.Category`可以包含多个其他值，因此执行一种`OR IS NULL`交易将不起作用。

所以，如果没有匹配`Table2.Category = 'Foo'`，我仍然需要它返回：

```
Table1 | Table2
----------------
 12345 |  NULL 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-04T16:33:13.300

将条件 for`table2`从您的`WHERE`子句中移到您的`JOIN`.

```
SELECT 
    Table1.IDField, Table2.IDField
FROM 
    Table1
LEFT OUTER JOIN Table2 
    ON Table1.PersonID = Table2.PersonID
    AND Table2.Category = 'Foo'
WHERE 
    Table1.IDField = '12345' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-04T16:32:26.140

尝试这个：

```
LEFT OUTER JOIN
Table2 ON Table1.PesonID = Table2.PersonID
AND Table2.Category = 'Foo' 
```

然后从 WHERE 子句中删除 'Foo' 行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T16:34:43.327

问题不在于连接本身，而在于与 table2 匹配的 where 子句中的要求。我用 where coalese(table2.category, 'Foo') = 'Foo' 解决了这个问题。这样，如果 table2 为空，它仍然会匹配。

# postgresql-9.1 - pgpool 连接被冻结

> ID：14160961
> 
> 赞同：0
> 
> 时间：2013-01-04T16:29:03.540
> 
> 标签：postgresql-9.1, connection, pgpool

我已经在流复制模式下安装了 pgpool 3.2.1 和 2 个后端，带有负载平衡和连接池。我做了一些高负载测试，试图折叠 pgpool 连接。

假设这条规则是正确的：max_pool*num_init_children <= (max_connections - superuser_reserved_connections)

测试1：

num_init_children = 90 最大池 = 1

（仅在主服务器中） max_connections = 100 superuser_reserved_connections = 3

psql -U postgres -c 'SELECT COUNT from pg_stat_activity' 的结果是 90。

测试 2：

num_init_children = 90 最大池 = 2

（仅在主服务器中） max_connections = 100 superuser_reserved_connections = 3

psql -U postgres -c 'SELECT COUNT from pg_stat_activity' 的结果是 91。其他 6 个连接达到 97 个连接会发生什么情况？这是我可以到 postgresql 的最大连接数。

在这两种情况下，我都得到了 pgpoolAdmin 中使用的所有连接，并且与数据库的连接被冻结并且不允许新的连接。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:44:27.243

在 pgpool 中，他们使用以下规则来控制连接：

max_pool*num_init_children <= (max_connections - superuser_reserved_connections)（不需要取消查询） max_pool*num_init_children*2 <= (max_connections - superuser_reserved_connections)（需要取消查询）

因此，问题是当您取消查询时，您必须在 postgresql 中设置 pgpool 中配置的双倍连接数。

# javascript - highchart的动态系列和点到错误的点

> ID：14160962
> 
> 赞同：0
> 
> 时间：2013-01-04T16:29:05.507
> 
> 标签：javascript, jquery, dynamic, highcharts

在我创建不依赖于任何手动输入的系列或系列数据的动态图表的过程中，我遇到了麻烦。我正在添加正确数量的系列和正确的数据，但它恰好位于不正确的系列或 x 轴点中。有些点偏离了 1，我相信我已经隔离了它搞砸的地方，但看不到它。

```
 function chartCreate(point) {
        var temp;
        temp = $.parseJSON(point.d);
        $.each(temp, function (key, p) {
            var seriesObj;

            seriesObj = seriesExists(p.mcAnswer);
            if (seriesObj.status == 'f') {
                var name = p.mcAnswer.replace(/^\s+|\s+$/g, '')
                //var name = p.mcAnswer.replace(/^\s+|\s+$/g, '')
                chart1.addSeries({ name: name, data: [] }, false);
                chart1.series[seriesObj.count].addPoint(p.total, false);
            } else {
                chart1.series[seriesObj.count].addPoint(p.total, false);
            }
        });
    };

    //loops through all the series to see if the series exists.
    //if true returns index and true if not just returns false
    function seriesExists(name) {
        name = name.trim();
        var ct = 0;
        var returnObj = { count: ct, status: 'f' };
        var len = chart1.series.length;
        //            var len = 0;
        if (len > 0) {
            $.each(chart1.series, function (count, curSeries) {
                ct = count;
                var temp = curSeries.name;
                temp = temp.trim();
                if (temp == name) {
                    returnObj = { count: ct, status: 't' };
                    return (false);
                } else {
                    returnObj = { count: ct, status: 'f' };
                }
                //ct = count;
            });
        }
        return returnObj;
    }; 
```

我相信错误发生在 .each seriesExists 函数中。对于传递给它的 json，一切都是为了制作它，这样当你遍历循环中的每个对象时，添加点时它就会是有序的。奇怪的是，并非所有添加的点都在错误的位置，只有一个点在错误的系列中。 ![尝试导出时出现](../Images/01e64a402268ec09b5df50868e2b5db8.png) 保存不正确的图表

![不正确的图表实际上在屏幕上看起来像什么](../Images/9973fa1cab84bfdc63fc2e3e88e09def.png) 不正确的图表只是一些关闭

![正确的图表](../Images/7f7b957b9665710861bfd809fa08237e.png) 正确的图表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:45:39.957

抱歉，我花了这么长时间才被拉到另一个项目中。通过遍历每个对象并将它们存储在临时数组中，我能够创建正确的图表。在我浏览了 ajax 调用中的所有对象之后，我将使用 addSeries 并正确创建图表。

# javascript - 自定义光标代码在 webkit 中带有一个黑色方块。我错过了什么吗？

> ID：14160964
> 
> 赞同：0
> 
> 时间：2013-01-04T16:29:10.233
> 
> 标签：javascript, jquery, html, css, cursor

我有以下代码：

```
<style type="text/css">
    #test-area {
        height: 200px;
        border: 3px dashed #CCCCCC;
        background: #FFFFFF;
        padding: 20px; 
        cursor: url(./blank.cur), none;
    }
    #mycursor {
        cursor: none;
        width: 97px;
        height: 137px;
        background: url("arrow.png") no-repeat left top;
        position: absolute;
        display: none;
        top: 0;
        left: 0;
        z-index: 10000;
    }
</style>
<script type="text/javascript">
    $(document).ready(function(){
       $('#test-area').mouseout(function(){
           $('#mycursor').hide();
           return false;
       });
       $('#test-area').mouseenter(function(){
           $('#mycursor').show();
           return false;
       });
        $('#test-area').mousemove(function(e){
            $('#mycursor').css('left', e.clientX - 20).css('top', e.clientY + 7);
        });
    });
</script> 
```

以下代码适用于 Firefox 和 Chrome（以及 Internet Explorer？）。然而，Chrome**也**显示了一个黑色方块，即使我通过将标准光标替换为空光标来隐藏它。但是，.png 文件显示在两个浏览器中。

如何使这个跨浏览器与现代浏览器兼容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:36:39.160

你应该在你的 CSS 中尝试这个：

```
#test-area {
        ...
        cursor: none; /*for chrome, let me know if its not cross browser*/
    } 
```

# bash - 如何通过管道输出包含 ${1+"$@"} 变量的脚本的输出？

> ID：14160969
> 
> 赞同：1
> 
> 时间：2013-01-04T16:29:19.570
> 
> 标签：bash, variables, parameters, grep, pipe

我想运行一堆脚本并 grep 输出。例如，运行它并具有所需的输出行：

```
$ myScript.sh 
```

运行它不会：

```
$ myScript.sh | grep something 
```

经过进一步审查，myScript.sh 中有这个：

```
#!/bin/sh     
...
$JAVA_HOME/bin/java  the.real.script.is.here ${1+"$@"} 
```

我假设“| grep something”被吸进了 $@ 列表。关于如何轻松管道输出的任何想法？谢谢！

**编辑：** 感谢大家提供有关如何解析变量的信息。问题一定是其他的。也许这就是我正在寻找的东西。在我的输出中，我正在寻找带有“/SE_2012.old”的行。我用“|grep old”再次运行脚本并**没有**输出。我用“| grep SE”运行它，得到了结果。我用“old”再次运行它，看看我是否发疯了，它确实**给**了我一个结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T16:38:40.667

首先，你的假设是不正确的。shell 很好地解析了它的命令行，以区分管道和参数。这就是为什么您需要引号来转义重定向、管道、子shell 和其他低级表达式。

现在，手头的问题：假设您在运行时没有看到*任何*输出

```
$ myScript.sh | grep something 
```

您可能会看到[缓冲](http://mywiki.wooledge.org/BashFAQ/009)*. 不幸的是，我不能确切地告诉你它是如何在 java 应用程序中发生的，所以我不能给你一个直接的解决方案，但是如果你检查 java 代码的内部，你可能会知道。

*与输出只是去标准输出以外的地方相反。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T16:38:44.007

“| grep something”不可能被吸进$@列表，所以应该还有问题。也许脚本对 tty 输出使用行缓冲，否则使用全缓冲？（您是否等待脚本完成才能得出结论它不起作用？）也许“grep something”中的“something”被解释为（意外地）与输入行不匹配的正则表达式？

*   尝试`cat`而不是`grep something`：它有效吗？
*   向我们展示“某物”的真正价值。

# ruby-on-rails - 如何在生产环境中运行 rails 生成器？

> ID：14160973
> 
> 赞同：0
> 
> 时间：2013-01-04T16:29:34.590
> 
> 标签：ruby-on-rails, activeadmin

如何在生产环境中运行 rails 生成器？

我希望以下其中一项可以工作，但没有一个可以：

```
rails generate active_admin:assets production
rails generate production active_admin:assets 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T02:06:50.937

您可以像这样在生产环境中运行它：

```
RAILS_ENV=production rails g active_admin:assets 
```

# ios - 在 iOS 中存储和执行大量操作

> ID：14160974
> 
> 赞同：3
> 
> 时间：2013-01-04T16:29:35.900
> 
> 标签：ios, numbers

How could I handle operations with a number like: 48534588306961133067968196965257961415756656521818848750723547477673457670019632882524164647651492025728980571833579341743988603191694784406703

到目前为止，我没有尝试过任何工作...... unsigned long，long long 等......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:39:48.763

您需要的是一个库，它支持对任意长度的整数的操作。但是，据我所知，没有这样的库是用 Objective-C 编写的。

不过，您很幸运，因为 Objective-C 是 C 的超集。这使您可以使用 C 库，例如在[这个有点过时的 SO question](https://stackoverflow.com/questions/1226949/biginteger-on-objective-c)的答案中描述的那些库。

此外，由于 Clang 编译器支持 C++ 并结合了 Objective-C 和 C++ 代码，您可能可以使用类似[big int](https://mattmccutchen.net/bigint/)的东西。

请注意，没有一个内置类型甚至接近于大到足以表示具有与您的示例一样多的数字的数字。最大的可用整数类型是`unsigned long long`，如果你不需要负数，它的大小是 8 字节/64 位，它给你一个范围`0-18446744073709551615`，或者最多 20 位数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-17T01:14:22.227

您可以改用[JKBigInteger](https://github.com/kirsteins/JKBigInteger)，它是 LibTomMath C 库的 Objective-C 包装器。并且非常易于使用和理解。

在你的情况下：

```
JKBigInteger *int = [[JKBigInteger alloc] initWithString:@"48534588306961133067968196965257961415756656521818848750723547477673457670019632882524164647651492025728980571833579341743988603191694784406703"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T16:34:06.587

你可以在这里试试：http: [//gmplib.org/](http://gmplib.org/)

GMP 是用于任意精度算术的免费库，可对有符号整数、有理数和浮点数进行操作。除了运行 GMP 的机器中的可用内存所暗示的精度外，对精度没有实际限制。GMP具有丰富的功能集，并且功能具有规则的接口。

# widget - 检索了 IBM Connections 4 上的外部 iwidget 的 Javascript，但未触发事件 (onView)

> ID：14160976
> 
> 赞同：0
> 
> 时间：2013-01-04T16:29:40.910
> 
> 标签：widget, ibm-connections, ibm-sbt

我有一个部署在 Connections 环境之外的 iWidget。这个 iWidget 在 WebSphere Portal 8（iWidget Wrapper）中工作。可以将 iWidget 添加到社区并加载初始文本。

永远不会调用 onView() 或其他事件，从而导致 iWidget 显示初始消息并且永远不会替换“div”。我以不同的方式更改了 javascript 的 src，./javascript 是最新的。

Firebug 显示通过社区/代理上下文根成功检索 js (widget.xml)。

这是 iWidget XML：

```
<iw:iwidget id="365DocsWidget" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"     xmlns:iw="http://www.ibm.com/xmlns/prod/iWidget" supportedModes="view edit" mode="view" lang="en" iScope="365DocsWidgetScope" sandbox="false" allowInstanceContent="true"><iw:itemSet id="pref"><iw:item id="documentlist" value="https://fire3ice.sharepoint.com/sites/demo4if/_api/Web/Lists(guid'cca56100-1f15-461b-92f3-d1da80ba1ca8')"/></iw:itemSet><iw:resource src="./javascript/365DocsWidget.js" /> <iw:content mode="view"><![CDATA[<div id="ROOT_DIV">Hello World, last time this widget was updated:  2013-01-04 16:07:17</div>]]></iw:content><iw:content mode="edit"><![CDATA[<div id="EDITMODE_DIV">Hello Edit World</div><div><input type="button" name="selectDocumentList" value="selectDocumentList" onclick="iContext.iScope().changeDocumentList()" /> </div> ]]></iw:content></iw:iwidget> 
```

widget.xml 可在此处公开访问： [https ://eog-fire-ice.appspot.com/365DocsWidget.jsp](https://eog-fire-ice.appspot.com/365DocsWidget.jsp)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:42:27.690

当我在 JavaScript 文件中有错字时，我也看到了这一点。请浏览 JavaScript 文件并确保没有缺少逗号或分号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:14:46.793

这可能是由于 iWidget 的 Javascript 资源未被识别为 Javascript，因此未加载。你能在 JS 文件的响应上`Content-Type`设置一个吗？`application/javascript`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-19T08:53:03.670

你的 xml 和 js 不匹配。

1.  您的 xml 中的 iScope 是“365DocsWidgetScope”
2.  在您的 js 中声明的对象是“J365DocsWidgetScope”（在[https://eog-fire-ice.appspot.com/javascript/365DocsWidget.js](https://eog-fire-ice.appspot.com/javascript/365DocsWidget.js)中）

将“J365DocsWidgetScope”替换为“365DocsWidgetScope”应该可以解决问题。

# security - JavaEE - 声明式安全 - 表单登录系统

> ID：14160985
> 
> 赞同：3
> 
> 时间：2013-01-04T16:30:06.303
> 
> 标签：security, jakarta-ee, tomcat, el

当我通过 web.xml (Tomcat) 中的 FORM 指定安全登录系统时，如果身份验证不成功，有没有办法通过使用 EL 的通知 form-error-page jsp 捕获错误或异常？

我问这个是因为我想使用在 form-login-page 中指定的相同 JSP 表单作为 form-error-page jsp，因此 JSTL Core c:if 对于通过以下方式捕获最终异常很有用${not empty pageContext.exception}。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T19:26:21.670

只需检查它是否在回发时转发给自己（这意味着存在错误）。您可以通过检查`javax.servlet.forward.request_uri`请求属性（表示最终用户在浏览器地址栏中看到的请求 URI）是否不以`/j_security_check`while `HttpServletRequest#getMethod()`equals to结尾来检查`POST`。

```
<c:if test="${pageContext.request.method == 'POST' && fn:endsWith(requestScope['javax.servlet.forward.request_uri'], '/j_security_check')}">
    <span class="error">Unknown login, please try again.</span>
</c:if> 
```

# iphone - 当地图区域更改为中心引脚并且并非一直有效时，选择注释工作 1 到 2 次

> ID：14160989
> 
> 赞同：1
> 
> 时间：2013-01-04T16:30:18.443
> 
> 标签：iphone, ios, ios5, ios4, ios6

我在注释视图中有问题当我第一次在注释中点击它标注完美并在 MapView 中心设置注释但在我更改区域并再次点击注释后它只是在地图视图中心但现在标注气泡。请检查下面的 DidselectAnnotationView 方法是否有问题。

```
-(void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view
 {

    region.center.latitude =  view.annotation.coordinate.latitude ;
    region.center.longitude = view.annotation.coordinate.longitude;

   CLLocationCoordinate2D pointLocation =
  CLLocationCoordinate2DMake(view.annotation.coordinate.latitude,     
  view.annotation.coordinate.longitude);
  [self.mapViewAlert setCenterCoordinate:pointLocation animated:TRUE];

   [(MKMapView*)self.mapViewAlert selectAnnotation:myAnnotation animated:YES];

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-18T17:24:51.080

尝试。

```
MKCoordinateRegion region = { { 0.0, 0.0 }, { 0.0, 0.0 } };
region.center.latitude =  view.annotation.coordinate.latitude ;
region.center.longitude = view.annotation.coordinate.longitude;

region.span.longitudeDelta = 0.05f;
region.span.longitudeDelta = 0.05f;
[self.mapView setRegion:region animated:YES]; 
```

# php - 来自连接实体的 Symfony 表单实体

> ID：14160990
> 
> 赞同：1
> 
> 时间：2013-01-04T16:30:26.000
> 
> 标签：php, symfony-2.1, symfony-forms

我想创建一个如下所示的表单选择字段：

```
<select>
<option value="product.product_id">product_details.detail_name</option>
etc...
</select> 
```

值不是问题，问题在于标签。

我有一个产品实体和一个 productDetails 实体，其中包含有关产品的翻译数据。

所以，在我的表单类型类中，在 buildForm 方法中，我有这个：

```
 $builder->add('product', 'entity', array(
        'class' => 'MyBundle:Product',
        'property' => 'details.detail_name',
        'query_builder' => function(EntityRepository $er) {
            return $er->createQueryBuilder('p')
                ->select('p, pd')
                ->join('p.details', 'pd')
                ->where('pd.language_id = :lang')
                ->setParameter('lang', 'en');
        })); 
```

我希望属性是 details.detail_name。

我为此属性值尝试了不同的值。像“details.detail_name”、“pd.detail_name”和“p.details.detail_name”。

但似乎不可能让属性显示详细信息名称。

当我使用上述代码时，我收到此错误：

```
Neither property "detail_name" nor method "getDetailName()" nor method "isDetailName()" exists in class "Doctrine\ORM\PersistentCollection" 
```

这个 getDetailName() 方法确实存在于 ProductDetails 实体中，我检查了这些实体，它们似乎都没有问题。此外，当我在表单之外使用这些实体时，它们也能正常工作。

我还尝试直接在我的数据库上执行结果查询，它给了我预期的结果。detail_name 使用正确的语言。

那么，有人可以帮助我如何通过连接查询制作我想要的选择列表吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T15:08:17.777

我终于设法让这个工作。下面，我将展示我是如何做到这一点的，以防其他人遇到同样的问题。

我现在正在使用自定义表单类型。

在 setDefaultOptions 中，我调用了一个存储库方法，它返回一个带有“product_id”=>“detail_name”的数组。

```
class ProductChoiceType extends AbstractType
{
    private $repository;

    public function __construct(EntityRepository $repository)
    {
        $this->repository = $repository;
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
                'choices' => $this->repository->findAllProductsForForm('nl', true)
            ));
    }

    public function getParent()
    {
        return 'choice';
    }

    public function getName()
    {
        return 'product_choice';
    }
} 
```

在 $this->repository->findAllProductsForForm 方法中，我使用查询和 foreach 循环使数组适合选择列表。

然后，我必须在我的 services.xml 文件中注册存储库和此类型：

```
<service id="mybundle.repository.product"
         factory-service="doctrine.orm.default_entity_manager"
         factory-method="getRepository"
         class="MyBundle\Repository\ProductRepository" >
    <argument>MyBundle:Product</argument> <!-- not sure why I need this, but it wouldn't work without it -->
</service>

<service id="mybundle.xxx.form.product_choice_type" class="Mybundle\Form\Type\ProductChoiceType">
    <argument type="service" id="mybundle.repository.product" />
    <tag name="form.type" alias="product_choice" />
</service> 
```

然后，在根表单类型（我认为它被称为）中，我使用“product_choice”作为表单类型。

我不确定这是否是最好的方法，但至少它有效。

现在我只需要弄清楚如何将用户的当前语言传递到存储库，但这是以后的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T14:45:23.520

从我看到的你的方法`Product::getDetails`返回`Doctrine\ORM\PersistentCollection`不是“ProductDetails”实体（所以集合不是单个对象）。这意味着产品使用一对多/多对多关联与细节相关。

您可以尝试从产品详细信息方面进行操作：

```
$builder->add(
    'product',
    'entity',
    array(
        'class' => 'MyBundle:ProductDetails',
        'property' => 'detail_name',
        'query_builder' => function(EntityRepository $er) {
            return $er->createQueryBuilder('pd')
                ->select('pd, p')
                ->join('pd.product', 'p')
                ->where('pd.language_id = :lang')
                ->setParameter('lang', 'en');
         }
    )

); 
```

# javascript - 上传文件asp.net mvc时如何获取客户端文件路径？

> ID：14160992
> 
> 赞同：0
> 
> 时间：2013-01-04T16:30:29.063
> 
> 标签：javascript, jquery, asp.net-mvc

我想采用客户端文件路径，可能是通过 javascript 或服务器端代码（使用 asp.net MVC）。有人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:31:19.117

这是不可能的，也不应该是不可能的。这在 IE6 中是可能的，但由于显而易见的原因，这是一个主要的安全问题。

如果您想从本地文件系统获取路径名，您将不得不要求用户手动输入它或使用 java 或 flash 插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-06T10:38:08.103

这样做也许是可能的......

```
public ActionResult UploadFile(HttpPostedFile File) {

    var clientPath = Path.GetFullPath(File.FileName);
    return view();

} 
```

# asp.net-mvc - MVC 4：为共享视图 _Layout.cshtml 创建控制器

> ID：14160995
> 
> 赞同：3
> 
> 时间：2013-01-04T16:30:46.170
> 
> 标签：asp.net-mvc, asp.net-mvc-4, razor

你如何做到这一点？该视图是自动生成的。例如，当我手动添加视图时：其中包含 Index.cshtml 文件的联系人视图。

我可以通过编写控制器联系人来修改此视图。

```
 public class ContactController : Controller
{
    public ActionResult Index()
    {
        @ViewBag.Test = "this text will be used in my Contact View";

        return View();
    }
} 
```

所以在我的联系人视图中我可以这样做

```
<p> @Viewbag.Test </p> 
```

并且将显示文本。但是，您如何在我的共享视图中为我的 _Layout.cshtml 文件实现这一点？我通过添加 SharedController 尝试了同样的方法，但没有以这种方式工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:34:38.073

_Layout.cshtml 不能有控制器。该文件用于任何视图的布局。例如，查看 Views 文件夹中的 _ViewStart.cshtml 文件：

```
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
} 
```

这基本上告诉所有控制器使用该布局作为控制器操作返回的视图的包装器。

您的 _Layout.cshtml 文件已经提示了一种使用值填充它的方法：

```
<head>
    ...
    <title>@ViewBag.Title</title>
    ...
</head> 
```

如果您在视图中执行以下操作，它将在 _Layout.cshtml 文件的 head/title 部分中呈现：

```
@{
    @ViewBag.Title = "Home";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T16:40:44.667

_Layout 不需要控制器。您的联系人视图被添加到 _Layout 以创建一个完整的视图。因此，您也可以在 _Layout 中使用联系人控制器中的任何 ViewBag 属性。_Layout 可以访问与您的联系人视图相同的变量。

具体来说，在您的示例中：

```
public class ContactController : Controller
{
    public ActionResult Index()
    {
        @ViewBag.Test = "this text will be used in my Contact View";

        return View();
    }
} 
```

ViewBag.Test 也可以在 _Layout 中访问，就像在您的联系人视图中一样。