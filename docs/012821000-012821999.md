# StackOverflow 问答 12821000-12821999

# java - JSP表单选择与地图绑定

> ID：12821002
> 
> 赞同：0
> 
> 时间：2012-10-10T13:52:27.590
> 
> 标签：java, spring, model-view-controller, jsp, el

我正在尝试将地图元素绑定到来自 JSP 的选择值。select 的元素来自不同的地图，但两个地图中的 keySet 相同。

部分java代码：

```
private Map<String, List<String>> customCriteriaMap = new HashMap<>();
private Map<String, String> activeCustomCriteria = new HashMap<>(); 
```

例如：customCriteriaMap 有 1 个条目：

```
key: International, value: list contains: true, false 
```

activeCriteriaMap 也有 1 个条目：

```
kry: International, value: true 
```

现在在选择和提交表单上选择 false 后，我想在 activeCriteriaMap 中输入：

```
key: International, value: false 
```

jsp代码：

```
<div class="grid_6 two">
    <c:forEach items="${settingsForm.customCriteria}" var="actualCriteriaValues">
        <c:set var="actualCriteriaKey" value="${actualCriteriaValues.key}" />
        <c:set var="activeCriteria" value="${settingsForm.activeCustomCriteria[actualCriteriaKey]}"/>
        <label>Criteria:</label>
        <form:select path="activeCustomCriteria[${actualCriteriaKey}]" >
            <c:forEach items="${actualCriteriaValues.value}" var="actualCriteriaValue">
                <c:set var="optionLabel" value="${actualCriteriaValue}"/>
                <c:choose>
                    <c:when test="${optionLabel eq 'N'}">
                        <c:set var="optionLabel" value="False"/>
                    </c:when>
                    <c:when test="${optionLabel eq 'Y'}">
                        <c:set var="optionLabel" value="True"/>
                    </c:when>
                </c:choose>
                <form:option value="${actualCriteriaValue}" label="${optionLabel}"/>
            </c:forEach>
        </form:select>
    </c:forEach>
</div> 
```

从 select 和 submit 中选择不同的值后，activeCustomCriteria 中的值不会改变。它总是相同的 - 默认值。

在此先感谢，马雷克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:07:34.673

好的，

这种代码和平工作得很好，问题出在一个拦截器上。仍然可以将此代码视为示例如何使用一张地图填充选择和另一张地图进行绑定:)

# c - 如何在 C 中的 conio.h 下停止文本颜色功能以将输出对齐？有没有办法在 C 中将文本属性重置为正常

> ID：12821005
> 
> 赞同：2
> 
> 时间：2012-10-10T13:52:43.013
> 
> 标签：c, text-alignment, textcolor, text-coloring, conio

```
int main()
{
    int i ;
    clrscr();
    for(i = 0; i <= 6; i++) {
        if(i % 2 == 0) {
            **textcolor(2);**
            cprintf("%d\n", i);
        }

        if(i % 2 != 0) {
            **textcolor(3);**
            cprintf("%d\n", i);
        }
    }
    getch();
} 
```

输出：（所有偶数为绿色，赔率为蓝色）

```
0

 1

  2

   3

    4

      5

        6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:57:33.050

可能`\n`按字面意思使用，仅执行换行（= 跳转到下一行并将光标保持在同一列）并且没有回车（= 将光标放在行首）。`\n`将调用中的 s 更改`cprintf`为`\r\n`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:58:09.313

Windows 中的换行符是`"\r\n"`. 显然，`cprintf`没有转换`'\n'`成正确的顺序，所以你所做的只是用换行符转到下一行，但如果行`'\r'`（回车），你不要把“光标”放在开头。

# google-apps-script - 使用 Google Apps 脚本在电子表格中授权 OAuth？

> ID：12821010
> 
> 赞同：4
> 
> 时间：2012-10-10T13:52:54.233
> 
> 标签：google-apps-script, google-sheets

我有一个使用 OAuth 的脚本。

当我在脚本编辑器中运行该函数时，我得到了授权弹出窗口，它工作正常。但是当我在电子表格中运行它时，什么也没有发生。

我猜这与回调 URL 有关？它`script.google.com`在服务的 ( [Xero](http://blog.xero.com/developer/api-overview/) ) API 设置中设置为，但电子表格位于`docs.google.com`. 我也尝试将其设置`docs.google.com`为，但仍然没有任何反应。

如何在电子表格本身中请求授权，而无需在脚本编辑器中进行授权？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:17:54.647

很长一段时间以来都有[一个未解决的问题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=677)（677）......我们都希望有一个解决方案，而不是必须打开脚本编辑器。

我知道在这种情况下它不会改变你的任何东西，但至少你知道你并不孤单；）

# jquery - 使用每个通过错误将单个功能转换为多个元素

> ID：12821014
> 
> 赞同：-1
> 
> 时间：2012-10-10T13:53:11.817
> 
> 标签：jquery

我写了一个函数来自定义 html5 视频控制器。它工作正常，后来我在页面中没有实例，所以我打开了函数，使用每个元素到多个元素，但它抛出了错误..

我的功能有什么问题？请建议..

我的功能：

```
var videoProcess = function (videoHolder) {
    var videoContainer = videoHolder,
        videoElement = videoContainer.find('video'),
        videoControler = videoContainer.find('span');

    videoControler.add(videoElement).bind('click',function () {
        videoElement.get(0).paused === false ?  videoElement.get(0).pause() : videoElement.get(0).play();
        videoElement.get(0).ended === true ? videoElement.get(0).play() : videoElement.get(0).ended === true;
    } );

    videoElement.bind('play',function () {
        videoControler.hide().removeClass('play').addClass('pause');
    } )

    videoElement.bind('ended',function () {
        videoControler.show().removeClass('pause').addClass('play');
    } )

    videoContainer.mouseleave(function () {
        videoContainer.mouseenter(function () {
            videoControler.show();    
        } ).mouseleave(function () {
            if(videoElement.get(0).paused === false && videoElement.get(0).ended === false ){
                videoControler.hide();    
            }

        } )    
    } )

    videoElement.bind('pause',function () {
        videoControler.show().removeClass('pause').addClass('play');
    } )
}

$(document).ready(function () {
     if($('video').length){
        $.each($('.video-holder'), function(num,val){ // i have no.of video-holder
            videoProcess(val);    
        } )
    }
} ); 
```

我得到的错误：

```
TypeError: videoContainer.find is not a function [Break On This Error]  

videoElement = videoContainer.find('video'), 
```

更新功能：

```
var videoProcess = function (videoHolder) {
    var videoContainer = $(videoHolder),
        videoElement = videoContainer.find('video'),
        videoControler = videoContainer.find('span');

    videoControler.add(videoElement).bind('click',function () {
        videoElement.get(0).paused === false ?  videoElement.get(0).pause() : videoElement.get(0).play();
        videoElement.get(0).ended === true ? videoElement.get(0).play() : videoElement.get(0).ended === true;
    } );

    videoElement.bind('play',function () {
        videoControler.hide().removeClass('play').addClass('pause');
    } )

    videoElement.bind('ended',function () {
        videoControler.show().removeClass('pause').addClass('play');
    } )

    videoContainer.mouseleave(function () {
        videoContainer.mouseenter(function () {
            videoControler.show();    
        } ).mouseleave(function () {
            if(videoElement.get(0).paused === false && videoElement.get(0).ended === false ){
                videoControler.hide();    
            }

        } )    
    } )

    videoElement.bind('pause',function () {
        videoControler.show().removeClass('pause').addClass('play');
    } )
}

$(document).ready(function () {   
    if($('video').length){
        $('.video-holder').each(videoProcess($(this)));
    }

} ); 
```

html: 重复次数

```
 <div class="video-holder">
            <video autobuffer poster="images/common-poster.png">
                <source src="Video/webm/Task_1.0_Host_treated.webm" type="video/webm" />
                <source src="Video/ogv/Task_1.0_Host_treated.ogv" type="video/ogg" />
                <source src="Video/MP4/Task_1.0_Host_treated.mp4" type="video/mp4" />
            </video>
            <span class="play">play th is</span>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:42:34.950

我得到了修复，我这样调用我的函数：

```
$(document).ready(function () {

if($('video').length){
        $('.video-holder').each(function(num,element) {
            videoProcess(element);
        });
}

}); 
```

没什么特别的，我在尝试使用单个参数之前添加了一个参数为“num”，所以它只有错误的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:55:56.913

把代码改成这样……

```
var videoContainer = $(videoHolder),
    videoElement = videoContainer.find('video'),
    videoControler = videoContainer.find('span'); 
```

您需要转换`videoHolder`为 jQuery 对象。

# javascript - 如何使用 Javascript 创建具有特定自定义数据属性的 div 数组

> ID：12821021
> 
> 赞同：1
> 
> 时间：2012-10-10T13:53:19.533
> 
> 标签：javascript, html

我在一个页面上有一堆 div，它们有一个“数据类型”的自定义数据属性

```
<div id="155544" data-type="form" data-form-id="155544">

<div data-type="question" data-question-id="119709" data-mandatory="True"></div>
<div data-type="question" data-question-id="119710" data-mandatory="True"></div>

</div>

<div id="155554" data-type="form" data-form-id="155554">

<div data-type="question" data-question-id="119711" data-mandatory="True"></div>
<div data-type="question" data-question-id="119712" data-mandatory="True"></div>

</div> 
```

这基本上是代码，我只是取出了实际内容以避免混淆。

我想使用 Javascript 来找出有多少 div 具有“表单”的数据类型，以便我对它们做一些事情。

我发现这个[Hide or show all divs for a certain value of a data attribute](https://stackoverflow.com/questions/11909219/hide-or-show-all-divs-for-a-certain-value-of-a-data-attribute)这与我想做的类似，除了我试图不使用 jQuery。

有什么解决办法吗？

编辑：我还应该提到我试图不直接使用 div“id”，因为它们是动态创建的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:55:27.897

如果不使用 JQuery，您可能会使用[querySelectorAll](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)

```
elementList = document.querySelectorAll('div[data-type="form"]'); 
```

[演示](http://jsfiddle.net/nTDu2/)（打印他们的号码）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:00:42.930

您可以使用`querySelectorAll` [MDN](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)获取 Nodelist，如果需要，您可以将其转换为数组（以及类似 的松散物品`.namedItem()`）：

```
var divs = document.querySelectorAll('div[data-type="form"]');
var arrayOfDivs = Array.prototype.slice.apply(divs,[0]); 
```

# android - Android中的进程和任务

> ID：12821026
> 
> 赞同：1
> 
> 时间：2012-10-10T13:53:33.153
> 
> 标签：android

有人可以让我知道android中的进程和任务有什么区别吗？据我了解，每当您启动应用程序时，它将在单独的进程中运行。我对吗？
一个应用程序可以包含多个活动，这些活动可以在相同或不同的进程中运行。
任务是一组活动（有序）。
一个进程可以包含多个任务。
请区分两者。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T13:57:46.203

1.  过程是一个低层次的概念。它基本上对在您的应用程序中启动的线程进行分组（其中包括 UI 线程）。

2.  任务是一个高级概念。它是一组活动，它们之间具有逻辑联系（例如用例场景）

粗略地说：您的应用程序任务将由呈现给用户的活动组成，这意味着运行一个或多个线程来完成他们设计的工作，这些工作将在您的应用程序进程中运行。

# css - 不使用 iPad？

> ID：12821028
> 
> 赞同：0
> 
> 时间：2012-10-10T13:53:39.427
> 
> 标签：css, ipad, drupal, menu

我有一个网站，我在其中使用没有父菜单点的下拉菜单，请参阅：[http](http://wittmerperformance.com/site) ://wittmerperformance.com/site 现在，我刚刚得知空下拉菜单 (SERVICES) 不适用于 iPad。不幸的是，我没有要验证的 iPad。

有人可以让我知道如何让它也正确显示在 iPad 上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:05:03.213

不会让我感到惊讶，我的 iPhone 也遇到了 iOS6 的问题。通常，您仍然需要执行 a，然后设置 href="#" 以使其在触摸屏设备上工作，因为它创建了一个区域，用户可以单击该区域创建伪悬停/活动状态，然后触发下拉.

所以：

```
<a href="#">Services</a> 
```

而不是你的`<span>.`

# node.js - Nodejs Restful 身份验证

> ID：12821030
> 
> 赞同：6
> 
> 时间：2012-10-10T13:53:45.353
> 
> 标签：node.js, rest, authentication, token, restify

我是 Nodejs 的新手，我正在使用 restify 做一个安静的[服务器](https://github.com/mcavage/node-restify)。所以，我有一个场景，我有很多设备（具有唯一 ID）通过休息更新数据。我想要做的是对它们进行身份验证并提供一个身份验证令牌。像这样的东西：

第一次：uri/api/auth -> 获取令牌。

然后：uri/api/product/.... -> 带有令牌和更新产品

我尝试使用[restify-node-token](https://github.com/naxhh/restify-token-auth) ，但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-07-18T06:50:20.463

JWT 是一种非常扩展且易于使用的身份验证方法，有许多实现它的库。它有几个优点，比如令牌中加密了用户信息，因此您无需在每次请求时访问数据库来验证用户身份。您可以在此处查看代码示例[https://solidgeargroup.com/refresh-token-autenticacion-jwt-implementacion-nodejs?lang=es](https://solidgeargroup.com/refresh-token-autenticacion-jwt-implementacion-nodejs?lang=es) 它还实现了刷新令牌以在到期时生成新令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T17:59:38.423

[http://passportjs.org/](http://passportjs.org/)

这是 express.js 的一个库，但我非常强大。我建议你看看。使用 express.js 设置你已经拥有的东西只需要很少的工作。

# mysql - 如何在 SQL 中实现 set like 行为？

> ID：12821031
> 
> 赞同：1
> 
> 时间：2012-10-10T13:53:44.263
> 
> 标签：mysql, sql, group-concat

假设我有`dogs(dogid)`一张桌子和`fleas(fleaid)`一张桌子，而另一张桌子上`dogs_favorite_fleas(dogid,fleaid)`的狗可以将他最喜欢的跳蚤列在`dog_favorite_fleas`. 如何创建一个查询/临时表列出所有独特的跳蚤集并计算它们？例如，让我们说`Rex`喜欢`flea a`和`flea b`，并且`Spot`喜欢“跳蚤 a`and`跳蚤 c `, and`Lassie`likes`跳蚤 b`and`跳蚤 a”。查询的结果应该是：

```
fleas          |count
-------------------------
flea a, flea b |2
flea a, flea c |1 
```

**注意**：有约 5000 种不同的跳蚤和约 450 万只狗。

进行此查询的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:56:37.163

[`GROUP_CONCAT`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)与 一起使用`GROUP BY`：

```
SELECT GROUP_CONCAT(f.flea SEPARATOR ', ') AS 'fleas', COUNT(df.dogid) 'Count'
FROM dogs_favorite_fleas df 
INNER JOIN fleas f ON df.fleaid = f.id
INNER JOIN dogs d ON df.dogid = d.id
GROUP BY df.dogid 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/1f95a/1)

**更新：**如果您想计算有多少分组跳蚤列表，请将上一个查询包含在子查询中并使用`GROUP BY`with`COUNT`像这样：

```
SELECT fleas, COUNT(fleas) 'COUNT'
FROM
(
   SELECT GROUP_CONCAT(f.flea SEPARATOR ', ') AS 'fleas'
   FROM dogs_favorite_fleas df 
   INNER JOIN fleas f ON df.fleaid = f.id
   INNER JOIN dogs d ON df.dogid = d.id
   GROUP BY df.dogid
   ORDER BY f.flea
) t
GROUP BY fleas 
```

## [更新的 SQL Fiddle 演示](http://www.sqlfiddle.com/#!2/98e57/4)

# javascript - 比较 Datepicker 日期 Javascript

> ID：12821033
> 
> 赞同：6
> 
> 时间：2012-10-10T13:53:48.520
> 
> 标签：javascript, jquery, datepicker

我正在尝试比较两个`datepicker`日期，看看它们是否相隔超过 7 天。

我该怎么做？

我通常只会看看他们的差异是否大于 7，但这不会考虑几个月等。

这是我的代码：

```
var datepickerBegin = $("#datepicker_start").val();
var datepickerEnd = $("#datepicker_to").val();

if (datepickerBegin - datepickerEnd > 7) { 
    alert('more than a week apart!') 
} 
```

有小费吗？？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-10T14:00:29.960

用于`$("#datepicker_xxx").datepicker("getDate")`将选择的日期作为`Date`. 那么这只是一个问题

```
end - begin > 7 * 86400 * 1000 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T14:14:22.660

// 检查日期范围，86400000 是一天的毫秒数

```
var difference = (datepickerEnd- datepickerBegin ) / (86400000 * 7);
if (difference < 0) {
  alert("The start date must come before the end date.");
  return false;
}

if (difference <= 1) {
  alert("The range must be at least seven days apart.");
  return false;
}

return true; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-21T15:12:42.370

试试这个，DatePicker 有一个方便的 formatDate 函数，我用它来比较 mm/dd/yy 日期：

```
$.datepicker.formatDate("dd/mm/yy",new Date("09/01/2014")) < $.datepicker.formatDate("dd/mm/yy", new Date("10/01/2014")); // Returns true
$.datepicker.formatDate("dd/mm/yy",new Date("10/01/2014")) < $.datepicker.formatDate("dd/mm/yy", new Date("10/01/2014")); // Returns false
$.datepicker.formatDate("dd/mm/yy",new Date("11/01/2014")) < $.datepicker.formatDate("dd/mm/yy", new Date("10/01/2014")); // Returns false
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T13:14:53.260

试试这个：

```
var datepickerBegin = $("#datepicker_start").val(); // lets, returning in mm/dd/yy format
var datepickerEnd = $("#datepicker_to").val(); // lets, returning in mm/dd/yy format

if ( ($.datepicker.parseDate('mm/dd/yy', datepickerBegin) -  $.datepicker.parseDate('mm/dd/yy', datepickerEnd)) > 7) {
alert('more than a week apart!') ;
} 
```

希望它应该工作。谢谢。如需更多信息[，请查看](http://docs.jquery.com/UI/Datepicker/parseDate)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-21T21:40:06.427

```
$(document).ready(function(){
    $("#txtFromDate").datepicker({
        minDate: 0,
        maxDate: "+60D",
        numberOfMonths: 2,
        onSelect: function(selected) {
          $("#txtToDate").datepicker("option","minDate", selected)
        }
    });
    $("#txtToDate").datepicker({ 
        minDate: 0,
        maxDate:"+60D",
        numberOfMonths: 2,
        onSelect: function(selected) {
           $("#txtFromDate").datepicker("option","maxDate", selected)
        }
    });  
}); 
```

从：`<input type="text" id="txtFromDate" />`

到：`<input type="text" id="txtToDate" />`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-18T07:45:48.347

这工作得很好

```
function checkDateDifference(startDate, endDate) {
    startDate = $.datepicker.parseDate('mm/dd/yy', startDate);
    endDate = $.datepicker.parseDate('mm/dd/yy', endDate);

    var difference = (endDate - startDate) / (86400000);
    alert(difference)
    if (difference < 0) {
        showError("The start date must come before the end date.");
        return false;
    }
    return true;

} 
```

# php - SQL，PHP，多个表，记录集，需要建议

> ID：12821039
> 
> 赞同：0
> 
> 时间：2012-10-10T13:54:10.867
> 
> 标签：php, mysql, recordset

Tbl_bands PRI 出价 Tbl_Albums PRI 援助 Tbl_Tracks PRI tid Tbl_Tabs PRI tabid

乐队的 PHP 页面：我想在每张专辑下显示该乐队的所有专辑 我想在每首曲目下显示该专辑的所有曲目 我想列出与该曲目相关的所有选项卡（如果可用）

你建议用什么方法来实现这一点 php/mysql

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:00:41.253

像这样的东西应该给你你想要的数据。在需要的地方添加 WHERE 子句并按您希望接收结果集的顺序排序。

通过使用 LEFT JOINS，您还可以获得没有专辑的乐队、没有曲目的专辑或没有标签的曲目。

```
SELECT 
  Tbl_bands.*,
  Tbl_Albums.*,
  Tbl_Tracks.*,
  Tbl_Tabs.*
FROM 
  Tbl_bands
LEFT JOIN 
  Tbl_Albums
ON 
  Tbl_bands.bid = Tbl_Albums.BandId
LEFT JOIN
  Tbl_Tracks 
ON 
  Tbl_Albums.aid = Tbl_Tracks.AlbumId
LEFT JOIN
  Tbl_Tabs
ON
  Tbl_Tracks.tid = Tbl_Tabs.TrackId
WHERE
  // conditions
ORDER BY 
  // columns
LIMIT
  0, 1000 
```

# ruby-on-rails-3 - validates_format_of ：电子邮件抛出错误

> ID：12821042
> 
> 赞同：0
> 
> 时间：2012-10-10T13:54:19.177
> 
> 标签：ruby-on-rails-3

Validates_format_of : api.rubyonrails.org 上提供的电子邮件示例正在引发错误。

class Person < ActiveRecord::Base validates_format_of :email, :with => %r\A([^@\s]+)@((?:[-a-z0-9]+.)+[az]{2 ,})\Z/, :on => :create end

验证 :email, :format => { :with => %r\A([^@\s]+)@((?:[-a-z0-9]+.)+[az]{2,} )\Z/, :on => :create }

目前我正在使用 rails 3.2.8 版本。

在加载获取错误为“语法错误，意外']'，期待keyword_end”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:58:17.397

validates_format_of :email, :with => /\A([^@\s]+)@((?:[-a-z0-9]+.)+[az]{2,})\Z/i, :on => :创建

# javascript - 如何使用 xul 在 Windows 中搜索和写入 putty.exe 路径到文本文件？

> ID：12821046
> 
> 赞同：0
> 
> 时间：2012-10-10T13:54:39.443
> 
> 标签：javascript, firefox, firefox-addon, xul, browser-addons

我尝试使用 xul 在 windows cmd 中运行命令来搜索 putty.exe 位置并将输出写入文本文件。

我使用了下面的代码。但它会打开 cmd 窗口一秒钟并显示“找不到文件”，然后 cmd 窗口会自动关闭。

```
 Components.utils.import("resource://gre/modules/FileUtils.jsm");
    env = Components.classes["@mozilla.org/process/environment;1"]

    if(osName=='WINNT')
    {
        var shell = new FileUtils.File(env.get("COMSPEC"));
        var args = ["/c", "cd\ & C: & dir /s /b putty.exe > E:\\process.txt"];
    }

    process = Components.classes["@mozilla.org/process/util;1"]
                            .createInstance(Components.interfaces.nsIProcess);
    process.init(shell);
    process.runAsync(args, args.length);
    }, false, true); 
```

我在win xp和7上都检查了这段代码..但没有得到结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:43:30.000

如果你让用户指向文件不是更好吗？（通过[`nsIFilePicker`](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIFilePicker)）

# java - 我可以使用运行时参数来修复 Java 中的错误 API 调用吗？

> ID：12821047
> 
> 赞同：5
> 
> 时间：2012-10-10T13:54:44.750
> 
> 标签：java, swing, applet, jtree, illegalstateexception

不确定这是否是正确的提问地点，但我遇到了 Java 问题。我有一些适用于 Java 6 但不适用于 Java 7 的 Java 代码，错误是：

```
java.lang.IllegalStateException: This function should be called while holding treeLock 
```

使用 Java6 有效，但我们的一些外部用户正在运行 Java 7。我发现错误是由对 的调用引起的，该调用`validateTree()`在 java6 中有效，但在 Java7 中我们需要调用`validate()`. 当我在本地测试它时，它可以工作。

这是我的问题，我开始在一家大公司工作，他们不会让我们对代码进行任何更改，直到它被彻底检查（我的工作更改将在 2013 年 4 月生效）但在那之前我们的用户是生气。我对 Java 不是最好的，我想知道是否有一种方法可以传递运行时参数来改变它？或者有什么我可以在不接触代码库的情况下做的吗？

我不好意思问这个问题，因为只需实施修复程序就可以轻松解决它，但任何想法或方向都会非常有帮助。

更新：理想情况下，我正在寻找可以支持将所有 validateTree() 引用更改为 validate() 的 java 运行时参数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T14:16:41.567

> 我可以使用运行时参数来修复 Java 中的错误 API 调用吗？

作为一般规则，没有。

在特定情况下，您可以查看相关类的源代码 Java 7 版本的类库，以查看是否存在向后兼容性属性。

* * *

假设您找不到修复程序，那么您就会陷入困境。我建议：

*   向您的客户推荐他们使用 Java 6，直到可以发布修复程序。
*   与您的管理层讨论他们是否可以对他们的政策做出例外处理，以便紧急解决这个问题。

如果这些都不起作用，那么真正的问题在于您的客户和您的管理层之间。你已经做了尽可能多的事情。留给“上级”处理吧。

* * *

您可能对[我对相关 SO 问题的回答](https://stackoverflow.com/a/12849959/139985)感兴趣，该问题涉及他们*为什么*做出这种“重大”改变的问题。我的看法是，这种变化是为了迫使人们修复一类导致奇怪 UI 行为的隐蔽、难以重现的应用程序错误。这是一件好事……从长远来看。

基于此，您可以为发布带外修复提供更有力的理由。用调用替换`validateTree()`调用的修复`validate()`实际上是*所有*Java 平台的必要修复，而不仅仅是 Java 7。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T14:16:52.580

> 我有一些适用于 Java 6 但不适用于 Java 7 的 Java 代码，..

一种“解决方法”（我可以看到这不受欢迎）是：

使用 JNLP 部署小程序[并](http://docs.oracle.com/javase/7/docs/technotes/guides/javaws/developersguide/syntax.html#resources)使用`1.6*`. 有关详细信息，请参阅[Java Web Start - 运行时版本控制](http://pscode.org/jws/version.html)。

请注意，它只能嵌入在 Plug-In 2 JRE（1.6 JRE 的子集）中，即使这样，客户端也可能会收到有关“使用较早的 JRE”的警告。如果可以使用 JWS 自由浮动启动小程序，它将（假设）在 1.4.2+ 左右工作。

修复它以更改小程序代码以与两个 JRE 兼容，正如 kleopatra 的第二条评论和 Stephen C.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T18:49:53.903

返回的对象[`Component#getTreeLock()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#getTreeLock%28%29)用作线程同步监视器。在从版本 6 到版本 7 的转换中，某些方法的文档化线程安全性已被弃用；[这里](https://stackoverflow.com/a/3245805/230513)有一个例子。通常，验证 Swing GUI 对象是否*仅*在[事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上构造和操作。[此处](https://stackoverflow.com/a/7788806/230513)引用的一种方法可能有助于自动搜索违规行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T16:15:52.877

```
if (System.getProperty("java.version").startsWith("1.6")) {
...
} else{
...
} 
```

# c# - 模型 foreach 循环中的 MVC 4 NullReferenceExcpetion

> ID：12821051
> 
> 赞同：-1
> 
> 时间：2012-10-10T13:54:54.760
> 
> 标签：c#, asp.net-mvc

我对 IEnumerable 的 foreach 循环有问题

函数 Get_Contacts_By_Company_ID

```
public List<Contact> Get_Contacts_By_Company_ID(string company_id)
    {
        List<Contact> contacts = new List<Contact>();

        foreach (DataRow contacts_row in contacts_da.Get_Contacts_By_Company_ID(company_id).Rows)
        {
            Contact contact = new Contact();

            contact.Contact_ID = contacts_row["Contact_ID"].ToString();
            contact.Contact_Is_Active = Convert.ToInt32(contacts_row["Is_Active"].ToString());
            contact.Firstname = contacts_row["Firstname"].ToString();
            contact.Middlename = contacts_row["Middlename"].ToString();
            contact.Lastname = contacts_row["Lastname"].ToString();
            contact.Contact_Address = contacts_row["Address"].ToString();
            contact.Contact_City_Province = contacts_row["City_Province"].ToString();
            contact.Contact_State = contacts_row["State"].ToString();
            contact.Contact_ZIP = contacts_row["ZIP"].ToString();
            contact.Contact_Phone = contacts_row["Phone"].ToString();
            contact.Contact_Mobile_Phone = contacts_row["Mobile_Phone"].ToString();

            contacts.Add(contact);

        }

        return contacts;
    } 
```

contacts_da.Get_Contacts_By_Company_ID 函数只会返回一个 DataTable

控制器：

```
 [Authorize]
    public ActionResult Edit(string id)
    {

        List<Contact> contacts = new List<Contact>();

        Contact contact = new Contact();

        contacts = contact.Get_Contacts_By_Company_ID(id);

        return View(contacts);
    }

    [HttpPost]
    public ActionResult Edit(List<Contact> contact)
    {

        List<Contact> contacts = contact;

        //company.Update_Company(company_model);

        return View();
    } 
```

看法：

```
@model IEnumerable<DTIMS_BL.Contact>
@using (Html.BeginForm("Edit/" + Model, "Company", FormMethod.Post))
{
@foreach (var item in Model)
{
<table>
  <tr>
     <td>
       @Html.DisplayFor(m => item.Firstname)                      

        </td>
        <td>
          @Html.ActionLink("Remove", "", new { @class = "btn small fr" })
         </td>
          <td>
           @Html.ActionLink("Edit", "", new { @class = "btn small fr" })
          </td>
      </tr>
</table>
  } 
<button class="fr submit">Save Company Details</button>
} 
```

当我单击将提交表单的“保存公司详细信息”按钮时，问题就开始了。我收到“NullReferenceException”。我在这里错过了什么吗？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:00:16.950

```
@using (Html.BeginForm("Edit", "Company", FormMethod.Post)) 
```

代替

```
@using (Html.BeginForm("Edit/" + Model, "Company", FormMethod.Post)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:58:28.940

您可以添加此代码`check DataTable value`，如果表为空，则返回空列表

```
List<Contact> Get_Contacts_By_Company_ID(string company_id)
{
      List<Contact> contacts = new List<Contact>();
      var table = contacts_da.Get_Contacts_By_Company_ID(company_id);
      if(table == null)
      {
         return contacts;
      }

      foreach (DataRow contacts_row in contacts_da.Get_Contacts_By_Company_ID(company_id).Rows)
      {
       ....
      }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:59:10.030

我假设其中一行中的一列是`null`. 您应该避免`ToString()`在这种情况下使用，[`Convert.ToString()`](http://msdn.microsoft.com/en-us/library/astxcyeh.aspx)而是使用：

```
contact.Contact_ID = Convert.ToString(contacts_row["Contact_ID"]);
contact.Contact_Is_Active = Convert.ToInt32(contacts_row["Is_Active"]);
contact.Firstname = Convert.ToString(contacts_row["Firstname"]);
contact.Middlename = Convert.ToString(contacts_row["Middlename"]);
contact.Lastname = Convert.ToString(contacts_row["Lastname"]);
contact.Contact_Address = Convert.ToString(contacts_row["Address"]);
contact.Contact_City_Province = Convert.ToString(contacts_row["City_Province"]);
contact.Contact_State = Convert.ToString(contacts_row["State"]);
contact.Contact_ZIP = Convert.ToString(contacts_row["ZIP"]);
contact.Contact_Phone = Convert.ToString(contacts_row["Phone"]);
contact.Contact_Mobile_Phone = Convert.ToString(contacts_row["Mobile_Phone"]); 
```

# android - android默认浏览器中的apk文件下载问题

> ID：12821054
> 
> 赞同：2
> 
> 时间：2012-10-10T13:55:07.493
> 
> 标签：android, servlets, apk

我正在尝试使用https连接从android默认浏览器下载一个.apk文件，并通过sumbit按钮上的servlet单击以保护它，但它没有下载

```
Exception :org.apache.catalina.connector.ClientAbortException: java.io.IOException: Broken pipe 
```

同样的事情在移动和PC的Firefox浏览器中也可以正常工作，当我删除https或ssl证书时，它也将开始使用默认值，但我只需要使用https连接，所以请帮助我解决这个问题。我做了一个研究工作并在android默认浏览器日志中找到错误：

```
V/SecDownloader(5049): CDHelpers : chooseExtensionFromMimeType: couldn't find    
extensionm using CDContentType map for application/vnd.android.package-archive 
```

我也尝试过使用不同的扩展名，但甚至没有下载文本文件。请帮忙。

# google-maps - 内部 Google 地球企业的 API URL

> ID：12821058
> 
> 赞同：0
> 
> 时间：2012-10-10T13:55:23.557
> 
> 标签：google-maps, google-maps-api-3

我的公司有一个内部谷歌地球企业服务器。我可以通过`http://local/default_map`

我喜欢从公共 API 服务器切换`<script src="http://maps.google.com/maps/api/js?v=3&amp;sensor=false"></script>`到内部服务器。但`http://local/maps/api/js?v=3&amp;sensor=false`返回 Forbidden 错误：您无权访问此服务器上的 /maps/api/js/。

如何确定内部服务器是否支持 API 功能以及如何配置？

# c# - OraOLEDB.Oracle 提供程序未在本地计算机上注册

> ID：12821059
> 
> 赞同：2
> 
> 时间：2012-10-10T13:55:26.307
> 
> 标签：c#, .net, sql, windows, visual-studio-2010

我刚从 升级`Win XP`到`Win 7`. `.Net`我在我的机器上编写的一个应用程序`XP`现在在我的 Win & 机器上抛出了一个异常。

```
 OleDbConnection _conn = new OleDbConnection(_conString);
        try
        {
            _conn.Open();
            return true;
        } 
```

检查是否有打开的数据库连接时发生错误 - _conn.Open()

```
The 'OraOLEDB.Oracle' provider is not registered on the local machine. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:01:57.613

您需要将`location`安装的文件放在`PATH variable for windows.`

如果使用 install.bat 文件将文件安装在 C:\Oracle，则需要将路径“C:\Oracle”和 C:\Oracle\bin”放在`the PATH variable`.

`right-clicking`您可以通过on`My computer`和找到此变量`selecting Properties (for Windows Vista/7` `users, it's right clicking on Computer then properties then advanced system settings)`。单击在`Advanced tab and click the Environment Variables button.`系统变量列表中，您将找到`PATH variable`

# sas - 使用 LAG 和 LAST.VAR 创建变量

> ID：12821063
> 
> 赞同：2
> 
> 时间：2012-10-10T13:55:34.563
> 
> 标签：sas

我有以下数据集：

```
AGE    HSQ    PCT

65      1     0.7
65      2     0.2
65      3     0.1
66      1     0.5
66      2     0.25
66      3     0.25

[...] 
```

我需要的是获得以下输出：

```
AGE     P1    P2     P3

65     0.7    0.2    0.1
66     0.5    0.25   0.25

[...] 
```

我被告知要采用`LAG`或为了做到这一点，对我来说这似乎是一个很好的策略`FIRST.AGE`。`LAST.AGE`但是我无法获得最终结果..我使用的（错误）代码是：

```
DATA OUTPUT;
  SET SAMPLE;
    BY AGE HSQ;
  IF LAST.AGE THEN DO;
    P1=LAG2(PCT);
    P2=LAG1(PCT);
    P3=PCT;
  END;
RUN; 
```

但它跳到以前的年龄百分比，这不是我需要的..语法错误在哪里？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:09:27.853

被告知这是使用它们的任务，或者这是最简单的方法？

最简单的方法是 PROC TRANSPOSE：

```
data have;
input AGE    HSQ    PCT;
datalines;
65      1     0.7
65      2     0.2
65      3     0.1
66      1     0.5
66      2     0.25
66      3     0.25
;;;;
run;

proc transpose data=have out=want prefix=P;
by age;
var pct;
id hsq;
run; 
```

LAG 不会按照您认为的方式工作 - 它不会*为*您提供前一行的值；相反，它会创建一个队列并获取 (argument) 的当前值，并为您提供队列中的前一个值。所以你不能在这样的 IF 语句中使用它。

如果您出于某种原因必须在数据步中执行此操作，那么您可能希望这样做：

```
data want;
array p[3];
do _n_ = 1 by 1 until (last.age);
    set have;
    by age;
    p[hsq]=pct;
end;
keep p1-p3 age;
run; 
```

真的没有理由使用滞后，或任何滞后的概念；就像你遇到属于某个地方的值一样，你将它们分配给那个地方，当你点击 last.age 然后输出。

有人想和我一起提出 SASware 请求以删除 LAG 功能吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T15:18:55.663

只是为了好玩，对原始问题的直接回答（展示如何做到这一点）：

```
DATA want;
  SET have;
    BY AGE HSQ;
    p1=lag2(pct);
    p2=lag1(pct);
    p3=pct;
    if last.age then output;
run; 
```

这需要做很多额外的工作（当然，我指的是几纳秒的 CPU 时间），因为它计算了六次滞后，并且只输出了两个结果。它也有点“冒险”，因为它不会检查以确保 HSQ 是正确的值 - 即，如果您错过了一个年龄的条目，并且只有 2 行，那么您将拥有前一个年龄的 HSQ = P1 的 3 值，这可能是不希望的。

最后一点是，对于 LAG，如果您确实打算将其用作“前一行的记录”的替代品，则需要将其保留在条件块之外。计算*每一*行的滞后，并有条件地使用*结果*（在这种情况下，有条件地使用输出）。

# couchdb - CouchApp 设计文档和共享库

> ID：12821064
> 
> 赞同：2
> 
> 时间：2012-10-10T13:55:38.930
> 
> 标签：couchdb, couchapp

```
var ddoc = {
  _id: '_design/app',
  language: 'javascript',
  views: {},
  lists: {},
  shows: {},
  lib: {/* see below */}
}; 
```

我找不到关于放入什么的好文档`ddoc.lib`，例如：

1.  我可以把**函数**：`ddoc.lib.myHelper = function () {};`？
2.  我可以引用 JavaScript**文件**（CommonJS 模块吗？）：`ddoc.lib.math = 'math.js';`

如果是 2\. 在哪里存储`math.js`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:52:34.373

我见过的最好的 couchapp 管理器是[http://kan.so/](http://kan.so/) 我会用这个，但是......

大致回答你的问题。

1.  是的，您可以将函数放在 lib 中，但必须将它们转换为转义字符串。您只想将它​​们放入文件中，尽管不是匿名函数。
2.  是的，您可以只需要结构

    “lib”：{“math.js”：“转义源”}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:01:32.380

据我所知，今天最好的解决方案是使用[couchapp](http://couchapp.org/)。它可以创建一个可以轻松编辑的sceleton。

# jquery - 刷新 Jquery UI 动态内容

> ID：12821066
> 
> 赞同：0
> 
> 时间：2012-10-10T13:55:44.480
> 
> 标签：jquery, jquery-ui

基本上，我已经使用以下方法从另一个页面将内容加载到容器中：

```
$('#profile').load('/_profile #rightSection'); 
```

所以它动态地提取信息效果很好，基本上用户界面没有将主题添加到这个新内容中，我确信这与它们是从另一个页面（但本地）拉出的事实有关。

这就是我调用 UI 按钮的方式：

```
$('button, input[type="submit"]').button();
$('input[type="text"], input[type=email]').button().addClass('my-textfield'); 
```

如果有人对此有任何想法，那么知道如何解决我的问题会很棒。亲切的问候，香农

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:08:05.493

尝试在 上使用回调`.load`并设置按钮。

```
$('#profile').load('/_profile #rightSection', function() {
  $('button, input[type="submit"]').button();
  $('input[type="text"], input[type=email]').button().addClass('my-textfield');
}); 
```

# ide - 语义检查在 Qt Creator 2.5 中不起作用

> ID：12821076
> 
> 赞同：1
> 
> 时间：2012-10-10T13:56:10.507
> 
> 标签：ide, qt-creator

![在此处输入图像描述](../Images/bd9a70c37df8e2823a3db7ddbe29c717.png)

对于这个明显错误的代码示例，我没有收到错误消息。相反，qt creator 将 var 标记为未使用的变量。是否有可能解决这种奇怪的行为？我想要语义检查工作。

**更新：** 我一直在谈论动态语义检查。大多数 IDE 在您键入时分析代码，并突出显示错误。Qt Creator 似乎动态地进行了一些代码分析（因为语法高亮显示不同的类型、虚函数和其他东西），但它根本没有高亮错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:58:41.800

Qt Creator 使用的代码模型相当不错，但并不是基于每个编译单元的完整抽象语法树。此 Qt 博客文章中提供了有关它的一些信息：

[http://blog.qt.digia.com/2011/10/19/qt-creator-and-clang/](http://blog.qt.digia.com/2011/10/19/qt-creator-and-clang/)

AFAIK，当前的代码模型允许 Qt Creator 进行语义突出显示、重构、显示类型层次结构等，但不允许对潜在的编译错误（如您的）进行完整的动态检查。由于您的代码语法正确，Qt Creator 不会显示错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T12:18:17.743

非常奇怪的行为。我试图编译这样的代码：

```
#include <iostream>
using namespace std;
int main()
{
    UndefinedType val;
    cout<<"Test"<<endl;
    return 0;
} 
```

在Windows7上的My `Qt 4.8.1, 4.8.3`with中，但在每种情况下都出现错误：`MinGW``QtCreator 2.5.2`

```
main.cpp: In function 'int main()':
main.cpp:7:5: error: 'UndefinedType' was not declared in this scope
main.cpp:7:19: error: expected ';' before 'val' 
```

请提供有关您的构建环境的更多信息。

# json - 在 MVC 4 中将对象转换为 JSON

> ID：12821078
> 
> 赞同：30
> 
> 时间：2012-10-10T13:56:22.770
> 
> 标签：json, asp.net-mvc-4

我正在使用将对象转换为 JSON，`JavaScriptSerializer`并且可以在服务器代码中看到此 JSON 输出：

```
[{"UserId":1,"UserName":"Admin"}] 
```

但在 UI 中，它被转换为如下所示的内容

```
[{&quot;UserId&quot;:1,&quot;UserName&quot;:&quot;Admin&quot;}]. 
```

如何逃脱那些`&quot;`？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-10-10T14:23:32.280

如果您使用的是 Razor 视图引擎，则需要使用以下`Html.Raw`方法：

```
<script type="text/javascript">
    var model = @Html.Raw(Json.Encode(Model));
</script> 
```

`Json.Encode`请注意更短且等效于 的方法的用法`new JavaScriptSerializer().Serialize()`。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-10T14:00:41.067

你为什么这样做？为什么不只返回一个[`JsonResult`](http://msdn.microsoft.com/en-us/library/system.web.mvc.jsonresult%28v=vs.90%29.aspx)？

```
public ActionResult MyMethod()
{
    List<ListItem> list = new List<ListItem>() {
        new ListItem() { UserId = "1", UserName = "Admin" },
        new ListItem() { UserId = "2", UserName = "JohnDoe" },
        new ListItem() { UserId = "3", UserName = "JaneDoe" }};

    return this.Json(list);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-01T23:44:45.587

关于达林·季米特洛夫的回答还有一件事。在我的 VS2012 中，分号出现编译错误，因为 JS 端的语句实际上是“var model = ;”。一种使用一对引号来包装 Razor 部分的方法，如下所示：

```
var model = "@Html.Raw(Json.Encode(Model))"; 
```

这不会导致任何错误。

Json.Encode() 似乎是 JavaScriptSerializer 的包装函数。我不确定后者是否更省时。

# java - Servlet 映射与 spring

> ID：12821079
> 
> 赞同：7
> 
> 时间：2012-10-10T13:56:25.023
> 
> 标签：java, spring, servlets

在我的 web.xml 我有以下映射

```
<servlet-mapping>
    <servlet-name>mySite</servlet-name>
    <url-pattern>*.html</url-pattern> 
</servlet-mapping>

<servlet-mapping>
    <servlet-name>mySite</servlet-name>
    <url-pattern>/articles/*</url-pattern> 
</servlet-mapping> 
```

目前它可以处理带有 .html 文件扩展名的 url。但是，我希望能够处理**http://localhost:8080/MySite-Web/articles/testMe**类型的 url，即任何没有以文章为前缀的文件扩展名的路径。

我尝试过的弹簧映射是。

```
@RequestMapping(value = "/articles/*")
public ModelAndView getArticles(HttpServletResponse response, HttpServletRequest request
        ) throws java.lang.Exception {

    System.out.println("Handle any path prefixed with /articles/ ");
    return null;
} 
```

在我的 Spring 配置中，我使用以下

```
<bean id="viewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
</bean> 
```

编辑：

这是 Dispatcher Servlet 映射

```
<servlet>
        <description>
        servlet</description>
        <servlet-name>MySite</servlet-name>
        <servlet-class>
        org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>classpath:MySite-web-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet> 
```

这是 MySite-web.context.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:tx="http://www.springframework.org/schema/tx" 
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:jee="http://www.springframework.org/schema/jee" 
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:lang="http://www.springframework.org/schema/lang"
    xmlns:security="http://www.springframework.org/schema/security"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
      http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
      http://www.springframework.org/schema/aop
      http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
      http://www.springframework.org/schema/tx
      http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
      http://www.springframework.org/schema/context 
      http://www.springframework.org/schema/context/spring-context-2.5.xsd
      http://www.springframework.org/schema/jee
      http://www.springframework.org/schema/jee/spring-jee-2.5.xsd
      http://www.springframework.org/schema/lang
      http://www.springframework.org/schema/lang/spring-lang-2.5.xsd
      http://www.springframework.org/schema/security 
      http://www.springframework.org/schema/security/spring-security-2.0.1.xsd">

    <tx:annotation-driven transaction-manager="transactionManager" />

    <bean id="beanNameViewResolver" class="org.springframework.web.servlet.view.BeanNameViewResolver" />

    <bean id="viewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver">
        <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
    </bean>

                <context:component-scan base-package="com.mysite" scoped-proxy="interfaces" />

<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
<property name="maxUploadSize">
             <value>-1</value> <!-- 10MB limit  -->
         </property>
</bean>

</beans> 
```

如果我只映射到 /test

```
@RequestMapping(value = "/test") 
```

它工作正常，如果

我 System.out.println(request.getPathInfo()); 我只是得到**/test**没有**/articles** ???

提前喝彩。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T20:24:16.537

将此添加到您的`MySite-web.context.xml`：

```
<mvc:annotation-driven/>
<bean id="handlerMapping" class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping">
    <property name="alwaysUseFullPath" value="true"/>
</bean> 
```

不要忘记`mvc`在顶部添加正确的命名空间行：

```
xmlns:mvc="http://www.springframework.org/schema/mvc" 
```

以及`xsi:schemaLocation`.

它现在应该考虑解析映射的完整路径。

查看[Spring 文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-handlermapping)以获取更多信息。

# google-api - Google Drive API 在每个 GET 请求上更改 thumbnailLink 值？

> ID：12821080
> 
> 赞同：10
> 
> 时间：2012-10-10T13:56:29.860
> 
> 标签：google-api, google-drive-api, image-scaling

我正在将一些图像上传到我们的 GDrive 帐户（通过 API），这样我就可以在我们的 webapp 中发布它们。

我喜欢发布**thumbnailLink**因为`=s`您可以将图像缩放到所需宽度的参数。

但是现在我发现了一个问题：

*   每次我发出文件获取请求（[https://developers.google.com/drive/v2/reference/files/get](https://developers.google.com/drive/v2/reference/files/get)）时，thumbnailLink 都会更改其值

这个问题提出了两个问题：

1.  为什么会这样？

2.  无论如何我可以保持相同的**thumbnailLink**并让它永远工作吗？

版本：在文件文档（[https://developers.google.com/drive/v2/reference/files](https://developers.google.com/drive/v2/reference/files)）中说只有**downloadUrl**具有短暂的价值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-15T19:17:57.580

缩略图 URL 也是短暂的（正如一些简单的测试所揭示的那样）。我将与文档团队合作，在文档中也注明这一点。

# c# - 使用实体框架访问远程数据库

> ID：12821083
> 
> 赞同：1
> 
> 时间：2012-10-10T13:56:35.713
> 
> 标签：c#, entity-framework

我需要能够使用 EF 访问远程服务器上的数据库。我在 app.config 中有到远程数据库的连接字符串。

当我尝试这个时：

```
using (var ctx = new PinnReportEntities("name=remoteConnection"))
{
    .
    .
    .
} 
```

我明白了：

```
The specified named connection is either not found in the configuration, not intended to be used with the EntityClient provider, or not valid. 
```

命名连接在配置中并且有效，因此问题必须与 EntityClient 提供程序有关。

我想做的甚至可能吗，这是正确的方法吗？

# javascript - jquery .show 没有运行

> ID：12821088
> 
> 赞同：0
> 
> 时间：2012-10-10T13:56:43.127
> 
> 标签：javascript, jquery, asp.net

下面的代码对我来说似乎没有正确执行，我很困惑为什么。 `NonITView`并且`ITView`都是我的 ASP 页面中的 div。 `txtIsIT`是`asp:textbox`在页面加载时获得“是”或“否”的页面上的一个。

```
 if (document.getElementById("<%= txtIsIT.ClientID %>").value = "yes") {
            $("#NonITView").hide("slow");
            $("#ITView").show("slow");
        }
        else if (document.getElementById("<%= txtIsIT.ClientID %>").value = "no") {
            $("#ITView").hide("slow");
            $("#NonITView").show("slow");
        }
        else {
            alert("Error");
        } 
```

`if`正在正确评估。在 Firefox 的 Web 控制台中，通过输入 jquery .show/.hide 函数，可以正确显示/隐藏 div，这是让我感到困惑的一部分。有什么对你很重要的东西应该解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:59:06.177

`=`两条线上的错误，你让它们相等，你不检查它们。

```
document.getElementById("<%= txtIsIT.ClientID %>").value = "yes" 
```

一个提示，为了避免这种错误，把它们写反，如

```
if( "yes" == document.getElementById("<%= txtIsIT.ClientID %>").value) {} 
```

这样，如果不小心写`=`了它会抛出一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:01:23.973

在 if 语句中，你正在做一个赋值。

```
document.getElementById("<%= txtIsIT.ClientID %>").value = "yes" 
```

这将始终评估为真。所以将该行更改为：

```
if(document.getElementById("<%= txtIsIT.ClientID %>").value === "yes") 
```

还要注意三个等号。现在，相等使用 === 是一种常见的做法。请参阅这篇文章了解原因：

[JavaScript 中 == 和 === 的区别](https://stackoverflow.com/questions/523643/difference-between-and-in-javascript)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T14:02:52.277

你可以使用这样的东西......

```
 $(document).ready(function() {

     $('#Button_ID').click(function() {
        if ($("#<%= txtIsIT.ClientID %>").val() == "yes") {
            $("#NonITView").hide("slow");
            $("#ITView").show("slow");
        }
        else if ($("#<%= txtIsIT.ClientID %>").val() == "no") {
            $("#ITView").hide("slow");
            $("#NonITView").show("slow");
        }
        else {
            alert("Error");
        }
     });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T14:00:24.663

```
(document.getElementById("<%= txtIsIT.ClientID %>").value = "yes") 
```

应该

```
(document.getElementById("<%= txtIsIT.ClientID %>").value == "yes") 
```

在 if 语句上应该是`==`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T14:05:01.983

为什么要混合使用 jQuery 和常规 javascript。如果你打算使用 jQuery 坚持下去：

```
if ($("#<%= txtIsIT.ClientID %>").val() == "yes") {
  $("#NonITView").hide("slow");
  $("#ITView").show("slow");
}
else if ($("#<%= txtIsIT.ClientID %>").val() == "no") {
  $("#ITView").hide("slow");
  $("#NonITView").show("slow");
}
else {
  alert("Error");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T15:01:52.060

发现了我的问题。当`UpdatePanel`重新加载时，它会将其内容的属性恢复为其默认状态，在这种情况下，这`style="display:none"`两个 div 都存在。代码将运行，显示适当的 div，然后立即再次隐藏它，因为稍后在函数中我告诉它`UpdatePanel`触发 的回发触发器。

谢谢大家的帮助！

# python - 如何断言使用特定类型而不是实例调用模拟？

> ID：12821090
> 
> 赞同：2
> 
> 时间：2012-10-10T13:56:50.380
> 
> 标签：python, unit-testing, python-2.7, python-mock

我正在使用最新版本的 mock 和 python 2.7.3

我正在构建我的第一个烧瓶应用程序，并且正在测试一些基本的中间件以查看 flask.abort() 是否发生（当它发生时，我断言调用了一个带有未授权异常的方法）

```
 def test_invokes_raise_http_exception_when_apply_blows_up(self):
        start_response = mock.Mock()
        self.sut = BrokenMiddleware(self.app)
        with mock.patch.object(self.sut, 'raise_http_exception') as raise_up:
            self.sut.__call__({}, start_response)
        raise_up.assert_called_once_with(Unauthorized(), start_response)

class BrokenMiddleware(Middleware):

    def apply_middleware(self, environ):
        flask.abort(401) 
```

这是我的生产代码

```
class Middleware(object):
    def __call__(self, environ, start_response):                                                                               
        try:
            self.apply_middleware(environ)
        except Exception as e:
            return self.raise_http_exception(e, start_response)

    def raise_http_exception(self, exception, start_response):
        pass 
```

我遇到的问题是模拟失败了断言，因为引发的 401 与我在断言本身中所期望的不同。

如果我只关心类型，而不关心实际实例，我该如何重写断言？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:27:41.283

你可能不会喜欢它，但这就是我过去做同样事情的方式：

```
self.assertIsInstance(raise_up.mock_calls[0][1][0], Unauthorized) 
```

这里有一些解释

```
>>> print raise_up.mock_calls
[call(Unauthorized())]
>>> print raise_up.mock_calls[0]
call(Unauthorized())
>>> print raise_up.mock_calls[0][1]
(Unauthorized(),)
>>> print type(raise_up.mock_calls[0][1][0])
<type 'Unauthorized'> 
```

# jquery - Hammer.js 允许在拖动区域内点击

> ID：12821091
> 
> 赞同：1
> 
> 时间：2012-10-10T13:56:53.073
> 
> 标签：jquery, hammer.js

我正在使用 Hammer.js 创建一个在左侧滑出的移动应用风格的侧边菜单。当用户向左滑动侧边菜单时，它应该关闭。

我的问题是菜单中的所有链接现在都不起作用。您如何启用对链接的点击以继续工作？

似乎我需要包含“prevent_default”以停止在拖动手势上滚动页面。

```
 $('.sidebar').hammer({
        prevent_default: true
    }).bind('drag', function(ev) {
        if(ev.direction == 'left') {
            $('#page').removeClass('in');
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T21:10:37.637

你要：

```
prevent_default: false 
```

这将允许您通过容器传递点击。

# function - C++ (C++11) 中的函数对象

> ID：12821098
> 
> 赞同：7
> 
> 时间：2012-10-10T13:57:22.480
> 
> 标签：function, boost, c++11, functional-programming, functor

我正在阅读`boost::function`，我对它的使用以及它与我在文档中找到的其他 C++ 结构或术语的关系感到有些困惑，例如[这里](http://www.boost.org/doc/libs/1_51_0/doc/html/function/tutorial.html)。

`boost::function`在 C++ (C++11) 的上下文中，实例、**函数对象**、**函子**和**lambda 表达式**之间有什么区别？什么时候应该使用哪个构造？例如，何时应该将函数对象包装在 a 中`boost::function`而不是直接使用该对象？

上述所有 C++ 是否都构造了不同的方式来实现函数式语言中称为**闭包**的内容（一个函数，可能包含捕获的变量，可以作为值传递并由其他函数调用）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T14:05:50.133

函数对象和函子是一回事；实现函数调用运算符的对象`operator()`。一个 lambda 表达式产生一个函数对象。`boost::function`具有/的某些特化类型的`std::function`对象也是函数对象。

Lambda 的特殊之处在于 lambda 表达式具有匿名且唯一的类型，并且是创建内联函子的便捷方式。

`boost::function`/`std::function`的特殊之处在于它将任何可调用实体转换为函子，其类型仅取决于可调用实体的签名。例如，每个 lambda 表达式都有一个唯一的类型，因此很难将它们传递给非泛型代码。如果您`std::function`从 lambda 创建一个，那么您可以轻松地传递包装的 lambda。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-10T14:22:37.513

两者`boost::function`和标准版本`std::function`都是库提供的*包装器*。它们可能很昂贵而且很重，只有在您确实需要一*组*异构的、可调用的实体时才应该使用它们。只要您一次只需要一个可调用实体，您最好使用`auto`或模板。

这是一个例子：

```
std::vector<std::function<int(int, int)>> v;

v.push_back(some_free_function);           // free function
v.push_back(&Foo::mem_fun, &x, _1, _2);    // member function bound to an object
v.push_back([&](int a, int b) -> int { return a + m[b]; });  // closure

int res = 0;
for (auto & f : v) { res += f(1, 2); } 
```

这是一个反例：

```
template <typename F>
int apply(F && f)
{
    return std::forward<F>(f)(1, 2);
} 
```

在这种情况下，像这样声明是完全没有理由的`apply`：

```
int apply(std::function<int(int,int)>)   // wasteful 
```

转换是不必要的，模板版本可以匹配实际（通常是不可知的）类型，例如绑定表达式或 lambda 表达式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T14:25:02.220

函数对象和函子通常用一个概念来描述。这意味着它们描述了一种类型的一组需求。在 C++11 中，很多关于 Functor 的东西都发生了变化，新概念被称为`Callable`. `o`可调用类型的对象是（基本上）表达式为`o(ARGS)`真的对象。的例子`Callable`是

```
int f() {return 23;}

struct FO {
  int operator()() const {return 23;}
}; 
```

通常还会添加一些对返回类型的要求`Callable`。你使用`Callable`这样的：

```
template<typename Callable>
int call(Callable c) {
  return c();
}

call(&f);
call(FO()); 
```

像上面这样的构造要求您在编译时知道确切的类型。这并不总是可能的，这就是 `std::function`进来的地方。

`std::function`是这样的`Callable`，但它允许您删除您正在调用的实际类型（例如，您接受可调用的函数不再是模板）。仍然调用一个函数需要你知道它的参数和返回类型，因此必须将它们指定为模板参数`std::function`。

你会像这样使用它：

```
int call(std::function<int()> c) {
  return c();
}

call(&f);
call(FO()); 
```

您需要记住，使用`std::function`会对性能产生影响，并且您应该只在确定需要它时才使用它。在几乎所有其他情况下，模板都可以解决您的问题。

# javascript - 如何解析具有浏览器兼容性的可编辑 DIV 文本

> ID：12821102
> 
> 赞同：3
> 
> 时间：2012-10-10T13:57:34.233
> 
> 标签：javascript, jquery, html, contenteditable

我将 div 设为可编辑。当我试图解析 div 的文本时，我需要做下面的正则表达式。

```
innerDOM = "<div style="cursor: text;">I had downloaded all the material from the Intern,<br>You will find</div><div style="cursor: text;">&nbsp;</div><div style="cursor: text;">dfvdfvdvdfvdfvdvdvdf</div><div style="cursor: text;">&nbsp;</div><div style="cursor: text;">dfvdfvdvdfvdfvdfvdfvd</div>"

innerDOM.replace(/<div style="cursor: text">/g, "<br>").replace(/<\/div>/g, ""); 
```

以上正则表达式在 Firefox 和 chrome 中效果很好。但不是在 IE 中。我应该做哪些改变？

请参阅此[FIDDLE](http://jsfiddle.net/sathyamoorthi/BmTNP/4/)以更好地理解...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T14:05:22.713

DOM 操作是[jQuery](http://www.jquery.com)的用途之一。投资学习 jQuery 会让你在编写 DOM 遍历和修改方面走得更远。

```
$("div[style='cursor: text']").unwrap().prepend("<br>"); 
```

[`unwrap`](http://www.jquery.com/unwrap/)删除元素但保持子元素完整。jQuery [Attribute Equals Selector](http://api.jquery.com/attribute-equals-selector/)用于选择所有`divs`具有光标样式属性的内容。[您可以在此处](http://jsfiddle.net/FMmt2/)实时运行它。

您可以使其更加健壮，因为目前您不会选择具有或多或少空格或其他微不足道的差异的 div。例如：`<div style="cursor:text;">`与上述选择器不匹配。您可以通过引入一个设置光标的 CSS 类来解决这个缺点。在这种情况下，您`<div style="cursor: text">`可以`<div class='textCursor'>`使用类选择器：`$("div.textCursor")`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T04:47:15.993

```
//FINAL ANSWER
var domString = "", temp = "";

$("#div-editable div").each(function()
            {
                temp = $(this).html();
                domString += "<br>" + ((temp == "<br>") ? "" : temp);
            });

alert(domString); 
```

看到这个[小提琴](http://jsfiddle.net/sathyamoorthi/BmTNP/5/)的答案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-04T10:26:46.933

我在这个网站上找到了这个解决方案：

```
$editables = $('[contenteditable=true'];

$editables.filter("p,span").on('keypress',function(e){
 if(e.keyCode==13){ //enter && shift

  e.preventDefault(); //Prevent default browser behavior
  if (window.getSelection) {
      var selection = window.getSelection(),
          range = selection.getRangeAt(0),
          br = document.createElement("br"),
          textNode = document.createTextNode($("<div>&nbsp;</div>").text()); //Passing " " directly will not end up being shown correctly
      range.deleteContents();//required or not?
      range.insertNode(br);
      range.collapse(false);
      range.insertNode(textNode);
      range.selectNodeContents(textNode);

      selection.removeAllRanges();
      selection.addRange(range);
      return false;
  }

   }
}); 
```

# spring - http://localhost:8080/sendRequest.htm 404（未找到）

> ID：12821103
> 
> 赞同：1
> 
> 时间：2012-10-10T13:57:35.197
> 
> 标签：spring

我有 form.jsp.from ，我正在将发布请求发送到过滤器。
现在我在春天将请求分派给控制器。这里我使用自定义注释。这里我需要返回响应作为字符串类型而不是 ModelAndView。我的问题是请求来过滤而不是控制器。
请求为：/sendRequest.htm
过滤代码为：RequestDispatcher rd=request.getRequestDispatcher("/sendRequest.htm"); rd.forward（请求，响应）；控制器是：

```
@Controller
public class ResponseController{
    @RequestMapping(value="/sendRequest.htm",method = RequestMethod.POST)
    public @ResponseBody String sendResponse(HttpServletRequest request,HttpServletResponse response){

   return "msg";
} 
```

我的 spring-ser.xml 是：

```
<context:component-scan base-package="myPackage" />  <mvc:annotation-driven /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:48:25.937

我想您正在将请求映射到“/sendRequest.htm/sendRequest.htm”，而不是“/sendRequest.htm”
只需从类声明中删除**@RequestMapping("/sendRequest.htm")**，并将其保留在方法上。

# javascript - 使用intellij在单独的文件中自动完成javascript

> ID：12821104
> 
> 赞同：0
> 
> 时间：2012-10-10T13:57:38.307
> 
> 标签：javascript, jsp, autocomplete, intellij-idea

我有一个在脚本标记中创建 javascript 变量的 jsp 页面，但是这些变量在单独的包含的 JavaScript 文件中不能作为自动完成选项使用。

有没有办法启用这个功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:04:51.167

在您的 javascript 文件的顶部插入以下内容：

```
/* global yourFirstVariable, youVariable2 */ 
```

这也将停止 jslint 检测在定义错误*之前使用的变量。*

但是没有可用的类型信息 afaik，所以我无法为`yourFirstVariable.myProperty`. 如果有人知道如何获得该功能......

# android - 无法从通过数据库填充的微调器中获取选定的项目

> ID：12821105
> 
> 赞同：2
> 
> 时间：2012-10-10T13:57:41.140
> 
> 标签：android, cursor, spinner

我正在尝试在先前从数据库中填充的微调器中获取当前选定的项目。

这是我处理选择的代码：

```
spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> parent, View v,
                int pos, long id) {
            // TODO Auto-generated method stub

            Cursor item = (Cursor) parent.getSelectedItem();            
            catName = item.getString(item.getColumnIndex("children")); // error on this line
            Log.d("catName", "" + catName);                                
}); 
```

这是我的错误：

```
10-10 14:46:04.293: E/AndroidRuntime(12975): FATAL EXCEPTION: main
10-10 14:46:04.283: E/CursorWindow(12975): Bad request for field slot 0,-1\. numRows = 42, numColumns = 2
10-10 14:46:04.293: E/AndroidRuntime(12975): java.lang.IllegalStateException: get field slot from row 0 col -1 failed 
```

# c# - 如何以编程方式将 BindingExpression.Status 设置为 Active？

> ID：12821107
> 
> 赞同：5
> 
> 时间：2012-10-10T13:57:47.060
> 
> 标签：c#, wpf

我正在将 WPF 页面上的 StackPanel 中的 FrameworkElement 转移到以编程方式创建的 StackPanel。在某个时候，我需要刷新绑定并获取属性值。

此时`FrameworkElement.DataContext`具有正确的值并且`BindingExpression.Status==BindingStatus.Unattached`适用于所有绑定表达式。我执行`BindingExpression.UpdateTarget`，但属性值为空。

我找到了 BindingExpression.UpdateTarget() 的源代码：

```
 public override void UpdateTarget() 
    {
        if (Status == BindingStatus.Detached) 
            throw new InvalidOperationException(SR.Get(SRID.BindingExpressionIsDetached)); 

        if (Worker != null) 
        {
            Worker.RefreshValue();  // calls TransferValue
        }
    } 
```

Worker 在内部覆盖 void 中获取实例`BindingExpression.Activate()`。同样在 Activate() BindingExpression.Status 内部设置为 BindingStatus.Active。

我如何以编程方式启动执行`BindingExpression.Activate()`并在此之后进行 UpdateTarget？

## 更新

这里的解决方案（谢谢，Olli）：

```
public  void UpdateAllBindingTargets( DependencyObject obj)
    {

        FrameworkElement visualBlock = obj as FrameworkElement;
        if (visualBlock==null)
            return;
        if (visualBlock.DataContext==null)
            return;
        Object objDataContext = visualBlock.DataContext;

        IEnumerable<KeyValuePair<DependencyProperty, BindingExpression>> allElementBinding = GetAllBindings(obj);
        foreach (KeyValuePair<DependencyProperty, BindingExpression> bindingInfo in allElementBinding)
        {
            BindingOperations.ClearBinding(obj, bindingInfo.Key);

            Binding myBinding = new Binding(bindingInfo.Value.ParentBinding.Path.Path);
            myBinding.Source = objDataContext;
            visualBlock.SetBinding(bindingInfo.Key, myBinding);
            BindingOperations.GetBindingExpression(visualBlock, bindingInfo.Key).UpdateTarget();

        }

    } 
```

在哪里获取对象的所有绑定：

```
public  IEnumerable<KeyValuePair<DependencyProperty, BindingExpression>> GetAllBindings( DependencyObject obj)
    {
        var stack = new Stack<DependencyObject>();

        stack.Push(obj);

        while (stack.Count > 0)
        {
            var cur = stack.Pop();
            var lve = cur.GetLocalValueEnumerator();

            while (lve.MoveNext())
                if (BindingOperations.IsDataBound(cur, lve.Current.Property))
                {
                    KeyValuePair<DependencyProperty,BindingExpression> result=new KeyValuePair<DependencyProperty, BindingExpression>(lve.Current.Property,lve.Current.Value as BindingExpression);
                    yield return result;
                }

            int count = VisualTreeHelper.GetChildrenCount(cur);
            for (int i = 0; i < count; ++i)
            {
                var child = VisualTreeHelper.GetChild(cur, i);
                if (child is FrameworkElement)
                    stack.Push(child);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T05:48:24.827

您可以以编程方式创建一个新绑定，这应该可以解决问题。

[http://msdn.microsoft.com/en-us/library/ms752347.aspx#creating_a_binding](http://msdn.microsoft.com/en-us/library/ms752347.aspx#creating_a_binding)

来自 MSDN 页面的示例

```
MyData myDataObject = new MyData(DateTime.Now);      
Binding myBinding = new Binding("MyDataProperty");
myBinding.Source = myDataObject;
myText.SetBinding(TextBlock.TextProperty, myBinding); 
```

# visual-studio-lightswitch - 覆盖列排序灯开关

> ID：12821116
> 
> 赞同：3
> 
> 时间：2012-10-10T13:58:01.867
> 
> 标签：visual-studio-lightswitch

我有一个带有 [Version] 列的 [Updates] 表，该表在 sql server 中存储为 varchar，在我的实体中存储为字符串。

如何覆盖该特定列的默认比较器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:26:33.187

您可以使用 LINQ 将`Order By`运算符添加到您用于在方法中创建表的查询中`_PreprocessQuery`。

`_PreprocessQuery`我在这个 SO 问题中详细介绍了如何编写方法： [Is there a way to create a search screen in Lightswitch based on a dropdown](https://stackoverflow.com/questions/11485962/is-there-a-way-to-create-a-search-screen-in-lightswitch-based-on-a-dropdown/11509644#11509644)

然后查看 MSDN 中的排序运算符示例，以根据需要对列进行排序：

[C# 示例](http://code.msdn.microsoft.com/SQL-Ordering-Operators-050af19e)

[VB.NET 示例](http://msdn.microsoft.com/en-us/vstudio/bb737912)

# android - 如何在sqlite for android中实现一对多对象数据库

> ID：12821119
> 
> 赞同：11
> 
> 时间：2012-10-10T13:58:06.997
> 
> 标签：android, sql, sqlite

我很陌生，`SQLite`并且`SQL`正在努力解决以下问题：

我的应用程序将显示社区成员列表。如果我点击一个成员，我可以看到成员发布的帖子列表。帖子是具有名称、时间和消息的对象。如何将其存储在`SQLite`数据库中，以便我可以查询数据库`userid`并获取特定用户的帖子列表。

我有一个包含这些列的用户表：

```
USER_ID | NAME 
```

我有一个包含这些列的推文表：

```
USER_ID | NAME | TIME | MESSAGE 
```

我的问题是：`link`这两张表的最佳方法/结构是什么？我是为每个用户创建一个新的推文表，还是将所有推文存储在一个长表中，首先为用户 1 发布推文，然后为用户 2 等推文？

我不一定在寻找代码转储，而是对逻辑的解释。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-10T14:32:03.510

已经给出并接受了答案，但我想补充一下。

你想要的是一张有用户的桌子，`users`. 在此表中，您存储您的用户信息 ( `user_id`, `name`)。

在您的`Tweets`表中，存储所有用户的所有推文。每行一条推文。我正在使用`tweet_id`as 作为`PRIMARY KEY`桌子`Tweets`。

然后，您可以通过`JOIN`像 Dave Swersky 所说的那样在代码中“链接”两者。

例如：

```
Users
--------------------------
user_id   |   user_name
--------------------------
   123    |    'Terry'
   34     |    'Pierre'

Tweets
-----------------------------------------------------------------------
tweet_id |   user_id   |  time      |         message     
-----------------------------------------------------------------------
   0     |    123      | 135646     |  'This is a tweet'
   1     |    123      | 132646     |  'This is another tweet by Terry'
   2     |    34       | 352646     |  'Pierre\'s tweet' 
```

我不确定`name`你的`Tweets`桌子上有什么用。据我所知，推文没有名称/主题（？）。您**不需要**将用户名存储在`tweets`和`users`表中。

如需快速 SQLFiddle，请访问此处：[http ://www.sqlfiddle.com/#!2/43492/1/0](http://www.sqlfiddle.com/#!2/43492/1/0)

**加入**

```
SELECT u.user_id, u.name, t.time, t.message, t.time 
FROM my_users u
INNER JOIN tweets t ON u.user_id = t.user_id 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-10T14:02:25.397

这是一个典型的“JOIN”场景，用户和帖子之间存在一对多的关系。

以下是显示所有用户及其帖子的查询示例：

```
SELECT u.User_ID, u.Name, p.Time, p.Message
FROM Users u INNER JOIN Posts p ON u.User_ID = p.User_ID 
```

这将产生一个包含四列的结果集。每个“推文”都将与其相关的用户记录一起显示。“你”。和“p”。语法是用于使查询更易于阅读的表别名。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-10T14:06:33.720

您需要有两个表：

1.**用户**

USER_ID | 姓名

2.**推文**

USER_ID | 时间 | 信息

现在解释一下：

表 1 代表用户，有关于用户的所有数据，如姓名、电话、地址等。

表 2 是所有用户的所有推文，并且有一列连接用户和他的推文。在表 2 中，USER_ID 是外键，它正好指向用户表中的一行。

要获取一个用户的所有推文，您可以编写下一个查询：

```
Select TWEETS.MESSAGE, TWEETS.TIME
from Users, TWEETS
where Users.USER_ID = TWEETS.USER_ID
and Users.NAME = "Pierre"; 
```

# selenium - 在 Webdriver 2 Java 中定位元素的 XPath 相关问题

> ID：12821124
> 
> 赞同：2
> 
> 时间：2012-10-10T13:58:12.113
> 
> 标签：selenium, selenium-webdriver

亲爱的 Selenium Webdriver 2 专家，

我是这个框架的新手，需要您就以下网页 XHTML 片段上的一些 XPath 相关问题提出建议：

```
 <dl class="cN-featDetails">
        <dt class="propertytype">Property type</dt>
        <!-- line 3 --> <dd id="ctl00_ctl00_Content_Content_SrchResLst_rptResult_ctl04_lstTemplate_ddPropertyType" class="propertytype type-house" title="Property type: House">House</dd>
       <!-- line 3a --> <!-- or  class="propertytype type-townhouse"--->
        .......
<div class="main-wrap">
    <div class="s-prodDetails">
        <a id="ctl00_ctl00_Content_Content_SrchResLst_rptResult_ctl04_lstTemplate_hypMainThumb" class="photo contain" href="/Property/For-Sale/House/LA/St Gabriel/?adid=2009938763">img id="ctl00_ctl00_Content_Content_SrchResLst_rptResult_ctl04_lstTemplate_imgMainThumb" title="44 Crown Street, St Gabriel" src="http://images.abc.com/img/2012814/2778/2009938763_1_PM.JPG?mod=121010-210000" alt="Main photo of 44 Crown Street, St Gabriel - More Details" style="border-width:0px;" /></a>
        <div class="description">
             <h4><span id="ctl00_ctl00_Content_Content_SrchResLst_rptResult_ctl04_lstTemplate_lblPrice">Offers Over $900,000 </span></h4>
             <h5>SOLD BY WAISE YUSOFZAI</h5><p>CHARACTER FAMILY HOME... Filled with warmth and charm, is a very well maintained family home in a quiet level street. Be...</p>
    </div>                                                                                                                                                                                                                                                                                                                        
    <a id="ctl00_ctl00_Content_Content_SrchResLst_rptResult_ctl04_lstTemplate_hypMoreDetails" class="button" href="/Property/For-Sale/House/LA/St Gabriel/?adid=2009938763">More Details</a>
    <dl id="ctl00_ctl00_Content_Content_SrchResLst_rptResult_ctl04_lstTemplate_dlAgent" class="agent">
        <!-- line 19 --> <dt>Advertiser</dt>
        <!-- line 20 --> <dd class="contain">                                       
        <!-- line 20a --> <!-- or class="" -->
            <img id="ctl00_ctl00_Content_Content_SrchResLst_rptResult_ctl04_lstTemplate_imgAgencyLogo" title="Carmen Jones Realty" src="http://images.abc.com/img/Agencys/2778/searchlogo_2778.GIF" style="border-width:0px;" />                                                                                                                                                                                                                                                     
        </dd>
    </dl>
</div> 
```

(a) 如何检验一个元素是否存在？例如，第 3 行或第 3a 行存在，但不是两者都存在。findElement() 方法将导致我试图避免的异常。另一种选择是在检查其集合列表结果是否为空之前使用 findElements()。这种方法似乎是一种冗长的方法。有没有其他更简单的方法来验证元素的存在而不会有导致异常的风险？以下语句不起作用或导致异常：

```
WebElement resultsDiv = driver.findElement(By.xpath("/html/body/form/div[3]/div[2]/div[1]/h1/em"));
// If results have been returned, the results are displayed in a drop down.
if (resultsDiv.isDisplayed()) {
    break;
} 
```

( b ) 是否有一种简单的方法可以通过将布尔运算符和正则表达式合并为 findElement() 或 findElements() 的一部分来验证任一元素的存在？这将显着减少查找的数量并简化搜索。

(c) 是否可以在通过 TagName 搜索 Element 时使用 XPath 语法。例如 driver.findElement(By.tagName("/div[@class='report']/result"));

( d ) 是否可以在 XPath 搜索中使用正则表达式，例如 driver.findElement(By.xpath("//div[@class='main-wrap']/dl[@class='agent']/dd[@ class='' OR @class='contain']")) 对于第 20 - 20a 行？

(e) 如何引用紧随其后的节点？例如假设当前节点是

广告商

在第 19 行，如何查找位于 under 的标题，其中其类名的值可以是“包含”或没有“”。第 18 行可能有多个标签。

我过去曾在 XML 文档上使用 XPath，但想扩展在 Webdriver 2 中定位元素的能力。

任何帮助都会非常感激。

非常感谢，

杰克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:26:46.260

considering the answer given by Zarkonnen, i'd add to **(a)** point

```
 public boolean isElementPresent(By selector)
       {
           return driver.findElements(selector).size()>0;
       } 
```

this method i use for verifying that element is present on the page.

you can also involve isDisplayed() method that can work in pair with isElement is present:

```
driver.findElement(By locator).isDisplayed() 
```

Returning back to your source: Suppose we want to verify wheter 'More details' links is present on the page or not. ![More Details link](../Images/4e192961424ca74649e59f5d514132ac.png)

```
String cssMoreDetails = "a[id='ctl00_ctl00_Content_Content_SrchResLst_rptResult_ctl04_lstTemplate_hypMoreDetails']";
//and you simply call the described above method
isElementPresent(By.cssSelector(cssMoreDetails));
//if you found xPath then it be
isElementPresent(By.xpath("//*...")); 
```

And always try to verify found web elements' locators in firepath

![verify](../Images/7a8e70c188bfce5a64f9dfd285502528.png)

In that way you can get xPath of the elment automatically. See the screen attached. ![xPath generation](../Images/cd0e06043be5d4e53c060688dbcaf019.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:12:40.763

(a) & (d)：您可以使用`|`XPath[运算符](http://www.w3schools.com/xpath/xpath_operators.asp)在同一个表达式中指定两个备用路径。

(c)：您不能在 byTagName 中使用 XPath，但您可以[使用它](http://www.w3schools.com/xpath/xpath_syntax.asp) `//`来查找给定节点的任何后代。

(e)：您可以使用[XPath 轴](http://www.w3schools.com/xpath/xpath_axes.asp)，如`parent`和`following-sibling`来选择相对于给定节点的所有节点。

我希望这些指示会有所帮助。我还推荐优秀的[Selenium Locator Rosetta Stone](http://www.simple-talk.com/dotnet/.net-framework/xpath,-css,-dom-and-selenium-the-rosetta-stone/) ( [PDF](http://www.simple-talk.com/content/file.ashx?file=4937) ) 作为如何构建 XPaths 的参考。

# javascript - 如何检查ios是否正在使用隐私浏览

> ID：12821127
> 
> 赞同：4
> 
> 时间：2012-10-10T13:58:18.533
> 
> 标签：javascript, jquery, ios, safari

我的一个 jquery 插件有问题，当在 ios 中打开隐私浏览时会出现问题。

有没有办法检查这个？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-10T14:10:08.087

在私有模式下，用户不能使用本地存储试试这个：

```
var storageTestKey = 'sTest',
    storage = window.sessionStorage;

try {
  storage.setItem(storageTestKey, 'test');
  storage.removeItem(storageTestKey);
} catch (e) {
  if (e.code === DOMException.QUOTA_EXCEEDED_ERR && storage.length === 0) {
    // private mode
  } else {
    throw e;
  }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-12-04T21:31:16.623

我在[GitHub 上](https://gist.github.com/cou929/7973956)找到了一个 Answear并对其进行了测试：**Working on IOS 11！**

```
var isPrivate = false;
try {
  window.openDatabase(null, null, null, null);
} catch (_) {
  isPrivate = true;
}
alert((isPrivate ? 'You\'re' : 'You aren\'t')  + ' in private browsing mode'); 
```

# java - 在哪里放置一个接口相关的变量，它不是静态的和最终的

> ID：12821130
> 
> 赞同：1
> 
> 时间：2012-10-10T13:58:27.800
> 
> 标签：java, interface

我正处于游戏开发的早期阶段。这是某种回合制游戏，例如战锤或魔兽争霸。有些生物可以再生他们遭受的伤害并代表这一点我有一个这样的界面

```
public interface Regenerative {
    void regenerates();
} 
```

所以再生的生物是

```
public class SomeMonster() extends BaseCreature implements Regeneative{
 //Code
 private int hitPoints;

 public void regenerates(){
  hitPoints = hitPoints + regenerateValue;
 }
} 
```

我面临的问题是，并非所有生物都能再生相同数量的生命值，所以我必须将这个数量（regenerateValue）放在某个地方。因为我不能把它放在界面上（因为我不希望所有生物的数量都相同）我考虑在生物类中添加一个新属性

```
public class SomeMonster() extends BaseCreature implements Regeneative{
 //Code
 private int regenerateValue;

 public void regenerates(){
  hitPoints = hitPoints + regenerateValue;
 }
} 
```

但我不喜欢这种方式（为什么不再生的生物的 regenerateValue 应该为 0？）。我认为它给了一个类不必要的属性，因此是一个糟糕的设计。您认为这种情况下最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:01:00.920

> 我面临的问题是，并非所有生物都能再生相同数量的生命值，所以我必须将这个数量（regenerateValue）放在某个地方。

为什么它必须是任何地方的*字段*？接口的某些实现可能对每个实例使用不同的值；其他人可能会使用一个常数值。

这是一个*实现细节*- 因此不适合接口。当然，您*可以*将它放在实现接口的抽象超类中。

知道界面的代码几乎肯定不应该知道或关心一个生物再生多少的细节 - 例如，它们可能根据魔法而不仅仅是生命值来再生，或者再生水平可能取决于其他一些功能他们的状态。来电者不应该在意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T14:03:26.317

我会将它添加到`abstract`BaseCreature 中，而不必太担心它。您的 BaseCreature 最终可能会得到许多实际上被“关闭”的属性，但另一种方法是创建一个复杂的继承树。由于 Java 不支持多重继承，这将阻碍您抽象出您可能喜欢的所有组合的能力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T14:05:56.287

如果所有怪物都再生，但其中一些再生值为 0（与不再生相同）怎么办？

所以你不需要接口：

```
public class SomeMonster() extends BaseCreature {
 //Code
    protected int regenerateValue; //protected, so that subclasses can override the value

    public void regenerates(){
        hitPoints = hitPoints + regenerateValue;
    }
} 
```

regenerateValue 以 0 开头，因此您必须覆盖要实际重新生成的子类中的值

编辑删除“实现再生”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T14:08:43.917

我认为您的设计可能没问题，因为您只需要在实现再生接口的类中包含一个 regenerateValue 即可。所以没有必要包含一个regenerateValue。

否则，您可以查看更复杂的设计模式，这些设计模式有利于组合而不是继承。通过这种方式，您可以在游戏期间为怪物动态添加再生能力以及其他“能力”，而不是每次需要更改怪物的行为时都必须重新编译游戏。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T16:10:11.133

我使用的解决方案可能有点过度设计，但这允许很多扩展（再生，毒药，保护......）

我使用接口“CreatureProperties”，它定义了一个整数值和一个id，并且可以在每个回合对怪物执行操作。您将这些属性子类化以执行给定的属性

```
abstract class CreatureProperties {
   protected String id = "";
   protectd int propertyValue = 0;
   public void actOn(BaseMonster);
  // plus setter and getter
}

public RegenerationProperty implements CreatureProperties {
   final public REGENERATION_ID = "Regeneration";
   int regenerationValue = 0;

   public RegenerationProperty(int value){
      id = REGENERATION_ID;
      propertyValue= value;
   }

   public void actOn(BaseMonster monster){
      monster.setHitPoint(monster.getHitPoints()+propertyValue);
   }
}

in the BaseMonster class, you manage a set of MonsterProperty, initially empty.

    class BaseMonster {
       protected List<CreatureProperties> properties = 
         new ArrayList<CreatureProperties>();
       // plus management of propeties : add remove, iterator...

       public void update(){
          // perform all properties-linked update to monster
          foreach (CreatureProperty property : properties){
             property.actOn(this);
          }
       } 
    } 
```

在 SomeMonster 的子类中，您只需在实例化期间添加此类怪物的一组属性。

```
class SomeMonster extends BaseMonster {
   public SomeMonster(){
      properties.add(new RegenerationProperty(5));  // presto : monster regenerate
   }
} 
```

我在某些情况下使用 Id，其中每个刻度都没有使用该属性（即更新中没有任何内容），但例如减少伤害（id="LightningReduction"），或修改现有属性列表（一个属性删除所有再生属性并添加相同值的 PoisonProperty...）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T14:00:46.823

你可以在你的接口中添加一个方法，比如 getRegnerationValue()，确保所有具有该接口的生物都有这个方法来保存你想要使用的值或公式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-10T14:33:38.850

你应该问自己的问题是：如果一个生物应该再生，你怎么知道？它会实现不同的（或扩展的）基类吗？一种实现再生的？

如果答案是您将扩展基类（类似于 BaseRegeneratingCreature）并且所有再生生物都将扩展该类，那么这就是您的答案：BaseRegeneratingCreature 应该实现该接口，并具有再生所需的所有属性。

所有非再生生物都应该直接扩展 BaseCreature（或其他扩展类），并且不需要再生相关的属性。

然后，您的基类可能有一些方法，例如：

```
OnStartOfTurn(); 
```

这将在 BaseRegeneratingCreature 中调用 regenerates()（然后可能会调用 super()），并在 BaseCreature 中执行其他操作或调用其他方法。

# tridion - 传输需要更长的时间从 SDL Tridion R5.3 中的传输根临时文件夹中获取内容

> ID：12821138
> 
> 赞同：0
> 
> 时间：2012-10-10T13:58:38.837
> 
> 标签：tridion, tridion-content-delivery

我们在 SDL Tridion R5.3 中的内容发布存在性能问题。

一旦我从 CMS 服务器发布内容，我就可以看到内容文件夹被拖放到传输临时文件夹 C:\transportemp。然而，传输需要将近 120-140 秒才能获取并处理此内容。你有没有遇到过类似的问题。是否有任何设置可以减少传输侦听器服务时间？这样，一旦系统丢弃了内容，就会启动传输并将包立即发送到发布。

我在 2GB RAM、2 个速度为 2.53 GHZ 的 CPU 的测试服务器上运行我的测试。CMS 服务器 SDL Tridion MMC 管理单元中的传输渲染和部署线程数为 2 COM+ 回收设置为 512 MB。SDL Tridion MMC 管理单元中给出的传输根临时文件夹为 C:\transporttemp\

我使用内容文件夹 tcm_0-423535-63560.Content 大小为 150KB 运行此测试。

以下是同一测试的统计数据。

在 7.52.20 AM 放入传输根包文件夹 C:\transporttemp 大小为 109 KB 的文件夹

文件夹在 C:\transporttemp 文件夹中保持静止 131 秒。

传输开始于 [Debug 10-10-2012 07:54:31] 传输结束于 [Debug 10-10-2012 07:54:41]

运输时间 - 10 秒

部署开始于 [Debug 10-10-2012 07:54:32] 部署结束于 [Debug 10-10-2012 07:54:39] 部署时间 - 7 秒

感谢您对此的帮助。谢谢，KK

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:32:06.977

通常，当您有很多临时目录文件和/或您的事务文件没有得到清理时，您会注意到这种行为。您可以检查这些文件夹位置以查找以`tcm`.

作为维护任务的一部分，您可以设置一些计划的作业来定期清理这些文件夹。

文件夹通常是

*   TRIDION_HOME\bin\transactions 发布
*   CMS 和 Deployer 上的 WINDOWS_HOME\temp 也是如此

您使用的是什么类型的传输机制？`https` `ftp`ETC？另外，检查包传输是否不需要时间上传到部署器（我不知道包大小，但对于简单的发布包来说，10 秒并不常见）。

# javascript - jQuery AJAX 自定义函数和自定义回调？

> ID：12821142
> 
> 赞同：6
> 
> 时间：2012-10-10T13:58:48.760
> 
> 标签：javascript, jquery, ajax, jquery-callback

大家好！

我有这样的`ajax()`电话：

```
$.ajax({
  type: "post",
  url: "whatever.php",
  data: {
    theData: "moo moo"
  },
  success: function(data) {
    console.log(data);
  }
}); 
```

是否可以将其包装在自定义函数中**但**保留回调？
就像是：

```
function customAjax(u, d, theCallbackStuff) {
  $.ajax({
    type: "post",
    url: u,
    data: d,
    success: function(data) {
      //RUN theCallbackStuff
    }
  });
} 
```

`theCallbackStuff`将是这样的：

```
var m = 1;
var n = 2;
alert(m + n + data); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T14:05:45.853

*编辑：*

最近有人对此表示赞同，我不得不说我不会再这样做了。`$.ajax`返回 a`promise`所以你可以直接使用 Promise 以更一致和更健壮的方式完成我刚刚在此处所做的工作。

```
function customRequest(u,d) {
   var promise = $.ajax({
     type: 'post',
     data: d,
     url: u
   })
   .done(function (responseData, status, xhr) {
       // preconfigured logic for success
   })
   .fail(function (xhr, status, err) {
      //predetermined logic for unsuccessful request
   });

   return promise;
} 
```

然后用法如下所示：

```
// using `done` which will add the callback to the stack 
// to be run when the promise is resolved
customRequest('whatever.php', {'somekey': 'somevalue'}).done(function (data) {
   var n = 1,
       m = 2;

   alert(m + n + data);
});

// using fail which will add the callback to the stack 
// to be run when the promise is rejected
customRequest('whatever.php', {'somekey': 'somevalue'}).fail(function (xhr, status, err) {
   console.log(status, err);
});

// using then which will add callabcks to the 
// success AND failure stacks respectively when 
// the request is resolved/rejected
customRequest('whatever.php', {'somekey': 'somevalue'}).then(
  function (data) {
     var n = 1,
         m = 2;

     alert(m + n + data);
  },
  function (xhr, status, err) {
     console.log(status, err);
  }); 
```

* * *

当然，我一直这样做。您可以在实际成功回调中执行回调，也可以将回调分配为成功回调：

```
function customRequest(u,d,callback) {
   $.ajax({
     type: "post",
     url: u,
     data:d,
     success: function(data) {
        console.log(data); // predefined logic if any

        if(typeof callback == 'function') {
           callback(data);
        }
     }
  });
} 
```

用法看起来像：

```
customRequest('whatever.php', {'somekey': 'somevalue'}, function (data) {
   var n = 1,
       m = 2;

   alert(m + n + data);
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T14:01:33.573

```
 function customAjax(u, d, theCallbackStuff) {
      $.ajax({
        type: "post",
        url: u,
        data: d,
        success: theCallbackStuff 
      });
    }

customAjax(url, data, function(data){
//do something
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T14:17:03.127

在此注释中，您可以将一个完整的函数作为回调传递给它：

```
function customRequest(u,d,callback) {
   $.ajax({
     type: "post",
     url: u,
     data:d,
     success: function(data) {
        console.log(data); // predefined logic if any

        if(typeof callback == 'function') {
           callback(data);
        }
     }
  });
}

// Then call it as follows:

function initiator() {

    customRequest( '/url/to/post', 'param1=val', function() { alert( 'complete' ); })

} 
```

简单地将它作为匿名函数传递也可以。只是为了展示:)

# macos - 如何在带有 Retina 显示屏的 Mac OS 上的 OpenGL 中绘制文本

> ID：12821144
> 
> 赞同：5
> 
> 时间：2012-10-10T13:58:54.650
> 
> 标签：macos, opengl, fonts, nsstring, retina-display

我正在使用 OpenGL 在 Mac OS 中绘图。当我的代码在 Retina 显示屏上运行时，除文本绘图外，一切正常。在视网膜显示下，文本是应有的两倍大。这是因为字体大小以点为单位，每个点在 Retina 下是 2 个像素，但 OpenGL 是基于像素的。

以下是标准显示下的正确文字图：
![在标准显示下正确绘制文本](../Images/e54f183cfd2c9279e76bf0b2fe108587.png)

这是 Retina 显示下的错误文本绘制：
![Retina 显示下的文字绘制不正确](../Images/413f390641908bb5194dc66b294aeeef.png)

这是我通常如何绘制字符串。由于 OpenGL 没有文本绘制功能，为了绘制文本，我执行以下操作：

1.  获取字体：

    NSFontManager *fontManager = [NSFontManager sharedFontManager];
    NSString* font_name = [NSString stringWithCString: "Helvetica" 编码: NSMacOSRomanStringEncoding];
    字体 = [fontManager fontWithFamily：字体名称特征：字体样式重量：5 大小：9]；
    属性 = [[NSMutableDictionary dictionaryWithCapacity: 3] 保留];
    [属性 setObject:font forKey:NSFontAttributeName];

2.  创建并测量字符串：

    NSString* aString = [NSString stringWithCString: "blah blah" encoding: NSMacOSRomanStringEncoding];
    NSSize frameSize = [aString sizeWithAttributes: m_attribs];

3.  分配 NSImage 的大小：

    NSImage* image = [[NSImage alloc] initWithSize:frameSize];
    [图像锁定焦点]；

4.  将字符串绘制到图像中：

    [aString drawAtPoint:NSMakePoint (0, 0) withAttributes:m_attribs];

5.  获取位：

    NSBitmapImageRep* 位图 = [[NSBitmapImageRep alloc] initWithFocusedViewRect:NSMakeRect (0.0f, 0.0f, frameSize.width, frameSize.height)];
    [图像解锁焦点]；

6.  创建 OpenGL 纹理：

    GLuint 纹理 = 0;
    glGenTextures(1, &texture);
    glTexImage2D(GL_TEXTURE_RECTANGLE_EXT, 0, GL_RGBA, GLsizei(frameSize.width), GLsizei(frameSize.height), 0, GL_RGBA, [位图 bitmapData]);

7.  绘制纹理：

    glBindTexture ....
    其他OpenGL绘图代码

我的问题是如何让 NSString 以像素分辨率而不是以点为单位绘制。

我尝试了以下方法：

1.  以点大小的一半绘制：4.5 而不是 9。这给了我正确的大小，但文本绘制模糊。
2.  以点大小绘制并将纹理缩小到 OpenGL 中大小的一半，这同样不会产生好看的结果：
    ![纹理收缩](../Images/48690379ab77b18da1df8466d722f849.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:14:04.257

OpenGLs 坐标系实际上是基于点的，而不是基于像素的，但你是决定这些点是什么的人。上下文通过 glOrtho 函数（或者您可以手动构建正交矩阵）定义 2D 坐标系，该函数设置屏幕上的最小和最大 x,y 坐标。例如，可以设置正交投影，使 0 位于屏幕左侧，而 100 位于右侧，无论您渲染到的帧缓冲区的大小如何。

字体纹理似乎创建得很好。问题是你在几何上渲染它是它需要的两倍大。在 OpenGL 中，纹理大小不会影响屏幕上呈现的对象的大小。屏幕上的大小由传递给`glDrawArrays`或`glBegin`等的几何图形而不是纹理定义。

我认为问题在于您使用字体纹理的像素大小来定义用于在屏幕上渲染的四边形大小。这会将您的问题放在“其他 OpenGL 绘图代码”部分。要解决这个问题，您可以对绘图应用某种比例因子。在视网膜模式下，比例因子为 0.5，对于普通屏幕，它是 1.0（UIKit 使用类似的想法来渲染 UIView 内容）

四边形计算可能如下所示：

```
quad.width = texture.width * scaleFactor 
quad.height = texture.height * scaleFactor 
```

另一种选择是将四边形渲染大小与纹理完全分开。如果您有一个用于绘制文本的函数或类，它可能有一个字体大小参数，它将用作实际的四边形大小，而不是使用纹理大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-14T02:20:27.603

鉴于您有一个`NSBitmapImageRep`并从中获取像素栅格数据，您应该使用`bitmap.pixelsWide`and `bitmap.pixelsHigh`，而不是`frameSize`在从位图创建纹理时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-14T00:43:40.720

对于我的视网膜显示器，我遇到了帧缓冲区不适合实际窗口的问题（整个缓冲区被渲染到窗口的四分之一）。在这种情况下，使用双视口可以解决问题。

```
# Instead of actual window size width*height,
# double the dimensions for retina display 

glViewport(0, 0, width*2, height*2) 
```

在您的情况下（这部分只是一个假设，因为我无法运行您的代码），更改您传递给 gl 以创建纹理的帧大小可以解决问题。

```
GLsizei(frameSize.width*2), GLsizei(frameSize.height*2) 
```

# .net - 在mysql中获取索引或使用对列表？

> ID：12821148
> 
> 赞同：0
> 
> 时间：2012-10-10T13:59:02.293
> 
> 标签：.net, mysql, dapper

我想做类似下面的事情，其中​​ ls 是一对（id 和 value 匹配 blah）。也许如果我可以获得列表匹配的索引，我可以正常使用列表并在代码中获取 id

```
select @id from table1 where blah in @ls 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T09:42:38.477

Dapper 是 SQL 的一个非常薄的饰面。它作为语法更改添加的*唯一*`IN`内容是扩展：

```
x in @foo 
```

到

```
x in (@foo0, @foo1, @foo2, @foo3) 
```

但是，我认为您的查询不能这样写。那么，第一步是用常规 SQL 编写查询。如果这是 SQL-Server，我会想：

*   将分隔字符串输入转换为表格输出的 UDF
*   内连接

例如：

```
select #x.id
from dbo.MyMagicUdf(@s) #x -- has columns id and value
inner join table1 t on t.blah = #x.value -- or whatever the join is 
```

但重复一遍：第一步是用 SQL 为您的 RDBMS 编写它。一旦你有了*这个*工作，让dapper使用它应该是一件轻而易举的事。

# jquery - 切换当前选择的类/背景（jquery）

> ID：12821152
> 
> 赞同：1
> 
> 时间：2012-10-10T13:59:14.780
> 
> 标签：jquery, removeclass, toggleclass

我如何在这里更改跨度（类：右图标打开）的背景？

我尝试使用 toggleClass 和 add/removeClass，但我不知道如何在当前元素上使用

有什么想法吗？

[http://jsfiddle.net/inc1uder/pK3Vn/2/](http://jsfiddle.net/inc1uder/pK3Vn/2/)

PS对不起我的英语不好（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:48:11.303

这里是[http://jsfiddle.net/4FSMV/6/](http://jsfiddle.net/4FSMV/6/) 将来请考虑将所有脚本放在`<script>`标签或 .js 文件中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:51:26.673

也试试这个。

[http://jsfiddle.net/pK3Vn/5/](http://jsfiddle.net/pK3Vn/5/)

# python - 搜索列表中包含更多 a 的单词

> ID：12821156
> 
> 赞同：-2
> 
> 时间：2012-10-10T13:59:25.140
> 
> 标签：python

我在处理老师布置的作业时遇到了问题。我是一个python新手，所以我不太懂这种语言。

我需要创建一个函数，它给出一串单词并查找带有更多“a”的单词，如果有两个单词具有相同数量的“a”，则打印第一个。

编辑1：是的，我的想法是查看每个单词并使用类似的东西`str.count("a")`，然后打印具有最高值的单词

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:03:40.483

```
>>> words = "foo bar baz banana"
>>> max(words.split(), key=lambda x:x.count("a"))
'banana' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:13:56.327

这个答案应该很简单，即使对于初学者也是如此，因为它只使用非常基本的命令：

```
s = 'caaat caat cat kittycaat, rack, smaaack'
x = 0
for i in s.split():
    if i.count('a') > x:
        x = i.count('a')
        word = i
print word 
```

基本上，它使用字符串的 .split() 函数将字符串拆分为单独的单词。然后 for 循环遍历每个单词，注意每个单词中有多少个 'a'，如果有超过 x 个单词，它会用数字更新 x 并将单词放入 'word' 变量中。

当循环得到另一个带有更多 'a' 的单词时，它会再次更新 x 并再次更新单词，但是如果它得到一个带有更少 'a' 的单词，那么它将什么也不做。

# java - Java中JButton的定位

> ID：12821160
> 
> 赞同：0
> 
> 时间：2012-10-10T13:59:38.457
> 
> 标签：java, user-interface, button, awt, frame

这是非常基本的代码，但我只需要一些帮助来理解..

我有一个按钮，我想把它放在面板的东侧..任何建议..

```
 public class ButtonText { 
        public static void main(String[] args) {
            Frame frame=new Frame("Button Frame");
            Button button = new Button("Submit"); 
            frame.setLayout(new FlowLayout());
            frame.add(button, BorderLayout.EAST);
            frame.setSize(200,100);
            frame.setVisible(true);
            frame.addWindowListener(new WindowAdapter()
            {
                public void windowClosing(WindowEvent e){
                System.exit(0);
            }
        });
    } 
```

看起来像这样[http://imgur.com/0GYso](http://imgur.com/0GYso)

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:04:15.123

要使用边框布局管理器布置用户界面，您需要将框架的布局设置为 BorderLayout 的实例。默认的 FlowLayout 从左到右设置组件，并在必要时设置到下一行。

```
frame.setLayout(new BorderLayout());
frame.add(button, BorderLayout.EAST); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:04:14.367

您可以使用在框架中定位元素的布局。看看[这里](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)。您正在使用[FlowLayout](http://docs.oracle.com/javase/7/docs/api/java/awt/FlowLayout.html)，但您需要了解每个布局和定位元素的规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:04:53.813

`FlowLayout`不能使用`BorderLayout`约束...

尝试使用`BorderLayout`代替，`FlowLayout`它应该可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T14:05:52.263

**Flowlayout 不允许你这样做**，你应该设置

```
 frame.setLayout(new BorderLayout());
     frame.add(button, BorderLayout.EAST); 
```

或者

```
 frame.setLayout(new BorderLayout());
     frame.add(button, BorderLayout.LINE_START); 
```

让它发挥作用，

**Flowlayout**只定位水平堆栈之类的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T14:07:02.853

你可能想尝试这样的事情

```
Frame frame=new Frame("Button Frame");

Button button = new Button("Submit"); 

HorizontalPanel hp = new HorizontalPanel();
hp.setHorizontalAlignment(HasHorizontalAlignment.ALIGN_RIGHT);
hp.setWidth(200);
hp.add(button);

frame.add(hp);
frame.setSize(200,100);
frame.setVisible(true); 
```

# ssis - SSIS 日志记录：使用变量而不是重新部署启用/禁用日志记录

> ID：12821161
> 
> 赞同：0
> 
> 时间：2012-10-10T13:59:39.703
> 
> 标签：ssis

我有一个 SSIS 包，调用它`PackageA`。有时，我想让它记录到文本文件中，而其他时候，我不想。我最初的想法是让包检查一个表，然后使用变量/表达式来启用/禁用日志记录。我假设这是不可能的？

我的解决方法是创建一个“主”包，`PackageB`使用 SQL 任务来获取是否启用日志记录。 `PackageB`将调用`PackageA1`或`PackageA2`取决于值 -`PackageA1`将在`PackageA`启用日志记录的`PackageA2`情况下部署，并将在`PackageA`禁用日志记录的情况下部署。

然而，这使得部署变得麻烦且容易搞砸。至少有什么方法可以完成类似于我正在寻找的东西吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T16:10:55.907

包具有`LoggingMode`属性，您可以在使用 GUI 或`dtexec`命令行开关运行包时更改它：（[更多信息](http://blogs.msdn.com/b/mattm/archive/2010/01/05/how-do-i-disable-all-logging-on-my-packages.aspx)）

```
dtexec /f "C:\Package.dtsx" /set "\Package.Properties[LoggingMode];2" 
```

如果您使用`SSIS 2012`并且`Project Deployment Model`您还可以使用例如存储过程（[更多信息](http://msdn.microsoft.com/en-us/library/ff877990.aspx)）来设置`LOGGING_LEVEL`参数 from `None`to 。`Verbose``catalog.set_execution_parameter_value`

# dojo - Dojo/Dijit 声明控件

> ID：12821164
> 
> 赞同：1
> 
> 时间：2012-10-10T13:59:47.940
> 
> 标签：dojo

两种声明之间有什么区别，一种（或已经停止）是否会被终止？

```
<div data-dojo-type="dijit.Dialog" data-dojo-props="title:'Confirm Deletion'">
...
<div dojoType="dijit.Dialog" title="Confirm Deletion"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:09:43.297

`data-`是一种 HTML5 表示法。从技术上讲`<div dojoType="dijit.Dialog" title="Confirm Deletion">`是无效的 HTML，因为 HTML 规范没有定义作为`dojoType`小部件属性的属性和其他属性。结果是，当您在 html 编辑器中打开文件时，html 编辑器会将标记突出显示为无效。

HTML5 规范认可使用自定义属性和添加`data-`属性。HTML5 编辑器将接受任何`data-`有效的属性 begininnng。

展望未来，您应该使用 HTML5 表示法。

```
<div data-dojo-type="dijit.Dialog" data-dojo-props="title:'Confirm Deletion'"> 
```

# android - 我应该为哪种屏幕尺寸和密度设计 Android？

> ID：12821169
> 
> 赞同：2
> 
> 时间：2012-10-10T14:00:10.537
> 
> 标签：android

我一直在阅读 4 屏幕尺寸和 Android 屏幕尺寸支持的 4 密度。我想启动并运行一个快速原型应用程序。是否有任何类型的策略，或者我应该（基于设备尺寸+密度，主要使用 %'s）设计具有 med+high+xhigh dpi 的正常屏幕尺寸？这里有最佳实践吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:37:23.013

//首先开始设计MDPI

```
Baseline phone  mdpi    320x480 
```

从那里你可以增加你的drawables为**1.5**`HDPI`和**2**`XHDPI`

TVDPI 它将通过使用`HDPI`资产自动扩展。 `213/160 =1.33`

[参考这里：](http://developer.android.com/guide/practices/screens_support.html#screen-independence)

```
 1\. Use wrap_content, fill_parent, or dp units when specifying
    dimensions in an XML layout file.
 2\. Do not use hard coded pixel values in your application code
 3\. Do not use AbsoluteLayout (it's deprecated) 
 4\. Supply alternative bitmap drawables for different screen densities 
```

# javascript - 复选框无法正常工作

> ID：12821171
> 
> 赞同：1
> 
> 时间：2012-10-10T14:00:16.310
> 
> 标签：javascript, jquery

这是我在 jquery 中的一段代码，实际上我想要这样：

*   默认情况下，Ball 的值将显示在文本框中。
*   同时 All 或 Stopall 都可以工作（这里不能正常工作：（）
*   多次检查“全部”按钮，但未按预期工作

这是小提琴链接：http: [//jsfiddle.net/bigzer0/PKRVR/11/](http://jsfiddle.net/bigzer0/PKRVR/11/)

```
$(document).ready(function() {
    $('.check').click(function(){
        $("#policyName").val('Start');
        $("#features").val('');

        $('[name="startall"]').on('click', function() {
        var $checkboxes = $('input[type="checkbox"]').not('[name="startall"], [name="stopall"]');
        if (this.checked) {
            $checkboxes.prop({
                checked: true,
                disabled: true
            });
        }
        else{
             $checkboxes.prop({
                checked: false
            });
        }
    });

                  $(".check").each(function(){
            if($(this).prop('checked')){

                $("#policyName").val($("#policyName").val() + $(this).val());    
                $("#features").val($("#features").val() + $(this).data('name'));
                }            
        });

     });
}); 
```

欢迎在此背景下发表任何评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:37:17.010

你的代码在很多方面都被破坏了。您正在单击事件中绑定单击事件。你应该把它放在外面，并确保它在 document.ready 函数内，因为你的元素是一个静态元素。

```
$(document).ready(function() {    
    // cache features
    var $features = $('#features');
    // cache policyname
    var $policy = $("#policyName");
    // cache all/stopall
    var $ss = $('[name="startall"],[name="stopall"]');
    // cache all others
    var $checkboxes = $('input[type="checkbox"]').not($ss);

    // function to update text boxes
    function updateText() {
        var policyName = 'Start';
        var features = '';
        // LOOP THROUGH CHECKED INPUTS - Only if 1 or more of the 3 are checked
        $checkboxes.filter(':checked').each(function(i, v) {
            policyName += $(v).val();
            features += $(v).data('name');
        });
        // update textboxes
        $policy.val(policyName);
        $features.val(features);
    }

    $checkboxes.on('change', function() {
        updateText();
        // check startall if all three boxes are checked
        $('input[name="startall"]').prop('checked', $checkboxes.filter(':checked').length == 3);
    });

    $('input[name="startall"]').on('change', function() {
        $checkboxes.prop({
            'checked': this.checked,
            'disabled': false
        });
        updateText();
    });

    $('input[name="stopall"]').on('change', function() {
        $checkboxes.add('[name="startall"]').prop({
            'checked': false,
            'disabled': this.checked
        });
        updateText();
    });

    // updatetext on page load
    updateText();
});​ 
```

[小提琴](http://jsfiddle.net/wirey00/KFRzV/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:06:44.013

您正在单击功能中检查单击功能。你应该使用 if 语句。

# python - 简单的 python localhost 代理 - 几乎可以工作

> ID：12821174
> 
> 赞同：4
> 
> 时间：2012-10-10T14:00:18.067
> 
> 标签：python, sockets, proxy

我正在做自己的一个稍微大一点的项目，我需要在 python 中创建一个 localhost 代理。

我写我的方式是在 localhost 的 8080 端口上有一个 TCP 服务器（使用套接字和 SOCK_STREAM）。它接受来自本地主机的请求，使用切片、string.find() 和 gethostbyname() 找到目标 IP，因此它打开另一个 TCP 套接字，发送请求并 recv 回复。之后，它将回复转发回 localhost 代理，该代理又将其返回给浏览器。

这是带有大量调试消息和调试文件的代码，用于收集浏览器的请求和收到的回复（另请注意，这只是一个原型，因此有限的 for 循环而不是 while 1 循环）：

```
import socket

local = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

f = open('test.txt', 'a')
local.bind(('localhost', 8080))
local.listen(5)
for i in xrange(20):
    print '=====%d=====\n' % i
    out = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    data, addr = local.accept()
    print 'Connection accepted'
    buffer = data.recv(4096)
    print 'data recieved'
    f.write('=============================================================\n')
    f.write(buffer)
    end = buffer.find('\n')

    print buffer
    #print buffer[:end]
    host = buffer[:end].split()[1]
    end = host[7:].find('/')

    print host[7:(end+7)]
    host_ip = socket.gethostbyname(host[7:(end+7)])
    #print 'remote host: ' + host + ' IP: ' + host_ip
    print 'sending buffer to remote host'
    out.connect((host_ip, 80))
    out.sendall(buffer)
    print 'recieving data from remote host'
    reply = out.recv(4096)
    out.close()
    print 'data recieved from remote host'
    f.write('+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n')
    f.write(reply)
    f.write('\n\n\n')
    print 'sending data back to local host'
    data.sendall(reply)
    print 'data sent'
local.close()
out.close()    
f.close() 
```

现在我的问题是它似乎对前几个请求工作正常，它获取 html 和一些图像，但在某些时候它总是停在“接收到的数据”点并退出，因为它没有得到数据，即。缓冲区是空的。浏览器仍然显示它正在加载页面的元素，但是当它停止并查看文本日志文件时，我看到缓冲区是空的，这意味着浏览器没有向代理提交任何内容？

我猜问题出在浏览器如何提交请求以及我的脚本没有对此行为做出正确反应的某个地方。

我知道我可以使用 Twist 框架，但是我想自己学习编写这种东西。我一直在阅读有关 SocketServer 的信息，我可能会使用它，但我不知道它是否能解决问题，因为坦率地说，我真的不明白是什么导致了这里的问题。我的脚本对浏览器来说太慢了吗？服务器是否发送多个答案并且我的接收套接字应该侦听更多数据包？我的缓冲区大小 (4096) 是否太小？

我真的很感激朝着正确的方向轻推。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T15:54:49.950

好吧，我设法回答了我的问题。我之前怀疑的部分是正确的——浏览器正在等待某事，而某事正在回复。

我启动了 Wire Shark，做了一些实验，我注意到我的代理让很多丑陋的 TCP RST 出现在 Wireshark 中。我还注意到，在正常连接中，许多服务器回复被分成几个不同的数据包。

基本上，我的程序没有从服务器得到所有的答案，因为 out.recv 只得到了一部分的回复。显而易见的答案是循环并听取所有回复。[我在http://www.binarytides.com/receive-full-data-with-the-recv-socket-function-in-python/](http://www.binarytides.com/receive-full-data-with-the-recv-socket-function-in-python/)找到了完美的解决方案。

我很快重新编写了我的程序，它就像一个魅力。现在我可以继续我的整个项目了。

我希望这可以帮助将来遇到类似问题的其他人。

# joomla - 如何正确使用 joomla 中的语言文件

> ID：12821179
> 
> 赞同：2
> 
> 时间：2012-10-10T14:00:28.477
> 
> 标签：joomla, joomla2.5, joomla-extensions

据我可以挖掘思想谷歌，我发现了类似的东西：

```
<languages>
<language tag="en-GB">en-GB.whatever.ini</language>
<language tag="en-GB">en-GB.whatever.sys.ini</language>
</languages> 
```

从这里有一些问题：

1.  我可以在没有标签的情况下使用它并以某种方式指定使用默认系统语言吗
2.  `whatever.ini`和有什么区别`whatever.sys.ini`
3.  我是否还有其他内容要写入 xml 或那 4 行上传和运行语言

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T14:07:10.863

1.  `tag="en-GB"`是必需的。
2.  `.ini`包含所有翻译，包括在模块或插件管理器中打开扩展时的描述......`sys.ini`用于在安装时定义扩展的描述。
3.  您在 XML 中提供的代码很好；）

# html - 可以用 CSS 清除绝对定位的元素吗？

> ID：12821182
> 
> 赞同：14
> 
> 时间：2012-10-10T14:00:30.433
> 
> 标签：html, css, css-position

有没有办法用 CSS 清除绝对定位的元素？我正在创建一个页面，我需要网站的每个部分（部分元素）都绝对定位，并且我想在这些元素下方应用一个包含内容的页脚。
尝试相对定位页眉和页脚以查看是否会考虑总高度，但页脚仍会“被困”在节元素下方。有任何想法吗？

```
<header style="position: relative;"></header>

<div id="content" style="position: relative;">

    <section id="a" style="position: absolute;"></section>

    <section id="b" style="position: absolute;"></section>

    <section id="c" style="position: absolute;"></section>

    <section id="d" style="position: absolute;"></section>

    <section id="e" style="position: absolute;"></section>

</div>

<footer style="position: relative;"></footer> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-10T14:15:49.453

绝对定位的元素不再是布局的一部分——父项不知道绝对定位的子元素有多大。您需要自己设置“内容”的高度，以确保它不会与页脚重叠。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-10T15:08:17.590

不要在布局中使用绝对定位的元素，因为这些元素会从正常流程中移除，并且不再影响它们周围的元素。而且它们不受其他元素的影响。

在条件允许的情况下，使用绝对定位在容器内移动元素。

对于浮动元素，我建议您使用一种称为 clearfix 的特定清除技术。我虔诚地使用它。

[http://nicolasgallagher.com/micro-clearfix-hack/](http://nicolasgallagher.com/micro-clearfix-hack/)

[http://jsfiddle.net/necolas/K538S/](http://jsfiddle.net/necolas/K538S/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-30T09:16:04.993

有同样的问题，所有的都是绝对定位的，但是让第一个是相对的，至于高度发生变化的响应式布局，它确实有助于跟踪元素的高度变化，注意在这种情况下所有元素都具有相同的高度：

```
.gallery3D-item {
    position: absolute;
    top: 0;
    left: 0;
}
.gallery3D-item:first-of-type {
    position: relative;
    display: inline-block;
}
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-05T07:57:26.553

我发现了一个简单的解决方案，[它](https://codepen.io/anon/pen/YJWYBx)可能无法涵盖所有​​可能的问题，但至少它解决了我的问题。

HTML：

```
<p>Content before</p>
<div class="offset-wrapper">
    <div class="regular">
        <img src="https://www.gravatar.com/avatar/bdf0bf75e96fa18e57769865ebeb9a6e?s=48&d=identicon&r=PG" />
    </div>
    <div class="special">
        <img src="https://www.gravatar.com/avatar/bdf0bf75e96fa18e57769865ebeb9a6e?s=48&d=identicon&r=PG" />
    </div>
</div>
<p>Content after</p> 
```

CSS：

```
.offset-wrapper {
  background: green;
  position: relative;
  width: 100px;
}
.offset-wrapper .regular {
  visibility: hidden;
}
.offset-wrapper .special {
  bottom: -15px;
  left: -15px;
  position: absolute;
} 
```

# c++ - C++ 中对库错误的未定义引用

> ID：12821184
> 
> 赞同：1
> 
> 时间：2012-10-10T14:00:32.003
> 
> 标签：c++, include, atmel

这段代码：

```
#include "SoftwareSerial.h">
#include <avr/io.h>
#include <HardwareSerial.h>
#include <avr/interrupt.h>

void read_response();

int main () {
    sei();
    Serial.begin(2400);
    uint8_t receivePin = 2;
    uint8_t transmitPin = 3;
    SoftwareSerial softSerial(receivePin, transmitPin);
    softSerial.begin(2400);

    while(1){
        softSerial.println("to soft serial");
        Serial.print(softSerial.read());
    }   
} 
```

在编译时给我这个错误：

```
undefined reference to `SoftwareSerial::SoftwareSerial(unsigned char, unsigned char, bool)' 
```

我试过使用 #include "SoftSerial.h" 但没有区别。SoftSerial.h 和 SoftSerial.cpp 文件位于 HardwareSerial.h 文件所在的库文件夹中。

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T14:05:30.100

这不是编译错误。这是一个链接器错误。

如果 SoftSerial 是您自己项目的一部分，则 CPP 文件可能不是已编译项目的一部分。如果是外部库，则需要链接到它。你如何做到这一点取决于你的 IDE/编译器。

# jquery - 使用 jQuery for iPhone webapp，'on' 不适用于动态创建的元素

> ID：12821185
> 
> 赞同：0
> 
> 时间：2012-10-10T14:00:32.647
> 
> 标签：jquery, iphone, events, dynamic, element

以下代码在单击 <div1> 时将 <div3> 添加到 html。单击 <div3> 然后在除 iPhone 之外的每个测试的网络浏览器上显示警报。适用于 Android，适用于 Safari/OSX：

```
<!doctype html>
<html>
<head>
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
$(function () {
    $('#div1').on('click', function(e) { 
        $('#div2').html('<div id="div3">Now Click Me!</div>'); 
    });
    $('#div2').on('click', '#div3', function(e) { alert('OLA!'); }); 
});
</script>
</head>
<body>
<div id='div1' style='border:black 1px solid; background:yellow'>CLICK ME</div>
<div id='div2'  style='border:black 1px solid; background:yellow; font-size:48px'/>
</body>
</html> 
```

我希望找出为什么 Safari/iPhone 在这里表现不同，以及是否有办法解决这种行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:28:05.800

Ok, I found the issue. The click is not registering in div3 because div3 is transparent. Adding a background color to div3 works:

```
$('#div2').html('<div id="div3" style="background:pink;">Now Click Me!</div>'); 
```

Thanks for the help.

# c# - 是否在任何地方记录了新用户警报的 SharePoint OOTB 电子邮件确认？

> ID：12821196
> 
> 赞同：0
> 
> 时间：2012-10-10T14:01:01.847
> 
> 标签：c#, email, sharepoint-2010, smtp

正如标题所说，我正在为 SharePoint 网站开发“订阅”功能，并且需要了解将发送给刚刚创建新警报的用户的可用 OOTB SharePoint 确认电子邮件的详细信息。

如果可能的话，我想知道如何配置这些电子邮件的设置。

对我来说很容易使用我已经使用的电子邮件方法和我正在使用的 SMTP，但我不希望用户收到两封关于同一件事的电子邮件。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:27:32.120

SharePoint 定义了警报模板的概念。

可以[在 Zeb Sadiq 的博客上](http://blog.zebsadiq.com/post/SharePoint-2010-custom-alert-template.aspx)找到介绍。

基本上，您必须为警报创建 xml 模板。

# ruby - 无法使用 Net::HTTP 在我的 ruby 代码中发出 HTTP 删除请求

> ID：12821197
> 
> 赞同：5
> 
> 时间：2012-10-10T14:01:01.783
> 
> 标签：ruby, http, rest

我在我的 ruby​​ 代码中使用 Net::HTTP 来发出 http 请求。例如发出一个帖子请求我做

```
require 'net/http'
Net::HTTP.post_form(url,{'email' => email,'password' => password}) 
```

这行得通。但我无法发出删除请求，即

```
require 'net/http'
Net::HTTP::Delete(url) 
```

给出以下错误

```
NoMethodError: undefined method `Delete' for Net::HTTP:Class 
```

[http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html](http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html)上的文档显示删除可用。那么为什么它在我的情况下不起作用？

谢谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T14:23:33.337

文档告诉您 Net::HTTP::Delete 是一个类，而不是一个方法。

试试`Net::HTTP.new('www.server.com').delete('/path')`吧。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-12T18:55:48.883

```
uri = URI('http://localhost:8080/customer/johndoe')
http = Net::HTTP.new(uri.host, uri.port)
req = Net::HTTP::Delete.new(uri.path)
res = http.request(req)
puts "deleted #{res}" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-26T23:50:47.187

简单的发布和删除请求，请参阅[文档](https://ruby-doc.org/stdlib-2.4.1/libdoc/net/http/rdoc/Net/HTTP.html)了解更多信息：

```
puts Net::HTTP.new("httpbin.org").post("/post", "a=1").body
puts Net::HTTP.new("httpbin.org").delete("/delete").body 
```

# extjs4 - Extjs4如何隐藏工具提示

> ID：12821199
> 
> 赞同：2
> 
> 时间：2012-10-10T14:01:05.613
> 
> 标签：extjs4

我有一个带有工具提示的图表。我想要的是当我将鼠标移到某些数据上时，工具提示应该隐藏，如果我将它移到其他数据上，它应该再次显示。我的示例代码是：

```
 tips = {
        trackMouse : true,
        width : 120,
        height : 26,
        renderer : function(storeItem, item){
            if(item.yField == 'temp'){
            this.hide();    
            } else{
            this.setTitle(storeItem.get(xFld)+':'+item.value[1]);
            }
        }; 
```

我试过了，`hide();`但没有任何效果。谁能给我正确的解决方案。谢谢`destroy();``disable();``visibility();`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T21:19:03.870

处理工具提示的[beforeShow](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.tip.ToolTip-event-beforeshow)事件。`true`如果您希望显示工具提示，则返回，`false`否则。

```
beforeShow: function(item) {
    return item.yField !== 'temp';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-11T14:26:52.250

处理 ToolTip 的 beforeShow 事件 如果要显示 ToolTip，则返回 true，否则返回 false。它对我有用，它节省了我的时间。谢谢凯文

# python - 什么是 ngram 计数以及如何使用 nltk 实现？

> ID：12821201
> 
> 赞同：14
> 
> 时间：2012-10-10T14:01:08.920
> 
> 标签：python, nlp, nltk

我读过一篇使用 ngram 计数作为分类器特征的论文，我想知道这到底是什么意思。

示例文本：“Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam”

我可以从本文中创建一元、二元、三元等，我必须在其中定义创建这些一元的“级别”。“级别”可以是字符、音节、单词、...

那么从上面的句子中创建一元组只会创建一个所有单词的列表？

创建二元组会导致单词对将彼此跟随的单词组合在一起？

因此，如果论文谈到 ngram 计数，它只是从文本中创建 unigrams、bigrams、trigrams 等，并计算哪个 ngram 出现的频率？

python的nltk包中是否有现有方法？还是我必须实现自己的版本？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-10T14:07:49.553

我找到了我的旧代码，也许它很有用。

```
import nltk
from nltk import bigrams
from nltk import trigrams

text="""Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam ornare
tempor lacus, quis pellentesque diam tempus vitae. Morbi justo mauris,
congue sit amet imperdiet ipsum dolor sit amet, consectetur adipiscing elit. Nullam ornare
tempor lacus, quis pellentesque diam"""
# split the texts into tokens
tokens = nltk.word_tokenize(text)
tokens = [token.lower() for token in tokens if len(token) > 1] #same as unigrams
bi_tokens = bigrams(tokens)
tri_tokens = trigrams(tokens)

# print trigrams count

print [(item, tri_tokens.count(item)) for item in sorted(set(tri_tokens))]
>>> 
[(('adipiscing', 'elit.', 'nullam'), 2), (('amet', 'consectetur', 'adipiscing'), 2),(('amet', 'imperdiet', 'ipsum'), 1), (('congue', 'sit', 'amet'), 1), (('consectetur', 'adipiscing', 'elit.'), 2), (('diam', 'tempus', 'vitae.'), 1), (('dolor', 'sit', 'amet'), 2), (('elit.', 'nullam', 'ornare'), 2), (('imperdiet', 'ipsum', 'dolor'), 1), (('ipsum', 'dolor', 'sit'), 2), (('justo', 'mauris', 'congue'), 1), (('lacus', 'quis', 'pellentesque'), 2), (('lorem', 'ipsum', 'dolor'), 1), (('mauris', 'congue', 'sit'), 1), (('morbi', 'justo', 'mauris'), 1), (('nullam', 'ornare', 'tempor'), 2), (('ornare', 'tempor', 'lacus'), 2), (('pellentesque', 'diam', 'tempus'), 1), (('quis', 'pellentesque', 'diam'), 2), (('sit', 'amet', 'consectetur'), 2), (('sit', 'amet', 'imperdiet'), 1), (('tempor', 'lacus', 'quis'), 2), (('tempus', 'vitae.', 'morbi'), 1), (('vitae.', 'morbi', 'justo'), 1)] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-30T00:44:41.250

当您计算 n-gram 时，最好使用哈希表（字典）而不是使用计数。对于上面的例子：

```
unigrams = {}
for token in tokens:
  if token not in unigrams:
    unigrams[token] = 1
  else:
    unigrams[token] += 1 
```

这给你时间复杂度 O(n)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-06T06:34:28.493

[NLTK 中](http://www.nltk.org/howto/collocations.html)有一个叫做搭配的概念。

您可能会发现它很有用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-10T14:06:59.093

我认为 nltk 中没有特定的方法可以帮助解决这个问题。不过这并不难。如果您有一个包含 n 个单词的句子（假设您使用的是单词级别），则获取所有长度为 1-n 的 ngram，遍历每个 ngram，并将它们作为关联数组中的键，其值为计数。代码不应超过 30 行，您可以为此构建自己的包并在需要的地方导入。

# java - 如何连接客户端（在 VirtualBox 上）和服务器（在 localhost 上）？我使用 CORBA 和 C++/Java

> ID：12821203
> 
> 赞同：4
> 
> 时间：2012-10-10T14:01:15.020
> 
> 标签：java, c++, connection, virtualbox, corba

我有一个简单的“Hello world”`C++/Java`应用程序`CORBA`。服务器写在`C++`，客户端写在`Java`。我使用 omniORBs`omniNames`作为名称服务。

我想`omniNames`在我的（Ubuntu）上运行我的和服务器，`localhost` 并在我的本地主机 Ubuntu 上安装的 VirtualBox 中的 Windows XP SP3 上运行我的客户端。

（我的意思是：在我的本地主机上，我安装了 Ubuntu 操作系统，在 Ubuntu 中，我安装了带有 Windows XP SP3 'inside' 的 VirtuaBox。）

我试过这个：

1.  我在我的 Ubuntu 本地主机上运行了 omniNames，：`omniNames -start`
2.  我运行我的服务器，也在同一台计算机上，带有 Ubuntu 操作系统的本地主机： `./server -ORBInitRef NameService=corbaloc::localhost:2809/NameService`
3.  我在网站上查看了我的 localhosts ip 地址：[http](http://whatismyipaddress.com/) ://whatismyipaddress.com/并写下来，例如：xxxx
4.  在 VirtualBox 上打开 Windows XP，运行客户端：`java client -ORBInitRef NameService=corbaloc::x.x.x.x:2809/NameService`

但出现错误：

```
C:\Temp\java>java client -ORBInitRef NameService=corbaloc:212.106.19.209:2809/Na
meService
pač 10, 2012 3:51:17 PM com.sun.corba.se.impl.naming.namingutil.CorbalocURL badA
ddress
WARNING: "IOP00110603: (BAD_PARAM) Bad host address in -ORBInitDef"
org.omg.CORBA.BAD_PARAM:   vmcid: SUN  minor code: 603  completed: No
        at com.sun.corba.se.impl.logging.NamingSystemException.insBadAddress(Unk
nown Source)
        at com.sun.corba.se.impl.logging.NamingSystemException.insBadAddress(Unk
nown Source)
        at com.sun.corba.se.impl.naming.namingutil.CorbalocURL.badAddress(Unknow
n Source)
        at com.sun.corba.se.impl.naming.namingutil.CorbalocURL.<init>(Unknown So
urce)
        at com.sun.corba.se.impl.naming.namingutil.INSURLHandler.parseURL(Unknow
n Source)
        at com.sun.corba.se.impl.resolver.INSURLOperationImpl.operate(Unknown So
urce)
        at com.sun.corba.se.impl.resolver.ORBInitRefResolverImpl.resolve(Unknown
 Source)
        at com.sun.corba.se.impl.resolver.CompositeResolverImpl.resolve(Unknown
Source)
        at com.sun.corba.se.impl.resolver.CompositeResolverImpl.resolve(Unknown
Source)
        at com.sun.corba.se.impl.orb.ORBImpl.resolve_initial_references(Unknown
Source)
        at client.main(client.java:28)

C:\Temp\java> 
```

可以这样连接客户端和服务器吗？我该怎么做？我在 Windows XP 上只有客户端文件 - 仅此而已 - 没有名称服务，没有服务器文件，只有客户端程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T14:58:15.357

> 我在网站上查看了我的 localhosts ip 地址：[http](http://whatismyipaddress.com/) ://whatismyipaddress.com/并写下来，例如：xxxx

这不太可能是要使用的正确 IP 地址。您如何为 VirtualBox VM 配置网络？如果您使用默认的 NAT 网络，则访客无法与主机通信，因此您需要配置“仅主机”网络，然后使用该网络主机端的 IP 地址（您在告诉客户端在哪里可以找到 ORB 时，应该能够`ifconfig`在 Ubuntu 主机上找到使用，寻找接口）。`vboxnet`您可能还会发现需要在主机上添加防火墙规则以允许虚拟接口上的传入连接。

请注意，您可以为同一个 VM 配置多个网络接口，因此如果 VM 需要访问 Internet 以及 ORB，那么使用两个接口设置它是完全可以的，一个 NAT 和另一个主机 -只要。

# spring-mvc - 如何使用 Sprinig WebFlow、Spring-JS、dojo、dijit 进行字段验证和检查请求的字段

> ID：12821210
> 
> 赞同：0
> 
> 时间：2012-10-10T14:01:24.593
> 
> 标签：spring-mvc, dojo, spring-webflow, spring-js

如何使用 Sprinig WebFlow、Spring-JS、dojo 进行字段验证和检查请求的字段。

我知道我必须执行以下操作：

```
<script type="text/javascript">                     Spring.addDecoration(new Spring.ValidateAllDecoration({elementId:'proceed', event:'onclick'}));
</script> 
```

和

```
<form:input path="creditCardName" maxlength="40"/>
<script type="text/javascript">
Spring.addDecoration(new Spring.ElementDecoration({
    elementId : "creditCardName",
    widgetType : "dijit.form.ValidationTextBox",
    widgetAttrs : { required : true }}));
</script> 
```

这就是我所要做的吗？

# java - Android MediaPlayer 需要很长时间来准备和缓冲

> ID：12821216
> 
> 赞同：27
> 
> 时间：2012-10-10T14:01:52.013
> 
> 标签：java, android, buffer, audio-streaming, android-mediaplayer

我的应用程序需要很长时间来准备和缓冲音频流。我已经阅读了这个问题[为什么 Android 的 MediaPlayer 需要这么长时间才能准备一些直播流进行播放？](https://stackoverflow.com/questions/6582908/why-does-it-take-so-long-for-androids-mediaplayer-to-prepare-some-live-streams)，但是它只是说人们遇到了这个问题，它没有说明如何改进这个问题。

我在从 2.2 到 4.1.2 测试的所有版本的 Android 中都遇到了这种情况。

这些流具有适合移动和 3G 连接的比特率。相同的流在等效的 iOS 应用程序中开始缓冲需要不到一秒的时间。

有没有办法指定应该缓冲的时间量？我知道 Tune In 广播应用程序提供此功能 ( [https://play.google.com/store/apps/details?id=tunein.player](https://play.google.com/store/apps/details?id=tunein.player) )。

谢谢。

编辑：我再次测试，发现它只发生在运行 Gingerbread 及更高版本（> = 2.3）的设备上。我知道 Android 将底层框架从 OpenCore 更改为 StageFright。那么如何优化媒体框架呢？旧的 HTC Wildfire 可以准备、流式传输和播放，这似乎是错误的，比全新的 HTC One X 和 Nexus 7 快 10 倍。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-02-07T09:33:29.287

几个月来我一直在为这个问题苦苦挣扎。最后我找到了解决方案。

真正的问题在于 MediaPlayer 类的实现。特别是 MediaPlayer 缓冲数据的方式。这就是为什么解决方案是创建自己的缓冲，将其保存到临时文件并将其提供给 MediaPlayer。

本教程和源代码准确地解释了如何。[http://androidstreamingtut.blogspot.nl/2012/08/custom-progressive-audio-streaming-with.html](http://androidstreamingtut.blogspot.nl/2012/08/custom-progressive-audio-streaming-with.html)

通过修改此代码，可以轻松创建更好的流媒体播放器。

~~谷歌开发者在这里真的搞砸了。~~

编辑：这个答案相当陈旧。现在我建议不要使用`MediaPlayer`和使用`ExoPlayer`。它可扩展、稳定，可以播放多种不同类型的媒体。你可以在这里找到它：[https ://github.com/google/ExoPlayer/](https://github.com/google/ExoPlayer/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-02T07:30:31.077

由于 Android MediaPlayer 类不提供对缓冲区大小等较低级别设置的访问，因此您确实无能为力。唯一的选择是使用 AudioTrack 和 FFmpeg 之类的库来制作自己的播放器来进行解码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T07:36:31.097

我推荐的一件事是使用编码。例如，对于 MP4，确保 MOOV Atom 位于文件的开头（关于如何使用 ffmpeg 执行此操作的 S/O 上有足够多的问题等）。例如，使用 MP3，您可以查看不同的编解码器或比特率。

例如，您可以尝试在网上找到的一些音频文件，如果您看到一个不需要很长时间缓冲的音频文件，请尝试以相同的方式对您的文件进行编码。

# mysql - MySQL 查询的最佳数据包（查询）大小是多少？

> ID：12821217
> 
> 赞同：1
> 
> 时间：2012-10-10T14:01:51.880
> 
> 标签：mysql

我从网络上的不同来源知道，我可以将 max_allowed_pa​​cket 设置为 1GB，但默认情况下通常为 16MB。

我的问题是数据包（查询）的最佳大小是多少？我经常将非常大的查询分成更小的块，比如 5 或 10 MB，但是是否有最佳大小，或者是越大越快的情况？

请注意，这是使用 mysql 命令行实用程序，而不是任何编程语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:03:28.417

我会更关心执行时间和对其他操作的影响，而不是查询大小本身。通常，您会执行较大的查询以从备份中恢复，而处理时间并不是什么大问题。

了解它在您的实例中的情况的唯一方法是对其进行基准测试。

# java - 如何用按钮停止循环？

> ID：12821220
> 
> 赞同：1
> 
> 时间：2012-10-10T14:01:55.297
> 
> 标签：java, loops, button

我正在编写一个程序，它在单击开始按钮时启动一个循环，我想用一个停止按钮停止它。问题是循环开始按钮在循环完成之前不起作用。我搜索了类似的问题并了解问题是循环在 actionPerformed 中，但我无法设法将循环置于 actionPerformed 之外。我已经尝试过创建一个新课程并要求它等，但发生了完全相同的事情。顺便说一句，我是 Java 的初学者，也是 stackoverflow，如果我做错了什么，我很抱歉。
简单的代码：

```
OtherClass obj;
public void actionPerformed(ActionEvent e) {
    if(e.getSource() == startButton) {
    while(true) {
        obj = new OtherClass();
        obj.doJob();
    }
    else if(e.getSource() == stopButton) {
    obj.stopLoop();
    }
}

public class OtherClass  {
    private boolean isStopped = false;
    public OtherClass() {
    }
    public void doJob(){
        while(true) {
            //loop...
            if(isStopped) {
                break;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T14:04:44.030

您需要在单独的线程（也称为“工作线程”）中运行 doJob()。按下按钮时启动线程，并在再次按下按钮时将 isStopped 标志设置为 true。注意不要在工作线程中执行 UI 操作（例如更新进度条） - 您需要调用特殊方法来从工作线程更新 UI。

由于这是一个非常笼统的问题（我的回答也非常笼统），我建议在 Google 上寻找“AWT ui thread”、“Worker thread”和“Java threading”。

一个好的起点可能是[课程：Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:06:01.427

您应该使用线程。如果您在主线程中运行循环，则 gui 将被冻结，直到循环结束。

开始了：

```
class yourClass{
...
private volatile boolean threadRunning = false;

public void startThread(){
  Thread t = new Thread(new Runnable(){
      @Override
      public void run(){
          threadRunning = true;
          while(threadRunning){
              //do some job
          }
      }
  });
  t.start();
} 
```

要停止循环，只需添加一个按钮并将 threadRunning 设置为 false！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:49:34.397

Perroloco 解决方案是可以的，但如果使用 AtomicBoolean 而不是使用普通的布尔值会更好。原因是，您将有两个线程修改/读取共享资源（工作线程和 UI 线程）

# c# - 在c#中完全关闭一个程序

> ID：12821222
> 
> 赞同：3
> 
> 时间：2012-10-10T14:01:57.893
> 
> 标签：c#

我在 C# 中制作了一个程序，它显示了 2 种类型的表单 1 是从用户那里获取值并将其保存在数据库中，第二个是在水晶报表模板中显示这些值。

我的问题是当我将第一种形式移动到第二种形式时，我使用 hide() 隐藏第一种形式；函数，在从数据库中获取第二个表单的值后，我回到第一个表单并隐藏第二个表单并显示第一个，但是当我关闭整个程序时，它继续运行，调试器显示它并运行，并且在任务管理器中有一个进程。

我想知道如何使用 form1 关闭该后台进程。对不起，我的英语不好。

```
 rollno = txtrollno.Text;
                    ReportCard objreport = new ReportCard();
                    objreport.Show();
                    this.Hide(); 
```

这是隐藏第一种形式的代码。

```
 Form1 objshow = new Form1();
        objshow.Show();
        this.Hide(); 
```

在此我隐藏第二并再次显示第一。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-10T14:02:44.803

尝试使用

```
Close(); 
```

当窗体关闭时，对象内创建的所有资源都将关闭并释放窗体。您可以通过处理 Closing 事件并设置作为参数传递给事件处理程序的 CancelEventArgs 的 Cancel 属性来防止在运行时关闭窗体。如果您要关闭的表单是应用程序的启动表单，则您的应用程序将结束。

或者

```
Application.Exit(); 
```

此方法停止所有线程上所有正在运行的消息循环并关闭应用程序的所有窗口。此方法不会强制应用程序退出。Exit 方法通常在消息循环中调用，并强制 Run 返回。要仅退出当前线程的消息循环，请调用 ExitThread 。

或者

```
Environment.Exit(exitCode) 
```

终止此进程并为底层操作系统提供指定的退出代码。此调用要求您具有 SecurityPermissionFlag.UnmanagedCode 权限。如果不这样做，则会发生 SecurityException 错误。如果您正在运行控制台应用程序，这是要使用的调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:13:31.870

因此，为了让您的程序（优雅地）结束，您需要关闭主窗体。由于您在希望整个程序结束之前已经“完成”了该表单，因此您目前只是隐藏它（这很好）而不是关闭它。您需要做的是确保在关闭第二个表单时关闭您的主表单。这很容易处理事件：

```
Form1 objshow = new Form1();
objshow.Show();
this.Hide();
//Add this next line when you show the second form.
objshow.FormClosed += (_, args) => this.Close(); 
```

# php - 如何在 PHP 中使用 mail()

> ID：12821227
> 
> 赞同：0
> 
> 时间：2012-10-10T14:02:22.840
> 
> 标签：php, forms, email

我究竟做错了什么？我只收到没有任何实际正文的“评论：”，还是放置代码？

第一部分是使用 mail() 的 PHP：

```
$MESSAGE_BODY .= "Comment: ".nl2br($_POST["comment"]).""; 
mail('a.nurk@gmail.com', 'kjjk', $MESSAGE_BODY, $mailheader) or die ("Failure"); 
```

第二部分是我的表格：

```
<form action="javascript:parseResponse();contact-us.php" method="post"      name="ajaxcontactform" id="ajaxcontactform">
    <div class="contacttextarea">
        <input name="contactformid" id="contactformid" type="hidden" value="1" />

        <fieldset>
            <textarea name="comment" id="comment" cols="5" rows="5" class="contacttextarea"onfocus="if (this.value == 'Пожалуйста, оставьте сообщение.') {this.value = '';}">Пожалуйста, оставьте сообщение.</textarea>
        </fieldset>
    </div>

    <div class="contacttextboxes">
        <fieldset>
            <input id="name" name="name" type="text" class="contacttextform" onfocus="if (this.value == 'Ваше имя') {this.value = '';}"value="Ваше имя">
        </fieldset>

        <fieldset>
            <input id="phone" name="phone" type="text" class="contacttextform" onfocus="if (this.value == 'Номер телефона') {this.value = '';}"value="Номер телефона">
        </fieldset>

        <fieldset>
            <input id="email" name="email" type="text" class="contacttextform" onfocus="if (this.value == 'e-mail') {this.value = '';}"value="e-mail">
        </fieldset>

        <fieldset>
            <input name="send" type="submit" class="contactformbutton" value="Send">
        </fieldset>
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:24:26.230

尝试取出 nl2br 功能，然后看看它是否有效。老实说，我看不出该脚本有什么问题，我只能假设您的 $_POST['Comment'] 变量始终为空/假。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:15:05.367

查看[http://www.freecontactform.com/email_form.php](http://www.freecontactform.com/email_form.php)以获得完整的邮件脚本。但是您的代码似乎很好。尝试`$_POST['comment']`改用？

# android - Android ListView Base Adapter 获取错误的位置

> ID：12821230
> 
> 赞同：0
> 
> 时间：2012-10-10T14:02:24.800
> 
> 标签：android, listview, adapter

我有一个包含自定义 ListView 项目的 ListView！

图片 --> [http://imageshack.us/photo/my-images/155/08pictureslistcopy.png/](http://imageshack.us/photo/my-images/155/08pictureslistcopy.png/)

为了在 Listview 中显示正确的图片，我有一个 ArrayList，其中 picture_ID 以正确的顺序用于列表视图。

我还创建了一个名为 AttachmentAdapter 的类，它扩展了 BaseAdapter。在 getView 方法中，我从 ArrayList 中获取正确的 picture_Id 并显示该项目。

我已经调试了从 ArrayList 获取图片 ID 的过程，这工作正常:-)

我的问题是在我的列表视图中有 6 个或更多条目后，getView 方法开始给我错误的项目位置。所以我在列表中的错误位置显示了错误的图片。

谁能告诉我为什么 BaseAdapters getView 方法会通过错误的位置？

这是我的 BaseAdapter 代码：

```
 private class AttachmentAdapter extends BaseAdapter {
        private LayoutInflater mInflater;

        private ArrayList<Data_Attachment> mData = new ArrayList<Data_Attachment>();

        public AttachmentAdapter(Context fragment) {
         //   super(fragment, textViewResourceId, items);
            mInflater = LayoutInflater.from(fragment);
        }

        public void setData(ArrayList<Data_Attachment> data)
        {
            mData = data;
        }

        private Data_Attachment getAttachmentfromPosition(int pos)
        {
            return DataResources.getAttachment(position_list.get(pos));
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) 
        {
            Data_Attachment data = getAttachmentfromPosition(position);      

            ViewHolder holder = null;

         Log.e("TEST","getView " + position + ", Attachment: #" + data.getID() + " --> " + data.getBriefDescr());

            if (convertView == null) {
                 convertView = mInflater.inflate(R.layout.listpictures_item, null);

                holder = new ViewHolder();
                holder.name= (TextView) convertView.findViewById(R.id.idPictureName);
                holder.date= (TextView) convertView.findViewById(R.id.idPictureDate);
                holder.uploader= (TextView) convertView.findViewById(R.id.idPictureUploader);

                holder.icon = (ImageView) convertView.findViewById(R.id.idListPicture_Preview);

                try{
                        Bitmap thumbnail = data.getThumbnail(getApplicationContext());

                        if(thumbnail != null)
                        {
                            holder.icon.setImageBitmap(thumbnail);
                        }
                        else
                        {
                              holder.icon.setImageDrawable(getApplicationContext().getResources().getDrawable(R.drawable.ic_notavailable));
                        }      
                }
                catch(Exception e)
                {
                    Log.e("TEST","PicturesIncident_Fragment.AttachmentData.getView, Error while showing picture: " + e.toString());
                      holder.icon.setImageDrawable(getApplicationContext().getResources().getDrawable(R.drawable.ic_notavailable));
                }

                String name = data.getBriefDescr();

                if(name.length() == 0)
                {
                    holder.name.setVisibility(View.GONE);
                    holder.uploader.setTextSize(14);
                    holder.uploader.setTypeface(Typeface.DEFAULT_BOLD);
                }
                else
                {
                    //Kürzen nach 40 Strings
                    if(name .length() >= _Settings.MAX_ATTACHMENT_NAME_SIZE)
                    {
                        char[] buf = new char[_Settings.MAX_ATTACHMENT_NAME_SIZE];
                        name.getChars(0, _Settings.MAX_ATTACHMENT_NAME_SIZE-1, buf, 0);
                        name = String.valueOf(buf) +"...";
                    }
                    holder.name.setText(name);
                }

                //Set uploader and Date
                Data_Worker data_worker = DataResources.getWorkerData_fromID(data.getuploaderID()); 
                String uploader = data_worker.getName();

                String date = data.getModified_str();

                holder.uploader.setText(uploader);

                //TODO change to view the date
                // holder.date.setText(date);
                holder.date.setText("pos: "+ position + " , #" + data.getID());

                convertView.setTag(holder);

            } else {
                holder = (ViewHolder)convertView.getTag();
            }               

            return convertView;
        }

        class ViewHolder {
            TextView name;
            TextView uploader;
            TextView date;

            ImageView icon;
        }

        @Override
        public int getCount() {
            return mData.size();
        }

        @Override
        public Data_Attachment getItem(int position) {
            return mData.get(position);
        }

        @Override
        public long getItemId(int position) {
            return position;
        }
    } 
```

出于测试目的，如您在代码和下面的屏幕截图中所见，我显示了此项目在列表视图中的当前位置。

图片 --> [http://imageshack.us/photo/my-images/805/device20121010155051.png/](http://imageshack.us/photo/my-images/805/device20121010155051.png/)

在这里你可以看到位置 0 不在列表的顶部。

此外，在我上下滚动一点后，位置会发生变化，我无法弄清楚位置变化背后的任何逻辑。

PS：仅在设备上测试过（Samsung Galaxy S2 - Android 4.0.4）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:09:45.730

如果 convertView 为空，您似乎只是在更新一行的内容。你把标签拉出来，但你从来没有用它做任何事情。如果传入的视图为空，则创建一个新视图，设置持有者，然后结束 if。您的所有内容分配都应该在 if-else 语句之后。

所以这样做：

```
ViewHolder holder = null;
if (convertView == null) {
    // create new view
    // setup holder
}
else {
    holder = (ViewHolder) convertView.getTag();
}
try {
    // set values on the holder
}
catch (Exception e) { }
return convertView; 
```

# objective-c - NSPredicate 正则表达式不起作用

> ID：12821237
> 
> 赞同：1
> 
> 时间：2012-10-10T14:02:59.367
> 
> 标签：objective-c, ios, regex, cocoa-touch, nspredicate

我正在使用：

```
+ (BOOL)isPassword:(NSString*)password {
    NSString* pattern = @"^(?=.{6,20}$).*$";
    NSPredicate* predicate = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", pattern];
    return [predicate evaluateWithObject:password];
} 
```

但它返回是的`""`。有小费吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:15:01.950

正如@Pfitz 指出的那样，您没有`SELF`. 例如，在过滤数组时使用它。

尝试[`NSRegularExpression`](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)改用。

```
NSError *error = nil;
NSRegularExpression *regex = [NSRegularExpression 
                              regularExpressionWithPattern:@"^(?=.{6,20}$).*$" 
                              options:NSRegularExpressionCaseInsensitive 
                                error:&error];
NSTextCheckingResult *match = [regex firstMatchInString:password 
                                                options:0
                                                  range:NSMakeRange(0, [password length])];
if (match) {
    NSRange range = [match range];
    if (range.location != NSNotFound) {
        // match
    }
} 
```

# python - python将输出命令发送到客户端套接字

> ID：12821238
> 
> 赞同：1
> 
> 时间：2012-10-10T14:03:00.453
> 
> 标签：python, sockets, command, client

我正在尝试学习 python，对于一门课程，我需要创建一个作业。该作业表明我需要创建一个带有自签名证书的服务器。我需要让该服务器在端口“int(sys.argv[1])”上侦听 abd 将 linux 命令“who”的结果发送回客户端。

我们可以像下面这样测试我们的脚本：

在 1 个终端中运行示例端口 1234 上的脚本

在另一个终端中运行以下命令：（测试：openssl s client -host localhost -port 1234）

目前，一旦我在第二个终端上执行第二个命令，我就会收到有关证书的所有信息，但不会收到发送回客户端的命令的输出。

到目前为止，这是我的代码：http: [//pastebin.com/yFKLtyMW](http://pastebin.com/yFKLtyMW)

请帮忙！

PS：我正在运行 python 2.6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:40:10.557

```
connstream = ssl.wrap_socket(newsocket, server_side=True, certfile="cert.pem", keyfile="test.key" ) 
```

将套接字包装为 a 后`SSLSocket`，您应该只使用 connstream 而不是 newsocket。所以你的代码应该是这样的：

```
 try:
    #data = connstream.read(1024)
    output = commands.getoutput("who")
    connstream.write(output) 
```

请注意，您不需要读取任何数据，因为另一端只等待命令的输出。因此，保留 read 语句将使您的 SSL 服务器在发送`who`命令输出之前等待来自另一端的数据

# python - Django-python 中的万事达卡/Visa 支付模型实现

> ID：12821243
> 
> 赞同：-4
> 
> 时间：2012-10-10T14:03:11.380
> 
> 标签：python, django

我正在 Django 中进行在线投标项目，并希望实施 MasterCard/Visa 支付网关。谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:16:08.823

有几个 Django 应用程序可以用于此目的：

*   [Django-Bursur](https://bitbucket.org/bkroeze/django-bursar) - 它被列为“接近”测试版
*   [Quix.pay](http://www.micahcarrick.com/django-authorize-net-payments.html) - [PyPi 页面](http://pypi.python.org/pypi/quix.pay/)- 这使用 authorize.net 网关
*   [Satchmo](https://bitbucket.org/chris1610/satchmo/wiki/Home) - 这就是 Django-Bursur 的分支
*   [Django-Paypal](https://github.com/johnboxall/django-paypal) - 它不是 Visa/Mastercard，但 Paypal 确实接受信用卡作为付款方式。
*   [Django-getpaid](https://github.com/cypreess/django-getpaid) - 这只有 2 个月大。我不知道效果如何
*   [Paython](https://github.com/abunsen/Paython) - 独立库集成了 stripe、authorize.net、samurai 和更多

# jquery - 使用 jquery 或 JS 如何将字符串转换为链接？

> ID：12821244
> 
> 赞同：7
> 
> 时间：2012-10-10T14:03:21.660
> 
> 标签：jquery, dynamic-links

所以我有一段看起来像这样的HTML......

```
<p>This is some copy. In this copy is the word hello</p> 
```

我想将单词 hello 变成使用 jquery 的链接。

```
<p>This is some copy. In this copy is the word <a href="">hello</a></p> 
```

这本身并不太难。我的问题是，如果这个词已经是一个链接的一部分，比如下面的例子......

```
<p>In this copy is the <a href="">word hello</a></p> 
```

我不希望以链接中的链接结束...

```
<p>In this copy is the <a href="">word <a href="">hello</a></a></p> 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T16:47:30.543

一点正则表达式应该可以解决问题（更新，见下文）：

```
$(document).ready(function(){
    var needle = 'hello';
    $('p').each(function(){
        var me = $(this),
            txt = me.html(),
            found = me.find(needle).length;
        if (found != -1) {
            txt = txt.replace(/(hello)(?!.*?<\/a>)/gi, '<a href="">$1</a>');
            me.html(txt);
        }
    });
}); 
```

小提琴：http: [//jsfiddle.net/G8rKw/](http://jsfiddle.net/G8rKw/)

**编辑：这个版本效果更好：**

```
$(document).ready(function() {
    var needle = 'hello';
    $('p').each(function() {
        var me = $(this),
            txt = me.html(),
            found = me.find(needle).length;
        if (found != -1) {
            txt = txt.replace(/(hello)(?![^(<a.*?>).]*?<\/a>)/gi, '<a href="">$1</a>');
            me.html(txt);
        }
    });
}); 
```

小提琴：http: [//jsfiddle.net/G8rKw/3/](http://jsfiddle.net/G8rKw/3/)

**再次编辑：这一次，“hello”作为变量传递给正则表达式**

```
$(document).ready(function() {
    var needle = 'hello';
    $('p').each(function() {
        var me = $(this),
        txt = me.html(),
        found = me.find(needle).length,
        regex = new RegExp('(' + needle + ')(?![^(<a.*?>).]*?<\/a>)','gi');
        if (found != -1) {
            txt = txt.replace(regex, '<a href="">$1</a>');
            me.html(txt);
        }
    });
}); 
```

小提琴：http: [//jsfiddle.net/webrocker/MtM3s/](http://jsfiddle.net/webrocker/MtM3s/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:23:19.397

你可以这样做，

**[现场演示](http://jsfiddle.net/HfZLk/3/)**

```
$('p').each(function(){    
    if($(this).find('a').length > 0) return;  
    lastSpaceIndex = $(this).text().lastIndexOf(' ');
    if(lastSpaceIndex  == -1)
        lastSpaceIndex = 0;    
    WordToReplace = $(this).text().substring(lastSpaceIndex);
    idx = $(this).text().lastIndexOf(WordToReplace);
    resultstring = $(this).text().substring(0, idx); 
    $(this).html(resultstring);
    $(this).append($( "<a href='#'>" + WordToReplace  + "</a>"));
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T15:32:46.910

此 jQuery 解决方案搜索特定术语，如果发现它后面跟着一个结束链接标记，则不会创建链接。

```
var searchTerm = "hello";

$('p:contains("' + searchTerm + '")').each(function(){
    var searchString = $(this).html();
    var searchIndex = searchString.indexOf(searchTerm);
    var startString = searchString.substr(0 , searchIndex);
    var endString = searchString.substr(searchIndex + searchTerm.length);
    if(endString.match(/<\/a>/g)) return;
    $(this).html(startString + "<a href=''>" + searchTerm + "</a>" + endString);
});​ 
```

这是一个 jsfiddle[的链接。](http://jsfiddle.net/YV6ZD/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T15:32:48.753

编写了一个简单的函数来检查替换文本是否包含在链接标记中。见下文，

**演示：http:** [//jsfiddle.net/wyUYb/4/](http://jsfiddle.net/wyUYb/4/)

```
function changeToLink (sel, txt) {
   var regEx = new RegExp(txt, 'g');
   $.each($(sel), function (i, el) {
       var linkHTML = $(el).html();
       var idx = linkHTML.indexOf(txt);

       if (idx >= 0) {
           var t = linkHTML.substring(idx);
           //Fix for IE returning tag names in upper case http://stackoverflow.com/questions/2873326/convert-html-tag-to-lowercase
           t = t.replace(/<\/?[A-Z]+.*?>/g, function (m) { return m.toLowerCase(); })
           var closingA = t.indexOf('</a>');

           t = t.substring(0, closingA);
           if (closingA != -1) {
               t = t.substring(0, closingA); 
               if (t.indexOf('<a') < txt.length) {
                   return;
               }
           }               

           linkHTML = linkHTML.replace(regEx, '<a href="">' + txt + '</a>');
           $(el).html(linkHTML);
       }           
   });
} 
```

此外，即使您添加一个嵌套链接，您的浏览器也会简单地将其更改为两个链接。可能是因为使用嵌套链接是不合法的。见下文，

在 W3C 中也记录了[嵌套链接](http://www.w3.org/TR/html401/struct/links.html#h-12.2.2)

> **12.2.2 嵌套链接是非法的**
> 
> A 元素定义的链接和锚点不得嵌套；A 元素不得包含任何其他 A 元素。
> 
> 由于 DTD 将 LINK 元素定义为空，因此 LINK 元素也不能嵌套。

这就是浏览器将嵌套链接作为单独链接处理的原因。

[http://jsfiddle.net/H44jE/](http://jsfiddle.net/H44jE/)

请参阅图像右下角的萤火虫检查。

![在此处输入图像描述](../Images/bb444123f2bb07e37f8160592d891202.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T14:24:44.533

不要搜索单词并尝试查找其父项，而是搜索链接并检查其中包含的单词：

```
if($('a').text() === "hello"){
  //already linked
}else{
  //not linked
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T15:12:13.323

先保留单词，同时去掉当前的锚标签，如果有的话：

```
$('a').each(function() {
    $(this).replaceWith(this.childNodes);
 }); 
```

然后对您需要使用的字符串进行替换

```
$('p').html($('p').text().replace('hello', '<a href="">hello</a>')); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-10T14:21:05.210

您需要 jquery :not 选择器或 .not()。

API 文档很好地涵盖了这一点，您应该能够选择您的内容，然后取消选择其中的链接。

[http://api.jquery.com/not-selector/](http://api.jquery.com/not-selector/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-10T14:08:35.727

尝试用户 .replace jquery 函数是这样的：

```
var str = $('p').html().replace('(some)','(to some)'); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-10T14:07:56.163

在将单词转换为链接之前，您不能测试单词的父元素吗？

```
if (parent != 'a') {
   // do your thing
} 
```

（我不知道实际的 jQuery 会测试这个）

**编辑**

以下将替换所有`<p>`不包含链接的元素中的单词。

可能无法完全按照要求工作，但希望为您指明方向

```
// get all p elements that contain the word hello but DO NOT have link in them
var elems = $('p:contains("hello")').not(':has(a)');

// replace instances of hello in the selected p elements
$(elems).html($(elems).html().replace(/(hello)/g,'<a href="new">$1</a>')); 
```

[JSBin 上的现场演示](http://jsbin.com/welcome/32609/)

# java - 停止 log4J AsyncAppender 的线程

> ID：12821247
> 
> 赞同：5
> 
> 时间：2012-10-10T14:03:28.050
> 
> 标签：java, thread-safety, log4j

我在我的应用程序中使用 Log4J AsyncAppender，我想知道，当我的应用程序完成时，AsyncAppender 的线程会发生什么？我应该手动终止线程还是可以忘记它并退出我的应用程序而不必担心某些日志消息会丢失？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-07T21:38:09.220

如果您`LogManager.shutdown()`在 JVM 关闭之前调用，它将继续运行，直到刷新附加程序。请注意，这仅对 log4j 1.x 是必需的。我从文档中了解到 Log4j 2 会自动注册一个关闭挂钩来处理这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:41:12.400

查看 AsyncAppender 的源代码，[它创建了一个守护线程](http://svn.apache.org/viewvc/logging/log4j/trunk/src/main/java/org/apache/log4j/AsyncAppender.java?view=markup)（第 112-117 行）来处理写入事件，作者希望您显式调用`close()`appender 以确保在 JVM 关闭之前写出所有排队的消息：

```
dispatcher = new Thread(new Dispatcher(this, buffer, discardMap, appenders));

// It is the user's responsibility to close appenders before
// exiting.
dispatcher.setDaemon(true); 
```

通过将线程设置为守护进程，这意味着一旦您的应用程序的核心退出，JVM 将不会继续运行。但是，这也意味着如果您的应用程序在没有通知 appender 的情况下关闭，队列中的任何消息都会丢失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:14:16.333

如果 AsyncAppender 是在您的应用程序中运行的线程，那么它将在您关闭应用程序时关闭（我所说的应用程序是指 jvm 的当前实例）。我不知道这是否是你的问题

# iphone - 用图像填充自定义 tableviewCell

> ID：12821250
> 
> 赞同：0
> 
> 时间：2012-10-10T14:03:34.067
> 
> 标签：iphone, objective-c, ios, uitableview

我正在努力实现[这一](http://www.flickr.com/photos/74322780@N08/8050170687/)目标。目前我有[这个](http://www.flickr.com/photos/74322780@N08/8073957169/in/photostream)。

所以到目前为止，我已经将图像放置在我的 customTableViewCell 中。但它总是在每一行放置相同的图像。我想要的是在下一行拍摄下一张图片。

我有一个计数器，即“indexOfIndexPath”。这就是我在 CellForRowAtIndexPath 中所做的。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"PlayerCustomCell";

    PlayerCustomCell *cell = (PlayerCustomCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
    if (cell == nil)
    {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"PlayerCustomCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];
    }
 if(indexPath.row == 0){
     NSIndexPath *path = [NSIndexPath indexPathForRow:indexPath.row+_indexOfIndexPath inSection:0];
     NSLog(@"%@",path);
     Team *team = [self.fetchedResultsController objectAtIndexPath:path];
    if(!img1){
        img1 = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:team.image]];
        UIImage* image = [[UIImage alloc] initWithData:img1];
        [cell setImage:image forPosition:1];
        _indexOfIndexPath++;
    }

    NSIndexPath *path1 = [NSIndexPath indexPathForRow:indexPath.row+_indexOfIndexPath inSection:0];
     NSLog(@"%@",path1);
    Team *team1 = [self.fetchedResultsController objectAtIndexPath:path1];
    if(!img2){
        img2 = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:team1.image]];
        UIImage* image = [[UIImage alloc] initWithData:img2];
        [cell setImage:image forPosition:2];
        _indexOfIndexPath++;
    }

    NSIndexPath *path2 = [NSIndexPath indexPathForRow:indexPath.row+_indexOfIndexPath inSection:0];
     NSLog(@"%@",path2);
    Team *team2 = [self.fetchedResultsController objectAtIndexPath:path2];
    if(!img3){
        img3 = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:team2.image]];
        UIImage* image = [[UIImage alloc] initWithData:img3];
        [cell setImage:image forPosition:3];
        _indexOfIndexPath++;
    }

    NSIndexPath *path3 = [NSIndexPath indexPathForRow:indexPath.row+_indexOfIndexPath inSection:0];
    Team *team3 = [self.fetchedResultsController objectAtIndexPath:path3];
    if(!img4){
        img4 = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:team3.image]];
        UIImage* image = [[UIImage alloc] initWithData:img4];
        [cell setImage:image forPosition:4];
        _indexOfIndexPath++;
    }else{
        img4 = [[NSData alloc] initWithContentsOfFile:@"keeperNil.jpg"];
        UIImage* image = [[UIImage alloc] initWithData:img4];
        [cell setImage:image forPosition:4];

    }

    NSIndexPath *path4 = [NSIndexPath indexPathForRow:indexPath.row+_indexOfIndexPath inSection:0];
    Team *team4 = [self.fetchedResultsController objectAtIndexPath:path4];
    if(!img5){
        img5 = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:team4.image]];
        UIImage* image = [[UIImage alloc] initWithData:img5];
        [cell setImage:image forPosition:5];
        _indexOfIndexPath++;
    }
    NSIndexPath *path5 = [NSIndexPath indexPathForRow:indexPath.row+_indexOfIndexPath inSection:0];
    Team *team5 = [self.fetchedResultsController objectAtIndexPath:path5];
    if(!img6){
        img6 = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:team5.image]];
        UIImage* image = [[UIImage alloc] initWithData:img6];
        [cell setImage:image forPosition:6];
        _indexOfIndexPath++;
    }
}else{
    if(img1){
        UIImage* image = [[UIImage alloc] initWithData:img1];
        if(image == nil){
            image = [image initWithContentsOfFile:@"keeperNil.jpg"];
        }else{
        [cell setImage:image forPosition:1];
        }
    }
    if(img2){
        UIImage* image = [[UIImage alloc] initWithData:img2];
        if(image == nil){
            image = [image initWithContentsOfFile:@"keeperNil.jpg"];
        }else{
            [cell setImage:image forPosition:2];
        }
    }
    if(img3){
        UIImage* image = [[UIImage alloc] initWithData:img3];
        if(image == nil){
            image = [image initWithContentsOfFile:@"keeperNil.jpg"];
        }else{
            [cell setImage:image forPosition:3];
        }
    }
    if(img4){
        UIImage* image = [[UIImage alloc] initWithData:img4];
        if(image == nil){
            image = [image initWithContentsOfFile:@"keeperNil.jpg"];
        }else{
            [cell setImage:image forPosition:4];
        }
    }
    if(img5){
        UIImage* image = [[UIImage alloc] initWithData:img5];
        if(image == nil){
            image = [image initWithContentsOfFile:@"keeperNil.jpg"];
        }else{
            [cell setImage:image forPosition:5];
        }
    }
    if(img6){
        UIImage* image = [[UIImage alloc] initWithData:img6];
        if(image == nil){
            image = [image initWithContentsOfFile:@"keeperNil.jpg"];
        }else{
            [cell setImage:image forPosition:6];
        }
    }
} 

    return cell; 
```

有人知道如何解决这个问题吗？

提前致谢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:55:57.443

如果我理解正确，你想要

*   表格第 0 行中的图像 0、1、2、3、4、5，
*   表格第 1 行中的图像 6、7、8、9、10、11，
*   ... 等等。

这应该适用于以下代码：

```
#define IMAGES_PER_ROW  6

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"PlayerCustomCell";

    PlayerCustomCell *cell = (PlayerCustomCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
    if (cell == nil)
    {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"PlayerCustomCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];
    }

    NSInteger frcRow = indexPath.row * IMAGES_PER_ROW; // row in fetched results controller

    for (int col = 1; col <= IMAGES_PER_ROW; col++) {
        NSIndexPath *path = [NSIndexPath indexPathForRow:frcRow inSection:0];
        Team *team = [self.fetchedResultsController objectAtIndexPath:path];
        NSData *imgData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:team.image]];
        UIImage *image;
        if (imgData == nil) {
            // default image
            image = [UIImage imageWithContentsOfFile:@"keeperNil.jpg"];
        } else {
            image = [UIImage imageWithData:imgData];
        }
        [cell setImage:image forPosition:col];
        frcRow ++;
    }

    return cell;
} 
```

请注意，表视图的行数与获取结果控制器中的行数不同，必须在以下方面考虑`numberOfRowsInSection`：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    id <NSFetchedResultsSectionInfo> sectionInfo = [[fetchedResultsController sections] objectAtIndex:section];

    NSInteger count = [sectionInfo numberOfObjects];
    return (count + IMAGES_PER_ROW - 1)/IMAGES_PER_ROW;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:07:08.660

你为什么不把你的图像放在这样的条件下，

```
if(indexPath.row == 0)
{
 Your first image....
}
if(indexPath.row == 1)
{
 Your second image....
} 
```

# java - Weblogic 自定义部署器（如果真的需要）

> ID：12821251
> 
> 赞同：6
> 
> 时间：2012-10-10T14:03:34.250
> 
> 标签：java, weblogic11g

我们需要实现在不重新部署应用程序的情况下更新/重新读取文件（存储在磁盘上）的可能性。重要的一点是，我们有多个应用程序实例在**Weblogic 的**集群中工作。所以我的问题是：如何**通知**集群中工作的**应用程序**文件已**更改**- Weblogic 是否具有开箱即用的此类功能，或者我们是否需要为此实现自定义部署程序？

 ***** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:48:04.053

如果您正在寻找一种热部署类型的流程（使用修改后的文件更新应用程序），请检查我的这篇博客[**Weblogic 中的热部署**](http://yogendrakrsingh.blogspot.ca/2010/03/steps-to-configure-hot-deployment-from.html)是否对您有帮助。

总之：

1.  `REDEPLOY`在文件夹中添加空白文件`MyApplicationEar/APP-INF/META-INF`并以分解的形式部署您的应用程序。

2.  更新任何文件后，更新`REDEPLOY`文件的时间戳。这可以通过重新创建文件来实现。

3.  Weblogic 将扫描已部署应用程序的文件系统并重新部署更新的文件。****

# jquery - arduino中的实时条形图

> ID：12821254
> 
> 赞同：2
> 
> 时间：2012-10-10T14:03:38.930
> 
> 标签：jquery, c, json, arduino

我已经编写了一个测试程序来查看我的压力传感器是否正常工作并且确实如此。

```
int redpin = 10;
int greenpin = 9;
int bluepin = 8;
int presurepin = 0;

//Program variables
int time = 100;
int presure = 0;
int thresholddown = 19;
int thresholdup = 52;
int color = 0;
int red   = 0;
int green = 0;
int blue  = 0;
int relesepresure = 1;

void setup() {
  pinMode(redpin, OUTPUT);
  pinMode(greenpin, OUTPUT);
  pinMode(bluepin, OUTPUT);
  Serial.begin(9600);
}

void loop() {
  // Read presure
  presure = analogRead(presurepin);

  // For bug finding purpose
  delay(time);
  Serial.print(presure);
  Serial.print("   ");
  Serial.println(color);

  // High presure = 0 low = 300-500
  // If high presure change color and wait until presure is low to send out the color
  if (presure < thresholddown && relesepresure == 1){
    if (color == 0){
          red   = 0;
          green = 0;
          blue  = 0;
          color = color + 1;
    }
    else if (color == 1) {
          red   = 1;
          green = 0;
          blue  = 0;
          color = color + 1;
    }
    else if (color == 2) {
          red   = 0;
          green = 1;
          blue  = 0;
          color = color + 1;
    }
    else if (color == 3) {
          red   = 0;
          green = 0;
          blue  = 1;
          color = color + 1;
    }
    else if (color == 4) {
          // Yellow
          red   = 1;
          green = 1;
          blue  = 0;
          color = 1;

    }
    // Turn of light while tile is presured
    digitalWrite(redpin,   0);   // Write current values to LED pins
    digitalWrite(greenpin, 0);
    digitalWrite(bluepin,  0);
    relesepresure = 0;
  }
  else if (presure > thresholdup && relesepresure == 0){
      //Send color to tile
      digitalWrite(redpin,   red);
      digitalWrite(greenpin, green);
      digitalWrite(bluepin,  blue);
      relesepresure = 1;
  }
} 
```

所以在上面的这段代码中，我想做的是存储函数写入红色、绿色、蓝色、黄色等的所有时间，并将其以实时条形图的形式显示在计算机屏幕上。类似于*[Flot Examples](http://people.iola.dk/olau/flot/examples/realtime.html)*但带有条形图的东西。

所以很自然我需要做这样的事情：

```
else if (color == 3) {

      //Color3++;
      //Update the bar graph with the new values (Color1,0),(Color2,1), (Color3,2), (Color4,3) where the numbers inside the paragraph are the x,y values of the graph.

      red   = 0;
      green = 0;
      blue  = 1;
      color = color + 1;
} 
```

由于 Arduino 是一种非常有限的语言，如何实现这一点？我正在考虑将这些变量值写入一个简单的 .json 文件并使用 jQuery 从那里读取它们，但我也不知道该怎么做。有更聪明的解决方案吗？

我正在使用[Arduino Mega](http://arduino.cc/en/Main/ArduinoBoardMega)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T23:34:58.597

首先，您将在 JQuery 和 Arduino Mega 之间进行一些操作。您的一些选择是：

*   通过 USB 电缆访问 arudino，并使用某种基于服务器的技术来访问它，例如 php。这里有一个如何做到这一点的例子：

[http://wanderr.com/jay/controlling-arduino-via-serial-usb-php/2010/12/28/](http://wanderr.com/jay/controlling-arduino-via-serial-usb-php/2010/12/28/)

*   使用以太网或 wifi 屏蔽并以您选择的格式提供数据。这将使您的成本增加约 30-60 美元，但使该项目的 arduino 部分自成一体，并且不需要计算机即可运行。

*   如果你想要它是无线的，你可以看看蓝牙和 zigbee 接收器。你仍然需要一个服务器和像 php 这样的选项。

*   对于闪存，您通常使用称为串行套接字服务器的东西。[在Aruduino Playground](http://www.arduino.cc/playground/interfacing/flash)上有更多关于此的信息。您也可以直接通过 jquery 访问相同类型的服务器。这将类似于第一个选项，并且需要直接 USB 连接到计算机。

如果您想尝试不同的东西，我建议您查看[处理](http://www.processing.org)和[固件](http://www.arduino.cc/playground/interfacing/processing)，因为有很多示例说明如何从 arduino 获取数据并基于该数据创建某种视觉效果。

# java - 多个 JPanel GridBagConstraints 对齐

> ID：12821257
> 
> 赞同：4
> 
> 时间：2012-10-10T14:03:46.433
> 
> 标签：java, swing, gridbaglayout

![在此处输入图像描述](../Images/90eb287c398d88564949ef86a9be50be.png)

如图所示，首先有两个面板：topPanel 和 btmPanel。topPanel 由另外两个面板组成，一个填充黑色，一个填充灰色，这不是问题。

在 btmPanel 中有三个面板都在 GridbagLayouts 中，每个面板都有不同数量的 JButtons 问题是第三个面板有更多的 JButtons 所以我想要的是从顶部开始对齐它们。那可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:31:35.913

在设置这 3 个面板的约束时，请确保

1.  将 GridBagConstraint 属性设置为`weighty`大于 0 的值，例如 1.0，
2.  并将属性设置`anchor`为`NORTH`or`NORTHEAST`或`NORTHWEST`。

当然，该`fill`属性只能设置为`NONE`or `HORIZONTAL`，否则所有面板都会垂直拉伸，我猜你不希望这样。

这是我描述的一个例子。我通过用 3 个按钮（其中一个比另一个高）替换 3 个大面板来简化您的案例：

结果（查看 3 个按钮如何在顶部对齐）：

![在此处输入图像描述](../Images/71e299d5c69f8eb86de39b0778a66d6c.png)

```
import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class TestLayout {

    protected void initUI() {
        final JFrame frame = new JFrame(TestLayout.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel btmPanel = new JPanel(new GridBagLayout());
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.weighty = 1.0;
        gbc.weightx = 1.0;
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.insets = new Insets(5, 5, 5, 5);
        gbc.anchor = GridBagConstraints.NORTH;
        JButton comp = new JButton("Panel-1");
        btmPanel.add(comp, gbc);
        JButton comp2 = new JButton("Panel-2");
        btmPanel.add(comp2, gbc);
        JButton comp3 = new JButton("Panel-3");
        comp3.setPreferredSize(new Dimension(comp.getPreferredSize().width, comp.getPreferredSize().height + 10));
        btmPanel.add(comp3, gbc);
        frame.add(btmPanel);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestLayout().initUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T16:15:52.257

只需将 Layout 设置为`btmPanel`GridLayout **(1, 3, 5, 5);** ，这将使它们与顶部对齐。由于目前的默认布局`btmPanel`是 FlowLayout，因此您遇到了这个问题。最重要的是，`btmPanel`你有这三个`JPanel`s `GridBagLayout`。

# javascript-events - 事件顺序不符合预期

> ID：12821258
> 
> 赞同：0
> 
> 时间：2012-10-10T14:03:49.490
> 
> 标签：javascript-events, jquery

我有一个图像动画代码集，因此它发生在某些页面更新事件中。它按预期工作。由于更新可能会失败并且我不希望动画永远播放，我希望它在用户单击任意位置或按下某个键时停止。对于按键事件，它正在工作，是这样的：

```
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        function RefreshImg() {
            var src = $('#ocupado').attr('src');
            $('#ocupado').attr('src', src);
        }

        function processando() {
            $processando = $('#processando');
            $processando.css('z-index', '100').fadeTo('fast', 0.5);
            var left = Math.floor(($processando.outerWidth() - 32) / 2);
            var top = Math.floor(($processando.outerHeight() - 32) / 2);
            $('#ocupado').css('left', left).css('top', top);
            setTimeout(RefreshImg, 50);
            $(document).on('keypress', (function () {
                $processando.fadeOut('fast').css('z-index', '-100');
                $(this).off('keypress');
            }));
        }
    </script>
</head>
<body>
    <div id="processando" style="border:0;position:fixed;display:none;z-index:-100;width:100%;height:100%;background:black;top:0px;left:0px;">
    <img id="ocupado" src="http://upload.wikimedia.org/wikipedia/commons/d/de/Ajax-loader.gif" width="32" height="32" style="position:relative;" border="0" alt="imagem de espera" />
    </div>
    <select id="mySelect"><option>1</option><option>2</option></select>
    <script type="text/javascript">
        $('#mySelect').change(processando);
    </script>
</body>
</html> 
```

问题是当我更改代码以包含点击事件时：

```
 $(document).on('keypress click', (function () {
                $processando.fadeOut('fast').css('z-index', '-100');
                $(this).off('keypress click');
            })); 
```

现在，只要用户更改选择选项，动画就会开始和停止。就好像 click 事件发生**在**change 事件之后。如何使动画在选择更改后仅在第一次单击时停止？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:02:37.997

我认为 jQuery blur() 函数可以做你想做的事。在此处查看更新的代码：

[http://jsfiddle.net/j8fJZ/1/](http://jsfiddle.net/j8fJZ/1/)

如您所见，您还可以在 keydown 上触发模糊。

# javascript - 选择元素客户端修改？

> ID：12821259
> 
> 赞同：-1
> 
> 时间：2012-10-10T14:03:50.707
> 
> 标签：javascript

我经常使用像 Firebug 这样的工具，并且经常构建 SPA 风格的动态表单，其中使用用户输入进行 DOM 操作是例行公事。是否有任何保护措施可以防止用户使用 Firebug 之类的工具或任何类型的 javascript CLI 将选项插入选择框中？

举个简单的例子，考虑这个选择框供您选择您是已婚还是未婚（我的实际选择框有很多选项，并且通过 AJAX 从 XML 文件填充。这在以后很重要。）：

```
<select name="mstatus" id="mstatus">
    <option value="" selected>Specify marital status</option>
    <option value="Married">Married</option>
    <option value="Single">Single</option>
</select> 
```

目前，我可以轻松地插入另一个选项（我在页面上有 Mootools）：

```
$('mstatus').innerHTML+="<option value='Rebel'>I won't play by the rules</option>" 
```

现在当然对于这个例子，我可以检查服务器端选择的选项是否有效而没有太多的悲伤。但通常我必须将用户提交与每个选择的原始 XML 源进行比较，以确认其有效性。

是否有另一种方法来确保返回值的完整性？这足以让我从表面上接受用户选择吗？这里的最佳实践真的只是将所有选择输入视为文本输入，直到您确认它们是从其有效值范围内选择的？

注意：没有代码注入的危险，因为输入的所有值都经过彻底审查，并且在它们被弹出到数据库时非常惰性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:05:47.027

您无法保护客户端免受此影响。您必须确保这些值是有效的服务器端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:06:12.947

不，用户可以完全控制页面，因此你永远不应该相信来自那里的东西。始终在您的服务器上执行完整的彻底验证，并拒绝任何没有加起来的内容。

就验证而言，您可以只获取 XML 一次并重复引用它以检查其有效性，但除此之外，并没有太多东西可以使它更容易。

# ruby-on-rails - distance_of_time_in_words_to_now 助手有问题吗？

> ID：12821260
> 
> 赞同：0
> 
> 时间：2012-10-10T14:03:52.987
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

似乎不适合我。我会在 Github 上打开一个问题，但我想仔细检查一下我没有先做一些愚蠢的事情。使用 Rails 3.2.8 和 Ruby 1.9.3。[这是API参考](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-distance_of_time_in_words_to_now)

```
» bundle exec rails c
Loading development environment (Rails 3.2.8)
1.9.3-p194 :001 > helper.distance_of_time_in_words_to_now("2012-10-18")
ArgumentError: wrong number of arguments (2 for 1)
    from /Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/letters-0.2.6/lib/letters/core_ext.rb:155:in `t'
    from /Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_view/helpers/date_helper.rb:93:in `block in distance_of_time_in_words'
    from /Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/core_ext/object/with_options.rb:41:in `with_options'
    from /Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_view/helpers/date_helper.rb:73:in `distance_of_time_in_words'
    from /Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_view/helpers/date_helper.rb:133:in `time_ago_in_words'
    from (irb):1
    from /Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands/console.rb:47:in `start'
    from /Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands/console.rb:8:in `start'
    from /Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:23:19.630

[`letters`gem](https://github.com/davejacobs/letters)与帮助程序中使用的Rails`t`方法冲突`distance_of_time_in_words`。

有关详细信息，请参阅Letters 网站上的[说明。](http://lettersrb.com/api)

# java - 执行双击的java jar文件时的输出流

> ID：12821263
> 
> 赞同：2
> 
> 时间：2012-10-10T14:03:59.000
> 
> 标签：java, windows, jar

您好，在遵循[Running JAR file on Windows](https://stackoverflow.com/questions/394616/running-jar-file-in-windows)`.jar`此处的建议后，每当我在 Windows 中双击它时，我都设法执行了我的应用程序（它是一个 JFrame 应用程序）。

但是，当发生某些异常时，我会`e.printstackTrace();`向 UI 生成自定义错误消息。当我从命令提示符启动“.jar”文件时，标准错误流是控制台。我的问题是，当我通过双击运行 .jar 时，异常跟踪在哪里？

这是一个“玩具”应用程序，所以我想避免使用日志记录机制——我只需要一个地方来转储所有异常跟踪以供以后调试。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:06:12.683

> 我的问题是，当我通过双击运行 .jar 时，异常跟踪在哪里？

无处。基本上它无处可*去*- 没有连接控制台。您可能希望找到用户的主目录并将日志文件放在那里，或类似的东西。

（而不是使用`e.printStackTrace()`，我建议使用适当的日志框架，无论是 log4j、java.util.logging 还是其他。你说你不想要一个日志机制，而是“一个转储所有异常跟踪以供以后调试的地方“听起来像是在记录我……）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:25:36.493

您的异常 stackTrace 无处可去。如果你直接双击jar，它没有任何附加内容。

在一处转储所有异常跟踪的最佳方法是使用**Logging API。** **前任。日志4j，slf4j。** 它们提供了正确的框架，使用它您可以设置正确的文件名、它们的目的地、放置的内容，即 degug、错误、警告；此外，您可以限制文件大小并决定其存在期限。

# android - 如何在 Android 应用程序中使用任何互联网连接（wifi、3g、4g 等）？

> ID：12821264
> 
> 赞同：0
> 
> 时间：2012-10-10T14:03:58.673
> 
> 标签：android, network-programming, wifi, 3g

我正在编写一个需要使用 Internet 的应用程序。我拥有的一些相关代码是：

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

和

```
private boolean isConnected() {
    ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();

    if (netInfo != null && netInfo.isConnected()) {
        // do stuff
        return true;
    }
    else{
        // don't do stuff and display dialog instead
        return false;
    }
} 
```

但是，我的应用似乎只能在 WiFi 连接上运行。无论它如何连接到 Internet，我如何使它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:39:46.503

尝试这个

```
public class NetWorkCheck{
    ConnectivityManager connectivityManager;
    NetworkInfo wifiInfo, mobileInfo, lanInfo;

    public Boolean checkNow(Context con){

        try{
            connectivityManager = (ConnectivityManager) con.getSystemService(Context.CONNECTIVITY_SERVICE);
            wifiInfo = connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
            mobileInfo = connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);

            if(wifiInfo.isConnected() || mobileInfo.isConnected())
            {
                return true;
            }
        }
        catch(Exception e){
            System.out.println("CheckConnectivity Exception: " + e.getMessage());
        }

        return false;
    }
} 
```

并在您要测试连接的活动中编写此代码

```
 NetWorkCheck networkCheck = new NetWorkCheck();
 boolean connection;

connection = networkCheck.checkNow(UpdateVehicleDetails.this);
                if (connection) { 
```

# entity-framework - 实体框架代码生成未在保存时运行

> ID：12821265
> 
> 赞同：0
> 
> 时间：2012-10-10T14:04:00.630
> 
> 标签：entity-framework

我有一个 EF5 Database First 数据上下文。在某些时候，当进行更改并保存设计器时，设计器会停止生成数据上下文和实体类。

我正在使用 dbcontext T4 模板并且没有更改任何其他内容（尽管我确信某些内容一定是偶然更改的）。

关于如何获得自动代码生成的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:38:00.470

这是 VS2012 中发布的 EF 设计器的一个已知问题，在此处进行跟踪：http: [//entityframework.codeplex.com/workitem/453](http://entityframework.codeplex.com/workitem/453)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:30:08.587

虽然 Pawel 认为这是一个已知问题是正确的，但现在 Visual Studio 2012 Update 1 中提供了一个修复程序：

[http://www.microsoft.com/visualstudio/eng/downloads#d-visual-studio-2012-update](http://www.microsoft.com/visualstudio/eng/downloads#d-visual-studio-2012-update)

# ruby-on-rails-3 - ActiveRecord 检测属性的设置

> ID：12821266
> 
> 赞同：1
> 
> 时间：2012-10-10T14:04:04.157
> 
> 标签：ruby-on-rails-3, activerecord

说，我有一个`A`带有属性的模型`name`。

如果我这样做`A.new(name: nil).name_changed?`，它将返回`false`。

我如何检测到该属性已设置，即使它没有任何改变？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:12:43.987

尝试类似：

```
class A < ActiveRecord::Base
  attr_accessor :name_set

  def name=(v)
    @name_set = true
    super(v)
  end
end 
```

现在您可以使用该`name_set`方法查询对象。

# spring - 将 JSF ManagedBeans 更改为 Spring 组件

> ID：12821271
> 
> 赞同：0
> 
> 时间：2012-10-10T14:04:22.643
> 
> 标签：spring, jsf, aop

一段时间后，我正在使用 JSF 和 Spring，我发现我需要在我的托管 bean 中使用 Spring 的 AOP，但是当我改变它们时，例如：

```
@ManagedBean("title")
@RequestScope
public class Title{
   ...
} 
```

（无缝工作）到

```
@Component
@Scope("request")
public class Title{
   ...
} 
```

尽管 spring 尝试根据我的需要创建这些 bean（因为它设置了一些 Autowired 属性），但它找不到从我的 .xhtml 文件中引用的一些属性，例如：

```
org.apache.myfaces.view.facelets.el.ContextAwarePropertyNotFoundException:   javax.el.PropertyNotFoundException: Property 'selectedUser' not found on type $Proxy50 
```

任何机构都可以提供帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:22:52.577

当您想将 Spring AOP 应用于实现任何接口的类时，您应该将该类的所有公共方法包含到由它实现的接口中，或者使用`proxy-target-class = "true"`.

有关此行为的解释，请参见[7.6 代理机制。](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/aop.html#aop-proxying)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T08:33:26.833

如果您的 xhtml jsf 页面无法访问您的 Spring Bean，请检查您的 faces-config.xml 中是否有以下配置：

```
<application>
     <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>
</application> 
```

# javascript - jQuery淡入不同的背景图像，以按特定文件夹设置的间隔设置身体

> ID：12821273
> 
> 赞同：1
> 
> 时间：2012-10-10T14:04:23.080
> 
> 标签：javascript, jquery, css

我想将身体背景淡化到按间隔设置的特定文件夹中的其他图像。我得到了运行 setInterval 的脚本，但它根本没有改变背景图像，事实上它甚至没有将它改变为空白图像。这些图像位于带有 script.js 文件的文件夹中（与调用以下脚本的文件相同）。我正在运行一个简单的随机程序来确定要运行哪个文件（文件名为 1、2、3、4.jpg 等）。

如果我可以预加载图像，那将是理想的，但我想这是另一个问题：

```
 $(document).ready(function() {

var image;

function changeImage() {
    image = Math.floor(Math.random() * 2) + 1;
    $("body").css("background-image",image+".jpg");
}

setInterval(changeImage, 3000);
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:19:41.177

您可以将 jQuery 扩展为：

```
$.fn.preload = function() {
    this.each(function(){
        $('<img/>')[0].src = this;
    });
} 
```

现在您可以通过以下方式预加载图像：

```
$(['1.jpg','2.jpg','3.jpg','4.jpg']).preload(); 
```

并且您更改背景的代码可能看起来像

```
 $(document).ready(function() {
    var image;

    function changeImage() {
        image = Math.floor(Math.random() * 2) + 1;
        $("body").css("background-image","url('" + image+ ".jpg')");
     }
   });

setInterval(changeImage, 3000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T14:05:55.650

看起来您正在设置背景图像的属性，但没有指定 url，试试这个：

```
$("body").css("background-image","url(" + image+ ".jpg)"); 
```

或者替代方案是

```
image = Math.floor(Math.random() * 2) + 1;
image = "url(" + image + ".jpg)"
$("body").css("background-image",image); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:22:56.650

您在 url 中使用没有双床的 jQuery，并使用 background-image 的背景

```
image = Math.floor(Math.random() * 2) + 1;
$("body").css({background:"url(" + image  + ".jpg)"}) 
```

# python - 编写文本文件的特定行

> ID：12821274
> 
> 赞同：2
> 
> 时间：2012-10-10T14:04:24.943
> 
> 标签：python

我写了这段代码：

```
f = open('example.txt','r')
lines = f.readlines()

for i, line in enumerate(f):
if i < 3:
   lines = ['LC '+line for line in lines]
   with open('./example.txt', 'w') as f:
      f.writelines(lines)
      f.close()
elif i < 5:
    lines = ['LB '+line for line in lines]
    with open('./example.txt', 'w') as f:
        f.writelines(lines)
        f.close()
elif i > 6:
    break

 f.close() 
```

我有一个 11 行的文件。我想从每一行开始写一些东西。3 第一行的单词不同，其他 2 的单词不同。你能帮我看看我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:10:36.937

```
lines = [("LC" if i < 3 else "LB")+line for i,line in enumerate(lines)] 
```

可能会成功

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:11:19.393

看来您的第二个条件有点混乱。如果你在前三行写了一些东西，然后在第四行和第五行写了一些东西，那么你的条件需要改变。

尝试将第二个 elif 更改为：

```
elif i <= 5 and i >=3: 
```

另外，忠告一下，您不必每次都打开文件进行写入。您可以将第一行设置为：

```
f = open('example.txt','rw') 
```

这将打开文件，为您提供一个句柄，并允许您对其进行读写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T14:08:24.360

为了`lines = ['LC '+line for line in lines]`

您正在写入`LC`每一行，而不仅仅是前 3 行。

`lines = ['LB '+line for line in lines]`同样的事情

首先，您可以在行中添加适当的前缀，然后您可以实际编写行。像这样的东西：

```
for i, line in enumerate(lines):
  if i < 3:
     # add prefix to line
  if 3 < i < 5:
     # add correct prefix 
```

现在您的行具有正确的前缀，您可以将它们全部写入文件

# codeigniter - Codeigniter：无法获取 uri 段中传递的值

> ID：12821275
> 
> 赞同：0
> 
> 时间：2012-10-10T14:04:27.463
> 
> 标签：codeigniter

我目前在获取 uri 段的值时遇到问题。

这是场景。

当用户单击此锚点时：

```
<?php echo anchor("site/comment/$row->post_id", "Comment"); ?> 
```

浏览器地址栏中的链接变为：

```
http://localhost/CI_TEST/index.php/site/comment/140838624 
```

如您所见，链接的第三部分确实有一个值。现在，当我尝试在查询中获取该值时，如下所示：

```
$comment_data = array(
        'post_id' => $this->uri->segment(3),
        'date_commented' => date('Y-m-d H:i:s'),            
        ); 
```

并将其发送到数据库中，保存的值应该为零，应该是140838624。

有任何想法吗？我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T20:24:08.797

您是否尝试过在 uri 段 2 和 4 中得到了什么。您甚至能够从 uri 中获得任何价值吗？你可以使用 die() 和 echo 来调试它。您是否还在自动加载的帮助程序中包含“url”。

# javafx-2 - javafx 2.1中如何在Stage前面显示java swing组件？

> ID：12821276
> 
> 赞同：1
> 
> 时间：2012-10-10T14:04:32.917
> 
> 标签：javafx-2, javafx

我在 javafx 应用程序中使用 JFileChooser、Joption 等摆动组件。但是当我点击 JFilechooser 时，这就是应用程序的落后。如何解决这个问题呢。请给我一些建议。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T15:00:29.277

您可以创建 JFileChooser 的子类并覆盖 createDialog 方法，然后返回一个始终位于顶部设置的对话框。

```
class AlwaysOnTopFileChooser extends JFileChooser {
    protected JDialog createDialog(Component parent) throws HeadlessException {
        JDialog dialog = super.createDialog(parent);
        dialog.setAlwaysOnTop(true);
        return dialog;
    }
} 
```

您将需要填写所需的构造函数等。

# internet-explorer - 谷歌融合表信息窗口在 IE 中打开缓慢

> ID：12821279
> 
> 赞同：1
> 
> 时间：2012-10-10T14:04:41.933
> 
> 标签：internet-explorer, google-maps, google-fusion-tables, google-visualization

我创建了一个自定义的 Google fusion table-google 可视化页面，似乎可以正常运行 firefox/safari。但是，在 IE 8 中，信息窗口打开缓慢。
这是我的链接：[链接](http://www.anacostia.net/maps/map_search_dev.html)。我不确定如何诊断这个问题，甚至不知道具体要问什么。有没有人经历过这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T03:02:40.920

它只是IE 8吗？我在 IE 10 中查看了您的链接，它与 Chrome 的加载时间相同。虽然它不是 IE 8，但我尝试使用 IE 开发人员栏切换模式...... 7-10 加载大致相同......但我会说我个人在 IE 7 和 8（9和更高的似乎已经清除了它们）。大多数问题是由于对 DOM 和 HTML 标准的支持更有限..有时它只是切换一些脚本......你是否能够对 ajax 调用（那里有一些工具）与渲染时间进行计时？这可能会告诉您它是否是您的 ajax 脚本，或者它是否与 HTML 呈现更相关。

# php - php写入txt文件写入第一个文件而不是第二个

> ID：12821281
> 
> 赞同：0
> 
> 时间：2012-10-10T14:04:50.747
> 
> 标签：php, file-io

嘿，我想知道为什么我下面的代码只写第一个文件而不写第二个文件

```
$counterFile = 'counter.log';
$counterFileBU = 'counterBU.log';

if(!is_writable($counterFile)) {
    $count = 'WErr';
}
else {
    $count = file_get_contents($counterFile);
    $count++;
    file_put_contents($counterFile, $count);
    file_put_contents($counterFileBU, $count . ' @ ' . date("F j, Y, g:i a"));
} 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:12:20.063

如果不满足此条件，您的代码将不会运行并且不会输出任何内容？

```
 if(!is_writable($counterFile)) { 
```

你应该尝试触发一些错误

```
$counterFile = __DIR__ . '/counter.log';
$counterFileBU = __DIR__ . '/counterBU.log';

touch($counterFile);
touch($counterFileBU);

if(!is_writable($counterFile) || !is_writable($counterFileBU) ) {
   throw new Exception("Not Writable");
} 
```

# dotnetnuke - 如何在 dotnet nuke 站点中添加物理 .aspx 页面

> ID：12821284
> 
> 赞同：0
> 
> 时间：2012-10-10T14:04:52.713
> 
> 标签：dotnetnuke, dotnetnuke-module

嗨，这些天我正在探索 dot net nuke，我的任务是在 dot net nuke 站点中添加物理 .aspx 页面，为此我在 Visual Studio 中打开的 dot net nuke 站点中添加 .aspx 页面

```
 -> ADD New Item -> .aspx Page 
```

并建造它

```
-> Debug -> Build Website 
```

但是当我从添加页面菜单中看到它没有显示在根文件夹或其他位置时。请帮助我如何添加物理 .aspx 页面。并告诉我们是否可以在 dot net nuke 中广告物理页面。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T23:36:29.377

您可以添加物理 aspx 页面并导航到该页面，但如果您只是尝试将页面添加到站点，则不应添加物理 .aspx 页面。您应该通过以管理员或主机用户身份登录并从控制面板中选择添加页面来添加页面。

# android - 从文件中恢复公钥和私钥并使用它（Android）

> ID：12821286
> 
> 赞同：2
> 
> 时间：2012-10-10T14:04:59.803
> 
> 标签：android, save, encryption

当我尝试使用文件中的密钥进行加密和解密时遇到了一些问题。

这是我有问题的代码的一部分：

```
 //**The main function:**

File inputfile = new File(fileToEncrypt); // I receive fileToEncrypt for the function.

try {
    inputbytes = readFromFile(inputfile);
} 

catch (IOException e) {
    Toast.makeText(this, "ERROR READING", Toast.LENGTH_LONG).show();
}

byte[] outputbytes = rsaEncrypt(inputbytes, raiz.getAbsolutePath()+"/PublicKeyFile.key");
byte[] inputbytes = rsaDecrypt(outputbytes, raiz.getAbsolutePath()+"/Privada.key");

    //**Used functions**

    public byte[] rsaEncrypt(byte[] src, String direccion) {
    try {
        File archivo_llave_publica = new File(direccion);
        byte[] bytes_llave = leer(archivo_llave_publica);
        KeyFactory keyFactory = KeyFactory.getInstance("RSA");          
        EncodedKeySpec publicKeySpec = new X509EncodedKeySpec(bytes_llave);
        PublicKey pubKey = keyFactory.generatePublic(publicKeySpec);
        Cipher cipher = Cipher.getInstance("RSA");
        cipher.init(Cipher.ENCRYPT_MODE, pubKey);
        byte[] cipherData = cipher.doFinal(src);
        return cipherData;
    } catch (Exception e) {
        Toast.makeText(this, "Error encriptando!!", Toast.LENGTH_LONG).show();
    }
    Toast.makeText(this, "ERROR ENCRYPT!", Toast.LENGTH_LONG).show();
    return null;
}

public byte[] rsaDecrypt(byte[] src, String direccion) {
    try {
        File archivo_llave_privada = new File(direccion);
        byte[] bytes_llave = leer(archivo_llave_privada);
        KeyFactory keyFactory = KeyFactory.getInstance("RSA");          
        EncodedKeySpec privateKeySpec = new X509EncodedKeySpec(bytes_llave);
        PrivateKey priKey = keyFactory.generatePrivate(privateKeySpec);
        Cipher cipher = Cipher.getInstance("RSA");
        cipher.init(Cipher.DECRYPT_MODE, priKey);
        byte[] cipherData = cipher.doFinal(src);
        return cipherData;
    } catch (Exception e) {
        Toast.makeText(this, e.getMessage(), Toast.LENGTH_LONG).show();
    }
    return null;
}

public byte[] readFromFile(File archivo) throws IOException{           
    FileInputStream lector = new FileInputStream(archivo);
    long length = archivo.length();
    byte[] input = new byte[(int) length];
    for (int i=0; i<(int)length; i++)
    {
        input[i]=(byte) lector.read();
    }
    lector.close();
        return input;
 } 
```

它给了我一个错误解密...如果你发现我的错误请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T00:20:57.577

问题是编码类型解密。它是 PKCS8 而不是 X509。

# java - ArrayList 的通用列表初始化

> ID：12821287
> 
> 赞同：0
> 
> 时间：2012-10-10T14:05:01.380
> 
> 标签：java

> **可能重复：**
> [List 与 ArrayList 作为引用类型？](https://stackoverflow.com/questions/4062982/list-versus-arraylist-as-reference-type)

我在 StackOverflow 的某处读到：

```
List<String> foo = new ArrayList<String>(); 
```

是初始化 ArrayList 的最佳实践。这就是：

```
ArrayList<String> foo = new ArrayList<String>(); 
```

应该避免。这个对吗？如果是的话，有人可以解释为什么会这样吗？

谢谢， EG

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:07:59.433

这是大多数开发人员`ArrayList`（包括我自己）的使用方式，也是多态性的一般原则。您应该尽可能使用类层次结构中的最高类/接口，同时仍然可以使用所有功能。

通常，这会使您的代码更加灵活，并且您可以更轻松地切换实现，因为您知道使用`List`as 类型进行编程并没有限制您使用任何仅在a 上`ArrayList`可用且不可用的方法`LinkedList`。

例如，如果我这样做：

```
LinkedList<String> strings = new LinkedList<String>();
String s = strings.pop(); 
```

`pop`是专有的`LinkedList`，所以我不能直接将其更改为`ArrayList`. 我还必须更改我的代码：

```
ArrayList<String> strings = new ArrayList<String>();
String s = strings.remove(strings.size() - 1); 
```

但如果我只是使用接口，我一开始就不会使用`pop`，所以我可以更改`strings`为我想要的任何实现。

这在编程 API 时尤其重要。如果您的方法可以公开访问并且将被其他开发人员使用，那么您需要确保您没有限制您的方法所采用的列表类型，除非您有充分的理由这样做，特别是因为*它们*可能具有良好的*不想*用的理由`ArrayList`。

如果您除了迭代和添加/删除什么都不做，您甚至可以升级到`Collection`. 但是，在这里您开始失去上下文，因为`List`它告诉您它可能包含重复项并且是手动订购的。但是，如果这不是特别重要并且您可以使用`Collection`，您甚至可以将列表替换为 的实现`Set`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:06:42.403

是的，第一个可以灵活地在以后更改实施，而对客户端的更改最少。

例如，您可以更改`ArrayList`为`LinkedList`，但如果客户端使用接口方法，它将受到的影响最小。

```
List<String> tempList = new LinkedList<String>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:07:43.293

它被称为界面设计。如果您将 List 定义为参数，则您的代码将是灵活的，ArrayList 和 LinkedList（或任何其他实现接口 List）都可以用作底层实现。

# c - Linux 中的软中断与硬中断处理时序

> ID：12821295
> 
> 赞同：2
> 
> 时间：2012-10-10T14:05:18.607
> 
> 标签：c, linux, scheduled-tasks, interrupt, irq

我正在将一些软件从使用物理硬件设备转换为完整的软件模拟，现在我正在研究中断处理部分。

当此代码驱动物理硬件时，它通过 请求 IRQ `request_irq()`，现在我不再拥有物理设备，我将更改代码以使用“softirq”方法。

一个令人担忧的问题是，我看到软中断实际上只是必须等到调度程序调用它的事件。而硬件中断会导致正在运行的活动立即中断。这对我来说意味着，通过将我的代码转换为使用 softirqs 将导致原始代码中不存在的调度延迟。

我的理解正确吗？
无论如何我可以注册我的softirq以立即中断，就像硬件中断一样？
如果没有的话，无论如何要选择一个免费的硬件中断号并继续使用`request_irq()`并“欺骗”它以为我正在运行一个硬件设备？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:24:06.510

您可以在用户模式代码或内核模式代码（通过额外的系统调用或驱动程序）中引发异常，并在内核中有一个专用的异常处理程序来将此异常转换为模拟中断。异常通常会立即处理，至少由 CPU 处理，类似于外部硬件中断。我对 Linux 内部的了解还不够，无法确切地告诉您如何实现这一点，但它必须是可行的。我敢肯定，它可以在 x86 上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-12T17:05:18.147

我对实时计算领域并不完全有信心，但这听起来像是一个很好的用例。实时计算确保您的代码在保证的时间范围内执行。有一个可用的 Linux 实时内核，遗憾的是缺乏资金。如果您仍然需要保证执行您的软中断，您应该研究它。我知道这是一个很好的问题，但也许对其他人也有用。

# bash - 仅按引号外的空格拆分字符串

> ID：12821302
> 
> 赞同：5
> 
> 时间：2012-10-10T14:05:29.623
> 
> 标签：bash

我知道，这被问了十亿次，但我还没有找到适合我的具体情况的最佳解决方案。

我收到这样的字符串：

```
VAR1="some text here" VAR2='some another text' some script --with --some=args 
```

我如何像这样拆分字符串：（在纯 bash 中最可取）

```
VAR1="some text here"
VAR2='some another text'
some script --with --some=args 
```

`set -- $str`导致`VAR1="some`

`set -- "$str"`返回整个字符串

`eval set -- "$str"`导致`VAR1=some text here`

当然，我可以在返回的字符串中添加引号`eval`，但是我得到了高度不可信的输入，所以`eval`根本不是一个选项。

重要提示：可以有从零到无限的 VAR，它们可以是单引号或双引号

另外，`VAR`这里是假名，实际上可以是任何名称。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:14:38.890

它远不接近纯`shlex`bash——但 Python 有一个模块，它试图提供与 shell 兼容的词法分析。

```
>>> import shlex, pprint
>>> pprint.pprint(shlex.split('''VAR1="some text here" VAR2='some another text' some script --with --some=args'''))
['VAR1=some text here',
 'VAR2=some another text',
 'some',
 'script',
 '--with',
 '--some=args'] 
```

以下更完整的示例使用 bash 中的这个 Python 模块，NUL 分隔的流提供明确的传输：

```
shlex() {
  python -c $'import sys, shlex\nfor arg in shlex.split(sys.stdin):\n\tsys.stdout.write(arg)\n\tsys.stdout.write(\"\\0\")'
}
args=()
while IFS='' read -r -d ''; do
  args+=( "$REPLY" )
done < <(shlex <<<$'VAR1="some text here" VAR2=\'some another text\' some script --with --some=args')
printf '%s\n' "${args[@]}" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T20:26:22.447

呵呵，看来我参加聚会迟到了：）

这是我如何处理在脚本之前传递的环境变量。

首先，`escape_args`函数将转义“内部”传递的变量，

所以如果用户通过`VAR="foo bar"`，它会变成`VAR=foo\0040bar`.

```
function escape_args {
  local str=''
  local opt=''
  for c in $1; do
    if [[ "$c" =~ ^[[:alnum:]]+=[\"|\'] ]]; then
      if [[ "${c: -1}" =~ [\"|\']  ]]; then
        str="$str $( echo $c | xargs )"
      else
        # first opt chunk
        # entering collector
        opt="$c"
      fi
    else
      if [ -z "$opt" ]; then
        # not inside collector
        str="$str $c"
      else
        # inside collector
        if [[ "${c: -1}" =~ [\"|\']  ]]; then
          # last opt chunk
          # adding collected chunks and this last one to str
          str="$str $( echo "$opt\0040$c" | xargs )"
          # leaving collector
          opt=''
        else
          # middle opt chunk
          opt="$opt\0040$c"
        fi
      fi
    fi
  done
  echo "$str"
} 
```

让我们针对您输入的修改版本对其进行测试：

```
s="VAR1=\"some text here\" VAR2='some another text' VAR3=\"noSpaces\" VAR4='noSpacesToo' VAR5=noSpacesNoQuotes some script --with --some=args"

echo $(escape_args "$s")

VAR1=some\0040text\0040here VAR2=some\0040another\0040text VAR3=noSpaces VAR4=noSpacesToo VAR5=noSpacesNoQuotes some script --with --some=args 
```

看，所有的变量都是空格转义和引号被删除，所以`declare`会正常工作。

现在您可以遍历输入的各个部分。

这是一个如何声明变量并运行脚本的示例：

```
cmd=''
for c in $(escape_args "$s"); do
  [[ "$c" =~ ^[[:alnum:]]+= ]] && declare "$(echo -e $c)" && continue
  cmd="$cmd $c"
done

echo VAR1 is set to $VAR1
echo VAR2 is set to $VAR2
echo VAR3 is set to $VAR3
echo VAR4 is set to $VAR4
echo VAR5 is set to $VAR5
echo $cmd 
```

这个迭代器做了两件简单的事情：

*   `SOME_VAR=`如果块匹配表达式，则声明一个 var
*   否则将块添加到最终 cmd

所以输出将是：

```
VAR1 is set to some text here
VAR2 is set to some another text
VAR3 is set to noSpaces
VAR4 is set to noSpacesToo
VAR5 is set to noSpacesNoQuotes
some script --with --some=args 
```

这是否接近您的需求？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T15:28:32.950

您可以使用以下纯 bash 代码。它逐个字符地遍历输入，并尝试保留有关在引号内/外的标志。

```
#! /bin/bash 
string=$(cat <<'EOF'
VAR1="some text here" VAR2='some another text' VAR3="a'b" VAR4='a"b' VAR5="a\"b" VAR6='a'"'"'b' some script --with --some=args
EOF
)
echo "$string"

results=()
result=''
inside=''
for (( i=0 ; i<${#string} ; i++ )) ; do
    char=${string:i:1}
    if [[ $inside ]] ; then
        if [[ $char == \\ ]] ; then
            if [[ $inside=='"' && ${string:i+1:1} == '"' ]] ; then
                let i++
                char=$inside
            fi
        elif [[ $char == $inside ]] ; then
            inside=''
        fi
    else
        if [[ $char == ["'"'"'] ]] ; then
            inside=$char
        elif [[ $char == ' ' ]] ; then
            char=''
            results+=("$result")
            result=''
        fi
    fi
    result+=$char
done
if [[ $inside ]] ; then
    echo Error parsing "$result"
    exit 1
fi

for r in "${results[@]}" ; do
    echo "< $r >"
done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T16:55:04.410

您可以使用流编辑器来修改文本。您可以首先使用正则表达式获取变量，然后用空引号替换它们。在开头和结尾附加引号。在这个阶段你应该有：

```
VAR1="some text here" 
VAR2='some another text' 
```

在单独的字符串中，原始字符串将如下所示：

```
"""""some script --with --some=args" 
```

标准命令行解析将返回：

```
""
""
"some script --with --some=args" 
```

扔掉空字符串，你应该有你想要的东西。这是一个 hacky（潜在）解决方案，我会敦促在使用类似的东西之前对其进行测试/思考。

# apache - 404页面重定向到自定义页面

> ID：12821308
> 
> 赞同：0
> 
> 时间：2012-10-10T14:05:51.387
> 
> 标签：apache, .htaccess, redirect, http-status-code-404

例如，我有以下页面给出 404 错误

[http://www.example.com/requirements/about-tn/about-us.html](http://www.example.com/requirements/about-tn/about-us.html)

只有当上面的页面返回 404 错误时，我才希望上面的页面到下面的 url

[http://rd.example.com/requirements/about-tn/about-us.html](http://rd.example.com/requirements/about-tn/about-us.html)

我怎样才能在.htaccess 中做到这一点？

赞赏

问候， 拉贾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:09:50.463

在`www.example.com`的文档根目录下的 htaccess 文件中，添加：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?example.com$ [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?requirements/about-tn/about-us.html http://rd.example.com/requirements/about-tn/about-us.html [L,R] 
```

# sql - Better Linq GroupBy

> ID：12821310
> 
> 赞同：3
> 
> 时间：2012-10-10T14:05:52.653
> 
> 标签：sql, sql-server, linq

我们正在开发一个广告平台并编写一个负责投放广告的大查询，向消费者投放广告有几个标准，其中一个标准是广告系列每日预算，所以我们正在做的是分组by Individual Ads 以获取展示次数和消耗的成本，然后我们按 Campaign 分组，产生以下查询：

```
 (from a in AdCreative
       join h in AdHit on a.ID equals h.AdID into gh
       join l in AdGroup_Location on a.AdGroupID equals l.AdGroupID into gj
       from subloc in gj.DefaultIfEmpty()
       from subhits in gh.DefaultIfEmpty()
       where a.AdDimensionID == 7 && 
             (subloc == null || subloc.LocationID == 23)
       select new {
           ID = a.ID,
           Name = a.Name,
           Spent = (subhits.AdDimension != null) ? ((double)subhits.AdDimension.Credit / 1000 ) : 0,
           CampaignID = a.AdGroup.Campaign.ID,
           CampaignName = a.AdGroup.Campaign.Name,
           CampaignBudget = a.AdGroup.Campaign.DailyBudget

       })
    .GroupBy(adgroup => adgroup.ID)
    .Select(adgroup => new {
        ID = adgroup.Key,
        Name = adgroup.FirstOrDefault().Name,
        Spent = adgroup.Sum(q =>  q.Spent),
        CampaignID = adgroup.FirstOrDefault().CampaignID,
        CampaignName = adgroup.FirstOrDefault().CampaignName,
        CampaignBudget = adgroup.FirstOrDefault().CampaignBudget,
    })
    .GroupBy(q => q.CampaignID)
    .Select(campaigngroup => new {
      CampaignID = campaigngroup.Key,
      DailyBudget = campaigngroup.FirstOrDefault().CampaignBudget,
      Spent = campaigngroup.Sum(q => q.Spent),
      Ads = campaigngroup.GroupBy(q => q.ID).Select(adgroup => new {
        ID = adgroup.Key,
        Name  = adgroup.FirstOrDefault().Name,
        Spent = adgroup.FirstOrDefault().Spent
    })
    }) 
```

![结果](../Images/d7116ec515a83488369a0ac2e7785873.png)

正如您在屏幕截图的结果中看到的那样，它运行良好，但是当我检查生成 SQL 查询时，我得到了[***402***行 SQL 代码](https://gist.github.com/3865826)。怎么可能？我能做些什么来增强代码吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:39:47.083

我唯一注意到的是，最后`GroupBy`你不聚合，而只显示`Key`和第一个值。我想你也可以`Select` `q.Id`, `q.Name`, 和`q.Spent`那里。

`GroupBy`由于您显示了两个聚合级别（两次`Spent`），因此两个s 就足够了。

# c# - 反序列化 ... 类型的对象时出错。读取 XML 数据时已超出最大字符串内容长度配额 (8192)

> ID：12821313
> 
> 赞同：1
> 
> 时间：2012-10-10T14:05:56.893
> 
> 标签：c#, wcf, web-services

发布到 WCF Web 服务时出现间歇性错误

```
The exception message is 'There was an error deserializing the object of type. The maximum   
string content length quota (8192) has been exceeded while reading XML data. 
```

我尝试了各种不同的建议，但没有运气

谁能看到我遗漏了什么或做错了什么？

谢谢

客户端的配置文件是

```
<?xml version="1.0"?>
<configuration>
<startup><supportedRuntime version="v4.0"    sku=".NETFramework,Version=v4.0"/></startup><system.serviceModel>
    <bindings>
        <wsHttpBinding>
            <binding name="WSHttpBinding_IAWSSESService" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                maxBufferPoolSize="5242880" maxReceivedMessageSize="655360"
                messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
                allowCookies="false">
                <readerQuotas maxDepth="320" maxStringContentLength="81920" maxArrayLength="163840"
                    maxBytesPerRead="40960" maxNameTableCharCount="163840" />
                <reliableSession ordered="true" inactivityTimeout="00:10:00"
                    enabled="false" />
                <security mode="None">
                    <transport clientCredentialType="Windows" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="Windows" negotiateServiceCredential="true" />
                </security>
            </binding>
        </wsHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://localhost:20930/AWSSESService.svc"
            binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IAWSSESService"
            contract="AwsWebService.IAWSSESService" name="WSHttpBinding_IAWSSESService" />
    </client>
</system.serviceModel>
</configuration> 
```

Web服务的配置文件是

```
<?xml version="1.0"?>
<configuration>
<system.web>
<compilation debug="true" targetFramework="4.0"/>
<pages controlRenderingCompatibilityVersion="4.0"/>
  </system.web>
  <system.serviceModel>
<services>
  <service name="CG.Core.EmailService.AWSSESService">
    <endpoint address="" behaviorConfiguration="" binding="wsHttpBinding" contract="CG.Core.EmailService.IAWSSESService" bindingConfiguration="wsHttpDefaultConfig"/>
  </service>
</services>
<bindings>
  <wsHttpBinding>
    <binding name="wsHttpDefaultConfig">
      <reliableSession ordered="true" inactivityTimeout="00:10:00" />
      <security mode="None"/>
    </binding>
  </wsHttpBinding>
</bindings>
<behaviors>
  <serviceBehaviors>
    <behavior>
      <serviceMetadata httpGetEnabled="true"/>
       <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment aspNetCompatibilityEnabled="false"     multipleSiteBindingsEnabled="true"/>
  </system.serviceModel>
  <system.webServer>
<modules runAllManagedModulesForAllRequests="true"/>
<!--
     -->
<directoryBrowse enabled="true"/>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:32:31.810

我设法通过从客户端复制 wshttpbinding 并将其粘贴到 Web 配置文件中来解决此问题

# jquery - 如何在 JQueryMobile 中动态地在数组中创建数组？

> ID：12821315
> 
> 赞同：0
> 
> 时间：2012-10-10T14:06:00.150
> 
> 标签：jquery, arrays, nested

我正在尝试学习 JQuerymobile，我正在做类似下面的事情，只是想检查 JQueryMobile 是否支持这样的事情

```
function BooksCategory () {
        ID          = '';
        title       = '';
        imgURL      = '';
        description = '';
        bookCounts= '';
        Books       = [];
};
function Books () {
        categoryID           = '';
        bookID               = '';
        name                 = '';
        imgURL               = '';
        Cost         = '';
        termsandcondition    = '';
}
this.booksCategory = [];

ParseResponse()
{
     session.CatagoriesCount = response.BooksCategory.length;

     for (var k=0; k < session.CatagoriesCount; k++)
     {
       session.booksCategory[k]  = new BookCategory();

       var NoOfBooks = session.BooksCategory[k].bookCounts

       for (var j=0; j<NoOfBooks; j++)

        session.booksCategory[k].Books[j]   = new Books();  
    } 
```

}

为什么我收到此语句的“未捕获类型错误：无法读取属性 '0'”

```
session.booksCategory[k].Books[j]   = new Books(); 
```

如果这不是正确的方法，我们如何在数组中动态创建数组？

问候拉维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:08:16.013

改变

```
function BooksCategory () {
        ID          = '';
        title       = '';
        imgURL      = '';
        description = '';
        bookCounts= '';
        Books       = [];
}; 
```

至

```
function BooksCategory () {
        this.ID          = '';
        this.title       = '';
        this.imgURL      = '';
        this.description = '';
        this.bookCounts= '';
        this.Books       = [];
}; 
```

将 Books 属性添加到`BooksCategory`使用创建的实例中`new`。没有它，`session.booksCategory[k].Books`就不存在，所以你不能接受它的元素`[0]`，因此你的错误。

上下文`this`在 javascript 中并不隐含。

当然，对其他班级也做同样的事情。

**编辑 ：**

并更换

```
var NoOfBooks = session.BooksCategory[k].bookCounts 
```

经过

```
var NoOfBooks = session.booksCategory[k].bookCounts; 
```

# cron - 我无法让我的 cron 命令工作

> ID：12821317
> 
> 赞同：-1
> 
> 时间：2012-10-10T14:06:09.087
> 
> 标签：cron

我是我的 VPS 的新手，我正在尝试设置一个 cron 脚本，此路径用于在我的上一个帐户上工作，但现在返回错误

```
/usr/bin/lynx -dump http://www.urllgoeshere.com/cron/email.php > /dev/null 
```

网址和脚本一样工作正常，我猜有问题

```
/usr/bin/lynx -dump 
```

我该如何纠正这个问题 我在哪里可以获得正确的信息

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:08:15.263

试试这个：`wget -q http://www.domain.com/script.php -O /dev/null`

# c# - 从程序集 c# 中引用 .dll

> ID：12821320
> 
> 赞同：1
> 
> 时间：2012-10-10T14:06:14.953
> 
> 标签：c#, unity3d, .net-assembly

我正在开发一个语言翻译程序，我从离线获取信息。我正在使用 Unity 游戏引擎，它使用 Assembly 作为其 IDE。以下是我到目前为止的代码。

```
class Dictionary
{
    public string Translate(string input, string languagePair, Encoding encoding)
    {
        string url = String.Format("http://www.google.com/translate_t?hl=en&ie=UTF8&text={0}&langpair={1}", input, languagePair);

        string result = String.Empty;

        using (WebClient webClient = new WebClient())
        {
            webClient.Encoding = encoding;
            result = webClient.DownloadString(url);
        }

        HtmlDocument doc = new HtmlDocument();
        doc.LoadHtml(result);
        return doc.DocumentNode.SelectSingleNode("//textarea[@name='utrans']").InnerText;
    }
} 
```

但是，在编译时，我收到错误：

```
Assets/DictionarySp.cs(8,7): error CS0246: The type or namespace name `HtmlAgilityPack' could not be found. Are you missing a using directive or an assembly reference? 
```

我开始做研究，听说 HtmlAgilityPack 是第三方软件，我必须引用 .dll。我下载了 VisualStudio2010 以及 NuGet。在 Visual Studio 中，我单击“管理 NuGet 包”并安装了 HtmlAgilityPack。在 Visual Studio 内部，错误消失了，但是当我尝试在 Assembly 中打开文件时，我仍然收到无法找到命名空间 HtmlAgilityPack 的错误。我正在使用 Unity 游戏引擎，因此我必须从 VisualStudio 文件中获取文件并将其放在不同的文件夹中。是否有一些我遗漏的步骤，或者我需要在汇编中做一些事情来引用 HtmlAgilityPack dll？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T02:28:11.750

像 Austin 和 Shakir 所说的那样引用 HtmlAgilityPakc.dll 后，我仍然无法使错误正常工作。我修复了这个错误，不仅引用了 HtmlAgilityPack.dll，而且将 HtmlAgilityPack.dll 放在我的脚本所在的文件夹中。这摆脱了错误。感谢您所有的帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:11:37.300

尝试从 Add References 选项卡中添加 HTMLAgility！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T14:13:20.253

在项目下，转到 Add References 并确保已添加 HTMLAgilityPack。既然你已经有了`using HtmlAgilityPack;`，它应该是固定的。

你关于这个主题的[其他问题也应该解决这个问题。](https://stackoverflow.com/questions/12628449/html-agility-pack-implementation)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-21T19:03:57.470

如果您使用的是自定义 Unity 程序集定义文件，则无法在 Visual Studio 中添加对该项目的引用，因为 Unity 在编译时会覆盖这些引用。相反，您需要将 dll 添加到资产文件夹层次结构中。

# android - 参考 Android My Location Overlay 蓝点动画

> ID：12821322
> 
> 赞同：0
> 
> 时间：2012-10-10T14:06:20.613
> 
> 标签：android, google-maps, customization, mylocationoverlay

好的，所以我正在覆盖 MyLocationOverlay 以希望移除蓝色准确环。

我正在覆盖 drawMyLocation()

```
 @Override 
        protected void drawMyLocation(Canvas canvas, MapView mapView, Location lastFix, GeoPoint myLocation, long when) {
            // translate the GeoPoint to screen pixels
            Point screenPts = mapView.getProjection().toPixels(myLocation, null);

            // create a rotated copy of the marker
            Bitmap arrowBitmap = BitmapFactory.decodeResource( mContext.getResources(), android.THISISWHERETHEANIMATIONSHOULDGO);
            Matrix matrix = new Matrix();
            matrix.postRotate(mOrientation);
            Bitmap rotatedBmp = Bitmap.createBitmap(
                arrowBitmap, 
                0, 0, 
                arrowBitmap.getWidth(), 
                arrowBitmap.getHeight(), 
                matrix, 
                true
            );
            // add the rotated marker to the canvas
            canvas.drawBitmap(
                rotatedBmp, 
                screenPts.x - (rotatedBmp.getWidth()  / 2), 
                screenPts.y - (rotatedBmp.getHeight() / 2), 
                null
            );

        } 
```

但是，我发现无法获得对所使用的原始蓝点动画的引用。我该如何重新添加这个？一帧动画是可以接受的。谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-23T04:53:55.087

你不能只使用[位置](http://developer.android.com/guide/topics/location/strategies.html)来知道用户的位置吗？

# c# - 如何使用具有目标类型的对象的 Expression.Assign 选择器一般地分配属性？

> ID：12821323
> 
> 赞同：2
> 
> 时间：2012-10-10T14:06:19.970
> 
> 标签：c#, .net-4.0, expression

我正在尝试使用表达式选择器将属性从一种类型的对象分配给另一种类型的对象，其中属性具有各种类型。这是我到目前为止的代码：

```
var type1 = new Type1();
var type2 = new Type2();

...

var propMap = new List<Tuple<Expression<Func<Type1, object>>, Expression<Func<TradeStaticAttributesItemModel, object>>>>
    {
        new Tuple<Expression<Func<Type1, object>>, Expression<Func<Type2, object>>>(x => x.Prop1, x => x.Prop1),
        new Tuple<Expression<Func<Type1, object>>, Expression<Func<Type2, object>>>(x => x.Prop2, x => x.Prop2)
    };

foreach (var prop in propMap)
{
    if (prop.Item1.Compile()(type1) != prop.Item2.Compile()(type2))
    {
        ParameterExpression valueParameterExpression = Expression.Parameter(prop.Item2.Body.Type);
        var assign = Expression.Lambda<Action<Type1, object>>(Expression.Assign(prop.Item1.Body, valueParameterExpression), prop.Item1.Parameters.Single(), valueParameterExpression);
        Action<Type1, object> setter = assign.Compile();
        setter(type1, prop.Item2.Compile()(type2));
    }
} 
```

但是，我是 但是，当属性*类型*为`string`. 我想这也会发生在除`object`. 知道如何使此代码适用于这种情况吗？

[我在这里](https://stackoverflow.com/questions/10760139/setting-property-without-knowing-target-type-at-compile-time)使用 Expression.Convert找到了一个潜在的答案，但我无法让它工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T17:46:50.200

好的，我使用以下代码进行了此操作：

```
var type1 = new Type1();
var type2 = new Type2();

...

var propMap = new List<Tuple<Expression<Func<Type1, object>>, Expression<Func<TradeStaticAttributesItemModel, object>>>>
    {
        new Tuple<Expression<Func<Type1, object>>, Expression<Func<Type2, object>>>(x => x.Prop1, x => x.Prop1),
        new Tuple<Expression<Func<Type1, object>>, Expression<Func<Type2, object>>>(x => x.Prop2, x => x.Prop2)
    };

foreach (var prop in propMap)
{
    if (prop.Item1.Compile()(type1) != prop.Item2.Compile()(type2))
    {
        ParameterExpression valueParameterExpression = Expression.Parameter(typeof(object));

        // This handles nullable types
        Expression targetExpression = prop.Item1.Body is UnaryExpression ? ((UnaryExpression)prop.Item1.Body).Operand : prop.Item1.Body;

        var assign = Expression.Lambda<Action<Type1, object>>(
            Expression.Assign(targetExpression, Expression.Convert(valueParameterExpression, targetExpression.Type)),
            prop.Item1.Parameters.Single(),
            valueParameterExpression);

        Action<Type1, object> setter = assign.Compile();
        setter(type1, prop.Item2.Compile()(type2));
    }
} 
```

这适用于可空类型（如评论）。我现在知道 Expression，但如果有人对此代码有任何改进，请随时提出建议！

# jboss7.x - RESTeasy、EJB 和 @Context 对象注入

> ID：12821328
> 
> 赞同：3
> 
> 时间：2012-10-10T14:06:31.463
> 
> 标签：jboss7.x, resteasy, ejb-3.1

我一直在用 Glassfish 开发一个小型 Java EE 应用程序。它基本上是一个 RESTful 服务应用程序。它是一个将 RESTful 服务作为 EJB 开发的 Web 应用程序。整个过程是使用 Netbeans 向导创建的，并且在 Glassfish 3.1.1 上一切正常。

我尝试在 JBoss 7.1.1 上部署应用程序，问题就出现了。我尝试使用 Jersey 并且一切正常，但持久性单元没有正确注入 EJB。我将应用程序转换为通常包含在 ear（war、ejb-jar、ear）中的完整 Java EE 应用程序，并在 web.xml 中配置 RESTEasy 以使用 EJB。现在一切正常，但使用@Context 注入 javax.ws.rs.core.HttpHeaders、javax.ws.rs.core.Request 等实例不起作用。字段始终为空。

令人沮丧的是，在每一步中，我都会发现 RESTeasy 存在问题。

这是我的 web.xml 的精简版：

```
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>resteasy.jndi.resources</param-name>
        <param-value>java:module/CountryFacadeREST</param-value>
    </context-param>
    <context-param>
      <param-name>resteasy.servlet.mapping.prefix</param-name>
      <param-value>/webresources</param-value>
   </context-param>
    <listener>
        <listener-class>org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap</listener-class>
    </listener>
    <servlet>
        <servlet-name>RESTeasy</servlet-name>
        <servlet-class>org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>RESTeasy</servlet-name>
        <url-pattern>/webresources/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

这是一个示例 EJB：

```
package com.mt.rest.service;

import java.util.List;

import javax.ejb.Stateless;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.ws.rs.Consumes;
import javax.ws.rs.DELETE;
import javax.ws.rs.GET;
import javax.ws.rs.POST;
import javax.ws.rs.PUT;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;
import javax.ws.rs.core.Context;
import javax.ws.rs.core.HttpHeaders;
import javax.ws.rs.core.Request;
import com.mt.entity.Country;

/**
 * 
 * @author mt
 */
@Stateless
@Path("country")
public class CountryFacadeREST extends AbstractFacade<Country> {
    @PersistenceContext(unitName = "myparkPU")
    private EntityManager em;

    @Context
    HttpHeaders requestHeaders;

    @Context
    Request request;

    public CountryFacadeREST() {
        super(Country.class);
    }

    @POST
    @Override
    @Consumes({ "application/json" })
    public void create(Country entity) {
        super.create(entity);
    }

    @PUT
    @Override
    @Consumes({ "application/json" })
    public void edit(Country entity) {
        super.edit(entity);
    }

    @DELETE
    @Path("{id}")
    public void remove(@PathParam("id") Integer id) {
        super.remove(super.find(id));
    }

    @GET
    @Path("{id}")
    @Produces({ "application/json" })
    public Country find(@PathParam("id") Integer id) {
        return super.find(id);
    }

    @GET
    @Produces({ "application/json" })
    public List<Country> findAll() {
        return super.findAll();
    }

    @GET
    @Path("{from}/{to}")
    @Produces({ "application/json" })
    public List<Country> findRange(@PathParam("from") Integer from,
            @PathParam("to") Integer to) {
        return super.findRange(new int[] { from, to });
    }

    @GET
    @Path("count")
    @Produces("text/plain")
    public String countREST() {
        return String.valueOf(super.count());
    }

    @Override
    protected EntityManager getEntityManager() {
        return em;
    }
} 
```

我遵循了 RESTeasy 文档中的以下建议，但没有任何改变：

> 3.6\. 修补 JBoss AS 7 Resteasy 与 JBoss AS 7 捆绑在一起。您可能需要在 AS7 中升级 Resteasy。Resteasy 发行版附带一个名为 resteasy-jboss-modules-2.3.4.Final.zip 的 zip 文件。在 JBoss AS 7 的顶层目录（包含 modules/ 目录的目录）中，解压缩此文件。在此之后，您应该使用最新最好的 Resteasy 进行修补。

我提供了一个空的 web.xml 并创建了一个应用程序类：

```
package com.mt.rest.service;

import javax.ws.rs.ApplicationPath; 
import javax.ws.rs.core.Application;

@ApplicationPath("/webresources") 
public class ApplicationConfig extends Application { } 
```

但 @Context 对象注入仍然失败。请注意，持久性单元已正确注入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T21:44:59.460

好的，如果有 @Stateless 注释，似乎 @Context 对象不会被注入：

[这是打开的实际错误](https://issues.jboss.org/browse/RESTEASY-532)

因此，一种解决方案是将 RESTful 服务定义为 POJO，并使用不起作用的 @EJB 注释注入 EJB。为了使其工作，您必须使用 @Named 注释将您的服务定义为 EJB 或托管 CDI 托管 bean。

[这是 JBoss 论坛上的实际答案](https://community.jboss.org/thread/165368)

最后它起作用了......

# javascript - 是否有 Javascript ONC RPC 库

> ID：12821329
> 
> 赞同：1
> 
> 时间：2012-10-10T14:06:32.607
> 
> 标签：javascript, rpc

有没有人在 Javascript 中实现[ONC RPC ？](http://en.wikipedia.org/wiki/Open_Network_Computing_Remote_Procedure_Call)我需要这个来与遗留服务器系统通信，我想知道我是否可以直接获取数据，而不是通过 Java 或 C 中的另一台服务器进行代理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T10:34:16.680

我对javascript很感兴趣。专门与nodejs一起服务。

客户端这是不可能的，因为浏览器中的 javascript 只能说 http，所以你只能在服务器端实现它。

如果您想在服务器端使用 javascript，nodejs 可以在没有任何外部依赖项的情况下执行此操作，但遗憾的是尚未为此特殊目的制作模块。（据我所知）

如果你这样做，我建议你看看 socket.io 以便在你的浏览器和服务器之间进行实时通信。这种方式制作服务器端代理不会造成太大的过载。

# mysql - MySQL select语句，查询1列匹配的2个表

> ID：12821338
> 
> 赞同：0
> 
> 时间：2012-10-10T14:07:01.103
> 
> 标签：mysql, join

我有以下 MySQL

```
 $tutorial = $database->query(
        'SELECT ' . 
            'tutorial.*, ' . 
            'apps.*'.
                'FROM ' . 
                    $database->db_prefix . 'tutorial, ' . 
                    $database->db_prefix . 'apps ' . 
                        'WHERE ' .
                            'apps.title = "' . $name . '" AND apps.id = tutorial.app AND tutorial.relation = "' . $user['id'] . '"'
    ); 
```

我想获取apps.title 等于$name 的行，然后根据检索到的应用程序ID 获取所有教程。这充当了两个表之间的链接。

上面的方法能用吗？

尤其：

```
'apps.title = "' . $name . '" AND apps.id = tutorial.app AND tutorial.relation = "' . $user['id'] . '"' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:08:55.330

不，这行不通。请参阅 Mysql [JOIN](http://dev.mysql.com/doc/refman/5.0/en/join.html)语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:11:33.483

> 我想获取apps.title 等于$name 的行，然后根据检索到的应用程序ID 获取所有教程。

从您在上面发布的查询中，我认为您可以使用以下字段`JOIN`的两个表：`app`

```
SELECT t.*
FROM tutorials t 
INNER JOIN apps a ON t.app = a.app
WHERE a.title = $name AND t.relation = $user['id'] 
```

或者：

```
SELECT 
  tutorial.*
FROM tutorial
WHERE toutorial.app IN
(
    SELECT app FROM apps WHERE apps.title = $name AND app IS NOT NULL
) AND tutorial.relation = $user['id'] 
```

# c++ - switch 语句 C++ 和 glut

> ID：12821341
> 
> 赞同：0
> 
> 时间：2012-10-10T14:07:07.633
> 
> 标签：c++, switch-statement, keypress, glut

我有这个功能，当我按下时我在和`a`之间切换。当我运行它开始的程序时，当我按下它时切换到. 但是我希望它在按下时继续在两者之间切换。`GL_LINE``GL_FILL``GL_FILL``a``GL_LINE``a`

有人可以告诉我哪里出错了。

```
void keyPressed (unsigned char key, int x, int y) { 
switch (key){
case 'a':
    bool f = false;
    if(!f){
        glPolygonMode(GL_FRONT,GL_LINE);
        glPolygonMode(GL_BACK, GL_LINE);

    }else{
        //bOutline=false;
        glPolygonMode(GL_FRONT,GL_FILL);
        glPolygonMode(GL_BACK, GL_FILL);
    }
    f=!f;
    break;

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:13:08.407

我认为您必须在 f 处理的两种状态之间切换，因此您需要在外部范围内定义 f 或将其定义为像这样的静态变量

```
static bool f = false; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T14:09:28.857

`f`每次调用时都在函数内部定义 bool ，因此您应该将其定义为全局变量，我不建议这样做，或者将其定义为静态变量：

```
static bool f = false; 
```

您还可以使用`glGet`with 参数`GL_POLYGON_MODE`来查找正面和背面的当前模式，例如：

```
GLint polyMode[2];
//returns front and back modes
glGetIntegerv(GL_POLYGON_MODE, polyMode);

switch(polyMode[0]) { 
    case GL_LINE:
        //add code
        break;
    case GL_FILL:
        //add code
        break;
    case GL_POINTS:
        //add code
        break;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T14:13:54.483

您应该将 f 定义为静态变量，以在函数调用之间保持其值。静态布尔 f = 假；或者只是让它成为一个全局变量

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T14:18:46.093

你真的需要`f`吗？在我看来，您想要在两个值之间切换，所以为什么不这样：

```
GLint previous[2];
glGetIntegerv( GL_POLYGON_MODE, previous );
glPolygonMode( GL_FRONT, previous[0] == GL_LINE ? GL_FILL : GL_LINE);
glPolygonMode( GL_BACK, previous[1] == GL_LINE ? GL_FILL : GL_LINE); 
```

# java - 提示保存对话框的更简单方法

> ID：12821349
> 
> 赞同：0
> 
> 时间：2012-10-10T14:07:15.083
> 
> 标签：java, swing

我有一个程序，当按下编辑按钮时，窗口进入“编辑模式”，您可以随意更改字段，然后当您按下保存按钮时，它会保存您所做的事情。我想要的方式，如果您处于编辑模式，然后按另一个按钮，我想要一个对话框来询问您是否要保存（是/否）。

现在，如果它处于“编辑”模式，我会提示保存，如果用户按下是，它将保存文件，如果按下其他任何东西，它将执行按钮应该执行的操作。

这就是我目前所拥有的。我想知道是否有更简单的方法来执行此操作，而不是将按钮的操作放在那里两次。

```
if (editing) {
        save = JOptionPane.showConfirmDialog(this, "Would you like to save?", "Save",
            JOptionPane.YES_NO_OPTION);

        if (save == 0) {
            saveFile();
        } else {
            //Button actions here...
        }
} else {
    //Button actions here...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:12:43.893

这是正确的方法，但您应该比较`showConfirmDialog()`与`JOptionPane`constant 的结果：

```
if (save == JOptionPane.YES_OPTION) {
  // ...
} 
```

不仅其他人可读性更好，而且如果有一天更改了常量，您的代码仍然可以工作（但是不太可能）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:20:42.080

您可以将 Button 操作放在另一种方法中，如下所示：

```
private void buttonActions() {
    // Button actions here...
} 
```

进而

```
if (editing) {
    save = JOptionPane.showConfirmDialog(this, "Would you like to save?", "Save",
        JOptionPane.YES_NO_OPTION);

    if (save == JOptionPane.YES_OPTION) {
        saveFile();
    } else {
        buttonActions();
    }
} else {
    buttonActions();
} 
```

# java - 如何模仿Android AlertDialog的布局

> ID：12821351
> 
> 赞同：0
> 
> 时间：2012-10-10T14:07:20.567
> 
> 标签：java, android, user-interface

Android的`AlertDialog`API 提供了一种简单的方法，`Dialog`可以使用一个、两个或三个按钮来生成漂亮的外观。通过“漂亮的外观”，我的意思是按钮在底部布置得很好，宽度相等，并且它们没有边框和灰色背景作为通常的`Button`对象。这在某些情况下有点受限，事实上，我需要 4 个按钮。

我想问是否有办法产生相同的用户界面。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:26:11.963

创建一个扩展警报对话框的类，然后放置任意数量的按钮。但我相当确定自定义警报对话框必须使用布局充气器充气它的视图，而不是简单地使用 setcontentView

# nginx - 在 Nginx 中重写规则（绕过）IP

> ID：12821353
> 
> 赞同：1
> 
> 时间：2012-10-10T14:07:26.353
> 
> 标签：nginx, rewrite

我有一个重写规则如下：

```
if ( $request_uri ~ https://subdomain.domain.com/abc/xyzdirector/login.do ) {
return    444;
} 
```

现在这工作正常，但是，我想对这个规则有一个例外。我想让IP ABCD 通过，即这个IP 不应该受这个规则的约束。如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T19:08:33.217

[http://wiki.nginx.org/HttpCoreModule#Variables](http://wiki.nginx.org/HttpCoreModule#Variables)包括以下内容：

```
$remote_addr
The address of the client. 

$binary_remote_addr
The address of the client in binary form; 
```

笔记：

[http://nginx.org/en/docs/http/ngx_http_rewrite_module.html#if](http://nginx.org/en/docs/http/ngx_http_rewrite_module.html#if)指示 if 语句的允许上下文作为服务器和位置

换句话说，你不能嵌套 if 语句，所以你会得到如下内容：

```
location /abc/xyzdirector/login.do { 
  if ( $remote_addr != <allowed adress> ) { return 444;}       
  #if you get here it was an allowed adress so add config to server the request.
} 
```

# c# - 我在我的 sqlConnection 中发现了哪些奇怪的属性？

> ID：12821354
> 
> 赞同：8
> 
> 时间：2012-10-10T14:07:27.730
> 
> 标签：c#, .net, sqlconnection

在调查 2005 年一个非常枯燥且存在安全漏洞的项目时，我调试到连接挂起。
检查对象，找到服务器名称，我遇到了这三个小属性：

*   *`IsShiloh`*
*   *`IsKatmaiOrNewer`*
*   *`IsYukonOrNewer`*

那些成员是什么，为什么他们的名字如此**令人敬畏？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T14:09:57.253

我相信这些都是不同版本的 SQL Server 的不同代号。[SQL Server](http://en.wikipedia.org/wiki/Microsoft_SQL_Server#Genesis)的Wikipedia 文章列出了不同的代号：

```
8.0     2000    SQL Server 2000     Shiloh
9.0     2005    SQL Server 2005     Yukon
10.0    2008    SQL Server 2008     Katmai 
```

此外，只是为了好玩，代号[遵循国家公园命名模式](http://dbfriend.blogspot.com/2010/10/code-names-for-sql-server.html)。

# jquery - jQuery 1.7 - 悬停不起作用

> ID：12821356
> 
> 赞同：0
> 
> 时间：2012-10-10T14:07:35.867
> 
> 标签：jquery, hover, jquery-hover

我有一个代码，一个简单的悬停效果，在 jQuery 1.4 中运行良好，但在 jQuery 1.7 中无法运行

这是代码：

```
jQuery(document).ready(function() {
    /* When a thumbnail is hovered over do shine */
    $('.large_thumb').hover(function() {
        $(this).find(".large_thumb_shine").css("background-position", "-167px 0");
        $(this).find(".large_thumb_shine").stop().animate({
            backgroundPosition: '167px 0'
        }, 600);
    }, function() {
        $(this).find(".large_thumb_shine").stop().animate({
            backgroundPosition: '167px 0'
        }, 600);
    });
});​ 
```

它应该做什么：

`bg-position`在`onmouseover`. _ 因此，不应`onmouseout`在第二个功能上重复该效果。

出于某种原因，这个超级基本代码在最新的 jQuery 1.7 中无法使用，但在 1.4 中仍然可以使用。

我已经阅读了文档并且似乎使用了正确的方法，悬停。我的代码中的问题似乎在哪里？

编辑：

jsfiddle

[http://jsfiddle.net/3QRGD/](http://jsfiddle.net/3QRGD/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:46:55.773

您可以尝试使用[`step`](http://api.jquery.com/animate/#animate-properties-options)带有“无用”CSS 属性的 jQuery Animate 函数（即边框间距，您可能永远不会使用但不会影响布局的东西）：

演示：http: [//jsfiddle.net/SO_AMK/tTddS/](http://jsfiddle.net/SO_AMK/tTddS/)

jQuery：

```
jQuery(document).ready(function() {

    /* When a thumbnail is hovered over do shine */
    $('.large_thumb').hover(function() {
        var shine = $(this).find(".large_thumb_shine");

        $(shine).css("background-position", "-167px 0");
        $(shine).stop().animate({
            "border-spacing": -167
        }, {
            step: function(now, fx) {
                $(shine).css("background-position", now + "px 0px");
            },
            duration: 600
        });

    }, function() {
        var shine = $(this).find(".large_thumb_shine");

        $(shine).stop().animate({
            "border-spacing": -167
        }, {
            step: function(now, fx) {
                $(shine).css("background-position", now + "px 0px");
            },
            duration: 600
        });
    });
});​ 
```

# php - PHP echo 语句从包含 DIV 元素中转义

> ID：12821357
> 
> 赞同：1
> 
> 时间：2012-10-10T14:07:35.710
> 
> 标签：php, html, dom, echo

背景：我正在为 WordPress 3.4.2 编辑一个自定义管理页面，这是我正在制作的插件的一部分。

我的 HTML 中有一小段 PHP 代码，用于检查变量是否存在，如果它有值则打印它：

```
<div id='ajax-response'>
    <?php
    if(isset($_infos) && !empty($_infos)){
        echo $_infos;
    }
    ?>
</div> 
```

但是，当页面以意味着变量具有值的方式运行时，输出实际上不在该 #ajax-response 内部，`<div>`而是直接在其上方，如下所示：

```
<div id="message" class="updated fade"><p>Download display details updated.</p></div>
<div id='ajax-response'></div> 
```

#ajax-response 的全部意义`<div>`在于包含来自页面本身和任何 AJAX 调用的所有反馈，因此它们都以相同的样式显示在一起 - 并且都可以轻松地从页面中删除 - 所以这个很烦人。

最奇怪的是，当我查看源代码时，`<div>`它应该在 #ajax-response 中，但在 Chrome 的检查器中，当被 Javascript 引用时，它被视为在 .ajax 响应之外`<div>`。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:35:48.340

我不确定，但请检查 php 文件，该文件为您的 javascript 文件提供输出。或者在替换ajax-responce div的内容之前尝试js文件中的alert（来自php文件的响应）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T18:14:14.073

我知道这个话题已经死了，但是我写的几段代码遇到了完全相同的问题。是 ECHO 导致了问题。当我将我的函数交换为 RETURN 而不是 ECHO 时，它立即修复了它。

# image-processing - 跳转到 dicom 系列中的指定位置 (ImageJ)

> ID：12821360
> 
> 赞同：0
> 
> 时间：2012-10-10T14:07:38.397
> 
> 标签：image-processing, imagej

我需要查看 CT 扫描中的特定点（我得到了一个表示分割的掩码，所以我知道我感兴趣的特征的坐标（以毫米为单位））。这就是我目前在 ImageJ 中所做的事情：

*   File/Import/Image Sequence，我选择感兴趣的文件夹中的第一个dcm文件，然后我导入堆栈
*   我知道我的兴趣点在 x=10, y=5, z=20 [mm]。所以我把光标放在我的图像上，用鼠标滚轮向下滚动堆栈，直到我在 ImageJ 窗口中看到 z=20，然后移动光标直到我匹配其他坐标。

有没有办法自动跳转到指定位置对应的切片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:11:10.203

Yes. I would either

1.  Write a Plugin in Java
2.  Write a macro

I'd prefer Java because it provides more options when compared to the macro language.

In Java the code would be

```
imp.setSlice(20);
int poi=imp.getProcessor().getPixelValue(10,5); //int I assume but could be double 
```

Although this is a very simple Plugin so you could also do the same in the macro language easily

# objective-c - 不能在带有 Objective-C++ 代码的 c++ 类中使用 dispatch_sync

> ID：12821364
> 
> 赞同：3
> 
> 时间：2012-10-10T14:07:47.427
> 
> 标签：objective-c, ios, grand-central-dispatch, objective-c++, avcapture

我需要在继承的 C++ 类中使用 Objective-C++ 代码，该类与 iPhone 摄像头的视频录制一起工作（`CMSampleBufferRef`通过另一个 native-objective-c 类`Wrapper`）`CMSampleBufferDelegate`。

`AVCaptureVideoOutput`我有它自己的作品，`dispatch_queue_t callbackQueue`所以，当我想从我的`Wrapper`班级获得最后一帧时，我需要锁定它`callbackQueue`以使其等到复制完成。

据我所知，它已完成`dispatch_sync`，同步`captureOutput.callbackQueue`. 但我无法让这段代码工作：

```
// .mm
frame_t MyCppClass::getLastFrame()
{
    dispatch_sync(pCaptureVideoDataOutput.sampleBufferCallbackQueue, ^{ // error: no matching function for call to 'dispatch_sync'

        CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(wrapperInstance->currentBuffer);
        CVPixelBufferLockBaseAddress(imageBuffer,0);

        // doing copying frame data from buffer...

        CVPixelBufferUnlockBaseAddress(imageBuffer, 0);
    }); // error: control may reach end of non-void block

    return frame;
}

// .h
@interface Wrapper : NSObject <AVCaptureVideoDataOutputSampleBufferDelegate> {
  CMSampleBufferRef currentBuffer;
}
@end

// .mm
@implementation Wrapper
- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection {
    // doing copying to currentBuffer
}
@end 
```

编辑：

当我改为

```
dispatch_sync(pCaptureVideoDataOutput.sampleBufferCallbackQueue, (dispatch_block_t)^{ 
```

它修复了第一个错误，但第二个仍然在这里..

被困住了..任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T15:04:30.077

我想到了！

我`return`在街区里有一些紧急声明。我认为它会返回函数，但它返回块......所以编译器是正确的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T14:44:45.387

错误：

> 错误：没有匹配的函数调用“dispatch_sync”

表示函数原型可能不可见。确保在 .mm 文件中包含 libdispatch 的标头...

```
#include <dispatch/dispatch.h> 
```

第二个错误：

> 错误：控制可能到达非空块的末尾

是因为您的函数被声明为返回 a`frame_t`但它没有返回语句。

# php - 在 MySQL 中保存搜索 POST 变量

> ID：12821365
> 
> 赞同：0
> 
> 时间：2012-10-10T14:07:48.290
> 
> 标签：php, html, mysql, post

我正在开发一个网站，用户可以在其中选择他们的城市（从一长串列表中）、一项活动（同样是一个长长的列表）以及一定程度的专业知识。之后，该网站会根据他们的选择向他们展示当地的活动。我有超过 100 个 POST 变量（并且正在添加更多变量）。如何在 MySQL 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:18:01.427

是的，你有正确的想法。创建一个表并存储您要保存的每个变量。

从您选择的任何脚本语言发布任何变量，数据库语句将如下所示：

```
'INSERT INTO `your_table_name` (`field_1`,`field_2`) VALUES ('$post1','$post2'); 
```

随着信息的增长，您可以添加更多字段。这将是开始进入 mysql 的最佳方式。当然，这个答案是最简单的解决方案。我建议你阅读所有可以用 mysql 做的有趣和更复杂的事情。

更有效的是我会这样做：

对您的帖子变量进行分类/分类，并创建多个表格，将特定页面中的相似事物或数据分组。在组的主表上为您的行创建一个自动递增的主 ID，然后根据需要加入您的表。这有点高级，所以我建议您将当前正在使用的几个字段添加到表格中，当您需要开始添加更多字段时，请查看以下主题：

规范化： [http ://en.wikipedia.org/wiki/Database_normalization](http://en.wikipedia.org/wiki/Database_normalization)

主键、连接、存储过程等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:13:18.457

您只有几个变量（城市、活动、专业知识）。使用会话。

这是 PHP 中会话的链接（[会话](http://php.net/manual/en/features.sessions.php)）

# visual-c++-2012 - VC++ 2012：如何将 version.inc（单独维护）中的版本信息包含到 .rc 文件中

> ID：12821369
> 
> 赞同：9
> 
> 时间：2012-10-10T14:08:01.193
> 
> 标签：visual-c++-2012

**摘要：**通过预处理器宏在单独维护中定义了版本详细信息`version.inc`......如何将宏值包含到资源版本定义块中？

我的`version.inc`文件存储在 UTF-8 中（即纯 ASCII 在这种情况下）。其完整内容如下（`APS_`这里的前缀与应用的真实名称有关，`.aps`与资源编译器生成的文件无关）：

```
#define APS_MAJORNUMBER          4
#define APS_MINORNUMBER          5
#define APS_BUILDNUMBER          0
#define APS_MODIFICATIONNUMBER   0
#define APS_BUILDEXT              "wx"
#define APS_DATEYEAR          2012
#define APS_DATEMONTH           10
#define APS_DATEDAY              4 
```

Visual Studio 2012 C++ 似乎对资源脚本文件 ( `app.rc`) 比 Visual Studio 2010 更挑剔。我注意到的第一件事是，在手动编辑时，我必须保留 UTF-16 编码。你能证实吗？有这方面的文件吗？

`app.rc`说看起来像这样的版本块：

```
/////////////////////////////////////////////////////////////////////////////
//
// Version
//

VS_VERSION_INFO VERSIONINFO
 FILEVERSION 1,0,0,1
 PRODUCTVERSION 1,0,0,1
 FILEFLAGSMASK 0x3fL
#ifdef _DEBUG
 FILEFLAGS 0x1L
#else
 FILEFLAGS 0x0L
#endif
 FILEOS 0x40004L
 FILETYPE 0x1L
 FILESUBTYPE 0x0L
BEGIN
    BLOCK "StringFileInfo"
    BEGIN
        BLOCK "040504b0"
        BEGIN
            VALUE "CompanyName", "TODO: <Company name>"
            VALUE "FileDescription", "TODO: <File description>"
            VALUE "FileVersion", "1.0.0.1"
            VALUE "InternalName", "app.exe"
            VALUE "LegalCopyright", "Copyright (C) 2012"
            VALUE "OriginalFilename", "app.exe"
            VALUE "ProductName", "TODO: <Product name>"
            VALUE "ProductVersion", "1.0.0.1"
        END
    END
    BLOCK "VarFileInfo"
    BEGIN
        VALUE "Translation", 0x405, 1200
    END
END 
```

在 Visual Studio 的早期版本（2005 和 2010）中，我能够拥有这样的相关信息`version.rc2`：

```
/////////////////////////////////////////////////////////////////////////////
//
// Version
//

#include "version.inc"

#define STR(value) #value
#define STRINGIZE(value) STR(value)
#define APS_FULLVERSION_STR \
  STRINGIZE(APS_MAJORNUMBER) "." \
  STRINGIZE(APS_MINORNUMBER) "." \
  STRINGIZE(APS_BUILDNUMBER) "." \
  STRINGIZE(APS_MODIFICATIONNUMBER)

VS_VERSION_INFO VERSIONINFO
 FILEVERSION APS_MAJORNUMBER,APS_MINORNUMBER,APS_BUILDNUMBER,APS_MODIFICATIONNUMBER
 PRODUCTVERSION APS_MAJORNUMBER,APS_MINORNUMBER,APS_BUILDNUMBER,APS_MODIFICATIONNUMBER
 FILEFLAGSMASK 0x3fL
#ifdef _DEBUG
 FILEFLAGS 0x29L
#else
 FILEFLAGS 0x28L
#endif
 FILEOS 0x4L
 FILETYPE 0x1L
 FILESUBTYPE 0x0L
BEGIN
    BLOCK "StringFileInfo"
    BEGIN
        BLOCK "000004b0"
        BEGIN
            VALUE "Comments", "A fairly useful tool named APS"
            VALUE "CompanyName", "The company name"
            VALUE "FileDescription", "app"
            VALUE "FileVersion", APS_FULLVERSION_STR
            VALUE "InternalName", "aps"
            VALUE "LegalCopyright", "Copyright © 1993-" STRINGIZE(APS_DATEYEAR)
            VALUE "OriginalFilename", "app.exe"
            VALUE "PrivateBuild", ""
            VALUE "ProductName", "APS of the version 4"
            VALUE "ProductVersion", APS_FULLVERSION_STR
            VALUE "SpecialBuild", APS_BUILDEXT
        END
    END
    BLOCK "VarFileInfo"
    BEGIN
        VALUE "Translation", 0x0, 1200
    END
END 
```

然后通过手动编辑将`version.rc2`其包含在其中。但是，我无法使用 Visual Studio 2012 项目和资源文件重复该过程。我可能犯了一些我看不见的错误。这种方法是否也适用于 Visual Studio 2012？`app.rc``app.rc`

感谢您的时间和经验，

彼得

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-12T08:09:39.090

这是通过 Visual Studio 2012 (C++, IDE) 实现的方法。首先，似乎所有文件（`app.rc`,`version.rc2`包含要包含在 中的版本部分`app.rc`，*以及`version.inc`*具有单独维护的值 [包含在`version.rc2`] 中的 ）*必须以 UTF-16 存储*- 与早期版本的 Visual Studio 不同。然后我能够在 Visual Studio 2012 中重复相同的方法。

但是，您不需要`app.rc`手动编辑该文件。您可以使用 IDE 执行以下步骤：

*   打开项目 ( `App`) 并切换到*资源视图*选项卡。
*   展开`App`项目，展开它`app.rc`，然后展开`Version`文件夹。您可以看到该`VS_VERSION_INFO`项目。
*   标记该`VS_VERSION_INFO`项目并按键盘上的 Delete 键。该项目及其上层`Version`文件夹消失。
*   鼠标右键单击该`app.rc`文件夹，然后选择*Resource Includes...*。将出现具有相同名称和三个输入窗格的对话框。

![资源包括对话框](../Images/53352fd95d82998ecdd595e2de89c839.png)

*   专注于名为*Compile-time directives:*的底部窗格，并在那里编写`#include "version.rc2"`。（该文件不能有`.rc`扩展名，但`.rc2`很好，并在 MSDN 文档的其他地方推荐。）
*   按*OK*，然后保存所有文件（也保存修改过的文件`app.rc`）。

这些步骤的结果是您将看不到资源树中的`Version`文件夹和项目（请参阅*资源视图*选项卡）；但是，上面提到的构造部分（存储在 中）被编译到应用程序资源中。`VS_VERSION_INFO`*`Version``version.rc2`*

 *`app.rc`从技术上讲，在这些步骤之后可以找到文件的以下部分：

```
3 TEXTINCLUDE 
BEGIN
    "#include ""version.rc2""\r\n"
    "\0"
END 
```

...

```
#ifndef APSTUDIO_INVOKED
/////////////////////////////////////////////////////////////////////////////
//
// Generated from the TEXTINCLUDE 3 resource.
//
#include "version.rc2"

/////////////////////////////////////////////////////////////////////////////
#endif    // not APSTUDIO_INVOKED 
```

欢迎任何加强主题的建设性意见，并将+1-ed :)

过得愉快，

彼得*

# javascript - Node.js 脏了我如何从 [Object object] 获取数据？

> ID：12821370
> 
> 赞同：3
> 
> 时间：2012-10-10T14:08:01.060
> 
> 标签：javascript, node.js, node-dirty

我如何从中获取数据`[Object object]`？

这是我正在尝试做的一个例子。

```
// Get data with dirty
var data = db.get('/htmltest')

// My test.db file
{"key":"foo","val":"barwhat?"}
{"key":"/htmltest","val":{"title":"Html Test","content":"<span>This is HTML</span>"}}

// the console.log gives me [Object Object]
// How do I get it to show the content of title (Html Test)
console.log(data); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:59:30.713

您可以做的另一件事是使用`util` [检查功能](http://nodejs.org/api/util.html#util_util_inspect_object_showhidden_depth_colors)来帮助查看您的数据以进行调试。

```
var util = require('util');
var data = db.get('/htmltest');

console.log(util.inspect(data)); 
```

同样，这仅对调试和检查对象的内容有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T14:15:23.530

根据[文档](https://github.com/felixge/node-dirty)，该`get`方法返回给定键的值。在这种情况下，您应该能够`title`像这样访问该属性：

```
// Get data with dirty
var data = db.get('/htmltest')

// My test.db file
{"key":"foo","val":"barwhat?"}
{"key":"/htmltest","val":{"title":"Html Test","content":"<span>This is HTML</span>"}}

// the console.log gives me [Object Object]
// How do I get it to show the content of title (Html Test)
console.log(data.title); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T07:25:49.930

如果您证明您的`data`变量是 JSON 对象，您还可以轻松解析它并使用`JSON.stringify(data);`

# tcl - TCL写插座

> ID：12821375
> 
> 赞同：0
> 
> 时间：2012-10-10T14:08:17.323
> 
> 标签：tcl, webservice-client

TCL 是否提供监听外部服务器的功能？

我想用基于 TCL 的客户端创建一个套接字，它会听不基于 TCL 的服务器端。在一般情况下，我将发送 XML (SOAP) 消息并等待一些响应，这将是某种掩码。

如果 TCL 确实支持此类功能，请帮助我提供一些指向现有 API 或其他帖子的超链接！

任何帮助都是有用的！提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T11:44:26.417

Tcl 确实支持套接字。`socket` [您可以使用命令](http://www.tcl.tk/man/tcl8.4/TclCmd/socket.htm)编写自己的 WS 客户端实现，也可以使用 Tcl [http 包](http://wiki.tcl.tk/1475)或 @Johannes13 建议的[TclSoap](http://tclsoap.sourceforge.net/)库。

# xpages - XPages 扩展库对话框控件和更新“父”文档

> ID：12821376
> 
> 赞同：0
> 
> 时间：2012-10-10T14:08:17.620
> 
> 标签：xpages, xpages-extlib

我有一个带有扩展库中的对话框控件的 XPage。

对话框工作正常——打开，做它需要做的事情，但是，当我尝试更新“父”文档时，它不起作用。

我将 XPage 数据源作为名为 document1 的 Domino 文档。我在阅读后添加了这个： [当我从扩展库对话框中保存文档时，一些值是空白的](https://stackoverflow.com/questions/10016205/when-i-save-a-document-from-an-extension-library-dialog-box-some-values-are-blan)

```
<xp:this.data>
<xp:dominoDocument var="document1" formName="speakerReq"></xp:dominoDocument
</xp:this.data> 
```

在对话框控件上，我有一个搜索按钮，它调用一个 servlet 并返回经过解析并构建到 HTML 表中的 JSON。第一个单元格是一个链接，当单击该链接时，它会从客户端 JavaScript 库中调用一个函数。该功能是使用返回的 JSON 中的值更新“父”文档并关闭对话框。

当我在该函数中仅使用 alert() 语句进行测试时，它可以调用该函数，但是，当我尝试更新“父”文档时，它无法识别。

我试图传递“document1”对象，但是一旦我进入对话框，它就会说它不存在，所以链接失败了。

这是构建链接的代码片段：

```
 // Let's build the row...
        cell = document.createElement("td");
        resultLink = document.createElement("a");
        resultLink.setAttribute("class", "linkText");
        resultLink.setAttribute("href", "#");
        resultLink.setAttribute("onclick", "javascript:updateDocument(document1, '" + bpName + "', '" + bpEmail + "', '" + bpPhone + "', '" + bpTitle + "', '" + bpCountry + "', '" + bpLoc + "');");
        resultLink.appendChild(document.createTextNode(bpName));
        cell.appendChild(resultLink);
        row.appendChild(cell); 
```

如何在客户端获取 document1 对象的句柄，以便更新“父”文档上的这些字段并关闭对话框？

代码：

```
function updateDocument(doc, name, email, phone, job, country, location) {

var thisField;

// Need to update the document with the selected values...
thisField = doc.getElementById("#{id:sr_Name1}");
thisField.value = name;

thisField = doc.getElementById("#{id:sr_Title1}");
thisField.value = email;

thisField = doc.getElementById("#{id:sr_Phone1}");
thisField.value = phone;

thisField = doc.getElementById("#{id:sr_Email1}");
thisField.value = job;

thisField = doc.getElementById("#{id:sr_Location1}");
thisField.value = location + " - " + country;

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:33:07.383

似乎您正在混合 CSJS 和 SSJS。代码片段在浏览器中运行，但您尝试执行服务器端代码。这是行不通的。您需要将数据回发到服务器并在那里处理数据。XPages Wiki 有[一些](http://xpageswiki.com/web/youatnotes/wiki-xpages.nsf/dx/Work_with_events_and_partial_or_full_refresh)您可能会觉得有用的想法。

**澄清**：

经验法则：在浏览器中以 JavaScript 形式出现的任何内容都不能包含 SSJS。所以你可以使用任何 DOM，但不能使用 session、database、document1 等。SSJS 库对 CSJS 是不可见的，所以你不能调用这些方法。您可以在页面中有一个按钮，您可以在其中定义 CSJS 和 SSJS。客户端将首先执行，然后进行刷新（部分或全部）。

上面的代码也是：`getElementById`是 CSJS -> 不能在 SSJS 中使用它，而 doc 是 NotesDocumentDatasource -> 没有 getElementById。

此外：没有“父”元素。对话框只是本地 DOM 的另一部分（这不是 NotesUIWorkspace.dialogbox）。检查 XPagesWiki 以获取示例

# c# - EF5 能否在基于事件的处理中正常工作

> ID：12821377
> 
> 赞同：0
> 
> 时间：2012-10-10T14:08:19.217
> 
> 标签：c#, .net, performance, entity-framework

例如，我有此代码用于事件处理程序

```
public void ONDataArrived ( string data ) 
{
//do some processing and save it to DB using EF 
ctx.Add ( x ) ; 
ctx.SaveChanges ()  ; 

} 
```

如果此事件同时触发几次，EF 是否有可能出错？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:11:34.120

来自实体框架的上下文对象不是线程安全的——因此它会中断。
如果事件将被并行处理，您将需要同步上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:19:00.780

EF 5 可以在几种不同的模型中工作，具体取决于您要如何使用它。有用于使用上下文跟踪实体、自我跟踪实体或 POCO 的模板。对于您的情况，我建议不要保留您的上下文对象。自我跟踪实体可能是您正在寻找的 - 它们在内部存储更新数据库所需的所有信息，而不是依赖上下文来跟踪它。

如果你走自跟踪路线，那么你的 OnDataArrived 方法只会创建一个新的上下文对象并更新实体，这也将解决 weismat 提到的线程问题。

# java - java在匿名类中实现泛型接口

> ID：12821380
> 
> 赞同：13
> 
> 时间：2012-10-10T14:08:27.363
> 
> 标签：java, generics

给定以下界面，

```
 public interface Callback<T> {
    <K, V> T execute(Operation<K, V> operation) throws SomeException;
 } 
```

我将如何在`operation`类型为的新匿名类中实现接口`Operation<String,String>`

例如，这不会编译：

```
 Callback<Boolean> callback = new Callback<Boolean>() {
        @Override
        public Boolean execute(Operation<String, String> operation) {
              return true;
        }
 };
 executor.execute(callback); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T14:20:38.273

方法上的泛型与类泛型参数无关

您需要在方法上重复它们以使其正确，例如

```
Callback<Boolean> callback = new Callback<Boolean>() {
        @Override
        public <X,Y> Boolean execute(Operation<X, Y> operation) {

        }
};
executor.execute(callback); 
```

换句话说，该接口需要一个适用于任何操作参数的执行方法。

如果您想要一个仅适用于特定参数的回调，则需要使它们成为类签名的一部分，例如

```
 public interface Callback<T,K,V> {
    T execute(Operation<K, V> operation) throws SomeException;
 } 
```

那会让你做

```
Callback<Boolean,String,String> callback = new Callback<Boolean,String,String>() {
        @Override
        public Boolean execute(Operation<String, String> operation) {

        }
};
executor.execute(callback); 
```

我看不到获得您想要的东西的途径...除非您开始使用`<? super K,? super V>`or`<? extends K,? extends V>`表格，这可能会限制您太多。

这是您的界面擦除的内容

```
 public interface Callback<T> {
    T execute(Operation<Object, Object> operation) throws SomeException;
 } 
```

然后当你用`T == Boolean`我们实例化时

```
 public interface Callback {
    Boolean execute(Operation<Object, Object> operation) throws SomeException;
 } 
```

这不能由一个

```
 Boolean execute(Operation<String, String> operation) throws SomeException; 
```

方法，因为 in 参数更窄。您可以扩大参数范围并缩小参数范围，但不能另辟蹊径。

这就解释了为什么您可以将返回类型（out 参数）从`Object`更改为 ，`Boolean`因为任何期望 an 的人`Object`都会对 a 感到满意`Boolean`。

相反，我们不能扩大返回类型，因为这会给`ClassCastException`调用该方法并对结果采取行动的任何人提供 a。

方法参数（在参数中）只能扩大。现在方法参数有点复杂，因为 Java 将不同的类型视为不同的方法，所以你可以合法地拥有

```
public interface Callback<T> {
  T execute(Object key, Object value);
}

Callback<Boolean> cb = new Callback<Boolean> {
  @Override
  public Boolean execute(Object k, Object v) { ... }
  // not an @Override
  public Boolean execute(String k, String v) { ... }
} 
```

因为第二种方法有不同的签名。但是你的类被删除为原始类型，`Operation<X,Y>`无论它是`Operation<String,String>``Operation<X,Y>`

你可以做一件事......但它会变得一团糟！

```
public interface StringOperation extends Operation<String,String> {} 
```

那么你可以做

```
Callback<Boolean> cb = new Callback<Boolean> {
  @Override
  public <K,V> Boolean execute(Operation<K,V> o) { ... }
  // not an @Override
  public Boolean execute(StringOperation o) { ... }
} 
```

但请记住，该`execute(Callback<?>)`方法将被调用`<K,V> Boolean execute(Operation<K,V> o)`而不是`Boolean execute(StringOperation o)`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T14:13:46.833

因为你的类名中的类型参数和方法中的类型参数其实是不同的，你可以在下面做。

```
 @Override
    public <K, V> Boolean execute(Operation<K, V> operation)
            throws SomeException {
        return false;
    } 
```

# node.js - 将 node.js 作为 Windows 服务运行

> ID：12821381
> 
> 赞同：1
> 
> 时间：2012-10-10T14:08:30.097
> 
> 标签：node.js, windows-services

如何配置[WinSer](http://joseoncode.com/2012/04/06/winser-node-dot-js-applications-as-windows-services)以运行特定的 javascript 文件？我知道我必须在 package.json 中添加以下行：

```
 {
     "name": "MY_SERVICE",
     "scripts": {
      "install-windows-service": "node_modules\\.bin\\winser -i",
      "uninstall-windows-service": "node_modules\\.bin\\winser -r"
    } 
```

我不明白在哪里配置我应该运行的 javascript 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:15:48.390

从与您的 package.json 相同的文件夹中的命令行，运行

```
winser -i 
```

将您的节点应用程序（在同一文件夹中的 server.js 中定义）安装为服务。请注意，如果您在安装 winser 后尚未注销并重新登录，则不会初始化您的 winser.cmd 路径（它需要路径中的 C:\Users\YourName\AppData\Roaming\npm\ 之类的内容。

# django - Django 模板消息解析

> ID：12821388
> 
> 赞同：0
> 
> 时间：2012-10-10T14:08:45.780
> 
> 标签：django

我是 Django 新手，我想知道从 django 模板中的数据解析消息的最佳实践。我的模型中有各种标记，需要用用户友好的消息替换。喜欢：

```
MyModelObject.MyProperty = 'FOO' 
```

因为那是存储在数据库中的内容，但是在模板中，我不能只输出

```
{{ MyModelObject.MyProperty }} 
```

这是'FOO'。我可能想输出类似“这个值是 Foo”的东西。或任何以 'FOO' 为键的字符串。有没有办法在模板或其他支持的框架结构中声明字典？

我宁愿不编写一长串条件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:15:07.820

在您的视图中创建一个字典，将内部返回值映射到用户友好的消息。将此字典传递给您的模板。或者，您可能想调查 django 消息传递框架 - [https://docs.djangoproject.com/en/dev/ref/contrib/messages/](https://docs.djangoproject.com/en/dev/ref/contrib/messages/)

# vb.net - LINQ - 按年和月分组

> ID：12821390
> 
> 赞同：3
> 
> 时间：2012-10-10T14:08:50.910
> 
> 标签：vb.net, linq

我正在尝试编写一个 linq 查询来按年\月对数据表中的数据进行分组。

我已经设法按一个或另一个分组，但不是同时...

```
 Dim q = From p As DataRow In DTCalls.Rows _
                Group By Year = p("DATE").Year _
                Into CALLS = Count(p("CALL_ID")) _
                Select Year, CALLS 
```

如何在同一查询中按年 THEN 月分组\排序？

源数据：

```
DATE                    CALL_ID
2012-05-01 23:52:44   6587
2012-02-03 09:17:41   6562
2012-05-01 06:32:41   6565
2012-02-03 12:47:41   6565
2011-05-31 08:37:41   6511 
```

预期输出：

```
DATE       COUNT
2011-05      1
2012-02      2
2012-05      2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:25:28.023

您需要按两个属性（年+月）的匿名类型进行分组。您还需要`Key`在 VB.NET 中应用关键字。

[匿名类型 (Visual Basic)](http://msdn.microsoft.com/en-us/library/bb384767.aspx)

```
Dim dateGroups =
    From row In table
    Let year = row.Field(Of Date)("DATE").Year
    Let month = row.Field(Of Date)("DATE").Month
    Group row By YearMonth = New With {
        Key .year = year,
        Key .month = month
    } Into DateGroup = Group
    Order By YearMonth.year, YearMonth.month

For Each grp In dateGroups
    Console.WriteLine("Date: {0}-{1} Count:{2}",
                      grp.YearMonth.year,
                      grp.YearMonth.month,
                      grp.DateGroup.Count())
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:17:29.593

您需要创建一个包含这两个值的匿名类型，或者您可以使用元组：

```
Group By Tuple.Create(p("DATE").Year, p("DATE").Month) 
```

# c++ - C++ Visual Studio：使用编译指示进行链接

> ID：12821391
> 
> 赞同：21
> 
> 时间：2012-10-10T14:08:52.300
> 
> 标签：c++, visual-studio-2010, static-linking, dynamic-linking

我遇到了一段使用#pragma comment(lib, "libraryname") 的代码。

为什么使用这种类型的用法而不是仅从属性菜单链接库？在什么情况下需要这种用法？我在使用 C++ [Visual Studio 2010](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_2010)的 Windows 中。

很高兴看到一个需要这种用法的示例。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-10T14:12:53.027

库编写器可以将`#pragma comment(lib, ...)`命令放在公共头 (.h) 文件中。在这种情况下，客户端不需要将此库添加到链接器依赖项列表中。通过在程序中包含一个 h 文件，客户端会自动链接到所需的库。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-10-10T14:10:52.360

经典示例 - 链接不同版本的库：

```
#if CURRENT_VERSION >= 10
     #pragma comment(lib, "thirdPartyLibV2.0.lib")
#else //version < 10
     #pragma comment(lib, "thirdPartyLibV1.0.lib")
#endif 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-10T14:12:33.697

从某种意义上说，它所需要的只是包括自动拉入关联库的头文件。您甚至可以`#ifdef..#endif`根据您的环境有条件地引入正确的库。

当从头开始一个新项目时，并不是每个人都会使用你的 MSVC 项目，仅仅能够`#include`并让它工作就是一个编写良好的库的标志。

# java - 如何获取 JAVA 中的真实类型/mime 类型（如 PHP 中的 finfo\mime_content_type）？

> ID：12821397
> 
> 赞同：5
> 
> 时间：2012-10-10T14:08:57.397
> 
> 标签：java, php, file, mime

> **可能的重复：**
> [在 Java 中获取文件的 Mime 类型](https://stackoverflow.com/questions/51438/getting-a-files-mime-type-in-java)

我正在寻找一些功能/插件，它正在做 finfo\mime_content_type 在 php 中所做的事情。一个例子： [点击这里查看图片](http://lior-portal.co.il//images/MTM0OTg3NzI2Nmxpb3IucmFyLmpwZWc=.jpeg)

但是，如果您将图像下载到您的计算机并**像*.rar*文件**一样打开它（使用win rar 或其他文件），您将看到一个rar 字典，其中包含一个名为“garfild”的文件！

在 PHP 中， finfo 或 mime_content_type 会决定这不是图像**（但其他服务，如 GD 函数，会发现它像图像）**，我正在 JAVA 中搜索类似的东西。非常感谢 :) 对不起我的新手英语，我不是来自讲英语的国家 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:19:16.823

您正在寻找能够识别文件幻数的库，该幻数指示实际文件类型。您可以尝试 jMimeMagic： http: [//sourceforge.net/projects/jmimemagic/](http://sourceforge.net/projects/jmimemagic/)（如[HowTo extract MimeType from a byte[]](https://stackoverflow.com/questions/1915317/howto-extract-mimetype-from-a-byte)中所述）

# ios - Apple 的语音处理音频单元 (kAudioUnitSubType_VoiceProcessingIO) 在 iOS 5.1 上损坏

> ID：12821404
> 
> 赞同：5
> 
> 时间：2012-10-10T14:09:27.253
> 
> 标签：ios, audiounit

我正在为 iPad 编写一个 VOIP 应用程序（目前针对 2&3）。

我最初使用音频单元 API 编写音频代码，带有一个 kAudioUnitSubtype_RemoteIO 单元。这运作良好，但不出所料，回声是一个问题。我尝试通过切换到使用 kAudioUnitSubType_VoiceProcessingIO 单元来使用内置的回声抑制。这在 iOS 6 (iPad 3) 上运行良好，但在 iOS 5.1 (iPad 2) 上的相同代码会在麦克风输入上产生白噪声。

[文档](http://developer.apple.com/library/ios/#documentation/AudioUnit/Reference/AUComponentServicesReference/Reference/reference.html#//apple_ref/c/econst/kAudioUnitSubType_VoiceProcessingIO "文件")只是提到它应该在 iOS 3.0 及更高版本中可用

iOS 版本似乎是这里的重要区别。我尝试在两台 iPhone 4S 上运行该应用程序，一台运行 iOS 6，听起来不错，一台运行 iOS 5.1，听起来像白噪声。

我的 ASBD 如下所示：

```
typedef int16_t sample_t;
#define AUDIO_BUFFER_SAMPLE_RATE 48000
#define FORMAT_FLAGS (kAudioFormatFlagsIsSignedInteger | kAudioFormatFlagsIsNonInterleaved)
#define CHANNELS_PER_FRAME 1

...

const size_t bytes_per_sample = sizeof(sample_t);
const int eight_bits_per_byte = 8;
AudioStreamBasicDescription streamFormat;
streamFormat.mFormatID = kAudioFormatLinearPCM;
streamFormat.mSampleRate = AUDIO_BUFFER_SAMPLE_RATE;
streamFormat.mFormatFlags = FORMAT_FLAGS;

streamFormat.mChannelsPerFrame = CHANNELS_PER_FRAME;
streamFormat.mBytesPerFrame = bytes_per_sample * CHANNELS_PER_FRAME;
streamFormat.mBitsPerChannel = bytes_per_sample * eight_bits_per_byte;

streamFormat.mFramesPerPacket = 1;
streamFormat.mBytesPerPacket = streamFormat.mBytesPerFrame * streamFormat.mFramesPerPacket;
streamFormat.mReserved = 0; 
```

有没有人让 kAudioUnitSubType_VoiceProcessingIO 在 iOS 5.1 上工作？

有谁知道这个 IO 的任何严肃文档？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-12T09:42:48.973

TL;DR 添加`kAudioFormatFlagsIsPacked`到`FORMAT_FLAGS`

我通过一些复杂的路线发现了这一点。这些似乎都没有在任何地方得到很好的记录，但我遇到了这篇关于在 Mac 上使用 IO 的[SO 帖子。](https://stackoverflow.com/questions/10792469/how-to-use-kaudiounitsubtype-voiceprocessingio-subtype-of-core-audio-api-in-ma)提到的一件事是使用“FlagsCononical”。我尝试设置：

```
#define FORMAT_FLAGS kAudioFormatFlagsAudioUnitCanonical 
```

这不起作用，并且对 AudioUnitInitialize 的调用失败，返回码为 29759。我找不到任何关于这意味着什么的文档，但是当我尝试时：

```
#define FORMAT_FLAGS kAudioFormatFlagsCanonical 
```

一切正常！成功！

`kAudioFormatFlagsCanonical`如果您正在为 iPad 构建（因此定义为 ），CoreAudioTypes.h 中的定义`CA_PREFER_FIXED_POINT`是`1`：

```
kAudioFormatFlagsCanonical = kAudioFormatFlagsIsSignedInteger
                           | kAudioFormatFlagsNativeEndian
                           | kAudioFormatFlagIsPacked; 
```

添加`kAudioFormatFlagIsPacked`到我的原始代码后，它起作用了。我添加`kAudioFormatFlagsNativeEndian`了很好的衡量标准。我删除`kAudioFormatFlagsIsNonInterleaved`了，因为无论如何单声道音频都没有必要。我剩下的与`kAudioFormatFlagsCanonical`.

所以我在 iPad 2 (iOs 5.1) 和 iPad 3 (iOS 6.0) 上的设置如下：

*   采样率`48000`
*   1个频道
*   `kAudioFormatFlagsCanonical`
*   `int16_t`样品
*   线性PCM

如果有人有的话，我仍然热衷于这个 IO 的文档，当然，如果这对你有帮助，请不要忘记投票 :)

# python - 使用python从目录中的所有.txt文件中获取行

> ID：12821408
> 
> 赞同：1
> 
> 时间：2012-10-10T14:09:27.970
> 
> 标签：python, find

我在一个目录中有一些 txt 文件，我需要从所有这些文件中获取最后 15 行。我怎么能用python做到这一点？

我选择了这段代码：

```
from os import listdir
from os.path import isfile, join

dir_path= './'
files = [ f for f in listdir(dir_path) if isfile(join(dir_path,f)) ]
out = []
for file in files:
    filedata = open(join(dir_path, file), "r").readlines()[-15:]
    out.append(filedata)
f = open(r'./fin.txt','w')
f.writelines(out)
f.close() 
```

但我收到错误“TypeError：writelines() 参数必须是字符串序列”。我认为这是因为行中的俄罗斯字母。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T14:21:20.270

```
import os
from collections import deque

for filename in os.listdir('/some/path'):
    # might want to put a check it's actually a file here...
    # (join it to a root path, or anything else....)
    # and sanity check it's text of a usable kind
    with open(filename) as fin:
        last_15 = deque(fin, 15) 
```

`deque`将自动丢弃最旧的条目并将最大大小峰值为 15，因此这是仅保留“最后”“n”个项目的有效方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:11:47.890

尝试这个：

```
from os import listdir
from os.path import isfile

for filepath in listdir("/path/to/folder")
    if isfile(filepath): # if need
        last_five_lines = open(filepath).readlines()[-15:]

# or, one line:

x = [open(f).readlines()[-15:] for f in listdir("/path/to/folder") if isfile(f)] 
```

**更新：**

```
lastlines = []
for file in files:
    lastlines += open(join(dir_path, file), "r").readlines()[-15:]
with open('./fin.txt', 'w') as f:
    f.writelines(lastlines) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:17:32.190

```
from os import listdir
from os.path import isfile, join

dir_path= '/usr/lib/something'
files = [ f for f in listdir(dir_path) if isfile(join(dir_path,f)) ]

for file in files:
    filedata = open(join(dir_path, file), "r").readlines()[-15:]
    #do something with the filedata 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T14:31:28.577

希望这可以帮助：

```
import os

current_dir = os.getcwd()
dir_objects = os.listdir(current_dir)
dict_of_last_15 = {}
for file in dir_objects:
    file_obj = open(file, 'rb')
    content = file_obj.readlines()
    last_15_lines = content[-15:]
    dict_of_last_15[file] = last_15_lines
    print "#############: %s" % file
    print dict_of_last_15[file]
    file_to_check.close() 
```

# javascript - 防止用户在输入框中更改令牌

> ID：12821414
> 
> 赞同：0
> 
> 时间：2012-10-10T14:09:51.753
> 
> 标签：javascript, jquery

如何防止使用 javascript 或 jquery 在文本区域内更改某些元素、标记？例如我在输入中有这个字符串

这是普通文本{无法更改 1}。这是更多的文字。{这不能改变 2 }。还有一些文字

如果用户尝试更改大括号内的文本，我想防止这种情况发生。

我想找到标记的开始和停止索引的索引，当用户尝试更改元素时，我会查看它是否在该范围内。

我可以使用其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:14:40.800

您应该构建一个验证文本有效性的正则表达式。在文本区域中的每个`keydown`事件上重新验证正则表达式并通知用户/防止按键。

由于文本也可以通过其他方式（粘贴、自动完成等）进行更改，因此您还应该验证`change`文本区域的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:13:05.233

当页面加载时，您可以使用正则表达式将 {} 之间的所有内容读入数组。然后当表单提交时再次做同样的事情并比较它们以确保它们是相同的。

# assembly - 作业检查：评估以下表达式的 MIPS 指令

> ID：12821415
> 
> 赞同：1
> 
> 时间：2012-10-10T14:09:53.713
> 
> 标签：assembly, mips

假设变量 x 表示的数组是一个从 address 开始的有符号整数数组，`0x10010000`并将表达式的结果放入寄存器`$t0`

```
x[5] + x[8] 
```

我想检查我的答案是如何完成的，或者我哪里出错了？感谢您的任何帮助/反馈。

```
lui  $t1, 0x10010000
ori  $t1, $t1, 0x00010100 
lui  $t2, 0x10010000
ori  $t2, $t2, 0x00001001
add $t0, $t1, $t2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:48:23.830

您的代码中有几个错误：

*   lui 不允许这样大小的立即数。您应该使用伪`li $t1, 0x10010000`指令或两条指令来形成基地址（例如 a`lui`和 an `ori`）。`lui`将高 16 位设置为指令中的中间集，低 16 位将设置为零，`ori`可用于设置低 16 位。但是，在您的示例中，较低的 16 位为零，因此将指令更改`lui $t1, 0x10010000`为即可`lui $t1, 0x1001`。
*   您不是在添加内容，而是添加地址。您应该使用`lw`指令，例如：`lw $t2, 20($t1)`阅读第五个元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:32:07.910

1）我认为错误出现在第二个和第四个语句中。数字 0x00010100 是十进制的 65792。当您尝试访问数组中的第五个元素时，该数字应为 20 或 0b00010100 或 0x14。同样，第四条语句应该是 32 或 0x20。这个答案假设整数的大小是 4 个字节。

2）另外，您只是添加地址，而不是数据。您需要更改代码以从 $t1 和 $t2 寄存器中的地址给出的位置获取数据。由于这是家庭作业，我不想为您更改代码。

# android - 在 Android 中使用 XML 形状设置绘制矩形

> ID：12821416
> 
> 赞同：1
> 
> 时间：2012-10-10T14:09:55.253
> 
> 标签：android, xml, shape, drawrectangle

我有一个问题，我不知道如何解决。如果可以，请你帮助我。在我的应用程序中，我必须创建一个自定义视图扩展视图。在这个视图中，我应该绘制很多矩形，并通过 canvas.drawRect 或 canvas.drawRoundRect 创建它们。很明显。但是我想创建这些矩形的复合设计（带有渐变、角、填充等），并且我想在 XML 中执行这些设置（渐变、角、填充等）。我该怎么做？问题是我在 XML 中确定形状，我只能将此可绘制对象用作背景，但是当我绘制矩形时，我无法为矩形设置背景。也许还有另一种解决问题的方法。我是否可以使用 XML 形状对象不仅将其设置为背景，还可以将其设置为具有 x、y 坐标和宽度、高度的视图对象？

编辑：我可以画矩形：

```
canvas.drawRect(x1, y1, x2, y2, paint); 
```

但我在 XML 中有这样的矩形设置：

```
<shape
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">

<!-- Specify a gradient for the background -->
    <gradient
    android:angle="90"
    android:startColor="#55000066"
    android:centerColor="#FFFFFF"
    android:endColor="#55000066" />

<!-- Specify a dark blue border -->
    <stroke 
    android:width="2dp"
    android:color="#000066" />

<!-- Specify the margins that all content inside the drawable must adhere to -->
    <padding
    android:left="5dp"
    android:right="5dp"
    android:top="5dp"
    android:bottom="5dp" />

<corners
    android:topLeftRadius="10dp"
    android:topRightRadius="10dp"
    android:bottomLeftRadius="10dp"
    android:bottomRightRadius="10dp" />
</shape> 
```

我想将此设置应用于我的矩形。如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T14:39:59.263

您可以从代码中加载和使用 XML 定义的可绘制对象，如下所示：

```
public class CustomView extends View {

    Drawable shape;

    public CustomView(Context context) {
        super(context);
        shape = context.getResources().getDrawable(R.drawable.shape);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        shape.setBounds(left, top, right, bottom);
        shape.draw(canvas)
    }

    // ... Additional methods omitted for brevity

} 
```

# vbscript - 以管理员身份运行批处理文件而不提示输入密码的脚本

> ID：12821419
> 
> 赞同：0
> 
> 时间：2012-10-10T14:10:10.537
> 
> 标签：vbscript

下面的脚本可以按预期在 Windows XP 上运行。脚本 abc.bat 将以管理员身份运行，无需提示输入密码（密码自动提供）。但是相同的脚本在我们的 Windows 7 Box 上不起作用。是否需要进行任何更改？我没有使用 VB 脚本的经验。谢谢！

```
Option Explicit

Const USER               = "administrator"
Const PASS               = "*********"
Const WSNAME_COMMANDLINE = "C:\support\abc.bat"

Dim fso         : Set fso = CreateObject("Scripting.FileSystemObject")
Dim WSHShell    : Set WshShell = CreateObject("WScript.Shell")
Dim WshNetwork  : Set WshNetwork = CreateObject("WScript.Network")
Dim oDic        : Set oDic = CreateObject("Scripting.Dictionary")
Dim objArgs     : Set objArgs = WScript.Arguments
Dim oProcessEnv : Set oProcessEnv = WshShell.Environment("PROCESS")

Dim sPathToRunAs, iReturnCode

sPathToRunAs = oProcessEnv("SystemRoot")&"\System32\runas.exe"
''msgbox sPathtorunas

if Not fso.FileExists(sPathToRunAs) Then : WScript.Quit(1) 'Can't find RunAs

'''msgbox "runas /user:" & USER & " " & CHR(34) & WSNAME_COMMANDLINE & CHR(34)
iReturnCode=WshShell.Run("runas /user:" & USER & " " & CHR(34) & WSNAME_COMMANDLINE & CHR(34), 2, FALSE)

Wscript.Sleep 40                  ' Time for window to open.
WshShell.AppActivate(sPathToRunAs)' Activate the Window
Wscript.Sleep 3
WSHShell.SendKeys PASS & "~"      ' Send the password
Wscript.Sleep 3

''msgbox "done" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:30:39.720

您是否在禁用 UAC（用户帐户控制）的 Windows 7 上尝试了该脚本？

您可以在此处找到有关禁用 UAC 的操作方法：http: [//windows.microsoft.com/en-US/windows-vista/Turn-User-Account-Control-on-or-off](http://windows.microsoft.com/en-US/windows-vista/Turn-User-Account-Control-on-or-off)

如果 UAC 是您的问题的原因，您可以使用 windows 任务调度程序来避免这种情况，就像这里解释的那样：http: [//poundcomment.wordpress.com/2011/03/18/how-to-create-a-whitelist- uac-for-windows-7/](http://poundcomment.wordpress.com/2011/03/18/how-to-create-a-whitelist-uac-for-windows-7/)

# sql - 获取 SQL 结果到变量中

> ID：12821421
> 
> 赞同：3
> 
> 时间：2012-10-10T14:10:23.073
> 
> 标签：sql, sql-server

这是我到目前为止所拥有的。我想将查询结果存储到一个 int 变量中，但到目前为止我得到了 null。执行后，@query 和 @countrow 都为空。任何建议都会很棒。

```
 SET @query = N'select @countrow=count(*) from ' + @tablename 
EXECUTE sp_executesql @query 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:16:51.583

```
DECLARE @i INT, @sql NVARCHAR(512), @tablename varchar(200) = 'tbl'

SET @sql = N'SELECT @i = COUNT(*) FROM '  + @tablename

EXEC sp_executesql 
    @query = @sql, 
    @params = N'@i INT OUTPUT', 
    @i = @i OUTPUT 

PRINT @i 
```

看看[SQL Fiddle](http://sqlfiddle.com/#!3/bdd0a/3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T14:16:27.270

您需要使用`OUTPUT`关键字，类似于：

```
declare @query nvarchar(max)
declare  @countrow int
declare  @tablename varchar(50)

SET @query = N'select @cnt=count(*) from ' + @tablename 
EXECUTE sp_executesql @query, N'@cnt int OUTPUT', @cnt=@countrow OUTPUT

select @countrow as countrow -- to get the result 
```

# c# - 在文件中搜索并将匹配的内容写入另一个文件

> ID：12821426
> 
> 赞同：-1
> 
> 时间：2012-10-10T14:10:51.550
> 
> 标签：c#, stringreader

我有一个大的 txt 文件，想通过它搜索并输出某些字符串，例如，假设两行是：

```
oNetwork.MapNetworkDrive "Q:", xyz & "\one\two\three\four"
oNetwork.MapNetworkDrive "G:", zzz 
```

从这里我想复制和输出`Q:, G:,`到`"\one\two\three\four"`另一个文件。

这样做最有效的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:15:59.030

最终只有一种方法可以读取文本文件。您将不得不逐行解析整个文件以挑选出您关心的部分。

您最好的选择是使用 StreanReader 读取文件（[File.OpenText](http://msdn.microsoft.com/en-us/library/system.io.file.opentext.aspx)是获取文件的好方法）。从那里，只需继续调用 ReadLine 并挑选出您关心的位。

提高效率的主要方法是确保您只需要解析文件一次。保存您关心的所有内容，并且只保存您关心的内容。尽可能多地立即对文件中的信息采取行动，然后将其丢弃——存储的越少越好。不要使用[File.ReadAllText](http://msdn.microsoft.com/en-us/library/ms143368.aspx)，因为它会一次性将整个文件读入内存。

# c++ - 线程中的 QT QTcpServer；如何在退出时关闭监听服务器？

> ID：12821429
> 
> 赞同：1
> 
> 时间：2012-10-10T14:10:56.600
> 
> 标签：c++, qt, qthread, qtcpserver

我有一个这样的线程子类

```
class MyThread : public QThread
{
public:
    MyThread (void);
    ~MyThread (void);

    void run();

    void stop(); // close server and terminate thread

public slots:
    void slotCloseServer();

signals:
    void signalCloseServer();

private:
    QTcpServer* m_pServer;
}; 
```

和`run()` 整体类定义概述如下

```
MyThread::MyThread()
{
    connect(this, SIGNAL(signalCloseServer()), this, SLOT(slotCloseServer()));
}

void MyThread::run()
{
    m_pServer = new QTcpServer();

    if(m_pServer->listen(QHostAddress(QHostAddress::LocalHost), 8888) == 0)
    {
        qCritical("Server listen failed.");
    }
    else
    {
        exec();
    }
}

void MyThread::stop()
{
    emit signalCloseServer();
    quit(); // terminate thread
}

void MyThread::slotCloseServer()
{
    if (m_pServer && m_pServer->isListening())
    {
        m_pServer->close();
    }
} 
```

现在从主线程开始，我想调用`stop()`它，以便它会向线程实例发出信号以关闭服务器并自行终止，但它永远不会到达`slotCloseServer()`并且监听端口不会被释放。

关于如何在终止线程之前释放服务器套接字的任何想法？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:15:38.840

我认为对于在创建的对象被销毁（在您的情况下是线程终止）时应该做某事的情况，最好在该对象的类的析构函数中说明所需的操作：

```
MyThread ::~MyThread (void)
{
    m_pServer->close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T03:38:46.133

为什么不从 stop() 调用 slotCloseServer()？

```
void MyThread::stop()
{
    slotCloseServer(); // close server

    quit(); // terminate thread
}

void MyThread::slotCloseServer()
{
    if (m_pServer && m_pServer->isListening())
    {
        m_pServer->close();
    }
} 
```

# java - 在 rhino (JavaScript) 的 Java 方法上使用 .apply()

> ID：12821431
> 
> 赞同：4
> 
> 时间：2012-10-10T14:11:14.690
> 
> 标签：java, javascript, rhino

我想使用 rhino（JavaScript）`function.apply()`将参数传递给 varags Java 方法，如下所示：

```
function sprintf()
{
    return java.lang.String.format.apply(arguments);
}
sprintf("%d\n", 5); 
```

但是调用`sprintf()`会报错：

```
Error: can't find method java.lang.String.format(). 
```

我想这是因为该`format()`方法不是正确的 JavaScript 函数而是 Java 方法，所以它没有`apply()`定义。（虽然这不是错误消息所说的，所以可能不是。）

我确实发现我可以添加自己的 apply() 方法：

```
java.lang.String.format.apply = function() {} 
```

但是如果你明白我的意思，我看不出`apply()`没有怎么写。`apply()`有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:43:24.893

@Vincent Montressor

这是一个部分解决方案：

```
function sprintf(string) {
  var args = Array.prototype.splice.call(arguments, 1);

  for (var i = 0; i < args.length; i++) {
    if (!isNaN(args[i])) {
      args[i] = new java.lang.Integer(args[i]);
    }    
  }

  return java.lang.String.format(String(string), args);
} 
```

有几个问题：

*   在您的实现中 .format() 方法签名未正确使用，即第一个参数应该是字符串
*   参数列表中的数值必须转换为正确的 java 类型。

这是示例调用：

```
print(sprintf("Hello %s %d", "number", 2)); 
```

产生：“Hello number 2”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:32:28.880

是否找不到 java.lang 您在**字符串**对象中使用“格式”{method}。如果找到 String.format 则使用：

```
 format("Hello, %s!", [firstName]); 
```

你 formatString 函数创建 sprintf

```
function sprintf() {
    return String.format.apply(arguments);
} 
```

在我看来，使用**format()**函数......

# javascript - 从显示的工具提示和突出显示的区域开始？

> ID：12821443
> 
> 赞同：1
> 
> 时间：2012-10-10T14:11:36.193
> 
> 标签：javascript, html, plugins, tooltip, imagemap

很棒的插件，有很棒的文档。

我想知道是否有办法让地图加载时已经突出显示了一个区域，并且已经显示了该区域的工具提示。

这是我的小提琴：

[见我的小提琴代码](http://jsfiddle.net/viralshah/sb9j7/973/)

如果它可以从`northwest`突出显示的键（未选中）和一个很棒的工具提示开始。

已经搞砸了一段时间，但无法弄清楚。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:13:13.770

当我添加这个时，它可以在这个 ImageMapster 演示中工作：

[见小提琴](http://jsfiddle.net/juvyh/685/)

```
 $(function(){

         $('area[state="OR"]').mapster('set',true);

    }); 
```

对于你的小提琴，我也可以做到。像这样

> .mapster('set', true, 'northwest');

[你的小提琴](http://jsfiddle.net/sb9j7/1034/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:47:07.477

您可以尝试在页面完成加载后立即使用 .ready() 函数来触发事件。

```
$(document).ready(function() {
  // Handler for .ready() called.
}); 
```

在此内部，您可以调用`mouseover`触发事件时调用的函数。您可以只指定要选择的西北项目。

# android - 显示一种帮助“覆盖”

> ID：12821447
> 
> 赞同：3
> 
> 时间：2012-10-10T14:11:43.700
> 
> 标签：android

我想让我的应用程序对用户更友好一点，所以我想展示一种叠加层，当用户第一次启动应用程序时，它会突出显示不同的组件。

开始实施此功能的最佳方法是什么？

这是一个例子：

![在此处输入图像描述](../Images/a5e55ad5cea491658e22ce728a34698d.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-07T19:17:57.617

![覆盖](../Images/e55286876c55f6ea9151a99a33640b31.png)

我知道这是相当古老的，但我发现了这一点并做了一些细微的修改。对我很有用。

创建并将您的“overlay.png”文件复制到“drawable”中

创建 layout/overlay_activity.xml

```
<?xml version="1.0" encoding="utf-8"?>

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/Overlay_activity"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background= "@null"
        android:orientation="vertical" >

    <ImageView
        android:id="@+id/ivOverlayEntertask"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:src="@drawable/overlay" />

</LinearLayout> 
```

创建 xml/overlay_prefs.xml

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

    <CheckBoxPreference
        android:defaultValue="true"
        android:key="overlaypref"
        android:summary="Enable Overlay Screen"
        android:title="Overlay Screen" />

</PreferenceScreen> 
```

在您的 Activity 中，创建 SharedPreferences 的实例和一个用于存储值的布尔值：

```
SharedPreferences setOverlay;
boolean showOverlay; 
```

然后在 OnCreate 中获取叠加 CheckBoxPreference 的值，如果为真，则将图像叠加到 Activity 上：

```
setOverlay = PreferenceManager.getDefaultSharedPreferences(this);
showOverlay = setOverlay.getBoolean("overlaypref", true);
    if (showOverlay == true) {
    showActivityOverlay();
    } 
```

在 Activity 中创建一个新方法：showActivityOverlay() 这个方法的作用是，它在 Activity 启动时显示 Overlay，然后当用户点击屏幕时，它将“overlaypref”设置为“false”并且不再显示覆盖。

```
 private void showActivityOverlay() {
      final Dialog dialog = new Dialog(this,
      android.R.style.Theme_Translucent_NoTitleBar);

      dialog.setContentView(R.layout.overlay_activity);

      LinearLayout layout = (LinearLayout) dialog
      .findViewById(R.id.overlay_activity);
      layout.setBackgroundColor(Color.TRANSPARENT);
        layout.setOnClickListener(new OnClickListener() {

          @Override
          public void onClick(View arg0) {
              dialog.dismiss();
              SharedPreferences.Editor editor = setOverlay.edit();
              editor.putBoolean("overlaypref", false);
              editor.commit();
          }
      });
      dialog.show();
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:20:08.397

使用框架或相对布局。

```
<RelativeLayout android:layout_width="match_parent" android:layout_height="match_parent">
  <include layout="@layout/normalLayout" />
  <include layout="@layout/overlayLayout" />
</RelativeLayout> 
```

在您的 onCreate 中，检查您是否需要覆盖，如果需要，请将 ContentView 设置为覆盖版本。当他们单击时，您可以隐藏叠加层或 setContentView 到常规布局。

# nginx - nginx 配置根目录

> ID：12821448
> 
> 赞同：1
> 
> 时间：2012-10-10T14:11:44.213
> 
> 标签：nginx, configuration-files

请帮我配置 nginx 索引文件选项。除了我想重定向到某个处理程序文件的主页和对 index.html 文件的主页请求之外的任何请求。

像这样的东西：

```
example.com/123/ -> /root/handler.php
example.com/123.php -> /root/handler.php
example.com/ -> /root/index.html 
```

## **回答**

我使用这个配置

```
listen   80;
    server_name domain.com;
    root /srv/http/domain.com;
    index index.html;

    charset utf-8;
    access_log  /var/log/http/x_nginx_access.log  main;
    error_log   /var/log/http/x_nginx_error.log  warn;

    auth_basic "Restricted access";
    auth_basic_user_file /srv/http/$host/.htpasswd;

    location = / {
            index index.html;
    }

    location / {
            try_files $uri $uri/ /handler.php?$args;
    }

    location ~* \.(js|css|png|jpg|jpeg|gif|ico)$ {
            expires 24h;
            log_not_found off;
    }

    location = /favicon.ico {
            log_not_found off;
            access_log off;
    }

    location = /robots.txt {
            allow all;
            log_not_found off;
            access_log off;
    }

    location ~ /\.ht {
            deny  all;
    }

    location ~ \.php {
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Request-Filename $request_filename;

            fastcgi_param SCRIPT_FILENAME /srv/http/$host$fastcgi_script_name;
            fastcgi_param QUERY_STRING    $query_string;

            fastcgi_split_path_info ^(.+\.php)(/.+)$;

            proxy_read_timeout 512;
            fastcgi_pass 127.0.0.1:9000;
            include fastcgi_params;
    } 
```

# java - JFace TableViewer - 为表格中的所有单元格设置字体颜色

> ID：12821451
> 
> 赞同：1
> 
> 时间：2012-10-10T14:11:46.693
> 
> 标签：java, fonts, swt, jface

我问了一个非常相似的问题，但我最终使用图像而不是更改颜色。

我希望单元格中的所有文本都是深灰色的。我了解您必须分配每一列。但我不知道该怎么做。

这是我在 TableViewer 中的专栏之一。

```
col = new TableViewerColumn(this , SWT.NONE);
col.getColumn().setWidth(200);
col.getColumn().setText("Printer/Profile");
col.setLabelProvider(new ColumnLabelProvider() {
    @Override
    public String getText(Object element) {
        AplotResultsDataModel.ResultsData p = (AplotResultsDataModel.ResultsData) element;
        return p.getPrinterProfile();
    }
}); 
```

我将如何更改上述代码以将字体颜色设置为深灰色？

**编辑**

如果我使用开关，它怎么知道我有多少列？还有如何设置列名？这是我现在设置的方式

```
TableViewerColumn col = new TableViewerColumn(this , SWT.NONE);
  col.getColumn().setWidth(150);
  col.getColumn().setText("ItemId");
  col.setLabelProvider(new ColumnLabelProvider() {
     @Override
     public void update(ViewerCell cell)
     {
         Object element = cell.getElement();
         if(element instanceof AplotPDFDataModel.FileNameData)
         {
            AplotPDFDataModel.FileNameData p = (AplotPDFDataModel.FileNameData) element;
            cell.setForeground(ColorConstants.darkGray);
            switch(cell.getColumnIndex())
            {
               case 0:
                  try {
                     cell.setText(p.getRev().getStringProperty("item_id"));
                  }
                  catch (TCException e) {
                     e.printStackTrace();
                  }
                  break;
               case 1:
                  try {
                     cell.setText(p.getRev().getStringProperty("item_revision_id"));
                  }
                  catch (TCException e) {
                     e.printStackTrace();
                  }
                  break;
               case 2:
                  cell.setText(p.getPRLValue().toString());
                  break;
               case 3:
                  cell.setText(p.getMarkupValue());
                  break;
               case 4:
                  cell.setText(p.getFileName());
                  break;
             }
         }
     }
 }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T14:17:29.360

我会使用[`update(ViewerCell cell)`](http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/viewers/ColumnLabelProvider.html#update%28org.eclipse.jface.viewers.ViewerCell%29)代替`ColumnLabelProvider`的方法`getText()`。然后你可以打电话[`ViewerCell#setForeground(Color color)`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/viewers/ViewerCell.html#getForeground%28%29)：

```
public class ColorColumnLabelProvider extends ColumnLabelProvider {
    @Override
    public void update(ViewerCell cell)
    {
        Object element = cell.getElement();
        if(element instanceof AplotResultsDataModel.ResultsData)
        {
            AplotResultsDataModel.ResultsData p = (AplotResultsDataModel.ResultsData) element;

            cell.setForeground(YOUR_COLOR);
            switch(cell.getColumnIndex())
            {
                case 0:
                    cell.setText(p.YOUR_FIRST_TEXT);
                    break;
                case 1:
                    cell.setText(p.YOUR_SECOND_TEXT);
                    break;
                case ...
            }
        }
    }
} 
```

然后使用：

```
col.getColumn().setWidth(150);
col.getColumn().setText("ItemId");
col.setLabelProvider(new ColorColumnLabelProvider()); 
```

由于我`switch`是列索引，因此您可以将其`ColorColumnLabelProvider`用于所有列。

不要忘记将颜色放置在某处。

如果您使用[`ColorConstants`](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.draw2d.doc.isv/reference/api/org/eclipse/draw2d/ColorConstants.html)Draw2d [，](http://www.eclipse.org/gef/draw2d/index.php)则无需处理它们。

在你的情况下[`ColorConstants.darkGray`](http://help.eclipse.org/galileo/topic/org.eclipse.draw2d.doc.isv/reference/api/org/eclipse/draw2d/ColorConstants.html#darkGray)会做这项工作。

**替代品**：

您还可以定义一个`ColumnLabelProvider`实现[`IColorProvider`](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fjface%2Fviewers%2FIColorProvider.html)：

```
public class ColorColumnLabelProvider extends ColumnLabelProvider implements IColorProvider {

    @Override
    public Color getBackground(Object element) {
        return null;
    }

    @Override
    public Color getForeground(Object element) {
        return YOUR_COLOR;
    }

    @Override
    public String getText(Object element) {
        AplotResultsDataModel.ResultsData p = (AplotResultsDataModel.ResultsData) element;
        return p.getPrinterProfile();
    }

} 
```

# java - 迷宫递归 - 少数输入出错（可能是逻辑错误）

> ID：12821455
> 
> 赞同：5
> 
> 时间：2012-10-10T14:11:52.590
> 
> 标签：java, recursion, maze

我是java初学者。我一直在研究一个迷宫问题，试图通过递归来解决它。我编写的代码似乎适用于少数输入而不是其他输入。输入是一个由 0 和 1 组成的迷宫。# 是开始，@ 是出口。0 是墙，1 是开放的。输出将是从 # 到 @ 的跳数。虽然我正在通过递归解决问题，但我的逻辑一定有问题。请让我知道我错在哪里。

**课堂练习次数**

```
 import java.util.Scanner;

 class practisenumwords {
 public static void main(String[] args){
 Scanner in=new Scanner(System.in);
 int r=in.nextInt();
 int c=in.nextInt();
 maze maz=new maze(r,c);                    /*input in string copied to array*/
 char[] ch;                                        
 ch = "00000000111111101111011001101@#11100".toCharArray();  
 int l=0;
 for(int i=0;i<r;i++)
   {
    for(int j=0;j<c;j++)                /*initialising the maze elements*/
    {                               
     maz.m[i][j]=new cells();
     maz.m[i][j].c=ch[l];
     maz.m[i][j].row=i;
     maz.m[i][j].col=j;
     l++;
    }
  }
for(int i=0;i<r;i++)                             /*print the input maze */
  {
    for(int j=0;j<c;j++)
    {
    System.out.print(""+maz.m[i][j].c);
  }
  System.out.println();
}

maz.escape();
maz.find(maz.startx,maz.starty,maz.hops);
}
} 
```

**类细胞**

```
class cells {
char c;
int row;
int col;
boolean done=false;                 /*initially all cells are unvisited*/ 
} 
```

**类迷宫**

```
class maze{                       
maze (int a,int b){                                
    rows=a;
    cols=b;
    m=new cells[rows][cols];
}
int rows;
int cols;
cells[][] m;
int startx,starty;
int hops=0;
void escape()
{
    for(int i=0;i<rows;i++)
    {
       for(int j=0;j<cols;j++)
       {
        if(m[i][j].c=='#') 
         {
               startx=i;
               starty=j;
               System.out.println(startx+" "+starty);
         }
       }
    }
}
void find(int x,int y,int h)
{    
    if   ((x+1<rows && m[x+1][y].c=='@'   &&  m[x+1][y].done!=true) 
        ||(x-1>=0   && m[x-1][y].c=='@'   &&  m[x-1][y].done!=true)
        ||(y+1<cols && m[x][y+1].c=='@'   &&  m[x][y+1].done!=true)   
        ||(y-1>=0   && m[x][y-1].c=='@'   &&  m[x][y-1].done!=true)){
        h++;
        System.out.println(h);   
         }
      else
       {  
        if(x-1>=0   &&  m[x-1][y].c=='1' && m[x-1][y].done!=true){   /*north cell*/
                    m[x][y].done=true;
                    h++;
                    find(x-1,y,h);
        }
        if(x+1<rows && m[x+1][y].c=='1'  && m[x+1][y].done!=true){   /*south cell*/
                     m[x][y].done=true;
                     h++;
                     find(x+1,y,h);
        }
        if(y+1<cols && m[x][y+1].c=='1'  && m[x][y+1].done!=true){   /*east cell*/
                    m[x][y].done=true;
                    h++;
                    find(x,y+1,h);
        }
        if(y-1>=0 && m[x][y-1].c=='1'    && m[x][y-1].done!=true){   /*west cell*/
                    m[x][y].done=true;
                    h++;
                    find(x,y-1,h);
        }
       }   
      }
    } 
```

现在，我得到正确的输入输出作为程序中的 1。

```
000000
001111
111011
110110
01101@
#11100 
```

output- 12 （获得正确的输出）

```
00@000
001111
111011
110110
011011
#11100 
```

output- 7（获得正确的输出）

但不适用于其他输入，例如

```
0 0 0 0 @ 0
0 1 0 1 1 0
1 1 1 1 0 1
0 1 0 1 0 0
0 0 # 1 1 1
0 1 1 0 0 1 
```

正确输出 - 6 获得输出 -7

输出也随着检查相邻单元格的顺序而变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:03:22.557

老实说，我会以不同的方式实现您的递归函数：

并且不需要检查 bool 值是否是`!= true`,`!boolValue`就可以了。

```
int find(int x,int y,int h)
{    
    int result = -1;
    if   ((x+1<rows && m[x+1][y].c=='@'   &&  !m[x+1][y].done) 
        ||(x-1>=0   && m[x-1][y].c=='@'   &&  !m[x-1][y].done)
        ||(y+1<cols && m[x][y+1].c=='@'   &&  !m[x][y+1].done)   
        ||(y-1>=0   && m[x][y-1].c=='@'   &&  !m[x][y-1].done)){   
        return h + 1;
         }
      else
       {

        if(x-1>=0   &&  m[x-1][y].c=='1' && !m[x-1][y].done){   /*north cell*/
                   m[x][y].done=true;

                   result = find(x-1,y,h + 1)
                   if (result > -1) {
                       return result; 
                   }
                   m[x][y].done=false;
        } 
```

以同样的方式实现其他三个方向，如果没有找到解决方案，结果应该仍然是-1。

```
 return result;
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:33:34.203

在快速阅读中，我注意到：

```
if(...) {
    ...
    h++;
    find(x-1,y,h);
} 
```

对于每个 if 块。

当第一个 if 条件满足时，在第二个 if 块内 h == h+2，第三个和第四个 if 块也是如此

也许你应该写：

```
if(...) {
    ...
    // h++;
    find(x-1,y,h+1);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T16:44:06.583

```
int find(int x, int y, int h) {
    if ((x + 1 < rows && m[x + 1][y].c == '@' && m[x + 1][y].done != true)
            || (x - 1 >= 0 && m[x - 1][y].c == '@' && m[x - 1][y].done != true)
            || (y + 1 < cols && m[x][y + 1].c == '@' && m[x][y + 1].done != true)
            || (y - 1 >= 0 && m[x][y - 1].c == '@' && m[x][y - 1].done != true)) {
        h++;
        finish = true;
        return h;
    } else {
        if (x - 1 >= 0 && m[x - 1][y].c == '1' && m[x - 1][y].done != true
                && !finish) { /* north cell */
            m[x][y].done = true;
            int temp = find(x - 1, y, h);
            if (temp != 0)
                h = temp + 1;
            return h;

        }
        if (x + 1 < rows && m[x + 1][y].c == '1'
                && m[x + 1][y].done != true && !finish) { /* south cell */
            m[x][y].done = true;
            int temp = find(x + 1, y, h);
            if (temp != 0)
                h = temp + 1;
            return h;

        }
        if (y + 1 < cols && m[x][y + 1].c == '1'
                && m[x][y + 1].done != true && !finish) { /* east cell */
            m[x][y].done = true;

            int temp = find(x, y + 1, h);
            if (temp != 0)
                h = temp + 1;
            return h;

        }
        if (y - 1 >= 0 && m[x][y - 1].c == '1' && m[x][y - 1].done != true
                && !finish) { /* west cell */
            m[x][y].done = true;

            int temp = find(x, y - 1, h);
            if (temp != 0) {
                h = temp + 1;
            }
            return h;
        }
        return 0;
    }
} 
```

还包括一个布尔完成 = false; 在你的迷宫课上。并更改主函数的返回

```
 maz.hops = maz.find(maz.startx, maz.starty, maz.hops);
    System.out.println(maz.hops); 
```

# vb.net - 以编程方式检查 ListView 中的复选框

> ID：12821456
> 
> 赞同：1
> 
> 时间：2012-10-10T14:12:03.410
> 
> 标签：vb.net, listview, checkbox

我正在尝试以编程方式检查 a 的复选框`ListView`（使用 VB 和 .NET 4）。

ListView`lvVorschlag`已在设计器中创建，以及三个元素。然后我执行以下操作：

```
Dim lviOptimal As New ListViewItem("Optimal")
lviOptimal.SubItems.Add(...) 'several SubItems are added
lvVorschlag.Items.Add(lviOptimal)
lvVorschlag.Items(0).Selected = True 
```

所有子项都已正确添加，并且该行`lvVorschlag.Items(0).Selected = True`没有给我错误。但没有任何检查。知道为什么吗？

注意：我也尝试过，`lvVorschlag.Items("Optimal").Selected = True`但它给了我一个错误，说这个对象是`Nothing`. 太糟糕了，按名称引用会更容易。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T14:33:14.977

您应该使用该`Checked`属性来检查您想要的项目：

```
lvVorschlag.Items(0).Checked = True 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-10T14:20:51.330

将焦点设置在项目上

```
Dim lviOptimal As New ListViewItem("Optimal")
lviOptimal.SubItems.Add(...) 'several SubItems are added
lvVorschlag.Items.Add(lviOptimal)
lvVorschlag.Items(0).focus()
lvVorschlag.Items(0).Selected = True 
```

[http://msdn.microsoft.com/en-us/library/y4x56c0b%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/y4x56c0b%28v=vs.100%29.aspx)

# windows-phone-7 - pubCenter - 两个页面中的一个广告单元？

> ID：12821458
> 
> 赞同：0
> 
> 时间：2012-10-10T14:12:05.443
> 
> 标签：windows-phone-7, ads

我有两个页面的应用程序。在 pubcenter 中，我为此应用注册了广告单元。我可以将 adControl 放在具有相同广告单元的这两个页面中，还是应该为每个页面创建单独的广告单元？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:46:55.863

使用相同的广告单元。您可以在应用中的任意数量的页面上使用相同的广告单元。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T17:18:04.887

您甚至可以在多个 WP7 应用程序中使用相同的单元广告，但之后您就无法清楚地了解哪个应用程序为您带来了多少浏览量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T14:26:47.317

如果您想展示来自相同类别的广告，请使用相同的 AdUnit。如果您想展示不同类别的广告，请使用不同的广告。

# jquery - 带有可搜索标签和选项描述的 jQuery 自动完成组合框

> ID：12821459
> 
> 赞同：3
> 
> 时间：2012-10-10T14:12:07.120
> 
> 标签：jquery, jquery-ui, autocomplete, combobox, jquery-ui-autocomplete

我想使用jQuery UI 中的[多行自动完成组合框](http://jqueryui.com/autocomplete/#custom-data "组合框")，但标签和选项描述都可搜索。或标签和值，但值必须对用户可见。

有什么办法吗？

更新：还有按钮（向下箭头）来显示（可能是可滚动的）所有选项的列表会很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T18:02:02.130

这绝对是可行的。调整您链接到的答案，这是您如何按`desc`每个项目的属性以及属性进行搜索的方式`label`。此示例还包含一个`#showall`显示所有项目的 jQueryUI 按钮 ( )。

**JavaScript：**

```
$(function() {
    var projects = [ /* ... */ ];

    $("#showall").button({
        icons: {
            primary: "ui-icon-triangle-1-s"
        },
        text: false
    })
        .removeClass("ui-corner-all")
        .addClass("ui-corner-right ui-combobox-toggle")
        .on("click", function () {
            $("#project").autocomplete("search", "");
        });

    $("#project").autocomplete({
        minLength: 0,
        source: function(request, response) {
            var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i");
            /* Search by description or label: */
            response($.grep(projects, function(value) {
                return matcher.test(value.label || value.value || value) || 
                    matcher.test(value.desc);
            }));
        },
        focus: function(event, ui) {
            $("#project").val(ui.item.label);
            return false;
        },
        select: function(event, ui) {
            $("#project").val(ui.item.label);
            $("#project-id").val(ui.item.value);
            $("#project-description").html(ui.item.desc);
            $("#project-icon").attr("src", "images/" + ui.item.icon);

            return false;
        }
    }).data("autocomplete")._renderItem = function(ul, item) {
        return $("<li>")
            .data("item.autocomplete", item)
            .append("<a>" + item.label + "<br>" + item.desc + "</a>").appendTo(ul);
    };
});​ 
```

**HTML：**

```
<div class="ui-widget">
    <label>Your preferred programming language:</label>
    <span class="ui-combobox">
        <input id="project" type="text" class="ui-combobox-input ui-state-default ui-widget ui-widget-content ui-corner-left" /><a id="showall" tabindex="-1" title="Show All Items"></a>
    </span>
</div>​ 
```

**示例：http:** [//jsfiddle.net/J5rVP/4/](http://jsfiddle.net/J5rVP/4/)

尝试搜索“CSS”或“interface”

# php - $_SERVER['REQUEST_URI'] 指导

> ID：12821461
> 
> 赞同：-2
> 
> 时间：2012-10-10T14:12:16.687
> 
> 标签：php, uri

我有一个奇怪的编码情况，我需要让 URI 成为正在查看的页面的标题。我想不出另一种方法来做到这一点，但现在我需要格式化该 URI 并且无法弄清楚如何完成它。这是一个 WordPress 网站，所以 URI 非常干净。我想要做的是将第一个单词的字母大写，然后用空格、破折号或竖线分隔符来分隔标题。

所以这显然给了我URI：

```
<title><?php echo ($_SERVER['REQUEST_URI']) ?></title> 
```

这给了我类似 /test-catalog/diagnosis/flu 的信息。我要显示的是测试目录 - 诊断 - 流感

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:18:31.183

我想这会起作用：

```
echo ucwords(str_replace(Array("-","/"),Array(" "," - "),$_SERVER['REQUEST_URI']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:19:01.153

通过使用 str_replace 和 ucwords

## 例子

`echo ucwords(str_replace('/', ' - ', str_replace('-', ' ', $_SERVER['REQUEST_URI'])));`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T14:20:31.860

几件事要做：

```
$url = str_replace("-"," ",$url);  // convert the - to spaces (do this first)
$url = str_replace("/"," - ",$url);  // convert the / to hyphens with spaces either side

$title = ucfirst($url);            // capitalize the first letter 
```

如果要将每个字母大写，请执行以下操作：

```
$title = ucwords($url);            // capitalize first letter of each word 
```

你可能有一些空白开始和结束，所以这样做：

```
$title= trim($title) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T14:21:58.927

```
// remove the first slash '/'
$uri = substr($_SERVER['REQUEST_URI'], 1);
// ucwords to uppercase any word
// str_replace to replace "-" with " " and "/" with " - "
echo ucwords(str_replace(array("-","/"),array(" "," - "),$uri)); 
```

[键盘](http://codepad.viper-7.com/EAo7GP)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T14:25:19.753

作为之前答案的简历：

```
echo ucwords(str_replace(array("-","/"),array(" "," - "),substr($_SERVER['REQUEST_URI'], 1))); 
```

# c++ - 垃圾输出到NXT屏幕

> ID：12821469
> 
> 赞同：0
> 
> 时间：2012-10-10T14:12:36.873
> 
> 标签：c++, embedded, nxt, lego, mindstorms

我一直在尝试启动并运行 nxtOSEK，因为有一些 C++ 项目我想使用我的 NXT 进行工作，并且在搜索网络时，它似乎是最推荐这样做的系统。

我一直在关注[本教程（我在 Mac 上）](http://www.aribeiro.info/content/nxtosek-mac-osx-106-snow-leopard)来更新我的砖并进行设置，并设法达到我正在编译示例程序并将它们下载到我的砖的地步。

但是，当我编译并运行 helloworld 程序（它只是将 'OSEK HelloWorld' 输出到砖块的屏幕上时，我得到一个满是垃圾字符的屏幕，只能通过重置电源来恢复。

* * *

**编辑**

在构建过程中，我注意到以下错误：

```
err:wineconsole:WCUSER_SetFont wrong font
err:wineconsole:WCUSER_SetFont wrong font 
```

这可能是问题的一部分吗？

为了好玩，我将转储整个构建过程......也许一个鹰眼的 SO'er 会注意到我错过的一些东西。

```
espais@computron~/Desktop/nxtOSEK/samples_c/helloworld$ make all
Compiling ../../ecrobot/../toppers_osek/kernel/alarm.c to alarm.o
Compiling ../../ecrobot/../toppers_osek/kernel/event.c to event.o
Compiling ../../ecrobot/../toppers_osek/kernel/interrupt.c to interrupt.o
Compiling ../../ecrobot/../toppers_osek/kernel/osctl.c to osctl.o
Compiling ../../ecrobot/../toppers_osek/kernel/resource.c to resource.o
Compiling ../../ecrobot/../toppers_osek/kernel/task.c to task.o
Compiling ../../ecrobot/../toppers_osek/kernel/task_manage.c to task_manage.o
Compiling ../../ecrobot/../toppers_osek/config/at91sam7s-gnu/cpu_config.c to cpu_config.o
Compiling ../../ecrobot/../toppers_osek/config/at91sam7s-gnu/lego_nxt/sys_config.c to sys_config.o
Generating OSEK kernel config files from ./helloworld.oil
err:wineconsole:WCUSER_SetFont wrong font
err:wineconsole:WCUSER_SetFont wrong font
Compiling kernel_cfg.c to kernel_cfg.o
Compiling ../../ecrobot/../ecrobot/c/syscalls.c to syscalls.o
Compiling ../../ecrobot/../ecrobot/c/ecrobot_bluetooth.c to ecrobot_bluetooth.o
Compiling ../../ecrobot/../ecrobot/c/ecrobot_base.c to ecrobot_base.o
Compiling ../../ecrobot/../ecrobot/c/ecrobot.c to ecrobot.o
Compiling helloworld.c to helloworld.o
Compiling ../../ecrobot/../toppers_osek/syslib/at91sam7s-gnu/lego_nxt/hw_sys_timer.c to hw_sys_timer.oram
Assembling ../../ecrobot/../lejos_nxj/src/nxtvm/platform/nxt/vectors.s to vectors.o
Assembling ../../ecrobot/../toppers_osek/config/at91sam7s-gnu/debug.S to debug.o
Assembling ../../ecrobot/../toppers_osek/config/at91sam7s-gnu/lego_nxt/sys_support.S to sys_support.o
Assembling ../../ecrobot/../ecrobot/c/nxt_binary_header.s to nxt_binary_header.o
Assembling ../../ecrobot/../ecrobot/c/nxt_entry_point.s to nxt_entry_point.o
Assembling ../../ecrobot/../ecrobot/c/ecrobot_init.s to ecrobot_init.o
Assembling ../../ecrobot/../toppers_osek/config/at91sam7s-gnu/cpu_support.S to cpu_support.oram
Assembling ../../ecrobot/../toppers_osek/config/at91sam7s-gnu/irq.s to irq.oram
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_udivsi3.o) does not support interworking, whereas helloworld_OSEK_rom.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_divsi3.o) does not support interworking, whereas helloworld_OSEK_rom.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_umodsi3.o) does not support interworking, whereas helloworld_OSEK_rom.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_modsi3.o) does not support interworking, whereas helloworld_OSEK_rom.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_dvmd_tls.o) does not support interworking, whereas helloworld_OSEK_rom.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_arm_addsubdf3.o) does not support interworking, whereas helloworld_OSEK_rom.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_arm_muldivdf3.o) does not support interworking, whereas helloworld_OSEK_rom.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_arm_cmpdf2.o) does not support interworking, whereas helloworld_OSEK_rom.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_muldi3.o) does not support interworking, whereas helloworld_OSEK_rom.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_divdi3.o) does not support interworking, whereas helloworld_OSEK_rom.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_clzsi2.o) does not support interworking, whereas helloworld_OSEK_rom.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/lib/thumb/libc.a(lib_a-memcpy.o) does not support interworking, whereas helloworld_OSEK_rom.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/lib/thumb/libc.a(lib_a-memset.o) does not support interworking, whereas helloworld_OSEK_rom.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/lib/thumb/libc.a(lib_a-strcmp.o) does not support interworking, whereas helloworld_OSEK_rom.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/lib/thumb/libc.a(lib_a-strcpy.o) does not support interworking, whereas helloworld_OSEK_rom.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/lib/thumb/libc.a(lib_a-strlen.o) does not support interworking, whereas helloworld_OSEK_rom.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/lib/thumb/libc.a(lib_a-strncpy.o) does not support interworking, whereas helloworld_OSEK_rom.elf does
Generating binary image file: helloworld_OSEK_rom.bin
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_udivsi3.o) does not support interworking, whereas helloworld_OSEK_ram.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_divsi3.o) does not support interworking, whereas helloworld_OSEK_ram.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_umodsi3.o) does not support interworking, whereas helloworld_OSEK_ram.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_modsi3.o) does not support interworking, whereas helloworld_OSEK_ram.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_dvmd_tls.o) does not support interworking, whereas helloworld_OSEK_ram.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_arm_addsubdf3.o) does not support interworking, whereas helloworld_OSEK_ram.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_arm_muldivdf3.o) does not support interworking, whereas helloworld_OSEK_ram.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_arm_cmpdf2.o) does not support interworking, whereas helloworld_OSEK_ram.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_muldi3.o) does not support interworking, whereas helloworld_OSEK_ram.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_divdi3.o) does not support interworking, whereas helloworld_OSEK_ram.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_clzsi2.o) does not support interworking, whereas helloworld_OSEK_ram.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/lib/thumb/libc.a(lib_a-memcpy.o) does not support interworking, whereas helloworld_OSEK_ram.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/lib/thumb/libc.a(lib_a-memset.o) does not support interworking, whereas helloworld_OSEK_ram.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/lib/thumb/libc.a(lib_a-strcmp.o) does not support interworking, whereas helloworld_OSEK_ram.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/lib/thumb/libc.a(lib_a-strcpy.o) does not support interworking, whereas helloworld_OSEK_ram.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/lib/thumb/libc.a(lib_a-strlen.o) does not support interworking, whereas helloworld_OSEK_ram.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/lib/thumb/libc.a(lib_a-strncpy.o) does not support interworking, whereas helloworld_OSEK_ram.elf does
Generating binary image file: helloworld_OSEK_ram.bin
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_udivsi3.o) does not support interworking, whereas helloworld_OSEK_rxe.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_divsi3.o) does not support interworking, whereas helloworld_OSEK_rxe.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_umodsi3.o) does not support interworking, whereas helloworld_OSEK_rxe.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_modsi3.o) does not support interworking, whereas helloworld_OSEK_rxe.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_dvmd_tls.o) does not support interworking, whereas helloworld_OSEK_rxe.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_arm_addsubdf3.o) does not support interworking, whereas helloworld_OSEK_rxe.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_arm_muldivdf3.o) does not support interworking, whereas helloworld_OSEK_rxe.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_arm_cmpdf2.o) does not support interworking, whereas helloworld_OSEK_rxe.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_muldi3.o) does not support interworking, whereas helloworld_OSEK_rxe.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_divdi3.o) does not support interworking, whereas helloworld_OSEK_rxe.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/thumb/libgcc.a(_clzsi2.o) does not support interworking, whereas helloworld_OSEK_rxe.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/lib/thumb/libc.a(lib_a-memcpy.o) does not support interworking, whereas helloworld_OSEK_rxe.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/lib/thumb/libc.a(lib_a-memset.o) does not support interworking, whereas helloworld_OSEK_rxe.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/lib/thumb/libc.a(lib_a-strcmp.o) does not support interworking, whereas helloworld_OSEK_rxe.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/lib/thumb/libc.a(lib_a-strcpy.o) does not support interworking, whereas helloworld_OSEK_rxe.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/lib/thumb/libc.a(lib_a-strlen.o) does not support interworking, whereas helloworld_OSEK_rxe.elf does
/opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/bin/ld: Warning: /opt/local/lib/gcc/arm-elf/4.6.1/../../../../arm-elf/lib/thumb/libc.a(lib_a-strncpy.o) does not support interworking, whereas helloworld_OSEK_rxe.elf does
Generating binary image file: helloworld_OSEK.rxe 
```

* * *

**再次编辑** 还有一些版本信息以备不时之需：

```
FW NBC/NXC   1.07
AVR          1.01
BC4          1.01
Build        3012081214 
```

**编辑第三个**

当运行一个应该简单地旋转电机的程序时，屏幕上也有垃圾和一块冻砖。

* * *

**编辑第四条**

我相信我已经解决了这个问题，但是我仍然不确定如何解决它。原来我的NXT的固件没有更新。我尝试通过 Mac 和 Windows 这样做，但它似乎并没有“接受”。例如，我每次都会收到一条下载成功消息，但是当我启动 NXT 时，我从来没有看到 nxtOSEK 徽标。这可以解释为什么我在屏幕上看到垃圾，但现在我不知道为什么它不能正常闪烁。

我首先将它置于固件更新模式（tic-tic-tic），然后进行闪存过程..但是......什么都没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T21:03:37.873

查看您的问题，我在您的构建过程中找不到任何问题。但是然后快速浏览一下[http://lejos-osek.sourceforge.net/whatislejososek.htm](http://lejos-osek.sourceforge.net/whatislejososek.htm)，nxtOSEK 似乎不支持 MacOSX。除非我遗漏了什么，否则这可能完全是您的问题。

# javascript - Ember 路由器在重新加载时恢复

> ID：12821471
> 
> 赞同：0
> 
> 时间：2012-10-10T14:12:43.157
> 
> 标签：javascript, ember.js, ember-router

我有一个基于 ember.js 路由器的应用程序，有一个有趣的怪癖。由于路由器文档相当稀疏，我不确定这是否是我在其他地方的某些代码的*功能*或*错误或意外后果。*

当我在浏览器中重新加载包含应用程序的页面时，应用程序会跳转到我上次所在的路径。我将路由序列化为哈希。所以一个例子是我在`app.html#/users/1/details`，我删除哈希并添加一个随机查询变量`app.html?reload=randomnumber`并加载页面。一旦 ember 加载，它就会添加`#/users/1/details`回该地址。

这是 ember 的功能/后果，还是我写的一些垃圾。到目前为止，我还没有发现我写的任何可能导致这种情况的东西。

如果它是 ember 功能，有没有办法禁用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:17:42.880

你到底在说什么“***重新加载***”？

当使用散列序列化路由时，Ember 无法在浏览器中保留任何状态。它与 Ember 无关：重新加载页面时，整个状态都丢失了，并根据请求的 url 返回的内容初始化进行重置。

然而，当散列存在时，Ember 会使用它来重置路由器的状态。

所以我怀疑你仍在重新加载 URL `.../app.html#/users/1/details`。

您是否在开发人员工具*（或同等工具）*中查看了您的网络历史记录？

第一项应该是 GET 请求，它会指示有效请求的 URL 和哈希（如果有）。

# django - 来自其他视图的 Django 注册和内容

> ID：12821475
> 
> 赞同：0
> 
> 时间：2012-10-10T14:12:44.960
> 
> 标签：django, login-required

我的情况如下。

我有一个 django 应用程序，它是一个 CMS，这个应用程序生成页面内容和菜单。

存在生成所有页面内容的“默认”视图。主要模型的字段之一旨在根据设置限制页面的可见性：

*   “内部”（仅限于我们网络上的用户），
*   'worldwide'（通过 www 可见）现在，我想添加一个额外的值
*   “安全”，这将仅限于登录到该站点的人查看。

我不认为@login_required 会起作用，因为它只适用于整个功能。

我们希望作者或编辑能够设置此标志，而不是编写特殊功能；并且会有页面从“内部”迁移到“安全”然后迁移到“全球”的情况 - 所以理想情况下，网址应该保持不变。

解决此问题的最佳方法是什么？在此先感谢...帕特里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T06:56:38.563

由于您希望在对象上设置标志，我假设在您已经在视图中之前无法读取该标志（即，您不会将其存储在请求对象可访问的东西中，例如会话） ，因此排除了自定义装饰器。您可以选择使用一些有点粗糙但可行的东西，如下所示：

```
if (val=="internal" and inrange(request.META['REMOTE_ADDR'])) or (val=="secure" and  request.user.is_authenticated()) or val=="worldwide":
     return render_to_response .... etc.
else:
     return HttpResponseForbidden() 
```

替换您的模型值，并自然地编写 inrange 函数。

不过，更复杂的方法是编写自定义中间件并使用 process_view() 函数。有关更多详细信息，请参阅文档。

# security - 调用 REST API 时如何防止暴露我的用户名

> ID：12821476
> 
> 赞同：0
> 
> 时间：2012-10-10T14:12:46.113
> 
> 标签：security

我正在将我的 asp.net mvc4 Web 应用程序与工作流引擎集成，目前是为了调用引擎 API 并获取我正在执行以下操作的 JSON 结果：-

我有以下剃刀视图，其中有一个 javaScript 可以进行调用：-

```
@{
    ViewBag.Title = "About";
}
@section scripts {

 <script type="text/javascript">
     $(document).ready(function () {
         var name = prompt("Please enter your packageid", "JordanEngineersAssociation");

         var fullurl = 'http://localhost:8080/jw/web/json/workflow/process/list?j_username=kermit&hash=9449B5ABCFA9AFDA36B801351ED3DF66&loginAs=@User.Identity.Name&packageId=' + name;
         $.ajax({
             type: "GET",
             url: fullurl,
             dataType: "JSONP",
             success: function (result) {
                 var arr = ((typeof (result.data) == 'object') &&
                             (result.data.constructor.name == 'Array'))
                      ? result.data
                      : [result.data];
                 $.each(arr, function (key, val) {
                 var str = val.name + ' | Version ' + val.version;
                     $('<li/>', { text: str })
                     .appendTo($('#products'));

                 });
             }
         });

     });
     </script>
}
<h1>All Processes</h1>
<ul id="products">
</ul> 
```

以上运行良好，但我担心这种将当前登录用户名作为 API 调用的一部分向外界公开的方法有多安全，所以我如何使我的调用更安全 - 如果它当前不安全-？

此致

# java - a4j:commandLink 正在从 xhtml 中删除 javascript

> ID：12821477
> 
> 赞同：0
> 
> 时间：2012-10-10T14:12:47.483
> 
> 标签：java, jsf, richfaces, ajax4jsf

如标题所示，当我单击 a4j:commandLink 时，该方法完美执行并更新了我需要的表。

问题是页面的 js 在 a4j:commandLink 发布到 bean 之后消失了。

编辑：更清楚一点，当我的意思是 js 消失时，发生的事情是当我在 Mozilla firebug 中查找页面的 javascript 时，它没有显示出来。这是正常的吗？我究竟做错了什么？有什么最好的方法吗？

代码是：

```
<h:panelGroup id="examplePanel" >
<h:panelGroup rendered="#{not empty exampleBean.list}">
<table id="listDataTable" width="100%" cellspacing="0" 
    cellpadding="0" border="0" style="margin-left: 0pt; width: 716px;">
    <thead>
        <tr>
            <th>col1</th>
            <th>col2</th>
            <th>col3</th>                               
            <th class="shortCol">col4</th>
        </tr>       
    </thead>
    <tbody>
    <a4j:repeat value="#{exampleBean.list}" rowKeyVar="itStatus" var="item">
        <tr>
            <td>
                <h:outputText value="#{exampleBean.exampleShow(item)}" />
            </td>
            <td>
                <h:outputText value="#{exampleBean.exampleShow(item)}" />
            </td>
            <td>
                <h:outputText value="#{exampleBean.exampleShow(item)}" />
            </td>                  
            <td>
                <h:commandLink action="#{exampleShow(item)}" ></h:commandLink>
            </td>                               
        </tr>           
    </a4j:repeat>
    </tbody>
</table>
</h:panelGroup>
</h:panelGroup>
<h:outputLabel value="* #{locale.name}:" />
<h:inputText value="#{exampleBean.exampleName}"
disabled="#{not exampleBean.edit}" id="exampleName" />

<div class="button search">
**<a4j:commandLink action="#{exampleBean.objetToTable}" value="#{locale.create}" render="exampleTurnPanel" ></a4j:commandLink>**
</div> 
```

在此之前，我在里面使用 ah:commandLink 和 af:ajax。但是有了这个，bean 没有值，因为 POST 从未完成。正确的？

```
<h:commandLink action="#{exampleBean.objetToTable}"                     value="#{locale.create}">
<f:ajax execute="examplePanel" render="examplePanel" onevent="setExampleTableCss"/>                             </h:commandLink> 
```

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:29:47.757

我不确定消失的 JavaScript 到底是什么意思，但请注意，您的`<a4j:commandLink>`更新`exampleTurnPanel`不会刷新整个页面。这意味着新内容`exampleTurnPanel`不受您在加载页面时执行的任何 JavaScript 的影响。

如果你有一些 JavaScript 代码会影响 的内容`exampleTurnPanel`，那么你应该把它放在里面`exampleTurnPanel`，以使它在面板的每次更新时运行。`oncomplete`或者，您可以在更新后使用的属性显式调用它`<a4j:commandLink>`。

如果`<h:commandLink>`你需要`<f:ajax event = "action" ... />`，虽然它不应该不同于`<a4j:commandLink>`（但是请注意，`onevent="setExampleTableCss"`在`<f:ajax>`- 你不需要它吗？）`oncomplete`。`<a4j:commandLink>`

# sdk - 开发 AXIS IP 摄像机系统

> ID：12821481
> 
> 赞同：2
> 
> 时间：2012-10-10T14:12:56.770
> 
> 标签：sdk, programming-languages, ip-camera

我想写一些涉及 IP 摄像机的应用程序。AXIS 在他们的页面上有一个很好的概述。他们为他们的相机提供 API，称为 Vapix，他们还引入了 Open Platform SDK，它应该是某种形式的 SDK，使开发人员能够专门为设备编写代码。例如，通过您自己的协议与服务器通信。

问题是 - 他们需要注册和入场费才能注册开发者计划。不过，我的问题是，他们支持**哪种**语言？是C，Java吗？

注意：我不是在谈论 Vapix API，我是在谈论 Open Platform SDK。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T15:09:32.970

它是用 C/C++ 编写的。请注意，他们有自己的基于 GNU Linux 的编译器。

# c# - Microsoft 报表查看器 ASP.NET

> ID：12821487
> 
> 赞同：4
> 
> 时间：2012-10-10T14:13:06.700
> 
> 标签：c#, asp.net, oracle, datatable, reportviewer

这是我第一次使用 Microsoft Report Viewer 控件，我认为它非常简单，但我不断收到以下错误：

```
 An error occurred during local report processing.
 The report definition for report 'Report3' has not been specified
 Object reference not set to an instance of an object. 
```

我正在使用的 Oracle 数据库中有一个视图，如下所示：

![数据表视图](../Images/2965850f6b72ecc057fa795d67e4352f.png)

我浏览 GUI 并制作一个“新报告”并将这个数据集添加到一个“表”中。我使用查询生成器创建“FillByModel”和“GetDataByModel”函数，它们都从数据库返回正确的数据，但是当我运行我拥有 ReportViewer 控件的页面时，它给了我上述错误。我不知道那个错误是什么意思，在谷歌搜索它的废话并尝试一切之后，我不知道如何解决它。

这是我的 ReportViewer 对象的 .aspx 代码：

```
 <rsweb:ReportViewer ID="ReportViewer1" runat="server" Font-Names="Verdana" Font-Size="8pt" WaitMessageFont-Names="Verdana" WaitMessageFont-Size="14pt">
    <LocalReport ReportEmbeddedResource="Paint_Reporting.Report3.rdlc">
        <DataSources>
            <rsweb:ReportDataSource DataSourceId="ObjectDataSource1" Name="LOL" />
        </DataSources>
    </LocalReport>
</rsweb:ReportViewer>
<asp:ObjectDataSource ID="ObjectDataSource1" runat="server" OnSelecting="ObjectDataSource1_Selecting" SelectMethod="GetData" TypeName="PaintModelNumberDetailTableAdapters.PAINT_MODELNUMBERDETAILLISTINGTableAdapter"></asp:ObjectDataSource>
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager> 
```

有人可以帮我找出这个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:18:06.107

您必须在后面的代码中调用它：

```
reportViewer.LocalReport.ReportPath = "CommonLayer.Reports.SalesByPrice.rdlc"; 
```

只要确保相应地更改名称，即将`reportViewer.LocalReport.ReportPath`属性设置为`RDL`文件的路径。

这是一个完整的讨论，详细说明了您必须解决此问题的选项：

[尚未指定报告“xxx”的报告定义](http://social.msdn.microsoft.com/Forums/en/vsreportcontrols/thread/5b6cd9bf-baf0-4726-8507-5e732c48dd10)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T13:09:32.447

您还可以添加 .rdlc 的确切路径

例如我的它对我有用：

```
reportViewer.LocalReport.ReportPath = @"C:\Users\miuser\Documents\Visual Studio 2012\Projects\miproyect\SSHD\Views\Summary\Report1.rdlc"; 
```

# ruby-on-rails-3 - Rails：如何包含相关模型的表单

> ID：12821494
> 
> 赞同：2
> 
> 时间：2012-10-10T14:13:16.530
> 
> 标签：ruby-on-rails-3, has-many-through, rails-routing

我有一个使用“has_many :through”关系的 Rails 应用程序。我有 3 个表/模型。它们是 Employee、Store 和 StoreEmployee。一名员工可以为一家或多家商店工作。在 Store 视图 (show.html.erb) 上，我想包含一个表单以将员工添加到商店。如果员工尚不存在，则将其添加到员工表中。如果它已经存在，它只是被添加到存储中。

以下是模型定义：

```
# models
class Employee < ActiveRecord::Base
  has_many :store_employees
  has_many :stores, :through => :store_employees
  attr_accessible :email, :name
end

class Store < ActiveRecord::Base
  has_many :store_employees 
  has_many :employees, :through => :store_employees
  attr_accessible :address, :name
end

class StoreEmployee < ActiveRecord::Base
  belongs_to :store
  belongs_to :employee
  attr_accessible :employee_id, :store_id
end 
```

使用 rails 控制台，我可以证明数据模型工作正常，如下所示：

```
emp = Employee.first
str = Store.first
str.employees << emp    # add the employee to the store
str.employees           # shows the employees that work at the store
emp.stores              # shows the stores where the employee works 
```

我还更新了我的 routes.rb 以将 employees 资源嵌套在 stores 资源下，如下所示：

```
resources :stores do
  resources :employees
end 
```

## 编辑：我还将资源 :employees 添加为“未嵌套”资源。所以现在看起来像这样：

```
resources :stores do
  resources :employees
end
resources :employees 
```

所以，在 store 控制器的 show 动作中，我认为它应该是这样的：

```
def show
  @store = Store.find(params[:id])
  @employee = @store.employees.build     # creating an empty Employee for the form

  respond_to do |format|
    format.html # show.html.erb
    format.json { render json: @store }
  end
end 
```

这是商店的 show.html.erb，包括添加员工的表单：

```
<p id="notice"><%= notice %></p>

<p>
  <b>Name:</b>
  <%= @store.name %>
</p>

<p>
  <b>Address:</b>
  <%= @store.address %>
</p>

<%= form_for([@store, @employee]) do |f| %>
<%= f.label :name %>
<%= f.text_field :name %>

<%= f.label :email %>
<%= f.text_field :email %>

<%= f.submit "Add Employee" %>
<% end %>

<%= link_to 'Edit', edit_store_path(@store) %> |
<%= link_to 'Back', stores_path %> 
```

单击“添加员工”按钮时，我收到此错误消息：

> EmployeesController#create 中的 NoMethodError
> 
> # 未定义的方法`employee_url'

那么，我错过了什么？我认为这与“form_for”有关，但我不确定。我不知道为什么EmployeesController#create 被调用。我对 routes.rb 做错了吗？

我不知道添加员工的逻辑应该去哪里。在员工控制器中？存储控制器？

＃＃＃ 更新

这是EmployeesController 中更新的create 方法。我包括了米沙回答中的建议。

```
def create
  @store = Store.find(params[:store_id])
  @employee = @store.employees.build(params[:employee])

  respond_to do |format|
    if @employee.save
      format.html { redirect_to @store, notice: 'Employee was successfully created.' }
      format.json { render json: @employee, status: :created, location: @employee }
    else
      format.html { render action: "new" }
      format.json { render json: @employee.errors, status: :unprocessable_entity }
    end
  end
end 
```

进行此更改后，我成功保存了 Employee，但未创建 store_employees 关联记录。我不知道为什么。这是创建记录时我的终端中的输出。请注意，商店是 SELECTed 并且 Employee 是 INSERTed ，但仅此而已。任何地方都没有 store_employees 记录：

```
Started POST "/stores/1/employees" for 127.0.0.1 at 2012-10-10
13:06:18 -0400 Processing by EmployeesController#create as HTML  
Parameters: {"utf8"=>"✓",
"authenticity_token"=>"LZrAXZ+3Qc08hqQT8w0MhLYsNNSG29AkgCCMkEJkOf4=",
"employee"=>{"name"=>"betty", "email"=>"betty@kitchen.com"},
"commit"=>"Add Employee", "store_id"=>"1"}   Store Load (0.4ms) 
SELECT "stores".* FROM "stores" WHERE "stores"."id" = ? LIMIT 1 
[["id", "1"]]    (0.1ms)  begin transaction   SQL (13.9ms)  INSERT
INTO "employees" ("created_at", "email", "name", "updated_at") VALUES
(?, ?, ?, ?)  [["created_at", Wed, 10 Oct 2012 17:06:18 UTC +00:00],
["email", "betty@kitchen.com"], ["name", "betty"], ["updated_at", Wed,
10 Oct 2012 17:06:18 UTC +00:00]]    (1.3ms)  commit transaction
Redirected to http://localhost:3000/stores/1 Completed 302 Found in
23ms (ActiveRecord: 15.6ms) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:09:52.357

问题是由您的`EmployeesController#create`方法中的此代码段引起的：

```
redirect_to @employee 
```

这尝试使用`employee_url`，但不存在，因为您已将 employees 资源嵌套在您的路线文件中。解决方案是还添加“未嵌套”资源：

```
resources :stores do
  resources :employees
end
resources :employees 
```

或者只是重定向到不同的位置。例如回到`StoresController#show`.

顺便说一句，默认的脚手架不会做你期望它做的事情：它不会创建与商店相关的员工。为此，您必须对其进行一些重写：

```
def create
  @store = Store.find(params[:store_id])
  @employee = @store.employees.build(params[:employee])

  respond_to do |format|
    if @employee.save
      format.html { redirect_to @employee, notice: 'Employee was successfully created.' }
      format.json { render json: @employee, status: :created, location: @employee }
    else
      format.html { render action: "new" }
      format.json { render json: @employee.errors, status: :unprocessable_entity }
    end
  end
end 
```

# android - 将布局转换为位图时出现空指针异常

> ID：12821502
> 
> 赞同：3
> 
> 时间：2012-10-10T14:13:47.417
> 
> 标签：android

保存布局时出现空指针异常错误：

我创建图像的代码是：

```
private void mSavePhoto()
            {
            String str=mGetTime1();
            str1="/"+str+".png";
            Log.e("str1", str1);
            mLinLayMain = (LinearLayout)findViewById(R.id.xLinLayMain);
            mLinLayMain.setDrawingCacheEnabled(true);
            mLinLayMain.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
            mLinLayMain.layout(0, 0, mLinLayMain.getMeasuredWidth(), mLinLayMain.getMeasuredHeight()); 
            mLinLayMain.buildDrawingCache(true);

                    Bitmap mBitMap = Bitmap.createBitmap(mLinLayMain.getDrawingCache());
                     mBitMap=mLinLayMain.getDrawingCache();

             file = new File(Environment.getExternalStorageDirectory().getPath() + str1);
            try 
                {
                    file.createNewFile();
                    FileOutputStream ostream = new FileOutputStream(file);
                    mBitMap.compress(CompressFormat.PNG, 90, ostream);
                    ostream.close();
                    if(flag==1) // if Created image is to be saved in gallery
                        {
                            MediaStore.Images.Media.insertImage(getContentResolver(),file.getAbsolutePath(),file.getName(),file.getName());
                            flag=0;
                        }
                    else if(flag==2) // if created image is to be sent as attachment with mail then there is no need of saving it to gallery.
                        {
                            flag=0;
                        }
                    mLinLayMain.setDrawingCacheEnabled(false); // clear drawing cache
                } 
            catch (Exception e) 
                {
                    e.printStackTrace();
                    flag=0;
                }

            }// END mSavePhoto() 
```

我的布局 xml 代码是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@drawable/img_background"
    android:id="@+id/xRelLay"
    android:visibility="gone">
    <RelativeLayout android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/topbar"
        android:layout_alignParentTop="true"
        android:id="@+id/rel">
<ImageView android:id="@+id/xIvLogo"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/topbar_logo"
                    android:layout_centerInParent="true"/>

    </RelativeLayout>
<ImageView android:id="@+id/xIvBack"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/back"
        android:layout_marginLeft="10dip"
        android:layout_marginTop="10dip"
        android:layout_below="@+id/rel"/>
    <TextView android:id="@+id/xTvComingSoon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Coming Soon"
        android:textSize="60dip"
        android:textColor="#ffff00"
        android:layout_centerInParent="true"/>
</RelativeLayout>
<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@drawable/img_background"
    android:id="@+id/xLinLayMain"
    android:visibility="visible">
    <RelativeLayout android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/topbar"
        android:orientation="horizontal"
        android:layout_marginLeft="4dip"
        android:layout_marginRight="4dip">
      <ImageView android:id="@+id/xIvLogo"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/topbar_logo"
                    android:layout_centerInParent="true"/>
    </RelativeLayout>
<LinearLayout android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1">
        </LinearLayout>
<LinearLayout android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_marginLeft="8dip"
        android:layout_marginRight="4dip">
        <LinearLayout android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical">
            <TextView android:id="@+id/xTvLblLineSec"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Line Section"
                android:textColor="#ffff00"
                android:textSize="13dip"
                />
            <TextView android:id="@+id/xTvLblLineName"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Line Name"
                android:textColor="#ffff00"
                android:textSize="13dip"
                />
             <TextView android:id="@+id/xTvLblBaseRef"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Base Ref."
                android:textColor="#ffff00"
                android:textSize="13dip"
               />
        </LinearLayout>
        <LinearLayout android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:layout_marginLeft="5dip">
            <TextView android:id="@+id/xTvLblLineSec_Col"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text=":"
                android:textColor="#ffff00"
                android:textSize="13dip"/>
            <TextView android:id="@+id/xTvLblLineName_Col"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text=":"
                android:textColor="#ffff00"
                android:textSize="13dip"
                />
             <TextView android:id="@+id/xTvLblBaseRef_Col"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text=":"
                android:textColor="#ffff00"
                android:textSize="13dip"
                />
        </LinearLayout>
        <LinearLayout android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:layout_marginLeft="5dip">
            <TextView android:id="@+id/xTvLblLineSec_Val"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text=""
                android:textColor="#ffff00"
                android:textSize="13dip"

                android:visibility="visible"/>
            <TextView android:id="@+id/xTvLblLineName_Val"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text=""
                android:textColor="#ffff00"
                android:textSize="13dip"
                  android:visibility="visible"/>
             <TextView android:id="@+id/xTvLblBaseRef_Val"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text=""
                android:textColor="#ffff00"
                android:textSize="13dip"
                android:visibility="visible"/>
        </LinearLayout>
    </LinearLayout>
<LinearLayout android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1">
        </LinearLayout>
<LinearLayout android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">
        <TextView android:id="@+id/xTvLblKilometerage"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="KILOMETRAGE"
            android:textColor="#ffff00"
            android:textSize="30dip"
            android:layout_gravity="center_horizontal"
           />
        <TextView android:id="@+id/xTvMeterage_Val"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text=""
            android:textColor="#ffff00"
            android:textSize="45dip"

            android:layout_gravity="center_horizontal"
            android:visibility="visible"
            />
         </LinearLayout>
<LinearLayout android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1">
        </LinearLayout>
        <TextView android:layout_width="fill_parent"
            android:layout_height="1dip"
            android:background="#ed9043"
            android:layout_marginLeft="4dip"
            android:layout_marginRight="4dip"/>
        <LinearLayout android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"> 
            </LinearLayout>
<LinearLayout android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_marginLeft="8dip"
        android:layout_marginRight="4dip">
        <LinearLayout android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical">
            <TextView android:id="@+id/xTvLblLatitue"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Latitude"
                android:textColor="#ffff00"
                android:textSize="13dip"
                  />
            <TextView android:id="@+id/xTvLblLongitude"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Longitude"
                android:textColor="#ffff00"
                android:textSize="13dip"
               />
             <TextView android:id="@+id/xTvLblDate_Now"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Date NOW"
                android:textColor="#ffff00"
                android:textSize="13dip"
             />
             <TextView android:id="@+id/xTvLblDate_Last"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Date LAST"
                android:textColor="#ffff00"
                android:textSize="13dip"
                 />
              <TextView android:id="@+id/xTvLblSpeed"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Speed"
                android:textColor="#ffff00"
                android:textSize="13dip"
                 />
              <TextView android:id="@+id/xTvLblOffSet"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Offset"
                android:textColor="#ffff00"
                android:textSize="13dip"
                 />
        </LinearLayout>
        <LinearLayout android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:layout_marginLeft="5dip">
            <TextView android:id="@+id/xTvLblLatitue_Col"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text=":"
                android:textColor="#ffff00"
                android:textSize="13dip"
                 />
            <TextView android:id="@+id/xTvLblLongitude_Col"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text=":"
                android:textColor="#ffff00"
                android:textSize="13dip"
                />
             <TextView android:id="@+id/xTvLblDate_Col_Now"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text=":"
                android:textColor="#ffff00"
                android:textSize="13dip"
                  />
             <TextView android:id="@+id/xTvLblDate_Col_Last"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text=":"
                android:textColor="#ffff00"
                android:textSize="13dip"
                 />
              <TextView android:id="@+id/xTvLblSpeed_Col"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text=":"
                android:textColor="#ffff00"
                android:textSize="13dip"
                 />
              <TextView android:id="@+id/xTvLblOffSet_Col"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text=":"
                android:textColor="#ffff00"
                android:textSize="13dip"
                  />
        </LinearLayout>
        <LinearLayout android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:layout_marginLeft="5dip">
             <TextView android:id="@+id/xTvLatitue_Val"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text=""
                android:textColor="#ffff00"
                android:textSize="13dip"
                android:visibility="visible"/>
            <TextView android:id="@+id/xTvLongitude_Val"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text=""
                android:textColor="#ffff00"
                android:textSize="13dip"
               android:visibility="visible"/>
            <LinearLayout android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal">
             <TextView android:id="@+id/xTvDate_Now_Val"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text=""
                android:textColor="#ffff00"
                android:textSize="13dip"
               android:visibility="visible"/>
             <DigitalClock
                android:id="@+id/digitalClock1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="DigitalClock" 
                android:textColor="#ffff00"
                android:textSize="13dip"
                android:layout_marginLeft="5dip"
                />
              <TextView android:id="@+id/xTvDigClk_Text"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text=""
                android:textColor="#ffff00"
                android:textSize="13dip"
             android:visibility="gone"/>
             </LinearLayout>
             <TextView android:id="@+id/xTvDate_Last_Val"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text=""
                android:textColor="#ffff00"
                android:textSize="13dip"
android:visibility="visible"/>
              <TextView android:id="@+id/xTvSpeed_Val"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text=""
                android:textColor="#ffff00"
                android:textSize="13dip"
              android:visibility="visible"/>
              <TextView android:id="@+id/xTvOffSet_Val"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text=""
                android:textColor="#ffff00"
                android:textSize="13dip"
             android:visibility="visible"/>
        </LinearLayout>
    </LinearLayout>
<LinearLayout android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1">
        </LinearLayout>
<LinearLayout android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/bottombar"
        android:orientation="horizontal"
        android:layout_marginLeft="4dip"
        android:layout_marginRight="4dip">
        <LinearLayout android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1">
        </LinearLayout>
       <RelativeLayout android:id="@+id/xRelLayContacts"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="4dip">
         <ImageView android:id="@+id/xIvContact"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/contact_normalicon"
                    android:visibility="visible"
                    android:layout_centerHorizontal="true"/>
         <TextView android:id="@+id/xTvContact"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_below="@+id/xIvContact"
             android:text="CONTACTS"
             android:textColor="#ffff00"
             android:textSize="12dip"
            android:layout_marginTop="2dip"
             android:layout_centerHorizontal="true"/>
         </RelativeLayout>
       <LinearLayout android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1">
        </LinearLayout>
        <RelativeLayout android:id="@+id/xRelLayInfo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
        android:layout_marginTop="4dip">
         <ImageView android:id="@+id/xIvInfo"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/info_normalicon"
                    android:visibility="visible"
                    android:layout_centerHorizontal="true"/>
         <TextView android:id="@+id/xTvInfo"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_below="@+id/xIvInfo"
             android:text=" INFO "
             android:textColor="#ffff00"
             android:textSize="12dip"
                android:layout_marginTop="2dip"
            android:layout_centerHorizontal="true"/>
         </RelativeLayout>
        <LinearLayout android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1">
        </LinearLayout>
        <ImageView android:id="@+id/xIvStart"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/start_2"
                    android:layout_gravity="center_vertical"
                    android:visibility="visible"/>

        <ImageView android:id="@+id/xIvStop"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/stop_2"
                    android:layout_gravity="center_vertical"
                    android:visibility="gone"/>
          <LinearLayout android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1">
        </LinearLayout>
       <RelativeLayout android:id="@+id/xRelLayEmail"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
          android:layout_marginTop="4dip">
         <ImageView android:id="@+id/xIvEmail"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/email_normalicon"
                    android:visibility="visible"
                    android:layout_centerHorizontal="true"/>
         <TextView android:id="@+id/xTvEmail"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_below="@+id/xIvEmail"
             android:text=" E-MAIL "
             android:textColor="#ffff00"
             android:textSize="12dip"
              android:layout_marginTop="2dip"
         android:layout_centerHorizontal="true"/>
         </RelativeLayout>
        <LinearLayout android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1">
        </LinearLayout>
        <RelativeLayout android:id="@+id/xRelLayPhoto"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
          android:layout_marginTop="4dip">
        <ImageView android:id="@+id/xIvPhotos"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/photo_normalicon"
                    android:layout_centerHorizontal="true"/>
        <TextView android:id="@+id/xTvPhotos"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_below="@+id/xIvPhotos"
             android:text=" PHOTO "
             android:textColor="#ffff00"
             android:textSize="12dip"
              android:layout_marginTop="2dip"
       android:layout_centerHorizontal="true"/>
          </RelativeLayout>
        <LinearLayout android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1">
        </LinearLayout>
    </LinearLayout>
    </LinearLayout>
</LinearLayout> 
```

我正在为所有文本视图设置字体。

我的日志猫：

```
10-10 19:12:34.560: W/System.err(12434): java.lang.NullPointerException
10-10 19:12:34.565: W/System.err(12434):    at android.graphics.Bitmap.createBitmap(Bitmap.java:455)
10-10 19:12:34.565: W/System.err(12434):    at org.abc.artc.ARTCActivity.mSavePhoto(ARTCActivity.java:434)
10-10 19:12:34.565: W/System.err(12434):    at org.abc.artc.ARTCActivity.onClick(ARTCActivity.java:343)
10-10 19:12:34.565: W/System.err(12434):    at android.view.View.performClick(View.java:3591)
10-10 19:12:34.565: W/System.err(12434):    at android.view.View$PerformClick.run(View.java:14263)
10-10 19:12:34.565: W/System.err(12434):    at android.os.Handler.handleCallback(Handler.java:605)
10-10 19:12:34.570: W/System.err(12434):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-10 19:12:34.570: W/System.err(12434):    at android.os.Looper.loop(Looper.java:137)
10-10 19:12:34.570: W/System.err(12434):    at android.app.ActivityThread.main(ActivityThread.java:4507)
10-10 19:12:34.575: W/System.err(12434):    at java.lang.reflect.Method.invokeNative(Native Method)
10-10 19:12:34.575: W/System.err(12434):    at java.lang.reflect.Method.invoke(Method.java:511)
10-10 19:12:34.575: W/System.err(12434):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
10-10 19:12:34.580: W/System.err(12434):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
10-10 19:12:34.580: W/System.err(12434):    at dalvik.system.NativeStart.main(Native Method) 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:53:33.433

感谢大家的快速响应。上述代码在 2.3 中运行良好，但在 4.0 及更高版本中抛出 NPE。这是因为我为子布局设置了边距，因此它返回 null。在 2.3 中，一旦图像保存完成，设备的屏幕就会闪烁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:18:07.730

你打电话`setContentView(R.layout.viewGroup)`前打电话`mSavePhoto()`吗？

你`mLinLayMain`的越来越`NULL`。

检查是否`mLinLayMain` 在您当前的布局文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:27:41.673

你必须`layout`在你`mLinLayMain`之前调用，因为否则视图的维度为 0,0 并且位图将为空。

换行

```
mLinLayMain.buildDrawingCache(true);
Bitmap mBitMap = Bitmap.createBitmap(mLinLayMain.getDrawingCache()); 
```

到

```
mLinLayMain.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
mLinLayMain.layout(0, 0, mLinLayMain.getMeasuredWidth(), mLinLayMain.getMeasuredHeight()); 
mLinLayMain.buildDrawingCache(true);
Bitmap mBitMap = Bitmap.createBitmap(mLinLayMain.getDrawingCache());
mLinLayMain.setDrawingCacheEnabled(false); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T14:40:30.713

我们将哪个布局更改为位图请参见此处 FrameLayout 更改为位图

```
FrameLayout view = (FrameLayout)findViewById(R.id.framelayout);

view.setDrawingCacheEnabled(true);

view.buildDrawingCache();

Bitmap bm = view.getDrawingCache(); 
```

并查看[如何将视图转换为位图？](https://stackoverflow.com/questions/7200535/how-to-convert-views-to-bitmap)

# php - 查看您是否登录了 Facebook（不是应用程序）- php sdk

> ID：12821508
> 
> 赞同：1
> 
> 时间：2012-10-10T14:14:00.763
> 
> 标签：php, facebook

我下载了 Facebook-sdk for php 并玩了一段时间。所以他们有这个示例文件，其中显示了用户信息：facebook-facebook-php-sdk-98f2be1/examples/example.php 它只在接受应用程序后显示用户信息。

也许这甚至是不可能的/不允许的......但是如果用户登录到 Facebook，而不是登录到我的应用程序，我应该知道什么。我不需要他的名字、身份证等，什么都不需要……只是想知道他是否在后台有一个 Facebook 会话。原因：我想将未登录到 Facebook 的用户重定向到其他地方，因为他们可能甚至没有 Facebook 帐户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:59:44.730

> 但我不知道用户是否登录了 Facebook，而不是我的应用程序。[...] 只是想知道他是否在后台有一个 Facebook 会话。

~~那是不可能的。~~

~~如果没有用户首先连接到我们的应用程序，您几乎*什么也得不到*，也没有任何信息。~~

**更新：**

PHP SDK 现在有一个[`getLoginStatusUrl`](https://developers.facebook.com/docs/reference/php/facebook-getLoginStatusUrl/)可以提供该信息的方法。

它可以确定三种不同的状态——用户登录 Facebook、退出 Facebook 或未知。它的工作原理是将用户的浏览器重定向到 Facebook 以进行检查，然后重定向到您可以指定的应用程序的三个不同 URL。

（当然，这在不使用 PHP SDK 的情况下也可以工作——您只需查看它的源代码以查看它创建的确切 URL 是什么，然后您可以自己将用户重定向到那里。）

# ruby-on-rails - 创建新用户适用于 ruby 1.9.2，但使用 ruby 1.9.3 失败

> ID：12821518
> 
> 赞同：0
> 
> 时间：2012-10-10T14:14:43.913
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

我正在使用 Rails 3.2.8 和 Devise 2.1.2（最新），我很困惑为什么我可以使用*完全相同*的代码库使用 Ruby 1.9.2 但不能使用 Ruby 1.9.3 创建用户。

导轨控制台：

```
User.find_or_create_by_email('example@example.com', :password => 'example', :first_name => 'Super', :last_name => 'Admin', :terms_and_conditions => true) 
```

1.9.3 中的输出显示 ROLLBACK（见下文），但我似乎无法弄清楚原因。

使用 1.9.2 时的输出（部分）：

```
SQL (0.3ms)  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "whodunnit") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["created_at", Wed, 10 Oct 2012 13:57:07 UTC +00:00], ["event", "create"], ["item_id", 20], ["item_type", "OrderType"], ["object", nil], ["whodunnit", nil]]
  Currency Load (1.1ms)  SELECT "currencies".* FROM "currencies" WHERE "currencies"."code" = 'USD' LIMIT 1
SQL (2.4ms)  INSERT INTO .. 
(continues with the next insert statement) 
```

使用 1.9.3 时的输出（部分）：

```
SQL (0.3ms)  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "whodunnit") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["created_at", Wed, 10 Oct 2012 12:29:49 UTC +00:00], ["event", "create"], ["item_id", 16], ["item_type", "OrderType"], ["object", nil], ["whodunnit", nil]]
  Currency Load (0.3ms)  SELECT "currencies".* FROM "currencies" WHERE "currencies"."code" = 'USD' LIMIT 1
(0.1ms)  ROLLBACK
=> #<User id: 4, first_name: "Super", last_name: "Admin", admin_notes: nil, email: "example@example.com", ... 
(stops) 
```

我认为这可能是 Devise 的问题，但不确定。

将不胜感激任何帮助！

* * *

10 月 19 日更新：

我发现问题的原因是`after_create`user.rb 中的回调创建了一个“经纪人”（通过经纪人模型），它设置佣金 = 9.95

从 broker.rb 中的注释：

```
#  commission :decimal(, ) 
```

更多来自 broker.rb：

```
belongs_to :user
PRICE_REGEX = /^([1-9]\d{0,20}|0)(\.\d{0,3})?$/
PRICE_ERROR_MESSAGE = "Must be a number. If you want to include decimals, please use comma as decimal separator. Periods (.) = thousand separator cannot be used."
validates :commission, :format => {:with => PRICE_REGEX, :message => PRICE_ERROR_MESSAGE }, :allow_blank => true 
```

如上所述，将经纪人佣金设置为 9.95 在 ruby​​ 1.9.2 上可以正常工作，但在 ruby​​ 1.9.3 上会失败。

在 1.9.3 中通过 rails 控制台保存它时，我收到“ActiveRecord::RecordInvalid: Validation failed...”错误。1.9.2 没有错误。

如果我将其设置为 10 而不是 9.95，则它在 1.9.2 和 1.9.3 中都可以使用（经纪人佣金设置为 10）。

如果我将其设置为 9,95（逗号，而不是句点），则用户和经纪人创建得很好，但经纪人佣金设置为 0。

正如验证错误消息所说，句点 (.) 是不允许的，因此验证失败是有道理的，但是在我切换到 1.9.3 之前，它可能是 ruby​​ 1.9.2 中的一个错误，它可以工作。

欢迎任何好的解释:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:49:40.207

保存检查失败后@user.errors 它可能有一个线索

编辑

在你的 Rails 控制台中

```
@user = User.find_or_create_by_email('example@example.com', :password => 'example', :first_name => 'Super', :last_name => 'Admin', :terms_and_conditions => true)
@user.errors 
```

或者

```
@user.errors.full_messages 
```

# c++ - 如何将 DirectX 库包含到我自己的静态库（独立库）中？

> ID：12821523
> 
> 赞同：0
> 
> 时间：2012-10-10T14:15:03.740
> 
> 标签：c++, directx, static-libraries

我正在编写自己的库来实现 Engine3D 接口（由我制作）。

该库的“用户”应在其项目中包含它（以及 Engine3D 接口的标头）并在没有任何其他库等的情况下运行它。

不幸的是，当我从我的项目中创建一个静态库时，“用户”必须同时包含我的库和 DirectX 库，为 DirectX 设置目录等。

**有什么方法可以让它变得简单**（他需要的一切只需要一个库）**并且对用户透明**（**没有 DirectX 库，项目中的目录，都*在*我自己的库**中）？

我正在使用 Visual C++ 2012。我不想制作动态库，而是制作静态库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T00:44:40.167

巨大的巧合，因为我在一小时前遇到了完全相同的问题，并找到了一个非常简单的解决方案。如果您使用#pragma 注释指令来包含您的 Directx 库，您只需向它们提供您的库的完整路径（而不仅仅是名称），如下所示：

```
#pragma comment ( lib, "c:/Softwares/Development/Lib/DirectX/Lib/x86/dxgi.lib" )
#pragma comment ( lib, "c:/Softwares/Development/Lib/DirectX/Lib/x86/d3d11.lib" )
#pragma comment ( lib, "c:/Softwares/Development/Lib/DirectX/Lib/x86/d3dx11.lib" )
#pragma comment ( lib, "c:/Softwares/Development/Lib/DirectX/Lib/x86/d3dx10.lib" ) 
```

显然，我的示例中的路径与我的个人配置有关，您应该定义正确的路径到您计算机上的 DirectX libs 目录。然后，您只需转到您的项目配置 -> C/C++ -> 常规 -> 附加包含目录并设置您的 DirectX 包含文件的路径。

而已！现在您可以编译您的 DirectX 接口并将其链接到另一个项目，而无需此后进行更多设置。

我希望它会帮助你，并为我糟糕的英语感到抱歉。:)

# mysql - int 到 MySQL 中的字符串

> ID：12821528
> 
> 赞同：30
> 
> 时间：2012-10-10T14:15:16.577
> 
> 标签：mysql

有可能做这样的事情吗？本质上，我想将 int 转换为字符串并在连接中使用该字符串。注意**`%t1.id%`**

```
select t2.* 
from t1 
join t2 on t2.url='site.com/path/%t1.id%/more' 
where t1.id > 9000 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2014-07-13T14:25:52.287

如果您有一个名为“col1”的列，它是 int，则将其转换为 String，如下所示：

```
CONVERT(col1,char) 
```

例如，这允许您检查一个 int 值是否包含另一个值（此处为 9），如下所示：

```
CONVERT(col1,char) LIKE '%9%' 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-10T14:19:50.073

您可以使用[CONCAT](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)，它的数字参数将转换为其等效的二进制字符串形式。

```
select t2.* 
from t1 join t2 
on t2.url=CONCAT('site.com/path/%', t1.id, '%/more') where t1.id > 9000 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T14:20:15.927

```
select t2.* 
from t1 join t2 on t2.url='site.com/path/%' + cast(t1.id as varchar)  + '%/more' 
where t1.id > 9000 
```

使用建议的 concat 会更好

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-10T14:18:06.623

尝试使用`CONCAT`

```
CONCAT('site.com/path/','%', CAST(t1.id AS CHAR(25)), '%','/more') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T14:17:22.247

你可以这样做：

```
select t2.*
from t1
join t2 on t2.url = 'site.com/path/' + CAST(t1.id AS VARCHAR(10)) + '/more' 
where t1.id > 9000 
```

注意`CAST(t1.id AS VARCHAR(10))`。

# sql - 中位数的脚本是否可以泛化并放入函数类型结构中

> ID：12821532
> 
> 赞同：0
> 
> 时间：2012-10-10T14:15:25.147
> 
> 标签：sql, sql-server, sql-server-2008-r2

我们使用以下脚本来计算中位数：

```
SELECT 
        [Period] = 'amountPeriodA',             
        [Median] = AVG(x.amountPeriodA)         
INTO    #mediantable
FROM (
        SELECT 
                r.customer,
                r.amountPeriodA,
                [RowASC] = ROW_NUMBER() OVER(ORDER BY r.amountPeriodA ASC, customer ASC),
                [RowDESC] = ROW_NUMBER() OVER(ORDER BY r.amountPeriodA DESC, customer DESC)
        FROM #MyExample r 
    ) x
WHERE RowASC IN (RowDESC, ROWDESC-1, ROWDESC+1) 
```

是否可以概括这样的脚本，然后将其编码到服务器中，以便将来我们只需指定相应的表和列作为参数，结构返回`Median`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:22:53.800

我认为你需要的是一个`stored procedure`. 当您使用不同的参数多次执行相同的查询时，这很好。

[这](http://www.mssqltips.com/sqlservertutorial/160/sql-server-stored-procedure/)是一个关于存储过程的好教程`SQL SERVER`

> 存储过程只不过是您保存的准备好的 SQL 代码，因此您可以一遍又一遍地重用代码。

# ruby - 通过传递构造函数的 Ruby YAML 解析器

> ID：12821534
> 
> 赞同：9
> 
> 时间：2012-10-10T14:15:35.280
> 
> 标签：ruby, yaml

我正在开发一个应用程序，该应用程序从 YAML 文件中获取输入，将它们解析为对象，然后让它们做自己的事情。我现在遇到的唯一问题是 YAML 解析器似乎忽略了对象“初始化”方法。我指望构造函数填充 YAML 文件缺少默认值的任何实例变量，并将一些东西存储在类变量中。这是一个例子：

```
class Test

    @@counter = 0

    def initialize(a,b)
        @a = a
        @b = b

        @a = 29 if @b == 3

        @@counter += 1
    end

    def self.how_many
        p @@counter
    end

    attr_accessor :a,:b

end

require 'YAML'

a = Test.new(2,3)
s = a.to_yaml
puts s
b = YAML::load(s)
puts b.a
puts b.b
Test.how_many

puts ""

c = Test.new(4,4)
c.b = 3
t = c.to_yaml
puts t
d = YAML::load(t)
puts d.a
puts d.b
Test.how_many 
```

我本来希望上面的输出：

```
--- !ruby/object:Test
a: 29
b: 3
29
3
2

--- !ruby/object:Test
a: 4
b: 3
29
3
4 
```

相反，我得到了：

```
--- !ruby/object:Test
a: 29
b: 3
29
3
1

--- !ruby/object:Test
a: 4
b: 3
4
3
2 
```

如果不使用它们定义的初始化方法，我不明白它是如何制作这些对象的。我还想知道是否有强制解析器使用初始化方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T19:54:43.263

从 Yaml 反序列化对象不使用该`initialize`方法，因为通常在对象的实例变量（这是默认 Yaml 序列化存储的内容）和`initialize`.

作为一个例子，考虑一个`initialize`看起来像这样的对象（没有其他实例变量）：

```
def initialize(param_one, param_two)
  @a_variable = some_calculation(param_one, param_two)
end 
```

现在当反序列化 this 的一个实例时，Yaml 处理器有一个值 for `@a_variable`，但是该`initialize`方法需要*两个*参数，所以它不能调用它。即使实例变量的数量与参数的数量相匹配，`initialize`它们也不一定是对应的，即使它们对应，处理器也不知道它们应该传递给的顺序`initialize`。

将 Ruby 对象序列化和反序列化到 Yaml 的默认过程是在序列化期间写出所有实例变量（及其名称），然后在反序列化时分配该类的新实例并在此新实例上简单地设置相同的实例变量。

当然，有时您需要更多地控制此过程。如果您使用的是 Psych Yaml 处理器（这是 Ruby 1.9.3 中的默认值），那么您应该适当地实现`encode_with`（用于序列化）或或`init_with`（用于反序列化）方法。

对于序列化，如果对象存在，Psych 将调用对象的`encode_with`方法，并传递一个[`coder`object](https://github.com/tenderlove/psych/blob/v1.3.4/lib/psych/coder.rb)。这个对象允许你指定对象应该如何在 Yaml 中表示——通常你只是把它当作一个哈希。

对于反序列化，如果该方法存在于您的对象上，Psych 将调用该`init_with`方法，而不是使用上述默认过程，再次传递一个`coder`对象。这次`coder`将包含有关 Yaml 中对象表示的信息。

请注意，您不需要同时提供这两种方法，如果需要，您可以只提供其中一种。如果两者都提供，则`coder`传入的对象本质上与该方法运行后`init_with`传递给的对象相同。`encode_with`

举个例子，考虑一个对象，它有一些实例变量是从其他变量中计算出来的（可能是为了避免大量计算的优化），但不应该序列化到 Yaml。

```
class Foo

  def initialize(first, second)
    @first = first
    @second = second
    @calculated = expensive_calculation(@first, @second)
  end

  def encode_with(coder)
    # @calculated shouldn’t be serialized, so we just add the other two.
    # We could provide different names to use in the Yaml here if we
    # wanted (as long as the same names are used in init_with).
    coder['first'] = @first
    coder['second'] = @second
  end

  def init_with(coder)
    # The Yaml only contains values for @first and @second, we need to
    # recalculate @calculated so the object is valid.
    @first = coder['first']
    @second = coder['second']
    @calculated = expensive_calculation(@first, @second)
  end

  # The expensive calculation
  def expensive_calculation(a, b)
    ...
  end
end 
```

当你将这个类的一个实例转储到 Yaml 时，它看起来像这样，没有`calculated`值：

```
--- !ruby/object:Foo
first: 1
second: 2 
```

当您将此 Yaml 加载回 Ruby 时，创建的对象将`@calculated`设置实例变量。

如果你愿意，你*可以*`initialize`从inside调用`init_with`，但我认为在初始化类的*新*实例和从 Yaml反序列化*现有实例之间保持清晰的分离会更好。*我建议将通用逻辑提取到可以从两者调用的方法中，

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T17:39:26.527

如果您只希望纯 ruby​​ 类使用`@`-style 实例变量（而不是来自已编译扩展而不是`Struct`-style）的纯 ruby​​ 类的这种行为，则以下内容应该有效。YAML 似乎`allocate`在加载该类的实例时调用类方法，即使该实例嵌套为另一个对象的成员也是如此。所以我们可以重新定义`allocate`. 例子：

```
class Foo
  attr_accessor :yaml_flag
  def self.allocate
    super.tap {|o| o.instance_variables.include?(:@yaml_flag) or o.yaml_flag = true }
  end
end
class Bar
  attr_accessor :foo, :yaml_flag
  def self.allocate
    super.tap {|o| o.instance_variables.include?(:@yaml_flag) or o.yaml_flag = true }
  end
end

>> bar = Bar.new
=> #<Bar:0x007fa40ccda9f8>
>> bar.foo = Foo.new
=> #<Foo:0x007fa40ccdf9f8>
>> [bar.yaml_flag, bar.foo.yaml_flag]
=> [nil, nil]
>> bar_reloaded = YAML.load YAML.dump bar
=> #<Bar:0x007fa40cc7dd48 @foo=#<Foo:0x007fa40cc7db90 @yaml_flag=true>, @yaml_flag=true>
>> [bar_reloaded.yaml_flag, bar_reloaded.foo.yaml_flag]
=> [true, true]

# won't overwrite false
>> bar.foo.yaml_flag = false
=> false
>> bar_reloaded = YAML.load YAML.dump bar
=> #<Bar:0x007fa40ccf3098 @foo=#<Foo:0x007fa40ccf2f08 @yaml_flag=false>, @yaml_flag=true>
>> [bar_reloaded.yaml_flag, bar_reloaded.foo.yaml_flag]
=> [true, false]

# won't overwrite nil
>> bar.foo.yaml_flag = nil
=> nil
>> bar_reloaded = YAML.load YAML.dump bar
=> #<Bar:0x007fa40cd73518 @foo=#<Foo:0x007fa40cd73360 @yaml_flag=nil>, @yaml_flag=true>
>> [bar_reloaded.yaml_flag, bar_reloaded.foo.yaml_flag]
=> [true, nil] 
```

我故意避免`o.nil?`检查`tap`块，因为`nil`实际上可能是您不想覆盖的有意义的值。

最后一个警告：`allocate`可能由第三方库（或您自己的代码）使用，您可能不想在这些情况下设置成员。如果你想限制分配，只加载 yaml，你将不得不做一些更脆弱和复杂的事情，比如检查`caller`allocate 方法中的堆栈以查看 yaml 是否正在调用它。

我正在使用 ruby​​ 1.9.3（带有 psych），堆栈顶部看起来像这样（路径前缀已删除）：

```
psych/visitors/to_ruby.rb:274:in `revive'",
psych/visitors/to_ruby.rb:219:in `visit_Psych_Nodes_Mapping'",
psych/visitors/visitor.rb:15:in `visit'",
psych/visitors/visitor.rb:5:in `accept'",
psych/visitors/to_ruby.rb:20:in `accept'",
psych/visitors/to_ruby.rb:231:in `visit_Psych_Nodes_Document'",
psych/visitors/visitor.rb:15:in `visit'",
psych/visitors/visitor.rb:5:in `accept'",
psych/visitors/to_ruby.rb:20:in `accept'",
psych/nodes/node.rb:35:in `to_ruby'",
psych.rb:128:in `load'", 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T20:31:27.347

> [from_yaml(输入)](http://rubygems.rubyforge.org/rubygems-update/Gem/Specification.html#method-c-from_yaml)
> 
> YAML 文件的特殊加载器。**当从 YAML 文件加载[规范](http://rubygems.rubyforge.org/rubygems-update/Gem/Specification.html)对象时，它会绕过正常的 Ruby 对象初始化例程（初始化）。**这种方法弥补了这一点，并处理不同年龄的宝石。
> 
> 输入可以是 YAML.load() 接受的任何内容：字符串或 IO。

这就是执行时未运行初始化方法的原因`YAML::Load`。

# java - Apache James Server 设置消息 ID

> ID：12821539
> 
> 赞同：2
> 
> 时间：2012-10-10T14:15:53.797
> 
> 标签：java, jakarta-mail, james

我配置了 Apache James Server 3.0-beta4 并且能够发送/接收电子邮件。出现的问题是我需要能够更改服务器上消息的 ID。我可以看到所有消息的 ID，但我无法手动设置它们。我有一个应用程序将使用原始格式的电子邮件，并且我希望能够手动设置它们的 ID。有什么办法可以做到吗？

# c++ - Walk Directory 递归问题

> ID：12821541
> 
> 赞同：0
> 
> 时间：2012-10-10T14:15:57.470
> 
> 标签：c++, directory, qt-creator, subdirectory, qlist

我正在尝试递归遍历目录并修改其内容，应该对所有文件和子目录的文件进行修改。

```
void EncryptMountedFolder(QString DirPath)
{
        QStringList listFile;
        QStringList listDir;
        int r=0;
    if(WalkDir(DirPath,listFile,listDir))
     {

        foreach (QString filePath, listFile)
        {
        //modif of file with filePath as path
        }

        foreach(QString subdirPath, listDir)
        {
            EncryptMountedFolder(subdirPath);
        }

      }
      else qDebug()<<"can not find "<<DirPath<<"or it is not folder path ";

} 
```

`WalkDir`功能：

```
bool WalkDir(QString DirPath, QStringList &FList, QStringList &DList)
{
    QString p=QDir::fromNativeSeparators(DirPath);
    QDir dir( p );
    if(dir.exists())
    {           
          dir.setFilter( QDir::Dirs | QDir::Files | QDir::NoSymLinks );
          const QFileInfoList fileinfolist = dir.entryInfoList();

          foreach(const QFileInfo& fi,fileinfolist)
              if(fi.baseName() != "")
              {
                if( fi.isDir() && fi.isReadable() )
                 DList=DList << fi.absoluteFilePath() ;
                 else
                    FList= FList<< fi.absoluteFilePath();
              }              
        return true;
    }
    else
        {    qDebug()<<"not valid dir path or doesn't exist"<<DirPath ;
             return false;
         }    
} 
```

所有子目录下的文件都按我的意愿进行了修改，但它崩溃了，我得到：`Critical error detected c0000374` 指向我`qlist.h`在`Q_OUTOFLINE_TEMPLATE void QList<T>::free(QListData::Data *data)`函数行 中`qFree(data);`

谁能找出我想念的东西？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T06:25:51.070

根据我最后的评论，这是我简化步行功能的建议（基于[this](http://my.safaribooksonline.com/book/programming/qt/0596000642/working-with-files-and-directories/prowqt2-chp-11-sect-2)）：

```
void walk( const QString& dirname )
{
  QDir dir( dirname );
  dir.setFilter( QDir::Dirs | QDir::Files | QDir::NoSymLinks );

  const QFileInfoList fileinfolist = dir.entryInfoList();
  foreach( const QFileInfo& fi,fileinfolist ) {
    if( fi.baseName() == "." || fi.baseName() == ".."  || fi.baseName() == "" ) {
      continue;
    }
    if( fi.isDir() && fi.isReadable() ) {
      // This is the conditional for recursion
      walk( fi.absoluteFilePath() );
    }
    else {
      // This is where you might call your encrypting function
      qDebug() << "Encrypting file: " << fi.absoluteFilePath();
      encrypt( fi.absoluteFilePath() );
    }
  }
} 
```

您还可以通过将加密函数作为回调传递给 walk() 来使其更通用。这样您就可以将其重新用于您可能需要应用的其他类型的处理。

此外，如果您热衷于测试您的代码，您可能会注意到我之前的建议是不可单元测试的：对于一个易于测试的方法，它应该具有非依赖的输入和输出，并且您的测试将检查输出与预期值相反。

所以这是一个返回从给定目录树收集的所有文件列表的版本：

```
QStringList walk( const QString& dirname )
{
  QDir dir( dirname );
  dir.setFilter( QDir::Dirs | QDir::Files | QDir::NoSymLinks );

  const QFileInfoList fileinfolist = dir.entryInfoList();
  QStringList collectedFileList;
  foreach( const QFileInfo& fi,fileinfolist ) {

    if( fi.baseName() == "." || fi.baseName() == ".."  || fi.baseName() == "" ) {
      continue;
    }

    if( fi.isDir() && fi.isReadable() ) {
      collectedFileList << walk( fi.absoluteFilePath() );
    }
    else {
      collectedFileList << fi.absoluteFilePath();
    }
  }
  return collectedFileList;
} 
```

现在您可以添加第三种方法来遍历文件并加密它们：

```
void encryptDirectoryTree( const QString& dirname )
{
     QStringList filesInDir = walk( dirname );
     foreach( const QString& filePath, filesInDir ) {
        encrypt( filePath );
     }
} 
```

# ruby-on-rails - Rails 引擎/如何使用种子？

> ID：12821550
> 
> 赞同：13
> 
> 时间：2012-10-10T14:16:20.527
> 
> 标签：ruby-on-rails, rails-engines, seed

我创建了一个 Rails 引擎。我在使用种子命令时遇到了问题，如果我运行 rake db:seed 我得到错误：“未初始化的常量”。

在引擎中，我得到了一个seeds.rb：

`Page.create(:title => 'Frontpage', :order => '1')`

然后在我的虚拟应用程序中，我得到了一个seeds.rb

```
cms::Engine.load_seed 
```

（cms 是引擎的名称）——不过我现在遇到了一个错误，即“未初始化的常量”。如何从虚拟应用程序中引用常量？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-10T16:15:13.297

好的，我知道了！- 答案是：

在引擎中，在 db 文件夹中添加一个 seed.rb，将应用名称添加到每个常量之前，如下所示：

```
Cms::Page.create(:title => 'Frontpage', :order => '1') 
```

在虚拟应用程序或您要添加引擎的应用程序中，将 seed.rb 添加到 db 文件夹中：

```
Cms::Engine.load_seed 
```

并运行：

```
rake db:seed 
```

在终端。

# actionscript-3 - AS3 字符串内存泄漏

> ID：12821553
> 
> 赞同：3
> 
> 时间：2012-10-10T14:16:30.857
> 
> 标签：actionscript-3, apache-flex, memory-management, memory-leaks, flex4.5

我在 AS3 中编程了一段时间，发现一个非常奇怪的字符串问题，没有明显的原因挂在内存上，下面的程序只是用随机字符串更改 label.text 属性，它工作正常但是当我查看 Flex 分析器我注意到字符串的数量在稳步增加，我尝试执行垃圾收集器但没有帮助我。

这是内存泄漏吗？我该如何解决？

据我所知，这些字符串应该由垃圾收集器收集，因为没有对象引用它们，但并非所有字符串都发生这种情况。

这是 Flex 分析器的代码和屏幕截图，显示了 String 实例的数量。

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                   xmlns:s="library://ns.adobe.com/flex/spark" 
                   xmlns:mx="library://ns.adobe.com/flex/mx" creationComplete="windowedapplication1_creationCompleteHandler(event)">
<s:layout>
    <s:BasicLayout/>
</s:layout>
<fx:Script>
    <![CDATA[
        import mx.events.FlexEvent;

        protected var t:Timer=new Timer(10);

        protected function windowedapplication1_creationCompleteHandler(event:FlexEvent):void
        {
            t.addEventListener(TimerEvent.TIMER,listener,false,0,true);
            t.start();
        }

        protected function listener(e:Event):void
        {
            var s:String=Math.random()+"-->";
            this.fx(s);
            s=null;
        }

        protected function fx(s:String):void
        {
            this.label.text=s;
        }
    ]]>
</fx:Script>
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<s:Label id="label" y="39" left="10" right="10" text="Label"/>
</s:WindowedApplication> 
```

抱歉，不到 10 分，这是分析器截图 [http://imageshack.us/a/img11/9716/stackw.png](http://imageshack.us/a/img11/9716/stackw.png)

**解决了**

Baris 和 Loxxy，你是对的，我做了一些更改以隔离问题，它增长到 ~30Mb，然后垃圾收集器释放一些内存，它永远不会回到 ~2mb（起点），但图表开始从~20mb 到 ~30mb 一遍又一遍。

这是测试这个的代码

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                   xmlns:s="library://ns.adobe.com/flex/spark" 
                   xmlns:mx="library://ns.adobe.com/flex/mx" creationComplete="windowedapplication1_creationCompleteHandler(event)">
<s:layout>
    <s:BasicLayout/>
</s:layout>
<fx:Script>
    <![CDATA[
        import mx.events.FlexEvent;
        protected var maxMemoryUsage:Number=0;
        protected var i:Number=0;

        protected function windowedapplication1_creationCompleteHandler(event:FlexEvent):void
        {
            setTimeout(Fx,20);
        }

        protected function Fx():void
        {
            if(i++%1024==0) 
            {
                var mem:Number=System.totalMemory;
                this.maxMemoryUsage = mem>this.maxMemoryUsage?mem:this.maxMemoryUsage;
                trace(this.maxMemoryUsage + ' / ' + mem);
            }

            var s:String="";
            s+=Math.random().toString()+"qwertyuiu...1024 random chars...iiwqe";
            this.aSimpleString=s;
            setTimeout(Fx,20);
        }
    ]]>
</fx:Script>
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
    <fx:String id="aSimpleString"/>
</fx:Declarations>
</s:WindowedApplication> 
```

也调用 System.gc() 什么也没做，也许 gc 需要一些暂停才能运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T14:54:27.163

垃圾收集器将随时运行。通常它发生在分配新对象时，但如果内存使用率不高，它可能不会发生在您的情况下。

您可以尝试调用`System.gc()`以查看它是否释放了这些字符串。但是您不应该在生产代码中使用它。

有关更多信息，请参阅[此](https://stackoverflow.com/a/192418/583363)答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T15:54:19.853

你没有写一个计时器来运行低于推荐的延迟吗？ `new Timer(10);`

从[这里](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Timer.html#delay)

> 不推荐低于 20 毫秒的延迟。定时器频率限制为每秒 60 帧，这意味着低于 16.6 毫秒的延迟会导致运行时问题。

正如 Baris 之前所说，人们在他们的应用程序中会遇到大量内存，这就是神奇的 gc 到达解决内存问题的时候。除此之外，您既不需要担心它，也不能手动对其进行任何操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T00:16:05.897

这可能与[Master Strings](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/sampler/package.html#getMasterString%28%29)相关，这是Flash 运行时用来最小化相关字符串数据块的冗余分配的内存优化。

[您可以在这篇博客文章Flash String 怪异](http://webcache.googleusercontent.com/search?q=cache%3alMfXUk1B6LgJ%3ajunkbyte.com/wp/as3/flash-string-weirdness/%20&cd=1&hl=en&ct=clnk&gl=us)中阅读有关真实世界影响的详细分析。

以下是该帖子中与 SO 相关的一些亮点：

> 结果
> 
> *   如果您从长字符串中取出部分字符串，它将保留长字符串。
> *   如果您加入超过 2 个字符串，它将保留第二个字符串作为主字符串。
> *   如果您循环并一起添加字符串，它将与上面相同，它将开始保留您第三次添加的主字符串。
> *   循环字符串测试似乎表明每个字符串都可以有一个父链。
> *   这不能被遵守，因为我们只能访问返回链根的“getMasterString()”。
> 
> …</p>
> 
> 结论
> 
> *   字符串有“父字符串”
> *   XML 保持对它的父字符串的引用
> *   字符串可能会泄漏内存
> *   由于上述原因，控制台图形似乎泄漏

# php - 如何更改会话 ID？

> ID：12821554
> 
> 赞同：0
> 
> 时间：2012-10-10T14:16:33.860
> 
> 标签：php, zend-framework2

如何使用 切换到以前保存的会话`Zend\Session\SessionManager`？我知道会话 ID。

例如，这不起作用：

```
$sm->start();
$sm->setId('abc'); 
```

`$_SESSION`不会包含会话“abc”的数据。`$sm->writeClose()`之后调用`$sm->start()`也无济于事。

我可以使用标准的 PHP 函数轻松地做到这一点：

```
session_start();
session_write_close();

session_id('abc');
session_start();

//$_SESSION is populated with 'abc' data. 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-10T14:33:06.710

Zend 为此使用会话名称空间。如果你给会话一个这样的名字

```
$sess = new Zend_Session_Namespace('abc'); 
```

您可以通过`$sess->var`再次创建具有相同名称的新会话来访问内容并将会话重新加载到不同的 PHP 文件中。

[http://framework.zend.com/manual/1.12/de/zend.session.basic_usage.html](http://framework.zend.com/manual/1.12/de/zend.session.basic_usage.html)

# javascript - 如何在 Ruby on Rails 3.x 中调用 jQuery（使用 CoffeeScript）代码以获得更好的性能？

> ID：12821560
> 
> 赞同：0
> 
> 时间：2012-10-10T14:16:57.360
> 
> 标签：javascript, jquery, coffeescript

我正在开发一个复杂的 Web 应用程序，现在我要重构 jQuery 调用。我将 CoffeeScript 代码拆分为不同控制器的单独文件。

在我当前调用的每个文件中

```
jQuery -> 
  $('.someClass').click ->
    # doSomething 
```

是否需要在每个文件中重新调用jQuery的初始化函数？

谢谢拉斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:23:45.620

$ 符号是 Jquery 的别名。所以不，你不需要初始化 Jquery 函数。

# sparql - 从 dbpedia 或 LinkedGeoData 中提取城市数据

> ID：12821563
> 
> 赞同：1
> 
> 时间：2012-10-10T14:17:12.143
> 
> 标签：sparql, semantic-web, geography

我现在尝试了几个小时来弄清楚如何从 dbpedia 或 LinkedGeoData 中获取各种信息。我使用了这个界面（http://dbpedia.org/snorql）并尝试了不同的方法，但我从来没有得到我需要的结果。

如果我使用这样的东西：

```
SELECT * WHERE {
?subject rdf:type <http://dbpedia.org/ontology/City>.
    OPTIONAL {
        ?subject <http://dbpedia.org/ontology/populationTotal> ?populationTotal.
    }
    OPTIONAL {
        ?subject <http://dbpedia.org/ontology/populationUrban> ?populationUrban.
    }
    OPTIONAL {
        ?subject <http://dbpedia.org/ontology/areaTotal> ?areaTotal.
    }
    OPTIONAL {
        ?subject <http://dbpedia.org/ontology/populationUrbanDensity> ?populationUrbanDensity.
    }
    OPTIONAL {
        ?subject <http://dbpedia.org/ontology/isPartOf> ?isPartOf.
    }
    OPTIONAL {
        ?subject <http://dbpedia.org/ontology/country> ?country.
    }
    OPTIONAL {
        ?subject <http://dbpedia.org/ontology/utcOffset> ?utcOffset.
    }
    OPTIONAL {
        ?subject <http://dbpedia.org/property/janHighC> ?utcOffset.
    }
    OPTIONAL {
        ?subject <http://dbpedia.org/property/janLowC> ?utcOffset.
    }
}
LIMIT 20 
```

我用完了限制。

我也试过这个：

```
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>

SELECT *  WHERE {
  ?subject rdf:type <http://dbpedia.org/ontology/City>.
  ?subject rdfs:label ?label.
FILTER ( lang(?label) = 'en'
}
LIMIT 100 
```

但这给了我一个错误，我不明白。如果我删除过滤器，它可以工作，但给我所有语言的标签......

我正在寻找的是这样的[http://dbpedia.org/page/Vancouver](http://dbpedia.org/page/Vancouver) 但不是所有数据，而是其中一些数据，例如人口，面积，国家，海拔，纬度，经度，时区，标签@en， abstract@en 等

有人可以帮助我获得有效的语法吗？

谢谢大家的帮助。

* * *

**更新：**

到目前为止，我可以使用它：

```
SELECT DISTINCT *
WHERE {
   ?city rdf:type dbpedia-owl:Settlement ;
         rdfs:label ?label;
         dbpedia-owl:abstract ?abstract ;
         dbpedia-owl:populationTotal ?pop ;
         dbpedia-owl:country ?country ;
         dbpprop:website ?website .
   FILTER ( lang(?abstract) = 'en' && lang(?label) = 'en')
}
LIMIT 20 
```

但是，如果我想获得所有定居点，仍然会超出限制。顺便提一句。有没有办法将所有城市和定居点放在一张桌子上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T07:49:51.057

“超出限制”是指错误“Bandwidth Limit Exceeded URI = '/!sparql/'”吗？我想这是 dbpedia 设置的限制，以确保它不会被需要“永远”运行的查询淹没，如果是这样，那么您可能无能为力。您可以使用 OFFSET、LIMIT 和 ORDER BY 以块的形式请求数据，请参阅[http://www.w3.org/TR/rdf-sparql-query/#modOffset](http://www.w3.org/TR/rdf-sparql-query/#modOffset)。

更新：是的，这似乎是要走的路：http: [//www.mail-archive.com/dbpedia-discussion@lists.sourceforge.net/msg03368.html](http://www.mail-archive.com/dbpedia-discussion@lists.sourceforge.net/msg03368.html)

在第二个查询中，错误是缺少括号。这个

```
FILTER ( lang(?label) = 'en' 
```

应该

```
FILTER ( lang(?label) = 'en') 
```

对于您的最后一个问题，在一个查询/表中收集多个事物/（类似查询）的一种自然方法是使用 UNION，例如，

```
SELECT ?x
WHERE {
  { ?x rdf:type dbpedia-owl:City }
UNION
  { ?x rdf:type dbpedia-owl:Settlement }
} 
```

# java - Java Scanner 在 For 循环后不接受输入

> ID：12821567
> 
> 赞同：1
> 
> 时间：2012-10-10T14:17:16.493
> 
> 标签：java, input, for-loop

我目前正在开发一个程序，该程序要求输入两个团队的名称和分数。当我要求输入第一队的姓名和 9 分时，扫描仪接受输入就好了。但是，在 for 循环之后，扫描器不接受输入第二个团队的名称。这不是整个程序，但我已经包含了所有代码，直到它给我带来麻烦为止。我怀疑它可能与 for 循环有关，因为当我将它放在 for 循环之前时，team2 可以很好地接受用户输入。

```
import java.util.Scanner;
public class sportsGame{
    public static void main(String[] args){
        Scanner input = new Scanner(System.in);
        String team1;
        String team2;
        int team1Scores[] = new int[9]
        int team1Total = 0;
        int team2Scores[] = new int[9];
        int team2Total = 0;

        System.out.print("Pick a name for the first team: ");
        team1 = input.nextLine();

        System.out.print("Enter a score for each of the 9 innings for the "
                + team1 + " separated by spaces: ");
        for(int i = 0; i < team1Scores.length; i++){
            team1Scores[i] = input.nextInt();
            team1Total += team1Scores[i];
        }
        System.out.print("Pick a name for the second team: ");
        team2 = input.nextLine();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T14:19:30.613

Scanner 的 nextInt 方法不会跳过一行，只获取 int。因此，当第一个循环结束时，还剩下一个换行符，并且您的 input.nextLine() 返回一个空白字符串。在循环之后添加一个 input.nextLine() 以跳过此空白行并解决您的问题，如下所示：

```
for(int i = 0; i < team1Scores.length; i++){
    team1Scores[i] = input.nextInt();
    team1Total += team1Scores[i];
    }
input.nextLine();
//rest of your code 
```

# linq-to-sql - 为什么我们需要 LINQ，甚至它也在后台使用查询

> ID：12821575
> 
> 赞同：1
> 
> 时间：2012-10-10T14:17:43.447
> 
> 标签：linq-to-sql

为什么我们需要 LINQ？它还在后台生成查询并在 SQL 中执行，我们可以手动完成。

任何实时示例将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:28:26.673

对于 SQL，您并不特别*需要*LINQ。如果你愿意，你可以做所有相同的事情。使用 LINQ 恰好在以下几个方面更方便：

*   你最终得到一个`IEnumerable`你不必关心其内部运作的东西。只需像对列表或数组一样迭代它。获取行、更新游标等不需要代码。

*   从消费者的角度来看，这与对*objects*`IEnumerable`的查询相同，这是 LINQ 真正大放异彩的地方之一。您可以将一个替换为另一个，其余代码永远不需要知道。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:19:58.610

linq 不仅与数据库有关，您还可以将 linq 应用于列表、数组或任何数据集合......*

# wcf - 由于数据合同的类型，WCF Web 服务无法正常工作

> ID：12821581
> 
> 赞同：0
> 
> 时间：2012-10-10T14:18:00.403
> 
> 标签：wcf, web-services

当我通过“ **WcfTestClient** ”测试我的 WCF Web 服务时，它显示

" *wcf 测试客户端不支持此操作，因为它使用类型 VINDescription* "

其中**VINDescription 是一个 DataContract，**它由以下类型的数据成员组成：

```
"int, string, ArrayList" 
```

似乎 WCF Web 服务不支持 ArrayList？

请建议我该如何解决这个问题？

这是 DataContract 的代码片段：

```
[DataContract]
public class VINDescription
{
    #region Private Members

    private int _cylinders = 0;
    private string _msrp = string.Empty;
    private ArrayList _interior = new ArrayList();
    private string[][] _showOptionalEquipment = new string[][] { };

    #endregion

    #region Public Data Members

    /// <summary>
    /// Stores the number of cylinders of a decoded vehicle.
    /// </summary>
    [DataMember]
    public int Cylinders
    {
        get
        {
            return _cylinders;
        }
        set
        {
            _cylinders = value;
        }
    }

    /// <summary>
    /// Stores the MSRP cost of a decoded vehicle.
    /// </summary>
    [DataMember]
    public string MSRP
    {
        get
        {
            return _msrp;
        }
        set
        {
            _msrp = value;
        }
    }

    /// <summary>
    /// Stores the interior values of a decoded vehicle.
    /// </summary>
    [DataMember]
    public ArrayList Interior
    {
        get
        {
            _interior.Sort();
            return _interior;
        }
        set
        {
            _interior = value;
        }
    }

    /// <summary>
    /// To store the data for show optional equipments.
    /// </summary>
    [DataMember]
    public string[][] ShowOptionalEquipment
    {
        get
        {
            return _showOptionalEquipment;
        }
        set
        {
            _showOptionalEquipment = value;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:27:00.103

据我了解，WCF 实际上支持您的数据协定，但 WCF 测试客户端工具不支持 WCF 本身支持的所有内容，因此出现错误。不确定是因为 ArrayList、string[][] 还是其他原因，但无论如何这似乎是工具限制，而不是框架限制。

# c++ - 将字符串数组转换为 int 数组

> ID：12821583
> 
> 赞同：1
> 
> 时间：2012-10-10T14:18:01.863
> 
> 标签：c++, linux, arrays, type-conversion

我正在尝试编写一个函数，该函数将字符串数组作为参数，将其转换为 int 数组，然后返回新数组。我认为使用“Atoi”会很简单，但显然你不能像我尝试的那样使用它。

到目前为止，这是我的代码。

```
int GameHandler::convertToInt(string array[])
{
    int tmp=0;
    string arr[20]=array;
    int values[20];
    for(int i=0;i<20;i++)
        values[i]=0;

    for(int i=0;i<20;i++)
    {
        tmp=atoi(arr[i]);
        values[i]=tmp;

    }
    return values;
} 
```

这是我从编译器得到的错误消息：

> GameHandler.cpp：在成员函数'int GameHandler::convertToInt(std::string*)'中：GameHandler.cpp:60:20：错误：从'std::string* {aka std::basic_string*}'转换为非标量类型“std::string {aka std::basic_string}”请求 GameHandler.cpp:67:24：错误：无法将“std::string {aka std::basic_string}”转换为“const char*”参数'1'到'int atoi（con​​st char *）'GameHandler.cpp：71：12：错误：从'int *'到'int'的无效转换[-fpermissive] GameHandler.cpp：61：9：警告：地址返回的局部变量“值”[默认启用]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:21:31.237

atoi 的签名是

```
int atoi(const char *str); 
```

因此，在您的情况下，您需要将 const char* 传递给 atoi：

```
tmp=atoi(arr[i].c_str()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:37:29.017

可能对您有用的是这个具有（更好的）静态函数的解决方案：

```
const int ELEM_CNT = 20;
static void convertToInt(string const strings[ELEM_CNT], int ints[ELEM_CNT])
{
  for (int i=0; i<ELEM_CNT; ++i)
    ints[i] = atoi(strings[i].c_str());
}

[...]
string sArr[ELEM_CNT];
int iArr[ELEM_CNT];
convertToInt(sArr, iArr); 
```

请注意以下事项：

*   整数值[20]；// 这是堆栈上的一个数组，其内存在封闭块之外不可用（例如函数）
*   string array[] // 未知大小的数组；对于动态大小（在运行时设置），您可能想要使用 std::vector，它通过 size() 成员函数知道它的大小

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:21:19.693

您需要获取`const char*`. `std:string`您可以使用类`c_str()`中的方法来完成`std:string`。

[http://www.cplusplus.com/reference/string/string/c_str/](http://www.cplusplus.com/reference/string/string/c_str/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T14:39:36.993

除了`atoi`错误之外，这一行也是不正确的。

```
string arr[20]=array; 
```

您不能在 C++ 中复制这样的数组。

只需删除上面的行并替换

```
tmp=atoi(arr[i]); 
```

和

```
tmp=atoi(array[i].c_str()); 
```

不需要复制字符串数组来做你想做的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T14:49:51.577

我建议不要使用 C 风格的数组。

```
void GameHandler::convertToInt(std::vector<int>& values, 
                              const std::vector<std::string>& array)
{
    values.resize(array.size());

    for(int i=0;i!=array.size();i++)
    {
        values[i]=atoi(array[i].c_str());
    }
} 
```

# android - 在 API 级别 8 中拖放

> ID：12821589
> 
> 赞同：0
> 
> 时间：2012-10-10T14:18:11.083
> 
> 标签：android, listview, drag-and-drop

我正在开发一个包含`ListView`交易的应用程序。我想在购买时长按一个项目并将其拖放到底部。

我的 API 级别是 8，所以`ClipData`不能使用。

我能做些什么？

# javascript - 多个填充 - mongoosejs

> ID：12821596
> 
> 赞同：67
> 
> 时间：2012-10-10T14:18:29.827
> 
> 标签：javascript, node.js, mongodb, mongoose

只是一个简单的查询，例如模型中有一个双引用。

**架构/模型**

```
var OrderSchema = new Schema({

    user: {
        type    : Schema.Types.ObjectId,
        ref     : 'User',
        required: true
    },

    meal: {
        type    : Schema.Types.ObjectId,
        ref     : 'Meal',
        required: true
    },
});

var OrderModel = db.model('Order', OrderSchema); 
```

**询问**

```
OrderModel.find()
    .populate('user') // works
    .populate('meal') // dont works
    .exec(function (err, results) {
         // callback
    }); 
```

我已经尝试过类似的东西

```
.populate('user meal')
.populate(['user', 'meal']) 
```

事实上，只有一个人口有效。

那么，如何让两个人口工作？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-10-10T15:15:37.360

您已经在使用正确的语法：

```
OrderModel.find()
    .populate('user')
    .populate('meal')
    .exec(function (err, results) {
         // callback
    }); 
```

也许`meal`订单中的 ObjectId 不在`Meals`集合中？

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2015-09-09T07:49:04.240

**更新：**
此解决方案仍然适用于 Mongoose 的 3.x 版本
[http://mongoosejs.com/docs/3.8.x/docs/populate.html](http://mongoosejs.com/docs/3.8.x/docs/populate.html)
但不再记录 >= 4.x 版本的 Mongoose 等答案来自@JohnnyHK 是目前唯一有效的。

**原始帖子**
如果您使用的是 Mongoose >= 3.6，您可以传递路径名称的空格分隔字符串来填充：

```
OrderModel.find()
    .populate('user meal')
    .exec(function (err, results) {
         // callback
    }); 
```

[http://mongoosejs.com/docs/populate.html](http://mongoosejs.com/docs/populate.html)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2018-05-11T23:44:23.873

这可能已经解决了，但这是我对 Mongodb > 3.6 中多重和深度人口的看法：

```
OrderModel.find().populate([{
    path: 'user',
    model: 'User'
}, {
    path: 'meal',
    model: 'Meal'
}]).exec(function(err, order) {
    if(err) throw err;
    if(order) {
        // execute on order
        console.log(order.user.username); // prints user's username
        console.log(order.meal.value);    // you get the idea
    }
}); 
```

可能还有其他方法可以做到这一点，但这为初学者（如我）提供了非常易读的代码

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2020-03-09T01:26:06.180

我认为最好的解决方案是当您在同一级别上填充多个外国字段时使用数组。我的代码显示我有多个不同级别的填充。

```
const patients = await Patient.find({})
                    .populate([{
                        path: 'files',
                        populate: {
                            path: 'authorizations',
                            model: 'Authorization'
                        },
                        populate: {
                            path: 'claims',
                            model: 'Claim',
                            options: {
                                sort: { startDate: 1 }
                            }
                        }
                    }, {
                        path: 'policies',
                        model: 'Policy',
                        populate: {
                            path: 'vobs',
                            populate: [{
                                path: 'benefits'
                            }, {
                                path: 'eligibility', 
                                model: 'Eligibility'
                            }]
                        }
                    }]); 
```

如您所见，只要我需要填充文档的多个字段，我将填充键封装在一个数组中并提供一组对象，每个对象都有不同的路径。在我看来，最强大和简洁的方式来做到这一点。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-03-08T15:15:23.373

你可以试试：

```
OrderModel.find()
    .populate('user')
    .populate('meal')
    .exec(function (err, results) {
         // callback
    }); 
```

或使用数组选项

```
OrderModel.find()
    .populate([
      {
        path: "path1",
        select: "field",
        model: Model1
      },
      {
        path: "path2",
        select: "field2",
        model: Model2
      }
    ])
    .exec(function (err, results) {
         // callback
    }); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-05-19T08:08:12.120

最新的 mongoose`v5.9.15` 具有获取填充字段数组的能力，因此您可以这样做，

```
.populate([ 'field1', 'field2' ]) 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2021-10-24T22:48:22.703

您可以使用`array`语法：

```
let results = await OrderModel.find().populate(['user', 'meal']); 
```

您还可以从每个填充中选择所需的属性：

```
let results = await OrderModel.find().populate([{path: 'user', select: 'firstname'}, {path: 'meal', select: 'name'}]); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-12T23:44:36.463

我有同样的问题，但我的错误不是填充，我的模型有错误

如果你这样做

未校正

```
user: {
 type: [Schema.Types.ObjectId],
 ref: 'User'
} 
```

正确的

```
user: [{
 type: Schema.Types.ObjectId,
 ref: 'User'
}] 
```

你必须像这样在对象周围放置数组

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-19T08:57:06.607

为了在控制器/动作函数中使用对象数组填充多个字段，两者的模型已经在 post 的模式中引用

```
post.find({}).populate('user').populate('comments').exec(function (err,posts)
    {

    if(err)
    {
        console.log("error in post");
    }

        return  res.render('home',{
            h1:"home Page",
            posts:posts,

            });      
        }); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-08-21T10:17:08.850

我认为您正在尝试嵌套人口，您可以访问[官方文档](https://mongoosejs.com/docs/populate.html#populate_multiple_documents)

```
User.
  findOne({ name: 'Val' }).
  populate({
    path: 'friends',
    // Get friends of friends - populate the 'friends' array for every friend
    populate: { path: 'friends' }
  }); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-09-27T13:01:40.263

**在模型文件中执行以下操作：-**

```
 doctorid:{
        type:Schema.Types.ObjectId, ref:'doctor'
        },
    clinicid:{
        type:Schema.Types.ObjectId, ref:'baseClinic'
        } 
```

**在用于添加运算符的 js 文件中使用类似的东西：-**

```
 const clinicObj = await BaseClinic.findOne({clinicId:req.body.clinicid})
 const doctorObj = await Doctor.findOne({ doctorId : req.body.doctorid}) ;
**and add data as:-**
const newOperator = new Operator({
      clinicid:clinicObj._id,
      doctorid: doctorObj._id
    }); 
```

**现在，在填充**

```
apiRoutes.post("/operator-by-id", async (req, res) => {
    const id = req.body.id;
    const isExist = await Operator.find({ _id: id }).populate(['doctorid','clinicid'])
    if (isExist.length > 0) {
      res.send(isExist)
    } else {
      res.send("No operator found");
    }
  }); 
```

# php - pdf php下载产生空文件

> ID：12821598
> 
> 赞同：1
> 
> 时间：2012-10-10T14:18:30.567
> 
> 标签：php, pdf

```
<?php
header('Content-disposition: attachment; filename=Booking.pdf');
header('Content-type: application/pdf');
readfile('http://mysite.com/Booking.pdf');
?> 
```

为什么Booking.pdf下载的文件是空的！？？？

mac和windows都说：“Booking.pdf”文件为空，无法打开。

检查了谷歌和stackoverflow，找不到相关信息......以前有人经历过吗？

ps：我只找到这个论坛帖子：'*在线问题我认为有点离题，但通常是由于以FTP的ASCII模式而不是二进制将PDF加载到服务器。这会创建一个损坏的文件。一定要打开二进制传输*'，但在这种情况下不是这样，因为我可以在 iframe 中显示相同的 pdf 文件并且它不是空白/空的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T16:27:12.733

你需要改变

```
 readfile('http://mysite.com/Booking.pdf'); 
```

到

```
 readfile(__DIR__ . '/Booking.pdf'); 
```

例子

```
$file = __DIR__ . '/test.pdf' ;
header('Content-disposition: attachment; filename=Booking.pdf');
header('Content-type: application/pdf');
header("Content-length: ".filesize($file));
readfile($file); 
```

# javascript - 使用原始 JavaScript 提交功能时，jQuery 验证不会触发

> ID：12821600
> 
> 赞同：2
> 
> 时间：2012-10-10T14:18:42.363
> 
> 标签：javascript, jquery, html, jquery-validate

我的表单上有 jQuery 验证。当我单击提交按钮时，会调用“保存”功能：

```
function save(){
    var form = document.getElementById('myForm');
    form.submit(); // <- jquery validation is not called
    $(form).submit() // <- jquery validation works
} 
```

为什么 form.submit() 没有验证我的表单？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T14:20:45.730

本[机`submit`方法](https://developer.mozilla.org/en-US/docs/DOM/form.submit)（[W3 规范](http://www.w3.org/TR/html5/the-form-element.html#dom-form-submit)）将提交表单，仅此而已。它不会触发可取消`submit`事件（请参阅[表单提交的概念](http://www.w3.org/TR/html5/form-submission.html#concept-form-submit)）。

jQuery 的[`submit`方法](http://api.jquery.com/submit/)是 的别名`.trigger("submit")`，但是“*另外，表单上的默认提交操作将被触发*[invoked] *，因此表单将被提交。* ”

您的验证将侦听那些在使用本机提交方法时不会发生的提交事件。

# matlab - 创建带有标签的 Surf()

> ID：12821605
> 
> 赞同：-1
> 
> 时间：2012-10-10T14:18:59.257
> 
> 标签：matlab

```
[ndata, text, alldata] = xlsread('Euro swap rates.xlsx',3);
%(although created from text dates is still a cell array?) 
dates=text(:,1);  
%(Same problem here)
rates_header=text(1,:);  
rates=ndata;
surf(rates);
colormap(jet);  

>> surf(rates,dates); %but when I try to add wither of the labels I get a problem?
??? Error using ==> surf at 78
X, Y, Z, and C cannot be complex.

>> surf(rates,dates,rates_header);
??? Error using ==> surf at 78
Z must be a matrix, not a scalar or vector.` 
```

我假设问题是因为日期和rates_header 仍然是单元格数组？

如何将它们转换为文本？有没有办法直接作为 xlsread 的一部分？

最后在绘图上，我想创建数组日期和rates_header 中的第一个单元格，即冲浪图的该轴的名称，以及用于填充轴的所有其余数据。

越来越近

> > title('欧元掉期利率');
> > 
> > xlabel('成熟度');
> > 
> > ylabel('日期');
> > 
> > zlabel('交换率');
> > 
> > 设置（gca，'YTick'，1:100：长度（日期））；
> > 
> > 设置（gca，'YTickLabel'，日期（1：100：长度（日期）））；
> > 
> > 设置（gca，'XTick'，0:10：长度（rates_header））；
> > 
> > 设置（gca，'XTickLabel'，rates_header（0:10：长度（rates_header）））；

剩下两个问题：

1.  我希望 x Tick 是 1y 然后 10y20y...60y 所以第一步大小是 9y 然后 10y 对于所有剩余的点
2.  我希望日期仅显示每年 1 月 1 日和 6 月上旬（或最接近这些日期的工作日）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:08:14.253

看起来您想在 x 轴上设置标签。

您不是通过 执行此`surf`操作，而是在使用后执行此操作`set`，如下所示：

```
set(axHandle, 'XTickLabel', xlabels); 
```

这是一个完整的例子：

```
[x  y] = meshgrid(-4:.25:4;);
z = x.^2 + y.^2;
xlab = {'one','two','three','four'};

surf(x,y,z);
set(gca,'XTickLabel', xlab); 
```

您可以使用任何您想要的标签，只要它们是字符串并保存到元胞数组中即可。这就是我在上面所做的`xlab`。

# asp.net - 使 ASP.Net (C#) Web 应用程序可脱机使用

> ID：12821609
> 
> 赞同：6
> 
> 时间：2012-10-10T14:19:05.043
> 
> 标签：asp.net, html, web-applications, html5-appcache, offline-web-app

我的任务是让我公司的 Web 应用程序可以离线使用。在进入实际开发阶段之前，我想确定我当前的策略不会失败。

我首先考虑使用 html5 应用程序缓存，但在做了一些测试后，我发现它似乎没有缓存服务器端操作，而是渲染的实际 html（如果我错了，请纠正我）。这将不起作用，因为呈现的 html 取决于当前登录的人。从我的测试中，它总是呈现 html，就好像最后一个登录（在线）的人正在登录一样。

我目前的策略是这样的：我只缓存登录页面和一个离线 (.html) 页面，以对应需要离线使用的每个 aspx 页面。每次成功登录（在线）都会创建或更新 Web SQL 数据库或 IndexDB（取决于浏览器），其中包含该人离线操作所需的所有数据，包括将用于登录凭据的表。这样，离线登录的唯一要求是使用您的登录凭据登录至少一次。

我担心的是我把它复杂化了。为了完成这项工作，我需要为每个当前页面（很多页面）创建一个 html 页面，并且我必须用 JavaScript 重写当前在服务器上完成的所有内容，包括验证、数据库调用、填充控件例如下拉列表和数据网格等。此外，我将来更改的所有内容都需要后续离线更改。

对于我正在尝试做的事情，我是否有一个既定的最佳实践，我正在忽略或者我正在冒险进入新领域？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:25:56.613

请参考这些链接，它可以让您对要实现的目标有所了解。我不确定这些是最佳实践，但这些将是一个很好的起点。

[http://www.c-sharpcorner.com/UploadFile/aravindbenator/offline-mvc3-application/](http://www.c-sharpcorner.com/UploadFile/aravindbenator/offline-mvc3-application/) http://www.developerfusion.com/article/84438/isolated-storage/

# php - 如何使用 SimpleXml 获取元素的 innerText

> ID：12821611
> 
> 赞同：6
> 
> 时间：2012-10-10T14:19:10.513
> 
> 标签：php, simplexml

我对 SimpleXml 还是很陌生。我正在尝试做的事情：

我有很多 xml 文件，它们的构建大致相同。我的问题是有时我的目标节点中有更多节点。示例（试图获取正文）：

xml 文件 1

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<note>
<firstname>My name is WHAT</firstname>
<lastname>My name is WHO</lastname>
<body>My name is CHIKA CHIKA Slim-Shady</body>
</note> 
```

xml 文件 2

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<note>
<firstname>My name is WHAT</firstname>
<lastname>My name is WHO</lastname>
<body><b>My name is CHIKA CHIKA Slim-Shady</b></body>
</note> 
```

我可以毫无问题地获取第一个文件中的文本：

```
$xml = simplexml_load_file("filename.xml");
echo $xml->note->body; 
```

但是当我尝试在第二个文件中做同样的事情时，我什么也得不到。

如何让 php 只吐出节点中的文本，而不考虑目标节点中的任何其他节点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-10T14:53:43.740

为了遍历

```
echo $xml->note->body; 
```

要工作，您的标记需要是

```
<note>
    <note>
        <body>
        … 
```

为避免此类错误，最好将变量命名`simplexml_load_file`在标记中的根元素之后，例如

```
$note = simplexml_load_string($xml); 
```

要获取 SimpleXmlElement 的“innerText”，您可以执行以下操作：

```
echo strip_tags($note->body->asXml()); 
```

该`asXML()`方法将为您提供“outerXML”，然后您可以使用`strip_tags`.

另一种方法是将节点导入 DOM，然后获取它`nodeValue`

```
echo dom_import_simplexml($note->body)->nodeValue; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-08-07T18:40:33.303

```
echo (string)$xml->body; 
```

为我工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:21:36.590

你不需要添加`note`它应该是

第一

```
echo $xml->body; 
```

第二个

```
echo $xml->body->b ; 
```

输出

```
My name is CHIKA CHIKA Slim-Shady 
```

# excel - Excel公式从条件语句为真的范围内返回一个值

> ID：12821615
> 
> 赞同：0
> 
> 时间：2012-10-10T14:19:17.727
> 
> 标签：excel, conditional

我已经为此寻找了一段时间的答案，但没有任何运气。这有点难以用语言表达，所以如果有任何不清楚的地方，请告诉我。

我想要的是一种在两列上执行条件语句的方法。当这两个条件都为真时，我想从与满足这些条件的同一行中的第三列返回值。因此，如果 D5 和 C5 中的条件为真，我想使用公式将 Q5 中的值返回到单元格中。条件语句很简单，但我还没有弄清楚最后一步。

如果我使用下面的公式，我会在带有公式的单元格中得到 1，这是正确的。

```
=IF(AND('Stata Output'!D2:D6='Backcheck schedule and results'!C2, 'Stata Output'!C2:C6=1),1,0) 
```

但是，将公式中的 1 替换为我想从中提取值的单元格范围每次都会给我一个零，我知道这是错误的。对于后一个公式，我正在使用：

```
=IF(AND('Stata Output'!D2:D6='Backcheck schedule and results'!C2, 'Stata Output'!C2:C6=1),'Stata Output'!Q2:Q5,0) 
```

关于我在哪里搞砸的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:33:31.300

试一试 - 我确信有一种更简单的方法，但它似乎可以完成工作（确保使用 输入作为数组公式`Control+Shift+Enter`）：

```
=INDEX('Stata Output'!$D$2:$Q$6,MATCH(1,(--('Stata Output'!$C$2:$C$6=1)*--('Stata Output'!$D$2:$D$6="Backcheck schedule and results")),0),14) 
```

这样做是将您的整个表作为范围（第一个参数`INDEX`，然后用于`MATCH`查找满足您的两个条件的行（在这种情况下，列`C`必须是`1`并且列中的相应值`D`必须是`Backcheck schedule and results`）。然后您搜索结果数组为 1（表示匹配）和返回列`14`（表示`Q`我们表中的列）。您可以根据需要继续在`MATCH()`函数内添加过滤器。

请注意，这将仅匹配第一个“命中”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:33:09.723

试试下面的公式：

```
=LOOKUP(2,1/('Stata Output'!D2:D6='Backcheck schedule and results'!C2)/('Stata Output'!C2:C6=1),'Stata Output'!Q2:Q5) 
```

如果有多个行同时满足两个条件，则此公式将返回**最后一个**`Q`的 col值。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T15:14:16.490

看起来`AND`在数组公式中不能正常工作，所以我会使用这个：

```
=IF(('Stata Output'!D2:D6='Backcheck schedule and results'!C2)*('Stata Output'!C2:C6=1)=1,'Stata Output'!Q2:Q5,0) 
```

这将为您提供一个新的结果列，该列将从`Q2:Q6`每个匹配行的列中填充。

要使用它，您应该选择所有结果列，输入公式，然后使用`CTRL+SHIFT+ENTER`.

只要确保使用相同大小的范围。**

# c# - 根据传递的参数对 SQL 表执行更新

> ID：12821616
> 
> 赞同：0
> 
> 时间：2012-10-10T14:19:19.513
> 
> 标签：c#, sql, sqlcommand

这个程序已经写好了，我需要添加一个更新 SQL 语句来更新另一个基于 @IN 的表。声明 SQL 命令后如何让它执行，我可以使用与其他 sql 命令相同的 SQLConnection 吗？该程序所做的是将文件解析为名为个人的列表，然后我只想更新 SQL 中的字段。第一个 SQL 已经写成似乎可以正确执行，现在我需要执行 UpdtHasInv SQL 并实际获取执行更新的代码是我需要帮助的地方。

继承人我到目前为止：

```
 static void InsertCustomData(Collection<Individuals> individuals)
    {
        #region
        string insertsql = "";

        insertsql = @"Insert into IND (IND_ID, ITEM_NAME,   INDL_ITEM_VALUE, XPTIM)
                        select  IND_ID, '{0}' as Item, '{1}' as val, (current timestamp -      curtime)"
                        FROM    IND 
                        where   IN = @IN";

    // this is SQL I added for update
          **UpdtHasInv = @"UPDATE Ind
                       SET    HAS_I = -1
                       WHERE  IN = @IN";**

        #endregion

        using (DB2Connection conn = DB2Helper.getConnection())
        {
            DB2Command cmd = conn.CreateCommand();                
            cmd.CommandTimeout = 600;
            cmd.Parameters.Add("@IN", "");

            if (conn.State == ConnectionState.Closed)
            {
                conn.Open();
            }

            foreach (Individuals individual in individuals)
            {
                cmd.Parameters["@IN"].Value = individual.In;

                foreach (CustomData customData in individual.CustomData)
                {
                    cmd.CommandText = string.Format(insertIndsql,   customData.Data.Key,            customData.Data.Value); 
```

我可以写：'cmd.CommandText = UpdtIsInv;' 在这些行之后：

```
 foreach (Individuals individual in individuals)
            {
                cmd.Parameters["@IN"].Value = individual.in 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:22:55.007

您可以简单地在使用分号`UPDATE`之后附加您的。`INSERT`

```
insertIndsql = @"
INSERT INTO IND (IND_ID, ITEM_NAME,   INDL_ITEM_VALUE, XPTIMESTAMP)
SELECT  INDIVIDUAL_ID, '{0}' as Item, '{1}' as val, (current timestamp - curtime)
FROM    IND 
WHERE   TIN = @TIN;

UPDATE DB2INST1.Individual
SET    HAS_INVESTMENT = -1
WHERE  TIN = @TIN;"; 
```

执行时，两条语句将作为同一命令的一部分执行。

# objective-c - 即使 appdelegate 和 main.m 丢失，我的应用程序到底如何仍在运行

> ID：12821626
> 
> 赞同：0
> 
> 时间：2012-10-10T14:19:52.803
> 
> 标签：objective-c, xcode4.5

我从时间机器恢复应用程序。

该应用程序运行良好。

但是，当我检查项目时，我的 appDelegate 不见了。我在编辑器中看不到文件。它变成红色。

![在此处输入图像描述](../Images/c013a9397b9a9accb3debae3fff1ac28.png)

到底是怎么回事？

这些文件仍在查找器中。

重新启动 xcode 不起作用。删除和添加文件有点冒险，但我明天会试一试。

![在此处输入图像描述](../Images/912f12898f706ff1be84caf389c2443f.png)

也许xcode只是“忘记”文件在哪里。但是我编译了我的应用程序。注意：问题已解决。重新启动 iMac 即可。它是最终由它自己修复的其中之一。但是，如果有人可以解释为什么会发生这种情况，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:24:19.007

检查目标的构建阶段。正在编译的文件可以使用上下文菜单在 Finder 中显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:40:30.190

你可以在删除和重新添加你的文件到 Xcode 中做一个肮脏的举动。它们也被正确地添加到构建阶段。删除引用没有风险，因为引用丢失了。如果你做一个干净的项目，你可能会遇到编译器构建错误。您只需再次将您已添加的文件放入您的 Xcode 项目中，但不要选中“将项目复制到目标组的文件夹”，因为您的文件已经包含在您的文件夹中。

当我使用 svn 时，这经常发生在我身上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T00:22:47.567

这些都是很好的答案。我重新启动了 iMac，一切正常。

我想这已经发生了好几次了。这是最终自行解决的问题之一。我问这个问题让我很生气。

我仍然不明白它为什么会发生。所以我会等待更多人回答这个问题。![在此处输入图像描述](../Images/b9c45756c375dcac60de4bd08208c158.png)

# javascript - 移动 Safari iOS 6 上的奇怪 JavaScript 行为

> ID：12821635
> 
> 赞同：2
> 
> 时间：2012-10-10T14:20:22.360
> 
> 标签：javascript, math, mobile-safari, ios6

我遇到了一个非常非常非常奇怪的 JS 问题，该问题仅在 iOS 6 上的 Mobile Safari 浏览器上重现。问题在于将给定值格式化为价格的函数，通过将数字去除到小数点后 2 位并将货币添加到号码的前面。以下是功能。稍后我将解释如何重现该错误。

```
formatCurrency = function(value, currency, fixedPrecision, colourize, blankIfZero) {
    var text;

    if (blankIfZero && (Math.abs(value) < 0.01 || value === undefined)) {
         return "";
    }

    if (fixedPrecision) {
        text = currency + Math.abs(value).toFixed(2);
    } else {
        text = currency + roundTo2Decimals(Math.abs(value));
    }

    if (value < 0) {
        text = "-" + text;
    }

    if (colourize) {
        var colorClass = (value < 0 ? "negative" : "positive");
        text = "<span class='" + colorClass + "'>" + text + "</span>";
    }

    return text;
};

roundTo2Decimals = function(value) {
    var sign = value < 0 ? -1 : 1;
    return Math.round(Math.abs(value) * 100.0)/100.0 * sign;    
}; 
```

如果我一遍又一遍地运行 formatCurrency 函数（例如在 setInterval 内），使用相同的值（比如 value=1; 和 currency="GBP"），您会注意到每 800-1000 次迭代返回的值是该函数包含一个负数：GBP-1 而不是 GBP1。这个问题很烦人，我在 JS 函数中没有发现任何问题。

我设法解决了这个问题......但我很好奇这个实现有什么问题。[编辑：我通过从“roundTo2Decimals(Math.abs(value))”中删除“-”字符解决了这个问题。但是“-”字符不应该首先出现。所以修复实际上是一种解决方法。]

我错过了什么吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-16T05:06:44.280

我猜;

文本 = “-” + 字符串（文本）；

是问题。

我也一直在寻找 Safari 中与 iOS6 相关的错误。如果我们想让 JS 执行流畅，看起来 JS 应该更干净！

# c# - 如何替换数据表中的重复项

> ID：12821636
> 
> 赞同：1
> 
> 时间：2012-10-10T14:20:23.663
> 
> 标签：c#, linq, datatable, duplicates

我有数据表 1：--------------应该是这样的：

```
ID   Name  Lastname             ID     Name   Lastname
-------------------             -----------------------
1  |  koki  ha                  1   |   koki     ha
-------------------                 | ----------------- //merge Rows[0][0]          
1  |  lola  mi                      |   lola     mi     //with Rows[1][0] if the same
-------------------             -----------------------                      
2  |  ka    xe                  2       ka      xe 
```

如果已经存在，如何将“1”替换为“”或为空？我为此花了 2 个小时，但找不到解决方案。我尝试使用 linq 但找不到正确执行此操作的关键，可能是不同的还是组？

```
DataTable table = new DataTable("table");
table.Columns.Add("ID", typeof(Int32));
table.Columns.Add("Name", typeof(String)); 
table.Columns.Add("Lastname", typeof(String));

object[] o1 = { 1, "Kiki", "ha"};
        object[] o2 = { 1,"lola","mi"};
        object[] o4 = { 2, "ka", "xe" };
table.Rows.Add(o1);
        table.Rows.Add(o2);
        table.Rows.Add(o4);
dataGridView2.DataSource = table; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:03:13.547

以下是使用 LINQ 执行此操作的方法：

```
var dataRows = table.Rows.Cast<System.Data.DataRow>()
                         .GroupBy(r => r[0])
                         .Where(g => g.Count() > 1); 

foreach (var dataRowGroup in dataRows) {
    int idx = 0;
    foreach (DataRow row in dataRowGroup) {
        if (idx++ > 0) {
            row[0] = DBNull.Value;
        }
    }
} 
```

# javascript - 选中复选框已禁用（Jquery）

> ID：12821650
> 
> 赞同：12
> 
> 时间：2012-10-10T14:20:56.487
> 
> 标签：javascript, checkbox, client-side

目的是；
如果复选框被禁用，什么也不做。
如果启用并选中复选框，则设置按钮的样式。
这是我到目前为止所得到的；

```
 $(document).ready(function (e) {

        $(".checkbox").live("click", function () {

            if ($(this).hasAttribute('disabled')) {
                return false;
            }
            var isAnyChecked;

            $("input[type=checkbox]").each(function () {
                var checkedValue = $(this).attr("checked");
                if (checkedValue == "checked") {
                    isAnyChecked = true;
                }

            });

            if (isAnyChecked) {
                $("#<%= btnConfirm.ClientID %>").css("display", "block");

            } else {
                $("#<%= btnConfirm.ClientID %>").css("display", "none");

            }

        });  }); 
```

我试过`.is(':disabled')`,`.hasAttr()`和`.prop()`. `.attr()`任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-10T14:25:15.387

~~您必须检查该`disabled`属性是否为真：`.attr('disabled')`.~~

~~或者，更好的是，使用`.is(':disabled')`.---~~

* * *

**编辑：**所以现在似乎`.attr`不推荐使用这种用法（请参阅[http://api.jquery.com/attr/](http://api.jquery.com/attr/)）首选方式是：

```
$('#myCheckbox').prop('disabled') 
```

必须指出的是，这到今天仍然有效：

```
$('#myCheckbox').is(':disabled') 
```

在这里试试：[https ://jsfiddle.net/Robloche/phaqfrmj/](https://jsfiddle.net/Robloche/phaqfrmj/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-20T20:46:54.987

你也可以尝试使用这个：

```
$("#myCheckBox").is('[disabled]'); 
```

对我来说可以确定一个元素是否被禁用，而其他解决方案（`.disabled`, `.is(':disabled')`, `.attr('disabled')`, `.prop('disabled')`）不是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-06T13:21:04.960

对我来说，这就像禁用的魅力：

```
$("#myCheckBox").prop("disabled", true) 
```

启用：

```
$("#myCheckBox").prop("disabled", false) 
```

# c - 使用 void 指针交换数组中的元素

> ID：12821657
> 
> 赞同：0
> 
> 时间：2012-10-10T14:21:12.533
> 
> 标签：c, function, types

我需要写一个函数

```
void reverse(void *base, int nel, int width) 
{ 
    // ... 
} 
```

其中 base 是指向数组开头的指针， nel - 数组中元素的数量， width 是每个元素的大小（以字节为单位）。

例如，如何交换数组的前两个元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:31:53.107

您可以在 value`memcpy`的帮助下简单地使用（因为它是许多编译器的内置函数） `width`。您还需要一个临时变量。

```
/* C99 (use `malloc` rather than VLAs in C89) */
#include <string.h>

void reverse(void *base, size_t nel, size_t width) 
{
    if (nel >= 2) {
        char *el1 = base;
        char *el2 = (char *)base + width;
        char tmp[width];

        memcpy(tmp, el1, width);
        memcpy(el1, el2, width);
        memcpy(el2, tmp, width);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T14:32:40.813

如果您希望它键入通用，请使用

```
void swap(void *base, int len, int width)
{
    void *p = malloc(width);

    memcpy(p,base,width);
    memcpy(base,(char*)base+width,width);
    memcpy((char*)base+width,p,width);

    free(p);
} 
```

这将交换前 2 个元素。

# c++ - C++ 11 - 将 C 风格的回调绑定到类成员函数

> ID：12821659
> 
> 赞同：1
> 
> 时间：2012-10-10T14:21:15.200
> 
> 标签：c++, lambda, c++11

使用来自[http://ideone.com/5MHVz](http://ideone.com/5MHVz)的代码 我很好奇如何将 lambda 函数（内联）绑定到 C 样式函数指针，但即使没有状态，我也无法使用类函数执行此操作涉及。这一定是一些根本性的区别，但我不明白在这种情况下 lambda 绑定是如何可能的（对于 lambda 生成的代码也有一个概念 this ）。有解决方法吗？

代码如下：

```
#include <iostream>
#include <functional>
using namespace std;

typedef int (*http_cb) (int*);

struct http_parser_settings {
  http_cb      on_message_begin;
};

class HttpParser
{
  int OnMessageBegin(int* val){}

  HttpParser()
  {
    http_parser_settings settings;
    //settings.on_message_begin = std::bind(&HttpParser::OnMessageBegin, this, std::placeholders::_1); -- this one does not compile
   settings.on_message_begin = [](int* p){ return 0;};
  }
};

int main() {

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:27:07.963

非捕获 lambda 可以转换为函数指针。它们本质上是免费的功能，所以没有问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-10T14:32:07.890

即使在 MSVC2010 中，您也可以将 lambdas 存储在 std::function 对象中，因此必须有一种方法来获取原始函数指针。我从来没有深入研究过它是如何工作的细节，但之前肯定使用过这个功能。

# android - 列表视图 + 复选框 =？

> ID：12821663
> 
> 赞同：0
> 
> 时间：2012-10-10T14:21:30.237
> 
> 标签：android, android-listview, android-checkbox

> **可能重复：**
> [带有复选框的类似 Gmail 的 ListView（并使用 ActionBar）](https://stackoverflow.com/questions/8841283/gmail-like-listview-with-checkboxes-and-using-the-actionbar)

我需要 ：

列表视图与

```
items { CheckBox, then TextView } ; 
```

当你按下 CheckBox 时，项目应该改变它的颜色。

我怎么才能得到它 ？

附言

换句话说，我需要一个带有 CheckBoxes 的 ListView，就像在 Gmail 应用程序中一样

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T16:09:24.970

答案很简单！有一个名为的组件`CheckedTextView`是 a`TextView`和 a的组合`CheckBox`。该组件可能会简化您的逻辑，让您可以自由地修改列表中的任何内容`OnItemClickListener`！

我为你写了一个例子：

```
 public class CheckBoxListView extends ListActivity implements OnItemClickListener{

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        //Mock data
        String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
                "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
                "Linux", "OS/2" };

        //android's simple_list_item_multiple_choice is a CheckedTextView
        //try creating your own later ;)
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_multiple_choice, values);

        getListView().setOnItemClickListener(this);

        setListAdapter(adapter);

    }

    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {

        CheckedTextView item = (CheckedTextView) arg1;

        //The change color logic is here!
        if(item.isChecked()) {
            item.setTextColor(Color.BLACK);
            item.setChecked(false);
        }
        else {
            item.setTextColor(Color.RED);
            item.setChecked(true);
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:27:36.570

创建自定义适配器并在复选框上设置侦听器，以更改您想要的内容。（在我看到你自己做了什么之前，我不会发布任何代码）。如果您不知道 Android 文档是如何真正开始的好地方。对于这个问题，您应该特别检查 LayoutInflater、BaseAdapter、ListActivity 和创建 xml 资源（确切地说是布局）。

# ruby - 如何在 `Symbol#to_proc` 速记中使用字符串而不是符号

> ID：12821666
> 
> 赞同：1
> 
> 时间：2012-10-10T14:21:37.727
> 
> 标签：ruby, symbols, implicit-conversion, proc

```
a = (1..10).to_a
a.map(&:even?)
=> [false, true, false, true, false, true, false, true, false, true] 
```

如何使用包含方法名称的字符串调用 map？

```
foo = 'even?'
a.map(...foo...) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T14:23:31.003

```
foo = 'even?'
[1,2,3,4,5].map(&foo.to_sym)
 => [false, true, false, true, false] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T14:40:39.193

速记语法不是 & 冒号，它是 & 后跟一个符号：

```
(1..10).map(& :even?) 
```

在 Ruby 中，方法通常由符号引用，因此如果变量中有符号，则此语法按预期工作：

```
name = :even?
(1..10).map(&name) 
```

如果您无法控制变量方法名称，例如它是一个参数，我建议您改用通用方法`send`。它适用于符号和字符串。

```
def perform enum, name
  enum.each{ |e| e.send(name) }
end

perform 1..10, "even?" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T14:25:43.170

另一种选择是，它使用“完整形式”块并且更通用。

```
a = (1..10).to_a
name = 'even?'
a.map{|b| b.send name} # => [false, true, false, true, false, true, false, true, false, true] 
```

# iphone - 这个警告是什么意思：“设置集合视图的第一响应者视图，但我们不知道它的类型（单元格/页眉/页脚）”

> ID：12821670
> 
> 赞同：17
> 
> 时间：2012-10-10T14:21:57.750
> 
> 标签：iphone, ios, uikit, ios6, uicollectionview

我在每个单元格中有一个 UICollectionView 和一个 UITextView 。当我点击其中一个文本视图并且键盘出现时，我在输出面板中收到以下警告：

`setting the first responder view of the collection view but we don't know its type (cell/header/footer)`

不过，文本输入工作正常。但是，在生产中使用此代码之前，我真的很想知道此警告的含义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-05T07:14:51.037

根据 Apple 的说法，“你可以放心地忽略这一点”。

[https://devforums.apple.com/message/717898#717898](https://devforums.apple.com/message/717898#717898)

# r - 用 apply 计算矩阵的相关矩阵

> ID：12821673
> 
> 赞同：1
> 
> 时间：2012-10-10T14:22:01.143
> 
> 标签：r, apply

我想计算相关矩阵 P，其中每个 P[i,j] 是矩阵 Data 中第 i 行和第 j 行的相关系数。例如

```
 Data <- matrix(rnorm(500),50,10)
  P <- matrix(0,50,50)
  for (i in 1:50) 
     for(j in 1:50)
        P[i,j] <- cor(Data[i,],Data[j,]) 
```

但是我如何使用 apply 或类似的命令来计算这种相关性。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T14:24:34.790

您可以只`cor()`在数据框或矩阵上使用来获得所有列对之间相关性的相关矩阵：

```
cor(t(Data)) 
```

从您的问题和代码中，不清楚您是否想要所有行对的相关性或行和列之间的相关性，但由于矩阵不是正方形，我假设第一个。

# javascript - 如何在winforms应用程序中启用javascript？

> ID：12821679
> 
> 赞同：0
> 
> 时间：2012-10-10T14:22:17.930
> 
> 标签：javascript, winforms, webbrowser-control

如何在winforms应用程序中启用javascript？我正在使用网络浏览器控件，我想检查浏览器是否禁用了 javascript，然后我想在我的 win 应用程序中启用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:23:44.353

我建议，你使用 WebKit Control

# vba - 传递非变量对象声明

> ID：12821680
> 
> 赞同：1
> 
> 时间：2012-10-10T14:22:26.143
> 
> 标签：vba, excel

我有一个包含 ParamArray 参数的方法，想知道是否可以在 VBA 中使用一些特殊符号来获得与以下相同的效果：

```
method val1, _
         val2, _
         new object(){prop1:=val11, _
                      prop2:=val12}, _
         new object(){prop1:=val21, _
                      prop2:=val22} 
```

它不漂亮，但应该明白这一点。基本上，我正在尝试翻译自 1.0 以来我在 .Net 中学到的技能/逻辑，并尝试在 VBA 中加入类似的逻辑设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:39:57.297

假设你的意思是对象构造速记，那么没有，没有直接的等价物。

如果成员名称相同，则可以使用工厂函数

```
method val1, val2, makeFoo(val11, val12), makeFoo(val21, val22)
.
.
.
function makeFoo(prop1 as string, prop2 as string) As clsFoo
   set makeFoo = new clsFoo
   makeFoo.prop1 = prop1
   makeFoo.prop2 = prop2
end function 
```

`Optional`params 也允许命名参数`makeFoo(prop1:=val11, ...`

# .net - “错误：解决方案中的一个或多个项目未正确加载”，特别是对于 Windows7

> ID：12821682
> 
> 赞同：9
> 
> 时间：2012-10-10T14:22:28.757
> 
> 标签：.net, visual-studio-2010

我正在尝试在 VS 2010 中打开一个项目/解决方案。我能够在 Windows XP 中成功打开相同的代码，它给出了一个对话框“临时工作不受控制”，然后单击“是”，代码加载并运行良好。但是在 Windows 7 中，当我尝试打开相同的代码时，它给了我错误：

> “解决方案中的一个或多个项目未正确加载”

并且解决方案资源管理器中没有加载任何项目文件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T06:11:46.060

我也面临同样的问题。这是我为解决它所做的：

### 解决方案：

使用管理员帐户运行解决方案文件。例如：Windows 开始菜单中的 Visual Studio 2010，然后右键单击，以管理员身份运行。然后，转到文件并打开解决方案文件。

### 问题原因

发生这种情况是因为我们在将该项目复制到同一台机器上的另一个位置之后为该项目创建了虚拟目录。因此，发生了虚拟冲突。避免这种情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-09-20T19:50:39.250

我有同样的问题。对我来说，问题出在 .sln 文件中。在文件的末尾有多个以下内容：

GlobalSection(TeamFoundationVersionControl) = preSolution

结束全局部分

我删除了多余的，消息消失了。

我相信造成这种情况的原因是 TFS 合并了解决方案的不同签入，或者有人手动执行并做错了。

保罗

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-25T15:04:56.630

将该项目复制到 Visual Studio 的项目文件夹中，然后从 Visual Studio 打开它，现在它将打开

我自己在 Visual Studio 2013 中发现了这种技术

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-19T20:25:33.540

刚刚在一个开源项目上解决了这个问题。问题是由于 .sln 文件中一行的空格而不是制表符。

[https://github.com/fsprojects/Fix/commit/7f613791ed1b35714543eac163d6d9f78605cea8](https://github.com/fsprojects/Fix/commit/7f613791ed1b35714543eac163d6d9f78605cea8)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T14:28:02.010

It looks like you don't have the same version of Visual Studio installed as the one in which those projects were created. For example, if the project you're opening is a C++ project, if will fail if you don;t have VS C++ installed. Or you cannot load a project for ASP.NET MVC if you don't have MVC installed.

Open project files in Notepad and look for a Project guid. Then google it and you will find out what project type is not supported by your current installation of VS.

```
<ProjectGuid>{67122503-1A75-40CA-B37E-C0C4C9D6D38B}</ProjectGuid> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-10T15:02:07.077

我正在使用 Skydrive 在笔记本电脑和 PC 上的 Visual Studio 副本之间共享项目文件。

我查看了文件资源管理器，可以看到针对我项目中的许多文件的“仅在线”。原来这些文件实际上还没有在计算机上。

Metro Skydrive 应用程序中有一个设置可以强制复制这些内容。

我从[https://johnfail.wordpress.com/2013/12/10/windows-8-1-making-all-skydrive-files-available-offline/获得此信息](https://johnfail.wordpress.com/2013/12/10/windows-8-1-making-all-skydrive-files-available-offline/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-10T14:29:36.010

检查win7和winXP上是否存在相同版本的vs2010。我怀疑winXP上的项目类型没有安装在win7中，这就是项目被卸载的原因

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-11T14:01:17.437

我在 Windows 10 上得到了这个。

我发现文件路径太长了。

我的解决方案是将存储库移动到更短的路径。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-05-23T16:01:11.167

这是在 VS2017 中。其中一个 .csproj 文件与 git 有合并冲突，我没有解决它。解决这个问题就解决了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-01-11T22:18:41.943

在我的解决方案中，我使用了 c++，因此其他项目停止为我工作。我通过在环境变量中添加**dotnet**路径来解决它。

系统 -> 系统属性 -> 环境变量 -> 路径（**双击**）或**编辑**并输入 dotnet 所在的路径。C:/Program Files/dotnet 图片：[https ://i.stack.imgur.com/56rEm.png](https://i.stack.imgur.com/56rEm.png)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-05-05T02:26:32.793

我正在克隆一个项目（[CleanArchitecture](https://github.com/ardalis/CleanArchitecture)）并想重命名命名空间。

1.  我将项目克隆到`C:\Users\MyUser\source\repos\MyProject`
2.  然后我打开`Notepad++`，按下`Ctrl+F`，去`Find in Files`搜索`CleanArchitecture`并替换为`MyProject`。这将项目命名空间的所有匹配项更改为`MyProject`，接受!中的`.csproj`文件名`File Explorer`
3.  我不得不手动转到`C:\Users\MyUser\source\repos\MyProject`然后更改`.csproj`文件的名称。
4.  然后在 Visual Studio 中重新加载项目。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-01-20T15:13:49.253

大多数情况下，这些是由于解决方案文件损坏造成的，因此请尝试编辑解决方案文件并与工作解决方案文件进行比较，您将能够看到一些奇怪的评论，如“>>>>>>///”***强文本***，此评论将当你确实合并不正确时出现。**对我来说，通过删除解决方案文件示例中的额外行**来修复崩溃的 VS 问题，如下所示

```
[{051C84DE-7573-495D-8E2A-1DC3F1343B3E} = {F9A2AA02-760A-47B6-A663-BB224CDF86BC}
        {F6D86487-62D1-46F4-8171-28A0635EE97F} = {F9A2AA02-760A-47B6-A663-BB224CDF86BC}
        {7931E22C-6B9F-4FA3-8CEF-7A4FD557C22F} = {F9A2AA02-760A-47B6-A663-BB224CDF86BC}
    EndGlobalSection
    GlobalSection(TestCaseManagementSettings) = postSolution
        CategoryFile = Retalix.StoreOfficeClient8.vsmdi
    EndGlobalSection
EndGlobal] 
```

所以我删除了多余的行并添加如下，然后它对我有用

```
{9460EC3D-65F3-44C8-9987-E2303B8D7DC4} = {F9A2AA02-760A-47B6-A663-BB224CDF86BC}
        {051C84DE-7573-495D-8E2A-1DC3F1343B3E} = {F9A2AA02-760A-47B6-A663-BB224CDF86BC}
        {F6D86487-62D1-46F4-8171-28A0635EE97F} = {F9A2AA02-760A-47B6-A663-BB224CDF86BC}
        {7931E22C-6B9F-4FA3-8CEF-7A4FD557C22F} = {F9A2AA02-760A-47B6-A663-BB224CDF86BC}
    EndGlobalSection
EndGlobal 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-10-19T18:30:43.703

转到显示项目路径的不可用项目的属性窗口。文件对话框将打开。找到项目文件 (.csproj) 并单击打开。最后重新加载项目

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-12-31T06:45:39.797

这可能是构建问题。当您将在项目中进行更改时，以适当的顺序构建您的所有项目。例如：-如果您在 dblayer 中进行更改，则重新构建它，然后在构建之后使用该层的参考。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-12-24T03:31:07.967

I just faced the same issue with my .NET MVC project.

the shortest way to solve it is to make sure that the following files name extentoins match exactly to each other:

*   .SLN
*   .csproj
*   .user

# **Your-Project-Name.sln**

[![enter image description here](../Images/c54d556a5e73309c9dc3464a2fc125f8.png)](https://i.stack.imgur.com/g9Q4x.png)

[![enter image description here](../Images/7bf292a6f9f0a97f7b9070c10cdbd67d.png)](https://i.stack.imgur.com/7RJ1z.png)

# this name must be matched with

**Yout-PROJECT-NAME.csproj**

and

**Your-Project.user**

[![enter image description here](../Images/09fe665ae6a28b423989d4b57236440c.png)](https://i.stack.imgur.com/lPDBY.png)

NOTICE That tha names are NOT match which cause the issue the correct names:

[![enter image description here](../Images/0c44db5beaf880b7f9e3bc700be9495d.png)](https://i.stack.imgur.com/nv3o0.png)

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2016-04-05T07:36:56.387

我也遇到了这个问题。我终于在这个帮助下摆脱了困境：

[有一个更新可以提高 Visual Studio 2012 的稳定性](https://support.microsoft.com/en-us/kb/2781514)

本文介绍了一种可提高 Microsoft Visual Studio 2012 稳定性的更新。此更新还解决了更新 Microsoft .NET Framework 时可能出现的兼容性问题。发生此问题时，Visual Studio 2012 可能无法加载项目并且可能会崩溃。

此更新可从 Microsoft Update 获得，也可以从[Microsoft 下载中心下载](http://www.microsoft.com/en-us/download/details.aspx?id=36020)。

此更新的全球版本具有下表中列出的文件属性（或更高版本的文件属性）。

[![文件属性表](../Images/e01e12e83f5f1fb9a0ba495e5210c6c1.png)](https://i.stack.imgur.com/nrm7P.png)

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2016-10-21T09:48:35.817

只需修复（重新安装）您的安装程序...

# eclipse - Eclipse CheckStyle

> ID：12821683
> 
> 赞同：0
> 
> 时间：2012-10-10T14:22:31.533
> 
> 标签：eclipse, checkstyle

最近我在 Eclipse 中添加了一个新的 checkstyle (XML) 文件。

跑完后`mvn checkstyle:checkstyle`，在A.java中看到一堆checkstyle错误。

然后，在 Eclipse 中，我右键单击 A.java，然后选择“Apply Checkstyle Fixes”。但是，没有进行任何更改。

请告诉我如何应用我的检查样式更改。

注意：我没有配置 Eclipse 来构建。我只使用它来更改代码，然后在命令行上使用 maven 构建。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:42:31.563

我不知道你用的是什么 Eclipse 插件，但我用的是 eclipse-cs。

在eclipse-cs中，当你编写一个CheckStyle Checker（一个用于检测CheckStyle相关问题的类）时，你可以编写另一个类作为所谓的quickfix。如果 Checker 的编写者不提供快速修复，则您将无法使用。

至于 maven 问题，您的 maven 输出和 Eclipse 警告不同：Eclipse 的配置可能与 maven 读取的配置不同。请确保两者使用相同的配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:52:14.587

您必须手动修复您的检查样式警告。

# iphone - 高效地在 iPhone 上存储和检索图像

> ID：12821684
> 
> 赞同：0
> 
> 时间：2012-10-10T14:22:34.980
> 
> 标签：iphone, objective-c

我有一个应用程序可以下载几张图像并将它们存储在手机上。总共可能需要大约 20 张图片。我需要能够根据用户所在的屏幕随意检索这些图像中的任何一个。这些图像将无限期地存储，所以我不想使用临时目录。

目前我有一个名为 Images 的类，其中包含这些方法

```
- (void) cacheImage: (NSString *) ImageURLString : (NSString *)imageName
{
    NSURL *ImageURL = [NSURL URLWithString: ImageURLString];

    // Generate a unique path to a resource representing the image you want

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docDir = [paths objectAtIndex: 0];
    NSString *docFile = [docDir stringByAppendingPathComponent: imageName];

    // Check for file existence
    if(![[NSFileManager defaultManager] fileExistsAtPath: docFile])
    {
        // The file doesn't exist, we should get a copy of it

        // Fetch image
        NSData *data = [[NSData alloc] initWithContentsOfURL: ImageURL];

        UIImage *image = [[UIImage alloc] initWithData: data];

        // Is it PNG or JPG/JPEG?
        // Running the image representation function writes the data from the image to a file
        if([ImageURLString rangeOfString: @".png" options: NSCaseInsensitiveSearch].location != NSNotFound)
        {

            [UIImagePNGRepresentation(image) writeToFile: docFile atomically: YES];

        }
        else if([ImageURLString rangeOfString: @".jpg" options: NSCaseInsensitiveSearch].location != NSNotFound || 
                [ImageURLString rangeOfString: @".jpeg" options: NSCaseInsensitiveSearch].location != NSNotFound)
        {
            [UIImageJPEGRepresentation(image, 100) writeToFile: docFile atomically: YES];
        }
    }
}

- (UIImage *) getCachedImage : (NSString *)imageName
{

    NSArray *paths = NSSearchPathForDirectoriesInDomains
    (NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString* cachedPath = [documentsDirectory stringByAppendingPathComponent:imageName];

    UIImage *image;

    // Check for a cached version
    if([[NSFileManager defaultManager] fileExistsAtPath: cachedPath])
    {
        image = [UIImage imageWithContentsOfFile: cachedPath]; // this is the cached image
    }
    else
    {
        NSLog(@"Error getting image %@", imageName);
    }

    return image;
}

-(void)getImages
{    

//example
    NSString *image1URL = @"http://test/image1.png";        
    NSString *image2URL = @"http://test/image2.png";        
    NSString *image3URL = @"http://test/image3.png";

    [self cacheImage:sLogo: @"Image1"];
    [self cacheImage:sBlankNav: @"Image2"];
    [self cacheImage:buttonLarge :@"Image3"];

}

-(void) storeImages
{
    image1 = [self getCachedImage:@"Image1"];
    image2 = [self getCachedImage:@"Image2"];
    image3 = [self getCachedImage:@"Image3"];

} 
```

所以我使用这样的代码

```
Images *cache = [[Images alloc]init];
[cache storeImages]; 
```

get images 方法在应用程序第一次开始获取图像时调用一次，之后不会再次调用，除非服务器上的图像已更新并且我需要检索更新的图像。

该代码有效，但问题是当我导航到使用它的屏幕时，在加载图像时屏幕加载之前有一个非常轻微的延迟。

我的应用程序是一个选项卡式应用程序，所以它从选项卡 1 开始，我单击实现代码的选项卡 2，第一次加载时会有轻微的暂停。它不会持续很长时间，但它很明显并且很烦人。之后就很好了，因为它已经加载了。但是对于导航控制器，每次从第一个 VC 移动到第二个 VC 时，都会再次调用该方法，因此每次导航时都会出现延迟。

图片不是很大，最大的是68kb，其他的都小很多。目前我只是用 5 张图片进行测试。有没有更有效的方法来存储和检索图像，还是我的代码有问题？我需要能够在没有任何明显延迟的情况下检索这些图像，以使我的应用程序保持流畅而不生涩或笨拙。

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:31:40.533

你有延迟，因为你正在同步下载数据

```
//  NSData *data = [[NSData alloc] initWithContentsOfURL: ImageURL]; 
```

尝试一些像 SDWebImage 这样的智能库：它可以让您异步下载图像，同时仍然可以显示本地图像（代理图像）。顺便说一句，您仍然可以免费获得缓存图像。所以即使你在本地，你仍然可以捕捉到以前下载的图像

[https://github.com/rs/SDWebImage](https://github.com/rs/SDWebImage)

一个必须有

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:34:13.687

您有两个选项可以在后台线程上执行图像加载工作 - 使用[Grand Central Dispatch](http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial)或[NSInvocationOperation](http://www.icodeblog.com/2010/03/04/iphone-coding-turbo-charging-your-apps-with-nsoperation/)。GCD 可能被认为是两者中的更清洁者：

```
dispatch_queue_t q = dispatch_get_global_queue(0, 0);
dispatch_queue_t main = dispatch_get_main_queue();
dispatch_async(q, ^{
        //load images here
        dispatch_async(main, ^{
          // show on main thread here
        });
}); 
```

# error-correction - 将不存在的域名更正为最接近的匹配

> ID：12821691
> 
> 赞同：0
> 
> 时间：2012-10-10T14:22:54.530
> 
> 标签：error-correction

我正在寻找一种服务，它可以告诉您不存在的域的最近匹配，因为它被用户拼错了。例如，如果用户写了“hotmail.con”，则发送一个带有它的查询并获得结果“hotmail.com”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:26:12.337

你选择了一个难题。域的长度可以是 1-63 个字符，应包含字符 [a-z0-9-]，并且不应以连字符开头。蛮力强迫它不是一种选择。如果用户在 hotmail.con 中键入，您可以搜索它的拼写错误，其中会尝试 `homail.com`and `hotmale.com`，这可能是也可能不是准确的域名，谁知道哪个拼写错误是正确的？计算机必须向用户返回一个选项列表：“您是指这个域名，还是那个域名？”。

您可能对 Peter Norvig 的拼写校正器感兴趣，Google 用它来检查输入的查询。它是地球上最好的拼写校正器之一。

[http://norvig.com/spell-correct.html](http://norvig.com/spell-correct.html)

如果您拥有一组正确且最新的域名，则 Peter Norvig 的拼写检查器应该可以工作。您可以即时创建自己的列表，方法是保留用户访问过的站点的列表，并将这些站点用作要检查的域名主体。这样，当用户选择“hotmail.con”时，它会在您的列表中找到 hotmail.com。但是，这并不能防止用户意外访问：“hotmale.com”。因为那是一个有效的网站。

这是有关如何获取所有域名的stackoverflow qustion：

[https://stackoverflow.com/questions/4539155/how-to-get-all-the-domain-names](https://stackoverflow.com/questions/4539155/how-to-get-all-the-domain-names)

最好的想法是跳出框框思考，像 Firefox 那样去做。当用户开始输入 hotmail.com 时，他们通常会单击一个文本框，输入“h”，然后输入“o”。有一个以它开头的最近访问的域名的下拉列表。

# c++ - 六角射线转换

> ID：12821698
> 
> 赞同：1
> 
> 时间：2012-10-10T14:23:14.530
> 
> 标签：c++, c, x86, masm

有人如何通过 IDA PRO 中的偏移量获得结果函数 1002DDCC3 的实际位置/地址？特别是“a1 + 0x2E0”部分。

它显然调用了一个新函数 sub_100xxxxx；

比方说

```
a1 == 942691698;

int (__stdcall *__stdcall QueryInterface(unsigned int a1))(int)
{
 if ( a1 == 942691698 )
            return (int (__stdcall *)(int))sub_1002DDC3;
}

int __stdcall sub_1002DDC3(int a1, int a2)
{
  int result; // eax@2

  if ( a1 )
    result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)a1 + 0x2E0))(a2);
  else
    result = -1;
  return result;
} 
```

功能 1002DDC3 的原始组装是[http://img.techpowerup.org/121010/Capture.png](http://img.techpowerup.org/121010/Capture.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:02:16.183

你的措辞非常不清楚。假设这`QueryInterface()`确实与以下内容有关`IUnknown::QueryInterface()`：

如果您要问“”的返回值是什么意思`sub_1002DDC3()`，那可能是[HRESULT](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378137%28v=vs.85%29.aspx)。这里最重要的值是零 ( `S_OK`)、-1（一般错误）和非零（特定错误）。

还是您在问“地址是`sub_1002DDC3()`什么？”

如果您可以发布原始反汇编，实际上会*更容易理解这一点。*

**编辑添加**

接口方法的地址是在运行时确定的。反汇编程序事先不知道地址，因此无法告诉您正在调用哪个方法。

是的，您需要单独反汇编 COM 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:30:29.177

这取决于“a1”参数的值。由于可以使用不同的 'a1' 值调用此函数，因此仅通过查看列表无法判断。您必须在调试器下运行它或检查调用者。

# generics - Java 7 和 Java 6 中 JComboBox 安全类型的区别

> ID：12821700
> 
> 赞同：4
> 
> 时间：2012-10-10T14:23:23.967
> 
> 标签：generics, jcombobox, java-7, type-safety, java-6

我正在使用可以同时编译 Java 6 和 Java 7 平台的项目。GUI 类之一是使用 JComboBox。由于 JComboBox 在 Java 7 中将其规范更改为泛型类型，因此它需要组件的参数声明。

在 Java 6 声明中，如：

```
JComboBox mybox; 
```

没问题，没有错误，没有警告。

在 Java 7 中，相同的组件声明会发出警告

```
JComboBox is a raw type. References to generic type JComboBox<E> should be parameterized 
```

按照 Java 7 的要求提供参数：

```
JComboBox<String> mybox; 
```

消除了 Java 7 平台的警告，但在 Java 6 中出现编译错误。

在这种情况下，我能做些什么，让 Java 平台 6 和 7 都能为我的项目安居乐业？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T15:31:48.767

您可以使用 a`@SuppressWarnings("rawtypes")`来忽略泛型警告。请注意，这`getSelectedItem`不是使用泛型。一旦你完全使用 Java 7 删除/修复警告。

# javascript - TypeError: base.contacts is undefined - 我该如何定义它？

> ID：12821704
> 
> 赞同：0
> 
> 时间：2012-10-10T14:23:30.810
> 
> 标签：javascript

收到上述错误参考线`for ( var i = 0; i < base.contacts.length; i++) {`，无法弄清楚如何解决。下面是相关的代码部分

```
 synckolab.addressbookTools.createTBirdObject = function (base, cards) {
    var card = null;
    if (base.type === "contact") {
        card = Components.classes["@mozilla.org/addressbook/cardproperty;1"].createInstance(Components.interfaces.nsIAbCard);
    } else if (base.type === "maillist") {
    card = Components.classes["@mozilla.org/addressbook/directoryproperty;1"].createInstance(Components.interfaces.nsIAbDirectory);
    card.isMailList = true;
    } else {
        return null;
    }

// for a mailing list add the entries
    if (base.type === "maillist") {
    card.dirName = this.getCardProperty(base, "DisplayName");
    if (this.haveCardProperty(base, "NickName")) {
        card.listNickName = this.getCardProperty(base, "NickName");
    }
    if (this.haveCardProperty(base, "Notes")) {
        card.description = this.getCardProperty(base, "Notes");
    }
    // fill the list
    for ( var i = 0; i < base.contacts.length; i++) {
        var listCard = cards.get(this.getUID(base.contacts[i]));
        card.addressLists.appendElement(listCard, false);
    }
} else {
    // go through all elements of base
    for ( var field in base) {
        // skip our own stuff TODO: handle mailing lists!
        if (field !== "type" && field !== "synckolab" && field !== "ts" && field !== "contacts" && field !== "isMailList") {
            // copy the property from base to card
            this.setCardProperty(card, field, this.getCardProperty(base, field));
        }
    }
}

return card; 
```

};

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:50:52.413

`base`是您移交给函数的参数，该函数应该是具有（至少）以下属性的对象：

```
type
contact 
```

显然它缺少`contact`属性，它又应该是一个数组。因此，您应该查看要移交给该函数的对象。

要暂时解决此问题，您可以执行以下操作：

```
if (base.contacts){
    for ( var i = 0; i < base.contacts.length; i++) {
        /*...*/
    }
} 
```

但是，要真正解决问题，您应该查看代码、调用函数的位置并检查您传递给函数的对象是如何构造的。做一个

```
console.log(base); 
```

仔细观察物体。

# php - Zend_Db 嵌套查询，其中一个查询需要另一个查询的 ID

> ID：12821705
> 
> 赞同：1
> 
> 时间：2012-10-10T14:23:31.067
> 
> 标签：php, mysql, zend-framework, zend-db-select

我对 Zend 框架还很陌生，并且已经搜索了好几天，但没有找到以下问题的示例：

我试图从下面的代码中获得的结果是一个列表，该列表将具有主类别及其下方的匹配子类别，并循环遍历我的所有主要类别。

例子：

电器（主要类别）

*   微波
*   火炉

电子（主要类别）

*   计算机
*   收音机

这是代码（同样我不知道该怎么做；我的想法是做 nested `foreach()`，第二个`foreach()`从第一个选择中获取主类别 id）：

```
// Get  Categories with Sub Categories

$catid = 0;

$selectmain = $this->dbhInstance->select()
                                ->from(array('a' => 'code_sub_category'), 
                                       array('b.id as mainid', 'b.site_category'))
                                ->join(array('b' => 'site_categories'), 
                                       'b.id = a.site_category_id')
                                ->group("b.id")
                                ->order("b.site_category");

$selectsub = $this->dbhInstance->select()
                               ->from(array('a' => 'code_sub_category'), 
                                      array('a.id as subid', 'a.sub_category', 'a.site_category_id'))
                               ->join(array('b' => 'site_categories'), 
                                      'b.id = a.site_category_id')
                               ->where("a.site_category_id = '" . $catid . "'")
                               ->order("a.sub_category");

$fetch = $this->dbhInstance->fetchAll($selectmain);
$fetch2 = $this->dbhInstance->fetchAll($selectsub);
//var_dump($fetch2);

$items = array();
$items2 = array();

foreach ($fetch as $key => $value) {
    $catid = $value['id'];
    $items = array_merge($items, array($key => $value));

    foreach ($fetch2 as $key => $value) {
        $items = array_merge($items, array($key => $value));
    }

    $this->view->getsubcategories = $items;
}

$this->view->getmaincategories = $items;
//End FULL Categories for My Categories 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:41:02.813

你可以试试这个：

```
$selectCat = $this->dbhInstance->select()
                            ->from(array('c' => 'site_categories'), array('c.id as id', 'c.site_category as text, 0 as parent'))
                            ->order('c.site_category');

$selectSubCat = $this->dbhInstance->select()
                            ->from(array('sc' => 'code_sub_category'), array('sc.id as id', 'sc.sub_category as text', 'sc.site_category_id as parent')
                            ->order('sc.sub_category');

$select =   $this->dbhInstance->select()->union(array($selectCat, $selectSubCat));

$statement = $this->dbhInstance->query($select);

$items = array();
$childs = array();

while( $row = $statement->fetch() ) {
     $items[] = (object)array(
    'id' => $row['id'],
    'text' => $row['text'],
    'parent' => $row['parent'],
    'item' => array()
);
}

foreach($items as $item)
$childs[$item->parent][] = $item;

foreach($items as $item) if (isset($childs[$item->id]))
$item->item = $childs[$item->id];

if( !isset($childs[0]) ) $this->view->getmaincategories = $getmaincategories = array();
else 
$this->view->getmaincategories = $getmaincategories = $childs[0];

// Display the result 
Zend_Debug::dump($getmaincategories); 
```

结果将是一个对象数组，如下所示：

```
array(
'Appliances' => array(
    'Microwave',
    'Stove'
),
'Electronics' => array(
    'Computer',
    'Radio'
)
) 
```

希望这有帮助！

问候，艾哈迈德。

# mysql - 选择其中行号 = rownum

> ID：12821709
> 
> 赞同：3
> 
> 时间：2012-10-10T14:23:36.170
> 
> 标签：mysql

我一直在尝试运行此查询以按行号选择一行，但我在 where 子句中不断收到未知列“行”。这个查询可以吗

```
SELECT @row := @row + 1 AS row, pi.*
FROM ci_patient_info pi
where row = 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:25:25.587

把它包在一个`subquery`

```
SELECT c.*
FROM
   (
      SELECT @row := @row + 1 AS row, pi.*
      FROM ci_patient_info pi
   ) c
where c.row = 2 
```

**更新 1**

也许你的子查询应该是这样的，

```
 SELECT @row := @row + 1 AS row, pi.*
  FROM ci_patient_info pi, (SELECT @row:=0) x 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:26:21.303

如果您需要第二条记录，只需使用该`LIMIT`子句。

```
SELECT  pi.*
FROM ci_patient_info pi LIMIT 1, 1 
```

# c# - 在 .NET 上安装 Windows 服务时探测负载异常

> ID：12821712
> 
> 赞同：1
> 
> 时间：2012-10-10T14:23:41.097
> 
> 标签：c#, windows, service, probing

我有一个用 .NET 编写的 Windows 服务，我使用探测功能将 dll 加载到这个 Windows 服务。但是，当我打开命令提示符并尝试使用 installutil.exe 安装 Windows 服务时，出现错误，例如：“System.Reflection.ReflectionTypeLoadException：无法加载一种或多种请求的类型。检索 LoaderExceptions 属性以获取更多信息. 中止安装",

另一方面，当我将dll移动到与windows服务相同的文件夹中并重复安装过程时，windows服务安装成功。

您对这个问题有什么想法或建议吗？.NET的windows服务安装是否存在探测问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-02-12T23:06:53.550

我在我的项目中遇到了同样的问题，在我的 Windows 服务项目中，我有以下`app.config`部分：

```
<runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
         <probing privatePath="SDK" />
    </assemblyBinding>
</runtime> 
```

如果我将服务作为控制台执行，一切都很好，但是当我尝试安装它时 installutil 失败并且我得到了同样的异常，所以我的解决方案是通过命令行自行安装服务：像这样：

```
cmd: hotspotcenter -i <service_name="service name">
// service_name i made it optional 
```

安装程序类助手：

```
internal static class BasicServiceInstaller
{
    public static void Install(string serviceName)
    {
        CreateInstaller(serviceName).Install(new Hashtable());
    }

    public static void Uninstall(string serviceName)
    {
        CreateInstaller(serviceName).Uninstall(null);
    }

    private static Installer CreateInstaller(string serviceName)
    {
        var installer = new TransactedInstaller();
        installer.Installers.Add(new ServiceInstaller
        {
            ServiceName = serviceName,
            DisplayName = serviceName,
            StartType = ServiceStartMode.Manual
        });
        installer.Installers.Add(new ServiceProcessInstaller
        {
            Account = ServiceAccount.LocalSystem
        });
        var installContext = new InstallContext(
            serviceName + ".install.log", null);
        installContext.Parameters["assemblypath"] =
            Assembly.GetEntryAssembly().Location;
        installer.Context = installContext;
        return installer;
    }
} 
```

在服务项目的主条目中：

```
 if (Environment.UserInteractive)
 {
            bool install = false;
            bool uninstall = false;
            string serviceName = "YourDefaultServiceName";

            var p = new OptionSet()
              .Add<bool>("i|install", "Install Windows Service", i => install = i)
              .Add<bool>("i|install=", "Install Windows Service", i => install = i)
              .Add<bool>("u|uninstall", "Uninstall Window Service", u => uninstall = u)
              .Add<string>("sn|service_name=", "Service Name", n => serviceName = n);

            p.Parse(args);

            if (install)
            {
                BasicServiceInstaller.Install(serviceName);
                return;
            }
            else if (uninstall)
            {
                BasicServiceInstaller.Uninstall(serviceName);
                return;
            }

            // if no install or uninstall commands so start the service as a console.
            var host = new YourService();
            host.Start(args);
            Console.ReadKey();
        }
        else
        {
            ServiceBase.Run(new HotspotCenterService());
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:03:03.030

如果没有确切的信息，我建议如下：

*   检查异常详细信息以查看究竟出了什么问题
*   使用[Fusion Log Viewer](http://msdn.microsoft.com/en-us/library/e74a18c4%28v=vs.71%29.aspx)，查看哪些程序集绑定失败
*   检查您的探测配置是否与您的部署匹配

探测[按此处所述](http://msdn.microsoft.com/en-us/library/823z9h8w.aspx)进行配置。

# bash - 在 bash 脚本中将字符串转换为整数 - “前导零”数字错误

> ID：12821715
> 
> 赞同：44
> 
> 时间：2012-10-10T14:23:46.820
> 
> 标签：bash

在文本文件 test.txt 中，我有以下信息：

```
sl-gs5 desconnected Wed Oct 10 08:00:01 EDT 2012 1001 
```

我想通过下一个命令行提取事件的时间：

```
hour=$(grep -n sl-gs5 test.txt | tail -1 | cut -d' ' -f6 | awk -F ":" '{print $1}') 
```

我得到了“08”。当我尝试加 1 时，

```
 14 echo $((hour+1)) 
```

我收到下一条错误消息：

```
./test2.sh: line 14: 08: value too great for base (error token is "08") 
```

如果 Bash 中的变量没有类型，为什么？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-10-10T14:29:00.737

见算术*评估*`man bash`：

> 以 0 开头的常量被解释为八进制数。

*您可以通过参数扩展*删除前导零：

```
hour=${hour#0} 
```

或强制 base-10 解释：

```
$((10#$hour + 1)) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-10T14:31:08.980

我称之为黑客，但鉴于你只处理小时值，你可以做

```
 hour=08
 echo $(( ${hour#0} +1 ))
 9
 hour=10 
 echo $(( ${hour#0} +1))
 11 
```

风险很小。

IHTH。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-08-09T13:07:58.157

你也可以使用`bc`

```
hour=8
result=$(echo "$hour + 1" | bc)
echo $result
9 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-05-07T19:11:59.803

这是一种简单的方法，尽管不是获取字符串的 int 值的最漂亮的方法。

```
hour=`expr $hour + 0` 
```

例子

```
bash-3.2$ hour="08"
bash-3.2$ hour=`expr $hour + 0`
bash-3.2$ echo $hour
8 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-09-19T14:40:39.053

**简而言之：**为了在 bash 中处理“**前导零**”数字（第一个非零之前的任何 0 数字） - 使用`bc`任意精度计算器语言

例子：

```
a="000001"
b=$(echo $a | bc)
echo $b 
```

> 输出：1

来自 Bash 手册：

> “bc 是一种通过交互式执行语句支持任意精度数的语言。语法与 C 编程语言有一些相似之处。标准数学库可通过命令行选项获得。如果需要，定义数学库在处理任何文件之前。bc 首先按列出的顺序处理命令行中列出的所有文件中的代码。处理完所有文件后，bc 从标准输入中读取。所有代码在读取时执行。（如果文件包含停止处理器的命令，bc 永远不会从标准输入中读取。）”

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-01-30T23:42:54.147

由于小时数始终为正数且始终为 2 位数，因此您可以在其前面设置 1 并减去 100：

```
echo $((1$hour+1-100)) 
```

这相当于

```
echo $((1$hour-99)) 
```

一定要评论这样的体操。:)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-10-22T05:46:26.530

sed怎么样？

```
hour=`echo $hour|sed -e "s/^0*//g"` 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-21T20:01:38.123

前导 0 导致 bash 试图将您的数字解释为八进制数，但八进制数是 0-7，因此 8 是无效标记。

如果我是你，我会添加一些逻辑来删除前导 0，添加一个，如果结果小于 10，则重新添加前导 0。

# asp.net - 动态移除父元素

> ID：12821716
> 
> 赞同：0
> 
> 时间：2012-10-10T14:23:46.930
> 
> 标签：asp.net, .net, vb.net

我有一个使用 2 个母版页和一些用户控件呈现的 .NET (vb) 页面。

我的用户现在想要一个“打印”按钮。

有没有办法将主要内容从页面中剥离出来，并在没有所有母版页和用户控制内容的情况下重新渲染？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:32:52.000

您可以在打印时使用 CSS 隐藏页面上的元素。那时就不需要往返服务器了。

```
@media screen 
{
   div.header {...}
}

@media print
{
   div.header {display:none;}
}

@media screen, print 
{
 ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:28:08.203

您可以创建一个不同的母版页，然后更改为您的“替代”剥离母版，其中可能包括一个打印样式表。

[http://ipona.com/samples/](http://ipona.com/samples/)有一些代码示例（页面底部链接到[https://skydrive.live.com/?cid=635c8e2bf4822d7c&id=635C8E2BF4822D7C!498](https://skydrive.live.com/?cid=635c8e2bf4822d7c&id=635C8E2BF4822D7C!498)的 Skydrive 文件夹）

# f# - 在 F# 中，在有区别的联合中严格计算和记忆

> ID：12821718
> 
> 赞同：3
> 
> 时间：2012-10-10T14:23:48.727
> 
> 标签：f#, functional-programming, immutability, discriminated-union

我有一个受歧视的工会，例如

```
type Dish = 
| Eggs
| Spam of Dish 
```

这基本上是一个链表，没有任何内容，例如`Spam(Spam(Spam(Eggs)))`. 我想对这个结构进行严格的计算，比如计算长度，并记住结果。在普通类型中，我会使用类本地`let`绑定，但这些在可区分的联合中不可用。

一种方法是，

```
type Count = int
type Dish = 
| Eggs
| Spam of Dish * Count 
```

但这真的很混乱，当我需要的数据很容易计算时，但我仍然希望有更好的方法（不使用外部可变结构）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T14:42:12.943

一种选择是将联合案例设为私有以隐藏缓存的长度。

```
//the 'guts' of Dish -- entirely hidden
type private DishImpl = 
  | Eggs
  | Spam of DishImpl

// Dish wrapper type -- implementation hidden
type Dish = 
  private 
  | Dish of DishImpl * int
  with
    // O(1), just get the 'length' field
    member x.Length = let (Dish(_, len)) = x in len
    static member Eggs() = Dish(Eggs, 1)
    static member Spam(Dish(dish, len)) = Dish(Spam dish, len + 1)

let eggs = Dish.Eggs()
let spam = Dish.Spam(eggs)
printfn "%d" eggs.Length //outputs: 1
printfn "%d" spam.Length //outputs: 2 
```

要做到这一点，请创建一个附带的模块，其中包含`let`-bound 函数和用于解构的活动模式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T15:02:53.137

如果你容忍一点*内部*可变状态，这里有一个`memoize`函数，它为每个函数创建一个字典：

```
let memoize f =
    let dict = Dictionary()
    fun n ->
        match dict.TryGetValue(n) with
        | (true, v) -> v
        | _ ->
            let res = f(n)
            dict.Add(n, res)
            res
// This function results in a warning though
let rec length = memoize (function Eggs -> 0 | Spam d -> 1 + length d) 
```

由于隐藏了可变字典，因此该方法还不错。

一种纯粹的函数式方法可以`Map`用来保存值和一种`State`计算表达式来隐藏`Map`传递的值。请参阅[此代码段](http://fssnip.net/3v)以查看`memoize`计算表达式的外观。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T21:09:40.950

还有[*备忘录功能，多型！*拉尔夫·欣泽 (Ralph Hinze)（2000 年）](http://www.staff.science.uu.nl/~jeuri101/Meetings/wgp2000/HinzeMemo.ps)。适应 F#：

```
type Dish =
    | Eggs
    | Spam of Dish

type DishTable<'T> =
    {
        Eggs : Lazy<'T>
        Spam : Lazy<DishTable<'T>>
    }

let rec tabulate (f: Dish -> 'T) : DishTable<'T> =
    {
        Eggs = lazy f Eggs
        Spam = lazy tabulate (f << Spam)
    }

let rec lookup (table: DishTable<'T>) (dish: Dish) : 'T =
    match dish with
    | Eggs -> table.Eggs.Value
    | Spam x -> lookup table.Spam.Value x

let memo (f: Dish -> 'T) : (Dish -> 'T) =
    lookup (tabulate f)

let rec len x =
    match x with
    | Eggs -> 0
    | Spam x -> 1 + len x

let l2 = memo len 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-18T09:45:25.050

这就是我想出的。这不是真正的 memoization，因为当您调用 mem 时它很重要，但可能会满足您的需求。

```
type Dish = 
| Eggs
| Spam of Dish 
| Memo of Dish * int
with 
    member d.length = 
        match d with 
        | Eggs        -> 1
        | Spam d      -> 1 + d.length
        | Memo (d, i) -> i
    member d.mem = 
        match d with 
        | Eggs        -> Memo(d, d.length)
        | Spam d2     -> Memo(d, d.length)
        | Memo(d2, i) -> d // no need to memo it again

let x = Spam (Spam(Spam Eggs))
let m = x.mem

x.length // val it : int = 4
m.length // val it : int = 4 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-12T12:30:37.627

在查看了答案之后，我决定使用一个对我来说似乎最不突兀的模型。我使用了一个修改过的对象来演示它如何在稍微复杂的场景中工作。

```
type StackDef<'a>(v : 'a, s : Stack<'a>) = 
    member val Length = s.Length + 1
    member val Inner = v, s 
and Stack<'a> = 
    | Empty
    | Stack of StackDef<'a>
    member this.Length = 
        match this with
        | Empty -> 0
        | Stack(def) -> def.Length

let Stack (v, s) = Stack(StackDef(v, s)) 
let (|Stack|Empty|) = function | Empty -> Empty | Stack(sd) -> Stack(sd.Inner)
//...
let example = Stack(1, Stack(2, Stack(3, Empty))).Length 
```

1.  它不包含任何外部可变状态。
2.  有区别的联合`Dish`（或在示例中为`Stack`）继续存在。
3.  该字段`length`根本没有出现在联合定义中，也没有由任何构造函数提供，就像它应该的那样。
4.  记忆化的数据应该与实例相关联。

但是，考虑到这一点，通过使用像 Afterthought 这样的静态编织器，可能可以替换任何方法，例如：

```
Stack<'a> = 
    | Empty
    | Stack of 'a * Stack<'a>

    [<Lazy>] //custom attribute that would work with a static weaver
    member this.Length = 
        match this with
        | Empty -> 0
        | Stack(_, s) -> s.Length + 1 
```

`private readonly Lazy<int> __length`在构造函数中使用执行上述代码的委托进行初始化，并将方法的实际内容更改为简单地调用`__length.Value`. 虽然 F# 不允许联合类型包含字段，但可能出于非常正当的原因，我非常怀疑 IL 会有这样的限制。
事实上，使用一些 IL 操作可以做很多事情。也许这是值得考虑的事情。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-10T15:47:38.767

请注意，在您的情况下，从字面上看，您的类型值的唯一有趣属性是它的长度，因此您不妨只使用整数作为表示形式：

```
let Eggs = 0
let Spam n = 1 + n

let (|Eggs|Spam|) = function
| 0 -> Eggs
| n -> Spam(n-1)

let length = id

// example usage
let dish = Spam(Spam(Eggs))

let l = length dish

let kind =
    match dish with
    | Eggs -> "Eggs"
    | Spam(Eggs) -> "One Spam"
    | Spam(Spam _) -> "At least two Spams" 
```

如果您真正的问题是如何为更有趣的类型执行此操作，那么一种方法是创建相互递归的类型，其中一个被注释：

```
type 'a AnnotatedDish = { dish : 'a Dish; value : 'a }
and 'a Dish =
| Eggs
| Spam of 'a AnnotatedDish

// "smart" constructors, given that you want to annotate with length
let eggs = { dish = Eggs; value = 0 }
let spam d = { dish = Spam d; value = 1 + d.value }

let length { value = l } : int = l

// active patterns
let (|Eggs|Spam|) = function
| { dish = Eggs } -> Eggs
| { dish = Spam d } -> Spam d

// example usage
let dish = spam(spam(eggs))

let l = length dish

let kind =
    match dish with
    | Eggs -> "Eggs"
    | Spam(Eggs) -> "One Spam"
    | Spam(Spam _) -> "At least two Spams" 
```

# c++ - 我如何知道我的编译器是否支持 XXXX C++11 功能？

> ID：12821719
> 
> 赞同：4
> 
> 时间：2012-10-10T14:23:56.920
> 
> 标签：c++, compiler-construction, c++11, cross-compiling, preprocessor-directive

> **可能重复：**
> [如何检查 C++11 支持？](https://stackoverflow.com/questions/5047971/how-do-i-check-for-c11-support)

我正在编写一个小型库，并且只要编译器支持它们，我就想使用类枚举。我还想使用其他 C++11 功能，例如`final`和`override`关键字。

到目前为止，我已经使用技巧来确保它可以在所有版本的 GCC 上编译，但是当我启动我的 Windows 分区时，Visual Studio 2010 也开始抱怨。这是我使用的技巧的一个示例：

```
#if __GNUC__ == 4 && (__GNUC_MINOR__ > 7 || \
      (__GNUC_MINOR__ == 7 && __GNUC_PATCHLEVEL__ > 1))
#   define TATO_OVERRIDE override
#   define TATO_NO_THROW nothrow
#else
#   define TATO_OVERRIDE
#   define TATO_NO_THROW throw()
#endif 
```

我知道最新版本的 Visual Studio 也已经支持了一批新功能。我想要的是一组宏，它告诉我正在使用的编译器上有哪些功能可用。

```
#ifdef THIS_COMPILER_SUPPORTS_CLASS_ENUMS
  ...
#endif 
```

这存在吗？有没有这样做的图书馆？

* * *

> 编译器的文档？

让我澄清一下。我知道如何找到这些信息，我的问题在别处。我不想通过所有可能的编译器文档来收集这些信息，特别是因为同一个编译器可能支持与其版本相关的不同功能。这就是我迄今为止一直在做的事情，而我正在寻找的实际上是一种不这样做的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T14:47:36.510

Boost 实际上有[很多这样的宏](http://www.boost.org/doc/libs/1_51_0/libs/config/doc/html/boost_config/boost_macro_reference.html#boost_config.boost_macro_reference.macros_that_describe_c__11_features_not_supported)可用。你可以用那个。否则，唯一的方法是从本质上检查编译器的版本，并使用您对该版本支持的功能的了解来确定某个功能是否可用。

本质上，Boost 所做的，除了手动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T14:42:45.650

曾经讨论过有一些标准化的功能测试机制，但事实证明这没有任何意义：如果编译器实现了标准，所有的功能测试都会产生`true`. 如果不是，就没有理由假设它在功能测试方面遵循标准！

因此，使用某种配置文件似乎是最可靠的方法。就个人而言，我会以与显式检查编译器版本不同的方式来做这件事：相反，我会使用一些东西来尝试编译器是否在可接受的程度上支持特定功能。配置可以按照`autoconf`或类似的方式运行。

关于生成的配置，我会尝试将事物映射到合适的结构，而不是在配置头之外使用条件编译。例如，我会使用这样的东西：

```
#if defined(KUHL_HAS_CLASS_FINAL)
#  define kuhl_class_final final
#else
#  define kuhl_class_final
#endif 
```

特别是对于类枚举，您可能需要使用一些有点棘手的东西，因为枚举值仅在范围内可用，而值仅在范围外可用。因此，可能需要在一种情况下提出某种形式的额外嵌套，但在另一种情况下则不然。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T14:40:43.823

clang 有一些用于各种功能检查的内置宏：[clang 功能检查宏](http://clang.llvm.org/docs/LanguageExtensions.html#feature_check) 如果所有编译器供应商都接受这些（以及更多），那就太好了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T14:36:15.457

> “我想要的是一组宏，它告诉我正在使用的编译器上有哪些功能可用。”

标准中没有这样的东西。

编译器差异的一种实用方法是为您支持的每个编译器和编译器版本提供一个标头。这些标头应具有相同的名称。包含哪一个取决于包含路径、工具使用情况，这很容易为每个编译器定制。

我把这个概念称为**虚拟标题**。我发现它适用于三个级别：系统依赖、编译器依赖和版本依赖。我认为该计划不会扩大到更多，但另一方面，这似乎就是人们所需要的。

# r - 带有 LyX 的 knitr 中的 CJK（Windows 7）

> ID：12821720
> 
> 赞同：2
> 
> 时间：2012-10-10T14:24:00.563
> 
> 标签：r, cjk, knitr, lyx

我正在尝试用英文写一个 LyX 文档，其中穿插一些中文，我还想要 knitr 用于数字和分析。我的安装喜欢 knitr，它喜欢中文（在此处使用“替代”方法：[http](http://wiki.lyx.org/LyX/Chinese#toc5) ://wiki.lyx.org/LyX/Chinese#toc5 ），但我无法获取包含 CJK 的文档来编织。

我的测试文档有这个文本（TeX 代码框中的 Tex）：

```
Hello    
\cntxt{你好吗} 
```

我的用户定义序言是（来自 LyX wiki）：

```
\usepackage{CJKutf8}
\usepackage[overlap, CJK]{ruby}
\newenvironment{SChinese}{%
\CJKfamily{gbsn}%
\CJKtilde
\CJKnospace}{}
\newcommand{\cntxt}[1]{\begin{CJK}{UTF8}{}\begin{SChinese}#1\end{SChinese}\end{CJK}} 
```

文档设置：我的语言是英语，编码是 utf8（这些的其他选项似乎没有任何改变）。谢一辉网站上提到的，关闭了 LyX 中的语言标记。

当 knitr 被加载并且我查看 [PDF (pdflatex)] 时，它在发送到 R 时会打嗝：

```
10:13:40.589: Warning in readLines(input, warn = FALSE) :
10:13:40.597:   invalid input found on input connection 'test-chinese-2.Rnw' 
```

乳胶不喜欢它得到的东西：

```
! File ended while scanning use of \cntxt. 
```

取出中文字符即可消除错误。离开中文并卸载knitr也消除了错误。关于如何保留 CJK、保持 knitr 加载以及仍然获取文档的任何建议？

Lyx 是原生 Windows 2.0.4，R 是 2.15.1，knitr 是 0.8。[knitr-examples](https://github.com/yihui/knitr-examples/)中的[034-chinese.Rhtml](https://github.com/yihui/knitr-examples/blob/master/034-chinese.Rhtml)示例完美运行。

这是消息窗口输出：

```
13:45:45.419: Previewing ...
13:45:45.581: Rscript --verbose --no-save --no-restore "C:/Program Files (x86)/LyX20/Resources/scripts/lyxknitr.R" "C:/Users/Patrick/AppData/Local/Temp/lyx_tmpdir.Hp8472/lyx_tmpbuf2/""test-chinese-2.Rnw" "C:/Users/Patrick/AppData/Local/Temp/lyx_tmpdir.Hp8472/lyx_tmpbuf2/""test-chinese-2.tex" UTF-8 "C:/Users/Patrick/Downloads/"
Running: Rscript --verbose --no-save --no-restore "C:/Program Files (x86)/LyX20/Resources/scripts/lyxknitr.R" "C:/Users/Patrick/AppData/Local/Temp/lyx_tmpdir.Hp8472/lyx_tmpbuf2/""test-chinese-2.Rnw" "C:/Users/Patrick/AppData/Local/Temp/lyx_tmpdir.Hp8472/lyx_tmpbuf2/""test-chinese-2.tex" UTF-8 "C:/Users/Patrick/Downloads/"
13:45:47.202: [1] TRUE
13:45:47.203: [1] TRUE
13:45:47.230: running
13:45:47.237:   'C:\PROGRA~1\R\R-215~1.1\bin\i386\Rterm.exe --slave --no-restore --no-save --no-restore --file=C:/Program Files (x86)/LyX20/Resources/scripts/lyxknitr.R --args C:/Users/Patrick/AppData/Local/Temp/l
13:45:47.247: yx_tmpdir.Hp8472/lyx_tmpbuf2/test-chinese-2.Rnw C:/Users/Patrick/AppData/Local/Temp/lyx_tmpdir.Hp8472/lyx_tmpbuf2/test-chinese-2.tex UTF-8'
13:45:47.252: 
13:45:47.258: Warning in readLines(input, warn = FALSE) :
13:45:47.266:   invalid input found on input connection 'test-chinese-2.Rnw'
13:45:47.802: 
  |                                                                       
  |                                                                 |   0%
  |                                             
13:45:47.813:                           
  |>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>| 100%
13:45:47.820:   ordinary text without R code
13:45:47.826: 
13:45:47.828: 
13:45:47.832: [1] "test-chinese-2.tex"
13:45:47.836: [1] TRUE
13:45:47.837: [1] TRUE
13:45:47.843: 
13:45:47.844: 
13:45:47.848: processing file: test-chinese-2.Rnw
13:45:47.854: output file: C:\Users\Patrick\Downloads\test-chinese-2.tex
13:45:47.860: 
13:45:47.875: pdflatex  "test-chinese-2.tex"
Running: pdflatex  "test-chinese-2.tex" > nul
13:45:48.186: This is pdfTeX, Version 3.1415926-2.3-1.40.12 (MiKTeX 2.9)
13:45:48.215: entering extended mode
13:45:48.219: 
13:45:48.224: (C:\Users\Patrick\AppData\Local\Temp\lyx_tmpdir.Hp8472\lyx_tmpbuf2\test-chinese
13:45:48.229: -2.tex
13:45:48.233: LaTeX2e <2011/06/27>
13:45:48.239: Babel <v3.8m> and hyphenation patterns for english, afrikaans, ancientgreek, ar
13:45:48.247: abic, armenian, assamese, basque, bengali, bokmal, bulgarian, catalan, coptic, 
13:45:48.255: croatian, czech, danish, dutch, esperanto, estonian, farsi, finnish, french, ga
13:45:48.263: lician, german, german-x-2009-06-19, greek, gujarati, hindi, hungarian, iceland
13:45:48.269: ic, indonesian, interlingua, irish, italian, kannada, kurmanji, lao, latin, lat
13:45:48.275: vian, lithuanian, malayalam, marathi, mongolian, mongolianlmc, monogreek, ngerm
13:45:48.280: an, ngerman-x-2009-06-19, nynorsk, oriya, panjabi, pinyin, polish, portuguese, 
13:45:48.285: romanian, russian, sanskrit, serbian, slovak, slovenian, spanish, swedish, swis
13:45:48.291: sgerman, tamil, telugu, turkish, turkmen, ukenglish, ukrainian, uppersorbian, u
13:45:48.296: senglishmax, welsh, loaded.
13:45:48.300: 
13:45:48.638: Error while previewing format: pdf2C:\Users\Vincent\Documents\LyX\source\lyx20x\src\support\Systemcall.cpp(273): Systemcall: 'pdflatex  "test-chinese-2.tex"' finished with exit code 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T23:52:46.560

不确定这是否算作一个答案，但是从 SlowLearner 的书中拿了一页我弄乱了 LyX20\Resources\scripts\lyxknitr.R 中的语言环境设置。

添加代码

```
## add a kludge for locale 
print(Sys.getlocale(category = "LC_CTYPE"))
Sys.setlocale("LC_CTYPE","chinese") 
```

在 knit() 做我想要的之前。不过，上帝禁止我想在文档中添加另一种非罗马语言。

# sql - 为什么要使用约束？

> ID：12821721
> 
> 赞同：2
> 
> 时间：2012-10-10T14:24:03.253
> 
> 标签：sql, constraints

我们定义这样的外键`FOREIGN KEY(name) REFERENCES User(name)`或类似的东西。为什么以及何时需要使用约束？我不太明白约束的目的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:25:56.477

对外键进行约束的目的是确保您不能删除主表中的记录，而其他表中仍有对其的引用。如果没有约束，您将在数据库中获得无效数据，并且将违反参照完整性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T14:28:23.950

约束（包括 PRIMARY KEYs、FOREIGN KEYs 和 CHECK 约束）的目的是指示数据库引擎强制执行有关数据的某些事实。

例如，如果您有一个表`customers`和一个表`orders`，并且两个表都有一个列，那么使用表中不存在的`customer_id`a 记录订单可能是非法条件。`customer_id``customers`

如果是这样，您可以将`customer_id`in声明`customers`为 PRIMARY KEY 并将`customer_id`in声明`orders`为引用 PRIMARY KEY in 的 FOREIGN KEY `customers`。一旦您做出该声明，数据库引擎将拒绝任何会违反该关系的 SQL 语句（您不能删除`customer`that has ，为不存在的`orders`创建一个，等等）。`order``customer`

使用约束*远*优于简单地在应用程序级别执行逻辑，因为它*保证*非法数据永远不会进入您的系统，无论使用什么应用程序或用户界面访问数据库。如果您在应用程序级别强制执行关系完整性，您必须希望未来的数据库接口能够一致且正确地强制执行逻辑，并且您将无法在允许直接访问数据库表的通用应用程序中强制执行逻辑。

# c - 寻找完美的 Makefile 画布

> ID：12821728
> 
> 赞同：5
> 
> 时间：2012-10-10T14:24:22.377
> 
> 标签：c, gcc, makefile

我是计算机工程专业的学生，​​我还有另一个 C 程序要实现。到目前为止，我总是从我以前的项目中创建一个新的 Makefile，每次都需要时间来设置。是否有一个我可以使用的 Makefile 画布功能如此强大，以至于我需要提供的只是包含 main 函数的 c 文件的名称？

我的想法是，对于每个新项目，我都会创建一个包含该项目的文件夹`Makefile`、一个 bin 文件夹和一个 src 文件夹。然后，我会将一些变量编辑到 Makefile（包含`main()`函数的 C 文件），然后`make`会自动构建所有内容，同时考虑到依赖关系。

你知道这样的`Makefile`存在吗？

[通过 Alexandre C. 编辑]：对于仅使用标准库并在标准 unix os 上运行的此类项目，Automake/Autoconf 太过分了。对于我们需要实现的项目，依赖关系（对于要链接的文件）总是可以从“.h”包含中推导出来的，而且通常涉及的文件很少。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:26:18.063

最接近神奇和完美`Makefile`的是使用可移植 C 程序和库的事实标准：[Automake](http://www.gnu.org/software/automake/)。

作为从[这个页面](http://www.gnu.org/software/automake/manual/html_node/Complete.html#Complete)提取的示例，这是您将添加到 Makefile.am 的示例：

```
bin_PROGRAMS = zardoz
zardoz_SOURCES = main.c head.c float.c vortex9.c gun.c
zardoz_LDADD = $(LIBOBJS) 
```

我们在这里添加的 make 目标的等价物称为`zardoz`. 源在下指定`zardoz_SOURCES`，需要链接的任何其他库都在下指定`zardoz_LDADD`。您不需要指定`main`函数所在的位置，因为链接器会在链接阶段自动找到它。如果它不存在，则链接将简单地失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:39:33.840

```
 PROGRAM = test-program
    CFLAGS = -c -Wall

    OBJECTS += $(patsubst %.c, %.o, $(wildcard ./src/*.c))
    OBJECTS += $(patsubst %.c, %.o, $(wildcard ./src/more-sources*.c))

    all: $(OBJECTS)
        gcc -o ./bin/$(PROGRAM) $(OBJECTS)

    %.o: %.c %.h
        gcc $(CFLAGS) $< -o $@ 

```

像这样的东西可以解决问题。我显然没有对此进行测试。您可以选择基于每个文件覆盖默认编译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T16:47:57.557

您可以轻松编写自己的宏“包”来执行此操作。例如，将此文件创建为样板，调用它`program.mk`并将其放在树中的中心位置：

```
lang.c.objs   = $(patsubst %.c,%.o,$(1))
lang.c.link   = $(CC) $(CFLAGS) $(LDFLAGS) -o $(1) $(2)
lang.c++.objs = $(patsubst %.cpp,%.o,$(1))
lang.c++.link = $(CXX) $(CXXFLAGS) $(LDFLAGS) -o $(1) $(2)

define make-program
  program.$(1).lang    ?= c
  program.$(1).objects ?= $$(call lang.$$(program.$(1).lang).objs,$$(program.$(1).sources))
  $$(program.$(1).name): $$(program.$(1).objects) $$(program.$(1).extra-deps)
      $$(call lang.$$(program.$(1).lang).link,$$@,$$^ $$(program.$(1).ldlibs))
  CLEANABLE    += $$(program.$(1).name)
  ALL_PROGRAMS += $$(program.$(1).name)
endef

# If the user didn't specify a list of programs, build them all
ifndef PROGRAMS
  PROGRAMS = $(foreach p,$(filter program.%.name,$(.VARIABLES)),\
    $(patsubst program.%.name,%,$(p)))
endif

# Generate the rule to build each program
$(foreach p,$(PROGRAMS),$(eval $(call make-program,$(p))))

.PHONY: all clean
all: $(ALL_PROGRAMS)

clean: ; rm -f $(CLEANABLE)

.DEFAULT_GOAL := all 
```

现在，在您要构建程序的每个目录中，您的 makefile 可以是：

```
program.p.name    = Program
program.p.sources = Program1.c Program2.c

include path/to/program.mk 
```

类似的`library.mk`可以用于库。这种方法非常强大并且很容易扩展。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T14:39:13.867

我也推荐autotools，你最终会学会欣赏它，它绝对值得，你可以找一个关于如何使用它的教程，或者，如果你不介意看一本小书，我建议阅读[autobook](http://sources.redhat.com/autobook/)，如果你只想要一个简单的 Makefile 模板，我用这个：

```
BIN     = <binary name>
OBJ     = <object files *.o>
LIB     = <libraries>
CFLAGS  = -O2 -Wall -I. 
LDFLAGS = <ld flags>

CC = gcc
LD = ld
RM = rm -f 

all:: $(BIN)

$(BIN): $(OBJ)
    $(CC) $(LDFLAGS) $(OBJ) $(LIB) -o $(BIN)

clean:
    $(RM) $(BIN) *.o

%.o: %.c %.h
    $(CC) $(CFLAGS) -c $< 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T15:07:40.187

`./configure`您可以像大多数开源项目一样，通过著名的命令使用 autoconf 自动生成 Makefile 。参考这个链接：[配置文件模板生成makefile](https://stackoverflow.com/questions/12086229/configure-file-template-to-generate-makefile)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T06:04:39.453

如果您对标准 UNIX 环境感兴趣，为什么不简单地坚持使用 POSIX`make`提供的功能呢？

```
# Lean and mean.
.POSIX:

CFLAGS = -DNDEBUG -O
LDFLAGS = -s

TARGETS = abc def

all: $(TARGETS)

clean:
    rm -f $(TARGETS)

# Some dependencies.
abc: def.h

# Some special rules.
def: def.c
    $(CC) $(CFLAGS) $(LDFLAGS) -o $@ def.c -l m 
```

对于大多数小型项目，您不需要比默认设置更复杂的东西；也许您应该专注于项目本身，而不是浪费时间编写复杂的 makefile 逻辑。

POSIX 的一个限制`make`是没有模式规则，并且后缀规则不能处理目录；因此，在不同目录中传播源文件将需要每个文件的单个规则，或者递归制作。就个人而言，对于小型项目，我不会费心将源文件移动到其他地方。坚持使用 POSIX`make`还将提供跨其他与 POSIX 兼容的构建系统（`make`例如 BSD）的可移植性。

关于自动依赖计算，请阅读`gcc -M`. 它生成包含依赖规则的makefile。然后你可以`include`在你的makefile中使用它们。但是，在我看来，更好的做法是在单个头文件中跟踪所有重要的依赖关系，并通过后缀规则使每个文件都依赖于该头文件。这并不麻烦，而且您仍然可以节省一些便携性。

总而言之，我的建议是避免过度担心并发症。他们很少有回报。特别是，我从来没有喜欢过`autotools`，我肯定永远不会喜欢。UNIX 的一切都是为了简单。不必要地使事情复杂化是违反 UNIX 精神的。:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-23T15:50:21.003

我想出了以下解决方案：

```
# Author Matthieu Sieben (http://matthieusieben.com)
# Version 23/10/2012
#
# This Makefile is licensed under the Creative Commons Attribution
# Partage dans les Mêmes Conditions 2.0 Belgique License.
# To view a copy of this license, visit http://creativecommons.org/licenses/by-sa/2.0/be/.
# Use at your own risk.
#
# Use Makefile.inc to write you own rules or to overwrite the default values defined here.

SRCDIR  = ./src
BINDIR  = ./bin

SHELL   = /bin/bash
CC      = /usr/bin/gcc
LIBS    =
CFLAGS  = -Wall -Wextra -Werror
LDFLAGS =

.PHONY: default all clean distclean
.SUFFIXES: .c .o

# make "all" the default target
default: all

-include Makefile.inc
-include Makefile.d

CFLAGS += -I$(SRCDIR)
ifeq ($(DEBUG), 1)
    CFLAGS += -DDEBUG=1 -ggdb
else
    CFLAGS += -DDEBUG=0 -O2
    LDFLAGS += -O2
endif

%.o: %.c
    @echo "  Compiling `basename $<`";
    @$(CC) $(CFLAGS) -o $@ -c $<;

clean:
    @echo "Cleaning compiled files";
    @find $(SRCDIR) -name "*.o" -exec rm {} \;
    @[ -e Makefile.d ] && rm Makefile.d;

distclean: clean
    @echo "Removing executables";
    @find $(BINDIR) -type f -exec rm {} \;

Makefile.d: $(shell find $(SRCDIR) -type f -name "*.c")
    @echo "Building dependencies";
    @for file in `find $(SRCDIR) -name "*.c" -print`; do\
        $(CC) $(CFLAGS) -MM -MT $${file/%.c/.o} $$file | tr -d "\n\\" >> Makefile.d.tmp;\
        echo -e "\n" >> Makefile.d.tmp;\
    done;\
    for file in `find $(SRCDIR) -name "*.c" -exec grep -Hs "main(" {} \; | cut -f1 -d':'`; do\
        execname=`basename $$file .c`;\
        objs="$${file/%.c/.o}";\
        for header in `$(CC) $(CFLAGS) -MM $$file | tr " " "\n" | grep ".h$$" | sort | uniq | tr "\n" " "`; do\
            if [ -f $${header/%.h/.c} ]; then\
                objs+=" $${header/%.h/.o}";\
            fi;\
            for obj in `grep "^$${header/%.h/.o}" Makefile.d.tmp | tr " " "\n" | grep ".h$$" | tr "\n" " "`; do\
                if [ -f $${obj/%.h/.c} ]; then\
                    objs+=" $${obj/%.h/.o}";\
                fi;\
            done;\
        done;\
        objs=`echo -n "$$objs"  | tr " " "\n" | sort | uniq | tr "\n" " "`;\
        echo "all: $$execname" >> Makefile.d.tmp;\
        echo "$$execname: $(BINDIR)/$$execname" >> Makefile.d.tmp;\
        echo "$(BINDIR)/$$execname: $$objs" >> Makefile.d.tmp;\
        echo "  @echo \"Linking $$execname\";" >> Makefile.d.tmp;\
        echo "  @\$$(CC) \$$(LDFLAGS) -o \$$@ $$objs \$$(LIBS);" >> Makefile.d.tmp;\
        echo >> Makefile.d.tmp;\
    done;\
    mv Makefile.d.tmp $@;\ 
```

它不是很健壮，因此请随时提供改进。下面是它的工作原理。这里的想法是，对于 .c 中的每个文件`$(SRCDIR)`，查找那些包含 main 函数 ( `grep "main(" src/*.c`) 的文件。然后，为每个本地包含`#include "myfile.h"`添加`myfile.o`到该可执行文件的对象列表中，然后在 Makefile.d 中写入上面的行

**编辑** 这个新版本的脚本支持 bin 文件链接的依赖项。

# sql - 我可以在 select 语句中使用 `If` 吗？

> ID：12821729
> 
> 赞同：0
> 
> 时间：2012-10-10T14:24:22.730
> 
> 标签：sql, sql-server, tsql

你甚至可以在这样的选择中放置一个 if 语句，或者你必须使用 Case 语句来完成我在这里尝试做的事情吗？我目前收到语法错误：

```
Select 
    field1,
    field2,
    If( @CurrentDate = @lastDate and @CurrentWeek = @lastWeek) 
              select @CurrentWeek,
    .... rest of select statement 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:29:39.677

您将需要使用`CASE`. 但是请注意，您可以将 CASE 用作 a`SWITCH`和 a `IF ... THEN ... ELSEIF ... ELSE`，因此您具有很大的灵活性。

例如：

```
DECLARE @flag INT
SET @flag = 1

-- Switch
SELECT CASE @flag WHEN 1 THEN 'Condition True' 
                  WHEN 0 THEN 'Condition FALSE' 
                  ELSE 'Condition Invalid' 
       END

-- If / elseif / else
SELECT CASE WHEN @flag = 1 
                 THEN 'Condition True' 
            WHEN @flag = 0 AND @@SERVERNAME = 'TotallyUnrelatedToFlag' 
                 THEN 'Condition FALSE' 
            ELSE 'Condition Invalid' 
       END 
```

在您的示例中，您似乎需要一些类似的东西

```
Select 
    field1,
    field2,
    CASE WHEN (@CurrentDate = @lastDate and @CurrentWeek = @lastWeek) 
         THEN @CurrentWeek
         ELSE NULL
    END As field3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:26:00.913

听起来你想要一个`CASE`声明

```
Select 
    field1,
    field2,
    case when @CurrentDate = @lastDate and @CurrentWeek = @lastWeek
         then @CurrentWeek else '' end
    .... rest of select statement 
```

如果你想使用一个`IF`语句，那么你会想要使用这样的东西：

```
If (@CurrentDate = @lastDate and @CurrentWeek = @lastWeek)
  begin
    -- place the one select statement here
    select ...from
  end
else
  begin
     -- place the alternate select here
     select... from
  end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T14:27:46.307

You must use a case statement instead. The [IF...ELSE](http://msdn.microsoft.com/en-US/library/ms182717%28v=sql.90%29.aspx) construct in TSQL can be used to conditionally execute a SQL statement. It cannot be used *within* a SQL statement. Please read the [documentation](http://msdn.microsoft.com/en-US/library/ms182717%28v=sql.90%29.aspx) which makes this clear.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T14:26:31.917

尝试这个：

```
Select 
    field1,
    field2,
    CASE WHEN @CurrentDate = @lastDate and @CurrentWeek = @lastWeek THEN @CurrentWeek ELSE '' END as Week, 
```

# java - 在eclipse平台之上开发可视化编辑器工具

> ID：12821731
> 
> 赞同：0
> 
> 时间：2012-10-10T14:24:24.010
> 
> 标签：java, architecture, eclipse-plugin

我们应用程序的所有 UI 场景都在 json 文件中声明，然后在运行时由特殊引擎渲染。太多时间花在手动编写 json 上。可以很方便的实现一些可视化的工具，以拖放的方式创建 UI 场景（例如使用 eclipse windowbuilder 插件创建 swing 应用程序，或者使用 birt-designer eclipse 插件创建 birt xml 报告）。是否有任何最佳实践、方法、框架、文档等以正确的方式启动项目？提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:55:37.513

我会查看[Eclispe SWT 设计器](http://sourceforge.net/projects/eclipsedesigner/)的来源。

# facebook - 如何为具有不同 GET 参数的 url 执行不同的 *Shares*

> ID：12821744
> 
> 赞同：0
> 
> 时间：2012-10-10T14:25:02.157
> 
> 标签：facebook, facebook-graph-api, facebook-like, facebook-javascript-sdk, facebook-sharer

我通过facebook做了一个投票系统，结果计算为他们点击“是”和“否”的分享数量。

单击“是”后，用户将链接发送到墙上（“og：url”中的相同url）

```
http://www.obeschania.ru/documents/promises/istrebitel-seria-export-t-50?vote=yes 
```

单击“否”后，用户将链接发送到墙上（“og：url”中的相同url）

```
http://www.obeschania.ru/documents/promises/istrebitel-seria-export-t-50?vote=no 
```

之后，我通过 get-request 得到结果：

```
http://graph.facebook.com/?ids=http://www.obeschania.ru/documents/promises/istrebitel-seria-export-t-50?vote=yes 
```

和

```
http://graph.facebook.com/?ids=http://www.obeschania.ru/documents/promises/istrebitel-seria-export-t-50?vote=no 
```

结果中没有参数“shares”。但在页面的结果中：

```
http://graph.facebook.com/?ids=http://www.obeschania.ru/documents/promises/istrebitel-seria-export-t-50 
```

参数“shares”存在（他等于 ?vote=yes 和 ?vote=no 的总和“shares”）。

ps：对不起我的英语。

# css - Clear HTML5 placeholder attribute text on focus in Chrome

> ID：12821746
> 
> 赞同：16
> 
> 时间：2012-10-10T14:25:04.630
> 
> 标签：css, html, google-chrome

Is there any way I can clear `placeholder` text on focus in **Chrome**, Firefox clears the text on focus but Chrome doesn't.

This confuses the user whether the text in the bar is typed, or it's a placeholder text (Even if I changed the text color to light grey), I don't want to use unnecessary JavaScript or jQuery for this, I want to know if there's some HTML/CSS solution for this

[Demo Fiddle](http://jsfiddle.net/5U9us/)

**Chrome Preview** (On Focus)

![Chrome Preview On Focus](../Images/2e753094bb8caabe63785d86ee287107.png)

**Firefox Preview** (On Focus)

![Firefox Preview On Focus](../Images/74afa915ff11c1cba5fcc9a344e51ca7.png)

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-10T14:28:49.707

Try using

```
input:focus::-webkit-input-placeholder 
{
    color: transparent;
} 
```

It will resolve the issue. The text is visible on focus because of the auto focus on page load.

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-08-16T07:57:37.073

Now firefox works in other way, so I used this code:

```
input:focus::-webkit-input-placeholder{
    color: transparent!important;
}
input:focus::-moz-placeholder{
    color: transparent!important;
}
input:focus:-moz-placeholder{
    color: transparent!important;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T14:27:52.633

This is how chrome handles it, and chrome users will probably expect it to be handled like this. You could, however, use jQuery to remove the "placeholder" attribute when it is focused on.

I found an apparent fix for you, from a google group @ [https://github.com/mathiasbynens/jquery-placeholder/issues/51#issuecomment-4193018](https://github.com/mathiasbynens/jquery-placeholder/issues/51#issuecomment-4193018)

```
// Fixing Webkit that not clearing input/textarea when get focus
$(function(){
  if ($.browser.webkit) {
    $('input, textarea').on('focus',function(){
      if ( $(this).attr('placeholder') ) $(this).data('placeholder', $(this).attr('placeholder')).removeAttr('placeholder');
}).on('blur', function(){
        if ( $(this).data('placeholder') ) $(this).attr('placeholder', $(this).data('placeholder')).removeData('placeholder');
    });
  }
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-11-02T19:08:40.047

I found that the Shubhanshu's solution didn't work for me, but I did find this on [CSS tricks](https://css-tricks.com/hang-on-placeholders/) that did work in Chrome, doesn' seem to work in FF though.

```
[placeholder]:focus::-webkit-input-placeholder {
  color: transparent;
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2020-04-06T09:39:05.743

```
input:hover::placeholder 
{
  color: transparent;
}
```

```
 <input type="text" id="fname" name="firstname" placeholder="Your name..">
```

# android - 在 Android 中发送电子邮件时出错

> ID：12821758
> 
> 赞同：2
> 
> 时间：2012-10-10T14:25:38.710
> 
> 标签：android

BackupContactsActivity.java

```
package com.testing.backup;

import java.util.Properties;

import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

import android.app.Activity;
import android.content.ContentResolver;
import android.database.Cursor;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.provider.ContactsContract.CommonDataKinds.Phone;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class BackupContactsActivity extends Activity implements OnClickListener{
    /** Called when the activity is first created. */
    TextView result;
    String msg = "**********Backup Phone Contacts**********\n\n";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);      

        Button backup = (Button)findViewById(R.id.btn);
        backup.setOnClickListener(this);
    }

    public void onClick(View view){

        ContentResolver cr = getContentResolver();
        Cursor cursor = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null, null, null);

        while(cursor.moveToNext()){
        String name = cursor.getString(cursor.getColumnIndexOrThrow(Phone.DISPLAY_NAME));
        String number = cursor.getString(cursor.getColumnIndexOrThrow(Phone.NUMBER));

        msg += name + "\t\t\t" + number + "\n";         
        }
        result = (TextView)findViewById(R.id.txt);
        result.setText(msg.toString());

        // Recipient's email ID needs to be mentioned.
        String to = "testing@hotmail.com";
        // Sender's email ID needs to be mentioned
        String from = "testing@gmail.com";
        // Email Password
        String password = "testing";
        // Assuming you are sending email from localhost
        String host = "smtp.gmail.com";

        // Get system properties
        Properties properties = System.getProperties();
        // Setup mail server
        //properties.setProperty("mail.smtp.host", host);
        properties.put("mail.smtp.host", host);
        properties.put("mail.smtps.auth", "true");
    properties.put("mail.smtp.starttls.enable", "true");

        // Get the default Session object.
        Session session = Session.getDefaultInstance(properties, null);

        try{
        // Create a default MimeMessage object.
            MimeMessage message = new MimeMessage(session);
            // Set From: header field of the header.
            message.setFrom(new InternetAddress(from));
            // Set To: header field of the header.
            message.addRecipient(Message.RecipientType.TO, new InternetAddress(to));
            // Set Subject: header field
            message.setSubject("This is the Backup Contacts Email!");
            // Now set the actual message
            message.setText(msg.toString());

            // Send message
            //Transport.send(message);
            Transport transport = session.getTransport("smtps");
    transport.connect(host, from, password);
    transport.sendMessage(message, message.getAllRecipients());
            System.out.println("Sent message successfully....");
            transport.close();
        }catch (MessagingException mex) {
            mex.printStackTrace();
        }
    }
} 
```

我的日志猫

```
10-10 12:42:33.773: E/AndroidRuntime(692): FATAL EXCEPTION: main
10-10 12:42:33.773: E/AndroidRuntime(692): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.testing.backup/com.testing.backup.BackupContactsActivity}: java.lang.SecurityException: Permission Denial: reading com.android.providers.contacts.ContactsProvider2 uri content://com.android.contacts/data/phones from pid=692, uid=10057 requires android.permission.READ_CONTACTS
10-10 12:42:33.773: E/AndroidRuntime(692):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
10-10 12:42:33.773: E/AndroidRuntime(692):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
10-10 12:42:33.773: E/AndroidRuntime(692):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
10-10 12:42:33.773: E/AndroidRuntime(692):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
10-10 12:42:33.773: E/AndroidRuntime(692):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-10 12:42:33.773: E/AndroidRuntime(692):  at android.os.Looper.loop(Looper.java:137)
10-10 12:42:33.773: E/AndroidRuntime(692):  at android.app.ActivityThread.main(ActivityThread.java:4424)
10-10 12:42:33.773: E/AndroidRuntime(692):  at java.lang.reflect.Method.invokeNative(Native Method)
10-10 12:42:33.773: E/AndroidRuntime(692):  at java.lang.reflect.Method.invoke(Method.java:511)
10-10 12:42:33.773: E/AndroidRuntime(692):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-10 12:42:33.773: E/AndroidRuntime(692):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-10 12:42:33.773: E/AndroidRuntime(692):  at dalvik.system.NativeStart.main(Native Method)
10-10 12:42:33.773: E/AndroidRuntime(692): Caused by: java.lang.SecurityException: Permission Denial: reading com.android.providers.contacts.ContactsProvider2 uri content://com.android.contacts/data/phones from pid=692, uid=10057 requires android.permission.READ_CONTACTS
10-10 12:42:33.773: E/AndroidRuntime(692):  at android.os.Parcel.readException(Parcel.java:1327)
10-10 12:42:33.773: E/AndroidRuntime(692):  at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:182)
10-10 12:42:33.773: E/AndroidRuntime(692):  at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:136)
10-10 12:42:33.773: E/AndroidRuntime(692):  at android.content.ContentProviderProxy.query(ContentProviderNative.java:358)
10-10 12:42:33.773: E/AndroidRuntime(692):  at android.content.ContentResolver.query(ContentResolver.java:311)
10-10 12:42:33.773: E/AndroidRuntime(692):  at com.testing.backup.BackupContactsActivity.onCreate(BackupContactsActivity.java:32)
10-10 12:42:33.773: E/AndroidRuntime(692):  at android.app.Activity.performCreate(Activity.java:4465)
10-10 12:42:33.773: E/AndroidRuntime(692):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
10-10 12:42:33.773: E/AndroidRuntime(692):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
10-10 12:42:33.773: E/AndroidRuntime(692):  ... 11 more 
```

显现

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.testing.backup"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.INTERNET" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".BackupContactsActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我想提取手机中的所有电话联系人（姓名+号码）并将它们放入字符串消息中，所以当我点击应用程序中的“备份”按钮时，这些联系人信息将直接发送到我的电子邮件地址. 我刚刚使用 Eclipse 模拟器进行了尝试，并且已经在我的 Manifest 中添加了**READ_CONTACTS**和**INTERNET**权限。但它出现了我的 logcat 中所述的问题。有人可以帮我解决问题吗？谢谢... **（我确实使用了发件人和收件人的真实电子邮件地址）**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:29:57.110

我认为这是由于清单文件中的使用权限。检查清单文件以获取使用权限。

# android - android.widget.ArrayAdapter.createViewFromResource 的 NullPointerException

> ID：12821759
> 
> 赞同：8
> 
> 时间：2012-10-10T14:25:40.067
> 
> 标签：android, android-camera, android-preferences, preferenceactivity

我正在创建一个具有首选项活动的应用程序，其中 listpreference 条目有问题地分配。此应用程序在我的模拟器上运行良好，但是当我在移动设备中测试我的应用程序时，它显示如下错误

```
FATAL EXCEPTION: main
java.lang.NullPointerException
at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:394)
at android.widget.ArrayAdapter.getView(ArrayAdapter.java:362)
at android.widget.AbsListView.obtainView(AbsListView.java:2033) 
```

当我在手机中单击该列表首选项时会出现此问题。这是我的代码

偏好.xml

```
<PreferenceScreen
        xmlns:android="http://schemas.android.com/apk/res/android">
    <PreferenceCategory
            android:title="@string/settings">            
        <ListPreference
                android:key="@string/resolution"
                android:title="@string/imageres"
                android:summary="@string/summaryres"
                android:dialogTitle="@string/resFormat" 
                />
    </PreferenceCategory>
</PreferenceScreen> 
```

设置.java

```
package com.example;

import android.database.Cursor;
import android.os.Bundle;
import android.preference.ListPreference;
import android.preference.PreferenceActivity;

public class Settings extends PreferenceActivity {
    private SQLiteoperations SQLiteAdapter;
    DTO get;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        get = (DTO) getIntent().getExtras().get("obj");
        SQLiteAdapter = new SQLiteoperations(this);
        SQLiteAdapter.openToWrite();
        addPreferencesFromResource(R.xml.preferences);
        ListPreference pref = (ListPreference) findPreference("resolution");
        pref.setEntries(getEntries());
        pref.setEntryValues(getEntries());
        System.out.println("after set entries");
        System.out.println(get.getDefaultvalues());
        pref.setDefaultValue(get.getDefaultvalues());

    }
    private CharSequence[] getEntries() {
        Cursor cursor = SQLiteAdapter.queueAll();
        int num = cursor.getCount();
        String[] size = new String[num];
        System.out.println(cursor.getCount());
        if (cursor.moveToFirst()){
            int i=0;
               do{
                   size[i]=new String(cursor.getString(1)+"X"+cursor.getString(2));
                   System.out.println(cursor.getString(1)+"X"+cursor.getString(2));
               }while(cursor.moveToNext());
            }
            cursor.close();

        return size;
    }

} 
```

camerademo.java

```
package com.example;

import java.io.ByteArrayInputStream;
import java.io.InputStream;
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.Statement;
import java.util.Iterator;
import java.util.List;

import oracle.jdbc.OracleResultSet;
import oracle.sql.BLOB;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.SharedPreferences;
import android.hardware.Camera;
import android.hardware.Camera.Parameters;
import android.hardware.Camera.PictureCallback;
import android.hardware.Camera.ShutterCallback;
import android.hardware.Camera.Size;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.FrameLayout;
import android.widget.LinearLayout;
import android.widget.TableRow.LayoutParams;
import android.widget.TextView;

public class CameraDemo extends Activity {
    private final int DIALOG_LICENSE=5;
    private final int MENU_SETTINGS=2;
    private SharedPreferences settings;
    private static final String TAG = "CameraDemo";
    Camera camera;
    Preview preview;
    Button buttonClick,buttonSave,buttonBack;
    byte[] image;
    private static SQLiteoperations placeData;
    final DTO set = new DTO();
    String defsize;
    // Called when the activity is first created. 
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        placeData = new SQLiteoperations(this);
        placeData.openToWrite();

        preview = new Preview(this);
        ((FrameLayout) findViewById(R.id.preview)).addView(preview);
        buttonSave = (Button) findViewById(R.id.Save);
        buttonBack = (Button) findViewById(R.id.back);
        buttonBack.setVisibility(View.INVISIBLE);
        buttonSave.setVisibility(View.INVISIBLE);
        buttonClick = (Button) findViewById(R.id.buttonClick);
        settings = PreferenceManager.getDefaultSharedPreferences(this);
        SharedPreferences licensPref = getSharedPreferences("PREFS", 0);
        boolean licenseShown = licensPref.getBoolean("LicenseShown", false);
        if(!licenseShown)
            showDialog(DIALOG_LICENSE);

        buttonClick.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                preview.camera.takePicture(shutterCallback, rawCallback,
                        jpegCallback);
                buttonClick.setVisibility(View.INVISIBLE);
                buttonSave.setVisibility(View.VISIBLE);
                buttonBack.setVisibility(View.VISIBLE);
            }
        });
        buttonBack.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                back();
            }
        });
        buttonSave.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                save();
                }
        });

        Log.d(TAG, "onCreate'd");
    }

    ShutterCallback shutterCallback = new ShutterCallback() {
        public void onShutter() {
            Log.d(TAG, "onShutter'd");
        }
    };

    // Handles data for raw picture 
    PictureCallback rawCallback = new PictureCallback() {
        public void onPictureTaken(byte[] data, Camera camera) {
            Log.d(TAG, "onPictureTaken - raw");
        }
    };

    // Handles data for jpeg picture 
    PictureCallback jpegCallback = new PictureCallback() {
        public void onPictureTaken(byte[] data, Camera camera) {
            image = data;
        }
    };

    @Override
    protected void onPrepareDialog(int id, Dialog dialog) {     
        super.onPrepareDialog(id, dialog);
        }
    @Override
    protected Dialog onCreateDialog(int id) {
        switch(id){
        case DIALOG_LICENSE:
            return new AlertDialog.Builder(this)
            .setTitle(R.string.welcome)
            .setMessage(R.string.welcome_text)
            .setPositiveButton(R.string.accept, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                    settings = getSharedPreferences("PREFS", 0);
                    Parameters parameters = preview.camera.getParameters();
                    Size defaultsize = parameters.getPictureSize();
                    defsize = (new String(defaultsize.width+"X"+defaultsize.height));
                    List<Camera.Size> size = parameters.getSupportedPictureSizes();
                    int num = size.size();
                    String[] sizeArray = new String[num];
                    int i=0;
                    Iterator<Size> si = size.iterator();
                    while (si.hasNext()) {
                        Camera.Size sizeObj = (Size) si.next();
                        sizeArray[i]=new String(sizeObj.width+ "X" +sizeObj.height);
                        Log.e("size in licence dialog", sizeObj.height+"x"+sizeObj.width);
                        i++;
                        placeData.insert(String.valueOf(sizeObj.width),String.valueOf(sizeObj.height));
                    }
                    SharedPreferences.Editor editor = settings.edit();
                    editor.putBoolean("LicenseShown", true);
                    editor.commit();
                }
            })
            .setNegativeButton(R.string.cancel, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                    finish();
                }              
            })
            .setCancelable(false)
            .create();
        }
        return null;
    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuItem mi;
        mi = menu.add(0, MENU_SETTINGS, 0, R.string.settings);
        mi.setIcon(android.R.drawable.ic_menu_preferences);
        return super.onCreateOptionsMenu(menu);
    }
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case MENU_SETTINGS:
            set.setDefaultvalues(defsize);
            Intent intent = new Intent(getApplicationContext(), Settings.class);
            intent.putExtra("obj", set);
            startActivity(intent);
            return true;
        }
        return super.onOptionsItemSelected(item);
    }
public void back(){
    preview.camera.startPreview();
    buttonBack.setVisibility(View.INVISIBLE);
    buttonSave.setVisibility(View.INVISIBLE);
    buttonClick.setVisibility(View.VISIBLE);
}
@Override
public void onDestroy(){
    super.onDestroy();
    if(preview.camera != null){
        preview.camera.stopPreview();
        preview.camera = null;
    }
}
public void save(){
           back();
            }
} 
```

有人请告诉我哪里错了吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T06:17:08.293

> 有人请告诉我哪里错了吗？

您在代码中做错的事情是您在方法中初始化`CharSequence`数组的`getEntries`方式。你的代码：

```
if (cursor.moveToFirst()){
    int i=0;
    do{
       size[i]=new String(cursor.getString(1)+"X"+cursor.getString(2));
       System.out.println(cursor.getString(1)+"X"+cursor.getString(2));
    }while(cursor.moveToNext());
} 
```

`size`你用 的大小初始化数组，`Cursor`然后进入上面的 while 循环。问题是你的 while 循环只设置了值，`i = 0`因为你没有增加`i`' 在那个循环中的值。出于这个原因，您的`size`数组将只有位置`0`和`null`所有其他位置的值。这将使`ArrayAdapter`投掷`NullPointerException`。

正确的循环是：

```
if (cursor.moveToFirst()){
    int i=0;
    do{
       size[i]=new String(cursor.getString(1)+"X"+cursor.getString(2));
       System.out.println(cursor.getString(1)+"X"+cursor.getString(2));
       i++;
    }while(cursor.moveToNext());
} 
```

完整的`getEntries`方法是：

```
private CharSequence[] getEntries() {
    Cursor cursor = SQLiteAdapter.queueAll();
    int num = cursor.getCount();        
    String[] size = new String[num];
    System.out.println(cursor.getCount());
    if (cursor.moveToFirst()) {         
        int i = 0;
        do {
            size[i] = new String(cursor.getString(1) + "X"
                    + cursor.getString(2));             
            i++;
        } while (cursor.moveToNext());
    }
    cursor.close();
    return size;
} 
```

# javascript - 可观察和数据绑定之间的 KnockoutJS 关系

> ID：12821760
> 
> 赞同：0
> 
> 时间：2012-10-10T14:25:41.563
> 
> 标签：javascript, knockout.js, knockout-validation

我有视图模型

```
var viewModel = {
    amount: ko.observable(1),
    rate: ko.observable(2),
    rate222: ko.observable(2)
};

<input data-bind="value: amount" />
<input data-bind="value: rate" /> 
```

我怎么知道 rate222 没有绑定在这个文件上？

*   对于需要它进行多页验证，用于在现有文档上声明！

最好的祝福

* * *

升级版：

这并没有解决这个问题在这里jsfiddle.net/x26sS/14绑定值“rate222”不在DOM中，但淘汰赛认为不是这样：“show,rate12312”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:45:15.727

在 Knockout 中没有一个很好的方法来明确知道一个元素是开箱即用的。

编写自定义绑定非常容易，该绑定将`bound`标志添加到可观察对象或计算对象，然后您可以在查找“未绑定”属性时使用它。

绑定可能看起来像：

```
ko.bindingHandlers.track = {
    init: function(element, valueAccessor) {
       var observable = valueAccessor();
       if (ko.isObservable(observable)) {
           observable.bound = true;  
       }

       //clear the flag if this element is removed
       ko.utils.domNodeDisposal.addDisposeCallback(element, function() {
            var observable = valueAccessor();
            if (ko.isObservable(observable)) {
                observable.bound = false;     
            }     
       });           
    }
}; 
```

您甚至可以包装值绑定以将此功能添加到其中。

这是一个示例，它在元素上使用此绑定，然后提供一个函数来遍历视图模型（仅示例中的顶级）并查找任何未绑定的属性。

[http://jsfiddle.net/rniemeyer/x26sS/](http://jsfiddle.net/rniemeyer/x26sS/)

# git - git 从 dev 转移到 master (prod)

> ID：12821762
> 
> 赞同：0
> 
> 时间：2012-10-10T14:25:49.333
> 
> 标签：git, github

我们已经准备好将我们的 dev 分支推送到我们的 prod（master）分支，但我想看看是否有这样做的最佳实践。git push dev master 似乎太容易了。

现在我们的 prod (master) 被标记为 1.0，而 dev 将是 master 1.5。

我们应该简单地推送 dev master 和 tag 吗？有些人提到了变基，但不确定......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T19:40:07.580

我认为你在这里混淆了你的命名法。git push 将更改从一个存储库移动到另一个存储库。我认为您的意思是将您的 dev 分支合并到您的 prod 分支中。因此，您建议的`git push dev master`命令令人困惑。我相信 Git 会将此解释为 push branch `master`to repository `dev`。

对于您要使用标记寻找什么结果，我也有些困惑。我认为您所说的是，一旦您将 dev 合并到 prod 并发布，prod 将被标记为“1.5”。在这种情况下，您正在寻找：

```
git checkout master
git merge dev
git tag -a 1.5 -m "<your message here>"
git push <your remote repo here> --all
git push <your remote repo here> --tags 
```

变基只是让你的历史看起来更漂亮的一种策略，但听起来你有更大的事情要担心。

# c# - app/web 配置自定义部分，带有属性的集合元素

> ID：12821766
> 
> 赞同：1
> 
> 时间：2012-10-10T14:25:56.993
> 
> 标签：c#, .net, web-config, configsection

我认为这很简单，因为我有一个 xml 部分，例如：

```
<InterfaceDetails>
    <Interface name="TestInterface1">
        <Details data="xxxxxx" />
        <Details data="yyyyyy" />
    </Interface>
    <Interface name="TestInterface2">
        <Details data="zzzzzz" />
    </Interface>
</InterfaceDetails> 
```

部分处理程序连接得很好，但是在读取 xml 时它会抛出一个错误，说它找不到“名称”属性，现在没有在这里放代码的负载，我目前有以下类：

*   接口详情部分

主要部分容器有一个名为 Interface 的属性，该属性链接到 InterfaceElementCollection。

*   接口元素集合

这是元素集合派生类，它应该暴露名称属性和下面的详细信息元素。我尝试给这个类一个名为 name 的属性，这似乎有效，但后来我得到了另一个关于子元素的错误。

*   细节元素

这包含 Details 元素的数据属性。

我希望能够理想地拉出每个界面，然后为每个界面拉出细节，但是对于我的生活，即使查看该领域的大量教程，似乎也没有一个涵盖在多个孩子中拥有多个孩子孩子，或者如果他们没有集合上的属性。

任何人都可以看到任何明显的错误或给我任何关于我哪里出错的指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:43:50.587

[包含集合的自定义配置部分](https://stackoverflow.com/questions/6379110/custom-config-section-containing-collection)

上面的问题终于是我一直在寻找的答案，所以如果其他人有和我一样的问题，试图在 ConfigurationSections 的神秘世界中导航，他们可以指出正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T09:13:53.240

你可以试试这个

```
 <configuration>

    <!-- Configuration section-handler declaration area. -->
      <configSections>
        <sectionGroup name="myCustomGroup">
          <section 
            name="myCustomSection" 
            type="MyConfigSectionHandler.MyHandler, MyCustomConfigurationHandler, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" 
            allowLocation="true" 
            allowDefinition="Everywhere"
          />
        </sectionGroup>
          <!-- Other <section> and <sectionGroup> elements. -->
      </configSections>

      <!-- Configuration section settings area. -->

 <myCustomGroup>
    <myCustomSection myAttrib1="Clowns">

    </myCustomSection>
  </myCustomGroup>

    </configuration> 
```

# javascript - javascript onclick 计数器在刷新时初始化为 0

> ID：12821770
> 
> 赞同：0
> 
> 时间：2012-10-10T14:26:05.077
> 
> 标签：javascript

我的 JSP 中有一个按钮，

```
<input type="button" id="processItem" name="_eventId_submitButton" value="Submit" onclick="submitClick();buttonClick();"></input> 
```

我的 JavaScript，

```
var clicks = 0;
 function submitClick(){
            var aButton = document.getElementById('submithidden');
            aButton.click();    
            return true;
        }        
     function buttonClick(){
         document.getElementById('clicked').value = ++clicks;
         } 
```

这是我显示的计数`submit`

```
 <tr><td><p>Total No of Scans<input type="text" id="clicked" size="3" 
onfocus="this.blur();" value="0" >.</p></td></tr> 
```

每次我单击提交时，计数器显示 1 并立即页面刷新并再次变为 0。我想让它保持递增，直到用户离开页面！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:29:52.827

试试这个

```
var clicks = 0;
 function submitClick(){
            var aButton = document.getElementById('submithidden');
            aButton.click();    
            return false;
        }        
     function buttonClick(){
         document.getElementById('clicked').value = ++clicks;
         } 
```

假而不是真；）按钮“发布”网站，如果你设置为假，我不会开火

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:30:16.010

您可以使用`sessionStorage` 而不是存储在 js 变量中。它将在浏览器打开之前可用。

```
sessionStorage.clicks = value; 
```

# java - 如何使用 com4j 将 Java 桥接到 CATIA COM API

> ID：12821774
> 
> 赞同：0
> 
> 时间：2012-10-10T14:26:08.920
> 
> 标签：java, com, com4j, catia

这是 C++ 代码：

```
#import "path\to\catia\intel_a\code\bin\InfTypeLib.tlb" no_namespace

// ...

ApplicationPtr catia;

catia.CreateInstance("CATIA.Application");

catia->PutVisible(VARIANT_TRUE); 
```

我想用 com4j 在 Java 中调用相同的 CATIA API。根据 com4j 教程页面，Java 定义是通过以下命令生成的：

```
java -jar ..\..\tlbimp.jar -o catia -p catia InfTypeLib.tlb 
```

但是结果 ClassFactory 没有创建 COM 对象的静态方法。

```
import com4j.*;

/**
 * Defines methods to create COM objects
 */
public abstract class ClassFactory {
  private ClassFactory() {} // instanciation is not allowed
} 
```

然后我尝试了另一个类型库“CATIAAppTypeLib.tlb”。

```
import com4j.*;

/**
 * Defines methods to create COM objects
 */
public abstract class ClassFactory {
  private ClassFactory() {} // instanciation is not allowed

  public static org.huys.catia.AppType._CATIAApp createCATIAAppObj() {
    return COM4J.createInstance( org.huys.catia.AppType._CATIAApp.class, "{5A29422A-F2B0-11D4-A3AA-00D0B756AD5D}" );
  }

  public static org.huys.catia.AppType.CATIAVBAHostingApplication createCATIAVBAHostingApplicationImpl() {
    return COM4J.createInstance( org.huys.catia.AppType.CATIAVBAHostingApplication.class, "{0663D095-471D-11D2-9AA3-00A024941EF0}" );
  }
} 
```

在Java中调用这些方法时，我得到了

```
com4j.ExecutionException: com4j.ComException: 80040154 CoCreateInstance failed : Class not registered : .\com4j.cpp:153 
```

我找不到为应用程序接口创建实例的方法。

任何人都可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T13:23:16.107

为 InfTypeLib.tlb 生成的 ClassFactory 不包含用于创建 Application 实例的静态方法。

这可以通过手动添加方法来解决。

```
public static catia.Application createApplication() {
    return COM4J.createInstance( org.huys.catia.Application.class, "{87fd6f40-e252-11d5-8040-0010b5fa1031}" );
} 
```

“CATIA.Application”的 GUID 可以在注册表中找到。或者只是用字符串替换它。

# php - 二月的重复月份

> ID：12821777
> 
> 赞同：0
> 
> 时间：2012-10-10T14:26:13.313
> 
> 标签：php, recurring

我正在尝试根据日历日期范围计算每月定期发生的事件。`February (28 days)`但是，当事件发生在本月 29 日时，我偶然发现了一个计算问题。希望一些专家可以给我一些指示，因为我试图在没有帮助的情况下四处寻找。

我已经包含了以下代码，以便于直接作为脚本运行。该`January`范围工作正常，这给了我 2 个落在该范围内的日期：

```
// JANUARY 2013 Range (Working)
2012-12-29
2013-01-29 
```

但如果您取消注释二月范围，它开始输出：

```
2013-01-29 // This is correct
2013-02-28 // This is the date which I want to ignore because its not on the 29th. 
```

如果你取消注释`April`范围，它开始什么都不输出。它应该输出一个日期，即`2013-04-29`. 因此，我认为问题在于 2 月的计算。

```
<?php

// Start Calendar Range

// JANUARY 2013 Range (Working)
$rangeStart = new DateTime( '2012-12-30' );
$rangeEnd   = new DateTime( '2013-02-03' );

// FEBRUARY 2013 Range (Not Working)
//$rangeStart = new DateTime( '2013-01-27' );
//$rangeEnd   = new DateTime( '2013-03-03' );

// APRIL 2013 Range (Not Working)
//$rangeStart = new DateTime( '2013-03-31' );
//$rangeEnd   = new DateTime( '2013-04-05' );

// MAY 2013 Range (Working)
//$rangeStart = new DateTime( '2013-04-28' );
//$rangeEnd   = new DateTime( '2013-06-02' );

// Event date start
$eventStart = new DateTime( '2012-10-29' );
$recurTimes = 1;

// Loop thru the days of month
while( $rangeStart->format('U') <= $rangeEnd->format('U') ) {
    $currView = mktime( 0, 0, 0, $rangeStart->format('m'), $eventStart->format('d'), $rangeStart->format('Y') );
    $interval = round(($currView-$eventStart->format('U')) / 60 / 60 / 24 / 30);

    $monthsAway = $eventStart->format('m')+$interval;
    $recurMonth = $eventStart->format('m')%$recurTimes;

    if( $monthsAway%$recurTimes == $recurMonth ) {
        $nextRecur = getNextRecur( $eventStart->format('U'), $interval );
        echo date( 'Y-m-d', $nextRecur ) . '<br />';
    }
    $rangeStart->modify('+1 month');
}

// function to add 1 month with leap year in consideration
function getNextRecur( $baseTime=null, $months=1 ) {
    if( is_null( $baseTime ) ) $baseTime = time( );
    $xMonths = strtotime( '+' . $months . ' months', $baseTime );
    $before = (int)date( 'm', $baseTime )+12*(int)date( 'Y', $baseTime );
    $after  = (int)date( 'm', $xMonths )+12*(int)date( 'Y', $xMonths );
    if( $after > $months+$before ) {
        $xMonths = strtotime( date('Ym01His', $xMonths) . ' -1 day' );
    }
    return $xMonths;
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:15:28.470

也许你的接近是有原因的，但在我看来它有点绕房子。我们都知道，所有月份的天数都是恒定的，而二月是奇数。所以我认为你从那个角度来看它。

我还没有看过我会如何“确切”地做到这一点，但我会将其简化为仅在 2 月工作。也许你可以先检查一下它是否是闰年。然后让您的代码执行您需要插入的二月日期的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:27:23.840

你可以试试

示例 1

```
$rangeStart = new DateTime('2012-12-30');
$rangeEnd = new DateTime('2013-02-03');
$eventStart = new DateTime('2012-10-29');
var_dump(getRange($rangeStart, $rangeEnd, $eventStart)); 
```

输出

```
array
  0 => string '2013-01-29' (length=10) 
```

示例 2

```
$rangeStart = new DateTime('2012-01-27');
$rangeEnd = new DateTime('2013-03-03');
$eventStart = new DateTime('2012-10-29');
var_dump(getRange($rangeStart, $rangeEnd, $eventStart)); 
```

输出

```
array
  0 => string '2012-10-29' (length=10)
  1 => string '2012-11-29' (length=10)
  2 => string '2012-12-29' (length=10)
  3 => string '2013-01-29' (length=10) 
```

使用的功能

```
function getRange($rangeStart, $rangeEnd, $eventStart, $fixedDay = 29) {
    $lastStart = clone $rangeStart;
    $rangeStart->setDate($eventStart->format('Y'), $eventStart->format('m'), $eventStart->format('d'));
    $list = array();
    while ( $rangeStart <= $rangeEnd ) {
        if ($rangeStart > $rangeEnd)
            break;
        if ($rangeStart->format('m') == 2 || $rangeStart < $lastStart) {
            $rangeStart->modify('+1 month');
            $rangeStart->setDate($rangeStart->format('Y'), $rangeStart->format('m'), $fixedDay);
            continue;
        }
        $list[] = $rangeStart->format("Y-m-d");
        $rangeStart->modify('+1 month');
        $rangeStart->setDate($rangeStart->format('Y'), $rangeStart->format('m'), $fixedDay);
    }
    return $list;
} 
```

# objective-c - 为什么在 Interface Builder 中更改字体大小会阻止 UILabel 调整大小以适应内容？

> ID：12821779
> 
> 赞同：0
> 
> 时间：2012-10-10T14:26:14.647
> 
> 标签：objective-c, ios, uiscrollview, uilabel, ios6

我有一个使用 Xcode 4.5 构建并在 iOS6 模拟器上运行的简单测试应用程序

它只是一个带有 UIScrollView 的 UIViewController，在 UIScrollView 中只有一个 UILabel。

我在界面构建器中将 UILabel 中的 NumberOfLines 设置为 0，并将其设置为 ScrollView 中的全宽 - 但高度只有大约 30 个点。我还将 UIScrollView 设置为仅垂直滚动。我为两个 UI 组件设置了几个 IBOutlets，并将文件的所有者设置为 UIScrollView 的委托（并放在 UIViewController 标头上。）

在 viewDidLoad 中，我只是将标签的文本设置为一个不错的长字符串。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.txtLabel2.text = @"`Twas brillig, and the slithy toves - Did gyre and gimble in the wabe: - All mimsy were the borogoves, - And the mome raths outgrabe. ";
} 
```

然后在 ViewDidAppear 中，我将滚动视图的内容大小设置为 UILabel 的大小：

```
-(void)viewDidAppear:(BOOL)animated
{
    self.scrollView.contentSize = self.txtLabel2.bounds.size;
} 
```

这似乎运作良好 - UILabel 会自动调整其高度，并将滚动视图设置为正确的高度并很好地滚动文本。伟大的。

但是，我显然在这里做错了 - 因为如果我进入界面构建器并将 UILabel 的字体大小从默认值（17.0）更改为任何其他值 - 它就会停止工作。标签不再调整大小并在第一行被截断。

我尝试手动调整 UILabel 的大小 - 例如使用此处建议的解决方案：

[调整 UILabel 的大小以适合？](https://stackoverflow.com/questions/406212/sizing-a-uilabel-to-fit)

并在我设置内容时使用扩展名：

```
self.txtLabel2.text = @"`Twas brillig, and the slithy toves - Did gyre and gimble in the wabe: - All mimsy were the borogoves, - And the mome raths outgrabe. ";
//use the current width - resize the height
[self.txtLabel2 sizeToFitFixedWidth:self.txtLabel2.bounds.size.width]; 
```

但这似乎没有任何效果。

我不明白为什么改变字体大小应该改变 UILabel 自动调整大小的行为，我不知道为什么手动设置 UILabel 的大小没有效果。这里发生了什么？（还有——我应该做些什么不同的事情，这样我一开始就不会陷入这种混乱！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:26:42.713

我不知道为什么您的代码不起作用，因为有多种可能性但是跟随代码是您的代码的不错选择

```
int scrollViews_fixed_width = self.scrollView.bounds.size.width;
self.txtLabel2.lineBreakMode = UILineBreakModeWordWrap; 
self.txtLabel2.numberOfLines = 0;

UIFont *font = [UIFont fontWithName:@"Helvetica" size:14.0];//Choose Your Font this is default font
CGSize constraintSize = CGSizeMake(scrollViews_fixed_width, 555);// Choose big value max possible height of textLabel or leave it 555 this will be enough
float  calculatedHeight = [@"Your Long String" sizeWithFont:font constrainedToSize:constraintSize lineBreakMode:UILineBreakModeWordWrap].height;
self.txtLabel2.frame = CGRectMake(0,0,scrollViews_fixed_width,calculatedHeight);
self.scrollView.contentSize = CGSizeMake(scrollViews_fixed_width, calculatedHeight); 
```

您可能需要为高度添加一些偏移量，因为上面的代码计算不考虑空格投注线，如果您对上述内容感到满意，请不要为此使用 foll 实现使用小字符串计算单行的高度，然后使用 no_of_lines = computedHeight/ single_line_height_calculated_using_small_string 然后添加一些额外的偏移到高度取决于没有。行数

# solr - Solr - 缺少必填字段

> ID：12821782
> 
> 赞同：1
> 
> 时间：2012-10-10T14:26:17.850
> 
> 标签：solr

Solr 报告它缺少必填字段 (documentId)，但该字段和值正在传递给 Solr。从架构：

```
<fields>
   <field name="id" type="string" indexed="true" stored="true" required="true" /> 
   <field name="documentId" type="string" indexed="true" stored="true" required="true" /> 
</fields> 
```

根据 Solr 日志，正在传入 documentId：

```
org.apache.solr.core.SolrCore execute
INFO: [] webapp=/solr path=/update/extract params={waitSearcher=true&commit=true
&literal.id=C:\documents\102\Comps+Database+BRD.docx&literal.documentId=102&w
t=javabin&waitFlush=true&version=2} status=400 QTime=489 
```

为什么 Solr 会报告：

```
org.apache.solr.common.SolrException log
SEVERE: org.apache.solr.common.SolrException: [doc=C:\documents\102\test.docx]
 missing required field: documentId 
```

*编辑* 更正了提取请求中的错字，但仍然是同样的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T15:18:54.663

出于某种原因，Solr 不喜欢字段名称上的“Id”后缀。当我将“documentId”重命名为“document”时，我没有收到任何错误。它在“testId”上也失败了，但是当我重命名为“test”时它就起作用了。有谁知道为什么“Id”字段名称后缀会导致 solr 总是报告缺少必填字段，即使传递了一个值？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:46:00.863

`dcoumentId=`归档定义使用时看起来有错字`documentId`

你看出区别了吗？dco……和医生……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-23T11:06:59.877

您的字段名称应该是小写字母，例如“documentid”。如果字段名称包含大写字母甚至单个，则 solr 不会将数据保存在字段中。在 solr 的情况下，我们不必遵循骆驼案例约定。所以教训是，如果您想创建一个字段并在其中存储数据，您需要将其设为小案例字段。例如“documentid”或“testid”不是“documentId”或“Documentid”等

# java - 在 JAR 文件中包含源代码有什么缺点？

> ID：12821785
> 
> 赞同：3
> 
> 时间：2012-10-10T14:26:22.873
> 
> 标签：java, web-applications, jar

为了帮助我们在调试时单步执行代码，我建议构建我们的 JAR 文件以包含源代码。我想知道这可能会导致什么问题。我的直接想法是 JAR 文件会稍微大一些。我可以忍受这一点。还有其他我需要考虑的问题吗？

TIA

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T14:27:15.837

Normally you separate compiled code and source code into two different jars.

Then you can attach the source-code jar in your IDE when you need to debug the code.

A build tool like maven will easily do that for you.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T14:37:07.117

我强烈推荐它。我这样做，一些开源项目也这样做（例如 jMock、Hamcrest、GWT）。

它省去了使用单独的源 jars 的麻烦。这也意味着，如果在未来某个时候源项目丢失（有时在大型组织中会发生），维护程序员将有机会重新创建它。

如果您很高兴那些有权访问 jar 的人可以看到您的源代码并准备支付增加 jar 大小的代价（并且创建、传输和部署 jar 的时间增加可能可以忽略不计）然后这就是你需要担心的。据我所知，没有任何其他问题。

仅仅因为 Maven 标准是将源文件分开并不意味着您必须这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T14:30:00.260

我通常会创建一个单独的源 .jar。[Maven 可以轻松创建它](https://stackoverflow.com/questions/2059431/get-source-jars-from-maven-repository)，并且 IDE 知道如何访问/下载这些。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T14:36:23.683

Java 空间中的一些工具会从类路径（即从 jar 中）获取源文件并做一些讨厌的事情。

通常，如果您在执行此操作的 jar 上添加依赖项，则通常会看到这种情况……然后，您最终会将这些源文件再次编译到依赖项目中并捆绑在其 jar 中，然后随着类的获取，所有类加载器地狱都将松动从一个来源和另一个来源加载。

只是不要这样做。遵循 Maven 方式（即使不使用 Maven）并创建一个单独的`-sources.jar`

# sql - SQL NOT IN operator to only return if all values are not in the set

> ID：12821793
> 
> 赞同：4
> 
> 时间：2012-10-10T14:26:39.317
> 
> 标签：sql

I am trying to write a query that will let me search if a patient has NOT received a medication. At first I thought that I could just do something like this:

```
INNER JOIN prescript p ON p.id = patient.id AND p.med_id NOT IN (5128) 
```

Where `p.id` and `patient.id` signify the patient id, `p.med_id` refers to the medication id and `5128` is the medication being used in the query. The problem with this query is that if the patient has had other medications, those will show up. So if a patient has had medication 5128, but also another medication they will show up. But I only want to return a patient if they have not have that medication at all. The part that is tricky here is that I won't be able to know the patient id in any of this. So I need a solution that is similar to this:

```
INNER JOIN prescript p ON p.id = patient.id AND (SELECT med_id 
                                                 FROM prescript
                                                 WHERE id = p.pid) NOT IN (5128) 
```

I was thinking that this might be possible if I could concatenate all of the med_id's into one string as well, but my problem with that is that I'm using a query builder so I'm limited to adding joins and adding wheres only. Aka I can't use `DECLARE`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:28:27.007

所有未服药的患者 5128...

```
Select patient.*
from patient 
     left join prescript 
     on patient.id = prescript.patientid
     and prescript.medid = 5128
where 
     prescript.id is null 
```

所有未服药患者 5128 或 3000

```
Select patient.*
from patient 
     left join prescript 
     on patient.id = prescript.patientid
     and prescript.medid in ( 5128 ,3000)
where 
     prescript.id is null 
```

所有未服药患者 5128 和 3000

```
Select patient.*
from patient 
     left join prescript 
     on patient.id = prescript.patientid         
     and prescript.medid in ( 5128 ,3000)           
group by patient.id, patient.name
having COUNT(distinct medid)<>2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:30:02.217

尝试`left join`：

```
left join prescript p on p.id = patient.id and med_id = 5128 where p.id is null 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T14:46:55.477

您可以在语句中使用`NOT EXISTS (SELECT * FROM prescript WHERE id = patient.id AND med_id = 5128)`子句`WHERE`。

如果您需要排除已使用至少一种药物的患者，那么您可以`med_id IN (5128, ...)`改用。

# android - How to disable fragment for portrait mode or for phone

> ID：12821796
> 
> 赞同：0
> 
> 时间：2012-10-10T14:26:51.220
> 
> 标签：android, android-layout

I am Using fragments in my android application, it looks good in tablet but I don't want fragment in phone so is there any way to disable fragments for phone? Instead of fragment i want to show normal activity on phone but when you on tablet than fragment should displayed. thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:43:18.967

根据尺寸和密度，您可以拥有同一屏幕的不同版本。例如，假设您有一个 main.xml，可以有一个用于手机、7 英寸、10 英寸的平板电脑等。唯一的区别是，不是将平板电脑版本 main.xml 放在 res/layout 中，而是将它放在例如 res/layout-xlarge。现在，在您的常规 res/layout 中，您可以使用活动，而在 res/layout-xlarge 中，您可以使用 Fragments。查看有关此的[android](http://developer.android.com/guide/practices/screens_support.html)文档以获取更多信息，因为它现在比以前复杂一些。但这应该会给你你正在寻找的效果。

# java - netty http 请求 getContent 有时在正文中给出标题

> ID：12821798
> 
> 赞同：1
> 
> 时间：2012-10-10T14:26:57.127
> 
> 标签：java, http, http-headers, netty, nio

我使用 ClientBootstrap 在客户端模式下使用 netty。当我大多数时候尝试接收消息时，它工作正常并且只返回一个正文，但有时（服务器总是返回相同的响应）我在内容中得到一个标题，当我调用 message.getContent() 时：

```
Content-type: text/xml;charset=windows-1251
Content-length: 649
Connection: keep-alive

<?xml version="1.0" encoding="windows-1251"?>
<response>
  <status>
    <code>0</code>
  </status>
  <detail> 
```

显然它应该只是http请求的正文。当它在正文中返回标头部分时，正文部分本身会被标头的大小切割。

这是我的 PiileniFactory：

```
public ChannelPipeline getPipeline() throws Exception {
    ChannelPipeline pipeline = pipeline();
    if (isSecure) {
        SSLContext clientContext = SSLContext.getInstance("TLS");
        clientContext.init(null, new TrustManager[]{DUMMY_TRUST_MANAGER}, null);
        SSLEngine engine = clientContext.createSSLEngine();
        engine.setUseClientMode(true);
        pipeline.addLast("ssl", new SslHandler(engine));
    }

    pipeline.addLast("codec", new HttpClientCodec());
    pipeline.addLast("aggregator", new HttpChunkAggregator(1048576));
    pipeline.addLast("timeout", new ReadTimeoutHandler(timer, timeout, TimeUnit.MILLISECONDS));
    pipeline.addLast("handler", ibConnectorHandler);
    return pipeline;
} 
```

这是来自 ibConnectorHandler 的 messageReceived：

```
public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) throws Exception {
    logger.info("Received");

    HttpResponse response = (HttpResponse) e.getMessage();
    ChannelBuffer resContent = response.getContent();
    byte[] content = null;
    if (resContent.readable()) {
        content = Arrays.copyOf(resContent.array(), resContent.readableBytes());
        logger.debug(Arrays.toString(req.getParams().toArray()) + "----------" + new String(content));
    }

} 
```

我正在使用netty 3.5.8。

UPD 当一切都正确时，resContent 是 org.jboss.netty.buffer.BigEndianHeapChannelBuffer 的 instanceof。当它显示头 resContent 是 org.jboss.netty.buffer.SlicedChannelBuffer 时。所以当netty使用org.jboss.netty.buffer.SlicedChannelBuffer作为http消息的内容时就会出现问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:27:31.327

在“Arrays.copyOf(resContent.array(), resContent.readableBytes())”中，您不尊重数组中的偏移量。您还需要提交可以从 ChannelBuffer.arrayOffset() + ChannelBuffer.readerIndex(); 获得的偏移量；

见：[http](http://static.netty.io/3.5/api/org/jboss/netty/buffer/ChannelBuffer.html#arrayOffset) ://static.netty.io/3.5/api/org/jboss/netty/buffer/ChannelBuffer.html#arrayOffset ()

# javascript - Backbone.js get event when clicking on same route

> ID：12821799
> 
> 赞同：1
> 
> 时间：2012-10-10T14:26:59.890
> 
> 标签：javascript, backbone.js

I'm using backbonejs w/ routes and I'd like to know when a person has clicked on the same route that they are already on.

For example, if they are on `/#/home`, then they click a link again for the same route. I tried to bind all, but it only seems to register if a route is actually changed.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:12:52.380

我不知道您要达到什么目标，但以下内容可能会有所帮助：

```
Backbone.history.on('all', function (name, e, route) {
    if(route === lastroute) {
        refresh();
    }
} 
```

`Backbone.history.navigate('home', {trigger: true})`如果您使用这种导航，请务必使用。

# sql - Passing parameters from one query to a view in MS-Access?

> ID：12821803
> 
> 赞同：2
> 
> 时间：2012-10-10T14:27:09.547
> 
> 标签：sql, ms-access, view, ms-access-2003, squirrel-sql

If you define a query in Microsoft Access,

For instance,

```
SELECT * FROM T_Employees t WHERE t.LastName=[LastName] 
```

a popup dialog will display asking you to enter a value for `LastName`. `LastName` a named parameter.

Now from here one can also create a view

```
CREATE VIEW paramTest AS SELECT * FROM T_Employees t WHERE t.LastName=[LastName] 
```

But when calling this view in another query, the parameter is ignored....

So how does one call the view created above from another query and specify the value of the named parameter within that view? (preferably without VBA, I'm trying to use it to write a query involving a view in SQuirreL SQL).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:49:58.863

该`CREATE VIEW`语句`paramTest`使用以下 SQL 创建命名查询 ：

```
SELECT *
FROM T_Employees AS t
WHERE (((t.LastName)=[LastName])); 
```

运行该查询时，数据库引擎不会解释`[LastName]`为参数，因此不会弹出参数对话框，因为参数的名称与字段名称相同。本质上，数据库引擎返回每个`LastName`字段等于自身的行......所有行。

如果要创建有效的参数查询，请为参数指定一个与数据源中的任何字段名称都不匹配的名称。而且，正如罗恩所说。`CREATE VIEW`不允许您创建参数查询。但是，您可以使用`CREATE PROCEDURE`.

```
CurrentProject.Connection.Execute "CREATE PROCEDURE paramTest " & _
    "(Which_LastName TEXT(255)) AS" & vbCrLf & _
    "SELECT * FROM T_Employees t WHERE t.LastName=[Which_LastName];" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:38:30.260

VIEWS 不允许使用参数。把它们想象成表而不是查询。通常在需要参数时使用存储过程。为了将参数合并到视图中，您必须使用参数值创建一个表并将其包含在 VIEW SQL 中。参数表通常包括一个 USER ID 以避免并发请求冲突。

# iphone - iOS: How to dynamically set height of UITableView

> ID：12821804
> 
> 赞同：3
> 
> 时间：2012-10-10T14:27:10.537
> 
> 标签：iphone, ios, uitableview

I have a view controller that contains a table view (see screenshot below). This table view always has exactly 3 rows, and these rows expand when clicked to show more information. How can I make it so that the table view's height always shows exactly these three rows, and no more? As you can see in the screenshot, empty rows with no content are being shown.

Note that the expanded rows may contain views other than UILabels.

Here's how it looks in IB:

![enter image description here](../Images/47282f6a0f57c2f2a7680b67639300a2.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T17:34:29.253

我想你需要这样的东西

```
//Return number of rows in section
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    [self setTableHeight];
    return 3;
}

//Method which lets you calculate the height of tableView depending on your 3 cells
- (void)setTableHeight
{

    if(_isRowExpanded == NO)
    {
        tableHeightCalculated = rowHeight * 3; // rowHeight use default 44 or ur custom
    }
    else
    {
        //You need to put some logic here to Calculate or put approx height of  Expanded_Row_Height
        tableHeightCalculated = rowHeight * 2 + Expanded_Row_Height;

        if(tableHeightCalculated > maxHeightAllowed) //maxHeightAllowed is your current table height in snapshot
        {
            tableHeightCalculated = maxHeightAllowed;
        }
    }
    tableView.frame = CGRectMake(tableView.frame.origin.x, tableView.frame.origin.y,
                                 tableView.frame.size.width,  tableHeightCalculated);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:30:24.143

如果垂直空间大于显示实际单元格所需的空间，UITableView 会插入假的空单元格。您无法真正控制这种行为，您最多只能将表格视图的高度设置为足够小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:34:51.627

使用`frame`您想通过编程操作的任何控件的属性。`frame`还有`size`和的两个性质`origin`。使用该`size`属性，您可以操作宽度和高度，并使用`origin`您可以操作控件`x`的 `y`属性。您想要的可以通过以下方式完成：

`CGRect frame = control.frame; //control is your UIControl`

`frame.size.height = 10.0; //suppose 10 is the desired height.`

`control.frame = frame;`

希望这是您正在寻找的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T14:42:03.850

尝试初始化表格的页脚视图：

TableView.tableFooterView = [[UIView alloc] init];

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T14:52:07.227

添加此 footerview 方法，这将起作用。这将删除空单元格。

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section
{
UIView *v = [[UIView alloc] initWithFrame:CGRectMake(0, 0, [UIScreen mainScreen].applicationFrame.size.width, 0)];
v.backgroundColor = [UIColor clearColor];
[tableView setTableHeaderView:v];
[tableView setTableFooterView:v];
return v;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-09T06:22:37.863

在我希望表格与内容大小完全一致的情况下，这两行对我有用。这是一种“幻觉”，但就像一种魅力。

```
 self.tableView.tableFooterView = [UIView new];
 self.view.backgroundColor = [UIColor whiteColor]; 
```

# .net - Upload and Download stream to Azure Blob

> ID：12821806
> 
> 赞同：4
> 
> 时间：2012-10-10T14:27:17.977
> 
> 标签：.net, html, azure

I have a simple app where I'm doing a form post with a file type input to a WCF Service. I'm trying to upload that file from the form post to an Azure blob and then download it by hitting the appropriate blob url.

What's happening now is I'm uploading a file to Azure but when I download it the file doesn't contain content. For instance if I upload something.zip or something.gif I can download it from the url but they both won't contain anything.

I've read that this could be because the position of the stream is not set to 0\. It won't let me set the position of the Stream "stream" below so I copied it to a memoryStream. Sadly that didn't resolve the issue.

```
[OperationContract]
[WebInvoke(Method = "POST",
    BodyStyle = WebMessageBodyStyle.Wrapped,
    RequestFormat = WebMessageFormat.Json,
    ResponseFormat = WebMessageFormat.Json,
    UriTemplate = "Upload")]
public string upload(Stream stream)
{
    CloudStorageAccount storageAccount = CloudStorageAccount.Parse(
        CloudConfigurationManager.GetSetting("StorageConnectionString"));
    CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();
    CloudBlobContainer container = blobClient.GetContainerReference(exerciseContainer);
    CloudBlob blob = container.GetBlobReference("myblob");

    Stream s = new MemoryStream();
    stream.CopyTo(s);
    s.Seek(0, SeekOrigin.Begin);
    blob.UploadFromStream(s);

    return "uploaded";
} 
```

Also I know the file is getting to the service through fiddler/breaks and I've successfully uploaded and downloaded files by hard coding in a file like this:

```
using (var fileStream = System.IO.File.OpenRead(@"C:\file.zip"))
{
    blob.UploadFromStream(fileStream);
} 
```

Edit: HTML

```
<form action='http://127.0.0.1:81/service.svc/Upload' method="post">
    <input type="file" name="file" id="btnUpload" value="Upload" />
    <input type="submit" value="Submit" class="btnExercise" id="btnSubmitExercise"/>
</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T15:24:51.783

您的代码看起来正确。但我对您收到的流媒体表示怀疑。你确定它包含数据？你能试试下面的代码吗？它返回上传 blob 后收到的总字节数。

```
using (var ms = new MemoryStream())
{
    byte[] buffer = new byte[32768]; 
    int bytesRead, totalBytesRead = 0; 

    do 
    { 
        bytesRead = stream.Read(buffer, 0, buffer.Length); 
        totalBytesRead += bytesRead; 

        ms.Write(buffer, 0, bytesRead); 
    } while (bytesRead > 0); 

    blob.UploadFromStream(ms);

    return String.Format("Uploaded {0}KB", totalBytesRead/1024);
} 
```

# windows - How to use Zthread on windows?

> ID：12821814
> 
> 赞同：0
> 
> 时间：2012-10-10T14:27:43.837
> 
> 标签：windows

I have download the ZThread library([Link](http://sourceforge.net/projects/zthread/)). But am getting confused how to use the library and the header file. Can anyone provide me a guide how i can use it with Eclipse C++ under MinGW compiler?

# sql - 为什么 T-SQL where 语句的顺序很重要？

> ID：12821816
> 
> 赞同：5
> 
> 时间：2012-10-10T14:27:45.240
> 
> 标签：sql, sql-server, tsql, optimization, ssms

为什么，当打开如下查询时：

`WHERE (statement1) AND ((statement2) OR (statement3))`

SSMS 查询设计器是否将其重构为以下语法：

`WHERE (statement1) AND (statement2) OR (statement1) AND (statement3)`

我认为这与 SQL 服务器如何解析查询有关，在 ors 之前运行 ands？

是否有关于如何以最佳顺序进行最终优化的一般规则？

运行我自己的测试后，第二个查询将处理时间缩短了 0.5 毫秒。我知道它很小，但会随着查询的复杂性而增加（仍然几乎没有区别），而且我对 SQL Server 的工作方式很感兴趣。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T14:34:35.727

它与实际的 SQL 执行无关。与您所知道的大多数语言不同，T-SQL[没有布尔运算符短路](http://rusanu.com/2009/09/13/on-sql-server-boolean-operator-short-circuit/)¹，并且诸如“在 ors 之前运行 ands”之类的概念没有意义，评估顺序完全由查询优化器决定驱动，最终可能完全不同从你写的，或者你期望的。

您看到的表达式重写似乎完全是 SSMS 查询设计的内部解析器的工件。

[1 或者更好地说，布尔短路不能通过您如何编写表达式来强制确定。实际运行时操作员短路*确实*会发生，您只是不知道它*是否*以及*何时*会发生。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T14:31:13.500

通常，不能保证 SQL Server 如何评估 Where 子句。优化器将始终尝试找到执行查询的最有效方式。

要确定执行顺序，您应该获得查询的执行计划（您可以通过 SSMS 获得）。但是，请记住，在给定当前各种统计信息和资源的情况下，此计划可能会根据优化器认为的最佳查询而改变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T14:35:42.837

在大多数情况下，您不必费心理解 SQL 如何优化查询以使其性能更好。SQL 知道你不知道的关于你的数据的事情:-)

通常，您能做的最好的事情就是为 SQL 提供以最佳方式检索信息所需的索引。然后优化查询以最佳方式执行。

将此与执行大量更改以优化代码的普通编译器进行比较。您通常可以做的最好的事情是编写可维护的代码，编译器将负责其余的工作。SQL 也一样，了解你要检索的内容，SQL 会以最优化的方式为你检索。

# c# - 我可以在 java android 项目中以某种方式使用 C# 代码或 C# 库吗？

> ID：12821818
> 
> 赞同：7
> 
> 时间：2012-10-10T14:27:46.027
> 
> 标签：c#, java, android

我有一些用 C# 编写的有用代码，我想在我的 android 应用程序中使用它。我可以直接使用它，还是需要在Java上重写它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-10T14:30:27.990

您将需要重写它。或者将您的 C# 代码作为 Web 服务（WCF 或 Web API）运行，并让您的 Java 应用程序与 Web 服务通信

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T14:28:25.113

有一个名为 的项目`Mono for Android`，它使您能够用 C# 编写 android 应用程序：

[http://xamarin.com/monoforandroid](http://xamarin.com/monoforandroid)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-10T14:29:30.287

如果你想免费做，你可能只需要用 Java 重写它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T14:28:54.650

您正在寻找适用[于 Android 的 Mono](http://xamarin.com/monoforandroid) ~

![在此处输入图像描述](../Images/7807f6411583b86fea2f6c31aa019d8a.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T14:34:06.473

如果您希望混合使用 C# 和 Java，那么它可能会比它的价值更麻烦。然而，使用[Mono for Android](http://xamarin.com/monoforandroid)并阅读这个[类似的问题](https://stackoverflow.com/q/6814478/938695)，您可以找到您正在寻找的 Droid。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-10T14:48:06.853

根据您谈论的代码行数，我将从可用的几个“csharp to java”代码转换器的大小有限的演示版本之一开始。谷歌'csharp to java'。您不一定会得到完美的、可运行的 Java 代码，但它会为您打破转换练习的基础。

# python - Editing values in python dictionary

> ID：12821823
> 
> 赞同：3
> 
> 时间：2012-10-10T14:27:59.013
> 
> 标签：python, dictionary, indexing, extraction

I have a huge dictionary with over a 1000 keys and each value is over 600 000 int long. Now, I need to extract some of these integers, so from 600 000 I want to go to let's say 5k. But it can't be random 5k, they have to be at very specific positions. Due to the fact that 5k is still a little too big to extract it by hand, I need to use a list of indices that will indicate which integers in the value should be taken out. I have tested extraction on small lists, with indices [1,3,5,7,9] and long_val ['a','b','c','d','e','f','g','h','i','j','k'] then I can do that:

```
for each in xrange(len(long_val)):
    print indices[long_val[each]] 
```

and I get b,d,f,h and j (as required).

Now, it's not as simple when it comes to dealing with dictionaries (where long_val) is replaced by actual dictionary value). I have tried that:

```
for keys,values in dict_gtps.iteritems():
    for each in xrange(len(values)):
        abs_new[keys]=pos_3[values[each]] 
```

But I'm getting "Index out of range" error message.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T14:39:08.297

如果您使用相同的索引，使用起来会更有效`itemgetter(*indices)`

```
>>> from operator import itemgetter
>>> indices =  [1,3,5,7,9]
>>> long_val = ['a','b','c','d','e','f','g','h','i','j','k'] 
>>> ig = itemgetter(*indices)
>>> ig(long_val)
('b', 'd', 'f', 'h', 'j') 
```

所以

```
from operator import itemgetter
ig = itemgetter(*indices)
for k, v in dict_gtps.iteritems():
    print ig(v)
    abs_new[k] = ig(v) 
```

你也可以使用字典理解

```
abs_new = {k:ig(v) for k,v in dict_gtps.iteritems()} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T14:39:52.587

假设我正确阅读了您的要求，您可以尝试：

```
for key, value in dict_gtps.iteritems():
  abs_new[key] = [value[i] for i in indices] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T14:45:14.657

您的示例代码有缺陷，索引和 long_val 的值颠倒了。

```
 indices = [1,3,5,7,9]
 long_val = ['a','b','c','d','e','f','g','h','i','j','k']
 for each in xrange(len(long_val)):
    print indices[long_val[each]] 
```

抛出一个`TypeError`. 它应该是：

```
indices = [1,3,5,7,9]
long_val = ['a','b','c','d','e','f','g','h','i','j','k']
for each in xrange(len(indices)):
    print long_val[indices[each]] 
```

基于此，很明显为什么您的字典函数会引发范围错误，因为您输入了错误的变量。我会让你自己尝试修复代码。

/edit 供后代使用 此外，由于索引中的值是整数，因此您实际上不需要使用 xrange--

```
for i in indices:
    print long_val[i] 
```

简单得多。

# c# - 覆盖 DataBind()

> ID：12821832
> 
> 赞同：0
> 
> 时间：2012-10-10T14:28:24.793
> 
> 标签：c#, asp.net

我有一个页面。

在 C# 中：

```
public class myClass
{
    protected void Page_Load(object sender, EventArgs e)
    {
        mydropdown1.DataSource = location_of_data;
        mydropdown1.DataBind();

        mydropdown2.DataSource = location_of_data;
        mydropdown2.DataBind();
    }
} 
```

假设 aspx 文件有 2 个下拉菜单。

我想覆盖 DataBind 函数，保持当前字符串不变，但我想更改每个要绑定的项目的值。

我搜索了一个 DataBind 覆盖的解决方案，如下所示：

```
public override void DataBind()
{
   //...some implementation here...
   base.DataBind()
} 
```

但我不确定是否应该将覆盖方法放在 myClass 中。另外，如果我有两个 DropDowns 并且我想以不同的方式处理它们的 DataBinds，我应该如何处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:32:49.560

您应该收听下拉列表中的单个 DataBinding 事件，而不是在控件的 DataBind 方法中处理它。然后，您也可以单独处理它们中的每一个。

```
protected override void OnLoad(EventArgs e) {
    mydropdown1.DataBinding += binddropdown1;
    mydropdown1.DataBind();
}

private void binddropdown1(object sender, EventArgs e) {
    mydropdown1.DataSource = dataSource;
} 
```

然后，当任一下拉列表关注的数据更改时，调用该`dropdown.DataBind()`方法并在那里处理它。

# c# - 在“使用”块中是关闭的 OracleConnection

> ID：12821838
> 
> 赞同：1
> 
> 时间：2012-10-10T14:28:38.397
> 
> 标签：c#, try-catch, exit, using, oraclecommand

如果在 catch 语句中发出 System.Environment.Exit(0)，在“使用”块中是否关闭了 OracleConnection？

例子：

```
 OracleConnection oracleConnection = getOracleConnection();

        using (oracleConnection)
        {

            try
            {

                oracleConnection.Open();
                OracleCommand cmd = getApplicantsCmd(oracleConnection);
                OracleDataReader rdr = cmd.ExecuteReader(); 

                List<Applicant> applicants = new List<Applicant>();
                while (rdr.Read())
                {
                    Applicant applicant = new Applicant();
                    applicant.email = (string)rdr["GOREMAL_EMAIL_ADDRESS"];
                    applicants.Add(applicant);                   
                }

                return applicants;

            }
            catch (Exception ex)
            {
                Console.WriteLine("Failure getting applicant records: " + ex.Message);
                System.Environment.Exit(0);
                return null;
            }
        } 
```

如果在查找记录时抛出异常，我希望停止执行。

有没有更好的方法来处理这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T14:30:02.077

与数据库的物理连接未关闭。它只是返回到 ADO.NET 连接池以供重用。ADO.NET 保留一个连接池，以避免每次您想要执行 SQL 查询时打开与数据库的物理连接。您还应该包装您的`OracleCommand`and `OracleDataReader`in`using`语句，以确保即使在发生异常时也能正确处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T14:38:34.740

在调用 之后不会调用`oracleConnection`的`Dispose()`方法`System.Environment.Exit`，即使变量被包装在`using`. 如果你想确保连接被释放，要么放在`using`里面`try`/ `catch`，或者不要调用`System.Environment.Exit`inside `using`。如果您设置了一个标志，您仍然可以退出，并在`using`语句之后对其进行操作：

```
var mustExit = false;
using (var oracleConnection = getOracleConnection()) {
    try {
        ...
    } catch {
        Console.WriteLine("Failure getting applicant records: " + ex.Message);    
        mustExit = true;
    }
}
if (mustExit) {
    System.Environment.Exit(0);                
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:30:27.197

是的，它是，并且在不久之后就被放置在其中。

编辑：除非它被池化，并且如前所述，它将再次在池中可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T14:45:08.483

我相信您的问题一般是如果调用withing块，是否会调用语句`Dispose`中使用的对象方法。`using``Environment.Exit``using`

答案是不。如果你调用`Environment.Exit`or `Environment.FailFast`，进程将终止并且 finally 块（隐含的，由`using`语句产生）将不会被执行。

另一方面，如果您通过调用退出您的应用程序，`Application.Exit`否则`Application.ExitThread`它将被调用。

# excel - 使用范围，如何将 .COPY DESTINATION 粘贴为 VALUES

> ID：12821844
> 
> 赞同：6
> 
> 时间：2012-10-10T14:28:58.663
> 
> 标签：excel, excel-2010, vba

我有以下代码，可以很好地将整个单元格复制到新的目的地。

```
Dim ws As Worksheet, rng As Range

Set ws = Sheets("Duplicates")
Set rng = ws.Range("A2")

rng.Copy Destination:=Range("A2:A" & Range("G" & Rows.Count).End(xlUp).Row) 
```

1.  是否有可能应对`paste special`.
2.  或者我是否需要使用两个范围对象将复制/粘贴分成两行？

编辑：

是的，我们已经得出结论，您不能在与副本相同的行上使用特殊粘贴。我还发现您可能不希望这样做。

如果您从记录 1 复制公式并将其粘贴到所有记录中`VALUES`，您将获得复制下来的第一条记录的公式值。

这不是我想要的。因此，您必须将公式作为公式复制到所有记录中，然后复制这些公式并粘贴为值。

* * *

```
Dim ws As Worksheet, rng As Range
Set ws = Sheets("Duplicates") 
```

设置第一个范围（带有公式的单个单元格）并根据 Col 将内容复制/粘贴到电子表格的底部`G`：

```
Set rng = ws.Range("A2")
rng.Copy Destination:=Range("A2:A" & Range("G" & Rows.Count).End(xlUp).Row) 
```

从第二行向下选择新粘贴的配方。复制它们。然后将内容作为值粘贴到同一位置。

```
Set rng = ws.Range("A3:A" & Range("G" & Rows.Count).End(xlUp).Row)
rng.Copy
rng.PasteSpecial (xlPasteValues)
Application.CutCopyMode = False 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T18:52:11.700

Alternatively, you can just assign range values without using copy & paste:

```
Set r1 = Range("D1", "D7")
Set r2 = Range("E1", "E7")

r2.Value = r1.Value ' copies current values from one range to another 
```

after this assignment, the r2 range will have values not formulas even if r1 has forumlas.

In your case, perhaps:

```
rng.Value = rng.Value 
```

(once you've set rng to the correct size as you've noted)

# java - 如何立即强制终止 ThreadPoolExecutor 中的所有工作人员

> ID：12821849
> 
> 赞同：20
> 
> 时间：2012-10-10T14:29:09.707
> 
> 标签：java, multithreading, threadpool, threadpoolexecutor

我在`TheadPoolExecutor`. 我的界面上有一个停止按钮，应该`ThreadPoolExecutor`立即终止里面的所有线程。我正在寻找一种方法来做到这一点。（没有`shutDown()`或`shutDownNow()`）。

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-10T14:37:41.930

您不能立即安全地终止线程。相反，您的任务应该尊重中断并在中断时停止。如果使用`ThreadPoolExecutor.shutdownNow()`，所有正在运行的任务都会被中断。

唯一的替代方法是在一个单独的进程中的线程是发出一个信号来终止该进程。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-10-20T16:44:00.260

老问题，但我认为您可以扩展 ThreadPoolExecutor 以在 beforeExecute() 中捕获正在运行的线程引用。当调用 shutdownNow() 时，您可以 stop() 所有正在运行的线程。虽然我强烈鼓励在你的任务中依赖 isInterrupted() 。

示例代码 ->

```
public class KillableThreadPoolExecutor extends ThreadPoolExecutor {

    private final Map<Runnable, Thread> executingThreads;

    public KillableThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, String threadNamePrefix) {
        super(corePoolSize, maximumPoolSize, keepAliveTime, unit, new YoungMemorySafeLinkedBlockingQueue<Runnable>(), ThreadFactories.create(threadNamePrefix));
        executingThreads = new HashMap<>(maximumPoolSize);
    }

    @Override
    protected synchronized void beforeExecute(Thread t, Runnable r) {
        super.beforeExecute(t, r);
        executingThreads.put(r, t);
    }

    @Override
    protected synchronized void afterExecute(Runnable r, Throwable t) {
        super.afterExecute(r, t);
        if(executingThreads.containsKey(r)) {
            executingThreads.remove(r);
        }
    }

    @Override
    public synchronized List<Runnable> shutdownNow() {
        List<Runnable> runnables = super.shutdownNow();
        for(Thread t : executingThreads.values()) {
            t.stop();
        }
        return runnables;
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-10T14:41:03.943

`shutdown()`只会拒绝所有新提交的任务`ThreadPoolExecutor`，并从队列（如果`ThreadPool`是无界队列执行器）中删除待处理的任务。将`shutdownNow()`执行完全相同的操作，并且还将`interrupt()`调用`Thread`. 因此，在您的`run()`方法中，您应该正确处理它：

```
try {
   Thread.sleep(1000);
} catch (InterruptedException ie) {
   // Handle the exception, and close resources.
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-10-20T18:52:30.320

`ThreadPoolExecutor`是一个`ExecutorService`。您无法停止`ExecutorService`使用`shutdown()`或`shutdownNow()`方法中的所有线程。[如 oracle 文档页面](https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html)所引用，您必须按顺序调用`shutdown(), awaitTermination()`和方法才能正常关闭`shutdownNow()`

```
 void shutdownAndAwaitTermination(ExecutorService pool) {
   pool.shutdown(); // Disable new tasks from being submitted
   try {
     // Wait a while for existing tasks to terminate
     if (!pool.awaitTermination(60, TimeUnit.SECONDS)) {
       pool.shutdownNow(); // Cancel currently executing tasks
       // Wait a while for tasks to respond to being cancelled
       if (!pool.awaitTermination(60, TimeUnit.SECONDS))
           System.err.println("Pool did not terminate");
     }
   } catch (InterruptedException ie) {
     // (Re-)Cancel if current thread also interrupted
     pool.shutdownNow();
     // Preserve interrupt status
     Thread.currentThread().interrupt();
   }
 } 
```

其他选项：

1.  `invokeAll()`
2.  `CountDownLatch`
3.  遍历所有`Future.get()`任务`Callable`以达到相同的目的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T14:44:43.833

如果您可以在线程中使用`Callable`s 而不是`Runnable`s，您可以尝试调用[`someTask.cancel()`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html#cancel%28boolean%29)以在调用时摆脱正在运行的任务`shutdownNow()`。

请注意，我没有尝试过这个，所以我不能保证它会像你想要的那样工作，但从 javadoc 描述来看，它值得一试。

# jquery - 调整内容网格的大小和分组

> ID：12821856
> 
> 赞同：0
> 
> 时间：2012-10-10T14:29:40.277
> 
> 标签：jquery, css

> **如何使用jquery在整页上对不同内容的div进行分组和部署的效果？**.

例如，我有 4 个 div，每个 div 的宽度为 20%。[http://jsfiddle.net/v2pwww/Hyccq/](http://jsfiddle.net/v2pwww/Hyccq/)

![在此处输入图像描述](../Images/a8d442e1a9926c2f697a2738b8d893c4.png)

我希望当点击每个块时，他转身到整页，其余的被分组。

*点击 div2*

![在此处输入图像描述](../Images/d6506a5bd7aa6cd74448a05e2f158399.png)

**请帮忙！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:38:09.467

这可以完成工作：http: [//jsfiddle.net/carlosmartinezt/Hyccq/1/](http://jsfiddle.net/carlosmartinezt/Hyccq/1/)

# c# - N-Unit 中的 TestCaseSource

> ID：12821867
> 
> 赞同：2
> 
> 时间：2012-10-10T14:30:07.943
> 
> 标签：c#, .net, unit-testing, nunit, testcasesource

我正在编写一些 N 单元测试，但遇到了一些困难。我正在尝试将测试连接到`TestCaseSource`我的代码中的 a，但它似乎没有正确构造对象。

这是我的测试方法：

```
 [Test, TestCaseSource(typeof(TestCaseStuff), "GetTestCases", Category = "Release")]
    public void WithdrawMoney(TestCaseStuff tc)
    {
        double newBalance = AccountBalance - tc.amt;
        if (newBalance < 0)
        {
            Assert.Fail(String.Format("You can't withdraw {0}! You've maxed" +
                "out your bank account.", tc.amt.ToString("C2")));
        }

        AccountBalance = newBalance;
        Assert.Pass(String.Format("Your new balance is {0}.", 
        (AccountBalance).ToString("C2")));
    } 
```

我的`TestCaseSource`：

```
public class TestCaseStuff
{
    public double amt { get; set; }

    public TestCaseStuff()
    {
        Random rnd = new Random();
        this.amt = rnd.Next(0, 20);
    }

    [Category("Release")]
    public IEnumerable<TestCaseData> GetTestCases()
    {
        for (int i = 0; i < 500; i++)
        {
            yield return new TestCaseData(this);
        }
    }
} 
```

这主要用作概念证明，因此当需要编写具有复杂对象的实际测试时，我会知道我可以像上面那样编写一个循环并将随机值放入我的对象中。但是，返回给我的测试方法的每个实例`TestCaseStuff`都是相同的。

更新：

下面的答案是正确的。当我将它传递给 N-Units`TestCaseData`对象时，我假设（错误地）它只会按值传递该实例。显然，它是通过引用完成的，这就是为什么值总是相同的。

最重要的是，我`Random`错误地使用了这个类。这不是我通常处理的事情，但我没有正确阅读它。正如下面链接中所解释的，当使用`Random`它的默认构造函数时，种子值是从系统时钟派生的。因此，如果您`Random`快速连续实例化多个对象，它们将共享相同的默认种子值并产生相同的值。

因此，由于这些发展，我的代码现在变为：

```
public class TestCaseStuff
{
    public double amt { get; set; }
    private static readonly Random rnd = new Random();

    public TestCaseStuff()
    {
        this.amt = rnd.Next(0, 20);
    }

    [Category("Release")]
    public IEnumerable<TestCaseData> GetTestCases()
    {
        for (int i = 0; i < 500; i++)
        {
            yield return new TestCaseData(new TestCaseStuff());
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:03:13.220

上面的代码只会实例化一个副本`TestCaseSource`并继续提供相同的值。

如果打算在每个循环中生成一个随机数，我认为你应该制作一个对象的静态实例，并在每次创建新对象`Random`时从中生成一个数字。`TestCaseStuff`

我会像这样重写TestCaseStuff：

```
public class TestCaseStuff
{
    // Static instance of a random number generator.
    private static readonly Random RNG = new Random();

    public double amt { get; set; }

    public TestCaseStuff()
    {
        this.amt = RNG.Next(0, 20);
    }

    [Category("Release")]
    public IEnumerable<TestCaseData> GetTestCases()
    {
        for (int i = 0; i < 500; i++)
        {
            // NOTE: You need to create a new instance here.
            yield return new TestCaseData(new TestCaseStuff());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T14:49:25.673

每次调用时，您都在创建一个新的 Random 实例：

```
yield return new TestCaseData(this); 
```

尝试将其移出循环，您应该开始获得随机值。

发现这篇文章解释得很好！ [如何播种随机类以避免获得重复的随机值](https://stackoverflow.com/questions/1785744/how-do-i-seed-a-random-class-to-avoid-getting-duplicate-random-values)

# java - 字符串中多次出现

> ID：12821868
> 
> 赞同：1
> 
> 时间：2012-10-10T14:30:09.107
> 
> 标签：java, regex, gwt

我对此进行了一些搜索并尝试了很多东西，但可以弄清楚。

`"a=:a OR b=:b OR c=:c"`在我想检索的简单字符串中：`:a` `:b` `:c`

这是我尝试使用 GWT RegExp 的方法：

```
RegExp regExp = RegExp.compile("(:\\w+)", "g"); // Tried without 'g'
MatchResult matcher = regExp.exec("a=:a OR b=:b OR c=:c"); 
```

但这会返回 2 组 ":a",":a" ...我在在线测试仪上尝试了一些东西，但无法得到我想要的。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:41:17.687

逃脱`:`：

```
"(\\:\\w+)" 
```

[使用您的示例直接链接](http://www.regexplanet.com/cookbook/ahJzfnJlZ2V4cGxhbmV0LWhyZHNyDgsSBlJlY2lwZRjKzCUM/index.html)到在线测试仪。

![在此处输入图像描述](../Images/2045d3292ee127767a9e933260348de9.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T14:53:12.913

首先，正如亚当马坦所说，我应该逃离`:`. 但我并没有按应有的方式使用这些课程。 `regExp.exec`应该在一个while循环中多次执行以获得所有可能的值。

就像是 ：

```
 MatchResult matcher = regExp.exec(this.sqlFilter, "g");
    while (matcher != null) {
        ...

        matcher = regExp.exec(this.sqlFilter);
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-10T14:50:38.760

试试这个：

```
var str="a=:a OR b=:b OR c=:c";
var patt1=/:[\w+]/g;
var arr = str.match(patt1); 
```

# r - 将矢量输出转换为 data.table 中的列？

> ID：12821881
> 
> 赞同：5
> 
> 时间：2012-10-10T14:30:47.210
> 
> 标签：r, data.table

我通过将函数应用于 data.table 的某些子集来生成输出。我正在使用这样的功能：

```
data[, foo(args), by=list(Year, Month)] 
```

我的函数`foo`总是返回一个长度向量`n`。我得到这样的输出：

```
 Year Month           V1
   1: 1983     2 9.734669e-06
   2: 1983     2 9.165665e-06
   3: 1983     2 2.097477e-05
   4: 1983     2 3.803727e-05 
```

但我想要类似的东西

```
 Year Month           V1           V2           V3           V4 ...
   1: 1983     2 9.734669e-06 9.165665e-06 2.097477e-05 3.803727e-05 ... 
```

我什至尝试使用`list(foo(args))`，它没有帮助。还是应该输出形式`foo$V1, foo$V2 ...`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-10T14:49:18.240

尝试

```
data[, as.list(foo(args)), by=list(Year, Month)] 
```

或更改`foo`为返回 a`list`而不是 a `vector`。

# android - 使用单个 DENSITY_MEDIUM 图形支持 240x480 和 1280x800 分辨率

> ID：12821883
> 
> 赞同：3
> 
> 时间：2012-10-10T14:30:53.040
> 
> 标签：android, graphics, graphics2d, android-image

所以在我的游戏中，我将我的图形放在各自的文件夹中，并根据密度设置和实际分辨率对它们进行缩放。这是为了确保无论屏幕大小/密度如何，游戏看起来都一样（我确保保持相同的纵横比，并根据比例显示​​更多/更少的“世界”）。

我的问题是nexus 7和索尼xperia mini（新的）之间的屏幕尺寸差异。前者的分辨率为 1280x800，后者为 240x480，但由于 nexus 是 7 英寸平板电脑，而 Sony xperia 是小型手机，它们都被归类为中等密度（由 DisplayMetrics 指定），因此两者都从可绘制 mdpi 文件夹。

这意味着我必须将我的 drawable-mdpi 图形绘制到 1280x800 的比例（以确保我只缩小比例）问题是，在从 1280x800 缩小的索尼小图形上看起来很讨厌。

我不能真正使用额外的屏幕尺寸限定符，因为那样我的缩放将无法工作。例如，我可以使用 drawable-large-mdpi 和 drawable-small-mdpi 文件夹，但因为密度标志仍然相同，所以我的代码将从任一文件夹中提取的图形缩放相同的数量，并且由于它们是不同大小的图形，它们需要按不同的量进行缩放。

我有一些问题：

1）我基于密度标志缩放的想法从根本上是错误的吗？基本想法是在每个文件夹中放置该密度的最大图形，然后从那里按比例缩小到设备的分辨率。这是为了解决两个问题：首先要确保无论大小和密度如何，游戏看起来都一样；2) 确保我不必扩大规模。

2）如果我解决这个问题的方式没有根本性的缺陷，我如何为不同的屏幕尺寸和密度提供不同的图形，同时仍然能够以相同的量缩放每个图形（参考我上面的例子，说 480x600 图形在small-mdpi 文件夹和 large-mdpi 文件夹中的 1280x800，并且知道我需要以不同方式缩放它们，尽管它们具有相同的 DisplayMetrics 密度标志）？

谢谢

编辑：这是一个 Opengl 2d 游戏，以防它有所作为（我相信它会）。

# actionscript-3 - 我可以向 flextras DropDownList 添加滚动条吗？

> ID：12821886
> 
> 赞同：1
> 
> 时间：2012-10-10T14:31:04.433
> 
> 标签：actionscript-3, apache-flex, flash-builder4.5

我的 GUI 有一个`<flextras:DropDownList />`填充在我的业务层中的 ArrayCollection。在本例中，它用于列出加拿大的 12 个省。

我已经阅读了[https://www.flextras.com/MobileComponents/Docs/asdocs/com/flextras/mobile/dropDownList/DropDownList.html](https://www.flextras.com/MobileComponents/Docs/asdocs/com/flextras/mobile/dropDownList/DropDownList.html)并且我知道我可以将 requestedRowCount 设置为 12，但是这个下拉列表是放在一个拥挤的 VGroup 中，12 个选项看起来很傻，并且与其他组件重叠，由于要求它不能这样做。默认的 4 个选项非常适合我当前的界面，但访问所有选项并不是很直观。

滚动条将是完美的，但我还没有发现任何暗示这是可能的。也许另一个组件会起作用？有人对此事有任何建议吗？我可以编辑和发布代码，因为这是一个原型移动应用程序，但我真的认为没有必要......

编辑：

```
 <s:HGroup width="100%" styleName="ddlInfo">
            <s:Spacer width="2%"/>
            <flextras:DropDownList id="ddlProvince" width="80%" height="60%"
                                   dataProvider="{ddlPop.getProvinceDDL()}"/>
        </s:HGroup> 
```

这是ddl。这是它获取数据的地方：

```
 public function getProvinceDDL():ArrayCollection{
        var provinces:Provinces = parisLookup.getProvinces();

        for each(var prov:Province in provinces){
            provinceDataProvider.addItem({label:prov.ProvinceName,data:prov.ProvinceID});
        }

        return provinceDataProvider;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:54:39.960

Flextras DropDownList 是 Fl​​ex DropDownList 的移动转换。

下拉列表中已经存在一个滚动条，它本质上只是一个带有列表的弹出窗口。但是，您很可能在移动项目中使用我们的 DropDownList；并且默认滚动条皮肤在您开始滚动之前是隐藏的。

如果你想要更直观的东西，你可以创建自己的滚动条皮肤。您可以使用 CSS 在您的应用程序中全局设置此滚动条外观，或者将其单独应用到 DropDownList 的下拉列表中，并使用 Flextras DropDownList 的自定义外观类。

# macos - AppleScript 中的 Finder 窗口设置 - 小错误

> ID：12821894
> 
> 赞同：1
> 
> 时间：2012-10-10T14:31:27.727
> 
> 标签：macos, applescript, finder

我正在使用 Sal Soghoian 的 AppleScript 1-2-3 书中的一个方便的 Finder 窗口设置脚本（如下）；效果很好，但如果我增加设置的两个窗口中第二个窗口的侧边栏宽度，则对更改没有响应 - 它保持 145；（第一个窗口响应宽度变化）评论？

```
tell application "Finder"
close every window
-- first window
open folder "Webclients" of folder "Documents" of home
set toolbar visible of the front Finder window to true
set the sidebar width of the front Finder window to 145
set the current view of the front Finder window to column view
set the bounds of the front Finder window to {16, 80, 550, 675}
-- second window
open folder "Documents" of home
set toolbar visible of the front Finder window to true
set the sidebar width of the front Finder window to 145
set the current view of the front Finder window to column view
set the bounds of front Finder window to {560, 80, 1000, 675}
select the last Finder window
end tell 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:19:57.143

我发现如果您增加第二个窗口的宽度，它将按预期工作。例如，我使用 {560, 80, 1500, 675} 作为第二个窗口的边界（注意 1500）。在这些范围内，侧边栏的宽度是正确且可变的。所以这一定是与窗口宽度和Apple应用于Finder窗口的一些自动设置有关。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T06:14:09.957

首先设置窗口的边界，然后增加侧边栏的宽度。

```
-- second window
open folder "Documents" of home
set toolbar visible of the front Finder window to true
set the bounds of front Finder window to {560, 80, 1000, 675}
set the sidebar width of the front Finder window to 200
set the current view of the front Finder window to column view
select the last Finder window
end tell 
```

Finder 侧边栏宽度是相对于 Finder 窗口的宽度而言的。

```
tell application "Finder"
    get sidebar width of window 1
        --> 136 //maximum value
    get bounds of window 1
        --> {-1, 44, 327, 235}//327-136 =191
end tell

tell application "Finder"
    get sidebar width of window 1
        --> 563 //maximum value
    get bounds of window 1
        --> {-1, 44, 754, 235}//754-563=191
end tell
tell application "Finder"
    get sidebar width of window 1
        --> 843 //maximum value
    get bounds of window 1
        --> {-1, 44, 1034, 235}//1034 -843 =191
end tell 
```

# c# - Windows 窗体图表 - 添加值标记

> ID：12821896
> 
> 赞同：1
> 
> 时间：2012-10-10T14:31:28.153
> 
> 标签：c#, winforms, charts

我在 Windows 窗体中创建了一个图表，其中 X 轴具有 DateTime 值 (hh:mm:ss)。我想在某个值的图表上添加一条固定线 - 例如，在 X = 07:00:00 的网格上有一条线。这可能吗？我可以输入多个这样的行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:05:11.533

您可以通过将正确配置`StripLine`的对象添加到右轴来实现您的目标。有关如何使用图表控件的所有功能的详细信息， 请参阅[MS Chart Winsamples 。](http://archive.msdn.microsoft.com/mschart)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:17:03.107

感谢 Dominique，我四处寻找一些 StripLine 示例，最终这是我使用的代码：

```
StripLine stripLine = new StripLine();
// highlight a strip of 8 hours in the X axis
stripLine.StripWidth = 8;
stripLine.StripWidthType = DateTimeIntervalType.Hours;
stripLine.BackColor = System.Drawing.Color.PapayaWhip;
stripLine.BorderColor = System.Drawing.Color.LightSeaGreen;
stripLine.BorderWidth = 2;
// start the highlighting 7 hours in (from 07:00 to 15:00)
stripLine.IntervalOffset = 7;
stripLine.IntervalOffsetType = DateTimeIntervalType.Hours;
// repeat this strip every 1 day
stripLine.Interval = 1;
stripLine.IntervalType = DateTimeIntervalType.Days;
this.TopOfBookChart.ChartAreas[0].AxisX.StripLines.Add(stripLine); 
```

有了它，我制作[了下图](http://s7.postimage.org/etnha69bt/Time_Highlight.jpg)。

您可以在此处找到另一个（更简单的）示例：[Win Form Charting Question](https://stackoverflow.com/questions/7503043/win-form-charting)

# java - 使用 wsdl 文件生成一个肥皂请求消息

> ID：12821914
> 
> 赞同：0
> 
> 时间：2012-10-10T14:32:14.947
> 
> 标签：java, soap, wsdl, request

我有一个 Web 服务的 wsdl。我想使用这个 wsdl 文件生成肥皂请求消息的结构。使用 wsdl 文件生成示例肥皂请求消息的最佳方法是什么？我希望使用基于 Java 的技术来完成此操作。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T15:21:25.843

我建议使用像[SoapUI](http://www.soapui.org/)这样的工具来生成原始 SOAP 请求。如果你想用 Java 生成你的 SOAP 请求，那么一般的过程是：

1.  在 Eclipse 中使用 JAX-WS 库设置项目。
2.  `wsimport`从[Ant](http://jax-ws.java.net/nonav/2.1.7/docs/wsimportant.html)或[Maven](http://jax-ws-commons.java.net/jaxws-maven-plugin/usage.html)运行以生成客户端。
3.  使用生成的客户端发出[请求](http://java.dzone.com/articles/jax-ws-hello-world)（请参阅开发 WebService 客户端部分）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:47:52.703

使用流行的 Web 服务框架之一（Axis 或 CXF 或其他）并让它为您自动生成类。有关如何在命令行上执行此操作的文档，请参见此处的示例，以及[用于](http://cxf.apache.org/docs/maven-cxf-codegen-plugin-wsdl-to-java.html)[CXF](http://cxf.apache.org/docs/wsdl-to-java.html)的相应 maven 插件。我相信，Axis 非常相似。

每当我需要示例 xml soap 消息时，我都会为服务器和客户端执行此操作，然后在客户端启动虚拟服务器，`mvn tomcat:run`并在客户端上用 Java 构建消息并让框架为我记录消息。听起来比实际更复杂，尤其是考虑到您可能需要的不仅仅是一条示例消息，而且通常最终还是要实现自己的虚拟服务器。

# javascript - 如何为这些输入字段中的每一个分配索引

> ID：12821916
> 
> 赞同：1
> 
> 时间：2012-10-10T14:32:16.957
> 
> 标签：javascript, jquery, html, textbox

是的，所以这个问题可能并不能说明我想说什么，但这就是我想要实现的目标。我在一个页面上有 6 个文本框，每个文本框都包含一个 0 到 500 之间的数字（没有限制，但我不希望这个数字高于这个数字）。这个数字取决于其他地方的计算，但与这个问题无关，所以我把它省略了。无论如何，我想做的是；

运行一个循环并在代码下方的代码中分配一个新的文本框等`scoreone, scoretwo`，根据等值的大小在 1 到 10 之间的索引。`indexone, indextwo`

因此，例如，如果`indexone`包含 15，则文本框`scoreone`将填充 0。现在这可以正常工作，但仅适用于一个文本框，因为我有六个，我不确定如何为所有文本框执行此操作（即一个接一个）。我正在使用 JavaScript 和 jQuery ......

HTML：

```
<input type="text" disabled="disabled" value="20" id="indexone" />
<input type="text" disabled="disabled" value="0" id="scoreone" /><br>

<input type="text" disabled="disabled" value="60" id="indextwo" />
<input type="text" disabled="disabled" value="0" id="scoretwo" /><br>

<input type="text" disabled="disabled" value="100" id="indexthree"/>
<input type="text" disabled="disabled" value="0" id="scorethree" /><br>

<input type="text" disabled="disabled" value="160" id="indexfour"/>
<input type="text" disabled="disabled" value="0" id="scorefoure" /><br>

<input type="text" disabled="disabled" value="180" id="indexfive"/>
<input type="text" disabled="disabled" value="0" id="scorefive" /><br>

<input type="text" disabled="disabled" value="210" id="indexsix"/>
<input type="text" disabled="disabled" value="0" id="scoresix" /><br> 
```

JS：

```
var indexArray = [indexone, indextwo, indexthree, indexfour, indexfive, indexsix];

for (var i = 0; i < indexArray.length; i++) {
    if ((indexArray[i] >= 0) && (indexArray[i] < 25)) {
        scoreone = parseInt(1);
        $('#scoreone').val(scoreone);
    }
    else if ((indexArray[i] >= 25) && (indexArray[i] < 50)) {
        scoreone = parseInt(2);
        $('#scoreone').val(scoreone);
    }
    else if ((indexArray[i] >= 50) && (indexArray[i] < 75)) {
        scoreone = parseInt(3);
        $('#scoreone').val(scoreone);
    }
    else if ((indexArray[i] >= 75) && (indexArray[i] < 100)) {
        scoreone = parseInt(4);
        $('#scoreone').val(scoreone);
    }
    else if ((indexArray[i] >= 100) && (indexArray[i] < 125)) {
        scoreone = parseInt(5);
        $('#scoreone').val(scoreone);
    }
    else if ((indexArray[i] >= 125) && (indexArray[i] < 150)) {
        scoreone = parseInt(6);
        $('#scoreone').val(scoreone);
    }
    else if ((indexArray[i] >= 150) && (indexArray[i] < 175)) {
        scoreone = parseInt(7);
        $('#scoreone').val(scoreone);
    }
    else if ((indexArray[i] >= 175) && (indexArray[i] < 200)) {
        scoreone = parseInt(8);
        $('#scoreone').val(scoreone);
    }
    else if ((indexArray[i] >= 200) && (indexArray[i] <= 225)) {
        scoreone = parseInt(9);
        $('#scoreone').val(scoreone);
    }
    else if (indexArray[i] > 225) {
        scoreone = parseInt(10);
        $('#scoreone').val(scoreone);
    }

} 
```

我也把我想做的事情放在了[这里](http://jsfiddle.net/wthFv/3/)......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:40:02.063

只需使用类并循环

**HTML**

```
<input type="text" disabled="disabled" value="20" class="index" />
<input type="text" disabled="disabled" value="0" class="score" /><br>

<input type="text" disabled="disabled" value="60" class="index" />
<input type="text" disabled="disabled" value="0" class="score" /><br>

<input type="text" disabled="disabled" value="100" class="index"/>
<input type="text" disabled="disabled" value="0" class="score" /><br>

<input type="text" disabled="disabled" value="160" class="index"/>
<input type="text" disabled="disabled" value="0" class="score" /><br>

<input type="text" disabled="disabled" value="180" class="index"/>
<input type="text" disabled="disabled" value="0" class="score" /><br>

<input type="text" disabled="disabled" value="210" class="index"/>
<input type="text" disabled="disabled" value="0" class="score" /><br>​ 
```

**JavaScript**

```
//That whole if/else if statement reduced to a calculation
function getValue(val){
    var number = (Math.round(val/100*4)/4)*100/25;
    if (number>10) {
        number = 10;
    }        
    return number;
}

//Find all of the indexes and scores, returned in document order
var indexes = $(".index");
var scores = $(".score");

//loop through indexes and set the value on the corresponding score
indexes.each(function(ind) {
    var index = jQuery(this);
    var score = scores.eq(ind);
    var value = getValue(index.val());
    score.val(value);
}); 
```

[运行示例](http://jsfiddle.net/faGQG/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:47:43.870

试试这个工作示例，女巫改变了整数的单词：

[jsfiddle](http://jsfiddle.net/wthFv/7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:38:32.557

试试这个[http://jsfiddle.net/wthFv/5/](http://jsfiddle.net/wthFv/5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T14:46:15.183

希望这可以简化：

更新字段的 ID 以使用索引号作为后缀，如`score1`, `score2`.. 和`index1`, `index2`...

然后编写一个紧凑的 java 函数，如下所示：

```
 for (var i = 1; i <= 6; i++) {
    $('#score'+i).val(Math.ceil($('#index'+i).val()/25));
  } 
```

如果您不想更改 ID，我认为下面应该可以。

```
var indexArray = [indexone, indextwo, indexthree, indexfour, indexfive, indexsix];
var scoreArray = [scoreone, scoretwo, scorethree, scorefour, scorefive, scoresix];

 for (var i = 0; i < indexArray.length; i++) {
    $('#'+scoreArray[i]).val(Math.ceil($('#'+indexArray[i]).val()/25));
  } 
```

# zedgraph - 如何创建 ZedGraph 静态标签

> ID：12821926
> 
> 赞同：5
> 
> 时间：2012-10-10T14:32:51.567
> 
> 标签：zedgraph

我想在图表的右下角添加一个**徽标**或我的软件**名称。**我使用了TextObj，但问题是它的位置通过鼠标滚轮改变图形比例来改变。我应该使用另一个对象，但我不知道它是什么。请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T16:42:27.277

这是一个简单的解决方案：

```
private void Form1_Load(object sender, EventArgs e)
{
     GraphPane pane = zedGraphControl1.GraphPane;
     var text = new TextObj("Your Comapany Name Ltd.",(0.6)*(pane.XAxis.Scale.Max), 1.1, CoordType.ChartFraction, AlignH.Left, AlignV.Top);
     text.ZOrder = ZOrder.D_BehindAxis;
     pane.GraphObjList.Add(text);            
     zedGraphControl1.Refresh();
 } 
```

更改 x & y 值以定位公司名称。

![在此处输入图像描述](../Images/262aaea97881337e5e85dd092fc6cfcd.png)

**编辑：**

您只需要用图像对象替换文本对象，它是：

```
private void Form1_Load(object sender, EventArgs e)
{
     GraphPane pane = zedGraphControl1.GraphPane;            
     Image img = Image.FromFile(@"C:\i.jpg");
     var logo = new ImageObj(img, new RectangleF(0.8f, 1.1f, 0.08f, 0.1f), CoordType.ChartFraction, AlignH.Left, AlignV.Top);             
     pane.GraphObjList.Add(logo);
     zedGraphControl1.Refresh();
 } 
```

![在此处输入图像描述](../Images/029628d5528fb055ca7d24962adcf915.png)

# iphone - iOS - 推送通知对话框从哪里引用应用程序名称

> ID：12821931
> 
> 赞同：1
> 
> 时间：2012-10-10T14:33:11.470
> 
> 标签：iphone, ios, apple-push-notifications

我想更改打印在提示用户接收推送通知的对话框上的应用程序名称 - “Myapp 想向您发送推送通知”。我想将 Myapp 更改为其他内容。我尝试更改我的项目名称，但没有成功。这个名字是从哪里引用的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:11:17.747

也许您需要检查 Info.plist 上的 Bundle 显示名称。

# python - 如何在 django 中修复 NoReverseMatch？

> ID：12821933
> 
> 赞同：0
> 
> 时间：2012-10-10T14:33:17.937
> 
> 标签：python, django, templates, view, django-urls

在页面上运行 django 应用程序时出现以下错误

`"partner/buzzfeed/": NoReverseMatch at /partner/BuzzFeed/ Reverse for 'video_player' with arguments '('BuzzFeed', 'fXkqhhIlOtA', 'NY Yankees: 6 Essential Pieces of Postseason Memorabilia')' and keyword arguments '{}' not found.`

看起来正确的变量是从模板传递的，但没有与 url 正确匹配（我认为）。关于如何解决它的任何建议？

# 视图.py

```
def partner_channel(request,partner_name):
    file = urllib2.urlopen('http://gdata.youtube.com/feeds/api/users/'+partner_name+'/uploads?v=2&max-results=50')
    data = file.read()
    file.close()        
    root = etree.fromstring(data)       
    entries = root.findall('{http://www.w3.org/2005/Atom}entry')        
    feed=[]
    i=0 #for feed list tracking
    for entry in entries:
        #find media:group
        media = entry.find('{http://search.yahoo.com/mrss/}group')      
        #get description, title, thumbnail
        desc = media.find('{http://search.yahoo.com/mrss/}description').text
        title = media.find('{http://search.yahoo.com/mrss/}title').text
        thumbnail = media.find('{http://search.yahoo.com/mrss/}thumbnail[2]').attrib.get("url")
        video = media.find('{http://gdata.youtube.com/schemas/2007}videoid').text
        author = entry.find('{http://www.w3.org/2005/Atom}author').find('{http://www.w3.org/2005/Atom}name').text
        feed.append([i,title, desc, thumbnail, video, author, url])     
        i=i+1       
    return render_to_response('reserve/templates/partner.html', {'feed':feed},
        context_instance=RequestContext(request))

def video_player(request,author,video,title):   
    return render_to_response('reserve/templates/video_player.html', {'author':author, 'video':video, 'title':title},
        context_instance=RequestContext(request)) 
```

# 模板

```
{% for video in feed %}    
    <a href="{% url video_player feed.1.5 video.4 video.1   %}" >Link</a>
{% endfor %} 
```

# 网址.py

```
urlpatterns = patterns('reserve.views',
    url(r'^partner/(?P<partner_name>[-\w]+)/$', 'partner_channel'),
    url(r'^partner/(?P<author>[-\w]+)/(?P<video>[-\w]+)/(?P<video_title>[-\w]+)/$', 'video_player'),
    url(r'^partner/(?P<author>[-\w]+)/(?P<video>\w+)/(?P<title>\w+)/$', 'video_player'),
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:44:29.793

您可以执行以下两项操作之一：

在模板中，更改

`{% url video_player feed.1.5 video.4 video.1 %}`

到

`{% url reserve.views.video_player feed.1.5 video.4 video.1 %}`

或者：

为网址添加名称：

`url(r'^partner/(?P<author>[-\w]+)/(?P<video>[-\w]+)/(?P<video_title>[-\w]+)/$', 'video_player', name="video-player"),`

并将模板调用更改为

`{% url video-player feed.1.5 video.4 video.1 %}`

# mysql - Mysql实现及多字段效率查询

> ID：12821936
> 
> 赞同：1
> 
> 时间：2012-10-10T14:33:30.303
> 
> 标签：mysql, performance, algorithm, indexing

我想通过 MySQL 中的两个字段搜索表：

```
select * from table where  
90 < x and x < 100 and 
50 < y and y < 60 
```

如果优化，这个搜索的效率是多少？O(log(n))？

它会实现什么类型的索引和算法？（如果使用标准 B-tree 或哈希映射，我是否正确地说它将是 O(n.log(n))？）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:40:41.687

MySQL 中的复杂性通常是不可预测的，以至于用 Big-O 表示法来表达它几乎没有意义。在这种情况下，关于算法性能的计算机科学类型理论完全分崩离析。

最大的问题是 I/O 开销，一旦您需要进行任何类型的磁盘访问，就无法知道该操作需要多长时间。它可能是几毫秒，也可能是几秒钟，具体取决于系统的负载情况。

通常，您应该进行基准测试以确定您的特定系统和配置的性能特征，即使那样它也只能给您一个想法。

这些 Big-O 算法只有在整个工作集都在内存中并且所有相关数据的访问时间一致时才有意义。

# objective-c - 带有 NSDictionary 定义的程序中的流浪 @

> ID：12821938
> 
> 赞同：4
> 
> 时间：2012-10-10T14:33:33.310
> 
> 标签：objective-c, ios

在在线遵循howto的过程中，我遇到了以下代码：

```
NSDictionary *address = @{
  (NSString *)kABPersonAddressStreetKey: _address.text,
  (NSString *)kABPersonAddressCityKey: _city.text,
  (NSString *)kABPersonAddressStateKey: _state.text,
  (NSString *)kABPersonAddressZIPKey: _zip.text
}; 
```

这不会在 XCode 4.5.1 中编译。我收到两个错误：

1.  程序中的杂散“@”
2.  ':' 标记之前应为 '}'

我在这里想念什么？另外，我在哪里可以找到关于 NSDictionary 对象的快捷方式声明的文档？谷歌这样的语法非常困难。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T14:36:34.307

它是现代客观 c 的一部分，被称为客观 c litterals。这段代码应该运行良好，也许您正在使用旧编译器，请确保您使用的是最后一个编译器（当前为 LLVM 4.1）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T14:45:48.710

这是自 LLVM 4.0 以来引入的[Obj-C Literals的一部分。](http://clang.llvm.org/docs/ObjectiveCLiterals.html)确保您也使用正确版本的 iOS。翻译成原始的 pre-llvm 4.0 语言，NSDictionary 分配看起来像这样：

```
NSDictionary *address = [[NSDictionary alloc] initWithObjectsAndKeys:
                        (NSString *)kABPersonAddressStreetKey, _address.text, 
                        (NSString *)kABPersonAddressCityKey, _city.text,  
                        (NSString *)kABPersonAddressStateKey, _state.text, 
                        (NSString *)kABPersonAddressZIPKey, _zip.text, 
                        nil]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T14:37:04.270

@ 声明是一个 Objective-C 文字。链接到信息：

[Objective-C 文字](http://clang.llvm.org/docs/ObjectiveCLiterals.html)

# android - 如何在android中接收器sms delevery报告时将代码传递给广播接收器

> ID：12821943
> 
> 赞同：2
> 
> 时间：2012-10-10T14:33:43.547
> 
> 标签：android, sms

我想开发一个短信应用程序，它可以一次发送多条短信。我想为 SMS 设置一个 ID。在 SMS SENT 报告中，我想获取此 ID。所以，我会知道已经发送了一条特定的消息。

我已经添加了广播接收器。我也收到 SMS SENT 报告。

例如：我发送了 10 条短信，收到了 8 条短信发送报告。我怎样才能知道哪些 2 条消息没有发送，以便我可以重新发送它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:33:12.800

对于您发送的每条 SMS（或部分 SMS），您提供一个 PendingIntent。在该 PendingIntent 中，您放置了一个 Intent，无论 SMS（或部分）是否成功发送，您都会收到该 Intent。在这个 Intent 中，您可以使用 extras 来添加额外的信息。因此，例如，在发送消息时，代码可能如下所示......

```
String receiverCodeForThisMessage = "STRING_CODE_FOR_MY_SMS_OUTCOME_RECEIVER";
int uniqueCodeForThisPartOfThisSMS = 100*numberSMSsentSoFar+PartNumberOfThisSMSpart;

Intent intent = new Intent(receiverCodeForThisMessage);
intent.putExtra("TagIdentifyIngPieceOfInformationOne", piece1);
intent.putExtra("TagIdentifyIngPieceOfInformationTwo", piece2);

PendingIntent pendingIntent = PendingIntent.getBroadcast(this, uniqueCodeForThisPartOfThisSMS, intent, 0);

SmsManager sms = SmsManager.getDefault();
sms.sendTextMessage("phonenumber", "Fred Bloggs", "Hello!", pendingIntent, null); 
```

但在此之前，您将注册一个接收器，该接收器将获得您设置的结果和意图；从那个意图你提取信息片段：

```
registerReceiver(new BroadcastReceiver(){

    @Override
    public void onReceive(Context context, Intent intent) {
        // Get information about this message
        int piece1 = intent.getIntExtra("TagIdentifyIngPieceOfInformationOne", -1);
        int piece2 = intent.getIntExtra("TagIdentifyIngPieceOfInformationTwo", -1);

        if (getResultCode() == Activity.RESULT_OK) {
            // success code
        }
        else {
            // failure code
        }
}, new IntentFilter(receiverCodeForThisMessage)); 
```

# python - 如何从配置文件中删除白色字符？

> ID：12821946
> 
> 赞同：3
> 
> 时间：2012-10-10T14:33:57.773
> 
> 标签：python, configparser

我想使用 python 修改 samba 配置文件。这是我的代码

```
from ConfigParser import SafeConfigParser
parser = SafeConfigParser()
parser.read( '/etc/samba/smb.conf' )

for section in parser.sections():
    print section
    for name, value in parser.items( section ):
        print '  %s = %r' % ( name, value ) 
```

但是配置文件包含选项卡，是否有可能忽略选项卡？

```
ConfigParser.ParsingError: File contains parsing errors: /etc/samba/smb.conf
    [line 38]: '\tworkgroup = WORKGROUP\n' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T14:43:35.143

试试这个：

```
from StringIO import StringIO

data = StringIO('\n'.join(line.strip() for line in open('/etc/samba/smb.conf')))

parser = SafeConfigParser()
parser.readfp(data)
... 
```

另一种方式（感谢@mgilson 的想法）：

```
class stripfile(file):
    def readline(self):
        return super(FileStripper, self).readline().strip()

parser = SafeConfigParser()
with stripfile('/path/to/file') as f:
    parser.readfp(f) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T14:49:47.117

我会创建一个小的代理类来提供解析器：

```
class FileStripper(object):
    def __init__(self,f):
        self.fileobj = open(f)
        self.data = ( x.strip() for x in self.fileobj )
    def readline(self):
        return next(self.data)
    def close(self):
        self.fileobj.close()

parser = SafeConfigParser()
f = FileStripper(yourconfigfile)
parser.readfp(f)
f.close() 
```

您甚至可以做得更好（允许多个文件，完成后自动关闭等）：

```
class FileStripper(object):
    def __init__(self,*fnames):
        def _line_yielder(filenames):
            for fname in filenames:
                with open(fname) as f:
                     for line in f:
                         yield line.strip()
        self.data = _line_yielder(fnames)

    def readline(self):
        return next(self.data) 
```

它可以这样使用：

```
parser = SafeConfigParser()
parser.readfp( FileStripper(yourconfigfile1,yourconfigfile2) )
#parser.readfp( FileStripper(yourconfigfile) ) #this would work too
#No need to close anything :).  Horray Context managers! 
```

# javascript - HTML5 画布 lineWidth 被忽略

> ID：12821947
> 
> 赞同：0
> 
> 时间：2012-10-10T14:34:02.523
> 
> 标签：javascript, html, canvas, html5-canvas

我正在画布上写文本，并尝试在其周围添加某种边框，该边框应根据文本大小动态调整大小。

我的代码是：

```
<script>
var mainText='this is a test';
var mainTextSize=40;
var mainTextDimensions=getTextDimensions(mainText,mainTextSize,'verdana');

var smallStampCanvas=document.createElement("canvas");
smallStampCanvas.width=mainTextDimensions.width;
smallStampCanvas.height=totalHeight;
var smallStampContext=smallStampCanvas.getContext('2d');
smallStampContext.textBaseline='top';

smallStampContext.fillStyle = '#FF0000'; 
smallStampContext.strokeStyle = smallStampContext.fillStyle;

smallStampContext.font = "bold "+mainTextSize+"px verdana";
smallStampContext.fillText(
    mainText,
    0,
    0
);

smallStampContext.strokeRect(0,0,smallStampCanvas.width,smallStampCanvas.height);
smallStampContext.strokeRect(0,0,smallStampCanvas.width,mainTextDimensions.height);
smallStampContext.lineWidth=Math.ceil(mainTextSize/4);
smallStampContext.moveTo(0,mainTextDimensions.height); smallStampContext.lineTo(smallStampCanvas.width,mainTextDimensions.height);
</script> 
```

除了线宽外，一切正常。无论输入什么值，它似乎都没有任何效果。（行总是 1px）当记录它时，输入一个整数 10。

任何人都知道可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:51:31.093

试试这个：

```
smallStampContext.beginPath();
smallStampContext.lineWidth=Math.ceil(mainTextSize/4);
smallStampContext.moveTo(0,mainTextDimensions.height); 
smallStampContext.lineTo(smallStampCanvas.width,mainTextDimensions.height);
smallStampContext.stroke(); 
```

`moveTo`并且`lineTo`不要画“线”。仅`stroke`实际创建线。

# git - Git 总是在分支开关处合并

> ID：12821952
> 
> 赞同：1
> 
> 时间：2012-10-10T14:34:13.403
> 
> 标签：git

我试着做一个`git branch testbranch`，在这个结帐之后`git checkout testbranch`。然后我编辑了一个文件，例如“README”。

现在我试图切换回“master”分支，它总是会产生一个`merge`而不是只抱怨我有未提交的文件。

那么这是为什么呢？我以为我会得到一个错误，比如......

> 错误：您对“X”进行了本地更改；不能切换分支。

这么久，谢谢你所有的鱼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:39:26.840

this issue occurs on me.

Actually, it's not a big deal.

Condition 1: git give you an error:

```
error: Your local changes to the following files would be overwritten by checkout:
    README
Please, commit your changes or stash them before you can switch branches.
Aborting 
```

Condition 2: git gives you this:

```
M       README
Switched to branch 'master' 
```

But, when does Condition 1 occur? or Condition 2?

Condition 1: there is a conflict of changing in README between master branch and testbranch.

Condition 2: it's ok for changing of README in master branch, so the changing occurs in master branch.

So no matter whether it is Condition 1 or 2, it's ok for you to use git because git is smart.

That's my point, i know you got it.

Good luck.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:52:57.520

如果您的更改兼容（快进），git 不会抱怨并会保留修改后的版本。Git 只会假设您在错误的分支上编辑了文件，并想回到正确的分支。

不过，这不是合并：如果文件都被修改，git 将遵守。

合并只能在提交级别完成，而不是在文件级别。

# c++ - 构造函数中的“类”是什么意思？

> ID：12821956
> 
> 赞同：5
> 
> 时间：2012-10-10T14:34:32.243
> 
> 标签：c++, class, constructor

我看到了这个构造函数：

```
MyClass(class MyOtherClass* = 0) {} 
```

`class`关键字是什么意思？构造函数是否采用`MyOtherClass`指针并将参数默认为空指针？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-10T14:35:45.680

这是一个前向声明。`MyOtherClass`在此上下文中使用之前不必定义，因此前向声明就足够了。`=0`是参数的默认值。

不需要完整定义的案例的脑筋急转弯：

*   成员指针
*   成员参考
*   方法参数类型
*   方法返回类型

比较以下内容：

```
//MyClass.h
class MyClass
{
    MyClass(MyOtherClass* = 0) {} //doesn't compile
                                  //doesn't know what MyOtherClass is
};

//MyClass.h
class MyClass
{
    MyClass(class MyOtherClass* = 0) {} //compiles, MyOtherClass is declared
};

//MyClass.h
class MyOtherClass;   //declare MyOtherClass
class MyClass
{
    MyClass(MyOtherClass* = 0) {} //compiles, declaration available
}; 
```

# python - seek() Python 中 zip 文件中的文件而不将其传递到内存

> ID：12821961
> 
> 赞同：9
> 
> 时间：2012-10-10T14:34:50.487
> 
> 标签：python, zip, zipfile, seek

有没有办法在 Python 中创建一个 zip 文件中的文件而不将其读入内存？

我尝试了明显的过程，但由于文件不可搜索而出现错误：

```
In [74]: inputZipFile = zipfile.ZipFile("linear_g_LAN2A_F_3keV_1MeV_30_small.zip", 'r')

In [76]: inputCSVFile = inputZipFile.open(inputZipFile.namelist()[0], 'r')   

In [77]: inputCSVFile
Out[77]: <zipfile.ZipExtFile at 0x102f5fad0>

In [78]: inputCSVFile.se
inputCSVFile.seek      inputCSVFile.seekable  

In [78]: inputCSVFile.seek(0)
---------------------------------------------------------------------------
UnsupportedOperation                      Traceback (most recent call last)
<ipython-input-78-f1f9795b3d55> in <module>()
----> 1 inputCSVFile.seek(0)

UnsupportedOperation: seek 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-10T14:48:39.120

无法对所有 zip 文件执行此操作。DEFLATE 是一种流压缩算法，这意味着如果不解压缩之前的所有内容，就无法解压缩文件的任意部分。它*可能*会针对已存储的文件实现，但随后您会处于不利的位置，其中一些条目可查找而其他条目不可查找。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-14T15:01:43.133

ZipExtFile 现在是可搜索的：

[https://bugs.python.org/issue22908](https://bugs.python.org/issue22908) [https://github.com/python/cpython/commit/066df4fd454d6ff9be66e80b2a65995b10af174f](https://github.com/python/cpython/commit/066df4fd454d6ff9be66e80b2a65995b10af174f)

# backbone.js - Backbone.js 事件系统（模型和集合）

> ID：12821975
> 
> 赞同：1
> 
> 时间：2012-10-10T14:35:36.953
> 
> 标签：backbone.js

在 Backbone.js (0.9.2) 我有以下内容：

一个集合和一个方法，当事情发生变化时被调用

```
this.collection.on("change", this.methodOne, this); 
```

当我更改此集合的一个模型的值时...

```
model.set("value1", "abc"); 
```

...从模型 BUBBLES UP 到集合的更改事件，因此调用了“methodOne”。

当我查看 Backbone.js 的源代码时，“collection”，方法“add”，调用了一个私有方法“_prepareModel”，它使模型 - 集合引用：

```
model.collection = this; 
```

但从那时起，我不明白这种起泡机制是如何以及以何种方式运作的？

有没有人给我这方面的信息？

提前非常感谢！

沃尔夫冈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:40:55.847

看看`Backbone.Collection` `_onModelEvent`方法。[在文档中](http://backbonejs.org/docs/backbone.html)：

*每次集合中的模型触发事件时调用的内部方法。当模型更改 ID 时，集合需要更新其索引。所有其他事件只是通过代理。源自其他集合的“添加”和“删除”事件将被忽略。*

# xmpp - 如何将带有订阅的名册添加到某人 jid？

> ID：12821986
> 
> 赞同：0
> 
> 时间：2012-10-10T14:36:07.390
> 
> 标签：xmpp, ejabberd

我有一个社交网站，我决定使用 XMPP。所以我将 ejabberd 安装为 XMPP Serve 并使用 Jaxl lib for php 来处理 ejabberd。
对于客户，我也使用 Strophe 发送和接收节。
我的问题是我已经有一个在 ejabberd 服务器上不存在的朋友列表，所以我想通过订阅将项目添加到某个 jid 的名册中 我不想使用 ejabberdctl 所以 adhoc 和 xmlrpc 和 mod_* 使用命令执行不合适，我想只用节来做。有没有办法使用管理员帐户（jid）来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T09:15:34.643

您可以将 ejabberd 与 mysql 绑定并使用`mod_roster_odbc`，因此您的所有名册项目都存储在`rosterusers`表中。

您可以直接在此表中插入您的花名册项目。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-11T15:06:14.657

> 我不想使用 ejabberdctl 所以 adhoc 和 xmlrpc 和 mod_* 使用命令执行不合适，我想只用节来做。

如果您不想使用可用的接口，您将需要编写一个自定义模块来根据需要使用自定义节来执行此操作。

# php - ZendX_JQuery Datepicker 没有显示在焦点上；JavaScript 控制台说 Uncaught TypeError: Cannot read property 'guid' or undefined

> ID：12821987
> 
> 赞同：1
> 
> 时间：2012-10-10T14:36:10.113
> 
> 标签：php, jquery-ui, zend-framework, zend-form, zendx

我正在用 jQuery Datepicker 开发一个日历。我使用 ZendX_Jquery 调用的所有其他方法都很好，除非我调用 Datepicker。这是我在 JS 控制台上的错误：`TypeError: Cannot read property 'guid' or undefined`.

以下是我创建字段的方法：

```
private function setDiveDate(){
   $element = new ZendX_JQuery_Form_Element_DatePicker("data");
   $element->setJQueryParam("changeMonth", true)
           ->setJQueryParam("changeYear", true)
           ->setJQueryParam('dateFormat', 'dd/mm/yy')
           ->setJQueryParam('showOn', 'button')
           ->setDescription("Select the dive date")
           ->setLabel('Dive Date')
           ->addValidator(new Zend_Validate_Date(
               array('locale', $this->locale)
               ));
   $this->addElement($element);
   return $this;
} 
```

# android - Android - 在 XML（字符串数组）文件中搜索项目

> ID：12821989
> 
> 赞同：2
> 
> 时间：2012-10-10T14:36:17.673
> 
> 标签：android, xml, arrays, string, search

我想做一些搜索 XML 文件的东西，以查看用户输入的字符串是否存在。我的 XML 文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<resources><string-array name="dict_nl_array" ><item>ADHD</item><item>ADSL</item><item>AMvB</item><item>AOV</item><item>AOW</item><item>uniteit</item></string-array></resources> 
```

唯一的区别是我的 XML 大约是这个的 500 倍。我尝试直接加载arraylist（xml），但随后出现此错误：

> 添加到 JNI 本地引用表失败（有 512 个条目）

这似乎是合乎逻辑的，因为它是一个巨大的项目列表。 **所以，我在想，我可以搜索那个 XML 文件，而不必完全加载它吗？**

当然，欢迎提出其他建议！（如果可能的话，举个例子，我将不胜感激！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-05T10:38:46.610

迟到的答案，但它可能会帮助其他人解决这个问题！

基于[这个问题](https://stackoverflow.com/questions/20479136/failed-adding-to-jni-local-ref-table-has-512-entries-when-add-resources-to-arr)，您可以通过将资源编码为 a`string`而不是 a来避免此错误`string-array`。

```
<string name="array">ADHD#ADSL#AOV#AOW</string> 
```

`#`字符分隔条目。要加快重新格式化，只需查找/替换`</item><item>`为`#`. 然后你可以将字符串解析成一个数组，如下所示：

```
myStringArray = getResources().getString(R.id.array).split("#"); 
```

希望这可以帮助！

# objective-c - 现代 Objective-C 约定真的没有任何不是属性的 ivars 吗？

> ID：12821995
> 
> 赞同：4
> 
> 时间：2012-10-10T14:36:36.783
> 
> 标签：objective-c, ios, properties

> **可能重复：**
> [iOS：每个 iVar 都必须真的是财产吗？](https://stackoverflow.com/questions/5031230/ios-must-every-ivar-really-be-property)

我刚读过一本书，它说现代惯例根本不在你的 .h 文件中的花括号之间声明任何 ivars，而是让所有东西都成为属性。

我想确保即使在微不足道的情况下也是如此。我正在上课，其中有一个名为“recording”的 BOOL，它表示设备当前是否正在录制一些视频。这不是其他类需要的东西，我倾向于将它作为 BOOL 放在标题中，然后在需要它的 2 个位置的 .m 文件中引用它。

但是，我也想以公认的、正确的方式做事。但我不明白为什么我把它设为公共财产？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T14:40:44.677

你读的是错误的，简单明了。

现代惯例是当存在可以合成它们的相应属性时跳过 ivars。此外，使用最新版本的 LLVM，可以将您的 ivars 移动到您的实现文件（正如@DrummerB 已经提到的），以便标头不包含 ivars。这被认为是一种很好的做法，因为它不会暴露类的内部工作。

但是根本就没有 ivars 并且对所有曾经是 ivar 的东西都有一个属性吗？不，不是普通的 Objective-C。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T14:38:35.690

你的书是对的（也是错的）。不要再在标题中声明 ivars。仅出于兼容性原因才支持此功能。但也不要为私有变量声明属性。

如果您想声明其他类不需要使用的私有 ivar，请在您的实现文件中声明它们：

```
// MyClass.m
@implementation {
    BOOL recording;
}

// methods

@end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T14:41:35.517

我建议根本不要使用 ivar。相反，您可以创建一个类扩展，您将在其中声明必须隐藏的属性：

```
@interface MyClass ()

@property (nonatomic, assign) BOOL recording;

@end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T14:40:57.453

你可以使用类似的东西

```
@interface G4AppDelegate ()

@property (nonatomic, assign) BOOL recording;

@end 
```

制作“内部”属性。

或者作为其他答案状态，在您的实施中使用 iVar

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T14:53:00.923

有些书解释说你应该只使用 getter 和 setter 来访问你的 ivar，即使它们是私有的。这对我来说有点太精神病了。

在 clang 之前，您应该必须在类上创建类别并使用合成器将您的 ivar 设为私有。像这样：

```
@interface AppDelegate ()
@property(nonatomic, assign)int aValue;
@end 
```

// + @implement AppDelegate // @synthetise aValue;

这可能很烦人，因为有时你需要一些简单的 ivar，没有任何 getter/setter 控制。而且你在不需要的地方添加代码。

现在使用 clang，您可以将您的 ivar 直接放在您的代码中的实现文件中，如下所示：

```
@interface AppDelegate (){
  int _aValue;
}
@end 
```

而且您将私有 ivar 隐藏在标头范围之外。注意，你不能用 gcc 编译它。

# c# - LogonUser 函数在 c# 中失败，错误代码为 0

> ID：12821996
> 
> 赞同：0
> 
> 时间：2012-10-10T14:36:37.923
> 
> 标签：c#, .net, windows-identity, impersonation

我的目标是用 c# 将文件夹从我的系统复制到远程计算机。我到处搜索，找到了一些关于如何做到这一点的信息。我正在使用域、用户名和密码调用 LogonUser 函数，但它失败并返回 0。

下面是我的一段代码。你能帮我找出问题所在吗？

```
class Program
{
    #region Assembly Functions
    [DllImport("advapi32.dll")]
    public static extern bool LogonUser(string lpszUsername, string lpszDomain, string lpszPassword,
        int dwLogonType, int dwLogonProvider, out SafeTokenHandle phToken);

    [DllImport("kernel32.dll")]
    public static extern bool CloseHandle(IntPtr handle);
    #endregion

    static void Main(string[] args)
    {
        SafeTokenHandle safeTokenHandle;
        WindowsImpersonationContext impersonatedUser = null;
        WindowsIdentity newId;
        IntPtr tokenHandle;
        IntPtr userHandle = IntPtr.Zero;
        tokenHandle = IntPtr.Zero;

        Console.WriteLine("Enter your domain.");
        string domain = Console.ReadLine();
        Console.WriteLine("Enter you user name.");
        string uname = Console.ReadLine();
        Console.WriteLine("Enter your password (Caution, password won't be hidden).");
        string password = Console.ReadLine();

        const int LOGON32_PROVIDER_DEFAULT = 0;
        //This parameter causes LogonUser to create a primary token. 
        const int LOGON32_LOGON_INTERACTIVE = 2;
        bool logon = LogonUser(uname, domain, password,
            LOGON32_LOGON_INTERACTIVE, LOGON32_PROVIDER_DEFAULT, out safeTokenHandle);            

        if (false == logon)
        {
            int ret = Marshal.GetLastWin32Error();
            Console.WriteLine("LogonUser failed with error code : {0}", ret);
            throw new System.ComponentModel.Win32Exception(ret);
        }

        if (logon)
        {
            newId = new WindowsIdentity(safeTokenHandle.DangerousGetHandle());
            using (impersonatedUser = newId.Impersonate())
            {
                // Check the identity.
                Console.WriteLine("After impersonation: "
                    + WindowsIdentity.GetCurrent().Name);
            }
            File.Copy(@"c:\result.xml", @"C:\result.xml", true);
        }

        //Undo impersonation
        if (impersonatedUser != null)
        {
            impersonatedUser.Undo();
        }

        if (tokenHandle != IntPtr.Zero)
        {
            CloseHandle(tokenHandle);
        }
    }
}

public sealed class SafeTokenHandle : SafeHandleZeroOrMinusOneIsInvalid
{
    private SafeTokenHandle()
        : base(true)
    {
    }

    [DllImport("kernel32.dll")]
    [ReliabilityContract(Consistency.WillNotCorruptState, Cer.Success)]
    [SuppressUnmanagedCodeSecurity]
    [return: MarshalAs(UnmanagedType.Bool)]
    private static extern bool CloseHandle(IntPtr handle);

    protected override bool ReleaseHandle()
    {
        return CloseHandle(handle);
    }
} 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-10T15:10:41.467

为什么不使用“Windows API Code Pack 1.1”，它展示了（除其他外）如何使用 shell 来执行拖放操作——这实际上是您尝试做的事情。

如果使用 Shell，您不必考虑如何登录以及支持各种情况所需的 1000 件其他事情。

下载“Windows API Code Pack 1.1”包并查找 DragAndDropWindow 示例或其他一些示例。

# hibernate - GORM - 在 beforeDelete 事件中修改对象不起作用

> ID：12821997
> 
> 赞同：0
> 
> 时间：2012-10-10T14:36:43.887
> 
> 标签：hibernate, grails, grails-orm

我有这两个域类：

```
class User {
    String username
    String password

    static hasMany = [organizations: Organization]
    static belongsTo = Organization

    static constraints = {
        username blank: false, unique: true
        password blank: false
    }

    static mapping = {
        password column: '`password`'
        organizations fetch: 'join'
    }

    def beforeDelete() {
        User.withNewSession {
            this.organizations.each {
                it.removeFromMembers(this)
            }
            this.save()
        }
    }
}

class Organization {
    String name;

    static hasMany = [members: User]
} 
```

我想要实现的是我认为很清楚——我希望能够删除一个用户，但在此之前，我必须从分配给他的所有组织中删除该用户。GORM 显然不支持这一点，所以我尝试在 User 类上编写 beforeDelete 事件，该事件将在删除之前从所有组织中删除用户。问题是上面的代码不起作用，这是它抛出的异常：

```
| Error 2012-10-10 16:27:56,898 [http-bio-8080-exec-2] ERROR errors.GrailsExceptionResolver  - NonUniqueObjectException occurred when processing request: [POST] /theses-management/user/index - parameters:
id: 1
_action_delete: Delete
a different object with the same identifier value was already associated with the session: [com.redhat.theses.auth.User#1]. Stacktrace follows:
Message: a different object with the same identifier value was already associated with the session: [com.redhat.theses.auth.User#1]
    Line | Method
->>   36 | doCall             in com.redhat.theses.auth.User$_beforeDelete_closure1$$ENlS7bOi
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|     32 | beforeDelete       in com.redhat.theses.auth.User$$ENlS7bOi
|     46 | onApplicationEvent in org.grails.datastore.mapping.engine.event.AbstractPersistenceEventListener
|     93 | delete             in com.redhat.theses.auth.UserController$$ENlS7klM
|    195 | doFilter . . . . . in grails.plugin.cache.web.filter.PageFragmentCachingFilter
|     63 | doFilter           in grails.plugin.cache.web.filter.AbstractFilter
|   1110 | runWorker . . . .  in java.util.concurrent.ThreadPoolExecutor
|    603 | run                in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . . . . .  in java.lang.Thread 
```

所以我厌倦了像这样更改 beforeDelete 事件：

```
def beforeDelete() {
    User.withNewSession {
        this.organizations.each {
            it.removeFromMembers(this)
        }
        this.merge()
        this.save()
    }
} 
```

但是随后抛出了相同的异常......

另一种尝试是这样的：

```
def beforeDelete() {
    User.withNewSession {
        this.organizations.each {
            it.removeFromMembers(this)
        }
        def user = this.merge()
        user.save()
    }
} 
```

结果是这个例外：

```
| Error 2012-10-10 16:33:22,669 [http-bio-8080-exec-7] ERROR util.JDBCExceptionReporter  - Referential integrity constraint violation: "FK6BC87A0D3E1F37F9: PUBLIC.ORGANIZATION_MEMBERS FOREIGN KEY(USER_ID) REFERENCES PUBLIC.USER(ID)"; SQL statement:
delete from user where id=? and version=? [23503-164]
| Error 2012-10-10 16:33:22,673 [http-bio-8080-exec-7] ERROR events.PatchedDefaultFlushEventListener  - Could not synchronize database state with session
Message: could not delete: [com.redhat.theses.auth.User#1]
    Line | Method
->>   93 | delete    in com.redhat.theses.auth.UserController$$ENlS7klM
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    195 | doFilter  in grails.plugin.cache.web.filter.PageFragmentCachingFilter
|     63 | doFilter  in grails.plugin.cache.web.filter.AbstractFilter
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run . . . in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run       in java.lang.Thread

Caused by JdbcSQLException: Referential integrity constraint violation: "FK6BC87A0D3E1F37F9: PUBLIC.ORGANIZATION_MEMBERS FOREIGN KEY(USER_ID) REFERENCES PUBLIC.USER(ID)"; SQL statement:
delete from user where id=? and version=? [23503-164]
->>  329 | getJdbcSQLException in org.h2.message.DbException
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    169 | get       in     ''
|    146 | get . . . in     ''
|    398 | checkRow  in org.h2.constraint.ConstraintReferential
|    415 | checkRowRefTable in     ''
|    291 | checkRow  in     ''
|    862 | fireConstraints in org.h2.table.Table
|    879 | fireAfterRow in     ''
|     99 | update .  in org.h2.command.dml.Delete
|     73 | update    in org.h2.command.CommandContainer
|    226 | executeUpdate in org.h2.command.Command
|    143 | executeUpdateInternal in org.h2.jdbc.JdbcPreparedStatement
|    129 | executeUpdate in     ''
|    105 | executeUpdate in org.apache.commons.dbcp.DelegatingPreparedStatement
|     93 | delete .  in com.redhat.theses.auth.UserController$$ENlS7klM
|    195 | doFilter  in grails.plugin.cache.web.filter.PageFragmentCachingFilter
|     63 | doFilter  in grails.plugin.cache.web.filter.AbstractFilter
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run . . . in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run       in java.lang.Thread
| Error 2012-10-10 16:33:22,680 [http-bio-8080-exec-7] ERROR errors.GrailsExceptionResolver  - JdbcSQLException occurred when processing request: [POST] /theses-management/user/index - parameters:
id: 1
_action_delete: Delete
Referential integrity constraint violation: "FK6BC87A0D3E1F37F9: PUBLIC.ORGANIZATION_MEMBERS FOREIGN KEY(USER_ID) REFERENCES PUBLIC.USER(ID)"; SQL statement:
delete from user where id=? and version=? [23503-164]. Stacktrace follows:
Message: Referential integrity constraint violation: "FK6BC87A0D3E1F37F9: PUBLIC.ORGANIZATION_MEMBERS FOREIGN KEY(USER_ID) REFERENCES PUBLIC.USER(ID)"; SQL statement:
delete from user where id=? and version=? [23503-164]
    Line | Method
->>  329 | getJdbcSQLException   in org.h2.message.DbException
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    169 | get                   in     ''
|    146 | get . . . . . . . . . in     ''
|    398 | checkRow              in org.h2.constraint.ConstraintReferential
|    415 | checkRowRefTable . .  in     ''
|    291 | checkRow              in     ''
|    862 | fireConstraints . . . in org.h2.table.Table
|    879 | fireAfterRow          in     ''
|     99 | update . . . . . . .  in org.h2.command.dml.Delete
|     73 | update                in org.h2.command.CommandContainer
|    226 | executeUpdate . . . . in org.h2.command.Command
|    143 | executeUpdateInternal in org.h2.jdbc.JdbcPreparedStatement
|    129 | executeUpdate . . . . in     ''
|    105 | executeUpdate         in org.apache.commons.dbcp.DelegatingPreparedStatement
|     93 | delete . . . . . . .  in com.redhat.theses.auth.UserController$$ENlS7klM
|    195 | doFilter              in grails.plugin.cache.web.filter.PageFragmentCachingFilter
|     63 | doFilter . . . . . .  in grails.plugin.cache.web.filter.AbstractFilter
|   1110 | runWorker             in java.util.concurrent.ThreadPoolExecutor
|    603 | run . . . . . . . . . in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run                   in java.lang.Thread 
```

你知道我可能做错了什么吗？

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T08:28:56.333

I believe what's happening is that, as you are iterating over the User.organizations collection and removing each association between User/Organization, Hibernate is trying to update that same User.organizations collection (to reflect your deletion) - which prevents the association deletion, which causes your constraint violation.

I've never seen a solution for this issue that uses beforeDelete (unfortunate since it seems like the logical place for that logic), but have seen the following work-arounds:

1.  Place the logic to remove the associations in controller/service layer before the delete (again too bad beforeDelete doesn't work :( in this situation). To avoid concurrently modifying User.organizations, you can make a copy of the collection and iterate over the copy, or query for the associated Organizations, here's a sample query:

    ```
    select o from Organization o join o.members AS m where m.id=:id
    ```

2.  Make the association between User/Organization explicit, like:

    ```
    class UserOrganization {
      User user
      Organization org
    }

    class User {
      ...
      Set<Organization> getOrganizations() {
        UserOrganization.findAllByUser(this).collect{ it.org } as Set
      }
    }

    ```

If you look at the SpringSecurityCore plugin User/Authority code, there's a good example of how to manage associations explicitly.

# c# - 如何在 C# 中生成 UTC Unix 时间戳

> ID：12821998
> 
> 赞同：14
> 
> 时间：2012-10-10T14:36:44.473
> 
> 标签：c#, date, time, unix-timestamp

> **可能重复：**
> [如何将 UNIX 时间戳转换为 DateTime，反之亦然？](https://stackoverflow.com/questions/249760/how-to-convert-unix-timestamp-to-datetime-and-vice-versa)

如何在 C# 中创建 unix 时间戳？（例如 2012-10-10 14:00:00 -> 1349877600）

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-10T14:38:07.177

```
private double ConvertToTimestamp(DateTime value)
{
    //create Timespan by subtracting the value provided from
    //the Unix Epoch
    TimeSpan span = (value - new DateTime(1970, 1, 1, 0, 0, 0, 0).ToLocalTime());

    //return the total seconds (which is a UNIX timestamp)
    return (double)span.TotalSeconds;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-10T14:39:13.960

`DateTime.UtcNow - new DateTime(2012,10,10,14,0,0)).TotalSeconds`