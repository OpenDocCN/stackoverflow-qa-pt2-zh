# StackOverflow 问答 13081000-13081999

# web-services - 修复 SoapUI 中的“项目中缺少 SOAP 操作”错误

> ID：13081002
> 
> 赞同：4
> 
> 时间：2012-10-26T05:03:08.510
> 
> 标签：web-services, testing, soap, project, soapui

我正在使用 SoapUI 4.5.1 并且无法在 TestStep 下添加 TestRequest。当我尝试添加 TestRequest 时，我收到以下错误对话框。

```
 "Missing SOAP Operations in Project" 
```

谁能告诉我如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T12:00:21.817

这是您的 wsdl 的问题尝试再次添加您的 wsdl 并从头开始创建您的项目。

# hadoop - 在hadoop map reduce中更改默认分隔符

> ID：13081004
> 
> 赞同：0
> 
> 时间：2012-10-26T05:03:12.240
> 
> 标签：hadoop, mapreduce

我对这个 hadoop map reduce 概念完全陌生

好吧，我有由':::'而不是空格（“”）分隔的文件。

hadoop map reduce是否默认将空格作为分隔符。如果是这样，如何更改它以接受用户定义的分隔符。

谢谢

* * *

感谢 Praveen、100gods 和 Eric 指导我。好吧，又出现了一个问题。我将编写我的代码和错误

我想我可能做错了。所以请清除我的 conecpt

再次感谢

`enter code here`

```
package com;

import java.io.IOException;
import java.util.Iterator;
import java.util.StringTokenizer;

import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.IntWritable;
import org.apache.hadoop.io.LongWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapred.FileInputFormat;
import org.apache.hadoop.mapred.FileOutputFormat;
import org.apache.hadoop.mapred.JobClient;
import org.apache.hadoop.mapred.JobConf;
import org.apache.hadoop.mapred.KeyValueTextInputFormat;
import org.apache.hadoop.mapred.MapReduceBase;
import org.apache.hadoop.mapred.Mapper;
import org.apache.hadoop.mapred.OutputCollector;
import org.apache.hadoop.mapred.Reducer;
import org.apache.hadoop.mapred.Reporter;
import org.apache.hadoop.mapred.TextInputFormat;
import org.apache.hadoop.mapred.TextOutputFormat;

public class WordCount {

    public static class Map extends MapReduceBase implements
            Mapper<LongWritable, Text, Text, IntWritable> {
        private final static IntWritable one = new IntWritable(1);
        private Text word = new Text();

        public void map(LongWritable key, Text value,
                OutputCollector<Text, IntWritable> output, Reporter reporter)
                throws IOException {
            String line = value.toString();

            StringTokenizer tokenizer = new StringTokenizer(line);
            while (tokenizer.hasMoreTokens()) {
                word.set(tokenizer.nextToken());
                output.collect(word, one);
            }
        }
    }

    public static class Reduce extends MapReduceBase implements
            Reducer<Text, IntWritable, Text, IntWritable> {
        public void reduce(Text key, Iterator<IntWritable> values,
                OutputCollector<Text, IntWritable> output, Reporter reporter)
                throws IOException {
            int sum = 0;
            while (values.hasNext()) {
                sum += values.next().get();
            }
            output.collect(key, new IntWritable(sum));
        }
    }

    public static void main(String[] args) throws Exception {
        /*
         * JobConf conf = new JobConf(WordCount.class);
         * conf.setJobName("wordcount");
         */
        Configuration configuration = new Configuration();
        JobConf conf = new JobConf(configuration);

        conf.setOutputKeyClass(Text.class);
        conf.setOutputValueClass(IntWritable.class);

        conf.setMapperClass(Map.class);
        conf.setCombinerClass(Reduce.class);
        conf.setReducerClass(Reduce.class);

        conf.setInputFormat(KeyValueTextInputFormat.class);
        conf.set("key.value.separator.in.input.line", ":::");

        // conf.setInputFormat(TextInputFormat.class);
        conf.setOutputFormat(TextOutputFormat.class);
        // conf.set("mapreduce.input.keyvaluelinerecordreader.key.value.separator",
        // ":::");

        FileInputFormat.setInputPaths(conf, "/home/vishal/note.txt");
        FileOutputFormat.setOutputPath(conf, new Path("/home/vishal/output"));

        JobClient.runJob(conf);
    }
} 
```

以下是错误

```
12/10/30 12:23:04 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
12/10/30 12:23:04 WARN mapred.JobClient: Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.
12/10/30 12:23:04 WARN mapred.JobClient: No job jar file set.  User classes may not be found. See JobConf(Class) or JobConf#setJar(String).
12/10/30 12:23:04 WARN snappy.LoadSnappy: Snappy native library not loaded
12/10/30 12:23:04 INFO mapred.FileInputFormat: Total input paths to process : 1
12/10/30 12:23:04 INFO mapred.JobClient: Running job: job_local_0001
12/10/30 12:23:04 INFO util.ProcessTree: setsid exited with exit code 0
12/10/30 12:23:04 INFO mapred.Task:  Using ResourceCalculatorPlugin : org.apache.hadoop.util.LinuxResourceCalculatorPlugin@193722c
12/10/30 12:23:04 INFO mapred.MapTask: numReduceTasks: 1
12/10/30 12:23:04 INFO mapred.MapTask: io.sort.mb = 100
12/10/30 12:23:05 INFO mapred.MapTask: data buffer = 79691776/99614720
12/10/30 12:23:05 INFO mapred.MapTask: record buffer = 262144/327680
12/10/30 12:23:05 WARN mapred.LocalJobRunner: job_local_0001

`java.lang.ClassCastException: org.apache.hadoop.io.Text cannot be cast to org.apache.hadoop.io.LongWritable
    at com.WordCount$Map.map(WordCount.java:1)
    at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:50)
    at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:436)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:372)
    at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:212)
12/10/30 12:23:05 INFO mapred.JobClient:  map 0% reduce 0%
12/10/30 12:23:05 INFO mapred.JobClient: Job complete: job_local_0001
12/10/30 12:23:05 INFO mapred.JobClient: Counters: 0
12/10/30 12:23:05 INFO mapred.JobClient: Job Failed: NA
Exception in thread "main" java.io.IOException: Job failed!
    at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1327)
    at com.WordCount.main(WordCount.java:84) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:13:09.377

Hadoop 中用户定义的[映射函数](http://hadoop.apache.org/docs/r0.20.0/api/org/apache/hadoop/mapred/Mapper.html#map%28K1,%20V1,%20org.apache.hadoop.mapred.OutputCollector,%20org.apache.hadoop.mapred.Reporter%29)以 Key 和 Value 作为输入。对于[FileInputFormat](http://hadoop.apache.org/docs/r0.20.0/api/org/apache/hadoop/mapred/FileInputFormat.html)，键是文件中的行偏移量（通常被忽略），值是输入文件中的一行。由映射器用任何分隔符分割输入行（又名值）。否则[KeyValueTextInputFormat](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapred/KeyValueLineRecordReader.html)可以像其他查询中提到的那样使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T12:57:29.440

使用`KeyValueTextInputFormat`它允许您选择分隔符。这将允许您使用您的`Configuration`对象来设置分隔符：

`conf.set("mapreduce.input.keyvaluelinerecordreader.key.value.separator", ":::");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-29T08:50:43.867

它应该是 Text 而不是 LongWritable ，因为您正在使用`KeyValuetextInputFormat.class`

```
public static class Map extends MapReduceBase implements
            Mapper<Text, Text, Text, IntWritable> {
        private final static IntWritable one = new IntWritable(1);
        private Text word = new Text();

        public void map(Text key, Text value,
                OutputCollector<Text, IntWritable> output, Reporter reporter)
                throws IOException { 
```

采用新的 API

```
public class Map extends Mapper<Text, Text, Text, IntWritable> {
    private final static IntWritable one = new IntWritable(1);
    private Text word = new Text();

    public void map(Text key, Text value, Context context)
            throws IOException, InterruptedException { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-14T10:31:02.917

您正在使用*KeyValueTextInputFormat*并指定了分隔符。发送到地图作业的键 => 值对属于*文本*类型。

尝试将您的 Mapper 类定义更改为：

```
public static class Map extends MapReduceBase implements
        Mapper<Text, Text, Text, IntWritable> {

           .....

    public void map(Text key, Text value,
            OutputCollector<Text, IntWritable> output, Reporter reporter)
            throws IOException {
           .....
    }
} 
```

注意：您使用的是旧 API。尝试切换到新的，它简化了很多东西（例如：*OutputCollector*和*Reporter*已融合到*Context*中）。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-29T05:23:01.053

您将不得不使用旧的 Hadoop API 来使用 KeyValueTextInputFormat。以下代码将完成工作。

```
Configuration configuration=new Configuration();
JobConf conf=new JobConf(configuration);
conf.setInputFormat(KeyValueTextInputFormat.class);
conf.set("key.value.separator.in.input.line", ":::"); 
```

注意：*KeyValueTextInputFormat 已从新的 hadoop API 中删除。*

# java - java - 在linux中部署时打印图像代码不起作用 - cent-os服务器

> ID：13081007
> 
> 赞同：-1
> 
> 时间：2012-10-26T05:03:22.620
> 
> 标签：java, file, printing, centos

以下代码在 Windows 上运行时工作正常，但如果这是在服务器中部署并通过 Windows 系统访问，则会引发运行时异常“**没有可用的打印机服务。** ”。这段代码有什么问题吗，或者你能提出任何替代方案吗

```
 package com.rajsoft.CAF.APController;

 import java.io.FileInputStream;

 import javax.print.Doc;
 import javax.print.DocFlavor;
 import javax.print.DocPrintJob;
 import javax.print.PrintService;
 import javax.print.PrintServiceLookup;
 import javax.print.SimpleDoc;
 import javax.print.attribute.HashPrintRequestAttributeSet;
 import javax.print.attribute.PrintRequestAttributeSet;
 import javax.print.attribute.standard.Copies;

 public class SamplePrint {
   static public void main(String args[]) throws Exception {
     PrintRequestAttributeSet pras = new HashPrintRequestAttributeSet();
     pras.add(new Copies(1));
     PrintService pss[] =     PrintServiceLookup.lookupPrintServices(DocFlavor.INPUT_STREAM.GIF, pras);
if (pss.length == 0)
  throw new RuntimeException("No printer services available.");
PrintService ps = pss[0];
System.out.println("Printing to " + ps);
DocPrintJob job = ps.createPrintJob();
//FileInputStream fin = new FileInputStream("C:/SignImage.GIF");
 FileInputStream fin = new FileInputStream("C:/SignImages/Hyderabad.GIF");
Doc doc = new SimpleDoc(fin, DocFlavor.INPUT_STREAM.GIF, null);
job.print(doc, pras);
fin.close();
   }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T07:33:46.383

我猜它是你要求的味道。您可以使用 null 风格还是简单地调用“lookupDefaultPrintService()”并查看是否为您调用代码的环境返回了任何默认服务。

# android - scoll 时复选框状态更改的列表视图

> ID：13081012
> 
> 赞同：1
> 
> 时间：2012-10-26T05:03:59.557
> 
> 标签：android

> **可能重复：**
> [通过列表视图检查动态生成的复选框时出现问题](https://stackoverflow.com/questions/7738527/getting-an-issue-while-checking-the-dynamically-generated-checkbox-through-list)

我有带有复选框的列表视图。默认情况下，所有复选框都被选中。之后，一些复选框未选中并自动选中这些复选框。但我希望在滚动列表视图后选中这些复选框。我的代码是：

```
public class  FriendListAdapter extends BaseAdapter {

    private LayoutInflater mInflater;
    DrunkMessages friendsList;
    boolean[] checkBoxState;

    public FriendListAdapter(DrunkMessages friendsList) {
        this.friendsList = friendsList;
        if (Utility.model == null) {
            Utility.model = new FriendsGetProfilePics();
        }
        Utility.model.setListener(this);
        mInflater = LayoutInflater.from(friendsList.getBaseContext());

        checkBoxState=new boolean[jsonArray.length()];
    }

    public int getCount() {
        return jsonArray.length();
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    public View getView(final int position, View convertView, ViewGroup parent) {

            View hView = getLayoutInflater().inflate(R.layout.friendslist, null);

            ImageView profile_pic = (ImageView) hView.findViewById(R.id.profile_pic);
            TextView name = (TextView) hView.findViewById(R.id.name);

            final CheckBox checkbox=(CheckBox)hView.findViewById(R.id.checkbox);

        profile_pic.setImageBitmap(Utility.model.getImage(friendid[position], pictures[position]));
        name.setText(names[position]);

        checkbox.setOnClickListener(new View.OnClickListener() {

               public void onClick(View v) {
                if(((CheckBox)v).isChecked()){

                checkBoxState[position]=true;
                status[position]="1";

             Log.e("checked","checked");
            Log.e("Checked",status[position]);
                }
                else{
                 checkBoxState[position]=false;
                status[position]="0";

                Log.e("checked","unchecked");
             Log.e("Checked",status[position]);

                }
               }
               });

      return hView;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T06:07:20.210

convertview 可能会给你以前生成的视图，所以不要依赖它。只需将您的复选框状态存储在一个布尔数组中并进行相应的更改，这取决于 checkchangelistener 回调这里是您的代码我刚刚修改了您的代码的 getView 方法，其他一切都保持原样

```
 public View getView(final int position, View convertView, ViewGroup parent) {

                View hView = getLayoutInflater().inflate(R.layout.friendslist, null);

                ImageView profile_pic = (ImageView) hView.findViewById(R.id.profile_pic);
                TextView name = (TextView) hView.findViewById(R.id.name);

                final CheckBox checkbox=(CheckBox)hView.findViewById(R.id.checkbox);

                checkbox.setTag(new Integer(position));  
            profile_pic.setImageBitmap(Utility.model.getImage(friendid[position], pictures[position]));
            name.setText(names[position]);

            checkbox.setOnCheckedChangeListener(null);
            if(checkBoxState[position])
              checkbox.setChecked(true);
            else  
              checkbox.setChecked(false);

            checkbox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

                   public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                    Integer pos = (Integer)buttonView.getTag();     
                    if(isChecked){

                    checkBoxState[pos.intValue()]=true;
                    }
                    else{
                     checkBoxState[pos.intValue()]=false;
                    Log.e("checked","unchecked");

                    }
                   }
                   });

          return hView;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:10:41.460

在您的 getview 方法中添加以下代码

```
if(checkBoxState.length>0)
checkbox.setChecked(checkBoxState[position]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T05:12:32.060

您可以使用带有 simple_list_item_multiple_choice 属性的列表视图，而不是为复选框膨胀另一个 xml。像这样

```
 adapter = new ArrayAdapter<String> (this,android.R.layout.simple_list_item_multiple_choice,obje‌​ctOfList); 
```

# c# - 复选框OnCheckedChanged时如何从gridview获取复选框值

> ID：13081022
> 
> 赞同：1
> 
> 时间：2012-10-26T05:04:39.643
> 
> 标签：c#, asp.net, sql-server-2008

当我签入gridview 时，我想更新数据。在我从复选框中获取值但我的代码仅从数据库返回数据之前。我检查后想要当前值。

**代码隐藏：-**

```
protected void chkSelected_CheckedChanged(object sender, EventArgs e)
{
    for (int rowIndex = 0; rowIndex < GridView1.Rows.Count; rowIndex++)
    {
        if (Convert.ToString(GridView1.Rows[rowIndex].Cells[4].Text) != "")
        {
            Response.Write("true");
        }
        else
        {
            Response.Write("fasle");
        }
    }
} 
```

**设计规范：-**

```
<asp:GridView ID="GridView1" runat="server" DataSourceID="SqlDataSource1"
              CellPadding="4" GridLines="None" ForeColor="#333333" Font-Size="Smaller" 
              AutoGenerateColumns="False">
    <RowStyle BackColor="#EFF3FB" />
    <Columns>
        <asp:BoundField DataField="LevelID" HeaderText="ลำดับข้อ" ReadOnly="True" 
                        ItemStyle-Width="50"  >
        </asp:BoundField>
        <asp:BoundField DataField="LevelDesc" HeaderText="คำถาม" ReadOnly="True" 
                        ItemStyle-Width="250"  >
        </asp:BoundField>
        <asp:BoundField DataField="ChoiceID" HeaderText="ข้อย่อย" ReadOnly="True" 
                        ItemStyle-Width="50"  >
        </asp:BoundField>
        <asp:BoundField DataField="ChoiceDesc" HeaderText="คำถามย่อย" ReadOnly="True" 
                        ItemStyle-Width="400"  >
        </asp:BoundField>
        <asp:TemplateField HeaderText="ใช่">          
            <ItemTemplate>              
                <asp:CheckBox ID="chkSelected" runat="server" Checked='<%# Eval("Selected").ToString().Equals("True") %>'
                     AutoPostBack="true" OnCheckedChanged="chkSelected_CheckedChanged" CssClass="chkBox" />          
            </ItemTemplate>       
        </asp:TemplateField> 
    </Columns>
    <FooterStyle BackColor="#507CD1" ForeColor="White" Font-Bold="True" />
    <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
    <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
    <HeaderStyle BackColor="#0000CD" Font-Bold="True" ForeColor="White" />
    <EditRowStyle BackColor="#2461BF" />
    <AlternatingRowStyle BackColor="White" />
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T06:09:28.430

如下使用`GridViewRow`...您可以获取使用属性检查的复选框的当前行，`NamingContainer`如下所示...

**编辑**：- 更改标记并添加 Hiddenfield 以保存 Selected 的值，如下所示...

```
<asp:TemplateField HeaderText="ใช่">          
            <ItemTemplate>              
                <asp:CheckBox ID="chkSelected" runat="server"  Checked='<%# Eval("Selected").ToString().Equals("True") %>'
                     AutoPostBack="true" OnCheckedChanged="chkSelected_CheckedChanged" CssClass="chkBox" />     
                <asp:HiddenField ID="hiddenField1" Value='<%# Eval("Selected").ToString() %>' runat="server" />    
            </ItemTemplate>       
 </asp:TemplateField> 
```

然后你可以得到如下的隐藏域，它的价值也是如此

```
protected void chkSelected_CheckedChanged(object sender, EventArgs e)
    {
         GridViewRow row = (GridViewRow)(((CheckBox)sender).NamingContainer);
         HiddenField hdnCheck=(HiddenField)row.Cells[4].FindControl("hiddenField1");
         if (Convert.ToString(hdnCheck.Value != "")
           {
               Response.Write("true");
           }
           else
           {
               Response.Write("false");
           }

         // Edit: You can easily get Checkbox which has been checked, and do your logic
         CheckBox chkSelect=(CheckBox)sender;
         if (chkSelect.Checked)
           {
               Response.Write("true");
           }
           else
           {
               Response.Write("false");
           }    
    } 
```

# php - mysqldump 不起作用

> ID：13081024
> 
> 赞同：0
> 
> 时间：2012-10-26T05:05:04.743
> 
> 标签：php, mysqldump

我已经用下面的代码尝试了一切......在commapnd提示以及php执行中，但总是生成空的0kb文件

```
$dmp = '"C:\Program Files\EasyPHP-5.3.8.1\mysql\bin\mysqldump.exe"';

$command = $dmp. ' --opt -h '.$dbhost.' -u "'.$dbuser.'" -p "'.$dbpass.'" '.$dbname.' > "'. $backupFile. '"';
system($command); 
```

在以前的帖子中尝试了所有建议，该帖子被关闭说过于本地化或类似的东西。但是不明白为什么？？？因为我还没有得到解决方案。有人可以帮忙吗？我需要绝望地备份我的数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:27:07.763

我已经在 Windows 上的 localhost 主机中尝试过这个命令，比如

```
c:\wamp\bin\mysql\mysql5.5.20\bin>mysqldump --user=root --password=password test > d:\testing.sql

//--user=DBUserName
//--password=DBPassword 
```

然后像我给出的那样您的数据库名称`test`并确保正确的符号`>`，然后是您要保存数据库的数据库名称的位置。试试这个希望这对你有帮助。

# c# - 如何使用使方法返回任意结构 C#中的魔法？

> ID：13081027
> 
> 赞同：1
> 
> 时间：2012-10-26T05:05:07.473
> 
> 标签：c#

标题总结了它。我希望能够打电话

```
Foo f = getStruct<Foo>(..) 
```

并让该方法创建一个新的 Foo 对象（它将是一个结构），填充它并返回它？

另外，<T>类型的构造函数叫什么？我的谷歌搜索失败了，因为我确定我应该搜索什么..

此外，我知道所有可以创建的结构都有一个 .raw 字段。我希望能够填充该 .raw 字段。

这基本上就是我想要做的。

```
 public T getStruct<T>(UInt32 sector) {
        <T> foo = new <T>;

        for (int i=0; i<100; i++) foo.raw[i]=0;
        return foo;
    } 
```

结构的形式为

```
 StructLayout(LayoutKind.Explicit)]
  public unsafe struct RunBlock_t {
    [System.Runtime.InteropServices.FieldOffset(0)]  public fixed byte raw[512];
    [System.Runtime.InteropServices.FieldOffset(0)]  public UInt16 run_id;
    [System.Runtime.InteropServices.FieldOffset(2)]  public UInt16 magic;
    [System.Runtime.InteropServices.FieldOffset(510)]  public UInt16 checksum;
  } 
```

该函数将 .raw 指针和扇区传递给另一个函数，该函数从磁盘加载该扇区，然后逐字节将内容复制回 .raw

通过这种方式，我可以创建一个任意结构并快速简单地从磁盘填充它。我知道这对 C# 不是很友好，但是还有其他外部依赖项需要它。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T05:11:05.663

我不知道这是否是您正在寻找的，但您可以制作这样的通用方法：

```
public static T GetStruct<T>() where T : struct //if T has to be struct
{
    return new T();
    //or return Activator.CreateInstance<T>();
} 
```

**编辑：**

我认为`T`如果你必须使用它的属性、字段或方法，你基本上错过了在编译时应该知道泛型的观点。如果您知道您`T`将永远如此`Foo`，那么您无需使您的功能通用。你可以这样做：

```
public Foo getFoo(UInt32 sector)
{
    Foo foo = new Foo();

    for (int i=0; i<100; i++) foo.raw=0;
    return foo;
} 
```

但是，如果您有子类型，`Foo`那么将函数设为通用是很重要的。像这样左右：

```
public T getStruct<T>(UInt32 sector) where T : Foo
{
    T foo = new T();

    for (int i=0; i<100; i++) foo.raw=0;
    return foo;
} 
```

现在您可以通过指定您喜欢的类型来调用该函数。但是为此，您将需要在类型`raw`上定义的函数。`Foo`底线是调用对象上的任何方法，它应该在编译时知道。否则，您将不得不使用`dynamic`关键字，这主要是一个坏主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T05:17:41.867

你需要一个结构工厂。

在这里，我使用了接口和包含结构的组合。如果固定字节结构很常见，那么我会为此创建一个结构，并将其包含在我定义的所有结构中。如果需要，您还可以设置接口以从泛型方法获得访问权限。

初始化仍由`Activator`对象处理，我确保始终通过`Initialize()`调用`RawBuffer`.

作为示例，我初始化了两个不同的结构，并计算了完成操作所需的滴答声。

```
public interface IBlock
{
    RawBuffer Raw { get; }
}

[StructLayout(LayoutKind.Sequential)]
public unsafe struct RawBuffer
{
    public const int Count = 512;
    public const int Size = sizeof(byte) * Count;

    public fixed byte raw[Count];

    public void Initialize()
    {
        fixed (byte* ptr = raw)
        {
            for (int i = 0; i < Count; i++)
            {
                ptr[i] = 0;
            }
        }
    }
}

[StructLayout(LayoutKind.Explicit, Size = RawBuffer.Size)]
public unsafe struct RunBlock_t : IBlock
{
    [FieldOffset(0)] public RawBuffer raw;
    [FieldOffset(0)] public UInt16 run_id; 
    [FieldOffset(2)] public UInt16 magic; 
    [FieldOffset(510)] public UInt16 checksum;

    public RunBlock_t(UInt32 sector)
    {
        raw.Initialize();
        run_id = 0;
        magic = 0;
        checksum = 0;            
    }
    public RawBuffer Raw { get { return raw; } }
}
[StructLayout(LayoutKind.Explicit, Size=RawBuffer.Size)]
public unsafe struct RunBlock_s : IBlock
{
    [FieldOffset(0)] public RawBuffer raw;
    [FieldOffset(0)] public UInt16 run_id;
    [FieldOffset(2)] public UInt32 soup;
    [FieldOffset(510)] public UInt16 checksum;

    public RunBlock_s(UInt32 sector)
    {
        raw.Initialize();
        run_id = 0;
        soup = 0;
        checksum = 0;            
    }
    public RawBuffer Raw { get { return raw; } }
}

class Program
{

    public static T Factory<T>(UInt32 sector)
        where T : struct, IBlock
    {
        return (T)Activator.CreateInstance(typeof(T), sector);
    }

    static void Main(string[] args)
    {            
        var sw = Stopwatch.StartNew();
        var A = Factory<RunBlock_t>(0x20);
        long tic = sw.ElapsedTicks;

        Console.WriteLine("Initilized {0} in {1} cycles", A.GetType().Name, tic);
        // Initilized RunBlock_t in 1524 cycles

        sw = Stopwatch.StartNew();
        var B = Factory<RunBlock_s>(0x40);
        tic = sw.ElapsedTicks;

        Console.WriteLine("Initilized {0} in {1} cycles", B.GetType().Name, tic);
        // Initilized RunBlock_s in 722 cycles
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T05:11:37.597

您需要创建接口：

```
public interface IFoo
{
    int Raw { get; set; }
} 
```

并且您的所有结构都必须实现此接口：

```
public struct Foo:IFoo
{
    [System.Runtime.InteropServices.FieldOffset(0)]  public fixed byte raw[512];
    public int Raw { get{return raw;} set{raw = value;} }
} 
```

并创建通用方法：

```
 public static T GetStructs<T>(UInt32 sector) where T : struct, IFoo
        {
            var foo = new T {Raw = new int[sector]};
            for (var i = 0; i < 100; i++)
            {
                foo.Raw[i] = 0;
            }
            return foo;
        } 
```

要调用它，请使用以下代码：

```
var foo = getStructs<Foo>(32); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T05:20:10.233

创建一个相当容易：

```
public T GetStruct<T>()
{
    T myStruct = (T)Activator.CreateInstance<T>();
    return myStruct;
} 
```

但是，如果你想填充它，你将无法使用通用方法，因为你不知道里面的组件，至少不直接知道。除非你使用反射......像这样：

```
using System.Reflection;

public T GetStruct<T>() where T : struct
{
    T myStruct = (T)Activator.CreateInstance<T>();

    FieldInfo[] infos = typeof(T).GetFields(BindingFlags.Public | BindingFlags.Instance);
    foreach (FieldInfo info in infos)
    { 
        //Do something to fill the values;
        info.SetValue(myStruct, myValue);
    }

    return myStruct;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T05:20:14.790

如果您只想返回`struct`'s，则添加[泛型约束](http://msdn.microsoft.com/en-us/library/d5x73970.aspx) `struct`将意味着您可以在不知道类型的情况下创建新结构。

如果要返回`class`es，则需要添加`new()`约束。

为了保证您拥有`.raw`泛型类型的属性，您可以添加一个接口作为泛型约束。

```
 public interface IMyInterface
    {
        int raw { get; set;  }
    }

    public static T GetStruct<T>(UInt32 sector) where T: struct , IMyInterface
    {
        var obj = new T();

        obj.raw = 0;

        return obj;
    } 
```

由于约束，`obj`将知道该属性保证在泛型类型上。`IMyInterface``raw`

# python - 使用 pandas 索引 csv 文件中的日期时间列

> ID：13081030
> 
> 赞同：2
> 
> 时间：2012-10-26T05:05:32.990
> 
> 标签：python, pandas

我想使用 pandas 对 csv 文件中包含 datetime 类型的列进行切片。

提前致谢。

例如：`data.csv`

```
Country,Player,Runs,ScoreRate,MatchDate,Weekday
Afghanistan,Mohammad Shahzad,118,97.52,16-02-2010,Tue
india,schin,112,98.02,16-03-2010,wed 
```

我想对包含日期时间格式的列进行切片。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T08:18:26.063

如果我正确理解您的问题，您可以这样做：

```
from pandas import * 
```

读入数据，按 MatchDate 索引：

```
frame=read_csv("dates.csv",  parse_dates = True, index_col = 4)
print frame

                Country            Player  Runs  ScoreRate Weekday
MatchDate                                                         
2010-02-16  Afghanistan  Mohammad Shahzad   118      97.52     Tue
2010-03-16        india             schin   112      98.02     wed 
```

定义两个 datetime 对象来定义您想要切片的范围：

```
x=datetime(2010, 1, 5)
y=datetime(2010, 2, 25) 
```

并对其进行切片（获取所有具有`MatchDate`介于`x`和之间的行`y`）：

```
print frame.ix[x:y]
                Country            Player  Runs  ScoreRate Weekday
MatchDate                                                         
2010-02-16  Afghanistan  Mohammad Shahzad   118      97.52     Tue 
```

如果您只想获得某个月份或年份，您可以这样做：

`frame.ix['2010-2']`

```
 Country            Player  Runs  ScoreRate Weekday
MatchDate                                                         
2010-02-16  Afghanistan  Mohammad Shahzad   118      97.52     Tue 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T13:41:51.020

我计划为`usecols`文件阅读器添加一个选项，以读取各个列。可能适用于 pandas 0.10（本月晚些时候）

# java - 在 Android 中解析圣经的最佳方式

> ID：13081035
> 
> 赞同：7
> 
> 时间：2012-10-26T05:06:06.130
> 
> 标签：java, android, xml, xml-parsing

我正在创建一个需要访问圣经的 Android 应用程序。我希望它离线，所以我不喜欢使用其中一种互联网 API。读完这篇[文章](https://stackoverflow.com/questions/4687862/whats-the-best-way-to-store-the-bible-in-sql)后，我决定将文本本地存储为 XML，就像这样

```
<bible>
<b n="Genesis">
<c n="1">
<v n="1">In the beginning, God created the heavens and the earth.</v> 
```

我的问题是该文件几乎有 34,000 行长（4.4 MB），并且解析整个文本需要很长时间（几分钟）。

现在我正在使用 XmlPullParser，就像这样

```
XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
XmlPullParser xpp = factory.newPullParser();

InputStream iStream = getResources().openRawResource(R.raw.bible);
BufferedReader reader = new BufferedReader(new InputStreamReader(iStream));
xpp.setInput(reader);

int eventType = xpp.getEventType();

while (eventType != XmlPullParser.END_DOCUMENT)
{
    // do something here
    eventType = xpp.next();
} 
```

**有没有更好的方法在 Android 上本地存储和/或访问圣经？**

我考虑将它存储为多个 XML 文件以更快地解析它（每本书一个单独的文件），但如果可能的话，我不希望这样做。

我愿意接受任何建议，包括将文本存储为 XML 以外的其他内容。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T05:27:46.200

**-**首先**解析**使用`XML`，`SAX, DOM, or Pull Parser`或者你可以尝试一些很棒的库，比如`JAXP and JAXB or the infamous Castor`.

**-**其次，您可以将圣经本地存储到`SQLite`数据库中，由于 SQLite 只是一个**没有任何服务器的文件**，它的工作速度相当快。它的大小可以小至 250K。

**//////////////// 编辑部分 //////////////////////// //**

**-**让**UI 工作在 UI Thread 上总是更好，而 Non-UI 工作在 Non-UI 线程上**总是更好，但是随着Android 版本的到来，这成为了一个**法律。**`HONEYCOMB`

**-**所以你可以使用`Thread along with Handler`，或者选择使用 Android 提供的更简单的选项，称为**PainLess Threading**，它的`AsyncTask`

**-**当您在后台执行处理器繁重的工作时，使用上述内容将保持您的`UI` **响应速度。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T05:14:34.923

我只是将[SQLite](http://sqlite.org/)用作“起点”——也就是说，*为什么不*呢？（嗯，真的，现有的图书馆/图书阅读器/完善的文件模式会更好，但除非:-)

SQLite 具有非常高效的“磁盘”访问——例如，无需“解析”到内存或读取整个文件——并且它支持对索引的有效搜索（例如查找特定的诗句或获取 Exodus 中的第 2 章到第 12 章）。我希望 SQLite 数据库和原始 XML 文件都具有相当的文件大小（假设 XML 是 UTF-8 编码的）。

然后制作一个程序/函数将 XML“加载”到 SQLite 数据库中的适当模式中 - 这可以提前完成（例如，在 PC 上，然后分发预填充的 SQLite 数据库文件）或第一次说 XML加载到客户端。这实际上可以是与现在相同的阅读代码..只需将“做某事”替换为“更新数据库”即可。

除非有特别好的理由，否则我会避免使用文件拆分方法——它可以更快地找到特定的章节/诗句，但它并不能真正“解决问题”。由于它使用的是顺序读取器而不是完整的 DOM，它不一定会导致内存减少 - 它只会限制垃圾在搜索时“读取”（然后丢弃）。但话又说回来，*为什么不是*SQLite？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T06:39:29.223

我的建议是使用 XML 以外的其他东西。请注意，我一般对 XML*没有任何意见。*只是想清楚一点，因为那里有很多人认为 XML 对*任何事情*都没有好处。

以下是在这种情况下使用 XML 的一些预期后果：

**查找时间**

这会使跳转到文本中的特定位置*总是很*昂贵。XML 将为您提供两种方法：

1.  以流式方式阅读整个文档，直到找到要查找的片段。非常慢。
2.  将整个文档读入内存数据结构，这将允许您创建从某种位置标识符到实际文本片段的内存索引。在内存消耗方面非常昂贵。

**紧凑**

将整本圣经变成一个 XML 文件会变得非常*庞大*。当然有诸如[Fast Infoset](http://en.wikipedia.org/wiki/Fast_Infoset)和[Efficient XML](http://www.w3.org/XML/EXI/)（[Infoset](http://www.w3.org/TR/xml-infoset/)的二进制编码， XML 背后的数据模型）之类的解决方案。这会有所帮助，但可能不会有太大帮助。Gzip 可能会减少到大约。原始大小的 1/3，这又会有所帮助，但它仍然会很大。

**该怎么做？**

我的建议是考虑对圣经文本进行二进制编码；一种为快速查找而优化的。就像，在文件中有一个索引*，*将位置（诗句）映射到实际文本片段开始的偏移量。如果你做得好，甚至还有比 XML 更紧凑的东西的好处。

**更难？**

这听起来要困难得多，但实际上可能不会。您还可以考虑查看[Preon](http://preon.github.com/)，因为 Preon 也已在 Android 上使用，并且允许您以声明方式将内存中的数据结构映射到其二进制编码表示。框架*本身*会判断是否有机会从输入文件中延迟加载数据。

# fedora - 用于创建 RPM 包的简单规范文件

> ID：13081037
> 
> 赞同：3
> 
> 时间：2012-10-26T05:06:22.483
> 
> 标签：fedora, rpmbuild, rpm-spec

我有一个二进制 Java`run.jar`文件，一个 bash 脚本`run.sh`，它`run.jar`通过`java -jar`.

*   在我的环境 ( `~/rpmbuild/`) 中，我必须将这两个文件放在哪里？我必须将源文件放在哪里？（我想我应该将源压缩为`.tar.gz`）

如何将规范文件写入：

*   制作目录`~/bin/my-package`；
*   复制`run.jar`到`run.sh`上面的目录；

这就是我想要的。你能帮帮我吗？

谢谢你的时间。

PS：我经历了这个[操作方法](http://fedoraproject.org/wiki/How_to_create_an_RPM_package)。不幸的是，我是这方面的新手，我找不到解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T10:39:47.600

我无法编辑@Taizo Ito 的答案，因为有很多变化。他的回答是正确的，但我更新到最新的 RPM 构建[指南](http://fedoraproject.org/wiki/How_to_create_an_RPM_package)：

```
# skip

Source0: run.jar
Source1: run.sh

#skip

%install

rm -rf %{buildroot}
mkdir -p %{buildroot}%{_bindir}/my-package
cp %{SOURCE0} %{buildroot}%{_bindir}/my-package
cp %{SOURCE1} %{buildroot}%{_bindir}/my-package

# skip

%files
%{_bindir}/my-package/*

%clean
rm -rf %{buildroot}

# ... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-26T08:03:31.357

创建 ~/.rpmmacros 以设置 RPM 构建环境。

```
$ mkdir -p ~/rpmbuild/{BUILD,RPMS/{i{3,4,5,6}86,x86_64,noarch},SOURCES,SPECS,SRPMS}
$ echo "%_topdir $HOME/rpmbuild" > ~/.rpmmacros 
```

并将run.jar/run.sh 和spec 文件分别放入~/rpmbuild/SOURCES 和~/rpmbuild/SPECS/ 中。

**编辑：**在规范文件中：

```
(skip)

Source0: run.jar
Source1: run.sh

(skip)

%install

%{__mkdir_p} ${RPM_BUILD_ROOT}/path/to/my-package

%{__install} -m0644 %{SOURCE0} ${RPM_BUILD_ROOT}/path/to/my-package
%{__install} -m0644 %{SOURCE1} ${RPM_BUILD_ROOT}/path/to/my-package

(skip)

%files
/path/to/my-package/* 
```

# jquery - 使用jquery上传文件

> ID：13081042
> 
> 赞同：-1
> 
> 时间：2012-10-26T05:06:57.950
> 
> 标签：jquery, file-upload

我正在尝试使用[此 jquery 库](https://github.com/blueimp/jQuery-File-Upload)上传文件，它工作正常，但我想要的不仅仅是这些，我面临的问题就像它在我选择文件后立即上传文件，我想在上传之前进行验证（验证像文件的类型和大小），我也想在其他一些函数中调用文件上传函数，我被困在这里任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T05:27:03.160

根据项目的文档，您应该覆盖`add`功能。

> **添加**
> 
> add回调可以理解为文件上传请求队列的回调。一旦文件被添加到文件上传小部件，它就会被调用——通过文件输入选择、拖放或添加 API 调用。

默认行为是：

```
function (e, data) {
    data.submit();
} 
```

此外，插件中已经有文件类型和大小验证：

> **最大文件大小**
> 
> 允许的最大文件大小（以字节为单位），默认为无限制。
> 
> **最小文件大小**
> 
> 允许的最小文件大小，默认未定义（可以是 0 字节）。 **接受文件类型**
> 
> 允许文件类型的正则表达式匹配文件类型或文件名，因为只有支持文件 API 的浏览器才会报告文件类型。

所以你不需要自己做

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T05:35:10.533

使用[Uploadify 插件](http://www.uploadify.com/)的解决方案：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="/Scripts/jquery.uploadify.min.js" ></script>
<script type="text/javascript" >
    $(function () {
        $('#file_upload').uploadify({
            'swf': '/Scripts/uploadify.swf',
            'uploader': '/Home/UploadFile',
            'fileTypeExts': '*.gif; *.jpg; *.png', //type limitations
            'fileTypeDesc': 'Image Files',
            'fileSizeLimit': '100KB' //size limitation
        });
    });
</script>

<input type="file" name="file_upload" id="file_upload" /> 
```

# java - 在 hadoop 中使用 ImageJ 并获得 awt 无头异常

> ID：13081044
> 
> 赞同：1
> 
> 时间：2012-10-26T05:07:14.433
> 
> 标签：java, hadoop, awt, imagej

我一直在尝试使用 ImageJ 1.45 / ImageJA 的 ParticleAnalyzer 构建图像处理应用程序。该算法已在我的 Mac 上完美测试，但是当我将可运行的 jar 发送到 hadoop 集群时，它一直抛出 awt 无头异常。我在网上查过并尝试了这些方法，但没有一个能解决问题！

[http://imagej.1557.n6.nabble.com/Headless-ImageJ-td3699125.html](http://imagej.1557.n6.nabble.com/Headless-ImageJ-td3699125.html)

此外，我试图在现场捕捉异常，但后来我发现 ParticleAnalyzer 并没有真正运行（它一直返回 0 粒子，这是错误的。我的 mac 给出了非零结果！）。这是 java 代码部分，后面是我从 hadoop 日志中复制的异常。

如果有人有在 Hadoop 上使用 ImageJ 的成功故事，您能给我一个可靠的代码示例吗？

提前致谢。

```
try{
            ParticleAnalyzer pa = new ParticleAnalyzer(options, measurements,
                rt, THRES_AREA, 10000, 0, 1);

            pa.setup("victor", result);
            pa.run(result.getProcessor());
        }catch(Exception e){
            System.out.println("engine: awt error!");
    }

java.awt.HeadlessException
    at java.awt.GraphicsEnvironment.checkHeadless(GraphicsEnvironment.java:159)
    at java.awt.Window.<init>(Window.java:431)
    at java.awt.Frame.<init>(Frame.java:403)
    at java.awt.Frame.<init>(Frame.java:368)
    at ij.gui.GenericDialog.<init>(GenericDialog.java:87)
    at ij.plugin.filter.ParticleAnalyzer.showDialog(ParticleAnalyzer.java:265)
    at ij.plugin.filter.ParticleAnalyzer.setup(ParticleAnalyzer.java:220)
.....
    at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:144)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1083)
    at org.apache.hadoop.mapred.Child.main(Child.java:249) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:34:16.327

[斐济项目](http://fiji.sc/)付出了巨大的努力，使 ImageJ 的无头操作更可行，尽管仍然存在一些限制。

三个主要的解决方案是：

1.  `--headless`使用国旗运行斐济
2.  使用[Xvfb](http://en.wikipedia.org/wiki/Xvfb)
3.  重写有问题的脚本或插件

也就是说，在这种情况下，由于“有问题的脚本或插件”实际上是 ImageJ 内置的粒子分析器，因此该`--headless`方法应该有效。

有关完整的详细信息，请参阅有关[无头模式的文章。](http://fiji.sc/Headless)

# c++ - 分配数组与初始化指针

> ID：13081046
> 
> 赞同：0
> 
> 时间：2012-10-26T05:07:33.257
> 
> 标签：c++, c, initialization, header-files

我有一个包含数组的结构。

```
struct Page_Directory {
public:
    int numEntries;
    int nextDirPage;
    int [] array;
}; 
```

但是，我总是希望这个数组有一定的长度，这样这个结构的大小总是 4 + 4 + 100*4 字节。

我不想有如下结构声明：

```
struct Page_Directory {
public:
    int numEntries;
    int nextDirPage;
    int *array;
}; 
```

因为这个结构的大小是 4 + 4 + 4 = 12 字节（即使我使用`new`or为条目分配内存`malloc`）。

现在，我该如何实现呢？我不能像第一个那样在头文件中声明，你不要在头文件中放置数组大小的详细信息，只有每个成员的类型。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-26T05:14:31.447

如果你总是希望数组有一定的大小，那么就没有办法用一定的大小来声明它：

```
struct Page_Directory {
public:
    int numEntries;
    int nextDirPage;
    int array[100];
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T05:23:48.607

```
<datatype> [] <array_name> ; 
```

在 C++ 中是不允许的

你也可以试试这个...

```
struct Page_Directory {
public:
    int numEntries;
    int nextDirPage;
    static int const size=100;
    int  array[size];
}; 
```

# parallel-processing - 如何在 CUDA 上运行多个 PFactory 实例？

> ID：13081048
> 
> 赞同：0
> 
> 时间：2012-10-26T05:07:56.240
> 
> 标签：parallel-processing, cuda, image-stitching

我正在使用 PFactory（全景工厂）以批处理模式拼接图像。目前它使用多个线程在 CPU 上执行相同的操作。我想在我的 nvidia GPU（有 144 个内核）上运行它。我编写了一个内核程序，它调用 - system(pfactory) - 来执行 PFactory 的一个实例。但是当我使用 nvcc 编译它时，它会抛出一个错误 - 无法在设备中执行主机功能......”

有没有办法可以在 GPU 内核上运行该程序的多个实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T02:50:16.613

CUDA 内核和设备函数不能直接调用主机函数。`system`是主机功能。

没有办法按照你的要求去做。

# django - django 中的 OAuth

> ID：13081052
> 
> 赞同：1
> 
> 时间：2012-10-26T05:08:08.940
> 
> 标签：django, oauth

我是 django 和 OAuth 世界的新手。我已经创建了一个运行在本地主机中的 django 演示站点，我想实现 OAuth 来访问我的数据库的 JSON 流。请建议我任何简单的教程来开始。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:47:20.647

我强烈建议您使用[Python OAuth 库](https://github.com/simplegeo/python-oauth2)。还有一个可能会有所帮助的[Django oauth 库](http://code.larlet.fr/django-oauth/wiki/Home)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-12T18:52:15.423

最新的库现在是其[social-app-django 风格的](https://github.com/python-social-auth/social-app-django)python-social-auth 。

# python - 我如何覆盖在 django 中提交的表单的值

> ID：13081053
> 
> 赞同：1
> 
> 时间：2012-10-26T05:08:24.373
> 
> 标签：python, django, forms

我正在像这样将表单保存在视图中

`form.save()`

但在此之前我想将日期时间字段设置为现在。

就像是

`form.timestamp = datetime.now`

我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T05:16:12.460

更好的方法：

`auto_now_add`使用and更改 models.py 中的字段`auto_now`：

```
date = models.DateTimeField(auto_now_add=True, auto_now=True) 
```

这样，每次保存表单时，您的字段都会更新。

文档[在这里](https://docs.djangoproject.com/en/dev/ref/models/fields/#datefield)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:15:43.043

```
instance = form.save(commit=False)
instance.timestamp = datetime.now
instance.save() 
```

京东

# html - 填充，以便顶部标题栏不会阻止文本

> ID：13081054
> 
> 赞同：0
> 
> 时间：2012-10-26T05:08:39.310
> 
> 标签：html, css

我有一个带有许多链接的标题栏，即使向下滚动，它们也会漂浮在页面顶部。当我单击这些链接时，它会链接到页面下方的某个位置。我的问题是，当我单击链接时，它会链接到正确的部分，但是由于该栏在那里，它涵盖了我希望用户看到的部分文本。例如，单击“关于”会将我带到“关于”部分，但顶部栏会阻止“关于”的字词。当顶部栏链接到每个部分时，有没有办法填充每个部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T05:20:03.473

看看那些 SO 问题：

[偏移 html 锚点以调整固定标题](https://stackoverflow.com/questions/10732690/offsetting-an-html-anchor-to-adjust-for-fixed-header)
[Sticky Header Covers Anchor Text](https://stackoverflow.com/questions/10660132/sticky-header-covers-anchor-text)

一些解决方案：

[http://nicolasgallagher.com/jump-links-and-viewport-positioning/demo/](http://nicolasgallagher.com/jump-links-and-viewport-positioning/demo/)

# ios - 在 iOS 中拨打电话时从哪个标头调用哪个方法？

> ID：13081056
> 
> 赞同：3
> 
> 时间：2012-10-26T05:09:11.653
> 
> 标签：ios, jailbreak, tweak

我正在通过 ios open dev 的徽标模板进行调整，但我一直在查看现有框架中的所有头文件，但我没有找到正确的头文件，该头文件具有在某人拨打电话后调用的方法？有谁知道它是什么？我正在尝试做类似 Cydia 中可用的“AskToCall”之类的操作，它会在拨打电话时提示 UIAlertView，确切地说是在按下绿色按钮时。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T23:19:14.230

1) 首先，您需要链接私有框架 CoreTelephony：在您的徽标项目的 Makefile 中，确保包含 yourprojectname_PRIVATE_FRAMEWORKS = CoreTelephony。还要确保您的 MobileSubstrate .plist 文件过滤“com.apple.mobilephone”

2) iPhone 上的电话应用程序使用CoreTelephony 的CTCallDialWithID 函数拨打电话。您可以简单地挂钩该功能并做您的事情。

```
#import "substrate.h" // for MSHookFunction definition

extern "C" void CTCallDialWithID(NSString *numberToDial); // function declaration

static void (*original_CTCallDialWithID)(NSString *numberToDial); //define a function pointer on which you'll assign the original call later

static void replaced_CTCallDialWithID(NSString *numberToDial){
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Verify New Call" message:[NSString stringWithFormat:@"Are you sure you want to call %@",numberToDial]
                         delegate:YOUR_OBJECT cancelButtonTitle:@"No" otherButtonTitles:@"Yes,please",nil];
    [alert show];
    [alert release];
} 
```

在您的构造函数中：

```
%ctor{
      %init();
      MSHookFunction((void *)CTCallDialWithID,(void *)replaced_CTCallDialWithID,(void **)&original_CTCallDialWithID);
      // Replace original function implementation with your replaced_ one.

} 
```

要在替换函数实现后最终实际拨打号码（例如在您的警报视图的委托中），请使用

```
CTCallDial(NSString *number); 
```

因为 CTCallDialWithID 需要 {...} 参数并且无法正常运行。

*请注意，这是 Phone.app 中 CTCallDialWithID 的全局挂钩（我适用于所有拨出电话，包括点击最近的通话以拨打它，或收藏夹等*。

如果您只是在按下呼叫按钮时只需要一个挂钩：

```
%hook DialerController
-(void)_callButtonPressed:(id)pressed{

   UIView *dialerView=MSHookIvar<UIView *>(self,"_dialerView");
   UILabel *lcd=MSHookIvar<UILabel *>(dialerView,"_lcd");
   NSString *numberToBeDialed=[lcd text];

  // do your thing with the number in here.
}
%end 
```

我注意到您提到您之前找到了这种方法并且没有用。它可能对您不起作用，因为您没有注入 MobilePhone.app。

Theos 项目中的 .plist 文件应如下所示：

```
Filter = { Bundles = ("com.apple.mobilephone");}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T09:26:51.127

为此，您必须将文件系统中的 MobilePhone.app（位于 /Applications/MobilePhone.app）标头转储到 iPhone 或解密的 ipsw 文件中，然后您必须通过 THOSE 标头。你一定会在那里找到你正在寻找的东西。要从这个 repo 中转储您需要`class-dump`或`class-dump-z`（首选）的标头：

**ininjas.com/repo/**

然后你必须安装**移动终端**（来自 Cydia）并运行

class-dump-z -H /Applications/MobilePhone.app/MobilePhone -O /var/mobile/somefolder （这也适用于 iPod touch 4）

获取 /var/mobile/somefolder 中的标题

然后您必须将所有标题放在 /var/theos/include/MobilePhone 中（无论您的 theos 文件夹在哪里，在我的设备上，因此 /var/theos/include ）

之后，您必须添加该行

```
#import <MobilePhone/MobilePhone.h> 
```

在你的**tweak.xm**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T08:32:29.763

好的，希望我能理解你的问题。

您只是想显示一个警报弹出窗口，上面写着“真的打电话吗？” 是和否按钮。

这就是你将如何去做：

```
// View Controller Header File (.h file)
@interface MyViewController <UIAlertViewDelegate>
{
    UIButton *callButton;
}

// View Controller Implementation File (.m file)
-(void)viewDidLoad
{
    ...
    [callButton addTarget:self selector:@selector(confirmCall) forControlEvent:UIControlTouchUpInside];
    ...
}

-(void)confirmCall
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Confirm Call" 
                                                    message:@"Really make call?" 
                                                   delegate:self 
                                          cancelButtonTitle:@"No" 
                                          otherButtonTitles:@"Yes", nil
                          ];
    [alert show];
    [alert release];
}

// UIAlertViewDelegate callback method
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    // ---------------------------------------------------------------------------
    // Alert view button indexes starts from 0 (left most button) 
    // and increments for the next button.
    //
    // In our case, "No" button would have index 0 because it is the first button
    // followed by the "Yes" button having an index 1
    //
    // So what we're saying below is if user presses on the "Yes" button
    // for an alert that has the title "Confirm Call", then call that number
    // ---------------------------------------------------------------------------
    if([alertView.title isEqualToString:@"Confirm Call"] && buttonIndex == 1)
    {
        [self callNumber];
    }
}

-(void)callNumber
{
    NSString *rawNumber = [[NSString alloc] initWithString:@"+61 8 9123 4567"];
    NSString *cleanedString = [[NSString alloc] initWithString:[[rawNumber componentsSeparatedByCharactersInSet:[[NSCharacterSet characterSetWithCharactersInString:@"0123456789-+()"] invertedSet]] componentsJoinedByString:@""]];

    NSString *escapedPhoneNumber = [[NSString alloc] initWithString:[cleanedString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
    NSString *properPhoneNumber = [[NSString alloc] initWithFormat:@"tel://%@",escapedPhoneNumber];

    NSURL *telURL = [[NSURL alloc] initWithString:properPhoneNumber];

    // prevent non phone iOS device from trying to making calls (iPod, iPad)
    if([[UIApplication sharedApplication] canOpenURL:telURL])
    {
        // make call now
        [[UIApplication sharedApplication] openURL:telURL];
    }
    else
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Device Cannot Call" 
                                                        message:@"This device cannot make phone calls. Would you like to send an email instead ?" 
                                                       delegate:self 
                                              cancelButtonTitle:@"No" 
                                              otherButtonTitles:@"Yes", nil];
        [alert show];
        [alert release];
    }

    [telURL release];
    [properPhoneNumber release];
    [escapedPhoneNumber release];
    [cleanedString release];
    [rawNumber release];
} 
```

# bash - .bash_profile 中的错误无法使用终端

> ID：13081058
> 
> 赞同：7
> 
> 时间：2012-10-26T05:10:07.237
> 
> 标签：bash, macos, terminal

我在 Mac OS X 上的 .bash_profile 中添加了一些东西，但它们给出了错误。这是我现在启动终端时的整个文本日志：

```
Last login: Thu Oct 25 23:10:03 on ttys000
dirname: illegal option -- b
usage: dirname path
-bash: /bin/naoqi-bin: No such file or directory
-bash: exec: /bin/naoqi-bin: cannot execute: No such file or directory

[Process completed] 
```

问题是由于“进程完成”，我不能使用终端。如何访问 .bash_profile （我无法从 finder 中找到如何访问），或者如何再次正常运行终端以便从 .bash_profile 文件中获取它？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-26T05:15:02.440

打开`Terminal`，然后去`File (or Shell) -> New Command`。输入`open -e .profile`（或用其他文件代替`.profile`），然后点击运行。那应该使用您要修复的文件打开 TextEdit；你可以删除那里的违规行。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-26T06:00:50.607

为了完整起见，这里有另一种方式：打开 TextEdit（或您最喜欢的 GUI 文本编辑器）。在打开的对话框中，按`Command`- `Shift`- `Period`，它将显示（并让您打开）不可见的文件，例如 .profile。删除有问题的行，保存，你应该很高兴。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-12T05:03:15.680

您可以在禁用所有启动脚本的情况下运行 Bash 以解决启动脚本的问题：选择**Shell > New Command**并运行`bash --noprofile`.

有关 Bash 命令行选项和启动文件的更多信息，请参见 Bash 手册页：x-man-page://1/bash

另请注意，即使您的 shell 不工作，您也可以在终端中查找和查看手册页，方法是单击帮助菜单并在搜索字段中输入主题。终端将显示匹配的手册页。从“帮助”菜单中选择一个以在新窗口中查看它。您还可以`x-man-page:`从任何应用程序打开方案 URL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-17T12:24:31.033

我无法打开它：

```
open ~/.bash_profile 
```

但是当我进入

```
sudo open ~/.bash_profile 
```

它有效，我能够打开文件！

# iphone - 手指按住屏幕时连续运行方法

> ID：13081059
> 
> 赞同：4
> 
> 时间：2012-10-26T05:10:16.050
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在开发一款包含左轮手枪、步枪和霰弹枪等枪支的游戏。您选择一把枪并射击出现在屏幕上的外星人。我差不多完成了，但是我在用自动火枪（例如机关枪）射击外星人时遇到了问题。对于单发枪，我用它来检测外星人何时在十字准线中，如果是，则隐藏它：

```
CGPoint pos1 = enemyufoR.center;
if ((pos1.x > 254) && (pos1.x < 344) && (pos1.y > 130) && (pos1.y < 165 && _ammoCount != 0))
{
    enemyufoR.hidden = YES;
    [dangerBar setProgress:dangerBar.progress-0.10];
    _killCount = _killCount+3;
    [killCountField setText: [NSString stringWithFormat:@"%d", _killCount]];

    timer = [NSTimer scheduledTimerWithTimeInterval: 4.0
                                             target: self
                                           selector: @selector(showrUfo)
                                           userInfo: nil
                                            repeats: NO];
} 
```

这对大多数枪来说都很好，但对于机枪，我需要它在枪开火时不断检查敌人的位置。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T07:56:00.297

嗯，当你点击你的拍摄按钮时，你显然是在调用类似的东西：

```
// --------------------------------------
// PSEUDO-CODE
// --------------------------------------
-(void)shootButtonPressed
{
    [self checkEnemies];
} 
```

从那开始，你为什么不直接声明一个 BOOL 变量并使用它来检查手指是否仍然被按下，如下所示：

```
// --------------------------------------
// PSEUDO-CODE
// --------------------------------------

@interface MyGameClass
{
    // defaults to FALSE
    BOOL isTouching;
}

-(void)shootButtonPressed
{
    // assumes isTouching is a instance variable declared somewhere
    isTouching = YES;
    [self checkEnemies];
}

-(void)checkEnemies
{
    // check enemy action

    // ---------------------------------------------
    // when finger lifts off the screen, this 
    // isTouching variable will be reset to FALSE
    // so as long as isTouching is TRUE, we call
    // this same method checkEnemies again
    // ---------------------------------------------
    if(isTouching)
    {
        [self checkEnemies];
    }
}

// reset the isTouching variable when user finger is taken off the screen
-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    isTouching = NO;   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T05:28:19.257

从 UITouch 检查时间戳

# objective-c - 如果用户已经登录，如何隐藏 Facebook 登录页面？

> ID：13081061
> 
> 赞同：1
> 
> 时间：2012-10-26T05:10:19.670
> 
> 标签：objective-c, facebook-graph-api

我有一个主页，其中有两个按钮：Facebook 登录和电子邮件登录。通过其中之一登录后，用户将进入应用程序。所以我的问题是，如果用户已经通过 Facebook 或电子邮件登录，我怎样才能让它不直接显示主页到内页？此页面位于主视图控制器上。如果用户已经登录，我可以隐藏这个页面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T05:22:45.460

如果使用 javascript sdk，您可以使用**FB.getLoginStatus** [https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/检查用户是否已登录并连接到您的应用程序](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:30:03.807

我认为您可以在显示任何视图之前检查主视图控制器中的用户状态。如果未登录，请显示登录视图。如果已经登录，请显示应用程序视图。

# wpf - Datagrid 绑定文本框内存泄漏

> ID：13081064
> 
> 赞同：3
> 
> 时间：2012-10-26T05:10:35.180
> 
> 标签：wpf, .net-4.0, datagrid

我红了很多关于数据网格泄漏的文章，但找不到正确的方法。这是一些要重现的代码。它有数据网格和按钮，每次按下按钮，它都会用随机数填充表格，并占用 10mb 的内存，并且不会释放它。绑定到 TextBlock 不会导致内存泄漏，但我需要文本框双向绑定。

```
<Window x:Class="test.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition></RowDefinition>
        <RowDefinition></RowDefinition>
    </Grid.RowDefinitions>
    <DataGrid Name="dg" Grid.Row="0" AutoGenerateColumns="False" ItemsSource="{Binding}">
        <DataGrid.Columns>
            <DataGridTemplateColumn>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBox Text="{Binding Text0}"></TextBox>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
            <DataGridTemplateColumn>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBox Text="{Binding Text1}"></TextBox>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
            <DataGridTemplateColumn>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBox Text="{Binding Text2}"></TextBox>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
            <DataGridTemplateColumn>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBox Text="{Binding Text3}"></TextBox>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
            <DataGridTemplateColumn>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBox Text="{Binding Text4}"></TextBox>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
            <DataGridTemplateColumn>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBox Text="{Binding Text5}"></TextBox>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
            <DataGridTemplateColumn>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBox Text="{Binding Text6}"></TextBox>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
            <DataGridTemplateColumn>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBox Text="{Binding Text7}"></TextBox>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
            <DataGridTemplateColumn>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBox Text="{Binding Text8}"></TextBox>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
            <DataGridTemplateColumn>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBox Text="{Binding Text9}"></TextBox>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid>
    <Button Content="update" Grid.Row="1" Width="Auto" Height="Auto" Click="Button_Click"></Button>
</Grid> 
```

```
namespace test
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

    }

    public ObservableCollection<obj> res;
    private void Button_Click(object sender, RoutedEventArgs e)
    {
        res = new ObservableCollection<obj>();

        for (var i = 0; i < 20; i++)
        {
            res.Add(new obj
            {
                Text0 = ((new Random()).NextDouble() * 100).ToString(),
                Text1 = ((new Random()).NextDouble() * 100).ToString(),
                Text2 = ((new Random()).NextDouble() * 100).ToString(),
                Text3 = ((new Random()).NextDouble() * 100).ToString(),
                Text4 = ((new Random()).NextDouble() * 100).ToString(),
                Text5 = ((new Random()).NextDouble() * 100).ToString(),
                Text6 = ((new Random()).NextDouble() * 100).ToString(),
                Text7 = ((new Random()).NextDouble() * 100).ToString(),
                Text8 = ((new Random()).NextDouble() * 100).ToString(),
                Text9 = ((new Random()).NextDouble() * 100).ToString(),
            });
        }
        dg.DataContext = res;
    }

}
public class obj : INotifyPropertyChanged
{
    private string text0;
    public string Text0
    {
        get
        {
            return text0;
        }
        set
        {
            text0 = value;
            NotifyPropertyChanged("Text0");
        }
    }
    private string text1;
    public string Text1
    {
        get
        {
            return text1;
        }
        set
        {
            text1 = value;
            NotifyPropertyChanged("Text1");
        }
    }
    private string text2;
    public string Text2
    {
        get
        {
            return text2;
        }
        set
        {
            text2 = value;
            NotifyPropertyChanged("Text2");
        }
    }
    private string text3;
    public string Text3
    {
        get
        {
            return text3;
        }
        set
        {
            text3 = value;
            NotifyPropertyChanged("Text3");
        }
    }
    private string text4;
    public string Text4
    {
        get
        {
            return text4;
        }
        set
        {
            text4 = value;
            NotifyPropertyChanged("Text4");
        }
    }
    private string text5;
    public string Text5
    {
        get
        {
            return text5;
        }
        set
        {
            text5 = value;
            NotifyPropertyChanged("Text5");
        }
    }
    private string text6;
    public string Text6
    {
        get
        {
            return text6;
        }
        set
        {
            text6 = value;
            NotifyPropertyChanged("Text6");
        }
    }
    private string text7;
    public string Text7
    {
        get
        {
            return text7;
        }
        set
        {
            text7 = value;
            NotifyPropertyChanged("Text7");
        }
    }
    private string text8;
    public string Text8
    {
        get
        {
            return text8;
        }
        set
        {
            text8 = value;
            NotifyPropertyChanged("Text8");
        }
    }
    private string text9;
    public string Text9
    {
        get
        {
            return text9;
        }
        set
        {
            text9 = value;
            NotifyPropertyChanged("Text9");
        }
    }

    private void NotifyPropertyChanged(String info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }
    public event PropertyChangedEventHandler PropertyChanged;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T05:41:42.533

`TextBox`在 WPF 中有一个与之关联的`Undo`\`Redo`堆栈，它存储可重做/可撤消的值，因为它们更改为新值。这可能解释了TextBoxes 的**未**释放内存。

现在您可能会问，您是否`ItemsSource`每次都设置新鲜。那不是应该重新生成新的`TextBoxes`（因此新生成`TextBox`的没有机会持有任何**旧** `Undo`堆栈）。我猜想`Datagrid`回收`ItemsContainer`和重用生成的`TextBoxes`.

但这只是我的猜测！！！

您可以尝试限制`Undo`堆栈并重新检查它是否适合您...

[http://social.msdn.microsoft.com/Forums/en/wpf/thread/376f7765-1c70-4289-a59b-e27c168a0fa2](http://social.msdn.microsoft.com/Forums/en/wpf/thread/376f7765-1c70-4289-a59b-e27c168a0fa2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T06:53:03.493

如果您可以使用 DataGridTextColumn 而不是 DataGridTemplateColumn 您的内存将不会泄漏。

不知道为什么 DataGridTemplateColumn 有内存泄漏

编辑：

我也会只初始化一次 OberservableColletion，只设置一次数据上下文并在 button_click 中使用 clear。

编辑：DataGridTemplateColumn 的内存泄漏问题似乎在 .NET4.5 中消失了

# spring - spring jms消息创建

> ID：13081073
> 
> 赞同：0
> 
> 时间：2012-10-26T05:11:21.090
> 
> 标签：spring, jms

如果我在侦听器容器中分配了一个消息创建者，它解析出队列中的 xml 并为它创建一个等效的 java 对象，spring jms 保证这个操作是线程安全的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T07:45:23.963

Spring JMS guarantee that the code calling message creator is thread safe, and it also expect the implementation of message creator to be thread safe too. But whether the overall flow is thread safe or not, really depends on how you write the message creator.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T07:14:58.007

嗯，这取决于......`JMSTemplate`我记得 Spring 保证是线程安全的，但答案真的归结为你的实现。

干杯，

# android - Android AVD Emulator 键盘事件

> ID：13081074
> 
> 赞同：2
> 
> 时间：2012-10-26T05:11:22.620
> 
> 标签：android, android-keypad

如何在我的应用程序中获取 AVD 模拟器键盘的键事件我想根据 android 模拟器键盘中的箭头键移动我的 Sprite 即字符？

说每次单击 android 模拟器的箭头键我想移动我的 Sprite 1.0f 距离

在输入键上我想显示一些动画......

我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T05:19:07.880

试试这个

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    // TODO Auto-generated method stub
    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:32:56.260

试试这个：-

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    // TODO Auto-generated method stub
    if(keyCode==KeyEvent.KEYCODE_BACK){

    } else if(keyCode==KeyEvent.KEYCODE_ENTER){

    }
    return super.onKeyDown(keyCode, event);
} 
```

# c# - EventAggregator 是否仅适用于 MVVM 中的 ViewModel？

> ID：13081077
> 
> 赞同：4
> 
> 时间：2012-10-26T05:12:02.807
> 
> 标签：c#, events, design-patterns, mvvm

我读到了在 MVVM 设计中实现的事件聚合器模式可以帮助解耦 ViewModel 之间的通信。

我认为事件聚合器确实是一个好主意。但是再想一想，事件聚合器是否仅由 ViewModel 使用？模型可以发布和订阅事件聚合器中的事件吗？

通过这个，ViewModel 和 Model 之间的数据更改可能可以通过 EventAggregator 关联起来。这可能会允许一个 ViewModel 从多个 Model 中检索信息，而无需 ViewModel 存储对所有 Model 的引用。

如果我这样做，是否会导致整个架构混乱并最终成为反模式？最佳做法是什么？

**编辑：**

我想我应该解释一下我为什么要问这个问题。我看到三个可能的问题：

*首先*，使用 DI，我的 ViewModel 包装了模型。然后我的 ViewModel 可以与我的模型通信。然而，反之亦然。因此，如果我的模型本身或外部有一些变化，它需要一种方法来通知它的 ViewModel。

*其次*，除了 ViewModel 必须与其他 ViewModel 通信之外，在我看来，Model 与其他 Model 的通信与 ViewModel 一样多，甚至更多。这些导致我认为我可以将所有内容都链接到 EventAggregator。

*第三*，我发现在某些情况下，单个 ViewModel 需要从多个 Model 中提取信息。但是通过 ViewModel 的构造函数的依赖注入，它只能从一个模型中读取。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T10:18:24.483

有几个地方可能需要使用事件聚合器：

1.  在视图模型级别，以便视图模型可以发送通知，这些通知可以被其他感兴趣的对象接收或接收有关他们感兴趣的事件的消息。
2.  在模型发送数据流的服务（或模型）级别。而不是视图模型通过方法调用请求数据，它只会接收“新数据”事件。
3.  如果您有多个服务向视图模型提供相同的数据，它可以将数据聚合到单个流中。
4.  您有一个系统范围的事件（系统关闭），让您的视图模型和/或服务知道它们必须优雅地终止。这让他们有时间关闭。

值得记住的是，使用事件聚合器有一些缺点：

1.  它增加了一个级别或间接性，使代码更难阅读。根据您拥有的开发工具，映射事件发布者和订阅者可能会很麻烦。
2.  它需要大量的“脚手架”代码才能使其工作。如果过度使用，这可能会成为一种负担（您需要跟踪哪些事件做了什么等）。
3.  如果是简单的数据请求，大部分情况下用事件聚合器事件替换服务方法是行不通的。每个方法调用需要 2 个事件（一个请求和一个响应事件）。您还必须小心发送错误的视图模型数据：如果视图模型 A 发送数据请求并且视图模型 A 和 B 接收到它的响应，那么您必须能够让视图模型 B 过滤掉响应。

通常我不使用事件聚合器来提供服务到服务的通信（在我的主要工作项目中，我们有 20 个事件，其中只有 1 个是服务到服务）。这是因为我的大多数服务调用都是简单的一次性数据请求，而不是连续的更新流。

# java - 如何在 Java 中打印拆分结果

> ID：13081078
> 
> 赞同：2
> 
> 时间：2012-10-26T05:12:03.463
> 
> 标签：java, split, println

如何使它打印 b 的内容而不是其内存地址？

```
public class Testing {
    public static void main (String [] args){
        String a = "A#b#C ";
        String[] b = a.split("#");
        System.out.println(b);
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T05:14:38.110

您可以使用[`Arrays.toString`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString%28java.lang.Object%5b%5d%29)打印数组的字符串表示形式：-

```
System.out.println(Arrays.toString(b); 
```

这将像这样打印您的数组：-

```
[A, b, C ] 
```

* * *

或者，如果您想单独打印每个元素而不`square brackets`在末尾打印，您可以使用`enhanced for-loop`：-

```
for(String val: b) {
    System.out.print(val + " ");
} 
```

这将像这样打印您的数组：-

```
A b C 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T05:15:37.003

如果您希望将每个元素打印在单独的行上，您可以这样做：

```
public class Testing {
    public static void main (String [] args){
        String a = "A#b#C ";
        String[] b = a.split("#");
        for (String s : b) {
            System.out.println(s);
        }
    }
} 
```

对于类似的结果`[A, b, C]`，请使用 Rohit 的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T05:16:42.597

请试试这个

```
String a = "A#b#C "; 
String[] b = a.split("#"); 

for( int i = 0; i < b.length; i++)
{
System.out.println(b[i]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T05:18:30.247

您可以使用。

```
System.out.println(Arrays.toString(b)); 
```

或者

```
System.out.println(Arrays.asList(b)); 
```

或作为每个单独元素的循环

```
for( int i = 0; i < b.length ; i++)
 {
   System.out.println(b[i]);
 } 
```

# ios - 预览图层方向 - iOS

> ID：13081080
> 
> 赞同：1
> 
> 时间：2012-10-26T05:12:26.550
> 
> 标签：ios, camera, orientation

我有一个使用 AVFoundation 显示相机预览的预览层。现在我想启动我的应用程序，使一切都处于横向模式。我如何为预览层做到这一点？

`setorientation:`iOS 6 不推荐使用该方法，因此我不想使用它。

更改图像捕获的实际方式的方法，但预览方向仍然保持不变`setVideoOrientation`。`AVCaptureConnection`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T15:34:42.050

预览层有它自己的 AVCaptureConnection 对象。检索它，（previewLayer.connection），然后在那里使用 setorientation 函数。另外，我相信预览层也是镜像的。您也可以使用连接对象取消镜像它。

# php - 如何在 magento 页面中添加投票

> ID：13081085
> 
> 赞同：0
> 
> 时间：2012-10-26T05:12:58.423
> 
> 标签：php, magento

如何将民意调查添加到页面中`MAGENTO`？

> 我正在尝试使用这个

```
 <div class="left_pan">
       <?php echo $this->getChildHtml('left') ?>
       <?php echo $this->getChildHtml('sidebar') ?>
</div> 
```

但没有工作任何人请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T06:11:43.417

**您需要编辑 app/design/frontend/default/default/layout/poll.xml**

```
 <reference name="right">
        <block type="poll/activePoll" name="right.poll">
            <action method="setPollTemplate"><template>poll/active.phtml</template><type>poll</type></action>
            <action method="setPollTemplate"><template>poll/result.phtml</template><type>results</type></action>
        </block>
    </reference> 
```

根据您的要求更改参考名称。希望这可以帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T05:21:38.013

查看本教程[Magento poll wiki 教程](http://www.magentocommerce.com/knowledge-base/entry/how-do-i-configure-and-use-polls)

还要检查主题布局文件中的“poll.xml”。

# facebook - 应用程序重定向到 Facebook 应用程序以登录 iphone 5

> ID：13081088
> 
> 赞同：3
> 
> 时间：2012-10-26T05:13:44.720
> 
> 标签：facebook, ios6, iphone-5

我已经在 ios 6 中集成了 Facebook，它在 3GS、4 和 iPhone 4S 上运行完美，但是当我使用 iPhone 5 测试应用程序时，它只是将用户重定向到 Facebook 应用程序登录视图，如果用户输入凭据，它会打开 Facebook 应用程序并且用户无法返回应用程序。除了 iphone 5 之外，它工作正常。我已经检查了 Facebook 参考应用程序以将 Facebook 集成到 IOS 6 中。同样的事情也发生在那个应用程序上。我正在使用 FacebookSDK 3.1。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:12:27.303

SSO 在 openActiveSession... 登录方法方面存在很大问题。它似乎只能使用以以下开头的登录方法工作：

打开用...

iOS 用户切换示例和身份验证示例都使用 openWith... 登录方法。要完全避免 SSO 问题，请使用：

openWithBehavior:FBSessionLoginBehaviorForcingWebView

这不是理想的用户体验，因为它绕过了 SSO，即使用户在系统级别或 Facebook 应用程序中登录，也要求用户登录，但它始终如一地工作。

# spring - spring queryForInt 方法抛出异常无效列类型

> ID：13081089
> 
> 赞同：2
> 
> 时间：2012-10-26T05:13:49.860
> 
> 标签：spring, spring-jdbc

我正在使用 spring JDBC 模板的 queryForInt() 方法。它有两个参数：查询字符串和参数化 SQL 的第二个参数。我有 sql 查询，例如： select count(*) from table X where x.x1=? 和 x.x2=? . 我在参数列表中传递两个整数值：

*   args.add(12); args.add(50);

    DB 中 x1 和 x2 的数据类型为 Number。

    这个方法总是抛出 PreparedStatementCallback；SQL [<>>] 的未分类 SQLException；SQL 状态 [99999]；错误代码 [17004]；无效的列类型

我无法弄清楚出了什么问题。但是，如果我在 SQL 中硬编码参数值并在 queryForInt 的单参数版本方法中使用相同的值；它有效：“从 x.x1=12 和 x.x2=50 的表 X 中选择计数（*）”。这行得通。

知道这里有什么问题吗？我正在使用 spring 3.0.6 版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T10:54:50.527

据我了解，您的代码如下所示：

```
List args = new ArrayList();
args.add(12); args.add(50);
jdbcTemplate.queryForInt(sql, args); 
```

但`queryForInt`期望这里的对象数组 ( `Object...`) 不是列表，并将 args 解释为单个参数。要修复它，代码应该如下所示：

```
List args = new ArrayList();
args.add(12); args.add(50);
jdbcTemplate.queryForInt(sql, args.toArray()); 
```

# python - 将二进制转换为数字列表Python

> ID：13081090
> 
> 赞同：10
> 
> 时间：2012-10-26T05:13:51.573
> 
> 标签：python, list, binary

我有以下情况：

```
x = 0b0111 
```

我想将此值转换为：

```
y = [0, 1, 1, 1] 
```

当我转换时`x = 0b1001`，我可以得到`y = [1, 0, 0, 1]`，但是当我尝试对 做同样的事情`x = 0b0111`，然后再转换回来时，`str(bin(y))`我似乎失去了领先地位`0`，并且得到了`0b111`。

有什么建议么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-26T05:19:14.187

一旦你得到那个 string `0b111`，就很容易分割出你感兴趣的数字。对于字符串中所有后面的每个字符`0b`，将其转换为整数。

```
[int(d) for d in str(bin(x))[2:]] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-26T08:18:52.290

就其价值而言，纯算术解决方案似乎要快一些：

```
import timeit

def bits1(n):
    b = []
    while n:
        b = [n & 1] + b
        n >>= 1
    return b or [0]

timeit.timeit(lambda: bits1(12345678))
[out] 7.717339038848877

def bits2(n):
    return [int(x) for x in bin(n)[2:]]

timeit.timeit(lambda: bits2(12345678))
[out] 10.297518014907837 
```

2019 年更新：在 python 3.7.3 中，第二个版本稍快一些。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-26T05:19:02.203

首先将数字转换为二进制，然后再转换为字符串：

```
str(bin(7))
'0b111' #note the 0b in front of the binary number 
```

接下来，`0b`从字符串中删除

```
str(bin(7))[2:]
'111' 
```

最后，我们使用列表推导从字符串中创建一个整数列表，其形式*大致*如下：

```
[expr for i in iterable]
[int(i) for i in str(bin(x))[2:]] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-26T05:19:31.887

像这样的表达式`map(int, list(bin((1<<8)+x))[-4:])`会给你一个数字的低 4 位，作为一个列表。（*编辑：更简洁的形式是* `map(int,bin(x)[2:].zfill(4))` *；见下文*。）如果您知道要显示多少位，请将 4（in `[-4:]`）替换为该数字；`(1<<8)`如有必要，将 8 (in ) 设为更大的数字。例如：

```
>>> x=0b0111
>>> map(int,list(bin((1<<8)+x))[-4:])
[0, 1, 1, 1]
>>> x=37; map(int,list(bin((1<<8)+x))[-7:])
[0, 1, 0, 0, 1, 0, 1]
>>> [int(d) for d in bin((1<<8)+x)[-7:]]
[0, 1, 0, 0, 1, 0, 1] 
```

上面的最后一个示例显示了使用 map 和 list 的替代方法。以下示例显示了一种用于获取前导零的更简洁的形式。在这些形式中，用所需的最小位数代替 8。

```
>>> x=37; [int(d) for d in bin(x)[2:].zfill(8)]
[0, 0, 1, 0, 0, 1, 0, 1]
>>> x=37; map(int,bin(x)[2:].zfill(8))
[0, 0, 1, 0, 0, 1, 0, 1]
>>> x=37; map(int,bin(x)[2:].zfill(5))
[1, 0, 0, 1, 0, 1]
>>> x=37; map(lambda k:(x>>-k)&1, range(-7,1))
[0, 0, 1, 0, 0, 1, 0, 1] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-14T06:21:28.360

如果位的长度固定为`4`，则有两种解决方案：

```
[int(i) for i in '{0:04b}'.format(0b0111)] 
```

或使用 NumPy，

```
import numpy as np
[int(i) for i in np.binary_repr(0b0111, 4)] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-07-30T10:55:04.093

更新了 f-String：

```
x = 0b0111
y = [int(i) for i in f'{x:04b}'] 
```

y = [0, 1, 1, 1]

或者：

```
x = 0b0111 # binary representation of int 7
n_bits = 4 # desired bits' len
y = [int(i) for i in f'{x:0{n_bits}b}'] 
```

将填充最小 len n 位的列表，用前导 0 填充列表

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-26T06:03:15.910

```
c=[]
for i in bin(7)[2:]: 
        c.append(int(i)) #turning string "111", to 111
if len(c)==3:
    c.insert(0,0)
print(c)

# binary digit 7 produces '0b111' by this slicing[2:], result get '111' 
```

因此，如果列表 c 中的元素为 3，则首先插入 0。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-26T05:27:14.737

检查这个简单的方法来做到这一点......对于这个特定的场景

```
In [41]: x=0b0111

In [42]: l = [0,0,0,0]

In [43]: counter = -1

In [44]: for i in str(bin(x))[2:]:
   ....:     l[counter] = i
   ....:     counter = counter -1
   ....:

In [45]: l
Out[45]: [0, '1', '1', '1'] 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-29T19:59:57.207

这是一个不需要字符串解析的简单联机：

```
[x >> bin_idx & 1 for bin_idx in reversed(range(x.bit_length()))] 
```

我相信它比这里发布的其他答案要快一些。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-11-06T13:50:48.267

Not very pythonian but:

```
byte = 0b00011001
arr = []
for i in range(7, -1, -1):
    arr.append((byte & 1<<i)>>i)
print(arr)

[0, 0, 0, 1, 1, 0, 0, 1] 
```

this uses bitmasking to "extract" each bit and append to an array.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-05-01T08:56:06.757

给定`value`表示它的位数和位数`width`：

```
string = format(value, '0{}b'.format(width))
binary_list = [0 if c == '0' else 1 for c in string] 
```

这比大约快三分之一`binary_list = [int(c) for c in string]`

# php - 自动从 mysql db 更新 xml 提要而不刷新页面

> ID：13081092
> 
> 赞同：0
> 
> 时间：2012-10-26T05:14:11.663
> 
> 标签：php, mysql, xml

我必须使用 php 代码从 mysql 数据库开发一个 xml 提要。在这里我必须在我的 mysql 数据库中插入或更新任何数据，这意味着插入和更新的数据会自动更改并插入到我的 xml 提要中，而无需刷新页面。如何可以我开发这个。请帮助我。

我使用了以下代码：

```
$catname=func_query_first_cell("select status from $sql_tbl[orders] where status='Q'");
     $file= fopen("orderdetails1.xml", "w");        
     $_xml ="<?xml version=\"1.0\" encoding=\"ISO-8859-1\" ?>\r\n"; 
     $_xml .="\t<Feed>\r\n";
     $_xml .="\t<order>\r\n";

$_xml .="\t<status>" .htmlspecialchars($catname,ENT_QUOTES). "</status>\r\n";   
$page = (int) (!isset($_GET["page"]) ? 1 : $_GET["page"]);
$limit = 2;
$startpoint = ($page * $limit) - $limit;
$statement = "`xcart_orders` where `active` = 1";    
$counterr=0;
$r=func_query("select * from $sql_tbl[orders] LIMIT {$startpoint}, {$limit}");
foreach($r as $n)
 {
$products=func_query_first("select * from $sql_tbl[orders] where status='Q'");
 $products=func_query_first("select product from $sql_tbl[order_details] where orderid=$n[orderid]");

$infeed_counter++;

 echo $manufacturer."=====";

if($row[avail]>0)
                $avail='Y'; 
            else 
                $avail='N'; 

$_xml .="\t<Order>\r\n";
  $_xml .="\t<orderid>" .$n[orderid]. "</orderid>\r\n";
   $_xml .="\t<login>" .  htmlspecialchars(strip_tags(substr($n[login],0,50)) , ENT_QUOTES ). "</login>\r\n";   
$_xml .="\t<total>" . $n[total]. "</total>\r\n";
    $_xml .="\t<product>" .  $products[product]. "</product>\r\n";
    $_xml .="\t</Order>\r\n";   
}

    $_xml .="\t</order>\r\n";   
    $_xml .="\t</Feed>\r\n";    
fwrite($file, $_xml);       
 fclose($file);     
echo "XML version of products available here with $infeed_counter products.  <a href=\"orderdetails1.xml?page=$page\">View the XML.</a>";
     exit;
     ?> 
```

现在我得到了以下 xml 提要：

```
<Feed>
<order>
<status>Q</status>
<Order>
   <orderid>1</orderid>
        <login>krishna</login>
        <total>399.99</total>
        <product>Designing Web Usability</product>
</Order>
 <Order>
        <orderid>65</orderid>
        <login>krishna</login>
        <total>399.99</total>
        <product>Three Stone Princess Cut Diamond Ring</product>
  </Order>
 <Order>
          <orderid>2</orderid>
          <login>krishna</login>
          <total>34.65</total>
           <product>Three Stone Princess Cut Diamond Ring</product>
</Order> 
```

现在我希望在我的 mysql 数据库上将 orderid=1 的总 399.99 更改为 500.00 意味着必须刷新页面。然后这里只更改我的 xml 提要。但我希望需要解决方案是数据库更改会自动更新在我的xml 提要没有刷新页面。请帮助我。我该如何开发这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T05:49:15.253

试试这样：feed.php

```
$catname = func_query_first_cell("select status from $sql_tbl[orders] where status='Q'");
$file = fopen("orderdetails1.xml", "w");
$_xml = "<?xml version=\"1.0\" encoding=\"ISO-8859-1\" ?>";
$_xml .= "<Feed>";
$_xml .= "<order>";

$_xml .= "<status>" . htmlspecialchars($catname, ENT_QUOTES) . "</status>";
$page = (int)(!isset($_GET["page"]) ? 1 : $_GET["page"]);
$limit = 2;
$startpoint = ($page * $limit) - $limit;
$statement = "`xcart_orders` where `active` = 1";
$counterr = 0;
$r = func_query("select * from $sql_tbl[orders] LIMIT {$startpoint}, {$limit}");
foreach ($r as $n)
{
    $products = func_query_first("select * from $sql_tbl[orders] where status='Q'");
    $products = func_query_first("select product from $sql_tbl[order_details] where orderid=$n[orderid]");

    $infeed_counter++;

    // echo $manufacturer."=====";

    if ($row[avail] > 0)
        $avail = 'Y';
    else
        $avail = 'N';

    $_xml .= "<Order>";
    $_xml .= "<orderid>" . $n[orderid] . "</orderid>";
    $_xml .= "<login>" . htmlspecialchars(strip_tags(substr($n[login], 0, 50)), ENT_QUOTES) . "</login>";
    $_xml .= "<total>" . $n[total] . "</total>";
    $_xml .= "<product>" . $products[product] . "</product>";
    $_xml .= "</Order>";
}

$_xml .= "</order>";
$_xml .= "</Feed>";

header ("Content-Type:text/xml"); 
echo $_xml; 
```

在 XML 提要 URL 访问中，如下所示：

[http://www.exampleyourdoamin/feed.php](http://www.exampleyourdoamin/feed.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:44:03.497

您需要使用一种称为长轮询的技术。长轮询使连接在一定时间内保持打开状态。在此期间，它检查数据库中是否有任何更改。如果是，它会中断连接并将这些更改发送到前端。然后立即开始另一个连接。您将在此处找到更多信息。[http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery)

# javascript - 完整日历如何在事件呈现时获取特定时间的事件

> ID：13081093
> 
> 赞同：0
> 
> 时间：2012-10-26T05:14:18.610
> 
> 标签：javascript, jquery, jquery-ui, fullcalendar

嗨朋友们，我使用 jQuery Full 日历作为制作应用程序的一部分。我在那里经历了代码行

```
var sameDayList = view.eachElementOnDay(event); 
```

此行返回特定日期所有事件的列表。我的问题是，有没有办法在整个日历的同一时间找出没有事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T17:17:50.007

这可能会有所帮助：[fullCalendar 在同一天查找其他事件？](https://stackoverflow.com/questions/3721729/fullcalendar-finding-addtional-events-in-the-same-day)

我见过类似的问题，请尝试在此站点上搜索以前的答案。

# php - mysql_fetch_object()：提供的参数不是有效的 MySQL 结果资源？

> ID：13081101
> 
> 赞同：0
> 
> 时间：2012-10-26T05:15:18.370
> 
> 标签：php, mysql

我的错误：`Warning: mysql_fetch_object(): supplied argument is not a valid MySQL result resource in .../gallery.php on line 81`

我敢肯定，这是我的代码。如果获得批准，它应该从每一行中获取图像等，并相应地显示它。

似乎不想玩得很好:(

有没有人遇到过这个问题？

```
<?php
$page = 'gallery';
include 'header.php';

$can_vote = TRUE; //expand

$query = "SELECT COUNT(`id`) as 'count' FROM `$db_name`.`gallerytable` WHERE `approve` = 1 LIMIT 1;";
$result = mysql_query($query);
$result = mysql_fetch_array($result);
$total_entry = $result['count'];

$current_page = (int) $_GET['page'];
$current_page = ($current_page == 0) ? 1 : $current_page;

?>

<header id="main-head" class="clearfix">
    <div style="height:103px;overflow:hidden;">&nbsp;</div>
    <nav id="main-nav">
    </nav><!-- #main-nav -->
</header><!-- #main-head -->

<div id="main-content" class="clearfix">

    <?php if($total_entry > 20): ?>
    <?php
    $start_range = range(1, $total_entry, 20);
    $end_range = ($total_entry < 40) ? array(20, $total_entry) : range(20, $total_entry, 20);
    ?>

    <div id="paging-wrap" class="clearfix">
        <ul id="paging-nav">
        <?php
        $output = '';

        //prev link
        $prev_page = $current_page - 20;
        if($prev_page >= 1)
            $output .= '<li><a href="?p=gallery&amp;page='.$prev_page.'">&lt;</a></li>';

        //show page links
        foreach($start_range as $key => $number) {
            $output .= '<li><a href="?p=gallery&amp;page='.$number.'">'.$number.'-'.$end_range[$key]."</a></li>\n";
            $last_start_number = $number;
        }

        //hack last link
        $output = str_replace('-</a></li>', '-'.$total_entry.'</a></li>', $output);
        if($last_start_number == $total_entry) {
            $output = str_replace('<li><a href="?p=gallery&amp;page='.$last_start_number.'">'.$last_start_number.'-'.$last_start_number.'</a></li>','<li><a href="?p=gallery&amp;page='.$last_start_number.'">'.$last_start_number.'</a></li>', $output );
        }
        //set active page
        $output = str_replace('<a href="?p=gallery&amp;page='.$current_page.'">', '<a href="?p=gallery&amp;page='.$current_page.'" class="active">', $output);

        $next_page = $current_page + 20;
        if($next_page <= $last_start_number)
            $output .= '<li><a href="?p=gallery&amp;page='.$next_page.'">&gt;</a></li>';

        echo $output;
        ?>
        </ul><!-- #paging-nav -->
        <span id="paging-title">Display</span>
    </div><!-- #paging-wrap -->
    <?php else: ?>
    <div id="blank-paging"></div>
    <?php endif; //total entry > 20 ?>
    <div id="gallery-wrap">
    <?php 
    if($total_entry > 0) :
        //show entry
        $ip_address = $_SERVER['REMOTE_ADDR'];
        $limit_start = $current_page - 1;
        $number = $current_page;

        $url = ( isset( $_SERVER['HTTPS'] ) && $_SERVER['HTTPS'] == 'on' ) ? 'https://' : 'http://';
        $url .= $_SERVER['HTTP_HOST'] . dirname($_SERVER['PHP_SELF']);
        ?>
            <?php while($row = mysql_fetch_object($result)): ?>
                <div class="photo-wrap can-vote">
                    <img height="113px" style="height:113px;overflow:hidden;line-height:0;" src="<?php echo $url ?>/inc/timthumb.php?src=<?php echo $url ?>/photos/<?php echo $row->photo ?>&amp;w=136&amp;h=113&amp;q=100&amp;a=t" alt="photo-contest" />
                </div>
            <?php $number++; endwhile; ?>
    <?php else: ?>
    <h2>no-one here</h2>
    <?php endif ?>
    </div><!-- #gallery-wrap -->
</div><!-- #main-content -->
<footer id="footer-main">

</footer><!-- #footer-main -->
<?php
$form_key = $formKey->generateKey();
$_SESSION['form_key'] = $form_key;
?>
<script> var key_val = '<?php echo $form_key ?>';</script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"></script>
<?php include 'footer.php'; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T05:26:31.137

您正在重新填充 $result ，`$result = mysql_fetch_array($result);`因此很明显 $result 不再是 mysql 资源。稍后在您的代码中，您尝试使用`mysql_fetch_object($result)`. 这应该是问题所在。尝试分配给不同的变量名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:18:51.933

如果`mysql_query()`没有返回资源，则表示查询失败。这很可能是由于某种 SQL 错误造成的。

周围的引号`count`也应该是反引号：

```
$query = "SELECT COUNT(`id`) as `count` FROM `$db_name`.`gallerytable` WHERE `approve` = 1 LIMIT 1;"; 
```

由于您`$result`在运行查询后进行了覆盖，因此您无法在代码中进一步访问查询结果集。

```
$result = mysql_query($query);
$result = mysql_fetch_array($result); // <--- You overwrite $result here

<?php while($row = mysql_fetch_object($result)): ?> 
```

我不确定第一个是否`$result`真的包含您要查找的内容，但似乎没有另一个查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T05:20:09.393

如果**mysql_query**返回 0 行，则**mysql_fetch_array()**返回 False

**[mysql_fetch_array()](http://php.net/manual/en/function.mysql-fetch-array.php)**

> 返回与获取的行相对应的字符串数组，如果没有更多行，则返回 FALSE。

* * *

```
$query = "SELECT COUNT(`id`) as 'count' FROM `$db_name`.`gallerytable` WHERE `approve` = 1 LIMIT 1;";
$result = mysql_query($query);
$numrows = mysql_num_rows($result);

if($numrows > 0){
    $result = mysql_fetch_array($result);
    ...
    ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T05:37:34.917

您已经覆盖了**$result**的值，对您的代码进行如下更改：

```
$query = "SELECT COUNT(`id`) as 'count' FROM `$db_name`.`gallerytable` WHERE `approve` = 1 LIMIT 1;";
$result_query = mysql_query($query); //<--- see here I have changed $result with $result_qury
$result = mysql_fetch_array($result_query);//<--- see here I have changed $result with $result_qury 
```

现在在这里使用这个变量**$result_query**

```
<?php while($row = mysql_fetch_object($result_query)): ?> 
```

现在你不会得到错误

# c - 编写简单的 GUI 应用程序？几个考虑

> ID：13081106
> 
> 赞同：1
> 
> 时间：2012-10-26T05:16:01.083
> 
> 标签：c, linux, bash

我想开始编写一些可以用作工具等的简单应用程序。我希望这些应用程序能让我简化我经常使用的某些终端进程。它们与我的本地文件以及其他应用程序（例如 db2）进行交互。为此，我已经开始学习一点 C 语言。

我以为我会使用带有嵌入式 bash 命令的 C。我想知道这是否是编写这些应用程序的最佳/最常用方法？有没有更好的方法来做到这一点？另外，我需要能够显示终端输出。这可能吗？我对这种方法的唯一问题是它不能很好地转移到非 Linux 操作系统。

任何见解或大方向的推动将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T05:28:24.907

如果您想要跨平台，请考虑[Qt](http://qt-project.org/)或[WxWidgets](http://www.wxwidgets.org/)。我会选择 Qt，但这只是因为我不知道 WxWidgets ;)

如果您想要快速简单的事情，请将 Qt 与[PyQt](http://wiki.python.org/moin/PyQt)或[PySide 一起](http://qt-project.org/wiki/PySide)使用（另请参阅[此 SO question](https://stackoverflow.com/questions/1297660/pyside-vs-pyqt)）。根据它的网页，WxWidgets 也有 Python 绑定。学习 Python 通常很有趣、有用，而且比学习 C++ 更快、更容易一个数量级。

忘记用于 GUI 编程的 C，GUI 本质上是基于对象的，并且更容易在自然支持对象的语言上使用。

对于子进程处理，快速搜索 Python 和 Qt[在 www.qtforum.org 找到了这个示例](http://www.qtforum.org/article/32172/qprocess-how-to-run-multiple-processes-in-a-loop.html?s=5b02b50266d444eba7c2f28adc2192efb483bea5#post104277)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:09:55.340

除了提到的**PyQt**和**wxPython**等工具包外，标准 python 本身还带有一个名为**Tkinter**的跨平台 GUI 工具包。

此外，如果您在 Linux 上，您可以尝试（对于 C）**Gtk**。

对于 C++，我建议**使用 Qt**或**wxWidgets**

或者如果您不介意安装重量级虚拟机，请尝试 Java。它带有**Swing**。

除了所有这些用于图形用户界面的**工具包之外，将图形用户程序与命令行程序接口是..好吧..没关系。**您将需要打开子进程（命令行进程）的管道，从中读取输出，写入子进程的输入流，并向用户显示适当的消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T16:03:43.070

我建议在 wxWidgets 上使用 Qt。对于 Linux 的可移植性，根据我的经验，Qt 效果更好。我有一些项目在 mac/windows 上运行良好，但由于运行特定 wxWidget 构建的细微差别，在 linux 上出现了段错误。使用 Qt 还允许您使用大量特定于 Qt 的高效和快速的数据结构。

# c# - 更改 WPF DataGrid 中单元格的背景颜色

> ID：13081107
> 
> 赞同：2
> 
> 时间：2012-10-26T05:16:05.553
> 
> 标签：c#, wpf, datagrid, datagridcell

我需要一个简单`code snippet`的来改变背景颜色`WPF` `DataGrid` `cell`。我有`column index`和`row index`。我想改变里面的颜色`CellEditEnding` `event hadler`。我写了`event handler`。现在我需要简单地`code snippet`改变`background color`.`cell`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-20T15:51:17.207

类似以下内容将允许您更改特定的单元格背景，而无需使用选定的...

```
using System.Windows;
using System.Windows.Controls;
using System.Windows.Controls.Primitives;
using System.Windows.Media;

namespace SelectDataGridCell
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            this.InitializeComponent();
        }

        private void Button_Click(object sender, System.Windows.RoutedEventArgs e)
        {
            DataGridCell cell = GetCell(1, 1, myDataGrid);
                    cell.Background = new SolidColorBrush(Colors.Red);
        }

        public DataGridCell GetCell(int rowIndex, int columnIndex, DataGrid dg)
        {
            DataGridRow row = dg.ItemContainerGenerator.ContainerFromIndex(rowIndex) as DataGridRow;
            DataGridCellsPresenter p = GetVisualChild<DataGridCellsPresenter>(row);
            DataGridCell cell = p.ItemContainerGenerator.ContainerFromIndex(columnIndex) as DataGridCell;
            return cell;
        }

        static T GetVisualChild<T>(Visual parent) where T : Visual
        {
            T child = default(T);
            int numVisuals = VisualTreeHelper.GetChildrenCount(parent);
            for (int i = 0; i < numVisuals; i++)
            {
                Visual v = (Visual)VisualTreeHelper.GetChild(parent, i);
                child = v as T;
                if (child == null)
                {
                    child = GetVisualChild<T>(v);
                }
                if (child != null)
                {
                    break;
                }
            }
            return child;
        } 
    }
} 
```

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    x:Class="SelectDataGridCell.MainWindow"
    x:Name="Window"
    Title="MainWindow"
    Width="640" Height="480">

    <Grid x:Name="LayoutRoot" DataContext="{Binding Source={StaticResource SampleDataSource}}">
        <DataGrid x:Name="myDataGrid" Margin="0,0,244,205" AutoGenerateColumns="False" ItemsSource="{Binding Collection}">
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding Property1}" Header="Property1"/>
                <DataGridCheckBoxColumn Binding="{Binding Property2}" Header="Property2"/>
            </DataGrid.Columns>
        </DataGrid>
        <Button Content="Button" HorizontalAlignment="Left" VerticalAlignment="Bottom" Width="75" Margin="8,0,0,146.04" Click="Button_Click"/>
    </Grid>
</Window> 
```

# html - 缩放页面时如何保持页面正文中 div 标签的大小不受影响？

> ID：13081116
> 
> 赞同：0
> 
> 时间：2012-10-26T05:16:34.987
> 
> 标签：html, css

我有一个 HTML 页面，其中正文包含一个 div 标签。在 div 标签内，我有一个包含其他 div 标签的表格。当我缩放正文时，下拉 div 标签应该被限制缩放（或者即使它被缩放，我也想将它恢复到原始大小）。正文的 CSS 是：

```
body {
    width:1000px;
    padding-top:100px;
    zoom: 1.165; -moz-transform: scale(1.165);
} 
```

代码如下所示。

```
<body>
<!--end of button effect-->
<div class="type-road-form">
<h1></h1>
<hr>
<table>
<tr id="rd-type">
    <td height="70">
        <div class="drop-down">
          <select name="select-rd-type" id="select-rd-type">
<option>Select Road Type</option>
            <option>urban</option>
        </div>
    </td>
</tr>
<tr id="sped-limit">
    <td height="70">
        <label>Speed Limit (mph)</label>
        <br>
        <div class="drop-down">
        <select id="Drop-Down-Speed" name="Speed Limit Selection">
        <option >Select Speed</option>
        <option>25</option>
        <option>30</option>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T05:26:13.867

您需要为您的 div 添加宽度，将以下内容放入样式表中

```
div.type-road-form { width: 1000px; } 
```

顺便说一句，在您需要删除它`</table>`之后，您还有一个额外的。`<body>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:39:32.530

我想你可以尝试设置你最父级的 div

```
style="position:relative" 
```

这对我有用，我认为这将是一个适当的解决方案，现在所有子 div 都将相应地定位并且不会移动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T05:35:58.813

不，没有这样做的好方法。您可以在此处获得更多参考：

[当用户放大和缩小页面时，如何保持 <div> 的大小不变？](https://stackoverflow.com/questions/6117349/how-to-keep-a-div-constant-in-size-as-the-user-zooms-in-and-out-on-the-page)

# java - 使用 mvn 3.0.4 构建 slf4j 时出错

> ID：13081117
> 
> 赞同：0
> 
> 时间：2012-10-26T05:16:40.227
> 
> 标签：java, maven, slf4j

```
[ERROR] Failed to execute goal on project slf4j-log4j12: Could not resolve dep
dencies for project org.slf4j:slf4j-log4j12:jar:1.6.7-SNAPSHOT: Failed to coll
t dependencies for [org.slf4j:slf4j-api:jar:1.6.7-SNAPSHOT (compile), log4j:lo
j:jar:1.2.17 (compile), junit:junit:jar:3.8.1 (test)]: Failed to read artifact
escriptor for log4j:log4j:jar:1.2.17: Could not transfer artifact log4j:log4j:
m:1.2.17 from/to central (http://repo.maven.apache.org/maven2): Connection to
tp://repo.maven.apache.org refused: Connection timed out: connect -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal
n project slf4j-log4j12: Could not resolve dependencies for project org.slf4j:
f4j-log4j12:jar:1.6.7-SNAPSHOT: Failed to collect dependencies for [org.slf4j:
f4j-api:jar:1.6.7-SNAPSHOT (compile), log4j:log4j:jar:1.2.17 (compile), junit:
nit:jar:3.8.1 (test)]
        at org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.get
pendencies(LifecycleDependencyResolver.java:210)
        at org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.res
veProjectDependencies(LifecycleDependencyResolver.java:117)
        at org.apache.maven.lifecycle.internal.MojoExecutor.ensureDependencies
eResolved(MojoExecutor.java:258)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecut
.java:201)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecut
.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecut
.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildPro
ct(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildPro
ct(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreaded
ild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(Lifecy
eStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImp
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcc
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(La
cher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.j
a:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(
uncher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.jav
352)
Caused by: org.apache.maven.project.DependencyResolutionException: Could not r
olve dependencies for project org.slf4j:slf4j-log4j12:jar:1.6.7-SNAPSHOT: Fail
 to collect dependencies for [org.slf4j:slf4j-api:jar:1.6.7-SNAPSHOT (compile)
log4j:log4j:jar:1.2.17 (compile), junit:junit:jar:3.8.1 (test)]
        at org.apache.maven.project.DefaultProjectDependenciesResolver.resolve
efaultProjectDependenciesResolver.java:158)
        at org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.get
pendencies(LifecycleDependencyResolver.java:185)
        ... 22 more
Caused by: org.sonatype.aether.collection.DependencyCollectionException: Faile
to collect dependencies for [org.slf4j:slf4j-api:jar:1.6.7-SNAPSHOT (compile),
og4j:log4j:jar:1.2.17 (compile), junit:junit:jar:3.8.1 (test)]
        at org.sonatype.aether.impl.internal.DefaultDependencyCollector.collec
ependencies(DefaultDependencyCollector.java:258)
        at org.sonatype.aether.impl.internal.DefaultRepositorySystem.collectDe
ndencies(DefaultRepositorySystem.java:308)
        at org.apache.maven.project.DefaultProjectDependenciesResolver.resolve
efaultProjectDependenciesResolver.java:150)
        ... 23 more
Caused by: org.sonatype.aether.resolution.ArtifactDescriptorException: Failed
 read artifact descriptor for log4j:log4j:jar:1.2.17
        at org.apache.maven.repository.internal.DefaultArtifactDescriptorReade
loadPom(DefaultArtifactDescriptorReader.java:296)
        at org.apache.maven.repository.internal.DefaultArtifactDescriptorReade
readArtifactDescriptor(DefaultArtifactDescriptorReader.java:186)
        at org.sonatype.aether.impl.internal.DefaultDependencyCollector.proces
DefaultDependencyCollector.java:412)
        at org.sonatype.aether.impl.internal.DefaultDependencyCollector.collec
ependencies(DefaultDependencyCollector.java:240)
        ... 25 more
Caused by: org.sonatype.aether.resolution.ArtifactResolutionException: Could n
 transfer artifact log4j:log4j:pom:1.2.17 from/to central (http://repo.maven.a
che.org/maven2): Connection to http://repo.maven.apache.org refused
        at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolve(D
aultArtifactResolver.java:538)
        at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolveAr
facts(DefaultArtifactResolver.java:216)
        at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolveAr
fact(DefaultArtifactResolver.java:193)
        at org.apache.maven.repository.internal.DefaultArtifactDescriptorReade
loadPom(DefaultArtifactDescriptorReader.java:281)
        ... 28 more
Caused by: org.sonatype.aether.transfer.ArtifactTransferException: Could not t
nsfer artifact log4j:log4j:pom:1.2.17 from/to central (http://repo.maven.apach
org/maven2): Connection to http://repo.maven.apache.org refused
        at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$4.wrap
agonRepositoryConnector.java:951)
        at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$4.wrap
agonRepositoryConnector.java:941)
        at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$GetTas
run(WagonRepositoryConnector.java:669)
        at org.sonatype.aether.util.concurrency.RunnableErrorForwarder$1.run(R
nableErrorForwarder.java:60)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolEx
utor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecut
.java:908)
        at java.lang.Thread.run(Thread.java:662)
Caused by: org.apache.maven.wagon.TransferFailedException: Connection to http:
repo.maven.apache.org refused
        at org.apache.maven.wagon.shared.http4.AbstractHttpClientWagon.fillInp
Data(AbstractHttpClientWagon.java:799)
        at org.apache.maven.wagon.StreamWagon.getInputStream(StreamWagon.java:
6)
        at org.apache.maven.wagon.StreamWagon.getIfNewer(StreamWagon.java:88)
        at org.apache.maven.wagon.StreamWagon.get(StreamWagon.java:61)
        at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$GetTas
run(WagonRepositoryConnector.java:601)
        ... 4 more
Caused by: org.apache.maven.wagon.providers.http.httpclient.conn.HttpHostConne
Exception: Connection to http://repo.maven.apache.org refused
        at org.apache.maven.wagon.providers.http.httpclient.impl.conn.DefaultC
entConnectionOperator.openConnection(DefaultClientConnectionOperator.java:158)
        at org.apache.maven.wagon.providers.http.httpclient.impl.conn.Abstract
olEntry.open(AbstractPoolEntry.java:149)
        at org.apache.maven.wagon.providers.http.httpclient.impl.conn.Abstract
oledConnAdapter.open(AbstractPooledConnAdapter.java:121)
        at org.apache.maven.wagon.providers.http.httpclient.impl.client.Defaul
equestDirector.tryConnect(DefaultRequestDirector.java:573)
        at org.apache.maven.wagon.providers.http.httpclient.impl.client.Defaul
equestDirector.execute(DefaultRequestDirector.java:425)
        at org.apache.maven.wagon.providers.http.httpclient.impl.client.Abstra
HttpClient.execute(AbstractHttpClient.java:820)
        at org.apache.maven.wagon.providers.http.httpclient.impl.client.Abstra
HttpClient.execute(AbstractHttpClient.java:754)
        at org.apache.maven.wagon.shared.http4.AbstractHttpClientWagon.execute
bstractHttpClientWagon.java:674)
        at org.apache.maven.wagon.shared.http4.AbstractHttpClientWagon.fillInp
Data(AbstractHttpClientWagon.java:793)
        ... 8 more
Caused by: java.net.ConnectException: Connection timed out: connect
        at java.net.PlainSocketImpl.socketConnect(Native Method)
        at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
        at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
        at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
        at java.net.Socket.connect(Socket.java:529)
        at org.apache.maven.wagon.providers.http.httpclient.conn.scheme.PlainS
ketFactory.connectSocket(PlainSocketFactory.java:123)
        at org.apache.maven.wagon.providers.http.httpclient.impl.conn.DefaultC
entConnectionOperator.openConnection(DefaultClientConnectionOperator.java:148)
        ... 16 more
[ERROR]
[ERROR]
[ERROR] For more information about the errors and possible solutions, please r
d the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyRe
lutionException
[ERROR]
[ERROR] After correcting the problems, you can resume the build with the comma

[ERROR]   mvn <goals> -rf :slf4j-log4j12 
```

我没有修改任何代码。我只是克隆它并尝试使用`mvn -install`. 知道为什么会出现这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T05:52:06.157

它与 maven 或 slf4j 无关，这是一个网络错误，因为您无法访问中央 maven 存储库（“连接超时”到 repo.maven.apache.org）。存储库（暂时）关闭，或者您遇到了网络问题（例如缺少代理）。

# sql-server - 使用游标更新

> ID：13081125
> 
> 赞同：0
> 
> 时间：2012-10-26T05:18:25.793
> 
> 标签：sql-server

希望你一切都好。我在 sql server 查询中有一些问题。

我想更新一个有 534,000 行的表中的记录。如果我创建一个while循环来更新所有记录，那么它需要时间。

那么我应该为更新记录创建一个游标。在此之后，我使用 Fetch 创建了一个用于更新的游标。这个游标在 10,000 行中快速完成更新过程，但是当我使用超过 30,000 行的表时，执行查询需要 5 分钟。我不知道是什么问题。

这是我的代码

```
DECLARE @RNo INT --Declaring the Variable @id
DECLARE @id INT --Declaring the Variable @id
set @RNo=1

DECLARE @MyCursor CURSOR -- Declaring the Cursor
SET @MyCursor = CURSOR --Assigning the cursor
FOR
SELECT Col1 FROM MyTable  --Query related to Cursor
for update of Col2

OPEN @MyCursor -- Opening the Created cursor
FETCH NEXT FROM @MyCursor --Retrieving the record one by one
INTO @id --Assigning the value in declared Variable
    WHILE @@FETCH_STATUS = 0 
    BEGIN

        update MyTable
        set Col2=@RNo
         where current of @MyCursor

        set @RNo=@rno+1
        print @id
FETCH NEXT
    FROM @MyCursor INTO @id
END
CLOSE @MyCursor -- Closing the Cursor
DEALLOCATE @MyCursor -- Deallocating the Cursor Memory 
```

注意：我的查询使用正确的数据执行，但问题是它需要 5 分钟，我只想在 10 秒内执行此查询。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T05:32:24.577

一位 SQL Server 专家曾经告诉我，如果您需要使用游标，请务必确保使用 LOCAL STATIC 游标。除此之外，此查询将一次性更新您的数据。

```
;WITH TMP AS (
  SELECT *, ROW_NUMBER() OVER (ORDER BY Col1) RN
  FROM MyTable
)
UPDATE TMP SET Col2 = RN; 
```

我任意选择生成基于 的行编号`ORDER BY Col1`，您可以对其进行调整。您的光标没有`ORDER BY`子句，因此无论如何它都是伪随机的。

# multithreading - 通过在 Visual C++ 中传递函数来创建进程

> ID：13081128
> 
> 赞同：1
> 
> 时间：2012-10-26T05:18:36.933
> 
> 标签：multithreading, visual-c++, dll, process, createprocess

我是 C++ 的新手，正在开发一个需要并行处理的模块。

我需要通过将不同的函数（执行某些特定任务）传递给从 C++ 中的 main （类似于[_beginthread](http://msdn.microsoft.com/en-us/library/kdzttdcb%28v=vs.80%29.aspx)）创建的每个进程来创建 2 或 3 个进程，其中 main 应该在创建所有进程后立即退出，并且创建的新进程将继续，直到他们完成。

当我尝试使用线程时，我的主线程应该等到我的所有线程都完成，如果不是我的主线程退出，我所有的孩子都会被杀死。但我不想要这种方法，因为多个 DLL 中存在许多主要方法。我需要调用每个 DLL 中的每个 main，这些 main(s) 将负责创建所需数量的进程。

我尝试查看具有以下语法的[CreateProcess函数。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)

```
BOOL WINAPI CreateProcess(
  _In_opt_     LPCTSTR lpApplicationName,
  _Inout_opt_  LPTSTR lpCommandLine,
  _In_opt_     LPSECURITY_ATTRIBUTES lpProcessAttributes,
  _In_opt_     LPSECURITY_ATTRIBUTES lpThreadAttributes,
  _In_         BOOL bInheritHandles,
  _In_         DWORD dwCreationFlags,
  _In_opt_     LPVOID lpEnvironment,
  _In_opt_     LPCTSTR lpCurrentDirectory,
  _In_         LPSTARTUPINFO lpStartupInfo,
  _Out_        LPPROCESS_INFORMATION lpProcessInformation
); 
```

基于此，我了解我一开始所说的将传递给进程的函数应该创建为单独的控制台应用程序（例如：exe），然后在此处使用。

我的理解正确吗？还是有任何其他方法可以真正调用彼此独立的单独进程中的函数？

如果需要任何进一步的信息，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:27:08.667

是的，你理解正确。当您使用 CreateProcess() 时，它实际上创建了一个与 main 无关的进程。您还可以从一个完全独立的程序创建多个进程。

无需在彼此独立的单独进程中调用函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:38:13.990

通常，您可以通过使用线程来解决问题，然后在退出主函数之前*等待*线程完成。您可以等待线程完成。 [http://msdn.microsoft.com/en-us/library/windows/desktop/ms687025%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687025%28v=vs.85%29.aspx)

# javascript - 表单重新渲染后如何重新执行javascript函数？

> ID：13081129
> 
> 赞同：17
> 
> 时间：2012-10-26T05:18:44.773
> 
> 标签：javascript, jsf, rerender

我需要在表单重新呈现后重新执行 javascript。简单地说，在 XHTML 内容之后放入 javascript 将无济于事，因为它是部分请求。此外，我不能使用“onComplete”，因为我从中重新呈现表单的命令按钮在多个地方使用的 JSF 组件中。我需要在本地进行修复。

有什么办法吗？我想知道 f:ajax 在这种情况下是否会有所帮助。

请让我知道，如果有人对此有所了解。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-26T10:54:09.000

最简单的方法是将JS函数调用放在待更新组件本身中。

```
<h:form>
    ...
    <h:commandButton value="submit"><f:ajax render="@form" /></h:commandButton>
    <h:outputScript>someFunction();</h:outputScript>
</h:form> 
```

这样，它会在页面加载时执行，并且如果表单被 ajax 更新，它也会执行。

至于它`<f:ajax>`本身，你也可以使用它的`onevent`属性。

```
<f:ajax ... onevent="handleAjax" /> 
```

和

```
function handleAjax(data) {
    var status = data.status;

    switch(status) {
        case "begin":
            // This is invoked right before ajax request is sent.
            break;

        case "complete":
            // This is invoked right after ajax response is returned.
            break;

        case "success":
            // This is invoked right after successful processing of ajax response and update of HTML DOM.
            someFunction();
            break;
    }
} 
```

您可以添加一个全局挂钩，`jsf.ajax.addOnEvent()`这样您就不需要在功能要求适用于每个 ajax 请求的每个`onevent`属性中指定它。`<f:ajax>`

```
jsf.ajax.addOnEvent(handleAjax); 
```

另一种方法是使用[OmniFaces JSF 实用程序库](http://omnifaces.org)[`<h:onloadScript>`](http://showcase.omnifaces.org/components/onloadScript)，该库正是为此目的提供了 OmniFaces JSF 实用程序库。你可以把它放在你想要的头上。

```
<h:onloadScript>someFunction();</h:onloadScript> 
```

这会在视图上的每个 ajax 请求上自动重新执行，因此您无需将其复制到视图中可以进行 ajax 更新的多个单独位置，或者在每个`<f:ajax render>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-15T15:06:00.617

如果你想用 JQuery/JS 做**复杂的操作**并且不是特别关心[这个，BalusC 第一个答案是最合适的](http://robertnyman.com/2008/11/20/why-inline-css-and-javascript-code-is-such-a-bad-thing/)

对于更复杂的 JS，如果您决定使用全局事件处理程序，例如您使用 JS 将`bind`函数传递给元素，这些函数将被重新绑定（因此执行两次），因此您需要一些方法来确定需要什么重新执行。

我最后做的是从事件回调中获取 id 并只执行相关的 JS/JQuery：

```
jsf.ajax.addOnEvent(ajaxCompleteProcess);

function ajaxCompleteProcess(data) {
    if (data.status && data.status === 'success') {
        var children1 = data.responseXML.children;
        for (i = 0; i < children1.length; i += 1) {
            var children2 = children1[i].children;
            for (j = 0; j < children2.length; j += 1) {
                var children3 = children2[j].children;
                for (y = 0; y < children3.length; y += 1) {
                    if (children3[y].id.indexOf('javax.faces.ViewState') != -1)
                        continue;
                    elementProcess(('#' + children3[y].id.replace(/\:/g, '\\:')));
                }
            }
        }
    }
} 
```

注意：这些丑陋`for`的循环可能不是必需的（您可以使用 clildren[0]），但我还没有时间检查规范。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-26T07:20:05.690

您可以将 jQuery 添加到您的应用程序并执行以下操作：

```
$(#yourComponentId).load(function(){
   //execute javascript.
}); 
```

你可以看看这里[http://api.jquery.com/load/](http://api.jquery.com/load/)

LE：那是在

```
$(document).ready(function(){
} 
```

俄亥俄州

# git - 有没有一种简单的方法来管理多个版本的 git？

> ID：13081130
> 
> 赞同：4
> 
> 时间：2012-10-26T05:18:49.073
> 
> 标签：git

换句话说，是否有一个管理 git 版本的工具，类似于[nvm](https://github.com/creationix/nvm)和[rvm](https://rvm.io/)对 node 和 ruby​​ 所做的（分别）？

**编辑：**

我想我的问题的标题有点误导。就其本身而言，我真的不想同时使用多个版本。下载源代码压缩包并手动构建/安装很烦人。简化这个过程会很棒。虽然有通用的包管理工具，例如`brew`、`yum`和`apt`，但它们的更新速度可能很慢，并且它们在平台之间有所不同。有一个简单的界面来安装/升级 git 会让我很开心 :)

假设我想与最新的 git 版本保持同步，或者甚至在新的盒子/帐户中新安装，而无需手动执行所有构建步骤。在我的完美世界中，这就像做这样的事情一样简单：

```
$ git --version
-bash: git: command not found
$ curl -sL https://SOMEURL | bash use latest
downloading v1.8.0...
building v1.8.0...
done!
using git v1.8.0
$ git --version
git version v1.8.0
$ gvm ls
  v1.8.0
* default -> 1.8 (v1.8.0) 
```

或者，升级如下：

```
$ git --version
git version 1.7.9.1
$ gvm ls
  v1.7.9.1
  v1.7.8
  v1.7.7.5
* default -> 1.7 (v1.7.9.1)
$ gvm install latest
downloading 1.8.0...
building 1.8.0...
done!
$ gvm alias default 1.8
$ gvm use default
now using git v1.8.0
$ git --version
git version 1.8.0
$ gvm ls
  v1.8.0
  v1.7.9.1
  v1.7.8
  v1.7.7.5
* default -> 1.8 (v1.8.0) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T05:25:13.167

不是我听说过的。但是，您可能可以利用您的发行版的包管理器来执行此任务。

例如，安装了[Homebrew](http://mxcl.github.com/homebrew/)的 Mac 用户可以使用该`brew switch`命令来更改特定软件包的当前活动版本。许多其他包管理器可以使用相同的技巧。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T06:03:20.397

考虑到“ [Git 存储库向后兼容性](https://stackoverflow.com/questions/1314668/git-repository-backwards-compatibility)”非常稳定，使用多个 git 版本的原因很低。
大多数缺失的功能会影响客户端，而不是它从远程存储库推送/拉取的能力（除了[1.6.4 之前的 git 缺少的一些传输机制](https://stackoverflow.com/a/1354102/6309)）。

这就是为什么没有专门用于此的工具的原因。
话虽如此：

*   没有什么能阻止您使用不同的安装路径在本地编译尽可能多的 git。
*   `yum install git-core`您仍然可以使用`apt-get install git-core`.
    但是，这[不允许*多次*安装同一个包](https://stackoverflow.com/questions/10537211/installing-multiple-versions-of-the-same-package-using-yum)。
    但是您仍然可以在任何给定时间搜索并选择您想要的一个版本：`yum search git-core`.

# php - 在 PHP mysql_query() 中一次运行两个 MySQL 查询

> ID：13081132
> 
> 赞同：1
> 
> 时间：2012-10-26T05:18:55.173
> 
> 标签：php, mysql, sql

我需要使用`SELECT LAST_INSERT_ID()`MySQL 的函数来获取最后插入的行的 ID。当我尝试运行它时： -

```
 mysql_query("
    INSERT INTO `posts`
           (`user`, `body`, `time`, `pageID`)
           VALUES('pachykutty', 'testMessage', '2012-10-26 04:59:43', 1);
    SELECT LAST_INSERT_ID();"); 
```

给我错误，但是当我像这样分别运行两个查询时：-

```
mysql_query("
INSERT INTO `posts`
       (`user`, `body`, `time`, `pageID`)
       VALUES('pachykutty', 'testMessage', '2012-10-26 04:59:43', 1)");
mysql_query("SELECT LAST_INSERT_ID()"); 
```

没关系。我担心如果两个客户端同时运行查询，他们的 LAST_INSERT_ID 会发生冲突。所以我想毫不拖延地同时运行这两个查询。有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T05:24:32.880

你可以使用这样的查询

```
mysql_query("
INSERT INTO `posts`
       (`user`, `body`, `time`, `pageID`)
       VALUES('pachykutty', 'testMessage', '2012-10-26 04:59:43', 1)");
$var =  mysql_insert_id(); 
```

mysql_insert_id 作用于最后执行的查询。

所以不用担心并使用上面的代码。

# java - 由不同线程更新的对象仅对另一个线程部分可见

> ID：13081147
> 
> 赞同：1
> 
> 时间：2012-10-26T05:19:45.033
> 
> 标签：java, string, multithreading, share

我正在做多线程编程并遇到一个有线问题：对象更新对另一个线程仅部分可见。这是伪代码：

初始状态：线程A运行，线程B阻塞

```
Class C {
    public int i;
    public String s;
} 
```

线程 A：

```
...
// c is an object of class C and is accessible by both thread A and B
c.i = 10;
c.s = "success";
wakeup thread B: 
```

线程 B：

```
// after wakeup
assert(c.i == 10);
assert(c.s.equals("success")); 
```

问题是：在线程 B 中，有时字符串 cs 的值实际上为空。但我希望它具有“成功”的价值。另一方面，如果我将 Thread.sleep(sometime) 放在断言语句之前，那么我可以看到 cs 的预期值，我不知道它为什么会发生。

我试图将归档变量 s 声明为 volatile，但它没有帮助。

谢谢！

**更新** 感谢所有回复/答案。经过更多的实验和调查，我相信这是我正在使用的框架的一个错误。该框架管理线程的挂起/恢复，当有许多并发请求/连接（如 10k 个线程）时，它会陷入混乱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T05:26:33.533

当您使用多线程时，您的所有线程都将`CPU`在其中共享。不确定哪个线程先完成，哪个线程最后完成。最后开始的可能`Thread`先结束。这完全取决于所使用的`CPU`调度算法。

因此，如果您在没有调用`sleep`或`wait`在其中任何一个线程上运行两个线程（taht 没有`interrupting`其中任何一个），那么 CPU 分配将在两个`Threads`. `Thread B`因此，甚至在完成之前获得 CPU肯定是有可能的`Thread A`。

但是，当您`Thread B`的睡眠时间足以`A`完成工作时，将`CPU`分配给线程 A 直到那时。所以它有足够的时间来完成它的工作（假设你只有两个线程`A`并且`B`当时处于`runnable`状态）

这就是为什么您的`multithreading`代码的结果永远不会相同的原因。它在多次运行中不断变化。因此，当您运行代码一段`10 - 15`时间时。你可以看到这种差异。

为确保您`Thread A`在之前完成`Thread B`，您可以调用`wait`您正在使用`Thread B`的特定实例`Thread A`。然后当`Thread A`完成时，它会调用`notify`通知`Thread B`它已经完成工作，然后`Thread B`可以继续，

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T05:28:34.547

您需要在线程 A 和 B 之间进行一些同步。

线程 A：

```
c.i = 10;
c.s = "success";
c.notify() 
```

线程 B：

```
c.wait()
assert(c.i == 10);
assert(c.s.equals("success")); 
```

如果没有这种同步（或类似的东西，比如一个`synchronized`块），你不能保证写入已经从一个线程到另一个线程（根本，或者以任何特定的顺序）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T12:02:00.413

使用 volatile 将解决您的问题，例如在您的情况下，您可以：

```
class C {
    public int i;
    volatile public String s;
} 
```

声明一个 volatile 变量意味着：这个变量的值永远不会被缓存到线程本地：所有的读写都将直接进入“主内存”；对变量的访问就像它被包含在一个同步块中一样，在其自身上同步。

试试看！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T11:46:00.773

在多线程应用程序中，每个 CPU 都有一个本地内存缓存，并且为了优化目的，内存操作被大量重新排序。您需要确保`C`线程之间共享的实例是`synchronized`. 这既确保了一个且只有一个线程可以进行操作，*并且*确保两个线程都使用对象的最新内存版本。

如果您使用`synchronized`关键字，通常在`final`对象上进行同步：

```
 // shared by both threads
  final C c = new C();
  ... 
```

线程 A：

```
 ...
  // this allows us to notify on c _and_ synchronizes memory
  synchronized (c) {
     c.i = 10;
     c.s = "success";
     // signal the other thread that is wait-ing
     c.notify();
  } 
```

线程 B：

```
 // this allows us to wait for C _and_ synchronizes memory
  synchronized (c) {
     // it's common to test for wait in while loop cause of "spurious interrupts"
     while (c.s == null) {
        // wait for c to be updated
        c.wait();
     }
  }
  assert(c.i == 10);
  assert(c.s.equals("success")); 
```

如果`C`对象是由 ThreadA 构造的，那么可以改为`Object lock = new Object();`为 A 和 B 定义一个 final 来同步。您永远不应该对正在更改的对象进行同步，因为 A 和 B*必须*在*同一个*对象引用上同步，等待/通知才能工作。

> 我试图将归档变量 s 声明为 volatile，但它没有帮助。

如果两者都不稳定`c.i` *，* `c.s`那么这*应该可以*工作，但这将取决于 A 和 B 之间的信号发送方式。可能是`B`太早醒来了？此外，如果`c`对象正在更改，那么您需要使`C c`自身的定义也不稳定。这里的`synchronized`关键字处理信令和内存同步。

希望这可以帮助。

# android - 列表视图中的两个可点击项目

> ID：13081156
> 
> 赞同：1
> 
> 时间：2012-10-26T05:20:21.607
> 
> 标签：android, android-listview

我有一部 Android Eclair (2.1) 手机，我正在使用通话记录功能和

我通过一个列表视图，在触摸**左侧**时，我被重定向到**另一个具有更详细通话记录的列表视图，**在**右侧**我得到一个**“呼叫”按钮**，

经过研究并浏览了互联网上的多个帖子后，我不知道如何实现这一点，我想在我的应用程序中实现这个功能。

这里的任何人都可以将我重定向到任何整洁的好教程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T05:24:48.000

您可以在基本适配器的 getview 方法中执行此操作：

```
public View getView(final int position, View convertView, ViewGroup parent) {
    DemoClass holder;
    if (convertView == null) {
        convertView = mInflater.inflate(
                R.layout.layout_name, null);
        holder = new DemoClass();
        holder.mTxtVwNameTag = (TextView) convertView
                .findViewById(R.id.TxtVwOptionName);

        holder.mBtnApply = (Button) convertView.findViewById(R.id.BtnApply);// Here you can handle onclick events for list view items

        holder.mBtnApply.setFocusable(false);

        holder.mBtnApply.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                mIntPos = position;
                Log.d("++++++++" , "List item Position : " + mIntPos);
                new ApplyOfferAsync().execute();
            }
        });

        convertView.setTag(holder);
    } else {
        holder = (DemoClass) convertView.getTag();
    }
    try {
        holder.mTxtVwNameTag.setText(mNameTags.get(position));
    } catch (Exception e) {
        e.printStackTrace();
    }
    return convertView;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T05:24:52.693

您必须使用视图的触摸侦听器或您的自定义布局。

```
wv.setOnTouchListener(new OnTouchListener()
    {

        public boolean onTouch(View arg0, MotionEvent arg1) 
        {
            try
            {
            if(arg1.getAction()==MotionEvent.ACTION_DOWN)
            {
                x_down = (int) arg1.getX();
                y_down = (int) arg1.getY();

            Log.v("log", "x pos is "+x_down +"y pos is "+y_down);
            return true;
            }

            else if(arg1.getAction()==MotionEvent.ACTION_UP)
            {
                x_up = (int) arg1.getX();
                y_up = (int) arg1.getY();

            Log.v("log", "x pos is "+x_up +"y pos is "+y_up);

            if((x_down-x_up)>30)
            {
                //do stuf here
            }
            else if((x_up-x_down)>30)
            {
                 //do stuf here
            }
            return false;
            }
            else
            {
                return false;
            }

            }

            catch (Exception e)
            {
                e.printStackTrace();
                return false;

            }

        }
    }); 
```

# mysql - SQL 从不同的表中获取值

> ID：13081157
> 
> 赞同：1
> 
> 时间：2012-10-26T05:20:22.307
> 
> 标签：mysql, sql

我有 2 个 sql 表，例如：

```
user_logs 
-id
-log_date
-log

system_logs
-id
-create_date
-log 
```

是否可以从这些表中获取值并按日期对它们进行排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T05:22:47.223

您是否正在寻找类似此查询的内容

```
(select id, date, log from user_logs)
union
(select id, date, log from system_logs)
order by date; 
```

更好的设计可能是使用一个包含 id、date、log 和 log_type 列的表，其中 log_type 定义日志是用户日志还是系统日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:25:37.433

```
SELECT id, date FROM user_logs UNION SELECT id, date from system_logs ORDER BY date DESC; 
```

或类似的东西，无论如何 UNION 是您正在寻找的关键字，[请参阅链接](http://dev.mysql.com/doc/refman/5.5/en/union.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T05:28:06.280

尝试使用`UNION`

```
SELECT *
FROM
(
    SELECT id, date, log FROM user_logs
    UNION
    SELECT id, date, log FROM system_logs
)
ORDER BY date desc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T05:28:12.010

```
 SELECT *
FROM
( SELECT id,
           date,
           log
    FROM system_logs

    UNION

    SELECT id,
           date,
           log
    FROM user_logs) order by date  DESC 
```

或者

```
SELECT id,
               date,
               log
        FROM system_logs

        UNION

        SELECT id,
               date,
               log
        FROM user_logs order by date  DESC 
```

# c# - 如何通过在cshtml页面的输入文本框上按回车键来触发按钮

> ID：13081158
> 
> 赞同：1
> 
> 时间：2012-10-26T05:20:22.277
> 
> 标签：c#, c#-4.0, razor, telerik, asp.net-mvc-4

我的代码：

文本框字段：

```
 <input id="LastName" type="text" filtercolumn="LastName" class="filterCtrl" style="width:135px; height:15px"/> 
```

在上面的文本框中按回车键时想要触发以下按钮：

```
<input type="button" class="button w100" onclick="javascript:btnAdvanceSearchClick();" value="Search" /> 
```

单击按钮时 ajax 请求网格的 Javascript 函数：

```
function btnAdvanceSearchClick() {
        _loadData = true;
        var $grid = $('#AdvanceSearchGrid').data('tGrid'); 
        $grid.ajaxRequest();
        $('div#divSearchGrid').show();
} 
```

我的 Search ActionControl 方法是从以下代码调用的：

```
 @(Html.Telerik().Grid<Web.Mvc.Models.Search.SearchModel>()
    .Name("AdvanceSearchGrid")
    .DataBinding(db => db.Ajax()
        .Select("SearchUserByFilter", "Search", new { _loadData, _filter }).Enabled(true)
                ) 
```

当用户在文本框中单击 enterkey 时如何点击按钮。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T13:17:52.447

这是我根据您要实现的目标编写的简单标记

```
<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
    <input id="LastName" type="text" />
    <input id="searchButton" type="button" onclick="javascript: btnAdvanceSearchClick();" value="Search" />

    <script>
        $(document).ready(function () {
            $("#LastName").keypress(function (event) {
                if (event.which == 13) {
                    $("#searchButton").click();
                }
            });
        });

        function btnAdvanceSearchClick() {
            alert("search invoked. Query : " + $("#LastName").val());
        }
    </script>
</body>
</html> 
```

我将按键事件附加到文本框。当按键事件发生时 - 我检查它是否是 Enter 按键。如果是，我只需调用按钮上的 click() 方法。

希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:30:23.380

您可以将函数绑定到事件`onkeyup`或`onkeydown`事件并检查按下的最后一个键是否是输入（换行符）。如果是则执行按钮单击。

```
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script type="text/javascript">
        function triggerButton() {
            var input = $("#LastName");
            var lastKey = input.val().substr(input.val().length-1);
            if (lastKey == '\n') {
                 $("#mybutton").click();
            }
        }

        function onClick() {
            $("#p1").html('the button was clicked!');
        };
    </script>
</head>
<body>
    <textarea id="LastName" type="text" filtercolumn="LastName" onkeyup="triggerButton()" class="filterCtrl" style="width:135px; height:15px"></textarea>
    <button id='mybutton' onclick='onClick()'>Button</button>
    <p id='p1'></p>
</body> 
```

# php - 上传图片到服务器

> ID：13081159
> 
> 赞同：1
> 
> 时间：2012-10-26T05:20:23.643
> 
> 标签：php, html, image, upload

嗨朋友们我正在点击这个链接[http://code.google.com/p/upload-at-click/](http://code.google.com/p/upload-at-click/)来上传图片我有一个 HTML、一个用于移动上传图片的服务器端 php 文件和一些依赖的 .js 文件。 2 问题： 1\. 我的代码运行良好，但是当我的服务器在同一台机器上时，我在给定的路径/文件夹中找不到图像。2.当它在不同的机器上时我无法与服务器建立连接，即-->使用IP地址

这是我的代码服务器端脚本 .php 文件

```
<?php
$tmp_file_name = $_FILES['Filedata']['tmp_name'];
$ok = move_uploaded_file($tmp_file_name, '/image/');

// This message will be passed to 'oncomplete' function
echo $ok ? "OK" : "FAIL";
 ?> 
```

我的 html 文件

```
<html> 
<head> 
    <title>upload-at-click demo</title> 

<script type="text/javascript" src="upclick-min.js"></script>
<!--http://code.google.com/p/upload-at-click/-->
<script type="text/javascript" src="upclick.js"></script>
</head> 
<body> 

<h1>Demo</h1>
<ol>
  <li>Click on the button</li>
  <li>Select file in "Open file" dialog</li>
  <li>Click Open</li>
</ol>
And you will see message: 'Starting upload: &ltfile name&gt'<br>
Then, after file uploaded, you will see message: 'Uploaded!'.
<br>
<br>

<input type="button" id="uploader" value="Upload">

 <script type="text/javascript">

   var uploader = document.getElementById('uploader');

   upclick(
     {
      element: uploader,
      action: 'test.php', // path to server php file for storing image . 
      onstart:
        function(filename)
        {
         // alert('Start upload: ' + filename);
        },
      oncomplete:
        function(response_data) 
        {
          alert(response_data);
        }
     });

   </script>

</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T05:23:16.157

该`move_uploaded_file`函数应该将图像的完整路径作为第二个参数，因此您必须替换`/your_path/`为`/your_path/your_file_name.extension`. 那应该可以解决您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:36:52.287

你可以这样使用

```
$path = $_SERVER["DOCUMENT_ROOT"]."/images/";

$tmp_file_name = $_FILES['Filedata']['tmp_name'];
$ok = move_uploaded_file($tmp_file_name, $path); 
```

# android - 条形图在android中的问题

> ID：13081160
> 
> 赞同：0
> 
> 时间：2012-10-26T05:20:37.830
> 
> 标签：android, web-services, bar-chart

有没有人在您的 logcat 上遇到以下问题？在这里，我试图在 achartengine 库的帮助下在 android 中创建一个条形图。但问题是我通过使用它从 Web 服务获取 x 和 y 轴值。

建议请..

提前致谢！..

```
10-26 10:37:19.936: W/KeyCharacterMap(715): No keyboard for id 0
10-26 10:37:19.936: W/KeyCharacterMap(715): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
10-26 10:37:30.555: D/AndroidRuntime(715): Shutting down VM
10-26 10:37:30.555: W/dalvikvm(715): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
10-26 10:37:30.565: E/AndroidRuntime(715): FATAL EXCEPTION: main
10-26 10:37:30.565: E/AndroidRuntime(715): java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
10-26 10:37:30.565: E/AndroidRuntime(715):  at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:257)
10-26 10:37:30.565: E/AndroidRuntime(715):  at java.util.ArrayList.get(ArrayList.java:311)
10-26 10:37:30.565: E/AndroidRuntime(715):  at com.example.barchart_test.Chart_MainActivity$1.onClick(Chart_MainActivity.java:46)
10-26 10:37:30.565: E/AndroidRuntime(715):  at android.view.View.performClick(View.java:2408)
10-26 10:37:30.565: E/AndroidRuntime(715):  at android.view.View$PerformClick.run(View.java:8816)
10-26 10:37:30.565: E/AndroidRuntime(715):  at android.os.Handler.handleCallback(Handler.java:587)
10-26 10:37:30.565: E/AndroidRuntime(715):  at android.os.Handler.dispatchMessage(Handler.java:92)
10-26 10:37:30.565: E/AndroidRuntime(715):  at android.os.Looper.loop(Looper.java:123)
10-26 10:37:30.565: E/AndroidRuntime(715):  at android.app.ActivityThread.main(ActivityThread.java:4627)
10-26 10:37:30.565: E/AndroidRuntime(715):  at java.lang.reflect.Method.invokeNative(Native Method)
10-26 10:37:30.565: E/AndroidRuntime(715):  at java.lang.reflect.Method.invoke(Method.java:521)
10-26 10:37:30.565: E/AndroidRuntime(715):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-26 10:37:30.565: E/AndroidRuntime(715):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-26 10:37:30.565: E/AndroidRuntime(715):  at dalvik.system.NativeStart.main(Native Method)
10-26 10:37:32.885: I/Process(715): Sending signal. PID: 715 SIG: 9 
```

**Chart_MainActivity.java**

```
public class Chart_MainActivity extends Activity 
{
EditText edt1, edt2;
// TextView txt_1;
Button btn;
ArrayList<String> result;

@Override
public void onCreate(Bundle savedInstanceState) 
{
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

edt1 = (EditText) findViewById(R.id.edt1_date1);
edt2 = (EditText) findViewById(R.id.edt_date2);
btn = (Button) findViewById(R.id.button_invoke);

result = new ArrayList<String>();

btn.setOnClickListener(new View.OnClickListener() 
{
    public void onClick(View v) 
    {

        result.addAll(getTMSChart(edt1.getText().toString(), edt2.getText().toString()));

    //  result.add(x);
    //  result.add(y);
        Intent in = new Intent(getApplicationContext(), NextActivity.class);
        in.putExtra("gotonextpageX", result.get(0));
        in.putExtra("gotonextpageY", result.get(1));

        startActivity(in);
    }
});}

private ArrayList<String> getTMSChart(String FromDate, String ToDate) 
{

// txt_1 = (TextView)findViewById(R.id.textView1);
System.setProperty("http.keepAlive", "false");
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

envelope.dotNet = true;

String NAMESPACE = "http://tempuri.org/";
String URL = "http://54.251.60.177/TMSOrdersService/TMSDetails.asmx";
String METHOD = "GetTMSChart";

SoapObject request = new SoapObject(NAMESPACE, METHOD);
request.addProperty("FromDate", FromDate);
request.addProperty("ToDate", ToDate);

envelope.setOutputSoapObject(request);
HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

String x = "", y = "";

ArrayList<String> stringResult = new ArrayList<String>();

try 
{
    androidHttpTransport.call(NAMESPACE + METHOD, envelope);
    SoapObject result = (SoapObject) envelope.bodyIn;
    SoapObject root = (SoapObject) ((SoapObject) (result).getProperty(0)).getProperty("NewDataSet");
    int tablesCount = root.getPropertyCount();

    for (int i = 0; i < tablesCount; i++) 
    {
        SoapObject table = (SoapObject) root.getProperty(i);
        int propertyCount = table.getPropertyCount();

        for (int j = 0; j < propertyCount; j++) 
        {

            stringResult.add(table.getPropertyAsString("Order_No").toString());
            stringResult.add(table.getPropertyAsString("Freight_Rate").toString());

        //  stringResult.add(table.getPropertyAsString("Margin_Percent").toString());
        //  freightRate = Integer.parseInt(table.getPropertyAsString("Freight_Rate"));

        }
    }
}
catch (ArrayIndexOutOfBoundsException e) 
{}
catch(Exception e)
{}

return stringResult;
}    } 
```

**NextActivity.java**

```
 public class NextActivity extends Activity 
 {
double x,y;

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main1);

    Bundle extras = getIntent().getExtras();
    if(extras != null)
    {   
        x = extras.getDouble("gotonextpageX");
        y = extras.getDouble("gotonextpageY");
    }
    else
    {}

    final GraphicalView gv =createIntent();
    RelativeLayout rl=(RelativeLayout)findViewById(R.id.rlt);
    rl.addView(gv);
}   

 public GraphicalView createIntent() 
 {

    String[] titles = new String[] { "Orders profit"};

    List<double[]> values = new ArrayList<double[]>();
    values.add(new double[] {x,x,x});
    values.add(new double[] {y,y,y});

    int[] colors = new int[] { Color.parseColor("#77c4d3")};

    XYMultipleSeriesRenderer renderer = buildBarRenderer(colors);
    renderer.setOrientation(Orientation.HORIZONTAL);

    setChartSettings(renderer,"","Order number","Freight Rate",0.5,12.5, 0, 1000, Color.GREEN, Color.GREEN);

    renderer.setXLabels(1);
    renderer.setYLabels(5);

    renderer.setPanEnabled(true, false);

    /*renderer.addXTextLabel(1, "Jan");
    renderer.addXTextLabel(2, "Feb");
    renderer.addXTextLabel(3, "Mar");
    renderer.addXTextLabel(4, "Apr");
    renderer.addXTextLabel(5, "May");
    renderer.addXTextLabel(6, "Jun");
    */

    int length = renderer.getSeriesRendererCount();

    for (int i = 0; i < length; i++) 
    {
        SimpleSeriesRenderer seriesRenderer = renderer.getSeriesRendererAt(i);
        seriesRenderer.setDisplayChartValues(true);
      }

   final GraphicalView grfv = ChartFactory.getBarChartView(NextActivity.this, buildBarDataset(titles, values), renderer,Type.DEFAULT);
   return grfv;
   }

   protected XYMultipleSeriesRenderer buildBarRenderer(int[] colors) 
   {

       XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();

       renderer.setAxisTitleTextSize(16);
       renderer.setChartTitleTextSize(20);

       renderer.setLabelsTextSize(15);
       renderer.setLegendTextSize(15);

       renderer.setBarSpacing(1);

       renderer.setMarginsColor(Color.parseColor("#0E120E"));
       renderer.setXLabelsColor(Color.WHITE);
       renderer.setYLabelsColor(0,Color.WHITE);

       renderer.setApplyBackgroundColor(true);
       renderer.setBackgroundColor(Color.parseColor("#000000"));

       int length = colors.length;

       for (int i = 0; i < length; i++) 
       {
           SimpleSeriesRenderer r = new SimpleSeriesRenderer();
           r.setColor(colors[i]);
           r.setChartValuesSpacing(-90);
           r.setChartValuesSpacing(15);
           renderer.addSeriesRenderer(r);
           }
          return renderer;
         }

   protected XYMultipleSeriesDataset buildBarDataset(String[] titles, List<double[]> values) 
   {
      XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
      int length = titles.length;

   for (int i = 0; i < length; i++) 
   {
       CategorySeries series = new CategorySeries(titles[i]);
       double[] v = values.get(i);
       int seriesLength = v.length;

       for (int k = 0; k < seriesLength; k++) 
       {
           series.add(v[k]);
           }
        dataset.addSeries(series.toXYSeries());
        }

   return dataset;
  }

 protected void setChartSettings(XYMultipleSeriesRenderer renderer, String title, String xTitle,
 String yTitle, double xMin, double xMax, double yMin, double yMax, int axesColor,int labelsColor) 
 {

     renderer.setChartTitle(title);
     renderer.setYLabelsAlign(Align.RIGHT);

     renderer.setXTitle(xTitle);
     renderer.setYTitle(yTitle);

     renderer.setXAxisMin(xMin);
     renderer.setXAxisMax(xMax);
     renderer.setYAxisMin(yMin);
     renderer.setYAxisMax(yMax);

     renderer.setMargins(new int[] { 10, 65, 10, 15 });

     renderer.setAxesColor(axesColor);
     renderer.setLabelsColor(labelsColor);
  } } 
```

**主要的.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<AbsoluteLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <EditText
        android:id="@+id/edt1_date1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_x="46dp"
        android:layout_y="116dp"
        android:ems="10" >

        <requestFocus />
    </EditText>

    <EditText
        android:id="@+id/edt_date2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_x="46dp"
        android:layout_y="180dp"
        android:ems="10" />

    <Button
        android:id="@+id/button_invoke"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_x="204dp"
        android:layout_y="246dp"
        android:text="Invoke" />
</AbsoluteLayout>
</LinearLayout> 
```

**main1.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/rlt"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

</RelativeLayout> 
```

**清单.xml**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.barchart_test"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="8" android:maxSdkVersion="15"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity   android:name=".Chart_MainActivity"
                android:label="@string/title_activity_chart__main" >
    <intent-filter>
       <action android:name="android.intent.action.MAIN" />
         <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
    </activity>

    <activity android:name=".NextActivity"></activity>
    <activity android:name="org.achartengine.GraphicalActivity" />

</application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T14:12:27.633

尽管该问题并未描述所有方面，但这里看起来像是一个简单的问题。

我们可以很容易地猜到主活动类中的第 46 行是下面这一行：

```
in.putExtra("gotonextpageX", result.get(0)); 
```

该`result`列表中没有任何元素，您正在尝试获取第一个元素，因此`IndexOutOfBounds`引发了异常。

# android - 在代码中调整布局大小

> ID：13081161
> 
> 赞同：0
> 
> 时间：2012-10-26T05:20:44.027
> 
> 标签：android, android-layout

我在 xml 中有一个布局，其属性为 height:700dp 和 width:300 dp。如何在代码中更改此布局的大小？我尝试这样的事情，但我得到了 NullPointer：

```
setContentView(R.layout.log_in_dialog_view);
view = findViewById(R.layout.log_in_dialog_view);
lp = view.getLayoutParams();
lp.height = 200;
lp.width = 200;
view.setLayoutParams(lp); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T05:24:40.950

获得对视图的引用后，您可以执行以下操作：

```
ViewGroup.LayoutParameters lp = view.getLayoutParameters();
lp.height = . . .;
lp.width = . . .;
view.setLayoutParameters(lp); 
```

这些值必须以像素为单位。有几个线程描述了如何将 dp 转换为像素。[这是另一个问题的答案](https://stackoverflow.com/a/9563438/535871)的代码片段：

```
public static float convertDpToPixel(float dp,Context context){
    Resources resources = context.getResources();
    DisplayMetrics metrics = resources.getDisplayMetrics();
    float px = dp * (metrics.densityDpi/160f);
    return px;
} 
```

然后，您应该添加 0.5f，然后再转换为 an`int`并分配给`lp`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:29:30.917

```
layout.setLayoutParams(new LinearLayout.LayoutParams(400,400)); 
```

从语句中获取参考后，使用上面的语句动态设置宽度和高度。如果您在 xml 中使用线性布局，则使用 LinearLayout.LayoutParams。其他明智的，如果它不同，则使用该布局参数。第一个是宽度，第二个是声明中的高度。如果有任何疑问，请在此处发表评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T05:44:18.050

你可以试试下面的代码

```
DisplayMetrics metrics = getResources().getDisplayMetrics();
RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams((int) (metrics.density * 100 + 0.5f), (int) (metrics.density * 150 + 0.5f));
lp.setMargins(5, 5, 0, 0);

final ImageView imgRss = new ImageView(getApplicationContext());
imgRss.setLayoutParams(lp); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T06:17:07.543

我使用窗口管理器：

```
 DisplayMetrics dm = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(dm);

height = dm.heightPixels;
width = dm.widthPixels;
    WindowManager.LayoutParams WMLP = getWindow()
            .getAttributes();
    WMLP.width = width-200;
    WMLP.height = height-200; 
```

# ios - 不同类中的 iOS 表视图数据源

> ID：13081163
> 
> 赞同：0
> 
> 时间：2012-10-26T05:20:57.003
> 
> 标签：ios, uitableview, nsmutablearray

我有一个简单的 iOS 应用程序，其中一个名为`Dictionary`（.m 和 .h）的类具有多个用于构建对象的`NSArray`函数`NSDictionary`，然后是用于操作该数据结构的函数。我有一个`UITableViewController`具有表视图委托方法的类，但我不知道如何在其中创建`Dictionary`类的实例，`UIViewController`以便能够让所有委托方法与该类的实例对话（例如当我调用`Dictionary *dictionary = [[Dictionary alloc] init]`该`viewDidLoad`方法时，我无法访问`cellForRowAtIndexPath`委托方法中的任何实例。iOS 编程新手，对它感到非常沮丧！任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T05:29:26.263

听起来您需要将字典声明为类的成员变量。有几种方法可以做到这一点。最快的方法是将以下内容放在表视图控制器的 .m 文件中的 @implementation 调用之上。

```
@interface nameOftableViewControllerClass(){
    Dictionary *dictionary;
}
@end 
```

确保将 nameOftableViewControllerClass 替换为您的视图控制器类的实际名称。然后，在视图中确实加载了。您可以拨打以下电话

```
dictionary = [[Dictionary alloc] init]; 
```

然后在 cellForRowAtIndexPath 中，您可以调用字典对象上的任何函数。不要忘记在你的表视图控制器的 dealloc 方法中放一个释放调用。

```
-(void) dealloc {
     [dictionary release];
     [super dealloc];
} 
```

希望这会有所帮助，如果您还有其他问题，请联系我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:38:59.997

您以这种方式声明的字典变量是 viewDidLoad 方法的本地变量。相反，将其声明为 ViewController 的属性，将 Dictionary 分配给它，然后在您的委托方法中访问它（例如 self.dictionary = [[Dictionary alloc] init] ）。

# android - 访问 Sqlite 数据库时应用程序崩溃

> ID：13081168
> 
> 赞同：0
> 
> 时间：2012-10-26T05:21:43.100
> 
> 标签：android, crash-dumps, android-sqlite

我正在通过我的应用程序创建一个 sqlite 数据库。插入和创建表的查询执行良好。但是当我检索数据时，我的应用程序因以下日志而崩溃

```
Caused by: android.database.sqlite.SQLiteException: no such table: FileRevisionHistory:while compiling: SELECT FileName, FileRevision FROM FileRevisionHistory WHERE FileName=? 
```

SQL 表创建的代码是这样的

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.os.Environment;

public class FileRevision_dbHandler extends SQLiteOpenHelper {

    // All Static variables
    // Database Version
    private static final int DATABASE_VERSION = 2;

    // Database Name
    private static final String DATABASE_NAME = "revisionHistoryManager";

    // Contacts table name
    private static final String TABLE_REVISION_HISTORY = "FileRevisionHistory";

    // Contacts Table Columns names
    private static final String KEY_ID = "id";
    private static final String KEY_NAME = "FileName";
    private static final String KEY_REVISION = "FileRevision";

    public FileRevision_dbHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    // Creating Tables
    @Override
    public void onCreate(SQLiteDatabase db) {

        String CREATE_FILE_REVISION_TABLE = "CREATE TABLE  "  + TABLE_REVISION_HISTORY + "("
                + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT,"
                + KEY_REVISION + " TEXT" + ")";
        db.execSQL(CREATE_FILE_REVISION_TABLE);
    }

    // Upgrading database
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // Drop older table if existed
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_REVISION_HISTORY);

        // Create tables again
        onCreate(db);
    }

    /**
     * All CRUD(Create, Read, Update, Delete) Operations
     */

    // Adding new contact
    void addFileRevision(FileRevision filerevision) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_NAME, filerevision.mFileName); // Contact Name
        values.put(KEY_REVISION, filerevision.mRevision); // Contact Phone

        // Inserting Row
        db.insert(TABLE_REVISION_HISTORY, null, values);
        db.close(); // Closing database connection
    }

    // Getting single contact
    String getFileRevision(String inFileName) {
        SQLiteDatabase db = this.getReadableDatabase();

        Cursor cursor = db.query(TABLE_REVISION_HISTORY, new String[] {KEY_NAME, KEY_REVISION }, KEY_NAME + "=?",
                new String[] { inFileName }, null, null, null, null);
        if (cursor != null)
            cursor.moveToFirst();

        FileRevision filerevision = new FileRevision();
        filerevision.mFileName = (String)cursor.getString(cursor.getColumnIndex(KEY_NAME));
        filerevision.mRevision = (String)cursor.getString(cursor.getColumnIndex(KEY_REVISION));
        db.close();
        // return contact
        return filerevision.mRevision;
    }

}

} 
```

为什么那个表没有被创建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T05:33:47.037

不只是提供表名，而是使用以下内容更新您的查询：

```
Cursor cursor = db.query(TABLE_REVISION_HISTORY, new String[] {KEY_NAME, KEY_REVISION }, KEY_NAME + "=?",
                new String[] { inFileName }, null, null, null, null); 
```

# spring - Spring和acgi安全是tomcat中负载平衡的问题

> ID：13081169
> 
> 赞同：1
> 
> 时间：2012-10-26T05:21:46.083
> 
> 标签：spring, apache, tomcat, spring-security, load-balancing

我有使用**acgi 安全性进行身份验证的****spring**应用程序，我还使用了许多**过滤器和拦截器**，它在单个主机上运行良好。现在我想使用tomcat在集群中运行我的应用程序，并使用apache服务器的**负载平衡**。现在，当我在集群中运行我的应用程序时，它在**使用stickySession 模式**时工作正常，但是当我**使用多播**时，它不允许登录并且总是重定向到登录页面。

 ******我不是在猜测为什么会出现这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:19:01.067

Spring Security 的 Security Context 作为值存储在会话中。因此，如果您的会话跨节点复制，那么上下文也将可用，如果您使用的是棒会话，那么请求将命中相同的上下文，因此它可以工作。多播不是即时的，可能是无法在多播模式下工作的原因之一。

我不确定这是否可行，但您可以在数据库中使用会话持久性并跨节点共享，这将比会话复制具有优势，但我认为坚持会话将是我认为的最佳选择。

1) [http://www.intelligrape.com/blog/2010/07/21/tomcat-6-session-persistence-through-jdbcstore/](http://www.intelligrape.com/blog/2010/07/21/tomcat-6-session-persistence-through-jdbcstore/) 2) [tomcat 文档](http://tomcat.apache.org/tomcat-6.0-doc/config/manager.html)******

# joomla - joomla 1.5中的面包屑

> ID：13081174
> 
> 赞同：2
> 
> 时间：2012-10-26T05:22:31.367
> 
> 标签：joomla, joomla1.5, breadcrumbs

我正在使用带有 beez 模板的 joomla 1.5 版本。我们如何在这个中使用面包屑。我是这个 CMS 的新手。如何在面包屑中创建我们的 owm 列表。谁能帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:45:24.947

这是如何将 joomla 模块实现到您的模板中

首先，您必须将此代码实现到您的模板/模板目录/index.php 中：

```
<jdoc:include type="modules" name="breadCrumb" /> 
```

然后转到`templateDetails.xml`并将模块的名称设置到此 xml 文件中：

```
<positions>
            <position>breadcrumb</position>
            <position>left</position>
            <position>right</position>
            <position>breadCrumb</position>
            <position>user1</position>
            <position>user2</position>
            <position>user3</position>
            <position>user4</position>
            <position>footer</position>
    </positions> 
```

然后您可以在`breadCrumb`管理面板/模块管理器/职位中找到该名称

只需简单地应用名称并查看模板..

要了解更多信息，请点击链接[http://docs.joomla.org/Creating_a_basic_Joomla!_template](http://docs.joomla.org/Creating_a_basic_Joomla!_template)

# wordpress - 如果内容中没有“阅读更多”标签，是否可以使用 the_excerpt() 而不是 the_content()？

> ID：13081177
> 
> 赞同：0
> 
> 时间：2012-10-26T05:22:50.337
> 
> 标签：wordpress, wordpress-theming

我在我的博客主页上使用了 the_content() 过滤器，并使用“更多标签”来打破内容，以便完整的帖子只能在单个帖子中使用。有时我或博客的其他作者忘记在内容中插入更多标签，这会导致首页上的完整帖子输出。

我正在寻找一种在内容中查找 wpmore 标签的解决方案，如果它不可用，它会抛出摘录而不是完整的帖子。

可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T05:28:47.607

这是个好主意，但请注意，如果您没有为帖子提供明确的摘录（在帖子编辑器的可选摘录字段中），它将显示一个自动摘录，该摘录是指帖子内容的前 55 个单词。

所以 the_excerpt() 只显示前 55 个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T18:05:25.847

这也将起作用。在more标签不在帖子内容中的帖子中显示帖子的前55个单词，如果在内容中，则将带有more标签的帖子内容显示在正确的位置。

```
<?php if ($pos=strpos($post->post_content, '<!--more-->')): ?>
<?php the_content(); else : the_excerpt(); endif; ?> 
```

# python - 带有三重单引号和三重双引号的文档字符串有什么区别？

> ID：13081178
> 
> 赞同：26
> 
> 时间：2012-10-26T05:22:53.643
> 
> 标签：python, documentation, docstring, pep

我只是想知道编写 Python Docstrings ( ) 的两种方式有什么区别`__doc__`：

1.  三个单引号：

    ```
    '''
    Comment goes here
    ''' 
    ```

2.  三个双引号：

    ```
    """
    Comment goes here
    """ 
    ```

在生成文档时，文档字符串的格式化方式是否有任何细微差别？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-26T05:26:19.260

不，它们是一样的。唯一的区别是第一个可以包含三个非转义双引号的序列，而第二个可以包含三个非转义单引号的序列。（换句话说，由于分隔符不同，您可以在其中使用的字符略有不同。）

Docstrings 只是普通的字符串，在 Python 中，不同的字符串分隔符之间没有区别，当然，你不能在字符串内部使用字符串分隔符。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-26T05:48:43.627

信息文档[PEP 257 -- Docstring Conventions](http://www.python.org/dev/peps/pep-0257/)建议使用`"""triple double-quotes"""`以保持一致性，并且所有示例都显示相同：

> 为了保持一致性，请始终`"""triple double quotes"""`围绕文档字符串使用。如果`r"""raw triple double quotes"""`您在文档字符串中使用任何反斜杠，请使用。对于 Unicode 文档字符串，使用 `u"""Unicode triple-quoted strings"""`.

使用单引号还是双引号在实践中只是一个文体问题。从这些字符串生成和发布文档时，格式没有区别。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-26T05:24:54.813

选择你想要的任何风格。就个人而言，我在 Python 中的*任何地方都*使用单引号。

该[文档](http://docs.python.org/reference/lexical_analysis.html#strings)指出：

```
"String literals can be enclosed in matching single quotes (') or double quotes (")." 
```

您决定使用哪一个并不重要。重要的是你**坚持你的决定**。选择一种风格并坚持下去是一种很好的做法。

# java - 如何使用 Mina 重新连接套接字

> ID：13081180
> 
> 赞同：1
> 
> 时间：2012-10-26T05:23:15.460
> 
> 标签：java, sockets, reconnect

现在我有一个使用 Mina 的 java 应用程序，当 socket 连接到服务器时，我认为这个 java 应用程序是正常的，否则异常。简而言之，我使用套接字长连接实现应用程序状态监控。问题是如何使用 Mina 重新连接套接字，或者是否有另一种更好的方法来实现应用程序状态监控。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:09:26.220

您无法重新连接任何 TCP 套接字。你必须关闭它并重新开始一个新的，就像你得到第一个一样。

# git - git send-email 不从 git format-patch 更改提交日期

> ID：13081182
> 
> 赞同：4
> 
> 时间：2012-10-26T05:23:26.350
> 
> 标签：git, email, date, patch

**问题：**有没有办法告诉`git send-email`兑现`git format-patch`日期？更好的是，有没有办法不将邮件日期和提交日期视为不同的？

**观察：**这是我对处理我没有找到方法改变的日期的观察

1.  创建的补丁`git format-patch`将提交日期记录为`Date:`标题。
2.  用于`git send-email`发送补丁时，提交日期更改为发送时刻
3.  使用 应用提交时，使用收到的电子邮件标题中`git am`的日期。`Date:`

**部分解决方法：**通过对 使用包装脚本`git send-email`，可以从补丁中提取提交日期并使用`faketime`或类似方法强制`git send-email`遵守提交日期。然而，这带来了两个问题：

1.  因为邮件日期和提交日期被折叠为一个（我认为这是概念缺陷），邮件会在错误的时间出现在收件箱中，这很不方便。
2.  如果我希望它们出现在同一个邮件线程中，我只能轻松地将这种方法应用于发送一个补丁，而不是一系列补丁。好的，我当然可以启用 SMTP 调试 ( `git send-email --smtp-debug=1`) 并`Message-Id`从输出中提取。但随后开始看起来我需要开始重写已经在`git send-email`...中实现的线程选项

请注意，如果`git send-email`要兑现到那时记录的提交日期，`git format-patch`我可以使用求职信 ( `git send-email --cover-letter`) 来处理问题 1，这依赖于`git send-email`MUA 和 MUA 的线程支持。

**奖励问题：** 我真的很想在应用的补丁中查看原始提交（实施）日期以供记录（合并到一个提交中的一系列补丁将告诉合并到已发布分支的时间）。我的想法是否以某种方式误导了想要这个？*将电子邮件日期和提交日期视为一体是否有更深层次的思考？*这对我来说类似于将本地更改推送到某个公共分支 - 保留日期。

**PS**没有我想使用的标签（声誉不允许创建它们）`git-send-email`。`git-format-patch`

# export - 如何使用“源”属性将值导出到“导出到 Excel”中？

> ID：13081185
> 
> 赞同：0
> 
> 时间：2012-10-26T05:23:48.220
> 
> 标签：export, jstl, export-to-excel, struts-1, displaytag

我们使用 servlet 导出到 excel，servlet 名称为“MultiTableExportServlet”。我们需要为servlet 传递三个参数，即'multitablesId'、'name'、'type'。'multitablesId' 名称用于识别使用 jsp 的部分导出到 excel。“名称”用于标识导出到 excel 的名称。'类型'应该定义excel然后才填充。我在不使用装饰器的情况下使用链接。来自jsp页面的每个请求我传递两个参数，然后根据参数我构建查询并使用查询对象列表显示结果，使用'Source'属性这 。我的问题是加载jsp页面后。然后我点击'href' 使用它执行一些业务逻辑的链接并将其存储到查询对象列表中并填充到导出中以正确处理我想要的任何内容。但是，如果我第二次单击“href”链接，它不会更改列表值。所以我每次都清除列表。但它在 excel 中显示了 emty QO 列表。在这里，我粘贴了我的示例代码以供您关注。

## **jsp页面：**

```
<display:table name="${weeklyDlvyInstancesDashboardReportForm.asnAccuracyListQO}" uid="asnAccuracyListUID" sort="list" defaultsort="1" 
                                        requestURI="/weeklyDlvyInstancesDashboardReportPre.do?method=httpGet" excludedParams="method"
                                        decorator="com.ford.mpl.superg.decorator.WeeklyDeliveryInstancesTypeTableDecorator" keepStatus="true">
                                        <%@include file="/jsp/include/displaytag.jsp"%>
                                        <c:set value="${asnAccuracyListUID.firstWeekOfCountLabel}" var="asnAccuracyFirstWeekOfCount"/>
                                        <c:set value="${asnAccuracyListUID.secondWeekOfCountLabel}" var="asnAccuracySecondWeekOfCount"/>
                                        <c:set value="${asnAccuracyListUID.thirdWeekOfCountLabel}" var="asnAccuracyThirdWeekOfCount"/>
                                        <c:set value="${asnAccuracyListUID.fourthWeekOfCountLabel}" var="asnAccuracyFourthWeekOfCount"/>
                                        <c:set value="${asnAccuracyListUID.fifthWeekOfCountLabel}" var="asnAccuracyFifthWeekOfCount"/>
                                        <c:set value="${asnAccuracyListUID.sixthWeekOfCountLabel}" var="asnAccuracySixthWeekOfCount"/>

                                        <c:choose>
                                        <c:when test="${asnAccuracyListUID.instanceTypeDescription != null && asnAccuracyListUID.instanceTypeDescription != 'Sum'}">
                                            <display:column property="instanceTypeDescription" title="Instance Type" sortable="false"/>
                                        </c:when>
                                        <c:otherwise>
                                            <display:column property="instanceTypeDescription" title="Instance Type" sortable="false" style="font-weight:bold;text-align:center"/>
                                        </c:otherwise>
                                        </c:choose>

                                        <display:column property="firstWeekOfCount" title="${asnAccuracyFirstWeekOfCount}" href="${pageContext.request.contextPath }/weeklyDlvyInstancesDashboardReportPost.do?method=WeeklyDlvyInstExcelReport&ratingElementIdFromJSP=${asnAccuracyListUID.ratingElementId}" paramProperty="instanceType" paramId="instanceTypeFromJSP" sortable="false"/>
                                        <display:column property="secondWeekOfCount" title="${asnAccuracySecondWeekOfCount}" sortable="false"  />
                                        <display:column property="thirdWeekOfCount" title="${asnAccuracyThirdWeekOfCount}" sortable="false"  />
                                        <display:column property="fourthWeekOfCount" title="${asnAccuracyFourthWeekOfCount}" sortable="false" />
                                        <display:column property="fifthWeekOfCount" title="${asnAccuracyFifthWeekOfCount}" sortable="false" />
                                        <display:column property="sixthWeekOfCount" title="${asnAccuracySixthWeekOfCount}" sortable="false"/>
                                    </display:table>
                                </fieldset>

                                    <export:multitables id="nameid">
                                        <export:table title="tablename" source="${weeklyDlvyInstancesDashboardReportForm.asnAccuracyInstancesRatingElementQO}">
                                            <export:column property="shipCode" title="Ship Code" />
                                            <export:column property="plantOrRecLoc" title="Plant/Rec Loc" />
                                            <export:column property="instanceType" title="Instance Type" />
                                            <export:column property="fordOrg" title="Ford Org" />
                                            <export:column property="OrgType" title="Org Type" />
                                            <export:column property="region" title="Region" />
                                            <export:column property="shipDate" title="Ship Date" />
                                            <export:column property="errorTransmitted" title="Error Transmitted" />
                                            <export:column property="externalAlertNo" title="External Alert Number" />
                                            <export:column property="asnNumber" title="ASN Number"/>
                                            <export:column property="packingSlipNumber" title="Packing Slip Number"/>
                                        </export:table>
                                    </export:multitables> 
```

## **Struts-config.xml：**

```
<action path="/weeklyDlvyInstancesDashboardReportPost"
            type="*.*.*.*.action.*.*Action"
            name="weeklyDlvyInstancesDashboardReportForm" scope="session" validate="false"
            parameter="method">
            <forward name="httpGet" path="tile.showreport"></forward>
            <forward redirect="true" name="somname" path="/MultiTableExportServlet?multitablesId=nameid&amp;name=exporttoexcel&amp;type=excel"></forward>
        </action> 
```

我需要的是当我从 jsp 页面单击 href 时我想要新的值列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:24:10.120

```
using the decorator in the <export:table> i solved my issue.

    <export:multitables id="WeeklyDeliveryInstances-Count" >
                                            <export:table title="tablename" source="${weeklyDlvyInstancesDashboardReportForm.weeklyDeliveryInstancesRatingElementQO}"
decorator="com.ford.mpl.superg.decorator.WeeklyDeliveryInstancesTypeTableDecorator">
                                                <export:column property="shipCode" title="Ship Code" />
                                                <export:column property="plantOrRecLoc" title="Plant/Rec Loc" />
                                                <export:column property="instanceType" title="Instance Type" />
                                                <export:column property="fordOrg" title="Ford Org"/>
                                                <export:column property="orgType" title="Org Type" />
                                                <export:column property="region" title="Region" />
                                                <export:column property="conveyanceDepartureDateAndTime" title="Conveyance Departure Date And Time"/>
                                                <export:column property="asnReceivedDateAndTime" title="ASN Recieved Date And Time" />
                                                <export:column property="externalAlertNo" title="External Alert No" />
                                                <export:column property="asnNumber" title="ASN Number" />
                                                <export:column property="packingSlipNumber" title="Packing Slip Number" />
                                                <export:column property="timeDeviance" title="Time Deviance(hh:mm)" />
                                            </export:table> 
```

# c# - HtmlElement SetAttribute 属性失败

> ID：13081187
> 
> 赞同：1
> 
> 时间：2012-10-26T05:24:05.453
> 
> 标签：c#, html, silverlight

```
HtmlDocument htmlDoc = HtmlPage.Document;
HtmlElement htmlEl;

htmlEl = htmlDoc.GetElementById("UserText");
htmlEl.SetAttribute("scrollHeight", "400"); 
```

给了我例外`SetAttribute Operation failed`

对此有任何想法或解决方法吗？

# html - 列表项的垂直对齐

> ID：13081208
> 
> 赞同：2
> 
> 时间：2012-10-26T05:25:55.893
> 
> 标签：html, css

我想用列表项对每一行进行垂直对齐。

我试着把

```
display:inline-block; vertical-align:middle; 
```

到 'li' 但布局看起来不同。如何调整CSS？

**HTML**

```
<div class="half-box">
    <div class="ticket-list-box">
        <ul>
            <li><span class="img"><img src="http://www.goeasyholiday.com/upload/image/_airline/1_thai_airways.gif"></span><a href="#">Cheap Ticket To Bangkok</a><span class="price">1,950</span></li>
            <li><span class="img"><img src="http://www.goeasyholiday.com/upload/image/_airline/1_thai_airways.gif"></span><a href="#">Cheap Ticket To Bangkok xxxx London</a><span class="price">1,950</span></li>
            <li><span class="img"><img src="http://www.goeasyholiday.com/upload/image/_airline/1_thai_airways.gif"></span><a href="#">Cheap Ticket To Bangkok</a><span class="price">1,950</span></li>
            <li><span class="img"><img src="http://www.goeasyholiday.com/upload/image/_airline/1_thai_airways.gif"></span><a href="#">Cheap Ticket To Bangkok xxxx London</a><span class="price">1,950</span></li>
            <li><span class="img"><img src="http://www.goeasyholiday.com/upload/image/_airline/1_thai_airways.gif"></span><a href="#">Cheap Ticket To Bangkok xxxx London</a><span class="price">1,950</span></li>
            <li><span class="img"><img src="http://www.goeasyholiday.com/upload/image/_airline/1_thai_airways.gif"></span><a href="#">Cheap Ticket To Bangkok</a><span class="price">1,950</span></li>
            <li><span class="img"><img src="http://www.goeasyholiday.com/upload/image/_airline/1_thai_airways.gif"></span><a href="#">Cheap Ticket To Bangkok</a><span class="price">1,950</span></li>
            <li><span class="img"><img src="http://www.goeasyholiday.com/upload/image/_airline/1_thai_airways.gif"></span><a href="#">Cheap Ticket To Bangkok</a><span class="price">1,950</span></li>
            <li><span class="img"><img src="http://www.goeasyholiday.com/upload/image/_airline/1_thai_airways.gif"></span><a href="#">Cheap Ticket To Bangkok</a><span class="price">1,950</span></li>
            <li><span class="img"><img src="http://www.goeasyholiday.com/upload/image/_airline/1_thai_airways.gif"></span><a href="#">Cheap Ticket To Bangkok</a><span class="price">1,950</span></li>
        </ul>
    </div>
</div> 
```

**CSS：**

```
body{
margin:0px;padding:0px;
font:normal 13px Tahoma;}
a{text-decoration:none;color:#08d39e}
a:hover{text-decoration:underline;}
.ticket-list{clear:left;float:left;}
.half-box{float:left;width:328px;}
.ticket-list-box{width:318px;height:240px;overflow:hidden;}
.ticket-list-box ul{padding:0;margin:0;list-style:none;}
.ticket-list-box ul li:nth-child(even){background:#cddff5;}
.ticket-list-box ul li.even{background:#cddff5;}
.ticket-list-box ul li{height:34px;border-right:1px solid #6fb6f3;}
.ticket-list-box ul li span.img{float:left;width:50px;padding-right:4px;overflow:hidden;}
.ticket-list-box ul li a{float:left;width:200px;}
.ticket-list-box ul li span.price{float:right;width:40px;padding-right:8px;font-weight:600;color:#ed368e;} 
```

[http://jsfiddle.net/eXdzd/](http://jsfiddle.net/eXdzd/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T05:40:49.783

使用`display: table-cell;`它有来自 IE8+ 的支持

检查这个[**工作演示**](http://jsfiddle.net/TVV6f/)

```
.ticket-list-box ul li span.img{ vertical-align: middle; display: table-cell; width:50px;padding-right:4px;overflow:hidden;}
.ticket-list-box ul li a{ vertical-align: middle; display: table-cell; width:200px;}
.ticket-list-box ul li span.price{ vertical-align: middle; display: table-cell; width:40px;padding-right:8px;font-weight:600;color:#ed368e;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:55:48.517

您只需要更改`ticket-list-box ul li`添加这两行：

```
.ticket-list-box ul li{
   ...
   line-height: 30px;
   display: inline-block;
} 
```

[在小提琴](http://jsfiddle.net/eXdzd/1/)上检查它！

# iphone - UILocalNotification 点击 事件

> ID：13081210
> 
> 赞同：4
> 
> 时间：2012-10-26T05:26:05.130
> 
> 标签：iphone, ios

我的代码是：

```
- (void) socketIO:(SocketIO *)socket didReceiveEvent:(SocketIOPacket *)packet
{
NSLog(@"didReceiveEvent(),%@",packet.data );

SysNotification *sysNotification=[GlobalVariable parseSysNotificationWithString:packet.data];

UILocalNotification *alarm = [[UILocalNotification alloc] init];
if (alarm) {
    alarm.fireDate = [NSDate date];
    alarm.timeZone = [NSTimeZone defaultTimeZone];
    alarm.repeatInterval = 0;
    alarm.soundName = UILocalNotificationDefaultSoundName;
    alarm.alertBody = @"Test message...";

    NSDictionary *infoDic = [NSDictionary dictionaryWithObject:@"name" forKey:@"key"];
    alarm.userInfo = infoDic;

    [[UIApplication sharedApplication] presentLocalNotificationNow:alarm];
}

} 
```

我想当我点击状态栏上的 UILocalNotification 时，我可以来一些视图控制器。怎么办？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T05:32:02.927

有两种情况来处理本地通知，

**1\. 应用程序因点击本地通知而启动**

```
-(BOOL)application:(UIApplication *)app didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    UILocalNotification *localNotif =

        [launchOptions objectForKey:UIApplicationLaunchOptionsLocalNotificationKey];

    if (localNotif) {

       //load your controller

    }

    return YES;

} 
```

**2.应用程序处于活动状态**，然后在AppDelegate中添加此代码

```
 -(void)application:(UIApplication *)app didReceiveLocalNotification:(UILocalNotification *)notif {

        //load your controller

    } 
```

# php - 查找特定文件名的扩展名

> ID：13081211
> 
> 赞同：0
> 
> 时间：2012-10-26T05:26:06.020
> 
> 标签：php, flash, file, mod-rewrite

我正在创建一个图像托管服务，我想缩短名称，使其没有扩展名，并且文件位于我服务器的“根”目录中。我已经到了可以加载任何 PNG 文件并显示图像的地步，但是说文件是 swf 或 jpg，它仍然会尝试打开 PNG。现在，这就是我目前所拥有的。如果文件名有扩展名，并且文件名以 gif、jpg、png 或 swf 结尾，它将从 /img/ 目录加载文件。如果没有，它将打开 media.php 并在那里解析文件形式 .htaccess

```
RewriteEngine on
    RewriteCond %{REQUEST_URI} !/img/.*
    RewriteRule ^(.*\.(gif|jpg|png|swf))$ img/$1 [QSA]

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^([^\.]+)$ media.php?i=$1 [NC,L] 
```

媒体.php

```
<?php
//Media.PHP
if(!isset($_REQUEST['i'])){
die("No media selected  ");
}
$filename = $_REQUEST['i'];
if(file_exists('img/'.$filename .'.png')){
$header = "image/png";
$ext = ".png";
}
elseif(file_exists('img/'.$filename .'.jpg')){
$header = "image/jpg";
$ext = ".jpg";
}
elseif(file_exists('img/'.$filename.'.jpeg')){
$header = "image/jpg";
$ext = ".jpeg";
}
elseif(file_exists('img/'.$filename .'.gif')){
$header == "image/gif";
$ext = ".gif";
}
elseif(file_exists('img/'.$filename .'.swf')){
$header == "application/x-shockwave-flash";
$ext = ".swf";
}
else die("404 File not found");
header("Content-Type: $header");
@readfile('img/'.$filename."$ext"); 
```

现在，这适用于图像（png、gif、jpg、jpeg），但我无法让它与 .swf 文件一起正常工作。它只是下载它们。因此，在这种情况下，我可以从 mydomain.com/MYSWF.swf 打开文件，但不能从 mydomain.com/MYSWF 打开文件，因为它使用较短的链接下载它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:13:13.073

在`==`设置`$header`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:21:54.943

当它是一个 swf 文件时，试试这个头文件：

```
$fileName="filename.swf";
header("Content-Type: application/x-shockwave-flash",true);
header("Accept-Ranges: bytes",true);
header("Connection: keep-alive",true);
header("Content-Disposition: inline; filename=$fileName");
readfile($fileName); 
```

# python - 我在哪里可以下载适用于 Windows 的 Python 2.7.3 的开发头文件？

> ID：13081216
> 
> 赞同：3
> 
> 时间：2012-10-26T05:26:24.320
> 
> 标签：python, windows, development-environment, header-files

可能是我的 google-fu 很难看，但我找不到适用于 Windows 的 Python 2.7.3 开发标头的下载链接。它存在于某个地方吗？

我正在尝试使用 mingw 构建 pyinstaller。'waf configure' 的完整日志 - [pastebin.com/tJyydGJc](http://pastebin.com/tJyydGJc)。

我收到以下错误：

```
['C:\\MinGW32\\bin\\gcc.exe', '-Wdeclaration-after-statement', '-Werror', '-fno-strict-aliasing', '-IC:\\\\Python27\\\\include', '..\\test.c', '-c', '-o', 'default\\test_1.o'] 
command returned 'Build failed: -> task failed (err #1): \n\t{task: cc test.c -> test_1.o}'Could not find the python development headers 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:11:41.920

通过观察我的安装，头文件包含在安装程序中。如果您使用标准安装目录，它们应该位于 c:\Python27\include 下

对于只有标题的特定文件，我也找不到。但总有源头！

# ajax - 自定义 Html 控件 Ajax 更新

> ID：13081222
> 
> 赞同：1
> 
> 时间：2012-10-26T05:26:51.073
> 
> 标签：ajax, asp.net-mvc

我已经自定义了网格控件，当我们提供列和表名时生成表，其中还有一个搜索功能，它更新记录并在通过 ajax 搜索时在网格中显示更新的结果我正在更新记录但未显示在主页中

```
 SqlParameter[] sqlParameter = {new SqlParameter("@table",tabelName),
                                      new SqlParameter("@Column1",coloumn1),
                                      new SqlParameter ("@Column2",coloumn2),
                                      new SqlParameter("@AliasName1",aliasName1),
                                      new SqlParameter("@AliasName2",aliasName2)

                                      };

        string gridHtml;
        if (!isFilterCondition)
        {
             gridHtml = GenerateHtmlGrid(sqlParameter);
        }
        else
        {
            gridHtml = GenerateHtmlGridonSearch();
        }
        StringBuilder sb = new StringBuilder();
        //Opening For Main page Search Control
        sb.AppendFormat("<table>");
        sb.AppendFormat("<tr><td>");
        sb.AppendFormat("<input id='txt_Search' type='text'  name='txt_Search'>");
        sb.AppendFormat("<input type='hidden' name='{0}' class='WorkItem'>", controlName);
        sb.AppendFormat("</td><td>");
        sb.AppendFormat("<a href='#' id='searchlink'><img src='../../Content/themes/base/images/16px-Searchtool_right.png' /></a>");
        sb.AppendFormat("</td></tr></table>");
        //Closing For Main page Search Control

        // Opening for the Dialog Box Div
        sb.AppendFormat("<div id='dialoggrid' title='{0}' >", popWindowTitle);
        sb.AppendFormat("<table>");
        sb.AppendFormat("<tr><td></td><td>");
        sb.AppendFormat("<select name='foo' id='foo'>");
        sb.AppendFormat("<option value=0>{0}</option>", aliasName1);
        sb.AppendFormat("<option value=1>{0}</option>", aliasName2);
        sb.AppendFormat("</select>");
        sb.AppendFormat("</td></tr>");
        sb.AppendFormat("<tr><td>");
        sb.AppendFormat("<label>Search</label>");
        sb.AppendFormat("</td><td>");
        sb.AppendFormat("<input id='txtGridSearch' type='text'  name='txtGridSearch'>");
        //sb.AppendFormat("<a href='#' id='SearchTree'><img src='../../Content/themes/base/images/16px-Searchtool_right.png' /></a>");
        sb.AppendFormat("</table>");

        sb.AppendFormat("<div id='div_grid'>{0}</div>", gridHtml);
        sb.AppendFormat("</div>");
        // Closing  for the Dialog Box Div

        //opening For Script Section 
        sb.AppendFormat("<script type='text/javascript'>");

        //Opening for Document Reddy
        sb.AppendFormat("$(document).ready(function() {{ ");
        sb.AppendFormat("$('#dialoggrid').dialog({{ autoOpen: false,modal: true,width: 350}});");
        //Function For SearchButton on Main Page Click 
        sb.AppendFormat("$('#searchlink').click(function() {{");
        sb.AppendFormat("$( '#dialoggrid').dialog('open');");
        sb.AppendFormat("}});");
        //Closing For SearchButton on Main Page Click 

        //opening For Textbox Search inside the Grid on Key Up Event
        sb.AppendFormat("$('#txtGridSearch').keyup(function(){{");
        sb.AppendFormat("$.post('/CustomeControls/GridSearch')");

        sb.AppendFormat("}});");
        //Closeing For Textbox Search inside the Grid on Key Up Event

        sb.AppendFormat("}});");
        //Closing For Document Reddy Function 

        sb.AppendFormat("</script>");
        //Closing for Script Section 

        return new MvcHtmlString(sb.ToString());
    } 
```

# java - 如何以不同的布局显示登录信息？

> ID：13081224
> 
> 赞同：0
> 
> 时间：2012-10-26T05:26:58.437
> 
> 标签：java, android

我创建了一个需要从 Facebook/Twitter/Google 登录才能开始的应用程序。在一个布局中，我为 Facebook、Twitter 和 Google 分别创建了三个**开关**，它们具有 ON 和 OFF 选项。如果用户从相应帐户登录，我想将特定帐户的开关设为“开启”。例如，如果用户从 Facebook 登录，则只有 Facebook 旁边的开关应该打开。我怎样才能做到这一点？

任何建议将不胜感激，如果有人知道，请向我推荐与此相关的任何教程。下面是我的登录页面代码。我已经显示了 Facebook 部分的登录信息：谢谢 :)

```
private OnClickListener loginButtonListener = new OnClickListener() {
        @SuppressWarnings("deprecation")
        public void onClick( View v ) {
            String[] permissions = { "offline_access", "publish_stream", "user_photos", "publish_checkins","photo_upload" };

            if(v.getId() == R.id.button1 )
            {
                facebookSwitch = true;
                twitterSwitch = false;
                googleSwitch = false;
                if( !mFacebook.isSessionValid() ) {
                    Toast.makeText(Login.this, "Authorizing", Toast.LENGTH_SHORT).show();
                    mFacebook.authorize(Login.this, permissions, new LoginDialogListener());
                }
                else {
                    Toast.makeText( Login.this, "Has valid session", Toast.LENGTH_SHORT).show();
                    try {
                        JSONObject json = Util.parseJson(mFacebook.request("me"));
                        //Log.d("Login", "11111111111111111");
                        String facebookID = json.getString("id");
                        //Log.d("Login", "22222222222222"); 

                        String firstName = json.getString("first_name");
                        //Log.d("Login", "3333333333333333333");

                        String lastName = json.getString("last_name");
                        //Log.d("Login", "4444444444444444444444");

                        Toast.makeText(Login.this, "You already have a valid session, " + firstName + " " + lastName + ". No need to re-authorize.", Toast.LENGTH_LONG).show();
                        Intent intent = new Intent(Login.this,MainActivity.class);
                        startActivity(intent);
                    }
                    catch( Exception error ) {
                        Toast.makeText( Login.this, error.toString(), Toast.LENGTH_SHORT).show();
                    }
                    catch( FacebookError error ) {
                        Toast.makeText( Login.this, error.toString(), Toast.LENGTH_SHORT).show();
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T05:38:45.157

试试这个方法......

**-**首先创建一个`Singleton Class`带有 3 个布尔`variables for 3 logins info, and there`Getter-Setter`。这里需要单例，**这样无论在整个应用程序中从何处调用该类，都只会形成该类的一个对象**。所以现在你有一个单一的信息点。

**-**始终`Singleton`在另一个开始时或在您需要时检查 Class 的变量`Activity`，以了解用户是否登录到一个或两个或所有社交网站。

**///////////////////////////编辑部分////////////// /////////////**

**下面是创建单例的简单方法，认为还有更多：**

```
public class Test{

   public static Test uniqueInstance = new Test();

   private Test(){}

   public static Test getInstance(){

      return uniqueInstance;       

      // No matter what but always u will get the same instance.

   }

} 
```

**现在要在另一个类中调用此对象，请执行以下操作...**

```
public class Main{

 Test t = Test.getInstance();    // Now use t to call the fields and methods of class T.

} 
```

# c# - Global.asax 中的 dataTable.AsEnumerable()

> ID：13081227
> 
> 赞同：-2
> 
> 时间：2012-10-26T05:27:03.507
> 
> 标签：c#, asp.net

在`Application_Start`我试图过滤数据表。在文件后面的其他代码中，我可以使用`AsEnumerable()`DataTable；但不在 Global.asax 中。任何原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:15:19.790

我在文件后面制作了单独的代码`Global.asax`

全球.asax：

```
<%@ Application Codebehind="Global.asax.cs" Language="C#" %> 
```

全球.asax.cs：

```
public class Global : HttpApplication
{

    void Application_Start(object sender, EventArgs e)
    {
        ....
        var filtered = from entity in dt.AsEnumerable()
                       .Where(entity => entity.Field<int>("SerialNumber") == key)
                       select entity;

        ....
    }
    ....
} 
```

# android - 使用Android手机作为USB Host将外置硬盘挂载到手机上，通过手机访问外置硬盘的内存

> ID：13081228
> 
> 赞同：8
> 
> 时间：2012-10-26T05:27:04.550
> 
> 标签：android, usb-otg

一段时间以来，我一直在检查将外部驱动器安装到 android 手机，即，如果我将外部驱动器（硬盘/闪存/相机）插入 android 设备，则 android 手机应该能够访问存储文件系统。

市场上有通过手机控制外部设备的应用程序。

我可以使用 USB 主机模式 { [http://developer.android.com/guide/topics/connectivity/usb/index.html](http://developer.android.com/guide/topics/connectivity/usb/index.html) } 与 USB 设备进行通信。但 Android 3.1（API 级别 12）或更新的平台直接支持 USB 主机和附件模式。

而名为 DSLR Controller { [https://play.google.com/store/apps/details?id=eu.chainfire.dslrcontroller&hl=en](https://play.google.com/store/apps/details?id=eu.chainfire.dslrcontroller&hl=en) } 的应用程序需要 Android 2.1 或更高版本。由于该应用程序基于通过android手机访问相机。如果应用程序显示正确的信息，那么访问相机（或任何其他驱动器）存储的任务似乎是可能的。

但我也想在较低版本中使用该应用程序。任何形式的帮助将不胜感激。

请评论，如果需要更多的问题描述。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T10:45:52.963

您可以基于 Github 上的 FileManager 开源项目创建应用程序。您可以在此处指定以识别您的设备。您可以根据需要更改这些代码。这是链接[Adroid-File-Manager](https://github.com/nexes/Android-File-Manager)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T03:45:54.657

如果您只想能够访问 USB 存储设备（如闪存驱动器），您可以使用普通的 Java 方式（`java.io.File`等）打开文件。Android ICS 会自动将闪存驱动器挂载到 下`/sdcard/usbStorage/`，但我不确定以前的版本或其他类型的硬件。不过，它可能仍然有效，所以我建议您对其进行测试，看看会发生什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T03:53:57.657

从应用描述来看，Android 2.x 设备需要root。这表明他们有一些 USB 主机代码的本机实现（可能是他们加载的预编译内核模块）。

因此，解决方案会根据其运行的特定硬件和软件（内核、供应商修改、皮肤）而有所不同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-05T07:40:21.687

完成此操作的唯一可靠方法是使用 12 以上的 API 级别，否则一些手机可能支持 USB 主机，但大多数不支持。原因首先你需要usb主机的硬件支持，即使存在所需的驱动程序也可能不会编译到内核中，我在尝试在nook color实现usb主机时做了一些工作，即使它有硬件支持，让 USB 主机正常工作花了将近 2 个月的时间和一个专门的应用程序。所以它不是你可以为每台设备做的事情。一些人可能会开箱即用地支持它，但即使是那些也需要 root 和更多的工作来安装驱动器等等。单反相机也以同样的方式来看待需求

```
- Android device with ARMv7-A or newer CPU architecture (most 1ghz+ devices)
- Not rooted: Android 3.1 or higher with USB host kernel+API support
- Rooted: Android 2.3.1 or higher with USB host kernel support 
```

这些是唯一可以支持 USB 主机的设备。

# css - 悬停时在 CSS 中定位嵌套列表

> ID：13081229
> 
> 赞同：0
> 
> 时间：2012-10-26T05:27:08.937
> 
> 标签：css, hover, nested-lists, navbar

我正在创建一个中心嵌套导航菜单，并尝试使用纯 CSS。在此处查看工作演示：http: [//jsfiddle.net/jenstechs/MKtTN/2/](http://jsfiddle.net/jenstechs/MKtTN/2/)

![在此处输入图像描述](../Images/1413f0e2fb9b042f0e20ae5454b94baa.png)

**HTML：**

```
<nav>
  <ul id="primary">
    <li><a href="#">Link One</a></li>
    <li><a href="#">Link Two</a></li>
    <li><a href="#">Link Threee</a>
        <ul class="secondary">
            <li><a href="#">Services One</a></li>
            <li><a href="#">Services Two</a></li>
        </ul>
    </li>
    <li><a href="#">Link Four</a></li>
    <li><a href="#">Link Fiiiiive</a></li>
  </ul>
</nav> 
```

**CSS：**

```
nav {
  margin:15px auto 10px auto;
  width:100%;
}

nav ul#primary {
  width: 100%;
  padding: 10px 0;
  margin: 0;
  background-color: #FFF;
  text-align: center;
}

nav ul#primary>li {
  display: inline;
  padding:5px 0;
  margin-left:0;
}

nav ul#primary>li>a {
  padding: 0px 30px;
  margin-right:-6px;
  color: #000;
  text-decoration: none;
  border-right:2px solid #999;
}

nav ul#primary>li>a:hover,
nav ul#primary>li.active>a {
  background-color: #900;
  color:#FFF;
  padding-top:10px;
  padding-bottom:25px;
}

nav ul#primary>li:first-child a {
    border-left:2px solid #999;
}

ul.secondary { 
    padding-top:0;
    position:absolute;
    display:none;
}
ul.secondary li {
}

nav ul#primary li:hover ul.secondary {
    display:block;
}
nav ul#primary li:hover ul.secondary li {
}

ul.secondary li a {
    display:block;
    width:7em;
    color:#FFF;
    background-color:#900;
    font-size:0.8em;
    text-decoration:none;
    text-align:left;
    line-height:1.4em;
    border-bottom:1px solid #FFF;
}

ul.secondary li:last-child a {
    border-bottom:0;
}

ul.secondary li a:hover {
    color:#DDD;
}
​ 
```

我也有一个最小的重置，它在列表中唯一的样式是一些默认边距。

因为这是一个居中的导航栏，所以我使用的 CSS 是内联的，而不是浮动的。所以我不知道在 CSS 中放置什么来将子菜单实际定位在其父元素下方。我见过的大多数例子都有 position:absolute 但这似乎保持在左边。我尝试了各种隐藏和显示的方法（显示：，左：），但似乎找不到那个神奇的组合。

实际上，这里我只有一个子列表，但是如果我有所有子列表呢？

感谢您提供任何提示或示例链接...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T05:29:23.227

要使`position: absolute`元素相对于其父元素定位，请创建 parent `position: relative`。

在你的情况下：

```
nav ul#primary>li {
  display: inline;
  padding:5px 0;
  margin-left:0;

  position: relative;
} 
```

**演示：http: [//jsfiddle.net/MKtTN/3/](http://jsfiddle.net/MKtTN/3/)**

# sql-server-2008 - 从表中删除重复的行

> ID：13081232
> 
> 赞同：-2
> 
> 时间：2012-10-26T05:27:27.340
> 
> 标签：sql-server-2008

> **可能重复：**
> [删除重复的 SQL 记录](https://stackoverflow.com/questions/841447/delete-duplicate-sql-records)

我想从表中删除重复的行

```
ID      uID     SID      USID
------------------------------
4391    007 Flight  ADM007
4392    007 Enquiry ADM007
6723    007 Flight  ADM007
6724    007 Enquiry ADM007
6725    008 Flight  ADM008
6726    008 Enquiry ADM008
4393    008 Flight  ADM008
4394    008 Enquiry ADM008
4395    009 Flight  ADM009
4396    009 Enquiry ADM009
6727    009 Flight  ADM009
6728    009 Enquiry ADM009 
```

我只想保留

```
4391    007 Flight  ADM007
4392    007 Enquiry ADM007
6725    008 Flight  ADM008
6726    008 Enquiry ADM008
4395    009 Flight  ADM009
4396    009 Enquiry ADM009 
```

请给我建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:05:58.197

您可以使用 CTE。

```
with C as
(
  select row_number() over(partition by uID, SID, USID order by ID) as rn
  from YourTable
)
delete from C
where rn > 1 
```

YourTable 中剩下的行将是

```
ID          uID         SID        USID
----------- ----------- ---------- ----------
4391        7           Flight     ADM007
4392        7           Enquiry    ADM007
4393        8           Flight     ADM008
4394        8           Enquiry    ADM008
4395        9           Flight     ADM009
4396        9           Enquiry    ADM009 
```

不完全是您正在寻找的东西，但如果没有另一列可供订购，它就可以得到。

# ruby-on-rails - 使用 git 进行版本控制

> ID：13081234
> 
> 赞同：2
> 
> 时间：2012-10-26T05:27:29.553
> 
> 标签：ruby-on-rails, git

> **可能重复：**
> [什么是版本控制系统？Git 有什么用？](https://stackoverflow.com/questions/5401781/what-is-a-version-control-system-how-is-git-useful)

我是 Ruby on Rails 平台的新手，所以这听起来有点幼稚。

* * *

> 为什么以及何时将我们的工作存储在 git 这样的版本控制系统中？

* * *

我的意思是它有什么好处！我们不能把它保存在我们的本地机器上吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T05:41:58.990

使用 git/源代码控制的优点：

**为自己**

*   记住您编写的代码以及编写代码的时间
*   能够将您所做的工作与以前的工作进行比较
*   允许您进行一些实验性的工作，如果它不起作用，则将其切换回原来的位置

**与团队合作**

*   它使与他人的合作变得更容易——您可以同时处理同一个文件，并且非常容易地组合您的更改。
*   它将允许您在多个位置工作并轻松拥有最新的代码
*   它将有助于将您的代码部署到服务器

![差异和分支的示例](../Images/c992bf4b2c39c4ed5d68db956b041495.png)

[团队的 Git 工作流程](http://reinh.com/blog/2009/03/02/a-git-workflow-for-agile-teams.html)

[Git 分支模型](http://nvie.com/posts/a-successful-git-branching-model/)

**何时存储或提交您的工作：**

每次完成特定“想法”或正在处理的工作时，您都希望这样做。这意味着您可以获得有用的提交消息，并且可以立即回到您刚刚编写的功能或刚刚修复的错误。

[提交的频率和时间](https://stackoverflow.com/questions/1480723/dvcs-how-often-and-when-to-commit-changes)

**使用 Git 而不是其他源代码控制的原因**

*   它的速度很快（切换分支真的很快，而且你有一个本地副本，所以你不必为很多事情与服务器通信，除非你想向服务器推送或拉取更改）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T05:43:41.287

是的，这似乎很幼稚，但每个问题都值得一问！

首先，使用 SCM（软件配置管理器）将在许多场景中为您提供极大的帮助：

*   在不接触主代码的情况下尝试实验功能
*   同时发展几个独立的想法
*   从失败的更改中恢复，只要它们很复杂并且包含多个文件中的更改。
*   跟踪特定版本中使用的确切代码，以修复报告的错误。

如果在没有 SCM 的团队中工作，这甚至不会涉及到您将拥有的无限量的工作。

并且使用单片机不涉及网络，`git`任何其他分布式单片机对本地开发同样有效，因为存储库都在您的计算机中。你只是不要拉和推。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T05:47:00.973

选择不是将代码存储在版本控制中还是将其存储在本地机器上。事实上，与其他版本控制系统（如 Subversion，也称为`svn`）不同，Git 不需要服务器即可运行。

版本控制可以轻松了解所做的更改、查看和恢复文件的旧版本，甚至可以将更改从一个版本导入到另一个版本。

**检索：**想象一下你正在自己做一个项目。您删除了您认为不再需要的旧文件。一周后，您意识到该文件非常重要。如果您使用版本控制，您可以看到文件在您删除之前的样子，并像从未删除过一样恢复它。此外，大多数提交给版本控制的更改都包含消息；如果您加入了一个团队并且之前的开发人员使用了版本控制（带有良好的提交消息），您可以更轻松地了解何时进行更改以及更改原因。

**多个版本（分支）：**现在假设您的软件是 1.0 版。您正忙于开发 2.0 版，但有人提交了一个错误。你能做什么？使用版本控制，您可以缩放回 1.0 版，进行一些更改，然后创建 1.0.1 版。大多数版本控制平台甚至允许您将在 1.0.1 版中所做的更改应用到您在 2.0 版中所做的工作中。

**多种功能：**您的软件非常成功，您开始每周发布它。但是，并非所有功能都已准备好发布。首先，您开始处理*小部件*功能，然后开始处理小*部件*功能。如果您同时处理这两个问题，您可能会同时开发两个半编码的功能，并且没有任何东西可以很好地发布。使用版本控制，一旦完成其中一项功能，您就可以将其合并到“主”版本中，就像您在一天内编写的一样。

**协作：**最后，现在假设您在一个由五六个开发人员组成的团队中，他们都在处理相同的代码。自然地，您不希望来回通过电子邮件发送代码压缩文件，尤其是当每个开发人员都在开发单独的功能时。使用版本控制，您可以拥有所有开发人员都可以写入和读取的单一历史记录。

当然，上述某些操作可以通过在不同的相邻目录中保存相同文件的多个副本来完成。版本控制软件的好处是它可以为您处理大部分工作，同时避免在磁盘上一遍又一遍地复制相同的文件。

啰嗦——对不起——但希望有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T05:49:43.460

使用 git 的优点：

*   即使本地项目崩溃，代码在远程仓库中也是安全的
*   您可以尝试新事物而不必担心以前的作品，因为它们可以检索
*   代码可以从世界任何地方访问
*   团队合作时，所有工作都将存储在一个地方，以便团队中的每个人都可以访问
*   可以轻松跟踪每一个更改，谁做的，什么时候做的
*   应用部署将更容易
*   您可以拥有多个版本/分支，以便您轻松识别每个版本中添加到应用程序中的新功能

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-26T06:02:55.263

您会看到[@arulmr](https://stackoverflow.com/users/1095090/arulmr)、[@kieran-andrews](https://stackoverflow.com/users/359736/kieran-andrews)、[@Jeff](https://stackoverflow.com/users/1426891/jeff-bowman)和[@rewritten](https://stackoverflow.com/users/384417/rewritten)发布了许多优点，但如果您想了解更多详细信息，您可以查看以下链接

1) [http://git-scm.com/book/ch8-1.html](http://git-scm.com/book/ch8-1.html)

2) [http://www-oss.fnal.gov/~mengel/git_vs_subversion.html.bak](http://www-oss.fnal.gov/~mengel/git_vs_subversion.html.bak)

3) [https://git.wiki.kernel.org/index.php/GitSvnComparison](https://git.wiki.kernel.org/index.php/GitSvnComparison)

4) [http://www.wikivs.com/wiki/Git_vs_Subversion](http://www.wikivs.com/wiki/Git_vs_Subversion) #历史、架构、许可、性能、git 和 svn 的特性

现在 git 和 subversion 的区别

1) [http://boxysystems.com/index.php/5-fundamental-differences-between-git-svn/](http://boxysystems.com/index.php/5-fundamental-differences-between-git-svn/)

# php - PHP Front Controller Flow Confusion - Switch 语句只测试过一次

> ID：13081236
> 
> 赞同：0
> 
> 时间：2012-10-26T05:27:39.777
> 
> 标签：php, switch-statement, mvp, front-controller

我是 php 新手，对此流程感到困惑。在我看来，当 $action 变量获得新值时， switch($action) 需要多次评估。但我没有看到 switch($action) 被评估，但只有一次。我以 admin_menu.php 为例。如果用户 `<p><a href="index.php?action=show_product_manager">Product Manager</a></p>`从 admin_menu.php 中选择怎么办？我看不到 index.php 之后在哪里调用，所以我看不到新值将如何测试，因为 switch($action) 已经运行。

```
localhost ch21_ex2 # cat index.php 
<?php
// Start session management and include necessary functions
session_start();
require_once('model/database.php');
require_once('model/admin_db.php');

// Get the action to perform
if (isset($_POST['action'])) {
    $action = $_POST['action'];
} else if (isset($_GET['action'])) {
    $action = $_GET['action'];
} else {
    $action = 'show_admin_menu';
}

// If the user isn't logged in, force the user to login
if (!isset($_SESSION['is_valid_admin'])) {
    $action = 'login';
}

// Perform the specified action
switch($action) {
    case 'login':
        $email = $_POST['email'];
        $password = $_POST['password'];
        if (is_valid_admin_login($email, $password)) {
            $_SESSION['is_valid_admin'] = true;
            include('view/admin_menu.php');
        } else {
            $login_message = 'You must login to view this page.';
            include('view/login.php');
        }
        break;
    case 'show_admin_menu':
        include('view/admin_menu.php');
        break;
    case 'show_product_manager':
        include('view/product_manager.php');
        break;
    case 'show_order_manager':
        include('view/order_manager.php');
        break;
    case 'logout':
        $_SESSION = array();   // Clear all session data from memory
        session_destroy();     // Clean up the session ID
        $login_message = 'You have been logged out.';
        include('view/login.php');
        break;
}
?>localhost ch21_ex2 # firefox 'view/admin_menu.php'
localhost ch21_ex2 # cat 'view/admin_menu.php'
<?php
    require_once('util/secure_conn.php');  // require a secure connection
    require_once('util/valid_admin.php');  // require a valid admin user
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>My Guitar Shop</title>
        <link rel="stylesheet" type="text/css" href="main.css"/>
    </head>
    <body>
        <div id="page">
            <div id="header">
                <h1>My Guitar Shop</h1>
            </div>
            <div id="main">
                <h1>Admin Menu</h1>
                <p><a href="index.php?action=show_product_manager">Product Manager</a></p>
                <p><a href="index.php?action=show_order_manager">Order Manager</a></p>
                <p><a href="index.php?action=logout">Logout</a></p>

            </div><!-- end main -->
        </div><!-- end page -->
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T05:44:04.313

我现在才看到答案.... index.php 再次被调用： index.php?action=show_order_manager in`<p><a href="index.php?action=show_order_manager">Order Manager</a></p>`

# php - 如何修复 302 重定向并使其变为 301？

> ID：13081237
> 
> 赞同：1
> 
> 时间：2012-10-26T05:27:39.023
> 
> 标签：php, symfony1, seo, symfony-1.4

我有一个使用 PHP Symfony 框架构建的网站。该站点使用 4 种语言构建，因此我们构建了它的子域，例如

```
en.xyz.com
es.xyz.com
de.xyz.com
it.xyz.com 
```

以下是我用于从域名 [http://snippets.symfony-project.org/snippet/332设置用户文化的代码片段](http://snippets.symfony-project.org/snippet/332)

现在的问题是，我们正在网站上进行一些 SEO，它对所有这 3 个 URL 都返回 302 重定向错误。

我想解决这个问题并将这些 URL 设为 301，因为这是我们的 SEO 所建议的。

知道该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T02:23:50.333

重定向方法采用 2 个参数。

```
$this->redirect($url, 301) 
```

这应该适合你。

# java - Java中的组合函数

> ID：13081238
> 
> 赞同：1
> 
> 时间：2012-10-26T05:27:40.290
> 
> 标签：java, math, statistics

在我书中的一个示例中，它创建了两种方法。一种称为组合，一种称为阶乘。组合方法的主体包含以下代码

```
private int combinations(int n, int k){
  return factorial(n) / (factorial (k) * factorial (n-k));
    } 
```

在一个实际看到这个公式的数学如何计算的例子中，教科书给出了下面的例子。n = 5 和 k = 2。它给出了以下步骤，并说你应该得到 10。我很难理解逻辑。

做 ！在这种情况下有特殊含义吗？5怎么了！= 120 !2 x !3 = 2 x 6 怎么算？

```
C (n,k)  =     n! 
           _________
           k! x (n - k)! 

C (5,2)  =     5! 
           ___________
             2! x !3 

         =   120 
           _________
             2 x 6 

         =  10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T05:30:51.240

！表示阶乘。

```
5! = 120 
```

因为

```
5! = 5 * 4 * 3 * 2 * 1 
```

和

```
2! x 3! = 2 * 6 
```

因为

```
2! x 3! = (2 * 1) * (3 * 2 * 1) 
```

[阶乘](http://en.wikipedia.org/wiki/Factorial)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T05:30:53.327

`n!`意味着`factorial(n)`。它等于： -

```
n! = n * (n - 1) * (n - 2) * .... * 1 
```

所以，

```
5! = 5 * 4 * 3 * 2 * 1 = 120 
```

而且`!3`是你书中的一个错字。它不代表一个`factorial`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T05:29:47.953

（`!`阶乘）符号表示直到并包括该数字的所有整数的乘积。因此，例如：

```
5! = 5 * 4 * 3 * 2 * 1 = 120 
```

这应该有助于澄清该`factorial(int)`方法的作用。

顺便说一句，如果您的书实际上打印的是“！3”而不是“3！”，那是一个错字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T05:38:55.753

非负整数 n 的阶乘，记为`n!`. 和

```
n! = n * (n - 1) * (n - 2).... * 1 
```

所以

```
5! = 5 * 4 * 3 * 2 * 1 == 120
3! = 3 * 2 * 1         == 6
2! = 2 * 1             == 2

C (5,2)  =     5!   
            __________
              2! x 3! 
```

等于

```
 =   120 
       _________
         2 x 6 
```

# javascript - Javascript 引用具有重复属性的元素

> ID：13081241
> 
> 赞同：1
> 
> 时间：2012-10-26T05:28:01.427
> 
> 标签：javascript, jquery, html

我有一些html，如下所示：

```
<form name="test_form">
<input type="hidden" name="product_id" value="560">
<input type="hidden" name="product_name" value="test product">
<input type="hidden" name="product_type" value="7">
<input type="hidden" name="product_id" value="560">
</form> 
```

请注意，“名称”有两个值为“569”的属性。

稍后，也使用 javascript 通过以下方式查找 product_name 值：

```
var c = $("[name='test_form']");
var product_name = c.product_name.value; 
```

相信我，我明白这段代码有多糟糕。但是，我继承了一个代码库，该代码库是这样编写的，具有重复的属性，并且 javascript 分散在以上述方式引用属性的周围。我最终会用更优雅的东西来解决这个问题，但与此同时，需要一些东西来修补它。在 Firefox 中成功查找 product_name，但在 google chrome 中查找失败。任何人都知道无需通过代码并删除重复属性即可快速解决此问题吗？基本上，我只需要 product_name 变量部分就可以在 google chrome 中正确读取 product_name 属性，尽管存在多个具有该名称的元素（幸运的是，具有该属性名称的所有元素都具有相同的值）。再一次，这只是我需要的临时补丁，所以请不要

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T05:32:03.990

由于您正在创建一个不能`product_name`用于查询 DOM 的 jQuery 对象，您可以使用`find()`和`val()`方法，注意单独使用属性选择器效率不高，最好先使用标签选择器。

```
var $c = $("form[name='test_form']");
var product_name = $c.find('input[name="product_name"]').val(); 
```

如果要使用当前代码获取输入的值，则应将 jQuery 对象转换为 DOM Element 对象，可以使用`[index]`or`get(index)`方法。

```
var $c = $("form[name='test_form']");
var product_name = $c[0].product_name.value; 
```

[http://jsfiddle.net/d7YEV/](http://jsfiddle.net/d7YEV/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:32:14.393

如果你使用 jQuery，你也应该使用它来获取元素值。

所以而不是

```
var c = $("[name='test_form']");
var product_name = c.product_name.value; 
```

你应该使用

```
var product_value = $('form[name="test_form"] input[name="product_name"]').val()
var product_type = $('form[name="test_form"] input[name="product_type"]').val() 
```

# python - 用python写一个计数程序

> ID：13081246
> 
> 赞同：-5
> 
> 时间：2012-10-26T05:28:19.993
> 
> 标签：python

我是 python 和一般编码的新手，我需要帮助解决这个问题。

编写一个将字符串作为输入并执行以下功能的程序：

▪ 打印字符串中的空格数（计数）

▪ 打印小写字母的数量（计数）

▪ 打印标点符号的数量

演示如何找到字符串中的最后一个空格

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T05:38:31.037

我将向您展示一个示例，以提供一些想法供您尝试，并将其他示例留作练习：

> 打印小写字母的数量（计数）

```
>>> my_str = "Hello world!!"
>>> sum(1 for x in my_str if x.islower())
9 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T05:30:50.170

循环遍历字符串中的字符：

```
for char in my_string:
    # test if char is a space and if it succeeds, increment something
    # do the same for your other tests
    pass 
```

该[`string`模块](http://docs.python.org/library/string.html)有一些可能对您有用的常量；特别是：[`string.punctuation`](http://docs.python.org/library/string.html#string.punctuation)、[`string.lowercase`](http://docs.python.org/library/string.html#string.lowercase)和[`string.whitespace`](http://docs.python.org/library/string.html#string.whitespace)。您可以使用[运算符](http://docs.python.org/reference/expressions.html#in)[来`in`](http://docs.python.org/reference/expressions.html#in)查看字符是否在这些字符集中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T05:44:04.073

您可以使用`filter`和`len`一起计算事物。例如：

```
>>> import string
>>> s="This char -- or that one -- It's a Space."
>>> for k in [string.uppercase, string.lowercase, string.whitespace, string.punctuation]:
...     len(filter(lambda x: x in k, s))
... 
3
23
9
6 
```

注意，`string.uppercase, string.lowercase,`等值是在`string`模块中定义的，可以在导入`string`模块后使用。它们中的每一个都是一个字符串值；例如：

```
>>> string.whitespace
'\t\n\x0b\x0c\r '
>>> string.punctuation
'!"#$%&\'()*+,-./:;<=>?@[\\]^_`{|}~' 
```

请注意，在上面， >>> 是 python 解释器的主要提示，而 ... 是缩进行的辅助提示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T07:32:05.207

```
a=input("type strint :")
space=" "
print(a.count(space))
lower=0
for w in a:
    if w.islower()==True:
        lower+=1
print(lower)
punc='!"#$%&\'()*+,-./:;<=>?@[\\]^_`{|}~'    
pmark=0
for p in a:
    if p in punc:
        pmark+=1
print(pmark)

# Demonstrate how you would find the last space in a string
if a[-1]== space:
    print("last space yes") 
```

# android - 从 parcelable 对象中读取字符串返回 null

> ID：13081248
> 
> 赞同：1
> 
> 时间：2012-10-26T05:28:30.523
> 
> 标签：android, parcelable

我有一个实现 Parcelable 的类。该类有 1 个 int 和 2 个 String。仅读取时返回 int 数据。第一个字符串作为 " " 返回，第二个字符串作为 null 返回。

写包裹——

```
After writing int - data position 376 parcel size 376.
After writing String1 - data position 392 parcel size 392.
After writing String2 - data position 412 parcel size 412. 
```

阅读包裹——

```
After reading int - data position 112 parcel size 152.
After reading String1 - data position 120 parcel size 152.
After reading String2 - data position 124 parcel size 152. 
```

读取包裹数据时数据大小是否应该相同？

类实现 Parcelable -

```
public class Message implements Parcelable {
private long id;
private String from;
private String message;

private String TAG = Message.class.getSimpleName();

public static final Parcelable.Creator<Message> CREATOR = new Parcelable.Creator<Message>() {

    @Override
    public Message createFromParcel(Parcel source) {
        return new Message(source);
    }

    @Override
    public Message[] newArray(int size) {
        Log.v("Message", "New array  size " + size);
        return new Message[size];
    }
};

public Message(){

}

private Message(Parcel source){
    id = source.readInt();
    Log.v(TAG, "Reading parcel object data position " + source.dataPosition() + " parcel size " + source.dataSize());
    from = source.readString();
    Log.v(TAG, "Reading parcel object data position " + source.dataPosition() + " parcel size " + source.dataSize());       
    message = source.readString();
    Log.v(TAG, "Reading parcel object data position " + source.dataPosition() + " parcel size " + source.dataSize());
}

/**
 * @return the id
 */
public long getId() {
    return id;
}
/**
 * @param id the id to set
 */
public void setId(long id) {
    this.id = id;
}
/**
 * @return the from
 */
public String getFrom() {
    return from;
}
/**
 * @param from the from to set
 */
public void setFrom(String from) {
    this.from = from;
}
/**
 * @return the message
 */
public String getMessage() {
    return message;
}
/**
 * @param message the message to set
 */
public void setMessage(String message) {
    this.message = message;
}

/* (non-Javadoc)
 * @see java.lang.Object#toString()
 */
@Override
public String toString() {
    return "Message [id=" + id + ", from=" + from + ", message=" + message
            + "]";
}

@Override
public int describeContents() {
    return 0;
}

@Override
public void writeToParcel(Parcel dest, int flags) {
    Log.v(TAG, "Writing parcel object " + flags + " -- " + id + " -- " + from  + " -- " + message);
    dest.writeLong(id);
    Log.v(TAG, "Writing parcel object data position " + dest.dataPosition() + " parcel size " + dest.dataSize());
    /*dest.writeString(from);
    dest.writeString(message);*/
    dest.writeString("from");
    Log.v(TAG, "Writing parcel object data position " + dest.dataPosition() + " parcel size " + dest.dataSize());
    dest.writeString("message");
    Log.v(TAG, "Writing parcel object data position " + dest.dataPosition() + " parcel size " + dest.dataSize());
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T05:46:00.397

问题是，我正在使用 writeLong() 但在阅读时正在执行 readInt() 。用 readLong() 替换了 readInt() ，现在它工作正常。

# java - android-Button的listView的clickevent使用BaseAdapter

> ID：13081250
> 
> 赞同：0
> 
> 时间：2012-10-26T05:28:34.500
> 
> 标签：java, android

我正在使用带有自定义适配器的**Listview**，其中包含 imageview、textview 和 3 个按钮（插入、更新、删除）要求是每次在 BROADCAST 接收器内调用自定义适配器，直到 intentfilter 匹配，并且我还在基本适配器的 getView 方法中设置按钮的 onclicklistener .

**问题是只有最后一行 listview 按钮只能点击。但我希望所有行的所有按钮都必须点击。**

任何人都可以给我建议或任何想法我可以如何解决这个问题。

```
public View getView(final int position, View view, ViewGroup parent) {
    // TODO Auto-generated method stub

            pos=position;

    if(view==null)
    {
        LayoutInflater inflater=(LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        view=inflater.inflate(R.layout.device_name, parent, false);
    }

    TextView text_view=(TextView)view.findViewById(R.id.textview_deviceName);

    ImageView image_view=(ImageView)view.findViewById(R.id.imageView1);

    text_view.setText(strDeviceName[position]);
    if(strMajorDevice[position].equalsIgnoreCase("phone"))
    {
        image_view.setImageResource(int_image[0]);
    }
    else
    {
        image_view.setImageResource(int_image[1]);
    }
    btnAdd=(Button)view.findViewById(R.id.btn_add);
    btnUpdate=(Button)view.findViewById(R.id.btn_update);
    btnDelete=(Button)view.findViewById(R.id.btn_delete);

    btnAdd.setOnClickListener(this);
    btnUpdate.setOnClickListener(this);
    btnDelete.setOnClickListener(this);
    return view;
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    if(v==btnAdd)
    {
        Toast.makeText(context, "ADD", Toast.LENGTH_LONG).show();
        Intent intent = new Intent(context,MaterDeviceFormActivity.class);
        intent.putExtra("button","add");
        intent.putExtra("device_address", strDviceAddess[pos]);
        context.startActivity(intent);

    }
    else if(v==btnUpdate)
    {
        Toast.makeText(context, "UPDATE", Toast.LENGTH_LONG).show();
        Intent intent = new Intent(context,MaterDeviceFormActivity.class);
        intent.putExtra("button","update");
        intent.putExtra("device_address", strDviceAddess[pos]);
        context.startActivity(intent);
    }
    else if(v==btnDelete)
    {
        Toast.makeText(context, "DELETE", Toast.LENGTH_LONG).show();
        Intent intent = new Intent(context,MaterDeviceFormActivity.class);
        intent.putExtra("button","delete");
        intent.putExtra("device_address", strDviceAddess[pos]);
        context.startActivity(intent);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T05:55:38.123

```
private Context context;

public ListViewAdapter(Context context, String[] dateValues,String[] creditAmountValues,String[] closingBalanceValues,String[] currentAmountValues) 
{
    super(context, R.layout.transactionlayout, dateValues);
    this.context = context;

}

 @Override
  public View getView(final int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View rowView = inflater.inflate(R.layout.transactionlayout, parent, false);

         ((Button)rowView.findViewById(R.id.transactions_historyButtonID)).setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Toast.makeText(context, ""+position, 4000).show();
        }
    });

    return rowView;
  } 
```

使用充气机来使用行视图。这是有效的。如果你有任何疑问，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T06:19:42.330

在 get view 方法中为每个视图设置标签`setTag()`

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {

        if (convertView == null) {                            
            LayoutInflater inflater = context.getLayoutInflater();
            convertView = inflater.inflate(.....);
        } 

        ur_view= (views) convertView.findViewById(R.id.....);
                ur_view.setTag(position);

        ur_view.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                //do something
            }
        }); 
```

它会工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T05:31:53.607

**-**认为你还**没有注册**所有`Buttons`的`OnClickListener`接口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T10:00:07.847

试试这个，也许它会解决你的问题。

```
btnAdd.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        Integer index = (Integer) arg0.getTag();

        Toast.makeText(context, "ADD", Toast.LENGTH_LONG).show();
        Intent intent = new Intent(context,MaterDeviceFormActivity.class);
        intent.putExtra("button","add");
        intent.putExtra("device_address", strDviceAddess[index]);
        context.startActivity(intent);
    }
});

btnUpdate.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        Integer index = (Integer) arg0.getTag();

        Toast.makeText(context, "UPDATE", Toast.LENGTH_LONG).show();
        Intent intent = new Intent(context,MaterDeviceFormActivity.class);
        intent.putExtra("button","update");
        intent.putExtra("device_address", strDviceAddess[index]);
        context.startActivity(intent);
    }
});

btnDelete.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        Integer index = (Integer) arg0.getTag();

        Toast.makeText(context, "DELETE", Toast.LENGTH_LONG).show();
        Intent intent = new Intent(context,MaterDeviceFormActivity.class);
        intent.putExtra("button","delete");
        intent.putExtra("device_address", strDviceAddess[index]);
        context.startActivity(intent);
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-02T00:51:58.340

您可以使用适配器内的按钮侦听器，但唯一注册它的项目将是最后绘制的项目（即立即从列表中删除的项目）。您需要告诉按钮侦听器它被点击了哪个项目。在我的例子中，我只是传入了该位置并使用它来加载操作列表项所需的任何相关信息。

# javascript - 为什么这个 xhtml 文件显示 JS 代码但不运行函数

> ID：13081254
> 
> 赞同：0
> 
> 时间：2012-10-26T05:29:05.657
> 
> 标签：javascript, html, xhtml

每次我尝试运行这个 xhtml 文件时，它只显示 javascript 文件，它不运行该函数。我究竟做错了什么？为什么函数不运行？我对 JS 和 xhtml 相当陌生，因此欢迎和感谢任何和所有帮助。这是我的代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--Submit form, Assignment 2-->
<html xmlns = "http://www.w3.org/1999/xhtml">
<head>

<script type = "text/javaScript" src = "mss58.js"></script>
<title> Submit Form Assignment </title>
<meta charset="UTF-8">

</head>

<body>

<h1>Please Fill out the following Form</h1>
<form name ="SubmitForm" action = "mss58.js" onsubmit = "validate()" method="run">
Name: <input type ="text" name="firstname"><br />
Email address: <input type = "text" name="emailaddress"><br />
Password: <input type = "password" name = "pwd"><br />
Confirm Password: <input type = "password" name = "cpwd"><br />
Gender: <input type = "radio" name = "gender" value = "male">Male
        <input type = "radio" name = "gender" value = "female">Female<br />
        <br />
Comments: <br />
          <textarea rows ="10" cols = "50"></textarea><br />
<input type = "submit" value = "Submit">
</form>           

</body>
</html> 
```

编辑：我得到了正确提交的表单，但是我的 javascript 文件不想检查。我猜我的 if 语句不起作用。当我输入无效的密码、用户名或电子邮件时没有弹出警报时，有人可以试一试并告诉我为什么吗？我确定这很明显，我只是在这门课之前从未使用过 javascript

```
function validate(){

var name = document.forms["SubmitForm"]["firstname"].value;
var email = document.forms["SubmitForm"]["emailaddress"].value;
var password = document.forms["SubmitForm"]["pwd"].value;
var cpass = document.forms["SubmitForm"]["cpwd"].value;

var arrloc = email.indexOf("@");
var perloc = email.lastIndexOf(".");

var alph = false;
var num = false;
var sym = false;

if(name == null || name == ""){
    alert("You must fill out the Name field");
    return false;
}

if(arrloc < 1 || perloc < arrloc + 2 || perloc + 2 >= email.length){
    alert("Email is not valid");
    return false;
}

for(var i = 0, i < password.length-1, i++){
    if(password.substring(i,i+1) == /[a-z]/){
        alph = true;
    }
    if(password.substring(i,i+1) == /[A-Z]/){
        alph = true;
    }
    if(password.substring(i,i+1) == /[0-9]/){
        num = true;
    }
    if(password.substring(i,i+1) == /[^\w+$]/){
        sym = true;
    }
}

if(alph == true && num == true && sym == true){
    return true;
}else{
    alert("Your password is invalid!");
    return false;
}

if(password == cpass){
    return true;
}else{
    alert("Your passwords do not match!");
    return false;
}

};

validate(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T05:42:18.620

你需要改变

```
<form name ="SubmitForm" action = "mss58.js" onsubmit = "validate()" method="run"> 
```

至

```
<form name ="SubmitForm" action = "TARGET_PAGE.php" onsubmit = "return validate()" method="POST"> 
```

在您的 JavaScript 验证函数中，它应该在数据不正确时返回 false，否则返回 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:32:33.787

您应该将您的 javascript 代码包含到[`<script>`](http://www.w3schools.com/html/html_scripts.asp)标记中。

为了运行定义的函数，你必须调用它，例如，像这样：`validate()`

# c# - 控制器没有默认构造函数 500 内部服务器错误

> ID：13081257
> 
> 赞同：3
> 
> 时间：2012-10-26T05:29:21.743
> 
> 标签：c#, asp.net-web-api, ninject

这是我的控制器

```
 public class SuggestionController : ApiController
{
    public ISuggestionRepository Repository { get; private set; }

    public SuggestionController(ISuggestionRepository repository)
    {
        this.Repository = repository;
    }

    // to post suggestion
    [HttpPost]
    [ActionName("PostSuggestion")]
    public HttpResponseMessage PostSuggestion(Suggestion suggestion)
    {
        var answerCorrect = this.Repository.CreateSuggestion(suggestion);

        if (answerCorrect == true)
            return Request.CreateResponse(HttpStatusCode.OK);
        else
            return Request.CreateResponse(HttpStatusCode.Conflict);
    }
} 
```

这是我在 NinjectWebCommon.cs 中的 RegisterServices 方法

```
private static void RegisterServices(IKernel kernel)
    {
        kernel.Bind<ICompetitionRepository>().To(typeof(CompetitionRepository))
            .WithConstructorArgument("serviceContext", new InMemoryDataContext<Competition>());

        kernel.Bind<ISubmissionRepository>().To(typeof(SubmissionRepository))
            .WithConstructorArgument("serviceContext", new InMemoryDataContext<Submission>());

        kernel.Bind<IUserRepository>().To(typeof(UserRepository))
            .WithConstructorArgument("serviceContext", new InMemoryDataContext<User>());

        kernel.Bind<ISuggestionRepository>().To(typeof(SuggestionRepository))
           .WithConstructorArgument("serviceContext", new InMemoryDataContext<Suggestion>());
    } 
```

但是我得到一个例外，即我的建议控制器没有默认构造函数，并且当我从客户端应用程序访问控制器时它显示 500 内部服务器

我知道如果 ninject 依赖项不能正常工作，我们会得到控制器没有默认构造函数的异常，但下面是我实现的另一个控制器，类似于建议控制器，它工作得非常好。

```
 public IUserRepository Repository { get; private set; }

    public SSOController(IUserRepository repository)
    {
        this.Repository = repository;
    }

    [HttpPost]
    [ActionName("PostUser")]
    public HttpResponseMessage PostUser([FromBody]string id)
    {
        var accessToken = id;
        var client = new FacebookClient(accessToken);
        dynamic result = client.Get("me", new { fields = "name,email" });
        string name = result.name;
        string email = result.email;

        var existingUser = this.Repository.FindByUserIdentity(name);

        if (existingUser == null)
        {
            var newUser = new User
            {
                Username = name,
                Email = email,

            };

            var success = this.Repository.CreateAccount(newUser);

            if (!success)
            {
                return Request.CreateResponse(HttpStatusCode.InternalServerError);
            }

            //return created status code as we created the user
            return Request.CreateResponse<User>(HttpStatusCode.Created, newUser);
        }

        return Request.CreateResponse(HttpStatusCode.OK);

    }

} 
```

我不知道哪里出错了。如果您有任何建议，请告诉我。

编辑：

我的 Global.asax

```
 public class WebApiApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        AuthConfig.RegisterAuth();

        GlobalConfiguration.Configuration.IncludeErrorDetailPolicy =
IncludeErrorDetailPolicy.Always;

    } 
```

依赖解析器正在使用

```
 // Provides a Ninject implementation of IDependencyScope
// which resolves services using the Ninject container.
public class NinjectDependencyScope : IDependencyScope
{
    IResolutionRoot resolver;

    public NinjectDependencyScope(IResolutionRoot resolver)
    {
        this.resolver = resolver;
    }

    public object GetService(Type serviceType)
    {
        if (resolver == null)
            throw new ObjectDisposedException("this", "This scope has been disposed");

        return resolver.TryGet(serviceType);
    }

    public System.Collections.Generic.IEnumerable<object> GetServices(Type serviceType)
    {
        if (resolver == null)
            throw new ObjectDisposedException("this", "This scope has been disposed");

        return resolver.GetAll(serviceType);
    }

    public void Dispose()
    {
        IDisposable disposable = resolver as IDisposable;
        if (disposable != null)
            disposable.Dispose();

        resolver = null;
    }
}

// This class is the resolver, but it is also the global scope
// so we derive from NinjectScope.
public class NinjectDependencyResolver : NinjectDependencyScope, IDependencyResolver
{
    IKernel kernel;

    public NinjectDependencyResolver(IKernel kernel)
        : base(kernel)
    {
        this.kernel = kernel;
    }

    public IDependencyScope BeginScope()
    {
        return new NinjectDependencyScope(kernel.BeginBlock());
    }
} 
```

并在 NinjectWebCommon 的 CreateKernel() 方法中调用它

```
 private static IKernel CreateKernel()
    {
        var kernel = new StandardKernel();
        kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
        kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

        RegisterServices(kernel);

        // Install our Ninject-based IDependencyResolver into the Web API config
        GlobalConfiguration.Configuration.DependencyResolver = new NinjectDependencyResolver(kernel);

        return kernel;
    } 
```

建议库

```
 public class SuggestionRepository : Repository<Suggestion>, ISuggestionRepository
{
    public SuggestionRepository(IServiceContext<Suggestion> servicecontext)
        : base(servicecontext)
    { }

    public bool CreateSuggestion(Suggestion suggestion)
    {
        this.ServiceContext.Create(suggestion);
        this.ServiceContext.Save();

        return true;
    }
} 
```

ISuggestion存储库

```
public interface ISuggestionRepository
{
    bool CreateSuggestion(Suggestion suggestion);

} 
```

存储库

```
public abstract class Repository<T>
{
    public IServiceContext<T> ServiceContext { get; private set; }

    public Repository(IServiceContext<T> serviceContext)
    {
        this.ServiceContext = serviceContext;
    }
} 
```

服务上下文

```
 public interface IServiceContext<T>
{
    IQueryable<T> QueryableEntities { get; }

    void Create(T entity);

    void Update(T entity);

    void Delete(T entity);

    void Save();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T06:01:57.780

由于您使用的是 WebApi，因此您需要为 Ninject 使用 WebApi 扩展。不幸的是，当前的 Ninject.WebApi nuget 包已经过时，并且不适用于已发布的 WebApi 版本。

暂时，在 Remo 开始将 Ninject.WebApi 更新到发布版本之前，您可以使用 Ninject.WebApi-RC [http://nuget.org/packages/Ninject.Web.WebApi-RC](http://nuget.org/packages/Ninject.Web.WebApi-RC)

[http://www.eyecatch.no/blog/2012/06/using-ninject-with-webapi-rc/](http://www.eyecatch.no/blog/2012/06/using-ninject-with-webapi-rc/)

编辑：

回顾评论中讨论的信息，以下是建议：

1）如上所述使用Ninject.MVC3和Ninject.Web.WebApi（但在官方更新之前使用Ninject.Web.WebApi-RC）。不要使用自定义的 DependencyResolver，让 Ninject.Web.Mvc 和 .WebApi 完成它们的工作。

2）将您的绑定更改为：

```
kernel.Bind<ICompetitionRepository>().To<CompetitionRepository>();
... similar bindings 
```

3) 为您的 ServiceContext 添加通用绑定

```
kernel.Bind(typeof(IServiceContext<>)).To(typeof(InMemoryDataContext<>)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:05:12.517

我认为问题在于您使用的是 ApiController。控制器和 apiControllers 使用不同的依赖注入容器。然而，它们都暴露了相同的方法。
如果工作控制器继承了 Controller 类，那么这就是你的原因。
有关解决方法，请查看 [此主题](https://stackoverflow.com/questions/9417313/using-ninject-with-asp-net-web-api-beta-apicontroller)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T00:50:11.387

我遇到了同样的问题。

这就是我纠正的方式：我创建了一个 WebContainerManager，它只是容器周围的一个静态包装器。

当您不控制实例化并且不能依赖注入时，静态容器包装器很有用 - 例如动作过滤器属性

```
public static class WebContainerManager
{
    public static IKernel GetContainer()
    {
        var resolver = GlobalConfiguration.Configuration.DependencyResolver as NinjectDependencyResolver;
        if (resolver != null)
        {
            return resolver.Container;
        }

        throw new InvalidOperationException("NinjectDependencyResolver not being used as the MVC dependency resolver");
    }

    public static T Get<T>()
    {
        return GetContainer().Get<T>();
    }
} 
```

在你的控制器内部，像这样调用你的空构造函数，不带参数：

```
public SuggestionController() : this(WebContainerManager.Get<ISuggestionRepository>())
{

} 
```

这应该有效。

我从 Jamie Kurtz @jakurtz 的 MVC4 书中获得了这项技术。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-26T05:43:20.467

您可能需要进行一些依赖注入，以便可以在构造函数中注入`ISuggestionRepository`参数。`SuggestionController`为此，您需要覆盖 DefaultControllerFactory 类中的方法来自定义控制器的创建。由于您使用的是 NInject，因此您可以使用以下内容：

```
public class NInjectControllerFactory : DefaultControllerFactory 
{
    private IKernel kernel = new StandardKernel(new CustomModule());

    protected override IController GetControllerInstance(System.Web.Routing.RequestContext requestContext, Type controllerType)
    {
        return controllerType == null ? null : (IController)kernel.Get(controllerType);  
    }

    public class CustomModule : NinjectModule
    {
        public override void Load()
        {
            this.Bind<ICompetitionRepository>().To(typeof(CompetitionRepository))
                .WithConstructorArgument("serviceContext", new InMemoryDataContext<Competition>());

            this.Bind<ISubmissionRepository>().To(typeof(SubmissionRepository))
                .WithConstructorArgument("serviceContext", new InMemoryDataContext<Submission>());

            this.Bind<IUserRepository>().To(typeof(UserRepository))
                .WithConstructorArgument("serviceContext", new InMemoryDataContext<User>());

            this.Bind<ISuggestionRepository>().To(typeof(SuggestionRepository))
               .WithConstructorArgument("serviceContext", new InMemoryDataContext<Suggestion>());
        }
    }
} 
```

然后在您的 Global.asax.cs 中，您可以添加一行来换出控制器工厂

```
protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();

    RegisterRoutes(RouteTable.Routes);
    ControllerBuilder.Current.SetControllerFactory(new NInjectControllerFactory());  
} 
```

# mysql - 在单个 MySQL 查询中选择 Parent、Children、Children's Children 等

> ID：13081264
> 
> 赞同：2
> 
> 时间：2012-10-26T05:29:50.057
> 
> 标签：mysql, relationship

我觉得这一定是一个经典问题，但我找不到答案。

我有一张 Person 表，里面有描述一个人的基本细节。然后，我有一个 ParentChildRelationship 表，它看起来像这样：

```
CREATE TABLE `ParentChildRelationship` (
    `ParentId` INT(10) UNSIGNED NOT NULL,
    `ChildId` INT(10) UNSIGNED NOT NULL,
 PRIMARY KEY(ParentId,ChildId),
 CONSTRAINT `FK_ParentRelationship`
    FOREIGN KEY (`ParentId` )
    REFERENCES `Person` (`idPerson` ),
 CONSTRAINT `FK_ChildRelationship`
    FOREIGN KEY (`ChildId` )
    REFERENCES `Person` (`idPerson` )
); 
```

我需要一个选择查询，它只返回树下的父级和所有子级的所有人员记录。

例如，使用以下数据：

```
Parent   Child
1        3
1        8
2        4
3        5
3        6
6        9
4        7 
```

选择 ParentId = 1 OR ChildId 位于ParentId 为 1*下方*`Person`的树中的所有 Person 记录。此查询应返回以下 PersonId 的Person 信息 (SELECT * FROM ...)：

1,3,8,5,6,9

我不知道这是否重要，但是这些返回的顺序并不重要，因为我需要根据“LastName”之类的东西来订购。换句话说，结果也可能是 1,3,5,6,9,8。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T19:12:50.653

如果您有一个已知的有限深度，您可以展开递归并使用存储过程或视图。对于 MySQL，以下工作：

### 存储例程解决方案：

```
DELIMITER $$ 

CREATE PROCEDURE GetRelatedPersonsWithPersonId( IN pId VARCHAR(36)) 
        BEGIN 
                select * from Person where idPerson in ( 
                        select ParentId from ParentChildRelationship where ParentId = pId 
                        union 
                        select ChildID from ParentChildRelationship where ParentId = pId 
                        union 
                        select ChildID from ParentChildRelationship where ParentId in (select ChildID from ParentChildRelationship where ParentId = pId) 
                        union 
                        select ChildID from ParentChildRelationship where ParentId in (select ChildID from ParentChildRelationship where ParentId in (select ChildID from ParentChildRelationship where ParentId = pId)) 
                ) ; 

        END $$ 
```

### 查看解决方案：

```
Create view ChildRecurse 
As 
Select ParentId, ChildID from ParentChildRelationship 
Union 
Select x1.ParentId, x2.ChildId from ParentChildRelationship x1 
               Inner join ParentChildRelationship x2 on x2.ParentId = x1.ChildId 
Union 
Select x1.ParentId, x3.ChildId from ParentChildRelationship x1 
               Inner join ParentChildRelationship x2 on x2.ParentId = x1.ChildId 
               Inner join ParentChildRelationship x3 on x3.ParentId = x2.ChildId 
Union 
Select x1.ParentId, x4.ChildId from ParentChildRelationship x1 
               Inner join ParentChildRelationship x2 on x2.ParentId = x1.ChildId 
               Inner join ParentChildRelationship x3 on x3.ParentId = x2.ChildId 
               Inner join ParentChildRelationship x4 on x4.ParentId = x3.ChildId 
```

然后像这样选择：

```
select * from person where idPerson=@ID or idPerson in (select ChildId from ChildRecurse where ParentId=@ID) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T05:36:59.093

您的数据模型称为[邻接表模型](http://www.sqlsummit.com/AdjacencyList.htm)。您无法使用该模型执行您描述的查询（尽管存储过程可以）。

解决此问题的常用方法是更改​​为[嵌套集模型](http://en.wikipedia.org/wiki/Nested_set_model)。Wikipedia 文章有一些示例代码，并且这里有一个很好的教程[（](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)以及对使用邻接列表模型所涉及的内容的很好描述）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T05:40:29.683

我认为这将是 GROUP BY 和 HAVING 语句的工作。

这样的事情是否会为您指明正确的方向？

```
SELECT * FROM ParentChildRelationship pcr
GROUP BY ParentID , ChildID
HAVING ParentID=1 OR Count(ChildID)>0 
```

这将为您提供一个父子关系列表，您可以使用 INNER JOIN 将其加入到persons 表中。

# image - Nopcommerce 2.65 图像主题路径不是相对的

> ID：13081269
> 
> 赞同：1
> 
> 时间：2012-10-26T05:30:35.367
> 
> 标签：image, relative-path, nopcommerce

在 nopcommerce 2.6 主题页面中通过编辑器添加的图像显示 localhost 服务器的绝对路径。但是当在线制作时，图像路径不会像在相对路径中那样更改为网站名称。我也尝试过其他方法，例如使用 ~ 。它可以离线工作，但不能在线。

```
<img width="24" height="26" alt="address icon" src="~/../Content/Images/uploaded/add_icon.gif" /> 
```

图片路径如上。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:20:17.213

尝试这个

```
Use @Url.Content("Image Path")

<img width="24" height="26" alt="address icon" src="@Url.Content("~/Content/Images/uploaded/add_icon.gif") /> 
```

注意：在其中提供相对路径并将图像上传到服务器上的正确文件夹中

# javascript - 我的 onReadyStateChange 永远不会被调用，为什么？

> ID：13081272
> 
> 赞同：0
> 
> 时间：2012-10-26T05:30:53.067
> 
> 标签：javascript, ajax, xmlhttprequest, onreadystatechange

我的代码很简单。

```
function useXMLHttpRequest() {
var xmlhttp = new XMLHttpRequest();
xmlhttp.open("POST", "test.ashx", false);
xmlhttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded;charset=UTF-8");
xmlhttp.onReadyStateChange = function () {
    alert("ss");
};
xmlhttp.send("i=5");
alert(xmlhttp.responseText); 
```

}

当我调用 useXMLHttpRequest.Yes 时，它会提醒 xmlhttp.responseText 的值。但它不会提醒（“ss”）。在 IE9 和 Firefox 中。谁能告诉我穿的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T05:33:25.037

JavaScript（以及我知道的所有其他语言）区分大小写，因此[`onreadystatechange`](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest)与`onReadyStateChange`.

试试这个：

```
xmlhttp.onreadystatechange = function() {
    alert("ss");
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:37:25.457

你有

```
xmlhttp.open("POST", "test.ashx", false); 
```

第三个参数是`false`，表示您使用的是同步请求。对于此类请求，onreadystatechange 不起作用，不鼓励使用它。无论如何，您的请求在完成之前不会更进一步，因此在正常工作`alert(xmlhttp.responseText);`后立即`xmlhttp.send("i=5");`无需处理请求状态更改事件。

[在此处](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#open%28%29)和[此处](http://www.w3schools.com/dom/dom_httprequest.asp)查看更多信息。

# c# - Internet Explorer 9 中的 OnTextChanged 奇怪问题

> ID：13081274
> 
> 赞同：0
> 
> 时间：2012-10-26T05:30:54.577
> 
> 标签：c#, asp.net

我正在调查我们网站的一个非常奇怪的问题。我们有一个`textbox`，它有一个`OnTextChanged event`。当事件被触发时，我们会自动填充一些 add'l 文本框。这一切`works fine in Firefox, Chrome, and Safari`。然而，IE9 有一个问题。 `In IE9,`当事件被触发时，页面似乎正在回发，但是在回发之后，`ALL fields are blanked out`. 例如，如果我先输入 5 个其他字段，然后使用 ontextchanged 事件将数据输入到文本框中，当我退出此文本框时，所有 6 个文本框值都将被清空。

这是我的代码：

```
<asp:TextBox runat="server" ID="txtDAWAgencyName" Width="340px" OnTextChanged="DawLookup" MaxLength="255"></asp:TextBox>

protected void DAWLookup(object sender, EventArgs e)
{
    if (Validation.ValidDAW(txtDAW.Text))
    {
        Agency a = Agency.FetchByDAW(Convert.ToInt32(txtDAW.Text));

        if (a != null)
        {
            txtDAWAgencyName.Text = a.agencyName;

            if (!string.IsNullOrEmpty(a.primaryContactId.ToString()))
            {
                MembershipUser mu = Membership.GetUser(a.primaryContactId);
                if (mu != null)
                {
                    GenericProfile gp = GenericProfile.FetchByUserId(a.primaryContactId);
                    if (gp != null)
                    {
                        txtDAWAgencyRep.Text = gp.contactName;
                        txtAgencyRepPhone.Text = gp.contactPhone;
                        txtAgencyRepEmail.Text = mu.UserName;
                    }
                }
            }

        }
    }
} 
```

以下是有关该问题的一些详细信息：

*   在 Chrome、Firefox 和 Safari 中成功运行。
*   仅在本地开发中在 Internet Explorer 中成功运行
*   在服务器上的 Internet Explorer 中不起作用。
*   没有发生双重自动回发`(only one postback)`

这是最奇怪的事情。它在`all browsers EXCEPT internet explorer 9`服务器上工作（在本地开发环境中工作）。知道可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:38:16.073

检查页面上的视图状态，启用它。

如果您想避免回发，也可以尝试做 Ajax 发布。

我会推荐一个 UpdatePanel 或一个 jQuery Postback。

# java - 从报表中提取查询后如何准备结果集

> ID：13081275
> 
> 赞同：0
> 
> 时间：2012-10-26T05:30:55.030
> 
> 标签：java, jasper-reports, resultset

我有一个由*iReport4.5.0生成的**JR*报告文件和报告文件中定义的查询。

 *目前，我执行以下操作来创建 Jasper 报告：

```
JasperPrint jasperPrint = JasperFillManager.fillReport(reportSrc, null, connection);
JasperExportManager.exportReportToPdfStream(jasperPrint, output); 
```

问题是我不想将连接传递`JasperFillManager`给填充报告，而是更愿意从报告中获取查询，执行报告，并将数据源传递给`JasperFillManager`. 这可能吗？

**注意：-**查询将成为 Jasper 报告的一部分，我不想在我的 java 类中编写查询。

* * *

我找到了与此问题相关的帖子[导出 JasperReports 查询结果。](https://stackoverflow.com/questions/9789443/export-jasperreports-query-results)

我会尝试一下，让每个人在这种情况下感到多么舒服。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:45:55.883

虽然链接的问题适用于您想要做的事情，但我不推荐它。您正在为自己创造更多的工作，并为出错的地方创造更多的地方。从本质上讲，您正在使用 Jasper Reports 已经为您实现的东西`JRJdbcQueryExecuter`，并重写它。

如果您不信任，您可以随时自行查看源代码。基本上我所说的是在你走这条路之前重新思考你想要完​​成什么以及为什么。也许如果您解释了原因，那将是有道理的，我只是想不出一个原因。但也许会有更好的方法来实现这一目标。*

# selenium - 如何通过 Jenkins 中的电子邮件通知发送/发布 Selenium 测试报告？

> ID：13081280
> 
> 赞同：3
> 
> 时间：2012-10-26T05:31:58.790
> 
> 标签：selenium, junit, jenkins, report, email-notifications

我可以在 Jenkins 中发布和查看 Selenium (junit) 测试报告。我还可以向开发人员发送电子邮件通知。我想在电子邮件通知中包含 Selenium 测试报告，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:27:00.180

您可以为 Jenkins 安装插件`Editable Email Notification`。

在“默认内容”文本字段（尝试在可编辑电子邮件通知下配置 Jenkins 作业时可以找到该字段）中 `${JELLY_SCRIPT,template="text"}` ，还有一个可以使用的 HTML 模板。

# android - 在android中访问json内容

> ID：13081285
> 
> 赞同：2
> 
> 时间：2012-10-26T05:32:26.653
> 
> 标签：android, json

> **可能重复：**
> [在 Android 中发送和解析 JSON](https://stackoverflow.com/questions/2818697/sending-and-parsing-json-in-android)

我有`JSON`以下格式的结果，它`JSON Lint`显示为`Valid Response`.

我的问题是：如何访问“reportId0”值“164”、“reportId1”值等都是动态值的`157`内容`reportId2 value 165`？

我用于访问值的示例代码。`properties`如何获取值`reportid`并在其中添加所有值`Arraylist`？

```
"properties": {    
    "link": "",
    "approvalsReportCount": 3,
    "reportName0": "srcapprovals",
    "reportId0": 164,
    "reportName1": "Approvals",
    "reportId1": 157,
    "requests_report_id": "163",
    "requests_report_name": "EG approvals",
    "reportName2": "fulfillment",
    "reportId2": 165
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T08:21:22.713

这是我发现它获取 ReportId 值的最佳方式。

下面是我的代码

```
JSONObject jObj = new JSONObject(result);
            JSONObject jsonResultArray = jObj.getJSONObject("results");
            JSONObject pro_object = jsonResultArray.getJSONObject("properties");
            Iterator keys = pro_object.keys();
           while(keys.hasNext()) {
                String currentDynamicKey = (String)keys.next();
                String value = pro_object.getString(currentDynamicKey);
                String upToEightCharacters = currentDynamicKey.substring(0, Math.min(currentDynamicKey.length(), 8));

                if(upToEightCharacters.startsWith("reportId"))
                {

                    Log.v("key"," new report ID key  " + currentDynamicKey);
                    Log.v("key"," new report ID key  " + pro_object.getString(currentDynamicKey) );

                }
              } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T06:22:45.370

你可以用这个

```
public ArrayList<String> getReportIds() {
    boolean isContinue = true;
    JSONObject json;
    String tag = "reportId";
    int i = 0;
    ArrayList<String> repIdList = new ArrayList<String>();
    JSONObject prop = null;
    try {
        json = new JSONObject("<your json string>");
        prop = json.getJSONObject("properties");
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    while (isContinue) {
        String repId = "";
        try {
            repId = prop.getString(tag + i);
            repIdList.add(repId);
            i++;
        } catch (JSONException e) {
            isContinue = false;
            e.printStackTrace();
        }
    }
    return repIdList;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T08:18:06.427

你可以试试这个！！

```
try {
               JSONObject jObj = new JSONObject(result);
               JSONObject jsonResultArray = jObj.getJSONObject("results");
               Log.v("log_tag","json result Array :   "+ jsonResultArray);

               JSONObject pro_object = jsonResultArray.getJSONObject("properties");

               Iterator keys = pro_object.keys();

                 while(keys.hasNext()) {
                      // loop to get the dynamic key
                      String currentDynamicKey = (String)keys.next();
                      String value = pro_object.getString(currentDynamicKey);
                      approvaldto_Key = new All_Approval_Key_dto();

                      String upToEightCharacters = currentDynamicKey.substring(0, Math.min(currentDynamicKey.length(), 8));

                      if(upToEightCharacters.startsWith("reportId"))
                      {

                          approvaldto_Key.requestId = pro_object.getString(currentDynamicKey);
                          fetchrecursUserData.add(approvaldto_Key);
                      }

                  }

              }
        catch (JSONException e) {
            e.printStackTrace(); 
            }

          return  fetchrecursUserData;

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T05:41:40.890

你可以试试下面的代码

```
String serial= jsonObject.getJSONObject("response").getString("serialNumber"); 
```

或者

```
JSONObject json;
try {
    json = new JSONObject(buffer.toString());
    String accessToken = json.getString("access_token");
    return accessToken;
} catch (JSONException e) {
    Log.e("Podcast", "There was an error", e);
} 
```

# objective-c - Monotouch 物镜 C 绑定

> ID：13081288
> 
> 赞同：2
> 
> 时间：2012-10-26T05:32:36.157
> 
> 标签：objective-c, ios, xamarin.ios

我在我们的项目中使用单声道绑定包含了一些来自“Cocoa Controls”的控件，它们都工作正常，除了有一个我无法工作我希望有人能发现一个明显的错误。

这是目标 C 标头

```
typedef enum {
kWTShort = 1,
kWTLong = 5
} WToastLength;

@interface WToast : UIView

+ (void)showWithText:(NSString *)text;
+ (void)showWithImage:(UIImage *)image;

+ (void)showWithText:(NSString *)text length:(WToastLength)length textColor:(UIColor *)    textColor backgroundColor:(UIColor *) backGroundColor;
+ (void)showWithImage:(UIImage *)image length:(WToastLength)length;

@end 
```

这是 Mono ApiDefinition

```
[BaseType (typeof(UIView))]
interface WToast
{
      [Export("showWithText:")]
       void ShowText(String text);

    [Export("showWithText:length:textColor:backgroundColor:")]
    void ShowText(string text,ToastLenght lenght,UIColor textColor,UIColor   backgroundColor);
} 
```

注意我没有包括枚举 ToastLength

对象实例化的任何方式但是当我调用 ShowText 时程序找不到选择器 [WToast showWithText:]

我希望有人能帮帮忙

致克里斯蒂安·斯托尔·安徒生

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T05:52:12.270

我想我只需要离开代码一会儿。

答案是我有点厚

您会注意到目标 c 函数是

```
+ (void)showWithText:(NSString *)text; 
```

不是

```
- (void)showWithText:(NSString *)text; 
```

Mono 定义应该是

```
[Static,Export("showWithText:")]
   void ShowText(String text); 
```

不是

```
[Export("showWithText:")]
   void ShowText(String text); 
```

谢谢大家

# c# - 我想在 asp .net 中动态显示子菜单

> ID：13081290
> 
> 赞同：0
> 
> 时间：2012-10-26T05:32:53.773
> 
> 标签：c#, asp.net

我想`display submenu dynamically from database`。但我在菜单栏中遇到错误。`FindItem(dr["ParentMenuId"].ToString()).ChildItems.Add(mnu);`该对象引用未设置为对象的实例。我也是`unable to display my submenu`。有什么错误请告诉我。

我的代码是：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (! IsPostBack)
        getMenu(); 
}

private void getMenu()
{
    SqlConnection con = new SqlConnection(@"Data Source=ST015\SQLEXPRESS;Initial Catalog=MyData;Integrated Security=True");
    con.Open();
    DataSet ds = new DataSet();
    DataTable dt = new DataTable();
    string sql = "Select * from Categories";
    SqlDataAdapter da = new SqlDataAdapter(sql, con);
    da.Fill(ds);
    dt = ds.Tables[0];
   // DataRow[] drowpar = dt.Select("ParentMenuId=" + 0);

    foreach (DataRow dr in dt.Select("ParentMenuId=" + 0))
    {
        menuBar.Items.Add(new MenuItem(dr["MenuName"].ToString(),
                dr["MenuId"].ToString(), "",
                dr["MenuDescription"].ToString()));
    }

    foreach (DataRow dr in dt.Select("ParentMenuId >" + 0))
    {
        MenuItem mnu = new MenuItem(dr["MenuName"].ToString(),
                       dr["MenuId"].ToString(),
                       "", dr["MenuDescription"].ToString());
        menuBar.FindItem(dr["ParentMenuId"].ToString()).ChildItems.Add(mnu);

    }
    con.Close();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-18T09:01:52.970

这是旧的，但似乎没有解决。我遇到了同样的问题。
**您必须将 ParentMenuId 和 MenuId 数据类型从数据库更改为整数。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:33:56.913

我认为`dr["ParentMenuId"]`一定是这样`null`，这就是你得到的原因`null reference error`..检查你是否得到了`dr["ParentMenuId"]`价值....总是尝试检查可空值如下....

```
foreach (DataRow dr in dt.Select("ParentMenuId=" + 0))
{
   if(dr["MenuName"]!=null && dr["MenuId"]!=null && dr["MenuDescription"]!=null)
   {
     menuBar.Items.Add(new MenuItem(dr["MenuName"].ToString(),
            dr["MenuId"].ToString(), "",
            dr["MenuDescription"].ToString()));
   }
}

foreach (DataRow dr in dt.Select("ParentMenuId >" + 0))
{
   if(dr["MenuName"]!=null && dr["MenuId"]!=null && dr["MenuDescription"]!=null)
   {
     MenuItem mnu = new MenuItem(dr["MenuName"].ToString(),
                   dr["MenuId"].ToString(),
                   "", dr["MenuDescription"].ToString());
   }

   if(dr["ParentMenuId"]!=null)
   {
     menuBar.FindItem(dr["ParentMenuId"].ToString()).ChildItems.Add(mnu);
   }
} 
```

# postgresql - 如何在 postgis 2.0 中插入 geometry_columns

> ID：13081292
> 
> 赞同：2
> 
> 时间：2012-10-26T05:33:06.400
> 
> 标签：postgresql, gis, postgis

你好。

当我使用 postgres 8.4 和 postgis 1.5 时，我在geometry_columns 中使用坐标注册表（例如，对于 qgis）。

但是现在，在 postgres 9.2 和 postgis 2.0 中，geometry_columns 是视图！视图geometry_columns 由系统表组成，其名称以'pg_' 开头。如何插入或更新行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T05:59:14.897

使用 PostGIS 管理功能，如[`AddGeometryColumn`](http://postgis.refractions.net/docs/AddGeometryColumn.html)、[`DropGeometryColumn`](http://postgis.refractions.net/docs/DropGeometryColumn.html)等。

或者，如这些页面中所述，您可以[手动注册 columns](http://postgis.refractions.net/docs/using_postgis_dbmanagement.html#Manual_Register_Spatial_Column)。

# c++ - Linux 中伪终端的读写问题

> ID：13081297
> 
> 赞同：2
> 
> 时间：2012-10-26T05:33:46.057
> 
> 标签：c++, c, linux, mono, pty

我正在编写一个与外部进程交互的 C++ 程序。外部进程用 C# 编写并在单声道上运行。请注意，我无法修改 C# 代码，因为它不是我编写的程序。

在这方面，我首先使用管道，当然我后来意识到它是完全缓冲的，因此我遇到了很多同步问题。本质上，外部进程必须在每次写入后刷新其输出，这是不可能的。

我接下来要尝试的是文件，但是我发现在我的情况下使用伪终端更合适。这是我编写的一些示例代码：

```
int main()
{
    int fdm, fds, rc, pid;
    bool rValue;
    /* Setup Master pty*/
    rValue = rValue && (fdm = posix_openpt(O_RDWR)) >= 0 &&
             (rc = grantpt(fdm)) == 0 && (rc = unlockpt(fdm) == 0);
    if (rValue) {
        /* Open Slave pty */
        fds = open(ptsname(fdm), O_RDWR);
        pid = fork();
        if(pid < 0)
            perror("fork failed");
        else if(pid == 0) //child
        {
            close(fdm); //close master
            struct termios slave_orig_term_settings;
            struct termios new_term_settings;
            tcgetattr(slaveTTY, &slave_orig_term_settings);
            new_term_settings = slave_orig_term_settings;
            cfmakeraw(&new_term_settings);
            tcsetattr(slaveTTY, TCSANOW, &new_term_settings);

            //redirect I/O of this process
            close(0);
            close(1);
            close(2);
            dup(slaveTTY);
            dup(slaveTTY);
            dup(slaveTTY);

            close(slaveTTY);

            setsid();
            ioctl(0, TIOCSCTTY, 1);

            //launch the external process and replace its image in this process
            execve(argv[0],...);
        }
        else
        {
            close(fds); //close slave
            //Perform some interaction
            write(something using fdm);
            //Assume fdsets declared and set somewhere here
            select(fdm +1,&fdset,NULL,NULL,NULL);
            int readBytes = read(someting using fds);
        }
    }
    return EXIT_SUCCESS;
} 
```

假设正在处理 select 的 fdset 和 fdclr。

在父进程中观察到以下问题：

1.  有时 read 返回时 readBytes > 0 但缓冲区中没有任何内容
2.  有时，写入终端的任何内容都会被回读
3.  一些垃圾值，例如 ^]]49]1R 被转储到终端上（这是实际的终端，即我的输出窗口）

PS：外部进程用C/C++编写时，不会出现这个问题。仅当我以单声道运行 C# 程序时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T18:13:23.480

我认为python 中的[pexpect](http://pexpect.readthedocs.org/en/latest/index.html)是一个不错的选择，如果您不必在 中这样做`C++`，它将为您节省大量时间。您还可以使用[pyinstaller](http://www.pyinstaller.org)等 Python 冻结工具将您的 Python 脚本转换为独立的二进制文件。

# spring - 我们如何将用户会话从一个 spring 应用程序上下文流向另一个？

> ID：13081304
> 
> 赞同：0
> 
> 时间：2012-10-26T05:34:19.623
> 
> 标签：spring, security, session, sharing, applicationcontext

我们如何将用户会话从一个 spring 应用程序上下文流向另一个？基本上我有一个代表 Web 层的弹簧应用程序和另一个代表 REST 层的弹簧应用程序。我希望当 Web 层访问 REST 层时，包含用户信息的会话可用于 REST 层的 Web 以进行身份​​验证。

请建议。

*在收到第一个答案后进行编辑：*
目前我们确实有 Web 层以及安全性和所有其他流程。我们即将打算引入 REST 层。假设这个 REST 层被当前的 Web 层和其他 API 调用。我们不想对 Web 层进行任何更改，但同时需要在 REST 层设置安全性，这在调用 REST 服务时也应该适用于 Web 层。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T07:09:43.370

区分 SSO 和会话共享。如果您只想在应用程序之间进行身份验证（用户只需登录一次），那么您需要某种形式的单点登录（SSO），[CAS](http://www.jasig.org/cas)就是一个例子，但还有很多。

另一方面，如果您需要跨不同节点（或应用程序）访问完整会话（以及应用程序放入其中的所有内容），则可以查看[Memcached](http://memcached.org/)或[Terracotta](http://ehcache.org/documentation/distributed_caching_with_terracotta.html)之类的东西。值得注意的是，会话复制是相当 I/O 密集型的，对于较大的站点，它通常需要一个专用的网络接口来进行复制。

但是，我想告诉您，如果您的应用程序耦合得如此紧密以至于它们需要共享相同的确切会话状态，那么也许它们一开始就不应该分开？这散发出错误的设计和架构假设的味道。

# javascript - beforeShowDay() jquery datepicker，限制天数不显示

> ID：13081308
> 
> 赞同：0
> 
> 时间：2012-10-26T05:34:50.647
> 
> 标签：javascript, jquery, jquery-ui, datepicker

我有这段代码，我想将选项限制为仅由诊所选择的日期。

[http://jsfiddle.net/pypbc/10/](http://jsfiddle.net/pypbc/10/)

```
 $("#datepicker").datepicker({
    dateFormat: "yy-mm-dd",
    numberOfMonths: 3,
    showButtonPanel: true,
    beforeShowDay: function(date) {

        var day = date.getDay();
        var clinic = $("#AppointmentClinicId").val();

        console.log("day:" + day);
        console.log("selected clinic:" + clinic);

        if (clinic == 1) {
            return [(date.getDay() == 1), ""];
        }

        if (clinic == 2) {
            return [(date.getDay() == 2), ""];
        }

        if (clinic == 3) {
            return [(date.getDay() == 3), ""];
        }

        if (clinic == 4) {
            return [(date.getDay() == 4), ""];
        }

        if (clinic == 5) {
            return [(date.getDay() == 5), ""];
        }

        if (clinic == 6) {
            return [(date.getDay() == 6), ""];
        }

        /*if (clinic == 0) {
            return [true, ""];
        }*/

        //return [true,''];
    }
}).val(); 
```

但是，它总是显示一个 0 诊所，它总是返回 false。如果您删除 beforeShowDay，它会起作用。我知道“return [true,''];”，如果我只有那个，它就可以工作。但是，无法弄清楚为什么它没有正确选择诊所来显示允许的日期。

请帮忙！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-26T05:41:07.870

您尝试使用的功能不是`beforeShowDay`但是`onBeforeShowDay`

# sql-server - 在 SQL Server 2005 中将日期转换为字符串

> ID：13081309
> 
> 赞同：0
> 
> 时间：2012-10-26T05:34:54.377
> 
> 标签：sql-server, sql-server-2005

我正在使用 SQL Server 2005。通过以下格式在数据库中插入指定日期时：(
) `10/11/2012 00:00:0:00`( `MM/dd/yyyy HH:mm:s:ms`)。

```
select CAST(day(column name) AS CHAR(2)) + ' '
   + CONVERT(CHAR(4), column name, 100) + ', '
   + CONVERT(CHAR(4), column name, 120) as Coupon_expire
from Admin 
```

我无法将此日期转换为这种类型 ( `Wednesday, October 11, 2012`)，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T05:48:04.550

```
SELECT  DATENAME(weekday,'10/11/2012')
      + ', '
      + DATENAME(month,'10/11/2012')
      + ' '
      + convert(varchar,month('10/11/2012'))
      + ', '
      + convert(varchar,year('10/11/2012')) 
```

试试这个。

# r - 将多个复杂图组合为单个图形中的面板

> ID：13081310
> 
> 赞同：20
> 
> 时间：2012-10-26T05:34:58.500
> 
> 标签：r, layout, plot, heatmap

### @backlin 的介绍

`layout`使用或可以将多个简单图组合为单个图形中的面板`par(mfrow=...)`。但是，更复杂的绘图往往会在内部设置自己的面板布局，从而使它们无法用作面板。有没有办法创建嵌套布局并将复杂的绘图封装到单个面板中？

我有一种感觉，该`grid`包可以实现这一点，例如通过在单独的视口中绘制面板，但无法弄清楚如何。这是一个演示问题的玩具示例：

```
my.plot <- function(){
    a <- matrix(rnorm(100), 10, 10)
    plot.new()
    par(mfrow=c(2,2))
    plot(1:10, runif(10))
    plot(hclust(dist(a)))
    barplot(apply(a, 2, mean))
    image(a)
}
layout(matrix(1:4, 2, 2))
for(i in 1:4) my.plot()
# How to avoid reseting the outer layout when calling `my.plot`? 
```

## @alittleboy 的原始问题

我使用包中的`heatmap.2`函数`gplots`来生成热图。以下是单个热图的示例代码：

```
library(gplots)
row.scaled.expr <- matrix(sample(1:10000),nrow=1000,ncol=10)
heatmap.2(row.scaled.expr, dendrogram ='row',
          Colv=FALSE, col=greenred(800), 
          key=FALSE, keysize=1.0, symkey=FALSE, density.info='none',
          trace='none', colsep=1:10,
          sepcolor='white', sepwidth=0.05,
          scale="none",cexRow=0.2,cexCol=2,
          labCol = colnames(row.scaled.expr),                 
          hclustfun=function(c){hclust(c, method='mcquitty')},
          lmat=rbind( c(0, 3), c(2,1), c(0,4) ), lhei=c(0.25, 4, 0.25 ),                 
) 
```

但是，由于我想在单个图中比较多个热图，所以我使用`par(mfrow=c(2,2))`然后调用`heatmap.2`四次，即

```
row.scaled.expr <- matrix(sample(1:10000),nrow=1000,ncol=10)
arr <- array(data=row.scaled.expr, dim=c(dim(row.scaled.expr),4))
par(mfrow=c(2,2))
for (i in 1:4)
heatmap.2(arr[ , ,i], dendrogram ='row',
          Colv=FALSE, col=greenred(800), 
          key=FALSE, keysize=1.0, symkey=FALSE, density.info='none',
          trace='none', colsep=1:10,
          sepcolor='white', sepwidth=0.05,
          scale="none",cexRow=0.2,cexCol=2,
          labCol = colnames(arr[ , ,i]),                 
          hclustfun=function(c){hclust(c, method='mcquitty')},
          lmat=rbind( c(0, 3), c(2,1), c(0,4) ), lhei=c(0.25, 4, 0.25 ),                 
) 
```

但是，结果不是单个图中的四个热图，而是四个单独的热图。换句话说，如果我使用`pdf()`输出结果，文件是四页而不是一页。我需要在某处更改任何参数吗？非常感谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-28T17:07:20.280

好的。我想这个问题已经有足够长的时间没有得到回答，应该写下长长的答案。

最困难的图形问题的答案是（正如@backlin 建议的那样）'grid' 包的原始使用。许多预构建的图形包会覆盖所有当前的视口和绘图设备设置，因此如果您想要以非常具体的方式完成某些事情，您必须自己构建它。

我建议阅读 Paul Murrell 的书“R Graphics”并阅读有关“网格”包的章节。这是一本非常有用的书，我的办公桌上一直放着一本。

对于你的热图，我写了一个快速入门，可以让你快速入门。

**要知道的功能**

*   `grid.newpage()` 这将初始化绘图设备。不带参数使用它。
*   `grid.rect()` 这将绘制一个矩形。您的热图基本上只是一组巨大的彩色矩形，因此这将是您图形的大部分。它的工作原理是这样`grid.rect(x=x_Position, y=y_Position, width=width_Value, height=height_Value, gp=gpar(col=section_Color, fill=section_Color), just=c("left", "bottom"), default.units="native")` 的：'just' 参数指定矩形的哪个点将位于您指定的 (x, y) 坐标上。
*   `grid.text()` 这将绘制文本。它是这样工作的：`grid.text("Label Text", x_Value, y_Value, gp=gpar(col=color_Value, cex=font_Size), just=c("right","center"), rot=rot_Degrees, default.units="native")`
*   `grid.lines()` 这画了一条线。它是这样工作的：`grid.lines(c(x_Start,x_End), c(y_Start, y_End), gp=gpar(col=color_Value), default.units="native")`
*   `dataViewport()` 这定义了绘图窗口的属性，“网格”称为“视口”。像这样使用它：`pushViewport(dataViewport(xData=x_Data, yData=y_Data, xscale=c(x_Min, x_Max), yscale=c(y_Min, y_Max), x=x_Value, y=y_Value, width=width_Value, height=height_Value, just=c("left","center")))` 这里有一些东西要记住......请参阅视口的更详细说明。
*   `pushViewport()` 这用于初始化一个veiwport。您将其包裹在视口定义中以实际执行视口，如下所示：`pushViewport(dataViewport([stuff in here]))`
*   `popViewport()` 这最终确定了一个视口，并将您在视口层次结构中上移一级。请参阅视口的更详细说明。

**简而言之视口**

视口是定义“网格”对象的绘制位置和方式的临时绘图空间。*视口内的所有内容都是相*对于视口绘制的。如果视口旋转，里面的所有东西都会旋转。视口可以嵌套，可以重叠，并且几乎可以无限灵活，但有一个例外：它们始终是一个矩形。

最初让很多人感到困惑的是坐标系。每个视口，包括初始的“grid.newpage()”视口，在 x 和 y 轴上都从 0 变为 1。原点 (0,0) 是最左下角，最大值 (1,1) 是最右上角。这是“npc”单位系统，所有没有指定一组单位的东西都可能最终根据这个系统绘制。这对您来说意味着两件事：

1.  指定视口大小和位置时使用“npc”系统。只需假设您的视口必须使用“npc”坐标，您就会省去很多麻烦。这意味着如果我想绘制两个相邻的图，两个视口的定义将类似于：
    *   `viewport(x=0, y=0, width=0.5, height=1, just=c("left","lower"))`和
    *   `viewport(x=0.5, y=0, width=0.5, height=1, just=c("left","lower"))`
2.  如果您的视口具有不同的坐标系（例如用于绘制图形的视口），那么您将需要为您绘制的每个“网格”对象指定“default.units”参数。例如，如果您尝试在 (2,4) 处绘制一个点，您将永远看不到该点，因为它会远离屏幕。指定`default.units="native"`将告诉该点使用视口自己的坐标系并正确绘制该点。

视口可以直接导航和写入，但除非您正在做一些非常自动化的事情，否则指定一个视口，在其中绘制，然后“弹出”（最终确定）视口会更容易。这会将您返回到父视口，您可以从下一个视口开始。弹出每个视口是一种简洁的方法，适合大多数用途（并且更容易调试！）。

绘制图表时，“dataViewport”功能非常重要。这是一种特殊类型的视口，可以为您处理所有坐标和比例，只要您告诉它您正在使用什么数据。这是我用于任何绘图区域的那个。当我第一次开始使用“grid”包时，我调整了所有值以适应“npc”坐标系，但这是一个错误！只要您记得为每个绘图项使用“本机”单位，“dataViewport”功能就很容易了。

**免责声明**

数据可视化是我的强项，我不介意花半天时间编写一个好的视觉效果。“网格”包让我能够比我发现的任何其他东西更快地创建非常复杂的视觉效果。我将我的视觉效果编写为函数，因此我可以快速加载各种数据。我再高兴不过了。

但是，如果您不喜欢编写脚本，“网格”将是您的敌人。此外，如果你认为半天的时间对于视觉来说太长了，那么“网格”对你的帮助不会太大。（不）著名的“ggplot2”包是大多数人所接受的，我衷心推荐它，尽管我个人认为它没有用。

如果有人想要帮助学习“网格”图形，我非常愿意帮助教学。它彻底改变了我创建快速、智能和美观的数据视觉效果的能力。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-08-02T03:15:48.667

该`gridGraphics`软件包可能会有所帮助，

[![在此处输入图像描述](../Images/ca6b81ec145aad21a64439fd7b1ad52c.png)](https://i.stack.imgur.com/fi6ib.png)

```
library(gridGraphics)
library(grid)

grab_grob <- function(){
  grid.echo()
  grid.grab()
}

arr <- replicate(4, matrix(sample(1:100),nrow=10,ncol=10), simplify = FALSE)

library(gplots)
gl <- lapply(1:4, function(i){
  heatmap.2(arr[[i]], dendrogram ='row',
            Colv=FALSE, col=greenred(800), 
            key=FALSE, keysize=1.0, symkey=FALSE, density.info='none',
            trace='none', colsep=1:10,
            sepcolor='white', sepwidth=0.05,
            scale="none",cexRow=0.2,cexCol=2,
            labCol = colnames(arr[[i]]),                 
            hclustfun=function(c){hclust(c, method='mcquitty')},
            lmat=rbind( c(0, 3), c(2,1), c(0,4) ), lhei=c(0.25, 4, 0.25 ),                 
  )
  grab_grob()
})

grid.newpage()
library(gridExtra)
grid.arrange(grobs=gl, ncol=2, clip=TRUE) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-27T09:44:26.830

我遇到了类似的问题，并想出了一个非常简单但需要安装 imagemagick 的解决方案。这个想法是将热图绘制到单独的文件中，然后将它们与 montage 命令结合起来：

```
library(gplots)
row.scaled.expr <- matrix(sample(1:10000),nrow=1000,ncol=10)
arr <- array(data=row.scaled.expr, dim=c(dim(row.scaled.expr),4))
par(mfrow=c(2,2))
for (i in 1:4) {
    ifile <- paste0(i,'_heatmap.pdf')
    pdf(ifile)
    heatmap.2(arr[ , ,i], dendrogram ='row',
                        Colv=FALSE, col=greenred(800), 
                        key=FALSE, keysize=1.0, symkey=FALSE, density.info='none',
                        trace='none', colsep=1:10,
                        sepcolor='white', sepwidth=0.05,
                        scale="none",cexRow=0.2,cexCol=2,
                        labCol = colnames(arr[ , ,i]),                 
                        hclustfun=function(c){hclust(c, method='mcquitty')},
                        lmat=rbind( c(0, 3), c(2,1), c(0,4) ), lhei=c(0.25, 4, 0.25 ),                 
    )
    dev.off()
}
system('montage -geometry 100% -tile 2x2 ./*_heatmap.pdf outfile.pdf') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-02T02:10:22.923

正如 Dinre 所说，“网格”包可以处理所有复杂的情节。对于@alittleboy 的原始问题，我认为 Bionconductor 的“ComplexHeatmap”包（也是基于网格的）可能是一个不错的解决方案（[http://www.bioconductor.org/packages/release/bioc/vignettes/ComplexHeatmap /inst/doc/ComplexHeatmap.html](http://www.bioconductor.org/packages/release/bioc/vignettes/ComplexHeatmap/inst/doc/ComplexHeatmap.html) )

# verilog - 在verilog中使用'<='运算符

> ID：13081313
> 
> 赞同：2
> 
> 时间：2012-10-26T05:35:15.193
> 
> 标签：verilog, system-verilog, hdl

谁能解释为什么当我们使用'<='而不是'='时这个特定模块不起作用的原因

```
module TestCell(x0, x1, y0, y1, z);
input x0, x1, y0, y1;
output z;
reg z;
reg a1, a2, a3, a4;
always @(x0 or x1 or y0 or y1) begin
a1 <= ~(x0 & y1);
a2 <= ~(y0 & x1);
a3 <= ~(a2 | a1);
a4 <= a2 & a1;
z <= ~(a4 | a3);
end
endmodule 
```

为了在verilog中使用'<='我们应该确保什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T05:41:24.263

1.  在组合逻辑的情况下，有`"="`赋值，对于顺序块，我们有`"<="`运算符。

2.  `"="`是阻塞赋值，`"<="`是非阻塞赋值。

3.  `"="`在开始/结束内顺序执行代码，而非阻塞`"<="`并行执行。

**[更多的](http://www.asic-world.com/verilog/verilog_one_day3.html)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T08:45:20.120

正如 Cthulhu 所说 `=`的阻塞，这意味着在继续下一行代码之前将对语句进行评估。

```
always @* begin 
  a = b & c;
  d = e & f;
  g = a & d ;
end 
```

上面的例子是一样的：

```
always @* begin
  g = b & c & e & f;
end 
```

但是，如果我们切换到使用`<=`Then 它们在模拟中不再相同，g 将是 OLD a AND OLD b。由于这是一个组合块，即不像触发器那样定期触发或评估，因此您会从模拟中得到奇怪的结果。

正确使用`<=`非阻塞赋值是在暗示触发器。

```
always @(posedge clk or negedge rst_n) begin
  if (!rst_n) begin
    a <= 1'b0;
    d <= 1'b0;
    g <= 1'b0;
  end
  else begin
      a <= b & c;
      d <= e & f;
      g <= a & d ;
  end
end 
```

在上面的触发器示例中，g 从最后一个 clk 周期而不是当前评估中获取 a 和 d 的值。

在您使用的示例中`always @(sensitivity list)`，这是一个组合电路，并且`=`是正确的用法。`always @*`如果您的模拟器允许，我还建议切换到。这`*`是一个通配符，无需手动输入敏感度列表。

我认为值得记住的是，综合工具的结果将`always @`基于如果它是基于边缘的语句，它们将使用一种触发器，如果​​它是组合的，它们将放置组合逻辑。使用`=`or`<=`仅对模拟有影响。使用错误的类型意味着您的模拟将与合成的硬件不匹配。

# windows-8 - Innosetup 在 Windows 8 开始菜单磁贴上安装不需要的磁贴

> ID：13081317
> 
> 赞同：2
> 
> 时间：2012-10-26T05:36:27.157
> 
> 标签：windows-8, microsoft-metro, inno-setup

我使用 InnoSetup 安装由几个 exe 组成的桌面应用程序。每个 exe 最终在瓷砖矩阵中都有自己的瓷砖。我真的不希望所有的 exe 都有一个瓷砖。是否有指定哪个exe获得放置在瓷砖矩阵中的瓷砖？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T14:28:16.460

只需在另一个[问题](https://stackoverflow.com/questions/15522972/creating-windows-8-start-screen-groups-and-tiles-not-only-for-exes-with-inno-s)中找到答案。`excludefromshowinnewinstall`您可以使用标志来控制它。

# symfony - Symfony2 控制台限制访问

> ID：13081319
> 
> 赞同：0
> 
> 时间：2012-10-26T05:36:37.343
> 
> 标签：symfony

我正在使用 Symfony2。当我想使用应用程序/控制台程序时，我收到“限制访问”错误。

这是权限问题还是其他问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:45:03.110

尝试将其运行为`php app/console`. 如果它有效，您需要`chmod +x app/console`使其可执行才能运行它而无需预先添加`php`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T12:09:26.943

好的，我发现了错误。几天前，我将一些其他文件（没有 Symfony2 实体文件）复制到 Entity 目录中，所以当我想运行 app/console 学说：架构：更新命令时出现受限错误。

谢谢

# macros - 宏应该有副作用吗？

> ID：13081328
> 
> 赞同：12
> 
> 时间：2012-10-26T05:37:41.357
> 
> 标签：macros, racket, side-effects

宏扩展可以（或应该）有副作用吗？例如，这是一个宏，它实际上在编译时抓取网页的内容：

```
#lang racket

(require (for-syntax net/url))
(require (for-syntax racket/port))

(define-syntax foo
  (lambda (syntx)
    (datum->syntax #'lex
                   (port->string
                     (get-pure-port
                       (string->url
                         (car (cdr (syntax->datum syntx))))))))) 
```

然后，我可以做`(foo "http://www.pointlesssites.com/")`，它将被替换为`"\r\n<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\"\r\n\t <and so on>"`

这是好习惯吗？我是否保证 Racket 只会运行此代码一次？如果我`(display "running...")`在宏中添加一行，它只会打印一次，但我不想从一个例子中概括......

PS - 我问的原因是因为我实际上认为这有时真的很有用。例如，[这](https://github.com/greghendershott/gapi/)是一个库，它允许您（在编译时）从 Google API Discovery 服务加载发现文档并自动为其创建包装器。我认为如果库实际上是从网络而不是从本地文件中获取发现文档，那将是非常酷的。

另外，举一个具有不同类型副作用的宏的示例：我曾经构建了一个宏，它将 Racket 的一小部分转换为（eta 扩展的）lambda 演算（当然，它仍然可以在 Racket 中运行）。每当宏完成函数的翻译时，它会将结果存储在字典中，以便以后调用宏可以在自己的翻译中使用该函数定义。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-28T13:29:24.453

### 简短的回答

宏有副作用很好，但你应该确保你的程序在提前编译时不会改变行为。

### 更长的答案

带有副作用的宏是一个强大的工具，它可以让你做一些让程序更容易编写的事情，或者实现一些根本不可能的事情。但是在宏中使用副作用时需要注意一些陷阱。幸运的是，Racket 提供了所有工具来确保您可以正确执行此操作。

最简单的宏副作用是您使用一些外部状态来查找要生成的代码。您在问题中列出的示例（阅读 Google API 描述）就是这种类型。一个更简单的例子是`include`宏：

```
#lang racket
(include "my-file.rktl") 
```

这会读取表单的内容`myfile.rktl`并将其放置在使用`include`表单的位置。

现在，`include`这不是构建程序的好方法，但这是宏中一种非常良性的副作用。如果你提前编译文件，它的工作原理是一样的，因为你的结果`include`是文件的一部分。

另一个不好的简单示例*是*这样的：

```
#lang racket
(define-syntax (show-file stx)
  (printf "using file ~a\n" (syntax-source stx))
  #'(void))

(show-file) 
```

那是因为`printf`仅在编译时执行，所以如果你编译你的程序`show-file`提前使用（如`raco make`）然后`printf`会发生，并且在程序运行时不会发生，这可能不是意图。

幸运的是，Racket 有一种技术可以让你`show-file`有效地编写宏。基本思想是留下实际执行副作用的*残留代码。*特别是，您可以`begin-for-syntax`为此目的使用 Racket 的表单。这是我的写作方式`show-file`：

```
#lang racket
(define-syntax (show-file stx)
  #`(begin-for-syntax
      (printf "using file ~a\n" #,(syntax-source stx))))

(show-file) 
```

现在，不是在`show-file`宏*展开*时发生，而是`printf`在生成的代码中`show-file` *发生*，源代码嵌入在展开的语法中。这样，您的程序在提前编译的情况下仍能正常工作。

宏的其他用途也有副作用。Racket 中最突出的一个是模块间通信——因为`require`它不会产生需要模块可以获得的值，所以在模块之间进行通信最有效的方法是使用副作用。要在存在编译的情况下进行这项工作，需要与`begin-for-syntax`.

这是 Racket 社区，尤其是我思考过很多的话题，并且有几篇学术论文讨论了它是如何工作的：

[*可组合和可编译的宏：你想要什么时候？*](http://www.cs.utah.edu/plt/publications/macromod.pdf)，马修·弗拉特，ICFP 2002

[*Advanced Macrology and the Implementation of Typed Scheme*](http://www.ccs.neu.edu/racket/pubs/scheme2007-ctf.pdf) , Ryan Culpepper、Sam Tobin-Hochstadt 和 Matthew Flatt，Scheme Workshop 2007

[*作为图书馆的语言*](http://www.ccs.neu.edu/racket/pubs/pldi11-thacff.pdf)，Sam Tobin-Hochstadt、Ryan Culpepper、Vincent St-Amour、Matthew Flatt 和 Matthias Felleisen，PLDI 2011

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T14:52:12.417

在 Lisp 中，函数 eval-when 允许您决定何时扩展宏。

# javascript - 如何在eclipse-android中使用javascript构建android测试程序？

> ID：13081329
> 
> 赞同：0
> 
> 时间：2012-10-26T05:37:43.897
> 
> 标签：javascript, android, eclipse, monkeyrunner

如何在eclipse-android中使用javascript构建android测试程序？我不知道要测试，只是学习了android应用程序开发。有人用Python来做，我只是想试试用javascript，可能是monkeyrunner的东西。越具体越好！非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:42:35.167

我有同样的场景，我也没有在android中找到任何javascript依赖，所以我所做的是，我做了一些基本的验证类，一一获取字段并用基类的对象一一验证表单，然后只提交表格，这一切都很简单，如果你真的很难找到一些解决方案并且没有时间，我建议你也这样做。

# sql - 在后台运行部分 shell 脚本

> ID：13081331
> 
> 赞同：1
> 
> 时间：2012-10-26T05:37:51.053
> 
> 标签：sql, shell, vpn

我有一个shell脚本，它要求用户输入，并根据输入使用sqlplus打开数据库连接并运行一些sql查询，如drop table/create table/select/update。sql部分是否可以作为后台作业运行，这样即使我失去了与网络的vpn连接，所有的sql查询都会被执行。此外，当 sql 部分完成并提示用户输入另一个输入时，shell 脚本会进入前台，在再次获得输入后进入后台？

我发现了一些问题，这些问题告诉我们如何在后台运行脚本，但如果可能的话，我只想在后台运行同一脚本的某些部分（并在前台进行用户输入）。虽然我也可以处理多个脚本它（将脚本分成需要在后台调用的部分并通过另一个脚本调用它们），如果可能的话，我宁愿在一个脚本中执行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T05:58:53.487

您可以将主脚本分解为函数/较小的脚本，以实现后台进程和前台进程混合的所需行为。

例如，在您的主脚本中：

```
#!/bin/sh

echo "Starting script..."

# do so more stuff here, maybe ask user for input

./run_background_process_1 &

# ask the user for some more input

./run_background_process_2 &
... 
```

使用`&`脚本调用末尾的符号表示它们应该在后台运行。

（**更新**）如果您想将所有内容保存在 1 个脚本中，请使用函数来分解/封装您希望在后台运行的逻辑部分。通过在调用后缀 来调用这些函数，`&`同上。

您可以尝试以下示例以查看它是否有效：

```
#!/bin/sh

hello() {
    condition="yes"
    while [[ $condition== "yes" ]]
    do
        echo "."
        sleep 1
    done
}

# Script main starts here
echo "Start"
hello &
echo "Finish" 
```

删除`&`之后`hello`，您会发现它的行为有所不同。

有一些工具可以让您在失去连接的情况下保持脚本运行。例如，查看[http://www.gnu.org/software/screen/](http://www.gnu.org/software/screen/) - 它的功能之一是`Programs continue to run when their window is currently not visible and even when the whole screen session is detached from the users terminal.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T00:48:29.833

在网上搜索后我发现我可以使用三种方法来制作脚本背景：

1) 使用 bg：[如何将已经运行的进程置于 nohup 下？](https://stackoverflow.com/questions/625409/how-do-i-put-an-already-running-process-under-nohup).但不幸的是，这在 ksh shell 中对我不起作用。2) 使用协进程 3) 使用 nohup 我决定使用 nohup，因为它更容易实现。需要在后台运行的 sqlplus 部分，我制作了另一个脚本并使用 nohup 从主脚本中调用它

```
nohup script-name.ksh ${parameter1} ${paramter2} & 
```

这对我有用。

# php - 动态加载/使用私有 PGP 密钥，使用它来解密数据，然后从密钥环中卸载它

> ID：13081334
> 
> 赞同：0
> 
> 时间：2012-10-26T05:38:15.557
> 
> 标签：php, encryption, amazon-ec2, gpgpu, gnupg

这是上一个问题（[GnuPG：如何使用某个密钥加密/解密文件？](https://stackoverflow.com/questions/11292196/php-gnupg-how-to-encrypt-decrypt-files-using-a-certain-key)）的延续，我需要：

1.  **动态加载私有 PGP 密钥**（特定于特定用户）并将其导入密钥环
2.  使用此密钥解密一些数据
3.  卸载此私钥并删除它的任何痕迹

这似乎是一种解密数据的复杂方法，足以说明我有充分的理由这样做。我可能错了，但我不能通过命令行提供私钥来解密文件（这将是完美的，但似乎我不能这样做），即。

```
exec("gpg --use-key=private-key.gpg -o $clear_file_name --decrypt $encr_file_name"); 
```

那么，**如何动态加载/使用私有 PGP 密钥**，使用它来解密数据，然后**从密钥环中卸载它**

**或者**（如果这不可能），是否有任何其他类似的工具可以让我实现这一目标？

**PS。代码将在 linux EC2 实例上运行**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:39:05.520

您需要使用 gpg 的`--homedir`选项，即使用一个临时目录，之后您可以删除该目录。有关示例，请参见[超级用户的此答案。](https://superuser.com/a/450760)

# liferay - 使用liferay自定义MVC portlet在表中插入行后如何获得primamry key作为回报？

> ID：13081335
> 
> 赞同：1
> 
> 时间：2012-10-26T05:38:17.703
> 
> 标签：liferay, primary-key, portlet, liferay-6

我正在 Eclipse IDE 中使用 mvc 开发一个自定义 portlet。

以下是我的场景：

我有一个表名`restaurant`，从`addrestaurant.jsp`页面开始，我在餐厅表中添加数据。

在我的`addrestaurant.jsp`页面中，我有以下选择控件代码，它需要选择多个值：

```
<label>Select Ad Type<span class="f_req">*</span></label>                                                
<select data-placeholder="- Select Ad Type -" class="chzn-select" multiple name="ad_type" value="<%=restaurantOBJ.getAdtypeId()%>">
    <option value="1">Standby Ad</option>
    <option value="2">Homepage Ad</option>
    <option value="3">Slider Ad</option>
    <option value="4">Event Based Ad</option>
</select> 
```

现在这个`adtype`选择的`addrestaurant.jsp`将被插入到一个`rest_map_adtype`表中，我想将这些选择的值与最后创建的餐厅主键的引用一起添加。

那么我怎样才能得到`restaurant`最后编辑的主键

更多解释让我给出一些代码片段：

```
public void addRestaurant(ActionRequest request, ActionResponse response) {

    log.info("Inside addRegistration");
    List<String> errors = new ArrayList<String>();

    restaurant rest = RestaurantActionUtil
            .getRestaurantFromRequest(request);     

    boolean restValid = RestaurantValidator
            .validateRestaurant(rest, errors);

    if (restValid) {
        try {
            log.info(rest);

            restaurant test = restaurantLocalServiceUtil
                    .addrestaurant(rest);

        //Above Code will add the all data which is in my addrestaurant.jsp accept just selected control values

            String[] adtype_ID=request.getParameterValues("ad_Type");

            //here am taking the select tag's multiple value in one string array 
```

因此，在这一行之后，我需要将`rest_map_Adtype`表中的所有值添加到餐厅主键的引用中，该主键是使用`addrestaurant(rest)`上面一行的方法创建的。

我怎样才能使它成为可能？

或者在表中插入行后如何获得主键？

我的 ActionUtil.class 如下

```
public restaurant addRestaurant(restaurant restParam) {
        restaurant restVar;

        try {

            restVar = restaurantPersistence.create(counterLocalService
                    .increment(restaurant.class.toString()));
        } catch (SystemException e) {
            e.printStackTrace();
            return restVar = null;
        }

        try {

            resourceLocalService.addResources(restParam.getGroupId(),restParam.getGroupId(), restParam.getUserId(),
                    restaurant.class.getName(),restParam.getPrimaryKey(), false,true,true);
        } catch (PortalException e) {
            e.printStackTrace();
            return restVar = null;
        } catch (SystemException e) {
            e.printStackTrace();
            return restVar = null;
        }

        restVar.setName(restParam.getName());
        restVar.setAdress(restParam.getAdress());
        restVar.setCity(restParam.getCity());
        restVar.setPin(restParam.getPin());
        restVar.setState(restParam.getState());
        restVar.setCountry(restParam.getCountry());
        restVar.setContactno(restParam.getContactno());
        restVar.setEmail(restParam.getEmail());
        restVar.setWebsite(restParam.getWebsite());
        restVar.setCuisinetype(restParam.getCuisinetype());
        restVar.setPersonalmail(restParam.getPersonalmail());
        restVar.setPersonalname(restParam.getPersonalname());
        restVar.setPersonalPhone(restParam.getPersonalPhone());
        restVar.setNoofemenuagent(restParam.getNoofemenuagent());
        restVar.setLicensekey(restParam.getLicensekey());
        restVar.setRestregId(restParam.getRestregId());
        restVar.setNoofdiningtable(restParam.getNoofdiningtable());
        restVar.setAvgnoofcustomermonthly(restParam.getAvgnoofcustomermonthly());
        restVar.setAveragroupagevisit(restParam.getAveragroupagevisit());
        restVar.setImpoflocation(restParam.getImpoflocation());
        restVar.setAvgmonthlycheckamount(restParam.getAvgmonthlycheckamount());
        restVar.setCostperthousandimpression(restParam.getCostperthousandimpression());
        restVar.setAdtypeId(restParam.getAdtypeId());
        //restVar.setNoofdiningtable(restParam.getNoofdiningtable());
        //restVar.setAvgnoofcustomermonthly(restParam.getAvgnoofcustomermonthly());

        restVar.setIsactive(restParam.getIsactive());
        restVar.setCreateddate(restParam.getCreateddate());
        restVar.setLastmodifiedby(restParam.getLastmodifiedby());
        restVar.setModifieddate(restParam.getModifieddate());
        restVar.setGroupId(restParam.getGroupId());
        restVar.setUserId(restParam.getUserId());
        restVar.setIsdeleted(restParam.getIsdeleted());
        restVar.setRestregId(restParam.getRestregId());

        //restVar.setOrganizationId(restParam.getOrganizationId());

        try {
            return restaurantPersistence.update(restVar, false);
        } catch (SystemException e) {
            e.printStackTrace();
            return restVar = null;
        }
    } 
```

以下是我的对象餐厅，添加餐厅后返回以下值 `{restId=0, name=aaaa, isactive=false, userId=10158, groupId=10180, createddate=Fri Oct 26 12:40:53 GMT 2012, lastmodifiedby=10158, modifieddate=Fri Oct 26 12:40:53 GMT 2012, restregId=12333, adress=, city=AHMEDABAD, pin=, state=, country=, contactno=, email=, website=, cuisinetype=, noofemenuagent=0, personalname=, personalPhone=, personalmail=, adtypeId=0, isdeleted=false, licensekey=12333, noofdiningtable=0, averagroupagevisit=0, impoflocation=, avgnoofcustomermonthly=0, avgmonthlycheckamount=0, costperthousandimpression=0.0}`

restaurantLocalServiceUtil 类

```
public static emenu.advertise.database.model.restaurant addrestaurant(
        emenu.advertise.database.model.restaurant restaurant)
        throws com.liferay.portal.kernel.exception.SystemException {
        return getService().addrestaurant(restaurant);
    }

    /**
    * Creates a new restaurant with the primary key. Does not add the restaurant to the database.
    *
    * @param restId the primary key for the new restaurant
    * @return the new restaurant
    */
    public static emenu.advertise.database.model.restaurant createrestaurant(
        long restId) {
        return getService().createrestaurant(restId);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T11:49:09.277

`restVar`此语句在您的ie`restaurant`对象中设置主键：

```
restVar = restaurantPersistence.create(counterLocalService
                .increment(restaurant.class.toString())); 
```

当你这样做时：

```
return restaurantPersistence.update(restVar, false); 
```

它实际上返回`restaurant`应该包含生成的主键的对象。

所以在下面的电话之后：

```
restaurant test = restaurantLocalServiceUtil.addrestaurant(rest); 
```

你可以简单地做：

```
long restId = test.getPrimaryKey(); // this would return the primary-key 
```

希望这可以帮助。

# iphone - 在屏幕上的随机位置显示 UIImageView

> ID：13081339
> 
> 赞同：2
> 
> 时间：2012-10-26T05:38:33.147
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在开发一个游戏，它使用陀螺仪将敌人保持在相对相同的位置，代码如下：

```
if([motionManager isGyroAvailable])
{
    [motionManager setGyroUpdateInterval:0.05];

    [motionManager startGyroUpdatesToQueue:[NSOperationQueue mainQueue]
                               withHandler:^(CMGyroData *gyroData, NSError *error)
     {
         valueX3 = gyroData.rotationRate.y* 50;
         valueY3 = gyroData.rotationRate.x* 50;

         int newX3 = (int)(enemyufoG.center.x +valueY3);
         int newY3 = (int)(enemyufoG.center.y -valueX3);

         CGPoint newCenter2 = CGPointMake(newX3, newY3);

         enemyufoG.center = newCenter2;

         valueX2 = gyroData.rotationRate.y* 50;
         valueY2 = gyroData.rotationRate.x* 50;

         int newX2 = (int)(enemyufoR.center.x +valueY2);
         int newY2 = (int)(enemyufoR.center.y -valueX2);

         CGPoint newCenter = CGPointMake(newX2, newY2);

         enemyufoR.center = newCenter;

         valueX = gyroData.rotationRate.y* 50;
         valueY = gyroData.rotationRate.x* 50;

         int newX = (int)(enemyAlien.center.x +valueY);
         int newY = (int)(enemyAlien.center.y -valueX);

         CGPoint newCenter3 = CGPointMake(newX, newY);

         enemyAlien.center = newCenter3;
     }];
} 
```

一旦你射击了位于枪口的敌人，它就会隐藏`UIImageView`，然后使用`NSTimer`调用另一个方法来再次显示它。我想让敌人重新出现在屏幕上的随机位置。

```
CGPoint pos = enemyAlien.center;

if ((pos.x > 254) && (pos.x < 304) && (pos.y > 140) && (pos.y < 160 && _ammoCount != 0))
{
    enemyAlien.hidden = YES;
    [dangerBar setProgress:dangerBar.progress-0.10];
    _killCount = _killCount+3;
    [killCountField setText: [NSString stringWithFormat:@"%d", _killCount]];

    timer = [NSTimer scheduledTimerWithTimeInterval: 4.0
                                             target: self
                                           selector: @selector(showAlien)
                                           userInfo: nil
                                            repeats: NO];
}

- (void) showAlien {

enemyAlien.hidden = NO;

} 
```

当我尝试使用`enemyAlien.center = enemyAlien.center + arc4random()%100;`上面`enemyAlien.hidden = NO`时，我收到以下错误：

`'Invalid operands to binary expression ('CGPoint (aka 'struct CGPoint') and 'unsigned int').`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T05:40:04.493

您正在尝试将整数添加到 cgpoint。试试这个。

```
enemyAlien.center = CGPointMake(enemyAlien.center.x + (arc4random()%100),enemyAlien.center.y + (arc4random()%100)); 
```

尽管这只会使外星人沿对角线方向移动。您可能应该将其更改为以下内容以获得更好的体验。

```
enemyAlien.center = CGPointMake((arc4random()%SCREEN_WIDTH),(arc4random()%SCREEN_HEIGHT)); 
```

其中 SCREEN_WIDTH 和 SCREEN_HEIGHT 是您的比赛场地的尺寸。

# android - 将 imageView 放在另一个 ImageView 上：Android

> ID：13081346
> 
> 赞同：1
> 
> 时间：2012-10-26T05:39:56.750
> 
> 标签：android, android-layout, android-widget

我有一个视图层次结构，例如：

```
BiggerView extends ViewGroup
      |
      |
      |----------------------MyImageView extends ImageView 
```

和`BiggerView`一样大`MyImageView`，现在我需要`MyImageView`在用户按下的位置放置 2 个小图像`longPress`。这两个小图像应该可以在`MyImageView`. 现在这个问题有两个部分：

1.  如何把这两个图像放在上面`MyImageView`。我知道 Absolute Layout 曾经是解决此问题的一种解决方案，但现在非常不推荐使用它。将这些图像绘制为可绘制对象可能不会给我在这两个图像上的手势控制事件。我相信这不应该是一个新问题，而且许多其他人必须面临这样的需求并且已经完成了它。

2.  将这 2 张图片放在`MyImageView`. 我应该遵循什么方法在`onMove`事件中移动这些图像？我应该只用 new dX 和 dY 调用布局方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:12:13.253

使用相对布局，您可以很好地分层图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:22:21.070

一个。您可以相对于容器使用`RelativeLayout`和定位新`ImageView`的 s，以便它们重叠`MyImageView`

湾。您可以使用`Animation`来移动图像。[http://developer.android.com/guide/topics/graphics/prop-animation.html](http://developer.android.com/guide/topics/graphics/prop-animation.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T06:17:07.783

使用 framelayout 您可以将一个图像放在另一个图像上，然后您可以根据要设置为可见的图像在 java 中设置可见性。

# sql-server - 存储过程根据参数调用不同的存储过程

> ID：13081347
> 
> 赞同：1
> 
> 时间：2012-10-26T05:40:01.350
> 
> 标签：sql-server, sql-server-2008, stored-procedures

我想在 Sql Server 中创建一个存储过程，它调用许多不同的存储过程之一，并根据提供给它的参数选择哪一个，但我似乎无法正确选择语法。

目前正在尝试：

```
Begin
  Set nocount on;
  exec iif(param='individual', sp_FindIndividualRespondents, 
      iif(param='org', sp_FindOrgRespondents, sp_FindGroupRespondents))
End 
```

这目前告诉我：'param'附近的语法不正确。

我看过这里：[基于存储过程参数的条件 where 子句？](https://stackoverflow.com/questions/4159528/conditional-where-clause-based-on-a-stored-procedure-parameter)，但我不知道如何更改该代码以适应我的情况。

如何为存储过程提供参数，然后使用它来选择和运行不同的存储过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T05:44:14.477

```
BEGIN
SET NOCOUNT ON;

   DECLARE @queryToRun NVARCHAR(128) = 'EXECUTE ';

   SELECT @queryToRun = @queryToRun + CASE
                                         WHEN param = 'individual'
                                            THEN 'sp_FindIndividualRespondents'
                                         WHEN param = 'org'
                                            THEN 'sp_FindOrgRespondents'
                                         ELSE 'sp_FindGroupRespondents'
                                      END

    EXECUTE sp_executesql @queryToRun;
END 
```

* * *

如果您不需要动态 sql，它在本示例中出现，您不需要，您可以简单地检查该值并运行适当的存储过程：

```
BEGIN
SET NOCOUNT ON;

   IF param = 'individual'
      EXECUTE sp_findIndividualRespondents;
   ELSE IF param = 'org'
      EXECUTE sp_FindOrgRespondents;
   ELSE
      EXECUTE sp_FindGroupRespondents;
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T05:45:39.543

```
BEGIN 
 IF param = "individual" 
   EXEC Sp_findindividualrespondents; 

 IF param = "org" 
   EXEC Sp_findorgrespondents; 

 IF param = "Nothing" 
   EXEC Sp_findgrouprespondents; 
END 
```

或者

```
BEGIN 
 IF param = "individual" 
   EXEC Sp_findindividualrespondents; 
 ELSE IF param = "org" 
   EXEC Sp_findorgrespondents; 
 ELSE 
   EXEC Sp_findgrouprespondents; 
END 
```

# c++ - Xcode 4.5 链接时代码生成挂起链接器

> ID：13081348
> 
> 赞同：1
> 
> 时间：2012-10-26T05:40:01.733
> 
> 标签：c++, ios, xcode, linker

在我的 iOS 项目上尝试在 Xcode 中使用链接时间代码优化时遇到问题。一旦链接阶段开始，它就会一直运行，直到它锁定机器并且需要通过电源按钮重新启动。我正在使用 XCode 4.5.1 和 LLVM 4.1，尽管在使用 GCC 时会出现同样的问题。LTCG 关闭时一切正常。有人遇到过这种情况么？

# jquery - jquery - 启用按钮令人困惑

> ID：13081351
> 
> 赞同：3
> 
> 时间：2012-10-26T05:40:08.307
> 
> 标签：jquery

我总是尝试这样做`$("input[name=button]").attr("disabled", '');`，但它不起作用。为什么这不起作用？

我最终使用了这个`$("input[name=button]").attr("disabled", false);`。在我看来，两者都是等价的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T05:50:41.650

> 为什么这不起作用？

`disabled`是一个所谓的[*布尔属性*](http://www.whatwg.org/specs/web-apps/current-work/multipage/common-microsyntaxes.html#boolean-attribute)：

> 许多属性是布尔属性。元素上存在布尔属性表示真值，不存在该属性表示假值。
> 
> 如果该属性存在，则其值必须是空字符串或与属性的规范名称匹配的不区分大小写的 ASCII 值，并且没有前导或尾随空格。

所以一个空值仍然表示该属性的存在，因此表单元素保持禁用状态。

* * *

> 在我看来，两者都是等价的。

他们不是。jQuery 以不同的方式处理布尔属性。它测试新的 uhm 值的值，[如果值为 ，则删除该属性`false`](https://github.com/jquery/jquery/blob/1.8.2/src/attributes.js#L492)：

```
set: function( elem, value, name ) {
    var propName;
    if ( value === false ) {
        // Remove boolean attributes when set to false
        jQuery.removeAttr( elem, name );
    } else {
        // ...
    }
    return name;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T05:41:08.233

您可以使用[`removeAttr()`](http://api.jquery.com/removeAttr/)删除属性

要删除`disabled`，请尝试这样做，

`$("input[name=button]").removeAttr("disabled");`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T05:47:10.620

`disabled`是一个属性，你应该使用`prop`方法而不是`attr`方法：

```
$("input[name=button]").prop("disabled", false); 
```

> 该`.prop()`方法是设置属性值的便捷​​方式——尤其是在设置多个属性、使用函数返回的值或同时设置多个元素的值时。在设置 selectedIndex、tagName、nodeName、nodeType、ownerDocument、defaultChecked 或 defaultSelected 时应使用它。从 jQuery 1.6 开始，这些属性不能再用`.attr()`方法设置。它们没有对应的属性，只是属性。

# javascript - 有没有办法捕捉页面上每个 DOM 元素的变化

> ID：13081354
> 
> 赞同：0
> 
> 时间：2012-10-26T05:40:22.807
> 
> 标签：javascript, jquery, dom

我写这篇文章很长一段时间是为了“[在关闭浏览器或退出页面时保存更改](http://www.codeproject.com/Articles/20260/Save-Changes-on-Close-of-Browser-or-When-Exiting-t)”。但我正在考虑使用 Javascript 以更好的方式解决这个问题。有人可以建议我如何了解或捕获页面每个 DOM 元素的更改。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T05:56:07.637

[http://www.w3.org](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-eventgroupings-htmlevents)：“当控件失去输入焦点并且在获得焦点后其值已被修改时发生更改事件。此事件对 INPUT、SELECT 和 TEXTAREA 元素有效。”

除了上面列出的内容之外，不确定如何检测 DOM 元素中的更改，但您可以使用该`onchange`事件来跟踪已更改的元素。

`element.onchange = function() { };`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:00:36.933

除非您订阅所有事件，否则默认情况下您无法收听所有事件。

即使您使用库，例如​​ Prototype，您也可以这样做，`document.on('DOMevent', callback)`但您必须指定要监听的事件。

# objective-c - 如何用圆圈掩盖方形图像并在图像周围放置黑色边框

> ID：13081356
> 
> 赞同：4
> 
> 时间：2012-10-26T05:40:34.003
> 
> 标签：objective-c, ios, mask, uibezierpath

我有一个 40x40 的方形图像，我想通过剪裁使其变圆，但还在图像周围放置一个黑色的 5 像素边框。

我有以下内容，它掩盖了方形图像，所以它现在是圆形的

```
 UIImage *image = self.imageView.image;
        CGSize imageSize = image.size;
        CGRect imageRect = CGRectMake(0, 0, imageSize.width, imageSize.height);

        UIGraphicsBeginImageContextWithOptions(imageSize, NO, 0.0);
        // Create the clipping path and add it
        UIBezierPath *path = [UIBezierPath bezierPathWithOvalInRect:imageRect];
        [path addClip];

        [image drawInRect:imageRect];
        UIImage *roundedImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

        self.imageView.image = roundedImage; 
```

但现在我还需要在它周围添加一个圆形边框。我需要一条新路径，还是可以只使用上面代码中的路径？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-26T06:25:18.493

在您的代码中添加以下三行（使用您想要的任何颜色和笔划宽度）：

```
CGContextSetStrokeColorWithColor(ctx, [[UIColor greenColor] CGColor]);
[path setLineWidth:50.0f];
[path stroke]; 
```

所以它变成：

```
UIGraphicsBeginImageContextWithOptions(imageSize, NO, 0.0);
CGContextRef ctx = UIGraphicsGetCurrentContext();
// Create the clipping path and add it
UIBezierPath *path = [UIBezierPath bezierPathWithOvalInRect:imageRect];
[path addClip];
[image drawInRect:imageRect];

CGContextSetStrokeColorWithColor(ctx, [[UIColor greenColor] CGColor]);
[path setLineWidth:50.0f];
[path stroke];

UIImage *roundedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

self.imageView.image = roundedImage; 
```

# mysql - 将 MySQL“.SQL 转储文件”加载到 SQL Server

> ID：13081363
> 
> 赞同：0
> 
> 时间：2012-10-26T05:41:17.577
> 
> 标签：mysql, sql, sql-server, sql-server-2008

> **可能重复：**
> [将 MySQL 脚本转换为 MSSQL](https://stackoverflow.com/questions/1770795/convert-mysql-script-to-mssql)

我有使用 SQL Yog 工具从 MySQL 服务器生成的 *.sql 转储文件。请任何人告诉我如何将 MySQL *.sql 转储文件转换为 SQL 脚本文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T05:54:55.060

你可以参考这个，这可能对你有帮助

```
http://superuser.com/questions/202406/convert-mysql-backup-dump-script-to-ms-sql 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:55:57.353

您是否尝试过[Full Convert Enterprice](http://www.spectralcore.com/fullconvert/)？

# c# - 如何暂停当前正在运行的进程

> ID：13081364
> 
> 赞同：0
> 
> 时间：2012-10-26T05:41:20.483
> 
> 标签：c#

我开发了一个套接字程序。我有客户端套接字程序的问题，它一次从多个服务器获取数据并更新列表视图中的详细信息。它发生在无限循环中。

```
while(true) 
{

} 
```

我想在中间阶段退出这个循环，我使用按钮点击事件来做到这一点

```
foreach (Process myProc in Process.GetProcesses())
{
    if (myProc.ProcessName == "procees name")
    {
        myProc.Kill();
    }
} 
```

但它太慢了，我想暂停那个过程并杀死它。帮我暂停当前正在运行的进程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T05:50:02.553

没有暂停运行进程的功能，所以答案是否定的。

如果这是可能的，您可以更改每个流程，这是所有软件构建者都试图阻止的事情。

你需要一些方法。

但是，如果您有时间可以尝试 [http://www.c-sharpcorner.com/uploadfile/mmehta/multithreading311162005045743am/multithreading3.aspx](http://www.c-sharpcorner.com/uploadfile/mmehta/multithreading311162005045743am/multithreading3.aspx)

[http://www.codeproject.com/Articles/2042/Using-events-for-thread-synchronization](http://www.codeproject.com/Articles/2042/Using-events-for-thread-synchronization)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:59:15.827

如果您想同时处理多个套接字连接，我建议使用[SocketAsyncEventArgs](http://msdn.microsoft.com/en-us/library/system.net.sockets.socketasynceventargs.socketasynceventargs.aspx)而不是传统的`while (true)`.

看看这篇文章：

*   [C# SocketAsyncEventArgs 高性能套接字代码](http://www.codeproject.com/Articles/83102/C-SocketAsyncEventArgs-High-Performance-Socket-Cod)

通常循环附带的最简单（但并非完美）的解决方案`while`是这样的：

```
private volatile bool _running = true;

...

while (_running)
{
    // Do stuff
}

...

public void ButtonClick(object sender, EventArgs e)
{
    _running = false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T06:17:33.617

由于您提到该进程是您自己的应用程序，因此您可以自己退出应用程序而不是杀死应用程序。你的问题更多是“我怎样才能退出我的程序”。

首先，您的按钮可能看起来没有响应，因为您正在运行无限循环。一种（不好的）方法是这样的：

```
private bool _exit = false; //member variable
while(true && !_exit) 
{
    Application.DoEvents();
} 
```

`Application.DoEvents`对于使您的应用程序继续侦听其他操作很重要。进而，

```
private void btn_Click(object sender, EventArgs e)
{
    _exit = true;
} 
```

imo 的理想方式是将从服务器获取数据的工作转移到后台进程。可能是这样的：

```
BackgroundWorker _backgroundWorker = new BackgroundWorker(); //member field

void Listen()
{
   _backgroundWorker.WorkerSupportsCancellation = true;
   _backgroundWorker.WorkerReportsProgress = true;
   _backgroundWorker.DoWork += (sender, e) => { while(condition)//bla bla; }
   _backgroundWorker.RunWorkerAsync();
} 
```

然后在您取消点击时，

```
private void btn_Click(object sender, EventArgs e)
{
    _backgroundWorker.CancelAsync();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T06:35:43.233

根据您的应用程序（多少线程，什么 ui 库），您可以只使用 [Application.Exit](http://msdn.microsoft.com/en-us/library/ms157894.aspx)。也许您应该在创建工作线程时设置它们的[IsBackground](http://msdn.microsoft.com/en-us/library/system.threading.thread.isbackground.aspx)属性。

想象一下会发生什么，如果可以暂停该过程。用户单击按钮，您的程序暂停当前进程，然后无事可做，因为您只是暂停了自己。杀死进程的代码永远不会运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T07:37:43.497

您可以挂起远程进程的所有线程。

[http://www.codeproject.com/Articles/2964/Win32-process-suspend-resume-tool](http://www.codeproject.com/Articles/2964/Win32-process-suspend-resume-tool)

# android - Cycle由eclipse中的项目组成

> ID：13081366
> 
> 赞同：1
> 
> 时间：2012-10-26T05:41:34.953
> 
> 标签：android, eclipse

我在eclipse中有项目A和项目B。项目A是对B的引用，而B是对A的引用。所以我将项目B添加到A的“Java构建路径>>项目”中。我还将项目A添加到B的“Java构建路径>>项目”中。

所以问题是当我尝试构建项目时，它出现了一个警告说“在项目'A'的构建路径中检测到一个循环。这个循环由项目{A，B}组成”。我想在移动设备上运行该项目。当我使用 Sumsung Galaxy S3 作为“android 应用程序”链接运行时，它只是继续加载，最后得到错误说“堆栈溢出”。

我怎么解决这个问题？它与有关循环组成的警告有关吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T06:03:42.257

好吧，正如错误清楚地表明的那样，你有一个循环依赖。那是糟糕的架构。您必须删除该依赖项。由于我不知道依赖项的详细信息，我可以建议一般可能的解决方案 -

1.  你可以合并两个项目并且只有一个项目吗？
2.  您可以创建一个单独的库项目“Project C”吗？这样“项目 A”和“项目 B”依赖于“项目 C”。但是“项目 A”和“项目 B”之间没有依赖关系，或者只有“项目 A”依赖于“项目 B”，而不是相反。 ![在此处输入图像描述](../Images/ac714b9e826fab86aff64ee178ec3d32.png)

# php - （自己修复）在数据库中获取数据并存储在全局变量中

> ID：13081370
> 
> 赞同：0
> 
> 时间：2012-10-26T05:41:44.500
> 
> 标签：php, mysql, database, pdo

我整晚都在努力解决这个问题，但我似乎无法弄清楚。我是 php 和 PDO 的新手。我成功地创建了一个包含字段`id`和. `firstname``lastname`

关于`id =1`username 和 lastname 的值是`Andrea`and `Bocelli`，
on`id=2`是`Sarah`and `Brightman`。

现在我想获取 id1 上的所有名字和姓氏并将其存储在 $_SESSION 数组变量中，并将 id2 的名字和姓氏值存储在另一个 $_SESSION 数组变量中，以便我能够在其他页面中访问这些变量。这是我的代码：（已经编辑和工作）

```
$host   = "localhost";

$dbname = "try";

$user   = "root";

$pass   = "";

$dbh = new PDO("mysql:host=$host;dbname=$dbname",$user,$pass);

$statement = $dbh->prepare('SELECT * FROM members');

$statement->execute();

$count = $statement->rowCount();

$_SESSION['firstname']=array();

$_SESSION['lastname']=array();

for ($c=0, $c2=1;$c<$count;$c++, $c2++){

    $sql='SELECT firstname FROM members WHERE id=?';

    $sth=$dbh->prepare($sql);

    $sth->execute(array($c2));

    $_SESSION['firstname'][$c]=$sth->fetchColumn();

    $sql='SELECT lastname FROM members WHERE id=?';

    $sth=$dbh->prepare($sql);

    $sth->execute(array($c2));

    $_SESSION['lastname'][$c]=$sth->fetchColumn();

} 
```

现在的问题是这段代码只获取 id1 上的数据，显然我只在循环内访问了 id 1。我想要做的是每个循环都会增加 id 号。我尝试`$idupdate`在循环外部和循环内部声明一个值为 1的变量`WHERE id=$idupdate`then `&idupdate++`，但它似乎不起作用。我想要实现的是获取 id 1 中整个列中的所有数据，并将其存储在另一个页面上可访问的数组变量中。我怎样才能做到这一点？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T05:47:09.093

你需要调用 session_start(); 在设置/访问任何会话变量之前。然后你可以通过首先调用 session_Start() 再次访问另一个页面中的会话变量；

完成后，调用 session_destroy();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:48:54.200

您不必将会话声明为数组。尝试这样的事情。

```
$_SESSION['id1']['firstname']=$firstname_id1; //
$_SESSION['id1']['lastname']=$lastname_id1;

$_SESSION['id2']['firstname']=$firstname_id2;
$_SESSION['id2']['lastname']=$lastname_id2; 
```

您所做的将覆盖名字和姓氏。

```
$_SESSION['firstname'][$c]=$sth->fetchColumn(); 
```

我看到你的 for 循环没有多大意义。这样的事情怎么样。

```
 <?php

session_start();
$host   = "localhost";

$dbname = "try";

$user   = "root";

$pass   = "";

$dbh = new PDO("mysql:host=$host;dbname=$dbname",$user,$pass);

$sql='SELECT firstname,lastname FROM members WHERE id=1';

$sth=$dbh->prepare($sql);

$sth->execute();

$_SESSION[]['firstname']=$sth->fetchColumn();
$_SESSION[]['lastname']=$sth->fetchColumn(1);

$sql='SELECT firstname,lastname FROM members WHERE id=2';

$sth=$dbh->prepare($sql);

$sth->execute();

$_SESSION[]['firstname']=$sth->fetchColumn();
$_SESSION[]['lastname']=$sth->fetchColumn(1);

?> 
```

编辑：

插入行时存储名字和姓氏。

```
<?php

     session_start();
 $firstname = 'Mike';
 $lastname = 'Luther';

// query
$sql = "INSERT INTO members (firstname,lastname) VALUES (:firstname,:lastname)";
$q = $conn->prepare($sql);
$q->execute(array(':firstname'=>$firstname,
                  ':lastname'=>$lastname));

$id = $db->lastInsertId('id');

$_SESSION[$id]['firstname'] = $firstname;
$_SESSION[$id]['lastname'] = $lastname;

    //i dont think you will need that $id variable. What i understand is that you just want to display the firstname and lastname.

   //you can just write

   $_SESSION['firstname'] = $firstname;
   $_SESSION['lastname'] = $lastname;

?> 
```

# php - Mcrypt Win32 与 PHP Mcrypt 扩展

> ID：13081371
> 
> 赞同：1
> 
> 时间：2012-10-26T05:41:47.360
> 
> 标签：php, mcrypt

我期待使用 Win32 命令行 mcrypt.exe 加密文件。然后使用基于 apache/unix 的 PHP 脚本对其进行解密。

所以我在win的命令行中做：

```
mcrypt -a "blowfish" -k 1234 -m cbc test.txt 
```

(`test.txt`是一个简单的文本文件，其中包含“工作正常”

这会生成一个 47 字节的文件，名为`test.txt.nc`

所以我将文件上传到我的 apache 网络服务器并运行这个脚本：

```
$s = mcrypt_cbc("blowfish","1234",file_get_contents("test.txt.nc"),MCRYPT_DECRYPT);
file_put_contents("newtext.txt",$s); 
```

我收到这个警告：

```
Warning: mcrypt_cbc() [function.mcrypt-cbc]: Attempt to use an empty IV, which is NOT recommend 
```

还有一个 48 字节的`newtext.txt`文件，其中包含二进制数据而不是解密的文本文件

我需要一些指导！非常感谢

# java - 如何阻止球衣客户端在 Http 301 上抛出异常？

> ID：13081374
> 
> 赞同：2
> 
> 时间：2012-10-26T05:41:59.640
> 
> 标签：java, jersey, jersey-client

我正在使用 Jersey 客户端对我的服务运行一些集成测试。但是，我的一个电话发送了重定向。我期待获得重定向，但是当 Jersey 客户端获得重定向时，它会出现 com.sun.jersey.api.client.UniformInterfaceException 错误。有没有办法让它接受重定向的响应，让我知道它得到了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T10:42:21.217

您可以捕获 UniformInterfaceException，它提供包含所有详细信息的响应字段。

您还可以编写一些 hamcrest 匹配器来表达您的期望：

```
import static javax.ws.rs.core.Response.Status.*;
import static org.junit.rules.ExpectedException.*;

import javax.ws.rs.core.Response.Status;

import org.hamcrest.*;
import org.junit.*;
import org.junit.rules.ExpectedException;

import com.sun.jersey.api.client.*;

public class MyResourceShould {

    @Rule
    public ExpectedException unsuccessfulResponse = none();

    private WebResource resource;

    @Before
    public void setUp() {
        Client client = Client.create();
        client.setFollowRedirects(false);
        resource = client.resource("http://example.com");
    }

    @Test
    public void reportMovedPermanently() {
        unsuccessfulResponse.expect(statusCode(MOVED_PERMANENTLY));

        resource.path("redirecting").get(String.class);
    }

    public static Matcher<UniformInterfaceException> statusCode(Status status) {
        return new UniformInterfaceExceptionResponseStatusMatcher(status);
    }

}

class UniformInterfaceExceptionResponseStatusMatcher extends TypeSafeMatcher<UniformInterfaceException> {

    private final int statusCode;

    public UniformInterfaceExceptionResponseStatusMatcher(Status status) {
        this.statusCode = status.getStatusCode();
    }

    public void describeTo(Description description) {
        description.appendText("response with status ").appendValue(statusCode);
    }

    @Override
    protected boolean matchesSafely(UniformInterfaceException exception) {
        return exception.getResponse().getStatus() == statusCode;
    }

} 
```

另请注意，跟随重定向（在 setUp 方法中）应设置为 false 以获取 UniformInterfaceException 而不是跟随重定向（如果在 Location 标头中指定）。

# android - 如何在android的单一布局中放置二维码扫描的扫描区域以及edittext？

> ID：13081375
> 
> 赞同：1
> 
> 时间：2012-10-26T05:42:00.957
> 
> 标签：android

我必须制作一个扫描二维码的应用程序。但是，我必须在特定屏幕中保留两个选项。用户可以扫描二维码或直接在同一屏幕中给出的编辑文本中输入数字。现在，我的问题是如何将两个视图（即扫描区域）以及编辑文本放在单个 xml 文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T05:46:57.580

您可以使用开源项目

[http://code.google.com/p/zxing/](http://code.google.com/p/zxing/)

完成这项工作。通过自定义项目。

# mysql - mysql表设计，大列大小与大量行

> ID：13081376
> 
> 赞同：0
> 
> 时间：2012-10-26T05:42:17.410
> 
> 标签：mysql

请帮助我了解以下哪项更适合扩展和性能。

```
Table: test
columns: id <int, primary key>, doc <int>, keyword <string> 
```

我要存储的数据是指向包含特定关键字的文档的指针

设计一：

```
have unique constraint on the keyword column and store the list of documents as an array
e.g id: 1, doc: [4,5,6], keyword: google 
```

设计二：

```
insert a row for each document  
1 4 google  
2 5 google  
3 6 google 
```

假设可以找到特定关键字的平均文档数接近 100000。可能没有关键字出现的最大文档数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T05:50:42.307

很多因素都会影响扩展和性能，因此在开发早期尝试优化未知数通常不是一个好主意。

对于数据库设计，我发现通常最好使用更正确的规范化方法（您的设计 2），然后担心缩放和性能是否成为问题。然后，您可以根据您面临的问题对某些区域进行非规范化或采取其他方法。

您的设计选项 1 可能会更直接地遇到其他问题，因为无法将 doc 列与另一个表连接，以及更新和搜索它的复杂性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:03:02.610

设计 1 可能受到[MySQL 的行大小限制的限制](http://dev.mysql.com/doc/refman/5.0/en/column-count-limit.html)。

设计 2 对我来说最有意义。如果您需要删除其中一个值怎么办？您只需删除一行，而不必搜索和更新数组。这也很好，因为它允许您在必要时限制结果的大小（例如，用于分页）。

**您还可以考虑在此表和关键字**表之间创建多对多关系，而不是在此处将关键字存储为字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T06:24:51.723

您可以忘记选项 1，因为 mysql 中没有数组数据类型。

老实说，如果您想要针对此类数据的可扩展解决方案，我认为您应该研究另一种类型的数据库。更多地研究 NoSQL 和“键值对存储数据库”。

使用 mysql，我能想到的最好的选择是您的第二个选项，除了您应该创建另一个具有数字 ID 和唯一关键字列表的表。这样，当您进行搜索时，您将首先查找 ID，然后通过 ID 而不是字符串过滤大表。数值比较比字符串比较快。

# javascript - javascript扩展数组类

> ID：13081379
> 
> 赞同：1
> 
> 时间：2012-10-26T05:42:26.080
> 
> 标签：javascript

这段代码有什么问题？我正在尝试使用所有本机数组的函数来扩展类 foo 。

```
function foo(){
    Array.call(this);
 }

foo.prototype.addFruit=function(item){
    this.unshift(item);
}
foo.prototype=new Array();
foo.prototype.constructor=foo;

var c =new foo();

c.addFruit('Apple');

document.write(c.join('-'));
​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T05:47:11.137

您将方法添加`addFruit`到`prototype`of `foo`，然后覆盖了 the `foo.prototype`，因此缺少该方法（**将方法放入原始原型后，原型更改为另一个对象**）。

您应该更改代码的顺序，将`prototype`before add 方法分配给`prototype`.

```
foo.prototype=new Array();
foo.prototype.constructor=foo;

foo.prototype.addFruit=function(item){
    this.unshift(item);
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T05:55:33.847

在用. `addFruit`_`prototype``new Array`

而不是`new Array`，您应该使用`Object.create(Array.prototype)`因此您没有实际的 Array*实例*作为原型（使用`length`等），而只有一个从 Array 原型继承的对象。

`Array.call(this)`不幸的是不起作用。它返回一个新数组，该数组没有赋值，但它不做任何事情`this`。您可以通过`this !== Array.call(this)`. 实际上，“子类”是不可能的`Array`- 请阅读[http://perfectionkills.com/how-ecmascript-5-still-does-not-allow-to-subclass-an-array](http://perfectionkills.com/how-ecmascript-5-still-does-not-allow-to-subclass-an-array)

# javascript - 选择选项元素上的 onmouseout

> ID：13081380
> 
> 赞同：2
> 
> 时间：2012-10-26T05:42:27.517
> 
> 标签：javascript, html, html-select

我有一个要求，我必须根据 mouseover 和 mouseout 事件显示替代元素。

默认元素是一个超链接（它会一直显示，除了在鼠标悬停时），备用元素是一个下拉列表元素（它应该在超链接的鼠标悬停时显示。

我正在使用 javascript 来切换两个元素的显示（隐藏/取消隐藏）。

问题是鼠标的范围仅限于选择元素而不是它的选项值，即当我尝试使用鼠标从 DDL 中选择选项值时，浏览器认为它是 mouseout 并切换元素。我希望 mouseout 应该即使当我在下拉列表选项元素上运行鼠标时也不会发生。有没有办法解决这个问题？

这是我到目前为止所写的。

JS代码

```
function showDDl()
{
  document.getElementById("LINK").style.display='none';
  document.getElementById("ddlLanguage").style.display='';
}
function hideDDl()
{
  document.getElementById("ddlLanguage").style.display='none';
  document.getElementById("LINK").style.display='';
} 
```

代码

```
<!--CODE FOR Hyperlink.. this is to be displayed at all times except at mouseover -->
<div id="LINK">
<a href='#' onmouseover="showDDl()" >
(Change Language)
</a>
</div>

<!--CODE FOR SELECT ELEMENT dispalyed at mouseover -->

<select style="display: none;" id="ddlLanguage" name="ddlLanguage" onmouseout="hideDDl()">
  <option value="en"><bean:message key="common.lang.english"/></option>
  <option value="fr"><bean:message key="common.lang.francais"/></option>
  <option value="de"><bean:message key="common.lang.deutsch"/></option>
  <option value="it"><bean:message key="common.lang.italiano"/></option>
  <option value="es"><bean:message key="common.lang.espanol"/></option>
  <option value="nl"><bean:message key="common.lang.nederlands"/></option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:37:24.060

这有效：

*   将下拉菜单包装在另一个 div 中。这`div`应该有`mouseout`，而不是选择
*   在 select 上的 mouseout 中添加一个 cancelbubble / stopPropogation，以防止 select 在打开时消失。
*   将 onchanged 处理程序添加到选择以在选择项目时关闭下拉列表。

[jsFiddle在这里](http://jsfiddle.net/WaddN/)

```
<div id="DROPDOWN"  onmouseout="hideDDl()">
    <select style="display: none;" 
            id="ddlLanguage" 
            name="ddlLanguage" 
            onmouseout="cancelBubble();" 
            onchange="hideDDl();">
        <option value="en">
       .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:53:08.030

您可以为`mouseout`事件创建处理程序并检查目标元素（`event.target`或`event.srcElement`IE）。如果它不是列表元素，则调用`hideDDl`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T06:13:06.253

我想你正在寻找这个。尝试一下

```
 <script type="text/javascript">
 function showDDl()
 {
    // alert("p");
   document.getElementById("LINK").style.visibility="hidden";
   document.getElementById("ddlLanguage").style.visibility="visible";

 }
 function hideDDl()
 {
   document.getElementById("ddlLanguage").style.visibility="hidden";
     document.getElementById("LINK").style.visibility="visible";
 }
</script>

HTML CODE

<!--CODE FOR Hyperlink.. this is to be displayed at all times except at mouseover -->

<a href='#' onMouseOver="showDDl()" id="LINK" >
(Change Language)
</a>
<br/>

<!--CODE FOR SELECT ELEMENT dispalyed at mouseover -->

<select style="visibility:hidden" id="ddlLanguage" name="ddlLanguage" onmouseout="hideDDl()">
  <option value="en"><bean:message key="common.lang.english"/></option>
  <option value="fr"><bean:message key="common.lang.francais"/></option>
  <option value="de"><bean:message key="common.lang.deutsch"/></option>
  <option value="it"><bean:message key="common.lang.italiano"/></option>
  <option value="es"><bean:message key="common.lang.espanol"/></option>
  <option value="nl"><bean:message key="common.lang.nederlands"/></option>
</select> 
```

# shell - 从 TCL 脚本在后台运行命令并格式化输出

> ID：13081383
> 
> 赞同：5
> 
> 时间：2012-10-26T05:43:07.813
> 
> 标签：shell, redirect, background, tcl

我有一个连续运行多个 shell 命令的 tcl 脚本。

像这样的东西：

abctcl

```
command 1
command 2 
command 3
...
command n 
```

此脚本将这些命令的输出打印到以下格式的文本文件中：

```
### ### ### ### ### ###
Command name
### ### ### ### ### ###

Command Output

### ### ### ### ### ## 
```

我试图让脚本运行得更快，但让 shell 命令并行而不是串行运行。通过将它们推到后台（命令 a &）。但是我不知道如何像以前一样保留输出文本文件的格式。

当我将命令推送到后台时，我不得不将它们的输出附加到一个临时文件中，但是这些文件只是将命令的输出放在一起转储中。很难区分不同的输出。

有没有办法我可以将在后台运行的每个命令的输出重定向到一个单独的临时文件（也许临时文件的名称可以具有后台运行进程的进程 ID）。一旦所有命令都运行了，我可以将输出集中到正确的格式吗？关于如何实现这一点的任何想法/建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T08:18:27.770

如果命令没有相互依赖的状态，您可以将它们并行化。有很多方法可以做到这一点，但其中一种更简单的是使用线程包的[线程池](http://tcl.cvs.sourceforge.net/viewvc/tcl/thread/doc/html/tpool.html)（这需要线程化的 Tcl，现在许多平台上的规范）：

```
package require Thread

set pool [tpool::create -maxworkers 4]
# The list of *scripts* to evaluate
set tasks {
    {command 1}
    {command 2}
    ...
    {command n}
}

# Post the work items (scripts to run)
foreach task $tasks {
    lappend jobs [tpool::post $pool $task]
}

# Wait for all the jobs to finish
for {set running $jobs} {[llength $running]} {} {
    tpool::wait $pool $running running
}

# Get the results; you might want a different way to print the results...
foreach task $tasks job $jobs {
    set jobResult [tpool::get $pool $job]
    puts "TASK: $task"
    puts "RESULT: $jobResult"
} 
```

主要可调整的是线程池的大小，默认限制为 4。（通过我在上面明确列出的`-maxworkers`选项设置它`tpool::create`。）选择的最佳值取决于你有多少 CPU 内核以及每个任务平均产生多少 CPU 负载；你需要测量和调整......</p>

您还可以使用该`-initcmd`选项使用您选择的脚本预加载池中的每个工作线程。那是您拨打电话的好地方`package require`。工作线程彼此*完全*独立，也完全独立于主线程；他们不共享状态。如果您在单独的进程中运行每段代码，您将获得相同的模型（但您最终会编写更多代码来进行协调）。

* * *

[编辑]：这是一个适用于 Tcl 8.4 的版本，它使用子进程代替。

```
namespace eval background {}
proc background::task {script callback} {
    set f [open |[list [info nameofexecutable]] "r+"]
    fconfigure $f -buffering line
    puts $f [list set script $script]
    puts $f {fconfigure stdout -buffering line}
    puts $f {puts [list [catch $script msg] $msg]; exit}
    fileevent $f readable [list background::handle $f $script $callback]
}
proc background::handle {f script callback} {
    foreach {code msg} [read $f] break
    catch {close $f}
    uplevel "#0" $callback [list $script $code $msg]
}

proc accumulate {script code msg} {
    puts "#### COMMANDS\n$script"
    puts "#### CODE\n$code"
    puts "#### RESULT\n$msg"

    # Some simple code to collect the results
    if {[llength [lappend ::accumulator $msg]] == 3} {
        set ::done yes
    }
}
foreach task {
    {after 1000;subst hi1}
    {after 2000;subst hi2}
    {after 3000;subst hi3}
} {
    background::task $task accumulate
}
puts "WAITING FOR TASKS..."
vwait done 
```

注意：任务是产生结果的 Tcl 命令，但*不能*将结果打印出来；结构代码（in `background::task`）处理它。这些是子流程；它们彼此不共享任何内容，因此您希望它们执行或配置的任何内容都必须作为任务的一部分发送。更复杂的版本可以保留子进程的热池，并且在一般情况下非常像线程池（由于处于子进程而不是线程中而存在细微差异），但这比我想在这里写的代码更多.

结果代码（即异常代码）为 0 表示“ok”，1 表示“error”，在不太常见的情况下为其他值。它们正是[Tcl 8.6`catch`手册页](http://www.tcl.tk/man/tcl8.6/TclCmd/catch.htm)中记录的值；由您来正确解释它们。（我想我还应该添加代码以在发生错误的情况下报告`::errorInfo`和`::errorCode`变量内容，但这会使代码更加复杂......）

# quartz-scheduler - 是否可以杀死当前正在运行的 Quartz Job？

> ID：13081385
> 
> 赞同：14
> 
> 时间：2012-10-26T05:43:13.710
> 
> 标签：quartz-scheduler

我记得我们不能终止当前正在运行的 Quartz Job，但我们可以中断并在必要的地方进行布尔检查，是否需要进一步进行后续操作。

即使我们实现`InterruptableJob`并调用`scheduler.interrupt`中断Job，当前执行的作业仍会在服务器中运行。

前任：

1.  作业通过 Hibernate 触发了一个命名 SQL 查询，这需要很长时间
2.  已调用第三方服务器，第三方服务器响应时间过长

[http://neopatel.blogspot.in/2011/05/quartz-stop-job.html](http://neopatel.blogspot.in/2011/05/quartz-stop-job.html) [http://forums.terracotta.org/forums/posts/list/3191.page](http://forums.terracotta.org/forums/posts/list/3191.page)

有人可以纠正我的理解并解释我如何杀死或停止“当前”执行的 Job 吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-09-02T11:26:04.667

您可以创建名为 JobBase 的新抽象类，例如实现 IJob 接口并插入抽象方法： `public abstract void ExecuteJob(IJobExecutionContext context);`

在 JobBase 上，您可以像这样实现方法 Execute

```
public abstract class JobBase : IJob,IInterruptableJob
{
     private Thread currentThread;
     private ILog logger;
     public JobBase(ILog logger)
     {
        this.logger=logger;
     }
        public void Execute(IJobExecutionContext context)
        {

            var thread = new Thread(()=> 
            {
                try
                {
                    this.ExecuteJob(context);
                }
                catch(Exception ex)
                {
                    this.logger.ErrorFormat("Unhandled exception {0}",ex.ToString());

                }
            });

            thread.Start();
            this.currentThread = thread;
            this.currentThread.Join();  
        }
        public abstract void ExecuteJob(IJobExecutionContext context);

        public void Interrupt()
        {   
            currentThread.Abort();
        }
} 
```

每个 Job 都会实现 JobExecute 方法。

```
 public class TestJob :JobBase
{
    private ILog logger;
    public TeJob(ILog logger):base(logger)
    {
    }

    public override ExecuteJob(IJobExecutionContext context)
    {
    }
} 
```

假设使用一些工厂来创建作业

对于停止作业，您将调用方法`scheduler.Interrupt(new JobKey(jobName));`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T07:31:09.323

正如您所说，没有办法在石英中“残酷地”中断工作，在 JAVA 中也没有。

您可以将作业的逻辑封装在单独的线程中，并使用 ExecutorService 运行它。

看看这个例子：[https ://stackoverflow.com/a/2275596/1517816](https://stackoverflow.com/a/2275596/1517816)

假设您的 QuartzJob 是 Test 类，并将您的业务逻辑移动到 Task 类中。

希望能帮助到你

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-22T10:47:35.450

我不知道为什么没有人提到这一点，或者在提出问题时这可能不可用。

调度程序实例有一个称为shutdown 的方法。

```
 SchedulerFactory factory = new StdSchedulerFactor();
 Scheduler scheduler = factory.getScheduler(); 
```

以上是用来开始工作的

```
 scheduler.start(); 
```

使用标志或其他东西知道何时停止作业运行。然后使用

```
 scheduler.shutdown(); 
```

我如何实现我的要求：

```
 if(flag==true)
{
    scheduler.start();
    scheduler.scheduleJob(jobDetail, simpleTrigger);
}
else if(flag==false)
{
    scheduler.shutdown();
} 
```

其中 jobDetail 和 simpleTrigger 是不言自明的。

希望能帮助到你。:)

# android - 更改活动顺序以先打开

> ID：13081395
> 
> 赞同：3
> 
> 时间：2012-10-26T05:44:14.403
> 
> 标签：android, android-activity

我正在做一个项目，我有 4 个活动。每次我运行项目时，activityA 首先打开，然后是其他活动，但我希望 MainActivity 应该首先打开，然后是其他活动。

我应该在哪里定义要打开的活动的顺序。

清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.android.it"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".ActivityA"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".MainActivity" />

          <activity android:name=".GeneralAct" />
          <activity android:name=".BackUp" />
          <activity android:name=".AccountSettings" />
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T05:48:35.080

你需要

```
 <category android:name="android.intent.category.LAUNCHER" /> 
```

在 MainActivity 的活动标签内。

```
<activity
        android:name=".MAinActivity"
        android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T05:51:17.310

将 MainActivity 定义为，

```
 <activity
            android:name=".MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

和所有其他活动，

```
 <activity
            android:name=".ActivityA"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity> 
```

**启动器**活动首先打开，然后是**默认**活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T05:49:23.537

您要首先打开的 Activity 必须有一个意图过滤器，其类别描述为：

```
 <category android:name="android.intent.category.LAUNCHER"/> 
```

这是 Android Menifest 中完整的 Activity 声明：

```
 <activity
        android:name=".MainActivity"
        android:theme="@style/app_theme" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T05:53:05.550

只需用此代码替换您的清单..

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.android.it"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".ActivityA"
        android:label="@string/app_name" >

    </activity>
    <activity android:name=".MainActivity" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
      <activity android:name=".GeneralAct" />
      <activity android:name=".BackUp" />
      <activity android:name=".AccountSettings" />
</application>

</manifest> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T05:53:37.327

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<uses-sdk android:minSdkVersion="8" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".yourmainactivityname"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <!--   Activity1 -->
    <activity android:name=".Activity1" />

    <!--  Activity2 -->
    <activity android:name=".Activity2 " />

    <!--   Activity3 -->
    <activity android:name=".Activity3 " />
      <!--   Activity4 -->
     <activity android:name=".Activity4" />
</application> 
```

# objective-c - 在 Xcode 中从 GeneratedCode 生成 HeaderCode

> ID：13081398
> 
> 赞同：3
> 
> 时间：2012-10-26T05:44:17.733
> 
> 标签：objective-c, ios, xcode, sup

我们已经阅读了 SUP2.0 的 sybase 在线教程。在那里面

Sybase Unwired Platform 2.0 > iOS 开发人员指南 > 开发任务流 > 在 Xcode IDE 中开发应用程序 > 从 GeneratedCode 生成 HeaderDoc。

**从生成的代码生成 HeaderDoc**

***一旦您为您的移动业务对象生成了 Objective-C 代码，您就可以在 Mac 上从生成的代码生成 HeaderDoc（HTML 参考信息）。HeaderDoc 为您设计的 MBO 提供参考信息。HeaderDoc 将帮助您以编程方式将设备应用程序绑定到生成的代码。

1.  导航到包含从 Eclipse 环境复制过来的生成代码的目录。
2.  跑：

> headerdoc2html –o GeneratedDocDir GeneratedCodeDir gatherheaderdoc GeneratedDocDir

您可以在 Web 浏览器中打开文件 OutputDir/masterTOC.html 以查看相互链接的文档集。***

我们已按照该链接中提到的步骤进行操作。并且在生成的代码文件夹中生成了四个文件，但所有文件的字节大小都为零。您能否通过说明错误发生的位置来提供帮助。

我们将路径设置为

desktop/mac_ios/importing_lib_code 通过终端并给出教程中提到的脚本。

importing_lib_code 有子文件夹 src，其中包含两个子文件夹 common 和文件夹保存 .m 文件。

第二个是包含两个子文件夹的文件夹，其中包含相应文件的 .h 文件。

# java - Android程序自动登录Skype？

> ID：13081400
> 
> 赞同：0
> 
> 时间：2012-10-26T05:44:26.027
> 
> 标签：java, android, service, automation, skype

我将为自己制作一个小型的 android 应用程序，它会在每天早上 8:00 自动登录到 Skype。我的问题是，我使用什么代码进入 Skype 应用程序，输入我的硬编码用户名/密码，然后登录？有没有不同的方法来做到这一点？任何信息将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T05:49:33.303

你的问题太笼统了。但是这里有一个入门参考，如何通过意图启动 Skype 并在[此处](https://stackoverflow.com/questions/6414494/launch-skype-from-the-app-programetically-pass-number-android)传递用户名 之后，我建议您研究如何设置后台服务并创建计时器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:14:06.457

您可以下载Skype应用程序并登录。然后每天早上 8 点，使用 AlarmManager 启动 Skype 应用程序使用的 Intent，以便自动启动 Skype。

报警管理器参考：

[http://developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)

您可以使用它来启动 Skype 的意图：

```
PackageManager packageManager = getPackageManager();
startActivity(packageManager.getLaunchIntentForPackage("com.skype.android")); 
```

这个包的另一个名字可能是`"com.skype.raider"`

# cuda - CUDA：在 Nsight 会话期间将参数传递给主机编译器

> ID：13081401
> 
> 赞同：1
> 
> 时间：2012-10-26T05:44:32.167
> 
> 标签：cuda, arguments, command-line-arguments, gpu, nsight

我有一个在 Visual Studio 2010 下运行的 cuda (v4.2) 程序，我将各种命令行参数传递给该程序。我希望主机编译器在运行 nsight (v2.2) 时看到相同的参数。我假设我必须通过（右键单击项目）-> nsight 用户设置-> 命令行参数来执行此操作，但尚未设法找到不会使 nvcc 崩溃的语法。我假设它以某种方式围绕“--run-args”安排？

** 澄清，在下面的评论后：

当然，当您直接通过 VS 进行调试时，您可以通过属性页/命令参数输入命令参数，并且一切正常。但是通过 NSight，这被忽略了，所以我的问题是，怎么做？我对编译器的讨论假设 nsight 运行 NVCC，然后它在幕后为非 CUDA 代码调用 MSVC。所以我假设 NSight 需要将任何命令行参数向下传递到 VS，大概是通过上述选项。假设所有这些都是合理的，我怀疑我只是在“nsight 用户设置-> 命令行参数”中弄错了语法，并且想知道是否还有其他人在这里取得了成功。更清晰？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T01:03:20.007

目前尚不清楚您是尝试通过 nvcc 将命令行参数传递给 cl.exe，还是在使用命令 Nsight CUDA Debugger (Nsight|Start CUDA Debugging) 通过 Visual Studio 启动应用程序时将命令行参数传递给应用程序。

## 在将 .cu 文件编译为 cl.exe 时将命令行参数传递给 cl.exe

1.  在解决方案资源管理器中右键单击 .cu 文件
2.  执行属性命令
3.  在“filename.cu”属性页中 在左侧窗格中选择“CUDA C/C++”\“Host” b. 在“附加编译器选项”或“预处理器定义”中添加要传递给 cl.exe 的参数

预处理器定义将转到 nvcc.exe 和 cl.exe。附加编译器选项将附加到 -Xcompiler 选项。

## 在使用 Nsight|Start CUDA Debugging 启动应用程序时将命令行参数传递给应用程序

1.  在解决方案资源管理器中右键单击项目（确保这是您的启动项目）
2.  执行 Nsight 用户属性命令
3.  在“NVIDIA NSight 用户设置：”对话框中 在左窗格中选择“启动” b。在右侧指定“命令行参数”字段中的参数。

当您使用 (Nsight|Start CUDA Debugging) 启动应用程序时，这些选项将传递给应用程序。

## 在使用 Debug|Start * Debugging 启动应用程序时将命令行参数传递给应用程序

1.  在解决方案资源管理器中右键单击项目（确保这是您的启动项目）
2.  执行属性命令
3.  在“属性页”对话框中 在左窗格中选择“调试” b。在右窗格中将参数添加到“命令参数”字段

编辑项目属性和 Nsight 用户属性时，请确保在对话框顶部指定配置和平台。

Nsight VSE 构建系统不使用 nvcc --run 和 --run-args 选项。如果您使用 Debug 命令启动，您的进程将由 devenv.exe 启动。如果您使用 Nsight|Start CUDA 调试或 Nsight 分析工具启动您的应用程序将由 Nsight.Monitor.exe 启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T18:27:14.730

我想帮忙，但我很困惑；您谈到在 VS 下将运行时参数传递给您的主机代码。然后你说你希望编译器看到相同的参数。我认为您不是指编译器。首先在 VS 中构建您的项目（使用构建的调试版本）。（并且我已经将我的 .cu 编译成一个 ptx 文件，所以当我进入 Nsight 时不会调用 nvcc。）然后当你调用 Nsight 时，这个构建就会运行。我不必提供运行时参数。在 VS 项目中的 Debug 下有一个地方可以提供命令行参数；也许这在 Nsight 启动时使用，尽管我有疑问。此外，还有您引用的 Nsight 用户 -> 命令行参数输入。我认为后者确实是正确的方法。也许您的问题是您需要在启动 Nsight 之前完全构建项目。

# java - JUnit 测试没有达到预期的效果

> ID：13081402
> 
> 赞同：1
> 
> 时间：2012-10-26T05:44:37.563
> 
> 标签：java, testing, junit

我对 JUnit 测试有疑问。

我正在尝试测试我的代码，但由于某种未知的原因，它一直让我失败。这是我尝试测试的代码：

```
public void userInputWord() throws Exception{ 
    System.out.println("****Please input your word, 2 to 8 ***");
    System.out.println("**********character strings.**********");
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    inputWord = br.readLine();
    setInputWord(inputWord);
    setWordLenght(inputWord.length());          
    System.out.println("***Please input amount of words you***");
    System.out.println("*************want to find*************");
    try{
        stringLadder = br.readLine();
        setLadder(Integer.parseInt(stringLadder));
    }catch(NumberFormatException nfe){
        System.out.println("Your input must be integer value.");
    }
    searchForMatch();
} 
```

基本上这种方法是要求用户输入两个值（起始词和他想看到多少个词作为 WordLadder）我将这些值分配给设置方法。我的这个类的 JUnit 如下：

```
public void testUserInputWord() {
    Generation gener = new Generation();
    StringReader read = new StringReader("broom");
    Scanner scan = new Scanner(read);
    gener.setInputWord(scan.toString());
    assertEquals("broom", gener.getInputWord());
} 
```

我以前从未写过 JUnit，只是做了一些研究，谁能解释我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T05:49:14.597

嗯，第一个问题是您永远不会调用您要测试的代码。您目前正在测试的只是 getter 和 setter（for`ladder`和`inputWord`）。

不幸的是，测试该`userInputWord`方法很棘手，因为它依赖于`System.in`. 您需要有一种“伪造”用户输入的方法。一种选择是使该方法采用 a`Scanner`或 a `Reader`。然后，您可以通过 a 创建所有适当的用户输入`StringReader`，以便该方法读取您预先编程的数据。然后，您将测试结果。如果此类的其他部分也需要用户输入，您可能需要更改它，以便您的*构造函数*采用某些东西（同样，可能是 a `Scanner`，可能是 a `Reader`）来表示用户输入。同样，您将在构建测试实例时提供测试数据。

从根本上说，“提供用户输入的东西”的想法是您尝试测试的代码的*依赖项 - 单元测试的许多技能正在研究如何提供受测试控制的依赖项。*有很多方法适用于不同的情况 - 在这种情况下，您可能只使用现有的实现 ( `StringReader`) 作为底层数据源而不是控制台。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T06:25:10.197

您说 JUnit 测试没有达到您的预期。*也许您应该告诉我们您的期望*究竟是什么，这样我们就可以告诉您为什么没有达到期望。

As Jon said, the code snippets you show us do not really belong together. Your test method seems to test the `setInputWord` / `getInputWord` pair of setter and getter. There is no call to `userInputWord` at all.

Also I can see that your test method is prefixed with `test` and does not have any annotation. This is the terribly outdated JUnit 3 style. Please have a look at the [JUnit Cookbook](http://junit.sourceforge.net/doc/cookbook/cookbook.htm).

# jsf-2 - 外部 jar 中的自定义 Primefaces 渲染器：ClassNotFoundException

> ID：13081409
> 
> 赞同：0
> 
> 时间：2012-10-26T05:45:01.773
> 
> 标签：jsf-2, primefaces

我正在使用 Primefaces 3.4。为了在 TabView 小部件上有一个可滚动的标题，我实现了一个自定义渲染器和一些自定义 js。这对我来说很好，除了渲染器必须在主网络项目中。

我们正在使用一个包含新组件和新复合材料的单独项目。当然，新的渲染器也应该放在那个项目中。但是后来 Webapp 类加载器没有找到渲染器，我得到了一个

```
Caused by: java.lang.ClassNotFoundException: org.comp.component.tabview.WSTabViewRenderer
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:44:08.573

好的，我已经通过阅读另一个问题来解决它。

包含渲染器的项目结构错误。faces-config.xml 文件需要放在 META-INF 目录下。但是我的 META-INF 目录位于错误的子文件夹中。正确的应该是把它放在“src/main/java/META-INF”下（我们使用的是 maven3）。

# html - 从用户输入动态生成 html 文件

> ID：13081410
> 
> 赞同：0
> 
> 时间：2012-10-26T05:45:02.430
> 
> 标签：html, objective-c, cocoa-touch

我对我的项目有要求。我想从用户动态生成 html 文件

输入。我已经搜索了很多，但我找不到任何链接。对此有任何帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:53:05.883

```
NSBundle *bundle = [NSBundle bundleForClass:[self Class]];
NSString *htmlPath = [bundle pathForResource:@"html file name" ofType:@"htm"];
NSString *htmlContent = [NSString stringWithContentOfFile:htmlPath encoding:NSUTF8StringEncoding error:nil];

//Do your HTML edits here

[[self webView] loadHTMLString:htmlContent baseURL:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:51:23.833

我做过类似的事情。我认为你需要做的是。使用带有 id 的容器 div 创建一个模板 html 页面并加载该文件。在 webview onPagefinishedloading 的委托方法上，运行 java 脚本将 div 上的信息动态添加到模板 html 页面。

# java - Joda-Time，夏令时计算，时区独立测试

> ID：13081411
> 
> 赞同：2
> 
> 时间：2012-10-26T05:45:13.887
> 
> 标签：java, jodatime, dst, period

我们在应用程序中使用固定的时间段。当用户添加一个新的时段时，默认应该是从早上 6:00 到第二天早上 6:00。

通常是 24 小时，但有一个问题：当执行夏令时更改时，该时间段的长度会发生变化。例如 ：

10 月 27 日上午 6 点至 10 月 28 日上午 6 点。在此期间执行从 CEST 到 CET 时区的转换。因此，此期间包含 25 小时：

```
From 27 October 6:00 AM to 28 October 3:00 AM - there are 21 hours
at 3:00 am the time is shifted back by 1 hour, so there are 4 hours until 28 October 6:00 AM. 
```

我们遇到了这个问题，试图写一个单元测试来防止它再次出现。测试在我们的机器上成功通过，但在 CI 服务器上失败（它在另一个时区）。

问题是：我们如何能够独立于机器的时区设计我们的单元测试？

目前，小时跨度的计算是使用[Joda-Time](http://www.joda.org/joda-time/)计算的：

```
 if ((aStartDate == null) || (aEndDate == null)) {
        return 0;
    }
    final DateTime startDate = new DateTime(aStartDate);
    final DateTime endDate = new DateTime(aEndDate);
    return Hours.hoursBetween(startDate, endDate).getHours(); 
```

在我们这边通过但在 CI 服务器上失败的单元测试：

```
 Calendar calendar = Calendar.getInstance();
    calendar.set(2012, Calendar.OCTOBER, 27, 6, 0);
    startDate= calendar.getTime();
    calendar.set(2012, Calendar.OCTOBER, 28, 6, 0);
    endDate= calendar.getTime(); 
```

我们尝试对日历使用时区：

```
 TimeZone.setDefault(TimeZone.getTimeZone(TimeZone.getTimeZone("GMT").getID()));
    Calendar calendar = Calendar.getInstance(TimeZone.getTimeZone(TimeZone.getTimeZone("GMT").getID()));
    calendar.set(2012, Calendar.OCTOBER, 27, 6, 0, 0);
    startDate= calendar.getTime();
    calendar.set(2012, Calendar.OCTOBER, 28, 6, 0, 0);
    endDate= calendar.getTime(); 
```

但在这种情况下，结果 startDate 是 CEST 10 月 27 日 9:00，endDate 是 CET 10 月 28 日 8:00，所以即使在我们这边测试也失败了。

先感谢您。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-24T06:50:22.620

# 指定时区

> 我们如何能够独立于机器的时区设计我们的单元测试？

始终**指定时区**。

几乎总是，您的代码应该指定一个时区。仅当您确实需要用户/服务器的默认时区时才省略时区；即使这样，您也应该显式访问默认时区以使您的代码自记录。

如果省略时区，将使用 JVM 的默认时区。

Joda-Time 有很多地方可以传递[`DateTimeZone`](http://www.joda.org/joda-time/apidocs/org/joda/time/DateTimeZone.html)对象或调用`withZone`方法。

# 避免使用 3-4 个字母的时区代码

避免使用时区代码，例如`CEST`和`CET`。它们既不是标准化的，也不是唯一的。当混淆/忽略夏令时 (DST) 时，它们经常被错误地使用。

相反，请使用[正确的时区名称](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)。大多数名称是大陆和时区主要城市的组合，用纯 ASCII 字符（不带变音符号）编写。例如，[`Europe/Chisinau`](https://en.wikipedia.org/wiki/Europe/Chisinau)。

在[Joda-Time](http://www.joda.org/joda-time/)中，那将是……</p>

```
DateTimeZone timeZone = DateTimeZone.forID( "Europe/Chisinau" ); 
```

# 思考/使用 UTC

您真正的问题是考虑本地日期时间值，或者尝试使用本地时间执行业务逻辑。这样做非常困难，因为一般夏令时及其频繁变化以及其他异常情况。

相反，考虑宇宙的时间线而不是挂钟时间。尽可能将日期时间值存储和处理为[UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time) (GMT) 值。转换为本地分区时间以呈现给用户（就像您将本地化字符串一样）以及业务目的需要的地方，例如确定特定时区定义的“一天”的开始。

# 24 小时与 1 天

所以，如果你真的想要 24 小时后，那就加上 24 小时，让挂钟时间下降到可能的地方。如果您想要“第二天”，这意味着用户希望在时钟上看到相同的时间，然后添加 1 天（结果可能是 25 小时后）。Joda-Time 支持这两种逻辑。

请注意下面的示例代码，Joda-Time 支持以 24 小时为单位计算一天，或者由于夏令时或其他异常情况而调整时间以匹配相同[的挂钟时间。](https://en.wikipedia.org/wiki/Wall-clock_time)

# 示例代码

这是一些使用 Joda-Time 2.3 的示例代码。Java 8 中的新 java.time 包应该具有类似的功能，因为它是受 Joda-Time 启发的。

```
DateTimeZone timeZone = DateTimeZone.forID( "Europe/Chisinau" );
DateTime start = new DateTime( 2012, 10, 27, 6, 0, 0, timeZone );
DateTime stop = start.plusHours( 24 ); // Time will be an hour off because of Daylight Saving Time (DST) anomaly.

DateTime nextDay = start.plusDays( 1 ); // A different behavior (25 hours).

Interval interval = new Interval( start, stop );
Period period = new Period( start, stop );
int hoursBetween = Hours.hoursBetween( start, stop ).getHours();

DateTime startUtc = start.withZone( DateTimeZone.UTC );
DateTime stopUtc = stop.withZone( DateTimeZone.UTC ); 
```

转储到控制台...</p>

```
System.out.println( "start: " + start );
System.out.println( "stop: " + stop );
System.out.println( "nextDay: " + nextDay );
System.out.println( "interval: " + interval );
System.out.println( "period: " + period );
System.out.println( "hoursBetween: " + hoursBetween );
System.out.println( "startUtc: " + startUtc );
System.out.println( "stopUtc: " + stopUtc ); 
```

运行时……</p>

```
start: 2012-10-27T06:00:00.000+03:00
stop: 2012-10-28T05:00:00.000+02:00
nextDay: 2012-10-28T06:00:00.000+02:00
interval: 2012-10-27T06:00:00.000+03:00/2012-10-28T05:00:00.000+02:00
period: PT24H
hoursBetween: 24
startUtc: 2012-10-27T03:00:00.000Z
stopUtc: 2012-10-28T03:00:00.000Z 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-26T20:52:16.997

据我了解您的问题，您希望在服务器上设置一个时区，以测试白天时间切换期间的正确时间，而不是使用标准服务器时区。为此，时区需要能够使用夏令时偏移。

您在示例中的服务器上使用的时区

```
TimeZone zone = TimeZone.getTimeZone("GMT"); 
```

不使用夏令时：`zone.useDaylightTime()`返回`false`.

尝试使用特定的时区，例如

```
TimeZone zone = TimeZone.getTimeZone("Europe/Chisinau"); 
```

有夏令时偏移。

您还可以在 Joda Time 的 DateTime 类中使用时区，并避免使用 Java 的 Calendar 和 Date 类。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-26T05:59:55.223

为什么不使用普通的 java.util.Calendar？

```
 final Calendar startTime = new GregorianCalendar( 2012, Calendar.OCTOBER, 27, 2, 12, 0 );
    startTime.setTimeZone( TimeZone.getTimeZone( strTimeZone ) );
    System.out.println( startTime.getTimeInMillis() ); 
```

# c# - XML - 如何在单个节点而不是整个文档中获取子节点？

> ID：13081415
> 
> 赞同：4
> 
> 时间：2012-10-26T05:45:32.857
> 
> 标签：c#, xml, xmldocument, xmlnode

一直在寻找答案，但找不到任何东西 - 我很新，所以也许我没有找到正确的关键词？

这是我正在使用的 XML 示例

```
<database>
<book>
<title>A</title>
<author>
  <name>1</name>
</author>
</book>
<book>
<title>B</title>
<author>
  <name>2</name>
</author>
<author>
  <name>3</name>
</author>
<author>
  <name>4</name>
</author>
<author>
  <name>5</name>
</author>
</book>
</database> 
```

我正在尝试使用 C# XMLDocument 来获取 A 书作者 1，然后获取 B 书作者 1、2、3、4、5

到目前为止，我正在使用的代码是遍历所有作者，所以我得到书 A author 1、2、3、4、5

我到目前为止的代码大致如下

```
XmlDocument doc = new XmlDocument();
doc.Load("myxmlfile");
XmlNode root = doc.SelectSingleNode("database");
XmlNodeList nodelist = root.SelectNodes("book");

foreach (XmlNode n in nodelist)
        {

XmlNodeList authors = root.SelectNodes(".//author");
book.authorstring = "";
foreach (XmlNode author in authors)
       {
       book.authorstring = book.authorstring+author.SelectSingleNode("name").InnerText + ", ";
       }
} 
```

我读到了一些地方，如果我在“ // ”之前使用“ . ”，它将“锚定”到当前节点，但它似乎没有工作并且正在循环遍历所有节点

我做错了什么或错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T05:50:29.467

如果我理解正确，您的错误就在这一行：

```
XmlNodeList authors = root.SelectNodes(".//author"); 
```

它应该是

```
XmlNodeList authors = n.SelectNodes(".//author"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-01-13T15:10:46.047

对于未来的读者，我偶然发现了这篇文章，但我忘记在`.`我的 xPath 中添加一个。

即（这是powershell，但没关系），

这是错误的并返回从根节点找到的第一个节点：

```
$descriptionNode = $someNode.SelectSingleNode("//Description") 
```

这是正确的，并将第一个节点作为节点的子节点返回：

```
$descriptionNode = $someNode.SelectSingleNode(".//Description") 
```

这当然是因为`//`会在任何地方查询，并且`./`会相对查询。很清楚的解释，但很容易错过，需要一些时间才能找到。

方便的备忘单： [https ://devhints.io/xpath](https://devhints.io/xpath)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T06:29:04.580

使用 linq2XML.. 使用起来很简单

```
XElement doc=XElement.Load("yourXML.xml");

var lstBooks=doc.Descendants("book").Select(x=>
new
{
    name=x.Element("title").Value,
    authors=x.Elements("author").Select(y=>y.Element("name").Value)
}
); 
```

`lstBooks`现在包含所有需要的数据

您现在可以执行此操作

```
foreach(var book in lstBooks)
{
book.name;//Name of the book
    foreach(var author in book)
    {
        author;//name of the author
    }
} 
```

# xml - 使用 XSL 比较两个文件并生成一个输出文件

> ID：13081418
> 
> 赞同：2
> 
> 时间：2012-10-26T05:45:45.693
> 
> 标签：xml, xslt, merge, compare, transform

使用 XSL 我想比较两个文件并生成一个输出文件。

**文件 1：**

```
<SalesExtractProcess>
  <PackageFormatVersion>3</PackageFormatVersion>
  <VersionComments></VersionComments>
  <CreatorName>Demouser</CreatorName>
  <CreatorComputerName>DemoComputer</CreatorComputerName>
  <CreationDate>10/1/2012 9:00:09 AM</CreationDate>
  <PackageType>5</PackageType>
  <Configurations>
    <SalesConfigurations>
      <ConfigurationType>1</ConfigurationType>
      <ConfigurationString>SalesExtractPackageConfig.dtsConfig</ConfigurationString>
      <ConfigurationVariable></ConfigurationVariable>
    </SalesConfigurations>
  </Configurations>
<SalesExtractProcess> 
```

**文件 2：**

```
<Package>
    <PackageFormatVersion checked="false">3</PackageFormatVersion>
    <VersionComments checked="false"></VersionComments>
    <CreatorName checked="true">Testuser</CreatorName>
    <CreatorComputerName checked="true">TestComputer</CreatorComputerName>
    <CreationDate checked="true">10/1/2012 9:00:09 AM</CreationDate>
    <PackageType checked="false">5</PackageType>
    <Configurations>
        <Config>
            <ConfigurationType checked="false">1</ConfigurationType>
            <ConfigurationString checked="true">Package.dtsConfig</ConfigurationString>
            <ConfigurationVariable checked="false"></ConfigurationVariable>
        </Config>
    </Configurations>
<Connections>
    <LocalHost.AdventureWorks>
        <ObjectName  checked="true">LocalHost.AdventureWorks</ObjectName>
    </LocalHost.AdventureWorks>
</Connections>
</Package> 
```

我想将文件 1 与文件 2 进行比较，并从文件 1 输出所有匹配节点（无论路径如何），属性为**check="true"**到结果文件。我的结果文件应该看起来像

**结果文件：**

```
<SalesExtractProcess>
    <CreatorName>Demouser</CreatorName>
    <CreatorComputerName>DemoComputer</CreatorComputerName>
    <CreationDate>10/1/2012 9:00:09 AM</CreationDate>
    <Configurations>
      <SalesConfigurations>
         <ConfigurationString>SalesExtractPackageConfig.dtsConfig</ConfigurationString>
      </SalesConfigurations>
    </Configurations>
<SalesExtractProcess> 
```

我不知道如何为此任务创建 xsl。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:32:04.487

下面的模板应该可以做到这一点，通过使用`document()`模板来过滤`checked='false'`在“主”模板（file2）中定义的元素，并使用部分标识模板来复制其他属性。为了复制包装器元素（例如 Configurations / SalesConfigurations），它只排除具有`checked='false'`)

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                version="1.0" 
                exclude-result-prefixes="xmlns">

    <xsl:output method="xml" indent="yes" omit-xml-declaration="yes" />

    <xsl:template match="/">
        <xsl:apply-templates select="document('file1.xml')/node()" />
    </xsl:template>

    <!--Partial identity - just copy attributes-->
    <xsl:template match="@*">
        <xsl:copy>
            <xsl:apply-templates select="@*"/>
        </xsl:copy>
    </xsl:template>

    <!--Element filter - just elements which don't have @checked='false'-->
    <xsl:template match="*" xml:space="default">
        <xsl:variable name="eleToCheck" select="local-name()"/>
        <xsl:if test="not(document('file2.xml')//*[local-name() = $eleToCheck and @checked='false'])">
            <xsl:copy>
                <xsl:apply-templates select="@*|node()" />
            </xsl:copy>
        </xsl:if>
    </xsl:template>

</xsl:stylesheet> 
```

**输出：**

```
<SalesExtractProcess>

    <CreatorName>Demouser</CreatorName>
    <CreatorComputerName>DemoComputer</CreatorComputerName>
    <CreationDate>10/1/2012 9:00:09 AM</CreationDate>

    <Configurations>
        <SalesConfigurations>

            <ConfigurationString>SalesExtractPackageConfig.dtsConfig</ConfigurationString>

        </SalesConfigurations>
    </Configurations>
</SalesExtractProcess> 
```

# python - python, Django 使用 urrlib2 与 sendinf pdf 相关

> ID：13081421
> 
> 赞同：1
> 
> 时间：2012-10-26T05:46:17.300
> 
> 标签：python, django, google-app-engine

我正在研究 Django、python 和应用程序引擎，谁能告诉我使用 urllib2 将 pdf 文件发送到 url，（文件是 InMemoryUploadedFile）。我知道 SOF 中存在一个问题，即使用 urllib2 发送数据，数据为 JSON 格式。但在这里我想发送一个 InMemoryUploadedFile，它是从 html 页面上传的 pdf 文件。提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:54:44.593

您可能想查看[Python：HTTP Post a large file with streaming](https://stackoverflow.com/questions/2502596/python-http-post-a-large-file-with-streaming)。

您将需要使用[mmap](http://docs.python.org/library/mmap.html)在内存中流式传输文件，然后将其`request`设置为 并将标头设置为适当的 mime 类型，即`application/pdf`在打开 url 之前。

```
import urllib2
import mmap

# Open the file as a memory mapped string. Looks like a string, but 
# actually accesses the file behind the scenes. 
f = open('somelargefile.pdf','rb')
mmapped_file_as_string = mmap.mmap(f.fileno(), 0, access=mmap.ACCESS_READ)

# Do the request
request = urllib2.Request(url, mmapped_file_as_string)
request.add_header("Content-Type", "application/pdf")
response = urllib2.urlopen(request)

#close everything
mmapped_file_as_string.close()
f.close() 
```

由于 Google 应用引擎没有 mmap，您可能需要`request.FILES`暂时将文件写入磁盘

```
#f is the file from request.FILES
def handle_uploaded_file(f):
    with open('some/file/name.txt', 'wb+') as destination:
        for chunk in f.chunks():
            destination.write(chunk) 
```

然后使用标准文件操作直接从那里读取文件。

另一种选择是使用[StringIO](http://docs.python.org/library/stringio.html)将文件作为字符串写入内存，然后将其传递给`urlib2.request`. 与使用流相比，这在多用户环境中可能效率低下。

# load-balancing - 基于内容的负载均衡

> ID：13081422
> 
> 赞同：0
> 
> 时间：2012-10-26T05:46:44.960
> 
> 标签：load-balancing

我想将相同内容的所有请求发送到同一个后端服务器。我怎么能做到这一点。有没有像 HaProxy 这样的开源版本可以做到这一点。

例如。客户端 1 已请求内容 A，并且我的负载均衡器将该请求定向到后端服务器之一，例如循环方式的 X。现在，如果我收到来自不同客户端 2 对相同内容 A 的请求，该请求应该被定向到同一个后端服务器 X。是否有任何开源解决方案可以做到这一点。

任何帮助/指针将不胜感激。

谢谢，尼基尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T04:35:10.573

`Ha proxy`可以做你想做的，还有更多。它有许多`acl options`可满足大多数要求。`Varnish`是另一个具有健壮 acl 语言的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:10:32.767

有趣的问题！我担心它可能取决于技术。只要您在 HTTP 域中，也许您可​​以以某种方式配置您的负载均衡器。

我是一个 Java 人，所以，在 Java 中你可以拥有，比如 EJB。这些是安装在服务器上的分布式组件，可以远程运行。他们的通信协议是二进制的，我怀疑负载均衡器可以读取它。

因此，例如，在 JBoss 中，您可以创建一个服务器集群，并在不同的服务器上部署不同的 EJB。例如，假设系统中有两个 EJB。一个可以买牛奶，一个可以买披萨。

因此，您将牛奶 ejb 部署在服务器 1 上，将披萨 ejb 部署在服务器 2 上。

现在您有了一个命名解析服务（在 java/jboss 中称为 HA-JNDI）。它的基本思想是提供一个基于名称的远程存根：

```
PizzaEJB pizzaEjb = NamingService.getMyStub(PizzaEJB.class); 
```

它当然不是真正的工作代码，但它展示了一个想法。

诀窍是这个命名服务器知道每个 EJB 的部署位置，所以如果你只有在服务器 2 上拥有比萨 ejb，它总是会返回一个存根，该存根将转到服务器 2 并购买比萨饼 :)

因此，Java 程序员并不真正关心它是如何在后台实现的。只是给出一个想法 - 命名服务在每台服务器上部署了某种形式的代理，它们相互交谈......

这就是java可以在这里工作的方式。

现在我想，也许你可以将你的 api 建立在 Restful web 服务上，在这种情况下它很容易解析 http 请求，所以实现可以相对容易（同样，如果你的负载均衡器支持这种处理）。

希望这会有所帮助

# java - 无效的线程 ID 参数：0 java，怎么会发生这种情况？

> ID：13081425
> 
> 赞同：1
> 
> 时间：2012-10-26T05:46:53.080
> 
> 标签：java, multithreading, solr, solrcloud

我使用 solr 4.0 遇到了一个奇怪的错误。我用一个分片三个节点运行一个 solr 云。`ThreadDumpHandler`告诉有一个 id 为 0 的无效线程。

```
ThreadMXBean tmbean = ManagementFactory.getThreadMXBean();
long[] tids = tmbean.getAllThreadIds();
log.info("all threads tids:" + (tids == null? "null" :tids.length));
if (tids != null) {
  for (long l :tids) {
    log.info(String.valueOf(l));
  }
  log.info("all thread infos:");
  NamedList<SimpleOrderedMap<Object>> lst = new NamedList<SimpleOrderedMap<Object>>();
  for (long l :tids) {
    if (l > 0) {
      ThreadInfo ti = tmbean.getThreadInfo(l, Integer.MAX_VALUE);
      if (ti != null) {
        log.info(ti.toString());
        lst.add( "thread", getThreadInfo( ti, tmbean ) );
      }
    } else {
      log.info("invalid thread id:" + l);
    }

  }
  system.add( "threadDump", lst );
} 
```

# mysql - 当从批处理文件中调用它时，执行具有 OUTFILE 到 csv 的 MySQL 查询不起作用

> ID：13081426
> 
> 赞同：0
> 
> 时间：2012-10-26T05:46:53.163
> 
> 标签：mysql, batch-file

**当我执行以下查询时，它可以工作：**

SELECT 'INNODB_OS_LOG_WRITTEN','QUESTIONS' INTO OUTFILE 'D:/orders.csv' FIELDS TERMINATED BY ',' ENCLOSED BY '"' LINES TERMINATED BY '\n';

**但是，当我从 Windows 命令提示符或使用以下命令的批处理文件中调用此查询时，**

"%MBIN%\mysql.exe" -u"%MUSER%" -p"%MPASS%" -h "%MHOST%" -e "SELECT 'INNODB_OS_LOG_WRITTEN','QUESTIONS' INTO OUTFILE 'D:/orders.csv ' 由 ' 终止的字段，' 由 '"' 以 '\n' 终止的行；"

**它没有运行。**

粘贴下面我运行上述命令时发生的情况。

```
C:\Documents and Settings\188931>"%MBIN%\mysql.exe" -u"%MUSER%" -p"%MPASS%" -h "
%MHOST%" -e "SELECT 'INNODB_OS_LOG_WRITTEN','QUESTIONS' INTO OUTFILE 'foldrname/
orders.csv' FIELDS TERMINATED BY ',' ENCLOSED BY '"' LINES TERMINATED BY '\n';"
C:\Program Files\MySQL\MySQL Server 5.5\bin\mysql.exe  Ver 14.14 Distrib 5.5.16,
 for Win32 (x86)
Copyright (c) 2000, 2011, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Usage: C:\Program Files\MySQL\MySQL Server 5.5\bin\mysql.exe [OPTIONS] [database
]
  -?, --help          Display this help and exit.
  -I, --help          Synonym for -?
  --auto-rehash       Enable automatic rehashing. One doesn't need to use
                      'rehash' to get table and field completion, but startup
                      and reconnecting may take a longer time. Disable with
                      --disable-auto-rehash.
                      (Defaults to on; use --skip-auto-rehash to disable.)
  -A, --no-auto-rehash
                      No automatic rehashing. One has to use 'rehash' to get
                      table and field completion. This gives a quicker start of
                      mysql and disables rehashing on reconnect.
  --auto-vertical-output
                      Automatically switch to vertical output mode if the
                      result is wider than the terminal width.
  -B, --batch         Don't use history file. Disable interactive behavior.
                      (Enables --silent.) 
```

**我注意到的另一件事是，当我运行以下命令时：**

"%MBIN%\mysql.exe" -u"%MUSER%" -p"%MPASS%" -h "%MHOST%" -e "SELECT 'INNODB_OS_LOG_WRITTEN','QUESTIONS';"

**从命令提示符或批处理文件中，它正在执行（注意 - 我删除了 csv 导出）。**

因此，从批处理文件（或 Windows 命令提示符）执行查询的组合似乎无法正常工作。

任何机构都可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:35:01.240

你应该转义**"**符号 -

```
ENCLOSED BY '"' 
```

更改为：

```
ENCLOSED BY '\"' 
```

# java - 使用java查找版本并启动PostgreSQL

> ID：13081433
> 
> 赞同：0
> 
> 时间：2012-10-26T05:47:12.073
> 
> 标签：java, postgresql

是否可以使用 java 查找 PostgreSQL 版本并使用 java 代码启动 PostgreSQL 服务器？

要查找版本，我们有 PG_VERSION 文件，该文件在 PostgreSQL 数据目录下有版本，但我们不能依赖它，因为该文件可以编辑。请帮帮我。任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T06:02:34.280

您还可以使用 [DatabaseMetaData](http://docs.oracle.com/javase/6/docs/api/java/sql/DatabaseMetaData.html)查找服务器的版本。它具有用于获取有关服务器信息的辅助方法。`getDatabaseProductVersion()`, `getDatabaseMajorVersion()`,`getDatabaseMinorVersion()` 会给你数据库服务器版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T05:52:21.710

快速谷歌搜索显示查询：

```
select version(); 
```

通过 JDBC 运行它，无论如何你都有 java。至于运行 postgres 服务器本身，我认为旧方法`Runtime.exec/ProcessBuilder`可以完成这项工作。您可能想在它上面创建某种脚本，但我猜它应该工作的方式，没有其他方法。

如果您在linux机器上运行，也许您应该将服务器安装为服务并分别运行它，但从Java的角度来看（如果您真的想从java运行它）它仍然是对外部进程的调用。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T05:52:36.980

如果`PG_VERSION`被编辑，服务器将不会启动。不要那样做。一般来说，PostgreSQL 数据目录是禁止直接编辑的。

在运行时，您可以使用`SELECT version()`来获取正在运行的服务器的版本。

可以使用 启动和停止服务器`pg_ctl`。您可以检查服务器二进制文件的版本，无论服务器是否正在运行`postgres --version`或`pg_ctl --version`.

二进制文件和数据目录的位置是您可以根据安装服务器的方式来控制的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T06:34:54.593

运行查询： select version()
将为您提供 posgresql 的确切版本

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-30T14:46:19.673

您也可以使用`DatabaseMetaData`界面。它更加通用，不仅适用于 postgreSQL，而且为您提供的不仅仅是数据库版本。这是有关如何使用它的示例：

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.DatabaseMetaData;
import java.sql.SQLException;

/**
 * @author Binyamin Regev on on 30/11/2016.
 * @version 1.0
 * @since 1.8
 */

public class DatabaseMetaDataHelper {

    static Connection connection = null;
    static DatabaseMetaData metadata = null;

    public DatabaseMetaDataHelper() throws SQLException{

        boolean success = initJDBCDriver();
        if (!success) { throw new SQLException("INIT JDBC DRIVER FAILED!"); }

        success = connectToDatabase();
        if (!success) { throw new SQLException("Connect to database FAILED"); }

        connection = databaseConnection.getConnection();

        try {
            metadata = databaseConnection.getConnection().getMetaData();
        } catch (SQLException e) {
            System.err.println("There was an error getting the metadata: " + e.getMessage());
            e.printStackTrace();
        }
    }

    public boolean initJDBCDriver() {
        try {
            Class.forName("org.postgresql.Driver");
        } catch (ClassNotFoundException e) {
            System.out.println("Where is your PostgreSQL JDBC Driver? Include in your library path!");
            e.printStackTrace();
            return false;
        }

        System.out.println("PostgreSQL JDBC Driver Registered!");
        return true;
    }

    public boolean connectToDatabase() {
        try {
            connection = DriverManager.getConnection(
                    "jdbc:postgresql://127.0.0.1:5432/postgres",
                    "postgres",
                    "admin");

        } catch (SQLException e) {
            System.out.println("Connection Failed! Check output console");
            e.printStackTrace();
            return false;
        }

        if (connection == null) {
            System.out.println("Failed to make connection!");
            return false;
        }

        System.out.println("You made it, take control your database now!");
        return true;
    }

    public static Connection getConnection() {
        return connection;
    }

    public static String getDatabaseProductName() {
        try {
            return metadata.getDatabaseProductName();
        } catch (SQLException e) {
            e.printStackTrace();
        }
        return null;
    }

    public static String getDriverName() {
        try {
            return metadata.getDriverName();
        } catch (SQLException e) {
            e.printStackTrace();
        }
        return null;
    }

    public static String getUserName() {
        try {
            return metadata.getUserName();
        } catch (SQLException e) {
            e.printStackTrace();
        }
        return null;
    }

    public static String getDatabaseProductVersion() {
        try {
            return metadata.getUserName();
        } catch (SQLException e) {
            e.printStackTrace();
        }
        return null;
    }

    public static String getDriverVersion() {
        try {
            return metadata.getDriverVersion();
        } catch (SQLException e) {
            e.printStackTrace();
        }
        return null;
    }

    public static String getURL() {
        try {
            return metadata.getURL();
        } catch (SQLException e) {
            e.printStackTrace();
        }
        return null;
    }

    public static int getDriverMinorVersion() {
        return metadata.getDriverMinorVersion();
    }

    public static int getDriverMajorVersion() {
        return metadata.getDriverMajorVersion();
    }

    public static int getDatabaseMinorVersion() {
        try {
            return metadata.getDatabaseMinorVersion();
        } catch (SQLException e) {
            e.printStackTrace();
        }
        return -1;
    }

    public static int getDatabaseMajorVersion() {
        try {
            return metadata.getDatabaseMajorVersion();
        } catch (SQLException e) {
            e.printStackTrace();
        }
        return -1;
    }

    public static int getJDBCMajorVersion() {
        try {
            return metadata.getJDBCMajorVersion();
        } catch (SQLException e) {
            e.printStackTrace();
        }
        return -1;
    }

    public static int getJDBCMinorVersion() {
        try {
            return metadata.getJDBCMinorVersion();
        } catch (SQLException e) {
            e.printStackTrace();
        }
        return -1;
    }

    public static void main(String[] args) {
        try {
            DatabaseMetaDataHelper helper = new DatabaseMetaDataHelper();
            int result = helper.connectToDatabase();

            System.out.println("Database product name = " + getDatabaseProductName());
            System.out.println("Database product version = " + getDatabaseProductVersion());
            System.out.println("Database User name = " + getUserName());
            System.out.println("Driver name = " + getDriverName());
            System.out.println("Driver version = " + getDriverVersion());
            System.out.println("URL = " + getURL());
            System.out.println("Driver major version = " + getDriverMajorVersion());
            System.out.println("Driver minor version = " + getDriverMinorVersion());
            System.out.println("Databse major version = " + getDatabaseMajorVersion());
            System.out.println("Databse minor version = " + getDatabaseMinorVersion());
            System.out.println("JDBC major version = " + getJDBCMajorVersion());
            System.out.println("JDBC minor version = " + getJDBCMinorVersion());

            /*
             * Print all the tables of the database scheme,
             * with their names and structure
             */
            getColumnsMetadata(getTablesMetadata());
        } catch (SQLException e) {
            System.out.println(e.getMessage());
            System.err.println("There was an error retrieving the metadata properties: "+ e.getMessage());
        }
    }
} 
```

# mysql - 多个连接确实减慢了 MySQL 查询的速度

> ID：13081434
> 
> 赞同：0
> 
> 时间：2012-10-26T05:47:28.407
> 
> 标签：mysql, performance, join

这是我第一次做这么大的查询和这么多的连接。当我执行此查询时，速度非常慢。我不知道如何使用外键，如果它甚至有帮助......但如果有人知道我可以加快速度的方法，那将非常有帮助。这是我的查询：

```
SELECT FLOOR(AVG(ra.double)) AS price, hi.hname,  hi.hotel_id as hid, hi.hstars, hi.haddress, im.image_file, hd.short_desc, pr.promo_name, pr.discount, pr.discount_type, pr.book_start, pr.book_end 
    FROM hotel_info AS hi 
    JOIN images AS im ON im.foreign_id = hi.hotel_id 
    LEFT JOIN hotel_desc AS hd ON hd.hotel_id = hi.hotel_id 
    RIGHT JOIN rates AS ra ON ra.hotel_id = hi.hotel_id 
    RIGHT JOIN promotions AS pr ON pr.hotel_id = ra.hotel_id 
    WHERE ra.booking_date  BETWEEN '2012-01-01' AND '2012-01-06' 
    AND ra.double != '0.00' 
    AND hi.status = '1' 
    AND hi.destination_id = '$destination' 
    GROUP BY hi.hotel_id 
```

# php - 检查日期数组中的日期并安排它

> ID：13081435
> 
> 赞同：-1
> 
> 时间：2012-10-26T05:47:41.940
> 
> 标签：php

我有这样的日期数组

```
$dates = array('2012-10-02','2012-10-03','2012-10-07', '2012-10-20'); 
```

现在如果我有一个 current_date 说

```
$current_date = '2010-10-11'; 
```

我将如何找到与此最近的过去日期。在这种情况下是 2012-10-07

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T05:57:53.080

```
$dates = array('2012-10-02','2012-10-03','2012-10-07', '2012,10,20');
$current_date = '2010-10-11';

if(!array_search($current_date, $dates))
    array_push($dates, $current_date);

usort($dates, function($a1, $a2) {
   return strtotime($a1) - strtotime($a2);
});

$my_current_date_index = array_search($current_date, $dates);

$my_previous_date = $my_current_date_index == 0 ? 'There is no previous date' : $dates[$my_current_date_index - 1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T06:02:10.630

像这样试试

```
$dates = array('2012-10-02','2012-10-03','2012-10-07', '2012-10-20');

echo "<pre>";
print_r($dates);
$dateArray=array();

foreach($dates as $row)
$dateArray[] = date('Y-m-d', strtotime($row));

$current_date = date('Y-m-d', strtotime('2012-10-11'));
array_push($dateArray,$current_date);

sort($dateArray);

echo "<br />";
print_r($dateArray);
echo "</pre>";

echo "<br />";

$cd_index= array_search($current_date, $dateArray);

if($cd_index>0)
{
    $pastdate=$dateArray[$cd_index-1];
    echo "Pastarray-".$pastdate;
}
else
echo "No Past Date"; 
```

未来日期：

```
if($cd_index<(count($dateArray)-1))
{
    $pastdate=$dateArray[$cd_index+1];
    echo "Pastarray-".$pastdate;
}
else
echo "No Future Date"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T06:15:25.100

这个也可以用。。

```
<?php
$dates = array('2012-10-07','2012-10-02','2012-10-03', '2012,10,20');
$current_date = date('2010-10-11');
$closest='';
foreach($dates as $d)
{
if( date('y-m-d',strtotime($d))<$current_date && $d>$closest)
{
$closest=$d;

}

}
echo $closest; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T07:39:46.237

我的解决方案：

```
// your test data
$dates = array('2012-10-02','2012-10-03','2012-10-07', '2012-10-20');
$current_date = '2012-10-11';

// array to help analyzing the file
$myResolver = array();

// processing the array and calculating the unixtimestamp-differences
array_walk($dates,'calc_ts', array(&$myResolver, $current_date));

// sorting the array
asort($myResolver);

// fetching the first (aka smallest) value
$closest = key($myResolver);

var_dump($closest);

// calculating the unixtimestam-differences    
function calc_ts($item, $index, $d) {
    $d[0][$item] = abs(strtotime($item) - strtotime($d[1]));
} 
```

适用于您想要的日期之前和之后的日期。

# llvm - 无法在 llvm 中投射 ConstantInt

> ID：13081436
> 
> 赞同：0
> 
> 时间：2012-10-26T05:48:00.360
> 
> 标签：llvm

以下代码：

```
ConstantInt * Idx = cast<ConstantInt>(gepi->getOperand(2)); 
```

产生以下错误：

```
error: invalid use of incomplete type ‘struct llvm::ConstantInt’
error: forward declaration of ‘struct llvm::ConstantInt’ 
```

我不知道为什么这个演员阵容不起作用。我正在使用 llvm 3.1。有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T07:22:14.493

添加`#include <Constants.h>`到您的来源。

# objective-c - 不兼容的指针类型将“类”发送到“NSDate *”类型的参数

> ID：13081444
> 
> 赞同：2
> 
> 时间：2012-10-26T05:49:11.960
> 
> 标签：objective-c, casting, objective-c-category

我有一个使用以下方法的 NSDate 类别

```
@implementation NSDate (DateUtility)

+(NSString *)dateTimeStringForDB {
    NSDateFormatter *dateFormatForDB = [[NSDateFormatter alloc] init];
    [dateFormatForDB setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
    NSString *aDateStr= [dateFormatForDB stringFromDate:self];
    [dateFormatForDB release];
    return aDateStr;    
}
@end 
```

有了这个定义，我收到了警告。

**不兼容的指针类型将“类”发送到“NSDate *”类型的参数**

但是，在将其分配为参数之前键入转换 self 会抑制此警告。

```
+(NSString *)dateTimeStringForDB
{
    NSDateFormatter *dateFormatForDB = [[NSDateFormatter alloc] init];
    [dateFormatForDB setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
    NSString *aDateStr= [dateFormatForDB stringFromDate:(NSDate*)self];
    [dateFormatForDB release];
    return aDateStr;    
} 
```

我们真的不能在不进行类型转换的情况下将 self 作为参数传递给类别吗？这个特性依赖于什么，编译器？在实际将其作为问题发布之前寻找答案我遇到了[这个](https://stackoverflow.com/a/5905567/438658)，但是我仍然不清楚幕后发生了什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T05:53:03.303

你已经创建了一个类方法，我怀疑你真的想要一个实例方法。我假设您想将`NSDate`（即对象）的实例转换为`NSString`表示形式。目前您正在尝试将实际`NSDate`类转换为`NSString`表示形式。

改变

```
+(NSString *)dateTimeStringForDB { 
```

到

```
-(NSString *)dateTimeStringForDB { 
```

# ios - 在单击 MKMapView 之前，MKPolylineView 不会在 MKMapView 上呈现

> ID：13081450
> 
> 赞同：0
> 
> 时间：2012-10-26T05:49:50.787
> 
> 标签：ios, mkmapview

我有一个视图控制器，我在其中以编程方式初始化 mkmapview，并将视图控制器设置为 mkmapview 的委托。此外，此地图视图作为子视图添加到视图控制器类中的滚动视图。

我将 mkpolyline 添加到 mkmapview，我有

```
 - (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay 
```

但是，加载视图控制器时不会调用 viewforoverlay，但是当我单击/触摸 mapview 并拖动/移动它时会调用它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T18:36:43.573

如果您在分配委托`MKOverlay`之前`MKMapView` *添加*，通常会出现此问题。当您添加`MKOverlay`到 时，将调用`MKMapView`委托方法。`mapView:viewForOverlay:`如果*到那时*您还没有分配代理，您将不会在初始渲染中看到覆盖渲染器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-26T05:59:57.780

添加 MKPolylineView 叠加层后尝试添加此行：

```
[myMapView setNeedsRedisplay]; 
```

这就是我向地图添加路线的方式：

```
-(void)drawRoute
{
    ...

    routeLine = [MKPolyline polylineWithPoints:pointArr count:totalPoints];

    [geoMap addOverlay:routeLine];

    ....
}

-(MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id<MKOverlay>)overlay
{    
    MKPolylineView *lineView = [[[MKPolylineView alloc] initWithPolyline:overlay] autorelease];

    UIColor *lineColor = [[UIColor alloc] initWithRed:0 green:0 blue:0 alpha:1.0];

    lineView.fillColor = lineColor;
    lineView.strokeColor = lineColor;

    [lineColor release];

    lineView.lineWidth = 12;   
    lineView.alpha = 1;
    return lineView;
} 
```

# mysql - 在 MySQL 客户端中禁用自动重新连接

> ID：13081451
> 
> 赞同：5
> 
> 时间：2012-10-26T05:49:50.757
> 
> 标签：mysql

我正在尝试`my.cnf`通过更新`reconnect=false`. 所以看起来像这样：`[client]``my.cnf``my.cnf`

```
[mysqld]
...
interactive_timeout=30
[client]
port=3306
socket=~/dir/mysql.sock
reconnect=false 
```

这是行不通的。客户端在 30 秒后超时，但会重新连接到服务器。

在调试问题时，我发现 MySQL 客户端变量没有设置。当我运行 时`<dir of mysql>/bin/mysql --help`，我看到`port`,`socket`和`reconnect`flag 的值是：

```
./mysql --help

port                              0
reconnect                         TRUE
socket                            (No default value) 
```

我不想`skip-reconnect`从命令行设置。我可以猜测客户端配置`my.cnf`没有被导出到客户端。但我需要一个明确的解决方案。

这个问题有时是不可复制的。有些机器的变化`my.cnf`可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-21T08:29:18.840

你经历过吗？[控制自动重新连接行为](https://dev.mysql.com/doc/refman/5.0/en/auto-reconnect.html)

# java - 为什么在该路径中创建文件？

> ID：13081452
> 
> 赞同：0
> 
> 时间：2012-10-26T05:49:50.680
> 
> 标签：java, file, file-io, iostream

例如：

```
public class Hello {
    public static void main(String[] args) {
        try {
            OutputStream os = new FileOutputStream(new File("c.txt"));
            try {
                os.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

为什么`c.txt`在当前项目的根路径中生成的不是java文件的相同路径？ ![在此处输入图像描述](../Images/0774995a2d345732b366ff5519e974b9.png)

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T05:51:22.960

因为在启动 JVM 时，您的项目的根目录是您当前的工作目录。您可以检查`user.dir`系统属性以查看您当前的工作目录。如果您访问没有前导斜杠 (Unix) 或驱动器说明符/反斜杠 (Windows) 的文件，则将相对于您当前的工作目录创建文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T05:53:53.907

您没有提供完整路径 - 这意味着 File 构造函数将使用您的进程的当前目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T05:55:56.463

您提供的路径将指向项目目录，只有当您想更改时，您也可以提及要生成文件的完整路径。

```
OutputStream os = new FileOutputStream(new File("c.txt"));

OutputStream os = new FileOutputStream(new File("D:\\c.txt")); 
```

# python - Python xgettext 合并 gettext 和 ngettext 字符串，打破翻译查找

> ID：13081453
> 
> 赞同：2
> 
> 时间：2012-10-26T05:49:54.240
> 
> 标签：python, internationalization, gettext, extraction

跑步：

```
> xgettext test.py -o out.pot 
```

在 Python 代码段 test.py 上：

```
def main(num):
    gettext("TEST")
    ngettext(num, "TEST", "TESTS") 
```

生成具有以下行的 pot 文件（翻译的字符串在 po 文件中）：

```
#: test.py:3 test.py:4
msgid "TEST"
msgid_plural "TESTS"
msgstr[0] "TEST-SINGLE"
msgstr[1] "TEST-PLURAL" 
```

把它变成一个 po 文件，然后是一个 mo 文件。我无法获得 gettest("TEST") 调用的翻译。

```
> ngettext("TEST", "TESTS", 1)
> TEST-SINGLE
> gettext("TEST")
> TEST 
```

我正在使用 Python 的标准 gettext 包。我不确定这些合并行为是否是预期的，但它似乎破坏了查找非复数字符串的翻译的能力。有没有办法避免这种情况？

我正在考虑为 gettext 建立一个后备，如果第一个失败，则尝试一个 ngettext 调用。不过，这似乎很hacky。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T22:38:48.423

这两个条目完全相同，即单数条目与复数条目相同。展示：

```
msgid "Test"
msgstr "Toets"

msgid "Test"
msgid_plural "Tests"
msgstr[0] "Toets"
msgstr[1] "Toetse" 
```

然后使用 msgfmt 编译它：

```
msgfmt test.po 
bob.po:4: duplicate message definition...
bob.po:2: ...this is the location of the first definition
msgfmt: found 1 fatal error 
```

Gettext 使用 msgid 作为字符串的键，因此它会看到这些单数和复数字符串是重复的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T18:06:03.880

问题似乎源于 gettext 包查找翻译的方式。对于 gettext 和 ugettext 调用，它只是在目录中查找 _catalog['TEST']，而不搜索 _catalog[("TEST", 0)]。

我不认为这是正确的行为，因为 xgettext 决定合并这两个字符串，但我在文档中找不到任何东西来证明一种或另一种方式。

为了解决这个问题，我在 gettext 和 ugettext 的两种替换方法中进行猴子修补，如果简单查找失败，它将回退到 (message, 0) 目录查找。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-04T08:55:16.193

我在最近的一个项目中遇到了同样的问题。在我看来，这可能被认为是 python gettext 模块中的一个错误。其他人也持有这种观点，因为自 2013 年以来 Python bugtracker 上存在[一个未解决的问题……我提出](https://bugs.python.org/issue18319)[了一个补丁](https://github.com/python/cpython/pull/19869)，但可能需要一段时间才能将其包含在发布中。

当然，使用`ngettext("TEST", "TESTS", 1)`代替`ngettext("TEST")`是一个非常简单的解决方法。不完全令人满意，但它的工作...

# javascript - 使用带有 jQ uery 的 TypeScript 参考文件不存在

> ID：13081456
> 
> 赞同：0
> 
> 时间：2012-10-26T05:50:18.890
> 
> 标签：javascript, jquery, typescript

我使用 VS2012 插件和 Web Essentials 创建了我的第一个 TypeScript 文件：

```
///<reference path='/Scripts/jquery/jquery.d.ts' />
/*jslint browser: true*/
/*jslint vars: true */
/*global $, jQuery*/
/*global ajaxOnFailure, doAddSubmit, doResetTabs*/
/*global mvcOnFailure, updateGridMeta*/

function alertWin(title, message) {
    $.modal({
        content: '<p class="align-center">' + message + '</p>',
        title: title,
        minWidth: 150,
        maxWidth: 900,
        maxHeight: 600,
        width: false,
        buttons: {
            'Ok': function (win) { win.closeModal(); }
        }
    });
} 
```

我将参考文件从解决方案拖放到文件顶部，它确实存在。

但是，一旦它被拖动，我就会在它下面看到一条红线，上面写着“引用的文件不存在”。我还注意到它似乎无法识别`$`我的脚本中的 。

这是我的目录结构：

```
/Scripts
/jquery/jquery.d.ts
/Shared/dialog/functions/file1.ts <-- the file above 
```

笔记：

当我将 .ts 文件放在与 file1.ts 相同的目录中并按如下方式引用时，它可以工作：

```
///<reference path='jquery.d.ts' /> 
```

所以我的问题是：

我怎样才能将我的 jquery.d.ts 放在一个地方并从我的文件中引用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T06:56:27.417

您需要使用相对于使用它的脚本的参考路径（with..）——您不能只要求从根目录计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:58:11.287

请参阅此答案[Using jQuery plugin in TypeScript](https://stackoverflow.com/questions/12719529/using-jquery-plugin-in-typescript)

> jQuery 插件（以及其他基于插件的库）的问题在于，您不仅需要为基础库提供 library.d.ts 文件，还需要为每个插件提供 plugin.d.ts 文件。并且不知何故，这些 plugin.d.ts 文件需要扩展 library.d.ts 文件中定义的库接口。幸运的是，TypeScript 有一个漂亮的小功能可以让你做到这一点。

# ruby-on-rails - 如何在 Rails 中建模用户、文本、条目表

> ID：13081459
> 
> 赞同：0
> 
> 时间：2012-10-26T05:50:34.663
> 
> 标签：ruby-on-rails, data-modeling

这个想法是用户创建条目，文本不属于一个用户，而是许多条目。当用户创建第一个条目时，会创建一个文本，但不严格属于该用户。假设 10 个人每人写一行，一篇 10 行的文本。如何编写迁移？谢谢你。

草图 -

```
User
  has many entries
  (has many texts, entries through texts?)

Text
  has many entries

Entry
  belongs to text
  belongs to user

# updated...
User
 has_many :entries
 has_many :texts, :through => :entries

Text
 has_many :entries
 has_many :users, :through => :entries

Entry
 belongs_to :user
 belongs_to :text 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:05:38.823

一旦确定了模型之间的关联，迁移就很容易编写

```
User
 has_many :entries
 has_many :texts, :through :entries

Text
 has_many :entries

Entry
 belongs_to :user
 belongs_to :text 
```

Entry 表将有 2 列分别用于存储用户和文本的 id（user_id 和 text_id），就是这样，您现在可以轻松地为每个模型编写迁移...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T10:11:13.403

与上述模型关联匹配的基本迁移将是

```
create_table :users do |t|
  # User Fields
  t.timestamps
end

create_table :texts do |t|
  # Text Fields
  t.timestamps
end

create_table :entries do |t|
  # Entry Fields
  t.integer :user_id
  t.integer :text_id
  t.timestamps
end 
```

您可能还需要表格中的其他字段来对`:entries`文本中的条目进行排序（取决于您的应用程序）。

# extjs - EXTJS 添加按钮

> ID：13081462
> 
> 赞同：2
> 
> 时间：2012-10-26T05:50:56.467
> 
> 标签：extjs, extjs4.1

如何在使用 extjs 的网格面板中使用按钮而不是文本作为链接

以下代码暗示指向不同页面的链接，我需要将该“填充”链接作为按钮...请帮助我任何人

```
 var text = 'Fill'
    if(value != undefined && value !='') {
        text = Ext.Date.format(value,'Y-m-d');
    }
    return '<span class="grid_link">'+text+'</span>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:41:45.150

尝试使用**renderTo**组件属性

```
return '<span class="grid_link"><div id="btn"/></span>'; 
```

...

```
Ext.create('Ext.Button', {
    text: 'Click me',
    renderTo: 'btn',        
    handler: function() {
        alert('You clicked the button!')
    }
}); 
```

# c# - mvc弹出窗口中的密码更改

> ID：13081464
> 
> 赞同：0
> 
> 时间：2012-10-26T05:51:02.720
> 
> 标签：c#, asp.net-mvc

我`@Html.Password("Password", ViewData["password"])`用于在弹出窗口中显示密码，正在显示密码，我应该能够编辑和更新它。编辑后，当我单击保存按钮时，密码未更新。

`ModelState.IsValid`正在给予`False`并且正在跳过该方法。

这是我的看法

```
@Html.Password("Password", ViewData["password"]) 
```

控制器

```
 [httppost]
       public actionresult edituser(sales.users saleUser)
       {
        sales.users objUser=new sales.users();
        sales objSaleModel=new Sales();

        if(modelstate.isvalid)
        {

          //the code to save the changes
        }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T07:20:47.230

Model.IsInvalid 由于各种其他方面。

模型中的任何元素都可能无效。

因此，请检查您的模型您对字段进行了哪些验证。

# upload - 如何在 node.js 中提供静态文件？

> ID：13081465
> 
> 赞同：1
> 
> 时间：2012-10-26T05:51:02.757
> 
> 标签：upload, static, express

在我的应用程序中，用户可以将图像上传到服务器，我将上传的文件放在上传文件夹中，如下所示

*   上市

*   上传

但是当我服务

```
<img src='upload/image.jpg'/> 
```

有一个 404 错误。

我使用快递并使用

```
app.use(express.static(__dirname + '/public')); 
```

这是否意味着我必须将所有上传的文件放在公共文件夹中，如果有这么多硬盘驱动器无法容纳的图像怎么办，我不能将其余的放在另一个服务器中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T09:55:33.813

**不，您不必将所有上传的文件放到公共文件夹中。**

Express 允许配置多个中间件，因此您可以再添加一个中间件来提供所需目录中的静态内容。

如果您想在 Url 路径中指定目录，那么您可以使用这样的目录挂载功能！

```
app.use('/upload',express.static(__dirname + '/upload')); 
```

**当然，您可以使用其他服务器来存储上传的文件，您可以通过代理请求来检索这些文件。**

```
app.get('/upload/:fileName',function(req,res) {

     var options = {
        port: 80,
        method : 'GET',
        hostname : "localhost",
        path : "/upload/" + req.params.fileName
     };

    var req = http.request(options,function(response) {     
        response.pipe(res);
    });

    req.on('error',function(err) {
        res.statusCode = 404;
        res.end("Error : file not found");
    }); 

    req.end();
}); 
```

此代码不仅适用于上传的文件存储在原始服务器中，而且如果您在其他服务器上也有文件！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T02:37:18.083

如果你

```
app.use(express.static(__dirname + '/public')); 
```

并`./public`包含：

```
/img.png
/img2.png
/logo.png 
```

`yourapp.com/img.png`将是 img.png。

如果你想`yourapp.com/img.png`成为404并`yourapp.com/public/img.png`成为img.png，你需要替换

```
app.use(express.static(__dirname + '/public')); 
```

和

```
app.use("/public",express.static(__dirname + '/public')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T06:17:53.937

您可以将图像放在 ./public/upload

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T20:51:56.013

尝试使用这个：

```
<img src='/upload/image.jpg'/> 
```

上传前注意斜线。可能问题不在于您保存文件的位置，而在于您如何引用它们。如果带有`img`标签的页面不在您的根目录中，则相对 url`upload/image.jpg`将不起作用。你需要使用`/upload/image.jpg`.

# string - 如何从字母转换为像素

> ID：13081468
> 
> 赞同：2
> 
> 时间：2012-10-26T05:51:17.157
> 
> 标签：string, matrix, character, pixelate

您知道将字母转换为代表字母的矩阵（由 0 和 1 组成）的程序或脚本吗？例如，从字母 I 到这样的矩阵：（这是一个显示字母 I 的 LED 面板）：

[![例子](../Images/7d6eb03df9bf9113212bef452260be34.png)](https://i.stack.imgur.com/15H3H.jpg)

请让我知道一种创建此类矩阵的方法，而不是手动键入
Thx。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-09T11:03:49.227

唯一的解决方案是使用字体。

1.  **对于硬件实现，我通常使用 EGA/VGA 8x8 字体**

    从 gfx 卡**BIOS**中提取，您可以在**MS-DOS**环境中轻松完成

2.  **另一种方法是从图像中以编程方式提取字体**

    将整个字体绘制到位图（在线或矩阵中......，或使用一些已经创建的像我的）。使用固定间距，字体大小最适合您的需要，不要忘记几乎没有现代字体支持固定间距，因此请使用`OEM_CHARSET`并`System`从中命名字体。正确设置颜色（理想的是黑色背景和白色字体）并逐像素读取图像并将其存储为数字表。没有背景颜色的像素被设置为像素。

    **不要因为抗锯齿和过滤器而与字体颜色进行比较**。现在读取字体表中的所有字符并设置/重新设置相应的位。首先计算`x,y`图像中字符的开始（来自**ASCII**代码和图像组织），然后执行 2 个嵌套的 8 步`x,y`for 循环（根据您的`font[]`组织顺序）

    `set/res`地址对应的 `font[]`位`8*ASCII``8*ASCII+8`

3.  **我假设您使用 MCU 来控制 LED 面板**

    内存中的字体组织通常是 8 位数字代表字符中的单行。当然，如果您的**LED**面板是用来显示动画滚动的，那么字体的列组织和硬件实现会大大简化事情。如果您有 16 位**MCU**和**IO**访问权限，则可以使用`16-bit`/ 像素字体大小。

    如果您有超过 8 个像素且只有 8 位 MCU，您仍然可以使用 16 位数据，但 IO 访问将通过两个 IO 端口而不是 1 个分两步进行。**我强烈建议整个数据范围的 IO 访问而不是 set/res单独的 IO 线**更快，并且可以防止闪烁

好的，这是我以前`8x8`使用的旧字体...我认为这是从**EGA/VGA BIOS**中提取的，但我不支持...这是太多年前的事了

![固定间距 8x8 字体](../Images/7ee457b34a6d3ffc0fac2dbed8679d4a.png)

现在有趣的部分

```
const BYTE font[8*256]={ 0,0,0,0,0,0,0,0, ... } 
```

任何字符都表示为 8 个数字。如果位是`0`则表示纸张（背景像素） 如果位是`1`则表示墨水（字体像素）。现在有更多组合（从左到右，从上到下及其组合）

OK ( row-vise | left to right | up to down ) 组织意味着：

*   第一个数字在最上面的 char 行
*   **msb**是最左边的像素
*   **lsb**是最右边的像素

因此，例如 char '1' in`8x8`将是这样的（b 表示二进制数）：

```
00000000b,
00001000b,
00011000b,
00101000b,
00001000b,
00001000b,
00111100b,
00000000b, 
```

当您将所有字符提取到字体表而不是将其作为源代码保存到文件中时，您稍后将包含在您的**MCU**代码中（可以放在**EEPROM**中用于 pgm-code）

**现在在LED**面板上打印字符的算法很大程度上取决于您的硬件实现

*   所以请贴一张LED面板与控制系统互连的电路图
*   指定目标平台和语言
*   指定所需的功能

我假设您希望按像素步向左移动滚动

1.  **如果您的 LED 面板由列而不是行驱动，则最合适**

    您可以通过某个**数据 IO**端口激活单列**LED**（一次可以激活所有位），选择哪一列激活由另一个**选择 IO**端口驱动（一次只能激活单个位）。所以在这种情况下，计算要在字体表中显示的列的起始地址：

     *****   `address = (8*ASCII + x_offset)`
    *   发送`font[8*ASCII + x_offset]`到**数据IO**口
    *   使用正确的位激活**选择 IO**端口
    *   稍等一下（1-10ms）......所以如果延迟太短，您实际上可以看到光，如果延迟太长，则没有亮度，则有闪烁，因此您需要进行一些实验（取决于选择的数量位）。
    *   停用**选择 IO**端口
    *   重复下一列
    *   `x_offset`是滚动移位**** 
*****   **如果您的硬件实现不适合这种方式，请不要担心**

    只需使用位 SHIFT、AND、OR 操作在内存中创建数据字，然后以类似的方式发送它们**** 

 ****希望它有点帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:41:39.027

您可以尝试找到一种看起来像您想要的方式的字体（可能是等宽字体，例如 Courier），以特定大小（8pt？）绘制/光栅化它，而不使用抗锯齿，然后将生成的图像转换为您的矩阵格式.****

# clojure - 有没有关联队列之类的东西？

> ID：13081469
> 
> 赞同：6
> 
> 时间：2012-10-26T05:51:22.007
> 
> 标签：clojure

我想要一个 clojure 数据结构：

*   从前面弹出
*   向后推
*   让我将索引与值关联（即`(assoc q 0 1)`会将前面的值设置为 1）

Clojure 中是否有类似的东西（不幸的是 PersistentQueue 不符合 Nr.3），还是我应该在向量之上构建它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:16:45.553

标准 Clojure 中没有一种数据结构可以有效地满足这些要求。

Clojure-Dev 邮件列表上有一些关于使用 RRB 树作为向量的讨论，这将是一个很好的数据结构：

*   [https://groups.google.com/forum/?fromgroups=#!topic/clojure-dev/xnbtzTVEK9A](https://groups.google.com/forum/?fromgroups=#!topic/clojure-dev/xnbtzTVEK9A)

不知道这已经发展到什么程度了——但如果你对这种数据结构感兴趣，那么绝对值得一看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T02:04:28.087

如果您不需要数据结构的持久性，您可以`java.util.LinkedList`在 Clojure 程序中使用。

例子：

```
;;; Creation
user> (import 'java.util.LinkedList)
java.util.LinkedList
user> (def linked-list (LinkedList. [:a :b :c :d :e]))
#'user/linked-list

;;; Pop from the front
user> (.pop ^LinkedList linked-list)
:a
user> linked-list
#<LinkedList [:b, :c, :d, :e]>

;;; Push to the rear, but costly
user> (.addLast ^LinkedList linked-list :x)
nil
user> linked-list
#<LinkedList [:b, :c, :d, :e, :x]>

;;; Assoc (cf. (assoc linked-list 0 :y)
user> (.add ^LinkedList linked-list 0 :y)
nil
user> linked-list
#<LinkedList [:y, :b, :c, :d, :x]> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T06:28:32.790

您可以使用[sorted-map](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/sorted-map)，但您必须自己实现索引部分。

例如，要推送一个值 v，您可以将它与通过递增映射中的最后一个键生成的键相关联。要弹出，您可以解开地图中的第一个键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T01:47:06.477

听起来你想要一个像 python 的双端队列一样的[双端队列](http://docs.python.org/2/library/collections.html#collections.deque)，除了你可能更喜欢 c++ 的索引访问性能特征，`std::deque<T>`它的文档有点迟钝。

Java 附带了您可以使用的[java.util.Deque](http://docs.oracle.com/javase/6/docs/api/java/util/Deque.html)实现，就像@tnoda 对 java.util.LinkedList 的建议一样。

如果您自己滚动，那么对于非持久集合的实现非常简单，并且至少对我来说似乎相当直观，至少可以针对 clojure 的哈希图和向量底层的“散列数组树”实现，或者如果详细信息最初直接针对向量惹恼你。

# web-applications - Selenium IDE 1.9.1 xpath 包含选择

> ID：13081475
> 
> 赞同：2
> 
> 时间：2012-10-26T05:51:44.830
> 
> 标签：web-applications, xpath, selenium, firefox-addon, selenium-webdriver

我正在尝试使用软件名称 Selenium (web rat) 来模拟用户与浏览器的交互

例如，我试图将用户名字段命名为 'john

但是“用户名文本框”的“id”是 username_947232, username_8237

其中 username_[随机数] 的格式

我的语法如下：

```
//*[contains(@id="username_(/\d+/)")] 
```

但它不起作用，有人知道吗？

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T15:13:47.127

**使用**：

```
//*[starts-with(@id, 'username_')
  and 
   floor(substring-after(@id, 'username_')) = substring-after(@id, 'username_')
    ] 
```

**说明**：

此表达式选择其属性的字符串值以`id`字符串开头且该字符串`"username_"`的其余部分（在开始之后`"username_"`）是整数的任何元素。

`$string`这里我们使用以下表达式为真当且仅当表示一个整数的事实：

```
floor($string) = $string 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
     <xsl:copy-of select=
      "//*[starts-with(@id, 'username_')
  and
   floor(substring-after(@id, 'username_')) = substring-after(@id, 'username_')
    ]
    "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当将此转换应用于此 XML 文档时**：

```
<t>
 <user id="username_Xyz"/>
 <user id="username_Xyz123"/>
 <user id="username_123Xyz"/>
 <user id="username_123Xyz456"/>
 <user id="username_2015"/>
</t> 
```

**对 Xpath 表达式求值，并将从该求值中选择的节点复制到输出：**

```
<user id="username_2015"/> 
```

**请注意**：此问题的其他两个答案`user`将从上述文档中选择所有 5 个元素——这当然是不正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:28:51.650

采用`starts-with`

```
//*[starts-with(@id, "username_")] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-26T06:51:50.717

你应该可以使用

```
//*[contains(@id, 'username_')] 
```

虽然如果你最后可能有除数字以外的任何东西，这可能不是最佳选择。

# python - 在哪里可以找到 Python 中列表推导的形式语法？

> ID：13081479
> 
> 赞同：4
> 
> 时间：2012-10-26T05:52:08.807
> 
> 标签：python, grammar

我在哪里可以找到 Python 的正式语法，特别是 List Comprehension ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T05:53:12.193

这是完整的语法（Python 2.7.3）：

[http://docs.python.org/reference/grammar.html](http://docs.python.org/reference/grammar.html)

解析列表推导的一般语法涉及以下规则：

首先，解析整个表达式，它是一个`atom`：

```
atom: ('(' [yield_expr|testlist_comp] ')' |
       '[' [listmaker] ']' |
       '{' [dictorsetmaker] '}' |
       '`' testlist1 '`' |
       NAME | NUMBER | STRING+) 
```

其次，要解析理解的实际内容`listmaker`，以及它使用的规则：

```
listmaker: test ( list_for | (',' test)* [','] )
list_iter: list_for | list_if
list_for: 'for' exprlist 'in' testlist_safe [list_iter]
list_if: 'if' old_test [list_iter] 
```

除此之外，您还可以返回一般的解析表达式，例如`exprlist`.

# javascript - 无法在 Chrome 中设置断点

> ID：13081483
> 
> 赞同：1
> 
> 时间：2012-10-26T05:52:22.220
> 
> 标签：javascript, html

为了我的学习目的，我编写了一个简单的 javaScript 函数来使用 JS 验证所需的 userName 字段。

我面临两个问题-

1.  在提交按钮中，onclick 事件处理程序不调用 `checkRequired`方法，并回发表单。
2.  我无法在 chrome 调试器中设置断点。
3.  即使在代码中专门使用调试器也不会将控件带到调试器断点。

**任务管理器.js**

```
function checkRequired() {
    debugger;
    var userName = document.getElementById("txtUserName");
    if (userName.length == 0) {
        alert("username is required attribute");
        return false;
    }
    return true;
} 
```

**添加新用户：**

```
<html>
<head>
    <title>Add new User</title>
    <style type="text/css" media="all">
        button {
            width: 65px;
        }
    </style>
    <script src="TaskManager.js" type="text/javascript"></script>
</head>
<body>
    <form method="post" action="AddNewUser.html" style="width: 560px; height: 850px; margin-left: 10px; margin-top: 10px">
        <fieldset>
            <legend>New User</legend>
            <table>
                <tr>
                    <td>
                        <label>User Name:</label></td>
                    <td>
                        <input type="text" id="txtUserName" name="User Name" maxlength="10" /></td>
                </tr>

                <tr>
                    <td>
                        <button id="btnSubmit" type="submit" onclick="checkRequired()">Add User</button>
                    </td>
                    <td>
                        <button id="btnCancel">Cancel</button>
                    </td>
                </tr>

            </table>
        </fieldset>

    </form>

</body>
</html> 
```

感谢您为解决问题提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T06:32:13.467

如果你的断点没有到达，那么这个函数就无法访问，你应该在控制台中得到一个错误。该函数是否在全局范围内？

[这是您的代码](http://jsfiddle.net/uksnU/3/)，我对其进行了一些更改以使其正常工作。首先必须考虑处理程序的结果：

```
<button id="btnSubmit" type="submit" onclick="javaScript:return checkRequired();"> 
```

然后，您必须`.value.length`在您尝试验证的文本框中进行检查：

```
var userName = document.getElementById("txtUserName");
if (userName.value.length === 0) {[...] 
```

无论如何，如果可能，我建议您使用不显眼的方法，并将事件直接绑定到您的 javascript 代码中，而不是在标记中定义它：

```
var submitBtn = document.getElementById("btnSubmit");
submitBtn.onclick = function checkRequired() {
    console.log('aho');
    var userName = document.getElementById("txtUserName");
[...] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:42:39.667

检查是否正在加载脚本文件。在函数定义之外的文件顶部放置一个警报。

如果警报未显示，请仔细检查脚本文件的名称。它与脚本标签中引用的相同吗？它在同一个目录中吗？

# sql - SQL：创建额外的列指定运输截止日期时间

> ID：13081489
> 
> 赞同：2
> 
> 时间：2012-10-26T05:53:04.220
> 
> 标签：sql, sql-date-functions

我正在查询我的数据库以生成一个输出，该输出将指定每个订单的运输截止日期。为此，我想对过去几周的订单进行查询，其中有一列是订单的日期/时间。但是，我还想自动创建另一个名为“Shipping Deadline”的列，它计算下订单后 24 小时的日期/时间。如下；

```
    订单编号 | 付款金额 | 订购日期 | 发货期限
    1001 500 美元 2012 年 10 月 15 日上午 10:01:00 2012 年 10 月 17 日上午 10:01:00
    1002 200 美元 2012 年 10 月 16 日上午 7:37:00 2012 年 10 月 18 日上午 7:37:00

```

有没有一种简单的方法可以在 SQL 中创建 Shipping Deadline 列？这就是我到现在为止的。

```
SELECT OrderDate AS 'Order Date', OrderID AS 'Order ID', PaymentAmount AS 'Payment Amount', TotalShippingCost AS 'Total Shipping Cost'
FROM Orders
WHERE OrderDate BETWEEN '10/15/2012 00:00:00' and '10/21/2012 00:00:00' 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T05:57:58.430

您说 24 小时，但示例显示 48 小时？

```
SELECT OrderDate AS [Order Date],
       OrderID AS [Order ID],
       PaymentAmount AS [Payment Amount],
       TotalShippingCost AS [Total Shipping Cost],
       DateAdd(hour, 48, OrderDate) [Shipping Deadline]
  FROM Orders
 WHERE OrderDate BETWEEN '10/15/2012 00:00:00' and '10/21/2012 00:00:00' 
```

顺便说一句，以后不要对列别名使用单引号；使用如上所示的方括号。

# mysql - DBX 错误：驱动程序无法正确初始化

> ID：13081494
> 
> 赞同：5
> 
> 时间：2012-10-26T05:53:32.460
> 
> 标签：mysql, delphi, dbexpress, delphi-xe3

我正在运行*Delphi XE3 (Ultimate Edition)*、MySQL 数据库，这是单击时出现的错误`Test Connection`。

![在此处输入图像描述](../Images/afe358f65b4d0355e06f4cd51ce2973a.png)

作为回应，我在我的 xampp 目录中找到了 libmysql 库，并将其复制到我的 System32 目录中。但是，这不起作用。

此消息指的是哪些库/驱动程序，放置它们的正确目录是什么？

libmysql 版本 - 5.5.16.0

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T07:19:11.073

该消息指出该库可能是：

*   失踪;
*   未正确安装；或者
*   错误的版本

我在谷歌上搜索了这个库，发现这篇[博客文章](http://wiltonsoftware.com/posts/view/getting-embarcadero-dbexpress-mysql-working-dbx-error-driver-not-initialized)讨论了上述错误消息，并提供了一个更新版本的 libmysql 库，该库将放置在 bin 目录 (Embarcadero\RAD Studio\10.0\bin) 中。

[libmysql 库下载链接](http://wiltonsoftware.com/download/libmysql-5.1.59-win32.zip)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T12:48:46.817

你不应该在 bin 目录中放置任何第 3 方文件 - XE3 不允许这样做 [请阅读此文档](http://docwiki.embarcadero.com/RADStudio/XE3/en/Release_Notes_for_XE3#Do_not_install_extraneous_files_in_.5Cbin_directories)

# java - 任何命令行实用程序（如 wget、curl 等）和/或 java 方法来获取缩短 URL 的元数据？

> ID：13081500
> 
> 赞同：1
> 
> 时间：2012-10-26T05:54:06.703
> 
> 标签：java, url, curl, web, web-crawler

我有从 twitter 提要收到的缩短 URL 流。我不需要该 URL 的整个页面，但需要基本的元信息，例如扩展的原始 URL、页面标题、时间戳等。我可以使用 curl、wget 获取包含这些元的整个页面，但任何更快的方法只获取元？此外，是否有任何 java 类/方法可以像 curl 一样执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T13:44:50.747

HTTP Head 请求可能是您正在寻找的，这是一个使用 curl 的示例（尽管在其 Python 实现中）：[Python：将那些 TinyURL（bit.ly、tinyurl、ow.ly）转换为完整的 URL](https://stackoverflow.com/questions/748324/python-convert-those-tinyurl-bit-ly-tinyurl-ow-ly-to-full-urls)

# javascript - 在 JavaScript 对象文字中使用变量

> ID：13081502
> 
> 赞同：0
> 
> 时间：2012-10-26T05:54:14.830
> 
> 标签：javascript, jquery, arrays, variables, object

基本上，我无法从输入框中获取信息并在对象文字中使用该变量。

这是我的代码：

```
$("document").ready(function() {

    function updateEvent(){
        render();
    }

    function render() {
                     //get values from input
            var gallons = $("#gallons").val();
            var electricity = $("#electricity").val();
            var energy = $("#energy").val();

        var figure = new Highcharts.Chart({

            series: [{
                    name: 'Throttle',
                    data: [0, 0, 30 , 0, energy, 30, 0, 0] //Variables will not work in here, no specific error but data doesn't show
                }, {
                    name: 'Power',
                    data: [30, 30 , 30, 30, 30, 30, 30, 30]
                }]

        }); 
```

我试过嵌入一个函数并做其他技巧，但没有任何效果，我可能做错了，我不确定。有没有办法在对象文字中使用变量而无需完全重新编码结构。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:08:18.840

## 如何从输入框中获取值并在对象文字中使用该值？

```
function doStuff(){
      var realIncome = document.getElementById("income").value;
      var objLit= { realIncome: realIncome,
                 desiredIncome: realIncome * 4 };
      console.log(objLit);
      document.getElementById("out").innerText = 
            objLit.realIncome + " " + objLit.desiredIncome;
 } 
```

和 HTML

```
Big Number 
<input id="income" name="income" type="number" 
    placeholder="please enter your desired income">
<button name="calculate" onclick="doStuff()">click me </button>​

Your income <span id="out"></span><br /> 
```

请看一下我的演示代码：http: [//jsfiddle.net/mppAM/2/](http://jsfiddle.net/mppAM/2/)

# php - mysql_connect（不使用 php 文件）

> ID：13081508
> 
> 赞同：-1
> 
> 时间：2012-10-26T05:54:55.877
> 
> 标签：php, phpmyadmin

不断收到相同的错误信息（警告：mysql_connect() [function.mysql-connect]: Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2) in /home/content/第 27 行的 00/7882800/html/Connections/dueslogin.php 无法连接到数据库！请稍后再试。）

```
 <?php
        //Variables for connecting to your database.
        //These variable values come from your hosting account.
        $hostname = "TarHeelsDues.db.7882800.hostedresource.com";
        $username = "TarHeelsDues";
        $dbname = "TarHeelsDues";

        //These variable values need to be changed by you before deploying
        $password = "************";
        $usertable = "DuesLogin";
        $yourfield = "your_field";

        //Connecting to your database
        mysql_connect($hostname, $dbname, $password) OR DIE ("Unable to 
        connect to database! Please try again later.");
        mysql_select_db($TarHeelsDues);

        //Fetching from your database table.
        $query = "SELECT * FROM $usertable";
        $result = mysql_query($query);

        if ($result) {
            while($row = mysql_fetch_array($result)) {
                $name = $row["$yourfield"];
                echo "Name: $name<br>";
            }
        }
        ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T05:59:19.517

将 mysql_connect 行更改为

```
mysql_connect($hostname, $username, $password) OR DIE ("Unable to 
    connect to database! Please try again later.");

mysql_select_db($dbname); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T11:07:14.900

The correct syntax should be like this:-

mysql_connect($hostname, $username , $password) OR die ("Unable to connect with the server"); mysql_select_db($TarHeelsDues) or die('Cannot connect with the database!');

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T06:36:29.533

那里有个小错误，你必须在 mysql_connect 中使用 $username 而不是 $dbname。

```
 mysql_connect($hostname, $username , $password) OR DIE ("Unable to 
        connect to database! Please try again later.");
        mysql_select_db($TarHeelsDues); 
```

# xml - 基于多重分组和添加终止的muenchian sum

> ID：13081509
> 
> 赞同：2
> 
> 时间：2012-10-26T05:54:59.600
> 
> 标签：xml, xslt, grouping, muenchian-grouping

我想使用下面的一些 xslt 和 xml 获得更好的 xml 文件。请提供 XSLT 1.0 支持。非常感谢。

```
<!-- entry xml -->
    <Pallets>
    <Pallet>
    <PalletNumber>2</PalletNumber>
    <Product>1</Product>
    <Quantity>2</Quantity>
    </Pallet>
    <Pallet>
    <PalletNumber>2</PalletNumber>
    <Product>1</Product>
    <Quantity>4</Quantity>
    </Pallet>
    <Pallet>
    <PalletNumber>2</PalletNumber>
    <Product>2</Product>
    <Quantity>1</Quantity>
    </Pallet>
    <Pallet>
    <PalletNumber>3</PalletNumber>
    <Product>1</Product>
    <Quantity>2</Quantity>
    </Pallet>
    <Pallet>
    <PalletNumber>4</PalletNumber>
    <Product>2</Product>
    <Quantity>2</Quantity>
    </Pallet></Pallets> 
```

我需要总结每个托盘编号和产品的数量（请参见下面的第一个节点）。根据 xml 中的第一次出现，在托盘编号值的右侧部分也需要序列号。结果应该如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>

<!-- upgraded xml --> 
    <Pallets><Pallet>
    <PalletNumber>2_1</PalletNumber>
    <Product>1</Product>
    <Quantity>6</Quantity>
    </Pallet>
    <Pallet>
    <PalletNumber>2_2</PalletNumber>
    <Product>2</Product>
    <Quantity>1</Quantity>
    </Pallet>
    <Pallet>
    <PalletNumber>3_1</PalletNumber>
    <Product>1</Product>
    <Quantity>2</Quantity>
    </Pallet>
    <Pallet>
    <PalletNumber>4_1</PalletNumber>
    <Product>2</Product>
    <Quantity>2</Quantity>
    </Pallet></Pallets> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T09:09:30.717

不是 100% 确定新的逻辑`PalletNumber`是正确的（这里是凌晨 3:00），但是下面的 XSLT 1.0 使用给定的输入返回所需的输出......

**XML 输入**

```
<Pallets>
    <Pallet>
        <PalletNumber>2</PalletNumber>
        <Product>1</Product>
        <Quantity>2</Quantity>
    </Pallet>
    <Pallet>
        <PalletNumber>2</PalletNumber>
        <Product>1</Product>
        <Quantity>4</Quantity>
    </Pallet>
    <Pallet>
        <PalletNumber>2</PalletNumber>
        <Product>2</Product>
        <Quantity>1</Quantity>
    </Pallet>
    <Pallet>
        <PalletNumber>3</PalletNumber>
        <Product>1</Product>
        <Quantity>2</Quantity>
    </Pallet>
    <Pallet>
        <PalletNumber>4</PalletNumber>
        <Product>2</Product>
        <Quantity>2</Quantity>
    </Pallet>
</Pallets> 
```

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:key name="kPalletProduct" match="Pallet" use="concat(PalletNumber,'-',Product)"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="Pallets">
        <xsl:copy>
            <xsl:for-each select="Pallet[generate-id()=generate-id(key('kPalletProduct',concat(PalletNumber,'-',Product))[1])]">
                <xsl:copy>
                    <PalletNumber>
                        <xsl:value-of select="concat(PalletNumber,'_',count(preceding::Pallet[PalletNumber=current()/PalletNumber and not(Product=current()/Product)][1])+1)"/>
                    </PalletNumber>
                    <Product>
                        <xsl:value-of select="Product"/>
                    </Product>
                    <Quantity>
                        <xsl:value-of select="sum(key('kPalletProduct',concat(PalletNumber,'-',Product))/Quantity)"/>
                    </Quantity>
                </xsl:copy>
            </xsl:for-each>
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

**输出**

```
<Pallets>
   <Pallet>
      <PalletNumber>2_1</PalletNumber>
      <Product>1</Product>
      <Quantity>6</Quantity>
   </Pallet>
   <Pallet>
      <PalletNumber>2_2</PalletNumber>
      <Product>2</Product>
      <Quantity>1</Quantity>
   </Pallet>
   <Pallet>
      <PalletNumber>3_1</PalletNumber>
      <Product>1</Product>
      <Quantity>2</Quantity>
   </Pallet>
   <Pallet>
      <PalletNumber>4_1</PalletNumber>
      <Product>2</Product>
      <Quantity>2</Quantity>
   </Pallet>
</Pallets> 
```

# profiling - 无法启动 VS2012 Profiler

> ID：13081515
> 
> 赞同：11
> 
> 时间：2012-10-26T05:55:33.077
> 
> 标签：profiling, visual-studio-2012

我正在尝试在 Windows 8 PRO 64 位上的 Visual Studio 2012 RTM 中为控制台程序启动性能分析会话（分析/启动性能分析）。

我收到一条弹出消息通知我

> 无法加载文件或程序集“Microsoft.VisualStudio.PerformanceTools.CounterInfo.dll”或其依赖项之一。指定的模块无法找到。

显然，安装 KB2645410 后，这可能会在 VS2010 下发生。我仔细按照针对此问题给出的过程给出了相同的错误消息：

[Visual Studio 2010 SP1、KB2645410 和加载项](http://www.alex-maz.info/vs2010_profiler_error)

但是，这并不能解决问题。

我也尝试以管理员身份运行 VS2012。

我怎样才能让探查器工作？

**更新**

我实际上可以使用以下步骤从命令行附加到项目的运行实例：

[演练：使用采样的命令行分析](http://msdn.microsoft.com/en-us/library/aa985628.aspx)

但是，Visual Studio 不会打开生成的 .vspx 文件（在我使用 File / Open File 打开它之后它什么也不做）。

**更新 2**

当我尝试启动分析器时，Fuslogvw 报告了两个绑定错误：

[VS 2012 Profiler 绑定错误 - Pastebin](http://pastebin.com/16c2FnSa)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-21T19:10:41.257

将以下内容添加到系统路径为我永久解决了这个问题。

```
C:\Program Files (x86)\Microsoft Visual Studio 11.0\Team Tools\Performance Tools 
```

其他一些答案可能适用于其他情况。

请注意，您可能需要以管理员身份运行 Visual Studio 才能使分析正常工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-31T14:45:11.850

我也在这个问题上苦苦挣扎。

我为我找到了一个可行的解决方案：

我使用记事本打开了 XXX.sln 文件。

我在项目和全局部分中发现了几个部分，如下所示：

```
ProjectSection(SolutionItems) = preProject
    Performance1.psess = Performance1.psess
EndProjectSection 
```

我删除了所有这些，这使我的分析器再次工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-19T05:48:15.463

我删除了 .suo 文件，现在一切正常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-22T13:10:14.570

这里也存在同样的问题：

[http://social.msdn.microsoft.com/Forums/en-US/a6487155-980c-4bc8-82de-2fe588fdf37f/windows-update-kb2645410-and-performance-tools-error](http://social.msdn.microsoft.com/Forums/en-US/a6487155-980c-4bc8-82de-2fe588fdf37f/windows-update-kb2645410-and-performance-tools-error)

以下是建议的解决方法：

*   删除 Windows 更新 KB2645410
*   只运行一个 Visual Studio 实例
*   如果您是开发 PC 上的管理员，您可以将权限添加到每个人以读取和执行文件夹“C:\Program Files (x86)\Microsoft Visual Studio 10.0\Team Tools\Performance Tools”和子文件夹/中的所有内容文件。
*   “我备份了所有内容，并使用 Microsoft 的原始磁盘对 Visual Studio 进行了完整修复。这使计算机能够正常关闭。然后我再次尝试了补丁。它再次挂起，但在几次重新启动后，我们收到了一条关于删除损坏的文件，最后一切似乎都正常了。”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-04T17:09:52.633

当我意识到我的用户访问控制设置得太高时，我的问题得到了解决。关闭后，我重新启动，一切正常。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-10-30T18:46:13.857

一旦我卸载了 re-sharper，我的问题就解决了。

# java - Java复选框问题

> ID：13081524
> 
> 赞同：0
> 
> 时间：2012-10-26T05:55:58.173
> 
> 标签：java, checkbox, label, awt

与组一起使用时遇到一些问题`checkbox`。我使用事件操作来获取`checkbox`标签字符串。我正在使用两个组`checkbox`，当我单击第一个`checkbox`时，标签的文本将被更改。但是当我点击第一组`checkbox`时，两个标签都会改变。

这是我的代码：

```
/* <applet code="third.class" width=500 height=500></applet> */

import java.awt.*;
import java.applet.*;
import java.awt.event.*;

public class third extends Applet implements ItemListener
{
private  Label l1,l2;
private Checkbox cb,cbj2;
CheckboxGroup grp = new CheckboxGroup();
CheckboxGroup grp2 = new CheckboxGroup();
public void init()
{

    Checkbox cb1 = new Checkbox("Mango",grp,false);
    Checkbox cb2 = new Checkbox("Apple",grp,false);
    Checkbox cb3 = new Checkbox("Orange",grp,false);

    Checkbox cbj1 = new Checkbox("Male",grp2,false);
    Checkbox cbj2 = new Checkbox("Female",grp2,false);

    FlowLayout f1=new FlowLayout(FlowLayout.LEFT);
    FlowLayout f2=new FlowLayout(FlowLayout.RIGHT);
    FlowLayout f3=new FlowLayout(FlowLayout.CENTER);

    cb1.addItemListener(this);
    cb2.addItemListener(this);
    cb3.addItemListener(this);

    cbj1.addItemListener(this);
    cbj2.addItemListener(this);

    setLayout(f3);
    add(cb1);
    add(cb2);
    add(cb3);

    l1 = new Label("                                                         ");
    add(l1);

    setLayout(f2);
    add(cbj1);
    add(cbj2);              

    l2 = new Label("                                                         ");
    add(l2);
}
public void itemStateChanged(ItemEvent e)
{

    cb=(Checkbox)(e.getItemSelectable());
    l1.setText(cb.getLabel());

    cb2=(Checkbox)(e.getItemSelectable());
    l2.setText(cb2.getLabel());
}   
} 
```

看图在这里！！

[http://img201.imageshack.us/img201/9779/76059549.png](http://img201.imageshack.us/img201/9779/76059549.png)

问题是，当我当时点击第一`checkbox`组时，两个标签字符串都发生了变化。
那么我该如何阻止呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:56:05.553

问题是由于`ItemEvent`对所选复选框项目的比较。
对于每个点击事件，您应该只检查事件的一个源项。
在您的情况下，它将是`cb1`or `cb2`。
但是您正在单击`Female`复选框，但将其标签分配给`cb1`和`cb2`。
因此，两个复选框都带有相同的标签。

应用以下更改并查看其影响。

```
 Checkbox cb = ( Checkbox ) e.getItemSelectable();

  if ( cb.getLabel().equals( "Male" ) ) {
    l1.setText( cb.getLabel() );
  }
  else if ( cb.getLabel().equals( "Female" ) ) {
    l2.setText( cb.getLabel() );
  } 
```

# java - 创建一个包含数据库值的列表并存储在 DTO 中

> ID：13081526
> 
> 赞同：2
> 
> 时间：2012-10-26T05:56:09.290
> 
> 标签：java, database, list, dto

我有一个主类、一个 DTO 和一个 DAO。我想要做的是读取数据库表 CUSTOMER（两个字段 NAME，SURNAME），然后将其写入 txt 文件。我似乎无法让它将值存储在 DTO 中，以便我的主类可以获取它。

我的 DTO 存在两个字段，NAME 和 SURNAME 以及 getter 和 setter。问题在于我的 DAO 与列表

*请记住我是学生。

这是我到目前为止所做的：结果，像这样写入文件：[name surname，name surname，name surname，]我需要它写入文件管道分隔的“|”

```
public CustomerDTO getDetails(Connection conn) throws SQLException {

    CustomerDTO customerDTO = new CustomerDTO();
    ResultSet rs = null;
    PreparedStatement pstmnt = null;

    try {
        // SELECT NAME, SURNAME FROM CUSTOMER
        StringBuffer stringBuffer = new StringBuffer("SELECT " + DBConstants.CUST_NAME + ", ");
        stringBuffer.append(DBConstants.CUST_SURNAME);
        stringBuffer.append(" FROM " + "CUSTOMER");
        //build string
        String query = stringBuffer.toString();
        //prepared statement
        pstmnt = conn.prepareStatement(query);
        //execute preparestatement
        rs = pstmnt.executeQuery();
        //keep reading next line in table - .next() method means next line
        List myList = new ArrayList();

        while (rs.next()) {
            String ss = rs.getString("NAME");
            String sss = rs.getString("SURNAME");
            myList.add(ss + " " + sss);
            customerDTO.setName(myList.toString());
            customerDTO.setSurname(myList.toString());
        }
    } catch (Exception e) {
        e.getMessage();
    }
    rs.close();
    //return DTO with details.
    return customerDTO;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T06:10:00.143

我不确定您在哪里或如何编写此文件，但在跟踪代码时，我认为这可能是错误的。

在这个 WHILE 循环中：

```
while (rs.next()) {
    String ss = rs.getString("NAME");
    String sss = rs.getString("SURNAME");

    // You'r adding an element here that would have a value like this: "John Doe"
    myList.add(ss + " " + sss);

    // Single instance of a DTO whose value. State values will always be replaced with the
    // string represenation of the myList variable.
    //
    // Both properties will always contain the same value no matter what.
    customerDTO.setName(myList.toString());
    customerDTO.setSurname(myList.toString());
} 
```

我认为你真正应该做的是这样的：

```
// Notice the use of Generics (Look it up). It is more compile time safe and better practice.
ArrayList<CustomerDTO> customerDTOS = new ArrayList<CustomerDTO>();
while (rs.next()) {
    String ss = rs.getString("NAME");
    String sss = rs.getString("SURNAME");

    CustomerDTO customerDTO = new CustomerDTO();
    customerDTO.setName(ss);
    customerDTO.setSurName(sss);

    customerDTOS.Add(customerDTO);
}

return customerDTOS; 
```

简而言之，您的方法应该返回一个列表，`CustomerDTOs`然后您可以使用它们写入您的文件。

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T06:11:54.573

该方法应声明为

```
public List<CustomerDTO> getDetails(Connection conn) throws SQLException {
    ...
} 
```

因为它的目标是返回一个客户列表（表中每行一个）。

在该方法中，您应该具有以下内容：

```
// create the result list, initially empty
List<CustomerDTO> result = new ArrayList<CustomerDTO>();

// iterate through the rows
while (rs.next()) {

    // TODO: create a new CustomerDTO, and populate it with the row's data
    // TODO: add this DTO to the result list
}

return result; 
```

然后，此方法的调用者将遍历 CustomerDTO 列表，并将它们写入文件。每个方法都有其职责：DAO 处理数据库检索，但不处理文件 IO。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T06:21:35.217

这是一个完整的例子：

```
public void caller() {
    Connection conn = null;
    // TODO: setup connection
    List list = getDetails(conn);
    for (int i=0; i<list.size(); i++) {
      CustomerDTO dto = list.get(i);
      write(dto.getName(), dto.getSurname());
    }
}

public List getDetails(Connection conn) throws SQLException {

    List myList = new ArrayList();
    ResultSet rs = null;
    PreparedStatement pstmnt = null;

    try {
        // SELECT NAME, SURNAME FROM CUSTOMER
        StringBuffer stringBuffer = new StringBuffer("SELECT " + DBConstants.CUST_NAME     + ", ");
        stringBuffer.append(DBConstants.CUST_SURNAME);
        stringBuffer.append(" FROM " + "CUSTOMER");
        //build string
        String query = stringBuffer.toString();
        //prepared statement
        pstmnt = conn.prepareStatement(query);
        //execute preparestatement
        rs = pstmnt.executeQuery();
        //keep reading next line in table - .next() method means next line

        while (rs.next()) {
            String ss = rs.getString("NAME");
            String sss = rs.getString("SURNAME");
            CustomerDTO customerDTO = new CustomerDTO();
            customerDTO.setName(ss);
            customerDTO.setSurname(sss);
            myList.add(customerDTO);
        }
    } catch (Exception e) {
        e.getMessage();
    }
    rs.close();
    //return list of DTOs.
    return myList;
} 
```

我把 write 方法的实现留给你。还。如果您的 java 允许，请考虑使用泛型。

# java - 在java中的多个空格上拆分字符串

> ID：13081527
> 
> 赞同：37
> 
> 时间：2012-10-26T05:56:12.783
> 
> 标签：java, string, split

> **可能重复：**
> [如何按空格分割字符串](https://stackoverflow.com/questions/7899525/how-to-split-a-string-by-space)

我在解析文本文件时需要帮助。文本文件包含如下数据

```
This is     different type   of file.
Can not split  it    using ' '(white space) 
```

我的问题是单词之间的空格不相似。有时有单个空格，有时给出多个空格。

我需要以这样一种方式拆分字符串，使我只能得到单词，而不是空格。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-10-26T05:58:18.107

`str.split("\\s+")`会工作。正`+`则表达式末尾的 将多个空格视为单个空格。`String[]`它返回一个没有任何`" "`结果的字符串数组 ( )。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-10-26T05:59:05.420

您可以使用[`Quantifiers`](http://docs.oracle.com/javase/tutorial/essential/regex/quant.html)指定要拆分的空格数：-

```
 `+` - Represents 1 or more
    `*` - Represents 0 or more
    `?` - Represents 0 or 1
`{n,m}` - Represents n to m 
```

所以，`\\s+`将你的字符串分割成`one or more`空格

```
String[] words = yourString.split("\\s+"); 
```

此外，如果你想指定一些特定的数字，你可以给出你的范围`{}`：

```
yourString.split("\\s{3,6}"); // Split String on 3 to 6 spaces 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-26T05:58:33.223

使用正则表达式。

```
String[] words = str.split("\\s+"); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-26T06:00:43.813

你可以使用正则表达式模式

```
public static void main(String[] args)
{
    String s="This is     different type   of file.";
    String s1[]=s.split("[ ]+");
    for(int i=0;i<s1.length;i++)
    {
        System.out.println(s1[i]);
    }
} 
```

输出

```
This
is
different
type
of
file. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T06:23:25.113

如果你不想使用 split 方法，我给你另一种方法来标记你的字符串。这是方法

```
public static void main(String args[]) throws Exception
{
    String str="This is     different type   of file.Can not split  it    using ' '(white space)";
    StringTokenizer st = new StringTokenizer(str, " "); 
    while(st.hasMoreElements())
    System.out.println(st.nextToken());
}
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-26T06:00:20.473

您可以使用
String 类的 replaceAll(String regex, String replacement) 方法将多个空格替换为空格，然后您可以使用 split 方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-26T06:15:54.177

```
String spliter="\\s+";
String[] temp;
temp=mystring.split(spliter); 
```

# android - startActivityForResult 调用窗口在结果返回之前被杀死

> ID：13081528
> 
> 赞同：4
> 
> 时间：2012-10-26T05:56:17.187
> 
> 标签：android

我有一个尝试添加小部件的启动器应用程序。大多数工作正常，但如果您有配置屏幕，则永远不会添加小部件。启动器调用

```
REQUEST_PICK_APPWIDGET = 9
Intent pickIntent = new Intent(AppWidgetManager.ACTION_APPWIDGET_PICK);
pickIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
startActivityForResult(pickIntent, REQUEST_PICK_APPWIDGET); 
```

并启动了配置活动，但是随着它的出现，我在笑笑中看到了这一点

```
W/WindowManager( 2096): Rebuild removed 7 windows but added 6
    W/WindowManager( 2096): This window was lost: Window{42abf130 com.android.settings/com.android.settings.AppWidgetPickActivity paused=false} 
```

配置完成并且没有任何反应，因为 appwidgetpicker 已经死了。

启动器实际上从来没有崩溃过，从来没有发生过任何不好的事情，只是什么也没发生。崩溃的不是应用程序本身，而是systemappwindgetpicker afaik。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T18:01:27.480

我真的不知道问题是什么，但是这些线程之一可能对您有所帮助：

[发生 ANR 时选择 OK 以重新启动 Launcher 时删除事件](https://stackoverflow.com/questions/12365043/drop-event-when-select-ok-to-restart-launcher-when-anr-occurs)

[Android - 多级活动链的问题](https://stackoverflow.com/questions/7789244/android-problems-with-a-multi-level-activity-chain)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T21:07:45.083

[https://github.com/T3hh4xx0r/Hax-Launcher/commit/4b6d2d99fdef0ded0684688a2ac5ddeb2faa9f1d](https://github.com/T3hh4xx0r/Hax-Launcher/commit/4b6d2d99fdef0ded0684688a2ac5ddeb2faa9f1d)

沿着这条线的某个地方，一个变量被取消了。我刚刚创建了一个备份，基本上是为了防止这种情况发生。

# python - 从 Flask 视图返回 JSON 响应

> ID：13081532
> 
> 赞同：616
> 
> 时间：2012-10-26T05:56:47.250
> 
> 标签：python, json, flask

我有一个函数可以使用 Pandas 分析 CSV 文件并生成带有摘要信息的字典。我想将结果作为 Flask 视图的响应返回。如何返回 JSON 响应？

```
@app.route("/summary")
def summary():
    d = make_summary()
    # send it back as json 
```

* * *

## 回答 #1

> 赞同：937
> 
> 时间：2012-10-26T15:33:57.280

从 Flask 1.1.0 开始，视图可以直接返回 Python dict，Flask 会[`jsonify`](https://flask.palletsprojects.com/api/#flask.json.jsonify)自动调用。

```
@app.route("/summary")
def summary():
    d = make_summary()
    return d 
```

如果您的 Flask 版本小于 1.1.0 或返回不同的 JSON 可序列化对象，请导入并使用[`jsonify`](https://flask.palletsprojects.com/api/#flask.json.jsonify).

```
from flask import jsonify

@app.route("/summary")
def summary():
    d = make_summary()
    return jsonify(d) 
```

* * *

## 回答 #2

> 赞同：268
> 
> 时间：2014-11-16T20:16:47.473

`jsonify`将您传递给 JSON 的数据序列化。如果您想自己序列化数据，请使用and`jsonify`构建响应来执行此操作。`status=200``mimetype='application/json'`

```
from flask import json

@app.route('/summary')
def summary():
    data = make_summary()
    response = app.response_class(
        response=json.dumps(data),
        status=200,
        mimetype='application/json'
    )
    return response 
```

* * *

## 回答 #3

> 赞同：147
> 
> 时间：2012-10-26T06:11:55.313

将关键字参数传递给[`flask.jsonify`](http://flask.pocoo.org/docs/latest/api/#flask.json.jsonify)，它们将作为 JSON 对象输出。

```
@app.route('/_get_current_user')
def get_current_user():
    return jsonify(
        username=g.user.username,
        email=g.user.email,
        id=g.user.id
    ) 
```

```
{
    "username": "admin",
    "email": "admin@localhost",
    "id": 42
} 
```

如果你已经有一个 dict，你可以直接将它作为`jsonify(d)`.

* * *

## 回答 #4

> 赞同：45
> 
> 时间：2018-01-23T19:54:04.117

如果您由于某种原因不想使用`jsonify`，您可以手动执行它的操作。调用`flask.json.dumps`以创建 JSON 数据，然后返回具有`application/json`内容类型的响应。

```
from flask import json

@app.route('/summary')
def summary():
    data = make_summary()
    response = app.response_class(
        response=json.dumps(data),
        mimetype='application/json'
    )
    return response 
```

`flask.json`与内置`json`模块不同。如果可用，它将使用更快的`simplejson`模块，并启用与您的 Flask 应用程序的各种集成。

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2019-05-22T22:02:22.480

要返回 JSON 响应并设置状态代码，您可以使用`make_response`：

```
from flask import jsonify, make_response

@app.route('/summary')
def summary():
    d = make_summary()
    return make_response(jsonify(d), 200) 
```

灵感来自 Flask 问题跟踪器中的此[评论](https://github.com/pallets/flask/issues/478#issuecomment-166723852)。

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2019-11-18T15:18:13.333

从版本 1.1.0 Flask 开始，[如果视图返回一个 dict ，它将被转换为 JSON response](https://flask.palletsprojects.com/en/1.1.x/quickstart/#apis-with-json)。

```
@app.route("/users", methods=['GET'])
def get_user():
    return {
        "user": "John Doe",
    } 
```

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2013-12-05T16:44:35.217

如果你想分析用户上传的文件，Flask[快速入门](http://flask.pocoo.org/docs/quickstart/)展示了如何从用户那里获取文件并访问它们。从中获取文件`request.files`并将其传递给摘要函数。

```
from flask import request, jsonify
from werkzeug import secure_filename

@app.route('/summary', methods=['GET', 'POST'])
def summary():
    if request.method == 'POST':
        csv = request.files['data']
        return jsonify(
            summary=make_summary(csv),
            csv_name=secure_filename(csv.filename)
        )

    return render_template('submit_data.html') 
```

`'data'`将for 的键替换为`request.files`HTML 表单中输入的文件名。

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2020-05-14T08:32:56.537

Flask 1.1.x 支持在不调用`jsonify`. 如果你想返回一个字典以外的东西，你仍然需要调用`jsonify`.

```
@app.route("/")
def index():
    return {
        "api_stuff": "values",
    } 
```

相当于

```
@app.route("/")
def index():
    return jsonify({
        "api_stuff": "values",
    }) 
```

请参阅添加此内容的拉取请求：[https ://github.com/pallets/flask/pull/3111](https://github.com/pallets/flask/pull/3111)

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2016-06-10T13:37:31.097

我使用装饰器返回`jsonfiy`. 我认为当一个视图有多个返回时它更具可读性。这不支持返回像 一样的元组`content, status`，但我用它来处理返回错误状态`app.errorhandler`。

```
import functools
from flask import jsonify

def return_json(f):
    @functools.wraps(f)
    def inner(**kwargs):
        return jsonify(f(**kwargs))

    return inner

@app.route('/test/<arg>')
@return_json
def test(arg):
    if arg == 'list':
        return [1, 2, 3]
    elif arg == 'dict':
        return {'a': 1, 'b': 2}
    elif arg == 'bool':
        return True
    return 'none of them' 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2016-06-26T15:42:58.877

在 Flask 0.11 之前，`jsonfiy`不允许直接返回数组。相反，将列表作为关键字参数传递。

```
@app.route('/get_records')
def get_records():
    results = [
        {
          "rec_create_date": "12 Jun 2016",
          "rec_dietary_info": "nothing",
          "rec_dob": "01 Apr 1988",
          "rec_first_name": "New",
          "rec_last_name": "Guy",
        },
        {
          "rec_create_date": "1 Apr 2016",
          "rec_dietary_info": "Nut allergy",
          "rec_dob": "01 Feb 1988",
          "rec_first_name": "Old",
          "rec_last_name": "Guy",
        },
    ]
    return jsonify(results=list) 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2020-01-03T14:37:43.230

在 Flask 1.1 中，如果你返回一个字典，它会自动转换成 JSON。所以如果`make_summary()`返回一个字典，你可以

```
from flask import Flask

app = Flask(__name__)

@app.route('/summary')
def summary():
    d = make_summary()
    return d 
```

[询问包含状态代码](https://stackoverflow.com/questions/45412228/flask-sending-data-and-status-code-through-a-response-object/45412576)的SO已作为副本关闭。因此，为了回答这个问题，您可以通过返回表单的元组来包含状态代码`(dict, int)`。将`dict`转换为 JSON，并且`int`将是 HTTP 状态代码。在没有任何输入的情况下，Status 是默认的 200。因此在上面的示例中，代码将为 200。在下面的示例中，它更改为 201。

```
from flask import Flask

app = Flask(__name__)

@app.route('/summary')
def summary():
    d = make_summary()
    return d, 201  # 200 is the default 
```

您可以使用检查状态代码

```
curl --request GET "http://127.0.0.1:5000/summary" -w "\ncode: %{http_code}\n\n" 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-12-03T14:15:15.943

如果它是一个字典，flask 可以直接返回它（版本 1.0.2）

```
def summary():
    d = make_summary()
    return d, 200 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-10-24T11:40:41.173

使用 Flask 的基于类的视图时，答案是一样的。

```
from flask import Flask, request, jsonify
from flask.views import MethodView

app = Flask(__name__)

class Summary(MethodView):
    def get(self):
        d = make_summary()
        return jsonify(d)

app.add_url_rule('/summary/', view_func=Summary.as_view('summary')) 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-11-12T10:49:35.727

要序列化对象，请使用`jsonify`from`flask`模块对对象进行 jsonify，默认情况下会序列化字典。此外，如果您正在处理文件，您可以随时使用`make_response`.

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2020-09-16T13:58:58.930

我喜欢这种方式：

```
 @app.route("/summary")
    def summary():
        responseBody = { "message": "bla bla bla", "summary": make_summary() }
        return make_response(jsonify(responseBody), 200) 
```

# c++ - 为什么 getline() 在我的小实验中不起作用？

> ID：13081533
> 
> 赞同：-1
> 
> 时间：2012-10-26T05:56:56.590
> 
> 标签：c++, string, input, lambda, getline

```
 //////////////////////////////////////////////////////////////////
    // Capture a lambda with a lambda and use it in the lambda it's //
    // captured in along with some code in the lambda that captures //
    // it.                                                          //
    //                                                              //
    // Add to that to capture a variable in the client and use that //
    // too.                                                         //
    //                                                              //
    // Then make a lambda that captures a class object and calls    //
    // some method or methods with it, optionally modifies the re-  //
    // sult...                                                      //
    //////////////////////////////////////////////////////////////////

    //////////////////////////////////////////////////////////////////
    // Note: std::function<type(type)> f;                           //
    // f = <define lambda here>                                     //
    // f() //calls lambda                                           //
    //////////////////////////////////////////////////////////////////

    #include <functional>
    #include <iostream>
    #include <string>
    using std::cin;
    using std::cout;
    using std::endl;
    using std::function;
    using std::getline;
    using std::string;

    class Experimental {
       private:
          int x;
          string s;
       public:
          Experimental() {}
          ~Experimental() {}
          void set_x(int new_x);
          int get_x();
          void set_s(string s_in);
          string get_s();
    };

    void Experimental::set_x(int new_x) {
       x = new_x;
    }

    int Experimental::get_x() {
       return (x);
    }

    void Experimental::set_s(string s_in) {
       s = s_in;
    }

    string Experimental::get_s() {
       return s;
    }

    int main() {
       double n;
       string input;
       Experimental* experiment = new Experimental();

       cout << "Enter a number: ";
       cin >> n;

       function<double(double)> f;
       f = [&f](double k) {
          return (k ? k * f(k-1) : 1);
       };

       function<double(double)> g;
       g = [&f,n](double m) {
          return (f(n)/n);
       };

       function<int()> T1; //capture a class and do stuff...
       T1 = [&experiment,n]() {
          experiment->set_x(13 + n);
          int m = experiment->get_x();
          return (m);
       };

       function<string(string)> T2; //capture a class and do stuff...
       T2 = [&experiment](const string in) {
          experiment->set_s(in);
          string s = experiment->get_s();
          return (s);
       };

       cout << "The factorial of " << n << " is: ";
       cout << f(n) << endl;

       cout << "The factorial of " << n << " divided by " << n << " is: ";
       cout << g(n) << endl;

       cout << "The new value of x in experiment is: ";
       cout << T1() << endl;

       cout << "Enter a string: ";
       getline(cin, input); //FIXME
    cout << "input is: " << input << "<-" << endl;

       cout << "The new string in experiment is: ";
       cout << T2(input) << endl;
       delete experiment;

       return (0);
    } 
```

我知道这很丑。没有真正使用 lambda，因为我最初在这里进行实验时应该使用它们。出于某种原因，我没有得到我的字符串变量的输入，我也不知道为什么。有人可以帮助/指出问题所在吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T06:09:44.713

问题是您`getline`正在读取缓冲区中剩下的行尾：

```
cin >> n; 
```

通过使用来解决这个问题[`ignore`](http://en.cppreference.com/w/cpp/io/basic_istream/ignore)：

```
#include <limits>
...
  cin >> n;
  ...
  cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
  getline(cin, input); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T06:11:17.020

这是一个很常见的错误，基本上你有

```
cin >> number;
getline(cin, str); 
```

现在想想这个（你看起来是一个很好的程序员，所以我只是给你一个线索）。一个数字中包含多少个换行符？`cin >> number;`实际会读取多少个换行符？

# java - play.data.Form.Field 到 play.data.Form[models.xxxx] 可以吗？

> ID：13081534
> 
> 赞同：2
> 
> 时间：2012-10-26T05:57:28.477
> 
> 标签：java, scala, playframework, playframework-2.0

我正在使用 PlayFramwork 和 Java 的 Web 应用程序中工作。我正在尝试在主视图中实现一个简单的表单，但在这个视图中我添加了不同的模板。将参数传递给视图时遇到了一些问题。错误是：

> 类型不匹配; 找到：play.data.Form.Field 需要：play.data.Form[models.Document]

让我用代码解释一下。

showUserView.scala.html 的内容/主视图

```
@(user: Form[User])

@import helper._
@import helper.twitterBootstrap._

@main("Test") {

<H1>SHOW USER</H1>

    @newUserView(user)

    @documentView(user("document"))

} 
```

问题出在这一行：

`@documentView(user("document"))`

newUserView.scala.html 的内容/这工作正常

```
@(user: Form[User])

@import helper._
@import helper.twitterBootstrap._

<H2>User's Form</H2>

@inputText(
    user("name"), 
    '_label -> "Name: "
) 
```

documentView.scala.html 的内容/这是问题所在...

```
@(doc: Form[Document])

@import helper._
@import helper.twitterBootstrap._

<H2>Document's Form</H2>

    @inputText(
        doc("number"), 
        '_label -> "Number: "
    ) 
```

我正在准备视图以接收没有字段的表单...我不想更改参数的类型。我会保留原始模板。

有什么想法吗？如何将 Field 参数转换为 Form[Document]？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-10T15:20:10.570

我将表单参数更改为 Field 参数，结果是文档视图：

```
@(document : Field)

@import helper._
@import helper.twitterBootstrap._

<H2>Document type view!</H2>

@inputText(
   document("number"), 
   '_label -> "Number:"
) 
```

showUserView.scala.html 的内容/主视图

```
@(user: Form[User])

@import helper._
@import helper.twitterBootstrap._

@main("Test") {

<H1>SHOW USER</H1>

@newUserView(user)

@documentView(user("user.document"))

} 
```

在控制器中，我正在构建表单：

```
Form<User> userForm = form("user", User.class); 
```

这对我来说是一个好方法，我关心模型并与其他视图脱钩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T09:45:59.973

您需要在控制器中创建并填充两个模型，然后`showUserView.scala.html`分别传递给您的主视图 ( )：

```
@(userForm: Form[User], documentForm: Form[Document])
@import helper._
@import helper.twitterBootstrap._

@main("Test") {
    <H1>SHOW USER</H1>
    @newUserView(userForm)
    @documentView(documentForm)
} 
```

### 反正...

据我了解，您想`Document's`在填充的上下文中编辑某些字段，`User`在这种情况下，您应该为两个子视图仅使用一个表单（用户），然后在您的操作中保存/更新数据，通过隐藏 ID 查找相关文档：

```
@(userForm: Form[User])
@import helper._
@import helper.twitterBootstrap._

@main("Test") {
    <H1>SHOW USER</H1>
    @newUserView(userForm)
    @documentView(userForm)
} 
```

在`documentView.scala.html`

```
@(userForm: Form[User])
@import helper._
@import helper.twitterBootstrap._

<H2>Documents Form</H2>
<input type="hidden" name="document.id" value='@userForm("document.id").value' >
@inputText(
   userForm("document.number"), 
   '_label -> "Number: "
) 
```

因此，在保存用户时，您可以在请求中找到文档的 ID 和新编号，并使用这些数据更新文档：

```
public static result saveUserAndDoc(){
    // save user as usually by binding the form...

    Integer documentId = Integer.valueOf(form().bindFromRequest().get("document.id"));

    Document document = Document.find.byId(documentId);
    document.number = Integer.valueOf(form().bindFromRequest().get("document.number"));
    document.update(documentId);
    return ok("User saved with changed document number);
} 
```

当然，该样本不包含`<form></form>`标签 - 只是字段 - 您需要在适当的地方添加

# iphone - xcode 4.5.1 中的 uinavigationcontroller 警告

> ID：13081536
> 
> 赞同：0
> 
> 时间：2012-10-26T05:57:37.727
> 
> 标签：iphone, ios, xcode4.5

我在 xcode-4.2 中进行了编码，在更新 xcode-4.5.1 后，我的应用程序运行良好，同时单击窗口导航它显示以下错误。

```
Warning: Attempt to present <learnview: 0x8876220> on <UINavigationController: 0x8866e10> whose view is not in the window hierarchy! 
```

我将函数从 viewdidload() 更改为 viewdidappear() 仍然显示相同的错误？请帮我解决

编辑：

```
 -(void)goright
   {
    CATransition* transition = [CATransition animation];
    transition.duration = 1.5;
   transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut];
    transition.type = kCATransitionPush;
    learnview *lview=[[learnview alloc]initWithNibName:@"learnview" bundle:nil];
    transition.subtype = kCATransitionFromRight; //kCATransitionFromLeft, kCATransitionFromRight, kCATransitionFromTop, kCATransitionFromBottom
    [self.navigationController.view.layer addAnimation:transition forKey:nil];
   [[self navigationController] pushViewController:lview animated:NO];

    [imagetim invalidate];    
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:17:37.040

`viewWillAppear:`在或中调用此方法`viewDidAppear:`

用动画试试下面的代码......

```
-(void)goright
{
    CATransition *animation = [CATransition animation];
    [animation setDelegate:self];   
    [animation setType:kCATransitionPush];
    [animation setDuration:1.5];
    [animation setTimingFunction:[CAMediaTimingFunction functionWithName:
                                  kCAMediaTimingFunctionEaseInEaseOut]];
    [animation setSubtype:kCATransitionFromRight];
    [[self.view layer] addAnimation:animation forKey:@"transitionViewAnimation"];

    learnview *lview=[[learnview alloc]initWithNibName:@"learnview" bundle:nil];
    [[self navigationController] pushViewController:lview animated:NO];

    [imagetim invalidate];    
} 
```

没有动画试试下面的代码......

```
-(void)goright
    {

        learnview *lview=[[learnview alloc]initWithNibName:@"learnview" bundle:nil];

        [self.navigationController pushViewController:lview animated:YES];

        [imagetim invalidate];    
    } 
```

尝试这个

# c - 如何手动替换 C 中字符串中的最后一个匹配项？

> ID：13081537
> 
> 赞同：3
> 
> 时间：2012-10-26T05:57:40.420
> 
> 标签：c, str-replace

我正在为我的 C 期中学习一些基本功能，我意识到我错误地抄下了导师的示例。我现在可能太累了，无法思考这个问题，如果能稍微推动一下，将不胜感激。

```
void replace_last(char s[], int oldc, int newc){
    size_t i, pos-1; /* I have no idea why I wrote pos-1\. I know I need it though */
        for(i = 0; s[i] != '\0'; i++){
             if(s[i] == oldc)
                 pos == i;
             if(pos != -1)
                 s[pos] = newc;
         }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T06:03:29.867

在 Ist if 语句中你正在做`pos==i`的应该是`pos=i`

因为`pos==i`是条件语句并且`pos = i`是赋值

```
void replace_last(char s[], int oldc, int newc){
    size_t i, pos=-1; /* I have no idea why I wrote pos-1\. I know I need it though */
        for(i = 0; s[i] != '\0'; i++){
             if(s[i] == oldc)
                 pos = i;
             if(pos != -1)
                 s[pos] = newc;
         }
} 
```

我认为你想通过找到的位置然后在你正在做的同一迭代中更改 and 的值来`oldc`替换，这将替换为`newc``oldc``pos``s[pos]=new``oldc``newc`

代码现在很好..您可以运行它或空运行并检查它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T06:08:19.480

行号：5 `pos==i`应替换为`pos=i`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T06:04:35.627

```
void replace_last(char s[], int oldc, int newc){
   size_t i, pos = -1;
   for(i = 0; s[i]; i++)
      if(s[i] == oldc)
         pos = i;
   if(pos != -1)
      s[pos] = newc;
} 
```

所以你复制的代码有三个问题：`pos-1`, `pos == i`，第三，逻辑`if(pos != -1) s[pos] = newc;`需要在循环*之外。*

**编辑：**只是为了完善答案，这样做的“非手动”方式将是，例如：

```
void replace_last(char s[], int oldc, int newc) {
   if (strrchr(s, oldc))
      *strrchr(s, oldc) = newc;
} 
```

（如果您愿意，可以将 of 的返回值保存`strrchr()`在一个临时指针中，以避免第二次调用，`strrchr(),`但这可能是不必要的：gcc with`-O1`会自动为您执行此操作。）

# iphone - 在 UIWebView 上标记单词/段落/页面

> ID：13081542
> 
> 赞同：0
> 
> 时间：2012-10-26T05:57:59.050
> 
> 标签：iphone, ios, xcode, ipad, uiwebview

我正在为 iPad 创建一个电子阅读器应用程序。我有一系列将在 UIWebView 上显示的本地 XHTML 文件。这些 XHTML 文件将成为一本书的章节，并具有为读者**添加书签的功能。**读者应该能够通过单击（或可以传达给用户的任何其他手势）该特定文本和书签图标图像应该出现在该文本行上（或在那之后）。

这个书签的一个扩展功能是这个书签图像是可点击的，然后用户可以导航到讨论等，但是一旦我能够将书签图标图像放在选定的文本上，这应该很容易。

我已经想到了一些方法，但在 UIWebView 上似乎没有一种方法是可行的。我也是 iPhone 编程的新手。任何帮助将非常感激！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T04:30:58.867

您可以使用 JavaScript 完成这些工作。如果这些 XHTML 文件不属于您，您可以使用`- (NSString *)stringByEvaluatingJavaScriptFromString:(NSString *)script`的方法`UIWebView`加载外部脚本。

# c# - WNetAddConection2() -Unicode

> ID：13081550
> 
> 赞同：0
> 
> 时间：2012-10-26T05:58:47.093
> 
> 标签：c#, unicode

我有一个可以访问网络内共享驱动器的应用程序。使用 P-Invoke **WNetAddConection2()** Win API 实现了相同的功能。在我们在应用程序中引入 Unicode 支持之前，一切都运行良好，现在每当我们提供包含一些 Unicode 字符的共享路径时，应用程序都会失败，例如：

```
 Input 1:   \\domain\shared-folder : this works fine
        Input 2:   \\domain\    : this fails, the method return an error 
```

我们是否有任何替代支持 Unicode 的 WNetAddConection2() 的方法，我已经尝试将给定的路径编码为 path.encode('UTF16') 但它不起作用。我们使用 c# 作为编程语言。

# javascript - Javascript - 需要目标代码

> ID：13081559
> 
> 赞同：1
> 
> 时间：2012-10-26T05:59:27.150
> 
> 标签：javascript

我们的 JavaScript 代码是：

```
<script type="text/javascript" src="http://hosted.musesradioplayer.com/mrp.js"></script>
<script type="text/javascript">
MRP.insert({
'url':'http://streams.museter.com:8002/;',
'codec':'mp3',
'volume':65,
'autoplay':true,
'buffering':5,
'title':'Radio%20Vermont',
'welcome':'WELCOME TO...',
'bgcolor':'FFFFFF',
'skin':'mcclean',
'width':180,
'height':60
});
</script> 
```

此代码在 IE 上显示错误消息。错误消息“需要对象代码”。如何解决这个问题？有谁知道？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-05T22:19:47.370

如果您使用的 IE 版本不支持 HTML5（IE8 或更早版本），则 muses 广播播放器需要 Flash 对象解决方案。您可以从缪斯网站[http://www.musesradioplayer.com/setup](http://www.musesradioplayer.com/setup)获得此信息。如果您使用的是 IE9 或更新版本，它应该支持 HTML5 解决方案。

# android - GridView 项目在 Eclipse 中看起来不错，但在设备和模拟器上变形

> ID：13081563
> 
> 赞同：0
> 
> 时间：2012-10-26T05:59:59.557
> 
> 标签：android, android-layout, android-gridview

我创建了一个 GridView 项目，该项目由一个带有一些元数据的 ImageView 组成。当我在 Eclipse 中预览定义的布局（图形布局）时，它看起来很棒，但是当我在设备和我的模拟器上测试它时会出现一些古怪的行为。

game_photos_grid_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/game_list_item"
    android:layout_width="95dp"
    android:orientation="vertical"
    android:layout_height="105dp" >

        <ImageView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scaleType="fitCenter"
        android:padding="2dp"
        android:src="@drawable/ic_contact_picture" />

    <ImageView
        android:id="@+id/photos_grid_item_image"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scaleType="fitCenter"
        android:padding="2dp"
        android:visibility="gone"
        android:src="@drawable/ic_contact_picture" />

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="right"
        android:padding="2dp"
        android:paddingLeft="5dp"
        android:paddingRight="5dp" >

        <ImageView
            android:id="@+id/item_marker"
            android:layout_width="25dp"
            android:layout_height="60dp"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:src="@drawable/x_pointer" />

        <TextView
            android:id="@+id/total_rating"
            android:layout_width="fill_parent"
            android:layout_height="40dp"
            android:layout_alignParentBottom="true"
            android:alpha="1.0"
            android:background="#80000000"
            android:gravity="right"
            android:text="1346"
            android:textColor="#FFFFFF"
            android:textSize="25sp"
            android:textStyle="bold" />
    </RelativeLayout>
</RelativeLayout> 
```

GridView 父级

```
 <GridView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/gridview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#00698C"
    android:gravity="center"
    android:columnWidth="95dp"
    android:horizontalSpacing="3dp"
    android:numColumns="auto_fit"
    android:stretchMode="columnWidth"
    android:verticalSpacing="3dp"
    android:visibility="visible" /> 
```

它在 Eclipse 中的外观。

![在此处输入图像描述](../Images/7bdcdf14d4d8c155dc503cf7bd26f445.png)

它在设备/AVD 上的外观。

![在此处输入图像描述](../Images/28bb7b9882d3c581a3877c03f28c2f18.png)

是什么导致视图中断/扭曲？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T07:37:15.743

使用特定的宽度和高度值`Views`不是一个好习惯，而是尝试使用`match_parent`and来限制自己`wrap_content`，它们几乎足以满足所有需求。使用这些常量将确保您的布局在每台设备上都符合预期。希望这可以帮助。

# android - 如何使用适用于 android 的 Microsoft Translation API？

> ID：13081564
> 
> 赞同：2
> 
> 时间：2012-10-26T06:00:00.540
> 
> 标签：android, microsoft-translator

好的，我的问题是如何使用微软翻译 API for android？我的问题是我正在创建一个 android 应用程序，该应用程序将从一个 EditText 获取输入，当按下一个名为 Translate 的按钮时，它将将该文本翻译成另一种语言，然后将翻译后的文本设置为另一个 EditText ...我有写了一些代码，你能告诉我那个代码有什么问题吗，因为它根本不起作用，它没有接受输入，因此没有产生输出......谢谢......

```
package kalex.globaltranslate;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

import com.memetix.mst.language.Language;
import com.memetix.mst.translate.Translate;

public class TranslateActivity extends Activity implements OnClickListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        Translate.setClientId("MY ID");
        Translate.setClientSecret("MY SECRET KEY");
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_translate);
        Button Trans = (Button)findViewById(R.id.translate);
        Trans.setOnClickListener(this);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_translate, menu);
        return true;
    }

    public void onClick(View v) {   
        //get the text entered
        EditText Input = (EditText)findViewById(R.id.input);
        EditText Output = (EditText)findViewById(R.id.output);

                String In =Input.getText().toString();
                //String Out;
                try {
                    String Out = Translate.execute(In, Language.AUTO_DETECT, Language.FRENCH);

                Input.setText(Out);
                Output.setText(Out);
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T06:19:57.157

首先，您可能想阅读更多有关 Java 编程的一般信息。

您的对象实例应使用小写字母命名。例如`EditText Input`应该是`EditText input`.

我建议你重新组织你的程序，通过移动

```
EditText Input = (EditText)findViewById(R.id.input);
EditText Output = (EditText)findViewById(R.id.output); 
```

一开始，在“Trans”实例化之后。然后为这些对象创建全局变量，以便您可以在 OnClick 事件中访问它们。

您的 onClick 方法不会检查传递的视图的 id，您可能会像这样在脚上开枪。为所有具有侦听器的视图创建一个带有 case 的 switch 语句是很常见的。或者 - 您还可以为所有元素使用专用的 ClickListener（效率较低，但仍然系统化）：

```
private OnClickListener translateClick = new OnClickListener() {

            @Override
            public void onClick(View v) {
                    // TODO
            }
        }; 
```

并将其设置为您的翻译按钮 - trans.setOnClickListener(translateClick);

# javascript - 单击单元格，然后仅在单元格下被选中我该怎么办

> ID：13081576
> 
> 赞同：2
> 
> 时间：2012-10-26T06:00:55.623
> 
> 标签：javascript, jquery, jquery-selectors

[小提琴](http://jsfiddle.net/2sjaZ/9/)

我想将鼠标拖到单元格上，然后选择单元格下的任何内容。只有它下面的单元格被选中。如果用户以之字形方式移动鼠标，则不会发生选择。我怎样才能做到这一点。

![在此处输入图像描述](../Images/427deb836c01e3788f7571990dbaa06d.png)

```
$(".csstablelisttd").live('mousedown', function (e){    

    //This line gets the index of the first clicked row.
    lastRow = $(this).closest("tr")[0].rowIndex;
    rowIndex = $(this).closest("tr").index();
    colIndex = $(e.target).closest('td').index();      

    $(".csstdhighlight").removeClass("csstdhighlight");
    $('#tableAppointment tr').eq(rowIndex).find('td').eq(colIndex).addClass('csstdhighlight');
    flag = true;
    return false;
});

document.onmousemove = function () { return false; };

$(".csstablelisttd").live('mouseenter', function (e){

    // Compares with the last and next row index.
    currentRow = $(this).closest("tr")[0].rowIndex;
    currentColoumn = $(e.target).closest('td').index();

    if (lastRow == currentRow || lastRow == currentRow - 1 || lastRow == currentRow + 1){
        lastRow = $(this).closest("tr")[0].rowIndex;
    }else{
        return;
    }

    if (flag){
        $('#tableAppointment tr').eq(currentRow ).find('td').eq(currentColoumn  ).addClass('csstdhighlight');
        e.preventDefault();
        flag = false;
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T07:51:51.797

给你：http: [//jsfiddle.net/EAETy/](http://jsfiddle.net/EAETy/)。我已经收紧了逻辑/代码。希望这对您有所帮助和/或给您一些建议。

```
 var currentColumn, 
        currentRow, 
        flag = false, 
        maxSlots = 3
        $table = $("#tableAppointment");

    document.onmouseup = function () { flag = false; };

    //helper function instead of alerts
    var flashColor = function(element){
       element.addClass('red');
        setTimeout(function(){
            element.removeClass('red');
        },300);
    };

    $table.on('mousedown', 'td', function(e) {

        //store jquery this reference since we use it multiple times
        var $td = $(this);

        //set current row and column
        currentColumn = $td.index();
        currentRow = $td.parent().index();

        //are there unclickable columns and rows?
        if (currentColumn < 2 || currentRow < 1) {
            flashColor($td);    
            return false;
        }
        //remove old highlight if any 
        //(find it faster by adding the $table[0] context)
        $(".csstdhighlight",$table[0]).removeClass('csstdhighlight');

        //add new highlight
        $td.addClass('csstdhighlight');

        //set mousedown flag
        flag = true;

        //prevent text highlighting while dragging
        return false;
    });

    $table.on('mouseenter', 'td', function(e) {

        //no need to do stuff here if user hasn't moused down                
        if (!flag) return false;

        //get row and column for this mouseenter event
        var $td = $(this), 
            $row = $td.parent(), 
            rowIndex = $row.index(), 
            colIndex = $td.index();

        //don't let mouse cross columns
        //or skip rows (from too fast mouse movement)
        if(colIndex !== currentColumn 
           || !$row[rowIndex>currentRow ? "prev" : "next"]().children('.csstdhighlight').length) {  
           flag = false;
           return false;        
        } 

        //add new highlight    
        $td.addClass('csstdhighlight');

        //stop after 3 highlights
        if ($(".csstdhighlight", $table[0]).length >= maxSlots) {
            flashColor($(".csstdhighlight", $table[0]));        
            flag = false;
        }

    });​ 
```

# python - PDFFileReader 在使用后没有关闭 pdf

> ID：13081585
> 
> 赞同：1
> 
> 时间：2012-10-26T06:01:58.547
> 
> 标签：python, pdf, pypdf, win64

> **可能重复：**
> [如何关闭 pyPDF “PdfFileReader” 类文件句柄](https://stackoverflow.com/questions/4422297/how-to-close-pypdf-pdffilereader-class-file-handle)

我在 Win 64bit 上运行 Python 2.7。我正在尝试将pdf下载到文件，打开pdf，提取文本，然后最后删除pdf，但是当我尝试删除python时出现错误（使用python代码并手动尝试删除pdf - windows 说该文件正在被 pythonw 使用）。我的简化代码：

```
from PyPDF2 import PdfFileReader

pdf_url = "www.Url for.pdf"

file_path = 'myfile.pdf'
f = file(file_path, 'wb')
f.write(urllib2.urlopen(pdf_url).read())
f.close()

pdf = PdfFileReader(open(file_path, 'rb'))

os.remove(file_path) 
```

返回错误：

```
WindowsError: [Error 32] The process cannot access the file because it is 
being used by another process: 'myfile.pdf' 
```

有什么建议么？

# php - Yii : 如何从 excel 中选择工作表？

> ID：13081588
> 
> 赞同：0
> 
> 时间：2012-10-26T06:02:12.917
> 
> 标签：php, excel, yii

问：如何从excel中选择一张表？

状态：我想要来自 xls/xlsx 文件的数据。现在，我正在通过这个[网站](http://hafiznor.wordpress.com/2011/07/04/yii-read-excel-file-xlsx-format/)关注。我在一个 excel 文件中有 3 张纸（G、H、I）。我在 PHPExcel 类中找到了 getSheetByName()。当我尝试通过

```
$objWorksheet = $objPHPExcel->getSheetByName('I'); 
```

它给了我一个错误

> 致命错误：在非对象上调用成员函数 getHighestRow()

如果我设置“G”（“G”是 excel 的第一张纸），它工作正常。

感谢您的任何建议。

# java - 在 Java 中执行一系列 sql 查询。可能吗？

> ID：13081592
> 
> 赞同：0
> 
> 时间：2012-10-26T06:02:37.207
> 
> 标签：java, sql, jdbc

当我们在 Java 中动态创建 SQL 字符串时，是否可以创建要一个接一个执行的查询？例如`query1;query2`？
我的问题是在代码`OpenJPA`中用于访问数据库并且在创建 SQL 的地方`String`我希望在此之前运行另一个 SQL 查询

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:07:40.453

这不是开箱即用的，但是您应该可以`allowMultiQueries`在连接字符串中进行设置。临时表应该一直存在，直到连接关闭。最好使用单独的语句。

[http://dev.mysql.com/doc/refman/5.5/en/connector-j-reference-configuration-properties.html](http://dev.mysql.com/doc/refman/5.5/en/connector-j-reference-configuration-properties.html)

# replace - 查找和替换 *.txt 文件生成器？基于网络？

> ID：13081594
> 
> 赞同：0
> 
> 时间：2012-10-26T06:02:50.483
> 
> 标签：replace

我想知道如何或什么是实现以下目标的最佳方法。

我与一家大型电子商务公司合作，我们必须不断用新图像替换图像，然后使用预制模板清除缓存。我将展示一个模板的小示例，它是一个 *.txt 文件模板，用于刷新“Akamai 边缘控制”上的内容

文本文件中有大约 100 行不同的行，每行都略有不同，但它们都包含一组通用变量。

```
http://www.mysite.com/file/folder/blah/xxxxxx/_something_else here/zzzzzz/image250
http://www.mysite.com/file/folder/blah/xxxxxx/_something_else here/zzzzzz/image500
http://www.mysite.com/file/folder/blah/xxxxxx/_something_else here/zzzzzz/image800
http://www.mysite.com/file/folder/blah/xxxxxx/_something_else here/zzzzzz/image1000 
```

这只是它在文本文件中的外观示例。我们要做的就是用记事本打开文件，然后按Ctrl+h，会弹出替换框。我输入了一个数字，即“123456”来替换 xxxxxx，但我必须返回该数字并手动将其更改为“123000”，请注意，我们只是对 xxxxxx 和 zzzzzz 进行更改。他们只是占位符。所以我的最终结果会是这样的......

附言。在 zzzzzz 上它总是以“000”结尾

```
http://www.mysite.com/file/folder/blah/123456/_something_else here/123000/image250
http://www.mysite.com/file/folder/blah/123456/_something_else here/123000/image500
http://www.mysite.com/file/folder/blah/123456/_something_else here/123000/image800
http://www.mysite.com/file/folder/blah/123456/_something_else here/123000/image1000 
```

我的主要问题是......是否已经有某种程序可以更自动地运行这个过程，只需选择我的模板文件并粘贴我唯一的“123456”并在添加 zzzzzz 的同时获取所有行的更改零也。

我正在努力消除大量工作并提高流程效率。我的“123456”示例也可以达到“1234567”。甚至可能粘贴多个用逗号分隔的数字，例如“123456,123457,123458”，然后它运行示例过程，为每个数字生成一个文本块，就像手动找到并替换它一样。

理想情况下，我希望只有一个基于 Web 的表单（如图像）来执行任务，除非有另一种方法无需在 1000 多台计算机上安装软件。希望这是有道理的。提前感谢您的任何意见。

![http://i.stack.imgur.com/6Kc5B.jpg](../Images/bd4ad6939ad78420e8d891bad9f40bdd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T17:46:18.583

我从问题的措辞中猜测您不倾向于看到“服务器管理员”解决方案，例如命令行工具 sed。

服务器管理员将以这种方式执行此任务。从您的 template.txt 文件所在的文件夹中，他们将运行以下两个命令： sed -i 's/xxxxxx/123456/' template.txt sed -i 's/zzzzzz/123000/' template.txt

说明： sed - 通过此工具流式传输文件并一次处理一行 -i - 进行更改，因此将它们保存回它们来自 s/.../... 的文件 - 用这个代替那个

我所做的假设：“Ctrl+h”表示您正在使用 Windows 机器下载模板、进行更改并上传新模板。

“用于刷新内容”表示此模板已经在 Web 服务器上，并且您可以访问该 Web 服务器。

“大型电子商务公司”我假设这是一个 linux Web 服务器，因此 sed 工具已经作为任何现代 linux 操作系统的一部分安装。

“理想情况下，我只希望有一个像图像这样的基于网络的表单来执行任务，除非有另一种方法，而无需在 1000 多台计算机上安装软件。” 我假设你没有得到你的主管的许可来雇佣一名自由开发者来制作一个带有一个数字字段和一个启动按钮的网页，然后动态运行上述命令并执行你的理想解决方案。

我不知道的信息：您的模板文件是在一个中央位置，还是在这 1000 台计算机上？是什么让图像发生变化？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T12:12:11.550

给定一个包含每个目标文件位置/服务器的 UNC 路径或 FTP 路径和凭据的完整列表的文件，可以编写一个程序来读取您的模板，允许您输入您的数字，并依次联系每个服务器，然后编写新版本。

鉴于野兽的性质，lil' 程序必须具有日志记录和抗崩溃性，并且可能还需要一个允许在一部分机器上重复操作的接口。

您也可以继续手动更新您的文件（PSPAD.EXE 在文件中查找和替换），将它们上传到中央文件服务器并让每个 Web 服务器下载文件，无论它们是否已更改 - a每个服务器的调度程序执行的简单批处理文件可以做到这一点，当然你必须配置每个服务器。

马克 ia.uk.com

# php - 如何在php中从用户端动态提供对数据库的访问权限？

> ID：13081601
> 
> 赞同：-2
> 
> 时间：2012-10-26T06:03:14.753
> 
> 标签：php, javascript

我必须在 php 中动态地向用户提供编辑、查看、删除数据库中的值等访问权限，以便超级管理员可以从应用程序本身更改权限。（无需打开数据库并为每个和每个用户）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:14:50.987

[可能与创建数据库和用户 mysql 并设置权限 php](https://stackoverflow.com/questions/9720587/create-db-and-user-mysql-and-set-privileges-php)重复

假设我们有一个 mysql 数据库：

```
mysql_connect('localhost','user',password);
mysql_query("CREATE USER 'username'@'localhost' IDENTIFIED BY 'password';");
mysql_query("GRANT ALL ON db1.* TO 'username'@'localhost'");
mysql_query("CREATE DATABASE newdatabase");
mysql_close(); 
```

[在http://dev.mysql.com/doc/refman/5.1/en/grant.html](http://dev.mysql.com/doc/refman/5.1/en/create-user.html)阅读更多关于 mysql 数据库的访问权限以及在[http://dev.mysql.com/doc/refman/5.1](http://dev.mysql.com/doc/refman/5.1/en/grant.html)创建数据库用户[/en/create-user.html](http://dev.mysql.com/doc/refman/5.1/en/create-user.html)

**稍后编辑**：

```
$user_priviledges = array(
                       '__SELECT__' => array("select_user","password"),
                       '__SELECT_DELETE__' => array("select_delete_user","password")
                    );
// first you use just __SELECT__ user for getting the current user access information
mysql_connect('localhost', $user_priviledges['__SELECT__'][0], $user_priviledges['__SELECT__'][1]);
mysql_select_db('my_db');
$sql = mysql_query("SELECT user_access FROM access WHERE user_id='$my_loged_user_id'");
$row = mysql_fetch_array($sql);
if ($row['user_access'] != '__SELECT__') {
    mysql_close();

    // after you close the above mysql connection we can connect again with the real user access 
    mysql_connect('localhost', $user_priviledges[$row['user_access']][0], $user_priviledges[$row['user_access']][1]);
    mysql_select_db('my_db');
}

// my rest of code

mysql_close(); 
```

您必须注意系统的用户和用户访问权限，为此我认为您必须实现一些类，这些类将根据系统（或用户）尝试执行的操作来打开/关闭 mysql 连接

请注意，我建议您使用 MySQLi 而不是 PHP 中的旧 mysql 函数

# android - 如何通过在 android 中下载图像来更新 Gridview

> ID：13081605
> 
> 赞同：1
> 
> 时间：2012-10-26T06:03:28.013
> 
> 标签：android, gridview, adapter

我想在 gridView 适配器中下载并显示一些图像。这是我的适配器

```
public class CustomAdapter extends BaseAdapter {

    private Context context;

    ArrayList<String> list = null;

    public CustomAdapter (Context context, ArrayList<String> list) {
        this.context = context;
        this.list= list;
    }

    /*
     * (non-Javadoc)
     * 
     * @see android.widget.Adapter#getCount()
     */
    public int getCount() {
        return list.size();
    }

    /*
     * (non-Javadoc)
     * 
     * @see android.widget.Adapter#getItem(int)
     */
    public Object getItem(int paramInt) {
        return paramInt;
    }

    /*
     * (non-Javadoc)
     * 
     * @see android.widget.Adapter#getItemId(int)
     */
    public long getItemId(int paramInt) {
        return paramInt;

    }

    /*
     * (non-Javadoc)
     * 
     * @see android.widget.Adapter#getView(int, android.view.View,
     * android.view.ViewGroup)
     */
    public View getView(int position, View child, ViewGroup parent) {

                 //Inflating View
                  .....................

        GridItem gridItem = new GridItem (imageview);
        DownloadContent downloadContent = new DownloadContent();
        downloadContent.setDownloadUrl(list.get(0));
        downloadContent.setContentType(DownloadContent.CONTENT_TYPE_IMAGE);
        downloadContent.setDownloadFilePath(filepath);
        downloadContent.setDownloadNotifier(imageDownloadNotifier);
        downloadContent.setTag(gridItem);
        new DownloadTask(new DownloadContent[] { downloadContent }).execute();

//      
        return view;
    }

  private DownloadNotifier imageDownloadNotifier = new DownloadNotifier() {

    @Override
    public void downloadCompleted(DownloadContent downloadContent) {
        if(downloadContent.isSuccess())
        {
            GridItem gridItem = (GridItem) downloadContent.getTag();
            ImageView imgView = mgridItem.getImage();
            Bitmap bitmap = BitmapFactory.decodeFile(downloadContent.getDownloadFilePath());
            imgView.setImageBitmap(bitmap);
        }

    }
};

} 
```

这显示了以下异常

```
-26 11:27:33.629: E/AndroidRuntime(2082): FATAL EXCEPTION: Thread-24
10-26 11:27:33.629: E/AndroidRuntime(2082): android.view.ViewRoot$CalledFromWrongThreadException: **Only the original thread that created a view hierarchy can touch its views.**
10-26 11:27:33.629: E/AndroidRuntime(2082):     at android.view.ViewRoot.checkThread(ViewRoot.java:3020)
10-26 11:27:33.629: E/AndroidRuntime(2082):     at android.view.ViewRoot.requestLayout(ViewRoot.java:634)
10-26 11:27:33.629: E/AndroidRuntime(2082):     at android.view.View.requestLayout(View.java:8267)
10-26 11:27:33.629: E/AndroidRuntime(2082):     at android.view.View.requestLayout(View.java:8267)
10-26 11:27:33.629: E/AndroidRuntime(2082):     at android.view.View.requestLayout(View.java:8267)
10-26 11:27:33.629: E/AndroidRuntime(2082):     at android.view.View.requestLayout(View.java:8267)
10-26 11:27:33.629: E/AndroidRuntime(2082):     at android.widget.AbsListView.requestLayout(AbsListView.java:1157)
10-26 11:27:33.629: E/AndroidRuntime(2082):     at android.view.View.requestLayout(View.java:8267)
10-26 11:27:33.629: E/AndroidRuntime(2082):     at android.widget.RelativeLayout.requestLayout(RelativeLayout.java:257)
10-26 11:27:33.629: E/AndroidRuntime(2082):     at android.view.View.requestLayout(View.java:8267)
10-26 11:27:33.629: E/AndroidRuntime(2082):     at android.view.View.requestLayout(View.java:8267)
10-26 11:27:33.629: E/AndroidRuntime(2082):     at android.widget.ImageView.setImageDrawable(ImageView.java:322)
10-26 11:27:33.629: E/AndroidRuntime(2082):     at android.widget.ImageView.setImageBitmap(ImageView.java:336) 
```

我怎样才能解决这个问题？我如何更新关于下载图像的视图？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:05:40.863

> android.view.ViewRoot$CalledFromWrongThreadException：**只有创建视图层次结构的原始线程才能触摸其视图。**

这是问题所在，因为您试图直接在主线程内从网络获取图像。相反，您应该实现**异步图像加载逻辑**。

我建议您检查并实现如下逻辑：[Universal Image loader](https://github.com/nostra13/Android-Universal-Image-Loader)

# asp.net-mvc-3 - 如何在使用@Html.Actionlink 重定向到页面之前检查一些标准

> ID：13081607
> 
> 赞同：0
> 
> 时间：2012-10-26T06:03:30.433
> 
> 标签：asp.net-mvc-3, html.actionlink

我使用@Html.ActionLink 移动到一种形式。在转到该页面之前，我想检查一些情况。条件如如果用户对该（编辑）页面具有访问权限，那么只有他可以重定向到编辑页面。

我正在使用 jquery 尝试它，但默认情况下它只是重定向到编辑页面而不调用 jquery event 。

这个怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T07:03:09.050

使用 jQuery

```
 <a href="@Url.Action("NewLaunches", "Updates")" style="cursor:pointer" id="deleteLink">Delete</a>

$(document).ready(function(){
  $("#deleteLink").click(function(event){
    event.preventDefault();
    bool isallowed= // Logic for finding access permission
    if(isallowed)
    {
    var url = $(this).attr("href"); // picking up the url
    document.location.href=url;
    }
    });}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T07:04:48.213

是的，你可以这么做。

您说您`@Html.ActionLink`用于在表单之间移动。所以我假设你的一个 ActionLink 可能看起来像这样......

```
@Html.ActionLink("Edit","Home") 
```

你的控制器可能看起来像这样......

```
public class HomeController : Controller
{
    public ActionResult Edit()
    {        
        return View();
    }

} 
```

在 Edit 操作中，您可以检查所需的访问权限，例如：

```
public class HomeController : Controller
{
    public ActionResult Edit()
    {       
        if(Request.IsAuthenticated && SomeOtherCondition()) {
        {
            // if all ok, then forward to Edit page
            return View();
        }
        else{
            // send back to home.
            return("Index");
        }
    }

} 
```

*PS：我强烈建议您在服务器端而不是客户端（jquery）上进行访问权限验证。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T07:07:22.017

那是服务器逻辑，而不是客户端，尽管如果您使用一些带有密钥、uid 等的客户端安全算法，并通过 ajax 与服务器进行主动通信，它会给您带来一些优势。我建议你：返回`RedirectToAction`、抛出异常、返回 403 状态码、检查服务器上的权限并且不呈现此链接等。@amesh 示例将允许用户在浏览器中使用禁用的 javascript 进行导航。

# hibernate - Hibernate 抛出 org.hibernate.persister.entity.SingleTableEntityPersister

> ID：13081608
> 
> 赞同：6
> 
> 时间：2012-10-26T06:03:35.423
> 
> 标签：hibernate, exception, jboss7.x, h2, h2db

我正在使用带有 H2 数据库的 JBoss AS 7。我有一个独立的应用程序，它试图像这样连接到这个数据库。

我的配置文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
                                         "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
 <session-factory name="Test">
  <property name="hibernate.connection.driver_class">org.h2.Driver</property>
  <property name="hibernate.connection.url">jdbc:h2:mem:test</property>
  <property name="hibernate.dialect">org.hibernate.dialect.H2Dialect</property>
  <mapping class="Kunde" resource="Kunde.hbm.xml"/>
  <mapping class="Mitarbeiter" resource="Mitarbeiter.hbm.xml"/>
 </session-factory>
</hibernate-configuration> 
```

我的映射文件是：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<!-- Generated Oct 26, 2012 7:34:15 AM by Hibernate Tools 3.4.0.CR1 -->
<hibernate-mapping>
    <class name="Kunde" table="KUNDE">
        <id name="id" type="long">
            <column name="ID" />
            <generator class="assigned" />
        </id>
        <property name="vorname" type="java.lang.String">
            <column name="VORNAME" />
        </property>
        <property name="nachname" type="java.lang.String">
            <column name="NACHNAME" />
        </property>
        <property name="firma" type="java.lang.String">
            <column name="FIRMA" />
        </property>
    </class>
</hibernate-mapping>

<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<!-- Generated Oct 26, 2012 7:34:15 AM by Hibernate Tools 3.4.0.CR1 -->
<hibernate-mapping>
    <class name="Mitarbeiter" table="MITARBEITER">
        <id name="id" type="long">
            <column name="ID" />
            <generator class="assigned" />
        </id>
        <property name="vorname" type="java.lang.String">
            <column name="VORNAME" />
        </property>
        <property name="nachname" type="java.lang.String">
            <column name="NACHNAME" />
        </property>
    </class>
</hibernate-mapping> 
```

我的实体类：

```
public class Kunde {
    long id;
    String vorname;
    String nachname;
    String firma;

    public long getId() {
        return id;
    }

    public void setId(long id) {
        this.id = id;
    }

    public String getVorname() {
        return vorname;
    }

    public void setVorname(String vorname) {
        this.vorname = vorname;
    }

    public String getNachname() {
        return nachname;
    }

    public void setNachname(String nachname) {
        this.nachname = nachname;
    }

    public String getFirma() {
        return firma;
    }

    public void setFirma(String firma) {
        this.firma = firma;
    }
} 
```

（另一个看起来相似）。

我的测试代码：

```
public static void main(String[] args) {
    try {
        // This step will read hibernate.cfg.xml and prepare hibernate for
        // use
        Configuration configuration = new Configuration();
        configuration.configure();
        ServiceRegistry serviceRegistry = new ServiceRegistryBuilder()
                .applySettings(configuration.getProperties())
                .buildServiceRegistry();
        SessionFactory sessionFactory = configuration
                .buildSessionFactory(serviceRegistry);

        Session session = sessionFactory.openSession();

        // Create new instance of Kinde and set values in it by reading them
        // from form object
        System.out.println("Inserting Record");
        Kunde kunde = new Kunde();
        kunde.setId(1);
        kunde.setVorname("A");
        kunde.setNachname("N");
        kunde.setFirma("Privat");
        session.save(kunde);
        System.out.println("Done");

        // Actual insertion will happen at this step
        session.flush();
        session.close();
    } catch (Exception e) {
        System.out.println(e.getMessage());
    }
} 
```

例外：

```
Okt 26, 2012 7:56:45 AM org.hibernate.annotations.common.Version <clinit>
INFO: HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
Okt 26, 2012 7:56:45 AM org.hibernate.Version logVersion
INFO: HHH000412: Hibernate Core {4.0.1.Final}
Okt 26, 2012 7:56:45 AM org.hibernate.cfg.Environment <clinit>
INFO: HHH000206: hibernate.properties not found
Okt 26, 2012 7:56:45 AM org.hibernate.cfg.Environment buildBytecodeProvider
INFO: HHH000021: Bytecode provider name : javassist
Okt 26, 2012 7:56:45 AM org.hibernate.cfg.Configuration configure
INFO: HHH000043: Configuring from resource: /hibernate.cfg.xml
Okt 26, 2012 7:56:45 AM org.hibernate.cfg.Configuration getConfigurationInputStream
INFO: HHH000040: Configuration resource: /hibernate.cfg.xml
Okt 26, 2012 7:56:45 AM org.hibernate.cfg.Configuration addResource
INFO: HHH000221: Reading mappings from resource: Kunde.hbm.xml
Okt 26, 2012 7:56:45 AM org.hibernate.cfg.Configuration addResource
INFO: HHH000221: Reading mappings from resource: Mitarbeiter.hbm.xml
Okt 26, 2012 7:56:45 AM org.hibernate.cfg.Configuration doConfigure
INFO: HHH000041: Configured SessionFactory: Test
Okt 26, 2012 7:56:45 AM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000402: Using Hibernate built-in connection pool (not for production use!)
Okt 26, 2012 7:56:45 AM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000115: Hibernate connection pool size: 20
Okt 26, 2012 7:56:45 AM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000006: Autocommit mode: false
Okt 26, 2012 7:56:45 AM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:test]
Okt 26, 2012 7:56:45 AM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000046: Connection properties: {}
Okt 26, 2012 7:56:46 AM org.hibernate.dialect.Dialect <init>
INFO: HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
Okt 26, 2012 7:56:46 AM org.hibernate.engine.jdbc.internal.LobCreatorBuilder useContextualLobCreation
INFO: HHH000423: Disabling contextual LOB creation as JDBC driver reported JDBC version [3] less than 4
Okt 26, 2012 7:56:46 AM org.hibernate.engine.transaction.internal.TransactionFactoryInitiator initiateService
INFO: HHH000399: Using default transaction strategy (direct JDBC transactions)
Okt 26, 2012 7:56:46 AM org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory <init>
INFO: HHH000397: Using ASTQueryTranslatorFactory
Could not get constructor for org.hibernate.persister.entity.SingleTableEntityPersister 
```

任何想法？

* * *

更新：

愚蠢的我 ：）

我打印了整个堆栈跟踪，这表明我的类路径不完整：

```
Caused by: java.lang.ClassNotFoundException: javassist.util.proxy.MethodFilter
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 23 more 
```

我添加了 javaassist JAR，它现在工作正常。

对不起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-06T05:43:08.673

可能您需要使用 javassistjar 文件；我使用了 javassist-3.10.0.GA.jar 并且这个错误消失了

# node.js - Node.js 直播：避免缓冲

> ID：13081609
> 
> 赞同：3
> 
> 时间：2012-10-26T06:03:40.723
> 
> 标签：node.js, ffmpeg, audio-streaming, low-latency

我编写了一个小型 nodeJS 服务器，它将 Windows 上 ffmpeg 捕获的系统音频（使用 DirectShow）作为流式 MP3 文件输出到浏览器。音频需要尽可能实时，最小/无缓冲，并且音频中的“跳过”效果是完全可以接受的。

当我使用 HTML5 音频标签在 Chrome 中播放音频时，在低延迟 LAN 连接上会有大约 8-10 秒的延迟。我怀疑这是客户端缓冲区，并在客户端使用了 Flash MP3 播放器，这将延迟降低到 2-3 秒。

现在，缓冲似乎发生在服务器端。NodeJS 的 response.write 的文档提到数据是写入内核缓冲区。如何完全避免任何缓冲或至少绕过它，以便客户端始终获取最新的音频数据？处理“流失”事件以始终推送实时数据的策略？

在请求对象上，我使用[了 setNoDelay(true)](https://github.com/maxtaco/node-fast-msgpack-rpc/pull/1)来避免使用 Nagle 算法。以下是生成的 ffmpeg 进程发出数据时如何写入数据的片段。

```
var clients = []; //List of client connections currently being served
ffmpeg.stdout.on('data', function(data) {
    for(var i = 0; i < clients.length; i++){
        clients[i].res.write(data);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T02:48:03.667

有几个地方会发生延迟/缓冲：

1.  DirectShow 捕获（~100ms 左右）
2.  FFMPEG MPEG 编码缓冲区（1-10 秒，取决于配置）
3.  网络写入和传输（在您的设置中接近 0）
4.  客户端缓冲（如您所见，因客户端而异 - 大多数客户端缓冲约 2 秒用于解码）

我怀疑您需要查看的缓冲区是用于 FFMPEG 编码的缓冲区。我可以通过确保在执行 FFMPEG 时明确配置输入格式来减少这种情况。此外，请确保删除第一块数据进行编码，因为第一位无疑会比以后延迟更多。

一旦你这样做了，你会发现你的延迟是一两秒。至少，这就是我通过类似设置得到的结果。

# arrays - 填充R中函数f（i，j）给出的元素矩阵的最有效方法？

> ID：13081611
> 
> 赞同：1
> 
> 时间：2012-10-26T06:03:53.943
> 
> 标签：arrays, performance, r

我有两个标量值的`x_i`函数`y_j`。我有一个包含 n 个`x_i`值、X 和 n 个`y_j`值的向量，例如

```
myfunction <- function(x,y) min(x,y)
X <- 1:3
Y <- 2:4 
```

我想用 $n$ 填充 $n$ 矩阵，其元素`(i,j)`由`myfunction(x_i, y_j)`. 有很多方法可以做到这一点`R`，我很好奇它们的相对表现。

例如，这似乎是 的任务`outer`，但它似乎会混淆是否将向量或标量传递给`myfunction`。首先考虑：

`r outer(X, Y, paste)`

给我每一对

```
 [,1]  [,2]  [,3] 
[1,] "1 2" "1 3" "1 4"
[2,] "2 2" "2 3" "2 4"
[3,] "3 2" "3 3" "3 4" 
```

看起来挺好的。但

```
outer(X, Y, myfunction) 
```

抛出错误：

```
Error: dims [product 9] do not match the length of object [1] 
```

同时，其他可能的函数似乎与我对标量的预期一样，例如：

```
myfunction <- function(x,y) exp((x-y)^2) 
```

效果很好

```
outer(X, Y, myfunction)

         [,1]      [,2]        [,3]
[1,] 2.718282 54.598150 8103.083928
[2,] 1.000000  2.718282   54.598150
[3,] 2.718282  1.000000    2.718282 
```

在一些快速的数值实验中，这似乎比 略快`expand.grid`，并且函数调用更紧凑，但我似乎不明白为什么有些函数看起来像我预期的那样工作，而另一些则没有。

经典`expand.grid`解决方案还要求函数使用向量参数，这对于我的示例来说意味着非常不同的事情`min`; 同一问题的不同版本。有没有办法强制我的函数的参数必须是标量而不是向量这一事实？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T06:09:48.357

传递给外部的函数必须是矢量化的，

从源代码

```
 FUN <- match.fun(FUN)
        Y <- rep(Y, rep.int(length(X), length(Y)))
        if (length(X)) 
            X <- rep(X, times = ceiling(length(Y)/length(X)))
        robj <- FUN(X, Y, ...)
        dim(robj) <- c(dX, dY) 
```

`min`将返回一个数字，你会想要`pmin`.

更一般地，您可以使用 Vectorize。

# qt - QDir::mkPath 和权限

> ID：13081612
> 
> 赞同：3
> 
> 时间：2012-10-26T06:03:55.153
> 
> 标签：qt, permissions, qdir

我在 Ubuntu 12.04 LTS 和 10.04 LTS 平台上工作，我遇到了 QDir::mkPath 的问题。我正在尝试使用 mkPath 创建一个路径，比如说 /john/play/games，然后将文件 game.htm 复制到 /home/john/play。复制文件后，我将文件的权限设置为 rwxr - - r - -。这样 3rd 方应用程序就可以读取文件 game.htm。但是目录 /john、/john/play 和 /john/play/games 是使用权限创建的 drwxr - x - - 由于其他应用程序和其他用户无法读取文件 game.htm。

我还在另一个应用程序中观察到相同的 QDir::mkpath 使用 drwxr - xr - x 创建目录。我想了解 QDir::mkpath 使用什么权限创建目录以及如何控制或设置权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:04:50.437

*正如天空*在评论中完美指出的那样，让 mkdir 例程创建可读目录的环境搞砸了。

但是，您可以`umask()`在调用`QDir::mkpath`. `#ifdef`尽管我怀疑该`umask()`功能可能已在 wnidows 上的 qtcreator 使用的 mingw 环境中实现，但您可能不得不在 Windows 上使用它。所以它无论如何都可以工作。

# eclipse - 如何将需要的文件夹添加到与eclipse项目中jar文件相同的目录？

> ID：13081616
> 
> 赞同：1
> 
> 时间：2012-10-26T06:04:13.707
> 
> 标签：eclipse, api, jar, config, wordnet

我正在尝试在 Eclipse IDE 中使用印地语 wordnet java api。

在 api 的自述文件中写道，我们必须将两个文件夹添加到 .jar 文件所在的同一目录中。

我已将 .jar 文件包含到项目的类路径中。但我不知道如何将这两个文件夹添加到与文件相同的目录中`.jar`。

现在`.jar`文件在`myProject->src->Referenced Libraries`

如果不包括这些文件夹，我会收到以下错误

```
Error reading configuration file. Make sure its correct path is specified. 
```

我检查了提到这些文件夹的 api 文件夹->config-> .config 文件。意味着 .jar 在运行时需要这些文件夹。

完全困惑..如何在 Eclipse IDE 中使用这些文件夹和 jar 文件。

**注意**：当我从终端运行它时，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-13T04:41:53.160

这个答案对于 OP 来说可能为时已晚，但我只是认为发布它以防其他人面临这个问题是个好主意。虽然答案是根据 OP 的要求为 Eclipse 用户编写的，但类似的步骤应该适用于任何 IDE。

为了使印地语 WN API 正常工作，需要执行以下操作：

1.  [从此链接](http://www.cfilt.iitb.ac.in/wordnet/webhwn/API_downloaderInfo.php)下载 API 。

2.  在Eclipse中新建一个空`Java Project`文件，把这个zip的内容复制到它下面（不需要复制`src`和`.class`文件）。在您的项目`Examples.java`下移动。`src/`

3.  转到`Project -> Properties -> Java Build Path -> Libraries`并添加`JHWNL.jar`（如果您按照上一步操作，这应该已经存在于项目的根目录下）。

在此之后，代码应该编译并且您将能够使用 API。

此外，如果您想在里面运行所有测试`Examples.java`，您需要下载 Hindi Wordnet 本身（从此[链接](http://www.cfilt.iitb.ac.in/wordnet/webhwn/downloaderInfo.php)）。将其内容提取到某处并复制提取`database/`的`MorphHIN/`Eclipse 项目根目录下的目录。

**注意：**默认情况下，Eclipse 可能使用除`UTF-8`. 这可能会使控制台中的输出出现乱码。您可以`Window -> Preferences -> General -> Workspace`通过选择适当的 来更改它`Text file encoding`。

希望有帮助！

# knockout.js - 每次尝试更新视图时，如何阻止创建另一个 Knockout.js ViewModel 副本？

> ID：13081618
> 
> 赞同：1
> 
> 时间：2012-10-26T06:04:16.653
> 
> 标签：knockout.js, knockout-2.0

每次单击 [add] 链接并将另一个文本框添加到以下 HTML 时，我都会尝试更新我的 ViewModel：

```
<a href="" data-bind="click: addItem">[add]</a>
 <div id="items">
     <input class="item" type="text" data-bind="value: searchRequest.Items[0].ItemName"/>
 </div> 
```

我的 ViewModel 如下所示：

```
$(function () {
    var ViewModel = function() {
         var self = this;
         this.searchRequest = {
             Items: [{
                        ItemName: ko.observable("")
                     }] 
         };
             this.addItems = function() { 
                 var htmlToInsert = '<input class="items" type="text" data-bind="value:  searchRequest.Items[' + self.searchRequest.Items.length.toString() + '].ItemName"/>';

                $(htmlToInsert).insertAfter('.item');

                self.searchRequest.Items.push({
                    ItemName: ko.observable(""),
                });

                ko.applyBindings(self, document.getElementById("items"));
             }
         }
}); 
```

因此，基本上它工作正常，除了每次单击 [add] 链接时都会创建另一个 ViewModel 副本。这会导致文本框被复制。因此，当我有两个文本框并单击 [添加] 时，会添加两个文本框而不是一个。所以，我看到了 4 个文本框而不是 3 个。当我再次单击 [添加] 时 - 又出现了 4 个文本框。当我在任何新出现的文本框中输入一个值时，它会反映在与它一起出现的其他文本框中。基本上，每个 ViewModel 都会调用 addItems 函数，从而添加多个文本框。我试着评论

```
ko.applyBindings(self, document.getElementById("items")); 
```

出来，但没有帮助。

我怎样才能解决这个问题？

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T07:53:17.923

您正在使用`knockout`但未使用它是功能。您不需要手动创建`textboxes`，`knockout`会为您完成。制作`Items`数组 -`observableArray`并将项目推送到它：

```
var ViewModel = function() {
    var self = this;
    self.searchRequest = {
        Items: ko.observableArray([{
            ItemName: ko.observable("")}])
    };

    self.addItem = function() {
        self.searchRequest.Items.push({
            ItemName: ko.observable(""),
        });
    };
}

ko.applyBindings(new ViewModel()); 
```

`Items`然后使用`foreach`绑定渲染：

```
<a href="#" data-bind="click: addItem">[add]</a>
<div data-bind="foreach: searchRequest.Items" id="items">
    <input class="item" type="text" data-bind="value: ItemName"/>
</div> 
```

这是工作示例：http: [//jsfiddle.net/vyshniakov/L8Mru/](http://jsfiddle.net/vyshniakov/L8Mru/)

# objective-c - 视图控制器如何知道它的视图将被添加？

> ID：13081619
> 
> 赞同：2
> 
> 时间：2012-10-26T06:04:22.550
> 
> 标签：objective-c, xcode4.5

这让我困惑不已。

说你这样做：

```
[self.view addSubview: someController.view]; 
```

someController 如何知道它的视图正在加载并调用 viewDidAppear 等？

我们传递的是视图而不是控制器。然而 someController 知道。

如果 self.view 本身不在窗口的视图层次结构中，也会发生什么。someController的viewWillAppear等会被调用吗？

实现这一点的一种方法是让视图有一个指向控制器的弱指针，比如它的委托，然后检查视图本身是否是窗口对象的后代。

这是它实际实施的方式吗？如果没有，它实际上是如何完成的？即使不是，认为它是这样实现的是否正确？

我关心的是：我很好奇，因为我想了解这个 viewWillAppear 是如何出现的。几个月我玩 IOS 打电话给那些明确不知道为什么被调用或不被调用的人。有大量帖子抱怨 viewWillAppear/Disapear 被调用或未被调用。有些人被叫了两次。我想确切地知道它是如何以及何时被调用的。我越来越擅长它，但还没有完全做到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T06:15:17.530

我从未见过 UIKit 源代码，但我确信它是您所怀疑的，并且 UIView 对 UIViewController 有一个私有引用。[UIResponder](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIResponder_Class/Reference/Reference.html)的文档证实了这一点。由于 UIView 和 UIViewController 都参与了响应者链，因此您可以通过调用视图的`nextResponder`方法（强调我的）从视图中获取对控制器的引用：

> UIResponder 类不会自动存储或设置下一个响应者，而是默认返回 nil。子类必须重写此方法以设置下一个响应者。**UIView 通过返回管理它的 UIViewController 对象（如果有）或其父视图（如果没有）来实现此方法；**UIViewController 通过返回其视图的超级视图来实现该方法；UIWindow 返回应用程序对象，UIApplication 返回 nil。

至于您的另一个问题：`viewWillAppear:`除非视图实际出现，否则我认为不会被调用；换句话说，除非视图位于窗口的视图层次结构中，否则不会。（您可以轻松编写一个快速演示项目来测试它。）

# lua - 具有键值对的 lua 表中的“For each”循环

> ID：13081620
> 
> 赞同：25
> 
> 时间：2012-10-26T06:04:23.537
> 
> 标签：lua, lua-5.2

假设我有一个这样定义的表：

`myTable = { myValue = nil, myOtherValue = nil}`

我将如何在这样的每个时尚循环中迭代它？

```
 for key,value in myTable do --pseudocode
        value = "foobar"
  end 
```

此外，如果它有帮助，我并不真正关心密钥，只关心价值。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-26T06:14:36.410

没有值的键（即： are `nil`）不存在。就 Lua 而言`myTable`是一个*空表。*

您可以遍历一个空表，但这不会有用。

此外：

```
for key,value in myTable do --pseudocode
    value = "foobar"
end 
```

这个“伪代码”毫无意义。不能通过修改局部变量的内容来修改表；Lua 不是这样工作的。您无法获得对表条目的引用；您只能从表中获取*值。*

如果要修改表格的内容，则必须实际修改*表格*。例如：

```
for key,value in pairs(myTable) do --actualcode
    myTable[key] = "foobar"
end 
```

注意使用`myTable`. 在某些时候，如果不使用表本身，就无法修改表。无论是通过`myTable`还是通过其他变量访问的表，您都可以在其中存储对表的引用。

通常，在迭代表时修改表可能会导致问题。然而，Lua 说：

> `next`如果在遍历期间将任何值分配给表中不存在的字段，则的行为未定义。但是，您可以修改现有字段。特别是，您可以清除现有字段。

所以修改已经存在的字段的值是完全有效的。而且`key`表中显然已经存在，所以可以修改。您甚至可以毫无问题地将其设置为`nil`。

Lua 中的变量只不过是值的持有者。表格包含值；`myTable[key]`返回一个值。您可以将该值存储在变量中，但更改变量*不会*更改`myTable[key]`. 由于表是通过引用存储的，因此您可以在一个变量中更改表的内容并查看另一个变量中的更改，但这只是表的*内容*，而不是表本身。

# php - PHP Logic，与特定日期进行比较

> ID：13081625
> 
> 赞同：3
> 
> 时间：2012-10-26T06:05:10.660
> 
> 标签：php, date, logic, switch-statement, getdate

我需要编写一个 php 脚本，根据用户注册的日期确定用户必须支付的金额。他们注册得越晚，支付的费用就越多，所以这里是脚本的基本代码：

```
private $date;

function __construct() {
    $this->date = getdate();
}

function get_amount()
{
    $day = $this->date["mday"];
    $month = $this->date["month"];
    $year = $this->date["year"];
    $date = $day.$month.$year;
    switch($date) {
        case "26October2012":
            return "800";
            break;
        case "26Novermber2012":
            return "900";
            break;
    }
} 
```

但显然这个 case 语句不能正常工作。因此，如果用户在 2012 年 10 月 26 日之前注册，那么他们支付 800，如果是在 11 月 26 日之前但在 10 月 26 日之后，那么他们支付 900。那么我该如何编写这个逻辑呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T06:06:47.430

只需将您的日期转换为 Unix 时间戳，比较它们，让整个事情变得更简单。请参阅**[strtotime](http://php.net/manual/en/function.strtotime.php)**函数。

```
$compare_date = "2012-10-26";
$todays_date = date("Y-m-d");

$today_ts = strtotime($todays_date);//unix timestamp value for today
$compare_ts = strtotime($compare_date);//unix timestamp value for the compare date

if ($today_ts > $compare_ts) {//condition to check which is greater
   //...
} 
```

* * *

**strtotime**将您的日期时间转换为整数**[Unix 时间戳。](http://en.wikipedia.org/wiki/Unix_time)**Unix 时间戳定义为自 1970 年 1 月 1 日协调世界时 (UTC) 午夜以来经过的秒数。因此，作为一个整数，它很容易比较，无需字符串操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:19:44.333

创建一个包含`amount`不同日期的数组：

```
$amountPerDate = array(
    '2012-10-26' => 800,
    '2012-11-26' => 900,
); 
```

循环通过它以获得相应的`amount`值：

```
krsort($amountPerDate); // Recursive sort to check greater dates first
$date = strtotime($date);  // Convert '2012-10-23' to its numeric equivalent for the date comprasion
$amount = 0; // Default amount value
foreach ($valuePerData as $date => $amount) {
    if ($date >= strtotime($date)) {
        $amount = $amount;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T06:08:14.063

您不能使用`switch`语句进行范围比较。

您可以将日期转换为时间戳，然后使用`if-else`.

# c# - 显示来自 SQL 数据库的数据

> ID：13081627
> 
> 赞同：1
> 
> 时间：2012-10-26T06:05:27.577
> 
> 标签：c#, asp.net

我在 VS 2008 中设计了一个表单。我有一个包含以下字段的数据库表：

```
Fname (char)
MailFrom (char)
MailTo (char)
Subject (char)
Body (char)
MailID (int) 
```

现在我从数据库中提取数据并将其显示在各自字段的表单中。

我背后的代码是：

```
SqlConnection conn = new SqlConnection(
        "Data Source=PTZ1\\SQLEXPRESS;Initial Catalog = test; Integrated Security=SSPI;User ID=sa; Password=sa@; Trusted_Connection=True;");

    SqlDataReader rdr = null;

    try
    {
        // Open the connection
        conn.Open();

        // Pass the connection to a command object
        SqlCommand cmd = new SqlCommand("select * from testing", conn);

        //
        // Use the connection
        //

        // get query results
        rdr = cmd.ExecuteReader();

        while (rdr.Read())
        {
            Console.WriteLine(rdr[]);
        }
    }
    finally
    {
        // close the reader
        if (rdr != null)
        {
            rdr.Close();
        }

        // Close the connection
        if (conn != null)
        {
            conn.Close();
        }
    } 
```

如何在控制台上存储和显示数据

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T06:11:24.167

您可以将查询结果存储在内存中`DataTable`，用于在以下位置存储和显示该数据`Console`：

```
// Create a String to hold the query.
string query = "SELECT * FROM testing";

// Create a SqlCommand object and pass the constructor the connection string and the query string.
SqlCommand cmd = new SqlCommand(query, conn);

// Use the above SqlCommand object to create a SqlDataReader object.
SqlDataReader rdr = queryCommand.ExecuteReader();

// Create a DataTable object to hold all the data returned by the query.
DataTable dataTable = new DataTable();

// Use the DataTable.Load(SqlDataReader) function to put the results of the query into a DataTable.
dataTable.Load(rdr); 
```

或者

1.  以这种方式定义您的自定义类，例如“电子邮件”：

    ```
    class Email
    {
        public string Fname { get; set; }
        public string MailFrom { get; set; }
        public string MailTo { get; set; }
        public string Subject { get; set; }
        public string Body { get; set; }
        public int MailID { get; set; }    
    } 
    ```

2.  读取自定义类集合中的值：

    ```
    List<Email> list = new List<Email>();

    while (rdr.Read())
    {
        Email o = new Email() { Fname=rdr["Fname"], MailFrom=rdr["MailFrom"],
            MailTo=rdr["MailTo"], Subject=rdr["Subject"], Body=rdr["Body"], 
            MailID=Convert.ToInt32(rdr["MailID"]) };

        Console.WriteLine("First Name: {0}", o.Fname);
        Console.WriteLine("MailFrom: {0}", o.MailFrom);
        Console.WriteLine("Mail To: {0}", o.MailTo);
        Console.WriteLine("Subject: {0}", o.Subject);
        Console.WriteLine("Body: {0}", o.Body);
        list.Add(o);
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T06:17:48.887

那时代码几乎准备好了。

在 reader.Read() 循环中，您一次浏览 1 条数据记录。

要访问这些列，请使用它们的名称

```
(char) reader["Fname"] 
```

现在这取决于你想做什么。如果您想将它们存储在您自己的对象中 - 像这样

```
List<MyObject> myObjects = new List<MyObject>();

while (reader.Read())
{
MyObject obj = new MyObject;
obj.Fname = (char) reader["Fname"];
obj.MailFrom = //you get the idea
//etc
} 
```

如果要显示它们，只需显示它们即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T06:22:56.310

```
 while(rdr.Read())
            {
                Console.WriteLine(rdr["FirstName"].ToString() );//or get column data by name
                 Console.WriteLine(rdr.GetString(1) );//here accessing column by index
            } 
```

你只需要写这个

# openssl - 如何从 valgrind 抑制 openssl

> ID：13081634
> 
> 赞同：2
> 
> 时间：2012-10-26T06:06:00.633
> 
> 标签：openssl, valgrind

我正在使用 openssl 库。我收到了很多来自 valgrind 的警告，比如

```
==923== Conditional jump or move depends on uninitialised value(s)
==923==    at 0x66614C: ssl3_get_finished (in ./app.out)
==923==    by 0x65FA39: ssl3_connect (in ./app.out)
==923==    by 0x63A9E4: ossl_connect_common (in ./app.out)
==923==    by 0x63C054: Curl_ossl_connect (in ./app.out)
==923==    by 0x625DA6: Curl_ssl_connect (in ./app.out)
==923==    by 0x62B2BF: Curl_http_connect (in ./app.out)
==923==    by 0x6372ED: Curl_protocol_connect (in ./app.out)
==923==    by 0x637599: Curl_setup_conn (in ./app.out)
==923==    by 0x637643: Curl_connect (in ./app.out)
==923==    by 0x640A70: Curl_do_perform (in ./app.out)

==923== 
==923== Syscall param write(buf) points to uninitialised byte(s)
==923==    at 0x507ECCD: ??? (syscall-template.S:82)
==923==    by 0x6859EC: sock_write (in ./app.out)
==923==    by 0x583A86: BIO_write (in ./app.out)
==923==    by 0x6640AF: ssl3_write_pending (in ./app.out)
==923==    by 0x664734: ssl3_write_bytes (in ./app.out)
==923==    by 0x63891D: ossl_send (in ./app.out)
==923==    by 0x62F4B1: Curl_write (in ./app.out)
==923==    by 0x62BFF5: Curl_add_buffer_send (in ./app.out)
==923==    by 0x62DE8F: Curl_http (in ./app.out)
==923==    by 0x6378AA: Curl_do (in ./app.out)
==923==    by 0x640AE8: Curl_do_perform (in ./app.out)

==923==  Address 0xa2262ca is 490 bytes inside a block of size 17,584 alloc'd
==923==    at 0x4C2B6CD: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==923==    by 0x581B93: CRYPTO_malloc (in ./app.out)
==923==    by 0x666B6F: ssl3_setup_write_buffer (in ./app.out)
==923==    by 0x666BD6: ssl3_setup_buffers (in ./app.out)
==923==    by 0x666E63: ssl23_connect (in ./app.out)
==923==    by 0x63A9E4: ossl_connect_common (in ./app.out)
==923==    by 0x63C054: Curl_ossl_connect (in ./app.out)
==923==    by 0x625DA6: Curl_ssl_connect (in ./app.out)
==923==    by 0x62B2BF: Curl_http_connect (in ./app.out)
==923==    by 0x6372ED: Curl_protocol_connect (in ./app.out)
==923==    by 0x637599: Curl_setup_conn (in ./app.out)
==923==    by 0x637643: Curl_connect (in ./app.out)
==923== 
```

有没有办法可以抑制来自 valgrind 的警告？

# silverlight-4.0 - 如何在新浏览器中打开 Silverlight 子窗口

> ID：13081635
> 
> 赞同：0
> 
> 时间：2012-10-26T06:06:04.670
> 
> 标签：silverlight-4.0

我有一个简单的silverlight应用程序。在那个应用程序中，我有页面（page1.xaml，page2.xaml）和childwindows（ch1.xaml和ch2.xaml）。当我点击page1.xaml中的按钮时，它应该打开childwindow ch1 .xaml 在单独的新浏览器中

当我单击 page1.xaml 中的按钮时，它应该在单独的新浏览器中打开 page2.xaml 页面。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:13:08.323

HtmlPage.Window.Navigate(uri, "_blank");

或者试试，

HtmlPage.PopupWindow(...)

# java - 获取错误：java.lang.NoSuchMethodError 即使 jar 文件具有该方法

> ID：13081640
> 
> 赞同：1
> 
> 时间：2012-10-26T06:07:07.323
> 
> 标签：java, exception

我得到了这个例外：

```
Exception in thread "main" java.lang.NoSuchMethodError: 
     gnu.trove.TObjectIntHashMap.adjustOrPutValue(Ljava/lang/Object;II)I 
```

我在我的项目中添加了 trove4j-2.0.2.jar。它已经包含`gnu.trove.TObjectIntHashMap.adjustOrPutValue`方法。

这有什么问题？谢谢。

# windows - 附加到标准输入

> ID：13081642
> 
> 赞同：2
> 
> 时间：2012-10-26T06:07:13.437
> 
> 标签：windows, batch-file, stdin

我有一个交互式命令行程序，我们将其称为 program.exe。当它运行时，我可以输入一堆不同的命令来做不同的事情。我们将它们称为：doA、doB、doC 和 quit。现在，事实证明，我想在 program.exe 中做的第一件事*始终*是doA。我想节省一些击键并在启动时自动让 program.exe 运行命令 doA。不幸的是，我不能只在命令行上传递“doA”，因为创建 program.exe 的人并没有实现该功能。

在我看来，我有几个选择：

*   编写另一个调用 program.exe 的程序，将 doA 写入其 stdin，然后将其自己的 stdin 挂接到 program.exe 的 stdin 并将 program.exe 的 sdtout 挂接到其自己的 stdout。这可能会起作用，但我想看看是否有不需要编译器的解决方案

*   使用一些批处理文件魔法将 doA 塞入 program.exe 的标准输入。这是我有疑问的部分。这是我到目前为止所尝试的：

`echo doA | program.exe`

这行得通，在那个program.exe执行doA中，但是我不能向program.exe键入任何其他命令。Echo 占用了 program.exe 的标准输入

`more | echo doA | program.exe`

这也有效，并且更接近我所追求的。program.exe 执行 doA，我看到了 doA 的输出。我也可以输入其他命令，但我看不到这些命令的输出。此外，当我发送退出命令时，program.exe 终止（我猜），但我仍然停留在“更多”命令中，我可以继续输入行，直到我按 ctrl+c。

问题：有没有另一种方法可以做我想要用一个 bat 文件做的事情？从概念上讲，我认为我需要将两个流（键盘和文字“doA”）合并为一个并将其传递给 program.exe，但我可能会走得很远。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:15:16.317

首先，`more | echo doA | program.exe`不做你认为它做的事。发送后*doA* `echo`不会将这些管道阶段连接在一起，而是会创建完美的接收器 - 这就是您看不到命令​​回显的原因。他们无处可去，也**没有**被执行`program.exe`。我认为没有一种简单的方法可以直接从命令行实现您想要的，但可以通过使用小批处理文件轻松解决。创建一个批处理文件，例如`args.bat`：

```
@echo off 
echo First command
more 
```

现在运行你的程序`args|program.exe`

# python - 使用用户输入调用定义的函数

> ID：13081644
> 
> 赞同：-7
> 
> 时间：2012-10-26T06:07:47.057
> 
> 标签：python

如何使用以下功能提示用户输入？

我可以`user = input("please enter number")`在这个功能中使用。

```
def Func(x):
    total = 0
    for i in range(x):
        total += i * (i-1)
    return total 
```

所以将它添加到函数中就像

```
def Func(x):
    user = input("please enter number: ")
    x=user
    total = 0
    for i in range(x):
        total += i * (i-1)
    return total 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T06:09:54.670

定义函数后，您可以随后调用它：

```
Func(5) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T06:11:03.597

调用函数来调用它。

```
Func(5) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T06:48:28.897

```
def Func(x):
    total = 0
    for i in range(x):
        total += i * (i-1)
    return total

a=Func(5)
print(a) 
```

# java - java集合迭代器和垃圾（android）

> ID：13081645
> 
> 赞同：0
> 
> 时间：2012-10-26T06:07:53.643
> 
> 标签：java, android, iterator

我一直在使用复杂的 hashmap 结构在 android 上运行一些测试。

我的结构看起来像这样：`Map<Class<?>, HashMap<Object, Class<?>> mymap;`并且我准备了一个迭代器`Iterator< object > iterator;` 这个结构一次可以容纳大约 1,000 个对象。现在我需要能够非常快速地迭代这些对象。

我通常会返回我的对象​​集合，手动转换它们并迭代该集合。这就是我的问题出现的地方。

我愿意`Collection < object > returnedobjects = get all mymap.get(class).getvalues`。然后我做`iterator = returnedobjects.iterator;`然后我做

```
while(iterator.hasNext())
{
  Box b = (Box)iterator.next();
  do box operations;
} 
```

或者我试试这种方式

```
for(Object o : returnedObjects)
{ 
  Box b : (Box) o;
  do box operations;
} 
```

现在有了这个设置，垃圾收集器就像疯狂的示例输出一样运行：

```
10-26 13:56:17.793: D/dalvikvm(5518): GC_CONCURRENT freed 3639K, 57% free 3543K/8195K, paused 15ms+18ms, total 135ms
10-26 13:56:21.013: D/dalvikvm(5518): GC_CONCURRENT freed 1753K, 57% free 3526K/8195K, paused 13ms+21ms, total 92ms
10-26 13:56:24.363: D/dalvikvm(5518): GC_CONCURRENT freed 1743K, 57% free 3525K/8195K, paused 24ms+17ms, total 116ms
10-26 13:56:27.653: D/dalvikvm(5518): GC_CONCURRENT freed 1738K, 57% free 3527K/8195K, paused 13ms+16ms, total 102ms
10-26 13:56:30.913: D/dalvikvm(5518): GC_CONCURRENT freed 1739K, 57% free 3526K/8195K, paused 14ms+18ms, total 95ms
10-26 13:56:34.153: D/dalvikvm(5518): GC_CONCURRENT freed 1737K, 57% free 3528K/8195K, paused 15ms+18ms, total 97ms 
```

只要我的应用程序正在运行，它就会继续以这种速度运行。

有没有什么方法可以管理我所有的对象，而不会让 gc 以如此疯狂的速度运行？

# jquery-validate - 那是 Jquery.validate.rules("add",{.....}) 被窃听了吗？

> ID：13081650
> 
> 赞同：0
> 
> 时间：2012-10-26T06:08:29.317
> 
> 标签：jquery-validate

```
//html  
<form id="idform">  
  <input id="id_t_email">  
  <input id="id_p_password" type="password">  
</form>  

//js
$('#idform').validate();
$('#id_t_email').rules('add',{email:true});
$('#id_p_password').rules('add',{required:true}); 
```

我遇到了一个奇怪的问题。
如上面的代码，“id_t_email”应该只有一个“电子邮件”验证，而 id_p_password 应该只有一个“必需”验证。
但实际上“id_p_password”和“id_t_email”都同时被“email”和“required”验证。
此外，如果我打电话

```
$('#id_t_email').rules('add',{email:true});
$('#id_p_password').rules('add',{email:false}); 
```

那么所有字段的“电子邮件”规则将被删除
（即“id_t_email”将不再被“电子邮件”验证）
这是一个严重的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:25:08.980

该`.validate()`插件要求每个都`input`包含一个`name`属性...

```
<input id="id_t_email" name="id_t_email" type="text" />  
<input id="id_p_password" name="id_p_password" type="password" /> 
```

您还缺少`type`第一个属性`input`。

请参阅文档： [http ://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

# eclipse - eclipse中静态和动态web项目的区别

> ID：13081653
> 
> 赞同：29
> 
> 时间：2012-10-26T06:08:51.393
> 
> 标签：eclipse

eclipse 3.x中的静态和动态项目有什么区别吗？什么时候使用静态项目？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-26T06:12:25.100

在静态 Web 项目中，您将没有 Java、servlet 和 JSP 等（服务器端脚本）。您只能拥有 HTML、JavaScript 等。

请检查下面的链接，它会帮助你：

[http://www.velvetblues.com/web-development-blog/what-is-the-difference-between-static-and-dynamic-websites/](http://www.velvetblues.com/web-development-blog/what-is-the-difference-between-static-and-dynamic-websites/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-10-20T08:37:25.867

**静态 Web 项目**完全使用 HTML 编写。每个网页都是一个单独的文档，没有可以利用的数据库或外部文件。意味着您可以使用 FrontPage Editor、Dreamweaver 编辑任何网页或向您的 Web 开发人员付费为您进行更新。

**在这个项目服务器端编码中，动态 Web 项目**建立在 PHP、ASP、JSP、Servlet java 文件等更复杂的代码之上。您应该选择*动态网络项目*以获得更多好处。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-05T15:30:29.647

动态和静态。除了图像和 HTML 文件等静态资源外，动态 Web 项目还可以包含动态 Java EE 资源，例如 servlet、JSP 文件、过滤器和相关元数据。静态 Web 项目仅包含静态资源。当您创建 Web 项目时，您可以包括级联样式表和 JSP 标记库（用于动态 Web 项目），以便您可以使用更丰富的项目资源集开始开发。

更多信息： [http ://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.wst.webtools.doc.user%2Ftopics%2Fccwebprj.html](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.wst.webtools.doc.user%2Ftopics%2Fccwebprj.html)

# sql - 与 SQL Server 中的内部查询相关的问题

> ID：13081654
> 
> 赞同：0
> 
> 时间：2012-10-26T06:08:52.593
> 
> 标签：sql, sql-server

我在 SQL Server 数据库中有以下表格：

```
(1) StudentMaster (StudentId, StudentName)

(2) SubjectMaster (SubjectId, SubjectName)

(3) AttendanceMaster (AttendanceId,StudentId,SubjectId,Attendance,Date)

Data in AttendanceMaster can be in Following format :

AttendanceMaster :
           AttendanceId   StudentId   SubjectId    Attendance   Date
              3001          33          1            P           1/1/2011 
              3001          57          2            P1          1/2/2011 
              3001          33          1            P           1/3/2011 
              3001          57          2            P2          1/4/2011 
              3001          33          1            P1          1/5/2011 
```

我想获得以下格式的 SubjectWise 个人出勤详细信息：

```
StudentName  SubjectName   Total(P)  Total(P1)  Total(P2)
 Ghanshyam     Maths         90        10          5
 John          Maths         85        15          5
 Ghanshyam     Science       70        20          15
 John          Science       80        30          5 
```

我尝试了以下查询：

```
select StudentName, SubjectName,
(select count(*) from AttendanceMaster innerAM where innerAM.StudentId = StdM.StudentId and innerAM.SubjectId=SubM.SubjectId and innerAM.Attendance = 'P') as Total(P),
(select count(*) from AttendanceMaster innerAM where innerAM.StudentId = StdM.StudentId and innerAM.SubjectId=SubM.SubjectId and innerAM.Attendance = 'P1') as Total(P1),
(select count(*) from AttendanceMaster innerAM where innerAM.StudentId = StdM.StudentId and innerAM.SubjectId=SubM.SubjectId and innerAM.Attendance = 'P1') as Total(P2)
from AttendanceMaster AM inner join StudentMaster StdM on AM.StudentId = StdM.StudentId
inner join SubjectMaster SubM on AM.SubjectId = SubM.SubjectId 
```

我得到了结果，但是执行时间太长了..（大约 5 到 6 分钟）

```
so what can i do to decrease execution time... 
```

并且编写查询以获取 Total(P),Toal(P1),Total(P2) 是否正确？请指定其他 SQL 语法

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T06:17:23.863

尝试这个。如果您的查询仍然运行缓慢，则需要检查表上是否有索引。如果您的表很大并且没有索引，它仍然可能很慢。

```
select
    StM.StudentName,
    SbjM.SubjectName,
    count(case when AtM.Attendance = 'P' then 1 else null end) as Total(P),
    count(case when AtM.Attendance = 'P1' then 1 else null end) as Total(P1),
    count(case when AtM.Attendance = 'P2' then 1 else null end) as Total(P2)
from StudentMaster  as StM
    inner join AttendanceMaster as AtM on AtM.StudentId = StM.StudentId
    inner join SubjectMaster as SbjM on SbjM.SubjectId = AtM.SubjectId
group by
    StM.StudentName,
    SbjM.SubjectName 
```

如果列`Attendance`除了 P、P1 和 P2 之外没有任何值，则要计算总数，您只需添加`count(*) as Total`. 如果除了 P、P1 和 P2 之外还有其他值，有两种方法。首先 - 您可以在 where 子句的 ('P', 'P1', 'P2') 中添加 AtM.Attendance：

```
select
    StM.StudentName,
    SbjM.SubjectName,
    count(case when AtM.Attendance = 'P' then 1 else null end) as Total(P),
    count(case when AtM.Attendance = 'P1' then 1 else null end) as Total(P1),
    count(case when AtM.Attendance = 'P2' then 1 else null end) as Total(P2),
    count(*) as Total
from StudentMaster  as StM
    inner join AttendanceMaster as AtM on AtM.StudentId = StM.StudentId
    inner join SubjectMaster as SbjM on SbjM.SubjectId = AtM.SubjectId
where AtM.Attendance in ('P', 'P1', 'P2')
group by
    StM.StudentName,
    SbjM.SubjectName 
```

或者你可以这样写

```
select
    StM.StudentName,
    SbjM.SubjectName,
    count(case when AtM.Attendance = 'P' then 1 else null end) as Total(P),
    count(case when AtM.Attendance = 'P1' then 1 else null end) as Total(P1),
    count(case when AtM.Attendance = 'P2' then 1 else null end) as Total(P2),
    count(case when AtM.Attendance in ('P', 'P1', 'P2') then 1 else null) as Total
from StudentMaster  as StM
    inner join AttendanceMaster as AtM on AtM.StudentId = StM.StudentId
    inner join SubjectMaster as SbjM on SbjM.SubjectId = AtM.SubjectId
group by
    StM.StudentName,
    SbjM.SubjectName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:25:11.937

```
select MAX(sm.StudentName) as StudentName,
       MAX(subm.SubjectName) as SubjectName,
       SUM(CASE WHEN am.Attendance='P' then 1 else 0 end) as TotalP,
       SUM(CASE WHEN am.Attendance='P1' then 1 else 0 end) as TotalP1,
       SUM(CASE WHEN am.Attendance='P2' then 1 else 0 end) as TotalP2

from AttendanceMaster am inner join StudentMaster sm
on am.StudentId=sm.StudentId
inner join SubjectMaster subm on am.SubjectId=subm.SubjectId

group by am.StudentId,
         am.SubjectId 
```

# python - 在每周进行多次部署的 WSGI 应用程序中，pyc 文件有什么好处吗？

> ID：13081659
> 
> 赞同：2
> 
> 时间：2012-10-26T06:09:31.507
> 
> 标签：python, django, wsgi, pyc

似乎随着频率的增加，我被运行过时代码的 pyc 文件所吸引。

这导致部署脚本每次都清理 *.pyc，否则部署似乎不会生效。

我想知道，长期运行的 WSGI 应用程序中的 pyc 文件有什么好处（如果有的话）？据我所知，唯一的好处是缩短了启动时间，但我无法想象它有那么重要——即使是这样，每次部署新代码时，你也不能真正使用旧的 pyc 文件。

这让我认为最佳实践是运行设置了 PYTHONDONTWRITEBYTECODE 环境变量的 WSGI 应用程序。

我弄错了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T06:16:29.153

进行部署的最佳策略是将部署的文件写入新目录，然后使用符号链接或类似的方式在一次更改中交换代码库。这具有自动清除任何旧`.pyc`文件的附带好处。

这样，您将获得两全其美 - 干净和原子部署，以及`.pyc`您的 web 应用程序是否需要重新启动时的缓存。

如果您保留最后的`N`部署目录（按日期/时间命名它们很有用），您还可以轻松地“回滚”到以前部署的代码版本。如果您有多台服务器机器，您也可以部署到所有机器上，但要等到所有机器都获得新代码后再切换它们。

# mongodb - 如何在 Mongodb 中添加文本文件？

> ID：13081660
> 
> 赞同：1
> 
> 时间：2012-10-26T06:09:34.113
> 
> 标签：mongodb, mmap, gridfs

我有一定的要求在 mongodb 中插入一个文本文件，将其检索回来，然后检查文件是否相同。我希望在没有 GridFS 的情况下做到这一点，因为我想要使用的文件小于 16MB，所以你们能否建议我如何做到这一点，考虑到 mongodb 的设置是非常基本的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T08:26:19.143

小于 16 MB 的文本文件可以作为简单的键值对存储在纯文档中。不需要 GridFS，也不需要二进制或 JSON 对象。如有疑问，请尝试。有用。将文件的内容读入一个变量并将其存储在一个键上，比如我不知道的“数据”。检索对象并将“数据”键的值写入您喜欢的任何内容。换行符全部保留，因此无需在文件中执行任何操作。真的很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T03:43:14.650

您可以将 JSON 对象或二进制文件（均存储为 BSON 对象）插入到 mongodb。

如果要插入文本文件的内容，则可以将其作为 JSON 对象插入。

但是如果要插入文本文件或二进制文件，则必须使用 GridFS。

除非您将文件拆分为块并存储为 JSON 对象，否则没有 GridFS 就无法将文件插入到 mongodb 中，这正是 GridFS 已经在做的事情。

# frameworks - 任何用于度量监控的 java 框架？

> ID：13081661
> 
> 赞同：0
> 
> 时间：2012-10-26T06:09:35.483
> 
> 标签：frameworks, notifications, monitor

我每天都有新的指标输入数据库。我想监控它，如果指标与前一天相比变化很大，我想发送通知，比如发送电子邮件？那么有没有什么java框架可以实现这个功能呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:18:52.993

前段时间我读到关于使用 Jenkins 为各种指标相关测试运行作业。如果作业失败，Jenkins 会自动发送一封电子邮件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-26T06:16:55.813

如果您使用的是 Eclipse，则可以使用它。 [http://marketplace.eclipse.org/content/eclipse-metrics#.UIoqvMXMiNA](http://marketplace.eclipse.org/content/eclipse-metrics#.UIoqvMXMiNA)您可以调用 API 并做您想做的事情。

# php - 从我的 php-application 在谷歌驱动器中打开和编辑

> ID：13081671
> 
> 赞同：2
> 
> 时间：2012-10-26T06:10:20.907
> 
> 标签：php, google-docs, google-drive-api

用户可以从我的 php 应用程序上传文件，这些文件将存储在我的谷歌驱动器中。用户需要查看这些文档并能够更新文件。我怎样才能做到这一点。我是 google apis 的新手。请帮助我。提前感谢您的任何答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:56:41.297

您可以授予用户对这些文件的编辑权限。查看 Drive API 的[permissions.insert](https://developers.google.com/drive/v2/reference/permissions/insert)方法。您将为需要能够编辑文件的每个用户创建一个权限，然后他们可以在 Google Drive 中进行编辑。

# php - 在 IIS 中自定义 PHP MVC 中定义 Controller 和 Action 时出现 404 页面

> ID：13081673
> 
> 赞同：0
> 
> 时间：2012-10-26T06:10:33.160
> 
> 标签：php, model-view-controller, iis-7, url-rewriting, web-config

我正在构建一个基于[http://www.youtube.com/watch?v=Aw28-krO7ZM](http://www.youtube.com/watch?v=Aw28-krO7ZM)（创建您自己的 MVC - Jream）的自定义 PHP MVC 框架，但是我使用 IIS 作为我的本地网络服务器。我已经安装了 Url Rewrite Module 并添加了以下规则：

```
<rewrite>
  <rules>
    <rule name="MyRewriteRule" stopProcessing="true">
      <match url="^(.*)$" ignoreCase="false"/>
      <action type="Rewrite" url="index.php?url={R:1}" appendQueryString="true" />
      <conditions>
        <add input="{REQUEST_FILENAME}" matchType="IsFile" />
        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" />
      </conditions>
    </rule>
 </rules>
</rewrite> 
```

MVC 的结构如下：

```
application(folder)
   config(folder), controllers(folder), view(folder), model(folder) etc...
public(folder)
   css, images, js, etc...
index.php
web.config 
```

该 url`http://localhost:8080/MyApp/`工作得很好，但`http://localhost:8080/MyApp/index/`失败了……或者`/home`，`/legal`任何与此相关的控制器。在自定义 Bootstrap.php 文件中执行以下代码：

```
<?php class Bootstrap{
   function __construct(){
      //format the url
      $url=isset($_GET['url'])? $_GET['url']: null; //when a controller is specified it fails before even hitting this point, im sent to the error 404 page before getting past here
      $url=rtrim($url,'/');
      $url=explode('/',$url);

      if(empty($url[0])){
         require 'application/controllers/index.php';
         //.....blah blah blah
      }
        //more irrelevant code...
         require 'application/controllers/'.url[0]'.php';
      //more irrelevant code...
     }} ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:29:58.297

开始改变

`require 'application/controllers/'.url[0]'.php';`

至

`require 'application/controllers/'.$url[0]'.php';`

# ajax - 如何在 Jqgid 的编辑行中添加选择框？

> ID：13081674
> 
> 赞同：0
> 
> 时间：2012-10-26T06:10:37.123
> 
> 标签：ajax, jquery, jqgrid, jqgrid-inlinenav

我正在使用 jqgrid。我想添加记录内联导航现在我想在行字段中添加选择框。怎么可能？我使用 Ajax 从数据库中获取数据，我想将这些数据添加到选择框中。怎么可能？请帮助我的 Ajax 代码

```
$.ajax({
 url : "getAllWards.html",
 data : "&time=" + new Date().getTime(),
 type : 'GET',
 dataType : 'JSON',
 success : function(data) {}
}); 
```

我的 JqGrid 代码

```
jQuery("#room").jqGrid(
{
 mtype : 'GET',
 url : "listAllRooms.html",
 colModel : [ .....,
 ,{
name : 'wardType',
index : 'wardType',
width : 150,
edittype: "select",
editrules: { required: true },
editoptions: { size: 71},
editable:true,
}], 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T07:40:36.597

If you want use `edittype: "select"` you should specify `value` or `dataUrl` property of [editoptions](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:common_rules#editoptions).

[The demo](http://www.ok-soft-gmbh.com/jqGrid/InlineEditingInlineNav.htm) provide as example.

**UPDATED**: It seems to me that you should better use `dataUrl` with probably `buildSelect` for formatting. See [the answer](https://stackoverflow.com/a/4102155/315935) and [another one](https://stackoverflow.com/a/7877286/315935).

# mysql - xcode应用程序启动时出现空白屏幕，那么如何以编程方式调用它？

> ID：13081678
> 
> 赞同：1
> 
> 时间：2012-10-26T06:11:13.090
> 
> 标签：mysql, ios, xcode

我在应该如此简单的事情上浪费了 12 个小时，但每次我在 xcode 中加载我的应用程序时，它都会给我一个黑屏（不，这不是加载屏幕）。如何在启动时以编程方式调用我的故事板窗口，以便我可以在应用程序中移动到更有价值的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:15:28.753

我不知道这是否是您的问题，但是您的 app-info.plist 文件中应该有一个名为“主故事板文件基本名称”的条目，其值应该是您的启动故事板的名称。

# javascript - js事件中的返回值

> ID：13081680
> 
> 赞同：-3
> 
> 时间：2012-10-26T06:11:18.357
> 
> 标签：javascript, jquery, return-value

> **可能重复：**
> [Jquery 事件处理程序返回值](https://stackoverflow.com/questions/4379403/jquery-event-handlers-return-values)

在 js 事件中返回值（如更改、单击）是否重要？如果是的话我可以在哪里使用它？

我找不到有关此的任何信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T06:15:45.407

如果您想阻止事件的默认操作并停止它的传播，您可以使用，否则不需要`return false`using语句。`return`

# c - Sizeof 返回不正确的数组长度

> ID：13081682
> 
> 赞同：1
> 
> 时间：2012-10-26T06:11:34.597
> 
> 标签：c, arrays, pointers, sizeof, rot13

> **可能重复：**
> [C 编程语言中数组的大小？](https://stackoverflow.com/questions/1975128/sizeof-an-array-in-the-c-programming-language)

我一直在摆弄 C 以便更好地熟悉它，并认为我可能偶然发现了一个我不确定如何解决的初始化/指针问题。下面的程序是 ROT13 的一个实现，所以它接受一个输入字符串，并将每个字母移动 13，得到密文。我的程序的输出显示了正确的班次，但它不能用于超过 4 个字符，这让我想知道 sizeof 是否使用不正确。任何其他建议表示赞赏，我确定我在这一点上搞砸了一些事情。

```
#include <stdio.h>
#include <string.h>

void encrypt(char *);

int main(void){

    char input[] = "fascs";
    encrypt(input);

    return 0;
}

void encrypt(char *input){

    char alphabet[] = "abcdefghijklmnopqrstuvwxyz";

    printf("Input: %s \n", input);

    int inputCount = sizeof(input);

    printf("Characters in Input: %i \n\n", inputCount);

    //holds encrypted text
    char encryptedOutput[inputCount];

    //Initialize counters
    int i, j = 0;

    // loop through alphabet array, if input=current letter, shift 13 mod(26),
    // push result to output array, encryptedOutput
    for(i = 0; i < inputCount; i++){
        for(j = 0; j < 26; j++){
            if(input[i] == alphabet[j]){
                encryptedOutput[i] = alphabet[(j + 13) % 26];
            }
        }
    }

    //Nul Termination for printing purposes
    encryptedOutput[i] = '\0';

    printf("Rot 13: %s \n\n", encryptedOutput);

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T06:16:13.413

`sizeof()`in`encrypt`不会像你想要的那样表现。在内部`encrypt`，`sizeof(char *)`是`4`（在 32 位机器上）或`8`（在 64 位机器上），您可以看到是指针的大小。

要获得 ，`sizeof(input)`您必须更改`sizeof`为`strlen`. 因此解决方案=`strlen(input)`

为什么会这样？？当您将数组传递给函数时，该数组在内部表示为指针。在被调用函数的末尾`input`只是一个指针，它根据您的机器给出*或*字节大小`4`。`8`

要获得`sizeof`of `input`，只需使用这样的宏： `#define SIZEOF(x) (sizeof(x)/sizeof(x[0]))` 并在*定义* `x`. 在你的程序中`x`，`input`在`main()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T06:14:05.647

`sizeof`返回其参数类型的大小。它无法确定指向字符数组的指针中有多少个字符。

`strlen`如果您知道您的字符串是空终止的，您应该考虑使用该函数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-26T06:14:56.480

`input`有类型`char*`（读作“指向字符的指针”）。`sizeof(input)`给你指针的大小。您可能想使用[strlen](http://en.cppreference.com/w/c/string/byte/strlen)来查找字符串的长度，或者将长度作为附加参数传递给函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T06:23:00.210

这条线会导致您的问题。

```
int inputCount = sizeof(input); 
```

sizeof 在这种情况下只确定变量的大小`char *`。在 32 位系统上，每个指针的大小为 4 个字节。

您无法在运行时确定数组的大小。您可以 * 将输入的大小作为参数传递 * 因为在您的情况下它是一个字符串，如果字符串以 . 结尾，则使用`strlen`in`string.h`获取字符串的长度`\0`。

但是在这两种情况下，您都不能简单地使用分配输出缓冲区

```
char output[variable_containing_size]; 
```

您需要`malloc()`在运行时使用动态分配内存，甚至更容易将输出参数作为参数传递给您的函数。

```
#include <stdio.h>
#include <string.h>

#define BUFFER_LENGTH 80

void encrypt(const char * input, char *output);

int main(void){

    char input[BUFFER_LENGTH] = "fascs";
    char output[BUFFER_LENGTH] = {0}; // initialize every field with \0
    encrypt(input, output);

    return 0;
}
void encrypt(const char *input, char *output){

    char alphabet[] = "abcdefghijklmnopqrstuvwxyz";

    printf("Input: %s \n", input);

    int inputCount = strlen(input);

    printf("Characters in Input: %i \n\n", inputCount);

    //Initialize counters
    int i, j = 0;

    // loop through alphabet array, if input=current letter, shift 13 mod(26),
    // push result to output array, output
    for(i = 0; i < inputCount; i++){
        for(j = 0; j < 26; j++){
            if(input[i] == alphabet[j]){
                output[i] = alphabet[(j + 13) % 26];
            }
        }
    }

    //Nul Termination for printing purposes
    output[i] = '\0';

    printf("Rot 13: %s \n\n", output);

} 
```

但在这种情况下，该`encrypt()`函数根本不进行大小检查，如果您不小心，这很容易导致缓冲区溢出。

# c# - c# - 监控电脑的电子邮件活动

> ID：13081687
> 
> 赞同：0
> 
> 时间：2012-10-26T06:11:56.867
> 
> 标签：c#, asp.net, .net, wpf

我想在 wpf 中开发一个应用程序来监视我的计算机上的电子邮件活动。

例如，通过浏览器从我的雅虎帐户发送邮件后.. 我想在我的 WPF 应用程序的数据网格中显示邮件详细信息，如发件人 ID、主题等。

在 wpf C# 中有可能吗？怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T07:15:38.937

有可能的。

但是，您需要集成要使用的应用程序的 API。

对于雅虎，请查看此 [http://developer.yahoo.com/mail/docs/user_guide/](http://developer.yahoo.com/mail/docs/user_guide/)

对于 gmail，您可以在 google 上找到。

你需要做的是有两种方法

1.  在 WPF 中开发一个屏幕，让用户使用您的应用程序发送邮件
2.  访问 API 以从 Yahoo Server 或 Gmail Server 获取数据

# javascript - 表单验证：正确填写所有表单后，我的成功警报弹出窗口不会显示

> ID：13081692
> 
> 赞同：0
> 
> 时间：2012-10-26T06:12:11.687
> 
> 标签：javascript, html

我的Javascript代码：

```
if (valid == false){
    alert(errmsg);
    return false;
}else {
    var success = "Name: "+fname+" "+lname+"\n"+
        "Email: "+email+"\n"+"Address: "+adr1+", "+adr2+","+
        adr3+" "+zip;
    alert(success);
} 
```

弹出的只是一个空白的警报窗口。任何帮助或见解将不胜感激。我对此有点陌生，如果您需要澄清，请告诉我

这是我的代码的html部分

```
 <form id="contactInfo" action="">

    <p class="name">
        <span class="nameHead">Name</span>
        <br />
        First: 
        <input type="text" name="fname" id="fname" />
        Last:
        <input type="text" name="lname" id="lname" />
    </p>
    <p>
        Email:
        <input type="text" name="email" id="email" size="55" />
    <p class="address"> 
        <span class="addressHead">Address</span>
        <br />
        Street:<input type="text" name="street" id="adr1" />
        <br />
        City: <input type="text" name="city" id="adr2"/>
        <br />
        State:<input type="text" name="state" id="adr3" size="2" maxlength="2"/>
        <br />
        ZIP Code: <input type="text" name="zipCode" id="zip" size="10" maxlength="10"/>
    </p>
    <p>
        <input type="submit"  value="Submit" onclick="return  validate();"  />
        <input type="reset"  value="Reset" />
    </p>
</form> 
```

如果用户输入了错误的姓名、城市、邮编和电子邮件（搜索模式），那么我的 if 语句看起来像这样

```
 if (adr1 == ''){
    errmsg = errmsg + "Street address is blank\n";
    valid = false;
    focusA1.focus();
    focusA1.select();
}else if(adr1S == -1){
    errmsg = errmsg + "Street address should be in the form of digits followed by letters\n";
    valid = false;
    focusA1.focus();
    focusA1.select();
} 
```

如果 valid 最终在函数末尾为 false ，则 errmsg 会显示错误并专注于表单的该部分。我最终遇到的一件事是，每当页面加载时，表单都会自动提交。这和这有什么关系吗？

```
 <body onload= "rotate()">

<img src="images/a.jpg" name="banner" class="banner" /> 
```

旋转横幅的代码？

我设置它的方式是在正确输入所有表单字段时显示另一个警报，当我正确输入它们时不显示警报

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:35:12.780

在您的验证功能中尝试这样的事情

```
function validation()
{
var valid == true;

    if(cond1)
    {
    alert(cond1fails);
    valid=false;
    }

    if(cond2)
    {
    alert(cond2fails);
    valid=false;
    }

.... and so on on to all the conditions .....

// then in the last line
return valid;
} 
```

试试这个，它应该可以正常工作

# mysql - 将批处理文件的路径传递给mysql

> ID：13081693
> 
> 赞同：0
> 
> 时间：2012-10-26T06:12:11.663
> 
> 标签：mysql, batch-file

**我的批处理文件将包含如下内容：**

```
set MUSER=root
set MPASS=xprd123
set MHOST=172.33.49.55
set DB=DBName1
set MBIN=C:\Program Files\MySQL\MySQL Server 5.5\bin

set scriptpath=D:/Graph_draw/ASSET_Creation/EXTERNAL/MYSQL_STATS_COLLECTOR/foldrname1
"%MBIN%\mysql.exe" -u"%MUSER%" -p"%MPASS%" -h "%MHOST%" "%DB%" -e "set @2:='%scriptpath%'; source DBQuery1.sql;" 
```

**DBQuery1.sql 的内容将是：**

```
SELECT 'INNODB_OS_LOG_WRITTEN','QUESTIONS'
UNION
select MAX(IF(variable_name = 'INNODB_OS_LOG_WRITTEN', VARIABLE_VALUE, NULL)) 
AS INNODB_OS_LOG_WRITTEN, MAX(IF(variable_name = 'QUESTIONS', VARIABLE_VALUE, NULL)) 
AS QUESTIONS from information_schema.GLOBAL_STATUS INTO OUTFILE '@2/Stats.csv'
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
LINES TERMINATED BY '\n'; 
```

我不确定这是将路径传递给 DBQuery1.sql 中的 SELECT 查询的方法。

此代码不起作用。

我得到的错误是：

```
ERROR 1 (HY000) at line 1 in file: 'DBQuery1.sql': Can't create/write to file 'C
:\Documents and Settings\All Users\Application Data\MySQL\MySQL Server 5.5\Data\
@2\Stats.csv' (Errcode: 2) 
```

我查看了有关将路径传递给批处理文件的其他帖子，但无论我尝试了什么，我都无法解决这个问题。

当我执行批处理文件时，我不确定路径是否传递到 sql 文件中，如果是，为什么 @2 没有传递路径。

有人可以帮忙吗？

**更新 ：**

为了补充我上面给出的细节，我发现传递的路径是在 sql 文件中接收的。

我打印了这样的变量输出：

```
**SELECT @2;**
SELECT 'INNODB_OS_LOG_WRITTEN','QUESTIONS' 
UNION 
select MAX(IF(variable_name = 'INNODB_OS_LOG_WRITTEN', VARIABLE_VALUE, NULL)) AS INNODB_OS_LOG_WRITTEN, 

MAX(IF(variable_name = 'QUESTIONS', VARIABLE_VALUE, NULL)) AS QUESTIONS 
from information_schema.GLOBAL_STATUS  
INTO OUTFILE '@2\Stats.csv' FIELDS TERMINATED BY ',' ENCLOSED BY '\"' LINES TERMINATED BY '\n'; 
```

我得到的输出是：

```
+------------------------------------------------------------------------+
| @2                                                                     |
+------------------------------------------------------------------------+
| D:/Graph_draw/ASSET_Creation/EXTERNAL/MYSQL_STATS_COLLECTOR/foldrname1 |
+------------------------------------------------------------------------+
ERROR 1 (HY000) at line 2 in file: 'DBQuery1.sql': Can't create/write to file 'C
:\Documents and Settings\All Users\Application Data\MySQL\MySQL Server 5.5\Data\
@2\Stats.csv' (Errcode: 2) 
```

这意味着@2 没有获取 '@2\Stats.csv' 中的值，而是 SELECT @2; 在 sql 中获取值。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T11:14:06.417

问题是，正如您自己指出的那样，用户定义的变量@2 没有扩展到它在 INTO OUTFILE 的文件规范中的值。有一种方法可以解决这个问题，使用动态 SQL：

```
SET @stmt = CONCAT(
    ' SELECT ''INNODB_OS_LOG_WRITTEN'',''QUESTIONS'''
,   ' UNION'
,   ' SELECT MAX(IF(variable_name = ''INNODB_OS_LOG_WRITTEN'', VARIABLE_VALUE, NULL)) AS INNODB_OS_LOG_WRITTEN'
,   ' ,      MAX(IF(variable_name = ''QUESTIONS'', VARIABLE_VALUE, NULL)) AS QUESTIONS'
,   ' FROM information_schema.GLOBAL_STATUS'
,   ' INTO OUTFILE ', @2, '/Stats.csv'
,   ' FIELDS TERMINATED BY '','''
,   ' ENCLOSED BY ''"'''
,   ' LINES TERMINATED BY ''\n'''
);
PREPARE stmt FROM @stmt;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

# r - 如何防止函数污染全局命名空间？

> ID：13081696
> 
> 赞同：12
> 
> 时间：2012-10-26T06:12:20.320
> 
> 标签：r

我的 R 项目变得越来越复杂，我开始寻找一些与 Java/C# 中的类或 python 中的模块等效的构造，这样我的全局命名空间就不会被那些从未在外部使用过的函数弄得乱七八糟一个特定的 .r 文件。

所以，我想我的问题是：在多大程度上可以将函数的范围限制在特定的 .r 文件或类似文件中？

我想我可以将整个 .r 文件变成一个巨大的函数，然后将函数放入其中，但这会与回显相混淆：

我的文件.r：

```
myfile <- function() {
    somefunction <- function(a,b,c){}
    anotherfunction <- function(a,b,c){}

    # do some stuff here...
    123
    456
    # ...
}
myfile() 
```

输出：

```
> source("myfile.r",echo=T)

> myfile <- function() {
+     somefunction <- function(a,b,c){}
+     anotherfunction <- function(a,b,c){}
+ 
+     # do some stuff here...
+     # . .... [TRUNCATED] 

> myfile()
> 
```

您可以看到“123”没有打印出来，即使我们`echo=T`在`source`命令中使用了。

我想知道是否还有其他更标准的构造，因为将所有内容放在一个函数中听起来不像是真正标准的东西？但也许是？此外，如果这意味着`echo=T`有效，那么这对我来说是一个明确的奖励。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-26T18:56:04.197

首先，正如@Spacedman 所说，你会得到一个包裹的最佳服务，但还有其他选择。

## S3 方法

R 的原始“面向对象”被称为 S3。R 的大部分代码库都使用这种特定的范例。它`plot()`适用于各种对象。`plot()`是一个通用函数，R 核心团队和包开发人员可以并且已经为`plot()`. 严格来说，这些方法可能具有类似`plot.foo()`where`foo`是函数为其定义`plot()`方法的对象类的名称。S3 的美妙之处在于，您（几乎）不需要知道或调用`plot.foo()`您只是使用`plot(bar)`，R`plot()`会根据 object 的类计算出要分派到哪个方法`bar`。

在您对问题的评论中，您提到您有一个函数，该函数`populate()`具有类的方法（有效），`"crossvalidate"`并且`"prod"`您将其保存在单独的`.r`文件中。设置它的 S3 方法是：

```
populate <- function(x, ...) { ## add whatever args you want/need
    UseMethod("populate")
}

populate.crossvalidate <-
    function(x, y, z, ...) { ## add args but must those of generic
    ## function code here
}

populate.prod <-
    function(x, y, z, ...) { ## add args but must have those of generic
    ## function code here
} 
```

给定一些`bar`带有类的对象`"prod"`，调用

```
populate(bar) 
```

将导致 R 调用`populate()`（泛型），然后它会查找具有名称的函数，`populate.prod`因为那是`bar`. 它找到我们的`populate.prod()`，然后调度该函数，将我们最初指定的参数传递给它。

所以你看到你只使用泛型名称引用方法，而不是完整的函数名称。R 为您计算出需要调用的方法。

这两种`populate()`方法可以具有非常不同的参数，但严格来说它们应该具有与泛型函数相同的参数。所以在上面的例子中，所有方法都应该有参数`x`和`...`. （使用公式对象的方法有一个例外，但我们在这里不必担心。）

## 包命名空间

从 R 2.14.0 开始，所有 R 包都有自己的命名空间，即使包作者没有提供命名空间，尽管命名空间在 R 中的存在时间比这要长得多。

在您的示例中，我们希望注册`populate()`泛型，它是 S3 系统的两种方法。我们还希望导出通用函数。通常我们不希望或不需要导出单个方法。因此，将您的函数弹出到包源`.R`文件`R`夹中的文件中，然后在包源的顶层创建一个名为`NAMESPACE`并添加以下语句的文件：

```
export(populate) ## export generic

S3method(populate, crossvalidate) ## register methods
S3method(populate, prod) 
```

然后，一旦你安装了你的包，你会注意到你可以调用`populate()`，但是如果你尝试`populate.prod()`从提示符或另一个函数中直接按名称调用 etc，R 会抱怨。这是因为作为单个方法的函数尚未从命名空间中导出，因此在命名空间之外是不可见的。包中调用的任何函数`populate()`都可以访问您定义的方法，但包外的任何函数或代码根本看不到这些方法。如果需要，可以使用`:::`运算符调用非导出函数，即

```
mypkg:::populate.crossvalidate(foo, bar) 
```

将起作用，`mypkg`您的包的名称在哪里。

老实说，您甚至不需要`NAMESPACE`文件，因为 R 会在您安装软件包时自动生成一个文件，该文件会自动导出所有功能。这样，您的两种方法将显示为`populate.xxx()`（`xxx`特定方法在哪里）并将作为 S3 方法运行。

阅读编写 R 扩展手册中的[第 1 节创建 R 包](http://cran.r-project.org/doc/manuals/R-exts.html#Creating-R-packages)以了解所涉及的详细信息，但如果你不想这样做，你不需要做一半，特别是如果包是供你自己使用的。只需创建适当的包文件夹（即`R`和），将文件`man`粘贴到. 在您添加的位置写入单个文件`.R``R``.Rd``man`

```
\name{Misc Functions}
\alias{populate}
\alias{populate.crossvalidate}
\alias{populate.prod} 
```

在文件的顶部。添加`\alias{}`您拥有的任何其他功能。然后你需要构建和安装包。

## 替代使用`sys.source()`

虽然我不（不能！）真的推荐我在下面提到的作为长期可行的选择，但有一种替代方法可以让您`.r`按照最初的要求将功能与单个文件隔离开来。这是通过使用环境而不是名称空间来实现的，并且不涉及创建包。

该`sys.source()`函数可用于从`.R`文件中获取 R 代码/函数并在环境中对其进行评估。当您`.R`的文件正在创建/定义函数时，如果您*在*另一个环境中获取它，那么这些函数将在该环境中定义。默认情况下，它们在标准搜索路径上不可见，因此`populate()`定义的函数`crossvalidate.R`不会与`populate()`定义的冲突`prod.R`只要您使用两个不同的环境。当您需要使用一组功能时，您可以将环境分配给搜索路径，然后它将奇迹般地对所有内容可见，完成后您可以将其分离。附加其他环境，使用它，分离等。或者您可以安排在特定环境中使用诸如`eval()`.

就像我说的那样，这不是推荐的解决方案，但它会按照您描述的方式工作。例如

```
## two source files that both define the same function
writeLines("populate <- function(x) 1:10", con = "crossvalidate.R")
writeLines("populate <- function(x) letters[1:10]", con = "prod.R")

## create two environments
crossvalidate <- new.env()
prod <- new.env()

## source the .R files into their respective environments
sys.source("crossvalidate.R", envir = crossvalidate)
sys.source("prod.R", envir = prod)

## show that there are no populates find-able on the search path

> ls()
[1] "crossvalidate" "prod" 
> find("populate")
character(0) 
```

现在，附加其中一个环境并调用`populate()`：

```
> attach(crossvalidate)
> populate()
 [1]  1  2  3  4  5  6  7  8  9 10
> detach(crossvalidate) 
```

现在在另一个环境中调用该函数

```
> attach(prod)
> populate()
 [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j"
> detach(prod) 
```

显然，每次你想使用一个特定的函数时，你都需要在`attach()`它的环境中调用它，然后再调用它`detach()`。这是一种痛苦。

我确实说过您可以安排在规定的环境中评估 R 代码（实际上是表达式）。例如，您可以使用`eval()`of `with()`。

```
> with(crossvalidate, populate())
[1]  1  2  3  4  5  6  7  8  9 10 
```

至少现在您只需要一次调用即可运行`populate()`您选择的版本。但是，如果用它们的全名来调用这些函数，例如`populate.crossvalidate()`太费力（根据您的评论），那么我敢说即使是这个`with()`想法也会太麻烦？无论如何，当您可以很容易地拥有自己的 R 包时，为什么还要使用它。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-26T07:33:33.250

不要担心“制作包装”的复杂性。别再这样想了。你要做的是：

1.  在您正在处理项目的文件夹中，创建一个名为“R”的文件夹
2.  把你的 R 代码放在那里，每个文件一个函数
3.  在您的项目目录中创建一个说明文件。查看现有示例以了解确切格式，但您只需要几个字段。
4.  获取开发工具。`install.packages("devtools")`
5.  使用开发工具。`library(devtools)`

现在，将函数写入 R 文件夹中的 R 文件。要将它们加载到 R 中，请不要获取它们。做`load_all()`。您的函数将被加载，但不会被加载到全局环境中。

编辑您的 R 文件之一，然后再做`load_all()`一次。这将加载 R 文件夹中的所有修改文件，从而更新您的函数。

就是这样。编辑，`load_all`冲洗并重复。您创建了一个包，但它非常轻量级，您不必处理 R 包构建工具的束缚和纪律。

我已经看到、使用甚至编写过尝试实现用于加载对象的轻量级打包机制的代码，但没有一个比 devtools 做得更好。

万岁哈德利！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-26T06:24:58.853

您可能需要考虑制作一个包裹。作为替代方案，您可以查看环境。最后，RStudio 的项目可能更适合您。

# php - 防止在 php 中取消设置类

> ID：13081699
> 
> 赞同：3
> 
> 时间：2012-10-26T06:12:33.410
> 
> 标签：php

我创建了一个实现 ArrayAccess 的类，并添加了一个函数来防止 WRITE 操作：

```
 $Obj->Add("key","something");
 $Obj->Add("key2","something2");
 $Obj->SetReadOnly(); // sets read only property
 unset($Obj["key2"]); // throws error, object is readonly 
```

但是，我也想防止取消设置对象：

```
 unset($Obj); 
```

我能做到吗？我听到建议。感谢帮助！。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T06:37:49.757

我无法想象你真的想这样做的任何情况。我也可以想象，当所有对象都被销毁时，这样做会导致脚本终止时出现严重问题。PHP 手册中关于在析构函数中抛出异常的内容如下：

> 笔记：
> 
> 尝试从析构函数（在脚本终止时调用）抛出异常会导致致命错误。

上面的语句暗示如果您不在脚本终止阶段，您可以抛出异常，所以也许以下是可能的。

```
public function __destruct ()
{
    if ($this -> isReadOnly ())
    {
        throw new Exception ('Class is read-only');
    }
} 
```

但是，正如手册指出的那样，这将在脚本关闭期间触发致命错误。

老实说，我看不出想要防止对象破坏的任何意义。应该由程序员来管理对象的生命周期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T06:58:03.223

`unset()`如果这是您要阻止的，则实际上并不会破坏对象。

仅当对象的所有引用都未设置或不再在范围内时，才会破坏对象。即便如此，在垃圾收集器运行之前它也不会发生。

因此，如果您担心某些代码会干扰您的对象，那么您已经做好了使用只读逻辑使其不可变的工作。

假设你有

```
$Obj = gotMyObjectSomehow(); 
```

并且您需要将其传递给您不想取消设置 $Obj 的其他代码。只要在函数内部调用该代码，就没有什么可担心的。如果你打电话

```
someFunction($Obj); 
```

假设该函数取消了它传入的参数

```
function someFunction($anObj) {
    unset($anObj);
} 
```

那么您的原始`$Obj`变量仍将被设置。

该函数创建引用原始对象的第二个变量，并在其自己的范围内使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T06:56:57.430

您无法控制未设置的变量名称，因为这些名称在技术上不是所引用对象的一部分。考虑以下：

```
$a = new MyObject();
$b = $a; 
```

现在你有*两个*对同一个对象的引用。使用and之间*没有区别*，因为在 PHP 中对象总是通过引用使用（即你不必在第二行做）。所以两者和本质上是同一个对象；unsetting不会破坏对象， unsetting也不会破坏它；*在对象被销毁之前，所有*引用都需要取消设置。`$a``$b``$b =& $a``$a``$b``$a``$b`

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T20:51:56.137

我不认为你可以做你所要求的——不可能阻止一个变量像那样被取消设置。

然而，你上面的评论让我思考。你说：

> ....如果您想防止在第三方扩展中取消设置系统变量

因此，如果我理解正确，您的目标是确保在使用第三方代码（即您的软件）时，与之相关的所有变量都保持不变？

现在你还没有详细说明这个系统中有哪些变量。我们在问题中看到了一个对象，但想必还有更多？我猜你有很多东西可以联系在一起，对吧？在这类问题中提供更多背景信息会有所帮助；您所要求的实际事情是不可能的，但是对您想要实现的目标有所了解，我们可以提出替代方案。

好的。所以我的建议是：将您的对象创建为单例。纯粹主义者通常不赞成这种做法，但在这种情况下可能效果很好，具体取决于您正在做什么。这里的美妙之处在于您可以将对对象的所有访问封装在类方法中，这意味着使用您的代码的开发人员无权访问对象的主副本以取消设置它。

单例的工作方式如下：

```
<?php
class mySingletonClass {
    private static $masterObject=null;

    public static function getInstance() {
        if(!isset(self::$masterObject)) {
            self::$masterObject = new self;
        }
        return self::$masterObject;
    }

    private function __construct() {
        //your existing constructor, as it already exists, but marked as private.
    }

    //...and all the other methods as you already have them.
} 
```

类构造方法是私有的，所以只能从类内的方法中访问。因此，你不能再这样做了`new classname()`。获取此类对象的唯一方法是从静态`getInstance()`方法中获取它。这里的关键是这个方法总是返回对象的相同副本。

```
$obj = mySingletonClass::getInstance();
unset($obj);
$obj = mySingletonClass::getInstance();  //will give the exact same object as the first time. 
```

您可以根据需要取消设置，但原始对象仍然存在并且仍然可以访问。您的任何其他类都可以使用该`getInstance()`方法从程序中的任何位置获取同一对象的相同副本。这是一个坚不可摧的全局变量。

单例通常用于程序的主数据库连接对象，但在这里它可能对您有用。

我希望这会有所帮助。这是我能想到的接近你想要的东西的唯一方法。*

# java - 从java中的唯一代码列表构建树结构

> ID：13081700
> 
> 赞同：0
> 
> 时间：2012-10-26T06:12:35.080
> 
> 标签：java, algorithm, recursion

我有这样的字符串值列表...A、A_AChild、A_AChild_furtherChild、A_BChild、A_CChild 等。这些由“UnderScore”分隔的值表示 A 是父级 AChild 是它的子级，而 AChild 是furtherChild 的父级。类似 BChild 和 CChild 的父级是 A。我需要创建一个树状结构来表示。

```
A
 AChild
  furtherChild
 BChild
 Child 
```

我怎样才能做到这一点。任何算法或java程序都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:21:40.997

我自己解决了这个问题..:-)

这是代码。我知道它可能效率不高：

```
Set<String> treeSet = new TreeSet<String>();
        treeSet.add("FEES");
        treeSet.add("FEES_NUSF");
        treeSet.add("FEES_NUSF_NUS1");
        treeSet.add("EXPE");
        treeSet.add("EXPE_NUSE");

        for (String string : treeSet) {

            int splitSize = string.split("_").length;

            if( splitSize > 1 ){
                //log("In if : "+splitSize);
                StringBuilder sb = new StringBuilder("");
                for (int i = 0; i < splitSize; i++) {
                    sb.append(" ");
                }
                sb.append(string);
                print(sb.toString());
            }
            else{
                print(string);
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:46:39.070

首先创建一个 Node 和一个树数据结构。

```
Node:
Node(String value)

Tree
Tree(Node node) : Creates a tree with root as node

Node getNode(Node node, String nodeToRetrive) nodeToRetrive will be a child of node
returns null if not found

Node addNode(Node node, String nodeToBeAdded) nodeToBeAdded will be added as a new child of node and the newly added Node would be returned 
```

创建以 A 为根的树。

```
Node root=new Node("A");
Tree tree=new Tree(root); 
```

将输入字符串拆分为“_”处的标记。例如，“A_AChild_furtherChild”将被拆分为“A”、“AChild”、“furtherChild”。

```
String s="A_AChild_furtherChild";
String[] tokens=s.split("_"); 
```

从第二个开始循环遍历令牌，在本例中为“A Child”并进行必要的处理。

```
Node node=tree.root; Node n;
for( i=1 ;i <tokens.length; i++){
  n=getNode(node,tokens[i]);
  if(n==null){
    n=addNode(node,tokens[i]);
  }
  node=n;
} 
```

可以使用上述循环构造整个树。

递归检索树中节点的值。

```
public void printTree(Node n, int level){
  display level number of spaces and print the value held by Node n.
  for(each of the children of n){
    printTree(theChild, level+1)
  }
} 
```

上述递归方法初始调用方式如下：

```
printTree(root,0); 
```

# c++ - 从队列c ++中删除所有项目

> ID：13081702
> 
> 赞同：2
> 
> 时间：2012-10-26T06:12:39.910
> 
> 标签：c++, linked-list, queue, nodes

如果我将队列实现为一系列节点（值，指向下一个节点的指针），那么横穿该队列并检查特定值并编辑队列以使包含该值的所有节点的最佳方法是删除。但是队列的顺序将保持不变。

好的，这是描述所有功能的标题

```
class queue
{
  public:
    queue(); // constructor - constructs a new empty queue.
    void enqueue( int item ); // enqueues item.
    int dequeue();  // dequeues the front item.
    int front();   // returns the front item without dequeuing it.
    bool empty();  // true iff the queue contains no items.
    int size();  // the current number of items in the queue.
    int remove(int item); // removes all occurrances of item 
      // from the queue, returning the number removed.

  private:
    class node  // node type for the linked list 
    {
       public:
           node(int new_data, node * next_node ){
              data = new_data ;
              next = next_node ;
           }
           int data ;
           node * next ;
    };

    node* front_p ;
    node* back_p ;
    int current_size ; // current number of elements in the queue.
}; 
```

这是 queue.cpp

```
#include "queue.h"
#include <stdlib.h>
#include <iostream>
using namespace std;

queue::queue()
{
   front_p = NULL;
   back_p = NULL;
   current_size = 0;
}

void queue::enqueue(int item)
{
    node* newnode = new node(item, NULL);
   if (front_p == NULL) //queue is empty
        front_p = newnode;
    else
        back_p->next = newnode;
   back_p = newnode;
   current_size ++;
}

int queue::dequeue()
{
   //if there is only one node
    int value = front_p->data;
    if (front_p == back_p)
    {
        front_p = NULL;
        back_p = NULL;
    }
    //if there are two or more
    else
    {
        node* temp = front_p;
        front_p = temp->next;
        delete temp;
    }
    current_size --;
    return value;
}

int queue::front()
{
    if (front_p != NULL)
        return front_p->data;
}

bool queue::empty()
{
    if (front_p == NULL && back_p == NULL)
        return true;
    else
        return false;
}

int queue::size()
{
    return current_size;
}

int queue::remove(int item)
{
//?????
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T06:20:58.290

您需要遍历列表，检查每个节点的值。如果您看到一个序列 A -> B -> C，其中 B 是您要删除的值，您需要将链接从 A 更改为指向 C 而不是 B。

为了促进这一点，您需要保留对您看到的最后一个节点以及当前节点的引用。如果当前节点的值等于要删除的值，则将最后一个节点的 next 指针更改为当前节点的 next 指针。确保在继续之前释放当前节点的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:21:26.743

如果您的队列公开标准迭代器，最好的方法是使用标准算法：

```
queue.erase(std::remove(queue.begin(), queue.end(), value_to_remove), queue.end()); 
```

# asp.net - 升级现有 Web 应用程序后维护 web.config 文件

> ID：13081703
> 
> 赞同：0
> 
> 时间：2012-10-26T06:12:40.590
> 
> 标签：asp.net, web-setup-project

我有一个 web 项目，我作为安装包提供给客户端。我的下一个版本我不想覆盖 web.config。那是我需要维护现有的 web.config。我该怎么做？

# c# - 使用 jquery 在 ASP.NET c# 中创建动态可拖动图像

> ID：13081704
> 
> 赞同：1
> 
> 时间：2012-10-26T06:12:56.947
> 
> 标签：c#, jquery, ajax

当我单击 ASPX 页面中的按钮时，我正在尝试即时创建。我需要将可拖动属性应用于动态生成的图像。我该怎么办。？Jquery 还是 AJAX。？如何将可拖动属性应用于每个动态创建的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:17:37.500

使用 jqueryUI 使图像可拖动。这很简单。

```
$('img').draggable().click(function(){
    alert('click event');
});

<div id="draggable" class="ui-widget-content">
    <p>Drag me around</p>
</div> 
```

访问此站点以获取更多信息。[http://jqueryui.com/draggable/](http://jqueryui.com/draggable/)

例如，请参见以下 jsfiddle。[http://jsfiddle.net/Doinkmeister/Rtwcj/](http://jsfiddle.net/Doinkmeister/Rtwcj/) 只需让所有图像可拖动即可。

```
$('img').draggable(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:32:21.597

您可以查看此帖子-

[http://delicious.com/anupdg/draggable+database](http://delicious.com/anupdg/draggable+database)

问候阿努普

# java - JPA 中实体之间的引用

> ID：13081707
> 
> 赞同：0
> 
> 时间：2012-10-26T06:13:09.930
> 
> 标签：java, jakarta-ee, jpa

我的应用程序中有一个 Question 实体和一个 QuestionCategory 实体。在数据库中，这是一个多对多的关系。我可能需要一些帮助。

我应该在引用 QuestionCategory 和 visa verca 的问题中创建列表引用吗？然后 JPA 可以根据您从哪个实体开始自动获取类别或问题。

或者您是否应该在它们之间没有引用，然后使用 JPQL 作为命名查询来检索属于该类别的问题，或者根据您所追求的问题检索属于这些问题的类别？

我不知道我是否使用了很多引用。你如何决定这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:23:55.380

中没有`Bidirectional`关系`ManyToMany`。主要的事情是注意使用`CascadeType`. 根据您的`CascadeType`类型使用情况，可能会出现不必要的问题。在我的例子中，`Manager`和`Project`是`ManyToMay`关系。

**例子 ：**

管理器.java

```
@Entity
public class Manager implements Serializable {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private int id;
    private String name;

    @ManyToMany(mappedBy = "managers", cascade = CascadeType.REFRESH)
    private List<Project> projects;

    public Manager() {
        projects = new ArrayList<Project>();
    }

    public Manager(String name) {
        this.name = name;
        projects = new ArrayList<Project>();
    }

    //getter and setter

    public void add(Project project) {
        if (!projects.contains(project)) {
            projects.add(project);
        }
        if (!project.getManagers().contains(this)) {
            project.getManagers().add(this);
        }
    }
} 
```

项目.java

```
@Entity
public class Project implements Serializable {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private int id;
    private String name;

    @ManyToMany
    @JoinTable(name = "PROJ_DEP", joinColumns = @JoinColumn(name = "PROJ_ID"), inverseJoinColumns = @JoinColumn(name = "DEPT_ID"))
    private List<Manager> managers;

    public Project() {
        managers = new ArrayList<Manager>();
    }

    public Project(String name) {
        this.name = name;
        managers = new ArrayList<Manager>();
    }

    //getter and setter

    public void add(Manager manager) {
        if (!managers.contains(manager)) {
            managers.add(manager);
        }
        if (!manager.getProjects().contains(this)) {
            manager.getProjects().add(this);
        }
    }
} 
```

多对多测试.java

```
public class ManyToManyTest {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("JPA");
        EntityManager em = emf.createEntityManager();
        em.getTransaction().begin();
        Project p1 = new Project("Project 1");
        Project p2 = new Project("Project 2");
        Project p3 = new Project("Project 3");

        Manager m1 = new Manager("Jon");
        m1.add(p1);
        m1.add(p2);
        m1.add(p3);

        Manager m2 = new Manager("Kone");
        m2.add(p2); 
        m2.add(p3);

        em.persist(m1);
        em.persist(m2);

        System.out.println("Success..");
        em.getTransaction().commit();
        em.close();

    }
} 
```

假设`CascadeType.REMOVE`或`CascadeType.ALL`包含在`Manager`实体中。

1.  有两个经理 m1 和 m2。m1 有三个项目 p1、p2 和 p3。m2 有两个项目 p1 和 p2。
2.  如果 m1 已被移除，相关项目 p1、p2 和 p3 将自动移除。
3.  在这里，问题是没有m2的项目记录。

    ```
    /*Kone's projects record will be loss.*/
    Manager m = (Manager)em.createQuery("SELECT m FROM Manager m WHERE m.name = 'Jon' ").getSingleResult();
    em.remove(m); 
    ```

假设`CascadeType.PERSIST`或`CascadeType.ALL`包含在`Manager`实体中。

1.  如果您想保留一个`Manager`，它的项目可能是新的和现有的记录。
2.  对于新的实例`Project`将是新的记录。
3.  `Project`(By query)的现有实例将被引用。

    ```
    /*When m3 has persisted, p2 will be new record in Project table. p1 will be just reference.*/
    Project p1 = (Project)em.createQuery("SELECT m FROM Project m WHERE m.name = 'Project 1' ").getSingleResult();
    Project p2 = new Project("Project 1"); 

    Manager m3 = new Manager("Nexz");
    em.persist(m3); 
    ```

我的建议是使用`CascadeType.REFRESH`，无论您创建什么`Manager` 或`Project`引用都将通过查询从数据库中检索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:34:35.513

JPA 提供者确实支持多对多关系。因此，您可以按您提到的那样放置列表并用适当的 ManyToMany 注释标记它并加入列名，JAP 将为您完成剩下的工作。顺便说一句，您拥有哪个 JPA 提供商？？？像hibernate，IBatis等？？

代码示例：[http ://www.roseindia.net/jpa/eclipsejpaexamples/jparelationship/many-to-many.shtml](http://www.roseindia.net/jpa/eclipsejpaexamples/jparelationship/many-to-many.shtml)

# ajax - ajax 函数，它上传图像并使用来自服务器的另一个字符串进行预览

> ID：13081710
> 
> 赞同：1
> 
> 时间：2012-10-26T06:13:16.930
> 
> 标签：ajax, file, jsp, servlets, file-upload

我想使用文件上传控件上传图像并在同一页面中预览而不提交表单，这可能吗？如果可能，请告诉我如何设置 ajax 函数的查询字符串，以及如何在服务器端处理该查询字符串。我正在使用 jsp 或 servlet。意图是通过ajax函数调用发送图像，我可以将图像存储在服务器的本地文件夹中。表单也将使用结果字符串的一部分进行更新，该部分是其他组件输出。除此之外，我可以显示用户上传的图像。1.通过ajax调用上传图片。2\. return string 是做两件事，一是通过服务器本地路径在相应的占位符中显示图像，另一个是获取另一个组件输出，它是一个字符串。3\. 如果我有那个字符串，我在回调函数中操作以设置值。4\. 输入用户数据后我想最后提交表单。

我试过了，但未能将文件对象作为参数发送到 servlet 或 jsp。此外，如果我们可以发送该对象，我们如何在 jsp 中处理该对象？

# javascript - 使用来自所有其他主干视图的单击和滚动聚合模糊事件

> ID：13081712
> 
> 赞同：0
> 
> 时间：2012-10-26T06:13:18.387
> 
> 标签：javascript, jquery, html, css, backbone.js

**用例：**

如果用户单击其他一些对象、滚动或除了超时（120 秒）什么都不做，我有一个`div#callout`我想要的。`hide()`但是，如果用户单击其中的`#callout`对象或对象，则它不会执行该`hide()`操作。此外，如果有任何子元素（例如`input`获得焦点），则超时无效（假设人们正在打字）。

**主意：**

我计划通过扩展创建一个聚合事件`Backbone.Events`，这三个事件中的任何一个都会触发类似`"blur:callout"`

**挑战：**

我想我可以进行滚动检测和超时，但我如何检测某处的点击但不是`#callout`？我不想为所有其他视图和子视图添加触发事件，因为它们可能有 100 个并且还在增长。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:02:05.813

如果我说得对，那么我会做这样的事情：

```
var Callout = Backbone.View.extend({

  events: {
    "click": "clearTimeout" // clear timeout if clicked inside
  },

  render: function() {
    // render and then
    this.setTimeout();
    return this;
  },

  setTimeout: function() {
    var self = this;
    if (!this.timeout) {
      this.timeout = setTimeout(function() {self.hide();}, 120 * 1000);
    }
    return this;
  },

  clearTimeout: function(){
    if (this.timeout) {
      clearTimeout(this.timeout);
    }
    return this;
  },

  hide: function() {
    this.$el.hide();
    return this;
  }
)} 
```

如果您需要重新设置超时，那么事件哈希将如下所示（而不是模糊事件， jQuery 中的[focusout](http://api.jquery.com/focusout/)事件气泡）

```
events: {
  "focusout": "setTimeout",
  "focusin": "clearTimeout"
} 
```

UPD：为确保`focusout`将焦点移出`Callout`视图，您需要检查事件的[relatedTarget](https://developer.mozilla.org/en-US/docs/DOM/event.relatedTarget)是否位于视图内部`$el`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:30:14.813

所以基本上，用户必须`div#callout`在 120 秒内点击，否则它会隐藏。那么你只有2个案例：

1.  用户在页面加载后 120 秒内点击隐藏之前的标注内部
2.  用户忽略`div#callout`它，它会自动隐藏。

如果用户不与之交互，`callout`那么您无需担心。您唯一需要担心的情​​况是用户是否在`callout`.

因此，除非您要在内部拥有大量嵌套视图，`div#callout`否则不会有问题。

如果内部确实有许多嵌套视图`div#callout`，则可以`reset hide`通过某种继承或混合将事件附加到每个孩子。

# jenkins - 是否可以从詹金斯手动停止开发服务器

> ID：13081713
> 
> 赞同：0
> 
> 时间：2012-10-26T06:13:40.287
> 
> 标签：jenkins

我的开发服务器安装在 jboss 应用服务器（linux）中。是否可以从詹金斯手动停止开发服务器。每当开发人员当时想要解散时，我只需要停止服务器并将工件部署到开发服务器。所有这些操作都可以从 jenkins 进行。我已经有脚本来停止和启动服务器。但我不知道如何在詹金斯配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T15:37:39.753

如果您的 jenkins 也在 linux 上，请使用“执行 shell”构建步骤并在其中连接到您的服务器并执行命令：

例如：

```
ssh user@server "remote_script_command" 
```

# java - 在 JFace 对话框的中心添加确定按钮

> ID：13081720
> 
> 赞同：0
> 
> 时间：2012-10-26T06:14:09.900
> 
> 标签：java, eclipse, swt, jface

我已经扩展了 JFcae Dialog 类并覆盖了一个方法，该方法在最旁边为我提供了 Ok 和 cancel 按钮，如下图所示。

![在此处输入图像描述](../Images/e74421d29c1b21f10ef29749ac175c63.png)

但我希望这些按钮在中心是他们无需手动执行此操作的任何方式。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T06:53:07.993

> 公共控件createButtonBar（复合父）{}

覆盖此方法。

# nhibernate - 使用带有 LINQ 的 NHibernate 在预加载中过滤导航属性

> ID：13081722
> 
> 赞同：0
> 
> 时间：2012-10-26T06:14:35.563
> 
> 标签：nhibernate, linq-to-entities

我在 EF 中使用它

```
 var users = Context.CreateSet<User>()
             .Select(u => new {
                               User = u,
                               Salary = u.Salaries.Where(s => !s.Deleted)
                              })
                              .AsEnumerable()
                              .Select(a => a.User); 
```

在 NHibernate 中有一种 Linq 方法可以做到这一点，我希望它也可以通过延迟加载来加载导航属性

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:44:39.943

NHibernate 不会以这种方式用过滤结果填充集合，这不是一个好主意，因为您得到了一个损坏的模型。我看到的最好的选择

```
var users = session.Query<User>()
    .Fetch(u => u.Salaries)
    .Select(u => new
    {
        User = u,
        ActiveSalaries = u.Salaries.Where(s => !s.Deleted)
    }); 
```

或者

```
public virtual IEnumerable<Salary> ActiveSalaries
{
    get { return Salaries.Where(s => !s.Deleted); }
}

var users = session.Query<User>()
    .Fetch(u => u.Salaries) 
```

或者

```
// ctor
ActiveSalaries = Salaries.Where(s => !s.Deleted);

// property
public virtual IEnumerable<Salary> ActiveSalaries { get; private set; }

// mapping almost same as that of Salaries
HasMany(x => x.ActiveSalaries).Table("Salaries").Where("Deleted=0");

var users = session.Query<User>()
    .Fetch(u => u.ActiveSalaries); 
```

# c# - 如何在WPF DataGrid中通过DataGrid Header CheckBox选择列的所有复选框

> ID：13081725
> 
> 赞同：8
> 
> 时间：2012-10-26T06:14:48.403
> 
> 标签：c#, wpf, wpfdatagrid

我有一个带有一个 CheckBoxColumn 的 DataGrid。在该 CheckBoxColumn 的标题中，我添加了一个 CheckBox 以选择该 Datagrid 行的所有 CheckBox。

我怎样才能做到这一点？

我的 WPF 数据网格的 XAML 代码：

```
 <DataGrid AutoGenerateColumns="False" CanUserAddRows="False"  Grid.RowSpan="2" Height="130" HorizontalAlignment="Left" IsReadOnly="False" Margin="189,340,0,0" Name="dgCandidate" TabIndex="7" VerticalAlignment="Top" Width="466" Grid.Row="1" >
        <DataGrid.Columns>
            <DataGridTextColumn x:Name="colCandidateID" Binding="{Binding CandidateID}" Header="SlNo" MinWidth="20" IsReadOnly="True" />
            <DataGridTextColumn x:Name="colRegistraion" Binding="{Binding RegisterNo}" Header="Reg. No." IsReadOnly="True"  />
            <DataGridTextColumn x:Name="colCandidate" Binding="{Binding CandidateName}" Header="Name" MinWidth="250" IsReadOnly="True"  />

            <DataGridTemplateColumn>
                <DataGridTemplateColumn.Header>
                    <CheckBox Name="chkSelectAll" Checked="chkSelectAll_Checked" Unchecked="chkSelectAll_Unchecked"></CheckBox>
                </DataGridTemplateColumn.Header>
                <DataGridTemplateColumn.CellTemplate >
                    <DataTemplate >
                        <CheckBox x:Name="colchkSelect1" Checked="colchkSelect1_Checked" Unchecked="colchkSelect1_Unchecked" ></CheckBox>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>

        </DataGrid.Columns>

    </DataGrid> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T06:31:14.533

将您的 Candidate 类转换为如下所示：

```
public class Candidate : DependencyObject
{
    //CandidateID Dependency Property
    public int CandidateID
    {
        get { return (int)GetValue(CandidateIDProperty); }
        set { SetValue(CandidateIDProperty, value); }
    }
    public static readonly DependencyProperty CandidateIDProperty =
        DependencyProperty.Register("CandidateID", typeof(int), typeof(Candidate), new UIPropertyMetadata(0));
    //RegisterNo Dependency Property
    public int RegisterNo
    {
        get { return (int)GetValue(RegisterNoProperty); }
        set { SetValue(RegisterNoProperty, value); }
    }
    public static readonly DependencyProperty RegisterNoProperty =
        DependencyProperty.Register("RegisterNo", typeof(int), typeof(Candidate), new UIPropertyMetadata(0));
    //CandidateName Dependency Property
    public string CandidateName
    {
        get { return (string)GetValue(CandidateNameProperty); }
        set { SetValue(CandidateNameProperty, value); }
    }
    public static readonly DependencyProperty CandidateNameProperty =
        DependencyProperty.Register("CandidateName", typeof(string), typeof(Candidate), new UIPropertyMetadata(""));
    //BooleanFlag Dependency Property
    public bool BooleanFlag
    {
        get { return (bool)GetValue(BooleanFlagProperty); }
        set { SetValue(BooleanFlagProperty, value); }
    }
    public static readonly DependencyProperty BooleanFlagProperty =
        DependencyProperty.Register("BooleanFlag", typeof(bool), typeof(Candidate), new UIPropertyMetadata(false));
} 
```

在 MainWindow.xaml 中：

```
<DataGrid ItemsSource="{Binding CandidateList}">
    <DataGrid.Columns>
        <DataGridTextColumn Header="Id" Binding="{Binding CandidateID}"/>
        <DataGridTextColumn Header="RegNr" Binding="{Binding RegisterNo}"/>
        <DataGridTextColumn Header="Name" Binding="{Binding CandidateName}"/>
        <DataGridTemplateColumn>
            <DataGridTemplateColumn.Header>
                <CheckBox Checked="CheckBox_Checked" Unchecked="CheckBox_Checked"></CheckBox>
            </DataGridTemplateColumn.Header>
            <DataGridTemplateColumn.CellTemplate >
                <DataTemplate>
                    <CheckBox IsChecked="{Binding BooleanFlag}"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

在 MainWindow.xaml.cs 中：

```
 public MainWindow()
    {
        DataContext = this;
        CandidateList.Add(new Candidate()
        {
            CandidateID = 1,
            CandidateName = "Jack",
            RegisterNo = 123,
            BooleanFlag = true
        });
        CandidateList.Add(new Candidate()
        {
            CandidateID = 2,
            CandidateName = "Jim",
            RegisterNo = 234,
            BooleanFlag = false
        });
        InitializeComponent();
    }
    //List Observable Collection
    private ObservableCollection<Candidate> _candidateList = new ObservableCollection<Candidate>();
    public ObservableCollection<Candidate> CandidateList { get { return _candidateList; } }
    private void CheckBox_Checked(object sender, RoutedEventArgs e)
    {
        foreach (var item in CandidateList)
        {
            item.BooleanFlag = true;
        }
    }
    private void UnheckBox_Checked(object sender, RoutedEventArgs e)
    {
        foreach (var item in CandidateList)
        {
            item.BooleanFlag = false;
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T21:19:29.863

严格来说，模型不应该知道视图，因此blindmeis 提出的解决方案，其中模型更改更新数据网格中的每一行，打破了 MVVM/Presentation 设计模式。请记住，在 MVVM 中，依赖流是 View -> ViewModel -> Model，因此如果您在视图模型（或控件代码隐藏）中引用控件，那么您已经有效地破坏了模式，您可能会在后续的轨道上遇到问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T06:28:14.253

> 我已添加 CheckBox 以选择 Datagrid Row 中的所有 CheckBox

如果您的意思是选中 datagrid**列**中的所有复选框，那么我会说：只需使用选中/未选中更新您的 itemssource 集合。

```
public bool SelectAll
{
  get{return this._selectAll;}
  set
  {
     this._selectAll = value;
     this.MyItemsSourceCollection.ForEach(x=>x.MyRowCheckProperty=value);
     this.OnPropertyChanged("SelectAll");
  }
} 
```

xml

```
 <DataGridTemplateColumn>
            <DataGridTemplateColumn.Header>
                <CheckBox isChecked="{Binding SelectAll}"></CheckBox>
            </DataGridTemplateColumn.Header>
            <DataGridTemplateColumn.CellTemplate >
                <DataTemplate >
                    <CheckBox IsChecked="{Binding MyRowCheckProperty}"></CheckBox>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn> 
```

我不知道 xaml 绑定是否正确，但我希望你能看到我的意图

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-02T02:51:18.957

事实证明，这比人们希望的要难得多。

第一个问题是您不能只将视图模型绑定到列标题，因为它没有视图模型作为其数据上下文，因此您需要一个绑定代理来正确地将绑定路由到视图模型。

```
public class BindingProxy : Freezable
{
    public static readonly DependencyProperty DataProperty = DependencyProperty.Register(
        "Data", 
        typeof(object), 
        typeof(BindingProxy),
        new UIPropertyMetadata(null));

    public object Data
    {
        get { return this.GetValue(DataProperty); }
        set { this.SetValue(DataProperty, value); }
    }

    protected override Freezable CreateInstanceCore()
    {
        return new BindingProxy();
    }
} 
```

现在在数据网格的资源中创建一个绑定代理：

```
<DataGrid.Resources>
    <aon:BindingProxy
        x:Key="DataContextProxy"
        Data="{Binding}" />
</DataGrid.Resources> 
```

那么该列需要定义为：

```
<DataGridTemplateColumn>
    <DataGridTemplateColumn.HeaderTemplate>
        <DataTemplate>
            <CheckBox
                Command="{Binding
                    Data.SelectAllCommand,
                    Source={StaticResource DataContextProxy}}"
                IsChecked="{Binding
                    Data.AreAllSelected,
                    Mode=OneWay,
                    Source={StaticResource DataContextProxy},
                    UpdateSourceTrigger=PropertyChanged}"
                IsThreeState="True" />
        </DataTemplate>
    </DataGridTemplateColumn.HeaderTemplate>
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <CheckBox
                IsChecked="{Binding
                    Path=IsSelected,
                    UpdateSourceTrigger=PropertyChanged}" />
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

请注意，需要对复选框的`IsChecked`依赖属性及其`Command`属性进行绑定，并且`IsChecked`绑定是`OneWay`. `IsChecked`绑定获取复选框以显示项目的当前状态，并且绑定`Command`执行批量选择。你需要两者。

现在在视图模型中：

```
public bool? AreAllSelected
{
    get
    {
        return this.Items.All(candidate => candidate.IsSelected)
        ? true
        : this.Items.All(candidate => !candidate.IsSelected)
            ? (bool?)false
            : null;
    }

    set
    {
        if (value != null)
        {
            foreach (var item in this.Items)
            {
                item.IsSelected = value.Value;
            }
        }

        this.RaisePropertyChanged();
    }
} 
```

该`SelectAllCommand`属性是`ICommand`该方法所在位置的实现`Execute`：

```
public void Execute(object parameter)
{
    var allSelected = this.AreAllSelected;

    switch (allSelected)
    {
        case true:
            this.AreAllSelected = false;
            break;
        case false:
        case null:
            this.AreAllSelected = true;
            break;
    }
} 
```

最后，每次更改值时，您的行项目视图模型（即 中的事物`Items`）都需要在主视图模型上提出。你如何做到这一点几乎取决于你。`PropertyChanged``IsSelected`

# python - Python 通过目录递归

> ID：13081738
> 
> 赞同：1
> 
> 时间：2012-10-26T06:15:32.410
> 
> 标签：python, os.walk

我正在尝试使用 os.walk() 遍历目录。我目前的实现如下：

```
print(".:")
for dirname, dirnames, filenames in os.walk(path):
    for filename in filenames:
        print(os.path.join(dirname, filename))
    print()
    for subdirname in dirnames:
        print(os.path.join(dirname, subdirname) + ":") 
```

对于“路径”，我得到以下输出：

```
.:
./File5.py
./File 3.py
./File 1.py

./directory 2:
./directory 4:
./Test Directory:
./directory 2/player_career.csv
./directory 2/File2.py

./directory 4/test.txt
./directory 4/Homework4.py

./directory 4/__pycache__:
./directory 4/__pycache__/File4.cpython-32.pyc

./Test Directory/Test 3:
./Test Directory/Test 2:
./Test Directory/Test 3/ttt

./Test Directory/Test 2/Untitled Document 2
./Test Directory/Test 2/Untitled Document

./Test Directory/Test 2/Untitled Folder:
./Test Directory/Test 2/Untitled Folder/jjj 
```

我正在寻找的输出是：

```
.:
./File5.py
./File 3.py
./File 1.py

./directory 2:

./directory 2/player_career.csv
./directory 2/File2.py

./directory 4:

./directory 4/test.txt
./directory 4/Homework4.py

./directory 4/__pycache__:

./directory 4/__pycache__/File4.cpython-32.pyc

./Test Directory:

./Test Directory/Test 2:

./Test Directory/Test 2/Untitled Document 
./Test Directory/Test 2/Untitled Document 2

./Test Directory/Test 2/Untitled Folder:

./Test Directory/Test 2/Untitled Folder/jjj

./Test Directory/Test 3:

./Test Directory/Test 3/ttt 
```

如果我递归地执行此操作，我将能够简单地为我找到的每个子目录调用我的函数，但是我无法使用 os.walk() 找出一种优雅的方式来执行此操作。

我的问题：如何使用 os.walk() 获得前面的输出

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T06:20:45.593

不要立即打印出子目录，而是在您实际在目录中时打印出它们。

一个例子：

```
for dirname, dirnames, filenames in os.walk(path):
    print()
    print(dirname + ":")
    for filename in filenames:
        print(os.path.join(dirname, filename)) 
```

这种方式`os.walk`有效，尝试在您进入时立即打印所有目录名称`dirnames`不会给您想要的顺序。

# dart - 如何使用 Dart 从不同的 URL 提供静态文件？

> ID：13081740
> 
> 赞同：8
> 
> 时间：2012-10-26T06:15:49.620
> 
> 标签：dart

使用 Dart，我有`awesome.html`，但我希望它是`/awesome`. 这纯粹是一个`.htaccess`（我正在使用 Apache）的事情，还是有办法通过 Dart 或“现代 Web 开发”方式来解决这个问题？

此`.htaccess`位`/awesome`指向`/awesome.html`：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule .*[^/]$ %{REQUEST_URI}/ [L,R=301]
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.+)/$ $1.html [L] 
```

但是然后我所有的相对 URL 引用（到 css/js/images）都中断了，如果我将它们从“assets/whatever”重写为“/assets/whatever”，它会在 Dart 编辑器中工作时中断，因为它使用 URL 之类的：

```
http://127.0.0.1:3030/Users/dave/Sites/my-dart-app/web/awesome.html 
```

想法？最佳实践？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T16:01:12.327

谢谢你的提问！

答案取决于您的 Dart 服务器虚拟机前面是否有代理或 Web 服务器。如果你前面有一个代理，那么代理可以在请求到达你的 Dart VM 之前进行 URL 重写。无论如何，这是一个不错的场景，因为代理可以进行缓存、SSL、负载平衡等等。在这种情况下，Dart VM 只是一个“应用服务器”。作为最佳实践，我建议在前面放置一个工业级 Web 服务器或代理。

但是，如果你想纯粹在 Dart 中进行 URL 屏蔽和重写，这里有一些代码。正如 Kai 在上面的评论中所说，这通常是框架的工作。但无论如何我都会在这里包含一些代码来娱乐。:)

```
import 'dart:io';
import 'dart:json';

class StaticFileHandler {
  final String basePath;

  StaticFileHandler(this.basePath);

  _send404(HttpResponse response) {
    response.statusCode = HttpStatus.NOT_FOUND;
    response.outputStream.close();
  }

  String rewritePath(String path) {
    String newPath = path;

    if (path == '/' || path.endsWith('/')) {
      newPath = '${path}index.html'; 
    } else if (!path.endsWith('.html')) {
      newPath = "${path}.html";
    }

    return newPath;
  }

  // TODO: etags, last-modified-since support
  onRequest(HttpRequest request, HttpResponse response) {
    String path = rewritePath(request.path);

    final File file = new File('${basePath}${path}');
    file.exists().then((found) {
      if (found) {
        file.fullPath().then((String fullPath) {
          if (!fullPath.startsWith(basePath)) {
            _send404(response);
          } else {
            file.openInputStream().pipe(response.outputStream);
          }
        });
      } else {
        _send404(response);
      }
    });
  }

}

runServer(String basePath, int port) {
  HttpServer server = new HttpServer();

  server.defaultRequestHandler = new StaticFileHandler(basePath).onRequest;
  server.onError = (error) => print(error);
  server.listen('127.0.0.1', 1337);
  print('listening for connections on $port');
}

main() {
  var script = new File(new Options().script);
  var directory = script.directorySync();
  runServer("${directory.path}", 1337);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T02:06:38.270

By the way, I've updated the rewritePath() function in Seth's code some so that it doesn't rewrite assets like .dart and .css files to .html, and so that it works w/ my client-side stuff living in /web.

```
 String rewritePath(String path) {
    String newPath = path;

    if (path == '/' || path.endsWith('/')) {
      newPath = '/web${path}index.html';
    } else if (!path.endsWith('.html')) {
      if (path.contains('.')) {
        newPath = '/web${path}';
      } else {
        newPath = '/web${path}.html';
      }
    } else {
      newPath = '/web${path}.html';
    }

    //peek into how it's rewriting the paths
    print('$path -> $newPath');

    return newPath;
  } 
```

It's of course super basic, and a framework that handles routing would certainly come in handy (would love to see what you're building @Kai).

# java - 如何检查 CSS 背景图像是否使用 htmlunit 加载？

> ID：13081743
> 
> 赞同：3
> 
> 时间：2012-10-26T06:16:15.797
> 
> 标签：java, htmlunit, web-crawler

我使用 htmlunit 创建了小型爬虫，它检查 LINK 、 Anchor、 IMG 、 SCRIPT 标签并验证所有 src/links/files 没有损坏。

但是我怎样才能获得 CSS 背景属性中使用的图像的链接呢？使用 htmlunit..

# ruby - Savon：具有 wsse 身份验证的 WCF Soap 服务：EndpointDispatcher 的 AddressFilter 不匹配

> ID：13081744
> 
> 赞同：1
> 
> 时间：2012-10-26T06:16:19.563
> 
> 标签：ruby, wcf, soap, savon

我正在尝试使用 Savon - ruby​​gem 创建 SOAPClient。

它是一个 WCF 肥皂服务，通过 https 进行 WSSE 身份验证。这是我尝试过的代码：

```
require 'savon'

client = Savon::Client.new do
    wsdl.document = "https://svc.sxxxxxify.com:8081/ConfSet.svc?wsdl"
    config.soap_version = 2
    wsse.credentials "aa5@xxasxsaxsh.com", "test123"
end

p client.wsdl.soap_actions
response = client.request :get_user_clients
p response 
```

但我得到这个错误：

> http://www.w3.org/2005/08/addressing/soap/fault2012-10-26T06:07:42.247Z2012-10-26T06:12:42.247Zs:Sendera:DestinationUnreachable 无法处理带有 To '' 的消息接收器，由于 EndpointDispatcher 的 AddressFilter 不匹配。检查发送方和接收方的 EndpointAddresses 是否一致。

.

> 由于 EndpointDispatcher 的 AddressFilter 不匹配，接收方无法处理带有 To '' 的消息。检查发送方和接收方的 EndpointAddresses 是否一致。（萨文::SOAP::故障）

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T19:39:52.850

我遇到了一些问题。我通过提供标题条目和新命名空间解决了“To”问题。不过，“Action”标头也是必需的，我只是在检查 SoapUI 日志后才发现这一点。这对我有用：

```
 @service_url = 'https://svc.sxxxxxify.com:8081/ConfSet.svc/service'
  @action = 'your_action'
  @client = Savon.client(:wsdl => "#{@service_url}?wsdl", :soap_version => 2, 
    :namespaces => {"xmlns:x" => "http://www.w3.org/2005/08/addressing"}, 
    :soap_header => {"x:To" => @service_url, "x:Action" => "http://tempuri.org/#{@action}"}) 
```

# sql-server-2008 - 使用所有可用数据库中的表找出存储过程

> ID：13081747
> 
> 赞同：0
> 
> 时间：2012-10-26T06:16:35.897
> 
> 标签：sql-server-2008, stored-procedures

请在这个问题上帮助我。我有来自特定数据库的特定表。我想使用所有可用数据库中的表查找存储过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T06:42:14.137

为此，我会使用[**Aaron Bertrand 改进的 sp_msforeachdb**](http://www.mssqltips.com/sqlservertip/2201/making-a-more-reliable-and-flexible-spmsforeachdb/)

```
EXECUTE sp_foreachdb
   @command = N'SELECT *
                FROM ?.sys.sql_modules AS sm
                WHERE sm.Definition LIKE ''%dbo.YourTable%'''
   , @user_only = 1 
```

`@command`是必要的，但我添加了以`@user_only`表明您可以跳过系统数据库。如果您确实想检查它们，请删除此参数。

* * *

我推荐 Aaron 的解决方案，`sp_msforeachdb`因为它不受支持，而且正如他在博客中提到的那样，它可能会在重负载下丢失数据库。

# javascript - 动态更新数据到 DOJO 中的条形图。

> ID：13081748
> 
> 赞同：0
> 
> 时间：2012-10-26T06:16:38.590
> 
> 标签：javascript, cordova, dojo, dojox.charting

我基本上来自'c语言'背景，并且对脚本没有任何想法。

我想要实现的是：

SwapView 中有一个条形图。现在每次当用户访问这个 SwapView 时，我想用新的数据集重新加载 Bargrap。假设我有一个全局数据，即：window.myvalues。我需要捕获哪个事件，以及如何做到这一点？

好心劝告。这是我从 dojo 网站使用的示例。

```
 <div id="barview" data-dojo-type="dojox.mobile.SwapView">

        <script>
            function mybarchartNode(){

                require([
                         // Require the basic chart class
                         "dojox/charting/Chart",

                         // Require the theme of our choosing
                         "dojox/charting/themes/MiamiNice",

                         //  We want to plot Columns
                         "dojox/charting/plot2d/Columns",

                         // Require the highlighter
                         "dojox/charting/action2d/Highlight",

                         //  We want to use Markers
                         "dojox/charting/plot2d/Markers",

                         //  We'll use default x/y axes
                         "dojox/charting/axis2d/Default",

                         // Wait until the DOM is ready
                         "dojo/domReady!"
                         ], function(Chart, theme, ColumnsPlot, Highlight) {

                        console.log ("Data set in the bar graph ");
                        console.log (window.myDatas);
                        // Define the data
                        var chartData = [10000,9200,11811,12000,7662,13887,14200,12222,12000,10009,11288,12099];

                        // Create the chart within it's "holding" node
                        var chart = new Chart("barchartNode");

                        // Set the theme
                        chart.setTheme(theme);

                        // Add the only/default plot
                        chart.addPlot("default", {
                                      type: ColumnsPlot,
                                      markers: true,
                                      gap: 5
                                      });

                        // Add axes
                        chart.addAxis("x");
                        chart.addAxis("y", { vertical: true, fixLower: "major", fixUpper: "major" });

                        // Add the series of data
                        chart.addSeries("Monthly Sales",chartData);

                        // Highlight!
                        new Highlight(chart,"default");

                        // Render the chart!
                        chart.render();
                        });

            }  /* Function End */

            </script>

        <div id="barchartNode" style="width: 250px; height: 150px;"></div>

        </div> <!- swap space end -->

<!-- configure and load dojo -->
    <script src="dojo/dojo.js" data-dojo-config="isDebug:1, async:1"></script>
    <script>

        require(["dojox/mobile/parser", "dijit/registry", "dojox/mobile",  "dojox/mobile/SwapView", "dojox/mobile/TabBar", "dojox/mobile/TreeView", "dijit/tree/TreeStoreModel","dojox/mobile/Button", "dojox/mobile/deviceTheme", "dojox/mobile/compat", "dojo/domReady!"],
                function(parser) {
                parser.parse();
                });

        mybarchartNode();
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:45:17.450

你可以挂钩`onAfterTransitionIn`或`onBeforeTransitionIn``dojox/mobile/SwapView`

引自 Dojo 参考

> 从您的应用程序连接到的存根函数。在到达转换发生之前/之后调用。

# java - Java分层对象连接

> ID：13081750
> 
> 赞同：0
> 
> 时间：2012-10-26T06:16:45.517
> 
> 标签：java

这是我目前的结构：

```
Map<String,Map<Collection<Item>,Map<String,Collection<Item>>>> 
```

所以我有：很多字符串，每个都链接到很多项目，每个都有很多字符串，每个都有很多项目。

令人困惑的是，有没有像链表这样的东西，可以以这种分层方式保存不同类型的数据？

**一种方法是创建一个对象，但我只会在我的大量代码中使用这个变量一次，不想为此创建一个类。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:28:51.303

好吧，您不想创建类，所以您真的遇到了麻烦，因为这是我多次看到的经典结构，并且没有现成的通用解决方案。[很多人都渴望得到这样的 API，但是 :( ] 仍然会给你一些选择：

1）如果您不想创建单独的类并且需要它来限制使用，那么在现有类中创建内部类并在该类本身中使用它。因此，无需创建额外的文件，您仍然可以自由设计。

2）如果你想要现成的，那么你能得到的最接近的是swing tree api。它主要设计用于秋千树组件，但也可以在室外使用。它不会造成任何伤害。但是在这里你需要在你的应用程序中使用 swing jar。

[http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html)

# python - Django admin 中的下拉框不会自动填充选项

> ID：13081757
> 
> 赞同：1
> 
> 时间：2012-10-26T06:17:19.353
> 
> 标签：python, django

我的 models.py 文件中有 2 个模型；流派和音轨。每首曲目将被分配一个流派；因此，我定义了一个 ForeignKey 关系。我的问题是，在管理视图中，当我想为每首曲目添加流派时，我无法从组合框中选择选项。我必须点击添加符号（即绿色+），然后会弹出一个类型窗口，然后我可以添加类型。

我希望能够只添加一首曲目并在底部的小组合框中选择流派。

以下是图片：

![我希望能够看到流派选择而不是单击](../Images/50f30f98a057962b54dd77bfef50fbbe.png)

第二张图片：

![当我点击时会发生什么](../Images/e96084bddd66ccc962fa30af2263c74a.png) 我的代码片段如下：

```
GENRE_CHOICES =  (
             ('rock', 'Rock'),
             ('jazz/blues', 'Jazz/Blues'),
             ('blues', 'Blues'),
             ('r&b', 'R&B'),
             ('jazz', 'Jazz'),
             ('pop', 'Pop'), 
             ('hip-hop', 'Hip-Hop'),    
             )

def get_upload_path(dirname, obj, filename):
  return os.path.join("audiotracks", dirname, obj.user.username, filename)

def get_audio_upload_path(obj, filename):
  return get_upload_path("audio_files", obj, filename)

class Genre(models.Model):
    genre_choices = models.CharField(max_length=1, choices=GENRE_CHOICES)
    slug = models.SlugField(max_length = 100, unique = True) 

def __unicode__(self):
    return self.title

def get_absolute_url(self):
    return ('view_midmentals_genre', None, {'slug':self.slug})

class AudioTrack(models.Model):
  class Meta:
      pass

user = models.ForeignKey(User, 
    related_name = "tracks",
    blank = True,
    null = True
)

added_on = models.DateTimeField(auto_now_add=True, null = True)
updated_on = models.DateTimeField(auto_now=True, null = True)
audio_file = models.FileField(_("Audio file"), upload_to=get_audio_upload_path)
title = models.CharField(_("Title"), max_length="200", null=True)
description = models.TextField(_("Description"), null=True, blank=True)
slug = models.SlugField(max_length = 40, unique = True) #so as to have a dedicated page for each category 
genre = models.ForeignKey(Genre) 
```

如果我需要改写我的问题或标题，请告诉我。我很难用语言来表达。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T06:31:12.273

您有 + 图标，因为您可能尚未向流派模型添加任何记录。添加一个后，组合框将包含此记录。

**但**似乎你已经知道流派是什么，所以你可以这样做：

```
class AudioTrack(models.Model):
    genre = models.CharField(..., choices = GENRE_CHOICES) 
```

组合框将包含您在列表中的选择。

并考虑您的选择列表，例如：

```
GENRE_CHOICES = ((0,'Rock'),(1, 'Jazz'),(2,'Hip Hop')) 
```

之后：

```
genre = models.PositiveSmallIntegerField(choices = GENRE_CHOICES) 
```

# iphone - 当我滑动 MapView 时如何获取当前位置？

> ID：13081758
> 
> 赞同：0
> 
> 时间：2012-10-26T06:17:19.453
> 
> 标签：iphone, mkmapview, cllocationmanager, mkannotation

我正在使用 CLLocationManager 在我的应用程序中检索当前位置并使用 MapView 显示，我想滑动地图，以便当前位置也应该更改为地图滑动的新位置，并且它应该注释到新位置，怎么做它？请用示例代码给出您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T01:03:22.363

您可能不是指“当前”，因为这意味着手机的实际位置，除非您想在使用此应用程序时将手机运送到另一个地方，这将是一项了不起的壮举。那么，如何在地图顶部绘制一个图层，在中心绘制一个大头针，这样看起来大头针在地图上移动，但实际上地图在大头针下方移动。

# android - 在调用外部意图（日历 api）并做一些工作后，如何返回我的应用程序？

> ID：13081767
> 
> 赞同：5
> 
> 时间：2012-10-26T06:18:17.137
> 
> 标签：android, android-intent, android-widget, android-pendingintent

我有一个带有几个按钮的主屏幕小部件。其中之一应该调用（电话）日历对话框来创建新事件。所以我注册了我的小部件按钮的监听器：

```
Intent intent = new Intent(Intent.ACTION_INSERT);
intent.setData(CalendarContract.Events.CONTENT_URI);
PendingIntent pi = PendingIntent.getActivity(this, 1, intent, PendingIntent.FLAG_UPDATE_CURRENT);
updateViews.setOnClickPendingIntent(R.id.btnAdd, pi); 
```

当我在我的小部件中推送这个 btn 时，它会启动用于创建新事件的日历对话框 - 这没关系。但是在填写完所有字段并在日历中按“完成”后，我想返回我的应用程序（或返回到我的小部件的主屏幕）。相反，我仍在日历应用程序中。如何处理这个问题，或者有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T11:31:13.250

您应该首先启动应用程序的 Activity，然后启动此意图。

*但是*日历应用程序存在问题。虽然它应该只在从小部件启动时将活动添加到后台堆栈，但它一直都在这样做。请参阅我发布的此问题：

[http://code.google.com/p/android/issues/detail?id=28704](http://code.google.com/p/android/issues/detail?id=28704)

因此，用户将不得不“回击”两次。好吧，在手机上就是这样。如果我没记错的话（目前无法测试）在平板电脑上一切正常。

# c# - 从 CSV 查找

> ID：13081770
> 
> 赞同：2
> 
> 时间：2012-10-26T06:18:53.457
> 
> 标签：c#, linq

我有一个这种格式的 CSV 文件：

```
"Call Type","Charge Type","Map to"
"51","","Mobile SMS"
"52","","Mobile SMS"
"DD","Local Calls","Local Calls"
"DD","National Calls","National Calls" 
```

前两列是我的 C# 将插入的“源信息”，最后一列是它将返回的内容。

目前我正在做的是在 c# 中硬编码的 switch 语句。

```
var File001 = from line in File.ReadLines(bill_file)
                                      let l = line.Split(',')
                                      select new
                                      { CallType = ICD_map(l[5],l[3])} 
```

在哪里

```
l[5] = "51";
l[3] = "";

 private static string ICD_map(string call_type_description, string call_category,)
        {
              case "51":
              case "52":
                  return "Mobile SMS";
               default:
                    return "Unknown";
} 
```

我希望这是一个可扩展的列表，因此我的新方法是从 csv 文件加载映射表。您能否建议对此方法进行任何改进以使我的定义库可扩展（希望 CSV 文件可以用于此目的，到目前为止它只有 100 行，所以不关心内存管理）。

到目前为止，我尝试过的是：

```
 class ICD_Map2
    {
        private string call_type;
        private string charge_type;
        private string map_to;

        // Default constructor
        public ICD_Map2() {
            call_type = "Unknown";
            charge_type = "Unknown";
            map_to = "Unknown";
        }

        // Constructor 
        public ICD_Map2(string call_type, string charge_type, string map_to)
        {
            this.call_type = call_type;
            this.charge_type = charge_type;
            this.map_to = map_to;
        }

    }

    List<ICD_Map2>maps = new List<ICD_Map2>();

private void button2_Click(object sender, EventArgs e)
        {
            // Start new thread to create BillSummary.csv
            button1.Enabled = false;

            maps.Clear();
            //load mapping file
            var reader = new StreamReader(File.OpenRead(@"Itemised_Call_Details_Map.csv"));
            while (!reader.EndOfStream)
            {
                var line = reader.ReadLine();
                var values = line.Split(',');

                maps.Add(new ICD_Map2(values[0].Replace("\"",""), values[1].Replace("\"",""), values[2].Replace("\"","")));
                textBox2.AppendText(Environment.NewLine + " Mapping: " + values[0].Replace("\"", "") + " to " + values[1].Replace("\"", ""));
            } 
```

我已将 CSV 文件加载到我的程序中，但无法从 LINQ 进行查找。你能告诉我接下来的过程吗？

打开任何其他方法。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:42:28.183

我建议你一起去

[http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)

它会给你很大的灵活性来玩你的代码。

我们一直在我们的项目中使用它，完全控制而不是编写容易出错和错误的通用 CSV 代码真的很有帮助

# html - 删除 IE 中 li 元素之间不必要的空格

> ID：13081772
> 
> 赞同：2
> 
> 时间：2012-10-26T06:19:14.830
> 
> 标签：html, css, internet-explorer, cross-browser

我有一个用于水平导航的无序列表

**代码**是这样的

```
 <ul class="headul">
      <li class="headli"><a href="#"><img src="Images/2_03.jpg"/></a></li>
       <li class="headli"><a href="#"><img src="Images/2_04.jpg"/></a></li>
       <li class="headli"><a href="#"><img src="Images/2_05.jpg"/></a></li>
       <li class="headli"><a href="#"><img src="Images/2_06.jpg"/></a></li>
       <li class="headli"><a href="#"><img src="Images/2_07.jpg"/></a></li>
       <li class="headli"><a href="#"><img src="Images/2_08.jpg"/></a></li>
   <li class="headli"><a href="#"><img src="Images/2_09.jpg"/></a></li>
   </ul> 
```

**css**

```
 .headul {
        display:block;
        padding:0px
            }

      .headli {
        list-style:none;
        display:block;
        letter-spacing:0;
        float:left;
        border:0px;
            }

      .headli a {float:left;
            display:block; 
            letter-spacing:0;
            float:left;
            border:0;
            } 
```

我试过浮动：左，显示：内联，显示：块，显示：内联块等，

我还尝试删除 html li 元素之间的空格。（即把所有的 li 元素放在 html 代码的同一行）

我还尝试了 letter-spacing:0, font-size:0 for ul , li 以及 li a

它在 chrome 和 mozilla 上看起来很棒，但在 IE 中，所有 li 元素之间都有一点空间.. 好像 IE 给了它们几个 px 或其他东西的边距......而且它发生在 IE9 上......（我使用 IE 测试器在早期版本的 IE 上进行测试，但今天由于某种原因，它在测试 IE7 时一直崩溃）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T06:40:42.497

为图像创建新的 CSS

```
.headli a img
 {
    border:none;
    margin:0;
    padding:0;

 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T06:50:53.797

确保没有其他样式规则影响 ul 的任何子元素。IE9 默认情况下不会导致这种行为，所以我怀疑是一些 css 影响了这些 li,a,img 元素的外观。

IE 中的图像有时有边框 - 尝试将它们设置为`border: 0 none;`.

如果您的列表项是内联的，则 html 标记之间的空格可以将它们分开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T06:25:23.990

您确定额外的空间来自 li 元素吗？我的经验是，如果图像不是“显示：块”，有时会导致奇怪的 1px 间隙......

尝试在 LI 内的图像上设置“display:block”。这可能有效:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T06:49:57.260

试试这个，为 img 添加 css

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
<style type="text/css">
.headul {
        display:block;
        padding:0px;
        border:0px;
        margin:0px;
        }

      .headli {
        list-style:none;
        display:block;
        letter-spacing:0;
        float:left;
        margin:0px;
        border:0px;
        padding:0px;
        }

      .headli a {
        float:left;
        display:block; 
        letter-spacing:0;
        float:left;
        margin:0px;
        border:0px;
        padding:0px;
        }

      .headli a img{
        float:left;
        display:block; 
        letter-spacing:0;
        float:left;
        margin:0px;
        border:0px;
        padding:0px;
        }
</style>
</head>
<body>
 <ul class="headul">
      <li class="headli"><a href="#"><img src="../images/user.png"/></a></li>
      <li class="headli"><a href="#"><img src="../images/user.png"/></a></li>
      <li class="headli"><a href="#"><img src="../images/user.png"/></a></li>
      <li class="headli"><a href="#"><img src="../images/user.png"/></a></li>
      <li class="headli"><a href="#"><img src="../images/user.png"/></a></li>
      <li class="headli"><a href="#"><img src="../images/user.png"/></a></li>
      <li class="headli"><a href="#"><img src="../images/user.png"/></a></li>
   </ul>
</body>
</html> 
```

**变更前**

![在此处输入图像描述](../Images/97c99cad5c4d0773df5abdbd3a79fc92.png)

**改变后**

![在此处输入图像描述](../Images/345c33efd9a2c2c6c09a055ac15e63e9.png)

# jms - 如何在主题消息上设置 TimeToLive？

> ID：13081776
> 
> 赞同：2
> 
> 时间：2012-10-26T06:19:43.327
> 
> 标签：jms, activemq

我正在使用骆驼路线向主题发送消息。

```
<route>
    <from uri="activemq:queue:TEST"/>
    <to uri="activemq:topic:TEST"/>
</route> 
```

如何为骆驼发送的消息设置 timeToLive 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:08:03.477

Google 是您的朋友，快速搜索会引导您找到[Camel JMS 组件文档](http://camel.apache.org/jms.html)，该文档向您展示了通过 uri 选项完成此操作的方法。

# java - 使用 PHP 脚本在 Free Web Hosting 上创建 Web 服务

> ID：13081784
> 
> 赞同：1
> 
> 时间：2012-10-26T06:20:31.397
> 
> 标签：java, php, web-services, ftp, cloud-hosting

我是这里的开发新手。我想知道是否可以使用 PHP 脚本来创建 Web 服务并在云主机上运行它？我使用 Java 创建的 Web 服务怎么样？它也可以在云主机上运行吗？

目前我正在使用来自 www.000webhost.com（免费虚拟主机）的免费云主机。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T06:26:40.760

是的。您可以在免费的托管服务提供商上使用**PHP 创建 Web 服务。**但是在免费网络主机的情况下，您没有专门的机器来运行您的 Java 网络服务，因此您必须在 PHP 中重新设计整个东西。

使用免费托管，您确实会遇到限制，因此购买托管包会更好。他们中的许多人将他们自己的“ **Powered by xxx Hosting** ”字符串片段插入到您的所有页面中，这会破坏您提供的任何 XML，因此请记住这一点。

（**[000webhost webservice 潜在问题](http://www.000webhost.com/forum/customer-assistance/29872-webservice.html)**）

# objective-c - 返回 NSString 而不是 NSURL 不会引起警告

> ID：13081785
> 
> 赞同：2
> 
> 时间：2012-10-26T06:20:37.387
> 
> 标签：objective-c, xcode

我有一个应该返回 NSURL 的函数，但我不小心让它返回了一个 NSString。Xcode 没有发出任何警告。知道为什么会这样，或者我如何为此启用警告。（这会导致应用程序稍后崩溃）。顺便说一句，如果我将函数更改为返回 NSMutableDictionary，我会收到关于返回类型不兼容的编译器警告。我正在使用 Xcode 4.5.1。

```
-(NSURL *) urlForThing:(Thing *)thing
{
    //This is clearly a string at compile time and I would expect a warning
    //If I change this to [NSMutableDictionary alloc] I do get a warning
    return [NSString stringWithFormat:@"thing://url/%@", thing];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T06:23:07.727

好吧，我想简短的回答是`stringWithFormat:`返回一个`id`，而不是一个`NSString`。这对我来说没有多大意义，但它解释了缺乏警告。

# blackberry - 如何在 BlackBerry 中调用系统默认电子邮件客户端

> ID：13081786
> 
> 赞同：0
> 
> 时间：2012-10-26T06:20:44.050
> 
> 标签：blackberry, blackberry-webworks

我是黑莓新手，所以我需要一个代码来调用黑莓 SDK 中的默认电子邮件客户端如果有人知道与我分享

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T08:15:30.540

这个给你：

[使用网络](https://developer.blackberry.com/html5/api/blackberry.invoke.MessageArguments.html)

[使用 BB Java](http://docs.blackberry.com/en/developers/deliverables/11935/Create_new_populated_email_msg_565427_11.jsp)

# javascript - 从控制器导轨 3 重新加载页面？

> ID：13081795
> 
> 赞同：0
> 
> 时间：2012-10-26T06:21:47.700
> 
> 标签：javascript, jquery, ruby, ajax, ruby-on-rails-3

如果他/她的会话超时，我想将用户重定向到登录页面。如果用户单击我网页的任何链接，我如何将我的用户重定向到登录页面。链接可以是 ajax 调用或页面重新加载调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:14:31.340

您应该需要在控制器中调用 before_filter 函数。

您需要在控制器中添加此行，例如，

```
Class NAMEsController < ApplicationController
before_filter :authenticate_user! 
```

为此，您需要确保在项目中安装了“设备”gem。

（或者）

而不是调用`before_filter :authenticate_user!`在您的控制器中编写您自己的函数来调用`authenticate_user!`. 就像是：

```
before_filter :logged_in

private
def logged_in
  your_function
  authenticate_user!
end 
```

对于 ajax 调用，您需要自己动手。试试这个作为起点。

```
 before_filter :login_required, :only => [:index]

 before_filter(:only => :index) do |controller|
   login_required unless controller.request.format.js?
 end 
```

你需要做一些自定义的测试脚本。它只是一个整理的想法。我不确定它是否工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T07:01:36.027

您可以使用控制器中的 before_filter 功能轻松实现这一点...

这些过滤器将检查有效会话，如果它过期......将用户重定向到登录页面......还可以检查 Rails 中的 Notifications API

# matlab - Matlab+图论+权重赋值

> ID：13081797
> 
> 赞同：0
> 
> 时间：2012-10-26T06:21:50.943
> 
> 标签：matlab, graph-theory

我一直在尝试标记无向图的边缘，而且，我正在使用这个 matgraph 工具！我成功地制作了一个图表，我只是想给它分配权重......请帮忙！

这是我尝试过的，

```
clear all;
close all;
clc;
g=graph;
for k=1:6

add(g,k,k+1)
add(g,1,4)
add(g,5,7)
end
ndraw(g);
x=rand(1,1);
y=rand(1,1)
A =[0 x 0 x 0 0 0;
x 0 x 0 0 0 0;
0 x 0 x 0 0 0;
x 0 x 0 x 0 0;
0 0 0 y 0 x x;
0 0 0 0 x 0 x;
0 0 0 0 x x 0] 
```

![在此处输入图像描述](../Images/16d8c0d24aaa557b4bf357a6d4875ecc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T07:10:41.293

如果我理解正确，您可以在您编写的代码之后添加此代码：

```
% get line info from the figure
lineH = findobj(gca, 'type', 'line');
xData = cell2mat(get(lineH, 'xdata')); % get x-data
yData = cell2mat(get(lineH, 'ydata')); % get y-data

% if an edge is between (x1,y1)<->(x2,y2), place a label at
% the center of the line, i.e. (x1+x2)/2 (y1+y2)/2 etc
labelposx=mean(xData');
labelposy=mean(yData');

% generate some random weights vector
weights=randi(21,length(labelposx),1); 

% plot the weights on top of the figure
text(labelposx,labelposy,mat2cell(weights), 'HorizontalAlignment','center',... 
                                            'BackgroundColor',[.7 .9 .7]); 
```

![在此处输入图像描述](../Images/d419a26c2a5ac7fb55b3eb1cbbae7640.png)

# mysql - 匹配列

> ID：13081802
> 
> 赞同：2
> 
> 时间：2012-10-26T06:22:35.010
> 
> 标签：mysql, sql

我想知道是否有办法显示一组匹配或不同的数据.. 比如说我有三个表，

```
tbl_1-
ip  |isp    |infection
----------------------
1   |aaaa   |malware
2   |bbbb   |malware
3   |cccc   |ddos
3   |cccc   |trojan
4   |dddd   |ddos

tbl_2-
ip  |isp    |infection
----------------------
1   |aaaa   |malware
3   |cccc   |ddos
4   |dddd   |trojan
5   |eeee   |trojan
6   |ffff   |other

tbl_3-
ip  |isp    |infection
----------------------
1   |aaaa   |ddos
6   |ffff   |
2   |bbbb   |other 
```

并得到如下结果，

```
Result i need-
ip  |isp    |infection
----------------------
1   |aaaa   |malware
1   |aaaa   |ddos
2   |bbbb   |malware
2   |bbbb   |other
3   |cccc   |ddos
3   |cccc   |trojan
4   |dddd   |ddos
4   |dddd   |trojan
5   |eeee   |trojan
6   |ffff   |other
6   |ffff   | 
```

问题是我不知道在这种情况下使用什么方法，我使用了这个查询 a `full join`，

```
SELECT a. * , b. * , c. *
FROM tbl_1 a
LEFT OUTER JOIN tbl_2 b
USING ( ip, isp, infection )
LEFT OUTER JOIN tbl_3 c
USING ( ip, isp, infection )
UNION
SELECT a. * , b. * , c. *
FROM tbl_2 b
LEFT OUTER JOIN tbl_1 a
USING ( ip, isp, infection )
LEFT OUTER JOIN tbl_3 c
USING ( ip, isp, infection )
UNION
SELECT a. * , b. * , c. *
FROM tbl_3 c
LEFT OUTER JOIN tbl_1 a
USING ( ip, isp, infection )
LEFT OUTER JOIN tbl_2 b
USING ( ip, isp, infection ) 
```

但这以不同的方式给出了结果，

```
Result i get-
ip  |isp    |infection  ip  |isp    |infection  ip  |isp    |infection
----------------------  ----------------------  ----------------------
1   |aaaa   |malware    1   |aaaa   |malware    NULL|NULL   |NULL
NULL|NULL   |NULL       NULL|NULL   |NULL       1   |aaaa   |ddos   
2   |bbbb   |malware    NULL|NULL   |NULL       NULL|NULL   |NULL   
NULL|NULL   |NULL       NULL|NULL   |NULL       2   |bbbb   |other
3   |cccc   |ddos       3   |cccc   |ddos       NULL|NULL   |NULL
3   |cccc   |trojan     NULL|NULL   |NULL       NULL|NULL   |NULL
4   |dddd   |ddos       NULL|NULL   |NULL       NULL|NULL   |NULL
NULL|NULL   |NULL       4   |dddd   |trojan     NULL|NULL   |NULL
NULL|NULL   |NULL       5   |eeee   |trojan     NULL|NULL   |NULL       
NULL|NULL   |NULL       6   |ffff   |other      NULL|NULL   |NULL       
NULL|NULL   |NULL       NULL|NULL   |NULL       6   |ffff   | 
```

请帮我解决这个问题，我只想在 3 列中显示数据..

非常感谢你 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T06:27:33.790

这很简单`UNION`

```
SELECT ip, isp, infection FROM tbl_1
UNION
SELECT ip, isp, infection FROM tbl_2
UNION
SELECT  ip, isp, infection FROM tbl_3
ORDER BY IP 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/f122e/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T06:27:45.983

```
SELECT * 
FROM   (
        SELECT * FROM tbl_1 
        UNION 
        SELECT * FROM tbl_2 
        UNION 
        SELECT * FROM tbl_3
       ) AS t
ORDER BY ip, isp 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T06:31:45.527

您应该`UNION`三个表并`GROUP BY`删除重复项：

```
SELECT ip, isp, infection 
FROM tbl_1

UNION

SELECT ip, isp, infection 
FROM tbl_2

UNION

SELECT  ip, isp, infection 
FROM tbl_3

GROUP BY ip, isp, infection

ORDER BY IP 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T06:34:43.703

这不是最优雅的解决方案，但这样的事情会起作用吗？（假设我的语法正确......目前无法测试）：

```
SELECT * FROM ((SELECT * FROM tbl_1) UNION (SELECT * FROM tbl_2) UNION (SELECT * FROM tbl_3)) ORDER BY isp DESC, infection DESC; 
```

# ios - ios网页查看代码没问题，但没有打开网站

> ID：13081814
> 
> 赞同：0
> 
> 时间：2012-10-26T06:23:58.357
> 
> 标签：ios

我正在尝试使用我的 webview 打开 google.com，但是虽然代码没有错误页面，但不会只打开空白的白色屏幕。我尝试了那里的示例代码并按照教程进行操作，但即使带有示例代码，我也总是会出现空白页面，我不能解决它我以前和iad合作过，他们没有给我带来任何问题，所以为什么这个简单的webvies会导致问题，请帮助我！

webview 对象连接到 viewcontroller，我使用的是 Xcode 4.3

```
@interface ViewController : UIViewController <UIWebViewDelegate>
{

    IBOutlet UIWebView *webview;  
}

@property (nonatomic, retain) UIWebView *webView; 

@end 
```

kk

```
@synthesize webView ;

    - (void)viewDidLoad
    {
        [super viewDidLoad];

        webview.delegate = self;

        NSString *fullURL = @"http://google.com";
        NSURL *url = [NSURL URLWithString:fullURL];
        NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
        [webView loadRequest:requestObj];

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:26:50.007

您是否在 loadView 中创建了它？由于您不使用interfacebuilder ...至少这是我从发布的代码中可以看出的。

# ruby-on-rails - 在 Ubuntu 服务器上设置 Rails 时出现 Phusion Passenger 错误

> ID：13081817
> 
> 赞同：0
> 
> 时间：2012-10-26T06:24:23.940
> 
> 标签：ruby-on-rails, ubuntu, passenger

我需要帮助来获取在 Ubuntu 11.10 服务器上运行的 rails 应用程序。

我已经使用了大约 2 天，无法超越此处屏幕截图中显示的部分。据我所知，我已经正确安装了 rvm、rails、ruby、capistrano、fusion 乘客。我认为我的问题与数据库（mysql）或让rails与数据库通信有关（我只是从下面的错误消息中猜测）。

```
Error message:
undefined method `active_record' for #<Rails::Application::Configuration:0x00000002e43fe8>
Exception class:
NoMethodError
Application root:
/var/www/jamesbay/blog/current 
```

我的主要问题是如何进行调试？我已尝试修改 config.ru 文件、application.rb 和 environment.rb，但没有解决。我不完全确定这些错误甚至意味着什么！

我已将 capistrano 正确部署到服务器上的目录中。我可以更新 git repo 并使用各种“cap”命令来处理从本地机器到服务器的实际部署。

任何帮助表示赞赏！（我只使用了大约 2 周的 Rails，并且由于这个项目，我已经学习了关于服务器管理的 TON）

## 错误

```
0   /usr/local/rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/railtie/configuration.rb  85  in `method_missing'
1   /home/jamesbay/blog/releases/20121026055113/config/application.rb   54  in `'
2   /home/jamesbay/blog/releases/20121026055113/config/application.rb   13  in `'
3   /home/jamesbay/blog/releases/20121026055113/config/application.rb   12  in `'
4   /home/jamesbay/blog/releases/20121026055113/config/environment.rb   2   in `require'
5   /home/jamesbay/blog/releases/20121026055113/config/environment.rb   2   in `'
6   config.ru   3   in `require'
7   config.ru   3   in `block in '
8   /usr/local/rvm/gems/ruby-1.9.3-p286/gems/rack-1.4.1/lib/rack/builder.rb 51  in `instance_eval'
9   /usr/local/rvm/gems/ruby-1.9.3-p286/gems/rack-1.4.1/lib/rack/builder.rb 51  in `initialize'
10  config.ru   1   in `new'
11  config.ru 
```

## 设置

```
Rails 3.2.8
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]
rvm 1.16.17 (stable)
Capistrano 2.13.4
Phusion Passenger 3.0.17

RubyGems Environment:

- RUBYGEMS VERSION: 1.8.24
- RUBY VERSION: 1.9.3 (2012-04-20 patchlevel 194) [x86_64-linux]
- INSTALLATION DIRECTORY: /usr/local/rvm/gems/ruby-1.9.3-p194
- RUBY EXECUTABLE: /usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby
- EXECUTABLE DIRECTORY: /usr/local/rvm/gems/ruby-1.9.3-p194/bin
- RUBYGEMS PLATFORMS:
- ruby
- x86_64-linux
- GEM PATHS:
 - /usr/local/rvm/gems/ruby-1.9.3-p194
 - /usr/local/rvm/gems/ruby-1.9.3-p194@global
- GEM CONFIGURATION:
 - :update_sources => true
 - :verbose => true
 - :benchmark => false
 - :backtrace => false
 - :bulk_threshold => 1000
- REMOTE SOURCES:
 - http://rubygems.org/ 
```

Gems 使用 actionmailer (3.2.8) actionpack (3.2.8) activemodel (3.2.8) activerecord (3.2.8) activeresource (3.2.8) activesupport (3.2.8) arel (3.0.2) bcrypt-ruby (3.0\. 1) builder (3.0.4) bundler (1.2.1) capistrano (2.13.4) coffee-rails (3.2.2) coffee-script (2.2.0) coffee-script-source (1.4.0) erubis (2.7\. 0) execjs (1.4.0) highline (1.6.15) hike (1.2.1) i18n (0.6.1) Journey (1.0.4) jquery-rails (2.1.3) json (1.7.5) mail (2.4\. 4) mime-types (1.19) multi_json (1.3.6) mysql2 (0.3.11) net-scp (1.0.4) net-sftp (2.0.5) net-ssh (2.6.1) net-ssh-gateway ( 1.1.0) polyglot (0.3.3) rack (1.4.1) rack-cache (1.2) rack-ssl (1.3.2) rack-test (0.6.2) rails (3.2.8) railties (3.2.8) rake (0.9.2.2) rdoc (3.12) ruby​​gems-bundler (1.1.0) rvm (1.11.3.5) sass (3.2.1) sass-rails (3.2.5) sprockets (2.1.3) sqlite3 (1.3.6)雷神 (0.16.0) 倾斜 (1.3.3) 树顶 (1.4.11) tzinfo (0.3.33) 丑化者 (1.3.0)

--

这是刚才在浏览器中打开应用程序后日志文件中显示的内容：

```
 [Fri Oct 26 07:46:15 2012] [notice] Graceful restart requested, doing restart
    PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php5/20090626/gd.so' - /usr/lib/php5/20090626/gd.so: cannot open shared object file: No such file or directory in Unknown on line 0
    PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php5/20090626/mcrypt.so' - /usr/lib/php5/20090626/mcrypt.so: cannot open shared object file: No such file or directory in Unknown on line 0
    [Fri Oct 26 07:46:15 2012] [notice] Apache/2.2.20 (Ubuntu) DAV/2 SVN/1.6.12 PHP/5.3.6-13ubuntu3.7 with Suhosin-Patch Phusion_Passenger/3.0.17 configured -- resuming normal operations
    [ pid=30885 thr=4411480 file=utils.rb:176 time=2012-10-26 12:56:40.708 ]: *** Exception NoMethodError in PhusionPassenger::Rack::ApplicationSpawner (undefined method `active_record' for #<Rails::Application::Configuration:0x00000001931f38>) (process 30885, thread #<Thread:0x0000000086a0b0>):
            from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/railtie/configuration.rb:85:in `method_missing'
            from /home/jamesbay/blog/releases/20121026055113/config/application.rb:54:in `<class:Application>'
            from /home/jamesbay/blog/releases/20121026055113/config/application.rb:13:in `<module:Blog>'
            from /home/jamesbay/blog/releases/20121026055113/config/application.rb:12:in `<top (required)>'
            from /home/jamesbay/blog/releases/20121026055113/config/environment.rb:2:in `require'
            from /home/jamesbay/blog/releases/20121026055113/config/environment.rb:2:in `<top (required)>'
            from config.ru:3:in `require'
            from config.ru:3:in `block in <main>'
            from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
            from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
            from config.ru:1:in `new'
            from config.ru:1:in `<main>'
            from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/passenger-3.0.17/lib/phusion_passenger/rack/application_spawner.rb:225:in `eval'
            from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/passenger-3.0.17/lib/phusion_passenger/rack/application_spawner.rb:225:in `load_rack_app'
            from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/passenger-3.0.17/lib/phusion_passenger/rack/application_spawner.rb:157:in `block in initialize_server'
            from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/passenger-3.0.17/lib/phusion_passenger/utils.rb:563:in `report_app_init_status'
            from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/passenger-3.0.17/lib/phusion_passenger/rack/application_spawner.rb:154:in `initialize_server'
            from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server.rb:204:in `start_synchronously'
            from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server.rb:180:in `start'
            from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/passenger-3.0.17/lib/phusion_passenger/rack/application_spawner.rb:129:in `start'
            from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/passenger-3.0.17/lib/phusion_passenger/spawn_manager.rb:253:in `block (2 levels) in spawn_rack_application'
            from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
            from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/passenger-3.0.17/lib/phusion_passenger/spawn_manager.rb:246:in `block in spawn_rack_application'
            from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server_collection.rb:82:in `block in synchronize'
            from <internal:prelude>:10:in `synchronize'
            from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
            from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/passenger-3.0.17/lib/phusion_passenger/spawn_manager.rb:244:in `spawn_rack_application'
            from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/passenger-3.0.17/lib/phusion_passenger/spawn_manager.rb:137:in `spawn_application'
            from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/passenger-3.0.17/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
            from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
            from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
            from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/passenger-3.0.17/helper-scripts/passenger-spawn-server:99:in `<main>' 
```

在切换到 rails 1.9.3-p194（与我的开发机器相同）并删除 p286 后，当我进入我的站点时，我收到一条消息，说“您正在寻找的页面不存在”在 RED 中。

这是 error.log 文件的输出：

```
Rails Error: Unable to access log file. Please ensure that /home/jamesbay/blog/releases/20121026205006/log/production.log exists and is chmod 0666\. The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.

ActionController::RoutingError (No route matches [GET] "/jamesbay"):
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  railties (3.2.8) lib/rails/railtie/configurable.rb:30:in `method_missing'
  passenger (3.0.17) lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  passenger (3.0.17) lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  passenger (3.0.17) lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  passenger (3.0.17) lib/phusion_passenger/rack/application_spawner.rb:206:in `start_request_handler'
  passenger (3.0.17) lib/phusion_passenger/rack/application_spawner.rb:171:in `block in handle_spawn_application'
  passenger (3.0.17) lib/phusion_passenger/utils.rb:470:in `safe_fork'
  passenger (3.0.17) lib/phusion_passenger/rack/application_spawner.rb:166:in `handle_spawn_application'
  passenger (3.0.17) lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  passenger (3.0.17) lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  passenger (3.0.17) lib/phusion_passenger/abstract_server.rb:180:in `start'
  passenger (3.0.17) lib/phusion_passenger/rack/application_spawner.rb:129:in `start'
  passenger (3.0.17) lib/phusion_passenger/spawn_manager.rb:253:in `block (2 levels) in spawn_rack_application'
  passenger (3.0.17) lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  passenger (3.0.17) lib/phusion_passenger/spawn_manager.rb:246:in `block in spawn_rack_application'
  passenger (3.0.17) lib/phusion_passenger/abstract_server_collection.rb:82:in `block in synchronize'
  <internal:prelude>:10:in `synchronize'
  passenger (3.0.17) lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  passenger (3.0.17) lib/phusion_passenger/spawn_manager.rb:244:in `spawn_rack_application'
  passenger (3.0.17) lib/phusion_passenger/spawn_manager.rb:137:in `spawn_application'
  passenger (3.0.17) lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  passenger (3.0.17) lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  passenger (3.0.17) lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  passenger (3.0.17) helper-scripts/passenger-spawn-server:99:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T19:47:28.887

我最终解决了我的问题。

主要问题是由于使用 rvm 安装和管理了多个版本的 ruby​​。这再加上没有正确初始化我的数据库并且没有正确设置我的 apache 路径导致了错误。

我的默认 ruby​​ 版本设置为 ruby​​-1.9.3-p286，但我在开发机器上使用的是 ruby​​-1.9.3-p194。我之前在服务器上安装了这两个版本，但没有选择默认值。确保在部署之前选择默认版本。

我正在使用子 URI，但我没有使用符号链接正确设置路径。例如，我的应用程序文件位于 /home/username/appName 中，公共目录位于 /home/username/appName/current/public。在我的 DocumentRoot 中，/var/www 我创建了一个名为“appName”的符号链接，它指向公共目录路径。我搞砸的地方是没有在我的 /etc/apache2/sites-available/default 文件中定义 RackBasedURI 路径。

此过程在此处引用： [http ://www.modrails.com/documentation/Users%20guide%20Apache.html#deploying_rack_to_sub_uri](http://www.modrails.com/documentation/Users%20guide%20Apache.html#deploying_rack_to_sub_uri)

# java - JSP scriptlets 是一种反模式吗？

> ID：13081818
> 
> 赞同：2
> 
> 时间：2012-10-26T06:24:28.320
> 
> 标签：java, jsp, jakarta-ee, scriptlet

我希望你明白这个问题。你怎么看？如果我在这里发布一些带有 scriptlet 的代码，我相信您会告诉我不要使用 scriptlet。对？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T06:37:20.813

我认为是的，出于几个原因应该避免它。起初我真的不喜欢我的代码中的沙拉:) JSP 旨在标记事物，而不是表示层中的逻辑。它只是不可读。

其次，当我开始学习 JSP 时，有人告诉我，开发 JSP 的人认为，在理想世界中，真正创建 jsp 页面的人不应该是 java 程序员。如果您需要一些应该由 JSP 中的逻辑（条件/循环等）完成的事情，java 程序员将更好地在较新的 jsp 版本中创建标签/标签文件。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T06:32:26.917

不，但理解起来会很困难，而且不存在与性能相关的问题

查看这篇文章以获取更多信息：[无脚本 JSP 页面：前台人员](http://www.javaranch.com/journal/200603/Journal200603.jsp#a5)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T07:32:09.297

JSP 中没有逻辑。只是简单地处理豆子。:) 所以 IMO scriplets 不是一个好的解决方案。UI 必须是 UI，但不是很重的东西。

# r - 如何加快群内累计？

> ID：13081821
> 
> 赞同：1
> 
> 时间：2012-10-26T06:24:30.150
> 
> 标签：r, aggregate

我有以下数据框：

```
id<-c(1,1,1,1,1,3,3,3,3)
spent<-c(10,20,30,40,50,60,70,80,90)
date<-c("11-11-07","11-11-07","23-11-07","12-12-08","17-12-08","11-11-07","23-11-07","23-   11-07","16-01-08")
df<-data.frame(id,date,spent)
df$date2<-as.Date(as.character(df$date), format = "%d-%m-%y")

 id     date spent      date2
1  1 11-11-07    10 2007-11-11
2  1 11-11-07    20 2007-11-11
3  1 23-11-07    30 2007-11-23
4  1 12-12-08    40 2008-12-12
5  1 17-12-08    50 2008-12-17
6  3 11-11-07    60 2007-11-11
7  3 23-11-07    70 2007-11-23
8  3 23-11-07    80 2007-11-23
9  3 16-01-08    90 2008-01-16 
```

我需要每天计算总和`spent`并将`id`其包含在框架中，如下所示：

```
 id     date spent      date2    sum.spent
1  1 11-11-07    10 2007-11-11    10
2  1 11-11-07    20 2007-11-11    30 
3  1 23-11-07    30 2007-11-23    30
4  1 12-12-08    40 2008-12-12    40
5  1 17-12-08    50 2008-12-17    50
6  3 11-11-07    60 2007-11-11    60
7  3 23-11-07    70 2007-11-23    70
8  3 23-11-07    80 2007-11-23    150
9  3 16-01-08    90 2008-01-16    90 
```

以下脚本运行良好（除了第一行没什么大不了的）：

```
df$spent2<-NA
for (a in 2:9)
if (df[a,1]==df[a-1,1]&& df[a,4]==df[a-1,4])
(df[a,5]=df[a,3]+df[a-1,3])else(df[a,5]=df[a,3]) 
```

但是，由于我的实际数据集中的行数约为 150 万，因此执行上述脚本大约需要 5 天时间。我想知道您是否可以提出一种更有效的方法来编写此代码并实现相同的目标。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T06:39:37.330

`data.table`非常快，尤其是对于如此大的数据集。对于 150 万条记录，这应该运行得非常快。

```
library(data.table)
df <- data.table(df)
df <- df[, sum.spent:=cumsum(spent), by = list(id, date2)] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T06:50:12.253

这是一个基本的 R 解决方案：

```
df$sum.spent <- ave(df$spent,df$id,df$date2,FUN=cumsum) 
```

我得到的结果与您的预期答案不同，但我认为这是正确的？

# excel - Excel：从单元格公式调用 VBA 库函数？

> ID：13081823
> 
> 赞同：0
> 
> 时间：2012-10-26T06:24:38.597
> 
> 标签：excel, excel-2003, vba

是否可以调用 VBA 库函数，例如。`StrReverse`(in `VBA.Strings`) 直接来自单元格公式而不编写包装函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T07:54:59.390

不，这是不可能的，您必须创建一个包装函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T07:47:46.873

我不相信没有某种包装器来进行编组等是可能的。

# c++ - 引用 C++ 中的数组

> ID：13081837
> 
> 赞同：3
> 
> 时间：2012-10-26T06:25:37.850
> 
> 标签：c++, arrays, reference

问题是制作一个由 10 个整数组成的数组，这很好

```
int array[10]; 
```

现在的问题是

如何制作我上面声明的`reference`？`array`

我试过这个

```
int &ra = a; 
```

但这给了我错误...请向我提供有关此错误的详细信息以及如何`reference`制作`array`.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-26T06:28:29.347

```
int (&ra)[10] = a; 
```

或者，您可以使用 typedef 将其分隔为“10 个整数数组”的类型并对其进行引用，如下所示：

```
typedef int int10[10];
int10& my_ref = a; 
```

你的问题`int &ra = a;`是它告诉编译器创建一个引用类型的引用`int`......`array of 10 ints`它们只是不一样的东西。考虑这`sizeof(int)`是十个数组大小的十分之一`int`——它们占用不同数量的内存。特定字符可以满足您对引用类型的要求，例如`int& ra = a[0];`.

我很欣赏这`int* p = a;`是允许的有点令人困惑 - 为了与不太安全的 C 兼容，指针可用于访问单个元素或数组，尽管不保留有关数组大小的任何信息。这是更喜欢引用的一个原因——它们比指针增加了一点安全性和功能。

对于增加功能的示例，您可以获取并获取数组 ( )`sizeof(my_ref)`中的字节数，而会给您指针 ( ) 的大小和. 您可以使用这样的代码“捕获”数组维度以在函数中使用：`int``10 * sizeof(int)``sizeof p``sizeof(int*)``sizeof *p == sizeof(int)`

```
template <int N>
void f(int (&x)[N])
{
    std::cout << "I know this array has " << N << " elements\n";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T06:27:45.260

对数组的引用将具有类型`int (&a)[10]`。

```
int array[10];
int (&a)[10] = array; 
```

有时使用简化一些事情可能会很有用`typedef`

```
typedef int (&ArrayRef)[10];
...
ArrayRef a = array; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T06:27:19.603

这是对大小为 10 的整数数组的引用：

```
int (&ra)[10]; 
```

所以

```
int (&ra)[10] = a; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-30T08:26:38.963

您可以 typedef 数组类型（**类型不应不完整**），如下所示：

```
#define LEN 10
typedef int (array)[LEN]; 

int main(void)
{
    array arr = {1, 2, 3, 4, 5};    //define int arr[10] = {1, 2, 3, 4, 5};
    array arr2;                     //declare int arr[10];
    array *arrptr = &arr;           // pointer to array: int (*arrptr)[10] = &arr;
    array &&arrvef;                 // declare rvalue reference to array of 10 ints
    array &ref = arr;               // define reference to arr: int (&ref)[10] = arr;
} 
```

# javascript - 用户对用户应用程序请求未显示消息

> ID：13081842
> 
> 赞同：0
> 
> 时间：2012-10-26T06:26:02.633
> 
> 标签：javascript, facebook, facebook-graph-api

> **可能重复：**
> [Facebook 请求对话框未向收件人显示消息](https://stackoverflow.com/questions/6297853/facebook-requests-dialog-not-showing-message-to-recepient)

我尝试使用以下代码在 facebook 应用程序中向用户请求发送 suer

```
FB.ui({ method: 'apprequests',
message: 'how are you dude'}); 
```

出现请求对话框，通知也发送给目标用户，但用户没有收到通知中的消息。它只显示..ABC 向您发送了此填充应用程序的请求..我不明白我是什么做错了。

# ubuntu - 无法在 Ubuntu 12.04 上安装 cuda 5 示例

> ID：13081854
> 
> 赞同：4
> 
> 时间：2012-10-26T06:27:17.613
> 
> 标签：ubuntu, cuda

我安装了 cuda 5，但我无法安装它的示例，因为

```
Missing required library libglut.so 
```

我寻找答案，有人说

```
sudo ln -s /usr/lib/x86_64-linux-gnu/libglut.so /usr/lib/libglut.so 
```

对于 x64 架构。但是如何为 x32 架构做到这一点呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T13:31:07.483

为确保您已安装 GLUT，您应该尝试

```
sudo apt-get install freeglut3 
```

这将在 Ubuntu 12.04 中安装 GLUT。如果没有安装它会安装它，否则它会告诉你

```
freeglut3-dev is already the newest version. 
```

如果之后它仍然不起作用，您可以从这里链接它： /usr/lib/i386-linux-gnu/libglut.so.3 （这是[Ubuntu 12.04 32bit 中库的位置](http://pkgs.org/ubuntu-12.04/ubuntu-updates-main-i386/freeglut3_2.6.0-1ubuntu3_i386.deb.html)）类似于

```
sudo ln -s /usr/lib/i386-linux-gnu/libglut.so.3 /usr/lib/libglut.so 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T07:18:30.030

我发现了这样的东西：

> 如果您的系统上没有安装 OpenGL 和/或 GLUT，您可以同时安装：
> 
> `yum install freeglut-devel`
> 
> 它应该安装所有依赖包，包括 OpenGL 本身。

而不是`yum`尝试`sudo aptitude`或`sudo apt-get`但它取决于你的Linux发行版。

# apache-pig - pig文件加载错误

> ID：13081855
> 
> 赞同：0
> 
> 时间：2012-10-26T06:27:18.467
> 
> 标签：apache-pig

我正在尝试在 pig env 上运行此命令。

```
grunt> A =  LOAD inp; 
```

但我在日志文件中收到此错误：Pig Stack Trace:

> 错误 1200：不匹配的输入 'inp' 期望 QUOTEDSTRING
> 
> 解析失败：在 org.apache.pig.parser.QueryParserDriver.parse(QueryParserDriver.java:168) 在org.apache.pig.PigServer$Graph.validateQuery(PigServer.java:1565) 在 org.apache.pig.PigServer$Graph.registerQuery(PigServer.java:1538) 在 org.apache.pig.PigServer.registerQuery(PigServer. java:540) 在 org.apache.pig.tools.grunt.GruntParser.processPig(GruntParser.java:970) 在 org.apache.pig.tools.pigscript.parser.PigScriptParser.parse(PigScriptParser.java:386) 在 org .apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:189) 在 org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:165) 在 org.apache.pig.tools.grunt .Grunt.run（咕噜声。java:69) 在 org.apache.pig.Main.run(Main.java:490) 在 org.apache.pig.Main.main(Main.java:111) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 在 java.lang.reflect.Method.invoke(Method.java:601) 在 org. apache.hadoop.util.RunJar.main(RunJar.java:156)org.apache.hadoop.util.RunJar.main(RunJar.java:156) 上的 Method.invoke(Method.java:601)org.apache.hadoop.util.RunJar.main(RunJar.java:156) 上的 Method.invoke(Method.java:601)

*   在控制台中，我是这样的：

咕噜声> A = 负载输入；
2012-10-26 12:18:34,627 [main] 错误 org.apache.pig.tools.grunt.Grunt - 错误 1200：不匹配的输入“inp”期望日志文件中的 QUOTEDSTRING 详细信息：/usr/local/hadoop/pig_1351232517175.log

**任何机构都可以为此提供适当的解决方案吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T00:38:22.837

load 的语法使用错误。查看此处提供的正确示例。 [http://pig.apache.org/docs/r0.7.0/piglatin_ref2.html#LOAD](http://pig.apache.org/docs/r0.7.0/piglatin_ref2.html#LOAD)

假设我们有一个名为 myfile.txt 的数据文件。字段以制表符分隔。记录以换行符分隔。

```
1 2 3
4 2 1
8 3 4 
```

在此示例中，默认加载函数 PigStorage 从 myfile.txt 加载数据以形成关系 A。这两个 LOAD 语句是等效的。请注意，由于未指定模式，因此未命名字段，并且所有字段默认类型为 bytearray。

```
A = LOAD 'myfile.txt';

A = LOAD 'myfile.txt' USING PigStorage('\t');

DUMP A;
(1,2,3)
(4,2,1)
(8,3,4) 
```

[来自http://pig.apache.org/docs](http://pig.apache.org/docs)的示例

我相信错误日志是不言自明的，它说 - 期待 QUOTEDSTRING

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-23T03:18:28.040

请将文件名放在单引号中以解决此问题。

# java - 如何使 JDialog 成为唯一可访问的组件？

> ID：13081859
> 
> 赞同：2
> 
> 时间：2012-10-26T06:27:21.973
> 
> 标签：java, windows, swing, desktop-application, jdialog

我正在尝试制作一个`JDialog`java 桌面应用程序，并且我不希望用户能够单击任何其他框架，直到他们关闭`JDialog`. 它更像是一个`JFileChooser`. 调用时`JFileChooser`，用户必须先选择或取消，然后才能访问其他帧。我尝试使用 alwaysOnTop 但用户仍然可以移动到其他框架。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T06:28:36.867

使您的 JDialog 成为[模态](http://docs.oracle.com/javase/7/docs/api/java/awt/Dialog.html#setModal%28boolean%29)对话框。

在这里更好地解释：[如何在对话框中使用模态？](http://docs.oracle.com/javase/tutorial/uiswing/misc/modality.html)

# google-apps-script - 在 Google Apps 脚本中将表单提交到不同的服务器

> ID：13081860
> 
> 赞同：2
> 
> 时间：2012-10-26T06:27:29.683
> 
> 标签：google-apps-script

我按照[HtmlService 文档](https://developers.google.com/apps-script/html_service)创建表单并自动提交它以向另一台服务器发出发布请求。

我创建了类似的东西：

```
return HtmlService.createHtmlOutput(
    "Loading.. <form action='http://xyz.com/abc' method='post' id='foo' />
    <input type='hidden' name='data' value='xyz' />  
    <script>document.getElementById('foo').submit(); </script>" ) 
```

它最初工作正常，但现在该代码运行后不会自动提交表单。而是显示一个空白页面（带有单词加载）并且没有重定向。我可以知道如何在页面加载时自动提交表单，以便将发布请求发送到具有所需数据的另一台服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:45:27.137

这现在在[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1995)中被跟踪为 #1995。我尝试了一些解决方法，例如使用 jQuery 就绪功能、自动单击提交按钮或 setTimeouts，但不起作用。请给问题加注星标，以便您可以跟踪它。

# macos - AVAssetWriter：使用替代编码

> ID：13081864
> 
> 赞同：0
> 
> 时间：2012-10-26T06:27:45.730
> 
> 标签：macos, cocoa, avfoundation, avassetwriter, avassetexportsession

我已经编写了一个应用程序来使用 AVFramework 的 AVAssetReader 和 AVAssetWriter 逐步浏览（和更改）视频的每一帧。它工作得很好，但我需要能够将视频编码为 MPEG4。有没有办法将 AVAssetWriter 的输出编码更改为 H264 以外的编码？如果没有，有没有办法可以将 AVAssetExportSession 与 AVAssetWriter 一起使用（不写入临时文件）？

有没有更好的方法来一起做这一切？

应用程序需要读取源视频，处理每一帧并写入 H264 或 MPEG4。(OSX)

# ruby-on-rails - 在任何来源中都找不到 capistrano-2.13.3

> ID：13081868
> 
> 赞同：7
> 
> 时间：2012-10-26T06:28:11.960
> 
> 标签：ruby-on-rails, ruby-on-rails-3

[我使用http://jaysonrowe.blogspot.com/2012/04/installing-ruby-and-rails-on-fedora.html](http://jaysonrowe.blogspot.com/2012/04/installing-ruby-and-rails-on-fedora.html)在 Rails 环境中设置 ruby ​​。我安装了mysql 5.5。现在，当我从 bitbucket 克隆一个项目并运行 bundle install 时，我收到以下错误：

```
[xyz@xyz ruby_repo]$ bundle install
Fetching gem metadata from http://rubygems.org/......
Fetching gem metadata from http://rubygems.org/..
Could not find capistrano-2.13.3 in any of the sources 
```

当我在 ruby​​_repo 目录中执行 rails -v 时，出现以下错误：

```
[xyz@xyz ruby_repo]$  rails -v
Could not find abstract-1.0.0 in any of the sources
Run `bundle install` to install missing gems. 
```

以下是我的 Gemfile：

```
source 'http://rubygems.org'

gem 'rails', '3.0.10'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'
gem 'rmagick'
gem "will_paginate", "~> 3.0.pre2"
gem 'mysql2','0.2.7'
gem "nokogiri"
gem 'activemerchant', :require => 'active_merchant'
gem "webrobots", "~> 0.0.10"
gem 'mixpanel'
gem 'thinking-sphinx', '2.0.10'
gem 'whenever', :require => false
gem 'json'
gem 'vimeo'
gem "koala"
gem 'typhoeus'
gem 'delayed_job_active_record'
gem "delayed_job"
gem 'mini_fb'
gem 'daemons'
gem 'annotate'
gem 'capistrano'
gem 'rvm-capistrano'
gem 'grosser-ssl_requirement', :require => 'ssl_requirement'
gem 'acts-as-taggable-on'
gem 'capistrano'
gem 'rvm-capistrano'
# Use unicorn as the web server
# gem 'unicorn'

# Deploy with Capistrano
#gem 'capistrano'
#gem 'capistrano-ext'
#To use debugger (ruby-debug for Ruby 1.8.7+, ruby-debug19 for Ruby 1.9.2+)
# gem 'ruby-debug'

# Bundle the extra gems:
# gem 'bj'
# gem 'nokogiri'
# gem 'sqlite3-ruby', :require => 'sqlite3'
# gem 'aws-s3', :require => 'aws/s3'

# Bundle gems for the local environment. Make sure to
# put test-only gems in this group so their generators
# and rake tasks are available in development mode:
# group :development, :test do
#   gem 'webrat'
# end 
```

当我执行 gem list 时，我得到以下输出

```
*** LOCAL GEMS ***

actionmailer (3.2.8)
actionpack (3.2.8)
activemodel (3.2.8)
activerecord (3.2.8)
activeresource (3.2.8)
activesupport (3.2.8)
arel (3.0.2)
builder (3.0.4)
bundler (1.2.1)
capistrano (2.13.4)
coffee-rails (3.2.2)
coffee-script (2.2.0)
coffee-script-source (1.4.0)
erubis (2.7.0)
execjs (1.4.0)
highline (1.6.15)
hike (1.2.1)
i18n (0.6.1)
journey (1.0.4)
jquery-rails (2.1.3)
json (1.7.5)
mail (2.4.4)
mime-types (1.19)
multi_json (1.3.6)
mysql2 (0.3.11)
net-scp (1.0.4)
net-sftp (2.0.5)
net-ssh (2.6.1)
net-ssh-gateway (1.1.0)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.2)
rack-ssl (1.3.2)
rack-test (0.6.2)
rails (3.2.8)
railties (3.2.8)
rake (0.9.2.2)
rdoc (3.12)
rubygems-bundler (1.1.0)
rvm (1.11.3.5)
sass (3.2.1)
sass-rails (3.2.5)
sprockets (2.1.3)
sqlite3 (1.3.6)
thor (0.16.0)
tilt (1.3.3)
treetop (1.4.11)
tzinfo (0.3.33)
uglifier (1.3.0) 
```

但是，当我创建一个全新的项目时，我不会遇到任何此类问题。谁能告诉我可能是什么问题？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-26T16:44:47.130

此版本已从 ruby​​gems.org 中删除。通过以这种方式运行 bundle update 来更新 capistrano：

```
bundle update capistrano 
```

这样，您只需将 capistrano 更新到当前版本。如果你删除 Gemfile.lock 并运行 bundle，你所有的 gem 版本都会更新，这通常不是你想要的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-26T09:11:45.983

删除 Gemfile.lock 的内容或文件本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-07T23:57:13.250

我只是想出问题。麻烦制造者是rvm。我为我的应用程序创建了一个 gemset，并在这个 gemset 中运行 bundle。但是，由于某种原因，当我运行 rails c 或 bundle exec rails c 时，它仍然会在全局 gemset 中查找它需要的 gem。

因此，在我转到全局 gemset 并安装所有 gem 之后，它就可以工作了。不确定是单独的 rvm gemset 麻烦，还是 bundle + rvm gemset 的组合。

# ios - 拆分视图中的集合视图控制器不更新

> ID：13081881
> 
> 赞同：1
> 
> 时间：2012-10-26T06:29:23.997
> 
> 标签：ios, xcode, ipad, uisplitviewcontroller, uicollectionview

我使用主从应用程序模板创建了一个项目。该项目针对 iphone 和 iPad。

我的主视图包含一个从数据库数据填充的表视图控制器。到目前为止没有问题。

在详细视图中，我将默认视图控制器替换为 Collection 视图控制器。我希望主表视图中的每一行都在集合视图中创建多个单元格。

现在在情节提要中，iphone 版本在表格和集合（主/细节）控制器之间有一个 segue，一切正常。

```
MasterViewController.m    
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"showDetail"]) {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        Inbound *current = inbounds[indexPath.row];
        [[segue destinationViewController] setDetailItem:current];
    }
} 
```

我的自定义对象“入站”正在从主视图传递到详细视图。发生这种情况时，详细信息/集合视图控制器会更新单元格。

```
DetailViewController.m
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
   //Go round the DB and update the cells
} 
```

我的问题出在 iPad 版本的拆分视图中。在情节提要中，主视图和详细视图之间存在关系而不是分隔。当我选择表格行时执行的唯一代码是：

```
MasterViewController.m
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
        Inbound *current = inbounds[indexPath.row];
        self.detailCollectionViewController.detailItem = current;

        NSLog(@"%@",@"table cell clicked");
    }
} 
```

我可以看到我的自定义“入站”对象已正确传递给详细视图控制器。但是由于某种原因，集合视图没有更新。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:33:57.697

在 iPhone 版本上，新视图被推送到屏幕上，因此您的方法之一是根据 detailItem 初始化视图。

在 iPad 中，详细视图已经在屏幕上。您需要确保您的详细视图设置器函数将重新加载集合视图的数据 - 我敢打赌您目前没有这样做......

换句话说，你需要这样的东西（假设 ARC）

```
- (void)setDetailItem:(Inbound *)detailItem
{
    _detailItem = detailItem;
    [_collectionView reloadData];
} 
```

蒂姆

# c# - winrt中如何实现页面导航的翻转效果？

> ID：13081883
> 
> 赞同：0
> 
> 时间：2012-10-26T06:29:33.080
> 
> 标签：c#, windows-runtime

我的主屏幕上有瓷砖。我希望当用户单击任何图块时，下一页应该打开与开始屏幕中相同的动画。当用户单击开始屏幕上的任何图块时，它会翻转并打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T07:04:32.690

使用基本的 Frame 控件实现可能很难实现，因为它只有一个内容，因此您需要将磁贴翻转一半，淡出页面的其余部分，然后立即加载并翻转下一页。如果您可以在制作动画之前将下一页加载到某个透明容器中，那将更加可行。

您可以通过为分配给 UI 元素的 Projection 属性的 PlaneProjection 对象的旋转属性设置动画来执行用于翻转控件的变换。

另请注意，启动屏幕只需要加载和动画启动应用程序的小启动屏幕图像。如果您的下一页需要任何加载，您可能需要在调用导航之前预加载它，以避免在平滑导航开始之前出现延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T07:11:56.523

如果您使用的是 Web 应用程序，我建议您使用 JQuery。

你会发现很多插件在那里。

# c# - 生成传出 url 时选择了意外的路由

> ID：13081884
> 
> 赞同：14
> 
> 时间：2012-10-26T06:29:48.680
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-routing

请考虑以下路线：

```
routes.MapRoute(
    "route1",
    "{controller}/{month}-{year}/{action}/{user}"
);
routes.MapRoute(
    "route2",
     "{controller}/{month}-{year}/{action}"
); 
```

以及以下测试：

测试 1

```
[TestMethod]
public void Test1()
{
    RouteCollection routes = new RouteCollection();
    MvcApplication.RegisterRoutes(routes);
    RequestContext context = new RequestContext(CreateHttpContext(), 
                                                new RouteData());

    DateTime now = DateTime.Now;
    string result;

    context.RouteData.Values.Add("controller", "Home");
    context.RouteData.Values.Add("action", "Index");
    context.RouteData.Values.Add("user", "user1");
    result = UrlHelper.GenerateUrl(null, "Index", null,
                                    new RouteValueDictionary(
                                        new
                                        {
                                            month = now.Month,
                                            year = now.Year
                                        }),
                                    routes, context, true);
    //OK, result == /Home/10-2012/Index/user1
    Assert.AreEqual(string.Format("/Home/{0}-{1}/Index/user1", now.Month, now.Year), 
                    result);
} 
```

测试 2

```
[TestMethod]
public void Test2()
{
    RouteCollection routes = new RouteCollection();
    MvcApplication.RegisterRoutes(routes);
    RequestContext context = new RequestContext(CreateHttpContext(), 
                                                new RouteData());

    DateTime now = DateTime.Now;
    string result;

    context.RouteData.Values.Add("controller", "Home");
    context.RouteData.Values.Add("action", "Index");
    context.RouteData.Values.Add("user", "user1");
    context.RouteData.Values.Add("month", now.Month + 1);
    context.RouteData.Values.Add("year", now.Year);
    result = UrlHelper.GenerateUrl(null, "Index", null,
                                    new RouteValueDictionary(
                                        new
                                        {
                                            month = now.Month,
                                            year = now.Year
                                        }),
                                    routes, context, true);
    //Error because result == /Home/10-2012/Index
    Assert.AreEqual(string.Format("/Home/{0}-{1}/Index/user1", now.Month, now.Year), 
    result);
} 
```

这个测试模拟了我在请求上下文中已经有路由值并尝试使用 UrlHelper 生成传出 url 的情况。

问题是（在测试 2 中提出），如果我有来自预期路线（此处`route1`）的所有段的值并尝试通过`routeValues`参数替换其中的一些，则省略所需路线并使用下一个合适的路线。

所以测试 1 运行良好，因为请求上下文已经具有路由 1 的 5 个段中的 3 个的值，并且缺少的两个段（即`year`和`month`）的值通过`routeValues`参数传递。

测试 2 具有请求上下文中所有 5 个段的值。我想用其他值替换其中的一些（即月份和年份） throught `routeValues`。但路线 1 似乎 *不合适*，使用路线 2。

为什么？我的路线有什么问题？

在这种情况下，我是否应该手动清除请求上下文？

**编辑**

```
[TestMethod]
public void Test3()
{
    RouteCollection routes = new RouteCollection();
    MvcApplication.RegisterRoutes(routes);
    RequestContext context = new RequestContext(CreateHttpContext(), 
                                                new RouteData());

    DateTime now = DateTime.Now;
    string result;

    context.RouteData.Values.Add("controller", "Home");
    context.RouteData.Values.Add("action", "Index");
    context.RouteData.Values.Add("month", now.Month.ToString());
    context.RouteData.Values.Add("year", now.Year.ToString());
    result = UrlHelper.GenerateUrl(null, "Index", null,
                                    new RouteValueDictionary(
                                        new
                                        {
                                            month = now.Month + 1,
                                            year = now.Year + 1
                                        }),
                                    routes, context, true);
    Assert.AreEqual(string.Format("/Home/{0}-{1}/Index", now.Month + 1, now.Year + 1), 
                    result);
} 
```

这个测试让事情变得更加混乱。在这里，我正在测试 route2。它有效！我在请求上下文中有所有 4 个段的值，通过 传递其他值`routeValues`，并且生成的传出 url 是好的。

所以，问题出在 route1 上。我错过了什么？

**编辑**

来自*Sanderson S. Freeman A. - Pro ASP.NET MVC 3 Framework 第三版*：

> 路由系统按照路由添加到传递给 RegisterRoutes 方法的 RouteCollection 对象的顺序处理路由。检查每条路由是否匹配，这需要满足三个条件：
> 
> 1.  URL 模式中定义的每个段变量都必须有一个值。为了找到每个段变量的值，路由系统首先查看**我们提供的值（使用匿名类型的属性），然后是当前请求的变量值，最后是路由中定义的默认值。**
> 2.  我们为段变量提供的值都不能与路由中定义的仅默认变量不一致。*我在这些路线中没有默认值*
> 3.  所有段变量的值必须满足路径约束。*我在这些路线上没有限制*

因此，根据我在匿名类型中指定值的第一条规则，我没有默认值。**当前请求的变量值**- 我想这是来自请求上下文的值。

这些对 route2 的推理有什么问题，而它们对 route1 很有效？

**编辑**

实际上，一切都不是从单元测试开始的，而是从一个真正的 mvc 应用程序开始的。在那里，我使用[UrlHelper.Action Method (String, Object)](http://msdn.microsoft.com/en-us/library/dd460294%28v=vs.108%29.aspx)来生成传出 url。由于此方法用于布局视图（大多数视图的父视图），我已将其纳入我的扩展辅助方法（从视图中排除额外逻辑），此扩展方法从请求中提取操作名称上下文，作为参数传递给它。我知道我可以通过请求上下文提取所有当前路由值并替换那些*年份*和*月份*（或者我可以创建一个匿名路由值集合，包含上下文中的所有值），但我认为这是多余的，因为 mvc 会自动考虑请求上下文中包含的值。所以，我只提取了动作名称，因为没有动作名称就没有 UrlHelper.Action 重载（或者我什至也希望“不指定”动作名称），并通过匿名路由值对象添加新的月份和年份。

这是一种扩展方法：

```
public static MvcHtmlString GetPeriodLink(this HtmlHelper html, 
                                          RequestContext context, 
                                          DateTime date)
{
    UrlHelper urlHelper = new UrlHelper(context);
    return MvcHtmlString.Create(
              urlHelper.Action(
                 (string)context.RouteData.Values["action"], 
                 new { year = date.Year, month = date.Month }));
} 
```

正如我在上面的测试中所描述的，它适用于较短的路由（当请求上下文仅包含控制器、年份和月份以及操作时），但对于较长的路由则失败（当请求上下文包含控制器、年份和月份、操作和用户时） ）。

* * *

我已经发布了一个解决方法，用于使路由按我需要的方式工作。

*虽然我确实很想知道，但究竟为什么我必须在这种情况下做出任何解决方法，以及这两条路线之间阻止`route1`工作方式的关键区别是什么`route2`。*

* * *

**编辑**

另一个说法。至于请求上下文中的值是 type `string`，我决定尝试将它们作为字符串设置到上下文中，以确保没有类型混淆（int vs string）。我不明白，这方面发生了什么变化，但一些路线开始正确生成。但并非全部......这更没有意义。我在一个真实的应用程序中改变了这一点，而不是测试，因为测试`int`在上下文中，而不是字符串。

*好吧，我已经找到了使用route1*的条件——它仅在上下文中的`month`和的值`year`等于匿名对象中给定的值时使用。如果它们不同（在测试中对于`int`和都是如此`string`），则使用*route2*。但为什么？

这证实了我在实际应用程序中的内容：

1.  我`string`在上下文中有 s ，但是`int`通过匿名对象提供了 s ，它以某种方式混淆了 mvc 并且它不能使用`route1`.
2.  我`int`将匿名对象中的 s 更改为`string`s，并且上下文中的 url`month`与`year`匿名对象中的相同，开始正确生成；而所有其他人都没有。

所以，我看到了一条规则：匿名对象的属性应该是`string`与请求上下文中路由值的类型相匹配的类型。

但是这条规则似乎**不是强制性**的，就像在*Test3*中一样，我改变了类型（你现在可能在上面看到了），它仍然可以正常工作。MVC 设法正确地转换类型。

* * *

最后我找到了所有这些行为的解释。请看下面我的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T04:31:35.260

这是我用来让它工作的快速解决方法：

```
public static MvcHtmlString GetPeriodLink(this HtmlHelper html, 
                                          RequestContext context, 
                                          DateTime date)
{
    UrlHelper urlHelper = new UrlHelper(context);

    context.RouteData.Values["month"] = date.Month;
    context.RouteData.Values["year"] = date.Year;

    return MvcHtmlString.Create(
              urlHelper.Action(
                 (string)context.RouteData.Values["action"]));
} 
```

~~`month`我只是`year`从`context.RouteData.Values`.~~ 我只是替换了请求上下文中的`month`and`year`条目。如果从上下文中删除它们（就像我一开始所做的那样），它们对于在此之后调用的助手方法将不可用。

这种方法使我的扩展方法适用于*测试 1*中描述的场景（请参阅问题）。

* * *

**最后**

仔细重读**Sanderson S., Freeman A. - Pro ASP.NET MVC 3 Framework (3rd edition)**我至少找到了所有这些东西的解释：

*第 2 部分 ASP.NET MVC 详解*

*第 11 章 URL、路由和区域*

*生成传出 URL*

在部分**了解段变量重用**：

> 路由系统将仅重用在 URL 模式中出现早于提供给 Html.ActionLink 方法的任何参数的段变量的值。

只要我的`month-year`段在之后得到满足，并且我确实为and`controller`指定了值，所有尾随段 ( , ) 都不会被重用。至于我没有在我的匿名对象中指定它们，它们似乎对路由不可用。所以，route1 无法匹配。`month``year``action``user`

书中甚至有一个警告：

> 处理这种行为的最好方法是防止它发生。我们强烈建议您不要依赖此行为，而是为 URL 模式中的所有段变量提供值。依赖这种行为不仅会使您的代码更难阅读，而且您最终会对用户发出请求的顺序做出假设，这最终会在您的应用程序进入维护阶段时对您产生影响。

好吧，它咬了我）））

值得失去 100 个代表来记住（我什至会在这里再次重复）规则：**路由系统将仅重用在 URL 模式中出现早于提供的任何参数的段变量的值。**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-31T12:01:24.523

一条为用户默认的路由就足够了吗？那是

```
routes.MapRoute(
    "route1",
    "{controller}/{month}-{year}/{action}/{user}",
    new { user = "" }
); 
```

否则，您将不得不允许对用户路由更具体的内容，以便在创建 url 时它不会首先匹配 route2。

更新：我建议离开您的助手并直接使用 Url.Action，以下是针对上述场景的两个测试：

```
 [TestFixture]
    public class RouteRegistrarBespokeTests
    {
        private UrlHelper _urlHelper;

        [SetUp]
        public void SetUp()
        {
            var routes = new RouteCollection();
            routes.Clear();
            var routeData = new RouteData();
            RegisterRoutesTo(routes);
            var requestContext = new RequestContext(HttpMocks.HttpContext(), 
                                           routeData);
            _urlHelper = new UrlHelper(requestContext, routes);
        }

        [Test]
        public void Should_be_able_to_map_sample_without_user()
        {
            var now = DateTime.Now;
            var result = _urlHelper.Action("Index", "Sample", 
                               new {  year = now.Year, month = now.Month });
            Assert.AreEqual(string.Format("/Sample/{0}-{1}/Index", 
                                      now.Month, now.Year ), result);
        }

        [Test]
        public void Should_be_able_to_map_sample_with_user()
        {
            var now = DateTime.Now;
            var result = _urlHelper.Action("Index", "Sample", 
                          new { user = "user1", year = now.Year, 
                                month = now.Month });
            Assert.AreEqual(string.Format("/Sample/{0}-{1}/Index/{2}", 
                                     now.Month, now.Year, "user1"), result);
        }

private static void RegisterRoutesTo(RouteCollection routes)
{
    routes.MapRoute("route1", "{controller}/{month}-{year}/{action}/{user}");
    routes.MapRoute("route2", "{controller}/{month}-{year}/{action}");
}

} 
```

# javascript - 使用 CSS3 和 Javascript 创建像寺庙运行动画一样的硬币动画

> ID：13081887
> 
> 赞同：5
> 
> 时间：2012-10-26T06:29:54.797
> 
> 标签：javascript, jquery, html, css

我正在尝试使用 css3 和 javascript 创建像寺庙运行中的动画一样的硬币动画我尝试使用 css3 中的过渡来复制动画，但我无法实现相同的效果

他们的任何例子在网络上有相同的动画吗？或者任何人都可以帮助我实现动画。

**更新**：

单击按钮时，我希望一些硬币从按钮中出现并收集到篮子中（按钮可以位于页面中的任何位置，篮子固定在底部）

使用 css3 转换和 jquery 实现

html

```
 <button id="btn1">button1</button>

   <div id="1" class="coin"></div>
   <div id="2" class="coin"></div> 
   <div id="3" class="coin"></div> 
   <div id="4" class="coin"></div> 
   <div id="basket"></div>
</div>​ 
```

CSS

```
.coinanim{
    top:420px;
    left: 430px;
    width:50px;
    height:50px;
    transition: all 2s ease-in-out; 
    -webkit-transition: all 2s ease-in-out; 
    transition-delay: .36s;   
   -webkit-transition-delay: .36s;  
 } 
```

jQuery

```
 $('#btn1').click(function(){
     $('.coin').css('opacity',1);
     $('#1').addClass('coinanim1');
     $('#2').addClass('coinanim2');
     $('#3').addClass('coinanim3');
     $('#4').addClass('coinanim4');
   }); 

 $('.coin').on('webkitTransitionEnd',function(){

      $('.coin').css('opacity',0);
      $('.coin').attr('class','coin');
  }); 
```

演示：http: [//jsfiddle.net/dA42n/23/](http://jsfiddle.net/dA42n/23/)

![在此处输入图像描述](../Images/410b0bb395a25fbedf3c20cbb250fa1d.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T10:33:58.753

为什么不简单地使用 JQuery 动画？[http://jsfiddle.net/KeeB2/2/](http://jsfiddle.net/KeeB2/2/)

```
$cart = $(".cart");
$("button").on("click", function(){
    $btn = $(this);
    var $coin = $('<div class="coin">')
        .insertAfter($btn)
        .css({
            "left": $btn.offset().left,
            "top": $btn.offset().top
        })
        .animate({
            "top": $cart.offset().top,
            "left": $cart.offset().left
        }, 800, function() {
            $coin.remove();
        });
});​ 
```

使用此方法，您还可以使用 CSS 动画来增强硬币在飞向篮筐时的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T06:57:24.483

我认为你应该使用一些库，尤其是像 Box2D 这样的 JavaScript 物理库，它可以让你制作这种基于重力的动画。

还有其他方法，例如创建自己的函数，该函数使用一些计算将精灵（硬币）从位置 a 带到 b，使其看起来像使用弯曲路径飞行。

但是 Box2D 已经足够成熟，并且在基于物理的效果方面看起来很棒。

Box 2d 示例：[http ://box2d-js.sourceforge.net/index2.html](http://box2d-js.sourceforge.net/index2.html)

# linux - 为什么“df”和“du”在 LVM 卷上显示不同的已用空间值？

> ID：13081888
> 
> 赞同：-1
> 
> 时间：2012-10-26T06:29:56.143
> 
> 标签：linux, lvm

```
[root@local ~]# df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/mapper/VolGroup00-LogVol00
                      524G  465G   32G  94% /
/dev/sda1              99M   13M   82M  14% /boot
tmpfs                  18G     0   18G   0% /dev/shm
[root@local ~]# du -hs /
57G / 
```

为什么显示不一样，但我没有使用那么多空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T06:01:03.610

您可能删除了仍在写入的文件。虽然它不会被 du 拾取（它只查看仍然“存在”的文件），但 df 会注意到缺少的可用空间。尝试 lsof | grep deleted

# internet-explorer-8 - IE8 不支持谷歌图表（饼图）

> ID：13081894
> 
> 赞同：2
> 
> 时间：2012-10-26T06:30:49.130
> 
> 标签：internet-explorer-8, pie-chart, google-visualization

IE8 不呈现谷歌图表（饼图）。

它给了我一个错误说： SCRIPT5: Type mismatch: jsapi, line 20 character 89

我已经尝试在网上寻找解决方案，尝试了所有方法，但没有用。

我正在使用 IE Developer 工具调试我的应用程序，设置如下：

1.  浏览器模式：IE8
2.  文档模式：IE标准。

任何建议都会有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:24:02.320

这似乎是 IE9+ 中的模拟器（和谷歌图表）的问题，我现在正试图让一个独立的 IE8 在 VM 中运行以尝试它，但我在这里看到报告**说它在你实际使用 IE8 时有效**.

# size - 如何找出一个字符串在php中可以容纳的最大字符数？

> ID：13081895
> 
> 赞同：0
> 
> 时间：2012-10-26T06:30:56.607
> 
> 标签：size, byte

在 php m 中使用代码读取 csv 文件并将其存储到用逗号分隔的字符串中......现在我的字符串是这样的：

$string= '9878546512','9785456213','9632587412','9753159821','9467521234','9638527412'..等等在未来我可能有很多这样的数字在 $string 可能是从复制的 1000 个电话号码csv 文件到 $string...

现在我的问题是php中字符串变量的最大大小是多少，这样我就可以限制读入$string变量的字符数...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:41:22.070

单个字符串变量本身没有架构限制。您可以吞入整个文件的内容，例如使用 file_get_contents()

但是，PHP 脚本在给定脚本执行中可以为所有变量分配的总内存有限制，因此这也有效地限制了单个字符串变量的长度。

这个限制是 php.ini 配置文件中的 memory_limit 指令。内存限制在 PHP 5.2 中默认为 128MB，在早期版本中默认为 8MB。

# mysql - MySQL 四舍五入到最接近的 5 美分

> ID：13081897
> 
> 赞同：0
> 
> 时间：2012-10-26T06:31:09.650
> 
> 标签：mysql

我需要使用 MySQL 将值四舍五入到 5 美分 (0.05) 的增量。它必须总是四舍五入。例子：

0.01 -> 0.05

2.12 -> 2.15

0.16 -> 0.20

我怎样才能做到这一点。我用 ceil() 和 round() 尝试了一些东西，但似乎我可以从 MySQL 专家那里获得一些帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-09-20T18:52:14.683

由于 100/5 = 20，我们所做的就是乘以 20，四舍五入到最接近的整数，然后除以 20。

（在 MySQL 中使用 CEIL 进行四舍五入）

1.03 美元的示例：

```
1.03 * 20   = 20.60
CEIL(20.60) = 21.0000
21 / 20     = 1.0500 
```

注意：我还将整个语句四舍五入到小数点后 2 位，只是为了删除任何尾随零。

```
SELECT ROUND( CEIL( (old_price) * 20) / 20, 2) FROM table 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T06:39:01.677

尝试使用这个 -

```
SELECT (<value> DIV 0.05) * 0.05 + IF(<value> MOD 0.05 = 0, 0, 0.05) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-26T18:14:00.247

```
SELECT floor((<value> + 0.025) * 20) / 20 
```

# python - 从矩阵中的列和行打印数据

> ID：13081905
> 
> 赞同：0
> 
> 时间：2012-10-26T06:31:59.770
> 
> 标签：python

假设我有一个这样的矩阵

```
table =  [
# grid: 4 by 9
['A','B','C','D'],
['E','F','G','H'],
['I','J','K','L'],
['M','N','O','P'],
['Q','R','S','T'],
['U','V','W','X'],
['Y','Z','1','2'],
['3','4','5','5'],
['7','8','9','0'],
] 
```

如果我想在第三列（2x，3y）上打印两个向下的字符串，导致 G. 或类似的东西。我如何告诉 python 它应该是一个网格？以及如何返回列表信息，table.find(something) 不起作用（说 table 没有 find 属性）我对 python 相当陌生。我已经搜索了互联网，没有太多帮助..

编辑：我一定做错了什么？

```
table =  [
# grid: 4 by 9
# 1   2   3   4  
['A','B','C','D'],#1
['E','F','G','H'],#2
['I','J','K','L'],#3
['M','N','O','P'],#4
['Q','R','S','T'],#5
['U','V','W','X'],#6
['Y','Z','1','2'],#7
['3','4','5','5'],#8
['7','8','9','0'],#9
]
print table[1][2], table[4][3] 
```

打印 O 和 T。O 是对的，但 T 不是，那是第 5 行不是吗？

我正在尝试使用文本矩阵编写文本位置加密算法，例如著名的密码之一（我不记得它的名称）。

我想将每个字母的所述打印应用于 raw_input 捕获的文本，我以前使用过字典，但如果可能的话，我想尝试这种行/列方法，它会更难破解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T06:33:38.900

`table[1][2]`将给出第二行第三列中的值（因为索引从 0 开始）。

更具体地说，您指定的是*list 的列表*，因此`table[1]`将解析为`['E','F','G','H']`（整个列表中的第二项），然后将其中的第三个元素`[2]`与`'G'`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T06:41:36.173

```
table =  [
['A','B','C','D'],
['E','F','G','H'],
['I','J','K','L'],
['M','N','O','P'],
['Q','R','S','T'],
['U','V','W','X'],
['Y','Z','1','2'],
['3','4','5','5'],
['7','8','9','0'],
]
# grid 4 by 9, 4 column, 9 row
rownum=3
colnum=2
print(table[rownum-1][colnum-1]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T06:52:14.213

列表索引从零开始，例如，列表中的第四个元素的索引为 3。您可以定义一个辅助函数来通过它们的“实际位置”获取项目/列。

```
def column(matrix, i):
    return [row[i-1] for row in matrix]
column(table,2)

Out[15]:
['B', 'F', 'J', 'N', 'R', 'V', 'Z', '4', '8']

def getitem(matrix,row,column):
    return matrix[row-1][column-1]
getitem(table,2,3)

Out[16]:
'G' 
```

至于您的编辑，`table[1][2]`应该 print `G`，而不是`O`正确`table[4][3]`返回`T`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T08:31:33.643

您指的是[http://en.wikipedia.org/wiki/Vigenere_cipher](http://en.wikipedia.org/wiki/Vigenere_cipher)吗？

如果你想使用矩阵，那么`numpy`推荐（一个简单的例子）：

```
>>> import numpy as np
>>> a = np.array(table)
>>> a
array([['A', 'B', 'C', 'D'],
       ['E', 'F', 'G', 'H'],
       ['I', 'J', 'K', 'L'],
       ['M', 'N', 'O', 'P'],
       ['Q', 'R', 'S', 'T'],
       ['U', 'V', 'W', 'X'],
       ['Y', 'Z', '1', '2'],
       ['3', '4', '5', '5'],
       ['7', '8', '9', '0']], 
      dtype='|S1')
>>> print a[1,2]
G
>>> np.where(a=='G')
(array([1]), array([2])) 
```

还有一个经常被忽略的字符串方法可以用来替换文本（不管你决定这样做）......

```
>>> from string import maketrans
>>> trans = maketrans('AB', 'XY') # A->X, B->Y, everything else unchanged
>>> 'ABC'.translate(trans)
'XYC' 
```

# magento-1.7 - 特定客户的magento免费送货

> ID：13081909
> 
> 赞同：0
> 
> 时间：2012-10-26T06:32:20.023
> 
> 标签：magento-1.7, magento

是否有人已经看过或制作了 magento 模块，您可以在 magento 管理中为特定客户申请免费送货。我已经发现您可以对特定客户群申请免费送货，但这不是我需要的...

感谢您的所有回答和帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T06:56:49.937

[http://www.netismine.com/work/free-shipping-only-for-registered-users](http://www.netismine.com/work/free-shipping-only-for-registered-users)

这可能会为你提供路径

[http://magento-rohan.blogspot.in](http://magento-rohan.blogspot.in)

# ruby-on-rails - 无法创建记录，因为连接表需要 created_at (HABTM + Rails)

> ID：13081917
> 
> 赞同：1
> 
> 时间：2012-10-26T06:32:39.430
> 
> 标签：ruby-on-rails, sqlite, migration, schema, has-and-belongs-to-many

对此进行谷歌搜索，我看到 Rails 核心团队正在研究 Rails 4 的解决方案，但那还有很长的路要走。

两者`Users`都有`Circles`关系`has_and_belongs_to_many`。

我的架构如下所示：

```
 create_table "circles", :force => true do |t|
    t.string   "name"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  create_table "circles_users", :force => true do |t|
    t.integer  "circle_id"
    t.integer  "user_id"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  create_table "users", :force => true do |t|
    t.string   "name"
    t.string   "email"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.string   "password"
  end 
```

但是在我的代码中，`circles_controller`当我尝试这样做时：

```
 def create
    @circle = Circle.new(params[:circle])
    @circle.users << User.find(session[:user].id)
... 
```

我在浏览器中收到以下错误：

`SQLite3::ConstraintException: circles_users.created_at may not be NULL: INSERT INTO "circles_users" ("circle_id", "user_id") VALUES (11, 5)`

我应该怎么`created_at`做`updated_at`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T02:14:54.297

我最终通过从用于创建连接表的迁移中删除时间戳来使其工作。

正确的架构应该是这样的：

```
create_table "circles_users", :force => true do |t|
t.integer  "circle_id"
t.integer  "user_id"
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T07:03:40.897

尝试这个

```
def new
 @circle = Circle.new
 1.times { @circle.users.build } if @circle.users.nil?
end

def create
  @circle = Circle.new(params[:circle])
  @circle.update_attributes(session[:user]) # this will automatically update location table by using relationship
  @circle.save   
end 
```

见[HABTM](http://apidock.com/rails/ActiveRecord/Associations/ClassMethods/has_and_belongs_to_many)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T04:21:18.447

试试这个

```
def create
  @circle = Circle.new(params[:circle])
  @circle.users = [User.find(session[:user].id)] 
```

可能不行，我没有在本地尝试过，sry abt ^_^

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-27T04:11:23.300

在这些日期时间字段中，您应该插入当前时间戳，或者如果您没有用数据填充它们，则将它们更改为可为空的字段。

# eclipse - 如何在不“合并”文件的情况下切换到 svn 中的另一个修订版

> ID：13081919
> 
> 赞同：0
> 
> 时间：2012-10-26T06:32:45.530
> 
> 标签：eclipse, svn

当我切换到另一个修订号命令时，`svn`会在文件中进行奇怪的更改（“ `<<<<<<< .mine`”东西）

例如在以下情况下`xml`：

```
<<<<<<< .mine
    <TEST>hi</TEST>
    <blah>sss</blah>
=======
>>>>>>> .r14827
    <TEST2>yo</TEST2> 
```

如何通过覆盖现有文件切换到另一个修订版？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T08:01:57.103

`svn up` **只有在****未提交的本地更改**的情况下才会合并。合并*冲突*意味着您的更改无法自动与更新更改合并，需要人工干预

> 如何通过覆盖现有文件切换到另一个修订版？

在更改 WC 的内容（更新时发生）之前提交更改

# java - 创建可执行的 jar 文件

> ID：13081920
> 
> 赞同：2
> 
> 时间：2012-10-26T06:32:51.833
> 
> 标签：java

我已经提取了一个包含 xml、java 类等的可执行 jar 文件。实际上这个可执行 jar 文件是一个具有依赖关系的库。我需要在这个库的一个类文件中修改一行代码。我已经成功编辑了类文件，现在我想将它重新打包到可执行的 jar 中。怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T06:35:27.027

只需将整个内容压缩回去，jar 只是一个 zip 文件。

1.  解压 .jar
2.  修改类
3.  将整个结构重新压缩为 .zip
4.  将其重命名为 .jar
5.  你去吧。

例如，您可以使用[ant`<jar>`](https://ant.apache.org/manual/Tasks/jar.html)任务将其自动化。

正如下面的评论所说，您可以使用`jar`JDK 安装附带的工具。 `jar -xvf your.jar`提取和`jar -cvf your.jar inputfiles`。请参阅[文档](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/jar.html)。

使 JAR 可执行的原因在于它在其结构中包含一个文件，该文件`META-INF/MANIFEST.MF`描述什么是入口点类，例如：

```
Manifest-Version: 1.0
Main-Class: foo.bar.FooBar 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T06:39:27.697

使用 jar 命令你可以做到这一点

采取命令提示符并获得所有类的根文件夹。并使用以下命令

```
 jar -cvf myjarname.jar *

* means all the files and folders in that location 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T19:26:43.850

此外，验证您是否具有可执行 jar 的文件关联。如果不这样做，您可以使用此批处理文件创建此关联：

```
@ECHO off
SETLOCAL ENABLEDELAYEDEXPANSION
:: this script creates a file association for executable .jar files
ECHO Creating .jar file association...
ECHO JAVA_HOME is %JAVA_HOME%
IF NOT DEFINED JAVA_HOME GOTO :FAIL
REG ADD "HKCR\jarfile" /ve /t REG_SZ /d "Executable Jar File" /f
REG ADD "HKCR\jarfile\shell" /ve /f
REG ADD "HKCR\jarfile\shell\open" /ve /f
ECHO REG ADD "HKCR\jarfile\shell\open\command" /ve /t REG_SZ /d "\"%JAVA_HOME%\bin\javaw.exe\" -jar \"%%1\" %%*" /f
REG ADD "HKCR\jarfile\shell\open\command" /ve /t REG_SZ /d "\"%JAVA_HOME%\bin\javaw.exe\" -jar \"%%1\" %%**" /f
REG ADD "HKLM\jarfile" /ve /t REG_SZ /d "Executable Jar File" /f
REG ADD "HKLM\SOFTWARE\Classes\jarfile\shell" /ve /f
REG ADD "HKLM\SOFTWARE\Classes\jarfile\shell\open" /ve /f
REG ADD "HKLM\SOFTWARE\Classes\jarfile\shell\open\command" /ve /t REG_SZ /d "\"%JAVA_HOME%\bin\javaw.exe\" -jar \"%%1\" %%*" /f
ECHO Finished creating .jar file association for executable .jar files.
PAUSE
GOTO EOF
:FAIL
ECHO Script failed. JAVA_HOME not defined.
PAUSE 
```

# .net - .NET 4.5 破坏应用程序

> ID：13081924
> 
> 赞同：1
> 
> 时间：2012-10-26T06:33:28.137
> 
> 标签：.net, wpf, .net-4.0, devexpress, .net-4.5

我有一个适用于 .NET 4.0 的 .NET 应用程序 - 尽管该应用程序公开了它的 app.config，但我没有它的源代码

但。

我已经安装了带有 .NET 4.5 的 Visual Studio 2012。突然，.NET 4.0 应用程序在某些地方抛出异常——我用 Reflector 分析，异常是在应用程序的 WPF 部分的 InitializeComponent() 中抛出的。

```
 Uri resourceLocator = new Uri("/Some.Assembly;someuri/someuri/somefile.xaml", UriKind.Relative); 
```

例外是：

```
The invocation of the constructor on type 'DevExpress.Xpf.Grid.GridControl' that matches the specified binding constraints threw an exception.

at System.Windows.Markup.WpfXamlLoader.Load(XamlReader xamlReader, IXamlObjectWriterFactory writerFactory, Boolean skipJournaledProperties, Object rootObject, XamlObjectWriterSettings settings, Uri baseUri)
at System.Windows.Markup.WpfXamlLoader.LoadBaml(XamlReader xamlReader, Boolean skipJournaledProperties, Object rootObject, XamlAccessLevel accessLevel, Uri baseUri)
at System.Windows.Markup.XamlReader.LoadBaml(Stream stream, ParserContext parserContext, Object parent, Boolean closeStream)
at System.Windows.Application.LoadComponent(Object component, Uri resourceLocator) 
```

不幸的是，我无法判断是否有任何内部异常。

如果我卸载 .NET 4.5 并安装 .NET 4.0，则不会引发异常，但我无法使用 VS 2012。

我试图将这些行添加到 app.config 但没有成功。

```
<startup useLegacyV2RuntimeActivationPolicy="true" >
    <supportedRuntime version="v4.0.30319" sku=".NETFramework,Version=v4.0" />
    <requiredRuntime version="v4.0.30319" />
</startup> 
```

如何强制应用仅使用 4.0 和 4.0？甚至可能吗？.NET 4.5 是否以某种方式与 4.0 程序集混合在一起？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T08:09:27.400

可能是一个错误。

*从版本 12.1.6 开始，我们的控件完全支持 Visual Studio 2012 和 .NET Framework 4.5。我们还将很快发布 11.2.13 版，其运行时与 .NET Framework 4.5 兼容。*

[http://www.devexpress.com/Support/Center/Question/Details/Q430478](http://www.devexpress.com/Support/Center/Question/Details/Q430478)

有什么方法可以将调试器附加到它并查看异常是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T11:53:49.467

.Net 有两种不同的风格。您使用的版本可能是有限的 .Net（客户端配置文件），而您尝试运行的程序需要完整版本。但根据[http://msdn.microsoft.com/en-us/library/cc656912.aspx](http://msdn.microsoft.com/en-us/library/cc656912.aspx) 4.5 仅提供完整版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T13:03:23.510

看看这篇文章。[http://www.west-wind.com/weblog/posts/2012/Mar/13/NET-45-is-an-inplace-replacement-for-NET-40](http://www.west-wind.com/weblog/posts/2012/Mar/13/NET-45-is-an-inplace-replacement-for-NET-40)。它描述了安装 .net 4.5 时实际发生的情况。您可以要求程序供应商使用最新版本的 DevExpress 控件重新编译它。

# c# - 如何在 C# windows 应用程序的一个位置写入数据库连接字符串

> ID：13081925
> 
> 赞同：0
> 
> 时间：2012-10-26T06:33:31.113
> 
> 标签：c#

我正在用 C# 编写一个数据库应用程序。我需要将 db 连接放在一个位置，并在需要时在多个 Windows 窗体中调用它。如果你能帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:51:47.067

执行此任务的常用方法是将连接字符串存储在 app.config（Web 应用程序中的 web.config）中，作为连接字符串或应用程序设置

看看：System.Configuration.ConfigurationManager 或[这篇文章](https://stackoverflow.com/questions/6536715/get-connection-string-from-app-config)

“几个窗体”-> 然而，听起来你想在不同的应用程序之间共享相同的连接字符串，可能在不同的机器上，所以你只有一个地方来修改这些数据。

然后，您将需要某种中央存储库或配置服务器来执行此任务……例如，为各种应用程序提供连接字符串的 Web 服务。

您需要为这样的配置服务器锁定网络，这样它就不会暴露给互联网上或组织内部的狡猾的人。

在应用程序加载（静态类，单例......等）之后，您需要在某处缓存每个应用程序的连接字符串，以便中央配置不会成为单点故障......如果配置服务器出现故障，您仍然会想要连接到最后一个已知的好配置。你也不想不断地查询连接字符串，因为它会很慢。

这对于您的需要可能有点过头了，它可能就像从磁盘上读取一个公共文件或将相同的 .config 部署到每个应用程序一样简单

有很多方法可以解决这个问题，选择最简单且移动部件最少的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:49:31.497

您可以使用 Windows 窗体中的应用程序设置来存储连接字符串。

有关详细信息，您可以查看此演练。

> [如何：使用设计器创建应用程序设置](http://msdn.microsoft.com/en-us/library/wabtadw6%28v=vs.80%29.aspx)

# android - 使用 Android 手机读取 RFID

> ID：13081926
> 
> 赞同：46
> 
> 时间：2012-10-26T06:33:37.290
> 
> 标签：android, nfc, android-2.2-froyo, rfid

我对使用 Android 手机（智能手机）读取 RFID 标签做了足够的研究。

我对此的理解是，支持 NFC 的智能手机 (Nexus S) 可以读取 RFID 标签，但有一些限制。

对于未启用 NFC 的 Android，我们需要一个 RFID 阅读器，我们可以使用蓝牙从 Android 与之通信。

我的问题是：

1.  我们用于从 Android 手机（启用 NFC）读取 RFID 标签的 SDK 是什么？
2.  如果我必须使用非 NFC 手机阅读，是否有提供 SDK 用于开发目的的标准阅读器？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2018-08-15T02:10:48.983

支持 NFC 的手机只能读取 NFC 和无源高频 RFID (HF-RFID)。这些必须在非常近的范围内读取，通常是几厘米。对于更长距离或任何其他类型的 RFID/有源 RFID，您必须使用外部阅读器通过移动设备处理它们。

只需在谷歌上搜索，您就可以从许多制造商那里获得一些不错的读者。所有设备类型都有很多插件。

我与 HID 阅读器打交道，这些阅读器能够近距离扫描启用 HID 的 ID 卡以及来自智能手机和智能卡的 NFC。我使用我加载解密配置文件的 SerialIO 徽章阅读器，它允许我构建的应用程序读取和使用我们的安全公司卡。它们非常适合大规模可靠的蓝牙扫描。因为它们是蓝牙，所以它们适用于 PC/Android/iOS/Linux。唯一的问题是，HID 读卡器非常昂贵，并且是为企业使用而设计的。我们每个的成本约为 400 美元，但它们再次读取 HID、智能卡、NFC 和 RFID。

如果这是个人项目，我建议只使用手机并购买一些 HF-RFID 标签。标签制造商应该有一个 SDK 供您用来连接和管理标签。您也可以使用 androids NFC 文档开始[https://developer.android.com/guide/topics/connectivity/nfc/](https://developer.android.com/guide/topics/connectivity/nfc/)。过去 8 年的大多数 android 手机都有 NFC，只有 iPhone 6 和更新的苹果手机有 NFC，但只有 iOS 11 和更新的手机可以满足您的需求。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-08T18:17:02.287

[您可以使用这样](https://www.sparkfun.com/products/10331)的 Arduino 板劫持您的 Android 音频端口。然后，您有两个选择（就我而言）：

1) 购买另一个[支持 RFID 的 Arduino Shield](https://www.sparkfun.com/products/10406)。到目前为止，我还没有看到支持 UHF 的。

2) 尝试将您的 Arduino 劫持与[USB RFID 阅读器](https://rads.stackoverflow.com/amzn/click/com/B0050MBFE8)连接并构建一些嵌入式硬件套件。

现在，我正在使用第二个选项，但使用的是 iPhone。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-07-30T02:24:37.693

首先是理解 RFID 是一个非常通用的术语。NFC 是 RFID 技术的子集。NFC 用于代理卡、信用卡、Tap and Go 支付系统。如果您的手机支持 NFC，则它们可以读取和模拟 NFC（Apple pay、Google pay 等）。NFC 距离非常短且功耗低——这就是为什么您会看到轻触即走式使用的原因。

更常见的 RFID 是您在这里和那里看到的标签。它们有多种样式、用途和频率。

HF - 高频标签是他们用来“切割”动物的东西——牛、狗、猫。读取范围约为 12 英寸，需要外部天线供电，天线越大，需要的功率越大，读取的距离越远。

UFH 标签看起来类似于 HF 标签，但读取范围为几英尺。

HF标签也有单读和多读。和睦家是独家多读。

Mutiread 意味着当阅读器处于活动状态时，您可以在 10 秒内阅读大约 1700 个标签。

但这取决于天线的大小以及您可以通过阅读器的功率。

至于关于 Android 和 RFID 的直接问题 - 最好的方法是获得一个通过蓝牙连接到您的移动设备的外部手持阅读器。蓝牙库适用于所有移动设备 - Android、Apple、Windows。从那里它只是关于如何向阅读器打开套接字以及如何解码串行信息的制造商文档的问题。

TSL 系列阅读器非常受欢迎，因为您不必像其他制造商那样处理读取字节和所有低级串行爵士乐。他们有一套很好的命令，易于使用来控制阅读器。

其他制造商是基本的，因为您打开一个串行套接字，然后读取输出，就像您在 PuTTY 等终端应用程序中看到的那样。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-08-17T16:17:09.853

我最近参与了一个读取 RFID 标签的项目。该项目使用来自 Zebra（我们使用的是[RFD8500](https://www.zebra.com/us/en/support-downloads/rfid/rfid-handhelds/rfd-8500.html)）和 TSL 等制造商的设备。

更多设备也来自摩托罗拉和其他供应商！

我们必须使用制造商提供的原生SDK api，它的工作原理是通过手机的蓝牙配对设备，从而在两个设备之间进行数据传输！编程基于订阅模式，其中扫描应由设备触发器（硬件触发器）或软触发器（来自应用程序）读取。

标签读取为我们提供了 tagId 和 RSSI，这是与 RFID 标签的距离因子！

这是示例应用程序：

我们将所有设备与我们的 Android/iOS 手机配对：

![获取设备列表](../Images/85cb217cab4c7a6d2f50247e3a01c0c6.png)

![连接](../Images/47c06fe0b9726c8ce6b3646c4becca54.png)

![连接的](../Images/f0a9a0cfef07bd3425a8506353ca613a.png)

![扫描](../Images/53bd0ab448bd0bd665e287cda710ac1f.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-01-29T20:01:41.910

您可以使用简单、低成本的 USB 端口阅读器，如本次测试，直接连接到您的 Android 设备；它有一个实用应用程序和一个可用于应用程序开发的 SDK： [https ://www.atlasrfidstore.com/sls-rfid-smartmicro-android-micro-usb-reader/](https://www.atlasrfidstore.com/sls-rfid-smartmicro-android-micro-usb-reader/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-03-04T02:09:56.930

一家名为[U Grok It](https://www.ugrokit.com)的公司提供适用于 Android 和 iOS 的 UHF RFID 阅读器选项。

如果这就是您的意思，它只是 UHF，即“非 NFC 启用的 Android”。如果您指的是没有内置 NFC 读卡器的 Android 设备的 NFC 读卡器，我深表歉意。

他们的阅读器范围可达 7 米（约 21 英尺）。它通过音频端口连接，而不是蓝牙，它的优点是可以立即、安全地配对，而且功耗更低。

他们有适用于 Android、iOS、Cordova 和 Xamarin 的免费原生 SDK，以及 Android 键盘楔。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-13T03:49:01.003

NFC-enable 能够读取 NFC 标签，如果安卓智能手机带有我们的 NFC，您必须为您的手机购买一个小型 NFC 阅读器。它是[手机的 rfid 阅读器](https://www.dorfidreader.com/rfid-readers/nfc-reader/)。

# javascript - 如何使图像放大（放大/缩小）动画

> ID：13081928
> 
> 赞同：0
> 
> 时间：2012-10-26T06:33:37.303
> 
> 标签：javascript, animation, css-animations

我有一个`div`包含多个图像的容器，如下所示：

```
<div style="width:600px;height:600px;>
    <img src="" alt="" />
    <img src="" alt="" />
    <img src="" alt="" />
    <img src="" alt="" />
    <img src="" alt="" />
    <img src="" alt="" />
</div> 
```

并且里面的图像`div`都具有相同的大小。

现在当`div`鼠标滚动时，我想替换`src`图像，在替换期间，我想做动画。（使图像放大/缩小）。

事实上，你应该已经猜到了，我想要的很像 google map 在地图上滚动时的缩放动画。

有什么建议吗？

======================================= 更新：

1）对于单个图像，我知道如何通过 js 或 css3 制作缩放动画。

但是，里面的图像在`div`内容上是连续的。就像`tile`古尔地图中的一样。

所以我必须在动画过程中保持这种连续性，例如，当图像都按 1.1 缩放时，必须重新更改它们的位置以保持其内容的连续性。

2）我必须支持ie7+

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T06:43:28.253

此代码适用于除 IE 之外的所有现代浏览器。因为，它是 css3 解决方案。

[http://www.dynamicdrive.com/style/csslibrary/item/css3_hover_image_gallery/](http://www.dynamicdrive.com/style/csslibrary/item/css3_hover_image_gallery/)

```
img {
-webkit-transform:scale(0.8); /*Webkit: Scale down image to 0.8x original size*/
-moz-transform:scale(0.8); /*Mozilla scale version*/
-o-transform:scale(0.8); /*Opera scale version*/
-webkit-transition-duration: 0.5s; /*Webkit: Animation duration*/
-moz-transition-duration: 0.5s; /*Mozilla duration version*/
-o-transition-duration: 0.5s; /*Opera duration version*/
}

img:hover {
-webkit-transform:scale(1.1); /*Webkit: Scale up image to 1.2x original size*/
-moz-transform:scale(1.1); /*Mozilla scale version*/
-o-transform:scale(1.1); /*Opera scale version*/
box-shadow:0px 0px 30px gray; /*CSS3 shadow: 30px blurred shadow all around image*/
-webkit-box-shadow:0px 0px 30px gray; /*Safari shadow version*/
-moz-box-shadow:0px 0px 30px gray; /*Mozilla shadow version*/
} 
```

# mysql - MYSQL 中的多语言数据类型

> ID：13081934
> 
> 赞同：3
> 
> 时间：2012-10-26T06:34:20.710
> 
> 标签：mysql, database, schema

谁能告诉我必须使用哪种数据类型才能使我的字段多语言？

我必须为用户提供便利，让他们可以使用多种语言的用户名。像，

中文、法语、英语、印地语、古吉拉特语、日语等

我必须将用户名存储在 MYSQL 数据库中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T06:37:51.473

将排序规则更改为 uft8_unicode_ci，以便您可以考虑多语言字符。我相信在同一主题上还有其他问题。

这是一个向您展示如何操作的链接：http: [//docs.moodle.org/23/en/Converting_your_MySQL_database_to_UTF8](http://docs.moodle.org/23/en/Converting_your_MySQL_database_to_UTF8)

# cordova - 在 Eclipse 中创建新的 Android 应用程序项目时清空 src 文件夹

> ID：13081943
> 
> 赞同：-1
> 
> 时间：2012-10-26T06:35:04.920
> 
> 标签：cordova

我非常努力地按照官方[PhoneGap/Cordova 入门页面](http://docs.phonegap.com/en/2.1.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)上的说明进行操作，但是当我尽可能按照这些步骤操作后，我发现**src 文件夹**是空的（根据示例，里面应该有文件src 文件夹）。

我记得大约 6 个月前用早期版本尝试过这个，效果很好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-16T05:54:37.513

转到以下内容：
*“帮助”->“安装新软件”*并输入 [https://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/)

选择 ADT 选项并安装它。它将更新 ADT。

即使我有同样的问题，我的问题也得到了解决！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:50:25.017

您是否像入门指南中那样创建了活动？

也许你在 eclipse 中有任何错误。你可以尝试重新安装 eclipse、eclipse-android adt 插件和 android sdk。

如果您仍有一些问题，您可以尝试手动添加活动。

# java - java.security.AccessControlException：在 GAE 中读取 XML 时访问被拒绝

> ID：13081945
> 
> 赞同：0
> 
> 时间：2012-10-26T06:35:20.097
> 
> 标签：java, google-app-engine, struts2

我正在尝试从我的 java 代码访问 XML，它说访问被拒绝是代码片段

```
try {
        // loading the xml file which will have all languages details

        final FileInputStream fXmlFile = new FileInputStream("D:/WorkSpace/GAE/GSTWebApp/war/WEB-INF/GSTTranslationstest.xml");

        if (!(fXmlFile == null))
        {System.out.print("Exists");}

    } 
```

它在 FileInputStream 中抛出异常并且堆栈跟踪是::

```
 java.security.AccessControlException: access denied (java.io.FilePermission D:\WorkSpace\GAE\GSTWebApp\war\WEB-INF\GSTTranslationstest.xml read)
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:374)
    at java.security.AccessController.checkPermission(AccessController.java:546)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
    at com.google.appengine.tools.development.DevAppServerFactory$CustomSecurityManager.checkPermission(DevAppServerFactory.java:289)
    at java.lang.SecurityManager.checkRead(SecurityManager.java:871)
    at java.io.FileInputStream.<init>(FileInputStream.java:101)
    at java.io.FileInputStream.<init>(FileInputStream.java:67)
    at com.gst.user.utils.GlobalLangTranslations.loadLanguageSettings(GlobalLangTranslations.java:27)
    at com.gst.user.action.UnsubscribeAction.unsubscribeUser(UnsubscribeAction.java:50)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:453)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:292)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:255)
    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
    at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:236)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:236)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:511)
    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:110)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:380)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
    at java.util.ArrayList.RangeCheck(ArrayList.java:547)
    at java.util.ArrayList.get(ArrayList.java:322)
    at com.gst.user.action.UnsubscribeAction.unsubscribeUser(UnsubscribeAction.java:51)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:453)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:292)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:255)
    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
    at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:236)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:236)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:511)
    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:110)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:380)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

我在正确的位置有 XML 任何帮助表示感谢提前感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:37:22.733

似乎未授予文件读取权限，请尝试检查文件的权限或是否被另一个进程阻止。

您可以检查文件是否可以在您的代码之前读取，[检查这个](http://javarevisited.blogspot.de/2012/01/how-to-file-permission-in-java-with.html)

[文档化](http://docs.oracle.com/javase/1.4.2/docs/api/java/security/AccessControlException.html)说：

> 拒绝访问的原因可能会有所不同。例如，请求的权限可能类型不正确、包含无效值或请求根据安全策略不允许的访问。在抛出异常时，应尽可能提供此类信息。

# symfony - 如何从 Symfony2-Form-Elements 获取生成的 HTML-ID-Attribute

> ID：13081946
> 
> 赞同：1
> 
> 时间：2012-10-26T06:35:22.357
> 
> 标签：symfony

我想通过 ajax (JSON) 从 Symfony2-Form 接收错误消息。现在我遇到了将 $form_element->getName() 与 HTML 中的表单元素 ID 结合起来的问题。是否有可能从 $form_element-Object 获取此 ID？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T06:54:59.637

是的，只需使用

```
$form->get('field_name')->createView()->vars['id']; 
```

为了从表单中获取视图相关数据（喜欢`id`和`class`选项），首先您必须创建它的视图。

您也可以通过其他方式执行此操作：

```
$formView = $form->createView(); // Creates view for every element of the form
$id = $formView->children['field_name']->var['id']; 
```

# amazon-ec2 - 亚马逊 AWS - 美国境内地理优化交付的最佳设置？

> ID：13081947
> 
> 赞同：1
> 
> 时间：2012-10-26T06:35:25.577
> 
> 标签：amazon-ec2, amazon-web-services, cdn, amazon-cloudfront, amazon-ami

我们运行一个繁忙的网络应用程序，大部分流量来自美国。我们的 IT 部门目前正在将我们的 Web 服务器迁移到 Amazon AWS EC2 环境，我想确保我们在地理上正确设置它......

目前，他们搭建的测试环境AMI实例位于美国西部地区（北加州）。然而，我们的流量更多地来自东部而不是西部/山区（尽管后者几乎可以忽略不计）。我们最初的托管服务器位于德克萨斯州。

1) 我认为我们需要将测试 AMI 实例移动到我们大部分流量所在的美国东部（弗吉尼亚）地区。将 AMI“移动”或“镜像”到另一个区域是否容易？理想情况下，我们的主实例位于弗吉尼亚州，我们将在加利福尼亚州“镜像”另一个实例，这将同步我们对主实例所做的任何更改。

2) 也许我们应该创建一个**CloudFront CDN 分发而不是**不同区域的多个 AMI？**或者同时使用**CloudFront CDN + 设置的两个 AMI 实例，每个海岸一个？

3) [附带问题] 似乎我们需要设置两个单独的 AMI 实例来启用 EC2 中的负载平衡功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T06:44:39.927

首先，考虑拥有某种可用的配置管理系统。有了这个，您基本上定义了一组“角色”或“食谱”，并将您的服务器或实例分配给这些角色。然后它们将自动安装，这使得更改 AWS 区域等任务非常容易。查看[此 Wiki 页面以获取概述](http://en.wikipedia.org/wiki/Comparison_of_open_source_configuration_management_software)。

虽然与发送海洋包裹相比，美国内部的延迟并没有那么大，但我建议将您的实例移动到您的主要流量区域，即美国东部。但是，我认为第一步没有必要让另一台机器在另一个区域启动并运行。我建议使用[Pingdom 之](https://www.pingdom.com/)类的服务来测量来自不同地理区域的延迟。如果您需要启动并运行另一台服务器，您仍然可以在之后添加它。

但是，我强烈建议使用 Cloudfront 或其他 CDN。由于大多数网页都有很多静态文件，例如图像、css 或 javascript 文件，因此请确保将它们快速交付给用户。使用 Cloudfront，您始终可以确保从最近的端点为它们提供服务。通过这个，您将获得显着的加速。

# iphone - 无法在 xcode 的文本字段中设置焦点？

> ID：13081950
> 
> 赞同：0
> 
> 时间：2012-10-26T06:35:37.880
> 
> 标签：iphone, xcode4, uitextfield

我是 Objective-C 的新手，并在某一点上受到打击。

我创建了一个基于视图的应用程序并将 tabbarController（拖放）放在 mainwindow.xib 上......因为它是一个 ViewBasedApplication 所以我的 ViewController 直接从 AppDelegate 启动。我在 ViewController 中有一个 UItextField ..现在当应用程序启动时我可以看到 UItextField ，TabBar 有两个标签栏项目。但是当我触摸 UItextField 并尝试输入一些字符时，我在 UITextField 上看不到光标，因此我无法输入任何字符。所以我希望 UItextField 在我触摸它时做出响应。

我该怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T07:13:38.143

应用委托文件：

```
 // Create instance of UINavigationController
    UINavigationController *myNavigationController;
    // Create initialized instance of UITabBarController
    UITabBarController *tabBarController = [[UITabBarController alloc] init];
    // Create initialized instance of NSMutableArray to hold our UINavigationControllers
    NSMutableArray *tabs = [[NSMutableArray alloc] init];

    // Create first UIViewController
    UIViewController *myFirstViewController = [[UIViewController alloc] init];
    [myFirstViewController setTitle:@"First"];
    // Initialize the UINavigationController
    myNavigationController = [[UINavigationController alloc] initWithRootViewController:myFirstViewController];
    // Add UINavigationController to you tabs
    [tabs addObject:myNavigationController];
    // Release UIViewController and UINavigationController
    [myFirstViewController release], [myNavigationController release];

    // Create second UIViewController
    UIViewController *mySecondViewController = [[UIViewController alloc] init];
    [mySecondViewController setTitle:@"Second"];
    // Initialize the UINavigationController
    myNavigationController = [[UINavigationController alloc] initWithRootViewController:mySecondViewController];
    // Add UINavigationController to you tabs
    [tabs addObject:myNavigationController];
    // Release UIViewController and UINavigationController
    [mySecondViewController release], [myNavigationController release];

    // Add the tabs to the UITabBarController
    [tabBarController setViewControllers:tabs];
    // Add the view of the UITabBarController to the window
    self.window.rootViewController = tabBarController; 
```

# [self.window makeKeyAndVisible];

ViewController.h 文件：

*   在 .h 文件中

> UITextField *textfld;

*   在 .m 文件中：

viewDidLoad 方法：

```
 textfld = [[UITextField alloc] initWithFrame:<Frame>]; 
    textfld.delegate = self; 
    [textfld becameFirstResponder]; 
```

使您的 .h 文件 textfielddelegate 使用

```
 @interface YourClassName:UIViewController <UITextFieldDelegate>. 
```

希望对你有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T07:39:26.303

尝试使用这个

```
[textfld setUserInteractionEnabled:YES]; 
```

# json - 将 Jsonobject POST 到 jax-rs 提供不受支持的媒体类型

> ID：13081954
> 
> 赞同：3
> 
> 时间：2012-10-26T06:35:51.827
> 
> 标签：json, jakarta-ee, post, jax-rs

我可以将 JSON 作为字符串发布到我的服务中，但是当我将 POST 内容更改为`JSONObject`类型时会遇到问题：

服务器端代码：

```
@POST
@Path("/post") 
@Consumes(MediaType.APPLICATION_JSON)
public Response setJson(JSONObject p){
    JSONObject obj = p;
    String x = obj.toString();;
    System.out.println(x);
    run(x);
    return Response.status(201).entity(x).build();
} 
```

卷曲命令：

```
curl -X POST -H "Content-Type: application/json" -d '{"follow_request_sent": false,"default_profile": false, "following": false}' http://localhost:8080/HelloWorld/webresources/helloworld/post 
```

错误：

```
The server refused this request because the request entity is in a format not supported by the requested resource for the requested method (Unsupported Media Type) 
```

Ps : 这种接受 JSONObject 的模式在 GET 上效果很好，但在 POST 上会产生问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T07:27:44.957

我建议使用带有 JAXB 注释的自定义类：

```
@XmlRootElement
public class Thing {

    private boolean follow_request_sent;
    private boolean default_profile;
    private boolean following;

    // Constructors, Getters, Setters, toString()
} 
```

然后你可以这样写你的方法：

```
@POST
@Path("/post")
@Consumes(MediaType.APPLICATION_JSON)
public Response setJson(Thing t) {
    System.out.println(t);
    return Response.status(201).entity(t).build();
} 
```

**笔记**

1.  不要使用像`/post`. 使用集合资源，例如`/things`. `POST`访问此集合资源将创建一个新的`Thing`.
2.  添加`location(URI)`到`Response`. 这`URI`应该是新创建的`Thing`:的 URI `/things/23`。

# jquery - 可缩放 div 中的 100% 行高文本

> ID：13081956
> 
> 赞同：0
> 
> 时间：2012-10-26T06:35:57.817
> 
> 标签：jquery, html, responsive-design, css

我需要在 div 内创建一个随浏览器窗口缩放的菜单。文本大小根据窗口大小进行调整（使用 fittext.js），外部 DIV 始终为窗口高度的 15%。由于 100% 行高不起作用，还有哪些其他选项。

另外，当我在这里时，可以做些什么来使文本链接跨越包含 DIV 宽度的 100%？（之间的间距相等，因此链接覆盖整个 div）

如果需要，jQuery 选项很好。

[这是我用我的代码示例制作的小提琴](http://jsfiddle.net/brettlewis/CTAAA/)

HTML 源代码

```
<nav id="navigation">
<a href="#welcome" class="nav_button"><span>Welcome</span></a>
<a href="#about" class="nav_button"><span>About</span></a>
<a href="#work" class="nav_button"><span>Work</span></a>
<a href="#contact" class="nav_button"><span>Contact</span></a>    
</nav>​ 
```

CSS 源码

```
#navigation {
width: 80%;
height: 15%;
position: fixed;
top: 5%;
left: 10%;
background: #ccc;
}
.nav_button {
height: 100%;
width: 20%;
position: relative;
display: inline-block;
text-align: center;
line-height: 100%;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:40:00.587

```
$btn = $('.nav_button');
$btn.css('line-height', $btn.height() + 'px'); 
```

在您的示例中工作正常:)

# iphone - 在 iPhone 应用程序中调用 web 服务时转义字符无法正确转换...？

> ID：13081957
> 
> 赞同：0
> 
> 时间：2012-10-26T06:36:01.390
> 
> 标签：iphone, json, web-services, html-escape-characters

我正在使用 JSON Web 服务来收集数据并显示在我的`UITableView`单元格中。我的问题是当我尝试调用我的网络服务时，如果数据有像`&`它给我的字符`&amp;`。当我尝试将此 JSON 数据存储在单元格中`NSDictionary`以及之后显示在`UITableView`单元格中时，它会按原样显示。

例如。如果数据`Chris & Priscilla`最初是它`Chris &amp; Priscilla`在我的单元格中检索和相同的显示。我想将其显示为`Chris & Priscilla`而不是`Chris &amp; Priscilla`.

它在浏览器中正确显示。

我找不到我错过的东西。

```
 NSError *error = nil;
NSString *strUrl = @"MY-WEBSERVICE-URL";
NSURL *url = [[NSURL alloc] initWithString:strUrl];
NSString *returnText = [NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:&error];
txt.text = returnText; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T07:57:13.807

通常 HTML 取消转义是在 NSString 中添加一个类别。有很多例子，例如：http: [//google-toolbox-for-mac.googlecode.com/svn/trunk/Foundation/GTMNSString+HTML.h](http://google-toolbox-for-mac.googlecode.com/svn/trunk/Foundation/GTMNSString+HTML.h)。
特别是，看看
(NSString *)gtm_stringByUnescapingFromHTML;

# android - 在自定义应用程序上实现地图搜索功能，如原生谷歌地图

> ID：13081960
> 
> 赞同：0
> 
> 时间：2012-10-26T06:36:19.177
> 
> 标签：android, google-maps, android-searchmanager

我需要在我的自定义地图应用程序上实现搜索功能，就像在原生谷歌地图中一样（操作栏变成搜索字段，您可以编写查询）。现在我知道如何使用[google geocoding api](http://code.google.com/apis/maps/documentation/geocoding/)以及如何从数据中检索位置。但我未能实现那个可变的操作栏。

我的应用看起来像这样：

![在此处输入图像描述](../Images/92c6fc4feeb0813cda0356c44d272e2b.png)

在我按下搜索按钮后，我希望显示这种布局：

![在此处输入图像描述](../Images/f28c879c55440a51ad4c374d935c9f69.png)

感谢您的帮助，希望您能解决我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T06:56:03.630

这是您的搜索工具的一些代码。这段代码对我有用。如果您输入位置名称，这会将您在地图上重定向到完全匹配的位置。下面的代码提供了两种搜索方式，第一种是 Name，第二种是 LatLang。

1.  按名称和位置

    ```
    public void searchPlace()
    {       

        AlertDialog.Builder alert = new AlertDialog.Builder(this);

        alert.setTitle("Search Location");
        alert.setMessage("Enter Location Name: ");

        // Set an EditText view to get user input 
        final EditText input = new EditText(this);
        alert.setView(input);

        alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
          String value = input.getText().toString();
          // Do something with value!
          Log.d("value", value);

          Geocoder geoCoder = new Geocoder(getBaseContext(), Locale.getDefault());    
            try {
                List<Address> addresses = geoCoder.getFromLocationName(
                    value, 5);
                String add = "";
                if (addresses.size() > 0) {
                    p = new GeoPoint(
                            (int) (addresses.get(0).getLatitude() * 1E6), 
                            (int) (addresses.get(0).getLongitude() * 1E6));
                    mc.animateTo(p);    // create mapController object like `MapController mc = mapView.getController();`
                    mapView.invalidate();
                }    
            } catch (IOException e) {
                e.printStackTrace();
            }

          }
        });

        alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
          public void onClick(DialogInterface dialog, int whichButton) {
            // Canceled.
          }
        });

        alert.show();

    } 
    ```

2.  通过拉特朗。

    ```
    public void byLatLang()
    {       

        LayoutInflater factory = LayoutInflater.from(this);            
        final View textEntryView = factory.inflate(R.layout.latlong, null);

        AlertDialog.Builder alert = new AlertDialog.Builder(this);

        alert.setTitle("Search Location");
        alert.setMessage("Enter Lattitude and Longitude: ");

        alert.setView(textEntryView); 
        // Set an EditText view to get user input
        AlertDialog latLongPrompt = alert.create();

        final EditText lat = (EditText) textEntryView.findViewById(R.id.lat);
        final EditText longi = (EditText) textEntryView.findViewById(R.id.longi);

        alert.setPositiveButton("Ok", new DialogInterface.OnClickListener()   {
        public void onClick(DialogInterface dialog, int whichButton) {

            Toast.makeText(getBaseContext(), "clicked ok ", Toast.LENGTH_SHORT).show();
          Double value1 = Double.parseDouble(lat.getText().toString());
          Double value2 = Double.parseDouble(longi.getText().toString());
          // Do something with value!
                      //Log.d("value1", value1);
              //Log.d("value2", value2);

          p = new GeoPoint(
                    (int) (value1 * 1E6), 
                    (int) (value2 * 1E6));

                mc.animateTo(p);
                mc.setZoom(17); 
                mapView.invalidate();

          }
        });

        alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
          public void onClick(DialogInterface dialog, int whichButton) {
            // Canceled.
          }
        });

        alert.show();

    } 
    ```

# c# - 是否可以在 C# 中创建 System.Int32？

> ID：13081961
> 
> 赞同：7
> 
> 时间：2012-10-26T06:36:25.263
> 
> 标签：c#, clr

如果您深入了解，C# 中的值类型会被编译器/CLR 非常特殊地处理。但是 CLR 内部的类型被更特殊地对待。这就是我的意思：

```
int a = 5;
int b = 10;
int с = a + b;
a.CompareTo(b); 
```

您可以将鼠标悬停`int`在 Visual Studio 中，然后查看它实际上是`System.Int32`struct。没关系。现在您可以抓住 ILDasm 并查看它是什么`System.Int32`：转过身来，它是一个非常简单的结构，具有一个类型字段`int32`（这是`int32`CLR 内部的），并且没有用于加法的重载运算符。

那么，这是如何`int с = a + b`工作的呢？我再次抓住 ILDasm 并查看 IL。事实证明，`System.Int32`IL 代码中没有：编译器自动理解它应该将其替换为`int32`. 并且有 IL 指令`add`适用于`int32`堆栈上的几个。更让我开心的是，CLR 允许调用`System.Int32`on的实例方法`int32`。对我来说，这就像一些黑魔法。

所以，这里有一个纯粹的理论问题：似乎它`System.Int32`和其他类型一样，它可以在 C# 中以某种方式创建吗？如果可以的话，你能用它做任何有用的事情吗（实际`int32`字段是私有的）？

**编辑：**好的，为了更清楚一点：这个问题与`int`别名无关`System.Int32`。可以采用提供的示例，替换`int`为`System.Int32`并跳过示例后的第一段。真正的问题是关于`valuetype [mscorlib]System.Int32 a`在您的 IL 代码中包含而不是仅包含`int32 a`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T08:45:52.303

因此，请考虑以下代码：

```
 static void Main(string[] args)
    {
        int x = 5;
        Print(x);
        Console.ReadLine();
    }

    static void Print(object x)
    {
        int y = (int)x;
        Console.WriteLine(y);
    } 
```

在 ILDasm 中：

```
.method private hidebysig static void  Main(string[] args) cil managed
{
  .entrypoint
  .maxstack  1
  .locals init ([0] int32 x)
  IL_0000:  nop
  IL_0001:  ldc.i4.5
  IL_0002:  stloc.0
  IL_0003:  ldloc.0
  IL_0004:  box        [mscorlib]System.Int32
  IL_0009:  call       void Test.Program::Print(object)
  IL_000e:  nop
  IL_000f:  call       string [mscorlib]System.Console::ReadLine()
  IL_0014:  pop
  IL_0015:  ret
} // end of method Program::Main

.method private hidebysig static void  Print(object x) cil managed
{
  .maxstack  1
  .locals init ([0] int32 y)
  IL_0000:  nop
  IL_0001:  ldarg.0
  IL_0002:  unbox.any  [mscorlib]System.Int32
  IL_0007:  stloc.0
  IL_0008:  ldloc.0
  IL_0009:  call       void [mscorlib]System.Console::WriteLine(int32)
  IL_000e:  nop
  IL_000f:  ret
} // end of method Program::Print 
```

`[mscorlib]System.Int32`仅用于装箱/拆箱。当变量在堆栈中时，它总是`int32`.

* * *

从[Int32 和 int](http://osdir.com/ml/windows.devel.dotnet.clr/2003-10/msg00453.html)：

将 System.Int32 视为 int32 的影子类型可能会有所帮助。

以下 C# 代码：

```
int x = 0;
x.ToString(); 
```

这是在 IL 中：

```
ldc.i4.0
stloc.0
ldloca.s 0
call instance class System.String [mscorlib]System.Int32::ToString()
pop 
```

请注意它是如何将 int32 传递给看似不兼容的 System.Int32 结构的。引擎允许这样做，因为它已经硬连线将 System.Int32 识别为 int32 的影子类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T07:07:38.710

`int32`与`int`(== `System.Int32`)

从[了解 .NET 原始类型](http://weblogs.asp.net/dixin/archive/2007/12/20/understanding-net-primitive-types.aspx)：

> int32 是 CLR 原语。然后在 FCL 中，它由 System.Int32 结构体表示。System.Int32 的整数值被持久化在它的 m_value 字段中，并且在 System.Int32 上定义了很多与整数相关的方法。
> 
> 在 C# 中，int 只是 System.Int32 的别名，由 C# 编译器支持。所以 int 和 System.Int32 之间没有依赖关系

来自[IL“CLR 的语言”](http://www.c-sharpcorner.com/UploadFile/nrsurapaneni/ILtheLangOfCLRbyNRS12222005040956AM/ILtheLangOfCLRbyNRS.aspx)：

> 无论使用什么语言开发应用程序，.NET 下的所有编译器都会生成中间语言。事实上，CLR 不会知道用于开发应用程序的语言。所有语言编译器都会生成一种统一的通用语言，称为中间语言。

因此，在 C#`System.Int32`中，我们拥有 IL `int32`。我不知道直接从 C# 代码中使用 IL 的方法，实际上也没有任何理由。

有一个：[在 C#/VB.Net 中允许内联 IL 的工具](http://blogs.msdn.com/b/jmstall/archive/2005/02/21/377806.aspx)

* * *

至于`int`vs `System.Int32`：

关于 SO：[C#、int 或 Int32 的 int 和 System.Int32 的帖子？我应该关心吗？](https://stackoverflow.com/questions/62503/c-int-or-int32-should-i-care)

在 MSDN 中：

1.  [Int32 结构](http://msdn.microsoft.com/en-us/library/system.int32.aspx)
2.  [int（C# 参考）](http://msdn.microsoft.com/en-us/library/5kzh1b5w%28v=vs.80%29.aspx)

全部都是一样：

```
Int32 i = new Int32();
Int32 j = 5;
int x1 = 2;
Int32 x2 = x1; 
```

`int`可以说是*语法糖*...实际上是 System.Int32

除了看看 C# 语言规范 4.1.4 简单类型：

> C# 提供了一组预定义的结构类型，称为简单类型。简单类型通过保留字标识，但这些保留字只是 System 命名空间中预定义结构类型的别名，如表中所述

在哪里

1.  短 => System.Int16
2.  int => System.Int32
3.  长 => System.Int64

等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T06:58:26.797

CLR 有一组原始类型，它们由 CorElementType 枚举定义。 [http://msdn.microsoft.com/en-us/library/ms232600.aspx](http://msdn.microsoft.com/en-us/library/ms232600.aspx)

add、sub、div、rem 等操作码对这些类型进行操作。JIT 会将这些转换成一些快速的汇编代码。你不能定义新的。如果您有兴趣，可以查看它使用 SOS 生成的代码。

如果您想模拟语言体验，您可以在您的类型中使用运算符重载。 [http://msdn.microsoft.com/en-us/library/8edha89s.aspx](http://msdn.microsoft.com/en-us/library/8edha89s.aspx)

# objective-c - 在本地启动屏幕之后立即自定义启动屏幕，例如在Skype中

> ID：13081970
> 
> 赞同：0
> 
> 时间：2012-10-26T06:37:02.327
> 
> 标签：objective-c, uiview, uiviewcontroller

如何以正确的方式显示自定义启动画面（我应该何时、何地以及如何添加我的自定义启动画面）并带有一些动画，就像在 Skype 应用程序中一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:50:13.597

您在启动时显示它，当调用 application:didFinishLaunchingWithOptions: 时。这意味着你的应用程序已经加载了所有的二进制内容，你可以在这里为你的 splashScreen 显示一个特殊的 viewController。

# objective-c - 如何制作像 Podcast 应用一样的过渡效果？

> ID：13081977
> 
> 赞同：2
> 
> 时间：2012-10-26T06:37:47.213
> 
> 标签：objective-c, ios

我知道有 4 种过渡效果：水平、垂直、翻转、曲线。

但是，我想要的是 Podcast 应用程序中使用的过渡效果。它与翻转效果相似，但略有不同。如下图所示，它看起来有体积；所以更加壮观。

![](../Images/215fd007410febf7556002e59d4b53bb.png)

如何制作这样的过渡效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T07:29:55.930

动画可能是用三个独立的视图完成的——传出、侧面和传入。可以设置每个视图层的锚点，使它们都围绕相同的中心垂直轴旋转，该中心垂直轴是插入屏幕的一侧宽度的一半。侧视图最初旋转到 M_PI_2，后视图旋转到 M_PI。

然后可以通过 M_PI 旋转所有三层。这将给出一个旋转的实体对象的外观。应该调整主视图的子层变换，以便为旋转提供一些视角。这涉及将 .m34 值设置为一个较小的数字，网络上有很多这样的例子。

**所有角度都以弧度表示，有些可能需要为负数，这只是对原理的解释*

# android - OnItemClickListener 未在自定义 ListView 上触发

> ID：13081982
> 
> 赞同：-1
> 
> 时间：2012-10-26T06:37:58.487
> 
> 标签：android, listview, adapter, onitemclicklistener, onitemclick

我在 ListView 上遇到 OnItemClickListener 问题，未触发 OnItemClick 覆盖方法...这是我的代码：

```
public void popupCatCategories(){
    LayoutInflater layoutInflater = (LayoutInflater)getBaseContext().getSystemService(LAYOUT_INFLATER_SERVICE);  
    View popupCatCategoriesView = layoutInflater.inflate(R.layout.popup_cats_categories, null);  
    final PopupWindow popupWindow = new PopupWindow(popupCatCategoriesView, LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

    Button btnDismiss = (Button) popupCatCategoriesView.findViewById(R.id.dismiss);

    btnDismiss.setOnClickListener(new Button.OnClickListener(){
        public void onClick(View v) {
            // TODO Auto-generated method stub
            popupWindow.dismiss();
        }
    });

    // listview to display image and text
    ListView listCatCategories = (ListView) popupCatCategoriesView.findViewById(R.id.listCatCategories);

    List<HashMap<String, String>> listCategories = new ArrayList<HashMap<String, String>>();
    db.open();
    Cursor catCategories = db.getAllCatCategoryList();
    if (catCategories.moveToFirst())
    {
        do {                
            HashMap<String, String> hm = new HashMap<String, String>();
            hm.put("catCategoryThumbnail", Integer.toString(catCategories.getInt(1)));
            hm.put("catName", catCategories.getString(0));
            listCategories.add(hm);
        } while (catCategories.moveToNext());
    }
    db.close();

    listCatCategories.setAdapter(new ItemListBaseAdapter(getApplicationContext(), listCategories));

    Log.i("got it?", "wait for it...");
    listCatCategories.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> a, View view, int position, long id) {
            Log.i("got it?", "yea, got it!");
            Toast.makeText(getBaseContext(), "got it", Toast.LENGTH_SHORT).show();
        }
    });

    popupWindow.showAsDropDown(btnCats, 50, -330);
} 
```

我只是在 HashMap 的 ArrayList 中添加一些值，每个 HashMap 包含 2 个 String 变量，它们显示在 ListView 的每一行中。对于ListView的自定义xml布局，RelativeLayout里面只有一个ImageView和一个TextView。它显示得很好，除了然后我点击一行，没有任何反应，它不会触发日志或任何东西。重写方法 onItemClick 根本没有被触发。

我已经尝试在 ListView 上设置 Clickable(true) 或 setItemsCanFocus(false)，或者在 ImageView 和 TextView 上设置 setFocusable(false) 和 setFocusableInTouchMode(false)（即使它适用于复选框和按钮，对吗？）。

这是 ListView 的自定义 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/catCategoryThumbnail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingBottom="10dp"
        android:paddingRight="10dp"
        android:paddingTop="10dp" />

    <TextView
        android:id="@+id/txtCatCategoryName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="15dp"
        android:focusable="false"
        android:focusableInTouchMode="false" />

</RelativeLayout> 
```

无论如何，我不知道该怎么办了，任何人都可以帮助我吗？

如果您需要更多信息，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T07:01:18.490

您的视图不接受该事件的原因是因为 TextView （可聚焦）正在覆盖它并为自己采取所有触摸/单击操作。

您只需为 TextView 设置这些：

`android:focusable="false"`

`android:focusableInTouchMode="false"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T07:38:41.983

找到了一个替代解决方案：[https](https://stackoverflow.com/a/6579192/1759005) ://stackoverflow.com/a/6579192/1759005 。它工作得一样好。

# c++ - 使用 doxygen 将文档生成为降价文件

> ID：13081984
> 
> 赞同：23
> 
> 时间：2012-10-26T06:38:05.217
> 
> 标签：c++, markdown, doxygen

我知道可以在评论中使用 markdown 并且 doxygen 可以理解它。但我需要知道是否可以生成降价格式的文档？

我需要从 C++ 文件生成这些文档。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-10-01T13:20:02.507

我知道这个问题很老，但似乎有一个新工具可用：[https ://www.npmjs.com/package/doxygen2md](https://www.npmjs.com/package/doxygen2md)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-31T04:55:26.870

我不知道有什么可以直接执行的，但是 doxygen 能够[使用 XML 生成器输出 XML 文档](http://www.doxygen.nl/manual/customize.html#xmlgenerator)。

有各种各样的项目可以使用所述 XML 数据来转换它，我所知道的最简单的项目之一是[Breathe](https://github.com/michaeljones/breathe)，它用于将 XML 文档转换为[Sphinx](http://sphinx-doc.org)可以使用 doxygen 作为输出文档的东西预处理器可以这么说。

Breathe 的代码可能足够简单，可以用作起点，然后生成 Markdown 文件，而不是 Sphinx 所需的 ReStructuredText 文件。我没有看过 Breathe 的代码，但我已经将它用于一些主要项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-17T11:01:07.550

[使用 doxygen http://www.doxygen.nl/manual/customize.html#xmlgenerator](http://www.doxygen.nl/manual/customize.html#xmlgenerator)生成 XML 。

使用 PanDoc [http://pandoc.org/](http://pandoc.org/) 将 XML 转换为 Markdown。

# java - 调整屏幕上绘制的图像大小而不改变 RBG 像素阵列的大小

> ID：13081985
> 
> 赞同：1
> 
> 时间：2012-10-26T06:38:09.413
> 
> 标签：java, image, math, resize, pixels

此方法将像素颜色从一个图像设置为另一个。如何将 imgPix 数组中的像素设置为 screen.pixels 数组，以使图像在 screen.pixels 数组上显得更大？我简化了代码以使概念易于理解。

* * *

```
public void drawSprite(Screen screen)
{
     for(int y = 0; y < 16; y++)
     {
       for(int x = 0; x < 16; x++)
       {        
           screen.pixels[x + y * screen.WIDTH] = this.imgPix[x + y * this.WIDTH];
       }
     }     
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:48:24.987

我发现一个不错的小技巧是强制转换为 int。这会向下舍入重复模式的数字..

```
// scale = 2  
-------------y = 0,1,2,3,4,5,6,7,8,9  // as y increase.. y++
(int) y/scale = 0,0,1,1,2,2,3,3,4,4 
//  
// out of  10 numbers 5 were drawn this is scaling up   
// As you can see from the above as y increase y/scale repeats with a the correct pattern  
// this happends because casting the (int) rounds down.   
//  
// scale = 0.8  
-------------y = 0,1,2,3,4,5,6,7,8,9  
(int) y/scale = 0,1,2,3,5,6,7,8,10,11  
//  
// out of  10 numbers 2 were skipped this is scaling down an image

    public void drawSprite(Screen screen,Image image,float scale)
    {
         for(int y = 0; y < image.height*scale; y++)
         {
               int scaleY = (int)(y/scale); 

           for(int x = 0; x < image.width*scale; x++)                          
           {                                                    
               int scaleX = (int)(x/scale); 

               screen.pixels[x + y * screen.WIDTH] = image.pixels[scaleX + scaleY * image.width];
           }
         }     
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:45:48.493

我之前在programmers.stackexchange.com 上回答过这个问题（与java 足够相似）：

[https://softwareengineering.stackexchange.com/questions/148123/what-is-the-algorithm-to-copy-a-region-of-one-bitmap-into-a-region-in-another/148153#148153](https://softwareengineering.stackexchange.com/questions/148123/what-is-the-algorithm-to-copy-a-region-of-one-bitmap-into-a-region-in-another/148153#148153)

```
--

struct {
    bitmap bmp;
    float x, y, width, height;
} xfer_param;

scaled_xfer(xfer_param src, xfer_param det)
{
    float src_dx = dst.width / src.width;
    float src_dy = dst.height / src.height;
    float src_maxx = src.x + src.width;
    float src_maxy = src.y + src.height;
    float dst_maxx = dst.x + dst.width;
    float dst_maxy = dst.y + dst.height;
    float src_cury = src.y;

    for (float y = dst.y; y < dst_maxy; y++)
    {
        float src_curx = src.x;   
        for (float x = dst.x; x < dst_maxx; x++)
        {
            // Point sampling - you can also impl as bilinear or other
            dst.bmp[x,y] = src.bmp[src_curx, src_cury];
            src_curx += src_dx;
        }

        src_cury += src_dy;
    }
} 
```

# git - 如何获取一堆我的 git 本地提交并将它们合并到一个提交中？

> ID：13081986
> 
> 赞同：2
> 
> 时间：2012-10-26T06:38:21.343
> 
> 标签：git, git-commit

在我的公司，我们最近移动了 git。在这个环境中工作的过程中，我最终做了一堆本地提交（在我的本地分支中）。为了让我的代码保持更新，我进行了拉取。现在最终结果是，当我执行 git log 时，我在该日志中找到了我的提交以及其他开发人员的提交。在将我的提交推送到远程之前，我想收集我所有的本地提交并将它们合并到一个提交中（以减少日志中的噪音）并将其推送到远程。我如何在 git 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T06:53:18.173

最简单的做法是，一旦你完成了 a`git pull`并且你已经解决了任何冲突并且都是最新的，将你的分支指针重置为最新的远程提交（我假设`origin/master`），然后进行新的提交。

```
git reset --soft origin/master
git commit 
```

新提交将是您的所有更改，作为远程​​主提交之上的单个新提交。然后，您可以将此提交推送到远程。用于`git show`在推送之前验证提交。

**注意：**这假设您只从一个共享分支 ( `master`) 中拉出，或者您拉出的任何其他共享分支已经合并到远程的`master`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T06:43:49.557

```
git fetch <remote name>
git rebase -i <remote name>/<branch name> 
```

有关如何使用`rebase -i`（交互式变基）的更多详细信息，请参阅本指南：

[http://gitready.com/advanced/2009/02/10/squashing-commits-with-rebase.html](http://gitready.com/advanced/2009/02/10/squashing-commits-with-rebase.html)

请注意，rebase/squashing 并不总是与合并提交很好地配合。变基通常会在您合并的内容之后移动您的提交，因此合并提交可能会消失并且您不会遇到问题，但如果您合并的内容不在远程分支中，您需要小心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T06:47:12.387

你应该改变方法。在本地分支上开发时，您不应该做任何池（或提取）。而是尝试更新“主”开发分支，然后不时使用“主”分支重新设置（git rebase）您的开发分支。

现在也许**git cherry-pick**可能是您正在寻找的东西。

您还可以尝试手动重置（git reset --soft）到您在给定（您的开发）分支上的第一次提交，然后仅选择您的下一次提交作为一次提交的更改。

如果你在你的分支问题上只有你自己的提交，那就简单多了：你可以压缩那些（git squash）。一些在你的开发分支上不创建太多提交的方法也在修改你的提交（git ammend）。

# javascript - 当搜索值是动态的时，如何获取包含某些文本的 div 的计数？

> ID：13081989
> 
> 赞同：2
> 
> 时间：2012-10-26T06:38:41.037
> 
> 标签：javascript, jquery, search, contains

我想允许用户输入搜索字符串，并且我想返回找到该搜索项的次数。如果我将搜索值硬编码到“包含”方法中，我可以让它工作，但是一旦我将搜索值存储到变量中，它就不再工作了。

**HTML**：

```
<div class="myTest">this</div>
<div class="myTest">this</div>
<div class="myTest">that</div>
<div class="myTest">that</div>
<div class="myTest">this</div>
<div id="howMany"></div> 
```

**JAVASCRIPT**：

```
$(function() {
    var myVal= "that";  
    var existingList = $("div:contains(myVal) + .myTest").length;
    $("div[id*='howMany']").html(existingList);
}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T06:40:12.093

您的代码中有一些错误：

*   `+`在 jQuery 选择器[中并没有做](http://api.jquery.com/next-adjacent-Selector/)你认为它做的事情
*   您在选择器中包含字符串`myVal`而不是值`myVal`
*   用于`#`查找具有给定 id 的元素

您可以使用搜索

```
var existingList = $('div.myTest:contains("'+myVal+'")').length; 
```

但这不适用于包含双引号的字符串。对于任何类型的字符串，我宁愿建议

```
var existingList = $('div.myTest').filter(function(){
    return $(this).text().indexOf(myVal)>=0;
}).length; 
```

要发布找到的结果数，请使用

```
$("#howMany").html(existingList); 
```

# ruby-on-rails - Admin#index 中的 NoMethodError，nil:NilClass 的未定义方法“名称”

> ID：13081991
> 
> 赞同：-1
> 
> 时间：2012-10-26T06:38:49.787
> 
> 标签：ruby-on-rails

我收到“NoMethodError”请就如何解决此问题提出建议

非常感谢，

```
NoMethodError in Admin#index 
.....
.....
undefined method `name' for nil:NilClass
.....
.....
Extracted source (around line #23): 

20:     <% for reservation in reservations %>
21:         <tr class="<%= cycle('list_line_odd', 'list_line_even') %> ">
22:         <td class="list_description"> 
23:             <dt><%= link_to reservation.machine.name, reservation.machine %></dt>
24:         </td>
25:         <td> <%= reservation.startdate.strftime("%m/%d/%Y %I:%M %p")  %> </td>
26:         <td> <%= reservation.enddate.strftime("%m/%d/%Y %I:%M %p")  %> </td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T07:15:30.670

由于`reservation.machine.name`. 在您的情况下`reservation.machine`，一个或多个预订返回`nil`，然后您正在调用`name`它的方法。

在对象是否返回 nil 之前避免此类错误检查的最佳方法。

```
<td class="list_description"> 
  <dt>
    <% if reservation.machine %>
      <%= link_to reservation.machine.name, reservation.machine %>
    <% end %>
  </dt>
</td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:54:18.233

尝试这个

```
<% if reservation.machine.present?  %>
  <td class="list_description"> 
    <dt><%= link_to reservation.machine.name, reservation.machine %></dt>
  </td>
<% end %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T12:15:24.027

在您的预订控制器中

```
def index
 @reservation = Reservation.all
end 
```

在你看来

```
<%= form_for(@reservation) do |r|%>
 <% if r.machine %>
  <%= link_to r.machine.name, r.machine %>
 <% end %>
<%end%> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-17T15:21:09.657

恕我直言，如果机器是预订的可选属性，则先前的响应是有效的。如果它是强制性的，您应该检查模型中的 belongs_to 关系。

# python - 如何在按下 QPushButton 时暂停 QThread 的执行？

> ID：13081992
> 
> 赞同：0
> 
> 时间：2012-10-26T06:38:51.147
> 
> 标签：python, pyqt, pyqt4, qthread

我正在使用 PyQt4为 Lights Out Board ( [Wiki ) 编写一个简单的 GUI。](http://en.wikipedia.org/wiki/Lights_Out_%28game%29)GUI 有一个“解决”按钮，它使用迭代深化深度优先搜索。这很耗时，我生成了一个新的 QThread 来解决这个难题，并在它完成时更新板，同时 GUI 保持响应。这是我能做到的。

但是，我还有一个“停止”按钮，如果它当前正在运行，它应该停止搜索线程，并且我无法使用 exit() 停止 QThread。这是三个函数的代码。

```
class LightsOut(QWidget):
    def __init__(self, parent=None):
        # Whole other initialization stuff
        self.pbStart.clicked.connect(self.puzzleSolver) # The 'Start' Button
        self.pbStop.clicked.connect(self.searchStop) # The 'Stop' Button

    def searchStop(self):
        if self.searchThread.isRunning():
            self.searchThread.exit() # This isn't working
            self.tbLogWindow.append('Stopped the search !') # This is being printed
        else:
            self.tbLogWindow.append('Search is not running')

    def searchFinish(self):
        self.loBoard.setBoard() # Redraw the lights out board with solution

    def puzzleSolver(self):
        maxDepth = self.sbMaxDepth.value() # Get the depth from Spin Box
        self.searchThread = SearchThread(self.loBoard, self.tbLogWindow, maxDepth)
        self.searchThread.finished.connect(self.searchFinish)
        self.tbLogWindow.append('Search started')
        self.searchThread.start() 
```

当我单击“停止”按钮时，在日志窗口 (QTextBrowser) 中，我可以看到“停止搜索”消息，但我的 CPU 仍以 100% 运行，当搜索完成时，正在显示解决方案（searchFinish 是被调用）。显然，我遗漏了一些非常简单的东西，并且我没有使用 terminate() ，因为它在文档中是不受欢迎的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:59:07.133

使用[`terminate()`](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qthread.html#terminate)代替`quit`并调用[`wait()`](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qthread.html#wait). `wait()`将阻塞直到 QThread 完成。

您可以做的另一件事是在线程外部设置退出条件，您将在线程内部检查该条件（可能是最好的解决方案）。此外，您可以将插槽连接到`finished`信号。

# php - 对一组相似词进行分组

> ID：13081996
> 
> 赞同：2
> 
> 时间：2012-10-26T06:39:05.573
> 
> 标签：php

我有一个包含一堆单词的数组。例如：

```
array( developer,develop,development,design,designer,designing ) 
```

我希望能够将这些单词与其相似的单词组合在一起，所以我会得到这样的结果：

```
array(
   array( develop, developer, development ),
   array( design, designer, designing ),
); 
```

在 PHP 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T07:03:16.353

您可以使用以下方法轻松完成[`metaphone()`](http://www.php.net/manual/en/function.metaphone.php)：

```
$result = array();
foreach ($array as $word) {
    $result[metaphone($word, 2)][] = $word;
} 
```

`print_r($result);`将会呈现：

```
Array
(
    [TF] => Array
        (
            [0] => developer
            [1] => develop
            [2] => development
        )

    [TS] => Array
        (
            [0] => design
            [1] => designer
            [2] => designing
        )
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T06:47:27.040

一种方法在我脑海中浮现

```
$array = array( 'developer','develop','development','design','designer','designing' );

function matchWords(array $in,$pad='4')
{
    $ret = array();
    foreach ($in as $v) {
        $sub = substr($v, 0, $pad);
        if (!isset($ret[$sub])) {
            $ret[$sub] = array();
        }
        $ret[$sub][] = $v;
    }

    return array_values($ret);
}

print_r(matchWords($array,4));

Array
(
    [0] => Array
        (
            [0] => developer
            [1] => develop
            [2] => development
        )

    [1] => Array
        (
            [0] => design
            [1] => designer
            [2] => designing
        )
) 
```

这匹配`$pad`数组值的第一个字母并在其上创建一个键。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T06:43:04.937

您可能希望使用诸如“Porter Stemming”之类的技术来提取每个单词的词干以识别相似的词，然后根据这些词干构建您的数组。[您可以在此处](http://www.chuggnutt.com/stemmer)找到 Porter Stemmer 的 PHP 实现

# html - 如何将图像从一个jsp传递到另一个jsp

> ID：13081998
> 
> 赞同：1
> 
> 时间：2012-10-26T06:39:09.050
> 
> 标签：html, jsp

在按钮上单击我调用脚本来获取画布图像。我拿位置。我需要将此图像源传递到另一个需要显示此图像的 jsp 文件中。

你能帮我解决这个问题吗？

```
<%@ page contentType="text/html;charset=UTF-8" %>
<html>
<head>
    <script>
        function draw() {
             var canvas = document.getElementById("canvas");
            var ctx = canvas.getContext("2d");
            ctx.fillStyle = "black";
            ctx.beginPath();
            var x;
            var y;
            canvas.onmousedown = function(e) {
                x = e.clientX;
                y = e.clientY;
                ctx.moveTo(x, y);
            }
            canvas.onmouseup = function(e) {
                x = null;
                y = null;
            }
            canvas.onmousemove = function(e) {
                if (x == null || y == null) {
                    return;
                }
                x = e.clientX;
                y = e.clientY;
                x -= canvas.offsetLeft;
                y -= canvas.offsetTop;
                ctx.lineTo(x, y);
                ctx.stroke();
                ctx.moveTo(x, y);
            }
        };
        function to_image(){
            var canvas = document.getElementById("canvas");
            document.getElementById("theimage").src = canvas.toDataURL();
        }
        function clear_image(){
            var canvas = document.getElementById('canvas');
            var context = canvas.getContext('2d');
            context.fillStyle = '#ffffff';
            context.clearRect(0, 0, canvas.width, canvas.height);
            canvas.width = canvas.width;
         }
    </script>
</head>
<body onload="draw();">
<canvas id="canvas" width="300" height="300"
style="border: 1px solid black;"></canvas>
<div><button onclick="to_image()">Draw to Image</button></div>
<div><button onclick="clear_image()">Clear</button></div>
<image id="theimage"></image>
</body>
</html> 
```

我需要将 document.getElementById("theimage").src 的值传递到另一个 jsp 并访问该值以显示图像。

任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:50:34.513

如果您的意思是您将在从第一页（您已粘贴代码）单击按钮上加载带有图像的第二页，那么只需将代码更新为：

```
 {

        var canvas = document.getElementById("canvas");
        var dataUrl = canvas.toDataURL();

        //-- Following code can be placed wherever you want to call another page.
        window.location = "urlToSecondJSPPage.jsp?imgUrl="+dataUrl;

    } 
```

然后可以从第二页访问 imgUrl(url 参数)。

# cuda - CUDA 中大小为 4 的非法写入

> ID：13081999
> 
> 赞同：0
> 
> 时间：2012-10-26T06:39:14.220
> 
> 标签：cuda

当我使用 cuda-gdb 为特定输入运行它时，我编写了一个由于设备非法地址而面临内核启动失败的代码。我使用 cuda-memcheck 运行它并得到 Invalid write of size 4 错误。代码太大，所以我将在这里解释这个场景。

我有一个主内核，我将一个用作堆栈的数组指针传递给它。我有一个从主内核调用并使用堆栈的设备函数。

```
__device__ void find(int v , int* p, int* pv,int n, int* d_stackContents)
{

    int d_stackTop;
    d_stackTop = -1;
    *pv = p[v];
    if(*pv == -1){
            *pv = v;

    }
    else{
    cuPrintf("Stack top is %d\n",d_stackTop);
    d_stackTop = d_stackTop + 1;
    d_stackContents[d_stackTop] = v;
    cuPrintf("Stack top is %d\n",d_stackTop);
    while(*pv != -1){
            d_stackTop = d_stackTop + 1;
            d_stackContents[d_stackTop] = *pv;
            cuPrintf("Stack top is %d\n",d_stackTop);
            *pv = p[*pv];
    }

} 
```

错误发生在 d_stackContents[d_stackTop] = *pv;

我在主内核中调用设备函数如下：

查找（v[idx]，p，&pv，n，d_stackContents）；

其中 idx = threadIdx.x + blockDim.x * blockIdx.x 我已将 pv 声明为 int pv;

此外，d_stackContents 数组使用 cudaMalloc 在 main 中分配，并作为参数传递给主内核

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T10:07:38.070

除非您在单个块中使用单个线程调用内核，否则这将不起作用。否则，所有线程都会在彼此的堆栈上乱涂乱画。如果您随后取消引用存储在损坏堆栈上的指针，它将立即解释您的代码为何试图访问非法地址。

您需要为每个线程使用单独的堆栈，或者在全局内存中使用具有堆栈指针的单个堆栈，该堆栈指针仅通过原子操作进行操作。