# StackOverflow 问答 15595000-15595999

# php - 如何在 PHP 中一次编辑多个值

> ID：15595006
> 
> 赞同：0
> 
> 时间：2013-03-24T03:57:53.523
> 
> 标签：php, mysql, edit, field

我正在尝试一次编辑许多列。我有很多字段希望用户能够编辑。我不确定我做错了什么。任何帮助将不胜感激。它指出您的 mySQL 查询存在问题，请联系技术支持并提供以下信息：

```
 <?php 
       $dbserver = "";
       $dblogin = "";
       $dbpassword = "";
       $dbname = "";

       $con = mysqli_connect("$dbserver","$dblogin","$dbpassword","$dbname");
       if (!$con)
       {
       die('Could not connect to the mySQL server please contact technical 
       support with the following information: ' . mysqli_connect_errno());
       }

       $organization = mysqli_real_escape_string($_POST['organization']);
       $firstname = mysqli_real_escape_string($_POST['firstname']);
       $lastname = mysqli_real_escape_string($_POST['lastname']);
       $rank = mysqli_real_escape_string($_POST['rank']);
       $branch= mysqli_real_escape_string($_POST['branch']);
       $gender= mysqli_real_escape_string($_POST['gender']);
       $emailaddress = mysqli_real_escape_string($_POST['emailaddress']);
       $jobtitle = mysqli_real_escape_string($_POST['jobtitle']);
       $company = mysqli_real_escape_string($_POST['company']);
       $businessphone = mysqli_real_escape_string($_POST['businessphone']);
       $homephone = mysqli_real_escape_string($_POST['homephone']);
       $mobilephone = mysqli_real_escape_string($_POST['mobilephone']);
       $faxnumber = mysqli_real_escape_string($_POST['faxnumber']);
       $address = mysqli_real_escape_string($_POST['address']);
       $city = mysqli_real_escape_string($_POST['city']);
       $state = mysqli_real_escape_string($_POST['state']);
       $zippostal = mysqli_real_escape_string($_POST['zippostal']);
       $country = mysqli_real_escape_string($_POST['country']);
       $notes = mysqli_real_escape_string($_POST['notes']);
       $donorid = mysqli_real_escape_string($_POST['donorid']);

       // make the query a variable so we can print out if it fails
       $query = "UPDATE donors SET organization = '$organization', firstname =         
       '$firstname', lastname = '$lastname', rank = '$rank', branch = '$branch', 
       gender = '$gender', emailaddress = '$emailaddress', jobtitle = '$jobtitle', 
       company = '$company', businessphone = '$businessphone', homephone = 
       '$homephone', mobilephone = '$mobilephone', faxnumber = '$faxnumber', address = 
       '$address', city = '$city', state = '$state', zippostal = '$zippostal', country 
       = '$country', notes = '$notes', donorid = '$donorid' WHERE donorid = 
       '$donorid'";

       $sql = mysqli_query($con,$query) or die('There was a problem with your mySQL   
       query please contact technical support with the following information: ' .  
       mysqli_error());

       // troubleshooting for development only     
       if(mysqli_affected_rows($sql) < 1){
       die('There was a problem with your mySQL query : ' . $query);}

       mysqli_close($con);
        header( 'Location: http://localhost/moddonor.php' ) ;
        ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T04:02:46.170

根据@Sean answer上的对话，您需要动态构建查询，这样的事情应该可以工作（还应该注意我使用 php5.3+ 特定语法的匿名函数`array_map`）：

```
// array of field => bind type
$fields = array(
   'firstname' => 's',
   'lastname' => 's',
   'rank' => 'i',
   // other fields EXCEPT donorid
);

// template for the sql
$sqlTemplate = 'UPDATE SET %s WHERE donorid = ?';

// array to hold the fields we will actually use with the query
$params = array();

// lets check the fileds against those allowed
// and stick them in the $params array - note we exclude donorid
// because its required

foreach ($fields as $field => $type) {
   if(isset($_POST[$field]) && !empty($_POST[$field])) {
      $params[$field] = array(
          'value' => $_POST[$field],
          'type' => $type
      ); 
   }
}

// if we actually have something to update then lets prep the sql

if(!empty($params)) {
   $forUpdate = array_map(function ($f) { return $field . ' = ?'; }, array_keys($params));
   $sql = sprtintf($sqlTemplates, implode(',', $forUpdate));

   // $sql is now the parameterized query like my example below

   // compile all the parameter types into a single string like 'ssi'
   $types = implode('', array_map(function($v){ return $v['type'];}, $params));

   // now we need to push the $stmt and the $types onto $params
   array_unshift ($params, $stmt, $types);

   // params now looks like:
   // Array ( 0 => Msqil_Stmt, 1 => 'ssi', 'firstname' => 'thevalue', 'lastname' => 'value', 'rank' => 1, etc..) 

   // now call bindparam via call_user_func_array 
   call_user_func_array('mysql_stmt_bind_param', $params);

   // now execute the query:

   mysqli_stmt_execute($stmt);
} 
```

你做错了很多事情：

1.  您正在使用两者`mysql_*`，`mysqli_*`它们不可互换。Use `mysqli_*`because `mysql_*`is deprecated ans should not be used了；你所有的mysql函数都应该是`mysqli`版本。
2.  您需要在值周围加上引号，并且还需要转义这些值。由于您使用 mysqli 使用[准备好的语句](http://www.php.net/manual/en/mysqli.prepare.php)。
3.  资源连接是查询函数的第二个参数，而不是第一个。

--

```
 // with mysqli the db name is passed as an argument wen creating the connection
  $con = mysqli_connect("$dbserver","$dblogin","$dbpassword", $dbname);

  if (!$con) {
     die('Could not connect to the mySQL server please contact 
        technical support with the following information: ' . mysqli_error());
  }

  $sql = "UPDATE donors set organization = ?, firstname =  
  ?, lastname = ?, rank = ?, branch = ?,
  gender = ?, emailaddress = ?, jobtitle = ?, company   
  =?, businessphone = ?, homephone = ?, 
  mobilephone =?, faxnumber = ?, address = ?, city = 
  ?, state = ?, zippostal =?, country = ?,
  note = ?
  WHERE donorid= ?";
  $stmt = mysqli_preapre($sql);

  mysqli_bind_param($stmt, 
     'ssisss...i', 
     $organization,
     $firstname,
     $lastname,
     $rank,
     $branch,
     $gender,
      $emailaddress,
     // other feilds... the must be in the same order as named in the query
     // then lastly the donorid
     $donorid
  );

  // execute the query
  mysqli_stmt_excecute($stmt);

  mysqli_close($con);
  header( 'Location: http://localhost/moddonor.php' ) ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T04:02:32.273

您正在使用 连接`mysql_connect()`，但使用`mysqli_query()`. 您还需要将您的值括在引号`'`/`"`

```
 $con = mysql_connect("$dbserver","$dblogin","$dbpassword");
  ...
  mysql_select_db("$dbname", $con);
  ...
  mysqli_query($con,"UPDATE donors set organization = '$organization', firstname =  
  '$firstname', lastname = '$lastname', rank = '$rank', branch = '$branch',
  gender = '$gender', emailaddress = '$emailaddress', jobtitle = '$jobtitle', company   
  ='$company', businessphone = '$businessphone', homephone = '$homephone', 
  mobilephone = '$mobilephone', faxnumber = '$faxnumber', address = '$address', city = 
  '$city', state = '$state', zippostal = '$zippostal', country = '$country',
  note = '$note' WHERE donorid= '$donorid'");

  mysqli_close($con); 
```

将您的连接更改[`mysqli_connect()`](http://www.php.net/manual/en/function.mysqli-connect.php)为`mysql_`函数已折旧。

```
 $con = mysqli_connect("$dbserver", "$dblogin", "$dbpassword", "$dbname");
  if (!$con)
  {
  die('Could not connect to the mySQL server please contact 
  technical support with the following information: ' . mysqli_error());
  }

  mysqli_query($con,"UPDATE donors set organization = '$organization', firstname =  
  '$firstname', lastname = '$lastname', rank = '$rank', branch = '$branch',
  gender = '$gender', emailaddress = '$emailaddress', jobtitle = '$jobtitle', company   
  ='$company', businessphone = '$businessphone', homephone = '$homephone', 
  mobilephone = '$mobilephone', faxnumber = '$faxnumber', address = '$address', city = 
  '$city', state = '$state', zippostal = '$zippostal', country = '$country',
  note = '$note' WHERE donorid= '$donorid'"); 
```

此外，学习如何做准备好的陈述也是有益的 - [http://www.php.net/manual/en/mysqli.quickstart.prepared-statements.php](http://www.php.net/manual/en/mysqli.quickstart.prepared-statements.php)

请参阅 - [http://php.net/manual/en/mysqlinfo.api.choosing.php](http://php.net/manual/en/mysqlinfo.api.choosing.php)
或[http://www.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated](http://www.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)

* * *

**编辑**
显然您在查询中使用它们之前没有设置变量。注意：确保清理任何用户输入。看[`mysqli_real_escape_string()`](http://php.net/manual/en/mysqli.real-escape-string.php)

```
//Put this after $con = mysqli_connect(), but before mysqli_query()
$organization = mysqli_real_escape_string($_POST['organization']);
$firstname = mysqli_real_escape_string($_POST['firstname']);
$lastname = mysqli_real_escape_string($_POST['lastname']);
....
$donorid = mysqli_real_escape_string($_POST['donorid']);
// need to add the rest of your form inputs 
```

* * *

**编辑 2**
在您更新的脚本上存在一些问题 - `organization = $_POST['$organization'], $firstname = $_POST['$firstname']`、`mysql_error()`等。尝试使用以下代码编辑。

```
 <?php 
 $dbserver = "";
 $dblogin = "";
 $dbpassword = "";
 $dbname = "";

 $con = mysqli_connect("$dbserver","$dblogin","$dbpassword","$dbname");
 if (!$con)
 {
 die('Could not connect to the mySQL server please contact technical support with  
 the following information: ' . mysqli_connect_errno());
 }

 $organization = mysqli_real_escape_string($_POST['organization']);
 $firstname = mysqli_real_escape_string($_POST['firstname']);
 $lastname = mysqli_real_escape_string($_POST['lastname']);
 $rank = mysqli_real_escape_string($_POST['rank']);
 $branch= mysqli_real_escape_string($_POST['branch']);
 $gender= mysqli_real_escape_string($_POST['gender']);
 $emailaddress = mysqli_real_escape_string($_POST['emailaddress']);
 $donorid = mysqli_real_escape_string($_POST['donorid']);

 // make the query a variable so we can print out if it fails
 $query = "UPDATE donors SET organization = '$organization', firstname = '$firstname', lastname = '$lastname', rank = '$rank', branch = '$branch', gender = '$gender', emailaddress = '$emailaddress' WHERE donorid = '$donorid'";

 $sql = mysqli_query($con,$query) or die('There was a problem with your mySQL query please contact technical support with the following information: ' . mysqli_error());

 // troubleshooting for development only     
 if(mysqli_affected_rows($sql) < 1){
   die('There was a problem with your mySQL query : ' . $query);}

 mysqli_close($con);
 header( 'Location: http://localhost/moddonor.php' ) ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T04:01:05.190

你没有提到错误是什么，但是，

我认为您必须使用单引号 (') 包装这些值，例如

设置组织 = $组织

变成

设置组织 = '$组织'

# c# - 在gridview中重复一行多次

> ID：15595009
> 
> 赞同：0
> 
> 时间：2013-03-24T03:58:44.950
> 
> 标签：c#, linq, gridview

我有一个`Gridview`名为`Quantity`. 每个产品都有自己的数量。我需要显示与数量一样多的行。

例如，如果我有

```
Car | 4 | $ 20 
```

我需要显示 4 行，例如

```
Car | 1 | 20 
```

我找不到这样做的方法。我正在使用 linq 从数据库中检索数据，这就是`DataSource`我的`Gridview`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T04:08:58.603

您可以使用 linq [Range](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.range.aspx)方法来做到这一点。假设您有这样的 linq 源（简单示例）

```
var result = 
    from r in db.SourceTable
    select new { r.Name, r.Quantity, r.Price }; 
```

将此添加到查询中

```
var result = 
    from r in db.SourceTable
    from s in Enumerable.Range(1, record.Quantity)
    select new { r.Name, 1, r.Price }; 
```

但是，实体框架可能不支持这一点（并且可能在任何其他 ORM 中都不支持），因此您可能需要先调用`.ToList()`or `.AsEnumerable()`。

# android - Android EditText 首选项验证

> ID：15595011
> 
> 赞同：10
> 
> 时间：2013-03-24T03:59:02.473
> 
> 标签：android, sharedpreferences, edittextpreference

我使用 Edittextpreference 作为设置部分的首选项之一。当用户输入数据并单击确定时，我想验证此edittextpreference；在将其保存在 sharedpreference 中之前。

我正在尝试做这样的事情，但这首先保存了我想的偏好。

```
editTextPreference
            .setOnPreferenceChangeListener(new OnPreferenceChangeListener() {
                @Override
                public boolean onPreferenceChange(Preference preference,
                        Object newValue) {
                    if (((newValue.toString().length() == 15) {
                          // save preference only if length is equal to 15
                     }
              })
               }); 
```

有人可以指导我如何在将 edittextpreference 保存在 sharedpreference 之前验证它，以便我可以决定是否要保存它。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-24T04:08:00.577

根据[这里的文档](http://developer.android.com/reference/android/preference/Preference.OnPreferenceChangeListener.html)

> 当用户更改首选项时调用。这是在 Preference 的状态即将更新和状态保持之前调用的。
> 
> 它返回 True 以使用新值更新 Preference 的状态。

因此，您可以执行以下操作

```
 editTextPreference
            .setOnPreferenceChangeListener(new OnPreferenceChangeListener() {
                @Override
                public boolean onPreferenceChange(Preference preference,
                        Object newValue) {
                    if (((newValue.toString().length() == 15) {
                          //
                          return true;
                     }
                     else{
                          // invalid you can show invalid message
                          return false;
                     }
              })
       }); 
```

# c - 使用 typedef 和 struct 创建位域

> ID：15595018
> 
> 赞同：2
> 
> 时间：2013-03-24T04:00:39.897
> 
> 标签：c, structure, bit-fields

嘿，这一切都是为了 C 编程。

这是向我提出的问题，有人可以告诉我如何正确地用 C 语言为以下语句编写代码吗？仅供参考，我已经回答了这个测验，但我的教授不会自己发布答案。当他给它评分时我做得很差，但**为了帮助理解这一点，我将提供我的答案（尽管它们是不正确的）**

1：创建一个结构，该结构将保存表示以下内容的位：

*   count：一个 4 位 BCD 数
*   红色 LED：1 位
*   绿色 LED：1 位
*   电机方向：2位

将结构命名为 motorStatus

使用 typedef 来命名这个新的数据类型：mtrStatus_t

```
typedef unsigned char mtrStatus_t;

struct motorStatus mtrStatus_t {
    mtrStatus_t count: 4;
    mtrStatus_t redLED: 1;
    mtrStatus_t greenLED: 1;
    mtrStatus_t motorDirection: 2;
}; 
```

2：创建结构的新实例并将其命名为motor1Status

```
motorStatus = motor1Status; 
```

3：编写语句初始化新的结构成员，如下所示：

*   count: 9 BCD
*   red LED: 1
*   green LED: 0
*   Motor Direction: 10

    count: 0x09; redLED: 0x01; greenLED: 0x00 motorDirection: 0x0A

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T04:09:22.560

For the first one I would do something like this:

```
typedef struct motorStatus  
{
    int count: 4;
    int redLED: 1;
    int greenLED: 1;
    int motorDirection: 2;
} mtrStatus_t; 
```

The second one is more like:

```
mtrStatus_t motor1status; 
```

and finally:

```
motor1status.count = 0x9;
motor1status.redLED = 1;
motor1status.greenLED = 0;
motor1status.motorDirection = 0x02; 
```

Count is a hex number because it is BCD (Binary coded decimal) [http://en.wikipedia.org/wiki/Binary-coded_decimal](http://en.wikipedia.org/wiki/Binary-coded_decimal) In BCD, you use 4 bits to represent the numbers 0-9, there are some unused bit patterns, so the easy way to work with it is to just use hex (which also uses 4 bits to represent the numbers 0x0-0xf), but in BCD you just don't use the numbers 0xa-0xf.

The reason motorDirection is 0x02 is because he wants motor direction of 10, but it is a 2 bit field, so I am assuming that he means 10 binary, which is 0x02 hex.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T05:21:11.663

Consider meeting these requirements in the order they are specified. Note that some requirements are merged together as one. This is often the case for assignments; Lecturers aren't always perfect linguists or logicians, particularly IT lecturers.

```
1: Create a structure that will hold bits the represent the following:

count: a 4 bit BCD number
red LED: 1 bit
green LED: 1 bit
motor direction: 2 bits

Name the structure motorStatus
```

Respond to this, first, without using typedef. Use the type `int` for bitfields. Next requirement:

```
Use typedef to name this new data type: mtrStatus_t
```

You've demonstrated the ability to write basic typedefs. `typedef unsigned char mtrStatus_t;` means "I define mtrStatus_t to alias unsigned char". Now, write a basic typedef like this that means "I define mtrStatus_t to alias struct motorStatus". Put it after the `struct motorStatus` definition, so that the compiler can see what it's aliasing.

```
2: Create a new instance of the structure and name it motor1Status
```

To clarify, your lecturer is asking you to declare a variable named `motor1Status`, which has the type `mtrStatus_t` or `struct motorStatus`. I presume you can declare variables, but correct me if I'm wrong.

```
3: Write statements to initialize the new structure members as follows:

count: 9 BCD
red LED: 1
green LED: 0
Motor Direction: 10

count: 0x09; redLED: 0x01; greenLED: 0x00 motorDirection: 0x0A
```

Your lecturer is asking for initialisation, *not assignment*. In `char str[] = "fubar";` and `char str[] = {'h','e','l','l','o','\0'};`, str is declared and initialised to store a string corresponding to "fubar". In `char str[6]; strcpy(str, "fubar");` str is declared without an initialisation, and each byte in "fubar" is copied (assigned) to the corresponding positions in str. How do you initialise a struct? Very similarly to the second *str* initialisation.

```
struct length_prefixed_string {
    size_t length;
    int zero;
    char string[];
};

/* Initialisation here: */
struct length_prefixed_string hello = { .length = 5,
                                        .string = "hello" }; 
```

This example uses a flexible array member, which can only be declared at the end of a struct: `char string[];`. It conveys an array of unknown length located at the end of the struct, which isn't counted towards `sizeof (struct length_prefix_string)`. For this reason, the example stores the *unknown length* in the *length* argument. This is a little off-topic, but you *can see an initialisation* (as opposed to an assignment) above. This example differentiates initialisation from assignment; You can't assign the `.string` member of this struct with `hello.string = "hello";`.

Another difference is: Any members not mentioned by the initialisation will be assigned a *zero* value (but *only* when an initialisation is present), hence the value of `hello.zero` in the above example will be 0\. For this reason, you can declare an array and zero-fill it with one statement: `int array[size] = { 0 };` (another difference between assignment and initialisation: `int array[size]; array = { 0 };` is invalid). Having said that, it'd be a good idea to ignore this fact for the purpose of your task, and explicitly initialise greenLED so that your marking examiner can't misunderstand.

I do hope I was helpful, here...

# python - 如何从python字典键中创建对

> ID：15595019
> 
> 赞同：0
> 
> 时间：2013-03-24T04:00:40.820
> 
> 标签：python, algorithm, list, dictionary

例如我有一个字典

```
my_dictionary= {'a': 20, 'c': 60, 'b': 10} 
```

在这种情况下，我有字典中的 3 个键。我想制作对并将它们作为元组存储在列表中。对于上述情况，我会有这个

```
[(a,b),(a,c),(b,c)] 
```

注：不重复。

在不使用任何外部模块的情况下，最好的方法是什么。

感谢您的贡献。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T04:01:47.550

```
>>> from itertools import combinations
>>> d = {'a': 20, 'c': 60, 'b': 10}
>>> list(combinations(d, r=2))
[('a', 'c'), ('a', 'b'), ('c', 'b')] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T04:18:33.667

```
>>> dd = {'a': 20, 'c': 60, 'b': 10}
>>> keys = [i for i in dd]
>>> [(keys[i],keys[j]) for i in range(len(keys)) for j in range(i+1,len(keys))]
[('a', 'c'), ('a', 'b'), ('c', 'b')]
>>> 
```

`dict`通常使用保留字（如）调用变量不是一个好主意

# javascript - 删除 jQuery 中的空格

> ID：15595021
> 
> 赞同：3
> 
> 时间：2013-03-24T04:01:00.317
> 
> 标签：javascript, regex

现在我的代码能够删除额外的空格，但它似乎与新行混淆了。如果输入中有多个换行符，它将删除所有换行符。例如：

**输入：**

```
abc    xyz

test 
```

**输出：**

```
abc xzy test 
```

理想情况下，我希望输出为：

```
abc xyz

test 
```

代码：

```
var input   = $('textarea#input');
var output  = $('textarea#output');

input.bind('keyup', function() {
    output.val(input.val().replace(/(\s){2,}/g, ' '));
}); 
```

**jsFiddle** [http://jsfiddle.net/rdvR7/3/](http://jsfiddle.net/rdvR7/3/)

我也想保持关注，但还没有弄清楚如何使用`\t`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T04:06:57.633

您可以使用字符类仅替换空格。

```
 output.val(input.val().replace(/[ ]{2,}/g,' ')); 
```

这只会找到空格，而不是制表符和换行符。您还可以在括号内放置任意字符组合

```
 output.val(input.val().replace(/[ \t]{2,}/g,' ')); 
```

这将找到所有空格和所有制表符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T04:17:27.500

只需替换空格字符（在正则表达式中表示自身）：

```
output.val(input.val().replace(/ {2,}/g, ' ')); 
```

# php - 将学说实体管理器作为参数传递给泛型类

> ID：15595028
> 
> 赞同：3
> 
> 时间：2013-03-24T04:02:02.553
> 
> 标签：php, function, symfony, parameters, doctrine

我有一个通用的 PHP 类，用于包含我在多个 Symfony 控制器中使用的函数/方法。为了使用实体管理器，我像这样传递它：

```
class MyController extends Controller
{
  public function indexAction()
  {
     $em = $this->getDoctrine()->getManager();
     $dbf = new DBFunctions($em);
     $result = $dbf->doSomething();
  }
} 
```

我的通用类如下所示：

```
class DBFunctions
{
  private $em;
  public function __construct($em1)
  {
    $em = $em1;
    var_dump($em1);
  }

  public function doSomething(){
      $query = $em->createQuery(<my query>);
      return $query->getResult();
  }
} 
```

问题是当我运行该函数时，出现以下错误：

```
 Call to a member function createQuery() on a non-object 
```

但是我的 var_dump 显示了这一点（还有更多）：

```
object(EntityManager514e73398155c_546a8d27f194334ee012bfe64f629947b07e4919\__CG__\Doctrine\ORM\EntityManager)[236]
private 'delegate' => 
object(Doctrine\ORM\EntityManager)[231] 
```

我确定它是一个对象，所以我不知道该怎么做。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T04:07:04.973

问题是您不能像这样将一个变量从一种方法传递到另一种方法。如果你`var_dump($em)`在你的`doSomething()`方法中这样做，你会看到它返回`NULL`. 将其作为参数传递给该方法或`$this->em`在构造函数中设置。

# android - 如何在 WebView 中注销 WebViewReceiver？

> ID：15595031
> 
> 赞同：1
> 
> 时间：2013-03-24T04:02:31.727
> 
> 标签：android, webview

伙计们。

我在我的 android 应用程序中使用 WebView，但是当我关闭使用它的活动时，它总是会在 logcat 中给我一个异常：

```
 android.app.IntentReceiverLeaked: Activity XXXViewActivity has leaked IntentReceiver android.webkit.WebView$WebViewReceiver@4182eab0 that was originally registered here. Are you missing a call to unregisterReceiver()? 
```

我查看了android.webkit.WebView的android src，但是没有发现WebViewReceiver，那是什么问题呢？

我的一些代码：

```
webView = new MmsWebView(this, mid);
webView.setHorizontalScrollBarEnabled(true);
webView.setHorizontalScrollbarOverlay(true); 
WebSettings settings = webView.getSettings();
settings.setSupportZoom(true);
settings.setBuiltInZoomControls(true);
settings.setDisplayZoomControls(true);
webView.loadDataWithBaseURL(null, mmsBody, "text/html", "utf-8", null);
...
...
public class MmsWebView extends WebView {
  private final Context context;
  private final int mid;
  public MmsWebView(Context context, int mid) {
    super(context);
    this.context = context;
    this.mid = mid; 
    init();
  }
  ...
} 
```

# r - 打开多个文件并使用 R 分配给单个变量

> ID：15595036
> 
> 赞同：2
> 
> 时间：2013-03-24T04:03:09.613
> 
> 标签：r

我有 100 个带有矩阵的文本文件，我想使用 R 打开它们 - read.table() 命令可用于此目的。我不知道如何将这些文件分配给单独的变量名，以便我可以对矩阵执行操作。我正在尝试使用 for 循环，但不断收到错误消息。我希望有人可以帮助我解决这个问题...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T04:12:25.473

如果您有 100 个文件，将它们简单地放在一个整洁的列表中可能更有意义。

```
 # Get the list of files
  #----------------------------#
    folder <- "path/to/files"
    fileList <- dir(folder, recursive=TRUE)  # grep through these, if you are not loading them all

    # use platform appropriate separator
    files <- paste(folder, fileList, sep=.Platform$file.sep)

  # Read them in
  #----------------------------#
    myMatrices <- lapply(files, read.table) 
```

然后通过例如 `myMatrices[[37]]` 或使用访问`lapply`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T22:50:15.780

只使用 list.files 会更容易吗？

例如：

```
files <- list.files(directory/path, pattern= "regexp.if.needed") 
```

然后你可以通过调用 files[1]、files[2] 等来访问每个元素。这将允许你提取目录中的所有文件，或者只提取与正则表达式匹配的文件。

# html - Bootstrap 导航栏高度在插入品牌形象时发生了变化

> ID：15595040
> 
> 赞同：0
> 
> 时间：2013-03-24T04:03:38.140
> 
> 标签：html, css, twitter-bootstrap

我是 HTML 和 CSS 的新手，最近 4 天开始编码。我发现引导程序对于让事情快速发展非常有用。

这是我尝试获得具有透明度并固定在顶部的导航栏。

[http://jsfiddle.net/revanur/mf5wc/4/](http://jsfiddle.net/revanur/mf5wc/4/)

```
<!-- Top-Navigation-Bar -->
<div class="row-fluid">
    <div class="navbar navbar-fixed-top">
        <div class="navbar-inner" id="topbar">
            <div class="container"> <a href="#"><img class = "brand" src="http://placehold.it/269x50" alt="SparkCharger" /></a>

                <button id="topbtn" type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">    <span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
                </button>
                <div class="nav-collapse">
                    <ul class="nav pull-right">
                        <li class="active">
                            <form class="navbar-search brand">
                                <input type="text" class="search-query" placeholder="Search">
                            </form>
                        </li>
                        <li><a href="#"> <h5> Discover </h5></a>
                        </li>
                        <li><a href="#"> <h5> Blog </h5></a>
                        </li>
                        <li class="dropdown">   <a class="dropdown-toggle" data-toggle="dropdown" href="#"><h5>Start <span class="caret"></span></h5></a>

                            <ul class="dropdown-menu">
                                <li><a href="#"> <h6> Login </h6></a>
                                </li>
                                <li><a href="#"> <h6> Signup </h6></a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- /Top-Navigation-Bar --> 
```

但是，导航栏的高度似乎会根据品牌形象大小而变化。我对此没有任何问题，但我注意到图像与导航栏顶部和底部之间的间距很大。我该如何改变这个。此外，是否可以修复导航栏的大小，以便导航栏没有自己的想法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T04:12:09.497

有一些因素会影响导航栏的高度：

1.  div class="navbar-inner" (5px padding)
2.  img class="brand" (10px padding)
3.  图像的大小

您可以通过以下方式删除填充：

```
img.brand {
  padding: 0;
} 
```

和/或您可以指定导航栏的高度：

```
div.navbar-inner {
    height: 10px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T04:06:53.900

使用这样的东西：

```
.brand {height: 25px;} 
```

### 演示：[小提琴](http://jsfiddle.net/praveenscience/mf5wc/2/)

# cucumber - 黄瓜与 TestNG

> ID：15595047
> 
> 赞同：13
> 
> 时间：2013-03-24T04:05:33.667
> 
> 标签：cucumber, bdd, testng

我们在带有 Selenium WebDriver 的 TestNG 中有一个非常广泛的框架，我希望能够继续使用它，但是将 Cucumber BDD 与它一起使用。我知道 Cucumber 可以与 JUnit 一起使用，但不确定它是否可以与 TestNG 一起使用。

谁能让我知道这是否会很快推出？如果没有，是否有任何解决方法以便我可以将 Cucumber 与 TestNG 一起使用？

此外，市场上还有其他可与 TestNG 一起使用的 BDD 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-19T19:23:43.507

maven pom中的依赖：

```
 <dependency>
        <groupId>info.cukes</groupId>
        <artifactId>cucumber-testng</artifactId>
        <version>1.1.5</version>
        <scope>test</scope>
    </dependency> 
```

测试运行功能：

```
import cucumber.api.testng.AbstractTestNGCucumberTests;

public class CucumberTets extends AbstractTestNGCucumberTests {

} 
```

# java - 如何在 Eclipse 中禁用非类型提案？

> ID：15595048
> 
> 赞同：3
> 
> 时间：2013-03-24T04:05:59.890
> 
> 标签：java, eclipse

我的自动激活密钥设置为 a 到 z。因此，一旦我输入`str`，它就会提出`StringBuilder`，这就是我想要的。

![Eclipse 展示 Java 类型建议](../Images/7f7a2660c957ab31f04ff444ecae3637.png)

然后，我按下`Space`接受建议，并输入`sb`变量名。Eclipse 显示非类型提案“sBuilder”。由于我已将变量名称确定为`sb`，因此 Non-Type 建议是无用的。

![Eclipse 展示 Java 非类型提案](../Images/26214156b62abb303f5a9b756f0acd05.png)

正如烦人的提议所示，我无法继续键入`=`，因为 Eclipse 会将我的变量名从 更改`sb`为`sBuilder`。所以我必须按`Esc`，然后`=`。

每次我定义变量时，Eclipse 总是给我 Non-Type 提议，`Esc`拒绝它要花一分钱。如何在 Eclipse 中禁用非类型提案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T07:53:13.013

得到你想要的最简单的方法是稍微改变你的工作流程：键入“new Str”而不是“Str”，让 Eclipse 自动完成这个到“new StringBuilder()”，点击`Ctrl``2`，`L`自动创建一个分配给*构造函数前面的*局部变量，只需键入所需的名称即可。

代码完成带来的击键和选择更少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T04:32:36.107

尝试这个：

1.  打开`Window - Preferences`.
2.  去`Java - Editor - Content Assists - Advanced`。
3.  在高级页面中，`Java Proposals`默认情况下应选中。`Java Proposals`由`Non-type`和组成`Type proposals`。
4.  如果要禁用`Non Type Proposal`，请取消选中`Java Proposals`and `Java Non-Type Proposals`，然后选中`Java Type Proposals`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-29T14:16:51.857

这个问题可能会以另一种形式提供您想要的解决方案：[Stop spacebar keypress from triggering autocomplete in Eclipse](https://stackoverflow.com/questions/14297735/stop-spacebar-keypress-from-triggering-autocomplete-in-eclipse)

这里的答案为自动完成提供了一种不干扰打字消除问题的方法。我个人将我的 Eclipse 设置为在输入的每个字符上触发自动完成，然后让它说（通过源代码编辑）只有输入键接受。这允许您仅在需要时接受自动完成。

# c++ - OpenCV在轮廓中获取点

> ID：15595049
> 
> 赞同：1
> 
> 时间：2013-03-24T04:06:09.367
> 
> 标签：c++, opencv, contour, image-segmentation

到目前为止，我已经尝试找到一种方法来知道一个点（cvPoint）是否与另一个点在同一个洞中。我的解决方案是采用 cvFindContours() 的应用产生的 CvSeq，并用适当的颜色填充这些孔，以获得一个 blob 矩阵。当它完成时，知道一个点是否与另一个点属于同一轮廓只需要比较像素值，但我不知道为什么它不起作用。

不幸的是，这是一个没有答案的问题，我花了很多时间在 Google 和 StackOverflow 上（或者我可能真的不适合找到关键词）。希望有人有线索;）

```
IplImage *imgTemp = cvCreateImage(cvGetSize(getMorph()), (getMorph())->depth, 1);
    CvMemStorage *mem = cvCreateMemStorage();
    cvConvertImage(getMorph(), imgTemp);
    CvSeq *contours = NULL;
    cvFindContours(imgTemp, mem, &contours, sizeof(CvContour), CV_RETR_CCOMP, CV_CHAIN_APPROX_NONE);

    int colIt=255;
    for (CvSeq *ptr = contours; ptr != NULL; ptr = ptr->h_next) {
        if(ptr->v_next != NULL)
        {
            CvScalar color = CV_RGB( colIt,colIt,colIt);
            cvDrawContours(imgTemp, ptr->v_next, color, color, -1, CV_FILLED, 100);
            --colIt;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T09:29:34.990

基于`diip_thomas`的答案，您可能可以使用[pointPolygonTest](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=pointpolygontest#pointpolygontest)来测试 a 是否`Point2f`位于内部`contour[i]`（`contour`a是哪里，`vector<vector<Point> >`并且`i`是这个向量的第 i 个元素）。有关示例，请参[见此答案。](https://stackoverflow.com/a/11210430/1571778)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:39:11.903

最好的方法是使用 C++ API。使用 C++ API，您可以输出轮廓的层次结构，从而更容易确定它们是否属于同一轮廓。[您可以在此处](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=contours#cv.FindContours)找到 findContours 的 c++ 变体的解释。

仅通过顶部 loevel 轮廓的示例：

```
vector<vector<Point> > contours;
vector<Vec4i> hierarchy;
findContours(contourImage, contours, hierarchy, CV_RETR_CCOMP, CV_CHAIN_APPROX_SIMPLE);
int idx = 0;
for (; idx >= 0; idx = hierarchy[idx][0]) {
 drawContours(image, contours, idx, Scalar(255), CV_FILLED);
} 
```

# c - 如何存储 fscanf 以相反的顺序打印？

> ID：15595050
> 
> 赞同：-1
> 
> 时间：2013-03-24T04:06:32.587
> 
> 标签：c

嗨，我正在尝试将 fscanf 存储为一种数据类型，以便以相反的方式打印它，但无法完成。

这是我的代码

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
{
    FILE* input;
    FILE* output;

    input = fopen(argv[1],"r");
    output = fopen(argv[2],"w");

    int zipcode, population;
    while(fscanf(input,"%d %d\n",&zipcode, &population)!= EOF)
    {
        fwrite(&population, sizeof(int), 1, output);
    }
    return 0;
} 
```

这是我一直在尝试做的

```
for(i = fscanf(input,"%d %d\n",&zipcode, &population); i!=EOF; i++)
    {
        fwrite(&population, sizeof(int), 1, output);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T04:54:42.287

To print you data in revers for example `population = 123456` you want to printf like `654321`. simple way is: read `population` in a string instead a `int`. and define `strrev()` function to print string in reverse

As I understand from your comments your file is a sequence of `zipcode` and `population` something like:

```
 46804 3450103 37215 1337 47906 46849 
```

and you want to write alternative numbers back to some output file, do like this(read comments to understand code):

```
#include<stdio.h>
#include<string.h>
#define SIZE 50
void strrev(char* st) {// string reverse function()
  char* f = st;      // points to first
  char* l = st + strlen(st) -1;  // points to last char
  char temp;  
  while(f < l){
    // swap two chars in string at f & l memory
    temp = *f;
    *f = *l;
    *l = temp;

    f++;
    l--;
  }
}
int main(int argc, char* argv[]){
    if(argc!=3) return 0;
    FILE* input  = fopen(argv[1],"r");
    FILE* output  = fopen(argv[2],"w");
    int zipcode;
    char population[SIZE] = {0};
    while(fscanf(input,"%d %s\n",&zipcode, population)!= EOF){
        // population is always alternative number 
          strrev(population);    // reverse the string 
        //printf("%s\n",population);
          fprintf(output,"%s ",population);  // write in output file
    }
    return 1;
} 
```

And this works as follows:

```
:~$ cat inputfile 
 46804 3450103 37215 1337 47906 46849
:~$ ./a.out  inputfile outputfile
~$ cat outputfile 
3010543 7331 94864 
```

This is one kind of simple solution.

**EDIT** Because you are commenting you need binary dump file. So I think you need outfile in binary formate: Just open output file in binary mode and use write function. For this I am writing a partial code(*again read comments*):

```
FILE* output  = fopen(argv[2],"wb");  
    //                             ^  open in write binary mode
int val;   // an extra variable int
while(fscanf(input,"%d %s\n",&zipcode, population)!= EOF){
      strrev(population);   // revers string        
      val = atoi(population);  // convert strint to int
      fwrite(&val,sizeof(int),1,output); // write in binary file
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T04:31:45.820

我认为您错过了 fscanf 的要点（提供可移植且与机器无关的数据输入），因为`int`您无法移植地输出系统上与机器相关的内部表示。

您如何从 200 中获得“2”？`200 / 100`结果为 2。这与从 256 中得到“2”有什么不同吗？

您如何从 256 中获得“5”？您是否曾经使用模 ( `%`) 运算符来获得除法的余数？`256 % 100`结果为 56。`56 / 10`结果为 5。

“6”呢？6和2怎么换？假设您已经使用上面的算法将 2 提取到“100 的倍数”列中，将 6 提取到“1 的倍数”列中，您不能交换它们以使 6 位于“的倍数”中吗？一百”列和两个位于“一的倍数”列？您可以使用这种方法以小端、大端或您喜欢的任何混合端方式便携式输出……还有一种相反的方法可以以小端、大端或您喜欢的任何混合端方式便携式输入。你能解决吗？

你如何从 0x1f23 中得到 0x1f？你如何从那个数字中得到 0x23？有趣的是，您可以使用相同的方法（除法和模数）提取这些“字节”（技术上的八位字节），但基数不同：0x100 代替 10、0x10000 代替 100、0x1000000 代替 1000 等。事实上，这对于大多数数字系统都是如此：二进制，八进制，十进制，十六进制......也许一个更有趣的实验可能是实现便携式基负两个输入/输出，对于 LSB（最低有效位优先）和 MSB（最高有效位优先） .

*编辑*：事实上，有一种更简单的方法可以实现您在评论中描述的结果：获取您的整数模十，并将其打印为十进制数字。然后将您的整数除以 10 并继续将此数字作为您的整数。重复这两个步骤，直到您的整数为零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T08:01:56.023

要转换字节序，你可以参考这个链接：[convert big endian to little endian in C [without using provided func]](https://stackoverflow.com/questions/2182002/convert-big-endian-to-little-endian-in-c-without-using-provided-func)

否则，您可以参考下面的函数作为示例

```
int convert_endian(int n)
{
    int num = 0;
    while(n > 0) {
        num = (num * 10) + (n %10);
        n = n / 10;
    }
    return num;
} 
```

# android - Android Horizo ntalScrollView snap

> ID：15595059
> 
> 赞同：2
> 
> 时间：2013-03-24T04:07:21.913
> 
> 标签：android, scroll, element, center, horizontalscrollview

所以我有一个水平滚动视图，我想尝试添加一个捕捉效果，它基本上是一个元素的中心。到目前为止，我基本上都是用 XML 完成的。

```
<HorizontalScrollView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:scrollbars="none" > 
```

然后我在里面有一个 LinearLayout。那么我该如何制作 LinearLayout 内的元素呢？另外，有没有办法让布局从中间元素开始？因此，当您看到滚动条时，您可以从一开始就向左或向右滚动。对此有任何帮助将不胜感激！多谢你们！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T04:29:36.940

为什么不使用 viewpager ( [http://developer.android.com/reference/android/support/v4/view/ViewPager.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.html) )？但是如果您坚持使用水平滚动视图，那么您可以像这样遵循一些教程

> - [http://www.dev-smart.com/archives/34](http://www.dev-smart.com/archives/34)
> 
> - [http://blog.velir.com/index.php/2010/11/17/android-snapping-horizo​​ntal -scroll/](http://blog.velir.com/index.php/2010/11/17/android-snapping-horizontal-scroll/)
> 
> - [http://androidprogrammingmadeeasy.blogspot.com/2011/08/creating-custom-horizo​​ntal -scroll-view.html](http://androidprogrammingmadeeasy.blogspot.com/2011/08/creating-custom-horizontal-scroll-view.html)

# asp.net - Sharepoint 2013 客户端对象模型身份验证

> ID：15595060
> 
> 赞同：0
> 
> 时间：2013-03-24T04:07:30.263
> 
> 标签：asp.net, sharepoint, authentication, sharepoint-clientobject

我需要执行 Sharepoint 2013 客户端对象模型身份验证。

[http://vrdmn.blogspot.com.au/2013/01/authenticating-net-client-object-model.html](http://vrdmn.blogspot.com.au/2013/01/authenticating-net-client-object-model.html)

我正在使用未安装 Sharepoint 客户端程序集的共享托管服务 ( [http://www.arvixe.com/ )。](http://www.arvixe.com/)

如何将相关的客户端程序集部署到 bin 目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-05T13:19:32.700

您可以获得一个可再发行组件，您可以将其安装在托管机器上：

只需从此链接下载 MSI：http: [//www.microsoft.com/en-in/download/details.aspx?id=35585](http://www.microsoft.com/en-in/download/details.aspx?id=35585)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T08:54:19.543

如果您无法部署客户端 DLL，而只能部署您自己的 dll，则必须将客户端 dll 合并到您自己的 dll 中。您可以使用名为[ilmerge.exe](http://research.microsoft.com/en-us/people/mbarnett/ilmerge.aspx)的工具来执行此操作。
希望这可以帮助！

# c# - 填充 MemoryStream 时出现 OutOfMemoryException：在 16GB 系统上分配了 256MB

> ID：15595061
> 
> 赞同：21
> 
> 时间：2013-03-24T04:07:50.593
> 
> 标签：c#, asp.net, memory, out-of-memory

我在安装了 16GB RAM 的 64 位 Windows 7 机器上的开发 IIS 服务器（来自 VS2010 IDE）上运行以下方法：

```
public static MemoryStream copyStreamIntoMemoryStream(Stream stream)
{
    long uiLen = stream.Length;
    byte[] buff = new byte[0x8000];

    int nSz;
    MemoryStream ms = new MemoryStream();
    try
    {
        while ((nSz = stream.Read(buff, 0, buff.Length)) != 0)
        {
            ms.Write(buff, 0, nSz);
        }
    }
    finally
    {
        Debug.WriteLine("Alloc size=" + ms.Length);
    }

    return ms;
} 
```

我得到了`System.OutOfMemoryException`这条线：

```
ms.Write(buff, 0, nSz); 
```

当分配 268435456 个字节时抛出：

> 分配大小=268435456

这是 0x10000000 或 256 MB。所以我想知道是否需要设置一些全局设置才能使其工作？

这是该项目的配置设置的屏幕截图： ![在此处输入图像描述](../Images/320a7c407a8ea28a8430138737c4672a.png)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-24T10:02:59.000

**Short answer** - dev server is 32bit process.

Long answer for "why just 256Mb?"

First of all, let's understand how it works.

MemoryStream has internal byte[] buffer to keep all the data. It cannot predict exact size of this buffer, so it just initializes it with some initial value.

Position and Length properties don't reflect actual buffer size - they are logical values to reflect how many bytes is written, and easily may be smaller than actual physical buffer size.

When this internal buffer can not fit all the data, it should be "re-sized", but in real life it means **creating new buffer** twice as size as previous one, and then copying data from old buffer to new buffer.

So, if the length of your buffer is 256Mb, and you need new data to be written, this means that .Net need to find yet another 512Mb block of data - having all the rest in place, so heap should be at least 768Mb on the moment of memory allocation when you receive OutOfMemory.

Also please notice that by default no single object, including arrays, in .Net can take more than 2Gb in size.

Ok, so here is the sample piece which simulates what's happening:

```
 byte[] buf = new byte[32768 - 10];

        for (; ; )
        {
            long newSize = (long)buf.Length * 2;
            Console.WriteLine(newSize);

            if (newSize > int.MaxValue)
            {
                Console.WriteLine("Now we reach the max 2Gb per single object, stopping");
                break;
            }

            var newbuf = new byte[newSize];
            Array.Copy(buf, newbuf, buf.Length);
            buf = newbuf;
        } 
```

If it built in x64/AnyCPU and runs from console - everything is ok.

If it built across x86 - it fails in console.

If you put it to say Page_Load, built in x64, and open from VS.Net web server - it fails.

If you do the same with IIS - everything is ok.

Hope this helps.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-24T04:14:25.960

如果您使用默认的 VS 开发服务器，则您正在 x86/32 位进程中运行代码。如果您使用的是完整的 IIS - 很可能在 IIS 中，特定的 AppPool 被配置为在 x86（32 位模式）下运行，因此地址空间非常有限（2GB，除非您将应用程序标记为大地址感知）。

如果是 IIS，请确保您已将应用轮询配置为运行 x64（不确定默认值是什么）。确保您的代码目标设置为 AnyCPU 或 x64。

对于独立的 C# 应用程序 - 默认情况下，它们使用 x86 或 AnyCPU/Prefer x86 编译 - 将目标平台更改为 x64。

要获得对 IIS 的 x64 支持，您可以从[下载 IIS 8.0 Express](http://www.microsoft.com/en-us/download/details.aspx?id=34679)[安装完整的 IIS](http://www.iis.net/learn/install/installing-iis-7/installing-iis-on-windows-vista-and-windows-7)或安装 IIS Express 8.0（Windows 7 附带的 7.5 仅为 32 位）。

旁注：

*   如果您刚刚安装了完整的 IIS，请确保更新您的解决方案以将 IIS 用于站点的主机。
*   我没有机器来检查是否有任何额外的步骤需要对 IIS Express 使用 x64 支持。看看这个问题 - [Can't get IIS Express 8 beta to run website as 64-bit process](https://stackoverflow.com/questions/10202047/cant-get-iis-express-8-beta-to-run-website-as-64-bit-process) - 因为它可能会给你一些想法。
*   您也可以根据此处的建议尝试构建自己的 x64 版本的开发服务器 - [Visual Studio 2010 WebDev WebServer (Cassini) 64 位兼容吗？](https://stackoverflow.com/questions/1890582/is-visual-studio-2010-webdev-webserver-cassini-64-bit-compatible)

# c# - 从数据库中动态添加 jQuery Tabs 和 FullCalendars

> ID：15595064
> 
> 赞同：0
> 
> 时间：2013-03-24T04:08:28.273
> 
> 标签：c#, jquery, jquery-ui, asp.net-mvc-4, fullcalendar

我有一个带有 jquery 选项卡的视图，每个选项卡都包含一个 FullCalendar 对象。每个全日历都填充了特定员工的事件。这一切都很好。问题是，每当我向数据库添加新员工时，我想在该选项卡中添加一个新选项卡和一个新日历。我不知道该怎么做，任何建议都会很棒！我没有包含代码，因为我认为它不是很相关，但如果需要，我肯定会。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T04:36:18.477

很简单，您只需动态添加 lis 和 div，如下所示。您必须编写一个 SQL 来从数据库中获取员工人数。然后循环如下。

```
for(count of the employees taken from the db){
  <li><a href="#tabs-count">EMP count</a></li>}

for(count of the employees taken from the db)
  {
     add divs here
  } 
```

在 div 里面你可以写任何你想要的东西。

这是基本逻辑以及应该如何做。

# php - 将一个表格、两列 PHP 关联数组打印为三个并排、两列的表格

> ID：15595069
> 
> 赞同：0
> 
> 时间：2013-03-24T04:09:51.497
> 
> 标签：php, containers, html, html-table

我使用以下内容从 PHP 中的关联数组打印一个 15 行、两列的表：

```
<table id="freq-table" class="table-list" cellspacing="0" cellpadding="10">
<tbody>
    <?
    $rowCount = 0;
    foreach($word_frequency as $word => $frequency) if ($rowCount++ < 15) {?>
        <tr>
            <td><? echo $word; ?></td>
            <td<? echo $frequency; ?></td>
        </tr>
    <?}?>
</tbody>
</table> 
```

它工作正常，但在页面上占用了太多垂直空间。如何将其格式化为三个五行两列的并排表格，第一组具有数组项 1-5，第二组为 6-10，最后一组为 11-15？（参考下图）：

```
key1  value1  |  key6   value6   |  key11   value11
key2  value2  |  key7   value7   |  key12   value12
...
...
key5  value5  |  key10  value10  |  key15   value15 
```

我尝试了各种表格、div、容器和多循环实验，结果非常混合（和不合适）。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T04:50:03.973

由于您还可以使用多列来实现这种视觉效果，因此您可能需要提前格式化数据以使生成表格的代码更简洁。

```
<?php
  // Format the array data so each row contains all of the columns needed
  $rows = array();
  $max_per_column = 5;
  $max_words = 15;
  $rows = array_pad($rows, $max_per_column, array());
  $count = 0;
  foreach ($word_frequency as $word => $frequency) {
    if ($count >= $max_words) {
      break;
    }
    array_push($rows[$count % $max_per_column], $word, $frequency);
    $count++;
  }
?>
<table id="freq-table" class="table-list" cellspacing="0" cellpadding="10">
  <tbody>
    <?php
      foreach ($rows as $cols) {
        echo '<tr><td>' . implode('</td><td>', $cols) . '</td></tr>';
      }
    ?>
  </tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T04:31:00.527

唯一的方法是使用数字键。例如

```
 $word_frequency[0] = array();
 $word_frequency[0]['word'] = "some word";
 $word_frequency[0]['frequency'] = 10;
 ...
 $word_frequency[15] = array();
 $word_frequency[15]['word'] = "some other word";
 $word_frequency[15]['frequency'] = 14; 
```

一旦你有了你的数组，你可以重复循环如下

```
<table id="freq-table" class="table-list" cellspacing="0" cellpadding="10">
  <tbody>
<?
$rowCount = 0;
 for($i = 0; $i <= 5; $i++) { 
    $word[0] = $word_frequency[$i]["word"];
    $frequency[0] = $word_frequency[$i]["frequency"];
    $word[1] = $word_frequency[$i + 5]["word"];
    $frequency[1] = $word_frequency[$i + 5]["frequency"];
    $word[2] = $word_frequency[$i + 10]["word"];
    $frequency[2] = $word_frequency[$i + 10]["frequency"];
    ?>
     <tr>
    <?
    for($x = 0; $x <= 2; $x++ ){
 ?>

        <td><? echo $word[$x]; ?></td>
        <td<? echo $frequency[$x]; ?></td>

    <?
    }
    ?>
     </tr>

    <?
  }
    ?>
 </tbody>
 </table> 
```

每个 $i 循环创建行，而 $x 循环创建列。当然，这假设您至少有 15 个项目，并且您将只创建 5 行和 3 列键/值对。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T04:32:17.167

尝试一些类似的东西。

```
<table width="100%">
<tr>
<?php
    $rowCount = 0;
    foreach($word_frequency as $word => $frequency) if ($rowCount < 15) { ?>
   <?php if($rowCount % 5 == 0) {  ?>
     <td><table border=1>
   <?php } ?>                   
       <tr>
         <td><?php echo $word; ?></td>
         <td><?php echo $frequency; ?></td>
       </tr>
       <?php if($rowCount % 5 == 4) {  ?>
     </table></td>
   <?php } ?>                   
<?php $rowCount++; } ?>
</tr>
</table> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T04:38:26.410

好吧，如果我这样做，我可能会使用带有 css 列的 ul ：D

[http://davidwalsh.name/css-columns](http://davidwalsh.name/css-columns)

但是，这不是一件非常“编程”的事情。

您不必按顺序遍历数组可能会有所帮助。

如果你看看你有什么，索引有一个模式：

我 + 0x，我 + 1x，我 + 2x，...

其中 x 是您的项目数除以列数。

当 i = total / x 时你停止迭代

很抱歉太累了，无法为您编写代码，但要点是：

```
$myarray = [1 ... 15];
$columns = 3;

$arrayKeys = array_keys($myarray);
$total = count($array);
$x = floor $total  / $column;

for ($i = 0; $i > $x; $i += $x + 1 ){
  echo $arrayKeys[$i] . " - " . $myarray($arrayKeys[$i]);
  echo $arrayKeys[$i + $x] . " - " . $myarray($arrayKeys[$i + $x]);
  echo $arrayKeys[$i + ($x * 2) ] . " - " . $myarray($arrayKeys[$i + ($x * 2)]);
} 
```

或者类似的东西......这不是我的想法，我认为它有一些问题，但你应该能够将它打造成有效的东西。

# php - 仅在不存在时插入

> ID：15595074
> 
> 赞同：0
> 
> 时间：2013-03-24T04:11:10.663
> 
> 标签：php, mysql, multithreading, insert

**大家好！**

我们正在开发一个多线程应用程序。

我们需要将信息插入到 MySQL 数据库中，前提是它之前没有插入过。

当前的 SQL 查询：

```
INSERT INTO core_links SET scan_id = '$scan->id', address = '$link_new' 
```

每秒插入了 600 多条记录，我想避免以前使用选择查询。任何可能的解决方案？

**提前致谢！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T04:15:07.187

[`INSERT IGNORE`](http://dev.mysql.com/doc/refman/5.1/en/insert.html)就是你要找的。

`INSERT IGNORE INTO core_links SET scan_id = '$scan->id', address = '$link_new'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T04:13:43.533

如果表的主键是 scan_id 和地址的组合（或者可能只有 scan_id），那么表本身将拒绝重复值。

# c - 在点四叉树上插入特定值时出错

> ID：15595082
> 
> 赞同：0
> 
> 时间：2013-03-24T04:12:46.073
> 
> 标签：c, quadtree

首先，对不起，如果那里的代码很大。我将尝试模块化以使其简单。其次，这是一个奇怪的错误，所以我在示例中使用了一个直观的 main，如果有人想测试它。我希望它在代表递归象限的四叉树上插入点。如果插入的点碰到上限，则将其除以 4，并且将限制分为 4 个不同的象限。我试图插入点 (16.0,16.0) （双）但不起作用。我尝试过的所有其他点都可以正常工作（它是一个双变量，所以很明显，我不能测试所有的值）。当它击中上限时，完美地划分和新点。只有 16,16 没有（我尝试了很多数字......几十个）。编辑：当我使四叉树变大时，它开始不 t 插入一些点（即使是之前插入的一些点，当它较小时）。好的：这是最高级别的功能：

```
//This will insert on a tree (that have a root)
    void insert_dot(Tree * A, Dot b){
        if (b.x<0 || b.y<0.0){
            printf("Invalid coordinates");
            return;
        }
        Quad_node * Aux;
        if (A->start_->key->used_capacity > A->start_->key->max_capacity){
            printf("invalid result\n");
        }
        else if (A->start_->key->used_capacity < A->start_->key->max_capacity){
            A->start_->key->dots_[(A->start_->key->used_capacity)].x=b.x;
            A->start_->key->dots_[(A->start_->key->used_capacity)].y=b.y;
            A->start_->key->used_capacity++;
        }
        else{
            Aux=return_leaf_tree(A,b);
            insert_dot_quadrant(Aux,b);
        }

    }
//This is the auxiliar function
void insert_dot_quadrant(Quad_node * A,Dot b ){
    Quad_node * Aux,* Aux2;
    Dot * aux=(Dot*)malloc(A->key->max_capacity*sizeof(Dot));
    int i;
    if (A->key->used_capacity > A->key->max_capacity){
        printf("invalid result\n");
        return;
    }
    else if (A->key->used_capacity < A->key->max_capacity){
        A->key->dots_[(A->key->used_capacity)].x=b.x;
        A->key->dots_[(A->key->used_capacity)].y=b.y;
        A->key->used_capacity++;
    }
    else{
        for(i=0;i<A->key->max_capacity;i++){
            aux[i].x=A->key->dots_[i].x;
            aux[i].y=A->key->dots_[i].y;
            A->key->dots_[i].x=-1.0;
            A->key->dots_[i].y=-1.0;
        }
        Aux=divide_quadrant(A);
        for (i=0;i<A->key->max_capacity;i++){
            Aux2=return_leaf_node(Aux,aux[i]);
            insert_dot_quadrant(Aux2,aux[i]);
        }
    }
    free(aux);
} 
```

辅助功能（相关）：

```
Quad_node * return_leaf_tree(Tree * A,Dot b){
    Quad_node * Aux=(Quad_node_Pointer)malloc(sizeof(Quad_node));
    Aux=return_leaf_node(START_(A),b);
    return (Aux);
}

Quad_node * return_leaf_node(Quad_node * A,Dot b){
    if (A==NULL){
        printf("invalid node\n");
        return (NULL);
    }
    Quad_node * Aux,*Aux2;
    Aux=(Quad_node_Pointer) malloc (sizeof(Quad_node));
    Aux2=(Quad_node_Pointer) malloc (sizeof(Quad_node));
    Aux=A;
    Aux2=A;
    while (Aux!=NULL && Aux->key->used_capacity == Aux->key->max_capacity){
        if (b.x==16)
            printf("16 entered\n");
        if ((Aux->key->max.x)/2 <= b.x && b.x <= Aux->key->max.x  &&  (Aux->key->max.y)/2 <= b.y && b.y <= Aux->key->max.y){
            Aux->father=Aux;
            Aux=Aux->child[0];
            if (b.x==16)
                printf("16 here on child[0]\n");
        }
        else if (0 <= b.x && b.x < (Aux->key->max.x)/2  &&  (Aux->key->max.y)/2 <= b.y && b.y <= (Aux->key->max.y)){
            Aux->father=Aux;
            Aux=Aux->child[1];
            if (b.x==16)
                printf("16 here on child[1]\n");
        }
        else if (0 <= b.x && b.x < (Aux->key->max.x)/2  &&  0 <= b.y && b.y < (Aux->key->max.y)/2){
            Aux->father=Aux;
            Aux=Aux->child[2];
            if (b.x==16)
                printf("16 here on child[2]\n");
        }
        else if ((Aux->key->max.x)/2 <= b.x && b.x <= Aux->key->max.x &&  0 <= b.y && b.y < (Aux->key->max.y)/2){
            Aux->father=Aux;
            Aux=Aux->child[3];
            if (b.x==16)
                printf("16 here on child[3]\n");
        }
        else{
            printf("x=%f , y=%f\n",b.x,b.y);
            printf("max x= %f , max y=%f\nmin x=%f , min y=%f\n",Aux->key->max.x,Aux->key->max.y,Aux->key->min.x,Aux->key->min.y);
            printf("erro\n");
            if (b.x==16)
                printf("16 here on invalid position\n");
            return (EXIT_SUCCESS);
        }
        if (Aux!=NULL){
            Aux2=Aux;
        }

    }
    return (Aux2);
}

Quad_node * divide_quadrant(Quad_node * A){
    if(A==NULL){
        printf("invalid Quad_node");
        return (NULL);
    }
    int i;
    Dot max_aux,min_aux;
    for (i=0;i<4;i++){
        A->child[i]=(Quad_node_Pointer) malloc (sizeof(Quad_node));
    }
    max_aux.x= (A->key->max.x);
    min_aux.x=(A->key->max.x)/2;
    max_aux.y=(A->key->max.y);
    min_aux.y=(A->key->max.y)/2;
    A->child[0]->key=Create_quadrant(A->key->max_capacity,max_aux,min_aux);
    max_aux.x=(A->key->max.x)/2;
    min_aux.x=0;
    max_aux.y=A->key->max.y;
    min_aux.y=(A->key->max.y)/2;
    A->child[1]->key=Create_quadrant(A->key->max_capacity,max_aux,min_aux);

    max_aux.x=(A->key->max.x)/2;
    min_aux.x=0;
    max_aux.y=(A->key->max.y)/2;
    min_aux.y=0;
    A->child[2]->key=Create_quadrant(A->key->max_capacity,max_aux,min_aux);

    max_aux.x=A->key->max.x;
    min_aux.x=(A->key->max.x)/2;
    max_aux.y=0;
    min_aux.y=(A->key->max.y)/2;
    A->child[3]->key=Create_quadrant(A->key->max_capacity,max_aux,min_aux);
    return (A);
} 
```

主要功能和其他不太相关的功能（我几乎可以肯定它们 100% 没问题。只是为了运行主要功能）：

```
Quadrant * Create_quadrant (int capacity,  Dot max_, Dot min_){
    Quadrant * A;
    A=(Quadrant*)malloc(sizeof(Quadrant));
    if (A==NULL){
        printf("null value");
        return (NULL);
    }
    A->dots_ = (Dot*) malloc (capacity * sizeof(Dot));
    int i;
    for (i=0;i<capacity;i++){
        A->dots_[i].x=-1;
        A->dots_[i].y=-1;
    }
    A->max_capacity=capacity;
    A->used_capacity=0;
    A->max.x=max_.x;
    A->max.y=max_.y;
    A->min.y=min_.y;
    A->min.x=min_.x;
    return (A);
}

Tree * Create_tree (int capacity,Dot max){
    Tree * A;
    A=(Tree*)malloc(sizeof(Tree));
    Dot min;
    min.x=0;
    min.y=0;
    A->start_=(Quad_node_Pointer) malloc (sizeof(Quad_node));
    A->start_->key=Create_quadrant(capacity,max,min);
    return (A);
}

void tree_walk (Quad_node * a){
    int i;
    if (a!=NULL){
        for(i=0;i<a->key->used_capacity;i++){
            if (a->key->dots_[i].x >= 0)
                printf("x= %f y=%f\n", a->key->dots_[i].x,a->key->dots_[i].y);
        }
        for(i=0;i<4;i++){
            if (a->child[i]!=NULL){
                printf("child[%i] not null\n",i);
                tree_walk(a->child[i]);
            }
            else
                printf("null child[%i] node\n",i);
        }
    }
    else
    return;
}

void read_tree (Tree * A){
    tree_walk(START_(A));
}

Quad_node * START_(Tree * A){
    return A->start_;
} 
```

主要的：

```
int main(int argc, char *argv[])
{
    printf("\n---------------\n");
    Tree * A;
    int i;
    Dot b,max,teste[12];
    b.x=5.0;
    b.y=6.0;
    max.x=30;
    max.y=30;
    A = Create_tree(8,max);
    for (i=0;i<12;i++){
        teste[i].x=(double)2.0*i;
        teste[i].y=(double)2.0*i;
        printf("dot %i:\n x=%f , y=%f\n",i,teste[i].x,teste[i].y);
        insert_dot(A,teste[i]);
    }
    insert_dot(A,b);
    printf("dot 10:\n x=%f , y=%f\n",b.x,b.y);
    printf("\n---------------\n\n");
    return_leaf_node(A->start_,teste[9]);
    read_tree(A);
    printf("success\n");
    free(A);
    return EXIT_SUCCESS;
} 
```

OBS：只能插入正值。任何人都可以帮助我吗？感谢阅读/回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T00:12:50.187

发现了问题。好吧，只是出于好奇（也许也会有人遇到问题），问题是：

在 void insert_dot_quadrant 上：

```
Dot * aux=(Dot*)malloc(A->key->max_capacity*sizeof(Dot));
....
else{
    for(i=0;i<A->key->max_capacity;i++){
        aux[i].x=A->key->dots_[i].x;
        aux[i].y=A->key->dots_[i].y;
        A->key->dots_[i].x=-1.0;
        A->key->dots_[i].y=-1.0;
    }
    Aux=divide_quadrant(A); 
```

这应该是：

```
Dot * aux=(Dot*)malloc(((A->key->max_capacity)+1)*sizeof(Dot));

 ....
     else{

for(i=0;i<A->key->used_capacity;i++){
            aux[i].x=A->key->dots_[i].x;
            aux[i].y=A->key->dots_[i].y;
            A->key->dots_[i].x=-2.0;
            A->key->dots_[i].y=-2.0;
        }
        aux[A->key->used_capacity].x=b.x;
        aux[A->key->used_capacity].y=b.y;

        Aux=divide_quadrant(A); 
```

当象限已满时，我没有插入新点。只是将旧的划分为新的 4 个象限而忘记了新的点。

# pca - Matlab中的PCA - 主要成分是否重新排列？

> ID：15595093
> 
> 赞同：0
> 
> 时间：2013-03-24T01:28:10.203
> 
> 标签：pca, matlab

我正在尝试对一些波动率数据进行 PCA，假设我可以提出如下模型：

```
volatility = bata0 + beta1*x + beta2* x^2 
```

其中 x 是一些观察值，例如金钱等。所以在 Matlab 中，我所做的就是说`Y=[ones x x^2]`然后做`pca(Y)` ，由于某种原因，我的系数矩阵中的第一行总是类似于 0 0 1，即除了最后一列之外的其他任何地方都为 0，并且 atent 的输出总是显示无论我如何更改模型，第一行的最高值也是如此。

显然，这不可能是每个模型中的最后一项都可以通过等式中的最后一项很好地解释的情况。如果我删除 Y 中的常数项（即 Y= [xx^2] 则系数矩阵的第一行变得更正常（即，到处都是非零值）。

所以我的问题是：

1.  我做 PCA 的方式对吗？
2.  PCA 是否自动重新排列主成分，因此系数矩阵中除最后一列除 1 外全为零的第一行可能不一定代表方程中的最后一项，并且
3.  如果错了，正确的做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T13:00:28.503

From Matlab's documentation for princomp:

> COEFF = princomp(X) performs principal components analysis (PCA) on the n-by-p data matrix X, and returns the principal component coefficients, also known as loadings. Rows of X correspond to observations, columns to variables. COEFF is a p-by-p matrix, each column containing coefficients for one principal component. **The columns are in order of decreasing component variance.**

# apache - 轴 2 和 bitnami

> ID：15595100
> 
> 赞同：1
> 
> 时间：2013-03-24T04:16:11.683
> 
> 标签：apache, axis2, bitnami

我刚刚安装了 Bitnami Namp Stack 5.4.13-0。我想让轴 2 启动并与 apache 服务器一起运行。这是否包含在 Bitnami 安装中？如果没有，我需要做什么才能让轴 2 与 bitnami 一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:13:38.427

你需要一个像 Apache Tomcat 这样的 Servlet 容器。您无法在 Apache Http Server 上启动 axis2 ws。Bitnami 还提供了 tomcat 堆栈[http://bitnami.com/stack/tomcat](http://bitnami.com/stack/tomcat)

# ios - 滚动时iOS链接背景颜色发生变化

> ID：15595101
> 
> 赞同：1
> 
> 时间：2013-03-24T04:16:33.743
> 
> 标签：ios, css

`a`在我的网站上，我有一个包含在链接中的产品列表，`display:block`因此整个产品及其详细信息都可以点击。

该`a`链接没有，`hover` `background-colour`但它有一个`active` `background-colour`所以bg颜色改变某人点击链接..

我遇到的问题是在我的 iPhone 上，当我滚动时，`a`链接的背景颜色会变为`active`状态的 bg 颜色。当滚动浏览产品时项目背景颜色发生变化时，这非常烦人。这是为什么？阻止它发生并仍然改变`background-colour`曾经点击过的 iOS 的最佳方法是什么？我是唯一遇到这个问题的人吗？

如果您需要 jsfiddle，请告诉我。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T04:29:12.100

我在我的应用程序中这样做的方式是明确提及所有状态，因此没有歧义。我的 CSS 有点像这样 -

```
a:link {
    text-decoration: none;
    color: black;
    -webkit-tap-highlight-color: #ffcc99;
}

a:visited {
    text-decoration: none;
    color: black;
    -webkit-tap-highlight-color: rgba(0,0,0,0); 
}

a:hover   { //technically not required to mention hover
    color:black;
}

a:active  {
    color:grey;

} 
```

# jquery - 当复选框被选中并具有garlic.js的持久值时触发事件

> ID：15595102
> 
> 赞同：1
> 
> 时间：2013-03-24T04:16:40.837
> 
> 标签：jquery, html, input, checkbox

我使用garlic.js 来保存复选框的输入状态（[http://garlicjs.org/](http://garlicjs.org/)）。它工作得很好，但由于某种原因，jQuery 无法识别在页面重新加载后由garlic.js 检查输入的时间。

我可能在这里遗漏了一些东西，但不确定它是什么。

例如，如果我`#myInput:checked ~ .wonka {width: 200px}`在我的样式表中设置，Css 会识别它并将样式应用于`.wonka`每次页面加载并且输入通过大蒜获取其值时。当然，使用兄弟选择器是非常有限的（例如，如果类在主体上，我不能这样做）。

在 jQuery 中做类似的事情是行不通的：

```
// This is not working

if ($("#myInput").is(":checked")) {
    $("body").addClass("wonka");
}

// Neither this

if ($("#myInput").attr("checked")==true) {
    $("body").addClass("wonka");
} 
```

注意：这应该在页面加载或刷新时立即触发，而不是在用户单击时触发。关键是在页面刷新（或从其他选项卡加载）时再次触发它，这样它就与刷新后相同。

当复选框被“单击”或“悬停”时，我确实可以触发其他事件。像这样，例如：

```
$("#myInput").on("change", function(){
    $("body").addClass("wonka");
}); 
```

但是，这又不是问题。为什么 jQuery 无法识别输入状态？，我使用了错误的代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T15:08:40.497

这是问题的最终代码。正如@leemo 所说，问题的发生是因为garlic.js 在DOM 准备好后检查了输入，所以这里的代码在窗口加载时触发，避免了这个问题。

```
$(window).on("load",function() {
    //the .is(":checked) and .attr("checked")==true methods works fine here too
    if ($('#myInput').get(0).checked == true) {
        $("body").addClass("wonka");
    }  
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T05:51:29.090

我的怀疑是，在调用 $(document).ready() 之后，重新加载garlic.js 在页面上应用了保存的状态。因此，当 jQuery 检查状态时，它实际上是未检查的，因此是错误的。

看看延迟测试。也许`$(window).on("load", function(){...})`用作替代品。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T04:25:23.193

使用 DOM 对象来确定是否选中了复选框始终是一致的。在 jQuery 中，你可以这样做：

```
if ($('#myInput').get(0).checked == true) {
  // element is checked
} 
```

不一定保证其他方法适用于所有浏览器/jQuery 版本。看到这篇有用的文章[Setting "checked" for a checkbox with jQuery?](https://stackoverflow.com/questions/426258/how-do-i-check-a-checkbox-with-jquery-or-javascript) .

# google-app-engine - Windows 7 上的 Google App Engine 数据存储在哪里？

> ID：15595103
> 
> 赞同：1
> 
> 时间：2013-03-24T04:16:42.460
> 
> 标签：google-app-engine

Windows 7 上的 Google App Engine 数据存储在哪里？此问题的以下答案适用于早期版本的 Windows，并且 Windows 7 上的等效位置似乎不包含数据存储。

在我的 Windows 机器上，数据存储文件存储在：C:\Documents and Settings(yourusername)\Local Settings\Temp 它将具有 .datastore 扩展名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T04:24:26.807

该文件可能与 App Engine 数据存储区无关。

在 App Engine 开发项目中，本地数据存储区保存在以下路径下：

```
PATH_TO_WAR_FOLDER\WEB-INF\appengine-generated\local-db.bin 
```

在同一个文件夹中，您可能会发现各种名称短而神秘的文件。这些是存储在您计算机上的 blob 和云存储文件。

# javascript - 获取 RAILS 中动态选择字段的选定选项/值

> ID：15595104
> 
> 赞同：0
> 
> 时间：2013-03-24T04:16:57.013
> 
> 标签：javascript, jquery, ruby-on-rails

我这里`select_field`有一个动态ID。

为什么是动态的？因为我使用了嵌套字段/表单。

```
<%= f.select :category_id, Category.all.map{ |c| [c.code, c.id] }, {prompt:""},{class:"cat-code"} %> 
```

我这里有一个 JS 代码，它只是获取每个选择字段的动态 id。

```
 <%= javascript_tag do %>
                $(function() {

                    $(".cat-code").change(function(){          

                        var getID = this.id;
                        var value =  $("getID").val()

                        alert(value);

                        if (value == "1"){
                            $(".div1").show();
                            $(".div2").hide();
                        }

                        else if (value == "2"){
                            $(".div1").hide();
                            $(".div2").show();
                        }

                    });

                });
        <% end %> 
```

我可以使用..获取ID

```
alert(getID); 
```

但是获得选定的值会`undefined`导致div`show()`也`hide()`无法正常工作。

任何解决方法将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T04:21:49.430

```
var value =  $("#" + getID).val() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T04:23:34.777

```
var element = $(this);
var value = element.val() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T04:24:22.033

谢谢大家，已经解决了这个问题。

```
 $(".cat-code").change(function(){          

                    var getID = this.id;
                    var value =  document.getElementById(this.id).value;

                    console.log(getID + "with a value of" + value);

                    if (value == ){
                        $(".div1").show();
                        $(".div2").hide();
                    }

                    else if (value == "2"){
                        $(".div1").hide();
                        $(".div2").show();
                    }

                }); 
```

# c++ - 如何在 C++ 中提供自定义输出流

> ID：15595117
> 
> 赞同：0
> 
> 时间：2013-03-24T04:19:23.323
> 
> 标签：c++, iostream, ostream

我正在开发一个应用程序，该应用程序需要对一系列字节进行顺序编码/解码，并在处理完它们后将它们放入流中。

`MyEncodeStream(istream)`我的计划是继承 ostream 并使用 istream提供构造函数。

我必须承认，尽管我不知道下一步该做什么，但应该重写哪些方法？这样做的标准设施是什么。

请提供这个简单案例的示例代码：

1.  从输入缓冲区中拉出一个字符
2.  char 由 char 操作`manipulationFunc(char in)`
3.  字符被放入缓冲区
4.  MyEncodeStream 停止阻塞，因此可以读取字符
5.  ostream 是否提供了一个应该被覆盖的读取函数，哪个 operator << 调用，或者 operator<< 是应该被覆盖的函数？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-24T04:44:57.927

我想通了，我很困惑。我想做的是用输入流作为构造函数的参数对输入流进行子类化，这样当读取自定义输入流时，它可以从标准输入机制中读取。我正在查找子类化输出流，这就是为什么谷歌没有找到很多结果的原因。

# javascript - Angular UI 掩码格式化输出 UNDEFINED

> ID：15595123
> 
> 赞同：1
> 
> 时间：2013-03-24T04:21:17.577
> 
> 标签：javascript, angularjs, mask

好的，我正在使用角度 ui 掩码指令。我使用的过滤器是“99:99”时间的过滤器

我正在做的是抓取输入框的 ng 模型，将其转换为字符串，循环遍历字符串，在第二位之后我添加一个“：”，然后返回格式化的字符串。但是当我这样做时，从函数返回的结果在扩展上是正确的。

假设我在输入框中输入 1212，通过使用 ui 掩码，它会在框中看起来像这样 12:12。当我调用该函数时，它会返回 12:12undefined ... 有人可以帮我吗？

[http://jsfiddle.net/edgaramaro/KWMmX/](http://jsfiddle.net/edgaramaro/KWMmX/)

这是我的代码：HTML：

```
<div ng-controller="MyCtrl">
    <input type="text" ui-mask="'99:99'" ng-model="time">{{time}}
    <br>{{convert(time)}}
</div> 
```

JS文件：

```
function MyCtrl($scope) {
    $scope.time = '';

    $scope.convert = function (input) {
        var str = input + '';
        var counter = 0;
        var newStr = '';

        while (counter <= str.length) {
            if (counter === 2) 
               newStr += ':';
            newStr += str[counter];
            counter++;
        }

    return newStr;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T05:37:45.730

它的问题在于你的`convert`功能。你可以用一个普通的旧 for 循环来简化它。

[我已经更新了你的小提琴](http://jsfiddle.net/KWMmX/1/)

另外，这是我对相关代码所做的：

```
$scope.convert = function(str){
    if(!str) return;
    var counter = 0,
        newStr = '',
        max = Math.min(str.length, 4);
    for(var i = 0; i < max; i++) {
        if(i === 2) newStr += ':';
        newStr += str[i];
    }        
    return newStr;
} 
```

# blender - 输入对话框搅拌机

> ID：15595124
> 
> 赞同：11
> 
> 时间：2013-03-24T04:21:39.670
> 
> 标签：blender, textinput, blender-2.61

如何在搅拌机中制作一个简单的输入对话框（如图所示）并处理通过 python 输入的文本。我找不到任何好的教程。

![简单的输入框](../Images/3afbe972882f8f0a8fd4bdc2f5556e27.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-25T08:12:58.233

对于对话框，[如何显示来自搅拌机脚本的消息的答案？](https://stackoverflow.com/questions/7697532/how-to-show-a-message-from-a-blender-script/7743556#7743556)可能是一个起点。

但我认为更好的方法是将输入集成到面板中，例如
![字符串示例](../Images/12e61ccd0f574dbdb23739f722b117a3.png)

为此，您必须将一个添加`StringProperty`到您的插件并将其放置在您的面板中（有关更多信息，请参阅[插件教程](http://www.blender.org/documentation/blender_python_api_2_64_9/info_tutorial_addon.html)）。基本步骤是：

```
def draw(self, context) :
    col = self.layout.column(align = True)
    col.prop(context.scene, "my_string_prop") 
```

...

```
def register() :
    bpy.types.Scene.my_string_prop = bpy.props.StringProperty \
      (
        name = "My String",
        description = "My description",
        default = "default"
      ) 
```

...

```
def unregister() :
    del bpy.types.Scene.my_string_prop 
```

...

您可以通过以下方式访问字符串`context.scene.my_string_prop`

还有另一种整合输入的模式。例如，当您向场景中添加文本时，您可以在**调用操作员后**更改参数并立即查看更改：

![添加文本对象](../Images/bcb4d816b6f423a74453820312d96091.png)

更改*位置*会将新创建的文本对象移动到另一个位置。我没有处理过这个，但它应该类似于上面的代码。

# javascript - 使用 Meteor 进行“拯救”

> ID：15595128
> 
> 赞同：1
> 
> 时间：2013-03-24T04:21:49.680
> 
> 标签：javascript, meteor

我喜欢 Meteor 的一件事是，在客户端完成的更新、插入和删除操作会自动在服务器端持久化。大多数时候这很棒。但有时您想使用 Meteor 的集合来进行显示逻辑，或者您希望有特定的、分阶段的“保存”，用户必须专门提交。因此，您希望继续使用集合进行渲染，但不一定希望将这些更改*保存*到数据库中。

也许一个例子将有助于说明这一点。

我有一个呈现指定地图原点的表单。

```
<template name='map'>
 <button class='select-origin'>Select Origin</button>
 {{#with currentMap}}
   {{this.latitude}} - {{this.longitude}}
 {{/with}}
</template>

Template.map.helpers({
 currentMap: function(){ return Maps.findOne(Session.get('currentMap')) };
}); 
```

当我编辑地图时，将从数据库中读取纬度和经度并进行适当的渲染。

但我也想让用户选择一个新的地图原点并*更新模板而不保存新的地图原点*。我希望用户单击地图，然后我可以使用它来更新集合*客户端*，然后更新模板。但我希望用户专门单击`save`，*然后*将新的纬度和经度保留在服务器上。这样的事情在 Backbone 中很容易（其中`set`和`save`是不同的），但在 Meteor 中似乎并不容易。

有没有人有很好的策略来处理这些情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:09:28.893

对于这类问题，我使用`Session`对象

您已经将当前地图保存在 Session 中。您可以将所有更改应用于 Session 中的对象，一旦用户单击保存，更新 MiniMongo 实例并让 Meteor 更新服务器。

我不确定该`CurrentMap`对象包含哪些属性，因为您的代码中未显示设置操作，但您似乎可以替换

```
Template.map.helpers({
 currentMap: function(){ return Maps.findOne(Session.get('currentMap')) };
}); 
```

和

```
Template.map.helpers({
 currentMap: function(){ return Session.get('currentMap') };
}); 
```

# php - 将类别名称添加到 Opencart 中的愿望清单产品

> ID：15595129
> 
> 赞同：0
> 
> 时间：2013-03-24T04:22:03.473
> 
> 标签：php, opencart

有没有办法在 Opencart v1.5.5.1 的愿望清单中列出的每个产品名称旁边添加类别名称？

我尝试将其添加到wishlist.tpl，但没有奏效：

```
<?php foreach ($categories as $category) { ?>
<li><a href="<?php echo $category['href']; ?>"><?php echo $category['name']; ?></a>
<?php } ?> 
```

还有我在另一篇文章中找到的代码，它适用于 product.tpl 模板：

```
<?php
$this->load->model('catalog/category');
$query = $this->db->query("SELECT category_id
FROM oc_product_to_category
WHERE product_id = '".$product_id."'");
$prodcategories = $query->rows;
foreach($prodcategories as $prodcategory){
$category_id = $prodcategory['category_id'];
$category_info = $this->model_catalog_category->getCategory($category_id);
$caturl = (HTTP_SERVER . 'index.php?route=product/category&path=' . $category_id); ?>
Category : <a href="<?php echo $caturl; ?>"><?php echo $category_info['name']; ?></a><br />
<?php  }  ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:25:31.580

在文件中

```
catalog/controller/account/wishlist.php 
```

在第 108 行附近的某处，在代码块之前添加 product.tpl 代码

```
$this->data['products'][] = array(
                    'product_id' => $product_info['product_id'],
                    'thumb'      => $image,
                    'name'       => $product_info['name'],
                    'model'      => $product_info['model'],
                    'stock'      => $stock,
                    'price'      => $price,     
                    'special'    => $special,
                    'href'       => $this->url->link('product/product', 'product_id=' . $product_info['product_id']),
                    'remove'     => $this->url->link('account/wishlist', 'remove=' . $product_info['product_id'])
                ); 
```

添加类别名称作为产品的属性之一，例如

```
 'categoryname' => $categoryinfoARRAY and then in the wishlist.tpl each product will have its associated categoryname . 
```

# ruby-on-rails - 如何检查文件是否完成解压

> ID：15595135
> 
> 赞同：0
> 
> 时间：2013-03-24T04:24:01.930
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个网站，我在其中上传一个 zip 文件，然后服务器端将其解压缩。我已经转移到亚马逊 S3 服务，该服务不允许解压缩之类的事情。

我想知道，有没有办法检查或监视该 zip 文件的状态，然后运行我的模型/方法以推送到 s3？我想在解压后立即运行它——否则我会尝试 cronjob 或其他东西。

我现在能想到的唯一结论是输出我认为解压缩的文件。然后选择这些文件并再次提交到上传方法。但这似乎很麻烦。

对此有什么想法吗？

# ruby-on-rails - 安装 gitlab-5.0 时遇到问题 - rake 中止

> ID：15595139
> 
> 赞同：8
> 
> 时间：2013-03-24T04:24:49.533
> 
> 标签：ruby-on-rails, ruby, gitlab

安装 gitlab-5.0 时遇到问题

[https://github.com/gitlabhq/gitlabhq/blob/5-0-stable/doc/install/installation.md#initialise-database-and-activate-advanced-features](https://github.com/gitlabhq/gitlabhq/blob/5-0-stable/doc/install/installation.md#initialise-database-and-activate-advanced-features)

```
root@ubuntu:/home/gitlab/gitlab# bundle exec rake gitlab:setup RAILS_ENV=production
rake aborted!
Access denied for user 'root'@'localhost' (using password: YES)
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/mysql2-0.3.11/lib/mysql2/client.rb:44:in `connect'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/mysql2-0.3.11/lib/mysql2/client.rb:44:in `initialize'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/mysql2_adapter.rb:16:in `new'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/mysql2_adapter.rb:16:in `mysql2_connection'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_pool.rb:315:in `new_connection'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_pool.rb:325:in `checkout_new_connection'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_pool.rb:247:in `block (2 levels) in checkout'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_pool.rb:242:in `loop'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_pool.rb:242:in `block in checkout'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_pool.rb:239:in `checkout'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_pool.rb:102:in `block in connection'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_pool.rb:101:in `connection'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_pool.rb:410:in `retrieve_connection'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_specification.rb:171:in `retrieve_connection'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_specification.rb:145:in `connection'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/model_schema.rb:308:in `clear_cache!'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/railtie.rb:104:in `block (2 levels) in <class:Railtie>'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:418:in `_run__807030537706508428__prepare__2182945095053453794__callbacks'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:405:in `__run_callback'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:385:in `_run_prepare_callbacks'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:81:in `run_callbacks'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_dispatch/middleware/reloader.rb:74:in `prepare!'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_dispatch/middleware/reloader.rb:48:in `prepare!'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/application/finisher.rb:47:in `block in <module:Finisher>'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:30:in `instance_exec'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:30:in `run'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:55:in `block in run_initializers'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:54:in `each'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:54:in `run_initializers'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/application.rb:136:in `initialize!'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/railtie/configurable.rb:30:in `method_missing'
/home/gitlab/gitlab/config/environment.rb:5:in `<top (required)>'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/backports-2.6.7/lib/backports/tools.rb:314:in `require'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/backports-2.6.7/lib/backports/tools.rb:314:in `require_with_backports'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `block in require'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:236:in `load_dependency'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/application.rb:103:in `require_environment!'
/home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/application.rb:297:in `block (2 levels) in initialize_tasks'
Tasks: TOP => gitlab:setup => environment
(See full trace by running task with --trace) 
```

有什么想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-03T21:11:23.987

如果您遵循本教程并遵循 MySQL 数据库设置的步骤，那么您已将数据库配置为使用 gitlab 作为用户名。

```
# Create a user for GitLab. (change $password to a real password)
mysql> CREATE USER 'gitlab'@'localhost' IDENTIFIED BY '$password'; 
```

但是如果您的 database.yml 文件正在尝试使用 root 凭据登录数据库。

```
production:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: gitlabhq_production
  pool: 5
  username: root
  password: "secure password"
  # host: localhost
  # socket: /tmp/mysql.sock 
```

这就是为什么您会看到该错误。更改您的 database.yml 文件以反映在教程的数据库设置部分中创建的登录。

```
production:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: gitlabhq_production
  pool: 5
  username: gitlab
  password: "$password"
  # host: localhost
  # socket: /tmp/mysql.sock 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T10:21:40.387

该部分[初始化数据库和激活高级功能](https://github.com/gitlabhq/gitlabhq/blob/5-0-stable/doc/install/installation.md#initialise-database-and-activate-advanced-features)是：

```
sudo -u git -H bundle exec rake gitlab:setup RAILS_ENV=production 
```

这意味着您应该将该命令执行为`git`，而不是 as `root`（尚未被授予访问数据库的权限）。

确保您的`database.yml`配置文件看起来像[这样](https://github.com/gitlabhq/gitlabhq/blob/5-0-stable/config/database.yml.mysql)（如果您安装了 mysql 并且想要使用 mysql 数据库）。

```
production:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: gitlabhq_production
  pool: 5
  username: root
  password: "secure password"
  # host: localhost
  # socket: /tmp/mysql.sock 
```

它确实声明了一个帐户的访问权限`root`，但这纯粹是一个声明性的*mysql*帐户（与用户无关`root`）

# haskell - Repa: ZipWith'ing over Columns

> ID：15595140
> 
> 赞同：3
> 
> 时间：2013-03-24T04:25:02.703
> 
> 标签：haskell, repa

我想知道是否有更快/更好的方法来编写以下 repa 函数

```
zipOverColumns ::  (Source r1 a, Source r2 b) 
               => (a -> b -> c) 
               -> Array r1 DIM1 a 
               -> Array r2 DIM2 b 
               -> Array D DIM2 c
zipOverColumns f x y = traverse y id lookup where
    lookup get sh@(Z :. _ :. r) = f (x ! (Z :. r)) $ get sh 
```

这是一些示例输出

```
>>> toList $ zipOverColumns (*) (fromListUnboxed (Z :. 3)      [1,2,3]) 
                                (fromListUnboxed (Z :. 2 :. 3) [4,5,6,7,8,9])
[4.0,10.0,18.0,7.0,16.0,27.0] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T10:06:01.190

在 Repa 3 上下文中，您的实现是性能最优的。您会发现以下版本更具可读性：

```
zipOverColumns2
    :: (Source r1 a, Source r2 b)
    => (a -> b -> c)
    -> Array r1 DIM1 a
    -> Array r2 DIM2 b
    -> Array D DIM2 c
zipOverColumns2 f col arr = zipWith f ccol arr
  where
    ccol = fromFunction (extent arr) (\(Z :. _ :. r) -> col ! (Z :. r)) 
```

`zipOverColumns2`也比原版快 15%，但这只是巧合。

函数`yarr`看起来像：

```
zipOverColumns
    :: (USource r1 l1 Dim1 a,
        USource r2 l2 Dim2 b, DefaultIFusion r2 l2 fr fl Dim2,
        USource fr fl Dim2 c)
    => (a -> b -> c)
    -> UArray r1 l1 Dim1 a
    -> UArray r2 l2 Dim2 b
    -> UArray fr fl Dim2 c
zipOverColumns f col arr = imapM mapF arr
  where
    mapF (r, _) b = do
        a <- col `index` r
        return $ f a b 
```

这个版本的速度要快 30% 到 85%，具体取决于列的大小（我测试了 4、8 和 1000）。玩它的[要点。](https://gist.github.com/leventov/5231268)

# android - 错误：图片从 sd 卡上传到 facebook android sdk 中的相册

> ID：15595143
> 
> 赞同：0
> 
> 时间：2013-03-24T04:25:31.313
> 
> 标签：android, facebook, image, android-sdcard

在我的 facebook android 应用程序中，我需要将图像从 sd 卡上传到 facebook 中的特定相册。我可以创建一个与 sd 卡文件夹同名的相册。但是在创建专辑之后它会得到一个异常——android.os.NetworkOnMainThreadException。这是我的代码-

```
private void uploadImage() 
{
    String ExternalStorageDirectoryPath = Environment
              .getExternalStorageDirectory()
              .getAbsolutePath();

    String targetPath = ExternalStorageDirectoryPath + "/Friends/";

    File targetDirector = new File(targetPath);

    File[] files = targetDirector.listFiles();

    for (File file : files)
    {      
        Bitmap bmp = BitmapFactory.decodeFile(file.getAbsolutePath());
        ByteArrayOutputStream stream = new ByteArrayOutputStream();
        bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
        final byte[] data = stream.toByteArray();

        facebook.authorize(MainActivity.this, new String[]{ "user_photos,publish_checkins,publish_actions,publish_stream"},new DialogListener()         
        {                   
            @Override                   
            public void onComplete(Bundle values)
            {

                if(verify)
                {
                    myAlbumId = createAlbumName();
                    verify=false;
                }
                uploadImagesToAlbum(data, myAlbumId);

            }  

            @Override   
            public void onFacebookError(FacebookError error)
            {
                Toast.makeText(MainActivity.this, "FaceBook Error", Toast.LENGTH_LONG).show();
            }

            @Override                     
            public void onError(DialogError e) 
            {
                Toast.makeText(MainActivity.this, "Error", Toast.LENGTH_LONG).show();
            }                      

            @Override                     
            public void onCancel() 
            {
                Toast.makeText(MainActivity.this, "Canceled", Toast.LENGTH_LONG).show();
            }          
        }); 
    }

}

private String createAlbumName()
{
    Bundle params = new Bundle();
    params.putString("name", "Friends");
    params.putString("message", "My Test Album Description Here");
    mAsyncRunner.request("me/albums", params, "POST", new SampleUploadListener(), null);
    String response = "";
    String albumId = "";
    try {
        response = facebook.request("https://graph.facebook.com/me/albums",params,"POST");
    } catch (FileNotFoundException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (MalformedURLException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    try {
        albumId=Util.parseJson(response).getString("id");
    } catch (FacebookError e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return albumId;
}

private void uploadImagesToAlbum(byte[] byteArray, String albumId)
{
    if ( albumId == null ) {
        albumId = "me";
    }
    Bundle params = new Bundle();
    params.putByteArray("picture", byteArray);
    mAsyncRunner.request(albumId+"/photos", params, "POST", new SampleUploadListener(), null);

} 
```

这是我的日志-

> 03-24 04:06:27.954: E/AndroidRuntime(1054): 致命异常: main 03-24 04:06:27.954: E/AndroidRuntime(1054): android.os.NetworkOnMainThreadException 03-24 04:06:27.954: E/AndroidRuntime(1054): 在 android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117) 03-24 04:06:27.954: E/AndroidRuntime(1054): 在 java.net.InetAddress.lookupHostByName(InetAddress .java:385) 03-24 04:06:27.954: E/AndroidRuntime(1054): 在 java.net.InetAddress.getAllByNameImpl(InetAddress.java:236) 03-24 04:06:27.954: E/AndroidRuntime(1054 ): 在 java.net.InetAddress.getAllByName(InetAddress.java:214) 03-24 04:06:27.954: E/AndroidRuntime(1054): 在 libcore.net.http.HttpConnection.(HttpConnection.java:70) 03 -24 04:06:27.954: E/AndroidRuntime(1054): 在 libcore.net.http.HttpConnection.(HttpConnection.java:50) 03-24 04:06:27.954:E/AndroidRuntime(1054): 在 libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:340) 03-24 04:06:27.954: E/AndroidRuntime(1054): 在 libcore.net.http.HttpConnectionPool .get(HttpConnectionPool.java:87) 03-24 04:06:27.954: E/AndroidRuntime(1054): 在 libcore.net.http.HttpConnection.connect(HttpConnection.java:128) 03-24 04:06:27.954 : E/AndroidRuntime(1054): 在 libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:316) 03-24 04:06:27.954: E/AndroidRuntime(1054): 在 libcore.net.http.HttpsURLConnectionImpl$ HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:461) 03-24 04:06:27.954: E/AndroidRuntime(1054): 在 libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:433) 03-24 04: 06:27.954：E/AndroidRuntime(1054)：在 libcore.net.http.HttpEngine。sendSocketRequest(HttpEngine.java:290) 03-24 04:06:27.954: E/AndroidRuntime(1054): 在 libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:240) 03-24 04:06:27.954: E/AndroidRuntime(1054): 在 libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:81) 03-24 04:06:27.954: E/AndroidRuntime(1054): 在 libcore.net.http.HttpsURLConnectionImpl.connect (HttpsURLConnectionImpl.java:165) 03-24 04:06:27.954: E/AndroidRuntime(1054): at com.facebook.android.Util.openUrl(Util.java:197) 03-24 04:06:27.954: E /AndroidRuntime(1054): 在 com.facebook.android.Facebook.requestImpl(Facebook.java:806) 03-24 04:06:27.954: E/AndroidRuntime(1054): 在 com.facebook.android.Facebook.request( Facebook.java:794) 03-24 04:06:27.954: E/AndroidRuntime(1054): 在 com.example.androidfacebookpractice.MainActivity。createAlbumName(MainActivity.java:340) 03-24 04:06:27.954: E/AndroidRuntime(1054): at com.example.androidfacebookpractice.MainActivity.access$4(MainActivity.java:331) 03-24 04:06:27.954 : E/AndroidRuntime(1054): 在 com.example.androidfacebookpractice.MainActivity$9.onComplete(MainActivity.java:290) 03-24 04:06:27.954: E/AndroidRuntime(1054): 在 com.facebook.android.Facebook .onSessionCallback(Facebook.java:345) 03-24 04:06:27.954: E/AndroidRuntime(1054): 在 com.facebook.android.Facebook.access$11(Facebook.java:326) 03-24 04:06: 27.954: E/AndroidRuntime(1054): 在 com.facebook.android.Facebook$1.call(Facebook.java:304) 03-24 04:06:27.954: E/AndroidRuntime(1054): 在 com.facebook.Session$3 $1.run(Session.java:1179) 03-24 04:06:27.954: E/AndroidRuntime(1054): 在 android.os.Handler.handleCallback(Handler.java:725) 03-24 04:06:27.954: E/AndroidRuntime(1054): 在 android.os.Handler.dispatchMessage(Handler.java:92) 03-24 04:06:27.954: E/AndroidRuntime(1054): 在android.os.Looper.loop(Looper.java:137) 03-24 04:06:27.954: E/AndroidRuntime(1054): 在 android.app.ActivityThread.main(ActivityThread.java:5039) 03-24 04: 06:27.954: E/AndroidRuntime(1054): 在 java.lang.reflect.Method.invokeNative(Native Method) 03-24 04:06:27.954: E/AndroidRuntime(1054): 在 java.lang.reflect.Method。调用（Method.java:511）03-24 04:06:27.954：E/AndroidRuntime（1054）：在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run（ZygoteInit.java:793）03-24 04： 06:27.954: E/AndroidRuntime(1054): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) 03-24 04:06:27.954: E/AndroidRuntime(1054): 在 dalvik.system .NativeStart。主要（本机方法）

如何将图片上传到相册？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T04:48:05.060

当应用程序尝试在其主线程上执行网络操作时，将引发此异常。我使用新线程解决了这个问题

```
Thread thread = new Thread()
{
    @Override
    public void run() {
        try {
            //Your code goes here
            }                               
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
};

thread.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T04:31:07.897

您可以发布您的日志，以便所有人都可以帮助您..

它的连接错误不是图像上传错误。

你不能直接连接把你所有的网络访问放在一个线程或处理程序或 asynctask 上。

# ruby - 在厨师食谱中干燥

> ID：15595144
> 
> 赞同：17
> 
> 时间：2013-03-24T04:25:36.810
> 
> 标签：ruby, chef-infra, chef-recipe

在厨师食谱中做一点 DRY 的最佳方法是什么？即只是打破Ruby代码的一小部分，所以我不会一遍又一遍地复制粘贴它。

当然，以下失败：

```
NoMethodError: undefined method `connect_root' for Chef::Resource::RubyBlock 
```

我可能在一个配方中有多个 ruby​​_blocks，因为它们做不同的事情并且需要有不同的 not_if 块才能成为真正的幂等。

```
def connect_root(root_password)
  m = Mysql.new("localhost", "root", root_password)
  begin
    yield m
  ensure
    m.close
  end
end

ruby_block "set readonly" do
  block do
    connect_root node[:mysql][:server_root_password] do |connection|
      command = 'SET GLOBAL read_only = ON'
      Chef::Log.info "#{command}"
      connection.query(command)
    end
  end
  not_if do
    ro = nil
    connect_root node[:mysql][:server_root_password] do |connection|
      connection.query("SELECT @@read_only as ro") {|r| r.each_hash {|h| 
        ro = h['ro']
      } }
    end
    ro
  end
end 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-27T20:38:42.937

正如您已经知道的那样，您不能在配方中定义函数。为此提供了库。**您应该在食谱的库**文件夹中创建一个文件（例如**mysql_helper.rb**），其中包含以下内容：

 **```
module MysqlHelper
  def self.connect_root( root_password )
    m = Mysql.new("localhost", "root", root_password)
    begin
      yield m
    ensure
      m.close
    end
  end
end 
```

它**必须**是一个模块，而不是一个类。还请注意，我们将其定义为静态（使用 self.method_name）。然后，您将能够使用模块名称和方法名称在配方中使用此模块中定义的函数：

```
MysqlHelper.connect_root node[:mysql][:server_root_password] do |connection|
  [...]
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T05:02:46.363

作为记录，我刚刚创建了一个包含以下内容的库。但这对于一个文件中的 DRY 来说似乎有点过分了。我也不知道如何让模块使用任何其他命名空间来工作。

```
class Chef
  class Resource
    def connect_root(root_password)
      ... 
```**

# java - java中的图像倾斜校正？OMR 阅读器应用程序

> ID：15595146
> 
> 赞同：1
> 
> 时间：2013-03-24T04:26:06.203
> 
> 标签：java, image, rotation, graphics2d, tilt

我需要知道如何对 OMR Sheets 的扫描图像应用倾斜校正。在阅读评估表之前，图像需要完美对齐。这是如何在java中完成的？图像文件是 jpeg 文件。

我使用的一个想法是使用 tan inverse(opp/adj) 计算角度；opp & adj 以像素为单位计算。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2017-05-03T06:31:28.757

为“com.aspose.omr.imageprocessing.SkewCorrectionAlgorithm”类尝试 aspose.OMR，通过代码执行倾斜图像校正。

# php - wordpress 在主页上循环的类别中的随机帖子

> ID：15595147
> 
> 赞同：0
> 
> 时间：2013-03-24T04:26:28.050
> 
> 标签：php, javascript, html, css, wordpress

在我当前的 WP 主题 ( @http: [//lillypillyps.com.au](http://lillypillyps.com.au) ) 主页上有一个“引用”部分，我想用各种“循环”横幅替换它。

[与此站点标题](http://nundoobah-retreat.com.au)上的推荐书类似，我希望它在页面加载时显示随机推荐书并循环浏览所有其他页面。

我有一个名为“推荐”的帖子，我希望它从中提取标题和内容。

我通过[http://wordpress.org/support/topic/show-random-posts-custom-fields?replies=10](http://wordpress.org/support/topic/show-random-posts-custom-fields?replies=10)看到了与此类似的东西，但不是我想要的。我希望有一个插件，但因为我不知道该怎么称呼它，所以我什至找不到任何东西。

也许，我可以使用此代码的变体：

```
<script type="text/javascript"> 
    $(document).ready(function() { 
            $('#escape').fadeIn(3000).delay(2000).fadeOut(3000); 
            $("#quotes").load("quotes.html",function() {
        $quotes = $("p.quotes");
        var q = Math.floor( Math.random() * $quotes.length );
        $quotes.eq(q).addClass("next"); // set the next to fade
        f();        
    })
});
function f() {
    $(".next").fadeIn(3000).delay(2000).fadeOut(3000, function() {
        // fadeout ended, we prepare the next one
        $(this).removeClass("next");
        $(this).next("p.quotes").addClass("next");
        if($(".next").length==0) $("p.quotes:first").addClass("next");
        f();
    });
}
</script> 
```

但是使用 php 脚本从指定的类别而不是从平面 html 页面中提取...

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:37:57.813

```
<?php

$array = get_posts(array('category' => 1));
shuffle($array);

foreach ($array as $post) {
    //Blah blah javascript
}

?> 
```

# git - 如何从 Git 分支中删除文件

> ID：15595148
> 
> 赞同：2
> 
> 时间：2013-03-24T04:27:21.417
> 
> 标签：git

我正在学习 Git。在我机器上的测试仓库中有 2 个分支：

*   `master`和
*   `testing`

我确实检查`testing branch`并删除了文件系统上的一些文件：

```
helpers.php                 registry.class.php
...       session.class.php                    simpleCrud.php 
```

然后我跑`git add .`

*   我希望这些已删除的文件将从`testing`分支中删除并允许我提交该更改
*   但是`git status`（见下图）显示它们不适用于`git commit -m "Deleted some files from testing branch"`

![状态](../Images/7794c6095093a156e239f5e6d71a5947.png)

1.  有人可以告诉我我做错了什么吗？
2.  以及如何做我想做的事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T05:19:20.393

您的文件删除更改未显示在 git 的索引中的原因是您自己删除了文件而没有通知 git。

现在有两种方法可以解决这个问题。

**选项1：**

使用该[`git add -u <FILES>`](https://www.kernel.org/pub/software/scm/git/docs/git-add.html)命令使索引中跟踪的文件反映工作树中的更改。Git 会检测你的工作树中的文件删除，并更新索引以对应这个状态。

```
# Example command to update the git index to
# reflect the state of the files in the work-tree
# for the two files named helpers.php and registry.class.php
git add -u helpers.php registry.class.php 
```

**选项 2：**

要删除文件，而不是使用shell 中的`del`或`rm`命令手动删除它，您可以直接要求 git 删除并使用[`git rm`](https://www.kernel.org/pub/software/scm/git/docs/git-rm.html)命令记下索引中的更改。请注意，即使您自己已经删除了文件（如您提到的情况），也可以执行此命令。

```
# Example command to remove two files named
# helpers.php and registry.class.php
git rm helpers.php registry.class.php 
```

使用上述任一选项，您应该看到您的状态命令应该自动指示文件已在暂存区域中删除：

```
git status
# On branch testing
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#   deleted:    helper.php
#   deleted:    registry.class.php
# 
```

然后您应该能够使用该`commit`命令提交更改。

```
git commit -m "Deleted some files from testing branch" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T04:29:06.147

你用`-u`旗帜为他们上演。

例如：`git add -u .`

# python - 使用 Python 从 html 文件中提取字符串（beautifulsoup？）

> ID：15595149
> 
> 赞同：1
> 
> 时间：2013-03-24T04:27:43.090
> 
> 标签：python, html, parsing, beautifulsoup

我的硬盘上保存了一个html文件，我需要提取html页面上显示的字符串并使用python将它们保存到文本文件中。

```
html representation with tags, etc: 
Bme:&nbsp;1&nbsp;Port:&nbsp;1<br />
Downstream&nbsp;line&nbsp;rate:&nbsp;6736&nbsp;kbps<br />
Upstream&nbsp;line&nbsp;rate:&nbsp;964&nbsp;kbps<br /> 
```

我需要从上面提取的是后面的数字

```
Downstream&nbsp;line&nbsp;rate:&nbsp; 
```

在本例中为 6736，并将此数字写入文件。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T04:58:18.030

BeautifulSoup 可能是矫枉过正。如果所有“下游”行都是这样格式化的，您可以使用正则表达式轻松获取这些数字。

```
>>> import re
>>> regex = r'Downstream&nbsp;line&nbsp;rate:&nbsp;(\d\d*)&nbsp;kbps<br />'
>>> re.search(regex, "Downstream&nbsp;line&nbsp;rate:&nbsp;6736&nbsp;kbps<br />").group(1)
'6736' 
```

如果所有行的格式不完全一样，您可能必须使正则表达式更通用。可能是类似的东西`r'Downstream.*(\d\d*)'`。

# html - 流畅、灵活和可扩展的瓷砖填充整个视口宽度

> ID：15595150
> 
> 赞同：1
> 
> 时间：2013-03-24T04:28:05.600
> 
> 标签：html, css, scale, fluid-layout

我正在尝试为网站创建流畅且灵活的“图块”，跨越浏览器的 100% 视口。但是，如果下一个图块不适合，我希望它们在需要时缩小一点以消除所有空白。

一个最小宽度和最小高度为 200 像素的普通 div 标签，设置为“显示：内联块”让我大部分时间。当我展开浏览器窗口时，如果还有空间，这些框将向上移动到顶行。

我的问题是当下一个 div 没有空间时，右边有空格。取而代之的是，我希望每个 div 都“放大”以固定线条的整个宽度。

因此，如果浏览器设置为 675px，而不是在 200px 处有 3 个 div，在 225px 处将有 3 个。但是，如果您随后将浏览器的大小调整为 800 像素，那么将有 4 个 200 像素的 div。

对不起，如果这很难理解。本质上，我试图模仿[http://pulse.me](http://pulse.me)如何显示他们的文章。

如果可能的话，我想在纯 CSS 中执行此操作，但我怀疑至少要调整窗口大小，需要一些 javascript。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T05:37:54.310

对于纯 CSS 方法，您可以使用结合百分比宽度的媒体查询：

```
.tile {
    /* 4 tiles per row */
    width: 25%;
}

@media (max-width: 500px) {
    .tile {
        /* 3 tiles per row */
        width: 33.33333333332%
    }
}

@media (max-width: 300px) {
    .tile {
        /* 2 tiles per row */
        width: 50%
    }
} 
```

这是一个证明这一点的小提琴：http: [//jsfiddle.net/bDBMP/1/](http://jsfiddle.net/bDBMP/1/)

# php - 结合日期和时间，然后添加选定的时间

> ID：15595153
> 
> 赞同：1
> 
> 时间：2013-03-24T04:28:37.760
> 
> 标签：php, date, time

我正在尝试动态地为日期添加几个小时。我有一个日期、时间和小时变量。$appdate 的格式为 2013/03/23 $time 的格式为军用时间格式 13:00:00 $rei 等于小时，但它是 0-48 的纯数字格式。

我正在尝试将 $appdate 和 $time 组合在一起，然后将选择的 $rei 小时添加到它以标准 mysql 格式的 $reiexpires 结尾。2013-03-23 20:00:00

```
 $reitime = date('H',strtotime($rei));
 $reidate = date('Y-m-d H:i:s',strtotime($appdate.$time));
 $reiexpires = date('Y-m-d H:i:s',strtotime($reidate + $reitime)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T04:32:29.203

```
$appdate = "2013/03/23";
$time = "13:00:00";
$rei = 48;

$reitime = strtotime($appdate . " " . $time . " + " . $rei . " hours");
$reiexpires = date('Y-m-d H:i:s', $reitime);

echo $reiexpires; 
```

输出：

```
2013-03-25 13:00:00 
```

# actionscript-3 - 为使用 forEach 循环添加的影片剪辑赋予实例名称

> ID：15595154
> 
> 赞同：0
> 
> 时间：2013-03-24T04:28:41.337
> 
> 标签：actionscript-3, xml-parsing, foreach, instance

我正在使用一个 forEach 循环，为我的 XML 中的每个节点添加电影剪辑到舞台。当它们被添加到循环中时，如何为这些影片剪辑提供唯一的实例名称？

这是我的 parseList 函数，其中包含提到的 forEach 循环和我正在使用的对我不起作用的语法。

```
private function parseList():void {
    //use Number variables to keep track of current x and y properties as list display is generated
    var titleField:TextField = TextField(listItem);
    var itemY:Number = 503;
    var itemX:Number = 0;
    var artistTracker:String = Playmaster_Jukebox.currArtist;
    var artID = 0;
    var albID = 0;

    var itemID:Number=0;
    for each (var listItemData:XML in mainXML.artist[artID].album[albID].track) {

        var listItem:MovieClip = new ListItem(itemTitle);
        listContainer.addChild(listItem);
        listItem.name = "itemID" + " " + albID + " " + itemID;
        itemID++;

        listItem.y = itemY;
        listItem.x = itemX;

        TextField(listItem.listItemTitleField);
        itemY += listItem.height + 10;
    }
} 
```

我是 forEach 循环的初学者，但还不了解它，因此感谢您的评论！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T08:30:13.807

如果我正确理解您的问题；那么您在询问如何在从 XML 文档中读取“listItem”MovieClip 时对其进行存储。

为此，您可能需要使用 Array 或 Map：

使用数组即：

```
var listItemArray:Array = new Array();
for each (var listItemData:XML in mainXML.artist[artID].album[albID].track) {
        var listItem:MovieClip = new ListItem(itemTitle);
        listContainer.addChild(listItem);

        listItemArray.push(listItem);// adds the item to the array
} 
```

使用地图即：

```
var listItemMap:Object = {};
for each (var listItemData:XML in mainXML.artist[artID].album[albID].track) {
         var listItem:MovieClip = new ListItem(itemTitle);
         listContainer.addChild(listItem);
         listItem.name = "itemID" + " " + albID + " " + itemID;

         listItemMap[listItem.name];// adds an item by the .name you created for it.
} 
```

该地图还允许您通过您为不同项目指定的名称来查找项目。即：listItemMap["name"] 会找到名为“name”的元素。

该数组将允许您按顺序循环它们。即： listItemArray[0] 会找到第一个元素。

由您决定哪个更适合您的目的。

# c# - PhoneNumberChooserTask 显示崩溃

> ID：15595159
> 
> 赞同：-2
> 
> 时间：2013-03-24T04:29:11.027
> 
> 标签：c#, windows-phone-8

我突然开始遇到错误。

```
 PhoneNumberChooserTask chooser = new PhoneNumberChooserTask();
        chooser.Completed += new EventHandler<PhoneNumberResult>(Chooser_Completed);
        chooser.Show(); 
```

Show() 显示联系人列表，但随后应用程序崩溃。

> 消息“类型 'System.Runtime.InteropServices.WindowsRuntime.RuntimeClass' 无法序列化。考虑使用 DataContractAttribute 属性标记它，并使用 DataMemberAttribute 属性标记您想要序列化的所有成员。或者，您可以确保类型是公共的并且有一个无参数的构造函数——该类型的所有公共成员都将被序列化，并且不需要任何属性。” 细绳

它工作正常。这似乎很突然。

编辑：所以似乎这只发生在第二次调用 NavigationService 时。如果我从 MainPage.cs 调用它，那么它不会发生。……？

编辑：它似乎对 NavigationFailed 做了一些事情。仍然堵住;(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T05:54:05.807

我有一个打开的套接字，并且 Show() 离开了我的应用程序。原来这不适合我的开放式套接字*_*

# java - 打开/关闭声音按钮不起作用

> ID：15595161
> 
> 赞同：0
> 
> 时间：2013-03-24T04:29:27.080
> 
> 标签：java, android, eclipse, audio

我在我的设置活动中有它，当用户单击 ToggleButton 时，它应该在整个应用程序中静音，但它不起作用。我在教程类中放置的 SoundPool onClick 按钮声音仍在播放声音 onClick。我已经指定了我的共享带有切换按钮的首选项。

这是我的代码，

```
 package com.fullfrontalgames.numberfighter;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.media.AudioManager;
import android.media.SoundPool;
import android.os.Bundle;
import android.preference.Preference;
import android.preference.PreferenceManager;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.ToggleButton;

public class Settings extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.settings);

        Button Notifications = (Button) findViewById(R.id.Notifications);
        Button Done = (Button) findViewById(R.id.done);
        Button AccountSettings = (Button) findViewById(R.id.AccountSettings);
        final ToggleButton AT = (ToggleButton) findViewById(R.id.AudioToggle);

        AT.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                SharedPreferences appPrefs =
                        getSharedPreferences("com.fullfrontalgames.numberfighter.Settings_preferences",
                                MODE_PRIVATE);
                SharedPreferences.Editor editor = appPrefs.edit();
                editor.putBoolean("atpref", AT.isChecked()); //value to store
                editor.commit();

                if ((AT.isChecked())) {
                    AT.setSoundEffectsEnabled(true);

                  } else {
                    AT.setSoundEffectsEnabled(false);
                      }
                 }

        });

        SharedPreferences appPrefs =
                getSharedPreferences("com.fullfrontalgames.numberfighter.Settings_preferences",
                MODE_PRIVATE);
        boolean atpref = appPrefs.getBoolean("atpref", true); //default is true
        AT.setChecked(atpref);
        Done.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent Intent = new Intent(Settings.this,activity_main.class);
                Intent.setFlags(android.content.Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(Intent);

            }
        });
        Notifications.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                startActivity(new Intent("com.fullfrontalgames.numberfighter.Notifications"));
            }
        });
        AccountSettings.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                startActivity(new Intent("com.fullfrontalgames.numberfighter.AccountSettings"));
            }
        });

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T04:42:33.040

根据[setSoundEffectsEnabled](http://developer.android.com/reference/android/view/View.html#setSoundEffectsEnabled%28boolean%29)的文档

> 设置此视图是否应为单击和触摸等事件启用声音效果。
> 
> 如果您已经播放声音，您可能希望禁用视图的声音效果，例如，播放 dtmf 音调的拨号键。

所以这个功能应该设置关闭视图的声音效果（如点击或触摸）。不设置关闭设备声音。

For your purpose check [AudioManager](https://www.google.com.bd/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CC0QFjAA&url=http://developer.android.com/reference/android/media/AudioManager.html&ei=dYROUa22FoHmrAfag4HQDw&usg=AFQjCNHxOBvOlReXWNRSsA79zWyoMe_gbQ&sig2=fKMDwlQlP1poF6UZNzGhYQ&bvm=bv.44158598,d.bmk)

# c++ - 带有堆栈和队列的字符串回文（C++）

> ID：15595172
> 
> 赞同：4
> 
> 时间：2013-03-24T04:31:05.490
> 
> 标签：c++

这编译得很好，没有空格也能很好地工作，但是一旦我把空格放进去，要么告诉我它不是回文，要么超时。任何帮助将不胜感激！

```
int main( )
{
   queue<char> q;
   stack<char> s;
   string the_string;
   int mismatches = 0;
   cout << "Enter a line and I will see if it's a palindrome:" << endl;
   cin  >> the_string;

   int i = 0;
   while (cin.peek() != '\n')
   {
       cin >> the_string[i];
       if (isalpha(the_string[i]))
       {
          q.push(toupper(the_string[i]));
          s.push(toupper(the_string[i]));
       }
       i++;
   }

   while ((!q.empty()) && (!s.empty()))
   {
      if (q.front() != s.top())
          ++mismatches;

        q.pop();
        s.pop();
   }

   if (mismatches == 0)
       cout << "This is a palindrome" << endl;
   else
       cout << "This is not a palindrome" << endl;

   system("pause");
   return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T04:46:20.890

首先是线

```
cin >> the_string; 
```

没有得到一整行。改用这个

```
getline(cin, the_string); 
```

其次，在调试您的算法时会打印出大量信息。例如，如果您添加行

```
cout << "You entered: '" << the_string << "'" << endl; 
```

您可以轻松查看您实际测试的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T06:16:33.013

我得到这个解决方案工作得很好。

```
int main( )
{
    queue<char> q;
    stack<char> s;
    string the_string;
    int mismatches = 0;

    cout << "Enter a line and I will see if it's a palindrome:" << endl;
    int i = 0;

    while (cin.peek() != '\n')
    {
        cin >> the_string[i];
        if (isalpha(the_string[i]))
        {
            q.push(toupper(the_string[i]));
            s.push(toupper(the_string[i]));
    }
    i++;
    }

    while ((!q.empty()) && (!s.empty()))
    {
        if (q.front() != s.top())
            ++mismatches;

        q.pop();
        s.pop();
    }

if (mismatches == 0)
    cout << "This is a palindrome" << endl;
else
    cout << "This is not a palindrome" << endl;

    system("pause");
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T04:35:51.593

为什么这么复杂？

你可以简单地做：

```
#include <string>
#include <algorithm>

bool is_palindrome(std::string const& s)
{
  return std::equal(s.begin(), s.begin()+s.length()/2, s.rbegin());
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-11-12T03:11:06.450

```
void main()
{
    queue<char> q;
    stack<char> s;
    char letter;
    int mismatches = 0;

    cout << "Enter a word and I will see if it's a palindrome:" << endl;
    cin >> letter;
    q.push(letter);
    s.push(letter);

    int i = 0;
    while (cin.peek() != '\n')
    {
        cin >> letter;
        if (isalpha(letter))
        {
            q.push(letter);
            s.push(letter);
        }
        i++;
    }

    while ((!q.empty()) && (!s.empty()))
    {
        if (q.front() != s.top())
            ++mismatches;

        q.pop();
        s.pop();
    }

    if (mismatches == 0)
    {
        cout << "This is a palindrome" << endl;
    }
    else
    {
        cout << "This is not a palindrome" << endl;
    }
    cout << endl;
    cout << "Homework done!" << endl;
    cout << "You are Welcome!" << endl;
    system("pause");

} 
```

# java - 如何在线程“main”java.lang.StackOverflowError 中找到异常的原因

> ID：15595189
> 
> 赞同：1
> 
> 时间：2013-03-24T04:33:01.627
> 
> 标签：java

要运行我的代码，只需将其复制并粘贴到您的 IDE 中 - 一切都在那里。这是一个使用 Observer-Observable 设计模式的飞行监控程序。FlightStautsMonitor 是监控 Flight 的飞行状态（整数）的 Observer。FlightStatusChangeEvent 是一个记录航班状态变化的类。Demo 是驱动类，或者是带main的类。

我的问题是我不确定我是否使用了 Observer 和 Observable API。我得到一个带有运行时错误的输出 -

```
Old flight status
F:1, S: 0
F:2, S: 0
F:3, S: 0
F:4, S: 0
F:5, S: 0
Exception in thread "main" java.lang.StackOverflowError
at java.util.Vector.toArray(Unknown Source)
at java.util.Observable.notifyObservers(Unknown Source)
at demo.Flight.updateStatus(Demo.java:40)
at demo.FlightStatusMonitor.update(Demo.java:91)
at java.util.Observable.notifyObservers(Unknown Source) 
```

问题的原因是什么以及如何修复此代码？

```
//package demo;

import java.util.*;

class FlightStatusChangeEvent{

int status;
Flight flight;

FlightStatusChangeEvent(int statusCode, Flight flight){

    this.status = statusCode;
    this.flight = flight;

}

public int getStatus(){return this.status;}

public Flight getFlight(){return this.flight;}

}

class Flight extends Observable{

int status;// 0 = on time, -1 = late, +1 = before scheduled time
String flightCode;

Flight(String flightCode){

    this.flightCode = flightCode;

}

public void updateStatus(int statusCode){

    this.status = statusCode;
    FlightStatusChangeEvent fsce = new FlightStatusChangeEvent(status, this);
    setChanged();
    notifyObservers(fsce);

}

public String getFlightCode(){return this.flightCode;}

public String toString(){return "F:" + flightCode + ", S: " + status;}

}

 class FlightStatusMonitor implements Observer{

public static ArrayList<Flight> flights = new ArrayList<Flight>();

static{

    for(int i = 1; i < 6; i++){

        Flight ff = new Flight("" + i);
        flights.add(ff);        
    }

}

//keep calling this method every 10 sec to get latest flight status
public static void displayStatusOfFlights(){

    //print all flight statuses in array list - flights
    for(Flight fl : flights){
        System.out.println(fl);

    }

}

public void update(Observable flight, Object flightStatusEvent){

    FlightStatusChangeEvent fsce = (FlightStatusChangeEvent) flightStatusEvent;     
    Flight fl = fsce.getFlight();
    String code = fl.getFlightCode();
    int status = fsce.getStatus();

    //find the flight in array flights and then update its status
    for(int i = 0; i < flights.size(); i++){

        Flight fli = flights.get(i);
        String flCode = fli.getFlightCode();

        if(flCode.equals(code)){
            fli.updateStatus(status);
            System.out.print("Flight status updated !");

            break;

        }

    }

}

}

 public class Demo{

public static void main(String[]args){

    FlightStatusMonitor fsm = new FlightStatusMonitor();
    System.out.println("Old flight status");
    ArrayList<Flight> fllist = fsm.flights;
    fsm.displayStatusOfFlights();

    for(Flight fl : fllist ){

        fl.addObserver(fsm);

    }

    fsm.flights.get(1).updateStatus(-1);
    System.out.println("New flight status");        
    fsm.displayStatusOfFlights();

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T04:44:56.450

`Flight.updateStatus`正在打电话`notifyObersevers`

`FlightStatusMonitor#update`正在调用`flights.get(x).updateStatus`...start end less。

在从所述对象收到的事件通知中不更新对象的状态...

这是堆栈跟踪的关键部分：

```
Exception in thread "main" java.lang.StackOverflowError
    at java.util.Arrays.copyOf(Arrays.java:2219)
    at java.util.Vector.toArray(Vector.java:687)
    at java.util.Observable.notifyObservers(Observable.java:154)
    at teststackoverflow.Demo$Flight.updateStatus(Demo.java:73)
    at teststackoverflow.Demo$FlightStatusMonitor.update(Demo.java:125)
    at java.util.Observable.notifyObservers(Observable.java:159)
    at teststackoverflow.Demo$Flight.updateStatus(Demo.java:73)
    at teststackoverflow.Demo$FlightStatusMonitor.update(Demo.java:125) 
```

你可以（从底部开始），`FlightStatusMonitor.update`正在调用`Flight#updateStatus`，正在调用`Observable.notifyObservers`，正在调用`FlightStatusMonitor.update`

我还建议您在调试标志设置为 true ( `javac -g`)的情况下编译代码

**更新了可能的修复**

所以，我觉得，你需要做的不仅仅是比较航班代码，还要比较每个航班的航班状态，只更改那些状态不匹配的

```
public void update(Observable flight, Object flightStatusEvent) {

    FlightStatusChangeEvent fsce = (FlightStatusChangeEvent) flightStatusEvent;
    Flight fl = fsce.getFlight();
    String code = fl.getFlightCode();
    int status = fsce.getStatus();

    //find the flight in array flights and then update its status
    for (int i = 0; i < flights.size(); i++) {

        Flight fli = flights.get(i);
        String flCode = fli.getFlightCode();

        if (flCode.equals(code)) {
            //** Possible Fix **//
            if (fli.status != fl.status) {
                fli.updateStatus(status);
                System.out.print("Flight status updated !");
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T04:47:47.953

当由于应用程序递归太深而发生堆栈溢出时，会引发[StackOverflowError 。](http://docs.oracle.com/javase/6/docs/api/java/lang/StackOverflowError.html)

你的问题出在`update`方法上。您正在调用`updateStatus`方法，该`updateStatus`方法将`update`再次调用。删除`fli.updateStatus(status);`将解决您的问题。

```
public void update(Observable flight, Object flightStatusEvent) {

        FlightStatusChangeEvent fsce = (FlightStatusChangeEvent) flightStatusEvent;
        Flight fl = fsce.getFlight();
        String code = fl.getFlightCode();
        int status = fsce.getStatus();

        // find the flight in array flights and then update its status
        for (int i = 0; i < flights.size(); i++) {

            Flight fli = flights.get(i);
            String flCode = fli.getFlightCode();

            if (flCode.equals(code)) {
                // THIS WILL CAUSE STACKOVERFLOWERROR
                fli.updateStatus(status);
                System.out.print("Flight status updated !");

                break;

            }

        }

    } 
```

# iphone - UITextView 文本颜色不变

> ID：15595193
> 
> 赞同：2
> 
> 时间：2013-03-24T04:33:43.770
> 
> 标签：iphone, objective-c, xcode, uitextview

我正在尝试以编程方式更改 UITextView 的颜色，但它似乎没有更新。我在视图控制器类中定义了一个 IBOutlet，然后在 Storyboards 中添加了相关连接。在 viewDidLoad: 方法中，我有：

```
[super viewDidLoad];
[helpText setBackgroundColor:[UIColor clearColor]];
[helpText setTextColor:[UIColor whiteColor]]; 
```

但是，文本颜色保持不变（黑色）。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T04:51:34.487

排序：

我有一个名为的方法`-setHelpText:`，它将文本放入 helpText UITextView，但是这样做（有一个与 IBOutlet 同名的设置器）会导致创建一个 nil 对象。将方法名称重构为其他名称，一切都很好:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T04:38:05.353

首先检查您的`UITextView`添加是否正确？？？

检查 `@property and @synthesize`是否正确？

你也可以试试

```
helpText.textColor = [UIColor whiteColor]; 
```

**另一种方法是**

```
UIColor *myColor = [UIColor colorWithHue:0.38 saturation:0.98 brightness:1.0 alpha:1.0];
[helpText setTextColor:myColor]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T06:27:39.797

```
UITextView *t = [[UITextView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
[lbl setTextColor:[UIColor blueColor]];
[self.view addSubview:txtView]; 
```

# ios - NSNotificationCenter 和加载 UIViewControlletr 的问题

> ID：15595201
> 
> 赞同：0
> 
> 时间：2013-03-24T04:35:57.967
> 
> 标签：ios, objective-c, uiviewcontroller, nsthread, nsnotificationcenter

我有一个`UIViewController`with 按钮，它带来了另一个`UIViewController`. 单击按钮，如图所示，`NSLog`完成后，我想发送通知以加载另一个`viewcontroller`. 好吧，虽然看起来一切都做对了，但不知何故它不起作用并且`UIViewController`没有出现。这是代码：

```
 [[NSNotificationCenter  defaultCenter] addObserver:self selector:@selector(infoPage:)
                                                  name:@"InfoPage" object:nil ];

-(void) infoPage:(NSNotification*)notification
{
    NSLog(@"Code executing in Thread %@",[NSThread currentThread] );

    InfoCtrol *i = [[InfoCtrol alloc] init];
     i.hidesBottomBarWhenPushed = YES;
    [self.navigationController pushViewController:i animated:YES];
} 
```

我的 tabbaritem 按钮

```
-(void)info {
    [[NSNotificationCenter defaultCenter] postNotificationName:@"InfoPage"
                                                        object:nil
                                                      userInfo:nil];
     NSLog(@"test not");
} 
```

我认为我的问题是：它不在 mainThread 但我不知道应该如何解决：

我也使用了这个，但它没有带来 UIViewController：

```
[self performSelectorOnMainThread:@selector(test) withObject:nil waitUntilDone:NO];

-(void)test{
    [[NSNotificationCenter defaultCenter] postNotificationName:@"InfoPage"
                                                        object:nil
                                                      userInfo:nil];
} 
```

如果我只是将此代码放在按钮中，它会显示`UIViewController`，但我想使用`NSNotificationCenter`

```
InfoCtrol *i = [[InfoCtrol alloc] init];
     i.hidesBottomBarWhenPushed = YES;
[self.navigationController pushViewController:i animated:YES]; 
```

我的日志：

```
Code executing in Thread <NSThread: 0x1fd7c7e0>{name = (null), num = 1} 
```

**更新：**

```
 How should i remove last thread from mainThread 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T04:52:32.957

I don't know why you want to use a notification here, when you can perform the action directly without issue. But a simple thing you can do in notification methods that need to update UI is to just have them call themselves on the main thread if they're not already running on that thread:

```
-(void)myNotificationMethod:(NSNotification*)note {
    if (![NSThread isMainThread]) {
        [self performSelectorOnMainThread:@selector(myNotificationMethod:)
                               withObject:note
                            waitUntilDone:NO];
        return;
    }

    // ... do some UI stuff
    InfoCtrol *i = [[InfoCtrol alloc] init];
    [self.navigationController pushViewController:i animated:YES];
} 
```

# html - 保持宽高比并正常使用 div？

> ID：15595205
> 
> 赞同：0
> 
> 时间：2013-03-24T04:36:39.127
> 
> 标签：html, css

我仍然很难理解我的 div。我正在尝试制作一个根据浏览器/屏幕尺寸更改其尺寸的网站。

我已经做到了这一点：

我的html：

```
<div id="wrapper">
  <div id="header">Header</div>
  <div id="left">Left</div>
  <div id="right">Right</div>
  <div id="footer">Footer</div>
</div> 
```

我的CSS：

```
#wrapper{width: 60%;}

#header{width: 100%; padding-top: 11.00%;}
#left{float: left; width: 27.5%; padding-top: 44%;}
#right{float: left;  width: 72.5%; padding-top: 44.00%;}
#footer{clear: both; width: 100%; padding-top: 11.40%;} 
```

现在我的 div 大小正好合适，问题是连接总是在 div 的底部，但我需要它像普通的 div 一样，所以我可以用它做任何我想做的事情。像普通 div 一样使用它的最简单方法是什么？

感谢您的任何帮助！:)

编辑：这是它的样子： http: [//jsfiddle.net/rswML/](http://jsfiddle.net/rswML/) ...正如我所说的，问题是文本总是在 div 的底部。我理解它是因为 padding-top 但我需要它来保持高度与宽度的比率并且仍然正常使用 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T04:40:54.073

您在这里尝试的是响应式设计概念。我建议您为此尝试[引导](http://twitter.github.com/bootstrap/)框架。与其自己做所有事情，不如通过简单地向 div 添加一个类来完成所有事情。

> 响应式网页设计 (RWD) 是一种网页设计方法，旨在打造网站以提供最佳的查看体验——轻松阅读和导航，只需最少的调整大小、平移和滚动——在各种设备上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T06:00:15.730

我认为问题可能与您的填充值有关。也许调整它们将使您拥有所需的控制权，或者边缘顶部会更好。此外，不确定您是否希望对齐元素 #left 和 #right 的顶部，但这些填充设置可能会以不同的值呈现。带有百分比的 padding-top 属性引用包含块的宽度。希望有帮助。干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T14:41:58.990

解决方案是我必须使标题 div 位置：相对，然后在其中创建另一个 div，即位置：绝对和宽度/高度：100%。

# jquery - 有没有更好的方法在这个简单的幻灯片中显示暂停悬停？

> ID：15595206
> 
> 赞同：0
> 
> 时间：2013-03-24T04:36:49.287
> 
> 标签：jquery

有没有更好的方法**将悬停添加**到这个简单的幻灯片中。我希望 div 像这样淡入以显示它已暂停，这是我能想到的唯一方法。我还在学习 jQuery。

这是 24 小时演示：[http ://trialsites.ihoststudio.com/trialsite366742/website/](http://trialsites.ihoststudio.com/trialsite366742/website/)

***注意*** *不影响这一点，但它是在所见即所得的程序中完成的，因此 html 是有限的*

CSS：

```
#pause { 
display: none;
width: 70px;
background: white; 
padding: 2px;
border-radius: 6px;
border:1px solid black; 
font:15px/1.1em arial;
color: black;
text-align:center;
} 
```

jQuery：

```
$(function() {
var intervalId;
$("#A > div:gt(0)").hide();
startInterval();
$('#A > div').mouseover(function() { stopInterval(); });
$('#A > div').mouseout(function() { startInterval(); });
$('#A > div').hover(
function() { $('#pause').fadeIn(); },
function() { $('#pause').fadeOut(); }
);

function stopInterval() {
clearInterval(intervalId);
}

function startInterval() {
intervalId = setInterval(function() {
$("#A > div:first")
.fadeOut(1000)
.next()
.fadeIn(1000)
.end()
.appendTo('#A');
}, 3000);
}

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T05:04:46.277

不要忘记将 .stop() 添加到您的动画中。

```
$('#pause').stop().fadeIn(); 
```

阅读此内容以供参考： http: [//www.learningjquery.com/2009/01/quick-tip-prevent-animation-queue-buildup](http://www.learningjquery.com/2009/01/quick-tip-prevent-animation-queue-buildup)

您可能还需要考虑更改此设置：

```
$('#A > div').mouseover(function() { stopInterval(); });
$('#A > div').mouseout(function() { startInterval(); });
$('#A > div').hover(
function() { $('#pause').fadeIn(); },
function() { $('#pause').fadeOut(); }
); 
```

对此：

```
 $('#A > div').hover(
        function() { stopInterval(); $('#pause').fadeIn(); },
        function() { startInterval(); $('#pause').fadeOut(); }
    ); 
```

# vb.net - 如果在 URL 上，则在消息框上

> ID：15595208
> 
> 赞同：0
> 
> 时间：2013-03-24T04:36:51.283
> 
> 标签：vb.net, message, credentials

所以我有这个奇怪的问题。我有一个从页面[https://live.xbox.com/en-US/MyXbox/GamerProfile](https://live.xbox.com/en-US/MyXbox/GamerProfile)开始的 WebBrowser （这是一个用于编辑您帐户信息的页面），但无论何时进入那里，用户都会进入 live.com登录，然后返回页面编辑他的个人资料。这就是我希望它发挥作用的方式，但是如果它再次将用户带到该页面（以验证他是否已登录），我希望显示一个消息框。这是我到目前为止所拥有的：

```
 If WebBrowser1.Url.OriginalString() = "https://live.xbox.com/en-US/MyXbox/GamerProfile" Then  

        MessageBox.Show("You are logged in!")
  End If 
```

但是我从来没有显示消息框，而且我认为它不起作用：\有谁知道它为什么不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T06:37:40.483

您的应用程序的哪一部分正在运行该代码？我的意思是，您的程序是否知道 xbox 何时将网络浏览器带到登录页面并返回？如果您的代码仅在创建 webbrowser 对象时运行一次，则它不会运行。

**编辑：** 在这种情况下，代码应该在 WebBrwoser 中。`DocumentCompleted()`事件。看看这个：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.documentcompleted.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.documentcompleted.aspx)

# actionscript-3 - 滚动菜单不能完全工作

> ID：15595210
> 
> 赞同：0
> 
> 时间：2013-03-24T04:37:29.303
> 
> 标签：actionscript-3, flash, actionscript, actionscript-2

我知道 AS2 已经过时了，但我对 as3 的了解还不够，而且我已经好几年没碰过 AS2 了。

这是我的问题：我有两个水平缩略图滚动菜单（一个在左侧，一个在右侧）。右边的那个完美地工作。

```
rightEdge = gmask._x;
maskWidth = gmask._width;
sliderWidth = gslider._width;
ratio = maskWidth / (sliderWidth - maskWidth - 55);
targX = gslider._x;

gslider.onEnterFrame = function() { 
    this._x += (targX - this._x) / 5;
}

gslider.onMouseMove = function() {  
    if (gmask.hitTest(_root._xmouse, _root._ymouse, false)) {
        targX = rightEdge - (gmask._xmouse / ratio);
        updateAfterEvent();
    }
} 
```

我想我可以复制正确的代码并更改适当的实例和变量，但这当然不是那么容易。我花了几个小时尝试不同的组合，但现在我回到了第一方。

```
leftEdge = wmask._x + wmask._width;
maskWidth1 = wmask._width;
sliderWidth1 = wslider._width;
ratio1 = maskWidth1 / (sliderWidth1 - maskWidth1 - 55);
targX1 = wslider._x;

wslider.onEnterFrame = function() { 
    this._x += (targX1 - this._x) / 5;
}

wslider.onMouseMove = function() {  
    if (wmask.hitTest(_root._xmouse,_root._ymouse,false)) {
        targX1 = leftEdge - (wmask._xmouse / ratio1);
        updateAfterEvent();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:22:17.913

我终于明白了。我知道它可能不干净，但这段代码非常适合左侧滚动条。

```
leftEdge=wmask._x + wmask._width;
maskWidth1=wmask._width;
sliderWidth1=wslider._width;
ratio1=maskWidth1/(sliderWidth1-maskWidth1+15)
targX1=wslider._x;

wslider.onEnterFrame=function(){    
    this._x+=(targX1-this._x)/5;
}
wslider.onMouseMove=function(){ 
    if(wmask.hitTest(_root._xmouse,_root._ymouse,false)){
    targX1=(wmask._width*2+100)-(wmask._xmouse/ratio1);
    updateAfterEvent();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T12:51:03.377

我看到的唯一可能不正确的是这个

leftEdge = wmask._x + wmask._width;

应该是... leftEdge = wmask._x;

如果您想使用原件的精确副本。

# android - 构建安卓应用

> ID：15595211
> 
> 赞同：0
> 
> 时间：2013-03-24T04:37:29.137
> 
> 标签：android

我正在尝试为 Android 构建一个带有“播放”按钮的简单应用程序。在 MainActivty.java 文件中，我收到以下代码错误，那么我需要在这里纠正什么？

```
package com.example.simplemusicplayer;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}
}

Button playButton=(Button) findViewById(R.id.button1);
playButton.setOnClickListener(new OnClickListener(){
@Override
public void onClick(View v){
    //TODO Auto generated method stub
    Toast.makeText(MainActivity.this,"Starting to play",Toast.LENGTH_SHORT).show();       
}
});
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T04:38:22.833

移动

```
Button playButton=(Button) findViewById(R.id.button1);
playButton.setOnClickListener(new OnClickListener(){
@Override
public void onClick(View v){
    //TODO Auto generated method stub
    Toast.makeText(MainActivity.this,"Starting to play",Toast.LENGTH_SHORT).show();       
}
}); 
```

里面`onCreate()`。

并`}`从`onCreateOptionsMenu`.

我还建议您阅读[构建您的第一个 Android 应用程序](http://developer.android.com/training/basics/firstapp/index.html)，这是一本很好的指南，可以教您基础知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T04:52:23.970

试试这个代码

```
package com.example.simplemusicplayer;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button playButton = (Button) findViewById(R.id.button1);
        playButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                // TODO Auto generated method stub
                Toast.makeText(MainActivity.this, "Starting to play",
                        Toast.LENGTH_SHORT).show();
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
} 
```

# android - java.lang.RuntimeException: Canvas: 试图使用回收的位图 android.graphics

> ID：15595214
> 
> 赞同：2
> 
> 时间：2013-03-24T04:37:57.837
> 
> 标签：android, exception, bitmap, imageview, android-canvas

我有一个可以经常调用的活动，该活动采用闪屏的形式，显示图像并在 3 秒后完成。但是，如果频繁第二次调用，活动会崩溃。

**下面是代码片段：**

```
public class SplashActivity extends Activity {
    private long splashDelay = 3000; //3 seconds

    ImageView imageView = null;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Bundle b = getIntent().getExtras();
        int value = b.getInt("key");

        imageView = new ImageView(this);
        imageView.setImageResource(Utility.getImageIDofGalleryAlphabets(value));
        setContentView(imageView);

        TimerTask task = new TimerTask()
        {

            @Override
            public void run() {
                 BitmapDrawable bitmapDrawable  = ((BitmapDrawable) imageView.getDrawable());

                    if (null != bitmapDrawable && !bitmapDrawable.getBitmap().isRecycled()) {

                        bitmapDrawable.getBitmap().recycle();
                    } 
                    bitmapDrawable = null;
                imageView = null;
                finish();

            }

        };

        Timer timer = new Timer();
        timer.schedule(task, splashDelay);
    }
} 
```

**以下是运行时异常：**

```
 java.lang.RuntimeException: Canvas: trying to use a recycled bitmap android.graphics.Bitmap@448dec68
at android.graphics.Canvas.throwIfRecycled(Canvas.java:955)
at android.graphics.Canvas.drawBitmap(Canvas.java:1044)
at android.graphics.drawable.BitmapDrawable.draw(BitmapDrawable.java:323)
at android.widget.ImageView.onDraw(ImageView.java:923)
at android.view.View.draw(View.java:6739)
at android.view.ViewGroup.drawChild(ViewGroup.java:1648)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1375)
at android.view.View.draw(View.java:6742)
at android.widget.FrameLayout.draw(FrameLayout.java:352)
at android.view.ViewGroup.drawChild(ViewGroup.java:1648)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1375)
at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1375)
at android.view.View.draw(View.java:6742)
at android.widget.FrameLayout.draw(FrameLayout.java:352)
at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1872)
at android.view.ViewRoot.draw(ViewRoot.java:1422)
at android.view.ViewRoot.performTraversals(ViewRoot.java:1167)
at android.view.ViewRoot.handleMessage(ViewRoot.java:1744)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:143)
at android.app.ActivityThread.main(ActivityThread.java:4914)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
at dalvik.system.NativeStart.main(Native Method) 
```

提前谢谢了

# css - CSS - 使左+右边框与文本的高度完全相同

> ID：15595219
> 
> 赞同：2
> 
> 时间：2013-03-24T04:38:53.507
> 
> 标签：css

看看下面的代码，这是我遇到的一个更大问题的简化版本：

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
        div {border-width:0px 5px; border-style:solid; border-color:black; width:400px; margin:0; padding:0; background:red;}
        div:nth-child(2) {background:green;}
        p {color:yellow; text-transform:uppercase; font-size:40px;margin:0;padding:0;}
</style>
</head>
<body>
<div><p>Hello World</p></div>
<div><p>Hello World</p></div>
</body>
</html> 
```

它应该创建如下内容：

![在此处输入图像描述](../Images/806755f0ae6226062fdc16743c91f1c4.png)

客户要求的是黑色左边框和黑色右边框与黄色文本的高度完全相同。也就是说，黑条的高度不应包括黄色文本的顶部+底部和容器顶部+底部之间的额外空间。

我能想到的一种方法是在包含的 div 上设置一个固定的高度，然后给 div 一个溢出：隐藏。接下来，我将在 p 标签上使用负边距顶部。

谁能想到更好的方法？我真的不喜欢我提到的这种方法，因为我的客户是一个设计纳粹，并且希望在所有不同的操作系统、不同的浏览器和不同的屏幕分辨率上都能做到像素完美。根据我的经验，如果我尝试通过将像素值硬编码到我的 CSS 中来定位元素，并且这些元素仍然需要与大小不同的元素相关（由于动态内容），那可能是一场噩梦。

我的担忧是否合理？如果是这样，是否有更好的方法使边框与文本的高度完全相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T14:42:14.240

这是你想要的：

[jsFiddle](http://jsfiddle.net/Jm5Dw/4/)

只需将 line-height 设置为低于容器的高度，以便字体占据它而没有任何剩余空间。

```
p{    
font-size:40px;
line-height:30px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T05:02:21.317

您可以使用伪元素（不支持 <= IE8）来执行类似的操作。请注意，边框比字体大一点，这只是字体的性质，允许上下有一点空间（请注意，两者都设置为`40px`）。这不能真正帮助跨平台/浏览器/等。除非您想制作像素完美的图像。

[jsFiddle](http://jsfiddle.net/Tyriar/Ugbrk/)

![在此处输入图像描述](../Images/fe3d0e4a00eecde13f21dcbb7e9910fb.png)

**HTML**

```
<div><p class="fancy-border">Hello World</p></div> 
```

**CSS**

```
.fancy-border {
    position:relative;
}
.fancy-border:before {
    content:"";
    display:block;
    z-index:-1;
    position:absolute;
    height:40px;
    width:100%;
    border-width:0px 5px;
    border-style:solid;
    border-color:black;
    top:50%;
    margin-top:-20px;
    left:-5px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-31T07:52:57.080

在 P 标签上给出边框并设置 p 的行高，以便行之间没有空间，然后在它们之间给出边距

# android - Android：仅查看已释放触摸的视图

> ID：15595220
> 
> 赞同：2
> 
> 时间：2013-03-24T04:38:56.827
> 
> 标签：android, drag, touch-event, ontouchlistener, motionevent

我的情况很棘手，希望你能帮助我。我有几个视图（TextViews），在线性布局中一个接一个地水平放置。当我按下 textview1 时，将手指拖动到任何其他 textview 并释放触摸，我希望能够获得手指被抬起的视图（textview）。

我查看了 TouchListener api，它说每个事件都以 ACTION_DOWN 事件动作开始。由于其他文本视图不会触发该事件，我怎样才能获得对我抬起手指的文本视图的引用？我什至尝试过，并且 action_up 只会在触发 action_down 事件的 textView 上触发。

```
 @Override
    public boolean onTouch(View v, MotionEvent event) {
    switch (event.getActionMasked()) {
    case MotionEvent.ACTION_UP:
        Log.i(TAG, "ACTION_UP");
        Log.i(TAG, ((TextView) v).getText().toString());
        break;

    case MotionEvent.ACTION_DOWN:
     Log.i(TAG, "ACTION_DOWN");
     Log.i(TAG, ((TextView)v).getText().toString());
     break;
    }

    return true;
} 
```

任何帮助是极大的赞赏。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T05:13:16.290

您需要在 LinearLayout 中处理所有触摸事件并检查子视图的位置（child.getLeft() 和 child.getRight()）。

```
public boolean dispatchTouchEvent(MotionEvent event){
    int x = event.getX();
    int cc = getChildCount();
    for(int i = 0; i < cc; ++i){
        View c = getChildView();
        if(x > c.getLeft() && x < c.getRight()){
            return c.onTouchEvent(event);
        }
    }
    return false;
} 
```

# html - 表单字段：字段顶部的标题？

> ID：15595223
> 
> 赞同：1
> 
> 时间：2013-03-24T04:39:01.697
> 
> 标签：html, css

如何将标题放在表单字段的顶部，而不是像默认的那样放在一边？无论如何要修复CSS中的代码吗？

```
<label>Input Number</label>
        <input type="text" id="inputnumber" /> 
```

我不想使用中断标签。这只是在标题和字段之间增加了更多空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T04:40:41.900

使用以下 CSS：

```
 <style type="text/css">
     label {
         display: block;
     }
 </style> 
```

或者使用 css 类代替，如果你只想打破一些标签：

```
.block-label {
    display: block;
}
....
<label class="block-label">Input Number</label> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T07:23:15.090

你想要这样的东西[吗](http://jsfiddle.net/NGLN/GsJhZ/)？

HTML：

```
<form>
    <label for="inputnumber1">Input Number 1</label>
    <input type="text" id="inputnumber1" />
    <label for="inputnumber2">Input Number 2</label>
    <input type="text" id="inputnumber2" />
</form> 
```

CSS：

```
input {
    margin-top: 20px;
}
label {
    position: absolute;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T16:11:24.693

我将 2 个标签放在一起，并使用 break 标签来分隔相关的标签。然后调整css间距。它非常有效。谢谢大家。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-24T04:47:02.203

试试这个：-

```
<label>Input Number</label>
<input type="text" id="inputnumber" />

label {
    display:block;
}
input {
    display:block;
} 
```

## 更新

您可以通过多种方式实现列布局：-

1) 使用浮动 div

### html

```
<div class="column">
    <label>Input Number</label>
    <input type="text" id="inputnumber" />
</div>
<div class="column">
    <label>Input Text</label>
    <input type="text" id="inputtext" />
</div> 
```

### CSS

```
label {
    display:block;
}
input {
    display:block;
}
div.column
{
    float:left;
} 
```

2) 使用表格布局

### html

与上面相同的 HTML

### CSS

```
label {
    display:block;
}
input {
    display:block;
}
div.column
{
    display:table-cell;
} 
```

3) 实际表格

### html

```
<table>
    <tr>
        <th>
            <label>Input Number</label>
        </th>
        <th>
            <label>Input Text</label>
        </th>
    </tr>
    <tr>
        <th>
            <input type="text" id="inputnumber" />
        </th>
        <th>
            <input type="text" id="inputtext" />
        </th>
    </tr>
</table> 
```

# python - cx_Freeze 不适用于 pygame（已经尝试过“import pygame._view”）

> ID：15595224
> 
> 赞同：2
> 
> 时间：2013-03-24T04:39:05.123
> 
> 标签：python, python-3.x, cx-freeze, python-3.3

我正在尝试使用以下 setup.py：

```
from cx_Freeze import setup, Executable
exe = Executable(
script="stars.pyw",
)

setup(
    executables = [exe]
    ) 
```

构建以下 Pygame 示例：

```
import random, math, pygame
import pygame._view
from pygame.locals import *

#constants
WINSIZE = [640, 480]
WINCENTER = [320, 240]
NUMSTARS = 150

def init_star():
    "creates new star values"
    dir = random.randrange(100000)
    velmult = random.random()*.6+.4
    vel = [math.sin(dir) * velmult, math.cos(dir) * velmult]
    return vel, WINCENTER[:]

def initialize_stars():
    "creates a new starfield"
    stars = []
    for x in range(NUMSTARS):
        star = init_star()
        vel, pos = star
        steps = random.randint(0, WINCENTER[0])
        pos[0] = pos[0] + (vel[0] * steps)
        pos[1] = pos[1] + (vel[1] * steps)
        vel[0] = vel[0] * (steps * .09)
        vel[1] = vel[1] * (steps * .09)
        stars.append(star)
    move_stars(stars)
    return stars

def draw_stars(surface, stars, color):
    "used to draw (and clear) the stars"
    for vel, pos in stars:
        pos = (int(pos[0]), int(pos[1]))
        surface.set_at(pos, color)

def move_stars(stars):
    "animate the star values"
    for vel, pos in stars:
        pos[0] = pos[0] + vel[0]
        pos[1] = pos[1] + vel[1]
        if not 0 <= pos[0] <= WINSIZE[0] or not 0 <= pos[1] <= WINSIZE[1]:
            vel[:], pos[:] = init_star()
        else:
            vel[0] = vel[0] * 1.05
            vel[1] = vel[1] * 1.05

def main():
    "This is the starfield code"
    #create our starfield
    random.seed()
    stars = initialize_stars()
    clock = pygame.time.Clock()
    #initialize and prepare screen
    pygame.init()
    screen = pygame.display.set_mode(WINSIZE)
    pygame.display.set_caption('Stars')
    white = 255, 240, 200
    black = 20, 20, 40
    screen.fill(black)

    #main game loop
    done = 0
    while not done:
        draw_stars(screen, stars, black)
        move_stars(stars)
        draw_stars(screen, stars, white)
        pygame.display.update()
        for e in pygame.event.get():
            if e.type == QUIT or (e.type == KEYUP and e.key == K_ESCAPE):
                done = 1
                break
            elif e.type == MOUSEBUTTONDOWN and e.button == 1:
                WINCENTER[:] = list(e.pos)
        clock.tick(50)

# if python says run, then we should run
if __name__ == '__main__':
    main() 
```

重要的是要说我使用的是 Pygame 非官方版本：**pygame-1.9.2pre.win-amd64-py3.3.‌exe**

但是脚本在编译之前工作得很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T12:59:36.263

转发作为答案：

这是我们偶尔会看到的错误，但还没有修复。您可以通过在脚本中添加一行来解决它：

```
import re 
```

# php - 从 PHP 切换到 Objective-C

> ID：15595226
> 
> 赞同：-1
> 
> 时间：2013-03-24T04:40:05.680
> 
> 标签：php, objective-c

我已经做了一年的 PHP 开发人员，但是，我想学习 Objective-C 来为 mac 创建桌面应用程序。但是我尝试阅读 Apple 开发人员网站上的一些入门教程，但我没有从中得到很多，因为我可以在教程中制作应用程序，但代码没有意义。

那么我需要从哪里开始呢？我需要从命令行程序开始吗？如果是这样，那将如何运作？

我如何利用我的 PHP 知识来学习 Objective-C？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T04:44:54.397

您的 PHP 知识不会有太大帮助，最好遵循 Objective-C 课程和教程。观看一些面向初学者的网络广播，让您朝着正确的方向前进。

唯一真正为我带来的“PHP”知识是 MVC ......而那不是 PHP。其他一切基本上都是从零开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T04:52:53.897

当我第一次开始使用 Objective-C 和 iOS 时，我阅读[了 Stephen G. Kochan 的“Objective-C 编程，第四版，开发者库”](https://rads.stackoverflow.com/amzn/click/com/0321811909)。这是一个非常好的分步指南，假设几乎没有先验知识。

Kochan 使用命令行来教授基础知识，GUI 编程出现在本书后面。

除非您需要知道如何释放/保留引用，因为您正在使用预先存在的代码，否则我建议您选择第四版，因为它适用于 ARC（自动引用计数）和 iOS 5。

编辑：看起来 Kochan 的书没有涵盖在 Mac 上构建 GUI 应用程序。但它是对 Objective-C 的极好介绍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T04:45:00.403

没有传统意义上的 Objective-C 命令行程序。如果需要，您可以将输出打印到 Xcode 内的终端。这不是一个糟糕的起点，但我建议只查看所有内容，包括 UI。您首先必须下载 Xcode，然后我建议您在 iTunes U 上观看 Paul Haggerty 的课程。他介绍了该语言。Php 和 Objective-C 并不是真正相似的语言，它类似于 C 和 C++ 等语言。他们习惯于做两种完全不同的事情。

编辑：

另外为了学习，看看[Apress](http://www.apress.com)。那里有一些很棒的书，这就是我第一次接触它的方式。但是，没有什么比玩语言和框架更好的了。你需要一段时间才能精通，但这是值得的。

# python - 当属性不可用时在 jinja2 中排序

> ID：15595229
> 
> 赞同：1
> 
> 时间：2013-03-24T04:40:23.303
> 
> 标签：python, jinja2

我有一组文章（使用[pelican](https://github.com/getpelican)生成静态站点），其中包括一个名为酒店的类别。我想对这些酒店进行分类。问题是只有酒店有一个名为“城市”的属性，而其他文章没有，这显然会导致以下错误：

```
Caught exception "'pelican.contents.Article object' has no attribute 'city'". 
```

这是我正在使用的代码：

```
{% for article in articles|sort(attribute='city') %}
{% if article.category == 'hotels' %}
    <a href="hotels/{{ article.slug }}.html">
    <p>{{ article.title }}</p>
    </a>
{% endif %}
{% endfor %} 
```

有没有办法检查属性是否存在并提供一些默认值以便它不会导致错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T04:44:59.600

您可以将您的`if`语句`for`作为过滤器移动到循环中：

```
for article in articles if article.category == 'hotels' | sort(attribute='city') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T05:46:46.590

**如果您只想**遍历酒店，请参阅[Sean Vieira 的回答](https://stackoverflow.com/a/15595252/520779)。如果您想遍历**所有**文章，但要对酒店进行排序，而其余的则以任意顺序排列，您可以使用[宏](http://jinja.pocoo.org/docs/templates/#macros)来完成：

```
{% macro my_macro(article) %}
    ...
{% endmacro %}

{% for a in articles if a.category == 'hotels' | sort(attribute='city') %}
    {{ my_macro(a) }}
{% endfor %}

{% for a in articles if a.category != 'hotels' %}
    {{ my_macro(a) }}
{% endfor %} 
```

这将包括您`my_macro`首先按所需顺序为每家酒店定义的所有内容，然后是每篇不是酒店的文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-08T14:32:35.473

如果您只想显示具有`'city'`属性的条目，并且该列表按 排序`'city'`，请执行以下操作：

```
for article in articles|selectattr("city")|sort(attribute="city") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-04T15:38:55.133

我在寻找类似解决方案时发现了这个页面。最终，我以不同的方式解决了它，它可能对其他人有帮助。

在我的 Pelican 模板之一中，我添加了“post_stats”插件收集的关于大致阅读时间的统计信息。看起来像

```
~{{ article.stats['read_mins']|default("0") }} min read 
```

但是如果插件没有加载，那么“article”对象就没有“stats”属性并且渲染失败。

Jinja 具有用于测试是否定义了变量的内置测试。所以，我想出了这个解决方案

```
~{{ article.stats['read_mins'] if article.stats is defined else "0" }} min read 
```

# php - 你如何在 PHP 中执行 Redis 事务？

> ID：15595230
> 
> 赞同：5
> 
> 时间：2013-03-24T04:40:35.430
> 
> 标签：php, redis

1.  不使用 predis 之类的任何库，从 PHP 进行 Redis 调用的最佳方法是什么？

    我目前使用该`exec`命令，但想知道是否有更好的方法。

    ```
    exec('redis-cli SET foo bar'); 
    ```

2.  其次，您如何执行交易？我可以从命令行这样做......

    ```
    $ redis-cli
    redis 127.0.0.1:6379> MULTI
    OK
    redis 127.0.0.1:6379> INCR FOO
    QUEUED
    redis 127.0.0.1:6379> INCR BAR
    QUEUED
    redis 127.0.0.1:6379> EXEC
    1) (integer) 1
    2) (integer) 1 
    ```

    但是，如果我尝试这样做，每个单独的命令都会单独执行，而不是在同一个事务中，我最终会收到错误`(error) ERR EXEC without MULTI`

    ```
    exec('redis-cli MULTI');
    exec('redis-cli INCR FOO');
    exec('redis-cli INCR BAR');
    exec('redis-cli EXEC'); 
    ```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-10-17T13:51:15.070

使用 Predis，您将拥有类似...

```
$redis = new \Predis\Client('tcp://ip.address:port');
$redis->multi();
$redis->incr('foo');
$redis->incr('bar');
$redis->lrange('mylist', 0, -1);
$data = $redis->exec(); 
```

$data 可能如下所示，具体取决于这些计数器的开头...：

```
[
  1, // foo 
  2, // bar   
  ['fish', 'beans', 'bar', 'baz'], // whatever was in 'mylist'    
] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T05:14:13.317

在 PHP中有两种方法可以连接`Redis`和使用这个库。

[1) 使用来自http://redis.io/clients](http://redis.io/clients)的客户端 Redis 库：- PHP 有 5 个可用的库，您可以自行决定使用其中的任何一个（权衡每个库的优缺点）。一旦你有一个适当的客户端库，它的平面简简单。例如，使用[Predis 库](https://github.com/nrk/predis)

```
require "predis/autoload.php";
Predis\Autoloader::register();
try {
    $redis = new Predis\Client(array(
    "scheme" => "tcp",
    "host" => "127.0.0.1",
        "port" => 6379));

    echo "Successfully connected to Redis";
}
catch (Exception $e) {
    echo "Couldn't connected to Redis";
    echo $e->getMessage();
} 
```

检查链接的 github 页面以获取有关 和 功能的更多`getting`详细信息`setting`。`increment`

2) 如果您选择从 shell 继续使用`Predis`，则在您的服务器上创建一个 shell (.sh) 脚本，将上述 4 个命令（以及您想在事务中执行的任何命令）放在此脚本中，如下所示。

```
#!/bin/bash
#<Your transaction commands go below here> 
```

将此文件重命名为并使用代码中的函数将`<filename>.sh`其作为 shell 命令执行。`exec``PHP`

```
exec('sh <filename>.sh'); 
```

# php - 在表单提交错误中删除“首次”cookie

> ID：15595234
> 
> 赞同：0
> 
> 时间：2013-03-24T04:41:12.073
> 
> 标签：php, forms, cookies

我的主页上有一个弹出式 (CSS) 层，其中包含一个仅在用户第一次访问时才会弹出的联系表单。有一个 cookie 会在一年后过期，告诉弹出窗口出现。提交表单时，会创建 cookie。

该表单发送一封带有 php 脚本的电子邮件（这是我第一次涉足 php）。如果出现错误，我希望删除 cookie，这样当访问者返回主页时，弹出窗口仍然会出现。这是我现在拥有的：

```
if(empty($_POST['address']))
{
    setcookie("firsttimer", "", time()-3600);
    $errors .= "\n Error: all fields are required";
} 
```

当我返回主页时，cookie 没有被删除。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T05:07:35.523

将内容输出到浏览器后，您将无法使用**setcookie 。**甚至没有一个空格字符。基本上，在任何 HTML 或任何空格之前。

# batch-file - 如何将编译结果写入批处理文件中的输出？

> ID：15595235
> 
> 赞同：0
> 
> 时间：2013-03-24T04:41:32.090
> 
> 标签：batch-file

我正在 Windows 批处理文件中编译 C 代码，如下所示：

```
set CURRENT_DIR=%cd%
for /d /r %CODE_DIRS% %%d in (*src) do (
   cd %%~d
   gcc *.c -o program
   cd %CURRENT_DIR%
) 
```

如果有任何错误，我需要在 compile.log 文件中写入编译错误。我应该怎么做？
谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T05:14:31.227

这仅在`gcc`使用默认`STDERR`错误输出时才有效：

```
gcc 2>>logfile.log 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T04:47:21.957

我认为，

```
set CURRENT_DIR=%cd%
for /d /r %CODE_DIRS% %%d in (*src) do (
   cd %%~d
   gcc *.c -o program >> /path/where/you/want/the/result/compile.log
   cd %CURRENT_DIR%
) 
```

# r - R在多个标准上与data.frame相交

> ID：15595238
> 
> 赞同：5
> 
> 时间：2013-03-24T04:42:37.643
> 
> 标签：r, memory, intersect, sqldf

我正在尝试根据多个标准上的两个 data.frames 的交集来填充二进制向量。

我有代码工作，但我觉得只是为了获得二进制向量而内存过多。

当我将代码应用于我的完整数据（40 毫米以上行）时。我开始有记忆问题。

有没有更简单的方法来产生向量？

这是一些样本数据（例如，子样本将仅包括完整样本中的 obs）：

```
ob1_1 <- as.data.frame(cbind(c(1999),c("111","222","666","777")),stringsAsFactors=FALSE)
ob2_1 <- as.data.frame(cbind(c(2000),c("111","333","555","777")),stringsAsFactors=FALSE)
ob3_1 <- as.data.frame(cbind(c(2001),c("111","222","333","777")),stringsAsFactors=FALSE)
ob4_1 <- as.data.frame(cbind(c(2002),c("111","444","555","777")),stringsAsFactors=FALSE)

full_sample <-  rbind(ob1_1,ob2_1,ob3_1,ob4_1)
colnames(full_sample) <- c("yr","ID")

ob1_2 <- as.data.frame(cbind(c(1999),c("111","222","777")),stringsAsFactors=FALSE)
ob2_2 <- as.data.frame(cbind(c(2000),c("333")),stringsAsFactors=FALSE)
ob3_2 <- as.data.frame(cbind(c(2001),c("888")),stringsAsFactors=FALSE)
ob4_2 <- as.data.frame(cbind(c(2002),c("111","444","555","777")),stringsAsFactors=FALSE)

sub_sample <-  rbind(ob1_2,ob2_2,ob3_2,ob4_2)
colnames(sub_sample) <- c("yr","ID") 
```

这是我的工作代码：

```
q_intersect <- ""
q_intersect <- paste(q_intersect , "select       a.yr, a.ID       ", sep=" ")
q_intersect <- paste(q_intersect , "from         full_sample a  ", sep=" ")
q_intersect <- paste(q_intersect , "intersect                     ", sep=" ")
q_intersect <- paste(q_intersect , "select       b.yr, b.ID       ", sep=" ")
q_intersect <- paste(q_intersect , "from         sub_sample b  ", sep=" ")
q_intersect <- trim(gsub(" {2,}", " ", q_intersect ))

intersect_temp <- cbind(sqldf(q_intersect ),1)
colnames(intersect_temp ) <- c("yr","ID","in_both")

q_expand <- ""
q_expand <- paste(q_expand , "select       in_both            ", sep=" ")
q_expand <- paste(q_expand , "from         full_sample a      ", sep=" ")
q_expand <- paste(q_expand , "left join    intersect_temp  b  ", sep=" ")
q_expand <- paste(q_expand , "on           a.yr=b.yr          ", sep=" ")
q_expand <- paste(q_expand , "and          a.ID=b.ID          ", sep=" ")
q_expand <- trim(gsub(" {2,}", " ", q_expand ))

solution <- as.integer(sqldf(q_expand)[,1])
solution [is.na(solution )] <- 0 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T05:03:01.470

目前尚不清楚您要完成什么，但我相信这样的事情会简单得多。

```
library(data.table)
fullDT <- data.table(full_sample, key=c("yr", "ID"))
subDT  <- data.table(sub_sample,  key=c("yr", "ID"))

fullDT[ , intersect := 0L]
fullDT[subDT, intersect := 1, nomatch=0] 
```

这个想法是你将`key`每个设置`data.table`为你想要相交的列。当您致电时，`full[sub], nomatch=0]`您会获得内部联接，我们仅将这些值设置为`1`; 内部连接中未标识的值保留为`0`，如前行中设置的那样。

```
fullDT
#        yr  ID intersect
#   1: 1999 111         1
#   2: 1999 222         1
#   3: 1999 666         0
#   4: 1999 777         1
#   5: 2000 111         0
#   6: 2000 333         1
#   7: 2000 555         0
#   8: 2000 777         0
#   9: 2001 111         0
#  10: 2001 222         0
#  11: 2001 333         0
#  12: 2001 777         0
#  13: 2002 111         1
#  14: 2002 444         1
#  15: 2002 555         1
#  16: 2002 777         1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T05:31:11.290

**更简单的 SQL** 我收集到您希望创建一个具有相同行数的单列数据框，`full_sample`如果相应行`full_sample`具有匹配的`sub_sample`行，则输出中的给定行包含 1，否则为 0。

在这种情况下，可以将多个 SQL 语句压缩为一个更简单的 SQL 语句，如下所示。左连接确保包含所有行，`full_sample`自然连接导致连接发生在两个输入数据帧之间共有的所有列名上。

```
sqldf("select s.yr is not null as solution 
       from full_sample f natural left join sub_sample s") 
```

（顺便说一下，请注意，字符串文字可以跨越多行，因此不必将多行粘贴在一起。）

**内存不足数据库**sqldf 默认使用内存数据库，但您可以通过参数指定文件名（不需要提前存在）`dbname=`以用作内存不足数据库。在这种情况下，您将不受内存限制。

```
sqldf("select s.yr is not null as solution 
       from full_sample f natural left join sub_sample s", dbname = "mydb") 
```

（在某些情况下，您还可以通过使用索引来提高性能。有关示例，请参见[sqldf 主页](http://sqldf.googlecode.com)。）

更新：添加了更简单的 sql 解决方案

# windows-phone-7 - System.Xml 版本 4 与版本 2.0.5.0 冲突

> ID：15595243
> 
> 赞同：2
> 
> 时间：2013-03-24T04:43:37.130
> 
> 标签：windows-phone-7, c#-4.0, visual-studio-2012, xna, system.xml

我已经与这个问题斗争了几个小时，并且阅读了我能找到的所有内容。我有一个引用 System.XML 版本 2.0.5.0 的 WP7 xna 游戏。这引用了内容管道项目。在这个项目中引用了我创建的管道项目。我从管道项目中删除了 System.XML 引用，但没有任何区别。它在某处引用 System.XML 版本 4.0.0.0，因为我在构建时在输出中获得了此信息。

无法解决“System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089”和“System.Xml, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e”之间的冲突。任意选择“System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089”。

问题是 SL 项目将无法构建，因为它正在尝试使用版本 4 并且必须具有 2.0.5.0。它给了我以下错误。

构建内容引发 FileNotFoundException：无法加载文件或程序集 'System.Xml，Version=2.0.5.0，Culture=neutral，PublicKeyToken=7cec85d7bea7798e' 或其依赖项之一。该系统找不到指定的文件。

# ruby-on-rails - 保护 s3 上的文件，仅从应用程序中的链接下载文件

> ID：15595247
> 
> 赞同：2
> 
> 时间：2013-03-24T04:44:02.870
> 
> 标签：ruby-on-rails, ruby, amazon-s3, fog

在我的应用程序中，使用 wicked_pdf 生成 PDF 并使用[雾](http://fog.io/)gem 上传到 Amazon S3。

有用！

我当前的设置是将文件放在由`SecureRandom.urlsafe_base64(40)`. 很难猜。通过默默无闻的安全。然后我将其保存`public_url`在数据库中。

但是，我想保护这些文件，以便它们只能从应用程序中的链接下载。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T07:04:36.340

将 Fog 公共凭据设置为 false，如果您使用的是载波，那么 `@report.report_attachment.url`另一种方法很简单

像这样创建控制器动作

```
def download_report
    @report = Report.find(params[:id])

    # url to access private files on S3 expire in 10 sec
    redirect_to @report.report_attachment.expiring_url(10)
  end 
```

# php - "." 是什么意思？正则表达式中的意思

> ID：15595248
> 
> 赞同：-3
> 
> 时间：2013-03-24T04:44:44.163
> 
> 标签：php, regex, preg-match

你好朋友我是 php 模式匹配的新手。

我尝试使用此代码在“@”和“空格”之间查找文本

```
<?php
    $pattern = "%@(.*?)\s%";
    $string = "this is @test string @match ";
    preg_match_all($pattern, $string, $match);
    echo "<pre>";
    print_r($match);
    echo "</pre>";
    ?> 
```

它工作正常，没有错误......我的问题是什么是“。” 这意味着我知道其他符号的含义，例如

```
% is terminaor
( start of substring
) end of substring
* 0 or more match 
```

等等..但不明白“。”的用法 在这里..任何人都可以解释一下。如果我在其他任何地方错了，请纠正我

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T04:50:48.510

`.`匹配除换行符以外的任何字符。在您的情况下，它将匹配`@`除换行符之外的任何内容和空格，或者它可能只是`'@ '`因为您有 `.*?`这意味着它对于通配符是可选的`.`。要`.`检查包括换行符在内的所有内容，`s`请在分隔符之后添加，`%`例如：`...%s` [s (PCRE_DOTALL)](http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T04:45:36.820

`.`匹配除换行符以外的任何内容，但仅匹配一个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T04:46:33.997

`.`意味着它将匹配任何字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T04:51:36.160

`.`表示任何字符。一个通配符，如果你愿意的话。你会发现它很有用，只要你想匹配一个模式，前面/后面跟着*任何东西*，但你不想麻烦自己那东西是什么。

在上面的正则表达式中，您要匹配`@`，然后是任意数量的字符，直到找到空格。句号让您不必关心您的模式是`@[`还是`@lorem76-ipsum`。它将被匹配。

# css - 如何在我的网页中获得垂直滚动？

> ID：15595255
> 
> 赞同：1
> 
> 时间：2013-03-24T04:45:21.933
> 
> 标签：css, scrollbar, frontend

我做了一个网页：[my-web-page](http://wyzc.de) 但是缩小浏览器窗口时没有垂直滚动条。如何获得垂直滚动？

我的 style.css 文件如下：

[一只忙碌的猫 http://www.cde-express.com/wangying/css.jpg](http://www.cde-express.com/wangying/css.jpg)

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T08:19:46.670

希望这可以帮助你！只需使用“主类”的 css 将此行添加到您的 DIV

```
overflow-y: scroll; 
```

就是这样:) 你的左平移将是可滚动的。如果想要一些时尚的滚动条，请在 CSS 文件的开头添加这些行。

```
/* Let's get this party started */
::-webkit-scrollbar {
    width: 12px;
}

/* Track */
::-webkit-scrollbar-track {
    -webkit-box-shadow: inset 0 0 6px greenyellow; 
    -webkit-border-radius: 10px;
    border-radius: 10px;
}

/* Handle */
::-webkit-scrollbar-thumb {
    -webkit-border-radius: 10px;
    border-radius: 10px;
    background: orange; 
    -webkit-box-shadow: inset 0 0 6px blueviolet; 
}
::-webkit-scrollbar-thumb:window-inactive {
        background: yellow; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T16:19:43.387

滚动条是隐藏的，因为您明确隐藏它。

如果你去掉第`overflow: hidden`24 行的部分，你应该会看到你的滚动条回来了。您的第 24 行应如下所示：

```
body{ margin: 0;padding: 25px 0px 0px 30px; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T13:00:27.280

对于只有垂直滚动，我们可以在 css 中使用 overflow-y 属性。它将它限制为单独的垂直滚动。

# c# - 三元运算符以最小化代码

> ID：15595256
> 
> 赞同：0
> 
> 时间：2013-03-24T04:45:25.700
> 
> 标签：c#

如何使用三元运算符最小化以下代码

```
if (toolButtonState.New == 1)
    ts.Items["tsbNew"].Enabled = true;
else
    ts.Items["tsbNew"].Enabled = false; 
```

请提供一个实现

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T04:47:02.307

您不需要[三元运算符](http://msdn.microsoft.com/en-us/library/ty67wk28%28v=vs.100%29.aspx)。您可以像这样简化它：

```
ts.Items["tsbNew"].Enabled = (toolButtonState.New == 1); 
```

从技术上讲，您可以使用这样的三元运算符，但没有理由：

```
ts.Items["tsbNew"].Enabled = (toolButtonState.New == 1) ? true : false; 
```

`?`通常，如果and之后的表达式`:`不简单地计算为`true`and ，则三元表达式更有用`false`，例如：

```
someControl.ForeColor = (toolButtonState.New == 1) ? Color.Red : Color.Black; 
```

请记住，如果表达式不仅仅是一个简单的单行代码，那么如果您只使用老式`if/else`语句和花括号，您的代码可能更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T04:51:14.420

The [ternary operator](http://msdn.microsoft.com/en-us/library/ty67wk28%28v=vs.100%29.aspx) is of the form:

```
(condition) ? (if true) : (if false) 
```

So a ternary on your piece of code would turn in to:

```
ts.Items["tsbNew"].Enabled = (toolButtonState.New == 1) ? true : false; 
```

You will notice though that the if true value is `true` and the if false value is `false`. You can simply remove the ternary statement and it will do the same thing by setting `.Enabled` to the result of the condition:

```
ts.Items["tsbNew"].Enabled = (toolButtonState.New == 1); 
```

# java - 变量可能尚未在 java 中初始化

> ID：15595259
> 
> 赞同：0
> 
> 时间：2013-03-24T04:45:37.920
> 
> 标签：java, exception-handling

```
import java.util.Scanner;
import java.util.InputMismatchException;
public class Demo
{
    public static void main(String [] agrs){
    Scanner keyBoard = new Scanner(System.in);
    int input;
    do{
        System.out.println("[ 1] Case 1.");
        System.out.println("[ 2] Case 2.");
        System.out.println("[ 3] Case 3.");
        System.out.println("[ 0] Case 0.");
        System.out.print("Your Choice: ");

        try{
            input = keyBoard.nextInt();
        }
        catch(InputMismatchException e){
            System.out.println("Error");
        }

        switch (input){
            default:
                  System.out.println("Default");
                  break;
            case 1:
                  System.out.println("One");
                  keyBoard.next();
                  break;
            case 2:
                  System.out.println("Two");
                  break;
            case 3:
                  System.out.println("Three");
                  break;
            case 0:
                  System.exit(0);
                  break;
        }
    }
    while(input != 0);
} 
```

我想在控制台中创建一个菜单，但出错了。错误：变量输入可能尚未初始化。我知道为什么我会出错，但我不知道如何解决它。我只懂一点英语，所以我希望 mod 编辑我的主题以适应更多谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T04:51:18.233

This should fix your problems with endless loops and invalid inputs, and your compiler error:

```
import java.util.Scanner;
import java.util.InputMismatchException;

public class Demo {

    public static void main(String[] agrs) {

        Scanner keyBoard = new Scanner(System.in);
        // This fixes the compiler error!
        int input = -1;

        do {
            System.out.println("[ 1] Case 1.");
            System.out.println("[ 2] Case 2.");
            System.out.println("[ 3] Case 3.");
            System.out.println("[ 0] Case 0.");
            System.out.print("Your Choice: ");

            try {
                input = keyBoard.nextInt();
            } catch (InputMismatchException e) {
                // This fixes the endless loops on invalid inputs!
                System.out.println("Invalid input " + keyBoard.next());
                input = -1;
            }

            switch (input) {
                default:
                    System.out.println("Default");
                    break;
                case 1:
                    System.out.println("One");
                    keyBoard.next();
                    break;
                case 2:
                    System.out.println("Two");
                    break;
                case 3:
                    System.out.println("Three");
                    break;
                case 0:
                    System.exit(0);
                    break;
            }
        } while (input != 0);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T04:52:37.743

Initialize int input with 0 or any value.Because it get input from user before the use of variable input.

```
int input=0; 
```

It will solves your problem .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T04:52:48.707

this should fix it,

`int input = 0;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T04:53:03.340

You must initialize a variable before you used it..

```
int input; 
```

You can initialize this variable with some dummy value:

```
int input = -1; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-24T04:48:56.040

在实际分配输入之前，可能会从“keyBoard.nextInt()”抛出异常。如果是这样的话，那么想想下面的 switch 语句会发生什么……或者更糟的是，你是如何退出 do-while 循环的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-24T05:03:53.563

您需要将输入变量初始化为某个默认值。它是一个局部变量，默认情况下不初始化局部变量。因此，您需要为它们显式分配一些默认值。

看一下这个 ：

```
 int input;
    do{
      // Some statements
        try {
            input = keyBoard.nextInt();
        } catch(InputMismatchException e) {
            System.out.println("Error");
        }
        // What if the above try-catch block is bypassed. In that case input will not have any value assigned to it. 
        // Hence, you get the error
        switch (input){ 
```

因此，将第一条语句更改如下：

```
int input = -1; 
```

# vb.net - 在哪里存储我的数据？

> ID：15595262
> 
> 赞同：-1
> 
> 时间：2013-03-24T04:45:50.733
> 
> 标签：vb.net

我在 VB.NET 中开发需要存储联系人等相关信息的软件。我不能使用 MS-SQL 或 MySQL 作为数据库，因为如果我这样做，那么如果我必须安装在另一台 PC 上，我也会需要在该 PC 上安装 MS-SQL。VB.NET 中没有“内置数据库”吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T04:51:14.190

Based off your use case about needing to store relational data but not being able to install a full-fledged database server product, it sounds like your application benefit from using an embedded database.

There was a previous question about this [here](https://stackoverflow.com/questions/684595/embedded-database-for-net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T20:54:20.113

如果您正在处理大量数据，那么数据库是合适的解决方案。SQL Express 是免费的，可以很好地与 VB 配合使用，并且在您构建安装程序时，很容易将其打包为您的 msi 文件的先决条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T05:05:44.420

我会推荐**XML**和`Datasets`. 您无需安装任何软件，并且有大量关于如何读取/写入 XML 文件的指南。

另一种解决方案是`SQL Compact`；它有点像 SQLite（不需要安装）

**SQL 紧凑**：http: [//msdn.microsoft.com/en-us/data/ff687142.aspx](http://msdn.microsoft.com/en-us/data/ff687142.aspx)

**XML 解决方案示例： http:** [//www.codeproject.com/Articles/13854/Using-XML-as-Database-with-Dataset](http://www.codeproject.com/Articles/13854/Using-XML-as-Database-with-Dataset) [http://www.daniweb.com/software-development/csharp/threads/343670/use -of-xml-file-in-c-instead-of-database](http://www.daniweb.com/software-development/csharp/threads/343670/use-of-xml-file-in-c-instead-of-database)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T04:49:51.290

您可以使用数据集。看看[这里](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDQQFjAA&url=http%3A%2F%2Fwww.dotnetperls.com%2Fdataset-vbnet&ei=coVOUeGBCsak0QXZ-YHgCQ&usg=AFQjCNFzW3WHfeYnQ491W6QaEZZucMCb8g&sig2=3RrZtYUyEqGe0O8sDQbXuQ&bvm=bv.44158598,d.d2k&cad=rja)。

# javascript - Javascript——如果 h2_JSON 是一个对象 {}（如我的 console.log 所示——为什么它会落入 else 循环？

> ID：15595265
> 
> 赞同：1
> 
> 时间：2013-03-24T04:46:28.283
> 
> 标签：javascript, json

任何想法 - 为什么我的 javascript 中的逻辑在我的 console.log 显示 h2_JSON 是一个对象 {} 时落入此条件的“ELse”部分？

```
if (h2_JSON == {})
{
window.location.href ='/coursecatalog/retrieveCourses/1/' + h1key;

}
else
{   
var html_output = "";

for (var key in h2_JSON)                
    {

   html_output += "<a href=\"javascript:gettingLevel3(\'" + h2_JSON[key] + "\')\">" + key + "</a><br />";
   console.log(html_output);        
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T04:50:10.213

因为`foo == {}`不是检查是否`foo`是*对象*。检查是否`foo`是***那个***对象。但是（在这种情况下）`{}`是一个对象初始化器，所以没有值——甚至没有另一个空对象——等于它：

```
var a = {}, b = {};
a == b; // false 
```

条件**总是**错误的。

如果您想查看某物是否是对象，您可以使用[`typeof`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof)（以及其他技术）：

```
if (typeof h2_JSON === 'object') {
    window.location.href ='/coursecatalog/retrieveCourses/1/' + h1key;
}
else {
    // snip
} 
```

* * *

> 如何检查字典中是否没有任何内容（即没有从服务器返回数据？）

如果一个对象没有可枚举的自身属性，则它是“空的”。[`Object.keys()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)是你的朋友吗？

```
if (Object.keys(h2_JSON).length) {
    // it's not empty
} else {
    // it is empty
} 
```

# asp.net - 在 SQL 中查找错误

> ID：15595267
> 
> 赞同：0
> 
> 时间：2013-03-24T04:46:33.243
> 
> 标签：asp.net, sql

我计划用 HTML 和 SQL 构建一个站点。这是代码：Login.aspx：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Login.aspx.cs" Inherits="Default2" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title>login</title>
<link href="main.css" rel="Stylesheet" type="text/css" />
</head>
<body dir="ltr">
<iframe src="menu.html" width="670px" height="170px"  frameBorder="0"     style="position:absolute;right:23em">
</iframe>
<img src="design\login2.jpg" height="300px"  id="frc">
<form id="lgin" runat="server">
<table class="regtext">
    <tr class="sec">
        <td>username</td>
        <td><input type="text" id="userName" name="userName" class="filld" </td>
    </tr>
     <tr>
        <td>password</td>
        <td><input type="password" id="pass" name="pass" class="filld" </td>
    </tr>
    <input type="submit" class="btn btn-large btn-warning" id="legbtn" value="login" />
</table>
   <%=status %>
</form>
</body>
</html> 
```

服务器端代码（C#）：Login.aspx.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class login : System.Web.UI.Page
{
public string status = "";
protected void Page_Load(object sender, EventArgs e)
{
    if (IsPostBack)
    {
        string userName = Request.Form["userName"];
        string password = Request.Form["pass"];

        string sql = string.Format("SELECT * FROM Users WHERE userName='{0}' ", userName);
        sql += string.Format("AND password='{0}'", password);

        if (MyAdoHelper.IsExist("Database.mdf", sql))
        {
            Session["userName"] = userName;
            sql = string.Format("SELECT * FROM Users WHERE userName='{0}' ", userName);
            sql += string.Format("AND admin='{0}'", true);

            if (MyAdoHelper.IsExist("Database.mdf", sql))
            {
                Session["admin"] = "admin";
                Response.Redirect("Admin.aspx");
            }
            else
                Response.Redirect("ForRegistered.aspx");
        }
        else
            status = "error!";

        }
    }
} 
```

错误是“当前上下文中不存在状态”。问题出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T04:55:01.800

Your page inherits Default2 and not login. Change the inherits in the page directive on your aspx page to inherit the correct class and you should be in better shape.

# ruby - Ruby：使用 new 作为工厂

> ID：15595278
> 
> 赞同：0
> 
> 时间：2013-03-24T04:47:53.373
> 
> 标签：ruby, design-patterns

我正在开发一个小二十一点模拟器。我希望我的卡片类根据传递给 Card.new 的参数自动制作 Ace 而不是卡片。这是我所拥有的：

```
class Card

    include Comparable

    attr_reader :value, :name, :suit

    def self.new(*args, &block)
        *args[0] == "A" ? Ace.new(*args[1]) : super(*args, &block)
    end

    def initialize(name, suit)
        return Ace.new(suit) if name == "A"
        @name, @suit = name, suit
        @value = ["J", "Q", "K"].include?(name) ? 10 : name.to_i
    end

    def <=>(card)
        @value <=> card.value
    end

    def hash
        @value.hash
    end

    def to_s
        return "#{@name}#{@suit}"
    end

    alias eql? ==

end

class Ace < Card

    def initialize(suit)
        @name, @suit, @value = "A", suit, 11
    end

    def toggle
        @value = 1 if @value == 11
        @value = 11 if @value == 1
    end

end 
```

当我运行所有这些时，不幸的是我得到了错误：

```
Blackjack Simulator/cards.rb:22: syntax error, unexpected tEQ, expecting '='if *args[0] == "A" 
```

如果我没记错的话，我应该能够像普通数组一样读取 *args 。这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T04:51:13.560

You don't need the second `*`.

```
def asdf_method(*args)
  args.join(' ') # At this point `args` already is an array
end

> asdf_method 1, 2, 3, 4
=> "1 2 3 4" 
```

# mysql - 如果不存在，我想将`amount`设置为`-1`，下一步与`-1`进行比较

> ID：15595280
> 
> 赞同：1
> 
> 时间：2013-03-24T04:48:16.513
> 
> 标签：mysql, database

我有这些记录：

```
Order
----------
id   amount
1    10
2    NULL
3    20 
```

如果不存在，我想设置`amount`为`-1`，下一步与`-1`.

我写这个：

```
SELECT 
    id,
    COALESCE(o.amount, -1) AS amount2
FROM Order o
WHERE amount2 = -1 
```

但返回此错误：

```
#1054 - Unknown column 'amount2' in 'where clause' 
```

我喜欢返回这个：

```
Order
----------
id   amount2
2    -1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T04:56:38.073

您不能在`WHERE`子句中使用列别名。

尝试这个：

```
SELECT 
  id,
  COALESCE(o.amount, -1) AS amount2
FROM Order o
WHERE COALESCE(o.amount, -1) = -1 
```

> 可以在查询选择列表中使用别名来为列指定不同的名称。您可以在 GROUP BY、ORDER BY 或 HAVING 子句中使用别名来引用列

从这里引用： http: [//dev.mysql.com/doc/refman/5.0/en/problems-with-alias.html](http://dev.mysql.com/doc/refman/5.0/en/problems-with-alias.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T05:08:08.587

我认为，

SELECT id,amount2 FROM (SELECT id, COALESCE(amount, -1)amount2 FROM order)n WHERE n.amount2=-1

好看！

# css - 盒子没有出现css

> ID：15595281
> 
> 赞同：0
> 
> 时间：2013-03-24T04:48:18.033
> 
> 标签：css

我的代码可以在 W3school 的 Tryit 编辑器上运行，但不能在浏览器上运行。

这是我的html：

```
<div align="center">
    <div class id="welcome">
        <iframe src="http://www.cartoonnetwork.com/games/adventuretime/righteousquest/game.swf" width="600" height="400" frameborder="0" marginheight="0" scrolling="no"></iframe><br/><br/>
        <h1>Adventure Time:Righteous Quest</h1>
    </div>
</div> 
```

这是我的CSS：

```
.welcome{    
    border:1px solid white;
    margin:0px;
    color:#000000;
    background:#ffffff;     
} 
```

另外，我在没有 div align 的情况下尝试过它，它产生了相同的结果。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T04:50:42.797

**replace**

```
 <div class id="welcome"> 
```

**With**

```
 <div class="welcome"> 
```

because you used class `.welcome` in css. if you want to use `id` , you need to define your css as `#welcome`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T04:54:20.907

The problem is in your html. You need to change:

```
<div class id="welcome"> 
```

to

```
<div class="welcome"> 
```

**See Fiddle: [http://jsfiddle.net/lflores/qWMHS/](http://jsfiddle.net/lflores/qWMHS/)**

# ios - 发送NSMutableURLRequest时如何在objective-c中使用代理服务器？

> ID：15595284
> 
> 赞同：4
> 
> 时间：2013-03-24T04:48:38.767
> 
> 标签：ios, objective-c, proxy, nsurlrequest

我想使用下面的代理服务器来发送请求。但是我不知道如何使用代理服务器`objective-c`？代理服务器：

```
72.64.146.136: 3128 
```

谁能告诉我？真诚的感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T07:15:23.777

您可以通过 using 使用代理，`CFURL`但更好的选择是使用网络库，例如 AFNetworking，它在其 API 中具有代理支持。

[https://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking)

有关该`CFURL`方法的更多信息，请参阅[为 NSURLConnection 使用代理](https://stackoverflow.com/questions/2776023/using-a-proxy-for-nsurlconnection)

# opencl - OpenCL指向本地内存中的本地内存作为函数参数？

> ID：15595288
> 
> 赞同：3
> 
> 时间：2013-03-24T04:49:05.833
> 
> 标签：opencl, gpu

我想将内核函数中声明的本地内存传递给另一个函数进行一些处理。我想控制它，以便我的所有指针也都在本地空间中声明：

```
void funcB(__local float * __local p)
{
}

__kernel void funcA()
{
    __local float data[256];
    __local float * __local ptr;
    ptr = data;
    funcB(ptr);
} 
```

并且 funcB 声明不起作用，因为：错误：参数可能没有用地址空间限定

有没有办法做这样的事情？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T06:03:06.037

从 OpenCL Spec 1.2 第 6.5.4 节：

> 非内核函数内的所有变量，以及所有函数参数都在 __private 或私有地址空间中。

由于非内核函数是内联的，所以我不确定你想通过这样做来完成什么。

# c# - Linq-to-Entities Join vs GroupJoin

> ID：15595289
> 
> 赞同：219
> 
> 时间：2013-03-24T04:49:24.443
> 
> 标签：c#, linq, linq-to-entities

有人可以解释一下 a`GroupJoin()`是什么吗？

和普通的有什么区别`Join()`？

是常用的吗？

它仅适用于方法语法吗？查询语法呢？（一个 c# 代码示例会很好）

* * *

## 回答 #1

> 赞同：429
> 
> 时间：2013-03-24T13:40:25.783

## 行为

假设您有两个列表：

```
Id  Value
1   A
2   B
3   C

Id  ChildValue
1   a1
1   a2
1   a3
2   b1
2   b2 
```

当您**`Join`**在`Id`字段上列出两个列表时，结果将是：

```
Value ChildValue
A     a1
A     a2
A     a3
B     b1
B     b2 
```

当您**`GroupJoin`**在`Id`字段上列出两个列表时，结果将是：

```
Value  ChildValues
A      [a1, a2, a3]
B      [b1, b2]
C      [] 
```

因此`Join`产生父值和子值的平面（表格）结果。
`GroupJoin`在第一个列表中生成一个条目列表，每个条目在第二个列表中都有一组连接的条目。

这就是为什么在 SQL`Join`中是等价的`INNER JOIN`：没有`C`. While`GroupJoin`相当于`OUTER JOIN`: `C`is 在结果集中，但相关条目的列表为空（在 SQL 结果集中会有一行`C - null`）。

## 句法

所以让这两个列表分别为`IEnumerable<Parent>`和`IEnumerable<Child>`。（在 Linq to Entity 的情况下：）`IQueryable<T>`。

**`Join`**语法是

```
from p in Parent
join c in Child on p.Id equals c.Id
select new { p.Value, c.ChildValue } 
```

返回一个`IEnumerable<X>`其中 X 是具有两个属性的匿名类型`Value`和`ChildValue`. 此查询语法使用底层的[`Join`](http://msdn.microsoft.com/en-us/library/bb534675.aspx)方法。

**`GroupJoin`**语法是

```
from p in Parent
join c in Child on p.Id equals c.Id into g
select new { Parent = p, Children = g } 
```

返回一个`IEnumerable<Y>`其中 Y 是一个匿名类型，由一个类型`Parent`的属性和一个类型的属性组成`IEnumerable<Child>`。此查询语法使用底层的[`GroupJoin`](http://msdn.microsoft.com/en-us/library/bb534297.aspx)方法。

我们可以`select g`在后一个查询中执行，它会选择一个`IEnumerable<IEnumerable<Child>>`，比如一个列表列表。在许多情况下，包含父项的选择更有用。

## 一些用例

### 1\. 制作扁平外连接。

如前所述，声明...

```
from p in Parent
join c in Child on p.Id equals c.Id into g
select new { Parent = p, Children = g } 
```

... 生成具有子组的父母列表。这可以通过两个小的添加变成一个父子对的平面列表：

```
from p in parents
join c in children on p.Id equals c.Id into g // <= into
from c in g.DefaultIfEmpty()               // <= flattens the groups
select new { Parent = p.Value, Child = c?.ChildValue } 
```

结果类似于

```
Value Child
A     a1
A     a2
A     a3
B     b1
B     b2
C     (null) 
```

请注意，*范围变量* `c`在上述语句中被重用。这样做，任何语句都可以通过将等效项添加到现有语句`join`来简单地转换为 an 。`outer join``into g from c in g.DefaultIfEmpty()``join`

这就是查询（或综合）语法大放异彩的地方。方法（或流利的）语法显示了真正发生的事情，但很难写：

```
parents.GroupJoin(children, p => p.Id, c => c.Id, (p, c) => new { p, c })
       .SelectMany(x => x.c.DefaultIfEmpty(), (x,c) => new { x.p.Value, c?.ChildValue } ) 
```

`outer join`所以LINQ 中的 flat是`GroupJoin`, 由`SelectMany`.

### 2\. 维护秩序

假设父母的名单有点长。`Id`某些 UI以固定顺序生成选定父项的列表作为值。让我们使用：

```
var ids = new[] { 3,7,2,4 }; 
```

现在必须按照这个确切的顺序从父母列表中过滤选择的父母。

如果我们这样做...

```
var result = parents.Where(p => ids.Contains(p.Id)); 
```

... 的顺序`parents`将决定结果。如果父母按 排序`Id`，结果将是父母 2、3、4、7。不好。但是，我们也可以使用`join`来过滤列表。通过使用`ids`作为第一个列表，订单将被保留：

```
from id in ids
join p in parents on id equals p.Id
select p 
```

结果是父母 3、7、2、4。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-24T10:06:00.410

根据[eduLINQ](http://codeblog.jonskeet.uk/category/edulinq/)：

> 掌握 GroupJoin 功能的最佳方法是考虑 Join。在那里，总体思路是我们查看“外部”输入序列，从“内部”序列中找到所有匹配项（基于每个序列上的键投影），然后产生匹配元素对。**GroupJoin 是类似的，只是它不是产生元素对，而是根据每个“外部”项和匹配的“内部”项的序列为每个“外部”项生成一个结果**。

唯一的区别在于 return 语句：

**加入**：

```
var lookup = inner.ToLookup(innerKeySelector, comparer); 
foreach (var outerElement in outer) 
{ 
    var key = outerKeySelector(outerElement); 
    foreach (var innerElement in lookup[key]) 
    { 
        yield return resultSelector(outerElement, innerElement); 
    } 
} 
```

**群组加入**：

```
var lookup = inner.ToLookup(innerKeySelector, comparer); 
foreach (var outerElement in outer) 
{ 
    var key = outerKeySelector(outerElement); 
    yield return resultSelector(outerElement, lookup[key]); 
} 
```

在这里阅读更多：

*   [重新实现 LINQ to Objects：第 19 部分 - 加入](http://codeblog.jonskeet.uk/2010/12/31/reimplementing-linq-to-objects-part-19-join/)

*   [重新实现 LINQ to Objects：第 22 部分 - GroupJoin](http://codeblog.jonskeet.uk/2011/01/01/reimplementing-linq-to-objects-part-22-groupjoin/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-13T02:06:20.460

假设您有两个不同的类：

```
public class Person
{
    public string Name, Email;

    public Person(string name, string email)
    {
        Name = name;
        Email = email;
    }
} 
```

```
class Data
{
    public string Mail, SlackId;

    public Data(string mail, string slackId)
    {
        Mail = mail;
        SlackId = slackId;
    }
} 
```

现在，让我们准备要使用的数据：

```
var people = new Person[]
    {
        new Person("Sudi", "sudi@try.cd"),
        new Person("Simba", "simba@try.cd"),
        new Person("Sarah", string.Empty)
    };

    var records = new Data[]
    {
        new Data("sudi@try.cd", "Sudi_Try"),
        new Data("sudi@try.cd", "Sudi@Test"),
        new Data("simba@try.cd", "SimbaLion")
    }; 
```

您会注意到 sudi@try.cd 有两个 slackId。我这样做是为了演示 Join 的工作原理。

现在让我们构造查询以将 Person 与 Data 连接起来：

```
var query = people.Join(records,
        x => x.Email,
        y => y.Mail,
        (person, record) => new { Name = person.Name, SlackId = record.SlackId});
    Console.WriteLine(query); 
```

构建查询后，您还可以使用 foreach 对其进行迭代，如下所示：

```
foreach (var item in query)
    {
        Console.WriteLine($"{item.Name} has Slack ID {item.SlackId}");
    } 
```

让我们也输出 GroupJoin 的结果：

```
Console.WriteLine(

        people.GroupJoin(
            records,
            x => x.Email,
            y => y.Mail,
            (person, recs) => new {
                Name = person.Name,
                SlackIds = recs.Select(r => r.SlackId).ToArray() // You could materialize //whatever way you want.
            }
        )); 
```

您会注意到*GroupJoin*会将所有 SlackId 放在一个组中。

# comments - 评论在 hive CLI 中不起作用

> ID：15595295
> 
> 赞同：16
> 
> 时间：2013-03-24T04:50:12.730
> 
> 标签：comments, hive

我看过其他帖子说双连字符 - 应该是一个蜂巢评论。但至少在 hive CLI 中不能正常工作；

```
hive> -- some comment;
FAILED: Parse Error: line 0:-1 cannot recognize input near '<EOF>' '<EOF>' '<EOF>' 
```

即使在 Eduardo Capriolo 的书中，他也这么说：

```
As of Hive v0.8.0, you can embed lines of comments that start with the string --,
for example:
-- Copyright (c) 2012 Megacorp, LLC.
-- This is the best Hive script evar! 
```

该版本显然是 0.8.1（我使用的是最新的 Amazon EMR）

```
hadoop@ip-10-114-113-44:~$ hive
bin is /home/hadoop/.versions/hive-0.8.1/bin 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-24T10:28:29.707

案例很简单 Hive 接受评论，但不是单行。如果你试试：

```
--comment
show tables; 
```

或者

```
show tables
--comment; 
```

一切都会好起来的。GL 与 Hive 的斗争！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-01T13:00:18.427

我找到了一个中等的解决方法：

在每个注释行之后放置分号，如下所示：

```
-- some comment  ; 
```

然后会发生什么 - CLI 确实发出错误（仍然！），但至少不会破坏随后的代码行。

我现在在几个 hive 脚本中使用这种技术，它允许我将片段剪切并粘贴到 CLI 中（带有提到的警告）。

# php - 通过在某些条件下减去一个值来更新 Mysql 列？

> ID：15595296
> 
> 赞同：2
> 
> 时间：2013-03-24T04:50:15.297
> 
> 标签：php, mysql, sql, cron

我有一些桌子

```
身份证姓名点
----------------------
1 个名字 1 0
2 名称2 15
3 名称3 0
4名4 20

```

我想通过更新积分表`$db->Query`

我想从点中减去 1，但条件是点是否大于 0。

所以当更新表显示像这样

```
身份证姓名点
----------------------
1 个名字 1 0
2 名称2 14
3 名称3 0
4 名称4 19

```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T04:52:05.310

Try

```
UPDATE yourtable
   SET points = points - 1
 WHERE points > 0 
```

**[SQLFiddle](http://sqlfiddle.com/#!2/d44a5/1)**

To execute it using mysqli extension you can do something like this

```
$db = new mysqli('localhost', 'user', 'password', 'dbname');
if ($db->connect_error) {
    die("Connect Error: " .$db->connect_error); //TODO: better error handling
}

$sql = "UPDATE yourtable
           SET points = points - 1
         WHERE points > 0";

if (!$db->query($sql)) {
    die("Update failed. Error: " .$db->error); //TODO: better error handling
} 
```

# c++ - Linking two pages with a button in Blend

> ID：15595298
> 
> 赞同：1
> 
> 时间：2013-03-24T04:50:32.793
> 
> 标签：c++, xaml, visual-studio-2012, blend

I'm using Blend for Visual Studio 2012 and I'm making a Windows Store App with XAML and C++. I've designed a variety of pages of content for my app and I have a user interface for the buttons and controls. How would I go about linking two of these pages with a button? I can't seem to find the appropriate property in the 'properties' tab. In 'event' mode, 'click' is completely greyed out, as well as the other events. If it is something I would have to code, would that code go in the page's XAML file or C++ file? Thanks in advance.

# javascript - 仅在需要时显示 div

> ID：15595315
> 
> 赞同：0
> 
> 时间：2013-03-24T04:51:50.610
> 
> 标签：javascript, html

我在我的页面上使用 a 作为警报栏。用户注销后出现注销消息。但是 div 总是出现。我希望它仅在用户注销后显示。

我的代码就是这样使 div 读取消息

```
 <?php

if ($_GET['msg'])
{
       echo '<div id="success_message">' . base64_decode(urldecode($_GET['msg'])) . '</div>';

}
?> 
```

我想我们可以在此代码中添加一些内容，使其在注销后访问页面后显示。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T04:54:09.543

也许

```
if (isset($_GET['msg'])) {
  ...
} 
```

并且您应该在用户注销后将其设置在此代码之前的某个位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T05:12:09.637

`if($_GET['var'])`不再有效。

尝试使用该函数`'isset'`来验证字符串的存在。

```
if(isset($_GET['param'])) {
   // ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T06:31:05.543

采用

```
if(isset($_GET["msg"]))
{
echo '<div id="success_message">' . base64_decode(urldecode($_GET['msg'])) . '</div>';
} 
```

# node.js - 节点应用程序使用情况跟踪，我应该怎么做？

> ID：15595321
> 
> 赞同：0
> 
> 时间：2013-03-24T04:52:42.257
> 
> 标签：node.js, mongodb, express

我正在构建一个允许同时观看多个游戏流的应用程序。我希望客户端在开始观看流以及客户端何时停止观看该流时告诉节点服务器。这样，我可以跟踪用户观看特定流的时长，并将该流添加到他们的观看历史记录中。

我的问题是：我该怎么做呢？我正在考虑设置保持活动的 ping，一旦我发现最后一个是自上一个以来的合理时间量，则假定客户端已停止观看流。正确设置似乎有点麻烦。我想知道是否有一个图书馆可以让我轻松做到这一点。我查看了 socket.io，但我并不真正了解它的目的，或者它是否适用于我的情况。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T05:01:03.883

您可以使用 socket.io 来执行此操作。socket.io 中有内置的心跳功能。你需要做的是处理`disconnected`事件。更多信息：[https ://github.com/LearnBoost/socket.io-spec](https://github.com/LearnBoost/socket.io-spec)

**更新：**

在您的客户端上：

```
socket.emit('startWatch', { streamid: 'stream1' });
....
socket.emit('stopWatch', {}); 
```

在您的服务器上：

```
io.sockets.on('connection', function (socket) {
  // listen to startWatch event
  socket.on('startWatch', function (msg) {
     // handle startWatch here
  });

  //listen to stopWatch event
  var stopWatchHandler = function () {... }
  socket.on('stopWatch", stopWatchHandler);
  socket.on('disconnected", stopWatchHandler);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T05:01:18.137

Socket.io（或类似的）是你想要的。

```
io.sockets.on('connection', function (socket) {
  console.log('user connected');
  socket.on('disconnect', function () {
    console.log('user disconnected');
  });
}); 
```

# search - 如何将 2 个过滤器应用于我的 ElasticSearch 查询对象？

> ID：15595327
> 
> 赞同：0
> 
> 时间：2013-03-24T04:53:06.557
> 
> 标签：search, lucene, indexing, elasticsearch

我想查询我的索引，但应用 2 个过滤器。一是价格，二是地理位置。

```
var qobject = {
        query:{
            custom_score:{
                query:{
                    filtered:{
                        query:{
                            multi_match:{
                                query: q,
                                fields: ['title','description'],
                            }
                        },
                        filter:{
                            range:{
                                price: { from: 0, to: max_price }
                            },
                            geo_distance:{
                                'distance': distance + 'mi',
                                'location':{
                                    lat: lat,
                                    lon: lon
                                }
                            }
                        }
                    }
                },
                script: '_score + _source["price"] * 10'
            }
        }
    }

    elasticSearchClient.search('products', 'products', qobject) 
```

如您所见，此查询对象导致错误。

但是，如果我**删除 range 或 geo_distance**，一切都很好！但我想要两个过滤器......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T11:58:46.463

使用“和”过滤器。

[http://www.elasticsearch.org/guide/reference/query-dsl/and-filter.html](http://www.elasticsearch.org/guide/reference/query-dsl/and-filter.html)

未经测试：

```
var qobject = {
        query:{
            custom_score:{
                query:{
                    filtered:{
                        query:{
                            multi_match:{
                                query: q,
                                fields: ['title','description'],
                            }
                        },
                        filter:{
                            "and" : [
                                range:{
                                    price: { from: 0, to: max_price }
                                },
                                geo_distance:{
                                    'distance': distance + 'mi',
                                    'location':{
                                        lat: lat,
                                        lon: lon
                                    }
                                }
                            ]
                        }
                    }
                },
                script: '_score + _source["price"] * 10'
            }
        }
    } 
```

解释：“过滤查询”的“过滤器”部分实际上可以是您喜欢的任何类型的过滤器，包括“和”。一旦这个概念清晰，构建复杂的查询/过滤器就很简单了。

# vb.net - VB Express2010：获取 PictureBox 数组中的索引或标签

> ID：15595328
> 
> 赞同：1
> 
> 时间：2013-03-24T04:53:13.450
> 
> 标签：vb.net

VB Express 2010\. 创建了 PictureBox 的棋盘格 - **Dim Board(64) as PictureBox** 接下来，为每个正方形分配一个图像 - 类似于每一行：

```
For x = 1 to 64
    If (x Mod 2 = 1) then 
        Board(x).Image = My.Resources.wsquare
    Else
        Board(x).Image = My.Resources.bsquare 
```

然后将正方形放在 FormI 上并将 .tag 属性 = 分配给索引，如下所示：

```
For x = 1 to 64
    Board(x).Location = New Point(y,x1)
    Me.Controls.Add(Board(x))
    Board(x).tag = x
    .....parameters for location y, x1 incremented as necessary....
Next 
```

**所有这一切都很好，并产生了棋盘格。** 现在我需要知道单击正方形时的索引或标签。我不确定在代码中如何或在何处创建 EventHandler 以及如何在后续方法中引用索引或标记。以下是错误的，但我正在尝试。 *Board.Click 不是数组的事件*非常感谢一些代码示例或说明来解决我的困境。在这方面很新。提前致谢

```
Private Sub Clicked()
    AddHandler Board.Click, New EventHandler(AddressOf Board_Click)
End Sub

Private Sub Board_Click()

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T05:20:30.587

我认为您非常接近；您似乎被挂断的一点是，事件处理程序需要绑定到数组中的每个元素，`Board`而不是数组本身（这就是您想要做的，看起来像）。

这里有一些步骤可以帮助您入门....首先，我将修改此循环：

```
For x = 1 to 64
    If (x Mod 2 = 1) then 
       Board(x).Image = My.Resources.wsquare
Else
    Board(x).Image = My.Resources.bsquare 
```

变成这样的东西：

```
For x = 1 to 64
    Board(x).Name = "Board_" + x.ToString()
    If (x Mod 2 = 1) then 
       Board(x).Image = My.Resources.wsquare
Else
    Board(x).Image = My.Resources.bsquare 
```

所以我们使用 PictureBox 的[Name](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.name.aspx)属性来识别每个单独的 PictureBox。我们需要这个，以便您知道点击了哪个项目。

现在让我们为点击创建一个虚拟处理程序，例如：

```
Private Sub PictureBox1_Click(sender As Object, e As EventArgs)
    Dim clickedBox As PictureBox = CType(sender, PictureBox)

    MessageBox.Show(clickedBox.Name)
End Sub 
```

在这里，我们只是从[Click](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.click.aspx)事件中获取单击的 PictureBox，将其转换为 PictureBox，然后发出其 Name 属性（记住我们之前设置过）。

所以现在我们有了这个，我们可以再次访问您的 For 循环并将处理程序绑定到数组中每个元素的单击事件，例如：

```
For x = 1 to 64
    Board(x).Name = "Board_" + x.ToString()
    AddHandler Board(x).Click, New EventHandler(AddressOf Me.PictureBox1_Click)
    If (x Mod 2 = 1) then 
       Board(x).Image = My.Resources.wsquare
Else
    Board(x).Image = My.Resources.bsquare 
```

现在，如果您运行它，您应该会在单击 PictureBox 时看到一个显示“Board_23”或“Board_1”或类似内容的消息框。

现在要找出`Board`被点击元素的数组中的索引，您可以使用类似的东西，例如，[Substring](http://msdn.microsoft.com/en-us/library/system.string.substring.aspx)或[Replace](http://msdn.microsoft.com/en-us/library/system.string.replace.aspx)结合[Convert](http://msdn.microsoft.com/en-us/library/sf1aw27b.aspx)来获取名称的数字部分。由于我们之前命名它的方式，名称的数字部分是数组索引。

**PS。**自从我做实际的 VB.NET 以来已经有一段时间了，但我认为数组是从零开始的，而不是从一开始的。我不确定，但你可能想在你的代码中检查一下（正如我所说，我有一段时间没有做过真正的 VB.NET）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-28T09:35:28.057

```
Private Sub Form1_Load(sender As Object, e As System.EventArgs) Handles Me.Load
    For x = 0 To 16
        Board(x) = New PictureBox
        Board(x).Name = "Board_" + x.ToString()
        AddHandler Board(x).Click, New EventHandler(AddressOf Me.PictureBox1_Click)
        If (x Mod 2 = 1) Then
            Board(x).Image = My.Resources.green_bullet
        Else
            Board(x).Image = My.Resources.yellow_bullet
        End If
        Board(x).Location = New Point(Board(x).Width * x, 10)
        Me.Controls.Add(Board(x))
        Board(x).Tag = x
    Next x
End Sub 
```

# scala - Scala count of words in a Map

> ID：15595332
> 
> 赞同：1
> 
> 时间：2013-03-24T04:53:47.320
> 
> 标签：scala, map, frequency

I have a Map[String,String] wherein the last key,value pair is "Text"->The text of the documents. I wish to calculate the count of each word in the document and I was thinking of having another map which has a count of words in each document. I have a map like Map("id"->12,"text"->"The dog likes the cat") and I am trying to get another map which is Map("The"->2,"dog"->1,"likes"->1,"cat"->1) I have the following code:

```
val Counts = mutable.Map[String, Int]().withDefault(x=>0)
var tfCounts:Map[String,Int]()
for(i<-1 to newsMap.size){
    val tfMap = newsMap.get("newsText").slice(i-1,i).map(x => x.split("\\s+")).toList
    for(token<-tfMap)
        counts(token) +=1 
    tfCounts = tfCounts++ counts
} 
```

I don't know how to reset the counts map because I want separate counts of words for each document.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T08:10:45.860

```
scala> val document = Map("id"->12,"text"->"The dog likes the cat")
document: scala.collection.immutable.Map[String,Any] = Map(id -> 12, text -> The dog likes the cat)

scala> document("text").asInstanceOf[String].split(" ").groupBy(_.toLowerCase).mapValues(_.size)
res3: scala.collection.immutable.Map[String,Int] = Map(cat -> 1, dog -> 1, likes -> 1, the -> 2) 
```

# mongodb - 在mongoid中embedded_in的意义

> ID：15595342
> 
> 赞同：3
> 
> 时间：2013-03-24T04:55:03.153
> 
> 标签：mongodb, mongoid, polymorphism

我试图了解 mongoid 中的关系，但无法超越以下内容：

```
class Band
  include Mongoid::Document
  embeds_many :photos
end

class Photo
  include Mongoid::Document
  embedded_in :Band
end 
```

在上面的代码中，Instructing Band to embed_many phtos 应该将完整的照片数据存储在 Band 内。但是，将 embedded_in 放入 Photo 类有什么必要？如果我们不把embedded_in放到Photo里面，会不会自动多态呢？

此外，查询是否会`Photo.all`获取嵌入在 Bands 中的照片？如果是，这是embedded_in的原因吗？一个类可以有多个embedded_in 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T18:39:48.320

`embedded_in`需要调用才能将方法添加到类`Photo`，以便您可以访问嵌入照片的波段。就像您使用一样`has_many`，`belongs_to`虽然外键仅存储在具有`belongs_to`. 它还添加[了检查照片是否持久化的方法](https://github.com/mongoid/mongoid/blob/master/lib/mongoid/relations/embedded/in.rb#L89)等。是的，[一个班级](https://stackoverflow.com/questions/5349432/mongoid-embedding-a-document-in-multiple-documents)[可以有多个`embedded_in`](https://stackoverflow.com/questions/5349432/mongoid-embedding-a-document-in-multiple-documents)。

`Photo.all`不会给你嵌入其他类的照片。通常，如果您只通过另一个模型访问模型，您会嵌入它。使用与外键的关系时，一次获取整个文档比再次往返数据库更便宜。因此，如果您需要类似的东西`Photo.all`，则不应嵌入`Photo`.

# mysql - 为外键定义（列类型）

> ID：15595344
> 
> 赞同：0
> 
> 时间：2013-03-24T04:55:13.210
> 
> 标签：mysql, database-design

我正在使用 MySQL 设计数据库，现在正处于记录阶段，我必须在其中定义每个列的数据类型。当涉及到每个表本身时，没有问题，但是我对 1-m 关系有问题，因为我不知道如何定义外键的数据类型（因为在其原始表中，它的类型是“SERIAL” - 因为它的主键）但是当它是 FK 时我不能将它定义为 SERIAL 。你能帮助我吗 ？

EX : PUBLISHERS [ **Publisher_ID (SERIAL)** | Publisher_Name ( Varchar(50) ) | .. ETC]

书籍 [ **Book_ID (SERIAL)** | **Publisher_ID (?)** | Book_Price ( 十进制 (5,2) ) | .. ETC ]

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T05:05:26.420

`SERIAL`在 MySql 中只是`BIGINT UNSIGNED NOT NULL AUTO_INCREMENT UNIQUE`. 因此 `BIGINT UNSIGNED`在定义 FK 列时使用，像这样

```
CREATE TABLE publishers(
publisher_id BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
publisher_name VARCHAR(50),
PRIMARY KEY(publisher_id)
);

CREATE TABLE books(
book_id INT NOT NULL AUTO_INCREMENT,
publisher_id BIGINT UNSIGNED,
title VARCHAR(100),
book_price DECIMAL(5,2),
PRIMARY KEY (book_id),
CONSTRAINT FOREIGN KEY (publisher_id) REFERENCES publishers (publisher_id)
); 
```

**[SQLFiddle 示例](http://sqlfiddle.com/#!2/ae01e/1)**

# php - PHP 垃圾回收和函数

> ID：15595347
> 
> 赞同：4
> 
> 时间：2013-03-24T04:55:36.000
> 
> 标签：php, memory-leaks, phpquery

我在循环中使用 PHPQuery（HTML 解析器），并且每次使用`phpQuery::unloadDocuments()`. 循环简化为：

```
while(...){
  $doc="parsed stuff";
  ...
  unset($doc);
} 
```

但是，由于脚本在一段时间后内存不足，因此存在内存泄漏。网上搜索后，有人建议，为了避免内存泄漏，我应该把它包装在一个函数中，所以我改成这样：

```
function r(){
  $doc="parsed stuff";
  ...
  unset($doc);
}
while(...)
  r(); 
```

现在，内存泄漏停止了。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T05:44:43.647

请参阅此[http://php.net/manual/en/language.references.unset.php](http://php.net/manual/en/language.references.unset.php)，那里有很好的例子。

# git - 替换所有历史记录中的空消息

> ID：15595349
> 
> 赞同：0
> 
> 时间：2013-03-24T04:55:49.027
> 
> 标签：git, version-control

我有一个从 Subversion 导入的存储库，许多提交都有空消息。有没有办法遍历所有历史并交互替换每条空消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T05:25:27.320

使用`git rebase --interactive <first commit>`；为此，我已经多次使用它。

这将为您提供一个提交列表，最旧的在顶部，`pick`旁边是它们。在此下方，评论部分是有关各种选项的说明，这些选项允许您更改提交、重新编写提交消息、将提交压缩为一个甚至完全删除提交。

一些参考资料供进一步阅读：

*   [git rebase 手册页](https://www.kernel.org/pub/software/scm/git/docs/git-rebase.html)
*   [**关于变基的Git Pro**书籍部分](http://git-scm.com/book/en/Git-Branching-Rebasing)
*   [**关于重写历史的Git Pro**书籍部分](http://git-scm.com/book/en/Git-Tools-Rewriting-History#Changing-Multiple-Commit-Messages)（包括更改多个提交消息的部分）

请注意，正如最后一个参考所暗示的那样，这会改写历史。这可能会给已经克隆存储库的任何人带来问题。

# emacs - Emacs 的单独 GUI 和 CLI 主题？

> ID：15595352
> 
> 赞同：1
> 
> 时间：2013-03-24T04:56:38.500
> 
> 标签：emacs, emacs23, dot-emacs, emacs24, xemacs

为了避免出现白色背景，我将默认的 emacs 背景颜色更改为“深灰色”——它非常适合晚上在 GUI 中工作。. . 但是，emacs 也是我的终端默认编辑器，并且使用新的背景颜色基本上无法阅读。

有没有办法让我获得 GUI 的背景颜色，然后在终端中启动 emacs 以编辑 PKGBUILDS 和其他文件时的所有默认设置（黑色背景和默认语法突出显示）？

谢谢！我试过在网上搜索无济于事。. .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T05:43:03.373

您可以在 init.el 中添加类似以下内容。

```
(when (display-graphic-p)
  (set-background-color "darkgrey")) 
```

如果在终端中运行，它不会改变背景颜色。

# spring - Hibernate Validator ValidationMessages.properties 可以支持UTF-8吗？

> ID：15595353
> 
> 赞同：0
> 
> 时间：2013-03-24T04:57:07.380
> 
> 标签：spring, hibernate, spring-mvc, validation

Hibernate Validator 4.2 是否支持 UTF-8 ？
我用 Spring 3.0 配置了 Hibernate Validation，它与英语很好地配合。但是当将语言环境更改为韩语时，它会奇怪地显示：ë¹ë°ë²í¸ë ë¹ì ë ì ììµëë¤。
如何使 Spring 中的 Hibernate Validator 支持 UTF-8 ？

我已经在调度程序 servlet.xml 中进行了配置：

```
<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basenames" >
        <list>
            <value>classpath:/architectgroup/udr/resources/lan</value>
            <value>classpath:ValidationMessages</value>
        </list>
    </property>

    <property name="defaultEncoding" value="UTF-8"/>
</bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T09:29:16.693

可能与休眠验证无关。您的代码或配置中可能有一个地方使用了错误的编码。检查韩语字符在正常页面中是否正确显示，以及验证消息是否在控制台上正确显示（例如，在加载验证消息并触发 Hibernate 验证器的单元测试中）

# java - Struts 2 + Hibernate 无法解决空指针

> ID：15595356
> 
> 赞同：0
> 
> 时间：2013-03-24T04:57:58.947
> 
> 标签：java, hibernate, jakarta-ee, struts2, struts2-s2hibernate

**struts.xml**

```
 <!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <package name="default" extends="hibernate-default">
                <action name="addEmp" method="add" class="app.web.EmployeeAction">
            <result name="success" type="redirect">/success.jsp</result>
        </action>
    </package>
</struts> 
```

**休眠.chg.xml**

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>

    <session-factory>

        <!-- Database connection settings -->
        <property name="connection.driver_class">
            com.mysql.jdbc.Driver
        </property>
        <property name="connection.url">
            jdbc:mysql://localhost:3306/struts
        </property>
        <property name="connection.username">pluto</property>
        <property name="connection.password">admin</property>

        <!-- JDBC connection pool (use the built-in) -->
        <property name="connection.pool_size">1</property>

        <!-- SQL dialect -->
        <property name="dialect">
            org.hibernate.dialect.MySQLDialect
        </property>

        <!-- Enable Hibernate's automatic session context management -->
        <property name="current_session_context_class">thread</property>

        <!-- Disable the second-level cache  -->
        <property name="cache.provider_class">
            org.hibernate.cache.NoCacheProvider
        </property>

        <!-- Echo all executed SQL to stdout -->
        <property name="show_sql">true</property>

        <!-- Drop and re-create the database schema on startup -->
        <property name="hbm2ddl.auto">update</property>

        <mapping class="app.domain.User" />
                <mapping class="chapter1.Employee" />

    </session-factory>

</hibernate-configuration> 
```

**雇员.java**

```
package app.domain;

import javax.persistence.Entity;
import javax.persistence.Id;

@Entity
public class Employees {
    private int empId;
    private String empName;

    @Id
    public int getEmpId() {
        return empId;
    }

    public void setEmpId(int empId) {
        this.empId = empId;
    }

    public String getEmpName() {
        return empName;
    }

    public void setEmpName(String empName) {
        this.empName = empName;
    }

} 
```

**HibernateUtil.java**

```
package app.domain;

import chapter1.Employee;
import org.hibernate.cfg.AnnotationConfiguration;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;

public class HibernateUtil {

    private static final SessionFactory sessionFactory;

    static {
        try {
            AnnotationConfiguration config = new AnnotationConfiguration();
        config.addAnnotatedClass(Employee.class);

        config.configure("hibernate.cfg.xml");
        //new SchemaExport(config).create(true,true);

        sessionFactory = config.buildSessionFactory();

        } catch (Throwable ex) {
            // Log the exception. 
            System.err.println("Initial SessionFactory creation failed." + ex);
            throw new ExceptionInInitializerError(ex);
        }
    }

    public static SessionFactory getSessionFactory() {
        return sessionFactory;
    }
} 
```

**EmpDAO.java**

```
package app.dao;

import app.domain.Employees;

public interface EmpDAO {
    public void saveEmp(Employees emps);
} 
```

**EmpDAOImpl.java**

```
package app.dao;

import app.domain.Employees;
import com.googlecode.s2hibernate.struts2.plugin.annotations.SessionTarget;
import com.googlecode.s2hibernate.struts2.plugin.annotations.TransactionTarget;
import org.hibernate.Session;
import org.hibernate.Transaction;
public class EmpDAOImpl implements EmpDAO {
    @SessionTarget
    Session session;

    @TransactionTarget
    Transaction transaction;

  @SuppressWarnings("unchecked")

    @Override
    public void saveEmp(Employees emps)
    {
        session.save(emps);
    }
} 
```

**EmployeeAction.java**

```
package app.web;

import app.dao.EmpDAO;
import app.dao.EmpDAOImpl;
import app.domain.Employees;
import app.domain.HibernateUtil;
import app.domain.User;
import com.opensymphony.xwork2.ActionSupport;
import com.opensymphony.xwork2.ModelDriven;

public class EmployeeAction extends ActionSupport{
  HibernateUtil hu = new HibernateUtil();
    Employees emps = new Employees();

    EmpDAO empDAO;
    public String execute()
    {

        return SUCCESS;
    }
    public String add()
    {

        emps = new Employees();
            emps.setEmpId(200);
            emps.setEmpName("sadi");
        empDAO.saveEmp(emps);
        return SUCCESS;
    }

    public Employees getEmps() {
        return emps;
    }

    public void setEmps(Employees emps) {
        this.emps = emps;
    }
} 
```

现在我想手动传递 EmployeeAction 中的值而不是从表单中传递，所以我没有使用模型驱动，我收到如下所示的错误，我做错了

```
java.lang.NullPointerException
app.web.EmployeeAction.add(EmployeeAction.java:40)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
java.lang.reflect.Method.invoke(Method.java:601)
com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:453)
com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:292)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:255)
com.googlecode.s2hibernate.struts2.plugin.s2hibernatevalidator.interceptor.HibernateValidatorInterceptor.intercept(HibernateValidatorInterceptor.java:123)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.googlecode.s2hibernate.struts2.plugin.interceptors.SessionTransactionInjectorInterceptor.intercept(SessionTransactionInjectorInterceptor.java:211)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.interceptor.ProfilingActivationInterceptor.intercept(ProfilingActivationInterceptor.java:104)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:510)
org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T10:00:09.420

您犯的错误是您没有初始化 DAO 实例`empDAO`。你应该手动做

```
empDAO = new EmpDAOImpl(); 
```

在将此变量用作左值之前。

# c# - Awesomium - 将 Javascript 结果返回到 C#

> ID：15595361
> 
> 赞同：1
> 
> 时间：2013-03-24T04:59:17.997
> 
> 标签：c#, javascript, awesomium

Javascript / HTML代码

```
<script type="text/javascript">
function configurator(clicked) { 
return clicked.name;   
} 
</script>

<a name="link1" href="#" onclick="configurator(this)">Link 1</a>
<a name="link2" href="#" onclick="configurator(this)">Link 2</a> 
```

当链接上的 onclick 事件触发时，我想返回“clicked.name”值，让我们在 C# 中说“result”变量。我不知道该怎么做。有人可以帮我吗...

注意：我对 Awesomium 还是很陌生 :)

**更新：**

我遵循@JonnyReeves 方法稍作修改：

```
using (JSObject myGlobalObject = webControl1.CreateGlobalJavascriptObject("myGlobalObject"))
{
    myGlobalObject.Bind("onLinkClicked", true, (sen, eve) =>
    {
        MessageBox.Show(Convert.ToString(sen));
    });
} 
```

但我得到“Awesomium.Windows.Controls.WebControl”，结果不是点击链接的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T07:48:21.437

看起来您可以利用 Awesomium 的[`JSObject.bind`](http://docs.awesomium.net/?tc=M_Awesomium_Core_JSObject_Bind)方法从 JavaScript 调用 C# 方法。一种典型的方法是公开一个 JavaScript 全局对象，其中包括所有“桥”方法（即：在 C# 和 JavaScript 之间传递数据的方法）。

```
// Create and acquire a Global Javascript object.
// These object persist for the lifetime of the web-view.
using ( JSObject myGlobalObject = webView.CreateGlobalJavascriptObject( "myGlobalObject" ) )
{
    // The handler is of type JavascriptMethodEventHandler. Here we define it
    // using a lambda expression.
    myGlobalObject.Bind( "onLinkClicked", false, ( name ) =>
    {
        Debug.Print( String.Format( "User clicked: {0}", name ) );
    } );
} 
```

您现在可以从 JavaScript 代码调用此方法：

```
<script type="text/javascript">
    function configurator(clicked) 
    { 
           myGlobalObject.onLinkClicked(clicked.name);
    } 
</script> 
```

# google-app-engine - 新的基于 Python 2.7 的 Google App Engine 中的键中的空格？

> ID：15595365
> 
> 赞同：0
> 
> 时间：2013-03-24T04:59:52.347
> 
> 标签：google-app-engine

我正在尝试将我的 GAE 应用程序从基于 Python 2.5 升级到 Python 2.7。我的应用程序允许用户为文件夹等实体选择包含空格的名称，但该应用程序将空间转换为 %20，然后再形成数据存储的密钥。如果 GAE 现在将提议的密钥中的 %20 转换为空格，我在升级过程中遇到的问题可能是可以解释的，这在 Python 2.5 版本的 GAE 中没有这样做。

谁能告诉我 space 或 %20 在 GAE 数据存储密钥中是否有任何特殊状态，以及从 Python 2.5 到 2.7 的这一政策是否发生了变化？更一般地说，是否有我错过的文档说明键中的合法字符是否存在限制？

如果发生了这样的更改，我将处于一个棘手的位置，因为现有的用户数据库具有包含 %20 的键。

# android - RPC 工具不适用于 GPE 3.2 的 appengine 连接的 android 项目？

> ID：15595368
> 
> 赞同：0
> 
> 时间：2013-03-24T05:00:29.060
> 
> 标签：android, google-app-engine, eclipse-juno, google-plugin-eclipse

我创建了一个示例 appengine 连接的 android 项目。但是，我找不到**RPC 服务**，在**谷歌下拉菜单下，**如15:43的[视频](http://www.youtube.com/watch?v=M7SxNNC429U)所示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:28:06.410

此功能已在 GPE 3.0 中删除。很抱歉突然删除它；RequestFactory 不是在客户端和 App Engine 应用程序之间进行通信的推荐方式。请改用 Cloud Endpoints：

[https://developers.google.com/eclipse/docs/cloud_endpoints](https://developers.google.com/eclipse/docs/cloud_endpoints)

我们尚未添加对 Cloud Endpoints 的 GWT 客户端库的支持，但我们会在未来的版本中添加。

# linux - nohup 和 & 和有什么区别

> ID：15595374
> 
> 赞同：285
> 
> 时间：2013-03-24T05:01:36.393
> 
> 标签：linux, bash, nohup

两者`nohup myprocess.out &`或`myprocess.out &`将 myprocess.out 设置为在后台运行。关闭终端后，该过程仍在运行。他们之间有什么区别？

* * *

## 回答 #1

> 赞同：366
> 
> 时间：2013-03-24T05:04:20.617

`nohup`捕获挂断信号（参见 参考资料`man 7 signal`），而 & 符号没有捕获（除非 shell 以这种方式配置或根本不发送`SIGHUP`）。

通常，当使用 shell 运行命令`&`并随后退出时，shell 将使用挂断信号 ( `kill -SIGHUP <pid>`) 终止子命令。这可以使用 来防止`nohup`，因为它会捕获信号并忽略它，因此它永远不会到达实际应用程序。

如果您使用的是 bash，您可以使用该命令`shopt | grep hupon`来确定您的 shell 是否将 SIGHUP 发送到其子进程。如果它关闭，进程将不会被终止，就像你的情况一样。更多关于 bash 如何终止应用程序的信息可以在[这里](https://stackoverflow.com/questions/4298741/how-bash-handles-the-jobs-when-logout)找到。

在某些情况下`nohup`不起作用，例如当您启动的进程重新连接`SIGHUP`信号时，就像[这里](https://stackoverflow.com/questions/12486691/how-do-i-get-my-golang-web-server-to-run-in-the-background/12486810#12486810)的情况一样。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2013-03-24T05:12:21.437

`myprocess.out &`将使用子外壳在后台运行该过程。如果当前 shell 终止（例如通过注销），所有子 shell 也将终止，因此后台进程也将终止。[nohup](http://en.wikipedia.org/wiki/Nohup)命令会忽略该信号`HUP`，因此即使当前 shell 终止，子 shell`myprocess.out`也会继续在后台运行。另一个区别是`&`单独不会重定向标准输出/标准错误，因此如果有任何输出或错误，它们会显示在终端上。另一方面，nohup 将 stdout/stderr 重定向到`nohup.out`or `$HOME/nohup.out`。

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2014-01-07T07:48:54.847

大多数时候我们使用 ssh 登录到远程服务器。如果您启动 shell 脚本并注销，则该进程将被终止。即使您从 shell 注销后，Nohup 也有助于在后台继续运行脚本。

```
Nohup command name &
eg: nohup sh script.sh & 
```

Nohup 捕获 HUP 信号。Nohup 不会自动将作业置于后台。我们需要明确地使用 &

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2013-07-09T15:36:08.847

使用与号 (&) 将在子进程（当前 bash 会话的子进程）中运行命令。但是，当您退出会话时，所有子进程都将被杀死。

使用 nohup + & 符号 (&) 将做同样的事情，除了当会话结束时，子进程的父进程将更改为“1”，即“init”进程，从而防止子进程被杀死。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-02-07T04:51:36.220

如我错了请纠正我

```
 nohup myprocess.out & 
```

**nohup**捕获挂断信号，这意味着它将在终端关闭时发送一个进程。

```
 myprocess.out & 
```

进程可以运行，但一旦终端关闭就会停止。

```
nohup myprocess.out 
```

进程甚至可以在终端关闭时运行，但是您可以通过在终端中按`ctrl`+来停止该进程。+如果存在则不工作。`z``Crt``z``&`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-12-20T18:10:04.720

nohup 命令是一个信号屏蔽实用程序，用于捕获挂断信号。在＆符号没有捕捉到挂断信号的地方。当使用 & 运行命令并退出 shell 时，shell 将使用 hang up 信号终止子命令。这可以通过使用 nohup 来防止，因为它会捕获信号。Nohup 命令接受挂断信号，该信号可以由内核发送到进程并阻止它们。当用户想要启动长时间运行的应用程序注销或关闭启动进程的窗口时，Nohup 命令很有帮助。这些操作中的任何一个通常都会提示内核挂起应用程序，但 nohup 包装器将允许进程继续。使用 & 符号将在子进程和当前 bash 会话的这个子进程中运行命令。当您退出会话时，该进程的所有子进程都将被杀死。& 号与活动 shell 的作业控制有关。这对于在后台会话中运行进程很有用。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-11-04T10:46:02.217

在很多情况下，环境之间的微小差异会影响您。这是我最近遇到的一个。这两个命令有什么区别？

```
1 ~ $ nohup myprocess.out &
2 ~ $ myprocess.out & 
```

答案和往常一样——这取决于。

nohup 捕获挂断信号，而 & 符号没有。

挂机信号是什么？

SIGHUP - 在控制终端上检测到挂起或控制进程死亡（值：1）。

通常，当使用 & 运行命令并随后退出 shell 时，shell 将使用 hangup 信号终止子命令（如 kill -SIGHUP $PID）。这可以使用 nohup 来防止，因为它会捕获信号并忽略它，因此它永远不会到达实际的应用程序。

很好，但就像在这种情况下总是有“但是”。当 shell 配置为根本不发送 SIGHUP 时，这些启动方法之间没有区别。

如果您使用的是 bash，您可以使用下面指定的命令来确定您的 shell 是否向其子进程发送 SIGHUP：

```
~ $ shopt | grep hupon 
```

而且 - 在某些情况下 nohup 不起作用。例如，当您启动的进程重新连接 NOHUP 信号时（它在内部完成，在应用程序代码级别）。

在所描述的情况下，在自定义服务启动脚本中调用了第二个脚本，该脚本在没有 nohup 命令的情况下设置和启动正确的应用程序时，缺乏差异让我感到很困惑。

在一个 Linux 环境中，一切运行顺利，在第二个环境中，应用程序在第二个脚本退出后立即退出（检测到这种情况，当然花了我更多的时间，然后你可能会认为 :stuck_out_tongue:)。

将 nohup 作为启动方法添加到第二个脚本后，即使脚本退出，应用程序也会继续运行，并且此行为在两个环境中都变得一致。

# java - 访问枚举变量的私有成员？

> ID：15595381
> 
> 赞同：0
> 
> 时间：2013-03-24T05:03:11.190
> 
> 标签：java, variables, enums

我正在查看一个简单的 Enum 示例来尝试提高我的技能，我注意到一些事情至少对我来说是一个危险信号，因为我不明白为什么它是允许的。

这是我正在查看的枚举的副本：

```
public enum GameDuration {
    Short("30"), Medium("45"), Long("60");

    private GameDuration(String minutes) {
        this.minutes = minutes;
    }

    private String minutes;

    public String getMinutes() {
        return this.minutes;
    }

    public static GameDuration fromMinutes(String minutes) {
        if (minutes != null) {
            for (GameDuration g : GameDuration.values()) {
                if (minutes.equalsIgnoreCase(g.minutes)) {
                    return g;
                }
            }
        }
        return null;
    }
} 
```

我不明白的部分在*fromMinutes*方法中并粘贴在下面：

```
if (minutes.equalsIgnoreCase(g.minutes)) { 
```

枚举中的分钟字段被标记为私有，那么如何直接从变量 g 访问它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T05:04:14.783

该方法`fromMinutes(...)`位于 GameDuration 类内部，因此可以访问该类的私有变量和方法。

# java - 为什么 Java 锁实现中没有使用 synchronized 关键字？

> ID：15595382
> 
> 赞同：1
> 
> 时间：2013-03-24T05:03:16.813
> 
> 标签：java, multithreading, synchronized, reentrantlock

`synchronized`在Java中用于处理互斥锁之类的事情。但是，Java 中的`Lock`接口实现`ReentrantLock`不使用 this 关键字。所有代码看起来都只是普通代码。那么它是如何处理地球上的多个线程的呢？

我相信以下代码片段是相关的：

中的`tryAcquire`方法`Sync``ReentrantLock`

```
protected final boolean tryAcquire(int acquires) {
    final Thread current = Thread.currentThread();
    int c = getState();
    if (c == 0) {
        if (!hasQueuedPredecessors() &&
            compareAndSetState(0, acquires)) {
            setExclusiveOwnerThread(current);
            return true;
        }
    }
    else if (current == getExclusiveOwnerThread()) {
        int nextc = c + acquires;
        if (nextc < 0)
            throw new Error("Maximum lock count exceeded");
        setState(nextc);
        return true;
    }
    return false;
} 
```

`Sync`扩展`AbstractQueuedSynchronizer`和相关的代码：

```
final boolean acquireQueued(final Node node, int arg) {
    boolean failed = true;
    try {
        boolean interrupted = false;
        for (;;) {
            final Node p = node.predecessor();
            if (p == head && tryAcquire(arg)) {
                setHead(node);
                p.next = null; // help GC
                failed = false;
                return interrupted;
            }
            if (shouldParkAfterFailedAcquire(p, node) &&
                parkAndCheckInterrupt())
                interrupted = true;
        }
    } finally {
        if (failed)
            cancelAcquire(node);
    }
} 
```

所以似乎没有`synchronized`使用关键字，那么它如何保证互斥锁？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T05:08:17.383

从 Java 1.5(?) 开始，JVM 支持使用所谓[的 Compare-And-Swap](http://en.wikipedia.org/wiki/Compare-and-swap "比较和交换")方法进行硬件锁定。只需遵循源代码，直到调用它为止。

另请参阅 Doug Lea 的论文以获得更好的理解： http: [//gee.cs.oswego.edu/dl/papers/aqs.pdf](http://gee.cs.oswego.edu/dl/papers/aqs.pdf)

# boot - 类型 1 管理程序启动顺序

> ID：15595388
> 
> 赞同：1
> 
> 时间：2013-03-24T05:03:56.037
> 
> 标签：boot, hypervisor, bare-metal

我对类型 1 虚拟化有一个非常基本的查询。我真的很想了解启动过程。

1 类管理程序基本上在裸机级别运行，直接与硬件通信。

我的问题是，当系统启动并加载引导代码时，下一个加载的组件是管理程序，或者初始化本身是否需要一个管理操作系统？

任何人都可以参考 1 类管理程序向我解释引导顺序吗？

我认为它应该像引导代码一样直接引用管理程序组件，而管理程序组件又负责加载其他虚拟 VM 实例的内核。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:28:08.883

引导顺序取决于管理程序。简单性通常是管理程序的目标。如果系统是静态配置的（预配置任务），那么整个流程表可以在映像中进行预编码。在这种情况下，初始引导是系统初始化和上下文切换到最高优先级任务。即，图像就像*冻结*的系统图像。即使使用*动态*管理程序，*根*或*初始化*任务也可以这样编码；而其他任务则`spawned`视需要而定。

系统初始化包括，

*   刷新缓存、写缓冲区、TLB。
*   设置内存控制器。
*   禁用中断和设置堆栈。
*   启用 MMU。
*   可能将内核页面锁定在缓存中。
*   初始化中断控制器。
*   可能安装管理程序计时器。

实际上，这主要取决于*管理程序*的设计。例如，如果它是非抢占式的且仅基于优先级，则可能不需要计时器。

# python - Python 全局变量作用域

> ID：15595393
> 
> 赞同：7
> 
> 时间：2013-03-24T05:04:45.837
> 
> 标签：python, global-variables, scope

我试图在某些函数中声明一些全局变量并将带有这些函数的文件导入另一个。但是，我发现在第二个文件中运行该函数不会创建全局变量。我尝试创建另一个具有相同名称的变量，但是当我打印出变量时，它会打印出第二个文件的值，而不是全局值

全局变量.py

```
def default():
    global value
    value = 1 
```

主文件

```
from globals import *
value = 0
def main():
    default()
    print value

if __name__=='__main__':
    main() 
```

这将打印 0。如果我`value = 0`在 main 中没有，程序将出错（未定义值）。

如果我`value`在`globals.py`函数外部声明，`main.py`将采用 global 的值`value`，而不是设置的值`default()`

`value`在python中成为全局变量的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T05:17:07.207

Python 中的全局变量仅对它们的模块是全局的。没有可以修改的名称对整个过程是全局的。

你可以用这个来完成你想要的：

全局.py：

```
value = 0
def default():
    global value
    value = 1 
```

主要.py：

```
import globals
def main():
    globals.default()
    print globals.value

if __name__ == "__main__":
    main() 
```

不过，我不知道这样的全局变量是否是解决您的问题的最佳方法。

# jquery - 两个版本的jquery冲突

> ID：15595403
> 
> 赞同：3
> 
> 时间：2013-03-24T05:06:14.603
> 
> 标签：jquery, conflict

此外，我注意到我的网站正在加载两个版本的 jquery

```
<script type="text/javascript" src="http://www.nyimexec.com/wp-includes/js/jquery/jquery.js?ver=1.7.2"></script>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js?ver=1.8.21"></script> 
```

我已经禁用了大多数插件，除了一些菜单导航器，并且无法识别来自 google cdn 的 jquery 所在的位置。如果有的话是哪个插件？或在哪个文件中？

你能帮助我吗

*   识别它来自哪里（甚至是在哪里查看或如何搜索的一般指南）
*   如何解决这个问题，本质上是如何从谷歌 CDN 中删除 jquery。

我一直在阅读有关非冲突模式的信息，但是当我找不到 jquery google cdn 时，不知道在哪里添加无冲突命令。

我问是因为我有一种感觉，它导致我的标签无法工作。这是一个标签不起作用的页面[http://goo.gl/umIYu](http://goo.gl/umIYu)

- 我意识到第一个脚本与第二个脚本不同。但是，来自 google cdn 的 Jquery ui 与我的主题使用的 jqueryui 冲突（不知道如何找到并粘贴到此处）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T05:58:32.157

尽管您的脚本没有问题，但您仍然可能想尝试一下

```
var k=jQuery.noConflict(); 
```

并在您正在编写的新 JS 中将 $ 替换为 k

```
j(document).ready(function(){
     alert('hey I am not conflicting with any other jquery script');
}); 
```

**编辑**

在您的 javascript 顶部添加`var k=jQuery.noConflict();`并用 j 替换您的 JS 中的所有 $ 。 j 只不过是一个新的 jQuery 对象，它由我们创建并执行由 $ 执行的所有功能，但不与任何其他 jQuery 冲突页面上的文件..

**例子：** 如果你有

```
$(document).ready(function(){
     $('#selector').click(function(){
          alert('Hi');
     });
}); 
```

它应该写成

```
j(document).ready(function(){
     j('#selector').click(function(){
          alert('Hi');
     });
}); 
```

使用 noConflict 后..

**编辑2：**

**您的选项卡无法正常工作的另一个可能原因之一可能是您使用的旧版本 jquery**

您使用的是更高版本的 jQuery UI 和更低版本的 jQuery，这可能是一个可能的原因。尝试替换以下脚本

```
<script type="text/javascript" src="http://www.nyimexec.com/wp-includes/js/jquery/jquery.js?ver=1.7.2"></script>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js?ver=1.8.21"></script> 
```

和

```
<script src="http://code.jquery.com/jquery-1.9.1.js" type="text/javascript"></script>

<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js" type="text/javascript"></script> 
```

希望能帮助到你...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T05:09:09.547

您应该从最大到最小列出版本。

例子：

```
<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.0/jquery-ui.min.js?ver=1.0'></script>
<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.0.1/jquery-ui.min.js?ver=1.0.1'></script>
<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.2.1/jquery-ui.min.js?ver=1.2.1'></script>
<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.3.0/jquery-ui.min.js?ver=1.3.0'></script> 
```

等等...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T05:12:40.880

这两个库不一样。一个是 jQuery，另一个是 jQueryUI 库，可以毫无问题地一起使用。

# pdf - 嵌入式 PDF 在本地工作，而不是现场工作

> ID：15595405
> 
> 赞同：0
> 
> 时间：2013-03-24T05:06:19.660
> 
> 标签：pdf

所以我使用下面的代码：

```
 <object data="my.pdf" type="application/pdf" width="100%" height="800">
  <p>Your web browser doesn't have a PDF plugin.
  Install the missing plugin or you can <a href="my.pdf">click here to
  download the PDF file.</a></p>
   </object> 
```

这在本地运行良好，但是当我上传它时，我得到的只是一个灰色屏幕（在 Chrome 中）。有没有人遇到过这个问题/解决了这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T05:44:10.807

我相信浏览器正在尝试加载 my.pdf 并且您没有指定浏览器应该从哪里获取该资源。

我相信在这种情况下发生在幕后的步骤是：

1.  浏览器看到对象标签并查看 mime-type
2.  浏览器在加载插件时搜索 mime-type
3.  选定的插件加载到 dom 的该区域
4.  插件告诉加载资源 my.pdf
5.  插件在客户端计算机上找不到 my.pdf
6.  插件将显示空容器

尝试将完整的引用放在文件中。例如：[http://my.server.domain/files/my.pdf](http://my.server.domain/files/my.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-25T22:37:28.763

我在最新的 Chrome（版本 33.0.1750.152）和最新的 OSX 上遇到了 pdf 对象的问题。通过使用 iframe 解决了这个问题。但是，并非所有 pdf 选项都有效：页面有效；缩放和适合没有。至少 pagemode=t 会立即打开工具栏，然后用户可以操作缩放和适合，所以它是可用的。我的 HTML：

```
<div class="responsive-container">
  <iframe src="./pdf/filename.pdf#pagemode=t"></iframe>
</div> 
```

# salesforce - 批处理类 Apex 中的执行混淆

> ID：15595406
> 
> 赞同：2
> 
> 时间：2013-03-24T05:06:59.540
> 
> 标签：salesforce, apex-code, batch-processing, soql

我正在调用一个批处理类实例，在完成批处理后，我正在调用另外两个批处理类实例。第一批类的 finish() 方法是

```
public void finish(Database.BatchableContext BC)
{
    List<Event__c> events = [SELECT Id FROM Event__c];
    delete events;

    System.debug('Executing finish');
    for (CalendarSettings__c c: [SELECT Id, Name, CalendarId__c,
                                       CalendarQuery__c, FieldToDisplay__c
                                FROM CalendarSettings__c])
    {
        System.debug('Calendar Id is' + c.CalendarId__c);
        BatchPublicCampaignsToGoogle bjob = new BatchPublicCampaignsToGoogle(
                c.CalendarQuery__c, c.CalendarId__c, c.FieldToDisplay__c);
        Database.executeBatch(bjob,9);
    }

} 
```

我面临的问题是我期望 Batch 类`BatchPublicCampaignsToGoogle`将被调用两次，但它只被调用一次。循环运行了两次（我分析了调试日志）。为什么只调用一次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T02:26:42.933

Chaining Batch Jobs 是 Winter 13 中引入的一项功能。来自发行说明：

> # 从另一个批处理作业启动批处理作业
> 
> 您现在可以通过调用批处理类`Database.executeBatch`的 方法从另一个批处理作业启动批处理作业。`finish`这允许您链接批处理作业并创建作业链。请注意，批处理作业的调控器限制仍然适用。此更改适用于使用 Salesforce.com API 版本 26.0 和更高版本保存的批量 Apex。以前，使用 Salesforce.com API 版本 25.0 和更早版本保存 Apex，您无法 `Database.executeBatch`从任何批处理 Apex 方法中调用。使用的版本是启动另一个批处理作业的正在运行的批处理类的版本。如果`finish`正在运行的批处理类中的方法调用帮助类中的方法来启动批处理作业，则帮助类的 Salesforce.com API 版本无关紧要。[资源](https://na5.salesforce.com/help/doc/en/salesforce_winter13_release_notes.pdf)

因此，对于使用 API 版本 26.0 及更高版本的 Apex 类，您可以将**一个**批处理作业链接到刚刚完成的一个批处理作业的末尾。当一个完成时，您不能分支并启动多个批处理作业。

# android - 强制关闭 Phone ，但不强制关闭 AVD

> ID：15595411
> 
> 赞同：0
> 
> 时间：2013-03-24T05:08:27.223
> 
> 标签：android, http, post, manifest, logcat

我正在尝试通过 HTTP 请求解析一些 JSON 数据。我没有强制关闭我的 AVD（在我的 PC 上），但我确实在我的手机上得到了一个！

这是我的代码：

```
package com.example.database;

import java.io.ByteArrayOutputStream;
 import java.io.IOException;
import java.io.InputStream;
import java.net.URI;
import java.net.URISyntaxException;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.HttpStatus;
import org.apache.http.NameValuePair;
import org.apache.http.ParseException;
import org.apache.http.StatusLine;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicHeader;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.params.HttpConnectionParams;
import org.apache.http.protocol.HTTP;
import org.apache.http.util.EntityUtils;
import org.json.JSONObject;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.os.Looper;
import android.util.Log;
import android.widget.Toast;

public class post extends Activity{

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

   HttpResponse response= postData();
   HttpEntity entity = response.getEntity();
   if(entity != null) {
       try {
        String responseBody = EntityUtils.toString(entity);

        Toast.makeText(getBaseContext(), responseBody, Toast.LENGTH_LONG).show();
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
   }

 }

public HttpResponse postData() {

    HttpResponse response = null;
    try {        
            HttpClient client = new DefaultHttpClient();
            HttpGet request = new HttpGet();
            request.setURI(new URI("http://192.168.2.4/test.php"));
            response = client.execute(request);
        } catch (URISyntaxException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }   
        return response;
    }       

} 
```

这是我的**清单文件**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.database"
android:versionCode="1"
android:versionName="1.0" >
<uses-permission android:name="android.permission.INTERNET" />
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity android:name=".FilePickerActivity"
              android:label="@string/title_activity_main">
    </activity>
     <activity android:name=".Dynamic"
              android:label="@string/title_activity_main">
    </activity>
    <activity
        android:name=".post"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

这是我手机的 LogCat 条目：

```
03-24 10:36:16.772: D/dalvikvm(5134): Late-enabling CheckJNI
03-24 10:36:17.282: E/Trace(5134): error opening trace file: No such file or directory (2)
03-24 10:36:17.322: E/dalvikvm(5134): Dex cache directory isn't writable: /data/dalvik-cache
03-24 10:36:17.322: I/dalvikvm(5134): Unable to open or create cache for /data/app/com.example.database-1.apk (/data/dalvik-cache/data@app@com.example.database-1.apk@classes.dex)
03-24 10:36:17.322: D/AndroidRuntime(5134): Shutting down VM
03-24 10:36:17.322: W/dalvikvm(5134): threadid=1: thread exiting with uncaught exception (group=0x41794300)
03-24 10:36:17.362: E/AndroidRuntime(5134): FATAL EXCEPTION: main
03-24 10:36:17.362: E/AndroidRuntime(5134): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.database/com.example.database.post}: java.lang.ClassNotFoundException: com.example.database.post
03-24 10:36:17.362: E/AndroidRuntime(5134):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2105)
03-24 10:36:17.362: E/AndroidRuntime(5134):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2215)
03-24 10:36:17.362: E/AndroidRuntime(5134):     at android.app.ActivityThread.access$600(ActivityThread.java:145)
03-24 10:36:17.362: E/AndroidRuntime(5134):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1211)
03-24 10:36:17.362: E/AndroidRuntime(5134):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-24 10:36:17.362: E/AndroidRuntime(5134):     at android.os.Looper.loop(Looper.java:137)
03-24 10:36:17.362: E/AndroidRuntime(5134):     at android.app.ActivityThread.main(ActivityThread.java:4978)
03-24 10:36:17.362: E/AndroidRuntime(5134):     at java.lang.reflect.Method.invokeNative(Native Method)
03-24 10:36:17.362: E/AndroidRuntime(5134):     at java.lang.reflect.Method.invoke(Method.java:511)
03-24 10:36:17.362: E/AndroidRuntime(5134):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
03-24 10:36:17.362: E/AndroidRuntime(5134):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
03-24 10:36:17.362: E/AndroidRuntime(5134):     at dalvik.system.NativeStart.main(Native Method)
03-24 10:36:17.362: E/AndroidRuntime(5134): Caused by: java.lang.ClassNotFoundException: com.example.database.post
03-24 10:36:17.362: E/AndroidRuntime(5134):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
03-24 10:36:17.362: E/AndroidRuntime(5134):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
03-24 10:36:17.362: E/AndroidRuntime(5134):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
03-24 10:36:17.362: E/AndroidRuntime(5134):     at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
03-24 10:36:17.362: E/AndroidRuntime(5134):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2096)
03-24 10:36:17.362: E/AndroidRuntime(5134):     ... 11 more 
```

我怎么能解决这个问题？非常感谢！

# wolfram-mathematica - 为什么我在 NDSolve 中的函数不等于 "If"？[更新 1]

> ID：15595413
> 
> 赞同：0
> 
> 时间：2013-03-24T05:08:46.573
> 
> 标签：wolfram-mathematica, user-defined-functions, differential-equations

我的问题是：为什么`rhsexpr`有效但`rhsfunc`无效。谢谢。:)

```
 m = l = 1.; \[Mu] = 100;
    beltv[t_] = .1;
    spring[x_] = 1000\. (l - x);

    viscous[v_] := -30\. (v - beltv[t]);
    coulomb[v_] := -25\. Sign[v - beltv[t]];
    stribeck[v_] := -.3 Sign[v] Exp[-2 Abs[v]];

    friction[v_] := viscous[v] + coulomb[v] + stribeck[v]; 
```

`rhsfunc`定义为：

```
 rhsfunc[t_, x_, 1] := beltv'[t];
    rhsfunc[t_, x_, 0] := spring[x[t]] + friction[x'[t]]; 
```

`rhsexpr`定义为：

```
 rhsexpr := 
      If[stuck[t] == 1, beltv'[t], spring[x[t]] + friction[x'[t]]]; 
```

`rhsexpr`作品。

```
 NDSolveValue[{x''[t] == rhsexpr , x[0] == 1, x'[0] == 0, 
     WhenEvent[x'[t] == beltv[t] && spring[x[t]]^2 <  \[Mu]^2, stuck[t] -> 1], 
      WhenEvent[spring[x[t]]^2 >=  \[Mu]^2, stuck[t] -> 0], 
      stuck[0] == 0}, {x[t], x'[t]}, {t, 0, 2}, 
     DiscreteVariables -> stuck[t]] 
```

`rhsfunc`不起作用，提示 Encountered non-numerical value for a derived at t == 0

```
 NDSolveValue[{x''[t] == rhsfunc[t, x[t], stuck[t]] , x[0] == 1, 
      x'[0] == 0, 
      WhenEvent[x'[t] == beltv[t] && spring[x[t]]^2 <  \[Mu]^2, 
       stuck[t] -> 1], 
      WhenEvent[spring[x[t]]^2 >=  \[Mu]^2, stuck[t] -> 0], stuck[0] == 0}, {x[t], x'[t]}, {t, 0, 2},  DiscreteVariables -> stuck[t]] 
```

![在此处输入图像描述](../Images/ad1927cc527d317c5ef3ab6f9f37f93a.png)

**更新 1**

实际上，我定义的`rhsfunc`就像 m@ 在其内置文档中所做的那样，如下所示：

```
rhs[t_, x_, 1] = -x;
rhs[t_, x_, 2] = 1;

sol = NDSolve[{x'[t] == rhs[t, x[t], a[t]], x[0] == 1, a[0] == 1, 
WhenEvent[x[t] - .1, a[t] -> 2], 
WhenEvent[x[t] - 2, a[t] -> 1]}, {x, a}, {t, 0, 15}, 
DiscreteVariables -> {a[t] \[Element] {1, 2}}];

Plot[x[t] /. sol, {t, 0, 10}] 
```

![在此处输入图像描述](../Images/2abb36fe6e1ea29711d731c4c23397ed.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:22:35.963

模式不像 If 语句，特别是在您的示例中，If 语句被延迟。模式需要与定义完全一致，并且由于您没有定义当 rhsfunc 获得第三个参数的非数值时会发生什么，所以它仍然未被评估并且 NDSolve 无法继续其评估提供的最后一个示例与您的不同，因为它确实不涉及导数，此外，调用的格式不同（例如，返回 -x 而不是 -x[t]，当你用 x[t] 调用它时，它返回模式 -x[t]）

另一个注意事项 - NDSolve 在对它们起作用之前评估它的参数（因为它没有 HoldAll 或 HoldFirs 或 HoldRest 属性）。这意味着 rhsfunc 立即用返回未计算表达式的符号计算。根据经验，当使用 NDSolve 时，总是首选 Piecewise/If/Which. 由于这种行为， Piecewise 被开发为与 NDSolve 和类似函数一起运行（从版本 5.1 开始）. 如果您使用模式，请使用 ?NumericQ 作为变量测试（对于涉及 Pi 或 E 等的表达式，NumberQ 不会返回 True，而 NumericQ 会）。这可以防止函数被评估为非数字变量

我希望这有帮助

耶胡达

# c# - 多个线程读取静态对象是否安全？

> ID：15595416
> 
> 赞同：2
> 
> 时间：2013-03-24T05:08:59.357
> 
> 标签：c#, thread-safety

没有线程会修改变量。他们都在读书。这安全吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T05:28:39.457

这取决于您的线程正在共享哪些资源。考虑以下示例：

```
public class MyClass
{
    private int i;
    public int Foo { get { return i++; } } 
}

public static class SharedResources
{
    public static const string SharedString;
    public static readonly MyClass SharedMyClass;
} 
```

在此代码示例中，对 的引用`SharedString`是线程安全的，因为字符串在 C# 中是只读的。但是，任何线程都可能随时调用`SharedResources.SharedMyClass.Foo`，并且由于增量不是线程安全的（除非使用[`Interlocked.Increment`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683614%28v=vs.85%29.aspx)），读取此属性的线程可能会得到不一致的结果。

简而言之，如果一个类的公共 API 是只读的，但其内部不是线程安全的，那么简单地让多个线程读取它是不安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T05:15:46.087

为了使并发错误浮出水面，至少一个访问必须是写入/修改访问。

注意不要将 getter 误认为是变量。它们可能会在访问时产生您不知道的影响。

# devexpress - DevExpress ASPxPivotGrid 的 ExpandAll 和 CollapseAll 客户端脚本

> ID：15595421
> 
> 赞同：0
> 
> 时间：2013-03-24T05:10:16.647
> 
> 标签：devexpress

如何在 DevExpress ASPxPivotGrid 的客户端脚本中使用以下函数？

1.  pivotGrid.CollapseAll()
2.  pivotGrid.ExpandAll()

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:45:07.150

就像我们可以在 aspxgridview 中展开和折叠所有行一样，在 aspxpivotgrid 中，这些功能可以在服务器端完成。

您可以执行回调并获得所需的行为。

我在这里给出了示例代码：

```
<dx:ASPxButton ID="btnExpandAll" ClientInstanceName="btnExpandAll" runat="server">
 <ClientSideEvents Click="function(s,e){pivotGrid.Performcallback('ExpandAll')" />
 </dx:ASPxButton>
 <dx:ASPxButton ID="btnCollapseAll" ClientInstanceName="btnCollapseAll" runat="server">
  <ClientSideEvents Click="function(s,e){pivotGrid.Performcallback('CollapseAll')" />
</dx:ASPxButton> 
```

声明 pivotGrid_OnCustomCallback 事件并在服务器端编写以下代码以获取功能行为：

```
protected void pivotGrid_OnCustomCallback(object sender, DevExpress.Web.ASPxPivotGrid.PivotGridCustomCallbackEventArgs e)
    {   
        switch (e.Parameters)
        {
            case "ExpandAll":
                pivotGrid.ExpandAll();
                break;

            case "CollapseAll":
                pivotGrid.CollapseAllRows();
                break;
        }

    } 
```

您可以参考以下链接，可能会有所帮助

[http://www.devexpress.com/Support/Center/p/Q264138.aspx](http://www.devexpress.com/Support/Center/p/Q264138.aspx)

[http://www.devexpress.com/Support/Center/p/Q321425.aspx](http://www.devexpress.com/Support/Center/p/Q321425.aspx)

[http://community.devexpress.com/tags/aspxpivotgrid+expand+collapse/default.aspx](http://community.devexpress.com/tags/aspxpivotgrid+expand+collapse/default.aspx)

# vb.net - 如何在 vb 2010 中制作自定义链接/url

> ID：15595422
> 
> 赞同：0
> 
> 时间：2013-03-24T05:10:17.457
> 
> 标签：vb.net

假设我的链接是

`http://mysite.com/page=id1&like=id2` 现在我想在 WeBrowser1.Navigate() 自定义中输入这个，例如 WeBrowser1.Navigate(" [http://mysite.com/page=31&like=47](http://mysite.com/page=31&like=47) ")

其中 id1 ,id2 可以从 TextBox1,TextBox2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T05:14:05.443

`Webbrowser.Navigate`接受一个字符串。因此，只需尝试以下方式：

```
Dim txt1 = TextBox1.Text
Dim txt2 = TextBox2.Text

Webbrowser.Navigate("http://mysite.com/page=" + txt1 + "&like=" + txt2) 
```

# asp.net - 从 asp.net mvc3 运行桌面 exe

> ID：15595425
> 
> 赞同：-1
> 
> 时间：2013-03-24T05:10:58.550
> 
> 标签：asp.net, asp.net-mvc-3

我在特定目录中有一个桌面 exe 文件，例如 (notopad.exe) 现在我想从我的 asp.net MVC3 Web 应用程序运行我的 exe。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T05:19:03.533

您可以`Process.Start("notepad.exe")`从[System.Diagnostics.Process](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)类中使用。

# c - 如何将十六进制字符串解释为C中的字符串

> ID：15595427
> 
> 赞同：-2
> 
> 时间：2013-03-24T05:12:05.543
> 
> 标签：c, string, hex, string-concatenation

我有这些十六进制字符串： `0F54C47A` `B97798C9` `348C211B` `0911F13F` `416E9759`

它们是 `printf("%08X\n", sha_digest.Message_Digest[i]);`我从 0 到 4 运行的五个调用的结果。

我想连接这些字符串以形成一个大字符串，例如 `0F54C47AB97798C9348C211B0911F13F416E9759`并能够使用`char *`变量引用该字符串。

有没有办法在 C 中实现这一点？我知道 C++ 有选项，但我的程序是用 C 编写的。

非常感谢您提供的所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T05:16:15.733

在 C 中，字符串是字符数组，以 null 结尾。你可以做到的一种方法是

```
char buf[8 * 5 + 1];
char *p = buf;
buf[0] = 0;
for (int i = 0; i < 5; i++) { 
   sprintf(p, "%8x", sha_digest.Message_Digest[i]);
   p += 8;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T05:17:05.493

```
char buffer[41];

sprintf(buffer, "%08X%08X%08X%08X%08X", 
     sha_digest.Message_Digest[0],
     sha_digest.Message_Digest[1],
     sha_digest.Message_Digest[2],
     sha_digest.Message_Digest[3],
     sha_digest.Message_Digest[4]); 
```

`buffer`是一个 C 风格的字符串，包含`0F54C47AB97798C9348C211B0911F13F416E9759`.

# scala - 负责持久化他们将使用的数据的参与者？

> ID：15595432
> 
> 赞同：1
> 
> 时间：2013-03-24T05:12:44.220
> 
> 标签：scala, architecture, persistence, akka, actor

我正在使用 akka/scala 创建一个包含许多参与者的分布式系统。大多数“工人”参与者将对大量数据的不同子集执行基本相同的操作。我没有将数据存储在公共数据库中并在需要计算时将其分发给工作人员，而是考虑在创建数据时在工作人员之间划分数据，并让每个工作人员负责持久化数据操作。

这是一种常见的架构吗？在什么情况下它才有意义？创建一个架构，其中每个代理负责持久化它将处理的数据，有什么缺点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:54:24.267

听起来像是典型的分而治之的方法。

在考虑让工作人员存储处理过的数据时要记住的是，这个过程通常是 IO 绑定的。根据您存储数据的方式，您可能不会获得任何收益。

如果您使用远程参与者，并将数据存储在执行工作程序的节点的本地磁盘上，那很好。因为IO在写入硬盘时是绑定的，可以分布在集群中。如果所有工作人员都在同一个节点上运行，那么您将不会获得任何收益，因为瓶颈将是写入磁盘。

希望有所帮助。

# python - python 3.2-使用字典为字母表中的每个字母分配一个数值并根据它们的字母值在.txt文件中查找单词的总和

> ID：15595437
> 
> 赞同：1
> 
> 时间：2013-03-24T05:14:59.603
> 
> 标签：python, list, dictionary, type-conversion, python-3.2

在 python 3.2 中，我试图使用字典为字母表中的每个字母分配一个值。模式是'a'=1，'b'=2，'c'=3…'z'=26。我有一个名为 words.txt 的文件，在这个文件中有一长串单词。单词以大写字母开头，但是，我的值仅针对小写字母定义。无论如何，当单词转换为小写时，我必须为每个单词分配一个与其字母值的总和相对应的值。我也知道如何找出列表中有多少单词的总值是 137 的整数倍？我也很困惑如何让 python 引用 .txt 文件。

欢迎任何帮助！谢谢你！

这是我到目前为止的代码：

```
d = {'a':1,'b':2,'c':3,'d':4,'e':5,'f':6,'g':7,'h':8,'i':9,'j':10,'k':11,'l':12,'m':13,'n':14,'o':15,'p':16,'q':17,'r':18,'s':19,'t':20,'u':21,'v':21,'w':23,'x':24,'y':25,'z':26}

find = open("words.txt")
[x.lower() for x in ["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]]
['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z']

def num_multiple():  

  for line in find:
    if line.find("word % 137 == 0") == -1:
    return line
   else:
        word = line.strip()

print(num_multiple)
print(len(num_multiple)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T05:34:02.457

好吧，我在这里看到了一些问题。首先，您使用`find`的是查找文字字符串`"word % 137 == 0"`的结果，而不是计算的结果。

这里有一些东西可以简化你的代码：

```
values_of_words = [] # all the values for words

with open('words.txt') as the_file:
   for word in the_file:
       word = word.strip() # removes \n from the word
       values = [] # we will store letter values for each word
       for letter in word:
          # convert each letter to lowercase
          letter_lower = letter.lower()

          # find the score and add it to values
          values.append(d[letter_lower])

       # For each word, add up the values for each letter
       # and store them in the list
       values_of_words.append(sum(values))

count = 0
for value in values_of_words:
    if value % 137 == 0:
       count += 1

print("Number of words with values that are multiple of 137: {}".format(count)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T08:54:18.243

您是否考虑过使用 ord() 和 chr() 函数来获取字母的 ASCII 值？

```
with open('words.txt')as word_file:
    high_score = 0
    for word in word_file:
        word = word.strip()
    value = 0
    for letter in word:
        value += ord(letter) % 97
    if value % 137 == 0:
        high_score += 1
    print('Number of words with values that are a multiple of 137 {}'.format(high_score)) 
```

我意识到这与您之前的答案没有什么不同，但是如果您的字典非常大，它可能会降低内存成本。此外，能够将字符转换为 ASCII 值并返回可以让您做一些非常酷的事情，尤其是在密码学方面。

# jquery - 如何防止按钮提交表单

> ID：15595438
> 
> 赞同：0
> 
> 时间：2013-03-24T05:15:27.773
> 
> 标签：jquery, json

我想`JSON`使用 JSP 从页面中获取一些数据。接收参数 userId，基于`JSON`userId 用户详细信息填充在 JSON 页面中。我正在使用`getJSON()`方法从页面获取数据。但是，我的问题是当一个按钮被点击时，表单被提交了。这个[小提琴](http://jsfiddle.net/mjDTq/1/)是没有`getJSON()`方法的，在按下提交后不提交表单，但是，[在我](http://jsfiddle.net/u9LVL/)单击按钮后提交表单。我回来`false`还是没用。

请告诉我如何在不提交表单的情况下从 JSON 中获取数据。如果有任何替代或更好的方法，请提出一个。

这是我的代码：

```
$("input[name=submit]").click(function(){
    var dataToBeSent = $("form").serialize();
    alert (dataToBeSent);
    $.getJSON(url,dataToBeSent, function(data) {
        var items = [];
        $.each(data, function(key, val) {
            items.push('<li id="' + key + '">' + val + '</li>');
        });
        $('div').html($('<ul/>', {
            'class' : 'my-new-list',
            html : items.join(' ')
        }));
    });
    return false; 
```

问候

迪比亚

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T05:22:25.347

你需要做 event.preventDefault()

```
$("input[name=submit]").click(function(e){
    ................
    ................
    ................
    ................
    e.preventDefault();
}); 
```

return false 不会停止事件，因为它与 object.onclick 不同。要停止默认行为，您必须使用 preventDefault。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T05:25:55.757

试着把它变成一个函数返回而不是像这样的事件监听器：

```
<script type="text/javascript">
    function serializeForm(){
        var dataToBeSent = $("form").serialize();
        alert(dataToBeSent);
        // $.getJSON(); function here
        return false;
    }
</script>
<form action="#submit" method="post" onsubmit="return serializeForm();">
    <input type="text" name="data1" id="data1" value="1" />
    <input type="text" name="data2" id="data2" value="2" />
    <input type="text" name="data3" id="data3" value="3" />
    <input type="submit" />
</form> 
```

# xslt - 如何在xslt中的foreach中将前一个节点元素值与当前节点元素值进行比较

> ID：15595439
> 
> 赞同：1
> 
> 时间：2013-03-24T05:15:37.147
> 
> 标签：xslt

对于 xslt 中的每个循环，我们如何将 Previous Item1 值与当前 item1 值与 in 进行比较。请您告诉我。下面是输入。

输入：

```
<t>
<Items>
<Item1>24</Item1>

</Items>

<Items>
<Item1>25</Item1>

</Items>

<Items>
<Item1>25</Item1>

</Items>

</t> 
```

输出：

```
<t>

<xsl:for-each select="Items">

 <xsl:if previos Item1 != current Item1><!-- compare previous item1 with current Item1 -->

 </xsl:for-each>
 </t> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:35:09.167

**当节点列表中的项目不是同级（甚至可能属于不同的文档）**时，这是针对一般情况的一般解决方案：****

 **```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
     <xsl:apply-templates select="Items/Item1">
      <xsl:with-param name="pNodeList" select="Items/Item1"/>
     </xsl:apply-templates>
 </xsl:template>

 <xsl:template match="Item1">
   <xsl:param name="pNodeList"/>

   <xsl:variable name="vPos" select="position()"/>
   <xsl:copy-of select="self::node()[not(. = $pNodeList[$vPos -1])]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<t>
    <Items>
        <Item1>24</Item1>
    </Items>
    <Items>
        <Item1>25</Item1>
    </Items>
    <Items>
        <Item1>25</Item1>
    </Items>
</t> 
```

**产生了想要的（假设的）正确结果：**

```
<Item1>24</Item1>
<Item1>25</Item1> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T08:43:28.060

You can use the `preceding-sibling` [axis](http://www.w3.org/TR/xpath/#axes), for example like this:

```
not(preceding-sibling::Items[1]/Item1 = Item1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T09:33:18.810

不要试图从“迭代”的角度考虑这一点，而是首先考虑如何为`for-each`第一个选择正确的节点。看起来您只想处理`Item1`与其在输入树中的前一个同级不同的Items 元素

```
<xsl:for-each select="Items[preceding-sibling::Items[1]/Item1 != Item1]"> 
```

如果您想在 XSLT 方面取得很大进展，您需要停止考虑诸如循环和赋值之类的过程性事情，而是学会从功能上思考——我想要的输出与我开始的输入有什么关系。**

# joomla2.5 - 为什么我的 Joomla 2.5 插件不起作用？

> ID：15595442
> 
> 赞同：1
> 
> 时间：2013-03-24T05:16:05.430
> 
> 标签：joomla2.5

我已经使用以下代码在 Joomla 2.5 中创建并成功安装了一个插件

```
<?php
// no direct access
defined( '_JEXEC' ) or die( 'Restricted access' );

class plgCustomFunctions extends JPlugin 
{
    public function onContentPrepare($context, &$article, &$params, $page = 0)
    {
        $article->title = "Something!";
        return true;
    }
}?> 
```

我的理解是，这应该覆盖每篇文章的标题。那没有发生。我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T10:41:13.643

我认为问题出在类名上，应该是

`class plgContentCustomFunctions extends JPlugin`

否则 Joomla 自动加载器将无法找到它

Offtopic：任何有兴趣为 Joomla 添加标签同义词的人，[请发表您的意见](https://meta.stackexchange.com/questions/173293/tag-synonyms-for-joomla)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T10:16:32.927

因此，首先，请确保您的插件已正确安装并已激活。

您的问题是您正在尝试设置一个实际上并不存在的属性：

`$article->title = "Something!";`

如果你这样做，`var_dump($article);`你会看到传递的唯一属性是“文本”。

所以有了这个

`$article->text = "Something!";`

这显然是 onContentPrepare 方法的一个限制。

也许您可以找到保存文章时触发的事件。

# google-app-engine - Google App Engine - 在指定距离内搜索位置返回零结果

> ID：15595445
> 
> 赞同：2
> 
> 时间：2013-03-24T05:17:01.950
> 
> 标签：google-app-engine, python-2.7, google-api, gae-search

使用 GAE Search API (1.7.6) 按距离搜索地理位置总是返回零结果...

我构建以下查询：`distance(geoLocation, geopoint(27.241131, -82.464445)) < 16093 /* 10 Miles in meters */`

尽管我在距离内有地理点，但结果始终为零。例如，我的搜索原点在这种情况下`lat: 27.241131, lgn: -82.464445`，范围内的地理点之一是`lat:27.233247, lng-82.48819800000001.`

当我使用谷歌地图 api v3 计算距离时，如下所示：

```
 google.maps.geometry.spherical.computeDistanceBetween (
new google.maps.LatLng(27.241131, -82.464445), 
new google.maps.LatLng(27.233247, -82.48819800000001)) = 2509.46 
```

这就是我将地理点与其他字段一起存储的方式

```
dictFields = []

dictFields.append(search.AtomField(name = 'zipcode', value = k.get('zipcode')))

geopoint = search.GeoPoint(float(lat), float(lng))
dictFields.append(search.GeoField(name = 'geoLocation', value = geopoint)) 
```

后来我做

```
search.Document(doc_id = document_id, fields = dictFields) 
```

这里有什么问题？我知道 Search 有效，因为当我按不同于地理点的其他字段进行搜索时，它会返回结果。

搜索ID是这样完成的：

```
options = search.QueryOptions(limit=1000, returned_fields=['geoLocation', 'zipcode'])
query = search.Query(query_string=query_str, options=options) 
```

在哪里`query_str = distance(geoLocation, geopoint(27.241131, -82.464445)) < 16093`

更新

我正在使用索引存储的地理点进行测试并获取 search.SearchResults(number_found=0L)。问题：这是否可以在开发环境中工作？

帮助表示赞赏！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:34:13.010

我对此也有一个未解决的问题 - 我做了一些窥探，它看起来像是开发环境的问题。它在生产环境中工作。

如果您想关注，请参阅问题： [为什么基于地理搜索/位置的搜索返回零结果？](https://stackoverflow.com/questions/15616200/why-is-geosearching-location-based-searches-returning-zero-results)

您还可以找到我提出的问题跟踪器的链接。

# java - 连接到 MySQL 数据库并将数据库放在安卓手机上

> ID：15595448
> 
> 赞同：0
> 
> 时间：2013-03-24T05:17:07.480
> 
> 标签：java, android, mysql

现在在我的应用程序中，我“根据需要”连接到 MySQL 数据库以获取有关我玩的在线游戏的信息（该应用程序是一种基于信息的游戏性能增强器），但我现在发现自己在方向更改或只是回击并返回应用程序的同一部分时看到这一点会扰乱我 100% 想要避免的用户体验。

所以我对此的问题是：

1.  如何快速有效地将整个 MySQL DB 放到手机上？

2.  当应用程序退出时，数据库表是否仍然驻留在手机上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T05:48:30.433

> 如何快速有效地将整个 MySQL DB 放到手机上？

你可能做不到。该数据库的大小可以是可用设备容量的 1.1 倍至 300 倍。偶尔调用只检索它需要的东西比尝试向其客户提供（潜在的）千兆比特更有效。

> 当应用程序退出时，数据库表是否仍然驻留在手机上？

这在很大程度上取决于应用程序的实现。如果有理由缓存这种数据（我认为国家或日期或常数值等信息会保留），那么它可能会。否则，您最好自己与开发人员协商。

我还不完全熟悉 Android，但在应用程序生命周期的某个时刻，通常是在方向更改时，应用程序本身会针对该方向被销毁/重新创建。可能是连接到数据库的工作是在不适当的层中完成的，因此您会看到如此糟糕的性能。

你真的很想和开发人员一起讨论这个问题。如果您没有源代码来更改此设置，那么我们可以建议的帮助不多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T05:28:32.517

我想帮助你，但我需要更多关于你的问题的信息。

您使用的是什么版本的 MySQL？

您可以使用 SQLite 或从 xml 文件保存和加载数据。

问候，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T05:54:58.470

您不必从数据库中获取所有内容。您只需要加载应用程序所需的信息。

[如何从 MySql 服务器到 Android 应用程序？](https://stackoverflow.com/questions/2898823/get-data-to-android-app-from-mysql-server)

# c - 使用 typedef 结构时，错误“无法将类型为“X *”的值分配给类型为“X *”的实体

> ID：15595449
> 
> 赞同：4
> 
> 时间：2013-03-24T05:17:14.050
> 
> 标签：c, struct, compiler-errors, typedef

这是我用于节点的结构......

```
typedef struct
{
    struct Node* next;
    struct Node* previous;
    void* data;
} Node; 
```

这是我用来链接它们的功能

```
void linkNodes(Node* first, Node* second)
{
    if (first != NULL)
        first->next = second;

    if (second != NULL)
        second->previous = first;
} 
```

现在视觉工作室在这些线上给了我智能感知（更少）错误

```
IntelliSense: a value of type "Node *" cannot be assigned to an entity of type "Node *" 
```

谁能解释这样做的正确方法？Visual Studio 将编译并运行它，它也可以在我的 mac 上运行，但在我的学校服务器上崩溃。

编辑：我想过使用 memcpy 但这很简单

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T05:22:14.717

我认为问题在于没有名为 Node 的*结构*，只有一个 typedef。尝试

```
 typedef struct Node { .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T08:16:39.003

在 C 中定义`typedef`of`struct`最好在`struct`声明本身之前完成。

```
typedef struct Node Node; // forward declaration of struct and typedef

struct Node
{
    Node* next;          // here you only need to use the typedef, now
    Node* previous;
    void* data;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T05:23:20.700

类似于 Deepu 的答案，但是可以让您的代码编译的版本。将您的结构更改为以下内容：

```
typedef struct Node // <-- add "Node"
{
    struct Node* next;
    struct Node* previous;
    void* data;
}Node; // <-- Optional

void linkNodes(Node* first, Node* second)
{    
    if (first != NULL)
        first->next = second;

    if (second != NULL)
        second->previous = first;
} 
```

# ruby - 当我们定义一个没有类和嵌套类的方法时，ruby 层次结构如何工作？

> ID：15595451
> 
> 赞同：0
> 
> 时间：2013-03-24T05:17:54.363
> 
> 标签：ruby

在 Ruby 中，类层次结构似乎非常随意。例如，我们可以在没有类的情况下直接在模块中定义方法，甚至可以在类中定义一个类。谁能解释这两种情况是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T10:57:38.043

> 我们可以在没有类的情况下直接在模块中定义方法

首先，您需要了解 Ruby 中类和模块之间的区别。

让我们试试这个：

```
module MyModule
end

MyModule.new 
```

你得到 ：`NoMethodError: undefined method `new' for MyModule:Module`

这是最基本的区别之一，模块不是可实例化的。模块用作将代码划分为逻辑部分或避免代码重复的工具，例如：

```
module MyModule
  def hello
    puts "Hello world"
  end
end

class Klass1
  include MyModule
end

class Klass2
  include MyModule
end 
```

在这里，`Klass1`&`Klass2`将继承该`hello`方法。

现在，关于嵌套类。

如您所见，您可以在类中定义类，这只是一种命名类的方法，用于组织目的：

```
class MyKlass
  class MyNestedKlass
  end

  def something
    MyNestedKlass.new 
  end
end

MyKlass::MyNestedKlass.new 
```

# r - R中条形图中的X轴

> ID：15595452
> 
> 赞同：11
> 
> 时间：2013-03-24T05:18:30.623
> 
> 标签：r, plot

我想问一个关于 barplot 轴的问题：

首先请看我的数据。

```
SerNo   DOY Rain
1   350 0
2   351 0
3   352 0
4   353 0
5   354 0
6   355 0
7   356 0
8   357 0
9   358 0
10  359 0
11  360 0
12  361 0
13  362 0
14  363 0
15  364 0.7
16  365 2.7
17  1   0
18  2   0
19  3   0
20  4   2
21  5   0
22  6   0
23  7   0
24  8   0
25  9   0
26  10  0
27  11  0
28  12  0
29  13  0
30  14  0
31  15  0
32  16  0
33  17  1.8
34  18  0.8
35  19  10
36  20  0
37  21  0
38  22  0
39  23  0
40  24  0
41  25  0
42  26  0
43  27  0
44  28  0
45  29  0
46  30  6.5
47  31  0
48  32  0
49  33  0
50  34  0
51  35  0
52  36  5.8
53  37  0
54  38  0
55  39  0
56  40  0
57  41  0
58  42  0
59  43  0
60  44  0
61  45  0
62  46  2.9
63  47  0
64  48  0 
```

DOY 表示一年中的一天，1 日，1 月 1 日，12 月 31 日是 365/366，雨是那天的总降水量，因为这个时间段跨越了年的边界，我想画一个 x 是DOY 和 Y 轴是雨，当使用条形图时，我无法将 DOY 与雨的相应 col 匹配这里是我的代码

```
rainbar<-read.table("I:/example.txt",header=T)
rainbar
barplot(rainbar$Rain,axes=F,ylim=c(0,15))

length(rainbar$SerNo)
seq(1,length(rainbar$SerNo),1)
axis(2,seq(0,15,3),c(0,3,6,9,12,15))
axis(1,seq(1,length(rainbar$SerNo),1),rainbar$DOY) 
```

结果是这样的，为什么这两个数据不能放在一起？甚至我添加了一个名为 SerNo 的列，基于 SerNo 的 X 轴仍然无法匹配对应的雨天，这是什么原因？barplot 函数如何定义自己的 X 轴？非常感谢你

![在此处输入图像描述](../Images/460f0cdbfdfd29dd17b042de215e5c48.png)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-24T06:21:03.000

试试这个：

```
mp <- barplot(rainbar$Rain,axes=F,ylim=c(0,15))
axis(1,at=mp,labels=rainbar$DOY)
axis(2,seq(0,15,3),c(0,3,6,9,12,15)) 
```

阅读`?barplot`以查看从函数调用返回的值是绘图坐标系中的中点向量。

# jquery - 无法让 jQuery.noConflict 正常工作

> ID：15595456
> 
> 赞同：0
> 
> 时间：2013-03-24T05:19:49.287
> 
> 标签：jquery

我首先要说除了编辑和查找脚本教程之外，我几乎没有 JavaScript 经验。一段时间以来，我一直在我的网站上使用一个小的喊话框脚本。由于添加了新的插件和脚本，我发现了一个问题。

Shoutbox 将大约 10-15 行文本存储在一个文本文件中，显示它们并在它们进行时更新（ajax 样式）并在 15 之后删除。简单的小脚本。

现在 Shoutbox 不再加载文本，只是显示为空白。我试图利用 jQuery.noConflict(); 选项，但无济于事。它确实加载了该框，但是当点击提交（发布数据）（不涉及 SQL）时，什么也没有发生。如果我刷新它会显示在框中。所以我知道这与实时传递数据有关。

这是脚本（不大）

```
<script type="text/javascript">
    var count = 0;
    var files = 'application/widgets/nipunashoutbox/demos/jquery-shoutbox/';
    var lastTime = 0;

    function prepare(response) {
      var d = new Date();
      count++;
      d.setTime(response.time*1000);
      var mytime = d.getHours()+':'+d.getMinutes();
      var string = '<div class="shoutbox-list" id="list-'+count+'">'
          + '<span class="shoutbox-list-time">'+mytime+'</span>'
          + '<span class="shoutbox-list-nick">'+response.nickname+':</span>'
          + '<span class="shoutbox-list-message">'+response.message+'</span>'
          +'</div>';

      return string;
    }

    function success(response, status)  { 
      if(status == 'success') {
        lastTime = response.time;
        $('#daddy-shoutbox-response').html('<img src="'+files+'images/accept.png" />');
        $('#daddy-shoutbox-list').prepend(prepare(response));
        $('input[@name=message]').attr('value', '').focus();
        $('#list-'+count).fadeIn('slow');
        timeoutID = setTimeout(refresh, 3000);
      }
    }

    function validate(formData, jqForm, options) {
      for (var i=0; i < formData.length; i++) { 
          if (!formData[i].value) {
              alert('Please fill in all the fields'); 
              $('input[@name='+formData[i].name+']').css('background', 'red');
              return false; 
          } 
      } 
      $('#daddy-shoutbox-response').html('<img src="'+files+'images/loader.gif" />');
      clearTimeout(timeoutID);
    }

    function refresh() {
      $.getJSON(files+"daddy-shoutbox.php?action=view&time="+lastTime, function(json) {
        if(json.length) {
          for(i=0; i < json.length; i++) {
            $('#daddy-shoutbox-list').prepend(prepare(json[i]));
            $('#list-' + count).fadeIn('slow');
          }
          var j = i-1;
          lastTime = json[j].time;
        }
        //alert(lastTime);
      });
      timeoutID = setTimeout(refresh, 3000);
    }

    // wait for the DOM to be loaded 
    $(document).ready(function() { 
        var options = { 
          dataType:       'json',
          beforeSubmit:   validate,
          success:        success
        }; 
        $('#daddy-shoutbox-form').ajaxForm(options);
        timeoutID = setTimeout(refresh, 100);
    }); 
```

在查看多个网站（包括 stackoverflow 讨论）后，我尝试添加代码段 noConflict.jQuery(); 在第一个脚本行之后。

然后在将每个 $ 分配给 jQuery 之后，慢慢地用 jQuery 和/或不同的变量替换每个 $。我得到的最接近的是它会在加载更新时冻结，或者它会启动一个新页面回显：

```
{"response":"Good work","nickname":"myusername","message":".","time":1364101631} 
```

目前正在寻求帮助，因为我很想再次使用它。如果我不能道歉，希望我已经能够解释得足够多，请让我知道我还应该包括什么。感谢您花时间阅读本文，感谢您的支持。

**编辑**

抱歉，我忘记在标题中包含被调用的脚本：

```
 <script type="text/javascript" src="application/widgets/nipunashoutbox/js/jquery.js"></script>
  <script type="text/javascript" src="application/widgets/nipunashoutbox/js/jquery.form.js"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T05:25:06.160

您需要设置`jQuery.noConflict();`等于一个变量。从那里你可以更换它。无论您的聊天框在哪里调用，您都可以执行以下操作：

```
var j = jQuery.noConflict();
j(document).ready(function() {
    console.log('jQuery is loaded'); // lets you know jQuery has loaded
} 
```

所以在你的情况下：

```
<script type="text/javascript">
    var j = jQuery.noConflict();
    var count = 0;
    var files = 'application/widgets/nipunashoutbox/demos/jquery-shoutbox/';
    // omitting some code...
    function success(response, status)  { 
      if(status == 'success') {
            lastTime = response.time;
            j('#daddy-shoutbox-response').html('<img src="'+files+'images/accept.png" />');
            j('#daddy-shoutbox-list').prepend(prepare(response));
            j('input[@name=message]').attr('value', '').focus();
            j('#list-'+count).fadeIn('slow');
            timeoutID = setTimeout(refresh, 3000);
      }
    }

    // omitting more code...
</script> 
```

您将需要使用我上面描述的方法替换`$`to的每个实例。`j`希望这会有所帮助！[这是一个工作演示！](http://jsfiddle.net/ztYxs/)

# c# - C# - 将 ARGB 颜色转换为 RGB555

> ID：15595457
> 
> 赞同：1
> 
> 时间：2013-03-24T05:19:56.783
> 
> 标签：c#, .net, colors, converter, bit-shift

我有一个将 RGB555 值转换为 System.Drawing.Color 对象的算法；

```
public static Color ToColor(ushort color)
{
    int a = color & 0x8000;
    int r = color & 0x7C00;
    int g = color & 0x03E0;
    int b = color & 0x1F;
    int rgb = (r << 9) | (g << 6) | (b << 3);

    return Color.FromArgb((a * 0x1FE00) | rgb | ((rgb >> 5) & 0x070707));
} 
```

一位朋友为我写了这个方法~~（按位移位有点过头了）~~，反转这段代码的最有效方法是什么？

感谢您的任何建议，几天来我一直在努力寻找答案，因此任何见解都将是一股清新的空气！

*编辑*

这个问题已经解决了一段时间，但我想我会回来用最终结果更新我的帖子 - 感谢所有回答的人！

```
public struct Color555 : IEquatable<Color555>, IComparable<Color555>, IEquatable<ushort>, IComparable<ushort>
{
    public static readonly Color555 MinValue = ushort.MinValue;
    public static readonly Color555 MaxValue = ushort.MaxValue;

    private readonly ushort _Value;

    public Color555(Color value)
    {
        uint c = (uint)value.ToArgb();
        _Value = (ushort)(((c >> 16) & 0x8000 | (c >> 9) & 0x7C00 | (c >> 6) & 0x03E0 | (c >> 3) & 0x1F));
    }

    public Color555(ushort value)
    {
        _Value = value;
    }

    public override int GetHashCode()
    {
        return _Value.GetHashCode();
    }

    public override bool Equals(object obj)
    {
        return (obj is ushort && Equals((ushort)obj)) || (obj is Color555 && Equals((Color555)obj));
    }

    public bool Equals(ushort other)
    {
        return _Value == other;
    }

    public bool Equals(Color555 other)
    {
        return _Value == other._Value;
    }

    public int CompareTo(Color555 other)
    {
        return _Value.CompareTo(other._Value);
    }

    public int CompareTo(ushort other)
    {
        return _Value.CompareTo(other);
    }

    public override string ToString()
    {
        return String.Format("{0}", _Value);
    }

    public string ToString(string format)
    {
        return String.Format(format, _Value);
    }

    public string ToString(IFormatProvider provider)
    {
        return String.Format(provider, "{0}", _Value);
    }

    public string ToString(string format, IFormatProvider provider)
    {
        return String.Format(provider, format, _Value);
    }

    public int ToArgb()
    {
        return ToColor().ToArgb();
    }

    public Color ToColor()
    {
        int a = _Value & 0x8000;
        int r = _Value & 0x7C00;
        int g = _Value & 0x03E0;
        int b = _Value & 0x1F;
        int rgb = (r << 9) | (g << 6) | (b << 3);

        return Color.FromArgb((a * 0x1FE00) | rgb | ((rgb >> 5) & 0x070707));
    }

    public static bool operator ==(Color555 l, Color555 r)
    {
        return l.Equals(r);
    }

    public static bool operator !=(Color555 l, Color555 r)
    {
        return !l.Equals(r);
    }

    public static implicit operator Color555(Color value)
    {
        return new Color555(value);
    }

    public static implicit operator Color555(ushort value)
    {
        return new Color555(value);
    }

    public static implicit operator ushort(Color555 value)
    {
        return value._Value;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T06:06:42.403

A`Color`每个像素使用 32 位：alpha、红色、绿色和蓝色值各 8 位。（这意味着每个组件的值可以在 0 到 255 之间。）

[RGB555](http://msdn.microsoft.com/en-us/library/windows/desktop/dd390989.aspx)颜色每个像素使用 5 位（并且没有 Alpha 通道），因此红色、绿色和蓝色可以分别取 0-31 之间的值。

要从一种转换到另一种，我们需要将值 0-255 映射到值 0-31。这显然是一个有损的过程；我们根本无法表示所有可能的值`Color`，许多不同`Color`的值将映射到同一个`Color555`.

最简单的映射只是截断，我们除以 8 并丢弃余数。这会将 0-7 映射到 0，将 8-15 映射到 1，...，将 248-255 映射到 31。这可以写为向右位移三位。

然后我们需要将这些值组合成一个 16 位的值，这是通过将红色和绿色分量向左移动来完成的。

（您的示例代码似乎是根据高位设置 Alpha 通道，因此我们可以以相同的方式将 Alpha 通道向后转换。在这种情况下，我们需要将 256 个可能的值映射到 2：0 或 1。我'已选择将 Alpha 通道精确地分成两半；还有其他可能的映射。）

把它们放在一起，它应该看起来像：

```
public Color555(Color color)
{
    _Value = (ushort) ((color.A >= 128 ? 0x8000 : 0x0000) |
        ((color.R & 0xF8) << 7) | ((color.G & 0xF8) << 2) | (color.B >> 3));
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-24T05:27:32.997

为什么不使用这个？

```
{
    Color c = ColorTranslator.FromHtml("#555");
    string s = ColorTranslator.ToHtml(c);
} 
```

# c++ - 构造函数中的 Printf 未显示在控制台中

> ID：15595461
> 
> 赞同：2
> 
> 时间：2013-03-24T05:20:33.177
> 
> 标签：c++, debugging, winapi, printf

我发生了一些奇怪的事情，其中​​ printf 命令（在类构造函数内）没有输出到控制台窗口。

你知道为什么会这样吗？

一些相关信息：

*   我的项目是本机 Win32 窗口应用程序（不是 Win32 控制台项目）
*   我使用 AllocConsole() 和 _open_osfhandle() 打开控制台窗口。
*   我从中调用 printf 命令的构造函数是 Singleton 类的一部分，在私有构造函数中我调用静态函数 isTVManagerTaskScheduled()。
*   如果我在构造函数之外使用 printf ，那么它可以正常工作，即将数据打印到控制台窗口。
*   控制台窗口仅用于调试我的 Win32 应用程序。
*   我正在使用 C++ Visual Studio 2010 Express
*   如果我不从构造函数中调用静态函数 isTVManagerTaskScheduled() 那么 printf 的工作正常。

**你知道为什么会这样吗？**

我的代码：

```
// Public Static Class Variables //
const tstring TVManager::TASK_NAME          = _T("TV Manager");
const tstring TVManager::TASK_TIME_STAMP    = _T("2012-03-22T13:46:00");

// Private constructor
TVManager::TVManager(HWND hwnd)
{
    mainHwnd = hwnd;

    bool res = isTVManagerTaskScheduled();
    std::cout << "Res: " << res << endl; // does not print to console
    _tprintf(_T("RES: %d\n"), res);      // does not print to console

    if (!res) {
        _tprintf(_T("hit\n"));
        EasyTaskScheduler::ScheduleTaskAtLogon(TASK_NAME, CPP_Utilities::getProcessPath(), TASK_TIME_STAMP);
    }
}

// Public Static function //
bool TVManager::isTVManagerTaskScheduled()
{
    std::vector <tstring> curTasks = EasyTaskScheduler::RetrieveScheduledTasks();
    tstring defTaskName            = CPP_Utilities::toLower( TASK_NAME );

    for (int i=0; i<=curTasks.size(); i++) {
        tstring task = CPP_Utilities::toLower(curTasks.at(i));
        // The following printf doesn't get printed to console
        _tprintf(_T("size %d, Task %d: %s\n"), curTasks.size(), i, task.c_str());
        if (task.find( defTaskName ) != npos) {
            _tprintf(_T("returning true\n"));
            return true;
        }
    }

    _tprintf(_T("returning false\n"));
    return false;
}

// Public static function
TVManager* TVManager::getInstance(HWND hwnd)
{
    static TVManager instance(hwnd);
    return &instance;
}

// Usage: Inside main window proceedure
case WM_CREATE:
{
    CPP_Utilities::openConsoleWindow();
    tvManager = TVManager::getInstance(hwnd);
}
break; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:56:28.330

问题是我在这里访问了一个无效的向量元素：

```
for (int i=0; i<=curTasks.size(); i++) {
   tstring task = CPP_Utilities::toLower(curTasks.at(i)); 
```

它应该是：

```
for (int i=0; i<curTasks.size(); i++) { 
```

奇怪的是它从未抛出运行时错误或崩溃。它只是继续工作，只是它没有向控制台输出任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T08:39:46.357

最简单、最便携的解决方案是使用 fopen 或 ofstream 打开一个输出文件，然后写入它，您还可以输出到 MSVC 输出控制台：

[如何打印到 Win32 应用程序中的调试输出窗口？](https://stackoverflow.com/questions/1333527/how-do-i-print-to-the-debug-output-window-in-a-win32-app)

但显然这限制了您使用 MSVC 进行调试。

# jquery - Jquery添加一个选项来选择

> ID：15595463
> 
> 赞同：3
> 
> 时间：2013-03-24T05:20:51.413
> 
> 标签：jquery, select, append, option

我已经尝试过在 stackoverflow 上回答的其他问题的解决方案，但没有一个对我有用。在一个表单中，我想根据用户选择的月份更新一个月中的天数。

`#DOBM`是月份选择列表的 ID（DOBM 代表出生日期月份）
`#DOBD`是日期选择列表的 ID（DOBD 代表出生日期）
基本上，如果`#DOBM`值为 01,03,05,07,08， 10,12，我们在一个月内有 31 天。

这是我的代码：

```
if ((($('#DOBM').val() == '01'||'03'||'05'||'07'||'08'||'10'||'12'))
&& ($("#DOBD option[value='31']").length == 0)) {
    $("#DOBD").append("<option value='31'>31</option>");} 
```

第二行代码是查看日期选择列表中是否已经存在该选项。最后一行代码是添加新选项（第 31 天），如果我们处于 31 天的一个月中并且如果选项 31 尚不存在。

该代码只是不更新​​ DOBD 选择列表。知道我做错了什么吗？

谢谢。

编辑：我是stackoverflow的新手；如果我能回答你的问题，他们都对我有很大帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T05:24:33.460

你的 if 语句是错误的。您必须将`.val()`与每个值进行比较：

```
if($('#DOBM').val() == '01'||$('#DOBM').val() == '03' 
```

**编辑**

您也可以选择使用 switch 语句：

```
$("#btn").on("click",function(){
    switch($("#DOBM").val())
    {
        case "01":
        case "03":
        case "05":
        case "07":
        case "08":
        $("#DOBD").append("<option value='31'>31</option>");
            break;
    }
}); 
```

**JSFiddle**：http: [//jsfiddle.net/dRJHh/](http://jsfiddle.net/dRJHh/)

使用数组，根据@sberry 的建议：

```
var vals = ['01','03', '05', '07', '08'];
$("#btn").on("click",function(){

    if(jQuery.inArray($("#DOBM").val(),vals) > -1)
    {
         $("#DOBD").append("<option value='31'>31</option>");
    }
}); 
```

**jsfiddle**：http: [//jsfiddle.net/yhcDa/](http://jsfiddle.net/yhcDa/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T05:42:37.647

```
var month = $('#DOBM').val();    
if ((( month == '01')||(month =='03')||(month =='05')||(month =='07')||(month =='08')||(month =='10')||(month =='12')) && ($("#DOBD option[value='31']").length == 0)) 
 {
        $("#DOBD").append("<option value='31'>31</option>");
 } 
```

或者你也可以这样做

```
var month = $('#DOBM').val();
var arr = [ '01','03', '05','07', '08', '10', '12'];
if(($.inArray(month, arr) != -1) && ($("#DOBD option[value='31']").length == 0))
{
     $("#DOBD").append("<option value='31'>31</option>");
} 
```

或者您可以直接查看每月的天数

```
var month = $('#DOBM').val();
var year = 2013;
if((Date(year, month, 0).getDate() == 31) && ($("#DOBD option[value='31']").length == 0)) {
    $("#DOBD").append("<option value='31'>31</option>");
} 
```

# android - 如何在 Android 中切换 USB 模式？

> ID：15595468
> 
> 赞同：1
> 
> 时间：2013-03-24T05:21:19.737
> 
> 标签：android, adb, host, adk, accessory

我正在设计一个 USB OTG 板作为 Android 的扩展板。该板基于飞思卡尔 KL25Z128VLK4。大部分设计类似于 Sparkfun 的 IOIO，但有一些扩展。

1.  通过将 Android 手机 (Galaxy Nexus) 的 OTG 电缆连接到 KL25Z 板，Android 充当 USB 主机，KL25Z 充当设备 B (CDC)。
2.  通过反向连接OTG线，Android工作在AOA/ADK/ADB模式，KL25Z为Android提供VBUS和充电电流。

在当前设计中，切换角色主机/设备必须通过交换电缆连接手动完成。但是，在后一种情况下，如果 KL25Z 无法为 Android 提供足够的电流，KL25Z 想将主机角色移交给 Android，因此它可以关闭 5V/500mA 的主电源，并在 Android 的 VBUS 下工作在低功耗模式。

无论如何，我希望我的主板支持主机/设备之间的切换模式，以及在 Android 中的支持。

OTG中A/B切换原则上应启动HNP协议。但是，我不知道如何在 Android 端处理它。我的意思是我不知道 Android SDK 如何以编程方式支持 HNP？涉及任何API？有任何文件、实验室和开放项目吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T20:47:31.190

截至目前，Android 不支持 HNP 协议。这样做的唯一方法是重置板上的 USB 堆栈，并在每次要切换模式时重新枚举。

# r - 有条件地为ggplot2设置一个aes映射

> ID：15595469
> 
> 赞同：2
> 
> 时间：2013-03-24T05:21:43.427
> 
> 标签：r, ggplot2

我正在尝试基于布尔值有条件地设置 aes 映射。这是我正在尝试做的事情：

```
mydata <- data.frame(x=1:10, 
                     y=runif(10), 
                     categoryShort=LETTERS[1:2], 
                     categoryLong=LETTERS[1:5])
mybool <- TRUE
myaes <- aes(x=x, y=y, 
             colour=ifelse(mybool, factor(categoryShort), factor(categoryLong)))
ggplot(mydata, myaes) + geom_point() 
```

它忽略了颜色并搞砸了整个传说。

我尝试使用 aes_string，但遇到了同样的问题：

```
aes_string(x="x", y="y", 
           colour=factor(ifelse(mybool, "categoryShort", "categoryLong"))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T05:21:43.427

事实证明 aes_string 可以处理因子函数。所以这是解决方案：

```
colourMapping <- ifelse(mybool, "factor(categoryShort)", "factor(categoryLong)")
myaes <- aes_string(x="x", y="y", colour=colourMapping) 
```

# python - python导入sqlite错误

> ID：15595473
> 
> 赞同：7
> 
> 时间：2013-03-24T05:22:38.700
> 
> 标签：python, sqlite

python2.7 和 sqlite3 由 homebrew 在 macos 10.8
上安装 pysqlite 由 pip 安装

当我在 python interapter 中键入 import sqlite3 时，它显示以下错误：

```
>>> import sqlite3
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/sqlite3/__init__.py", line 24, in <module>
from dbapi2 import *
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/sqlite3/dbapi2.py", line 27, in <module>
from _sqlite3 import *
ImportError: dlopen(/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload/_sqlite3.so, 2): Library not loaded: /usr/local/lib/libsqlite3.0.8.6.dylib
  Referenced from: /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload/_sqlite3.so
  Reason: image not found 
```

如何纠正该错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-04T20:05:06.710

解决方案是同时卸载 the`sqlite`和`python`kegs：

```
brew rm sqlite python 
```

然后重新安装 Python（它也安装 SQLite3 作为它的依赖项）：

```
brew install python 
```

# java - JFileChooser 保存图像未添加文件类型

> ID：15595474
> 
> 赞同：0
> 
> 时间：2013-03-24T05:22:48.167
> 
> 标签：java, swing, file-io, javax.imageio

我的程序允许您保存已制作的图像。我只需要将它保存为png。

我目前有：

```
...
File file = fc.getSelectedFile();
try{ ImageIO.write(result.getImage(),"png",file);}
... 
```

它保存了图像，我可以在我的程序中将其打开，但它没有在其名称的末尾显示 .png。示例图像（给我们，不是由程序制作的）在我的 JLabel 上显示 .png，所以我知道它与我如何保存它们有关。

我在[这里](https://stackoverflow.com/questions/10471396/appending-the-file-type-to-a-file-in-java-using-jfilechooser)尝试了答案，但没有奏效。

我该如何解决？

（还有一个问题：如果 write 只是要忽略它，那么甚至放“png”有什么意义？）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T05:26:57.197

从[文档中](http://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageIO.html#write%28java.awt.image.RenderedImage,%20java.lang.String,%20java.io.File%29)：

> `ImageWriter`使用支持给定格式的任意格式将图像写入文件。如果已经存在 File，则丢弃其内容。
> 
> ...
> 
> **formatName** - 一个`String`包含^(*[sic]*)格式的非正式名称。

所以`"png"`第二个参数是告诉`ImageIO`如何编码文件，而不是文件扩展名。您可以进入 MS Paint 并将图像另存为`.jpg`，然后将文件重命名为`.png`，但内部仍然是 a `.jpg`；扩展名只是一个信号（对`.png`用户来说，真的）它是文件的类型。

您链接到的答案看起来应该有效。“不起作用”是什么意思？你有错误吗？一个警告？它只是不添加名称吗？

另外，尝试检查您的文件扩展名是否显示（在 Windows 中：**工具**菜单 →**文件夹选项...**菜单项 →**查看**选项卡 → 取消选择“隐藏已知文件类型的扩展名”复选框；在 Mac 上，我认为它在**Finder**菜单中 →**首选项...**菜单项）。

# c# - 用 continue 重构 foreach 循环？

> ID：15595476
> 
> 赞同：2
> 
> 时间：2013-03-24T05:23:06.297
> 
> 标签：c#, refactoring

我试图重构一个很长的`foreach`循环。我陷入了困境，就像我在其中的几个地方`continue`一样。这是一些模仿我的原始代码的虚拟代码

```
IEnumerable<dynamic> allData = FetchAllData();
IEnumerable<dynamic> relativeData = FetchAllRelativData();

foreach (var rdata in relativeData)
{
    IEnumerable<dynamic> dataTobeProcessed = allData.Where(c => c.Name = rdata.Name);

    //Do something

    //if then Continue

    // do something

    //if then continue

    // do something

    // do something

    // add data to db
} 
```

在这里，我删除了所有做某事的部分以分离功能。但同样我的代码部分很少`continue`，即打破循环并前进到下一个元素。所以，我无法分离那部分。

同样，在这里我受到限制，例如步骤仍在继续。意味着第一件事发生，然后是第二件事，然后是第三件事，然后是下一个……所以，我现在无法移动代码的位置。正因为如此，我的函数变得很大，大约 300 行，现在变得难以更改或维护。

请提供一个好的解决方案，通过改变编码`continue`方式来删除或其他方法。`break`

如果需要任何其他详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T05:29:36.040

只需将 if 块重构为具有适当名称的单独函数即可。
然后将所有ifs放在彼此内部而不是继续。

```
if (!something) 
{
  DoFirstThing();
  if (!otherthing)
  {
     DoSechondThing();
  }
} 
//continue implicitly happens here anyway. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T00:47:48.060

在循环开始时，设置一个布尔值 - 让我们将其称为`escape`false。现在将所有现有`continue`的 s替换`escape`为 true。这本身并不是真正的重构——它改变了现有代码的行为——但我们只是完成了一部分。现在选择循环体（现在没有`continue`s），并将其提取为方法。在提取的方法中，将每个赋值替换`escape`为`return`语句。消除`escape`变量的原始创建，您的代码处于更易于进一步重构的状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-31T20:38:05.640

你没有提到你的 DoSomething() 调用的 if 实现是否共享参数和返回类型，*如果*他们这样做，另一种选择是创建一个包含你的 DoSomething() 逻辑的 Funcs 集合，而不是你可以使用的大量 if 语句只需遍历 Func 实现，直到返回值指示您应该中断。

```
var somethingFuncs = new List<Func<x, bool>> 
{
  DoSomething,
  DoSomethingB,
  Blah....
};

foreach(var something in somethingFuncs)
{
  var result = something(arg);

  if (result)
  {
    break;
  } 
} 
```

# r - 如何在被调用例程中获取调用函数的名称？

> ID：15595478
> 
> 赞同：50
> 
> 时间：2013-03-24T05:23:22.257
> 
> 标签：r

是否有像函数一样获取调用者姓名的“非内部”方式`stop`？

这个想法是我有一个小函数来检查输入并在不满足某些条件时停止执行。此函数由其他几个使用相同验证代码的人调用。如果输入无效，调用者的环境被转储（所以我可以看到传递给函数的参数），并且执行停止。

简化示例：

```
check <- function(x)
{
    if(x<0)
    {
        print(as.list(parent.frame()))

        evalq(stop("invalid input."), parent.frame())
    }
}

test <- function(x, y)
{
    check(x)
} 
```

我认为评估`quote(stop("blah"))`调用者环境中的表达式会使其显示调用者的姓名。但是，结果如下：

```
test(-1, 2)

# $x
# [1] -1
# 
# $y
# [1] 2
# 
# Error in eval(substitute(expr), envir, enclos) : invalid input. 
```

`parent.frame(n)`如果我使用with `n>1`in ，这不会改变`evalq`。

所以这是一个问题，实际上是两个问题： 1\. 有没有办法获取创建环境的函数的名称（假设它是这样创建的）？2\. 为什么上面的解决方法失败了？

编辑：我说上面的解决方法失败了，因为我希望错误消息显示为

```
Error in test(x, y) : invalid input. 
```

好像`stop`语句是`test`身体的一部分。所以问题2可以重述为： 2'：`stop("invalid input.")`考虑到在调用者的环境中评估它，为什么没有捕获调用者的名字？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-25T17:49:24.507

感谢@GavinSimpson 和@RicardoSporta，但我已经弄清楚了。如果有人在 SO 中搜索此内容，我将发布答案。

生成当前调用的函数的名称可以通过以下方式检索

```
deparse(sys.calls()[[sys.nframe()-1]]) 
```

这将返回一个字符串，其中不仅包含函数的名称，还包含整个调用对象。单独的名称可以`sys.calls()[[sys.nframe()-1]]`在 deparsing 之前通过子集来检索。

我想要这个是因为我编写了一个函数来检查参数并在出现错误时停止执行。但我希望这个函数（i）转储环境并（ii）在执行堆栈中显示上一层的函数名称。(i) 很容易，但我被困在 (ii) 中。

至于我帖子中的第二个问题，情况是这样的：表达式`stop("invalid input")`是在函数的环境中评估的`test`，但这与表达式是`test`主体的一部分不同，因为执行*堆栈*在这2个场景。在后一种情况下，`stop`只有`test`在它上面，但在第一种情况下，它有`eval`，`check`然后`test`向上。由返回的执行堆栈`sys.calls()`与封闭环境不同。这可能会引起混淆。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-24T05:38:43.977

见`?match.call`。例如：

```
foo <- function() {
  match.call()[[1]]
}

foo()

as.character(foo()) 
```

产生

```
> foo()
foo
> 
> as.character(foo())
[1] "foo" 
```

您的代码的简化版本是

```
check <- function(x) {
  match.call()[[1]]
}

test <- function(y) {
  check(y)
} 
```

给予

```
> test(2)
check
> as.character(test(2))
[1] "check" 
```

Note`match.call()`通过使用`sys.call()`(实际上它调用`sys.call(sys.parent())`) 来工作，就像我上面所做的那样，没有参数。所以你也不妨咨询一下`?sys.call`。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-09-01T12:02:18.760

作为记录，正如 Hadley 所建议的，您可以使用`sys.call()`. 例如：

```
funx = function(...) {
    callingFun = as.list(sys.call(-1))[[1]]
    calledFun = as.list(sys.call())[[1]]
    message(paste(callingFun, " is calling ", calledFun, sep=""))
}

funy = function(...) {funx(...)}

> funy(a = 1, b = 2)
funy is calling funx 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-24T05:47:01.527

问题 #1 由 Gavin 回答（使用`match.call`）。

但是，根据您所描述的内容，您还应该查看`traceback()`，您可以将其输出传递给其他函数。

* * *

### 至于**问题 #2**：

它没有失败，而是完全按预期工作。您看到的错误不是真正意义上的错误，而是您的`stop(.)`函数的错误。

如果你看一下`print(evalq)`，你会看到它反过来调用`eval(substitute(expr), envir, enclos))`where `expr`is your`stop("invalid input.")`

### 正确的解决方法是使用更多级别的引用

```
 evalq(quote(stop("invalid input.")))
  # stop("invalid input.") 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-03-03T14:01:48.473

`rlang`包装的替代方式：

```
f <- function() {
  name <- rlang::call_frame(n = 2)$fn_name
  rlang::abort(paste("The function", name, "was called and I throw an error."))
}
g <- function() f()
g()
#> Error: The function g was called and I throw an error. 
```

^(由[reprex 包](https://reprex.tidyverse.org)（v0.2.1）于 2019 年 3 月 3 日创建)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-08T02:46:19.853

要获取上述函数的函数名，您可以简单地使用：

```
gsub(pattern="^([A-Za-z0-9]+)(\\({1})(.*)(\\){1})$",replacement="\\1",x=deparse(sys.call(-1))) 
```

# ruby - 为什么换行符在这里不起作用？

> ID：15595480
> 
> 赞同：-1
> 
> 时间：2013-03-24T05:23:40.933
> 
> 标签：ruby

```
def say(arg)
  "Hello, #{arg}.\n"
end

say("ABC")  # => "Hello, ABC.\n" 
```

为什么这里打印 \n 而不是换行符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T05:26:35.843

因为`say`返回一个字符串。它不打印任何东西。

如果你想*打印*一些东西，你应该尝试：

```
def say(arg)
  puts "Hello, #{arg}.\n"
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T05:26:42.950

您很可能会尝试在`irb`其中显示字符串的 Ruby 表示形式。相比：

```
irb(main):007:0> puts say("ABC") + say("ABC")
Hello, ABC.
Hello, ABC.
=> nil
irb(main):008:0> puts "ABC" + "ABC"
ABCABC
=> nil 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T05:28:51.737

它实际上从未打印到 stdio 或类似的东西，您只是从函数返回一个字符串。

我会假设您在 IRB 中对此进行评估，IRB 会打印出每个表达式的结果。使用`puts`或类似的。

# jquery-mobile - jQuery Mobile 活动导航项

> ID：15595486
> 
> 赞同：2
> 
> 时间：2013-03-24T05:25:33.283
> 
> 标签：jquery-mobile, navigation

我正在尝试为每个页面设置当前/活动导航的样式，但它不起作用。我在这里不知所措。任何帮助将不胜感激。我只对所有五个“页面”使用一个导航（我更喜欢在导航持续时滑动内容/“页面”）。

这是我的 .js

```
if ($.mobile.activePage.attr("id") == "home") {
$('#home_').addClass('.activeNav');
}
if ($.mobile.activePage.attr("id") == "solutions") {
$('#solutions_').addClass('.activeNav');
} 
if ($.mobile.activePage.attr("id") == "pension") {
$('#pension_').addClass('.activeNav');
}
if ($.mobile.activePage.attr("id") == "team") {
$('#team_').addClass('.activeNav');
} 
if ($.mobile.activePage.attr("id") == "careers") {
$('#careers_').addClass('.activeNav');
} 
```

html:

```
<nav data-role="navbar"><ul>
<li><a id="home_" href="#home" data-transition="slide">Home</a></li>
<li><a id="solutions_" href="#solutions" data-transition="slide">Solutions</a></li>
<li><a id="pension_" href="#pension" data-transition="slide">Pension</a></li>
<li><a id="team_" href="#team" data-transition="slide">Team</a></li>
<li><a id="careers_" href="#careers" data-transition="slide">Careers</a></li>
</ul></nav> 
```

CSS：

```
nav {position: fixed; bottom: 0; z-index: 2000;}
nav ul {position: fixed; bottom: 0; width: 100%; list-style-type: none;}
nav ul li {width: 20%; padding: 0; float: left; text-align: center; font-size: 12px; text-align: center;
    box-sizing:border-box; -moz-box-sizing:border-box; -webkit-box-sizing:border-box;
    line-height: 20px;

    }

nav ul li a {height: 70px; margin: 0 auto -10px auto; display: block;
    background-color: #eeeeee; text-decoration: none; padding-top: 5px;
    font-weight: bold; color: #325d8a; text-shadow: 0 1px 1px white;
    font-family: Helvetica,Arial,sans-serif !important;
    white-space: nowrap; border: 1px solid #201d1d !important;

    box-sizing:border-box; -moz-box-sizing:border-box; -webkit-box-sizing:border-box;

-moz-box-shadow:    inset 0 0 25px #858585;
    -webkit-box-shadow: inset 0 0 25px #858585;
    box-shadow:         inset 0 0 25px #858585;
    }

nav ul li a:hover {background-color: #999;}

nav ul li a.activeNav {background-color: red !important;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T10:03:45.650

这是您的解决方案。我删除了按钮 ID，并将活动页面 ID 与链接进行了比较`href`。要覆盖背景颜色，您需要使用`background`webkits。下面是一个工作示例。

**HTML**

```
<div data-role="page" id="home">
<div data-role="header" data-position="fixed">
     <h1>Home</h1>

    <nav data-role="navbar">
        <ul>
            <li><a href="#home" data-transition="slide">Home</a>

            </li>
            <li><a href="#solutions" data-transition="slide">Solutions</a>

            </li>
            <li><a href="#pension" data-transition="slide">Pension</a>

            </li>

        </ul>
    </nav>
</div>
</div>
<div data-role="page" id="solutions">
<div data-role="header" data-position="fixed">
     <h1>Solutions</h1>

    <nav data-role="navbar">
        <ul>
            <li><a href="#home" data-transition="slide">Home</a>

            </li>
            <li><a href="#solutions" data-transition="slide">Solutions</a>

            </li>
            <li><a href="#pension" data-transition="slide">Pension</a>
            </li>
        </ul>
    </nav>
</div>
</div>
<div data-role="page" id="pension">
<div data-role="header" data-position="fixed">
     <h1>Pension</h1>

    <nav data-role="navbar">
        <ul>
            <li><a href="#home" data-transition="slide">Home</a>

            </li>
            <li><a href="#solutions" data-transition="slide">Solutions</a>

            </li>
            <li><a href="#pension" data-transition="slide">Pension</a>
            </li>
        </ul>
    </nav>
 </div>
</div> 
```

**JS**

```
$(document).on('pageshow', function () {
 var obj = $(document).find('nav[data-role="navbar"] a');
 $.each(obj, function (i, val) {
    $(this).removeClass('activeNav');
    var active = '#' + $.mobile.activePage[0].id;
    if ($(this).attr('href') == active) {
        $(this).addClass('activeNav');
    }
 });
}); 
```

**CSS**

```
nav {position: fixed; bottom: 0; z-index: 2000;}
nav ul {position: fixed; bottom: 0; width: 100%; list-style-type: none;}
nav ul li {width: 20%; padding: 0; float: left; text-align: center; font-size: 12px; text-align: center;
box-sizing:border-box; -moz-box-sizing:border-box; -webkit-box-sizing:border-box;
line-height: 20px;
}
nav ul li a {height: 70px; margin: 0 auto -10px auto; display: block;
background-color: #eeeeee; text-decoration: none; padding-top: 5px;
font-weight: bold; color: #325d8a; text-shadow: 0 1px 1px white;
font-family: Helvetica,Arial,sans-serif !important;
white-space: nowrap; border: 1px solid #201d1d !important;

box-sizing:border-box; -moz-box-sizing:border-box; -webkit-box-sizing:border-box;

-moz-box-shadow:    inset 0 0 25px #858585;
-webkit-box-shadow: inset 0 0 25px #858585;
box-shadow:         inset 0 0 25px #858585;
}
nav ul li a:hover {background-color: #999;}

nav ul li a.activeNav {
background: rgb(255,26,0);
background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+CiAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmYxYTAwIiBzdG9wLW9wYWNpdHk9IjEiLz4KICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2ZmMWEwMCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgPC9saW5lYXJHcmFkaWVudD4KICA8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIiBmaWxsPSJ1cmwoI2dyYWQtdWNnZy1nZW5lcmF0ZWQpIiAvPgo8L3N2Zz4=);
background: -moz-linear-gradient(-45deg,  rgba(255,26,0,1) 0%, rgba(255,26,0,1) 100%); 
background: -webkit-gradient(linear, left top, right bottom, color-stop(0%,rgba(255,26,0,1)), color-stop(100%,rgba(255,26,0,1)));
background: -webkit-linear-gradient(-45deg,  rgba(255,26,0,1) 0%,rgba(255,26,0,1) 100%);
background: -o-linear-gradient(-45deg,  rgba(255,26,0,1) 0%,rgba(255,26,0,1) 100%);
background: -ms-linear-gradient(-45deg,  rgba(255,26,0,1) 0%,rgba(255,26,0,1) 100%);
background: linear-gradient(135deg,  rgba(255,26,0,1) 0%,rgba(255,26,0,1) 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ff1a00', endColorstr='#ff1a00',GradientType=1 );
} 
```

[工作示例。](http://jsfiddle.net/Palestinian/vGt2A/)

# cycle - 如果 Dijkstra 算法在具有负权重循环的有向图上运行会发生什么？

> ID：15595488
> 
> 赞同：0
> 
> 时间：2013-03-24T05:26:06.030
> 
> 标签：cycle, dijkstra

假设 Dijkstra 从随机顶点运行，并且在路径上遇到负权重循环。我们可以循环循环以使成本尽可能小，但 Dijkstra 的不变量不是“重新访问”访问过的节点，所以我想不会有无限循环并且 Dijkstra 会终止？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T05:31:21.460

问题不在于 Dijkstra 的算法不会终止，而是 Dijkstra 的算法根本不适用于具有负权重的图。有关原因的解释，请参[见此答案。](https://stackoverflow.com/a/6799344/57318)

# html - 检索 Servlet 中选择选项的值

> ID：15595490
> 
> 赞同：1
> 
> 时间：2013-03-24T05:26:37.010
> 
> 标签：html, jsp, servlets

我的表单中有一个要发送到 Servlet 的选择标签。我已经使选择标记的内容动态化（它从数据库中的表列中获取值）。

```
Select Branch:-<select>  
            <%  
            while(r.next()){  
    %>  
           <option><%=r.getString("code")%></option>  
            <%  
           }  
r.close();  
s.close();  
con.close();  
    %>  
        </select> 
```

（'r' 是 ResultSet） 我的问题是如何将用户从选择标签中选择的值发送到 servlet。对于使用 Request.getparameter("name") 我必须知道选项标签的值。我很困惑。请帮忙..谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T05:43:43.590

`select`为标签 分配一个唯一的名称。`<select name="codeSelect">`

但是，这不是解决此问题的正确方法，在 Servlet 中执行所有数据库交互并设置适当的请求参数并将其转发给 jsp。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T05:36:19.420

```
 <select id="codes">  
        <%  
        while(r.next()){  
        %>  
        <option value="<%=r.getString("code")%>"><%=r.getString("code")%></option>  
        <%  
       }  
       r.close();  
       s.close();  
       con.close();  
       %>  
       </select> 
```

现在，您可以获得“代码”的值

# c - C中的（空）无限循环未定义行为吗？

> ID：15595493
> 
> 赞同：13
> 
> 时间：2013-03-24T05:26:50.623
> 
> 标签：c, infinite-loop, undefined-behavior

无限循环是否类似于`for (;;);`C 中的未定义行为？（它[适用于 C++](https://stackoverflow.com/questions/3592557)，但我不了解 C。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-24T05:56:09.737

不，`for (;;)`语句的行为在 C 中已得到很好的定义。

[N1570](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)与官方 2011 ISO C 标准基本相同，在第 6.8.5 节第 6 段中说：

> 一个迭代语句，其控制表达式不是常量表达式，不执行输入/输出操作，不访问 volatile 对象，并且在其主体、控制表达式或（在**for** 语句的情况下）不执行同步或原子操作它的*表达式 3*可以被实现假定为终止。

有两个脚注：

> 一个省略的控制表达式被一个非零常量替换，这是一个常量表达式。
> 
> 这旨在允许编译器转换，例如即使在无法证明终止时也可以删除空循环。

第一个脚注清楚地表明它`for (;;)`被视为具有恒定的控制表达式。

该规则的要点是在编译器无法证明循环终止时允许优化。但是如果控制表达式是常量，编译器*可以*简单地证明循环是否终止，因此不需要额外的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T06:33:48.260

The rationale for this question with relevance to C++ isn't relevant to C. Section 5.1.2.3p6 states the limits to optimisation, and one of them is:

> At program termination, all data written into files shall be identical to the result that execution of the program according to the abstract semantics would have produced.

Now the question becomes "What data would execution according to the abstract semantics have produced?". Assuming a signal interrupts the loop, the program may very well terminate. The abstract semantics would have produced no output prior to that signal being raised, however. If anything, the compiler *may* optimise the `puts("Hello");` away.

# asp.net-mvc - ELMAH 需要 System.Data.SqlServerCe.dll

> ID：15595495
> 
> 赞同：3
> 
> 时间：2013-03-24T05:26:59.700
> 
> 标签：asp.net-mvc, visual-studio, elmah

安装了 ELMAH NuGet 包。现在，当我将我的 ASP.NET MVC 4 项目发布到 Azure 时，它​​警告我它希望我的项目有一个直接引用`System.Data.SqlServerCe.dll`（因此显然由 ELMAH 引用的 DLL 包含在上传到 Azure 的位中）。

我没有使用 SQL Compact Edition 进行日志记录，所以我假设我并不真的需要那个 DLL（事实上，没有它，Azure 包也可以正常工作）。

那么，我该如何解决这个“缺少 DLL”的问题呢？我可以尝试查找并删除引用此 DLL 的 ELMAH 部分，但它只会在下一次发布新版本的 ELMAH 时回来。由于 DLL 显然不在 GAC 中，我可以添加对`System.Data.SqlServerCe.dll`隐藏在我的`C:\Program Files (X86)`文件夹下的副本的引用，但这对我来说很难闻。或者我可以忽略警告，但原则上（和已发布的政策）我不会轻易容忍警告。

有什么建议么？

编辑：

Daniel Powell 让我发布我的 NuGet packages.config，它看起来像这样（我希望 - 这比我挖掘的更深奥的魔法）

```
<?xml version="1.0" encoding="utf-8"?>
<packages>
  <package id="DotNetOpenAuth.AspNet" version="4.2.2.13055" targetFramework="net45" />
  <package id="DotNetOpenAuth.Core" version="4.2.2.13055" targetFramework="net45" />
  <package id="DotNetOpenAuth.OAuth.Consumer" version="4.2.2.13055" targetFramework="net45" />
  <package id="DotNetOpenAuth.OAuth.Core" version="4.2.2.13055" targetFramework="net45" />
  <package id="DotNetOpenAuth.OpenId.Core" version="4.2.2.13055" targetFramework="net45" />
  <package id="DotNetOpenAuth.OpenId.RelyingParty" version="4.2.2.13055" targetFramework="net45" />
  <package id="elmah" version="1.2.2" targetFramework="net45" />
  <package id="elmah.corelibrary" version="1.2.2" targetFramework="net45" />
  <package id="EntityFramework" version="5.0.0" targetFramework="net45" />
  <package id="Glimpse" version="1.1.0" targetFramework="net45" />
  <package id="Glimpse.AspNet" version="1.1.0" targetFramework="net45" />
  <package id="Glimpse.Mvc3" version="1.1.0" targetFramework="net45" />
  <package id="jQuery" version="1.9.1" targetFramework="net45" />
  <package id="jQuery.UI.Combined" version="1.10.1" targetFramework="net45" />
  <package id="jQuery.Validation" version="1.11.0" targetFramework="net45" />
  <package id="knockoutjs" version="2.2.1" targetFramework="net45" />
  <package id="log4net" version="2.0.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.Mvc" version="4.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.Razor" version="2.0.20715.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.Web.Optimization" version="1.0.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.WebApi" version="4.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.WebApi.Client" version="4.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.WebApi.Core" version="4.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.WebApi.WebHost" version="4.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.WebPages" version="2.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.WebPages.Data" version="2.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.WebPages.OAuth" version="2.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.WebPages.WebData" version="2.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.Data.Edm" version="5.3.0" targetFramework="net45" />
  <package id="Microsoft.Data.OData" version="5.3.0" targetFramework="net45" />
  <package id="Microsoft.jQuery.Unobtrusive.Ajax" version="2.0.30116.0" targetFramework="net45" />
  <package id="Microsoft.jQuery.Unobtrusive.Validation" version="2.0.30116.0" targetFramework="net45" />
  <package id="Microsoft.Net.Http" version="2.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.Web.Infrastructure" version="1.0.0.0" targetFramework="net45" />
  <package id="Microsoft.WindowsAzure.ConfigurationManager" version="1.8.0.0" targetFramework="net45" />
  <package id="Modernizr" version="2.6.2" targetFramework="net45" />
  <package id="Newtonsoft.Json" version="4.5.11" targetFramework="net45" />
  <package id="System.Spatial" version="5.3.0" targetFramework="net45" />
  <package id="WebGrease" version="1.3.0" targetFramework="net45" />
  <package id="WindowsAzure.Storage" version="2.0.5.0" targetFramework="net45" />
</packages> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T12:40:59.787

几个月来，我一直在 Azure 上运行一项服务，并收到同样的警告。如果您确定您没有使用 SQL Server CE，那很好。

这是一个令人讨厌的警告，但据我所知并没有什么害处。

# php - 尝试输出 6 个随机数

> ID：15595496
> 
> 赞同：-1
> 
> 时间：2013-03-24T05:27:03.793
> 
> 标签：php, javascript, random

我正在尝试使用以下代码输出 6 个随机数，但是，它给了我 44 行。如果有人可以提供帮助，那就太好了！

```
while($row = mysql_fetch_array($result))
{
    echo '
        <script type="text/javascript">
            for(var i=0; i<6; i++){
                var x = Math.floor(Math.random()*43) + 1;
                document.write(x + "</br>");
            }
        </script>
    ';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T05:32:50.970

尝试用 PHP 生成一个随机数：

```
while($row = mysql_fetch_array($result))
{
    for($i = 0; $i < 6; $i++)
      echo rand() . "<br />";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T05:38:39.217

对不起，伙计们，真的是新手错误，我刚刚意识到 PHP 的 while 部分导致了 44 次出现，因为它为每一个都创建了一个随机数。是菜鸟错误！

# asp.net-mvc-4 - 当 dojo 网格存在时在 asp.net MVC 中处理 Form Post

> ID：15595498
> 
> 赞同：0
> 
> 时间：2013-03-24T05:27:32.357
> 
> 标签：asp.net-mvc-4, dojox.grid.datagrid

我对基于 Web 的应用程序开发非常陌生。我正在使用 ASP.Net MVC4 和 dojo 工具包。我的要求就像我有某些文本框来捕获数据，还有一个 dojo 网格来捕获表格格式的某些细节。所以我将 Dojo 网格（[http://dojotoolkit.org/api/1.8/dojox/grid/DataGrid](http://dojotoolkit.org/api/1.8/dojox/grid/DataGrid)）与 ItemFileWriteStore 一起使用。我的观点如下（我正在使用剃须刀）

```
@using (Html.BeginForm("CreateNewData", "Home", FormMethod.Post, new { id = "myForm" }))
{

    <div class="controlWrapper">
        <div class="controlLabel">
            @Html.DisplayNameFor(model => model.Name)
        </div>
        <div class="controlValue">
            @Html.TextBoxFor(model => model.Name)
        </div>
    </div>
<div class="controlWrapper">
        <h4>
            Table Items</h4>
        <div id="myGrid">
        </div>
         <div id="addRemoveMode">
            <button data-dojo-type="dijit.form.Button" id="addButton" onclick="addRecord()">
                Add</button>
            <button data-dojo-type="dijit.form.Button" id="removeButton" onclick="removeRecord()">
                Remove Selected Rows
            </button>
        </div>
    </div>
} 
```

我创建网格的java脚本如下

```
require(["dojo/ready",
         "dojox/grid/DataGrid",
         "dojo/data/ItemFileWriteStore",
         "dojo/json",
         "dojo/query",
         "dijit/form/TextBox"
        ], function (ready, DataGrid, ItemFileWriteStore, Json, query, TextBox) {
            ready(function () {

                var layout = [[
                { name: 'ID', field: 'ID', hidden: true },
                { name: 'Label', field: 'Label', width: '10%', editable: true },
                { name: 'Position', field: 'Position', width: '10%', editable: true }
                    ]];

                    var attCodeData = {
                                    identifier: 'ID',
                                    items: []
                                };
                console.log(globalVar);
                attCodeData["items"] = globalVar;

                myStore= new ItemFileWriteStore({ data: attCodeData })

                myGrid= new DataGrid({
                    store: myStore,
                    structure: layout,
                    rowSelector: '20px'
                },"divGrid");

                myGrid.startup();
} 
```

我的问题是因为网格在表单内，每当我添加或删除一行时，页面都会提交给表单中提到的 Post 方法。我只需要发布整个数据，以便我可以一起处理。所以我把我的网格移到了表单之外。现在我很困惑如何捕获整个数据（文本框和网格中的数据）并提交给控制器方法。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T19:53:25.550

为了防止整个页面被提交到 Post 方法，您应该使用 ajax 解决方案来发送和接收数据。

看看这个：[DataGrid View with "CRUD operations" using Dojo DataGrid、JsonRest Store、Entity Framework、SQL Server、ASP.NET MVC Web API](http://www.codeproject.com/Articles/331920/DataGrid-View-with-CRUD-operati) 和这个：[Ajax with dojo/request](https://dojotoolkit.org/documentation/tutorials/1.9/ajax/)。我希望，他们有所帮助。

# java - SQLite 连接不起作用

> ID：15595500
> 
> 赞同：0
> 
> 时间：2013-03-24T05:27:42.957
> 
> 标签：java, sqlite

我已经查看了很多关于此的其他问题，但似乎没有一个对我有用。我什至在我的构建路径中有 SQLite.jar 资源。有人可以为我提供正确的下载链接吗？也许我弄错了。但它总是给出连接失败错误。

```
 public static void main(String[] args) {
    try {
      Class.forName("SQLite.JDBCDriver");
      Connection conn = DriverManager.getConnection("jdbc:sqlite:/Users/mac/Desktop/database.db");
    } catch (Exception e) {
        e.printStackTrace();
   } 
```

给我

```
java.lang.ClassNotFoundException: org.sqlite.JBDC
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:171)
at SQLTest.Main.main(Main.java:25) 
```

# c# - 如何在 ObjectListView 中获取选定对象的值

> ID：15595501
> 
> 赞同：1
> 
> 时间：2013-03-24T05:28:13.457
> 
> 标签：c#, objectlistview

我有一个 objectlistview，它在一列中显示文件名及其路径。我想对选定的项目运行一个函数。有什么方法可以获取文件名的值并遍历在 objectlistview 上选择的每个文件？列方面名称是文件名。

我的函数如下：sampleFunction(string inputFile, string outputFile);

到目前为止，我已经尝试过，但无法工作，我知道我缺少对列本身的引用，但我不知道如何添加它：

```
for(var i=0; i<=objectListView1.SelectedObjects.Count; i++)
        {
            encClass.sampleFunction(objectListView1.SelectedObjects[i], "output here");
        } 
```

编辑：

我还尝试了将方法附加`ToString()`到`objectListView1.SelectedObjects[i].ToString()`. 它没有显示错误，但函数无法完美运行，因为我有 3 列，我只想将函数中第一列的值用作 inputFile 值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T07:49:38.203

我似乎没有正确理解 OLV 的概念。我建议您（再次）阅读本教程。
OLV 允许您直接使用底层模型对象，因此只需将所选对象转换为原始类型并访问其属性。您甚至可以使用 TypedObjectListView<>，它简化了对模型的访问。

从您的帖子来看，您想要做的可能是这样的：

```
foreach (var selectedObject in objectListView1.SelectedObjects) {
    encClass.sampleFunction(((MyType)selectedObject).Filename, "output here");
} 
```

显然，将“MyType”替换为您的模型对象类型。

# csv - CSV 文件在每行之后添加新行

> ID：15595502
> 
> 赞同：2
> 
> 时间：2013-03-24T05:28:21.813
> 
> 标签：csv

当我尝试将 CSV 文件从服务器一复制到服务器二时，csv 文件在每一行之后添加一个新行。

例子：

```
 ORIGINAL FILE:
   1\. ONE
   2\. TWO
   3\. THREE
   4\. FOUR

  AFTER TRANSFERRING THE FILE:    
   1\. ONE
   2\. 
   3\. TWO
   4.
   5\. THREE
   6.
   7\. FOUR 
```

我在那里运行这个系统几个月。而这个问题突然发生了。这是问题不规律。这是我第二次面临这个问题。

我正在使用 Filezilla 上传文件。上传文件后，我使用脚本每 2 分钟扫描一次目录中的 csv 文件。然后将 csv 文件移动到另一台服务器。

需要帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T06:32:08.080

我相信问题可能是您没有以二进制模式传输。您希望处于二进制模式，否则可能会导致不同的格式。

> 登录 ftp 站点后，ftp 会打印出文件传输类型。在我们的例子中，它是二进制的。二进制模式按位传输文件，就像它们在 FTP 服务器上一样。然而，Ascii 模式将直接下载文本。您可以键入`ascii`或`binary`在类型之间切换。

来源：[http ://www.tldp.org/HOWTO/FTP-3.html](http://www.tldp.org/HOWTO/FTP-3.html)

# unit-testing - 使用 Vimrunner 对 Vim 脚本本地函数进行单元测试

> ID：15595505
> 
> 赞同：6
> 
> 时间：2013-03-24T05:28:42.630
> 
> 标签：unit-testing, vim, vimrunner

我正在使用[Vimrunner](https://github.com/AndrewRadev/vimrunner)对 Vim 插件进行单元测试。一切正常，但我正在寻找一种更好/规范的方式来执行脚本本地功能。由于它们在脚本之外不直接可见，因此我目前正在公开脚本`<SID>`并将其添加到我的调用中以运行它们。

我必须将此代码添加到我的插件中以公开 SID：

```
function! s:SID()
  let fullname = expand("<sfile>")
  return matchstr(fullname, '<SNR>\d\+_')
endfunction
let g:my_plugin_SID = s:SID() 
```

这会将 SID 公开为 eg `<SNR>18_`。由于 Vim 函数都是全局的，并且只是名称，因此可以通过在 SID 前面加上前缀来在脚本外部调用脚本本地函数：

```
:call <SNR>18_some_function() 
```

然后我在规范中这样做：

```
describe "s:reverse_string" do
  let!(:sid) { VIM.command("echo g:my_plugin_SID") }

  def reverse_string(string)
    VIM.command("echo #{sid}reverse_string('#{string}')")
  end

  it "does something" do
    reverse_string("foo").should == "oof"
  end
end 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T08:34:05.177

最简单的方法是简单地公开脚本本地函数：`s:MyFunc`变成`MyPlugin#MyFunc`. 毕竟，无论如何，功能可见性只是约定俗成的；无论如何，没有任何东西（除了繁琐的名称查找）可以防止调用脚本本地函数。

有时，我会偏离这一点，并且确实想从测试中调用脚本本地函数。我的方法与您的方法非常相似，但是`<SID>`我没有在插件中公开 from ，而是编写了帮助函数来解析`<SID>`来自`:scriptnames`输出的。它更慢（我不在乎；我的测试是集成测试），但我不必用测试代码污染插件本身。这是一个显示`Sid()`和`SidInvoke()`助手的示例：

```
let s:SID = Sid('autoload/EditSimilar/Substitute.vim')
function! s:Is( input, expected, description )
    let l:got = SidInvoke(s:SID, printf("IsWildcardPathPattern('%s')", a:input))
    call vimtap#Is(l:got, a:expected, a:description)
endfunction 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-15T10:06:55.107

使用它来获取脚本编号：

```
let sid = matchlist(execute('scriptnames'), '\([0-9]\+\): [^ ]*autoload/my_vimscript.vim')[1] 
```

这将调用脚本本地函数（`s:Test()`在本例中）

```
execute("call <snr>" . sid . "_Test()") 
```

# email - 处理/过滤入站电子邮件的服务

> ID：15595506
> 
> 赞同：0
> 
> 时间：2013-03-24T05:28:43.807
> 
> 标签：email, smtp

[Mandrill](http://mandrillapp.com)具有入站电子邮件处理功能，您可以在其中设置一个包罗万象的地址，将传入的电子邮件发送到指定的 URL。

例如，发往的电子邮件`*@sub.domain.com`可能会被张贴到`http://mydomain.com/process`.

是否有一种可以以这种方式工作但允许“重新路由”电子邮件的服务？假设如果对上面 URL 的帖子返回特定代码，例如 403，则电子邮件将被吞掉，但是当返回 200 代码时，电子邮件将被发送到特定地址，无需修改，就好像它一样最初发送到该地址。

我想我可以编写一个脚本来重新发送电子邮件，但我不想遇到可传递性问题。

我不确定我是否清楚地解释了这一点，所以这里有一个具体的例子：

1.  `newsletters@sub.domain.com`类似 Mandrill 的服务（接收方）接收到的电子邮件
2.  该服务将电子邮件发布到`http://mydomain.com/process`（我们称其为处理器）
3.  处理器：
    1.  返回 403，在这种情况下不会发生其他任何事情
    2.  返回一个 200 和一个目标地址，然后接收者将该电子邮件传递到新目标

**编辑：**我意识到我可以使用 Mandrill 重新发送电子邮件，但如果我不是原始发件人，我不会遇到问题吗？例如，如果我收到一封来自另一个地址的电子邮件`support@microsoft.com`，然后我将该电子邮件重新发送到另一个地址，我是否会被标记为垃圾邮件发送者或在送达性方面存在其他问题？所以这可能根本不可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:33:56.557

似乎确实不可能做我想做的事，否则任何人都可以毫无问题地向世界发送垃圾邮件，但是，Mandrill 刚刚添加了这个功能，它可能会派上用场：

[http://help.mandrill.com/entries/23374656-Can-I-send-emails-on-behalf-of-my-clients-](http://help.mandrill.com/entries/23374656-Can-I-send-emails-on-behalf-of-my-clients-)

这只是一个实验，但我将尝试将邮件重新发送到我自己的服务器，而不是转发到原始接收者，这样电子邮件客户端就可以从那里提取邮件。

# c - 读取文件时出错

> ID：15595507
> 
> 赞同：-5
> 
> 时间：2013-03-24T05:28:45.057
> 
> 标签：c

我正在尝试获取文本文件的数据（如下所示），但我一直收到错误太少的参数

```
1/1/1990/0/0 774.359070
1/1/1990/0/10 772.973206
1/1/1990/0/20 739.628784
1/1/1990/0/30 680.130066
1/1/1990/0/40 618.887695 
```

我的代码是

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
{
    FILE* input;
    FILE* output;

    input = fopen(argv[1],"r");
    output = fopen(argv[2],"w");

    float date;
    float value;

    while(fscanf(input,"%f/%f/%f/%f/%f/%f\n",&date, &value)!= EOF)
    {

    }
    fprintf(output,"%f\n/%f\n/%f\n/%f\n/%f\n/%f\n",date, value);

    return 0;
} 
```

这是我得到的错误

```
float_search.c: In function 'main':
float_search.c:15:2: warning: too few arguments for format
float_search.c:20:2: warning: too few arguments for format 
```

我究竟做错了什么？？

// 更新代码

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
{
    FILE* input;
    FILE* output;

    input = fopen(argv[1],"r");
    output = fopen(argv[2],"w");

    int date1,date2,date3,date4,date5;
    float value;

    while(fscanf(input,"%d/%d/%d/%d/%d/%f\n",&date1,&date2,&date3,&date4,&date5, &value)!= EOF)
    {

        fprintf(output,"%d\n/%d\n/%d\n/%d\n/%d\n/%f\n",date1,date2,date3,date4,date5,value);
    }
    fprintf(output,"%d\n/%d\n/%d\n/%d\n/%d\n/%f\n",date1,date2,date3,date4,date5,value);

    return 0;
} 
```

以上是带有更改的更新代码，当将其打印出来时，我得到以下输出

```
46804
/4196128
/32765
/-1590701960
/0
/0.000000
34501 
```

03

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T05:31:50.480

您有六个格式说明符 ( `%f`)，但只给了它两个放置它们的位置。做更多的变量。此外，您可能只需要最后一个字段的浮点数；其余的应该是整数。

* * *

使用您更新的代码，您的输出与输入不同的原因是所有的`\n`s. 每个都`\n`添加一个新行，最后只需要一个。删除除最后一个以外的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T05:40:33.337

您已经为 6 个浮点数设置了格式，并且只为两个浮点数设置了输出参数。你可以试试这个：

```
int main(int argc, char *argv[])
{
    FILE* input;
    FILE* output;

    input = fopen(argv[1],"r");
    output = fopen(argv[2],"w");

    int date[5];
    float value;

    while(fscanf(input,"%d/%d/%d/%d/%d %f\n",&date[0],&date[1],&date[2],&date[3],&date[4], &value)!= EOF)
    {

    }
    fprintf(output,"%d\n/%d\n/%d\n/%d\n/%d\n/%f\n",date[0],date[1],date[2],date[3],date[4], value);

    return 0;
} 
```

# bash - Shortest Job Next Scheduling 代码逻辑帮助 BASH

> ID：15595511
> 
> 赞同：0
> 
> 时间：2013-03-24T05:28:58.090
> 
> 标签：bash, logic, scheduling

我正在尝试使用 bash 编写代码来模拟下一个最短作业或下一个最短进程，但我在掌握其背后的逻辑时遇到了一些麻烦。我从具有进程名称、到达时间和突发时间的文件中读取。所以说

一个 | 1 | 5

乙| 2 | 3

C | 3 | 2

D | 4 | 4

E | 6 | 3

到目前为止，这是我的思考过程。我正在使用 bash 脚本，所以我将数据分成 3 个单独的数组。过程、到达和爆发。我创建了一个名为 totaltime 的第四个数组。实际上，我知道这就是日程安排的样子

|1|过程 A|5|过程 C|7|过程 B|10|过程 D|14|过程 E|17|

我的代码逻辑是首先检查到达数组并找到最小值，并且该行对应于要调度的第一个进程。Next 检查哪些进程的到达时间小于第一个进程的突发时间。在这组流程中找到最智能的突发时间。现在这就是我坚持的地方。我是否使用 if 语句来检查哪些进程小于第一次突发时间，然后使用 for 循环查找集合中最小的突发时间？之后我将如何安排第三个过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:06:38.203

您可以做的是，创建一个小于第一次突发时间的进程数组，然后对该数组进行排序。第一个结果将是最小的突发时间。

# c# - 在 F# 中使用 C# 流利的库

> ID：15595512
> 
> 赞同：7
> 
> 时间：2013-03-24T05:29:00.923
> 
> 标签：c#, f#, fluentvalidation, c#-to-f#

我试图在 F Sharp 示例中使用[FluentValidation库。](http://fluentvalidation.codeplex.com/)但是我被卡住了，因为我什至无法将简单的 C Sharp 代码转换为 F Sharp 代码。

但后来我认为这个美妙的库只是试图将编程方面的功能位带到 CSharp，所以我应该只在 FSharp 中创建我自己的库，而不是使用它。这将是简单而适当的方式。

所以，我需要一个意见，哪种方式会更好。如果有人可以为此创建 FSharp 示例，那就太好了。这只是为了学习目的，因为我主要在 C# 中使用流利的库。我喜欢在 F# 中与他们一起使用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T08:39:27.997

F# 支持流畅的 DSL，并且有几个具有流畅 API 的 F# 库。F# 的类型系统与 C# 的有点不同，并且大多数差异都会通过流畅的 API 弹出，但仍然有效：

```
#r @"C:\Users\Ramon\Downloads\FluentValidation\FluentValidation\FluentValidation.dll"

open System
open FluentValidation

type Customer =
    { Surname : string
      Forename : string
      Company : string
      Discout : int
      Address : string
      Postcode : string
      Discount : int
      HasDiscount : bool }

type IRuleBuilder<'T,'Property> with
    member __.Ignore = ()

type CustomerValidator =
    inherit AbstractValidator<Customer>

    new () =
        let beAValidPostcode postcode = true
        base.RuleFor(fun customer -> customer.Surname).NotEmpty().Ignore
        base.RuleFor(fun customer -> customer.Forename).NotEmpty().WithMessage("Please specify a first name").Ignore
        base.RuleFor(fun customer -> customer.Company).NotNull().Ignore
        base.RuleFor(fun customer -> customer.Discount).NotEqual(0).When(fun customer -> customer.HasDiscount).Ignore
        base.RuleFor(fun customer -> customer.Address).Length(20, 250).Ignore
        base.RuleFor(fun customer -> customer.Postcode).Must(beAValidPostcode).WithMessage("Please specify a valid postcode").Ignore
        { } 
```

# ios - iOS 中的其他 Mtouch 参数

> ID：15595514
> 
> 赞同：6
> 
> 时间：2013-03-24T05:29:03.457
> 
> 标签：ios, mono, xamarin.ios, arguments, monkeytalk

我有一个关于“其他 mtouch 参数”的快速问题

```
-gcc_flags "-lstdc++ -L${ProjectDir} -libMonkeyTalk-1.0.40 -lsqlite30 -framework CFNetwork -framework QuartzCore -all_load" 
```

我将其作为附加参数，但在构建 iOS 应用程序时出现以下错误。

```
Error MT5201: Native linking failed. Please review user flags provided to gcc: "-lstdc++" "-L/Users/henry/Downloads/HelloWorld_iPhone/HelloWorld_iPhone" "-libMonkeyTalk-1.0.40" "-lsqlite30" "-framework" "CFNetwork" "-framework" "QuartzCore" "-all_load" (MT5201) (HelloWorld_iPhone) 
```

我怎样才能解决这个问题？我的论点有什么问题？我错过了添加 MonkeyTalk 库的步骤还是有其他问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T15:46:52.327

`MT5201`**错误表示运行本机**链接器时构建失败。

最常见的问题之一*与*使用`-gcc_flags`. 这就是错误消息要求您查看它们的原因。

然而，这并不是链接失败的唯一原因。审查后，您应该查看构建日志（在 XS 错误板内）以查看链接器报告的警告/错误（甚至更早的消息）。

如果您的问题提供了**完整**的附加 mtouch 参数，那么您的问题可能是与 C++ 库（您的`"-lstdc++`）链接，而没有告诉`mtouch`使用 C++ 编译器进行编译，使用`--cxx`.

请注意，这是一个`mtouch`参数，**而不是**链接器参数，因此它**不能**在您的`--gcc_flags`. 例如

```
--cxx -gcc_flags "-lstdc++ -L${ProjectDir} -libMonkeyTalk-1.0.40 -lsqlite30 -framework CFNetwork -framework QuartzCore -all_load" 
```

# twitter-bootstrap - 使用图标字体时引导工具提示放置不正确

> ID：15595518
> 
> 赞同：0
> 
> 时间：2013-03-24T05:30:36.620
> 
> 标签：twitter-bootstrap

我正在努力做到这一点，因此当有人将鼠标悬停在我网站上的图标上时，工具提示会显示在图标下方（使用引导程序），但工具提示的位置都搞砸了。

这是我的代码

```
<a id='notify' href="#" 
   data-toggle="tooltip" 
   data-placement="bottom" 
   data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus." 
   title="" 
   data-original-title="Popover on top">
  <i class = 'icon-globe'></i>
</a> 
```

和我的脚本

```
$(document).ready(function(){
        $("#notify").tooltip();
      }); 
```

我试过只使用纯文本，它工作正常，但是当我使用图标字体时，我的工具提示的位置在右边，甚至不靠近图标字体

这是一个屏幕截图：

![在此处输入图像描述](../Images/87fb89d2cf69eeaf2de97697f1ec67e6.png)

谢谢

* * *

编辑：已解决

* * *

我今天再次遇到这个问题并通过将工具提示属性从链接标签移动到 i 标签来解决它，就像这样

前

```
<a id='notify' href="#" 
   data-toggle="tooltip" 
   data-placement="bottom" 
   data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus." 
   title="" 
   data-original-title="Popover on top">
  <i class = 'icon-globe'></i>
</a> 
```

后

# php - 如何验证具有大量查询字符串的 url

> ID：15595520
> 
> 赞同：2
> 
> 时间：2013-03-24T05:30:54.180
> 
> 标签：php, validation, preg-match

我有一个汽车网站，我有一个名为 SAVE SEARCH 的功能，它可以保存用户在网站上进行的搜索以供将来使用。我正在做的是我将整个 url 保存在数据库中。

但我需要将其验证为有效的 url。它看起来像这样。

```
http://www.anywebsite.com/cars.php?postcode=CV2+5AS&distance=&make=&min_price=&max_price=&category_type=&body_type=&fuel=&colour=&transmission=&year_of_registration=&mileage=&engine=&doors=&seller=&keywords=&sort=PRICE_LOWEST&referer_url=http%253A%252F%252Flocalhost%252Fselling%252Fcars.php&trader_id=0&case=ADVANCE 
```

任何人都可以向我提供有关如何实现它的任何想法吗？

我有 preg_match 在这里。

```
if (!preg_match('/^https?:(\/\/)?(www\.)?([a-zA-Z0-9_%]*)\b\.[a-z]{2,4}(\.[a-z]{2})?/', $fields[$field_name])) 
```

但它只验证诸如[http://www.anywebsite.com](http://www.anywebsite.com)之类的 url ，而我需要验证上面的整个 url。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T04:45:03.093

您应该按照其他答案中的建议使用过滤器[`filter_vars()`](http://php.net/manual/en/function.filter-var.php)。[`FILTER_VALIDATE_URL`](http://www.php.net/manual/en/filter.filters.validate.php)但是，如果您想使用 RegEx，您必须查看[@Mathias Bynens](https://stackoverflow.com/users/96656/mathias-bynens)[的 In search of the perfect URL validation regex](https://mathiasbynens.be/demo/url-regex) blog

我只会添加一个由@diegoperini 编写的支持所有 URL 模式的正则表达式。

[`^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\x{00a1}-\x{ffff}0-9]+-?)*[a-z\x{00a1}-\x{ffff}0-9]+)(?:\.(?:[a-z\x{00a1}-\x{ffff}0-9]+-?)*[a-z\x{00a1}-\x{ffff}0-9]+)*(?:\.(?:[a-z\x{00a1}-\x{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$`](https://regex101.com/r/sR0xH1/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T05:36:05.713

没有理由需要手动编写 URL 验证，这个问题已经解决了。

看看 php 的[`filter_var()`](http://php.net/manual/en/function.filter-var.php).

URL 验证示例：[http ://www.w3schools.com/php/filter_validate_url.asp](http://www.w3schools.com/php/filter_validate_url.asp)

```
$url = "http://www.anywebsite.com/cars.php?postcode=CV2+5AS&distance=&make=&min_price=&max_price=&category_type=&body_type=&fuel=&colour=&transmission=&year_of_registration=&mileage=&engine=&doors=&seller=&keywords=&sort=PRICE_LOWEST&referer_url=http%253A%252F%252Flocalhost%252Fselling%252Fcars.php&trader_id=0&case=ADVANCE";

if (!filter_var($url, FILTER_VALIDATE_URL)) {
  echo "URL is not valid";
}
else {
  echo "URL is valid";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T05:37:49.857

为什么要在可以做的时候重新发明轮子[`filter_var()`](http://php.net/manual/en/function.filter-var.php)？然后使用过滤器用于 PHP 5 >= 5.2.0 此外，您可能希望添加所需的域名，我相信您将需要它，您可以查看其他标志以查看是否需要它们。[`FILTER_VALIDATE_URL`](http://www.php.net/manual/en/filter.filters.validate.php) `filter_var``FILTER_FLAG_HOST_REQUIRED`

例子：

```
$url = 'http://www.anywebsite.com/cars.php?postcode=CV2+5AS&distance=&make=&min_price=&max_price=&category_type=&body_type=&fuel=&colour=&transmission=&year_of_registration=&mileage=&engine=&doors=&seller=&keywords=&sort=PRICE_LOWEST&referer_url=http%253A%252F%252Flocalhost%252Fselling%252Fcars.php&trader_id=0&case=ADVANCE';
if(filter_var($url, FILTER_VALIDATE_URL)){
    #do stuff here
}else{
    #invalid
} 
```

工作示例：http: [//ideone.com/N84VGF](http://ideone.com/N84VGF)

如果你有旧版本的 PHP，你可以使用[`parse_url()`](http://us.php.net/parse_url)，但你必须添加一个正则表达式/验证，因为它不能验证它是否是一个真实/有效的 url。

# mysql - 创建一个触发器，如果 该名称存在于另一个表中，则从该表中删除该名称

> ID：15595525
> 
> 赞同：1
> 
> 时间：2013-03-24T05:31:20.187
> 
> 标签：mysql, sql, phpmyadmin

为了进一步澄清，我试图创建一个`trigger`检查表中 sql 中的数字。

如果它找到所述数字，则它会删除该整行。

它使用单独的名称表进行检查。

我认为可以使用 a 来完成，`join`但没有运气。

所以我想它看起来像这样`if(tb1.name = tb2.name) then DELETE row`。

如果格式关闭，我很抱歉。

编辑; 我正在使用 phpmyadmin，因此可能缺少一些代码，但这是我最新的“尝试”中的代码，它在 INSERT 上使用，时间设置为 SELECT * FROM WHERE NOT EXISTS (SELECT * FROM no fly list WHERE PassengerId .Id = Passenger.Id) 目前尚未添加 DELETE，但工作仍在进行中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T07:09:16.863

假设`flight`两者`dnf`都有`passenger_id`唯一标识感兴趣的乘客的列，那么您的触发器可能看起来像这样

```
DELIMITER $$
CREATE TRIGGER dnf_insert AFTER INSERT 
ON dnf
FOR EACH ROW BEGIN
    DELETE FROM flights WHERE passenger_id = NEW.passenger_id;
END$$
DELIMITER ; 
```

*如果您为所有相关表发布 DDL（创建表语句），我们可以优化查询*

# ios - 标签中的小数

> ID：15595537
> 
> 赞同：-2
> 
> 时间：2013-03-24T05:34:31.007
> 
> 标签：ios, objective-c, labels

这可能应该是一个快照，但我被卡住了。当我在任一文本字段中输入小数时，标签中的总数会向上取整。我希望标签将总数显示到两个地方。这是我到目前为止所拥有的：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController {

    IBOutlet UITextField *value1;
    IBOutlet UITextField *value2;

    IBOutlet UILabel *label;

}

-(IBAction)calculate:(id)sender;

@end

@implementation ViewController

-(IBAction)calculate:(id)sender {

    float x = ([value1.text floatValue]);
    float y = x*([value2.text floatValue]);

    label.text = [[NSString alloc] initWithFormat:@"%2.f", y];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T05:41:16.540

您将标签设置为：

```
label.text = [[NSString alloc] initWithFormat:@"%2.f", y]; 
```

你想要的是：

```
label.text = [[NSString alloc] initWithFormat:@"%.2f", y]; 
```

您的小数点在 2 的错误一侧，这使得它舍入到 0 位而不是 2。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-24T06:25:13.427

它会用两个分数四舍五入你的值，只改变'f'之前的分数大小

```
[lbl setText:[NSString stringWithFormat:@"%.2f",10.21234]]; 
```

# java - Monitors and synchronized blocks in Java (it appears two threads own a monitor at the same time)

> ID：15595538
> 
> 赞同：3
> 
> 时间：2013-03-24T05:34:32.787
> 
> 标签：java, multithreading, wait, synchronized, notify

I'm trying to understand the `synchronized()` blocks in the program I wrote at the end of this post.

There are two threads (`o` and `k`) that use a shared `lock` object as a monitor for wait/notify.

`o` waits for `k` to start, inside the following synchronized block:

```
synchronized (lock) {
    lock.wait(); // wait for K to be ready
} 
```

`k` then notifies `o` and waits for it to print inside this block:

```
synchronized (lock) {
    lock.notify(); // tell O to print
    lock.wait(); // wait for O to print
} 
```

My question is how can `k` enter the synchronized block with `lock`? Shouldn't `o` own `lock` (since it called `wait()`)? The [Java Tutorial says](http://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html):

> As long as a thread owns an intrinsic lock, no other thread can acquire the same lock. The other thread will block when it attempts to acquire the lock.

Here's the full program:

```
public class OK implements Runnable {

    private static final Object lock = new Object(); // monitor for wait/notify

    private boolean isO;

    public OK(boolean b) {
        isO = b;
    }

    public static void main(String[] args) throws InterruptedException {

        Thread o = new Thread(new OK(true));
        Thread k = new Thread(new OK(false));
        o.start();
        k.start();
        k.join(); // when k is done, we're done
        System.out.println("Done.");

    }

    public void run() {

        // run method is called for both o and k, so we separate the logic
        try {
            if (isO) {
                doO();
            } else {
                doK();
            }
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

    }

    // O thread logic
    private void doO() throws InterruptedException {

        // K needs to be ready before I start
        synchronized (lock) {
            lock.wait(); // wait for K to be ready
        }

        System.out.print("O");
        synchronized (lock) {
            lock.notify(); // tell K I printed
        }
    }

    // K thread logic
    private void doK() throws InterruptedException {

        // O is waiting for me to start

        synchronized (lock) {
            lock.notify(); // tell O to print
            lock.wait(); // wait for O to print
        }
        System.out.println("K");
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T05:40:42.883

lock.wait releases the monitor. See the [Object.wait() javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#wait%28%29):

> The current thread must own this object's monitor. The thread releases ownership of this monitor and waits until another thread notifies threads waiting on this object's monitor to wake up either through a call to the notify method or the notifyAll method. The thread then waits until it can re-obtain ownership of the monitor and resumes execution.

Intuition may tell you that "synchronized (lock)" means that it hold that lock during the entire block it wraps; but that is not how it works.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T05:45:00.477

In addition to @Wouter Coekaerts answer, it is considered good practise to always have a call to `wait()` inside a loop since "spurious wake-ups" might happen. See: [THI03-J. Always invoke wait() and await() methods inside a loop](https://www.securecoding.cert.org/confluence/display/java/THI03-J.+Always+invoke+wait%28%29+and+await%28%29+methods+inside+a+loop) for example.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T05:43:47.097

**The behavior is not assured/guaranteed when it comes to multi-threading.** It completely depends on the scheduler which invokes thread from a pool of threads under execution. You cannot guarantee at all that Thread O will be invoked before thread K just because you have started it before thread K. It may also even happen that scheduler picks up Thread K starts executing it first and hence it acquires lock before Thread O.

# schema - Datomic 插入块

> ID：15595540
> 
> 赞同：2
> 
> 时间：2013-03-24T05:34:52.400
> 
> 标签：schema, datomic

Datomic Seattle 示例在执行插入时使用显式 ID 号：

```
{:db/id #db/id[:db.part/user -1000014], :neighborhood/name "Belltown", :neighborhood/district #db/id[:db.part/user -1000013]}
{:community/category ["community council"], :community/orgtype :community.orgtype/community, :community/type :community.type/website, :db/id #db/id[:db.part/user -1000015], :community/name "All About Belltown", :community/url "http://www.belltown.org/", :community/neighborhood #db/id[:db.part/user -1000014]} 
```

对于单个模式的普通插入 - 动态生成 ID 要简单得多：

```
[
  {
    :db/id #db/id[:db.part/user],
    :car/model \"Ferrari\"
    :car/numberplate \"RENT ME!\"
  }
] 
```

这将在插入时生成 ID。

假设我有一个更复杂的模式，我想在其中表示一个 Renter、Car 和 RentEvent。

我可以：

```
[
  {
    :db/id #db/id[:db.part/user],
    :car/model \"Ferrari\"
    :car/numberplate \"RENT ME!\"
  }
] 
```

=> 获取 ID 号并将其粘贴在 A 中

```
[
  {
    :db/id #db/id[:db.part/user],
    :renter/name \"John Smith\"
    :renter/socialsecuritynumber \"123456789\"
  }
] 
```

=> 获取 ID 号并将其粘贴在 B 中

```
[
  {
    :db/id #db/id[:db.part/user],
    :rentevent/car A
    :rentevent/renter B
  }
] 
```

但这涉及到大量的身份证号码。我想将它插入一个大块中，例如：

```
[
  {
    :db/id #db/id[:db.part/user],      
    :rentevent/car {
      :db/id #db/id[:db.part/user],
      :car/model \"Ferrari\"
      :car/numberplate \"RENT ME!\"
    },
    :rentevent/renter {
      :db/id #db/id[:db.part/user],
      :renter/name \"John Smith\"
      :renter/socialsecuritynumber \"123456789\"
    }
] 
```

这可能吗？语法是什么？

**假设：**

*   这是一个可审计的环境，其中一个可重复的脚本数据库发布由处于控制分离的一方对生产数据库进行。即 - 这需要是一个文本文件，审核员可以在对数据库进行更改之前和之后查看。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T05:14:12.893

是的，这是可能的。使用事务函数：

```
 ; create a constructor-like function
 (def new-rentevent
   (d/function '{:lang :clojure
                 :params [db cm cp rn rs]
                 :code [{:db/id #db/id[:db.part/user -1]
                         :car/model cm
                         :car/numberplate cp}
                        {:db/id #db/id[:db.part/user -2],
                         :renter/name rn
                         :renter/socialsecuritynumber rs}
                        {:db/id #db/id[:db.part/user]
                         :rentevent/car #db/id[:db.part/user -1]
                         :rentevent/renter #db/id[:db.part/user -2]}]}))

 ; transact the function so it can run inside the transactor
 (d/transact conn [{:db/id #db/id[:db.part/user]
                    :db/ident :new-rentevent
                    :db/fn new-rentevent}])

 ; make your application code use the transaction function instead
 (d/transact conn [[:new-rentevent "Ferrari" "RENT ME!" "John Smith" "123456789"]])
 (d/transact conn [[:new-rentevent "Jaguar" "AVAILABLE" "Kate Nash" "567894345"]])
 (d/transact conn [[:new-rentevent "Maserati" "PICK ME!" "Justin Williams" "789134353"]]) 
```

有关完整的代码示例，请参阅此[要点](https://gist.github.com/a2ndrade/5235019)。有关详细信息，请参阅[数据库函数](http://docs.datomic.com/database-functions.html)。

# html - 如何使用来自 XML 文档的链接在 HTML 文件中插入图像？

> ID：15595541
> 
> 赞同：1
> 
> 时间：2013-03-24T05:34:59.370
> 
> 标签：html, xml

我有一个 XML 文件，我正在从文档中制作一个 HTML 文件。

我现在正在使用这个从 XML 文档中获取信息

```
document.getElementById("name").innerHTML=
xmlDoc.getElementsByTagName("url")[1].childNodes[0].nodeValue; 
```

对于 HTML 文档中的文本，我正在做这样的事情 `<p id = "url"></p>`

我不知道“url”的文本是否是图像的 URL，如何将此 URL 插入 HTML 图像标签，以便将图像插入我的页面？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T07:45:53.290

在添加到图像标签之前，您可以检查`nodeValue`它是否包含图像扩展名*.png、.jpg、.gif等：*

[**演示：**](http://jsfiddle.net/Tf5LM/1/)

```
var nodeVal = xmlDoc.getElementsByTagName("url")[1].childNodes[0].nodeValue;
if(nodeVal.indexOf('.png') > -1 || nodeVal.indexOf('.jpg') > -1 || nodeVal.indexOf('.gif') > -1){
    document.getElementById("yourImageTagId").src = nodeVal;
} 
```

# windows - 使用批处理文件，无需在每次输入时按 Enter

> ID：15595545
> 
> 赞同：-2
> 
> 时间：2013-03-24T05:35:58.670
> 
> 标签：windows, batch-file, cmd, ip-address, user-input

所以我之前问了一个问题，我希望能够在批处理文件的括号内输入，而我的 q 的答案是不可能的。所以我需要更多反馈。但我现在想要在这里做的是当我输入一个 IP 地址时，而不是输入“127.0.0.1”然后按 [Eneter] id，而不是当我输入“127.0.0.1”时它只是在批处理文件中继续

有人知道这样做的好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T10:35:52.017

在本站：[http ://www.dostips.com/forum/viewtopic.php?f=3&t=](http://www.dostips.com/forum/viewtopic.php?f=3&t=3428) **3428 GetKey.exe**辅助程序有说明。该程序读取一个密钥并立即通过 ERRORLEVEL 返回其 Ascii 代码，因此不需要`Enter`密钥即可继续。在同一站点：ReadLine.bat 示例程序显示；它在**Show.exe**（另一个辅助程序）`SET /P`的帮助下模拟命令，即键删除最后输入的字符并键终止输入。您可以修改 :ReadLine 子程序以满足特定需求，并显示了此功能的几个示例。**`BackSpace``Enter`**

 **例如，下面的子程序是 :ReadLine 的修改版本，它只读取十进制数字和点，并在读取 9 个字符后“自动”继续（如“127.0.0.1”）：

```
:Read9DigitsAndPoints var=["prompt"]
set Point=46
set Slash=47
rem set Digit_0=48
set Digit_9=57
set %1=
set len=0
if "%~2" neq "" Show %~2
:nextKey
   GetKey
   set key=%errorlevel%
   if %key% geq %Space% (
      rem Ascii character: ignore characters that are not digits nor points
      if %key% lss %Point% goto nextKey
      if %key% gtr %Digit_9% goto nextKey
      if %key% equ %Slash% goto nextKey
      Show %key%
      for /F "delims=" %%a in ('Show %key%') do set "%1=!%1!%%a"
      set /A len+=1
   ) else if %key% equ %BackSpace% (
      if defined %1 (
         Show %BackSpace% %Space% %BackSpace%
         set "%1=!%1:~0,-1!"
         set /A len-=1
      ) else (
         Show %Bell%
      )
   )
if %len% neq 9 goto nextKey
echo/
exit /B 
```

您可以进一步修改此子程序以读取格式正确的 IP 地址（即：由 3 点分隔的四组数字），以便在用户输入您想要的 IP 后程序继续执行。到此为止，*您是否*知道您希望例行程序在什么时候继续？读完第三点后的第一个数字？

安东尼奥

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T09:57:29.037

您必须提供批处理某种方法来确定您尝试输入的 IP 地址是**什么。**应该有一个不同的字符来指定输入的结尾，否则 cmd 就无法知道输入将在哪里结束。正如 j__m 在评论中正确指出的那样，如果您尝试输入 127.0.0.10 ，那么在您设法输入 0 之前，您不会认为您已经输入了 127.0.0.1 对吗？一般来说，在问有没有办法让计算机做某事之前，总是问你自己有没有办法做到这一点。如果**你**不能告诉输入在哪里结束，如果最后没有输入，我怀疑计算机会做得更好。计算机只是一台机器，它会按照您的指示进行操作。**

# java - Servlet 中的 Neo4j 数据库

> ID：15595548
> 
> 赞同：2
> 
> 时间：2013-03-24T05:36:18.767
> 
> 标签：java, html, servlets, neo4j

我有一个 servlet，想连接到 Neo4j 数据库。这样我就可以通过 Internet 从我的应用程序访问数据库。但是 servlet 给出了错误？难道我做错了什么？

这是我的 servlet 代码。

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws     ServletException, IOException {
PrintWriter out = response.getWriter();
out.println("Hello World");

GraphDatabaseService graphDB = new GraphDatabaseFactory().newEmbeddedDatabase("C:\\Users\\Sourav\\Desktop\\db1");
} 
```

这是网页中返回的错误。

```
HTTP Status 500 - Servlet execution threw an exception

type Exception report

message Servlet execution threw an exception

description The server encountered an internal error that prevented it from fulfilling     this request.

exception

javax.servlet.ServletException: Servlet execution threw an exception
root cause

java.lang.NoClassDefFoundError: org/neo4j/graphdb/factory/GraphDatabaseFactory
hello.hello.doGet(hello.java:45)
javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
javax.servlet.http.HttpServlet.service(HttpServlet.java:728) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T07:34:42.800

你会想要使用 Neo4j 的 REST api。如果您通过 Internet 访问 Neo4j（未嵌入到您的程序中），这是使用 Neo4j 的标准方式。

您将需要遵循[本教程](http://docs.neo4j.org/chunked/snapshot/server.html)，该教程向您展示如何将 Neo4j 设置为具有 REST api 的服务器。

就个人而言，我认为将它嵌入到 Java 中要容易得多。如果您将其创建为嵌入式 Java 数据库，您应该执行以下操作：

```
GraphDatabaseService dbService = new EmbeddedGraphDatabase(DB_PATH); 
```

但是，您应该只在程序启动时执行一次。因此，在程序启动时实例化它并使用对它的静态引用。（或者更好的是，使用 Spring 并在任何需要的地方自动装配 Neo4jOperations。或者最重要的是，使用[Spring Data Neo4j](http://www.springsource.org/spring-data/neo4j)！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T07:33:11.960

解决了！！！我在 Tomcat 7.0\lib 中复制了 Neo4j JAR 文件，它完全解决了问题！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-27T08:51:26.960

我遇到了同样的问题。这里是步骤-转到构建路径->配置构建路径选择部署程序集确保那里有 Ivy(maven) 库。如果没有通过 add->java build path entries->ivy(or maven) 添加

如果您在外部添加了 neo4j 库（不是通过 ivy/maven），则将该库添加到部署程序集中。它应该可以解决问题

# windows-runtime - 如何允许在 WinRT 中上下移动框架？

> ID：15595550
> 
> 赞同：0
> 
> 时间：2013-03-24T05:36:38.553
> 
> 标签：windows-runtime, slide, gesture

我正在为 WinRT 中的触摸支持而苦苦挣扎。

我有一个包含 TextBlock 的框架的画布。TextBlock 可以有不同数量的文本，这会使 Frame 延伸到 Canvas 的底部下方。如果发生这种情况，我希望用户能够触摸 Frame 并将其向上移动，以便他们可以完成阅读文本。如果他们将 Frame 一直向上移动，则当 Frame 的底部距离 Canvas 底部的设定边距时，它应该停止。将其移回原处也是如此。使用 Inertia 功能也是首选。

如果有人可以提供一些指导，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T09:01:06.187

我建议将 ScrollViewer 包裹在您的文本块周围，使用户能够在屏幕上滚动以查看所有文本。

```
<ScrollViewer>
     <TextBlock Content="Very long content goes here" />
</ScrollViewer> 
```

有关**更多**信息，请查看以下网站：

[链接到控制列表中的滚动查看器](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh465351.aspx#s_section)

[链接到滚动查看器文档](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.scrollviewer.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T17:03:18.927

我想到了...

```
<Canvas x:Name="MainCanvas" ManipulationMode="TranslateRailsX" IsRightTapEnabled="False" IsDoubleTapEnabled="False" Margin="50,50,716,0" Width="600" ManipulationDelta="MainFrame_ManipulationDelta_1">
    <Canvas.RenderTransform>
        <CompositeTransform x:Name="ScrollMain"></CompositeTransform>
    </Canvas.RenderTransform>
    <Frame x:Name="MainFrame" Background="Beige" Height="auto" Width="600">
        <RichTextBlock x:Name="MainContent" TextWrapping="Wrap" VerticalAlignment="Top" FontSize="18" FontFamily="Segoe Script" Width="540" HorizontalAlignment="Left" Margin="30,10,0,10" Foreground="Black" Height="auto" IsDoubleTapEnabled="False" IsHoldingEnabled="False" IsRightTapEnabled="False" IsTapEnabled="False" ManipulationMode="None" IsTextSelectionEnabled="False"/>
    </Frame>
</Canvas>

MainCanvas.ManipulationMode = ManipulationModes.TranslateY | ManipulationModes.TranslateRailsY | ManipulationModes.TranslateInertia;

private void MainFrame_ManipulationDelta_1(object sender, ManipulationDeltaRoutedEventArgs e)
{
    CompositeTransform transform = ScrollMain as CompositeTransform;

    double yDelta = e.Delta.Translation.Y;
    double bDelta = (MainFrame.ActualHeight - pageRoot.ActualHeight + MainCanvas.Margin.Top + MainCanvas.Margin.Top) * -1;

    if (transform.TranslateY + yDelta > 0)
    {
        yDelta = transform.TranslateY * -1;
    }

    if (transform.TranslateY + yDelta < bDelta)
    {
        transform.TranslateY = bDelta;
    }
    else
    {
        transform.TranslateY += yDelta;
    }

    base.OnManipulationDelta(e);
} 
```

# python - 在python上右键模拟

> ID：15595552
> 
> 赞同：0
> 
> 时间：2013-03-24T05:37:13.110
> 
> 标签：python, python-2.7, click, right-click

我在 Windows 中使用 python 2.7，我需要能够在某个 xy 坐标处进行右键单击。我已经有了使用这个的左键点击功能：

```
def click(x,y):
    win32api.SetCursorPos((x,y))
    win32api.mouse_event(win32con.MOUSEEVENTF_LEFTDOWN,x,y,0,0)
    win32api.mouse_event(win32con.MOUSEEVENTF_LEFTUP,x,y,0,0) 
```

任何类似/完全不同的方式来编码右键单击 xy 依赖函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T05:58:15.833

使用`win32con.MOUSEEVENTF_RIGHTDOWN`and`win32con.MOUSEEVENTF_RIGHTUP`作为各自调用的第一个参数`mouse_event`。如果仅此更改没有帮助，则在鼠标向下和向上之间插入短暂的暂停时可能会有所帮助`time.sleep(0.05)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T06:02:21.347

来自此链接： [MSDN 上的 mouse_even 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646260%28v=vs.85%29.aspx)

看起来你可以替换

`MOUSEEVENTF_LEFTDOWN`->`MOUSEEVENTF_RIGHTDOWN`

`MOUSEEVENTF_LEFTUP`->`MOUSEEVENTF_RIGHTUP`

# xamarin.ios - 使用自定义配置文件将 PCL NuGet 包添加到 PCL 项目时遇到问题

> ID：15595553
> 
> 赞同：2
> 
> 时间：2013-03-24T05:37:31.087
> 
> 标签：xamarin.ios, nuget, portable-class-library

所以我一直在做一个游戏，项目的数量已经变得难以管理。输入 NuGet。

我想确保我的代码可以在不同的设备上运行，所以我一直将这些项目作为可移植类库。我需要在 Xbox、Windows、iOS、Android 和 Silverlight 上使用这些。我在 C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETPortable\v4.0\Profile\Profile1\SupportedFrameworks 特别是 MonoAndroid 和 VSMonoTouch 中创建了一些自定义的自定义 SupportedFrameworks

我成功地将其中一个 PCL 转换为 NuGet 包，但是当我尝试将它们添加到具有相同配置文件的另一个 PCL 时，我收到此错误：无法安装包“Framework.dll 1.0.0.0”。您正在尝试将此包安装到以“.NETPortable,Version=v4.0,Profile=Profile1”为目标的项目中，但该包不包含任何与该框架兼容的程序集引用或内容文件。有关详细信息，请联系包作者。

包文件夹被删除，其中包含一个名为：portable-win+net40+MonoAndroid16+sl40+net10+wp+Xbox40 的文件夹，并且确实包含请求的 dll。我可以手动将此 dll 添加到我的项目中，所以我相信这可能是 NuGet 中的一个错误。我在网上对此进行了调查，发现主要修复方法是更新 NuGet，因为最新版本与 PCL 配合得更好。我已经更新了，但是没有用。

有没有人见过这个，或者我错过了一些明显的东西？任何帮助都会得到很大的帮助=）

谢谢，约书亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T01:56:14.217

看起来您正在使用“.NETFramework”作为您放在 Profile1 SupportedFrameworks 文件夹中的 XML 文件中的标识符。这基本上是在 Windows 上构建 iOS 项目的一种技巧，但如果真正支持该场景，您应该将该标识符更改为 MonoTouch。然后，当您创建包时，它应该使用 monotouch 代替 net10 作为 lib/portable-x+y+z 文件夹。

然后，正如@Deepak 建议的那样，安装[NuGet 的夜间版本](http://build.nuget.org/NuGet.Tools.vsix)。然后您*应该*能够将 NuGet 包安装到您的 PCL 项目中。如果你尝试这个，请让我知道它是否有效。:)

# ios - 在最新的 xcode 中启用弹簧和结构

> ID：15595554
> 
> 赞同：-1
> 
> 时间：2013-03-24T05:37:33.357
> 
> 标签：ios, view, storyboard, size

第一次学习 iOS，但我正在完成的演示启用了大小和结构，因为我正在运行最新的 iOS 和 Xcode，但没有看到。我的故事板中有一个自定义视图，它占据了整个视图。如何查看/启用尺寸和支柱？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T05:39:50.567

如果您正在谈论“弹簧​​和支柱”，正如 rdelmar 所说，只需在故事板或 XIB 文件中将 AutoLayout 设置为***OFF即可。***

像这样：

![关闭自动布局](../Images/1843a34467517070d33100f11b206bd3.png)

# elasticsearch - 查询elasticsearch多字段

> ID：15595560
> 
> 赞同：2
> 
> 时间：2013-03-24T05:38:07.090
> 
> 标签：elasticsearch

我为 elasticsearch 中的“asset_test”索引配置了以下设置：

```
{
  "settings" : {
    "analysis" : {
      "analyzer" : {
        "str_filtered_search_analyzer" : {
          "tokenizer" : "keyword",
          "filter" : ["lowercase"]
        },
        "str_prefix_analyzer" : {
          "tokenizer" : "keyword",
          "filter" : ["lowercase", "prefix"]
        },
        "str_substring_analyzer" : {
          "tokenizer" : "keyword",
          "filter" : ["lowercase", "substring"]
        },
        "path_analyzer" : {
          "type" : "custom",
          "tokenizer" : "path_hierarchy"
        }
      },
      "filter" : {
        "prefix" : {
          "type" : "edgeNGram",
          "min_gram" : 2,
          "max_gram" : 24,
          "side": "front"
        },
        "substring" : {
          "type" : "nGram",
          "min_gram" : 2,
          "max_gram" : 24
        }
      }
    }
  },
  "mappings" : {
    "asset" : {
      "properties" : {
        "_id": {
          "type" : "string",
          "index" : "not_analyzed"
        },
        "_rev": {
          "type" : "string",
          "index" : "not_analyzed"
        },
        "type": {
          "type" : "string",
          "index" : "not_analyzed"
        },
        "requiredBySystem": {
          "type" : "boolean"
        },
        "attributes": {
          "properties" : {
            "id" : {
              "type" : "string"
            },
            "type" : {
              "type" : "string",
              "index" : "not_analyzed"
            },
            "heading" : {
              "type" : "string"
            },
            "text" : {
              "type" : "string"
            },
            "users" : {
              "type" : "string"
            },
            "categories" : {
              "type" : "multi_field",
              "fields" : {
                "categories" : {
                  "type" : "string",
                  "index" : "not_analyzed"
                },
                "path" : {
                  "type" : "string",
                  "analyzer" : "path_analyzer"
                }
              }
            },
            "choices" : {
              "properties" : {
                "text" : {
                  "type" : "string"
                },
                "checked" : {
                  "type" : "boolean"
                }
              }
            },
            "requiredBySystem": {
              "type" : "boolean"
            },
            "required": {
              "type" : "boolean"
            }
          }
        }
      }
    }
  }
}; 
```

我在索引中有这个文件：

```
{
   "_id": "9399fb27448b1e5dfdca0181620418d4",
   "_rev": "14-173e71c77d32f0360f7afb2206b2a334",
   "type": "entryForm",
   "requiredBySystem": true,
   "formName": "Basic",
   "attributes": [
       {
           "id": "9399fb27448b1e5dfdca01816203d609",
           "type": "text",
           "heading": "Brand",
           "text": "",
           "requiredBySystem": true
       },
       {
           "id": "9399fb27448b1e5dfdca01816203dc61",
           "type": "text",
           "heading": "Model",
           "text": "",
           "requiredBySystem": true
       },
       {
           "id": "9399fb27448b1e5dfdca01816203decd",
           "type": "text",
           "heading": "Location",
           "text": "",
           "requiredBySystem": true
       },
       {
           "id": "9399fb27448b1e5dfdca01816203e68e",
           "type": "userSelectMenu",
           "heading": "Assigned To",
           "users": [
           ],
           "requiredBySystem": true
       },
       {
           "id": "9399fb27448b1e5dfdca01816203e9c9",
           "type": "categories",
           "heading": "Categories",
           "categories": [
               "/Airport/Hangar 1",
               "/Airport/Hangar 2"
           ],
           "requiredBySystem": true
       },
       {
           "id": "9399fb27448b1e5dfdca01816203ebdd",
           "type": "text",
           "heading": "Owner ID",
           "text": "",
           "requiredBySystem": true
       },
       {
           "id": "9399fb27448b1e5dfdca01816203f0da",
           "type": "textarea",
           "heading": "Description",
           "text": "",
           "requiredBySystem": true
       },
       {
           "id": "9399fb27448b1e5dfdca01816207uy5a",
           "type": "radio",
           "heading": "Radio Buttons",
           "choices": [
               {
                   "text": "Button 1",
                   "checked": false
               },
               {
                   "text": "Button 2",
                   "checked": true
               }
           ],
           "requiredBySystem": true
       },
       {
           "id": "9399fb27448b1e5dfdca01816205tgh6",
           "type": "checkboxes",
           "heading": "Checkboxes",
           "choices": [
               {
                   "text": "Box 1",
                   "checked": false
               },
               {
                   "text": "Box 2",
                   "checked": true
               }
           ],
           "requiredBySystem": true
       },
       {
           "id": "9399fb27448b1e5dfdca0181620k81gt",
           "type": "select",
           "heading": "Select Menu",
           "choices": [
               {
                   "text": "Option 1",
                   "checked": false
               },
               {
                   "text": "Option 2",
                   "checked": true
               }
           ],
           "requiredBySystem": true
       }
   ]
} 
```

我正在尝试使用以下查询查找文档，但未找到：

```
{
    "query": {
        "field": {
            "attributes.categories.path": "/Airport"
        }
    }
} 
```

有点坚持如何使这项工作。

***更新：我将“属性”设为嵌套类型，现在使用以下查询进行查询似乎可以工作：

```
{
  "query" : {
      "nested" : { 
        "path" : "attributes",
        "query" : {
          "term" : {
            "attributes.categories.path" : "/Airport/Hangar 1"  
          } 
        }
      }
  }
} 
```

我会以正确的方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-17T23:27:33.110

***更新：我将“属性”设为嵌套类型，现在使用以下查询进行查询似乎可以工作：

```
{
  "query" : {
      "nested" : { 
        "path" : "attributes",
        "query" : {
          "term" : {
            "attributes.categories.path" : "/Airport/Hangar 1"  
          } 
        }
      }
  }
} 
```

# eclipse - Eclipse 包声明可以解决吗？

> ID：15595567
> 
> 赞同：1
> 
> 时间：2013-03-24T05:39:09.260
> 
> 标签：eclipse, package, declaration

我工作的团队不使用 Eclipse，而是希望以某种方式设置 src 文件夹。另一方面，我正在使用eclipse。例如，他们希望 src 文件夹具有以下结构： src/main/java/com/* 但是，他们希望包声明中仅包含 com.*。如果我转到项目-> 属性并在源选项卡中删除 src 文件夹作为源文件夹，然后_仅将 com.* 文件夹添加为源的一部分_它将显示 com.* 作为一个包，但我仍然必须在 .java 文件中添加从 src 向下的整个路径。这是一个示例，说明我必须做什么才能让 eclipse 识别包：

```
package main.java.com.parser; 
```

团队想要的是*main*和*java*只是一个文件夹，所以包声明就是：

```
package com.parser; 
```

因此，尽管文件结构仍然是 src/main/java/com/parser，但包名称将如后面的示例中所述。

有没有办法在eclipse中做到这一点？ **我在这里看到有人问过类似的问题，但他们似乎并不担心整个路径必须是包声明的一部分。**

我宁愿不这样做，但没有其他人在这个项目上使用 Eclipse。

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T05:43:41.987

在 Package Explorer 中，右键单击`src`文件夹并选择 Build Path > Remove from Build Path

然后找到 src/main/java 文件夹，右键`java`选择 Build Path > Use as Source Folder

基本上这告诉 eclipse`java`是包含包和源文件的文件夹。

PS 这是使用 Maven 构建的非常正常的项目设置。如果您下载 m2e (Maven to Eclipse) 插件并选择创建一个 Maven 项目（或从 pom.xml 导入），那么 Eclipse 将自动知道如何正确定位源文件夹。

# java - 登录弹出窗口的 HtmlUnit 问题

> ID：15595570
> 
> 赞同：1
> 
> 时间：2013-03-24T05:40:03.323
> 
> 标签：java, htmlunit

阅读这个论坛有一段时间了，但刚刚注册，这是我的第一篇文章，非常感谢这里所做的出色工作。

我正在用 Java 编写一个程序，目的是使用 HtmlUnit 连接到我订阅的杂志之一，登录并搜索我感兴趣的文章。一旦我开始工作，它会向我发送一封电子邮件，但这与我的问题无关。

我无法登录工作：

*   我读了页面
*   找到登录按钮并单击它
*   在新页面中捕获结果，提取表单并提供用户名/密码，最后
*   点击登录按钮

如果您单击登录，则会出现一个弹出窗口。但我似乎无法捕捉到弹出窗口。

这是我的代码：

```
public void authenticate() throws MalformedURLException, IOException
{

    LogFactory.getFactory().setAttribute("org.apache.commons.logging.Log", "org.apache.commons.logging.impl.NoOpLog");      
    java.util.logging.Logger.getLogger("com.gargoylesoftware.htmlunit").setLevel(Level.OFF); 
    java.util.logging.Logger.getLogger("org.apache.commons.httpclient").setLevel(Level.OFF);

    WebClient webClient = new WebClient(BrowserVersion.INTERNET_EXPLORER_9);
    webClient.getOptions().setJavaScriptEnabled(true);
    webClient.getCookieManager().setCookiesEnabled(true);
    webClient.getOptions().setThrowExceptionOnScriptError(false);
    webClient.getOptions().setPopupBlockerEnabled(false);

    webClient.addWebWindowListener(new WebWindowListener()
    {

          public void webWindowOpened(WebWindowEvent event)

          {
              System.out.println("a NEW window opened: " + event.getNewPage());
              windows.add(event.getWebWindow()); 

          }

        @Override
        public void webWindowClosed(WebWindowEvent event) {
            System.out.println("a window is CLOSED: " + event.getOldPage()); 
            // TODO Auto-generated method stub

        }

        @Override
        public void webWindowContentChanged(WebWindowEvent event) {}

    });

    // Get the first page
    HtmlPage page1 = webClient.getPage("**");
    HtmlDivision div = (HtmlDivision) page1.getElementById("topContainer"); 

    HtmlAnchor anchor = (HtmlAnchor) div.getElementById("loginBtn1");       
    HtmlPage logPage = (HtmlPage) anchor.click();
    System.out.println("logPage is: "+logPage);

    if ( windows.size() > 0)
    {
        System.out.println("YIOUHOUU");
            HtmlPage popupPage = getPopupPage();
            System.out.println(popupPage.getTitleText());
    } 

    HtmlForm form = logPage.getFormByName("loginForm");
    System.out.println("Form: "+ form);

    HtmlTextInput username = form.getInputByName("username");
    HtmlPasswordInput password = form.getInputByName("password");
    HtmlCheckBoxInput rememberPassword = form.getInputByName("remember");
    HtmlCheckBoxInput acceptTerms = logPage.getElementByName("acceptTerms");
    HtmlAnchor button = form.getElementById("loginButton");

    username.setValueAttribute("USER");
    password.setValueAttribute("RANDOM_PASS");
    rememberPassword.setChecked(true);
    acceptTerms.setChecked(true);

    System.out.println(form.toString());

    HtmlPage page2 = button.click();
    System.out.println(page2.asText());
    webClient.closeAllWindows();
} 
```

我得到登录页面，获取表单并提供字段。所有这一切都完成了，但是在第二页并单击登录时没有任何反应。

即使您提交字段并单击提交，也没有任何反应。我正在查看 html 页面的源代码，但不知道为什么，它是 ajax 还是后台的其他东西？

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-06T17:41:31.150

对于弹出式登录框，您可以使用 url 传递用户名和密码。

如果您使用以下行进入该登录页面：

```
String url = "http://example.com";
HtmlPage page = webClient.getPage(url); 
```

然后将此链接更改为以下链接，它应该可以工作：

```
String username = "YOUR USERNAME";
String password = "YOUR PASSWORD";
String url = "http://" + username + ":" + password + "@example.com";
HtmlPage page = webClient.getPage(url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:42:30.747

** 更新：放弃并使用 Selenium 和他们的 WebDriver API 解决了这个问题，这让这变得很容易。似乎 Htmlunit 不适合此类任务，请听从我的建议并避免出于类似目的使用它。

# java - 获取一个类中的所有方法---容易出错

> ID：15595577
> 
> 赞同：0
> 
> 时间：2013-03-24T05:41:00.287
> 
> 标签：java, reflection, classnotfoundexception

我是反射和实践的新手，我从网站下载了一个随机的 Java 项目。我决定找出哪个类有 main 方法，所以我编写了以下代码：

```
package reflection;
import java.io.IOException;
import java.lang.reflect.*;
import java.nio.file.*;

public class FindMethods {
    public static void main(String[] args) throws IOException{
        if(args.length==0){
            System.out.println("Exiting");
            System.exit(1);
        }else{
            Path p = Paths.get(args[0]);
            DirectoryStream<Path> allClassFiles = Files.newDirectoryStream(p, "*.class");
            for(Path each : allClassFiles){
//              System.out.println(each.getFileName());
                try {
                    findMethods(each.getFileName().toString());
                } catch (ClassNotFoundException e) {
                    e.printStackTrace();
                }
            }
        }
    }

    public static void findMethods(String file) throws ClassNotFoundException{
        System.out.println(file);
        Class c = Class.forName(file);
        Method[] m = c.getDeclaredMethods();
        for(Method each : m){
            System.out.println(each.toString());
        }
    }
} 
```

`System.out.println(each.getFileName());`正确返回`.class`文件夹中的文件，但是，**它散布着 ClassNotFoundException 的堆栈跟踪**

课程如下：

```
Addwindow$1.class
Addwindow$2.class
Addwindow.class
Authorwindow.class
clsConnection.class
clsSettings$1.class
clsSettings.class
Deletewindow$1.class
Deletewindow$2.class
Deletewindow.class
Editwindow$1.class
Editwindow$2.class
Editwindow.class
Emprptwindow$PrintCommand.class
Emprptwindow.class
Helpwindow.class
LoginFrame$1.class
LoginFrame.class
MainMenu$1.class
MainMenu$2.class
MainMenu.class
Payrptwindow.class
printwindow$1.class
printwindow.class
Settingswindow$1.class
Settingswindow.class 
```

我需要对代码进行哪些更改才能从每个类中获取方法？

## 堆栈跟踪：

```
java.lang.ClassNotFoundException: Settingswindow
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at reflection.FindMethods.findMethods(FindMethods.java:33)
    at reflection.FindMethods.main(FindMethods.java:22) 
```

## 正在谈论的随机项目：

[http://projectseminar.org/java-projects/payroll-accounting-system/98/](http://projectseminar.org/java-projects/payroll-accounting-system/98/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T05:47:11.407

`.class`是文件名的一部分，但不是类名的一部分。您需要先将其剥离，然后再将其传递给`Class.forName`.

另一个问题是`forName`期望使用句点分隔包，而不是斜杠或文件系统使用的任何目录分隔符。如果一切都在默认包中，那么这应该不是问题。

如果它仍然不起作用，您应该仔细检查类路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T05:44:29.773

包含 a 的类名是`$`外部类中的匿名类（由 左侧的名称确定`$`）。您可以放心地忽略搜索中的那些`main`。`$`只需在主循环中测试类名中是否存在 a并跳过处理。

在不了解您正在查看的应用程序的更多信息的情况下，我无法说明为什么您的代码找不到其他一些类（例如`clsConnection`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T06:59:28.090

这种方法有一个问题——你加载了所有项目的类。最好在不加载类的情况下分析类。有一些工具可以做到这一点。这是我们可以用[http://www.jboss.org/javassist做的事情](http://www.jboss.org/javassist)

```
public static void findMethods(String file) throws Exception {
    ClassPool cp = ClassPool.getDefault();
    try (InputStream is = new FileInputStream(file)) {
        CtClass cc = cp.makeClass(is);
        for (CtMethod m : cc.getMethods()) {
            System.out.println(m);
        }
    }
} 
```

# iphone - iOS ABPersonViewController：电话/消息/电子邮件后返回应用程序

> ID：15595580
> 
> 赞同：-2
> 
> 时间：2013-03-24T05:41:38.477
> 
> 标签：iphone, ios, objective-c, xcode

我正在使用 ABPersonViewController，我想知道是否可以在拨打电话或发送电子邮件/消息后返回到我的应用程序，而不是退出到相应的本机应用程序。

在 iPhone 通讯录应用程序中，您可以通过按电话号码字段拨打电话。结束通话会自动将您带回联系人屏幕。您还可以通过单击相应的字段来发送电子邮件和消息（尽管结束电子邮件/消息操作不会将您带回联系人）。

![http://i.imgur.com/uEvAxfa.png](../Images/9d79f0178cba8c169966eb6ec1e211d5.png)

更具体地说，点击“手机 1 (555) 555-5559”应该会拨打该号码的电话（我的应用程序已经这样做了）。但是，当我结束通话时，我希望被引导回我的应用程序，而不是本机 iOS 手机应用程序。我也想要发送电子邮件和消息的类似操作。

如果这是可能的，如果有人可以分享解决方案，那就太好了！谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T05:46:06.053

> 可以在拨打电话或发送电子邮件/消息后返回我的应用程序，而不是退出到相应的本机应用程序。

**和**

> 结束通话会自动将您带回联系人屏幕

**简短地说：**这是不可能的，因为**Apple/iOS**不提供这种类型的**功能**。

# google-app-engine - 为了self.request.POST[name] 只是一个字符串

> ID：15595581
> 
> 赞同：0
> 
> 时间：2013-03-24T05:41:41.087
> 
> 标签：google-app-engine, webapp2

使用 GAE“helloworld”示例应用程序作为基础，但将“helloworld.py”更改为：

```
import webapp2

class MainPage(webapp2.RequestHandler):
    def get(self):
        self.response.headers['Content-Type'] = 'text/html'
        self.response.write(
            """
            <form method="post">
                UPLOAD: <input type="file" name="file_param"/>
                <br/>
                <input type="submit" name="submit_param" value="Submit">
            </form>
            """
        )

    def post(self):
        field_storage = self.request.POST["file_param"]
        try:
            mimetype = field_storage.type
            self.response.write("Mimetype: {}".format(mimetype))
        except:
            self.response.write("No FieldStorage object, field_storage={}".format(field_storage))    

app = webapp2.WSGIApplication([('/', MainPage)], debug=True) 
```

在 Mac OSX 上的 Google Chrome 中运行：

1.  点击“选择文件”
2.  选择要上传的文件
3.  点击“提交”

返回的页面说：

```
No FieldStorage object, field_storage=<the name of the file I uploaded> 
```

根据[http://webapp-improved.appspot.com/guide/request.html#files](http://webapp-improved.appspot.com/guide/request.html#files)和各种帖子中的示例，`self.request.POST[name]`应该是一个 cgi.FieldStorage 对象。但正如本例所示，`self.request.POST[name]`是一个包含上传文件的文件名的字符串。如果它是一个 cgi.FieldStorage 对象，我希望程序显示上传文件的 mimetype。

**我需要 cgi.FieldStorage 对象，这样我才能获得 mimetype，当然还有值，即文件的内容。我究竟做错了什么？**

顺便说一句，从 webapp2 切换到 webapp（使用`from google.appengine.ext import webapp`）没有任何区别。此外，在 Safari 或 Firefox 中运行它，它的行为与在 Chrome 中相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T07:50:51.067

表格`enctype`必须是`multipart/form-data`. 请按如下方式添加（方法属性不区分大小写）：

```
<form method="POST" enctype="multipart/form-data"> 
```

另外，请考虑使用[blobstore 上传](https://developers.google.com/appengine/docs/python/blobstore/overview#Uploading_a_Blob)，因为它没有大小限制，您也可以[使用 Google Cloud Storage 作为后端](https://developers.google.com/appengine/docs/python/blobstore/overview#using-blobstore-with-gcs)，这将使您在 ACL 和共享能力上更加灵活。

# php - PHP 验证文件上传

> ID：15595592
> 
> 赞同：9
> 
> 时间：2013-03-24T05:44:16.473
> 
> 标签：php, image, upload, pdo

我是 PHP 初学者，目前正在学习“验证文件上传”部分。

我制作了一个包含以下代码的 test.php 页面：

```
var_dump(@$_FILES['file']['type']); 
```

首先，我上传了一张图片“img.gif”，它返回了：

```
string 'image/gif' (length=9) 
```

然后，我将图像的扩展名更改为“.jpg”并返回：

```
string 'image/jpeg' (length=10) 
```

所以我意识到 $_FILES["file"]["type"] 只返回上传的文件扩展名，但实际上并没有检查它是什么文件。

在这个页面[http://www.w3schools.com/php/php_file_upload.asp](http://www.w3schools.com/php/php_file_upload.asp)，有一段代码：

```
$allowedExts = array("gif", "jpeg", "jpg", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/jpg")
|| ($_FILES["file"]["type"] == "image/png"))
&& ($_FILES["file"]["size"] < 20000)
&& in_array($extension, $allowedExts)) 
```

我想知道为什么上面的代码检查文件扩展名两次？我从上面的代码中删除了一些，这是我的新代码：

```
$allowedExts = array("gif", "jpeg", "jpg", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if (($_FILES["file"]["size"] < 20000) && in_array($extension, $allowedExts)) 
```

我的代码正确吗？或者您有更好的方法来验证上传文件是图像吗？

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-24T05:49:53.543

您应该将文件*的 tmp_name 传递给[getimagesize](http://php.net/manual/function.getimagesize.php)，它将为您提供图像的大小和类型（如果它是图像）。如果传递的参数是文件而不是图像，则返回 false，这将允许您进行验证。

编辑：图像验证的唯一可靠方法是使用 GD 或 Imagick 制作它的副本 - [getimagesize 很容易被破解](http://nullcandy.com/php-image-upload-security-how-not-to-do-it/)。

*：我的意思是，上传后创建的临时文件。

例如：

```
if ($_SERVER['REQUEST_METHOD'] === 'POST')
{
    $file = $_FILES['file']['tmp_name'];
    if (file_exists($file))
    {
        $imagesizedata = getimagesize($file);
        if ($imagesizedata === FALSE)
        {
            //not image
        }
        else
        {
            //image
            //use $imagesizedata to get extra info
        }
    }
    else
    {
        //not file
    }
} 
```

此代码使用[file_exists](http://php.net/manual/function.file-exists.php)只是为了通用。如果没有上传文件，您将获得`$_FILES['file']['size'] = 0`,`$_FILES['file']['tmp_name'] = ''`和`$_FILES['file']['error'] = 4`. 另请参见[is_readable](http://php.net/manual/function.is-readable.php)。有关错误值，请参阅[php.net](http://www.php.net/)中解释的[文件上传错误](http://www.php.net/manual/en/features.file-upload.errors.php)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T05:47:45.897

```
$allowedExts = array("gif", "jpeg", "jpg", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/jpg")
|| ($_FILES["file"]["type"] == "image/png"))
&& ($_FILES["file"]["size"] < 20000)
&& in_array($extension, $allowedExts)) 
```

这被检查了两次，因为文件的扩展名和“文件类型”可能不同，所以有人不能上传扩展名为 .png 的可执行文件。

在您修改后的代码中，可以上传具有修改后扩展名的不同类型的文件。就像他们可以上传带有“.png”扩展名的word文档一样。

您的新代码只是检查扩展名，没有仔细检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T05:48:11.697

您的新代码仅检查文件的扩展名和文件的大小。它不检查文件的类型。

我强烈建议使用您的旧代码，因为它还会检查文件类型。

# php - PHP - 过滤数据并将其传递到我的应用程序中

> ID：15595596
> 
> 赞同：-1
> 
> 时间：2013-03-24T05:44:46.600
> 
> 标签：php, scrape

我对编程非常陌生，需要一些帮助来从网站获取数据并将其传递到我的 PHP 脚本中。

该网站是[http://www.birthdatabase.com/](http://www.birthdatabase.com/)。

我想插入一个名称（名字和姓氏）并检索结果。我知道您可以通过在 URL 中传递名称来查询该站点，但是我在抓取结果时遇到了问题。

[http://www.birthdatabase.com/cgi-bin/query.pl?textfield=FIRST&textfield2=LAST&age=&affid=](http://www.birthdatabase.com/cgi-bin/query.pl?textfield=FIRST&textfield2=LAST&age=&affid=)

我正在使用 file_get_contents($URL) 函数来获取页面，但之后需要帮助。具体来说，如果该名称有多个结果，我只想从某个状态中抓取结果。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T05:51:08.917

阅读`POST`方法及其数组 ( `$_POST`) --->[参考](http://php.net/manual/en/reserved.variables.post.php)。

同样，也有`GET`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T05:51:11.093

为什么看不到[POST](http://www.youtube.com/watch?v=KgTOKFgCKxM) AND [GET](http://www.youtube.com/watch?feature=player_embedded&v=ZMLkF1vmZdE?)方法？

# jquery - select spans in td that don't contain a class

> ID：15595597
> 
> 赞同：1
> 
> 时间：2013-03-24T05:44:49.337
> 
> 标签：jquery, css-selectors

**EDIT: I made a typo in the question, my apologies.**

```
<td><span class="price"></span></td> //selected
<td></td>          //I want this guy to be selected as well!
<td><span class="price clearance"></span></td> 
```

I basically want: Select all td that don't have span.clearance. **This includes td that don't have span as well.**

I tried `$('td span:not(".clearance")');` it *doesn't* select `<td></td>`. Any clues?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T05:47:07.323

You don't need quotes on your inner [`not()`](http://api.jquery.com/not-selector/) selector.

Try this:

```
$('td span:not(.clearance)'); 
```

**Edit:**

Since you mentioned you also want empty `td`s returned, try this jQuery selector:

```
$('td span:not(.clearance), td:not(:has(span))'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T06:11:58.517

It works fine for me.

Please refer below code.

```
console.log($('td span:not(.clearance)')); 
```

[http://jsfiddle.net/5Wbye/1/](http://jsfiddle.net/5Wbye/1/)

Thanks,

Siva

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T05:50:46.097

```
$('td > span:not(.clearance)');   try this one. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T06:04:12.747

Try the following:

```
<script type="text/javascript">
    $(document).ready(function() {
        $('td span:not(".clearance")').css('border','5px solid red');
    });
</script>
<table>
   <tr>
      <td style="border:5px solid green;"><span class="price">1</span></td>
      <td>2</td>
      <td><span class="price clearance">3</span></td>
   </tr>
</table> 
```

I don't think anything is wrong with your original post besides the fact that your table is missing `<table>` and `<tr>` tags

# ruby - 回归测试系统，包括编译工具、测试和报告结果

> ID：15595601
> 
> 赞同：-1
> 
> 时间：2013-03-24T05:45:44.477
> 
> 标签：ruby, automation, regression-testing, command-line-tool

我想设置一个自动化系统，以便在 Linux 环境中为命令行工具运行夜间回归测试。有一些用 Ruby 编写的自动化脚本，但我想要一个完整的系统，其中包括：

1.  从代码库构建工具。
2.  运行我目前拥有的 Ruby 自动化脚本。
3.  生成测试报告并通过电子邮件发送。

这个命令工具的性质是处理系统硬件的低级。该工具的某些功能可能会使正在运行它的系统崩溃。我也希望报告这种情况。因此，理想的解决方案可能是让两台计算机通过网络（如 ssh 等）链接。一个系统可以用于记录和报告测试结果，另一个系统可以用于实际运行该工具。

欣赏你可能有的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:58:49.400

[Jenkins](http://jenkins-ci.org/ "詹金斯") CI 服务器应该能够满足您的需求。您可能需要做一些自定义工作来设置您喜欢的测试报告，但 Jenkins 非常适合您列出的其余要求。

作为一个快速介绍，我建议您查看一些关于 Jenkins 的截屏视频或其他视频——[这个演讲](http://unethicalblogger.com/2012/10/21/video-continuous-deployment-gerrit-jenkins.html)就是一个例子。

# solr - solr CopyField with source - 两个字段

> ID：15595604
> 
> 赞同：2
> 
> 时间：2013-03-24T05:46:49.643
> 
> 标签：solr

我在 solr 中有一个字段 - name （具有像 Tanya 这样的值）和 lastname （像 Marinova 这样的值）

是否可以在 solr 中创建另一个 CopyField，它是这两个字段的串联

（所以它的价值应该是 TanyaMarinova）

这是我的 schema.xml 文件

```
 <field name="meta" type="string" indexed="true" stored="true" /> 
  <copyField source="name" dest="meta" /> 
```

我可以添加吗

```
 <copyField source="lastname" dest="meta" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T06:34:08.040

不，你无法做到这一点。你应该在 SOLR 之外诱导它。您可以将 2 个字段路由到一个 copyField，但随后您的文档将只有一个包含 2 个值的多值字段（Tanya，Marinova）。你不能像这样连接。

如果你真的坚持在 SOLR 中这样做，你应该研究 IndexSchema 和 FieldType 并实现你自己的字段类型。不过，这比进行外部连接要多得多。

# maven - 如何使用 tomcat:run 运行 Maven 战争依赖项？

> ID：15595608
> 
> 赞同：2
> 
> 时间：2013-03-24T05:47:37.377
> 
> 标签：maven, tomcat, plugins

我正在为我当前的项目使用 maven。现在，我有一个战争依赖：

```
<dependency>
   <groupId>org.dojotoolkit</groupId>
   <artifactId>dojo-war</artifactId>
   <version>1.8.1</version>
   <type>war</type>
   <scope>runtime</scope>
</dependency> 
```

我建造战争神器时没有任何问题。为此，我添加了这个插件：

```
 <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.1.1</version>
        <configuration>
            <overlays>
                <overlay>
                    <groupId>org.dojotoolkit</groupId>
                    <artifactId>dojo-war</artifactId>
                    <targetPath>js/dojo-1.8.1</targetPath>
                    <excludes>
                        <exclude>WEB-INF/**</exclude>
                        <exclude>META-INF/**</exclude>
                    </excludes>
                </overlay>
            </overlays>
        </configuration>
    </plugin> 
```

但是，当我运行以下 mvn 命令时，`mvn tomcat7:run`我看不到任何 javascript 资源。看起来没有添加战争依赖。

有人可以帮我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:03:57.417

欢迎来到 Stack Overflow Emelendez。

你应该阅读这篇文章：[http ://webtide.intalio.com/2008/07/dojo-toolkit-maven-repository/](http://webtide.intalio.com/2008/07/dojo-toolkit-maven-repository/)

实际上，dojo-war 依赖项允许您将一些文件添加到源中，但您必须指定一些额外的操作才能将其包含在最终的战争中。

在 Maven 中，依赖项只能是您尝试编译的语言（这不是很准确，但这已经足够了）。如果要添加包含在 zip/war/targz 中的其他资源（文件、图像、javascript），则必须显式提取它们。这是我之前提供的链接中提到的内容：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
    <executions>
        <execution>
            <id>unpack dojo</id>
            <phase>generate-sources</phase>
            <goals>
                <goal>unpack</goal>
            </goals>
            <configuration>
                <artifactItems>
                    <artifactItem>
                        <groupId>org.dojotoolkit</groupId>
                        <artifactId>dojo</artifactId>
                        <version>${project.version}</version>
                        <type>zip</type>
                    </artifactItem>
                </artifactItems>
                <outputDirectory>${project.build.directory}/dojo</outputDirectory>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

（小心，我不确定这个配置是否准确，根据你的 pom.xml，你的依赖似乎是 dojo-war，而不是按照文档所说的 dojo）

这会将 dojo 库提取到输出目录中，然后到您的战争中。

# java - 将参数化类型作为参数传递给方法

> ID：15595613
> 
> 赞同：3
> 
> 时间：2013-03-24T05:48:01.100
> 
> 标签：java, generics, reflection

此类来自供应商库：

```
public class JsonParser {
    public <T> T parse(String json, Class<T> type) { ... }
} 
```

这些是我的模型：

```
public class Video {
    @Key
    private String title;
    public String getTitle() {
        return title;
    }
}

public class Response<TResult> {
    @Key
    private TResult result;
    public TResult getResult() {
        return result;
    }
    // ...
} 
```

此代码有效：

```
JsonParser parser = new JsonParser();
String json = "{ \"title\": \"Hello world\" }";
Video video = parser.parse(json, Video.class); 
```

此代码不起作用：（语法错误`Response<Video>.class`）

```
JsonParser parser = new JsonParser();
String json = "{ \"result\" : { \"title\": \"Hello world\" } }";
Response<Video> videoResponse = parser.parse(reader, Response<Video>.class); 
```

此代码有效：

```
public class VideoResponse extends Response<Video> {
}

...
JsonParser parser = new JsonParser();
String json = "{ \"result\" : { \"title\": \"Hello world\" } }";
Response<Video> videoResponse = parser.parse(reader, VideoResponse.class); 
```

我的问题是：如何将`Response<Video>`类`parse`作为参数传递给方法而`VideoResponse`不像那样创建。（在我的程序中，有很多类似的模型`Video`，我不想复制我的代码来创建空类`VideoResponse`，，，，`UserResponse`等`CommentResponse`）`ActivityResponse`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T06:40:49.760

由于 Java 泛型的实现方式，在大多数情况下，泛型信息在运行时会丢失。这些所谓的可具体化类型的例外之一是[*泛型*](http://docs.oracle.com/javase/tutorial/java/generics/nonReifiableVarargsType.html)类的具体扩展。对于您的第一个示例：

```
public class Video {
    @Key
    private String title;
    public String getTitle() {
        return title;
    }
}

public class Response<TResult> {
    @Key
    private TResult result;
    public TResult getResult() {
        return result;
    }
    // ...
} 
```

解析器将无法反序列化该`result`属性，因为它无法确定它是什么类型（因为此信息在运行时不可用）。基本上，解析只是看到`java.lang.Object`，并且无法确定实例化的类型以将 JSON 数据拉入。我假设您已经怀疑是这种情况，因此尝试进行此调用：

```
Response<Video> videoResponse = parser.parse(reader, Response<Video>.class); 
```

在上一行中，您试图告诉解析器特定响应是用 参数化的`Video`，但不幸的是 Java 没有通用类文字的语法，因此代码无法编译。

在您的第二个示例中：

```
public class VideoResponse extends Response<Video> {
}

Response<Video> videoResponse = parser.parse(reader, VideoResponse.class); 
```

您已经创建了泛型类的具体扩展。对于此类扩展，通用类型信息在运行时可用，因此您的解析器可以确定它需要实例化什么以反序列化您的 JSON 数据。

所有这些都是您实际问题的背景信息：

> 我的问题是：如何在不创建 VideoResponse 的情况下将 Response 类作为参数传递给解析方法

您忽略了提及您正在使用的 JSON 库，但在大多数流行的库中，反序列化方法都有一个覆盖版本，该版本接受通常称为*超类型令牌*的内容。超类型标记基本上只是一个类的具体扩展，类似于我上面描述的。例如，在 Jackson 中，您可以像这样反序列化您的 JSON：

```
Response<Video> response = new ObjectMapper().readValue(
    jsonString, // JSON data
    new TypeReference<Response<Video>>() {} // super type token, implemented by anonymous class
); 
```

你应该检查你的 JSON 库文档是否有类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T06:19:38.127

由于 Java 泛型类型的“类型擦除”，您应该显式使用类型转换，如下所示：

```
Response<Video> videoResponse = (Response<Video>) parser.parse(reader, Response.class); 
```

它会引入一个编译警告，但没关系。

# uitableview - 使用 NSCoder 时，我应该在 UITableview 中的哪里添加自定义表格视图单元格标签？

> ID：15595614
> 
> 赞同：0
> 
> 时间：2013-03-24T05:48:10.900
> 
> 标签：uitableview, xcode4.5, nscoder

使用 NSCoder 时，我应该在 UITableview 中的哪里添加自定义表格视图单元格标签？我已经创建了 UITableViewCell 类并将所有内容都连接到界面生成器中。

我试图替换`cell.textLabel.text = oneName.name; with` `cell.label.text = oneName.name;`它只是显示一个黑色方块。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    if (!cell) {
        cell = [[CustomCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    // Configure the cell...
    NSUInteger row = [indexPath row];
    DrillObject *oneName = [self.addDrill objectAtIndex:row];
    cell.textLabel.text = oneName.name;

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T07:11:48.903

你确定你的标签尺寸合适吗？当使用自定义单元格时，我真的推荐使用免费的 Sensible TableView 框架。该框架会自动将对象的数据加载到自定义标签中，并且还会在需要时自动调整标签/单元格的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T07:26:37.973

有两个选项可以像你想要的那样向你的 CustomCell 类添加标签：
1-在 xib 文件中的单元格上添加一个标签，并为其分配一个标签，然后像这样创建一个 getter：

```
-(UILabel*)label
{
     id label = [self viewByTag:3]; 
     if([label isKindOfClass:[UILabel class]])
     {
             return label;
     }
     return nil;
} 
```

2- 在 init 方法中创建标签，不要忘记将标签背景颜色设置为清除颜色，如下所示：

```
UILabel *label = [UILabel alloc] initWithFrame:myFreame];
[label setBackgroundColor:[UIColor clearColor]];

// now you should have property on .h file like this 
@property (nonatomic, weak) UILabel *label;
// so back to the init dont forget to do this

_label = label; 
```

而已。

# ios - 四舍五入到特定值？

> ID：15595616
> 
> 赞同：4
> 
> 时间：2013-03-24T05:48:23.697
> 
> 标签：ios, objective-c

我需要将一个数字四舍五入，比如 543 到百位或十位。它可能是其中一个，因为它是游戏的一部分，而这个阶段可以要求你做一个或另一个。

例如，它可以询问“四舍五入到最接近的十位”，如果数字是 543，他们就必须输入 540。

但是，我没有看到可以指定要四舍五入的目标位置值的函数。我知道有一个简单的解决方案，但我现在想不出一个。

据我所知，该`round`函数会舍入最后一位小数？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T05:53:19.217

四舍五入到 100 位

```
NSInteger num=543;

NSInteger deci=num%100;//43
if(deci>49){
    num=num-deci+100;//543-43+100 =600
}
else{
    num=num-deci;//543-43=500
} 
```

四舍五入到第 10 位

```
NSInteger num=543;

NSInteger deci=num%10;//3
if(deci>4){
    num=num-deci+100;//543-3+10 =550
}
else{
    num=num-deci;//543-3=540
} 
```

**编辑：试图将上述合并为一个：**

```
NSInteger num=543;

NSInteger place=100; //rounding factor, 10 or 100 or even more.
NSInteger condition=place/2;

NSInteger deci=num%place;//43
if(deci>=condition){
    num=num-deci+place;//543-43+100 =600\. 
}
else{
    num=num-deci;//543-43=500
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T05:52:56.183

您可以只在代码中使用算法：

例如，假设您需要将一个数字四舍五入到百位。

```
int c = 543
int k = c % 100
if k > 50
   c = (c - k) + 100
else 
   c = c - k 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T06:02:06.190

要对数字进行四舍五入，您可以使用取模运算符 %。

模运算符为您提供除法后的余数。

所以 543 % 10 = 3，而 543 % 100 = 43。

例子：

```
int place = 10;
int numToRound=543;
// Remainder is 3
int remainder = numToRound%place;
if(remainder>(place/2)) {
    // Called if remainder is greater than 5\. In this case, it is 3, so this line won't be called.
    // Subtract the remainder, and round up by 10.
    numToRound=(numToRound-remainder)+place;
}
else {
    // Called if remainder is less than 5\. In this case, 3 < 5, so it will be called.
    // Subtract the remainder, leaving 540
    numToRound=(numToRound-remainder);
}
// numToRound will output as 540
NSLog(@"%i", numToRound); 
```

编辑：我的原始答案在准备好之前就提交了，因为我不小心按了一个键来提交它。哎呀。

# encryption - 散列、加密或两者兼而有之

> ID：15595617
> 
> 赞同：1
> 
> 时间：2013-03-24T05:48:24.753
> 
> 标签：encryption, hash

最近我一直在寻找为项目添加一些安全性。我一直在对这种情况进行大量研究，发现显然密码哈希是必须的。此外，我得出的结论是，最好的选择是使用 bcrypt、PBKDF2 或 scrypt。

我也看到了很多关于散列与加密的讨论，并发现很明显散列更重要。也就是说，在对 Google 进行了多次深入搜索之后，我还没有找到任何信息来说明加密已经正确散列的密码是否有益、有害或相对中立。

两者的 CPU 成本是否值得？有什么陷阱吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T06:14:49.860

加密某些东西会导致需要解密，这反过来又会导致您已经遇到的问题：秘密的安全存储。

假设您想将密码存储为哈希而不是纯文本，您基本上是这样做的：

```
hashpw := hash(salt + password) 
```

`salt`然后，您将和存储`hashpw`在一个文件中并使用此数据而不是纯文本密码。（请注意，盐和密码的串联顺序在许多情况下至关重要，这只是该过程的可视化，仅此而已；使用工具生成加盐哈希）。

然后，可能的攻击者需要猜测盐和纯文本密码以检查与存储的匹配`hashpw`，这与您使用的哈希算法一样安全（冲突率）。

使用某种密码加密某些东西的好处是能够恢复纯文本，这是散列方式不提供的。它还要求解密密文的系统具有可用的密钥。`foo`假设你用一些 key加密了一个字符串`bar`。要解密生成的密文 `brn`，您需要`bar`再次使用密钥。此密钥需要在您的系统上进行安全存储，如果密钥暴露给攻击者，则所有安全性都消失了。

作为一般的经验法则，我会说散列提供了一种存储要检查的文本（例如密码）的好方法，因为其安全性由散列算法的冲突率决定。另一方面，加密是您用来安全存储其余数据的技术。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-27T02:11:03.113

你在正确的轨道上。使用您提到的密钥派生/密码散列函数。

不要只使用哈希或盐渍哈希。主要问题是传统的散列算法（MD5、SHA-* 等）旨在快速。这对密码存储不利，而且许多实现都是易破解的，即使您添加了盐。

加密总是引入与密钥管理相关的问题。应避免用于密码存储。

KDF 的优点是工作因数。它的设计速度很慢且计算量很大，这就是为什么他们是这种情况的想法。Scrypt 是您正在查看的选项中最具弹性的选项，因为它需要一定数量的内存才能执行。这会杀死 GPU 攻击向量。无论您采用哪种方式，都需要权衡取舍，但只要您在可配置的情况下使用适当的工作因素，您的所有选择都可以。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-03-24T05:53:53.987

我会简单地加密密码。散列很快，但对密码来说有点不安全。当我出于安全目的使用散列时，通常用于消息签名之类的事情，例如消息+散列（消息+密码），以便可以验证消息，但我不是该领域的专家。我看不出两者都做的意义。

# python - Python - 从文件中读取以前的“列表”变量

> ID：15595620
> 
> 赞同：6
> 
> 时间：2013-03-24T05:49:10.943
> 
> 标签：python, string, file, list

我之前创建了一个`list`并将其保存到文件“mylist.txt”中。但是，当我读入它时，它是一个字符串，这意味着我无法随意访问每个元素。我一直在尝试并寻找解决此问题的方法，但无济于事。

在文本文档中，列表为一行，如下所示：

```
[(['000', '001', '002'], ('010', '011', '012')), (['100', '101', '102'], ('110', '111', '112'))] 
```

所以如果这个列表等于`mylist`，我可以做

```
>>> print mylist[0]
(['000', '001', '002'], ('010', '011', '012'))
>>> print mylist[0][0]
['000', '001', '002']
>>> print mylist[0][0][2]
002 
```

等等

以上对我有用，但在列表中阅读有以下效果：

```
>>>myreadlist=open("mylist.txt",'r').read()
>>>myreadlist
"[(['000', '001', '002'], ('010', '011', '012')), (['100', '101', '102'], ('110', '111', '112'))]"
>>>myreadlist[0]
'['
>>>print myreadlist[0]
[
>>>myreadlist[:15]
"[(['000', '001'" 
```

等等。我知道 的格式`mylist`不好，但它适用于我想要的，并且需要很长时间才能生成它。我尝试将列表复制粘贴到 python like `mylist = <paste>`，但是列表太长并且出现内存错误。

有没有办法读取文件并将其用作 a`list`以便我可以像正常一样访问每个元素（即如上面的第一个打印语句所示）？

非常感谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-24T05:52:31.840

将字符串传递给[`ast.literal_eval`](http://docs.python.org/3.3/library/ast.html#ast.literal_eval). 它将安全地将字符串解析为适当的结构：

```
>>> import ast
>>> with open("file.txt", 'r') as f:
        data = ast.literal_eval(f.read())
>>> # You're done! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T05:59:35.193

它必须是您应用程序中的纯文本文件吗？假设您将其正确格式化为 Python 列表，您可以将其转换为 Python 代码而不是文本。重命名文件`mylist.py`并在列表的前面添加一个分配，如`mylist = [xxx]`.

在需要访问此列表的 Python 脚本中，您可以像`from .mylist import mylist`这样导入它，这样您就可以完成您的工作（例如`mylist[0]`等）。

上面的导入假设`mylist.py`和你的 Python 脚本在同一个模块中（同一个目录，`__init__.py`里面有一个文件）。如果您不清楚（查看[Python 模块](http://docs.python.org/2/tutorial/modules.html)），只需将整个列表复制到与您的脚本相同的文件中，然后在同一文件的顶部进行分配。

# ios - iphone如何开启或关闭铃声和震动音？

> ID：15595622
> 
> 赞同：-1
> 
> 时间：2013-03-24T05:49:43.073
> 
> 标签：ios, ringtone, vibration

APP需要我实现一个设置功能，可以打开/关闭铃声和振动音一样，有人知道答案吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T06:03:15.660

[你应该使用`AVSystemController`它。](http://code.google.com/p/iphone-dev/source/browse/trunk/include/include/Celestial/AVSystemController.h?r=136)

```
[[AVSystemController sharedAVSystemController] setVolumeTo:10.0 forCategory:@"Ringtone"]; 
```

# java - 适用于本机查询的休眠查询缓存？

> ID：15595627
> 
> 赞同：2
> 
> 时间：2013-03-24T05:50:52.347
> 
> 标签：java, hibernate

我有下面的代码片段，我正在使用休眠查询。它工作正常。当我触发第二次执行此代码时，不会触发查询，因为它是从查询缓存中选取的

```
 Session session = hibernateFactory.openSession();
    Query employeeQuery=session.createQuery("from Employee where employeeId=1");//line 1
    employeeQuery.setCacheable(true);
    Employee employee1=(Employee)employeeQuery.uniqueResult();
    session.close(); 
```

但是只要我用下面的行替换上面代码片段中的 line1 我就会得到异常

```
Query employeeQuery=session.createSQLQuery("select * from Employee where employeeId=1"); 
```

执行是

```
 Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 0
at org.hibernate.type.TypeHelper.disassemble(TypeHelper.java:146)
at org.hibernate.cache.StandardQueryCache.put(StandardQueryCache.java:106)
at org.hibernate.loader.Loader.putResultInQueryCache(Loader.java:2434)
at org.hibernate.loader.Loader.listUsingQueryCache(Loader.java:2321)
at org.hibernate.loader.Loader.list(Loader.java:2268) 
```

查询缓存是否不适用于本机查询？

**更新：-**我认为查询缓存适用于 HQL，而不适用于 Native SQL。但是在休眠文档中它没有写在任何地方。所以只是想知道我在这里错过了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T06:07:03.497

SQLQuery 不支持缓存。它可以帮助你。

[http://www.tutorialspoint.com/hibernate/hibernate_caching.htm](http://www.tutorialspoint.com/hibernate/hibernate_caching.htm)

最好使用hibernate SQL sintaxis。

# asp.net - 错误“ExecuteReader：连接属性尚未初始化。”

> ID：15595633
> 
> 赞同：0
> 
> 时间：2013-03-24T05:51:18.037
> 
> 标签：asp.net, vb.net, oledb

这是我的代码。我似乎无法弄清楚是什么导致了这个错误。错误本身指向`Do While myReader.read`代码行，但我不确定这是导致问题的原因。

这是更详细的错误消息：

> executereader：连接属性尚未初始化。在 system.data.oledb.oledbcommand.validateconnection（字符串方法） 在 system.data.oledb.oledbcommand.validateconnectionandtransaction（字符串方法）

代码：

```
Imports System.Data.OleDb
Imports System.Data

Partial Class Customer_6_OrderHistory
    Inherits System.Web.UI.Page

    Private myDB As OleDbConnection
    Private sqlCmd As OleDbCommand
    Private myReader As OleDbDataReader
    Private myConnection As String = ConfigurationManager.ConnectionStrings("ConnString10").ToString
    Private myDataFile As String = ConfigurationSettings.AppSettings("DBFile")

    Private LegoNameList As New ArrayList
    Private ShipmentDateList As New ArrayList
    Private CostList As New ArrayList
    Private NumberPurchasedList As New ArrayList
    Private RecipientList As New ArrayList
    Private TotalCostList As New ArrayList

    Protected Sub Page_Init(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Init

        myDB = New OleDbConnection(myConnection)

        sqlCmd = New OleDbCommand("exec qry_OrderHistory")
        sqlCmd.Parameters.AddWithValue("@CustomerName", Session("myCart").GetCustomerName())

        Try
            myDB.Open()
            myReader = sqlCmd.ExecuteReader
            Do While myReader.Read
                LegoNameList.Add(myReader("Lego Name"))
                ShipmentDateList.Add(myReader("Date"))
                CostList.Add(myReader("Cost"))
                NumberPurchasedList.Add(myReader("Number Purchased"))
                RecipientList.Add(myReader("Recipient"))
                TotalCostList.Add(myReader("Total Cost"))
            Loop
            myReader.Close()
        Catch ex As Exception
            MsgBox(ex.ToString)
        Finally
            myDB.Close()
        End Try

        Dim myDataTable As New DataTable
        myDataTable.Columns.Add("Lego Name")
        myDataTable.Columns.Add("Date")
        myDataTable.Columns.Add("Cost")
        myDataTable.Columns.Add("Number Purchased")
        myDataTable.Columns.Add("Recipient")
        myDataTable.Columns.Add("Total Cost")

        For i = 0 To LegoNameList.Count - 1
            Dim myRow As DataRow = myDataTable.NewRow
            myRow.Item("Lego Name") = LegoNameList.Item(i)
            myRow.Item("Date") = FormatDateTime(ShipmentDateList.Item(i), DateFormat.ShortDate)
            myRow.Item("Cost") = FormatCurrency(CostList.Item(i), 2, TriState.True, TriState.False, TriState.True)
            myRow.Item("Number Purchased") = NumberPurchasedList.Item(i)
            myRow.Item("Recipient") = RecipientList.Item(i)
            myRow.Item("Total Cost") = FormatCurrency(TotalCostList.Item(i), 2, TriState.True, TriState.False, TriState.True)
            myDataTable.Rows.Add(myRow)
        Next
        gvwOrderHistory.DataSource = myDataTable
        gvwOrderHistory.DataBind()
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T05:58:12.843

您已经创建了连接，然后创建了命令，但您从未将连接分配给您的命令，这就是您收到错误的原因。您可以将连接分配给您的`OleDbCommand`，如下所示：

```
sqlCmd.Connection = myDB 
```

或者您可以在`OleDbCommand`构造函数中指定，如下所示：

```
sqlCmd = New OleDbCommand("exec qry_OrderHistory", myDB) 
```

然后您可以打开连接并执行命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T05:56:08.887

您必须`myConnection`在使用之前初始化 Connective 实例

# java - LinkedList 中的所有元素与添加的元素具有相同的值

> ID：15595634
> 
> 赞同：0
> 
> 时间：2013-03-24T05:51:18.517
> 
> 标签：java, linked-list

我正在尝试学习 Java 中 Linked List 类的实现。但是每次调用get方法时，都会得到Last Node的内容。我不知道为什么。代码如下，

```
package learningLinkedLists;
import java.util.LinkedList;

public class LinkedLists {
public static void main(String[] args) {
    Dummy d = new Dummy(0);
    LinkedList<Dummy> ll = new LinkedList<Dummy>();

    d.SetData(1);
    d.printData();
    ll.add(d);

    d.SetData(2);
    d.printData();
    ll.add(d);

    d.SetData(3);
    ll.add(d);

    System.out.println(ll);
    System.out.println(ll.get(1).data);
    System.out.println(ll.get(0).data);
    System.out.println(ll.size());
}

} 
```

我得到的输出是，

```
1
2
[learningLinkedLists.Dummy@3b061299,learningLinkedLists.Dummy@3b061299,
learningLinkedLists.Dummy@3b061299]
3
3
3 
```

我想在一个类中添加一些数据并创建该类的链表。

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T05:53:22.107

您获得相同输出的原因是因为您存储相同`object twice`，创建 2 个不同`dummy objs`然后存储它们

它应该像

```
//Creating the first obj
Dummy d = new Dummy(0);
//Creating second ojj
Dummy d2 = new Dummy(0);
LinkedList<Dummy> ll = new LinkedList<Dummy>();

//Since d and d2 are now 2 different objects, a change to d would not have a impact on d2 and vice versa
d.SetData(1);
d2.SetData(2);
ll.add(d);
ll.add(d2);

System.out.println(ll.get(1).data);
System.out.println(ll.get(0).data); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T05:53:39.600

您一遍又一遍地将同一个对象添加到列表中，然后更改其值。这就是为什么您会看到相同的值以及相同的内存地址。

为了解决这个问题，实例化不同`Dummy`的对象并将它们放入列表中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-24T05:53:59.073

问题是您正在更改内部状态`d`并将其添加到`LinkedList`多次。您需要创建`Dummy`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-24T05:56:32.240

它不显示最后一个节点的内容，但您已将值 3 分配给同一节点（虚拟）。创建 Dummy 类的新实例并为其分配一个值并将其添加到列表中。这将起作用。

# php - PHP5.4 mongodb在执行时未经授权，但发现有效

> ID：15595636
> 
> 赞同：0
> 
> 时间：2013-03-24T05:51:47.693
> 
> 标签：php, mongodb

我面临的问题是我可以通过控制台对数据库进行身份验证并执行任何查询或 reducemap，但是当我在 php 端运行执行语法时，它返回错误：unathorized。

mongodb->collectionname->find() 工作...示例失败代码：

```
 mongodb->execute('
  db.campaign_period.find({"_id.period":{"$gte": ISODate("2011-01-01T00:00:00"), "$lte": ISODate("2011-12-31T23:59:59")}, "$and": [{"$or": [{"value.section": "APPAREL & ACCESSORIES"}]}]}).sort({"value.country":1,"value.state":1,"value.section":1,"value.advertiser":1,"_id.siteref":1,"_id.panelno":1,"_id.period":1}).forEach(function(data){ db.campaign_report_mradminraw.insert(data); });
  '); 
```

# node.js - 如何开始使用 yeoman 和 three.js？

> ID：15595640
> 
> 赞同：2
> 
> 时间：2013-03-24T05:52:32.807
> 
> 标签：node.js, three.js, gruntjs, yeoman, bower

我用`bower install threejs`.

然后在此之后我希望在我的页面中有三个.js，所以我的 app.js 文件以：

```
define(["jquery", "three"], function() {
  "use strict"; 
```

但是，当我的页面加载 Chrome 控制台时显示：

```
Failed to load resource: the server responded with a status of 404 (Not Found) http://localhost:9000/scripts/three.js
Uncaught Error: Script error 
```

那么，它不应该像 jQuery 那样在组件中查找吗？

基本上我怎样才能开始使用 yeoman 并安装three.js？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T07:24:01.270

解决方法如下。

app.js 文件需要引用上面的“三”，这里指的是 main.js 文件，它有以下内容。

```
require.config({
    paths: {
        jquery: '../components/jquery/jquery',
        three: '../components/threejs/build/three'
    },
    shim: {
        bootstrap: {
            deps: ['jquery'],
            exports: 'jquery'
        }
    }
}); 
```

这里的关键是threejs three.js文件所在的三个点。

# excel - 根据部门字段将 Excel 分派到不同的 SharePoint 列表

> ID：15595647
> 
> 赞同：1
> 
> 时间：2013-03-24T05:53:57.000
> 
> 标签：excel, sharepoint

我有 Excel 表，代表应发送到不同部门的调查（基于一个部门字段）。如何在 SharePoint 的帮助下做到这一点？请注意，每个部门只能看到与其相关的结果（图表）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T06:15:52.883

您可以将 Excel 文件托管在不可搜索的文档库中，并创建一些与不同部门相关的图表 Web 部件。

这不能通过基于 excel 内容的完全安全性来完成，因此如果您想要完全安全性，您必须创建多个文件。

# ruby-on-rails - 如何通过rails link_to显示插入符号以在引导程序中进行下拉

> ID：15595651
> 
> 赞同：2
> 
> 时间：2013-03-24T05:54:25.707
> 
> 标签：ruby-on-rails, twitter-bootstrap

我想在我的 rails 应用程序中通过我的 rails 应用程序中的 link_to 方法使用 twitter bootstrap 显示小的下拉菜单符号。

我不知道该怎么做。当我将`<b class="caret"></b>`（twitter bootstrap 使用的）添加到`'Setup '`下面的参数时，它会被转义并显示为文本而不是 html。

`<%= link_to 'Setup ', root_path, :id => 'setupdrop', :'data-toggle' => 'dropdown', :class => 'dropdown-toggle' %>`

到目前为止，我看到的所有 rails 示例中，没有一个在使用 TBS 的此功能时使用 link_to（包括插入符号）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T06:02:04.920

尝试这个， `<%= link_to 'Setup <b class="caret"></b>'.html_safe, root_path, :id => 'setupdrop', :'data-toggle' => 'dropdown', :class => 'dropdown-toggle' %>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-16T02:33:25.673

link_to 需要一个块，所以你可以做

```
link_to root_path, :id => 'setupdrop', :'data-toggle' => 'dropdown', :class => 'dropdown-toggle' do
  Setup 
  <b class="caret"></b>
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T06:04:48.813

我记得对这件事有一个问题。如果我没记错的话，它与标签顺序有关——它必须在`<li>`标签内。这是我的有效代码：

```
<ul class="nav" role="navigation">
  <li class="explore">
    <%= link_to 'explore <b class="caret"></b>'.html_safe, root_path, :id => 'setupdrop', :'data-toggle' => 'dropdown', :class => 'dropdown-toggle' %>
    <ul class="dropdown-menu" role="menu" aria-labelledby="drop1">
      <li class="nav-header">Majors</li>
      <li class="dropdown-link"><%= link_to "View All", majors_path %>
      <li class="dropdown-link"><a href="#">By School</a></a></li>
      <li class="dropdown-link"><a href="#">Recently Added</a></a></li>
      <li class="dropdown-link"><a href="#">Most Liked</a></a></li>
    </ul>
  </li>
</ul> 
```

多亏了 Amar，我不必像他那样把它转换成 erb。这是在 Amar 的帮助下我的代码现在的样子。

# javascript - 达到 maxlength 值后关注下一个输入

> ID：15595652
> 
> 赞同：42
> 
> 时间：2013-03-24T05:54:49.210
> 
> 标签：javascript, jquery, iteration, counter

一旦前一个输入达到其最大长度值，我如何聚焦下一个输入？

```
a: <input type="text" maxlength="5" />
b: <input type="text" maxlength="5" />
c: <input type="text" maxlength="5" /> 
```

如果用户粘贴的文本大于最大长度，理想情况下它应该溢出到下一个输入中。

**jsfiddle：http:** [//jsfiddle.net/4m5fg/1/](http://jsfiddle.net/4m5fg/1/)

我必须强调我*不想*使用插件，因为我更愿意学习这背后的逻辑，而不是使用已经存在的东西。感谢您的理解。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-03-24T06:10:55.180

没有使用 jQuery，并且是一个非常干净的实现：

*   从 maxlength 属性读取。
*   扩展到容器内的任意数量的输入。
*   自动查找下一个要关注的输入。
*   没有 jQuery。

[http://jsfiddle.net/4m5fg/5/](http://jsfiddle.net/4m5fg/5/)

```
<div class="container">
a: <input type="text" maxlength="5" />
b: <input type="text" maxlength="5" />
c: <input type="text" maxlength="5" />
</div> 
```

..

```
var container = document.getElementsByClassName("container")[0];
container.onkeyup = function(e) {
    var target = e.srcElement || e.target;
    var maxLength = parseInt(target.attributes["maxlength"].value, 10);
    var myLength = target.value.length;
    if (myLength >= maxLength) {
        var next = target;
        while (next = next.nextElementSibling) {
            if (next == null)
                break;
            if (next.tagName.toLowerCase() === "input") {
                next.focus();
                break;
            }
        }
    }
    // Move to previous field if empty (user pressed backspace)
    else if (myLength === 0) {
        var previous = target;
        while (previous = previous.previousElementSibling) {
            if (previous == null)
                break;
            if (previous.tagName.toLowerCase() === "input") {
                previous.focus();
                break;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-03-24T05:58:21.150

您可以观察字段中的输入并测试其值：

```
$("input").bind("input", function() {
    var $this = $(this);
    setTimeout(function() {
        if ( $this.val().length >= parseInt($this.attr("maxlength"),10) )
            $this.next("input").focus();
    },0);
}); 
```

[工作演示](http://jsfiddle.net/mgibsonbr/4m5fg/8/)。

那里是为了`setTimeout`确保代码只会**在**输入完成和值更新后运行。绑定`input`确保大多数类型的输入都会触发事件，包括按键、复制/粘贴（甚至从鼠标）和拖放（尽管在这种情况下，后者不起作用，因为焦点在可拖动对象上，而不是可丢弃）。

*注意*：在某些较旧的浏览器上，您可能还需要绑定`propertychange`.

* * *

> 如果用户粘贴的文本大于最大长度，理想情况下它应该溢出到下一个输入中。

为此，您可能需要`maxlength`使用 JavaScript 删除该属性（以便能够捕获完整的输入），并自己实现该功能。我做了一个[小例子](http://jsfiddle.net/mgibsonbr/4m5fg/9/)，相关部分如下：

```
$("input").each(function() {
    var $this = $(this);
    $(this).data("maxlength", $this.prop("maxlength"));
    $(this).removeAttr("maxlength");
}) 
```

这将删除该属性，但将其保存在 中[`data`](http://api.jquery.com/data/)，以便您以后可以访问它。

```
function spill($this, val) {
    var maxlength = $this.data("maxlength");
    if ( val.length >= maxlength ) {
        $this.val(val.substring(0, maxlength));
        var next = $this.next("input").focus();
        spill(next, val.substring(maxlength));
    }
    else
        $this.val(val);
} 
```

这里在 JavaScript 中重新引入了最大长度逻辑，以及获取“丢弃”部分并在递归调用中使用它`spill`。如果没有下一个元素，则调用`data`将返回`undefined`并且循环将停止，因此输入将在最后一个字段中被截断。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-24T06:00:45.340

您可以使用纯 JavaScript：

见[演示](http://jsfiddle.net/4m5fg/6/)。

用 . 检查字符长度`el.value.length`。如果等于最大值，则使用 移动到下一个字段`focus()`。将此函数绑定到 keyup 事件，`onkeyup`以便每次用户键入字符后都会触发该函数。

```
var a = document.getElementById("a"),
    b = document.getElementById("b"),
    c = document.getElementById("c");

a.onkeyup = function() {
    if (this.value.length === parseInt(this.attributes["maxlength"].value)) {
        b.focus();
    }
}

b.onkeyup = function() {
    if (this.value.length === parseInt(this.attributes["maxlength"].value)) {
        c.focus();
    }
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-24T06:09:57.910

如果你有很多领域，你可以做这样的事情。

基本上是`keyup`获取输入的长度，然后将其与最大长度进行比较，如果匹配，则`focus`到下一个输入字段。

[http://jsfiddle.net/btevfik/DVxDA/](http://jsfiddle.net/btevfik/DVxDA/)

```
$(document).ready(function(){
    $('input').keyup(function(){
        if(this.value.length==$(this).attr("maxlength")){
            $(this).next().focus();
        }
    });
}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-07-10T13:07:01.243

```
let otp = document.querySelector('#otp-screen');

for(let pin of otp.children) {
    pin.onkeyup = function() {
        if(pin.nextElementSibling) {
            pin.nextElementSibling.focus();
        }
    }
}
```

```
<div class="otp-screen" id="otp-screen">
    <input type="text" placeholder="0" maxlength="1"/> 
    <input type="text" placeholder="0" maxlength="1"/> 
    <input type="text" placeholder="0" maxlength="1"/> 
    <input type="text" placeholder="0" maxlength="1"/> 
</div>
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-01-18T14:16:22.247

更新**的 btevfik**代码，Onkeyup 或 onkeydown 将产生问题，因为您将无法删除选项卡导航上的先前输入。编辑或更改输入框中的文本将很困难，因为它将被限制为最大长度。所以我们可以使用oninput事件来完成任务。

**[演示](https://jsfiddle.net/ssuryar/qbbnmjgk)**

**HTML**

```
<ul>
<li>a: <input type="text" maxlength="5" /></li>
<li>b: <input type="text" maxlength="3" /></li>
<li>c: <input type="text" maxlength="5" /></li>
<li>d: <input type="text" maxlength="3" /></li>
<li>e: <input type="text" maxlength="6" /></li>
<li>f: <input type="text" maxlength="10" /></li>
<li>g: <input type="text" maxlength="7" /></li>
</ul> 
```

**Javascript**

```
$(document).ready(function(){
    $('input').on("input", function(){
        if($(this).val().length==$(this).attr("maxlength")){
            $(this).next().focus();
        }
    });
}); 
```

**CSS**

```
ul {list-style-type:none;}
li {padding:5px 5px;} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-09-02T15:33:11.487

其他答案确实给出了一些如何实现的想法，但我发现他们没有考虑一些小问题，其中包括：

1.  事实上，您不想在整个页面上自动聚焦任何元素，而是在特定表单内。
2.  输入元素可以包装在其他一些元素中（例如，我将它们包装在`span`或`div`允许通过 CSS 浮动标签，并且我已经看到`table`用于结构的表单）。
3.  字段的有效性，当溢出或自动移动到下一个时。
4.  溢出时的输入事件。
5.  返回前一个字段时的光标位置（看起来可以通过浏览器保存，因此退格可以不在字段的末尾，而是例如在中间）。

下面的代码至少试图解释所有这些。其中大部分都可以在[codepen](https://codepen.io/Simbiat/pen/qBjNNEw)上进行测试：paste-spilling 在那里不起作用，看起来是因为 Clipboard API（其他带有它的 codepen 也不适合我）。
如果代码中有任何不清楚的地方，请告诉我，我会更新我的答案和代码。如果您发现一些未涵盖的边缘案例 - 也请告诉我。

对于使用来自 codepen 的表单进行粘贴溢出测试，您可以使用以下内容：`123456789123456789012345678903454353434534`

关于它如何在[youtube上更“生动”的环境中工作的视频示例](https://youtu.be/Ef9whw8KN9U)

```
//List of input types, that are "textual" by default, thus can be tracked through keypress and paste events. In essence,
// these are types, that support maxlength attribute
const textInputTypes = ['email', 'password', 'search', 'tel', 'text', 'url', ];

formInit();

//Add listeners
function formInit()
{
    document.querySelectorAll('form input').forEach((item)=>{
        if (textInputTypes.includes(item.type)) {
            //Somehow backspace can be tracked only on keydown, not keypress
            item.addEventListener('keydown', inputBackSpace);
            if (item.getAttribute('maxlength')) {
                item.addEventListener('input', autoNext);
                item.addEventListener('change', autoNext);
                item.addEventListener('paste', pasteSplit);
            }
        }
    });
}

//Track backspace and focus previous input field, if input is empty, when it's pressed
function inputBackSpace(event)
{
    let current = event.target;
    if ((event.keyCode || event.charCode || 0) === 8 && !current.value) {
        let moveTo = nextInput(current, true);
        if (moveTo) {
            moveTo.focus();
            //Ensure, that cursor ends up at the end of the previous field
            moveTo.selectionStart = moveTo.selectionEnd = moveTo.value.length;
        }
    }
}

//Focus next field, if current is filled to the brim and valid
function autoNext(event)
{
    let current = event.target;
    //Get length attribute
    let maxLength = parseInt(current.getAttribute('maxlength'));
    //Check it against value length
    if (maxLength && current.value.length === maxLength && current.validity.valid) {
        let moveTo = nextInput(current, false);
        if (moveTo) {
            moveTo.focus();
        }
    }
}

async function pasteSplit(event)
{
    let permission = await navigator.permissions.query({ name: 'clipboard-read',});
    //Check permission is granted or not
    if (permission.state === 'denied') {
        //It's explicitly denied, thus cancelling action
        return false;
    }
    //Get buffer
    navigator.clipboard.readText().then(result => {
        let buffer = result.toString();
        //Get initial element
        let current = event.target;
        //Get initial length attribute
        let maxLength = parseInt(current.getAttribute('maxlength'));
        //Loop while the buffer is too large
        while (current && maxLength && buffer.length > maxLength) {
            //Ensure input value is updated
            current.value = buffer.substring(0, maxLength);
            //Trigger input event to bubble any bound events
            current.dispatchEvent(new Event('input', {
                bubbles: true,
                cancelable: true,
            }));
            //Do not spill over if a field is invalid
            if (!current.validity.valid) {
                return false;
            }
            //Update buffer value (not the buffer itself)
            buffer = buffer.substring(maxLength);
            //Get next node
            current = nextInput(current);
            if (current) {
                //Focus to provide visual identification of a switch
                current.focus();
                //Update maxLength
                maxLength = parseInt(current.getAttribute('maxlength'));
            }
        }
        //Check if we still have a valid node
        if (current) {
            //Dump everything we can from leftovers
            current.value = buffer;
            //Trigger input event to bubble any bound events
            current.dispatchEvent(new Event('input', {
                bubbles: true,
                cancelable: true,
            }));
        }
    }).catch(err => {
        //Most likely user denied request. Check status
        navigator.permissions.query({ name: 'clipboard-read',}).then(newPerm => {
            if (newPerm.state === 'granted') {
                console.log('Failed to read clipboard', err);
            } else {
                console.log('Request denied by user. Show him some notification to explain why enabling permission may be useful');
            }
        }).catch(errPerm => {
            console.log('Failed to read clipboard', errPerm);
        });
    });
}

//Find next/previous input
function nextInput(initial, reverse = false)
{
    //Get form
    let form = initial.form;
    //Iterate inputs inside the form. Not using previousElementSibling, because next/previous input may not be a sibling on the same level
    if (form) {
        let previous;
        for (let moveTo of form.querySelectorAll('input')) {
            if (reverse) {
                //Check if current element in loop is the initial one, meaning
                if (moveTo === initial) {
                    //If previous is not empty - share it. Otherwise - false, since initial input is first in the form
                    if (previous) {
                        return previous;
                    } else {
                        return false;
                    }
                }
            } else {
                //If we are moving forward and initial node is the previous one
                if (previous === initial) {
                    return moveTo;
                }
            }
            //Update previous input
            previous = moveTo;
        }
    }
    return false;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-30T14:34:02.657

已验证的答案有一个问题，如果前一个字段具有有效长度，则该问题会聚焦前一个字段

我已修改上述答案以修复前一个标签的完整长度

```
var container = document.getElementsByClassName("container")[0];
    container.onkeyup = function(e) {
    var target = e.srcElement || e.target;
    var maxLength = parseInt(target.attributes["maxlength"].value, 10);
    var myLength = target.value.length;
    if (myLength >= maxLength) {
        var next = target;
        while (next = next.nextElementSibling) {
            if (next == null)
                break;
            if (next.tagName.toLowerCase() === "input") {
                next.focus();
                break;
            }
        }
    }
    // Move to previous field if empty (user pressed backspace)
    else if (myLength === 0) {
         var previous = target;
       // Move to previous field if backspace is pressed
        if (code == 8) {
            previous = previous.previousElementSibling;
            if (previous != null) {
                if (previous.tagName.toLowerCase() === "input") {
                    previous.focus();
                }
            }
        } else {
            while (previous = previous.previousElementSibling) {
                if (previous == null)
                    break;
                if (previous.tagName.toLowerCase() === "input") {
                    var mLength = parseInt(previous.attributes["maxlength"].value, 10);
                    var pMyLength = previous.value.length;
                    // Move to previous field if it does not have required length
                    if (mLength == pMyLength) {
                        break;
                    } else {
                        previous.focus();
                        break;
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-02T16:09:54.360

如果您专注于创建卡（借记卡/信用卡）号码输入类型。然后清理一个易于管理的 jQuery 版本，如下所示：

```
/*..............................................................................................
* jQuery function for Credit card number input group
......................................................................................................*/
            // make container label of input groups, responsible
            $('.card-box').on('focus', function(e){
                $(this).parent().addClass('focus-form-control');
            });
            $('.card-box').on('blur', function(e){
                $(this).parent().removeClass('focus-form-control');
            });
            $('.card-box-1').on('keyup', function(e){
                e.preventDefault();
                var max_length = parseInt($(this).attr('maxLength'));
                var _length = parseInt($(this).val().length);
                if(_length >= max_length) {
                    $('.card-box-2').focus().removeAttr('readonly');
                    $(this).attr('readonly', 'readonly');
                }
                if(_length <= 0){
                    return;
                }
            });
            $('.card-box-2').on('keyup', function(e){
                e.preventDefault();
                var max_length = parseInt($(this).attr('maxLength'));
                var _length = parseInt($(this).val().length);
                if(_length >= max_length) {
                    $('.card-box-3').focus().removeAttr('readonly');
                    $(this).attr('readonly', 'readonly');
                }
                if(_length <= 0){
                    $('.card-box-1').focus().removeAttr('readonly');
                    $(this).attr('readonly', 'readonly');
                }
            });
             $('.card-box-3').on('keyup', function(e){
                e.preventDefault();
                var max_length = parseInt($(this).attr('maxLength'));
                var _length = parseInt($(this).val().length);
                if(_length >= max_length) {
                    $('.card-box-4').focus().removeAttr('readonly');
                    $(this).attr('readonly', 'readonly');
                }
                if(_length <= 0){
                    $('.card-box-2').focus().removeAttr('readonly');
                    $(this).attr('readonly', 'readonly');
                }
            });
            $('.card-box-4').on('keyup', function(e){
                e.preventDefault();
                var max_length = parseInt($(this).attr('maxLength'));
                var _length = parseInt($(this).val().length);
                if(_length >= max_length) {
                    return;
                }
                if(_length <= 0){
                    $('.card-box-3').focus().removeAttr('readonly');
                    $(this).attr('readonly', 'readonly');
                }
            });
/*..............................................................................................
* End jQuery function for Credit card number input group
......................................................................................................*/
```

```
/* Hide HTML5 Up and Down arrows. */
                                input[type="number"]::-webkit-outer-spin-button, input[type="number"]::-webkit-inner-spin-button {
                                    -webkit-appearance: none; margin: 0;
                                }
                                input[type="number"] { -moz-appearance: textfield; }
                                .card-box {
                                    width: 20%; display: inline-block; height: 100%; border: none;
                                }

                                .focus-form-control {
                                    border-color: #66afe9; outline: 0;-webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, .6);
                                        box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, .6);
                                }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
<div class="form-control" style="padding: 0; max-width: 300px; ">
                                        <input class="card-box card-box-1" type="number" id="CreditCard_CardNumber1" required step="1" minlength="4" maxlength="4" pattern="[0-9]{4}" value="" placeholder="0000"
                                            onClick="this.setSelectionRange(0, this.value.length)" oninput="this.value=this.value.slice(0,this.maxLength||'');this.value=(this.value < 1) ? ('') : this.value;"/> 
                                        <input class="card-box card-box-2" type="number" id="CreditCard_CardNumber2" readonly required step="1" minlength="4" maxlength="4" pattern="[0-9]{4}" value="" placeholder="0000"
                                            onClick="this.setSelectionRange(0, this.value.length)" oninput="this.value=this.value.slice(0,this.maxLength||'');this.value=(this.value < 1) ? ('') : this.value;" />
                                        <input class="card-box card-box-3" type="number" id="CreditCard_CardNumber3" readonly required step="1" minlength="4" maxlength="4" pattern="[0-9]{4}" value="" placeholder="0000"
                                            onClick="this.setSelectionRange(0, this.value.length)" oninput="this.value=this.value.slice(0,this.maxLength||'');this.value=(this.value < 1) ? ('') : this.value;" />
                                        <input class="card-box card-box-4" type="number" id="CreditCard_CardNumber4" readonly required step="1" minlength="4" maxlength="4" pattern="[0-9]{4}" value="" placeholder="0000"
                                            onClick="this.setSelectionRange(0, this.value.length)" oninput="this.value=this.value.slice(0,this.maxLength||'');this.value=(this.value < 1) ? ('') : this.value;" />
                                    </div>
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-08-04T11:18:45.260

如果您要动态添加输入文本字段，那么您可以试试这个。

这会将脚本重新注入 DOM 并完美运行。

```
$('body').on('keyup', '#num_1',function(){
  if (this.value.length === parseInt(this.attributes["maxlength"].value)) {
    $('#num_2').focus();
  }
})
$('body').on('keyup','#num_2', function(){
   if (this.value.length === parseInt(this.attributes["maxlength"].value)) {
    $('#num_3').focus();
  }
})
```

```
<input type="text" class="form-control" name="number" maxlength="3" id="num_1">
<input type="text" class="form-control" name="number" maxlength="3" id="num_2">
<input type="text" class="form-control" name="number" maxlength="4" id="num_3">
```

# android - 在新活动中保持布局

> ID：15595654
> 
> 赞同：0
> 
> 时间：2013-03-24T05:55:23.600
> 
> 标签：android, android-layout, android-activity

在我的布局中“如下”。我想在脚蹼完成后立即开始另一个活动，并在新活动中继续以相同的视图状态。基本上我想保持布局的某些部分是静态的，而其他部分是动画的并且有自己的活动。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/LinearLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:minHeight="50dp"
android:orientation="vertical"
tools:context=".MainActivity" >

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/logo" />

</RelativeLayout>

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <ViewFlipper
        android:id="@+id/viewFlipper1"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent" >

        <include
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="center"
            layout="@layout/first" />

        <include
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            layout="@layout/country" />

    </ViewFlipper>

</RelativeLayout>

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</RelativeLayout> 
```

# r - 按下向下箭头键后检索一行代码

> ID：15595655
> 
> 赞同：4
> 
> 时间：2013-03-24T05:55:38.703
> 
> 标签：r

如果我在光标处键入一行 R 代码并按“Enter”，我可以通过按一次向上箭头键立即检索该代码。但是，如果我在输入一行代码时不小心按了向下箭头键一次，那么该行代码就会消失并且我无法检索它。这是一个轻微但一直存在的烦恼，在将数据输入向量时最令人沮丧。

有没有办法在意外按下向下箭头键后检索一行代码？

我正在使用 Windows 机器，安装后立即在我的桌面上找到 R GUI... ...我认为安装过程中的一个问题是我是否想要在我的桌面上使用快捷方式，然后我选择“是”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T06:00:28.523

这完全取决于 GUI。例如，我相信（但不确定）RStudio 会保留您输入的内容。

虽然不是直接的解决方案，但可能有用的是在外部窗口中使用编辑。我不使用 Windows，但我怀疑如果你点击`ctrl+n`你会得到一个编辑器，然后你可以在其中使用`F5` 或`ctrl+R` 执行该特定行。

就个人而言，我使用 Sublime Text 2，并`cmd+enter`在控制台上执行我的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:48:23.803

我发现如果我打开 R 并单击，`File`然后`New Script`在 R 菜单中将打开一个编辑器。我可以在那个编辑器中输入一行 R 代码。然后我可以突出显示该行代码并按`Ctrl+R`，如 Ricardo Saporta 的回答和 djhurio 的评论中所述。通过按下`Ctrl+R`该行 R 代码将执行。R 代码行在编辑器中仍然可见，即使我不小心按了向下箭头键，也不会丢失。

希望这建立在 Ricardo Saporta 的答案足以保证被发布为另一个答案，尽管如果没有 Ricardo 和 djhurio 的帮助，我不会想到这一点。

附言

回想起来，我现在明白这就是里卡多在他回答下方的第二条评论中的意思。

# javascript - jQuery UI 弹跳（双图）

> ID：15595656
> 
> 赞同：2
> 
> 时间：2013-03-24T05:55:55.080
> 
> 标签：javascript, jquery, css, user-interface, bounce

第一次在这里发帖，如果我有任何标记问题，请原谅我。我不习惯用 SOF 框架来写帖子。

我试图让一些社交图标在悬停时在我的网站上弹跳。我从 jQuery UI 获取代码进行测试并进行了一些小的编辑，但是我遇到了在页面上显示双图像的问题。当鼠标悬停在图像上时，它会弹跳，但从弹跳图像后面可以看到一个副本。如果我在弹跳会话期间将鼠标移开并快速将鼠标悬停在图标上，它会正确弹跳隐藏图像。

那么我怎样才能强制它始终将图像隐藏在后面呢？

```
<!DOCTYPE html>
<html>
<head>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<style type="text/css">
div { width: 32px; height: 32px; background-repeat:no-repeat; background-image: url(http://www.liquidclubs.com/assets/img/icon-fb.png); border: position: relative; }
</style>
<script>
$(document).ready(function() {

$("div").mouseenter(function () {
  $(this).effect("bounce", { times:3 }, 350);
});

});
</script>
</head>
<br><br><div></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T06:31:31.213

因为您将图像定义为背景图像。

[http://jsfiddle.net/UQTY2/33/](http://jsfiddle.net/UQTY2/33/)

```
<div> <img src="http://www.liquidclubs.com/assets/img/icon-fb.png" /></div>

div {
    width: 32px;
    height: 32px;
} 
```

# jquery - 如何使用动画和缓动效果隐藏和显示元素

> ID：15595662
> 
> 赞同：0
> 
> 时间：2013-03-24T05:57:33.610
> 
> 标签：jquery

我有一个 N 级菜单结构，我必须首先隐藏所有级别的子菜单，并在父菜单悬停时显示它们。我一直在尝试这个，我必须隐藏所有子菜单并在点击时显示它们，但是问题是当我单击其他父级时，必须关闭先前打开的菜单，并且如果我再次单击该菜单，则其子级应处于隐藏状态，并且在打开和关闭菜单时我想要一些缓动和动画效果它应该可以工作作为切换。

这就是我一直在尝试做的事情：

```
$(document).ready(function(){
$("li").children('ul').hide();
$("li a").click(function(){
$(this).next('ul').toggle();            
$(this).parent().siblings('li').children('ul').hide(); 
```

这是我想要做[的js小提琴](http://jsfiddle.net/kKsXz/)

我不应该在菜单上使用任何类和或任何属性只有顶级ul有剩下的类每件事都应该在jquery中完成我需要缓动和动画部分

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T06:24:58.790

要完成@Tyriar 答案，这是如何使用 JQueryUI 缓动效果：http: [//jqueryui.com/effect/#easing](http://jqueryui.com/effect/#easing)

[http://jsfiddle.net/6u4LJ/2/](http://jsfiddle.net/6u4LJ/2/)

```
$(document).ready(function () {
    $("li").children('ul').hide();
    $("li a").click(function () {
        $(this).next('ul').animate({
            height: "show"
        }, 2000, 'easeInOutBounce');
        $(this).parent().siblings('li').children('ul').animate({
            height: "hide"
        }, 2000, 'easeInOutBounce');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T06:20:00.290

[`slideUp()`](http://api.jquery.com/slideUp/)您可以使用和添加一些动画[`slideDown()`](http://api.jquery.com/slideDown/)。

[jsFiddle](http://jsfiddle.net/Tyriar/6u4LJ/3/)

```
$(document).ready(function(){
    $("li").children('ul').hide();
    $("li a").click(function(){
        $(this).next('ul').find('ul').hide();
        $(this).next('ul').slideDown();            
        $(this).parent().siblings('li').children('ul').slideUp();           
    });     
}); 
```

您也可以通过在活动列表项上使用带有类的 CSS3 过渡来相当轻松地做到这一点。

**编辑：**我现在明白了，当你点击打开一个时，尝试添加它来隐藏所有内部列表。

```
$(this).next('ul').find('ul').hide(); 
```

# ios - 使用 ASIHTTPRequest 将 .caf 发送到服务器

> ID：15595663
> 
> 赞同：2
> 
> 时间：2013-03-24T05:57:50.540
> 
> 标签：ios, objective-c, core-audio, asihttprequest

我正在使用 AVAssetReader 创建一个可以在我的计算机上本地播放的 .caf 文件。但是，当我尝试将 .caf 上传到服务器时，无法再读取上传的文件。这是我的代码：

```
NSLog(@"Posting to server");
NSURL *serverURL = [NSURL URLWithString:serverString];
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:serverURL];
[request setRequestMethod:@"POST"];
[request setData:songData
    withFileName:@"exported.caf"
  andContentType:@"audio/x-caf"
          forKey:@"musicfile"];
[request setDelegate:self];
[request startAsynchronous]; 
```

有趣的是，当我执行以下操作时，生成的文件可以在我的计算机上运行：

```
NSString *applicationDocumentsDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *storePath = [applicationDocumentsDir stringByAppendingPathComponent:@"test.caf"];
[songData writeToFile:storePath atomically:NO]; 
```

我是否必须在 musicData 中附加某种类型的标头才能正确格式化 .caf？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T06:46:40.080

以下是一些用于识别问题的故障排除说明：

1.  确保您使用与在本地播放歌曲完全相同的音频阅读器应用程序在服务器中播放歌曲（即消除服务器音频应用程序具有适当解码器来读取`.caf`文件的可能性。您可以通过尝试轻松解决该问题`.caf`在远程服务器上播放原始文件（即不是您自己创建的，已证明可以工作的）文件。

2.  每当您遇到无法确定原因的问题时..然后退后一步并使用第一原则。在这种情况下.. 下载一个像[hexfiend](http://ridiculousfish.com/hexfiend/)这样的十六进制编辑器，并将您在本地获得的可以读取的文件与服务器上的文件进行比较.. 如果您发现值有任何差异，这意味着这些值在传输过程中被弄乱了。发生这种情况是因为整个**大端/小端**网络传输[问题（您可以](http://en.wikipedia.org/wiki/Endianness)[在此处](http://www.raywenderlich.com/12910/how-to-make-a-simple-playing-card-game-with-multiplayer-and-bluetooth-part-3)找到有关大/小端含义的很好的讨论，您可以使用[CFSwapInt16BigToHost](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFByteOrderUtils/Reference/reference.html#//apple_ref/doc/uid/20001449-CH201-DontLinkElementID_10)等函数解决此问题（用作示例......它可能不会成为你最终不得不使用的那个）。

3.  您正在使用[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/) API.. 它是 CFNetwork API 的包装器。它的目的是让您的生活更轻松，但在这种情况下，如果隐藏在引擎盖下的太多（即您无法轻松调试问题），则不再实现该目的。如果是这样的话，我建议你更深一层，直接使用[CFNetwork API](https://developer.apple.com/library/mac/#documentation/Networking/Conceptual/CFNetwork/CFHTTPTasks/CFHTTPTasks.html)。（这并不难，而且肯定更容易调试）。

# sharepoint - 如何将内容编辑器 webpart 的内容从开发移动到 UAT 服务器

> ID：15595675
> 
> 赞同：0
> 
> 时间：2013-03-24T05:59:02.030
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-2007, moss

我基于这些母版和布局页开发了一个母版页、布局页和一些内容页。每个内容页面中包含 5 个内容编辑器 Web 和 4 个可视 Web 部件部件。我在我的开发环境中开发了所有这些东西。现在我的任务是将所有这些东西移到 UAT 环境中。

我可以轻松移动母版页、布局页和可视 webpart，但我的问题是，如何移动内容编辑器 webpart 的内容。我是否必须手动将内容编辑器 webpart 的粘贴内容从开发环境复制到 UAT，或者我可以使用一些工具或技术来节省这种手动工作。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T07:06:37.773

我从您的问题中了解到您正在手动移动母版页和 Web 部件，因此如果是这种情况，您可以导出内容编辑器并将其添加为“UAT”中的 Web 部件

# javascript - 如何在 Windows 8 中获取 div 的高度并将宽度设置为高度

> ID：15595689
> 
> 赞同：0
> 
> 时间：2013-03-24T06:01:31.697
> 
> 标签：javascript, css, html

我有一个div。我已将 div 的宽度设置为自动。我希望这个 div 是一个正方形，所以我将 div 的高度设置为 100%。现在，如果我将 div 的宽度设置为 100%，它不会是正方形，因为大多数屏幕都是矩形的，所以我想我可以获取 div 的当前高度（以像素为单位）并将宽度设置为横向模式下的高度，并在纵向模式下做相反的事情，但我不知道如何去做。请帮助我。我正在使用 HTML 和 JavaScript

![在此处输入图像描述](../Images/df5643ec21ed7c52c6f93d1cd803e6ec.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T06:07:14.057

没有像 jQuery 这样的扩展：

```
var div = document.getElementById("myDiv");
var height = div.clientHeight;
div.style.width = height + 'px'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T06:14:21.390

我不认为 JavaScript 是必要的。如果您正在做手机/平板电脑设计，您可以使用媒体查询来更改 div 的宽度和高度；如果你希望它是正方形的，你可以将宽度和高度设置为与 CSS 相同。尝试使用百分比，直到您发现在 Web 开发人员或萤火虫中哪些值产生相等的宽度和高度。

# string - 如何使用 os.execute("input text \"...\"") 输入网站

> ID：15595690
> 
> 赞同：1
> 
> 时间：2013-03-24T06:01:39.960
> 
> 标签：string, lua, string-formatting

```
os.execute("input text \"tp://www.lua.org/manual/2/2.1/\"");
os.execute("input text \"tp://www.lua.org/manual/2/3.1/\"");
                                                   4
                                                   5 
```

我想设置一个名为的变量`i`，

```
for i =2, 5, 1 do
    os.execute("input text \"tp://www.lua.org/manual/2/**i**.1/""); 
```

然而，我失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T06:07:14.273

您需要在字符串中解析它。像这样：

```
for i = 2, 5, 1 do
    os.execute( string.format("input text \"tp://www.lua.org/manual/2/%d.1/\"", i) ); 
```

* * *

甚至更好：

```
for i = 2, 5, 1 do
    os.execute( string.format([[input text "tp://www.lua.org/manual/2/%d.1/"]], i) ); 
```

* * *

[在 codepad 上](http://codepad.org/PCoLQR6b)查看它的工作情况。

# xtext - 无法理解 ANY_OTHER

> ID：15595695
> 
> 赞同：1
> 
> 时间：2013-03-24T06:02:38.713
> 
> 标签：xtext

我正在尝试学习 xtext，发现 ANY_OTHER 完全令人困惑，并且几乎没有问题。

我的 .xtext 文件中只有一个作品。

```
document: text = '<' ANY_OTHER* '>'; 
```

当我将其作为“eclipse 应用程序”运行时，以下输入正常工作：

```
<>
< >
<.>
<....>
<.. ..> 
```

但以下出现失败：

```
<a> 
```

错误**无关输入 'a' 期望 '>'**。

**Q1）为什么 ANY_OTHER 匹配文字“。” 特点？**

我尝试将 ANY_OTHER 覆盖为

```
terminal ANY_OTHER: .; 
```

我相信这是*Common Terminals* [here](http://www.eclipse.org/Xtext/documentation.html#_15)中的原始定义。

现在行为发生了变化。输入错误**离开了。但如果我尝试**

 **```
<aa> 
```

, 给出错误**无关输入 'aa' 期望 '>'**。

**Q2) 为什么覆盖 ANY_OTHER 会改变行为？**

**Q3）为什么是“。” 与“a”的处理方式不同？<..> 被接受，但不是。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T09:16:56.270

我将在一个答案中回答您的三个问题，因为这在这里很有意义。

默认情况下，语法的第一行看起来像

```
grammar org.xtext.example.mydsl.MyDsl with org.eclipse.xtext.common.Terminals 
```

除非您手动更改它。我猜你的还是这个样子。这意味着，您自己的语法将默认使用 org.eclipse.xtext.common.Terminals，所以您是对的。ANY_OTHER 在“通用”语法中指定。

根据规定规则：单。匹配一个字符。除此规则外，您还可以在“通用”语法中找到一个 ID 规则，它匹配所有文本字符和其他一些字符。这里很重要，ID 规则本身包含数量，而 ANY_OTHER 规则只匹配一个字符。因此，默认情况下，规则将匹配这些示例

```
A   --> 1 instance of ID
*.* --> 3 instances of ANY_OTHER
AAA --> 1 instance of ID
A.A --> 2 instances of ID, 1 instance of ANY_OTHER 
```

覆盖 ANY_OTHER 规则时，解析顺序会发生变化。您可以在文档中找到有关此的一些信息。这会导致不同的行为：

```
A   --> 1 instance of ANY_OTHER
*.* --> 3 instances of ANY_OTHER
AAA --> 1 instance of ID
A.A --> 3 instances of ANY_OTHER 
```

我希望这个信息帮助。**

# iphone - FMDB databaseWithPath：不写入磁盘

> ID：15595696
> 
> 赞同：0
> 
> 时间：2013-03-24T06:02:39.240
> 
> 标签：iphone, database, cocoa, file, fmdb

fmdb 文档说，如果您将文件系统路径传递给 databaseWithPath: 它将为您创建一个文件：

1.  文件系统路径。该文件不必存在于磁盘上。如果它不存在，它是为您创建的。

我正在使用以下代码获取文件系统路径：

```
[[NSHomeDirectory() stringByAppendingPathComponent:@"Desktop"] stringByAppendingPathComponent:@"file.db"]; 
```

并尝试像这样设置我的数据库：

```
FMDatabase *aDB = nil;

if (aLanguageDBPath) {
        aDB = [FMDatabase databaseWithPath:aLanguageDBPath];
} 
```

结果是一个有效的 FMDatabase 对象，它没有像宣传的那样被写入磁盘。我是否误解了文档中的解释？我应该如何动态创建数据库并将其写入磁盘？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T20:02:36.547

刚刚发现数据库实际上并没有在磁盘上创建，直到`[db open];`被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T13:11:39.293

尝试使用 NSDocumentDirectory。用这个改变你的路径代码：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                     NSUserDomainMask,
                                                     YES);
NSString dbPath = [[paths objectAtIndex:0] stringByAppendingPathComponent:@"file.db"]; 
```

# debugging - Aptana Studio3 调试器不工作

> ID：15595697
> 
> 赞同：0
> 
> 时间：2013-03-24T06:02:40.647
> 
> 标签：debugging, aptana

我正在 Aptana Studio3 中做我的 2D 游戏项目。但是当我单击调试按钮时，它会转到 Aptana 的主页。它还显示以下错误。

套接字连接错误。请尝试关闭并重新启动您的网络浏览器，然后再次运行“调试”。接受超时

问题是什么 。？请帮忙 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T17:36:39.963

如果您使用的是Firefox，问题可能与Firebug安装有关；请检查版本。由于某种原因，版本应该不是最新的。最好让Aptana studio为FF.I下载Fb和Aptana扩展有同样的问题，但在按照上述操作后解决了。

# php - 图像魔术代码在centos上工作但在windows上不工作

> ID：15595699
> 
> 赞同：0
> 
> 时间：2013-03-24T06:03:08.170
> 
> 标签：php, imagemagick, imagick, imagemagick-convert

这是我下面的代码

`exec("convert -page 90x54 script_o.gif \\( script_o.gif -repage +37+0\! \) output.gif");`

这在我的网络服务器（centos）上运行良好，但在我的 wamp 服务器上不起作用，但我检查了其他在 wamp 服务器上运行良好的 im 代码，对于上述 wamp 服务器代码是否有任何修复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T06:07:04.120

问题是windows已经有一个二进制文件被称为`convert`将FAT卷转换为NTFS，该二进制文件在PATH中，所以它被执行而不是你的imagemagick一个。要尝试这样做，只需打开一个 windows shell 并键入`convert /?`并按 ENTER 键，您将看到该 other 的输出`convert`。

解决方案是在您的命令中指定 imagemagick`convert`二进制文件的绝对路径。

像这样的东西：

```
exec("c:\\imagemagick_folder\\bin\\convert.exe -page 90x54 script_o.gif \\( script_o.gif -repage +37+0\! \) output.gif"); 
```

# matlab - 使用 bsxfun 计算匹配值两个矩阵

> ID：15595704
> 
> 赞同：0
> 
> 时间：2013-03-24T06:04:47.597
> 
> 标签：matlab, matrix, bsxfun

我`c=bsxfun(@eq,b,a)`用来比较两个矩阵的值。但我发现很难计算不匹配的值。例如，我使用这段代码

```
a = [1 2 3 4 7 6; ...
     3 2 4 6 7 2 ];
b = [1 3 2 4 5 7; ...
     3 4 5 6 7 2; ...
     2 3 4 5 6 6];
for i = 1:size(a,1)
    c= bsxfun(@eq,a(i,:),b)
    match = sum(c')
end 
```

和结果

```
 c =
   1     0     0     1     0     0
   0     0     0     0     1     0
   0     0     0     0     0     1

 match =
   2     1     1

c =
   0     0     0     0     0     0
   1     0     0     1     1     1
   0     0     1     0     0     0

match =
   0     4     1 
```

我想用第二个匹配保存值第一个匹配矩阵。例如

```
total_match = 
   2 5 2 
```

你有什么建议吗？谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T07:06:02.410

不需要循环

```
match = bsxfun( @eq, permute( a, [1 3 2]), permute( b, [3 1 2] ) ); % result in 2x3x6 boolean
match = sum( match, 3 ); % sum matches across rows of a--b
total_match = sum( match, 1 ); 
```

PS
[最好不要在 Matlab中使用`i`and`j`](https://stackoverflow.com/questions/14790740/using-i-and-j-as-variables-in-matlab)作为变量名。

# c# - 如何在 Metro 应用程序中打印 TextFile 或 TextBox 的内容？

> ID：15595706
> 
> 赞同：2
> 
> 时间：2013-03-24T06:05:47.350
> 
> 标签：c#, .net, xaml, microsoft-metro, windows-store-apps

我的 Metro 应用程序中有一个 TextBox 控件，需要能够简单地打印其内容。自从 Windows 8 Dev Preview 出现以来，我就一直在研究，但我仍然无法弄清楚。

我已经尝试过示例，阅读了其他答案并阅读了文档 - 一遍又一遍，一遍又一遍。这似乎是不可能的。那么，2年后呢？我提供我所有的声誉（好吧，在他们允许的范围内），希望有人能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T04:16:33.667

在这里，我创建了一个简单的帮助类，它可以帮助您打印`Textbox`带有格式的内容。你只需要调用类的静态方法`Printer`。GitHub 上的项目还包含测试应用程序。

```
await Printer.ShowPrintUIAsync(PrintPreview, MyTextBox, Guid.NewGuid().ToString()); 
```

`PrintPreview`是一个画布，必须在设备魅力中显示打印预览。您必须在 XAML 中声明。

`MyTextBox`是一个文本框对象，其文本内容将被打印。

`Guid.NewGuid().ToString()`是用于打印文档的文件名。（如果您通过打印创建 PDF 或 XPS 文件，将应用它。）

您可以通过[NuGet](https://www.nuget.org/packages/WinRT.TextboxPrintHelper/)添加助手类。如果你想增强我现有的帮助类，请在[GitHub 上fork](https://github.com/Xyroid/WinRT.TextboxPrintHelper)

# gnuplot - Gnuplot - 特定 x 和 y 点的网格

> ID：15595708
> 
> 赞同：0
> 
> 时间：2013-03-24T06:06:14.743
> 
> 标签：gnuplot, grid-layout

我想将 xtics 从数字重命名为一些字符串，我这样做了：

```
set xtics ("one" 1, "two" 2, ...) 
```

同时我想要网格，所以我使用了这个：

```
set grid back 
```

现在的问题是网格的制作使其垂直线位于 1、2 等处。是否可以在垂直线位于任意/不同位置的地方制作网格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T03:12:17.617

您可以将网格设置为仅在有小刻度的地方绘制。然后，您可以像设置主要刻度一样显式设置次要刻度：

```
set xtics ( "one" 1, "two" 2, "" 3 1 )
#           ^major   ^major   ^minor tick because the "level" is set to 1.
set grid mxtics
plot sin(x) 
```

您也可以使 mxtics 不显示：

```
set xtics scale 1,0 
```

# javascript - 将数据插入 Flot

> ID：15595709
> 
> 赞同：1
> 
> 时间：2013-03-24T06:06:26.917
> 
> 标签：javascript, jquery, mysql, ajax, flot

我很难在 Flot 图上显示一组数据。我正在使用 jQuery Ajax/PHP/MySQL 来执行此操作。

我用这个 PHP/MySQL 由数组创建：

```
 $result = mysql_query("SELECT * FROM happiness");
  $array = array();
  while($row = mysql_fetch_array($result)) {
    $array[] = $row[3];
    $array[] = $row[2];
  }

  echo json_encode($array); 
```

并通过 jQuery Ajax 将其传递给 Flot，如下所示：

```
$.ajax({                                      
      url: 'receive-happiness.php',   
      dataType: 'json',                      
      success: function(data)          
      {
            var graph_data = [data];              
            alert(graph_data);
            $.plot($("#graph"), [graph_data], options);
      }
    }); 
```

当我提醒`graph_data`时，我得到这个：

```
23,8,23,1,24,0,25,0,26,9,27,10,28,9 
```

但是当我检查我的 Flot 图时，它只显示了一个数据点`(23,8)`。出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T06:11:41.137

您的图形数据应该是一组分组的点坐标。

尝试这个：

```
$result = mysql_query("SELECT * FROM happiness");
$array = array();
while($row = mysql_fetch_array($result)) {
  $array[] = array($row[3], $row[2]);
}

echo json_encode($array); 
```

当你提醒你的图表数据时，它应该看起来像这样：

```
[ [23, 8], [23, 1], [24, 0], [25, 0], [26, 9], [27, 10], [28, 9] ] 
```

请参阅 Flot[数据格式](https://github.com/flot/flot/blob/master/API.md#data-format)文档。

# wysiwyg - 主题特定的 Wordpress 自定义字段

> ID：15595711
> 
> 赞同：0
> 
> 时间：2013-03-24T06:06:58.290
> 
> 标签：wysiwyg, custom-fields, wordpress, wpmu

我目前正在为客户构建一个 wordpress 多站点。我已经完成了创建 Theme-1 的方面 #1。Theme-1 是使用过多的 AdvancedCustomFields PLUGIN 构建的。

我正在构建 Theme-2，这是一个主要主题，将用于通过多站点选项创建的所有子站点。我遇到的问题是 AdvancedCustomFields 不再是一个选项，我需要将所有自定义直接构建到 functions.php 文件中。

是否可以直接通过主题创建自定义字段 - 无需使用插件？

我需要主题页面具有“左侧”“右侧”“页脚”作为所见即所得的编辑器。因此，如果有人去创建一个新页面，所有这些字段设置都默认存在。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T08:12:07.883

有可能使用[wp_editor](http://codex.wordpress.org/Function_Reference/wp_editor)函数来获得所见即所得的功能。在 WordPress stackexchange 网站上查看[这个问题。](https://wordpress.stackexchange.com/questions/49901/post-custom-metabox-textarea-using-wp-editor)它被演示为一个插件，但您可以轻松地将代码放入您的主题中。

# angularjs - 当布尔标志在控制器中重置时，ng-show 不起作用

> ID：15595712
> 
> 赞同：2
> 
> 时间：2013-03-24T06:06:58.387
> 
> 标签：angularjs, angularjs-directive

我有一个输入表单，我在其中使用`$http`控制器向服务器提交详细信息。成功返回后，我想提醒用户数据已保存。但这只是行不通，在努力了几个小时后我一无所知。

这是 HTML 代码：

用户界面代码：

```
<div class="alert alert-success span-5 offset3" ng-show="message">
    <button type="button" class="close" data-dismiss="alert">&times;</button>
    <strong>Success!</strong> The review has been successfully created.
</div> 
```

这是控制器逻辑，我正在翻转标志。

```
$http.post('reviews/create',jsonData)
.success(function (data) {
    $scope.message=true
}) 
```

响应出现在我已经测试过的成功块中，但是当我更改标志“消息”状态时，UI 屏幕上不会显示警报。ng-show 不会从控制器中完成的 $scope.message 中选择更改。请提出解决方案。我也尝试使用隐藏字段将消息制作为 ng-model，以便它在范围内。当我提取数据并成功提交到服务器时，我的视图在控制器中可见。

# iphone - 苹果推送通知在生产中不起作用

> ID：15595720
> 
> 赞同：24
> 
> 时间：2013-03-24T06:07:55.247
> 
> 标签：iphone, ios, push-notification, apple-push-notifications

我们完全被卡住了，请帮忙。

我和我的团队制作了一个 iPhone 应用程序，这是我们第一次在 iOS 上尝试。

一切都很好，直到我们提交了我们的应用程序并在应用程序商店中可用 - 推送通知服务无法正常工作。我在网上搜索并尝试按照人们的建议仔细检查我们的应用程序，但我找不到问题所在。所以这个问题贴在这里。

这些是我们所做的：

1.  我们构建应用程序，假设它被命名为“AppMaster”。

2.  我们在 iOS Provisioning Portal 上创建了 AppId，名为：“pushtest”。此 ID 在开发和生产中都启用了推送通知。

3.  我们从上面的 appId 创建了一个名为“AppMasterPushTest”的开发供应。此配置用于内部测试，团队中的每个人都将其安装在他们的 mac 上。

4.  我们的服务器是由 Java 实现的，我们使用了 java-apn 包。在测试过程中，我们下载了用于开发的认证文件并写出 .p12 文件，并使用该包的 api --withSandboxDestination() 和该 .p12 文件将我们的消息推送到“沙盒”服务器。测试顺利，收到通知。

5.  我以为我们已经准备好了，所以我们创建了另一个名为“AppMaster”的 AppId，并仅为生产启用了推送通知。此 Id 写在应用程序的包标识符中。

6.  在第 5 步中，我们从 AppId 为生产创建了另一个名为“appMaster”的 Provisioning，分发方法设置为“App Store”。下载它并重建应用程序。这个已提交给苹果，并在 app-stroe 上运行。

7.  服务器端，我们下载了生产认证并再次写出.p12文件。并通过使用api-withProductionDestination()编写程序将消息推送到生产服务器，其中.p12刚刚被写出。

8.  我们从 App Store 安装了该应用程序。遗憾的是，通知从未送达。

我们错过了什么吗？顺便说一句，我们在第 5 步中创建的 id 看起来像“XXX.com.company.appname”，但在应用程序的包标识符中，我们只是设置了“com.company.appname”部分没有前缀。这可能是问题吗？

欢迎任何想法。

请成为我们的救星。谢谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-24T17:18:15.713

上面的评论是不正确的。app ID 在 bundle ID 之前有一个前缀：

> 应用程序 ID 由应用程序的捆绑包 ID 组成，前缀为 Apple 生成的十字符代码。团队管理员必须输入捆绑 ID。对于证书，它必须包含特定的捆绑 ID；您不能使用“通配符”应用程序 ID。

您应该检查您的配置文件，以确保它包含正确的 aps 权利：

> 验证供应配置文件中的权利是否正确。为此，请在文本编辑器中打开 .mobileprovision 文件。该文件的内容采用 XML 结构。在 Entitlements 字典中找到 aps-environment 键。对于开发配置文件，该键的字符串值应该是开发；对于分发配置文件，字符串值应该是**production**。

您应该确保在向生产 APNS 服务器发送推送通知时使用生产设备令牌（在沙盒环境中工作的设备令牌在生产环境中不起作用）。

在将应用发布到应用商店之前，您应该使用 AdHoc 配置文件对其进行测试。AdHoc 配置文件适用于生产推送环境。

编辑 ：

关于设备令牌的一些报价：

来自[本地和推送通知编程指南](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html#//apple_ref/doc/uid/TP40008194-CH101-SW1)：

> 请注意，生产环境中的设备令牌和开发（沙盒）环境中的设备令牌不是相同的值。

来自[技术说明 TN2265](https://developer.apple.com/library/ios/#technotes/tn2265/_index.html)：

> 处理格式错误的通知
> 
> 如果推送服务接收到某种方式不正确的通知，简单的二进制接口会断开连接。您的提供商可能会将此视为 EPIPE 或管道损坏错误，以响应发送通知。另一方面，增强的二进制接口将在断开连接之前发送错误响应，其中包含有关通知错误的更详细信息。确保您的提供商正确捕捉并处理这些情况。
> 
> 最常见的问题是无效的设备令牌。如果令牌来自沙盒环境，例如当您在内部测试开发构建时，您无法将其发送到生产推送服务。每个推送环境都会为同一设备或计算机颁发不同的令牌。如果您确实将设备令牌发送到错误的环境，推送服务会将其视为无效令牌并丢弃通知。

最后，[这篇文章](http://redth.info/the-problem-with-apples-push-notification-ser/)很好地解释了当某些通知无效时（最常见的原因是设备令牌无效）如何向 Apple 发送多个通知，会导致某些有效通知也无法到达。

# algorithm - 图搜索算法，其中边缘可以被障碍物阻挡

> ID：15595722
> 
> 赞同：1
> 
> 时间：2013-03-24T06:08:13.967
> 
> 标签：algorithm, search, graph, path, shortest

我想在有向图的两个顶点之间找到一条低成本路径，其中每条边的成本相同。易于实现算法和执行时间非常重要，因此如果算法更简单、更快，我愿意为接近最优的解决方案牺牲一个最优解决方案。

边缘可以被障碍物阻挡。边缘被阻塞的概率是预先知道的。阻塞是相互独立的。当到达边缘头部的顶点时，发现边缘未被阻塞或阻塞。

我的问题类似于加拿大旅行者问题，但我的理解是随机规划问题的解决方案相对难以实现，并且找到最优策略所花费的时间可能相对较高。

目前，我正在考虑将问题转换为确定性问题，以便可以使用像 A* 这样的搜索算法来解决它。这是一个好方法吗？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T09:00:37.270

这个问题是一个部分可观察的马尔科夫决策过程（POMDP）。POMDP 可以确定性地求解，但通常使用随机算法来找到近似最优解。找到真正的最优策略没有多项式时间解，即使是近似解也可能很慢。从好的方面来说，一旦你找到了政策，遵循它就会很快。

一些可用的求解器：

*   [ZMDP](http://www.cs.cmu.edu/~trey/zmdp/)
*   [象征英仙座](https://cs.uwaterloo.ca/~ppoupart/software.html)
*   [应用程序](http://bigbird.comp.nus.edu.sg/pmwiki/farm/appl/)
*   [pomdp-解决](http://www.cassandra.org/pomdp/code/index.shtml)
*   [斯普德](https://cs.uwaterloo.ca/~jhoey/research/spudd/)

# haskell - 如何在haskell中定义树上的zip函数

> ID：15595723
> 
> 赞同：4
> 
> 时间：2013-03-24T06:08:39.513
> 
> 标签：haskell, tree

`data Tree a = Leaf a | Node (Tree a ) (Tree a)`

我不知道如何在 Haskell中编写树版本`zip`和函数。`zipWith`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T08:09:34.713

您的树不允许形成良好的空树 - 您可以制作一个狡猾的树，`Node undefined undefined`但这不是很好。正如其他人所评论的那样，简单的 treeZip 需要两棵树具有相同的形状才能获得“好”的结果。

```
zipTree :: Tree a -> Tree b -> Tree (a,b)
zipTree (Leaf a)     (Leaf b)     = Leaf (a,b)
ZipTree (Node l1 r1) (Node l2 r2) = 
    let l = zipTree l1 l2
        r = zipTree r1 r2 
    in Node l r 

-- Problems...
zipTree (Node _ _)  (Leaf _)   = Node undefined undefined
ZipTree (Leaf _)    (Node _ _) = Node undefined undefined 
```

请注意，简单的树压缩不仅会在“长度”上截断（如果形状不匹配，它将被截断） - 这比在“长度”上截断的列表更严重（严格来说，列表会在“形状”上截断，但“形状”必须始终相同）。

出于这个原因，如果我正在编写一个 Tree 库，我不会定义 zipTree。

# android - 带有 GridView 填充或自定义 GridView 的 ActionBar 覆盖以显示整个第一张图像？

> ID：15595726
> 
> 赞同：4
> 
> 时间：2013-03-24T06:09:12.877
> 
> 标签：android, gridview, android-actionbar, customization, padding

我有一个里面有 GridView 的活动。ActionBar 设置为覆盖模式。

现在，您只能看到第一张图像的一半，因为 ActionBar 将其切成两半。

如何向 GridView 的内部添加填充，以便它以您可以看到整个第一张图像的方式进行初始化？还是有其他方法？例如，我将如何扩展 GridView 以创建一个在前面具有内置可配置动态间隙的视图？

![例子](../Images/b4b5b395a0cdd5e73c4b29077f939519.png)

**示例**（虽然 ListView 而不是 GridView）：reddit 是有趣的应用程序：[https ://play.google.com/store/apps/details?id=com.andrewshu.android.reddit](https://play.google.com/store/apps/details?id=com.andrewshu.android.reddit)

**编辑：**每当用户以特定速率向下滚动或超过特定级别时，我都会*隐藏 ActionBar 。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T06:34:12.323

Try adding `android:layout_marginTop="?android:attr/actionBarSize"` to the parent of your `GridView`, or the `GridView` itself if it doesn't have one.

This will push your layout down so that it rests below the `ActionBar`.

**Edit**

You may want to conside using a `ListView` instead of a `GridView`. Reason being, you can easily achieve that effect by creating a fake header and then calling [`ListView.addHeaderView`](http://goo.gl/k0Vi5). You can't do the same with a `GridView`. What you're talking about can definitely be done with a `GridView`, but it will require you to subclass it and modify it quite a bit.

**Header**

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingTop="?android:attr/actionBarSize" /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T21:57:26.517

在您的 Activity 或 Fragment 中使用 a`ViewTreeObserver.OnGlobalLayoutListener`来确定您将显示的列数`GridView`（假设它根据屏幕大小和方向而变化），然后在您的`Adapter`实现中使用该数字。在`getView()`中，如果`position`小于列数，则返回一个高度与操作栏匹配的空视图，否则像往常一样绑定数据。

在 Google 的“高效显示位图”示例应用程序中，有一个很好的示例可以完全满足您的要求：[https ://developer.android.com/training/displaying-bitmaps/display-bitmap.html](https://developer.android.com/training/displaying-bitmaps/display-bitmap.html)

以下是相关源代码： [https ://android.googlesource.com/platform/development/+/master/samples/training/bitmapfun/src/com/example/android/bitmapfun/ui/ImageGridFragment.java](https://android.googlesource.com/platform/development/+/master/samples/training/bitmapfun/src/com/example/android/bitmapfun/ui/ImageGridFragment.java)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-25T16:11:48.907

让 ActionBar 处于覆盖模式，以下对我有用：

```
<GridView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:paddingTop="?android:attr/actionBarSize"
        android:clipToPadding="false"
        android:numColumns="auto_fit"
        android:columnWidth="120dp"
        android:verticalSpacing="8dp"
        android:horizontalSpacing="8dp"
        android:stretchMode="columnWidth"
        android:gravity="center"
        android:id="@+id/gridLibrary" /> 
```

这里最重要的几行是：**android:paddingTop**和**android:clipToPadding**。在我的应用程序中，当我使用上面的 gridview 打开一个活动时，第一行是完全可见的。然后，当我向下滚动时，ActionBar 隐藏，gridview 填满了整个屏幕。

# asp.net-mvc - ASP MVC4 Bundling and Mimification NOW 是否会在服务器上缓存已模仿的内容？

> ID：15595727
> 
> 赞同：0
> 
> 时间：2013-03-24T06:09:17.830
> 
> 标签：asp.net-mvc

我一直在阅读有关模拟的内容，我注意到早在 2012 年 6 月就有一个类似的问题，当时据说没有服务器端缓存。仍然是这种情况还是现在有一些缓存？

[MVC4 捆绑和模拟是否进行任何缓存？](https://stackoverflow.com/questions/11048011/does-mvc4-bundling-and-mimification-do-any-caching?rq=1)

# php - php mysql在图像之前加载网页

> ID：15595730
> 
> 赞同：0
> 
> 时间：2013-03-24T06:09:53.897
> 
> 标签：php, sql, image

如何让网页首先加载其结构（div、框架、整体外观），然后一张一张地加载图像？有点像这个网站的功能-> www.9gag.com

我使用 mysql 查询来显示图像，请参见下面的代码

```
function display_posts($page){
$start=($page*5)-4;
$query="SELECT * FROM `posts`   ORDER BY postid DESC LIMIT $start, 5";
$result = $mysqli->query($query) or die($mysqli->error.__LINE__);

while($row = $result->fetch_assoc()) {  

   $pic=$row['pic'];
   $postid=$row['postid'];

echo "<p class=\"pic_title\">".$row['title']."</p>";
echo "<a href='view.php?img=".$postid ."'><img src='". $pic ."' /></a> "; 
```

}

加载一个包含 5 个图像的完整页面大约需要 8 秒，但是当它加载时，网页会立即显示完整的所有图像，我希望它首先加载结构，然后是图像。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T06:48:27.570

一种方法是在不查找图像的情况下返回页面，然后在 paga 加载后使用 javascript Ajax 调用来请求图像数据。然而，这是相当多的悸动，去，用户仍然需要，等待图像。

我认为你应该问自己这 8 秒的去向。这对于 5 张图像来说是很多时间。使用您的浏览器工具，例如 ie9 中的 f12 或 Firefox 中的 firebug 来查看各个时间请求所花费的时间。

# jquery - 翻转对象插件在网页中无法正常工作

> ID：15595734
> 
> 赞同：0
> 
> 时间：2013-03-24T06:11:57.007
> 
> 标签：jquery, html, css

在下面的网页中，前 4 个对象翻转良好且平滑，而第 2 行中的 2 个对象有时甚至在鼠标悬停在第 2 行 2 个框之间的空白区域上时甚至会翻转，这可能会消失错误的。

[点击](https://dl.dropbox.com/u/141359479/cevents.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T06:47:13.090

尝试将此css属性与`!important`：

```
#nav-list-example li div {
  width: 200px;
  height: 300px;
  overflow: hidden;
  position: absolute;
  top: 0;
  left: 0 !important; //<-----this one with !important
} 
```

`left: 135px;`这导致了这个问题。按照上面的建议修复它。

# c++ - 停止递归算法

> ID：15595736
> 
> 赞同：0
> 
> 时间：2013-03-24T06:12:50.437
> 
> 标签：c++, recursion, permutation

有 10 个数字必须满足以下等式：

(a[0]+a[1]+a[3]+a[4]) =S

(a[9]+a[0]+a[7]+a[8]) =S

(a[2]+a[1]+a[9]+a[8]) =S

(a[2]+a[3]+a[5]+a[6]) =S

(a[8]+a[7]+a[5]+a[4]) =S

我在一个数组中有 10 个数字，通过使用递归排列算法，我尝试找到所有可能的排列来检查这些数字是否满足上述方程。一旦找到正确的排列，我希望程序返回 true 并停止生成其他排列。这是代码，但它总是返回false。例如对于数字 1,2,3,4,5,6,8,9,10,12 和 S=24，我们有一个答案：1,8,2,12,3,6,4,10,5 ,9 但算法仍然返回 false ！！！

```
bool permute(int *array,int i,int length, int S) { 

  if (length == i){

    if( check( array, S) )
            return true;
        else
        return false;   

  }
  int j = i;
  for (j = i; j < length; j++) { 
     swap(array+i,array+j);
     if( check( array, S) )
            return true;
     permute(array,i+1,length, S);

     swap(array+i,array+j);
     if( check( array, S) )
            return true;
  }

  return false;
}

bool check( int* a, int S){
    if((a[0]+a[1]+a[3]+a[4]) ==S && (a[9]+a[0]+a[7]+a[8]) ==S && (a[2]+a[1]+a[9]+a[8]) ==S && (a[2]+a[3]+a[5]+a[6]) ==S && (a[8]+a[7]+a[5]+a[4]) ==S)
            return true;

    return false;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T06:16:21.547

您必须解决退货状态。 `permute(array,i+1,length, S);`返回一个状态 - 检查它是否为真并在这种情况下返回： `if(permute(array,i+1,length, S)) return true;`.

# ruby-on-rails - Rails 3 cookie 未定义

> ID：15595737
> 
> 赞同：1
> 
> 时间：2013-03-24T06:14:07.407
> 
> 标签：ruby-on-rails, ruby, cookies

我有一个 Rails 3 博客。我希望每个帖子都有一个“喜欢”按钮。单击它将将此操作保存到数据库并存储到刚刚喜欢该帖子的用户的 cookie 中（再次禁止相同的操作）。

我写了一个简单的动作来做到这一点：

```
def like
  render :nothing => true

  id = params[:post_id]
  cookies.permanent[:like_history] ||= []

  unless cookies.permanent[:like_history].include? id
    cookies.permanent[:like_history] << id

    @post = Post.find(id)
    @post.update_column(:likes, @post.likes + 1)
  end
end 
```

但是`NoMethodError (undefined method '[]' for nil:NilClass)`当我尝试记录事情时，我得到了。它指向这一行：`cookies.permanent[:like_history] ||= []`好像 cookies.permanent 不是一个数组。

我在这里用 cookie 做错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T00:41:08.223

事实证明， ||= 运算符被视为 Rails 标准的“阅读”，这实际上是有道理的。你不能用 来“阅读” `cookies.permanent[:symbol]`，那是为了写作，你用 来阅读`cookies[:symbol]`。所以我修改了那行：

`cookies.permanent[:like_history] = "" unless defined? cookies[:like_history]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T06:40:01.417

我认为您存储的东西`cookies.permanent[:like_history]`不是`Array`. 因此，制作`nil`或`covert to array`使用`to_a`并尝试您的代码。

```
def like
  render :nothing => true
  cookies.permanent[:like_history] = nil #or cookies.permanent[:like_history] = cookies.permanent[:like_history].to_a 

  id = params[:post_id]
  cookies.permanent[:like_history] ||= []

  unless cookies.permanent[:like_history].include? id
    cookies.permanent[:like_history] << id

    @post = Post.find(id)
    @post.update_column(:likes, @post.likes + 1)
  end
end 
```

一旦它起作用，删除您添加的那条线。

# bash - 在bash中连接字符串

> ID：15595739
> 
> 赞同：1
> 
> 时间：2013-03-24T06:14:25.427
> 
> 标签：bash, unix, concatenation

我无法将这个字符串连接在一起。我的目标是拥有`/folder/p/t/e`

test.txt 包含字符串“test”。

```
cat test.txt|cd /folder/p/`awk '{print substr($,0,1)}'`/`awk '{print substr($0,1,1)}'` 
```

它正在输出`/folder/p/t/`，所以我认为它的第二个 substr 部分有问题。

谁能帮助阐明我如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T06:26:53.490

您的第一个`awk`实例正在捕获所有标准输入，因此您的第二个实例没有读取其中的任何内容。任何读取 stdin 的内容都必须是单个命令。

```
cat test.txt | cd /folder/p/`awk '{print substr($0,0,1)"/"substr($0,2,1)}'` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T06:27:40.470

```
FOO=$(< test.txt)
cd /folder/p/${FOO:0:1}/${FOO:1:1} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T06:20:39.860

你假设你的第二个电话`awk`会从 得到一些东西`test.txt`，但事实并非如此。文本 from`cat test.txt`在管道之后通过管道传输到命令，并且子 shell（第一个`awk`）中的命令接收所有输入，第二个没有输入`awk`，因为 kojiro 已经回答了。

虽然合并这两个`awk`命令将解决问题，但不能保证这将在其他 shell 中工作。因为很多人`bash`通常会与“shell”混淆，所以我认为值得注意的是，Beta 提供的更便携的解决方案。

# ruby-on-rails - IAP 后端最佳实践

> ID：15595740
> 
> 赞同：8
> 
> 时间：2013-03-24T06:14:44.793
> 
> 标签：ruby-on-rails, api, message-queue, in-app-purchase

我刚刚使用 IAP 制作了 iOS 应用程序来购买虚拟币（消耗品）。后端是 Ruby on Rails。我现在对整个解决方案有些担忧。

我当前的 IAP 流程描述如下：

*   第 1 步 - iOS 客户端向我们的后端发送请求并获取产品 ID。
*   第 2 步 - 客户通过带有第 1 步中的 ID 的 Store Kit 检索产品列表
*   第 3 步 - 用户点击购买，客户向 Store Kit 发送付款请求
*   第 4 步 - 完成交易后，客户端将收据令牌发送到我们的后端
*   第 5 步 - 服务器首先验证收据以确保它是有效的验证
*   STEP 6 - 服务器调用App Store验证收据并处理交换（在DB中充值帐户）
*   第 7 步 - 客户收到回复并显示账户余额

我之前从事过电子商务/支付解决方案，而 IAP 则采取另一种方式，尽管通常支付网关会将收据服务器发送到服务器以进行验证。而且我们总是有消息队列之类的解决方案来确保所有事务都是稳定和可维护的。

我的问题是：

1.  验证 IAP 收据的最佳做法是什么？如何避免我们服务器的验证中断？（例如，用户在客户端花钱完成交易，但在服务器验证收据时失败。不支持IAP恢复交易。）

2.  Apple IAP 更可能是一个完美的客户端解决方案。特别是在我的情况下，用户付款后，他想立即收到硬币，而不是我们告诉他交易正在处理并且他的帐户很快就会完成的情况。优先考虑在移动设备上拥有响应式用户体验。你还在服务器上使用消息队列的东西吗？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:26:03.840

您可能会发现[http://helios.io/](http://helios.io/)很有用。它结合了四个有用的 iOS 相关 gem，其中之一是[https://github.com/mattt/rack-in-app-purchase](https://github.com/mattt/rack-in-app-purchase)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-19T09:08:38.697

问题 1：根据[此处的 Apple 文档](https://developer.apple.com/library/ios/releasenotes/General/ValidateAppStoreReceipt/Chapters/ValidateRemotely.html#//apple_ref/doc/uid/TP40010573-CH104-SW1 "苹果的文档")，您应该始终在服务器上验证收据。有几个 ruby​​ gem 可以帮助在后端与 Apple 的服务器通信：

[https://github.com/gabrielgarza/monza](https://github.com/gabrielgarza/monza)

托管：[https ://getmonza.com](https://getmonza.com)

[https://github.com/nomad/venice](https://github.com/nomad/venice)

[https://github.com/nov/itunes-receipt](https://github.com/nov/itunes-receipt)

问题 2：这取决于您对欺诈的关注程度。如果您不验证收据，那么您将面临欺诈。我强烈建议在服务器端进行验证。

查看[此 WWDC 视频](https://developer.apple.com/videos/play/wwdc2014/303/)，了解有关应用内购买的基本知识。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-26T02:42:04.540

如果我正确理解了这个问题，看起来有一个名为 itunes-receipt 的宝石可以用于此目的。宝石可以在这里找到：[https ://github.com/nov/itunes-receipt](https://github.com/nov/itunes-receipt)

还有一个 NSScreencast 解决了这个问题，并且节目说明中的说明看起来相当完整。[http://nsscreencast.com/episodes/45-validating-iap-receipts](http://nsscreencast.com/episodes/45-validating-iap-receipts)

# sql-server - ORDER BY 的行为不符合预期

> ID：15595742
> 
> 赞同：1
> 
> 时间：2013-03-24T06:15:01.107
> 
> 标签：sql-server, sql-server-2008

**再会。**

**首先我有查询：**

```
 ;
    WITH ranked AS (
      SELECT
        p.id_price as p_id_price, 
        p.id_service as p_id_service, 
        p.name as p_name, 
        p.name_original as p_name_original, 
        p.id_producer_country as p_id_producer_country, 
        p.id_firm as p_id_firm, 
        f.name as f_name, 
        f.address as f_address, 
        f.phone as f_phone, 
        city.name as city_name, 
        pc.name as pc_name,
        ROW_NUMBER() OVER (
          PARTITION BY p.id_firm
          ORDER BY
            CASE  -- this criterion puts matching products before non-matching ones
              WHEN p.name like '%test%' COLLATE SQL_Latin1_General_Cp1251_CI_AS
              THEN 1 ELSE 2
            END,
            p.id_price  -- you may use any sorting criteria at this point,
                        -- just ensure it makes the results predictable
        ) AS rnk
      FROM Price p 
      left join Firm f 
        on f.id_service=p.id_service 
        AND f.id_city=p.id_city 
        AND f.id_firm=p.id_firm 
      left join City city 
        on city.id_city = p.id_city 
      left join Producer_country pc 
        on pc.id_producer_country = p.id_producer_country 
      WHERE p.id_city='73041' 
        AND p.include='1' 
        AND p.blocked='0' 
        AND f.blocked='0' 
        AND ( f.name like '%test%' COLLATE SQL_Latin1_General_Cp1251_CI_AS
           OR p.name like '%test%' COLLATE SQL_Latin1_General_Cp1251_CI_AS )
    )
    SELECT *
    FROM ranked
    WHERE rnk = 1 
ORDER  BY CASE WHEN f_name LIKE '%$..' THEN 0 ELSE 1 END,
              f_name
        ; 
```

**ORDER BY 不起作用：**

![结果](../Images/14bff6f039c1d5bd7da452b074085099.png)

**[结构表在这里](http://sqlfiddle.com/#!3/c4802/2)**

**我需要 f_name 在 $ 符号后按升序排序**

为什么`ORDER BY`行为不符合预期？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T06:17:40.187

`f.name`仅对`WITH`子句有效。当您想再次订购记录时，请使用提供的*别名*，

```
CASE WHEN f_name LIKE '%$..' THEN 0 ELSE 1 END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T07:18:09.897

经过进一步讨论，意识到我们需要用两种方式对同一个字符串进行排序。首先，如果它完全有一个`$`字符，那么第二个是字符后面的`$`字符串。鉴于`ORDER BY`将是：

```
ORDER BY 
  CASE WHEN f_name LIKE '%$%' THEN 0 ELSE 1 END, 
  SUBSTRING (name ,CHARINDEX('$' , name)+1, (LEN(name)) - CHARINDEX('$', name) ASC 
```

# php - 如何限制用户在单个页面上访问一次？

> ID：15595743
> 
> 赞同：0
> 
> 时间：2013-03-24T06:15:17.537
> 
> 标签：php, redirect

大家好，我讨厌在这里问愚蠢的问题，所以我希望这不是，我将如何限制某人访问我的下载页面？因此，如果他们尝试再次访问该页面（不止一次）以下载某些内容，它只会重定向或最好将下载链接更改为`link 2`然后`Link 3`，是否可以在没有数据库的情况下进行？

例如：

1.  首次访问 - 主链接
2.  第二次访问 - 链接 2
3.  第三次访问-链接 3
4.  4 及以上 访问无链接并重定向

也许用饼干？我真的不知道该怎么做，我已经用谷歌搜索了，但我的措辞不能在那里......

有这个名字或脚本吗？

谢谢你们的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T06:35:58.233

**A.** The best method to achieve the desired goal is `database`. Create a database table that contains two columns :

```
(1)Page Visitors IP
(2)The Last Download link used by the visitor to download
 file(contents) from your website. 
```

**B.** You can too achieve your goal with the help of [COOKIE](http://php.net/manual/en/reserved.variables.cookies.php).

```
setcookie("Visitor IP", "Download Link used by the Visitor", $expire); 
```

Everytime, visitors visit your website, fetch the visitor IP and check whether `$_COOKIE["Visitor IP"]` is set or not, if its set, then update the existing Cookie else create the new one.

However, using Cookie is not a convenient way, as there might be a case where

```
 Browser does NOT Support Cookies.
  Client  alter the Cookies value and use the previous link for download. 
```

So, most simplest and elegant way to do it is, using `Database`.

**UPD:** **How easy is it to code/setup a database?**

Setting up/Connecting to a database in php is pretty easy. Refer the following [LINK](http://php.net/manual/en/function.mysql-connect.php)

Coding is pretty easy as well.

-Whenever the visitor click on the download link, fetch Visitors IP ($fetched_IP) by either POST or GET method. Also fetch the Link ($URL) visitor has clicked.

-`Query the database` [eg: [Select](http://www.w3schools.com/php/php_mysql_select.asp) DB_IP,LASTLINK from database WHERE DB_IP=$fetched_IP.....]

-If [RowCount](http://www.php.net/manual/en/function.mysql-num-rows.php)>0, then IP`($fetched_IP`) exists in database. Check the Last Link visited by the `$fetched_IP`.

-If `LASTLINK!=$URL`, then allow him download the content from `$URL`.[Update](http://www.w3schools.com/php/php_mysql_update.asp) the LAST_LINK column in database table by `$URL`.

-If rowcount==0,(`New User`) [Insert](http://www.w3schools.com/php/php_mysql_insert.asp) a row that contains DB_IP=$fetched_IP(Visitor IP) and LAST_LINK=$URL.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T09:00:04.477

一个简单的方法是使用哈希表（关联数组）。当他们满足访问文件的条件时，使用唯一的 url 作为键，文档路径作为值，向哈希表添加一个条目。将其保存到会话中。当他们访问 url 时，页面会检查 url 是否在哈希表中。如果是，请从哈希表中删除 url 并流式传输文件。如果您想允许多次使用，您可以将倒计时变量与 url 一起存储，该变量将随着每次访问而递减，并且仅在计数为零时从哈希表中删除 url。

# javascript - 自定义下拉菜单不适用于链接

> ID：15595745
> 
> 赞同：2
> 
> 时间：2013-03-24T06:15:41.197
> 
> 标签：javascript, html, css, drop-down-menu

我正在尝试使用我找到的教程制作自定义菜单。

我遇到的问题不是实现，而是阻止我点击链接的东西。什么时候，我“打开”了菜单，当我点击说链接时，它只是关闭了菜单，很快我看到它突出显示了整个框而不是链接。

这里有几张截图。您可以将鼠标悬停在链接上（悬停时它们会变成紫色），但是当您单击单个链接时，它往往只是单击整个菜单而不是将您发送到所述页面。但是，当我将鼠标悬停在它上面时，我可以看到它在我的浏览器左下角显示链接。我似乎无法弄清楚点击退出而不是将您发送到页面的 url 发生了什么。

[http://cl.ly/image/0S2F2c3h3g1o](http://cl.ly/image/0S2F2c3h3g1o) （悬停屏幕截图）

[http://f.cl.ly/items/3P1h27323B203E2J0N41/clickout.png](http://f.cl.ly/items/3P1h27323B203E2J0N41/clickout.png) （点击）

当我尝试点击任何链接时，我只会看到这个蓝色框，它会关闭菜单，而不是将您发送到链接页面。

这是我连接的 HTML

```
 <!-- MOBILE MENU / -->
<nav id="mobile-menu">
    <div id="mobmenu" class="dropdown-menu" tabindex="1">
        <ul class="dropdown" tabindex="1">
            <li><a href="/about">ABOUT</a></li>
            <li><a href="/work">WORK</a></li>
            <li><a href="/notes">NOTES</a></li>
        </ul>
    </div>  
</nav>
<!-- / MOBILE MENU --> 
```

这是Javascript。

```
 function DropDown(el) {
            this.dd = el;
            this.opts = this.dd.find('ul.dropdown > li');
            this.val = '';
            this.index = -1;
            this.initEvents();
        }
        DropDown.prototype = {
            initEvents : function() {
                var obj = this;

                obj.dd.on('click', function(event){
                    $(this).toggleClass('active');
                    return false;
                });

                obj.opts.on('click',function(){
                    var opt = $(this);
                    obj.val = opt.text();
                    obj.index = opt.index();
                });
            },
            getValue : function() {
                return this.val;
            },
            getIndex : function() {
                return this.index;
            }
        }

        $(function() {

            var dd = new DropDown( $('#mobmenu') );

            $(document).click(function() {
                // all dropdowns
                $('.dropdown-menu').removeClass('active');
            });

        });

    </script> 
```

和CSS。

```
#mobile-menu {
    width: 320px;
}
.dropdown-menu {
    background: #050607 url(images/menu_closed.png) no-repeat center top;
    border: none;
    color: #FFF;
    cursor: pointer;
    height: 50px;
    font-weight: bold;
    margin-top: 17px;
    outline: none;
    position: fixed;
    -webkit-appearance: none;
    width: 320px;
    z-index: 9999;
}
.dropdown-menu::after {
    content: "";
    width: 0;
    height: 0;
    position: absolute;
    right: 16px;
    top: 50%;
    margin-top: -6px;
}
/* ACTIVE STATE */
.dropdown-menu .dropdown {
    background: #050607;
    height: 1000px;
    list-style: none;
    overflow: hidden;
    pointer-events: none;
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    opacity: 0.0;
}
.dropdown-menu .dropdown  li { 
    position: relative; 
    top: 10px; 
    z-index: 99;
}
.dropdown-menu .dropdown li a {
    border-top: 1px solid #1f1f1f;
    color: #FFF;
    display: block;
    font-family: 'Open Sans', sans-serif;
    font-size: 30px;
    font-weight: 200;
    letter-spacing: 8px;
    pointer-events: visible;
    padding: 15px 25px 15px 25px;
    text-align: center;
    text-decoration: none;
    z-index: 9999999999999999999999;
}
.dropdown-menu .dropdown li:nth-child(5)  {
    font-size: 15px;
    font-weight: 100;
    letter-spacing: 2px;
    text-align: center;
}
.dropdown-menu .dropdown li:hover a { background: #050607; color: #605e90; }
.dropdown-menu.active .dropdown {
    -moz-animation: fadein .3s linear;
    -webkit-animation: fadein .3s linear;
    -ms-animation: fadein .3s linear;
    animation: fadein .3s linear;
    pointer-events: auto;
    opacity: 1.0;
    z-index: 999999 !important;
}
.dropdown-menu.active:active {
    pointer-events: auto;
}
.dropdown-menu.active::after { 
    border-color: #000; 
    margin-top: -3px; 
}
.dropdown-menu.active {
    background: #050607 url(images/menu_open.png) no-repeat center top;
    outline: none;
} 
```

谢谢！:3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T06:34:43.967

After the `obj.opts` click event handler fires, the `obj.dd` click event handler will also fire. To prevent this, call the `stopPropagation` function of the event object passed to the handler.

See here for a working example: [http://jsfiddle.net/hwTUZ/1/](http://jsfiddle.net/hwTUZ/1/)

# java - 将 apache 转发到端口 8080 时遇到问题

> ID：15595749
> 
> 赞同：0
> 
> 时间：2013-03-24T06:16:05.340
> 
> 标签：java, php, javascript, apache, tomcat

嘿伙计们，我正在尝试进行的设置有一点问题。

我在 8080 上运行了 tomcat，在 80 上运行了 apache2，对于如何让 apache 转发到 tomcat 以获取特定文件，我有点迷茫。我正在将 webgoat 设置为我的 apache 主页上的链接

前任：

```
127.0.0.1 -> Goes to homepage
Homepage has links to webgoat at 127.0.0.1:8080/WebGoat/attack 
```

我正在尝试将其设置为自己的家庭渗透测试服务器，我想尝试添加尽可能多的功能，因为让 php 与 tomcat 一起工作有点……不正常，我宁愿让 php 运行使用 apache2，然后为我的 java 类型文件链接到 tomcat。

谢谢。

编辑：是的，我以前看过这里的其他问题，似乎它们与我不一样。那些已经很老了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T07:17:32.500

`.htaccess`在你的 apache 上创建一个文件并添加：

```
# Redirect old file path to new file path
Redirect /olddirectory/oldfile.html http://example.com:8080/newdirectory/newfile.html 
```

# ruby - 即使在 method_missing 处理之后也未定义的方法

> ID：15595756
> 
> 赞同：0
> 
> 时间：2013-03-24T06:16:48.403
> 
> 标签：ruby, method-missing

我正在研究 Ruby 并尝试实现`method_missing`，但它不起作用。例如，我想在之后打印方法名称，`find_`但是当我在 Book 实例上调用它时，ruby 会引发“未定义的方法'find_hello'”。

TEST_05.RB

```
module Searchable
    def self.method_missing(m, *args)
        method = m.to_s
        if method.start_with?("find_")
            attr = method[5..-1]
            puts attr
        else
            super
        end
    end
end

class Book

    include Searchable

    BOOKS = []
    attr_accessor :author, :title, :year

    def initialize(name = "Undefined", author = "Undefined", year = 1970)
        @name = name
        @author = author
        @year = year
    end
end

book = Book.new
book.find_hello 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T06:25:15.540

您正在调用`object`查找方法的`instance_level`方法。所以你需要定义 instance_level`method_missing`方法：

```
module Searchable
    def method_missing(m, *args)
        method = m.to_s
        if method.start_with?("find_")
            attr = method[5..-1]
            puts attr
        else
            super
        end
    end
end

class Book

    include Searchable

    BOOKS = []
    attr_accessor :author, :title, :year

    def initialize(name = "Undefined", author = "Undefined", year = 1970)
        @name = name
        @author = author
        @year = year
    end
end

book = Book.new
book.find_hello   #=> hello 
```

当您使用`self`with 方法定义时。它被定义为`class level`方法。在您的情况下`Book.find_hello`将输出`hello`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T06:27:50.517

您已在 上定义`method_missing`为*类*方法`Searchable`，但您试图将其作为*实例*方法调用。要按原样调用该方法，请针对该类运行它：

```
Book.find_hello 
```

如果您的目的是从整个图书收藏中找到一些东西，那么这是完成的规范方式。ActiveRecord 使用这种方法。

类似地，您可以有一个`find_*`实例方法来搜索当前书籍实例中的某些内容。如果这是您的意图，请更改`def self.method_missing`为`def method_missing`.

# regex - PHP utf8 preg_replace

> ID：15595757
> 
> 赞同：0
> 
> 时间：2013-03-24T06:17:26.330
> 
> 标签：regex, utf-8, preg-replace

在这里的一篇文章中，我发现了这个表达式

```
 // Replaces every non-letter, non-digit with a dash
    $str = preg_replace('/(?=\P{Nd})\P{L}/u', '-', $str); 
```

它工作得很好，但如何保持基本的标点符号和空格？

我试过这样的东西

```
 $str = preg_replace('/(?=\P{Nd})\P{L}\P{P}/u', '-', $str); 
```

或者

```
 $str = preg_replace('/[^\P{Nd}\P{L}\P{P}$]/u', '-', $str); 
```

或者

```
 $str = preg_replace('/[\P{Nd}\P{L}\P{P}]/u', '-', $str); 
```

没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T09:12:25.627

怎么样：

```
[^\p{N}\p{L}\p{P}\s] 
```

用法：

```
$str = preg_replace('/[^\p{N}\p{L}\p{P}\s]/u', '-', $str); 
```

# laravel - Laravel 4：将数据从 make 传递给服务提供者

> ID：15595760
> 
> 赞同：6
> 
> 时间：2013-03-24T06:17:39.063
> 
> 标签：laravel, laravel-4

下面的代码说明了一切......

```
// routes.php
App::make('SimpleGeo',array('test')); <- passing array('test')

// SimpleGeoServiceProvider.php
public function register()
{
    $this->app['SimpleGeo'] = $this->app->share(function($app)
    {
        return new SimpleGeo($what_goes_here);
    });
}

// SimpleGeo.php
class SimpleGeo 
{
    protected $_test;

    public function __construct($test) <- need array('test')
    {
        $this->_test = $test;
    }
    public function getTest()
    {
        return $this->_test;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T09:40:53.767

您可以尝试将带有参数的类直接绑定到您的应用容器中，例如

```
<?php // This is your SimpleGeoServiceProvider.php

use Illuminate\Support\ServiceProvider;

Class SimpleGeoServiceProvider extends ServiceProvider {

    public function register()
    {
        $this->app->bind('SimpleGeo', function($app, $parameters)
        {
            return new SimpleGeo($parameters);
        });
    }
} 
```

保持不变您的 SimpleGeo.php。你可以在你的 routes.php 中测试它

```
$test = App::make('SimpleGeo', array('test'));

var_dump ($test); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T02:50:01.500

您需要将测试数组传递给服务提供者内部的类

```
// NOT in routes.php but when u need it like the controller
App::make('SimpleGeo'); // <- and don't pass array('test')

public function register()
{
    $this->app['SimpleGeo'] = $this->app->share(function($app)
    {
        return new SimpleGeo(array('test'));
    });
} 
```

**你的控制器.php**

```
Public Class YourController
{
    public function __construct()
    {
        $this->simpleGeo = App::make('SimpleGeo');
    }
} 
```

# java - 获取图像的顶点？

> ID：15595762
> 
> 赞同：1
> 
> 时间：2013-03-24T06:17:56.487
> 
> 标签：java, math, graphics

我正在使用精灵艺术，我需要为碰撞检测器生成一个多边形（顶点数组）。

我有一种`getPixel(x, y)`方法可以用来获取像素的颜色。我不需要任何花哨的颜色检测或任何东西，只需要实心像素和透明像素。在我的大脑开始融化之前，这是我开始的：

```
boolean[] hasColor = new boolean[size];

for (int i = 0; i < size; i++) {
    int row;
    row = i % width;
    if ((pixmap.getPixel(i, row) != 0) || (pixmap.getPixel(row, i) != -256)) {
        hasColor[i] = true;
    } else {
        hasColor[i] = false;
    }
} 
```

这应该跟踪哪些像素是空的，哪些不是。但我不知道我应该从这里去哪里。

有没有算法或我可以用来提供帮助的东西？有人可以提供输入吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:54:28.823

What you have is raster artwork.

What you need is a vector outline.

Converting from vector to raster is easy, raster to vector, not so much.

Here is one possible workflow:

1.  Convert your artwork into a black-and-white image (like your pixel color present/not-present matrix).
2.  Use Adobe Illustrator's "Live Trace" feature to vectorize this image.
3.  Export the outline polygon into a format that you can read back easily.
4.  Use this as your input for the collision detection.

Here's another approach:

A) Assume that the outline looks like a hexagon, like this:

```
 *****
      *     *
     *       *
    *         *
     *       *
      *     *
       ***** 
```

B) Define "fit" as the goodness of an outline, calculated by checking what percentage of the pixels are inside the hexagon (does not have to be the regular-shaped figure shown above). C) Change the positions of the vertices, until you find an optimum fit (or until you get tired).

Step (C) is, of course, the hardest one. Plus, if your sprite needs more vertices, you may need to start out with an octagon/n-gon instead.

# php - 从 json 字符串中选择一个节点

> ID：15595764
> 
> 赞同：3
> 
> 时间：2013-03-24T06:18:02.123
> 
> 标签：php, json

我正在尝试使用此页面上显示的谷歌翻译 API...

[https://developers.google.com/translate/v2/using_rest](https://developers.google.com/translate/v2/using_rest)

当我替换我的 API 密钥时，它可以正常工作并显示如下所示的翻译文本。

获取[https://www.googleapis.com/language/translate/v2?key=INSERT-YOUR-KEY&target=de&q=Hello%20world](https://www.googleapis.com/language/translate/v2?key=INSERT-YOUR-KEY&target=de&q=Hello%20world)

```
{
    "data": {
        "translations": [
            {
                "translatedText": "Hallo Welt",
                "detectedSourceLanguage": "en"
            }
        ]
    }
} 
```

我只想使用 PHP 返回文本，即“Hallo Welt”。

我使用了 json_decode 函数，但它返回了所有内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T06:24:00.847

```
$url = "https://www.googleapis.com/language/translate/v2?key=INSERT-YOUR-KEY&target=de&q=Hello%20world";
$data = file_get_contents($url);
$json = json_decode($data);

echo $json->data->translations[0]->translatedText; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T06:24:09.693

```
$object = json_decode($yourJSONString);
echo $object->data->translations->translatedText; 
```

使用[`json_decode()`](http://php.net/manual/en/function.json-decode.php)后，您只需使用生成的对象，但您可以使用任何其他 PHP 对象。

# java - 通过 JMockit 调用私有方法来测试结果

> ID：15595765
> 
> 赞同：18
> 
> 时间：2013-03-24T06:18:04.967
> 
> 标签：java, junit, jmockit, private-methods

我正在使用 JMockit 1.1，我想做的就是调用一个私有方法并测试返回值。但是，我无法从[JMockit De-Encapsulation](http://jmockit.googlecode.com/svn/trunk/www/tutorial/BehaviorBasedTesting.html#deencapsulation)示例中准确理解如何执行此操作。

我要测试的方法是此类中的私有方法：

```
public class StringToTransaction {
   private List<String> parseTransactionString(final String input) {
      // .. processing
      return resultList;
   }
} 
```

我的测试代码如下。

```
@Test
public void testParsingForCommas() {
   final StringToTransaction tested = new StringToTransaction();
   final List<String> expected = new ArrayList<String>();
   // Add expected strings list here..
   new Expectations() {
      {
         invoke(tested, "parseTransactionString", "blah blah");
         returns(expected);
      }
   };
} 
```

我得到的错误是：

> java.lang.IllegalStateException：此时缺少对模拟类型的调用；请确保此类调用仅在声明合适的模拟字段或参数之后出现

也许我在这里误解了整个API，因为我不认为我想模拟类..只是测试调用私有方法的结果。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-25T05:23:11.353

我认为你让这太复杂了。您根本不应该使用 Expectations 块。您需要做的就是这样的：

```
@Test
public void testParsingForCommas() {
   StringToTransaction tested = new StringToTransaction();
   List<String> expected = new ArrayList<String>();
   // Add expected strings list here..

   List<String> actual = Deencapsulation.invoke(tested, "parseTransactionString", "blah blah");
   assertEquals(expected, actual);
} 
```

基本上，通过 Deencapsulation 调用私有方法并测试实际是否等于预期。就像方法是公开的一样。没有进行任何模拟，因此不需要 Expectations 块。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T09:56:57.870

在这一点上，我不知道 JMockit 是否可以或应该用于此。测试我的私有方法可以用普通的反射来完成，尽管我开始这个练习是为了了解 JMockit（并测试我的代码）。如果 JMockit 不能用于此，这里是我可以使用反射的方法。

```
@Test
public void testParsingForCommas() throws Exception {
   StringToTransaction tested = new StringToTransaction();
   ArrayList<String> expected = new ArrayList<>();
   expected.add("Test");

   Method declaredMethod =
         tested.getClass().getDeclaredMethod("parseTransactionString",
               String.class);
   declaredMethod.setAccessible(true);
   Object actual = declaredMethod.invoke(tested, "blah blah");
   assertEquals(expected, actual);
} 
```

调用在`setAccessible(true)`这里很重要，否则`invoke`调用私有方法时会爆炸。

```
declaredMethod.setAccessible(true); 
```

但是你想知道什么是真正的酷吗？如果你不打电话`setAccessible(true)`，它会炸毁一个`java.lang.StackOverflowError`！:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-25T02:46:23.577

由于最新的 Jmockit 中不允许模拟私有方法。可以模拟该私有方法中使用的 API 作为一种**解决方法**，而不是模拟私有方法。

*此解决方法也可以视为最终解决方案。*

**示例：**
实际类：

```
class A {

  private int getId(String name){  //private method
      return DAOManager.getDao().getId(name);  //Call to non-private method can be mocked.
  }
} 
```

测试类：

```
public class ATest{

  @Before
  public void setUp(){
    new MockDAOManager();
  }

  //Mock APIs used by the private method `getId`.
  public static class MockDAOManager extends MockUp<MockDAOManager>{
     static mocked_user_id = 101;

     @Mock
     public DAOManager getDao() throws Exception{
          return new DAOManager();
     }

     @Mock
     public Integer getId(String name){
         return mocked_user_id;
     }
  }
} 
```

**笔记：**

*   如果您没有这样的逻辑（*私有方法调用另一个非私有方法*），那么您可能必须重构您的代码，否则这将不起作用。
*   这里`DAOManager.getDao().getId(name)`不是私有 API。
*   可能需要模拟该私有方法使用的所有 API。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-30T18:19:32.663

正如@Jeff Olson 所提到的，您还可以通过声明它们来调用 bean 的私有方法`@Tested`。

这是一个例子：

```
// Java

    @Tested
    private YourServiceImplClass serviceImpl;

    @Test
    public void testPrivateMethod() {

          List<String> expected = new ArrayList<String>();
          // Add expected strings list here..

          List<String> actual = Deencapsulation.invoke(serviceImpl, "yourPrivateMethod", "arguments");
          assertEquals(expected, actual);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-17T01:58:54.010

从 1.35(?) 开始，jmockit 删除了该辅助方法。因为它不再有用（我不太明白）

但是，是的，此实用程序在其他地方可用

```
org.springframework.test.util.ReflectionTestUtils 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-03-24T06:23:54.913

为什么要直接测试私有方法？大多数情况下，API 方法（即公共接口方法）是单元测试的，因为私有方法也将与它们一起**被间接测试。**您可以将**断言语句与来自私有方法的预期值**放在公共方法中调用它们的位置。因此，如果断言失败，您可以确定私有方法存在一些问题。所以你不需要单独测试它。

# android - 在真实设备上运行 eclipse 不起作用

> ID：15595766
> 
> 赞同：0
> 
> 时间：2013-03-24T06:18:15.597
> 
> 标签：android, eclipse

我已经通过usb插入了我的手机，并对其进行了调试。我会点击运行，但它只会说在运行方式下不适用。如果我拔下手机并重新插入，有时 android 应用程序将成为运行方式下的一个选项，但它不会做任何事情。我是新手，所以我不完全确定该怎么做。我有一个 S3，如果相关的话，我正在 Mac OS X 上执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T06:32:16.017

右键单击项目文件夹（在 Mac 上按 ctrl 单击），然后从上下文菜单中选择**run as... > an android application**。

这仅适用于项目文件夹或包名称，而不适用于其他任何地方。这个 Eclipse 鼠标上下文菜单非常挑剔。

您之前描述的与手机的实际插入无关。是的，adb/Eclipse 可能看不到您的手机，但即使没有插入手机，您仍然应该能够以... >鼠标上下文菜单中**的 android 应用程序运行，**因为您将使用相同的命令启动模拟器（或者如果不存在兼容的模拟器，则该命令只会启动 AVD 管理器，让您创建适当的模拟器来进行测试）。

# linux-kernel - 完成对象竞争条件

> ID：15595768
> 
> 赞同：2
> 
> 时间：2013-03-24T06:18:25.547
> 
> 标签：linux-kernel

如果在*任务 A*`complete_all()`对完成对象执行之前在完成对象上调用（来自*任务 B*）会发生什么？是否有一些 API 可以查找对象在等待时是否已经完成并立即返回？一种方法是使用在发送消息之前锁定并在等待之前解锁的。该锁需要在之前获取并在之后释放，但想知道是否有更清洁/更好的方法。欢迎任何想法。*`wait_for_completion()``mutex``complete_all()`*

 ***更多上下文：** *任务 A初始化完成对象，向**任务 B*发送请求以及完成对象的地址，然后等待完成。*任务 B*在收到消息后进行一些处理，然后`complete_all()`对完成对象进行处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:40:48.157

如果`complete()`或`complete_all()`之前`wait_for_completion()`为特定的完成对象调用，`wait_for_completion()`则将立即返回。完成对象大致类似于信号量：

*   在内部，完成对象有一个`done`初始化为 0 的计数器。

*   `wait_for_completion()`休眠直到`done > 0`（如果`done`已经大于 0，则立即继续），并`done`在返回之前自动递减。

*   `complete()`递增`done`并唤醒第一个在`wait_for_completion()`.

*   `complete_all()`设置`done`为`UINT_MAX / 2`（实际上是无穷大）并唤醒睡在`wait_for_completion()`.

因此，如果我正确理解您的问题，则无需额外锁定；完成对象的内部`wait.lock`自旋锁已经同步了计数器访问，以便您担心的情况得到正确处理。*

# c++ - 实施“窗口”制度和“不删除自我”规则

> ID：15595772
> 
> 赞同：1
> 
> 时间：2013-03-24T06:19:15.333
> 
> 标签：c++, oop

我一直在尝试用 C++ 编写一种用于游戏的简单“窗口”系统，它在游戏区域中绘制可以有按钮等的窗口（在游戏自己的图形内部，即不是操作系统的 GUI 窗口）。窗口对象（这里称为“类 Window”）具有一些事件方法，例如按键，以及在接收到该事件时挂钩要调用的处理程序的能力。

窗口被（或将被）收集在“窗口管理器”中，并且窗口对象将具有“close()”成员，该成员将调用父窗口管理器的窗口删除例程来删除自身。一个连接到，比如说，窗口上的按钮的事件处理程序可能会调用这个例程来关闭窗口（想象一个“OK”框）。

问题是这听起来像是一个 " `delete *this;`" 声明，我听说这是一个*no-no*。确实，它不会*直接*这样做，但效果是一样的：一个对象有一个成员函数会导致它自己的销毁（例如“close()”函数，或者触发处理程序的事件函数导致“close()”函数被调用。）。如果这很糟糕，那么设计它的更好方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T06:46:29.717

**对象删除自身并没有错。**您必须简单地告诉窗口管理器从它的集合中删除该窗口，然后再删除。如果您让窗口管理器删除窗口对象，那就更好了。

如果你真的想避免这种行为，你可以在`bool dead;`每个初始化为`false`. 当要关闭窗口时，设置`this->dead = true;`. 每一帧，让窗口管理器遍历它的窗口并删除那些死掉的窗口。

请注意，此解决方案仍然无法修复引用已删除窗口的外部系统引起的错误，但它确实具有集中删除窗口的优势。

我设计了很多游戏的窗口系统，根据我的经验，允许窗口删除自己是一个非常优雅的解决方案，即使它更容易出错。

一个最小的例子：

```
class Window
{
  public:
    void keyPressCallback(int c)
    {
      if (c == KEY_ESC)
      {
        manager.destroy(this);
        return;
      }
    }
    WindowManager& manager;
};

class WindowManager
{
  public:
    void destroy(Window* target)
    {
      delete target;
      windows.erase(std::find(windows.begin(), windows.end(), target));
    }
    std::vector<Window*> windows;
}; 
```

只要没有指向该窗口的剩余指针，此方法就完全安全且语义健全。当窗口收到关闭信号时，它会自行关闭。

`dead`带有标志的相同示例：

```
class Window
{
  public:
    Window() : dead(false) {}
    void keyPressCallback(int c)
    {
      if (c == KEY_ESC)
      {
        dead = true;
        return;
      }
    }
    bool dead;
};

class WindowManager
{
  public:
    void cleanup()
    {
      for (auto iter = windows.begin(); iter != windows.end(); ++iter)
      {
        if (iter->dead) windows.erase(iter);
      }
    }
    std::vector<Window*> windows;
}; 
```

# css - 使段落文本填充容器

> ID：15595775
> 
> 赞同：3
> 
> 时间：2013-03-24T06:19:36.447
> 
> 标签：css, layout

我见过一个属性，它允许你用文本填充容器的整个宽度，ala 杂志样式。它只是增加了单词之间的空间以适应额外的空间。

这是什么属性？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T06:24:12.030

你在想`text-align: justify`。

```
div {
    text-align: justify;
}
```

```
<div>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin nec nisl ipsum, at ullamcorper justo. Vivamus ac dui lorem. Aliquam nec diam urna, in semper augue. Etiam commodo dui velit. Vestibulum in nibh nulla, a feugiat justo. Proin accumsan, tellus et condimentum laoreet, lacus lorem consequat nisi, ac fermentum velit eros at metus. Aliquam lacinia mollis felis, vel pretium nulla condimentum consectetur. Quisque in mattis nibh. Nunc adipiscing tincidunt elit, vitae pellentesque felis molestie ac. Fusce vestibulum dui in nibh gravida ut placerat ligula porta. Ut sem lectus, condimentum nec tincidunt a, imperdiet vitae risus.</div>
```

# github - GitHub：结账有什么作用？

> ID：15595778
> 
> 赞同：6
> 
> 时间：2013-03-24T06:20:17.093
> 
> 标签：github

我来自 perforce 背景，试图了解 gitHub。

在 Perforce 中，当我“签出”某些内容时，它会让其他用户知道我正在处理该文件。结帐在 Git 中的工作方式是否相同？

好像您不签出文件而是签出分支？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T06:28:04.877

`checkout`在 Perforce 中大致等同于`clone`在 git 中，但在像 git （甚至 SVN ）这样的 VCS 中，结帐不会向其他人发出锁定信号，表明您正在处理它。任何人都可以克隆一个 git repo 并对其进行处理，而无需考虑还有谁在处理它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T06:23:10.670

通常，签出分支并不意味着任何人都会收到通知。它只是意味着您正在从一个代码分支切换到另一个代码分支，可能还会根据您的参数在该过程中创建一个新分支。

有关结帐的更多信息，请参阅[`git checkout`](https://www.kernel.org/pub/software/scm/git/docs/git-checkout.html)文档。

# ajax - jquery表单插件不起作用

> ID：15595779
> 
> 赞同：0
> 
> 时间：2013-03-24T06:20:38.877
> 
> 标签：ajax, jquery, jquery-plugins, jquery-forms-plugin

我是一个新手程序员。我被一个简单的代码困了两天。我尝试使用 jquery 表单插件将表单提交到另一个页面并从该页面获得反馈。问题是插件不起作用。表单正常提交，没有反馈。这是代码

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script> 
<script src="http://malsup.github.com/jquery.form.js"></script>

<div id='preview'></div>
<form  action='ajaxcall.php' id='upload_pic' enctype='multipart/form-data' method='post'>
<input type='file' id='pic' name='picture'>
<input type='submit' id='sub'>
</form>

var options=
{
target:'#preview',
url:'ajaxcall.php'

};

$(document).ready(function(){
$("#sub").click(function(){
    $('#preview').html("<img src='images/loader.gif' alt='Loading.....'/>");
    $('#upload_pic').ajaxForm(options).submit();
    });
}); 
```

这是我的 ajaxcall.php 页面代码

```
 if(!empty($_FILES['picture']['size']))
 {
echo "<img src='images/197.jpg'>";

 } 
```

期望是回显图像会反馈，但页面只是重定向到 ajaxcall.php page.ajaxForm() 函数不起作用。但是为什么？请帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T06:27:13.217

只需将您的提交按钮替换为普通按钮，因为您已经从单击处理程序以编程方式提交表单，因此请替换以下 html：

```
<input type='submit' id='sub'> 
```

对于这个：

```
<input type='button' id='sub'> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T04:52:30.303

使用这些代码而不是您的脚本代码。抱歉回复晚了

```
$(document).ready(function(){
$("#sub").click(function(){
       var options=
       {
          target:'#preview',
          url:'ajaxcall.php' 
       };
       $('#preview').html("<img src='images/loader.gif' alt='Loading.....'/>");
       $('#upload_pic').ajaxForm(options).submit();

    });
}); 
```

# javascript - 无法在 java 脚本中添加 2 个编号并向标签添加值

> ID：15595784
> 
> 赞同：0
> 
> 时间：2013-03-24T06:20:59.613
> 
> 标签：javascript, vb.net

伙计们，我有一个 java 脚本代码，在单选按钮上单击我正在设置标签文本。与单选按钮关联，如果再次单击另一个单选按钮，我将添加其相应的编号。使用标签的先前文本并将新总和设置为标签文本。

我的代码是这样的：

```
<script type="text/javascript" language="javascript">
        function getIndex(index)
        {
          //  alert('You have Selected Flight Number:' + index);
            var lbltext = document.getElementById('lblAmount').Text;

             if (lbltext != null) {

                 document.getElementById('lblAmount').innerHTML = (parseFloat(lbltext) + (parseFloat(index)).toString();

             }

             else {

                 document.getElementById('lblAmount').innerHTML =  (parseFloat(index)).toString();

             }
        }
    </script> 
```

此代码不起作用不知道我错在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T06:38:25.437

这段代码很好，只需要修复第 9 行中的语法错误，在 .toString() 之前缺少一个右括号')'！我已编辑请检查它是否适合您

```
<script type="text/javascript" language="javascript">
    function getIndex(index)
    {
      //  alert('You have Selected Flight Number:' + index);
        var lbltext = document.getElementById('lblAmount').Text;

         if (lbltext != null) {
                                                                                  //here i edit
             document.getElementById('lblAmount').innerHTML = (parseFloat(lbltext) + (parseFloat(index))).toString();

         }

         else {

             document.getElementById('lblAmount').innerHTML =  (parseFloat(index)).toString();

         }
    }
</script> 
```

//祝你好运:)

# sql - 从过程中仅选择几列并插入表中

> ID：15595788
> 
> 赞同：2
> 
> 时间：2013-03-24T06:21:53.520
> 
> 标签：sql, sql-server, sql-server-2008, azure-sql-database

我有一个返回 6 列的存储过程。但我只想取 2 列并将它们插入到我的表变量中。

```
DECLARE @CategoryTable TABLE(   
CategoryId Int NOT NULL,   
Name nvarchar(255) NOT NULL   
)  

INSERT INTO @CategoryTable EXEC [GetAllTenantCategories] @TenantId 
```

当我运行这个

> 列名或提供的值的数量与表定义不匹配

**如何从存储过程中仅插入指定的列？**

我不想使用`SELECT INTO`，因为 SQL Azure 不支持它

在下面尝试并得到`Invalid object name '#Temp'`

```
DECLARE @CategoryTable TABLE(   
CategoryId Int NOT NULL,   
Name nvarchar(255) NOT NULL   
)  
INSERT INTO #Temp EXEC [GetAllTenantCategories] 1 

INSERT INTO @CategoryTable (CategoryId, Name) 
SELECT CategoryId, Name from #Temp

DROP TABLE #Temp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-20T13:30:31.987

我们可以使用**OPENQUERY**

```
SELECT EmployeeID,CurrentSalary INTO #tempEmp 
FROM OPENQUERY(LOCALSERVER,'Exec TestDB.dbo.spEmployee') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T06:27:48.423

您可以先创建一个`temp`表，然后`INSERT`在`table variable`.

```
CREATE TABLE #temp
(
   your columns and datatype
)

INSERT INTO #temp
EXEC [GetAllTenantCategories] @TenantId 
```

那么你也能，

```
DECLARE @CategoryTable TABLE(   
 CategoryId Int NOT NULL,   
 Name nvarchar(255) NOT NULL   
 )  

INSERT INTO @CategoryTable (CategoryId, Name)
select CategoryId, Name from #temp 
```

同时删除#temp 表，

```
DROP TABLE #temp 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T12:31:33.177

请参阅从[https://www.simple-talk.com/sql/performance/execution-plan-basics/获取的要点](https://www.simple-talk.com/sql/performance/execution-plan-basics/)

**预计计划无效时**

在某些情况下，估计的计划根本行不通。例如，尝试为这个简单的代码生成一个估计的计划：

```
CREATE TABLE TempTable
(
Id INT IDENTITY (1 , 1 )
,Dsc NVARCHAR (50 )
);

INSERT INTO TempTable ( Dsc )
SELECT [Name]
FROM [Sales] .[Store] ;

SELECT *
FROM TempTable ;

DROP TABLE TempTable ; 
```

你会得到这个错误：

`Invalid object name 'TempTable'.`

用于生成估计执行计划的优化器不执行 T-SQL。

它确实通过`algebrizer`前面概述的过程运行语句，该过程负责验证数据库对象的名称。由于查询尚未执行，临时表还不存在。这是错误的原因。

`Running this same bit of code through the Actual execution plan will work perfectly fine.`

希望你明白为什么你的临时表方法不起作用:)因为你可能会尝试使用 T-SQL

# hadoop - 在 HBase 上运行 MapReduce 会导致 Zookeeper 错误

> ID：15595792
> 
> 赞同：1
> 
> 时间：2013-03-24T06:23:15.937
> 
> 标签：hadoop, mapreduce, hbase, apache-zookeeper

我正在用 Hadoop 和 HBase 做一个测试项目。目前，该集群在一台 Windows 机器上托管了 2 个 Ubuntu 虚拟机。

我可以使用以下 HBase Java API 配置远程执行 PUT、QUERY 和 DELETE 操作（在我的主机中）

```
config = HBaseConfiguration.create();
config.set("hbase.zookeeper.quorum", "192.168.56.90");  
config.set("hbase.zookeeper.property.clientPort", "2222"); 
```

当我尝试在 Windows 上使用与上述相同的配置运行 HBase MapReduce 作业时，出现以下错误

```
 13/03/24 06:11:03 ERROR security.UserGroupInformation: PriviledgedActionException as:Joel cause:java.io.IOException: Failed to set permissions of path: \tmp\hadoop-Joel\mapred\staging\Joel290889388\.staging to 0700
java.io.IOException: Failed to set permissions of path: \tmp\hadoop-Joel\mapred\staging\Joel290889388\.staging to 0700 
```

从我在网上阅读的内容来看，在 Windows 上运行 MapReduce 作业似乎存在问题。所以我尝试使用“java - jar MR.jar”在 Linux 上运行 MapReduce 作业。

在 Linux 上，我无法连接到 Zookeeper。由于未知原因，Zookeeper 主机和端口正在客户端重置

```
13/03/24 05:59:33 INFO zookeeper.ZooKeeper: Client environment:os.version=3.5.0-23-generic
13/03/24 05:59:33 INFO zookeeper.ZooKeeper: Client environment:user.name=hduser
13/03/24 05:59:33 INFO zookeeper.ZooKeeper: Client environment:user.home=/home/hduser
13/03/24 05:59:33 INFO zookeeper.ZooKeeper: Client environment:user.dir=/home/hduser/testes
13/03/24 05:59:33 INFO zookeeper.ZooKeeper: Initiating client connection, connectString=192.168.56.90:2222 sessionTimeout=180000 watcher=hconnection
13/03/24 05:59:33 INFO zookeeper.RecoverableZooKeeper: The identifier of this process is 11552@node01
13/03/24 05:59:33 INFO zookeeper.ClientCnxn: Opening socket connection to server node01/192.168.56.90:2222\. Will not attempt to authenticate using SASL (unknown error)
13/03/24 05:59:33 INFO zookeeper.ClientCnxn: Socket connection established to node01/192.168.56.90:2222, initiating session
13/03/24 05:59:33 INFO zookeeper.ClientCnxn: Session establishment complete on server node01/192.168.56.90:2222, sessionid = 0x13d9afaa1a30006, negotiated timeout = 180000
13/03/24 05:59:33 INFO client.HConnectionManager$HConnectionImplementation: Closed zookeeper sessionid=0x13d9afaa1a30006
13/03/24 05:59:33 INFO zookeeper.ZooKeeper: Session: 0x13d9afaa1a30006 closed
13/03/24 05:59:33 INFO zookeeper.ClientCnxn: EventThread shut down
13/03/24 05:59:33 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
13/03/24 05:59:33 WARN mapred.JobClient: Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.
13/03/24 05:59:33 INFO zookeeper.ZooKeeper: Initiating client connection, connectString=localhost:2181 sessionTimeout=180000 watcher=hconnection
13/03/24 05:59:33 INFO zookeeper.RecoverableZooKeeper: The identifier of this process is 11552@node01
13/03/24 05:59:33 INFO zookeeper.ClientCnxn: Opening socket connection to server localhost/127.0.0.1:2181\. Will not attempt to authenticate using SASL (unknown error)
13/03/24 05:59:33 WARN zookeeper.ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
        at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
        at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:692)
        at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:350) 
```

从上面的日志来看，正确连接到node01:2222（node01解析为192.168.56.90）。但是由于某种原因，它更改为 localhost:2181 然后它给出了一个连接被拒绝的错误。

如何解决这个问题，让 MR 作业在 Linux 上运行，与 Zookeeper 运行在同一台机器上？

版本：Hbase 0.94.5 / Hadoop 1.1.2

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:19:10.963

您可能还需要设置 hbase.master。

还要检查 /etc/hosts 文件，看看它是否正确。您是否能够使用该连接信息远程登录到动物园管理员？

```
config.set("hbase.zookeeper.quorum", "192.168.56.90");  
config.set("hbase.zookeeper.property.clientPort", "2222");
config.set("hbase.master", "some.host.com:60000") 
```

# java - mvn 测试和编译

> ID：15595798
> 
> 赞同：1
> 
> 时间：2013-03-24T06:24:17.493
> 
> 标签：java, eclipse, maven, webdriver

我们用 Java+Webdriver+Eclipse 编写测试并使用 Maven 运行它们。要启动应用程序，我们需要启动一个 java 文件 - STARTAPP.java/class

所以，如果我们开始运行测试（第一次），我们应该这样写： mvn test -Dtest=STARTAPP,myfirsttestname

下一次，我们是否应该跳过 STARTAPP（例如： mvn test -Dtest=mysecondtestname

是否测试目标，编译java文件？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T06:35:52.627

> Does the test goal, compile the java file?

[Test](http://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html) goal doesn't compile any java classes itself. It's done by maven compiler plugin goals 'compile' and 'testCompile'. But since test goal goes after compile goals, then you will have your java classes compiled.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T06:36:15.513

Build phase `test` is preceded by build phase `compile`, during which the source code of the project is compiled. Take a look at [Build Lifecycle](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html) in Maven.

# android - Android“时钟”源git克隆，导入错误

> ID：15595800
> 
> 赞同：2
> 
> 时间：2013-03-24T06:25:10.040
> 
> 标签：android

从 git 克隆闹钟的 android 源。导入到我的 Eclipse 中发现以下错误：

```
Alarms.java: 
Line 463: Intent alarmChanged = new Intent(Intent.ACTION_ALARM_CHANGED);
Error: ACTION_ALARM_CHANGED cannot be resolved or is not a field.
---------------------------------------

AlarmKlaxon.java
Line 89: mVibrator = new Vibrator();
Error: Cannot instantiate the type Vibrator
-----------------------------------

DigitalClock.java
Line 184: CharSequence newTime = DateFormat.format(mFormat, mCalendar);
Error: Call requires API level 3 (current min is 1):android.text.format.DateFormat#format

Line 167: mContext.unregisterReceiver(mIntentReceiver);
Error: mContext cannot be resolved
-----------------------------------

SetAlarm.java
Line 115: FrameLayout content = (FrameLayout) getWindow().getDecorView()
            .findViewById(com.android.internal.R.id.content);
Error:com.android.internal.R cannot be resolved to a variable

----------------------------------- 
```

这不是这个应用程序，我从 git android 树克隆的任何应用程序......我遇到了一些错误或其他错误。我不知道我做错了什么。我的目标是果冻豆。我还检查了将构建目标设为谷歌 API，但没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T06:48:18.817

这是你应该做的：

*   重新开始，因此删除该项目并关闭 Eclipse。

*   再次下载源

*   打开 Eclipse，按`Ctrl + N`。这将打开新项目向导。

*   选择`Android`然后`Android Project From Existing Code`。

*   指向`Root Directory`DeskClock 源。考虑检查`Copy projects into workspace`。这样，当您编辑文件时，您不会编辑下载的原始源，而是编辑工作区中的副本。

*   打开`Manifest`并设置一个`minSdkVersion`.

大概会是这样的：

```
<uses-sdk
    android:minSdkVersion="15"
    android:targetSdkVersion="17" /> 
```

*   您需要添加`android-support-v13`库。这可以在 SDK 中找到。

路径将是这样的：

```
PATH_TO_YOUR_SDK\extras\android\support\v13 
```

一旦你有了这个，把它扔到`libs`你项目的文件夹中。如果不存在，请创建一个。

完成所有这些之后，如果仍然有任何错误，您应该清理您的项目。您还应该考虑突出显示您的项目，按下`Alt+Enter`选择`Android`并将其更改`Project Build Target`为最新的源。

确保在克隆 repo 时使用正确的链接：

```
git clone https://android.googlesource.com/platform/packages/apps/DeskClock 
```

此外，请确保将 Eclipse 指向正确的 Android SDK 目录。转到`Window`-->`Android`并确保`SDK Location`指向正确的路径。

# c++ - unordered_map 中字符串的 C++ 哈希函数

> ID：15595804
> 
> 赞同：43
> 
> 时间：2013-03-24T06:25:59.150
> 
> 标签：c++, string, c++11, key, unordered-map

似乎 C++ 在标准库中没有字符串的散列函数。这是真的？

什么是在 unordered_map 中使用字符串作为键的工作示例，可以与任何 c++ 编译器一起使用？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-24T06:52:00.823

C++ STL 为各种字符串类提供模板[特](http://en.cppreference.com/w/cpp/string/basic_string/hash)化。`std::hash`您可以指定`std::string`为键类型`std::unordered_map`：

```
#include <string>
#include <unordered_map>

int main()
{
    std::unordered_map<std::string, int> map;
    map["string"] = 10;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-08-01T21:37:25.823

我今天遇到了这个问题（实际上是`wstring`, not `string`，但它是相同的交易）：`wstring`在 an 中使用 as a key 会`unordered_map`生成一个关于该类型没有可用的哈希函数的错误。

我的解决方案是添加：

```
#include <string> 
```

信不信由你，没有`#include`指令我仍然有`wstring`可用的类型，但显然没有像散列这样的辅助功能。只需添加上面的包含即可修复它。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-03-24T06:34:54.903

Actually, there is `std::hash<std::string>`

But there it is how you can use another hash function:

```
struct StringHasher {
    size_t operator()(const std::string& t) const {
          //calculate hash here.
    }
}

unordered_map<std::string, ValueType, StringHasher> 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-03-24T07:03:33.457

如果你有一个`CustomType`并且你想插入 STL 基础设施，这就是你可以做的。

```
namespace std
{
//namespace tr1
//{
    // Specializations for unordered containers

    template <>
    struct hash<CustomType> : public unary_function<CustomType, size_t>
    {
        size_t operator()(const CustomType& value) const
        {
            return 0;
        }
    };

//} // namespace tr1

template <>
struct equal_to<CustomType> : public unary_function<CustomType, bool>
{
    bool operator()(const CustomType& x, const CustomType& y) const
    {
        return false;
    }
};

} // namespace std 
```

然后，如果您想创建一个`std::unordered_map<CustomType>`STL 将找到`hash`和`equal_to`功能，而无需您对模板做更多的事情。这就是我喜欢编写支持无序数据结构的自定义相等比较器的方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-02T12:03:25.867

就我而言，这真的很分散注意力。

我有一个 X 类型，我为它实现了**const& X**的散列，并在某处使用它

```
std::unordered_map<const X, int> m_map; 
```

然后我想要另一张地图，其中的钥匙属于该类型`X`并做了：

```
std::unordered_map<X, int> map_x; 
```

注意第二种情况的**LACK**。`const`

# vb.net - 将新对象添加到上下文

> ID：15595806
> 
> 赞同：0
> 
> 时间：2013-03-24T06:26:29.653
> 
> 标签：vb.net, entity-framework, mvvm, crud

所以显然我还不够了解EF。SO 的某人建议我不应该在我的应用程序的生命周期内保持上下文对象打开，所以我稍微改变了一些东西，现在它是如何工作的：

1.  我使用 EF 从数据库中读取所需数据并将其存储在`ObservableCollection(Of MyEntity)`.
2.  应用程序不断向该集合添加新对象，修改/删除 ObservableCollection 中的现有对象。
3.  在应用程序退出或保存按钮时，我尝试将更改提交回数据库，但显然不能。这是提交代码。

    ```
    For Each entity In MyObservableCollection
      If entity.EntityState = EntityState.Added OrElse entity.EntityState = EntityState.Detached Then
        Dim key = context.CreateEntityKey(entitySetName, entity)
        entity.EntityKey = key
        context.FilmTypes.Attach(entity)
      ElseIf entity.EntityState = System.Data.EntityState.Modified Then
        Dim originalItem As Object = Nothing
        Dim key = context.CreateEntityKey(entitySetName, entity)
        If context.TryGetObjectByKey(key, originalItem) Then
            context.ApplyCurrentValues(key.EntitySetName, entity)
        End If
      End If
    Next

    context.SaveChanges(SaveOptions.AcceptAllChangesAfterSave) 
    ```

EF 告诉我已经有一个具有相同键的对象。我的 PK 列在模型中定义为 Identity，所以我希望它自动生成一个临时密钥（就像旧的好 DataSets 一样）。

我们究竟如何在 EF 中的“断开连接”模式下工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T07:03:56.460

自己找到的。修改状态的代码是正确的。对于新对象，它应该是这样的：

```
If entity.EntityState = EntityState.Added OrElse entity.EntityState = EntityState.Detached Then
    context.FilmTypes.AddObject(entity) 
```

无需指定关键参数。EF 会处理的。

# android - 线程 [<1> main]（暂停（异常 IllegalStateException））

> ID：15595816
> 
> 赞同：1
> 
> 时间：2013-03-24T06:28:28.560
> 
> 标签：android, arrays, listview, illegalstateexception

我整晚都在努力寻找并修复这个错误。我不确定到底是什么导致了这个错误，但是当我尝试运行这个类时我的应用程序崩溃了。我认为这可能与 ListView 或数组有关。

我的 Java 文件：

```
package com.example.ispoke;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class AustralianAnimalsMenu extends ListActivity{

String AusAnimalItm[] = {"Aus Animal 1", "Aus Animal 2", "Aus Animal 3", "Aus      Animal 4", "Aus Animal 5"}; 

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_australiananimalsmenu);

    setListAdapter(new ArrayAdapter<String>(AustralianAnimalsMenu.this, android.R.layout.activity_list_item, AusAnimalItm));        
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub

    super.onListItemClick(l, v, position, id);
    String selection = AusAnimalItm[position];
    try{            
    Class<?> ourClass =  Class.forName("com.example.ispoke." + selection);
    Intent ourIntent = new Intent(AustralianAnimalsMenu.this, ourClass);
    startActivity(ourIntent);       
    }catch(ClassNotFoundException ell){
        ell.printStackTrace();
    }
}

} 
```

我的 xml 文件：

```
 <RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

        <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/textView1"
        android:text="Done"
        android:textSize="10sp" />

        <TextView
        android:id="@+id/textView1"
        android:layout_width="271dp"
        android:layout_height="31dp"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:gravity="center_horizontal"
        android:text="Australian Animals"
        android:textSize="25sp" />
</RelativeLayout>

<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="369dp"
    android:layout_weight="1.06" >
</ListView>

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="34dp"
    android:gravity="bottom"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="Edit"
        android:textSize="15sp" />

    <Button
        android:id="@+id/button4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="Delete"
        android:textSize="15sp" />

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="+"
        android:textSize="20sp" />
</RelativeLayout> 
```

错误堆栈：

```
Thread [<1> main] (Suspended (exception IllegalStateException)) 
<VM does not provide monitor information>   
ListView.layoutChildren() line: 1662    
ListView(AbsListView).onLayout(boolean, int, int, int, int) line: 1147  
ListView(View).layout(int, int, int, int) line: 7035    
LinearLayout.setChildFrame(View, int, int, int, int) line: 1249 
LinearLayout.layoutVertical() line: 1125    
LinearLayout.onLayout(boolean, int, int, int, int) line: 1042   
LinearLayout(View).layout(int, int, int, int) line: 7035    
FrameLayout.onLayout(boolean, int, int, int, int) line: 333 
FrameLayout(View).layout(int, int, int, int) line: 7035 
LinearLayout.setChildFrame(View, int, int, int, int) line: 1249 
LinearLayout.layoutVertical() line: 1125    
LinearLayout.onLayout(boolean, int, int, int, int) line: 1042   
LinearLayout(View).layout(int, int, int, int) line: 7035    
PhoneWindow$DecorView(FrameLayout).onLayout(boolean, int, int, int, int) line: 333  
PhoneWindow$DecorView(View).layout(int, int, int, int) line: 7035   
ViewRoot.performTraversals() line: 1045 
ViewRoot.handleMessage(Message) line: 1727  
ViewRoot(Handler).dispatchMessage(Message) line: 99 
Looper.loop() line: 123 
ActivityThread.main(String[]) line: 4627    
Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line:  
    not available [native method]
    Method.invoke(Object, Object...) line: 521

    ZygoteInit$MethodAndArgsCaller.run() line: 868  
    ZygoteInit.main(String[]) line: 626 
    NativeStart.main(String[]) line: not available [native method] 
```

# entity-framework - MapKey 与 HasForeignKey 的区别 - Fluent Api

> ID：15595818
> 
> 赞同：55
> 
> 时间：2013-03-24T06:29:18.583
> 
> 标签：entity-framework, ef-code-first, entity-relationship

实际上有什么区别：

```
this.HasRequired(a => a.Something)
    .WithMany()
    .Map(a => a.MapKey("SomethingId")); 
```

和

```
this.HasRequired(a => a.Something)
    .WithMany()
    .HasForeignKey(a => a.SomethingId); 
```

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-03-24T13:07:09.940

两种映射都将创建完全相同的数据库模式，具有不可为空的外键`SomethingId`和两个相关表之间的引用约束。

`MapKey`当您不想将外键作为模型类中的属性时，使用第一个映射。这种情况下的关联类型称为*Independent Association*。`HasForeignKey`当外键是模型中的属性时，您将应用第二个映射。这种类型称为*外键关联*。

在许多情况下，使用外键关联更容易，但许多人认为在对象世界中拥有一个关系工件（外键）不太干净，因此更喜欢独立关联。

以下是有关这两种关联及其优缺点的一些参考资料：

*   [http://www.ladislavmrnka.com/2011/05/foreign-key-vs-independent-associations-in-ef-4/](http://www.ladislavmrnka.com/2011/05/foreign-key-vs-independent-associations-in-ef-4/)
*   [什么是独立关联和外键关联？](https://stackoverflow.com/questions/12606948/what-are-independent-associations-and-foreign-key-associations)
*   [代码优先：独立关联与外键关联？](https://stackoverflow.com/questions/5281974/code-first-independent-associations-vs-foreign-key-associations)

# javascript - 在 Javascript 中验证（澳大利亚）电话号码

> ID：15595819
> 
> 赞同：2
> 
> 时间：2013-03-24T06:29:22.837
> 
> 标签：javascript, regex, forms, validation

我需要在 JavaScript中验证澳大利亚的电话号码（例如`02[3-9]\d{7}`or`07[3-9]\d{7}` 或）。`04[\d]{8}`

**要求：**

*   必须是 10 位数字
*   没有逗号
*   没有破折号
*   前面没有+
*   必须以 0 开头

目前我可以验证必填字段和电子邮件地址，但我想添加电话号码验证。

```
<html>
<head>

<script type="text/javascript">
function validateForm() {
 var x=document.forms["form3"]["name"].value;
 if (x==null || x=="") {
   alert("Name must be filled out");
   return false;
 }
 var s=document.forms["form3"]["phone"].value;
 if (s==null || s=="") {
   alert("Please Enter your Phone or Mobile Number - Preferably Phone Number");
   return false;
 }
 var s=document.forms["form3"]["email"].value;
 if (s==null || s=="") {
   alert("Please Enter a valid email address");
   return false;
 }
 var k=document.forms["form3"]["email"].value;
 var atpos=k.indexOf("@");
 var dotpos=k.lastIndexOf(".");
 if (atpos<1 || dotpos<atpos+2 || dotpos+2>=k.length) {
   alert("Email Address is Not Valid. Please provide your correct email address.");
   return false;
 }
}
</script>
</head> 
<body>

<form action="/thank-you.php" name="form3" method="post" onsubmit="return validateForm();" >
Your name* <input type="text" name="name" />    
Phone number* <input type="text" name="phone" />
Email* <input type="text" name="email" />
<input type="submit" value="sumbit" name="submit" class="button" onclick="javascript:return validateMyForm();" /><input type="reset" value="Reset" class="resetbutton" />
</form>

</body> 
</html> 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T06:40:26.717

这是我推荐的正则表达式

```
var pattern = /^0[0-8]\d{8}$/g; 
```

因此输入必须以 0 开头，然后是一个数字，并且必须是 0-8 之间的一个。然后它必须有 8 个以上的数字。

有效电话号码示例：

0010293999（好）

0110293999（好）

0210293999（好）

0910293999（不）

//执行

```
 ........
 var phoneNumber =document.forms["form3"]["phone"].value;
 var phonePattern = /^0[0-8]\d{8}$/g;
 //phone number is not valid. Please notice that you don't need to check if it's empty or null since Regex checks it for you anyways
 if (!phoneNumber.test(phonePattern))
   {
   alert("Please Enter your Phone or Mobile Number - Preferably Phone Number");
   return false;
   }
 .......... 
```

- - 编辑

```
........
     var phoneNumber =document.forms["form3"]["phone"].value;
     var phonePattern = /^0[0-8]\d{8}$/g;
     //phone number is not valid. Please notice that you don't need to check if it's empty or null since Regex checks it for you anyways
     if (!phonePattern.test(phoneNumber))
       {
       alert("Please Enter your Phone or Mobile Number - Preferably Phone Number");
       return false;
       }
     .......... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-04T01:18:38.663

为此感谢[Paul Ferrett](http://paulferrett.com/2010/validate-australian-phone-numbers-in-php/)（php 不是 js，但正则表达式应该翻译）：

```
<?php
function validate_phone($number) {
  $number = preg_replace('/[^\d]/', '', $number);
  return preg_match('/^(0(2|3|4|7|8))?\d{8}$/', $number)
    || preg_match('/^1(3|8)00\d{6}$/', $number)
    || preg_match('/^13\d{4}$/', $number);
} 
```

注意：“麻省理工学院许可证”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T06:36:03.697

Take a look at the Javascript [RegExp Object](http://www.w3schools.com/js/js_obj_regexp.asp) and RegExp [`test()`](http://www.w3schools.com/jsref/jsref_regexp_test.asp) method.

```
var patt = /04[\d]{8}/g; // Shorthand for RegExp object

var phoneNumber1 = '0412345678';
var result1 = patt.test(phoneNumber1); // result1 is true

var phoneNumber2 = 'abc';
var result2 = patt.test(phoneNumber2); // result2 is false 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T07:21:57.710

您也可以使用所需的模式。

我以前从未使用过它，但它看起来像这样：

```
<input type="text" 
  id="phoneNumber"
  title="Phone numbers must be 10 digits and start with 0." 
  required pattern="0[::digit::]{10}"
/>

// It's late, no idea if that's a valid regex or if works with POSIX. 
```

有关更多信息，请参阅此 html5rocks 文章：http: [//www.html5rocks.com/en/tutorials/forms/html5forms/#toc-validation](http://www.html5rocks.com/en/tutorials/forms/html5forms/#toc-validation)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-15T10:18:00.413

这是一个更强大的澳大利亚电话正则表达式。由[这个 SO](https://stackoverflow.com/questions/39990179/regex-for-australian-phone-number-validation) question 提供。

```
let phonePattern = /^(?:\+?(61))? ?(?:\((?=.*\)))?(0?[2-57-8])\)? ?(\d\d(?:[- ](?=\d{3})|(?!\d\d[- ]?\d[- ]))\d\d[- ]?\d[- ]?\d{3})$/ 
```

#### 测试：

```
0412123123      TRUE
0491579999      TRUE
0491572983      TRUE
0712122123      TRUE
0212122123      TRUE
0000000000      FALSE
5555551234      FALSE
04121231231     FALSE
041212312       FALSE 
```

# javascript - firefox plugin - 如何隐藏标签浏览器并获取其内容

> ID：15595822
> 
> 赞同：0
> 
> 时间：2013-03-24T06:30:17.257
> 
> 标签：javascript, firefox-addon, xul, tabbed-browsing

我正在为 Firefox 开发一个插件。我必须在其中打开一个隐藏选项卡并通过 javascript 访问其内容，然后将其关闭。

以下是我用于访问选项卡内容的代码：

```
var newTabBrowser = gBrowser.getBrowserForTab(gBrowser.addTab("www.kayak.com/flights#/BOM-ORL/2013-05-14/2013-06-19"));
var contentdata = "";
newTabBrowser.addEventListener("load", function () {
    contentdata = contentdata + newTabBrowser.contentDocument.body.innerHTML;
    load = load + 1;
    if(load == 5) {
        var DOMPars = new DOMParser();
        var dom = DOMPars.parseFromString(contentdata, "text/html");
        var priceNode = dom.getElementById('low_price');
    }
}, true); 
```

如何在浏览器中隐藏此选项卡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:36:58.740

看起来您只需要创建一个永久的、不可见的页面并访问其 DOM。

Addon-SDK 提供了一个[页面工作](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/page-worker.html)模块。这是你想要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:15:39.843

如果您存储对使用 addTab 打开的选项卡的引用，则可以使用 css 或其他可用方法隐藏该选项卡。例如：

```
var newTab = gBrowser.addTab("www.kayak.com/flights#/BOM-ORL/2013-05-14/2013-06-19");
newTab.setAttribute("style", "display: none");

var newTabBrowser = gBrowser.getBrowserForTab(newTab);
newTabBrowser.loadCount = 0;
var contentdata = "";
newTabBrowser.addEventListener("load", function () {
    contentdata = contentdata + newTabBrowser.contentDocument.body.innerHTML;
    this.loadCount = this.loadCount + 1;
    if(this.loadCount == 5) {
        var DOMPars = new DOMParser();
        var dom = DOMPars.parseFromString(contentdata, "text/html");
        var priceNode = dom.getElementById('low_price');
    }
}, true); 
```

# c# - 从 Windows 服务启动浏览器

> ID：15595823
> 
> 赞同：2
> 
> 时间：2013-03-24T06:30:23.310
> 
> 标签：c#, .net, windows, windows-services

我对微软世界有点陌生。我已阅读[此](https://stackoverflow.com/a/4873088)答案和许多其他链接，并且我知道在 Vista 之后，Windows 服务无法与桌面交互。

但是，我有一种紧急情况，我必须快速找到解决方法。我需要我的 Windows 服务以某种方式打开一个带有 URL 的浏览器（现在任何一种丑陋的 hack 都可以）。答案是：

> 您需要编写一个单独的代理应用程序，它将在用户登录时自动启动，并且您的服务将与之通信。然后代理可以启动浏览器或执行您需要的任何其他操作。

有人可以向我解释如何以简单的方式做到这一点吗？该服务将如何与这个“代理”交谈？这个“代理”到底是什么？

任何链接或建议将不胜感激。

编辑：目前。我的服务尝试运行以下代码：`System.Diagnostics.Process.Start("www.google.com");`

我后来发现，这不起作用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T06:41:40.887

是的，您可以通过一项服务在桌面上运行代码……问题是在哪个桌面上？因为可能有不同的用户同时登录（例如在 Windows Server 中可能有不同的用户远程登录）。

如果`Process.Start`在您的示例中使用服务：

```
System.Diagnostics.Process.Start("www.google.com"); 
```

该程序不会出现在任何用户的桌面上，因为该服务不与用户的任何桌面关联。

* * *

解决方案是检测本地登录的用户，然后以该用户的身份（并在该用户的权限下）执行程序。为此，我想将您链接到我的[另一个答案](https://stackoverflow.com/a/12851218/402022)，我在其中演示如何从服务调用程序。**在[那个答案中，](https://stackoverflow.com/a/12851218/402022)我介绍了这种技术所需的代码**。

*注意*：那个答案是关于屏幕截图的，我描述的技术仍然是在用户会话中调用程序，并且该方法适用于服务。所以它适用于你的问题。

您可以使用此方法直接执行所需的浏览器。作为替代方案，您可以使用它来调用您的服务可执行文件，您可以使用它[`System.Environment.UserInteractive`](http://msdn.microsoft.com/en-us/library/system.environment.userinteractive.aspx)来检测可执行文件是否未作为服务运行。如果您将 url 作为执行参数传递给您的服务可执行文件，那么您可以使用默认浏览器打开它，[`Process.Start`](http://msdn.microsoft.com/en-us/library/system.environment.userinteractive.aspx)就像上面的示例一样。

*注意*：代码在 Windows 7 上测试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T06:36:21.023

There is no "quick way" to do this, I'm afraid. (And since the service can't interact with the user's desktop, even if it could launch the browser the user couldn't see it anyway.)

The "agent application" you've mentioned is a totally separate application which runs under the user's desktop on login. It would have to use some method of inter-process communication (named pipes, TCP/IP, etc.) to communicate with the service.

The reason that services don't interact with the desktop is for reasons of security. There's no "quick workaround" available, and there shouldn't be one. There's also no "simple way" to circumvent that change (and again, there shouldn't be - if you can bypass security in a simple way, it's not much security).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T06:50:08.873

使用[http://www.pinvoke.net/default.aspx/shell32.shellexecute](http://www.pinvoke.net/default.aspx/shell32.shellexecute)`shellexecute` _`pinvoke`

```
C# Signature:
public enum ShowCommands : int
{
    SW_HIDE         = 0,
    SW_SHOWNORMAL       = 1,
    SW_NORMAL       = 1,
    SW_SHOWMINIMIZED    = 2,
    SW_SHOWMAXIMIZED    = 3,
    SW_MAXIMIZE     = 3,
    SW_SHOWNOACTIVATE   = 4,
    SW_SHOW         = 5,
    SW_MINIMIZE     = 6,
    SW_SHOWMINNOACTIVE  = 7,
    SW_SHOWNA       = 8,
    SW_RESTORE      = 9,
    SW_SHOWDEFAULT      = 10,
    SW_FORCEMINIMIZE    = 11,
    SW_MAX          = 11
}

[DllImport("shell32.dll")]
static extern IntPtr ShellExecute(
IntPtr hwnd,
string lpOperation,
string lpFile,
string lpParameters,
string lpDirectory,
ShowCommands nShowCmd);

 // Asks default mail client to send an email to the specified address.
    ShellExecute( IntPtr.Zero, "open", "mailto:support@microsoft.com", "", "", ShowCommands.SW_SHOWNOACTIVATE    );

    // Asks default browser to visit the specified site.
    ShellExecute( IntPtr.Zero, "open", "http://channel9.msdn.com", "", "", ShowCommands.SW_SHOWNOACTIVATE );

    // Opens default HTML editing app to allow for edit of specified file
    ShellExecute( IntPtr.Zero, "edit", @"c:\file.html", "", "", ShowCommands.SW_SHOWNOACTIVATE );
   //Modified by Aljaz: Replaced the last zero in these calls with 4  otherwise it wouldn't show anything
   // 0 stands for SW_HIDE contant, which means execute but don't show the window which is probably not 
   // what we want. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T06:39:28.177

如果您需要一些紧急的事情 - 我会尝试将消息从服​​务放入 MSMQ，并编写一些等待队列消息的简单客户端，然后继续它们。
**更新：**
实际上，如果您需要一些非常快的东西 - 您甚至可以写入某个文件，然后编写简单的桌面（winforms？）应用程序来读取池中的这个文件（每 5 秒？），并在需要时打开浏览器。

# algorithm - 如何用动态规划求解地形图最短路径？

> ID：15595828
> 
> 赞同：1
> 
> 时间：2013-03-24T06:32:06.547
> 
> 标签：algorithm, dynamic-programming, shortest-path

给定一个所有整数的矩阵`positive`，从最左边的列开始`0th`，找到到最右边的列的最小路径`(n - 1)th`。例如：
![在此处输入图像描述](../Images/4e4a503bbc38564fdcfa4961fe2dafdb.png)

最小路径是包含 1 的路径。

在任何给定的方格`m[i, j]`上，我们可以移动到 4 个方向 ( `left, right, up, down`)；当然，除了最左边，最右边的行/列的所有角落案例。例如，在 处`[0, 0]`，我们只能移动`right`或`down`。
我的解决方案是构建一个`m x n`顶点图，然后运行**​​Floyd-Warshall**计算任意两个顶点的所有对最短路径`(u, v)`。然后运行另一个嵌套`for`循环以检查`0th`列的所有顶点与列的所有顶点`(n - 1)th`以找到最小路径。
但是，我的教授通过使用以下递归提出了另一种算法：

```
S[i, j, L] = 
    min(
        S[i - 1, j, L - 1] + cost[i - 1, j],
        S[i + 1, j, L - 1] + cost[i + 1, j],
        S[i, j - 1, L - 1] + cost[i, j - 1],
        S[i, j + 1, L - 1] + cost[i, j + 1]); 
```

我不知道它是如何工作的！因为在任何给定的方格`[i, j]`上，我们都可以在 4 个方向上移动，这使得不可能根据之前的预先计算的值来构建表格。
我在这里错过了什么吗？我看不出这种重复是如何进行的。任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T07:13:42.237

如果你有 S[i,j,0] = infinity，除了 S[0,j,L] = 0，那么它应该可以工作。最终所有 S[i,j,L]==S[i,j,L+1] 并且您可以停止迭代。S[i,j,L] 然后具有从第一列到该单元格的最短路径的成本。

这就是这个递归在左上角的样子，以增加 L 的值。

```
0   inf inf inf inf
0   inf inf inf inf
0   inf inf inf inf

0   1   inf inf inf inf
0   20  inf inf inf inf
0   21  inf inf inf inf

0   1   2   inf inf inf
0   2   30  inf inf inf
0   21  22  inf inf inf

0   1   2   3   inf inf
0   2   3   39  inf inf
0   12  22  23  inf inf

0   1   2   3   4   inf
0   2   3   4   47  inf
0   12  12  23  24  inf

0   1   2   3   4   5  
0   2   3   4   5   48  
0   12  12  12  24  25 

0   1   2   3   4   5  
0   2   3   4   5   6   
0   12  12  12  6   25 

0   1   2   3   4   5
0   2   3   4   5   6
0   12  12  7   6   7

0   1   2   3   4   5
0   2   3   4   5   6
0   12  8   7   6   7

0   1   2   3   4   5
0   2   3   4   5   6
0   9   8   7   6   7 
```

左上角不会发生进一步的变化。您可以看到它正在慢慢发现到达每个单元格的最低成本。

# git - error in git log

> ID：15595832
> 
> 赞同：0
> 
> 时间：2013-03-24T06:32:47.600
> 
> 标签：git, git-diff, git-log

So I have been coming into this git log error several times now.

I wrote this simple java code to illustrate it. I commit my progress (writing it gradually) and then run *git log -p --decorate*

```
class Mega {
    private int alpha = 0;
    private int beta = 1;
    private int omega = 5;

    public returnAlpha(){
        return this.alpha;
    }

    public returnBeta(){
        return this.beta;
    }

    public returnOmega(){
        return this.omega;
    }
} 
```

This is the git log:

```
commit 2dcc5243a943a7e1a3344479bfb6a21474c6c024 (HEAD, master)
Date:   Sat Mar 23 17:26:24 2013 -0700

    stage 2

diff --git a/untitled.java b/untitled.java
index 821a19e..b2ba345 100644
--- a/untitled.java
+++ b/untitled.java
**@@ -10,4 +10,8 @@ class Mega {**
    public returnBeta(){
        return this.beta;
    }
+
+   public returnOmega(){
+       return this.omega;
+   }
 }
\ No newline at end of file

commit 43fadfc5ec827cf24667494e350ca9bcda21ffd3
Date:   Sat Mar 23 17:26:01 2013 -0700

    stage 2

diff --git a/untitled.java b/untitled.java
index e5c38d9..821a19e 100644
--- a/untitled.java
+++ b/untitled.java
**@@ -6,4 +6,8 @@ class Mega {**
    public returnAlpha(){
        return this.alpha;
    }
+
+   public returnBeta(){
+       return this.beta;
+   }
 }
\ No newline at end of file

commit 46d27d8485cb296798e5490803b1b7a04313793f
Date:   Sat Mar 23 17:25:24 2013 -0700

    stage 1

diff --git a/untitled.java b/untitled.java
index 332a406..e5c38d9 100644
--- a/untitled.java
+++ b/untitled.java
@@ -1,5 +1,9 @@
 class Mega {
-   int alpha = 0;
-   int beta = 1;
-   int omega = 5;
+   private int alpha = 0;
+   private int beta = 1;
+   private int omega = 5;
+
+   public returnAlpha(){
+       return this.alpha;
+   }
 }
\ No newline at end of file

commit bb18a576d44b492e50906d3eac495956590ff263
Date:   Sat Mar 23 17:24:22 2013 -0700

    stage 0

diff --git a/untitled.java b/untitled.java
index e69de29..332a406 100644
--- a/untitled.java
+++ b/untitled.java
@@ -0,0 +1,5 @@
+class Mega {
+   int alpha = 0;
+   int beta = 1;
+   int omega = 5;
+}
\ No newline at end of file

commit d630ed1f1edff608488938ec3ea748a2d5a7bab1
Date:   Sat Mar 23 17:23:39 2013 -0700

    java added

diff --git a/untitled.java b/untitled.java
new file mode 100644
index 0000000..e69de29 
```

I need to fix this log mistake because I am automatically (with a script) parsing the log and I need it to remain consistent.

Furthermore as the amount of commits increases there are other inconsistencies such as random spaces and sometimes the line after the @ is actually part of the diff (unlike the cases of this example).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T06:53:38.167

假设您指的是两条线范围线（@@ class ...）*并且*您已添加了星星（顺便说一句，这非常令人困惑，您应该真的已经解释了问题中的问题):

在统一差异格式的行范围之后有文本是可以接受的。Git 就是这样做的，所以处理它是你的工作。[http://en.wikipedia.org/wiki/Diff#Unified_format](http://en.wikipedia.org/wiki/Diff#Unified_format)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T19:38:58.130

为避免随机间距引入虚假差异，请进行空白清理（即，所有制表符或所有空格，行尾没有空格，文件末尾没有空行，所有文件都以换行符结束）。可能您会想要`git config apply.whitespace fix`，并且可能会深入挖掘修复此问题的历史。

# validation - validatorMessage not used when non-number input is entered

> ID：15595833
> 
> 赞同：1
> 
> 时间：2013-03-24T06:33:12.393
> 
> 标签：validation, jsf

I'd like to show a custom message when the user enters a non-number.

For that, I specified `validatorMessage` attribute:

```
<h:inputText value="#{bean.commission}" required="true"
    requiredMessage="Please enter a value"
    validatorMessage="Please enter a number" /> 
```

The required message appears correctly on empty input, but the validator message doesn't appear on non-number input. Instead, it shows the default message that the input value is not a number.

How is this caused and how can I solve it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-04T18:22:37.810

您遇到了转换错误，而不是验证错误。

改为使用`converterMessage`。

```
<h:inputText value="#{bean.commission}" required="true"
    requiredMessage="Please enter a value"
    converterMessage="Please enter a number" /> 
```

`validatorMessage`仅用于通过属性指定的验证器以及`validator`通过嵌套`<f:validator>`和`<f:validateXxx>`标签指定的验证器。

`converterMessage`用于通过`converter`属性指定的转换器和通过嵌套和`<f:converter>`标签`<f:convertXxx>`指定的转换器，**也**用于特定类的自动注册转换器，例如/ typed[`IntegerConverter`](https://jakarta.ee/specifications/faces/3.0/apidocs/jakarta/faces/convert/integerconverter)的情况。`int``Integer``value`

### 也可以看看：

*   [只接受 h:inputText 值的数字](https://stackoverflow.com/questions/19269507/accept-only-digits-for-hinputtext-value/)
*   [如何在 JSF 页面中使用 validateRegex 验证数字字段？](https://stackoverflow.com/questions/9501845/how-validate-number-fields-with-validateregex-in-a-jsf-page/)

# javascript - Catch infinite while loop in chrome/safari

> ID：15595841
> 
> 赞同：0
> 
> 时间：2013-03-24T06:35:05.257
> 
> 标签：javascript, google-chrome, safari, while-loop

I've written a function to catch a loop after it has run over a specified time.

```
var t1 = new Date().getTime();
while(true){
    //general code in here...

    document.body.appendChild(document.createElement('div')); //This causes the problem

    if(isInfinite(t1,3000)){
        alert('Loop stopped after 3 seconds')
        break;
    }       
}

function isInfinite(t1,timeLimit){
    var t2 = new Date().getTime();
    if(t2-t1> timeLimit){
        return true;
    }
    else return false;
} 
```

It works as expected, but when I try to append nodes to the document it fails to catch in chrome & safari. What's weird is it works when I have the debugger running, and it works in FF. What is causing this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T07:02:17.410

也许你在 DOM 准备好之前触发了这个 JS 代码。这是我的实现。

```
<!--Basically I am firing this script with onload event function.-->
<html>
    <head></head>
    <body onload="init()">
        <script>
            function init() {
                alert("asg");
                var t1 = new Date().getTime();
                while(true) {
                    //general code in here...
                    document.body.appendChild(document.createElement('div')); //This causes the problem
                    if(isInfinite(t1, 3000)) {
                        alert('Loop stopped after 3 seconds')
                        break;
                    }
                }

                function isInfinite(t1, timeLimit) {
                    var t2 = new Date().getTime();
                    if(t2 - t1 > timeLimit) {
                        return truite;
                    } else return false;
                }
            }
        </script>
    </body>
</html> 
```

然而，这个脚本很可能会崩溃，这取决于浏览器制造商如何设置循环限制（这通常发生在主线程被阻塞时）。所以我认为在这个例子中使用 setTimeout 函数会更好。

* * *

### 只为你的兴趣

Javascript 是基于事件的，它只有 1 个线程。您已经提到您将向初学者展示它。为什么不向他们解释 JS 的基于事件的性质，而不是这样做呢？

# algorithm - Time complexity of the program using recurrence equation

> ID：15595843
> 
> 赞同：13
> 
> 时间：2013-03-24T06:35:23.520
> 
> 标签：algorithm, time-complexity, recurrence, asymptotic-complexity

I want to find out the time complexity of the program using recurrence equations. That is ..

```
int f(int x)
{
if(x<1) return 1;
 else  return f(x-1)+g(x); 
}
int g(int x)
{
if(x<2) return 1;
 else return f(x-1)+g(x/2);
} 
```

I write its recurrence equation and tried to solve it but it keep on getting complex

```
T(n) =T(n-1)+g(n)+c
         =T(n-2)+g(n-1)+g(n)+c+c
         =T(n-3)+g(n-2)+g(n-1)+g(n)+c+c+c
         =T(n-4)+g(n-3)+g(n-2)+g(n-1)+g(n)+c+c+c+c
         ……………………….
        ……………………..
        Kth time …..
        =kc+g(n)+g(n-1)+g(n-3)+g(n-4).. .. . … +T(n-k)

Let at kth time input become 1
Then n-k=1
         K=n-1
Now i end up with this..
T(n)= (n-1)c+g(n)+g(n-1)+g(n-2)+g(n-3)+….. .. g(1) 
```

I ‘m not able to solve it further. Any way if we count the number of function calls in this program , it can be easily seen that time complexity is exponential but I want proof it using recurrence . how can it be done ?

![enter image description here](../Images/64af4518b151ead3c54d66ae2eb691ff.png)

Explanation in Anwer 1, looks correct , similar work I did.

The most difficult task in this code is to write its recursion equation. I have drawn another diagram , I identified some patterns , I think we can get some help form this diagram what could be the possible recurrence equation.

![For f(2)](../Images/59cfe527770c2c47b654ec742437b82b.png)

![For f(3)](../Images/28e378cd46f80a28fc9018291713a53a.png)

```
And I came up with this equation , not sure if it is right ??? Please help.

T(n) = 2*T(n-1) + c * logn 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T22:17:09.827

好的，我想我已经能够证明这一点`f(x) = Theta(2^x)`（注意时间复杂度是相同的）。这也证明了`g(x) = Theta(2^x)`as `f(x) > g(x) > f(x-1)`。

首先，正如大家所注意到的，很容易证明`f(x) = Omega(2^x)`.

现在我们有了`f(x) <= 2 f(x-1) + f(x/2)`（因为`f(x) > g(x)`）的关系

我们将证明，对于足够大`x`的 ，有一些常数`K > 0`使得

`f(x) <= K*H(x), where H(x) = (2 + 1/x)^x`

这意味着`f(x) = Theta(2^x)`, as `H(x) = Theta(2^x)`，它本身是由`H(x)/2^x -> sqrt(e) as x-> infinity`( [wolfram alpha](http://www.wolframalpha.com/input/?i=Limit%20x-%3E%20infinity%20%282%2b1/x%29%5Ex/2%5Ex) link of the limit) 得出的。

现在（**警告：**更重的数学，也许 cs.stackexchange 或 math.stackexchange 更适合）

根据[wolfram alpha](http://www.wolframalpha.com/input/?i=%282%20%2b%201/x%29%5Ex)（单击链接并查看 x = infinity 附近的级数展开），

`H(x) = exp(x ln(2) + 1/2 + O(1/x))`

再一次，根据[wolfram alpha](http://www.wolframalpha.com/input/?i=%282%20%2b%201/x%29%5Ex%20-%202%2a%282%20%2b%201/%28x-1%29%29%5E%28x-1%29)（单击链接（与上面不同）并查看 x = infinity 的级数展开式），我们有

`H(x) - 2H(x-1) = [1/2x + O(1/x^2)]exp(x ln(2) + 1/2 + O(1/x))`

所以

`[H(x) - 2H(x-1)]/H(x/2) -> infinity as x -> infinity`

因此，对于足够大`x`（例如`x > L`），我们有不等式

`H(x) >= 2H(x-1) + H(x/2)`

现在有一些`K`（仅取决于`L`（例如 K = f(2L))）使得

`f(x) <= K*H(x) for all x <= 2L`

现在我们进行（强）归纳（如果你愿意，你可以恢复到自然数）

`f(x+1) <= 2f(x) + f((x+1)/2)`

通过归纳，右边是

`<= 2*K*H(x) + K*H((x+1)/2)`

我们早些时候证明了

`2*H(x) + H((x+1)/2) <= H(x+1)`

因此`f(x+1) <= K * H(x+1)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T10:00:22.817

使用[memoisation](http://en.wikipedia.org/wiki/Memoizing)，这两个函数都可以在 O(n) 时间内轻松计算。但是该*程序*至少需要 O(2^n) 时间，因此是一种非常低效的计算方式，`f(n)`并且`g(n)`

为了证明程序对于任何 epsilon > 0*最多*花费O(2+epsilon)^n 时间：

令 F(n) 和 G(n) 分别是在计算 f(n) 和 g(n) 时进行的函数调用的数量。显然（将添加计为 1 个函数调用）：

F(0) = 1; F(n) = F(n-1) + G(n) + 1
G(1) = 1；G(n) = F(n-1) + G(n/2) + 1

那么可以证明：

*   F 和 G 是单调的
*   F > G
*   定义 H(1) = 2；H(n) = 2 * H(n-1) + H(n/2) + 1
*   显然，H > F
*   对于所有 n，H(n) > 2 * H(n-1)
*   因此 H(n/2) / H(n-1) -> 0 对于足够大的 n
*   因此 H(n) < (2 + epsilon) * H(n-1) 对于所有 epsilon > 0 且足够大的 n
*   因此对于任何 epsilon > 0 的 O((2 + epsilon)^n) 中的 H
*   （编辑：最初我在这里得出的结论是上限是 O(2^n)。这是不正确的，正如 nhahtdh 指出的那样，*但见下文*）
*   所以这是我能证明的最好的......因为 G < F < H 对于任何 epsilon > 0，它们也在 O((2 + epsilon)^n) 中

* * *

后记（在看到 Knoothes 先生的解决方案之后）：因为恕我直言，一个好的数学证明可以提供洞察力，而不是大量的公式，并且所有这些后代都存在 SO（嗨，女士们！）：

对于许多算法，计算 f(n+1) 涉及两倍（三倍，..）f(n) 的工作量，*再加上更多*。如果随着 n 的增加（通常是这种情况），使用上面的固定 epsilon 会变得相对较少，这不是最佳的。用 n 的某个递减函数 ε(n) 替换上面的 epsilon 在许多情况下（如果 ε 下降得足够快，比如 ε(n)=1/n）会产生一个上限 O((2 + ε(n))^ n ) = O(2^n)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-24T15:09:27.527

我认为很清楚 f(n) > 2 ^n，因为 f(n) > h(n) = 2h(n-1) = 2 ^n。

现在我声称对于每一个 n，都有一个**ε**满足： **f(n) < (2+ε) ^n**，为了看到这一点，让我们通过归纳来做，但首先为了让它更合理，我将使用 ε = 1，显示 f(n) <= 3 ^n，然后我将扩展它。

我们将使用强归纳法，假设对于每个 m < n, f(m) < 3 ^m那么我们有：

```
f(n) = 2[f(n-1) + f(n/2 -1) + f(n/4 -1)+ ... +f(1-1)] 
```

但是对于这一部分：

```
A = f(n/2 -1) + f(n/4 -1)+ ... +f(1-1) 
```

我们有：

```
f(n/2) = 2[f(n/2 -1) + f(n/4 -1)+ ... +f(1-1]) ==>

A <= f(n/2)   [1] 
```

所以我们可以重写 f(n)：

```
f(n) = 2f(n-1) + A < 2f(n-1) +f(n/2), 
```

现在回到我们的主张：

```
f(n) < 2*3^(n-1) + 2*3^(n/2)==>
f(n) < 2*3^(n-1) + 3^(n-1) ==>
f(n) < 3^n.  [2] 
```

通过*[2]*，完成了f(n)∈O(3 ^n )的证明。

但是如果你想把它扩展到 (2+ε) ^n的格式，只需用*[1](http://www.wolframalpha.com/input/?i=Limit%20x-%3E%20infinity%20%282%2b1/x%29%5Ex/2%5Ex)*来代替不等式，那么我们将有

**对于 ε > 1/(2+ε) ^(n/2-1) → f(n) < (2+ε) ^n** .[3]

同样通过*[3]*你可以说对于每个 n 都有一个 ε 使得**f(n) < (2+ε) ^n**实际上有一个常数 ε 使得对于 n > n [0] , f(n)∈O(( 2+ε) ^n )。[4]

现在我们可以像@Knoothe 一样使用[wolfarmalpha](http://www.wolframalpha.com/input/?i=Limit%20x-%3E%20infinity%20%282%2b1/x%29%5Ex/2%5Ex)，通过设置 ε=1/n，我们将拥有：

f(n) < (2+1/n) ^n这导致 f(n) < e*2 ^n，并且通过我们在开始时的简单下限，我们有：**f(n)∈ Θ(2^n)**。 [ 5]

PS：我没有准确计算epsilon，但是你可以用笔和纸简单地计算，我认为这个epsilon不正确，但很容易找到它，如果很难告诉我很难，我会​​写它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-24T08:35:20.973

令 f(0)=0 和 g(0)=0

从我们拥有的功能来看，

```
f(x) = f(x - 1) + g(x) 
g(x) = f(x - 1) + g(x/2) 
```

将 g(x) 代入 f(x) 我们得到，

```
f(x) = f(x-1) + f(x -1) + g(x/2) 
```

**∴f(x) = 2f(x-1) + g(x/2)**

扩展这个我们得到，

```
f(x) = 2f(x-1)+f(x/2-1)+f(x/4-1)+ ... + f(1) 
```

让 s(x) 是一个定义如下的函数，

```
s(x) = 2s(x-1) 
```

现在显然 f(x)=Ω(s(x))。

s(x) 的复杂度为 O(2 ^x )。

因此函数 f(x)=Ω(2 ^x )。

# database - how to get the root ancestors in a hierarchy query using oracle-10g?

> ID：15595850
> 
> 赞同：5
> 
> 时间：2013-03-24T06:36:00.313
> 
> 标签：database, oracle, tree, oracle10g, root

the table is very simple,pid means the parent id,and cid means the child id.And there may be more than one trees in the table.So my question is:
knowing ***several*** cid,how can we get the root ancestors
here is an example

**pid** **cid**
1 2
2 3
3 4
5 6
6 7
7 8

given cid = 4 or cid = 8,I want to get their root ancestors whose pid is 1 ro 5
finally,I'm using an ***oracle 10g***

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-07-24T16:43:51.303

在数据库环境中，顶层的外键很可能是空值，如下所示：

```
| pid  | cid  |
|------*------|
| null |  2   |
|  2   |  3   |
|  3   |  4   |
| null |  6   |
|  6   |  7   |
|  7   |  8   | 
```

所以我建议使用类似的东西：

```
select connect_by_root(t1.cid) as startpoint,
       t1.cid                  as rootnode
  from your_table t1
 where connect_by_isleaf = 1
 start with t1.cid in (8, 4)
connect by prior t1.pid = t1.cid; 
```

[小提琴](http://www.sqlfiddle.com/#!4/af6e3/1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T06:42:31.893

```
select 
  t1.cid,
  connect_by_root(t1.pid) as root
from 
  your_table t1
  left join your_table t2
    on t2.cid = t1.pid
where t1.cid in (4, 8)
start with t2.cid is null
connect by t1.pid = prior t1.cid 
```

[小提琴](http://www.sqlfiddle.com/#!4/1585a/3)

# c++ - Segmentation Fault in Constructor

> ID：15595856
> 
> 赞同：2
> 
> 时间：2013-03-24T06:36:46.473
> 
> 标签：c++, header-files, memory-segmentation

This happens with **EVERY** class I try to make in C++. Migrating from java, I find problems mainly in making classes. I run valgrind and it's in the constructor, it appears to be.

```
==30214== Memcheck, a memory error detector
==30214== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==30214== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==30214== Command: ./CoC
==30214== 
==30214== 
==30214== Process terminating with default action of signal 11 (SIGSEGV)
==30214==  Bad permissions for mapped region at address 0x404B4F
==30214==    at 0x4C2B9EC: strcat (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==30214==    by 0x404220: Model::Model(std::string) (in /home/kronus/Apollo/CoC)
==30214==    by 0x402617: main (in /home/kronus/Apollo/CoC) 
```

As you can see I'm trying to call the constructor of this model class into the main method. Here's the code for the constructor

```
Model::Model(std::string filename)
{
m_TotalFaces = 0;
m_model = lib3ds_file_load(filename.c_str());
    // If loading the model failed, we throw an exception
    if(!m_model)
    {
           throw strcat("Unable to load ", filename.c_str());
    }
} 
```

When it's called it closes with a segmentation fault. Important: I have declared the class inside the header file. This is when I get the error. I put the class inside the source file and it runs fine. What am I doing wrong?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T06:41:00.097

`strcat`尝试将第二个参数指向的字符串写在第一个参数指向的字符串的末尾。由于第一个参数是一个字符串文字（应该被认为是只读的），你会得到一个讨厌的段错误。

我建议学习 C++，就好像它是一种与 Java*完全不同的语言*，否则你可能会认为*相似*的特性功能*相同*。那很危险。猴子可以通过在键盘上捣碎它的脸来学习 Java。C++ 具有未定义的行为，它可能在您的机器上看起来正常运行，但在另一台机器上发射核导弹。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T06:39:56.243

您附加到一个错误的常量字符串：

```
strcat("Unable to load ", filename.c_str());
         ^ you can't append to constant 
```

请阅读：[*c++ 异常：抛出 std::string*](https://stackoverflow.com/questions/134569/c-exception-throwing-stdstring)
您可能希望避免将字符串用作异常类，因为它们本身可以在使用过程中抛出异常。

第二：[*如果我抛出一个字符串文字，我应该捕获什么类型？*](https://stackoverflow.com/questions/4831523/what-type-should-i-catch-if-i-throw-a-string-literal)

# http - URL monitor produces multiple ESTABLISHED (connection) entries in netstat

> ID：15595858
> 
> 赞同：4
> 
> 时间：2013-03-24T06:37:07.920
> 
> 标签：http, go

I wrote a URL monitor program in Go, but after a period of time I found many ESTABLISHED entries in `netstat -nao|grep 80`.

The getHttpStatusCode func:

```
 HttpClient = &http.Client{
        Transport: &http.Transport{
            Dial: func(netw, addr string) (net.Conn, error) {
                deadline := time.Now().Add(30 * time.Second)
                c, err := net.DialTimeout(netw, addr, 20*time.Second)
                if err != nil {
                    return nil, err
                }

                c.SetDeadline(deadline)
                c.SetReadDeadline(deadline)
                c.SetWriteDeadline(deadline)
                return c, nil
            },
        },
    }

// ...

func getHttpStatusCode(url string) int {
    if url == "" {
        return 200
    }

    req, err := http.NewRequest("GET", url, nil)
    if err != nil {
        return 0
    }

    req.Close = true
    req.Header.Add("User-Agent", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_3) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.57 Safari/537.17")
    resp, err := HttpClient.Do(req)
    if err != nil {
        return 0
    }

    defer resp.Body.Close()
    return resp.StatusCode
} 
```

I checked the Go manual and don't find something like req.Close() and just defer resp.Body.Close().

Here is the output of `netstat -nao | grep 80`:

> tcp 1343352 0 192.168.2.33:29581 220.181.155.19:80 ESTABLISHED off (0.00/0/0)

And the output of `tcpdump tcp port 80`:

```
14:32:54.085095 IP 113.12.80.13.http > wk_0_mysql.KIDC90805.zw.39174: Flags [.], seq 17376:18824, ack 1, win 42, options [nop,nop,TS val 4236145017 ecr 204896351], length 1448
14:32:54.109206 IP wk_0_mysql.KIDC90805.zw.25834 > 220.181.90.8.http: Flags [S], seq 714805337, win 14600, options [mss 1460,sackOK,TS val 204896416 ecr 0,nop,wscale 9], length 0
14:32:54.223349 IP 220.181.155.22.http > wk_0_mysql.KIDC90805.zw.19262: Flags [.], seq 864939135:864940583, ack 1630899997, win 42, options [nop,nop,TS val 1570834172 ecr 204896529], length 1448
14:32:54.223352 IP wk_0_mysql.KIDC90805.zw.19262 > 220.181.155.22.http: Flags [.], ack 1448, win 1301, options [nop,nop,TS val 204896530 ecr 1570834172], length 0
14:32:54.223432 IP 220.181.155.10.http > wk_0_mysql.KIDC90805.zw.27376: Flags [.], seq 3889371684:3889373132, ack 1106685068, win 42, options [nop,nop,TS val 3866364254 ecr 204896529], length 1448
14:32:54.223436 IP wk_0_mysql.KIDC90805.zw.27376 > 220.181.155.10.http: Flags [.], ack 1448, win 594, options [nop,nop,TS val 204896530 ecr 3866364254], length 0
14:32:54.275774 IP 121.12.101.130.http > wk_0_mysql.KIDC90805.zw.63329: Flags [.], seq 1314475629:1314477089, ack 642951590, win 54, length 1460 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T07:17:38.160

HTTP 客户端默认使用保持活动连接，您可以通过调用`transport.CloseIdleConnections`（来自[docs](http://golang.org/pkg/net/http/#Transport.CloseIdleConnections)）关闭它们。

我不确定 req.Close 对客户端请求有什么作用，它可能只针对服务器。

# javascript - 如何将类似数组的字符串转换为数组

> ID：15595865
> 
> 赞同：5
> 
> 时间：2013-03-24T06:38:38.550
> 
> 标签：javascript, jquery, underscore.js

我有一个看起来像数组的字符串：`"[918,919]"`。我想将它转换为数组，有没有比拆分并检查它是否是数字更简单的方法？谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-24T06:43:09.583

使用`JSON.parse`.

```
var myArray = JSON.parse("[918,919]"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T06:40:11.163

您可以去掉开头和结尾的括号，然后使用：

```
str.split(",") 
```

这将返回一个由逗号字符分割的数组。

**编辑**

```
var temp = new Array();
temp = "[918,919]".slice( 1, -1).split(",");
for (a in temp ) {
temp[a] = parseInt(temp[a]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-07T07:54:21.817

如果你使用`JSON.parse`的字符串必须有 " 而不是 ' 否则代码会失败。

例如：

```
let my_safe_string = "['foo','bar',123]";
let myArray = JSON.parse(my_safe_string) 
```

代码将失败

```
Uncaught SyntaxError: Unexpected token ' in JSON at position 1 
```

相反，如果你使用 " 一切都会工作

```
let my_safe_string = "["foo","bar",123]";
let myArray = JSON.parse(my_safe_string); 
```

所以你有两种可能将字符串数组转换为数组：

*   将 ' 替换为 "`my_safe_string.replace("'",'"');`并在 do 之后`JSON.parse`
*   如果您非常确定您的字符串只包含字符串数组，您可以使用 eval：

例子：

```
let myArray = eval(my_safe_string ); 
```

# php - 在 php 中存储在数组中的唯一对

> ID：15595868
> 
> 赞同：0
> 
> 时间：2013-03-24T06:38:58.067
> 
> 标签：php, arrays

我被困在一个场景中，我需要保存用户输入，比如......（在 1 中我得到了这些结果）

```
$string = "'a':'php,'b':'.Net' ...
'c'    'java'
'c'    'php'
'c'    'java'
'a'   'php'
'a'    'java' "; 
```

现在我需要将所有这些值存储在数据库中（只有唯一的对）。

到目前为止，我尝试了什么，用“，”分解了 $string，并将所有内容存储在一个数组中，例如

$array["a"] = "php";...但这也会覆盖 a = java... //问题

我不需要检查数据库是否已经存在..这已经处理（所有转储的数据一次性获得一个唯一标识符）。

我需要做的就是获取唯一的对并转储到数据库中......意味着

```
a = php, a = java, b = .net, c = java, c=php 
```

我能看到的唯一解决方案是......在爆炸后......检查数据库中的配对是否针对新的唯一标识......mysql_num_rows......如果不存在则转储否则不......

有什么简单的方法...？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:59:40.173

达到您的目的的最佳方法是创建多维数组

```
 <?php

        $string = "'a':'php','b':'.Net','c':'java','c':'php','c':'java','a':'php','a':'java'";
        $array = array();

        $temp_arr = explode(",", $string);

        foreach($temp_arr as $key=>$value)
        {
            list($tempkey,$tempValue) = explode(':', $value);
            $tempKey    = trim($tempkey,"'");
            $tempValue  = trim($tempValue,"'");
            $array[$tempKey][] = $tempValue; 
        }

        $array = array_map('array_unique',$array);

        echo "<pre>";
        print_r($array);

        ?> 
```

输出将是

```
Array
(
[a] => Array
    (
        [0] => php
        [2] => java
    )

[b] => Array
    (
        [0] => .Net
    )

[c] => Array
    (
        [0] => java
        [1] => php
    )

) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-24T07:05:22.440

```
$string = "'a':'php,'b':'.Net','c':'java','c':'php','c':'java','a':'php','a':'java'";

$temp = array_map(function($item) {
    list($key, $value) = explode(':', $item);
    return array(str_replace("'", "", $key) => str_replace("'", "", $value));
}, explode(",", $string));

$results = array();

foreach($temp as $item) {
    $key = key($item);
    if(!isset($results[$key]) || !in_array($item[$key], $results[$key])) {
        $results[$key][] = $item[$key];
    }
}

print_r($results); 
```

输出：

```
Array
(
    [a] => Array
    (
        [0] => php
        [1] => java
    )

    [b] => Array
    (
        [0] => .Net
    )

    [c] => Array
    (
        [0] => java
        [1] => php
    )

 ) 
```

# asp.net - Html.Beginform 强制添加控制器名称

> ID：15595869
> 
> 赞同：1
> 
> 时间：2013-03-24T06:39:21.757
> 
> 标签：asp.net, .net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

在 MVC4 中，使用

```
Html.BeginForm("/", null, FormMethod.Post, new{something="demo"}) 
```

结果形式有

```
action="//" 
```

因为它显然是在试图将控制器和操作挤入 url。但是，我使用 HomeController 作为默认控制器，所以我不希望 /Home/action 在 url 中。这在大多数地方都运行良好，但这种形式似乎让我绊倒了

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T10:32:57.393

那不是控制器名称。你会做这样的事情：

```
Html.BeginForm("Index", "Home", FormMethod.Post, new {something="demo"}) 
```

如果您的路由设置正确并且 Home/Index 是您的默认根路由，那么在渲染时，它将渲染到“/”。MVC 会自动优化路由以显示默认最小值（这是唯一的“/”）

如果您没有看到“/”，请查看您的路由，因为它无法正确反向生成 URL（可能不止一个路由匹配）。

如果您使用 Home/SomethingElse 并且它不是默认路由，那么我不太明白您想要做什么，因为您需要指定 Controller/Action 才能发布到它。

虽然我不推荐它，但您也应该能够做到这一点：

```
Html.BeginForm(null, null, FormMethod.Post, new {action="/", something="demo"}) 
```

但是，我认为这是一种 hack，我会鼓励您解决实际的路线问题。

# c++ - 编译器与引用的差异

> ID：15595872
> 
> 赞同：1
> 
> 时间：2013-03-24T06:39:35.180
> 
> 标签：c++, visual-c++, gcc

我编译了以下代码。

```
#include <iostream> 

int main(int argc, char* argv[]) {
    int a = 2; 
    int $b = a; 
    b = 3; 
    std::cout << a << std::endl;
    return 0; 
} 
```

当我在 Visual Studio 2012 中编译它时，它按预期输出 3。但是，当我在 g++ 3.4.4 中编译它时，我收到以下错误。

```
error: `b' undeclared (first use this function) 
```

为什么以下内容在 Visual Studio 2012 中编译但在 g++ 中不编译？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T06:46:44.213

看标题，我猜你正在尝试这样做：

```
int& b = a; 
```

`&`据我所知，是声明引用的唯一标准。

看看@H2CO3 回答为什么在 VS 中编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T06:46:22.033

> 为什么以下在 Visual Studio 2012 中编译

因为要么 VS 是废话，要么您将其设置为 C++/PHP 模式。

> 但不在 g++ 中？

因为`b`没有声明，只有`$b`.

# linux - 如何为 R 设置环境变量以在 RedHat Linux (RHEL6) 上的 Tomcat 中使用

> ID：15595879
> 
> 赞同：5
> 
> 时间：2013-03-24T06:40:15.090
> 
> 标签：linux, redhat, rhel, rjava, jri

我正在尝试在 RHEL6 (6.4) 上设置 R 和 Tomcat

我已经安装了 R 并且可以运行它。我已经安装了 Tomcat 7 并且可以托管文件文件。我已将应用程序打包为 WAR 文件并使用 tomcat 部署它。该应用程序在所有方面都运行良好，直到它使用任何 R 组件。

如 catalina.out 中所示，这是它崩溃并出现以下错误的地方：

```
Cannot find JRI native library!
Please make sure that the JRI native library is in a directory listed in java.li
brary.path.

java.lang.UnsatisfiedLinkError: /usr/local/lib64/R-2.15.3/library/rJava/jri/libj
ri.so: libR.so: cannot open shared object file: Too many levels of symbolic link
s
at java.lang.ClassLoader$NativeLibrary.load(Native Method)
at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1750)
at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1675)
at java.lang.Runtime.loadLibrary0(Runtime.java:840)
at java.lang.System.loadLibrary(System.java:1047)
at org.rosuda.JRI.Rengine.<clinit>(Rengine.java:19) 
```

我确实在 R 下安装了 rJava： install.packages("rJava") 它安装得很好，我在 R 的库文件夹中有 rJava。

我在 /etc/profile 中定义了以下内容：

```
export JAVA_HOME=/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre
export R_HOME=/usr/local/lib64/R-2.15.3
PATH=$PATH:$HOME/bin:$JAVA_HOME/bin:$R_HOME/bin
export PATH
export LD_LIBRARY_PATH=$R_HOME/lib/libR.so,$JAVA_HOME/lib/amd64/server/libjvm.so 
```

据我了解，这应该为服务器上的所有用户全局设置 JAVA_HOME、R_HOME、PATH 和 LD_LIBRARY_PATH。我知道 Tomcat 在 root 下运行，我可以确认 root 能够通过“ `echo $JAVA_HOME`”、“ `echo $R_HOME`”、“ `echo $LD_LIBRARY_PATH`”、“ `echo $PATH`”看到上面设置的所有路径

所以我不确定为什么它抱怨它无法打开那些 .so 文件。

此外，当它崩溃时，它会关闭 Tomcat。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-28T10:03:52.923

当我将 R 库与 tomcat 一起使用时，我遇到了同样的问题。它找不到 R_HOME。

解决方案是更新一个设置tomcat路径的文件，因为tomcat设置了自己的变量。该文件是“yourPathToTomcat/tomcat/bin/setclasspath.sh”，打开它并在末尾添加“export R_HOME=yourPathToR”（就像您在 linux 环境中添加的一样，例如：export R_HOME=/usr/lib/R） . 然后你可以运行你的应用程序，它会工作。希望它可以帮助某人。:D

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T08:51:01.727

要在 Java 中使用 R，您需要安装 JRI。幸运的是，JRI 现在是 rJava 的一部分并随它一起安装。

JRI 将需要它自己的本地共享库，该共享库已经与 rJava 一起安装。要找到使用 rJava 安装的 JRI，请使用

```
 system.file("jri",package="rJava") 
```

从 R [命令行] 内部。上面的命令会给你一个路径。您将能够找到

## libjri.so

这是 JRI 正在寻找的共享库。您可以将上面通过 JAVA_OPTS 检索到的路径指定为

```
 -Djava.library.path=${path-retrieved-from-R} 
```

这将在 Tomcat 初始化时传递给 JVM 设置。

如果您使用多个库，请相应地对库路径 java 选项进行分组。

# android - Android上的FFMPEG“没有这样的文件或目录”

> ID：15595887
> 
> 赞同：1
> 
> 时间：2013-03-24T06:41:12.613
> 
> 标签：android, http, url, ffmpeg

我正在尝试使用 ffmpeg 二进制文件并通过 android 中的本机 linux 命令调用它。大多数命令都可以正常工作，但问题是当我需要将 http url 作为输入传递给 -i 选项时，我得到的 url 为“没有这样的文件或目录”。但是，该 url 是存在的，并且在 mac 上运行 SAME 命令可以按预期完成工作。

这是我的 ffmpeg 构建的编译配置：

```
./configure \
$DEBUG_FLAG \
--arch=arm \
--cpu=cortex-a8 \
--target-os=linux \
--enable-runtime-cpudetect \
--prefix=$prefix \
--enable-pic \
--disable-shared \
--enable-static \
--cross-prefix=$NDK_TOOLCHAIN_BASE/bin/$NDK_ABI-linux-androideabi- \
--sysroot="$NDK_SYSROOT" \
--extra-cflags="-I../x264 -mfloat-abi=softfp -mfpu=neon" \
--extra-ldflags="-L../x264" \
\
--enable-version3 \
--enable-gpl \
\
--disable-doc \
--enable-yasm \
\
--enable-decoders \
--enable-nonfree \
--enable-encoders \
--enable-muxers \
--enable-demuxers \
--enable-parsers \
--enable-protocols \
--enable-protocol=http \
--enable-filters \
--enable-avresample \
\
--disable-indevs \
--enable-indev=lavfi \
\
--enable-hwaccels \
\
--enable-ffmpeg \
--enable-ffplay \
--enable-libmp3lame \
--enable-network \
\
--enable-libx264 \
--enable-libfaac \
--enable-zlib 
```

它基于这个项目：[https ://github.com/guardianproject/android-ffmpeg-java](https://github.com/guardianproject/android-ffmpeg-java)

命令是这样的：

```
ffmpeg -i "http://someurl" -f mp3 -ab 192000 -vn demoo.mp3 
```

这个想法是从视频中下载音轨并将其编码为 mp3。我明确添加了多个启用协议选项，但似乎没有任何效果。我也尝试了一个替代配置，删除下面的所有内容`enable-gpl`以确保没有任何冲突，但它会引发相同的错误。如果我给它一个正常的文件系统路径，它工作正常。

在此处的注释之后是命令的确切输出和输出：

```
03-25 00:22:08.806: VERBOSE/FFMPEG(16491): /data/data/org.ffmpeg.android/app_bin/ffmpeg -i "http://r6---sn-gvbxgn-tt1d.c.youtube.com/videoplayback?ipbits=8&cp=U0hVSVJLV19KUUNONV9KRUFJOnQ0STMtb0JXc0py&sparams=cp%2Cid%2Cip%2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&id=c0045acebe0c3341&upn=IVAGxSD1hE0&source=youtube&ratebypass=yes&mv=m&key=yt1&expire=1364209857&itag=18&ms=au&ip=99.234.119.90&mt=1364185033&fexp=923418%2C901802%2C906383%2C902000%2C919512%2C913605%2C931202%2C900821%2C900823%2C931203%2C931401%2C908529%2C919373%2C930803%2C920201%2C929602%2C930101%2C930603%2C926403%2C900824%2C910223&sver=3&newshard=yes&signature=838AEB4650D8353B70DBC49341E0C40706DC6153.297639FD70A7F9710F29AE9E278A4FC4A32E0C67" -f mp3 -ab 192000 -vn /data/data/org.ffmpeg.android/files/demoooo.mp3 -loglevel debug
03-25 00:22:08.956: DEBUG/ffmpeg(16491): Process exited with code:1
03-25 00:22:08.966: DEBUG/ffmpeg(16491): Shell output:ffmpeg version 0.11.1 Copyright (c) 2000-2012 the FFmpeg developers
03-25 00:22:08.976: DEBUG/ffmpeg(16491): Shell output:  built on Mar 24 2013 02:24:38 with gcc 4.6 20120106 (prerelease)
03-25 00:22:08.976: DEBUG/ffmpeg(16491): Shell output:  configuration: --arch=arm --cpu=cortex-a8 --target-os=linux --enable-runtime-cpudetect --prefix=/data/data/info.guardianproject.ffmpeg/app_opt --enable-pic --disable-shared --enable-static --cross-prefix=/Users/feribg/Dev/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/arm-linux-androideabi- --sysroot=/Users/feribg/Dev/android-ndk-r8d/platforms/android-3/arch-arm --extra-cflags='-I../x264 -mfloat-abi=softfp -mfpu=neon' --extra-ldflags=-L../x264 --enable-version3 --enable-gpl
03-25 00:22:08.976: DEBUG/ffmpeg(16491): Shell output:  libavutil      51\. 54.100 / 51\. 54.100
03-25 00:22:08.976: DEBUG/ffmpeg(16491): Shell output:  libavcodec     54\. 23.100 / 54\. 23.100
03-25 00:22:08.976: DEBUG/ffmpeg(16491): Shell output:  libavformat    54\.  6.100 / 54\.  6.100
03-25 00:22:08.986: DEBUG/ffmpeg(16491): Shell output:  libavdevice    54\.  0.100 / 54\.  0.100
03-25 00:22:08.996: DEBUG/ffmpeg(16491): Shell output:  libavfilter     2\. 77.100 /  2\. 77.100
03-25 00:22:08.996: DEBUG/ffmpeg(16491): Shell output:  libswscale      2\.  1.100 /  2\.  1.100
03-25 00:22:08.996: DEBUG/ffmpeg(16491): Shell output:  libswresample   0\. 15.100 /  0\. 15.100
03-25 00:22:08.996: DEBUG/ffmpeg(16491): Shell output:  libpostproc    52\.  0.100 / 52\.  0.100
03-25 00:22:08.996: DEBUG/ffmpeg(16491): Shell output:"http://r6---sn-gvbxgn-tt1d.c.youtube.com/videoplayback?ipbits=8&cp=U0hVSVJLV19KUUNONV9KRUFJOnQ0STMtb0JXc0py&sparams=cp%2Cid%2Cip%2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&id=c0045acebe0c3341&upn=IVAGxSD1hE0&source=youtube&ratebypass=yes&mv=m&key=yt1&expire=1364209857&itag=18&ms=au&ip=99.234.119.90&mt=1364185033&fexp=923418%2C901802%2C906383%2C902000%2C919512%2C913605%2C931202%2C900821%2C900823%2C931203%2C931401%2C908529%2C919373%2C930803%2C920201%2C929602%2C930101%2C930603%2C926403%2C900824%2C910223&sver=3&newshard=yes&signature=838AEB4650D8353B70DBC49341E0C40706DC6153.297639FD70A7F9710F29AE9E278A4FC4A32E0C67": No such file or directory 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T20:07:52.377

顺便说一句，如果您想翻录它的 youtube，请查看[youtube 音频](https://android.stackexchange.com/a/19386/12461)

RTSP java客户端库[在这里](https://stackoverflow.com/a/9250862/560435)

您是否正在从对 ffmpeg 的调用中读取 stderr？我敢打赌，如果您查看 ffmpeg stdout OR stderr 将包含有关尝试通过 http 连接到远程输入文件的网络接口出现问题的消息....

下面是获取 stderr 的 android 包装器的示例：

```
System.out.println("Starting process " +command.toString());
            ProcessBuilder builder = new ProcessBuilder(command);
            Map<String, String> environ = builder.environment();
//          for(Entry<String, String> entry : environ.entrySet()){
    //          System.out.println("ENV " +entry.getKey() + " " +entry.getValue());
      //      }
//          builder.redirectErrorStream(true);
            Process process = null;
            try {
                process = builder.start();

            InputStream is = process.getInputStream();

            InputStreamReader isr = new InputStreamReader(is);
            BufferedReader br = new BufferedReader(isr);
            String line;
            while ((line = br.readLine()) != null) {  
              //System.out.println(line);
                outfil=line;
            } 
```

# php - MYSQL/PHP 语法错误

> ID：15595888
> 
> 赞同：-9
> 
> 时间：2013-03-24T06:41:30.593
> 
> 标签：php, mysql, syntax

这是我页面顶部的 php 代码：

```
if(!$_SESSION['username']){
  header("Location: ../error.php?id=1");
}

$teamgamertag = $_POST["gamertag"];
$teamgame = $_POST["game"];
$teamtype = $_POST["type"];
$teamname = $_POST["name"];
$teamconsole = $_POST["console"];

if(isset($_POST["submit"])){
  $sql2 = mysql_query("INSERT INTO teams (name, game, players, creator, console, leaders, type, score) VALUES ('$teamname', '$teamgame', '$teamgamertag', '$teamgamertag', '$teamconsole', '$teamgamertag', '$teamtype', '0'") or die(mysql_error());

  if($sql2){
    header("../results.php?id=1");
  }else{
    exit();
  }
}
?> 
```

我不知道问题是什么以及在哪里解决它。提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T06:45:17.287

缺少 SQL 查询的结束括号：

```
'$teamgamertag', '$teamtype', '0'") 
```

它应该在这里：

```
'$teamgamertag', '$teamtype', '0')") 
```

此外，您的 SQL 容易受到注入攻击。不要手动创建查询字符串。使用准备好的语句：[PHP PDO 准备好的语句](https://stackoverflow.com/questions/1457131/php-pdo-prepared-statements)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T06:47:53.817

将您的代码替换为

```
<?php
if(!$_SESSION['username']){
  header("Location: ../error.php?id=1");
}

$teamgamertag = $_POST["gamertag"];
$teamgame = $_POST["game"];
$teamtype = $_POST["type"];
$teamname = $_POST["name"];
$teamconsole = $_POST["console"];

if(isset($_POST["submit"])){
  $sql2 = mysql_query("INSERT INTO teams (name, game, players, creator, console, leaders, type, score) VALUES ('$teamname', '$teamgame', '$teamgamertag', '$teamgamertag', '$teamconsole', '$teamgamertag', '$teamtype', '0')") or die(mysql_error());

  if($sql2){
    header('Location: ../results.php?id=1');
  }else{
    exit();
  }
}
?> 
```

# facebook - 为页面重置 facebook like url

> ID：15595899
> 
> 赞同：0
> 
> 时间：2013-03-24T06:43:41.427
> 
> 标签：facebook, facebook-like

我们网站上有几个页面只对登录用户开放。但是，这些页面的 url 是在 facebook 上共享的，每当 facebook 访问这些页面时，它都会被重定向到为未登录用户显示的公共页面。

现在，我们已经为所有人打开了这些页面，并在这些页面上实现了类似按钮。每当有人喜欢一个页面时，它也会反映在其他页面上，我假设这是因为 facebook 内部仍然认为所有页面都指向相同的 url。但是，我正在为这些页面设置 href 属性，但它仍然不起作用。

有没有办法可以重置这些页面的计数器并使 facebook 将它们视为新页面？我确实尝试过传递一些 GET 参数，但它仍然显示旧计数器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T06:46:44.810

在此 Facebook Lint 表单中输入 URL（或从应用程序使用适当的参数向此页面发出请求），它将清除 Facebook 对这些页面的缓存。

[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T07:05:12.237

我想到了。我只需要让 facebook 再次重新抓取这些页面。我本可以等待 24 小时，这是 facebook 抓取页面的频率。我选择使用 facebook linter，它使 facebook 立即查询 url

[http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)

# android - Android Fragment 中的 Linkify

> ID：15595901
> 
> 赞同：0
> 
> 时间：2013-03-24T06:43:53.607
> 
> 标签：android, android-fragments, linkify

我正在尝试在 Fragment 中使用 linkify，但我无法将其实际链接，也找不到有关如何正确使用它的文档。如果有人可以提供帮助，那就太好了！

联系片段.java：

```
public class ContactFragment extends SherlockFragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup group,
            Bundle saved) {

        View V = inflater.inflate(R.layout.activity_contact_fragment, group, false);

        TextView myEmail= (TextView) V.findViewById(R.id.textView1);
        myEmail.setText("info@komodostudios.com");
        Linkify.addLinks(myEmail, Linkify.EMAIL_ADDRESSES);

        return inflater.inflate(R.layout.activity_contact_fragment, group, false);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

    }
} 
```

activity_contact_fragment.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".ContactFragment" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="info@komodostudios.com" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T07:04:30.980

您`View`从`onCreateView`方法返回错误。它应该`return V;`代替`return inflater.inflate(R.layout.activity_contact_fragment, group, false);`

# jquery - 以html形式切换隐藏和显示

> ID：15595905
> 
> 赞同：2
> 
> 时间：2013-03-24T06:45:09.677
> 
> 标签：jquery, html, css

我想显示和隐藏 html 表单的可见性。I have 2 modes when mode 1 is selected then the form should show up with the text box and when mode 2 is selected the form with radio buttons should show up and mode 1 should be hidden and initially everything is hidden. 这是我到目前为止所做的，但我的 jQuery 的 css 无法应用。

HTML 表单

```
<form>
  <fieldset>
    <legend>Lets switch</legend>
     Mode 1 
    <input type="radio" class="modeClass" name="change_mode" value="Text box">
     Mode 2  
    <input type="radio" class="modeClass" name="change_mode" value="Radio buttons"> <br>
    <div id= "text_form">
   <label class="hidden"> Name:</label> <input type="text" class ="hidden"><br>
   <label class= "hidden"> Email:</label> <input type="text" class ="hidden"><br>
    <label class= "hidden"> Date of birth:</label> <input type="text" class ="hidden">
    </div>
   <div id="radio_form">
   <input type="radio" name="sex" class ="hidden" value="male"><label  class="hidden">Male</label>
   <input type="radio" name="sex" class="hidden" value="female"><label class= "hidden">Female</label>
   </form>
  </fieldset>
</form> 
```

CSS

```
<style>
.hidden 
{

  display:none;

} 
</style> 
```

jQuery

```
 $(document).ready(function(){

    /*Getting the value of the checked radio buttons*/
    $("input:radio[class=modeClass]").click(function() {
       var value = $(this).val();
     /*  console.log(value);*/
    if(value=="Text box")
    {

    $("#text_form").css("display","block");
   /* console.log("Time to call input box");*/
    }

    if(value=="Radio buttons")
    {

    $("#radio_form").css("display","block");

    }

    });

    }); 
```

任何想法建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T06:56:38.517

你不需要申请`class="hidden"`这么多元素。[这](http://jsfiddle.net/Hu9Ka/)是一个工作代码的小提琴。

## HTML

```
<form>
    <fieldset>
        <legend>Lets switch</legend>Mode 1
        <input type="radio" class="modeClass" name="change_mode" value="Text box" />Mode 2
        <input type="radio" class="modeClass" name="change_mode" value="Radio buttons" />
        <br />
        <div id="text_form" class="hidden">
            <label>Name:</label>
            <input type="text" />
            <br />
            <label>Email:</label>
            <input type="text" />
            <br />
            <label>Date of birth:</label>
            <input type="text" />
        </div>
        <div id="radio_form" class="hidden">
            <input type="radio" name="sex" value="male" />
            <label>Male</label>
            <input type="radio" name="sex" value="female" />
            <label>Female</label>
        </div>
    </fieldset>
</form> 
```

## jQuery

```
$(document).ready(function () {
    /*Getting the value of the checked radio buttons*/
    $("input.modeClass").on( 'click', function () {
        var value = $(this).val();
        if (value == "Text box") {
            $("#text_form").show();
            $("#radio_form").hide();
        }
        if (value == "Radio buttons") {
            $("#text_form").hide();
            $("#radio_form").show();
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T07:00:55.597

你应该试试这个

[http://jsfiddle.net/pramodsankar007/u9RZy/](http://jsfiddle.net/pramodsankar007/u9RZy/)

```
<form>
    <fieldset>
        <legend>Lets switch</legend>Mode 1
        <input type="radio" class="modeClass" name="change_mode" value="Text box">Mode 2
        <input type="radio" class="modeClass" name="change_mode" value="Radio buttons">
        <br>
        <div id="text_form" class="hidden">
            <label>Name:</label>
            <input type="text">
            <br>
            <label>Email:</label>
            <input type="text">
            <br>
            <label>Date of birth:</label>
            <input type="text">
        </div>
        <div id="radio_form" class="hidden">
            <input type="radio" name="sex" value="male">
            <label>Male</label>
            <input type="radio" name="sex" value="female">
            <label>Female</label>
</form>
</fieldset>
</form>

$("input:radio[class=modeClass]").click(function () {
      var value = $(this).val();
      if (value == "Text box") {
          $("#radio_form").show();
          $("#text_form").hide();
          /* console.log("Time to call input box");*/
      }
      if (value == "Radio buttons") {
         $("#radio_form").hide();
          $("#text_form").show();

      }
  }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T07:06:40.663

你的 jquery 看起来还不错，但你需要一点额外的：

```
$(document).ready(function(){
    $("input:radio[class=modeClass]").click(function() {
       var value = $(this).val();
       if(value=="Text box"){
           $("#text_form").show().siblings("#radio_form").hide();
       }

       if(value=="Radio buttons"){
           $("#radio_form").show().siblings("#text_form").hide();
       }
    });
}); 
```

### [在这里提琴](http://jsfiddle.net/dqhZC/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T06:52:52.437

Jquery 有 hide 和 show 方法。

```
$("#text_form).hide(); 
```

还有一个切换，如果您不知道当前是否显示，这会有所帮助。

[http://api.jquery.com/hide/](http://api.jquery.com/hide/)

[http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-24T07:00:32.960

我不是`.show()`/`.hide()`因为它会导致其他不一致。我创建了一个带有稍微改进的代码版本的实时 JSFiddle。就像 Dream Eater 所做的那样，我将您的所有`class='hidden'`语句合并到父`div`元素中，使其更清洁且更易于使用。此外，您不需要该`.css('display', 'block')`方法，因此已将其删除。除此之外，代码很好，这就是你要找的：

链接--> **[http://jsfiddle.net/CFP9N/](http://jsfiddle.net/CFP9N/)**

# java - Java 小程序忽略 getWidth()

> ID：15595907
> 
> 赞同：0
> 
> 时间：2013-03-24T06:45:37.663
> 
> 标签：java

我正在尝试使用 GRect 在 Java 中构建金字塔。我使用 getWidth() 将金字塔定位在画布的中心，但它往往会绊倒金字塔的左侧。

我正在通过[CS106A](http://see.stanford.edu/see/courseinfo.aspx?coll=824a47e1-135f-4508-a5aa-866adcae1111)学习编程并使用 Java 1.6，因此尝试获取其他人的代码，他们也显示了相同的错误。我试图画一个简单的矩形，它工作正常。

Java 小程序是否存在问题，因为它倾向于完全忽略 getWidth() 值。我使用了 println(); 获取 getWidth() 值并且它有效。

```
 import acm.graphics.GRect;
    import acm.program.GraphicsProgram;

    public class Pyramid extends GraphicsProgram {

    /**
     * eclipse generated SVUID
     */
    private static final long serialVersionUID = 5703830460071233096L;

    /** Width of each brick in pixels */
    private static final int BRICK_WIDTH = 30;

    /** Width of each brick in pixels */
    private static final int BRICK_HEIGHT = 12;

    /** Number of bricks in the base of the pyramid */
    private static final int BRICKS_IN_BASE = 14;

    public void run() {
        //centering the pyramid
        int _canvasWidth = getWidth();  //canvas width
        //println(_canvasWidth);    //to check if getWidth returns a value
        int _brickSpace = BRICKS_IN_BASE * BRICK_WIDTH; //space consumed by the base row
        int _freeSpace = _canvasWidth - _brickSpace;    //empty base level space
        int _xOffset = _freeSpace / 2;  //x for left most brick of base row

        for(int row=0; row<BRICKS_IN_BASE; row++){  //the row number
            int _rowTab = (BRICK_WIDTH/2) * row;    //indentaion for each row
            int _brickInRow = BRICKS_IN_BASE - row; //bricks as per row
            for(int _brickNumber=0; _brickNumber<_brickInRow; _brickNumber++){  //placing bricks till _brickInRow
                int x = (_xOffset + _rowTab) + (_brickNumber * BRICK_WIDTH);
                int y = (BRICK_HEIGHT * (BRICKS_IN_BASE - row));    //y as per row num
                GRect _brick = new GRect(x, y, BRICK_WIDTH, BRICK_HEIGHT);  //creating brick instance
                add(_brick);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T07:28:27.717

我尝试了您的代码，它首先在中心绘制了金字塔，但是当我调整查看器窗口的大小时出现了问题。关键是Java applet 有一个`public void paint(Graphics g)`被调用的继承方法，每当必须绘制applet 时就会调用该方法。调整查看器窗口的大小是调用paint 方法的情况之一。

所以，要解决这个问题，你需要重写paint方法，即。添加这样的方法：

```
 public void paint(Graphics g) {
    this.run();
    super.paint(g);
    } 
```

每次调整窗口大小时都会调用此方法。但是请记住，您不需要多个金字塔，因此在您的`run`方法中添加以下行以在添加新砖之前删除所有以前的砖。

```
 removeAll(); 
```

# assembly - 我可以跳出当前正在执行的函数吗？

> ID：15595911
> 
> 赞同：0
> 
> 时间：2013-03-24T06:46:01.150
> 
> 标签：assembly, x86

来自[CSAPP 的 buflab 的](http://csapp.cs.cmu.edu/public/labs.html)一个问题。我被要求输入一些足够长的利用代码来破坏堆栈。在第 2 阶段，我需要首先更改名为**global_value**的全局变量的值，然后调用名为**bang**的函数。但是，它只有在我将 bang 的地址压入堆栈然后返回时才有效。

```
#codes before set the value of global_value
movl $0x12345678,%eax         /* 0x12345678 is the address of bang */
push %eax
ret 
```

如果我使用直接跳转

```
#codes before set the value of global_value
jmp 0x12345678 
```

然后我在 gdb 的 0x5abcdefg 之类的地方完全迷失了。任何人都可以帮忙吗？这与模式的寻址有什么关系吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T06:57:29.430

你怎么知道`jmp 0x12345678`真的是`jmp 0x12345678`？

所有从直接操作数获取跳转地址的非远跳转都相对于紧跟该`jmp`指令的指令的位置。

因此，如果您在内存中有以下内容：

```
Address    Contents
0x55555555 E9 78 56 34 12 
```

那么这是跳转到 0x55555555 + 5（jmp 指令长度）+ 0x12345678 = 0x6789ABD2。

OTOH，如果你有这个：

```
Address    Contents
0x55555555 E9 1E 01 DF BC 
```

那么这是跳转到 0x55555555 + 5（jmp 指令长度）+ 0xBCDF011E = 0x12345678。

# php - 由于不活动而导致会话超时

> ID：15595913
> 
> 赞同：5
> 
> 时间：2013-03-24T06:46:14.627
> 
> 标签：php

我创建了一个脚本`login.php`，并在那里创建了一个名为的会话变量`logged_in`

```
$_SESSION['logged_in'] = true; 
```

在会话由于不活动而到期后，我无法找到一种方法来重定向以重定向到我的 logout.php。我还应该放置使该会话变量过期的代码。`php.ini`我已经用谷歌搜索了这个错误，它建议在大多数文章中调整文件。但是我看到一篇文章说这不是最佳实践。

我在 StackOverflow 上找到了以下代码，但我不知道该放在哪里：-

```
<?php
  if ($_SESSION['timeout'] + 10 * 60 < time()) {
     // session timed out
  } else {
     // session ok
  }
?> 
```

我想知道会话过期后重定向的最佳方式以及代码放置位置的建议。

编辑：我忘了提到我想知道如何手动设置会话到期的时间。

先感谢您

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-24T07:53:02.290

如果您想在用户长时间不活动时尝试加载页面时注销用户，您应该将此代码放在每个 php 文件的顶部（在任何其他 html 标记之前）：

```
if( $_SESSION['last_activity'] < time()-$_SESSION['expire_time'] ) { //have we expired?
    //redirect to logout.php
    header('Location: http://yoursite.com/logout.php'); //change yoursite.com to the name of you site!!
} else{ //if we haven't expired:
    $_SESSION['last_activity'] = time(); //this was the moment of last activity.
} 
```

另外，在您成功登录后，将此代码放在您登陆的页面顶部：

```
$_SESSION['logged_in'] = true; //set you've logged in
$_SESSION['last_activity'] = time(); //your last activity was now, having logged in.
$_SESSION['expire_time'] = 3*60*60; //expire time in seconds: three hours (you must change this) 
```

在该页面上，您不必包含我首先给您的检查代码。

对了，别忘了`<?php`正确添加标签！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T07:28:20.337

实现这个想法：

```
$expire_time = 3*60*60; //expire time
if( $_SESSION['last_activity'] < time()-$expire_time ) {
    echo 'session expired';
    die();
}
else {
    $_SESSION['last_activity'] = time(); // you have to add this line when logged in also;
    echo 'you are uptodate';
} 
```

# c# - WPF Data Grid View 默认 Checkbox 值获取

> ID：15595920
> 
> 赞同：0
> 
> 时间：2013-03-24T06:46:53.827
> 
> 标签：c#, wpf

我正在开发一个 WPF Windows 应用程序，我需要帮助来解决其中的一些问题。

我有一个数据网格视图；这是一个 XML：

```
<DataGrid x:Name="MyDataGrid" Margin="0,55.333,8,209.692" Width="273.27">
 <DataGrid.Columns>
                <DataGridTextColumn Header="ID" IsReadOnly="True" Binding="{Binding ID}" Visibility="Hidden" />
                <DataGridTextColumn Header="CopID" IsReadOnly="True" Binding="{Binding CopID}" Visibility="Hidden"/>
                <DataGridTextColumn Header="CgID" IsReadOnly="True" Binding="{Binding CgID}" Visibility="Hidden"/>
                <DataGridTextColumn Header="Item Names" Width="190" IsReadOnly="True" Binding="{Binding ItemName}"/>
                <DataGridCheckBoxColumn  Header="Select" CanUserReorder="False" />
            </DataGrid.Columns>
</DataGrid> 
```

我想`DataGridCheckBoxColumn CheckBox`在循环中检查是真还是假我希望这是在用户单击按钮时读取列值；这是代码：

```
for (int i = 0; i < MyDataGrid.Items.Count - 1; i++)
{
    /*Some code here for Check CheckBox True or False*/
    for (int j = 0; j < MyDataGrid.Columns.Count; j++)
    {      
      string Massage = (MyDataGrid.Items[j] as DataRowView).Row.ItemArray[3].ToString();
      MessageBox.Show( Massage);
     }
 } 
```

我想`CheckBox`在循环中检查是真还是假，以获取检查的那一行列的值`CheckBox`我希望有人可以帮助我竞争我已经放弃的代码。我希望此代码在用户单击按钮时起作用，因为我必须使用此循环在数据库中保存记录，`CheckBox`其中`MyDataGrid`.

`CheckBox`当我要检查调用全选时，我还想选中数据网格的所有复选框。希望有朋友能尽快帮帮我谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:23:39.193

我首先要说的是，通常情况下，您不应该这样做，这就是为什么它比您预期的要困难。您通常应该访问基础数据源而不是 DataGrid 本身中的单元格。

也就是说，这*是*可能的。例如：

```
private void ButtonBase_OnClick(object sender, RoutedEventArgs e)
{
        const int CHECKBOX_COLUMN = 4;
        for (int i = 0; i < MyDataGrid.Items.Count - 1; i++)
        {

            DataGridCell cell = GetCell(i, CHECKBOX_COLUMN);
            CheckBox tb = cell.Content as CheckBox;
            MessageBox.Show(tb.IsChecked.ToString());
        }
} 
```

在哪里`GetCell()`可以找到函数（以及 GetCell 使用的内部函数）[here](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/b7299e55-92e2-4a6b-8987-869fef8f22eb/)

# java - 根据 appengine SDK 1.7.6，连接到后端现在失败

> ID：15595921
> 
> 赞同：0
> 
> 时间：2013-03-24T06:46:55.950
> 
> 标签：java, android, google-app-engine, google-cloud-endpoints

我有一个带有 GAE 后端的 android 应用程序。我部署了后端，并且我曾经能够在数据存储中存储实体。但是在最近的 1.7.6 sdk 更新之后，我不能再这样做了。连接到服务，以前是[https://1.myapp.appspot.com/_ah/api/](https://1.myapp.appspot.com/_ah/api/)，但是现在会产生未经验证的错误。我尝试将其更改为[https://-1-myapp.appspot.com](https://-1-myapp.appspot.com)就像文档说的那样，但这只会产生 404 错误。无论如何围绕这个？

# testing - UTF16/32 测试用例（需要负测试用例）

> ID：15595924
> 
> 赞同：-1
> 
> 时间：2013-03-24T06:47:22.040
> 
> 标签：testing, unicode, utf-8, utf-16, utf-32

我想要/需要一个测试用例来测试/破坏 UTF-32 和 UTF-16 之间的转换。

对于 UTF-8 和 UTF-16，我一般使用 'Chinese Bone' 测试：0xE9 0xAA 0xA8 (UTF8) 和 0x9AA8 (UTF16)。

有没有人有一个负面的测试用例应该破坏 UTF-16 和 UTF-32 的编写不佳的实现？理想情况下，测试将需要使用至少两个 UTF-32 值。

杰夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:34:18.407

不知道你的意思，这里有一些：

UTF-16

*   带领代理人与常规单位或其他主要代理人跟随`\xD8\x00\x00\x00`或`\xD8\x00\xDB\xFF`
*   在它之前没有前导代理的跟踪代理`\x00\x61\xDC\00`
*   领先位置的跟踪代理`\xDF\xFF\xDB\xFF`
*   铅替代品作为最后一个单位`\xD8\x01<EOF>`
*   引导代理作为最后一个单元，然后是半步代理。此错误存在于 python 2.7.3 中：`'\xD8\x00\xDC'.decode('utf-16be')`

UTF-32

*   单位值返回true`value < 0`或`value > 0x10FFFF``0xD800 <= value && value <= 0xDFFF`

# sqlcmd - 您如何使用 SQLCMD 登录 SQL Server Express，用户未设置密码

> ID：15595927
> 
> 赞同：1
> 
> 时间：2013-03-24T06:47:54.660
> 
> 标签：sqlcmd

我安装了 SQL Server 2012 Express，并且正在从一本关于 SQL Server 管理的书中学习。我的任务是编写一个批处理文件来从表中复制数据并将其导出到 Excel 电子表格中。

我有正确的实例名称和我的用户名，但由于密码登录失败。当我进入 Management Studio 并单击连接时，我看到我的用户名但密码为空，我以这种方式成功连接到我的数据库。如何为我的帐户设置密码？我想我无法使用 SQLCMD 登录，因为我没有这个设置。我的用户名与我的 windows 用户名相同，使用我登录 windows 时使用的密码不起作用。

```
SQLCMD -S CRAIG-PC\SQLExpress -U CRAIG-PC\Craig -P ********* 
       -d AdventureWorks 
       -Q "SELECT * FROM Sales.SalesOrderDetail" -o C:\ExportDir\export.csv 
```

这是我尝试连接和查询数据库的批处理文件中的命令。如果我取出 `-P *******`SQL Server 正在等待密码。如果我不使用用户名或密码连接将被拒绝。

使用 tcp 启用远程连接，但这是本地安装。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-29T22:54:59.050

使用“-E”开关使您的连接成为受信任的（Window 的身份验证）连接，那么您根本不需要用户名和密码（前提是您在计算机上有足够的权限）

[http://technet.microsoft.com/en-us/library/ms162773.aspx](http://technet.microsoft.com/en-us/library/ms162773.aspx)

请注意，在下面的 python 代码中，我没有实现用户或密码。

希望有帮助

```
 _query = "CREATE DATABASE %s ON (FILENAME = '%s'), (FILENAME = '%s') FOR ATTACH;" %(_database, mdffilepath, logfilepath)

    command_process = SubP.Popen(['sqlcmd','-b', '-E',
                              '-S', _server,
                              '-d', 'master',
                              '-q', _query],
                             stdin = SubP.PIPE,
                             stdout = SubP.PIPE, 
                             stderr = SubP.STDOUT, 
                             shell = True)

    _stdOut, _stdError = command_process.communicate() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T20:09:29.777

听起来您正在使用 Windows 身份验证，您可以删除 -u 和 -p。如果未提供这些，则 sqlcmd 将使用 Windows 身份验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T07:20:40.817

检查数据库名称，即“AdventureWorks”应为“AdventureWorks2012”

# python - 应用傅立叶变换后 scipy.io 波形文件处理的问题

> ID：15595928
> 
> 赞同：2
> 
> 时间：2013-03-24T06:47:59.873
> 
> 标签：python, scipy, fft, wav, wave

我正在使用 scipy.fftpack 和 scipy.io 包在 Python 中处理一些音频文件。这意味着我有要导入的波形文件，使用傅里叶变换处理它们，然后输出到新的波形文件。但是，我遇到了一些问题，在运行这些转换后，波形文件将无法播放，并且大约是原始文件大小的 4 倍。

目前我只是导入歌曲，从导入中获取速率，数据片段，执行 ifft(fft(data)) 然后输出。我尝试采用这些浮点值并将其转换为整数并计算初始导入数据与 ifft(fft(data)) 之间的差异，发现它正好为零。

所以以下是我的问题：

1.  有谁知道为什么我在进行傅立叶变换后尝试播放的波形文件无法播放？

2.  波形文件是否有任何限制可能会导致一般问题。还是数据必须是整数？

已经很晚了，我觉得我的帖子可能是分散的，所以如果您需要更多信息，请询问，我会尽力提供更好的描述。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T08:11:35.167

您需要在处理后将数据转换为适当位深度的整数类型。以[这个文件](http://koolwap.in/ring/dld.php?url=/music/5HWQapPV/Happy_Tree_Friends.htm&ext=wav)为例：

```
>>> import scipy.io.wavfile
>>> rate, data = scipy.io.wavfile.read('Happy Tree Friends.wav')
>>> rate
8000
>>> data
array([ 5, -5,  5, ...,  0, -1,  0], dtype=int16)
>>> data_bis = np.fft.ifft(np.fft.fft(data))
>>> data_bis
array([  5.00000000e+00 -1.55406753e-11j,
        -5.00000000e+00 +1.95349676e-11j,
         5.00000000e+00 +1.41131140e-11j, ...,
         8.06674092e-12 -7.58643463e-13j,
        -1.00000000e+00 -2.21611283e-12j,  -2.04999489e-11 +4.55890751e-12j])
>>> data_bis.dtype
dtype('complex128') 
```

尽管 中的值`data`非常接近 中的值`data_bis`，但它们是非常不同的野兽，如下所示：

```
>>> scipy.io.wavfile.write('test.wav', rate, data_bis)
>>> scipy.io.wavfile.read('test.wav')
TypeError: data type not understood 
```

但是，如果您只是将处理后的结果转换回原始结果`dtype`，一切都会再次正常运行：

```
>>> scipy.io.wavfile.write('test.wav', rate, data_bis.astype(data.dtype))
__main__:1: ComplexWarning: Casting complex values to real discards the imaginary part
>>> scipy.io.wavfile.read('test.wav')
(8000, array([ 4, -5,  4, ...,  0, -1,  0], dtype=int16)) 
```

# html - 为什么不将填充应用于表格元素？

> ID：15595932
> 
> 赞同：18
> 
> 时间：2013-03-24T06:49:12.703
> 
> 标签：html, css

这更像是一个“告诉我为什么它不起作用”而不是“帮我解决它”的问题。如果我尝试对表格中的 thead 或 tr 元素应用填充，它不起作用。填充工作的唯一方法是如果我将它直接应用于 th 或 td 元素。为什么会这样？是否有一种简单的方法可以将填充应用于整个 thead 或 tr 或者将其添加到 th 和 td 唯一的选择？

```
<table>
    <thead>
        <tr>
            <th>Destination</th>
            <th>Size</th>
            <th>Home Value</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>test 1</td>
            <td>test 2</td>
            <td>test 3</td>
        </tr>
    </tbody>
</table> 
```

注意thead 上的 10px 内边距。

```
table {
    width: 100%;
}

thead {
    text-align: left;
    background-color: yellow;
    padding: 10px;
} 
```

[http://jsfiddle.net/5VQB7/](http://jsfiddle.net/5VQB7/)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-24T06:57:39.513

[http://www.w3.org/TR/CSS2/box.html#propdef-padding](http://www.w3.org/TR/CSS2/box.html#propdef-padding)

> **'填充'**
> 
> *适用于：* 除table-row-group、table-header-group、table-footer-group、**table-row**、table-column-group 和 table-column之外的**所有元素**

 *** * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-24T06:54:57.223

尝试将填充放在`th`元素中。通常，您希望根据情况向`th`or`td`元素添加填充。

```
thead th {
  padding: 10px;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-24T09:48:26.493

CSS2.1 的相关部分：**[表格](http://www.w3.org/TR/CSS21/tables.html)**

请看一下这张图：[表层](http://www.w3.org/TR/CSS21/tables.html#table-layers)。`padding`只能应用于`table`整体或`th`单元`td`格afaik。也不要忘记`caption`。其他层在各种表格布局算法中足够复杂，无法对其应用填充^^

这是一个小提琴[http://jsfiddle.net/QB97d/1/](http://jsfiddle.net/QB97d/1/)显示您可以使用的其他属性。

*   `border-spacing: 8px 10px;`就像表格的每个单元格周围*的边距。*摆脱它`border-collapse: collapse;`
*   `table-layout: fixed;`将触发一个完全不同的算法（“*我告诉你的渲染宽度，不再关心每个单元格中内容的相对数量*”）
*   `border`是另一种在元素周围给予空间的方式，围绕`padding`
*   `empty-cells: hide`可能触发特殊行为

此小提琴中未显示：

*   使用选择器在 IE9+ 中选择表格的 4 个角，每个角都有一个 thead 元素和未知类型的单元格（我会让你找到 4 个边；））：

    *   `thead th:first-child, thead td:first-child`,
    *   `thead th:last-child, thead td:last-child`,
    *   `tbody:last-child tr:last-child th:first-child, tbody:last-child tr:last-child td:first-child`
    *   `tbody:last-child tr:last-child th:last-child, tbody:last-child tr:last-child td:last-child`
*   `box-sizing: border-box`（及其供应商前缀）用于计算单元格宽度，考虑到填充和边框宽度（就像 IE6 在 Quirks 模式下所做的那样，*哦具有讽刺意味......*）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-08-23T10:25:45.867

## `thead`和之间的填充`tbody`

不幸的是，填充不适用于`thead`,`tbody`也不`tr`。

**尽管如此，通过选择表体第一行的数据单元格，**可以在 和 之间实现`thead`更多的填充：`tbody`

 **```
tbody tr:first-child td {
    padding-top: 2.5ex;
} 
```

这样做会**保留任何****标题边框**的相对位置。

 *** * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-24T06:54:54.790

如果您需要在 thead 中应用 css 然后 css 修改，则 thead 不支持 css 属性“填充”：

```
thead tr th {
    text-align: left;
    background-color: yellow;
    padding: 10px;
} 
```

或者

```
th {
    text-align: left;
    background-color: yellow;
    padding: 10px;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-24T06:56:35.507

左右划桨总是适用于 td 或 th 。

但是，在 padding-top 和 padding-bottom 的情况下，您要求 td （或 th ）增加它的高度。那么兄弟姐妹呢？？你期望会发生什么？？

因此，要使填充顶部或底部起作用，您应将其应用于其父单元格行。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-24T07:01:58.113

因为标签 like and 它们不是用来填充表格的，而是用来包含其他元素的。让我们说清楚：如果您想在表格中添加标题，则不会将其插入，而是将其添加到内部，同样，如果您想在表格中填充数据，则需要将它们插入其中

我希望这个答案能澄清你的问题******

# filter - Hibernate Search 中的 DuplicateFilter

> ID：15595943
> 
> 赞同：2
> 
> 时间：2013-03-24T06:51:54.257
> 
> 标签：filter, lucene, hibernate-search

我知道 Lucene 中有一个内置的 DuplicateFilter，可以对 lucene 的结果进行重复数据删除。这是用户在文档数据库中搜索的一个非常重要的功能，其中重复率非常高。

当我使用 Hibernate Search 进行全文索引/搜索时，想知道是否有办法让我将 Lucene 上的 DuplicateFilter 带到 Hibernate Search？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:27:36.073

可以通过使用[过滤器](http://docs.jboss.org/hibernate/stable/search/reference/en-US/html_single/#query-filter)。请参阅- 它以与[DuplicateFilter](http://lucene.apache.org/core/4_0_0-BETA/sandbox/org/apache/lucene/sandbox/queries/DuplicateFilter.html)相同的方式`BestDriversFilter`扩展[org.apache.lucene.search.Filter](http://lucene.apache.org/core/4_0_0-BETA/core/org/apache/lucene/search/Filter.html?is-external=true)。

# java - java.lang.String 和 String 之间的类型不匹配错误

> ID：15595946
> 
> 赞同：6
> 
> 时间：2013-03-24T06:52:23.363
> 
> 标签：java, string, types, variable-assignment, mismatch

这真是一个奇怪的问题，我从来没有遇到过这样的事情。以下是我在一个更大的类中声明的辅助类。它运行得很好：

```
private static class Tree<String> {
    private Node<String> root;

    public Tree(String rootData) {
        root = new Node<String>();
        root.data = rootData;
        root.children = new ArrayList<Node<String>>();
    }

    private static class Node<String> {
        String data;
        Node<String> parent;
        ArrayList<Node<String>> children;
    }
} 
```

然而，通过胡闹，我发现了一个令人困惑的问题。通过替换此行：

```
root.data = rootData; 
```

和：

```
root.data = "some string literal"; 
```

我收到此错误：

```
Type mismatch: cannot convert from java.lang.String to String 
```

我在其他类中测试了一些字符串文字赋值，它似乎工作得很好。我最近更新到 Java 1.7.0_15，最近下载并安装了 Eclipse 4.2。我怀疑构建路径或其他东西可能有些混乱。使用 Ubuntu 12.04

任何帮助将不胜感激！我已经搜索和搜索，找不到任何接近这个问题的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T07:02:42.263

您正在创建一个名为“String”的新泛型类型参数，这可能不是您想要的。

改变

```
private static class Tree<String> { 
```

至

```
private static class Tree { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T06:57:44.300

您似乎正在尝试使用“String”作为泛型类型的名称来创建一个泛型类。泛型类型所做的是，每当您从类中创建一个对象时，它都会用`<>`新类型替换其中的任何内容。

因此，在您的班级中，如果您在班级中创建了一个`Tree<Integer>`“String”的实例，则将被“Integer”替换。这是某些类（例如 ArrayList）的工作方式，允许使用任何类型。

通常在使用泛型类型时，使用单个字母，例如“T”，以避免它与真正的类类型相同。

因此，在您的情况下，您尝试将实际上不是字符串的“字符串”设置为实际字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-08T14:02:07.107

我通过输入解决了它

```
import java.lang.String; 
```

# android - 在 Ubuntu 上构建 Chromium 期间的失败

> ID：15595947
> 
> 赞同：2
> 
> 时间：2013-03-24T06:52:24.203
> 
> 标签：android, chromium

我正在尝试按照官方说明构建未修改的 Chromium，但出现以下错误，我尝试重新安装 Ubuntu 8、12 但没有区别：

```
[10/6591] ACTION Creating jsr_305_javalib jar

FAILED: cd ../../third_party/jsr-305; python ../../build/android/jar.py "--classes-dir=../../out/Release/gen/jsr_305_javalib/classes" "--jar-path=../../out/Release/lib.java/jsr_305_javalib.jar" "--excluded-classes=\"*/R.class\" \"*/R##*.class\"" "--ignore=035ff3d8153c7ebb3e17803d6ec654de  -"

Traceback (most recent call last):
  File "../../build/android/jar.py", line 53, in <module>
    sys.exit(main(sys.argv))
  File "../../build/android/jar.py", line 46, in main
    DoJar(options)
  File "../../build/android/jar.py", line 30, in DoJar
    subprocess.check_call(jar_cmd, cwd=jar_cwd)
  File "/usr/lib/python2.7/subprocess.py", line 506, in check_call
    retcode = call(*popenargs, **kwargs)
  File "/usr/lib/python2.7/subprocess.py", line 493, in call
    return Popen(*popenargs, **kwargs).wait()
  File "/usr/lib/python2.7/subprocess.py", line 679, in __init__
    errread, errwrite)
  File "/usr/lib/python2.7/subprocess.py", line 1249, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T17:15:51.580

我停止了同样的错误。最后，我发现了我忘记添加 jar 命令的 PATH 的愚蠢错误。除了 Chromium 官方构建说明中的 java 设置指南之外，还需要以下命令。

```
sudo update-alternatives --install /usr/bin/jar jar /usr/lib/jvm/jdk1.6.0_xx/bin/jar 50000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-01T15:32:44.567

您必须安装 depot_tools 软件包。试试这个命令；

```
git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git
export PATH=$PATH:/path/to/depot_tools 
```

# function - powershell 中的美元符号、函数关键字和脚本块

> ID：15595953
> 
> 赞同：5
> 
> 时间：2013-03-24T06:53:31.813
> 
> 标签：function, powershell, dollar-sign

我有这个 powershell 脚本：

```
function Func1 ($val)
{
  Write-Host "$val is processed by Func1";
}

function Func2($val)
{
  Invoke-Command -ScriptBlock `
  ${function:Func1} -ArgumentList "$val is processed by Func2 and";
}

function Func3($val)
{
  $function:Func2.Invoke("$val is processed by Func3 and");
}

Func3 "Value"; 
```

这有效 - 它输出**值由 Func3 处理并由 Func2 处理并由 Func1 处理**- 但我对两件事感到困惑：

Func2中的**${function:function-name}**代码（即美元符号后跟左花括号后跟**函数**后跟冒号后跟函数名称后跟右花括号）是什么意思？我可以看到它调用了 Func1，但我真的不明白它为什么起作用。

Func3中的**$function:function-name.Invoke**代码是什么意思？我感觉它正在使用脚本块功能，因为调用了 Invoke 方法，但我不清楚**$function.function-name**如何是脚本块。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T07:35:13.973

`function:`是函数提供程序的 PsDrive。所有功能都存储在该驱动器上。还有其他 PsDrives，包括`variable:`和`env:`。查看`Get-PsProvider`并`Get-PsDrive`了解更多信息。

要从`function:`驱动器访问函数（获取其内容，而不是调用它），请使用`$function:foo`where foo 是要访问的函数的名称。

仅当您访问名称中包含特殊字符的变量时，才需要大括号。

函数的内容是脚本块，这就是为什么它被用作`Invoke-Command`.

`function:`psdrive中的每一件事都是一个脚本块，而脚本块对象有一个`Invoke`方法可以让你执行它们。

# javascript - 关闭 div，跳回顶部

> ID：15595958
> 
> 赞同：0
> 
> 时间：2013-03-24T06:53:49.480
> 
> 标签：javascript

我有一个 JS 脚本，单击时显示和隐藏 div。我想要做的是，当点击底部的关闭链接时，它会跳回到打开的链接。无法弄清楚，我搜索的所有内容都希望避免这种情况发生。

打开链接：

```
Click <a href="javascript:ShowContent('require')">Here</a> 
```

关闭链接：

```
Click <a href="javascript:HideContent('require')">Here</a> to Close. 
```

我正在使用的 JS 代码：

```
function HideContent(d) {
    document.getElementById(d).style.display = "none";
}

function ShowContent(d) {
    document.getElementById(d).style.display = "block";
} 
```

我确信这很容易解决，但根据之前的问题，任何理解 JS 的尝试都以怨恨告终。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T06:59:20.083

最简单的方法是使用链接的默认功能。

```
Click <a id="openLink" href="javascript:ShowContent('require')">Here</a>

Click <a href="#openLink" onclick="HideContent('require')">Here</a> to Close. 
```

# php - CakePHP 2 - 将用户输入转换为小写

> ID：15595959
> 
> 赞同：0
> 
> 时间：2013-03-24T06:54:03.363
> 
> 标签：php, cakephp, view, controller, lowercase

我用 CakePHP 2.3 编写了我的项目的用户管理。一切正常。但现在我想有一个注册功能，用户可以在其中创建自己。即使那不是问题。但是 Cake 是自己设置用户名的。

我有 2 个字段。"first_name" 和 "last_name" 我想我用 PHP 函数 "strtolower" 将这两个字段转换为小写，在它们之间放置一个点，结果给出用户名。例如“john.doe”

我唯一的问题是，我该如何度过这个难关。

我认为当我将 php 函数放入我的“注册”视图时它对我没有帮助，因为字段是空的，所以该函数无法完成他的工作。

如何取回它，以便用户按照我的示例对输入进行格式化，并存储在单独的数据库字段中

谁能在这方面帮助我？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T08:53:29.043

在您的控制器中保存用户之前。

例如这样的：

```
public function register() {

  // ...

  $username = strtolower($this->request->data['User']['first_name'] . "." . $this->request->data['User']['last_name']);
  $this->request->data['User']['username'] = $username;

  if ($this->User->save($this->request->data)) {
    // ...
  } 
} 
```

此外，如果您无法理解 Cake 或 MVC 设计模式的工作原理，请帮您一个忙，阅读 CakePHP [Cookbook](http://book.cakephp.org/2.0/en/cakephp-overview/understanding-model-view-controller.html)。

# jquery - 用拉斐尔缩小循环图像？html代码中存在与raphael绑定的图像吗？

> ID：15595961
> 
> 赞同：0
> 
> 时间：2013-03-24T06:54:23.483
> 
> 标签：jquery, raphael

下面的代码是如何在 raphael 中循环图像

```
var paper = Raphael('canvas', 1000, 1000);
for(i=1; i<=2; i++){
    var r_img = paper.image('img/'+i+'.jpeg', 100, 100, 200, 200);
    paper.freeTransform(r_img).setOpts({drag:'self', scale:true, rotate:true, draw:[ 'bbox' ]});
} 
```

我有 2 个问题：
**1\. 如何将图像宽度/高度按比例缩小为原始图像？**
**2\. 可以绑定html代码中存在的图片吗？**
`<div class="canvas"> <img src="..."> </div>`
**update**
现在我们使用 Raphael 来捕捉图像是 type path in ，然后它会在//中`paper.image('path'...)`创建一个`image`标签。 如果html中已经有标签，那么Raphael freetransform捕获图像是否可以使用该标签，而不是在/ /中创建新标签。`<canvas>``<svg>`
`<img>``<image>``<canvas>``<svg>`

下面的代码是我为问题 1 尝试的。但似乎不起作用，问题 2。我不知道该怎么做，有什么建议吗？

```
var paper = Raphael('canvas', 1000, 1000);
var img = new Image();// for get the image width/height before
for(i=1; i<=1; i++){
    img.src = 'img/'+i+'.jpeg';
    img.onload = function(){
        var newwidth = this.width;
        var newheight = this.height;
        var r_img = paper.image('img/'+i+'.jpeg', 100, 100, newwidth, newheight);
        paper.freeTransform(r_img).setOpts({drag:'self', scale:true, rotate:true, draw:[ 'bbox' ]});
    }
}
//html
<div id='canvas'></div>
//dir
img/1.jpeg, 2.jpeg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:35:17.990

**1)在****img.onload**之后移动**img.src**

```
for(i=1; i<=1; i++){
    img.onload = function(){
        var newwidth = this.width;
        var newheight = this.height;
        var r_img = paper.image('img/'+i+'.jpeg', 100, 100, newwidth, newheight);
        paper.freeTransform(r_img).setOpts({drag:'self', scale:true, rotate:true, draw:[ 'bbox' ]});
    }
    img.src = 'img/'+i+'.jpeg';
} 
```

这是必需的，因为如果您首先设置**src**然后才定义**onload** - 图像已经加载，所以**onload**永远不会触发。

**2)**问题不清楚——你能用其他方式说吗？

# html - 选项值无法动态设置

> ID：15595968
> 
> 赞同：0
> 
> 时间：2013-03-24T06:55:10.463
> 
> 标签：html, jsp, jdbc

我正在尝试使用表中的数据动态设置选项标签。这是我的代码。

```
 Select Branch:-<select name="codes">
            <%
            while(r.next()){
    %>
           <option value="<%=r.getString("code")%>"><%=r.getString("code")%></option>
            <%
           }
r.close();
s.close();
con.close();
    %>
        </select> 
```

当我不添加选项的值时，它工作正常，但是当我添加选项的值时，它给了我一个例外。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T07:09:45.163

由于它仅在您仅获取一次字符串时起作用，因此请尝试这样做：

```
<%
  while(r.next()) {
    String codeValue = r.getString("code");
%>
<option value="<%=codeValue%>"><%=codeValue%></option>
<% } %> 
```

# ember.js - Ember.js 路由器：嵌入式资源

> ID：15595971
> 
> 赞同：0
> 
> 时间：2013-03-24T06:56:08.327
> 
> 标签：ember.js, router

我正在创建一个 Ember 应用程序来显示 Twitter 提要，但我无法通过嵌入式资源显示单个推文。

代码如下：

# 模板

```
 <script type="text/x-handlebars" data-template-name="tweets">
        <div id="stream">
            {{#each tweet in controller}}
                <div class="tweet">
                    <p class="tweet_text">{{tweet.text}}</p>
                    <p> {{#linkTo "tweet" tweet}} {{tweet.id}} {{/linkTo}}</p>
                </div>
            {{/each}}
        </div>
    </script>

    <script type="text/x-handlebars" data-template-name="tweet">
        <div id="detail">
            {{text}}
        </div>
    </script> 
```

# 路由器

```
window.App = Ember.Application.create({
    LOG_TRANSITIONS: true
});

App.Router.map(function(){
    this.resource('tweets',function(){
        this.resource('tweet',{path: ':tweet_id'})
    });
});

// (1)  App.Router.map(function(){
//        this.resource('tweets')
//        this.resource('tweet',{path: ':tweet_id'})
//      });

App.IndexRoute = Ember.Route.extend({
  redirect: function() {
    this.transitionTo('tweets');
  }
});

App.TweetsRoute = Ember.Route.extend({
  model: function(){
    var me = [];
    $.getJSON("http://search.twitter.com/search.json?q=emberjs&rpp=200&count=200&callback=?", 
      {},
      function (data) {
        $.each(data.results,function(k,tweet){
             var tweet = App.Tweet.create({
                created_at: tweet.created_at,
                from_user: tweet.from_user,
                profile_image_url: tweet.profile_image_url,
                text: tweet.text,
                id: tweet.id
             });
             me.pushObject( tweet );
        });
    });
    return me;
  }
}); 
```

# 对象和控制器

```
App.TweetsController = Ember.ArrayController.extend({});

App.Tweet = Ember.Object.extend({
  created_at: "",
  from_user: "",
  profile_image_url: "",
  text: "",
  id: 0
}) 
```

如您所见，我评论了我们的路由器 (1)，它可以找到正确的推文，并将其呈现在推文模板中。但是，我希望这条路由是嵌套的，这样我就可以将它实现为一个主从应用程序。

使用 LOG_TRANSITIONS，我可以看到正确的路由已初始化，但我无法获取要渲染的嵌套资源路径。

任何想法将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T10:39:45.933

我得到了这个工作。对于任何坚持类似事情的人，我就是这样做的：

# 模板 - 将 {{#linkTo}} “tweet”... 更改为 {{#linkTo}} “tweets.tweet”... 并添加了 {{outlet}}

```
<script type="text/x-handlebars" data-template-name="tweets">
    <div id="stream">
        {{#each tweet in controller}}
            <div class="tweet">
                <p class="tweet_text">{{tweet.text}}</p>
                <p> {{#linkTo "tweets.tweet" tweet}} {{tweet.id}} {{/linkTo}}</p>
            </div>
        {{/each}}
    </div>
    {{ outlet }}
</script> 
```

# 路由器 - 将“this.resource”更改为“this.route”

```
App.Router.map(function(){
    this.resource('tweets',function(){
        this.route('tweet',{path: ':tweet_id'})
    });
}); 
```

# 警告

我认为这是一种解决方法，并且在这种情况下嵌套资源是正确的方法。我知道嵌套路由应该是“动词”或动作路由。如果有人知道问题的正确方法，我仍然会很感激，但希望以上内容可以帮助其他相关的人。

# google-chrome-extension - $scope.$apply 在 Chrome 扩展弹出窗口中没有做任何事情

> ID：15595972
> 
> 赞同：1
> 
> 时间：2013-03-24T06:56:27.647
> 
> 标签：google-chrome-extension, angularjs

我正在编写一个由后台进程和弹出窗口组成的 chrome 扩展。后台进程不断发出 ajax 请求以获取新数据，并且弹出窗口显示信息。

以极其简化的方式，background.js 进程如下所示：

```
var Background = {
    data: {},
    poll: function() {
        $.ajax({
            url: 'some_url',
            success: function(data) {
                this.data = data;
                chrome.extension.sendMessage('update');
            }.bind(this)
        });
    },
    startPolling: function() {
        setInterval(this.poll.bind(this), 10000);
    }
};
$(Background.startPolling.bind(Background)); 
```

这每 10 秒发出一个 ajax 请求，获取一些数据，并将其设置为`Background.data`. 同样，这非常简化。您可以`sendMessage`在成功回调中看到调用。

我的 popup.js 看起来像这样，也非常简化：

```
var Background = chrome.extension.getBackgroundPage().Background;

angular.module('App', [])
    .controller('PopupCtrl', function PopupCtrl($scope) {

        $scope.data = Background.data;

        chrome.extension.onMessage.addListener(function(request, sender, sendResponse) {
            if (request == 'update') {
                console.log('update');
                $scope.$apply();
            }
        });

    }); 
```

当然，popup.html 看起来像：

```
<html ng-app="App" ng-csp>
    <body ng-controller="PopupCtrl">
        <p>{{data.title}}</p>
        <p>{{data.body}}</p>
        <p>{{data.date}}</p>
    </body>
</html> 
```

肯定会收到该消息，因为我可以`"update"`每隔 10 秒看到一次打印到控制台。我也知道数据正在正确更新，因为如果我关闭并重新打开弹出窗口，新数据将正确显示。所以`$scope.$apply()`根本不做任何事情。

我怎样才能解决这个问题？

# jquery - 更改ID时的Jquery表单排序

> ID：15595980
> 
> 赞同：1
> 
> 时间：2013-03-24T06:57:14.933
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我正在创建一个调查应用程序。一旦用户继续创建调查，他们可以通过单击添加问题按钮来动态添加多个问题。我使用 jquery ui 添加了一个可排序的选项（带有句柄）。一旦用户对问题进行排序，我如何更改表单上的 id。

```
<div class="question" id="1"></div>
<div class="question" id="2"></div> 
```

或者有什么方法可以捕获位置，因为我想按顺序打印出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T07:02:41.687

在您的可排序小部件的停止回调中，重新分配您的 id，如下所示：

```
$( "#sortable" ).sortable({
    stop : function ( event, ui ){
        $('.question').each(function(index){
            $(this).attr('id',index);
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T07:01:28.573

如果您打算删除`id`并重新添加，您可以这样做：

```
$('.question').each(function(index) {
    $(this).attr('id', index);
}); 
```

这将遍历所有`.question`元素并`id`基于它们的列表顺序。

PS`id`应以字母 [A-Za-z] 字符开头。

# asp.net - 通过单击 asp.net 中的标题对数据网格视图进行排序

> ID：15595984
> 
> 赞同：0
> 
> 时间：2013-03-24T06:57:50.687
> 
> 标签：asp.net, linq, sorting, gridview

请通过单击 asp.net 中的标题帮助我在网格视图中对数据进行排序。我使用 linq 将数据绑定到 gridview。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:33:38.927

试试这个排序......

```
protected void RadgvData_SortCommand(object sender, GridSortCommandEventArgs e)
    {
        GridTableView tableView = e.Item.OwnerTableView;
        e.Canceled = true;
        GridSortExpression expression = new GridSortExpression();
        expression.FieldName = e.SortExpression;
        if (tableView.SortExpressions.Count == 0 || tableView.SortExpressions[0].FieldName != e.SortExpression)
        {
            expression.SortOrder = GridSortOrder.Descending;
        }
        else if (tableView.SortExpressions[0].SortOrder == GridSortOrder.Descending)
        {
            expression.SortOrder = GridSortOrder.Ascending;
        }
        else if (tableView.SortExpressions[0].SortOrder == GridSortOrder.Ascending)
        {
            expression.SortOrder = GridSortOrder.Descending;
        }

        tableView.SortExpressions.AddSortExpression(expression);
        RadgvData.Rebind();

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T07:06:10.243

你可以很容易地做到这一点。

因此，假设您有一个 GridView，您在服务器端将数据源分配给该 GridView。

您可以使用`GridView_Sorting`事件，如下所示：

首先，将当前应用的排序保存在某处。因为，您需要知道，是否必须按升序或降序排序。如下所示。

```
public SortDirection CurrentSortDirection
{
    get
    {
        if (ViewState["sortDirection"] == null)
            ViewState["sortDirection"] = SortDirection.Ascending;

        return (SortDirection) ViewState["sortDirection"];                
    }
    set { ViewState["sortDirection"] = value; } 
} 
```

然后`sorting`在 GridView 的事件中使用这个属性：

```
protected void GridView_Sorting(object sender, GridViewSortEventArgs e)
{
   if (CurrentSortDirection== SortDirection.Ascending)
   {
      CurrentSortDirection = SortDirection.Descending;
      var myDataSource = GetDataThroughLinq()
                         .OrderByDescending(s=>s.Id)
                         .ToList();
      GridView1.DataSource = myDataSource;
      GridView1.DataBind();
   }
   else
   {
      CurrentSortDirection = SortDirection.Ascending;
      var myDataSource = GetDataThroughLinq()
                         .OrderBy(s=>s.Id)
                         .ToList();
      GridView1.DataSource = myDataSource;
      GridView1.DataBind();
   }   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T10:59:00.757

您可以直接为gridview选择一个数据源，它在自动格式下方的gridview任务中，选择datasouce后提供了更多选项，它也包括排序，分页和选择，通过单击每个标题，您将获得根据排序的数据对它

# clojure - 交换地图中的键和值

> ID：15595986
> 
> 赞同：16
> 
> 时间：2013-03-24T06:58:06.433
> 
> 标签：clojure

是否有交换给定地图的键和值的功能。所以给定一张地图，我希望键成为值，并为键赋值。

```
(swap {:a 2 b 4}) => {2 :a 4 :b} 
```

一种方法是

```
(zipmap (vals my-map) (keys my-map)) 
```

但是想知道 clojure 是否为此提供了实用程序 fn ？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-24T12:43:17.503

这是`map-invert`in的目的`clojure.set`：

```
user=> (clojure.set/map-invert {:a 2 :b 4})
{4 :b, 2 :a} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-24T07:02:32.313

clojure.contrib.datalog.util 中有一个函数[`reverse-map`](http://clojuredocs.org/clojure_contrib/clojure.contrib.datalog.util/reverse-map)，它的实现如下：

```
(defn reverse-map
  "Reverse the keys/values of a map"
  [m]
  (into {} (map (fn [[k v]] [v k]) m))) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-07-02T17:46:59.767

对于以后阅读本文的任何人，我认为以下内容应该会有所帮助。

此处提供了一个小型库[https://clojars.org/beoliver/map-inversions](https://clojars.org/beoliver/map-inversions)

反转地图可能会返回关系。如果映射是单射的（一对一），那么逆映射也是一对一的。如果地图（好像经常是这种情况）是多对一的，那么您应该使用集合或向量。

#Values 被视为原子 ##one-to-one map 的值是唯一的

```
(defn invert-one-to-one
  "returns a one-to-one mapping"
  [m]
  (persistent! (reduce (fn [m [k v]] (assoc! m v k)) (transient {}) m)))

(def one-to-one {:a 1 :b 2 :c 3})

> (invert-one-to-one one-to-one)
{1 :a 2 :b 3 :c} 
```

##many-to-one map 的值**不是**唯一的。这是很常见的 - 假设你的地图是这种形式是最安全的......所以`(def invert invert-many-to-one)`

```
(defn invert-many-to-one
  "returns a one-to-many mapping"
  ([m] (invert-many-to-one #{} m))
  ([to m]
   (persistent!
    (reduce (fn [m [k v]]
              (assoc! m v (conj (get m v to) k)))
            (transient {}) m))))

(def many-to-one {:a 1 :b 1 :c 2})

> (invert-many-to-one many-to-one)
{1 #{:b :a}, 2 #{:c}} ; as expected

> (invert-many-to-one [] many-to-one)
{1 [:b :a], 2 [:c]} ; we can also use vectors

> (invert-one-to-one many-to-one) ; what happens when we use the 'wrong' function?
{1 :b, 2 :c} ; we have lost information 
```

#Values 被视为集合##one-to-many 值是集合/集合，但它们的交集始终为空。（没有元素出现在两个不同的集合中）

```
(defn invert-one-to-many
  "returns a many-to-one mapping"
  [m]
  (persistent!
   (reduce (fn [m [k vs]] (reduce (fn [m v] (assoc! m v k)) m vs))
           (transient {}) m)))

(def one-to-many (invert-many-to-one many-to-one))
> one-to-many
{1 #{:b :a}, 2 #{:c}}

> (invert-one-to-many one-to-many)
{:b 1, :a 1, :c 2} ; notice that we don't need to return sets as vals 
```

##many-to-many 值是集合/集合，并且至少存在两个交集不为空的值。如果您的值是集合，那么最好假设它们属于此类别。

```
(defn invert-many-to-many
  "returns a many-to-many mapping"
  ([m] (invert-many-to-many #{} m))
  ([to m]
   (persistent!
    (reduce (fn [m [k vs]]
              (reduce (fn [m v] (assoc! m v (conj (get m v to) k))) m vs))
            (transient {}) m))))

(def many-to-many {:a #{1 2} :b #{1 3} :c #{3 4}})

> (invert-many-to-many many-to-many)
{1 #{:b :a}, 2 #{:a}, 3 #{:c :b}, 4 #{:c}}

;; notice that there are no duplicates when we use a vector
;; this is because each key appears only once
> (invert-many-to-many [] many-to-many)
{1 [:a :b], 2 [:a], 3 [:b :c], 4 [:c]}

> (invert-many-to-one many-to-many)
{#{1 2} #{:a}, #{1 3} #{:b}, #{4 3} #{:c}}

> (invert-one-to-many many-to-many)
{1 :b, 2 :a, 3 :c, 4 :c}

> (invert-one-to-one many-to-many)
{#{1 2} :a, #{1 3} :b, #{4 3} :c} ; this would be missing information if we had another key :d mapping to say #{1 2} 
```

您也可以`invert-many-to-many`在`one-to-many`示例中使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-25T22:57:18.497

这是一个使用reduce可能适合问题的选项：

```
(reduce #(assoc %1 (second %2) (first %2)) {} {:a 2 :b 4}) 
```

这里在一个函数中

```
(defn invert [map]
  (reduce #(assoc %1 (second %2) (first %2)) {} map)) 
```

打电话

```
(invert {:a 2 b: 4}) 
```

然后是`reduce-kv`（我认为更清洁）

```
(reduce-kv #(assoc %1 %3 %2) {} {:a 2 :b 4}) 
```

# asp.net - 如何从 CLASS (Inside Class) 调用 ASPX 页面

> ID：15595988
> 
> 赞同：4
> 
> 时间：2013-03-24T06:58:26.947
> 
> 标签：asp.net, c#-4.0

我想从 CLASS 文件或类的内部函数调用或重定向 ASPX 页面，请帮助我或给出提示，或者请编写调用语句或从类中或在类中重定向 ASPX 页面

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T07:02:54.653

你只需这样做：

```
HttpContext.Current.Response.Redirect("~/myPage.aspx") 
```

请注意两件事：

1) 您可以使用波浪号 (~) 来指示应用程序的根目录

2）这（默认情况下）将引发线程中止异常。您可以通过使用 .olverload 方法消除它`false`。

```
HttpContext.Current.Response.Redirect("~/myPage.aspx",false) 
```

3）你应该添加`using System.Web;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T07:02:36.987

您的 CLASS 应该从 System.Web.UI.Page 派生，在您的类中，您可以使用以下方法

```
HttpResponse.Redirect(string url) 
```

# eclipse - 无法找到匹配的导航案例与 from-view-id '/index.xhtml' 的操作 '#{user.login}' 结果为 'ADMIN_USER'

> ID：15595989
> 
> 赞同：0
> 
> 时间：2013-03-24T06:58:47.243
> 
> 标签：eclipse, jsf-2, tomcat7, javabeans

下面是我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="WebApp_ID" version="3.0">

    <display-name>Portal</display-name>

    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>

    <context-param>
        <param-name>primefaces.THEME</param-name>
        <param-value>cupertino</param-value>
    </context-param> 

    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <welcome-file-list>
        <welcome-file>/faces/index.xhtml</welcome-file>
    </welcome-file-list>

    <!-- Map these files with JSF -->
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>

    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>

    <error-page>
        <exception-type>javax.faces.application.ViewExpiredException</exception-type>
        <location>/faces/index.xhtml</location>
    </error-page>

</web-app> 
```

面孔-config.xml-

```
<?xml version="1.0" encoding="UTF-8"?>

<faces-config xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">
    <managed-bean>
        <managed-bean-name>user</managed-bean-name>
        <managed-bean-class>com.ravij.User</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>
    <managed-bean>
        <managed-bean-name>menu</managed-bean-name>
        <managed-bean-class>com.ravij.Menu</managed-bean-class>
        <managed-bean-scope>request</managed-bean-scope>
    </managed-bean>
    <managed-bean>
        <managed-bean-name>item</managed-bean-name>
        <managed-bean-class>com.ravij.Item</managed-bean-class>
        <managed-bean-scope>request</managed-bean-scope>
    </managed-bean>

    <navigation-rule>
        <from-view-id>/faces/*</from-view-id>
        <navigation-case>
            <from-outcome>LOGIN_PAGE</from-outcome>
            <to-view-id>/faces/index.xhtml</to-view-id>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <from-view-id>/faces/*</from-view-id>
        <navigation-case>
            <from-outcome>LOGOUT</from-outcome>
            <to-view-id>/faces/index.xhtml?faces-redirect=true</to-view-id>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <from-view-id>/faces/index.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>INVALID_USER</from-outcome>
            <to-view-id>/faces/index.xhtml</to-view-id>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <from-view-id>/faces/index.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>NORMAL_USER</from-outcome>
            <to-view-id>/faces/home.xhtml</to-view-id>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <from-view-id>/faces/index.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>ADMIN_USER</from-outcome>
            <to-view-id>/faces/admin.xhtml</to-view-id>
        </navigation-case>
    </navigation-rule>

    <lifecycle>
        <phase-listener>com.ravij.security.AuthorizationListener</phase-listener>
    </lifecycle>

</faces-config> 
```

`Phase listener AuthorizationListener`在下面-

```
package com.ravij.security;

import javax.faces.application.NavigationHandler;
import javax.faces.context.FacesContext;
import javax.faces.event.PhaseEvent;
import javax.faces.event.PhaseId;
import javax.faces.event.PhaseListener;
import javax.servlet.http.HttpSession;

public class AuthorizationListener implements PhaseListener {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    @Override
    public void afterPhase(PhaseEvent event) {

        FacesContext facesContext = event.getFacesContext();
        String currentPage = facesContext.getViewRoot().getViewId();

        boolean isLoginPage = (currentPage.lastIndexOf("index.xhtml") > -1);
        HttpSession session = (HttpSession) facesContext.getExternalContext()
                .getSession(false);

        if (session == null) {
            NavigationHandler nh = facesContext.getApplication()
                    .getNavigationHandler();
            nh.handleNavigation(facesContext, null, "LOGIN_PAGE");
        }

        else {
            Object currentUser = session.getAttribute("username");

            if (!isLoginPage && (currentUser == null || currentUser == "")) {
                NavigationHandler nh = facesContext.getApplication()
                        .getNavigationHandler();
                nh.handleNavigation(facesContext, null, "LOGIN_PAGE");
            }
        }
    }

    @Override
    public void beforePhase(PhaseEvent event) {

    }

    @Override
    public PhaseId getPhaseId() {
        return PhaseId.RESTORE_VIEW;
    }
} 
```

用户 Bean 如下 -

```
package com.ravij;

import java.io.Serializable;
import java.io.UnsupportedEncodingException;
import java.math.BigInteger;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;

import javax.faces.application.FacesMessage;
import javax.faces.context.FacesContext;
import javax.faces.event.ActionEvent;

import org.hibernate.Session;
import org.hibernate.SessionFactory;

public class User implements Serializable {

    private static final long serialVersionUID = 1L;

    private String username;
    private String password;
    private String email;
    private String isAdmin;

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getIsAdmin() {
        return isAdmin;
    }

    public void setIsAdmin(String isAdmin) {
        this.isAdmin = isAdmin;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String logout() {
        // FacesMessage msg = new FacesMessage(FacesMessage.SEVERITY_INFO,
        // "Thank you", "You are successfully Logged out!");
        // FacesContext.getCurrentInstance().addMessage(null, msg);
        // index.xhtml?faces-redirect=true
        FacesContext.getCurrentInstance().getExternalContext()
                .invalidateSession();
        return "LOGOUT";
    }

    private void resetAllFields() {
        setEmail("");
        setIsAdmin("");
        setPassword("");
        setUsername("");
    }

    public String login() {
    //userFromDB is fetched from DB. Hibernate is taking care of that.
        if (username != null && password != null && userFromDB != null
                && username.equals(userFromDB.getUsername())
                && hash.equals(userFromDB.getPassword())) {

            resetAllFields();

            FacesContext.getCurrentInstance().getExternalContext()
                    .getSessionMap().put("username", username);

            if (userFromDB.getIsAdmin().equals("true")) {
                return "ADMIN_USER";
            }
            return "NORMAL_USER";
        }

        FacesMessage msg = new FacesMessage(FacesMessage.SEVERITY_WARN,
                "Login Error", "Invalid credentials");
        FacesContext.getCurrentInstance().addMessage(null, msg);

        return "INVALID_USER";
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:25:33.773

Please try to replace:

```
<navigation-rule>
    <from-view-id>/faces/index.xhtml</from-view-id>
    <navigation-case>
        <from-outcome>ADMIN_USER</from-outcome>
        <to-view-id>/faces/admin.xhtml</to-view-id>
    </navigation-case>
</navigation-rule> 
```

with

```
<navigation-rule>
    <from-view-id>/index.xhtml</from-view-id>
    <navigation-case>
        <from-outcome>ADMIN_USER</from-outcome>
        <to-view-id>/admin.xhtml</to-view-id>
    </navigation-case>
</navigation-rule> 
```

Or even remove the line

```
<from-view-id>/faces/index.xhtml</from-view-id> 
```

# security - KendoUI 安全性

> ID：15595999
> 
> 赞同：0
> 
> 时间：2013-03-24T07:01:22.150
> 
> 标签：security, kendo-ui

我正在考虑开发一个需要处理个人健康信息的 Web 应用程序。我正在研究将 KendoUI 用于界面的可能性。但是，是否可以确保不允许任何人跨脚本、绕过或欺骗 JavaScript 代码，因为它位于客户端？还是使用需要回发的标准服务器端控件更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:33:21.433

您的问题缺乏细节，但如果您谈论的是 Kendo DataSource 向服务器发送数据，它基本上是 jQuery.ajax 的包装器，因此您可以使用 jQuery.ajax() 执行的任何操作都可以使用 Kendo DataSource 执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-08T09:46:20.917

事实是，安全性越不复杂，它就越不可靠。仅在 kendo 中对数据源进行简单的调用不会很安全，但是使用 o2auth 之类的其他方式会更安全，但更难实现。我建议您在继续这条路之前阅读[此内容。](http://developer.telerik.com/featured/oauth-has-ruined-everything/)您将不得不考虑您愿意付出多少努力来保护您的应用程序/网站免受侵犯。如果这是针对商业环境，您将必须采取尽可能多的预防措施来防止安全漏洞。