# StackOverflow 问答 14616000-14616999

# ruby-on-rails - Cucumber table + find("table tr:eq(x)") 无法正常工作

> ID：14616001
> 
> 赞同：0
> 
> 时间：2013-01-30T23:44:28.510
> 
> 标签：ruby-on-rails, cucumber

我有这个黄瓜任务：

```
Then I should see following posting modes
        | row | day  | hour | minute | location | category |
        | 1   | 1    | 7    | 0      | 29       | 6        |
        | 2   | 2    | 8    | 5      | 27       | 7        |
        | 3   | 3    | 9    | 10     | 28       | 18       |
        | 4   | 4    | 15   | 15     | 29       | 18       |
        | 5   | 5    | 17   | 20     | 27       | 7        |
        | 6   | 6    | 20   | 30     | 28       | 6        |
        | 6   | 0    | 22   | 50     | 29       | 7        | 
```

在它的后面有这样的描述：

```
Then /^I should see following posting modes$/ do |table|
  table.hashes.each do |posting|
      within("#itemPosting .attributeContainer table tbody tr:eq(#{posting[:row]})") do
            find("#item_posting_day").value.should == posting[:day]
            find("#item_posting_hour").value.should == posting[:hour]
            find("#item_posting_minute").value.should == posting[:minute]
            find("#item_posting_location").value.should == posting[:location]
            find("#item_posting_category").value.should == posting[:category]
      end
  end  
end 
```

所以这部分：

```
tr:eq(#{posting[:row]}) 
```

不起作用（它进入下一步，然后给出一个错误，即找不到#item_posting_day。）

但如果我这样做：

```
tr:eq(4) 
```

它可以工作（找到#item_posting_day 字段，获取它的值，然后给出一个错误，指出值不是预期的值，但没关系）。

所以我不明白使用这种语法有什么问题：

```
tr:eq(#{posting[:row]}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:04:51.600

似乎[`hashes`](http://rubydoc.info/github/cucumber/cucumber/Cucumber/Ast/Table#hashes-instance_method)将列标题转换为字符串，而不是符号。尝试使用`'row'`而不是`:row`

# jsrender - 哪些 jsRender 标签接受 tmpl？

> ID：14616002
> 
> 赞同：0
> 
> 时间：2013-01-30T23:44:30.250
> 
> 标签：jsrender

我知道，**如果****通过**tmpl接受*模板*。**还有**吗？任何其他语句都接受*tmpl*吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:34:35.143

是的，任何接受块内容的标签都将允许您编写`{{foo ...}}...{{/foo}}`或`{{foo ... tmpl=expr/}}`. 表达式支持`expr`非常灵活。例如，它可以是`"myTemplateName"`或`~a.b.getTheTemplate()`返回已编译的模板，或`"someHTMLmarkup"`.

这包括`{{else tmpl=...}}`单元测试中的一个示例：[https](https://github.com/BorisMoore/jsrender/blob/master/test/unit-tests/tests-jsrender-no-jquery.js#L73) ://github.com/BorisMoore/jsrender/blob/master/test/unit-tests/tests-jsrender-no-jquery.js#L73 。

# java - 如何处理生产环境中的 Play Framework 2 数据库演变

> ID：14616005
> 
> 赞同：16
> 
> 时间：2013-01-30T23:45:06.407
> 
> 标签：java, postgresql, playframework, playframework-2.0, playframework-evolutions

似乎每当我更改模型时，Play Framework 都会要求我运行一个脚本来删除我的整个架构并重新创建它。显然这不适用于生产，那么在生产中处理这个问题的正确方法是什么？

请注意，我使用的是 ebean 和 Postgres，并托管在 heroku 上。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-31T00:31:38.953

不幸的是`Ebean`，只能创建`CREATE DDL` （而不是`UPDATE DDL`）（正如[他们的小组所回答的](https://groups.google.com/forum/?fromgroups=#!topic/ebean/_TA5OOJq2oY)那样），因此您需要尽快切换到[手动进化](https://www.playframework.com/documentation/2.5.x/Evolutions)。

一些规则：

1.  在实施任何更改之前始终备份您的实时数据库:)
2.  如果 ebean 插件只有`1.sql`由它创建的进化，它会重新创建整个 DDL
3.  您需要从中删除两个第一条评论，`1.sql`并开始使用下一个数字等编写自己的进化`2.sql`。`3.sql`在切换到手动进化之前尝试放置尽可能多的模型/字段。最大的部分将由插件自动完成。
4.  手动进化应该包含`ALTERS`现有的表/列而不是 DROP/CREATE，它们应该同时具有：`Ups`和`Downs`对于每个更改。
5.  尝试在每个演变中放置尽可能多的更改，这样更容易管理，然后为每个小的更改编写单独的演变。

事实上，有时使用 DB gui 修改 DB 结构更容易，无论如何它主要适用于单个开发人员......当您需要与其他开发人员共享代码时，编写演变将是更好的选择。

如果一段时间后您将添加新模型的下一个“大”部分，您可以再次启用临时自动 DDL 并使用本地 git 来复制新部分。然后恢复到自己的革命并粘贴由Ebean插件生成的新部分。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-05-13T23:40:29.850

Biesior基本上总结得很好。但是，作为 Play 的初学者，我发现用一个具体的例子进行更多的说明可能会有所帮助。

首先，以下示例适用于 Java。

假设您添加了一个新字段

```
public String dum_str; 
```

在你的模型中。然后，您将需要这样的`2.sql`下`conf/evolutions/`：

```
# --- !Ups
ALTER TABLE dum ADD COLUMN dum_str VARCHAR(255);

# --- !Downs
ALTER TABLE dum DROP dum_str; 
```

我希望这会有所帮助。

# iphone - 用户在 TextField 中输入时更新标签

> ID：14616006
> 
> 赞同：1
> 
> 时间：2013-01-30T23:45:06.587
> 
> 标签：iphone, xcode, xcode4.5

我正在尝试在用户输入时由文本字段填充标签：

。H

```
@interface MainView : UIViewController <UITextFieldDelegate> 
```

还有.m：

```
-(void)textViewDidChange:(UITextView *)textView
    {
        label.text = textField.text;
    }
- (void)viewDidLoad
    {
        [super viewDidLoad];
        [textField addTarget:self action:@selector(textViewDidChange:) forControlEvents:UIControlEventEditingChanged];
    } 
```

我已经与`label`标签和`textField`情节提要中的文本字段链接。

但是加载 ViewController 时应用程序崩溃：

***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[UILabel addTarget:action:forControlEvents:]: 无法识别的选择器发送到实例 0x7584ff0”

这里有什么帮助吗？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T01:07:23.297

您已经在实施`UITextFieldDelegate`，因此您可以像这样覆盖`shouldChangeCharactersInRange`：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
     // make sure it is the correct UITextField
     if ([textField isEqual:self.textField]) {
          // update UILabel
          self.label.text = [textField.text stringByReplacingCharactersInRange:range withString:string];
     }
     return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T01:31:43.773

我一直在寻找如何做到这一点，这很简单：

在你下面的 .h @interface 做一个计时器

```
 NSTimer *UpdateLabel; 
```

然后在你的 .m 中做

```
-(void)UpdateLabel{
Label.text = Textfield.text;
Label.teaxtColor = [UIColor whiteColor];
UIFont *labelfont=[UIFont fontWithName:@"your Font" size:19];
[Label setFont:labelfont];
} 
```

然后在你的 viewdidload 中做

```
UpdateLabel = [NSTimer scheduledTimerWithTimeInterval:0.05 target:self selector:@selector(UpdateLabel) userInfo:nil repeats:YES]; 
```

# css - 在 Android 上定位 Chrome

> ID：14616007
> 
> 赞同：2
> 
> 时间：2013-01-30T23:45:15.667
> 
> 标签：css

我注意到移动设备上的 CSS 需要一些修复，我想知道是否可以针对 Android 上的 Chrome 的 CSS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:28:38.357

我知道 android 使用不同的密度：低、中和高。您可以使用以下媒体查询非常轻松地定位其中的每一个

```
@media only screen and (-webkit-device-pixel-ratio:.75){
    /* Put CSS for low density (ldpi) Android layouts in here */
}

@media only screen and (-webkit-device-pixel-ratio:1){
    /* Put CSS for medium density (mdpi) Android layouts in here */
}

@media only screen and (-webkit-device-pixel-ratio:1.5){
    /* Put CSS for high density (hdpi) Android layouts in here */
} 
```

您可以使用 Safari 和 Chrome

```
@media screen and (-webkit-min-device-pixel-ratio:0) 
```

希望这可以帮助

# c++ - Lua：C ++模块不能相互引用，未定义的符号

> ID：14616012
> 
> 赞同：6
> 
> 时间：2013-01-30T23:45:49.480
> 
> 标签：c++, lua, dynamic-linking, dlopen, undefined-symbol

我创建了两个模块（共享对象）CPU 和 SaveState 作为模拟器的一部分。两者都被独立编译成 .so 单独的文件，并在运行时由 Lua 脚本使用 require() 加载；IE：

```
SaveState = require("SaveState")
CPU = require("CPU") 
```

在 CPU 中，有一个对 SaveState 进行操作的方法：

```
int CPU::save_state(SaveState *state) {
    state->begin_section(savestate_namespace, savestate_data_size);

    state->write16(this->reg.af);
    state->write16(this->reg.bc);
    state->write16(this->reg.de);
    state->write16(this->reg.hl);
    state->write16(this->reg.sp);
    state->write16(this->reg.pc);
    state->write8 (this->interrupts_enabled);
    state->write8 (this->irq_flags);
    state->write8 (this->ie_flags);
    state->write8 (this->halted);
    state->write8 (this->halt_bug);
    state->write8 (this->extra_cycles);
    state->write64(this->total_cycles);
    state->write64(this->idle_cycles);

    return SaveState::OK;
} 
```

它编译得很好，但`require("CPU")`行失败：

```
lua5.1: error loading module 'cpu' from file './src/cpu/build/cpu.so':
    ./src/cpu/build/cpu.so: undefined symbol: _ZN9SaveState7write64Ey 
```

使用`nm -D`我可以在 savestate.so 中看到确切的符号，但在运行时由于某种原因看不到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T02:35:47.137

我设法通过编写第三个模块来解决这个问题，该模块在其他两个模块之前加载，并在其 luaopen_module 方法中调用 dlopen()：

```
void *res = dlopen("src/savestate/build/savestate.so",
    RTLD_NOW | RTLD_GLOBAL); 
```

我不确定这是最好的解决方案，但它似乎可以解决问题。（我将不得不概括一下不使用硬编码路径等等......）

# php - PayPal IPN 欺诈检查

> ID：14616019
> 
> 赞同：0
> 
> 时间：2013-01-30T23:46:28.053
> 
> 标签：php, session-variables, paypal-ipn

我正在设置一个通过 IPN 与 PayPal 通信的购物车。我将 Miccah Carrick 的 IPN 与 PHP 和 WordPress Simple Paypal 购物车一起使用。几周后，我修改了购物车以满足我的需求，但在实施最后一次欺诈检查时遇到了问题。第三项欺诈检查是确保支付的金额等于购买的金额。我的商店包含许多商品，因此无法像 Miccah Carrick 在他的示例中那样使用固定编号。我认为答案是使用 PHP 会话变量，但没有任何运气。购物车内：

```
 $_SESSION['cart_total'] = $total+$postage_cost; 
```

随后，我尝试将 mc_gross 变量（即 PayPal 返回的金额）与 ipn 文件中的 $_SESSION['cart_total'] 变量进行比较。不幸的是，这并没有成功。为了进行错误检查，我将会话变量的值输出到 ipn 错误日志，并且由于离开页面完成 PayPal 结帐，会话变量似乎没有被设置或至少没有被传输。我试图输出第二个会话变量，我知道它设置正确并在我的各种菜单中使用，并且它在 ipn 文件中也没有值。

有人对如何完成此欺诈检查有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T02:31:48.577

IPN 侦听器无法访问`$_SESSION`用户的变量。会话在用户和您的站点之间，无论如何都不会传递给贝宝。您可以传递给贝宝的唯一变量是“自定义”变量。您可能可以在其中放置一些信息（订购的项目、总计等），并且“自定义”变量将传递给您的 IPN 侦听器，您可以对此进行验证。

# ruby-on-rails - 用于 CORS 的 Rails 路线通配符

> ID：14616021
> 
> 赞同：3
> 
> 时间：2013-01-30T23:46:47.967
> 
> 标签：ruby-on-rails, cors

我在 Rails API 上实现 CORS，我基本上想要定义一个路由，上面写着“通过 OPTIONS 方法对 API 调用的所有请求都应该转到控制器操作`cors`”。

到目前为止我所拥有的相关部分：

```
# routes.rb:
scope :module => 'api', :path => 'api' do
  match '*', :action => 'cors', :constraints => { :method => 'OPTIONS' }
end

# base_api_controller.rb:
class Api::BaseApiController < ApplicationController
  def cors
    # ... setting headers of Access-Control-Allow-Origin and stuff here...
  end
end 
```

我遇到的问题是当我通过 javascript 发出请求时，出现错误：

```
OPTIONS <url> Resource failed to load 
```

看来这应该可以工作，而我只是缺少一些简单的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-08T15:20:46.763

我不确定您为什么希望请求通过“控制器动作 cors”而不是默认的 api/控制器，但您可以这样做

```
#Gemfile
gem 'rack-cors', :require => 'rack/cors'

#config/application.rb
config.middleware.insert_before 0, "Rack::Cors" do
  allow do
    origins "*"
    resource "/api/*", :headers => :any, :methods => [:options], :action => 'cors'
  end
end 
```

或者**，我不会将其发送到不同的控制器操作**，所以这实际上是我认为你想要的

```
#Gemfile
gem 'rack-cors', :require => 'rack/cors'

#config/application.rb
config.middleware.insert_before 0, "Rack::Cors" do
  allow do
    origins "*"
    resource "/api/*", :headers => :any, :methods => [:options]
  end
end 
```

# javascript - 每次在字符串中找到匹配项时都会运行函数

> ID：14616024
> 
> 赞同：0
> 
> 时间：2013-01-30T23:47:04.437
> 
> 标签：javascript, replace, match

我有一个字符串

```
var stringP= "hi".rand(1,10)." my".rand(10,100)."name is ".rand(23,54).rand(1,4) 
```

模式是

```
rand(from,to) 
```

需要得到

```
hi5 my54name is 335 
```

可以使用类似的东西吗？

```
stringP.replace(/rand(*,*)/g, function(match){
    return match.replace(rand(*,*),Math.floor(Math.random() * (to - from + 1) + from));
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T23:52:17.330

是的，几乎一切皆有可能。但是，您想使用 [one!] 正确的[正则表达式](http://www.regular-expressions.info/)和正确的[替换函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)：

```
stringP.replace(/rand\((\d+),(\d+)\)/g, function(match, from, to) {
    from = parseInt(from, 10);
    to = parseInt(to, 10);
    return Math.floor(Math.random() * (to - from + 1) + from);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T23:52:32.097

你为什么用正则表达式来做这个？函数调用更有意义。

```
function rand (to, from) {
    return Math.floor(Math.random() * (to - from + 1) + from).toString();
}

var stringP= "hi" + rand(1,10) + " my" + rand(10,100) + "name is " + rand(23,54) + rand(1,4); 
```

# android - Galaxy s3 连接到 Arduino mega ADK 时不充电

> ID：14616027
> 
> 赞同：1
> 
> 时间：2013-01-30T23:47:43.307
> 
> 标签：android, arduino, samsung-mobile, adk

我有一个 Ardunio mega ADK R3 和 Samsung Galaxy S3，我正在尝试使用本教程使用 Galaxy 上的应用程序控制引脚 13 处的 LED：

[http://allaboutee.com/2011/12/31/arduino-adk-board-blink-an-led-with-your-phone-code-and-explanation/](http://allaboutee.com/2011/12/31/arduino-adk-board-blink-an-led-with-your-phone-code-and-explanation/)

我已经上传了Ardunio草图，在galaxy上安装了应用程序，但是当我将galaxy连接到Ardunio时没有任何反应，而且我没有被提升在galaxy上打开应用程序，它甚至没有给手机充电？

我的问题，如果手机没有通过 Ardunio 充电，是不是意味着 Ardunio 板上有问题，或者这是因为手机上的应用程序没有启动而导致的正常现象？

换句话说，如果我将ardunio连接到计算机，然后将galaxy连接到ardunio，而没有上传或安装任何草图或应用程序到android或ardunio并且galaxy没有开始充电，这是否意味着ardunio有问题木板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T11:35:14.560

我已经用 Google Nexuses 测试了 Ardunio ADK，并且 Ardunio 工作正常，没有任何问题，所以 Ardunio 板没有问题，但是在参考**“开始 Arduino 编程”**第 51 页之后>>

[http://www.amazon.com/Beginning-Arduino-Programming-Apress/dp/1430237775](https://rads.stackoverflow.com/amzn/click/com/1430237775)

"" **如果您在连接设备后没有任何反应**，请检查您的过滤器是否与您在 Arduino 草图中定义的值匹配。**另一个错误来源是您的电路板无法提供足够的电力来为 Android 设备正常供电。由于这是开放式附件标准的要求，如有必要，请确保使用外部电源为电路板供电。** """

所以看起来 Galaxy S3 消耗了大量电力，而 Ardunio 无法为其提供足够的电力。

# grails - 如何在 GSP 页面中递归列出孩子？

> ID：14616033
> 
> 赞同：3
> 
> 时间：2013-01-30T23:48:19.470
> 
> 标签：grails, recursion, tags, gsp

我有一个媒体域

```
def Media {
   String name

   static belongsTo = [parent:Media]
   static hasMany = [children:Media]
} 
```

在 show.gsp 页面中，我想将我所有的根媒体（没有父级）列出到一个 ul 列表中，并在另一个 ul 列表中递归地列出他们的孩子和他们的孩子。我在第一个列表中使用了标签，但我不知道如何递归地为孩子们做这件事。

那么你知道如何做到这一点吗？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T00:14:47.970

您可以将递归部分放入 GSP 模板中，然后递归调用它，例如：

`index.gsp`：假设`rootMedias`被传递到视图中

```
<g:each in="${rootMedias}" var="media">
    <g:render template="step" model="${[media: media]}" />
</g:each> 
```

`_step.gsp`

```
<ul>
    <g:each in="${media.children}" var="child">
    <li>
        ${child.name}
        <g:render template="step" model="${[media: child]}" />
    </li>
    </g:each>
</ul> 
```

# html - html 电子邮件中缺少名称属性

> ID：14616038
> 
> 赞同：0
> 
> 时间：2013-01-30T23:48:56.897
> 
> 标签：html, email

我想问一下你们中是否有人知道为什么当 html 作为电子邮件发送时缺少 name 属性？

```
<img src="http://somepic.jpg" alt="some_alt_message" name="some_name" /> 
```

变成

```
<img src="http://somepic.jpg" alt="some_alt_message"  /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:57:32.813

据我所知，图像标签不支持名称属性。[http://www.w3.org/MarkUp/html3/img.html](http://www.w3.org/MarkUp/html3/img.html)

和/或电子邮件解析正在剥离它，因为它不是有效属性。

[http://www.htmlquick.com/reference/tags/img.html#name](http://www.htmlquick.com/reference/tags/img.html#name)

“在 XHTML 1.0 中，该元素的“name”属性已被弃用，取而代之的是“id”属性，在 XHTML 1.1 中它完全无效。因此，不再推荐使用它。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T04:57:07.733

这取决于用于撰写、发送、传输或阅读电子邮件的软件。没有进一步的信息，几乎不可能确定有罪者。

`name`实际上，该属性仅在客户端脚本中使用，以便在 JavaScript 中选择特定元素。如果某些软件删除该属性会导致真正的问题，请考虑改用更标准的（这些天）`id`属性。

# bash - BASH：我可以回显字符串 + grep + sed，但是如何在同一行添加更多字符串？

> ID：14616041
> 
> 赞同：0
> 
> 时间：2013-01-30T23:49:01.230
> 
> 标签：bash, sed, newline, printf, echo

在这里提问总是我最后的手段。我尝试了一切，甚至是最令人尴尬的代码，所以我对解释我尝试过的东西没有成功感到困惑。我有：

```
echo $output | grep -i -m 1 "Time:" | sed 's/.*\s\([0-9]*:[0-9]*:[0-9]*\).time.*/\1/' 
```

它输出：

```
23:25:31 
```

简单的。

但我想在末尾再添加一个字符串，例如 " , $year" - 这样我就有：

```
23:25:31 , 2013 
```

问题是无论我尝试什么（printf、-n、-e、-ne、方括号、引号、|、;、&、/r 等）都会出错或无论如何都要换行。

任何建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T23:50:48.627

```
time=$(echo $output | grep -i -m 1 "Time:" | sed 's/.*\s\([0-9]*:[0-9]*:[0-9]*\).time.*/\1/')
echo "The time is ${time}, 2013" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:21:07.757

替补

1.  `tr -d '\n'`在 echo+grep+sed 管道的末尾添加。
2.  `{ entire-echo-grep-sed-pipeline ; echo , 2013 ; } | xargs echo`（但是，这会在 , 之前添加一个空格）

# ruby - 厨师：无法加载这样的文件——moneta/basic_file

> ID：14616051
> 
> 赞同：9
> 
> 时间：2013-01-30T23:50:13.147
> 
> 标签：ruby, chef-infra

我正在运行一个我以前使用过无数次的食谱，当我用厨师 + 刀启动一个新的 EC2 实例时，我遇到了这些错误。

```
[2013-01-30T23:44:48+00:00] INFO: Processing user[dan] action create (/var/chef/cache/cookbooks/users/providers/manage.rb line 65)

 [2013-01-30T23:44:48+00:00] INFO: user[dan] created

 [2013-01-30T23:44:48+00:00] INFO: Processing directory[/home/dan/.ssh] action create (/var/chef/cache/cookbooks/users/providers/manage.rb line 81)

 [2013-01-30T23:44:48+00:00] INFO: directory[/home/dan/.ssh] created directory /home/dan/.ssh

 [2013-01-30T23:44:48+00:00] INFO: directory[/home/dan/.ssh] owner changed to 2003

 [2013-01-30T23:44:48+00:00] INFO: directory[/home/dan/.ssh] group changed to 2003

 [2013-01-30T23:44:48+00:00] INFO: directory[/home/dan/.ssh] mode changed to 700

 [2013-01-30T23:44:48+00:00] INFO: Processing template[/home/dan/.ssh/authorized_keys] action create (/var/chef/cache/cookbooks/users/providers/manage.rb line 88)

 [2013-01-30T23:44:48+00:00] FATAL: Could not load Moneta back end "BasicFile"

 ================================================================================

 Error executing action `create` on resource 'template[/home/dan/.ssh/authorized_keys]'

 ================================================================================

 LoadError

 ---------

 cannot load such file -- moneta/basic_file

 Resource Declaration:

 ---------------------

 # In /var/chef/cache/cookbooks/users/providers/manage.rb

  88:         template "#{home_dir}/.ssh/authorized_keys" do

  89:           source "authorized_keys.erb"

  90:           cookbook new_resource.cookbook

  91:           owner u['id']

  92:           group u['gid'] || u['id']

  93:           mode "0600"

  94:           variables :ssh_keys => u['ssh_keys']

  95:         end

  96:       end

 Compiled Resource:

 ------------------

 # Declared in /var/chef/cache/cookbooks/users/providers/manage.rb:88:in `block (2 levels) in class_from_file'

 template("/home/dan/.ssh/authorized_keys") do

   provider Chef::Provider::Template

   action "create"

   retries 0

   retry_delay 2

   path "/home/dan/.ssh/authorized_keys"

   backup 5

   source "authorized_keys.erb"

   cookbook "users"

   variables {:ssh_keys=>"ssh-rsa <REPLACED BECAUSE SHUTUP>!"}

   cookbook_name "users"

   mode "0600"

   owner "dan"

   group "dan"

 end

 [2013-01-30T23:44:48+00:00] ERROR: Running exception handlers

 [2013-01-30T23:44:48+00:00] FATAL: Saving node information to /var/chef/cache/failed-run-data.json

 [2013-01-30T23:44:48+00:00] ERROR: Exception handlers complete

 [2013-01-30T23:44:48+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out

 [2013-01-30T23:44:48+00:00] FATAL: LoadError: template[/home/dan/.ssh/authorized_keys] (/var/chef/cache/cookbooks/users/providers/manage.rb line 88) had an error: LoadError: cannot load such file -- moneta/basic_file 
```

我不知道发生了什么，moneta 是什么，或者为什么它不能从该模板构建。模板`templates/default/authorized_keys.erb`如预期的那样。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-02T03:51:38.487

这是最近升级的“moneta”宝石。幸运的是，有一个简单的修复（回滚！），除非您在该 gem 中使用新功能。执行以下操作：

`gem install moneta --version=0.6.0`
`gem uninstall moneta`
...然后卸载所有版本的 moneta >= 0.7.0

[参考厨师票](http://tickets.opscode.com/browse/CHEF-3721)

# sql - 将唯一值插入数据库 PGSQL/MSSQL

> ID：14616059
> 
> 赞同：2
> 
> 时间：2013-01-30T23:50:44.467
> 
> 标签：sql, sql-server, postgresql, insert-into, not-exists

我正在尝试使用 insert into where not exists 在 MSSQL 和 Postgresql DB 中插入唯一记录。但是我收到了一个不正确的语法错误，如下所示。我究竟做错了什么？

```
INSERT INTO settings (id, title, description)
VALUES  (1, 'imageHeight', 'Image Height')
WHERE NOT EXISTS (Select * from settings where id = 1); 
```

错误： **[Macromedia][SQLServer JDBC 驱动程序][SQLServer]关键字“WHERE”附近的语法不正确。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T23:55:34.553

试试这个：

```
INSERT INTO settings (id, title, description)
    SELECT 1, 'imageHeight', 'Image Height'
        WHERE NOT EXISTS (SELECT 1 FROM settings WHERE id = 1); 
```

[sql server sql 小提琴](http://sqlfiddle.com/#!3/cd901/2)

[postgresql sql小提琴](http://sqlfiddle.com/#!12/ef87b/1)

`WHERE`是通常与`INSERT`操作无关的结果的过滤器。

# css-position - dompdf 绝对定位元素分页符

> ID：14616060
> 
> 赞同：0
> 
> 时间：2013-01-30T23:50:45.700
> 
> 标签：css-position, absolute, dompdf, page-break, absolutelayout

我有一个动态生成的页面，由一些 div 和表格以及这些 div 中的其他元素组成，所有这些都是绝对定位的。较低的 div 可能包含更多内容，例如评论/描述，因此它们会比页面长。

问题是 dompdf 没有插入分页符，它只是跨越到第一页的末尾，而我的 html 的其余部分被切断了......

显然，page-break-before/after allways 是行不通的，因为内容是动态的，它可能会也可能不会跨越多个页面，具体取决于每个条目。

有没有人知道一种更简单的让它表现的方法，除了测量内容高度，在生成 html 并将其发送到 dompdf 之前用 JS 插入分页符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T03:27:16.283

问题是一个大 div，其中包含正文中的所有元素。Dompdf 无法理解 div 碎成碎片。一旦它消失了，它就可以很好地在 body 标记中安排单独的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-06T21:25:16.153

原因是 dompdf 不会在带有`position:absolute`. 这是错误报告：[“位置：绝对”元素中的自动分页符不起作用](https://github.com/dompdf/dompdf/issues/1138)

因此，在不知道您的 CSS 的详细信息的情况下，我会说问题不在于“将 div 分解成碎片”，而是在此页面上将其`absolute`视为*绝对的。*

# c - 如何在 Dev C++ 中使用像 ╔ ═ 和 ╗ 这样的字符作为字符串的一部分？

> ID：14616063
> 
> 赞同：1
> 
> 时间：2013-01-30T23:50:59.193
> 
> 标签：c, string, char

我只是不知道怎么做。我必须先把它们放在一个变量中，比如： char c1=201; 有什么办法可以将字符直接放到字符串上？像这样的字符：╔═和╗</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T00:01:37.693

您可以使用八进制转义符将任意字节输入到字符串中。

```
char *s = "\311";  //== Decimal 201 
```

在 Windows 上，您也可以使用该`charmap`应用程序。但是您必须选择具有字符的字体才能从网格中选择它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T23:55:40.553

执行此操作的旧方法是按住`Alt`键并在数字键盘上键入代码。这仍然有效，但根据您使用的代码页而令人困惑。还是去试试吧...

如果我输入`Alt-201`（在键盘上，而不是数字条上），我会得到：╔</p>

顺便说一句，这可能是仅限 Windows 的东西。不完全确定 =)

# cuda - 涉及相邻元素的推力矢量变换

> ID：14616066
> 
> 赞同：1
> 
> 时间：2013-01-30T23:51:21.507
> 
> 标签：cuda, thrust, cublas, bspline

我有一个向量，我想使用 CUDA 和推力转换执行以下操作：

```
// thrust::device_vector v;
// for k times:
//     calculate constants a and b as functions of k;
//     for (i=0; i < v.size(); i++)
//         v[i] = a*v[i] + b*v[i+1]; 
```

我应该如何正确实现这一点？我可以做到的一种方法是使用向量 w，然后将推力::变换应用于 v 并将结果保存到 w。但是k提前是未知的，我不想创建w1，w2，...浪费大量的GPU内存空间。最好我想尽量减少数据复制的数量。但我不确定如何使用一个向量来实现这一点，而这些值不会相互影响。Thrust 提供的东西可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T03:26:15.880

如果`v.size()`足够大以充分利用 GPU，您可以启动`k`内核来执行此操作，并使用额外的缓冲区内存且无需额外的数据传输。

```
thrust::device_vector u(v.size());
for(k=0;;)
{
    // calculate a & b
    thrust::transform(v.begin(), v.end()-1, v.begin()+1, u.begin(), a*_1 + b*_2);
    k++;
    if(k>=K)
        break;

    // calculate a & b
    thrust::transform(u.begin(), u.end()-1, u.begin()+1, v.begin(), a*_1 + b*_2);
    k++;
    if(k>=K)
        break;      
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T03:14:02.767

我实际上并不了解“k次”，但以下代码可能会对您有所帮助。

```
struct OP {
    const int a, b;
    OP(const int p, const int q): a(p), b(q){};
    int operator()(const int v1, const int v2) {
      return a*v1+b*v2;
    }
}
thrust::device_vector<int> w(v.size());
thrust::transform(v.begin(), v.end()-1, //input_1
                  v.begin()+1,          //input_2
                  w.begin(),            //output
                  OP(a, b));            //functor
v = w; 
```

我认为学习“函子”，以及推力的几个例子会给你一个很好的指导。

希望这将帮助您解决您的问题。:)

# html - CSS img:hover 基于 alt 值

> ID：14616067
> 
> 赞同：0
> 
> 时间：2013-01-30T23:51:28.670
> 
> 标签：html, css, hover, image, alt

谁能告诉我如何根据标签的-attribute 值将一些 CSS 应用于`<img>`标签？`alt`

例如，我有 ALT 值为 DISAPPEAR 的图像

悬停时，我想设置

```
img[DISAPPEAR]:hover
{
  display:none;
} 
```

上面的代码似乎不起作用:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T23:53:51.107

干得好：

```
img[alt="DISAPPEAR"]:hover
 {
 display:none;
 } 
```

它是这样工作的： `selector[attribute="value"]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T23:57:46.423

正如 CoderOfHonor 所说，你应该使用

```
img[alt="DISAPPEAR"]:hover
{
  display:none;
} 
```

但是要在 IE 8 或更早版本中工作，您*应该*有`<!DOCTYPE>`！

# javascript - 将参数传递给输入字段内的 JavaScript 函数与从函数内部传递参数

> ID：14616083
> 
> 赞同：0
> 
> 时间：2013-01-30T23:52:35.877
> 
> 标签：javascript, html, function, argument-passing

以下两种传递/设置变量的方式之间的优缺点是什么？

`<input type="password" name="pw1" id="pw1" onkeyup="return passwordCheck(document.getElementById('pw1'), document.getElementById('pw2'))"/`

`function passwordCheck(first, second){...`

或者

`<input type="password" name="pw1" id="pw1" onkeyup="return passwordCheck()"/`

```
function passwordCheck(){
var first = document.getElementById('pw1')
var second = document.getElementById('pw2')... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:56:32.533

它使您的 html 标记更易于阅读（以及您的 js 代码）。它（更多）将您的代码与您的标记分离。更好的方法是通过定位 id 将事件侦听器绑定到输入。这样你的标记中就没有 js。

编辑以回应评论：我指的是第二个示例（调用函数）更好，但总的来说最好进行事件绑定。有多种方法可以做到这一点，这里是一个例子：

```
<input type="password" name="pw1" id="pw1"/>

// ...

document.getElementByID('pw1').onkeyup = function() { 
  // do stuff
} 
```

# javascript - jquery获取对象值

> ID：14616085
> 
> 赞同：0
> 
> 时间：2013-01-30T23:52:38.097
> 
> 标签：javascript, jquery

如何`url`从此字符串中获取值：

```
[{
    "url": "https://www.filepicker.io/api/file/WGS4Wmkk",
    "filename": "4827889.jpg",
    "mimetype": "image/jpeg",
    "size": 53113,
    "key": "be7BxONVHe_48278891840.jpg",
    "isWriteable": false
}] 
```

使用 jquery 或常规 javascript

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T23:54:05.340

如果`str`是您在上面发布的字符串，您可以使用 JSON 来解析它：

```
var data = JSON.parse(str);
console.log(data[0].url); // the url value 
```

# c# - 邮寄至：Asp.net

> ID：14616088
> 
> 赞同：-1
> 
> 时间：2013-01-30T23:52:47.873
> 
> 标签：c#, asp.net

我有一个 asp 标签，我需要能够根据后面的代码进行更改。我怎样才能做到这一点？

ASPX ：（第一部分仅适用于“TestA@abc.com”，第二部分根据后面代码中的“if”语句动态更改标签（EmailLabel）。我怎样才能将这两者整合起来，所以标签是mailto? 谢谢。

```
<p>Email at <a href="mailto:TestA@abc.com?subject=Comments">TestA@abc.com</a>.</p>

<p>Email at <asp:Label ID="EmailLabel" runat="server"></asp:Label>.</p> 
```

代码背后：

```
public changeLabel()
{
 if (//Some Condition Here)
 {
    this.EmailLabel.Text = "TestA@abc.com";
 }
 else
 {
  this.EmailLabel.Text = "TestB@abc.com";
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:01:07.650

你在那里尝试做的事情是行不通的。标签呈现为`<span>`标签，因此它永远不会“可点击”。你想做更多这样的事情：

```
<p>Email at <a href="mailto:TestA@abc.com?subject=Comments">TestA@abc.com</a>.</p>

<p>Email at <asp:LinkButton ID="EmailLabel" runat="server"></asp:LinkButton>.</p> 
```

然后不是更改`Text`属性，而是更改`NavigateUrl`属性。

您还可以使用[`HtmlControl`](http://msdn.microsoft.com/en-us/library/7a9d6h4f%28v=vs.100%29.aspx)，它基本上是您添加`runat="server"`属性的标准 HTML 标记。

```
<p>Email at <a id="EmailLabel" runat="server" href=""></a>.</p> 
```

然后，您将能够`<a>`通过服务器端代码修改此标签，属性会略有不同，但现在您有了一个真正的实时锚标签可以使用。

这个其他 SO 问题也可能会有所帮助：[如何在 LinkBut​​ton 点击​​事件上启动电子邮件客户端？](https://stackoverflow.com/questions/2804384/how-to-launching-email-client-on-linkbutton-click-event)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-09T20:05:38.827

```
<html>
<body>
<span id="foo" 
      onclick="document.getElementById('foo').innerHTML = 'never say never'"
>
    Click Me!
</span>
</body>
</html> 
```

对于您的标签，请记住 .Text 是 .innerHTML 的服务器等效项，因此您可以在设置 .Text 时将所需的任何 HTML 直接放入 asp:Label 中。只需注意跨站点脚本攻击。

# sql - Oracle：在一个查询中总结这个和这个和这个

> ID：14616093
> 
> 赞同：0
> 
> 时间：2013-01-30T23:53:10.793
> 
> 标签：sql, oracle

我在订单表上有上周的订单和送货司机的 ID。它看起来有点像这样：

```
ORDERDATE,    ORDERNO,    DRIVER
23/01/2013,    901398503,    1
23/01/2013,    901332159,    1
23/01/2013,    901334158,    2
24/01/2013,    901338455,    1
25/01/2013,    902907513,    1
25/01/2013,    902338553,    2
25/01/2013,    903936533,    2
27/01/2013,    903944523,    1
27/01/2013,    903981522,    2
27/01/2013,    911334951,    1
28/01/2013,    911338851,    1
28/01/2013,    911339259,    1
28/01/2013,    912332555,    2
28/01/2013,    912336650,    2
29/01/2013,    912337655,    1
29/01/2013,    913969582,    1
29/01/2013,    913973583,    1
29/01/2013,    913982552,    1
29/01/2013,    916379158,    1 
```

我想选择 ORDERDATE、ORDERCOUNT、DRIVER_1_COUNT、DRIVER_2_COUNT。

所以，日期| 总订单 | 司机 1 的总订单 | 司机 2 的总订单

此外，如果 ORDERDATE、ORDERCOUNT、DRIVER_1_COUNT 或 DRIVER_2_COUNT 为 0（或 null），我需要零。

（在 oracle 中）我可以为上周的每一天选择日期，并为每一天选择零订单计数（占位符），如下所示：

```
select 
 TRUNC(NEXT_DAY(sysdate,'SUNDAY')-7 +i) ORDERDATE,
 0 as ORDERCOUNT   
from
 (select rownum i from all_objects where rownum < 8) 
```

我应该能够使用此输出来确保最终结果中没有缺少日期（在本例中 26 日没有订单）

```
ORDERDATE,ORDERCOUNT
23/01/2013,0
24/01/2013,0
25/01/2013,0
26/01/2013,0
27/01/2013,0
28/01/2013,0
29/01/2013,0 
```

我需要这个输出：

```
ORDERDATE,ORDERCOUNT,DRIVER_1_COUNT,DRIVER_2_COUNT
23/01/2013,3,2,1
24/01/2013,1,1,0
25/01/2013,3,1,2
26/01/2013,0,0,0
27/01/2013,3,2,1
28/01/2013,4,2,2
29/01/2013,5,5,0 
```

我可以得到 ORDERDATE & ORDERCOUNT(simple sum) 并与其他查询联合以避免丢失天数，但我也不知道如何为每个驱动程序求和。

提前感谢您的帮助。

埃德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:36:27.687

在 Oracle 11g 中，您可以这样做：-

```
SELECT *
FROM orders
PIVOT (
  COUNT( ORDERNO )
  FOR DRIVER IN (1,2,3)
) 
```

如需进一步解释，请参阅[11g 中的 pivot 和 unpivot 查询](http://www.oracle-developer.net/display.php?id=506)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T00:02:49.653

首先，您需要总结和交叉表结果：

```
SELECT ORDERDATE, SUM(ORDERCOUNT) ORDERCOUNT, 
SUM(DECODE(DRIVER,1,ORDERCOUNT,0)) DRIVER_1_COUNT, 
SUM(DECODE(DRIVER,2,ORDERCOUNT,0)) DRIVER_2_COUNT
FROM (
    SELECT ORDERDATE, DRIVER, COUNT(*) ORDERCOUNT
    FROM YourTable
    GROUP BY ORDERDATE, DRIVER
) S
GROUP BY  ORDERDATE 
```

在 Oracle 中可能有更聪明的方法来做到这一点

然后，您需要使用外部连接到您的日期来填写空白：

（请注意，上面的查询在此查询中别名为“T”：）

```
SELECT D.ORDERDATE, 
NVL(T.ORDERCOUNT,0) ORDERCOUNT, 
NVL(T.DRIVER_1_COUNT,0) DRIVER_1_COUNT, 
NVL(T.DRIVER_1_COUNT,0) DRIVER_2_COUNT
FROM 
(
SELECT ORDERDATE, SUM(ORDERCOUNT) ORDERCOUNT, 
SUM(DECODE(DRIVER,1,ORDERCOUNT,0)) DRIVER_1_COUNT, 
SUM(DECODE(DRIVER,2,ORDERCOUNT,0)) DRIVER_2_COUNT
FROM 
    (
    SELECT ORDERDATE, DRIVER, COUNT(*) ORDERCOUNT
    FROM YourTable
    GROUP BY ORDERDATE, DRIVER
    ) S
GROUP BY  ORDERDATE
) T
RIGHT OUTER JOIN
(
SELECT
TRUNC(NEXT_DAY(sysdate,'SUNDAY')-7 +i) ORDERDATE
FROM (select rownum i from all_objects where rownum < 8)
) D
ON D.ORDERDATE = T.ORDERDATE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T00:06:31.627

您必须从子查询中进行选择。像这样的东西应该工作。

```
select orderdate, ordercount, sum(driver1) driver1count, sum(driver2) driver2count
from (
select orderdate
, case when driver = 1 then 1 else 0 end driver1
, case when driver = 2 then 1 else 0 end driver2
, count(*) ordercount

from yourtable

where whatever

group by orderdate
, case when driver = 1 then 1 else 0 end driver1
, case when driver = 2 then 1 else 0 end driver2

) you_need_an_alias_here

group by orderdate, ordercount

order by orderdate 
```

# python - 如何在 Python 中改进一个简单的缓存机制？

> ID：14616095
> 
> 赞同：0
> 
> 时间：2013-01-30T23:53:17.750
> 
> 标签：python, caching

刚刚注册，所以我可以问这个问题。

现在我有这段代码可以防止一个类每五分钟更新一次以上：

```
now = datetime.now()
delta = now - myClass.last_updated_date
seconds = delta.seconds

if seconds > 300
    update(myClass)     
else
    retrieveFromCache(myClass) 
```

我想修改它，允许 myClass 每 5 分钟更新两次，而不是只更新一次。

我正在考虑创建一个列表来存储 myClass 更新的最后两次，并与 if 语句中的那些进行比较，但我担心如果我走这条路，我的代码会变得复杂且难以阅读。

有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:57:28.850

你可以用一个简单的计数器来做到这一点。概念是`get_update_count`跟踪类的更新频率。

```
if seconds > 300 or get_update_count(myClass) < 2:
    #and update updatecount
    update(myClass)     
else:
    #reset update count
    retrieveFromCache(myClass) 
```

我不确定你是如何唯一识别的`myClass.`

```
update_map = {}

def update(instance):
     #do the update
     update_map[instance] = update_map.get(instance,0)+1

def get_update_count(instance):
     return update_map[instance] or 0 
```

# codeigniter - CodeIgniter 中的反刷新 (F5) 提交表单

> ID：14616103
> 
> 赞同：1
> 
> 时间：2013-01-30T23:54:04.920
> 
> 标签：codeigniter, codeigniter-2, page-refresh

如何防止在 CodeIgniter 中刷新表单页面？

如果我使用重定向——一切正常，但我可以直接访问 site.com/update/success 页面。如何防止直接访问成功页面（仅来自 site.com/update/）？

控制器更新.php

```
public function index() {
   if($this->form_validation->run() == FALSE) {
      $data['error'] = 'Something wrong';
      $this->load->view('update', $data);
   } else {
      redirect('/update/success');
   }
}

public function success() {
   $message = 'Your profile has been successfully updated';
   $this->load->view($message);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T00:37:59.533

您可以在 index() 函数中的 flashdata 中设置一个标记，然后在 success() 方法中检查该标记。

```
class Update extends CI_Controller {

    property $token;

    public function __construct()
    {
        $this->load->library('session');
    }

    public function index() {
       if($this->form_validation->run() == FALSE) {
          $data['error'] = 'Something wrong';
          $this->load->view('update', $data);
       } else {
          $this->session->set_flashdata('update_token', time());
          redirect('/update/success');
       }
    }

    public function success() {

        // Make sure this request came from the index() method...
        if( ! $this->session->flashdata('update_token'))
        {
            redirect();
        }

       $message = 'Your profile has been successfully updated';
       $this->load->view($message);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T23:59:48.003

前段时间我使用了codeigniter，所以我不确定。

也许您可以将 succes 函数设为私有，然后像这样在 else 中调用它：

```
 public function index() {
        if($this->form_validation->run() == FALSE) {
            $data['error'] = 'Something wrong';
            $this->load->view('update', $data);
        } else {
            $this->success();
        }
   }

    private function success() {
       $message = 'Your profile has been successfully updated';
       $this->load->view($message);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T00:06:23.047

```
public function index() {
   if($this->form_validation->run() == FALSE) {
      $data['error'] = 'Something wrong';
      $this->load->view('update', $data);
   } else {
      // create success session/cookie
      $this->_success()
   }
}

public function _success() {
   // destroy success session when called
    // checks success session if existing if not the page has been refreshed redirect
   $message = 'Your profile has been successfully updated';
   echo $this->nocache();
   $this->load->view($message);
}

public function _nocache()
{
 header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");
 header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT"); 
 header("Cache-Control: no-store, no-cache, must-revalidate"); 
 header("Cache-Control: post-check=0, pre-check=0", false);
 header("Pragma: no-cache");
} 
```

您可以添加“_”下划线，使其无法通过 url 访问，并在标题中添加 no cache，这样当他们单击返回或再次访问相同的 url 时，页面不会在浏览器上保持缓存。

*代码未测试*

# vhdl - Xilinx VHDL 多周期约束

> ID：14616109
> 
> 赞同：0
> 
> 时间：2013-01-30T23:54:51.497
> 
> 标签：vhdl, xilinx

我有一些在 Xilinx Spartan 6 上运行的代码，它目前符合时序要求。但是，我想更改它，以便使用更少的寄存器。

```
signal response_ipv4_checksum     : std_logic_vector(15 downto 0);
signal response_ipv4_checksum_1   : std_logic_vector(15 downto 0);
signal response_ipv4_checksum_2   : std_logic_vector(15 downto 0);
signal response_ipv4_checksum_3   : std_logic_vector(15 downto 0);
…

process (clk)
begin
    if rising_edge(clk) then
        response_ipv4_checksum_3 <= utility.ones_complement_sum(x"4622",                  config.source_ip(31 downto 16));
        response_ipv4_checksum_2 <= utility.ones_complement_sum(response_ipv4_checksum_3, config.source_ip(15 downto 8));
        response_ipv4_checksum_1 <= utility.ones_complement_sum(response_ipv4_checksum_2, response_group(31 downto 16));
        response_ipv4_checksum   <= utility.ones_complement_sum(response_ipv4_checksum_1, response_group(15 downto 0));
    end if;
end process; 
```

目前，为了满足时间要求，我需要在多个周期中拆分添加。但是，我有 20 个周期来实际计算这个值，在此期间配置值不能改变。

是否有一些我可以使用（首选）的属性或我可以使用的约束（ucf）文件中的行，以便我可以简单地编写相同的东西，但不使用寄存器？

*只是为了一些额外的代码，在我的 UCF 中，我已经有一个看起来像这样的时间规范：*

```
NET pin_phy_rxclk TNM_NET = "PIN_PHY_RXCLK";
TIMESPEC "TS_PIN_PHY_RXCLK" = PERIOD "PIN_PHY_RXCLK" 8ns HIGH 50%; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:09:58.070

我认为你需要一个 FROM:TO 约束：

```
TIMESPEC TSname=FROM “group1” TO “group2” value; 
```

哪里`value`可以基于另一个时间规范，比如`TS_CLK*4`

因此，您将调整您的过程，使其仅在输出信号上使用触发器，创建一个包含输入的时间组，另一个包含输出的时间组，并将它们用于`group1`和`group2`。

因此，第 1 组将包含所有输入网络`/path/to/your/instance/config.source_ip`和`/path/to/your/instance/response_group`。为实体创建向量输入并在其外部连接 config/response_group 信号可能更容易。然后你就可以使用`/path/to/your/instance/name_of_input_signals`.

第 2 组将包含`/path/to/your/instance/response_ipv4_checksum`.

而且，正如你评论的那样，你可以使用`TS_PIN_PHY_RXCLK*4`（假设它是一个时间，而不是一个频率 - 否则你必须做一个`/4`我认为）

# arrays - VB.NET 数组 = 数组

> ID：14616111
> 
> 赞同：1
> 
> 时间：2013-01-30T23:55:05.210
> 
> 标签：arrays, vb.net

我正在尝试创建一个程序，在其中我将数组分配给数组。它们是这样声明的：

Const Deck_Size = 52

Private Deck(Deck_Size), Table_Deck(Deck_Size) 作为字符串

所以，在我的程序中，我写了这一行：

**甲板 = Table_Deck**

这是做什么的，我如何从我得到的结果中理解，“Table_Deck”指针已分配给“Deck”。例如

Table_Deck = "As","Ks","Qs","Js",...

甲板=“2h”，“3h”，“4h”，“5h”，...

在此代码行之后：Deck = Table_Deck，我有这个：

Table_Deck = "As","Ks","Qs","Js",...

甲板 = "As","Ks","Qs","Js",...

问题来了。

当下一个代码行完成时（即：**Table_Deck(1) = Table_Deck(4)**），我得到这个结果：**Table_Deck = "Js","Ks","Qs","Js",...**，但是以及“甲板”也发生了变化......

**甲板 = "Js","Ks","Qs","Js",...**

所以，我认为这是指针错误。如果我只想更改一个数组中的元素，谁能告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T00:06:19.567

对，您的分配更改了数组引用。之后，Deck 和 Table_Deck 都引用了完全相同的数组。因此，您对 Deck 内容所做的任何更改也将通过 Table_Deck 引用可见。您必须改为复制内容：

```
 Table_Deck.CopyTo(Deck, 0) 
```

# couchbase - 如何使用 python 客户端在 Couchbase 中检索多个文档

> ID：14616113
> 
> 赞同：1
> 
> 时间：2013-01-30T23:55:09.990
> 
> 标签：couchbase

目前，Couchbase Python 客户端还没有实现 getMulti() 方法。如何通过提供多个密钥批量检索多个文档？

我在问关于[couchbase](https://github.com/couchbase/couchbase-python-client/blob/master/couchbase/couchbaseclient.py)不是 memcached 客户端的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:12:52.500

正如您今天注意到的，Couchbase 客户端不支持它。所以你必须把它放在一个循环中并进行单独的获取。

已记录有关该主题的问题：http: [//www.couchbase.com/issues/browse/PYCBC-49](http://www.couchbase.com/issues/browse/PYCBC-49)

# php - 在 apache/php 上记录经过身份验证的用户

> ID：14616114
> 
> 赞同：0
> 
> 时间：2013-01-30T23:55:13.370
> 
> 标签：php, apache, .htaccess

所以我知道使用 $_SERVER['PHP_AUTH_USER']

这将显示经过身份验证的用户的当前用户名。

但是相反，我希望能够转储所有经过身份验证的当前活动用户的列表（以及他们的 IP 地址等）这可以在 php 中完成吗？甚至 bash 也会很好，用 php 5 运行 apache

# ios - ARC 释放的挂钩端

> ID：14616119
> 
> 赞同：2
> 
> 时间：2013-01-30T23:55:44.847
> 
> 标签：ios, objective-c, automatic-ref-counting, dealloc

给定以下简单的实现：

```
@implementation RTUDeallocLogger
-(void)dealloc
{
    NSLog(@"deallocated");
}
@end 
```

我们在 ARC 下运行以下代码：

```
@implementation RTURunner
{
    NSArray* arr;
}
-(void)run{
    arr = [NSArray
           arrayWithObjects:[[RTUDeallocLogger alloc]init],
                            [[RTUDeallocLogger alloc]init],
                            [[RTUDeallocLogger alloc]init],
                            nil];
    NSLog(@"nulling arr");
    arr = NULL;
    NSLog(@"finished nulling");
}
@end 
```

我们得到以下日志输出：

```
归零arr
完成归零
解除分配
解除分配
解除分配

```

我想在所有释放完成后执行一个操作。这可能吗？

*这个问题的目的是真正了解更多关于 ARC 的机制，特别是 ARC 在什么时候触发这些释放，以及当我删除引用时这是否会同步发生。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T00:04:32.003

-dealloc 始终是同步的，并且在删除最后一个强引用时发生。但是，对于您的代码， +arrayWithObjects: 可能（如果至少在 -O0 编译）将数组放入自动释放池中，因此当池耗尽时，最后一个强引用被删除，而不是当您将变量设置为 NULL （你应该对 ObjC 对象使用 nil，顺便说一句）。

您可以通过使用 alloc/init 创建来避免将对象放在自动释放池中，并且您*可以*（实现细节，bla bla）通过打开优化进行编译来避免它。您还可以使用 @autoreleasepool { } 来引入内部池并以此方式绑定生命周期。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-31T00:05:23.597

如果我是 Apple 的工程师，我可能会争辩说你的问题可能是你的设计。您几乎没有理由希望通过观察`dealloc`而不是让`dealloc`自己行动来有效地采取行动。

[一个巨大的编辑如下：弱属性不通过正常的属性机制，因此它们不符合 KVO，包括最初提议的内部隐式 KVO]

也就是说，您可以做的是通过对象关联将两个对象的生命周期绑定在一起，并使用后者的 dealloc 作为对前者的 dealloc 的调用。

所以，例如

```
#import <objc/runtime.h>

@interface DeallocNotifier;
- (id)initWithObject:(id)object target:(id)target action:(SEL)action;
@end

@implementation DeallocNotifier
- (id)initWithObject:(id)object target:(id)target action:(SEL)action
{
    ... blah ...

    // we'll use a static int even though we'll never access by this key again
    // to definitely ensure no potential collisions from lazy patterns
    static int anyOldKeyWellNeverUseAgain;

    objc_setAssociatedObject(object, &anyOldKeyWellNeverUseAgain, self, OBJC_ASSOCIATION_RETAIN);

    ... blah ...
}
- (void)dealloc
{
    [_target performSelector:_action];
}
@end

-(void)run{
    arr = ...

    [[DeallocNotifier alloc]
           initWithObject:arr target:self action:@selector(arrayDidDealloc)];

    /* you may not even need *arr in this case; I'm unclear as
    to why you have an instance variable for something you don't
    want to keep, so I guess it'll depend on your code */
} // end of run

- (void)arrayDidDealloc
{
    NSLog(@"array was deallocated");
} 
```

我假设您能够将您感兴趣的所有对象的生命周期与单个容器的生命周期联系起来；否则您可以将通知程序与所有相关对象相关联。

你得到的时候阵列肯定已经消失了`arrayDidDealloc`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T00:05:12.687

> ARC在什么时候触发这些释放

ARC 基于静态分析将分配/解除分配插入到您的代码中。您可以通过查看源代码的程序集来了解它在哪里执行此操作——`Product -> Generate Output`在 Xcode 中转到。

> 当我删除引用时，这是否会同步发生

保留/释放/自动释放始终是同步的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-31T00:25:52.980

你的代码

```
arr = [NSArray arrayWithObjects:[[RTUDeallocLogger alloc] init],
                                [[RTUDeallocLogger alloc] init],
                                [[RTUDeallocLogger alloc] init],
                                nil]; 
```

将隐式地将对象放入自动释放池中。分配对象后，你不希望它被保留（因为 NSArray 收到对象后会做保留），但你不能立即释放它，否则它永远不会让它活着到 NSArray。这就是自动释放的目的 - 涵盖对象在两个所有者之间处于不确定状态的情况。

alloc 时的 retain count 是 1，然后被 autoreleasepool 保留并由你释放，所以 retain count 保持为 1。然后，它被 NSArray 保留，所以 retain count 变为 2。

稍后，NSArray 被释放，因此保留计数返回 1，当自动释放池有机会运行时，对象最终被清理。

您可以通过嵌套另一个池来使自动释放动作更快 - 通过使用 @autorelease{} 子句包装您的 NSArray 创建。

# objective-c - 如何在 Web 视图中自动包含 http://

> ID：14616120
> 
> 赞同：1
> 
> 时间：2013-01-30T23:55:51.987
> 
> 标签：objective-c, xcode

我在 Xcode 中有一个 Web 视图和一个可以输入 URL 地址的文本字段。唯一的问题是在输入地址时，您必须手动输入 http:// 否则它将无法识别。我怎么能做到这一点，代码会是什么样子？另一方面，当我单击链接时，如何更改文本字段地址？因为当我单击链接时，URL 会停留在上一页。例如，我输入 google.com，当我点击一个链接时，文本字段停留在 google。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:24:51.903

无论您在何处处理 URL，您都可能会从输入文本字段中获得某种 NSString。假设你有这样的东西：

```
NSString *awesomeURLString = [myCoolTextField text];
NSURL *awesomeURL = [NSURL urlWithString:awesomeURLString]; 
```

在您创建“awesomeURLString”的地方，您可以使用“stringWithFormat”方法在其上添加 http:// 前缀。

```
NSString *awesomeURLString = [NSString stringWithFormat:@"http://%@",[myCoolTextField text]]; 
```

这将使最终结果如下：

```
NSString *awesomeURLString = [NSString stringWithFormat:@"http://%@",[myCoolTextField text]];
NSURL *awesomeURL = [NSURL urlWithString:awesomeURLString]; 
```

将来，还应该考虑添加逻辑，看看他们是否已经有协议，然后再自动添加。

# javascript - 对象值未定义

> ID：14616122
> 
> 赞同：2
> 
> 时间：2013-01-30T23:56:07.957
> 
> 标签：javascript, node.js, object, scope, express

我无法以以后可以调用它们的方式定义值。

如果我先定义 Search，则 Search.commands[3] 未定义。如果我先定义 commandList，则 commandList.commands[0] 未定义。

有没有更好的方法来定义这些对象，以便顺序无关紧要？

```
var Search = {
    'str': 'search',
    'param': 'search',
    'action': '',
    'commands': [
        Category,
        Location,
        Sort,
        commandList
    ]
}

var commandList = {
'commands': [
    Search,
    Category,
    Stop
]
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T00:01:14.777

```
var Search = {
    'str': 'search',
    'param': 'search',
    'action': ''
};
var commandList = {
    'commands': [
        Search,
        Category,
        Stop
    ]
};
Search.commands = [
    Category,
    Location,
    Sort,
    commandList
]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T23:59:53.687

你可以使用这样的东西：

```
var Search = {
    'str': 'search',
    'param': 'search',
    'action': ''
};

var commandList = {
};

Search.commands = [
        Category,
        Location,
        Sort,
        commandList
    ];

commandList.commands = [
    Search,
    Category,
    Stop
]; 
```

# c# - 从字符串数组中搜索字符串值，如果有条件则获取 sql 数据库并显示 gridview 否则显示错误

> ID：14616123
> 
> 赞同：0
> 
> 时间：2013-01-30T23:56:07.603
> 
> 标签：c#, asp.net, arrays

我尝试了几种方法来做到这一点，但由于某种原因，我无法正确实现 If 语句。

我正在尝试获取`SelectedItem.Text`from`Drop Down List`然后在数据库中搜索该行并将其存储在其中`DataSet`，然后将其显示在`GridView`. 但是，数据库有 19 个带有单词的固定列，因此如果用户在 if 语句中选择一个下拉列表，则`DataSet`应该显示在 a 上，`GridView`但如果在数据库中找不到数据，否则会弹出一条错误消息，显示“数据未找到”

我尝试将 19 固定`columns`在 an 中`Array`并使用以下内容进行物理输入：

```
protected void SearchProductButton_Click1(object sender, EventArgs e)
    {
        string Producttext = SearchProductDropDownList.SelectedItem.Text; 
        string[] Producttext2 = 
        {
            "Chem",
            "Drill",
            "Elect",
            "Products",
            "Environmental",
            "Instrument",
            "Lab",
            "Lift",
            "Tools",
            "Repair",
            "Pipes",
            "Portable",
            "Power",
            "Steel",
            "Testing",
            "Tooling",
            "Tubes",
            "Valves",
            "Systems",
            "Consumables",
        };
        using (var con = new SqlConnection("Data Source=localhost;Initial Catalog=ROG;Integrated Security=True"))
        using (var daProduct = new SqlDataAdapter("SELECT [Serial_No], [Material_No], [Product_Line], [Product_Description], [Size], [UOM], [Supplier_Price], [Price_Date], [Selling_Price] FROM [ProductDB] WHERE [Product_Line] = @Product_Line", con))
        {
            foreach (string x in Producttext2)
            {
                if (x.Contains(Producttext))                              
                {
                    daProduct.SelectCommand.Parameters.Add("@Product_Line", SqlDbType.VarChar, 50).Value = Producttext;
                    DataSet dsProduct = new DataSet();
                    daProduct.Fill(dsProduct, "Product_Line");
                    SearchProductGridView.DataSource = dsProduct;
                    SearchProductGridView.DataBind();                        
                }
                else
                {
                    MessageBox.Show("Data Not Found");
                }
            }

        }
    } 
```

在 SQL 数据中，我只有为`Chem`&填充的信息，所以所有其他的都应该显示一个错误，`Elect`但由于value` 没有清除并保持在第一个运行值，所以它最终会跳过，直到它遍历整个列表。`Foreach``x`

我在阅读了关于字符串到字符串数组的信息后修改了代码，然后检查`index`它是否`greater then -1`继续或`else`显示`error`.

这是代码：

```
 protected void SearchProductButton_Click1(object sender, EventArgs e)
    {
        string Producttext = SearchProductDropDownList.SelectedItem.Text; 
        string[] Productarray = new string[20]; 
        Productarray[0] = "Chem";
        Productarray[1] = "Drill";
        Productarray[2] = "Elect";
        Productarray[3] = "Products";
        Productarray[4] = "Environmental";
        Productarray[5] = "Instrument";
        Productarray[6] = "Lab";
        Productarray[7] = "Lift";
        Productarray[8] = "Tools";
        Productarray[9] = "Repair";
        Productarray[10] = "Pipes";
        Productarray[11] = "Portable";
        Productarray[12] = "Power";
        Productarray[13] = "Steel";
        Productarray[14] = "Testing";
        Productarray[15] = "Tooling";
        Productarray[16] = "Tubes";
        Productarray[17] = "Valves";
        Productarray[18] = "Systems";
        Productarray[19] = "Consumables";

        using (var con = new SqlConnection("Data Source=localhost;Initial Catalog=ROG;Integrated Security=True"))
        using (var daProduct = new SqlDataAdapter("SELECT [Serial_No], [Material_No], [Product_Line], [Product_Description], [Size], [UOM], [Supplier_Price], [Price_Date], [Selling_Price] FROM [ProductDB] WHERE [Product_Line] = @Product_Line", con))
        {
            //foreach (string x in Producttext2)
            //{
            int index1 = Array.IndexOf(Productarray, Producttext);
                if (index1 !=-1)                             
                {
                    daProduct.SelectCommand.Parameters.Add("@Product_Line", SqlDbType.VarChar, 50).Value = Producttext;
                    DataSet dsProduct = new DataSet();
                    daProduct.Fill(dsProduct, "Product_Line");
                    SearchProductGridView.DataSource = dsProduct;
                    SearchProductGridView.DataBind();                        

                }
                else
                {
                    MessageBox.Show("Data Not Found");
                }
            //}

        }
    } 
```

第二种方法的问题在于，无论我尝试什么，它都不会进入 else 语句。

**编辑：**

我决定以不同的方式来满足我的要求，而不是使用`Textbox`我已经排序为使用`ComboBox`from `AJAX ToolKit`。

这是**HTML**：

```
<ajaxToolkit:ComboBox ID="SearchMaterialComboBox" runat="server" 
        AutoCompleteMode="Append" AutoPostBack="false" CaseSensitive="false" 
        DataSourceID="ProductDBMaterialSqlDataSource" DataTextField="Material_No" 
        DataValueField="Material_No" DropDownStyle="DropDownList" Height="20px" 
        MaxLength="10" RenderMode="Block" style="display: inline-block;" Width="285px">
    </ajaxToolkit:ComboBox>**strong text** 
```

**代码**：

```
protected void SearchMaterialButton_Click(object sender, EventArgs e)
    {
        //long Materialtextbox = Convert.ToInt64(SearchMaterialComboBox.Text);
        string Materialstr = SearchMaterialComboBox.Text;
        using (var con = new SqlConnection("Data Source=localhost;Initial Catalog=ROG;Integrated Security=True"))
        using (var daMaterial = new SqlDataAdapter("SELECT [Serial_No], [Material_No], [Product_Line], [Product_Description], [Size], [UOM], [Supplier_Price], [Price_Date], [Selling_Price] FROM [ProductDB] WHERE [Material_No] = @Material_No", con))
        {
            if (Materialstr != "")
            {
                daMaterial.SelectCommand.Parameters.Add("@Material_No", SqlDbType.BigInt).Value = Materialstr;
                DataSet dsMaterial = new DataSet();
                daMaterial.Fill(dsMaterial, "Material_No");
                SearchProductGridView.DataSource = dsMaterial;
                SearchProductGridView.DataBind();
            }
            else
            {

            }

        }
    } 
```

我相信@Patashu 提到的最后一篇文章通过插入`HasRows`a `value`of有一个有效点`0`，如果不是，`0`则 continue 否则显示错误消息。但是，与传统方法相比，当前方法具有`AutoComplete`简洁的选项`TextBox`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:14:44.307

```
using System.Linq;

string match = Producttext2.FirstOrDefault((x) => x.Contains(Producttext));
if (match != null)
{
 // do stuff
}
else
{
 // error message
} 
```

Method from [http://msdn.microsoft.com/en-us/library/bb549039.aspx](http://msdn.microsoft.com/en-us/library/bb549039.aspx)

# ruby-on-rails - 使用 has many => 更新连接表属性

> ID：14616124
> 
> 赞同：0
> 
> 时间：2013-01-30T23:56:10.120
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我的控制器动作：

```
def updating_rating
    input = params[:recommendation_ratings].values

    input.each do |mini_params|
      rating_id = mini_params[:rating_id].to_i
      recommendation_id = mini_params[:recommendation_id].to_i
      puts rating_id
      puts recommendation_id
      rr = RecommendationRating.find_or_create_by_rating_id_and_recommendation_id(rating_id, recommendation_id)
      rr.update_attributes(:rating_id => rating_id, :recommendation_id => recommendation_id )
    end
   redirect_to :back, :flash => { :notice => "Rating Submitted." }
  end 
```

在我看来，我正在从 form_tag 传递参数。代码在创建新关系时按预期工作，但是如果您尝试更新值并重新提交表单，它会添加新评级，而不是更新现有评级。

因此，例如，如果您有一个评级为 1 的产品，并将评级更改为 2 并重新提交表单，该产品的评级将为 1 和 2。我应该如何更新现有评级，而不是添加额外的评级对产品进行评级。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:01:34.353

我假设 rating_id 是您要保存的实际评级。考虑到这个假设，

```
rr = RecommendationRating.find_or_create_by_rating_id_and_recommendation_id(rating_id, recommendation_id) 
```

将首先找到`RecommendationRating`具有`rating_id`新评级值的 a。如果找不到，它将创建一个。您可以通过找到`RecommendationRating`第一个并构建一个新的来解决这个问题，如果它不存在

```
rr   = RecommendationRating.find_by_recommendation_id(recommendation_id)
rr ||= RecommendationRating.new(recommendation_id: recommendation_id)

rr.rating_id = rating_id
rr.save 
```

如果你有关联，它会看起来更干净（我在`has_one`这里假设一个关系，因为我们只谈论 2 列）

```
reco = Recommendation.find recommendation_id
rr   = reco.recommendation_rating || reco.build_recommendation_rating

rr.rating_id = rating_id
rr.save 
```

# ruby-on-rails - 如何测试局部是否在 erb、rspec 和 capybara 中渲染图像？

> ID：14616126
> 
> 赞同：4
> 
> 时间：2013-01-30T23:56:36.640
> 
> 标签：ruby-on-rails, rspec, capybara

我开始使用 rspec、capybara 等，我想在 Rails 中做一些测试驱动的开发。

我正在使用的规范对页眉和页脚的外观有非常精确的定义，我认为这些是开始学习的好地方。

对于页脚，我想要以下规则：

如果用户已登录，则标题仅包含徽标图像。徽标图像应该是指向用户登录页面的链接，该链接由用户拥有的权限决定。如果用户未登录，则该图像不是链接，并且其他四个链接也应出现在页脚中的表格中。

在 erb 中对此进行编码实际上相当简单，但我正在尝试做正确的事情，并在这里进行一系列测试。我的问题是我似乎无法测试屏幕上是否显示图像。我已经阅读了 rspec 书，但我看不到它在哪里说“显示在资产目录中找到的这个图像”。

所以我的设置是，在views/layouts目录中，_header.html.erb _footer.html.erb _shim.html.erb application.html.erb

我认为我可以直接测试页脚部分，使用类似的东西：

```
require "spec_helper"

describe "rendering views/layouts/_footer.html.erb" do
  #from https://www.relishapp.com/rspec/rspec-rails/v/2-8/docs/view-specs/view-spec
  it "shows the logo" do
    render :template => "layouts/_footer.html.erb"
    rendered.should =~ "/images/mainlogo.png"
  end

describe "rendering views/layouts/_footer.html.erb as admin" do
  before do
    FactoryGirl.create(:admin_user)
  end 
  it "links to landing from the logo"
    render :template => "layouts/_footer.html.erb"
    rendered.should contain("link/to/admin/landing")
  end
end
#repeat landing tests for various user types 
```

然后，在其他页面中，我可以使用类似的东西简单地测试页脚本身的存在

```
 it should contain("footer") 
```

我的问题是，我什至无法检查图像是否已显示，更不用说图像是否与资产目录中的正确图像匹配。我应该在这里做什么？

上面用于测试图像是否存在的代码（只是第一个 describe/it 块，而不是带有 'as admin' 或 'should contains' 的东西）给了我以下警告和错误：

```
DEPRECATION WARNING: Passing a template handler in the template name is deprecated.

TypeError:
   type mismatch: String given 
```

第一个可能是由于我使用了我不理解的语法，但第二个似乎表明比较是字符串而不是资产。比较图像的语法是什么？有吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T07:53:46.767

您的类型不匹配错误是因为您传递的字符串`=~`是正则表达式匹配器。您可以将字符串更改为正则表达式，也可以`include`改用。我会选择`include`只是因为它更具可读性：

```
rendered.should include("/images/mainlogo.png") 
```

要摆脱弃用警告，只需`.erb`从模板名称中删除：

```
render :template => "layouts/_footer.html" 
```

# ruby-on-rails - 使用 Resque 大规模更新 Rails 中的许多记录？

> ID：14616127
> 
> 赞同：0
> 
> 时间：2013-01-30T23:56:37.813
> 
> 标签：ruby-on-rails, resque, rails-activerecord

如果我必须更新 50,000 个用户，我将如何以最适合后台处理库而不是 N+1 问题的方式进行？

我有用户、会员和积分。

会员资格与总分值有关。如果使用点值修改成员资格，我必须遍历所有用户以更新其正确的成员资格。这是我需要排队的，这样服务器就不会挂起 30 多分钟。

现在我有一个控制器动作

```
def update_memberberships
  User.find_each do |user|
    user.update_membership_level! # looks for a Membership defined by x points and assigns it to user. Then Saves the user.
  end
end 
```

这是一个非常昂贵的操作。我将如何优化处理和后台，以使帖子在表单中几乎是瞬时的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:07:10.950

你正在寻找[`update_all`](http://apidock.com/rails/ActiveRecord/Relation/update_all). 从文档：

如果它们与提供的一组条件匹配，则使用给定的详细信息更新所有记录，也可以提供限制和顺序。

在 SQL 方面可能还需要一段时间，但您至少可以使用一条语句来完成。[查看文档](http://apidock.com/rails/ActiveRecord/Relation/update_all)以查看使用示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T00:10:08.007

您似乎在寻找如何使用 Resque 或延迟工作来完成这项工作。我将举一个delayed_job的例子。

要创建作业，请向 app/models/user.rb 添加一个方法：

```
def self.process_x_update
  User.where("z = 1").find_each(:batch_size => 5000) do |user|
    user.x = user.y + 3
    user.save
  end
end
handle_asynchronously :process_x_update 
```

这将更新`User`z = 1 的所有记录，设置 user.x = user.y + 3。这将以 5,000 个批次完成，因此性能更加线性。

这将导致 User.process_x_update 很快完成。要实际处理作业，您应该`rake jobs:work`在后台运行或启动一个守护进程集群`./script/delayed_job start`

另一件事：你能把这个逻辑转移到一个 SQL 语句中吗？这样，您就可以拥有一个快速且原子的语句。您仍然希望在后台执行此操作，因为它可能需要一些时间来处理。您可以执行以下操作：

```
def process_x_update
  User.where("z = 1").update_all("x = y + 3")
end
handle_asynchronously :process_x_update 
```

# c++ - 具有 Class 值的映射的构造函数

> ID：14616128
> 
> 赞同：1
> 
> 时间：2013-01-30T23:56:49.747
> 
> 标签：c++, class, map, vector, constructor

```
class RadioManager {

    typedef MtmMap<double, Stations*> RadioMap;
    typedef RadioMap::Pair RadioPair;
    typedef RadioMap::iterator RadioMapIter;

    RadioMap radio;
    std::vector<Song> all_songs;
    unsigned long radio_clock;

    int findSong(const string& author, const string& name);
    void checkTime();
    void updateCurrent();

public:

~RadioManager();

    RadioManager() :
            radio(new Stations()), all_songs(), radio_clock(0) {
    } 
```

Staions 是一个具有继承类的基类......

我在构造函数中遇到错误...有人可以帮我构建一个吗？请注意， Radio 是一张地图，其值为 class

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:03:31.053

`RadioMap`是[map](http://en.cppreference.com/w/cpp/container/map)，它不是指针，你不需要调用`new`来分配 Station，它们甚至不是同一类型。

[std::map](http://en.cppreference.com/w/cpp/container/map)（或[std::multimap](http://en.cppreference.com/w/cpp/container/multimap)）和[std::vector](http://en.cppreference.com/w/cpp/container/vector)具有默认构造函数，它们将在 RadioManager 中调用

尝试：

```
RadioManager() 
: radio(radio_clock(0)) 
{
} 
```

最好在 STL 容器中使用智能指针而不是原始指针，智能指针会自动为您释放内存。

```
typedef MtmMap<double, std::unique_ptr<Stations>> RadioMap; 
```

# asp.net-mvc - 无法通过淘汰赛获得 json 对象

> ID：14616138
> 
> 赞同：1
> 
> 时间：2013-01-30T23:58:18.383
> 
> 标签：asp.net-mvc, json, jquery, knockout.js

我无法获取 json 对象。

我的对象是：

```
public class Person
{
   public string firstName { get; set; }
   public string lastName { get; set; }        
} 
```

人员控制：

```
 public ActionResult Index()
    {
        return View();
    }

    // GET: /Persons/GetPerson
    //[AcceptVerbs(HttpVerbs.Get)]
    //[OutputCache(Duration = 0, VaryByParam = "*")]
    public JsonResult GetPerson()
    {
        Person p = new Person { firstName = "Jonas", lastName = "Antanaitis" };
        return Json(p, JsonRequestBehavior.AllowGet);
    } 
```

我的索引视图：

```
@Scripts.Render("~/bundles/knockout")

<p>First name: <strong data-bind="text: firstName"></strong></p>
<p>Last name: <strong data-bind="text: lastName"></strong></p>

<div id="dispJson"></div>
<script type="text/javascript">                
    var data = $.getJSON(".../GetPerson", function (result) {
        //state = result.readyState;
        firstName: result.firsName;
        lastName: result.lastName;
    })    
    .error(function () { alert("error"); });    

    function viewModel() {
        ko.mapping.fromJS(data);
        //state = data.readyState;
        //firstName = data.firstName;
        //lastName = data.lastName;
    };    
    document.write(JSON.stringify(data)); //this line prints  "{"readyState":1}"

    ko.applyBindings(new viewModel());    
</script> 
```

当我在浏览器中转到“.../GetPerson”时，会显示： **{"firstName":"Jonas","lastName":"Antanaitis"}**

，但是当尝试在视图中获取数据巫婆 javascript - 我没有得到这些数据。

**我做错了什么，为什么我无法获取数据？** 注释代码的地方-我尝试了这种方法..但没有任何帮助。

我试过：

```
*$.ajax({
    type: "GET",
    cache: false,
    url: ".../GetPerson",        
}).done(function (msg) {
    alert("Data Saved: " + msg.readyState + "  " + msg.firstName + "  " + msg.lastName);
});* 
```

然后警报框显示：“ *Data Saved: undefined Jonas Antanaitis* ”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T07:29:53.473

您正在将异步代码与同步代码混合...您在此处有此行

```
var data = $.getJSON(".../GetPerson", function (result) { 
```

`data`实际上将是一个承诺（这是 ajax 返回的）。在回调执行之前，您实际上并没有数据 - 即结果是具有 ACTUAL 数据的东西。

您需要将绑定移动到回调内部或使用事后设置的可观察对象：

1）在回调示例中

```
<script type="text/javascript">                
    $.getJSON(".../GetPerson", function (result) {

        function viewModel() {
            return ko.mapping.fromJS(result);
        };

        ko.applyBindings(new viewModel());
    })    
    .error(function () { alert("error"); });        
</script> 
```

2）使用可观察的

```
<script>
    function viewModel() {
        return { data: ko.observable() };
    };

    // Your html bindings will bind to data.* instead of just *
    ko.applyBindings(new viewModel());

    $.getJSON(".../GetPerson", function (result) {
        data(ko.mapping.fromJS(result));
    })    
    .error(function () { alert("error"); });      
</script> 
```

以及相应的 html（with 绑定使它比 if 更简洁）：

```
<!-- ko with: data -->
<p>First name: <strong data-bind="text: firstName"></strong></p>
<p>Last name: <strong data-bind="text: lastName"></strong></p>
<!-- /ko --> 
```

第二种方法的优点是您可以快速绑定所有内容......然后可以显示您的数据。

# ruby-on-rails - 资源暂时不可用(Timeout::Error) 黄瓜只在jenkins上访问

> ID：14616139
> 
> 赞同：1
> 
> 时间：2013-01-30T23:58:21.533
> 
> 标签：ruby-on-rails, ruby, cucumber

在 ubuntu / jenkins 上调用访问 some_path 始终失败`Resource temporarily unavailable (Timeout::Error)`，但在 mac 上始终通过本地。尝试了我能在网上找到的每一个建议......没有运气。有人遇到过这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:36:06.057

这是唯一有效的方法。我试过周围的钩子......什么都没有。米老鼠...

```
 def short_bus_visit( url )
    10.times do |i| 
      begin
        visit url 
        break
      rescue Exception
        next
      end 
    end 
  end 
```

# java - byte[] 中的数组索引有些问题

> ID：14616142
> 
> 赞同：0
> 
> 时间：2013-01-30T23:58:39.920
> 
> 标签：java

我有这样的字符串

```
String text = "f001050000000000003d61c1c1df400200c0000009181600ef014000003f20" 
```

我将其转换为字节以将其作为字节循环

```
byte[] bytes = new BigInteger(text,16).toByteArray();        
    for (int i = 0; i < bytes.length; i++) 
    {            
        System.out.print(String.format("%02x ", bytes[i]));
    } 
```

但是当我打印数组值时，它会`00`在实际字符串的开头添加字节！它应该以开头，`f0`但它以`00`!

当我开始索引时，`1`这个`00`消失了。这`00`是从哪里来的！？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T00:04:04.127

[BigInteger#toByteArray() 的 JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html#toByteArray%28%29)状态：

> 返回包含此 BigInteger的**二进制补码表示的字节数组。**字节数组将采用大端字节序：最高有效字节位于第零个元素中。该数组将包含表示此 BigInteger 所需的最小字节数，包括至少一个符号位，即`(ceil((this.bitLength() + 1)/8))`.[...]

由于您有一个正数，因此二进制补码中的第一位将为零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T05:35:06.823

我认为 BigInteger 不适合这项任务。你需要自己解析你的文本，这并不难

```
 byte[] bytes = new byte[text.length() / 2];
    for (int i = 0; i < bytes.length; i++) {
        bytes[i] = (byte) ((Character.digit(text.charAt(i * 2), 16) << 4) + Character.digit(text.charAt(i * 2 + 1), 16));
    } 
```

并不是说它也正确转换了“0000f0 ...”，而是BigInteger会截断前导零（标准化），因为对于BigInteger来说它只是一个数字

# assembly - 使用 AVR-GCC 的 switch 语句的汇编代码

> ID：14616144
> 
> 赞同：0
> 
> 时间：2013-01-30T23:59:05.467
> 
> 标签：assembly, switch-statement, avr, avr-gcc

嘿，我无法理解编译器为以下 switch statemet 省略的汇编代码。它与我从使用 gcc 等时看到的通常的汇编代码不同。

```
switch(instr) { 
case OP_NOP: 
    break;

case OP_BIPUSH: 
    stack_push(arg0.z.bh); pc_inc = 2; break;
} 
```

上述 C 代码的汇编代码：

```
switch(instr){ 
+00001482: 8529 LDD R18,Y+9 Load indirect with displacement 
+00001483: 2F82 MOV R24,R18 Copy register 
+00001484: E090 LDI R25,0x00 Load immediate 
+00001485: 01FC MOVW R30,R24 Copy register pair 
+00001486: 9732 SBIW R30,0x02 Subtract immediate from word 
+00001487: 3BED CPI R30,0xBD Compare with immediate 
+00001488: 05F1 CPC R31,R1 Compare with carry 
+00001489: F008 BRCS PC+0x02 Branch if carry set 
+0000148A: C39D RJMP PC+0x039E Relative jump 
+0000148B: 57E0 SUBI R30,0x70 Subtract immediate 
+0000148C: 4FFF SBCI R31,0xFF Subtract immediate with carry 
+0000148D: 0FEE LSL R30 Logical Shift Left 
+0000148E: 1FFF ROL R31 Rotate Left Through Carry 
+0000148F: 9005 LPM R0,Z+ Load program memory and postincrement 
+00001490: 91F4 LPM R31,Z Load program memory 
+00001491: 2DE0 MOV R30,R0 Copy register 
+00001492: 9409 IJMP Indirect jump to (Z) 
2003: stack_push(arg0.z.bh); pc_inc = 2; 
+00001493: 2D85 MOV R24,R5 Copy register 
+00001494: 2799 CLR R25 Clear Register 
+00001495: FD87 SBRC R24,7 Skip if bit in register cleared 
+00001496: 9590 LAT R25 Load and Toggle 
+00001497: C338 RJMP PC+0x0339 Relative jump 
```

我假设代码以防万一：NOP 正在被编译器优化掉。

但我只是了解代码如何为案例设置查找表？

任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:32:18.273

在您的示例中只有一种情况需要检查，因此它只检查是否`instr`等于`OP_BIPUSH`。如果是，则跳到前面做剩下的，否则从函数调用中返回。

在调用开始时，Y 寄存器（实际上是两个通用寄存器，我忘记了）指向堆栈的顶部。该参数`instr`位于堆栈下方的 9 个点，并被加载到 r24。r25 为 0，因此该对包含 的值`instr`。

我们只需要针对一件事进行测试，因此减去 2 并与 进行比较`0xBD`。（r1 是零寄存器。它总是包含 0。）

如果结果相等，则跳过下一条指令并继续执行其余指令。如果它们不相等，则执行下一条指令，该指令从函数调用返回并跳转。

# c - 为什么分配单个字节时地址不连续？

> ID：14616145
> 
> 赞同：4
> 
> 时间：2013-01-30T23:59:09.520
> 
> 标签：c, unix, alignment, malloc

我动态分配内存如下：

```
char* heap_start1 = (char*) malloc(1);
char* heap_start2 = (char*) malloc(1); 
```

当我按如下方式执行 printf 时，地址不是连续的。

```
printf("%p, %p \n",heap_start1,heap_start2); 
```

结果：

```
 0x8246008, 0x8246018 
```

如您所见，有 15 字节的额外内存被碎片整理。这绝对不是因为单词对齐。这种奇特的排列背后有什么想法吗？

提前致谢！

如果这很重要，我在 linux 中使用 gcc。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T00:16:34.713

glibc`malloc`对于小于 16 字节的小内存分配，只是将内存分配为 16 字节。这是为了防止在释放此内存时出现外部碎片，其中空闲内存块太小而无法在一般情况下用于完成新`malloc`操作。

分配的块`malloc`也必须足够大，以便在存储空闲块的数据结构中存储跟踪它所需的数据。

这种行为虽然增加了内部碎片，但减少了整个系统的整体碎片。

**资料来源：** [http](http://repo.or.cz/w/glibc.git/blob/HEAD:/malloc/malloc.c) ://repo.or.cz/w/glibc.git/blob/HEAD:/malloc/malloc.c （特别是阅读第 108 行）

```
/*
...
Minimum allocated size: 4-byte ptrs:  16 bytes    (including 4 overhead)
...
*/ 
```

此外，`malloc`glibc 中调用返回的所有地址都与：`2 * sizeof(size_t)`字节对齐。对于 32 位系统（例如您的系统）是 64 位，对于 64 位系统是 128 位。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T00:02:36.727

至少三个可能的原因：

*   `malloc`需要为所有原始类型生成适当对齐的内存。 ~~SSE 指令的数据需要 128 位对齐。（目前我还没有想到您的平台支持的其他 128 位原始类型。）~~

*   一个典型的实现`malloc`涉及“过度分配”，以便快速存储簿记信息`free`。不确定Linux上的GCC是否这样做。

*   它可能正在分配[*保护字节*](http://en.wikipedia.org/wiki/Guard_byte)以允许检测缓冲区溢出等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T00:04:54.590

如果你想分配连续的地址，你应该在同一个 malloc 上分配它们

```
char *heap_start1, *heap_start2;
heap_start1 = (char*) malloc(2 * sizeof(char));
heap_start2 = heap_start1 + 1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T00:13:49.487

`malloc`保证返回的内存对于任何基本类型都正确对齐。此外，内存块可以填充一些保护字节以检查内存损坏，这取决于设置。

# java - java jpa：列表和子列表

> ID：14616146
> 
> 赞同：2
> 
> 时间：2013-01-30T23:59:17.927
> 
> 标签：java, sql, database, hibernate, jpa

我有一个使用 JPA 持久化的 java 对象。这个对象有一个成员'friendsList'，它是一个字符串列表。我在这个对象上使用了@CollectionOfElements 休眠注释。这样做的结果是我有两个表，一个持久化我的对象，另一个持久化每个对象的列表。

如何检索（使用 jpa）列表包含 'hello' 或 'world' 的所有对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:19:09.787

以下工作正常：它还将创建一个`Parent_names`用于维护关系的表。**不要使用 @OneToMany 进行注释**

```
@ElementCollection(targetClass = String.class)
    private List<String> names; 
```

或者我认为您可以尝试一种解决方法：将字符串包装在一个类中。

```
class FriendsName{
private String name;
//getter setter
} 
```

然后，

```
class Parent{
@OneToMany
List<FriendsName> friendsName;
} 
```

你可以像这样做JPQL：

```
select p from Parent p where p.friendsName.name in ('hello','world') 
```

# javascript - Javascript（客户端）：数据库查询和数据处理

> ID：14616147
> 
> 赞同：0
> 
> 时间：2013-01-30T23:59:37.707
> 
> 标签：javascript

我已经构建了一个 Web 应用程序，它接受来自客户端的 Member_ID # (javascript)。Member_ID 在我的 javascript 中存储为 var……现在我需要用它进行查询……首先查询以获取成员信息（名称），然后连接表以收集该成员符合条件的健康计划的信息……等等。

据我所知，这个概念是……向服务器发送异步请求并等待响应，一旦收到响应，将其存储并解析以提取有用信息。

最终目标是使用“有用的”信息来使用 HTML5 Canvas 绘制图形。

我需要一些关于如何进行查询的指导？因为当我阅读这个论坛时，建议客户端查询“不好”，原因有很多。

由于我的大部分工作都发生在客户端...... C# asp.net 中的一些事情......我该如何进行？

同样重要的是要注意 Web 应用程序应该可以通过 Internet 访问。在本地网络之外。

**使用 AJAX 扩展工具包从客户端调用 Web 服务有意义吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:14:30.813

您必须在服务器端处理它。将 ajax 请求视为简单的 POST 或 GET，格式为`?member_id=123&time=321`指向您的处理程序文件。

在您的处理程序文件中，您可以从请求变量构造查询，执行它，并通过以 JSON 或 XML 格式打印到屏幕来给出响应。

看看这里：

> [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)
> 
> [http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

# c++ - 如何在 C++ 中声明多维数组？

> ID：14616154
> 
> 赞同：-4
> 
> 时间：2013-01-31T00:00:22.763
> 
> 标签：c++

以下是 C# 中多维数组声明的示例：

```
var Number = new double[2, 3, 5]
    {
        {
             {  12.44, 525.38,  -6.28,  2448.32, 632.04 },
             {-378.05,  48.14, 634.18,   762.48,  83.02 },
             {  64.92,  -7.44,  86.74,  -534.60, 386.73 }
        },
        {
             {  48.02, 120.44,   38.62,  526.82, 1704.62 },
             {  56.85, 105.48,  363.31,  172.62,  128.48 },
             {  906.68, 47.12, -166.07, 4444.26,  408.62 }
        },
    }; 
```

我想在 C++ 中做同样的事情，但不知道怎么做，也没有读过[我的 C++ 书](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:03:06.790

这是一种不明确指定界限的幼稚方法：

```
vector<vector<vector<double>>> v =
{
    {
        {  12.44, 525.38,  -6.28,  2448.32, 632.04 },
        {-378.05,  48.14, 634.18,   762.48,  83.02 },
        {  64.92,  -7.44,  86.74,  -534.60, 386.73 }
    },
    {
        {  48.02, 120.44,   38.62,  526.82, 1704.62 },
        {  56.85, 105.48,  363.31,  172.62,  128.48 },
        {  906.68, 47.12, -166.07, 4444.26,  408.62 }
    },
}; 
```

但是，向量的向量将允许您将元素*自由地*推入每个维度（它们只是独立的向量），因此您最终可能没有一致的多维向量。特别是，编译器不会检测到将更多或更少元素放入一个维度而不是另一个维度的任何尝试。

如果这是一个问题，您可能需要检查**[Boost.MultiArray](http://www.boost.org/doc/libs/1_52_0/libs/multi_array/doc/index.html)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T02:03:10.160

您不需要标准库或 Boost 来定义和初始化固定大小的多维数组。

```
double Number[2][3][5] =
    {   
        {   
             {  12.44, 525.38,  -6.28,  2448.32, 632.04 },
             {-378.05,  48.14, 634.18,   762.48,  83.02 },
             {  64.92,  -7.44,  86.74,  -534.60, 386.73 }
        },  
        {   
             {  48.02, 120.44,   38.62,  526.82, 1704.62 },
             {  56.85, 105.48,  363.31,  172.62,  128.48 },
             {  906.68, 47.12, -166.07, 4444.26,  408.62 }
        },  
    }; 
```

# android - 用户可以在 iphone 或 android 的 html 5 应用程序中看到 js 调用的来源吗？

> ID：14616158
> 
> 赞同：3
> 
> 时间：2013-01-31T00:00:32.263
> 
> 标签：android, ios, html

如果我为调用需要用户名/密码的 web 服务的电话（使用 phonegap 或 Icenium）创建一个 html 5 应用程序，人们可以以某种方式查看代码，还是 JavaScript 被编译掉或以某种方式被阻止？在这种情况下，假设 url 位于带有用户名和密码的 javascript 文件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T21:03:03.933

Phonegap 和 Icenium（均基于 Apache Cordova）都不会混淆或编译应用程序的 JavaScript 代码。

您可以使用任何适用于 iOS 或 Android 的 Cordova 应用程序，只需解压缩 .ipa 或 .apk 包即可显示为应用程序提供支持的 HTML、CSS 和 JavaScript 代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T00:03:44.000

如果它是普通用户，那么很可能不是。
但是，如果您问这个问题是因为您想防止技术熟练的人需要查看您的应用程序以获取代码。那么答案是：
**在您的客户端设备中没有什么是安全的。**不是 sqlite 数据库，不是内置存储，也不是源代码（无论是否编译）；

# java - 如何获得第 n 个随机“nextInt”值？

> ID：14616163
> 
> 赞同：4
> 
> 时间：2013-01-31T00:00:58.270
> 
> 标签：java, random

使用类 java.util.Random 时，如何获得通过调用方法 nextInt() N 次获得的值，但以更有效的方式（特别是在 O(1) 中）？

例如，如果我构造一个带有特定种子值的 Random 对象，我想快速获取第 100,000 个“nextInt() 值”（即调用 nextInt() 方法 100,000 次后得到的值） ，我能做到吗？

为简单起见，假设 JDK 版本为 1.7.06，因为可能需要知道 Random 类中某些私有字段的确切值。说起来，我发现以下字段与随机值的计算相关：

```
private static final long multiplier = 0x5DEECE66DL;
private static final long addend = 0xBL;
private static final long mask = (1L << 48) - 1; 
```

在对随机性进行了一些探索之后，我发现随机值是使用*Linear congruential generator*获得的。执行算法的实际方法是方法 next(int)：

```
protected int next(int bits) {
    long oldseed, nextseed;
    AtomicLong seed = this.seed;
    do {
        oldseed = seed.get();
        nextseed = (oldseed * multiplier + addend) & mask;
    } while (!seed.compareAndSet(oldseed, nextseed));
    return (int)(nextseed >>> (48 - bits));
} 
```

该算法的相关行是获得下一个种子值的行：

```
nextseed = (oldseed * multiplier + addend) & mask; 
```

那么，更具体地说，有没有一种方法可以推广这个公式来获得“nth nextseed”值？我在这里假设，在有了它之后，我可以通过让变量“bits”为 32 来简单地获得第 n 个 int 值（方法 nextInt() 只需调用 next(32) 并返回结果）。

提前致谢

PS：也许这是一个更适合[mathexchange](https://math.stackexchange.com/)的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T00:23:23.423

你可以`O(log N)`及时完成。从 开始`s(0)`，如果我们暂时忽略模数 (2 ^(48) )，我们可以看到（使用`m`and`a`作为`multiplier`and的简写`addend`）

```
s(1) = s(0) * m + a
s(2) = s(1) * m + a = s(0) * m² + (m + 1) * a
s(3) = s(2) * m + a = s(0) * m³ + (m² + m + 1) * a
...
s(N) = s(0) * m^N + (m^(N-1) + ... + m + 1) * a 
```

现在，可以通过重复平方的模幂运算`m^N (mod 2^48)`轻松地逐步计算。`O(log N)`

另一部分稍微复杂一些。暂时再次忽略模数，几何和为

```
(m^N - 1) / (m - 1) 
```

使计算这个模数`2^48`有点不重要的是它`m - 1`与模数不是互质的。然而，由于

```
m = 0x5DEECE66DL 
```

的最大公约数`m-1`和 模数是 4，并且`(m-1)/4`具有模逆`inv`模`2^48`。让

```
c = (m^N - 1) (mod 4*2^48) 
```

然后

```
(c / 4) * inv ≡ (m^N - 1) / (m - 1) (mod 2^48) 
```

所以

*   计算`M ≡ m^N (mod 2^50)`
*   计算`inv`

获得

```
s(N) ≡ s(0)*M + ((M - 1)/4)*inv*a (mod 2^48) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T02:51:45.747

我已经接受了 Daniel Fischer 的答案，因为它是正确的并给出了一般的解决方案。使用 Daniel 的回答，这里是一个带有 java 代码的具体示例，它显示了公式的基本实现（我广泛使用了 BigInteger 类，因此它可能不是最佳的，但我证实了实际调用方法 nextInt( ）N次）：

```
import java.math.BigInteger;
import java.util.Random;

public class RandomNthNextInt {

    // copied from java.util.Random =========================
    private static final long   multiplier  = 0x5DEECE66DL;
    private static final long   addend      = 0xBL;
    private static final long   mask        = (1L << 48) - 1;

    private static long initialScramble(long seed) {

        return (seed ^ multiplier) & mask;
    }

    private static int getNextInt(long nextSeed) {

        return (int)(nextSeed >>> (48 - 32));
    }
    // ======================================================

    private static final BigInteger mod = BigInteger.valueOf(mask + 1L);
    private static final BigInteger inv = BigInteger.valueOf((multiplier - 1L) / 4L).modInverse(mod);

    /**
     * Returns the value obtained after calling the method {@link Random#nextInt()} {@code n} times from a
     * {@link Random} object initialized with the {@code seed} value.
     * <p>
     * This method does not actually create any {@code Random} instance, instead it applies a direct formula which
     * calculates the expected value in a more efficient way (close to O(log N)).
     * 
     * @param seed
     *            The initial seed value of the supposed {@code Random} object
     * @param n
     *            The index (starting at 1) of the "nextInt() value"
     * @return the nth "nextInt() value" of a {@code Random} object initialized with the given seed value
     * @throws IllegalArgumentException
     *             If {@code n} is not positive
     */
    public static long getNthNextInt(long seed, long n) {

        if (n < 1L) {
            throw new IllegalArgumentException("n must be positive");
        }

        final BigInteger seedZero = BigInteger.valueOf(initialScramble(seed));
        final BigInteger nthSeed = calculateNthSeed(seedZero, n);

        return getNextInt(nthSeed.longValue());
    }

    private static BigInteger calculateNthSeed(BigInteger seed0, long n) {

        final BigInteger largeM = calculateLargeM(n);
        final BigInteger largeMmin1div4 = largeM.subtract(BigInteger.ONE).divide(BigInteger.valueOf(4L));

        return seed0.multiply(largeM).add(largeMmin1div4.multiply(inv).multiply(BigInteger.valueOf(addend))).mod(mod);
    }

    private static BigInteger calculateLargeM(long n) {

        return BigInteger.valueOf(multiplier).modPow(BigInteger.valueOf(n), BigInteger.valueOf(1L << 50));
    }

    // =========================== Testing stuff ======================================

    public static void main(String[] args) {

        final long n = 100000L; // change this to test other values
        final long seed = 1L; // change this to test other values

        System.out.println(n + "th nextInt (formula) = " + getNthNextInt(seed, n));
        System.out.println(n + "th nextInt (slow)    = " + getNthNextIntSlow(seed, n));
    }

    private static int getNthNextIntSlow(long seed, long n) {

        if (n < 1L) {
            throw new IllegalArgumentException("n must be positive");
        }

        final Random rand = new Random(seed);
        for (long eL = 0; eL < (n - 1); eL++) {
            rand.nextInt();
        }
        return rand.nextInt();
    }
} 
```

注意：注意方法 initialScramble(long)，它用于获取第一个种子值。这是使用特定种子初始化实例时类 Random 的行为。

# css - IE 8 不透明度影响所有子元素

> ID：14616164
> 
> 赞同：0
> 
> 时间：2013-01-31T00:01:01.893
> 
> 标签：css, internet-explorer, internet-explorer-8, opacity

我有一个要设置不透明度的 div。我有以下CSS：

```
background: rgb(255, 255, 255); /* Fall-back for browsers that don't support rgba */
background: rgba(255, 255, 255, .7);
filter: alpha(opacity=70); /* IE 7 and Earlier */
/* Next 2 lines IE8 */
-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=70)";
filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=70); 
```

在兼容的浏览器中可以正常工作，但在 IE 8 中，这也会使带有 div 的子元素变得透明。

我知道这个问题与这个问题密切相关，[但](https://stackoverflow.com/questions/5662178/opacity-of-divs-background-without-affecting-contained-element-in-ie-8)那里的答案对我不起作用。

有人有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:09:51.090

IE8 不支持 RGBa，MS 过滤器不透明度会影响元素及其子元素。

[来自http://css-tricks.com/rgba-browser-support/](http://css-tricks.com/rgba-browser-support/)的建议修复

```
<!--[if IE]>

   <style type="text/css">

   .color-block { 
       background:transparent;
       filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#50990000,endColorstr=#50990000); 
       zoom: 1;
    } 

    </style>

<![endif]--> 
```

**或（使用条件类）**

```
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

   .ie8.your-selector { 
       background:transparent;
       filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#50990000,endColorstr=#50990000); 
       zoom: 1;
    } 
```

**或者**

解决此问题的另一种方法是使用 1px x 1px 透明 png 重复作为元素的背景图像。

# php - 函数 file_get_contents 并不总是有效

> ID：14616167
> 
> 赞同：0
> 
> 时间：2013-01-31T00:01:06.960
> 
> 标签：php

出于某种原因，如果我尝试在下面下载此图片，则会收到此错误。每 2 个图像中的 1 个都返回此错误.. 任何指针？

```
Warning: file_get_contents(http://www.ndcontent.com/rk/mikesapartment/faces/marica.jpg ) [function.file-get-contents]: failed to open stream: HTTP request failed! HTTP/1.1 404 Not Found in C:\xampp\htdocs\tgp\index.php on line 22 
```

我使用的代码是：（$rand 是 16 位整数。每次下载都会更改）

```
file_put_contents('img/'.$rand.'.jpg', file_get_contents($img_url)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:23:27.597

看起来您的网址以空格结尾

```
(http://www.ndcontent.com/rk/mikesapartment/faces/marica.jpg )
                                                            ^ 
```

这会导致 404 Not Found 错误。

解决方法：[`trim`](http://php.net/trim)先URL

# java - 另一个对泛型感到困惑的可怜人......如何在这段代码中添加静态 .start() 方法？

> ID：14616172
> 
> 赞同：0
> 
> 时间：2013-01-31T00:01:24.820
> 
> 标签：java, generics

是的，泛型是一个反复出现的主题，这里又来了……

目前，我有这个代码。`Processor`是一个“简单”的通用接口。

```
public final class ProcessorChain<IN extends MessageProvider, OUT extends MessageProvider>
    implements Processor<IN, OUT>
{
    /**
     * The resulting processor
     */
    private final Processor<IN, OUT> p;

    /**
     * Start a processing chain with a single processor
     *
     * @param p the processor
     * @param <X> the input type
     * @param <Y> the output type
     * @return a single element processing chain
     */
    public static <X extends MessageProvider, Y extends MessageProvider>
        ProcessorChain<X, Y> startWith(final Processor<X, Y> p)
    {
        return new ProcessorChain<X, Y>(p);
    }

    /**
     * Private constructor
     *
     * @param p the processor
     */
    private ProcessorChain(final Processor<IN, OUT> p)
    {
        this.p = p;
    }

    /**
     * Add an existing processor to that chain
     *
     * <p>Note that this returns a <b>new</b> chain.</p>
     *
     * @param p2 the processor to add
     * @param <NEWOUT> the return type for that new processor
     * @return a new chain consisting of the previous chain with the new
     * processor appended
     */
    public <NEWOUT extends MessageProvider> ProcessorChain<IN, NEWOUT>
        chainWith(final Processor<OUT, NEWOUT> p2)
    {
        return new ProcessorChain<IN, NEWOUT>(merge(p, p2));
    }

    public Processor<IN, OUT> end()
    {
        return this;
    }

    @Override
    public OUT process(final ProcessingReport report, final IN input)
        throws ProcessingException
    {
        return p.process(report, input);
    }

    /**
     * Merge two processors
     *
     * @param p1 the first processor
     * @param p2 the second processor
     * @param <X> the input type of {@code p1}
     * @param <Y> the output type of {@code p1} and input type of {@code p2}
     * @param <Z> the output type of {@code p2}
     * @return a processor resulting of applying {@code p2} to the output of
     * {@code p1}
     */
    private static <X extends MessageProvider, Y extends MessageProvider, Z extends MessageProvider>
        Processor<X, Z> merge(final Processor<X, Y> p1, final Processor<Y, Z> p2)
    {
        return new Processor<X, Z>()
        {
            @Override
            public Z process(final ProcessingReport report, final X input)
                throws ProcessingException
            {
                return p2.process(report, p1.process(report, input));
            }
        };
    }
} 
```

所以，目前，我可以写：

```
// p1 does <X, Y>, p2 does <Y, Z>, p3 does <Z, T>
Processor<X, T> p = ProcessingChain.startWith(p1).chainWith(p2).chainWith(p3).end(); 
```

它有效。事实上，我对泛型的研究从未如此深入。

我希望能够写的是：

```
Processor<X, T> p = ProcessingChain.start().add(p1).add(p2).add(p3).end(); 
```

我一直在努力尝试做到这一点，但失败了。

我希望能够做到这一点的一个原因也是，在未来，能够写：

```
Processor<X, T> p = ProcessingChain.start().add(p1).stopOnError().etc().etc() 
```

而且我觉得如果我知道怎么做`.start()`，那么“实用”处理器就不会成为问题。

那么，该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:18:30.983

裸启动方法无法推断生成的 ProcessorChain 必须是的类型。此外，正如@PaulBellora 指出的那样，您所勾画的 start() 方法本身不能是处理器，因为它没有足够的信息。

您可以使用一个单独的类作为 start() 方法的结果，尽管它不能是无参数的。例如：

```
public class ProcessorChainFactory<M extends MessageProvider> {

    public static <X extends MessageProvider> ProcessorChainFactory<X> start() {
        return null;
    }

    public static <X extends MessageProvider> ProcessorChainFactory<X> start(Class<X> clazz) {
        return null;
    }

    public <X extends MessageProvider> ProcessorChain<M, X> add(Processor<M, X> processor) {
        // TODO Auto-generated method stub
        return null;
    }        
} 
```

然后可以通过几种方式调用它：

```
 Processor<MessageProvider1, Final> processor = ...;

    ProcessorChain<MessageProvider1, Final> processor1 = ProcessorChainFactory.<MessageProvider1> start().add(processor);
    ProcessorChain<MessageProvider1, Final> processor2 = ProcessorChainFactory.start(MessageProvider1.class).add(processor); 
```

我的感觉是，这不会让你比你的当前更进一步`ProcessingChain.startWith(p1)`，但也许它会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T01:06:50.333

无参数`start`方法应该返回什么？这是问题的症结所在，尽管您只是在问题中提到了它。

请注意，您已声明`ProcessorChain`为实现`Processor`- 因此任何实例都`ProcessorChain`必须像一个实例一样。出于这个原因，创建一个没有包装的`ProcessorChain`实例是没有意义的。`Processor`

一般来说，我会说构建器不应该实现它所构建的接口，但是在写完之后我认为我至少会对看到相反的论点感兴趣。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T01:15:24.773

好吧，好吧，有一种方法虽然有点骇人听闻：

```
public static <X extends MessageProvider> ProcessorChain<X, X> start()
{
    final Processor<X, X> p = new Processor<X, X>()
    {
        @Override
        public X process(final ProcessingReport report, final X input)
            throws ProcessingException
        {
            return input;
        }
    };

    return new ProcessorChain<X, X>(p);
} 
```

但是，它不会完全起作用。使用 types `S`，`ValidationData`and `P`，`p1`doing`<S, ValidationData>`和`p2`doing `<ValidationData, P>`，写作：

```
ProcessorChain.start().chainWith(p1).chainWith(p2).end() 
```

导致此编译错误：

```
<NEWOUT>chainWith(Processor<MessageProvider,NEWOUT>) 
in ProcessorChain<MessageProvider,MessageProvider>
cannot be applied to
(Processor<S,ValidationData>) 
```

上面的代码是我的第一次尝试......

但如果我写：

```
ProcessorChain.<S>start().chainWith(p1).chainWith(p2).end() 
```

那么它的工作原理！

# php - 使用 PHP 将文本文件解析为变量

> ID：14616175
> 
> 赞同：1
> 
> 时间：2013-01-31T00:01:45.277
> 
> 标签：php, parsing, text

在将文本文件解析为 PHP 时需要一些帮助。该文件由 PHP 脚本生成，因此我无法控制内容格式。文本文件如下所示：

> 2013 年 7 月 4 日至 2013 年 7 月 4 日
> 苏格兰短裙中的最佳美腿
> 为了以一声巨响开始这个夏天，剧场与电影节的人们合作。
> kilt.jpg
> 1,1,0,
> *-*
> 
> 7/8/2013-7/23/2013
> Hot Legs
> 是的，伙计们，都是厚底鞋、休闲套装和疯狂的发型。
> hotstuff.jpg
> 1,1,0,
> *-*

我到目前为止的代码是：

```
$content = file_get_contents('DC_PictureCalendar/admin/database/cal2data.txt');

list($date, $showname, $summary, $image, $notneeded, $notneeded2) = explode("\n", $content);

echo 'Show Name' . $showname . '<br/>'; 
```

这只会让我获得第一个节目标题，我需要抓住所有这些。我确信 For 循环会做到这一点，但不确定如何根据文件的内容来做到这一点。我只需要第 2 行（显示标题）和第 4 行（图像）。有什么帮助吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:11:42.507

如果您无论如何要将整个文件读入一个数组，那么只需使用`file()`它将每行读入一个数组。

```
$content = file('DC_PictureCalendar/admin/database/cal2data.txt', FILE_IGNORE_NEW_LINES); 
```

然后，您可以像这样过滤所有不需要的行

```
$content = array_diff($content, array('1,1,0', '-')); 
```

然后，您可以分成每行 4 行的块（即每个条目一个项目）

```
$content_chunked = array_chunk($content, 4); 
```

这会给你一个像

```
Array(
    0 => Array(
        0 => '7/4/2013-7/4/2013',
        1 => 'Best Legs in a Kilt',
        2 => 'To start the summer off with a bang, the Playhouse has teamed up with the folks at The Festival.',
        3 => 'kilt.jpg'
    ),
    1 => Array(
        0 => '7/8/2013-7/23/2013',
        1 => 'Hot Legs',
        2 => 'Yes, folks, it's all platform shoes, leisure suits, and crazy hair-do's.',
        3 => 'hotstuff.jpg'
    ) ... etc.
) 
```

然后，我会将这个数组映射到一个有用的对象数组中，这些对象的属性名称对您来说是有意义的：

```
$items = array_map(function($array)) {
    $item = new StdClass;
    $item->date = $array[0];
    $item->showname = $array[1];
    $item->summary = $array[2];
    $item->image = $array[3];
    return $item;
}, $content_chunked); 
```

这会给你留下一个对象数组，比如：

```
Array(
    0 => stdClass(
        'date' => '7/4/2013-7/4/2013',
        'showname' => 'Best Legs in a Kilt',
        'summary'  => 'To start the summer off with a bang, the Playhouse has teamed up with the folks at The Festival.',
        'image' => 'kilt.jpg'
    ),
    1 => stdClass(
        'date' => '7/8/2013-7/23/2013',
        'showname' => 'Hot Legs',
        'summary' => 'Yes, folks, it's all platform shoes, leisure suits, and crazy hair-do's.',
        'image' => 'hotstuff.jpg'
    ) ... etc.
) 
```

# c++ - 如何在具有外部链接的命名空间范围内定义常量双精度值？

> ID：14616183
> 
> 赞同：5
> 
> 时间：2013-01-31T00:02:43.687
> 
> 标签：c++, c++11, constexpr

我正在尝试使用**外部链接创建****名称空间范围**常量

 **```
// in some include file:

namespace foo 
{
    constexpr double bar() { return 1.23456; } // internal linkage
    constexpr double baz = 1.23456;            // internal linkage
    const double bing = 1.23456;               // internal linkage
} 
```

这甚至可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T00:04:17.117

**是的，没有**；你可以使用`extern`：

> `[C++11: 3.5/3]:` **具有命名空间范围**(3.3.6)**的名称如果是**
> 
> *   显式声明的变量、函数或函数模板`static`；或者，
> *   **`const`显式声明或**既未显式声明****`constexpr`**也**未先前声明具有外部链接****的变量**；或者**`extern`****
> ***   匿名工会的数据成员。**

 **所以：

```
namespace foo 
{
    extern constexpr double bar() { return 1.23456; }
    extern constexpr double baz = 1.23456;
} 
```

在您的其他翻译单元中，您现在应该能够*声明*函数的名称并引用它：

```
#include <iostream>

namespace foo
{
   extern constexpr double bar();
}

int main()
{
   std::cout << foo::bar() << '\n';
} 
```

但是，`constexpr` *变量*的规则规定，[你不能有一个不是定义的声明](http://en.cppreference.com/w/cpp/language/constexpr)：

> `[C++11: 7.1.5/9]:`对象声明中使用的`constexpr`说明符将对象声明为`const`. 这样的对象应具有文字类型并应被初始化。*[..]*

因此，您不能对`baz`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-21T21:51:27.230

`constexpr`对于函数意味着`inline`，这意味着外部链接。所以你已经拥有了你想要的东西`bar`。至于`baz`and `bing`，你也可以在 C++17 中内联声明它们。

另请参阅[https://stackoverflow.com/a/4193698/261217](https://stackoverflow.com/a/4193698/261217)****

# ios - 使用大量视图控制器实现 AdMob

> ID：14616189
> 
> 赞同：0
> 
> 时间：2013-01-31T00:03:03.767
> 
> 标签：ios, admob

对于这个新手问题，我很抱歉，但它就在这里。我刚开始使用 iOS 并在我的应用中实施 AdMob。该应用程序在广告工作时运行良好，但我有四个视图控制器，为了测试，我只是在所有视图控制器中实现所有这些方法。

```
- (GADRequest *)createRequest
- (void)adViewDidReceiveAd:(GADBannerView *)adView
- (void)adView:(GADBannerView *)view 
```

但是想象一下，如果我有 100 个 VC……有一种方法可以只在一个文件中执行它并像 .h 文件一样导入？是的，我的 OOP 知识有限，如果有人可以帮助我，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T19:00:26.387

有一个关于为广告实现单例的[教程](http://googleadsdeveloper.blogspot.com/2012/04/creating-gadbannerview-singleton-in.html)，但是您仍然需要为每个视图控制器实现侦听器方法（如果需要的话），因为您可能需要在不同的情况下做出不同的反应。

就个人而言，我认为在每个有广告的 VC 中只使用这些方法会更干净，然后重新考虑哪些 VC 需要在其中添加广告。您的标题屏幕和选项屏幕不是很好的候选者 - 最佳做法是仅将广告放在用户将花费大部分时间的 VC 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T11:20:43.230

只需阅读您的问题，由于尚未回答，我想分享我的解决方案。

创建一个 ViewController 作为其余 VC 的基本视图控制器。在该基本视图控制器中实现广告的函数和侦听器，并从该基本VC 扩展（继承）其余的VC。在 baseVC 函数中完成所有工作，如果您需要在特定 VC 中添加一些不同的东西，您可以这样做，然后调用该函数的 super。

希望这可以帮助。

# authentication - 如何验证在移动设备上执行的 OAuth LinkedIn 登录？

> ID：14616192
> 
> 赞同：5
> 
> 时间：2013-01-31T00:03:26.717
> 
> 标签：authentication, oauth, linkedin, linkedin-api

我有一个移动应用程序，它使用 LinkedIn 的 OAuth API 来允许用户使用 LinkedIn 登录。

鉴于整个登录事务发生在移动设备上，我的服务器如何验证登录是否实际成功？

# jquery - Jquery UI 嵌套手风琴与顶级手风琴内容

> ID：14616194
> 
> 赞同：7
> 
> 时间：2013-01-31T00:03:37.003
> 
> 标签：jquery, user-interface, nested, accordion

我正在尝试创建一个包含多个组织级别的导航菜单。我正在构建一个嵌套的 jQuery UI 手风琴，如果我的所有内容都在手风琴的最低级别（最深）的嵌套中，它会很好用。问题是某些元素将具有内容和子手风琴。如果我在顶部手风琴旁边放置一些文本，它看起来很棒......但是一旦我将它包装在标签中，它就会破坏该元素中的嵌套手风琴

这是我试图让它看起来像 [照片样机的样机](http://i46.tinypic.com/5ur1gi.jpg)

我当前的 HTML

```
 <div id="faqs-container" class="accordian">
    <h3><a href="#">One</a></h3>

   <div class="accordian">
           I really want a list here!
        <h3><a class=href="#">A</a></h3>
        <div>
            <ul>
                <li>list</li>
                <li>list</li>
                <li>list</li>
            </ul>
            </div>
        <h3><a href="#">B</a></h3>
        <div>    
            <ul>
                <li>list</li>
                <li>list</li>
                <li>list</li>
            </ul>
       </div>
    </div>
    <h3><a href="#">Two</a></h3>
    <div class="accordian">
         <ul>
                <li>But They</li>
                <li>Do Not</li>
                <li>Work</li>
            </ul>
        <h3><a href="#">A2</a></h3>
        <div>
            <ul>
                <li>list</li>
                <li>list</li>
                <li>list</li>
            </ul>
        </div>
        <h3><a href="#">B2</a></h3>
        <div>
            <ul>
                <li>list</li>
                <li>list</li>
                <li>list</li>
            </ul>
        </div>
    </div>
</div> 
```

jQuery

```
 $("div.accordian").accordion({
        autoHeight: false,
        collapsible: true,
        active: false

    }); 
```

像这样运行代码会为第一部分生成一个很好的嵌套手风琴，但第二部分呈现不正确。看起来 jQuery 开始在标题之后抓取第一个 html 元素来构建手风琴。

我在调用手风琴时指定了标题选项，如下所示

```
$("div.accordian").accordion({
    autoHeight: false,
    collapsible: true,
    active: false,
    header: 'h3'

}); 
```

这接近预期的效果。该列表呈现在正确的位置，但第二部分中的嵌套手风琴不起作用。

我有一个[小提琴](http://jsfiddle.net/VYbSU/3/)设置

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T01:28:35.033

这应该工作

```
<div id="faqs-container" class="accordian">
    <h3><a href="#">One</a></h3>

   <div class="accordian">
           I really want a list here!
        <h3><a class=href="#">A</a></h3>
        <div>
            <ul>
                <li>list</li>
                <li>list</li>
                <li>list</li>
            </ul>
            </div>
        <h3><a href="#">B</a></h3>
        <div>    
            <ul>
                <li>list</li>
                <li>list</li>
                <li>list</li>
            </ul>
       </div>
    </div>
    <h3><a href="#">Two</a></h3>
    <div> <-- A Wrapper -->
             <ul>
                    <li>But They</li>
                    <li>Do Not</li>
                    <li>Work</li>
                </ul>
         <div class="accordian">
            <h3><a href="#">A2</a></h3>
            <div>
                <ul>
                    <li>list</li>
                    <li>list</li>
                    <li>list</li>
                </ul>
            </div>
            <h3><a href="#">B2</a></h3>
            <div>
                <ul>
                    <li>list</li>
                    <li>list</li>
                    <li>list</li>
                </ul>
            </div>
        </div>
    </div>
</div> 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/VYbSU/4/)

对于选项卡`Two`，您需要创建另一个包装元素并将`ul`and 子元素`accordion`作为其子元素

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T01:29:26.077

***[看看这个小提琴](http://jsfiddle.net/VgKqD/1/)***

您是正确的，它查看标题之后的下一个元素，因此您可以简单地用 div 包装顶级手风琴的内容，然后包含您的子手风琴。

```
<h3><a href="#">Two</a></h3>

    <div>  <!-- This wrapper -->
        <ul>
            <li>But They</li>
            <li>Do Not</li>
            <li>Work</li>
        </ul>
        <div class="accordian">
             <h3><a href="#">A2</a></h3>

            <div>
                <ul>
                    <li>list</li>
                    <li>list</li>
                    <li>list</li>
                </ul>
            </div>
             <h3><a href="#">B2</a></h3>

            <div>
                <ul>
                    <li>list</li>
                    <li>list</li>
                    <li>list</li>
                </ul>
            </div>
        </div>
    </div> 
```

# java - 连接文件中的点 - 最短路径

> ID：14616196
> 
> 赞同：0
> 
> 时间：2013-01-31T00:03:59.323
> 
> 标签：java, algorithm, user-interface, drawing, line

我有一个应用程序读取一组点并将它们绘制在 JPanel 上。我现在想修改该代码，以便在每个点之间画一条线。这是我仅绘制点的代码。

代码：

```
import javax.swing.*;
import java.awt.*;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;

public class Test {

    private static final String FILE = "Desktop/Test1.txt";
    private static Point[] points;

    public static void main(final String[] args){
        try{
            final BufferedReader br = new BufferedReader(new FileReader(new File(FILE)));
            points = new Point[Integer.parseInt(br.readLine())];
            int i = 0;
            int xMax = 0;
            int yMax = 0;
            while(br.ready()){
                final String[] split = br.readLine().split("\t");
                final int x = Integer.parseInt(split[0]);
                final int y = Integer.parseInt(split[1]);
                xMax = Math.max(x, xMax);
                yMax = Math.max(y, yMax);
                points[i++] = new Point(x, y);

            }
            final JFrame frame = new JFrame("Point Data Rendering");
            final Panel panel = new Panel();
            panel.setPreferredSize(new Dimension(xMax + 10, yMax + 10));
            frame.setContentPane(panel);
            frame.pack();
            frame.setVisible(true);
            frame.repaint();
        } catch (final Exception e){
            e.printStackTrace();
        }
    }

    public static class Panel extends JPanel {

        @Override
        public void paintComponent(final Graphics g){
            g.setColor(Color.RED);
            for(final Point p : points){
                g.fillRect((int) p.getX(), (int) p.getY(), 2, 2);
            }
        }

    }

} 
```

如果有人有任何很酷的算法可以找到连接所有点的最短路径，我会对学习它们非常感兴趣！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:32:15.250

找到连接所有点的最短路径被称为旅行商问题，被称为 NP-hard。基本上这意味着没有找到最短路径的快速算法。但是，有一些快速算法可以找到一条非常短的路径，最重要的是，如果点的数量非常少（10 或更少），那么您可以想象所有可能的解决方案。

一个非常简单的算法是从一个随机点开始，计算到每个点的距离并选择最短的路径，然后重复直到你访问了每个点。为了使这更智能，您可以沿着路径走并尝试每两行交换一次（例如，如果您执行 aB Bc cD 尝试 ac cB BD），如果它使路径更短，请保留它。

在此处阅读有关旅行推销员问题的信息：[http ://en.wikipedia.org/wiki/Travelling_salesman_problem#Heuristic_and_approximation_algorithms](http://en.wikipedia.org/wiki/Travelling_salesman_problem#Heuristic_and_approximation_algorithms)

# php - 在 php 表单上验证大于/小于数字的数量

> ID：14616200
> 
> 赞同：0
> 
> 时间：2013-01-31T00:04:14.843
> 
> 标签：php, mysql, forms, validation

我正在尝试创建一个表单，登录用户可以在其中输入销售（ltd_entry_amount），但只有 200.00 美元或更多的销售，但没有运气。如果我去掉“> 199.99”，表格可以正常工作，但现在“请检查所有必填字段是否完整，然后重试”。消息显示。任何人都可以帮忙吗？

```
 <?php 

                require_once ('./includes/config.inc.php');

                $page_title = 'Log a Sale';
                include ('./includes/header.html');

                if (!isset($_SESSION['ltd_user_id'])) {

                   $url = 'http://' . $_SERVER['HTTP_HOST']
                    . dirname($_SERVER['PHP_SELF']);
                   if ((substr($url, -1) == '/') OR (substr($url, -1) == '\\') ) {
                        $url = substr ($url, 0, -1); // Chop off the slash.
                   }
                   $url .= '/login.php'; 

                ob_end_clean(); // Delete the buffer.
                header("Location: $url"); 
                exit(); // Quit the script.
                }
                $users = $_SESSION['ltd_user_id'];

                if (isset($_POST['submitted'])) {// Handle the form.

                   require_once ('database.php');
                   // Connect to the database.    

                    $errors = array(); // Initialize error array.

                    // Check for a Invoice Number.
                    if (empty($_POST['ltd_invoice_no'])) {
                       $errors[] = '<p>• You forgot to enter your Invoice Number.</p>';
                    } else {
                       $inv = escape_data($_POST['ltd_invoice_no']);
                    }

                    // Check for invoice amount.
                    if (empty($_POST['ltd_entry_amount']) < 199.99) {
                       $errors[] = '<p>• You forgot to enter your Total Amount. Please ensure it is at least $200.00</p>';
                    } else {
                       $amount = escape_data($_POST['ltd_entry_amount']);
                    }

                    // Check for business name.
                    if (empty($_POST['ltd_business_name'])) {
                       $errors[] = '• You forgot to enter your Dealership Name.';
                    } else {
                       $dealer = escape_data($_POST['ltd_business_name']);
                    }

                    if (empty($errors) && $amount)  { // If everything's OK. // If everything's OK.

                      // Make sure the invoice number is available.
                      $uid = @mysql_insert_id(); //Get the url ID.

                        // Add the user.
                        $query = "INSERT INTO ltd_sales_list (ltd_item_id , ltd_user_id, ltd_invoice_no, ltd_entry_amount, ltd_entry_userdate, ltd_business_name, ltd_entry_date) VALUES
                        ('$uid', '$users', '$inv', '$amount', '$_POST[ltd_entry_userdate]', '$dealer' , NOW())";
                        $result = @mysql_query ($query); // Run the query.

                        if (mysql_affected_rows() == 1) {
                        // If it ran OK.
                           echo 'Your sale is registered into the system.';
                           include ('./includes/footer.html'); // Include the HTML footer.
                           exit();

                        } else { // If it did not run OK.
                           echo 'You could not be registered due to a system error. We apologize for any inconvenience.';
                        }

                   } else { // If one of the data tests failed.
                      echo 'Please check all manatory fields are complete and try again.';
                   }

                   mysql_close(); // Close the database connection.

                } // End of the main Submit conditional.
                ?>                          

                <form action="logsale.php" method="post">

                                        <table width="550" border="0" cellspacing="1" cellpadding="5">

                                              <tr>
                                                <td width="250"><div align="right">Invoice Number <span class="red_light">*</span></div></td>
                                                <td width="267">
                                                <input type="text" name="ltd_invoice_no" size="30" maxlength="30" value="<?php if (isset($_POST['ltd_invoice_no'])) echo $_POST['ltd_invoice_no']; ?>" /></td>
                                              </tr>
                                              <tr>
                                                <td><div align="right">Total Amount of sale 
                                                        <em><strong>(exc. GST)</strong></em> <span class="red_light">*</span></div></td>
                                                <td>
                                                <input type="text" name="ltd_entry_amount" size="30" maxlength="30" 
                                                value="<?php if (isset($_POST['ltd_entry_amount'])) echo $_POST['ltd_entry_amount']; ?>" /></td>
                                              </tr>
                                              <tr>
                                                <td></td>
                                                <td>Please enter number only</td>
                                              </tr>
                                              <tr>
                                                <td><div align="right">Date of Invoice</div></td>
                                                <td>
                                                <script type="text/javascript">
                                                    $(function() {
                                                    $("#datepicker").datepicker({ dateFormat: "dd/mm/yy" }).val()
                                                    });
                                                    </script>

                                                <input size="30" maxlength="10" id="datepicker" name="ltd_entry_userdate" type="text" value="<?php if (isset($_POST['ltd_entry_userdate'])) echo $_POST['ltd_entry_userdate']; ?>" /></td>

                                              </tr>
                                                <tr>
                                                <td></td>
                                                <td><span class="sml_italics"><strong>Please enter as <strong>DD-MM-YYYY</strong></td>
                                              </tr>
                                              <tr>
                                                <td><div align="right">Dealership <span class="red_light">*</span></div></td>
                                                <td><input type="text" name="ltd_business_name" size="50" maxlength="60" value="<?php if (isset($_POST['ltd_business_name'])) echo $_POST['ltd_business_name']; ?>" /></td>
                                               </tr> 

                                                <tr>
                                                <td></td>
                                                <td><p><input type="submit" name="submit" value="Submit" /></p><input type="hidden" name="submitted" value="TRUE" />
                                                </td>
                                                </tr>

                                            </table>

                  </form>

                 <?php
                include ('./includes/footer.html');
                ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T00:10:44.697

如果（空（$_POST['ltd_entry_amount']）<199.99）{

您正在将布尔值与浮点数进行比较

您必须将这两个条件分开：

if(empty($_POST['ltd_entry_amount']) 或 $_POST['ldt_entry_amount'] < 199.99){

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T00:08:21.670

您的 if 语句似乎有问题：

```
if (empty($_POST['ltd_entry_amount']) < 199.99) 
```

应该

```
if (empty($_POST['ltd_entry_amount']) || $_POST['ltd_entry_amount'] < 199.99) 
```

# javascript - 为 URL.createObjectURL 设置自动撤销

> ID：14616202
> 
> 赞同：3
> 
> 时间：2013-01-31T00:04:18.173
> 
> 标签：javascript, html, blob

我正在尝试在 Javascript 中创建一个 blob 来提供文件。但是，创建的链接`window.URL.createObjectURL(blob)`会随着时间的推移而失效。我希望能够生成一个只要页面打开就有效的链接。在网上看了一下，看到autoRevoke选项设置为true，所以这让我相信这个url在没有被主动使用的时候被撤销了。我尝试将其设置为 false，但出现 TypeError。

这是代码：

```
var res = xhr.response;
var blob = new Blob([res]);
var url = window.URL.createObjectURL(blob, {autoRevoke : false}); 
```

这是错误：

```
Uncaught TypeError: Type error background.js:52 
```

如何防止 blob 的 url 变得无效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:28:40.183

如果您使用此处讨论的 API 将 blob 保存到文件系统：http: [//www.html5rocks.com/en/tutorials/file/filesystem/](http://www.html5rocks.com/en/tutorials/file/filesystem/)

您可以创建一个将持续存在的文件系统 URL。此解决方案确实有提示用户批准保存文件的缺点。

你能更多地谈论用户会看到的功能吗？你在链接什么？

回应您的评论：我建议您将输入元素保留在 DOM 中，只要您想保留对文件内容的引用。如果您要链接到内容，则可以创建一个链接，该链接使用输入元素的唯一 ID 调用函数。此函数将按需生成一个 blob URL 并将浏览器转发到该 URL。如果您将 URL 用作 img src 或类似的东西，那么您的应用程序可能有一个用户交互，仍然允许您按需创建 blob URL。

# java - 如何置换 int[] 并将每个 int[] 保存到 int[][] 中？

> ID：14616203
> 
> 赞同：1
> 
> 时间：2013-01-31T00:04:18.517
> 
> 标签：java, arrays

我需要排列中的第一行`int[][]`并将每个结果排列保存在后续行中。我的教授给了我这个实现的字符串版本作为指导：

```
private static void permute( char [ ] str, int low, int high )
{
        if( low == high )
        System.out.println( str );
    for( int i = low; i <= high; i++ )
    {
        char [ ] tmp = str.clone( ); // tmp will be str
        tmp[ i ] = str[ low ]; // with i and low
        tmp[ low ] = str[ i ]; // swapped
        permute( tmp, low + 1, high );
    }
} 
```

这是我到目前为止所拥有的（第一个是我如何称呼它）：

```
for (int row = 0; row < arr.length * LIST_SIZE; row++){
        if (arr.length % LIST_SIZE == LIST_SIZE-1)
            arr[row] = permute(arr[row%LIST_SIZE], 0, LIST_SIZE-1).clone();
    }

public int[] permute(int[] intArr, int low, int high){
    int[] returnArr = null;

    if (low == high){
        returnArr = intArr.clone();
    }

    for (int i = low; i <= high; i++){
        int[] temp = intArr.clone();
        temp[i] = intArr[low];
        temp[low] = intArr[i];
        permute(temp, low+1, high);
    }

    return returnArr;
} 
```

现在，第一行之后的二维数组的每一行都被零填充。我有一种感觉，我正在使这比现在更难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T03:05:35.977

您实际上忘记*使用*从 permute() 返回的置换值，替换

```
permute(temp, low+1, high); 
```

和

```
returnArr = permute(temp, low+1, high); 
```

# api - REST API 如何对需要维护特定顺序的资源进行建模

> ID：14616207
> 
> 赞同：4
> 
> 时间：2013-01-31T00:04:39.840
> 
> 标签：api, rest, resources

我们正在为我们的 API 设计一个新功能，但我们偶然发现了一个两难境地。

我们有两种具有 1-N 关系的不同类型的资源。表示和层。一个表示可以包含多个层。一个层只能属于一个表示。我们坚持的事情是我们需要**维护表示**中层的顺序。

我们提出了两种方法：

第一种方法：**链表**

每个层都知道它的前一层。在数据库中，这是通过在 Layers 表中包含另一个 Layer 的 id 的“父”字段来实现的。第一层将有一个“父”设置为 NULL。

然后通过以下 URI 通过 API 公开：

创造

```
GET /Representations/{repID}/layers 
```

获取表示的所有层。可以通过遍历所有层并查看父字段来确定顺序。

```
POST /Representations/{repID}/layers 
```

正文：标签：（字符串）父级：LayerId

这用于通过在请求正文中指定父级来在特定位置创建和插入层。如果将 Parent 设置为 NULL，则新创建的 Layer 将是顺序中的第一个 Layer。如果省略父字段，新创建的图层将位于订单的底部。问题在于，在响应中，我们需要通知 api 使用者其他层由于新的插入而改变了顺序。

更新

```
PUT /Representations/{repID}/layers/{layerId} 
```

body: Label: (string) Parent: LayerId 同样，您可以指定一个新的 Parent 来重新排序该层，并且我们需要再次发回有关所有其他已更改层的信息。

删除

```
DELETE /Representations/{repID}/layers/{layerId} 
```

需要发回有关所有其他已更改层的信息。

第二种方法：**Layers Order 作为自己的资源**

这个想法是层本身没有顺序的概念。它们只是一种资源。然后你会得到一个 layersorder 资源，它负责保存有关层顺序的信息。

所以你仍然有图层的 CRUD 功能：GET - POST - PUT - DELETE

但是当你想知道他们的订单，或者你想改变他们的订单时，你会使用下面的 uri：

```
/Representation/{repId}/layersorder 
```

此资源将仅支持两种方法

```
GET /Representations/{repID}/layersorder 
```

取回此 Representation 中的 Layers Id 的有序列表。

```
PUT /Representations/{repID}/layersorder 
```

body: [] - 新顺序的图层 ID 数组。更新图层的顺序。您需要以新的顺序传递一个 Array of Layers id 作为请求的主体。（例如 [1,3,2,4,6,5] ）

按照第一种方法，无论何时添加或删除图层，都需要通知 api 使用者另一个资源已更新。在第一种方法中是受更改影响的层列表，在这种方法中是层的新顺序（layersorder 资源）。

我想听听意见以及类似情况的示例以及您如何解决问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:24:38.273

我经历了你所描述的部分。

在执行影响一个（或多个实体）的 PUT/POST 时，我喜欢在更改后返回完整的对象。希望返回对象不是很大，但是如果我使用您的 API，使用第一种方法......我会喜欢执行 PUT/POST 并更新图层，然后使用更新的图层信息取回完整的表示对象。

它只是让我很容易确认我的更改，并立即开始使用新结构在我的代码中工作。我不喜欢执行 PUT/POST，*然后*必须执行额外的 GET 才能看到更改。

对于第二种方法……我需要做的工作越多来调用 API，我就越沮丧。我不确定我是否读对了，但要使用第二种方法进行 PUT，似乎我必须构建整个表示和层对象来更新一条数据。那会令人沮丧。

我更喜欢第一种方法的语法，但使用第二种方法的概念。换句话说，这是我希望在 PUT/POST/GET 之后看到的文档：

```
 {
   "type" : "Representation",
   "id" : 1,
   "layers" : [
      { "id" : 1, "name" : "the first layer", "order" : 1, "parent" : "" },
      { "id" : 2, "name" : "the second layer", "order" : 2, "parent" : 1 },
      { "id" : 3, "name" : "the third layer", "order" : 3, "parent" : 1 }   
   ]
} 

```

它已经为我排序了，所以我不必做这项工作，但也有用于生成排序的信息以防万一。我已经使用 REST API 完成了这项工作，它似乎对用户来说效果很好。

# c# - 将相同的 DbContext 与多个存储库一起使用是否明智？

> ID：14616211
> 
> 赞同：2
> 
> 时间：2013-01-31T00:04:58.827
> 
> 标签：c#, .net, entity-framework, repository-pattern

深入了解实体框架和存储库，以实现更好的测试。想知道这是否明智？

```
public interface IRepository
{
    int SaveChanges();

    void Dispose();
}

using (MyContext context = new MyContext())
{
    TransactionRepository txns = new TransactionRepository(context); // TransactionRepository implement IRepository
    MappingRepository maps = new MappingRepository(context); // MappingRepositoryimplement IRepository

    SomeCommand command = new SomeCommand(txns, maps);
    command.Execute();
} 
```

每个存储库在逻辑上都是不同的，因此理论上可能位于不同的数据源中。目前，他们使用相同的数据库。每个存储库类都实现了 IRepository，尤其是 SaveChanges() 以及一些我为了简洁而没有显示的查询方法。

利用多个存储库的好习惯是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T00:36:29.070

+1 大猩猩，取得了一些商品积分。我将添加以下想法。

在 web/mvc 场景中，我使用了几十个存储库并将上下文注入到这些存储库中。我使用存储库基类。我还在构造函数中使用上下文的 UoW 类。工作单元类包含对上下文所有受支持存储库的引用。我也使用有界上下文。这是 Julie Lerman 关于这个主题的示例博客。 [http://www.goodreads.com/author/show/1892325.Julia_Lerman/blog](http://www.goodreads.com/author/show/1892325.Julia_Lerman/blog)

所以是的，使用多个上下文和使用多个存储库是非常有意义的。您甚至可能有多个工作单元类，但同时使用 UoW 类是另一个讨论。

根据要求添加示例代码：此示例是从基本 LuW 类继承的几个 LuW 类之一。当前状态和要使用的 DBContext 被注入。（或默认）存储库是来自 CORE 项目的接口。LuW 类在 DAL 项目中。

基础 LuW 类似于....

```
public interface ILuw : ILuwEvent, IDisposable
  {

   IBosCurrentState CurrentState{ get; set; }
   OperationStatus Commit();

   } 
```

Luw类本身。

```
namespace XYZ.DAL
{
public class LuwBosMaster : Luw, ILuwBosMaster
{
    public LuwBosMaster(DbContext context, IBosCurrentState currentState)  
    {
       base.Initialise(context,currentState); 
    }
    public LuwBosMaster()
    {

        base.Initialise(GetDefaultContext(), BosGlobal.BGA.IBosCurrentState);
    }
    public static DbContextBosMaster GetDefaultContext()
    {
     return new DbContextBosMaster("BosMaster");
    }

    //MasterUser with own Repository Class
    private IRepositoryMasterUser _repositoryMasterUser;
    public  IRepositoryMasterUser RepMasterUser
    { get { return _repositoryMasterUser ?? (_repositoryMasterUser = new RepositoryMasterUser(Context, CurrentState)); } }

    //20 other repositories declared adn available within this Luw
    // Some repositories might address several tables other single tables only.
    //  The repositories are based on a base class that common generic behavior for each MODEL object 
```

我相信你得到了基本的想法......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T00:16:23.883

这实际上归结为您的设计决策。如果您遵循工作单元模式，那么每个存储库可能都有自己的上下文；主要是因为根据 UoW，每个存储库调用都应该创建它的上下文，完成它的工作，然后处理它的上下文。

但是，共享上下文还有其他充分的理由，其中一个（恕我直言）是上下文必须跟踪实体的状态，如果你得到一个实体，处置上下文，对实体进行一些修改，并且然后附加到一个新的上下文这个新的上下文必须去访问数据库，以便它可以找出实体的状态。同样，如果您正在使用实体图（发票及其所有 InvoiceItems），则新上下文必须获取图中的所有实体以确定它们的状态。

现在，如果您正在使用您不存在或无法维护状态的网页或服务，那么 UoW 模式在某种程度上是隐含的，它是一种普遍接受的“良好实践”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T06:32:26.807

最重要的是忘记了：数据库连接不是在多个`DbContext`实例之间共享的。这意味着如果您希望多个存储库位于同一事务中，则必须使用分布式事务。与本地事务相比，这是一个很大的性能下降。

# uitableview - 使用可访问性标识符 UIAutomation 访问表视图

> ID：14616218
> 
> 赞同：1
> 
> 时间：2013-01-31T00:05:53.670
> 
> 标签：uitableview, ios6, ios-ui-automation

我在应用程序上有两个表格视图，分别是 TableViewA 和 TableViewB。我的两个表格视图都有组和单元格。我的 TableviewB（连同它的组和单元格）是 TableViewA 单元格的子视图。所以简而言之，tableViewA 的单元格包含整个 tableviewB。

在 UIAutomation 我可以使用访问 tableviewB

`tableViewA.cells()[0].tableviewB()[0]`

但是我的 tableViewB 设置了一个accessibilityIdentifier，它说“shoppingTable”。

现在使用accessibilityIdentifier，我怎样才能访问tableViewB？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-13T06:03:44.443

为确保正确查看表视图，您应该尝试在 mainWindow() 上运行 logElementTree()。隐藏嵌套视图很常见，因为在 Apple 文档中他们指出，如果您有一个容器视图并将其设置为可访问性元素，它将隐藏所有子视图。许多博客文章中都有针对此问题的解决方法。

鉴于您的表 A 没有隐藏表 B，通过使用

```
UIATarget.localTarget().frontMostApp().mainWindow().logElementTree(); 
```

您可以打印出视图，您应该会看到您正在寻找的标识符

# php - 添加两个模型之间的关系

> ID：14616219
> 
> 赞同：0
> 
> 时间：2013-01-31T00:06:02.343
> 
> 标签：php, activerecord, yii

我有模型 1 表示带有 (id1,par1, para2 ) 的表，模型 2 表示带有 (id2,para3) 的表

我想在使用时按顺序修改模型1

```
$mydata = model1::model()->findBySql('SELECT * FROM table1 ORDER BY id1 DESC'); 
```

此查询仅在 par1 > par3 （两者都是时间）处直接为我返回，而不添加条件 where 。或者，如果你是一种添加基于其他模型的条件的方法？

```
 class model1 extends CActiveRecord
   {

public static function model($className=__CLASS__)
{
    return parent::model($className);
}

public function tableName()
  {
    return 'table1';
  } 
  } 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T13:34:08.117

感谢所有评论，我通过使用两个 cdbcreteria 来解决它，并在它们之间设置一个条件， [请参阅我的帖子here](https://stackoverflow.com/questions/14763774/cdbcriteria-condition-from-another-cdbcriteria#comment20672639_14763774)

# ios - 如何按日期排序nsmutabledictionary

> ID：14616229
> 
> 赞同：0
> 
> 时间：2013-01-31T00:07:07.647
> 
> 标签：ios, json, sorting, nsmutabledictionary

我有一个 JSON 返回的 NSMutabledictionary 包含以下内容

```
OdometerStart = "9 miles";
    Size = 40;
    StartTime = "01-30-2013 2:30 PM";
    Tractor = T04;

  OdometerStart = "668 miles";
    Size = 40;
    StartTime = "01-30-2013 2:23 PM";
    Tractor = T04; 
```

我需要按 StartTime 对其进行排序，有没有办法对此进行排序？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:24:47.700

有很多方法可以进行排序。这是一 ：

```
NSMutableDictionary *dict; //dictionary to be sorted

        NSArray *sortedKeys = [dict keysSortedByValueUsingComparator: ^(id obj1, id obj2) {
            //get the key value.
            NSString *s1 = [obj1 objectForKey:@"StartTime"];
            NSString *s2 = [obj2 objectForKey:@"StartTime"];

            //Convert NSString to NSDate:
            NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
            //Set the AM and PM symbols
            [dateFormatter setAMSymbol:@"AM"];
            [dateFormatter setPMSymbol:@"PM"];
           //Specify only 1 M for month, 1 d for day and 1 h for hour
           [dateFormatter setDateFormat:@"M/d/yyyy h:mm:ss a"]; 
           NSDate *d1 = [dateFormatter dateFromString:s1];
           NSDate *d2 = [dateFormatter dateFromString:s2];
           [dataFormatter release];

            if ([d1 compare:d2] == NSOrderedAscending) 
                return (NSComparisonResult)NSOrderedAscending;
            if ([d1 compare:d2] == NSOrderedDescending)
                return (NSComparisonResult)NSOrderedDescending; 
            return (NSComparisonResult)NSOrderedSame;
        }];
        NSArray *sortedValues = [[dict allValues] sortedArrayUsingSelector:@selector(compare:)]; 
```

看看苹果文档： [https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Collections/Articles/Dictionaries.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Collections/Articles/Dictionaries.html)

在此处排序描述符苹果文档： [https ://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/SortDescriptors/Articles/Creating.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/SortDescriptors/Articles/Creating.html)

# javascript - 在另一个 url 中传递 url

> ID：14616232
> 
> 赞同：2
> 
> 时间：2013-01-31T00:07:19.643
> 
> 标签：javascript, jquery

我有这个片段：

```
$('#button1').click(function(){
                window.location = "details.php?trans=Automatic&&mileage=19,695&&eng=6&&ext=White Platinum Metallic&&stock=45411&&vin=2FMGK5D89DBD08967&&location=Palm Beach, FL&&price=$28,999&&photo=http://content.homenetiol.com/1535/67692/165x10000/2013-Ford-Flex-Limited/d0dbf839ecc3492a850bfc73a6d9099d.jpg";
                }); 
```

我想在 url 中传递图像`photo`的 url 但它不起作用

*   为什么？
*   我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:09:05.053

您需要在之后对所有内容进行编码吗？通过[`encodeURIComponent`](http://www.w3schools.com/jsref/jsref_encodeuricomponent.asp)

```
$('#button1').click(function(){
            window.location = "details.php?"+ encodeURIComponent("trans=Automatic&&mileage=19,695&&eng=6&&ext=White Platinum Metallic&&stock=45411&&vin=2FMGK5D89DBD08967&&location=Palm Beach, FL&&price=$28,999&&photo=http://content.homenetiol.com/1535/67692/165x10000/2013-Ford-Flex-Limited/d0dbf839ecc3492a850bfc73a6d9099d.jpg");
  }); 
```

# regex - REGEX Sqlite 不区分大小写不起作用

> ID：14616235
> 
> 赞同：2
> 
> 时间：2013-01-31T00:07:35.047
> 
> 标签：regex, sqlite, case-insensitive

我无法让不区分大小写的搜索在 SQLITE 中为 REGEX 工作。是否支持语法？

```
SELECT * FROM table WHERE name REGEXP 'smith[s]*\i' 
```

我希望得到以下答案（假设数据库有这些条目）：

Smith
Smiths
smith
smitH <--- 不是错字，但在数据库中

注意 - 这是较大 REGEX 的一小部分，所以我不会使用 LIKE

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:55:07.907

The `REGEXP` function shipped with SQLite Manager is implented in JavaScript as follows:

```
var regExp = new RegExp(aValues.getString(0));
var strVal = new String(aValues.getString(1));

if (strVal.match(regExp)) return 1;
else return 0; 
```

To get case-insensitive searches with the [JavaScript RegExp object](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp), you would not add a flag to the pattern string itself, but pass the `i` flag in the second parameter to the `RegExp` constructor. However, the binary `REGEXP` operator does not have a third flags parameter, and the code does not try to extract flags from the pattern, so these flags are not supported in this implementation.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-01T21:03:59.673

如 CL 所述，SQLite 不支持此功能。这个问题的一个简单解决方案是使用 lower 将 REGEXP 表达式的左侧“小写”：

```
SELECT * FROM table WHERE lower(name) REGEXP 'smith[s]*'; 
```

这并不理想，但它有效。但要注意变音符号。如果您的文本使用它们，我会阅读更低的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-12T14:19:22.200

来自[https://www.sqlite.org/lang_expr.html](https://www.sqlite.org/lang_expr.html)

如果在运行时添加了名为“regexp”的应用程序定义的 SQL 函数，则“X REGEXP Y”运算符将作为对“regexp(Y,X)”的调用来实现。

# c++ - 没有调用正确的构造函数

> ID：14616236
> 
> 赞同：2
> 
> 时间：2013-01-31T00:07:43.877
> 
> 标签：c++

所以这是我的标题：

```
//warehouse.h
#ifndef WAREHOUSE_H
#define WAREHOUSE_H
#include<string>
#include<map>
#include "dates.h"

namespace a4
{
  class warehouse
  {
      public:
          warehouse(std::string name, std::string start_date);

      private:
          std::string name;
          std::string busiest_day;
          int most_transactions;
          dates current_date;
          std::map<std::string, a4::food> items;
          void next_day();

  };
}
#endif 
```

我的.cc：

```
//warehouse.cc
#include "warehouse.h"
#include "dates.h"
namespace a4
{
 //constructor
 warehouse::warehouse(std::string wname, std::string start_date)
 {
     wname = name;
     current_date = dates(start_date);

 }
 void warehouse::next_day()
 {
     current_date.next_day();
 }
} 
```

和编译器错误：

```
warehouse.cc: In constructor ‘a4::warehouse::warehouse(std::string, std::string)’:
warehouse.cc:6: error: no matching function for call to ‘a4::dates::dates()’
dates.h:10: note: candidates are: a4::dates::dates(std::string)
dates.h:8: note:                 a4::dates::dates(const a4::dates&) 
```

从错误来看，它看起来像是在调用零参数构造函数，而不是采用字符串的构造函数。我构建的日期类显然没有零参数构造函数。

几个小时以来，我一直试图解决这个问题，任何帮助将不胜感激。在一个类似的问题中，我被告知要查找成员初始值设定项列表。我猜我已经并且不太了解如何正确实施它，因为它似乎无法解决问题。

刚开学几周，这是我的第一堂 C++ 课，放轻松 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:11:30.650

这是因为您`dates current_date;`作为`warhouse`. 当`warhouse`'s 的构造函数被调用时，其所有成员变量的默认构造函数都会被调用。您可以使用符号更改任何成员变量使用的构造函数`:`（创建[初始化列表](http://www.cprogramming.com/tutorial/initialization-lists-c++.html)）：

```
warehouse::warehouse(std::string wname, std::string start_date)
    : current_date(start_date)
{
    wname = name;
} 
```

或者通过简单地为`dates`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T00:09:36.417

使用[初始化列表](http://www.cprogramming.com/tutorial/initialization-lists-c++.html)语法：

```
warehouse::warehouse(std::string wname, std::string start_date):
    wname(name), current_date(start_date)
{
} 
```

在 C++ 中，未在构造函数的初始化列表中列出的任何变量都是默认构造的。初始化列表是您控制调用构造函数的方式，因此您可以避免默认构造。

以这种方式（如果可能）初始化所有类变量是一个好习惯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T00:09:45.907

您需要调用 current_date `member initializers list`：

```
 warehouse::warehouse(std::string wname, std::string start_date)
 :current_date (start_date)
 {
     wname = name;
 } 
```

默认情况下，如果类成员不在`member initialize list`，则调用默认构造函数，因为`dates`没有默认构造函数，编译器编译失败。

要初始化没有默认构造函数的类成员，唯一的方法是在`member initializers list`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T00:09:51.930

您必须使用初始化列表：

```
warehouse::warehouse(std::string wname, std::string start_date) : 
   current_date(start_date)
{
 wname = name;
} 
```

非 POD 数据成员在执行构造函数主体之前被初始化。

# php - 如何将对象重新嵌套到 PHP 中的对象数组中？

> ID：14616238
> 
> 赞同：0
> 
> 时间：2013-01-31T00:07:48.317
> 
> 标签：php, arrays

我正在尝试对指向另一个项目的项目进行排序，以嵌套在它指向的项目下。每个项目都可以引用一个父项；如果它确实将它嵌套在它的父级下，则正常重新索引。

```
foreach($list as $item) {
  if($item->parent != null) {
    $newlist[$list->parent] = $item;
  }
  else {
    $newlist[$item->id] = $item;
  }
} 
```

使用等号运算符覆盖项目而不是附加到数组。理想情况下应该将 $newlist[$item->parent] 转换为新项目数组。

# jboss - 如何在 JBoss 中访问我的应用程序？

> ID：14616240
> 
> 赞同：1
> 
> 时间：2013-01-31T00:07:53.447
> 
> 标签：jboss, geoserver

我正在学习如何使用 Jboss AS，很抱歉这个愚蠢的问题。

我安装了 JBoss 7.1.1 Final 并以 war 格式下载了 geoserver 应用程序。

我修复了发现的问题，并且在部署应用程序时没有任何堆栈跟踪。

```
21:55:07,808 INFO  [org.jboss.web] (MSC service thread 1-3) JBAS018210: Registering web context: /geoserver
21:55:08,148 INFO  [org.jboss.as.server] (HttpManagementService-threads - 5) JBAS018559: Deployed "geoserver.war" 
```

但是当我访问 localhost:8080/geoserver 时，我得到一个 404。有什么提示吗？谢谢

# javascript - jQuery .ready() 错误？

> ID：14616242
> 
> 赞同：2
> 
> 时间：2013-01-31T00:08:06.713
> 
> 标签：javascript, jquery

我正在开发一个 JS 函数来处理它`$(document).ready(...)`。这些函数在文件“a.js”中。

在函数“example（TAG_ID）”中，我调用：

```
console.log( $('#anything').children().length ) 
```

好的。当我包含在 Application Main Javascrip file:`$(document).ready(example(TAG_ID))`中时，返回：`0`

但。当我`<script>$(document).ready(example(TAG_ID))</script>`在 id 为 TAG_ID 的元素之后包含时，返回：（`7`应该如此）

jQuery.ready() 函数的描述是：“指定在 DOM 完全加载时执行的函数。”

我认为元素完全加载后它没有运行......为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T00:11:31.163

```
$(document).ready(example(TAG_ID)) 
```

立即评估`example(TAG_ID)`。正如您引用的文档所说，您要做的是传递一个*函数*，`ready()`以便在 DOM 准备好时运行它，这将推迟评估：

```
$(document).ready(function() { example(TAG_ID) }) 
```

# actionscript-3 - 从 Flash 横幅广告中将图片 URL 分享到 Pinterest

> ID：14616244
> 
> 赞同：0
> 
> 时间：2013-01-31T00:08:13.287
> 
> 标签：actionscript-3, flash, pinterest

任何人都知道我如何获得扩展的 Flash 横幅广告以将图像分享到 Pinterest。这不是横幅上的东西，所以我不需要上传任何东西，只需从网上发送指向 jpeg 或 png 的链接。我在与 Pinterest 相关的闪存代码 (AS3) 上一无所获。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T18:55:03.857

如果您使用 DoubleClick/Google 进行交易，您可以使用[Pinterest 组件。](http://www.google.com/doubleclick/studio/docs/innovation/pinterest/en/index.html)

否则，您可以按照他们的示例构建您自己的基于[ExternalInterface](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)的代理/桥接[Pinterest javascript](http://developers.pinterest.com/)。

# javascript - Javascript：使用动态参数从 onclick 事件调用对象函数/方法

> ID：14616253
> 
> 赞同：4
> 
> 时间：2013-01-31T00:09:04.163
> 
> 标签：javascript, object, dynamic, onclick, invoke

我正在尝试这样做：

```
<script>
var MyItem;

MyItem = new myobj('testobj');

function myobj(id)
{
     var _id = id;

     this.toggle = function()
     {
       ...
     }

     function draw()
     {
         document.body.innerHTML += "<a onclick='" + MyItem + ".toggle();'>link</a>";
     }

     draw();

}
</script> 
```

我得到“未定义函数”，但可以从控制台成功调用 MyItem.toggle() 。我也试过：

```
document.body.innerHTML += "<a onclick='(function(){" + MyItem + ".toggle();})()'>link</a>"; 
```

锚点必须在 javascript 中动态创建。如何从动态创建的锚点调用 MyItem 对象方法 toggle()？

ps，我是凭记忆输入js，如有语法错误，敬请见谅。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T00:13:10.283

不要添加类似的事件处理程序和元素。使用 DOM 方法

```
var anchor = document.createElement("a");
anchor.innerHTML = "link";
anchor.onclick = function(){ MyItem.toggle(); };
document.body.appendChild(anchor); 
```

我实际上认为你在追求这样的事情

```
var MyItem;

MyItem = new myobj('testobj');

function myobj(id) {
    var that = this;
    this.toggle = function () {
        alert(id);
    }
    function draw() {
        var anchor = document.createElement("a");
        anchor.innerHTML = "link";
        anchor.onclick = function () {
            that.toggle();
        };
        document.body.appendChild(anchor);
    }
    draw();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T00:12:55.967

那是行不通的。您正在尝试使用像字符串这样的对象。尝试以下操作：

```
document.body.innerHTML += "<a onclick='(function(){MyItem.toggle();})()'>link</a>"; 
```

# java - JAVA 将服务器套接字连接到另一个服务器套接字（例如客户端到客户端）？

> ID：14616255
> 
> 赞同：0
> 
> 时间：2013-01-31T00:09:05.950
> 
> 标签：java, p2p, serversocket

首先对冗长的标题感到抱歉，但考虑到我的问题，我无法想出合适的标题。

现在来解决问题。我正在创建一个点对点聊天应用程序，它能够发送和接收文件，同时还能够与个人联系人聊天。

我知道我可以捕获连接到服务器的客户端的 ip 并将其存储，然后当该用户开始与另一个人聊天时。我可以使用存储的 ip 在使用 ServerSocket 的两个客户端之间创建连接。

但是出于安全原因，我不希望将一个用户的 ip 传递给另一台用户的计算机，所以，我要问的基本上是有一种方法可以将两个客户端连接在一起，而无需将每个客户端的 ip 传递给每个客户端。

所以例如

```
(all sockets have read / write buffers )

Client 1-- logs in --> Server ( a session ID 1 is created between the client 1 and server )
Client 2-- logs in --> Server ( a session ID 2 is created between the client 2 and server )

Client 1 --- Starts chat with client 2 ---> Server ( server connects session 1 and session 2)

Client 1 can then chat and send files to client two without passing it the ip. 
```

如果这是一个不清楚的问题甚至是愚蠢的问题，我很抱歉，但我什至想不出谷歌这个问题的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:14:10.123

您需要通过服务器运行连接。您可以使用服务器来缓冲两个客户端之间的连接，并以一种看起来几乎无缝的方式连接它们的通信。

例如，您可以创建一个线程，只要两个客户端都连接，等待来自客户端 1 的输入并立即将其通过管道传输到客户端 2。反之亦然。这是您正在寻找的解决方案吗？

# reporting-services - 报告服务器数据库

> ID：14616256
> 
> 赞同：-1
> 
> 时间：2013-01-31T00:09:13.950
> 
> 标签：reporting-services, ssrs-2008

为此，在我的 SQL Management Studio 中为两个数据库提供服务：

*   ReportServer$InstanceName
*   ReportServer$InstanceNameTempDB

我知道它是与报告服务一起安装的，但我对它们了解不多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T00:35:36.823

ReportServer 数据库包含 Reporting Services 的所有对象。它包括报表、链接报表、共享数据源、订阅、文件夹、报表模型、上传文件、计划、快照、报表执行日志、对象级安全设置等。它需要定期备份，并连同其加密密钥。如果您正在构建报告解决方案，那么此数据库可为您提供审计所需的一切。

ReportServerTempDB 就是它听起来的样子——一个充满临时对象的数据库。您可以从字面上删除数据库中表的所有内容，并且不会永久丢失任何内容。您仍然需要备份它，以防在 DR 情况下需要恢复它，但您永远不需要查询其中的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T00:17:51.940

SSRS 使用的数据库的描述可以在[这里](http://technet.microsoft.com/en-us/library/ms156016.aspx)找到<--

# javascript - 如何确保在执行脚本之前包含某些库？

> ID：14616258
> 
> 赞同：1
> 
> 时间：2013-01-31T00:09:18.460
> 
> 标签：javascript, jquery, testing, object, modernizr

在 javascript 中，我想知道是否有办法检查某个库（jQuery、Modernizr 等）是否存在，如果不存在，则发出警报。

像：`require( jQuery ); // if jQuery is undefined, display an alert`
或者： `require( Modernizr ); // if Modernizr is undefined, display an alert`

我知道这是可能的，因为`Modernizr`和`jQuery`是对象，因此我检查 是有意义的`typeof`，如下所示：

```
function pass() { } // use as noop

var require = function( tool ) {
    if(typeof(tool) == "undefined") {
        alert("[" + tool + "] is not defined.");
    } else {
        pass();
    }
}

    require( jQuery ); 
```

但这当然行不通，因为 Chrome 的错误控制台说`"Object [jQuery] is not defined."`因为我测试了不存在的东西。有小费吗？

JavaScript 的很多新手，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:12:28.097

您应该将工具作为字符串传递，然后检查该`window`键的对象：

```
var require = function( tool ) {
    if (window[tool] === undefined) {
        alert("[" + tool + "] is not defined.");
    } else {
        pass();
    }
}

require( 'jQuery' ); 
```

这是小提琴：http: [//jsfiddle.net/9vXM2/](http://jsfiddle.net/9vXM2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T00:14:42.640

[http://yepnopejs.com/](http://yepnopejs.com/)是@ModernDesigner 之后的你

# asp.net-mvc - 如何在 asp.net MVC 下拉列表中设置数据主题

> ID：14616260
> 
> 赞同：1
> 
> 时间：2013-01-31T00:09:29.013
> 
> 标签：asp.net-mvc, jquery-mobile

使用标准主题，我的页面是“C”，但不是白色下拉列表，而是主题“B”的蓝色下拉列表。`DropdownListFor`使用快捷方式时有没有办法设置数据主题？

即类似的东西：

```
@Html.DropDownListFor(m => m.SomeId, new SelectList(Model.SomeList, "Id", "Name"), 
new { id = "SomeSelectedId",  name = "xxx", onchange = "this.form.submit();", **DATA-THEME="B"** }) 
```

试了很多次都不成功，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:26:22.553

您必须切换到 RouteValueDictionary：

```
@Html.DropDownListFor(m => m.SomeId, new SelectList(Model.SomeList, "Id", "Name"), 
    new RouteValueDictionary(new { id = "SomeSelectedId",  name = "xxx", onchange = "this.form.submit();"})
        {{"data-theme", "B"}}) 
```

# ios - 在后台接收推送通知

> ID：14616261
> 
> 赞同：38
> 
> 时间：2013-01-31T00:09:35.677
> 
> 标签：ios, xamarin.ios, push-notification, apple-push-notifications

我知道这在很多地方都有涉及，但我无法弄清楚。我使用 Urban Airship 进行推送通知。一切似乎都很好，除了当我的应用程序在后台时 -`didReceiveRemoteNotification`没有被调用。它在前台工作 - 我能够正确处理消息。如果从通知中心点击消息，我可以从启动选项中获取消息。但是在后台时，它发送的消息 - iOS 显示警报 -`didReceiveRemoteNotification`不会被调用。当我点击我的应用程序图标（不是从通知中心内）时，应用程序进入前台，我不知道通知存在。有任何想法吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2015-06-01T14:02:18.640

`application:didReceiveRemoteNotification:`仅当您将`content-available`带有值的键添加`1`到通知有效负载中时，才会在后台调用。如果是 Urban Airship，您可以在设置选项卡下发送测试推送。推送通知的示例负载：

```
{
  "aps": {
    "alert": "aaaa",
    "badge": "+1",
    "content-available": "1"
  },
  "device_tokens": [
    "86BA71E361B849E8312A7B943BA6B26A74AB436381CF3FEE3CD9EB436A12A292"
  ]
} 
```

苹果在他的文档中明确提到了......

> 对于触发下载操作的推送通知，通知的有效负载必须包含其值设置为 1 的内容可用键。当该键存在时，系统会在后台唤醒应用程序（或将其启动到后台）并调用应用委托的 application:didReceiveRemoteNotification:fetchCompletionHandler: 方法。您对该方法的实现应该下载相关内容并将其集成到您的应用程序中。 [https://developer.apple.com/library/content/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/BackgroundExecution/BackgroundExecution.html](https://developer.apple.com/library/content/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/BackgroundExecution/BackgroundExecution.html)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-31T04:01:47.883

从 APNS 编程指南：

> 让我们回顾一下操作为应用程序传递本地通知或远程通知时的可能场景。
> 
> 当应用程序未在前台运行时会发送通知。在这种情况下，系统会显示通知、显示警报、标记图标，可能还会播放声音。
> 
> 作为呈现通知的结果，用户点击警报的操作按钮或点击（或点击）应用程序图标。如果点击操作按钮（在运行 iOS 的设备上），系统会启动应用程序并且应用程序调用其委托的 application:didFinishLaunchingWithOptions: 方法（如果已实现）；它传入通知负载（用于远程通知）或本地通知对象（用于本地通知）。
> 
> 如果在运行 iOS 的设备上点击应用程序图标，应用程序会调用相同的方法，**但不会提供有关通知的信息**。

我相信最后一句话描述了您的情况，并解释了为什么您的应用程序没有收到有关通知的信息。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-31T00:35:16.970

仅当应用程序在前台或应用程序刚刚启动或从后台到前台购买时才调用 didReceiveRemoteNotification

[苹果中的链接](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)和一些[问题](https://stackoverflow.com/questions/5056689/didreceiveremotenotification-when-in-background)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-10T14:16:05.263

方法**didFinishLaunchingWithOptions:(NSDictionary *)launchOptions**参数 launchOptions 字典键之一是***UIApplicationLaunchOptionsRemoteNotificationKey***，它保存按下的推送通知信息。

初始化游览主根控制器后，您可以推送收到的信息。我将它保存到某个属性，然后在视图初始化后将其推送。

```
if (launchOptions) {
    if ([launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey]) {
        self.notificationToMakeAction = [launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];
    }
} 
```

# arrays - 我怎样才能让我的程序找到得分最高的人？

> ID：14616272
> 
> 赞同：0
> 
> 时间：2013-01-31T00:10:15.073
> 
> 标签：arrays, input

程序描述：人们使用 jsliders 输入用户分数，然后在游戏结束时点击 Check Scores 按钮，它会告诉你谁获得了第一、第二、第三等。

我不确定的是如何让程序告诉我得分最高的球员姓名。我把它排序了，它告诉你实际的分数，只是没有名字。

我本质上是在寻找这个：

```
firstplace.setText(firstplacename + " got first place with a score of " + Integer.toString(first)); 
```

编码：

```
/*
 * 要更改此模板，请选择工具 | 模板
 * 并在编辑器中打开模板。
 */
包装怪异；

导入 java.lang.reflect.Array；
导入 java.util.Arrays；

/**
 *
 * @作者安德鲁
 */
公共类 FunglishFrame 扩展 javax.swing.JFrame {

    /**
     * 创建新表单 FunglishFrame
     */
    公共 FunglishFrame() {
        初始化组件（）；
    }

    /**
     * 从构造函数中调用此方法以初始化表单。
     * 警告：请勿修改此代码。这个方法的内容总是
     * 由表单编辑器重新生成。
     */
    @SuppressWarnings("未选中")                     

    私人无效jButton1ActionPerformed（java.awt.event.ActionEvent evt）{                                         
        字符串 player1name = player1.getText();
        jTabbedPane1.setTitleAt(0, player1name);

        字符串 player2name = player2.getText();
        jTabbedPane1.setTitleAt(1, player2name);

        字符串 player3name = player3.getText();
        jTabbedPane1.setTitleAt(2, player3name);

        字符串 player4name = player4.getText();
        jTabbedPane1.setTitleAt(3, player4name);

        字符串 player5name = player5.getText();
        jTabbedPane1.setTitleAt(4, player5name);

        pointsname1.setText(player1name);
        pointsname2.setText(player2name);
        pointsname3.setText(player3name);
        pointsname4.setText(player4name);
        pointsname5.setText(player5name);
        pointsname6.setText(player1name);
        pointsname7.setText(player2name);
        pointsname8.setText(player3name);
        pointsname9.setText(player4name);
        pointsname10.setText(player5name);
        pointsname14.setText(player1name);
        pointsname13.setText(player2name);
        pointsname15.setText(player3name);
        pointsname12.setText(player4name);
        pointsname11.setText(player5name);
        pointsname16.setText(player1name);
        pointsname17.setText(player2name);
        pointsname18.setText(player3name);
        pointsname19.setText(player4name);
        pointsname20.setText(player5name);
        pointsname21.setText(player1name);
        pointsname22.setText(player2name);
        pointsname23.setText(player3name);
        pointsname24.setText(player4name);
        pointsname25.setText(player5name);

    }                                        

    私人无效jSlider15StateChanged（javax.swing.event.ChangeEvent evt）{                                       
        int value15 = jSlider15.getValue();
        slidernumber15.setText(Integer.toString(value15));
    }                                      

    私人无效jSlider14StateChanged（javax.swing.event.ChangeEvent evt）{                                       
        int value14 = jSlider14.getValue();
        slidernumber14.setText(Integer.toString(value14));
    }                                      

    私人无效jSlider13StateChanged（javax.swing.event.ChangeEvent evt）{                                       
        int value13 = jSlider13.getValue();
        slidernumber13.setText(Integer.toString(value13));
    }                                      

    私人无效jSlider12StateChanged（javax.swing.event.ChangeEvent evt）{                                       
        int value12 = jSlider12.getValue();
        slidernumber12.setText(Integer.toString(value12));
    }                                      

    私人无效jSlider11StateChanged（javax.swing.event.ChangeEvent evt）{                                       
        int value11 = jSlider11.getValue();
        slidernumber11.setText(Integer.toString(value11));
    }                                      

    私人无效jSlider5StateChanged（javax.swing.event.ChangeEvent evt）{                                      
        int value5 = jSlider5.getValue();
        slidernumber5.setText(Integer.toString(value5));
    }                                     

    私人无效jSlider4StateChanged（javax.swing.event.ChangeEvent evt）{                                      
        int value4 = jSlider4.getValue();
        slidernumber4.setText(Integer.toString(value4));
    }                                     

    私人无效jSlider3StateChanged（javax.swing.event.ChangeEvent evt）{                                      
        int value3 = jSlider3.getValue();
        slidernumber3.setText(Integer.toString(value3));
    }                                     

    私人无效jSlider2StateChanged（javax.swing.event.ChangeEvent evt）{                                      
        int value2 = jSlider2.getValue();
        slidernumber2.setText(Integer.toString(value2));
    }                                     

    私人无效jSlider1StateChanged（javax.swing.event.ChangeEvent evt）{                                      
        int value1 = jSlider1.getValue();
        slidernumber1.setText(Integer.toString(value1));
    }                                     

    私人无效jSlider6StateChanged（javax.swing.event.ChangeEvent evt）{                                      
        int value6 = jSlider6.getValue();
        slidernumber6.setText(Integer.toString(value6));
    }                                     

    私人无效jSlider7StateChanged（javax.swing.event.ChangeEvent evt）{                                      
        int value7 = jSlider7.getValue();
        slidernumber7.setText(Integer.toString(value7));
    }                                     

    私人无效jSlider8StateChanged（javax.swing.event.ChangeEvent evt）{                                      
        int value8 = jSlider8.getValue();
        slidernumber8.setText(Integer.toString(value8));
    }                                     

    私人无效jSlider9StateChanged（javax.swing.event.ChangeEvent evt）{                                      
        int value9 = jSlider9.getValue();
        slidernumber9.setText(Integer.toString(value9));
    }                                     

    私人无效jSlider10StateChanged（javax.swing.event.ChangeEvent evt）{                                       
        int value10 = jSlider10.getValue();
        slidernumber10.setText(Integer.toString(value10));
    }                                      

    私人无效jSlider16StateChanged（javax.swing.event.ChangeEvent evt）{                                       
        int value16 = jSlider16.getValue();
        slidernumber16.setText(Integer.toString(value16));
    }                                      

    私人无效 jSlider17StateChanged（javax.swing.event.ChangeEvent evt）{                                       
        int value17 = jSlider17.getValue();
        slidernumber17.setText(Integer.toString(value17));
    }                                      

    私人无效jSlider18StateChanged（javax.swing.event.ChangeEvent evt）{                                       
        int value18 = jSlider18.getValue();
        slidernumber18.setText(Integer.toString(value18));
    }                                      

    私人无效jSlider19StateChanged（javax.swing.event.ChangeEvent evt）{                                       
        int value19 = jSlider19.getValue();
        slidernumber19.setText(Integer.toString(value19));
    }                                      

    私人无效jSlider20StateChanged（javax.swing.event.ChangeEvent evt）{                                       
        int value20 = jSlider20.getValue();
        slidernumber20.setText(Integer.toString(value20));
    }                                      

    私人无效jSlider21StateChanged（javax.swing.event.ChangeEvent evt）{                                       
        int value21 = jSlider21.getValue();
        slidernumber21.setText(Integer.toString(value21));
    }                                      

    私人无效jSlider22StateChanged（javax.swing.event.ChangeEvent evt）{                                       
        int value22 = jSlider22.getValue();
        slidernumber22.setText(Integer.toString(value22));
    }                                      

    私人无效jSlider23StateChanged（javax.swing.event.ChangeEvent evt）{                                       
        int value23 = jSlider23.getValue();
        slidernumber23.setText(Integer.toString(value23));
    }                                      

    私人无效jSlider24StateChanged（javax.swing.event.ChangeEvent evt）{                                       
        int value24 = jSlider24.getValue();
        slidernumber24.setText(Integer.toString(value24));
    }                                      

    私人无效jSlider25StateChanged（javax.swing.event.ChangeEvent evt）{                                       
        int value25 = jSlider25.getValue();
        slidernumber25.setText(Integer.toString(value25));
    }                                      

    私人无效jButton2ActionPerformed（java.awt.event.ActionEvent evt）{                                         
        int a1 = jSlider1.getValue();
        int a2 = jSlider6.getValue();
        int a3 = jSlider14.getValue();
        int a4 = jSlider16.getValue();
        int a5 = jSlider21.getValue();

        int b1 = jSlider2.getValue();
        int b2 = jSlider7.getValue();
        int b3 = jSlider13.getValue();
        int b4 = jSlider17.getValue();
        int b5 = jSlider22.getValue();

        int c1 = jSlider3.getValue();
        int c2 = jSlider8.getValue();
        int c3 = jSlider15.getValue();
        int c4 = jSlider18.getValue();
        int c5 = jSlider23.getValue();

        int d1 = jSlider4.getValue();
        int d2 = jSlider9.getValue();
        int d3 = jSlider12.getValue();
        int d4 = jSlider19.getValue();
        int d5 = jSlider24.getValue();

        int e1 = jSlider5.getValue();
        int e2 = jSlider10.getValue();
        int e3 = jSlider11.getValue();
        int e4 = jSlider20.getValue();
        int e5 = jSlider25.getValue();

        int player1score = a1 + a2 + a3 + a4 + a5；
        int player2score = b1 + b2 + b3 + b4 + b5；
        int player3score = c1 + c2 + c3 + c4 + c5;
        int player4score = d1 + d2 + d3 + d4 + d5;
        int player5score = e1 + e2 + e3 + e4 + e5;

        int[] 分数 = {player1score,player2score,player3score,player4score,player5score};  

        Arrays.sort(scores);

        int first = Array.getInt(scores,4);
        int second = Array.getInt(scores,3);
        int 第三 = Array.getInt(scores,2);
        int 第四 = Array.getInt(scores,1);
        int 第五 = Array.getInt(scores,0);

        firstplace.setText(Integer.toString(first));
        secondplace.setText(Integer.toString(second));
        thirdplace.setText(Integer.toString(third));
        Fourthplace.setText(Integer.toString(fourth));
        Fifthplace.setText(Integer.toString(fifth));
    }                                        

    // 变量声明 - 不要修改                     
    私有 javax.swing.JLabel 第五名；
    私有 javax.swing.JLabel 第一名；
    私有 javax.swing.JLabel 第四名；
    私有 javax.swing.JButton jButton1;
    私有 javax.swing.JButton jButton2;
    私有 javax.swing.JLabel jLabel1;
    私有 javax.swing.JPanel jPanel1;
    私有 javax.swing.JPanel jPanel2;
    私有 javax.swing.JPanel jPanel3;
    私有 javax.swing.JPanel jPanel4;
    私有 javax.swing.JPanel jPanel5;
    私有 javax.swing.JPanel jPanel6;
    私有 javax.swing.JSlider jSlider1;
    私有 javax.swing.JSlider jSlider10;
    私有 javax.swing.JSlider jSlider11;
    私有 javax.swing.JSlider jSlider12;
    私有 javax.swing.JSlider jSlider13;
    私有 javax.swing.JSlider jSlider14;
    私有 javax.swing.JSlider jSlider15;
    私有 javax.swing.JSlider jSlider16;
    私有 javax.swing.JSlider jSlider17;
    私有 javax.swing.JSlider jSlider18;
    私有 javax.swing.JSlider jSlider19;
    私有 javax.swing.JSlider jSlider2;
    私有 javax.swing.JSlider jSlider20;
    私有 javax.swing.JSlider jSlider21;
    私有 javax.swing.JSlider jSlider22;
    私有 javax.swing.JSlider jSlider23;
    私有 javax.swing.JSlider jSlider24;
    私有 javax.swing.JSlider jSlider25;
    私有 javax.swing.JSlider jSlider3;
    私有 javax.swing.JSlider jSlider4;
    私有 javax.swing.JSlider jSlider5;
    私有 javax.swing.JSlider jSlider6;
    私有 javax.swing.JSlider jSlider7;
    私有 javax.swing.JSlider jSlider8;
    私有 javax.swing.JSlider jSlider9;
    私有 javax.swing.JTabbedPane jTabbedPane1;
    私有 javax.swing.JTextField player1;
    私有 javax.swing.JTextField player2;
    私有 javax.swing.JTextField player3;
    私有 javax.swing.JTextField player4;
    私有 javax.swing.JTextField player5;
    私有 javax.swing.JLabel 点名1；
    私有 javax.swing.JLabel pointsname10;
    私有 javax.swing.JLabel pointsname11;
    私有 javax.swing.JLabel pointsname12;
    私有 javax.swing.JLabel pointsname13;
    私有 javax.swing.JLabel pointsname14;
    私有 javax.swing.JLabel pointsname15;
    私有 javax.swing.JLabel pointsname16;
    私有 javax.swing.JLabel pointsname17;
    私有 javax.swing.JLabel pointsname18;
    私有 javax.swing.JLabel pointsname19;
    私有 javax.swing.JLabel 点名2；
    私有 javax.swing.JLabel 点名20；
    私有 javax.swing.JLabel 点名21；
    私有 javax.swing.JLabel pointsname22;
    私有 javax.swing.JLabel pointsname23;
    私有 javax.swing.JLabel pointsname24;
    私有 javax.swing.JLabel pointsname25;
    私有 javax.swing.JLabel 点名3；
    私有 javax.swing.JLabel 点名4；
    私有 javax.swing.JLabel 点名5；
    私有 javax.swing.JLabel 点名6；
    私有 javax.swing.JLabel 点名7；
    私有 javax.swing.JLabel 点名8；
    私有 javax.swing.JLabel pointsname9;
    私有 javax.swing.JLabel 第二名；
    私有 javax.swing.JLabel 滑块编号1；
    私有 javax.swing.JLabel 滑块编号 10；
    私有 javax.swing.JLabel 滑块编号 11；
    私有 javax.swing.JLabel 滑块编号 12；
    私有 javax.swing.JLabel 滑块编号 13；
    私有 javax.swing.JLabel 滑块编号 14；
    私有 javax.swing.JLabel 滑块编号 15；
    私有 javax.swing.JLabel 滑块编号 16；
    私有 javax.swing.JLabel 滑块编号17；
    私有 javax.swing.JLabel 滑块编号18；
    私有 javax.swing.JLabel 滑块编号 19；
    私有 javax.swing.JLabel 滑块编号2；
    私有 javax.swing.JLabel 滑块编号20；
    私有 javax.swing.JLabel 滑块编号 21；
    私有 javax.swing.JLabel 滑块编号22；
    私有 javax.swing.JLabel 滑块编号23；
    私有 javax.swing.JLabel 滑块编号 24；
    私有 javax.swing.JLabel 滑块编号 25；
    私有 javax.swing.JLabel 滑块编号3；
    私有 javax.swing.JLabel 滑块编号4；
    私有 javax.swing.JLabel 滑块编号5；
    私有 javax.swing.JLabel 滑块编号6；
    私有 javax.swing.JLabel 滑块编号7；
    私有 javax.swing.JLabel 滑块编号8；
    私有 javax.swing.JLabel 滑块编号9；
    私有 javax.swing.JLabel 第三名；
    // 变量声明结束                   
}

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:17:18.827

也许考虑通过覆盖比较方法来对分数进行排序，以获得最高分数到列表的顶部。我在这方面的知识是有限的，但这可能会有所帮助。

# objective-c - XML 同步解析

> ID：14616275
> 
> 赞同：0
> 
> 时间：2013-01-31T00:10:30.633
> 
> 标签：objective-c, xml, synchronous

出于某种原因，我对如何让我的 XML Parser 在应用程序首次启动时解析文档然后初始化一个数组，该数组将随时准备好在我的应用程序中的另一个类上获取有点困惑。因此，假设在第一个 ViewController 中我们调用我的 XML 解析类，它解析 XML 并将所有内容打包到一个数组中。然后，如何在不调用 XML 解析类的情况下随时将该数组提供给另一个类？
有任何想法吗？
PS：
我知道这是一个愚蠢而无知的问题。我知道可能有类似的东西，但我想确保我学会了做这种事情的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:34:15.787

**将一个数组从一个类传递到另一个类有很多方法**。我在下面解释了一种简单的方法。希望对您有所帮助。

在您的应用委托文件中声明一个 NSMutableArray 变量。

//在 appdelegate.h 文件中

```
NSMutableArray *arrDataArray; 
```

//现在为它声明属性

```
@property (nonatomic,strong)NSMutableArray *arrDataArray; 
```

//在appdelegate .m 文件中合成数组实例

```
@synthesize arrDataArray; 
```

//现在在您正在执行解析的视图控制器中，声明应用程序委托文件的共享实例，如下所示

```
AppDelegate *objAppDel = (AppDelegate*)[[UIApplication sharedApplication] delegate]; 
```

现在将解析结果保存在 arrDataArray 中。所以 objAppDel.arrDataArray 保存您的解析结果。如果您想访问其他 viewcontroller 类中的 arrDataArray，请再次声明 appdelegate 文件的共享实例并将 arrDataArray 访问为 objAppDel.arrDataArray。

# javascript - IE 中的 Javascript 2d 绘图

> ID：14616280
> 
> 赞同：0
> 
> 时间：2013-01-31T00:11:27.560
> 
> 标签：javascript, 2d

单击时，我需要用某些颜色填充多边形。在背景图像上绘制多边形。我正在使用地图和区域标签来检测对多边形的点击，然后使用*moveTo()*、*lineTo()*、*closePath()*和*fill()*在顶部绘制填充多边形。IE7、IE8、IE9可以使用上面提到的javascript绘图功能吗？代码在 Firefox 和 chrome 中运行良好，但在 IE 中不起作用。

使用画布元素是使用 javascript 绘制的唯一可能方式吗？我的意思是核心 javascript，不使用第三方库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:47:00.247

[RaphaelJS](http://raphaeljs.com)是一个用于处理 SVG 元素的库。这很棒，因为它

1.  使用 VML 为旧版浏览器提供支持
2.  有一个易于使用、有据可查的 API 用于创建和动画 SVG 元素
3.  具有事件的包装功能，因此很容易实现您正在谈论的onclick事件

# android - “？”是什么意思？在 android 样式声明中的意思

> ID：14616281
> 
> 赞同：2
> 
> 时间：2013-01-31T00:11:28.450
> 
> 标签：android, android-styles

> **可能重复：**
> [Android 的 XML 属性中的问号 (?)](https://stackoverflow.com/questions/2733907/question-mark-in-xml-attributes-for-android)

`?`我在 android 风格的声明中见过。例如...

```
 <Button
     android:id="@+id/gems_button"
     style="?buttonBarButtonStyle"
     android:layout_width="0dp"
     android:layout_height="wrap_content"
     android:layout_weight="1"
     android:text="@string/gems_button" /> 
```

`?`行中的意思是什么`style="?buttonBarButtonStyle"`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T00:15:51.770

它是[对样式属性的引用](http://developer.android.com/guide/topics/resources/accessing-resources.html#ReferencesToThemeAttributes)

> 样式属性资源允许您引用当前应用主题中的属性值。

# xcode - 为 UIButton 设置图像

> ID：14616286
> 
> 赞同：2
> 
> 时间：2013-01-31T00:11:40.343
> 
> 标签：xcode, uibutton, uiimage

我想在我的 xcode 项目中添加一个图像按钮。我使用界面生成器添加了一个圆形矩形按钮。

在我的 .h 文件中：

```
@property (nonatomic, retain) IBOutlet UIButton *infobutton; 
```

在我的 .m 文件中：

```
@synthesize infobutton;

-viewDidLoad{
infobutton = [[UIButton buttonWithType:UIButtonTypeCustom] retain];
UIImage* infobuttonImg =[UIImage imageNamed:@"info.png"];    
[infobutton setImage:infobuttonImg forState:UIControlStateNormal];
[infobuttonImg release];
} 
```

最后，我在界面构建器中添加了一个链接，将圆形矩形按钮链接到信息按钮。但是，当我运行模拟器时，我的界面上仍然有普通的圆形矩形按钮，而不是让按钮显示为我设置的图像。我想知道我的代码中是否遗漏了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:20:38.250

infoButton 应该已经在 viewDidLoad 中填充了一个按钮。在您的代码中，您正在覆盖它。

考虑删除这一行：

```
infobutton = [[UIButton buttonWithType:UIButtonTypeCustom] retain]; 
```

此外， infobuttonImg 是自动释放的，这意味着不需要此行：

```
[infobuttonImg release]; 
```

# xslt - 使用 XSLT 转换时从字符串中删除部分字符串

> ID：14616287
> 
> 赞同：0
> 
> 时间：2013-01-31T00:11:50.450
> 
> 标签：xslt

我想知道从一个 XML 转换为另一个 XML 时如何从字符串中删除部分字符串。

例如，假设我的源 XML 具有：

```
<element id="#yo"> 
```

但是，翻译后我希望这是

```
<element id="yo"> 
```

我可以在 XSLT 中轻松做到这一点吗？让我知道谢谢

另外，我可以反过来吗？哟到#yo

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:51:14.387

```
<xsl:template match="element[starts-with(@id,'#')]">
<element id="{substring(@id,2)}">
  <xsl:apply-templates/>
</element>
</xsl:template> 
```

反过来

```
<xsl:template match="element">
<element id="#{@id}">
  <xsl:apply-templates/>
</element>
</xsl:template> 
```

# c++ - 从文件输入中查找双精度数组的平均值

> ID：14616288
> 
> 赞同：-1
> 
> 时间：2013-01-31T00:11:56.450
> 
> 标签：c++, arrays, file-io, double, average

到目前为止，我试图找到一种方法来获得这个数组的平均值的尝试都没有结果。任何帮助，将不胜感激。

```
#include <iostream>
#include <algorithm>
#include <numeric>
#include <vector>
#include <iterator>
#include <string>
#include <iostream>
#include <fstream>
using namespace std;
int main( )
{
    const int MAX = 100;
    double voltages[MAX];
    double average;
    ifstream thefile("c:\\voltages.txt");
        if(!thefile) 
    {
                cout<<"Error opening file"<<endl;
                system("pause");
                exit(1);
    }
        for(int count = 0; count < MAX; count++)
    {
                thefile >> voltages[count];
                cout << voltages[count++] << endl;
                average = voltages[count++]/count;
        if(count == 0 || thefile.eof())
    {
                break;
    }
    }
    cout << average;
    cout << "\n";
    system("PAUSE");
    return 0;
} 
```

电压文件是

100.8

120.4

121.4

111.9

123.4

但最多可以有 100 个双打。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:27:46.847

最好有一个带有运行总数的双精度数，然后是一个计数器，然后对平均值进行 TOTAL/COUNT。不需要向量和所有这些。

PS：对 fstream 使用 .get() 而不是 .eof() 是一个更好的主意，因为有时文本编辑器会在末尾添加一个 '\n' 字符（给你一个空字符串额外的迭代和可能的错误）。

对于数组和类似的东西，在 [ ] 内增加通常也是一个坏主意。最好在括号外使用 [count+1] 和/或递增计数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T00:26:14.480

要计算存储在*任何*C++ 容器（甚至是原始数组）中的数字的平均值，请使用以下方法。求和除以元素的数量：

```
std::accumulate(std::begin(v), std::end(v), 0.0) / (std::end(v) - std::begin(v)); 
```

示例代码在行动：

[使用 std::vector](http://ideone.com/Dj41ni) / [使用原始数组](http://ideone.com/nyO6Zt)（请注意，只有向量 / 数组的定义会改变！）

此代码不检查零长度，这会产生除以零。这将返回一个`NaN`值。这种情况可以通过使用提前发现`if (std::begin(v) == std::end(v))`。如果您不想退货，可以根据需要处理此类极端情况`NaN`：

*   返回一个明确定义的值，例如`0.0`
*   抛出异常
*   打印警告并退出（本质上与异常相同但不能被捕获）
*   自定义错误处理，例如将布尔错误变量设置为 true

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T00:22:51.153

对平均值使用递归定义：

```
avg_n= ((n-1)* avg_n_1 + val) / n; 
```

val 是第 n 个数据的值。
avg_n 是当前平均值
avg_n_1 是前一次迭代的平均值（n-1 个值的平均值）

最后是循环中的最后一条语句：

```
avg_n_1 = avg_n; 
```

这样您就可以计算平均值，而无需事先知道您将读取多少个值。

# jquery - 为什么这不适用于 jQuery 1.9？

> ID：14616294
> 
> 赞同：1
> 
> 时间：2013-01-31T00:12:20.780
> 
> 标签：jquery

所以，我写了一点 jquery 来切换我的 web 应用程序的侧边栏，它在 jQuery 1.8 中工作得很好，但是一旦我升级到 1.9，它就坏了。这是代码：

```
$('a#sidebar-act').toggle(function() {
    $('div#sidebar').animate({width:260}, 200);
}, function() {
    $('div#sidebar').animate({width:64}, 200);
}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T00:14:00.857

`toggle`该方法的此功能[已被删除](http://jquery.com/upgrade-guide/1.9/#toggle-function-function-removed)。您必须自己跟踪切换：

```
var alternateMethod = false;

$('a#sidebar-act').click(function() {

    $('div#sidebar').animate({
        width: alternateMethod ? 64 : 260
    }, 200);

    alternateMethod = ! alternateMethod;
}); 
```

# ruby-on-rails - 错误没有路由与控制器匹配并且操作更正

> ID：14616296
> 
> 赞同：1
> 
> 时间：2013-01-31T00:12:29.927
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我想做一个简单的提交，理想情况下没有路线，将样本插入数据库，但我遇到了一些麻烦。

这是金融指数：

### index.html.erb(财务路径)

```
<%= form_for(@place,:url => new_place_finance_path,:method => :put) do |f| %>

  <%= f.text_field :place %>
  <%= f.submit %>
<% end %> 
```

如果可能的话我不想创建一个成员，我如何在路线中制作：

```
resources :finances do
  member do
    put :new_place
  end
end 
```

和我的财务总监：

```
def index
  @finances = Finance.all
  respond_with @finances
  @place = Place.new
end 
```

和行动 new_place：

```
def new_place
  @place = Place.create(params[:place])
  @place.save
  if @place.save
    redirect_to finances_path,:notice => 'Lugar criado com sucesso.'
  else
    redirect_to finances_path,:notice => 'Falha ao criar lugar.'
  end 
end 
```

我收到此错误：

```
No route matches {:action=>"new_place", :controller=>"finances", :id=>nil} 
```

当我执行 rake 路由时：

```
new_place_finance PUT    /finances/:id/new_place(.:format) finances#new_place 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:50:18.920

你这里有一些不寻常的东西。如果你想创建一个新的地方，你通常会在路线中这样做。如果金融可以有很多地方，那就是这样……

```
resources :finances do
  resources :places
end 
```

这将创建一个名为 new_finance_place(@finance) 的方法，它将带您进入新表单。它将创建另一个指向 /finances/:finance_id/posts 的 URL，该 URL 将需要一个 POST - 它会调用 PostsController 中的 create 方法。

在新表格中，您将能够编写：

```
<%= form_for [@finance, @place] do |f| %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T00:50:47.133

`new_place_finance_path`需要一个财务对象才能被正确评估。在您上面粘贴的路线中

```
 new_place_finance PUT    /finances/:id/new_place(.:format) finances#new_place 
```

所以`new_place_finance_path(@finance)`将替换`:id`为@finance.id（或者`to_param`如果您在模型中创建了该方法）

# postgresql - PostgreSQL 命令显示实体关系

> ID：14616297
> 
> 赞同：1
> 
> 时间：2013-01-31T00:12:34.600
> 
> 标签：postgresql, psql

一开始我想指出我不是而且我从来都不是数据库管理员。我有经验和知识`PL/SQL`，`SQL`但到目前为止，我接触的每个数据库最多有 50 个表，即使我手动创建实体之间的关系也并不难。

现在问题来了，当我有`database`超过 300 个表时，查找实体之间的关系并不容易。
让我们想象一下表格：

```
table person (
id serial PRIMARY KEY NOT NULL,
name varchar(45)
) 
```

我自动有序列：

```
person_id_seq 
```

你能告诉我是否有任何命令返回我正在使用的表`person_id_seq`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T00:22:04.847

见[pg_depend](http://www.postgresql.org/docs/current/static/catalog-pg-depend.html)。

```
select *, pg_describe_object(classid, objid, objsubid)
from pg_depend 
where refobjid = 'person_id_seq'::regclass 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T00:38:34.400

克林的回答 - 使用`pg_depend`是完全明智的，并且是一种理智的方式来做到这一点。

我强烈建议您尝试使用像[SchemaSpy](http://schemaspy.sourceforge.net/)这样的工具来生成数据库地图和可视化。这将有很大帮助，并让您有机会了解这些关系，而不仅仅是逐个探索它们。

如果您需要使您的查询可移植，那么您可以使用`information_schema`PostgreSQL 特定的目录表来代替。[此查询](https://stackoverflow.com/a/3907999/398670)可移植地生成外键关系列表 - 该查询是为 MS SQL Server 编写的，但在 PostgreSQL 上很好。

# java - 在多个 JFrame 中包含一个 JPanel

> ID：14616298
> 
> 赞同：1
> 
> 时间：2013-01-31T00:12:39.123
> 
> 标签：java, swing, jframe, jpanel

我在 Java SWING 开发和尝试简化程序更新方面有相当多的经验。我有一个基本菜单（一组 JButtons），我想在显示的每个窗口（JFrame）的顶部，而不是试图在每个单独的 Frame 上维护这些按钮，我想知道是否可以创建一个 JPanel 并“导入" 将它放入多个 JFrame 中，类似于在 php 中“包含”的方式（不好的例子，但我能想到的最好的例子）

*在第一次回复的建议后添加*

我目前在我的框架上有一个名为 topPanel 的 JPanel，为此我有： `topMenuPane = new menuPanel();` 其中 menuPanel 是一个扩展 JPanel 的类，但是 menuPanel 类中的按钮和值没有显示在 JFrame 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:48:32.563

你可以...

扩展`JFrame`并创建所有应用程序必须使用的基础框架。

**对于**- 易于维护；集中实施；其他开发人员不需要记住进行“设置”

**反对**- 与实现紧密耦合，可能不容易为其他开发人员扩展（可能需要使用 API）。

* * *

使用“WindowFactory”生成`JFrame`所有应用程序用来生成基本框架的内容。

**对于**- 易于维护；集中实施；其他开发人员不需要记住进行“设置”

**反对**——其他开发者仍有可能“选择”不使用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T00:14:52.180

我会创建一个 JPanel 的子类来创建 JButton。然后，您可以创建此子类的实例以添加到您希望的任何 JFrame（或任何其他容器）。

# javascript - jQuery 使用 .on() 和 .each()

> ID：14616304
> 
> 赞同：0
> 
> 时间：2013-01-31T00:13:00.497
> 
> 标签：javascript, jquery

我正在尝试使任何带有“RW”字符串的 TD 单元格都具有红色类。我需要使用 .on 因为网格有分页并重新加载新内容。我还需要使用每一个，因为可能有多个包含该字符串的 TD 单元格。

```
 $("#json-table").on("tbody tr td"){
 if ($(this).text() == 'RW').each({
 $(this).addClass('red'))}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:15:21.393

如果您不关心 中是否存在其他字符`td`，则可以使用选择器更直接地过滤到正确的单元格`:contains`：

```
$('#element_id').on('click', function() {
    $('#json-table td:contains("RW")').addClass('red');
}); 
```

`element_id`您要分配单击事件处理程序的元素的 ID 在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T00:25:17.257

你会想用[`.filter()`](http://api.jquery.com/filter/)这里来缩小你的集合，但没有更多信息，我们不能说从*哪里*调用它。请记住 jQuery 函数在整个集合上运行，这就是您想要的：

```
$("#json-table tbody tr td").filter(function() {
  return $(this).text() == 'RW';
}).addClass('red'); 
```

...你需要用你的分页代码来调用它。

编辑：因为您似乎正在使用 datatables.net，所以更完整的示例是：

```
$('#json-table').bind('sort filter page', function () {
  $("tbody tr td", this).filter(function() {
    return $(this).text() == 'RW';
  }).addClass('red');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T00:19:56.473

**.on()** 和**.each()**完全不同。**.on()** `is used to attach an event`其中**.each()** `is used to iterate over objects or arrays.`

试试这个

```
$("#json-table tbody tr td").each(function(){
       var $this = $(this);
    if($this.text().indexOf('RW') > -1)){
        $this.addClass('red');
    }|
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T00:23:01.827

[`.on`](http://api.jquery.com/on)用于处理元素触发的事件。查看文档以了解正确的用法。假设您要处理单击事件，语法如下所示。您提到该事件将被委派，因此您的使用必须与此签名匹配。

```
$("#json-table").on('click', "tbody tr td", function() {
    if ( $(this).text() == 'RW') ) {
        $(this).addClass('red');
    }
}); 
```

请注意，按原样，您`.each`被链接到`if`无效的 JS 语句。`this`已经引用了`<td>`您定位的正确元素。

# c# - 如何获取您的 PING 并将其贴在标签上

> ID：14616306
> 
> 赞同：4
> 
> 时间：2013-01-31T00:13:15.670
> 
> 标签：c#, winforms, ping

我试图找到如何获取我的 ping 并找到以下代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net;
using System.Net.NetworkInformation;
using System.IO;
using System.Configuration;
using System.Web;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            try
            {
                Ping ping = new Ping();
                PingReply pingreply = ping.Send("www.google.com");
                StreamWriter sw = new StreamWriter(@"C:\ping.txt");
                StringBuilder sb = new StringBuilder();
                sb.Append("Address: " + pingreply.Address + "\r\n");
                sb.Append("Roundtrip Time: " + pingreply.RoundtripTime + "\r\n");
                sb.Append("TTL (Time To Live): " + pingreply.Options.Ttl + "\r\n");
                sb.Append("Buffer Size: " + pingreply.Buffer.Length.ToString() + "\r\n");
                sb.Append("Time : " + DateTime.Now + "\r\n");
                sw.Write(sb.ToString());
                sw.Close();
            }
            catch (Exception err)
            {
            }
        }
    }
} 
```

我试图做这样的事情：

```
label1.Text = pingreply.Buffer.Length.ToString(); 
```

但它无法获得 ping，我无法弄清楚如何在标签上获得它，有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T00:18:27.790

您正在捕获所有错误并忽略它们..可能是由于您尝试将其写入文件所致。

只需这样做：

```
label1.Text = new Ping().Send("www.google.com").RoundtripTime.ToString() + "ms"; 
```

或者，正确处理（感谢@Ichabod Clay）

```
using (Ping p = new Ping()) {
    label1.Text = p.Send("www.google.com").RoundtripTime.ToString() + "ms";
} 
```

# shell - 清除可选参数并将其传递给 shell 脚本

> ID：14616310
> 
> 赞同：1
> 
> 时间：2013-01-31T00:13:24.487
> 
> 标签：shell, unix

我正在尝试从 shell 脚本执行 cpp 二进制文件。cpp 接受参数，其中一些是可选的。

所以基本上我想做的是生成适当的字符串，然后执行该字符串，例如：

```
generate_string()
{
    string="$path/to/binary"
    param1=$1
    param2=$2
    generated_string="$string $param1 --param2=$param2"
    echo $generated_string
}

#  execution function
execute()
{
    read -p 'param1: ' param2
    read -p 'param2: ' param2
    echo 'optional arguments'
    *read -p "param3: " param3   
    read  -p "param4: " param4*
    string=$(generate_string $param1 $param2 ???????)
    eval $string
} 
```

现在在这个函数中.. param3 和 param4 中的一个或两个都可以是空白我想要的是如果它是空白的，那么我当然不会在字符串中生成它。

但我觉得它太乱了，没有 if 语句..

有没有办法优雅地解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:35:51.653

这应该工作先生

```
#!/bin/sh

usage ()
{
  echo usage: $0 PARAM1 PARAM2 [PARAM3] [PARAM4]
  exit
}

[ $2 ] || usage
eval "path/to/binary" "$@" 
```

# javascript - apply() 不适用于 Node.js eventemitter 的 emit() 函数

> ID：14616311
> 
> 赞同：3
> 
> 时间：2013-01-31T00:13:26.557
> 
> 标签：javascript, node.js

apply() 方法不适用于 Node 的 eventemitter`emit`函数。

我执行这两条语句：

```
this._baseEmitter.emit('activity', {test: 'zever1'});

this._baseEmitter.emit.apply(this, ['activity', {test: 'zever2'}]); 
```

第一个运行良好，事件被我的听众捕获。

然而，第二个完全没有做任何事情。

有谁知道为什么？emit() 函数是否可能缺少 apply 方法？如果是这样，我想我会收到一些错误消息，但事实并非如此。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-31T00:15:37.790

第一个参数不应该是 this._baseEmitter 吗？

```
this._baseEmitter.emit.apply(this._baseEmitter, ['activity', {test: 'zever2'}]); 
```

# javascript - JavaScript：如何在最后为所有链接添加 id

> ID：14616317
> 
> 赞同：-1
> 
> 时间：2013-01-31T00:14:10.350
> 
> 标签：javascript, ajax

我有一个具有特定 ID 的输入列表。当我填写它们并按下按钮时，我输入的信息会转移到模板并填写所有特定区域。

这是我最后带有表单输入的一小部分 JavaScript 示例：

```
<input type="text" name="MyID" value="">
function .....
{ id: 'MyID', src: myform.MyID.value }, 
```

然后通过JS：

```
for ( i=0; i< myLinks.length; i++)
    {
        if (template.getElementById(myLinks[i].id)==null)
        {
        continue;
        }
        template.getElementById(myLinks[i].id).href=(myLinks[i].href);
    } 
```

然后它填充具有相同 id 的特定 div 或 span。

问题：我需要再添加一个输入，其中的内容应该出现在我的模板具有的每个 url 的末尾。

示例： id ：在新输入中我输入 ~122

模板：`<a href="Link ' and it adds ' ~122"></a>`

我可以修改这个 template.getElementById(myLinks[i].id).href=(myLinks[i].href); 以某种方式向其中添加一些内容，以便将我的新 id 输入添加到最后的所有链接中？

希望这不会令人困惑，并感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:26:35.460

您可以使用运算符组合字符串，`+`这样您就可以在技术上做到`(myLinks[i].href+"122")`

# html - 有没有办法实现 -ms-word-break: break-all; 到锚标签？

> ID：14616319
> 
> 赞同：1
> 
> 时间：2013-01-31T00:14:14.517
> 
> 标签：html, css

它仅在我用不同的元素包装锚标记时才有效，但我正在阅读 html，所以我想将它添加为整个页面的样式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:09:14.377

我不确定你想在这里实现什么，如果你可以分享一些代码片段会很好。

无论如何，我认为 - 我只是在黑暗中寻找答案 - 你可能会对这里的内联或块显示以及 word-break 属性本身感到困惑。

word-break 属性指定如何在单词中换行，或者是否这样做。假设你有一个段落

标签，这是一个块级元素，你有单词。最终，段落元素达到并克服了它的父元素的宽度 - 比如说 a - 此时段落进入新行。在这里，word-break 属性将指定如何在最后一个单词中呈现此中断。

在您的示例中，锚标记是内联标记，这意味着默认情况下它的宽度将获取其内容的宽度。除非这个词太长以至于它的宽度大于锚标签的父标签，否则我真的不明白这是如何工作的。

给我一些有关您的问题的更多信息并分享您的代码，以便我能够帮助您。

此外，来自[Mozilla 开发者网络](https://developer.mozilla.org/en-US/docs/CSS/word-break "Mozilla 开发者网络")：

> IE8 引入了 -ms-word-break 作为 word-break 的同义词。不要使用 -ms- 前缀。

# mysql - 使用 url 中的密码访问 phpmyadmin

> ID：14616323
> 
> 赞同：0
> 
> 时间：2013-01-31T00:14:37.513
> 
> 标签：mysql, passwords, phpmyadmin, xampp

我使用查询来更新我的密码，在 mySQL（通过 phpMyadmin）上更改了我的数据库的密码。现在我无法通过浏览器访问它。

这是错误消息：

```
MySQL said: Documentation

#1045 - Access denied for user 'root'@'localhost' (using password: NO) 
```

有我可以编辑的配置文件吗？纳克

# list - AppleScript - 比较包含另一个列表的任何部分的作品列表

> ID：14616330
> 
> 赞同：1
> 
> 时间：2013-01-31T00:15:10.900
> 
> 标签：list, applescript, compare

输入：

```
set firstList to {'red ball','blue','yellow'}
set secondList to {'grasshopper','yellowjacket','blueberry','redball'} 
```

输出：

```
{'yellowjacket','blueberry','redball'} 
```

完成这样的事情的最佳方法是什么？基本上我正在寻找每个列表中的项目之间的任何相似之处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:06:00.170

尝试：

```
set matchList to {}
set firstList to {"red ball ", "blue", "yellow"}
set secondList to {"grasshopper", "yellowjacket", "blueberry", "redball"}

repeat with aItem in firstList
    set myTerm to do shell script "echo " & quoted form of aItem & " | sed -E 's/  */ ?/g'"
    repeat with bItem in secondList
        try
            set end of matchList to (do shell script "echo " & quoted form of bItem & " | grep -E " & quoted form of myTerm)
        end try
    end repeat
end repeat

return matchList 
```

编辑

```
 set matchList to {}
set firstList to {"jamesdoe","jackknow","henryrod"}
set secondList to {"James Doe", "Jack Know", "John Matthews"}

set {TID, text item delimiters} to {text item delimiters, {""}}
repeat with aItem in firstList
    set AppleScript's text item delimiters to {""}
    set myTerm to text items of aItem
    set AppleScript's text item delimiters to {" ?"}
    set myTerm to myTerm as text
    repeat with bItem in secondList
        try
            set end of matchList to (do shell script "echo " & quoted form of bItem & " | grep -Ei " & quoted form of myTerm)
        end try
    end repeat
end repeat

set text item delimiters to TID
return matchList 
```

编辑 2

```
set matchList to {}
set firstList to {"jamesdoe", "jackknow", "henryrod"}
set secondList to {"James Doe", "Jack Know", "John Matthews"}

set {TID, text item delimiters} to {text item delimiters, {""}}
repeat with aItem in firstList
    set AppleScript's text item delimiters to {""}
    set myTerm to text items of aItem
    set AppleScript's text item delimiters to {" ?"}
    set myTerm to myTerm as text
    repeat with bItem in secondList
        try
            do shell script "echo " & quoted form of bItem & " | grep -Ei " & quoted form of myTerm
            set end of matchList to (aItem's contents)
            exit repeat
        end try
    end repeat
end repeat

set text item delimiters to TID
return matchList 
```

# php - 使用服务帐户通过 PHP API 访问 BigQuery 时出现“无效凭据”

> ID：14616331
> 
> 赞同：0
> 
> 时间：2013-01-31T00:15:11.670
> 
> 标签：php, google-api, google-bigquery, google-api-php-client

我正在尝试使用服务帐户通过 Google 的 php API 访问 Big Query。

```
<?php

require_once '../google-api-php-client/src/Google_Client.php';
require_once '../google-api-php-client/src/contrib/Google_BigqueryService.php';

define("CLIENT_ID", 'removed-removed.apps.googleusercontent.com');
define("SERVICE_ACCOUNT_NAME", 'removed-removed@developer.gserviceaccount.com');
define("KEY_FILE", '../../../key.p12');

define("PROJECT_ID", removed);

$client = new Google_Client();

$key = file_get_contents(KEY_FILE);

$client->setAssertionCredentials(new Google_AssertionCredentials(
                SERVICE_ACCOUNT_NAME,
                array('https://www.googleapis.com/auth/prediction'),
                $key)
);

$client->setClientId(CLIENT_ID);

// Instantiate a new BigQuery Client 
$service = new Google_BigqueryService($client);

try
{
    $service->tables->listTables(PROJECT_ID, "data");
} catch (Exception $e)
{
    echo $e->getMessage();
}

?> 
```

> 调用 GET [https://www.googleapis.com/bigquery/v2/projects/removed/datasets/data/tables 时](https://www.googleapis.com/bigquery/v2/projects/removed/datasets/data/tables)出错：(401) 凭据无效

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T07:14:41.493

确保您使用的是正确的 OAuth 范围 - 上面代码中的范围适用于 Google Prediction API。用于`https://www.googleapis.com/auth/bigquery`对 BigQuery API 的完全访问权限。在此处详细了解 BigQuery API[授权](https://developers.google.com/bigquery/docs/authorization)。

例子：

```
$client->setAssertionCredentials(new Google_AssertionCredentials(
                SERVICE_ACCOUNT_NAME,
                array('https://www.googleapis.com/auth/bigquery'),
                $key)
); 
```

# javascript - Angular-UI $scope.myMap 未定义

> ID：14616337
> 
> 赞同：0
> 
> 时间：2013-01-31T00:15:45.027
> 
> 标签：javascript, html, angularjs, angular-ui

我正在尝试，`$watch` `myMap`但它永远不会触发。我已经把它缩小到使用过`ui-if`（如果我删除了 ui-if，`$scope.myMap`是正确的谷歌地图对象）。但是我需要保留 ui-if 以便`ui-map`等待我的 AJAX/Db 查询完成。

~~为什么 myMap 没有被添加到范围中（以及如何获得它）？~~

**[普朗克](http://plnkr.co/edit/qs2FaW)**

**编辑**我从[这个 GitHub 问题](https://github.com/angular-ui/angular-ui/issues/266#issuecomment-10463822)中看到 ui-if 创建了自己的范围。那么我如何访问它的范围/`myMap`现在住在哪里？另外，为什么 ui-if 创建一个新的范围？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:17:28.010

您可以指定要存储对象的位置，包括父范围：

```
ui-map="$parent.myMap" 
```

尽管这被认为是半不可靠的（因为任何数量的指令都可能创建额外的范围层）并且您可能需要考虑将其设置为对象的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T01:50:39.033

`GoogleMaps`在控制器上创建模型：

```
$scope.model = {}; 
```

`ui-map`将模型作为对指令的引用传递：

```
ui-map="model.myMap" 
```

注意变化：

```
$scope.$watch('model.myMap', function(map){
    ...
} 
```

这样可以避免在范围`myMap`内创建属性`ui-if`。

另请查看此[文档](http://docs.angularjs.org/guide/scope)以获取有关范围原型继承的更多信息。

# algorithm - 编辑距离复杂度（Levenshtein distance）递归自顶向下实现

> ID：14616339
> 
> 赞同：3
> 
> 时间：2013-01-31T00:16:20.673
> 
> 标签：algorithm, big-o, complexity-theory, levenshtein-distance, edit-distance

我整天都在处理一个我似乎无法解决的问题。任务是证明编辑距离的递归实现具有时间复杂度 Ω(2 ^(max(n,m)) )，其中 n & m 是被测量单词的长度。

该实现类似于这个小的python示例

```
def lev(a, b):
    if("" == a):
       return len(b)   # returns if a is an empty string
    if("" == b):
        return len(a)   # returns if b is an empty string
    return min(lev(a[:-1], b[:-1])+(a[-1] != b[-1]), lev(a[:-1], b)+1, lev(a, b[:-1])+1) 
```

来自：[http ://www.clear.rice.edu/comp130/12spring/editdist/](http://www.clear.rice.edu/comp130/12spring/editdist/)

我尝试为不同的短词绘制递归深度的树，但我找不到树深度和复杂性之间的联系。

我计算的递归公式

```
m = length of word1
n = length of word2
T(m,n) = T(m-1,n-1) + 1 + T(m-1,n) + T(m,n-1)
With the base cases:
T(0,n) = n
T(m,0) = m 
```

但我不知道如何进行，因为每次通话都会导致 3 个新通话，因为长度没有达到 0。

对于如何继续证明下限复杂度为 Ω(2 ^(max(n,m)) ) 的任何提示，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-10T14:27:50.553

你的递归公式：

```
T(m,n) = T(m-1,n-1) + T(m-1,n) + T(m,n-1) + 1
T(0,n) = n
T(m,0) = m 
```

是正确的。

你可以看到，每一个都`T(m,n)`分成三个路径。由于每个节点都运行在`O(1)`我们只需要计算节点。

最短路径的长度为`min(m,n)`，因此树至少有节点。但是有一些路径更长。通过交替减少第一个和第二个字符串，您可以获得最长的路径。这条路径的长度为，因此整棵树最多有节点。`3^(min(m,n))``m+n-1``3^(m+n-1)`

让`m = min(m,n)`. 这棵树还至少包含

![在此处输入图像描述](../Images/fc235ab33ddbf2ba56e13a67140cf7e4.png)

不同的路径，每个可能的减少顺序都有一个`n`。

所以和是下界 和是一个上限。`Ω(2^(max(m,n)))``Ω(3^(min(m,n)))``O(3^(m+n-1))`

# joomla - JToolbar::save() 重定向

> ID：14616341
> 
> 赞同：0
> 
> 时间：2013-01-31T00:16:26.393
> 
> 标签：joomla, joomla2.5, joomla-extensions

我正在阅读 Joomla 2.5 教程来构建自定义组件。现在，我在使用`JToolbar::save()`或就此而言面临重定向`JToolBarHelper::cancel`问题。默认情况下，Joomla 想要重定向到默认布局（从编辑布局）。但是我不希望它这样做。我希望它重定向回另一个视图。在 Joomla 1.5 中，我会通过将功能添加到控制器中来完成此操作 - 类似于

```
function cancel()
{
    //redirects user back to blog homepage with Cancellation Message
    $msg = JText::_( 'COM_BLOG_POST_CANCELLED' );
    $this->setRedirect( 'index.php?option=com_jjblog&view=jjblog', $msg );
} 
```

现在这对于取消功能非常有效，但是对于保存来说，这是一件复杂得多的事情。如果我想覆盖 url，我是否必须将控制器重定向到模型，然后写入模型交互的所有代码？因为这对于像您在 Joomla 1.5 中那样的 url 重定向来说似乎有点过分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T05:32:49.420

希望您已经使用正确的控制器名称添加了保存工具栏代码，如下所示

1.  `JToolBarHelper::save('controllerName.save');`
2.  在适当的控制器中创建保存功能。
3.  在表单中添加任务
4.  最后确保您添加了具有相应组件名称的表单操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T06:38:44.040

你可以试试这个-

在控制器中，首先调用父保存函数而不是重定向到 url。

```
function save(){
 parent::save();        
 $this->setredirect('index.php?option=com_mycomponent');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T19:26:15.687

好的，它根本不需要`$this->setRedirect`。只需要我将值更改为

```
protected $view_list = 'jjBlog'; 
```

然后将所有内容的重定向设置回该列表视图。

源链接在[这里](https://groups.google.com/d/msg/joomla-dev-cms/IN_4eIetdaQ/gkmyAGCIBBsJ)。

感谢所有的回复！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T03:09:16.107

我认为你可以使用

```
global $mainframe;
$mainframe->redirect("index.php?option=com_user&task=activate&activation=".$activation); 
```

如果您在自定义组件中覆盖 joomla 的默认保存功能，例如

```
function save( $task = 'CustomSave', $alt = 'Save' ) // or even same name Save 
```

在您的控制器内部，您可以使用 CustomSave 作为任务并使用 $mainframe 进行重定向。

```
or
$mainframe = &JFactory::getApplication();
$mainframe->redirect("index.php?option=com_user&task=activate&activation=".$activation); 
```

希望这可以帮助你..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T04:06:14.050

视图.html.php

```
protected function addToolbar ()
    {
        JRequest::setVar ('hidemainmenu', false);
        JToolBarHelper::title (JText::_ ('Configuration'), 'configuration.gif');
        JToolBarHelper::save($task = 'save', $alt = 'JTOOLBAR_SAVE');

    } 
```

控制器.php

```
public function save()
    {  
    $mainframe = JFactory::getApplication();
    $mainframe->enqueueMessage (JText::_ ('COM_SOCIALLOGIN_SETTING_SAVED'));    
        $this->setRedirect (JRoute::_ ('index.php', false));
    } 
```

# c++ - 在 C++ 中使用 WebKit QT 的简单网页浏览器的示例代码

> ID：14616342
> 
> 赞同：7
> 
> 时间：2013-01-31T00:16:30.643
> 
> 标签：c++, qt, webkit, qt4, qtwebkit

我从未使用过`Qt`，`WebKit`现在需要使用`Qt WebKit module`. 我要创建的应用程序需要有一个普通窗口，显示通过命令行传入的网页 URL。我已经使用过这种东西，`WebKitGTK`但我不知道从哪里开始`Qt`。

我已经进行了一些研究以了解所涉及的内容，到目前为止，我只能找到与`WebKit` `QWebView`该类有关的代码片段。

那么任何人都可以为我提供仅显示网页的完整示例代码`Qt`吗？一旦我完成了那部分，我将能够继续并从那里扩展并继续了解`Qt`and `WebKit`。

我会提供大量的赏金点以获得一些极好的帮助。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-31T02:31:01.837

您的要求范围仍然不够大。如果您想要显示网页的最简单的完整应用程序示例，代码如下：

```
#include <QtGui>
#include <QtWebKit>

int main(int argc, char** argv) {
    QApplication app(argc, argv);
    QWebView view;
    view.show();
    view.setUrl(QUrl("http://google.com"));
    return app.exec();
} 
```

如果是这样`example.cpp`，您可以使用以下内容`example.pro`：

```
QT += webkit
SOURCES = example.cpp 
```

Qt 开发最简单的方法是使用 Qt Creator，您可以使用 Qt Creator 加载该 .pro 文件，构建应用程序并启动它。只有一个窗口（`QWebView`实例），它将打开谷歌主页。

# android - Android NullPointerException 错误。如何解决？

> ID：14616345
> 
> 赞同：0
> 
> 时间：2013-01-31T00:16:38.380
> 
> 标签：android, nullpointerexception, android-alertdialog

好吧，我创建了一个应用程序，程序中有一个警报对话框。在代码中，它不会显示错误。但是当我运行它时，我看到了这个 Null 指针异常错误。我尝试解决它但仍然无法正常工作。我想要做的是，当用户单击删除按钮时，会出现一个警告对话框，提示“您确定要删除所选项目吗？” 当用户单击“是”时，它将被删除，如果“否”，则不会被删除。

这是我的代码：

主要活动文件：

```
protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.pass_list);
        hideKeyboard();
        initializing();
        show_list_layout();
        Button logout = (Button) findViewById(R.id.button1);
        String username = getIntent().getStringExtra("USERNAME");
        Toast.makeText(PasswordActivity.this,  "Welcome " + username, Toast.LENGTH_LONG).show();
        logout.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                Intent i = new Intent(PasswordActivity.this, LogIn.class);
                startActivityForResult(i,0);
            }
        });

        btn_del.setOnClickListener(this);
    }

    public void btn_addnew_click(View v){
        this.selected_website = null;
        show_add_layout();
    }

    public void btn_back_click(View v){
        this.selected_website = null;
        show_list_layout();
    }

    public void btn_edit_click(View v){
        if(this.selected_website != null){
            show_add_layout();
        }else{
            show_mesg("Please select item to edit.");
        }
    }

    public void btn_add_update_click(View v){
        hideKeyboard();
        String username = getIntent().getStringExtra("USERNAME");
        String str_sitename = this.edt_sitename.getText().toString();
        String str_username = this.edt_username.getText().toString();
        String str_password = this.edt_password.getText().toString();
        if (str_sitename.equals("")){
            //edt_sitename.requestFocus();
            show_mesg("Please insert sitename.");
        }else if (str_username.equals("")){
            //edt_username.requestFocus();
            show_mesg("Please insert username.");
        }else if (str_password.equals("")){
            //edt_password.requestFocus();
            show_mesg("Please insert password.");
        }else{
            if (selected_website!=null){
                selected_website.setUser(username);
                selected_website.setSitename(str_sitename);
                selected_website.setUsername(str_username);
                selected_website.setPassword(str_password);
                datasource.updateWebsite(selected_website);
                show_mesg(str_sitename + " updated.");
                hideKeyboard();
                selected_website = null;
                show_list_layout();
            }else{
                datasource.addWebsite(username, str_sitename,str_username,str_password);
                hideKeyboard();
                show_mesg(str_sitename + " added.");
                selected_website = null;
                show_add_layout();
            }
        }
    }

    public void popUps(){
        if(this.selected_website != null){

            DialogInterface.OnClickListener dialogClickListener = new DialogInterface.OnClickListener() {
                private WebsiteRecords selected_website;

                public void onClick(DialogInterface dialog, int which) {
                    switch (which){
                    case DialogInterface.BUTTON_POSITIVE:
                        datasource.deleteWebsite(this.selected_website);
                        hideKeyboard();
                        show_mesg(this.selected_website.getSitename() + " deleted.");
                        selected_website = null;
                        show_list_layout();

                    case DialogInterface.BUTTON_NEGATIVE:
                        show_mesg("NO");
                        break;
                    }
                }
            };

            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("Are you sure?")
                   .setPositiveButton("Yes", dialogClickListener)
                   .setNegativeButton("No", dialogClickListener)
                   .show();
        }
        else{
                show_mesg("Please select item to delete.");
        }
    }

    /*public void btn_del_click(View v){
         if(this.selected_website != null){
            datasource.deleteWebsite(this.selected_website);
            hideKeyboard();
            show_mesg(this.selected_website.getSitename() + " deleted.");
            selected_website = null;
            show_list_layout();
        }else{
            show_mesg("Please select item to delete.");
        }
        DialogInterface.OnClickListener dialogClickListener = new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                switch (which){
                case DialogInterface.BUTTON_POSITIVE:
                    show_mesg("YES");
                    break;

                case DialogInterface.BUTTON_NEGATIVE:
                    show_mesg("NO");
                    break;
                }
            }
        };

        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setMessage("Are you sure?").setPositiveButton("Yes", dialogClickListener);
    }*/
    public class select_item_click implements OnClickListener{
        private RadioButton rdb_select_item;
        private WebsiteRecords website;
        select_item_click(RadioButton rdb_select_item,WebsiteRecords website){
            this.rdb_select_item = rdb_select_item;
            this.website = website;
        }

        @Override
        public void onClick(View v) {
            for (int i = 0 ; i< all_radiobutton.size();i++){
                RadioButton rdb_select_item = all_radiobutton.get(i);
                rdb_select_item.setChecked(false);
            }

            selected_website = this.website;
            this.rdb_select_item.setChecked(true);

        }

    }
    public void hideKeyboard(){
        this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);
    }

    public void show_add_layout(){
        hideKeyboard();
        LinearLayout layout_list = (LinearLayout)findViewById(R.id.layout_list);
        LinearLayout layout_add = (LinearLayout)findViewById(R.id.layout_add_edit);
        layout_list.setVisibility(View.GONE);
        layout_add.setVisibility(View.VISIBLE);
        if (selected_website != null){
            this.edt_sitename.setText(selected_website.getSitename());
            this.edt_username.setText(selected_website.getUsername());
            this.edt_password.setText(selected_website.getPassword());
            this.btn_add.setText("Update");
        }else{
            this.edt_sitename.setText("");
            this.edt_username.setText("");
            this.edt_password.setText("");
            this.edt_sitename.requestFocus();
            this.btn_add.setText("Add");
        }
    }
    public void show_mesg(String msg){
        Toast.makeText(getApplicationContext(),msg,Toast.LENGTH_SHORT).show();
    }

    public void show_list_layout(){
        hideKeyboard();
        LinearLayout layout_list = (LinearLayout)findViewById(R.id.layout_list);
        LinearLayout layout_add = (LinearLayout)findViewById(R.id.layout_add_edit);
        layout_list.setVisibility(View.VISIBLE);
        layout_add.setVisibility(View.GONE);

        this.tmp_websites = datasource.getAllWebsite(getIntent().getStringExtra("USERNAME"));
        Log.i("algo","Cantid ad de web sites "+this.tmp_websites.size());
        this.all_radiobutton.clear();
        ListView showlist = (ListView) findViewById(R.id.ListWebsite);
        showlist.removeAllViewsInLayout();
        showlist.setAdapter(new WebsiteItemAdapter(this, android.R.layout.simple_list_item_checked, this.tmp_websites));
    }

    public class WebsiteItemAdapter extends ArrayAdapter<WebsiteRecords> {
        private List<WebsiteRecords> websites;
        public WebsiteItemAdapter(Context context, int textViewResourceId, List<WebsiteRecords> websites) {
            super(context, textViewResourceId, websites);
            this.websites = websites;
        }
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View view = convertView;
            hideKeyboard();
            WebsiteRecords website = websites.get(position);
            if (website != null) {
                LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                view = vi.inflate(R.layout.listview, null);
                hideKeyboard();
                RadioButton rdb_select_item =(RadioButton) view.findViewById(R.id.rdb_select_item);
                LinearLayout layout_item = (LinearLayout) view.findViewById(R.id.layout_item);
                TextView tv_sitename = (TextView) view.findViewById(R.id.website);
                TextView tv_username = (TextView) view.findViewById(R.id.username);
                TextView tv_password = (TextView) view.findViewById(R.id.password);
                tv_sitename.setText(website.getSitename());
                tv_username.setText("Username  : " + website.getUsername() );
                tv_password.setText("Password : " + website.getPassword());

                if(selected_website != null){
                    if (selected_website.getId() == website.getId()) rdb_select_item.setChecked(true);
                }

                all_radiobutton.add(rdb_select_item);
                rdb_select_item.setOnClickListener(new select_item_click(rdb_select_item,website));
                layout_item.setOnClickListener(new select_item_click(rdb_select_item,website));
            }
            return view;
        }
    }
    @Override
    protected void onResume() {
        datasource.open();
        super.onResume();
    }
    @Override
    protected void onPause() {
        datasource.close();
        super.onPause();
    }

    @Override
    public void onClick(View v) {
        if(v == btn_del) {
            if(this.selected_website != null){
            DialogInterface.OnClickListener dialogClickListener = new DialogInterface.OnClickListener() {
                private WebsiteRecords selected_website;
                public void onClick(DialogInterface dialog, int which) {
                    switch (which){
                    case DialogInterface.BUTTON_POSITIVE:
                        datasource.deleteWebsite(this.selected_website);
                        hideKeyboard();
                        show_mesg(this.selected_website.getSitename() + " deleted.");
                        selected_website = null;
                        show_list_layout();
                    case DialogInterface.BUTTON_NEGATIVE:
                        show_mesg("NO");
                        break;
                    }
                }
            };
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("Are you sure?")
                   .setPositiveButton("Yes", dialogClickListener)
                   .setNegativeButton("NO", dialogClickListener)
                   .show();
            show_mesg("PASSED");
        }
        else{
                show_mesg("Please select item to delete.");
            }
        }
    }
} 
```

我的数据源文件：

```
public class DataSource {

    private SQLiteDatabase database;
    private MySQLiteHelper dbHelper;
    private String[] allColumns = { 
                MySQLiteHelper.COLUMN_ID,
                MySQLiteHelper.COLUMN_USER,
                MySQLiteHelper.COLUMN_URL,
                MySQLiteHelper.COLUMN_USERNAME,
                MySQLiteHelper.COLUMN_PASSWORD
            };

    public DataSource(Context context) {
        dbHelper = new MySQLiteHelper(context);
    }

    public void open() throws SQLException {
        database = dbHelper.getWritableDatabase();
    }

    public void close() {
        dbHelper.close();
    }

    public void addWebsite(String user, String sitename, String username, String password) {

        ContentValues values = new ContentValues();
        values.put(MySQLiteHelper.COLUMN_USER,  user);
        values.put(MySQLiteHelper.COLUMN_URL, sitename);
        values.put(MySQLiteHelper.COLUMN_USERNAME, username);
        values.put(MySQLiteHelper.COLUMN_PASSWORD, password);
        database.insert(MySQLiteHelper.TABLE_URL, null,values);
    }

public void updateWebsite(WebsiteRecords website){

        ContentValues values = new ContentValues();
        values.put(MySQLiteHelper.COLUMN_URL, website.getSitename());
        values.put(MySQLiteHelper.COLUMN_USERNAME, website.getUsername());
        values.put(MySQLiteHelper.COLUMN_PASSWORD, website.getPassword());
        database.update(MySQLiteHelper.TABLE_URL, values, MySQLiteHelper.COLUMN_ID  + " = " + website.getId(), null);
    }

public void deleteWebsite(WebsiteRecords website) {
    database.delete(MySQLiteHelper.TABLE_URL, MySQLiteHelper.COLUMN_ID  + " = " + website.getId(), null);

}

public List<WebsiteRecords> getAllWebsite(String user){

    List<WebsiteRecords> websites = new ArrayList<WebsiteRecords>();
    Cursor cursor = database.rawQuery("SELECT * FROM " + MySQLiteHelper.TABLE_URL + " WHERE user='" + user+"'", null);
    cursor.moveToFirst();

    while (!cursor.isAfterLast()) {
        WebsiteRecords website = cursorToWebsite(cursor);
        websites.add(website);
        cursor.moveToNext();
    }

    cursor.close();

    return websites;
}

private WebsiteRecords cursorToWebsite(Cursor cursor) {
    WebsiteRecords website = new WebsiteRecords();
    website.setId(cursor.getInt(0));
    website.setUser(cursor.getString(1));
    website.setSitename(cursor.getString(2));
    website.setUsername(cursor.getString(3));
    website.setPassword(cursor.getString(4));
    return website;
} 
```

你能帮我解决问题吗？

**编辑** 所以这里是LogCat：

```
01-31 08:11:07.649: E/AndroidRuntime(777): FATAL EXCEPTION: main
01-31 08:11:07.649: E/AndroidRuntime(777): java.lang.NullPointerException
01-31 08:11:07.649: E/AndroidRuntime(777):  at com.bernadette.remembermypassword.DataSource.deleteWebsite(DataSource.java:56)
01-31 08:11:07.649: E/AndroidRuntime(777):  at com.bernadette.remembermypassword.PasswordActivity$3.onClick(PasswordActivity.java:296)
01-31 08:11:07.649: E/AndroidRuntime(777):  at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:166)
01-31 08:11:07.649: E/AndroidRuntime(777):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-31 08:11:07.649: E/AndroidRuntime(777):  at android.os.Looper.loop(Looper.java:137)
01-31 08:11:07.649: E/AndroidRuntime(777):  at android.app.ActivityThread.main(ActivityThread.java:4745)
01-31 08:11:07.649: E/AndroidRuntime(777):  at java.lang.reflect.Method.invokeNative(Native Method)
01-31 08:11:07.649: E/AndroidRuntime(777):  at java.lang.reflect.Method.invoke(Method.java:511)
01-31 08:11:07.649: E/AndroidRuntime(777):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-31 08:11:07.649: E/AndroidRuntime(777):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-31 08:11:07.649: E/AndroidRuntime(777):  at dalvik.system.NativeStart.main(Native Method)
01-31 08:30:21.998: E/Trace(827): error opening trace file: No such file or directory (2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T03:52:17.180

好的，所以我发现了错误是什么。错误在带​​有“（this.selected_website）”的行中。为了解决这个问题，我在“（this.selected_website）”中删除了“this”，它成功了！谢谢你们的帮助。

# facebook-like - 像按钮生成器不起作用

> ID：14616346
> 
> 赞同：0
> 
> 时间：2013-01-31T00:16:38.767
> 
> 标签：facebook-like, code-generation

我正在尝试在朋友的网站上添加一个“喜欢按钮”（第一次尝试这个）。几天前我第一次使用代码生成器时，生成器在字段右侧显示了一个按钮的再现。现在没有再现，一旦我“获取代码”，XFBML、IFRAME 和 URL 链接就不起作用了。似乎生成的代码不是我通过用户输入字段请求的。（即，在选择“深色”配色方案时，我在代码生成的数据彩色=“ Light”中找到以下内容。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T23:10:24.547

现在开发人员工具中似乎存在错误。已使用他们的错误报告工具向 Facebook 报告，他们已确认这是一个问题。您可以在此处订阅错误报告：http: [//developers.facebook.com/bugs/321035314684250](http://developers.facebook.com/bugs/321035314684250)。使用右上角的小“订阅”按钮。

# c# - 使用接口“对象未设置为对象的实例”时出错

> ID：14616353
> 
> 赞同：0
> 
> 时间：2013-01-31T00:17:51.823
> 
> 标签：c#, .net, nunit

> **可能重复：**
> [.NET 中的 NullReferenceException 是什么？](https://stackoverflow.com/questions/4660142/what-is-a-nullreferenceexception-in-net)

嗨，我的代码中有以下行，不断给我一个错误“对象未设置为对象的实例”我尝试了不同的东西，但似乎没有什么能摆脱它。我会很感激它为什么这样做。

```
 IEmailCallback  cb=OperationContext.Current.Getchannel<IEmailCallback> 
```

# recursion - 如果使用递归回文，如何查找数字？

> ID：14616356
> 
> 赞同：0
> 
> 时间：2013-01-31T00:18:05.897
> 
> 标签：recursion, palindrome

我正在尝试检查一个数字是否是回文。我已经编写了代码来使用递归检查字符串是否是回文，但是我很难编写代码来检查数字。

我只将数字传递给方法，没有其他内容（例如，位数）。

有人对我有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:22:33.650

为什么你必须用递归来做呢？

这是我要做的（在伪代码中）：

1.  如果大小为奇数，则将 var 设置为中间位，否则，如果偶数则为大小的一半（例如，如果数字有 5 位，则为 3，如果为 4，则为 2）。
2.  循环：如果奇数，我们跳过中间数字 for (i = 0; i < digitsArray.size /2; i++){ if (digitsArray[ni]!=digitsArray[n+i]) break;
3.  然后，如果我们在结束前弹出，它就失败了。

类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T00:22:02.730

您可以将您的数字转换为字符串并将字符串传递给您编写的现有函数以测试字符串是否为回文。

使用 STR(NUMBER_HERE) 将数字转换为字符串

# python - Python re.match 不返回任何内容。如何修改搜索字符串？

> ID：14616359
> 
> 赞同：0
> 
> 时间：2013-01-31T00:18:22.090
> 
> 标签：python, regex, line

以下是我的台词：

```
num1    -num2 num3: var.shift varstate=shift, var3=num, var4=False/True,  Shift   0xabc5d 

num1    -num2 num3: var.shift varstate=shift, var3=num, var4=False/True,  Shift 0xabc08 

num1    -num2 num3: var.shift varstate=shift, var3=num, var4=False/True,  Shift [38b]0xabc34 
```

我正在尝试从行中获取十六进制值。我只需要 [38b]0xabc1234567890000000000000000000000000 形式的一行中的十六进制值。我不需要所有的十六进制值。

我所有的十六进制值都以 0x 开头，所以我在 re.match 中给出了

```
#!/usr/bin/env python
import sys
import re
import binascii
import string
value_file = open("test2.txt","r")
file2 = open("out.txt", "w")

for line in value_file:
    line_string = str(line)
    line_nospace = line.replace(" ", "")
    lines_cont = line_nospace.rstrip("\n")
    reg_match = re.match(r'\[([38b]]*)\](0-9a-zA-Z)', lines_cont)
    print reg_match 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:22:19.127

您的正则表达式`(.*) 0x(\.*)`转义了第二组中的句点，这意味着它匹配零个或多个句点，而不是零个或多个任意字符。

如果要匹配 之后的所有内容`0x`，请删除反斜杠。

# ipad - 使用图像魔法合成图像

> ID：14616361
> 
> 赞同：0
> 
> 时间：2013-01-31T00:18:31.297
> 
> 标签：ipad, imagemagick, screenshot

我有一个原始的 iPad 屏幕截图，我想在上面放置一个“完美的电池顶栏”。我相信我可以用它`$ composite -gravity`来完成这个，但我是 imagemagick 及其庞大的库的新手......关于如何解决这个问题的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:19:24.183

只需使用复合并检查顶部栏与图像的宽度是否相同。在复合参数 3 + 4 中，是 x 和 y 偏移量。由于您希望它在顶部对齐，请使用 0, 0。

```
<?php
header('Content-type: image/jpeg');

$topbar = new Imagick("/var/www/topbar.png"); //600*19px
$tapir = new Imagick("/var/www/tapir.jpg"); // 600*400px

$tapir->compositeImage($topbar, Imagick::COMPOSITE_OVER, 0, 0);
echo $tapir;
?> 
```

![在此处输入图像描述](../Images/559b61959c391ccea5f2785011fbebc6.png)

![在此处输入图像描述](../Images/1c88f9b2eeb4cd914cff6ebe6c3122df.png)

![在此处输入图像描述](../Images/22b6276bb3eaf1babf4bfe9a35df8dfb.png)

# php - mysql php用逗号分隔值插入多行

> ID：14616363
> 
> 赞同：0
> 
> 时间：2013-01-31T00:18:36.377
> 
> 标签：php, mysql, insert

我有一个 html 页面，我从复选框中收集一组值以插入数据库。html 页面发布到一个 PHP 页面，该页面收集数据然后存储在数据库中。

对于每个值，我想包括一些其他字段，这些字段对于所有值（例如输入的时间）都是相同的。我可以使用 implode 轻松地将捕获的数组转换为逗号分隔的列表。我使用这种以逗号分隔的 id 列表来更新和删除记录。但是，当我想插入它们时，MYSQL 似乎不允许您使用逗号分隔的列表。我的问题是，插入记录的最简单方法是什么，对于 c 逗号分隔列表中的每个值一个，而不使用循环。

html页面

```
<input type="checkbox" name="var[]" value=1>
<input type="checkbox" name="var{}" value=2> 
```

PHP 页面

```
$vars = $_POST['var']; 
```

这给了我一个数组，我可以使用 implode 将它转换为逗号分隔的列表。

要删除，我可以去

```
$sql = "DELETE * from table WHERE id in '$vars'"; 
```

要更新我可以去

```
$sql = "UPDATE table, WHERE id in '$vars'"; 
```

但是似乎没有插入的等价物。

以下将起作用：

```
$sql = "INSERT into table (var, timeentered) values (1,now()) (2,now())"; 
```

但是，这不是我拥有数据的方式。我想做的是

`$sql = "INSERT into table (var,timeentered) values($vars), now()"`但这当然行不通。

我是否必须将用于更新和删除的漂亮逗号分隔列表转换为看起来像 (1,now) (2, now()) 以便插入的东西，还是有替代方法？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:26:18.267

不幸的是，您必须自己构建整个查询：

```
$sql ="insert into table (var, timeentered) values ";
$sql .= "(".implode(", now()), (", $vars).")"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T00:24:23.047

我能想到的两个选择。

按照您的建议构建动态插入查询。但是不要每次都调用 now() 而只是插入一个日期，即

```
$time = gmdate();
$sql = "INSERT into table (var, timeentered) values (1,$time) (2,$time)"; 
```

或者使用下面单个插入的准备好的语句，关闭自动提交，启动事务并在for循环中执行准备好的语句以获得所需的插入次数，然后提交事务。

`$sql = "INSERT into table (var, timeentered) values (?,?)"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T00:27:12.753

您需要遍历数据集并手动创建多行插入查询。如果您想通过单个查询插入多行，则没有其他选择。那是在使用某些数据库框架之外，这些框架可能会为此提供更好的界面。当然，归根结底，这样的数据库框架本质上会在某个时候手动构建多项插入查询。

问题可能涉及您要插入多少项目之一。如果您一次只插入几条记录，那么您可能需要考虑只使用准备好的语句和单独的插入。但是，如果您要一次插入数百条记录，那可能不是一个好主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T00:28:22.283

在您的 mysql 数据库中，您可以将“time_created”列的默认值设置为[TIMESTAMP](http://dev.mysql.com/doc/refman/5.0/en/timestamp-initialization.html)默认值 CURRENT_TIMESTAMP。这样你就不必担心了。只需使用常规插入，它就会自动设置“time_created”列。

对于多行插入的其他问题，您可以创建一个 $update 数组并使用 foreach 循环对每一行数据发出 sql insert 命令。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T00:58:04.920

大多数情况下，您必须使用某种类型的循环结构来构建查询。如果您只想知道如何使您的数组可以接受多重插入语句，那么除了约定和最佳实践之外，为什么不这样做：

```
$values = '('.implode('),(', $array).')'; 
```

或者如果已经是 CSV，那么：

```
$values = '('.implode('),(', explode(',' $csv)).')'; 
```

那么您可以使用双引号在查询中使用 $values 。

# javascript - 节点密码解密最终失败

> ID：14616369
> 
> 赞同：3
> 
> 时间：2013-01-31T00:19:14.673
> 
> 标签：javascript, node.js, encryption, cryptography, aes

所以我正在使用[节点加密库](http://nodejs.org/api/crypto.html#crypto_crypto_createdecipheriv_algorithm_key_iv)来解密一个由我无法控制的其他软件加密的二进制文件。使用以下代码，我能够成功解密它：

```
decipher = crypto.createDecipheriv('aes-128-ecb', password, iv);
decrypted = decipher.update(body, 'binary', 'utf8'); 
```

这很棒，但似乎从我的解密文本末尾截断了大约 11 个字符。这很奇怪，因为它有超过 11200 个纯文本字符。现在我怀疑原因是因为我没有这条线：

```
decrypted += decipher.final('utf8'); 
```

但是，如果我添加该行，我会收到错误`TypeError: DecipherFinal fail`

我尝试了不同的输出编码并且没有 IV，但没有运气。我也读过这个问题：[nodejs 加密解密有什么问题？](https://stackoverflow.com/questions/12219499/whats-wrong-with-nodejs-crypto-decipher)这似乎是同一个问题，但是我不明白我应该在 openssl 命令行上采取的步骤，或者这将如何影响我的节点程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T02:05:02.290

您是否尝试将自动填充设置为 false？默认情况下，它似乎设置为 true（见下文），因此如果对方不使用默认填充（无论如何，可能是 PKCS#7 填充）进行填充，那么结果应该会失败......

`decipher.setAutoPadding(auto_padding=true)`

# android - 单独类中的 SQLite 数据库与同一类中的 SQLite 数据库，哪个更好？安卓

> ID：14616370
> 
> 赞同：0
> 
> 时间：2013-01-31T00:19:23.977
> 
> 标签：android, database, sqlite, class, instance

我有一个 SQLite 数据库，它与扩展 Activity 的主类位于一个单独的类中。

我注意到有两种设置数据库的方法。一种方法是将它放在主 Activity 类中，无论是在类中还是作为嵌套的子类。第二种方法是将它放在单独的类中。

单独的类看起来更好，但是有一个缺点。每次你想做某事时，你都必须在主活动类中创建它的一个实例。我读到在 Android 中实例化对象很昂贵，应该避免。

尽管如此，我还是宁愿将数据库作为一个单独的类。实例化对象的成本是否足以使将数据库放在同一个类中更划算？

SQLite 数据库的单独类的示例：不完整的伪代码

```
public class SQLiteDB {
   private static class DbHelper extends SQLiteOpenHelper{
      // db helper methods
   }

// methods for DB, like get, set, and others
public void openDatabase(){  }
public void closeDatabse(){  }
public void insertRecord(String record){  }
} 
```

主要活动中的示例使用：incompete psudo-code

```
public class Main extends Activity{

// every time I want to use it I must instantiate an object for the database class

// many instances of SQLiteDB object created, garbage collector works hard

SQLiteDB mDatabase = new SQLiteDB();

openDatabase();

insertRecord("insert this");

closeDatabase();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T23:03:33.927

> SQLite database in separate class vs. in same class, which is better?

This is very comprehensive question and it depends on more factors(type of application, personal requirements, how you'll deal with db etc.). Somebody can prefer to place database as inner class and someone as separated class. Problem is that many developers are trying to "stick" as much code as possible into one class and maybe they "fear" to create a little more classes. I don't know that exactly. I mentioned that only as my personal note.

But let's back to your question. What is better?

I think that approach with separeted class. You should let your Activity classes only "Activity classes" `>` only for creating and dealing with UI. Application appearance should be separated from application logic. If you'll follow this "rule" your code will become more clean and human-readable(if someone else will look at your code he shouldn't be completely lost). It's not a shame to have 20 purely written classes as to have all stuff sticked in one class(like a pig).

> however there is one disadvantage. You have to create an instance of it in the main activity class every time you want to do something. I read that instantiating objects in Android is expensive and should be avoided.

Did you think about an usage of [`Singleton`](http://en.wikipedia.org/wiki/Singleton_pattern)? This design pattern is worth to think about it. You will always have only one instance that have many benefits e.q. no waste of memory. I have only good experiences with Singleton. Therefore i recommend you to try and use it.

## Example:

```
private static SQLiteOpenHelper instance;

public static SQLiteOpenHelper getInstance(Context mContext) {
   if (instance == null) {
      instance = new SQLiteOpenHelperImplementation(mContext);
   }
   return instance;
} 
```

**And at the end i give you a few suggestions:**

*   Everytime you'll work with cursors, databases etc. release / close them immediately after work is done. This can solve many exceptions related to `SQLiteDatabase` and `Cursor`

*   An usage of synchronized blocks and methods is pretty good practise in the case of concurrent programming to avoid many problems

*   If you have more than one table in database i suggest you create "serving" class for each table that will wrap `CRUD` operations and specific methods of the table

*   Before Activity is destroyed, check and release all sources which are not already released.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T00:44:56.053

这将是个人品味的问题。

然而，我发现高效和干净的是创建一个扩展 SQLiteOpenHelper 的类。在本课程中，您最终将编写 SQL 代码来创建表并将方法编写为存储过程。

该类看起来像这样：

```
public class DatabaseInterface extends SQLiteOpenHelper {

// Database version
private static final int DATABASE_VERSION = 1;
public DatabaseInterface(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);

}
//in your oncreate you will write the queries to create your tables
@Override
public void onCreate(SQLiteDatabase db) {

    String CREATE_NEWS = "CREATE TABLE News(id INTEGER)";

    db.execSQL(CREATE_NEWS);
}

// upgrading tables
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // drop tables if exist
    db.execSQL("DROP TABLE IF EXSIST " + NEWS);
    // recreate tables
    onCreate(db);

} 
```

考虑我们有一个 News obj，它接受 1 个参数作为它的构造函数，您的存储过程可能看起来像这样：

```
public ArrayList<News> getNews() {
    ArrayList<News> mNewes = new ArrayList<News>();
    SQLiteDatabase db = null;
    Cursor cursor = null;

    try {
        String sQry = "SELECT * FROM " + NEWS;
        db = this.getWritableDatabase();
        cursor = db.rawQuery(sQry, null);

        if (cursor.moveToFirst()) {
            do {
                mNewes.add(new News(cursor.getInt(0)));

            } while (cursor.moveToNext());
        }
    } catch (SQLiteException e) {
        Log.e("SQLite - getNewes", e.getMessage());
        return null;
    } finally {
        cursor.close();
        db.close();
    }

    return mNewes;
} 
```

在上述方法中，您获取并打开应用程序数据库，对其进行查询，预测任何 sql 错误，然后关闭数据库。这样做可以确保您永远不会打开任何您不需要/不使用的资源。

我已经在两个目前在市场上销售的应用程序中使用了这种方法，它运行得相当快，对我为存储过程创建的方法进行了数百次调用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T00:42:49.360

我更喜欢你在这里给出的解决方案。主要优点是您可以轻松地从应用程序中的任何 Activity（或其他类）访问数据库。为了解决每次使用数据库都创建一个新实例的问题，可以改为在 中创建一个实例`onCreate()`，在 Activity 处于活动状态时随意使用数据库，最后在 中关闭数据库`onDestroy()`。

# magento - Magento Order PDF logo 功能

> ID：14616371
> 
> 赞同：1
> 
> 时间：2013-01-31T00:19:47.987
> 
> 标签：magento

我正在使用添加打印订单按钮来打印客户的订单（不是发票），但我不知道如何让徽标显示在 pdf 上。以下是扩展中的代码，但我找不到操作它的函数，我不明白为什么它没有拉出我在配置中的徽标。请指教。:)

```
 $this->insertLogo($page, $order->getStore()); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T17:38:37.033

您可能没有 PDF 集的商店徽标。在管理员中，你应该去

```
System -> Configuration -> Sales -> Sales -> Invoice and Packing Slip Design 
```

并在那里设置你的标志。

现在进行登录解释，以防上述方法不起作用:)

insertLogo 函数位于 Mage_Sales_Model_Order_Pdf_Abstract 类中（我假设您的类派生自它）。

您应该注意的行是`$image = Mage::getStoreConfig('sales/identity/logo', $store);`和`$image = Mage::getBaseDir('media') . '/sales/store/logo/' . $image;`

getStoreConfig 函数在 core_config_data 表中查找徽标图像的名称。您可以检查该值是否设置为

```
SELECT * FROM core_config_data WHERE path = 'sales/identity/logo' 
```

如果查询不会返回任何内容或将返回不是图像名称的值，那么您必须先设置该值。

如果设置了该值，您应该查看

```
/your_store_root_dir/media/sales/store/logo/value_that_is_in_the_database 
```

查看商店徽标图像是否真的存在以及是否没有将其添加到那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T04:40:17.210

您是否检查了该类 ($this) 和/或其父类中的代码？你会在那里看到函数 inserLogo。

# ruby-on-rails - 如何告诉 Rails 资产管道忽略某些文件类型？

> ID：14616372
> 
> 赞同：1
> 
> 时间：2013-01-31T00:19:53.913
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, capistrano, asset-pipeline

是否可以让资产管道忽略某些文件类型？

我将许多 GeoIP 文件存储在`vendor/assets`. 资产管道会自动预编译它们并将它们放置在`public/`目录中，即使它们仅由后台任务使用并且永远不需要向公众提供。

有没有办法从预编译中排除这些文件，或者我唯一的选择是将它们移到别处？

* * *

运行 Rails 3.2.1 并使用 Capistrano 进行部署

# python - 在 Django 上显示动态表单时出错

> ID：14616374
> 
> 赞同：0
> 
> 时间：2013-01-31T00:20:02.900
> 
> 标签：python, django

这是我的表格：

```
from django.db import models
from django.forms import ModelForm
from django import forms

class Blog(models.Model):
    blog_id = models.CharField(max_length=100)

class TumblrForm(ModelForm):
    class Meta:
        model = Blog
        fields = ('blog_id')
        widgets = {
            'blog_id':forms.RadioSelect(),
        } 
```

我基本上想向用户显示表单列表。

这是我实例化它的地方：

```
form = TumblrForm(instance=blogs_id) 
```

我收到一条错误消息：

```
Unknown field(s) (b, d, g, i, l, o, _) specified for Blog 
```

知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T00:38:28.103

尝试在“blog_id”之后添加逗号

```
fields = ('blog_id',) 
```

看起来字符串“blog_id”被解释为字符列表，而不是指定字段的单个字符串（注意现在错误消息包含 blog_id 的所有字符）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T00:31:57.520

只需在 .`fields = ('blog_id')`之后`fields = ('blog_id',)`添加逗号进行更改`blog_id`。

[fields 属性](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#using-a-subset-of-fields-on-the-form)应该是要包含在表单中的字段名称列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T01:01:38.120

```
class Blog(models.Model):
    blog_id = models.CharField(max_length=100)

class TumblrForm(forms.ModelForm):
    blog_id = forms.ChoiceField(widget=forms.RadioSelect, choices=CHOICES)

    class Meta:
        model = Blog 
```

为什么你有 blog_id？因为基本上django会在每个模型中自动创建id（pk）

# javascript - Coda Slider 在 vi meo 和 youtube 视频播放时停止

> ID：14616376
> 
> 赞同：1
> 
> 时间：2013-01-31T00:20:32.120
> 
> 标签：javascript, jquery, youtube, slider, vimeo

我正在使用 Coda Slider[链接](http://kevinbatdorf.github.com/codaslider/)显示嵌入式 youtube 和 vimeo 视频的最新帖子，但是当您在视频上按下播放时滑块继续滑动，当用户在主页上播放视频时，如何使滑块停止?

谢谢

# sql - 如何在 sub 中添加文本框名称作为参数

> ID：14616377
> 
> 赞同：1
> 
> 时间：2013-01-31T00:20:33.377
> 
> 标签：sql, vb.net, .net-4.0

我创建了一个按钮来在文本框中添加字段，我想将文本框名称作为参数传递给子，然后插入到数据库中。我该怎么做。请在 vb 中找到我的代码以供参考。网

在数据库中插入值的代码

```
Sub Add_Click(ByVal sender As Object, ByVal e As EventArgs) Handles Button1.Click

        Dim addedButton As Button = sender
        Dim sqlcmd As SqlCommand
        Dim insertdata As String

        addedButton.Text = "Added"
        adduser = True
        addedButton.Enabled = True

        If (cname.Value = " " Or cid.Value = " " Or cadd.Value = " " Or cph.Value = " " Or fax.Value = " " Or cmail.Value = " ") Then
            Message.InnerHtml = "ERROR: Null values not allowed for " _
                & "Client ID, Name"
            Message.Style("color") = "red"
            BindGrid()
        Else
            Message.InnerHtml = "<b>Client Record has been added</b><br/>"     
        End If

        insertdata = "INSERT INTO dbo.ClientInfo([Client Name],[Client ID],[Client Address],[Client Telephone No],[Client Fax No],[Client E-mail]) values("
        insertdata = insertdata + " ' " + cname.Value + " '," + cid.Value + ",' " + cadd.Value + " '," + cph.Value + "," + fax.Value + "," + cmail.Value
        sqlcmd = New SqlCommand(insertdata, sqlcon)

        Try
            sqlcmd.Connection.Open()
            Dim addcount As Integer = sqlcmd.ExecuteNonQuery()

            If addcount > 0 Then
                Message.InnerHtml = "Record successfully Added"
            Else
                Message.InnerHtml = "Record not added"
            End If

        Catch ex As SqlException

            If ex.Number = 2627 Then
                Message.InnerHtml = "ERROR: A record already exists with " _
                   & "the same primary key"
            End If
        Finally
            sqlcmd.Connection.Close()
            BindGrid()
        End Try      
    End Sub

    <asp:Button id="Button1"
                   Text="Add data"
                   OnClick="Add_Click"
                   runat="server"/><br />

  Name:<input type ="text" id="cname" name="" value="" runat="server"/><br />
              ID: <input type = "text" id="cid" name="txtclientid" value="" runat="server"/><br />
              Address:<input type="text" id="cadd" name="txtclientadd" value="" runat="server"/><br />
              Phone No:<input type="text" id="cph" name="txtno" value="" runat="server" /><br />
              Fax No:<input type="text" id="fax" name="faxno" value="" runat="server"/><br />
              E-mail:<input type="text" id="cmail" name="mail" value="" runat="server"/><br />
              <input type="reset" name="reset" value="Clear" /><br /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:44:34.310

不完全符合您的要求，但更接近您应该做的事情：

```
Public Sub InsertClientInfo(ByVal ClientName As String, ByVal ClientID As Integer, ByVal ClientAddress As String, ByVal ClientPhone As String, ByVal ClientFax As String, ByVal ClientEmail As String)

    Dim sql As String = _
      "INSERT INTO ClientInfo (" & _
          "[Client Name],[Client ID],[Client Address],[Client Telephone No],[Client Fax No],[Client E-mail]" & _
     ") VALUES (" & _
          "@ClientName,  @ClientID,  @ClientAddress,   @ClientPhone,         @ClientFax,     @ClientEmail)"

    Using cn As New SqlConnection("connection string"), _
          cmd As New SqlCommand(sql, cn)

        'I had to guess at the column types and lengths here. Adjust accordingly
        cmd.Parameters.Add("@ClientName", SqlDbType.NVarChar, 50).Value = ClientName
        cmd.Parameters.Add("@ClientID", SqlDbType.Int).Value = ClientID
        cmd.Parameters.Add("@ClientAddress", SqlDbType.NVarChar, 200).Value = ClientAddress
        cmd.Parameters.Add("@ClientPhone", SqlDbType.NVarChar, 16).Value = ClientPhone
        cmd.Parameters.Add("@ClientFax", SqlDbType.NVarChar, 16).Value = ClientFax
        cmd.Parameters.Add("@ClientEmail", SqlDbType.NVarChar, 50).Value = ClientEmail

        cn.Open()
        cmd.ExecuteNonQuery()
    End Using
End Sub 
```

请注意，我必须猜测数据类型和大小。您需要修复它以制作实际的表定义。像这样称呼它：

```
InsertClientInfo(textname.Text, Convert.ToInt32(textclientid.Text), txtclientadd.Text, txtno.Text, faxno.Text, mail.Text) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T00:29:06.213

要将 TEXTBOX 名称传递给任何子，请执行以下操作，

```
Sub SomeSubName(ThisTextboxName as string)
  'your code here
End Sub 
```

或函数

```
Function SomeFunctionName(ThisTextBoxName as String) As Boolean
  'your code here
End Function 
```

其中... SomeSubName 和 SomeFunctionName 是您的子程序或函数的名称 ThisTextBoxName 是 STRING 数据的变量名称，它是实际的文本框名称

因此，如果您的文本框名为 txtPhone 那么您会将其传递为....

SomeSubName(txtPhone.Name)

或者

昏暗测试为布尔值

测试 = SomeFunctionName(txtPhone.Name)

# eclipse - 为什么eclipse快捷方式不起作用

> ID：14616380
> 
> 赞同：0
> 
> 时间：2013-01-31T00:20:43.553
> 
> 标签：eclipse, plugins, keyboard, ocaml, shortcut

我在 macOSX 山狮上使用 Juno。`CMD`+`W`不会关闭编辑器窗口，但它会为一些 Ocaml 插件提供“放置断点”。这很奇怪，因为我在我的插件中找不到任何 OCaml，无论是从**Help->Install New Software->already installed**，还是文件系统中的文件夹。我以前一定有过这个插件，但已经把它删除了。

**Preferences->General->keys**显示正确的绑定（`CMD`+`W`表示关闭并且没有冲突），但它不起作用。如果我将其更改为另一个绑定，那将起作用。但是`CMD`+`W`很方便。

奇怪的是，在删除`~/Library/Cache and ~/Library/Preferences`eclipse 并安装新副本后，问题仍然存在。这就是让我发疯的原因。

有谁知道是什么问题？我还可以删除什么以将 Eclipse 设置为出厂默认设置？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-31T01:32:22.207

我尝试使用另一个工作区，它工作正常。因此，我在当前工作区中找到了一个 .metadata/.plugins 文件夹并将其删除。这就是原因。

注意：这会重置所有内容并删除所有插件。

# numpy - Time Machine 恢复后找不到 Python 模块

> ID：14616382
> 
> 赞同：1
> 
> 时间：2013-01-31T00:20:47.883
> 
> 标签：numpy, python-2.7, osx-mountain-lion, pip, timemachine

最近，我执行了 OS X Mountain Lion 的全新安装，并从 Time Machine 备份中恢复了我的系统。当我尝试使用 python 时，它无法找到我在擦除操作系统之前安装的大部分模块。Xcode 命令行工具似乎也不再在系统上。

我重新安装了 Xcode 命令行工具和 pip（使用 easy_install），然后开始重新安装我使用的模块，从 numpy 开始。但是，pip 说它已经安装了：

```
Requirement already satisfied (use --upgrade to upgrade): numpy in /System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python 
```

但是，在 Python 的 CLI 中，它仍然找不到 numpy：

```
 Python 2.7.3 (v2.7.3:70274d53c1dd, Apr  9 2012, 20:52:43) 
    [GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
    Type "help", "copyright", "credits" or "license" for more information.
     >>> import numpy
    Traceback (most recent call last):
       File "<stdin>", line 1, in <module>
    ImportError: No module named numpy 
```

我尝试安装其他一些模块。当我用 pip 安装 ujson 时，一切都很顺利，python 发现它没有问题。但是，当我尝试使用 pip 安装 matplotlib 时，clang 抛出错误并且无法安装。我认为问题可能是 matplotlib 依赖于 numpy，但我不知道。

```
In file included from src/ft2font.cpp:3:

src/ft2font.h:16:10: fatal error: 'ft2build.h' file not found

#include <ft2build.h>

         ^

1 error generated.

error: command 'clang' failed with exit status 1

----------------------------------------
Command /usr/bin/python -c "import setuptools;__file__='/tmp/pip-build/matplotlib/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /tmp/pip-lqNcmF-record/install-record.txt --single-version-externally-managed failed with error code 1 in /tmp/pip-build/matplotlib` 
```

有关如何解决此问题的任何建议？我应该卸载这个其他版本的 numpy，还是你认为这是一个更深层次的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:31:14.590

我的建议是删除 /System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python 中的 numpy 文件并重新安装 numpy。即使文件在那里，库似乎也不再正确链接。

# angularjs - 如何在Angular JS（来自Lawnchair JS）中异步更改视图？

> ID：14616384
> 
> 赞同：0
> 
> 时间：2013-01-31T00:21:00.607
> 
> 标签：angularjs, deferred, lawnchair

我有一个相当简单的 2 页网络应用程序。使用 Angular 和 Lawnchair。我有一个登录页面，在用户通过身份验证并提取相关数据之前，我不希望从该页面更改屏幕/视图。此外，这是一个移动应用程序。所以用户可能只需要重新认证并从浏览器加载他们的数据。

```
<!DOCTYPE html>
<html xmlns:ng="http://angularjs.org" ng:app="AppMod">
<head>
...
</head>
<body ng:controller="AppCtrl">
    <ng:view></ng:view>
    ...
</body>
</html> 
```

当我在没有适配器的情况下使用 Lawnchair 时，Angular 可以很好地更改视图，并且 Lawnchair 将数据保存在浏览器中，但不会保存到像 WebSQL 或 IndexedDB 这样的永久性东西。但是，一旦包含一个或多个 Lawnchair 适配器，在最坏的情况下视图将不会显示，或者在最好的情况下它将更新位置/URI 而不更改视图（直到发出另一个事件，如“更改”）。

```
$scope['login'] = function()
{
    AuthSvc.query(
        {'username':$scope['username'], 'password':$scope['password']},
        function( results )
        {
            LastUsedRsc.save({'key':'credentials', 'value':
                {'username':$scope['username'], 'password':$scope['password']}});
            $location.path( '/dataset' );
        },
        function( error )
        {
            alert( "Incorrect username and/or password." );
        });
    return( false );
}; 
```

我已经尝试过 $scope.$apply()、$scope.$digest()、它们各自的“安全”包装器等。这是一个[JSFiddle](http://jsfiddle.net/MarkMYoung/ghnaM/)供您查看。如果您删除 Manage Resources 下的 Lawnchair 适配器并再次运行 fiddle，您将看到视图将开始工作，但 Lawnchair 现在一文不值，因为没有任何东西真正持久化。使用 Lawnchair 的适配器之一时，我需要做什么才能更改视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:26:01.320

你真的需要运行`$digest`or`$apply`在解决`LoginResolver`和`DatasetResolver`.

例子：

```
var LoginResolver = {
    'credentialsAsync':function( $rootScope, $q, $route, LastUsedRsc ) {
        var deferred = $q.defer();
        LastUsedRsc.get( 'credentials', function( object ) {
            deferred.resolve( object );
            $rootScope.$digest();
        },
        function( error ) {
            window.console.info( "Using default, default value.", error );            
            deferred.resolve({'value':{}});      
            $rootScope.$digest();
        });
    return( deferred.promise );
    },
}; 
```

注意：你需要在resolve/reject之后注入`$rootScope`和调用。`$digest`

# scala - 类型参数推断错误

> ID：14616385
> 
> 赞同：0
> 
> 时间：2013-01-31T00:21:02.180
> 
> 标签：scala, option, typeerror

如何解决此类型错误？

```
object Test extends App {
  def printOption[A](a: Option[A]): Option[A] = { println(a getOrElse("none")); a }

  def printHashCodeAndMap[A, B](fn: Option[A] => Option[B], list: List[Option[A]]): List[Option[B]] = {
    for (elem <- list) yield fn(elem.map{a => println(a.hashCode()); a})
  }

  val optListA = List(Some("aa"), None, Some(5))

  val optListB = printHashCodeAndMap(printOption, optListA)
  for (x <- optListB) printOption(x)
} 
```

我得到的错误是：

```
error: type mismatch;
found   : Option[Nothing] => Option[Nothing]
required: Option[Any] => Option[Nothing]
val optListB = printHashCodeAndMap(printOption, optListA) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:49:28.777

问题在于 scala 如何推断类型参数。类型信息从左到右跨参数组流动，但不在同一个参数组内。

这意味着： , 的类型参数只有在它出现之前被绑定到参数组中的真实类型时`printOption`才能被推断出来。在您的中，情况并非如此。所以，有两种方法可以让它工作。`A``A``printHashCodeAndMap`

一世。您可以放弃类型推断并`fn`通过传递它来显式指定类型`printOption[Any]`。或者您可以指定`printHashCodeAndMap`调用它时的类型参数（即`printHashCodeAndMap[Any, Any](printOption, optListA)`）

ii. 如果你想使用 scala 的类型推断，你会希望类型信息`A`来自`optListA`which is of type `List[Option[Any]]`。要做到这一点，参数`list`必须位于前面的参数组中`fn`。像这样：

```
def printHashCodeAndMap[A, B](list: List[Option[A]])(fn: Option[A] => Option[B]): List[Option[B]] = { ... } 
```

然后你就可以这样称呼它：

```
printHashCodeAndMap(optListA)(printOption) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T00:28:57.213

```
val optListB = printHashCodeAndMap(printOption[Any], optListA) 
```

# java - 我应该在这种情况下使用反射吗？

> ID：14616386
> 
> 赞同：0
> 
> 时间：2013-01-31T00:21:10.110
> 
> 标签：java, database, reflection, map

我有一个代表计算机部件（特别是 RAM 模块）的类，其中包含名称、品牌、价格和容量等属性。它需要有一种将自己的数据插入数据库的方法。我希望它将其所有属性插入数据库，除非该属性为空。最好的方法是循环遍历包含数据库列的字符串标题的 Map 以及获取对象相应属性的方法？这是我第一次使用反射，所以如果这实际上是最好的方法，我们将不胜感激提供一段示例代码。

在此先感谢，本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:25:54.527

不，您实际上是在谈论序列化问题而不是持久性。持久性维护实体的概念，这些实体具有预定义的属性，映射到数据库中的列。如果您只是要发现属性，那么您基本上是在序列化对象。

使用反射这样做的问题在于，当您开始拥有可能包含循环的对象图（指向已经遇到的节点的对象）时，它会变得非常复杂。

另一种选择是只拥有一个简单的属性映射协议，就像 Cocoa 所做的那样：每个对象类型都知道如何对自己进行编码，然后对自己进行解码，但是来自与格式无关的编码器或解码器。因此，如果您现在在 XML 中为 50 个不同的实体执行此操作，那么以后想要支持 JSON，您可以无需更改任何实体代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T03:30:22.547

Some frameworks already implement what you are looking for :) take a look at : [http://en.wikipedia.org/wiki/Object-relational_mapping](http://en.wikipedia.org/wiki/Object-relational_mapping) for some concepts:

I can suggest you to take a look on [Ebean](http://www.avaje.org/ebean/documentation.html) that comes with playframework, and [hibernate](http://www.hibernate.org/) both do what you are looking for.

# python - 如何转义特殊字符以使用 LXML 编写 XML

> ID：14616387
> 
> 赞同：1
> 
> 时间：2013-01-31T00:21:25.990
> 
> 标签：python, xml-parsing, python-2.7, lxml

我有以下带有无效字符的 XML

```
 <capability_camctrl_privilege>
  <descr>Indicate whether to support &#8220;Manage Privilege&#8221; 
  <dependent>True</dependent> 
```

我通过以下方式读取 XML `root = etree.fromstring("%s" % in_xml, parser=etree.XMLParser(recover=True))`

并保存我在字典结构中加载的 XML，

最后我做了一些修改并尝试输出一个新的 XML，

节点 = etree.Element(STRING_WITH_SPECIAL_CHRACRTER)

我收到错误消息`All strings must be XML compatible: Unicode or ASCII, no NULL bytes`

我试图通过导入转义无效字符串

```
from xml.sax.saxutils import escape
from xml.sax.saxutils import quoteattr 
```

但是它不起作用，有人可以帮助我解决问题吗？非常感谢！

Python 2.7 版

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T23:22:03.003

这是一个常见的错误消息`lxml`。解决方案是在将字符串与`lxml`. 为此，您需要知道编码，但如果您碰巧不知道，对**UTF-8的猜测通常是正确的。**

```
in_xml_unicode = unicode(in_xml, 'utf-8')
root = etree.fromstring(in_xml_unicode, parser=etree.XMLParser(recover=True)) 
```

# formatting - 编码标准/格式

> ID：14616391
> 
> 赞同：0
> 
> 时间：2013-01-31T00:21:52.300
> 
> 标签：formatting, code-formatting, code-standards

我经常修改别人写的代码。我看过很多代码格式化标准，我有点困惑我应该做什么。我应该始终坚持自己的标准还是将我的标准调整为框架中使用的标准？

目前，我总是将我的标准切换到框架使用的标准，但它搞砸了我自己的标准。我最近发现自己在一个应用程序中使用了许多不同的代码标准。

我正在考虑在我正在处理的所有项目上运行一个美化器，但这似乎不是一个选项，因为它们都由其他来源维护，所以如果有更新，每个美化更改都会出现在 git 中并导致我做了一些合并工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:34:20.717

如果您与团队中的其他人一起工作，通常团队会制定某种格式或编码指南，以避免在编码风格之间切换。

我认为维护你的代码的人，如果你作为一个团队工作，应该做同样的事情。无论是哪种编码语言，采用标准格式都可以为每个人省去很多麻烦，所以就是这样。

此外，根据我的经验，框架也是如此。尽管我讨厌 Twitter Bootstrap CSS 的格式，但我在编辑这些文件时确实会使用它，因为在文件中破坏现有标准是最坏的情况，并且花时间重新格式化现有代码听起来像是浪费时间. 如果不用担心，您也可以随时使用自己的格式链接其他文件。

我认为一些代码编辑器提供代码格式化脚本，根据语言和您选择的偏好，如果您愿意，他们会为您重新格式化您的代码，但我个人从未使用过这样的东西，这对您来说可能很有趣（只看到这样CodeBlocks 中的实际操作）。

我认为您应该同化（可能是弱者的选择，呵呵）并为自己的项目保留自己的格式。它只是节省时间，让你远离头痛。

# objective-c - 超类中的静态变量

> ID：14616401
> 
> 赞同：2
> 
> 时间：2013-01-31T00:22:39.317
> 
> 标签：objective-c, macos, inheritance

我有两个类继承自同一个类。每个类都有一个与该类同名的对应 JSON 文件。为了避免每次创建实例时都加载 JSON，我添加了一个类方法和静态变量：

```
static NSArray *map = nil;
+(NSArray *)map {
    if (!map) {
        map = [NSJSONSerialization JSONObjectWithData:
       [NSData dataWithContentsOfFile:
          [[NSBundle mainBundle] pathForResource:NSStringFromClass([self class])
                                           ofType:@"json"]]
                              options:0
                                error:nil];
    }
    return map;
} 
```

我将此方法（字面意思是复制和粘贴）添加到两个子类中。

我想把它移到超类，但是如果我这样做了，那么静态变量将在两个子类的实例之间共享，并且只有与首先创建实例的类对应的 JSON 映射将被加载，所有后续另一个类的实例将返回错误的地图。

那么如何才能为每个子类只加载一次对应的 JSON 文件，并且每个子类都有自己的映射呢？（理想情况下无需像我一样复制和粘贴代码）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:52:18.060

在基类中保留一个静态 NSMutableDictionary。使用类的名称作为键（即使用 NSStringFromClass(childClass)）。

```
@interface BaseClass : NSObject

+(NSArray*)map;

@end

@interface OneChild : BaseClass

@end

@interface TwoChild : BaseClass

@end

@implementation BaseClass

+(NSArray*)map
{
        static NSMutableDictionary *_mapStore;
        static dispatch_once_t onceToken;
        dispatch_once(&onceToken, ^{
            _mapStore = [[NSMutableDictionary alloc]init];
        });

    NSString *name = NSStringFromClass([self class]);
    NSArray *map = [_mapStore objectForKey:name];
    if(map == nil)
    {
        map = [NSJSONSerialization JSONObjectWithData:[NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:name ofType:@"json"]] options:0 error:nil];
                [_mapStore setObject:map forKey:name];
    }
    return map;
}

@end

@implementation OneChild

@end

@implementation TwoChild

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T00:52:53.840

IMO，最干净的方法是在每个子类中声明静态变量，就像你已经是一样。它是加载地图的代码的重复，但是每个类范围的地图需要不同，所以我认为这不会带来太大的不便。

如果您真的想将加载逻辑和存储放在超类中，请将静态变量设为字典而不仅仅是数组，如下所示：

```
static NSMutableDictionary *maps = nil;
+(NSArray *)map {
    if (!maps) {
        maps = [[NSMutableDictionary alloc] initWithCapacity:2];
    }

    if (![maps objectForKey:[self class]]) {
        [maps setObject:[NSJSONSerialization JSONObjectWithData:[NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:NSStringFromClass([self class]) ofType:@"json"]] options:0 error:nil] forKey:[self class]];
    }

    return [maps objectForKey:[self class]];
} 
```

# javascript - 启用已禁用的 HTML 输入框的代码是什么，仅使用 javascript，而不是 jQuery

> ID：14616403
> 
> 赞同：1
> 
> 时间：2013-01-31T00:22:48.223
> 
> 标签：javascript

```
document.getElementById(boxname ).disabled=false; 
```

不起作用。

```
document.getElementById(boxname ).removeAtribute('disabled'); 
```

不起作用。

什么会起作用？javascript 只有没有 jQuery 等请。

```
<input id="boxname" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T00:24:01.607

将`disabled`属性设置为 false 是可行的方法，您只需首先选择元素。为此，请将 ID*字符串*传递给`getElementById`：

```
document.getElementById('boxname').disabled = false; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T00:24:11.743

```
document.getElementById(boxname) 
```

应该是

```
document.getElementById('boxname') 
```

你**错过了**那里的报价。Id 应该作为字符串传递。

**或者**

```
var boxname = 'boxname';

// Now you can pass in without any Quotes

 document.getElementById(boxname) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T01:17:03.977

实际上，当代码放置在脚本中的特定位置时有时会起作用请参阅我的轮换代码：http: [//jsfiddle.net/crownabhisek/kPybv/42/](http://jsfiddle.net/crownabhisek/kPybv/42/)

在这里，在该`script`部分中，在`rotate()`函数中，当`document.getElementById("rotation").removeAttribute("disabled");`写在我插入评论的第一个位置时，它可以工作。但是在我插入评论的第二个地方它不起作用。

不知道为什么。

**但是要禁用的代码确实是`document.getElementById("rotation").removeAttribute("disabled");`并且应该可以正常工作。**

# mysql - 在 UNION 上使用 ALL/filesort

> ID：14616405
> 
> 赞同：1
> 
> 时间：2013-01-31T00:22:57.547
> 
> 标签：mysql, database, performance, indexing, union

所以我有这个：

```
EXPLAIN (SELECT f.prn AS 'prn', f.id AS 'xnyz', 'f' AS 'omnf', f.wwn, (COUNT(fr.rid) > 0 OR COUNT(frr.rid) > 0) AS 'rrr', fr.rid AS 'rid', f.xyzz
        FROM scmf f
        LEFT JOIN scmr fr
                ON fr.omnf = 'f' AND fr.xnyz = f.id
      LEFT JOIN scmr frr
        ON frr.fid = f.id
        WHERE f.prn IN (0,43570,43571,43572,43573,43574,43575) AND f.xyzz IN (490923) AND f.id IN (0,43570,43571,43572,43573,43574,43575)
        GROUP BY f.id)
        UNION
      (SELECT fi.fxyz AS 'prn', fi.iix AS 'xnyz', 'n' AS 'omnf', fi.wwn,(COUNT(fir.rid) > 0) AS 'rrr', 0 AS 'rid', fif.xyzz
      FROM scmf_item fi
      LEFT JOIN scmr fir ON fir.omnf = 'n' AND fir.xnyz = fi.iix
      LEFT JOIN scmf fif ON fif.id = fi.fxyz
        WHERE fi.fxyz IN (0,43570,43571,43572,43573,43574,43575) AND fif.xyzz IN (490923)
                GROUP BY fi.iix
                )
                ORDER BY wwn ASC; 
```

解释显示：

```
1   PRIMARY f   range   PRIMARY,xyzz,prn    PRIMARY 4       7   Using where
1   PRIMARY fr  ref omnf_id omnf_id 9   const,s.f.id    1   Using index
1   PRIMARY frr ref Index1  Index1  4   s.f.id  1   Using index
2   UNION   fi  range   fxyz    fxyz    4       24  Using where; Using temporary; Using filesort
2   UNION   fif eq_ref  PRIMARY,xyzz    PRIMARY 4   s.fi.fxyz   1   Using where
2   UNION   fir ref omnf_id omnf_id 9   const,s.fi.iix  1   Using index
    UNION RESULT    <union1,2>  ALL                     Using filesort 
```

为什么 UNION 子句使用文件排序/类型为 ALL

这很糟糕吗？

我可以使用索引来解决这个问题吗？

# database - 通过将数据硬编码到脚本中来避免数据库调用

> ID：14616414
> 
> 赞同：1
> 
> 时间：2013-01-31T00:23:52.980
> 
> 标签：database, performance, hardcode

我在 MySQL 数据库中有大约 1000 行（4 个字段）。我知道数据库中的数据不会经常更改（它们是 GPS 坐标）。每次加载适当的脚本时从数据库中调用此信息对我来说更好，还是将数据“硬编码”到脚本中更好，当我对数据库进行更改时，只需也更新硬编码数据？

我想知道这是否会提高性能，但我的一部分认为这可能不是最佳实践。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:29:16.043

将坐标硬编码到脚本中并不是一个好主意。
我会在开始时将 1000 个坐标读入一个数组，无论是从 SQL DB 还是从文件中。

但是在启动时只读取一次，而不是在每个计算步骤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T18:19:56.477

考虑到每个月可能会发生一次或两次变化，而且 0.0063 秒并不是很多（至少从我的角度来看不是，如果这事关生死或非常重要的华尔街股票）数据将是另一回事），我的建议是您使用 SQL。当然，只要每次脚本执行只执行一次查询。

事实上，如果您将数据硬编码到脚本中，它可以在几毫秒内提高性能。但是问自己一个问题：维护硬编码数据需要多少额外的工作？如果您真的想确定，请制作一个脚本版本，在其中对数据进行硬编码并执行脚本 1000 次并测量时间差。（但是，仅进行此测试可能会花费更多时间而不是节省的时间……）

如果您的脚本每天运行 5000 次，并且与硬编码值相比，每次 SQL 需要额外的 0.01 秒，那么您的用户每天总共需要 50 秒。但是，对于每个用户，他们很可能不会注意到任何差异。

# jquery - 如果满足功能，我可以禁用/删除按钮的禁用吗？

> ID：14616418
> 
> 赞同：1
> 
> 时间：2013-01-31T00:24:14.147
> 
> 标签：jquery

我正在设置一个函数，称为`insertQuestion`它附加表行的位置。我还有一个`startVideoUpload()`开始上传的`stopVideoUpload()`功能和一个停止文件上传的功能。现在我在这些功能中提到，如果正在上传，请禁用`Upload`按钮，如果上传已停止，则从`Uplod`按钮中删除禁用。现在我想要做的是，如果用户在上传文件时附加一行，那么我希望 `Upload`禁用已附加的按钮，否则如果在附加行时上传已停止，则从`Upload`按钮。

我的问题是，是否有可能在`insertQuestion()`函数中检查是否正在上传文件（如果语句`startVideoUpload()`为真），则禁用`Upload`按钮，否则如果没有文件正在上传（如果语句`stopVideoUpload()`为真），然后从`Upload`按钮中删除禁用。如果可以做到这一点，那么如何正确编码 if 语句以检查是否满足这些功能？

下面是它会追加行的函数（我把它留空了）

```
function insertQuestion(form) {   
} 
```

以下是开始文件上传过程的相关代码

```
 function startVideoUpload(videouploadform){    
       sourceVideoForm = videouploadform;
       $(".sbtnvideo").attr("disabled", "disabled");
    }); 

      return true;
    } 
```

下面是上传完成后的函数相关代码：

```
function stopVideoUpload(success, videoID, videofilename){
      $(".sbtnvideo").removeAttr("disabled");         
      return true;   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:29:02.877

您需要某种标志，指示当前是否正在上传视频。然后，只需从您的`insertQuestion`功能中检查。

```
var isUploading = false;

function startVideoUpload (videouploadform) {    
    sourceVideoForm = videouploadform;
    $(".sbtnvideo").prop("disabled", isUploading = true);
    return false;
});

function stopVideoUpload (success, videoID, videofilename) {
    $(".sbtnvideo").prop("disabled", isUploading = false);
    return true;   
}

function insertQuestion (form) {
    if ( isUploading ) {
        // disable the button
    }
} 
```

# wordpress - 图片链接在更新时自动重写

> ID：14616419
> 
> 赞同：1
> 
> 时间：2013-01-31T00:24:20.453
> 
> 标签：wordpress, wordpress-3.5

我接管了一个 wordpress 网站的管理，我对这个人用这个主题做了什么感到非常困惑。

图像被发布并在单独的页面上自动链接到自身，当我尝试更改链接时，它会恢复为链接到自身。

如果我删除链接我无法添加新链接，就好像“添加链接”按钮没有触发但我找不到它会这样做的原因。

有人知道为什么会这样吗？

# php - 倒数计时器小时重置与历史

> ID：14616420
> 
> 赞同：0
> 
> 时间：2013-01-31T00:24:22.543
> 
> 标签：php, jquery, countdown

我正在尝试制作倒数计时器，它每 60 分钟重置一次，并且不会在每次刷新时重置。

我认为理想的方法是通过时区？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:30:34.383

有多种方法可以执行此操作，但通常我建议将 unix-timestamp 存储在 MySQL 数据库中，然后获取并将先前/存储的 unix-timestamp 与当前时间戳进行比较。PHP 函数 time() 将为您提供当前时间戳。

如果整个项目是关于制作计数器，您可能可以通过从文本文件写入/加载来实现相同的效果。会话也是如此。

这是一个小片段，可让您了解如何解决此问题：

```
if (($unixtime + (60 * 60)) > time()) //previous time + 60 * 60 sec (60 min).
{
//update counter
}

//present counter 
```

# ajax - 如何在 Oracle Apex 中使用 AJAX 或动态操作刷新页面上的一个表？

> ID：14616423
> 
> 赞同：1
> 
> 时间：2013-01-31T00:24:33.337
> 
> 标签：ajax, oracle-apex

我有两个主要报告。每个报告都有一个对应的区域和一个非主要经典报告（因此总共 4 个报告）。单击每个主要报告中的链接可在其相应的非主要报告中显示详细信息。

目前，单击主报告将重新加载整个页面，并且所有 PL/SQL 和 SQL 必须从所有 4 个报告中重新触发。

如果只刷新非主报表，它将减少 SQL 调用。我认为 AJAX 将是实现这一目标的最佳选择。

我将如何去做这样的任务？

谢谢你。

PS，所有四个报告都是由返回 SQL 语句的 PL/SQL 函数确定的。所有标题也由返回冒号分隔字符串的 PL/SQL 函数确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:52:45.487

考虑到您之前的问题，您的经典报告依赖于某些页面项目的会话状态。您在列链接中设置这些项目的值。
如果您想取消页面的提交，那么您需要一种方法让锚标签不触发其默认操作，并为要设置为动态操作的页面项目提供值。

您必须将其放在列链接属性中：

```
onclick="return false;#" class="reportlink1" 
```

然后你需要传递一些数据，我建议使用数据标签

```
data-value1="#COL1#:" 
```

创建一个动态动作，点击触发并使用 jQuery 选择器`.reportlink1`

现在需要做的是为页面项提供所需的值添加一个真正的操作来执行 javascript：

```
 var lValue1 = $(this.triggeringElement).data("value1");
 $("P1_ITEM1").val(lValue1) 
```

设置项目值后，创建另一个“刷新”类型的真实操作并将其设置为影响您的辅助报告。
最后一步是在辅助报告上设置“要提交的页面项目”。这将导致报告将设置的页面项的值提交给会话，并确保刷新区域时 sql 将返回正确的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T22:00:21.510

出于某种原因，汤姆的方法对我不起作用。我认为这一定是我的页面的特质。如果有人偶然发现这个问题，请先尝试 Tom 的方法，如果由于某种原因它不起作用，请尝试在动态操作中使用 AJAX 进行以下改编：

如果您的非主报表依赖于某些页面项的会话状态，并且这些项是通过主报表中的列链接设置的，则必须将其放在列链接属性中以防止提交页面并使用数据传递值标签：

```
onclick="return false;" class="reportlink1" data-value1="#COL01#" data-value2="#COL02#" 
```

创建动态动作，点击触发并使用 JQuery 选择器`.reportlink1`

**通过AJAX**为页面项目提供所需的值。添加一个真正的动作来执行同步的javascript：

```
 var v1 = $(this.triggeringElement).data("value1");
 var v2 = $(this.triggeringElement).data("value2");
 var get = new htmldb_Get(null, &APP_ID., 'APPLICATION_PROCESS=dummy', &APP_PAGE_ID.);
 get.add('PX_ITEM1' , v1)
 get.add('PX_ITEM2', v2);
 gReturn = get.get();
 get = null; 
```

设置项目值后，创建另一个“刷新”类型的真实操作并将其设置为影响辅助报告。

与 Tom 的解决方案不同，不要在辅助报告上设置要提交的页面项目。

# java - 在我的 nexus 上获得 FAILED BINDER TRANSACTION，但在模拟器上却没有

> ID：14616424
> 
> 赞同：1
> 
> 时间：2013-01-31T00:24:32.967
> 
> 标签：java, android

我正在测试 Facebook SDK 示例 Scrumptious，它只是让您登录到 Facebook。当我在 Galaxy Nexus 上运行该应用程序时，我`FAILED BINDER TRANSACTION`从该应用程序中得到一个 , ，但在我的模拟器上没有得到该错误。这很令人困惑。

有任何想法吗？

编辑Logcat：

```
01-30 19:50:14.756: D/dalvikvm(3976): Late-enabling CheckJNI
01-30 19:50:14.842: I/dalvikvm(3976): Turning on JNI app bug workarounds for target SDK version 8...
01-30 19:50:18.639: D/dalvikvm(3976): GC_CONCURRENT freed 266K, 3% free 10961K/11271K, paused 20ms+6ms, total 60ms
01-30 19:50:18.639: D/dalvikvm(3976): WAIT_FOR_CONCURRENT_GC blocked 13ms
01-30 19:50:18.670: D/dalvikvm(3976): GC_FOR_ALLOC freed 58K, 4% free 11117K/11527K, paused 13ms, total 13ms
01-30 19:50:18.670: I/dalvikvm-heap(3976): Grow heap (frag case) to 11.496MB for 640016-byte allocation
01-30 19:50:18.685: D/dalvikvm(3976): GC_CONCURRENT freed <1K, 4% free 11741K/12167K, paused 4ms+1ms, total 15ms
01-30 19:50:18.709: D/dalvikvm(3976): GC_FOR_ALLOC freed 184K, 5% free 11714K/12231K, paused 10ms, total 10ms
01-30 19:50:18.725: D/dalvikvm(3976): GC_FOR_ALLOC freed 26K, 4% free 11815K/12231K, paused 11ms, total 11ms
01-30 19:50:18.764: D/dalvikvm(3976): GC_FOR_ALLOC freed 31K, 3% free 12036K/12359K, paused 10ms, total 10ms
01-30 19:50:18.779: D/dalvikvm(3976): GC_FOR_ALLOC freed 102K, 4% free 12184K/12615K, paused 11ms, total 11ms
01-30 19:50:20.162: D/dalvikvm(3976): GC_CONCURRENT freed 169K, 3% free 12431K/12743K, paused 13ms+2ms, total 31ms
01-30 19:50:20.350: E/JavaBinder(3976): !!! FAILED BINDER TRANSACTION !!!
01-30 19:50:42.685: E/JavaBinder(3976): !!! FAILED BINDER TRANSACTION !!!
01-30 19:50:52.428: E/JavaBinder(3976): !!! FAILED BINDER TRANSACTION !!!
01-30 19:50:55.600: E/JavaBinder(3976): !!! FAILED BINDER TRANSACTION !!!
01-30 19:51:00.029: E/JavaBinder(3976): !!! FAILED BINDER TRANSACTION !!!
01-30 19:55:07.748: D/dalvikvm(4659): GC_FOR_ALLOC freed 90K, 2% free 11076K/11271K, paused 17ms, total 18ms
01-30 19:55:07.756: I/dalvikvm-heap(4659): Grow heap (frag case) to 11.457MB for 640016-byte allocation
01-30 19:55:07.771: D/dalvikvm(4659): GC_CONCURRENT freed 2K, 2% free 11699K/11911K, paused 12ms+1ms, total 22ms
01-30 19:55:07.826: D/dalvikvm(4659): GC_CONCURRENT freed 239K, 3% free 11955K/12295K, paused 11ms+2ms, total 23ms
01-30 19:55:07.826: D/dalvikvm(4659): WAIT_FOR_CONCURRENT_GC blocked 4ms
01-30 19:55:07.873: D/dalvikvm(4659): GC_CONCURRENT freed 112K, 3% free 12293K/12551K, paused 12ms+2ms, total 25ms
01-30 19:55:09.560: E/JavaBinder(4659): !!! FAILED BINDER TRANSACTION !!!
01-30 19:55:11.021: D/dalvikvm(4659): GC_CONCURRENT freed 300K, 3% free 12431K/12807K, paused 2ms+1ms, total 17ms
01-30 19:55:21.857: E/JavaBinder(4659): !!! FAILED BINDER TRANSACTION !!!
01-30 19:55:25.685: E/JavaBinder(4659): !!! FAILED BINDER TRANSACTION !!! 
```

# jquery - 禁用拖动特定项目

> ID：14616425
> 
> 赞同：3
> 
> 时间：2013-01-31T00:24:43.150
> 
> 标签：jquery, jquery-ui-sortable, nested-sortable

我找到了一个不错的脚本[http://mjsarfatti.com/sandbox/nestedSortable/](http://mjsarfatti.com/sandbox/nestedSortable/)，这对我来说几乎是完美的。我就是一点小事都查不出来。

我想禁用一些要拖动的项目。我查看了自述文件，尝试了一些选项，但没有得到我想要的。

有人可以告诉我如何禁用要拖动的项目吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T00:42:27.730

所有说明都在这里[http://jqueryui.com/sortable/#items](http://jqueryui.com/sortable/#items)

在我提取并放在这里的代码中[http://jsfiddle.net/axgTF/1/](http://jsfiddle.net/axgTF/1/)

改变

```
items: "li", 
```

到

```
items: "li:not(.dontsortme)", 
```

并将该类添加到您要禁止排序的项目中，例如

```
<li id="list_10" class="dontsortme"><div><span class="disclose"><span></span></span>Item 5</div> 
```

您可以在这里看到[http://jsfiddle.net/axgTF/2/](http://jsfiddle.net/axgTF/2/)（第 5 项已禁用）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T00:47:07.643

向不应移动`static`的元素添加一个类，然后在配置中指定。`<li>``nestedSortable``items: 'li:not(.static)'`

演示：[小提琴](http://jsfiddle.net/arunpjohny/DCAMS/)。

这里`Item 5`不能移动。

# php - 如何对每个模块使用不同的 CSS 类来使其网格化

> ID：14616433
> 
> 赞同：0
> 
> 时间：2013-01-31T00:25:41.173
> 
> 标签：php, templates, joomla, joomla-template

这是我正在创建的基本模块系统，用于在 joomla 模板中创建一个 6 列网格系统自动启用等等，但是我需要帮助来调用一个类来保存一个模块，但是现在当我调用 CSS 类时，它会保存所有模块并用 dc-module4 包装它，这样我就可以在 CSS 中设置该类的样式是代码，这将帮助您理解它。

```
<?php
function Top(){
    $modules = array();
    $modules["top1"] = '<jdoc:include type="modules" name="top1" style="xhtml" />';
    $modules["top2"] = '<jdoc:include type="modules" name="top2" style="xhtml" />';
    $modules["top3"] = '<jdoc:include type="modules" name="top3" style="xhtml" />';
    $modules["top4"] = '<jdoc:include type="modules" name="top4" style="xhtml" />';
    $modules["top5"] = '<jdoc:include type="modules" name="top5" style="xhtml" />';
    $modules["top6"] = '<jdoc:include type="modules" name="top6" style="xhtml" />';
        foreach($modules as $module => $name){
            echo '<div class="dc-modules">'.$name.'</div>';
        }
}

if($this->countModules('top1')){
    $mod[0] = 'mod1';
}
if($this->countModules('top2')){
    $mod[1] = 'mod2';
}
if($this->countModules('top3')){
    $mod[2] = 'mod3';
}
if($this->countModules('top4')){
    $mod[3] = 'mod4';
}
if($this->countModules('top5')){
    $mod[4] = 'mod5';
}
if($this->countModules('top6')){
    $mod[5] = 'mod6';
}
$result = count($mod);
    if($result == 6){
        echo '<div class="dc-modules6">';
        echo Top();
        echo '</div>';
    }
    if($result == 5){
        echo '<div class="dc-modules5">';
        echo Top();
        echo '</div>';
    }
    if($result == 4){
        echo '<div class="dc-modules4">';
        echo Top();
        echo '</div>';
    }
    if($result == 3){
        echo '<div class="dc-modules3">';
        echo Top();
        echo '</div>';
    }
    if($result == 2){
        echo '<div class="dc-modules2">';
        echo Top();
        echo '</div>';
    }
    if($result == 1){
        echo '<div class="dc-modules1">';
        echo Top();
        echo '</div>';
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T03:16:52.183

花了两个小时后，我刚刚提出了网格系统的解决方案希望你们可以利用这一点，希望有人能以更好的方式改进我的代码，所以就在这里

```
<?php
    if($this->countModules('top1')){
        $modules["top1"] = '<jdoc:include type="modules" name="top1" style="xhtml" />';
    }
    if($this->countModules('top2')){
        $modules["top2"] = '<jdoc:include type="modules" name="top2" style="xhtml" />';
    }
    if($this->countModules('top3')){
        $modules["top3"] = '<jdoc:include type="modules" name="top3" style="xhtml" />';
    }
    if($this->countModules('top4')){
        $modules["top4"] = '<jdoc:include type="modules" name="top4" style="xhtml" />';
    }
    if($this->countModules('top5')){
        $modules["top5"] = '<jdoc:include type="modules" name="top5" style="xhtml" />';
    }
    if($this->countModules('top6')){
        $modules["top6"] = '<jdoc:include type="modules" name="top6" style="xhtml" />';
    }

if(isset($modules)){

    $result = count($modules);

    foreach($modules as $module => $name){
        if($result == 6){
            echo '<div class="dc-modules6">';
            echo $name;
            echo '</div>';
        }
        if($result == 5){
            echo '<div class="dc-modules5">';
            echo $name;
            echo '</div>';
        }
        if($result == 4){
            echo '<div class="dc-modules4">';
            echo $name;
            echo '</div>';
        }
        if($result == 3){
            echo '<div class="dc-modules3">';
            echo $name;
            echo '</div>';
        }
        if($result == 2){
            echo '<div class="dc-modules2">';
            echo $name;
            echo '</div>';
        }
        if($result == 1){
            echo '<div class="dc-modules1">';
            echo $name;
            echo '</div>';
        }
    }
}
?> 
```

# android - SurfaceView 在 Android 4.1+ 中不再绘制位图

> ID：14616436
> 
> 赞同：3
> 
> 时间：2013-01-31T00:26:02.017
> 
> 标签：android, surfaceview, android-4.2-jelly-bean

为了显示带有移动对象（来自位图）和触摸事件的视图，我一直`SurfaceView`在 Android 中使用以下代码。它在我的开发设备上一直运行良好，但事实证明，很多用户只是看到一个黑盒子代替了`View`. 经过很长时间（不成功）的调试，我得出的结论是它必须是 Android 4.1 导致`SurfaceView`停止正常工作。

我的开发设备是Android 4.0，但抱怨黑人的用户只有`SurfaceView`Android 4.1。用 Android 4.1 模拟器检查过 - 它也不能在那里工作。

你能看出代码有什么问题吗？可能是由 Android 4.1 中的“Project Butter”引起的吗？

当然，我已经检查过这些`Bitmap`对象是否有效（以适当的行将它们保存到 SD 卡中），并且所有绘图方法也会定期调用 - 那里一切正常。

```
package com.my.package.util;

import java.util.ArrayList;
import java.util.List;
import com.my.package.Card;
import com.my.package.MyApp;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Rect;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public class MySurface extends SurfaceView implements SurfaceHolder.Callback {

    private MyRenderThread mRenderThread;
    private volatile List<Card> mGameObjects;
    private volatile int mGameObjectsCount;
    private int mScreenWidth;
    private int mScreenHeight;
    private int mGameObjectWidth;
    private int mGameObjectHeight;
    private int mHighlightedObject = -1;
    private Paint mGraphicsPaint;
    private Paint mShadowPaint;
    private Rect mDrawingRect;
    private int mTouchEventAction;
    private Bitmap bitmapToDraw;
    private int mOnDrawX1;
    private BitmapFactory.Options bitmapOptions;
    // ...

    public MySurface(Context activityContext, AttributeSet attributeSet) {
        super(activityContext, attributeSet);
        getHolder().addCallback(this);
        setFocusable(true); // touch events should be processed by this class
        mGameObjects = new ArrayList<Card>();
        mGraphicsPaint = new Paint();
        mGraphicsPaint.setAntiAlias(true);
        mGraphicsPaint.setFilterBitmap(true);
        mShadowPaint = new Paint();
        mShadowPaint.setARGB(160, 20, 20, 20);
        mShadowPaint.setAntiAlias(true);
        bitmapOptions = new BitmapFactory.Options();
        bitmapOptions.inInputShareable = true;
        bitmapOptions.inPurgeable = true;
        mDrawingRect = new Rect();
    }

    public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) { }

    public void surfaceCreated(SurfaceHolder arg0) {
        mScreenWidth = getWidth();
        mScreenHeight = getHeight();
        mGameObjectHeight = mScreenHeight;
        mGameObjectWidth = mGameObjectHeight*99/150;
        mCurrentSpacing = mGameObjectWidth;
        setDrawingCacheEnabled(true);
        mRenderThread = new MyRenderThread(getHolder(), this);
        mRenderThread.setRunning(true);
        mRenderThread.start();
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        boolean retry = true;
        mRenderThread.setRunning(false); // stop thread
        while (retry) { // wait for thread to close
            try {
                mRenderThread.join();
                retry = false;
            }
            catch (InterruptedException e) { }
        }
    }

    public void stopThread() {
        if (mRenderThread != null) {
            mRenderThread.setRunning(false);
        }
    }

    @Override
    public void onDraw(Canvas canvas) {
        if (canvas != null) {
            synchronized (mGameObjects) {
                mGameObjectsCount = mGameObjects.size();
                canvas.drawColor(Color.BLACK);
                if (mGameObjectsCount > 0) {
                    mCurrentSpacing = Math.min(mScreenWidth/mGameObjectsCount, mGameObjectWidth);
                    for (int c = 0; c < mGameObjectsCount; c++) {
                        if (c != mHighlightedObject) {
                            try {
                                drawGameObject(canvas, mGameObjects.get(c).getDrawableID(), false, c*mCurrentSpacing, c*mCurrentSpacing+mGameObjectWidth);
                            }
                            catch (Exception e) { }
                        }
                    }
                    if (mHighlightedObject > -1) {
                        mOnDrawX1 = Math.min(mHighlightedObject*mCurrentSpacing, mScreenWidth-mGameObjectWidth);
                        try {
                            drawGameObject(canvas, mGameObjects.get(mHighlightedObject).getDrawableID(), true, mOnDrawX1, mOnDrawX1+mGameObjectWidth);
                        }
                        catch (Exception e) { }
                    }
                }
            }
        }
    }

    private void drawGameObject(Canvas canvas, int resourceID, boolean highlighted, int xLeft, int xRight) {
        if (canvas != null && resourceID != 0) {
            try {
                if (highlighted) {
                    canvas.drawRect(0, 0, mScreenWidth, mScreenHeight, mShadowPaint);
                }
                bitmapToDraw = MyApp.gameObjectCacheGet(resourceID);
                if (bitmapToDraw == null) {
                    bitmapToDraw = BitmapFactory.decodeResource(getResources(), resourceID, bitmapOptions);
                    MyApp.gameObjectCachePut(resourceID, bitmapToDraw);
                }
                mDrawingRect.set(xLeft, 0, xRight, mGameObjectHeight);
                canvas.drawBitmap(bitmapToDraw, null, mDrawingRect, mGraphicsPaint);
            }
            catch (Exception e) { }
        }
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        synchronized (mRenderThread.getSurfaceHolder()) { // synchronized so that there are no concurrent accesses
            mTouchEventAction = event.getAction();
            if (mTouchEventAction == MotionEvent.ACTION_DOWN || mTouchEventAction == MotionEvent.ACTION_MOVE) {
                if (event.getY() >= 0 && event.getY() < mScreenHeight) {
                    mTouchEventObject = (int) event.getX()/mCurrentSpacing;
                    if (mTouchEventObject > -1 && mTouchEventObject < mGameObjectsCount) {
                        mHighlightedObject = mTouchEventObject;
                    }
                    else {
                        mHighlightedObject = -1;
                    }
                }
                else {
                    mHighlightedObject = -1;
                }
            }
            else if (mTouchEventAction == MotionEvent.ACTION_UP) {
                if (mActivityCallback != null && mHighlightedObject > -1 && mHighlightedObject < mGameObjectsCount) {
                    try {
                        mActivityCallback.placeObject(mGameObjects.get(mHighlightedObject));
                    }
                    catch (Exception e) { }
                }
                mHighlightedObject = -1;
            }
        }
        return true;
    }

    // ...

} 
```

这是定期调用`SurfaceView`'s的线程的代码`onDraw()`：

```
package com.my.package.util;

import android.graphics.Canvas;
import android.view.SurfaceHolder;

public class MyRenderThread extends Thread {

    private SurfaceHolder mSurfaceHolder;
    private MySurface mSurface;
    private boolean mRunning = false;

    public MyRenderThread(SurfaceHolder surfaceHolder, MySurface surface) {
        mSurfaceHolder = surfaceHolder;
        mSurface = surface;
    }

    public SurfaceHolder getSurfaceHolder() {
        return mSurfaceHolder;
    }

    public void setRunning(boolean run) {
        mRunning = run;
    }

    @Override
    public void run() {
        Canvas c;
        while (mRunning) {
            c = null;
            try {
                c = mSurfaceHolder.lockCanvas(null);
                synchronized (mSurfaceHolder) {
                    if (c != null) {
                        mSurface.onDraw(c);
                    }
                }
            }
            finally { // when exception is thrown above we may not leave the surface in an inconsistent state
                if (c != null) {
                    mSurfaceHolder.unlockCanvasAndPost(c);
                }
            }
        }
    }

} 
```

`SurfaceView`包含在我的`Activity`布局 XML 中：

```
<com.my.package.util.MySurface
    android:id="@+id/my_surface"
    android:layout_width="fill_parent"
    android:layout_height="@dimen/my_surface_height" /> 
```

然后在代码中访问它是这样的：

```
MySurface mySurface = (MySurface) findViewById(R.id.my_surface); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-02T16:44:14.143

将您的绘图方法重命名为 onDraw2()。更改线程代码以调用 onDraw2。这样，您就不会覆盖基类的 ondraw。我认为您可能会在 onDraw 中获得 2 次点击。一个来自基类覆盖，一个来自线程。

这可以解释为什么设置 z 顺序会有所帮助。您将颠倒 2 个窗口的绘制顺序，从而避免该问题。至于问题的“为什么现在”部分。由于您有 2 条通往 onDraw 的途径，我怀疑这是不受支持的 android 行为，所以不知道会发生什么。

我还看到您启用了 setDrawingCache。我不认为这对你有帮助。通常你会在某个时候调用 getDrawingCache。如果它不重要，请尝试删除它。

我看到的唯一另一件事是您创建了线程并在创建的表面中传递了支架。您可能希望在 surfaceChanged 发生时采取措施，或者至少验证没有任何重要的变化。

# sed - 使用 sed 来识别行中的模式，而不是列

> ID：14616437
> 
> 赞同：2
> 
> 时间：2013-01-31T00:26:14.493
> 
> 标签：sed, awk, gnu, gawk, data-management

GNU sed 可以用来根据行识别模式吗？或者换句话说，如何在您使用 sed 到 ID 的模式中插入换行符？

例如，在以下数据集中（实际上要大得多），我有一个错误，当我搜索重复项时应该删除，但不是因为两行中的信息略有不同（此时无关紧要） ）。

在这种情况下，我想从原始文件中完全删除错误。换句话说，如果在我的文件中，两行`rs####`相互跟随，我想删除这两个副本，以及它们后面的六行. 将它们重新定位到新文件会很好，但最关键的是它们已从原始文件中删除。

```
rs1038864   16  73762557    A   G
1   1633    0.5835  -0.0004 0.0035
1   1643    0.8902  0.004436    0.004354
0   0   0   0   0
rs1019567   16  83343715    G   T
rs1019567   16  83343715    G   T
1   1641    0.4692  0.0009  0.0035
1   559 0.4612  -0.0025 0.0060
1   1643    0.5178  -0.002244   0.002745
1   1643    0.5178  -0.002244   0.002745
1   1909    0.493842692 0.0008  0.0027
1   1950    0.493842692 0.0008  0.0027
rs1038556   16  55132072    C   T
1   6388    0.7773  0.0020  0.0044
1   6843    0.1161  0.001379    0.004275
1   1509    0.978660942 0.0041  0.0096
rs1019797   16  87788686    C   G
rs1019797   16  87788686    C   G
1   1639    0.717   0.0022  0.0038
1   5557    0.7193  0.0020  0.0064
1   1643    0.6691  -0.001044   0.002888
1   6843    0.6691  -0.001044   0.002888
1   1959    0.315280799 -0.0041 0.0032
1   1909    0.315280799 -0.0041 0.0032
rs1038887   16  62660698    A   G
1   1688    0.4947  -0.0028 0.0035
0   0   0   0   0
1   1909    0.464393658 0.0007  0.0028 
```

就像是，

```
sed -i '/^rs.*d
^rs.*/,+6d' test.data 
```

也许

```
sed -i '/^rs.*;^rs.*/,+6d' test.data 
```

? 任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:41:43.810

我不认为`sed`是适合这项工作的工具（但我可能错了；这部分取决于是否总是正好有 6 行要删除，并且可能取决于相邻的 ID 行是否总是具有相同的 ID）。您可能可以使用 来做到这一点`awk`，但我会使用 Perl：

```
#!/usr/bin/env perl
use strict;
use warnings;

my $rejects = "reject.lines";
open my $fh, '>', $rejects or die "Failed to create $rejects";

my $old = "";

while (<>)
{
    if ($_ =~ /^rs\d+ /)
    {
        if ($old =~ /^rs\d+ /)
        {
            print $fh $old;
            print $fh $_;
            while (<>)
            {
                last if /^rs\d+ /;
                print $fh $_;
            }
            $old = $_;
            next;
        }
    }
    print $old;
    $old = $_;
}
print $old if $old ne "";
close $fh; 
```

这将处理相邻标记线之后的任意数量的线，并且不依赖于两个标记是否相同。

### 输出

```
rs1038864   16  73762557    A   G
1   1633    0.5835  -0.0004 0.0035
1   1643    0.8902  0.004436    0.004354
0   0   0   0   0
rs1038556   16  55132072    C   T
1   6388    0.7773  0.0020  0.0044
1   6843    0.1161  0.001379    0.004275
1   1509    0.978660942 0.0041  0.0096
rs1038887   16  62660698    A   G
1   1688    0.4947  -0.0028 0.0035
0   0   0   0   0
1   1909    0.464393658 0.0007  0.0028 
```

### 拒绝行

```
rs1019567   16  83343715    G   T
rs1019567   16  83343715    G   T
1   1641    0.4692  0.0009  0.0035
1   559 0.4612  -0.0025 0.0060
1   1643    0.5178  -0.002244   0.002745
1   1643    0.5178  -0.002244   0.002745
1   1909    0.493842692 0.0008  0.0027
1   1950    0.493842692 0.0008  0.0027
rs1019797   16  87788686    C   G
rs1019797   16  87788686    C   G
1   1639    0.717   0.0022  0.0038
1   5557    0.7193  0.0020  0.0064
1   1643    0.6691  -0.001044   0.002888
1   6843    0.6691  -0.001044   0.002888
1   1959    0.315280799 -0.0041 0.0032
1   1909    0.315280799 -0.0041 0.0032 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T01:42:03.497

如果`infile`包含列出的输入，应该这样做（GNU sed）：

```
<infile sed -r 'N; /([^\n]+)\n\1/ { N; N; N; N; N; N; d }; P; D' 
```

如果要保存已删除的位以`deleted.txt`使用它：

```
<infile sed -r 'N; /([^\n]+)\n\1/ { N; N; N; N; N; N; w deleted.txt
d }; P; D' 
```

请注意，该`w`命令需要以换行符终止。

*解释*

这会将第二行加载到模式空间 ( `N`) 并检查这些行是否重复 ( `/([^\n]+)\n\1/`)，是否还有六行被加载到模式空间并被删除 ( `d`)。

# c# - 扩展密封的 Pushpin 类以包含更多字段

> ID：14616441
> 
> 赞同：0
> 
> 时间：2013-01-31T00:26:17.020
> 
> 标签：c#, windows-8, bing-maps, windows-store-apps, windows-store

我正在开发一个允许用户在地图上放置点并从服务器加载它们的 Windows 商店应用程序。我的工作正常，但我需要包含比标准 Pushpin 类允许的更多属性（评级/描述/用户）。

因为 Pushpin 是密封的，所以我无法添加这些字段并使用我自己的对象代替 Pushpin。在过去的几个小时里，我尝试编写自己的 PointOfInterest 类，其中包含一个 Pushpin 对象，但是，这种方法在许多领域都失败了（当我在地图上放置一个点时，我想检索的不仅仅是名称/标记并且无法获取对原始对象的引用。）

如果有人知道从这里去哪里，我想听听你的意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:08:07.167

如果您需要访问密封类的私有成员，那么您就不走运了。

您能做的最好的事情是代理（您似乎已经通过将其作为成员来做）。也称为 [伪造它:)](https://stackoverflow.com/a/657532/390330)

# java - 从 Ant 运行 bash 脚本并传递多个参数

> ID：14616447
> 
> 赞同：2
> 
> 时间：2013-01-31T00:26:33.760
> 
> 标签：java, bash, ant, exec

我正在尝试从 Ant 构建文件中运行以下命令：

```
sh /home/myuser/scripts/run.sh -p=8888 -z=true /home/myuser/resources/mydir 
```

到目前为止，这是我最好的尝试：

```
<target name="run">
    <exec executable="/bin/bash">
        <arg line="/home/myuser/scripts/run.sh"/>
        <arg line="-p=8888"/>
        <arg line="-z=true"/>
        <arg line="/home/myuser/resources/mydir"/>
    </exec>
</target> 
```

`BUILD SUCCESSFUL`当我运行它时，除了一条消息之外，我没有得到任何 Ant 输出。但是，从终端运行此脚本会产生*大量*输出。我不确定我`<exec/>`是否正确设置了任务，或者如何开始调试它。提前致谢。

**当我以详细模式运行 ant 时更新**，我得到以下输出：

```
[exec] Current OS is Linux
[exec] Executing '/bin/bash' with arguments:
[exec] '/home/myuser/scripts/run.sh'
[exec] '-p=8888'
[exec] '-z=true'
[exec] '/home/myuser/resources/mydir'
[exec] 
[exec] The ' characters around the executable and arguments are
[exec] not part of the command.
[exec] Usage: <run> [options] <your dir> 
```

所以看起来 Ant 正在我的参数周围插入单引号。有什么办法可以禁用这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T00:30:51.613

我建议您尝试使用 Ant 以详细模式运行任务 - 例如通过传递`-v`Ant 命令行。然后，您应该看到 Ant 如何将上述任务格式化为命令行。

我注意到您引用的命令是针对 Bourne shell 的`sh`，但是在您正在运行的 exec 任务中`bash`- 这可能是造成差异的原因吗？

# c++ - 在 c++ 中，我将如何生成 2 到 14 之间的随机数？

> ID：14616450
> 
> 赞同：0
> 
> 时间：2013-01-31T00:26:51.757
> 
> 标签：c++, random

> **可能重复：**
> [从一个范围内生成随机整数](https://stackoverflow.com/questions/5008804/generating-random-integer-from-a-range)

我刚刚开始学习`c++`，对于课堂作业，我应该使用`rand()`并获得一个介于 2 到 14 之间的随机数。我知道我会在 1 到 10 之间获得`rand()%10+1`

在我的情况下，我需要做 `rand()%14+2`什么？

我知道其他人也发布了类似的问题，但它们似乎都在偶数之间，例如 1 和 10，或 10 和 20 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:34:54.860

rand()%12+2 注意中间有 12 个数字的差距，你的下限是 2。

# javascript - JqPlot 显示数据

> ID：14616452
> 
> 赞同：1
> 
> 时间：2013-01-31T00:27:08.323
> 
> 标签：javascript, jqplot

我可以帮忙在图表上显示数据吗？我正在使用 JqPlot。

这是我的代码：

```
 line0 = [["2012-07-31",3.8182],["2012-08-01",3.4000],["2012-08-02",3.7500]]; 
            line1 = [["2012-07-31",4.8182],["2012-08-01",4.4000],["2012-08-02",4.7500]];
            line2 = [["2012-07-31",5.8182],["2012-08-01",5.4000],["2012-08-02",5.7500]];
        plot1 = $.jqplot('servicechart', [line0,line1,line2], {
            legend:{show:false}, 
            title:'<b>Service</b>',
            seriesDefaults:{pointLabels:{show:false}},
            grid: {background:'#f8f8f8', gridLineColor:'#dbdbdb',borderWidth: 0,shadowDepth: 0},
            axes:{
                yaxis: {  label: 'Service -1 (poor) to 4 (excellent)', min: 1, max: 4, tickInterval: 1,labelRenderer: $.jqplot.CanvasAxisLabelRenderer},
                xaxis:{ label: 'Months', renderer:$.jqplot.DateAxisRenderer, tickInterval:'1 month',tickOptions:{formatString:'%b %#d, %Y'}  }
            },
            seriesColors: [ "#329dd5", "#0d8e17", "#f47320"],
            highlighter: { tooltipLocation: 's',tooltipAxes: 'both',tooltipSeparator: ' - ',tooltipOffset: 10,sizeAdjust: 8,tooltipFadeSpeed:'slow'   }             
        }); 
```

由于某种原因，数据未显示在图表上。有人可以帮我解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:08:31.190

尝试这个：

请注意以下几行：

```
/*labelRenderer: $.jqplot.CanvasAxisLabelRenderer*/ //It is not necessary

xaxis:{
  min:"2012-07-01" //you need to put min...if not..it doesn't work

highlighter: {
            show:true //For obvious reasons 
```

完整示例：http: [//jsfiddle.net/pabloker/C5W4b/1/](http://jsfiddle.net/pabloker/C5W4b/1/)

```
var line0 = [["2012-07-01",1.8182],["2012-08-01",1.4000],["2012-09-01",1.7500]]; 
var line1 = [["2012-07-01",2.8182],["2012-08-01",2.4000],["2012-09-01",2.7500]];
var line2 = [["2012-07-01",3.8182],["2012-08-01",3.4000],["2012-09-01",3.7500]];

var plot1 = $.jqplot('servicechart', [line0,line1,line2], {
        legend:{
            show:false
        }, 
        title:'<b>Service</b>',
        seriesDefaults:{
            pointLabels:{
                show:false
            }
        },
        grid: {
            background:'#f8f8f8', 
            gridLineColor:'#dbdbdb',
            borderWidth: 0,
            shadowDepth: 0},
        axes:{
            yaxis: {  
                label: 'Service -1 (poor) to 4 (excellent)', 
                min: 1, 
                max: 4, 
                tickInterval: 1
                /*labelRenderer: $.jqplot.CanvasAxisLabelRenderer*/
            },
            xaxis:{ 
                label: 'Months', 
                renderer:$.jqplot.DateAxisRenderer, 
                tickInterval:'1 month',
                min:"2012-07-01",
                tickOptions:{
                    formatString:'%b %#d, %Y'
                }  
            }
        },
        seriesColors: [ "#329dd5", "#0d8e17", "#f47320"],
        highlighter: {
            show:true,
            tooltipLocation: 's',
            tooltipAxes: 'both',
            tooltipSeparator: ' - ',
            tooltipOffset: 10,
            sizeAdjust: 8,
            tooltipFadeSpeed:'slow'   }             
    }); 
```

# html - HTML5 视频的图像占位符后备

> ID：14616453
> 
> 赞同：36
> 
> 时间：2013-01-31T00:27:08.020
> 
> 标签：html, video, html5-video

我正在使用以下代码在页面上实现 HTML5 视频

```
<video autoplay>
    <source src="/resources/video/product-hero.mp4.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"' />
    <source src="/resources/video/product-hero.webmhd.webm" type='video/webm; codecs="vp8, vorbis"' />
</video> 
```

这很好用，嵌入到我在 FF、Safari 和 Chrome 中的页面上。我想要的是，因为这个视频没有控件，并且意味着嵌入没有边框的页面（视频中的白色 BG）是让图像出现在视频的位置。

如果无法使用元素渲染视频，我希望将图像作为后备。我看过以下帖子：[html5 video fallback advice (no flash)](https://stackoverflow.com/questions/6576746/html5-video-fallback-advice-no-flash)，它开始了讨论。但不确定这些答案是否是我需要的。

我的直觉告诉我，我可以让 JQuery 检测视频功能，如果不支持视频，则写出一些显示图像的 HTML。但我想看看是否有更简单的方法。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-01-31T02:08:18.917

经过大量搜索，我找到了对我有用的解决方案回到 IE8。没有在IE7中测试过。

[如果浏览器不支持 HTML5 的 <video> 标签，如何显示图像](https://stackoverflow.com/questions/9718109/how-can-i-display-an-image-if-browser-does-not-support-html5s-video-tag)

上面的帖子显示了一种似乎对我有用的方法。这是基于我上面的代码的输出：

```
<video autoplay>
    <source src="/resources/video/product-hero.mp4.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"' />
    <source src="/resources/video/product-hero.webmhd.webm" type='video/webm; codecs="vp8, vorbis"' />
    <img src="/images/product/product-parent-hero.jpg" title="Your browser does not support the <video> tag">
</video> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T05:57:57.163

IE7 浏览器不支持视频元素。我们必须为视频标签编写后备代码。这是我的代码:)

```
<video controls="controls" autoplay="autoplay" 
poster="#" width="212" height="160">
    <source src="http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4" type="video/mp4" />
    <source src="http://clips.vorwaerts-gmbh.de/big_buck_bunny.webm" type="video/webm" />
    <source src="http://clips.vorwaerts-gmbh.de/big_buck_bunny.ogv" type="video/ogg" />
    <object type="application/x-shockwave-flash" data="http://releases.flowplayer.org/swf/flowplayer-3.2.1.swf" 
    width="212" height="160">
        <param name="movie" value="http://releases.flowplayer.org/swf/flowplayer-3.2.1.swf" />
        <param name="allowFullScreen" value="true" />
        <param name="wmode" value="transparent" />
        <param name="flashVars" value="config={'playlist':['http%3A%2F%2Fsandbox.thewikies.com%2Fvfe-generator%2Fimages%2Fbig-buck-bunny_poster.jpg',{'url':'http%3A%2F%2Fclips.vorwaerts-gmbh.de%2Fbig_buck_bunny.mp4','autoPlay':true}]}" />
        <img alt="Big Buck Bunny" src="http://sandbox.thewikies.com/vfe-generator/images/big-buck-bunny_poster.jpg" width="640" height="360" title="No video playback capabilities, please download the video below" />
    </object>
</video> 
```

# mysql - 子选择替代品

> ID：14616455
> 
> 赞同：0
> 
> 时间：2013-01-31T00:27:16.583
> 
> 标签：mysql, performance, subquery

请看一下这个查询：

```
SELECT
    (SELECT COUNT(id) FROM result WHERE `mterm1` > r.mterm1 AND lesson_id = r.lesson_id) + 1 AS `pos_mt1_school`,
    (SELECT COUNT(id) FROM result WHERE `mterm1` > r.mterm1 AND lesson_id = r.lesson_id AND class_id = r.class_id) + 1 AS `pos_mt1_class`,

    (SELECT COUNT(id) FROM result WHERE `term1` > r.term1 AND lesson_id = r.lesson_id) + 1 AS `pos_t1_school`,
    (SELECT COUNT(id) FROM result WHERE `term1` > r.term1 AND lesson_id = r.lesson_id AND class_id = r.class_id) + 1 AS `pos_t1_class`,

    (SELECT COUNT(id) FROM result WHERE `mterm2` > r.mterm2 AND lesson_id = r.lesson_id) + 1 AS `pos_mt2_school`,
    (SELECT COUNT(id) FROM result WHERE `mterm2` > r.mterm2 AND lesson_id = r.lesson_id AND class_id = r.class_id) + 1 AS `pos_mt2_class`,

    (SELECT COUNT(id) FROM result WHERE `term2` > r.term2 AND lesson_id = r.lesson_id) + 1 AS `pos_t2_school`,
    (SELECT COUNT(id) FROM result WHERE `term2` > r.term2 AND lesson_id = r.lesson_id AND class_id = r.class_id) + 1 AS `pos_t2_class`,

    r.*, student.* FROM result r

LEFT JOIN lessons lesson ON r.lesson_id = lesson.id
LEFT JOIN students student ON r.student_id = student.id
LEFT JOIN classes class ON student.class_id = class.id

WHERE student.id = 217 ORDER BY lesson.id ASC 
```

我想显示学生的考试成绩。因此，首先从表中选择他的成绩（考试成绩）`result`，然后加入`lessons`显示课程名称，最后计算学生在他所在班级和学校的每节课中的位置。（根据他的考试成绩）

该查询工作正常，但执行大约需要 2 秒。（性能问题）

该查询是否有任何优化？（以及它的子选择查询的替代方案）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:22:27.347

您正在子选择中进行累积计数。

我不能轻易想到在 MySQL 中在单个查询中执行此操作的另一种方法。如果“=”中的“>”，则可以将其转换为连接。但在这种情况下这是不可能的。

您可以使用如下查询将其转换为具有聚合的显式交叉联接：

```
SELECT sum(case when r2.mterm1  > r.mterm1 then 1 else 0 end)+1 as `pos_mt1_school`,
       sum(case when r2.mterm1 > r.mterm1 and r2.class_id = r.class_id) + 1 then 1 else 0 end) AS `pos_mt1_class`,
       . . .
    r.*, student.*
FROM result r LEFT JOIN
     lessons lesson
     ON r.lesson_id = lesson.id LEFT JOIN
     students student
     ON r.student_id = student.id LEFT JOIN
     classes class
     ON student.class_id = class.id join
     result r2
     on r.lesson_id = r2.lesson_id
WHERE student.id = 217
group by r.result_id
ORDER BY lesson.id ASC 
```

我不确定这会比原始版本快。顺便说一句，原始版本将通过添加两个索引来加快速度：result(lesson_id, term2) 和 result(less_id, class_id, term2)。

# android - Android：更新 v.layout 参数后调用 requestLayout() 导致布局恢复到原来的位置

> ID：14616461
> 
> 赞同：0
> 
> 时间：2013-01-31T00:28:27.063
> 
> 标签：android, animation, android-side-navigation

我有包含两个相对布局的框架布局，一个在另一个之上。当用户单击一个按钮时，顶部的按钮会向右移动 80% 的屏幕。然后底部的一个变成可点击的。这就是它的样子。

```
 FrameLayout
          RelativeLayout (bottom)              RelativeLayout (top)
            FilterWidgets                   Open/close button, ListView 
```

在 3.0+ 上使用新的动画 api（Property base Animation）很容易实现。对于 3.0 之前的版本，因为动画是基于视图的。所以我最终手动修改了 onAnimationEnd 上的布局属性。调用 requestLayout 使其永久化，但只是为了找出布局恢复到原始位置。有人知道如何永久移动布局吗？

如果您想查看全貌，请参阅我的另一篇文章： [https ://stackoverflow.com/questions/14541265/changecursor-cause-layout-container-of-the-listview-to-reposition](https://stackoverflow.com/questions/14541265/changecursor-cause-layout-container-of-the-listview-to-reposition)

```
theTranslationX.addListener(new AnimatorListenerAdapter() {

                    @Override
                    public void onAnimationEnd(Animator nullPointer) {
                        v.clearAnimation();
                        int theL = isMenuOn() ? 0 : v.getLeft() + getFilterWidth();
                        int theR = isMenuOn() ? v.getWidth() : v.getLeft() + getFilterWidth() + v.getWidth();
                        int theHeight = v.getHeight();
                        int theT = 0;
                        v.layout(theL, theT, theR, theHeight);
                        v.requestLayout();
                    }
                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T17:35:39.077

这已经晚了 9 个月，但请尝试使用：

```
yourView.layout(left,top,right,bottom); //all parameters are type int 
```

但是我认为这不是永久性的，当您调用时视图的位置仍会被重置`requestLayout()`，但请尝试一下。

# f# - F# 方法重载解析不如 C# 聪明？

> ID：14616462
> 
> 赞同：7
> 
> 时间：2013-01-31T00:28:33.460
> 
> 标签：f#

说，我有

```
member this.Test (x: 'a) = printfn "generic"
                           1
member this.Test (x: Object) = printfn "non generic"
                               2 
```

如果我用 C# 调用它

```
var a = test.Test(3);         // calls generic version
var b = test.Test((object)3); // calls non generic version
var c = test.Test<object>(3); // calls generic version 
```

但是，在 F#

```
let d = test.Test(3);  // calls non generic version
let e = test.Test<int>(3); // calls generic version 
```

所以我必须添加类型注释以获得正确的重载方法。这是真的？如果是这样，那么既然已经推断出参数类型，为什么 F# 不能自动正确解析？（无论如何，F# 的重载决议的顺序是什么？总是`Object`比它的继承类更受欢迎？）

`Object`如果一个方法有两个重载，其中一个将参数作为类型，另一个是泛型​​并且都返回相同的类型，这有点危险。（就像在这个例子中，或者`Assert.AreEqual`在单元测试中），那么我们很可能在没有通知的情况下得到了错误的重载（不会是任何编译器错误）。不会有问题吗？

更新：

有人可以解释

*   为什么 F# 解析`Assert.AreEqual(3, 5)`为`Assert.AreEqual(Object a, Object b)`但不是`Assert.AreEqual<T>(T a, T b)`

*   但 F# 解析`Array.BinarySearch([|2;3|], 2)`为`BinarySearch<T>(T[]array, T value)`但不是`BinarySearch(Array array, Object value)`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T10:41:16.433

> F# 方法重载解析不如 C# 聪明？

*我不认为这是真的。方法重载使类型推断变得更加困难。F# 进行了合理的权衡，以使方法重载可用并且类型推断尽可能强大。*

当您将值传递给函数/方法时，F# 编译器会自动将其向上转换为适当的类型。这在许多情况下都很方便，但有时也会令人困惑。

在您的示例中，`3`向上转换为`obj`类型。两种方法都适用，但选择了*更简单*（非通用）的方法。

[规范中的第 14.4 节 Method Application Resolution](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/spec.html#_Toc335819028)非常清楚地指定了重载规则：

> 1) 更喜欢其使用不限制用户引入的泛型类型注释的使用等于另一种类型的候选人。
> 
> 2) 首选不使用 ParamArray 转换的候选人。如果两个候选者都使用类型为 pty1 和 pty2 的 ParamArray 转换，并且 pty1 可能包含 pty2，则更喜欢第二个；也就是说，使用具有更精确类型的候选。
> 
> 3) 更喜欢没有 ImplicitlyReturnedFormalArgs 的候选人。
> 
> 4) 更喜欢没有 ImplicitlySuppliedFormalArgs 的候选人。
> 
> 5) 如果两个候选者有未命名的实际参数类型 ty11...ty1n 和 ty21...ty2n，并且每个 ty1i 要么
> 
> 一个。可能包含 ty2i，或
> 
> 湾。ty2i 是 System.Func 类型， ty1i 是其他一些委托类型，然后更喜欢第二个候选者。也就是说，更喜欢任何具有更具体的实际参数类型的候选者，并认为任何 System.Func 类型都比任何其他委托类型更具体。
> 
> 6）更喜欢不是扩展成员的候选人而不是候选人。
> 
> 7) 要在两个扩展成员之间进行选择，请选择最近使用 open 产生的那个。
> 
> 8) 更喜欢非通用的候选而不是通用的候选——也就是说，更喜欢具有空 ActualArgTypes 的候选。

我认为创建明确的重载方法是用户的责任。您始终可以查看推断类型以查看您是否正确执行它们。例如，您的修改版本没有歧义：

```
type T() =
    member this.Test (x: 'a) = printfn "generic"; 1
    member this.Test (x: System.ValueType) = printfn "non-generic"; 2

let t = T()
let d = t.Test(3)  // calls non-generic version
let e = t.Test(test) // call generic version 
```

**更新：**

它归结为一个核心概念，[**协方差**](http://en.wikipedia.org/wiki/Covariance_and_contravariance_%28computer_science%29)。F# 不支持数组、列表、函数等的协变。确保类型安全通常是一件好事（参见[此示例](http://en.wikipedia.org/wiki/Covariance_and_contravariance_%28computer_science%29#Arrays_in_C.23_and_Java)）。

所以很容易解释为什么`Array.BinarySearch([|2;3|], 2)`解析为`BinarySearch<T>(T[] array, T value)`. 这是关于函数参数的另一个示例，其中

```
T.Test((fun () -> 2), 2) 
```

解决为

```
T.Test(f: unit -> 'a, v: 'a) 
```

但不是

```
T.Test(f: unit -> obj, v: obj) 
```

# java - Apache Wink 1.2 - 如何将返回值添加到 ResponseHandler 的 messageContext？

> ID：14616470
> 
> 赞同：0
> 
> 时间：2013-01-31T00:29:18.803
> 
> 标签：java, json, rest, jackson, apache-wink

我对 Wink 比较陌生，并试图调试一个缺陷，其中包含字节数组的 POJO [我认为] 被不正确地序列化为 json 以进行响应。不正确的意思是我将 unicode 字符存储为已提取到字节数组中的 blob，并且当字节数组序列化为 json 时，它被解码为 un​​icode 字节应表示的 UTF-8 字符以外的其他字符。

在试图追踪这个问题时，我已经验证了字节看起来与我期望的一样，直到它们从我的请求资源返回。我的@GET 请求资源方法返回一个列表。我通过阅读指南了解到

1.  RequestHandler 链被执行并最终调用我的资源方法......
2.  资源方法（在这种情况下为@GET）的返回应该进入传递给 ResponseHandler 链的消息上下文，我认为......

我担心的是我的资源方法返回的 pojo 的内容（包含一个 byte[]）没有被正确序列化，并且正在生成发送给用户的无效 json 内容。我返回的 List 如何进入 messageContext？

我无法将调试器附加到运行此应用程序的机器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T00:57:18.190

我部分回答了我的问题。从资源方法返回的对象附加到 MessageContext 对象的 responseEntity 属性。我假设 messageContext.setResponseEntity() 由 org.apache.wink.server.handlers.RequestHandler.InvokeMethodHandler 调用，但尚未验证这一点。

我仍然必须弄清楚为什么，当我的 byte[] 被序列化为 json 时，它没有假设 UTF-8 编码（并随后破坏了我的特殊字符）

# android - 安卓跟踪错误

> ID：14616480
> 
> 赞同：0
> 
> 时间：2013-01-31T00:30:53.847
> 
> 标签：android, android-emulator

在 android 开发期间，我收到以下错误，我的应用程序将无法加载

```
error opening trace file: No such file or directory (2) 
```

可能是什么原因？

# android - 需要在Android中获取客户端服务器的IP地址，有没有更好的方法？

> ID：14616483
> 
> 赞同：1
> 
> 时间：2013-01-31T00:31:09.803
> 
> 标签：android, sockets, networking, client-server

我使用套接字将两个 Android 平板电脑连接为使用同一路由器的 wifi 网络。一个是服务器，另一个是客户端。

问题是每次我想连接客户端和服务器平板电脑时，我都必须在客户端平板电脑中输入服务器平板电脑的 IP 地址。有没有办法避免这种情况？

在联网之前，我还没有弄清楚如何将服务器 IP 地址发送到客户端平板电脑。

我希望有一种方法可以将两个平板电脑联网，而无需知道服务器平板电脑的 IP 地址。

一个想法是让服务器平板电脑连接到用 php 编写的网站，让网站获取 IP 地址并将其存储在数据库中。接下来我会让客户端平板电脑从该网站获取 IP 地址。然后具有服务器 IP 的客户端平板电脑将能够建立连接。所有这些都将避免用户在每次想要连接时都必须知道 IP 并输入它。

我相信其他人以前做过类似的事情并解决了这个问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:47:16.963

如果Android服务器无法分配固定的公网IP地址，也就是说它使用DHCP获取LAN IP，它可以向DHCP服务器请求特定的IP地址（也许你需要对路由器进行一些配置），也就是这里的路由器。

另一种方法是使用反向地址解析协议 (RARP)，您可以使用该协议向交换机询问具有特定 MAC 地址的主机的 IP 地址。您的服务器 Android 手机的 MAC 地址是固定的。

这些只是理论上可行的。您需要查看在 Android 手机中调用的 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T01:08:16.200

我有这种安卓应用程序。我所做的是使用多播网络。[在此处](http://lycog.com/programming/multicast-programming-java/)查看示例

由于组播网络使用组 IP，这是我的建议

*   服务器平板电脑将充当接收器
*   客户端将成为发送者（他们会将本地 IP 发送给接收者）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-09T12:06:06.580

连接后，您可以使用新客户端检索套接字地址

( 套接字客户端 = server.accept(); )

从

```
 client.getLocalAddress().toString()                //ip server
        client.getRemoteSocketAddress().toString()         //ip client 
```

并将它们存储在 HashMap 列表中，例如：

```
 String name=client.toString();
        name=name.substring(name.indexOf("/")+1,name.indexOf(","));
        List<String> index = new ArrayList<String>(list.keySet());
        if(index.indexOf(name)<0)
        list.put(name,client.getRemoteSocketAddress().toString()); 
```

# jquery - 循环通过由 Jquery 调用的 AJAX，该 AJAX 拉取远程 HTML，然后解析特定条件的数据并拉取 html tr

> ID：14616484
> 
> 赞同：1
> 
> 时间：2013-01-31T00:31:14.140
> 
> 标签：jquery, foreach, html-parsing, google-chrome-app, data-objects

好的首先这是我的第一篇文章，所以我首先为我可能犯的任何“新手”错误道歉。我将尽可能详细并尽可能地进行布局。

我在做什么：

创建供公司内部使用的 Chrome 应用程序。

问题：

通过包含来自加载的 ajax 调用的完整 HTML 数据的 Ajax 调用进行解析：

我无法访问的内容：

基于服务器的 PHP 或 MYSQL。

我可以访问的内容：

包含我需要循环的数据的所有页面的完整 html 数据，以及通过 put 和 get 将新数据发布到服务器。

应用程序已设置访问跨域数据的权限，因此我不会遇到 ajax 问题和它跨域策略。对于我需要提取的页面，所有数据都成功提取。

我正在使用什么：Jquery Javascript 用于可能支持或不支持的内容，或者我对 J Query 缺乏了解，因为它非常强大并且仍在尝试掌握不同的可用 API。

问题：

我能够使用我需要的 html 数据加载 ajax 数据。我已经列出了在我使用 Jquery“查找”在我最初使用 ajax 进行的调用的 html 中定位 tbody 以及到目前为止我过滤掉的内容之后 html 的外观。我还将它打印到 chrome 控制台中的 consol.log(variablename) 。我在代码下方列出了我对这些数据的目标。我不担心跨浏览器兼容性，因为这将是一个仅限 chrome 的应用程序，其他浏览器不会使用该代码。

```
<tbody>
<tr>
<td><strong>Header 1</strong></td>
<td><strong>Header 2</strong></td>
<td><strong>Header 3</strong></td>
<td><strong>Header 4</strong></td>
<td><strong>Header 5</strong></td>
<td><strong>Header 6</strong></td>
<td><strong>Header 7</strong></td>
</tr>
<tr >
<td>image location link</td>
<td>another link</td>
<td>Product</td>
<td>New</td>
<td></td>
<td>date</td>
<td></td>
<td>another link to an account</td>
</tr>
<tr>
<td>image location link</td>
<td>another link</td>
<td>Product2</td>
<td>New</td>
<td></td>
<td>date</td>
<td></td>
<td>another link to an account</td>
</tr>
<tr>
<td>image location link</td>
<td>another link</td>
<td>Product</td>
<td>old</td>
<td></td>
<td>date</td>
<td></td>
<td>another link to an account</td>
</tr>
</tbody> 
```

目标：上面的 Tbody 将列出更多的 tr，但它是可用的示例。我每次都需要解析数据并找到每个 tr 与包含相同产品类型的 td 和列出“新”的 td。

我非常感谢你们在这方面的帮助，并期待听到你们的回应。

我尝试使用 Jquery：

尝试使用包含和每个循环来创建一个新的数据对象。与其提供一些写得很糟糕的代码哈哈，我想如果有人可以提供一些很棒的框架代码，如果可能的话，这将帮助我更上一层楼。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:25:05.300

因此，您可以找到新的或查找或旧的并摆脱旧的。由你决定。

这是另一个提供第二个表的更新。这应该让你开始。基本上它会跳过第一个“tr”，因为那是标题，并找到在 4 位置具有 New 的其余部分。Closest 遍历 dom 到第一个父级。

[http://jsfiddle.net/JzUrq/2/](http://jsfiddle.net/JzUrq/2/)

```
var data = $("#holder").html();

$("#newTable").append($(data).find("tr:eq(0)"));

$(data).find("tr:gt(0) :nth-child(4):contains('New')").closest('tr').each(function(index){
    var row = "<tr>"+$(this).html()+"</tr>";
    $("#newTable").append(row);
}); 
```

您可以做的其他事情是将 html 设置为整个表格并简单地隐藏旧的任何内容。

# cakephp - CakePHP 和 Opauth

> ID：14616486
> 
> 赞同：2
> 
> 时间：2013-01-31T00:31:31.623
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

我开始[为 CakePHP 实现 Opauth](https://github.com/uzyn/cakephp-opauth)。通过 Facebook、Twitter 轻松登录真是太棒了……

问题是一旦 Opauth 返回登录数据，将用户登录到 CakePHP 的有效方法是什么？

Opauth 不会让用户登录到 CakePHP。我想我应该创建一个用户并将 facebook 或其他身份验证信息保存到数据库。有没有一个插件可以让我轻松做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-03T19:28:42.290

我喜欢 CakePHP 2.0 的一件事是身份验证插件的工作方式，您可以真正自定义一种或多种身份验证方法。同时，这让开发人员可以“挂钩”自定义身份验证插件以集成解决方案。

插件页面有你的答案，差不多

*   转到[https://github.com/uzyn/cakephp-opauth#how-to-use](https://github.com/uzyn/cakephp-opauth#how-to-use)

*   检查步骤`#6`“*验证后，用户将被重定向到`Router::url('/opauth-complete')`可在以下位置检索的经过验证的身份验证响应数据`$this->data`*”

*   完成后，你就有了像他们的例子一样的代码`public function opauth_complete() {...`

*   在此功能中，您将使用`$this->data`查找已通过身份验证的用户

*   我有时使用的一种方法是通过 Opauth 示例提供的两条信息来查找用户*：用户名和电子邮件*

*   你可以使用类似的东西`$loginUser = $this->User->find('first', array('fields'=>array('User.*'), 'conditions'=>array('User.username'=>$this->data['username'], 'User.email'=>$this->data['email']));`

*   一旦您拥有该用户，`$loginUser`您就可以调用`$this->Auth->login($loginUser)`，您现在将与该用户拥有一个 AuthSession ！

如果您有任何问题，请告诉我。

# forms - django-rest-framework - 在可浏览的 API 中自动生成表单？

> ID：14616489
> 
> 赞同：15
> 
> 时间：2013-01-31T00:31:38.137
> 
> 标签：forms, django-models, python-2.7, django-rest-framework

不确定我是否使用了正确的词汇。在 django-rest-framework 免费提供的可浏览 api 中，我想知道是否有一种方法可以自动生成类似于我们定义 ModelForms 的表单。在某些情况下，这将使我们能够更轻松地测试 API 的输入。我目前正在使用 ModelSerializers 和通用视图 APIView 以防万一。

我已经阅读了文档（此时已阅读了好几次），但没有在任何地方看到它。

![截屏](../Images/18a8c613b6a20d8c7a29e401fa1cde94.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-31T13:32:03.070

如果您使用通用的基于类的视图，您将免费获得它。尝试[http://restframework.herokuapp.com](http://restframework.herokuapp.com)上的实时教程，以用户之一的身份登录，以便您可以创建一些片段。例如用户：'max'，密码：'max'。

任何视图子类化`GenericAPIView`和设置 a`serializer_class`都会获得该行为，因为 REST 框架可以确定表单的外观。

例如：

![表单输入截图](../Images/f7255c8d6dab7a8c9a883e92fba50c32.png)

（注意屏幕截图底部的表单输入）

如果您刚刚开始工作，`APIView`您将获得通用内容输入（例如 json），就像您包含屏幕截图一样，这也很有用，但不如表单那么方便。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-12-09T15:39:33.250

创建一个适合您想要的表单输入字段的序列化程序类，并将其设置在您的 APIView 上，如下所示；

```
class MyView(APIView):
    serializer_class = MySerializer  # Used for the form in the browsable api 
```

这非常有效。

基于模型的序列化程序类示例：

```
from rest_framework import serializers

class MySerializer(serializers.ModelSerializer):
    class Meta:
        model = MyModel 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-02T23:02:15.837

```
class MyApiView(APIView):
    """My Demo API View"""
    serializer_class = serializers.MySerializers 
```

确保您使用的是名称“serializer_class”，而不是任何其他名称，如 serializers_class。

使用确切的“serializer_class”将在可浏览的 API 中自动生成表单

# sql - 使用连接从另一个更新数据库？

> ID：14616491
> 
> 赞同：0
> 
> 时间：2013-01-31T00:31:40.467
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我正在尝试使用连接从另一个数据库更新表并且遇到困难。这就是我在伪中尝试做的事情：

```
UPDATE [Database1].[dbo].[Sessions]
   SET [SpeakerID] = ?STATEMENT1?
 WHERE ?STATEMENT2? 
```

对于“Statement1”，这将来自另一个具有以下列的数据库和表：SessionID 和 SpeakerID。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:37:09.020

```
UPDATE  a
SET     a.SpeakerID = b.colName          -- SET valoue here
FROM    Database1.dbo.Sessions a
        INNER JOIN Database2.dbo.Sessions b
            ON a.SessionID = b.SessionID -- assumes that their 
                                         -- relationship column is SessionID, 
                                         -- change it in your original columnName
WHERE   .... 
```

`a`并`b`称为别名。当您有较长的源名称时，它们很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T00:44:22.217

尝试

```
UPDATE [Database1].[dbo].[Sessions]
SET
    Sessions.col1 = other_table.col1
FROM
    [Database1].[dbo].[Sessions] Sessions
INNER JOIN
    [Database2].[dbo].other_table AS other_table
ON
    Sessions.id = other_table.id
WHERE Sessions.id = ?? 
```

请注意，如果数据库在另一台服务器上，您需要先创建链接服务器

[http://msdn.microsoft.com/en-us/library/ff772782.aspx](http://msdn.microsoft.com/en-us/library/ff772782.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T00:36:44.310

```
UPDATE L
  SET SpeakerID = R.SpeakerID
  FROM dbo.LocalTable AS L
  INNER JOIN RemoteDatabase.dbo.RemoteTable AS R
  ON L.SomeValue = R.SomeValue; 
```

[这实际上与这个问题](https://stackoverflow.com/questions/1604091/update-a-table-using-join-in-sql-server/1604212#1604212)没有什么不同，只是您必须向联接中的一个表添加数据库前缀。

# python - 循环中的字符串操作，然后读取它

> ID：14616493
> 
> 赞同：-1
> 
> 时间：2013-01-31T00:32:08.257
> 
> 标签：python, string

我确信这很简单，但是在谷歌搜索一个小时后（python 新手），我仍然不确定用谷歌来解决我的问题 :( 你可以从我当前的代码和我想要的结果中看到我正在努力实现！

谢谢马特。

代码 ：

```
usernames = ['joe', 'john', 'fred']

joe_image = 'c:\aaa\blahblah.jpg'
john_image = 'c:\aaa\foobar.jpg'
fred_image = 'd:\aaa\1234.jpg'

for z in usernames:
    print z
    y = z + '_image'
    print y 
```

结果 ：

```
joe
joe_image
john
john_image
fred
fred_image 
```

期望的结果

```
joe
c:\aaa\blahblah.jpg
john
c:\aaa\foobar.jpg
fred
d:\aaa\1234.jpg 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:33:50.200

你需要一个叫做[字典的东西](http://docs.python.org/2/tutorial/datastructures.html)

```
lookup_path = {'joe': 'C:\whatev', 'john':'C:\else'}
for z in usernames
    print lookup_path[z] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T00:34:14.377

您正在打印一个恰好是变量名称的字符串，而不是变量本身。

您可能想要完全重新考虑您的程序并改用字典。

```
users = {'joe':'c:\aaa\blahblah.jpg','john':'c:\aaa\foobar.jpg','fred':'d:\aaa\1234.jpg'} 
```

然后你就可以查到`users['joe']`了`'c:\aaa\blahblah.jpg'`。

但是，如果您真的想用字符串按名称引用变量，则可以使用`eval`. 不过，这是非常糟糕的做法，应该始终小心谨慎，希望永远不要这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T00:40:17.140

要么你可以有两个单维数组，要么你让你的初始数组是二维的而不是一维的

所以要么你会

User_Names(x,y,z) 和 User_Photos(x,y,z) 其中 User_Photo(x) 用于 User_Name(x) 其中 User_Photo(y) 用于 User_Name(y) 等

或者你会有 User_Info(NameColumn, PhotoColumn)

然后 UserInfo(1 , 0) 可能是 "Joe" 然后 UserInfo(1 , 1) 可能是 "c:\aaa\blahblah.jpg")

和

然后 UserInfo(2 , 0) 可能是 "John" 然后 UserInfo(2 , 1) 可能是 "c:\aaa\foobar.jpg")

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T01:05:26.607

另一种方法是使用namedtuple，您需要为清晰起见付出失去简洁性的代价。

```
from collections import namedtuple

Pair = namedtuple('Pair', ['name', 'filename'])

them = [ Pair('joe', r'c:\aaa\blahblah.jpg'),
        Pair('john', r'c:\aaa\foobar.jpg'),
        Pair('fred', r'd:\aaa\1234.jpg')
        ]

for who in them:
    print who.name
    print who.filename 
```

给

```
joe
c:\aaa\blahblah.jpg
john
c:\aaa\foobar.jpg
fred
d:\aaa\1234.jpg 
```

# sql - 从传递闭包表中找到最小公共祖先

> ID：14616495
> 
> 赞同：3
> 
> 时间：2013-01-31T00:32:11.440
> 
> 标签：sql, postgresql, transitive-closure-table, transitive-closure, least-common-ancestor

我有一个表表示组织层次结构的传递闭包（即，它是一个具有单个根的树）：

```
create table ancestry (
    ancestor   integer,
    descendant integer,
    distance   integer
); 
```

我有另一个表，其中包含每个用户被允许访问的组织：

```
create table accessible (
    user         integer,
    organization integer
); 
```

系统向用户显示与用户可以访问的每个组织相关的支出汇总。我总是可以首先向用户展示公司的视图（即根），向用户展示直接子组织的列表以及他的组织对总数的贡献。在大多数情况下，只有一个孩子，并且用户需要在看到多个孩子之前向下钻取几个级别。我更愿意从第一个显示多个孩子的组织（即 LCA）开始演示。

对于给定的用户，我可以很容易地找到到根目录的路径集，但在找到最不共同的祖先时遇到了麻烦。我正在使用 postgresql 9.1，但更喜欢与数据库无关的解决方案。在最坏的情况下，我可以将 root 的路径拉回到应用程序的代码中并在那里计算 LCA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:26:52.637

I took a fresh look at this and developed the following solution. I used a common-table-expression to make it easier to understand how it operates but it could easily be written using a sub-query.

```
with
hit (id, count) as (
    select
        ancestry.ancestor
       ,count(ancestry.descendant)
    from
        accessible
        inner join ancestry
            on accessible.organization = ancestry.descendant
    where
        accessible.user = @user_id
    group by
        ancestry.ancestor
)
select
    ancestry.descendant as lca
from
    hit
    inner join ancestry
        on ancestry.descendant = hit.id
       and ancestry.ancestor = @company_id
order by
    hit.count desc
   ,ancestry.distance desc
limit 1
; 
```

The hit CTE counts, for each organization in the hierarchy, the number of paths from a child to the root that traverse the organization. The LCA is then the organization with the most traversals. In the event of a tie, the organization farthest from the root (i.e., max(distance)) is the actual LCA. This is best illustrated with an example.

```
 A
        |
        B
       / \
      C   D 
```

Assuming we wish to find the LCA of nodes C and D from the tree above. The hit CTE produces the following counts:

```
Node    Count
  A       2
  B       2
  C       1
  D       1 
```

The main query adds the distance:

```
Node    Count    Distance
  A       2         0
  B       2         1
  C       1         2
  D       1         2 
```

The main query then orders the results by descending count and distance

```
Node    Count    Distance
  B       2         1
  A       2         0
  C       1         2
  D       1         2 
```

The LCA is the first item in the list.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T01:02:38.447

只是预感而不是 db 不可知论 (SQL Server) 但适应性强

```
SELECT TOP 1
       a1.ancestor
FROM   ancestor a1
       INNER JOIN
       ancestor a2 ON a1.ancestor=a2.ancestor
WHERE  a1.descendent = @Dec1
       AND
       a2.descendent = @Dec2
ORDER BY a1.distance DESC 
```

如果你想在 SQLFiddle 中放一些数据，我可以玩一下。

# magento - Magento 自定义“订单”属性/管理员输入和显示

> ID：14616499
> 
> 赞同：5
> 
> 时间：2013-01-31T00:32:44.650
> 
> 标签：magento, model, attributes

我需要向订单模型（“ **dynamics_ord** ”）添加自定义属性。

此属性需要由管理员定义，在成功保存订单后，最好在主订单块中的**admin/sales_order/view上。**

它需要独立于发票/发货等 - 可能附加到订单“ `edit`”事件。

我为其他实体（尤其是客户）制作了许多自定义属性。我意识到这是同一个过程。但我不清楚如何使用此属性修改订单，因为没有明显的“更新”操作。“编辑”可能有意义，但我不想不必要地重复订单。

一旦这个 attr 就位，我想在**sales_order/index**网格中显示它。（注意=查看[此相关线程](https://stackoverflow.com/questions/14695352/magento-add-custom-attribute-column-to-sales-order-index-grid)以获取有效的解决方案。）

**此模块的最终状态**（以及需要此解决方案的任何其他人）：

**/sales_order/view/**截图： ![截屏](../Images/4ec43bd0a32dc2c581fa74c98401fea6.png)

**WACI_SalesExt**

```
app/local/WACI/SalesExt
 /Block
   /Adminhtml
     /Sales
       -Dynamicsord.php
 /controllers
   /Adminhtml
     /Sales
       - OrderController.php
 /etc
  - config.xml
 /Helper
   - Data.php
 /sql
   /waci_salesext_setup
     -mysql4-install-0.2.0.php 
```

**配置文件**

```
<?xml version="1.0"?>
<config>
    <modules>
        <WACI_SalesExt>
            <version>0.2.0</version>
        </WACI_SalesExt>
    </modules>
    <global>

        <helpers>
            <WACI_SalesExt>
                <class>WACI_SalesExt_Helper</class>
            </WACI_SalesExt>
        </helpers>

        <blocks>
            <WACI_SalesExt>
                <class>WACI_SalesExt_Block</class>
            </WACI_SalesExt>

            <adminhtml> <!-- unclear if i need this second declaration for admin-->
                <WACI_SalesExt>
                    <class>WACI_SalesExt_Block</class>
                </WACI_SalesExt>
            </adminhtml>

        </blocks>

        <models>
            <WACI_SalesExt>
                <class>WACI_SalesExt_Model</class>
                <resourceModel>salesext_mysql4</resourceModel>
            </WACI_SalesExt>

        </models>

        <resources>
            <waci_salesext_setup>
                <setup>
                    <module>WACI_SalesExt</module>
                    <class>Mage_Sales_Model_Mysql4_Setup</class>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </waci_salesext_setup>
            <waci_salesext_write>
                <connection>
                    <use>core_write</use>
                </connection>
            </waci_salesext_write>
            <waci_salesext_read>
                <connection>
                    <use>core_read</use>
                </connection>
            </waci_salesext_read>
        </resources>

    </global>

<admin>
    <routers>
        <adminhtml>
            <use>admin</use>
            <args>
                <modules>
                    <WACI_SalesExt after="Mage_Adminhtml_Sales">WACI_SalesExt_Adminhtml</WACI_SalesExt>
                </modules>
            </args>
        </adminhtml>    
    </routers>
</admin>
</config> 
```

**WACI / SalesExt / sql / waci_salesext_setup / mysql4-install-0.2.0.php**

```
 $installer = $this;
    $installer->startSetup();

    $installer->addAttribute('order', 'dynamics_ord', array(
                                'type'              =>'varchar', 
                                'visible'           => true, 
                                'required'          => false, 
                                'is_user_defined'   => false, 
                                'note'              => 'Dynamics ORD')
                            );

$installer->getConnection()->addColumn($installer->getTable('sales_flat_order'), 'dynamics_ord','VARCHAR(255) NULL DEFAULT NULL');
$installer->getConnection()->addColumn($installer->getTable('sales_flat_order_grid'), 'dynamics_ord','VARCHAR(255) NULL DEFAULT NULL');

    $installer->endSetup(); 
```

**模板/销售/订单/视图/info.phtml**

```
<?php echo $this->getLayout()->createBlock('WACI_SalesExt/adminhtml_sales_dynamicsord')->setOrderId($_order->getId())->toHtml() ?> 
```

**模板/销售/ord_form.phtml**

```
<?php if ('sales_order' == Mage::app()->getRequest()->getControllerName() ): ?>
<tr>
    <td class="label"><label for="dynamics_ord">Dynamics ORD</label></td>
    <td class="value">
        <form action="<?php echo $this->getFormUrl(); ?>" method="post" id="ord_form">
            <input type="hidden" name="form_key" value="<?php echo $this->getFormKey(); ?>" />
            <input type="hidden" name="token" value="<?php echo $this->getToken(); ?>" />  
            <div class="">
                <input type="text" class="input-text" name="dynamics_ord" value="<?php echo $this->getOrder()->getData('dynamics_ord'); ?>" style="width:150px; float:left; display:inline;" />
                <button onclick="editForm.submit()" style="float:left;margin:3px 10px 0;">Update</button>  
            </div> 
        </form>
        <script type="text/javascript">
            editForm = new varienForm('ord_form');
        </script>
    </td>
</tr>
<?php endif; ?> 
```

**WACI_SalesExt_Block_Adminhtml_Sales_Dynamicsord**

```
class WACI_SalesExt_Block_Adminhtml_Sales_Dynamicsord extends Mage_Adminhtml_Block_Template
{
    public function __construct()
    {
        parent::__construct();
        $this->setTemplate('sales/ord_form.phtml');
    }

    public function getOrder(){
        return Mage::registry('current_order');
    }

    public function getFormUrl(){
        return Mage::helper("adminhtml")->getUrl('*/sales_order/editord', array('order_id'=>$this->getOrder()->getId()) );
    }

} 
```

**WACI_SalesExt_Adminhtml_Sales_OrderController**

```
include_once Mage::getModuleDir('controllers', 'Mage_Adminhtml') . DS . 'Sales' . DS . 'OrderController.php';

class WACI_SalesExt_Adminhtml_Sales_OrderController extends Mage_Adminhtml_Sales_OrderController
{

    public function editordAction()
    {

        $postData = $this->getRequest()->getPost();

        Mage::log('WACI_SalesExt_Adminhtml_Sales_OrderController::ordEditAction'.print_r($postData, true) );

        $id = $this->getRequest()->getParam('order_id');
        $order = Mage::getModel('sales/order')->load($id);
        $order->setDynamicsOrd($postData['dynamics_ord']);

        $order->save();

        // return to sales_order view
        Mage::app()->getResponse()->setRedirect(Mage::helper('adminhtml')->getUrl("adminhtml/sales_order/view", array('order_id'=> $id)));

    }

} 
```

一直在寻找关于这个问题的一些信息，[这个 SO 线程](https://stackoverflow.com/questions/12936470/adding-a-new-attribute-to-order-in-magento)似乎非常接近我想要做的事情。但尚不清楚我能否通过此工作流程创建可编辑的输入。

我会注意到我在 Mage 1.11 - 我已经收集到标准 EAV 模式不再用于订单模型。

干杯 -

* * *

### 更新

（注意“当前”模块内容。）

*   该字段已添加到 sales_flat_order

*   WACI_SalesExt_Block_Adminhtml_Sales_Dynamicsord 块正在正确构建

*   我有一些正确的测试数据

在这一点上，我认为我的路由器设置不正确。在您的示例中，您调用了`<?php echo $this->getEditFormUrl(); ?>`. 我不确定这是否应该输出格式化的操作 url，但事实并非如此。我把自己的放进去，但它仍然没有正确地击中路由器。

目前，表单中的值 action =

```
 action ="http://my.domain.com/index.php/my_admin/sales_order/editord/key/2e56d7f560dc4d356e3ef9519764b8a84858e5cd40d3c1f5821a423b949b9a6a/" 
```

并且只是点击“找不到页面”。据我所知，路由器在这里*应该*是准确的。我尝试了许多不同的组合；我显然在管理路由器问题上遗漏了一些重要的东西。我知道`key/ee6`... 可能会惹恼我，但我不清楚如何适当地处理它。

* * *

### 更新

路由问题是一个简单的错误，我不必要地复杂化：我有一个拼写错误的目录名称“AdminHtml”与“Adminhtml” - 导致路由器迷路。

哦，Magento...

感谢@RS 的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T02:54:34.010

您可以尝试将“可编辑输入”添加到订单详细信息页面的“帐户信息”部分。

在 /app/design/adminhtml/default/default/template/sales/order/view/info.phtml

![在此处输入图像描述](../Images/1da1cd1d6971e65543a234987e7ed618.png)

添加

```
<?php echo $this->getLayout()->createBlock('salesext/adminhtml_editform')->setOrderId($_order->getId())->toHtml() ?> 
```

在你的街区

```
<?php

class WACI_SalesExt_Block_Adminhtml_Editform extends Mage_Adminhtml_Block_Template
{
    public function __construct()
    {
        parent::__construct();
       $this->setTemplate('salesext/edit_form.phtml');
    }

    public function getOrder(){
        return Mage::registry('current_order');
    }

   public function getFormUrl(){
       return Mage::helper("adminhtml")->getUrl('*/sales_order/editField', array('order_id'=>$this->getOrder()->getId());
  }
  ... 
```

在 /app/design/adminhtml/default/default/template/salesext/edit_form.phtml

```
<?php if ('sales_order' == Mage::app()->getRequest()->getControllerName() : ?>
<div id="change-order-email" style="display:none">
    <form action="<?php echo $this->getEditFormUrl(); ?>" method="post" id="edit_form">
        <input type="hidden" name="form_key" value="<?php echo $this->getFormKey(); ?>" />
        <input type="hidden" name="token" value="<?php echo $this->getToken(); ?>" />  
        <table cellspacing="4" class="form-list">
            <tr>
                <td>Field</td>
                <td><input .... class="required-entry validate-email" /></td>
            </tr>
        </table>
    </form>
    <button onclick="editForm.submit()">Change</button> 
</div>
<script type="text/javascript">
    editForm = new varienForm('edit_form');
</script>
<?php endif; ?> 
```

在 /app/code/local/CWACI/SalesExt/controllers/Adminhtml/Sales/OrderController.php

```
<?php
include_once Mage::getModuleDir('controllers', 'Mage_Adminhtml') . DS . 'Sales' . DS . 'OrderController.php';

class CWACI_SalesExt_Adminhtml_Sales_OrderController extends Mage_Adminhtml_Sales_OrderController
{

    public function editFieldAction()
    {
        $postData = $this->getRequest()->getPost();
        $id = $this->getRequest()->getParam('order_id');
        $order = Mage::getModel('sales/order')->load($id);
        $order->setFieldName($postData[field_name]);
        .....
        $order->save(); 
```

在你的 config.xml

```
...
<admin>
    <routers>
        <adminhtml>
            <use>admin</use>
            <args>
                <modules>
                    <CWACI_SalesExt after="Mage_Adminhtml_Sales">CWACI_SalesExt_Adminhtml</CWACI_SalesExt>
                </modules>
            </args>
        </adminhtml>    
    </routers>
</admin> 
```

......

另请参阅[从模块设置自定义管理主题](http://www.magentocommerce.com/wiki/4_-_themes_and_template_customization/admin/using_custom_admin_theme_templates)以防止直接对核心模板进行修改。

# ios - 如何向 Adob e Flash CS5.5 添加本机扩展

> ID：14616504
> 
> 赞同：1
> 
> 时间：2013-01-31T00:33:34.570
> 
> 标签：ios, flash, air, adobe

嘿伙计们，我正在开发一个 iPhone 应用程序，但我不太了解如何向它添加本机扩展。我需要访问地址簿，所以我使用的是联系人编辑器 - [http://extensionsforair.com/extensions/contact-editor/#comment-7488](http://extensionsforair.com/extensions/contact-editor/#comment-7488)，它是空气的本机扩展。

如果你能让我知道我该怎么做，我将不胜感激！

大卫

更新代码：

```
var contactEditor:ContactEditor= new ContactEditor(); 
```

这就是我用来为联系人编辑器创建新对象的方法。

所以如果我使用喜欢：

```
contactEditor.ContactsSimple(); 
```

没有任何反应，我没有快速选择 ContactsSimple()...您可以在网站顶部的评论之一中看到。

更新：

嘿，我实际上已经将它连接起来，但是当我尝试使用它进行测试时：

```
import pl.mllr.extensions.contactEditor.ContactEditor;

var contactEditor:ContactEditor;

contactEditor.getContactsSimple(); 
```

我收到此错误：

```
VerifyError: Error #1014: Class pl.mllr.extensions.contactEditor::ContactEditor could not be found.

    at runtime::ContentPlayer/loadInitialContent()
    at runtime::ContentPlayer/playRawContent()
    at runtime::ContentPlayer/playContent()
    at runtime::AppRunner/run()
    at ADLAppEntry/run()
    at global/runtime::ADLEntry() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:13:43.223

您使用的是 Flash 专业版吗？您只需要将 ANE 文件添加到项目中的构建路径。

> 在 Flash Professional CS6 中：
> 
> 创建 AIR for iOS 或 AIR for Android 类型的新项目。选择文件 > 发布设置。单击用于 ActionScript 设置的脚本旁边的扳手图标。选择库路径选项卡。单击 Browse For Native Extension (ANE) File 按钮并选择 com.milkmangames.nativeextensions.RateBox.ane 文件。
> 
> 在 Flash Builder 4.6 中：
> 
> 转到项目属性（在包资源管理器中右键单击您的项目并选择属性）。选择 ActionScript 构建路径并单击本机扩展选项卡。单击添加 ANE 并导航到 com.milkmangames.nativeextensions.RateBox.ane 文件。
> 
> 在 Flash 开发中：
> 
> 将 RateBoxAPI.swc 文件复制到您的项目文件夹中。在资源管理器面板中，右键单击 SWC 并选择添加到库。再次右键单击资源管理器面板中的 SWC 文件，选择选项，然后选择外部库。

看看[http://www.adobe.com/devnet/air/articles/ratebox-ane-ios-android.html](http://www.adobe.com/devnet/air/articles/ratebox-ane-ios-android.html)

## 编辑：

您需要实例化编辑器，以及导入事件文件。getContactsSimple() 也返回一个数组。

```
import pl.mllr.extensions.contactEditor.ContactEditor;
import pl.mllr.extensions.contactEditor.ContactEditorEvent;

var contactsEditor:ContactEditor = new ContactEditor();

var array:Array = contactsEditor.getContactsSimple(); 
```

但也许 ANE 存在错误，错误 #3500：扩展上下文没有名为 getContactsSimple 的方法。

您可能必须重建 ANE。 [http://forums.adobe.com/message/4574775](http://forums.adobe.com/message/4574775)

# php - foreach 循环中的 foreach 循环正在回显数组

> ID：14616505
> 
> 赞同：0
> 
> 时间：2013-01-31T00:33:49.127
> 
> 标签：php, arrays, loops, foreach, echo

我正在使用 cms perch 使用各种功能检索数据。我正在从各个子页面检索产品项目。我到目前为止的代码正在正常工作，可以在这里看到：[http ://www.ww.thirdfloordesign.net/products/70mm-couplers/](http://www.ww.thirdfloordesign.net/products/70mm-couplers/)

```
$raw = perch_pages_navigation(array(
    'from-path'=>'*',
    'skip-template'=>true
));

if (count($raw)) {
    $items = $raw;   
} else {
    // add else statement to output warning 'no products found in this category' or something
}

foreach($items as $item) {
    $product['ID'] = $item['pageNavText'];
    $product['title'] = $item['pageTitle'];
    $product['path'] = $item['pagePath'];
    $product['parent'] = $item['pageSubpagePath'];

    PerchSystem::set_vars(array(
        'product-id'=>$product['ID'],
        'product-title'=>$product['title'],
        'product-path'=>$product['path'],
        'product-parent'=>$product['parent']
    ));

    $product['image'] = perch_content_custom('Image', array(
        'page'=>$product['path'],
        'template'=>'product/_image.html',
        'sort'=>'_order',
        'count'=>1
    ), true);

    PerchSystem::set_var('product-image', $product['image']);

    $items[] = perch_content_custom('Product', array(
        'page'=>$product['path'],
        'template'=>'product/_product.html'
    ), true);
} 
```

在需要输出数据的地方，我正在使用以下代码，它似乎可以正常工作，只是它还回显了一个可以在页面上看到的数组。是因为我使用了重复的 $variables / 数组名称吗？请解决方案

```
<?php
    if (!empty($items)) {
?>
<ul class="product-grid">
<?php
    foreach($items as $item) {
        echo $item;
    }
?>
</ul>
<?php
    } else {
?>
<p class="alert alert-warning"><i class="icon-warning-sign"></i>No products found!</p>
<?php } ?> 
```

# javascript - JSON 回调中不显示警报

> ID：14616508
> 
> 赞同：2
> 
> 时间：2013-01-31T00:34:00.250
> 
> 标签：javascript, jquery, json

我相信对此有一个简单的解释。我无法理解为什么我的 javascript 中不显示以下警报：

```
<script>
   theURL = "gb.json?callback=?";
   $.getJSON(theURL, null, function(data) {
      alert('in json proc');
   });
</script> 
```

文件 gb.json 与包含脚本的 html 位于同一文件夹中。当我在 Firebug 中运行它时，它会得到 200 OK 的返回码，并且我看到了 gb.json 的内容。

这一定是我想念的非常简单的东西。应该显示警报，不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:35:33.507

看来您的服务器正在返回常规 JSON，而不是 JSONP。只需直接传递 URL，无需添加`callback`查询字符串：

```
$.getJSON('gb.json', function(data) {
    alert('in json proc');
}); 
```

# cpython - CPython：为什么较低（字符串方法）会创建新的内存位置？

> ID：14616514
> 
> 赞同：1
> 
> 时间：2013-01-31T00:34:21.387
> 
> 标签：cpython

这里发生了什么？：

```
>>> a, b, c = ("TEST", "test", "TEST".lower())
>>> map(id, [a,b,c])
[140341845003072, 140341845003216, 140341845003264]
>>> map(str, [a,b,c])
['TEST', 'test', 'test']
>>> map(type, [a,b,c])
[<type 'str'>, <type 'str'>, <type 'str'>] 
```

“TEST”和“TEST”.lower() 或“test”和“test”.lower() 不应该共享相同的内存位置吗？

**编辑**：我知道有一个新副本，但我认为当两个字符串相同时，它们共享相同的内存空间，即：

```
>>> a = "test" 
>>> b = "test"
>>> map(id, (a,b))
[140341845003216, 140341845003216]
>>> a is b
True 
```

在 Python 2.7.3 上，我得到：

```
>>> a = "test"
>>> a is a.lower()
False 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:37:46.480

[文档](http://docs.python.org/2/library/string.html#string.lower)很清楚。对于`string.lower()`：

> ```
> Return a copy of s, but with upper case letters converted to lower case. 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T12:22:14.810

如果您希望相同的字符串是相同的对象，`intern`它们。

默认情况下`None, True, False`是这样的；以及源中的常量，包括字符串，甚至跨模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-15T15:48:15.067

不能保证总是如此（相等的字符串总是相同的对象）。但正如其他人所指出的，它取决于 Python 实现（例如，对于带有 CPython 3.2.3 的 Dietrich，它是同一个对象）。

CPython 2.7 的代码很简单：[https ://github.com/albertz/CPython/blob/master/Objects/stringobject.c#L1984](https://github.com/albertz/CPython/blob/master/Objects/stringobject.c#L1984)

# linux - BASH 脚本：集成文档创建挂起

> ID：14616516
> 
> 赞同：0
> 
> 时间：2013-01-31T00:34:30.223
> 
> 标签：linux, bash, shell, redirect

我发现我的一段 bash 脚本导致挂断。我在这里提取它：

```
#!/bin/bash
cat << EndOfFspreadFile >> ./myscript.sh 
echo Enter Source Path : 
read SRCPATH
FILECNT=`find $SRCPATH/* 2>/dev/null | wc -l`
FILECNTERR=`find $SRCPATH/* 2>&1 | grep "find:" | wc -l`
echo count : $FILECNT
echo problems : $FILECNTERR
EndOfFspreadFile
echo done 
```

该脚本应该只是将集成块中的脚本部分附加到 myscript.sh 文件中。但它只是挂起！谢谢 ！- 穆罕默德 -

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:40:08.600

您的 $ 变量和反引号将得到扩展。您需要在脚本中转义它们。现在你最终搜索了整个文件系统。

基本上，`find $SRCPATH/* 2>/dev/null | wc -l`被执行为`find /* 2>/dev/null | wc -l`

以下是如何重写它（仅一行示例）：

```
FILECNT=\$(find \$SRCPATH/* 2>/dev/null | wc -l) 
```

顺便说一句，很容易找出你是否运行`bash -x <your script>`.

# mysql - 如何优化这个 Levenshtein 距离计算

> ID：14616518
> 
> 赞同：1
> 
> 时间：2013-01-31T00:34:41.690
> 
> 标签：mysql, levenshtein-distance

`Table a`大约有 8,000 行，`table b`大约有 250,000 行。如果没有该`levenshtein`功能，查询只需不到 2 秒。包含该功能大约需要 25 分钟。

```
SELECT
      *
   FROM
      library a,
      classifications b
   WHERE  
      a.`release_year` = b.`year`
      AND a.`id` IS NULL
      AND levenshtein_ratio(a.title, b.title) > 82 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:44:47.673

我假设这`levenshtein_ratio`是您编写的函数（或者可能是从其他地方包含的）。如果是这样，数据库服务器将无法在使用索引的正常意义上对其进行优化。所以这意味着它只需要为其他连接条件产生的每条记录调用它。对于内部联接，对于这些表大小（最大为 8000*250000 = 20 亿），这可能是一个非常大的数字。您可以使用以下命令检查需要调用的总次数：

```
SELECT
      count(*)
   FROM
      library a,
      classifications b
   WHERE  
      a.`release_year` = b.`year`
      AND a.`id` IS NULL 
```

这是对为什么它很慢的解释（并不是对如何优化它的问题的真正答案）。要对其进行优化，您可能需要向连接条件添加额外的限制因素，以减少对用户定义函数的调用次数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T00:57:52.467

您提供的信息太少，无法真正帮助您。

1）我的第一个猜测是尝试创建其他 WHERE 条件来减少要扫描的行数。

2）如果这是不可能的......鉴于表库和分类中的标题是已知的，一个想法是创建一个表，其中所有数据都已经像这样计算：

```
TABLE levenshtein_ratio
id_table_library
id_table_classifications
precalculated_levenshtein_ratio 
```

因此您将使用此查询填充表：

```
insert into levenshtein_ratio select a.id, b.id, levenshtein_ratio(a.title, b.title) from library, classifications 
```

然后您的查询将是：

```
 SELECT
          *
       FROM
          library a LEFT JOIN 
          classifications b ON a.`release_year` = b.`year`

LEFT JOIN levenshtein_ratio c ON c.id_table_library = a.id AND c.id_table_classifications = b.id
       WHERE  
          a.`id` IS NULL
          AND precalculated_levenshtein_ratio > 82 
```

这个查询可能不会超过原来的 2 秒。

此解决方案的问题在于表 a 和 b 中的数据可以更改，因此您需要创建一个触发器以使其保持更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T00:49:10.400

更改您的查询以使用正确的连接（语法自 1996 年以来一直存在）。

此外，您的所有 levensrein 条件都可以移动到连接条件中，这应该会给您带来性能优势：

```
SELECT *
FROM library a
JOIN classifications b
    ON a.`release_year` = b.`year`
    AND levenshtein_ratio(a.title, b.title) > 82
WHERE a.`id` IS NULL 
```

另外，确保 b.year 上有一个索引：

```
create index b_year on b(year); 
```

# python - python - 如何根据python中的len删除列表中的列表？

> ID：14616519
> 
> 赞同：0
> 
> 时间：2013-01-31T00:34:49.833
> 
> 标签：python, list, sublist

我有以下输入列表

```
A = [['A',[1,2,3]],['D',[3,4]],['E',[6,7]],['F',[1]]] 
```

我想要长度为 2 的子列表。在上面的示例中，我想删除 [A,[1,2,3]], [F,[1]] 等我正在创建一个新列表并附加其所有子列表长度 ==2。如果我可以直接从 A 中删除不需要的子列表，那将是理想的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:38:02.623

不应该是这样吗？

```
A = [x for x in A if len(x[1]) == 2] 
```

甚至

```
A = [[a, b] for a, b in A if len(b) == 2] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T00:38:16.290

您可能想要使用过滤器。

```
filter(lambda x: len(x[1]) == 2, A) 
```

这假设每个元素（列表）有 2 个元素，第二个元素是一个列表。您想要过滤在此内部列表中恰好有 2 个元素的元素。

更多关于过滤器：

> **filter(...)** filter(function or None, sequence) -> list, tuple, or string
> 
> ```
> Return those items of sequence for which function(item) is true. 
> ```

* * *

同样可以通过列表理解来实现：

`[x for x in A if len(x[1]) == 2]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T00:53:17.687

创建一个新的过滤列表会更好也更容易。`A[:] = ...`是一个切片分配，这意味着新列表的内容被复制回`A`，以便对同一列表的其他引用将看到更新。如果您不需要保留 的身份`A`，则可以使用`A = ...`

```
>>> A = [['A',[1,2,3]],['D',[3,4]],['E',[6,7]],['F',[1]]]
>>> A[:] = [x for x in A if len(x[1]) == 2]
>>> A
[['D', [3, 4]], ['E', [6, 7]]] 
```

原地删除通常效率低下，因为每次删除一项时，您都需要将剩余的项目向下移动。当您从正在迭代的列表中删除时，您还需要注意不要跳过元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T00:36:34.783

```
A = [x if len(x)==2 for x in A] 
```

仅供参考，您的 E 和 F 列表没有右括号，但我假设这只是复制/粘贴错误或类似错误。

# javascript - javascript 三元语句等价

> ID：14616521
> 
> 赞同：4
> 
> 时间：2013-01-31T00:34:55.733
> 
> 标签：javascript

> **可能重复：**
> [JavaScript：对于非布尔值，“z=(x||y)”是否与“z=x?x:y”相同？](https://stackoverflow.com/questions/5817578/javascript-is-z-xy-same-as-z-xxy-for-non-boolean)

以下两行代码在javascript中是否等效？

```
a = b ? b : c

a = b || c 
```

我想表达：“如果b是真实的，a应该被分配b，否则应该被分配c”

我希望它们的工作方式完全相同，但我不能 100% 确定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T00:37:48.093

是的。两者几乎完全相同。

两者都将首先评估`b`。如果它是真的，它会返回`b`。否则，它会返回`c`。

* * *

正如@thesystem 所指出的，如果您有一个 getter 方法 on `b`，它将为三元组调用两次，但对于 or 语句只调用一次。

使用以下代码段对其进行测试：

```
var o = {};
o.__defineGetter__("b", function() {
    console.log('ran');
    return true;
});

var d = o.b || o.not;

console.log('-----');

var d = o.b ? o.b : o.not; 
```

这是小提琴：http: [//jsfiddle.net/bqsey/](http://jsfiddle.net/bqsey/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T00:46:33.153

> 逻辑运算符通常与布尔（逻辑）值一起使用；当它们存在时，它们返回一个布尔值。但是，&& 和 || 运算符实际上返回指定操作数之一的值，因此如果这些运算符与非布尔值一起使用，它们可能返回非布尔值。

参考：[逻辑运算符 - MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators)

# email - 使用 accounts.ui 包验证电子邮件

> ID：14616524
> 
> 赞同：10
> 
> 时间：2013-01-31T00:35:34.967
> 
> 标签：email, meteor, verification

我想在创建某些用户时发送验证电子邮件。我使用 accounts-password 包，因此在我的代码中调用了任何 Accounts 方法。

我阅读了我需要调用的文档：

`Accounts.sendVerificationEmail(userId, [email])`

但问题是我不知道何时调用它。

我试图调用的回调函数，`Accounts.onCreateUser(func)`但尚未在数据库中创建用户。

有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-21T11:44:17.893

在服务器端：

```
Accounts.config({sendVerificationEmail: true, forbidClientAccountCreation: false}); 
```

从上面的评论中得到了答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-25T13:32:32.290

`sendVerificationEmail` [仅在服务器端可用](http://docs.meteor.com/#accounts_sendverificationemail)。我通常做的是在发送电子邮件之前使用一个`setInterval`内部`onCreateUser`来等待 Meteor 创建用户。

**阅读更多**：[使用 Meteor 帐户验证电子邮件](http://journal.gentlenode.com/meteor-20-how-to-verify-emails-with-meteor-account/)。

```
// (server-side)
Accounts.onCreateUser(function(options, user) {  
  user.profile = {};

  // we wait for Meteor to create the user before sending an email
  Meteor.setTimeout(function() {
    Accounts.sendVerificationEmail(user._id);
  }, 2 * 1000);

  return user;
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-17T21:22:36.583

您需要在环境变量中指定邮件。然后在抱歉错误和延迟`Accounts.sendVerificationEmail(userId, [email])`的回调中使用。`Account.onCreateUser`

像这样（下面是完整的示例 js 文件）：

```
Template.register.events({
'submit #register-form' : function(e, t) {
  e.preventDefault();
  var email = t.find('#account-email').value
    , password = t.find('#account-password').value;

    // Trim and validate the input

  Accounts.onCreateUser({email: email, password : password}, function(err){
      if (err) {
        // Inform the user that account creation failed
      } else {
        // Success. Account has been created and the user
        // has logged in successfully.
       Accounts.sendVerificationEmail(this.userId, email);
      }
    });

  return false;
}  });

if(Meteor.isServer){
   Meteor.startup(function(){
      process.env.MAIL_URL='smtp://your_mail:your_password@host:port'
   }
} 
```

我参考了这个页面： [http ://blog.benmcmahen.com/post/41741539120/building-a-customized-accounts-ui-for-meteor](http://blog.benmcmahen.com/post/41741539120/building-a-customized-accounts-ui-for-meteor)

[http://sendgrid.com/blog/send-email-meteor-sendgrid/](http://sendgrid.com/blog/send-email-meteor-sendgrid/)

[为什么我的带有帐户包的 Meteor 应用程序没有发送验证电子邮件？](https://stackoverflow.com/questions/18368877/how-come-my-meteor-app-with-accounts-package-is-not-sending-a-verification-email)

# linux - linux ksh如何删除除了最新的一些目录之外的所有目录

> ID：14616543
> 
> 赞同：2
> 
> 时间：2013-01-31T00:37:15.183
> 
> 标签：linux, shell, ksh

我正在使用 Linux ksh 删除一些我不想要的旧目录。

我使用的是这个：

```
 #! /bin/ksh
   OLD=/opt/backup
   DIR_PREFIX="active"
   DIRS=$(ls ${OLD} -t | grep ${DIR_PREFIX})
   i=0
   while [[ $i -lt ${#DIRS[*]} ]]; do
       if [ $i -gt 4 ];
      then
          echo ${DIRS[$i]}
          ((i++))
      else
          ((i++))
      fi
  done 
```

我想做的是：将所有按时间排序的目录存储到一个变量中-我假设它是一个数组，但不知何故它的大小是1 ... ...，然后在while循环中，如果目录的位置大于4，那么我打印出目录名。

任何想法如何

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:07:40.590

如果您只想打印除前四个条目之外的所有条目，只需将其通过管道传输到`head`or `sed`：

```
#!/bin/sh
OLD=/opt/backup
DIR_PREFIX=active
ls $OLD -t | grep $DIR_PREFIX | sed 1,4d | while read DIR; do
    echo $DIR;
done 
```

如果您只是使用`echo`，则 while 循环是多余的，但大概您将在循环中有更多命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T01:57:07.610

```
OLD=/opt/backup
DIR_PREFIX="active"
DIRS_RESULT=$(ls ${OLD} -t | grep ${DIR_PREFIX})
i=0
for DIR in ${DIRS_RESULT}
    do
        if [ $i -gt 4 ];
        then
            echo ${DIR}
            rm -rf ${DIR}
            ((i++))
        else
            ((i++))
        fi
    done 
```

这个对我有用

# php - 在 Yii 框架中将所有 JS 移动到结束 BODY 标记之前？

> ID：14616545
> 
> 赞同：3
> 
> 时间：2013-01-31T00:37:23.967
> 
> 标签：php, performance, yii

一段时间以来，我一直试图弄清楚如何做到这一点，但我很难过。出于某种疯狂的原因，YII 违背了最佳实践，并试图将所有这些 JS 插入 HEAD 标记和整个正文中。我希望所有 JS 都出现在结束 body 标记之前。

我正在使用我自己的 jQuery (v.1.9.0)、Bootstrap 等，并将 scriptMap 设置设置为 false。但是，yiiactiveform 仍然被插入到 HEAD 标记中，并且使用 enableClientValidation 在我的视图中使用的 JS 以及在我的视图底部编写的 JS 仍然显示在 BODY 中。

这怎么能改变？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-31T03:19:41.010

jquery.yiiactiveform.js[注册为 coreScript](https://github.com/yiisoft/yii/blob/1.1.13/framework/web/widgets/CActiveForm.php#L367)，*所以*要改变它的位置，你必须覆盖它的位置，[默认是](https://github.com/yiisoft/yii/blob/1.1.13/framework/web/CClientScript.php#L161). 要覆盖位置，您可以使用[CClientScript 的属性](http://www.yiiframework.com/doc/api/1.1/CClientScript#coreScriptPosition-detail)，有点像（在您的特定视图中）：[`<HEAD>`](https://github.com/yiisoft/yii/blob/1.1.13/framework/web/CClientScript.php#L161)[`coreScriptPosition`](http://www.yiiframework.com/doc/api/1.1/CClientScript#coreScriptPosition-detail)

```
Yii::app()->clientScript->coreScriptPosition=CClientScript::POS_END; 
```

我们刚刚将其更改为 body 标签末尾的位置。

但是由于您想对所有视图（即整个应用程序）执行此操作，因此您可以在应用程序配置期间覆盖该位置。为此，您必须更改应用程序加载的配置数组，通常该数组在文件中指定：*protected/config/main.php*。您必须更改`clientScript`应用程序的组件配置，如下所示：

```
return array(
    // other properties
    'components'=>array(
        // other components' configurations

        'clientScript'=>array(
            'coreScriptPosition'=>CClientScript::POS_END
        )
    )
); 
```

* * *

同样，您可以使用属性更改注册为脚本文件的脚本，即`registerScriptFile()`使用[属性`defaultScriptFilePosition`](http://www.yiiframework.com/doc/api/1.1/CClientScript#defaultScriptFilePosition-detail)。

然后对于`registerScript()`使用[属性`defaultScriptPosition`](http://www.yiiframework.com/doc/api/1.1/CClientScript#defaultScriptPosition-detail)注册的脚本。

当您想为由小部件注册的脚本（如 CActiveForm）指定位置时，这些属性特别方便，当然，当您想为自己的脚本指定位置时（如果使用其中一个`registerScript*`函数注册）。

如果您自己指定了文件/脚本（使用其中一个`registerScript*`函数），那么您也可以在调用函数时设置位置。

当您更改小部件的位置时，请务必彻底测试，例如 CActiveForm 有一些在`jQuery.ready`函数中注册的小脚本，或者`jQuery(function($) { ...`，如果您将 defaultScriptPosition 指定为 POS_END，这些脚本将被移出`ready()`函数。

您可以按视图再次更改这些属性：

```
Yii::app()->clientScript->defaultScriptPosition=CClientScript::POS_END;
Yii::app()->clientScript->defaultScriptFilePosition=CClientScript::POS_END; 
```

或系统范围：

```
return array(
    // other properties
    'components'=>array(
        // other components' configurations

        'clientScript'=>array(
            'coreScriptPosition'=>CClientScript::POS_END,
            'defaultScriptPosition'=>CClientScript::POS_END,
            'defaultScriptFilePosition'=>CClientScript::POS_END
        )
    )
); 
```

* * *

如果您`<script></script>`在视图中包含了带有标签的脚本，那么恐怕您无法如此轻松地控制它们的位置，您将不得不将这些脚本（如果可能）移动到布局文件中（并非一直有效- 许多不同的情况）。最好的选择是切换到[`registerScriptFile`](http://www.yiiframework.com/doc/api/1.1/CClientScript#registerScriptFile-detail)或[`registerScript`](http://www.yiiframework.com/doc/api/1.1/CClientScript#registerScript-detail)功能，而不是使用`<script>`.

# python - 提取安全组内用户的 sAMAccountName

> ID：14616548
> 
> 赞同：0
> 
> 时间：2013-01-31T00:37:29.130
> 
> 标签：python, active-directory

我知道我可以通过在循环内再次查询 AD 来做到这一点，但这会产生大量我希望避免的调用。这是我的代码：

```
import os, sys
import re
import datetime
import getpass
import ldap

debug = True
now = datetime.datetime.now()

print '******************\n##########\n******************\n'

l = ldap.initialize("ldap://##########")

if debug:
    l.simple_bind_s("ADuser@##########","##########")
else:
    try:
        username = raw_input('Username: ')
        password = getpass.getpass('Password: ')
        l.simple_bind_s(username + '@##########', password)
    except ldap.LDAPError, e:
        print e
        raw_input('Press any key to continue')
        sys.exit()

baseDN = "OU=##########, OU=##########, OU=##########, DC=##########, DC=##########"
searchScope = ldap.SCOPE_SUBTREE

retrieveAttributes = None
searchFilter = "CN=*"

try:
    ldap_result_id = l.search(baseDN, searchScope, searchFilter, retrieveAttributes)
    result_set = []
    while 1:
        result_type, result_data = l.result(ldap_result_id, 0)
        if (result_data == []):
            break
        else:
            if result_type == ldap.RES_SEARCH_ENTRY:
                result_set.append(result_data)
    try:
        f = open(os.environ['userprofile'] + '\\Desktop\\' + now.strftime('%Y-%m-%d') + '_Report.csv', 'w')
        f.write('Full Name, Shared Account Name, Shared Account Code\n')
        try:
            for i in range(len(result_set)):
                for entry in result_set[i]:
                    #print entry[1]['cn'][0] #Security Group name
                    try:
                        if entry[1]['member']:
                            for member in entry[1]['member']: #Group members
                                m = re.search('CN=(.+?),OU', member).group(1)

                                account = entry[1]['cn'][0]
                                description = entry[1]['description'][0].rstrip('\n')
                                member = m.replace('\\', '')

                                f.write('"' + member + '", ' + description + ', ' + account + '\n')
                    except:
                        pass
        finally:
            f.close()
    except IOError, e:
        print e
    l.unbind_s()
except ldap.LDAPError, e:
    print e
    raw_input('Press any key to continue') 
```

如何获取安全组、成员列表，*然后*还获取单个用户的 sAMAccountName？或者如果没有另一个查找就不可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:11:57.747

尽管 LDAP 协议无法执行您要求的操作。

当然，您可以通过调用方法从组中列出的 DN 获取 sAMAccountName 来简化代码布局。

这些动作在 LDAP 中很典型，但它们发生得非常快。

# c - 修改基数转换

> ID：14616549
> 
> 赞同：0
> 
> 时间：2013-01-31T00:37:32.110
> 
> 标签：c, string, algorithm

我在尝试制作修改后的数字基数转换器时遇到了心理障碍。

我的工作正常，但是我希望用我正在使用的基数的第 0 个字符填充输出。

例如，如果我使用基数 3

```
int n,v;
char txt[100];
for(n=0;n<5;n++)
{
    ToBase(3,n,txt);
    FromBase(3,&v,txt);
    printf("\n m=%u txt=[%s] i=%u",n,txt,v);
} 
```

输出：

```
 m=0 txt=[A] i=0
 m=1 txt=[B] i=1
 m=2 txt=[C] i=2
 m=3 txt=[BA] i=3
 m=4 txt=[BB] i=4
 m=5 txt=[BC] i=5
 m=6 txt=[CA] i=6
 m=7 txt=[CB] i=7
 m=8 txt=[CC] i=8
 m=9 txt=[BAA] i=9 
```

我需要的输出是：

```
 m=0 txt=[A] i=0
 m=1 txt=[B] i=1
 m=2 txt=[C] i=2
 m=3 txt=[AA] i=3
 m=4 txt=[AB] i=4
 m=5 txt=[AC] i=5
 m=6 txt=[BA] i=6
 m=7 txt=[BB] i=7
 m=8 txt=[BC] i=8
 m=9 txt=[CA] i=9 
```

以下是功能：

```
void ToBase(int base,int num,void* str)
{
    char * tbl="ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    char buf[66] = {'\0'};
    char * out;
    int n;
    int i,len=0,neg=0;

    if(base>26)
        oof;

    n = ((neg = num < 0)) ? (~num) + 1 : num;
    do {
        buf[len++] = tbl[n % base];
    } while(n /= base);

    out=(char*)str;
    for (i = neg; len > 0; i++)
        out[i] = buf[--len];
}

void FromBase(int base,int* num,void* str)
{
    int i,d,n,sl;
    char*bp;
    bp=(char*)str;
    sl=strlen(bp);
    i=0;
    for(n=0;n<sl;n++)
    {
        i*=base;
        if(bp[n]>='A'&&bp[n]<='Z')
            d=(bp[n]-'A');
        else if(bp[n]>='a'&&bp[n]<='z')
            d=(bp[n]-'a');
        i+=d;
    }
    *num=i;
} 
```

任何帮助将不胜感激 -

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:02:48.477

您需要添加一个功能，以便它知道要输出多少个字符。只需进行最小的更改：

```
 void ToBase                 (int base,int num,void* str,int min_length)
      {
      char * tbl="ABCDEFGHIJKLMNOPQRSTUVWXYZ";
      char buf[66] = {'\0'};
      char * out;
      int n;
      int i,len=0,neg=0;
      if(base>26) oof; /* is a macro? perhaps use assert() */
      n = ((neg = num < 0)) ? (~num) + 1 : num;
      do { buf[len++] = tbl[n % base]; } while(n /= base||--min_length>0);
      out=(char*)str;
      for (i = neg; len > 0; i++) out[i] = buf[--len];
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T01:18:52.447

在`ToBase`切换这个：

```
do { buf[len++] = tbl[n % base]; } while(n /= base); 
```

有了这个：

```
do { buf[len++] = tbl[n % base]; n = (n/base) - 1; } while(n >= 0); 
```

# python - 将 py2app 应用程序添加到 OSX 登录项

> ID：14616553
> 
> 赞同：0
> 
> 时间：2013-01-31T00:37:45.173
> 
> 标签：python, macos, py2app

我创建了一个非常简单的脚本，它解析网页、查找图像并将其下载到机器上。该脚本还每 5 分钟检查一次图片是否已更改，如果已更改，则下载新的。到目前为止，我已经成功地把它变成了一个独立的 py2app，它运行良好。我可以运行它，它会做它的事情。我有几个问题：

这个应用程序可能最好用作后台应用程序。我可以在我的 py2app setup.py 中指定，`LSBackgroundOnly=True`如下所示：

```
"""
This is a setup.py script generated by py2applet

Usage:
    python setup.py py2app
"""

from setuptools import setup

APP = ['downloader.py']
DATA_FILES = []
plist = dict(LSBackgroundOnly=True)
OPTIONS = {'argv_emulation': True, 'plist': plist}

setup(
    app=APP,
    data_files=DATA_FILES,
    options={'py2app': OPTIONS},
    setup_requires=['py2app'],
) 
```

现在。我现在*真正*想做的是将此应用程序添加到 mac 登录项。有没有办法在py2app中做到这一点？我无法在文档中找到任何内容。但是，我确实在 Apple 开发人员文档中找到了如何使用常规 Obj-C 应用程序执行此操作。 [添加登录项](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingLoginItems.html#//apple_ref/doc/uid/10000172i-SW5-BAJJBJEG)

然而，我的 Objective C 知识充其量是有限的，所以我努力想出一个好的解决方案。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:44:09.410

我对 py2app 不熟悉，但如果它制作了一个应用程序包，则过程很简单。

只需在终端中运行它：

```
sudo defaults write \
    /Library/Preferences/loginwindow \
    AutoLaunchedApplicationDictionary -array-add \
    '{ Path="/Applications/YourApp.app"; }' 
```

替换安装应用程序的名称和路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:34:03.783

[你如何让你的应用程序在登录时打开？](https://stackoverflow.com/questions/815063/how-do-you-make-your-app-open-at-login)展示了如何从 Objective-C 将应用程序添加到启动时间，并且可以从 Python 使用 PyObjC 使用相同的机制。

除非您的应用程序已经使用 PyObjC，否则可能很容易使用（已弃用）Applescript 方式来做同样的事情。以下脚本将 Safari 添加到当前用户的登录项：

```
tell application "System Events"
make new login item at end of login items with properties {path:"/Applications/Safari.app"}
end tell 
```

您可以使用 osascript 命令行工具调用此脚本，您可以使用 subprocess.Popen 从您的应用程序启动该工具。请注意，运行此脚本两次也会将应用程序添加到登录项两次，可以使用更复杂的 applescript 来避免这种情况（或者您可以使用配置文件来记住您是否已经将应用程序添加到登录项，这样当用户从他的登录项中删除应用程序时，您将不会阅读该应用程序）。

# java - 通过循环中的模块更改变量（java）

> ID：14616557
> 
> 赞同：0
> 
> 时间：2013-01-31T00:37:59.710
> 
> 标签：java

因此，我正在尝试为我的 Java 课程编写一个简单的程序，并且我已经向老师寻求帮助，但是，这是一门远程学习课程，并没有从那个方向获得太多帮助。所以我在这里。

我们被要求解决的问题是创建一个程序，它将 (1) 向用户询问一个数字，(2) 找到所有用户定义的数字的总和，(3) 找到这些数字的平均值，(4)然后把它们放回给用户。

我不仅使用这些数字来排列我已经完成的事情，而且因为它们必须是单独的模块才能被调用。

我怎样才能让 userNum 变量在 while 语句期间更新。目前他们不是。或者有没有更简单的方法可以做到这一点，我忽略了。任何帮助是极大的赞赏。谢谢你。

```
public class P2 {

   public static void main(String[] args) {

        int userNumCount = 1;

        double userNum = input();
        double userSum = sum(userNum);
        double userAverage = average(userSum, userNumCount);

        sum(userNum);

        while (userNum != 0 && sum(userNum) <= 100){
            ++userNumCount;          
            output(userSum, userAverage);
            input();
            sum(userNum);
            average(userSum, userNumCount);
        }//end else
        while (userNum != 0 && sum(userNum) >=100){
            ++userNumCount;
            JOptionPane.showMessageDialog (null, "Warning, your sum is currently over 100!!!!!"); 
            output(sum(userNum), userAverage);
            input();
            sum(userNum);
            average(userSum, userNumCount);
    }//end else
        if (input() == 0){
            output(userSum, userAverage);
            JOptionPane.showMessageDialog (null, "Thank you for using this program have a nice day.");
    }//end else if

    }//end main module
    public static double input(){
        String userNumString;
        userNumString = JOptionPane.showInputDialog("Please enter your number or input 0 to end the program.");
        double userInput = Double.parseDouble (userNumString); 
        return userInput;
    }//end input module
    public static double sum(double userNum){  
        double userSum =+userNum;
        return userSum;
    }//end sum module
    public static double average (double userSum, int userNumCount){
        double userAverage = userSum/userNumCount;
        return userAverage;
    }//end average module
    public static void output (double userSum, double userAverage){
        JOptionPane.showMessageDialog (null, "The sum of the numbers input so far is: " + userSum + ". And the Average is " + userAverage + "." );
    }//end output module
}//end class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:01:10.363

从 main 中的方法返回的所有值都只是将它们的值返回为空。当您将变量传递给函数时，它们是按值传递的。例如：

```
public void main(String args[]){
    int f = 5;
    doSomething(f);
    System.out.println(f);
}
public int doSomething(int i){
    i+=1;
    return i;
} 
```

返回的`doSomething`值为 6，但程序输出 5。当您调用函数时，将`int i`独立于 f 重新创建。到目前为止，您的程序只是丢弃这些值并保留旧值。

此外，您在 main 中有变量，称为`userSum`, 和`userAverage`,`sum`并且`average`您在不同的范围内重新定义这些变量。当代码流进入求和和平均时，它会为该方法创建新变量。如果您希望这些值相同，则需要将它们设为静态，方法是在您的 main 方法之外定义它们并将它们声明为静态。

我认为您可能遇到的问题是范围。几乎每次你有一个左括号时，程序都会改变范围。当一个块被关闭时（当有一个右括号时），变量的范围结束，即它们不再存在。例如：

```
class someClass 
{
    //Block 0
    static int staticNum = 0;
    public static main(String args[])
    {
        //Block 1
        int level1 = 0;
        if(true) 
        {
            //Block 2
            int level2 = 0;
        } else  {
            //Block 3
            level1++;      //ok because the level1 is accessible from here
            staticNum++;    //ok because staticNum is static
        }
        //resume block 1
        level2++; //not ok because level2 was in a different scope
        doSomething(level1)
    }
    public static void doSomething(int i){
        //Block 5
        int level1 = 0; //different than the one in the main method
        i++; //ok but once execution leaves i wont exist anymore
        staticNum++; //ok because staticNum is static and exists in the class's scope
        level1++; //not ok because level1 is not defined for this scope
    }
} 
```

当执行在一个块中时，它可以访问嵌套级别“高于”它的块中的任何变量。综上所述，在块 2 和块 3 中，您可以访问块 1 或块 0 中的任何内容。块 3 无法访问块 2 中的变量，因为它们超出了彼此的范围，因为当块关闭所有在该块中实例化的变量被释放。块 5 的范围与块 1,2 和 3 完全不同。

块 0 是特殊的，因为它与类相关联。声明的方法体之外的任何内容`static`都是类范围的变量，因为您可以在任何可以访问该类的地方访问它。你会使用类似的东西`ClassName.staticNum`在另一个类中访问它。此外，当您在类内部访问它时，您使用静态值的任何方法也需要声明为静态的。

类主体中未声明为静态的任何内容都是实例变量。它与类的一个实例相关联，这些实例称为对象。一个类定义了一个对象的模板。例如，假设我们有两个计算机类型的对象。Computer 类定义了每台计算机具有哪些变量（实例变量），以及每台计算机共享哪些变量（静态变量）。因此，如果我有具有实例变量鼠标和键盘的计算机 A，它与另一台计算机 B 实例变量鼠标和键盘完全不同，但它们可以共享一个名为 Computer.innernette 的静态变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T01:00:55.687

这是不正确的。

```
public static double sum(double userNum){  
    double userSum =+userNum;
    return userSum;
} 
```

在基本的伪语言中，每次调用此方法时都会发生这种情况

```
receive userNum
create userSum
set userSum = 0
add userNum to userSum
give userSum 
```

每次该方法将返回它给出的值，而不是我认为您期望的运行总数。

如果您声明了两个具有相同名称的变量，它们仍然是不同的。您想要做的是引用同一个变量，为此您需要在声明变量的范围内拥有引用。

获得运行总数

```
public class P2 {

    public static double userSum = 0; 
    //because this is a public member it's scope is global i.e. you can refer to it anywhere.

    ...
    public static void main(String[] args) {
    ... 
    /* do not declare userSum here.
       if you do any reference to userSum will use the local variable 
       not the global variable.
       double userSum = 0; <-- declare local variable it's scope is until the 
                               end of this method nothing outside the method 
                               can see it but you can pass it as a parameter
       userSum = 1; <-- local variable is set to 1
       P2.userSum = 2; <-- local variable is set to 1 global is set to 2
    */
       input();// for this the input method is called and returns a value,
               // but you haven't said to put it anywhere so java will throw it away
               // all that effort for nothing.

       userNum = input(); // in this case it will put the new value in userNum.
    }

    public static double sum(double userNum){  
        userSum =+userNum; // do not declare userSum use it from the class context
        return userSum;
    }

    ... 
```

}

进一步参考[范围](http://www.java2s.com/Tutorial/Java/0020__Language/VariableScope.htm)

# recursion - 如何为递归函数的每次迭代收集多个项目

> ID：14616568
> 
> 赞同：1
> 
> 时间：2013-01-31T00:38:58.233
> 
> 标签：recursion, clojure, lisp

我想为每次调用递归函数创建几个项目，并将所有内容收集在一个列表中。也就是说，我想做这样的事情：

```
(defn myfunc [x]
  (loop [x x retur '()]
    (when condition1
      (let [templist '()]
        (if condition2 (def templist (conj templist {:somekey someval})))
        (if condition3 (def templist (conj templist {:somekey someval})))
        (recur (+ x 1) (concat retur templist)))))) 
```

问题是在 Clojure 中我不能重新绑定一个 let。我想避免使用全局变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T01:04:30.610

核心中的一些函数使用这种通过 a 链接相同符号的模式`let`来有条件地建立一个值。我必须将 contition1 更改为不会永远循环的示例，并将 when 更改为 if 以便它可以在循环结束时返回一个值。

```
(defn myfunc [x someval1 someval2 condition1 condition2 condition3]
  (loop [x x retur '()]
    (if (condition1 x)
      (let [templist '()
            templist (if condition2 (conj templist {:somekey1 someval1}) templist)
            templist (if condition3 (conj templist {:somekey2 someval2}) templist)]
        (recur (+ x 1) (concat retur templist)))
      retur))) 
```

然后可以对其进行测试：

```
 user> (myfunc 0 1 2 #(< % 5) true true)
 ({:somekey2 2} {:somekey1 1} {:somekey2 2} {:somekey1 1} {:somekey2 2} 
  {:somekey1 1} {:somekey2 2} {:somekey1 1} {:somekey2 2} {:somekey1 1})

user> (myfunc 0 1 2 #(< % 5) true false)
({:somekey1 1} {:somekey1 1} {:somekey1 1} {:somekey1 1} {:somekey1 1}) 
```

let 中的想法是，如果条件为真，则让每个阶段更改值，或者如果条件为假，则将其原封不动地返回。这种模式为函数式代码提供了命令式的外观，并有助于明确值是如何构造的，尽管在使用它将命令式逻辑“转换”为函数式程序时也可能太过分了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T05:12:18.007

`->`每当我需要做一些面向步骤的操作时，我更喜欢使用线程宏。

```
(defn myfunc [x]
  (loop [x x retur '()]
    (when condition1
        (let [r (-> '()
                    (#(if condition2 (conj % {:somekey 1}) %))
                    (#(if condition3 (conj % {:somekey 2}) %)))]
        (recur (+ x 1) (concat retur r)))))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T00:50:13.843

您尝试使用通过分配链获得结果的命令式模式。取而代之的是，您可以尝试以更具声明性的方式解决您的问题，这对于作为函数式语言的 clojure 来说更为惯用。例如

```
(defn myfunc [x]
  (loop [x x retur '()]
    (if condition1
      (recur (inc x) (concat retur
                             (when condition2 [{:somekey1 someval1}])
                             (when condition3 [{:somekey2 someval2}])))
      retur))) 
```

# xcode - 我可以使视图具有透明背景但使其子视图可见吗？

> ID：14616569
> 
> 赞同：2
> 
> 时间：2013-01-31T00:39:05.163
> 
> 标签：xcode, cocoa, nsview

我有一个 NSScrollView，里面有一个 NSCollectionView。

我希望 NSScrollView 的背景是透明的，但是当我将不透明度设置为 0 时，它只会为背景创建一个巨大的白色框。

这个 NSScrollView 在一个 NSView 里面，我想看到一个背景，所以这个巨大的白框是不可接受的。

现在我尝试的另一种方法是将 NSScrollView 的混合模式更改为柔光，但是当我这样做时，子视图也被置于柔光上。有没有办法让子视图正常显示，但 NSScrollView 的背景是透明的？

# c - 在 lex 中使用 C 文件 IO 时遇到问题

> ID：14616571
> 
> 赞同：0
> 
> 时间：2013-01-31T00:39:26.477
> 
> 标签：c, io, lex, scanf, lexical-analysis

我正在实现我用标准**C**编码的简单扫描仪的 lex 版本。我遇到的问题是 I/O 的行为不像我在 lex 文件中所期望的那样。`fscanf`不会存储字符串，并将整数存储为 0 在我指示的变量中。fgetc 返回我的测试文件中不存在的字符。我下面的代码中是否有任何东西（或缺少的东西）跳出来说明为什么会发生这种情况？我使用 lex 的方式完全错误吗？

扫描仪-lf.l：

```
%{
#include <stdio.h>
#include <stdlib.h>
extern int lineno;
extern int number;
extern char string[];
extern FILE *yyin;
#define INTEGER 1
#define FLOAT 2
#define READ 3
#define WRITE 4
#define ID 5
#define LPAREN 6
#define RPAREN 7
#define PLUS 8
#define MINUS 9
#define MULT 10
#define ASSIGN 11
#define DIV 12
#define COMMENT 13
#define ERROR 14
%}

%%
[ \t] {
    printf("whitespace\n");
}
[0-9]* {
    fscanf(yyin, "%d", &number);
    printf("%d\n", number);
    int c = fgetc(yyin);
    printf("%c", c);
    /*return INTEGER;*/
}
[a-zA-Z][a-zA-Z0-9]* {
    fscanf(yyin, "%s", string);
    printf("%s\n", string);
    /*return ID;*/
} 
```

扫描仪-lex.c：

```
#include <stdio.h>
#include <stdlib.h>
/* A couple of globals */
int lineno = 0;
int number;
char string[100];
FILE *yyin;
char charSet[] = { '(', ')', '+', '-', '*' };
#define INTEGER 1
#define FLOAT 2
#define READ 3
#define WRITE 4
#define ID 5
#define LPAREN 6
#define RPAREN 7
#define PLUS 8
#define MINUS 9
#define MULT 10
#define ASSIGN 11
#define DIV 12
#define COMMENT 13
#define ERROR 14

int yywrap(){
}

int main(int argc, char **argv){
    int rc;
    if (argc > 1){
        yyin = fopen(argv[1], "r");
        while ((rc=yylex())){
            switch (rc){
                case READ:
                printf("found a read\n");
                break;
                case WRITE:
                printf("found a write\n");
                break;
                case ID:
                printf("found an id\n");
                break;
                case LPAREN:
                printf("found an (\n");
                break;
                case RPAREN:
                printf("found an )\n");
                break;
                case PLUS:
                printf("found an +\n");
                break;
                case MINUS:
                printf("found an -\n");
                break;
                case MULT:
                printf("found an *\n");
                break;
                case ASSIGN:
                printf("found an assign\n");
                break;
                case DIV:
                printf("found a /\n");
                break;
                case INTEGER:
                printf("found an integer\n");
                break;
                case FLOAT:
                printf("found a float\n");
                break;
                case COMMENT:
                printf("found a comment\n");
                break;
                case ERROR:
                printf("Error\n");
                break;
            }
        }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:50:10.130

这是错误的。

```
[0-9]* {
    fscanf(yyin, "%d", &number);
    printf("%d\n", number);
    int c = fgetc(yyin);
    printf("%c", c);
    /*return INTEGER;*/
} 
```

Lex 从文件读取到其内部缓冲区，然后在给定模式最大匹配时运行指定的操作。

让我们看一下[Flex 手册中的一个示例](http://westes.github.io/flex/manual/Simple-Examples.html)：

```
{DIGIT}+    {
            printf( "An integer: %s (%d)\n", yytext,
                    atoi( yytext ) );
            } 
```

如你看到的，

1.  示例模式使用`+`而不是`*`. 您不想尝试匹配空字符串，因此您也应该使用`+`。

2.  匹配模式的内容存储在`yytext`. 您不应该尝试使用 来从文件中读取模式，因为*lex 已经读取*`fscanf()`了匹配的文本。 因此，只需在您的操作中使用。（**不要**使用或——如果你的数字有前导零，这些会给出错误的输出。）*`number = strtol(yytext, NULL, 10);`**`atoi(yytext)``sscanf(yytext, "%i", &number)`***

# mysql - MySQL - 将 MyISAM 转换为 InnoDB 得到错误 1075

> ID：14616573
> 
> 赞同：1
> 
> 时间：2013-01-31T00:39:46.667
> 
> 标签：mysql, innodb

我正在尝试将表从 MyISAM 转换为 InnoDB，这是定义，我收到错误`#1075 - Incorrect table definition; there can be only one auto column and it must be defined as a key`

该表有一个 AutoIncrement 值，并且该字段已编入索引，并且可以与 MyISAM 一起使用。我是 InnoDB 的新手，所以这可能是一个愚蠢的问题

```
CREATE TABLE `cart_item` (
 `cart_id` int(10) unsigned NOT NULL DEFAULT '0',
 `id` mediumint(8) unsigned NOT NULL AUTO_INCREMENT,
 `design_number` int(10) unsigned NOT NULL,
 `logo_position_id` smallint(5) unsigned NOT NULL,
 `subst_style_id` varchar(10) DEFAULT NULL,
 `style_id` varchar(10) NOT NULL DEFAULT '',
 `subst_color_id` smallint(5) unsigned DEFAULT NULL,
 `color_id` smallint(5) unsigned NOT NULL,
 `size_id` smallint(5) unsigned NOT NULL,
 `qty` mediumint(8) unsigned NOT NULL,
 `active` enum('y','n') NOT NULL DEFAULT 'y',
 `date_last_modified` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
 `last_modified_by_id` mediumint(5) unsigned NOT NULL,
 `date_last_locked` datetime DEFAULT NULL,
 `last_locked_by_id` smallint(5) unsigned NOT NULL,
 `date_added` datetime NOT NULL,
 `subsite_logo_group_id` int(11) NOT NULL,
 `bundle` varchar(32) NOT NULL,
 `color_stop_1` varchar(4) DEFAULT NULL,
 PRIMARY KEY (`cart_id`,`id`),
 KEY `color_id` (`color_id`),
 KEY `style_id` (`style_id`),
 KEY `size_id` (`size_id`),
 KEY `design_number` (`design_number`),
 KEY `subsite_logo_group_id` (`subsite_logo_group_id`),
 KEY `date_added` (`date_added`),
 KEY `bundle` (`bundle`)
) ENGINE=InnoDB 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:42:47.483

`PRIMARY KEY`您在上定义了一个组合`(cart_id, id)`，但它`AUTO_INCREMENT`需要一个`id`单独的索引。您可以为其添加一个`KEY`（不是主键，而只是一个普通索引）：

```
KEY `idx_id` (`id`) 
```

不过，我质疑复合 PK 的使用`(cart_id, id)`，因为`id`根据定义，它本身就是一个独特的值。也许您应该进行`id`PK，并在组合中创建一个单独的索引。

```
PRIMARY KEY (`id`),
KEY (`cart_id`, `id`) 
```

它甚至不需要指定为，`UNIQUE`因为`AUTO_INCREMENT`无论如何都不能重复。没有办法违反组合的唯一性`(cart_id, id)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T00:43:27.880

`AUTO_INCREMENT`列应该定义为键，*正如错误所暗示的那样*。

```
`id` mediumint(8) unsigned NOT NULL AUTO_INCREMENT PRIMARY KEY, 
```

并设置`UNIQUE`在两列而不是主键

```
UNIQUE (`cart_id`,`id`), 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/3542b/1)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T00:57:22.320

你在 MyISAM 表上做的事情，不能用 InnoDB 做。请参阅我对（类似）问题的回答：**[根据日期创建主键](https://stackoverflow.com/questions/5455436/creating-primary-key-based-on-date/5455513#5455513)**

MySQL 文档，在**[Using`AUTO_INCREMENT`](http://dev.mysql.com/doc/refman/5.5/en/example-auto-increment.html)**部分，解释它：

> 对于**MyISAM 表**，您可以在**多列索引****`AUTO_INCREMENT`**中的**辅助列**上指定。在这种情况下，列的生成值计算为。当您要将数据放入有序组时，这很有用。**`AUTO_INCREMENT``MAX(auto_increment_column) + 1 WHERE prefix=given-prefix`**

 *** * *

您可能会在 InnoDB 中得到类似的行为，但不会在`AUTO_INCREMENT`. 您必须为您的插入使用一些花哨的触发器或存储过程来处理（每个`cart_id`）自动增量。**

# algorithm - 演员-评论家强化学习中的动作约束

> ID：14616576
> 
> 赞同：2
> 
> 时间：2013-01-31T00:40:08.047
> 
> 标签：algorithm, machine-learning, constraints, neural-network, reinforcement-learning

我已经在一个简单的网格世界上实现了[自然的 actor-critic](http://homepages.inf.ed.ac.uk/svijayak/publications/peters-ECML2005.pdf) RL 算法，它有四种可能的动作（上、下、左、右），我注意到在某些情况下它往往会卡在上下或左右。

现在，在这个领域中，上下和左右是对立的，并且觉得如果我能够以某种方式让代理意识到这一事实，学习可能会得到改善。我正在考虑在计算动作激活后简单地添加一个步骤（例如，从右激活中减去左激活，反之亦然）。但是，我担心这会在一般情况下导致收敛问题。

似乎添加约束将是该领域的共同愿望，所以我想知道是否有人知道我应该为此目的使用的标准方法。如果不是，那么我的临时方法是否合理。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:15:20.390

如果可能的话，我会远离在选择动作时使用启发式方法。如果您想在训练中添加启发式方法，我会在计算奖励函数时这样做。这样，代理将学习启发式并将其体现为它所逼近的价值函数的一部分。

关于振荡行为，您是否允许不动的动作（即保持在同一位置）？

最后，我不会太担心违反一般情况和收敛保证。它们只是进行应用工作时的指导方针。

# java - 豆反射

> ID：14616581
> 
> 赞同：0
> 
> 时间：2013-01-31T00:40:23.817
> 
> 标签：java

有没有办法复制包含其他对象的对象，只要它们具有相同的 getter 和 setter 方法名称？例如，我从 Web 服务中获取对象，并且大多数对象都包含其他对象。大多数至少有 5 层深，它们与其他物体分叉。

我想使用相同的 getter 和 setter 方法名称将返回的对象设置为我自己的同名对象。我的问题是我不能保证 Web 服务不会改变，这意味着我不能只使用从 wsdl 生成的对象。

我开始研究 BeanUtils 但它似乎并没有递归地查看对象。任何建议或正确方向的观点都会很棒。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:49:30.040

你应该试试[推土机](http://dozer.sourceforge.net/)

> Dozer 是一个 Java Bean 到 Java Bean 的映射器，它递归地将数据从一个对象复制到另一个对象。通常，这些 Java Bean 将具有不同的复杂类型。

# ruby-on-rails-3 - 是否需要在视图中包含所有属性？

> ID：14616587
> 
> 赞同：0
> 
> 时间：2013-01-31T00:41:16.243
> 
> 标签：ruby-on-rails-3

在 rails 的一个新动作中，我有这个：

```
@client_order = ClientOrder.where(:client_id => @client.id, :order_date => 
  params[:order_date] || Date.today).first_or_initialize 
```

这完美地工作并在@client_order 中初始化一个@client_order 填充的client_id

现在我注意到在视图中我有义务包含这一行（simple_forms）

```
<%= f.hidden_field :client_id %> 
```

为了在创建操作中检索填充的属性。这是正常的吗？当用户更改该字段（通过调试表单）时会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:47:40.887

它将获取请求中给出的客户端 ID。

如果这是检索客户端的方式，那是正常的。

“授权”是身份验证/授权的一部分，用于控制用户是否有权访问给定资源；像[cancan](https://github.com/ryanb/cancan)这样的东西可以解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T03:00:43.657

你的模型是做什么用的`ClientOrder`，`Client`看起来像什么？可能是关联问题。

`ClientOrder`

```
belongs_to :client 
```

`Client`

```
has_many :client_orders 
```

# r - 使用 api 访问路径名中带有空格的 Dropbox 文件

> ID：14616588
> 
> 赞同：0
> 
> 时间：2013-01-31T00:41:18.810
> 
> 标签：r, dropbox-api, httr

这个问题与我之前的问题有关[阅读 R 中的原始数据以使用 dropbox api 保存为 .RData 文件](https://stackoverflow.com/questions/14580850/reading-raw-data-in-r-to-be-saved-as-rdata-file-using-the-dropbox-api)

当我的路径包含非 url 标准字符时，我遇到了问题

上一个问题中的 db.file.name 只是 Dropbox 中相关文件的路径。

但是路径中有一个空格和感叹号。我有一种感觉，这些需要转换为相关格式，以便 GET 请求可以工作......但不太确定转换是什么......

所以使用并继续我之前的例子......

```
require(httr)
require(RCurl)
db.file.name <- "!! TEST FOLDER/test.RData"
db.app <- oauth_app("db",key="xxxxx", secret="xxxxxxx")
db.sig <- sign_oauth1.0(db.app, token="xxxxxxx", token_secret="xxxxxx")

response <- GET(url=paste0("https://api-content.dropbox.com/1/files/dropbox/",curlEscape(db.file.name)),config=c(db.sig,add_headers(Accept="x-dropbox-metadata"))) 
```

响应是一个错误，并且没有下载文件...使用文档页面[https://www.dropbox.com/developers/reference/api](https://www.dropbox.com/developers/reference/api)它建议将 URL 放入 UTF-8 编码...我'我不确定如何做/不确定它是否有效。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:19:19.853

我之前很接近...我只需要使用重新插入斜杠`gsub`才能使 GET 请求正常工作...所以结果是

```
response <- GET(url=paste0("https://api-content.dropbox.com/1/files/dropbox/",gsub("%2F","/",curlEscape(db.file.name))),config=c(db.sig,add_headers(Accept="x-dropbox-metadata"))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:55:13.247

快速复制过去`?iconv`，

```
x <- "fa\xE7ile"
Encoding(x) <- "latin1"
charToRaw(xx <- iconv(x, "latin1", "UTF-8"))
[1] 68 74 74 70 3a 2f 2f 73 74 61 63 6b 6f 76 65 72 66 6c 6f 77 2e 63 6f 6d
Encoding(x)
[1] "latin1"
Encoding(xx)
[1] "UTF-8" 
```

这回答了你的问题了吗？

# javascript - 一旦 jquery 事件被传递给函数，console.log($(this)); 不再打印 jquery 对象

> ID：14616590
> 
> 赞同：1
> 
> 时间：2013-01-31T00:41:32.397
> 
> 标签：javascript, jquery, jsbin

当我将点击附加到某些 div 时，我可以`$(this)`在 Chrome 控制台中打印出来，并在那里显示 jquery 对象。

![控制台截图](../Images/5ca2381463e756f7824c8e319e89ffc9.png) [http://jsbin.com/iyozap/1/edit](http://jsbin.com/iyozap/1/edit)

但是，我试图只获取被点击的最顶层 dom 节点。所以我想`stopPropagation()`在函数中使用

```
$(document).ready(function(){
  $('body').on('click', '*', function(){
    console.log($(this));
  });
}); 
```

但是每当我将事件传递给函数时 `$('body').on('click', '*', function(event){`

我`$(this)`以`[object Object]`. 奇怪的是，当我随后从函数中删除`event`和时`event.stopPropagation()`，控制台仍然打印`[object Object]`.

我只是想在身体的每个部分注册一个点击，除非它发生在类的 div 上`avoid`，但我似乎没有掌握 jquery`event`及其对应部分`stopPropagation()`。如何`$(this)`从我可以在其中看到的 jquery 对象更改为传入的`[object Object]`时间`event`？`avoid`我怎样才能用它来只注册在我的班级中没有发生的点击？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:45:52.713

```
$("body").on('click', '*' ... 
```

委托给*每个*元素。我想你只想这样做：

```
$("body").on('click', '.avoid', function (e) {
   e.stopPropagation();
}).on('click', function () {
   console.log('body clicked');
}); 
```

[http://jsfiddle.net/ExplosionPIlls/YZcP7/](http://jsfiddle.net/ExplosionPIlls/YZcP7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T00:48:26.327

您在正确的轨道上，您只需要绑定`stopPropagation()`到特定事件，如下所示：

```
$(document).ready(function(){
  $('body').on('click', '*', function(e){
    console.log($(this));
    e.stopPropagation();
  });
}); 
```

`e`事件对象在哪里。现在工作正常。这是一个更新的 jsbin：http: [//jsbin.com/iyozap/9/edit](http://jsbin.com/iyozap/9/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T00:49:53.287

我认为他也想对点击的对象进行识别

```
$(document).ready(function(){
  $('body > *').click(function(){
    console.log( $(this) );
  });
}); 
```

# c# - 尝试将递归 JavaScript 方法移植到 C#，这种方法有意义吗？

> ID：14616591
> 
> 赞同：0
> 
> 时间：2013-01-31T00:41:57.440
> 
> 标签：c#, javascript, recursion

JavaScript 中的方法是：

```
findNode: function(root, w, h) {
    if (root.used)
        return this.findNode(root.right, w, h) || this.findNode(root.down, w, h);
    else if ((w <= root.w) && (h <= root.h))
        return root;
    else
        return null;
} 
```

这条线尤其不能在 C# 中工作

```
return this.findNode(root.right, w, h) || this.findNode(root.down, w, h); 
```

这是我翻译它的尝试，但我可以使用第二种意见来判断这是否会起作用或破坏算法。有没有更好的方法让我想念？

```
private Node FindNode(Node node, Block block)
{
    Node n;
    if (node.used) // recursive case
    {

        // is this a good translation of the JavaScript one-liner?

        n = FindNode(node.right, block);
        if (n != null)
        {
            return n;
        }
        else
        {
            return FindNode(node.down, block);
        }
    }
    else if ((block.width <= node.width) && (block.height <= node.height)) // Base case
    {
        return node;
    }
    else
    {
        return null;
    }
} 
```

[这是我正在研究的原始算法。](https://github.com/jakesgordon/bin-packing/blob/master/js/packer.js)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:48:41.150

```
n = FindNode(node.right, block);
return n ?? FindNode(node.down, block); 
```

将是我要做的唯一改变

# c++ - 计算字符串中的字符串

> ID：14616593
> 
> 赞同：0
> 
> 时间：2013-01-31T00:42:05.950
> 
> 标签：c++, string, counting

我被告知要向用户询问一个字符串（一个句子）。然后要求用户输入另一个字符串以在字符串 1（句子）中进行搜索。程序必须计算第二个字符串出现在第一个字符串中的次数。我没有收到任何错误，但它没有计算字母。这是我得到的结果：

**输入一句话：我爱喝汤**

**输入要搜索的字符串：ou**

**您提供的第一个字符串中有 0 个字符串 ou。**

有人可以告诉我我做错了什么吗？我是 C++ 的初学者，所以我在理解上有些困难。

```
#include <iostream>
#include <string>
using namespace std;

int  main() {

        string sentence;
        string search;
        int count = 0;

        cout<<"Enter a sentence:";
        getline (cin, sentence);
        cout<<"Enter string to search:";
        getline (cin, search);

        cout << "There are " << count << " of the string " << search << " in the first string you provided." <<"\n";

        for (int i=0; i < sentence.size(); ++i)
        {
                if (sentence == search)

                count++;
        }

        return count;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:48:06.400

两个问题：

1.  `count`在计算之前先打印。
2.  您实际上并不是在搜索子字符串。您应该查看文档[`std::string`](http://www.cplusplus.com/reference/string/string/)以找到搜索子字符串的适当方法。但是，您走在正确的轨道上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T00:46:42.367

好吧，您正在尝试在计算结果之前输出结果。

此外，`==`用于*精确匹配*，而不是子字符串搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T00:46:51.907

您在搜索字符串并设置计数的循环之后有您的 cout 打印行。将其移至该循环下方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T00:47:31.700

看起来您应该将 cout 语句放在此方法的末尾。因为在您的代码中，当您输出时 count 始终为 0

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T00:54:01.203

您应该修改循环，以便它*真正*搜索子字符串并计算它们的出现次数：

```
string::size_type pos = sentence.find(search);
while (pos != string::npos)
{
    pos = sentence.find(search, pos + search.size());
    count++;
} 
```

此外，您很可能希望将这条线移到实际计算 值的点*之后*`count`：

```
cout << "There are " << count << ... 
```

否则，它显然会输出`count`最初初始化的值（即`0`）。

# java - 检查现有文本时的自定义控制台 nullPointerException

> ID：14616596
> 
> 赞同：0
> 
> 时间：2013-01-31T00:42:16.310
> 
> 标签：java, swing, nullpointerexception, jtextarea

我为程序创建了一个自定义控制台。我有一个方法可以向控制台添加一条名为 toConsole 的消息，这会询问它检查的字符串并将时间添加到字符串中。然后它转到我的函数 addConsole ，它检查是否存在现有文本，如果存在，它会将预先存在的文本添加到新文本中，否则它只是将新文本放入。所以这是错误。我还可以指出，如果我在控制台输入文本框中手动输入文本，它不会产生此错误。

```
Exception in thread "main" java.lang.NullPointerException
    at com.michael.tech.api.console.RunConsole.addConsole(RunConsole.java:188)
    at com.michael.tech.api.console.RunConsole.toConsole(RunConsole.java:204)
    at com.michael.tech.api.console.RunConsole.toConsole(RunConsole.java:223)
    at com.michael.tech.api.testerFile.main(testerFile.java:25) 
```

这是 addConsole 方法

```
private static void addConsole(String s){
    console.setText( ( console.getText().isEmpty()) ? s : (console.getText() + "\n" + s) );
} 
```

toConsole 方法

```
public static void toConsole(String s, boolean timeStamp, boolean classPath, String className){
        if(s.startsWith("/")){
            doCommand(s);
            return;
        }
        Time t = new Time();
        t.getSYSPrint();
        String time = "[" + t.toMilitary() + "] ";
        if(EchoTime || timeStamp){
            addConsole(time + s);
        }
        else if(classPath){
            addConsole(className);
        }
        else{ 
            addConsole(s);
        }
    } 
```

最后是 testerFile 类中的 Main 方法

```
public static void main(String[] args) {            
        RunConsole.startConsole();
        RunConsole.toConsole("test");
    } 
```

提前感谢您的帮助。我认为这是我忽略的一些小错误（我也希望如此）。

编辑：粘贴 bin 以查看行号

RunConsole 类 [http://pastebin.com/2yUAwQc5](http://pastebin.com/2yUAwQc5)

testerFile 类 [http://pastebin.com/R5ViLekp](http://pastebin.com/R5ViLekp)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:09:49.690

问题是它`JTextArea` `console`仍然有它的默认`null`值，因为它还没有被实例化。这是因为没有created的*实例*`RunConsole`——相反，您正在以一种方式访问​​此类的`static`方法：

```
RunConsole.startConsole();
RunConsole.toConsole("test"); 
```

使用`static`方法是糟糕的设计，尤其是因为您的应用程序需要有*state*。`static`在实例方法中创建所有方法`RunConsole`并将上面的行替换为：

```
RunConsole runConsole = new RunConsole();
runConsole.startConsole();
runConsole.toConsole("test"); 
```

此外，当您这样做时，不要忘记删除您在 中创建的实例`startConsole`，否则您将看不到来自 的初始消息`toConsole`。改变：

```
new RunConsole().setVisible(true); 
```

至

```
setVisible(true); 
```

# c# - Type.GetMethod 返回“对象引用未设置为对象的实例”。

> ID：14616599
> 
> 赞同：1
> 
> 时间：2013-01-31T00:42:36.050
> 
> 标签：c#, visual-studio-2012

前几天遇到问题时，我正在尝试使用 Type.GetMethod 方法。

我的程序是一个 Windows 应用程序。表单中有一个文本框用于输出，而 Form1_Load 方法中只有这两个代码块：

```
 MethodInfo info2 = typeof(IEnumerable<int>).GetMethod("GetEnumerator");
   textBox1.Text += info2.ToString();

   MethodInfo info1 = typeof(IEnumerator<int>).GetMethod("MoveNext");
   textBox1.Text += info1.ToString(); 
```

第一个 GetMethod 返回了正确的信息，但第二个没有返回任何信息。

所以我更进一步，在代码中包含了一个 try/catch 语句：

```
 try
        {
            MethodInfo info2 = typeof(IEnumerable<int>).GetMethod("GetEnumerator");
            textBox1.Text += info2.ToString();

            MethodInfo info1 = typeof(IEnumerator<int>).GetMethod("MoveNext");
            textBox1.Text += info1.ToString();
        }
        catch (Exception v)
        {
            textBox1.Text += v.Message;
        } 
```

第二个 GetMethod 现在给了我错误：

```
Object reference not set to an instance of an object. 
```

我很困惑。这两种方法都不是静态的，也没有任何参数。为什么 MoveNext 会返回错误，而 GetEnumerator 不会？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T01:18:43.180

那是因为interface`IEnumerator<T>`没有定义`MoveNext`，就是在interface中`IEnumerator`。

例子：

```
 MethodInfo info1 = typeof(IEnumerator).GetMethod("MoveNext");
   textBox1.Text += info1.ToString(); 
```

这将工作正常，

您可以遍历分配给的接口`IEnumerator<T>`并找到`MoveNext`

```
MethodInfo info1 = typeof(IEnumerator<int>).GetInterfaces()
                  .Where(i => i.GetMethod("MoveNext") != null)
                  .Select(m => m.GetMethod("MoveNext"))
                  .FirstOrDefault();
textBox1.Text += info1 != null ? info1.ToString() : string.Empty; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T00:52:16.837

我看到了这个：

> 但第二个什么也没返回。

这意味着第二对的第二行，就像你试图这样做：

```
null.ToString(); 
```

这就是异常的来源，而不是它上面的行。您不能像这样使用空对象的属性或方法。

# javascript - 反混淆 Javascript？

> ID：14616606
> 
> 赞同：2
> 
> 时间：2013-01-31T00:42:50.920
> 
> 标签：javascript, obfuscation, deobfuscation

[我在这里](http://www.javascriptobfuscator.com/)混淆了我宝贵的 javascript 。我以为我已经用我的原始代码保存了一个本地版本，但事实证明有一行在本地版本上被混淆了。

我意识到如果你这么容易地去混淆它，它完全破坏了混淆某些东西的意义，但它必须是可能的。我尝试了Firefox插件无济于事。有希望吗？

# entity-framework - 在领域驱动设计中为模型属性设置默认值的最佳实践？

> ID：14616611
> 
> 赞同：7
> 
> 时间：2013-01-31T00:43:12.417
> 
> 标签：entity-framework, domain-driven-design, default, models

在 DDD 中为新实体设置默认属性的最佳方法是什么？此外，为复杂属性（例如集合）设置默认状态的最佳方法是什么？

我的感觉是默认值应该在模型本身中，因为它们是一种业务规则（“默认情况下，我们希望 X 是 Y 和 Z”），并且域代表业务。使用这种方法，模型本身的静态“GetNew()”方法可能会起作用：

```
公共类人{
    公共字符串名称 { 获取；放; }
    公共日期时间 DateOfBirth { 得到；放; }
    公共布尔 IsAlive { 获取；放; }
    公共列表肢体{得到; 放; }

    公共静态人GetNew（）{
        返回新人（）{
            IsAlive = 真，
            四肢 = new List() { RightArm, LeftArm, RightLeg, LeftLeg }
        }
    }
}

```

不幸的是，在我们的例子中，我们需要将集合属性设置为另一个列表的所有成员，并且由于该模型与其 Repository/DbContext 分离，因此无法加载所有成员。

糟糕的解决方案是作为参数传递：

```
public static Person GetNew(List<Limb> allLimbs) {
    return new Person() { 
        IsAlive = true,
        Limbs = allLimbs
    }
} 
```

或者，是否有更好的方法为简单和复杂的模型属性设置默认值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T01:05:15.860

[这是DDD 中工厂模式的](https://stackoverflow.com/questions/610965/what-methods-should-go-in-my-ddd-factory-class/611175#611175)一个实例。它可以是专用类，例如`PersonFactory`，也可以是静态方法，例如您的示例。我更喜欢静态方法，因为我认为没有必要创建一个全新的类。

至于初始化集合，`GetNew`我会采用以集合为参数的方法。它陈述了一个重要的约束——要创建一个新的人实体，您需要该集合。集合实例将由托管需要它的特定用例的应用程序服务提供。更一般地，默认值可以存储在数据库中，在这种情况下，应用程序服务将调用存储库以获得所需的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T00:56:50.003

查看 Joshua Bloch 的[*Effective Java*](https://rads.stackoverflow.com/amzn/click/com/0321356683)（第二版）中的静态构建器。在那里，您有一个静态构建器类，并且您在构造之前链接调用以设置属性，因此它解决了具有接受大量参数的构造器或必须在每个属性上放置设置器的问题（在这种情况下，您实际上有结构）。

# google-maps-api-3 - 谷歌地图路线显示航点的渲染器

> ID：14616613
> 
> 赞同：1
> 
> 时间：2013-01-31T00:43:14.137
> 
> 标签：google-maps-api-3

我是 Google Maps v3 API 的新手，想知道在构建方向时是否有办法显示具有不同标记的航点，例如：

```
function calcRoute() {

    var request = {
        origin: "Sydney, NSW",
        destination: "Sydney, NSW",
        waypoints:[{location: "Bourke, NSW"}, {location: "Broken Hill, NSW"}],
        travelMode: google.maps.TravelMode.DRIVING
    };

    directionsService.route(request, function(response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(response);
        }
    });
} 
```

所以用另一种方式表达我的问题，有没有办法让航点显示为白点，而起点/目的地显示为谷歌的绿色标记？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:05:12.450

没有实施的选项可以为航点使用不同的标记。

您必须将 DirectionsRenderer 的`suppressMarkers`-option 设置为 false(不会渲染任何标记)，解析方向结果并自行创建所需的标记。

# html - ARIA 树上的 HTML5 验证

> ID：14616615
> 
> 赞同：2
> 
> 时间：2013-01-31T00:43:32.293
> 
> 标签：html, validation, tree, wai-aria

我正在使用[http://validator.w3.org/nu/](http://validator.w3.org/nu/)对我的文档执行 HTML5 验证。我不明白为什么我在以下代码中收到验证错误。我检查了[http://www.w3.org/TR/wai-aria/roles#treeitem](http://www.w3.org/TR/wai-aria/roles#treeitem)并认为可以将具有 role="treeitem" 的 li 元素放置在具有 role="group" 的元素 ul 中。nu 验证器告诉我这是不允许的。我想知道 nu 验证器在他的判决中是否正确，如果是，我们在哪里可以找到有关规定 ARIA 树模式的信息。谢谢你。

不验证的示例代码：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Trees</title>
  </head>
  <body>
    <h1 id="label_1">Fruits and vegetables</h1>
    <ul id="tree" role="tree" tabindex="0" aria-labelledby="label_1">
      <li role="treeitem" aria-expanded="true">
        <a href="#">Fruits</a>
        <ul id="tree1_1" role="group">
          <li role="treeitem"><a href="#">Oranges</a></li>
          <li role="treeitem"><a href="#">Apples</a></li>
        </ul>
      </li>
      <li role="treeitem">
        <a href="#">Vegetables</a>
        <ul id="tree1_2" role="group">
          <li role="treeitem"><a href="#">Carrots</a></li>
        </ul>
      </li>
    </ul>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-21T02:06:05.680

`role="group"`绝对允许在`ul`元素上使用。[HTML5](http://www.w3.org/html/wg/drafts/html/master/dom.html#table-aria-weak)规范目前也反映了这一点。Validator.w3.org/nu/ 和[http://validator.w3.org/](http://validator.w3.org/)都正确地将其视为有效。Validator.nu 似乎仍然将其标记为无效。

不管验证如何，在这里使用嵌套树都不是正确的选择。它可能会通过验证器，但这很可能只是因为它允许嵌套小部件（就像您可以将滑块或文本字段嵌套在树项中一样）。但是它们仍然被视为单独的小部件，而不是树应该是的单个复合小部件。内部树不会是外部树结构的一部分，它只是一个单独的小部件，恰好嵌套在它的一个树项中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:26:39.990

有趣的问题。验证器的行为似乎有点奇怪。WAI-ARIA 规范似乎允许组作为树项的容器。

另一方面[，HTML5 规范](http://www.w3.org/html/wg/drafts/html/master/dom.html#table-aria-weak)不允许“组”作为`<ul>`元素的角色。它必须是“directory”、“list”、“listbox”、“menu”、“menubar”、“tablist”、“toolbar”、“tree”或“presentation”；然而验证者并没有抱怨这一点。

无论哪种方式，您似乎都应该使用“树”而不是“组”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T00:54:37.860

在您的第 13 行和第 19 行，您需要有 role = tree 而不是 role=group

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta charset="utf-8" />
<title>Trees</title>
 </head>
 <body>
   <h1 id="label_1">Fruits and vegetables</h1>
    <ul id="tree" role="tree" tabindex="0" aria-labelledby="label_1">
  <li role="treeitem" aria-expanded="true">
    <a href="#">Fruits</a>
    <ul id="tree1_1" role="tree">
      <li role="treeitem"><a href="#">Oranges</a></li>
      <li role="treeitem"><a href="#">Apples</a></li>
    </ul>
  </li>
  <li role="treeitem">
    <a href="#">Vegetables</a>
    <ul id="tree1_2" role="tree">
      <li role="treeitem"><a href="#">Carrots</a></li>
    </ul>
  </li>
</ul> 
```

由于 [组定义](http://www.w3.org/TR/wai-aria/roles#group)，验证器确实阻塞了 role=group，如果您在两行之间阅读，则列表项不在其中。您的列表中有treeitem，因此角色将是树而不是组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-23T08:14:39.820

```
<div role="application"> 

<h2 id="label_1">Foods</h2> 
<ul id="tree1" class="tree" role="tree" aria-labelledby="label_1"> 
  <li id="fruits" role="treeitem" tabindex="0" aria-expanded="true">Fruits 
    <ul role="group"> 
      <li id="oranges" role="treeitem" tabindex="-1">Oranges</li> 
      <li id="pinapples" role="treeitem" tabindex="-1">Pineapples</li> 
      <li id="apples" role="treeitem" tabindex="-1" aria-expanded="false">Apples 
        <ul role="group"> 
          <li id="macintosh" role="treeitem" tabindex="-1">Macintosh</li> 
          <li id="granny_smith" role="treeitem" tabindex="-1" aria-expanded="false">Granny Smith 
            <ul role="group"> 
              <li id="Washington" role="treeitem" tabindex="-1">Washington State</li> 
              <li id="Michigan" role="treeitem" tabindex="-1">Michigan</li> 
              <li id="New_York" role="treeitem" tabindex="-1">New York</li> 
            </ul> 
          </li> 
          <li id="fuji" role="treeitem" tabindex="-1">Fuji</li> 
        </ul> 
      </li> 
      <li id="bananas" role="treeitem" tabindex="-1">Bananas</li>     
      <li id="pears" role="treeitem" tabindex="-1">Pears</li>     
    </ul> 
  </li> 
  <li id="vegetables" role="treeitem" tabindex="-1" aria-expanded="true">Vegetables 
    <ul role="group"> 
      <li id="broccoli" role="treeitem" tabindex="-1">Broccoli</li> 
      <li id="carrots" role="treeitem" tabindex="-1">Carrots</li> 
      <li id="lettuce" role="treeitem" tabindex="-1" aria-expanded="false">Lettuce 
      <ul role="group"> 
          <li id="romaine" role="treeitem" tabindex="-1">Romaine</li> 
          <li id="iceberg" role="treeitem" tabindex="-1">Iceberg</li> 
          <li id="butterhead" role="treeitem" tabindex="-1">Butterhead</li> 
      </ul> 
      </li> 
      <li id="spinach" role="treeitem" tabindex="-1">Spinach</li>     
      <li id="squash" role="treeitem" tabindex="-1" aria-expanded="true">Squash 
        <ul role="group" > 
          <li id="acorn" role="treeitem" tabindex="-1">Acorn</li> 
          <li id="ambercup" role="treeitem" tabindex="-1">Ambercup</li> 
          <li id="autumn_cup" role="treeitem" tabindex="-1">Autumn Cup</li> 
          <li id="hubbard" role="treeitem" tabindex="-1">Hubbard</li> 
          <li id="kobacha" role="treeitem" tabindex="-1">Kabocha</li> 
          <li id="butternut" role="treeitem" tabindex="-1">Butternut</li> 
          <li id="spaghetti" role="treeitem" tabindex="-1">Spaghetti</li> 
          <li id="sweet_dumpling" role="treeitem" tabindex="-1">Sweet Dumpling</li> 
          <li id="turban" role="treeitem" tabindex="-1">Turban</li> 
        </ul> 
      </li> 
    </ul> 
  </li> 
</ul> 

</div> 
```

# visual-studio-2012 - Windows 窗体控件库 x86 无法正常工作？

> ID：14616620
> 
> 赞同：0
> 
> 时间：2013-01-31T00:44:00.027
> 
> 标签：visual-studio-2012, x86

不确定其他人是否有这个问题。

我正在尝试创建一个 Windows 窗体库控件。我需要控件在 x86 环境中运行。所以，我要做的第一件事就是进入项目的属性并将平台目标切换到 x86。

我尝试运行该应用程序，并收到可爱的错误消息，该消息引用了我正在尝试创建的程序集并说明：尝试加载格式不正确的程序。

我没有添加任何引用或任何代码，只是试图在 x86 中创建一个控件。

我正在使用带有 VS2012 的 Windows 7 64 位机器尝试在 .NET 4.5 中编写应用程序。我必须在 x86 中做这个项目，因为我正在使用一些仅 x86 的 OCX。

有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:55:12.373

> 进入项目的属性并将平台目标切换到x86

嗯，这行得通。而不是一个令人困惑的 COM 异常（通常是“类未注册”，这有几个可能的原因），您会得到一个早期的 .NET 异常，告诉您您使用的库错误。

要测试您的库项目，您需要创建一个引用库项目的 EXE 项目。您忘记做的是更改该 EXE 项目的平台目标设置。这很重要，因为只有 EXE 项目才能确定该过程的位数。它是第一个加载的，一个库项目没有发言权。它只能否决选择，BadImageFormatException 就是那个否决。

因此，您还必须将 EXE 项目的平台目标设置更改为 x86。

# ios - MKPinAnnotationView 不起作用

> ID：14616622
> 
> 赞同：2
> 
> 时间：2013-01-31T00:44:11.470
> 
> 标签：ios, mkmapview, mkannotation, mkpinannotationview

我想要一个带有`MKMapView`显示按钮的显示注释，这些注释导致一个视图控制器，比如[这个 Apple 示例应用程序中的金门大桥注释](https://developer.apple.com/library/ios/#samplecode/MapCallouts/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009746)。

我从 plist 加载坐标，注释正确显示为标题/副标题，但方法

```
- (MKAnnotationView *)mapView:(MKMapView *)theMapView viewForAnnotation:(id <MKAnnotation>)annotation 
```

没有效果。

我想我必须以某种方式将注释与 pinannotations 联系起来？

MapViewController.h：

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>
#import <CoreLocation/CoreLocation.h>
#import "Annotation.h"

@interface MapViewController : UIViewController<CLLocationManagerDelegate, MKMapViewDelegate>

@property (strong, nonatomic) CLLocationManager *location;
@property (nonatomic, retain) NSArray *data;    
@end 
```

MapViewController.m：

```
#import "MapViewController.h"

@interface MapViewController ()
@property (nonatomic, weak) IBOutlet MKMapView *mapView;
@end

@implementation MapViewController
@synthesize data;
@synthesize location, minLatitude, maxLatitude, minLongitude, maxLongitude;

- (void)viewDidLoad
{
    NSString *dataPath = [[NSBundle mainBundle] pathForResource:@"City" ofType:@"plist"];
    self.data = [NSArray arrayWithContentsOfFile:dataPath];

    for (int i = 0; i < data.count; i++) {

        NSDictionary *dataItem = [data objectAtIndex:i];

        //Create Annotation
        Annotation *building = [[Annotation alloc] init];
        building.title = [dataItem objectForKey:@"Title"];
        building.subtitle = [dataItem objectForKey:@"Subtitle"];

        MKCoordinateRegion buildingcoordinates = { {0.0, 0.0}, {0.0, 0.0} };
        buildingcoordinates.center.latitude = [[dataItem objectForKey:@"Latitude"] floatValue];
        buildingcoordinates.center.longitude = [[dataItem objectForKey:@"Longitude"] floatValue];

        building.coordinate = buildingcoordinates.center;
        [self.mapView addAnnotation:building];

    }

    [super viewDidLoad];

}

- (MKAnnotationView *)mapView:(MKMapView *)theMapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    if ([annotation isKindOfClass:[MKUserLocation class]])
        return nil;

        static NSString *pinIdentifier = @"pinIndentifier";

        MKPinAnnotationView *pinView = (MKPinAnnotationView *)
        [self.mapView dequeueReusableAnnotationViewWithIdentifier:pinIdentifier];
        if (pinView == nil)
        {
            // if an existing pin view was not available, create one
            MKPinAnnotationView *customPinView = [[MKPinAnnotationView alloc]
                                                  initWithAnnotation:annotation reuseIdentifier:pinIdentifier];
            customPinView.pinColor = MKPinAnnotationColorPurple;
            customPinView.animatesDrop = YES;
            customPinView.canShowCallout = YES;

            UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
            [rightButton addTarget:self
                            action:@selector(showDetails:)
                  forControlEvents:UIControlEventTouchUpInside];
            customPinView.rightCalloutAccessoryView = rightButton;

            return customPinView;
        }
        else
        {
            pinView.annotation = annotation;
        }
        return pinView;
} 
```

注释.h：

```
#import <Foundation/Foundation.h>
#import <MapKit/MKAnnotation.h>

@interface Annotation : NSObject <MKAnnotation> {
    CLLocationCoordinate2D coordinate;
    NSString *title;
    NSString *subtitle;
}

@property(nonatomic, assign) CLLocationCoordinate2D coordinate;
@property(nonatomic, copy) NSString *title;
@property(nonatomic, copy) NSString *subtitle;

@end 
```

注释.m：

```
#import "Annotation.h"

@implementation Annotation

@synthesize coordinate, title, subtitle;

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T01:44:18.430

很可能`delegate`未设置地图视图，这意味着`viewForAnnotation`不会调用委托方法。

由于您已声明`mapView`为 IBOutlet，因此在 xib 中，请确保地图视图`delegate`已连接到文件的所有者。

或者，在 MapViewController 方法的顶部，以`viewDidLoad`编程方式设置它：

```
mapView.delegate = self; 
```

# asp.net-mvc-4 - MVC4如何在没有导航属性的情况下加载相关数据

> ID：14616624
> 
> 赞同：2
> 
> 时间：2013-01-31T00:44:21.377
> 
> 标签：asp.net-mvc-4, entity-framework-5, ef-database-first

我是 MVC 的新手，并且使用 EF-database-first 创建了一个 MVC4 应用程序。数据库不包含外键定义，我无法添加它们（我不拥有数据库）。以下是数据库中的两个示例类：

```
public partial class Allocation
{
    public int AllocID { get; set; }
    public int DeptID { get; set; }
    public decimal AllocationPercent { get; set; }
}

public partial class Department
{
    public int DeptID { get; set; }
    public string DeptName { get; set; }
    public string Account { get; set; }
} 
```

默认分配索引页面显示部门 ID。我想显示部门名称。如果没有导航属性，我怎么能做到这一点？

我试过

```
public class AllocationController : Controller
{
    private Entities db = new Entities();

    //
    // GET: /Allocation/

    public ActionResult Index()
    {
        return View(db.Allocation.Include(d => d.DeptID).ToList());
    }
... 
```

但这会产生错误（“指定的包含路径无效。EntityType 'TESTModel.Allocation' 未声明名为 'DeptID' 的导航属性。”）...

我也不确定如何在没有导航属性的情况下编写预先加载或显式加载的代码，这引发了这个问题。效率方面，我认为加载相关信息的方式并不重要，因此我们将不胜感激任何方向的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:51:53.960

数据库不必有定义，只要字段存在并且实体已在考虑到参照完整性的情况下放置在数据库中即可。您需要做的就是让实体框架知道关系。这是通过`virtual`创建“导航属性”的关键字完成的。

```
public partial class Allocation
{
 public int AllocID { get; set; }
 public int DeptID { get; set; }
 public decimal AllocationPercent { get; set; }
 public virtual Department Department { get; set; } /* this is your nav property */
}

public partial class Department
{
 public int DeptID { get; set; }
 public string DeptName { get; set; }
 public string Account { get; set; }
} 
```

现在你可以这样做：

```
db.Allocation.Include(a => a.Department).ToList() 
```

可能有一个错误需要您使用外键定义（尽管我不这么认为）。如果是这种情况，您将需要像这样装饰您的导航属性

```
[ForeignKey("DeptID")]
public virtual Department Department { get; set; } 
```

你也可以这样尝试：

```
 public int AllocID { get; set; }
 [ForeignKey("Department")]
 public int DeptID { get; set; }
 public decimal AllocationPercent { get; set; }
 public virtual Department Department { get; set; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T01:00:47.030

With navigation properties, Travis J's answer is what you need. If you don't want to use navigation properties, assuming your DB context has a set called `Departments`, you could do smth like this:

```
var deptId = db.Allocation.DeptID;
var departments = db.Departments.Where(p => p.DeptID == deptId);
return View(departments.ToList()); 
```

# bash - 如何使用 bash 将一个大文件拆分为多个小文件？

> ID：14616630
> 
> 赞同：21
> 
> 时间：2013-01-31T00:45:17.740
> 
> 标签：bash

我有一个文件，比如说`all`，有 2000 行，我希望它可以分成 4 个小文件，行号为 1~500、501~1000、1001~1500、1501~2000。

也许，我可以这样做：

```
cat all | head -500 >small1
cat all | tail -1500 | head -500 >small2
cat all | tail -1000 | head -500 >small3
cat all | tail -500 >small4 
```

但是这种方式涉及到行数的计算，当行数不是很好的数字时，或者当我们想将文件拆分成太多的小文件时（例如：`all`3241行的文件，我们想要将其拆分为 7 个文件，每个文件有 463 行）。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-31T00:50:35.230

如果要拆分文件，请使用`split`：

```
split -l 500 all all 
```

会将文件拆分为几个文件，每个文件有 500 行。如果要将文件拆分为 4 个大小大致相同的文件，请使用以下内容：

```
split -l $(( $( wc -l < all ) / 4 + 1 )) all all 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-31T00:50:16.073

查看`split`命令，它应该做你想做的（以及更多）：

```
$ split --help
Usage: split [OPTION]... [INPUT [PREFIX]]
Output fixed-size pieces of INPUT to PREFIXaa, PREFIXab, ...; default
size is 1000 lines, and default PREFIX is 'x'.  With no INPUT, or when INPUT
is -, read standard input.

Mandatory arguments to long options are mandatory for short options too.
  -a, --suffix-length=N   generate suffixes of length N (default 2)
      --additional-suffix=SUFFIX  append an additional SUFFIX to file names.
  -b, --bytes=SIZE        put SIZE bytes per output file
  -C, --line-bytes=SIZE   put at most SIZE bytes of lines per output file
  -d, --numeric-suffixes[=FROM]  use numeric suffixes instead of alphabetic.
                                   FROM changes the start value (default 0).
  -e, --elide-empty-files  do not generate empty output files with '-n'
      --filter=COMMAND    write to shell COMMAND; file name is $FILE
  -l, --lines=NUMBER      put NUMBER lines per output file
  -n, --number=CHUNKS     generate CHUNKS output files.  See below
  -u, --unbuffered        immediately copy input to output with '-n r/...'
      --verbose           print a diagnostic just before each
                            output file is opened
      --help     display this help and exit
      --version  output version information and exit

SIZE is an integer and optional unit (example: 10M is 10*1024*1024).  Units
are K, M, G, T, P, E, Z, Y (powers of 1024) or KB, MB, ... (powers of 1000).

CHUNKS may be:
N       split into N files based on size of input
K/N     output Kth of N to stdout
l/N     split into N files without splitting lines
l/K/N   output Kth of N to stdout without splitting lines
r/N     like 'l' but use round robin distribution
r/K/N   likewise but only output Kth of N to stdout 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-10T01:41:48.233

就像其他人已经提到的那样，您可以使用`split`. 接受的答案提到的复杂命令替换是不必要的。作为参考，我添加了以下命令，它们几乎可以完成所要求的。请注意，当使用`-n`命令行参数指定卡盘数`small*`时，使用`split`.

```
$ seq 2000 > all
$ split -n l/4 --numeric-suffixes=1 --suffix-length=1 all small
$ wc -l small*
 583 small1
 528 small2
 445 small3
 444 small4
2000 total 
```

或者，您可以使用[GNU 并行](http://www.gnu.org/software/parallel/ "GNU 并行")：

```
$ < all parallel -N500 --pipe --cat cp {} small{#}
$ wc -l small*
 500 small1
 500 small2
 500 small3
 500 small4
2000 total 
```

如你所见，这个咒语相当复杂。GNU Parallel 实际上最常用于并行化管道。恕我直言，一个值得研究的工具。

# visual-studio - 将 Visual Studio 2012 连接到 Github.com

> ID：14616632
> 
> 赞同：10
> 
> 时间：2013-01-31T00:45:47.643
> 
> 标签：visual-studio, github-for-windows

我已将 MS github 扩展添加到我的项目中。现在如何将它连接到我的 Github 帐户？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T00:54:38.920

[http://blogs.msdn.com/b/visualstudioalm/archive/2013/01/30/getting-started-with-git-in-visual-studio-and-team-foundation-service.aspx](http://blogs.msdn.com/b/visualstudioalm/archive/2013/01/30/getting-started-with-git-in-visual-studio-and-team-foundation-service.aspx)

上面的链接让我走上了将 Team Foundation Service 与 Visual Studio 2012 集成的正确轨道。我误解了 Git 与 Github，目前将继续使用 Github 作为我的 ALM。VS 中集成的 git 版本控制的集成值得下一个项目再看一看。

# jquery - 在 Chrome 中制作粘性菜单栏时遇到问题

> ID：14616635
> 
> 赞同：1
> 
> 时间：2013-01-31T00:46:05.093
> 
> 标签：jquery, html, css, google-chrome

我的目标是在标题滚动过去后将菜单栏固定在视口的顶部。

我已经使用这个 jQuery 来实现这一点，并使用以下代码在菜单栏到达顶部时修改 css：

```
jQuery(document).ready(function($){
    // Check the initial Poistion of the Sticky Header
    var stickyHeaderTop = $('#stickyMenu').offset().top;

    $(window).scroll(function(){
            if( $(window).scrollTop() > stickyHeaderTop ) {
                    $('#stickyMenu').css({position: 'fixed', top: '0px'});
                    $('#stickyAlias').css('display', 'block');
                } else {
                    $('#stickyMenu').css({position: 'static', top: '0px'});
                    $('#stickyAlias').css('display', 'none');
            }
    });
}); 
```

这是我的开发页面和我的工作示例：[http ://dev.harryg.me/serge/home/](http://dev.harryg.me/serge/home/)

它在 Firefox 中实现了梦想，但 Chrome 存在问题；css 更改似乎比它应该更早地开始 - 仅向下滚动几个像素后，菜单栏变得固定并粘在顶部。我有一种感觉是标题图片是罪魁祸首，但不知道为什么......

编辑：感谢您的所有建议。由于我远离我的开发设置，我将不得不等待重新审查您的所有建议。正如 Explosion Pills 和 Malk 所说，问题是因为在`stickyHeaderTop`加载标题图像之前计算。这就是为什么它在图像被缓存后起作用，但如果你刷新页面则不起作用。我稍后会尝试 Explosion Pills 的解决方案，并根据需要投票/接受。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:41:31.853

问题是顶部的图像没有被渲染，并且当你第一次计算时，它的高度没有在布局中考虑`stickyHeaderTop`。有两种解决方案（都很简单）：

1.  在顶部（内部）添加正确`width`和`height`属性。无论如何，这样做是个好主意。`<img>``<a id="home_link">`
2.  `stickyHeaderTop`最初不要计算。而是进行比较`$(window).scrollTop() > $("#stickyMenu").offset().top`。效率的不明显下降值得准确计算。

如果你愿意，你也可以两者都做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T00:50:18.510

我已经在同一个问题上处理过 chrome，导致此错误可能有两种可能性：

*   不使用变量内部条件`if( $(window).scrollTop() > stickyHeaderTop ) {`

*   尝试像这样更改`css()`函数的顺序：

    $('#stickyAlias').css('display', 'block');

    $('#stickyMenu').css({position: 'fixed', top: '0px'});

我在 1 年前建立[这个网站时遇到了这些问题。](http://www.radikal.com.tr/)

如果两者都不起作用，请尝试以下方式：

[**这是工作的jsFiddle。**](http://jsfiddle.net/4TfTF/26/)

```
$(window).scroll(function() {

   var headerH = $('.header').outerHeight(true);
   console.log(headerH);
   //this will calculate header's full height, with borders, margins, paddings

   var scrollVal = $(this).scrollTop();
    if ( scrollVal > headerH ) {
        $('#subnav').css({'position':'fixed','top' :'0px'});
    } else {
        $('#subnav').css({'position':'static','top':'0px'});
    }
 }); 
```

[来源。](https://stackoverflow.com/questions/11971475/setting-css-value-limits-of-the-window-scrolling-animation/11971912#11971912)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T01:32:50.253

我认为 document.ready 事件在渲染完成之前触发。尝试订阅`load`窗口事件而不是`ready`文档事件。就像是：

```
function scrollSpy(){
// Check the initial Poistion of the Sticky Header
    var stickyHeaderTop = $('#stickyMenu').offset().top;

    $(window).scroll(function(){
            if( $(window).scrollTop() > stickyHeaderTop ) {
                    $('#stickyMenu').css({position: 'fixed', top: '0px'});
                    $('#stickyAlias').css('display', 'block');
                } else {
                    $('#stickyMenu').css({position: 'static', top: '0px'});
                    $('#stickyAlias').css('display', 'none');
            }
    });
}
window.addEventListener('load', scrollSpy, false); 
```

# javascript - 如何使用 wordpress json api 和 phonegap 创建带有图片的帖子？

> ID：14616636
> 
> 赞同：1
> 
> 时间：2013-01-31T00:46:08.930
> 
> 标签：javascript, json, wordpress, api, cordova

我正在 phonegap 中开发一个应用程序以通过 JSON API 在 Wordpress 中发布文章，我需要用手机拍照并将其作为帖子的一部分发送，我该如何使用 javascript (json api) 做到这一点？

# msbuild - Project.Build 不适用于 DeployOnBuild=true

> ID：14616641
> 
> 赞同：1
> 
> 时间：2013-01-31T00:46:31.267
> 
> 标签：msbuild, microsoft.build

我的代码如下：

```
...

propertyGroup1.AddProperty("DeployOnBuild", "true");
propertyGroup1.AddProperty("DeployTarget", "MSDeployPublish");
propertyGroup1.AddProperty("MSDeployServiceUrl", "localhost");
propertyGroup1.AddProperty("DeployIisAppPath", "local.projects.com");
propertyGroup1.AddProperty("MSDeployPublishMethod", "InProc");
propertyGroup1.AddProperty("AllowUntrustedCertificate", "true");

...

cSharpProject.ProjectCollection.RegisterLogger(cSharpLogger);
try {
      buildResult = cSharpProject.Build();
... 
```

`buildResult`设置为`false`。但是，它不会**向**记录器引发任何错误。并且项目**没有**部署。

我在管理员模式下运行我的 exe。

任何帮助表示赞赏。

谢谢

Chris *提示*：`CSAutoParameterize.parameters`尚未创建其他子文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T02:41:59.247

```
 <Target Name="WebPublish">
    <MsBuild Projects="MyProject.csproj" Properties="DeployOnBuild=true;DeployTarget=MSDeployPublish;MSDeployServiceUrl=localhost;DeployIisAppPath=local.website.com;MSDeployPublishMethod=RemoteAgent;AllowUntrustedCertificate=true;Username=someuser;password=somepassword" />
  </Target> 
```

我能够将此目标添加到项目中并仅调用该特定目标。

# c# - 如何使用 Linq 从系列中的 3 个表中进行选择？

> ID：14616644
> 
> 赞同：1
> 
> 时间：2013-01-31T00:46:36.073
> 
> 标签：c#, .net, sql, linq, entity-framework

我有 3 张桌子：

学位（Id int（PK），学位名称字符串）

```
1   Bachelor
2   Master
3   PhD 
```

Track(Id int(PK), DegreeId int(FK), TrackName 字符串)

```
1   2   Engineer
2   1   Technician
3   1   Assistant
4   2   Physicist
5   3   Doctor 
```

组（Id int（PK），TrackId int（FK），GroupName 字符串）

```
1   4   Group1
2   3   Group2
3   1   Group3
4   3   Group4
5   2   Group5 
```

Degree 和 Track 之间是一对多的关系，Track 和 Group 之间是一对多的关系。

我有这堂课：

```
Public class DegreeDetails
{
    public List<Track> TrackList { get; set; }
    public List<Group> GroupsList { get; set; }
} 
```

要获得这些属于学士学位的所有轨道，即技术员和助理，我使用以下代码：

在控制器中，我使用以下代码：

```
DegreeDetails MyView = new DegreeDetails();
MyView.TrackList = entity.Track.Where(s => s.DegreeID == 1).ToList(); 
```

如何获取这些学习轨道属于学士学位的所有组的组列表，应该是Group2，Group4和Group5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T08:49:45.107

可能最好的办法是加入这些表。您可以在数据库中创建视图，也可以使用 Linq 连接表。

这应该有效：

```
MyView.GroupList = (from d in entity.Degree
                    join t in entity.Track on d.Id equals t.DegreeId
                    join g in entity.Group on t.Id equals g.TrackId
                    where d.Id == 1
                    select g).Distinct().ToList(); 
```

**更新**如果你想使用 lambda exp，试试这个：

```
MyView.GroupList = entity.Degree.Where(d => d.Id == 1)
                    .Join(entity.Track, d => d.Id, t=> t.DegreeId, (d, t) => t)
                    .Join(entity.Group, t => t.Id, g => g.TrackId, (t, g) => g)
                    .Distinct().ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T05:00:37.267

您应该将曲目加入群组：

```
var groupList = entity.Track.Where(s=>s.DegreeID == 1).Join(entity.Group, t=>t.Id, g=>g.TrackId, (t,g)=>g).ToArray(); 
```

# javascript - jQuery Bubble Popup v.3 的 HasBubblePopup 函数返回 True 的问题

> ID：14616648
> 
> 赞同：1
> 
> 时间：2013-01-31T00:47:06.410
> 
> 标签：javascript, jquery

我需要在点击时创建气泡弹出窗口，但我遇到了无法打开无限气泡的问题。我一次只需要打开一个弹出窗口，所以我添加了：

if ($('.icon').HasBubblePopup()) { alert('请先关闭当前弹出窗口，然后再打开另一个。'); 返回假；}

我的问题是，在打开和关闭一个或两个弹出窗口后会出现此警报，即使它似乎没有打开任何弹出窗口。

我的 HTML：

```
<img id="icon01" class="icon" src="images/icon01.png">
<img id="icon02" class="icon" src="images/icon02.png">
<img id="icon03" class="icon" src="images/icon03.png"> 
```

我的 jQuery：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="js/jquery-bubble-popup-v3.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    var icon01 = 
        '<div class="popup">' +
        '<h2>First Title</h2>' +
        '<p>Sweet jelly beans macaroon cheesecake cookie caramels chocolate cake gummi bears muffin.</p>' +
        '</div>';
    var icon02 = 
        '<div class="popup">' +
        '<h2>Second Title</h2>' +
        '<p>Bonbon lollipop soufflé halvah chupa chups jelly beans.</p>' +
        '</div>';
    var icon03 = 
        '<div class="popup">' +
        '<h2>Third Title</h2>' +
        '<p>Pastry bear claw wafer candy candy sweet roll chocolate bar chocolate cake.</p>' +
        '</div>';

    $('.icon').click(function() {
        var iconID = this.id;

        if ($('.icon').HasBubblePopup()) {
            alert('Please close current popup before opening another.');
            return false;
        }

        $('.icon').CreateBubblePopup();
        var iconClick = $(this);
        var bubblePopupID = iconClick.GetBubblePopupID();
        iconClick.ShowBubblePopup({
            position : 'top',
            align    : 'center',
            innerHtml: eval(iconID),
            innerHtmlStyle: {
                                color:'#000',
                                'text-align':'center'
                            },
            themeName:  'grey',
            themePath:  'images/jquerybubblepopup-themes'
        }, false);

        iconClick.FreezeBubblePopup();
        $('#' + bubblePopupID).click(function() {
            $(iconClick).RemoveBubblePopup();
        });
    });
});
</script> 
```

我正在处理的页面：[http ://www.dynasoft2000.com/fire](http://www.dynasoft2000.com/fire)

**编辑：**我决定不使用警报，而是关闭当前弹出窗口并打开新弹出窗口将是一个更好的解决方案。这是我的最终代码：

```
 $('.icon').click(function() {
        var iconID = this.id;

        if ($('.icon').map(function() {
            if ($(this).HasBubblePopup())
                return true;
        })[0]) {
            $('.icon').RemoveBubblePopup();
        }

        var iconClick = $(this);
        iconClick.CreateBubblePopup();
        var bubblePopupID = iconClick.GetBubblePopupID();
        iconClick.ShowBubblePopup({
            position : 'top',
            align    : 'center',
            innerHtml: eval(iconID),
            innerHtmlStyle: {
                                color:'#000',
                                'text-align':'center'
                            },
            themeName:  'grey',
            themePath:  'images/jquerybubblepopup-themes'
        }, false);

        iconClick.FreezeBubblePopup();
        $('#' + bubblePopupID).click(function() {
            $(iconClick).RemoveBubblePopup();
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:59:36.030

您应该在创建 buble 时中继到当前元素，HasBublePipup 也可以正常工作，我用地图包装它；将代码更改为：

```
$('.icon').click(function() {
        var iconID = this.id;

        if ($('.icon').map(
           function() {
            if ($(this).HasBubblePopup()) return true;
            }
           )[0]); { //<-HERE
            alert('Please close current popup before opening another.');
            return false;
        }
        var iconClick = $(this);
        iconClick.CreateBubblePopup(); // <-- AND HERE
        var bubblePopupID = iconClick.GetBubblePopupID();
        iconClick.ShowBubblePopup({
            position : 'top',
            align    : 'center',
            innerHtml: eval(iconID),
            innerHtmlStyle: {
                                color:'#000',
                                'text-align':'center'
                            },
            themeName:  'grey',
            themePath:  'images/jquerybubblepopup-themes'
        }, false);
        iconClick.FreezeBubblePopup();
        $('#' + bubblePopupID).click(function() {
            $(iconClick).RemoveBubblePopup();
        });
    }); 
```

# windows - 为什么“..localmachine”在 Windows 上解析为本地机器 ipv6 地址？

> ID：14616654
> 
> 赞同：-1
> 
> 时间：2013-01-31T00:47:44.090
> 
> 标签：windows, ipv6, hostname

前几天我觉得`ping ..localmachine`在 Windows 7 上运行很奇怪

如果你 Win+R，键入`\\..localmachine\`它将打开本地计算机共享文件夹。

我有一个 Web 服务器监听 0.0.0.0 端口 8080

这个python脚本有效

```
urllib2.urlopen('http://..localmachine:8000').read() 
```

这没有在`hosts`文件中定义。

似乎没有文档提到这一点，任何人都可以分享一些知识吗？

*   这些主机名如何在 Windows 上工作？我应该知道任何其他预定义的主机名吗？
*   在我们的代码中是否有任何重要的安全考虑需要注意？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T01:31:21.163

感谢用户[ShaneMadden](https://meta.serverfault.com/users/72586/shane-madden)[在这里](https://meta.serverfault.com/questions/5208/whats-wrong-with-my-question#comment8548_5208)回答了我的问题

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms738520(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738520(v=vs.85).aspx)

> 在 Windows Server 2003 及更高版本上，如果 pNodeName 参数指向等于“..localmachine”的字符串，则返回本地计算机上的所有注册地址。

# sphinx - 在 Sphinx 中处理美式/英式拼写和复数

> ID：14616655
> 
> 赞同：0
> 
> 时间：2013-01-31T00:47:45.813
> 
> 标签：sphinx, thinking-sphinx

我们需要让所有这些术语相互匹配并且遇到困难

骨科, 骨科, 骨科, 骨科

目前，我们正在使用形态 stem_en 处理大多数其他复数形式

这是我们当前对该组的词形条目（这对是反向复制的，否则它只能以一种方式工作）

```
orthopaedic > orthopedic
orthopedic > orthopaedic
orthopedics > orthopaedics
orthopaedics > orthopedics 
```

然而，“骨科”与“骨科”不匹配，我们不能添加另一个条目“骨科>骨科”，因为“骨科”已经存在并且在索引时会抛出错误。

任何建议将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:11:48.773

> *该对被反向复制，否则它只能以一种方式工作*

这是个坏主意！两种方式都将导致问题（就像您实际上已经发现的那样！），您将一个更改为另一个，因此它们将无法正确匹配！

你只需要一个方向。Sphinx 获取左边的词，并将右边的词实际存储在索引中。所以寻找左和右变得可以互换。如果你交换单词，那么它们就没有机会匹配。

复杂性出现是因为 wordforms 执行“词干异常” - 即 wordforms 中的一个词没有词干，所以这意味着许多词不会匹配。所以你需要

1.  在单词形式列表上手动执行词干提取，并且
2.  列出你的 wordforms 文件中的所有变体， -**相同**的常用词

使用上面的示例，将类似于

```
orthopaedic > orthopedic 
orthopedic > orthopedic 
orthopedics > orthopedic 
orthopaedics > orthopedic 
```

如果单词 did stem 将不得不这样做，例如

```
bridge > bridg
bridges > bridg
bridging > bridg 
```

ETC

它极大地膨胀了你的 wordforms 文件，但它可以自动化。

# .net - 如何使用特定网络连接到活动目录来检索用户信息

> ID：14616656
> 
> 赞同：0
> 
> 时间：2013-01-31T00:47:58.287
> 
> 标签：.net, active-directory, network-programming

需要输入有关如何使用特定 LAN 连接连接到 Active Directory 的信息

*   域`Ab`c -> 连接 1
*   域`xyz`-> 连接 2

我有 2 个连接到不同网络的 NIC 卡。目前，当我们需要检查/重置 Active Directory 上的任何帐户以获取特定的`xyz`.

我编写了一个小应用程序，它允许我访问`ABC`使用连接 1 的 AD ( )。

在互联网上，我遇到并经历了套接字类（`System.Net.Sockets`）/`System.Net.Sockets`命名空间，然后再做更多的研究/阅读......

谁能建议使用.NET将其绑定到连接2的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:32:46.747

我相信您需要做的是使用 Socket 的 'Bind' 方法，并且在设置 Endpoint 时，使用要连接的 Adapter 的 IP 地址和端口 0。

我在我的 Mac 上，所以我无法正确测试它，但我相信它会是这样的：

```
var endPoint = new IPEndPoint(nicIpAddress, 0);
Socket listener = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp );
listener.Bind(endPoint);
listener.Connect(...); 
```

AFAIK; 在 .Net 处理网络的层面上，它不关心硬件，它只关心您连接到正确的网络地址；因此通过它的 IP 地址绑定到卡将（希望！）确保该套接字的流量使用该网络接口而不是另一个。

# java - 有没有办法找到谁在请求 Web 应用程序？

> ID：14616667
> 
> 赞同：0
> 
> 时间：2013-01-31T00:49:15.393
> 
> 标签：java, web-applications, webserver, intranet

我需要找到谁（IP 地址/域名）正在使用代码请求我的 Web 应用程序。

我的登录页面应该可以通过 Internet 和 Intranet 访问，但那些获得许可的人可以通过 Internet 访问我的网站，其他人只能通过 Intranet 访问。

为此，我需要找到他们的 IP/域。

谁能帮我解决这个问题？

谢谢！！泰米尔语

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:01:32.763

我基于“java”标签假设这是一个基于 Java EE/Servlet 的 Web 应用程序。如果是这种情况，您可以通过分别在传递给您的 Servlet 处理方法的 ServletRequest/HttpServletRequest 对象上调用[getRemoteAddr()](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getRemoteAddr%28%29)和[getRemoteHost()来检索请求者（或代理）的 IP 地址或主机名。](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getRemoteHost%28%29)

# php - 无法签出 PHP Google Drive 客户端库

> ID：14616679
> 
> 赞同：0
> 
> 时间：2013-01-31T00:50:32.623
> 
> 标签：php

我一直在尝试使用 Google 文档提供的以下 url 来检查 PHP Google Drive Client Library：

```
http://google-api-php-client.googlecode.com/svn/trunk/ google-api-php-client-read-only 
```

当我使用相同的 url 打开 repo 浏览器时，我进入但没有 Drive 的目录，这解释了为什么上面的 url 不起作用但我不明白为什么它丢失了。我还能如何获得 PHP 的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T02:35:13.417

这是正确的存储库网址：http: [//google-api-php-client.googlecode.com/svn/trunk/](http://google-api-php-client.googlecode.com/svn/trunk/)

# openssl - 如何向证书签名请求 (CSR) 添加其他信息？

> ID：14616686
> 
> 赞同：3
> 
> 时间：2013-01-31T00:50:52.563
> 
> 标签：openssl, digital-signature

我正在使用 OpenSSL 生成证书签名请求 (CSR)。

标准字段是：

通用名称：John Doe
组织：MyCompany Inc.
组织单位：销售
地点：SF
州：CA
国家：美国
电子邮件：john.doe@mycompany.com

但是我想将自己的字段添加到证书中，例如：
GroupId：348348923
EmployeeLevel：Class 3

在我请求证书颁发机构 (CA) 签署 CSR 之前，执行此操作的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T01:55:37.583

您描述的所有字段都是 X509 CSR 中的主题项。它们实际上是 OID（通常以给定的短名称显示）。您可以在[此处](http://www.alvestrand.no/objectid/2.5.4.html)找到它们的列表。做你想做的事需要做一些事情。首先，您必须定义一个要映射到短名称的 OID。有几种方法可以做到这一点，但如果您想在技术上保证唯一性，您应该向 IANA[请求企业编号（](http://pen.iana.org/pen/PenApplication.page)[私人分配列表](http://www.iana.org/assignments/enterprise-numbers)）。

如果你真的不需要那种东西，你可以作弊，然后在 1.3.6.1.4.1.X 下生成你自己编造的 # 当然，但我建议使用非常大的 #。

完成后，您可以在 conf 或您可能使用的任何其他工具中定义 OpenSSL OID 映射。当然，如果您在不知道您自己的映射的任何内容中查看生成的证书，您将不会看到“GroupId”，而是会看到更像“1.3.6.1.4.1.3838483483.1=Class 3”的内容。

应该注意的是，如果您将此 CSR 发送给任何公开信任的 CA（而不是您自己的私有 CA），那么他们很有可能会丢弃任何未知字段。

当然，您可能不一定想要这样做。如果您需要将这些值编码到证书中，我建议直接引用您的虚构 OID 或从已经具有短名称映射的各种很少使用的预定义主题 OID 中进行选择。

# c# - 有没有办法将数据从远程 MyPHP 数据库检索到 Windows Phone 7 应用程序？

> ID：14616687
> 
> 赞同：0
> 
> 时间：2013-01-31T00:51:12.460
> 
> 标签：c#, windows-phone-7, phpmyadmin

我一直在开发一个 WP7 应用程序，该应用程序使用替代运动位置的数据库根据您的 GPS 位置定位最近的“替代”运动中心（这个想法是在大学生中推广不太受欢迎的运动）。

但是，该应用程序必须连接到托管在 wordpress 网站上的 MyPHP 数据库。我有访问它所需的详细信息，但网络上没有太多关于使用 WCF 服务连接到远程数据库的文献。我想知道是否有（最好）简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:01:07.007

phpMyAdmin 只是一个数据库的前端。一般是MySQL。所以问题就变成了“如何从 Windows Phone 访问 MySQL 中的数据”。

创建一个使用 Linq 访问 MySQL 中的数据的 WCF 服务。然后从 windows phone 访问这个 WCF 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T19:15:55.197

如果您不想为 .NET 服务器/托管付费 - 您可以使用 .php 文件直接从 MySQL 数据库返回 JSON 格式的数据。对于用户列表，您可以执行以下操作：

```
<?php

  /* connect to the db */
  include '../conn.php';

  /* grab the users from the db */
  $query = "SELECT ID, Name FROM Users";
  $result = mysql_query($query) or die('Errant query:  '.$query);

  /* create one master array of the records */
  $users = array();
  if(mysql_num_rows($result)) {
    while($user = mysql_fetch_assoc($result)) {
      array_push($users, $user);
    }
  }

  header('Content-type: application/json');
  echo json_encode(array('users'=>$users));
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-13T02:26:25.017

有人已经开始构建一个 Windows phone 8 应用程序来与一些 phpmyadmin 实例交互。工作正在进行中。他可能会从社区获得一些帮助，因为该项目有大量的潜在订阅者！在 Windows 商店查看 XYD：http: [//goo.gl/PJiYsU](http://goo.gl/PJiYsU%20!)！

# postgresql - Rails 应用程序的测试数据库上的 PostgreSQL 失败

> ID：14616693
> 
> 赞同：0
> 
> 时间：2013-01-31T00:52:06.937
> 
> 标签：postgresql, ruby-on-rails-3.2, rake, postgis

运行时`rake db:test:prepare`我的测试数据库被删除，但未能重建。在研究了错误之后，我只是尝试加载数据库`rake db:test:load`以根据 schema.rb 文件重新填充。该调用导致以下消息

`PG::Error: ERROR: could not open extension control file "/usr/pgsql-9.1/share/extension/postgis.control": No such file or directory`

我花了一天时间在测试服务器上重新安装 postgresql-9.1 和 postGIS 1.5.3，我可以在 Internet 上找到各种方式，但这些安装都没有产生难以捉摸的 postgis.control 文件。我需要在 CentOS6 机器上运行特殊安装来生成二进制文件吗？还是有另一种方法来运行 rake 任务来测试 psql 数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T19:39:37.987

This message is shown for `CREATE EXTENSION postgis;` however the newer extension method was introduced for PostGIS 2.0\. The version that you have installed does not support this method.

Either upgrade to PostGIS 2.0 ([excellent RPMs for YUM here](http://yum.postgresql.org/)), or spatially enable a PostGIS 1.5 database using either a template or using enabler scripts. [Details here](http://postgis.refractions.net/documentation/manual-1.5/ch02.html#id418654).

# android - 在android上检测无线电唤醒

> ID：14616694
> 
> 赞同：3
> 
> 时间：2013-01-31T00:52:09.963
> 
> 标签：android

有没有办法检测或通知收音机何时在 Android 设备上被唤醒？

# java - 报警管理器运行

> ID：14616701
> 
> 赞同：0
> 
> 时间：2013-01-31T00:52:43.973
> 
> 标签：java, android, alarmmanager

我有一个在 20:00 运行的 AlarmManager，但当我单击修复它的按钮时也会运行。我只希望在 20:00 运行

```
Calendar c = Calendar.getInstance();
c.set(Calendar.HOUR_OF_DAY, 20);
c.set(Calendar.MINUTE, 0);
c.set(Calendar.SECOND, 0);
AlarmManager a = (AlarmManager)getSystemService(ALARM_SERVICE);
a.setRepeating(AlarmManager.RTC_WAKEUP,c.getTimeInMillis(),AlarmManager.INTERVAL_DAY,p); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-08T05:28:43.550

将以下代码放入您的代码中以在特定时间重复警报

```
 if(System.currentTimeMillis() <= c.getTimeInMillis()){

        AlarmManager a = (AlarmManager)getSystemService(ALARM_SERVICE);
        a.setRepeating(AlarmManager.RTC_WAKEUP,c.getTimeInMillis(),AlarmManager.INTERVAL_DAY,p);

    } 
```

我希望它可以帮助你...

# ruby-on-rails - 使用 Mongoid 在 MongoDB 中查询多位置

> ID：14616703
> 
> 赞同：0
> 
> 时间：2013-01-31T00:53:16.447
> 
> 标签：ruby-on-rails, mongodb, mongoid, geospatial

我正在尝试使用空间索引查询文档。

根据[文档](http://docs.mongodb.org/manual/core/geospatial-indexes/#multi-location-documents)，我的模型看起来像：

```
class Trip
  include Mongoid::Document
  field :addresses, :type => Array
  index({"addresses.loc" => "2d"}, {:min => -180, :max => 180})
end 
```

地址是这样存储的

```
Trip.first.addresses
=> [{"context"=>"from", "loc"=>[-71.55234, -33.024527]}, {"context"=>"to", "loc"=>[-70.641997, -33.4691199]}] 
```

我想使用以下查询查询与 address.loc 和 address.context 匹配的文档：

```
Trip.where("addresses.loc" => {"$nearSphere" => [-70.641997, -33.4691199], "$maxDistance" => 0.005052092295133236}).where("addresses.context" => "to") 
```

查询返回正确的值，但似乎忽略了“address.context”。我做的正确吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:06:28.347

为了查找包含与表达式匹配的数组的文档，您应该使用#elem_match：

```
Trip.elem_match(addresses: {context: 'to', _rest_of_your_geospatial_stuff_ }) 
```

在这里阅读更多：

[http://mongoid.org/en/origin/docs/selection.html](http://mongoid.org/en/origin/docs/selection.html)

# .net - 带有 * 作为“单词字符”的正则表达式

> ID：14616705
> 
> 赞同：1
> 
> 时间：2013-01-31T00:53:26.483
> 
> 标签：.net, regex

我有一些由空格分隔的任意长度代码组成的文本，例如：

```
AA *X IJ XYZ 7F *A OF *B 3C 
```

作为第一步，我想提取所有 2 个字符的代码，其中第一个字符是星号，第二个字符是 3 种不同的选择之一（假设它们是 A、B 和 C）。所以在这一步之后，在这个例子中，我的匹配列表`*A`和`*B`.

我尝试使用以下正则表达式

```
\b(\*[ABC])\b 
```

...但是当然，这不起作用，因为星号不被视为单词的一部分。我怎样才能以一种可读、可维护的方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:55:27.047

使用正向的lookbehind，并匹配字符串的开头或空格字符：

```
(<=^| )(\*[ABC])\b 
```

在此处查看实际操作：[http ://regex101.com/r/wS5qS2](http://regex101.com/r/wS5qS2)

* * *

如果您只关心捕获组，则不需要后视。只需将其保留在您的捕获组之外：

```
(?:^| )(\*[ABC])\b 
```

# android - “大型二进制文件”的定义是什么？

> ID：14616707
> 
> 赞同：2
> 
> 时间：2013-01-31T00:53:35.063
> 
> 标签：android, binaryfiles, android-sqlite, android-file, android-backup-service

根据 Android 参考页面，[FileBackupHelper](http://developer.android.com/reference/android/app/backup/FileBackupHelper.html)应该“仅用于小型配置文件，而不是大型二进制文件”。

我成功地备份了一个 8 KB 的数据库文件，但我很好奇文件什么时候会变成“大”二进制文件。您认为 Android 指的是兆字节范围内的文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:03:31.053

我相信 Android 源代码（定义“大”与“小”）中没有硬编码限制。至少，我没有在 10 分钟内通过 Android 源代码找到。

一般来说，您应该考虑无线连接的速度。这在很大程度上取决于您和您的用户所在的位置。如果是覆盖 3G/4G 的主要城市——我认为你可以备份一兆字节，如果是农村地区并且你的用户按千字节收费，我宁愿缩减到几十千字节。

# forms - 在 Drupal 中使用 Select Form - 如何显示文本值而不是 ID 值

> ID：14616709
> 
> 赞同：1
> 
> 时间：2013-01-31T00:54:22.550
> 
> 标签：forms, drupal, select, drupal-forms

如何获取选择下拉列表中的文本而不是 Drupal 中的值？

选择表单示例：

```
$form = array();
  $form['test'] = array(
      '#title' => t("Choose something"),
      '#type' => 'select',
      '#options' => array(
        '1' => 'one',
        '2' => 'two',
        '3' => 'three',
      ),
  ); 
```

我能够获得这些值，但我只获得 ID 而不是实际文本。

我希望能够打印出“一”或“二”或“三”，而不是他们的 ID。

我试图显示它这样做：

```
drupal_set_message(t('你选择了 %something.', array('%something' => ['values']['test'])));

```

# jcr - 在 Adob e CQ5 中导入产品

> ID：14616716
> 
> 赞同：1
> 
> 时间：2013-01-31T00:55:03.850
> 
> 标签：jcr, aem, sling

我有一个关于我们如何将产品从后台导入/同步到 CQ5 前端的问题。

架构非常简单 - 自定义后台管理所有产品（基本上它将成为事实的来源）。CQ5 驱动的网站显示搜索结果（由 Adob​​e SearchAndPromote 驱动）和产品详细信息。购买交易将在 CQ5 之外处理。

我浏览了[http://dev.day.com/docs/en/cq/current/ecommerce/eCommerce-framework.html](http://dev.day.com/docs/en/cq/current/ecommerce/eCommerce-framework.html)，我想知道我们应该朝哪个方向移动，但我希望有人确认我的理解是正确的。

1) 我需要创建在作者节点上运行的计划作业，该作业将调用后台并将产品作为 json 提要导入。*我使用基于注释的@Service(Runnable.class) - 有没有办法设置它，让它只在作者节点上运行？*

2）创建自定义服务（上面称为我的服务），它将实际创建crx中的所有节点。*如果我有网站的桌面版和移动版，我是否需要将所有这些完成创建两次？有没有关于更简单的方法来创建它们的提示？*

3）让CQ5复制那些产品来发布节点。

有没有更简单的方法？我的意思是，如果我使用更标准的网络应用程序，我将有一个控制器来显示产品详细信息、两个模板（一个用于移动设备，一个用于桌面）和一个可以调用后台并返回请求产品详细信息的服务。但是 Sling 世界非常不同，我想检查一下我是否理解正确。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:57:01.513

以下是一些答案：

[1) 这是一篇关于不同运行模式的不同配置的好文章： http](http://helpx.adobe.com/cq/kb/RunModeSetUp.html) ://helpx.adobe.com/cq/kb/RunModeSetUp.html您可以使用某些标志为 pub 和 auth 运行模式创建配置，您的代码将查找哪个标志告诉是否执行导入。

2）这取决于。CQ 倾向于拥有移动站点的内容副本，因此为移动站点复制节点可能是有意义的，但前提是这些节点是基于导入数据创建的页面（cq:Page 和 cq:PageContent）。否则，您只需将导入的数据保存在某处并在某个时刻获取（通过 JCR 查询或 .getNode() 等方法）。在这种情况下，不复制数据当然是有意义的。

3）这也取决于这里。我会考虑您可能拥有的以下力量：导入的数据应该是可编辑的吗？更新频率如何？更新量有多大？酒吧间的一致性有多重要？如果更新不是大量、不频繁并且一致性问题导入到 auth 然后复制可以工作。如果您需要能够编辑导入的数据，也可能是这种情况。如果更新是大量和/或频繁的，并且跨 pubs 的一致性并不重要（您可以承受有些人在导入期间可能会从不同的 pubs 看到不同的结果）我建议同时在所有 pubs 上运行导入，因为大规模复制的导入数据可能会影响常规页面/图像复制。

谢谢，马克斯。

# sml - 错误：字符串列表列表而不是字符串列表

> ID：14616721
> 
> 赞同：1
> 
> 时间：2013-01-31T00:55:25.673
> 
> 标签：sml

我有这个函数会产生一个字符串列表：

```
fun get_substitutions1 ([],_) = []
| get_substitutions1 (x::xs,s) = case all_except_option(s,x) of
    NONE     => []  @get_substitutions1(xs,s)
  | SOME lst => lst @get_substitutions1(xs,s) 
```

这个函数接受一个字符串列表和一个类型：

```
fun similar_names(slist,full_name:{first:string,middle:string,last:string})=
let
fun aux(slist,acc)=
case full_name of
{first=a,middle=b,last=c} => case get_substitutions1(slist,a) of
[] => full_name::acc
| x::xs'  => full_name::  aux(xs',{first=x,middle=b,last=c}::acc)

in aux(slist,[])
end 
```

我得到一个错误：

```
错误：运算符和操作数不一致。

运算符域：字符串列表列表 *
                 {first:string, last:string, middle:string} 列表
操作数：字符串列表 *
                 {first:string, last:string, middle:string} 列表
表达：
   辅助 (xs',{first=x,middle=b,last=c}::acc)

```

还有其他方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T01:11:50.127

首先，您可能不想缩进您的代码以使其可读。

很明显为什么你会得到你所做的错误。功能

```
fun get_substitutions1 ([],_) = []
  | get_substitutions1 (x::xs,s) =
    case all_except_option(s,x) of
      NONE => []@get_substitutions1(xs,s)
    | SOME lst => lst @get_substitutions1(xs,s) 
```

有类型

```
val get_substitutions1 = fn : ''a list list * ''a -> ''a list 
```

并且您尝试在内部 case 表达式中使用此函数的结果，在该表达式中，您获取返回列表的尾部（type `'a list`）并在递归函数调用中使用它们。

```
fun similar_names(slist,full_name:{first:string,middle:string,last:string})=
    let
      fun aux(slist,acc)=
          case full_name of
            {first=a,middle=b,last=c} =>
            case get_substitutions1(slist,a) of
              [] => full_name::acc
            | x::xs'  => full_name::  aux(xs',{first=x,middle=b,last=c}::acc)
    in aux(slist,[])
    end 
```

但是，由于您的第一个参数`aux`是 in `get_substitutions1`，因此该参数必须是 type `'a list list`，但`xs'`您在递归调用中使用的 down 只是 type `'a list`。

# c++ - A 类在 C 类中不可见，但在 main 中可见。为什么？

> ID：14616724
> 
> 赞同：2
> 
> 时间：2013-01-31T00:55:56.383
> 
> 标签：c++

```
class A {};

class B : private A {

};

class C : public B {
public:
    void f() {
        A a; // This line causes error, but works when it is in main() function
    }

};

int main()
{
    C c;
    // A a; --> This line works
    return 0;
} 
```

我猜这与`B`私下继承有关，`A`但不能指望它。

编辑：错误是“A 类不可见”。用 g++ 编译。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-31T00:58:47.120

名称查找与访问检查是分开的。当您从一个类继承时，该类的名称被注入到继承类的范围中。所以在课堂`C`上你拿起名字`A`，但它是不可访问的。

* * *

一种解决方案是编写`::A a;`而不是`A a;`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T02:30:46.563

虽然 Alf 的回答是正确的，但我觉得它可以更清楚一点（或者可能更令人困惑，谁知道呢）。类的名称被注入到类本身的范围内。正如他所提到的，只有在查找找到标识符的含义*后才会检查访问说明符。*在有问题的代码中：

```
class A {};
class B : private A {};
struct C : public B {
    void f() {
        A a; // This line causes error, but works when it is in main() function
    }
}; 
```

在处理时`C::f`，编译器会看到标识符`A`并尝试解析它。它在范围内搜索`C`但它不存在，它向上移动层次结构并且在 中找不到它`B`，但它在基本类型中找到它`A`（查找将不合格解析`A`为`::A::A`）。在这种情况下，标识符`A`被解析为*我的基类 B 的基类 A 中的注入名称 A，*并检查访问说明符。编译器检查它是否可以访问*我的基类 B*，然后它是否可以访问*它的基类 A*但是这个由于`private`继承而无法访问，并抱怨你无法访问`A`里面的嵌套名称`A`.

通过提供额外的限定`::A`，您可以指导查找。在这种情况下，它将`A`在全局命名空间中找到该类型，该类型是完全可访问的，并且会编译。

# python - Python：比较两个文本文件的字符串，然后打印上下文

> ID：14616727
> 
> 赞同：-2
> 
> 时间：2013-01-31T00:56:10.727
> 
> 标签：python, string, text, find

我有 2 个文本文件：

1) 城市.txt

```
San Francisco
Los Angeles
Seattle
Dallas 
```

2）master.txt

```
Atlanta is chill and laid-back.
I love Los Angeles.
Coming to Dallas was the right choice.
New York is so busy!
San Francisco is fun.
Moving to Boston soon!
Go to Seattle in the summer. 
```

试图获取 output.txt

```
<main><beg>I love</beg><key>Los Angeles</key><end></end></main>
<main><beg>Coming to</beg><key>Dallas</key><end>was the right choice</end></main>
<main><beg></beg><key>San Francisco</key><end>is fun</end></main>
<main><beg>Go to</beg><key>Seattle</key><end>in the summer</end></main> 
```

city.txt 中的每个实体都是 <key>。master.txt 文件要长得多，所有没有特定城市的行都应该被忽略。他们不按顺序。输出打印出 <key> 和 <beg> & <end> 上下文中的城市（如果有）。

这就是我所拥有的：

```
with open(master.txt) as f:
    master = f.read()
working = []
with open(cities.txt) as f:
    for i in (word.strip() for word in f):
        if i in master:
            print "<key>", i, "</key>" 
```

我知道如何检查两个文本文件（在 'master' 中找到 'city'）......但是一旦我找到城市，我就卡在了如何在 master.txt 中打印和上下文的部分！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:09:02.657

以下应该可以帮助您实现您想要的。这适用于 Python2 和 Python3。

```
#!/usr/bin/python

import os

def parse(line, city):
    start = line.find(city)
    end = start + len(city)
    # Following is a simple implementation. I haven't parsed for spaces
    # and punctuations around tags.
    return '<main><beg>' + line[:start] + '</beg><key>' + city + '</key><end>' \
           + line[end:] + '</end></main>'

master = [line.strip() for line in open(os.getcwd() + '/master.txt', 'r')]
cities = [line.strip() for line in open(os.getcwd() + '/cities.txt', 'r')]
data = []

for line in master:
    for city in cities:
        if city in line:
            data.append(parse(line, city))

# Following would overwrite output.txt file in the current working directory
with open(os.getcwd() + '/output.txt', 'w') as foo:
    for output in data:
        foo.write(output + '\n') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T23:17:48.403

这也应该有效，使用 python 2.6 进行测试：

```
cities_dict = {}
with open('master.txt', 'r') as master_in:
    with open('cities.txt') as city_in:
        for city in city_in:
            cities_dict[city.strip()] = '</beg><key>'+city.strip()+'</key><end>'

    for line in master_in:
        for key,val in cities_dict.iteritems():
            if key in line:
                line_out= '<main><beg>'+line.replace(key,val).replace('!','.').replace('.','').strip('\n')+'</end></main>'
                print line_out 
```

输出：

```
<main><beg>I love </beg><key>Los Angeles</key><end></end></main>
<main><beg>Coming to </beg><key>Dallas</key><end> was the right choice</end></main>
<main><beg></beg><key>San Francisco</key><end> is fun</end></main>
<main><beg>Go to </beg><key>Seattle</key><end> in the summer</end></main> 
```

# java - 运行时 exec lp 命令打印成功

> ID：14616733
> 
> 赞同：0
> 
> 时间：2013-01-31T00:57:03.387
> 
> 标签：java, printing

我必须在java程序中打印一个PDF文件并确保它打印成功，否则抛出异常。

我的代码是：

```
Process p = Runtime.getRuntime().exec("lp -c -n 1 -d 1.2.3.4 abc.pdf");
System.out.println(p.waitFor()); 
```

上面的代码打印0，但它只确认作业提交正常，如何确保它也被打印。

有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:13:23.120

运行 lpstat（在 lp 之后）并捕获进程输出。

# php - Mysql 在 php 中失败，但在 phpmyadmin 中有效

> ID：14616735
> 
> 赞同：0
> 
> 时间：2013-01-31T00:57:21.477
> 
> 标签：php, mysql

我已经做了很多次了，但现在我不能:(

插入总是返回 false，但如果我执行相同的 SQL 脚本（取自输出），它会毫无问题地插入数据库。我已连接到数据库，因为某些值是从另一个表中获取的。

这是我的代码：

```
 $query = "INSERT INTO normotensiones(fecha,macropera,pozo,equipo_pmx,equipo_compania,paciente,sexo,edad,id_compania,otra_compania,puesto,ta,tum,ove,coordinador) 
                                VALUES('$fecha','$macropera','$pozo','$equipo_pmx','$equipo_compania','$paciente','$sexo',$edad,$id_compania,'$otra_compania','$puesto','$ta','$tum','$ove','$coordinador')";
        if (mysql_query($query,$connection)){
            //OK
        } else {
            $errno = mysql_errno();
            $error = mysql_error();
            mysql_close($connection);
            die("<br />$errno - $error<br /><br />$query");
            exit;
        } 
```

输出是：

0 -

```
INSERT INTO normotensiones(fecha,macropera,pozo,equipo_pmx, equipo_compania,paciente,sexo,edad,id_compania, otra_compania,puesto,ta,tum,ove,coordinador) 
                VALUES('20111001','P. ALEMAN 1739','P. ALEMAN 1715','726', 'WDI 838','SERGIO AYALA','M',33,21, '','','110/70','ROBERTO ELIEL CAMARILLO','VICTOR HUGO RAMIREZ','LIC. PABLO GARCES') 
```

看起来没有错误，但总是执行 if 指令的 else 部分中的代码。任何想法？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:22:23.723

我认为问题可能是您`mysql_select_db`在连接后错过了线路。

建立与数据库的连接后，您需要选择一个数据库。请确保您已选择所需表所在的数据库。

您甚至可以使用以下代码片段通过 mysql_errors 获取一些有用的信息。

```
 $connection = mysql_connect('localhost', 'root', 'password');

    if (!$connection) {
        die('<br>Could not connect: ' . mysql_error());
    }

    if (!mysql_select_db('db_name')) {
       die('Could not select database: ' . mysql_error());
    } 
```

并尝试在这些代码行之后插入查询。一切顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T04:39:04.163

我同意其他关于列类型的观点。INT 是唯一不需要单引号的数据类型之一。

有两个空字符串。有可能没有定义变量，因此给你一个 PHP 异常（甚至在 MySql 中还没有），但这需要比正常的异常设置更严格。我会亲自研究 $connection 变量。在 SQL 查询语句之前，将其放入并将清理后的结果发送给我们：

```
echo '<pre>'.var_dump($connection, true).'</pre>'; 
```

此外，在您的 mysql_connect 函数调用中，将

```
OR die('No connection') 
```

后记。对 mysql_select_db 函数执行相同的操作，显然将其更改为“No DB Select”。

最终，我们将需要更多信息。但是改成mysqli是非常可取的。

哦！并确保您连接的用户的权限没有更改。有时我发现有人使用一个用户帐户连接到 PhpMyAdmin，但在他们的 PHP 代码中使用不同的帐户。这是有问题的，并且最终会导致问题，因为您有时会忘记不同的帐户。

# .htaccess - htaccess RewriteRule 到新域保留查询字符串

> ID：14616744
> 
> 赞同：0
> 
> 时间：2013-01-31T00:58:22.347
> 
> 标签：.htaccess, mod-rewrite

我在其他问题和答案中找到了关于此的帮助，但它们并没有具体解决我想要做的事情。

我的 RewriteRules 看起来像这样......

```
#Options +FollowSymLinks
RewriteEngine on
RewriteCond %{HTTP_HOST} ^www.domain.com$[OR]
RewriteCond %{HTTP_HOST} ^domain.com$
RewriteRule ^(.*)$ http://newdomain.com/rd/r.php? [QSA] 
```

我需要[http://domain.com/query.php?sid=1234&pub=123456&c1=will&c2=test1&c3=12345](http://domain.com/query.php?sid=1234&pub=123456&c1=will&c2=test1&c3=12345)重定向到[http://newdomain.com/rd/r.php?sid=1234&pub=123456&c1=will&c2=测试1&c3=12345](http://newdomain.com/rd/r.php?sid=1234&pub=123456&c1=will&c2=test1&c3=12345)

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T02:05:39.630

```
#Options +FollowSymLinks
RewriteEngine on
RewriteCond %{QUERY_STRING} ^(.*)$
RewriteCond %{HTTP_HOST} ^(www\.)?allsystemsarego.info$
RewriteRule ^(.*)$ http://affiliate.gwmtracker.com/rd/r.php?%1 [R,L] 
```

查询字符串应该原封不动地通过，但如果不是，您可以像上面那样显式地抓取它。是对第`%1`一个匹配项的反向引用`RewriteCond`，包含查询字符串。

`www.`我通过`(www.)?`规则部分匹配或不匹配前导，将您原来的两个 RewriteConds 简化为一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:37:38.700

这是有效的代码。[链接的](https://stackoverflow.com/users/1971315/david-ravetti)所有道具！David Ravetti。

```
#Options +FollowSymLinks
RewriteEngine on
RewriteCond %{QUERY_STRING} ^(.*)$
RewriteCond %{HTTP_HOST} ^(www\.)?mydomain.com$
RewriteRule ^query.php$ http://newdomain.com/subdir/file.php?pub=123456 [L,QSA] 
```

# ruby - Guard 在终端中运行，但不在 iTerm2 中运行

> ID：14616745
> 
> 赞同：0
> 
> 时间：2013-01-31T00:58:38.070
> 
> 标签：ruby, sass, guard

当我尝试在 iTerm2 中运行警卫时，我得到以下输出。（它在终端中运行良好。）

```
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find guard (>= 0) amongst [bigdecimal-1.1.0, io-console-0.3, json-1.5.4, minitest-2.5.1, rake-0.9.2.2, rdoc-3.9.4] (Gem::LoadError)
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems.rb:1231:in `gem'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/bin/guard:18:in `<main>'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>' 
```

其他一些细节：我将 oh-my-zsh 与 iTerm2 一起使用。我还在终端中使用 oh-my-zsh，我没有任何问题。

这不是 Rails 应用程序。它只是一个包含用于 Guard Sass 的 Guardfile 的目录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:07:12.500

弄清楚问题出在哪里。这是因为我没有将 iTerm2 作为登录 shell 运行。

我去了 iTerm2 Preferences -> Profiles 选项卡。在*命令*下，我选择了登录 shell 选项，而不是命令选项。

重新启动 iTerm2。Guard 运行没有错误。

# perl - $in mongoDB 运算符与 perl 中的 _id

> ID：14616746
> 
> 赞同：0
> 
> 时间：2013-01-31T00:58:40.007
> 
> 标签：perl, mongodb

我尝试在 MongoDB 数据库上使用 perl 执行此查询：

```
$db->$collection->find({"_id" : { "$in" : ["4f520122ecf6171327000137", "4f4f49c09d1bd90728000034"]}}); 
```

但它什么也不返回，它必须返回两个文件。这个查询有什么问题？

谢谢你。

编辑：它也不起作用：

```
$db->$collection->find( {_id => "4f520122ecf6171327000137"} ); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-31T01:10:37.723

首先，确保您使用正确的语法。您的第一个示例不是有效的 Perl 代码，因为您包含了一块 JSON 作为查询参数。

其次，假设这些 ID 值是 MongoDB ObjectID，您需要创建 OID 对象以便将它们与普通字符串区分开来。并确保在`''`周围使用单引号 ( ) `$in`，否则 Perl 将尝试`$in`作为变量进行插值（其中可能没有任何内容）。

所以我假设你想做这样的事情：

```
$db->$collection->find( {
    "_id" => { 
        '$in' => [ MongoDB::OID->new( value => "4f520122ecf6171327000137" ), 
                   MongoDB::OID->new( value => "4f4f49c09d1bd90728000034" )
                 ]
             } 
} ); 
```

编辑：此外，使用自动加载的方法名称来检索集合已被弃用一段时间。你最好使用`$db->get_collection( "collection name" )->find( ... )`

# c - const 多维数组

> ID：14616750
> 
> 赞同：5
> 
> 时间：2013-01-31T00:59:14.030
> 
> 标签：c, multidimensional-array, global-variables, constants

在 C 中，我如何将 const 修饰符（或任何其他修饰符）添加到全局多维数组中，以便变量和它保存的值都是常量。

例如，我将如何添加一个 const 修饰符：

```
byte fruitIds[][2] = { { 0x01, 0x02}, {0x02, 0x03} } 
```

所以在作业结束时你不能这样做：

```
fruitIds = vegetableIds; 
```

或这个：

```
fruitIds[0] = {0x02, 0x03}; 
```

或这个：

```
fruitIds[0][0] = 0x02; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T01:02:07.883

数组已经是不可修改的左值。这仅意味着您需要设置值`const`：

```
const byte fruitIds[][2] = { { 0x01, 0x02}, { 0x02, 0x03} }; 
```

您帖子中的这些作业：

```
fruitIds = vegetableIds;
fruitIds[0] = {0x02, 0x03}; 
```

已经违法了。后者甚至不是有效的语法，但我从尝试做前者中得到了一条`read-only variable is not assignable`消息。`clang`

# c++ - OOP：派生子类中数据库连接的正确类设计？

> ID：14616751
> 
> 赞同：2
> 
> 时间：2013-01-31T00:59:24.363
> 
> 标签：c++, oop, design-patterns, database-connection, parameterization

我正在用 C++ 编写一个长时间运行的多线程服务器。它在套接字上接收请求，进行数据库查找并在套接字上返回响应。

服务器从配置文件中读取各种运行信息，包括数据库连接参数。我必须使用公司代码库中的数据库抽象类。我不想等到尝试进行数据库搜索以延迟实例化数据库连接（由于未显示复杂性，并且如果无法建立数据库连接，则需要在启动时退出错误）。

我的问题是如何将数据库连接信息放到搜索类中，而无需做任何技术上可行的“丑陋”或糟糕的 OOP 事情。我想学习如何正确地做到这一点。

是否有一个很好的设计模式来做到这一点？我应该使用“从上方参数化”模式吗？我错过了一些更简单的组合模式吗？

```
 // Read config file.
    // Open DB connection using config values.

    Server::process_request(string request, string response) {
        try {
            Process process(request);
            if (process.do_parse(response)) {
                return REQ_OK;
            } else {
                // handle error
            }
        } catch (..,) {
            // handle exceptions
        }
    }

    class Process : public GenericRequest {
    public:
        Process(string *input) : generic_process(input) {};
        bool    do_parse(string &output);
    }

    bool Process::do_parse(string &output) {
        // Parse the input request.
        Search search;      // database search object
        search.init( search parameters from parsing above );

        output = format_response(search.get_results());
    }

    class Search {
        // must use the Database library connection handle.
    } 
```

如何将数据库连接从顶部的 Server 类获取到上面伪代码底部的 Search 类实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:58:56.713

您要解决的问题似乎是对象依赖之一，并且使用[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)可以很好地解决。

您的类`Process`需要一个 的实例`Search`，必须以某种方式对其进行配置。与其让实例`Process`分配他们自己的`Search`实例，不如让他们在构建时收到一个现成的实例会更容易。该类`Process`不必知道`Search`配置细节，因此避免了不必要的依赖。

但是随后问题会级联到必须创建的任何对象`Process`，因为现在这个对象必须知道配置细节！在您的情况下，这并不是真正的问题，因为`Server`该类是创建`Process`实例的类，并且它恰好知道`Search`.

但是，更好的解决方案是实现一个专门的类，例如`DBService`，它将封装从配置步骤获取的 DB 详细信息，并提供一种方法来获取现成的`Search`实例。使用此设置，没有其他对象将依赖于`Search`类的构造和配置。作为一个额外的好处，您可以轻松实现和注入一个`DBService`模型对象，这将帮助您构建测试用例。

```
class DBSearch {
    /* implement/extends the Search interface/class wrt DB */
};

class DBService {
    /* constructor reads up configuration details somehow: command line, file */

     Search *newSearch(){
         return new DBSearch(config); // search object specialized on db
     }

}; 
```

上面的代码在一定程度上说明了解决方案。请注意，该`newSearch`方法不限于仅构建一个`Search`实例，而是可以构建任何专门用于该类的对象（例如`DBSearch`上面的类）。依赖关系几乎从中删除`Process`，现在只需要知道`Search`它真正操作的接口。

这里强调的良好 OOP 设计的核心要素是减少对象之间的耦合，以减少修改或增强应用程序部分时所需的工作量，

请在 SO 上查找[依赖注入，](https://stackoverflow.com/questions/tagged/dependency-injection)以获取有关该 OOP 设计模式的更多信息。

# php - mysqli_connect 没有选择数据库

> ID：14616752
> 
> 赞同：0
> 
> 时间：2013-01-31T00:59:29.420
> 
> 标签：php, mysql, mysqli

> **可能重复：**
> [PHP 无法连接到 MySQL](https://stackoverflow.com/questions/4082938/php-cant-connect-to-mysql)

MySQLI 没有正确选择我的数据库。我确信数据库存在并且名称正确。在 MAMP 中运行此页面会输出“数据库连接失败：未选择数据库”。我的 MAMP 版本确实支持 MySQLI。有谁知道出了什么问题？谢谢！

```
<?php 
$host = 'localhost';
$username = 'root';
$password = 'root';
$database = 'my_db';

query();

function query(){
    $mysqli = mysqli_connect($host, $username, $password, $database);
    $query = mysqli_query($mysqli, "INSERT INTO names (first_name, last_name) VALUES ('John', 'Doe')");

   if(!$query){
    echo "Database connection failed: " . mysqli_error($mysqli);
   }

   mysqli_close();
   }

?> 
```

# php - 分解多维数组并循环进入 wpdb 更新

> ID：14616756
> 
> 赞同：0
> 
> 时间：2013-01-31T01:00:02.630
> 
> 标签：php, mysql, arrays, wordpress

我有一个看起来像这样的数组：

```
Array
(
    [72] => Array
      (
        [description] => data
        [tags] => data1
        [extra] => data1
        [extra2] => data3
      )
    [71] => Array
      (
        [extra] => data4
        [extra2] => data5
      )
    [73] => Array
      (
        [description] => data7
        [tags] => data6
      )
) 
```

我想把它放到一个 sql update 语句中。数组的第一级是我需要设置到 WHERE 子句的唯一键，其余数据是具有各自值的列名。此数据因用户设置而异。

编辑：这非常容易。

```
foreach($save as $id => $arr) {
    $wpdb->update( $table_name, $arr, array('id' => $id));
} 
```

然而，这并不使用`wpdb prepare`，这似乎是必要的。如何操纵此代码以允许`wpdb-prepare`？

我在 wpdb prepare 和 update 上找到的唯一代码如下所示：

```
$rows_affected = $wpdb->query(
            $wpdb->prepare("
               UPDATE $table
               SET ( removed, post_id, user_id, status )
               VALUES ( %s, %d, %d, %d )
               ",
               array(
                $cur_date,
                $postid,
                $userid,
                0
            )
        )
    ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:34:35.647

所以只是为了回答这个问题，你已经想通了

1.  您可以在另一个 foreach 中使用 foreach ，它会遍历项目。
2.  更新功能已经为您准备和消毒，因此无需调用 wp 准备功能。

快乐的时光。

# sql - SQL 数据库自动备份

> ID：14616764
> 
> 赞同：20
> 
> 时间：2013-01-31T01:01:31.937
> 
> 标签：sql, backup, lan

我有一个 SQL 数据库 - 我需要每天（至少）备份它 - 最好每天备份多次 - 自动所以它肯定会完成。

我正在运行存储 SQL 数据库的 Windows。

我可以使用哪些程序（更喜欢免费程序）来备份它 - 我对 SQL 完全陌生，所以如果你要解释一些事情 - 用外行的话来做谢谢（：

它需要备份到另一台服务器（在 LAN 上）。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-07-04T08:24:40.423

使用维护计划自动备份数据库

简单的步骤：

1.  转到 SQL Server 配置管理器 > SQL Server 服务 > 运行 SQL Server 代理（将其设置为自动运行）

2.  转到 SQL Server Management Studio，找到选项卡管理 > 维护计划。右键单击 > 维护计划向导。

3.  给您的维护计划发短信，例如：DailyBackup。选择选项按钮：整个任务的单一计划。

4.  根据您的需求单击配置 > 设置计划。

5.  选择维护任务。对于这种情况，您选择完整数据库备份。

6.  单击下一步，然后定义要备份的数据库、设置备份位置和备份扩展名。

7.  单击下一步，选择您的报告模式，然后单击完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T04:30:43.207

目前有很多这样的程序，你可以试试[EMS SQL Backup](http://www.sqlmanager.net/products/mssql/sqlbackup/)。它不是免费的，但对于此类任务来说非常方便，并且支持备份压缩、加密以及将备份上传到 FTP、网络和云位置。

# mod-rewrite - Symfony2 中的 mod_rewrite 子域

> ID：14616771
> 
> 赞同：0
> 
> 时间：2013-01-31T01:02:08.070
> 
> 标签：mod-rewrite, symfony, url-rewriting, subdomain

请帮助 mod_rewrite 子域到一些 Symfony2 路由。我花了 3 个月的时间用我的 Symfony2 项目来解决这个问题，但是在阅读了大量的 apache mod_rewrite 和 mod_alias 文档并尝试了数百个示例之后......它仍然无法正常工作！

我试图解决的是，当用户输入某些特定子域的地址时： **XXXXXXX.example.com**

他看到的内容实际上位于
**www.domain.com/tag/XXXXXXX/下**

但他没有被重定向或 URL 没有改变——当他进入时它应该只是保持 XXXXXX.example.com。

我需要使用 Apache VirtualHost 和启用站点的文件（而不是使用 SubdomainListener）来解决这个问题，但我可以用 mod_rewrite 自己解决的最多的问题是

**XXXXXXX.example.com**

将自身（透明地）重写为

**XXXXXXXX.example.com/tag/XXXXXXXX** 或
**XXXXXXXX.example.com/app.php/tag/XXXXXXXX/**

这当然不是我想要达到的目标。我尝试实现内部（[http://httpd.apache.org/docs/2.2/rewrite/remapping.html](http://httpd.apache.org/docs/2.2/rewrite/remapping.html)）重定向，所以用户看不到。任何有关工作灵魂的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:29:15.630

自从[这次](https://github.com/symfony/symfony/pull/3378)提交以来，您可以在 Symfony 中本地使用子域，但不幸的是，这是 Symfony 2.2 的一个特性。但是，如果您需要子域，这仍然是最好的方法。

# objective-c - 如何保持组和项 NSTableViews 同步？

> ID：14616776
> 
> 赞同：0
> 
> 时间：2013-01-31T01:02:31.643
> 
> 标签：objective-c, cocoa, nstableview

我正在开发一个应用程序，我想做一些与这个问题中提出的问题非常相似的事情：[How to add row-span in view-based NSTableView?](https://stackoverflow.com/questions/8235622/how-to-add-row-span-in-view-based-nstableview)

第二[个答案](https://stackoverflow.com/a/12364544/1174185)让我很感兴趣，因为它是一个聪明的解决方案，但我不知道如何使两个表视图保持同步。特别是，我没有看到任何明显的方法来确保项目表视图中的行显示在对应的组旁边。对我来说最明显的解决方案是：

1.  将项目表的数据源基于组表视图的数据源。因此，组数据源中的每个对象都有一个属于它的项目列表，然后每次项目表视图需要一行时，遍历组，并计算每个组中的项目，直到找到您需要的项目. 这听起来*非常*低效。

2.  NSSortDescriptors 在项目上的一些巧妙应用，以便它们最终排序，以便行匹配。这对我来说似乎有点神奇，如果你能让它确定性地工作，你会很幸运。

3.  保留指向您正在处理的当前组的指针并返回该组中的下一个项目，直到您用完该组的项目，然后移动到下一个组。这将取决于表视图按顺序要求行。如果任何地方都存在任何并发性或无序性，这似乎也将非常困难。

所有这些解决方案都有一些非常明显的缺陷。我觉得我错过了这里的“把戏”，或者可能只是站在我面前的巨型紫色大象。:)

**编辑：**针对[rdelmar](https://stackoverflow.com/users/1285133/rdelmar)的[评论](https://stackoverflow.com/questions/14616776/how-to-keep-group-and-item-nstableviews-in-sync#comment20413690_14616776)，我将添加一些说明。对于我的特殊情况，组中的项目数量是可变的——一些组可能有两个，其他组可能有十个。我想找到的解决方案不应该取决于组中有固定数量的项目。

就选择行为而言，组中的每个项目可能都不是可选的，但它们确实需要是可编辑的。组可能会被作为一个整体进行编辑，即用户会说“我想编辑组 A”，这将触发编辑组中的任何字段或属于它的项目的能力。可能可以使用标签而不是表格视图，但似乎这将涉及复制表格视图免费为您提供的大量工作（在网格中排列视图等）。

我为此提出的第一个解决方案实际上涉及在组表视图的每一行内嵌入项目的表视图。因此，顶级表格视图将仅包含组，然后每个组将有自己的嵌入式表格来显示其拥有的项目。我最终放弃了那个解决方案，希望能找到一个包含较短视图树的解决方案。

# ruby-on-rails - 运行worker时的Swifttype rails，post_url未定义方法

> ID：14616778
> 
> 赞同：1
> 
> 时间：2013-01-31T01:02:42.517
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, swiftype

我正在尝试在 Rails 3.2.5 上实现[Swifttype 。](https://swiftype.com)但是，在添加类别并运行时`rake jobs:work`，我收到以下错误消息：

> CreateSwifttypeDocumentJob 因 NoMethodError 失败：未定义的方法 `post_url' for #

在`CreateSwiftypeDocumentJob`我的模型中：

```
post = ProposalCategory.find(proposal_category_id) 
url = Rails.application.routes.url_helpers.post_url(post) 
```

如果有人可以请帮忙，那将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:27:19.310

`post_url`仅当您确实有 Post 资源的路线时才应使用。

你的`routes.rb`文件里有什么？大概是这样的：

```
resources :proposal_categories 
```

在这种情况下，您需要使用类似`proposal_category_url`.

# pip - 通过需求文件从 pip 安静输出？

> ID：14616779
> 
> 赞同：14
> 
> 时间：2013-01-31T01:02:45.240
> 
> 标签：pip, amazon-elastic-beanstalk, requirements.txt

pip 有一个 -q/--quiet 标志，非常适合从命令行工作。我正在使用自动部署过程 (Amazon Elastic Beanstalk)，这些工具使用 pip 从需求文件进行安装。

不幸的是，pip 正在生成非错误输出，导致 EB 由于其记录器无法处理非 ASCII 输出而中止。

由于我不能将 quiet 标志直接应用于 pip 命令（它会自动运行），我是否可以在我的需求文件中设置每行标志或可以抑制 pip 输出的环境变量？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-04T15:36:10.463

经过更多挖掘，这是 github 中 pip 的待处理功能请求：

[https://github.com/pypa/pip/issues/271](https://github.com/pypa/pip/issues/271)

临时解决方法：使用单独的 bash 脚本逐行调用 pip，直到在 Elastic Beanstalk 上实施、发布和可用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2021-07-05T07:02:25.067

Pip 提供了`--quiet / -q`使输出静音的选项。例子：

`pip install -q -r requirements.txt`

# c# - 尝试在 Nunit 中实现模拟接口时遇到问题

> ID：14616781
> 
> 赞同：0
> 
> 时间：2013-01-31T01:03:00.580
> 
> 标签：c#, .net, mocking, nunit, moq

我已经花了很长时间试图解决这个问题，但到目前为止还没有运气。我正在尝试在以下方面实施模拟测试

我有两个接口的服务。一种是接收电子邮件/推文，另一种是回复它们。这些接口记录需要声明的信息。但是到目前为止我的问题是如何正确模拟这两个接口。以下是详细信息。

```
 [ServiceContract]
   Name=emailsystem
   callabackcont=typeof(Iemailcallback)
   Public Interface IemailReceived
   [OperationContract]
   Void EmailReceived(EmailResponse message, int messgID)

    //Than in my DataContract I have 
    [DataContract(Name=EmailRequest...]

     public EmailReceived(Email message, int mssgID)
     {

     }

    //for my response interfact Iemailcallback I have 
    [ServiceContract(Name= "xyz")]

    [OperationContract] (IsOneWay=true   )
    void EmailResponse(emailResponse)

     //for the above interface I have data contract 
     [DataContract]
     EmailResponse 
     this(status, mssg) 
```

我正在尝试在 NUnit 中使用 Moq 模拟测试 EmailResponse 和 EmailRequest。我尝试了不同的方法，但没有任何效果。我创建了 Mocks

```
 var mockEmailRequest = new Mock<IEMailRequest>
   var mockEmailResponse = new Mock<Iemailcallback>

since I dont have return type on the methods so I guess it goes something like in setup

    mockEmailResponse.setup(x+>x.EmailResponse).Callback(.....); 
```

不知道如何实施。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:49:32.510

您需要`Verify`在模拟上使用该功能。有几种方法可以做到这一点。

```
//when you know the parameter values to expect
mockEmailRequest.Verify(r=>r.EmailReceived(expectedEmail, expectedId));

//when you just want to verify some detail about the values
mockEmailRequest.Verify(r=>r.EmailReceived(It.Is<EmailResponse>(r=>r.Subject == "Something"), It.Is<int>(i=>i > 17)));

//when you don't care about the values
mockEmailRequest.Verify(r=>r.EmailReceived(It.IsAny<EmailResponse>(), It.IsAny<int>())); 
```

[在起订量快速启动页面上](http://code.google.com/p/moq/wiki/QuickStart)阅读更多相关信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T03:28:30.570

您可以模拟接口，但如果返回类型为 void，您将无法测试输出/功能。

如果您正在修改正在发送的对象，您可能会检查它。否则就是一个黑匣子。

也许你应该做的是在你的测试套件中实现接口，对于 EmailResponse 和 EmailReceived 的方法体，只需将参数打印到控制台。

例如：

```
 public class EmailTestImplemtation : IEmailReceived {
   void EmailReceived(EmailResponse message, int messgID) {
      Console.out.WriteLine("Message: " + message.toString() + " MessageID: " + messgID);
   }
} 

```

不过这没什么用，因为它证明的只是您的参数在代码的其他部分中被正确传递。

当你得到依赖时，你可以模拟一个接口，但你不能真正对依赖进行单元测试。换句话说，您不会针对实时数据库运行单元测试。您模拟了在数据库顶部使用的接口，但是运行存储过程/查询的实际功能......您将它们留给集成测试，而不是单元测试。

# android - MediaPlayer，从活动 返回后不在 onResume() 上播放音乐

> ID：14616782
> 
> 赞同：0
> 
> 时间：2013-01-31T01:03:02.430
> 
> 标签：android

在 MainActivity 上，我使用 MediaPlayer 播放背景音乐。

```
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    Music.playBGmusic(this, R.raw.main_music);
}

@Override
protected void onResume() {
      super.onResume();
      if ( ! Music.isPlaying(this) )
      {
          Music.playBGmusic(this, R.raw.main_music);
      }
} 
```

在 Music.java 中：

```
public class Music {
   private static MediaPlayer mMainSound = null;
   public static boolean isPlaying(Context context)
   {
       if ( mMainSound != null )
       {
           return mMainSound.isPlaying();
       }
       return false;
   }

   public static void playBGmusic(Context context, int resource)
   {
       if ( mMainSound != null ) mMainSound.release();
       mMainSound = MediaPlayer.create(context, resource);
       mMainSound.setLooping(true);
       mMainSound.start();
   }

   public static void stopBGmusic(Context context) {
       if (mMainSound != null) {
           mMainSound.stop();
           mMainSound.release();
           mMainSound = null;
       }
   }
} 
```

`mMainSound`MediaPlayer 对象在哪里。我的 MainActivity 上有一个按钮，当它被点击时，它会创建一个意图，并且`startActivity`那个意图。`playBGmusic`这个新活动以**另一种声音**呼唤。现在，当该新活动调用`stopBGmusic()`并 `finish()`返回 MainActivity 时，`onResume()`MainActivity 将按预期调用，并且它应该`main_music`在后台播放。实际发生的是，我只能听到不到一秒钟的音乐，然后就被切断了。我在启动 MediaPlayer 之前尝试过`prepare()`，但这仍然不能解决问题。如果有人能为我澄清这个问题，将不胜感激。

也许我还应该提到`finish()`新活动中调用的位置，尽管我不确定这是否重要..

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event)
{
    switch(keyCode)
    {
        case KeyEvent.KEYCODE_BACK:
            showDialog(1);
        break;
    }
    return true;
}  

@Override
protected Dialog onCreateDialog(int id) { //id is ignored
    Dialog dialog = null;
    AlertDialog.Builder builder;
    builder = new AlertDialog.Builder(this);
    builder.setMessage(R.string.return_home)
           .setCancelable(true)
           .setPositiveButton(R.string.ok, new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                   finish();
               }
           })
           .setNegativeButton(R.string.cancel, null);
    dialog = builder.create();
    return dialog;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:07:22.143

您应该真正绑定一个服务来控制 MediaPlayer，而不是让您的主要活动控制它。相反，它应该通过您将服务绑定到您的应用程序来控制服务。

简单地说（假设您想在退出应用程序时继续播放音乐）：

当您播放音乐时，您希望在后台运行它并让您的应用程序控制（开始/停止/暂停）媒体播放器的状态。创建媒体播放器时，您从后台而不是前台播放。这允许您在用户运行您的服务时连续播放音乐。

通过捕获特定的意图过滤器，可以使用 PendingIntent 与您的服务进行通信来设置通信。我建议去谷歌开发网站做一些教程，尝试学习意图、意图过滤器/动作和服务，并了解活动和服务的生命周期。

要正确地做到这一点，您应该分配一些时间来研究/实验并了解 android。

# ember.js - 谷歌中的灰烬哈希网址

> ID：14616783
> 
> 赞同：4
> 
> 时间：2013-01-31T01:03:06.023
> 
> 标签：ember.js

我担心谷歌上的页面排名有以下情况：

我希望将具有 150k+ 独特页面结果的现有网站转换为 ember 应用程序，离开路线。所以目前它类似于 domain.com/model/id - 带有余烬和哈希变化 - 它将是 /#/model/id。我真的很想要历史状态，但缺乏 IE 支持并不能作为一种选择。因此，我的谷歌站点地图使用旧模型/ID 获得了很多很棒的结果。在 Rails 方面，我将测试浏览器的兼容性，然后再渲染 JS 丰富的应用程序或纯 HTML / CSS。有没有人对我当前的成功模式有好的 SEO 建议。

下面链接的是我的架构并查看选项 - [http://static.allplaces.net/images/EmberTF.pdf](http://static.allplaces.net/images/EmberTF.pdf) 历史状态很棒，但看起来只有大约 60% 的浏览器支持。 [http://caniuse.com/history](http://caniuse.com/history)

感谢大家的建议，谷歌指南与我将要尝试的类似。本月我将把它推广给 1 个客户，看看网站管理员和分析显示什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T12:45:10.840

这是使哈希链接对 seo 友好所需的一切：[https ://developers.google.com/webmasters/ajax-crawling/](https://developers.google.com/webmasters/ajax-crawling/)

基本上你用哈希链接编写你的整个应用程序，但你必须添加“！” 给他们，所以你有#!/model/id。下一步您必须在某处生成所有页面，如果谷歌要求它们，请按照此处所述返回“纯 html”： [https ://developers.google.com/webmasters/ajax-crawling/docs/getting-started](https://developers.google.com/webmasters/ajax-crawling/docs/getting-started)

使用谷歌网站管理员工具检查您的网站是否可抓取。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T05:24:44.470

我不确定您是否知道您可以将 Ember 配置为使用位置 API 的浏览器历史记录并继续按照它们现在引用的方式使用您的页面。您需要做的就是配置 Route 的 location 属性

```
App.Router.reopen({
  location: 'history'
}); 
```

[在此处](http://emberjs.com/guides/routing/specifying-the-location-api/)查看有关指定位置 api 的更多详细信息

# c - 与面向对象相比，对于像 C 这样的命令式语言，对象和实例是否意味着其他东西？

> ID：14616785
> 
> 赞同：0
> 
> 时间：2013-01-31T01:03:08.883
> 
> 标签：c, oop, imperative-programming

我读到一个正在运行的 C 程序可以称为“实例”。这真的正确吗？实例一词通常用于 OOP。C 也有“对象”不是吗，但它与 OOP 中的不一样。C 中的“对象”只是内存中的某种东西，例如具有某些值的联合，可以称为对象，不是吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T01:21:27.703

C 中的“对象”只是内存中的东西，但所有计算机语言也是如此。

现实生活中的对象是物理存在的事物。存在于内存中是程序中最接近物理存在的东西，因此我们使用相同的术语。

现实生活中的一个实例是一个通用概念的具体例子。该术语在计算机中具有类似的普遍性。当您告诉计算机运行一个程序时，它会在运行该程序的许多潜在实例中生成该程序的一个实例。同样，与 C 无关，这个术语通常出现在操作系统中（它管理程序的运行，并定义什么是“程序”）。

# php - 从数据库中检索值并显示在工具提示中

> ID：14616786
> 
> 赞同：0
> 
> 时间：2013-01-31T01:03:14.100
> 
> 标签：php, javascript, jquery, html, css

我使用 javascript 创建了一个工具提示，并使用该工具提示创建了一个 html 页面。这是我的工具提示：

```
$(document).ready(function () {
//Tooltips
$(".tip_trigger").hover(function (e) {
    tip = $(this).find('.tip');
    var tipText = $(e.target).attr('ti');
    tip.html(tipText);
    tip.show(); //Show tooltip
}, function () {
    tip.hide(); //Hide tooltip        
}).mousemove(function (e) {
    var mousex = e.pageX + 20; //Get X coodrinates
    var mousey = e.pageY + 20; //Get Y coordinates
    var tipWidth = tip.width(); //Find width of tooltip
    var tipHeight = tip.height(); //Find height of tooltip

    //Distance of element from the right edge of viewport
    var tipVisX = $(window).width() - (mousex + tipWidth);
    //Distance of element from the bottom of viewport
    var tipVisY = $(window).height() - (mousey + tipHeight);

    if (tipVisX < 20) { //If tooltip exceeds the X coordinate of viewport
        mousex = e.pageX - tipWidth - 20;
    } if (tipVisY < 20) { //If tooltip exceeds the Y coordinate of viewport
        mousey = e.pageY - tipHeight - 20;
    }
    tip.css({ top: mousey, left: mousex });
});
}); 
```

这是HTML：

```
<div class="container">
    <h1><span>Simple Example</span></h1>
<map name="Koala" class="tip_trigger">
<area ti="This is the left eye" shape="rect" coords="373,365,404,402" href="#" />
<area ti="Right Eye" shape="rect" coords="641,405,681,448" href="#" />

    <div class="tip"></div> 
```

我希望数据库值显示“ti”在哪里......例如。ti="database value" 怎么做？我将使用 MySQL 和 php。我将非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-03T23:45:10.927

在 mysql 中创建帮助表：

```
CREATE TABLE `help` (
  `helpID` varchar(100) NOT NULL,
  `helpText` text NOT NULL,
  UNIQUE KEY `helpID` (`helpID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

对于通用工具提示，在您想要帮助提示的页面上，放置以下 html：

```
<span id="productSKUHelp" class="helpTip questionMark"></span> 
```

由于您希望在光标位于某个位置时出现工具提示，因此您应该能够使用 mousemove 函数并调用 showTip。

添加以下 JQuery：

```
 function showTip(thisTip){
    var postdata = {
      helpTip: thisTip.attr('id')
    };
    $.ajax({
             type    : "post",
             url     : "/getHelpRPC.php",
             dataType: "html",
             data    : postdata,
             success : function(data){
               if(data.length > 0){
                 var origContent = thisTip.html();
                 thisTip.removeClass("questionMark").addClass('helpTipBox');
                 thisTip.html(data);

               }else{
                 $('#helpTipBox').html("error");
               }
             },
             error   : function(xhr, textStatus, error){
               console.log(xhr.statusText);
               console.log(textStatus);
               console.log(error);
             }
           });

  }

  $(document).on('mouseenter', '.helpTip', function(){
    var thisTip = $(this);
    helpTipTimer = setTimeout(function(){
                                showTip(thisTip);
                              },
                              1000);
  })
  $(document).on('click', '.helpTip', function(){
    showTip($(this));
  })
  $(document).on('mouseleave', '.helpTip', function(){
    clearTimeout(helpTipTimer);
    $(this).html('').removeClass('helpTipBox').addClass('questionMark');
  }); 
```

添加以下 CSS：

```
.helpTip{
  padding-left:3px;
  z-index:900;
}

.questionMark:after{
  color:maroon;
  cursor:pointer;
  content:"?";
  top:2px;
  position:relative;
  padding:0 3px;
}

.helpTipBox{
  padding:5px;
  background-color:#97abcc;
  position:absolute;
  curson:text;
} 
```

创建 getHelpRPC.php RPC：

```
<?php
$mysqli = new mysqli(DB_HOST, DB_USER, DB_PASS, DB);

if($mysqli->connect_errno){
    printf("Connect failed: %s %s %s\n", $mysqli->connect_error, __FILE__, __LINE__);
    exit();
}

$helpID = $_POST['helpTip'];
if($helpID != ""){
    $querystr = "SELECT helpText FROM help WHERE helpID ='" . $mysqli->real_escape_string($helpID) . "'";
    $res = $mysqli->query($querystr);
    $rowCount = $res->num_rows;
    if($rowCount > 0){
        $row = $res->fetch_object();
        echo $row->helpText;
    } else {
        echo "error selecting help.";
    }
} 
```

现在您需要做的就是在 span 中创建一个唯一的 id 并将相应的记录添加到表中。

# assembly - 这个汇编代码有什么作用，为什么要使用它？

> ID：14616788
> 
> 赞同：1
> 
> 时间：2013-01-31T01:03:27.540
> 
> 标签：assembly, att

**ATT 语法。**

我注意到 C 中的库例程经常使用以下汇编代码片段：

```
call next
next:
popl %eax 
```

*   %eax 存储在这里的值是什么，为什么它会被弹出？
*   这个片段的目的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:06:31.003

它为您提供程序计数器 (PC) 的当前值。也就是说，您将获得当前正在执行的指令的地址。

这是一篇有趣的文章，讨论了使用该片段与使用 C 进行操作：http: [//blogs.msdn.com/b/oldnewthing/archive/2004/12/16/317157.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2004/12/16/317157.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T01:08:55.513

> 在这一系列指令之后 %eax 的值是多少？
> 
> 调用下一个
> 
> 下一个：popl %eax
> 
> 无论下一个地址是什么
> 
> （popl指令所在的内存地址） 注意：这不是PC，但与PC有关
> 
> – PC 是要执行的下一条指令的地址；%eax 现在有最近执行的指令的地址（popl）

[看](https://docs.google.com/viewer?a=v&q=cache%3aO_ahr1IqNFUJ%3awww.cs.umd.edu/class/summer2011/cmsc216/lectures/Week7/14-Assembly.pdf%20&hl=en&gl=us&pid=bl&srcid=ADGEEShqj0x_qSe9SNmxglYRsd1__RNhQZktvLBsvgnD7iVUX_CPbck0AHUl0jMxyWXQXitjH0rfFbtPzkCWVzbVbskROpiBYcSl1YVdzD3hnMdd5L9dtPUf_7uFwPKCHbW_h9lIwnmA&sig=AHIEtbRPColEaVEgFcOZJYMoZWUI0Pz60w)

# ruby - 为调用者的参数值分配默认参数值

> ID：14616789
> 
> 赞同：0
> 
> 时间：2013-01-31T01:03:38.520
> 
> 标签：ruby, methods, arguments, default

如何将调用者参数的值分配为参数的默认值？我希望该方法将调用者方法`Callme#callme`的参数值作为默认参数值。`name``TheCaller#caller`

```
module Callme
  def callme(hero = name)
    hero
  end
end

class TheCaller
  include Callme 
  def caller(name)
    callme
  end
end

say = TheCaller.new
say.caller("superman")
# => expecting "superman" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:07:20.797

我知道没有隐含的方法可以做到这一点。你最好的选择是通过 args

```
class TheCaller
  include Callme
  def caller(*args)
    callme(*args)
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T02:00:41.747

也许我不明白这个问题，但是向 TheCaller 添加名称访问器似乎可以按预期工作：

```
module Callme
  def callme(hero = name)
    hero
  end
end

class TheCaller
  attr_accessor :name
  include Callme 
  def caller(name)
    @name = name
    callme
  end
end

say = TheCaller.new
p say.caller("superman")

# => "superman" 
```

# java - Eclipse 服务器配置非常混乱

> ID：14616797
> 
> 赞同：0
> 
> 时间：2013-01-31T01:04:57.053
> 
> 标签：java, eclipse, spring, ide

在 Eclipse 中，在添加新服务器时，我不小心添加了一个“项目”作为服务器的资源。现在，在我所有的服务器中，这个项目（我已经从硬盘中删除）显示为资源，我无法摆脱它。这是一个屏幕截图，当我尝试运行项目并要求我选择服务器时显示：

![截屏](../Images/51994e36d6092ec96d9cb1fbdf148be9.png)

我试图重新安装 Eclipse，切换工作区，但我无法摆脱它。因此，每当我尝试运行一个示例应用程序时，都会遇到很多错误。如何摆脱这种“资源”并重新开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:15:29.947

尝试单击测试并按照屏幕截图所示进行删除或删除服务器并定义新服务器..![在此处输入图像描述](../Images/e935bbcbae0329ebfd4c9552fc252179.png)

# python - 为什么 Django 不使用 IPython？

> ID：14616805
> 
> 赞同：21
> 
> 时间：2013-01-31T01:05:29.027
> 
> 标签：python, django, virtualenv, ipython

```
(myvenv)me:src orokusaki$ python manage.py shell -i ipython
Python 2.7.2 (default, Jun 16 2012, 12:38:40) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
(InteractiveConsole)
>>> while True:
...     pass  # :(
... 
```

我已经全局安装了 IPython，它在这个`myvenv`virtualenv 被激活时工作得很好。但是，如果我启动 Django shell（带或不带`-i`），它将不会使用 IPython。我以前从来没有遇到过这个问题。

注意：`django-admin.py`vs`manage.py`不会有所作为。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-31T01:31:14.990

尝试将其安装到 virtualenv 中！:-)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-11-18T08:27:33.490

我喜欢 iPython，但不喜欢在我所有的 virtualenvs 中安装它，我找到了一个很好的解决方案来实现这一点。`python manage.py shell`您可以直接使用系统 iPython而不是使用。

为了使其正常工作，您需要设置 DJANGO_SETTINGS_MODULE 使其与您的项目相对应。

`export DJANGO_SETTINGS_MODULE=yourproject.settings`

如果这是您唯一的 Django 项目，最简单的解决方案是将该行添加到您的`.bashrc`.

如果您有多个 Django 项目，并且希望避免每次在项目之间切换时都必须更改变量，则可以将上面为每个项目定制的导出行添加到所有 Django virtualenvs 的 postactivate 脚本中。对我来说，后激活脚本位于`~/.virtualenvs/myvenv/bin/postactivate`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-06T06:59:47.270

就我而言，我真的想在多个虚拟环境（使用默认的 --no-site-packages 创建）中运行 IPython，每个环境都用于不同的 Django 项目。我 *不想*在每个环境中安装 IPython。

正如@Arash 提到的，导出`DJANGO_SETTINGS_MODULE`作品但是当您有多个项目时很难管理它。

我终于分两部分解决了这个问题。

首先，我将目录“/usr/lib/python2.7/dist-packages”和“/usr/lib/pymodules/python2.7”添加到 /usr/bin/ipython 脚本中的 sys.path 中，如此处[所述](https://stackoverflow.com/a/11575429/2088339)。

接下来，我使用一个`manage_to_ipython.py`脚本来创建一个特定于 django-project 的脚本，称为`runipython.py`利用`manage.py`django-admin.py 创建的文件

在每个 Django 项目中一次，`$cd <project_dir>`然后运行`python manage_to_ipython.py`

现在，要运行 IPython，只需键入`./runipython.py`

修改后的 /usr/bin/ipython 和 manage_to_ipython.py 脚本可以在[这里](https://github.com/ChrisFreeman/manage-to-ipython)找到。

# android - 自动完成下拉列表需要布局更改

> ID：14616806
> 
> 赞同：1
> 
> 时间：2013-01-31T01:05:51.237
> 
> 标签：android, android-layout, autocomplete

我的应用程序目前有一个自动完成下拉框，但看起来字体颜色是一种灰色，并且在填充列表时不可见。第二张图片显示了单击时下拉列表的外观。如何更改下拉列表的布局以将列表中的项目显示为不同的颜色，如黑色？

下图！

![第一的](../Images/978a10fef9d65b15cfcc67effce30cc1.png)

![第二](../Images/a3e1ec807bbe9fd15730abe2f787a59f.png)

# 编辑

```
 AlertDialog.Builder adb = new AlertDialog.Builder(SettingsMain.this);
                LayoutInflater inflater =     SettingsMain.this.getLayoutInflater(); 
                final View searchlayout = inflater.inflate(R.layout.search_friend, null);

                friend_name = (AutoCompleteTextView) searchlayout.findViewById(R.id.friend_name);       
                friend_name.addTextChangedListener(new TextWatcher() {
                    public void afterTextChanged(Editable editable) {

                    }

                    public void beforeTextChanged(CharSequence charSequence, int arg1, int arg2, int arg3) {

                    }

                    public void onTextChanged(CharSequence charSequence, int start, int before, int count) {
                        String text = charSequence.toString();

                            new MyAsyncTask("get").execute("http://10.0.2.2/jamtivia/webservice.php?type=get_friends&username="+text);
                            drop_down_adapter = new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_dropdown_item_1line,adapterList);
                            drop_down_adapter.notifyDataSetChanged();
                            friend_name.setAdapter(drop_down_adapter);
                            if (!friend_name.isPopupShowing()) {
                                friend_name.showDropDown();
                            } 

                                for(int i =0;i < adapterList.size();i++)
                                    Log.d("TEXT CHNGE", adapterList.get(i));
                    }
                });

                adb.setView(searchlayout)

               .setPositiveButton("Ok", new DialogInterface.OnClickListener() {  
                    public void onClick(DialogInterface dialog, int whichButton) {  
                        String fname = friend_name.getText().toString();
                        Integer friend_id = null;

                        try{
                            friend_id = adapterListId.get(adapterList.indexOf(fname));
                            Log.d( "ECHO" , "text : " + name +"ID :"+ player_id+ " ID: " + friend_id);
                            String request = "http://10.0.2.2/jamtivia/webservice.php?type=add_friends&friendId="+friend_id+"&playerId="+player_id;
                            new MyAsyncTask("send").execute(request);
                        }catch(Exception e){Log.d( "PROBLEM SENDING" , "text : " + adapterList.indexOf(fname));}
                        return;                  
                       }  
                  })
               .setNegativeButton("Done", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int id) {

                        dialog.cancel(); 
                    }
                }); 

                    adb.show(); 
```

此外，就您在这段代码中所见，这是执行此功能的好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:51:25.823

在创建 ArrayAdapter 而不是使用预定义的布局时，请使用您的自定义布局

像这样

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android" 
 android:id="@+id/cust_view"  
    android:layout_width="match_parent" 
    android:layout_height="wrap_content" 
    android:textColor="@android:color/white"
    android:background="@drawable/list_style" 
    android:textSize="17sp"
    android:padding="5dp"
    android:gravity="left|center_vertical"/> 
```

//你可以给你选择的颜色或图像作为背景，给一个名字作为你的选择让我们说custom_list.xml

在创建适配器时，请像这样使用您的布局

```
 drop_down_adapter = new ArrayAdapter<String>(getApplicationContext(), R.layout.custom_list,adapterList); 
```

我希望这能帮到您

# css - CSS：锚点高度取决于字体大小

> ID：14616815
> 
> 赞同：0
> 
> 时间：2013-01-31T01:06:38.007
> 
> 标签：css

我想在 CSS 文本按钮上有一个图像。如果我将字体大小增加到 26 像素，图像会正确显示。我想将字体大小保持在 20 像素但正确地适合图像。

```
a.button {
  border: 1px solid #979797;
}
a.button.icon {
  padding-left: 11px;
}

a.button.icon span{
  padding-left: 48px;
  background: url(../img/gmail2.png) no-repeat;
}
a.button.icon.chat span {
  background-position: 0px -48;
}

a.button {
  background-image: -moz-linear-gradient(top, #ffffff, #dbdbdb);
  background-image: -webkit-gradient(linear,left top,left bottom,
      color-stop(0, #ffffff),color-stop(1, #dbdbdb));
  filter: progid:DXImageTransform.Microsoft.gradient
      (startColorStr='#ffffff', EndColorStr='#dbdbdb');
  -ms-filter: "progid:DXImageTransform.Microsoft.gradient
      (startColorStr='#ffffff', EndColorStr='#dbdbdb')";
  border: 1px solid #fff;
  -moz-box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.4);
  -webkit-box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.4);
  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.4);
  border-radius: 2px;
  -webkit-border-radius: 2px;
  -moz-border-radius: 2px;
  padding: 5px 5px;
  text-decoration: none;
  text-shadow: #fff 0 1px 0;
  float: left;
  margin-right: 15px;
  margin-bottom: 15px;
  display: block;
  color: #597390;
  line-height: 38px;
  font-size: 20px;
  font-weight: bold;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:12:37.403

为 a.button.icon span 设置特定高度怎么样？

# jquery - 如何在带有悬停事件的 jQuery 动画中正确使用 stop()？

> ID：14616818
> 
> 赞同：6
> 
> 时间：2013-01-31T01:06:47.757
> 
> 标签：jquery, animation, hover

我使用下面的方法制作一些动画。但是，当我非常快速地将鼠标移入和移出并将其停在 内时`div`，`fadeIn()`它不起作用并且 `div`保持透明。

```
$(".grids").hover(function() {
    $('.gridscontrol').stop().fadeIn(200);
}, function() {
    $('.gridscontrol').stop().fadeOut(200);
}); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-31T01:08:22.363

[`.stop()`](http://api.jquery.com/stop/)没有参数只是停止动画，仍然留在队列中。在这种情况下，您还想`.stop(true)`清除动画队列。

```
$(".grids").hover(function() {
  $('.gridscontrol').stop(true).fadeTo(200, 1);
}, function() {
  $('.gridscontrol').stop(true).fadeTo(200, 0);
}); 
```

还要注意使用[`.fadeTo()`](http://api.jquery.com/fadeTo/)因为`.fadeIn()`和`.fadeOut()`快捷方式在这里有一些不良行为。 [您可以在此处查看一个工作示例](http://jsfiddle.net/nick_craver/JbwR3/3/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T01:08:38.320

[.stop( [clearQueue ] [, jumpToEnd ] )](http://api.jquery.com/stop/)

将`clearQueue`和都设置`jumpToEnd`为`true`。

```
$(".grids").hover(function() {
    $('.gridscontrol').stop(true, true).fadeIn(200);
}, function() {
    $('.gridscontrol').stop(true, true).fadeOut(200);
}); 
```

# delphi - IXMLNodeList 中的命名空间

> ID：14616826
> 
> 赞同：3
> 
> 时间：2013-01-31T01:07:44.713
> 
> 标签：delphi, delphi-xe2

我需要为节点添加前缀，但在接口中定义的 IXMLNodeList 中也添加了 NameSpace，并且需要在所有节点上添加前缀

```
 if Length(cds_Partes.FieldByName('Nota').AsString) > 0 then
     Nota.Add( cds_Partes.FieldByName('Nota').AsString);
   OtrosCargos .Add.Codigo := 'V6';
   OtrosCargos.Items[0].Monto :=  cds_Traslado.FieldByName('Importe').AsString; 
```

界面

```
 function Get_Proyecto: IXMLFactura_proyecto;
 function Get_Nota: IXMLNotasList;
 function Get_CargosCreditos: IXMLFactura_cargosCreditosList;
 function Get_OtrosCargos: IXMLFactura_otrosCargosList;
 .........

function Getfactura(Doc: IXMLDocument): IXMLFactura;
 begin
  Result := Doc.GetDocBinding('PPY:factura', TXMLFactura, TargetNamespace) as    IXMLFactura;
end;

function Loadfactura(const FileName: string): IXMLFactura;
begin
 Result := LoadXMLDocument(FileName).GetDocBinding('PPY:factura', TXMLFactura,  TargetNamespace) as IXMLFactura;
end;

function Newfactura: IXMLFactura;
 begin
  Result := NewXMLDocument.GetDocBinding('PPY:factura', TXMLFactura, TargetNamespace) as IXMLFactura;
end; 
```

结果

```
 <PPY:destino codigo="8476" nombre="PLANTA DE MOTORES 4 CILINDROS - SALTILLO"/>

 <nota xmlns="http://www.dfdchryslerdemexico.com.mx/Addenda  /PPY">Addenda de  Prueba</nota>

 <otrosCargos xmlns="http://www.dfdchryslerdemexico.com.mx/Addenda/PPY" codigo="V6" monto="1373.93"/> 
```

前缀存在于目的节点，而不是节点 NOTA 和 OTROSCARGOS，

在什么时候添加命名空间？

坦克非常

# php - 使用javascript时将函数值传递给输入id

> ID：14616827
> 
> 赞同：0
> 
> 时间：2013-01-31T01:07:48.290
> 
> 标签：php, javascript

![在此处输入图像描述](../Images/285dca78fad2f6c5609aebec4009e2c8.png)

大家好。

根据上图，我有一个从 MySql 数据库获取数据的表，我想在表结果中编辑该表上的一个字段。我正在学习使用javascript，所以请善待。如您所见，在我的桌子上，ID # 16 有一个 currentbal 输入字段和一个图像按钮，可单击以调用我的函数并将 ID 的值传递给它。ID 对应于我数据库上的记录 ID，因此我知道要编辑哪个记录。

无论如何，这是我的js函数：

```
function funcEdit(row_id){  
    var currentbal = document.getElementById('currentbal').value;
    alert(currentbal);   
} 
```

它适用于我的第一行，但如果我调用第二行，我会遇到问题，它仍然显示的 currentbal 值是我在第一行的值。我知道我需要更改 currentbal ID 的 ID 以使其唯一。我正在考虑做这样的事情：

```
<input name="currentbal(add the id here)" type="text" id="currentbal(add the id here)" class="input-mini"  /> 
```

使 currentbal ID 唯一，因此我的 currentbal ID 将分别变为 currentbal16 或 currentbal63。我的问题是如何编辑我的 js 函数，这样如果第 1 行被调用

```
var currentbal = document.getElementById('currentbal').value; 
```

变成`var currentbal = document.getElementById('currentbal16').value;`

或者`var currentbal = document.getElementById('currentbal').value;`当第 2 行被调用时。基本上我猜我有语法问题。任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:11:05.527

```
var currentbal = document.getElementById('currentbal' + row_id).value; 
```

您只需将数字 id 添加到`'currentbal'`字符串的末尾即可创建一个新字符串。然后搜索那个id。

# php - Javascript变量到php变量

> ID：14616828
> 
> 赞同：0
> 
> 时间：2013-01-31T01:07:48.457
> 
> 标签：php, variables

我在输入框中有字符串值

```
<input name="to" value="hi.rand(1,10). my.rand(10,100).name is .rand(23,54).rand(1,4)" > 
```

如果我想要，如何使用 $_GET['to']

```
hi5 my54name is 335 
```

现在我得到了字符串 "hi.rand(1,10).my.rand(10,100).name is .rand(23,54).rand(1,4)" 但不像 php 函数那样执行。

那么如何在输入框中格式化字符串，以便 PHP 将其视为变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:19:34.487

您可以使用 php 创建 javascript。像这样的东西：

```
<script type="text/javascript">
<?php 
    $anyVar = "BONJOUR";    
?>
var value = "<?php echo $anyVar; ?>" ;
alert(value);
</script> 
```

在示例中，我将 PHP 中的 var $anyVar 的值传递给 javascript 中的 var 值。因此，在页面加载并解析脚本后，您最终会得到如下内容：

```
<script type="text/javascript">
var value = "BONJOUR" ;
alert(value);
</script> 
```

你也可以这样写js代码：

```
<script type="text/javascript">
<?php 
    $anyVar = "BONJOUR";    
?>
var value = "<?php echo $anyVar; ?>" ;
<?php echo 'alert(value);' ?>
</script> 
```

希望这可以帮助。

# java - Java方法仅使用左下点，宽度和高度来查找两个矩形相交的矩形？

> ID：14616829
> 
> 赞同：12
> 
> 时间：2013-01-31T01:08:05.853
> 
> 标签：java, logic, intersection

我找到了解决方案，但想确保我的逻辑是最有效的。我觉得有更好的方法。我有左下角的（x，y）坐标，2个矩形的高度和宽度，我需要返回第三个矩形，即它们的交点。我不想发布代码，因为我觉得它在作弊。

1.  我找出图表上最左边和最高的那个。
2.  我检查一个是否与另一个完全重叠，然后反转以查看另一个是否与 X 轴上的第一个完全重叠。
3.  我检查 X 轴上的部分交叉点。
4.  我基本上对 Y 轴重复步骤 2 和 3。
5.  我做了一些数学运算并根据这些条件得到矩形的点。

我可能想多了，写了低效的代码。我已经提交了一个工作程序，但想为我自己的知识找到最好的方法。如果有人可以同意或指出我正确的方向，那就太好了！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-31T02:00:20.697

为什么不使用 JDK API 为您执行此操作？

```
Rectangle rect1 = new Rectangle(100, 100, 200, 240);
Rectangle rect2 = new Rectangle(120, 80, 80, 120);
Rectangle intersection = rect1.intersection(rect2); 
```

使用`java.awt.Rectangle`class，构造函数的参数为​​：x,y,width,height，其中x,y为矩形的左上角。您可以轻松地将左下角转换为左上角。

* * *

我推荐上面的，但如果你真的想自己做，你可以按照以下步骤操作：

比如说`(x1, y1), (x2, y2)`分别是 Rect1 的左下角和右下角， `(x3, y3), (x4, y4)`是 Rect2 的。

*   分别 求, `x1`,中较大的一个和 `x3`较小的一个`x2``x4``xL``xR`
    *   if `xL >= xR`，则不返回交集 else
*   分别 求, `y1`,中较大的一个和 `y3`较小的一个`y2``y4``yT``yB`
    *   if `yT >= yB`，则不返回交集 else
    *   返回`(xL, yB, xR-xL, yB-yT)`。

一个更像 Java 的伪代码：

```
// Two rectangles, assume the class name is `Rect`
Rect r1 = new Rect(x1, y2, w1, h1);
Rect r2 = new Rect(x3, y4, w2, h2);

// get the coordinates of other points needed later:
int x2 = x1 + w1;
int x4 = x3 + w2;
int y1 = y2 - h1;
int y3 = y4 - h2;

// find intersection:
int xL = Math.max(x1, x3);
int xR = Math.min(x2, x4);
if (xR <= xL)
    return null;
else {
    int yT = Math.max(y1, y3);
    int yB = Math.min(y2, y4);
    if (yB <= yT)
        return null;
    else
        return new Rect(xL, yB, xR-xL, yB-yT);
} 
```

如您所见，如果您的矩形最初是由两个对角线定义的，那会更容易，您只需要做`// find intersection`部分。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-10-24T16:49:13.603

我在一个小效用函数中确定两个矩形相交的变体。

```
//returns true when intersection is found, false otherwise.
//when returning true, rectangle 'out' holds the intersection of r1 and r2.
private static boolean intersection2(Rectangle r1, Rectangle r2,
        Rectangle out) {
    float xmin = Math.max(r1.x, r2.x);
    float xmax1 = r1.x + r1.width;
    float xmax2 = r2.x + r2.width;
    float xmax = Math.min(xmax1, xmax2);
    if (xmax > xmin) {
        float ymin = Math.max(r1.y, r2.y);
        float ymax1 = r1.y + r1.height;
        float ymax2 = r2.y + r2.height;
        float ymax = Math.min(ymax1, ymax2);
        if (ymax > ymin) {
            out.x = xmin;
            out.y = ymin;
            out.width = xmax - xmin;
            out.height = ymax - ymin;
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-04-02T10:02:04.383

您还可以使用 Rectangle 源代码与您自己的算法进行比较：

```
/**
 * Computes the intersection of this <code>Rectangle</code> with the
 * specified <code>Rectangle</code>. Returns a new <code>Rectangle</code>
 * that represents the intersection of the two rectangles.
 * If the two rectangles do not intersect, the result will be
 * an empty rectangle.
 *
 * @param     r   the specified <code>Rectangle</code>
 * @return    the largest <code>Rectangle</code> contained in both the
 *            specified <code>Rectangle</code> and in
 *            this <code>Rectangle</code>; or if the rectangles
 *            do not intersect, an empty rectangle.
 */
public Rectangle intersection(Rectangle r) {
    int tx1 = this.x;
    int ty1 = this.y;
    int rx1 = r.x;
    int ry1 = r.y;
    long tx2 = tx1; tx2 += this.width;
    long ty2 = ty1; ty2 += this.height;
    long rx2 = rx1; rx2 += r.width;
    long ry2 = ry1; ry2 += r.height;
    if (tx1 < rx1) tx1 = rx1;
    if (ty1 < ry1) ty1 = ry1;
    if (tx2 > rx2) tx2 = rx2;
    if (ty2 > ry2) ty2 = ry2;
    tx2 -= tx1;
    ty2 -= ty1;
    // tx2,ty2 will never overflow (they will never be
    // larger than the smallest of the two source w,h)
    // they might underflow, though...
    if (tx2 < Integer.MIN_VALUE) tx2 = Integer.MIN_VALUE;
    if (ty2 < Integer.MIN_VALUE) ty2 = Integer.MIN_VALUE;
    return new Rectangle(tx1, ty1, (int) tx2, (int) ty2);
} 
```

# batch-file - exe终止后如何重定向输出？

> ID：14616837
> 
> 赞同：3
> 
> 时间：2013-01-31T01:08:36.833
> 
> 标签：batch-file, redirect, command-line, dos

我正在尝试将批处理文件中执行的 exe 文件的输出保存到文本文件中。我尝试了以下方法，但它们不起作用

这不起作用，因为我在应用程序运行时返回命令提示符并且创建的文本文件是空白的。

`C:\>myexec.exe > mytext.txt`

`C:\>_`

`C:\>Status: Passed`

这些也不起作用。我得到一个空的文本文件，没有输出。

`C:\>start /wait myexec.exe > mytext.txt`

`C:\>call start /wait myexec.exe > mytext.txt`

这至少给了我一个输出：

```
C:\>start /wait myexec.exe
Status Passed 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-02T13:07:15.520

使用 /B 运算符。

这将导致输出被重定向

开始 /B /wait myexec.exe > mytext.txt

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-02T11:17:21.023

我遇到了同样的问题并像这样解决了它：

**bat文件内容**

开始 /wait cmd /c "F:\MyInstaller\installer.exe > log.txt"

echo 这将在上一个完成后记录 > log1.txt

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-03T10:50:31.500

重定向运算符将`&`输出或输入从一个指定句柄复制到另一个指定句柄。例如，要将`dir`输出发送到`File.txt`并将错误输出发送到`File.txt`，请键入：

```
dir>c:\file.txt 2>&1 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-31T01:22:19.680

试试`Application.exe >& file.txt`。这会将标准输出和错误流都输出到您的文件中。

# c++ - 拆分不带boost而不是空格的c ++字符串

> ID：14616840
> 
> 赞同：1
> 
> 时间：2013-01-31T01:08:42.967
> 
> 标签：c++, string, split

> **可能重复：**
> [在 C++ 中拆分字符串](https://stackoverflow.com/questions/236129/splitting-a-string-in-c)

我有一个字符串：
`14332x+32x=10`
我想将其拆分，使其看起来像：
`[14332][+32][10]`
到目前为止，我已经尝试过

```
char c;
std::stringstream ss(equation1);
while (ss >> c) {
    std::cout << c << std::endl;
} 
```

但是在测试了打印的内容之后，我认为不可能从该信息中进行操作。我知道我需要在 x 和 = 上拆分字符串，但我不确定这是否可行以及是否可行。我用谷歌搜索了它，没有发现任何看起来有帮助的东西，但我也是 C++ 新手，答案可能就在我面前。
我不想使用boost。任何意见将是有益的！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T02:21:43.527

考虑使用指定`x`和`=`作为空白字符的构面：

```
#include <locale>
#include <iostream>
#include <sstream>

struct punct_ctype : std::ctype<char> {
  punct_ctype() : std::ctype<char>(get_table()) {}
  static mask const* get_table()
  {
    static mask rc[table_size];
    rc[' '] = std::ctype_base::space;
    rc['\n'] = std::ctype_base::space;
    rc['x'] = std::ctype_base::space;
    rc['='] = std::ctype_base::space;
    return &rc[0];
  }
};

int main() {
  std::string equation;
  while(std::getline(std::cin, equation)) {
    std::istringstream ss(equation);
    ss.imbue(std::locale(ss.getloc(), new punct_ctype));
    std::string term;
    while(ss >> term) {
      std::cout << "[" << term << "]";
    }
    std::cout << "\n";
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T01:41:27.113

你可以`sscanf`这样使用：

```
sscanf(s.c_str(), "%[^x]x%[^x]x=%s", a, b, c); 
```

where`%[^x]`表示“除 x 之外的任何字符”。如果您不关心符号（即`+`等）而只关心数字，则可以执行以下操作：

```
sscanf(s.c_str(), "%dx%dx=%d", &x, &y, &z); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T01:15:20.807

手动方法是对字符串中的每个字符执行 for 循环，如果该字符是 == 您拆分的字符，则将其复制到一个新字符串（如果预期 >1 拆分，则使用字符串列表/数组）。

此外，我认为 std 已按字符功能划分。如果不是，那么 stringstream::GetLine() 有一个重载，它接受一个字符来分割，它会忽略空格。

GetLine() 非常好:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T07:34:50.463

[有关提供简单、基本标记化功能的功能](https://stackoverflow.com/a/9273019/12711)，请参阅[此 SO 答案，该`getline_until()`](https://stackoverflow.com/a/9273019/12711)功能应该让您执行以下操作：

```
#include <string>
#include <stringstream>

#include "getline_until.h"

int main()
{
    std::string equation1("14332x+32x=10");
    std::stringstream ss(equation1);

    std::string token;
    while (getline_until(ss, token, "x=")) {
        if (!token.empty()) std::cout << "[" << token << "]";
    } 

    std::cout << std::endl;
} 
```

该`getline_until()`函数允许您指定类似于的分隔符列表`strtok()`（尽管`getline_until()`将返回空标记而不是跳过一系列分隔符，例如`strtok()`）。或者，您可以提供一个谓词，让您使用函数来决定何时分隔标记。

它不会让你做的一件事（再次 - 类似于`strtok()`或标准`getline()`）是仅在上下文中拆分标记 - 必须有一个分隔符被丢弃。例如，使用以下输入：

```
42+24 
```

`getline_until()`(like `strtok()`or `getline()`) 不能将上述内容拆分为标记`42`,`+`和`24`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T02:29:41.777

如果你不介意使用 c++11，你可以使用类似这样的东西：

```
#include <string>
#include <vector>
#include <iostream>
#include <algorithm>
#include <functional>
#include <unordered_set>

typedef std::vector<std::string> strings;
typedef std::unordered_set<char> tokens;

struct tokenize
{
    tokenize(strings& output,const tokens& t) : 
    v_(output),
    t_(t)
    {}        
    ~tokenize()
    {
        if(!s.empty())
            v_.push_back(s);
    }
    void operator()(const char &c)
    {
        if(t_.find(c)!=t_.end())
        {
            if(!s.empty())
                v_.push_back(s);
            s="";
        }
        else
        {
            s = s + c;
        }
    }
    private:
    std::string s;
    strings& v_;
    const tokens& t_;
};

void split(const std::string& input, strings& output, const tokens& t )
{
    tokenize tokenizer(output,t);
    for( auto i : input )
    {
        tokenizer(i);
    }
}

int main()
{
    strings tokenized;
    tokens t;
    t.insert('x');
    t.insert('=');
    std::string input = "14332x+32x=10";
    split(input,tokenized,t);
    for( auto i : tokenized )
    {
        std::cout<<"["<<i<<"]";
    }
    return 0;
} 
```

上面代码的ideone链接：http: [//ideone.com/17g75F](http://ideone.com/17g75F)

# php - 如何检查 PHP 模型的有效 ID？

> ID：14616848
> 
> 赞同：0
> 
> 时间：2013-01-31T01:09:43.673
> 
> 标签：php, database-design, model

我在 MySQL 中有一个数据库表，其主键定义如下：

```
`id` int(10) unsigned NOT NULL AUTO_INCREMENT,
...
PRIMARY KEY (`id`) 
```

我已经为表格创建了模型。我正在使用 Zend Framework v1，没有 ORM，但是这个问题应该适用于所有模型实现。

现在我想创建一个允许我抓取的函数`id`：

```
public static function getById ($id) {

    $id = intval($id);

    if ($id < 1) {
        throw new Exception('bad id');
    }

    // business logic and stuff

    return $stuff;
} 
```

这种方法的原因是双重的。首先，表单输入，包括数字，通常作为字符串从视图中读取。其次，无效字符串（例如`'asdf'`）在强制转换后会变为零，从而引发异常。但是，仍有许多无效字符串可能会绕过检查：

```
echo intval('1asdf'); 
```

输出：

```
1 
```

我尝试过的其他方法包括：

```
if (intval($id) === 0)

if ($id == intval($id)) 
```

验证模型中的 id 的最佳方法是什么？我希望它接受大于 0 的整数和有效正整数的字符串。

我更喜欢时间成本很低的东西。这就是我不使用正则表达式进行验证的原因。这些调用将在应用程序的任何地方使用，我无法承受开销。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:23:29.970

我不明白你为什么为了验证你的输入而经历这么多麻烦。只需使用 php 函数**is_numeric()**和**htmlentities()**来检查您的输入，然后再将其传递给您的 SQL 逻辑。此外，当针对它执行 SQL 时，无效的数字 ID（在您的数据库中不存在）将返回*空输出，这不应该是一个问题。*

参考：

[is_numeric()](http://php.net/manual/en/function.is-numeric.php)

[htmlentites()](http://php.net/manual/en/function.htmlentities.php)

# templates - Joomla 1.5 2 个类别，2 个布局

> ID：14616851
> 
> 赞同：0
> 
> 时间：2013-01-31T01:09:54.383
> 
> 标签：templates, joomla, overriding, joomla1.5, joomla-template

我有两个类别需要自己的布局。现在看起来这两个类别都在使用`template/html/com_content/category/blog.php`，我一生都无法弄清楚如何从菜单项布局选择中将其切换到不同的布局。

Joomla 1.5 我读过的东西：

*   [http://docs.joomla.org/Understanding_Output_Overrides](http://docs.joomla.org/Understanding_Output_Overrides)
*   [http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)

无论我在`...my-template/html/com_content/category`或中的什么位置放置额外的文件`...my-template/html/com_content/category/views/[category]/[tmpl]/`，布局选择对话框中都不会显示新的布局。系统调试似乎也没有打印出任何有用的模板信息。

做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T02:10:12.043

您将布局覆盖在模板的 html 文件夹中，而不是在核心文件夹中。查看 beez5 以了解布局覆盖的示例，以及在 com_contact 中使用的替代布局。

# typescript - 我不是说这个 我是说这个 这个

> ID：14616857
> 
> 赞同：3
> 
> 时间：2013-01-31T01:10:41.137
> 
> 标签：typescript

打字稿中的以下代码片段不能按我的意思工作。它应该是不言自明的：

```
declare interface Date {
    toUrlString(): string;
}

Date.prototype.toUrlString = () => {
    return this.toISOString().substring(0, 10);
};

document.write(
    new Date().toUrlString()
    // Error: Object [object Window] has no method 'toISOString'
); 
```

编译后的代码是：

```
var _this = this;
Date.prototype.toUrlString = function () {
    return _this.toISOString().substring(0, 10);
};
document.write(new Date().toUrlString()); 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T01:14:59.583

“`=>`胖箭头”表示法调用词法范围规则。如果您不想这样做，请使用传统功能：

```
Date.prototype.toUrlString = function() {
    return this.toISOString().substring(0, 10);
}; 
```

# php - 将 HTTPS 上的 HTTP REFERRER 设置为 HTTPS 站点

> ID：14616859
> 
> 赞同：0
> 
> 时间：2013-01-31T01:11:14.090
> 
> 标签：php, javascript, html, .net

有人可以告诉我如何避免 http REFERRER url。我有一个 html 表单，我想使用 Javascript 发布表单。是否可以将 REFERRER url 设置为 NULL。这是代码，请让我知道这是否可能，或者您有任何替代方案感谢您的帮助

```
<!DOCTYPE html>
<html>
<body>

<script type="text/javascript">
document.write('<form id="l" method="post" action="https://www.test.com">');
document.write('<input type="hidden" id="e" name="email">');
document.write('<input type="hidden" name="pass" id="p"></form>');

function g(x){

  return document.getElementById(x);
}

g('e').value='username';
g('p').value="password";
g('l').submit();
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:22:48.980

标`Referer`头是浏览器发送到服务器的内容。您无法更改它，因为浏览器不提供 javascript api 来更改它。

浏览器发送窗口对象的 location.href。如果您将其更改为其他内容，例如 location.href = " [http://www.google.com](http://www.google.com) "，浏览器将从您的页面导航到[http://www.google.com](http://www.google.com)

# android - 使用 Media.startRecord 找不到录制的文件

> ID：14616860
> 
> 赞同：0
> 
> 时间：2013-01-31T01:11:22.260
> 
> 标签：android, cordova, media, record

我正在使用 Media 类从设备麦克风录制，录制成功，但我在我的 android 设备上找不到音频文件（myrecording.amr）。

```
function recordAudio() {
    var src = "myrecording.amr";
    var mediaRec = new Media(src, onSuccess, onError);
    // Record audio
    mediaRec.startRecord();
    // Stop recording after 10 sec
    var recTime = 0;
    var recInterval = setInterval(function() {
        recTime = recTime + 1;
        setAudioPosition(recTime + " sec");
        if (recTime >= 10) {
            clearInterval(recInterval);
            mediaRec.stopRecord();
        }
    }, 1000);
}

function onDeviceReady() {
    app.enabled("btnRecord", true);//IDE widget

}
// onSuccess Callback
//
function onSuccess() {
    app.alert("recordAudio():Audio Success");//IDE widget
    //app.setValue("labelmobile1", mediaRec.); IDE widget
}

// onError Callback 
//
function onError(error) {
    alert('code: '    + error.code    + '\n' + 
          'message: ' + error.message + '\n');
}

// Set audio position
// 
function setAudioPosition(position) {
    app.setValue("label1", position);//IDE widget
} 
```

我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:44:58.423

试试这个

```
var filepath = Environment.getExternalStorageDirectory().getPath();     
File file = new File(filepath,<directoryName>);        
var src=file.getAbsolutePath()+""myrecording.amr" 
```

您的文件将在里面创建`<directoryName>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T01:52:27.957

我猜它是在您的 Android 应用程序主目录中创建的，因为您使用的是相对路径。

你可以在这里查看如何找到你的主目录： [Android Get Application's 'Home' Data Directory](https://stackoverflow.com/questions/4739374/android-get-applications-home-data-directory)

不过，我同意穆昆德的观点。在这种情况下，最好指定绝对路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:44:23.803

如果您未指定路径，则 Media.startRecord() 方法将默认将您的文件放在 Environment.getExternalStorageDirectory() 指定的位置。在 /sdcard 或 /mnt/sdcard 中检查它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-25T08:11:23.160

您可以在 sdcard 中找到它，路径将是：

“/sdcard/myrecording.amr”

# vim - 退出插入模式：jj 的行尾行为

> ID：14616865
> 
> 赞同：1
> 
> 时间：2013-01-31T01:11:48.317
> 
> 标签：vim

在`.vimrc`：

```
inoremap jj <Esc> 
```

给定一个包含以下内容的文件：

```
foo
bar 
```

将光标`f`置于正常模式下，点击`A``Esc`。光标现在位于`o`。

将光标`f`置于正常模式下，点击`A``j``j`。光标现在位于`b`.

1.  为什么？
2.  我怎样才能防止这种行为（即使`j``j`工作与 相同`Esc`）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T02:43:39.817

尽管我已经使用 Vim 好几年了，但这个让我措手不及。在将整个 .vimrc 缩减为包含重映射的单行之后，我仍然看到问题中描述的行为。创建一个全新的 .vimrc 并重新键入该绑定可以解决问题。

最后我意识到我一定会`j``j`留下`Esc``Space`尾随空格。它一定是在我最近修改我的 rc 文件时悄悄出现的。`Space`在行尾按下会进入下一行。

留下我愚蠢的证据，以防有一天它可以为某人节省几个小时。

# c# - 如何在 HTCAPTION 中捕获双击事件

> ID：14616868
> 
> 赞同：0
> 
> 时间：2013-01-31T01:12:08.183
> 
> 标签：c#, borderless

我正在使用无边框表单并使用 HTCAPTION 实现该表单，以便可以拖动它。HTCAPTION 的另一个好处是，当双击时，它可以最小化和最大化。唯一的问题是我想捕获一个事件，以便当窗口最大化时，我可以将按钮的图标从最大化按钮更改为正常模式按钮。关于如何实现这一点的任何好主意？

protected override void WndProc(ref Message m) { base.WndProc(ref m);

```
 switch(m.Msg)
        {
            case Global.WM_NCHITTEST:
                Point mouseCursor = PointToClient(Cursor.Position);

                if (mouseCursor.X < borderSize && mouseCursor.Y < borderSize)
                    m.Result = (IntPtr)Global.HTTOPLEFT;
                else if (mouseCursor.X < borderSize && mouseCursor.Y > Height - borderSize)
                    m.Result = (IntPtr)Global.HTBOTTOMLEFT;
                else if (mouseCursor.X < borderSize)
                    m.Result = (IntPtr)Global.HTLEFT;
                else if (mouseCursor.X > Width - borderSize && mouseCursor.Y < borderSize)
                    m.Result = (IntPtr)Global.HTTOPRIGHT;
                else if (mouseCursor.X > Width - borderSize && mouseCursor.Y > Height - borderSize)
                    m.Result = (IntPtr)Global.HTBOTTOMRIGHT;
                else if (mouseCursor.X > Width - borderSize)
                    m.Result = (IntPtr)Global.HTRIGHT;
                else if (mouseCursor.Y < borderSize)
                    m.Result = (IntPtr)Global.HTTOP;
                else if (mouseCursor.Y > Height - borderSize)
                    m.Result = (IntPtr)Global.HTBOTTOM;
                else
                    m.Result = (IntPtr)Global.HTCAPTION;
                break;
        }
    } 
```

这是我想在捕获的事件中添加的代码

```
 if (WindowState == FormWindowState.Maximized)
        {
            WindowState = FormWindowState.Normal;
            pb_max.Image = GomeeSoft.Properties.Resources.buttonmax;
        }
        else
        {
            Screen screen = Screen.FromRectangle(new Rectangle(Left, Top, Width, Height));
            this.MaximumSize = screen.WorkingArea.Size;
            WindowState = FormWindowState.Maximized;
            pb_max.Image = GomeeSoft.Properties.Resources.buttonreturn;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:09:27.163

双击会生成 WM_SYSCOMMAND 消息。您也可以使用 WndProc 检测到：

```
 private const int WM_NCHITTEST = 0x84;
    private const int WM_SYSCOMMAND = 0x112;
    private const int SC_MINIMIZE = 0xf020;
    private const int SC_MAXIMIZE = 0xf030;
    private const int SC_RESTORE = 0xf120;

    protected override void WndProc(ref Message m) {
        if (m.Msg == WM_SYSCOMMAND) {
            switch (m.WParam.ToInt32() & 0xfff0) {
                case SC_MINIMIZE: Console.WriteLine("Minimize"); break;
                case SC_MAXIMIZE: Console.WriteLine("Maximize"); break;
                case SC_RESTORE:  Console.WriteLine("Restore");  break;
            }
        }
        base.WndProc(ref m);
        if (m.Msg == WM_NCHITTEST && m.Result == (IntPtr)1) m.Result = (IntPtr)2;
    } 
```

# php - PHP 警告：缺少 wpdb::prepare() Wordpress 3.5 的参数 2（更新）

> ID：14616869
> 
> 赞同：0
> 
> 时间：2013-01-31T01:12:16.490
> 
> 标签：php, wordpress

我收到错误消息：

> 警告：wpdb::prepare() 缺少参数 2，在第 322 行的 /home/url.com/wp-content/plugins/WPEC-Personalize-3.8/wpec-personalization.php 中调用并在 /home/url 中定义。 com/wp-includes/wp-db.php 在第 990 行

我在第 322 行找到了代码：

```
$add = $wpdb->get_var($wpdb->prepare("SELECT enabled FROM ". $table_name ." WHERE pers_id  = ". $myresults->pers_id." AND product_id = ".$product_id)); 
```

我正在尝试将其更新为新的 wordpress（3.5 查询）标准：

```
$add = $wpdb->get_var($wpdb->prepare("SELECT enabled FROM %d WHERE pers_id  = %d AND product_id = %s",$table_name, $myresults->pers_id, $product_id)); 
```

我不确定我做错了什么，但是当我更新上面的代码时，我停止收到错误消息，但每次我更新产品时，它都会复制所有自定义字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:16:10.577

`%s`用于表示参数为字符串，while`%d`用于表示数字。在发布到您的问题的代码中，这些使用不正确。修复它们：

```
$add = $wpdb->get_var($wpdb->prepare(
    "SELECT enabled FROM %s WHERE pers_id = %d AND product_id = %d",
//                       ^^ These are wrong in your posted code ^^
    $table_name,
    $myresults->pers_id,
    $product_id
)); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-28T17:15:08.640

将此代码粘贴到您的 wp-config.php 文件中

```
@ini_set('display_errors', 0); 
```

我也通过了这段代码。现在没有显示警告消息。

# python - 将数字打印为整数（无小数）

> ID：14616871
> 
> 赞同：-1
> 
> 时间：2013-01-31T01:12:36.037
> 
> 标签：python, python-2.7, python-2.x

请问有人可以帮我用Python吗？当我运行以下代码时，我得到两个`L_`AND的输出 1.0 `L_1`，但我希望它只是 1。

```
import math

d_ = 0          # My student number last digit
n_ = 10 + 0     # nth roots of unity

import math as m     # for real
import cmath as m    # for complex

# K_     [ number of the root]
K_ = 9
Root = m.exp((2 * K_ * m.pi * 1j) / n_)      # determine the nth root of unity by using exponential form
Root1 = math.cos((2 * K_ * m.pi / n_)) + 1j * math.sin((2 * K_ * m.pi / n_))   # determine the nth root of unity by using polar form
p_ = (Root) **  (n_)      # 10th power of Root
p_1 = (Root1) **  (n_)    # 10th power of Root1
L_ = (Root.real ** 2 + Root.imag ** 2)       # Test whether the point Root lies on unit circle
L_1 = (Root1.real ** 2 + Root1.imag ** 2)      # Test whether the point Root1 lies on unit circle

print  L_    
print  L_1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:23:54.917

```
print int(math.round(L_)) 
```

如果您想要更少的舍入，您可以使用可选的第二个`round`参数来指定多个位置。但是不要完全忽略它，否则 0.9999999 会变成 0。

如果您希望该值首先是整数，请在赋值时执行：

```
L_ = int(math.round((Root.real ** 2 + Root.imag ** 2), 6) 
```

# c# - 使用委托属性持久化对象

> ID：14616873
> 
> 赞同：0
> 
> 时间：2013-01-31T01:12:44.210
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework, entity-framework-6

我正在尝试使用委托属性持久化一个对象

```
public delegate void Callback(ScheduledTask ScheduledEvent);
public class ScheduledTask
    {
        [Key]
        public int Id { get; set; }

        /// <summary>
        /// Time the event will be triggered
        /// </summary>
        public DateTime ScheduledTime { get; set;} 

        /// <summary>
        /// Delegate to call back
        /// </summary>
        public Callback callback { get; set; }

        /// <summary>
        /// Any event metadata
        /// </summary>
        public Dictionary<String, object> Metadata { get; set; }
    } 
```

但是我收到此错误：

> (12,10)：错误 3004：从第 6、12、21 行开始映射片段时出现问题：没有为 Set ScheduledTasks 中的属性 ScheduledTask.callback 指定映射。在以下情况下，具有密钥 (PK) 的实体将不会往返：实体类型为 [Frontline.Core.Scheduling.ScheduledTask]

加载上下文时。

如何使用实体框架将对象与委托持久化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:52:06.030

我看不出你的要求是如何工作的。委托是链接 2 个对象的运行时信息。接近这一点的唯一方法是完全序列化对象图并将其存储在某处。

有关更多信息，请参见此处；[我们可以将代表保存在文件中吗（C#）](https://stackoverflow.com/questions/1132702/could-we-save-delegates-in-a-file-c)

我认为你最好重新考虑你的设计 - 你可以将一个 ID 存储到订阅者的某个其他对象`Callback`，并在从数据库加载对象后重新连接这些对象。但是，如果订阅者实际上可以是您系统中的任何东西，那将使数据库设计复杂化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:48:18.873

我最终将它序列化为二进制流并保存。有点恶心，但它的工作。

```
 public byte[] callbackData { get; set; }

    /// <summary>
    /// Delegate to call back
    /// </summary>
    [NotMapped]
    public Callback callback
    {
        get
        {
            if (_callback == null && callbackData != null && callbackData.Count() > 0)
            {
                BinaryFormatter formatter = new BinaryFormatter();
                using (var stream = new MemoryStream(callbackData))
                {
                    _callback = formatter.Deserialize(stream) as Callback;
                }
            }
            return _callback;
        }
        set
        {
            _callback = value;
            if (value == null)
            {
                callbackData = null;
            }
            else
            {
                BinaryFormatter formatter = new BinaryFormatter();
                using (var stream = new MemoryStream())
                {
                    formatter.Serialize(stream, value);
                    callbackData = stream.ToArray();
                }
            }
        }
    } 
```

# tsql - TSQL - 案例语句+连接2列+从右边选择10个字符

> ID：14616874
> 
> 赞同：0
> 
> 时间：2013-01-31T01:12:54.493
> 
> 标签：tsql, sql-server-2005, concatenation, case

我试图在 case 语句中连接两个字段，其中我只想要第二个字段的右侧 10 个字符。第一个字段是 25 个字符的 varchar 字段 (twfcompID)；第二个字段是文本字段 (t.TransNotes)。我想最终得到看起来像 497-2059--281369.pdf 的东西。这是我的语法不起作用。

```
(Case
    WHEN l.TWFCompID = 'FCLMIL' THEN    
        CAST(m.MatterID AS VARCHAR(100)) + '--' + 
        RIGHT(CAST(t.TransNotes,10) AS VARCHAR(100))
    WHEN l.TWFCompID like 'f-%' THEN
        CAST(m.MatterID AS VARCHAR(100)) + '--' + (right(t.TransNotes,10) AS VARCHAR(100)) 
    WHEN l.TWFCompID like 'FS-%' THEN
        CAST(m.MatterID AS VARCHAR(100)) + '--' + CAST(right(t.TransNotes,10) AS VARCHAR(100)) 
ELSE '' END) AS 'LineItemID', 
```

* * *

当我运行它时，我收到错误消息：Msg 1035，Level 15，State 10，Line 5 'CAST' 附近的语法不正确，预期为 'AS'。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:22:51.227

问题似乎出在第一个`WHEN`子句上。`RIGHT`和的参数`CAST`混淆了。尝试这个。

```
WHEN l.TWFCompID = 'FCLMIL' THEN    
    CAST(m.MatterID AS VARCHAR(100)) + '--' + 
    CAST(RIGHT(t.TransNotes, 10) AS VARCHAR(100)) 
```

另一种方法是使用以下内容，它切换`CAST`and`RIGHT`语句

```
WHEN l.TWFCompID = 'FCLMIL' THEN    
    CAST(m.MatterID AS VARCHAR(100)) + '--' + 
    RIGHT(CAST(t.TransNotes AS VARCHAR(100)), 10) 
```

您可能还缺少`CAST`第二`WHEN`个子句中的关键字。

# php - 构建 html 表时如何存储 PHP 值？

> ID：14616876
> 
> 赞同：0
> 
> 时间：2013-01-31T01:13:09.440
> 
> 标签：php, jquery

我认为我问的问题不是很好，所以让我详细说明我在做什么。

我正在为我侄女正在从事的项目建立一个简单的网站。她想为他们的班级毕业实施一个订票系统（这只是为了项目，它实际上不会用于生产环境中的任何东西）。她想要一张可用座位的“地图”，以及一种区分已售出座位和开放座位的方法。

我实现这一点的愿景是创建三个表，每个部分一个。我正在使用 PHP 来构建这些部分，目前它们包含一个图像，该图像指示座位是否被占用，该图像被包裹在一个锚标记中，该标记指向与 url 相同的页面：

```
<a href='index.php?section=$section&row=$i&seat=$j' class='order'><img src='open.png'></a> 
```

所以我的宏伟计划是，当他们单击特定座位的图像时，会弹出一个模态对话框，执行两件事之一。

如果座位已经被占用，它只会显示买家的信息。如果没有坐下，它将包含一个表单，允许用户输入他们的信息并提交，然后将写入存储该数据的 MySQL 数据库表。

在我尝试将 index.php?section= 等添加到锚点之前，我正在使用 jQuery UI 对话框的模态表单（[http://jqueryui.com/dialog/#modal-form](http://jqueryui.com/dialog/#modal-form)）来完成模态对话框，现在我已经添加了该部分，它会闪现对话框，但随后页面刷新并且对话框消失。

我的问题是，有没有办法将部分/行/座位信息存储在锚点中，以便在单击页面时不刷新页面？我可以在 index.php 上的 HTML 标记之前添加一些代码来处理单击锚点的情况吗？我上一次使用 PHP 是几年前的事了，我很生疏，不确定如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:22:14.787

您需要取消点击事件。也就是说，告诉浏览器做一些Javascript工作（比如打开一个对话框），然后取消点击以免加载新页面。最简单的是，您只需在 onclick 事件中返回 false。

```
<a href="index.php?....." class="order" onclick="return false;"><img src="..."></a> 
```

或者更好的是，您可以从 onclick 事件中调用对话框

```
<a href="index.php?....." class="order" onclick="open_dialog(<?= $i; ?>, <?= $j; ?>); return false;"><img src="..."></a> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-31T01:16:50.343

更好的实现方式是让每个座位成为“按钮”（您可以相应地更改 UI）并使用 AJAX 来“提交”按钮点击。

# javascript - 为什么for循环初始化中的'in window'会导致语法错误？

> ID：14616877
> 
> 赞同：7
> 
> 时间：2013-01-31T01:13:14.313
> 
> 标签：javascript

这行得通。

```
var a = 'ontouchstart' in window;
for (;;) {
  console.log(a);
  break;
} 
```

这会导致语法错误。为什么？

```
for (var a = 'ontouchstart' in window;;) {
  console.log(a);
  break;
} 
```

这行得通。

```
for (var a = ('ontouchstart' in window);;) {
  console.log(a);
  break;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T01:31:37.403

> 这会导致语法错误。为什么？

避免与 for-in-loop 混淆。[for 循环](http://es5.github.com/#x12.6.3)的语法规范是明确的：

> `IterationStatement : for ( ExpressionNoIn`[`opt`]`; Expression`[`opt`]`; Expression`[`opt`]`) Statement`
> 
> `IterationStatement : for ( var VariableDeclarationListNoIn ; Expression`[`opt`]`; Expression`[`opt`]`) Statement`

这个`NoIn`后缀贯穿整个句法语法，并在[11.8 关系运算符（句法）部分](http://es5.github.com/#x11.8)结束：

```
RelationalExpression :

ShiftExpression
RelationalExpression < ShiftExpression
RelationalExpression > ShiftExpression
RelationalExpression <= ShiftExpression
RelationalExpression >= ShiftExpression
RelationalExpression instanceof ShiftExpression
RelationalExpression in ShiftExpression

RelationalExpressionNoIn :

ShiftExpression
RelationalExpressionNoIn < ShiftExpression
RelationalExpressionNoIn > ShiftExpression
RelationalExpressionNoIn <= ShiftExpression
RelationalExpressionNoIn >= ShiftExpression
RelationalExpressionNoIn instanceof ShiftExpression 
```

> **注意：`NoIn`需要变体以避免将关系表达式中的 in 运算符与 for 语句中的 in 运算符混淆。**

但是，我自己不明白为什么`NoIn`在正常的 for 循环中使用变体 - 它们在 for-in-production 中是合理的。我猜这是为了避免程序员的混淆并简化解析器。

# javascript - Javascript/Html 删除 Listview 中文本框的禁用属性

> ID：14616879
> 
> 赞同：0
> 
> 时间：2013-01-31T01:13:30.693
> 
> 标签：javascript, html, listview

我有一个数据库中数据的类型和地址的 asp:listview。在按钮单击时，我将按钮的 innerhtml 更改为不同的文本，并且我需要删除相应输入文本框上的类型和地址的 disabled 属性。发生的事情是，当我单击按钮时，它会删除列表视图中第一行的禁用属性，但不会删除我单击的那个对应的属性。例如这里是一个列表视图的例子，它在做什么

输入“/t/t/t/t/t/t/t”地址

TxtBox TxtBoxTxtBoxTxtBox EditBtn DeleteBtn

TxtBox TxtBoxTxtBoxTxtBox EditBtn DeleteBtn /**例如，如果我单击此编辑按钮，它将从上面的记录中删除禁用而不是这一行

TxtBox TxtBoxTxtBoxTxtBox EditBtn DeleteBtn

```
<script type="text/javascript">
        function changeText(button) { 
            button.innerHTML="Save";              
            document.getElementById('Type').removeAttribute('disabled');
            document.getElementById('Address').removeAttribute('disabled');    
</script>

<body>  
  <div>Addresses</div>
   <br />   
        <div>
    <asp:ListView runat="server" ID="ListView1" >
    <EmptyDataTemplate>No records found.</EmptyDataTemplate>
        <LayoutTemplate>
            <table id="sort" style="border:solid 1px black;width:40%;">
                <thead>
                    <tr>
                        <th>
                            <a href="#">Type</a>
                        </th>
                        <th>
                            <a href="#">Address</a>
                        </th>

                    </tr>
                </thead>
                <tbody>
                    <tr id="itemPlaceholder" runat="server" />
                </tbody>
                <tfoot>
                </tfoot>
            </table>
        </LayoutTemplate>
        <ItemTemplate>
            <tr>
                <td>
                   <input size="8" type="text" ID="Type" disabled="disabled" value="<%# Eval("Type")%>" />
                </td>
                <td>
                   <input size="9" type="text" ID="Address" disabled="disabled" value="<%# Eval("street")%> <%# Eval("City")%> <%# Eval("State")%>" />                     
                </td>
                <td>
                   <button id="editBtn" type="button" onclick="changeText(this)">Edit</button> 
                </td>
            </tr>
        </ItemTemplate>
    </asp:ListView>
  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:32:02.223

获取当前 tr，而不是文档：

```
 function changeText(button) { 
        var row=button.parentNode.parentNode;
        button.innerHTML="Save";              
        row.querySelector('#Type').removeAttribute('disabled');
        row.querySelector('#Address').removeAttribute('disabled');
  } 
```

# html - 单击文本顶部的按钮不会转到 URL

> ID：14616880
> 
> 赞同：0
> 
> 时间：2013-01-31T01:13:30.950
> 
> 标签：html, css, url, button

因此，由于某种原因，我的按钮不会转到*当用户直接单击按钮顶部的文本时*定义的 URL 。（即：对于我的按钮，“测试文本”）

当您单击该按钮时，它总是会按下，但仅当您在文本区域之外单击时才会转到链接的 URL。

我曾尝试使用 a`<div>`而不是`<a>`，但也没有运气。

您可以在以下位置看到该按钮`http://198.154.213.30/~foster2/index.php/news`

下面是我的按钮的代码：

```
<a class="button3D" href="http://www.google.com" target="_blank">Test Text</a>

<style>
.button3D {
    position: relative;
    display: block;
    width: 200px;
    height: 50px;
    top: 50%;
    left: 50%;
    margin-top: -25px;
    margin-left: -100px;
    background: #650404;
    font-family: sans-serif;
    text-align: center;
    line-height: 50px;
    font-size: 24px;
    color: #fff;
    text-shadow: 0 -1px rgba(0, 0, 0, 0.5);
    border: 1px solid #4e0202;
    -webkit-box-shadow: 0 5px 15px -5px #222;
    -moz-box-shadow: 0 5px 15px -5px #222;
    box-shadow: 0 5px 15px -5px #222;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
    cursor: pointer;
}
.button3D:before {
    content: "";
    position: absolute;
    top: -9px;
    left: 0px;
    width: 178px;
    height: 0px;
    border: 11px solid transparent;
    border-bottom: 8px solid #650404;
    border-top: 0;
}
.button3D:after {
    content: "";
    color: #c56338;
    line-height: 180px;
    font-size: 16px;
    position: absolute;
    top: -8px;
    left: 1px;
    width: 178px;
    height: 0px;
    border: 10px solid transparent;
    border-bottom: 7px solid #891414;
    border-top: 0;
}

.button3D:active {
    width: 158px;
    height: 41px;
    top: 50%;
    left: 50%;
    margin-top: -33px;
    margin-left: -79px;
    line-height: 36px;
    font-size: 22px;
    color: #eee;
    text-shadow: 0 -1px rgba(0, 0, 0, 0.5);
    border: 1px solid #3c0101;
    background: #4e0202;
    border-top: 0;
    -webkit-box-shadow: 0 0 0 0;
    -moz-box-shadow: 0 0 0 0;
    box-shadow: 0 0 0 0;
}
.button3D:active:before {
    top: 0;
    height: 42px;
    width: 158px;
    left: -12px;
    padding: 0 1px;
    border: 11px solid #b3b294;
    border-bottom: 8px solid #deddad;
    border-top: 0;
}
.button3D:active:after {
    content: "";
    top: 0;
    height: 50px;
    width: 182px;
    left: -13px;
    border: 0;
    -webkit-box-shadow: 0 15px 25px -15px rgba(0,0,0,0.5) inset;
    -moz-box-shadow: 0 15px 25px -15px rgba(0,0,0,0.5) inset;
    box-shadow: 0 15px 25px -15px rgba(0,0,0,0.5) inset;
}
</style> 
```

感谢您为我提供的有关如何解决此问题的任何输入/见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T02:00:57.173

我认为这是因为链接正在移动。当您单击并按住一个链接时，您可以拖出该链接，它不会导航。似乎移动链接正在触发此功能。我认为您唯一能做的就是使用 JavaScript onmousedown 进行导航。

# android - 最小宽度布局。Nexus 7 中的错误？

> ID：14616881
> 
> 赞同：5
> 
> 时间：2013-01-31T01:13:33.073
> 
> 标签：android, android-layout

使用 layout-swdp 限定符时，我得到的结果如附件所示。sw 限定符应该意味着最小维度必须匹配或大于限定符。这似乎不适用于 Nexus 7（运行 4.2.1）。我是否对最小宽度限定符的作用感到困惑，还是 N7 报告错误？

为了重现我的测试用例，我有许多 layout-swdp 文件夹。每个都有 2 个文本字段。第一个只是说明它所在的文件夹。接下来是下面的代码：

```
private CharSequence collectScreenStats() {
    StringBuilder str = new StringBuilder();
    DisplayMetrics metrics = getResources().getDisplayMetrics();
    int width = metrics.widthPixels;
    int height = metrics.heightPixels;
    int dpWidth = (int)(width / metrics.density);
    int dpHeight = (int)(height / metrics.density);
    str.append(Build.MANUFACTURER);
    str.append(" ");
    str.append(Build.MODEL);
    str.append("\n");
    str.append("Pixels: ");
    str.append(width);
    str.append(" x " );
    str.append(height);
    str.append("\nDp (px / density): ");
    str.append(dpWidth);
    str.append("dp x " );
    str.append(dpHeight);
    str.append("dp" );
    str.append("\nsmallest w: " + Math.min(dpWidth, dpHeight));
    str.append("\ndensity: ");
    str.append(metrics.density);
    str.append("\ndensityDpi: ");
    str.append(metrics.densityDpi);

    return str;
} 
```

![在此处输入图像描述](../Images/7f5c279949dd31dfc5d3a681dab5f781.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T01:45:24.053

好的，这似乎是 ICS 中的一个错误，它不能准确报告整个屏幕的像素数，因为它考虑到了 chrome。

[Android DisplayMetrics 在 ICS 上返回错误的屏幕尺寸（以像素为单位）](https://stackoverflow.com/questions/10991194/android-displaymetrics-returns-incorrect-screen-size-in-pixels-on-ics)

所以，我上面的显示数字是关闭的，因为 nexus 7 是 1280 x 800 而不是 1280 x 736。使用正确的数字，一切正常。

# function - 如何使 epydoc 在函数原型中显示参数？

> ID：14616882
> 
> 赞同：0
> 
> 时间：2013-01-31T01:13:52.263
> 
> 标签：function, parameters, cython, epydoc

使用 epydoc，版本 3.0.1。

我尝试了这个简单的事情：

```
def SetNetwork(self, PyLabNetwork net):
    """
    Set the net !!!
    @param self: How long they should think.
    @type self: C{int} or L{PyLabNetwork}
    @param net: How long they should think.
    @type net: C{int} or L{PyLabNetwork}
    """
    self.network = net 
```

跑这个：

```
epydoc -v -o ./html --name epydoc --css white --docformat epytext cyelp 
```

但是在 epydoc 生成的 html 中，方法原型仍然以 3 个连续的点出现，而不是描述的参数：

```
SetNetwork(...) << ??? NOTHING INSIDE ???

Set the net !!!

Parameters:

        self (int or PyLabNetwork) - How long they should think.
        net (int or PyLabNetwork) - How long they should think. 
```

任何的想法 ？非常感谢

编辑：对不起，我刚刚测试了一个可以完美运行的简单脚本。前一种情况不起作用，因为它是使用 Cython 编译的共享对象 (.so)。它有所作为。源也无法显示。我认为 epydoc 只在文档字符串上工作，关于函数原型的解析，但它似乎比这更复杂一些......

EDIT2：此外，如果我编译将“embedsignature” cython 编译指令传递给“True”，我会得到一些东西 - 这仍然是错误的，但我更好地理解了这种现象：

```
SetNetwork(...)

PyLabNode.SetNetwork(self, PyLabNetwork net)

Set the net !!!

Parameters:

        self (int or PyLabNetwork) - How long they should think.
        net (int or PyLabNetwork) - How long they should think. 
```

又名：epydoc 不理解 cythonized 签名的嵌入方式......

如果你有更具体的解释，我仍然是你的男人。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T03:05:41.757

知道了。

我删除了 cython 编译指令，该指令正在发送 epydoc 无法理解的签名，例如：

```
PyLabNode.SetNetwork(self, PyLabNetwork net) 
```

这有两个缺点：类前缀和类型参数的虚线表示法。

并将其替换为格式良好的python作为文档字符串的第一行，给出：

```
def SetNetwork(self, PyLabNetwork net):
    """
    SetNetwork(self, net)
    Set the net !!!
    @param self: Handler to this.
    @type self: L{PyLabNode}
    @param net: The network this node belongs to.
    @type net: L{PyLabNetwork}
    """
    self.network = net 
```

那成功了。希望这可以帮助一些人。

# python - 多线程/异步 I/O

> ID：14616883
> 
> 赞同：0
> 
> 时间：2013-01-31T01:13:58.843
> 
> 标签：python, multithreading, io, urllib2

我有一个概念问题。

我目前有一个在永无止境的循环中执行的程序。

```
Def (mycode):

    Perform login to server and retrieve cookies etc
    While 1:
      Perform an URL request (with custom headers, cookies etc)
      Process the reply
      Perform URL requests dependent upon the values in replies
      Process reply 
```

我很高兴能够继续这样下去，因为 URL 必须一个接一个地调用。

现在服务器将单个帐户限制为有限数量的功能，能够使用两个（或更多）不同的帐户执行此功能将很有用。

我的问题是：这可能吗？我已经对队列和多线程进行了相当多的阅读，如果各位好心人可以提出一个具有良好（易于理解）示例的方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:22:37.243

[Gevent](http://www.gevent.org/intro.html)是一个具有示例的高性能绿色线程实现。

我不确定通过对同一服务器的不同帐户执行此操作是否意味着让不同的工作函数处理 url 处理 - 实际上`Def (mycode)` `n`每个帐户都有时间。也许您可以扩展细节。

```
>>> import gevent
>>> from gevent import socket
>>> urls = ['www.google.com', 'www.example.com', 'www.python.org']
>>> jobs = [gevent.spawn(socket.gethostbyname, url) for url in urls]
>>> gevent.joinall(jobs, timeout=2)
>>> [job.value for job in jobs]
['74.125.79.106', '208.77.188.166', '82.94.164.162'] 
```

此外，您可以通过使用[beanstalkd](https://github.com/earl/beanstalkc/)之类的东西来解决问题，这将允许您为每个帐户运行主进程“n”次，并将结果放在 beanstalk 队列中以供另一个进程处理。无需处理线程，这在非平凡的应用程序中总是一件好事。

# c# - 带有 XML 的 base64 字符串中的无效字符

> ID：14616884
> 
> 赞同：0
> 
> 时间：2013-01-31T01:14:02.573
> 
> 标签：c#, xml, base64

我收到一个错误，很遗憾地说我对处理 64base 字符串知之甚少。目前我已经将此错误追溯到这行代码：

```
byte[] jobData = Convert.FromBase64String(base64JobData); 
```

这是我的 XML，它被传递到 base64JobData 但我似乎找不到任何应该引发此错误的东西。

```
<?xml version="1.0" encoding="utf-16"?>
<JobItem xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="SiteServerItemShareCollection" JobName="0005_Hi" JobTargetResultId="2a59cf11-c58e-4cdc-80e8-7b4c70b940dc" JobId="5a79a30f-3250-4401-b181-f6e5f16fe5ef" JobItemType="NetworkShare" JobProcessWorkflowId="9834e3a5-b508-405f-ad5b-d8c9d1837982" Priority="1" CallbackConversationId="fb501b7b-cd43-4883-bbc7-5a356e1dd030" IsAudit="false" IsRemediation="false" IsArchive="true" IsPreview="false" ReportOnNonResponsiveData="false" CustodianId="00000000-0000-0000-0000-000000000000" IsCompleted="false" HasCredentials="true" MinSecondsBetweenAttempts="600" UseRedirectedAcquisition="false" IsSerialProcessing="false" CanPhoneHome="false" AgentGuid="00000000-0000-0000-0000-000000000000" DynamicIPLocality="false" TaskId="00000000-0000-0000-0000-000000000000">
<CollectionItemQueue ItemId="2a59cf11-c58e-4cdc-80e8-7b4c70b940dc" CollectionId="5a79a30f-3250-4401-b181-f6e5f16fe5ef" CollectionType="NetworkShare" Name="0005_Hi" ReferenceItemId="00000000-0000-0000-0000-000000000000" CollectionStatus="0">
  <AssetCollectionStartDate xsi:nil="true" />
  <PrescanStartDate xsi:nil="true" />
  <LastCollectedFileSize xsi:nil="true" />
  <NumberFilesCollected xsi:nil="true" />
  <FilesCollectedSize xsi:nil="true" />
  <CurrentFileSize xsi:nil="true" />
  <TotalPossibleFilesToCollect xsi:nil="true" />
  <TotalPossibleFileBytesToCollect xsi:nil="true" />
</CollectionItemQueue>
<RunCollectionPreScan>false</RunCollectionPreScan>
<FileTransferRetryDelayInSeconds>900</FileTransferRetryDelayInSeconds>
<FileTransferRetryAttempts>3</FileTransferRetryAttempts>
<AssetCollectionStartDate xsi:nil="true" />
<PrescanStartDate xsi:nil="true" />
<LastCollectedFileSize xsi:nil="true" />
<NumberFilesCollected xsi:nil="true" />
<FilesCollectedSize xsi:nil="true" />
<CurrentFileSize xsi:nil="true" />
<TotalPossibleFilesToCollect xsi:nil="true" />
<TotalPossibleFileBytesToCollect xsi:nil="true" />
<JobTargetName>\\10.10.200.222\Evidence</JobTargetName>
<JobTargetId>fd0d6e98-7227-4589-b578-a8f0a88955c2</JobTargetId>
<JobResultId>00000000-0000-0000-0000-000000000000</JobResultId>
<FiltersXML>&lt;Filter SystemFiles="false" UnusedDiskArea="false" VolumeSlack="false" CollectArchiveContentOnly="true" CollectEncryptedFiles="false" UsePhysicalDrives="false" UseSearchWithAgent="false" UseSearchWithServer="false" AutoDrillDown="false" CollectNoExtensionFiles="false" IncludeDeletedFiles="false" SmartFileIdentification="false" xmlns="http://FilterSchema" /&gt;</FiltersXML>
<ResponsiveFilePath>\\10.10.200.222\E$\Cases\Jobs\Test\2013-01-30 15.46.46\Item_10.10.200.222Evidence\1</ResponsiveFilePath>
<CollectionAttemptBeginTime xsi:nil="true" />
<CollectionAttemptEndTime xsi:nil="true" />
<CollectAsCredentials />
<Expiration>2013-03-01T15:46:45.797</Expiration>
<CollectionEncryption>
  <CollectionId>5a79a30f-3250-4401-b181-f6e5f16fe5ef</CollectionId>
  <EncryptionType>None</EncryptionType>
<CertificateId>00000000-0000-0000-0000-000000000000</CertificateId>
</CollectionEncryption>
</JobItem> 
```

有没有一种简单的方法可以找出这个 xml 字符串中的违规字符是什么？或可以帮助我找到失败原因的工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:23:04.183

我认为您的问题可能令人困惑，或者对函数的行为有误解。这个函数是从base64转换的，所以如果你给它上面的XML，那是行不通的。该函数需要一个 base64 编码的字符串。

这是来自 MS 的链接 - [frombase64string](http://msdn.microsoft.com/en-us/library/system.convert.frombase64string.aspx)

其中指出，“将指定的字符串（将二进制数据编码为 base-64 数字）转换为等效的 8 位无符号整数数组。”

参数字符串“s” - s 由 base-64 数字、空白字符和尾随填充字符组成。base-64位从0升序为大写字母“A”到“Z”，小写字母“a”到“z”，数字“0”到“9”，符号“+”和“/” ”。

# android - 传入文本激活按钮

> ID：14616886
> 
> 赞同：0
> 
> 时间：2013-01-31T01:14:11.073
> 
> 标签：android, button, view, sms

我有一个我正在尝试设置的应用程序，以便当我收到包含某个短语的文本（当前设置为“这是一个测试”只​​是为了测试它）时，将触发一个按钮 onClick 事件。如果我的消息接收者在我的主要活动中，我可以简单地调用 .performClick()。但是，除非消息接收者在单独的类中，否则我无法让它工作。

消息接收器.java

```
package com.defsoftsol.snow.alert;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.util.Log;
import android.widget.Toast;

public class MessageReceiver extends BroadcastReceiver 
{
    public void onReceive(Context context, Intent intent) 
    {
        Bundle pudsBundle = intent.getExtras();
        Object[] pdus = (Object[]) pudsBundle.get("pdus");
        SmsMessage messages =SmsMessage.createFromPdu((byte[]) pdus[0]);    
        Log.i("MessageBody",  messages.getMessageBody());
        if(messages.getMessageBody().contains("This is a test")) 
        {
            Toast.makeText(context, "It worked", Toast.LENGTH_LONG).show();
        }
    }
} 
```

如何在 MainActivity.java 中的按钮上执行 performClick()？我可以以某种方式从该类访问视图吗？

清单条目

```
<receiver android:name=".MainActivity.MessageReceiver" android:exported="true">
    <intent-filter>
        <action android:name="android.provider.Telephony.SMS_RECEIVED"></action>
    </intent-filter>
</receiver> 
```

在 mainactivity.java 中使用接收器接收文本时，Logcat 崩溃

```
01-30 20:31:57.002: E/AndroidRuntime(32555): FATAL EXCEPTION: main
01-30 20:31:57.002: E/AndroidRuntime(32555): java.lang.RuntimeException: Unable to instantiate receiver com.defsoftsol.snow.alert.MainActivity.MessageReceiver: java.lang.ClassNotFoundException: com.defsoftsol.snow.alert.MainActivity.MessageReceiver
01-30 20:31:57.002: E/AndroidRuntime(32555):    at android.app.ActivityThread.handleReceiver(ActivityThread.java:2100)
01-30 20:31:57.002: E/AndroidRuntime(32555):    at android.app.ActivityThread.access$1500(ActivityThread.java:123)
01-30 20:31:57.002: E/AndroidRuntime(32555):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1197)
01-30 20:31:57.002: E/AndroidRuntime(32555):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-30 20:31:57.002: E/AndroidRuntime(32555):    at android.os.Looper.loop(Looper.java:137)
01-30 20:31:57.002: E/AndroidRuntime(32555):    at android.app.ActivityThread.main(ActivityThread.java:4428)
01-30 20:31:57.002: E/AndroidRuntime(32555):    at java.lang.reflect.Method.invokeNative(Native Method)
01-30 20:31:57.002: E/AndroidRuntime(32555):    at java.lang.reflect.Method.invoke(Method.java:511)
01-30 20:31:57.002: E/AndroidRuntime(32555):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
01-30 20:31:57.002: E/AndroidRuntime(32555):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
01-30 20:31:57.002: E/AndroidRuntime(32555):    at dalvik.system.NativeStart.main(Native Method)
01-30 20:31:57.002: E/AndroidRuntime(32555): Caused by: java.lang.ClassNotFoundException: com.defsoftsol.snow.alert.MainActivity.MessageReceiver
01-30 20:31:57.002: E/AndroidRuntime(32555):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
01-30 20:31:57.002: E/AndroidRuntime(32555):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
01-30 20:31:57.002: E/AndroidRuntime(32555):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
01-30 20:31:57.002: E/AndroidRuntime(32555):    at android.app.ActivityThread.handleReceiver(ActivityThread.java:2095)
01-30 20:31:57.002: E/AndroidRuntime(32555):    ... 10 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:24:49.140

您可以将 MessageReceiver 作为 mainactivity 的内部类，然后，您可以在 mainactivity 中调用 button.performClick

```
public class MainAcitivity extends Activity
{
   private Button button;
   ....

   ....

   public static class MessageReceiver extends BroadcastReceiver 
   {
       public void onReceive(Context context, Intent intent) 
      {
           button.performClick();
      }
   }

 }

<receiver android:name=".MainActivity$MessageReceiver" android:exported="true">
<intent-filter>
    <action android:name="android.provider.Telephony.SMS_RECEIVED"></action>
</intent-filter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T01:39:07.730

在你的`MessageReceiver`课堂上添加

```
private static final String SMS_INTENT = "SMS_RECEIVED"; //you can name this whatever 
```

并在您的`onReceive`方法中添加

```
 if(messages.getMessageBody().contains("This is a test"))
 {
     //Toast.makeText(context, "It worked", Toast.LENGTH_LONG).show();
     Intent intent = new Intent(SMS_INENT);
     LocalBroadcastManager.sendBroadcast(intent);//this sends a local broadcast within your app
 } 
```

然后在你的`MainActivity`添加：

```
private static final String SMS_INTENT = "SMS_RECEIVED"; //you can name this whatever 
```

在`onCreate`

```
LocalBroadcastManager.registerReceiver(mReceiver, new IntentFilter(SMS_INTENT)); 
```

然后在你的创建一个`Broadcast receiver`类`Main`

```
private BroadcastReceiver mReceiver = new BroadcastReceiver() {
      @Override
      public void onReceive(Context context, Intent intent) {
        // Do something 
                PerformClick():
      }
}; 
```

最后记得`onDestory`在你的`Main`

```
@Override
protected void onDestroy() 
{
    super.onDestroy();
        LocalBroadcastManager.unregisterReceiver(mReceiver);

} 
```

# c# - 相对路径 Visual Studios

> ID：14616888
> 
> 赞同：4
> 
> 时间：2013-01-31T01:14:19.673
> 
> 标签：c#, visual-studio, path, relative-path

对于学校来说，我的小组的任务是继续开发 Visual Studio 应用程序。我对此没有太多经验，因为大约 6 年前我只使用过几次 Visual Basic。

我必须修复的错误之一涉及将图像保存到文件夹。当我运行代码的“调试”模式时，它可以很好地保存图像。但是，如果我使用 Visual Studios 发布网站，页面会出错，因为它找不到文件夹。我无法对目录进行硬编码，我必须使用相对路径。

这是我当前的代码：

```
String path = Server.MapPath("~") + "sig/img.png" 
```

此代码也适用于调试模式，但不适用于发布：

```
String path = Server.MapPath("/") + "sig/img.png" 
```

当我尝试使用 System.IO.Path.GetFullPath(path) 或 System.IO.Path.Combine(basePath, file) 时，它会返回一个从 ProgramFiles/MicrosoftVisualStudios/ 开始的链接

我不确定它是否有所作为，但所有开发工作都在 C:\Users\UserName\program 中完成，并且它正在发布到 C:\inetpub\wwwdocs\program

Any help is appreciated. (One thing that might help is being able to trace the variable "path", but I don't know how to do that once I publish.)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:51:10.880

归功于支出者和 WLin。是我忽略的权限错误。

感谢大家的帮助！

# c - C 宏利用嵌入式 arm asm 中的立即值 - armcc

> ID：14616896
> 
> 赞同：1
> 
> 时间：2013-01-31T01:15:10.650
> 
> 标签：c, macros, escaping, armcc

与我的问题最接近的线程是这些[在#define 宏中转义 # 符号？](https://stackoverflow.com/questions/1135822/escaping-a-symbol-in-a-define-macro)以及[如何通过 C 预处理器打印磅/哈希？](https://stackoverflow.com/questions/1386597/how-to-print-a-pound-hash-via-c-preprocessor)，但他们并没有完全回答我的问题。更明确地说，第二个似乎不适用于 armcc 编译器。它只打印 hash4 而不是 hash 定义的符号。Chris Lutz 在第二篇文章中特别贬低了尝试使用宏来实现此功能，所以这可能是错误的方法。不过，我想要更多的想法，而不仅仅是一个人。

问题如下：我正在尝试编写一个使用宏定义嵌入式 asm C 函数的宏。我基本上已经实现了它，除了一个问题......表达了一个直接的价值。立即值的语法需要（我相信）一个磅符号，它也是预处理器的“字符串化”符号。那么，是否可以在 C 宏中转义 # 符号？

这背后的主要目的是用 pico 内核线程上下文管理过程包装 isr，并且新过程的函数指针最终将传递给向量中断控制器。

这是代码：

```
#define ISR_THREAD_MGMT(ISR_FUNC,FUNC_NAME) \
__asm void FUNC_NAME ( void ); \
__asm void FUNC_NAME (void ) \
{ \
    STMDB sp!, {r0-r3}; \
    MRS   r0, SPSR; \
    SUB   lr, lr, #4; \        <----- Heres the problem
    STMDB sp!, {r0, r10, r12, lr}; \
    bl _thread_vectored_context_save; \
    bl ISR_FUNC; \
    b _thread_context_restore; \
} 
```

我希望我已经足够详细地解释了一切。如果没有，请不要犹豫，询问更多细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:57:45.767

您引用的第二个问题向您展示了如何做到这一点：

```
#define hash #
#define mash(x) x
#define immediate(a) mash(hash)a
#define ISR_THREAD_MGMT(ISR_FUNC,FUNC_NAME) \
__asm void FUNC_NAME ( void ); \
__asm void FUNC_NAME ( void ) \
{ \
    STMDB sp!, {r0-r3}; \
    MRS   r0, SPSR; \
    SUB   lr, lr, immediate(4); \
    STMDB sp!, {r0, r10, r12, lr}; \
    bl _thread_vectored_context_save; \
    bl ISR_FUNC; \
    b _thread_context_restore; \
}

ISR_THREAD_MGMT(abc,def) 
```

输出：

```
# 1 "x.c"
# 1 "<command-line>"
# 1 "x.c"
# 17 "x.c"
__asm void def ( void ); __asm void def ( void ) { STMDB sp!, {r0-r3}; MRS r0, SPSR; SUB lr, lr, #4; STMDB sp!, {r0, r10, r12, lr}; bl _thread_vectored_context_save; bl abc; b _thread_context_restore; } 
```

输出重新格式化：

```
# 1 "x.c"
# 1 "<command-line>"
# 1 "x.c"
# 17 "x.c"
__asm void def ( void );
__asm void def ( void )
{
    STMDB sp!, {r0-r3};
    MRS r0, SPSR;
    SUB lr, lr, #4;
    STMDB sp!, {r0, r10, r12, lr};
    bl _thread_vectored_context_save;
    bl abc;
    b _thread_context_restore;
} 
```

我不相信这是一个好主意，但它至少确实有效。

# iphone - 如何将对象添加到存储在 CoreData iOS 数据库中的 NSMutableArray？

> ID：14616897
> 
> 赞同：0
> 
> 时间：2013-01-31T01:15:17.110
> 
> 标签：iphone, ios, objective-c, core-data

我有一个子`NSManagedObject`类`absences``NSMutableArray`

```
@interface Record : NSManagedObject
@property (nonatomic, retain) id absences;
@end 
```

我希望能够将项目添加到缺勤数组中；但是，如果我这样做`[myRecord.absences addObject:SomeObj`，记录将无法正确保存。似乎`NSManagedObject`不知道我更新了`absences`数组。

不过，如果我添加`SomeObj`到 some `localAray`, then set `myRecord.absences = localArray`，则`NSManagedObject`保存正确。

有人可以解释这种行为以及我如何避免它......谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T03:12:48.753

你完全正确，在第一种情况下，你正在更改 NSManagedObject 视野之外的对象。为了解决这个问题，[Apple doc 说](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdUsingMOs.html)如下

> 对于可变值，您应该将值的所有权转移给 Core Data，或者实现自定义访问器方法以始终执行复制。

因此，声明您的财产`(copy)`就足够了。

# machine-learning - 线性回归（梯度下降更新）——训练集错误不仅仅是测试

> ID：14616900
> 
> 赞同：0
> 
> 时间：2013-01-31T01:15:26.010
> 
> 标签：machine-learning, linear-regression

我的算法是这样的：

数据存储为：

```
data = [record1, record2, ... ]
    where record1 is [1, x1, x2 ..., x_m] m feature values for that record
theta is parameter of linear regression function, theta is vector of size m+1
y is true label, again array of length, len(data). (y[0] is true value for record 0) 
```

线性回归随机更新：

```
while True:
    for i in range(len(data)):
        x = data[i]
        for t in range(0, m):
            theta[t] = theta[t] - my_lambda * (np.dot(theta, x) - y[i]) * x[t]
        j_theta = compute_J_of_theta(data, y, theta)
    print "Iteration #: ", iterations, " j_theta ", j_theta
    if j_theta < 5000:
        #print "******************** FINALLY CONVERGED!!!! ********************" 
        break

compute_j_of_theta(data, y, theta):
"""
Convergence criteria,
compute J(theta) = 1/2M sum (h_theta(x_t) - y_t)**2
"""
temp = 0
for i in range(0, len(data)):
    x = data[i]
    temp += (np.dot(theta, x) - y[i])**2
return temp/2*M 
```

my_lambda 非常小 最初 theta 是 0 大小为 m+1 的向量

Que：训练集错误不仅仅是测试......为什么？这有什么问题？编辑1：这是我计算错误的愚蠢错误

# c# - 带有脚手架的 DropDownList 中的模型字段

> ID：14616901
> 
> 赞同：0
> 
> 时间：2013-01-31T01:15:44.447
> 
> 标签：c#, asp.net-mvc, scaffolding

在我的模型中，我希望能够通过 DropDownList 选择属性的值。像这样：

```
public int Foo { get; set; }

private IEnumerable<string> FooOptions = new IEnumerable<string> { "Foo", "Bar" }; 
```

因此，在呈现的 html 中，我将有以下内容：

```
<select name="Foo">
    <option value="0">Foo</option>
    <option value="1">Bar</option>
</select> 
```

这在 Controller 和 View 中很容易做到，但我实际上正在寻找一种与 Visual Studio 的默认 Controller / View Scaffolder 一起工作的方法。

甚至可能吗？或者更好的是，有没有更好的方法来实现这一点？

TIA，安德烈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:30:15.817

看看这个链接：[http ://www.asp.net/mvc/tutorials/javascript/working-with-the-dropdownlist-box-and-jquery/examineing-how-aspnet-mvc-scaffolds-the-dropdownlist -帮手](http://www.asp.net/mvc/tutorials/javascript/working-with-the-dropdownlist-box-and-jquery/examining-how-aspnet-mvc-scaffolds-the-dropdownlist-helper)

您会注意到，如果您将 MVC 与 EF 一起用于使用外键的模型（使用 IEnumerable 转换为 POCO），Visual Studio 将自动创建一个下拉列表。

# iphone - MPMoviePlayerController 没有 UI 控件

> ID：14616903
> 
> 赞同：0
> 
> 时间：2013-01-31T01:16:10.750
> 
> 标签：iphone, ios, objective-c

我正在尝试添加从服务器中提取的视频，并在我的应用程序中播放。

视频现在可以播放，但我没有任何用于音量的 UI 控件。全屏等

任何人都可以帮忙吗？这是我的代码

```
NSURL *url = [NSURL URLWithString:@"http://www.gzerodesign.com/sharksclips/video.mp4"];
    moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];

    // Register to receive a notification when the movie has finished playing.
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(moviePlayBackDidFinish:)
                                                 name:MPMoviePlayerPlaybackDidFinishNotification
                                               object:moviePlayer];

    if ([moviePlayer respondsToSelector:@selector(setFullscreen:animated:)]) {
        // Use the new 3.2 style API
        moviePlayer.controlStyle = MPMovieControlModeDefault;
        moviePlayer.shouldAutoplay = YES;
        [[moviePlayer view] setFrame:[[self view] bounds]];
        [self.view addSubview:moviePlayer.view];
        [moviePlayer setFullscreen:YES animated:YES];
        [moviePlayer play]; 
    } else {
        // Use the old 2.0 style API
        moviePlayer.movieControlMode = MPMovieControlModeHidden;
        [moviePlayer play];  
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:49:01.687

我只体验过 New 3.2 风格的 API。

`moviePlayer.controlStyle = MPMovieControlModeDefault;`

注释掉

`// moviePlayer.controlStyle = MPMovieControlModeDefault;`

你可能有全屏按钮和跳过按钮。但不显示音量。

我没有尝试，但是，我搜索了这个。

[MPMoviePlayerViewController 不显示音量滑块？](https://stackoverflow.com/questions/9870907/mpmovieplayerviewcontroller-not-showing-volume-slider)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T02:50:32.937

删除代码中的这一行：

```
moviePlayer.controlStyle = MPMovieControlModeDefault; 
```

&还有这一行：

```
moviePlayer.movieControlMode = MPMovieControlModeHidden; 
```

然后检查。

# php - $array['key'][null] 在 php 中有什么作用？

> ID：14616906
> 
> 赞同：1
> 
> 时间：2013-01-31T01:16:19.343
> 
> 标签：php, arrays, null

所以，

在我的代码中，我的一个变量恰好包含 null，这给了我一些相当难以跟踪的问题，具体来说，它返回了一些奇怪的东西。

下面是同一个数组的print_r，第一个被称为`print_r($array['key'][null])`有`null`键第二个`print_r($array['key'])`没有`null`键那么第一个数组是什么？

**第一的**

```
Array
(
    [parent_access] => 1
    [seasons] => Array
        (
            [1] => Array
                (
                    [parent_access] => 1
                    [rounds] => Array
                        (
                            [5] => Array
                                (
                                    [direct_access] => 1
                                )

                        )

                )

        )

) 
```

**第二（注意，下面的整个数组可以在[https://gist.github.com/4679128](https://gist.github.com/4679128)看到）**

```
Array
(
    [1] => Array
        (
            [id] => 1
            [type] => competition
            [status] => 0
            [child_access] => 
            [direct_access] => 1
            [parent_access] => 
            [seasons] => Array
                (
                    [1] => Array
                        (
                            [id] => 1
                            [type] => season
                            [status] => 1
                            [child_access] => 1
                            [direct_access] => 
                            [parent_access] => 
                            [rounds] => Array
                                (
                                    [1] => Array
                                        (
                                            [id] => 1
                                            [type] => round
                                            [status] => 1
                                            [child_access] => 1
                                            [direct_access] => 
                                            [parent_access] => 
                                            [games] => Array
                                                (
                                                    [1] => Array
                                                        (
                                                            [id] => 1
                                                            [type] => game
                                                            [status] => 1
                                                            [child_access] => 1
                                                            [direct_access] => 
                                                            [parent_access] => 
                                                        )

                                                    [11] => Array
                                                        (
                                                            [id] => 11
                                                            [type] => game
                                                            [status] => 1
                                                            [child_access] => 1
                                                            [direct_access] => 
                                                            [parent_access] => 
                                                        )

                                                    [21] => Array
                                                        (
                                                            [id] => 21
                                                            [type] => game
                                                            [status] => 1
                                                            [child_access] => 1
                                                            [direct_access] => 
                                                            [parent_access] => 
                                                        )

                                                    [31] => Array
                                                        (
                                                            [id] => 31
                                                            [type] => game
                                                            [status] => 1
                                                            [child_access] => 1
                                                            [direct_access] => 
                                                            [parent_access] => 
                                                        )

                                                )

                                        )

                                    [5] => Array
                                        (
                                            [id] => 5
                                            [type] => round
                                            [status] => 1
                                            [child_access] => 1
                                            [direct_access] => 
                                            [parent_access] => 
                                            [games] => Array
                                                (
                                                    [5] => Array
                                                        (
                                                            [id] => 5
                                                            [type] => game
                                                            [status] => 1
                                                            [child_access] => 1
                                                            [direct_access] => 
                                                            [parent_access] => 
                                                        )

                                                    [15] => Array
                                                        (
                                                            [id] => 15
                                                            [type] => game
                                                            [status] => 1
                                                            [child_access] => 1
                                                            [direct_access] => 
                                                            [parent_access] => 
                                                        )

                                                    [25] => Array
                                                        (
                                                            [id] => 25
                                                            [type] => game
                                                            [status] => 1
                                                            [child_access] => 1
                                                            [direct_access] => 
                                                            [parent_access] => 
                                                        )

                                                    [35] => Array
                                                        (
                                                            [id] => 35
                                                            [type] => game
                                                            [status] => 1
                                                            [child_access] => 1
                                                            [direct_access] => 
                                                            [parent_access] => 
                                                        )

                                                )

                                        )

                                    [8] => Array
                                        (
                                            [id] => 8
                                            [type] => round
                                            [status] => 1
                                            [child_access] => 1
                                            [direct_access] => 
                                            [parent_access] => 
                                            [games] => Array
                                                (
                                                    [8] => Array
                                                        (
                                                            [id] => 8
                                                            [type] => game
                                                            [status] => 1
                                                            [child_access] => 1
                                                            [direct_access] => 
                                                            [parent_access] => 
                                                        )

                                                    [18] => Array
                                                        (
                                                            [id] => 18
                                                            [type] => game
                                                            [status] => 1
                                                            [child_access] => 1
                                                            [direct_access] => 
                                                            [parent_access] => 
                                                        )

                                                    [28] => Array
                                                        (
                                                            [id] => 28
                                                            [type] => game
                                                            [status] => 1
                                                            [child_access] => 1
                                                            [direct_access] => 
                                                            [parent_access] => 
                                                        )

                                                    [38] => Array
                                                        (
                                                            [id] => 38
                                                            [type] => game
                                                            [status] => 1
                                                            [child_access] => 1
                                                            [direct_access] => 
                                                            [parent_access] => 
                                                        )

                                                )

                                        )

                                    [10] => Array
                                        (
                                            [id] => 10
                                            [type] => round
                                            [status] => 1
                                            [child_access] => 1
                                            [direct_access] => 
                                            [parent_access] => 
                                            [games] => Array
                                                (
                                                    [10] => Array
                                                        (
                                                            [id] => 10
                                                            [type] => game
                                                            [status] => 1
                                                            [child_access] => 1
                                                            [direct_access] => 
                                                            [parent_access] => 
                                                        )

                                                    [20] => Array
                                                        (
                                                            [id] => 20
                                                            [type] => game
                                                            [status] => 1
                                                            [child_access] => 1
                                                            [direct_access] => 
                                                            [parent_access] => 
                                                        )

                                                    [30] => Array
                                                        (
                                                            [id] => 30
                                                            [type] => game
                                                            [status] => 1
                                                            [child_access] => 1
                                                            [direct_access] => 
                                                            [parent_access] => 
                                                        )

                                                    [40] => Array
                                                        (
                                                            [id] => 40
                                                            [type] => game
                                                            [status] => 1
                                                            [child_access] => 1
                                                            [direct_access] => 
                                                            [parent_access] => 
                                                        )

                                                )

                                        )

                                )

                        )

                    [2] => Array
                        (
                            [id] => 2
                            [type] => season
                            [status] => 1
                            [child_access] => 1
                            [direct_access] => 
                            [parent_access] => 
                            [rounds] => Array
                                (
                                    [2] => Array
                                        (
                                            [id] => 2
                                            [type] => round
                                            [status] => 1
                                            [child_access] => 1
                                            [direct_access] => 
                                            [parent_access] => 
                                            [games] => Array
                                                (
                                                    [2] => Array
                                                        (
                                                            [id] => 2
                                                            [type] => game
                                                            [status] => 1
                                                            [child_access] => 1
                                                            [direct_access] => 
                                                            [parent_access] => 
                                                        )

                                                    [12] => Array
                                                        (
                                                            [id] => 12
                                                            [type] => game
                                                            [status] => 1
                                                            [child_access] => 1
                                                            [direct_access] => 
                                                            [parent_access] => 
                                                        )

                                                    [22] => Array
                                                        (
                                                            [id] => 22
                                                            [type] => game
                                                            [status] => 1
                                                            [child_access] => 1
                                                            [direct_access] => 
                                                            [parent_access] => 
                                                        )

                                                    [32] => Array
                                                        (
                                                            [id] => 32
                                                            [type] => game
                                                            [status] => 1
                                                            [child_access] => 1
                                                            [direct_access] => 
                                                            [parent_access] => 
                                                        )

                                                )

                                        )

                                    [6] => Array
                                        (
                                            [id] => 6
                                            [type] => round
                                            [status] => 1
                                            [child_access] => 1
                                            [direct_access] => 
                                            [parent_access] => 
                                            [games] => Array
                                                (
                                                    [6] => Array
                                                        (
                                                            [id] => 6
                                                            [type] => game
                                                            [status] => 1
                                                            [child_access] => 1
                                                            [direct_access] => 
                                                            [parent_access] => 
                                                        )

                                                    [16] => Array
                                                        (
                                                            [id] => 16
                                                            [type] => game
                                                            [status] => 1
                                                            [child_access] => 1
                                                            [direct_access] => 
                                                            [parent_access] => 
                                                        )

                                                    [26] => Array
                                                        (
                                                            [id] => 26
                                                            [type] => game
                                                            [status] => 1
                                                            [child_access] => 1
                                                            [direct_access] => 
                                                            [parent_access] => 
                                                        )

                                                    [36] => Array
                                                        (
                                                            [id] => 36
                                                            [type] => game
                                                            [status] => 1
                                                            [child_access] => 1
                                                            [direct_access] => 
                                                            [parent_access] => 
                                                        )

                                                )

                                        )

                                    [9] => Array
                                        (
                                            [id] => 9
                                            [type] => round
                                            [status] => 1
                                            [child_access] => 1
                                            [direct_access] => 
                                            [parent_access] => 
                                            [games] => Array
                                                (
                                                    [9] => Array
                                                        (
                                                            [id] => 9
                                                            [type] => game
                                                            [status] => 1
                                                            [child_access] => 1
                                                            [direct_access] => 
                                                            [parent_access] => 
                                                        )

                                                    [19] => Array
                                                        (
                                                            [id] => 19
                                                            [type] => game
                                                            [status] => 1
                                                            [child_access] => 1
                                                            [direct_access] => 
                                                            [parent_access] => 
                                                        )

                                                    [29] => Array
                                                        (
                                                            [id] => 29
                                                            [type] => game
                                                            [status] => 1
                                                            [child_access] => 1
                                                            [direct_access] => 
                                                            [parent_access] => 
                                                        )

                                                    [39] => Array
                                                        (
                                                            [id] => 39
                                                            [type] => game
                                                            [status] => 1
                                                            [child_access] => 1
                                                            [direct_access] => 
                                                            [parent_access] => 
                                                        )

                                                )

                                        )

                                )

                        )

                )

        )

    [2] => Array
        (
            [id] => 2
            [type] => competition
            [status] => 1
            [child_access] => 
            [direct_access] => 
            [parent_access] => 
            [seasons] => Array
                (
                    [3] => Array
                        (
                            [id] => 3
                            [type] => season
                            [status] => 1
                            [child_access] => 
                            [direct_access] => 
                            [parent_access] => 
                            [rounds] => Array
                                ( 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:24:47.167

[http://ideone.com/pXRVKE](http://ideone.com/pXRVKE)

因此，`null`将转换为空字符串。

[http://php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)

> Null 将被强制转换为空字符串，即键 null 将实际存储在 "" 下。

# google-maps - 谷歌地图上的div

> ID：14616909
> 
> 赞同：1
> 
> 时间：2013-01-31T01:16:46.320
> 
> 标签：google-maps, html

我有一个整页的谷歌地图，我希望能够将一些图像叠加在地图上。到目前为止，我有以下代码：

```
<style type="text/css"> 
    html { height: 100% } 
    body { height: 100%; margin: 0; padding: 0 } 
    #map_canvas { height: 100% } 
    #wrapper { position: relative; }
    #over_map { position: absolute; background-color: transparent; top: 10px; left: 10px; z-index: 99; }
    #over_map_right { position: absolute; background-color: transparent; top: 10px; right: 10px; z-index: 99; }

</style>

....

<body>  

<div id="wrapper">

    <div id="map_canvas" style="width:100%; height:100%"></div>

    <div id="over_map">Left hand stuff goes here</div>

    <div id="over_map_right">right hand stuff goes here</div>
</div> 
</body> 
```

这段代码对我来说似乎是正确的，但是当打开它时，我得到一个纯白的屏幕，只有

```
<div id="over_map">Left hand stuff goes here</div>

<div id="over_map_right">right hand stuff goes here</div> 
```

显示。

还有另一种方法吗？可以用 iframe 或类似的东西来完成吗？

麦克风

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T01:25:36.153

问题是谷歌地图需要一个具体的`height`属性才能工作。

这是一个例子：http: [//jsfiddle.net/9qDhX/](http://jsfiddle.net/9qDhX/)

请注意，这`height: 400px;`将起作用，但`height: 100%;`会给您留下一个空白屏幕。

有多种解决方法可以获得“全屏”地图。最好的跨浏览器会使用某种 jQuery 来设置`map_canvas`基于当前窗口大小的高度，并使用一个监听器来调整窗口大小以重置高度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-14T01:23:46.843

除了 Jeff-Meadows 的回答。

获取全屏地图：

你可以使用 jquery onload 事件

```
 $(function () {
        $("#map_canvas").css("height", $(window).height());
    }); 
```

这将启用全屏

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-15T16:52:52.657

您可以`vh`在样式表中使用 CSS 单元。

例如：

```
#map_canvas {
    height: 100vh;
} 
```

# javascript - 从循环或条件更新变量

> ID：14616915
> 
> 赞同：0
> 
> 时间：2013-01-31T01:17:55.210
> 
> 标签：javascript, node.js

我正在尝试从循环内部更新存在于循环外部的变量，如下所示：

```
var firstRun = true;
console.log("firstRun is " + firstRun);
if(firstRun == true){
    console.log("This is your first run");
    firstRun = false;
}else{
    console.log("You have already run this loop at least once");
}; 
```

假设这个代码块在一个更大的代码块内，它将运行 4 次，我希望它输出`This is your first run`一次，然后输出`You have already run this loop at least once`3 次。相反，我得到`This is your first run`了 4 次，并且`console.log("firstRun is " + firstRun);`总是输出`true`

我确定这是我不太了解的范围问题。原谅我，我来自红宝石的土地:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T01:20:10.653

您正在重新声明`firstRun`循环中的每一步。移出`var firstRun = true;`循环。

如果您不能将其移出循环，则必须使用一个对象，并在分配对象之前检查它是否已被声明：

```
var firstRun = firstRun || {ran: false};

if (firstRun.ran == true) {
    console.log("This is your first run");
    firstRun.ran = false;
} else {
    console.log("You have already run this loop at least once");
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T01:23:34.417

如果整个块在您的循环中，您将在每次迭代时重置 var firstRun = true 。您需要在循环之外设置 var firstRun = true （为了清楚起见，就在它之前）。

```
var firstRun = true;
for (var i = 0; i < 4; i++) {
    console.log("firstRun is " + firstRun);
    if(firstRun == true){
        console.log("This is your first run");
        firstRun = false;
    } else {
        console.log("You have already run this loop at least once");
    };
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T01:20:29.540

我假设布尔值在每次迭代时都会被重置。移动`var firstRun = true;`外循环！

```
var firstRun = true;
for (...) {
  if(firstRun){firstRun=false;}
  else{}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T01:20:49.483

`firstRun`您每次都在循环中重置变量，因此当条件语句执行时，值`firstRun`将始终为`true`.

你需要做这样的事情

```
var firstRun = true;

//Loop only following block
if(firstRun == true){
    console.log("This is your first run");
    firstRun = false;
}else{
    console.log("You have already run this loop at least once");
}; 
```

# performance - T-SQL：如果某些列值相同，则更新性能

> ID：14616916
> 
> 赞同：0
> 
> 时间：2013-01-31T01:18:07.753
> 
> 标签：performance, tsql, sql-server-2012

假设我想对在 SQL Server 2012 中存储为行的对象执行 UPDATE，并且某些列值不同，但大多数是相同的。问题很简单 - Sql Server 会只对更改的列执行硬盘写入，还是会写入整行，无用地重写现有的列值？如果对象保存在分布在许多表（复杂对象）的数据库中怎么办？

我应该改写我的问题 - 更新行时对某些列进行非更新更新的性能是否值得担心？顺便说一句，我使用 id 列作为聚集键。

# jquery - jQuery：未在我的 hover() 中定义的变量

> ID：14616924
> 
> 赞同：0
> 
> 时间：2013-01-31T01:19:54.570
> 
> 标签：jquery, variables, hover, undefined

我有这个代码：

```
$('#services_list > div').hover(function() {

    var serviceHoveredOn = '#' + $(this).attr('id');
    $(serviceHoveredOn + ' .service_expand').stop().animate({'width': '169px'}, 150);

},

function() {

    $(serviceHoveredOn + ' .service_expand').stop().animate({'width': '159px'}, 150);

}); 
```

但是，`serviceHoveredOn`当我将鼠标悬停在`div`. 我搜索并发现了这个： [jquery：在悬停（）函数中传递变量？](https://stackoverflow.com/questions/4287324/jquery-passing-variables-in-hover-function) 但我不确定如何使用 toggle() 来解决我的问题。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:21:23.307

您不能访问在另一个函数中声明的变量。

* * *

在你的情况下，你甚至不需要它。只需使用`this`，并将其作为上下文传递：

```
$('#services_list > div').hover(function() {
    $('.service_expand', this).stop().animate({'width': '169px'}, 150);
},
function() {
    $('.service_expand', this).stop().animate({'width': '159px'}, 150);
}); 
```

# jquery - 如何使用 ajax 解析远程网站

> ID：14616925
> 
> 赞同：0
> 
> 时间：2013-01-31T01:19:57.113
> 
> 标签：jquery, dom, cross-domain, jsonp

我正在尝试使用 JSONP 解析远程网站的 DOM 我认为问题是当我得到响应时它不是 JSON 所以延迟对象失败，但是我不能只是把原始数据带到那里并遍历dom节点以某种方式？$(文档).ready(函数() {

```
 $('#submitUrl').on('click', function() {

                          var words = {};

                          var url = $('#url').val();

                          //send a JSONP request since its the only cross domain method available
                          var options = {
                                dataType: "JSONP",
                                type: 'GET',
                                url: url,
                          };
                          var arr = new Array();
                          var countArr = new Array();

                          var jqxhr = $.ajax(options)
                                  .done(function(data) {
                                //this will always fail since jquery expects valid json response, try parsing in always pipe

                          })
                                  .fail(function() {

                          })
                                  .always(function(data) {

                                var fileDom = $(data);
                                //grab each element under the body dom element
                                //probably a filter method would work faster
                                fileDom.find('body *').each(function(index, value) {
                                      if ($(this).text())
                                      {
                                            var txt = $(this).text();
                                            //is this in the array already
                                            if ($.inArray(txt, arr)) {
                                                  //get current ocunt
                                                  var c = parseInt(countArr[txt]);
                                                  c++;
                                                  countArr[txt] = c;
                                            }
                                            else {
                                                  countArr[txt] = 1;

                                            }

                                      }

                                });
                          });

                    });

              }); 
```

html

```
 <label>Input URL</label>
                                <input type="text" name="url" id="url" value=""/>
                                <input type="submit" id="submitUrl"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:21:49.357

你不能这样做。

为了能够使用`jsonp`- 远程端应该以特殊格式给出响应（包装在回调函数中）。

因此，根据定义，不可能`jsonp`与任意网页一起使用。

# java - 我应该如何在管理进程和子进程之间进行进程间通信？

> ID：14616929
> 
> 赞同：2
> 
> 时间：2013-01-31T01:20:44.733
> 
> 标签：java, process

我有五个独立的 java**进程**；它们作为业务逻辑模块运行。**如果我可以启动/ping/monitor/message**子进程，我想开发我的进程管理应用程序。

此外，它可能会通过 rest-ws 或最坏情况下的 rmi 调用与子进程共享缓存等资源，因为这需要额外的开销。

我倾向于基于 webservice 的 api，它将不断发送有关在进程中运行的业务逻辑的信息。这些流程可以是数据搅动、计算、通知流程引擎。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T21:36:56.903

一种选择是使用 JMX，并发布一个或多个 MBean。Oracle 有[关于它的文档](http://docs.oracle.com/javase/tutorial/jmx/mbeans/standard.html)。您可以使用来自进程的请求信息，或者向它们发送信号以改变它们的行为。

您将要做的基本框架是决定您需要在每个子进程中远程公开哪些方法。他们每个人都应该用这些方法定义一个接口，然后是该接口的一个实现。然后这些实现需要在`MBeanServer`.

这种方法的优点是您将**立即**获得一个简单的“管理应用程序”，因为您可以针对您的流程打开 JConsole 并使用 MBean。如果您希望创建一个单独的应用程序来更清晰地呈现您的数据，您可以在闲暇时这样做，而无需更改子进程。

无论如何，这种方法并不能真正让您“共享缓存”，但在进程（或机器）之间共享缓存确实应该是一个单独的问题（我认为）。

# python - 生成带有重复的组合列表......有点扭曲

> ID：14616933
> 
> 赞同：2
> 
> 时间：2013-01-31T01:21:26.047
> 
> 标签：python, combinatorics

我正在尝试在 和 范围内生成动态字符集的每个`CHAR_LIST`组合。我在下面粘贴的代码有效，但我觉得它的效率非常低，我想尽可能快。`lower``upper`

例如，如果我想在“aab”和“zzz”之间生成一个只有小写字母字符的列表，它将输出：`['aab', 'aac', 'aad', ..., 'zzy', 'zzz']`

如果有什么我不清楚的地方，请发表评论，我会澄清的。谢谢！

我现在有什么工作。

```
def generate_list(lower, upper):
    result = [lower]
    while lower != upper:
        if CHAR_LIST.index(lower[len(lower)-1:len(lower)]) + 1 < len(CHAR_LIST):
            lower = lower[:len(lower)-1] + CHAR_LIST[CHAR_LIST.index(lower[len(lower)-1:len(lower)]) + 1]
        else:
            new_lower = ""
            new_dig = 0
            inc_next = True
            for i in lower[::-1]:
                if i == CHAR_LIST[len(CHAR_LIST)-1] and inc_next:
                    new_lower += CHAR_LIST[0]
                    new_dig += 1
                else:
                    if inc_next:
                        inc_next = False
                        new_lower += CHAR_LIST[CHAR_LIST.index(i) + 1]
                    else:
                        new_lower += i
            if new_dig == len(lower):
                lower = str(CHAR_LIST[0])*int(len(lower)+1)
            else:
                lower = new_lower[::-1]
        result.append(lower)
    return result 
```

编辑：我忘了补充，因为这是挑战的一部分，它还必须计算一个具有不同起点和终点长度的列表。例如，它还必须计算“a”和“zzz”之间的列表。抱歉修改晚了，感谢到目前为止的创造性答案:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:26:16.233

```
import itertools
CHAR_LIST = list("abcdefghijklmnopqrstuvwxyz")

def generate_list(lower, upper):
    lower, upper = tuple(lower), tuple(upper)
    return ["".join(e) for e in itertools.product(CHAR_LIST, repeat=len(lower))
                  if e >= lower and e <= upper]

print generate_list("aab", "zzz") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T01:26:25.527

在我看来，这`itertools.product`就是你想要的：

```
from string import ascii_lowercase
from itertools import product
all_combos = (''.join(x) for x in product(ascii_lowercase,repeat=3))
filtered = (s for s in all_combos if s > 'aaa') 
```

为了与 itertools 的出色保持一致，我在这里使用了生成器，但是您可以轻松地将第二个生成器转换为列表推导式以获取列表——而且我也相信很容易看出如何将其转换为函数with`lower`和`upper`bounds 对生成器表达式进行非常简单的修改`filtered`（下限已经包括在内 ;-) ...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T05:00:58.073

我花了很长时间才理解你的代码是如何工作的，因为你做的工作比你需要的要多得多。这是同一算法的一个激进的“pythonized”版本，我怀疑它会比你现在拥有的快很多：

```
def generate_strings(value, bound, alpha):
    yield value
    while value != bound: # run until we have reached bound
        for i, c in enumerate(reversed(value)): # loop over the string in reverse
            if c != alpha[-1]: # can this character be incremented?
                # construct an incremented value
                value = value[:-1-i] + alpha[alpha.index(c)+1] + alpha[0]*i
                break # exit the for loop
        else: # run only if for loop ended without breaking
            value = alpha[0]*(len(value) + 1) # make a longer string
        yield value 
```

该函数是一个生成器，因此如果您想要一个列表结果，请将其传递给列表构造函数，如以下示例输出所示：

```
>>> print(list(generate_strings("b", "cc", "abcd")))
['b', 'c', 'd', 'aa', 'ab', 'ac', 'ad', 'ba', 'bb', 'bc', 'bd', 'ca', 'cb', 'cc'] 
```

我将字符序列作为函数的参数，而不是使用全局变量。该`bound`参数也可以是`None`或其他一些无意义的值来获得无限生成器（但不要在`list()`不缩短它的情况下将其传递给它！）。以下是这两个功能的示例：

```
>>> from itertools import islice
>>> from string import ascii_lowercase
>>>
>>> print(list(islice(generate_strings("xyzzy", None, ascii_lowercase), 5)))
['xyzzy', 'xyzzz', 'xzaaa', 'xzaab', 'xzaac'] 
```

如果您是 Python 新手，那么代码中的一些内容可能并不明显。

首先，我在字符串中使用了很多负索引。这从右边开始，`-1`从最右边的字符开始。仅此一项就可以大大简化您的代码（您有很多`x[len(x)-1]`）。

接下来，我使用`enumerate`和`reversed`内置函数从右到左循环字符串，跟踪我循环了多少个字符。我认为这是关于您对自己的价值观所做的事情`i`，`new_dig`但我认为这要清楚得多。Python中有很多有用的内置生成器！

最后，我使用了一个`break`语句来提前退出`for`循环，用一个块来处理我们没有ing`else`就结束了的情况。当我第一次了解它时，这种循环对我来说似乎没用，但在这种情况下它确实很方便，循环的大部分运行都会导致`break`语句被命中。`else``break`

# ruby-on-rails-3 - 我应该如何在 Rails 中为马谱系建模？

> ID：14616935
> 
> 赞同：2
> 
> 时间：2013-01-31T01:21:29.600
> 
> 标签：ruby-on-rails-3, activerecord, associations

我需要使用 rails/activerecord 对多达 5 或 6 代马的血统进行建模。我在这里对堆栈和网络进行了研究，并最终将这篇[文章](http://tesoriere.com/2010/09/01/rails-3--self-referential-has_many--through-parent---child-relationship-modelling/#comment-382562829)作为我的方法的基础。这就是我想出的。

两种型号：

```
Horse has the following attributes id and horse_name
Pedigree has: id, parent_id and horse_id. 
```

以及以下关联：

```
has_many  :parent_horse_relationships, :class_name => "Pedigree", :foreign_key => :horse_id, :dependent => :destroy

has_one  :sire_horse_relationship, :class_name => "Pedigree", :foreign_key => :horse_id, :conditions => "horse_gender = 'Male'

has_one  :dam_horse_relationship, :class_name => "Pedigree", :foreign_key => :horse_id, :conditions => "horse_gender = 'Female'

has_many  :parents, :through => :parent_horse_relationships, :source => :parent 

has_one  :sire, :through => :sire_horse_relationship,:source => :parent

has_one  :dam, :through => :dam_horse_relationship,:source => :parent

has_many  :horse_parent_relationships, :class_name => "Pedigree", :foreign_key => :parent_id, :dependent => :destroy

has_many  :progenies, :through => :horse_parent_relationships, :source =>  :horse 
```

这种方法很接近，但似乎我的条件是确定母马或父系适用于马而不是父母。因此，如果特定的马是雄性，则 horse.sire 会工作，但 horse.dam 不会，反之亦然。一旦我的基本功能正常工作，我想添加额外的方法来获取整个谱系、祖父母、兄弟姐妹、后代等。

问题：

1.  我如何将性别条件应用于父母而不是马，以便父亲和母亲都起作用。

2.  我采取的方法是可行的，还是有更优雅、更有效的方法来实现这一点。

3.  任何其他建议或指导将不胜感激。

很抱歉这个问题很长，感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:34:16.650

我可能会开始：

```
has_one  :sire, :class_name => "Pedigree", :foreign_key => :horse_id, :conditions => "horse_gender = 'Male'
has_one  :dam, :class_name => "Pedigree", :foreign_key => :horse_id, :conditions => "horse_gender = 'Female'

has_many  :parent_horse_relationships, :class_name => "Pedigree", :foreign_key => :horse_id, :dependent => :destroy
has_many  :parents, :through => :parent_horse_relationships, :source => :parent 

has_many  :progenies, :through => :horse_parent_relationships, :source =>  :horse 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T15:17:49.823

我最终花了很多时间在这个上，但最终想出了一个满足我要求的解决方案。最终起作用的协会如下：

```
 has_many :parent_horse_relationships, :class_name => "Pedigree", :foreign_key => :horse_id, :dependent => :destroy

  has_many :parents, :through => :parent_horse_relationships, :source => :parent do 
    def dam_relationship
      owner = self.proxy_association.owner
      owner = owner.parents.where(:horse_gender => "Female")
      where('pedigrees.parent_id = ?', owner)
    end

    def sire_relationship
      owner = self.proxy_association.owner
      owner = owner.parents.where(:horse_gender => "Male")
      where('pedigrees.parent_id = ?', owner)
    end
  end

  def dam
    parents.dam_relationship
  end

  def sire
    parents.sire_relationship
  end 
```

问题回复：

我通过使用一个[关联代理](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#label-Association+extensions)和一个简单的包装器来应用性别条件。我创建了一个 dam_relationship 和相应的 Sire_relationship，然后将这些方法包装在几个 dam 和 Sire 包装器方法中。

```
def dam_relationship
owner = self.proxy_association.owner
owner = owner.parents.where(:horse_gender => "Female")
where('pedigrees.parent_id = ?', owner)
end

def dam
parents.dam_relationship
end 
```

这允许我这样做：

```
@horse.parents, @horse.dam, @horse.sire (not displayed) 
```

以及下面提到的祖先宝石中包含的大多数方法。稍微递归一下，就可以相当直接地显示整个谱系或您感兴趣的世代数。

与直接在 Horse 模型中使用sire_id 和 dam_id 相比，我决定使用两个模型（Horse 和 Pedigree）的方法提供了一些额外的灵活性。这种方法将使我能够更轻松地创建像@horse.uncle、@horse.aunt 这样的方法。我相信直接在 Horse 模型中使用sire_id 和 dam_id 会更困难。

实现这一点的最受欢迎的宝石似乎是[祖先](https://github.com/stefankroes/ancestry)。作者通过在感兴趣的模型中添加祖先列来实现这一点，而且更简单。这是一个非常好的解决方案，绝对值得一试。

# c# - 在标签中自动包含版本号

> ID：14616939
> 
> 赞同：1
> 
> 时间：2013-01-31T01:21:56.533
> 
> 标签：c#, version, auto-update

我目前在我的应用程序的标签中包含我的发布/发布的版本号，但一直无法弄清楚如何添加它以便它为每次发布自动更新。目前，我只是使用一个简单的文本：

```
//VERSION LABEL
string version = "1.0.0.15 - BETA";
versionLabel.Text = "v" + version; 
```

有没有办法在每次发布时自动更新版本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T01:25:30.040

使用汇编版本怎么样？根据您是否让它自动升级，这可以为您节省一些时间。

```
var appVersion = Assembly.GetExecutingAssembly().GetName().Version;
versionLabel.Text = String.Format("v{0}", appVersion); 
```

这将基于`AssemblyInfo`'s 版本。

为了详细说明我的意思，如果您查看`AssemblyInfo.cs`，您会看到如下内容：

```
// Version information for an assembly consists of the following four values:
//
//      Major Version
//      Minor Version 
//      Build Number
//      Revision
//
// You can specify all the values or you can default the Revision and Build Numbers 
// by using the '*' as shown below:
[assembly: AssemblyVersion("1.0.0.0")] 
```

这本质上是说，如果你成功了，`1.0.*`或者`1.0.0.*`VS 将在每​​次编译时恭敬地为你分配一个修订版或构建和修订版。

# javascript - 将点击事件和延迟事件添加到 div (jQuery)

> ID：14616940
> 
> 赞同：-1
> 
> 时间：2013-01-31T01:22:14.617
> 
> 标签：javascript, jquery, html

我希望页面在加载时向上滑动一个 div (#splash)，**或者**在任何时候，可以单击鼠标以向上加载幻灯片。这是我的代码不起作用

```
$(document).ready(function() {
    $(".fancybox").fancybox({
         openEffect : 'none',
         closeEffect    : 'none'
    });

    $("#splash").click(function(){
        $("#splash").slideUp(3000,"swing");
    });

    $("#splash").delay(2000).slideUp(3000,"swing");

}); 
```

我希望它向上滑动抱歉。飞溅最初是整个页面的大小。我希望它在延迟后或单击它时在加载时向上滑动。

目前 div 仅在 2000 延迟后向上滑动，而不是在单击时向上滑动

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T01:33:09.023

延迟功能可防止单击执行中的滑动。请改用 setTimeout。

```
 $(document).ready(function() {
    $("#splash").click(function(){
        $("#splash").slideUp(3000,"swing");
    });

    //Bad code: 
    //$("#splash").delay(5000).slideUp(3000,"swing");

    //Use setTimeOut 
    setTimeout(function (){$("#splash").slideUp(3000,"swing");} ,5000);

}); 

```

工作 jsFiddle：http: [//jsfiddle.net/basarat/QXEVP/](http://jsfiddle.net/basarat/QXEVP/)

# c# - XDGI 格式 B8G8R8A8_UNorm 究竟是什么意思？

> ID：14616947
> 
> 赞同：0
> 
> 时间：2013-01-31T01:22:31.133
> 
> 标签：c#, image, directx, hex

我很难弄清楚这种图像格式的含义：directX 中的 B8G8R8A8_UNorm。这是每个颜色通道 8 位吗？这是否意味着如果您有颜色 0xAABBCCFF，例如，那么颜色将是：

*   B = AA
*   G = BB
*   R = CC
*   A = DD

，这是某种灰色？例如，这与 R32G32B32A32_float 相比如何？

例如。我正在查看 HxD 中的图像，以查看十六进制。前 8 个字节（在头部之后）是：

```
FB 52 6F 3F 
```

哪个是绿色的。但是，如果我将图片加载到 Gimp 中，然后查看像素，该像素是粉红色的（#FFF8B5B5 => ARGB）。所以甚至没有一个颜色通道是相同的！

这怎么可能？B8G8R8A8_UNorm 到底是什么意思？我怎样才能把它变成与普通图像处理程序使用的格式相同的格式？（即，本例中的 R = F8、G = B5、B = b5、A = FF）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:32:43.203

不，您以错误的顺序查看它。它去：

```
8-bit Blue, 8-bit Green, 8-Bit Red, 8-bit Alpha. 
```

你会扭转这个得到：

```
3F 6F 52 FB
^A ^R ^G ^B 
```

在 C# 中：

```
Color c = Color.FromArgb(0x6F, 0x52, 0xFB); // Pink.
                          ^R     ^G    ^B 
```

这导致#FF6F52FB，这也与 Gimp 不同。我将假设`UNorm`标志对此进行了微小的调整。也许它会稍微减轻它。

它不是完全粉红色的……而是一种奇怪的粉红色。

# wpf - WPF 窗口装饰命名法

> ID：14616953
> 
> 赞同：0
> 
> 时间：2013-01-31T01:22:57.710
> 
> 标签：wpf, nomenclature

Winforms 可以打开和关闭控制框、最大化和最小化按钮。我似乎无法找到等效的属性来控制 WPF 中的窗饰。什么是正确的命名法，以便我可以在 msdn 中查找这些内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:43:56.803

您可以通过设置`ResizeMode`窗口的

例如：

```
ResizeMode="NoResize" 
or
WindowStyle="ToolWindow" 
```

将不显示最小化/最大化按钮

# c# - 保存表单状态，然后以相同状态打开它

> ID：14616958
> 
> 赞同：5
> 
> 时间：2013-01-31T01:23:39.937
> 
> 标签：c#, winforms, visual-studio-2010, savestate

我有一个`winforms`包含 3 个按钮的小程序。到目前为止，该程序允许用户通过单击相应的按钮来更改另一个按钮的颜色，而第三个按钮还没有做任何事情。我想要做的是让用户保存对表单所做的更改（保存表单状态）。因此，当表单重新打开时，它会以与保存时相同的状态打开。

我希望我清楚我在追求什么

这是表单的可视化：

![在此处输入图像描述](../Images/aba9c6df90853604b7c14108a6aa88c3.png)

如果有任何帮助，我到目前为止的代码：

```
public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            btnToColor.Text = "";
        }

        int c = 0;
        private void btnColorSwap_Click(object sender, EventArgs e)
        {
            if (c == 0)
            {
                btnToColor.BackColor = Color.Yellow;
                c++;

            }

            else if (c == 1)
            {
                btnToColor.BackColor = Color.YellowGreen;

                c++;
            }

            else if (c == 2)
            {
                btnToColor.BackColor = Color.LimeGreen;

                c = 0;
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T02:12:41.140

这对您来说可能/可能不会更容易。

首先创建一个类来保存你的状态：

```
public class MyFormState {
    public string ButtonBackColor { get; set; }
} 
```

现在，`Form`用这个对象为你声明一个成员：

```
public partial class Form1 : Form {
    MyFormState state = new MyFormState(); 
```

在表单加载时，检查配置是否存在，然后加载它：

```
private void Form1_Load(object sender, EventArgs e) {
    if (File.Exists("config.xml")) {
        loadConfig();
    }

    button1.BackColor = System.Drawing.ColorTranslator.FromHtml(state.ButtonBackColor);
}

private void loadConfig() {
    XmlSerializer ser = new XmlSerializer(typeof(MyFormState));
    using (FileStream fs = File.OpenRead("config.xml")) {
        state = (MyFormState)ser.Deserialize(fs);
    }
} 
```

当您的表单关闭时..保存配置：

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e) {
    writeConfig();
}

private void writeConfig() {
    using (StreamWriter sw = new StreamWriter("config.xml")) {
        state.ButtonBackColor = System.Drawing.ColorTranslator.ToHtml(button1.BackColor);
        XmlSerializer ser = new XmlSerializer(typeof(MyFormState));
        ser.Serialize(sw, state);
    }
} 
```

然后您可以将成员添加到您的状态类，它们将被写入 config.xml 文件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-31T01:34:12.157

如果您查看项目属性页面，您可以添加一个设置文件。

要使用代码中的设置，您可以执行以下操作：

```
Properties.Settings.Default.SettingName 
```

请记住，这些设置是本地的，需要在每台机器上指定

示例代码：

```
 private void Form1_FormClosing(object sender, FormClosingEventArgs e)
    {
        Properties.Settings.Default.btn1 = button1.UseVisualStyleBackColor ? Color.Transparent : button1.BackColor;
        Properties.Settings.Default.btn2 = button1.UseVisualStyleBackColor ? Color.Transparent : button2.BackColor;
        Properties.Settings.Default.btn3 = button1.UseVisualStyleBackColor ? Color.Transparent : button3.BackColor;
    }

    private void Form1_Load(object sender, EventArgs e)
    {

        if (Properties.Settings.Default.btn1 != Color.Transparent) button1.BackColor = Properties.Settings.Default.btn1;
        if (Properties.Settings.Default.btn2 != Color.Transparent) button1.BackColor = Properties.Settings.Default.btn2;
        if (Properties.Settings.Default.btn3 != Color.Transparent) button1.BackColor = Properties.Settings.Default.btn3;
    } 
```

这是 MSDN 上设置类的链接 [http://msdn.microsoft.com/en-us/library/aa730869(VS.80).aspx](http://msdn.microsoft.com/en-us/library/aa730869(VS.80).aspx)

* * *

## 属性页

![属性设置页面](../Images/89cfc97d84fd67fdafb72972a25d871a.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-10T15:16:24.863

通常在存储用户界面设置时，标准方法是使用 XML 文件保存或加载设置我做了这个例子，使用 xml 保存用户界面组件希望它有用

[https://www.dropbox.com/s/1j1qbe7udqxizr6/4.XMLConfigurationEditor.rar?dl=0](https://www.dropbox.com/s/1j1qbe7udqxizr6/4.XMLConfigurationEditor.rar?dl=0)

# stata - 为时间设置负数到正数

> ID：14616960
> 
> 赞同：-1
> 
> 时间：2013-01-31T01:23:57.360
> 
> 标签：stata

如果有一个包含月份的数据集，并且每个人都有不同的开始工作月份。例如：

```
person         date       date_started      date_count
  Tim        1/1/2000       3/1/2000           -2
  Tim        2/1/2000       3/1/2000           -1
  Tim        3/1/2000       3/1/2000            0
  John       1/1/2000       7/1/2000           -6
  John       2/1/2000       7/1/2000           -5
  John       3/1/2000       7/1/2000           -4
  John       4/1/2000       7/1/2000           -3
  John       5/1/2000       7/1/2000           -2
  John       6/1/2000       7/1/2000           -1
  John       7/1/2000       7/1/2000            0
  John       8/1/2000       7/1/2000            1
  John       9/1/2000       7/1/2000            2
  John      10/1/2000       7/1/2000            3
  Mary       3/1/2000       3/1/2000            0
  Mary       4/1/2000       3/1/2000            1 
```

获取`date_count`列的最有效方法是什么？我还有一列在您的第一个月为 1，否则为 0。我宁愿用它来制作`date_count`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:06:07.567

我不明白这里有什么困难。这个问题对我来说似乎解释得不好。

1.  您提到了月份，但您的示例显示了每日日期，因此月份在问题中的作用是一个谜。

2.  您想要的变量只是两个每日日期之间的差异。只要您有两个每日日期变量（Dimitriy 解释了如何从字符串日期中获取这些变量），它只是一个减法。

（后来添加）我的不确定性表明，当一个人在国际列表上假设当地惯例是普遍的时会发生什么。有两种约定很容易混淆，将日期显示为日/月/年，将日期显示为月/日/年。显然您正在使用第二个约定。如果是这样，问题是使用`mofd()`;从每日日期转换为每月日期 然后正如所说，这是一个减法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T04:42:02.757

我不知道这是否是最佳方式，但我认为它应该有效：

```
/* convert your dates to Stata's date format from strings */
gen date2=daily(date,"MDY");
gen date_started2=daily(date_started,"MDY");
format date2 date_started2 %td;

/* this is the main code */
gen before = date_started2>date2;
bys person before: egen date_count2 = rank(abs(date_started2 - date2));
replace date_count2 = date_count2 - 1 if before==0;
replace date_count2 = -date_count2 if before==1;
drop before; 
```

**编辑：**

过失。我完全误解了你的问题，意思是你想要一个倒计时来开始每个人观察事件的开始日期。你实际上想要一些更简单的东西：

> gen date_count2=mofd(daily(date,"MDY")) - mofd(daily(date_started,"MDY"));

这假设您正在使用作为字符串变量存储的 date 和 date_started。daily() 转换为 Stata 日期格式，mofd() 转换为日历月。那么这只是区别。

# macos - 在 Mac 上使用 Skype API 自动将来电添加到会议中

> ID：14616961
> 
> 赞同：1
> 
> 时间：2013-01-31T01:24:04.460
> 
> 标签：macos, api, automation, applescript, skype

我正在尝试编写一个 AppleScript，它将启动 Skype 并呼叫在线并在会议开始后自动添加来电。我被困在这个实现的最后一部分（在下面的代码中加星标）。重复循环中的代码。

您能否帮我实现一种方法，将来电添加到现有的电话会议中，而无需保持通话？

提前致谢！

我的系统是 Mac OS X Lion (10.7.5)

PS。到目前为止，我从其他人的作品中得到了很多帮助。这就是我能做这么多的方式。

```
tell application "System Events"
    set powerCheck to ((application processes whose (name is equal to "Skype")) count)
    if powerCheck = 0 then
        my launch_skype()
    else if powerCheck = 1 then
        return
    end if
end tell

## FUNCTIONS ##
on dismiss_skype_api_security()
    tell application "System Events" to tell process "Skype"
        set window_name to "Skype API Security"
        set ok_text to "OK"
        set radio_text to "Allow this application to use Skype"
        tell application "System Events" to tell process "Skype"
            if window window_name exists then
                click radio button radio_text of radio group 1 of window window_name
                delay 2
                click button ok_text of window window_name
            end if
        end tell
        delay 1
    end tell
end dismiss_skype_api_security

on launch_skype()
    tell application "Skype"
        set statusList to {"RINGING", "ROUTING", "UNPLACED"}
        delay 2
        try
            set status to "COMMAND_PENDING"
            repeat until status is not equal to "COMMAND_PENDING"
                set status to send command "GET USERSTATUS" script name "auto call"
                if status is equal to "COMMAND_PENDING" then
                    my dismiss_skype_api_security()
                end if
            end repeat

            #### CALL ONLINE CONTACTS + AUTO ACCEPT ####
            activate
            delay 1
            set OnlineContacts to my get_online_contacts()
            delay 1
            send command "CALL " & OnlineContacts script name "auto call"
            delay 2

            -- Set first call ID as master
            set firstCall to send command "SEARCH ACTIVECALLS" script name "auto call"
            set firstCallID to last word of firstCall -- What if the last guy leaves the call ?!?!?
            set firstStatus to send command "GET CALL " & firstCallID & " STATUS" script name "auto call"
            if statusList contains the last word of firstStatus then -- First Call
                set MasterCallID to firstCallID
            end if

          **set callID to ""
            repeat until callID is "CALLS"
                delay 3
                set status to send command "GET CALL " & firstCallID & " STATUS" script name "auto call"
                if the last word of status is "RINGING" then --Someone is calling to join the call
                    set calls to send command "SEARCH ACTIVECALLS" script name "auto call"
                    set callID to last word of calls
                    --send command "ALTER CALL " & callID & " JOIN_CONFERENCE " & mainCallID script name --"auto call"
                end if
            end repeat**

        on error number -2753
            quit
        end try
    end tell
end launch_skype

### GET ONLINE CONTACTS ###
on get_online_contacts()
    global OnlineFriends
    set OnlineFriends to {}
    tell application "Skype"
        set SkypeStatus to send command "GET CONNSTATUS" script name "auto call"
        if SkypeStatus is "CONNSTATUS ONLINE" then
            set AppleScript's text item delimiters to " "
            set Friends to send command "SEARCH FRIENDS" script name "auto call"
            set Friends to my ReplaceString(Friends, " ", ",")
            set Friends to my ReplaceString(Friends, ",,", ",")
            set FriendsList to my SplitList(Friends, ",")
            set NumFriends to number of items in FriendsList
            repeat with i in FriendsList
                if (i begins with "DISABLEDxmpp:") or (i begins with "USERS") or (i begins with "ugur") or (i is "echo123") or (i begins with "esr") or (i begins with "ayt") or (i begins with "Zaf") then
                else
                    set FriendStatus to send command "GET USER " & i & " ONLINESTATUS" script name "auto call"
                    if text item 4 of FriendStatus is "ONLINE" then
                        set aUser to i
                        set aUser to my JoinList(aUser, " ")
                        set end of OnlineFriends to aUser
                    end if
                end if
            end repeat
            if (count OnlineFriends) > 0 then
                set OnlineFriends to my JoinList(OnlineFriends, ", ")
            else
                set beginning of OnlineFriends to "No Skype Friends online at this time."
            end if
        else
            set beginning of OnlineFriends to "Skype is offline."
        end if
    end tell
    return OnlineFriends
end get_online_contacts

on JoinList(l, del)
    set RetVal to ""
    set OldDel to AppleScript's text item delimiters
    set AppleScript's text item delimiters to del
    set RetVal to l as string
    set AppleScript's text item delimiters to OldDel
    return RetVal
end JoinList

on SplitList(t, del)
    set RetVal to {}
    set OldDel to AppleScript's text item delimiters
    set AppleScript's text item delimiters to del
    set RetVal to every text item of t
    set AppleScript's text item delimiters to OldDel
    return RetVal
end SplitList

on ReplaceString(theText, oldString, newString)
    set OldDel to AppleScript's text item delimiters
    set AppleScript's text item delimiters to oldString
    set tempList to every text item of theText
    set AppleScript's text item delimiters to newString
    set theText to the tempList as string
    set AppleScript's text item delimiters to OldDel
    return theText
end ReplaceString 
```

# c - 为什么没有正确传递 ROM 字符串？

> ID：14616962
> 
> 赞同：2
> 
> 时间：2013-01-31T01:24:15.133
> 
> 标签：c, microchip, mplab, c18

我正在尝试将字符串传递给函数。我已经阅读了很多关于 C18 中 RAM/ROM 字符串的内容，我的代码似乎还可以，但它不起作用。我的功能是这样的：

```
int setBluetoothName (static const rom char *name){
    unsigned int n = 0, k = 0;
    char string[27] = {0};    // ATNAME + 20 caracteres de nombre + EOF
    char command[27] = {0};
    _bit state = USART_INT;

    // Deshabilito interrupciones del USART
    USART_INT_DISABLE;
    strcpypgm2ram(&string, &name);

    // Numero de caracteres del nombre
    for (; string[n] != 0x00 ; ++n);
    if(n > 19) return LENGTH_ERROR;     // si me pase de 20 letras es muy largo

    // Configuro el nombre del Bluetooth
    printf("ATNAME%s", &string); 
```

我以这种方式使用它：

```
setBluetoothName("Brazo"); 
```

在 Proteus 中，我看到只有字母“B”被传递，当我将 ROM 字符串复制到 RAM 时，它简直是一团糟（见附图）。printf() 的输出只是 ATNAME，没有打印字符串。

我正在使用 C18 v4.40 和 MPLABX v1.41。非常感谢您的帮助。

![在此处输入图像描述](../Images/8c334a0f9b399eefd1a29c3a9e68debb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:30:31.713

尝试：

```
strcpypgm2ram(string, name); 
```

和

```
printf("ATNAME%s", string); 
```

当你声明一个数组时

```
char string[27] = {0}; 
```

那么变量*string*指的是数组第一个元素的地址，当你声明一个参数如

```
int setBluetoothName (static const rom char *name) 
```

那么name指的是字符串所在的地址。

当您在其中添加 & 时，您将获得包含数据地址的变量的地址。

# api - API 对象版本控制

> ID：14616969
> 
> 赞同：2
> 
> 时间：2013-01-31T01:25:28.377
> 
> 标签：api

我正在构建一个 API，但我有一个关于如何表示对象的问题。

想象一下，我们有一个系统，其中包含具有大量属性的文章。其中一些属性很复杂，例如文章的作者指的是另一个对象。我们有一个获取系统中所有文章的 URL，还有一个获取特定文章的 URL。

我的第一个实现方法是创建同一个对象 Article 的两个表示，因为当您请求所有文章时，您不会检索有关文章的所有信息，而是仅检索标题、日期和作者姓名（而不是整个 Author 对象），不包括标签或内容等其他属性。这背后的想法是尝试使所有文章的响应更轻松。

现在我要去客户端，例如，我决定为 Android 实现一个 SDK。所以第一步是创建对象来存储我从 API 检索到的信息。现在出现了一个问题，因为我想定义 Article 对象，但我需要它的两个版本，它不仅更难实现，而且更难使用。

所以我的问题是，在定义 API 时，拥有同一个对象的多个版本（可能是轻量版和完整版）以在发送请求结果但生成更困难的结果时节省一些带宽是一种好习惯吗？使用服务，还是不值得，您应该始终检索相同版本的对象，产生更重的响应但使服务更易于使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:09:48.600

我在一家也处理文章的公司工作，我们也有一个 REST API 来公开数据。

我认为你在正确的轨道上，但我什至会更进一步。这些是 API 中对大型实体的潜在三个调用：

1.  **索引**。对于文章，这类似于 /articles。它只返回文章 ID 列表。您可以添加参数来过滤、排序等。它非常轻量级，我发现它非常有用。

2.  **标题/迷你/轻型版本**。这些只是您认为可以满足最广泛用例的关键领域。对我们来说，我们有很多用例，我们可能希望显示前 5 篇文章，在这些情况下，只有标题、作者，可能还有出版日期。这些字段属于“标题”文章或“轻”文章。这对于 AJAX 调用特别有用，因为您不想返回整篇文章（对我们来说，对象非常大。）

3.  **完整版**。这是完整的文章。所有文本/段落/图像参考 - 一切。这是一个沉重的电话，但你将保证得到任何可用的东西。

然后只需要纪律就可以让物体保持原样。理想情况下，用户能够获得 (2) 中描述的版本以通过网络节省时间，但如果必须，他们会选择 (3)。

我考虑过一种动态的方式来只返回人们感兴趣的字段，但这将是很多实现。基本上，这个想法是让用户转到 /article，然后向他们展示一个示例 JSON 结果。然后用户可以点击他们想要返回的字段并获得一个令牌。然后他们将令牌作为参数传递给 API，然后 API 就会知道要返回哪些字段。

创建动态架构。很多工作，我从来没有解决它，但你可以看到，如果你想有创意，你可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:54:33.837

考虑您的数据（对于一个 API 客户端）是否发生了很大变化。如果可以在客户端缓存数据，那将通过减少与 API 的联系来提高性能。否则，我认为拥有轻量级和全尺寸对象类型（或者更像是同一对象类型的两个视图）是个好主意。

在客户端中，您应该将其实现为具有所有属性的一种对象类型（以使其保持干燥；不要重复自己）。获取轻量级对象时，您只存储一些属性，其余为 null（或给定属性类型的类似“未定义”值）。应该可以确定是否加载了所有属性子集或仅加载了部分属性子集。

在给定模型（即作者）的客户端中发出 API 请求时，您应该明确说明是否需要轻量级或全尺寸对象以及缓存数据是否可接受。这使得控制 UI 层中的数据成为可能。例如，作者列表可能只需要显示姓名和与该作者相关的文章数量。显示作者屏幕时，需要更多属性。此外，如果使用缓存数据，您应该为用户提供一种刷新它的方法。

当应用程序工作时，您可以开始实施优化，例如：如果已经知道完整的 scala 数据，则不要获取轻量级数据；如果存在最近的缓存副本，则根本不要获取数据。我认为最好的还是看实际用例，以对用户最高的价值来提升性能。

# jira - 我可以在状态为“已关闭”的 JIRA 问题上记录工作吗？

> ID：14616975
> 
> 赞同：2
> 
> 时间：2013-01-31T01:27:07.533
> 
> 标签：jira, jira-agile

我可以就状态为“已关闭”的问题记录工作吗？我在 Sprint“敏捷”区域，将一些问题从“进行中”拖到“完成”。我忘了实际记录工作时间，期望“估计”时间只是传播到“记录工作”。重新打开问题很麻烦，并且会创建不必要的通知线索。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T14:24:14.250

**要在问题关闭时允许问题编辑：**

转到项目`Workflows`屏幕并将其下载为 XML 文件。

然后编辑 XML 文件并在`Closed`步骤中：

```
 <step id="6" name="Closed">
      <meta name="jira.status.id">6</meta>
      <meta name="jira.issue.editable">false</meta>
      <actions>
        <common-action id="3" />
      </actions>
    </step> 
```

改变

```
<meta name="jira.issue.editable">false</meta> 
```

到

```
<meta name="jira.issue.editable">true</meta> 
```

您也可以标记或删除此行，但保留它以备将来需要是有帮助的。

最后，将编辑后的工作流上传回 Jira。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-30T11:46:08.560

您甚至可以跳过“导出到 xml”部分。在工作流编辑屏幕中，您可以直接单击将鼠标悬停在“关闭”状态上时出现的齿轮图标并加厚“问题可编辑”标志。

请注意，您必须为此设置自定义工作流程，因为 JIRA 默认工作流程不可编辑。

# scala - 传递空 List 参数正在调用 IndexOutOfBoundsException

> ID：14616976
> 
> 赞同：0
> 
> 时间：2013-01-31T01:27:11.493
> 
> 标签：scala

我正在尝试使用合并排序在 Scala 中进行倒数计数并且无法取得进展，因为其中一种方法是抛出 IndexOutOfBoundsException 以将空列表作为参数传递。

```
def sortAndCountInv(il: List[Int]): Int = {

def mergeAndCountInv(ll: List[Int], rl: List[Int]): (List[Int], Int) = {
  println("mergeAndCountInv : ")
  if (ll.isEmpty && !rl.isEmpty) (rl, 0)
  if (rl.isEmpty && !ll.isEmpty) (ll, 0)
  if (ll.isEmpty && rl.isEmpty) (List(), 0)
  if (ll(0) <= rl(0)) {

    val x = mergeAndCountInv(ll.tail, rl)//*passing empty list, ll.tail invoking IndexOutOfBoundsException*//

    (ll(0) :: x._1, x._2)
  } else {
    val y = mergeAndCountInv(ll, rl.tail)
    (rl(0) :: y._1, 1 + y._2)
  }
}

def sortAndCountInv(l: List[Int], n: Int): (List[Int], Int) = {
  if (n <= 1) (l, 0)
  else {
    val two_lists = l.splitAt(n / 2)
    val x = sortAndCountInv(two_lists._1, n / 2)
    val y = sortAndCountInv(two_lists._2, n / 2)
    val z = mergeAndCountInv(x._1, y._1)
    (z._1, x._2 + y._2 + z._2)
  }
}

val r = sortAndCountInv(il, il.length)
println(r._1.take(100))
r._2 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T04:30:11.263

这种事情通常使用模式匹配更清楚地表达：

```
 def mergeAndCountInv(ll: List[Int], rl: List[Int]): (List[Int], Int) =
    (ll, rl) match {
      case (Nil, Nil) => (Nil, 0)

      case (Nil, _)   => (rl, 0)

      case (_, Nil)   => (ll, 0)

      case (ll0 :: moreL, rl0 :: moreR) =>
        if (ll0 <= rl0) {
          val x = mergeAndCountInv(moreL, rl)
          (ll0 :: x._1, x._2)
        }
        else {
          val y = mergeAndCountInv(ll, moreR)
          (rl0 :: y._1, 1 + y._2)
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T01:34:00.333

当您检查左侧或右侧或两个列表是否为空时，我建议使用`else`in 。`mergeAndCountInv`因为不是返回，而是在计算中忽略一个元组。

# asp.net - 如果没有用户图像，则在剃刀中显示默认图像

> ID：14616978
> 
> 赞同：0
> 
> 时间：2013-01-31T01:27:52.030
> 
> 标签：asp.net, razor

此语句不起作用，如果没有上传图像，我想显示默认图像请帮助

```
 @if (latestrow.thumb == null)
                     {
                         <img src="~/Images/no-pic.gif"/>
                     }
                     else
                     {
                         <img src="@latestrow.thumb"/>
                     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T02:02:52.510

您的代码没有任何问题。假设 latestrow.thumb 为空，您将收到 no-pic.gif。

我唯一的猜测是 latestrow.thumb 有一些不是 null 的值。假设 thumb 的值可以是空白或 null （并假设它是一个字符串），也许使用这将是一种更好的方法：

```
@if (String.IsNullOrEmpty(latestrow.thumb)) 
```

如果这不起作用，请检查发送到视图的模型并查看该属性中的内容。有可能它填充了一些值，甚至可能是一个空格。

祝你好运。

# c++ - 关于外部链接和调用约定的 C++ 标准

> ID：14616979
> 
> 赞同：0
> 
> 时间：2013-01-31T01:27:58.463
> 
> 标签：c++, objective-c, extern, linkage

我已经阅读了最后一个 C++11 草案（n3337 - 它是最后一个吗？），我有一个关于我一直在研究的可能实现的问题。

假设我们有以下代码：

```
extern "Objective C" {
  class Object {
    public:
      static Object *alloc();
      Object *init();
  };
}; 
```

然后打电话

```
Object *x = Object::alloc()->init(); 
```

问题是我不明白是否允许编译器控制外部“X”块的调用约定：想法是“翻译”对 objc_msgSend(blablabla) 的调用 - 这是否符合标准，还是将其视为扩展（因为它不仅会修改符号名称，还会在此处修改复杂的“调用约定”）？当然，我可以通过创建一个称为 __thiscall 的弱函数来实现这一点，然后调用并返回该方法本身 - 但问题仍在继续，它是否符合要求？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:51:04.167

您描述的所有内容听起来都符合语言链接功能的意图。

班级成员被明确排除在`"C"`语言联系之外。根据标准 (C++11 §7.5/4) 中的示例，类成员声明中的函数指针类型、`extern`任何上下文中的声明以及所有其他函数声明都会继承封闭`extern "C" {}`块。除此之外，您还定义了一个语言链接，`"C"`但遵循它的例子并不令人惊讶，也许在`this`and之间有额外的映射`self`。

根据§7.5/2，要求是开放的：

> 有条件地支持使用除“C”或“C++”之外的*字符串文字，并具有实现定义的语义。*[注意：因此，具有实现未知的字符串文字的链接规范需要诊断。— end note ] [ 注意：建议字符串文字的拼写取自定义该语言的文档。例如，Ada（不是 ADA）和 Fortran 或 FORTRAN，取决于年份。——尾注]

您可以在大括号内切换到完全不同的语言，这样就可以了。（尽管从语法上讲，我认为所有内容都应该解析为 C++*声明*或*声明序列*。）

但是，据此，您应该使用`extern "Objective-C"`连字符，因为最终文档的标题是“Objective-C 编程语言”。

**编辑：**可以肯定的是，通过调用`objc_msgSend`不会影响标准指定的任何内容。它没有说明如何调用 C++ 函数。添加的中间函数只是机器级指令，超出了语言语义，与用于调用 Pascal、Fortran 等的特殊指令没有什么不同，例如通过改变堆栈上参数的顺序。我并不是要将您的方案与“在大括号内切换到完全不同的语言”进行比较，只是为了强调有足够的空间。

以`extern "C"`标准中的规范为例，它通过从根本上改变 ODR 规则打破了很多事情，因为 C 不需要支持任何修改。所以你的计划被允许*至少*打破那么多。

# node.js - Homebrew 安装问题

> ID：14616981
> 
> 赞同：10
> 
> 时间：2013-01-31T01:27:59.667
> 
> 标签：node.js, npm, homebrew, yeoman

我在安装 brew 时遇到了一些问题。所以我做了以下事情：

卸载自制软件：

> $ rm -rf /usr/local/Cellar /usr/local/.git && brew cleanup

* * *

重新安装自制软件：

> $ ruby​​ -e "$(curl -fsSkL raw.github.com/mxcl/homebrew/go/install)"

* * *

> $酿造更新
> 
> 已经是最新的了。
> 
> $酿造医生
> 
> 您的系统正在酝酿中。

* * *

尝试运行任何安装 & 我得到以下输出：

> $ brew 安装节点
> 
> 错误：权限被拒绝 - /Library/Caches/Homebrew/Formula/node.brewing

* * *

这里发生了什么？这也给我使用了我非常想使用的 npm 和 yeoman 的问题:(

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-31T01:34:18.897

`sudo`您是否可能与其他用户或以前的用户一起安装了 brew ？

检查 的权限`/Library/Caches/Homebrew`，并通过更改其所有者或权限来强制它对您的用户可写。

您也可以尝试使用[https://gist.github.com/1173223](https://gist.github.com/1173223)之类的方式进行卸载，然后再次尝试安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-21T15:43:37.347

这件事告诉我告诉你将安装命令更新为

```
ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)" 
```

# php - php file_get_contents() str_replace 用 ""

> ID：14616982
> 
> 赞同：0
> 
> 时间：2013-01-31T01:28:24.843
> 
> 标签：php, function, str-replace

我在使用 Google 的 Currency api 时遇到问题。我收到的数据包含：

`{lhs: "1000 Euros",rhs: "111 844.933 Serbian dinars",error: "",icc: true}`

其中“111 844.933”实际上是“111* *& nbsp;* *844.933”。

但是，我找不到用空字符串替换“ **＆nbsp;** ”的方法，所以我的字符串将是“111844.933”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:17:14.383

您可以使用[str_replace()](http://php.net/manual/en/function.str-replace.php)或[preg_replace()](http://php.net/manual/fr/function.preg-replace.php)。

试试这个代码：

```
<?php
    $string = '{lhs: "1000 Euros",rhs: "111 844.933 Serbian dinars",error: "",icc: true}';
    $find = array("&nbsp"); 
    $replace = array("");
    $string = str_replace($find, $replace, $string);
    echo $string;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T01:33:56.823

[`str_replace()`](http://us3.php.net/manual/en/function.str-replace.php)可以这样做：

```
echo str_replace('&nbsp;', '', '{lhs: "1000 Euros",rhs: "111&nbsp;844.933 Serbian dinars",error: "",icc: true}'); 
```

[看到它在行动](http://codepad.viper-7.com/zzrhDn)

# css - 使用 columns 属性时，margin-right 不起作用

> ID：14616983
> 
> 赞同：1
> 
> 时间：2013-01-31T01:28:26.267
> 
> 标签：css

我正在尝试应用列 css，以便我可以水平显示页面中的内容。但是当我在 body 上设置 padding-right 时。我发现它不起作用？为什么？此外，有时，最后会有空白列

```
body{
height: 200px;
text-align: center;
-webkit-column-width: 608px;
-webkit-column-gap: 160px;
padding: 80px 80px 100px 80px; 
```

}

更新为回复@jimjimmy1995

```
<html>
<style type="text/css">
.div{
height: 344px;
text-align: center;
-webkit-column-width: 608px;
-webkit-column-gap: 160px;
}   
body{
margin: 80px 80px 100px 80px;
}
</style>
</head>
<body>
<div class='div'>
<p> blablablabla. </p>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:47:44.610

我个人不会将 column 属性用于布局，因为它旨在使用包含内联元素和文本的元素而不是块元素。有几种方法可以让您实现类似的效果，例如使用`display:inline;`or `float:left`。

在回答您的问题时，您可能需要指定正文的宽度。另请注意，您的列宽相当大，因此可能不适合该行的两列：。您的样式中两列的总宽度`80px+608px+160px+608px+80px=1536px`比大多数人的显示器都要大。

我建议创建一个 jsfiddle，这样我们就可以确切地看到问题所在。

# mysql - 在 MySQL 中将数字限制为最大值

> ID：14616984
> 
> 赞同：4
> 
> 时间：2013-01-31T01:28:28.170
> 
> 标签：mysql, sql, database

是否有内置函数或其他方式来限制 MySQL 中数字的值？

例如，假设我有一个包含以下行的表：

```
score
=====
5
10
20
50
3
15 
```

我正在寻找某种类型的查询...

```
SELECT NUMBER_LIMITER(score, 10) FROM ScoresTable 
```

...这将返回以下结果...

```
score
=====
5
10
10
10
3
10 
```

如果没有，我会写一个函数。只是希望可能有一些内置的东西，因为性能对于这个项目非常重要。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T01:29:38.873

```
SELECT LEAST(score, 10) FROM ScoresTable 
```

[http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_least](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_least)

# python - 如何在 Python 中规范化两个向量？

> ID：14616986
> 
> 赞同：-2
> 
> 时间：2013-01-31T01:28:39.247
> 
> 标签：python, vector, normalization

创建一个函数 MeanDistance(v1,v2)，它返回元素介于 0 和 1 之间的两个向量之间的归一化距离：如果向量相同，则该函数应返回 0，如果它们最大不同，则返回 1。该函数应用于计算 v1 和 v2 之间的距离 d。

我该怎么做呢？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:30:30.740

我不认为问题是要求您对*向量*进行归一化。它要求您标准化*距离*。为此，请使用您最喜欢的距离度量（[欧几里得](http://en.wikipedia.org/wiki/Euclidean_distance)、[曼哈顿](http://en.wikipedia.org/wiki/Manhattan_distance)等）计算两个向量之间的距离，然后除以表示可能的最大距离的常数。要使用的距离度量取决于您的应用程序（我作为示例给出的那些是最常见的）。常数的值还取决于您的应用程序（特别是坐标空间的限制，所有维度似乎都是 0 和 1）。

# ruby-on-rails - 使用“with”和索引属性思考 Sphinx 搜索

> ID：14616987
> 
> 赞同：1
> 
> 时间：2013-01-31T01:28:40.197
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, sphinx, thinking-sphinx

**更新：**

好的，所以我不再收到错误消息，但我没有得到任何结果（即使只有一个搜索选项）。

我将 has 子句添加到我的索引列表中：

```
 define_index do
    has bar_profiles(:day), :as => :days
    indexes bar_profiles.budget, :as => :budget_tags
    .
    .
  end 
```

所以我的搜索是：

```
bars = Bar.search(search_options) 
```

和

```
search_options = {:conditions=>{:budget_tags=>"LOW BUDGET"}, :with=>{:days=>"thursday"}, :page=>1, :per_page=>20} 
```

bar_profiles 有预算、经验、标签、日期等行。

Bar 有许多 bar_profiles（可能每天 1 个）

我想做的是使用思考狮身人面像搜索（在条形模型中）将用户选择的预算、经验、标签标准与日期与“今天”（当天）匹配的 bar_profile 相匹配。

这是我完成这个应用程序所要做的最后一件事，我正在拔头发，因为我找不到任何关于如何正确设置它的例子......

如果您有任何见解，请发布它，任何帮助。谢谢。

* * *

起初我认为我的问题与[此](https://stackoverflow.com/questions/10469864/deep-association-and-sphinx-index-with-thinking-sphinx)类似，但多了一层抽象，但我认为我的问题在于搜索选项而不是索引。

首先让我声明，我一直在尝试使用思维狮身人面像修复以前的组实现时遇到了更糟糕的情况。我终于让项目 90% 工作，最后 10% 处理能够获得正确的过滤器进行检查。

这是一个简短的概述。该应用程序有 bar 和 bar_profiles（在连接到这 2 个和用户的许多其他表中，但它们不是理解这个问题所必需的。）对于每个 bar 的一周中的每一天都可以有一个 bar_profile。

所以在 bar_profile 模型中有：

```
belongs_to :bar 
```

在酒吧里有：

```
has_many :bar_profiles 
```

接下来是 bar 中的索引（由以前的开发人员编写）：

```
 define_index do
    # name is a reserved keyword so we need to specify it as a symbol to work
    indexes :name
    indexes tags
    indexes bar_profiles.day, :as => :day
    indexes bar_profiles.tags, :as => :daily_tags
    indexes bar_profiles.budget, :as => :budget_tags
    indexes bar_profiles.experience, :as => :experience_tags
    set_property :delta => true
  end 
```

我遇到的问题是这个当前的实现没有将搜索正确地限制在当天。它似乎不是检查酒吧的当前日期配置文件，而是检查所有的酒吧配置文件。

所以我在方法开始时设置了当前日期：

```
today = (Time.now + Time.zone_offset('EST')).strftime("%A") 
```

然后我认为它需要像下面这样。[我通过 pat](http://pat.github.com/ts/en/searching.html#filters)引用了这篇关于使用 'with' 的帖子，但我不确定我是否弄乱了语法（因为我收到了一个错误）：

```
search_options = {:conditions => {}, :with => {:day=>today}, :page => 1, :per_page => algorithm.results_per_page} 
```

然后我使用这些搜索选项：

```
search_options[:conditions][:experience_tags] = options[:experience] unless options[:experience].blank?
budget = combine_budgets(options[:budget])
search_options[:conditions][:budget_tags] = budget unless budget.blank? 
```

但是当我尝试运行搜索时，我在开发日志中得到了这个：

```
^^^^ ERROR! Reason: index bar_core,bar_delta: no such filter attribute 'day' 
```

现在我对此感到非常困惑，因为 :day 的索引设置如上所示......我不确定“过滤器属性”是否与索引属性不同。如果有人可以对此提供一些见解，将不胜感激（看着你@pat）。

这是这个应用程序的最后一个问题，所以如果有人可以帮助我，我将非常感激。

谢谢，

艾伦

# objective-c - cocos2d中设置精灵的边界框

> ID：14616989
> 
> 赞同：0
> 
> 时间：2013-01-31T01:28:47.903
> 
> 标签：objective-c, cocos2d-iphone

我的场景中有三个精灵。我必须制作一个触摸事件，其中玩家可以拖动其中一个精灵。我的问题是这些精灵非常薄，每当我尝试拖动其中一个时，边界框看起来非常大，所以即使我触摸空白区域并拖动，精灵也会移动。这就是我试图做到的方式。

```
 NSSet *allTouch = [event allTouches];
    UITouch *touch = [[allTouch allObjects]objectAtIndex:0];
    CGPoint loc = [touch locationInView:[touch view]];
    loc = [[CCDirector sharedDirector]convertToGL:location];

    //Swipe Detection - Beginning point
    beginTouch = location;

    for(int i = 0; i < [objArray count]; i++)
    {
        CCSprite *sprite = (CCSprite *)[objArray objectAtIndex:i];

        CGRect spriteRect = CGRectMake(sprite.position.x - (sprite.contentSize.width/2), sprite.position.y - (sprite.contentSize.height/2), sprite.contentSize.width, sprite.contentSize.height);

    if(CGRectContainsPoint(spriteRect, location))
    {
        //actions here
    }
} 
```

如何将边界框设置为与精灵的大小完全相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T03:35:19.730

你可以这样做：

```
 CCSprite * sprite = [CCSprite spriteWithFile:@"sprite.png"];

    CGRect boundingBox = sprite.boundingBox; 
```

但是，如果您的图像文件包含精灵周围的透明空间，那也将成为边界框的一部分。

# python - 查找列表中最不常见的元素

> ID：14616990
> 
> 赞同：5
> 
> 时间：2013-01-31T01:28:54.100
> 
> 标签：python, list

我想在大量文本中生成一个最不常用词的有序列表，其中最不常用的词首先出现，以及一个指示它在文本中出现次数的值。

我从一些在线期刊文章中抓取文本，然后简单地分配和拆分；

```
article_one = """ large body of text """.split() 
=> ("large","body", "of", "text") 
```

似乎正则表达式适合接下来的步骤，但是对于编程来说，我并不精通 - 如果最好的答案包括正则表达式，有人可以指出我除了 pydoc 之外的一个好的正则表达式教程吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T01:42:21.190

带有 defaultdict 的更短/更简单的版本怎么样，Counter 很好，但需要 Python 2.7，这适用于 2.5 及更高版本:)

```
import collections

counter = collections.defaultdict(int)
article_one = """ large body of text """

for word in article_one.split():
    counter[word] += 1

print sorted(counter.iteritems(), key=lambda x: x[::-1]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-08T15:07:23.407

查找列表中最不常见的元素。根据[Collections 模块中的 Counter 类](https://docs.python.org/3/library/collections.html#collections.Counter)

```
c.most_common()[:-n-1:-1]       # n least common elements 
```

所以列表中最不常见元素的代码是

```
from collections import Counter
Counter( mylist ).most_common()[:-2:-1] 
```

两个最不常见的元素是

```
from collections import Counter
Counter( mylist ).most_common()[:-3:-1] 
```

[python-3.x](/questions/tagged/python-3.x "显示标记为“python-3.x”的问题")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T01:40:08.553

这使用了稍微不同的方法，但它似乎适合您的需求。使用[此答案](https://stackoverflow.com/a/613218/392143)中的代码。

```
#!/usr/bin/env python
import operator
import string

article_one = """A, a b, a b c, a b c d, a b c d efg.""".split()
wordbank = {}

for word in article_one:
    # Strip word of punctuation and capitalization
    word = word.lower().strip(string.punctuation)
    if word not in wordbank:
        # Create a new dict key if necessary
        wordbank[word] = 1
    else:
        # Otherwise, increment the existing key's value
        wordbank[word] += 1

# Sort dict by value
sortedwords = sorted(wordbank.iteritems(), key=operator.itemgetter(1))

for word in sortedwords:
    print word[1], word[0] 
```

输出：

```
1 efg
2 d
3 c
4 b
5 a 
```

在 Python >= 2.4 和 Python 3+ 中工作，如果您`print`将底部的语句括起来并更改`iteritems`为`items`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T02:52:07.463

如果您需要固定数量的最不常见单词，例如 10 个最不常见的单词，您可能需要使用计数器`dict`和 a的解决方案`heapq`，如 sotapme 的回答（与 WoLpH 的建议）或 WoLpH 的回答所建议的那样：

```
wordcounter = collections.Counter(article_one)
leastcommon = word counter.nsmallest(10) 
```

但是，如果您需要数量不限的单词，例如，出现次数少于 5 次的所有单词，一次运行可能是 6 个，下一次可能是 69105，那么您最好只对列表进行排序：

```
wordcounter = collections.Counter(article_one)
allwords = sorted(wordcounter.items(), key=operator.itemgetter(1))
leastcommon = itertools.takewhile(lambda x: x[1] < 5, allwords) 
```

排序比堆化花费更长的时间，但是使用 a 提取前 M 个元素`list`比 a快得多`heap`。从算法上讲，差异只是一些`log N`因素，所以常数在这里很重要。所以最好的办法就是测试。

[在 pastebin](http://pastebin.com/0JntxRbM)获取我的代码，以及`cat reut2* >reut2.sgm`在[Reuters-21578](http://www.daviddlewis.com/resources/testcollections/reuters21578/)语料库上制作的文件（没有对其进行处理以提取文本，因此这对于严肃的工作显然不是很好，但对于基准测试应该没问题，因为没有SGML 标签将是最不常见的……）：

```
$ python leastwords.py reut2.sgm # Apple 2.7.2 64-bit
heap: 32.5963380337
sort: 22.9287009239
$ python3 leastwords.py reut2.sgm # python.org 3.3.0 64-bit
heap: 32.47026552911848
sort: 25.855643508024514
$ pypy leastwords.py reut2.sgm # 1.9.0/2.7.2 64-bit
heap: 23.95291996
sort: 16.1843900681 
```

我尝试了各种方法来加速它们中的每一个（包括：`takewhile`围绕一个 genexp 而不是`yield`堆版本中的循环，弹出乐观批次`nsmallest`并丢弃任何多余的，制作一个`list`并排序，装饰-排序-取消装饰而不是一个键，`partial`而不是`lambda`等），但它们都没有超过 5% 的改进（有些使事情明显变慢）。

无论如何，这些比我预期的更接近，所以我可能会选择更简单、更易读的那个。但我认为 sort 也比 heap 好，所以……</p>

再一次：如果你只需要 N 最不常见的，对于合理的 N，我愿意打赌甚至不测试堆实现会赢。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T01:34:37.220

来自母舰的[现成答案。](http://docs.python.org/2/library/collections.html#counter-objects)

```
# From the official documentation ->>
>>> # Tally occurrences of words in a list
>>> cnt = Counter()
>>> for word in ['red', 'blue', 'red', 'green', 'blue', 'blue']:
...     cnt[word] += 1
>>> cnt
Counter({'blue': 3, 'red': 2, 'green': 1})
## ^^^^--- from the standard documentation.

>>> # Find the ten most common words in Hamlet
>>> import re
>>> words = re.findall('\w+', open('hamlet.txt').read().lower())
>>> Counter(words).most_common(10)
[('the', 1143), ('and', 966), ('to', 762), ('of', 669), ('i', 631),
 ('you', 554),  ('a', 546), ('my', 514), ('hamlet', 471), ('in', 451)]

>>> def least_common(adict, n=None):
.....:       if n is None:
.....:               return sorted(adict.iteritems(), key=itemgetter(1), reverse=False)
.....:       return heapq.nsmallest(n, adict.iteritems(), key=itemgetter(1)) 
```

显然适应套件：D

# physics - 如何使用欧拉积分计算当前速度

> ID：14616992
> 
> 赞同：-1
> 
> 时间：2013-01-31T01:29:06.403
> 
> 标签：physics, timedelta

我想知道我是否正确转换公式。我不确定。

我知道：

**力**=**质量*****加速度**

**加速度**= (**速度**- **previousVelocity** ) / **deltaTime**

**加速度**=**力**/**质量**

所以：

(**速度**- **previousVelocity** ) / **deltaTime** =**力**/**质量**

如果我知道要应用的力、质量、deltaTime 和 previousVelocity，将其转换为新的速度以进行欧拉积分？这个公式对吗？：

**速度**= (**力**/**质量*** **deltaTime** ) + **previousVelocity**

我觉得有什么不对或缺失，我需要真正的公式。

多谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:36:57.393

你写的是 dv/dt = f(t) (m=1) 上的 Forward Euler ... 即 v(n+1) = v(n) + f(n) * dt。

# assembly - 在 C++ 中为共享多线程程序实现“fetch_and_inc”操作

> ID：14616994
> 
> 赞同：0
> 
> 时间：2013-01-31T01:29:14.957
> 
> 标签：assembly, cross-compiling, alpha-cpu-architecture

我正在尝试为 Alpha 架构交叉编译 x86 多线程代码。我面临的唯一问题是`fetch_and_inc`操作的实现，因为它是作为 x86 的内联汇编函数实现的。因此，它有一些特定于 x86 的指令被交叉编译器直接复制到汇编代码中，然后交叉编译器尝试将它们汇编为目标代码，但它不识别这些指令。

我想我有两个选择：要么`fetch_and_inc`用 c++ 而不是汇编来实现操作，要么用等效的 Alpha 代码替换 x86 汇编代码。

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:17:38.750

我很确定您必须执行第二个建议的选项：“用等效的 alpha 代码替换 x86 汇编代码”。我挖出了这个关于如何在 Alpha CPU 上实现 fetch&inc 的解释：

[http://h71000.www7.hp.com/doc/82final/5841/5841pro_018.html#ldx_stx](http://h71000.www7.hp.com/doc/82final/5841/5841pro_018.html#ldx_stx)

您使用的是哪个编译器的版本？某些编译器具有高级原子内在函数。如果您的编译器支持这样的功能，那应该会大大简化此任务。