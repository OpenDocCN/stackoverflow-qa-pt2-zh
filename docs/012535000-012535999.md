# StackOverflow 问答 12535000-12535999

# xml - Scala - 从 xml 中完全删除命名空间

> ID：12535014
> 
> 赞同：6
> 
> 时间：2012-09-21T17:08:00.910
> 
> 标签：xml, scala

我有一些xml：

```
<item name="ed" test="true"
  xmlns="http://www.somenamespace.com"
  xmlns:xsi="http://www.somenamespace.com/XMLSchema-instance">
  <blah>
     <node>value</node>
  </blah>
</item> 
```

我想通过这个 xml 并完全删除所有命名空间，无论它们在哪里。我将如何用 Scala 做到这一点？

```
 <item name="ed" test="true">
  <blah>
     <node>value</node>
  </blah>
</item> 
```

我一直在查看 RuleTransform 并复制属性等，但我可以删除命名空间或删除属性，但不能删除命名空间并保留属性。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T17:20:15.413

标签是`Elem`对象，命名空间由`scope`值控制。所以要摆脱它，你可以使用：

```
xmlElem.copy(scope = TopScope) 
```

但是，这是一个不可变的递归结构，因此您需要以递归方式执行此操作：

```
import scala.xml._

def clearScope(x: Node):Node = x match {
  case e:Elem => e.copy(scope=TopScope, child = e.child.map(clearScope))
  case o => o
} 
```

此函数将复制 XML 树，删除所有节点上的范围。您可能还必须从属性中删除范围。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-17T11:46:04.197

下面应该递归地删除命名空间和元素和属性。

```
def removeNamespaces(node: Node): Node = {
  node match {
    case elem: Elem => {
      elem.copy(
        scope = TopScope,
        prefix = null,
        attributes = removeNamespacesFromAttributes(elem.attributes),
        child = elem.child.map(removeNamespaces)
      )
    }
    case other => other
  }
}

def removeNamespacesFromAttributes(metadata: MetaData): MetaData = {
  metadata match {
    case UnprefixedAttribute(k, v, n) => new UnprefixedAttribute(k, v, removeNamespacesFromAttributes(n))
    case PrefixedAttribute(pre, k, v, n) => new UnprefixedAttribute(k, v, removeNamespacesFromAttributes(n))
    case Null => Null
  }
} 
```

它至少适用于以下测试用例：

```
<foo xmlns:xoox="http://example.com/xoox">
  <baz xoox:asd="first">123</baz>
  <xoox:baz xoox:asd="second">456</xoox:baz>
</foo> 
```

# java - Apache HttpClient GET with body

> ID：12535016
> 
> 赞同：27
> 
> 时间：2012-09-21T17:08:10.660
> 
> 标签：java, apache-httpclient-4.x

I am trying to send an HTTP GET with a json object in its body. Is there a way to set the body of an [HttpClient](http://hc.apache.org/httpcomponents-client-ga/index.html) HttpGet? I am looking for the equivalent of HttpPost#setEntity.

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-21T18:03:42.497

据我所知，您不能使用 Apache 库附带的默认 HttpGet 类来执行此操作。但是，您可以子类化*HttpEntityEnclosureRequestBase*实体并将方法设置为 GET。我没有对此进行测试，但我认为以下示例可能是您正在寻找的：

```
import org.apache.http.client.methods.HttpEntityEnclosingRequestBase;

public class HttpGetWithEntity extends HttpEntityEnclosingRequestBase {
    public final static String METHOD_NAME = "GET";

    @Override
    public String getMethod() {
        return METHOD_NAME;
    }
} 
```

编辑：

然后，您可以执行以下操作：

```
...
HttpGetWithEntity e = new HttpGetWithEntity();
...
e.setEntity(yourEntity);
...
response = httpclient.execute(e); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-29T15:44:10.460

使用托宾斯基的回答我创建了上面的类。这让我可以对 HttpPost 使用相同的方法。

```
import java.net.URI;

import org.apache.http.client.methods.HttpPost;

public class HttpGetWithEntity extends HttpPost {

    public final static String METHOD_NAME = "GET";

    public HttpGetWithEntity(URI url) {
        super(url);
    }

    public HttpGetWithEntity(String url) {
        super(url);
    }

    @Override
    public String getMethod() {
        return METHOD_NAME;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-22T14:29:39.213

**在这个例子中，我们如何像 HttpGet 和 HttpPost 一样发送请求 uri ？？？**

```
 public class HttpGetWithEntity extends HttpEntityEnclosingRequestBase
 {
    public final static String METHOD_NAME = "GET";
    @Override
     public String getMethod() {
         return METHOD_NAME;
     } 

        HttpGetWithEntity e = new HttpGetWithEntity(); 
        e.setEntity(yourEntity); 
        response = httpclient.execute(e); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-31T18:23:25.477

除了 torbinsky 的回答，您可以将这些构造函数添加到类中，以便更轻松地设置 uri：

```
public HttpGetWithEntity(String uri) throws URISyntaxException{
    this.setURI(new URI(uri));
}

public HttpGetWithEntity(URI uri){
    this.setURI(uri);
} 
```

该`setURI`方法继承自`HttpEntityEnclosingRequestBase`构造函数，也可以在构造函数之外使用。

# c# - 我可以使我的 DGV 单元格值隐式非空吗？

> ID：12535027
> 
> 赞同：0
> 
> 时间：2012-09-21T17:08:54.387
> 
> 标签：c#, winforms, datagridview, nullreferenceexception

刷新我的 DGV 内容（不是数据绑定，在代码中填充）时，我有这段代码可以检索单元格中的值：

```
DataGridViewRow desiredRow = dataGridViewPlatypi.Rows[rowNum];
return desiredRow.Cells[colNum].Value.ToString(); 
```

只要单元格中有值，它就可以正常工作；如果单元格为空，则会在第二行显示“ *Null reference exception | Object reference not set to an instance of an object ”失败。*

我可以解决这个问题，我给每个单元格一个“0”或一个“”（空格），但我宁愿不这样做。有没有更优雅的方式来处理这个（空白单元格）条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:18:49.337

您可以使用[null-coalescing 运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx)来测试单元格中的 null 值，如果发现该值为 null，则返回您选择的字符串。否则返回单元格的字符串值：

```
DataGridViewRow desiredRow = dataGridViewPlatypi.Rows[rowNum];
return (desiredRow.Cells[colNum].Value ?? "empty").ToString(); 
```

# development-environment - 开发备份的最佳实践

> ID：12535028
> 
> 赞同：0
> 
> 时间：2012-09-21T17:08:55.637
> 
> 标签：development-environment, backup-strategies

我是一名中级开发人员（我认为）。我几乎总是一个人工作。

我总是把我的代码保存到我的硬盘上，然后发布到我的服务器上。我几乎总是重写旧代码。如果我犯了一个大错误，我将从我的网络主机恢复备份。显然，这可能是一个痛苦和成本的时间。

我知道一定有更好的方法。我想我每次更改文件时都可以保存副本，但如果我每次进行小调整时都有 1000 个不同的版本，这似乎也会让人感到困惑。

什么是最好的解决方案？在我的情况下，似乎 GIT 类型的服务可能比它的价值更麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:16:06.057

你以错误的方式工作......尝试一个[CVS](http://en.wikipedia.org/wiki/Concurrent_Versions_System)，那种软件自己管理版本和更改。

了解如何实施[SVN 解决方案](http://en.wikipedia.org/wiki/Subversion_%28software%29)，这将对您有很大帮助。

GIT、Codeplex 和其他存储库都基于这种工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-13T14:50:38.827

问题的步骤：

## 源代码控制

谷歌有完整的文章列表，如果你使用 GIT，这是我最喜欢的：http: [//nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/)

并查看其他 www.bignerdranch.com/blog/you-need-source-code-control-now/

但源代码控制不仅仅是备份。

请参阅 [备份和版本控制之间是否存在根本区别？](https://stackoverflow.com/questions/549600/is-there-a-fundamental-difference-between-backups-and-version-control)

## 备份您的源

您需要备份服务器、站点或外部设备中的代码副本。

GIT 或 Subversion 用于源代码控制而不是用于复制。

请参阅“备份最佳实践：首先阅读此内容！”

并定期为此工作设置工具。

## 软件配置管理

您需要为软件更改设置一个系统，一步一步，从用户需求开始，涵盖所有方法论工作

见redmine ...

# sharepoint-2010 - 在 sharepoint 共享点列表项目 ID 字段中需要帮助

> ID：12535030
> 
> 赞同：0
> 
> 时间：2012-09-21T17:09:03.640
> 
> 标签：sharepoint-2010

请求检查以下代码：

```
<Method ID="1" Cmd="Update">
<Field Name="ID">4<Field>
<Field Name="Field_Name">Value</Field></Method>
<Method ID="2" Cmd="New"><Field Name="ID" >6</Field>
<Field Name="Field_Name">Value</Field></Method>
<Method ID="3" Cmd="Update">
<Field Name="ID" >8</Field>
<Field Name="Field_LookUp_Name">ID</Field>
</Method>
<Method ID="4" Cmd="Delete">
<Field Name="ID" >16</Field>
<Field Name="Field_Name">Value</Field>
</Method> 
```

我从 MSDN 站点获得的上述代码，在说明中 Field Name="ID" 只不过是列表项 ID。基于他们在字段名称 ID 上方获得的内容或方式，例如：4、6、8 16 ......请有人帮助我，我不明白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:56:44.953

Field Name="ID" 是为添加到列表中的每个项目自动生成的唯一项目 ID。

每当您输入任何新项目以列出 sharepoint 时，都会自动为列表项目分配唯一 ID。

问候。

# jquery - 使用 ajax 加载页面时不会触发 onYouTubePlayerReady

> ID：12535035
> 
> 赞同：0
> 
> 时间：2012-09-21T17:09:27.213
> 
> 标签：jquery, ajax, youtube, youtube-api, youtube-javascript-api

我有以下使用 ajax 加载页面的 jQuery 脚本，我想在加载页面时使用 Youtube API 显示视频：

```
$("#games_slides").load($(this).attr('href'), function(){
    function onYouTubePlayerReady(playerId) {
            ytplayer = document.getElementById("ytPlayer");
            ytplayer.cueVideoById("ylLzyHk54Z0");
            ytplayer.playVideo();
    }

    function loadPlayer() {
            var params = { allowScriptAccess: "always" };
            var atts = { id: "ytPlayer" };
            swfobject.embedSWF("http://www.youtube.com/apiplayer?" + "version=3&enablejsapi=1&playerapiid=player1", "youtubePlayer", "480", "295", "9", null, null, params, atts);
    }

    loadPlayer();
}); 
```

播放器已加载，因此 loadPlayer 函数正在运行，但 onYouTubePlayerReady 函数未触发。知道为什么吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-21T20:27:02.623

该`onYouTubePlayerReady`函数需要在`window`上下文中（以便 ActionScript 代码在加载后可以调用它），并且您对该函数的定义似乎具有一些本地上下文。

尝试

```
window.onYouTubePlayerReady = function(playerId) {
  ytplayer = document.getElementById("ytPlayer");
  ytplayer.cueVideoById("ylLzyHk54Z0");
  ytplayer.playVideo();
} 
```

# python - 更改 python-gnupg 锁定文件位置？

> ID：12535038
> 
> 赞同：0
> 
> 时间：2012-09-21T17:09:44.033
> 
> 标签：python, gnupg

我正在尝试部署一个使用 GPG 加密发送到 SOAP WebService 的数据的项目。当我尝试加密该文件时，我发现它`python-gnupg`试图将一个锁定文件放入我的`gnupghome`目录中，该目录对于运行 Apache 的用户是不可写的。我宁愿不给“nobody”写权限，那么有没有办法改变 python-gnupg 用来存储锁定文件的位置？

**澄清：** 有人向我指出，我`gnupghome`在初始化对象时可能没有明确说明我当前正在设置，但我不希望将锁定文件放置在那里，因为我不希望“nobody”拥有对该位置的写访问权。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T17:26:41.603

锁定文件由 gnupg 创建，而不是 python 包装器，它总是在 GNUPGHOME 路径中创建，默认为`~/.gnupghome`.

您无法阻止锁定文件，但*可以*将目录设置为临时目录。缺点是它无法加载默认密钥环，因此您需要显式传递它，告诉 GNUPG*忽略*默认文件（如果您不这样做，它会痛苦地抱怨）：

```
import tempfile
import shutil

home = tempfile.mkdtemp()
try:
    gpg = gnupg.GPG(gnupghome=home, keyring='/path/to/keyring/file',
        options=['--no-default-keyring'])
finally:
    shutil.rmtree(home) 
```

事实上，我已经为密钥环使用了一个临时文件。使用该`tempfile.mkstemp()`函数在上面生成的临时目录中创建一个空文件，将密钥（从数据库中提取）导入该密钥环（使用`.import_keys()`），然后使用导入的密钥进行加密，然后清理整个临时主目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:17:37.213

[Python-GnuPG Getting Started](http://packages.python.org/python-gnupg/#getting-started)显示您可以`gnupghome`这样设置：

```
gpg = gnupg.GPG(gnupghome='/path/to/home/directory') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T16:42:43.137

如果您使用的是`python-gnupg`0.3.1 或更高版本并因此具有`options`参数，则可以使用此解决方案，前提是您需要的密钥环是可读的：

```
>>> g = gnupg.GPG(gnupghome='/path/to/gnupghome', options=['--lock-never']) 
```

我在验证用户根本没有写入权限的情况下使用它`gnupghome`- 只是读取`pubring.gpg`和的权限`trustdb.gpg`：

```
>>> v = g.verify(open('message.gpg', 'r').read())
>>> v.valid
True 
```

# cakephp - CakePHP 应用程序的 Redis

> ID：12535049
> 
> 赞同：3
> 
> 时间：2012-09-21T17:10:34.310
> 
> 标签：cakephp, redis, cakephp-2.0

我想开始一个性能将成为问题的大型 cakePHP 项目。我将有一个用户表，其中包含树行为和许多与用户相关的财务数据。此应用程序将制作大量动态报告，为不同的树节点等聚合数据。

由于[github](https://github.com/nnset/Cake-PHP-2.xx-Redis-datasource)上有一个易于使用的库，它将模型的数据源设置为redis，我想知道将它用于整个应用程序是否是个好主意？有没有人有这方面的经验，如果我决定依赖 redis 作为主要/唯一的数据存储可能会出现什么潜在问题？

编辑：我已经安装了 redis 并尝试将 RedisModel 用于两个具有简单关系 HasMany/BelongsTo 的模型。当我尝试简单地使用标准 AppModels 之类的模型时，它根本不起作用（Redis 错误：缺少键）。显然您不能以标准方式使用 Model->find Model->save 等。您必须改用 redis 方法（setKeyValue 等）。这意味着分页和其他 cakePHP 期货也将不起作用。所以也许对我的所有模型都使用 redisModel 不是最好的主意......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T13:54:38.570

我不能专门为 CakePHP 说话，但我会笼统地谈论 redis，特别是你问题的要点，它最终应该适用于你选择的框架。让我们来看看：

*   你提到你想*启动*一个性能*会成为*问题的应用程序——我只是想提一下你应该小心你需要一个 nosql 解决方案的假设，因为这很难事先评估。Redis 非常快，但例如 MySQL 已被证明能够很好地处理数百万条记录和操作，前提是它正确配置和使用，并且如果您需要大量关系结构，它会简单得多。

*   关于 Redis 作为主要和唯一的数据存储：

    *   Redis 非常适合这项工作。据报道，Instagram[存储了 3 亿个使用哈希伪分片的键值对](http://instagram-engineering.tumblr.com/post/12202313862/storing-hundreds-of-millions-of-simple-key-value-pairs)，效果很好，虽然这不是他们使用的唯一数据存储系统，但它表明 redis 非常可靠。这个站点（堆栈溢出）也广泛[使用 redis](https://meta.stackexchange.com/questions/69164/does-stack-overflow-use-caching-and-if-so-how)进行缓存。

    *   [据报道](http://www.servicestack.net/mythz_blog/?p=838)， Redis总体上平均具有出色的连续正常运行时间（考虑到上述几点，这不足为奇）

    *   存在减轻停机时间问题的选项，在一定程度上支持[复制，并且](http://redis.io/topics/replication)[Redis Cluster](http://redis.io/topics/cluster-spec)即将推出以支持适当的分布式方法。

    *   您可能面临的主要问题是没有正确理解其持久性是如何工作的。在开始之前，您绝对应该阅读[这篇](http://redis.io/topics/persistence)文章和[这篇文章，因为这一点很重要。](http://antirez.com/post/redis-persistence-demystified.html)简而言之，redis 不会立即将更改写入磁盘，这意味着根据您的配置，崩溃可能会导致自上次磁盘写入后几秒到几分钟的数据丢失。这可能是也可能不是问题，具体取决于您的用例；如果数据非常敏感（即财务记录），您可能需要在跳转到 redis 之前三思而后行，或者构建一个系统，其中 redis 不是专门使用而是与另一个存储系统结合使用。

*   像 redis 这样的非关系数据存储中的关系结构意味着做更多的工作并且经常复制/非规范化数据。可以做到，但需要考虑；在您提到的问题中，您需要汇总数据以生成动态报告，您确定要为此使用 redis 吗？听起来关系数据库会以非常小的性能成本为您提供更大的灵活性。如果您事先知道您需要对数据运行复杂的查询，那么除非绝对需要，否则不要重新发明轮子可能是个好主意。

我的建议是首先更好地了解 redis 是什么以及如何工作，可能会构建自己的模型，而不是依赖他人更好地了解可以做什么和不可以做什么，然后从那里评估你想把它带到哪里。Redis 足够可靠，可以独立使用，但归根结底，明智的做法是使用正确的工具来完成正确的工作，您可能会发现应用程序中的某些内容与 Redis 配合得很好，而其他一些内容则更好更传统的存储系统。

# c++ - c++预编译头文件定义在一个头文件VS2010中。编译器找不到

> ID：12535050
> 
> 赞同：3
> 
> 时间：2012-09-21T17:10:34.630
> 
> 标签：c++, visual-studio-2010, precompiled-headers

我继承了一些类似这样的代码，

头文件：HeaderFile.h

```
#ifndef HEADERFILE_H
#define HEADERFILE_H

#ifndef HEADERFILE_PCH_H
#include<LibStuff>
#include<LibStuff2>
#include<LibStuff3>
#include<LibStuff4>
#include<LibStuff5>
#endif

#include "FilesInProject"

Class A
{
  //Code

};

#endif 
```

Cpp: HeaderFile.cpp

```
#include "HeaderFile_pch.h" //(1)

#include "HeaderFile.h"

//More code 
```

我了解预编译标头的用途以及代码在这里做什么（有点）。当我将这些文件复制到我的项目中时，我可以更新已弃用的代码但不影响原始项目，VS2010 在线阻塞`(1)`。VS2010 说找不到那个文件。

我已经在这两个项目之间走了一圈，我找不到任何设置差异。

我错过了什么，为什么可以将`PCH`'s 嵌入这样的标题中，而不是将它们实际移动到名为`HeaderFile_pch.h`. 这是某种宏黑客吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T17:45:56.187

对于初学者，在您上面提供的示例中没有像 Headerfile_pch.h 这样的文件，也不可能在您的本地 fs 上。

Visual C++ 允许您定义几种设置预编译头文件的方法。最常见的是在项目配置级别为所有源文件启用它，在 Configuration Properties/C++/Precompiled Headers 下，设置“Precompiled Header”，选择“Use”。设置“预编译头文件”的相同位置通常是“stdafx.h”，但可以是您选择的任何内容。所有文件都将获得此设置（因此项目级别的配置）除了...。

一个文件负责生成 PCH 文件。该文件通常是您项目中的 stdafx.cpp 文件，但同样，它可以是您想要的任何单一来源。大多数只是设置一个包含一件事的虚拟cpp文件：#include“myheader.h”（duh）..为那个文件配置预编译头，从“使用”切换到“创建”。这确保了如果 PCH 的主要头文件不同步，则首先重新编译源文件以重新生成 PCH 数据文件，然后再启动其他文件。

其一个属性是绝对强制性的：包含头文件（myheader.h 或您所称的任何内容）必须是您正在编译的任何参与使用 pch 的源文件中的**第一个**包含，包括（希望很明显）您指定为“生成器”的文件（在上一段中标记为“创建”的文件）。

最后，如果由于构建环境中的异常情况（即做愚蠢事情的第 3 方头文件）而导致问题出现，您*可以*逐个文件禁用 pch。

在 Visual Studio 中还有其他配置 PCH 设置的方法，但这是*迄今为止*最常见的方法。

# vb6 - 最大 Err.Raise 数？

> ID：12535054
> 
> 赞同：9
> 
> 时间：2012-09-21T17:10:38.357
> 
> 标签：vb6, error-handling

为什么当我使用遗嘱时，它`Err.Raise 65536`的`Err.Number`值实际上是 5 而不是 65536？

根据`Raise`定义：`Sub Raise(Number As Long, [Source], [Description], [HelpFile], [HelpContext])`. 传递参数 is`Long`和`Err.Number`is also `Long`。

那么为什么我不能使用大于 65535 的值呢？

```
Private Sub Command1_Click()
Dim a As Long
    On Error GoTo ErrCatch
    For a = 0 To 99999
        Err.Raise a
        DoEvents
    Next a
    Exit Sub
ErrCatch:
    ' this is where Err.Number is evaluated
    Resume Next
End Sub` 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-21T17:14:41.027

从[MSDN 文档：](http://msdn.microsoft.com/en-us/library/aa265359(v=vs.60).aspx)

> *数字*
> 
> 必需的。标识错误性质的长整数。**Visual Basic 错误在 0–65535 范围内**；0-512 范围是为系统错误保留的；**范围 513–65535 可用于用户定义的错误**。在类模块中将 Number 属性设置为您自己的错误代码时，您将错误代码编号添加到 vbObjectError 常量。例如，要生成错误号 513，请将 vbObjectError + 513 分配给 Number 属性。

因此，即使您可以提交大于 65535 的值，任何大于 65535 的值都将变为错误 5。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-22T15:39:01.593

除了“微软这么说”之外，还有更深的层次。您提出的错误编号是一个 32 位整数，因为这是 COM 规范的一部分，用于在组件之间传递错误。组件的所有公共方法实际上都是返回 HRESULT 作为返回值的函数；如果你有一个 VB 函数，它会秘密地将函数的返回值映射到一个 [out] 参数。HRESULT 值是一个由整堆值组成的位域；但为了简单起见，您可以将其分成两个 16 位部分。低 16 位包含实际的错误号，恰好在 0 到 65535 之间——无符号的 16 位范围。高 16 位有很多标准。最重要的是 0x0000____。所有使用这个的常量都以“S_”开头（代表成功）。最常用的 32 位值是 S_OK (0x00000000)。如果返回此值，则该函数已成功。大多数 VB 方法调用都会返回这个值。但是，任何设置了最高位的值都表明存在错误。在十六进制中，这些值看起来像 0x8___ 。有许多类别的错误。VB 默认返回的是 0x800A。然而，COM 规范只给你一个你可以正式使用的类，0x8004——它在 VB 中表示为常量 vbObjectError。

事实上，VB 建议您在 ActiveX DLL 或 EXE 中的公共方法引发错误时使用 vbObjectError 常量。你做不做都没有区别。这只是意味着调用代码收到的错误非常大且为负数，因此您必须将错误号与 &H0000FFFF 相加才能取回您的 16 位整数。有趣的是，它还建议你*不要*使用 ActiveX 控件方法执行此操作，可能是因为与 ActiveX 控件方法关联的高 16 位是 0x800A000。更有趣的是，当您默认引发错误时，VB 本身会将所有错误编号与 0x800A0000 进行“与”运算。同样，它会检测错误号是否类似于 0x800A____ - 如果是这样，无论如何都会为您删除高 16 位，因此您只需处理错误号本身。在我的工作场所，我们有许多 VB 组件。我们的标准是不使用 vbObjectError 或错误代码。这为我们省去了随后必须在调用代码中屏蔽它的麻烦。

例如，如果您有 COMPONENT1.CLASS1 和 COMPONENT2.CLASS2。CLASS1.Method1 调用 CLASS2.Method1。如果我在 CLASS2 中引发错误，那么我必须在 CLASS1.Method1 中处理它。按照微软的规定，我会这样写：

COMPONENT1.CLASS1

```
Function Method1()
    On Error GoTo ErrorHandler
    ...
ErrorHandler:
    If (Err.Number And vbObjectError) = vbObjectError Then
        Select Case Err.Number And (Not vbObjectError)
        Case Component2.EErrComponent2.ecBlahBlahError
            ... handle ...
        End Select
    End If
End Function 
```

COMPONENT2.CLASS2

```
Enum EErrComponent2
    ecBlahBlahError = 513 ' Minimum error code
End Enum

Function Method1()
...
    Err.Raise EErrComponent1 Or vbObjectError
...
End Function 
```

对多个组件重复此操作，此样板文件会有点令人厌烦，而且似乎实际上并没有给我们任何回报。

我们可能会这样做：

COMPONENT1.CLASS1

```
Function Method1()
    On Error GoTo ErrorHandler
    ...
ErrorHandler:
    Select Case Err.Number
    Case Component2.EErrComponent2.ecBlahBlahError
        ... handle ...
    End Select
End Function 
```

COMPONENT2.CLASS2 枚举 EErrComponent2 ecBlahBlahError 结束枚举

```
Function Method1()
...
    Err.Raise EErrComponent1
...
End Function 
```

我想知道是否有人在不使用 vbObjectError 时遇到过问题。我们当然没有。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-21T17:13:56.300

错误 5 是

```
Run-Time Error '5': Invalid Procedure Call or Argument” 
```

随着贾斯汀的回答，这将是有道理的。当您使用大于 65535 的整数调用 Raise 函数时，它会引发错误 5，因为它是无效参数。

你能显示一些代码，我可以帮你更好一点吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T17:15:24.747

虽然`Number`被指定为 a `Long`，但在文档中`Err.Raise`说只有值 0-65535 是有效的。因此，您看到的错误实际上是因为您违反了`Err.Raise`.

为什么他们没有把它变成`Integer`一个谜（也许在未来扩大有效范围的情况下）。

# coffeescript - CoffeeScript 解析错误 - 意外的“（” - 但代码中没有“（”

> ID：12535056
> 
> 赞同：1
> 
> 时间：2012-09-21T17:10:49.110
> 
> 标签：coffeescript

这是原始代码：

```
res.write JSON.stringify {"#{result.statusCode}": "OK"} 
```

这是 SublimeText 2 中的 CoffeeScript linter 和 CoffeeScript 网站上的“Try CoffeeScript”解释器给我的错误：

```
PARSE ERROR ON LINE 1: UNEXPECTED '(' 
```

显然代码中没有打开的括号，所以我不明白这个错误。这是 CoffeeScript 解析器中的错误吗？

执行此操作的最小代码行似乎是这样的：

```
{"#{a}": ""} 
```

我假设对象键中的字符串插值是有效的，但我不确定。

编辑：经过一番调查，似乎在键中进行字符串插值是无效的，因为生成的 JavaScript 将是无效的。

这：

```
{"#{a}": "stuff} 
```

将转化为：

```
{ "" + a: "stuff"} 
```

这是无效的。

但是有人可以解释为什么它给我的错误信息如此错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T17:12:05.117

> 我假设对象键中的字符串插值是有效的，但我不确定。

不幸的是，事实并非如此。

你必须做类似的事情

```
(json = {})[result.statusCode] = 'OK'
res.write JSON.stringify json 
```

或者如果你想要一个单线

```
res.write (-> ((json = {})[result.statusCode] = 'OK') and JSON.stringify json)() 
```

至于误导性错误，CoffeeScript 正在尝试将您的JavaScript`{"#{a}": ''}`转换`{("" + a): ""}`为无效的 JavaScript。CoffeeScript 在那个左括号抛出错误。

# jquery - JQuery getJSON 不起作用

> ID：12535057
> 
> 赞同：0
> 
> 时间：2012-09-21T17:10:52.277
> 
> 标签：jquery, ajax, mediawiki-api

我正在尝试通过 AJAX 从 Wikipedia 获取一些数据。在摆弄 API 一段时间后，我的请求 URL 实际显示了我需要的内容，即来自某个部分的文本。但是我的 AJAX 请求无法返回它。这是我的功能：

```
function getSectionText(page, section) {
    $.getJSON(
        'http://en.wikipedia.org/w/api.php?action=query', {
            prop: 'revisions',
            rvlimit: '1',
            rvsection: section,
            rvprop: 'content',
            format: 'json',
            titles: page
        },
        function(data) {
            return data;
        }
    )
} 
```

这与起源无关，因为我使用 Chrome 的 JS 控制台从 Wikipedia 页面启动我的函数。然而，当我写`var someVariable = getSectionText(wgPageName, someNumber)`，然后尝试调用`someVariable`时，Chrome 说它是“未定义的”。请帮忙！

示例 URL：[我的沙盒，第一部分](http://en.wikipedia.org/w/api.php?action=query&prop=revisions&rvlimit=1&rvsection=1&rvprop=content&format=json&titles=User%3ABluefire272)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:12:31.637

AJAX 是异步的！您不能从 中返回数据`$.getJSON`。您需要在回调中执行与返回的 JSON 相关的所有操作。

```
function getSectionText(page, section) {
    $.getJSON(
        'http://en.wikipedia.org/w/api.php?action=query', {
            prop: 'revisions',
            rvlimit: '1',
            rvsection: section,
            rvprop: 'content',
            format: 'json',
            titles: page
        },
        function(data) {
            console.log(data);
        }
    );
} 
```

或者，您可以使用`promise`返回的对象，并为其附加回调。

```
function getSectionText(page, section) {
    return $.getJSON(
        'http://en.wikipedia.org/w/api.php?action=query', {
            prop: 'revisions',
            rvlimit: '1',
            rvsection: section,
            rvprop: 'content',
            format: 'json',
            titles: page
        }
    );
}

getSectionText('User:Bluefire272', 1).done(function(data){
    // You can use your data here
}) 
```

# javascript - 解析 URL 值并删除最后一个 '/' 之后的任何内容

> ID：12535060
> 
> 赞同：-1
> 
> 时间：2012-09-21T17:11:05.130
> 
> 标签：javascript, jquery, html

我的网站 URL 是（*示例*）`http://mypage.com/en/?site=main`。然后是与 PHP 一起解析数据的 JavaScript 代码。

之后，我需要一些代码将**地址栏中**的 URL 更改为`http://mypage.com/en/`，即删除最后一个`/`（斜杠）之后的内容。

*如果可能，它应该是 jQuery/JavaScript 代码。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:20:50.843

我发现了一些可行的方法。您必须使用一种名为`replaceState()`.

[Mozilla 开发人员参考](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)

```
var str = window.location.href;
window.history.replaceState({}, '', str.substr(0,str.lastIndexOf("/"))+"/"); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T17:15:06.063

在 javascript 中使用[split()函数。](http://www.w3schools.com/jsref/jsref_split.asp)

**例子 ：**

```
var url = "http://mypage.com/en/?site=main";
alert(url.split('?')[0]); 
```

# java - 如何在 Jersey 中制作一个接受多个复杂参数的 POST 方法？

> ID：12535061
> 
> 赞同：2
> 
> 时间：2012-09-21T17:11:07.423
> 
> 标签：java, web-services, rest, jaxb, jersey

我刚刚学习了如何通过 JAXB 映射将单个复杂对象发送到基于 Jersey 的 REST Web 服务：http: [//jersey.java.net/nonav/documentation/latest/xml.html#d4e820](http://jersey.java.net/nonav/documentation/latest/xml.html#d4e820)

但是，我想做更多的事情。

1) 我可以有一个接受多个复杂对象的方法，所有对象都用 JAXB 注释吗？我的意思是：

```
@POST
public void setPlanetAndGalaxy ( Planet planet, Galaxy galaxy ) { ... } 
```

泽西岛允许这种方法吗？使用 Jersey/Client 的客户对手会是什么样子？到目前为止，我的印象是我应该定义一个像类 GalaxyPlanet {行星，星系}这样的包装器，我不太喜欢这样。

2) POST 方法是否可以有数组或集合参数？像：

```
@POST
public void setPlanets ( Planet ... planets ) {...}

@POST
public void setPlanets ( Set<Planet> planets ) {...}

@POST
public void setPlanetsAndGalaxies ( Set<Planet> planets, Set<Galaxy> galaxies ) 
```

在这三种不同的情况下，客户端代码会是什么样子？

提前感谢您的帮助。马可。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T05:30:47.590

您应该首先确定您的资源及其关系。如果您只处理星系和行星（例如），您的 REST API 路径将类似于

```
/galaxies/ --> You can deal with list of galxies here
/galaxies/{oneGalaxyId}  --> One galaxy
/galaxies/{oneGalaxyId}/planets --> Planets of a galaxy
/galaxies/{oneGalaxyId}/planets/{planetId} --> One planet among the planets of a galaxy. 
```

您将能够处理`List`为 POST 方法参数。
`public void setPlanets ( List<Planet> planets ) {...}`
接受多个复杂类型参数可能是不可能的。

# android - 创建地图示例时出现空指针异常

> ID：12535067
> 
> 赞同：1
> 
> 时间：2012-09-21T17:11:29.183
> 
> 标签：android, google-maps, exception

它不断为我收到此错误，并且在模拟器上显示强制关闭。没有找到出错的地方。实际上我正在创建一个程序（参考一本书）来获取位置数据。以下是我的程序和 logcat 错误。我提到了这些 [link1](https://stackoverflow.com/questions/4187012/android-maps-nullpointerexception-itemizedoverlay)， [link2](https://stackoverflow.com/questions/5290833/random-mapview-force-close-nullpointerexception-com-google-googlenav-map-tile)，但我无法从中找到解决方案。有人可以建议我有什么问题吗？即使我已经在清单中添加了这个

```
<uses-permission android:name="android.permission.INTERNET"/>
     <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 
```

并在应用程序标签中

```
<uses-library android:name="com.google.android.maps"/> 
```

这是我的 .java 文件

```
public class LBSMap extends MapActivity {

    MapView mapView;
    MapController mc;
    GeoPoint p;

    LocationManager lm;
    LocationListener locationListener;

    private class MapOverlay extends com.google.android.maps.Overlay
    {
        public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when)
        {
            super.draw(canvas, mapView, shadow);
            Point screenPts=new Point();
            mapView.getProjection().toPixels(p, screenPts);

            Bitmap bmp=BitmapFactory.decodeResource(getResources(), R.drawable.pushpin);
            canvas.drawBitmap(bmp, screenPts.x, screenPts.y-50,null);
            return true;
        }

        public boolean onTouchEvent(MotionEvent event,MapView mapView)
        {
            if(event.getAction()==1)
            {
                GeoPoint p=mapView.getProjection().fromPixels((int)event.getX(),(int)event.getY());

            Geocoder geoCoder=new Geocoder(getBaseContext(),Locale.getDefault());
            try{
                List<Address> addresses=geoCoder.getFromLocation(p.getLatitudeE6()/1E6, p.getLongitudeE6()/1E6, 1);
                String add="";
                if(addresses.size()>0)
                {
                    for(int i=0;i<addresses.get(0).getMaxAddressLineIndex();i++)
                        add +=addresses.get(0).getAddressLine(i) + "\n";
                }
                Toast.makeText(getBaseContext(),add,Toast.LENGTH_SHORT).show();

            }catch(IOException e){
                e.printStackTrace();
            }
            return true;
            }
            return false;
        }
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_lbsmap);

        mapView=(MapView)findViewById(R.id.mapView);
        mapView.setBuiltInZoomControls(true);
        mapView.setSatellite(true);
        mapView.setTraffic(true);

        mc=mapView.getController();

        Geocoder geoCoder=new Geocoder(this,Locale.getDefault());

        try{
            List<Address> addresses=geoCoder.getFromLocation(p.getLatitudeE6()/1E6, p.getLongitudeE6()/1E6, 1); //line 103
            String add="";
            if(addresses.size()>0)
            {
                for(int i=0;i<addresses.get(0).getMaxAddressLineIndex();i++)
                    add +=addresses.get(0).getAddressLine(i) + "\n";
            }
            Toast.makeText(getBaseContext(),add,Toast.LENGTH_SHORT).show();

        }catch(IOException e){
            e.printStackTrace();
        }

        MapOverlay mapOverlay=new MapOverlay();
        List<Overlay> listOfOverlays=mapView.getOverlays();
        listOfOverlays.clear();
        listOfOverlays.add(mapOverlay);

        mapView.invalidate();

        lm=(LocationManager)getSystemService(Context.LOCATION_SERVICE);
        locationListener = new MyLocationListener();
    }

    public void onResume()
    {
        super.onResume();
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListener);
    }

    public void onPause()
    {
        super.onPause();
        lm.removeUpdates(locationListener);
    }

    private class MyLocationListener implements LocationListener
    {
        public void onLocationChanged(Location loc)
        {
            if(loc!=null){
                Toast.makeText(getBaseContext(), "Location changed : Lat: "+loc.getLatitude()+ "Lng: "+loc.getLongitude(), Toast.LENGTH_SHORT).show();
                p=new GeoPoint((int)(loc.getLatitude()*1E6),(int)(loc.getLongitude()*1E6));
                mc.animateTo(p);
                mc.setZoom(18);
            }

        }
        public void onProviderDisabled(String provider)
        {}
        public void onProviderEnabled(String provider)
        {}
        public void onStatusChanged(String provider, int status, Bundle extras)
        {}
    }

    @Override
    public boolean isRouteDisplayed()
    {
        return false;
    }
} 
```

下面是logcat的截图。

![在此处输入图像描述](../Images/90c2d36f3520ef5a59910fda182c14f5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:31:06.180

I'm guessing the `GeoPoint p` is null in your `onCreate()`, as when you assign a value to it in the Overlay code, you use

```
GeoPoint p=mapView.getProjection().fromPixels((int)event.getX(),(int)event.getY()); 
```

Which creates another local variable, instead of using the global one. Try using:

```
p=mapView.getProjection().fromPixels((int)event.getX(),(int)event.getY()); 
```

You may need to add a `final` modifier to the declaration to have it work inside another class.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:37:25.397

请检查您是否有 SDK 版本 > 9 的 Internet 访问代码

```
// Allow network access

    if (android.os.Build.VERSION.SDK_INT > 9) {

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);

    } 
```

# android - 无需直接访问 UI 的 Android AsyncTask

> ID：12535069
> 
> 赞同：2
> 
> 时间：2012-09-21T17:11:40.070
> 
> 标签：android, android-asynctask

我是安卓新手。我有一个正在下载 URL 内容的 AsyncTask。我不希望 AsyncTask 直接操作 UI 并希望它作为可重用的代码片段，所以我将它放在自己的文件中并返回一个字符串。问题是返回发生在 AsyncTask 完成之前（即使我正在使用 .excecute() 的 .get()），所以我什么也得不到。这是我目前拥有的东西：

```
package com.example.mypackage;

import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStream;
import java.io.UnsupportedEncodingException;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.concurrent.ExecutionException;

import android.os.AsyncTask;

public class URLContent {
private String content = "default value";

public String getContent(String URL){
    try {
        new getAsyncContent().execute(URL).get();
    } catch (InterruptedException e) {
        content = e.getMessage();
    } catch (ExecutionException e) {
        content = e.getMessage();
    }
    return content;
}

private class getAsyncContent extends AsyncTask<String, Integer, String>
{
    @Override
    protected void onPostExecute(String result) {
         content = result;
    }

    @Override
    protected String doInBackground(String... urls) {
        try{
            return URLResponse(urls[0]);
        } catch (Exception e){
            return e.getMessage();
        }

    }
}

private String IStoString(InputStream stream) throws IOException, UnsupportedEncodingException {
    try {
        return new java.util.Scanner(stream, "UTF-8").useDelimiter("\\A").next();
    } catch (java.util.NoSuchElementException e) {
        return "";
    }
}

private String URLResponse(String URLToget) throws IOException {
    InputStream is = null;

    try {
        URL url = new URL(URLToget);
        HttpURLConnection conn = (HttpURLConnection) url.openConnection();
        conn.setReadTimeout(10000 /* milliseconds */);
        conn.setConnectTimeout(15000 /* milliseconds */);
        conn.setRequestMethod("GET");
        conn.setDoInput(true);
        conn.connect();
        is = conn.getInputStream();
        // Convert the InputStream into a string
        String contentAsString = IStoString(is);
        return contentAsString;
    } finally {
        if (is != null) {
            is.close();
        } 
    }
}
} 
```

解决这个问题的最佳方法是什么，以便我的主线程以某种方式取回结果？我遇到过一些提到事件和回调的文章。这是最好的方法吗..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:28:18.943

不要做`get()`。只需在`doInBackground`方法内部处理您的 URL 执行结果的任何逻辑即可。您不必从中返回任何东西。在您的特定情况下，问题是在交付结果之前立即执行 get()

这是异步执行，您不能对其应用线性逻辑

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T14:23:34.437

感谢你的帮助。我将尝试由 Alex 扩展 asyncTask 类的解决方案，听起来像是一个干净的解决方案。

我设法通过在类中使用带有 AsyncTask 的接口并在主类上添加事件侦听器来完成我想做的事情。所以我获取内容的类现在看起来像这样：

```
package com.example.test;

import java.io.IOException;
import java.io.InputStream;
import java.io.UnsupportedEncodingException;
import java.net.HttpURLConnection;
import java.net.URL;

import android.os.AsyncTask;

public class URLContent {
public void getContent(String URL){
    new getAsyncContent().execute(URL);
}

public interface OnContentDownloadedListener{
    public abstract void onContentDownloaded(String content);
}
private OnContentDownloadedListener contentDownloadedListener = null;
public void setOnContentDownloadedListener(OnContentDownloadedListener content){
    contentDownloadedListener = content;
}

private class getAsyncContent extends AsyncTask<String, Integer, String>
{
    @Override
    protected void onPostExecute(String result) {
        contentDownloadedListener.onContentDownloaded(result);
    }

    @Override
    protected String doInBackground(String... urls) {
        try{
            return URLResponse(urls[0]);
        } catch (Exception e){
            return e.getMessage();
        }
    }
}

private String IStoString(InputStream stream) throws IOException, UnsupportedEncodingException {
    try {
        return new java.util.Scanner(stream, "UTF-8").useDelimiter("\\A").next();
    } catch (java.util.NoSuchElementException e) {
        return "";
    }
}

private String URLResponse(String URLToget) throws IOException {
    InputStream is = null;

    try {
        URL url = new URL(URLToget);
        HttpURLConnection conn = (HttpURLConnection) url.openConnection();
        conn.setReadTimeout(10000 /* milliseconds */);
        conn.setConnectTimeout(15000 /* milliseconds */);
        conn.setRequestMethod("GET");
        conn.setDoInput(true);
        conn.connect();
        is = conn.getInputStream();
        // Convert the InputStream into a string
        String contentAsString = IStoString(is);
        return contentAsString;
    } finally {
        if (is != null) {
            is.close();
        } 
    }
}
} 
```

然后在我的主类中，我只有一个事件监听器来处理 UI 的更新

```
urlContent.setOnContentDownloadedListener(new URLContent.OnContentDownloadedListener(){
            public void onContentDownloaded(String content){
//update UI or do something with the data
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T17:29:17.193

Updating UI with the results of AsyncTask is the main purpose of onPostExecute(). To keep the implementation and the way it's used in UI separate, your Activity can extend your getAsyncContent class and override the onPostExecute() method. This method will be executed on UI thread.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T17:43:37.997

如果您不需要异步任务中的 UI 更新，只需创建一个简单的线程来执行这些操作。完成后，只需发送一个广播。

```
new Thread(new Runnable() {
    @Override
    public void run() {
        // Do the download here...
        ....
        // 
        sendBroadcast(some_intent);
}).start(); 
```

# sql-server - 在 Gridview 中使用页脚添加行

> ID：12535072
> 
> 赞同：0
> 
> 时间：2012-09-21T17:11:46.717
> 
> 标签：sql-server, vb.net, gridview

好的，所以我正在慢慢地在我的项目上取得进展，但我收到了以下错误消息：

“此 SqlParameterCollection 不包含具有 ParameterName 'Name' 的 SqlParameter。”

错误指向我的 vb 代码中的以下语句： e.Command.Parameters("Name").Value = NewName.Text

有人可以看看我的代码并帮助我解决我可能做错的事情。

这是我的vb代码：

```
Inherits System.Web.UI.Page

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

End Sub

Private Sub GridView1_RowCommand(sender As Object, e As GridViewCommandEventArgs) Handles     Laboratory.RowCommand
    ' Insert data if the CommandName == "Insert"
    ' and the validation controls indicate valid data...
    If e.CommandName = "Insert" AndAlso Page.IsValid Then
        ' Insert new record...
        SqlDataSource2.Insert()
    End If
End Sub

Protected Sub SqlDataSource2_Inserting(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.SqlDataSourceCommandEventArgs) Handles SqlDataSource2.Inserting
    ' Programmatically reference Web controls in the inserting interface...
    Dim NewName As TextBox = Laboratory.FooterRow.FindControl("txtName")
    Dim NewAddress As TextBox = Laboratory.FooterRow.FindControl("txtAddress")
    Dim NewProvidence As TextBox = Laboratory.FooterRow.FindControl("txtProvidence")
    Dim NewCity As TextBox = Laboratory.FooterRow.FindControl("txtCity")
    Dim NewZipCode As TextBox = Laboratory.FooterRow.FindControl("txtZipCode")
    Dim NewCountry As TextBox = Laboratory.FooterRow.FindControl("txtcountry")
    Dim NewPhone As TextBox = Laboratory.FooterRow.FindControl("txtPhone")
    Dim NewFax As TextBox = Laboratory.FooterRow.FindControl("txtFax")
    Dim NewEmail As TextBox = Laboratory.FooterRow.FindControl("txtEmail")

    ' Set the ObjectDataSource's InsertParameters values...
    ' THIS IS WHERE I THINK I AM HAVING MY PROBLEM...
    e.Command.Parameters("Name").Value = NewName.Text
    e.Command.Parameters("Address").Value = NewAddress.Text
    e.Command.Parameters("Providence").Value = NewProvidence.Text
    e.Command.Parameters("City").Value = NewCity.Text
    e.Command.Parameters("ZipCode").Value = NewZipCode.Text
    e.Command.Parameters("Country").Value = NewCountry.Text
    e.Command.Parameters("Phone").Value = NewPhone.Text
    e.Command.Parameters("Fax").Value = NewFax.Text
    e.Command.Parameters("Email").Value = NewEmail.Text

End Sub 
```

这是我的html。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
</head>
<body>
<form id="form1" runat="server">
<div>

    <br />
    <br />
    <br />
    <br />
    <asp:GridView ID="Laboratory" runat="server" AllowSorting="True" AutoGenerateColumns="False" DataKeyNames="LaboratoryID" DataSourceID="SqlDataSource2" ShowFooter="True">
        <Columns>
            <asp:TemplateField ShowHeader="False">
                <EditItemTemplate>
                    <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="True" CommandName="Update" Text="Update"></asp:LinkButton>
                    &nbsp;<asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" CommandName="Cancel" Text="Cancel"></asp:LinkButton>
                </EditItemTemplate>
                <FooterTemplate>
                    <asp:Button ID="AddRow" runat="server" CommandName="Insert" Text="Add" />
                </FooterTemplate>
                <ItemTemplate>
                    <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="False" CommandName="Edit" Text="Edit"></asp:LinkButton>
                    &nbsp;<asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" CommandName="Delete" Text="Delete"></asp:LinkButton>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Name" SortExpression="Name">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("Name") %>'></asp:TextBox>
                </EditItemTemplate>
                <FooterTemplate>
                    <asp:TextBox ID="TxtName" runat="server"></asp:TextBox>
                </FooterTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Bind("Name") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Address" SortExpression="Address">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox2" runat="server" Text='<%# Bind("Address") %>'></asp:TextBox>
                </EditItemTemplate>
                <FooterTemplate>
                    <asp:TextBox ID="txtAddress" runat="server"></asp:TextBox>
                </FooterTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label2" runat="server" Text='<%# Bind("Address") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Providence" SortExpression="Providence">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox3" runat="server" Text='<%# Bind("Providence") %>'></asp:TextBox>
                </EditItemTemplate>
                <FooterTemplate>
                    <asp:TextBox ID="TxtProvidence" runat="server"></asp:TextBox>
                </FooterTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label3" runat="server" Text='<%# Bind("Providence") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="City" SortExpression="City">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox4" runat="server" Text='<%# Bind("City") %>'></asp:TextBox>
                </EditItemTemplate>
                <FooterTemplate>
                    <asp:TextBox ID="TxtCity" runat="server"></asp:TextBox>
                </FooterTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label4" runat="server" Text='<%# Bind("City") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="ZipCode" SortExpression="ZipCode">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox5" runat="server" Text='<%# Bind("ZipCode") %>'></asp:TextBox>
                </EditItemTemplate>
                <FooterTemplate>
                    <asp:TextBox ID="TxtZipCode" runat="server"></asp:TextBox>
                </FooterTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label5" runat="server" Text='<%# Bind("ZipCode") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Country" SortExpression="Country">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox6" runat="server" Text='<%# Bind("Country") %>'></asp:TextBox>
                </EditItemTemplate>
                <FooterTemplate>
                    <asp:TextBox ID="TxtCountry" runat="server"></asp:TextBox>
                </FooterTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label6" runat="server" Text='<%# Bind("Country") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Phone" SortExpression="Phone">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox7" runat="server" Text='<%# Bind("Phone") %>'></asp:TextBox>
                </EditItemTemplate>
                <FooterTemplate>
                    <asp:TextBox ID="TxtPhone" runat="server"></asp:TextBox>
                </FooterTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label7" runat="server" Text='<%# Bind("Phone") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Fax" SortExpression="Fax">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox8" runat="server" Text='<%# Bind("Fax") %>'></asp:TextBox>
                </EditItemTemplate>
                <FooterTemplate>
                    <asp:TextBox ID="TxtFax" runat="server"></asp:TextBox>
                </FooterTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label8" runat="server" Text='<%# Bind("Fax") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Email" SortExpression="Email">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox9" runat="server" Text='<%# Bind("Email") %>'></asp:TextBox>
                </EditItemTemplate>
                <FooterTemplate>
                    <asp:TextBox ID="TxtEmail" runat="server"></asp:TextBox>
                </FooterTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label9" runat="server" Text='<%# Bind("Email") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView>
    <asp:SqlDataSource ID="SqlDataSource2" runat="server" ConnectionString="<%$ ConnectionStrings:GreatGrizzlyConnectionString1 %>" DeleteCommand="DELETE FROM [Laboratory] WHERE [LaboratoryID] = @LaboratoryID" InsertCommand="INSERT INTO [Laboratory] ([Name], [Address], [Providence], [City], [ZipCode], [Country], [Phone], [Fax], [Email]) VALUES (@Name, @Address, @Providence, @City, @ZipCode, @Country, @Phone, @Fax, @Email)" SelectCommand="SELECT * FROM [Laboratory]" UpdateCommand="UPDATE [Laboratory] SET [Name] = @Name, [Address] = @Address, [Providence] = @Providence, [City] = @City, [ZipCode] = @ZipCode, [Country] = @Country, [Phone] = @Phone, [Fax] = @Fax, [Email] = @Email WHERE [LaboratoryID] = @LaboratoryID">
        <DeleteParameters>
            <asp:Parameter Name="LaboratoryID" Type="Int32" />
        </DeleteParameters>
        <InsertParameters>
            <asp:Parameter Name="Name" Type="String" />
            <asp:Parameter Name="Address" Type="String" />
            <asp:Parameter Name="Providence" Type="String" />
            <asp:Parameter Name="City" Type="String" />
            <asp:Parameter Name="ZipCode" Type="String" />
            <asp:Parameter Name="Country" Type="String" />
            <asp:Parameter Name="Phone" Type="String" />
            <asp:Parameter Name="Fax" Type="String" />
            <asp:Parameter Name="Email" Type="String" />
        </InsertParameters>
        <UpdateParameters>
            <asp:Parameter Name="Name" Type="String" />
            <asp:Parameter Name="Address" Type="String" />
            <asp:Parameter Name="Providence" Type="String" />
            <asp:Parameter Name="City" Type="String" />
            <asp:Parameter Name="ZipCode" Type="String" />
            <asp:Parameter Name="Country" Type="String" />
            <asp:Parameter Name="Phone" Type="String" />
            <asp:Parameter Name="Fax" Type="String" />
            <asp:Parameter Name="Email" Type="String" />
            <asp:Parameter Name="LaboratoryID" Type="Int32" />
        </UpdateParameters>
    </asp:SqlDataSource>
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />

</div>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:03:00.483

您需要创建参数，可能有很多变化，但这里是一个简单的

```
Dim Name As New SqlParameter("@Name", SqlDbType.nvarchar(50))
Name.Value = txtName.text
e.Command.Parameters.Add(Name) 
```

您需要为每个参数执行此操作。

如果参数已经存在，那么您不需要创建它！您只需使用以下内容。我添加的只是原始代码中的“@”。

```
e.Command.Parameters("@Name").Value = NewName.Text 
```

（自从我从事这些工作以来已经有一段时间了。）

# symfony - yml 文件的 Treebuilder 验证

> ID：12535077
> 
> 赞同：1
> 
> 时间：2012-09-21T17:12:03.067
> 
> 标签：symfony, symfony-2.1

我创建了一个配置类并构建了一个在该类中定义我的配置的树，但我想它非常难看，那么我的问题是找到一个解决方案来简化我的类？

```
<?php
  namespace Myapp\Mybundle\DependencyInjection;

  use Symfony\Component\Config\Definition\Builder\ArrayNodeDefinition;
  use Symfony\Component\Config\Definition\Builder\TreeBuilder;
  use Symfony\Component\Config\Definition\ConfigurationInterface;

class Configuration implements ConfigurationInterface
{
/**
 * {@inheritDoc}
 */

public function getConfigTreeBuilder()
{

    $treeBuilder = new TreeBuilder();
    $rootNode = $treeBuilder->root('em_profession');

    $rootNode
        ->children()
                 ->arrayNode('region')
         ->isRequired()
                 ->requiresAtLeastOneElement()
                 ->useAttributeAsKey('id')
                            ->prototype('array')
                                       ->children()
                                             ->scalarNode('label')
                                             ->isRequired()
                                             ->cannotBeEmpty()->defaultValue('em_profession_label')->end()
                                             ->arrayNode('childrens') 
                                             ->isRequired()
                                             ->requiresAtLeastOneElement()
                                             ->useAttributeAsKey('id')
                                                     ->prototype('array')
                                                           ->children()
                                                                 ->scalarNode('label')->end()
                                                                 ->arrayNode('childrens')
                                                                 ->isRequired()
                                                                 ->requiresAtLeastOneElement()
                                                                 ->useAttributeAsKey('id')
                                                                      ->prototype('array')
                                                                            ->children()
                                                                                 ->scalarNode('label')->end()
                                                                                 ->arrayNode('childrens')
                                                                                 ->isRequired()
                                                                                 ->requiresAtLeastOneElement()
                                                                                 ->useAttributeAsKey('id')
                                                                                      ->prototype('array')
                                                                                            ->children()
                                                                                                 ->scalarNode('label')->end()
                                                                                                 ->arrayNode('childrens')
                                                                                                 ->isRequired()
                                                                                                 ->requiresAtLeastOneElement()
                                                                                                 ->useAttributeAsKey('id')
                                                                                                     ->prototype('array')
                                                                                                           ->children()
                                                                                                                ->scalarNode('label')->end()
                                                                                                                ->arrayNode('childrens')
                                                                                                                ->isRequired()
                                                                                                                ->requiresAtLeastOneElement()
                                                                                                                ->useAttributeAsKey('id')
                                                                                                                      ->prototype('array')
                                                                                                                       ->end()
                                                                                                                ->end()
                                                                                                           ->end()

                                                                                                     ->end()

                                                                                                  ->end()
                                                                                            ->end()
                                                                                       ->end()
                                                                                 ->end()
                                                                            ->end()

                                                                       ->end()

                                                                  ->end()
                                                         ->end()

                                                     ->end()

                                             ->end()

                                      ->end()
                             ->end()
         ->end()
        ->end()
    ;

    return $treeBuilder;
} 
```

我的配置工作正常，但它非常大，所以我将其最小化以简化它并停止重复代码。

**编辑**

好的，我知道这个解决方案，但我想我不能在我的配置中应用它，例如在 Twig 配置文件中，他们在“->end()”之后的类末尾使用自定义函数，但在我的配置中我使用它在“原型（）”里面我也有很多重复的代码，但是孩子里面的孩子里面的孩子......所以很难正确地最小化它......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:50:41.530

像[Twig 配置文件](https://github.com/symfony/symfony/blob/master/src/Symfony/Bundle/TwigBundle/DependencyInjection/Configuration.php)一样：使用方法：

```
$rootNode = $treeBuilder->root('em_profession');
$this->addMyCustomSection($rootNode); 
```

然后在`addMyCustomSection`方法中：

```
private function addMyCustomSection(ArrayNodeDefinition $rootNode)
{
    // Continue modifying $rootNode
} 
```

[参考](http://symfony.com/doc/current/cookbook/bundles/extension.html)。

# c# - 如何首先为 EF 代码配置 EF Tracing 提供程序

> ID：12535079
> 
> 赞同：0
> 
> 时间：2012-09-21T17:12:05.180
> 
> 标签：c#, ef-code-first

我正在尝试将 EF Tracing 实用程序与 EF 5.0 一起使用（代码优先）。但这仅适用于需要 edmx 文件的对象上下文。

[http://code.msdn.microsoft.com/EFProviderWrappers](http://code.msdn.microsoft.com/EFProviderWrappers)

有人首先使用 DBContext 解决 EF 代码吗？

阿南德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:05:15.163

从网站的问答部分，作者有使用 Code First 的代码：

> 在 DbContext 中使用 DbCommand 构造函数重载...

```
var context = new NorthwindContext(CreateConnectionWrapper(@"name=NorthwindContext")); 
```

> 和 CreateConnectionWrapper 方法：

```
private static DbConnection CreateConnectionWrapper(string nameOrConnectionString) {
    var providerInvariantName = "System.Data.SqlClient";
    var connectionString = nameOrConnectionString;
    //name=connectionName format
    var index = nameOrConnectionString.IndexOf('=');
    if (nameOrConnectionString.Substring(0, index).Trim()
        .Equals("name", StringComparison.OrdinalIgnoreCase))
    {
        nameOrConnectionString = nameOrConnectionString
            .Substring(index + 1).Trim();
    }
    //look up connection string name
    var connectionStringSetting =
        ConfigurationManager.ConnectionStrings[nameOrConnectionString];
    if (connectionStringSetting != null)
    {
        providerInvariantName = connectionStringSetting.ProviderName;
        connectionString = connectionStringSetting.ConnectionString;
    }
    //create the special connection string with the provider name in it
    var wrappedConnectionString = "wrappedProvider=" + 
        providerInvariantName + ";" + 
        connectionString;
    //create the tracing wrapper
    var connection = new EFTracingConnection
                            {
                                ConnectionString = wrappedConnectionString
                            };
    //hook up logging here
    connection.CommandFinished +=
        (sender, args) => Console.WriteLine(args.ToTraceString());
    return connection; } 
```

> 这只是 TracingWrapper，但您也可以以相同的方式包装 Caching 包装器。

# javascript - 如何在移动 Safari 中离线时检索外部数据

> ID：12535080
> 
> 赞同：0
> 
> 时间：2012-09-21T17:12:08.657
> 
> 标签：javascript, html, mobile-safari

我正在使用 HTML5 标准构建几个应用程序，目的是在 Mobile Safari 中离线运行它们。这些应用程序中的大多数都提供了在几个大型纯文本文件中收集的数据的图形表示，这些文件将与核心应用程序文件一起打包。我需要一种方法来检索这些文件中的数据并将它们表示为字符串或 Javascript 中的其他可读对象。

从我有限的研究来看，跨域限制似乎阻止了我这样做，即使所有文件都在本地目录中工作。有什么我缺少的东西，或者我没有办法完成我所追求的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:20:06.840

我会使用 JSON。[如果需要，您可以使用JSON-P](http://json-p.org/)跨域抓取数据。JSON 也是本地存储友好的。

# algorithm - 随机数据的实际压缩

> ID：12535082
> 
> 赞同：5
> 
> 时间：2012-09-21T17:12:14.253
> 
> 标签：algorithm, compression, gzip

所以昨天我问了一个关于整数序列压缩的问题（[链接](https://stackoverflow.com/questions/12517580/compression-of-sequence-of-integers-providing-random-access)），大多数评论都有类似的观点：如果顺序是随机的（或者最坏的情况，数据是完全随机的），那么必须用 log2(k) 来解决值 k 的位。我还在本网站的其他问题中阅读了类似的回复。现在，我希望这不是一个愚蠢的问题，如果我将该序列序列化为一个文件，然后在该文件上运行*gzip*，那么我确实实现了压缩（并且取决于我允许*gzip*运行的时间，我可能会得到高压缩）。有人可以解释这个事实吗？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T21:07:02.197

我的猜测是您正在对随机文件进行压缩，因为您没有使用最佳的序列化技术，但是如果没有更多细节，就不可能回答您的问题。[0, k) 范围内的 n 个数字的压缩文件是否小于 n*log2(k) 位？（即 n*log256(k) 个字节）。如果是这样，gzip 是否设法为您生成的所有随机文件执行此操作，或者只是偶尔执行此操作？

让我注意一件事：假设您对我说，“我通过使用带有 mt19937 prng [1] 的 uniform_int_distribution(0, 255) 生成了一个随机八位字节的文件。我的文件的最佳压缩是多少？” 现在，我的回答可能是：“可能大约 80 位”。我只需要复制您的文件

*   您用于播种 prng 的值，很可能是 32 位整数 [2]；和

*   文件的长度，可能适合 48 位。

如果我可以在给定 80 位数据的情况下重现文件，那就是最佳压缩。不幸的是，这不是通用的压缩策略。gzip 不太可能确定您使用特定的 prng 来生成文件，更不用说它能够对种子进行逆向工程（尽管这些事情至少在理论上是可以实现的；Mersenne twister 不是加密安全的 prng。）

再举一个例子，一般建议在加密前先压缩文本；结果将比加密后压缩要短得多。但事实是加密几乎没有增加熵。最多，它增加了加密密钥中的位数。尽管如此，生成的输出很难与随机数据区分开来，并且 gzip 将难以压缩它（尽管它经常设法挤出一些位）。

* * *

注 1：注：这都是 c++11/boost 的术语。mt19937 是[Mersenne twister](http://en.wikipedia.org/wiki/Mersenne_twister)伪随机数生成器 (prng) 的一个实例，其周期为 2^19937 - 1。

注 2：Mersenne twister 的状态实际上是 624 个字（19968 位），但大多数程序使用较少的位来播种它。也许您使用了 64 位整数而不是 32 位整数，但这并没有太大改变答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T20:20:25.117

> 如果我采用该序列并将其序列化为一个文件，然后在该文件上运行 gzip，那么我确实实现了压缩

它是什么”？如果您获取随机*字节*（每个字节均匀分布在 0..255 中）并将它们提供给 gzip 或任何压缩器，您可能会在极少数情况下获得少量压缩，但大多数时候您会获得少量扩展.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T17:20:11.753

如果数据真的是随机的，平均来说没有压缩算法可以压缩它。但是，如果数据具有一些可预测的模式（例如，如果一个符号的概率取决于数据中出现的先前 k 个符号），许多（基于预测的）压缩算法将成功。

# ruby-on-rails - Encoding::UndefinedConversionError ("\xB6" from ASCII-8BIT to UTF-8): 在heroku上上传文件时

> ID：12535084
> 
> 赞同：1
> 
> 时间：2012-09-21T17:12:15.620
> 
> 标签：ruby-on-rails, file-upload, heroku

```
 def upload
    uploaded_io = params[:post][:image]
    File.open(Rails.root.join('app/assets', 'uploads', uploaded_io.original_filename), 'w') do |file|
      file.write(uploaded_io.read)
      params[:post][:image] = uploaded_io.original_filename
    end
  end 
```

这在我在 OS X 上的开发机器上运行良好，但是当运行相同的代码 eon heroku 时，我收到 500 错误，当我检查日志时，这似乎是导致它的原因

```
2012-09-21T16:57:08+00:00 app[web.1]: Encoding::UndefinedConversionError ("\xB6" from ASCII-8BIT to UTF-8):
2012-09-21T16:57:08+00:00 app[web.1]:   app/controllers/posts_controller.rb:86:in `write'
2012-09-21T16:57:08+00:00 app[web.1]:   app/controllers/posts_controller.rb:86:in `block in upload'
2012-09-21T16:57:08+00:00 app[web.1]:   app/controllers/posts_controller.rb:85:in `open'
2012-09-21T16:57:08+00:00 app[web.1]:   app/controllers/posts_controller.rb:85:in `upload'
2012-09-21T16:57:08+00:00 app[web.1]:   app/controllers/posts_controller.rb:61:in `update' 
```

我不知道该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-15T18:11:20.700

我知道这已经很长时间了，但也许这可以帮助别人：

您可以尝试 File.open(Rails.root.join('app/assets', 'uploads', upload_io.original_filename), 'wb') （使用 wb 而不仅仅是 w）。

# java - Java Integers Min_Value 负数然后比较

> ID：12535095
> 
> 赞同：20
> 
> 时间：2012-09-21T17:13:05.067
> 
> 标签：java, variables, integer, negative-number

我明天有一个测试，我无法理解我的书籍解释，我感谢帮助：

```
public class TestClass{
      public static void main(String[] args) throws Exception{
            int a = Integer.MIN_VALUE;
            int b = -a;
            System.out.println( a+ "   "+b);
      }
} 
```

输出：`-2147483648 -2147483648`

为什么这会打印 2 个相同大小的负数而不是正数和负数？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-21T17:15:37.980

因为静默整数溢出：`Integer.MIN_VALUE`is`-2^31`和`Integer.MAX_VALUE`is `2^31-1`，所以`-Integer.MIN_VALUE`is `2^31`, which is `Integer.MAX_VALUE + 1`，根据定义对于整数来说太大了。所以它溢出并变成`Integer.MIN_VALUE`......

您还可以检查：

```
System.out.println(Integer.MAX_VALUE + 1); 
```

打印同样的东西。

从技术上讲，结果由[Java 语言规范 #15.18.2 定义](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.18.2-400)：

> 如果整数加法溢出，则结果是数学和的低位，以一些足够大的二进制补码格式表示。如果发生溢出，则结果的符号与两个操作数值的数学和的符号不同。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-21T17:18:52.687

基本上，因为`Integer.MAX_VALUE`实际上只有 2147483647，所以`-Integer.MIN_VALUE`，即 +2147483648，实际上溢出了整数内部二进制表示的容量。因此，结果“循环”回到`Integer.MIN_VALUE`或 -2147483648。

如果你这样做`long b = -((long)a);`了，你会得到预期的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-10T20:54:25.093

为了更清楚地表明这一点：

```
Integer.MIN_VALUE is -2^31 = -2147483648
Integer.MAX_VALUE is 2^31-1 = 2147483647 
/*notice this is 1 less than the negative value above*/ 
```

`Integer.MAX_VALUE`不能拿`2147483648`。对于整数来说，这个数字太大了，正好相差 1。这会导致数字从最大值返回到最小值的起始位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-17T05:11:59.910

固定数量的二进制位可以编码偶数个事物。这意味着你不能有一个完全以零为中心的序列，因为这需要一个对称的事物数量。在句子中间最接近零的方法是将其拆分为负数和非负数，或正数和非正数。正常的二进制补码编码是前者。所以 32 位的范围从 -2^31 到 2^31-1。零在序列的非负半部分，并且您有一个无法正确否定的负数。

# css - 透明 div 后面的可点击图像映射 - 在 IE 中工作

> ID：12535096
> 
> 赞同：1
> 
> 时间：2012-09-21T17:13:06.597
> 
> 标签：css, z-index, imagemap

在我得到一堆反对票之前，我想指出我认为我理解它为什么不起作用，但我想看看社区中是否有人曾经遇到过这种困境，以及他们能够做什么，如果有的话来克服这个问题。

所以，我有一个可点击的图像地图。出于不重要的原因，它被放入作为`<body>`标签的第二个孩子存在的 div（我们称之为 B）中。然后，这个 div 兄弟（我们称它为 A）包含整个页面包装器和站点内容的其余部分。这意味着 B 几乎可以用作背景图像，而 A 拥有整个站点。A 中有一个透明的 div，它填补了一个空白，让 B 可以通过（显示）。不幸的是，我的客户决定他想制作一个图像地图，但保持标记不变。图像映射完成了它应该做的事情并且在 IE 中是可点击的，但是，在更好的浏览器（Chrome、FF）中，图像映射不可点击，因为理论上 A 与 B 重叠，从而使图像映射不可用。

我的问题是，为什么 IE 可以正常工作而 FF 和 Chrome 却失败了？而且，我可以使用什么样的方法来强制 FF 理解虽然 B 在 A 后面，但我需要 B 是可点击的？这甚至可能吗？CSS Z 索引？任何事物...？

标记来解释情况：

```
<div id="wrap" class="A">Site Content</div>
<div id="bg" class="B"><img src="" /><map></map></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:31:31.977

只有 IE 允许事件“通过”透明元素。就像*cimanon*所说的那样，这并不意味着它的行为正确

[Internet explorer 8 事件通过透明父母坠落](https://stackoverflow.com/questions/4416922/internet-explorer-8-event-fall-through-transparent-parents)

您可以将点击事件从 A 的透明区域传递到 B，但这需要大量的 javascript-ing。您的问题没有 CSS 解决方案。

# android - 如何在 Android 上以编程方式关闭 3G/数据？

> ID：12535101
> 
> 赞同：37
> 
> 时间：2012-09-21T17:13:46.087
> 
> 标签：android, 3g

如何在 Android 上以编程方式关闭 3G/数据？

不是 Wifi，而是 3G/数据。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-09-21T17:24:54.280

没有官方方法可以做到这一点。但是，它可以通过反射非正式地实现。

对于 Android 2.3 及更高版本：

```
private void setMobileDataEnabled(Context context, boolean enabled) {
    final ConnectivityManager conman = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
    final Class conmanClass = Class.forName(conman.getClass().getName());
    final Field iConnectivityManagerField = conmanClass.getDeclaredField("mService");
    iConnectivityManagerField.setAccessible(true);
    final Object iConnectivityManager = iConnectivityManagerField.get(conman);
    final Class iConnectivityManagerClass = Class.forName(iConnectivityManager.getClass().getName());
    final Method setMobileDataEnabledMethod = iConnectivityManagerClass.getDeclaredMethod("setMobileDataEnabled", Boolean.TYPE);
    setMobileDataEnabledMethod.setAccessible(true);

    setMobileDataEnabledMethod.invoke(iConnectivityManager, enabled);
} 
```

这也需要以下许可。

```
 <uses-permission android:name="android.permission.CHANGE_NETWORK_STATE"/> 
```

对于 Android 2.2 及以下版本：

```
Method dataConnSwitchmethod;
Class telephonyManagerClass;
Object ITelephonyStub;
Class ITelephonyClass;

TelephonyManager telephonyManager = (TelephonyManager) context
        .getSystemService(Context.TELEPHONY_SERVICE);

if(telephonyManager.getDataState() == TelephonyManager.DATA_CONNECTED){
    isEnabled = true;
}else{
    isEnabled = false;  
}   

telephonyManagerClass = Class.forName(telephonyManager.getClass().getName());
Method getITelephonyMethod = telephonyManagerClass.getDeclaredMethod("getITelephony");
getITelephonyMethod.setAccessible(true);
ITelephonyStub = getITelephonyMethod.invoke(telephonyManager);
ITelephonyClass = Class.forName(ITelephonyStub.getClass().getName());

if (isEnabled) {
    dataConnSwitchmethod = ITelephonyClass
            .getDeclaredMethod("disableDataConnectivity");
} else {
    dataConnSwitchmethod = ITelephonyClass
            .getDeclaredMethod("enableDataConnectivity");   
}
dataConnSwitchmethod.setAccessible(true);
dataConnSwitchmethod.invoke(ITelephonyStub); 
```

这需要以下许可：

```
<uses-permission android:name="android.permission.MODIFY_PHONE_STATE" /> 
```

请注意，这两个都是非官方的，可能不再起作用。不需要再证明这种东西破坏了，因为 2.2 及以下的方法在 2.3 上破坏了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-28T07:47:37.060

**用try/catch**块包围代码

```
public void mobiledataenable(boolean enabled) {

try { 
        final ConnectivityManager conman = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
        final Class<?> conmanClass = Class.forName(conman.getClass().getName());
        final Field iConnectivityManagerField = conmanClass.getDeclaredField("mService");
        iConnectivityManagerField.setAccessible(true);
        final Object iConnectivityManager = iConnectivityManagerField.get(conman);
        final Class<?> iConnectivityManagerClass = Class.forName(iConnectivityManager.getClass().getName());
        final Method setMobileDataEnabledMethod = iConnectivityManagerClass.getDeclaredMethod("setMobileDataEnabled", Boolean.TYPE);
        setMobileDataEnabledMethod.setAccessible(true);
        setMobileDataEnabledMethod.invoke(iConnectivityManager, enabled);
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }     
} 
```

在 Manifest 中，添加以下权限：

```
<uses-permission android:name="android.permission.CHANGE_NETWORK_STATE"/> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-05T10:21:01.390

```
 public void onClick(View view){
        ConnectivityManager dataManager;
        dataManager  = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
        Method dataMtd = null;
        try {
            dataMtd = ConnectivityManager.class.getDeclaredMethod("setMobileDataEnabled", boolean.class);
        } catch (NoSuchMethodException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        dataMtd.setAccessible(true);
        try {
            dataMtd.invoke(dataManager, true);
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }   
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-22T21:35:18.677

**我还在使用 2.1，所以这个解决方案对我有用。**

但是您还需要包含 MODIFY_PHONE_STATE 权限。

**完整代码（带有工具按钮）2.1：**

```
package com.rivaldo.turn3gonoff;

import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;

import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.telephony.TelephonyManager;
import android.view.Menu;
import android.widget.CompoundButton;
import android.widget.ToggleButton;

public class Turn3GOnOff extends Activity {

Method dataConnSwitchmethod_ON;
Method dataConnSwitchmethod_OFF;
Class telephonyManagerClass;
Object ITelephonyStub;
Class ITelephonyClass;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_turn3_gon_off);

    GetDataConnectionAPI();

    ToggleButton toggle = (ToggleButton) findViewById(R.id.toggleButton);
    toggle.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            if (isChecked) {
                turn3GOn();
            } else {
                turn3GOff();
            }
        }
    });

}

private void GetDataConnectionAPI() {
    this.getApplicationContext();
    TelephonyManager telephonyManager = 
                    (TelephonyManager) this.getApplicationContext().
                                              getSystemService(Context.TELEPHONY_SERVICE);

    try {
        telephonyManagerClass = Class.forName(telephonyManager.getClass().getName());
        Method getITelephonyMethod = telephonyManagerClass.getDeclaredMethod("getITelephony");
        getITelephonyMethod.setAccessible(true);
        ITelephonyStub = getITelephonyMethod.invoke(telephonyManager);
        ITelephonyClass = Class.forName(ITelephonyStub.getClass().getName());

        dataConnSwitchmethod_OFF = 
                        ITelephonyClass.getDeclaredMethod("disableDataConnectivity");
        dataConnSwitchmethod_ON = ITelephonyClass.getDeclaredMethod("enableDataConnectivity");   
    } catch (Exception e) { // ugly but works for me
        e.printStackTrace();
    }
}
private void turn3GOn() {
    dataConnSwitchmethod_ON.setAccessible(true);
    try {
        dataConnSwitchmethod_ON.invoke(ITelephonyStub);
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    } catch (InvocationTargetException e) {
        e.printStackTrace();
    }
}

private void turn3GOff() {
    dataConnSwitchmethod_OFF.setAccessible(true);
    try {
        dataConnSwitchmethod_OFF.invoke(ITelephonyStub);
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    } catch (InvocationTargetException e) {
        e.printStackTrace();
    }
}

} 
```

清单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.rivaldo.turn3gonoff"
android:versionCode="1"
android:versionName="1.0" >

<uses-permission android:name="android.permission.CHANGE_NETWORK_STATE"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.MODIFY_PHONE_STATE" />
<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="7" />
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.rivaldo.turn3gonoff.Turn3GOnOff"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application>
</manifest> 
```

activity_turn3_gon_off.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
tools:context=".Turn3GOnOff" >

<ToggleButton
    android:id="@+id/toggleButton"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="60dp"
    android:textOn="3G on"
    android:textOff="3G off"
    android:text="ToggleButton" />

</RelativeLayout> 
```

# jquery - 带两个参数的模态形式

> ID：12535105
> 
> 赞同：0
> 
> 时间：2012-09-21T17:13:55.420
> 
> 标签：jquery

我需要一个 jquery 表单对话框，它在接受表单后调用一个带有两个参数的函数。一个参数来自表单，另一个参数来自初始化/打开对话框。我应该如何在不使用全局变量的情况下做到这一点？

编辑：

```
$("#something").click( function(){
  var global_var=param2;  
  $('#dialog').dialog('open'); 
}

$('#dialog').dialog({modal: true,  
                     autoOpen: false,  
                     buttons: {'Cancel': function(){}  
                               'Accept': function(){ callback($('#widget').val(),global_var);}  
                              }
                    });

<div id="#dialog">
  <p>
    <input type="text" id="widget" />
  </p>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:35:46.633

您可以尝试使用您的 param2 创建隐藏的输入：

```
$("#something").click( function(){
  $('#dialog').find('#param2').val(param2);  
  $('#dialog').dialog('open'); 
}

$('#dialog').dialog({
   modal: true,  
   autoOpen: false,  
   buttons: {
       'Cancel': function() { }  
       'Accept': function() { 
            callback($('#widget').val(), $('#param2').val());
       }  
   }
});

<div id="#dialog">
  <input type="hidden" id="param2" value="" />
  <p>
    <input type="text" id="widget" />
  </p>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:20:55.277

使用闭包：

```
(function(){
   // anything in here is local to this closure
   var foo = 0; // local
   bar = 1; // global
   $("#elementName").dialog(<options here>, 
   onBeforeClose: function () { <do something here>});
}()) 
```

# c++ - 从线程调用的睡眠永远不会长时间完成

> ID：12535109
> 
> 赞同：0
> 
> 时间：2012-09-21T17:13:58.997
> 
> 标签：c++, multithreading, time, sleep, chrono

我有一个基本的定时器功能，但它只会在睡眠时间相当短的时候工作。如果 DELAY 小于约 500 毫秒，该功能将正常工作。我尝试过其他睡眠方法，包括 sleep()、usleep()、nanosleep() 和 gettimeofday()，当 DELAY（针对每个函数调整）太大（通常在 0.3 到 0.3 之间停止工作）时，它们都会停止工作0.5 秒）。当它不起作用时，休眠函数不会返回任何东西，它永远不会完成执行。

例如：

```
void executeTimer(MyObject *obj) {
    printf("Starting timer, delay = %d\n", DELAY);
    std::this_thread::sleep_for(std::chrono::milliseconds(DELAY));
    printf("Complete\n");
    obj->doSomething();
} 
```

稍后在程序中通过以下方式调用：

```
timer = std::thread(executeTimer, this); 
```

如果 DELAY 大于大约 400-500，则永远不会输出“完成”。

有谁知道为什么这不起作用？谢谢您的帮助！

# xhtml - 如何在 xhtml 中为单个项目设置多个单选按钮

> ID：12535110
> 
> 赞同：0
> 
> 时间：2012-09-21T17:14:04.207
> 
> 标签：xhtml, radio-button

我正在构建一个 xhtml，其中将有大约 3 个图像，并且我希望每个图像有 2 个带有字母 A 和 B 的单选按钮，这意味着 A“最漂亮”和 B“最动态”，所以用户可以pic image1 为 A 和 B，或 pic image2 为 A，image3 为 B，或 image1 为 B，image3 为 A 或任何其他此类排列。

我怎样才能做到这一点？我没有在网上找到任何教程或任何东西。有没有简单的方法将它们分组？所以只能在图像中选择一个“A”，而只能选择一个“B”。因为我宁愿不使用 javascript 来模拟图像中的单选按钮。

```
<table width="100%" border="1">
                <h:selectOneRadio id="oppelonas"
                    value="#{historialAndrogeneticoBB.images}">
                    <tr>
                        <td>
                            <table  border="1">
                            <tr>
                                <td>
                                    <f:selectItem itemLabel="A" itemValue="2A" />
                                    <f:selectItem itemLabel="B" itemValue="2B" />
                                 </td>
                                <td>
                                    <img src="/image1.png" alt="2" />
                                </td>
                            </tr>
                            </table>
                        </td>
                        <td>
                            <table  border="1">>
                            <tr>
                                <td>
                                    <f:selectItem itemLabel="A" itemValue="3VA" /> 
                                    <f:selectItem itemLabel="B" itemValue="3VB" />
                                </td>
                                <td>
                                    <img src="/image2" alt="3V" />
                                </td>
                            </tr>
                            </table>
                        </td>
                        <td>
                            <table  border="1">>
                                <tr>
                                    <td>
                                        <f:selectItem itemLabel="A" itemValue="5AA" /> 
                                        <f:selectItem itemLabel="B" itemValue="5AB" />
                                    </td>
                                    <td>
                                        <img src="/image3" alt="5A" />
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>

                </h:selectOneRadio>
            </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:27:30.300

它们必须具有相同的名称属性，就像一组按钮好的，我已经完成了这个小代码

```
> <div>     <input type="radio" value="A" class="ClassA" />     
> <input type="radio" value="b" class="ClassB" /> </div> <div>  
> <input type="radio" value="A" class="ClassA" />   
> <input type="radio"  value="b" class="ClassB" /> <div>
> 
```

> var el=document.getElementsByClassName("ClassA"); if(el[0].checked) { el[1].checked=false; // 在这里你可以添加一些循环来取消选中其余元素 }

你必须向它添加事件处理程序以获取相关元素我代替特殊项目编号我希望它接近你想要做的事情

# javascript - 为什么 JS Regexp 不支持“否定交替”或“否定字符串类”，也许还有其他？

> ID：12535113
> 
> 赞同：1
> 
> 时间：2012-09-21T17:14:24.653
> 
> 标签：javascript, regex

我可以有`/[abcd]/`,`/(ab|cd)/`和`/[^wxyz]/`. 为什么不`/(^wx|yz)/`

[显然](https://stackoverflow.com/questions/12437757/is-there-a-such-thing-as-negated-alternation-or-negated-string-classes-a-l/12437857#12437857)，您可以通过简单地将功能与其他功能组合在一起来实现完全相同的效果，如下所示`/(?!wx|yz)../`：

那么为什么不直接支持该功能呢？有根本原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:29:52.247

所以，想象一下这`(^wx|yz)`意味着——正如你显然想要的——“一个既不是`wx`也不是”的两个字符序列`yz`。什么`(^vwx|yz)`意思？它是否意味着“既不是`vwx`也不是”的两个或三个字符序列`yz`？它是否意味着“*不是*`vwx`以开头且不以 开头的三字符序列`yz`，*还是*以”开头的两字符序列`yz`？

字符类表示法的强大之处`[...]`——它支持范围`a-z`、支持否定等的原因——是它始终匹配单个字符。一旦您取消该限制，就不再清楚这些事情的含义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T17:28:25.513

你期望的行为`/(^wx|yz)/`是什么？在我看来，一个空字符串似乎可以满足您提出的“否定交替”。如果您希望它尝试匹配相同数量的字符，那么使用可变长度正则表达式的否定替换呢？

我想在这里说明的是，否定的交替太模糊而无法实现，最明显的方法是无论如何作为零宽度断言，所以你可以只使用`(?!...)`.

# oracle - Oracle：显示错误参数

> ID：12535114
> 
> 赞同：2
> 
> 时间：2012-09-21T17:14:25.473
> 
> 标签：oracle, logging, parameters

当 Oracle 记录参数化 SQL 查询失败时，它会显示“？” 代替参数，即替换参数前的查询。例如，

```
"SELECT * FROM table where col like '?'" 
SQL state [99999]; error code [29902]; 
ORA-29902: error in executing ODCIIndexStart() routine ORA-20000: 
  Oracle Text error: DRG-50901: 
  text query parser syntax error on line 1, column 48 
```

有没有办法更改日志记录以显示**参数值**？除非我能看到实际的解析问题是什么，否则上面的信息绝对没用。

一般来说，有没有办法在Oracle中设置日志以显示参数化查询错误中的参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:35:28.333

如果您正在运行 Oracle 10g 或更高版本并且您可以访问 V$ 视图，那么您可以使用 v$sql_bind_capture 来查看这些值。

以下查询是从 Burleson 的网站借用的：

```
SELECT 
   a.sql_text, 
   b.name, 
   b.position, 
   b.datatype_string, 
   b.value_string 
FROM
   v$sql_bind_capture b,
   v$sqlarea          a
WHERE
   b.sql_id = 'The SQL ID'
AND 
   b.sql_id = a.sql_id; 
```

# android - Android：另一个AlertDialog的侦听器中的AlertDialog

> ID：12535115
> 
> 赞同：0
> 
> 时间：2012-09-21T17:14:30.540
> 
> 标签：android, android-alertdialog

更新：Eclipse 一定有问题，因为我在崩溃时没有记录任何错误。当应用程序崩溃时，我没有收到此错误，如下所述：

```
The specified child already has a parent. You must call removeView() on the child's 
parent first. 
```

这在第二次运行 noteview.show() 方法时发生。

* * *

## 原帖

我有一个问题`AlertDialog`，它是从另一个的侦听器内部开始的`AlertDialog`。

这是创建对话框和侦听器以及对话框的代码`show()`：

```
AlertDialog.Builder mdialog;
ArrayAdapter<String> popmenu;
EditText input;

mdialog = new AlertDialog.Builder(ShoppingListApp03Activity.this);
popmenu  = new ArrayAdapter<String>(ShoppingListApp03Activity.this,
           android.R.layout.select_dialog_item);
popmenu.add("Notes");
popmenu.add("Remove");
noteview = new AlertDialog.Builder(ShoppingListApp03Activity.this)
noteview.setTitle("Notes");
input = new EditText(this);
noteview.setView(input);

lv.setOnItemLongClickListener(new OnItemLongClickListener() {
   @Override
       public boolean onItemLongClick(AdapterView<?> parent, View view, int position,
                                                     long id) {
           final String sitem = items.get(position).getId();
           mdialog.setAdapter(popmenu, new DialogInterface.OnClickListener() {
              @Override
              public void onClick(DialogInterface dialog, int item) {
                 if (item == 0) {
                    updateFooter("Not implemented. (" + sitem + ")");
                noteview.show();
                 } else {
                    deleteitem = Integer.parseInt(sitem);
                    rmvdialog.show();
                 }
              }
           });

           mdialog.show();
           return false;
        }
     });

/* Click listener for the "Notes" popup menu: */
noteview.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
        Editable value = input.getText();
        // Do something with value!
    }
});
noteview.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
        // Canceled.
    }
}); 
```

打开一个弹出菜单，`onItemLongClickListener`其中有两个选项。

第二个，它开始`rmvdialog()`，很好地完成了它的工作。那里没有问题。

第一个打开注释对话框有一个问题：在第一次访问时，它打开注释对话框并显示消息和`OK`和`Cancel`按钮。但是，在返回列表（主视图）后，通过单击`OK`或`Cancel`在注释对话框中（因为两者都没有），第二次长按和选择注释对话框会使应用程序崩溃。

崩溃没有错误记录。`try-catch`周围`noteview.show()`也没有透露任何东西。

我在看自己的代码时会变得盲目，所以设计中可能有一些烂掉的东西，但我看不出是什么。

这里的整体功能是一个包含多个项目的列表。长按其中一项时，会显示一个包含两个条目的弹出菜单。然后，当长按称为“注释”的那个时，会出现一个对话框，用于显示/编辑列表中的项目的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:52:16.490

正如你也刚刚发现我所做的一样。这是我向您要求的测试活动。如您所见，它是您的精简版（除了我使用 onclick 而不是 onlongclick）

```
public class MainActivity extends Activity {

    private Builder firstDialogBuilder;
    private AlertDialog firstDialog;
    private Builder secondDialogBuilder;
    private AlertDialog secondDialog;
    private ListView secondListView;
    private ListView firstListView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        firstDialogBuilder = new AlertDialog.Builder(this);
        firstListView = new ListView(this);
        firstListView.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, new String[] {"First Item1", "First Item2"}));
        firstDialogBuilder.setView(firstListView);
        firstListView.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                secondListView = new ListView(MainActivity.this);
                secondListView.setAdapter(new ArrayAdapter<String>(MainActivity.this, android.R.layout.simple_list_item_1, new String[] {"Second Item1", "Second Item2"}));
                secondDialogBuilder.setView(secondListView);
                secondDialog = secondDialogBuilder.create();
                secondDialog.show();
            }
        });

        secondDialogBuilder = new AlertDialog.Builder(this);
        secondListView = new ListView(this);
        secondListView.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, new String[] {"Second Item1", "Second Item2"}));
        secondDialogBuilder.setView(secondListView);

        secondDialogBuilder.setPositiveButton("ok", new OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                Toast.makeText(getApplicationContext(), "ok on second", Toast.LENGTH_SHORT).show();
                secondDialog.dismiss();
            }
        });
        secondDialogBuilder.setNegativeButton("cancel", new OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                Toast.makeText(getApplicationContext(), "cancel on second", Toast.LENGTH_SHORT).show();
                secondDialog.dismiss();
            }
        });

        firstDialog = firstDialogBuilder.create();
        firstDialog.show();
    }
} 
```

下次，请提供类似的东西来帮助我们帮助你:)

# php - 如何在变量中定义表前缀

> ID：12535116
> 
> 赞同：-1
> 
> 时间：2012-09-21T17:14:30.713
> 
> 标签：php, sql, database, prefix

我想在变量中定义前缀

```
global $wpdb;
    $prefix = 'qa_';
    $titles = $wpdb->get_results("
        SELECT title
        FROM "$prefixpages"
        }
    "); 
```

任何人都可以指导为什么它不工作并且很热以使其工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:26:42.000

如果您需要从表 qa_tages 中查询：

```
global $wpdb;
$prefix = 'qa_';
$titles = $wpdb->get_results("
    SELECT title
    FROM ${prefix}pages
    }
"); 
```

或同一行：

```
 ..."
    FROM ".$prefix."pages
    "... 
```

如果您需要 $qa_pages 变量的内容：

```
global $wpdb;
$prefix = 'qa_';
$titles = $wpdb->get_results("
    SELECT title
    FROM ".${$prefix.'pages'}."
    }
"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:24:39.180

此代码有 3 个错误：

1.  这是 (") 的常见错误 请使用 (\") 作为以下示例

    ```
     global $wpdb;
     $prefix = 'qa_';
     $titles = $wpdb->get_results("
     SELECT title FROM \"$prefixpages\" } "); 
    ```

2.  您需要在变量声明和表名之间设置空格 错误：`$prefixpage`，正确：`$prefix page`

3.  `}`不需要代码末尾的。你为什么放它？

# python - 尝试解压缩 zipfile，然后在结果文件夹中，找到并解压缩任何/所有 zipfile

> ID：12535117
> 
> 赞同：0
> 
> 时间：2012-09-21T17:14:37.890
> 
> 标签：python, zipfile

我必须使用 Python 2.6！这是我真正想要自动化的任务，情况是静态的，一旦我创建了这个，我就会很成功（好）。我必须创建一个独立的脚本（我希望是空闲的），它将：

1.  将单个原始 zipfile (in_Zip) 解压缩到 zipfile 当前所在文件夹的内容。
2.  转到步骤 1 产生的唯一（非压缩）文件夹（实际上是学生用户名“aforker”、“allisw99”、“btaylor7”等）。（这些唯一的学生文件夹中可能有 1 到 40 个）
3.  在每个唯一文件夹（'aforker'、'allisw99'、'btaylor7' 等）中提取任何和所有（可以是无，可以是 3 或 4 个）.zip 文件到它们相对的上述唯一文件夹（'aforker'， 'allisw99'、'btaylor7' 等），而 'navigating' 即不会挂断可能存在或不存在于唯一文件夹中的可能的 .pdf 或 docx 文件（'aforker'、'allisw99'、'btaylor7'、 ETC）

到目前为止，这是我所拥有的：（并且它“有效”）（稍后我将进行修改，这样我就不需要对原始 zipfile (in_Zip) 进行硬编码）

```
import os, os.path, zipfile
inZip = r'D:\D_Drive_Documents\Student_Work_Sample_usecopy1\2012-09-18 Lab_2.zip'
outDir = r"D:\D_Drive_Documents\Student_Work_Sample_usecopy1"

z = zipfile.ZipFile(in_Zip,'a')
z.extractall(outDir)
zipContents = z.namelist()

print zipContents
z.close 
```

它有效，我在 Python Shell 中得到以下信息：

```
'>>> ================================ RESTART ================================'
'>>>' 
['Lab_2/aforker/', 'Lab_2/aforker/aforker_Lab2.zip', 'Lab_2/allisw99/', 'Lab_2/allisw99/allisw99_Lab2.zip', 'Lab_2/allisw99/allisw99_Lab2_Bonus.pdf', 'Lab_2/allisw992/', 'Lab_2/allisw992/allisw99_Lab2_Bonus.pdf', 'Lab_2/btaylor7/', 'Lab_2/btaylor7/2nd_btaylor7_Lab2.zip', 'Lab_2/btaylor7/btaylor7_Lab2.zip', 'Lab_2/']
'>>> ' 
```

但是，我不知道如何“进入”每个唯一文件夹：aforker、allisw99 等，然后提取“aforker”、“allisw99”等中的所有 zip。

我在其他论坛/列表服务上提出了一些建议，但它们都涉及破坏我当前的代码并在 Windows 命令窗口中执行操作等。a）我无法让它们工作，并且 b）它没有真的对我有帮助，因为我需要一个独立的 .py 文件来完成这一切。

为什么？你问？我将使用它来创建一个需要一个脚本的 ArcGIS“工具”（至少让我理解它）:-)

提前感谢您提供的任何和所有建议、提示等。

作为记录，我确实尝试了以下@上面代码的底部：

```
for item in zipContents:
     itemLoc = os.path.join(outDir,item)
     y = zipfile.ZipFile(itemLoc,'a')
     y.extractall(os.path.aplit(itemLoc)[0])
     y.close 
```

但我收到以下错误：

```
Traceback (most recent call last):
  File "D:\D_Drive_Documents\Scripts\Unzip_a_zip_of_zips\Scripts\unzip_a_zip.py", line 50, in <module>
    y = zipfile.ZipFile(itemLoc,'a')
  File "C:\Python26\ArcGIS10.0\lib\zipfile.py", line 687, in __init__
    self.fp = open(file, modeDict[mode])
IOError: [Errno 13] Permission denied: 'D:\\D_Drive_Documents\\Student_Work_Sample_usecopy1\\Lab_2/aforker/' 
```

提前感谢您的任何和所有输入！

格雷格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:04:55.600

在 nnoenneo（*上面或下面*的另一个回答者）Peter Otten 和 Oscar Benjamin（在另一个 (python.org) 论坛上）的帮助下，我能够提出以下有效的代码。

```
import os, os.path, zipfile, arcpy

in_Zip = r'D:\D_Drive_Documents\Student_Work_Sample_usecopy1\2012-09-18 Lab_2.zip'

outDir = r"D:\D_Drive_Documents\Student_Work_Sample_usecopy1"

z = zipfile.ZipFile(in_Zip,'r')

z.extractall(outDir)

zipContents = z.namelist()
z.close()

for item in zipContents:
    if item.endswith('.zip'):
        fullpath = os.path.join(outDir, item)
        x = zipfile.ZipFile(fullpath,'r')
        dest_path = os.path.dirname(fullpath)
        x.extractall(dest_path)
        x.close() 
```

如果在 Esri 的 ArcGIS 中创建工具，则必须将“in_Zip”行替换为： `in_Zip = arcpy.GetParameterAsText(0)`

和“outDir”行： `outDir = os.getcwd()`

然后在 ArcGIS 工具的属性中浏览到`.py`包含上述代码的文件。

特别感谢 python.org 上的 Peter Otten 和 Oscar Benjamin，他们自 2012 年 8 月 7 日以来一直在帮助我度过这个难关！

问候，格雷格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T02:30:15.857

额外的代码几乎可以工作，但您需要确保解压缩的是一个 zip 文件（而不是一个目录）：

```
for item in zipContents:
     if item.endswith('.zip'):
         itemLoc = os.path.join(outDir,item)
         y = zipfile.ZipFile(itemLoc,'a')
         y.extractall(os.path.split(itemLoc)[0]) # This is going to unzip to C:\\ -- you will want to change that
         y.close() 
```

# html - 图像方向 HTML

> ID：12535119
> 
> 赞同：2
> 
> 时间：2012-09-21T17:14:41.427
> 
> 标签：html, css, amazon-s3

在我的网站上，我想显示来自 Amazon S3 存储桶的多个图像。一切正常，但在 Firefox 中，图片有时方向不正确。在我的 iPhone 上它可以工作。我能做些什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T17:19:19.333

iPhone 知道如何从您的图像中读取 EXIF 信息（女巫会保留您的图片方向等），而浏览器则无法做到这一点。我建议您将它们上传到亚马逊已经旋转到您想在您的网站上看到的内容。

# wpf - 有趣的 ContentControl 绑定

> ID：12535122
> 
> 赞同：1
> 
> 时间：2012-09-21T17:14:50.223
> 
> 标签：wpf, data-binding, contentcontrol

首先，我应该说我是一个新手程序员，感谢所有帮助。我目前正在开发一个 wpf 应用程序，在该应用程序中我希望用户控件具有标签和内容控件，可以根据从欢迎视图中选择的按钮进行更新。像这样

```
<Window x:Class="ContentControl.Views.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:vm="clr-namespace:ContentControl.ViewModels"
    xmlns:views="clr-namespace:ContentControl.Views"
    Title="MainWindow" Height="350" Width="525">  
<Window.Resources>
    <DataTemplate DataType="{x:Type vm:ScreenViewModel}">
        <views:ScreenView DataContext="{Binding}"/>
    </DataTemplate>
    <DataTemplate DataType="{x:Type vm:WelcomeViewModel}">
        <views:WelcomeView DataContext="{Binding}"/>
    </DataTemplate>
    <DataTemplate DataType="{x:Type vm:MeetingRoomViewModel}">
        <views:MeetingRoomView DataContext="{Binding}"/>
    </DataTemplate>
    <DataTemplate DataType="{x:Type vm:DashboardViewModel}">
        <views:DashboardView />
    </DataTemplate>
</Window.Resources>

<Grid>
    <StackPanel>
        <Label>This Is My Label</Label>
        <ContentControl x:Name="MainPanel" Content="{Binding Path=Content}"
            MinHeight="200"
            MinWidth="200"
            HorizontalContentAlignment="Left" 
            VerticalContentAlignment="Center" 
            Focusable="False">
        </ContentControl>
    </StackPanel>
</Grid>
</Window> 
```

代码背后：

```
public MainWindow()
    {
        InitializeComponent();
        DataContext = this;
        MainPanel.Content = new WelcomeView();
        MainPanel.Content = this.MainPanel.Content;
    }
} 
```

这是 WelcomeViewModel：

```
internal class WelcomeViewModel : BaseViewModel
{
    private MainWindowViewModel _mainWindowVm;
    private RelayCommand<string> _viewChangedCommand;

    public ICommand ViewChangedCommand
    {
        get { return _viewChangedCommand ?? (_viewChangedCommand = new RelayCommand<string>(OnViewChanged)); }
    }

    public event EventHandler ViewChanged;

    private void OnViewChanged(string view)
    {
        EventHandler handler = ViewChanged;
        if (handler != null) handler(view, EventArgs.Empty);
    }

    public MainWindowViewModel MainWindowVm
    {
        get { return _mainWindowVm; }
        set
        {
            _mainWindowVm = value;
            OnPropertyChanged("MainViewModel");
        }
    }

    public WelcomeViewModel()
    {
        MainWindowVm = new MainWindowViewModel();
        ViewChanged += MainWindowVm.ViewChanged;
    }
} 
```

最后是我的welcome.xaml

```
<UserControl x:Class="ContentControl.Views.WelcomeView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:vm="clr-namespace:ContentControl.ViewModels"
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
<UserControl.DataContext>
    <vm:WelcomeViewModel />
</UserControl.DataContext>
<Grid Background="red">
    <Grid.RowDefinitions >
        <RowDefinition Height="25*" />
        <RowDefinition Height="50*"/>
        <RowDefinition Height="25*"/>
    </Grid.RowDefinitions>

    <Rectangle Grid.Row="0" Fill="Green"/>
    <DockPanel Grid.Row="1" HorizontalAlignment="Center" Background="White">
        <Button Height="50" Width="50" Margin="5" Content="DASH" Command="{Binding ViewChangedCommand}" CommandParameter="Dashboard"/>
        <Button Height="50" Width="50" Margin="5" Content="ROOM" Command="{Binding ViewChangedCommand}" CommandParameter="MeetingRoom"/>
        <Button Height="50" Width="50" Margin="5" Content="SCREEN" Command="{Binding ViewChangedCommand}" CommandParameter="Screen" />
    </DockPanel>
    <Rectangle Grid.Row="2" Fill="Blue"/>
</Grid>
</UserControl> 
```

所以问题是当 ViewChange 事件被触发时，它会在 MainWindowViewModel 中看到，但是当它使用 PropertyEventHandler（如下所示）时，PropertyChanged 始终为空。

```
public class BaseViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string name)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(name));
        }   
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:07:52.543

好吧，这里你有一些 WPF、Bindings 和 Mvvm 错误……首先，你为什么要这样做：

```
MainPanel.Content = this.MainPanel.Content; 
```

这与以下内容相同：

```
MainPanel.Content = MainPanel.Content; 
```

这条线是不必要的。

第二个为什么你说：

```
Content="{Binding Path=Content}" 
```

但是然后你在你的代码后面设置：

```
MainPanel.Content = new WelcomeView(); 
```

这里你可能有一个概念性的错误：当你默认设置一个绑定时，这个绑定将被完成到控件本身的 DataContext（在这种情况下是 UserControl）。好的，为了解决这个问题并使用 Mvvm，让我们保持绑定：

```
Content="{Binding Path=Content}" 
```

但现在我们需要设置 UserControl 数据上下文：

```
MainPanel.DataContext = new MainPanelViewModel(); 
```

现在我们需要在 MainPanelViewModel 中创建一个名为 Content 的属性。在此属性中，您将设置要在 ContentControl.Content 中显示的内容。（在这种情况下是 WelcomeViewModel 和你想要的任何东西）

希望这个答案对您开始使用 wpf 和 mvvm 有所帮助。这是一个很棒的平台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:02:55.473

好的。您可以解决的错误：

*   不要在代码隐藏中更改 MainPanel.Content。它应该通过绑定在 ViewModel 中进行更改。
*   在您的 Window.Resources 中，请注意您将 DataContext 设置为 WelcomeView 的 MainViewModel，并且在 WelcomeView 中您希望它是 WelcomeIewModel。它不是那样工作的。DataCONtext=WelcomeViewModel 被 Window.Resources 覆盖
*   为什么要在 WelcomeViewModel 中创建新的 MainViewmodel？
*   PropertyChanged 为空，因为您没有在 View（特定 MainiewMOdel 实例）中使用它。如果您要绑定它，PropertyChanged 将接收新的事件侦听器并且不再为空。

也许更好地解释你的问题，我可以提供更多信息。

# django - django-storages 和 amazon s3 - 可疑操作

> ID：12535123
> 
> 赞同：9
> 
> 时间：2012-09-21T17:15:01.443
> 
> 标签：django, amazon-s3, python-django-storages

我将 django-storages 与 Amazon S3 一起使用。我间歇性地看到以下错误：

```
name = self._normalize_name(self._clean_name(name))\n\n  File \"/app/.heroku/venv/lib/python2.7/site-packages/storages/backends/s3boto.py\", line 237, in _normalize_name\n    name)\n\nSuspiciousOperation: Attempted access to 'https:/plantvillage.s3.amazonaws.com/avatar/hans9_avatar.jpg' 
```

注意`/`后面的单`https:`。

有谁知道为什么会出现这个？它不会一直发生。在其他情况下，我可以成功地做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-17T14:21:29.750

**_normalize_name**在带有 URL 的 Django 东西上做了很多花哨的东西，而且大多是不必要的。就我而言，我只是像这样覆盖**S3BotoStorage**：

```
class S3CustomStorage(S3BotoStorage):
def _normalize_name(self, name):
    """
    Get rid of this crap: http://stackoverflow.com/questions/12535123/django-storages-and-amazon-s3-suspiciousoperation
    """
    return name 
```

然后在存储属性中使用它：

```
ImageField(storage=S3CustomStorage()) 
```

它适用于具有此基本配置的 django simple ImageField：

```
AWS_ACCESS_KEY_ID = 'TTTT'
AWS_SECRET_ACCESS_KEY = 'XXXX'
AWS_STORAGE_BUCKET_NAME = 'ZZZZ' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T20:05:41.387

当您使用 default_storage 方法时，请确保使用 file.name：

正确的：

```
default_storage.delete(file.name) 
```

错误的：

```
default_storage.delete(file.url) 
```

错误的：

```
default_storage.delete(file) 
```

以上三个示例都适用于本地文件，但在使用 s3 时，除非使用 file.name，否则会遇到此错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T14:22:11.623

我还没有在我自己的项目上使用 S3 存储，但我确实遇到了这个错误，也许可以为您指明正确的方向。

如果您查看 S3BotoStorage._clean_name()，它只是：`return os.path.normpath(name).replace('\\', '/')`。os.path.normpath() 将URL 中的*//转换为**\\*，然后 .replace() 将其转换为*\*。然后，S3BotoStorage._normalize_name() 检查以确保这个损坏的 URL 是它所代表的位置的一部分，当然不是。这就是引发 SuspiciousOperation 错误的地方。

所以“名称”看起来像是一个本地路径，而不是整个 AWS URL。就我而言，直接原因是`FILEBROWSER_DIRECTORY = MEDIA_URL + "uploads/"`在 settings.py 中，我曾试图修复有关丢失上传文件夹的不同错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-04T18:09:10.877

环境

```
MEDIA_ROOT='' 
```

为我解决了这个问题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-11-24T10:58:33.423

我解决了这个问题，在除了：

```
class S3CustomStorage(S3BotoStorage):
    def _normalize_name(self, name):
        try:
            return safe_join(self.location, name)
        except (SuspiciousOperation, ValueError):
            return "" 
```

# excel - 通过电子邮件发送工作簿时下拉列表消失

> ID：12535140
> 
> 赞同：1
> 
> 时间：2012-09-21T17:16:50.207
> 
> 标签：excel, email, validation

我在使用数据验证工具创建的 Excel 2010 工作簿上有一个下拉列表。该列表的数据是同一工作簿中单独工作表上的一个范围。

但是，当我将此工作簿通过电子邮件发送给其他人并且他们打开它时，下拉列表会消失。这不会影响我的任何其他具有“列表”以外的数据验证类型的单元格。

我在这里是否缺少信任中心设置，或者这是 Excel 的一个已知问题？

# c - C中指针的工作

> ID：12535151
> 
> 赞同：-1
> 
> 时间：2012-09-21T17:17:52.833
> 
> 标签：c, pointers

我在 youtube 上观看 Richard Buckland 讲座，他展示了指针的工作原理，但我在这里遇到了一些问题，据他说我们使用指针，因为有时我们可能不知道包含值的变量例如

```
void main()
{
    int x=20,y=30;
    task(x,y)
    getch();
}
void task(int x,int y)
{} 
```

因此它将创建两个变量 x 和 y 的 in task() 副本，它们完全独立于原始变量，因为 task() 不知道原始变量，因此我们使用指针，以便 task() 可以直接访问main() 变量 x 和 y 的地址。

因此，如果我们说 &x 它指的是 x 的值所在的地址，但如果我们说 *x 这意味着 *20 这类似于地址 20 上的值，对吗？如果我们遵循 C 中指针的概念，它是正确的。

但不是返回位于地址 20 上的值，而是显示“无效间接”错误。

**不是我不知道那个错误，而是c编译器给我这个错误的原因。我仍然遵循指针的概念，但方式不同。所以我想在概念上我是正确的，但在语法上我还是错了。为什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:23:50.830

> *20 这类似于地址 20 上的值，对吗？

对，或多或少，*但是*：

*   它实际上是从address*开始*`20`的值。为了让编译器知道值的大小和表达式的类型，它必须知道你的意思是什么类型的值，所以你必须转换*为* `20`适当的指针类型。例如，`(int*)20`是一个指向-的指针`int`，`*((int*)20)`类型也是`int`。
*   您不能安全地像这样“编造”一个地址，因为您实际上不太可能被分配了一个包含 address 的内存块`20`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T17:22:21.267

我不太明白你的意思（你的英语太差了！），但如果我理解正确，你想取消引用一个指定为整数的常量地址，如下所示：

```
int someVar = *20; 
```

现在的类型`20`是int，不是指针类型，所以不能解引用。您必须将其转换为适当类型的指针：

```
int someVar = *(int *)20; 
```

是的，这很可能会出现段错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T23:34:14.597

您必须了解的是，C 没有像 C++ 那样的“通过引用”的概念。这意味着无论变量的类型如何，编译器都会创建您传递的任何变量的副本。副本的保存位置取决于编译器、体系结构、优化级别等。通常您不必担心也不知道它保存在哪里。真正重要的是在一个函数中你得到一个副本。

理论上，您可以通过执行以下操作来访问内存的任何地址：

```
int *var = ((int*) 0xdeadbeef);
*var = 3; 
```

含义：将值`0xdeadbeef`转换为整数指针并将其保存在`var`. 然后将值 3 保存在从`0xdeadbeef`. 虽然这是正确的 C，但您肯定会遇到段错误，因为今天的操作系统使用内存控制器让您可以访问一组有限的地址/块。

当你这样做时：

```
int var = 10; 
```

编译器会将值 10 存储在某处（它可能存储在寄存器中，但我们假设编译器将其存储在 RAM 中）。作为 C 程序员，您通常不会关心它在哪里，链接器会处理正确的地址。

我们来看看这段代码

```
void foo(int f)
{
   /* do something with f */
}

void bar(int g)
{
    int f1 = 2;
    f1 += g;
    foo(f);
} 
```

编译器如何将其翻译成汇编程序？它可能看起来像这样

```
foo:
0xa0000000: load in register 1 the 4-byte value @ 0x12abcd00
0xa0000004: /* do something with register 1 */
0xa0000008: /* do something else with register 1 */
...
bar:
0xa0000c00: load in register 3 the 4-byte value @ 0x12ad0004
0xa0000c04: load in register 4 the value 2
0xa0000c08: add register 3, register 4 (result saved in 'result register')
0xa0000c0b: save the content of 'result register' @ 0x12abcd00 (look at the first line)
0xa0000c10: jump 0xa0000000  (call foo) 
```

这同样适用于指针。指针或多或少是一个整数变量。它们由指针存储的值是地址。与整数的区别在于您可以访问（=取消引用）存储在该地址的值。您可以通过使用`*`运算符来执行此操作（参见第一个示例`*var = 3`）。运算符返回变量的`&`地址。

所以当你有

```
void foo(int *x)
{
    *x = 3;
}

void bar(void)
{
    int i = 9;
    int *i_ptr = &i;
    foo(i_ptr);
    /* i is 3 */
} 
```

C 创建 的副本`i_ptr`，但副本的存储值如果`i_ptr`仍然与 的地址相同`i`，因此`foo`可以取消引用它并修改 的值，`i`即使`i`未在 中定义`foo`。

那么，我们什么时候在 C 中使用指针呢？通常，这些是使用指针时最常见的情况：

*   我们想修改一个我们没有在函数中声明的变量
    *   例如，我们需要一次返回超过 1 个值
*   我们使用动态分配的内存（参见`malloc`, `realloc`, `calloc`）
*   我们使用字符串

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T17:23:59.037

我想你想说的是：

```
void task(int *px, int *py)
{
    /* get the addresses of two integers */

    *px += 10; /* change the value of the integer px is pointing to */
    *py += 20; /* change the value of the integer py is pointing to */
}

void main()
{
    /* make a space on the stack for two integers, assign values */
    int x=20;
    int y=30; 

    /* display those values */
    printf("x=%d, y=%d", x, y);

    /* pass the address of each value to a function */
    task(&x,&y);

    /* display the changed values*/
    printf("x=%d, y=%d", x, y);

    getch();
} 
```

因为这会传递x 和 y的*地址，所以函数 task() 可以更改它们的值。*

# windows - 在 Linux 机器中使用 Win32::Registry 会出现问题

> ID：12535154
> 
> 赞同：1
> 
> 时间：2012-09-21T17:17:55.837
> 
> 标签：windows, linux, perl, registry

我的 perl 脚本必须在 Windows 和 Linux 服务器上运行。当脚本运行时，我必须为特定的东西更新注册表。当我使用“使用 Win32::Registry”时，它在 Windows 上运行良好，但在 Linux 上，无论以下 if 语句如何，它都会出错。

```
if ($OS =~ /Windows/ )
{
use Win32::Registry;
...
...
} 
```

在我看来，perl 在编译时加载“使用”，这一定是问题所在。我该怎么做才能让 Perl 在 Linux 上运行时不加载 use win 32 命令？

我尝试使用

```
if ($OS =~ /Windows/ )
{
require Win32::Registry;
...
...
} 
```

这样，脚本在两台服务器上都可以正常运行，但它将二进制值保存在注册表中，而不是字符串值。

那么如何让 Perl 脚本在两台服务器上运行并将字符串值保存在注册表中呢？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T17:24:26.103

```
use Foo; 
```

是

```
BEGIN {
   require Foo;
   import Foo;
} 
```

所以用

```
BEGIN {
   if ($OS =~ /Windows/)
      require Win32::Registry;
      import Win32::Registry;
   }
} 
```

或者

```
use if $OS =~ /Windows/, 'Win32::Registry'; 
```

*   [`use`](http://perldoc.perl.org/functions/use.html)
*   [`if`语用](http://search.cpan.org/perldoc?if)

# python - 如何字段到用户模型

> ID：12535157
> 
> 赞同：0
> 
> 时间：2012-09-21T17:18:11.990
> 
> 标签：python, django, registration, django-registration

我希望能够将图片保存给用户，甚至可能是描述，这些可以是可选的，但是如何添加到模型中。我不想进入 django 的源代码来更改它，我可以覆盖一个模型来添加字段，如果可以的话怎么办？

我如何在我的views.py 文件中访问这些accounts.UserProfile 和accounts.UserProfile.image

我安装了 django-registration

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:21:15.967

从文档：

如果您想存储与您的用户相关的其他信息，Django 提供了一种方法来指定特定于站点的相关模型——称为“用户配置文件”——为此目的。

要使用此功能，请定义一个模型，其中包含您要存储的其他信息或您希望拥有的其他方法的字段，并将模型中的 OneToOneField 命名用户添加到用户模型。这将确保只能为每个用户创建一个模型实例。例如：

```
from django.contrib.auth.models import User

class UserProfile(models.Model):
    # This field is required.
    user = models.OneToOneField(User)

    # Other fields here
    accepted_eula = models.BooleanField()
    favorite_animal = models.CharField(max_length=20, default="Dragons.") 
```

要指示此模型是给定站点的用户配置文件模型，请使用由以下项目组成的字符串填充设置 AUTH_PROFILE_MODULE，并用点分隔：

1.  定义用户配置文件模型的应用程序的名称（区分大小写）（换句话说，传递给 manage.py startapp 以创建应用程序的名称）。
    1.  模型（不区分大小写）类的名称。

例如，如果配置文件模型是一个名为 UserProfile 的类，并在名为 accounts 的应用程序中定义，则适当的设置为：

```
AUTH_PROFILE_MODULE = 'accounts.UserProfile' 
```

# opencl - 如何在 OpenCL 中从本地到全局内存中正确求和结果

> ID：12535158
> 
> 赞同：1
> 
> 时间：2012-09-21T17:18:21.787
> 
> 标签：opencl, reduce

我有一个 OpenCL 内核，其中每个工作组在本地内存中生成一个结果向量。然后我需要将所有这些结果汇总到全局内存中，以便稍后检索到主机。
为了测试这一点，我创建了以下内核代码：

```
//1st thread in each workgroup initializes local buffer
if(get_local_id(0) == 0){
    for(i=0; i<HYD_DIM; i++){
        pressure_Local[i] = (float2){1.0f, 0.0f};
    }
}

//wait for all workgroups to finish accessing any memory
barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);

/// sum all the results into global storage
for(i=0; i<get_num_groups(0); i++){

    //1st thread in each workgroup writes the group's local buffer to global memory
    if(i == get_group_id(0) && get_local_id(0) == 0){
        for(j=0; j<HYD_DIM; j++){
            pressure_Global[j] += pressure_Local[j];
            // barrier(CLK_GLOBAL_MEM_FENCE);
        }
    }

    //flush global memory buffers:
    barrier(CLK_GLOBAL_MEM_FENCE);
} 
```

本质上，我期望全局内存中向量的所有元素都等于工作组的数量（在我的例子中是 128 个）。实际上，它们通常在 60 到 70 之间变化，并且结果因运行而异。
有人可以告诉我我错过了什么，或者如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:42:38.503

您无法使用 opencl 在不同的工作组之间进行同步。CLK_GLOBAL_MEM_FENCE 不能那样工作。它只保证将保持内存操作（由工作组访问）的顺序。[请参阅OCL 1.2 规范](http://www.khronos.org/registry/cl/specs/opencl-1.2.pdf)中的“6.12.8 同步函数”部分。

我会通过为每个工作组使用不同的全局内存块来解决您的问题。你将数据写入全局，你的内核就完成了。然后，如果您想将数据减少到单个块，您可以让另一个内核从全局读取数据，并将其与其他结果块合并。您可以根据需要进行任意多层合并，但最终合并必须由单个工作组完成。

Search around for gpu/opencl reduction algorithms. Here's a decent one to start with. [Case Study: Simple Reductions](http://developer.amd.com/Resources/documentation/articles/pages/OpenCL-Optimization-Case-Study-Simple-Reductions_2.aspx)

# netbeans - 为 Netbeans 中的 jUnit 设置类路径

> ID：12535160
> 
> 赞同：1
> 
> 时间：2012-09-21T17:18:26.617
> 
> 标签：netbeans, junit, classpath

我正在为我的 Java 项目使用 Netbeans，并且我开始使用 jUnit。但是，我发现它没有正确配置数据库，因为它找不到某些资源。有没有办法添加一个类路径以供它使用运行 jUnit 以便我可以配置它以查找所有资源？

# java - 带有嵌套通用标记的 Java XML 绑定

> ID：12535162
> 
> 赞同：0
> 
> 时间：2012-09-21T17:18:32.750
> 
> 标签：java, xml, binding

我需要一种有效的方法将 XML 转换为Java 中*有意义的*域对象。下面是我必须使用的 XML 的选择（某些值已被遮盖）。以下是我必须处理的基本限制：

1.  没有可使用的架构。由于变量“嵌套”，自动生成的模式效果不佳。
2.  任何给定的域对象可以包含 0-* 域对象标签
3.  任何给定的域对象都可以包含 0-* 值标签。
4.  并非所有的嵌套都是一样的。在某些情况下，值的“键”包括隐式嵌套。例如，“config[0].cbs”表示配置对象的集合，每个对象都有不同的 .cbs 值
5.  可能无法更改 XML 结构。
6.  “表示”属性指示类型。
7.  “nestedKey”属性表示类型内的变量名。
8.  这些 XML 文件可能非常大。

我尝试过使用 JAXB，但由于标签的“通用性”，事情没有解决。也许我的 JAXB-fu 不够。当前的实现（我继承了这个）是 SAX，但它实际上不起作用。我看过 XStream，但它似乎对标签假设了一些语义结构。

我想要一种代码最少、最灵活、最可扩展的方法来生成*有意义的*域对象。如果可能的话，我想避免嵌套 HashMaps（这是当前解决方案的一部分，不起作用）。欢迎创造性的、hack-y 或聪明的想法以及直截了当的“duh”答案。

XML 片段：

```
<?xml version="1.0"?>
<domain-objects>
    <types language="C++">
        <type prefix="bool" language-representation="bool" />
        <type prefix="char" language-representation="char" />
        <type prefix="domain_object" language-representation="opti::DomainObject" />
        <type prefix="domain_object" language-representation="DomainObject" />
        <type prefix="double" language-representation="double" />
        <type prefix="float" language-representation="float" />
...
    </types>
    <domain-object key="(unique object id)" represents="PerfSuite">
        <domain-object key="(unique object id)" nestedKey="testCore" represents="PerfTestCore">
            <value key="suiteUuid" type="stl_string">(unique object id)</value>
            <value key="suiteName" type="stl_string">(some name)</value>
            <value key="suiteId" type="int">(some number)</value>
            <value key="suiteDeleted" type="bool">false</value>
        </domain-object>
        <domain-object key="(unique object id)" nestedKey="testResults" represents="PerfTestResults">
            <domain-object key="(unique object id)" nestedKey="services_0" represents="PerfServiceResult">
                <domain-object key="(unique object id)" nestedKey="stepResults_0" represents="PerfStepResult">
                    <value key="ir.max" type="int64">(some number)</value>
                    <value key="ftd.avg" type="float">(some number)</value>
                    <value key="ftd.max" type="float">(some number)</value>
...
                </domain-object>
                <value key="duration" type="uint">(some number)</value>
                <value key="flow" type="uint16">(some number)</value>
...
                        <value key="config[1].flrThreshold" type="float">(some number)</value>
                        <value key="config[1].fdvPercent" type="float">(some number)</value>
                        <value key="index" type="uint16">(some number)</value>
                        <value key="config[0].cbs" type="uint64">(some number)</value>
                        <value key="svlanVid" type="uint16">(some number)</value>
                        <value key="config[1].availThreshold" type="float">(some number)</value>
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:56:02.877

没有一种工具可以完全为您解决这个问题。

JAXB 可能仍然是解析部分的正确答案。如果您希望将每个域对象转换为您的实际域对象，您将必须自己完成最后的传递。

JAXB 将无法解析出“float”以确定它需要查找类型表以找到该浮点映射到浮点。在您的对象中查找“config[1].fdvPercent”也超出了它的能力范围。

据我所知，您有一个可以用模式描述的相当一致的文档结构。用 XML 模式编写或注释类应该很简单。

```
domain-objects = types+, domain-object+
domain-object = domain-object*, value* 
```

从这里开始，您的工作就完成了。我怀疑您将需要一些东西：

*   对每个元素中的字符串进行每种类型的解析，这样您就可以获得每个元素的值
*   从类型的字符串值到每个类型解析器的映射（看起来您可能需要一个额外的映射步骤才能从 C++？类型转换为 Java 类型）
*   值键的解析器，以便您可以找到将值应用到的变量
*   一些反射来实例化对象并在创建的对象中设置值

我无法猜测 nestedKey 或代表对您意味着什么。这些可能需要额外的步骤。

# java - 使用 Mockito 实例化 HttpServletRequest 的问题

> ID：12535163
> 
> 赞同：1
> 
> 时间：2012-09-21T17:18:33.957
> 
> 标签：java, testing, mockito

以下行失败，但有异常：

```
HttpServletRequest req = mock(HttpServletRequest.class); 
```

例外：

```
java.lang.ClassFormatError: Absent Code attribute in method 
that is not native or abstract in class file 
javax/servlet/http/Cookie 
```

有没有人遇到过这个问题？

[在这里](http://www.goodercode.com/wp/absent-code-attribute-in-method-that-is-not-native-or-abstract/)找到了 UPD 解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T17:00:53.187

您应该将 Servlet API 的实现添加到您的测试/运行时类路径中。我建议使用这个依赖：

```
<dependency>
  <groupId>org.glassfish</groupId>
  <artifactId>javax.servlet</artifactId>
  <version>3.0</version>
  <scope>test</scope>
</dependency> 
```

# c# - 如何从我的 C# 应用程序中将焦点设置到桌面

> ID：12535165
> 
> 赞同：2
> 
> 时间：2012-09-21T17:18:45.297
> 
> 标签：c#, winforms

Winform 应用程序。.Net 3.5。

我需要将焦点从我的 C# 应用程序设置到用户的桌面（几乎就像在桌面上模拟鼠标点击一样）。

有人可以告诉我如何用 C# 做到这一点吗？我只想将焦点设置在桌面上，因此焦点不再在我的应用程序上，但我想在我的应用程序中执行此操作。

编辑：下面的答案通过将焦点设置到桌面来工作，但它会最小化用户桌面上所有打开的窗口。

有没有办法可以将焦点设置到桌面上的下一个打开窗口？我只想将焦点从我的应用程序上移开（而不是最小化我的应用程序或隐藏它）。我只是想把注意力转移到别的地方。如果桌面可以最小化所有用户打开的窗口/应用程序，那么桌面可能不是最佳选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:22:23.983

这应该为你做。

```
using System; 
using System.Runtime.InteropServices; 

namespace ConsoleApplication1 { 
class Program { 
    [DllImport("user32.dll", EntryPoint = "FindWindow", SetLastError = true)] 
    static extern IntPtr FindWindow(string lpClassName, string lpWindowName); 
    [DllImport("user32.dll", EntryPoint = "SendMessage", SetLastError = true)] 
    static extern IntPtr SendMessage(IntPtr hWnd, Int32 Msg, IntPtr wParam, IntPtr lParam); 

    const int WM_COMMAND = 0x111; 
    const int MIN_ALL = 419; 
    const int MIN_ALL_UNDO = 416; 

    static void Main(string[] args) { 
        IntPtr lHwnd = FindWindow("Shell_TrayWnd", null); 
        SendMessage(lHwnd, WM_COMMAND, (IntPtr)MIN_ALL, IntPtr.Zero);  
        System.Threading.Thread.Sleep(2000); 
        SendMessage(lHwnd, WM_COMMAND, (IntPtr)MIN_ALL_UNDO, IntPtr.Zero); 
    } 
} 
} 
```

## 获取下一个窗口

我没有为这两个准备好的代码示例，但我会给你两个链接。首先认为你需要做的是调用[`GetWindow`](http://pinvoke.net/default.aspx/user32/GetWindow.html)。之后，您将需要调用[`SwitchToThisWindow`](http://pinvoke.net/default.aspx/user32/SwitchToThisWindow.html)传入的指针，您从`GetWindow`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:24:27.460

您可以在项目中添加此 COM 对象：

**Microsoft Shell 控件和自动化**

然后只需调用：

```
Shell32.ShellClass shell = new Shell32.ShellClass();
shell.MinimizeAll(); 
```

这将最小化所有窗口，然后聚焦桌面。否则，如果您的窗口非全屏，则可以使用以下命令模拟鼠标单击：

```
//This is a replacement for Cursor.Position in WinForms
[System.Runtime.InteropServices.DllImport("user32.dll")]
static extern bool SetCursorPos(int x, int y);

[System.Runtime.InteropServices.DllImport("user32.dll")]
public static extern void mouse_event(int dwFlags, int dx, int dy, int cButtons, int dwExtraInfo);

public const int MOUSEEVENTF_LEFTDOWN = 0x02;
public const int MOUSEEVENTF_LEFTUP = 0x04;

//This simulates a left mouse click
public static void LeftMouseClick(int xpos, int ypos)
{
    SetCursorPos(xpos, ypos);
    mouse_event(MOUSEEVENTF_LEFTDOWN, xpos, ypos, 0, 0);
    mouse_event(MOUSEEVENTF_LEFTUP, xpos, ypos, 0, 0);
} 
```

您可以通过查看窗口启动位置加上高度/宽度来计算坐标，然后选择一个可用空间（确实是桌面）。

# iphone - 如何使用自定义图稿创建新的 MPMediaItem？

> ID：12535170
> 
> 赞同：1
> 
> 时间：2012-09-21T17:19:04.127
> 
> 标签：iphone, ios, mpmediaitem

我有一个应用程序 (iOS5+)，我想在其中设置带有专辑封面的锁屏图像。事情是这样的：我的应用程序实际上并没有播放这首歌。所以我想我需要创建一个新的 MPMediaItem 自定义艺术品和可能的静音音轨？不过我有一种预感，我走错了路。任何指针将不胜感激。

# mysql - 多个嵌套查询

> ID：12535171
> 
> 赞同：0
> 
> 时间：2012-09-21T17:19:09.523
> 
> 标签：mysql, sql, report

我目前正在尝试使用 mysql 和 openreports 优化报告以用于会计。虽然我确信有更好的工具来完成这项工作，但这些是我目前必须使用的。我正在执行以下计算字段：

客户，订单数量，客户成本，客户调整，调整后的客户价格（客户成本 - 客户调整），供应商成本，供应商调整，调整后供应商价格（供应商成本 - 供应商调整），保证金（（客户开单 - 供应商开单）/客户计费），调整保证金（（调整客户价格-调整供应商价格）/调整客户）

这些表非常大，我必须为每个内部连接加入 4 个表。之前的报告有一个联合，在联合的每一侧都有大约 20 个嵌套选择，它们都包含至少四个连接和计数。由于我正在根据先前的字段进行计算，因此每个嵌套选择会逐渐变大，其中包含所有嵌套选择、计数和来自先前计算的计算。该查询现在有 400 行，并且非常昂贵，并且对系统造成负担，尤其是在较大的客户端上。

我意识到有更好的工具可以胜任这项工作，但我想知道针对这种情况的理想解决方案是什么。我可以在查询中创建一个用户定义的变量并在以后使用它吗？如果我每个客户有多个查询，这会起作用吗？我不能在这篇文章中包含整个 400 行查询，但我可以提供任何有用的其他详细信息。任何见解将不胜感激。

```
select office_1.name as 'Client'
,count(distinct(property_1.id)) as 'Total Billed Orders',
(select format(coalesce(sum(serviceprice_2.amount),0),2)
    from cap.service_price serviceprice_2
    inner join cap.service service_2 on service_2.id = serviceprice_2.service_id
    inner join cap.service_area servicearea_2 on servicearea_2.id = service_2.service_area_id
    inner join cap.property property_2 on property_2.id = servicearea_2.property_id
    inner join cap.office office_2 on office_2.id = property_2.client_id
    where serviceprice_2.price_context = 'CLIENT'
    and serviceprice_2.price_type_id = 236
    && service_2.date_client_billed between '2012-09-01' and now()
    and service_2.gl_code_ap='4700-70-000'
    and service_2.date_cancelled is null
    and office_2.id = office_1.id) as 'Client Price'
/* other calculations between here */
from cap.service service_1
inner join cap.service_area servicearea_1 on servicearea_1.id = service_1.service_area_id
inner join cap.property property_1 on property_1.id = servicearea_1.property_id
inner join cap.office office_1 on office_1.id = property_1.client_id
inner join cap.office vendor_1 on vendor_1.id = service_1.vendor_id
where 
service_1.date_client_billed between '2012-09-01' and now()
and service_1.date_cancelled is null
and office_1.id = 26377 
and service_1.gl_code_ap='4700-70-000'
group by office_1.id
; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:44:04.307

尽管对性能没有影响，但使用视图可以简化查询。

```
create view view1 as
select *
from 
    cap.service_price serviceprice_2
    inner join cap.service service_2 on service_2.id = serviceprice_2.service_id
    inner join cap.service_area servicearea_2 on servicearea_2.id = service_2.service_area_id
    inner join cap.property property_2 on property_2.id = servicearea_2.property_id
    inner join cap.office office_2 on office_2.id = property_2.client_id
;
create view view2 as
select *
from 
    cap.service service_1
    inner join cap.service_area servicearea_1 on servicearea_1.id = service_1.service_area_id
    inner join cap.property property_1 on property_1.id = servicearea_1.property_id
    inner join cap.office office_1 on office_1.id = property_1.client_id
    inner join cap.office vendor_1 on vendor_1.id = service_1.vendor_id 
```

现在查询更易于管理：

```
select @client_price := format(coalesce(sum(serviceprice_2.amount),0),2)
from view1
where serviceprice_2.price_context = 'CLIENT'
    and serviceprice_2.price_type_id = 236
    && service_2.date_client_billed between '2012-09-01' and now()
    and service_2.gl_code_ap='4700-70-000'
    and service_2.date_cancelled is null
    and office_2.id = office_1.id
;
select 
    office_1.name as 'Client'
    ,count(distinct(property_1.id)) as 'Total Billed Orders',
    @client_price
/* other calculations between here */
from view2
where 
    service_1.date_client_billed between '2012-09-01' and now()
    and service_1.date_cancelled is null
    and office_1.id = 26377 
    and service_1.gl_code_ap='4700-70-000'
group by office_1.id 
```

# css - 包裹上的CSS水平线

> ID：12535175
> 
> 赞同：4
> 
> 时间：2012-09-21T17:19:21.257
> 
> 标签：css, html-lists, word-wrap

我有一个来自数据库的项目列表：

```
<ul>
    <li>Jon Skeet</li>
    <li>Darin Dimitrov</li>
    <li>Marc Gravell</li>
    <li>BalusC</li>
    <li>Hans Passant</li>
    <li>SLaks</li>
    <li>VonC</li>
    <li>Greg Hewgill</li>
    <li>JaredPar</li>
</ul> 
```

该列表将在必要时换行，并且每一行都应该有水平线，看起来有点像这样：

```
____________________________________________________
 Jon Skeet   Darin Dimitrov   Marc Gravell   BalusC
____________________________________________________
 Hans Passant   SLaks   VonC   Greg Hewgill
____________________________________________________
 JaredPar
____________________________________________________ 
```

但是，我不知道如何让行有全长行，所以它看起来像：

```
____________________________________________________
 Jon Skeet   Darin Dimitrov   Marc Gravell   BalusC
____________________________________________
 Hans Passant   SLaks   VonC   Greg Hewgill
__________
 JaredPar
__________ 
```

我试过使用`display:table-cell`，但我不知道如何让它们包装，除非我知道应该连续有多少（我不知道）。

我[准备了一个 jsfiddle](http://jsfiddle.net/LTbXN/3/)来说明我已经走了多远，以及它应该是什么样子。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:45:41.313

您可以使用重复的线性渐变 - [**DEMO**](http://jsfiddle.net/LTbXN/33/)

```
ul, section {
    margin: 40px;
    max-width: 350px;
    border-bottom: 1px solid #000;

    background: -moz-repeating-linear-gradient(to bottom, black, black 1px, white 1px, white 36px);
    background: -webkit-repeating-linear-gradient(black 0, white 1px, white 36px);
}

li {
    display: inline-block;
    padding: 0.5em;
}
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:51:54.907

如果 inline-block 不能解决问题，您可以尝试`display: block`添加`table-cell`一些`float: left`属性以将所有内容保持在同一行。

你也可以玩弄`clear: both`。实际上有很多方法可以做到这一点，这取决于你喜欢什么，如果你想让它在 IE6 或任何旧手机上运行......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-13T09:20:31.307

这个适用于不同的字体大小，甚至适用于不同高度的元素：

```
ul {
    overflow: hidden;
    width: 300px;
    border: solid #000;
    border-width: 1px 0;
    padding: 0;
}

li {

    padding: 5px 20px;
    display: inline-block;
    vertical-align: top;
    position: relative;
}

li:before {
    content: '';
    display: block;
    position: absolute;
    top: -1px;
    left: 0;
    background: #000;
    height: 1px;
    width: 300px;
} 
```

这会在每个元素的顶部添加一条绝对定位的全宽线，然后隐藏多余的部分。

# php - 如何使这个 PHP 图像文件抓取脚本以数字方式排序？

> ID：12535178
> 
> 赞同：-1
> 
> 时间：2012-09-21T17:19:28.790
> 
> 标签：php

> **可能重复：**
> [如何使用 asort() function() 在 php 中按 alpha 投注对值数组进行排序](https://stackoverflow.com/questions/6937869/how-to-sort-array-of-value-by-alpha-bet-in-php-using-asort-function)

基本上，脚本从目录中读取图像，然后将它们输出到 html。所以只是试图让这个非常好的脚本以数字方式对图像进行排序。现在它对图像进行排序的方式非常随机。

```
 if ($handle = opendir($dir)) {
        while (false!== ($file = readdir($handle))) {
        sort($file);
        $ext = strrchr($file,".");
        echo "";
        if(in_array($ext,$good_ext))
        {   
        //do something with file
        echo "<img src='images/".$modelname."/slider/".$file."'>";
        }
        else
        {
        echo "bad";
        }
        }
        closedir($handle);
        }
        else
        {
        echo "$dir Directory does not exist!";
        }
        ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:28:13.290

这应该这样做。

```
if ($handle = opendir($dir)) {
    while (false!== ($file = readdir($handle))) {
        $ext = strrchr($file,".");
        echo "";
        if(in_array($ext,$good_ext)) {          
            $files[] = $file;
        }

    }
    closedir($handle);

    sort($files);

    //do what what you need with it

}
else {
    echo "$dir Directory does not exist!";
}
?> 
```

$files 将所有文件按您需要的方式排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:28:17.400

您可以使用`natsort`

例子

```
$img =    "<img src='images/$modelname/slider/%s' />";
$imgExts = array("gif", "jpg", "jpeg", "png", "tiff", "tif");
$files = scandir(__DIR__);
natsort($files);

foreach($files as $file)
{
    $urlExt = pathinfo($file, PATHINFO_EXTENSION);
    if (in_array($urlExt, $imgExts)) {
        printf($img,$file);
    }
} 
```

# c++ - c++11 std::thread 用函数编译，但不是类

> ID：12535179
> 
> 赞同：3
> 
> 时间：2012-09-21T17:19:30.070
> 
> 标签：c++, c++11, std

我正在使用带有 c++11 标志的 g++ 4.7。在这个演示中：

```
#include <iostream>
#include <thread>

class do_work
{
public:
   void operator()()
   {
     std::cout << "Doing work..." << std::endl;
   }
};

void foo()
{

}

int main()
{
  // Does not work
  std::thread t(do_work);
  t.join(); // error: request for member ‘join’ in ‘t’, which is of non-class type ‘std::thread(do_work)’

  // Works
  std::thread t2(foo);
  t2.join();

  return 0;
} 
```

我可以在使用函数作为其构造函数参数创建的线程上成功调用 join()，但我不能在使用仿函数作为其构造函数参数创建的线程上调用 join()（参见错误内联）。谁能解释一下？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-21T17:21:37.467

您已将`t`函数声明为获取`do_work`和返回`std::thread`.

你可能想写

```
do_work worker;
std::thread t{worker}; 
```

或者

```
std::thread t{do_work{}}; 
```

或者

```
std::thread t((do_work())); 
```

注意

```
std::thread t(do_work()); 
```

行不通；它被[令人烦恼地解析](https://stackoverflow.com/questions/5926103/most-vexing-parsec)为声明一个函数，该函数`t`接受一个不带参数和返回的函数`do_work`，然后返回`std::thread`。用括号包裹`do_work`临时或使用统一的初始化语法（在任何时候）将修复它。

这是养成尽可能使用统一初始化语法的习惯的一个很好的理由；如果你写

```
std::thread t{do_work};  // incorrect 
```

那么编译将在该行而不是`join`.

# javascript - 关闭注入的 iframe

> ID：12535182
> 
> 赞同：0
> 
> 时间：2012-09-21T17:19:42.990
> 
> 标签：javascript, iframe, google-chrome-extension

我有一个从我的 chrome 扩展程序运行的内容脚本。此脚本将一个注入`iframe`到当前页面的正文中。我希望有可能`iframe`从`iframe`. 我该怎么做呢？当我在网上搜索这个问题时，几乎每个解决方案都使用由于`window.parent.document`某种原因在我的情况下未定义的属性。有任何想法吗？

**编辑 - 代码示例：**

在 HTML 中`iframe`：

```
<script type="text/javascript">
        function frameClose() {
            var windowFrames = window.parent.frames;
            for (var i = 0; i < windowFrames.length; i++) {
                var aFrame = windowFrames[i];
                if (aFrame.name == 'myFrame') {
                    alert('in frame');
                    // WHAT TO DO HERE?
                    // window.parent.document is undefined
                    // aFrame.parentNode.removeChild(aFrame); - THIS DOES NOT WORK ALSO
                    break;
                }
            }
        }
    </script> 
```

这就是我注入的方式`iframe`：

*扩展.js*

```
chrome.browserAction.onClicked.addListener(function(tab) {

    chrome.tabs.executeScript(null, {
        file : "/js/PushIFrame.js"
    }, function() {
        if (chrome.extension.lastError) {
        }
    });
}); 
```

在*PushIFrame.js*我有：

```
chrome.extension.sendMessage({
    action: "pushFrame",
    source: pushIframe(document)
});

function pushIframe(document) {
    var existingFrame = document.getElementById('bmarkFrame');
    if (existingFrame == null) {
        var temp = document.createElement('iframe');
        temp.id = 'myFrame';
        temp.name = 'myFrame';
        temp.setAttribute('scrolling', 'no');
        temp.setAttribute('allowtransparency', 'true');
        temp.style.border = 'none';
        temp.style.height = '100%';
        temp.style.width = '100%';
        temp.style.position = 'fixed';
        temp.style.zIndex = 99999999;
        temp.style.top = 0;
        temp.style.left = 0;
        temp.style.display = 'block';
        temp.src = 'https://www.mysite.com/';

        document.body.appendChild(temp);
    }
    else {
        existingFrame.style.display = 'block';
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:26:11.140

让内容脚本（比如`PushIframe.js`）将`message`事件绑定到主框架。然后，每当你想隐藏 iframe 时，调用[`parent.postMessage`](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)通知主框架。此消息由内容脚本接收，您可以从中隐藏框架（如您的函数中定义的那样`pushIframe`）。

```
// PushIframe.js:
addEventListener('message', function(ev) {
    if (ev.data === 'closeIframe') {
        pushIframe(document); // Your code
    }
});

// Iframe:
<script>
function frameClose() {
    parent.postMessage('closeIframe', '*');
}
</script> 
```

# vim - 如何在 .vimrc 中设置两个 autocmd BufWritePre

> ID：12535183
> 
> 赞同：1
> 
> 时间：2012-09-21T17:19:55.627
> 
> 标签：vim, vi, autocmd

在 VIM 中保存/写入时，我想修剪尾随空格并确保文件的行尾是 UNIX 而不是 DOS。

这两个命令都可以单独工作，但我不知道如何让它们在 VIM 中写入/保存文件时同时运行。

```
autocmd BufWritePre,FileWritePre * :%s/\s\+$//e
autocmd BufWritePre,FileWritePre * :%s/\r$// 
```

我已经尝试了以下所有方法，但 VIM 仍然抛出错误：

```
autocmd BufWritePre,FileWritePre * :%s/\s\+$//e|:%s/\r$// 
```

或者

```
autocmd BufWritePre,FileWritePre * %s/\s\+$//e|%s/\r$// 
```

和

```
augroup prewrites
    autocmd!
    autocmd BufWritePre,FileWritePre * :%s/\s\+$//e
    autocmd BufWritePre,FileWritePre * :%s/\r$//                                                                                             
augroup END 
```

这些都不会产生预期的结果而不会被 VI 抛出错误。有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T18:42:44.853

我终于弄明白了。罪魁祸首并没有结束第二次搜索`e`。见下面的最终结果：

```
augroup prewrites
   autocmd!
    autocmd BufWritePre,FileWritePre * :%s/\s\+$//e | %s/\r$//e
augroup END 
```

# mysql - 如何在遇到某个字段时结束 LOAD DATA INFILE

> ID：12535184
> 
> 赞同：1
> 
> 时间：2012-09-21T17:19:58.960
> 
> 标签：mysql, csv

这是我到目前为止的 SQL 查询：

```
LOAD DATA INFILE 'filename.csv'
INTO TABLE zt_accubid
FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
LINES TERMINATED BY '\r\n'
IGNORE 4 LINES 
```

一旦遇到带有的字段，我需要能够结束该过程`value="xyz"`。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:31:15.660

`LOAD DATA INFILE`没有这样的选择。不过，有一些解决方法

*   您可以通过首先操作文件来解决 MySQL 之外的问题
*   正如 Alain Collins 所提到的，如果包含您的标记的列只有唯一值，并且您没有`LOAD DATA`内部事务，则可以使用唯一键作为停止器。
*   您可以使用桌子上的触发器作为止动器
*   如果标记靠近表格的末尾或者开销对您来说不重要，您可以将一个完整`LOAD DATA`的表格放入临时表格中，然后使用`INSERT INTO ... SELECT`仅将相关数据移动到您的最终表格中
*   同样，您可以加载所有数据，然后删除不相关的部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:25:08.363

当然 - 在加载之前在数据库中放置一行，并在其上放置一个唯一键。LOAD 遇到副本时应该会失败。

# django - Django：处理多选美国州选择的最佳方式

> ID：12535185
> 
> 赞同：1
> 
> 时间：2012-09-21T17:20:05.097
> 
> 标签：django

包含在模型中以保存多选美国州的最佳方法是什么？我需要用户选择多个状态并将这些数据保存在模型中（通过 form 或 modelform ）。

我尝试[了 LocalFlavor USStateField 模型](https://docs.djangoproject.com/en/dev/ref/contrib/localflavor/#django.contrib.localflavor.us.models.USStateField)，它似乎对我不起作用，因为我不能像普通模型一样调用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:49:41.990

我写的[这个django 应用程序可以帮助你。](https://github.com/thikonom/django_countries_states)

# php - 使用 cURL 阅读，完成一些步骤，然后发布

> ID：12535197
> 
> 赞同：0
> 
> 时间：2012-09-21T17:21:00.740
> 
> 标签：php, post, curl, login, readfile

解决了： **耶。除了你写的德鲁，我发现这个：[http:](http://www.smooka.com/blog/2009/07/24/maintaining-php-session-when-using-curl/) //www.smooka.com/blog/2009/07/24/maintaining-php-session-when-using-curl/session_write_close(); 在初始化下一组之前。现在我只需要弄清楚 AJAX/jquery，因为看起来我无法在会话中注册资源变量（例如 Curl 的句柄）。**

* * *

我想使用 cURL 登录网站。他们的登录过程使用了一个令牌，我可以使用 file_get_contents() 对其进行解析。但是，当我尝试使用 cURL 再次访问该站点时，令牌不再有效。有没有办法使用 cURL 读取文件，暂停进行计算/步骤，*然后*发布字段？有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:01:07.307

该令牌可能不再有效，因为它与您访问该站点时设置的会话 cookie 相关联。由于`file_get_contents`没有 cookie 跟踪，您应该使用 cURL 请求初始 URL，获取令牌，进行计算，然后再次使用 cURL 回发。

要让 cURL 跟踪 cookie，请使用 cURL 句柄的`CURLOPT_COOKIEFILE`和`CURLOPT_COOKIEJAR`选项。

```
$cookies = '/tmp/cookies.txt';  // path to cookie file
$ch = curl_init('http://site.com');
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookies);
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookies);
//...
$res = curl_exec($ch);

// grab token here...

// do calculations here...

curl_setopt($ch, CURLOPT_URL, 'http://site.com/next-url');

$res = curl_exec($ch); // execute next request on same handle 
```

这是我的一些其他答案，它们使用 cURL 登录各种网站并执行操作；查看代码可能对您有所帮助。

*   [使用 PHP 和 Curl 登录 Google，Cookie 已关闭？](https://stackoverflow.com/questions/8991873/login-to-google-with-php-and-curl-cookie-turned-off/8992557#8992557)
*   [PHP Curl - Cookie 问题](https://stackoverflow.com/questions/7522149/php-curl-cookies-problem/7532730#7532730)
*   [无法从 LS 获取城市列表](https://stackoverflow.com/questions/7548524/trouble-getting-a-list-of-cities-from-ls/7605146#7605146)
*   [如何使用 Curl 和 SSL 以及 cookie 登录](https://stackoverflow.com/questions/10307744/how-to-login-in-with-curl-and-ssl-and-cookies/10307956#10307956)
*   [如何使用涉及 cookie 的 PHP 制作 Curl 帖子](https://stackoverflow.com/questions/11419185/how-to-make-curl-post-using-php-involving-cookies/11419912#11419912)
*   [使用 curl 检索 Android Market 图书馆](https://stackoverflow.com/questions/8958495/retrieve-android-market-mylibrary-with-curl/8998077#8998077)
*   [php cURL 登录 jsp 网站并返回 HTML](https://stackoverflow.com/questions/9575419/php-curl-log-into-jsp-website-and-return-html/9576205#9576205)

# c++ - 使用 OCCI 在 Oracle Database 11g 中存储无符号 64 位整数的最佳方法

> ID：12535202
> 
> 赞同：1
> 
> 时间：2012-09-21T17:21:34.200
> 
> 标签：c++, database, oracle11g, uint64, occi

我使用的是 11.2 版本，并且在表字段中没有直接支持 uint64。你建议在性能方面做什么？它必须是主键。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:47:02.960

可能将其转换为字符，然后将其作为字符插入，并带有 to_number 以将其放入正确的格式？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T23:41:49.023

我对 Oracle 一无所知，但 MS SQL 也同样受到困扰，我最终将我的 64 位无符号整数存储在 binary(8) 字段中。如果 Oracle 有类似的字段上限（我无法想象它没有），也许同样适用于您。

SQL Server 的结果是将 binary(n) 字段与其他 binary(n) 字段进行比较，有效地比较为字节数组，如果大小相同，则意味着它们也作为大端表示进行比较（如果这是您存储它们的方式，你会疯掉的）。

对不起，我不精通甲骨文。必须与带来你的人共舞 =)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T10:53:29.837

我正在使用 RAW(8) 数据类型，并用以下方式编写它：

```
uint64 i;
Bytes key((unsigned char*)&i, 8);
statement->setBytes(1, key); 
```

快速而紧凑，并且似乎运行良好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-31T04:27:37.330

您可以使用 number(20,0) 作为 64 位整数，最大值为 18,446,744,073,709,551,615。
使用数字类型也可以进行数学运算。

# java - cursor.moveToFirst 似乎被跳过

> ID：12535203
> 
> 赞同：1
> 
> 时间：2012-09-21T17:21:34.620
> 
> 标签：java, android, sql, database, cursor

我是 Java 新手，只是想创建一个数据库。我设法制作了一个数据库，但当我想读取这些值时，它似乎得到了一个错误。

这是我的设置活动代码（它要求设置值并将它们添加到特定 ID 的数据库中）

```
public class Settings extends Activity{

    Button Save;
    static Switch SwitchCalculations;
    public static String bool;
    public static List<Integer> list_id = new ArrayList<Integer>();
    public static List<String> list_idname = new ArrayList<String>();
    public static List<String> list_kind = new ArrayList<String>();
    public static List<String> list_value = new ArrayList<String>();
    static Integer[] arr_id;
    static String[] arr_idname;
    static String[] arr_kind;
    static String[] arr_value;
    public static final String TAG = "Settings";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.settings);

        Save = (Button) findViewById(R.id.btnSave);
        SwitchCalculations = (Switch) findViewById(R.id.switchCalcOnOff);

        readData();

        Save.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                        writeData();
                        //Toast.makeText(this, "Data has been saved.", Toast.LENGTH_SHORT).show();
                        readData();

                    Save.setText("Opgeslagen");
            }
        });
    }
    public void writeData() {
            int id = 1;
            String idname = "switchCalcOnOff";
            String kind = "switch";
            boolean val = SwitchCalculations.isChecked();
            String value = new Boolean(val).toString();

            dbHelper_Settings dbh = new dbHelper_Settings(this);
            SQLiteDatabase db = dbh.getWritableDatabase();
            ContentValues cv = new ContentValues();
            cv.put(dbh.C_ID, id);
            cv.put(dbh.C_IDNAME, idname);
            cv.put(dbh.C_KIND, kind);
            cv.put(dbh.C_VALUE, value);

            if (dbh.C_ID.isEmpty() == true) {
                db.insert(dbh.TABLE, null, cv);
                Log.d(TAG, "Insert: Data has been saved.");
            } else if (dbh.C_ID.isEmpty() == false) {
                db.update(dbh.TABLE, cv, "n_id='1'", null);
                Log.d(TAG, "Update: Data has been saved.");
            } else {
                Log.d(TAG, "gefaald");
            }
            db.close();
    }
    public void readData() {
        dbHelper_Settings dbh = new dbHelper_Settings(this);
        SQLiteDatabase db = dbh.getWritableDatabase();
        List<String> list_value = new ArrayList<String>();
        String[] arr_value;
        list_value.clear();

        Cursor cursor = db.rawQuery("SELECT " + dbh.C_VALUE + " FROM " + dbh.TABLE + ";", null);

        if (cursor.moveToFirst()) {
        do {
            list_value.add(cursor.getString(0));
        } while (cursor.moveToNext());
        }

        if (cursor != null && !cursor.isClosed()){

            cursor.close();
        }
        db.close();
        arr_value = new String[list_value.size()];

        for (int i = 0; i < list_value.size(); i++){
            arr_value[i] = list_value.get(i);
        }
    }
} 
```

然后我的 dbHelper 活动如下所示：

```
package com.amd.nutrixilium;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class dbHelper_Settings extends SQLiteOpenHelper{

    private static final String TAG="dbHelper_Settings";

    public static final String DB_NAME = "settings.db";
    public static final int DB_VERSION = 10;
    public final String TABLE = "settings";
    public final String C_ID = "n_id";  // Special for id
    public final String C_IDNAME = "n_idname";
    public final String C_KIND = "n_kind";
    public final String C_VALUE = "n_value";
    Context context;

    public dbHelper_Settings(Context context) {
        super(context, DB_NAME, null, DB_VERSION);
        this.context = context;
    }

    // oncreate wordt maar 1malig uitgevoerd per user voor aanmaken van database
    @Override
    public void onCreate(SQLiteDatabase db) {
        String sql = String.format("create table %s (%s int primary key, %s TEXT, %s TEXT, %s TEXT)", TABLE, C_ID, C_IDNAME, C_KIND, C_VALUE);

        Log.d(TAG, "onCreate sql: " + sql);

        db.execSQL(sql);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("drop table if exists " + TABLE); // wist een oudere database versie
        Log.d(TAG, "onUpgrate dropped table " + TABLE);
        this.onCreate(db);
    }
} 
```

奇怪的是我在这里没有收到任何错误消息。但我曾经`Log.d(TAG, text)`检查过脚本被跳过的位置，即在`cursor.moveToFirst()`.

那么有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:12:27.827

在这里，与您似乎期望的相反，您实际上检查了一个文本常量是否为空：

```
if (dbh.C_ID.isEmpty() == true) { 
```

它不是：它总是包含“n_id”

我认为您的意图是查找具有该 ID 的记录，并根据结果插入或更新。

您应该这样做：尝试通过帮助程序进行选择，然后按照上面的代码插入或更新。

编辑：

添加到您的助手中，如下所示：

```
public boolean someRowsExist(SQLiteDatabase db) {
    Cursor cursor = db.rawQuery("select EXISTS ( select 1 from " + TABLE + " )", new String[] {});
    cursor.moveToFirst();
    boolean exists = (cursor.getInt(0) == 1);
    cursor.close();
    return exists;
} 
```

并使用它来检查数据库中是否有任何行：

```
if (dbh.someRowsExist(db)) {  // instead of (dbh.C_ID.isEmpty() == true) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-20T01:59:37.983

看起来您在调试查询时遇到了问题。Android 提供了一个方便的方法[DatabaseUtils.dumpCursorToString()](http://developer.android.com/reference/android/database/DatabaseUtils.html#dumpCursorToString%28android.database.Cursor%29)将整个 Cursor 格式化为一个字符串。然后，您可以将转储输出到 LogCat 并查看是否实际跳过了任何行。

# mysql - 不使用tcp连接Mysql

> ID：12535206
> 
> 赞同：0
> 
> 时间：2012-09-21T17:21:44.730
> 
> 标签：mysql, hibernate, jdbc

我的客户有一个奇怪的问题，但需要一些技术细节来证明他的疯狂。是否可以连接到与应用程序服务器位于同一服务器上的 mysql 服务器，即 tomcat 以在没有 tcp 的情况下进行连接。我们正在使用 jdbc 和 mysql 驱动程序从应用程序连接到数据库。任何人都可以帮我起草一些细节或让我了解是否缺少任何细节。

谢谢，西里什。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:24:02.703

您可以通过`--protocol`并选择其中之一`{TCP|SOCKET|PIPE|MEMORY}`。请参阅文档：[http ://dev.mysql.com/doc/refman/4.1/en/connecting.html](http://dev.mysql.com/doc/refman/4.1/en/connecting.html)

# javascript - IE8 打印问题

> ID：12535207
> 
> 赞同：0
> 
> 时间：2012-09-21T17:21:55.153
> 
> 标签：javascript, asp.net, html

我有一个打印我的订单详细信息的 href 链接。现在在 Firefox 或 chrome 中单击此按钮，订单详细信息正在打印，但在 IE8 中没有发生同样的情况。

虽然在 IE8 中，订单详细信息正在打印，但同时它会重新加载，因此我的页面进入购物篮页面，因为当前会话没有待完成的订单。

实际上有一个js文件检查有效会话，但是这个js没有放在href中而是放在页面中，所以我认为在ie8中当我点击打印href时页面会刷新，这会导致页面进入购物篮页面。

请建议如何在 IE8 中摆脱它....

# ios - 子类化 UICollectionViewLayoutAttributes

> ID：12535208
> 
> 赞同：3
> 
> 时间：2012-09-21T17:21:55.760
> 
> 标签：ios, ios6, uicollectionview

我最近开始使用很棒的 UICollectionView API，取得了合理的进展，但几乎整天都被困在一个问题上，我希望有人可以帮助我：

我需要为某些单元格的属性添加一些自定义细节。为了做到这一点，正确的方法似乎是继承 UICollectionViewLayoutAttributes 并将我需要的属性添加到我的子类中。到目前为止一切顺利，除了当我返回我的 LayoutAttributesSubclass 时，我总是得到以下错误：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** setObjectForKey: key cannot be nil' 
```

尝试追踪了一段时间后，我的印象是该错误与代表元素种类有关，并且代表元素类别在我的子类实例中为零。但是这些属性是只读的，所以我不能设置它们。我设法通过作弊以某种方式绕过错误，获取常规 UICollectionViewAttributes 实例，然后使用 object_setClass 将其更改为 LayoutAttributesSubclass，但这会引发大量其他问题，而且对我来说似乎相当阴暗。

简而言之，有谁知道上面的错误是什么意思，以及如何正确创建/使用 UICollectionViewLayoutAttributes 子类？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-24T08:18:04.647

设置自定义属性时，您需要子类化 UICollectionViewLayoutAttributes*和*子类 UICollectionViewLayout 并通过覆盖 UICollectionViewLayout 类中的 +(Class)layoutAttributesClass 来“声明”您的自定义属性子类类名称。当您使用工厂方法实例化/出列布局属性对象时，系统调用该类方法以查看是否提供自定义类。

```
@interface YourCustomCollectionViewAttributes : UICollectionViewLayoutAttributes

@property (nonatomic)               UIEdgeInsets        myCustomProperty                        

@end

@interface YourCustomCollectionViewLayout : UICollectionViewLayout

@end

@implementation YourCustomCollectionViewLayout

+ (Class)layoutAttributesClass
{
    return [IRTableCollectionViewLayoutAttributes class];
}

@end 
```

根据文档，这是正确的，应该可以防止您遇到的特定错误。此外，当您实现自定义 iVar 时，请务必为 -(id)copyWithZone: 实现覆盖，否则 UICollectionView 将丢失您已应用于自定义集合视图对象的任何自定义值。

# sublimetext2 - Sublime - 如何在构建文件中去除扩展名？

> ID：12535209
> 
> 赞同：0
> 
> 时间：2012-09-21T17:21:56.250
> 
> 标签：sublimetext2, sublimetext

我有以下用于 scss 的构建文件：

```
{
    "cmd": ["C:/bin/ruby193/bin/ruby.exe", "C:/bin/ruby193/bin/sass", "$file", "$file.css", "--precision", "5"],
    "selector": "source.scss"
} 
```

这对于喜欢在 sublime 中构建 sass 并输出 Home.scss.css 格式文件的人来说非常有用。然而，我们的一些团队使用 Visual Studio 的 Mindscape 工作台进行编译，从最近的更新来看，它不遵守自定义约定并且总是输出 Home.css。

如何调整我的 sublime 构建文件，使其剥离扩展名并始终输出 Home.css？

我已经尝试过`"$file".strip('.scss')`，但我猜该文件没有使用完整的 python 解释器进行解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:46:20.687

[https://www.sublimetext.com/docs/3/build_systems.html](https://www.sublimetext.com/docs/3/build_systems.html)

您要搜索的是`$file_path\$file_base_name.css`（或`/`）。

# c - 如何在C程序中将数组中的元素设置为null

> ID：12535211
> 
> 赞同：2
> 
> 时间：2012-09-21T17:22:10.940
> 
> 标签：c, arrays, unix, null, element

我正在 Unix 中编写 C 程序，但无法弄清楚如何将数组元素设置为 NULL。我需要能够这样做以从字符串中删除多个字符。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T17:33:10.393

您不能分配`null`给特定的 char 数组索引，因为该索引表示的值是 char 而不是指针。但是如果您需要从给定字符串中删除特定字符，您可以按如下方式实现

```
void removeChar(char *str, char garbage) {

    char *src, *dst;
    for (src = dst = str; *src != '\0'; src++) {
        *dst = *src;
        if (*dst != garbage) dst++;
    }
    *dst = '\0';
} 
```

测试程序

```
#include<stdio.h>
int main(void) {
    char* str = malloc(strlen("abcdef")+1);
    strcpy(str, "abcdbbbef");
    removeChar(str, 'b');
    printf("%s", str);
    free(str);
    return 0;
} 
```

输出

```
acdef 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T18:56:19.053

如果您有`char[]`，您可以使用以下方法将单个元素归零：

```
char arr[10] = "foo";
arr[1] = '\0'; 
```

请注意，这与 assigning 不同`NULL`，因为`arr[1]`它是 a`char`而不是指针，因此您不能`NULL`对其进行分配。

也就是说，这可能不会像你想象的那样做。上面的示例将生成 string `f`，而不是`fo`您似乎期望的那样。

如果要从字符串中删除字符，则必须使用`memmove`和一些指针算法将字符串的内容向左移动（包括空终止符）：

例子：

```
#include <stdio.h>
#include <string.h>

int removechars(char *str, size_t pos, size_t cnt) {
    size_t len = strlen(str);
    if (pos + cnt > len)
        return -1;

    memmove(str + pos, str + pos + cnt, len - pos - cnt + 1);
    return 0;
} 
```

然后像这样使用它：

```
char str[12] = "hello world";
if (removechars(str, 5, 4) == 0)  /* remove 4 chars starting at str[5] */
    printf("%s\n", str);          /* hellold */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T17:49:58.107

如果你在谈论一个指针数组（比如`char **`），你只会说`array[element] = NULL;`. 但听起来好像你真的只想截断一个字符串 ( `char *`)，在这种情况下你实际上想要写`string[index] = '\0'`，`\0`空字节在哪里。但是，据我所知，`0`、`'\0'`和`NULL`都等价且等于 0（如果我错了，请纠正我）。当然，为了清楚起见，您应该使用`0`数字、`'\0'`字符和字符串以及`NULL`指针。

# objective-c - 设备旋转时如何获取屏幕尺寸？

> ID：12535218
> 
> 赞同：0
> 
> 时间：2012-09-21T17:22:46.603
> 
> 标签：objective-c

我正在尝试获取屏幕尺寸并获得如下信息。

```
CGRect deviceSize = [UIScreen mainScreen].bounds; 
```

但是当设备旋转时（从上到左），deviceSize 的大小值不会改变。

旋转时如何更改屏幕尺寸？

是否有支持的 API 或手动制作？

# reporting-services - SSRS - 上传报告并复制到网络目录

> ID：12535234
> 
> 赞同：1
> 
> 时间：2012-09-21T17:24:14.300
> 
> 标签：reporting-services, ssrs-2008

我们正在使用 SSRS，当我们使用网络报告管理器“上传”一个 .rdl 文件时，我们希望自动获取该 .rdl 文件的副本并将其放在网络驱动器上。

我根本不熟悉 SSRS，我什至不知道从哪里开始寻找。我假设有一个.API。

有没有办法在文件上传到数据库后通过网络报告管理器进行捕获，然后我可以将该 rdl 文件复制到我选择的网络路径？

**更新：** 微软似乎不允许自定义报告管理器。 [http://msdn.microsoft.com/en-us/library/ms157147(v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms157147%28v=sql.90%29.aspx)

所以也许答案是我不能做我想做的事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T15:19:53.457

看起来您正在尝试保留 SSRS 报告的备份。[这](http://www.sqlmusings.com/2011/03/28/how-to-download-all-your-ssrs-report-definitions-rdl-files-using-powershell/) 是将文件下载到本地驱动器的链接。如果需要，您可以修改相同的内容以复制到网络位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T21:27:16.897

您无法使用报告管理器执行您所要求的操作。但是，您可以使用 Reporting Services 提供的 rs.exe 实用程序创建一个脚本，将 rdl 文件从报表服务器下载到磁盘。

此处示例：http: [//blog.geektrainer.com/2012/04/download-all-reports.html](http://blog.geektrainer.com/2012/04/download-all-reports.html)

# jquery - jQuery 验证已停止与 Zurb 基金会合作

> ID：12535236
> 
> 赞同：2
> 
> 时间：2012-09-21T17:24:17.167
> 
> 标签：jquery, validation, zurb-foundation

我有一个表格，它似乎有效，并且验证得很好。现在它似乎没有，我不知道为什么不。主要是因为我不是专家。

我已经使用 Zurb Foundation 来创建该站点，其余的一切似乎都很好，但是如果我能获得一些 jQuery 验证，那将是史诗般的。

有谁知道从哪里开始，或者从哪里开始帮助其他人帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:59:19.297

这是 Placeholder.js 和 validation.js 之间的冲突

在 GitHub 上查看此问题 [https://github.com/zurb/foundation/issues/747](https://github.com/zurb/foundation/issues/747)

# arrays - 在无限排序数组中找到一个元素

> ID：12535241
> 
> 赞同：3
> 
> 时间：2012-09-21T17:24:27.523
> 
> 标签：arrays, algorithm

我把这个作为面试问题...

已排序的无限数组，并且从某个位置（我们不知道该位置）只有特殊符号“$”才会出现，我们需要在该数组中找到一个元素......

我给出了一个解决方案，例如获取 $ 的第一次出现，然后从 $ 对前一部分进行二进制搜索

找到第一次出现的 $ i 给出了解决方案，例如窗口大小增加 if (i,2i)

我给的代码是

```
#include<stdio.h>

int first(int *arr,int start,int end,int index)
{
    int mid=(start+end)/2;
    if((mid==start||arr[mid-1] != '$') && arr[mid]=='$')
        return mid;
    if(arr[mid]=='$')
        return first(arr,start,mid-1,index);
    else
    {
        if(arr[end] =='$')
            return first(arr,mid+1,end,index);
        else
            return first(arr,end+1,(1<<index),index+1);
    }
}

int binsearch(int *arr,int end ,int n)
{
    int low,high,mid;
    high=end-1;
    low=0;
    while(low<= high)
    {
        mid=(low+high)/2;
        if(n<arr[mid])
            high=mid-1;
        else if (n >arr[mid])
            low=mid+1;
        else
            return mid;
    }
    return -1;
}

int main()
{
    int arr[20]={1,2,3,4,5,6,7,8,9,10,'$','$','$','$','$','$','$','$','$','$'};
    int i =first(arr,0,2,2);
    printf("first occurance of $ is  %d\n",i);
    int n=20;//n is required element to be found
    if(i==0||arr[i-1]<n)
        printf(" element %d not  found",n);
    else{
        int p=binsearch(arr,i,n);
        if(p  != -1)
            printf("element %d is found at index %d",n,p);
        else
            printf(" element %d not found",n);
    }
    return 0;
} 
```

有没有更好的方法来解决上述问题？

而且我还想知道找到 $ 的第一次出现为什么我们应该只以 2 的幂移动窗口为什么不像 (i,3i) 这样 3

有人可以通过一些关于重复关系的信息..请帮助..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T17:31:42.273

对我来说似乎是一个很好的方法。作为一个小的优化，`first`当您达到任何大于您正在搜索的数字（不仅仅是`$`）时，您可以停止您的例程。

通过 2 的幂来扩大窗口意味着您将在`log_2(n)`迭代中找到终点。以 3 倍增长意味着你会在`log_3(n)`迭代中找到它，它更小。但不是渐近更小，如`O(log_2(n)) == O(log_3(n))`。而且您的二进制搜索无论如何都会采取`log_2(n)`措施，因此使`first`零件更快不会帮助您的大O运行时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-20T10:26:34.117

迭代格式的第一个函数的有效部分是

```
private int searchNum(int[] arr, int num, int start, int end) {
    int index = 0;
    boolean found = false;
    for (int i = 0; i < arr.length; i = 1 << index) {
        if (start + i < arr.length) {
            if (arr[start] <= num && arr[start + i] >= num) {
                found = true;
                return bsearch(arr, num, start, start + i);
            } else {
                start = start + i;
            }
        } else {
            return bsearch(arr, num, start, arr.length - 1);
        }
    }
    return 0;
} 
```

这不会让您第一次出现，而是尝试直接查找数字，因为在您的情况下，您甚至在找到 $ 符号之前就丢失了可以找到数字本身的概率。所以最坏情况的复杂性是 O(logn).. 最好的情况是 (1) 之后你将它传递给

```
private int bsearch(int[] array, int search, int first, int last) {
    int middle = (first + last) / 2;
    while (first <= last) {
        if (array[middle] < search)
            first = middle + 1;
        else if (array[middle] == search) {
            System.out.println(search + " found at location "
                    + (middle + 1) + ".");
            return middle;
        } else
            last = middle - 1;

        middle = (first + last) / 2;
    }
    if (first > last)
        System.out.println(search + " is not present in the list.\n");
    return -1;
} 
```

调用函数

```
 if ((pos = searchNum(arr, num, 0, 2)) != -1) {
        System.out.println("found @ " + pos);
    } else {
        System.out.println("not found");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-27T10:49:59.580

这是python解决方案。

```
arr = [3,5,7,9,10,90,100,130,140,160,170,171,172,173,174,175,176]
elm = 171
k = 0
while (True):
    try:
        i = (1 << k) - 1 #  same as 2**k - 1 # eg 0,1,3,7,15
        # print k
        if(arr[i] == elm):
            print "found at " + str(i)
            exit()
        elif( arr[i] > elm):
            break                   

    except Exception as e:          
        break
    k = k+1

begin = 2**(k-1) # go back to previous power of 2
end = 2**k -1 

# Binary search
while (begin <= end):
    mid = begin + (end-begin)/2
    try:
        if(arr[mid] == elm):
            print "found at " + str(mid)
            exit()          
        elif(arr[mid] > elm):
            end = mid-1
        else:
            begin = mid+1

    except Exception as e:
        # Exception can occur if you are trying to access min element and that is not available. hence set end to mid-1
        end = mid-1

print "Element not found" 
```

# ios - 新的 ios6 语言键盘

> ID：12535243
> 
> 赞同：0
> 
> 时间：2012-09-21T17:24:44.297
> 
> 标签：ios, iphone, ipad, keyboard

> **可能重复：**
> [iPhone/ObjC - 如何创建自定义键盘](https://stackoverflow.com/questions/4643167/iphone-objc-how-to-create-a-custom-keyboard)

看到苹果不打算为我的母语实现语言键盘，我想看看是否可以创建一个。目前，我必须禁用 iPad 和 iPhone 上的自动完成和更正功能，才能以我的母语输入消息或电子邮件。

我的母语是南非荷兰语，如今世界上有大约 2300 万南非荷兰语使用者。

如何为 ios6 创建一个新的语言键盘？

# mysql - 如何使用 yii 模型插入 mysql 空间点？

> ID：12535245
> 
> 赞同：3
> 
> 时间：2012-09-21T17:24:52.063
> 
> 标签：mysql, yii, geospatial, spatial

我有一个模型类型，它是从一个具有地址数据的 mysql 表和一个`POINT`名为“坐标”的空间字段生成的。创建或更新模型时，我想对地址进行地理编码并将纬度和经度坐标存储在`POINT`字段中。

我的理解是这样做的方法是对模型`beforeSave`方法中的地址进行地理编码。我已经这样做了，并且在关联数组中有坐标。现在我的问题是如何将这些数据插入到我的坐标字段中？这就是我正在尝试的：

```
public function beforeSave()
{
    $singleLineAddress = $this->getSingleLineAddress();
    $coords = Geocoder::getCoordinates($singleLineAddress);

    // WORKS: using the following line works to insert POINT(0 0)
    //$this->coordinates = new CDbExpression("GeomFromText('POINT(0 0)')");

    // DOESN'T WORK: using the following line gives an error
    $this->coordinates = new CDbExpression("GeomFromText('POINT(:lat :lng)')",
        array(':lat' => $coords['lat'], ':lng' => $coords['lng'] ));

    return parent::beforeSave();
} 
```

当我这样做时，我收到以下错误：

> CDbCommand 执行 SQL 语句失败：SQLSTATE[HY093]: Invalid parameter number: 绑定变量数与标记数不匹配。执行的 SQL 语句为： INSERT INTO `place` ( `city`, `state`, `name`, `street`, `postal_code`, `phone`, `created`, `coordinates`) VALUES (:yp0, :yp1, :yp2, :yp3, :yp4, :yp5, UTC_TIMESTAMP(), GeomFromText('POINT(:lat :lng )'))

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T19:30:16.977

试试这个

```
 $this->coordinates = new CDbExpression("GeomFromText(:point)",
        array(':point'=>'POINT('.$coords['lat'].' '.$coords['lng'].')')); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-02T08:02:06.353

如果您使用的是**Yii 2 ，请在 @dlnGd0nG 的答案中进行小编辑**

```
$this->coordinates = new yii\db\Expression("GeomFromText(:point)",
    array(':point'=>'POINT('.$coords['lat'].' '.$coords['lng'].')')); 
```

# css - 放置浮动信息面板

> ID：12535247
> 
> 赞同：0
> 
> 时间：2012-09-21T17:24:55.260
> 
> 标签：css, google-apps-script

我正在使用 Jame Ferreira 的 Google Script: Enterprise Application Essentials 创建产品页面（第 5 章）。我创建了在页面上显示所有产品缩略图的应用程序，然后在用户将鼠标悬停时弹出带有更多详细信息的信息面板。它使用 CSS 来实现这种样式。

放置信息面板时出现问题。它仅在一个位置弹出，而不是绑定到与其关联的缩略图。

这是与信息面板相关的代码。我相信问题存在于最后几行的位置，但已经尝试了我能想到的一切：

```
function onInfo(e){
var app = UiApp.getActiveApplication();
var id = e.parameter.source;
for (var i in productDetails){
if(productDetails[i].id == id){
var r = 50;
var c = 0;
var infoPanel = app.createVerticalPanel().setSize('300px', '300px');
var horzPanel = app.createHorizontalPanel();
var image = app.createImage(productDetails[i].imageUrl).setHeight('100px');
var title = app.createLabel(productDetails[i].title);
horzPanel.add(image);
horzPanel.add(title);
var description = app.createLabel(productDetails[i].description);

infoPanel.add(horzPanel);
infoPanel.add(description);
applyCSS(infoPanel, _infoPanel);
applyCSS(image, _infoImage);
applyCSS(horzPanel, _infoBoxSeparator);
applyCSS(title, _infoTitle);
applyCSS(description, _infoDescription);

app.getElementById('infoGrid').setVisible(true)
.setWidget(0,0, infoPanel);
break;

}
c++
if (c == 3){
c = 0;
r = r+250;
}
switch (c)
{
case 0:
c=250;
break;
case 1:
c=500;
break;
case 2:
c=250;
break;
}
}

var _infoLocation =
{
"top":r+"px",
"left":c+"px",}

applyCSS(infoPanel, _infoLocation);

return app;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:02:35.667

您可以使用鼠标的位置`e.parameter.x`并`e.parameter.y`根据它来定位 infoPanel

```
infoPanel.setStyleAttribute('top',e.parameter.y)
    .setStyleAttribute('left',e.parameter.x).setStyleAttribute('zIndex','1')
    .setStyleAttribute('position','fixed'); 
```

您可以根据需要在鼠标的 x 和 y 位置添加一些偏移量以显示它。

您在处理程序函数中获得的位置相关参数是

```
e.parameter.x
e.parameter.y

e.parameter.clientX
e.parameter.clientY

e.parameter.screenX
e.parameter.screenY 
```

# html - 视觉对齐轮播内容和正文的 CSS 解决方案

> ID：12535248
> 
> 赞同：0
> 
> 时间：2012-09-21T17:24:57.210
> 
> 标签：html, css

我使用 CarouFredSel 作为我的轮播，我想在视觉上垂直对齐这个轮播中的文本内容到我的正文内容。我知道您可以通过根据浏览器宽度调整#carousel 的属性来使用javascript（我已将其注释掉）来做到这一点，`left`但我正在寻找一个CSS 解决方案。

![描述我的问题的屏幕截图](../Images/c03da97d3ec298a8454b29e5fc86721a.png) 左侧的蓝色屏幕截图是在浏览器最大化时显示网站，轮播中的“link3”似乎与“内容”对齐。右边的红色截图是浏览器最小化时显示的网站，“link1”与“content”在视觉上没有对齐。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<link rel="stylesheet" type="text/css" media="all" href="reset.css">
<script type="text/javascript" language="javascript" src="<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>"></script>
<script type="text/javascript" language="javascript" src="http://www.sfu.ca/~jca41/stuph/jquery.carouFredSel.js"></script>

<script type="text/javascript" language="javascript">

$(function() {
$('#carousel').carouFredSel({
    items: 1,
    scroll: {
        fx: 'crossfade',
        duration: 1000
    },
    pagination: {
        container: '#pager',
        duration: 500
    }
});

/*$(window).resize(function() {
    var winW = $(window).width();
    var carouselWidth = $('#carousel .slide').css('width');
    carouselWidth = carouselWidth.replace(/[^0-9]/g, '');

    if (winW > carouselWidth) {
        $('#c-carousel').css('left', (winW-carouselWidth)/2 + 'px'); 
    } else {
        $('#c-carousel').css('left', '0px'); 
    }
}).resize();*/

});

</script>
<style type="text/css" media="all">

#heroicCarousel {
    height: 100%;
    padding: 0;
    margin: 0 auto;
    min-height: 250px;
    position: relative;
    z-index: 1000;
    text-align:center;
    max-width:600px;
}
.caroufredsel_wrapper {
    width: 100% !important;
    height: 100% !important;
}
#carousel {
    position: absolute !important;
}
#carousel .slide {
    width:600px;
    height:250px;
    overflow: hidden;
    float: left;
}
#carousel .slide .content {
    font-size: 55pt;
    position: relative;
    top: -100px;
    left: 150px;
    z-index: 5;
}
#carousel .slide img {
    width: auto;
    height: auto;
    min-width: 100%;
    min-height: 100%;
}

#pager {
    position: relative;
    top: -700px;
    left: 0;
    z-index: 10;
    display: block;
    text-align: center;
}
#pager a {
    background-color: #356;
    display: inline-block;
    width: 15px;
    height: 15px;
    margin-right: 6px;
    border-radius: 10px;
    box-shadow: 0 1px 1px #cef;
}
#pager a.selected {
    background-color: #134;
}
#pager a span {
    display: none;
}

#content {
    background: yellow;
    width: 300px;
    height: 300px;
    position: relative;
    margin: 0 auto;
    z-index: 20px;
    top: -520px;
    font-size: 60pt;
}

</style>
</head>
<body>
<div id="heroicCarousel">
    <div class="caroufredsel_wrapper">
        <div id="carousel">
            <div class="slide">
                <img src="http://www.placehold.it/600x250/ff0000/999999">
                <div class="content"><a href="">link1</a></div>
            </div>
            <div class="slide">
                <img src="http://www.placehold.it/600x250/00ff00/999999">
                <div class="content"><a href="">link2</a></div>
            </div>
            <div class="slide">
                <img src="http://www.placehold.it/600x250/0000ff/999999">
                <div class="content"><a href="">link3</a></div>
            </div>
            <div class="slide">
                <img src="http://www.placehold.it/600x250/f0f0ff/999999">
                <div class="content"><a href="">link4</a></div>
            </div>
        </div>
    </div>
    <div id="pager">
        <a href="http://coolcarousels.frebsite.nl/c/18/#" class="selected"><span>1</span></a>
        <a href="http://coolcarousels.frebsite.nl/c/18/#" class=""><span>2</span></a>
        <a href="http://coolcarousels.frebsite.nl/c/18/#" class=""><span>3</span></a>
        <a href="http://coolcarousels.frebsite.nl/c/18/#" class=""><span>4</span></a>
    </div>
</div>
<div id="content">
    content
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:33:23.027

我通常在 div 周围加上一个包装元素。这个元素和你最宽的 div 一样宽，任何有它的孩子`margin:0 auto;`都以它为中心。示例[http://jsfiddle.net/5LJhC/1/](http://jsfiddle.net/5LJhC/1/)

非常简单的示例，但显示了随着轮播宽度的变化，内容 div 是如何居中的

# android - 如何在android中处理检查和取消选中动态创建的复选框

> ID：12535253
> 
> 赞同：5
> 
> 时间：2012-09-21T17:25:09.627
> 
> 标签：android, checkbox

我已经使用循环创建了复选框，我想验证它。就像我只想从复选框中选中 3 个一样，当我按下第 4 个时，它应该显示一个警报并取消选中它。

![在此处输入图像描述](../Images/604ee3f6f8a9a92fd924b65c242ed7f4.png)

当我按下 4the 时，我能够收到警报，但它并没有取消选中。

有人遇到过这样的问题，你是怎么解决的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-21T17:50:22.617

```
int i;
for (i = 0; i < 20; i++) {
    CheckBox ch = new CheckBox(this);
    ch.setTag(Integer.valueOf(i));
    ch.setText("CheckBox " + i);
    ch.setChecked(false);
    ch.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            if (isChecked) {
                numChecked++;
            } else {
                numChecked--;
            }

            if (numChecked == 4) {
                buttonView.setChecked(false);
                numChecked--;
                // fourth one selected, show your dialog
            }
        }
    });
} 
```

您还需要一个全局变量调用 numChecked：

```
int numChecked = 0; 
```

您还需要在循环末尾添加一个 .addView(ch) 以将 CheckBoxes 添加到您的布局中。

# android - Android：无法设置 onItemListener

> ID：12535254
> 
> 赞同：0
> 
> 时间：2012-09-21T17:25:16.057
> 
> 标签：android, listview, onclicklistener

我正在使用带有对话框主题的意图中的适配器创建一个 ListView：

```
 adapter = new SimpleAdapter(this, test_list, R.layout.list_layout2, from, to);
    lv=(ListView)findViewById(R.id.listView1); 
```

然后我尝试添加一些侦听器，但它们没有在正在运行的应用程序中触发。

```
 onclick =new OnItemClickListener(){

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO Auto-generated method stub
            Log.d("item",arg2 + "");
        }

    };

    onlongclick = new OnItemLongClickListener(){

        @Override
        public boolean onItemLongClick(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            // TODO Auto-generated method stub
            Log.d("longitem",arg2 + "");
            return false;
        }

    };

    lv.setOnItemClickListener(onclick);

    lv.setOnItemLongClickListener(onlongclick); 
```

有没有人建议让事情正常运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:37:02.217

这似乎是正确的，但我不明白的是你为什么要让你的听众变数？你可以设置它们。

看看这里的链接：

[http://www.ezzylearning.com/tutorial.aspx?tid=1351248](http://www.ezzylearning.com/tutorial.aspx?tid=1351248)

它使用 ArrayAdapter 而不是 SimpleAdapter，其中一个参数是项目。

它可能会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T23:37:46.557

好的，我找到了答案。在我的项目布局中，“R.layout.list_layout2”是一个 TextView

```
android:focusable="true"
android:focusableInTouchMode="true" 
```

删除它使我的 OnItemClickListener 工作稳定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T03:03:04.273

I've found tutorial that might help you with your problem

Check out here

[http://www.androidbegin.com/tutorial/android-simple-listview-tutorial/](http://www.androidbegin.com/tutorial/android-simple-listview-tutorial/)

# jekyll - Octopress 中的“root_url”在哪里？

> ID：12535262
> 
> 赞同：2
> 
> 时间：2012-09-21T17:25:58.587
> 
> 标签：jekyll, octopress

也许这是某种 Jekyll 设置或其他东西，但我需要将 root_url 设置为除“/”之外的其他东西，我不知道在哪里做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-03T06:33:03.913

在`.themes/classic/source/_layouts/default.html`文件中，有`{% capture root_url %}{{ site.root | strip_slash }}{% endcapture %}`.

`site.root`配置`_config.yml`其中默认为`root: /`.

如果您正在测试`http://127.0.0.1:4000/`jekyll 本地开发的默认设置，您可以将其更改为`root: http://127.0.0.1:4000/`. 那么路径将是正确的。例如，`<link href="{{ root_url }}/favicon.png" rel="icon">`将被解析为`<link href="http://127.0.0.1:4000//favicon.png" rel="icon">`.

总之，换行就行`root: /`了`_config.yml`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T17:29:03.983

抱歉问得太快了。您可以在**_config.yml**中找到设置。我以为我在那里检查过，但我必须两次打开另外两个配置文件之一。

# php - 没有在我的 PHP 正则表达式中捕获百分号？

> ID：12535263
> 
> 赞同：0
> 
> 时间：2012-09-21T17:25:58.817
> 
> 标签：php, regex, preg-match, percentage

还在学习正则表达式！我的百分比正则表达式（不遵守 100 限制）：

```
^(?<int>[1-9][0-9]*|[0])(?<dec>\.[0-9]+)?\%?$ 
```

这*应该*允许：

*   `[1-9]` 以不同于 0 的数字开头。不允许使用“004.34”之类的百分比。
*   `[0-9]*`...后跟 0 到 9 之间的任何数字
*   `|[0]`或以单个 0 开头

...将该组捕获为“int”组。然后：

*   `(?<dec>\.[0-9]+)?`一个可选组，其中一个点仅在后跟至少一个 0 到 9 之间的数字时才被允许。我不希望人们输入即“33”。

假设我是对的，测试：

```
preg_match('/^(?<int>[1-9][0-9]*|[0])(?<dec>\.[0-9]+)?\%?$/i', '0.32%', $result); 
```

给我这个结果，这实际上是正确的，但是：

```
Array
(
    [0] => 0.32%
    [int] => 0
    [1] => 0
    [dec] => .32
    [2] => .32
) 
```

如何避免捕获百分比“％”符号（in `$result[0]`）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T17:29:37.940

这真的很简单。只需将您的正则表达式更改为：

```
/^(?<int>[1-9][0-9]*|[0])(?<dec>\.[0-9]+)?/ 
```

（`\%?$`从匹配中删除）。

如果您想确保 % 符号在那里，但不想捕获它（在这种情况下似乎无关紧要，但也许），您可以添加一个前瞻断言。`(?=...)`断言确保模式存在，但不会改变匹配的内容。

```
/^(?<int>[1-9][0-9]*|[0])(?<dec>\.[0-9]+)?(?=%?$)/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T17:32:55.073

数组的第一个元素`$result`将始终包含完整的模式匹配（您不能告诉 PHP 不这样做，请参见[此处](https://stackoverflow.com/questions/7949436/suppressing-full-pattern-match-in-regex-preg-match)），因此我们必须解决正则表达式本身的问题。在您的正则表达式中，您指定`%`将**在****完整模式匹配中**，因为您明确告诉它可能出现在模式字符串（符号）结尾的之前（因此，内部）`$`，您可以在此处执行`\%?$`。

解决方案是`%`在前瞻中指定 （因此它不会进入模式字符串），并且由于您`%`是可选的，因此我们在前瞻中告诉您寻找 a`%`或字符串的结尾，因此`%`永远不会进入完整模式匹配。

所以我添加了`(?=\%|$)`which 告诉正则表达式向前看一个`%`符号或字符串的结尾。

因此，以下正则表达式：

```
preg_match('/^(?<int>[1-9][0-9]*|[0])(?<dec>\.[0-9]+)?(?=\%|$)/i', '0.32%', $result); 
```

'0.32%' 和 '0.32' 将输出：

```
array(5) {
  [0]=>
  string(4) "0.32"
  ["int"]=>
  string(1) "0"
  [1]=>
  string(1) "0"
  ["dec"]=>
  string(3) ".32"
  [2]=>
  string(3) ".32"
} 
```

**更新：**在做了一些测试后，我更新了我的完整答案，所以请在上面阅读

# android - 操作栏 Sherlock - 折叠时隐藏操作

> ID：12535267
> 
> 赞同：2
> 
> 时间：2012-09-21T17:26:20.093
> 
> 标签：android, actionbarsherlock

我有属性 SHOW_AS_ACTION_ALWAYS 的三个动作，因为我想让它们中的三个始终显示。然而，其中一个有一个折叠动作视图，当我单击动作时，我不想隐藏另外两个以获得我的布局的完整动作栏。有没有办法做到这一点？

这似乎只有在我使用 SHOW_AS_ACTION_IF_ROOM 时才有效，但这样我只能在操作栏上获得两个项目而不是三个。

# ajax - 使用 Ruby 进行屏幕抓取和代理

> ID：12535268
> 
> 赞同：0
> 
> 时间：2012-09-21T17:26:28.110
> 
> 标签：ajax, proxy, screen-scraping, erb

我知道这里有几个屏幕抓取线程，但没有一个答案让我很满意。

我正在尝试使用 javascript 从外部网页中抓取 HTML。我正在使用 $.ajax，一切都应该可以正常工作。这是我的代码：

```
$.ajax({
    url: "my.url/path",
    dataType: 'text',
    success: function(data) {
        var myVar = $.get(url);
        alert(myVar);
    }
}); 
```

唯一的问题是它正在我的网络服务器中寻找指定的 url。如何使用代理访问外部网页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:46:53.153

由于跨站点脚本限制，您必须将所需的 URL 传递到服务器上的页面，该页面将从服务器端查询相关 URL，然后将结果返回给您。查看下面的线程并将其合并到您的应用程序中，并在您的 AJAX 函数访问该页面时让它返回源代码。

[如何在 Ruby 中获取网页的 HTML 源代码](https://stackoverflow.com/questions/4217223/how-to-get-the-html-source-of-a-webpage-in-ruby)

使用 GET 请求将是传输要获取服务器的页面 URL 的最简单方法，因此您可以调用如下内容：

```
$.ajax("fetchPage.rb" + encodeURI(http://www.google.com)) 
```

因为您不能直接从服务器访问有问题的一侧，所以您将不得不通过代理通过管道传输服务器端脚本以使请求工作，这实际上取决于您的设置。看一下 Ruby 中的 Proxy 类：

[http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html#method-c-Proxy](http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html#method-c-Proxy)

# android - Android Geocoder.getLocationFromName() 抛出 IOException: Service not available on Device

> ID：12535271
> 
> 赞同：6
> 
> 时间：2012-09-21T17:26:43.013
> 
> 标签：android, geolocation, geocoding

我在模拟器和手机（Android 4.1 的 Nexus S）上都使用 Geocoder.getLocationFromName() 方法，但出现以下异常：

```
java.io.IOException: Service not Available 
```

模拟器上出现了很多关于此的问题（[示例](https://stackoverflow.com/questions/5205650/geocoder-getfromlocation-throws-ioexception-on-android-emulator)），其中大多数都说这是有问题的模拟器的特定版本。但是，异常出现在我的 AVD（2.3 和 4.1）和手机上。

我的手机和 AVD 都有互联网连接。我的 API 版本是 16（android 4.1），但我也尝试过使用旧版本。两种 AVD 都包含 Google API。

有什么想法吗？

这是相关的代码片段：

```
Geocoder myGeocoder = new Geocoder(getApplicationContext(), Locale.getDefault());
List<Address> newAddresses = myGeocoder.getFromLocationName(arg0.toString(), 10); 
```

这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.asdasd" android:versionCode="6" android:versionName="1.3.1">
    <uses-sdk android:minSdkVersion="16" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <application android:icon="@drawable/ic_launcher_asdasd"
        android:label="@string/app_name">
        <activity android:name=".AsdasdActivity" android:label="@string/app_name"
            android:screenOrientation="portrait" android:windowSoftInputMode="stateHidden">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="com.google.ads.AdActivity"
            android:configChanges="keyboard|keyboardHidden|orientation" />
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-23T20:06:17.293

确保您的应用程序的构建目标设置为*Google API*之一，而不仅仅是*Android 4.0*（或类似版本）。您可以在 Eclipse 中通过右键单击您的项目并选择“Properties”然后选择“Android”来更改此设置。或者，您可以简单地将`project.properties`文件编辑为以下内容：

```
# Project target
target=Google Inc.:Google APIs:16 
```

原因是`Geocoder`该类存在于核心 Android 框架中，但依赖于 Google API 贡献的代码才能正常运行。即使您的 AVD 包含 Google API，您的项目仍然需要针对该特定构建目标进行构建。

# ruby-on-rails - 如何使用 Rails 在会话中存储 ActiveRecord 对象？

> ID：12535274
> 
> 赞同：-1
> 
> 时间：2012-09-21T17:27:09.050
> 
> 标签：ruby-on-rails, ruby, session, web

我正在为我的网站构建一个购物车，但我在使用 rails session 和 ActiveRecord 对象时遇到了问题：

Shopping Cart 实际上是一个带有一些 OrderItems 的 Order 对象。

将 Order 对象添加到会话后，Dalli 开始引发此异常：

```
Marshalling error for key 'sessions:9e67886e826819a3213df4f4c89db6e0': can't dump hash with default proc
You are trying to cache a Ruby object which cannot be serialized to memcached.
/home/rodrigo/.rvm/gems/ruby-1.9.3-p125@netsabe-ecommerce/gems/dalli-2.1.0/lib/dalli/server.rb:277:in `dump'
    /home/rodrigo/.rvm/gems/ruby-1.9.3-p125@netsabe-ecommerce/gems/dalli-2.1.0/lib/dalli/server.rb:277:in `serialize'
    /home/rodrigo/.rvm/gems/ruby-1.9.3-p125@netsabe-ecommerce/gems/dalli-2.1.0/lib/dalli/server.rb:164:in `set'
    /home/rodrigo/.rvm/gems/ruby-1.9.3-p125@netsabe-ecommerce/gems/dalli-2.1.0/lib/dalli/server.rb:48:in `request'
    /home/rodrigo/.rvm/gems/ruby-1.9.3-p125@netsabe-ecommerce/gems/dalli-2.1.0/lib/dalli/options.rb:18:in `block in request'
    /home/rodrigo/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
    /home/rodrigo/.rvm/gems/ruby-1.9.3-p125@netsabe-ecommerce/gems/dalli-2.1.0/lib/dalli/options.rb:17:in `request'
    /home/rodrigo/.rvm/gems/ruby-1.9.3-p125@netsabe-ecommerce/gems/dalli-2.1.0/lib/dalli/client.rb:251:in `perform'
    /home/rodrigo/.rvm/gems/ruby-1.9.3-p125@netsabe-ecommerce/gems/dalli-2.1.0/lib/dalli/client.rb:120:in `set'
    /home/rodrigo/.rvm/gems/ruby-1.9.3-p125@netsabe-ecommerce/gems/dalli-2.1.0/lib/action_dispatch/middleware/session/dalli_store.rb:50:in `set_session' 
```

谷歌搜索，我发现 ActiveRecord 不能存储在会话中。

那么，在会话中存储这些对象的最佳方式是什么？我必须为这些类实现序列化/反序列化方法吗？

谢谢！

**编辑1：**

记住 Order 对象还没有持久化！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T17:34:00.080

在会话中存储对象是一个坏主意。
[在 Rails 中的 Session 中存储对象](https://stackoverflow.com/questions/1095714/storing-objects-in-a-session-in-rails)
最好存储`id`对象，这样您就可以随时检查对象是否处于最新状态。

# email - Business Catalyst 中的电子邮件混淆

> ID：12535277
> 
> 赞同：3
> 
> 时间：2012-09-21T17:27:16.960
> 
> 标签：email, obfuscation, business-catalyst

我现在正在开发 Businesss Catalyst Web App，但我遇到了一个严重的问题。我需要混淆 Web App 的电子邮件字段。不幸的是，没有简单的方法可以做到这一点，因为来自网络应用程序项目的所有信息都被放在 HTML 页面上，没有任何预处理（因为我们无权访问 BC 的后端）。

这是我现在的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<script>
    <!--

    function CryptMailto()
    {
        var n = 0;
        var r = "";
        var x = document.getElementById("test");
        var s = "mailto:"+x.value;
        var e = x.value;

        e = e.replace( /@/, " [at] ");
        e = e.replace( /\./g, " [dot] ");

        for( var i=0; i < s.length; i++ )
        {
            n = s.charCodeAt( i );
            if( n >= 8364 )
            {
                n = 128;
            }
            r += String.fromCharCode(n+1);
        }

        return "<a href=\"javascript:linkTo_UnCryptMailto('"+ r +"');\">"+ e +"</a>";
    }

    function UnCryptMailto( s )
    {
        var n = 0;
        var r = "";
        for( var i = 0; i < s.length; i++)
        {
            n = s.charCodeAt( i );
            if( n >= 8364 )
            {
                n = 128;
            }
            r += String.fromCharCode( n - 1 );
        }
        return r;
    }

    function linkTo_UnCryptMailto( s )
    {
        location.href=UnCryptMailto( s );
    }
    // -->
</script>

</head>

<body>

<input style = "" id = "test" type = "text" value = "test@gmail.com" />

<script>document.write(CryptMailto());</script>

</body>
</html> 
```

现在的问题是隐藏字段仍然可以通过“查看源代码”查看。

有没有办法在字段进入首页之前对其进行预处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T03:39:09.847

虽然不完全是您想要的，但您可以在不同的页面上输出电子邮件（如果没有从特定页面调用，则检查以重定向到主页），然后将电子邮件 Ajax 输入。这不会显示在视图源中，而是显示在一些浏览器会出现在检查元素（chrome/Firefox）中，因为它们倾向于显示更新的代码。同样，这并不理想，但会让某人更难获取电子邮件。

**更新** 如果您想更进一步，一旦您将电子邮件 AJAX 放入页面上的容器中，存储在 javascript 变量中，然后将您转储 AJAX 结果的容器的内容替换为其他内容，所以如果有人要检查该区域的输出，它将被您的虚拟文本（或空白）替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T18:08:47.390

我与 BC 支持人员交谈过，基本上没有办法这样做，因为它是沙盒 CMS:(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-19T11:36:06.870

过去，我允许客户将预先混淆的电子邮件链接直接输入到 webapp 的字段中。

我认为这是您的唯一解决方案。

然后，为客户提供一个链接到一个工具来混淆电子邮件，例如 [http://www.albionresearch.com/misc/obfuscator.php](http://www.albionresearch.com/misc/obfuscator.php)

# android - 如何在两个图像布局之间画线

> ID：12535278
> 
> 赞同：2
> 
> 时间：2012-09-21T17:27:26.803
> 
> 标签：android, android-layout, android-linearlayout, android-imageview

我正在尝试创建具有四个按钮的布局。

我已经设法显示了四个图像按钮，但我无法显示分隔线。在下图中，您可以看到我正在尝试设计的内容：

![在此处输入图像描述](../Images/1a7fe326662fe8d989c5aa49a39d875d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:57:58.613

使用相对布局并首先添加 View 对象以分隔它们（见下文）。您必须添加所需的任何其他参数...

```
<RelativeLayout
    android:layout_width          = "match_parent"
    android:layout_height         = "match_parent">

    <View
        android:id                      = "@+id/vertical_divider"
        android:layout_centerHorizontal = "true"
        android:layout_width            = "1dip"
        android:layout_height           = "match_parent">
    </View>

    <View
        android:id                      = "@+id/horizontal_divider"
        android:layout_centerVertical   = "true"
        android:layout_width            = "match_parent"
        android:layout_height           = "1dip">
    </View>

    <ImageButton
        android:layout_alignParentTop   = "true"
        android:layout_alignParentLeft  = "true"
        android:layout_toLeftOf         = "@id/vertical_divider"
        android:layout_above            = "@id/horizontal_divider"
        android:layout_width            = "match_parent"
        android:layout_height           = "match_parent">
    </ImageButton>

    <ImageButton
        android:layout_alignParentTop   = "true"
        android:layout_alignParentRight = "true"
        android:layout_toRightOf        = "@id/vertical_divider"
        android:layout_above            = "@id/horizontal_divider"
        android:layout_width            = "match_parent"
        android:layout_height           = "match_parent">
    </ImageButton>

    <ImageButton
        android:layout_alignParentBottom = "true"
        android:layout_alignParentLeft   = "true"
        android:layout_toLeftOf          = "@id/vertical_divider"
        android:layout_below             = "@id/horizontal_divider"
        android:layout_width             = "match_parent"
        android:layout_height            = "match_parent">
    </ImageButton>

    <ImageButton
        android:layout_alignParentBottom = "true"
        android:layout_alignParentRight  = "true"
        android:layout_toRightOf         = "@id/vertical_divider"
        android:layout_below             = "@id/horizontal_divider"
        android:layout_width             = "match_parent"
        android:layout_height            = "match_parent">
    </ImageButton>
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:33:50.707

在你`layout_marginBottom="1dip"`的.`layout_marginRight="1dip"``Imageviews`

# android - 在 Android 上的可滚动列表底部消失？

> ID：12535280
> 
> 赞同：6
> 
> 时间：2012-09-21T17:27:29.707
> 
> 标签：android, listview, background, android-listview, fade

我有一个带有白色背景 ( `android:background="@android:color/white"`) 和透明缓存颜色 ( `android:cacheColorHint="#00000000"`) 的长 ListView。两个问题：

1.  我正在各种设备上进行测试。在较旧的上，淡入淡出效果很好。但在较新的上，我根本看不到任何褪色，只是一个尖锐的截止。为什么会这样，我该如何解决？

2.  很多时候，我列表中的元素排成一行，以便底部有足够的空白，淡化不会到达文本并且不可见。有没有办法让淡入淡出更多地覆盖列表？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-21T20:36:59.533

找到我自己的答案：

1.  `android:requiresFadingEdge="vertical"`
2.  `android:fadingEdgeLength="48dp"`

编辑：更改为 dp 而不是 sp

# c# - 在字符串 C# 末尾删除几个字符的正确方法是什么

> ID：12535281
> 
> 赞同：2
> 
> 时间：2012-09-21T17:27:30.330
> 
> 标签：c#, asp.net

考虑以下代码，`<br/>`在 C# 中从字符串末尾删除最后两个标签的正确方法是什么？我遵循了非常幼稚的方法来实现这一目标。您能否提出改进建议。

```
List<string> MessageList; // populated from data source
Label lblHtmlOutput = new Label();
StringBuilder sb = new StringBuilder();
foreach (var item in MessageList)
{
    sb.Append(item + "<br/><br/>");
}
sb.Remove(sb.Length - 11, sb.Length - 1); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-21T17:31:09.893

不要一开始就添加它们。使用类似的东西：

```
String.Join("<br/><br/>", MessageList); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-21T17:31:34.123

首先不要插入它们：

```
 List<string> MessageList; // populated from data source
    Label lblHtmlOutput = new Label();
    //StringBuilder sb = new StringBuilder();
    //foreach (var item in MessageList)
    //{
    //    sb.Append(item + "<br/><br/>");
    //}
    //sb.Remove(sb.Length - 11, sb.Length - 1);
    string list = string.Join("<br/><br/>", MessageList); 
```

# c# - 在 application_Error 中完成的会话更改在重定向后回滚

> ID：12535284
> 
> 赞同：0
> 
> 时间：2012-09-21T17:27:41.110
> 
> 标签：c#, asp.net

我有一个 asp.net 应用程序，我正在尝试使用 Application_Error 处理自定义异常。它工作得很好，但我有新的要求在 Session 对象（或任何可以维护状态的对象）中设置错误数据并重定向到 Error.aspx 页面。在这里，我只是在阅读错误消息后删除它们。

因此，无论我在 Application_error 中以及在调用 Redirect 时添加到会话对象（或者如果我更改了先前存在的值）中的任何内容。在error.aspx 中，我看不到任何值，就好像Session 在Application_error 中处于只读模式一样。

我尝试通过调用 session.IsReadOnly 来查看它是否是只读的。但它返回错误！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:11:49.790

我自己也遇到过这个问题，经过几个小时的折腾，设法解决了这个问题。问题是`Application_Error()`在作为某种“清理”例程的一部分执行后会清除会话，您需要停止该例程。

我找到的解决方案如下：

1.  调用`Server.ClearError();`- 这会清除应用程序的最后一个错误并停止进行“清理”，从而保留会话。

2.  这样做的（不想要的恕我直言）副作用是它不再执行自动重定向到错误页面，因此您需要显式调用`Response.Redirect("~/error.aspx");`

所以，像这样：

```
protected void Application_Error(object sender, EventArgs e)
{
    // Grab the last exception
    Exception ex = Server.GetLastError();

    // put it in session
    Session["Last_Exception"] = ex;

    // clear the last error to stop .net clearing session
    Server.ClearError();

    // The above stops the auto-redirect - so do a redirect!
    Response.Redirect("~/error.aspx");
} 
```

如果您不想对 URL 进行硬编码，则可以`defaultRedirect`直接从 中的`customerrors`部分获取 URL `web.config`，这将为您提供如下内容：

```
protected void Application_Error(object sender, EventArgs e)
{
    // Grab the last exception
    Exception ex = Server.GetLastError();

    // put it in session
    Session["Last_Exception"] = ex;

    // clear the last error to stop .net clearing session
    Server.ClearError();

    // The above stops the auto-redirect - so do a redirect using the default redirect from the customErrors section of the web.config!
    var customerrors = (CustomErrorsSection)WebConfigurationManager.OpenWebConfiguration("/").GetSection("system.web/customErrors");
    Response.Redirect(customerrors.DefaultRedirect);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T05:48:51.710

Add a directive to the **Global.asax** file, Imports the **System.Web** Namespace

```
 <%@ Import Namespace="System.Web" %>

void Application_Error(object sender, EventArgs e) {

   string message = Server.GetLastError().Message;
   Session["error"] = message;
   Server.Transfer("Error.aspx");

} 
```

Write the error message added in the sesion object in the **Error.aspx** page

```
 protected void Page_Load(object sender, EventArgs e){
    if (!this.IsPostBack)
        Response.Write(Session["error"].ToString());

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T17:36:34.620

检查这个，问题出在重定向调用上。

[设置 Session 变量后不要重定向（或做对）](http://weblogs.asp.net/bleroy/archive/2004/08/03/Don_2700_t-redirect-after-setting-a-Session-variable-_2800_or-do-it-right_2900_.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T19:30:54.073

您可以为您的密钥使用缓存和适当的命名策略，如下所示：

```
protected void Application_Error(object sender, EventArgs e)
    {
        HttpContext.Current.Cache["error:" + Session.SessionID] = Server.GetLastError();
        Response.Redirect("Error.aspx");
    } 
```

在 Error.aspx 页面中，您可以这样阅读：

```
var error = Cache["error:" + Session.SessionID]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T06:06:32.297

问题可能是在您的应用程序中引发异常时可能没有触发[AcquireRequestState](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.acquirerequeststate.aspx)事件，您只能在触发此特定事件后设置会话值，因为这是设置应用程序状态的阶段

# javascript - 如何在javascript中添加两个值

> ID：12535285
> 
> 赞同：2
> 
> 时间：2012-09-21T17:27:40.890
> 
> 标签：javascript, javascript-events

这是一个带有值的简单下拉列表。我正在尝试将值作为货币提取然后添加。

这些值没有被添加（`1+1=2`或`1+2=3`），而是连接（`1+1=11`或`1+2=12`）。我在哪里错了？：

```
<script>
    function displayResult()
    {
        var strm=document.getElementById("matt").options[document.getElementById("matt").selectedIndex];
        var t=strm.text.search("\\\$");
        var strb=document.getElementById("box").options[document.getElementById("box").selectedIndex];
        var b=strb.text.search("\\\$");
        var x=strm.text.substr(t+1);
        var y=strb.text.substr(b+1);
        var math= x + y;

        alert(strm.text.substr(t+1));
        alert(strb.text.substr(b+1));
        alert(math);
    }
</script>

<form>
    Select #1:
    <select id="matt">
        <option>$1.00</option>
        <option>$2.00</option>
    </select>

    <br />
    Select #2:
    <select id="box">
        <option>$3.00</option>
        <option>$4.00</option>
    </select>

</form>

<button type="button" onclick="displayResult()">Display index</button> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T17:28:46.470

用于`parseInt()`将字符串转换为整数。

```
var math= parseInt(x,10) + parseInt(y,10); 
```

请参阅[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T17:29:48.677

为确保将您的值添加为数字，请将它们`Number`首先转换为：

```
Number('2') + Number('2') = 4
'2' + '2' = '22' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T17:29:33.680

尝试使用 parseFloat() 或 parseInt().. 否则它不会将其识别为数字.. 它将作为普通字符串附加..

```
var math= parseFloat(x) + parseFloat(y);

alert(math) 
```

检查[小提琴](http://jsfiddle.net/sushanth009/jQChx/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T17:29:02.153

这些值被解释为字符串，您需要在添加它们之前使用 parseInt 将它们转换为整数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T17:29:13.560

该`substring()`函数返回给定字符串的*子*字符串，当然，这是一个字符串，而不是可以对其执行数学运算的对象。如果您将这些字符串解析为一个数字，使用`parseInt()`，那么它将起作用：

```
var x= parseInt(strm.text.substr(t+1),10);
var y= parseInt(strb.text.substr(b+1),10); 
```

此外，您不需要继续重新声明`var`，您可以改为以逗号分隔的变量声明：

```
var x = parseInt(strm.text.substr(t+1),10),
    y = parseInt(strb.text.substr(b+1),10); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-01T01:15:45.090

我今天发现了一件有趣的事情。我在 theodinproject 上做计算器项目。我有加法、减法、乘法和除法函数。减法、乘法和除法工作正常，无需明确告诉 javascript 将参数视为数字。

# php - WPAlchemy - 第 3 行的致命错误

> ID：12535286
> 
> 赞同：0
> 
> 时间：2012-09-21T17:27:52.577
> 
> 标签：php, wordpress, fatal-error

我的代码第 3 行出现某种错误，我似乎无法弄清楚。以下是它输出的错误以及我的代码。

致命错误：在第 3 行调用非对象上的成员函数 the_meta()

```
<?php $meta = $custom_metabox->the_meta('description', TRUE); 
if (!empty($meta)): 
echo '<p class="description">'.$meta['description'].'</p>'; ?>
<?php endif; ?>

<br>

<ul id="process"><span>Process: </span></ul>

<br>

<ul class="credits">
<?php if(the_meta()) { the_meta(); } ?>
    <li class="shorturl"><span>Short Url: </span>
        <div id="d_clip_container">
            <input id="fe_text" onChange="clip.setText(this.value)" type="text" value="<?php echo bitly(); ?>" />
        <div id="d_clip_button" class="my_clip_button"></div>
        </div>
    </li>
    <li class="save"><span>Save: </span> <a class="gimmebar" href="#">Gimme Bar</a></li>                
</ul>
</div> <!-- End Info -->

<?php get_search_form(); ?> 
```

这是第 3 行 `<?php $meta = $custom_metabox->the_meta('description', TRUE);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:36:51.000

您可能在代码中遗漏了某些内容。请看第 3 行：`$custom_metabox->the_meta('description', TRUE)`.. 现在看第 13 行：`if(the_meta()) { the_meta(); }`在您的代码的一部分中，您使用了`the_meta()`作为成员函数，而在另一部分中，您将其用作一般函数..这怎么可能是对的？首先确保它`the_meta()`是否在课堂上，而不是正确调用它......

更新：

好的，在 wpalchemy 手册中进行一些搜索，我得到了问题所在..您应该在您的中构建`$custom_metabox`as a以便能够将元框包含在模板中..[阅读此处](http://www.farinspace.com/wpalchemy-metabox)..`WPAlchemy_MetaBox``functions.php`

样本：

```
$custom_metabox = new WPAlchemy_MetaBox(array
(
    'id' => '_custom_meta',
    'title' => 'My Custom Meta',
    'template' => STYLESHEETPATH . '/custom/meta.php'
)); 
```

当你现在拥有它时，你应该在你的模板中包含这些函数......

手册中提供的示例代码：

```
// usually needed
global $custom_metabox;

// get the meta data for the current post
$custom_metabox->the_meta();

// set current field, then get value
$custom_metabox->the_field('name');
$custom_metabox->the_value();

// get value directly
$custom_metabox->the_value('description');

// loop a set of fields
while($custom_metabox->have_fields('authors'))
{
    $custom_metabox->the_value();
}

// loop a set of field groups
while($custom_metabox->have_fields('links'))
{
    $custom_metabox->the_value('title');

    $custom_metabox->the_value('url');

    if ($custom_metabox->get_the_value('nofollow')) echo 'is-nofollow';

    $custom_metabox->the_value('target');
} 
```

*** 注意`global $custom_metabox;`顶部的** **** * 你也应该使用它，`$custom_metabox->the_meta();`而不仅仅是普通`the_meta();`的..*

# php - PHP 中的域对象和模型是什么？

> ID：12535289
> 
> 赞同：2
> 
> 时间：2012-09-21T17:28:12.197
> 
> 标签：php, oop, object, models

我一直在阅读有关域对象和域模型的内容——我有点理解它们，但是我阅读的文章越多，我就越感到困惑。

不断冒出来的一句话是“*业务逻辑*”！这是什么意思？

另外，“**域**”这个词是什么意思？这也让我很困惑。

任何建议和示例将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:46:08.447

有人可能会给出一个更好的计算机科学答案，但这是它的基本内容：

模型或域对象是使您的应用程序独一无二的“肉”。这是您的应用程序所关心的。它是您的应用程序的*域*。

让我们稍微拉一下这个线程：每个 Web 应用程序都有某种类型的请求处理和响应机制。每个 Web 应用程序（生成网页）都有某种表示系统，即使它与包含静态 html 页面一样基本。但并非每个 Web 应用程序都提供检索和发送电子邮件的机制。并非每个 Web 应用程序都允许您创建和管理事件和事件日历。

如果您的域是电子邮件，那么您的*域对象*将是`EmailMessage`、`AddressBook`或`Contact`. 非域对象可能类似于`FrontController`、 或`RouteTable`、 或`Dispatcher`。您可以在您的域之外对这些项目进行自定义，但它们不是*您的应用程序的目的*。区别就在于此。

# php - 附上_

> ID：12535291
> 
> 赞同：0
> 
> 时间：2012-09-21T17:28:13.467
> 
> 标签：php, html, css

在我的网站上，我有一些图像与其他内容存储在同一个 SQL 单元中。当我加载包含图像的页面并且 PHP 回显“文章”单元格时，图像会自动包含在段落标签中，这不是我想要的。有什么办法可以防止这种情况发生吗？我不确定它是浏览器端还是服务器端问题，但它出现在 botch Chrome 和 FF 中。

SQL单元“文章”：

```
<img src="http://www.nasa.gov/images/content/297522main_image_1244_946-710.jpg"><p>Lorem ipsum</p> 
```

PHP代码：

```
if ($pageType == 'article') {
            if($pageExists==1) {
                try {
                    $db = new PDO('pdoinfo');
                } catch(PDOException $e) {echo $e->getMessage();}

                $sql = $db->query("SELECT * FROM articles WHERE id=$pageName");
                $result = $sql->fetchAll(PDO::FETCH_OBJ);

                echo ('<div class="article"><h3>');
                echo $result[0]->title;
                echo('</h3><p>');
                echo $result[0]->article;
                echo('<span class="article-data">Geplaatst op <span class="article-date">');
                echo date('d-m-Y', strtotime($result[0]->postdate));
                echo ('</span> door <span class="article-author">');
                echo $result[0]->author;
                echo ('</span><span class="article-broadcast"><span class="st_twitter_hcount" displayText="Tweet"></span><span class="st_facebook_hcount" displayText="Facebook"></span>');
                echo ('</span></span></div>');
            }
            else {
                include('pages/404.php');
            }
        } 
```

输出 HTML：

```
[...]<p><img src="http://www.nasa.gov/images/content/297522main_image_1244_946-710.jpg"><p>Lorem ipsum</p>[...] 
```

我只是自己编写所有代码，因此不涉及 CMS。当我自己用 p-tag 将图像括起来时，会在段落之前插入一个多余的空 p-tag。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:37:47.760

你`<p>`在这条线上有一个`echo('</h3><p>');`永远不会关闭的开口，所以我怀疑你看到了。

也不需要所有的回声

```
echo '
<div class="article">
    <h3>'.$result[0]->title.'</h3>
    '.$result[0]->article.'
    <span class="article-data">
        Geplaatst op <span class="article-date">'.date('d-m-Y', strtotime($result[0]->postdate)).'</span> door 
        <span class="article-author">'.$result[0]->author.'</span>
        <span class="article-broadcast">
            <span class="st_twitter_hcount" displayText="Tweet"></span>
            <span class="st_facebook_hcount" displayText="Facebook"></span>
        </span>
    </span>
</div>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:32:51.703

许多流行的 html 编辑器（例如 CKEditor）默认添加`<p>`around`<img>`标记。您是否使用 html 编辑器生成此内容？

# magento - 自定义选项的 Magento 库存跟踪

> ID：12535298
> 
> 赞同：2
> 
> 时间：2012-09-21T17:28:31.157
> 
> 标签：magento, configuration, admin, product, inventory

有什么办法可以用 Vanilla magento 做到这一点？我知道我可以使用简单的产品“产品 A - 选项 1、产品 A - 选项 2 等”创建一个可配置的产品。为颜色和尺寸创建简单的产品是否更有益？也许从报告的角度来看？

我发现了这个[http://www.mageworx.com/advanced-product-options-magento-extension.html](http://www.mageworx.com/advanced-product-options-magento-extension.html) 使用这样的扩展会有什么缺点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T15:26:55.297

如果您希望能够正确跟踪库存等，那么基于简单产品来代表 SKU 的适当可配置产品是最好的方法。

在我看来，自定义选项实际上适用于与库存无关的选项，例如自定义打印服务、额外的礼品包装或其他类似选项。

您提到的扩展实际上是用于管理跨多个产品的自定义选项集，并使自定义选项更易于管理，但这并不意味着您应该使用自定义选项来跟踪不同的 SKU，例如您库存中的各种颜色的产品.

通过 Magento 管理员为可配置产品创建简单产品的最快方法是首先创建可配置产品，然后使用“快速简单产品创建者”选项快速轻松地创建简单产品。

[http://www.magentocommerce.com/wiki/welcome_to_the_magento_user_s_guide/chapter_3#creating_a_configurable_product](http://www.magentocommerce.com/wiki/welcome_to_the_magento_user_s_guide/chapter_3#creating_a_configurable_product)（向下滚动一点）

# jquery - 将 jquery 函数传递给 jquery 插入的代码

> ID：12535302
> 
> 赞同：0
> 
> 时间：2012-09-21T17:28:37.717
> 
> 标签：jquery, addclass, removeclass

我认为这可能是一个传递参数的问题，但我还是 jQuery 的新手。我有两个以 jQuery 函数开始的块元素，它们相互重新设置样式。但是当我使用 jQuery 用相同类型的代码替换那些块元素的内容时，重新样式功能不再起作用。

这是我正在使用的核心：

```
$(document).ready(function() {
    $('#baz').click(function() {
        $('#bar').replaceWith('<div id="bar">' + 'texttexttexttexttext' + '<span id="hl1" class="nohighlight">' + 'some other stuff to be highlighted' + '</span>' + 'texttexttexttext' + '</div>');
        $('#foo').replaceWith('<div id="foo"><span id="rollover1">' + 'Look at this!' + '</span></div>');
    });

    $('#rollover1').mouseenter(function() {
        $('#hl1').removeClass('nohighlight').addClass('highlight');
    });

    $('#rollover1').mouseleave(function() {
        $('#hl1').removeClass('highlight').addClass('nohighlight');
    });
});​

...

<div><a href="#" id="baz">change</a></div>
<div id="foo"><span id="rollover1">HEY!</span></div>
<div id="bar">blahblahblah<span id="hl1" class="nohighlight">blahblahblahblah</span>blahblahblah</div>​ 
```

见[http://jsfiddle.net/xdP7Z/4/](http://jsfiddle.net/xdP7Z/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:48:33.637

您正在动态更改元素，因此您需要委托

```
$(document).ready(function() {
    $('#baz').click(function() {
        $('#bar').replaceWith('<div id="bar">' + 'texttexttexttexttext' + '<span id="hl1" class="nohighlight">' + 'some other stuff to be highlighted' + '</span>' + 'texttexttexttext' + '</div>');
        $('#foo').replaceWith('<div id="foo"><span id="rollover1">' + 'Look at this!' + '</span></div>');
    });

    $('body').on('mouseenter','#rollover1', function() {
        $('#hl1').removeClass('nohighlight').addClass('highlight');
    });

    $('body').on('mouseleave','#rollover1',function() {
        $('#hl1').removeClass('highlight').addClass('nohighlight');
    });
}); 
```

[小提琴](http://jsfiddle.net/ZtgJB/)

最好委托给 dom 中存在的最近的父元素，因此您应该替换`body`为静态父元素。通过委派您将事件处理程序附加到父元素 - 然后侦听事件冒泡并处理事件。

我使用 .on() 制作了我的示例，因为我看到您选择了 jQuery 1.8，但是如果您使用的是较旧的库 - 这是您应该如何选择使用哪种方法

```
$(selector).live(events, data, handler);                // jQuery 1.3+
$(document).delegate(selector, events, data, handler);  // jQuery 1.4.3+
$(document).on(events, selector, data, handler);        // jQuery 1.7+ 
```

# android - Android How to hide server url for security in code?

> ID：12535305
> 
> 赞同：1
> 
> 时间：2012-09-21T17:28:52.510
> 
> 标签：android

My application need to communicate frequently.
So there are many url: [http://abc.php](http://abc.php)
The question is even if I use proguard, is it possible for people to get the url and hack in the system.
What should I do so that it can hide the link and make my system more secure.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T17:31:34.243

你不能。任何人都可以获取您的应用程序并使用嗅探器检查您的应用程序发送请求的位置。您应该在服务器上提供良好的安全性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T17:33:44.137

您将它们发送到的任何 URL 或 Web 服务都应该仅用于 JSON/XML 请求等用途。在一个广泛开放的基本 URL 中不应该有任何重要的东西。如果有那么你有问题开始。另外，您可能会尝试隐藏您的 URL，但使用附加到应用程序的简单网络工具，很容易嗅探 IP 地址并执行其他公共功能来查找 url。您拥有的任何 URL 都是公开的，因此您需要在另一端采取安全措施。

# ruby-on-rails - How would I do this query with Arel?

> ID：12535306
> 
> 赞同：0
> 
> 时间：2012-09-21T17:28:54.163
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, arel

I have a User model and an Item model. I want to rank users according to the value of the items they have. I want to do the equivalent of this query:

```
SELECT rank() OVER (ORDER BY grand_total DESC), u.*, grand_total
FROM users AS u
JOIN
(SELECT user_id, SUM(amount) AS grand_total FROM items WHERE EXTRACT(YEAR FROM sold_at)='2012' GROUP BY user_id) AS i
ON u.id = i.user_id; 
```

Specifically, I don't know how to join on my select.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:06:04.950

鉴于您描述的问题，我将这样编写查询：

```
select users.*, sum(items.amount) as rank
  from users
  join items on items.user_id = users.id
  group by users.id
  order by rank desc; 
```

这将转化为 AREL：

```
User.select('users.*, sum(items.amount) as rank').joins('join items on items.user_id = users.id').group('users.id').order('rank desc') 
```

这有一个方便的副作用，您可以调用`.rank`生成的 User 对象并从查询中获取排名列的值，以防您需要显示它。

你的情况有什么我在这里没有掌握的吗，或者这会起作用吗？

# jquery - Jquery 的 appendTo 导致脚本块再次执行

> ID：12535310
> 
> 赞同：0
> 
> 时间：2012-09-21T17:29:04.383
> 
> 标签：jquery

如果我使用**appendTo**移动被移动的脚本块周围的 DOM 树的部分，则重新运行，即它们运行两次。

示例：http: [//jsfiddle.net/EHDqE/](http://jsfiddle.net/EHDqE/)

有没有更好的方法来移动 DOM 部分而不再次执行其中的脚本块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:35:47.613

两件事情：

首先，将脚本直接嵌入到代码中并不是一个好习惯。它们应该在您的标题中引用，并包含在单独的文件中。

其次，我认为不可能阻止该脚本再次运行，就像`appendTo()`您正在查看的 DOM 元素的 HTML 重写一样。这意味着您需要直接访问文本，而不是整个元素。@Ohgodwhy 的解决方案是正确的：

```
$("#one").text().appendTo("#two") 
```

但是（如果这不是作业问题），我恳请您考虑将脚本移动到标题中，因为这是当前的最佳实践。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T17:45:45.917

我之前不得不做类似的事情......有点hacky但是...... [http://jsfiddle.net/teewuane/EHDqE/3/](http://jsfiddle.net/teewuane/EHDqE/3/)

HTML

```
<div id="one">
 a
 <script type="text/javascript">
     if(times_executed == 0){
         alert(1);
         times_executed+=1;
     } 
 </script>
 </div>
 <div id="two">
  b
 </div>​ 
```

脚本

```
times_executed = 0;

$("#one").appendTo("#two");​ 
```

# mysql - Is it ok to use both MATCH AGAINST and LIKE in one MySQL query?

> ID：12535315
> 
> 赞同：1
> 
> 时间：2012-09-21T17:29:26.080
> 
> 标签：mysql, search-engine, sql-like, match-against

I noticed that `MATCH AGAINST` cannot search words that have 3 characters or less. So I added `LIKE` along with `MATCH AGAINST` in **one** query.

**Search query:** css and javascript tip

**Database entries:**

```
id | subject
------------------------------------
1  | ten useful css tricks
------------------------------------
2  | performance tip for javascript 
```

**MySQL query:**

3-character words: css, tip

```
SELECT id, MATCH (subject) AGAINST ('css and javascript tip' IN BOOLEAN MODE)
FROM articles WHERE MATCH (subject) AGAINST ('css and javascript tip')
OR subject LIKE '%css%' OR subject LIKE '%tip%' 
```

This query works fine on my application (with a small database). I'm not sure if it's gonna cause any problems as the database grows.

Is this the correct way to search 3-character words while using MATCH AGAINST? If not, as for the example I provided, how should I seach for **css** and **javascript** at the same time?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:54:28.790

我用大约 100K 行来做这件事，而且速度并不慢。我认为还有其他选择，但对我来说这仍然足够:)

这是一个例子：

```
//...
$tokens = explode(' ',$s));
$squery = '';
array_map('trim', $tokens);

foreach($tokens as $token){
    if(strlen($token)>3)
        $squery .= "+$token* ";
    else
        $where .= " AND title LIKE '%$token%'";
if(!empty($squery))
    $select .= " , MATCH (title) AGAINST ('$squery' IN BOOLEAN MODE) AS score "
//... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T17:36:26.330

对于 Windows 用户，您可以更改 Mysql 系统变量中的最小字数。编辑通常位于 programdata/mysql/mysql server 5.x 目录中的 my.ini 文件。有时您必须将 my.ini 文件复制到程序 files/mysql/mysql server ver 5.x 中才能正常工作。正如我在 Windows Server 2003 和 2008 中所经历的那样，而第一个在 Windows 7 中工作。

在 [mysqld] 下方插入以下内容：

```
ft_min_word_len = 2  
ft_stopword_file = "" 
```

重新启动 Mysql，你可以在服务中执行此操作，停止并播放或任何你知道的。

然后重新索引你的表，确保引擎是 MISAM。虽然最近 InnoDB 也可以工作。

ft_stop_word_file 是导致某些单词被排除在匹配之外的文件。如果您有停用词文件，您可以将其等同于“”或指向您想要的纯文本文件。您可以创建自己的停用词文件，例如 mystopword.txt，里面将是您不想在匹配中包含的用空格分隔的单词。

# c - Convert hex string to string of bytes

> ID：12535320
> 
> 赞同：6
> 
> 时间：2012-09-21T17:29:47.700
> 
> 标签：c

I need to convert a (potentially very long) string like `char * s = "2f0a3f"` into the actual bytes it represents, when decoded from the hex representation. Currently I'm doing this, but it feels clunky and wrong.

```
 size_t hexlength = strlen(s);
  size_t binlength = hexlength / 2;

  unsigned char * buffer = malloc(binlength);
  long i = 0;
  char a, b;

  for (; i < hexlength; i += 2) {
    a = s[i + 0]; b = s[i + 1];
    buffer[i / 2] =
      ((a < '9' ? a - '0' : a - 'a' + 10) << 4) + (b < '9' ? b - '0' : b - 'a' + 10);
  } 
```

Two things strike me as ugly about this:

1.  The way I'm dividing by two each time I push into the buffer
2.  The conditional logic to figure out the decimal value of the hex digits

Is there a better way? Preferably not using something I'd have to add a dependency on (since I want to ship this code with minimal cross-platform issues). My bitwise math is awful ;)

NOTE: The data has been pre-validated to all be lowercase and to be a correct string of hex pairs.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T17:41:00.120

```
/* allocate the buffer */
char * buffer = malloc((strlen(s) / 2) + 1);

char *h = s; /* this will walk through the hex string */
char *b = buffer; /* point inside the buffer */

/* offset into this string is the numeric value */
char xlate[] = "0123456789abcdef";

for ( ; *h; h += 2, ++b) /* go by twos through the hex string */
   *b = ((strchr(xlate, *h) - xlate) * 16) /* multiply leading digit by 16 */
       + ((strchr(xlate, *(h+1)) - xlate)); 
```

**编辑添加**

在 80x86 汇编语言中，strchr() 的核心基本上是**一条**指令——它不会循环。

**另外：**这不会进行边界检查，不适用于 Unicode 控制台输入，并且如果传递无效字符会崩溃。

**另外：**感谢那些指出一些严重错别字的人。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T17:48:48.707

并不是说它会有很大的不同，但我会用乘法而不是除法。此外，值得拆分数字代码，因为您可能希望将其移植到`a-f`字符集中不相邻的平台（只是开玩笑！）

```
 inline int digittoint(char d) {
    return ((d) <= '9' ? (d) - '0' : (d) - 'a' + 10);
  }
  #define digittoint(d) ((d) <= '9' ? (d) - '0' : (d) - 'a' + 10)

  size_t hexlength = strlen(s);
  size_t binlength = hexlength / 2;

  unsigned char * buffer = malloc(binlength);
  long i = 0;
  char a, b;

  for (; i < binlength; ++i) {
    a = s[2 * i + 0]; b = s[2 * i + 1];
    buffer[i] = (digittoint(a) << 4) | digittoint(b);
  } 
```

I've fixed a bug in your digit-to-int implementation, and replaced the `+` with bitwise or on the grounds that it better expresses your intent.

You can then experiment to find the best implementation of `digittoint` - conditional arithmetic as above, `strspn`, or a lookup table.

Here's a possible branchless implementation that - bonus! - works on uppercase letters:

```
inline int digittoint(char d) {
    return (d & 0x1f) + ((d >> 6) * 0x19) - 0x10;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T17:50:35.527

尝试这样的事情：

```
const unsigned char bin[128] =
{
    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
    0, 1, 2, 3, 4, 5, 6, 7, 8, 9, -1, -1, -1, -1, -1, -1,
    -1, 10, 11, 12, 13, 14, 15, -1, -1, -1, -1, -1, -1, -1, -1, -1,
    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
    -1, 10, 11, 12, 13, 14, 15, -1, -1, -1, -1, -1, -1, -1, -1, -1,
    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1
};

int hexlength = strlen(s); 
int binlength = (hexlength / 2); 

unsigned char * buffer = (unsigned char *) malloc(binlength); 
if (buffer)
{
    char *hex = s; 

    unsigned char *buf = buffer;
    unsigned char b, c;

    int ok = 1;

    for (int i = 0; i < hexlength; i += 2)
    { 
        b = bin[*hex++];
        c = bin[*hex++];

        if ((b == -1) || (c == -1))
        {
            ok = 0;
            break;
        )

        *buf++ = ((b << 4) | c); 
    }

    if (ok == 1)
    {
        // use buffer as needed, up to binlength number of bytes...
    }

    free(buffer);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T17:38:49.640

如果您需要将您的数字（在字符串中）从十六进制转换为十进制，您可以使用`atol()`with`sprintf()`

如果您需要逐个字节地执行此操作，则可以缓冲每个字节，并且在填充每个缓冲区时，将其传递给 sprintf，如下所示：

```
char *hexRep;
char *decRep;
long int decVal;
...
decVal = atol(hexRep);
sprintf(decRep, "%u", decVal); 
```

这两个都在 C 的标准库中。在获得每个字节的字符串表示后，您可以将它们与`strcat()`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-08T09:44:15.353

这里有一些小的改进是对 MISRA 的遵从性。这个名字很混乱。

```
static inline uint8_t HexcharToInt(char c) {
    char result = 16;
    if (('0' <= c) && (c <= '9')) {
        result = c - '0';
    } else if (('a' <= c) && (c <= 'f')) {
        result = c + 10 - 'a';
    } else if (('A' <= c) && (c <= 'F')) {
        result = c + 10 - 'A';
    }
    return (uint8_t) result;
}

uint8_t *array = NULL;

size_t hexstringToArray(char *hexstring) {
    size_t len    = (strlen(hexstring) + 1) / 2; // Aufrunden
    if (array != NULL) {
        free(array);
        array = NULL;
    }
    array = (uint8_t*) malloc(len);
    uint8_t *arr = array;
    for (size_t i = 0; (i < len) && (len > 0); i++) {
        *arr = 0U;
        for (uint8_t shift = 8U; (shift > 0U) && (len > 0); ) {
            shift -= 4U;
            uint8_t curInt = HexcharToInt(*hexstring++);
            if (curInt >= 16U) {
                len = 0;
            } else {
                *arr |= ((uint8_t) curInt << shift);
            }
        }
        arr++;
    }
    return len;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-27T14:12:39.020

我想出了一个更简单的函数，它获取字符串并将转换结果逐字节复制到给定 N 大小的字节数组，并进行边界和完整性检查：

```
int8_t convert_str_to_bytes(uint8_t *byte_array, char* str, size_t n)
{
    char *hex_match = "0123456789ABCDEF";
    int i, j = 0;
    char cbuf[3];
    long ibuf;

    if (strlen(str) < n) {
            printf("ERROR: String is shorter than specified size.\n");
            return -1;
    }

    for (i = 0; i < n; i += 2) {

            strncpy(cbuf, &str[i], 2);

            if (strspn(cbuf, hex_match) != 2) {
                    printf("ERROR: String is not a hexadecimal representation. Breaking now...\n");
                    return -1;
            }

            ibuf = strtol(cbuf, NULL, 16);

            byte_array[j] = (uint8_t)ibuf;
            ++j;
    }

    return 0;
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-05-08T02:21:30.417

```
inline char HexToChar(char c)
{
    if ('0' <= c && c <= '9')
    {
        return c - '0';
    }
    else if ('a' <= c && c <= 'f')
    {
        return c + 10 - 'a';
    }
    else if ('A' <= c && c <= 'F')
    {
        return c + 10 - 'A';
    }

    return -1;
}

size_t HexToBinrary( const char* hex, size_t length, char* binrary, size_t binrary_cap )
{
    if (length % 2 != 0 || binrary_cap < length / 2)
    {
        return 0;
    }

    memset(binrary, 0, binrary_cap);
    size_t n = 0;
    for (size_t i = 0; i < length; i += 2, ++n)
    {
        char high = HexToChar(hex[i]);
        if (high < 0)
        {
            return 0;
        }

        char low = HexToChar(hex[i + 1]);
        if (low < 0)
        {
            return 0;
        }

        binrary[n] = high << 4 | low;
    }
    return n;
} 
```

# mongodb - HBase, mongoDB, Cassandra - overhead on small cluster, small data

> ID：12535326
> 
> 赞同：1
> 
> 时间：2012-09-21T17:29:53.867
> 
> 标签：mongodb, cassandra, hbase, database

Ok,this systems are scalable with respect to nr of nodes and big amount of data.

But how about the overhead involved, if I use this systems on a small cluster (5-10 nodes), and on a small amount of data, processing/storing on a scale of a couple of gigabytes? Or on a smaller data, like hundreds of MB ? Are there better database systems to use for my cluster and my amount of data?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:37:29.473

可扩展的解决方案通常会为扩展大数据而付出代价。与您要处理的大数据相比，损失微不足道。如果您不打算以 TB 为单位处理数据，那么您可以使用响应速度更快的系统，而无需支付该费用。

使用 Sqlite 数据库处理较小的数据。坦率地说，这取决于您有哪些其他要求/限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T10:27:28.593

您可能可以只使用单节点 mySQL 服务器来处理此类数据，并具有完整的 SQL 功能、完整的 ACID、成熟的工具等优势。

# asp.net-mvc - Difference between ASP.NET MVC 3 and 4?

> ID：12535327
> 
> 赞同：62
> 
> 时间：2012-09-21T17:30:05.307
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

Is there a comprehensive list that explains all of the new features of MVC4 and what all has changed from MVC3?

(The [release notes](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253808) are not much helpful)

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-09-21T17:34:18.740

[从MVC4 发行说明](http://www.asp.net/whitepapers/mvc4-release-notes)复制并粘贴：

•<strong>现代HTTP 编程模型：使用新的强类型HTTP 对象模型直接访问和操作Web API 中的HTTP 请求和响应。通过新的 HttpClient 类型可以在客户端对称地使用相同的编程模型和 HTTP 管道。

•<strong>完全支持路由：ASP.NET Web API 支持 ASP.NET Routing 的全套路由功能，包括路由参数和约束。此外，使用简单的约定将操作映射到 HTTP 方法。

•<strong>内容协商：客户端和服务器可以共同确定从Web API 返回的数据的正确格式。ASP.NET Web API 为 XML、JSON 和表单 URL 编码格式提供默认支持，您可以通过添加自己的格式化程序来扩展此支持，甚至替换默认的内容协商策略。

•<strong>模型绑定和验证：模型绑定提供了一种从 HTTP 请求的各个部分提取数据并将这些消息部分转换为 Web API 操作可以使用的 .NET 对象的简单方法。还基于数据注释对动作参数执行验证。

•<strong>过滤器：ASP.NET Web API 支持过滤器，包括众所周知的过滤器，例如 [Authorize] 属性。您可以创作和插入您自己的过滤器，用于操作、授权和异常处理。

•<strong>查询组合：对返回 IQueryable 的操作使用 [Queryable] 过滤器属性，以支持通过 OData 查询约定查询您的 Web API。

•<strong>改进的可测试性：Web API 操作不是在静态上下文对象中设置 HTTP 详细信息，而是使用 HttpRequestMessage 和 HttpResponseMessage 实例。与您的 Web API 项目一起创建一个单元测试项目，以便快速开始为您的 Web API 功能编写单元测试。

•<strong>基于代码的配置：ASP.NET Web API 配置仅通过代码完成，使您的配置文件保持干净。使用提供服务定位器模式来配置扩展点。

•<strong>改进了对控制反转 (IoC) 容器的支持：ASP.NET Web API 通过改进的依赖解析器抽象为 IoC 容器提供了强大的支持

•<strong>自托管：除了 IIS，Web API 还可以托管在您自己的进程中，同时仍然使用路由的全部功能和 Web API 的其他功能。

•<strong>创建自定义帮助和测试页面：您现在可以通过使用新的 IApiExplorer 服务轻松地为您的 Web API 构建自定义帮助和测试页面，以获得您的 Web API 的完整运行时描述。

•<strong>监控和诊断：ASP.NET Web API 现在提供轻量级跟踪基础架构，可以轻松与现有的日志解决方案集成，例如 System.Diagnostics、ETW 和第三方日志框架。您可以通过提供 ITraceWriter 实现并将其添加到 Web API 配置来启用跟踪。

•<strong>链接生成：使用 ASP.NET Web API UrlHelper 生成指向同一应用程序中相关资源的链接。

•<strong>Web API 项目模板：从新建 MVC 4 项目向导中选择新的 Web API 项目，以快速启动并运行 ASP.NET Web API。

•<strong>脚手架：使用“添加控制器”对话框快速搭建基于实体框架模型类型的 Web API 控制器。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-09-21T18:35:28.397

[从MVC4 中的新功能](http://www.askamoeba.com/Answer/130/Whats-new-in-MVC4-MVC3-Vs-MVC4)复制和粘贴- MVC3 Vs MVC4

> MVC4 中的新功能 - MVC3 与 MVC4

**对默认项目模板的增强**

用于创建新 ASP.NET MVC 4 项目的模板已更新，以创建更具现代感的网站

**移动项目模板**

如果您正在开始一个新项目并希望创建一个专门用于移动设备和平板电脑浏览器的站点，您可以使用新的移动应用程序项目模板。这是基于 jQuery Mobile，一个用于构建触摸优化 UI 的开源库

**显示模式**

新的显示模式功能允许应用程序根据发出请求的浏览器选择视图。例如，如果桌面浏览器请求主页，应用程序可能会使用该`Views\Home\Index.cshtml`模板。如果移动浏览器请求主页，应用程序可能会返回`Views\Home\Index.mobile.cshtml`模板。

```
DisplayModes.Modes.Insert(0, new DefaultDisplayMode("iPhone")
{
  ContextCondition = (context => context.Request.UserAgent.IndexOf
    ("iPhone", StringComparison.OrdinalIgnoreCase) >= 0)
}); 
```

**jQuery Mobile、视图切换器和浏览器覆盖**

jQuery Mobile 是一个开源库，用于构建触摸优化的 Web UI。如果您想将 jQuery Mobile 与 ASP.NET MVC 4 应用程序一起使用，您可以下载并安装一个帮助您入门的 NuGet 包。要从 Visual Studio 包管理器控制台安装它，请键入以下命令： Install-Package jQuery.Mobile.MVC 这将安装 jQuery Mobile 和一些帮助文件，包括以下内容： Views/Shared/Layout.Mobile.cshtml，这是一个基于 jQuery Mobile 的布局。一个视图切换器组件，它由 Views/Shared/ViewSwitcher.cshtml 部分视图和 ViewSwitcherController.cs 控制器组成。安装包后，使用移动浏览器（或同等产品，如 Firefox 用户代理切换器插件）运行应用程序。你会发现你的页面看起来很不一样，因为 jQuery Mobile 处理布局和样式。要利用这一点，您可以执行以下操作 如果访问者单击该链接，他们将切换到同一页面的桌面版本。由于默认情况下您的桌面布局不会包含视图切换器，因此访问者将无法进入移动模式。要启用此功能，请将以下对 _ViewSwitcher 的引用添加到您的桌面布局中，就在元素内部：

```
@Html.Partial("_ViewSwitcher") 
```

...浏览器覆盖是 ASP.NET MVC 4 的核心功能，即使您不安装 jQuery.Mobile.MVC 包也可用。但是，它只影响视图、布局和部分视图选择——它不影响任何其他依赖于 Request.Browser 对象的 ASP.NET 功能。

**在 Visual Studio 中生成代码的秘诀**

新的“食谱”功能使 Visual Studio 能够基于可以使用 NuGet 安装的包生成特定于解决方案的代码。Recipes 框架使开发人员可以轻松编写代码生成插件，您还可以使用这些插件来替换 Add Area、Add Controller 和 Add View 的内置代码生成器。由于配方部署为 NuGet 包，因此可以轻松地将它们检入源代码管理并自动与项目中的所有开发人员共享。它们也可在每个解决方案的基础上使用。

**异步控制器的任务支持**

您现在可以将异步操作方法编写为返回 Task 或 Task 类型对象的单个方法。

例如，如果您使用 Visual C# 5（或使用 Async CTP），则可以创建如下所示的异步操作方法：

```
public async Task Index(string city) {
    var newsService = new NewsService();
    var sportsService = new SportsService();

    return View("Common", new PortalViewModel {
      NewsHeadlines = await newsService.GetHeadlinesAsync(),
      SportsScores = await sportsService.GetScoresAsync()
    });
} 
```

在前面的操作方法中，对 newsService.GetHeadlinesAsync 和 sportsService.GetScoresAsync 的调用是异步调用的，不会阻塞线程池中的线程。

返回 Task 实例的异步操作方法也可以支持超时。要使您的操作方法可取消，请将 CancellationToken 类型的参数添加到操作方法签名中。以下示例显示了一个异步操作方法，该方法的超时时间为 2500 毫秒，如果发生超时，它将向客户端显示 TimedOut 视图。

```
[AsyncTimeout(2500)]
[HandleError(ExceptionType = typeof(TaskCanceledException), View = "TimedOut")]
public async Task Index(string city, CancellationToken cancellationToken) {
    var newsService = new NewsService();
    var sportsService = new SportsService();

    return View("Common", new PortalViewModel {
      NewsHeadlines = await newsService.GetHeadlinesAsync(cancellationToken),
      SportsScores = await sportsService.GetScoresAsync(cancellationToken)
    });
} 
```

希望这可以帮助。谢谢

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-25T07:31:45.520

请浏览[所有 MVC 4 新功能的 URL](http://www.codeproject.com/Articles/683730/New-Features-in-ASP-NET-MVC-4)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-15T11:10:36.240

MVC 3

1.  可通过 NuGet 扩展的集成脚手架系统
2.  支持 HTML 5 的项目模板
3.  富有表现力的视图，包括新的 Razor 视图引擎
4.  具有依赖注入和全局操作过滤器的强大钩子
5.  丰富的 JavaScript 支持，带有不显眼的 JavaScript、jQuery 验证和 JSON 绑定

MVC 4

1.  ASP.NET Web API
2.  更新和现代化的默认项目模板
3.  新的移动项目模板
4.  许多支持移动应用程序的新功能
5.  增强了对异步方法的支持

参考：[http ://dotnet-developers-cafe.blogspot.in/2013/09/difference-between-aspnet-mvc-3-and-mvc.html](http://dotnet-developers-cafe.blogspot.in/2013/09/difference-between-aspnet-mvc-3-and-mvc.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-05T08:26:29.097

MVC 4.0 中引入的重要特性之一是异步控制器，它可以编写异步操作方法。异步控制器允许在不使工作线程空闲的情况下执行操作。

调用异步操作时，会发生以下步骤：

Web 服务器从线程池中获取一个线程（工作线程）并调度它来处理传入的请求。此工作线程启动异步操作。工作线程返回到线程池以服务另一个 Web 请求。当异步操作完成时，它会通知 ASP.NET。Web 服务器从线程池（可能与启动异步操作的线程不同的线程）中获取一个工作线程来处理请求的其余部分，包括呈现响应。

将同步操作方法转换为异步操作方法

以下是同步动作方法及其异步等效版本的示例。

同步控制器：

```
 public class TestController : Controller
 {
   public ActionResult Index()
    {
     return View(); 
    }
 } 
```

上述操作的异步变体：

```
public class TestController : AsyncController
{
   public void IndexAsync()
   {
    return View();
   }

  public ActionResult IndexCompleted()
  {
   return View();
  }
} 
```

脚步：

*   同步控制器是从 Controller 类派生的类，用于实现 AsyncController，而不是从 Controller 派生控制器，从 AsyncController 类派生它。从 AsyncController 派生的控制器使 ASP.NET 能够处理异步请求，并且它们仍然可以为同步操作方法提供服务。

*   对应同步控制器中的同步动作方法，需要为异步控制器中的动作创建两个方法。第一个启动异步过程的方法必须有一个由动作和后缀“Async”组成的名称。异步过程完成时调用的另一个方法（回调方法）必须具有由操作和后缀“已完成”组成的名称。

    在上面的示例中，Index 动作在异步控制器中变成了两个方法：IndexAsync 和 IndexCompleted。

    IndexAsync 方法返回 void，而 IndexCompleted 方法返回一个 ActionResult 实例。尽管该操作由两个方法组成，但使用与同步操作方法相同的 URL 访问它（例如，Controller/Index）。

***请注意以下有关异步操作方法的内容：***

如果操作名称为 Sample，则框架将查找 SampleAsync 和 SampleCompleted 方法。

视图页面应命名为 Sample.aspx，而不是 SampleAsync.aspx 或 SampleCompleted.aspx。（动作名称是 Sample，而不是 SampleAsync）

控制器不能包含名为 SampleAsync 的异步方法和名为 Sample 的同步方法。如果是这样，则会引发 AmbiguousMatchException 异常，因为 SampleAsync 操作方法和 Sample 操作方法具有相同的请求签名。

有关更多详细信息，请单击此处：[http ://www.coun sellbyabhi.com/2014/05/asynchronous-controllers-in-aspnet-mvc.html](http://www.counsellingbyabhi.com/2014/05/asynchronous-controllers-in-aspnet-mvc.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-15T11:42:15.383

请检查以下链接以找出差异。

[http://forums.asp.net/t/1753017.aspx](http://forums.asp.net/t/1753017.aspx)

[http://www.askamoeba.com/Answer/130/Whats-new-in-MVC4-MVC3-Vs-MVC4](http://www.askamoeba.com/Answer/130/Whats-new-in-MVC4-MVC3-Vs-MVC4)

[http://forums.asp.net/t/1918539.aspx?Main+difference+between+regular+webapplication+mvc3+and+mvc4+](http://forums.asp.net/t/1918539.aspx?Main+difference+between+regular+webapplication+mvc3+and+mvc4+)

# linux-kernel - Kernel recompiled with same config but: cpufreq: no nforce2 chipset error

> ID：12535333
> 
> 赞同：0
> 
> 时间：2012-09-21T17:30:32.477
> 
> 标签：linux-kernel

I need to compile an old kernel 2.6.23 (downloaded from linuxkernels.com) in order to use it with a real time patch (it's a long story...), I installed ubuntu 10.04 which has a kernel 2.6.32-43-generic-pae. I decided to simple copy ubuntu configuration:

```
cp cp /boot/config-2.6.32-43-generic-pae /usr/src/linux-2.6.23/.config 
```

I recompile the kernel:

```
make menuconfig 
make
make install
make modules_install
mkinitramfs -o /boot/initrd.img-2.6.23-MYVER 2.6.23-MYVER 
```

note that in the config I make this edit: I remove the module versioning support under loadable modules section. (this step is required by the patch).

At start, I get the title error:

```
cpufreq: no nforce2 chipset error 
```

how it possible, since I copied a working configuration? Maybe is because of that only flag I disable?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:43:38.140

不确定，但是当我复制现有的 .config 时，我首先运行“make oldconfig”以确保我已全部同步。然后，如果我想以交互方式查看/更改任何设置，我会运行 make menuconfig。

# floating-point - Is this a visual representation of round-off errors in IEEE math

> ID：12535334
> 
> 赞同：1
> 
> 时间：2012-09-21T17:30:39.977
> 
> 标签：floating-point, ieee-754, floating-point-precision

In Wolfram Alpha:

```
plot -EXP(t)/2 LN((EXP(t)-1)/(EXP(t)+1)) from t=0 to t=40 
```

![Round-off](../Images/559e767886e3e6c438faa5c6075c9ba5.png)

Is this how round off errors appear in solutions when subtraction operand orders of magnitude differ more than `2^24` (32-bit float) ?

Link: [Equation Plot](http://www.wolframalpha.com/input/?i=plot%20-EXP%28t%29/2%20LN%28%28EXP%28t%29-1%29/%28EXP%28t%29%2b1%29%29%20from%20t=0%20to%20t=40)

Link: [What Every Computer Scientist Should Know About Floating-Point Arithmetic](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:05:25.067

基本上，是的，尽管减法隐藏在计算中，并且数据类型是双精度数，而不是浮点数。

对于大`t`，`(exp(t)-1)/(exp(t)+1)`本质上是`1 - 2exp(-t)`，其对数非常接近`-2exp(-t)`。但是，因为`2exp(-t)`与 相比是如此之小`1`，所以大多数精度位都会在传递给对数的值中丢失，这会导致您观察到的所有噪声。

# java - Opening a textpane in the same form on a Button click

> ID：12535335
> 
> 赞同：0
> 
> 时间：2012-09-21T17:30:41.733
> 
> 标签：java, swing, user-interface, runtime, jtextpane

I am trying to design a basic editor type of GUI in Java using Swing. I have a menu item named `New` clicking on which I want a blank text area to fill up the GUI. My code is as folows :

* * *

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class UI extends JFrame {
    private JMenuBar bar;
    private JMenu menu;
    private JMenuItem item;
    private JTextPane tp;

    public UI() {
        setLayout(new FlowLayout());
        bar = new JMenuBar();
        setJMenuBar(bar);

        menu = new JMenu("File");
        bar.add(menu);

        item = new JMenuItem("New");
        menu.add(item);
        item.addActionListener(new xyz());
    }

    public class xyz implements ActionListener {
        public void actionPerformed(ActionEvent arg0) {
            JTextPane tp = new JTextPane();
            add(tp);
        }
    }

    public static void main(String args[]) {
        // do the rest of the stuffs
    }
} 
```

* * *

However, even on clicking on the `New`, I do not get the textPane on the same frame. Can someone please explain.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:32:30.483

*   使用`JTextPane#setText("")`而不是创建一个新的`JTextPane`

*   否则你必须通知`Container`和`(re)validate()``repaint()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T23:18:25.020

`JTabbedPane`如果这个应用程序可能应该添加文本窗格。支持多个文档。如果它用于“单个文档”，请在启动时将文本窗格放在框架上。

# ruby-on-rails - 为什么我的 Heroku 应用程序无法识别浏览器中创建的 cookie？

> ID：12535345
> 
> 赞同：0
> 
> 时间：2012-09-21T17:31:09.770
> 
> 标签：ruby-on-rails

Heroku 服务器上的应用程序无法识别 Cookie。我在 Chrome 和 Firefox 中看到 myapp.herokuapp.com 网站的可用 cookie，但应用程序看不到它。这在我运行“瘦”网络服务器的本地环境中运行良好，并且应用程序看到了 cookie。

有什么我想念的吗？谢谢！

session_controller.rb：

```
 def create
    user = User.where(:email => params[:session][:email]).first
    if user && user.authenticate(params[:session][:password])
      log_in user
      redirect_to root_path
    else
      render 'new'
    end
  end 
```

session_helper.rb：

```
 def log_in(user)
    cookies.permanent[:token] = user.token
    self.current_user = user
  end

  def current_user
    @current_user ||= User.where(:token => cookies[:token]).first
  end

  def current_user?(user)
    user == current_user
  end 
```

# php - echo 输出按语言环境更改？

> ID：12535347
> 
> 赞同：0
> 
> 时间：2012-09-21T17:31:15.737
> 
> 标签：php, wordpress, locale

在 WordPress 主题中，我有以下代码（包括调试信息）：

```
 echo strlen($op);
 $s = strlen($op);
 echo($s);
 echo($op);
 error_log("strlen $s"); 
```

如果我进入页面，`www.someurl.com`我会`2525stringwith25chars`在屏幕和`strlen 25`日志中看到。

如果我进入页面，`www.someurl.com/?lang=es`我会`00`在屏幕和`strlen 25`日志中看到。似乎`echo`没有回显新语言环境的变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:42:33.637

error_log 调用中缺少引号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T19:53:11.140

原来 WP 正在通过代码 3 次，第一次结果是正确的并出现（或不出现）在屏幕上，但第 2 次和第 3 次不同的结果没有显示在屏幕上，仅在记录，但直到看不见为止。

使用 microtime() 解决了在回声之前和之后以及在日志条目之前和之后打印出来的问题，很明显日志条目没有反映回声。

至于为什么 WP 会通过 3 次，安装了 404 处理程序插件后，任何可卸载的图像文件（例如在 css 中）都会导致 404 导致重定向到 404 错误页面。

# iphone - Xcode 4.5 在装有 iOS 6 的设备上运行应用程序需要更长的时间

> ID：12535355
> 
> 赞同：11
> 
> 时间：2012-09-21T17:31:41.680
> 
> 标签：iphone, ios, xcode, ipad

有没有其他人注意到从 Xcode“发送”一个应用程序在设备上运行它似乎需要更长的时间？当它转到 iOS 6 设备时，我看到新的延迟数秒。

有什么可以配置来改善这个加载时间，还是因为幕后发生了一些新的事情？

# facebook - 如何合并或处理粉丝页面和应用页面？

> ID：12535357
> 
> 赞同：0
> 
> 时间：2012-09-21T17:31:43.047
> 
> 标签：facebook

首先，我是整个 Facebook 页面和应用程序的新手。很久以前，我在这里为我的所有应用程序粉丝创建了一个页面：http:
[//www.facebook.com/xiialive](http://www.facebook.com/xiialive)

但是，现在我的 Android 应用程序允许用户发布他们正在听 Facebook 的内容。问题是我无法将我的 Facebook 应用程序设置为指向我的旧粉丝页面，所以我不得不创建一个新页面：http: [//www.facebook.com/pages/XiiaLive-Internet-Radio/134321196699146](http://www.facebook.com/pages/XiiaLive-Internet-Radio/134321196699146)

我只是不想支持两个页面...似乎有点奇怪...我该如何处理这种情况？有任何想法吗？可能会自动重定向到我的旧粉丝页面？

任何如何处理这种情况的提示将不胜感激！

# javascript - Jquery 按键验证电子邮件输入

> ID：12535360
> 
> 赞同：0
> 
> 时间：2012-09-21T17:32:08.223
> 
> 标签：javascript, jquery, regex, jquery-validate

我想要完成的是：

如果用户输入了有效的电子邮件，则显示 ( `.check`)'ok' 符号。如果无效，则什么都不显示（暂时。我稍后会放一些东西）。我有 3 个电子邮件字段。我正在尝试为每一个“验证”。

```
<form id="emailsForm" method="POST" action="/account/recommend/">
    <div class="prepend">
        <p><strong>Emails:</strong></p>
        <div>
            <span class="added"><p class="check">ok</p></span>
            <input type="email" id="email1" class="input-text" onblur="alert(/([A-Z0-9a-z_-][^@])+?@[^$#<>?]+?\.[\w]{2,4}/.test(this.value))">
        </div>
        <div>
            <span class="added"><p class="check">ok</p></span>
            <input type="email" id="email2" class="input-text">
        </div>
        <div>
            <span class="added"><p class="check">ok</p></span>
            <input type="email" id="email3" class="input-text">
        </div>
        <button type="submit" class="submit">Send</button>
    </div>
</form> 
```

```
$("form#emailsForm :input").each(function(){
    $('input').blur(function() {
        var testEmail = /^[A-Z0-9._%+-]+@([A-Z0-9-]+\.)+[A-Z]{2,4}$/i;
        if (testEmail.test(this.value)){
            $('input').siblings(".check").css('visibility', 'visible');
        }
        else {

        }
    });
}); 
```

[http://jsfiddle.net/RFcaN/23/](http://jsfiddle.net/RFcaN/23/) 我做错了什么？

感谢您的帮助和建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:37:08.017

首先，您需要找到`this`输入的兄弟，因此将您的选择器从 更改`$('input')`为`$(this)`。

其次，`.check`不是输入的兄弟。是兄妹的后代。

```
$(this).siblings(".added").find('.check').css('visibility', 'visible'); 
```

# android - android：从表格布局中删除一行

> ID：12535362
> 
> 赞同：0
> 
> 时间：2012-09-21T17:32:28.797
> 
> 标签：android, tablelayout, layout-inflater

为了在表格布局中添加一行，代码可以如下完成：

```
 private void ToDisplayTagGUI(String Slot, int index)
      LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
      View newTagView = inflater.inflate(R.layout.new_tag_view, null);
      SlotTableLayout.addView(newTagView, index); 
```

删除整个tablelayout的数据，代码如下：

```
 SlotTableLayout.removeAllViews(); 
```

如果我只想从表格布局中删除其中一行，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:54:40.453

要从 tablelayout 中删除特定行，您可以使用：

table.removeView(rowindex);

# c++ - 像交互式shell一样设计python

> ID：12535365
> 
> 赞同：2
> 
> 时间：2012-09-21T17:32:33.447
> 
> 标签：c++, design-patterns

python 背后的设计模式是什么`interactive shell`。我想为我的服务器做这个，但我最终得到了很多`if - then- else`模式。

例如，当我开始时，`python interpreter`我会得到这样的东西

```
Python 2.6.7 (r267:88850, Feb  2 2012, 23:50:20)
[GCC 4.5.3] on cygwin
Type "help", "copyright", "credits" or "license" for more information.
>>> help 
```

帮助后提示更改为帮助

```
Welcome to Python 2.6!  This is the online help utility.

If this is your first time using Python, you should definitely check out
the tutorial on the Internet at http://docs.python.org/tutorial/.

Enter the name of any module, keyword, or topic to get help on writing
Python programs and using Python modules.  To quit this help utility and
return to the interpreter, just type "quit".

To get a list of available modules, keywords, or topics, type "modules",
"keywords", or "topics".  Each module also comes with a one-line summary
of what it does; to list the modules whose summaries contain a given word
such as "spam", type "modules spam".

help> 
```

我认为这是`read-eval loop`设计之王。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:46:31.307

对于 REPL，你需要一个上下文（一个存储 REPL 状态的对象）、一个命令解析器（它解析输入并生成一个 AST），以及一种将命令映射到动作的方法（动作通常只是修改上下文的函数和/或产生副作用）。

一个简单的 REPL 可以像下面这样实现，其中上下文是使用一个简单的字典来实现的，AST 只是在空格上分割的输入命令，字典用于将命令映射到操作：

```
context = {}
commands = {}

def register(func):
    """ convenience function to put `func` into commands map """
    # in C++, you cannot introspect the function's name so you would
    # need to map the function name to function pointers manually
    commands[func.__name__] = func
def parse(s):
    """ given a command string `s` produce an AST """
    # the simplest parser is just splitting the input string,
    # but you can also produce use a more complicated grammer
    # to produce a more complicated syntax tree
    return s.split()
def do(cmd, commands, context):
    """ evaluate the AST, producing an output and/or side effect """
    # here, we simply use the first item in the list to choose which function to call
    # in more complicated ASTs, the type of the root node can be used to pick actions
    return commands[cmd[0]](context, cmd)

@register
def assign(ctx, args):
    ctx[args[1]] = args[2]
    return '%s = %s' % (args[1], args[2])
@register
def printvar(ctx, args):
    print ctx[args[1]]
    return None
@register
def defun(ctx, args):
    body = ' '.join(args[2:])
    ctx[args[1]] = compile(body, '', 'exec')
    return 'def %s(): %s' % (args[1], body)
@register
def call(ctx, args):
    exec ctx[args[1]] in ctx
    return None
# more commands here

context['PS1'] = "> "
while True:
    # READ
    inp = raw_input(context["PS1"])

    # EVAL
    cmd = parse(inp)
    out = do(cmd, commands, context)

    # PRINT
    if out is not None: print out

    # LOOP 
```

一个示例会话：

```
> assign d hello
d = hello
> printvar d
hello
> assign PS1 $
PS1 = $
$defun fun print d + 'world'
def fun(): print d + 'world'
$call fun
helloworld 
```

使用更多技巧，您甚至可以将上下文和命令字典合并在一起，从而允许使用 shell 语言修改 shell 的命令集。

这个设计模式的名字，如果有名字的话，就是Read-Eval-Print Loop设计模式；所以，是的，你的问题可以自己回答。

# java - JPA INNER JOIN WITH VIEW

> ID：12535368
> 
> 赞同：0
> 
> 时间：2012-09-21T17:32:50.457
> 
> 标签：java, jpa, inner-join, toplink

我有包含以下注释的结果 JPA 类。

```
@JoinColumn (name = "cod_id", insertable = false, updatable = false, referencedColumnName = "cod")
@ManyToOne(optional = true, fetch=FetchType.EAGER)
private TableView dep; 
```

TableView 是一个实体，其来源来自另一个数据库的视图。因此，据我所知，我无法直接访问该表。

行。介绍完之后，这里是：

**问题：**当我获取结果时，TopLink JPA 会逐个查询每个 dep。它从 Results 中获取所有的 resultSet，然后逐个获取每个 dep。

**问题：**有没有办法避免这种行为？以最小化数据库服务器工作量的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:05:00.303

您可以在查询中使用连接提取，或者在映射中使用 @JoinFetch，或者使用批量提取。

见， [http://java-persistence-performance.blogspot.com/2010/08/batch-fetching-optimizing-object-graph.html](http://java-persistence-performance.blogspot.com/2010/08/batch-fetching-optimizing-object-graph.html)

# emacs - 在 Emacs 24.x 中控制 ansi-term 中缓冲区和文本的背景颜色

> ID：12535371
> 
> 赞同：0
> 
> 时间：2012-09-21T17:32:53.420
> 
> 标签：emacs, terminal, emacs24, ansi-term

我正在运行 Emacs 24.1。在我的 .emacs 开始文件中，我有以下行：

```
(load-theme 'tango-dark t) 
```

但是，当我运行 ansi-term 终端时，背景颜色效果不佳：

                          ![在此处输入图像描述](../Images/74ba01a32a834d2d7a99979e85d39d91.png)

有趣的是，对于目录，背景颜色似乎是正确的，而对于某些文件，背景颜色是黑色（即使缓冲区的背景颜色是深灰色）。

我想：

1：使缓冲区的背景颜色与文本的背景颜色匹配（在这种情况下为黑色）

或者

2：让文本的背景颜色与缓冲区的背景颜色相匹配（在这种情况下为深灰色），在这种情况下由 tango-dark 配置。

我怎样才能做到这一点？（两种可能性的答案都是理想的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:54:19.480

由于 Emacs 24 内置了主题机制，它`color-theme`与之前用于相同目的的库略有不同，但非常相似。

我认为发生的事情是在应用终端颜色设置之前以某种方式初始化了主题，或者，可能是旧主题用于设置此颜色，而新主题则没有。

本质上，主题是一组面孔，主题的作者认为您可能会使用这些面孔（因此您可以将 Emacs 中未内置的面孔放入主题中）。但是，主题也可以设置其他内容，因此它可以使用`custom-theme-set-variables`或以前设置终端背景颜色，但现在不再这样做了。

无论如何，您应该始终能够通过自定义面部本身（这将覆盖主题设置）或自定义主题来自定义它。您可以进行第一次使用`M-x``customize-face``RET``default``RET`和第二次使用`M-x``customize-theme``RET``tango-dark``RET`

# entity-framework-migrations - 代码优先迁移：如何查看/管理数据库内模型/迁移？

> ID：12535378
> 
> 赞同：2
> 
> 时间：2012-09-21T17:33:07.383
> 
> 标签：entity-framework-migrations

代码优先迁移将 edmx 模型与迁移一起以压缩形式存储在数据库中。Get-Migrations 命令行开关列出了所有应用的迁移。我不明白的是：

1.  如何以人类可读的形式显示迁移？负责生成它们的相应源代码可能并不总是在手边，甚至不存在（在正确的版本中）。
2.  如何管理此迁移路径？例如，只有在完全可以应用迁移的情况下，带有 -force 的 Update-Database 仍然有效——但也许我已经手动将数据库引入了特定的模式。我如何强制迁移以放弃认为仍然存在虚假迁移的知识？另一个方向的类似问题将适用。
3.  有没有办法转储当前的 edmx？

所有问题都适用于命令行开关或其他外部工具——我不想以编程方式做任何事情。

# c++ - C++连续读取文件

> ID：12535381
> 
> 赞同：2
> 
> 时间：2012-09-21T17:33:16.823
> 
> 标签：c++, file-io

我有一个生产者/消费者设置：我们的客户端向我们提供服务器处理的数据，而我们的客户端通过不断写入文件向我们的服务器提供数据。我们的服务器使用 inotify 查找任何文件修改，并处理新数据。

问题：服务器中的文件阅读器有一个大小为 4096 的缓冲区。我有一个模拟上述情况的单元测试。测试不断写入一个打开的文件，文件阅读器不断尝试读取一个进程。但是，我注意到在读取了比 4096 小得多的第一条记录后，在 ifstream 对象中设置了一个错误标志。这意味着没有处理任何到达的新数据。一个简单的解决方法似乎是在每次读取后调用 ifstream::clear ，这确实解决了问题。但是，这是怎么回事？这是正确的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:37:59.877

首先，根据您的系统，可能会或可能不会读取另一个进程写入的文件：在 Windows 上，打开文件时的正常设置使访问独占。我对 Window 了解不多，无法判断是否还有其他设置。在 POSIX 系统上，可以打开具有适当权限的文件以供不同进程读取和写入。从它的声音来看，您使用的是 Linux，即遵循 POSIX 规范的东西。

但是，在更改时轮询文件的方法并不完全理想：正如您所注意到的，每次到达当前文件的末尾时都会出现“错误”。实际上，到达文件末尾并不是真正的错误，但尝试解码超出文件末尾的内容是错误的。此外，仍然会设置超出文件末尾的读取`std::ios_base::eofbit`，因此，流不会是`good()`. 如果您坚持使用这种方法，那么除了阅读到文件末尾并以某种方式处理不完整的读取之外，别无选择。

但是，如果您可以控制创建文件，则可以做一个简单的技巧：您可以创建它，而不是让文件成为普通文件，而是使用写入程序将写入的文件名`mkfifo`创建一个*命名管道*：在 POSIX 系统上打开一个文件，如果已经有一个文件，它不会创建一个新文件，而是使用现有文件。好吧，文件或其他任何东西都由文件名寻址（除了文件和命名管道，您可能会看到目录、字符或块特殊设备，可能还有其他）。

命名管道是一种奇怪的野兽，旨在让两个进程相互通信：一个进程写入一端的内容可以在另一端被另一个进程读取！命名管道本身没有任何内容，即，如果您需要文件的内容以及与另一个进程的通信，您可能需要在某处复制内容。打开一个用于读取的命名管道，只要它到达文件的当前末尾，它将阻塞，即，最初读取将阻塞，直到有写入器。类似地，对命名管道的写入将阻塞，直到有读取器。一旦有两个进程与各自的另一端通信，在另一个进程退出后读取或写入命名管道时将收到错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-28T07:09:17.203

如果您擅长一次又一次地打开和关闭文件，则此问题的正确解决方案是存储最后读取的位置，并在文件更新后从那里开始：

确切的算法将是：

1.  设置 start_pos = 0 ，结束 pos =0
2.  更新 end_pos = infile.tellg(),
3.  将 get 指针移动到 start_pos（使用 seekg()）并读取块（end_pos - start_pos）。
4.  更新 start_pos = end_pos 然后关闭文件。
5.  睡眠一段时间，然后再次打开文件。
6.  如果文件流仍然不好，请关闭文件并跳转到步骤 5。
7.  如果文件流良好，则跳至步骤 1。

所有 c++ 参考都在[http://www.cplusplus.com/reference/istream/istream/seekg/](http://www.cplusplus.com/reference/istream/istream/seekg/) 你可以使用这里给出的示例代码。

确切的代码将是：

```
`
#include <iostream>     
#include <fstream>      

int main(int argc, char *argv[]) {

    if (argc != 2)
    {
        std::cout << "Please pass filename with full path \n";
        return -1;
    }

    int end_pos = 0, start_pos = 0;
    long length;
    char* buffer;
    char *filePath = argv[1];
    std::ifstream is(filePath, std::ifstream::binary);  

    while (1)
    {
        if (is) {

            is.seekg(0, is.end);
            end_pos = is.tellg(); //always update end pointer to end of the file  
            is.seekg(start_pos, is.beg); // move read pointer to the new start position 
            // allocate memory:
            length = end_pos - start_pos;
            buffer = new char[length];

            // read data as a block: (end_pos - start_pos) blocks form read pointer 
            is.read(buffer, length);    
            is.close();    
            // print content:
            std::cout.write(buffer, length);    
            delete[] buffer;
            start_pos = end_pos; // update start pointer    
        }

        //wait and restart with new data 
        sleep(1);
        is.open(filePath, std::ifstream::binary);    
    }    
    return 0;
} 
```

`

# mysql - PDO - 如何在用户名=：user_id、绑定值的地方更新名字

> ID：12535382
> 
> 赞同：0
> 
> 时间：2012-09-21T17:33:21.607
> 
> 标签：mysql, database, pdo, sqlbindparameter

我正在尝试运行此查询，但是，我不断收到错误“致命错误：未捕获的异常 'PDOException' 并带有消息'SQLSTATE [42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；请查看手册对应于您的 MySQL 服务器版本，以便在 /home/a7668955/public_html/uploadproc1.php:106 中的第 1 行的 ')' 附近使用正确的语法堆栈跟踪：#0 /home/a7668955/public_html/uploadproc1.php( 106): PDOStatement->execute() #1 {main} 在 /home/a7668955/public_html/uploadproc1.php 第 106 行抛出

我确定这与我编写 SQL 语句的方式有关，我不确定当 user_id 使用两次时如何绑定值？

```
 $sql1 = "UPDATE people SET firstname = (SELECT firstname FROM user WHERE username=:user_id) WHERE username=:user_id)";
                            $q = $conn->prepare($sql1) or die("failed!");
                            $q->bindParam(':user_id', $user_id, PDO::PARAM_STR);
                            $q->execute(); 
```

谢谢你的帮助！（此查询使用旧的 mysql_* 成功运行）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:44:15.500

试试这个：

```
 $sql1 = "UPDATE people SET firstname = (SELECT firstname FROM user WHERE username=:user_id) WHERE username=:user_id";
                            $q = $conn->prepare($sql1) or die("failed!");
                            $q->bindParam(':user_id', $user_id, PDO::PARAM_STR);
                            $q->execute(); 
```

最后你有一个额外`)`的人没有匹配。错误信息是正确的。

# javascript - style.top 和 style.left 不工作

> ID：12535383
> 
> 赞同：6
> 
> 时间：2012-09-21T17:33:23.947
> 
> 标签：javascript, css

我写了一个脚本，当按下按钮时，formatdialog div 会调整大小。问题是我无法弄清楚为什么我的 javascript 代码不起作用。我可以调整宽度和高度，但无论出于何种原因，顶部和左侧都无法调整。

对我来说可能导致问题的原因没有意义。Firebug 没有给我任何错误。javascript 只是调整宽度和高度并忽略顶部和左侧属性。我猜是css属性引起了问题，我只是不知道是什么。

CSS：

```
#formatdialog {
            display:none;
            left:25%;
            top:25%;
            width:400px;
            height:200px;
            position:absolute;
            z-index:100;
            background:white;
            padding:2px;
            font:10pt tahoma;
            border:1px solid gray
        } 
```

Javascript：

```
function FormatDialogResize(){
        var elem = document.getElementById('FormatDialog');
        elem.style.top = "10%";
        elem.style.left = "10%";            
        elem.style.width = "600px";
        elem.style.height = "500px";
    } 
```

我也试过：

```
function FormatDialogResize(){
        var elem = document.getElementById('FormatDialog');
        elem.style.top = 10+"%";
        elem.style.left = 10+"%";           
        elem.style.width = "600px";
        elem.style.height = "500px";
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-04-12T21:33:54.767

我遇到了类似的问题，发现设置 .top 直到我将元素设置为 "position: absolute" 之后才会起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T17:41:16.157

为什么你的类名缺少 classId 中元素 ID 的帕斯卡大小写

```
#formatdialog {

FormatDialog 
```

你有一个错字。

元素 id 是**formatdialog** 但您正在尝试调用**FormatDialog**

```
var elem = document.getElementById('FormatDialog'); 
```

你的代码应该是这样的：

```
<div id="formatdialog">

</div> 

var elem = document.getElementById('formatdialog');
elem.style.top = "10%";
elem.style.left = "10%";
elem.style.width = "600px";
elem.style.height = "500px";

#formatdialog 
{
    left:25%;
    top:25%;
    width:400px;
    height:200px;
    position:absolute;
    z-index:100;
    padding:2px;
    font:10pt tahoma;
    border:1px solid gray;
    background-color:orange;
}​ 
```

如果要使用 Pascal 大小写，请确保 elementId 和 class 相同

检查这个[小提琴](http://jsfiddle.net/sushanth009/RDefp/1/)

# android - 如何将单击项目的索引获取到另一个活动中？

> ID：12535385
> 
> 赞同：0
> 
> 时间：2012-09-21T17:33:27.830
> 
> 标签：android, database, listview

我有一个活动`(Contato)`，它显示了我在我的数据库中拥有的联系人的 ListView `(banco > contatos > nome, telefone (database>table>rows))`。`(OK/Alterar/Delete)`当单击联系信息时，会出现一个对话框，并在我点击 Alterar 时向我显示信息和 3 按钮，它会将我发送到另一个活动（Alterarcontato），我有 2 个编辑文本和 1 个按钮。因此，当我发送到 Alterarcontato 活动时，我仍然希望获得我单击的联系人的索引，以便我可以更改它的值（使用`db.update`）。

Contato.java 代码 ListView 显示对话框并具有它的索引。

```
 ListView user = (ListView) findViewById(R.id.lvShowContatos);
    //String = simple value ||| String[] = multiple values/columns
    String[] campos = new String[] {"nome", "telefone"};

    list = new ArrayList<String>();
    c = db.query( "contatos", campos, null, null, null, null, null);
    c.moveToFirst();
    if(c.getCount() > 0) {
        while(true) {
           list.add(c.getString(c.getColumnIndex("nome")).toString());
            if(!c.moveToNext()) break;
        }
    }

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, list);

    user.setAdapter(adapter);

    user.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            reg = position;
            c.moveToPosition(reg);
            String nome = c.getString(c.getColumnIndex("nome"));
            String telefone = c.getString(c.getColumnIndex("telefone"));
            ShowMessage(nome, telefone);
        }
    }); 
```

Alterarcontato.java 代码，具有 editTexts 和按钮，然后更改值。

```
 EditText nomeA = (EditText) findViewById(R.id.etNomeAlter);
            EditText telefoneA = (EditText) findViewById(R.id.etTelefoneAlter);

            final String nomeB = nomeA.getText().toString();
            final String telefoneB = telefoneA.getText().toString();

            String where = "id=?";
            String[] whereArgs = {"nome", "telefone"};

            ContentValues dataToInsert = new ContentValues();                          
            dataToInsert.put("nome", nomeB);
            dataToInsert.put("telefone", telefoneB);

            db.update("contatos", dataToInsert, where, whereArgs); 
```

但如 Contato.java 代码所示，我没有联系人的任何 ID，所以`String where = "id=?";`有点无效，所以我如何从 Contact.java 获取索引以显示在 Alterarcontato.java 中，所以当我放一些写在里面然后点击按钮，数据库中的值会改变吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:03:54.507

```
 setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        reg = position;
        c.moveToPosition(reg);
        String nome = c.getString(c.getColumnIndex("nome"));
        String telefone = c.getString(c.getColumnIndex("telefone"));
        ShowMessage(nome, telefone);

        /// The above method will show the dialog with contact info right..? SO from the dialog you are launching the activity to edit the info. While starting the activity you have to pass the index. Like below :

           Intent intent = new Intent(getApplicationContext(), Alterarcontato.class);
           // the index is the variable which contains the index of the selected contact in your dialog.
       intent.putExtra("key", index);
           startActivity(intent);

    <-- Alterarcontato.java -->

public class Alterarcontato extends Activity {

    private Integer mIndex;

    @Override
    public void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);
          mIndex = getIntent().getExtras().getInt("key");
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:40:51.297

你可以试试给定的链接，我希望这可以帮助你

[联系人合约 API](http://code.google.com/p/android-contacts-contract-example/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T18:46:36.987

在 Android Developers网站上查看[此描述。](http://developer.android.com/training/basics/firstapp/starting-activity.html)它提供了良好的分步说明。本质上，您必须创建一个[Intent](http://developer.android.com/reference/android/content/Intent.html)并使用 putExtra() 方法来传递数据。

**编辑**：另外，看看这个关于使用 onListItemClick() 在 ListActivity 中获取行 ID[的类似问题的答案。](https://stackoverflow.com/a/9870757/46461)

# actionscript-3 - 数据网格内的精灵

> ID：12535391
> 
> 赞同：1
> 
> 时间：2012-09-21T17:33:46.387
> 
> 标签：actionscript-3, datagrid, sprite

我在舞台上有一个 DataGrid (listDataGrid)，以 DataProvider (listDataProvider) 作为源。我希望能够将 Sprites 添加到 DataGrid 的列之一中，这将根据单击鼠标的位置而改变颜色。

我有一个单独的类来处理 CellRenderer，并添加来自静态 MovieClip 类的数据（在运行时之前存在于库中）。但是，我不知道如何为动态内容实现相同的功能。

编辑：根据 Flash 文档，CellRenderer 也可以是 Sprite 类型。因此，我环顾四周，看看是否可以创建一个 DataGridColumn 来呈现我在运行时创建的 Sprite。

我的代码如下所示：

```
import fl.data.DataProvider;
import fl.controls.DataGrid;
import fl.controls.dataGridClasses.DataGridColumn;
import flash.display.Sprite;

var newBox:Sprite = new Sprite;
newBox.graphics.beginFill(0);
newBox.graphics.drawRect(0,0,20,20);
newBox.graphics.endFill();

var dp:DataProvider = new DataProvider;
var _testDataGrid:DataGrid = testDataGrid;
testDataGrid.rowHeight = 20;
_testDataGrid.dataProvider = dp;
var colA:DataGridColumn = new DataGridColumn("A");
var colB = new DataGridColumn ( "sprite" ) ;
colB .cellRenderer = Sprite;
colB .dataField = "sprite";
_testDataGrid.addColumn(colA);
_testDataGrid.addColumn(colB);

dp.addItem({A:"test", sprite:"newBox"}); 
```

这会导致以下错误：

```
TypeError: Error #2007: Parameter child must be non-null.
        at flash.display::DisplayObjectContainer/addChild()
        at fl.controls::DataGrid/drawList()
        at fl.controls::DataGrid/draw()
        at fl.core::UIComponent/callLaterDispatcher() 
```

不知道从哪里拿它：x

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:29:53.067

尝试这个：

```
dp.addItem({A:"test", sprite:newBox}); 
```

即没有引号

# windows - 我怎么知道挂钩的键盘 ID？

> ID：12535393
> 
> 赞同：1
> 
> 时间：2012-09-21T17:33:52.667
> 
> 标签：windows, keyboard, device

我的电脑上连接了两个键盘。我想将一个用于主键盘，另一个用于特定应用程序。例如，键盘 #1 用于 Windows，而键盘 #2*仅*在我的应用程序中使用。

是否可以？如果是，我应该使用哪种语言？我需要访问驱动程序吗？我准确地说我在Windows下运行......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T20:52:53.317

我找到了一个链接，逐步解释了如何拦截键盘键，以及如何识别发送击键的设备。

*[使用来自 C# 的原始输入来处理多个键盘](http://www.codeproject.com/Articles/17123/Using-Raw-Input-from-C-to-handle-multiple-keyboard)*

此示例使用 C# 语言。

# ios6 - 在 iOS6 上，我的 App 可以在设置中与集成 Facebook 帐户共享帐户吗？

> ID：12535395
> 
> 赞同：1
> 
> 时间：2012-09-21T17:34:01.667
> 
> 标签：ios6, single-sign-on, facebook-ios-sdk

众所周知，iOS 6 集成了 Facebook，就像 twitter 一样。我们可以在设置中登录Facebook，然后直接发布照片。我按照[https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)创建我的应用程序以使用 Facebook SDK 3.0.8 进行测试。在 iOS6 设置上登录 Facebook 后，当我打开我的测试应用程序并登录 Facebook 时，它仍然要求我输入我的帐户/密码。

所以我的问题是：我的应用程序可以与 iOS6 集成 Facebook 帐户共享帐户吗？

我的意思是：我在设置中登录 Facebook 后，打开我的应用程序并登录 Facebook 时是否不需要再次输入名称/密码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T20:10:17.730

FacebookSDK（版本 3.1）现在支持 iOS 6 中的 Facebook 集成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T17:54:59.180

在[https://developers.facebook.com/ios/中说“我们将在](https://developers.facebook.com/ios/)**未来几周内**添加对备受期待的 iOS 6 集成到 SDK 的支持。”。所以与 ACAccountStore 的集成还没有实现。这就是您的应用再次询问信息的原因。

如果您想连接 iPhone 设置中存储的信息，您必须使用 iOS 6 中的 Accounts.framework 和 Social.framework 而不是 Facebook SDK

# java - JavaFX：隐藏 SplitPane 的滑块/分隔线

> ID：12535397
> 
> 赞同：12
> 
> 时间：2012-09-21T17:34:12.943
> 
> 标签：java, javafx, slider, splitpanel

我有一个带有`SplitPane`. 我想隐藏`SplitPane`. 我怎样才能做到这一点？

来自德国的问候（对不起我的英语）

朱利安

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-07-25T15:40:36.297

Java FX8（摩德纳风格）有点不同：

```
.split-pane *.split-pane-divider {
    -fx-padding: 0 1 0 1;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-25T15:58:26.627

在 caspian.css 中，你会看到

```
/* horizontal the two nodes are placed to the left/right of each other. */
.split-pane:horizontal > * > .split-pane-divider {
   -fx-border-color: transparent -fx-box-border transparent #BBBBBB;
   -fx-background-color: transparent, -fx-inner-border-horizontal;
   -fx-background-insets: 0, 0 1 0 1;
}

/* vertical the two nodes are placed on top of each other. */
.split-pane:vertical > * > .split-pane-divider {
   -fx-border-color:  #BBBBBB transparent -fx-box-border transparent;
   -fx-background-color: transparent, -fx-inner-border;
   -fx-background-insets: 0, 1 0 1 0;
} 
```

我使用的是垂直的，所以我在我的 css 中覆盖了垂直的，如下所示：

```
.split-pane:vertical > * > .split-pane-divider {
   -fx-border-color:  transparent;
   -fx-background-color: transparent;
   -fx-background-insets: 0;
} 
```

它有效。如果您也想隐藏抓取器（例如，我没有隐藏它，看起来不错），我认为以下规则可能会奏效：

```
.split-pane *.vertical-grabber {
    -fx-padding: 0;
    -fx-background-color: transparent;
    -fx-background-insets: 0;
    -fx-shape: " ";
} 
```

我希望它有所帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-13T05:35:06.087

这些其他答案仍然留下一个灰色的细条，所以在我的 CSS 中我添加了：

```
.split-pane-divider {
   -fx-background-color: transparent;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-16T21:42:46.650

另一个注意事项：

分隔线出现在拆分窗格的项目列表中的子项之间。如果您的拆分窗格中只有一个项目，您将看不到分隔线。如果您的拆分窗格有 3 个项目，您将看到 2 个分隔符。如果您需要摆脱分隔线，**您可能根本不需要拆分窗格中的项目**。因此，只需暂时从拆分窗格的项目列表中删除该项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-27T15:24:47.000

迟到了，但这是如何正确地做到这一点，而不是使用 CSS 解决它：

```
for (Node node : splitPane.lookupAll(".split-pane-divider")) {
    node.setVisible(false);
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-27T07:44:25.193

`SplitPane.Divider`不继承自`Node`，因此它没有`disableProperty`.

如果您需要仅从代码中调整拆分窗格的大小，则可以通过 CSS 将分隔线设置为不可见且大小接近 0。

否则使用`AnchorPane`' 嵌套到`VBox`

# sql - 编写涉及聚合函数的 SQL 查询

> ID：12535400
> 
> 赞同：-1
> 
> 时间：2012-09-21T17:34:21.093
> 
> 标签：sql, sql-server-2008

合并多个表后，我在我的数据库中创建了以下视图。A`select * from MYViEW`给出以下结果。

```
ProductID | TechID | ContactID | Priority | FIRSTNAME | MIDDLEINI | LASTNAME | 
1123         2406       1371        1        Pradeep       X          Nayak      
1123         2406       1368        2        Hello         W          World      
1123         2406       1363        3        Foo           Y          World    
1299         2279       1208        2        Some          Z          Dude 
```

我需要在下面显示 OUTPUT 结果：

```
ProductID | TechID | ContactID | Priority | FIRSTNAME | MIDDLEINI | LASTNAME | Buyers                                        |
1123         2406       1371        1        Pradeep    X           Nayak      Nayak, Pradeep X; World, Hello W; World, Foo Y  
1299       2279         1208        2        Some       Z           Dude       Dude, Some Z 
```

对于每个 Product ID 和 Tech ID 都有一个记录，并且所有买家必须以格式组合在一个列中`LastName, FirstName MiddleIni`，每个名称以空格分隔。我已经尝试使用[此处](http://msdn.microsoft.com/en-us/library/ms131056.aspx)的自定义聚合函数将结果组合到单个列中。如果您可以帮助我查询此问题，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T18:03:18.080

这将以您想要的方式显示数据：

```
select t1.ProductID,
  TechId,
  x.ContactID,
  x.Priority,
  FirstName,
  MiddleIni,
  LastName,
  stuff((select  '; ' + lastname + ', ' + FIRSTNAME + ' ' + MIDDLEINI
          from yourtable t2
          where t2.productid = t1.productid
        FOR XML PATH('')), 1, 1, '') 
from yourtable t1
inner join
(
  select min(priority) priority, ProductID, max(ContactID) ContactID
  from yourtable
  group by ProductID
) x
  on t1.ProductID = x.ProductID
  and t1.contactid = x.contactid 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/b1064/2)

这是获取`MIN()`优先级值 - 最高 - 然后是`MAX()`contactId

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T18:03:00.610

好的，这是一个很好的问题，我见过的最好的答案就[在这里](http://www.simple-talk.com/sql/t-sql-programming/concatenating-row-values-in-transact-sql/)。我将建议您根据`XML PATH`需要使用该选项，它看起来像这样：

```
SELECT v.ProductID, v.TechID, v.ContactID, MIN(v.Priority) AS Priority,
    STUFF ( ( SELECT '; ' + bv.LastName + ', ' bv.FirstName + ' ' + bv.MiddleIni
              FROM [MYVIEW] bv
              WHERE bv.ProductID = v.ProductID AND
                    bv.TechID = v.TechID AND
                    bv.ContactID = v.ContactID
              ORDER BY bv.LastName, bv.FirstName, bv.MiddleIni
              FOR XML PATH(''), TYPE).value('.', 'varchar(max)'), 1, 1, '') AS Buyers
FROM [MYVIEW] v
GROUP BY v.ProductID, v.TechID, v.ContactID 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-21T17:39:01.200

这样的东西会提供您正在寻找的输出吗？

```
SELECT LASTNAME + ', ' + FIRSTNAME + ' ' + MIDDLEINI
, ProductID
, TechID
, ContactID
. Priority
FROM MYVIEW
GROUP BY LASTNAME + ', ' + FIRSTNAME + ' ' + MIDDLEINI
, ProductID
, TechID
, ContactID
. Priority 
```

# javascript - Javascript 测试 ( object && object !== "null" && object !== "undefined" )

> ID：12535403
> 
> 赞同：26
> 
> 时间：2012-09-21T17:34:34.947
> 
> 标签：javascript

我似乎经常使用这个测试

```
if( object && object !== "null" && object !== "undefined" ){
    doSomething();
} 
```

我从`objects`服务调用或读取 cookie 中返回（因为不同的浏览器返回不同的值`null`、`undefined`、`"null"`或`"undefined"`）。

有没有更简单/更有效的方法来做这个检查？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-21T17:42:03.387

我认为你不能让它变得更简单，但你当然可以将该逻辑重构为一个函数：

```
function isRealValue(obj)
{
 return obj && obj !== 'null' && obj !== 'undefined';
} 
```

然后，至少你的代码变成：

```
if (isRealValue(yourObject))
{
 doSomething();
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-12-06T20:58:02.717

如果你有 jQuery，你可以使用`$.isEmptyObject()`.

```
$.isEmptyObject(null)
$.isEmptyObject(undefined)
var obj = {}
$.isEmptyObject(obj) 
```

所有这些调用都将返回 true。希望能帮助到你

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-10-26T10:50:06.683

```
if(!!object){
  doSomething();
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-21T17:46:06.503

如果`object`是真的，我们已经知道它不是`null`或`undefined`（假设字符串值是错误的）。我假设需要一个非`null`和非`undefined`测试。

如果是这样，一个简单的比较`null`or`undefined`就是比较`!= null`。

```
if( object != null ){
    doSomething();
} 
```

仅当is not或时，该`doSomething`函数才会运行。`object``null``undefined`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-21T17:38:43.400

也许像这样

```
 if (typeof object !== "undefined" || object !== null)
    // do something 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-10-11T19:00:40.817

也许是这样的：

```
var myObj = {};
var isEmptyObj = !Object.keys(myObj).length;

if(isEmptyObj) {
    // true
} else { 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-11-14T10:23:24.073

这应该没有任何问题。

```
if(object){ // checks for null and undefined
    doSomething();
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-11-28T06:15:44.790

检查对象是否为空的最佳方法是使用如下所示的实用程序函数。

**创建一个函数**

```
function isEmpty(obj) {
    for(var key in obj) {
        if(obj.hasOwnProperty(key))
            return false;
    }
    return true;
} 
```

**通过以下方式使用上述功能：-**

所以如果你有一个空对象，你可以使用上面的函数来检查它是否为空。

```
var myObj = {}; // Empty Object
if(isEmpty(myObj)) {
    // Object is empty (Would return true in this example)
} else {
    // Object is NOT empty
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-02-13T13:55:32.327

我认为您可以通过以下方式简化您的逻辑：

```
if (object != null && typeof(object) == "object") {
    doSomething();
} 
```

主要的问题是如果你只是检查`typeof(object) == "object"`，它会返回`true`if `object`is `null`since `null`'s type is `"object"`。但是，如果您首先检查 ，`object != null`则可以确定您所拥有的东西既不是`undefined`也不是`null`。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-11-18T14:48:54.103

另一种简单的方法是

```
if (eval(object)) doSomething(); 
```

您可以使用 eval 转换任何类型，包括字符串并由 javascript 执行，[这里](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/eval)是 eval 文档

# sql - 列创建后 sql server 更新上的列名无效

> ID：12535405
> 
> 赞同：26
> 
> 时间：2012-09-21T17:35:03.913
> 
> 标签：sql, sql-server, tsql, ddl

有人看到 SQL Server 的这段代码有什么问题吗？

```
IF NOT EXISTS(SELECT *
              FROM   sys.columns
              WHERE  Name = 'OPT_LOCK'
                     AND object_ID = Object_id('REP_DSGN_SEC_GRP_LNK'))
  BEGIN
      ALTER TABLE REP_DSGN_SEC_GRP_LNK
        ADD OPT_LOCK NUMERIC(10, 0)

      UPDATE REP_DSGN_SEC_GRP_LNK
      SET    OPT_LOCK = 0

      ALTER TABLE REP_DSGN_SEC_GRP_LNK
        ALTER COLUMN OPT_LOCK NUMERIC(10, 0) NOT NULL
  END; 
```

当我运行它时，我得到：

> 消息 207，级别 16，状态 1，第 3 行
> 无效的列名称“OPT_LOCK”。

在更新命令上。

谢谢。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-09-21T17:40:22.123

[在这种情况下，您可以按照我在此处的回答](https://stackoverflow.com/a/12472606/73226)`NOT NULL`添加列并在一个语句中设置现有行的值来避免该问题。

更一般地说，问题是解析/编译问题。SQL Server 在执行任何语句之前尝试编译批处理中的所有语句。

当一个语句引用一个根本不存在的表时，该语句将被延迟编译。当表已经存在时，如果您引用不存在的列，则会引发错误。解决此问题的最佳方法是在与 DML 不同的批次中执行 DDL。

如果语句同时引用现有表和不存在表中的不存在列，则在延迟编译之前可能会或可能不会抛出错误。

您可以分批提交它（例如，通过使用客户端工具中的批处理分隔符）或在使用or`GO`单独编译的子范围中执行它。`EXEC``EXEC sp_executesql`

第一种方法需要您将代码重构为`IF ...`不能跨批次。

```
IF NOT EXISTS(SELECT *
              FROM   sys.columns
              WHERE  Name = 'OPT_LOCK'
                     AND object_ID = Object_id('REP_DSGN_SEC_GRP_LNK'))
  BEGIN
      ALTER TABLE REP_DSGN_SEC_GRP_LNK
        ADD OPT_LOCK NUMERIC(10, 0)

      EXEC('UPDATE REP_DSGN_SEC_GRP_LNK SET OPT_LOCK = 0');

      ALTER TABLE REP_DSGN_SEC_GRP_LNK
        ALTER COLUMN OPT_LOCK NUMERIC(10, 0) NOT NULL
  END; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-02-20T20:42:22.880

错误的根本原因是在重新启动 SQL Server Management Studio 之前，新添加的列名不会反映在 sys.syscolumns 和 sys.columns 表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T19:12:42.600

为了您的信息，您可以将 替换`IF NOT EXISTS`为`COL_LENGTH`函数。它需要两个参数，

1.  表名和

2.  您正在搜索的列

如果找到 Column，则返回列 Ex: Int（4 字节）的数据类型范围，如果未找到，则返回 a `NULL`。

因此，您可以按如下方式使用它，并将 3 个语句合并为一个。

```
IF (SELECT COL_LENGTH('REP_DSGN_SEC_GRP_LNK','OPT_LOCK')) IS NULL

BEGIN

    ALTER TABLE REP_DSGN_SEC_GRP_LNK
    ADD OPT_LOCK NUMERIC(10, 0) NOT NULL DEFAULT 0

END; 
```

使它更简单。

# perl - Perl 如何从数组的哈希中检索数组？

> ID：12535408
> 
> 赞同：19
> 
> 时间：2012-09-21T17:35:19.753
> 
> 标签：perl

我对 Perl 还很陌生，所以如果这似乎是一个简单的问题，请原谅我......

无论如何，我有一个数组散列，我试图检索散列中的一个数组，但我能得到的只是数组的标量大小。

```
%HoA = a hash of arrays
$key = some key in the hash

foreach $nextItem (@HoA{$key}) {
  do a bunch of stuff with $nextItem
} 
```

当我这样做时， $nextItem 总是只是数组的大小，并且循环只运行一次。我尝试打印以下内容：

```
@HoA{$key}
$HoA{$key}
@$HoA{$key} 
```

前两个给我标量大小，第三个给我什么......我在这里错过了什么？

更新：我想知道我的问题是否实际上是我将数组添加到哈希的方式。这就是我正在做的事情：

```
@HoA{$key} = split(/ /, $list); 
```

这会将数组粘贴在哈希中，还是将数组大小粘贴在哈希中？

更新2：我尝试了以下代码块：

```
my $key = "TEST";
my %HoA = ();
my @testarray = (1, 2, 3);
@HoA{$key} = @testarray;
print Dumper(%HoA); 
```

这是输出：

```
$VAR1 = 'TEST';
$VAR2 = 1; 
```

为什么它只粘贴数组的第一个值？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-21T17:37:52.503

尝试以这种方式引用您的数组：

```
%HoA = a hash of arrays
$key = some key in the hash

foreach $nextItem (@{$HoA{$key}}) {
  do a bunch of stuff with $nextItem
} 
```

您将数组引用设置`$HoA{$key}`为数组。

编辑：对于您的更新，我认为您会得到您想要的，如果您这样做：

```
@{$HoA{$key}} = split(/ /, $list); 
```

或者你可以做

```
push(@{$HoA{$key}}, split(/ /, $list); 
```

例如：

```
my $list = "fred joe brown sam";
my %HoA = ();
my $key = "jacob";
@{$HoA{$key} = split(/ /, $list);
foreach my $item (@{$HoA{$key}})
{
    print "Test item: $nextItem\n";
}

You will get:
Test item: fred
Test item: joe
Test item: brown
Test item: sam 
```

编辑：添加`use strict;`到程序的顶部。基本上，当您定义了哈希时，您会尝试将 HoA 用作数组。您不正确地引用了哈希的内容。要正确地做到这一点，你真的需要在and`$`之间有一个。Perl 是无类型的，如果你不这样做，它会让你逍遥法外。oreilly的[参考摘录](http://oreilly.com/catalog/advperl/excerpt/ch01.html)可能会澄清一些事情。`@``HoA``use strict;`

`my @testarray`是一个数组
`my %hash`是一个散列
`$hash{$el1} = \@array`是一个散列元素，它具有一个数组的引用值
`@{$hash{$el1}} = @array`是一个包含一个数组的散列元素

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-21T20:25:40.283

哈希中的每个条目都是对数组的**引用。**例如：

```
$my_hash{$key} 
```

是对数组的**引用**，而不是数组。`$my_hash{$key}`只是指向该数组所在的内存区域。要取消引用它，请将数组符号放在前面：

```
@{ my_hash{$key} } 
```

当我们开始谈论元素时，事情变得有点棘手：

```
${ my_hash{$key} }[0] 
```

是该数组的第一个元素。您可以想象，如果该数组由其他数组的散列组成，那么语法会变得非常晦涩。幸运的是，Perl 有一种简洁的处理方式：

```
$my_hash{$key}->[0]; 
```

这与上面完全相同，但更易于理解语法。有时，使用中间变量更容易，这样您就可以在没有所有取消引用的情况下引用事物：

```
my %hash_of_array_refs;

foreach my $key (sort keys %hash_of_array_refs) {
    my @array = @{ $hash_of_array_refs{$key} };    #Dereference
    foreach my $element (@array) {                 #Much easier to read and understand
        say "First element is $array[0]";
        say "last element is $array[$#array]";
        say "This element: $element";
    }
} 
```

不取消引用你会得到这个：

```
my %hash_of_array_refs;

foreach my $key (sort keys %hash_of_array_refs) {
    foreach my $element (@{ $hash_of_array_refs{$key} } ) {                 #Much easier to read and understand
        say "First element is " . $hash_of_array_refs->[0];
        say "last element is " . $hash_of_array_refs->[$#{ $hash_of_array_refs{key} } ]";
        say "This element: $element";
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T17:40:40.323

```
@array 
```

是你如何得到数组，所以

```
@{ $array_ref } 
```

与数组引用等效。

```
$HoA{$key} 
```

是对数组的引用，所以

```
@{ $HoA{$key} } 
```

是那个数组。

```
for my $nextItem (@{ $HoA{$key} }) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T16:29:38.407

“为什么只插入数组的第一个值？”

您需要通过在哈希前面加上反斜杠来将对数组的引用放入哈希中：

```
$HoA{$key} = \@testarray; 
```

然后，当您从取消引用的哈希中检索它时：

```
@testarray = @{ $HoA{$key} }; 
```

# task - 帐户模块任务子面板中的开始日期 = now()（详细视图）

> ID：12535409
> 
> 赞同：0
> 
> 时间：2012-09-21T17:35:22.823
> 
> 标签：task, sugarcrm, overriding

在活动子面板内的帐户详细信息视图中，创建任务（快速创建）

我需要设置 start_date = now() [我的意思是当前时间]。

我有 JavaScript 来查找当前时间，但我无法使用此代码在 start_date 字段上对其进行修补。

我得到的一个建议是覆盖快速创建任务并创建代码中包含 JS 的新字段……但我无法实现它。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T12:44:06.260

如果你只是为这个视图做这个，你可以做一个 QuickCreate 视图的子类来处理。将此添加到 custom/modules/Tasks/views/view.quickcreate.php 文件中（您可能需要创建目录和文件）

```
<?php

require_once('include/MVC/View/views/view.quickcreate.php');

class TasksViewQuickcreate extends ViewQuickcreate
{
    public function preDisplay() 
    {
        parent::preDisplay();
        if( !$this->_isDCForm && empty($this->bean->date_start)) {
            $_REQUEST['date_start'] = $GLOBALS['timedate']->now();
        }
    }    
} 
```

# json - 是否有任何好的自动化工具来记录 REST API

> ID：12535410
> 
> 赞同：0
> 
> 时间：2012-09-21T17:35:23.730
> 
> 标签：json, wcf, rest

是否有任何自动化工具可以指向我们的 WCF REST API 并让它创建文档（最好带有示例）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T21:57:55.443

你在使用 Web API 吗？如果是这样，以下链接可能会有所帮助

[http://blogs.msdn.com/b/yaohuang1/archive/2012/05/13/asp-net-web-api-introducing-iapiexplorer-apiexplorer.aspx](http://blogs.msdn.com/b/yaohuang1/archive/2012/05/13/asp-net-web-api-introducing-iapiexplorer-apiexplorer.aspx)

这是关于一般文档的内容。 [http://blog.programmableweb.com/2010/08/12/web-api-documentation-best-practices/](http://blog.programmableweb.com/2010/08/12/web-api-documentation-best-practices/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T20:42:24.277

看看 Sandcastle 项目。我们使用它来生成基于`///<summary>`我们公共 C# 成员上的标签的 MSDN 或 JavaDoc 样式的 Html 页面。

[http://sandcastle.codeplex.com/](http://sandcastle.codeplex.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-20T10:38:14.230

您还可以使用[Rest Assured library](https://code.google.com/p/rest-assured/)。有关示例脚本的演示，请参阅[http://artoftesting.com/automationTesting/restAPIAutomationGetRequest.html](http://artoftesting.com/automationTesting/restAPIAutomationGetRequest.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-29T19:06:31.257

试试[招摇](http://swagger.io)。

也许是目前最好的**开源**解决方案。它有许多可用于 REST API 文档等的工具。

# ios - Xcode 4.5 企业签名问题（在 Xcode 4.3.3 中工作）

> ID：12535411
> 
> 赞同：2
> 
> 时间：2012-09-21T17:35:35.163
> 
> 标签：ios, xcode, provisioning, xcode4.5

我最近将我的 MBP 上的 Xcode 更新为 4.5（第一张图片），现在当我尝试签署企业分发时，我所有的身份都在其中显示“来自 '(null)'”。我试图继续签署并分发它，但安装失败。我回到我的 iMac 以使用 Xcode 4.3.3（下图）以这种方式签署档案，它签署并安装得很好。知道如何在 4.5 中获得正确的身份吗？顺便说一句，在更新到 4.5 之前，我能够在我的 MBP 上签名和分发。

谢谢。

![Xcode 4.5](../Images/ca39fc503ab9be7501e206e84f75f6b6.png) ![Xcode 4.3.3](../Images/7fbb0851f7feb295e9cd3e3f5e122e73.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:27:58.807

如果你还没有刷新 Xcode 的自动配置配置文件，你可以试试

Xcode -> 管理器按钮 -> 设备 -> 库（配置文件）-> 右下角“刷新”

**建议#2：（编辑）**

您是否碰巧创建了一个新的 mbp 用户帐户，导致“钥匙串访问”重新生成一组单独的钥匙串？

```
Try open up "keychain access",  
  with left sidebar :
      Keychains->"Login"
      Category ->"Certificates" 
```

您是否看到与您尝试共同签名的证书相关联的私钥？即：应该有一个小三角形，点击它，它的私钥应该会出现。

如果不存在，您可以尝试从其他 Mac 重新导入私钥。祝你好运！

**建议#3：（编辑）**

上次我遇到那个（NULL）问题时，我刚刚删除了管理器中的所有配置文件并进行了“刷新”，一切都恢复了正常。

我认为我的主证书过期了，我更新/撤销了它，然后（NULL）开始出现。

无论如何，祝你好运！

# jquery - 向此函数添加回调

> ID：12535412
> 
> 赞同：0
> 
> 时间：2012-09-21T17:35:38.893
> 
> 标签：jquery, function, callback

有人介意帮我看看这个函数并解释我如何在最后一个元素完成淡入后添加和执行回调函数来帮助我。我不确定我应该如何适应它输入或重新编写代码以获得我正在寻找的结果。

代码在这里[小提琴](http://jsfiddle.net/4Pvmq/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:39:14.757

这不是一个很好的答案，但一种方法是简单地评估是否存在`next()`元素并重新调用函数或执行不同的操作：

```
function elFadeIn(elem) {
    elem.fadeIn('slow', function() {
        if ($(this).next().length) {
            elFadeIn($(this).next());
        }
        else {
            alert('finished');
        }
    });
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/4Pvmq/1/)。

还有一种更漂亮的写作方式是：

```
function elFadeIn(elem, callback) {
    elem.fadeIn('slow', function() {
        var next = $(this).next(),
            action = next.length ? elFadeIn(next) : alert('finished!');
    });
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/4Pvmq/8/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T17:43:18.997

使用回调只不过是将函数作为参数传递，并在特定时间调用该函数。作为旁注，我怀疑您想要所有`.item`元素，但`.next`不关心原始选择器。[http://jsfiddle.net/4Pvmq/6/](http://jsfiddle.net/4Pvmq/6/)

```
$(function(){
    elFadeIn('.item', function() {
        alert("done");
    });
});

function elFadeIn(selector, callback) {
    var $items = $(selector);

    // this is the function that's going to be called recursively
    (function fade(i) {
        var $elem = $items.eq(i);

        if($elem.length) {  // there is an element
            $elem.fadeIn('slow', function() {  // fade it
                fade(i + 1);
            });
        } else {  // no elements left
            callback();
        }
    })(0);  // start with first
} 
```

# android - 在 webview 已经获取文件之后调用 setDownloadListener onDownloadStart 吗？

> ID：12535414
> 
> 赞同：4
> 
> 时间：2012-09-21T17:35:41.750
> 
> 标签：android, android-webview

**WebView 是否会执行 Http Get 并下载完整的文件，然后它会调用我的 onDownloadStart() 方法并且我的代码会再次下载文件？**

在 Android 应用程序中使用的 WebView 中，我们需要处理下载 PDF 文件。我看到的行为我认为是有道理的，但这似乎很奇怪，所以我希望有人可以为我验证。

设置 WebView 后，我们调用 setDownloadListener() 并创建一个新的 DownloadListener 来处理 onDownloadStart() 方法调用。在 onDownloadStart() 方法中，我们使用 HttpURLConnection 从我们的 Web 服务器获取资源。

在网络跟踪中，我看到对同一资源执行了两个 Http Get 请求。我认为这是因为 webview 首先对资源执行 Get，然后 webview 进行自己的处理并确定它无法呈现资源。然后 webview 调用 onDownloadStart() 方法，我们再次检索资源。

[SetDownloadListener](http://developer.android.com/reference/android/webkit/WebView.html#setDownloadListener%28android.webkit.DownloadListener%29)的文档说：

> 注册渲染引擎无法处理内容时使用的接口，应改为下载。这将替换当前的处理程序。

webview 不知道它是否可以呈现资源，直到它从服务器获得响应并可以读取返回的内容类型。因此，它必须首先执行 GET 或 HEAD 来读取响应标头。因此，双重下载行为似乎是有道理的。

并且，一些后续问题：

1.  这是常见的情况吗？大多数从 web 视图中下载文件的应用程序真的会两次下载文件吗？（这似乎很昂贵，但我认为它可能正在发生）
2.  有没有办法重用第一个请求中已经下载的内容，而不是再次请求它？
3.  为什么 WebView 在第一次请求时不使用 Http HEAD 方法而不是 GET？（我想这会使每个超链接都变成一个两步过程，而且成本也会很高）
4.  有没有办法可以防止额外下载？也许使用 shouldOverrideUrlLoading() 来拦截请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-25T14:52:10.560

**最好从您的3\. 问题**的答案开始：

 **我认为 WebView 对所有资源都使用 GET 方法。并且只有在它获得此请求的第一个 http 标头之后，WebView 才会检查是否有标头告诉“下载”

（例如标题，如`Content-Disposition: Attachment; filename=example.html`）

如果不存在指向下载的标头，WebView 将在其视图中显示负载和内容。

`onDownload`如果有下载标头（即使它的值设置为“内联”），则调用它。

**回答问题 2**：

我认为在这种情况下，webview 不会加载内容的内容。目前我不知道如何重用现有请求。

**回答问题 4**

如果你超越`shouldInterceptRequest`

就像在这个例子中：[https](https://stackoverflow.com/a/29811280/2377961) : //stackoverflow.com/a/29811280/2377961 你可以改变这种行为。**

# powershell - 从函数设置全局 PowerShell 变量，其中全局变量名称是传递给函数的变量

> ID：12535419
> 
> 赞同：61
> 
> 时间：2012-09-21T17:35:56.067
> 
> 标签：powershell

我需要从一个函数中设置一个全局变量，但不太确定如何去做。

```
# Set variables
$global:var1
$global:var2
$global:var3

function foo ($a, $b, $c)
{
    # Add $a and $b and set the requested global variable to equal to it
    $c = $a + $b
} 
```

调用函数：

```
foo 1 2 $global:var3 
```

最终结果：

$global:var3 设置为 3

或者，如果我这样调用函数：

```
foo 1 2 $global:var2 
```

最终结果：

$global:var2 设置为 3

我希望这个例子有意义。传递给函数的第三个变量是要设置的变量的名称。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-09-21T18:59:31.040

您可以使用`Set-Variable`cmdlet。传递`$global:var3`会发送 的**值**，`$var3`这不是您想要的。您要发送的**名称**。

```
$global:var1 = $null

function foo ($a, $b, $varName)
{
   Set-Variable -Name $varName -Value ($a + $b) -Scope Global
}

foo 1 2 var1 
```

不过，这不是很好的编程习惯。下面会更直接，以后不太可能引入错误：

```
$global:var1 = $null

function ComputeNewValue ($a, $b)
{
   $a + $b
}

$global:var1 = ComputeNewValue 1 2 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2014-05-13T12:28:57.577

很简单：

```
$A="1"
function changeA2 () { $global:A="0"}
changeA2
$A 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2015-05-15T17:21:12.033

我在对自己的代码进行故障排除时遇到了这个问题。

所以这不起作用......

```
$myLogText = ""
function AddLog ($Message)
{
    $myLogText += ($Message)
}
AddLog ("Hello")
Write-Host $myLogText 
```

这似乎可以工作，但仅在[PowerShell ISE](https://technet.microsoft.com/en-us/library/dd315244.aspx)中：

```
$myLogText = ""
function AddLog ($Message)
{
    $global:myLogText += ($Message)
}
AddLog ("Hello")
Write-Host $myLogText 
```

这实际上在 ISE 和命令行中都有效：

```
$global:myLogText = ""
function AddLog ($Message)
{
    $global:myLogText += ($Message)
}
AddLog ("Hello")
Write-Host $global:myLogText 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-09-21T18:20:50.957

您必须将参数作为引用类型传递。

```
#First create the variables (note you have to set them to something)
$global:var1 = $null
$global:var2 = $null
$global:var3 = $null

#The type of the reference argument should be of type [REF]
function foo ($a, $b, [REF]$c)
{
    # add $a and $b and set the requested global variable to equal to it
    # Note how you modify the value.
    $c.Value = $a + $b
}

#You can then call it like this:
foo 1 2 [REF]$global:var3 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-01-09T17:44:07.293

[latkin 的回答](https://stackoverflow.com/questions/12535419/setting-a-global-powershell-variable-from-a-function-where-the-global-variable-n/12536622#12536622)中的第一个建议似乎不错，尽管我会建议下面不那么冗长的方式。

```
PS c:\temp> $global:test="one"

PS c:\temp> $test
one

PS c:\temp> function changet() {$global:test="two"}

PS c:\temp> changet

PS c:\temp> $test
two 
```

然而，他的第二个建议是关于不好的编程习惯，在像这样的简单计算中是公平的，但是如果你想从你的变量返回一个更复杂的输出怎么办？例如，如果您希望函数返回数组或对象怎么办？对我来说，这就是 PowerShell 函数似乎严重失败的地方。这意味着您别无选择，只能使用全局变量将其从函数传回。例如：

```
PS c:\temp> function changet([byte]$a,[byte]$b,[byte]$c) {$global:test=@(($a+$b),$c,($a+$c))}

PS c:\temp> changet 1 2 3

PS c:\temp> $test
3
3
4

PS C:\nb> $test[2]
4 
```

我知道这可能感觉有点题外话，但我觉得为了回答最初的问题，我们需要确定全局变量是否是不好的编程习惯，以及在更复杂的函数中是否有更好的方法。（如果有一个我会感兴趣的。）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-14T02:49:02.350

@zdan。好答案。我会像这样改进它...

我认为在 PowerShell 中最接近真实返回值的方法是使用*局部变量*来传递值，并且永远不要使用它，`return`因为它可能会被任何形式的输出情况“损坏”

```
function CheckRestart([REF]$retval)
{
    # Some logic
    $retval.Value = $true
}
[bool]$restart = $false
CheckRestart( [REF]$restart)
if ( $restart )
{
    Restart-Computer -Force
} 
```

该`$restart`变量用于函数调用的任一侧，以`CheckRestart`明确变量的范围。按照惯例，返回值可以是声明的第一个或最后一个参数。我更喜欢最后一个。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-30T11:29:51.030

对我来说它有效：

```
function changeA2 () { $global:A="0"}
changeA2
$A 
```

# ios - 应用程序购买中 restoreCompletedTransaction 的多个收据计数

> ID：12535420
> 
> 赞同：1
> 
> 时间：2012-09-21T17:35:59.277
> 
> 标签：ios, in-app-purchase, auto-renewing

我有一个可自动更新的订阅。当应用程序安装在新设备上时，Apple 会返回所有以前的购买收据，在这种情况下，由于它是沙盒，我每次安装时都会收到 6 张收据。然后观察者发送restoreCompleted 事务的队列。我有一种方法可以将交易发送到我的服务器以进行 Apple 验证，但由于有 6 张收据，它运行了 6 次。我真的只想处理最后发送的收据。

所以我试图计算队列中的事务，并且仅在计数达到 1 时验证收据。

这是我到目前为止所拥有的：

```
 - (void)paymentQueue: (SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions {
if (myQueue == nil) {
    myQueue = [SKPaymentQueue defaultQueue];
}

NSLog(@"Transactions in Array  in My Store %@", [queue transactions]); 
tCount =myQueue.transactions.count;
NSString *transCount =  [NSString stringWithFormat:@"%d",tCount];

for (SKPaymentTransaction *transaction in transactions)       

{ switch (transaction.transactionState)     

    { case SKPaymentTransactionStatePurchased:
            [self completeTransaction: transaction];
            break;

        case SKPaymentTransactionStateFailed:
            [self failedTransaction: transaction];
            break;

        case SKPaymentTransactionStateRestored:                

            if  ([transCount isEqualToString:@"1"]) {
                [self restoreTransaction: transaction];
            }

            else {
               tCount--;

                dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^(void) {
                    [[SKPaymentQueue defaultQueue] finishTransaction: transaction];
                });
            }

        default:
            break;

          }
      }
    return;        
   } 
```

恢复循环，但计数不会减少。这可能是一件简单而愚蠢的事情。有人可以告诉我如何减少这个计数吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:19:24.800

我等到 restoreCompletedTransactionsFinished 再将收据发送到我的服务器以与 Apple 进行验证。这消除了发送每张收据，几个月后可能会变得繁重。因此，无需减少事务计数。

# php - MySql插入查询在PHP页面中不起作用

> ID：12535424
> 
> 赞同：-4
> 
> 时间：2012-09-21T17:36:18.233
> 
> 标签：php, mysql, file-upload, insert

嗨，我是 PHP 和 MySql 的新手，我面临一个问题：

我有一个页面，允许用户将图像和一些详细信息（例如他们的姓名和电子邮件地址）上传到我的数据库，但**我使用的代码不起作用**。

事实上，**它不是向我的数据库添加数据，而是正在上传图像**。

我还想问**有没有什么办法可以强制用户填写所有表单字段**。

html表单如下：

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
        <div id="content"><br><div align="center">
            <form enctype="multipart/form-data" action="upload1.php" method="POST"> 
                Your Full Name: <input type="text" name="name" maxlength="40"><br> 
                Your Image Please: <input type="file" name="photo"><br>
                <input type="submit" value="Upload!"> 
            </form>
        </div>
    </body>
</html> 
```

这是代码`upload1.php`：

```
<?php 

    // random 4 digit  to add to our file name 

    // some people use date and time in stead of random digit 

    $random_digit=rand(00000000000000,99999999999999);

    //combine random digit to you file name to create new file name

    //use dot (.) to combile these two variables

    $new_file_name=$random_digit.$file_name;

    //This is the directory where images will be saved 
    $target = "g/".$new_file_name; 
    $target = $target . basename( $_FILES['photo']['name']); 

    //This is our size condition 
    if ($photo_size > 350000) 
    { 
        echo "Your file is too large.<br>"; 
        $ok=0; 
    } 

    if (!($uploaded_type=="image/gif")) {
        $ok=0;
    } 
    if (!($uploaded_type=="image/jpg")) {
        $ok=0;
    } 
    if (!($uploaded_type=="image/png")) {
        $ok=0;
    } 
    if (!($uploaded_type=="image/bmp")) {
        $ok=0;
    } 
    if (!($uploaded_type=="image/jpeg")) {
        $ok=0;
    } 

    if ($ok=0) 
    { 
        Echo "Sorry your file was not uploaded"; 
    } 

    else 
    { 

        //This gets all the other information from the form 
        $name=$_POST['name'];
        $email=$_POST['email'];
        $pic=($_FILES['photo']['name']); 
        $banner="/$target";
        $url="xxxxxxxxxx";
        $clicks='0';

        // Connects to your Database 
        mysql_connect("xxxxxxxxxxx", "xxxxxxxxxxx", "xxxxxxxxx") or die(mysql_error()) ; 
        mysql_select_db("xxxxxxx") or die(mysql_error()) ;

        //Writes the information to the database 
        mysql_query("INSERT INTO girls (name, banner, clicks, url, email) VALUES ('{$name}','{$banner}','{$clicks}','{$url}','{$email}') "); 

        //Writes the photo to the server 
        if(move_uploaded_file($_FILES['photo']['tmp_name'], $target)) 
        { 

            //Tells you if its all ok 
            echo " The file has been uploaded and renamed to '$target' your information has also been added to the database.<br>To view your image online visit www.facesnap.tk/$target ";
        } 
        else { 

            //Gives and error if its not 
            echo "Sorry, there was a problem in your upload. Be sure that you follow instructions."; 
        } 
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:46:03.220

您必须仅将 '' 放入 varchars 而不是 int 值中，如果 '{$clicks}' 是数据库中的 int，请尝试删除 ''。

现在要使字段成为必填项，请在您的 upload1.php 脚本中执行此操作：

```
 session_start();

    //connect to db

    $errors = array();

    //validate name
    if (!isset($_POST['name']) || empty($_POST['name'])) {
        $errors[] = 'Your name is required.';
    }
    else {
       $name = mysql_real_escape_string(trim($_POST['name']));
    }

    //validate email
    if (!isset($_POST['email']) || empty($_POST['email'])) {
        $errors[] = 'Your email is required.';
    }
    else {
       $email = mysql_real_escape_string(trim($_POST['email']));
       $regex = '/^[_a-zA-Z0-9-]+(\.[_a-zA-Z0-9-]+)*@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*(\.[a-zA-Z]{2,4})$/';

       //change the 128 to your email field length in your db
       if (preg_match($regex, $email) && strlen($email) <= 128) {
           $email = strtolower($email);
       }
       else {
           $errors[] = 'Your email is not valid.';
       }
    }

    //validate the file upload
    if (!isset($_FILES['photo']) || empty($_FILES['photo'])) {
         $errors[] = 'Your photo is required.';
    }
    else if ($_FILES['logo']['name'] == '') {
         $errors[] = 'Your photo is required.';
    }
    else if (!file_exists($_FILES['photo']['tmp_name']) || !is_uploaded_file($_FILES['photo']['tmp_name'])) {
         $errors[] = 'The file could not be uploaded, please try again later.';
    }
    else {
        //validate the extention with your function is_img_ext()
        if (is_img_ext($_FILES['photo']['name'])) {
            $errors[] = 'The file you uploaded is not an image.';
        }
        //validate image size
        if ($_FILES['photo']['size'] > 350000) {
            $errors[] = 'The image you uploaded is too large.';
        }

        //if no errors and the file not exist move it to the target dir
        if (empty($errors)) {

             //generate a new filename for the image
             $random_digit=rand(00000000000000,99999999999999);
             $new_file_name = $random_digit.$file_name;
             $target = "g/".$new_file_name; 
             $target = $target . basename( $_FILES['photo']['name']);

            if (move_uploaded_file($_FILES['photo']['tmp_name'], $target)) { 

            echo " The file has been uploaded and renamed to '$target' your information has also been added to the database.<br>To view your image online visit www.facesnap.tk/$target ";
            } 
            else { 

            echo "Sorry, there was a problem in your upload. Be sure that you follow instructions."; 
            } 

        }
    }

    if(!empty($errors)) {
        $_SESSION['form_error'] = $errors;
        header('Location: your_form.php');
    die();
    }

    //your rest script
    .....

    function is_img_ext($filename) {
        $ext = explode('.', $filename);
        $ext = strtolower(end($ext));

        if ($ext == jpeg || $ext == jpg || $ext == png || $ext == gif || $ext == bmp) {
            return true;
        }
        else {
            return false;
        }
    } 
```

现在在 your_form.php 中：

```
 session_start();
    if (isset($_SESSION['form_error'])) {
        $errors = $_SESSION['form_error'];
        unset($_SESSION['form_error']);
    }
    echo '<ul>';
    foreach($errors as $error) {
        echo '<li>' . $error . '</li>';
    }
    echo '</ul>';
    //your form here 
```

# jquery - 嵌入/ jquery-preview for rails

> ID：12535425
> 
> 赞同：0
> 
> 时间：2012-09-21T17:36:25.727
> 
> 标签：jquery, ruby-on-rails, embed

我正在尝试从嵌入回调中提取特定变量。现在表单可以工作，并生成预览。但是，不能调用任何单个变量。

在我看来，这是我原来的嵌入代码：

```
<div class="container">
   <div class="row">
      <div class="span10 columns offset3">
          <h3>Share a link</h3>
          <form id="preview_form" class="form-vertical" method="post" action=".">
            <fieldset>
            <div class="clearfix">
                <label for="url">URL</label>
                <input type="text" class="input-xxlarge" name="url" id="id_url" />
                <span class="help-block">Enter a url.</span>
            </div>
            </fieldset>
            <!-- Placeholder that tells Preview where to put the loading icon-->
            <div class="loading">
              <img src='http://embedly.github.com/jquery-preview/images/loading-rectangle.gif'>
            </div>
            <!-- Placeholder that tells Preview where to put the selector-->
            <div class="selector"></div>

            <div class="actions">
              <input id="id_submit" type="submit" class="btn btn-primary" value="Post"/>
            </div>

          </form>
        </div>
      </div>
      <div class="row">
        <div id="feed" class="span10 columns offset3">

        </div>
      </div>
      <div class="clear"></div>
</div>
<script>
      var preview = {
        submit : function(e, data){
          e.preventDefault();
          this.display.create(data);
        }
      }
      $('#id_url').preview({key:'my_key',
                            preview:preview,
                            selector : {type:'rich'},
                            maxwidth : 500,
                            display : {display : 'rich'}});
</script> 
```

它工作得很好。但是，我想将各个变量放入模板（下面是模板）。关于如何执行此操作或拉入视图的任何建议？现在 {{title}} 显示为 {{title}} 而不是实际的标题，以及所有其他变量。

```
<div id="selector" class="small">
   <div class="thumbnail">
      <div class="controls">
          <a class="left" href="#">&#9664;</a>
          <a class="right" href="#">&#9654;</a>
          <a class="nothumb" href="#">&#10005;</a>
      </div>
      <div class="items">
          <ul class="images">
            {{#images}}
            <li><img src="{{url}}"/></li>
            {{/images}}
          </ul>
      </div>
    </div>
      <div class="attributes">
        <a class="title" href="#">{{title}}</a>
        <p><a class="description" href="#">{{description}}</a></p>
        <span class="meta">
          <img class="favicon" src="{{favicon_url}}">
          <a class="provider" href="{{provider_url}}">{{provider_display}}</a>
        </span>
      </div>
      <div class="action"><a href="#" class="close">&#10005;</a></div>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:36:49.807

```
 $('#id_url').preview({key:'my_key',
                        preview:preview,
                        selector : {type:'rich'},
                        maxwidth : 500,
                        display : {display : 'rich'}}
                        success : function(oembed){
                                  oembed.title // gives you title
                                  oembed.description // gives you description 
                                  }); 
```

您可以使用它们并按照您想要的方式设置它们的样式。但这将覆盖默认的嵌入样式。

# java - 静态对象存储在java中的位置

> ID：12535432
> 
> 赞同：5
> 
> 时间：2012-09-21T17:37:11.653
> 
> 标签：java, oop

我正在读一本书“Thinking in Java”，它说对象存储在堆上，静态变量存储在某个固定位置，比如静态存储，这样它们就可以在程序运行的整个过程中使用。

```
class Myclass{

static int x =0;        //stored on static storage
Myclass obj = new Myclass(); //stored on heap

} 
```

尽管制作了一个对象，但就 OOPS 而言，静态并不是一个好主意。暂时把这个放在一边。我的问题是

1.  声明为静态的对象存储在哪里。
2.  在这种情况下，JVM 如何进行实例化。
    `class Myclass { static Myclass obj = new Myclass(); //no man's land }`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T17:42:14.023

所有静态内容将在**类加载/启动**时创建 并存储在特殊位置（很可能是 perm gen 的一部分，根据实现而有所不同）。

第二个例子，当你`Myclass`被加载时，它的静态内容将被创建/实例化。

本[教程](http://javarevisited.blogspot.com/2011/04/garbage-collection-in-java.html)可能会为您提供高级别的概述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T17:52:54.943

静态是程序的特殊内存位置。所以程序可以很容易地访问它。只有一个这样的位置可供程序运行。它是创建静态内容的地方。JVM 在堆上实例化对象。但是，如果您对对象进行静态引用，那么它将放置在静态内存位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T18:07:18.730

静态变量存储在**方法**区。
方法区**是非堆内存**的一部分。它存储每个类的结构、方法和构造函数的代码。每类结构意味着运行时常量和**静态字段**。
![堆内存、非堆内存和方法区是内存和 JVM 的主要术语。](../Images/fb74c47c50f2b6dc4ae935eac1ff97eb.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-25T14:26:08.890

这取决于JVM的实现。在您的示例中，变量被初始化为原始值，因此它将存储在元空间（本机内存，堆外）中。如果您使用对象对其进行初始化，则`new ObjectClassSmthng()`该对象将存储在堆中，而`x`变量（这是一个引用）将存储在元空间中。

HotSpot JDK 8 也是如此。

# c++ - 使用 Sublime Text 2 构建 C++ 代码时的 g++ 致命错误

> ID：12535434
> 
> 赞同：0
> 
> 时间：2012-09-21T17:37:24.023
> 
> 标签：c++, sublimetext2

我是 Sublime Text 2 的新手，正在尝试让它构建和运行一个简单的 C++ 程序，但我遇到了一些错误。

我安装了 MinGW C++ 编译器并设置了路径，但是，当我尝试构建它时仍然出现错误：

> g++：错误：：没有这样的文件或目录
> 
> g++：致命错误：没有输入文件

我不确定我应该怎么做才能纠正这个问题，信息会非常有帮助！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:39:03.313

你的 .sublime-build 文件是什么样的？

我用这个，它工作得很好。

```
{
    "cmd": ["g++", "-Wall","-time","-g", "-std=c++11", "${file}", "-o", "${file_path}/${file_base_name}"],
    "file_regex": "^(..[^:]*):([0-9]+):?([0-9]+)?:? (.*)$",
    "working_dir": "${file_path}",
    "selector": "source.c, source.c++",

    "variants":
    [
        {
            "name": "Run",
            "cmd": ["${file_path}/${file_base_name}"]
        }
    ]
} 
```

# javascript - Twitter Bootstrap 下拉菜单不起作用

> ID：12535438
> 
> 赞同：8
> 
> 时间：2012-09-21T17:37:27.853
> 
> 标签：javascript, twitter-bootstrap

任何想法为什么这个 Twitter Bootstrap 下拉菜单不起作用？

头部的Javascript：

```
<script src="/assets/js/bootstrap.js" type="text/javascript"></script> 
```

菜单 HTML：

```
 <li class="dropdown">
                <a data-target="#" data-toggle="dropdown" class="dropdown-toggle" href="#">Dropdown menu here...
                  <b class="caret"></b>
                </a>
                <ul class="dropdown-menu">
                  <li><a href="/app/1">Item A</a></li>
                  <li><a href="/app/2">Item B</a></li>
                  <li><a href="/app/3">Item C</a></li>
                </ul>
              </li> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T17:46:18.307

将下拉类放在包装`li`而不是`li`本身的 div 上。像这样...

```
 <div class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Dropdown trigger</a>
        <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
         ...
        </ul>
        </div> 
```

该示例来自[引导站点](http://twitter.github.com/bootstrap/javascript.html#dropdowns)

您的代码应如下所示...

```
 <!DOCTYPE html >
    <head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <script type="text/javascript" src="../plugins/js/bootstrap-dropdown.js"></script>
    <link href="../theme/bootstrap.css" rel=stylesheet type="text/css">

    </head>
    <div class="dropdown">
        <ul class="dropdown">
        <a data-target="#" data-toggle="dropdown" class="dropdown-toggle" href="#">Dropdown menu here...
          <b class="caret"></b>
        </a>
            <ul class="dropdown-menu">
              <li><a href="/app/1">Item A</a></li>
              <li><a href="/app/2">Item B</a></li>
              <li><a href="/app/3">Item C</a></li>
            </ul>
        </ul>
    </div> 
```

我尝试制作一个嵌套列表，但它不适用于引导程序。我认为这会使两个下拉菜单混淆。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-17T14:15:34.660

这很容易解决。包装代码的元素是 li，但它必须是 div。这对我有用：

```
<div class="dropdown">
  <a data-target="#" data-toggle="dropdown" class="dropdown-toggle" href="#">Dropdown menu here...
    <b class="caret"></b>
  </a>
  <ul class="dropdown-menu">
    <li><a href="/app/1">Item A</a></li>
    <li><a href="/app/2">Item B</a></li>
    <li><a href="/app/3">Item C</a></li>
  </ul>
</div> 
```

![在此处输入图像描述](../Images/83f9f84c3b53640b6e37ab135d72cfe9.png)

如果你想让它看起来像一个按钮，只需将“btn”添加到类列表中，如下所示：

`<a data-target="#" data-toggle="dropdown" class="dropdown-toggle btn" href="#">`

我的标题部分如下所示：

```
<link rel='stylesheet' type='text/css' href='css/bootstrap.min.css'>
<link rel='stylesheet' type='text/css' href='css/bootstrap-responsive.min.css'>
<script src='js/jquery-2.0.0.min.js' type='text/javascript'>
<script src='js/bootstrap.min.js' type='text/javascript'> 
```

如果您没有为移动设备做任何事情，您可能想要省略响应式 css。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-11T13:04:17.707

确保您使用的是最新版本的 JQuery

# android - 加载 AlerDialogBox 时的进度条

> ID：12535444
> 
> 赞同：0
> 
> 时间：2012-09-21T17:38:03.990
> 
> 标签：android

我有一个按钮，在女巫我做一些计算时显示一个 AlertDialog，这需要一些时间，我想在计算时显示一个进度条。这是我到目前为止所拥有的，但它并没有像我想要的那样工作。对话框显示，但在 AlertDialog 完成计算之前感到绝望

这是代码

```
public void OnClick(View v) {

    try {

        new DownloadingProgressTask().execute();

    } catch (Exception e) {

        Log.v("Exception", e.toString());
    }

}
    private class DownloadingProgressTask extends
        AsyncTask<String, Void, Boolean> {

    private ProgressDialog dialog = new ProgressDialog(Calculations.this);

    /** progress dialog to show user that the backup is processing. */

    /** application context. */

    protected void onPreExecute() {
        this.dialog.setMessage("Please wait");
        this.dialog.show();

    }

    @SuppressWarnings("deprecation")
    protected Boolean doInBackground(final String... args) {
        try {

            LayoutInflater layoutInflater = (LayoutInflater) getApplicationContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            inflatedview = layoutInflater.inflate(R.layout.calculationhelp, null);

            final TextView result = (TextView) inflatedview.findViewById(R.id.textViewresult);
            titleAlerDialog = (TextView) inflatedview.findViewById(R.id.textViewTitle);
            messageAlerDialog = (TextView) inflatedview.findViewById(R.id.textViewMsg);

            separated = help.toString().split("#");

            Resources r = getResources();
            Bundle extras = getIntent().getExtras();
            if (extras != null) {

                        tableResults = r.getStringArray(R.array.Calculo1Results1);
                        result.setText(r.getString(R.string.calculo1results1));
            }

            titleAlerDialog.setText(separated[0]);

            messageAlerDialog.setText(separated[1].toString());

            /* Find Tablelayout defined in main.xml */
            TableLayout tl = (TableLayout) inflatedview.findViewById(R.id.myTableLayout);
            tl.setColumnStretchable(0, true);
            tl.setColumnStretchable(1, true);
            tl.setColumnStretchable(2, true);

            for (int i = 0; i < tableResults.length; i++) {
                /* Create a new row to be added. */
                TableRow tr = new TableRow(Calculations.this);
                tr.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

                /* Create a cell1 to be the row-content. */
                TextView cell1 = new TextView(Calculations.this);
                TextView cell2 = new TextView(Calculations.this);
                TextView cell3 = new TextView(Calculations.this);

                String[] cells = tableResults[i].toString().split("@");

                cell1.setWidth(130);
                cell1.setGravity(Gravity.CENTER_VERTICAL
                        | Gravity.CENTER_HORIZONTAL);
                cell1.setText(cells[0].toString());
                cell1.setBackgroundResource(R.drawable.celda_cuerpo);
                cell1.setLayoutParams(new LayoutParams(
                        LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

                cell2.setWidth(130);
                cell2.setGravity(Gravity.CENTER_VERTICAL
                        | Gravity.CENTER_HORIZONTAL);
                cell2.setText(cells[1].toString());
                cell2.setBackgroundResource(R.drawable.celda_cuerpo);
                cell2.setLayoutParams(new LayoutParams(
                        LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

                cell3.setWidth(130);
                cell3.setGravity(Gravity.CENTER_VERTICAL
                        | Gravity.CENTER_HORIZONTAL);
                cell3.setText(cells[2].toString());
                cell3.setBackgroundResource(R.drawable.celda_cuerpo);
                cell3.setLayoutParams(new LayoutParams(
                        LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

                /* Add cell1 to row. */
                tr.addView(cell1);
                tr.addView(cell2);
                tr.addView(cell3);

                /* Add row to TableLayout. */
                tl.addView(tr, new TableLayout.LayoutParams(
                        LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));

            }
            //dialog.dismiss();
            return true;
        } catch (Exception e) {
            Log.e("tag", "error", e);
            return false;
        }
    }

@Override
protected void onPostExecute(final Boolean success) {

if (dialog.isShowing()) {
    dialog.dismiss();
}

if (success) {
    AlertDialog.Builder dialog1 = new AlertDialog.Builder(Calculations.this);
    dialog1.setNegativeButton("Close",
            new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface arg0, int arg1) {

                }
            });

    dialog1.setView(inflatedview);
    final AlertDialog alert = dialog1.create();
    alert.requestWindowFeature(Window.FEATURE_NO_TITLE);

    alert.show();

    ((Button) alert.findViewById(android.R.id.button2))
            .setBackgroundResource(R.drawable.custom_button_red);
    ((Button) alert.findViewById(android.R.id.button2))
            .setTextColor(Color.WHITE);

} else {
    Toast.makeText(Calculations.this, "Error", Toast.LENGTH_LONG)
            .show();
}
}

} 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:58:22.020

尝试使用以下内容。我已经向你的 AsyncTask 添加了一个构造函数，它接受一个上下文，并在整个过程中使用它来创建你的视图等。我还将第二个警报对话框的创建移到 doInBackground() 中，只留下了显示它的代码onPostExecute()。它应该加快速度。

```
public void OnClick(View v) {

    try {

        new DownloadingProgressTask(getBaseContext()).execute();

    } catch (Exception e) {

        Log.v("Exception", e.toString());
    }

}

private class DownloadingProgressTask extends AsyncTask<String, Void, Boolean> {

    Context mContext;

    public DownloadingProgressTask(Context c) {
        mContext = c;
    }

    private ProgressDialog dialog = new ProgressDialog(mContext);

    final AlertDialog alert;
    /** progress dialog to show user that the backup is processing. */

    /** application context. */

    protected void onPreExecute() {
        this.dialog.setMessage("Please wait");
        this.dialog.show();

    }

    @SuppressWarnings("deprecation")
    protected Boolean doInBackground(final String... args) {
        try {

            LayoutInflater layoutInflater = (LayoutInflater) getApplicationContext().getSystemService(
                    Context.LAYOUT_INFLATER_SERVICE);
            inflatedview = layoutInflater.inflate(R.layout.calculationhelp, null);

            final TextView result = (TextView) inflatedview.findViewById(R.id.textViewresult);
            titleAlerDialog = (TextView) inflatedview.findViewById(R.id.textViewTitle);
            messageAlerDialog = (TextView) inflatedview.findViewById(R.id.textViewMsg);

            separated = help.toString().split("#");

            Resources r = getResources();
            Bundle extras = getIntent().getExtras();
            if (extras != null) {

                tableResults = r.getStringArray(R.array.Calculo1Results1);
                result.setText(r.getString(R.string.calculo1results1));
            }

            titleAlerDialog.setText(separated[0]);

            messageAlerDialog.setText(separated[1].toString());

            /* Find Tablelayout defined in main.xml */
            TableLayout tl = (TableLayout) inflatedview.findViewById(R.id.myTableLayout);
            tl.setColumnStretchable(0, true);
            tl.setColumnStretchable(1, true);
            tl.setColumnStretchable(2, true);

            for (int i = 0; i < tableResults.length; i++) {
                /* Create a new row to be added. */
                TableRow tr = new TableRow(mContext);
                tr.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

                /* Create a cell1 to be the row-content. */
                TextView cell1 = new TextView(mContext);
                TextView cell2 = new TextView(mContext);
                TextView cell3 = new TextView(mContext);

                String[] cells = tableResults[i].toString().split("@");

                cell1.setWidth(130);
                cell1.setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER_HORIZONTAL);
                cell1.setText(cells[0].toString());
                cell1.setBackgroundResource(R.drawable.celda_cuerpo);
                cell1.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

                cell2.setWidth(130);
                cell2.setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER_HORIZONTAL);
                cell2.setText(cells[1].toString());
                cell2.setBackgroundResource(R.drawable.celda_cuerpo);
                cell2.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

                cell3.setWidth(130);
                cell3.setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER_HORIZONTAL);
                cell3.setText(cells[2].toString());
                cell3.setBackgroundResource(R.drawable.celda_cuerpo);
                cell3.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

                /* Add cell1 to row. */
                tr.addView(cell1);
                tr.addView(cell2);
                tr.addView(cell3);

                /* Add row to TableLayout. */
                tl.addView(tr, new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));

                AlertDialog.Builder dialog1 = new AlertDialog.Builder(mContext);
                dialog1.setNegativeButton("Close", new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface arg0, int arg1) {

                    }
                });

                dialog1.setView(inflatedview);
                alert = dialog1.create();
                alert.requestWindowFeature(Window.FEATURE_NO_TITLE);
            }
            // dialog.dismiss();
            return true;
        } catch (Exception e) {
            Log.e("tag", "error", e);
            return false;
        }
    }

    @Override
    protected void onPostExecute(final Boolean success) {

        if (success) {
            alert.show();

            ((Button) alert.findViewById(android.R.id.button2)).setBackgroundResource(R.drawable.custom_button_red);
            ((Button) alert.findViewById(android.R.id.button2)).setTextColor(Color.WHITE);

        } else {
            Toast.makeText(mContext, "Error", Toast.LENGTH_LONG).show();
        }

        if (dialog.isShowing()) {
            dialog.dismiss();
        }

    }
} 
```

# centos - Epel-Release 所需的 rpmlib

> ID：12535456
> 
> 赞同：2
> 
> 时间：2012-09-21T17:39:15.067
> 
> 标签：centos, centos6

我目前在 Google 和其他网站上搜索过 rpmlib(fileDigest) 和 (PayloadIsXz) 有问题，包括没有运气的 SO（有效）。这基本上就是我所做的：

```
wget http://download.fedoraproject.org/pub/epel/6/i386/epel-release-6-7.noarch.rpm
rpm -ivh epel-release-6-7.noarch.rpm 
```

这就是它吐出来的：

> [root@XXX ~]# rpm -ivh epel-release-6-7.noarch.rpm
> 警告：epel-release-6-7.noarch.rpm：标头 V3 RSA/SHA256 签名：NOKEY，密钥 ID 0608b895 错误：失败依赖项： rpmlib(FileDigests) <= 4.6.0-1 需要 epel-release-6-7.noarch rpmlib(PayloadIsXz) <= 5.2-1 需要 epel-release-6-7.noarch

我在谷歌上搜索了这两个，但没有太大帮助。

注意：`uname -m`如果有任何帮助，请给出“i686”。以及我运行 CentOS 6.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T17:54:11.893

我知道这可能看起来非常愚蠢，但请尝试：

```
yum upgrade 
```

并再次运行安装

而不是使用 rpm，而是尝试 yum：

```
yum localinstall /path/to/your/rpm/epel-release-6-7.noarch.rpm 
```

Yum 将尝试自动解决依赖关系，而 rpm 不会。不是 100% 肯定会解决它，但绝对可以尝试 :)

# .net - 通过 http 返回 https 链接/内容

> ID：12535461
> 
> 赞同：0
> 
> 时间：2012-09-21T17:39:28.390
> 
> 标签：.net, http, https

我有一个 .net API，客户使用它来获取我们根据他们的请求构建的 HTML 模板，然后将其发回给他们，以便他们可以在他们的页面上绘制它。

我想知道的只是 API 特定行为的最佳实践案例。它的设置使得我们为模板中的所有链接和图像/资产输入的协议与传入请求的协议相匹配，以避免在通过 https 请求/页面发送 http 内容时出现那些令人讨厌的混合内容安全消息。

我被告知我应该将我们交付的内容更改为始终使用 https 协议，即使通过 http 请求调用也是如此。我已经在这里查看了很多其他问题，比如[这里](https://stackoverflow.com/questions/8042347/having-http-links-on-https-page-but-not-scripts-or-css)的这个，但它们都与我正在做的事情相反。

所以我的问题是，除了仅使用 https 的性能差异之外，我是否有理由不强制所有内容都为 https，即使来自 http 位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:25:58.433

不支持 https 或不信任您的证书的客户端。
我怀疑两者都会发生，但你问了一个原因。

就我个人而言，我认为使用与请求相同的协议进行响应是有礼貌的。
如果数据是敏感的，那么我认为您不会全部尊重 HTTP。

# java - 使用spring + JPA处理乐观锁定中的LockModeType

> ID：12535463
> 
> 赞同：2
> 
> 时间：2012-09-21T17:39:50.677
> 
> 标签：java, spring, jpa, transactions

我已经搜索了stackoverflow中的帖子，我希望这不是重复的。

我第一次尝试乐观锁定，我可以使用 spring 管理的 LockModeType 来做到这一点，但无法自己定义 LockMode

以下是代码示例：

我正在使用以下方法注入持久性上下文：

```
@PersistenceContext
private EntityManager entityManager; 
```

第一种方法：使用注释事务

```
@Transactional
    public void updateUserProfile(UserProfile userProfile) {
        entityManager.lock(userProfile, LockModeType.OPTIMISTIC); // 1*
        entityManager.merge(userProfile);
    } 
```

1 处的例外情况：`java.lang.IllegalArgumentException: entity not in the persistence context`

第二种方法：管理事务

```
public void updateUserProfile(UserProfile userProfile) {
        entityManager.getTransaction().begin(); // 2*
        entityManager.lock(userProfile, LockModeType.OPTIMISTIC); 
        entityManager.merge(userProfile);
        entityManager.getTransaction().commit();
    } 
```

2 处的例外情况：`Not allowed to create transaction on shared EntityManager - use Spring transactions or EJB CMT instead`

第三种方法：由于共享 entityManager 出现异常，我还尝试从 entityManagerFactory 创建 EntityManager。

```
@Transactional
public void updateUserProfile(UserProfile userProfile) {
        EntityManager em = entityManager.getEntityManagerFactory().createEntityManager();
        em.getTransaction().begin();
        em.lock(userProfile, LockModeType.OPTIMISTIC);  // 3*
        em.merge(userProfile);
        em.getTransaction().commit();
    } 
```

3 处的例外情况：`entity not in the persistence context`

在我的应用程序上下文中，我`org.springframework.orm.jpa.JpaTransactionManager`用于定义`transactionManager`和`org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean`定义`entityManagerFactory`

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T07:51:45.393

锁定 JPA 实体的条件：

1.  您必须在事务环境中
2.  实体必须处于受管状态（即在持久性上下文中处于活动状态。

您似乎违反了 (2) - 尝试锁定分离的实体。

您可以更早地合并（）。

要点：

*   如果你修改一个实体并运行一个事务，并且你在实体中有一个版本属性，用@Version 标记，那么乐观锁定会自动在实体的粒度上执行。版本属性已更新，如果数据库中尚未更改，则写入成功。这是常见的简单锁定情况，其中对单个实体的所有写入都被序列化以避免损坏。如果可以独立处理每个实体/记录，则无需设置任何 LockMode，因为这是默认行为。仔细看看这个选项 - 我怀疑这符合您的简单要求。

*   如果您有更复杂的处理并且需要跨多个逻辑相关的实体实例执行读取或写入，作为一致的连贯原子操作，并且所有其他写入在持续时间内被阻止/隔离 - 那么您需要设置自己的锁定模式，因为自动的单个实体锁不起作用。您需要仔细设计以连贯方式读取或写入的实体集，并手动设计和实施您自己的手动锁定解决方案 - 可能会选择关系层次结构中的最顶层实体来记录所有“全局”锁定相关的“子”实体（利用其@Version 属性）。

*   任何手动锁定解决方案都需要所有数据库写入逻辑来兑现锁定。这意味着在相同实体上运行的其他事务必须了解您的锁定设计，并且实际上必须在写入之前尝试取出您的锁定。一个不会导致各种写入阻塞和序列化的锁实际上根本就不是锁。

*   对于乐观锁定，取出锁的确切时间是灵活的。在提交和刷新操作发生之前，不会检查锁并将其写入数据库。因此，您可以从 tx 开始到提交的任何时间取出锁。对于悲观锁定，情况正好相反——你必须保护代码的关键区域，就好像你的生命依赖于它一样。通常悲观的 lockMode 应该设置为事务开始的 em.find() 或 em.query 的一部分 - 或者如果因为托管对象已经在内存中而无法做到这一点，那么你应该执行 em.flush() 和em.refresh(PESSIMISTIC_WRITE)

=:-)

# c# - 使用剑道网格，如何更改工具栏中“创建”按钮上的措辞？

> ID：12535467
> 
> 赞同：13
> 
> 时间：2012-09-21T17:40:01.000
> 
> 标签：c#, jquery, asp.net-mvc, grid, kendo-ui

我正在使用剑道网格，我添加了“创建”来内联添加记录。如何更改添加按钮上的措辞？目前它显示为：“添加新记录”我想将其简化为“添加”，并且我还想保留相同的图标。

我的代码如下所示：

```
$reports.kendoGrid(
{
    dataSource: dataSource,
    toolbar: ["create"],
    ... 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-21T18:59:01.620

执行此操作的方法是使用以下语法：

```
$reports.kendoGrid(
{
    dataSource: dataSource,
    toolbar: [{ name: "create", text: "Add" }], 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T17:49:27.967

你可以在js中找到它，你必须从那里开始

你必须通过配置来改变它这个链接会帮助你[http://www.kendoui.c​​om/documentation/ui -widgets/grid/configuration.aspx](http://www.kendoui.com/documentation/ui-widgets/grid/configuration.aspx)

寻找解决方案它在您正在使用的 kendo.all.min.js 或 kendo.all.js 中的完美计数工作，您将在下面的行中找到

```
{create:{text:"Add new record",imageClass:"k-add",className:"k-grid-add",iconClass:"k-icon"} 
```

你会得到结果

改变它

```
 {create:{text:"Add ",imageClass:"k-add",className:"k-grid-add",iconClass:"k-icon"} 
```

# iphone - 检测 iphone 5 4" 屏幕

> ID：12535471
> 
> 赞同：17
> 
> 时间：2012-09-21T17:40:15.253
> 
> 标签：iphone, objective-c, ios, xcode

> **可能重复：**
> [如何检测 iPhone 5（宽屏设备）？](https://stackoverflow.com/questions/12446990/how-to-detect-iphone-5-widescreen-devices)

有没有办法可以检测当前设备是否是 iphone 5？更具体地说，如果它使用的是新的 4" 屏幕？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-09-23T15:11:48.200

用这个

```
#define IS_IPHONE5 (([[UIScreen mainScreen] bounds].size.height-568)?NO:YES) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-21T17:48:52.247

我认为您应该专注于首选显示模式，而不是检测 iPhone5。谁知道 Apple 将制造什么设备，但如果您的软件支持该模式，它将是面向未来的。

```
BOOL isiPhone5 = CGSizeEqualToSize([[UIScreen mainScreen] preferredMode].size,CGSizeMake(640, 1136)); 
```

将来，人们可能希望即时更改首选显示模式。例如，将 AppleTV 从 720p 电视断开并插入 1080p，当然无需重新启动应用程序。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-21T20:38:57.207

## 在您的初始化中添加此代码：

```
if([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone){
     if(UIScreenOverscanCompensationScale==1136/640){
             //move to your iphone5 storyboard
             [UIStoryboard storyboardWithName:(NSString *) bundle (NSBundle *)];
  }
     else{
             //move to your iphone4s storyboard
             [UIStoryboard storyboardWithName:(NSString *) bundle (NSBundle *)];
  }
} 
```

这是我在[这里](https://stackoverflow.com/questions/12516986/iphone-5-4-inch/12518141#12518141)的另一个问题中发布的答案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-23T08:13:02.733

将此代码添加到您的应用程序：

```
if ([UIScreen mainScreen].scale == 2.f && screenHeight == 568.0f)
    {// iPhone 5 code}
else
    {// previous version code} 
```

# jquery - 从 JSON 对象获取数据

> ID：12535473
> 
> 赞同：4
> 
> 时间：2012-09-21T17:40:30.667
> 
> 标签：jquery, ajax, json

我正在处理我的第一个（EVER！）JSON 项目，我想知道如何从 JSON 对象获取数据。我已将其导入，我需要做的是从值字段中获取输入并将其与用户输入的输入进行比较。不幸的是，我什至不知道如何从 JSON 对象中获取数据。它似乎加载成功，但我无法引用它。这是我正在加载的 JSON 示例：

```
{
    "films": [{
        "label": "34",
        "value": "34",
        "currently_streaming": "1",
        "full_streaming_url": "http://www.url.com",
        "url": "http://www.url.com"},
    {
        "label": "A Different Color",
        "value": "A Different Color",
        "currently_streaming": "1",
        "full_streaming_url": "http://www.url.php",
        "url": "http://www.url.com"}]
}​ 
```

这是加载它的代码。它返回成功，但我无法从 JSON 对象中获取任何数据：

```
 $(document).ready(function(){
    $.ajax({
        dataType: 'json',
        beforeSend : function() {
           console.log('Before Ajax Request Starts !!');
        },
        success: function(data) {
            console.log(data);
            alert("Edddddddd");
            $.each(json.films, function(i, object) {
            $.each(object, function(property, value) {
            alert(property + "=" + value);
    });
});
        },
        error : function(jqXHR, textStatus, errorThrown) {
             alert("Error occurred: " + errorThrown);
        },
         beforeSend : function() {
           console.log('Ajax Request Complete  !!');
        },
        url: 'test.php'
    });  
}); 
```

我显然不知道自己在做什么，因此非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T17:44:20.360

更改自：

```
$.each(json.films, function(i, object) 
```

至：

```
$.each(data.films, function(i, object) 
```

# sql - R 是否提供了比 tryCatch() 更干净的东西来安全地进行 SQL 查询？

> ID：12535474
> 
> 赞同：3
> 
> 时间：2012-09-21T17:40:32.637
> 
> 标签：sql, r, try-catch

我正在进行 SQL 查询，`tryCatch()`用于防止 R 静默使用数据库连接的所有插槽。它看起来像这样：

```
sql <- "SELECT * FROM addresses WHERE zipcode=10202"
con <- dbConnect(PostgreSQL(), user='user', password='pswd',
                 dbname='contacts',host='dbserv')
tryCatch( {
    rs <- dbSendQuery(con, statement=sql)                              
    fp <- fetch(rs,n=-1) # Fetch all
    dbClearResult(rs)
    fp},
  finally=dbDisconnect(con))
fp 
```

R 是否为此目的提供了更清洁的东西？我正在考虑如何`readLines()`使用字符串参数来确保没有文件连接处于打开状态。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T21:24:57.050

您可以尝试[on.exit](http://stat.ethz.ch/R-manual/R-patched/library/base/html/on.exit.html)，如下所示：

```
 foo <- function() {

      con <- dbConnect(
        PostgreSQL(),
        user=config$db.user,
        password=config$db.password,
        dbname=config$db.name,
        host=config$db.host
      )

      on.exit({
        dbDisconnect(con)
      })

      ## ... do something w/ connection

    } 
```

当函数`foo`即将返回（或由于异常退出）时，传递给的表达式`on.exit`将被计算。

# java - eclipse和文本编辑器之间的不同结果

> ID：12535477
> 
> 赞同：1
> 
> 时间：2012-09-21T17:40:41.663
> 
> 标签：java, eclipse

我使用以下代码来测试 BouncyCastle 加密库：

```
import java.security.Security;

public class SimpleTest {

    public static void main(String[] args)
    {
        String providerName="BC";

        if (Security.getProvider(providerName)==null)
        {
            System.out.println(providerName + "provider not installed");
        }
        else
        {
            System.out.println(providerName + "is installed");
        }
    }
} 
```

但是，Eclipse 显示“BCprovider 未安装”，而我的 EditPlus 显示“BC 已安装”。

是什么造成了这种差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:55:13.797

在您的 Eclipse 中某处缺少一个库，它无法找到它。您需要在 Eclipse 中修改您的配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:56:14.547

区别？我猜不同的java运行时可能有不同的错误信息。

恕我直言，除非您检查底层 JRE 是否相同，否则区别不在 Eclipse 和 texteditor 之间，而是在 Java SE 7u7 和 Java SE 6u35 之间（例如）。

无论如何，这不是您的实际问题，而是在您的类路径中有效地部署提供程序 jar 并注册它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T18:28:55.570

实际上，差异可能在于 Java中的[静态安全提供程序配置。](http://www.bouncycastle.org/wiki/display/JA1/Provider+Installation)您需要以某种方式注册提供者才能使用它们。如果您无法更改 Java 运行时，则可以*在它们已正确签名的情况下*[动态注册它们](http://www.bouncycastle.org/wiki/display/JA1/Provider+Installation) 。

# vb6 - vb6锁屏

> ID：12535478
> 
> 赞同：-2
> 
> 时间：2012-09-21T17:40:42.763
> 
> 标签：vb6, screen-lock

我想知道如何使用 VB6 制作屏幕储物柜。我试过最大化框架，但它仍然可以最小化。然后我将框架做得非常大以适合整个屏幕并使框架无法调整大小，但有人可以按`Alt`+`F4`并关闭它。我还希望禁用任务管理器。那么任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T20:11:20.207

这可能不是您想要做的，但是您可以通过调用 WINAPI 函数**LockWorkStation**来锁定窗口。

```
Option Explicit
Private Declare Function LockWorkStation Lib "User32" () As Boolean 
```

调用它

```
Call LockWorkStation 
```

如果您将声明语句放在 .bas 模块中并从表单中调用它，您将希望将声明范围更改为 Public。此功能在 Windows XP 及更高版本和 Windows Server 2003 及更高版本中受支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T17:45:58.843

没有绝对的方法可以完全阻止应用程序停止。我们能知道你为什么要这样做吗？

*不过，您可以使用取消*参数阻止用户关闭应用程序。

```
private sub Form_unload(Cancel as Integer)
    Cancel = 1
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T05:45:17.457

You can remove the exit button and make the form immovable and irresizeable. The you can call a batch file that will stop the task manager as :

```
:run
taskkill /f /im taskmgr.exe
goto run 
```

This will continuously stop the task manager if it is opened.

# android - 如何在真实设备上模拟来电？

> ID：12535490
> 
> 赞同：13
> 
> 时间：2012-09-21T17:41:40.767
> 
> 标签：android, simulation, phone-call

出于测试目的，我想在真实的 android 设备（即不是模拟器）上模拟/欺骗来电。我知道[DDMS 为模拟器提供了此功能](http://developer.android.com/tools/debugging/ddms.html#ops-location)，但我无法为通过 USB 连接的实际设备找到解决方案。

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2012-09-21T17:55:46.963

在[使用 DDMS 文档](http://developer.android.com/tools/debugging/ddms.html)中，查看标题为**欺骗呼叫或 SMS 文本消息**的部分。

DDMS 是一个可执行文件，`tools`位于 Android SDK 的目录中。

# ios - 当我继承 UIView 并实现一个空的 drawRect 方法时，colorWithPatternImage 图像会调整大小以填充视图，为什么？

> ID：12535497
> 
> 赞同：0
> 
> 时间：2012-09-21T17:42:26.413
> 
> 标签：ios, objective-c, cocoa-touch, uiview, uicolor

background 属性是 IB 中常规 UIView 的一个出口。

```
UIImage* image = [UIImage imageNamed:@"glow.jpg"];
UIGraphicsBeginImageContextWithOptions(CGSizeMake(1, 768), NO, 0.0);
[image drawInRect:CGRectMake(0, 0, 1, 768)];
UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
self.background.backgroundColor = [UIColor colorWithPatternImage:newImage]; 
```

如果我不向 self.background 添​​加自定义类，当视图调整自身大小（它是渐变）时，发光不会自行调整大小，它会在 768 高度重复。

但是，如果我将 UIView 子类化，将背景属性设置为该类并覆盖 drawRect 方法，它会将图案图像的大小调整为视图的高度。

很奇怪，请问有大神能解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T08:47:26.780

iOS：使用 UIView 的 'drawRect:' 与它的图层的 delagate 'drawLayer:inContext:'

```
-(void)drawRect:(CGRect)r
{

    // UIView uses the existence of -drawRect: to determine if it should allow its CALayer
    // to be invalidated, which would then lead to the layer creating a backing store and
    // -drawLayer:inContext: being called.
    // By implementing an empty -drawRect: method, we allow UIKit to continue to implement
    // this logic, while doing our real drawing work inside of -drawLayer:inContext:

}

-(void)drawLayer:(CALayer*)layer inContext:(CGContextRef)context
{
    ...
} 
```

# android - 带有大 APK 的 Android“mmap 失败：内存不足”

> ID：12535498
> 
> 赞同：2
> 
> 时间：2012-09-21T17:42:31.980
> 
> 标签：android, memory, crash, mmap

我的 Android 应用 APK 相当大，约为 480 MB。我可以很好地安装应用程序，但在 Android OS 2.2 上启动应用程序时出现此错误（在 logcat 中）：

```
09-21 00:04:12.855: W/dalvikvm(3178): mmap(480331001, RO, FILE|SHARED, 28, 0) failed: Out of memory
09-21 00:04:12.855: W/dalvikvm(3178): Map of '/data/app/com.mycompany.myapp-1.apk' failed
09-21 00:04:12.855: D/AndroidRuntime(3178): Shutting down VM
09-21 00:04:12.855: W/dalvikvm(3178): threadid=1: thread exiting with uncaught exception (group=0x4001d828)
09-21 00:04:12.859: E/AndroidRuntime(3178): FATAL EXCEPTION: main
09-21 00:04:12.859: E/AndroidRuntime(3178): java.lang.RuntimeException: Unable to instantiate activity 
... 
```

这在 OS 4.0+ 上不会发生。一些用户在 2.3.4 和 2.3.7 中报告启动时崩溃，我怀疑这是同一个问题。为什么 mmap 在我的 APK 上失败？

**编辑**：我知道该应用程序非常大（这是一款拥有大量资产的游戏），并且 Play 商店将 APK 限制为 50 MB，但这是针对另一个没有 APK 大小限制的国家/地区的运营商。我已经在 Play Store 上有一个应用程序版本，其 APK 约为 20MB，它使用了没有 mmap 问题的扩展文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-24T19:56:42.123

只是一个猜测，但在第一次运行时尝试将文件复制到用户内存，然后从那里映射它。

# jquery - 使用 Jsonp 调用跨域 Asp.Net Web 服务

> ID：12535500
> 
> 赞同：2
> 
> 时间：2012-09-21T17:42:35.937
> 
> 标签：jquery, asp.net, ajax, web-services, jsonp

我已经尝试了无数的例子，但无法让它发挥作用。

我正在尝试调用跨域 asp.net Web 服务，但每次都返回以下错误：

> jQuery18105929389187970706_1348249020199 未被调用

这是我的网络服务：

```
[WebService(Namespace = "http://www.mywebsite.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
// [System.Web.Script.Services.ScriptService]
[ScriptService]
public class DataService : System.Web.Services.WebService
{
    [WebMethod]
    [ScriptMethod(UseHttpGet = true, ResponseFormat = ResponseFormat.Json)]
    public string GetIncidentsByAddress()
    {
        return "It worked!";
    }
} 
```

我处理 Json 的 HttpModule：

```
 public class JsonHttpModule : IHttpModule
    {
        private const string JSON_CONTENT_TYPE = "application/json; charset=utf-8";

        public void Dispose()
        {
        }

        public void Init(HttpApplication app)
        {
            app.BeginRequest += OnBeginRequest;
            app.ReleaseRequestState += OnReleaseRequestState;
        }

        bool _Apply(HttpRequest request)
        {
            if (!request.Url.AbsolutePath.Contains(".asmx")) return false;
            if ("json" != request.QueryString.Get("format")) return false;
            return true;
        }

        public void OnBeginRequest(object sender, EventArgs e)
        {
            HttpApplication app = (HttpApplication)sender;

            if (!_Apply(app.Context.Request)) return;

            // correct content type of request
            if (string.IsNullOrEmpty(app.Context.Request.ContentType))
            {
                app.Context.Request.ContentType = JSON_CONTENT_TYPE;
            }
        }

        public void OnReleaseRequestState(object sender, EventArgs e)
        {
            HttpApplication app = (HttpApplication)sender;

            if (!_Apply(app.Context.Request)) return;

            // apply response filter to conform to JSONP
            app.Context.Response.Filter =
                new JsonResponseFilter(app.Context.Response.Filter, app.Context);
        }
    }

    public class JsonResponseFilter : Stream
    {
        private readonly Stream _responseStream;
        private HttpContext _context;

        public JsonResponseFilter(Stream responseStream, HttpContext context)
        {
            _responseStream = responseStream;
            _context = context;
        }

        //...

        public override void Write(byte[] buffer, int offset, int count)
        {
            var b1 = Encoding.UTF8.GetBytes(
              _context.Request.Params["callback"] + "(");
            _responseStream.Write(b1, 0, b1.Length);
            _responseStream.Write(buffer, offset, count);
            var b2 = Encoding.UTF8.GetBytes(");");
            _responseStream.Write(b2, 0, b2.Length);
        }

        //...
    } 
```

我的 web.config 用于说 HttpModule：

```
<add name="JSONAsmx" type="JsonHttpModule, App_Code"/> 
```

最后是我的 jQuery 调用：

```
<script src="js/jquery.jmsajax.min.js" type="text/javascript"></script>
<script src="js/jquery-1.8.1.min.js" type="text/javascript"></script>

<script type="text/javascript">

    $.jmsajaxurl = function(options) {
        var url = options.url;
        url += "/" + options.method;
        if (options.data) {
            var data = ""; for (var i in options.data) {
                if (data != "")
                    data += "&"; data += i + "=" +
             msJSON.stringify(options.data[i]);
            }
            url += "?" + data; data = null; options.data = "{}";
        }
        return url;
    };

    $(function() {
        var url = $.jmsajaxurl({
            url: "http://www.mywebsite.org/apps/IncidentReportingService/DataService.asmx",
            method: "GetIncidentsByAddress",
            data: {}
        });

        $.ajax({
            cache: false,
            dataType: "jsonp",
            success: function(data) { successCallback(data); },
            error:function(xhr, status, errorThrown) { debugger;},
            url: url + "&format=json"
        });

    });

    function successCallback(data) {
        debugger;
        $.each(data, function(i, item) {
            $("#tweets ul").append("<li>" + item.text + "</li>");
        });
    }; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:02:30.520

尝试解析json返回的数据如下

```
success: function(data) { 
    data = JSON.parse(data); 
    // Do work with the data
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:31:53.053

好吧，看来我的 HttpModule 并没有一路实现。有些方法我没有在其中覆盖，它导致整个 Web 服务无法工作。

我将其更改为以下内容，现在一切正常：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.IO;
using System.Text;

public class JsonHttpModule : IHttpModule
{
    private const string JSON_CONTENT_TYPE = "application/json; charset=utf-8";

    public void Dispose()
    {
    }

    public void Init(HttpApplication app)
    {
        app.BeginRequest += OnBeginRequest;
        app.ReleaseRequestState += OnReleaseRequestState;
    }

    bool _Apply(HttpRequest request)
    {
        if (!request.Url.AbsolutePath.Contains(".asmx")) return false;
        if ("json" != request.QueryString.Get("format")) return false;
        return true;
    }

    public void OnBeginRequest(object sender, EventArgs e)
    {
        HttpApplication app = (HttpApplication)sender;

        if (!_Apply(app.Context.Request)) return;

        // correct content type of request
        if (string.IsNullOrEmpty(app.Context.Request.ContentType))
        {
            app.Context.Request.ContentType = JSON_CONTENT_TYPE;
        }
    }

    public void OnReleaseRequestState(object sender, EventArgs e)
    {
        HttpApplication app = (HttpApplication)sender;

        if (!_Apply(app.Context.Request)) return;

        // apply response filter to conform to JSONP
        app.Context.Response.Filter =
            new JsonResponseFilter(app.Context.Response.Filter, app.Context);
    }
}

public class JsonResponseFilter : Stream
{
    private readonly Stream _responseStream;
    private HttpContext _context;
    private long _position;

    public JsonResponseFilter(Stream responseStream, HttpContext context)
    {
        _responseStream = responseStream;
        _context = context;
    }

    public override bool CanRead { get { return true; } }

    public override bool CanSeek { get { return true; } }

    public override bool CanWrite { get { return true; } }

    public override long Length { get { return 0; } }

    public override long Position { get { return _position; } set { _position = value; } }

    public override void Write(byte[] buffer, int offset, int count)
    {
        var b1 = Encoding.UTF8.GetBytes(
          _context.Request.Params["callback"] + "(");
        _responseStream.Write(b1, 0, b1.Length);
        _responseStream.Write(buffer, offset, count);
        var b2 = Encoding.UTF8.GetBytes(");");
        _responseStream.Write(b2, 0, b2.Length);
    }

    public override void Close()
    {
        _responseStream.Close();
    }

    public override void Flush()
    {
        _responseStream.Flush();
    }

    public override long Seek(long offset, SeekOrigin origin)
    {
        return _responseStream.Seek(offset, origin);
    }

    public override void SetLength(long length)
    {
        _responseStream.SetLength(length);
    }

    public override int Read(byte[] buffer, int offset, int count)
    {
        return _responseStream.Read(buffer, offset, count);
    }
} 
```

# javascript - 分页不适用于 KO Grid

> ID：12535503
> 
> 赞同：0
> 
> 时间：2012-09-21T17:43:06.193
> 
> 标签：javascript, jquery, gridview, knockout.js, knockout-2.0

我正在使用 KO-grid，它似乎可以很好地加载所有数据。现在，我正在处理分页部分，它似乎无法正常工作。是的，我在底部进行了分页控制，但是当涉及到能够决定页面大小时，它似乎不起作用。根据给出的配置细节，页面大小由两个选项驱动`https://github.com/ericmbarnard/KoGrid/wiki/Configuration`

1.pageSizes:[5,10, 25] - 似乎显示选项，但是当我将选择从 5 更改为 10 时，它似乎对这些选项起作用。2.pagesize ://somenumber -- 破坏代码。

我在 jsfiddle 上有它的工作模型：http: [//jsfiddle.net/sf4p3/46/](http://jsfiddle.net/sf4p3/46/)

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:42:55.973

好吧，KoGrid 中的分页似乎并没有像您希望的那样发挥作用。

这是 GitHub 上 KoGrid wiki 示例的链接：

[http://ericmbarnard.github.com/KoGrid/examples/Complex-Server-Side-Paging.html](http://ericmbarnard.github.com/KoGrid/examples/Complex-Server-Side-Paging.html)

在查看 HTML 页面的源代码时，可能会看到视图模型声明的开头而无需滚动（当然取决于屏幕分辨率）。无论如何，这从第 30 行开始。

`pageSize`请注意，在视图模型中有一个名为 observable ，它被设置为 50。

向下滚动一点，应该会看到名为`filter`、`sort`和的函数，`getPagedDataAsync`用于过滤数据、对数据进行排序以及为当前页面创建数据集。

这是该`getPagedDataAsync`函数的代码：

```
this.getPagedDataAsync = function (pageSize, page, filterInfo, sortInfo) {
    setTimeout(function () {
        var data = window.getExampleData();
        var filteredData = filter(data(), filterInfo);
        var sortedData = sort(filteredData, sortInfo);
        var pagedData = sortedData.slice((page - 1) * pageSize, page * pageSize);
        self.myObsArray(pagedData);
    }, 0);
}; 
```

在没有查看视图模型其余部分的详细信息的情况下，通过阅读上面的代码应该可以看出，该函数首先检索要显示此示例页面的所有数据，然后过滤数据并对数据进行排序。

之后，对数据数组进行切片以提取当前页面要查看的数据，并将该切片传递给`myObsArray`用于在网格中显示数据的 observable 数组。

这是此示例中网格的声明：

```
<div id="sandBox" class="example" style="height: 600px; max-width: 700px;" 
    data-bind="koGrid: { 
        data: myObsArray,
        columnDefs: [ 
            { field: 'Sku', width: 140 },
            { field: 'Vendor', width: 100 },
            { field: 'SeasonCode', displayName: 'Season Code', width: 150 },
            { field: 'Mfg_Id', displayName: 'Mfg ID', width: 180 },
            { field: 'UPC', width: 170 }
        ],
        autogenerateColumns: false,
        isMultiSelect: false,
        enablePaging: true,
        useExternalFiltering: true,
        useExternalSorting: true,
        filterInfo: filterInfo,
        sortInfo: sortInfo,
        pageSize: pageSize,
        pageSizes: [25, 50, 75],
        currentPage: currentPage,
        totalServerItems: totalServerItems,
        selectedItem: selectedItem }">
</div> 
```

希望这会有所帮助，并且您将能够解决分页问题。

无论如何，如果您有任何问题，请告诉我。

**更新**

*@Californicated 我正在度假，但我有一些空闲时间来看看你最新的小提琴。*

我分叉了您在最新小提琴中的内容，并进行了以下更改以使分页正常工作：

在 observables 的声明中，我将值更改`pageSize`为 2，将值`totalServerItems`更改为 7。在 JS 中，我更改了函数中`data`var 的声明，`getPagedDataAsync`因此它正在检索 `Prizefillfilmentstatuses`observable 数组。

在 JS 代码的最后一行，我将第一个参数从 50 更改为 2。在 jsFiddle 工具栏中，我将第一个下拉列表从“onLoad”更改为“no wrap (body)”

在 HTML 中的 koGrid 声明中，我添加了以下选项/参数：

```
pageSize: pageSize,
currentPage: currentPage,
totalServerItems: totalServerItems,
selectedItem: selectedItem 
```

页面设置单独处理 JS 更改，但分页工具（上一个、下一个等）直到我添加`totalServerItems`在 koGrid 声明中添加选项才处于活动状态。

再次，如果您有任何问题，请告诉我。

# jquery - 如何为 Jqplot 条形图/饼图的各个条形分配额外的隐藏参数

> ID：12535506
> 
> 赞同：0
> 
> 时间：2012-09-21T17:43:17.953
> 
> 标签：jquery, jqplot

我想将其他隐藏参数传递给 Jqplot 图表的单个条形或饼图。实际上，我希望当我单击单个条/切片时，它应该将我带到不同的页面，具体取决于分配给每个条/切片的键。现在，onClick 事件我可以捕获数据、gridpos 等。但是在这里我想将键值附加到条/片，并且应该能够在单击条/片时访问这些键。有人可以指出我该怎么做吗？

这是jsfiddle [http://jsfiddle.net/jdev/4e9Ls/39/](http://jsfiddle.net/jdev/4e9Ls/39/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T17:37:27.067

没有什么能阻止您在数据数组中添加其他参数：

```
var data = [
         ["USD",5000,"Hello"], ["CAD",2000, "I"], ["JPY",10000, "Am"], ["AUD",9000, "Additional"]
]; 
```

然后在点击事件中：

```
$('#chart2').bind('jqplotDataClick', function (ev, seriesIndex, pointIndex, data) { 
    alert(data[2]);
}); 
```

[在这里](http://jsfiddle.net/4e9Ls/53/)更新了小提琴。

# c++ - 为 ppm/pgm 图像数据创建存储

> ID：12535507
> 
> 赞同：-1
> 
> 时间：2012-09-21T17:43:20.057
> 
> 标签：c++

所以我正在研究一个应该在 pgm/ppm 文件中读取并最终修改它的类。但是，我仍在努力读取数据。我目前的目标是为二进制数据创建存储空间。以下是我应该执行此操作的函数的代码：

```
 uchar* pxm::newimg(int nrows, int ncols, int bpp)
       {
           uchar *newimage = new uchar[nrows * ncols * bpp]; 
           //uchar defined as binary data previously
           return newimage;
        } 
```

然后我在我的“读取”函数中使用它作为：

```
 img = newimg(nrows, ncols, bpp); //img declared in private section of class
       ws(myfile); //reads the newline
       myfile.read((char *) img[0], nrows * ncols * bpp); 
       //nrows, ncols, and bpp private member variables in class
       myfile.close(); 
```

不幸的是，虽然这段代码可以编译，但它在运行时会产生分段错误。我相当确定我的问题出在 newimg 函数中，因为我已经进行了检查以确保我正在正确读取文件并正确设置 nrows、ncols 和 bpp 以及 magicid。因此，我认为我没有正确初始化数组数据结构。如果有人有任何建议，将不胜感激。谢谢， Zeta ps 如果您需要有关我的代码的更多详细信息，请提出要求，我会在帖子中添加更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:44:58.070

`(char *) img[0]`应该是`img`，或`(char *) img`。

# python - Python 硬币变化如此接近

> ID：12535513
> 
> 赞同：1
> 
> 时间：2012-09-21T17:43:43.987
> 
> 标签：python

我正在做硬币找零的问题。我已经完成了这个问题，它会打印出我需要多少硬币才能尽可能减少零钱，但是如何更改我的程序以便它也打印这些硬币？

这是一个示例`I/O`：

输入：`coin_change(48, [1, 5, 10, 25, 50])`

输出：`[6, [25, 10, 10, 1, 1, 1]]`

目前我的代码只返回`6`.

**顺便说一句，这只能通过递归来完成。不允许循环**

代码：

```
def change(C, V):
    def min_coins(i, aC):
        if aC == 0:
            return 0
        elif i == -1 or aC < 0:
            return float('inf')
        else:
            return min(min_coins(i-1, aC), 1 + min_coins(i, aC-V[i]))
    return min_coins(len(V)-1, C) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:33:40.890

您的程序的不同版本：

```
def change(C, V, res=None):
    res = [] if res is None else res
    if len(V) == 0:
        return len(res), res
    maxx = max(V)
    V.remove(maxx)
    ans = C//maxx
    if ans == 0 and maxx < C :
        res += [maxx] * ans
        return len(res), res
    else:
        res += [maxx] * ans
        return  change(C % maxx, V, res)

print change(48,[1, 5, 10, 25, 50])
print change(30,[25, 10, 2, 3, 1]) 
```

**输出：**

```
(6, [25, 10, 10, 1, 1, 1])
(3, [25, 3, 2]) 
```

PS：如果你愿意，我会添加一个解释。

# java - 优化休眠

> ID：12535517
> 
> 赞同：2
> 
> 时间：2012-09-21T17:44:10.377
> 
> 标签：java, hibernate

我有使用存储功能的实体。这很好，但在某些情况下我不需要此字段（fieldStoreFunc1、fieldStoreFunc2 ..）并且仅在必要时使用 B 类和 fieldStoreFuncs：

```
@Entity
@Table(name = "table")
@SequenceGenerator(name = "JDE_SEQUENCE", sequenceName = "JDE_SEQUENCE", allocationSize = 1)
public class EntityClass implements Trackable {

    @Id
    @GeneratedValue(generator = "JDE_SEQUENCE", strategy = GenerationType.SEQUENCE)
    private Long id;

    @Column(name = "name_field")
    private String field1;

    @Column(name = "name_field")
    private String field2;

    @Column(name = "name_field")
    private String field3;
    ......

    //read only fields
    @Formula("store_func(value)")
    private String fieldStoreFunc1;

    @Formula("store_func(value)")
    private String fieldStoreFunc2;

    @Formula("store_func(value)")
    private String fieldStoreFunc3;
} 
```

所以我可以把班级分成

```
class A{
    @Column(name = "name_field")
        private String field1;

        @Column(name = "name_field")
        private String field2;

        .....
}

class B extends A{
        //read only fields
        @Formula("store_func(value)")
        private String fieldStoreFunc1;

        @Formula("store_func(value)")
        private String fieldStoreFunc2;

        @Formula("store_func(value)")
        private String fieldStoreFunc3;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T13:32:18.300

不，这不是你应该做的。

首先，测量、分析和证明加载这三个额外的字段会导致显着的开销和性能问题。

一次，并且只有一次你有这个证明，然后考虑延迟加载额外的三个字段[，如文档中所述](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#performance-fetching-lazyproperties)。然后再次测量，证明这三个字段的延迟加载不会造成更大的开销和性能问题。

如文档中所述：

> Hibernate3 支持对单个属性的惰性获取。这种优化技术也称为提取组。请注意，这主要是一种营销功能；优化行读取比优化列读取重要得多。但是，仅加载类的某些属性在极端情况下可能很有用。例如，当遗留表有数百列并且无法改进数据模型时。

除非 store_func 公式非常昂贵，否则您可能应该避免尝试优化任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T13:45:34.410

尽管我同意`JB Nizet`您是否仍愿意按需加载这些属性。只是为了记录。

您可以通过几种方式实现。更简单的方法是在您的类中创建一个构造函数，该构造函数具有您始终想要加载的属性

```
Please Note that is just an example and is not properly developed

public class A {
  ...
  @Column(name = "name_field")
  private String field1;

  @Formula("store_func(value)")
  private String fieldStoreFunc1;

  ...
  public A(String id, String field1) {
     this id = id; 
     this.field1 = field1;
  } 
```

然后在`DAO`创建一个加载实体的函数

```
public class DAO {
    getLight(Long id) {
       String named_query = "select a.id, a.field1 from A a where a.id = :id"
       // Execute query
    } 
```

另一种方法是查看`Hibernate event`或编写自定义实体加载器。

# java - java处理字符异常

> ID：12535519
> 
> 赞同：0
> 
> 时间：2012-09-21T17:44:14.183
> 
> 标签：java

我是新手，我有以下代码运行良好，但是当我输入特殊字符（@、%、* 等）时，它必须抛出异常，所以我怎么能做到这一点，有人可以帮我吗？新手程序员

/* 检查值的代码*/

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
public class CheckVal 
{
    public static void main(String args[]) 
{
    int i=0;
    double x=0;
    System.out.println("Enter your angle");
    try{
    BufferedReader br=new BufferedReader(new InputStreamReader(System.in));
    i=Integer.parseInt(br.readLine());

    }
    catch(Exception e)
    {
        System.out.println(e);
    }
    System.out.println(i);
    x=Math.sin(Math.toRadians(i));
    System.out.println(x);
    if(x>=0 && x<=0.5)
    {
        ButtonBackground frame = new ButtonBackground("green");
        //frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        frame.pack();
        frame.setLocationRelativeTo( null );
        frame.setResizable(false);

        frame.setVisible(true);

    }
    else{
        ButtonBackground frame = new ButtonBackground("red");
        //frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        frame.pack();
        frame.setLocationRelativeTo( null );
        frame.setResizable(false);

        frame.setVisible(true);
        }
    }
} 
```

/*按钮背景代码*/

```
import java.awt.*;
import javax.swing.*;

public class ButtonBackground extends JFrame
{
    public ButtonBackground(String x)
    {
        setLayout( new FlowLayout() );
        //JButton normal = new JButton(" ");
        // add(normal);
        if(x.equals("green")) {
            JButton test1 = new JButton(" ")
            {
                @Override
                public void paintComponent(Graphics g)
                {
                    g.setColor( Color.GREEN );
                    g.fillRect(0, 0, getSize().width, getSize().height);
                    super.paintComponent(g);
                }
            };
            test1.setContentAreaFilled(false);
            test1.setBackground(Color.GREEN);
            add(test1);
        }
        else
        {
        JButton test1 = new JButton(" ")
            {
                @Override
                public void paintComponent(Graphics g)
                {
                    g.setColor( Color.RED );
                    g.fillRect(0, 0, getSize().width, getSize().height);
                    super.paintComponent(g);
                }
            };
            test1.setContentAreaFilled(false);
            test1.setBackground(Color.RED);
            add(test1);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:13:16.393

据我所知，它已经做到了，但你正在抓住它。作为一个建议，尽量避免 Pokémon try-catch 方法（“Gotta catch 'em all!” by catch a generic `Exception`）。

通过做

```
try {
    //your code
} catch (Exception e) {

} 
```

您正在捕获 try 中的代码可能抛出的各种异常，而没有机会知道出了什么问题。如果您的应用程序失败，这将成为一场噩梦，因为它没有“中断”，但它没有做您希望它做的事情。

特别是你想得到一个整数，如果你得到特殊字符，你想抛出一个异常。IllegalArgumentException 似乎适合您的特定需求，因为特殊字符毕竟是非法参数。我建议不要使用这种输入阅读：

```
System.out.println("Enter your angle");
try{
BufferedReader br=new BufferedReader(new InputStreamReader(System.in));
i=Integer.parseInt(br.readLine());

}
catch(Exception e)
{
    System.out.println(e);
} 
```

你尝试这样的事情：

```
System.out.println("Enter your angle");
try{
    BufferedReader br=new BufferedReader(new InputStreamReader(System.in));
    i=Integer.parseInt(br.readLine());
}
catch(NumberFormatException e)
{
    throw new IllegalArgumentException();
} 
```

如果我没记错的话，那就是你想要的。

作为旁注，请记住捕获该 IllegalArgumentException ，使其不会向上传播。要对此进行更好的管理，请尝试创建一个读取输入并返回 int 的函数，或者在特定情况下引发异常。

```
private int readEntry() throws IllegalArgumentException {
    try {
        BufferedReader br=new BufferedReader(new InputStreamReader(System.in));
        i=Integer.parseInt(br.readLine());
    } catch(NumberFormatException e) {
        throw new IllegalArgumentException();
    }
} 
```

然后你可以在你的 main 函数中调用它并做任何你认为必要的事情。这也提高了可读性。

```
int input = readEntry(); //Surround this with a try-catch and catch the IllegalArgumentException if you want to control it. 
```

# c++ - 如何用 OpenCV 模仿 Matlab 的 medfilt2？

> ID：12535532
> 
> 赞同：3
> 
> 时间：2012-09-21T17:45:24.960
> 
> 标签：c++, matlab, opencv

我有一个用 Matlab 编写的成像应用程序，需要使用 OpenCV 将其转换为 C++ 应用程序。但我似乎找不到一种简单的方法来用 OpenCV 模仿 medfilt2。

我尝试了 MedianBlur，但没有产生相同的结果。谁能给我这个任务的任何线索？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T17:55:08.707

在我看来，这个[链接](http://www.librow.com/articles/article-1/appendix-a-2)应该有你需要的东西。`n`但是，如果您想指定by`m`窗口，您似乎必须进行一些小的修改。

```
 //   Pick up window elements
     int k = 0;
     // Original: element window[9];
     element window[n_win*m_win];
     for (int j = m_win - 1; j < m_win; ++j)
        for (int i = n_win - 1; i < n_win; ++i)
           window[k++] = image[j * N + i];
     //   Order elements (only half of them)
     // make sure (n_win*m_win)/2 is odd :-)
     for (int j = 0; j < (n_win*m_win)/2; ++j)
     {
        //   Find position of minimum element
        int min = j;
        for (int l = j + 1; l < n_win*m_win; ++l)
        if (window[l] < window[min])
           min = l;
        //   Put found minimum element in its place
        const element temp = window[j];
        window[j] = window[min];
        window[min] = temp;
     }
     //   Get result - the middle element
     result[(m - 1) * (N - 2) + n - 1] = window[4]; 
```

# oracle - jqgrid ajax 与 perl cgi 和 dbd oracle

> ID：12535533
> 
> 赞同：0
> 
> 时间：2012-09-21T17:45:29.747
> 
> 标签：oracle, jqgrid, dbd

我有一个调用 perl cgi 来填充网格的 jqgrid。cgi 使用 DBD::Oracle 来获取数据。网格不显示数据。

调试脚本我发现在准备语句时存在冲突。当我跳过准备并发送数据时，它工作正常；当我从 Oracle 更改为 PostgreSQL 时，它工作得很好。

有人经历过吗？我知道 CGI 正在使用 Oracle 连接，因为当我以交互方式运行它时它会运行并打印到屏幕上。当从网格调用 CGI 时，它不会。当使用 Pg 连接和准备调用 CGI 时，数据加载到网格 - 完美

CGI：

```
 #!/usr/bin/perl
    use CGI;
    use DBI;
    use Connect::Oracle;
    use Connect::PG;

    $stat = new CGI("");
    print $stat->header;
    $count = $stat->url_param('count');

    #connecting to either db works fine
    my $ORdbh = DBI->connect(Oracle->User, {PrintError=>1,RaiseError=>1}); 
    # my $ORdbh = DBI->connect(PG->User, {PrintError=>1,RaiseError=>0});

    $select = qq/select * from db.table/;  

    # preparing with Oracle connection works fine, but nothing returned to grid. 
    # Not even the hardcoded $rows below! 
    # Preparing with PG connection works also but $rows returns to grid

    my $select_batch_status = $ORdbh->prepare($select);
    #$select_batch_status->execute();
    #$select_batch_status->bind_columns(\$COLLECTID, \$SYSTEM);

    ....removed fetch()....irrelevant

    #The JSON is fine

    $rows = qq/["COLLECTID","SYSTEM"]/;

    $data = qq/{"page":"1","total": 1, "records": "$row_count", "rows": [/;
    $data .= $rows;
    $data .= qq/]}/;

    print "$data";
    exit; 
```

我的结论是 jqgrid 和 DBD::Oracle 之间存在冲突，但我不知道如何调试更低。网格与 Pg 配合得很好，但我想使用 Oracle。在 Chrome 开发人员工具上，我没有看到任何警告或错误，并且 cgi 没有发送任何数据

网格：

```
<script type="text/javascript">
    var counter=0;
    jQuery(function () {
        jQuery("#list3").jqGrid({
            url:'./collect.cgi?count=' + counter,
            datatype: "json",
            ajaxGridOptions: { contentType: 'application/json; charset=utf-8' },
            colNames: ['COLLECT ID', 'SYSTEM'],
            colModel: [
                {name: 'collectid', index: 'collectid', width: 100},
                {name: 'system', index: 'system', width: 50},
            ],
            rowNum: 20,
            rowList: [15, 30, 45],
            pager: '#pager3',
            sortname: 'system',
            sortable: true,
            loadonce: true,
            viewrecords: true,
            sortorder: "asc",
            rowTotal: 500,
            jsonReader: {
                cell: "",
                id: "0"
            },
            gridview: true,
            loadComplete: function() {
            $(document).ready(function() {
                    setTimeout (function() {
                            counter++;
                            $("#list3").jqGrid().setGridParam({
                                    url: './collect.cgi?count=' + counter,
                                    datatype: 'json',
                                    loadonce: true
                            }).trigger("reloadGrid",[{current:true}]);
                    }, 10000);
            });
            },
            loadError: function(xhr,st,err) {
                    $("#jsonmapMessage").html("Type: " + st + "; Response: " + xhr.status + " " + xhr.statusText);
            },
            loadtext: "updating...",
            caption: "COLLECTION MONITOR CONTROL",
            width: 'auto',
            height: '500'
        });

    $("#list3").jqGrid('navGrid','#pager3',{edit:true,add:true,del:true,refresh:true});

    });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T15:22:15.410

我最近能够重新访问它，经过一些挖掘和网络日志审查，结果证明 cgi 程序无法加载 DBD::Oracle 所需的所有库。为了使这些库可用，我必须更新 LD_LIBRARY_PATH 环境变量以指向正确的库。在 cgi 程序获取其环境的网络服务器级别需要此更改。将 LD_LIBRARY_PATH 添加到脚本没有任何影响。在我的网络服务器上：Oracle iPlanet，我需要更新 server.xml 配置文件的 cgi 部分，并重新启动网络服务器（从管理控制台进行的更改没有生效）

# perl - 将哈希推送到 Perl 中的现有哈希

> ID：12535534
> 
> 赞同：0
> 
> 时间：2012-09-21T17:45:30.600
> 
> 标签：perl, hash, push

我是 Perl 的新手，所以你必须原谅我的代码。

我正在读取一个树形结构的文件（如 xml，实际上不是），我想`foreach`通过树，如果某个“节点”没有子节点，我想插入它。很简单。

这是我的代码：

```
foreach $key ( @{$struct->{'transferBatch'}->{'callEventDetails'} } ) {

    foreach ( keys %{$key} ) {

        if ( $_ eq "mobileTerminatedCall" ) {

            if ( defined $key->{$_}->{'basicServiceUsedList'} ) {

                if ( defined $key->{$_}->{'basicServiceUsedList'}[0]->{'chargeInformationList'} ) {

                    if ( not defined $key->{$_}->{'basicServiceUsedList'}[0]->{'chargeInformationList'}[0]->{'CallTypeGroup'} ) {

                        $CallTypeGroup = {                          
                                "CallTypeLevel1:" => "0",
                            "CallTypeLevel2:" => "0",
                            "CallTypeLevel3:" => "0"

                        };                          

                        #Doesn't work! 
                        $key->{$_}->{'basicServiceUsedList'}[0]->{'chargeInformationList'}[0]{'CallTypeGroup'} =  $CallTypeGroup;
                    }
                }
            }
        }
    }
} 
```

迭代工作正常，但我的`push`调用失败，说它不是 ARRAY 引用。我觉得我很接近，但我需要那条线将`$CallTypeGroup`哈希作为一个孩子插入到当前位置。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:49:12.097

```
$key->{$_}->{'basicServiceUsedList'}[0]->{'chargeInformationList'}[0] 
```

包含对哈希的引用，如此处创建的（如果不是更早的话）：

```
if ( not defined
   $key->{$_}{basicServiceUsedList}[0]
      ->{chargeInformationList}[0]
         ->{CallTypeGroup} ) 
```

你没有指出你想要什么数据结构，所以我不确定除了解释信息之外我们还能提供什么帮助。我*认为*您只是想将其更改`if`为

```
if ( not defined
   $key->{$_}{basicServiceUsedList}[0]
      ->{chargeInformationList}[0] ) 
```

* * *

顺便说一句，您确实应该使用变量来保存中间引用，而不是使用这么长的“名称”。

顺便说一句，我对所有那些硬编码的零索引高度怀疑。

# c++ - 从低对比度背景中提取对象

> ID：12535536
> 
> 赞同：0
> 
> 时间：2012-09-21T17:45:36.210
> 
> 标签：c++, opencv, image-segmentation, object-recognition

我需要从背景几乎平坦的图像中提取对象...

例如，考虑在白色大桌面上的一本书。我需要获取书的 4 个角的坐标来提取 ROI。

您会建议使用哪种 OpenCV 技术？我正在考虑使用 k 手段，但我无法先验地知道背景的颜色（对象内部的颜色也可能不同）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T22:13:28.197

如果您的背景对比度非常低，为什么不尝试从图像边界进行泛光填充，然后您可以获得边界框或边界矩形。

另一种选择是应用霍夫变换并将大多数外线的交点作为角。也就是说，如果您的对象是矩形的。

# android - startService() 在 adobe AIR ANE 处返回 null

> ID：12535539
> 
> 赞同：0
> 
> 时间：2012-09-21T17:45:50.233
> 
> 标签：android, actionscript-3, air-native-extension

```
package com.example.demoservice.extensions;

import android.content.ComponentName;
import android.util.Log;
import com.adobe.fre.FREContext;
import com.adobe.fre.FREFunction;
import com.adobe.fre.FREObject;

public class IapTstoreStartServiceFunction implements FREFunction {

    private static String TAG = IapTstoreStartServiceFunction.class.getSimpleName();

    public FREObject call( FREContext context, FREObject[] args ) {

        Log.d( TAG, "0 : " );

        try {
            Intent intent = new Intent( "com.example.demoservice.DemoService" );

            ComponentName cn = context.getActivity().startService( intent );

            Log.d( TAG, "1 : " + cn );  // <---- cn is null ******
        }
        catch( Exception e )
        {
            Log.d( TAG, "2 : " + e );
        }

        Log.d( TAG, "3 : " + cn );
        return null;
    }
} 
```

调用上述函数时，startService() 返回 null（cn 为 null）并且不调用 DemoService 的 onStartCommand。但是当 DemoService 被原生 android 活动调用时，它会正确启动。我无法在 ANE AIR 上启动 DemoService。任何人都可以帮助我如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-10T22:18:49.537

您应该将您的服务添加到 AIR 应用程序描述符的 android 部分：

```
<application android:enabled="true">
    <service android:name="com.example.demoservice.DemoService"/>    
</application> 
```

# html - 移动浏览器的工具提示

> ID：12535540
> 
> 赞同：1
> 
> 时间：2012-09-21T17:45:51.207
> 
> 标签：html, css, mobile

> **可能重复：**
> [移动浏览器的工具提示](https://stackoverflow.com/questions/12539006/tooltips-for-mobile-browsers)

也许这更像是一个 UX 问题而不是 CSS 问题。`title`如果我想提供更多信息，我目前设置了一些 HTML 的属性：

```
<p>An <span class="more_info" title="also called an underscore">underline</span> character is used here</p> 
```

然后在 CSS 中：

```
.more_info {
  border-bottom: 1px dotted;
} 
```

效果非常好，视觉指示器可以将鼠标移到上方，然后弹出一个带有更多信息的小窗口。但是在移动浏览器上，我没有得到那个工具提示。 `title`属性似乎没有影响。在移动浏览器中提供有关一段文本的更多信息的正确方法是什么？与上面相同，但使用 Javascript 来监听点击，然后显示一个类似于工具提示的对话框？

# java - 为什么 SMTP 服务器收不到 DATA 命令？

> ID：12535541
> 
> 赞同：4
> 
> 时间：2012-09-21T17:45:51.373
> 
> 标签：java, email, smtp, server

我正在为一个大学项目使用 Java 编写 POP3 和 SMTP 服务器。我可以通过客户端（即：Thunderbird）使用我的 SMTP 服务器发送电子邮件，我的服务器可以毫无问题地发送它们。

当外部发件人代理（如 gmail 或 hotmail）尝试使用我的 SMTP 服务器发送电子邮件时，它不会完成通信，因为它会在 MAIL 命令之后发送 QUIT 命令。为什么外部代理会这样做？我没有遵守 SMTP 协议吗？

问题是，当我从想要向我发送邮件的外部服务器接收到连接时，会发生以下情况（我：我的 SMTP 服务器，发件人：发件人代理）。这是一个 gmail 代理的示例。

* * *

```
sender: establishes a connection
me: 220 Welcome
sender: HELO agent id
me: 250 Fine
sender: MAIL FROM:<address@gmail.com>
me (after address verification): 250
sender: QUIT
me: 221 
```

* * *

相关代码片段（完整类代码位于[http://code.google.com/p/sd-mail-server-claudiani-ferrari/source/browse/src/controller/smtp/SMTPCommandHandler.java?repo=mailserver](http://code.google.com/p/sd-mail-server-claudiani-ferrari/source/browse/src/controller/smtp/SMTPCommandHandler.java?repo=mailserver)）

```
private void MAILCommand(CommunicationHandler communicationHandler, 
                         BufferedOutputStream writer, 
                         PersistanceManager persistanceManager, 
                         String clientId, 
                         String argument) 
{
    String address = getAddressFromArgument(argument);
    if (!isValidAddress(address, persistanceManager)) {
        communicationHandler.sendResponse(writer, 
                                          SMTPCode.SYNTAX_ERROR.toString(), 
                                          "Address is not valid.");
        return;
    }

    // Initialize data
    persistanceManager.create(StorageLocation.SMTP_TEMP_MESSAGE_STORE, 
                              FieldName.getSMTPTempTableFromFieldOnly(), 
                              clientId, address);

    communicationHandler.sendResponse(writer, SMTPCode.OK.toString(), "");

}

private void RCPTCommand(CommunicationHandler communicationHandler, 
                         BufferedOutputStream writer, 
                         PersistanceManager persistanceManager, 
                         String clientId, 
                         String argument) 
{
    String address = getAddressFromArgument(argument);
    // Check the address
    if (!isValidAddress(address, persistanceManager)) {
        communicationHandler.sendResponse(writer, 
                                          SMTPCode.SYNTAX_ERROR.toString(), 
                                          "Address is not valid.");
        return;
    }

    persistanceManager.addToSet(StorageLocation.SMTP_TEMP_MESSAGE_STORE, 
                                clientId, 
                                FieldName.SMTP_TEMP_TO_ADDRESSES, 
                                address);

    communicationHandler.sendResponse(writer, SMTPCode.OK.toString(), "");
}

private void DATACommand(CommunicationHandler communicationHandler, 
                         BufferedOutputStream writer, 
                         PersistanceManager persistanceManager, 
                         String clientId) 
{
    communicationHandler.sendResponse(writer, 
                                      SMTPCode.INTERMEDIATE_REPLY.toString(), 
                                      "Start mail input; end with [CRLF].[CRLF]");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:12:52.560

您是否尝试过回复`250 OK`而不是 just `250`？ [RFC 2821](http://www.ietf.org/rfc/rfc2821.txt)说这应该是`MAIL FROM`一行的回复：

> 如果接受，SMTP 服务器会返回**250 OK**回复。如果邮箱规范由于某种原因不可接受，服务器必须返回一个回复，表明是否

您的邮件客户端可能会满意`250`，而 Google/Hotmail 可能会期望`250 OK`。

*编辑*

我认为在这种情况下文本字符串不是可选的，请参阅[RFC 2821](http://www.ietf.org/rfc/rfc2821.txt)的第 4.2 节：

> 除非本文档另有说明，否则SMTP 回复由一个三位数字（作为三个数字字符传输）*后跟一些文本组成。*

当前的[RFC 5321](https://www.rfc-editor.org/rfc/rfc5321#section-4)建议客户端不应该接受任何文本：

> SMTP 客户端必须仅通过回复代码而不是文本来确定其操作（“地址更改”251 和 551 以及必要时的 220、221 和 421 回复除外）；在一般情况下，任何文本， **包括根本没有文本**（*尽管发件人不应该发送裸代码*），都必须是可以接受的。回复代码后面的空格（空白）被视为文本的一部分。只要有可能，接收方 SMTP 应该测试回复代码的第一个数字（严重性指示）。

# objective-c - NSControl 和 sendActionsForControlEvents 的种类

> ID：12535555
> 
> 赞同：2
> 
> 时间：2012-09-21T17:46:58.413
> 
> 标签：objective-c, macos, cocoa

我有一个问题...为 NSControl 寻找与 sendActionsForControlEvents（来自 iOS UIControl）类似的方法？

Mac有类似的东西吗？我需要获取有关更改自定义开关状态的信息。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T23:16:19.953

只需为您的交换机提供 IBAction，并从 sender 参数中获取交换机的状态。

# jquery - 在焦点上更改占位符文本

> ID：12535559
> 
> 赞同：6
> 
> 时间：2012-09-21T17:47:51.470
> 
> 标签：jquery, html, input, placeholder

当输入成为焦点时，是否有一个简单的解决方案来更改占位符文本？例如：

```
<input type="text" placeholder="Join our mailing list!"> 
```

会变成这样：

```
<input type="text" placeholder="enter your email address..."> 
```

当输入处于活动状态时。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-21T17:51:20.027

```
$('input').focus(function() {
    $(this).attr('placeholder', 'enter your email address...')
}).blur(function() {
    $(this).attr('placeholder', 'Join our mailing list!')
}) 
```

[http://jsfiddle.net/ByLGs/](http://jsfiddle.net/ByLGs/)

*   [属性](http://api.jquery.com/attr/)
*   [重点](http://api.jquery.com/focus/)
*   [模糊](http://api.jquery.com/blur/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T17:53:28.227

您已将此标记为“jQuery”，因此我假设您愿意使用它。这是一个简单的方法：

```
<input type="text" placeholder="Join our mailing list!" title="enter your email address...">​ 
```

```
$('input').on('focus', function(){
    $(this).data('placeholder', $(this).attr('placeholder')); // Store for blur
    $(this).attr('placeholder', $(this).attr('title'));
}).on('blur', function(){
    $(this).attr('placeholder', $(this).data('placeholder'));
});​ 
```

演示：http: [//jsfiddle.net/m6j8m/](http://jsfiddle.net/m6j8m/)

这可以缩短，但你明白了。这样您就不必跟踪 javascript 中的属性值，它都在 HTML 中，因此它是一种万能的解决方案。如果 using`title`不适合您的需求，您可以使用`data-`属性或其他属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-26T17:25:12.783

您可以使用自定义属性“数据”来交换内容：

```
<input type="text" placeholder="Join our mailing list!" data-focus-placeholder="enter your email address..." class="focus-placeholder">​ 
```

然后，您需要一个 JavaScript 函数来交换 focus 和 focusout 的属性

```
jQuery('.focus-placeholder').on('focus focusout',function(){

    focusPlaceholder    = jQuery(this).attr('data-focus-placeholder');
    placeholder         = jQuery(this).attr('placeholder');

    jQuery(this).attr('placeholder', focusPlaceholder);
    jQuery(this).attr('data-focus-placeholder', placeholder);
}); 
```

更多关于数据属性：[https ://www.w3schools.com/tags/att_global_data.asp](https://www.w3schools.com/tags/att_global_data.asp)

# javascript - JavaScript 和 CSS 的集成

> ID：12535562
> 
> 赞同：0
> 
> 时间：2012-09-21T17:48:25.603
> 
> 标签：javascript, html, css

我想知道是否可以在 CSS 代码中使用 javascript 变量。我想实现这样的东西

```
p{
font-size: size;
} 
```

其中，变量大小的值将定义为，

```
var size=document.getElementById("first").fontSize; 
```

这两个代码将写入同一个文件并保存为“somefile.css”。这对于在不支持或禁用 javascript 的浏览器中使用非常有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:50:10.820

不，你不能那样做，CSS 中没有变量。

但是您可以从 javascript 更改您的样式：

```
var items = document.querySelectorAll('.someClass');
for (var i=0; i<items.length; i++) {items[i].style.font = "100px Arial"};​​​​​​​​ 
```

[演示](http://jsfiddle.net/qyunj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:50:08.467

您不能在 CSS 中嵌入变量。它不是一种脚本语言。

IE 对此有一些专有支持，但它不是“规范”的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T17:51:07.233

等等等等，所以你正在尝试实现 JavaScript “在不支持 [it] 的浏览器中使用”？想想你在这里问什么。

只设置字体大小有什么问题？有些人使用`em`单位按与文本大小成比例的比例缩放元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T17:51:28.447

如果你想要这种功能，你应该使用[LESS](https://encrypted.google.com/url?sa=t&rct=j&q=less%20css&source=web&cd=1&cad=rja&ved=0CCIQFjAA&url=http://lesscss.org/&ei=9ahcUPO-Ncr2iQKiv4DQDA&usg=AFQjCNF-GHR66GftFm9aMGmUFpVKsYvD7A&sig2=-e2tragBiQIQeysiziNALA)或[SASS](https://encrypted.google.com/url?sa=t&rct=j&q=sass%20css&source=web&cd=1&cad=rja&ved=0CB8QFjAA&url=http://sass-lang.com/&ei=-qhcUMCyHMn9iwK8kYCYDw&usg=AFQjCNGj26Uvw2Xaq_ZQbByTuIQsbFtzjA&sig2=NpbuGJbruG0t0SLHZXIu4w)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T17:51:34.180

您可以查看 LESS/SASS。

[http://coding.smashingmagazine.com/2011/09/09/an-introduction-to-less-and-comparison-to-sass/](http://coding.smashingmagazine.com/2011/09/09/an-introduction-to-less-and-comparison-to-sass/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T17:54:49.767

最简洁的答案是不。但是，您可以使用 php 或您喜欢的任何其他语言在服务器端执行这些操作，您必须在文件顶部将 mime 类型设置为 css。如果 javascript 不运行，您将不得不使用页面重定向。

# smt - 使用 jsmtlib 返回未知的未饱和/未饱和

> ID：12535568
> 
> 赞同：0
> 
> 时间：2012-09-21T17:49:01.343
> 
> 标签：smt

按照[本教程](http://www.grammatech.com/resources/smt/jSMTLIBTutorial.pdf)，我尝试了本教程中的第一个示例。

```
(set-option :print-success false)
(set-logic QF_UF)
(declare-fun p () Bool)
(assert (and p (not p)))
(check-sat)
(exit) 
```

我执行了这个命令

```
java -jar jsmtlib.jar test1.smt 
```

`unknown`不像`unsat`教程中那样。

这可能有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:30:27.287

我需要指定我使用什么求解器。我选择了[yices](http://yices.csl.sri.com)作为服务器，使用yices `java -jar jsmtlib.jar --solver yices --exec ./yices test1.smt`，一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T17:58:11.627

我相信这`jsmtlib.jar`是 SMT 求解器的某种包装器。“未知”的答案与 Z3 无关。您应该`jsmtlib.jar`就这个问题联系作者。

你试过直接用Z3吗？它`unsat`为此脚本返回。您可以在线试用 Z3： [http ://rise4fun.com/Z3/chyM](http://rise4fun.com/Z3/chyM)

我们也有在线教程： [http ://rise4fun.com/Z3/tutorial/guide](http://rise4fun.com/Z3/tutorial/guide)

您也可以在您的机器上下载并安装 Z3： [http ://research.microsoft.com/en-us/um/redmond/projects/z3/download.html](http://research.microsoft.com/en-us/um/redmond/projects/z3/download.html)

# django - 带有 Azure Blob 存储的 Django Celery 不存储 ImageField 的图像文件

> ID：12535569
> 
> 赞同：0
> 
> 时间：2012-09-21T17:49:02.870
> 
> 标签：django, azure, storage, celery, imagefield

我已经实现了 Celery 任务，它从 Web 下载图像文件并将带有元数据的图像文件存储到数据库中。
实际上，我使用的是 Django `ImageFieldModel`，因此元数据存储在数据库中，文件存储在 Azure Blob 存储中。

它在演示环境中运行良好。图像文件存储在与工作人员相同的物理位置的文件系统中。

但是，它在部署环境中存在问题。文件存储是 Azure Blob 存储。

有时，不存储 Imagefile。元数据在数据库中排序。

有谁知道为什么会这样。

我如何存储图像文件非常简单。

```
new_contents = ImageContents(user = user, privacy = privacy)

new_contents.thumb_file.save('filename.jpeg', thumb_file, save = True)

new_contents.save() 
```

我已经为 Azure Blob 存储实现了 django-storage。

这是在 django 应用程序中打开文件的代码：

```
 def _open(self, name, mode='rb'):

    inMemFile = StringIO.StringIO(self.blob.get_blob(self.container, name))
    inMemFile.name = name
    inMemFile.mode = mode

    return File(inMemFile) 
```

# substring - 子字符串代码错误 - Powershell

> ID：12535570
> 
> 赞同：0
> 
> 时间：2012-09-21T17:49:04.513
> 
> 标签：substring, powershell-2.0

我在下面的代码中遇到错误。我正在尝试在文本文件中提取超过 180 个字符的行并将它们解析为新行。我必须从第二部分中取出前 22 个字符并将其放入，因为它包含行中需要的初始数据：

```
$data = get-content "C:\TestFile.txt"
$strAcct= @()
$strPart1= @()
$strPart2= @()
$strLength= @()
foreach($line in $data)
{
   if ( $line.length -gt 181)
   { $strLength = $line.length
     $strAcct += $line.substring(0,22) 
     $strPart1 += $line.substring(0,180)
     $strPart2 += $line.substring(181,$strLength)

     Add-Content "C:\TestFile-Output.txt" $strPart1
     Add-Content "C:\TestFile-Output.txt" $strAcct $strPart2

   } 
   Else {
   Add-Content "C:\TestFile-Output.txt" $line

   }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:51:44.373

子字符串需要一个索引，以及从该索引开始的字符数。您的第三个子字符串炸弹，因为您试图获取比字符串中更多的字符。将其更改为 $strLength - 181，或者，您可以完全省略第二个参数，只取从第一个参数中的索引开始的其余字符串。

改变这个：

```
$line.substring(181, $strLength) 
```

对此：

```
$line.substring(181) 
```

甚至这个：

```
$line.substring(181, $strLength - 181) 
```

# asp.net-mvc - Lambda 表达式左连接

> ID：12535571
> 
> 赞同：0
> 
> 时间：2012-09-21T17:49:08.107
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, lambda

我正在阅读此[http://jcmartialarts.co.uk/CSharp/Using-Lambda-Expressions-To-LEFT-JOIN-Tables/43](http://jcmartialarts.co.uk/CSharp/Using-Lambda-Expressions-To-LEFT-JOIN-Tables/43)但我无法弄清楚如何做我想做的事。我有这个表达：

```
Dim myData = db.Tbl_Exercises.Where(Function(x) x.Exercise_Employee_ID) 
```

我的`Tbl_Exercise`模型有一个`Exercise_Type_ID`. 我想使用该 ID 从我的`Tbl_Exercise_Type`模型中获取锻炼描述的类型，该模型具有`ExType_Desc`我想在我的应用程序中使用的属性（代替`Tbl_Exercise.Exercise_Type_ID`）。

我怎样才能做到这一点？

**编辑：**

这是我的模型：

```
Public Class Tbl_Exercise

    <Key()> Public Property Exercise_ID() As Integer
    Public Property Exercise_Employee_ID() As Integer
    Public Property Exercise_Create_Date() As Date
    <ForeignKey("Tbl_Exercise_Type")>
    Public Property Exercise_Type_ID() As Integer
    Public Property Exercise_Duration() As Integer

    Public Overridable Property Tbl_Exercise_Type As Tbl_Exercise_Type

End Class

Public Class Tbl_Exercise_Type

    <Key()> Public Property ExType_ID() As Integer
    Public Property ExType_Desc() As String
    Public Property Exercise_Create_Date() As Date

    Public Overridable Property Tbl_Exercise() As ICollection(Of Tbl_Exercise)

End Class

Public Class ExerciseDbContext
    Inherits DbContext

    Public Property Tbl_Exercises As DbSet(Of Tbl_Exercise)
    Public Property Tbl_Exercise_Types As DbSet(Of Tbl_Exercise_Type)

End Class 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:28:07.363

请参阅下面的翻译。

* * *

```
// C#
var OrderItems = Orders.GroupJoin(Items, o => o.OrderId, i => i.OrderId, (o, i) => new {o, i}); 
```

```
' VB.NET
Dim OrderItems = Orders.GroupJoin(Items, Function( o ) o.OrderId, Function ( i ) i.OrderId, Function( o, i ) New With {o, i}) 
```

* * *

```
// C#
var Item = OrderItems.SelectMany(oi => oi.i.DefaultIfEmpty(), (o,i) => new {o.o, i}); 
```

```
' VB.NET
Dim Item = OrderItems.SelectMany( Function( oi ) oi.i.DefaultIfEmpty(), Function ( o, i ) New With { o.o, i } ) 
```

* * *

```
// C#
var Qty = Item.Select(oi => oi.i.Qty); 
```

```
' VB.NET
Dim Qty = Item.Select( Function( oi ) oi.i.Qty ) 
```

* * *

```
// C#
var Item = OrderItems.SelectMany(oi => oi.i.DefaultIfEmpty(), (o,i) => new {o.o.OrderDate, i.Qty}); 
```

```
' VB.NET
Dim Item = OrderItems.SelectMany( Function( oi ) oi.i.DefaultIfEmpty(), Function( o, i ) New With { o.o.OrderDate, i.Qty } ) 
```

* * *

**完整样本**

```
Class Order

    Private _orderId As Integer
    Public Property OrderId() As Integer
        Get
            Return _orderId
        End Get
        Set(ByVal value As Integer)
            _orderId = value
        End Set
    End Property

End Class

Class Item

    Private _orderId As Integer
    Public Property OrderId() As Integer
        Get
            Return _orderId
        End Get
        Set(ByVal value As Integer)
            _orderId = value
        End Set
    End Property

    Private _qty As Integer
    Public Property Qty() As Integer
        Get
            Return _qty
        End Get
        Set(ByVal value As Integer)
            _qty = value
        End Set
    End Property

End Class

Module Module1

    Sub Main()

        Dim Orders = New Order() { _
            New Order With {.OrderId = 1}, _
            New Order With {.OrderId = 2}, _
            New Order With {.OrderId = 3} _
        }

        Dim Items = New Item() { _
            New Item With {.OrderId = 1, .Qty = 1}, _
            New Item With {.OrderId = 3, .Qty = 1}, _
            New Item With {.OrderId = 4, .Qty = 1} _
        }

        Dim OrderItems = Orders.GroupJoin(Items, Function(o) o.OrderId, Function(i) i.OrderId, Function(o, i) New With {o, i})
        Dim Item = OrderItems.SelectMany(Function(oi) oi.i.DefaultIfEmpty(), Function(o, i) New With {o.o, i})
        Dim Qty = Item.Select(Function(oi) oi.i.Qty)
        ' Dim Item = OrderItems.SelectMany(Function(oi) oi.i.DefaultIfEmpty(), Function(o, i) New With {o.o.OrderDate, i.Qty})
    End Sub

End Module 
```

# c++ - 时间：2019-05-10 标签：c++vector 错误 C2664

> ID：12535573
> 
> 赞同：-1
> 
> 时间：2012-09-21T17:49:16.110
> 
> 标签：c++, string, vector

我对字符串数组有一些问题[C++ 数组大小不同的结果](https://stackoverflow.com/questions/12534890/c-array-size-different-result)我得到了使用向量而不是数组的建议。但这有效：

```
#include "stdafx.h"
#include <string>
#include <iostream>
#include <vector>

using namespace std;

vector<int> a (1,2);

void test(vector<int> a)
{
    cout << a.size(); 
}
int _tmain(int argc, _TCHAR* argv[])
{
     test(a);

    return 0;
} 
```

但这不会：

```
vector<string> a ("one", "two");

void test(vector<string> a)
{
    cout << a.size(); 
}
int _tmain(int argc, _TCHAR* argv[])
{
     test(a);

    return 0;
} 
```

**错误 C2664:** 'std::basic_string<_Elem,_Traits,_Ax>::basic_string(const std::basic_string<_Elem,_Traits,_Ax> &)' : 无法将参数 1 从 'const char' 转换为 'const std:: basic_string<_Elem,_Traits,_Ax> &'

我不明白出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:55:31.007

第一个是调用一个构造函数`(N, X)`，它创建 N 个元素，每个元素的值都是 X，所以你最终得到一个 2。

第二个构造函数没有匹配项，因为没有两个`const char *`或类似的。

改用 curlies，因为初始化列表匹配（至少在 C++11 中）：

```
std::vector<int> v{1, 2}; //contains a 1 and a 2
std::vector<std::string> v2{"hi", "bye"}; //contains "hi" and "bye" 
```

在 C++03 中，您可以这样做：

```
int vecInit[] = {1, 2, 3, 4};
std::vector<int> vec(vecInit, vecInit + sizeof vecInit / sizeof vecInit[0]); 
```

您最终会将数组中的项目复制到向量中以对其进行初始化，因为您使用了带有两个迭代器的构造函数，其中的指针是随机访问的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T17:55:39.330

for 的构造函数`vector`不采用项目列表，它采用单个项目和一个计数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T18:03:22.837

`std::vector`有几个构造函数。其中一个期望元素数量作为第一个参数，元素值作为第二个参数。

如果`vector<int> a (1,2)`您使用 1 个元素初始化向量 a，其值为 2。

如果`vector<string> a ("one", "two");`编译器无法将第一个参数转换为 int （或任何其他预期作为其他构造函数的第一个参数的类型）。

作为一种解决方法，您可以尝试以下方法：

```
std::string ch[] = {"one", "two"};
std::vector<std::string> a (ch, ch + _countof(ch)); 
```

这将填充`a`两个字符串：`"one"`和`"two"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T18:16:34.403

the first parameter of the constructors of vector is the number of elements, and the second is the value of these elements.

`vector<int>a (1,2)` means 1 element which value is 2, but there's no constructors of vector matching `vector<string> a("one","two")`.

# assembly - 仅使用 sll 和 srl 确保最左边的 16 位为零？

> ID：12535574
> 
> 赞同：-1
> 
> 时间：2012-09-21T17:49:19.333
> 
> 标签：assembly, mips

我试图想出一种方法来确保寄存器的最左边 16 位为零，而不影响最右边的 16 位，仅使用 sll 和 srl 。

我已经玩了几个小时了，但没有成功。我能够确保最左边的位为零，但我不能在不影响最右边的位的情况下这样做，只使用 sll/srl。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T18:00:46.970

首先是 16。这导致右 16 为零，右 16 位被移入左 16 位。然后 srl 16。这会将您想要的 16 位移回最右边的 16 位，并将零移到最左边的 16 位。

# php - file_get_contents 未保存到数组

> ID：12535576
> 
> 赞同：0
> 
> 时间：2012-09-21T17:49:25.940
> 
> 标签：php, file-get-contents

我的代码中有一个部分使用 file_get_contents 从给定网页中获取 url。我的代码中还有一个部分用于扫描数组中每个链接值的标题。我希望最终有一个类似于此的数组：

```
Array(
  Google => array(
    [title] => Google
    [link] => http://www.google.com
  )
) 
```

但是没有值保存到我的数组中，即使我无法检测到任何错误

```
$links = Array();

$URL = 'http://www.theqlick.com'; // change it for urls to grab  
$file = file_get_contents($URL);
// grabs the urls from URL 
if( strlen( $file )>0 ) {
    $links[] = preg_match_all( "/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/", $file, $links);
}

function Titles() {
    global $links;
    $str = implode('',array_map('file_get_contents',$links));
    error_reporting(E_ERROR | E_PARSE);

    $titles = Array();
    if( strlen( $str )>0 ) {
        $titles[] = preg_match_all( "/\<title\>(.*)\<\/title\>/", $str, $title );
        return $title;   
        return $links;
    } 
}
$newArray = array();

$j = 0;

foreach( $links as $key => $val ){
    $newArray[$key] = array( 'link' => $val, 'title' => $title[1][$j++]);
}

print_r($newArray); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:58:25.590

以下代码似乎没有返回任何内容

```
$links[] = preg_match_all( "/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/", $file, $links); 
```

尝试以下

```
$links = Array();

$URL = 'http://www.theqlick.com'; // change it for urls to grab
$file = file_get_contents($URL);
// grabs the urls from URL
if (strlen($file) > 0) {
    $links[] = preg_match_all('#\bhttps?://[^\s()<>]+(?:\([\w\d]+\)|([^[:punct:]\s]|/))#', $file, $links);
}

var_dump($links); 
```

输出

```
array
  0 => 
    array
      0 => string 'http://www.w3.org/TR/xhtmll/DTD/xhtmll-transitional.dtd' (length=55)
      1 => string 'http://www.w3.org/1999/xhtml' (length=28)
      2 => string 'http://www.theqlick.com' (length=23)
      3 => string 'http://www.theqlick.com' (length=23)
  1 => 
    array
      0 => string 'd' (length=1)
      1 => string 'l' (length=1)
      2 => string 'm' (length=1)
      3 => string 'm' (length=1)
  2 => int 4 
```

# c++ - C++ 强制转换为不完整类型

> ID：12535578
> 
> 赞同：1
> 
> 时间：2012-09-21T17:49:29.767
> 
> 标签：c++, types, casting

我想使用一个指针（ _ref ）指向不同的类类型。为了使用它，我必须将它转换为所寻址的类型。我不能这样做，因为第 5 行的类型不完整。如果我将 B 的定义移到第 5 行，则需要定义 A 类。

```
#include <iostream>
#include <vector>
#include <string>

class B;

class A{
    void *_ref;
    std::string _reft;
public:
    void setref(A &a){
        _ref=&a;
        _reft=typeid(a).name();
    }
    void setref(B &b){
        _ref=&b;
        _reft=typeid(b).name();
    }
    void test(){
        if(_ref && _reft==std::string(typeid(B).name())){
            std::cout<<"Ref to B: ";
            static_cast<B*>(_ref)->test(); //error here
        }
    }
};

class B{
    std::vector<A> a;
public:
    A A(int i){
        return a[i];
    }
    void test(){
        std::cout<<"IT WORKS!";
    }
};

int main(){
    A a;
    B b;
    a.setref(b);
    a.test();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:53:53.703

将需要`B`完成的功能的实现移出类；把它放在一个源文件中，或者`inline`在定义之后`B`：

```
class A{
    // ...
    void test();
};

class B{
    // ...
};

inline void A::test(){
    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:52:51.620

如果您使用指针而不是引用，您将能够做到这一点。

您需要更改函数定义以使用指针而不是引用。

然后在调用函数时使用对象的地址。

# php - 有没有办法使用 SimpleXMLElement 将 XML 文件中的所有结果解析为 PHP 数组/循环？

> ID：12535579
> 
> 赞同：0
> 
> 时间：2012-09-21T17:49:35.617
> 
> 标签：php, xml

我正在尝试用 php 阅读这个 XML 文档。

[https://raw.github.com/yosoyadri/GeoNames-XML-Builder/master/continents-countries-statesprovinces.xml](https://raw.github.com/yosoyadri/GeoNames-XML-Builder/master/continents-countries-statesprovinces.xml)

这就是我到目前为止所知道的。

```
$xml = new SimpleXMLElement(file_get_contents(TEMPLATEPATH.'/lib/regions.xml'));
echo $xml->Children[0]->SimpleGeoName[0]->Id; 
```

我不知道如何遍历所有国家并使用 php 存储它们。我对 xml 解析真的很陌生，我什至不确定我是否能够遍历所有这样的结果。因为`$xml->Children->..`返回空。

任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:21:52.193

这就是你循环的方式`xml`

```
echo "<pre>";
$xml = new SimpleXMLElement(file_get_contents("regions.xml"));
foreach ( $xml->Children as $region ) { // iterate through all the regions
    foreach ( $region as $continent ) {
        echo "Continet ID :", $continent->Id . PHP_EOL;
        echo "Continet Name :", $continent->Name . PHP_EOL;

        echo PHP_EOL;

        foreach ( $continent->Children as $countryList ) {
            foreach ( $countryList as $country ) {
                // var_dump($country);
                echo "\tCountry ID :", $country->Id . PHP_EOL;
                echo "\tCountry Name  :", $country->Name . PHP_EOL;

                echo PHP_EOL;
            }
        }
    }
} 
```

输出

```
Continet ID :6255146
Continet Name :Africa

    Country ID :2589581
    Country Name  :Algeria

    Country ID :3351879
    Country Name  :Angola

    Country ID :2395170
    Country Name  :Benin

    Country ID :933860
    Country Name  :Botswana

    Country ID :2361809
    Country Name  :Burkina Faso

    Country ID :433561
    Country Name  :Burundi

    Country ID :2233387
    Country Name  :Cameroon

    Country ID :3374766
    Country Name  :Cape Verde

    Country ID :239880
    Country Name  :Central African Republic

    Country ID :2434508
    Country Name  :Chad

    Country ID :921929
    Country Name  :Comoros

    Country ID :203312
    Country Name  :Congo

    Country ID :223816
    Country Name  :Djibouti

    Country ID :357994
    Country Name  :Egypt

    Country ID :2309096
    Country Name  :Equatorial Guinea

    Country ID :338010
    Country Name  :Eritrea

    Country ID :337996
    Country Name  :Ethiopia

    Country ID :2400553
    Country Name  :Gabon

    Country ID :2413451
    Country Name  :Gambia

    Country ID :2300660
    Country Name  :Ghana

    Country ID :2420477
    Country Name  :Guinea

    Country ID :2372248
    Country Name  :Guinea-Bissau

    Country ID :2287781
    Country Name  :Ivory Coast

    Country ID :192950
    Country Name  :Kenya

    Country ID :932692
    Country Name  :Lesotho

    Country ID :2275384
    Country Name  :Liberia

    Country ID :2215636
    Country Name  :Libya

    Country ID :1062947
    Country Name  :Madagascar

    Country ID :927384
    Country Name  :Malawi

    Country ID :2453866
    Country Name  :Mali

    Country ID :2378080
    Country Name  :Mauritania

    Country ID :934292
    Country Name  :Mauritius

    Country ID :1024031
    Country Name  :Mayotte

    Country ID :2542007
    Country Name  :Morocco

    Country ID :1036973
    Country Name  :Mozambique

    Country ID :3355338
    Country Name  :Namibia

    Country ID :2440476
    Country Name  :Niger

    Country ID :2328926
    Country Name  :Nigeria

    Country ID :2260494
    Country Name  :Republic of the Congo

    Country ID :49518
    Country Name  :Rwanda

    Country ID :935317
    Country Name  :RÃ©union

    Country ID :3370751
    Country Name  :Saint Helena

    Country ID :2245662
    Country Name  :Senegal

    Country ID :241170
    Country Name  :Seychelles

    Country ID :2403846
    Country Name  :Sierra Leone

    Country ID :51537
    Country Name  :Somalia

    Country ID :953987
    Country Name  :South Africa

    Country ID :7909807
    Country Name  :South Sudan

    Country ID :366755
    Country Name  :Sudan

    Country ID :934841
    Country Name  :Swaziland

    Country ID :2410758
    Country Name  :SÃ£o TomÃ© and PrÃ­ncipe

    Country ID :149590
    Country Name  :Tanzania

    Country ID :2363686
    Country Name  :Togo

    Country ID :2464461
    Country Name  :Tunisia

    Country ID :226074
    Country Name  :Uganda

    Country ID :2461445
    Country Name  :Western Sahara

    Country ID :895949
    Country Name  :Zambia

    Country ID :878675
    Country Name  :Zimbabwe

Continet ID :6255152
Continet Name :Antarctica

    Country ID :6697173
    Country Name  :Antarctica

    Country ID :3371123
    Country Name  :Bouvet Island

    Country ID :1546748
    Country Name  :French Southern Territories

    Country ID :1547314
    Country Name  :Heard Island and McDonald Islands

    Country ID :3474415
    Country Name  :South Georgia and the South Sandwich Islands

Continet ID :6255147
Continet Name :Asia

    Country ID :1149361
    Country Name  :Afghanistan

    Country ID :174982
    Country Name  :Armenia

    Country ID :587116
    Country Name  :Azerbaijan

    Country ID :290291
    Country Name  :Bahrain

    Country ID :1210997
    Country Name  :Bangladesh

    Country ID :1252634
    Country Name  :Bhutan

    Country ID :1282588
    Country Name  :British Indian Ocean Territory

    Country ID :1820814
    Country Name  :Brunei

    Country ID :1831722
    Country Name  :Cambodia

    Country ID :1814991
    Country Name  :China

    Country ID :2078138
    Country Name  :Christmas Island

    Country ID :1547376
    Country Name  :Cocos [Keeling] Islands

    Country ID :614540
    Country Name  :Georgia

    Country ID :1819730
    Country Name  :Hong Kong

    Country ID :1269750
    Country Name  :India

    Country ID :1643084
    Country Name  :Indonesia

    Country ID :130758
    Country Name  :Iran

    Country ID :99237
    Country Name  :Iraq

    Country ID :294640
    Country Name  :Israel

    Country ID :1861060
    Country Name  :Japan

    Country ID :248816
    Country Name  :Jordan

    Country ID :1522867
    Country Name  :Kazakhstan

    Country ID :285570
    Country Name  :Kuwait

    Country ID :1527747
    Country Name  :Kyrgyzstan

    Country ID :1655842
    Country Name  :Laos

    Country ID :272103
    Country Name  :Lebanon

    Country ID :1821275
    Country Name  :Macao

    Country ID :1733045
    Country Name  :Malaysia

    Country ID :1282028
    Country Name  :Maldives

    Country ID :2029969
    Country Name  :Mongolia

    Country ID :1327865
    Country Name  :Myanmar [Burma]

    Country ID :1282988
    Country Name  :Nepal

    Country ID :1873107
    Country Name  :North Korea

    Country ID :286963
    Country Name  :Oman

    Country ID :1168579
    Country Name  :Pakistan

    Country ID :6254930
    Country Name  :Palestine

    Country ID :1694008
    Country Name  :Philippines

    Country ID :289688
    Country Name  :Qatar

    Country ID :102358
    Country Name  :Saudi Arabia

    Country ID :1880251
    Country Name  :Singapore

    Country ID :1835841
    Country Name  :South Korea

    Country ID :1227603
    Country Name  :Sri Lanka

    Country ID :163843
    Country Name  :Syria

    Country ID :1668284
    Country Name  :Taiwan

    Country ID :1220409
    Country Name  :Tajikistan

    Country ID :1605651
    Country Name  :Thailand

    Country ID :298795
    Country Name  :Turkey

    Country ID :1218197
    Country Name  :Turkmenistan

    Country ID :290557
    Country Name  :United Arab Emirates

    Country ID :1512440
    Country Name  :Uzbekistan

    Country ID :1562822
    Country Name  :Vietnam

    Country ID :69543
    Country Name  :Yemen

Continet ID :6255148
Continet Name :Europe

    Country ID :783754
    Country Name  :Albania

    Country ID :3041565
    Country Name  :Andorra

    Country ID :2782113
    Country Name  :Austria

    Country ID :630336
    Country Name  :Belarus

    Country ID :2802361
    Country Name  :Belgium

    Country ID :3277605
    Country Name  :Bosnia and Herzegovina

    Country ID :732800
    Country Name  :Bulgaria

    Country ID :3202326
    Country Name  :Croatia

    Country ID :146669
    Country Name  :Cyprus

    Country ID :3077311
    Country Name  :Czech Republic

    Country ID :2623032
    Country Name  :Denmark

    Country ID :453733
    Country Name  :Estonia

    Country ID :2622320
    Country Name  :Faroe Islands

    Country ID :660013
    Country Name  :Finland

    Country ID :3017382
    Country Name  :France

    Country ID :2921044
    Country Name  :Germany

    Country ID :2411586
    Country Name  :Gibraltar

    Country ID :390903
    Country Name  :Greece

    Country ID :719819
    Country Name  :Hungary

    Country ID :2629691
    Country Name  :Iceland

    Country ID :2963597
    Country Name  :Ireland

    Country ID :3175395
    Country Name  :Italy

    Country ID :831053
    Country Name  :Kosovo

    Country ID :458258
    Country Name  :Latvia

    Country ID :3042058
    Country Name  :Liechtenstein

    Country ID :597427
    Country Name  :Lithuania

    Country ID :2960313
    Country Name  :Luxembourg

    Country ID :718075
    Country Name  :Macedonia

    Country ID :2562770
    Country Name  :Malta

    Country ID :617790
    Country Name  :Moldova

    Country ID :2993457
    Country Name  :Monaco

    Country ID :3194884
    Country Name  :Montenegro

    Country ID :2750405
    Country Name  :Netherlands

    Country ID :3144096
    Country Name  :Norway

    Country ID :798544
    Country Name  :Poland

    Country ID :2264397
    Country Name  :Portugal

    Country ID :798549
    Country Name  :Romania

    Country ID :2017370
    Country Name  :Russia

    Country ID :3168068
    Country Name  :San Marino

    Country ID :6290252
    Country Name  :Serbia

    Country ID :3057568
    Country Name  :Slovakia

    Country ID :3190538
    Country Name  :Slovenia

    Country ID :2510769
    Country Name  :Spain

    Country ID :607072
    Country Name  :Svalbard and Jan Mayen

    Country ID :2661886
    Country Name  :Sweden

    Country ID :2658434
    Country Name  :Switzerland

    Country ID :690791
    Country Name  :Ukraine

    Country ID :2635167
    Country Name  :United Kingdom

    Country ID :3164670
    Country Name  :Vatican City

    Country ID :661882
    Country Name  :Ã…land

Continet ID :6255149
Continet Name :North America

    Country ID :3573511
    Country Name  :Anguilla

    Country ID :3576396
    Country Name  :Antigua and Barbuda

    Country ID :3577279
    Country Name  :Aruba

    Country ID :3572887
    Country Name  :Bahamas

    Country ID :3374084
    Country Name  :Barbados

    Country ID :3582678
    Country Name  :Belize

    Country ID :3573345
    Country Name  :Bermuda

    Country ID :7626844
    Country Name  :Bonaire

    Country ID :3577718
    Country Name  :British Virgin Islands

    Country ID :6251999
    Country Name  :Canada

    Country ID :3580718
    Country Name  :Cayman Islands

    Country ID :3624060
    Country Name  :Costa Rica

    Country ID :3562981
    Country Name  :Cuba

    Country ID :7626836
    Country Name  :Curacao

    Country ID :3575830
    Country Name  :Dominica

    Country ID :3508796
    Country Name  :Dominican Republic

    Country ID :3585968
    Country Name  :El Salvador

    Country ID :3425505
    Country Name  :Greenland

    Country ID :3580239
    Country Name  :Grenada

    Country ID :3579143
    Country Name  :Guadeloupe

    Country ID :3595528
    Country Name  :Guatemala

    Country ID :3723988
    Country Name  :Haiti

    Country ID :3608932
    Country Name  :Honduras

    Country ID :3489940
    Country Name  :Jamaica

    Country ID :3570311
    Country Name  :Martinique

    Country ID :3996063
    Country Name  :Mexico

    Country ID :3578097
    Country Name  :Montserrat

    Country ID :3617476
    Country Name  :Nicaragua

    Country ID :3703430
    Country Name  :Panama

    Country ID :4566966
    Country Name  :Puerto Rico

    Country ID :3578476
    Country Name  :Saint BarthÃ©lemy

    Country ID :3575174
    Country Name  :Saint Kitts and Nevis

    Country ID :3576468
    Country Name  :Saint Lucia

    Country ID :3578421
    Country Name  :Saint Martin

    Country ID :3424932
    Country Name  :Saint Pierre and Miquelon

    Country ID :3577815
    Country Name  :Saint Vincent and the Grenadines

    Country ID :7609695
    Country Name  :Sint Maarten

    Country ID :3573591
    Country Name  :Trinidad and Tobago

    Country ID :3576916
    Country Name  :Turks and Caicos Islands

    Country ID :4796775
    Country Name  :U.S. Virgin Islands

    Country ID :6252001
    Country Name  :United States

Continet ID :6255151
Continet Name :Oceania

    Country ID :5880801
    Country Name  :American Samoa

    Country ID :2077456
    Country Name  :Australia

    Country ID :1899402
    Country Name  :Cook Islands

    Country ID :2170371
    Country Name  :Coral Sea Islands Territory

    Country ID :1966436
    Country Name  :East Timor

    Country ID :2205218
    Country Name  :Fiji

    Country ID :4030656
    Country Name  :French Polynesia

    Country ID :4043988
    Country Name  :Guam

    Country ID :4030945
    Country Name  :Kiribati

    Country ID :2080185
    Country Name  :Marshall Islands

    Country ID :2081918
    Country Name  :Micronesia

    Country ID :2110425
    Country Name  :Nauru

    Country ID :2139685
    Country Name  :New Caledonia

    Country ID :2186224
    Country Name  :New Zealand

    Country ID :4036232
    Country Name  :Niue

    Country ID :2155115
    Country Name  :Norfolk Island

    Country ID :4041468
    Country Name  :Northern Mariana Islands

    Country ID :1559582
    Country Name  :Palau

    Country ID :2088628
    Country Name  :Papua New Guinea

    Country ID :4030699
    Country Name  :Pitcairn Islands

    Country ID :4034894
    Country Name  :Samoa

    Country ID :2103350
    Country Name  :Solomon Islands

    Country ID :2077507
    Country Name  :Territory of Ashmore and Cartier Islands

    Country ID :4031074
    Country Name  :Tokelau

    Country ID :4032283
    Country Name  :Tonga

    Country ID :2110297
    Country Name  :Tuvalu

    Country ID :5854968
    Country Name  :U.S. Minor Outlying Islands

    Country ID :2134431
    Country Name  :Vanuatu

    Country ID :4034749
    Country Name  :Wallis and Futuna

Continet ID :6255150
Continet Name :South America

    Country ID :3865483
    Country Name  :Argentina

    Country ID :3923057
    Country Name  :Bolivia

    Country ID :3469034
    Country Name  :Brazil

    Country ID :3895114
    Country Name  :Chile

    Country ID :3686110
    Country Name  :Colombia

    Country ID :3658394
    Country Name  :Ecuador

    Country ID :3474414
    Country Name  :Falkland Islands

    Country ID :3381670
    Country Name  :French Guiana

    Country ID :3378535
    Country Name  :Guyana

    Country ID :3437598
    Country Name  :Paraguay

    Country ID :3932488
    Country Name  :Peru

    Country ID :3382998
    Country Name  :Suriname

    Country ID :3439705
    Country Name  :Uruguay

    Country ID :3625428
    Country Name  :Venezuela 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:00:19.067

`SimpleXMLElement`并不是那么简单，事实上只有当你*猜测*如何处理它时它才会变得*简单......或者有人建议你。*

 *假设`regions.xml`是这样的：

```
<regions>
    <region id="01" size="big">
        New Zealand
    </region>
    <region id="02" size="small">
        Tokelau
    </region>
</regions> 
```

以下 PHP 代码可以浏览该 XML 文档：

```
$xml = new SimpleXMLElement('regions.xml');
foreach ($xml->region as $region) { // iterate through all the regions
    echo 'Region ID: '. (string)$region['id']; // get the attribute id
    echo 'Region size: '. (string)$region['size']; // get the attribute size
    echo 'Region name: '. (string)$region; // get the contents of the
                                           // element by casting it to a string
} 
```

现在让我们做一些更难的事情......假设`<region>`有一个子元素，`<subregion>`。

```
<regions>
    <region id="01" size="big">
        <name>USA</name>
        <subregion id="01_1">Alaska</subregion>
    </region>
    ...
</regions> 
```

如果要获取每个区域的所有子区域，则必须这样做：

```
$xml = new SimpleXMLElement('regions.xml');
foreach ($xml->region as $region) { // iterate through all the regions
    foreach ($region->subregion as $subregion) // iterate trough the subregion of $region
       // do something
    }
} 
```

您的文档结构似乎比这复杂一点，但使用这些基础知识您可以轻松解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T17:54:54.533

您的 xml 值现在是一个 php 对象。你可以跑

```
var_dump($xml);
exit; 
```

这将打印出发送给您的任何极其复杂的 xml 对象结构。然后，您将能够查看要在哪个子对象上运行 foreach 循环以获得仅包含国家/地区名称的列表。祝你好运。*

# svg - Raphael.js 到 SVG 的路径

> ID：12535583
> 
> 赞同：0
> 
> 时间：2012-09-21T17:49:45.563
> 
> 标签：svg, raphael

我在 wikipedia 上看到了 SVG 图像，您可以在记事本中打开并找到其中编写的代码。我的问题是，如果我在 raphael 中画一个圆圈，我可以在浏览器中将其显示为 svg 图像吗？

```
var p = paper.circle(10,10,10).attr({fill:'blue'}); 
```

然后在我的浏览器中将其显示为 svg 图像。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T02:26:13.603

这仅适用于支持 SVG 的浏览器。我认为它在 IE9 上也失败了，因为它不提供支持`.serializeToString()`（尽管对此有垫片）。

```
window.onload = function () {
  var paper = Raphael("container", 100, 100);
  var p = paper.circle(10,10,10).attr({fill:'blue'});
  var textarea = document.getElementById("code")
  var serializer = new XMLSerializer();
  textarea.value = serializer.serializeToString(paper.canvas);
};​ 
```

在此处查看演示：http: [//jsfiddle.net/BvWkU/](http://jsfiddle.net/BvWkU/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-16T13:29:26.650

```
window.onload = function () {
  var paper = Raphael("container", 100, 100);
  var p = paper.circle(10,10,10).attr({fill:'blue'});
  var textarea = document.getElementById("code")
  var serializer = new XMLSerializer();
  textarea.value = serializer.serializeToString(paper.canvas);
};​ 
```

# extend - 扩展 DropDownList 以添加 ListSearchExtender

> ID：12535584
> 
> 赞同：1
> 
> 时间：2012-09-21T17:49:50.097
> 
> 标签：extend, html.dropdownlistfor

我想扩展 DropDownList 以添加 ListSearchExtender。

使用下面的代码，该控件在运行时运行良好，但在设计时它给了我这个错误：

> SearchDropDownList - DdlTest 呈现控件时出错。页面不能为空。请确保在 ASP.NET 请求的上下文中执行此操作。

我想了解此错误的原因。

```
[ToolboxData("<{0}:SearchDropDownList runat=\"server\"></{0}:SearchDropDownList>")]
public class SearchDropDownList : DropDownList
{
    private ListSearchExtender listSearchExt = new ListSearchExtender();
    protected override void OnInit(EventArgs e)
    {
        ReloadSettings();
    }

    protected override void Render(HtmlTextWriter w)
    {
        base.Render(w);
        listSearchExt.RenderControl(w);
    }

    public void ReloadSettings()
    {
        listSearchExt.TargetControlID = this.ID;
        listSearchExt.ID = this.ID + "_CalendarExtender";

        if (Controls.Count > 0)
        {
            foreach (Control item in Controls)
            {
                if (item.ID == listSearchExt.ID)
                {
                    Controls.Remove(item);
                }
            }
        }
        Controls.Add(listSearchExt);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:46:41.373

我通过简单的方式得到它我不确定它是否会在未来出现问题但现在它运作良好

```
 protected override void Render(HtmlTextWriter w)
    {
        base.Render(w);
        if (!this.DesignMode)
        {
            listSearchExt.RenderControl(w);
        }
    } 
```

# ios - ios - 在单击按钮之前不会呈现视图

> ID：12535587
> 
> 赞同：0
> 
> 时间：2012-09-21T17:49:59.720
> 
> 标签：ios

我正在开发一个小型 ios 应用程序，但我正在努力解决一个奇怪的问题。我有一个视图，在视图中我有一个按钮和一些图像。图像以异步方式加载。该视图是隐藏的，并且最初不是 ViewController 的一部分。

当用户单击按钮时，我会实例化视图并将其添加为子视图。添加子视图时，仅渲染部分图像（通常是前两个，共 25 个）。但是，当我单击视图上的任何按钮时，突然间所有其他图像都出现了。

什么可能导致这个问题？为什么只有单击按钮时才呈现图像？（按钮在其事件处理程序中没有代码）。

应用超时可解决此问题。我不明白为什么：

```
-(void) viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    [NSThread sleepForTimeInterval:0.1];
} 
```

我尝试过提供代码示例，但似乎无法将其最小化为一个简单的示例。

# java - 如何在 Java Swing 中使用我的触控板进行水平鼠标滚轮滚动

> ID：12535590
> 
> 赞同：3
> 
> 时间：2012-09-21T17:50:07.780
> 
> 标签：java, swing, mousewheel, scrollpane

根据[如何在 Java AWT ScrollPane 中使用我的触控板进行水平鼠标滚轮滚动](https://stackoverflow.com/questions/2843314/how-to-use-my-trackpad-for-horizontal-mousewheel-scrolling-in-a-java-awt-scroll)，应该能够通过 Trackpoint 水平滚动。但它只适用于我。我正在使用 Debian Wheezy，并在 OpenJDK 1.7 和 Sun Java 6 上进行了尝试。这是 MWE（来自上面的链接）

```
import java.awt.*;
import javax.swing.*;

public class ScrollExample extends JPanel { 

        public void paint(Graphics g) {

                super.paint(g);

                g.setColor(Color.green);
                g.fillOval(0,0,400, 400);

        }

        public static void main(String[] args) {

                JFrame f = new JFrame ("Scroll Example");
                ScrollExample p = new ScrollExample();
                p.setPreferredSize(new Dimension(1000, 1000));

                JScrollPane scroller = new JScrollPane(p,JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
                scroller.getHorizontalScrollBar().setUnitIncrement(10);
                scroller.getVerticalScrollBar().setUnitIncrement(10);

                f.setPreferredSize(new Dimension(500,500));
                f.add (scroller,BorderLayout.CENTER);
                f.pack();
                f.show();
        }
} 
```

# jquery - axis.extremes.userMin & userMax undefined on redraw with multiple charts

> ID：12535594
> 
> 赞同：0
> 
> 时间：2012-09-21T17:50:21.217
> 
> 标签：jquery, highcharts, javascript, highstock

我正在尝试在移动**highstock**滑块时绘制**饼图。**

 **起初一切都很好，我得到了 highStock's `axis.extremes.userMin`&的值，`userMax`正如预期的那样

## 代码

```
 var extremes = chart.xAxis[0].getExtremes();
    console.log(extremes);
    console.log(chart.xAxis[0]);
    console.log("userMin = " + extremes.userMin);
    console.log("userMax = " + extremes.userMax); 
```

但是，一旦绘制了饼图，我就会得到高于`undefined`控制台中的值。什么可能导致这种情况或者我怎样才能得到`userMin`/ `userMax`？

**[jsFiddle 演示](http://jsfiddle.net/Z8nZr/1/)**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T19:46:19.773

您似乎正在覆盖您的`chart`变量。[为饼图和股票图表使用不同的变量。](http://jsfiddle.net/Z8nZr/36/)

在您的情况下，您也可以[在处理程序中](http://api.highcharts.com/highstock#chart.events.redraw)[使用`this``chart.events.redraw`](http://api.highcharts.com/highstock#chart.events.redraw)指向当前（甚至正在处理的）图表。[演示@jsFiddle](http://jsfiddle.net/Z8nZr/35/)

```
redraw: function (event) {
    if (this.xAxis) {
        var extremes = this.xAxis[0].getExtremes();    
        console.log(extremes);
        console.log(chart.xAxis[0]);
        console.log("userMin = " + extremes.userMin);
        console.log("userMax = " + extremes.userMax);
        drawPie();

    }
} 
```

* * *

处理用例的更好或更正确的方法是将处理程序附加到[`xAxis.events.setExtremes`](http://api.highcharts.com/highstock#xAxis.events.setExtremes)事件而不是`chart.events.redraw`事件，因为您想在滑块的幻灯片上执行某些操作。

如文档中所述，事件对象包含新的最小值和最大值`event.min`，`event.max`并`this`表示处理程序内的轴。
这就是您的代码的样子

```
 xAxis: [
            {
            events: {
                setExtremes: function(event) {
                        console.log(this);
                        console.log("userMin = " + event.min);
                        console.log("userMax = " + event.max);
                        drawPie();                       
                }
            }}
        ], 
```

[处理滑块事件@jsFiddle](http://jsfiddle.net/jugal/3Vypa/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:02:07.743

看起来您在将数据分配给系列之前正在调用 console.log 。

在您已经将数据分配给系列之后，您能否尝试调用 console.log ？

```
series : [{
            name : 'AAPL',
            data : data,
            tooltip: {
                valueDecimals: 2
            }
        }] 
```

在调用 console.log 之前提及这一点**

# xml - Shiro 不断重定向到登录页面

> ID：12535596
> 
> 赞同：2
> 
> 时间：2012-09-21T17:50:24.463
> 
> 标签：xml, jsp, shiro

我正在尝试在我的网络应用程序中实现 shiro，无论我尝试什么，我都会遇到这个问题。我已经看过[Shiro 总是将我重定向到 login.jsp](https://stackoverflow.com/questions/10033929/shiro-always-redirects-me-to-login-jsp)和[http://mail-archives.apache.org/mod_mbox/shiro-user/201204.mbox/%3CCAETPiXbFDzOZnj4qOaRXgMv57NisN1xk9wfCGaO+vPM5hR5j3A@mail.gmail.com%3E](http://mail-archives.apache.org/mod_mbox/shiro-user/201204.mbox/%3CCAETPiXbFDzOZnj4qOaRXgMv57NisN1xk9wfCGaO+vPM5hR5j3A@mail.gmail.com%3E)没有成功。

这是我的相关代码：

shiro.ini：

```
[main]
authc.loginUrl = /public/login.jsp

authc.usernameParam = user
authc.passwordParam = pass
authc.rememberMeParam = remember

authc.successUrl = /private/other.xhtml

authc.failureKeyAttribute=LoginFailure

[users]
admin=admin,ROLE_ADMIN

[roles]
ROLE_ADMIN=*

[urls]
/public/login.jsp=authc
/private/**=authc 
```

登录.jsp：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Please Log In</title>
</head>
<body>
<%
  String errorDescription = (String) request.getAttribute("LoginFailure");
  if (errorDescription!=null) {
%>
Login attempt was unsuccessful: <%=errorDescription%>
<%
  }
%><form name="loginform" action="" method="post">
    <table align="left" border="0" cellspacing="0" cellpadding="3">
        <tr>
            <td>Username:</td>
            <td><input type="text" name="user" maxlength="30"></td>
        </tr>
        <tr>
            <td>Password:</td>
            <td><input type="password" name="pass" maxlength="30"></td>
        </tr>
        <tr>
            <td colspan="2" align="left"><input type="checkbox" name="remember"><font size="2">Remember Me</font></td>
        </tr>
        <tr>
            <td colspan="2" align="right"><input type="submit" name="submit" value="Login"></td>
        </tr>
    </table>
</form>
</body>
</html> 
```

网页.xml：

```
<welcome-file-list>
    <welcome-file>/index.xhtml</welcome-file>
</welcome-file-list>

<filter>
    <filter-name>securityFilter</filter-name>
    <filter-class>org.apache.shiro.web.servlet.IniShiroFilter</filter-class>
    <init-param>
        <param-name>configPath</param-name>
        <param-value>classpath:shiro.ini</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>securityFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>INCLUDE</dispatcher>
    <dispatcher>ERROR</dispatcher>
</filter-mapping> 
```

即使我输入了正确的登录信息，我也会不断被重定向回 l​​ogin.jsp。

# ruby - 如何将多个字符串变量更改为整数和负1？

> ID：12535597
> 
> 赞同：0
> 
> 时间：2012-09-21T17:50:24.447
> 
> 标签：ruby

我想将 8 个字符串更改为整数类型并减去 1。我将代码编写为：

```
foo1, foo2, too3 ... = foo1.to_i - 1, foo2.to_i - 1, foo3.to_i -1, ... 
```

但我认为这太复杂了。有没有更好的方法来实现这个目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:00:38.100

```
[:foo1, :foo2, ... etc. ...].each { |foo| eval "#{foo} = #{foo}.to_i - 1" } 
```

虽然如果你决定这样做是个坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:55:55.860

你不应该使用它， eval 是危险的和动态的。我建议将您的值移动到可以控制键的散列中。如果你想按照你的要求做：

```
(1..2).map {|n | eval("foo#{n}").to_i - 1} 
```

例子：

```
> foo1 = 2
=> 2
> foo2 = 3
=> 3
> (1..2).map {|n | eval("foo#{n}").to_i - 1}
=> [1, 2] 
```

...存储/处理这些值的非可怕方式：

```
> hash = { :foo1 => 2, :foo2 => 3 }
=> {:foo1=>2, :foo2=>3}
hash.keys.inject({}) { |h, key| h[key] = hash[key].to_i - 1; h }
=> {:foo1=>1, :foo2=>2} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T19:24:24.860

当您使用 8 个变量并需要对它们执行相同的操作时，通常意味着它们以某种方式链接并且可以分组，例如在哈希中：

```
data = {:foo1 => "1", :foo2 => "2", ...}
data2 = Hash[data.map { |key, value| [key, value.to_i - 1] }] 
```

请注意，我不是更新就地值，而是创建一个新对象，功能方法通常更清晰。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T23:37:05.957

根据您对@Winfields 解决方案的评论，这可能就足够了：

```
foo1 = "123"
foo2 = "222"
too3 = "0"
def one_less_int(*args) # the splat sign (#) puts all arguments in an array
 args.map{|str| str.to_i-1}
end
p one_less_int(foo1, foo2, too3) #=> [122, 221, -1] 
```

但是，正如其他人所建议的那样，预先将所有内容放在一个数组中更为明确。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T07:21:13.267

将它们放在一个数组中将是最简单的事情。

```
%w{ 1 2 3 4 5 6 7 8 }.map!(&:to_i).map!(&:pred)
=> [0, 1, 2, 3, 4, 5, 6, 7] 
```

# github - 在 GitHub wiki 中搜索关键字

> ID：12535602
> 
> 赞同：24
> 
> 时间：2012-09-21T17:50:51.163
> 
> 标签：github, wiki

我想在 GitHub wiki 上搜索任何提及特定关键字的内容。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-08-11T12:38:29.107

您可以在浏览器中安装[GitHub Wiki Search用户脚本。](https://github.com/linyows/github-wiki-search)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-22T08:05:50.827

2012：

我不知道支持该功能的本地 GitHub 搜索。

我通常使用 Google 搜索，例如在此示例中，我在 Gitolite 文档页面中搜索**[VREF](https://stackoverflow.com/questions/11510046/gitolite-update-hook-exclude-a-repository/11517112#11517112)** [： https ://www.google.com/search?q=vref+site%3Agitolite.com%2Fgitolite%2F](https://www.google.com/search?q=vref+site%3Agitolite.com%2Fgitolite%2F)

我使用 " `site:`" 搜索选择器将搜索限制在网站的特定子域（如 wiki）：

```
vref site:user.github.io/aRepo/ 
```

但这不适用于 wiki（2021 年 10 月仍然如此）。

我发现通过克隆所说的 wiki 进行本地搜索更容易：

```
git clone https://github.com/user/yourRepo.wiki 
```

（取您的 repo 的名称，并添加一个“ `.wiki`”以访问与该 wiki 关联的 git repo）。

* * *

2021 年 10 月更新：Google 搜索仍然无法用于 GitHub wiki 页面！
请参阅[此讨论](https://github.com/github/feedback/discussions/4992#discussioncomment-1439485)和[`github/docs`PR 10836](https://github.com/github/docs/pull/10836)

[Daniel Adams](https://github.com/dipree)（项目经理@microsoft & @github）补充道：

> 我们有意`Disallow: /*/wiki*`将`robots.txt`.
> 
> **但是，我们还在`x-robots-tag: none`Wiki 页面的 http 响应标头中**引入了一个。
> **因此，搜索引擎爬虫仍然看不到 Wiki**。
> 
> 我们为什么这样做？
> 
> Wiki 中的滥用行为对我们的搜索引擎排名产生了负面影响，因此我们必须将 Wiki 排除在爬网之外以减轻影响。
> 我们现在正在研究如何重新打开大门，以便每个人都可以从 Wiki 中记录的大量信息中受益。
> 在这一点上，我们尚未决定是否或何时允许再次抓取 Wiki，但我们正在积极审查这一点，并将随时向您发布任何更新。

* * *

2022 年 1 月：[`github/feedback`讨论 4992](https://github.com/github/feedback/discussions/4992)：“允许搜索引擎索引 Github wiki”建议：

> 当前的标准似乎是“**仅限合作者编辑**”，以及某种用户/组织的总星数。
> 
> 也就是说，这里和那里都有一些不符合总星数要求的奇怪的落后者，所以我不知道那里发生了什么。
> 在大约 400k 中，大约有 1.2k wiki 符合这个粗略标准。
> 
> [https://docs.google.com/spreadsheets/d/1_W9s8IhnSoypXjTKYSRBK5CNPTQJfXRl7V_1mY0Xq28/edit#gid=905984022](https://docs.google.com/spreadsheets/d/1_W9s8IhnSoypXjTKYSRBK5CNPTQJfXRl7V_1mY0Xq28/edit#gid=905984022)
> 
> 惊人的！这是一个开始，但希望 GitHub 能扩展这个列表。

# javascript - 这是 Javascript 中枚举的可行实现吗？

> ID：12535603
> 
> 赞同：-1
> 
> 时间：2012-09-21T17:50:51.280
> 
> 标签：javascript, enums, closures, enumerable

我对我正在处理的项目的常量值的快速枚举很感兴趣，但是如果您只想将几个不变的值存储在一个地方以便您可以重用，那么我在 StackOverflow 上找到的所有内容都过于复杂了他们。他们还使用对象，这意味着您可以更改它们的值，或者您必须了解并使用可能未在浏览器中实现的“冻结”关键字。

在这里明显使用闭包是个坏主意吗？也许我使用它们太多了，但似乎它们在任何地方都能派上用场。尤其是这里。

```
var black = new Color3f(0, 0, 0);
var white = new Color3f(1, 1, 1);
var blue = new Color3f(0, 0, 1);

var Colors = {

    //insert basic stuff for Color3f objects here

    BLACK: function(){
        return black;
    },

    //and so on
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:15:51.357

对象不能在 JavaScript 中创建闭包，因为它们从不创建变量范围。

要使用闭包，你会做这样的事情。

```
var color = (function() {

    var color_map = {
        black: new Color3f(0, 0, 0),
        white: new Color3f(1, 1, 1),
        blue: new Color3f(0, 0, 1)
    };

    return function(c) { return color_map[c.toLowerCase()]; };
})(); 
```

然后调用该`color`函数来获取颜色。

```
color("black"); 
```

请注意，立即调用外部函数，而内部函数是分配给`color`变量的函数。

此外，您可能希望将所有代码包装在另一个函数中以防止任何类型的修改。

```
(function() {
    var color = (function() {
        var color_map = {
            black: new Color3f(0, 0, 0),
            white: new Color3f(1, 1, 1),
            blue: new Color3f(0, 0, 1)
        };

        return function(c) { return color_map[c.toLowerCase()]; };
    })();

    // the rest of your code
    alert(color("black"));
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:52:06.867

不需要额外的全局变量：

```
var Colors = {

    //insert basic stuff for Color3f objects here

    BLACK: new Color3f(0, 0, 0),

    //and so on
}; 
```

# c++ - 无法在 C 中运行 Microsoft 的 API 放大功能

> ID：12535605
> 
> 赞同：0
> 
> 时间：2012-09-21T17:51:06.177
> 
> 标签：c++, windows

我从这个页面获取：http: [//msdn.microsoft.com/en-us/library/ms692402%28v=vs.85%29.aspx#initializing_the_magnifier_run-time_library](http://msdn.microsoft.com/en-us/library/ms692402%28v=vs.85%29.aspx#initializing_the_magnifier_run-time_library)

此函数示例：

```
BOOL SetZoom(float magnificationFactor)
{
    // A magnification factor less than 1.0 is not valid.
    if (magnificationFactor < 1.0)
    {
        return FALSE;
    }

    // Calculate offsets such that the center of the magnified screen content 
    // is at the center of the screen. The offsets are relative to the 
    // unmagnified screen content.
    int xDlg = (int)((float)GetSystemMetrics(
            SM_CXSCREEN) * (1.0 - (1.0 / magnificationFactor)) / 2.0);
    int yDlg = (int)((float)GetSystemMetrics(
            SM_CYSCREEN) * (1.0 - (1.0 / magnificationFactor)) / 2.0);

    return MagSetFullscreenTransform(magnificationFactor, xDlg, yDlg);
} 
```

我刚刚做了 - 复制 - 粘贴到 Dev-C++

但是当我编译这段代码时，我得到一个错误：

```
'BOOL' does not name a type 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:02:03.843

首先，错误信息告诉你编译器不知道是什么`BOOL`意思。这不是 C++ 中的内置关键字。Windows 程序经常使用`BOOL`，因为它是在`windows.h`头文件中定义的。为了使用它，你必须有`#include`这个文件。

为了进一步解释，给出的示例代码并不意味着是一个完整的程序。为了编译和运行它，缺少几个部分：

1.  你需要`#include <windows.h>`。

2.  你需要一个`main()`或一个`WinMain()`函数来告诉计算机你的程序从哪里开始。通常`WinMain()`用于 Windows 程序并且通常包含一个循环来启动事件处理。

3.  （可选）`WinProc()`如果要处理事件并创建 UI，则需要一个函数。

这假定使用 WinAPI。如果你想改用 MFC，你需要类似的设置代码，但我不熟悉细节。使用 WinAPI 或 MFC 进行编程相当复杂。在进入这个领域之前，您首先需要了解 C 和/或 C++ 语言的来龙去脉。

# c# - 使用 Kendo Grid 内联创建新记录 如何更新新记录的密钥 ID？

> ID：12535608
> 
> 赞同：3
> 
> 时间：2012-09-21T17:51:19.487
> 
> 标签：c#, jquery, asp.net-mvc, grid, kendo-ui

在我的 Kendo Grid 中，我有默认的“添加新记录”按钮，并将其设置为可内联编辑。我设法将记录插入到数据库中，但是当用户对这条新记录进行更新时，它丢失了 ID。

我的代码如下所示：

```
var dataSource = new kendo.data.DataSource(
{
    transport: {
        read: {
            url: '/Reports/Manage/Reports'
        },
        create: {
            url: function (options) {
                debugger;
                // Ajax call to create a new record in the database
                $.ajax(
                    {
                        type: 'POST',
                        url: '/Reports/Manage/CreateNewReport',
                        data: { name: options.name },
                        success: function (response) { 
```

我必须在这里做点什么吗？？？

```
 return;
                        },
                        error: function (repsonse) {
                            alert("Manage: CreateNewReport -> Ajax Error!");
                        }
                    });
                return;
            },
            dataType: "json"
        },
        update: {
            url: function (options) {
                // Ajax call to update the Report Name in the database.
                $.ajax(
                    {
                        type: 'POST',
                        url: '/Reports/Manage/UpdateReportName',
                        data: { reportId: options.reportId, name: options.name },
                        success: function (response) {
                            // do nothing
                            // alert("Successfully Saved Note.");
                        },
                        error: function (repsonse) {
                            alert("Manage: UpdateReportName -> Ajax Error!");
                        }
                    });
                return;
            },
            dataType: "json"
        }
    },
    pageSize: 15,
    height: 500,
    data: reports,
    schema:
    {
        model:
        {
            id: 'reportId',
            fields:
            {
                name: { editable: true, validation: { required: true } },
            }
        }
    }
});

$reports.kendoGrid(
{
    dataSource: dataSource,
    pageable: {
        refresh: true,
        pageSizes: true
    },
    toolbar: ["create"],
    columns:
    [
        { field: 'name', title: 'Report', sortable: true },
        { command: ["edit", "destroy"], title: "&nbsp;", width: "180px", }
    ],
    editable: "inline",
    selectable: true,
    change: function (e) {
        // A new report was selected.
        ...
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T07:04:53.190

您应该从服务器返回新创建项目的 ID。检查服务器响应是什么：http: //demos.kendoui.c​​om/web/grid/ [editing-inline.html](http://demos.kendoui.com/web/grid/editing-inline.html)

您还应该使用内置的传输配置。如果您像这样劫持 url 函数，DataSource 不会知道服务器响应。这就是我的意思：

```
transport: {
   create: {
      url: "/Reports/Manage/CreateNewReport",
      type: "POST"
   },
   parameterMap: function(options, type) {
      if (type == "create") {
          return {
             reportId: options.reportId, 
             name: options.name
          };
      }
      return options;
   }
} 
```

有几个完整的示例展示了如何实现 CRUD：

*   [https://github.com/telerik/kendo-examples-asp-net-mvc](https://github.com/telerik/kendo-examples-asp-net-mvc)
*   [https://github.com/telerik/kendo-examples-asp-net](https://github.com/telerik/kendo-examples-asp-net)

# xcode - 操作无法完成。错误的文件描述符

> ID：12535613
> 
> 赞同：2
> 
> 时间：2012-09-21T17:51:46.183
> 
> 标签：xcode, compiler-errors, xcode4.2, osx-snow-leopard

我在尝试使用 xcode 4.2 将其提交到 mac 应用商店之前验证我的应用时遇到此错误

当我尝试从 xcode 4.3 上传应用程序时，它很合适。

是否有可能从 mac 上传应用程序，因此 x 10.7 将不兼容 10.6。

为什么会出现这个错误？

# javascript - 带有日期的条目，循环并为每个日期制作图表

> ID：12535617
> 
> 赞同：0
> 
> 时间：2012-09-21T17:52:00.920
> 
> 标签：javascript

我在一个多数组中有 700 个条目，每个条目都有一个日期。

我必须将它们分类到不同的日期，因此 700 个条目可能只有 15 个唯一日期。

问题是我不知道是否有 7 个或 28 个唯一日期。

那么我如何遍历所有条目并将它们推送到特定日期的数组中，然后是 foreach 日期。

**我知道如何在 PHP 中做到这一点。它看起来像这样：**

```
$dates = array();
foreach($entry in $entries){
    $date = $entry['date'];
    $dates[$date] = $emtry;
}
foreach($day in $dates){
    foreach($entry in $day){
         echo $entry['title'];
    }
} 
```

你如何在 Javascript 中做到这一点？

因为不可能将字符作为数组键..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:03:50.000

JS 版本会是这样的：

```
var dates = [];
for (entry in entries){
    date = entry['date'];
    dates[date] = entry;
}
for (day in dates){
    for (entry in day){
         document.writeln (entry['title']);
    }
} 
```

# php - 在 PHP 中根据数据库列名自动命名数组元素

> ID：12535623
> 
> 赞同：0
> 
> 时间：2012-09-21T17:52:17.133
> 
> 标签：php, mysql, arrays, json, encode

我想创建一个数组然后通过 JSON 编码，现在我根据列名手动命名数组元素，如果它的列数很少，但如果它是 1000 列。有没有办法自动命名数组元素？

马上：

```
$resulta = mysql_query("SELECT bla,bla1bla2 from ..."); 
$toEncodeArray = array();
if($resulta) 
{
 while($columna = mysql_fetch_array($resulta)) 
 {
  $toEncodeArray[] = array(
   "bla" => $columna['bla'], 
   "bla1" => $columna['bla1'],
    ...
  );
 }
} 
```

想要类似的东西：

```
while($columna = mysql_fetch_array($resulta)) 
{
 $toEncodeArray[] = array(<same name as column> => $columna[<iterate columns?]);
} 
```

仅使用 $columna = mysql_fetch_array($resulta) 然后对 $columna 进行编码会给我带来垃圾。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T17:54:12.897

只需使用[`mysql_fetch_assoc()`](http://php.net/manual/en/function.mysql-fetch-assoc.php)：

```
$res = mysql_query(...);
while( $row = mysql_fetch_assoc($res) )
{
    print_r($row);
    // or echo $row['something'];
} 
```

# c++ - 在 C++ 中调用继承的类特定函数

> ID：12535625
> 
> 赞同：2
> 
> 时间：2012-09-21T17:52:45.397
> 
> 标签：c++, boost, smart-pointers

我有以下问题。我正忙着用 C++ 编写一个继承结构。简而言之，这就是我正在尝试做的事情。A类是基类，B类和C类是继承类。类 B 和 C 各有不同且唯一的成员函数。

现在，使用 boost 智能指针库，我制作了一个类类型 A 的共享指针向量，如下所示：

```
class A{
   A();
   virtual print();
}

class B : public A{
   B();
   virtual print();
}

class C{
   C();
   virtual print();
   void uniqueFunc();
}

int main(){

  vector<shared_ptr<A> > myA;
  shared_ptr<B> myB;
  shared_ptr<C> myC;

  myA.push_back(myB);
  myA.push_back(myC);

} 
```

现在我有了一种检查向量中成员类型的方法。这不是问题。我的问题是，如何在向量中为类类型 C 的成员调用 uniqueFunc。我必须沮丧吗？还是我必须创建虚拟功能。但是，我确实需要 uniqueFunc 对类 C 是唯一的。我想避免创建成员的副本，而是直接更改向量中的成员。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T17:59:38.103

您需要向下转换`boost::shared_ptr<C>`或在`A`.

假设你想向下转换，你可以使用 Boost 的[指针转换函数](http://www.boost.org/doc/libs/release/libs/smart_ptr/pointer_cast.html)：

```
boost::static_pointer_cast<C>(myA.back())->uniqueFunc(); 
```

（或者`dynamic_pointer_cast<C>`如果您需要动态类型检查，请使用。）

# ruby-on-rails - 如何使用 Ruby on Rails 获得最受欢迎的帖子？

> ID：12535627
> 
> 赞同：0
> 
> 时间：2012-09-21T17:52:46.830
> 
> 标签：ruby-on-rails, google-analytics, gem

是否有为 ActiveRecord / Ruby on Rails 实现“最受欢迎”功能的 gem。

我有一篇模型文章，我想使用我的 Google Analytics 数据检索最受欢迎/阅读次数最多的文章。

我从头开始用 PHP 编写了这个，想知道是否有可用的 Rails 插件/gem。

谢谢，

安东

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:33:07.497

你可以在这里搜索 ruby​​gems

[http://rubygems.org/search?utf8=%E2%9C%93&query=google+analytics](http://rubygems.org/search?utf8=%E2%9C%93&query=google+analytics)

有很多宝石可以与谷歌分析集成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:38:06.120

我发现这颗宝石可以完成我需要的大部分工作。

[https://github.com/vigetlabs/garb](https://github.com/vigetlabs/garb)

# excel - Excel中概率分布的熵

> ID：12535633
> 
> 赞同：2
> 
> 时间：2012-09-21T17:52:56.527
> 
> 标签：excel, excel-formula, probability, entropy

我在excel中有一个矩阵。我需要对行进行归一化，然后计算每行的熵（将其视为概率分布）。

例如，假设我的矩阵是：

```
2   0   3   5
0   1   0   0
1   0   3   2 
```

行归一化后，矩阵变为：

```
0.2000         0    0.3000    0.5000
     0    1.0000         0         0
0.1667         0    0.5000    0.3333 
```

假设每一行是一个概率分布，每一行的熵为：

```
1.0297
     0
1.0114 
```

我想在不产生中间行归一化矩阵的情况下计算上述熵值。

是否可以在 Excel 中执行此操作？

注意：概率分布的熵定义为：

```
H(X) = sum over all x {-p(x) * log(p(x))} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T18:16:48.897

如果您在 A1:D3 中有原始矩阵，请在 F1 中尝试此公式

`=SUM(-A1:D1/SUM(A1:D1)*IF(A1:D1<>0,LN(A1:D1/SUM(A1:D1))))`

使用 CTRL+SHIFT+ENTER 确认（以便在公式栏中的公式周围出现花括号）

复制到 F3

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T17:56:21.390

假设您的熵由 x ln x 定义，我建议如下：

1.  创建一个矩阵，计算每个原始单元格的 ln(x)：IF(X>0;LN(X);0)
2.  创建第二个矩阵，将 x 和 ln(x) 矩阵相乘
3.  计算行总和：SUM(A1:A4)

不过，我不知道如何在没有中间矩阵的情况下做到这一点。你为什么要这个？

# git - 更新 Git 子模块失败

> ID：12535637
> 
> 赞同：3
> 
> 时间：2012-09-21T17:53:07.047
> 
> 标签：git, ssh, github, git-submodules

我正在尝试使用 SSH 将包含子模块的 git 存储库克隆到 Namecheap 共享服务器上。'git clone' 命令运行良好，只是我的一个子模块失败了。当我尝试运行“git submodule update”时，它也失败了。我得到了错误；

```
github.com[0: 207.97.227.239]: errno=Connection timed out
fatal: unable to connect a socket (Connection timed out)
Clone of 'git://github.com/WordPress/Wordpress.git' into submodule path 'wordpress' failed 
```

我尝试联系 Namecheap 以查看是否有防火墙或其他东西阻止了连接。他们说没有防火墙可以阻止这一点。此外，我在 GitHub 上的所有其他子模块都更新得很好。无论如何，我尝试使用 https 协议，但仍然没有运气。

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T08:18:02.597

一般来说，“ `errno=Connection timed out`”应该表示 GitHub 方面的问题（他们的[状态报告页面](https://status.github.com/)表明他们在 9 月 21 日和 20 日遇到了一些问题）

因此，除非问题仍然存在（在这种情况下，根本原因可能在您这边），否则 GitHub 现在应该已经解决了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-06T13:00:36.603

您可以使用以下命令为 GitHub 指定使用 https:// 而不是 git://：

```
git config --global url."https://github".insteadOf git://github 
```

# hadoop - MapReduce 基于三个字段的排序

> ID：12535638
> 
> 赞同：1
> 
> 时间：2012-09-21T17:53:15.960
> 
> 标签：hadoop, mapreduce

这个问题是关于 Map/Reduce 排序的。我有三个领域

```
XXID, Identifier, TimeStamp 
```

XXID 可以是任何字符串值，标识符有两个可能的值 1 或 2

我希望排序是这样的，即所有相同的 XXID 都进入同一个减速器，并且在可迭代中，具有 1 的字段首先出现在具有增加时间戳的迭代中，其次是具有 2 的字段。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T18:18:15.683

你这样做肯定违反了 mapreduce 框架，但你必须做你必须做的！

* * *

首先，排序只在键上进行。因此，您必须假设这些值将按任意顺序排列。因此，我们需要弄清楚如何获取 XXID、Identifier 和 TimeStamp，所有这些都在 key 中。（您现在可能只使用 NullWriteable 作为值）

要将这三个项目放入一个键中，您应该通过实现[WriteableComparable](http://hadoop.apache.org/docs/r1.0.3/api/org/apache/hadoop/io/WritableComparable.html)来创建一个新的数据类型。让这个新类包装这三个值，我们称之为`JavanxTriple`。

您要自定义 MapReduce 类别的项目的方式是从[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html?is-external=true)`JavanxTriple`更改`.compareTo`函数。使其首先比较 XXID，然后是 1 或 2，然后是时间戳。

* * *

接下来，您需要解决的问题是，由于这些东西都是单独的键，默认情况下数据将转到不同的 reducer。开箱即用，您将无法计算所需的数据流。要解决这个问题，您需要编写一个自定义[分区](http://hadoop.apache.org/docs/r1.0.3/api/org/apache/hadoop/mapreduce/Partitioner.html)程序。分区器告诉每个记录将去哪个reducer。为了做到这一点，你覆盖`.getPartition`. 计算`.getPartition`时，仅使用 XXID 来确定这个数字（而不是密钥的 Identifier 和 TimeStamp 部分）。他们这样，所有具有相同 XXID 的项目都被发送到同一个减速器。

* * *

最后，您现在遇到的问题是您实现 reducer 的方式不典型。reduce 每个键只会被调用一次，传入的 Iterable 中只会有一个 NullWriteable。

为了解决这个问题，在 Reducer 类中使用一些静态变量来跟踪 reduce 函数中发生的事情。您必须检测 XXID 何时更改，以便知道切换下一个分析。您可能必须使用[setup 和 cleanup](http://hadoop.apache.org/docs/stable/api/org/apache/hadoop/mapreduce/Reducer.html)方法来设置和完成。

# linux - 每个月在特定的一天运行工作（使用 anacron？）

> ID：12535640
> 
> 赞同：6
> 
> 时间：2012-09-21T17:53:30.613
> 
> 标签：linux, automation, cron

我想每月在运行 Ubuntu 12.04 的笔记本电脑上运行一次作业，比如说每月的 22 日。

由于它是一台笔记本电脑，而且我可能并不总是每个月的第 22 天都使用它，`cron`这不是一个很好的选择。

调查`anacron`，似乎有一个限制。即，您可以指定一个“期间”，但不能指定一周中的特定日期或月份中的某一天，如`anacrontab`文件格式所建议的那样：

```
# cat /etc/anacrontab
period   delay   job-identifier   command
7       15      test.daily      /bin/sh /home/myself/backup.sh 
```

我想说，如果我们在本月的第 22 天，当然笔记本电脑正在运行，请运行这项工作。如果过了 22 日并且您还没有运行该作业，请在我启动后立即运行它。

我即将做一些丑陋的事情，比如混合`cron`自`anacron`定义脚本或编写我自己的 bash 脚本，使用时间戳，可能会在此过程中重新发明方轮。

关于最佳行动方案的任何想法？

干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T18:34:07.613

每天运行命令，并让脚本记录上次执行备份的日期

当它启动时，获取当前月份的日期。如果是当月 22 日，则正常运行并保存日期。如果大于 22，并且最后一次运行是在同一个月，则退出。如果它 <22，并且最后一次运行是上个月（不要忘记考虑从 12 到 1 的换行），则退出。

日期应保存在某处的文件中。

# php - PHP，MySQL：如何在没有 RAND 的情况下选择随机记录（尝试避免 RAND()）

> ID：12535642
> 
> 赞同：0
> 
> 时间：2012-09-21T17:53:33.670
> 
> 标签：php, mysql, sql, random

> **可能重复：**
> [如何在 SQL 中请求随机行？](https://stackoverflow.com/questions/19412/how-to-request-a-random-row-in-sql)

由于表很大，我无法使用 MySQL 函数`RAND()`并试图避免使用`RAND()`这种方式：

```
$a = mysql_fetch_array(mysql_query("SELECT MIN(id), MAX(id) FROM table WHERE category_id='".$var."'"));
$id = rand($a[0],$a[1]);
$id2 = rand($a[0],$a[1]); 
```

这不起作用，因为：在`$a`我分别拥有最大和最小的ID `category_id`- 没关系。

问题带来了带有`$id`and的行`$id2`- 因为使用了最小和最大 ID 值，但是 PHP 函数`rand()`会在最小值和最大值之间取一些随机值 - 并且很有可能挑选出的记录不属于`category_id`.

所以我想问你一个方法，我该如何解决这个例子。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T18:07:53.643

你可以试试这个：

```
$row = mysql_fetch_assoc(
    mysql_query(
      "SELECT count(*) as count FROM table WHERE category_id='$var'"));

$randomrow = rand(0, $row['count'] -1);

$q = mysql_query("
  SELECT * FROM table 
  WHERE category_id='$var'
  LIMIT 1 OFFSET $randomrow"); 
```

# python - python rsa算法的修复

> ID：12535643
> 
> 赞同：1
> 
> 时间：2012-09-21T17:53:39.840
> 
> 标签：python, rsa

我正在做欧几里得算法和乘法逆的前一个线程问题，然后我明白最好发布完整的代码并做正确的问题：我正在执行 python rsa 实现并需要修复它，因为它输出错误的结果。

编码：

```
import fractions  #gcd

def generateRSAKeys(p, q):
    "Generate RSA Public and Private Keys from prime numbers p & q"

    n = p * q #is used as the modulus for both the public and private keys
    etf = (p - 1) * (q - 1) #Euler's totient function.  etf   

    # Generate a number e so that gcd(n, e) = 1, start with e = 3
    e = 3

    while 1:
        if fractions.gcd(e, etf) == 1 and 1<e and e<etf: 
            break  
        else: 
            e = e + 1 

    #e is released as the public key exponent.
    # start with a number d = etf/e will be atleast 1

    #e*d == 1%etf  #multiplicative inverse of etf   
    d = (e**(etf-2)) % etf 

    # Return a tuple of public and private keys 
    return ((n,e), (n,d))           

    #http://en.wikipedia.org/wiki/RSA_%28algorithm%29

if __name__ == "__main__":

    print "RSA Encryption algorithm...."
    p = long(raw_input("Enter the value of p (prime number):"))
    q = long(raw_input("Enter the value of q (prime number):"))

    print "Generating public and private keys...."
    (publickey, privatekey) = generateRSAKeys(p, q)

    print "Public Key (n, e) =", publickey
    print "Private Key (n, d) =", privatekey

    n, e = publickey
    n, d = privatekey

    m = 34 #some message

    print "0<m<n m=", m
    print "0<m<n n=" , n
    #then computes ciphertext c
    c = (m**e)%n
    print "Encrypted number using public key =", c
    #recovering
    m = (c**d)%n
    print "Decrypted (Original) number using private key =", m 
```

# android - 使用广播接收器作为具有清单注册的活动内部类

> ID：12535645
> 
> 赞同：3
> 
> 时间：2012-09-21T17:53:45.310
> 
> 标签：android, exception, broadcastreceiver, classnotfound

我有一个活动，其中我有一个广播接收器 (br)。如果我以编程方式注册 br，则接收器已注册并且效果很好。

但是，如果我在清单中注册接收器，我会收到 java.lang.ClassNotFoundException。

```
<receiver             
        android:name=".MyActivity.UpdateUIClass"
        android:exported="false"
        >
        <intent-filter>
            <action android:name="com.mydomain.main.FILTER_UPDATE_UI" />
            <category android:name="android.intent.category.DEFAULT" />                
        </intent-filter>
    </receiver> 
```

请指教

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T17:58:20.630

如果`UpdateUIClass`是内部类，`MyActivity`那么您需要以这种方式引用它`android:name=".MyActivity$UpdateUIClass"`

这是您在布局 XML 中执行此操作的方式。不确定这是否适用于清单，但试一试，看看它是否有效。

**编辑**

除非内部类是静态的，否则这是不可能的，因为清单会在加载时编组所有对象，而不是按需编组。在解析接收器时，承载子类的类不存在。

相关问题：[是否可以将广播接收器定义为清单文件中的内部类？](https://stackoverflow.com/questions/4391974/is-it-possible-to-define-a-broadcast-receiver-as-an-inner-class-in-manifest-file)

# ios - UIView 动画一开始就跳

> ID：12535647
> 
> 赞同：32
> 
> 时间：2012-09-21T17:53:49.700
> 
> 标签：ios, objective-c, uiviewanimation

我正在运行此代码...

```
[UIView animateWithDuration:0.2
                      delay:0.0
                    options:UIViewAnimationOptionCurveEaseOut
                 animations:^{

                     CGAffineTransform settingsTransform = CGAffineTransformMakeTranslation(self.settingsView.frame.size.width, 0);
                     CGAffineTransform speedTransform = CGAffineTransformMakeTranslation(-self.speedView.frame.size.width, 0);

                     self.settingsView.transform = settingsTransform;
                     self.speedView.transform = speedTransform;

                 } completion:nil]; 
```

但是当它运行时，视图会在相反的方向上跳跃一半的变换，然后在正确的方向上滑动到一半的位置。

我已将动画持续时间减慢到 5 秒，但最初的跳跃是瞬时的，并且一半的转换方向错误。

当我使用此代码制作动画时...

```
[UIView animateWithDuration:0.2
                      delay:0.0
                    options:UIViewAnimationOptionCurveEaseOut
                 animations:^{
                     self.settingsView.transform = CGAffineTransformIdentity;
                     self.speedView.transform = CGAffineTransformIdentity;
                 } completion:nil]; 
```

它做同样的事情。

结果是最终的移动是所需变换的一半，因为它首先在错误的方向上跳跃了一半的变换。

我真的想不通为什么会这样？

有任何想法吗。

：：编辑：：

消除一些可能的歧义。

我并不是想让这些观点“反弹”到它们所在的位置。我正在制作动画的视图就像屏幕边缘的控制面板。当用户按下“go”时，视图会滑开。当用户按下“停止”时，面板滑回视图中。

至少他们曾经如此。由于启用了自动布局（我需要应用程序的其他部分），我不能只更改视图的框架，所以我采用了转换路线。

您可以通过将视图粘贴到视图控制器和运行动画的按钮来查看此效果。

谢谢

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-10-31T01:51:14.910

我遇到了完全相同的问题，所以这是我想出的解决方案。

```
 CGAffineTransform transform = CGAffineTransformMake(1, 0, 0, 1, translation.x, translation.y);
    [UIView animateWithDuration:0.25 animations:^{
        _assetImageView.transform = transform;
        [self.view layoutIfNeeded];
    } completion:^(BOOL finished) {
    }]; 
```

所以我叫 [self.view layoutIfNeeded]; 在动画块内。没有这个，它和你有同样的问题，首先跳跃距离负平移，然后从那里动画到正确的位置。我从视图控制器调用它，所以 self 是 UIViewController 的子类。在您的情况下，“self.view”可能不存在，但我希望您明白这一点。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-03-19T00:59:50.930

这里没有一个解决方案对我有用......我的动画总是会跳过。（除非它正好在另一个动画的结尾，提示）。

**一些细节：**

执行此操作的视图具有一系列比例，并且已经在堆栈中进行了转换。

**解决方案：**

做一个关键帧动画，用一个超短的第一个键，基本上会重新应用最后一个动画应该设置的变换。

```
 UIView.animateKeyframesWithDuration(0.4, delay: 0.0, options: [.CalculationModeCubic], animations: { () -> Void in
        //reset start point
        UIView.addKeyframeWithRelativeStartTime(0.0, relativeDuration: 0.01, animations: { () -> Void in
            self.element.transform = initialTransform
        })

        UIView.addKeyframeWithRelativeStartTime(0.01, relativeDuration: 0.99, animations: { () -> Void in
            self.element.transform = finalTransform
        })
    }, completion: nil) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-02T11:09:21.613

好的，再次观看 WWDC 视频后，他们指出使用 AutoLayout 时您必须做的第一件事就是删除对 setFrame 的任何调用。

由于屏幕的复杂性，我完全删除了自动布局，现在我使用框架位置在屏幕上移动视图。

谢谢

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-03-04T08:42:59.017

我已经向 Apple 技术支持咨询了这个问题并得到了这个回复，所以这是一个错误。

> iOS 8 目前在 UIKit 动画中展示了一个已知错误，其中变换动画会错误 fromValue（主要影响动画对象的位置，使它们在动画开始时出现意外“跳跃”）。
> 
> [...]
> 
> 在提供潜在修复之前的解决方法是下拉到 Core Animation APIs 来编码你的动画。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-08-23T07:35:16.120

这是Andreas answer的改进版本关键区别在于您可以只指定一个关键帧并获得更少的代码

```
UIView.animateKeyframes(withDuration: animationDuration, delay: 0.0, options: [], animations: {
  UIView.addKeyframe(withRelativeStartTime: 0.0, relativeDuration: 1.0, animations: {
    animatedView.transform = newTransform
    })
  }, completion: nil) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-21T18:23:06.517

在此动画发生之前，您的 settingsView 或 speedView 是否已经应用了转换？

如果这些视图的转换不是身份转换（又名 CGAffineTransformIdentity，又名无转换），则您无法访问它们的 .frame 属性。

UIView 的框架属性在应用了转换时无效。改用“界限”。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-21T18:47:42.800

由于您希望您的第二个动画从您的第一个动画的当前状态开始（无论它是否完成），我建议`UIViewAnimationOptionLayoutSubviews`在设置您的第二个动画时使用该选项。

```
[UIView animateWithDuration:0.2
                      delay:0.0
                    options:UIViewAnimationOptionCurveEaseOut|UIViewAnimationOptionLayoutSubviews
                 animations:^{
                     self.settingsView.transform = CGAffineTransformIdentity;
                     self.speedView.transform = CGAffineTransformIdentity;
                 } completion:nil]; 
```

这是我使用简单视图控制器模板进行测试的代码示例：

myviewcontroller.m:

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.animatedView = [[UIView alloc] initWithFrame:CGRectMake(20, 20, 160, 80)];
    self.animatedView.backgroundColor = [UIColor yellowColor];

    [UIView animateWithDuration:0.2
                          delay:0.0
                        options:UIViewAnimationOptionCurveEaseOut|UIViewAnimationOptionLayoutSubviews
                     animations:^{
                         CGAffineTransform settingsTransform = CGAffineTransformMakeTranslation(self.animatedView.frame.size.width, 0);

                         self.animatedView.transform = settingsTransform;

                     }
                     completion:nil];
    self.buttonToTest = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    self.buttonToTest.frame = CGRectMake(90, 20, 80, 40);
    [self.buttonToTest setTitle:@"Click Me!" forState:UIControlStateNormal];
    [self.buttonToTest addTarget:self action:@selector(buttonClicked) forControlEvents:UIControlEventTouchUpInside];

    // set-up view hierarchy
    [self.view addSubview:self.buttonToTest];
    [self.view addSubview: self.animatedView];

}

- (void) buttonClicked
{
    [UIView animateWithDuration:.2
                          delay:0.0
                        options:UIViewAnimationOptionCurveEaseOut|UIViewAnimationOptionBeginFromCurrentState|UIViewAnimationOptionLayoutSubviews
                     animations:^{
                         self.animatedView.transform = CGAffineTransformIdentity;

                     }
                     completion:nil];
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-07T22:03:45.477

我遇到了这个问题并通过以下方式解决了它：

1.  隐藏原始视图
2.  添加一个临时视图，用于复制要设置动画的视图
3.  执行现在将按预期进行的动画
4.  删除临时视图并取消隐藏具有最终状态的原始视图

希望这可以帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-17T08:33:58.013

我尝试了上面关于 layoutIfNeeded 的答案，但没有奏效。我在动画块之外（之前）添加了 layoutIfNeeded，它解决了我的问题。

```
view.layoutIfNeeded()

UIView.animate(withDuration: duration, delay: 0, options: .beginFromCurrentState, animations: {
    // Animation here
}) 
```

# javascript - Javascript没有重新分配变量第二次调用函数

> ID：12535649
> 
> 赞同：0
> 
> 时间：2012-09-21T17:53:52.110
> 
> 标签：javascript, asp.net

我有一个小难题。我有一个 Jquery/Js 函数，它可以从 DropDownList 中选择项目。然后将其分配给一个变量，并将该变量传递给另一个函数。我遇到的唯一问题是，当我第一次这样做时，一切正常。当我第二次调用该函数时，变量保持不变而不是重新分配。

ddlCaseFilesNew、ddlCaseFilesOld 是我的两个 DropDownList。

这是我的功能：

```
function getCaseFiles(canMoveExpenses) {
        //create Popup with content from div
        var newCaseDdl = null;
        var oldCaseDdl = null;
        $('#ddlFiles').dialog({
            autoOpen: true,
            height: 'auto',
            width: 'auto',
            modal: true,
            buttons: {
                "Ok": function () {
                    //assign new CaseFile and old CaseFile for stored proc.
                    //var newCaseDdl = "";

                    newCaseDdl = $("#ddlCaseFilesNew").val();
                    alert("newCaseDdl = " + newCaseDdl);
                    //                      newCaseDdlInt = newCaseDdl.options[newCaseDdl.selectedIndex].value;

                    //var oldCaseDdl = "";
                    oldCaseDdl = $("#ddlCaseFilesOld").val();
                    //                        oldCaseDdlInt = oldCaseDdl.options[oldCaseDdl.selectedIndex].value;
                    alert("oldCaseDdl" + oldCaseDdl);
                    if (newCaseDdl != -1 && oldCaseDdl != -1) {
                        moveCasefile(canMoveExpenses, newCaseDdl, oldCaseDdl);
                        $(this).dialog('close');
                    }
                    else {
                        showMessage("Error. Please Select a Value From The Lists.");
                    }
                    oldCaseDdl = $("#ddlCaseFilesOld").selectedIndex = -1;
                    newCaseDdl = $("#ddlCaseFilesNew").selectedIndex = -1;
                },
                Cancel: function () {
                    newCaseDdl = null;
                    oldCaseDdl = null;
                    $(this).dialog('close');
                }
            }
        });
    } 
```

我对 Js/JQuery 有点陌生

oldCaseDdl 和 newCaseDdl 是需要更改 DropDownList 的选定索引的变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:26:28.297

想通了为什么。我从未为 DropDownList 实现过“selection_changed”。

# apache-flex - 如何将 flex 4.6 移动应用程序获取为 SWF？

> ID：12535651
> 
> 赞同：1
> 
> 时间：2012-09-21T17:53:53.320
> 
> 标签：apache-flex, flex4.5, flexbuilder, flex-mobile, flex4.6

我正在运行一个灵活的移动应用程序。目标是从同一个项目创建 SWF 文件，而无需重写新项目。

我按照这个教程 [移动 flex 到 swf](http://www.riagora.com/2011/08/flex-mobile-in-the-browser/)

但这给了我一个空白的结果，并且没有提供源代码。有什么线索吗？

问候

# javascript - 如何使用 JavaScript 以编程方式获取/设置输入标签的 OnClientClick 属性？

> ID：12535655
> 
> 赞同：0
> 
> 时间：2012-09-21T17:54:10.383
> 
> 标签：javascript, asp.net

我的页面中有一个asp.net 按钮。我想使用 JavaScript 设置和检索按钮的 OnClientClick 属性，但是当我使用显示属性的值时得到*未定义*

```
alert(printButton.OnClientClick) 
```

我使用以下代码设置 printButton 对象：

```
var printButton = args.get_item().get_cell("TemplateColumnView").getElementsByTagName('input')[0] 
```

我知道这是代码有效，因为我能够检索 printButton 的 id、src 等属性，但无法获取 OnClientClick。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T18:01:34.337

`OnClientClick`是 ASP.NET。ASP.NET 中的客户端单击事件与 JavaScript 中的单击事件相同。

使用您的`printButton`变量，在 Firefox、Chrome 和 Safari 中，它看起来像这样：

```
printButton.addEventListener(
    'click', 
    function() { 
        /* Handle the click event */ 
    }); 
```

在 IE 中：

```
printButton.attachEvent(
    'onclick', 
    function() { 
         /* Handle the click event */ 
    }); 
```

或者使用 jQuery 框架：

```
$(printButton).click(function() { 
    /* Handle the click event */ 
}); 
```

# c++ - Qt - 在 TableView 中自动组合框？

> ID：12535661
> 
> 赞同：1
> 
> 时间：2012-09-21T17:54:32.270
> 
> 标签：c++, qt

所以在我的项目中，我有一个 TableView，我在 Qt 编辑器本身中编辑了它的一些信息。我还实现了它的所有代码，当我之前运行时，我可以在 int 的位置看到一个组合框。但由于某些原因，我不得不用新的 TableView 替换该 TableView。所有代码都相同，但我现在看不到任何组合框。那么这是否意味着组合框出现在编辑器中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:06:15.003

如果您在 qt 设计器中替换了您的 TableView 并将其命名为与以前相同的名称，那么它不应该对您的类的 c++ 实现做任何事情。当你删除 TableView 时，你在 qt 设计器中输入的设置将被删除，你必须重新输入之前的设置。所以你仍然可以使用你以前的类的 c++ 实现。

我通常在 qt 设计器中设计我的 gui，然后创建一个类来设置信号/插槽并根据我的喜好初始化小部件。因此，如果您从类构造函数中设置了小部件，您就不必担心这些。

祝你好运！

# javascript - jQuery图像淡入淡出效果

> ID：12535662
> 
> 赞同：1
> 
> 时间：2012-09-21T17:54:35.107
> 
> 标签：javascript, jquery

我正在使用此代码。当它改变图像时，图像淡出，然后另一个图像淡入，同时我可以看到我不想看到的背景颜色。是否有任何简单的方法来淡化图像但同时淡入下一张图像，或者其他 jQuery 效果，如滑动图像？我只是不想看到背景颜色。

```
<script type="text/javascript">
$(document).ready(function(){
    var imgArr = new Array( // relative paths of images
        'css/images/main_img.jpg',
        'css/images/main_img_2.jpg',
        'css/images/main_img_3.jpg',
        'css/images/main_img_4.jpg',
        'css/images/main_img_5.jpg'
    );

    var preloadArr = new Array();
    var i;

    /* preload images */
    for(i = 0; i < imgArr.length; i++){
        preloadArr[i] = new Image();
        preloadArr[i].src = imgArr[i];
    }

    var currImg = 1;
    var intID = setInterval(changeImg, 6000);
    //added this so that the first image is always the first from the array
    $('#main_content').css('background','url(' + preloadArr[0].src +') top center no-repeat');
    /* Main IMG */
    function changeImg(){
        $('#main_content').animate({opacity: 0}, 1000, function(){
            $(this).css('background','url(' + preloadArr[currImg++%preloadArr.length].src +') top center no-repeat');
        }).animate({opacity: 1}, 1000);
    }
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:02:52.027

您无法仅使用一个元素来实现此效果。您需要在另一个元素之上再添加一个元素并将其淡入。一旦淡入，您可以隐藏后面的元素，但这甚至不是必需的。

请参阅此教程：http: [//bavotasan.com/2009/creating-a-jquery-mouseover-fade-effect/](http://bavotasan.com/2009/creating-a-jquery-mouseover-fade-effect/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T18:03:35.630

由于您正在更改 css 背景，因此您无法针对单个元素执行此操作。

您可以使用另一个 div 来实现这一点，该 div 将保存下一个背景图像（在您的内容淡出之前），并将使用非静态 css 位置状态和 z-index 属性放在您的#main_content 元素下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-12T05:16:22.497

在这里，我编写了使用 Jquery 创建简单的 JavaScript 淡化效果动画的代码，它可以帮助您创建很棒的图像动画。

首先添加以下脚本以导入 jquery.min.js 或者您可以自己托管此脚本。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js">
</script> 
```

这里写CSS代码

.fade 和 .fade img

```
.fade 
{ 
box-shadow:1px 1px 5px 2px #6DC83C; 
position:relative; 
width:500px; 
height: 300px; 
border-radius:19px; 
} 

.fade img 
{ 
border-radius:19px; 
position:absolute; 
left:0;
top:0; 
} 
```

并使用以下代码。

```
<script> $(function(){ $('.fade img:gt(0)').hide(); setInterval(function(){$('.fade    :first-child').fadeOut(3000).next('img').fadeIn(3000).end().appendTo('.fade');}, 4000); });    </script> 
```

然后将以下代码用于图像。

```
<div class="fade"> 
<img src="image_1.gif"> 
<img src="image_2.gif"> 
<img src="image_3.gif"> 
</div> 
```

# php - if-else 语句语法偏好

> ID：12535665
> 
> 赞同：2
> 
> 时间：2012-09-21T17:54:46.043
> 
> 标签：php, syntax

我想知道 if 语句的以下 2 种语法之间是否存在任何性能差异（对于其他循环类似 - while、for、foreach 等）：

```
 if(..) {...}
 else {...} 
```

和

```
if(..) : ...
else : ... 
endif; 
```

使用其中一个有什么优势吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T18:00:17.797

您通常在视图（模板）中使用替代语法 ( `if (condition):` `endif;`)，因为它更易于在 HTML 中阅读。例如：

```
<?php foreach ($items as $item): ?>
<article class="item">
  <h1><?php echo $item->title; ?></h1>
</article>
<?php endforeach; ?> 
```

比以下更容易阅读：

```
<?php foreach ($items as $item) { ?>
<article class="item">
  <h1><?php echo $item->title; ?></h1>
</article>
<?php } ?> 
```

特别是当您添加更多控制结构时，例如`if`等`for`。如果您在 HTML 中使用大括号，则很难区分哪个右大括号属于哪个左大括号，而使用您知道的替代语法`endif`正在寻找一个开幕词`if:`。

希望有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T17:57:12.233

没有任何。

语法样式仅用于代码的可读性。不同的组织可能更喜欢不同的风格，但对性能没有影响。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T18:00:11.423

就个人而言，我只`if():`在混合 PHP 和 HTML 时使用语法：

```
<div class="stuff">
    <?php if($a === $b): ?>
        <span>Hello</span>
    <?php else: ?>
        <input type="checkbox" />
    <?php endif; ?>
</div> 
```

我认为这看起来比 using 更好`if(){`，但是在“普通” php 代码（不与 HTML 混合）中，我使用`if(){`语法。

```
<?php
if($a === $b){
    runThisCode();
}
else{
    otherCode();
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T18:02:31.777

不，只有语法没有性能差异。我个人将第一个用于核心逻辑，并在视图中或当 php 与 html 交互或输出 html 时使用第二个示例。因为我发现在不添加`\n` `\t`.

所以除了可读性之外没有任何优势。

# c# - 有没有办法从调用堆栈中获取最后一个表单类？

> ID：12535668
> 
> 赞同：2
> 
> 时间：2012-09-21T17:54:54.237
> 
> 标签：c#, winforms, types, instance, callstack

**我有一个自定义消息框（基本上是一个 winform），它会在调用表单**的中心弹出，如下所示：

```
public partial class Form1 : Form
{
    private void button1_Click(object sender, EventArgs e)
    {
        MsgBox.Show(this, "asdsdfsdf");
    }
} 
```

在这里，我将`this`(Form1) 作为`MsgBox`. 现在我知道了 MsgBox 表单的位置，因为我也传递了父表单 ( `Form1`)。

但是即使从其他类调用，我也需要这个自定义消息框来对齐自身（中心到父表单），例如，

```
public class Computer
{
    public void Do(int i)
    {
        MsgBox.Show(i.ToString());
    }
} 
```

这里的问题是我无法将父表单的引用传递给`MsgBox`类。所以在这里我将无法定位自定义框。我想要的是让`MsgBox`类确定调用堆栈中的最后一个表单类的能力？

我试过这个：

```
public partial class MsgBox : Form
{
    private void X()
    {
        StackTrace df = new StackTrace();
        foreach (var item in df.GetFrames())
        {
            var type = item.GetMethod().DeclaringType;
            if (type.BaseType == typeof(Form))
            {
                IWin32Window w = //how to get the form instance here??
                //------------
                break;
            }
        }
    }
} 
```

我确实了解了内部 if 子句；问题是我不知道如何从变量中获取表单实例或表单的 IWin32Window 句柄`type`。我可以做些什么来获取类的**实例**本身而不是**类型**？

**一个大编辑**：抱歉，这是我犯的一个大错误，我说**获取父表单的引用是将子表单居中**。我需要在 MsqBox 实例中处理父表单的句柄，因为它也可以做其他事情。简而言之，我需要子表单中的父表单，而没有传递父表单的引用。可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T18:07:10.477

您可以尝试将 MessageBox 放在[Form.ActiveForm](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.activeform.aspx)上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:34:35.653

解决方案：

*   `Form Parent { get; private set; }`在每个`MsgBox`类实例中保留私有属性。
*   创建将选择的`MsgBox.ActiveForm { get { .. } }` **静态**`Form.ActiveForm`属性，如果它是类型，`MsgBox`则返回它的父级。

* * *

类的静态属性`MsgBox`：

```
public static Form ActiveForm
{
    get
    {
        return Form.ActiveForm == null ? null :
            Form.ActiveForm is MsgBox ? ((MsgBox)Form.ActiveForm).Parent :
            Form.ActiveForm;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T09:23:57.147

这是一种方法，谢谢@Joe：

```
public static Form GetLastForm()
{
    if (Form.ActiveForm != null && !(Form.ActiveForm is MsgBox))
        return Form.ActiveForm;

    var openForms = Application.OpenForms.Cast<Form>().Where(f => !(f is MsgBox));
    if (openForms.Count > 0)
        return openForms[openForms.Count - 1];

    return null;
} 
```

我在通过堆栈跟踪方法获取正确的父表单时遇到问题。这里基本的混淆是确定我是否想要当前活动的表单，或者最后打开的表单，或者导致 MsgBox 弹出的表单。这三个都可以不同，我采用堆栈跟踪方法以获得第三个。取决于堆栈跟踪令人沮丧。我现在才得到活动表格，如果没有，我会检索最后打开的表格。`Application.OpenForms`以完全正确的订单形式打开表格。

# python - 奇怪的 python 队列行为。如果队列未命名为“队列”，则崩溃

> ID：12535669
> 
> 赞同：1
> 
> 时间：2012-09-21T17:54:59.427
> 
> 标签：python, python-2.7, python-multithreading

这个名字就说明了一切。我正在用 python 2.7 编写这个程序，我试图利用线程队列来发出一大堆网络请求。这就是问题所在：我想要两个不同的队列，一个用于处理线程请求，另一个用于处理响应。如果我的程序中有一个未命名为“queue”的队列，例如，如果我希望将初始队列命名为“input_q”，那么程序将崩溃并拒绝工作。这对我来说完全没有意义。在下面的代码中，所有导入的自定义模块都可以正常工作（至少，它们是独立完成的，通过了所有单元测试，并且看不出有任何原因可能是问题的根源）。

此外，通过诊断语句，我确定它在生成线程池之前就崩溃了。

提前致谢。

编辑：崩溃在这里可能是错误的术语。它实际上只是停止。即使等了半个小时完成，当原始程序运行不到三十秒时，程序也不会运行。当我告诉它打印 toCheck 时，它只会让它在列表中的一部分，停在一个条目的中间，什么也不做。

EDIT2：抱歉浪费大家的时间，我忘记了这篇文章。有人更改了我的一个自定义模块（线程检查）。看起来它正在初始化模块，然后与程序的其余部分一起愉快地运行。Threadcheck 在初始化后崩溃，当程序处于计算过程中时，崩溃导致整个事情都崩溃了。

代码：

```
from binMod import binExtract
from grabZip import grabZip
import random
import Queue
import time
import threading
import urllib2
from threadCheck import threadUrl
import datetime

queue = Queue.Queue()
#output_q = Queue.Queue()
#input_q = Queue.Queue()
#output = queue

p=90
qb = 22130167533
url = grabZip(qb)
logFile = "log.txt"
metaC = url.grabMetacell()
toCheck = []
print metaC[0]['images']
print "beginning random selection"
for i in range(4):
    if (len(metaC[i]['images'])>0):
        print metaC[i]['images'][0]
        for j in range(len(metaC[i]['images'])):
            chance = random.randint(0, 100)
            if chance <= p:
                toCheck.append(metaC[i]['images'][j]['resolution 7 url'])

print "Spawning threads..."
for i in range(20):
    t = threadUrl(queue)
    t.setDaemon(True)
    t.start()
print "initializing queue..."
for i in range(len(toCheck)):
    queue.put(toCheck[i])

queue.join()    
#input_q.join()
output = open(logFile, 'a')
done = datetime.datetime.now()
results = "\n %s \t %s \t %s \t %s"%(done, qb, good, bad)
output.write(results) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:19:20.110

*名称与*Python 无关——Python 不在乎，对象本身（大部分）甚至不知道它们被分配的名称。所以问题必须在其他地方。

正如评论中所建议的那样，仔细检查您对`queue`.

另外，请尝试不使用守护程序模式。

# google-fusion-tables - 融合表查询不获取一些

> ID：12535671
> 
> 赞同：1
> 
> 时间：2012-09-21T17:55:08.307
> 
> 标签：google-fusion-tables

我在这张桌子上有问题：[1g_ydg74ooUSBzNfQBHOIdgrOKhxZD_92In8xTDg](https://www.google.com/fusiontables/DataSource?docid=1g_ydg74ooUSBzNfQBHOIdgrOKhxZD_92In8xTDg)

我正在尝试通过 CODE_DEPT 获取一些结果。我用了过滤器

```
CODE_DEPT IN ('001', '002', '003', '02A', '02B') 
```

并且只获取前 3 个。

知道发生了什么吗？干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T22:16:55.510

看起来 CODE_DEPT 被标识为数字列。最后两个代码不是数字，因此不会匹配任何内容。如果您将列更改为输入文本，您应该没问题。

# ruby-on-rails - 模块化页面布局

> ID：12535675
> 
> 赞同：0
> 
> 时间：2012-09-21T17:55:36.867
> 
> 标签：ruby-on-rails

我想在我的应用程序的每个或几乎每个页面上显示某些内容。诸如页眉、页脚、侧边栏或导航之类的东西。

我该怎么做呢？我来自 PHP 和 ColdFusion 等语言，我要么包含文件，要么调用函数来显示我想要的内容。我很难理解如何在 Rails 中实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:15:31.250

通常在您的应用程序布局中，您使用部分。一个小例子看起来像

```
<body>
    <%= render :partial => 'shared/header' %>
    <%= yield %>
    <%= render :partial => 'shared/footer' %>
</body> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:08:53.900

您的应用程序应该有`app/view/layouts/application.html.erb`. 这就是您的 html 内容所在的位置。

在 application.html.erb 中，您应该看到`<%= yield %>`. 这是具有相应视图的不同控制器操作的特定视图所在的位置。

对于 application.html.erb 的 css 文件，您应该使用`app/assets/stylesheets/application.css`.

对于 application.html.erb 的 javascript 文件，您应该使用`app/assets/javascripts/application.js`.

# jquery - 切换所有 s 直到下一个 并在 Bootstrap 中过滤导航列表

> ID：12535680
> 
> 赞同：0
> 
> 时间：2012-09-21T17:55:43.483
> 
> 标签：jquery, twitter-bootstrap

我有一个来自 Twitter Bootstrap 的流体.html 示例 - 左侧的导航列表是过去几个小时让我头疼的原因。我需要做这些事情中的一个或两个：

1.  过滤导航列表 - 或多或少这样做： http: [//kilianvalkhof.com/2010/javascript/how-to-build-a-fast-simple-list-filter-with-jquery/](http://kilianvalkhof.com/2010/javascript/how-to-build-a-fast-simple-list-filter-with-jquery/) - 虽然它工作得很好在这个网站上，我无法让它在不破坏其外观的情况下过滤 Bootstrap 的导航列表中的元素。

2.  通过单击其中一个元素来切换所有`<li>`s 直到下一个。所以如果我有：`<li class="nav-header">``<li class="nav-header">`

    *   第一类
        *   链接 1
        *   链接 2
        *   链接 3
    *   第 2 类
        *   链接 4
        *   链接 5
        *   链接 6

...单击类别 1 应切换链接 1、2 和 3，单击类别 2 应仅切换链接 4、5 和 6。我试过 jQuery Collapse 插件，但它破坏了导航列表样式。我还尝试在s 之间切换`<div>`所有s - 但它也打破了导航列表样式。我有一个想法，用相同的 id 切换所有s，但我不知道如何使用 jQuery 或纯 JavaScript 来做到这一点。`<li>``<li class="nav-header">``<li>`

知道如何做这些事情中的一个或两个吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:18:11.843

只需检查是否有 child `<ul>`，然后在单击时使用 jQuery 切换它。

```
<script>
    $('li').on('click', function() {
        $(this).children('ul').toggle();
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:59:02.483

好的，我终于用 jQuery 和第一个示例修复了列表过滤。问题是，jQuery 是在文档末尾加载的，而脚本要求它在表单之前加载。所以，工作:)

# arrays - 消除 AS3 平铺程序中的滞后

> ID：12535683
> 
> 赞同：0
> 
> 时间：2012-09-21T17:55:52.797
> 
> 标签：arrays, actionscript-3, lag, tile

询问

我正在创建一个程序，该程序在环境中有很多都是电影剪辑的图块。玩家可以在这个环境中四处走动。如何隐藏屏幕外的图块以减少延迟？

瓦片都在 20 个水平单位乘以 10 个垂直单位的 2D 阵列中。如果您有任何建议，请告诉我！

更多信息

我有一个瓷砖类，所以我可以在其中添加要删除的功能。我只是不确定如何去做。

-奥林

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T23:40:10.947

听起来您正在寻找如何通过从屏幕上不再显示的磁贴、Flash 或任何其他语言中重新收集内存来进行更细粒度的内存管理，从而生成字节码，然后在处理低级内存的虚拟机中运行管理和垃圾收集，您对回收内存的控制是有限的。在这些情况下，您最好的选择是使用对象池来动态分配您需要的对象数量，然后保留它们，并在它们准备好被回收时简单地将它们标记为未使用。

在此处阅读 AS3 中的对象池：http: [//help.adobe.com/en_US/as3/mobile/WS948100b6829bd5a6-19cd3c2412513c24bce-8000.html](http://help.adobe.com/en_US/as3/mobile/WS948100b6829bd5a6-19cd3c2412513c24bce-8000.html)

或在这里使用垃圾收集器：http: [//help.adobe.com/en_US/as3/mobile/WS4bebcd66a74275c3-576ba64d124318d7189-7ffc.html](http://help.adobe.com/en_US/as3/mobile/WS4bebcd66a74275c3-576ba64d124318d7189-7ffc.html)

顶层的所有部分（节省内存）： [http ://help.adobe.com/en_US/as3/mobile/WS4bebcd66a74275c333637c44124318c9bf9-8000.html](http://help.adobe.com/en_US/as3/mobile/WS4bebcd66a74275c333637c44124318c9bf9-8000.html)

尽管这一切都在移动目录中，但我敢打赌，这些信息在桌面上也同样相关。

# c# - 将字符串转换为多维数组

> ID：12535684
> 
> 赞同：0
> 
> 时间：2012-09-21T17:55:54.073
> 
> 标签：c#, .net, xml, arrays

我正在解析一个 XML 文件，并硬编码了一种方法来拆分字符串以创建多维数组。这是我正在解析的 XML 片段：

```
<MeasPropList Path="userList" Type="System.Double[]">
    {1960, 1980, 0}, {1980, 0, 0}, {1960, 1980, 1990}
</MeasPropList> 
```

<MeasPropList> 元素可用于任何类型的数据，而不仅仅是数组或数字。此 XML 在 C# 中的等效结果是：

```
double[,] userList = new[,] { { 1960.0, 1980.0, 0.0 }, 
                       { 1980.0, 0.0, 0.0 }, 
                       { 1960.0, 1980.0, 1990.0 } }; 
```

我会为您省去我正在使用的代码，它工作正常，但我正在寻找一个更优雅的解决方案。
有没有办法可以使用 Array.ConvertAll<> ？
是否有可用于解析 XML 数值数据的 XML 库函数？

[编辑] 我在这里发布了我正在使用的代码：
[https ://codereview.stackexchange.com/questions/15922/parsing-xml-to-create-ilist](https://codereview.stackexchange.com/questions/15922/parsing-xml-to-create-ilist)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:15:40.807

这是一个刺：

```
 static void Main(string[] args)
    {
        var parser = new MeasPropListParser<double>();
        var values = parser.GetValues("{1960, 1980, 0}, {1980, 0, 0}, {1960, 1980, 1990}");
    }

   public class MeasPropListParser<T>
    {
        private char[] comma = new char[] { ',' };
        private char[] rightBrace = new char[] { '}' };

        public T[,] GetValues(string input)        
        {
            var dims = GetDimensions(input);
            int rowCount = dims.Item1;
            int colCount = dims.Item2;

            T[,] array = new T[rowCount, colCount];
            var converter = System.ComponentModel.TypeDescriptor.GetConverter(typeof(T));
            var rows = GetRows(input);

            for (int x = 0; x < rowCount; x++)
            {
                var cols = new List<string>(rows[x].Split(comma, StringSplitOptions.RemoveEmptyEntries));
                for (int y = 0; y < colCount; y++)
                {
                    array[x, y] = (T)converter.ConvertFromString(cols[y]);
                }

            }

            return array;
        }

        private Tuple<int, int> GetDimensions(string input)
        {
            int rowCount = 0;
            int colCount = 0;
            foreach (var array in input.Trim().Split(rightBrace, StringSplitOptions.RemoveEmptyEntries))
            {
                rowCount++;
                if (colCount == 0)
                {
                    colCount = array.Split(comma, StringSplitOptions.RemoveEmptyEntries).Length;
                }
            }
            return new Tuple<int, int>(rowCount, colCount);
        }

        private List<string> GetRows(string input)
        {
            var list = new List<string>();
            foreach (var array in input.Trim().Split(rightBrace, StringSplitOptions.RemoveEmptyEntries))
            {
                list.Add(array.Replace("{", "").Trim());
            }
            return list;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T20:05:01.883

如果您不固定该格式，则可以使用锯齿状数组和 XmlSerializer：

```
 double[][][] d = new double[][][] { new double[][] {
                                            new double[] {1.0, 2.0, 3.0},
                                            new double[] {4.0, 5.0, 6.0},
                                            new double[] {7.0, 8.0, 9.0}
                                        },
                                        new double[][] {
                                            new double[] {10.0, 11.0, 12.0},
                                            new double[] {13.0, 14.0, 15.0},
                                            new double[] {16.0, 17.0, 18.0}
                                        },
                                        new double[][] {
                                            new double[] {19.0, 20.0, 21.0},
                                            new double[] {22.0, 23.0, 24.0},
                                            new double[] {25.0, 26.0 ,27.0}
                                        }
                                    };

    XmlSerializer x = new XmlSerializer(typeof(double[][][]));

    using (StringWriter sw = new StringWriter())
    {
        x.Serialize(sw, d);
        Console.WriteLine(sw.ToString());
    } 
```

这会产生以下 XML：

```
<?xml version="1.0" encoding="utf-16"?>
<ArrayOfArrayOfArrayOfDouble xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <ArrayOfArrayOfDouble>
    <ArrayOfDouble>
      <double>1</double>
      <double>2</double>
      <double>3</double>
    </ArrayOfDouble>
    <ArrayOfDouble>
      <double>4</double>
      <double>5</double>
      <double>6</double>
    </ArrayOfDouble>
    <ArrayOfDouble>
      <double>7</double>
      <double>8</double>
      <double>9</double>
    </ArrayOfDouble>
  </ArrayOfArrayOfDouble>
  <ArrayOfArrayOfDouble>
    <ArrayOfDouble>
      <double>10</double>
      <double>11</double>
      <double>12</double>
    </ArrayOfDouble>
    <ArrayOfDouble>
      <double>13</double>
      <double>14</double>
      <double>15</double>
    </ArrayOfDouble>
    <ArrayOfDouble>
      <double>16</double>
      <double>17</double>
      <double>18</double>
    </ArrayOfDouble>
  </ArrayOfArrayOfDouble>
  <ArrayOfArrayOfDouble>
    <ArrayOfDouble>
      <double>19</double>
      <double>20</double>
      <double>21</double>
    </ArrayOfDouble>
    <ArrayOfDouble>
      <double>22</double>
      <double>23</double>
      <double>24</double>
    </ArrayOfDouble>
    <ArrayOfDouble>
      <double>25</double>
      <double>26</double>
      <double>27</double>
    </ArrayOfDouble>
  </ArrayOfArrayOfDouble>
</ArrayOfArrayOfArrayOfDouble> 
```

# java - Axis 2 客户端设置了“POST /SOAP/ HTTP/1.1”的 http 标头协议，这是有问题的

> ID：12535695
> 
> 赞同：0
> 
> 时间：2012-09-21T17:56:40.513
> 
> 标签：java, web-services, axis2, xmlbeans

我已经编写了一个带有 XMLBeans 绑定的 Axis2 客户端，就创建肥皂消息而言，一切似乎都运行良好。但是，http 标头的协议设置为“POST /SOAP/ HTTP/1.1”（请参阅​​下面的调试日志），这导致服务提供者引发此错误 -**未找到协议“SOAP/”的运行时扩展**

我找不到任何可以在轴内配置以不将 /SOAP/ 添加到协议的内容，不胜感激任何指针！

我宁愿不要求服务提供商解决这个问题，理想情况下希望在客户端解决这个问题（顺便说一下，使用 SoapUI 的请求工作得很好）。

2012/09/21 10:02:42:955 PDT [DEBUG] 标头->>“ **POST /SOAP/HTTP/1.1** [\r][\n]”

# java - SWT - MessageDialog - 外壳

> ID：12535696
> 
> 赞同：1
> 
> 时间：2012-09-21T17:56:44.937
> 
> 标签：java, dialog, swt

我有一个没有 gui 的操作类。该课程主要进行数据管理。该类是从我的主 GUI 中的方法调用的。我遇到的问题是在出现故障时向用户显示消息。我正在使用`MessageDialog`，但它在运行时一直失败。我认为问题在于壳牌。当我尝试`null`用作外壳时。

```
MessageDialog.openError(null, "Printer Error Message", "Error getting print reply file."); 
```

错误是空指针异常

```
MessageDialog.openError(Display.getCurrent().getActiveShell() etc 
```

错误是空指针异常

```
MessageDialog.openError(Display.getDefault().getActiveShell() 
```

错误是无效的线程访问

1.  由于这不是 GUI 类，我是否必须从 GUI 父级传入 shell？
2.  我可以在课堂上创建一个外壳然后使用它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T18:22:55.437

您可以使用或修复`ERROR_THREAD_INVALID_ACCESS`错误。尝试：[`Display.syncExec`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Display.html#syncExec%28java.lang.Runnable%29)[`Display.asyncExec`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Display.html#asyncExec%28java.lang.Runnable%29)

```
Display.syncExec(new Runnable() {
    void run() {
        MessageDialog.openError(Display.getDefault().getActiveShell()...
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T18:20:14.637

这将做你想要的：

```
MessageDialog.openError(new Shell(), "Printer Error Message", "Error getting print reply file."); 
```

只需创建一个新的[`Shell`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Shell.html#Shell%28%29)并将其传递给`MessageDialog`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T19:28:14.347

需要考虑的几个要点。

1.  首先，不要将数据管理类（模型）与 UI 混合。
2.  有一个实用程序类和方法来显示错误/信息消息。
3.  始终在 UI 线程中访问 UI 小部件。使用`Display.getDefault().asyncExec()`或`syncExce()`
4.  先检查是否`Display.getDefault().getActiveShell()`将其传递给对话框，如果为空，则创建一个并传递它。

# tomcat - 单个 Tomcat 实例和多个端口中的 WAR

> ID：12535698
> 
> 赞同：0
> 
> 时间：2012-09-21T17:56:47.200
> 
> 标签：tomcat, deployment, war

假设我在单个 Tomcat 实例中部署了一个 WAR。WAR 包含两个 servlet：一个用于客户端请求，另一个用于管理。现在我想在不同的端口上运行这些 servlet。我可以使用相同的单个 WAR 和单个 Tomcat 实例来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:00:25.973

您可以让 tomcat 在两个不同的端口上侦听 HTTP，但只有一个容器。所以我不这么认为。

# clojure - 如何将列表打印为不带括号的字符串

> ID：12535701
> 
> 赞同：5
> 
> 时间：2012-09-21T17:57:01.087
> 
> 标签：clojure, parentheses

我做了：

```
user=> (println (for [line (range 1 5)] (str "line=" line))) 
```

并得到：

```
(line=1 line=2 line=3 line=4) 
```

但我只想`line=1 line=2 line=3 line=4`作为一个字符串。我该怎么做呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T18:00:04.293

你需要“申请”。

```
(apply println (for [line (range 1 5)] (str "line=" line))) 
```

或者，

```
(println (apply str (interpose " " (map #(str "line=" %) (range 1 5))))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T04:46:06.403

这个如何。`doseq`是关于对序列进行副作用，而打印是副作用。

```
(doseq [line (range 1 5) 
        :let [msg (str "line=" line " ")]] 
       (print msg)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T23:30:53.187

而不是`apply`，您也可以[`reduce`](http://clojuredocs.org/clojure_core/clojure.core/reduce)像这样使用：

```
user> (reduce #(str %1 " line=" %2) "" (range 1 5))
=> " line=1 line=2 line=3 line=4" 
```

该`reduce`函数是一个函数，它接受一个函数（让我们调用 if **f**）、一个“起始值”，然后是一个将用作**f**的第二个参数的事物列表。它在起始值和列表中的第一项上懒惰地调用**f** ，然后在 this 返回的内容和列表中的第二项上调用**f** ，然后对返回的内容和列表中的第三项等调用 f，直到**它**已经用尽了列表中的所有项目（或者更确切地说——因为它是懒惰的，如果你“要求它”它只会遍历整个列表）。

如果你不喜欢起始空间，你可以把整个东西都包起来[`triml`](http://clojuredocs.org/clojure_core/clojure.string/triml)（你必须先做`(use 'clojure.string)`）。或者你可以这样做`(reduce #(str %1 "line=" %2 " ") (range 1 5))`，这会将空间放在最后。

我的经验是，只要`apply`你可以用`reduce`. 更重要的是，我的`reduce`替代方案通常~~总是~~比我的更快`apply`。~~我当然不能保证这将永远是正确的，而且我还没有针对您的特定问题进行速度测试。~~

**编辑**
我做了一些粗略的计时，使用我的版本 ( `reduce`) 与 JohnJ 的第二个建议 ( `apply`)，并发现它们在高达 1 时非常相似`(range 1 100)`，但到 1 时`(range 1 500)`，`apply`版本至少快 4 倍。

# macos - Mac Bash 似乎没有 skip-completed-text 变量

> ID：12535704
> 
> 赞同：0
> 
> 时间：2012-09-21T17:57:05.587
> 
> 标签：macos, bash

在谷歌搜索另一个 bash 提示时，我在 .inputrc [http://ss64.com/bash/syntax-inputrc.html](http://ss64.com/bash/syntax-inputrc.html)上找到了这个页面，它完全修复了我想要做的事情（在目录的符号链接上放置一个尾随 /），但当我进一步阅读时，我发现也有一种方法可以跳过已完成的文本。“太棒了”，我对自己说，“这让我每周烦恼两次”。因此，我也将它放入了我的 .inputrc 中，但它不起作用，甚至似乎认识到发生了什么。注销并重新登录后，这就是我所看到的：

```
$ tail .inputrc 
set mark-symlinked-directories on
set skip-completed-text on
$ bash --version
GNU bash, version 3.2.48(1)-release (x86_64-apple-darwin10.0)
Copyright (C) 2007 Free Software Foundation, Inc.
$ bind -V | grep completed
$ bind -V | grep skip
$ 
```

也就是说，bash 似乎根本无法识别它的存在...... Mountain Lion 中提供的 bash 版本有问题吗？有什么明显我忘记做的事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:45:16.477

The:`skip-completed-text`仅在 bash4 中。

在我的 Mac 上：

```
$ bash --version
GNU bash, version 4.2.37(2)-release (i386-apple-darwin12.1.0) 
```

如果您想安装一些开源实用程序，我建议您使用`macports`(www.macports.org)。安装`macports`会给你一个名为的命令`port`，用它你可以简单地安装一些东西，比如：

```
$ port install bash 
```

将为您安装 bash 4。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T18:28:49.677

`skip-completed-text`是 bash 版本 4 的新功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T18:57:13.350

Bash v4 无法进入 OSX。我可以建议zsh，它不是GPL3。

# sql - 我将如何编写 SQL 查询以包括所有类别的月度计数，即使不存在记录也显示所有月份和类别

> ID：12535711
> 
> 赞同：3
> 
> 时间：2012-09-21T17:57:43.720
> 
> 标签：sql, reporting-services, grouping, sql-server-2012

我正在使用 SSRS，并且正在尝试填充报告以显示按类别分组的每月计数。该报告应将类别列为行标题，并将一年中的所有月份显示为列标题。要求是我需要显示所有月份和类别，无论这些列/行中是否有数据。

我的问题是构建 SQL 查询来做到这一点。

以下是我正在使用的表的示例：

交易表：

```
create table [Transaction] (
     ContactID int Primary Key
     , CategoryID int
     , DateKey int
) 
```

日历表：

请注意，该表最初是作为用于 SSAS 的日期维度创建的，但我决定不使用 SSAS，因为多维数据集开发对我来说越来越困难。此表中还有许多其他字段，但这些是有关此问题的重要字段。

```
create table [Calendar] (
     DateID int Primary Key
     , Date datetime
     , Year nchar(4)
     , Month nvarchar(2)
) 
```

类别表：

```
create table [Category] (
     CategoryID int Primary Key
     , CategoryName nvarchar
) 
```

查询需要返回要在 SSRS 中使用的数据集，以填充类似于以下内容的报告：

```
Category   |   Jan  |  Feb  | Mar  |  Apr  |  May  |  June  | etc...
--------------------------------------------------------------------
Category A |   -    |   -   |  -   |   -   |   -   |   -    | etc...
--------------------------------------------------------------------
Category B |   -    |   -   |  -   |   -   |   -   |   -    | etc...
--------------------------------------------------------------------
Category C |   -    |   -   |  -   |   -   |   -   |   -    | etc... 
```

我知道它涉及到 OUTER JOINS、GROUP BY 和子查询的某种组合。我只是想不通如何做到这一点。

如果有人可以在这个问题上帮助我，我会很高兴。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:26:34.773

以下查询获取事务中的所有类别。它通过从日期中提取月份并计算交易数量来以月份为中心。这将为数据中的所有类别返回一行

```
select c.categoryName,
       sum(case when extract(month from date) = 1 then 1 else 0 end) as Jan,
       sum(case when extract(month from date) = 2 then 1 else 0 end) as Feb,
       sum(case when extract(month from date) = 3 then 1 else 0 end) as Mar,
       . . . 
from transaction t join
     category c
     on t.categoryID = c.categoryID 
group by categoryName
order by categoryName 
```

如果您确实需要*所有*类别，即使根本没有交易，也可以使用右外连接：

```
select c.categoryName,
       sum(case when extract(month from date) = 1 then 1 else 0 end) as Jan,
       sum(case when extract(month from date) = 2 then 1 else 0 end) as Feb,
       sum(case when extract(month from date) = 3 then 1 else 0 end) as Mar,
       . . . 
from transaction t right outer join
     category c
     on t.categoryID = c.categoryID 
group by categoryName
order by categoryName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:27:56.437

您可以使用以下`PIVOT`功能：

```
WITH Data AS
(   SELECT  CategoryName,
            Calendar.[Month],
            ContactID 
    FROM    Category
            LEFT JOIN [Transaction] 
                ON [Transaction].CategoryID = Category.CategoryID
            LEFT JOIN Calendar
                AND [Transaction].DateKey = Calendar.DateID
)
SELECT  CategoryName, 
        [1] AS [Jan],
        [2] AS [Feb],
        [3] AS [Mar],
        [4] AS [Apr],
        [5] AS [May],
        [6] AS [Jun],
        [7] AS [Jul],
        [8] AS [Aug],
        [9] AS [Sep],
        [10] AS [Oct],
        [11] AS [Nov],
        [12] AS [Dec]
FROM    Data
        PIVOT
        (   COUNT(ContactID)
            FOR [Month] IN ([1], [2], [3], [4], [5], [6], [7], [8], [9], [10], [11], [12])
        ) pvt 
```

# php - Shopify - 添加新产品时出现 API 错误（词法 JSON 错误）

> ID：12535714
> 
> 赞同：2
> 
> 时间：2012-09-21T17:57:52.047
> 
> 标签：php, curl, shopify

当商家添加新产品时，只要在 body_html 字段中输入普通文本，效果就很好。但是，当他们尝试从复制粘贴或将图像添加到所见即所得编辑器（具有“”）中添加一些 HTML 时，我们得到了著名的：

词法错误：json 文本中的字符无效。

现在，他们可能是从未知来源粘贴的，有没有办法弄清楚我如何在将 body_html 发送到 ShopifyAPI 之前清理它？

顺便说一句，我正在使用 PHP 和 wcurl.php [https://github.com/sandeepshetty/wcurl](https://github.com/sandeepshetty/wcurl)

更新：

词法错误：json 文本中的字符无效。

```
 "{"product":{"title":"Sample Event
    (right here) ------^ 
```

**代码示例：**

```
$shopify_data = array
(
   "product"=>array
   (
     "title"=>$rs->product_title,
     "body_html"=>$rs->product_details,
     "vendor"=>"My Companay",
     "product_type"=>"Laptop"
   )
);

foreach ($variant as $key => $value) {
  $shopify_data["product"]["variants"][$key] = array(
    "option1"=> $value->variant_name,
    "price"=> $value->price,
    "requires_shipping"=>'true',
    "inventory_management"=>"shopify",
    "inventory_quantity"=> $value->quantity
  );
}

// $shopify_data = json_encode($shopify_data);  // This does not work either.
$shopify_data = stripslashes(json_encode($shopify_data)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:58:46.187

如果我理解这一点，解决方案是：

```
stripslashes(json_encode($params)) 
```

我在我的 Shopify 客户端中执行此操作： [https ://github.com/sandeepshetty/shopify_api/blob/1f538276e690bd7b95f9cbb4007576ecb2d3f6de/client.php#L52](https://github.com/sandeepshetty/shopify_api/blob/1f538276e690bd7b95f9cbb4007576ecb2d3f6de/client.php#L52)

注意：PHP 5.4.0 在[json_encode](http://php.net/json_encode)中有一个选项。

# python - 在opencv for python中为fromarray（）设置类型

> ID：12535715
> 
> 赞同：1
> 
> 时间：2012-09-21T17:57:58.150
> 
> 标签：python, opencv, types

我正在使用 Python 2.7 和 opencv 2.1。

我有一个 numpy 数组，我想将其转换为“cv.CV_32FC1”类型的 opencv 矩阵。如何设置类型？

“CreateMat()”允许显式类型设置，但“fromarray()”不允许。如果我只是在浮点数组上应用 fromarray，则类型检查将失败（下一个模块对 CV_32FC1 执行特定类型检查）

谢谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T19:03:07.850

您可以尝试以下方法：

```
dest = cv.createMat(r, c, cv.CV_32FC1)
src = cv.fromarray(your_np_array)
cv.Convert(src, dest) 
```

你的 numpy 数组有`r`行和`c`列。

# ios - 了解iOS版本

> ID：12535716
> 
> 赞同：0
> 
> 时间：2012-09-21T17:58:01.457
> 
> 标签：ios, version

有没有办法知道我是在 iOS 5（或更低版本）还是 6（或更高版本）中运行？

我在 iOS 5 中使用 Google API 进行导航，我想在 iOS 6 中使用 Apple 的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:06:51.120

**这回答了你的问题。检查 iPhone iOS 版本 [https://stackoverflow.com/a/5337804/1368748](https://stackoverflow.com/a/5337804/1368748)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T18:15:28.873

由于您正在针对 iOS 5 进行编程，因此您可以使用更新的方法来检查弱链接库，只需调用类的`class`方法，如果不支持则返回 nil。

例如（取自[文档](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW6)）：

```
if ([UIPrintInteractionController class]) {
   // Create an instance of the class and use it.
}
else {
   // The print interaction controller is not available.
} 
```

这需要 LLVM 和 Clang，但作为您支持的 iOS5 和 iOS6，无论如何您都应该使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T18:01:03.017

您可以从以下位置获取 iOS 版本：

```
[[UIDevice currentDevice] systemVersion] 
```

一般来说，测试您需要的功能是否可用，而不是依赖于特定的 iOS 版本，这是一种更好的做法。正如@mprivat 提到的，`NSClassFromString`是实现此目的的一种方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T18:02:29.437

寻找新操作系统中引入的特定类，而不是尝试向操作系统本身询问版本。

例如：

```
if (NSClassFromString(@"UICollectionView")) {
    // It's iOS 6
} 
```

# c# - 实现“计时器”的最佳方法是什么？

> ID：12535722
> 
> 赞同：216
> 
> 时间：2012-09-21T17:58:25.623
> 
> 标签：c#, .net-4.0

实现计时器的最佳方法是什么？一个代码示例会很棒！对于这个问题，“最佳”被定义为最可靠（最少的失火）和精确。如果我指定 15 秒的间隔，我希望每 15 秒调用一次目标方法，而不是每 10 到 20 秒。另一方面，我不需要纳秒精度。在此示例中，该方法每 14.51 - 15.49 秒触发一次是可以接受的。

* * *

## 回答 #1

> 赞同：374
> 
> 时间：2012-09-21T17:59:22.890

使用[`Timer`](https://docs.microsoft.com/en-us/dotnet/api/system.timers.timer?redirectedfrom=MSDN&view=netframework-4.8)类。

```
public static void Main()
{
    System.Timers.Timer aTimer = new System.Timers.Timer();
    aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);
    aTimer.Interval = 5000;
    aTimer.Enabled = true;

    Console.WriteLine("Press \'q\' to quit the sample.");
    while(Console.Read() != 'q');
}

 // Specify what you want to happen when the Elapsed event is raised.
 private static void OnTimedEvent(object source, ElapsedEventArgs e)
 {
     Console.WriteLine("Hello World!");
 } 
```

该`Elapsed`事件将每 X 毫秒引发一次，由`Interval`Timer 对象的属性指定。它将调用`Event Handler`您指定的方法。在上面的例子中，它是`OnTimedEvent`。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-09-21T18:05:50.997

通过使用`System.Windows.Forms.Timer`类，你可以实现你所需要的。

```
System.Windows.Forms.Timer t = new System.Windows.Forms.Timer();

t.Interval = 15000; // specify interval time as you want
t.Tick += new EventHandler(timer_Tick);
t.Start();

void timer_Tick(object sender, EventArgs e)
{
      //Call method
} 
```

通过使用 stop() 方法，您可以停止计时器。

```
t.Stop(); 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-09-21T18:01:45.727

目前尚不清楚*您要开发哪种类型的应用程序*（桌面、Web、控制台...）

如果您正在开发`Windows.Forms`应用程序，一般的答案是使用

[System.Windows.Forms.Timer](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)类。这样做的好处是它在`UI`线程上运行，所以很简单，只需定义它，订阅它的[Tick](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.tick.aspx)事件并每 15 秒运行一次你的代码。

如果您执行其他操作然后窗口形式（从问题中不清楚），您可以选择[System.Timers.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)，但是*这个*在**其他**线程上运行，所以如果您要从其[Elapsed](http://msdn.microsoft.com/en-us/library/system.timers.timer.elapsed.aspx)事件中对某些 UI 元素采取行动，您必须通过“调用”访问来管理它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-21T18:12:30.153

参考`ServiceBase`您的课程并将以下代码放入`OnStart`事件中：

`Constants.TimeIntervalValue = 1`（小时）..理想情况下，您应该在配置文件中设置此值。

StartSendingMails = 要在应用程序中运行的函数名称。

```
 protected override void OnStart(string[] args)
        {
            // It tells in what interval the service will run each time.
            Int32 timeInterval = Int32.Parse(Constants.TimeIntervalValue) * 60 * 60 * 1000;
            base.OnStart(args);
            TimerCallback timerDelegate = new TimerCallback(StartSendingMails);
            serviceTimer = new Timer(timerDelegate, null, 0, Convert.ToInt32(timeInterval));
        } 
```

# javascript - 选择最接近的“h”类型元素，例如 h1、h2 等

> ID：12535723
> 
> 赞同：4
> 
> 时间：2012-09-21T17:58:42.703
> 
> 标签：javascript, jquery, html

假设我使用`$(mySelector)`. 我想选择最接近它的标题，所以如果最接近它的标题元素是一个`<h2>`，它会选择那个，但如果最近的是一个`<h3>`，它会选择那个。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T18:00:51.080

选择器中的逗号表示“或”。所以你可以这样做：

```
$(mySelector).closest('h3, h2') 
```

这将返回 0 或 1 个元素，如果有多个匹配项，则最接近。

# iphone - 构建兼容的 iOS 6 应用程序

> ID：12535725
> 
> 赞同：0
> 
> 时间：2012-09-21T17:58:59.333
> 
> 标签：iphone

我不确定这方面是如何工作的，因为我们公司是 iOS 开发的新手。我们有一个为 iOS 5 构建的应用程序。我们一直在运行 Xcode 4.3.2。我们希望我们的应用可以在 iOS 5 和 iOS 6 上使用。我们可以使用 4.3.2 并将我们的 iOS 5 应用提交到应用商店吗？还是我们需要下载 Xcode 4.5 并为 iOS 6 构建它？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:06:28.113

您可以使用 Xcode 4.3.2 提交，没问题，然后使用 iOS 5 提交。它仍然可以在 iOS 6 上运行。

但是，您应该认真考虑下载最新的 Xcode 和 iOS 6 SDK，并确保您的应用程序在 iOS 5 和 iOS 6 上都能正常运行，因为有时需要考虑和修复 API 更改。

# facebook - 如何像 facebook 一样构建实时推送通知功能？

> ID：12535730
> 
> 赞同：17
> 
> 时间：2012-09-21T17:59:20.610
> 
> 标签：facebook, notifications, push

我将为我的 Web 应用程序（一个小型​​社交网络）构建实时推送通知功能，但我不知道从哪里开始。

这就是我想要构建的：有类似的按钮，评论表单，......用户点击喜欢，写他们的评论和（相对）立即，在所有者的浏览器上显示新的喜欢和评论的数量，......像那。

我读过关于 nodeJs、MeteorJS 上的 socketIo，但不幸的是，它们需要现代浏览器支持的 WebSocket。我刚刚阅读了关于彗星技术的文章，发现它很容易应用。但我不确定它是否会表现良好，因为 Comet 依赖于长轮询连接（如果我错了，请纠正我）。

此外，我认为 facebook 正在使用 Comet 来实现其推送通知功能。通过萤火虫插件上的控制台选项卡，我可以看到始终与 facebook 保持连接。那么任何人都可以向我展示一种技术，一种开发这种功能的模型吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-05-28T21:12:44.190

一个有前途的想法是使用 HTML5 通知 API。只要您的浏览器正在运行（即使您正在浏览另一个网站或所有窗口都已关闭），如果您希望在用户屏幕上弹出通知，这是完美的。

[http://www.paulund.co.uk/html5-notifications](http://www.paulund.co.uk/html5-notifications)

但是，如果您想要异步更新页面的不同部分（无需刷新或按下按钮），您应该一起使用：

*   阿贾克斯调用；
*   听众和观察者。

当您的 Ajax 调用检索特定类型的 json 数据（例如）时，它可以触发带有许多新通知的徽章（侦听器）的出现，或者......

安装了 JQuery，你应该没问题...

尽管通常情况并非如此，但有时，对于简单的调整，对完成的工作进行编码会更容易......

你可以从这里开始：

[如何在没有插件的情况下在 Jquery 中实现“观察者”？](https://stackoverflow.com/questions/4819845/how-implement-a-observer-in-jquery-without-plugins) （它很旧，但很有趣）

或查看此页面：

[使用 ajax/jquery 的浏览器即时更新](https://stackoverflow.com/questions/2680387/browser-instant-updates-with-ajax-jquery)

（令人难以置信的是谷歌查询返回 stacko 页面的频率）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T15:11:41.597

您应该查看[MQTT](http://mqtt.org/wiki/)。它基本上适用于 Publish-Subscribe 模型，并且非常易于使用。该协议占用空间小，占用带宽少。Facebook 的 Messenger 也使用 MQTT。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-29T11:59:03.463

您可以使用进入（例如）服务器上的 php 脚本的 ajax 调用，它使连接保持打开状态，并且仅在需要向用户显示某些内容时才回复。如果在特定时间内没有任何事情发生，连接将关闭并且客户端会触发一个新的 ajax 调用。请注意，这仅解决客户端/服务器通信，如果您想避免脚本不断轮询数据库，您仍然需要服务器内部的通知方法来唤醒 php 脚本，但是对此有很多建议它们取决于您在服务器上使用的语言。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-05-23T02:43:22.323

我有一个想法，它很简单，但它可能会奏效。为什么不将通知栏隐藏为 Div 标签并用 css 设计它，使其看起来像通知栏。然后每当一些用户喜欢或评论页面时，编写 php 或 js 函数并将其连接到喜欢或评论提交按钮，该按钮将显示页面所有者不可见的 div 可见。而且我相信，根据您使用的内容，我可能更喜欢 php session() 来识别页面所有者是否在线并且可以收到通知。此外，如果您需要跟踪页面的统计信息，您可以创建一个包含页面 ID 和用户评论的小型数据库。您可以使用此数据库在该隐藏的 Div 上推送多个通知。如果你愿意，你可以使用 Jquery 让它像 Facebook 一样移动。我不确定这是否是最优化的方法，但这是可能的。顺便说一句，我上网了一些，看看人们用什么来做到这一点。令人惊讶的是，我也找不到东西。

# c++ - 在 C++ 中对浮点变量执行算术运算时是否总是需要使用浮点文字？

> ID：12535740
> 
> 赞同：6
> 
> 时间：2012-09-21T18:00:10.783
> 
> 标签：c++, performance, floating-point, floating-accuracy, floating-point-precision

我看到很多 C++ 代码具有如下行：

```
float a = 2;
float x = a + 1.0f;
float b = 3.0f * a;
float c = 2.0f * (1.0f - a); 
```

这些`.0f`文字之后的这些真的有必要吗？如果省略这些，您会失去数字准确性吗？

我认为只有当你有这样的一行时才需要它们：

```
float a = 10;
float x = 1 / a; 
```

你应该在哪里使用`1.0f`，对吧？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T18:04:01.917

您需要在以下情况下使用它：

```
float x = 1/3; 
```

1 或 3 都需要有 a `.0`，否则 x 将始终为 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T19:05:27.037

如果`a`是一个`int`，这两行绝对不等价：

> 浮动 b = 3.0f * a;
> 浮动 b = 3 * a;

如果太大，第二个将静默溢出`a`，因为右侧是使用整数算术评估的。但第一个是完全安全的。

但是如果`a`是 a `float`，就像在你的例子中一样，那么这两个表达式是等价的。您使用哪一个是个人喜好的问题；第一个可能更卫生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T18:15:49.743

```
float b = 3.0f * a; 
```

有时这样做是因为您想确保将 3.0 创建为浮点数而不是双精度数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T18:16:02.727

这在某种程度上取决于您对数字的处理方式。`f`带有or的浮点字面`F`量的类型为`float`。不带后缀的浮点字面量的类型是`double`. 因此，使用`f`后缀与不使用后缀可能存在细微差别。

只要子表达式涉及至少一个浮点类型的对象，它可能并不重要。更重要的是使用带有整数的后缀来解释为浮点：如果子表达式中不涉及浮点值，则使用整数算术。这可能会产生重大影响，因为结果将是一个整数。

# android - Android：用于联系人选择的芯片库

> ID：12535744
> 
> 赞同：9
> 
> 时间：2012-09-21T18:00:23.830
> 
> 标签：android, contacts

有没有什么好的库可以在 Android 上实现 Chips UI？我一直在阅读消息传递应用程序的代码，但这似乎是无限阅读！:-(

Android 开发团队的 Roman Nurik 建议阅读以下内容：

[https://github.com/android/platform_packages_apps_mms/blob/master/src/com/android/mms/ui/RecipientsEditor.java](https://github.com/android/platform_packages_apps_mms/blob/master/src/com/android/mms/ui/RecipientsEditor.java)

[https://github.com/android/platform_packages_apps_mms/blob/master/src/com/android/mms/ui/ComposeMessageActivity.java](https://github.com/android/platform_packages_apps_mms/blob/master/src/com/android/mms/ui/ComposeMessageActivity.java)

我正在尝试创建一个允许我从联系人数据库中选择多个联系人的视图。有没有比编写我自己的平台代码版本更简单的方法？

# javascript - URL 不会通过 History 对象动态更改

> ID：12535752
> 
> 赞同：0
> 
> 时间：2012-09-21T18:00:39.070
> 
> 标签：javascript, browser-history

我正在尝试这段代码：

```
<!DOCTYPE html>
<html>
<head>
<script src="jquery.js"></script>
<script>
$(document).ready(function(){
  $("p").click(function(){
    var stateObj = { foo: "bar" };
history.pushState(stateObj, "page 2", "bar.html");
  });
});
</script>
</head>
<body>
<p>If you click on me, I will disappear.</p>
</body>
</html> 
```

我希望当我单击 a 时`p`，URL 的路径将更改为`bar.html`. 我正在从我的桌面尝试这个文件，所以 URL 看起来像`file:///C:/Documents%20and%20Settings/Cupidvogel/Desktop/hist.html`. 但是，当我单击 a 时没有任何反应`p`。我在这里做错了什么？

# php - 如何在php中检查变量的整数值

> ID：12535755
> 
> 赞同：1
> 
> 时间：2012-09-21T18:00:48.300
> 
> 标签：php

如果我正在检查一个变量以查看它是否是 bash 中的整数，则编码将类似于

```
if ! [[ "$yournumber" =~ ^[0-9]+$ ]] ; then 
```

php中有没有办法检查变量是否包含整数？

谢谢大家，我想我需要澄清一下，我想评估该数字没有十进制值示例是 nuber 1 vs 1.2 或任何其他带有小数的值。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T18:03:04.087

您可以[`ctype_digit`](http://php.net/manual/en/function.ctype-digit.php)为此使用：

```
if (ctype_digit($yournum)) {
    // ...
} 
```

> PHP 文档：
> 
> 检查提供的字符串 text 中的所有字符是否都是数字。

这不包括`.`，如他们的示例所示（在我链接的页面上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:10:13.320

对于自然数（非负整数） ，请`ctype_digit`按照其他人的建议使用。对于包括负数在内的整数，您可以使用此模式：`/\-?\d+/`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T18:04:48.707

还有`is_numeric()`，真的取决于你想做什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T18:02:24.153

完全一样的方式：`if( preg_match("/^[0-9]+$/",$yournumber))`

或者，试试这个：`if( strval(intval($yournumber)) === strval($yournumber))`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T18:02:38.160

您可以使用该函数[`is_int()`](http://php.net/manual/en/function.is-int.php)检查变量是否包含整数（整数）

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-21T18:02:55.827

也许这就是你要找的？

```
is_int($var) 
```

[http://php.net/manual/en/function.is-int.php](http://php.net/manual/en/function.is-int.php)

# cordova - PhoneGap (Cordova)/Kendo UI 应用程序在单击 ListView 链接时锁定

> ID：12535758
> 
> 赞同：1
> 
> 时间：2012-09-21T18:01:04.917
> 
> 标签：cordova, kendo-ui

我有一个使用 Kendo UI 作为前端的 cordova 应用程序。当我单击附加到我的列表视图项目之一的链接时，屏幕将锁定并且不允许我转到任何其他页面。我已经在他们自己的按钮中尝试了列表视图之外的相同链接，它可以正常工作。

这是我拥有的代码

```
<div id="detailList">
            <ul data-role="listview" data-style="inset" data-type="group">

                <li>
                    <ul>
                        <li><a href="tel:#:mobilephone#"><span class="sectionTitle">phone</span> #:mobilephone#</a></li>
                        <li><a href="mailto:#:email#"><span class="sectionTitle">email</span> #:email#</a></li>         
                    </ul>
                </li>
                <li>
                    <ul>
                    <li><span class="sectionTitle">specialtie(s)</span> #:specialties#</li>
                    <li><span class="sectionTitle">keyword(s)</span> #:keywords#</li>
                    </ul>
                </li>
            </ul>
        </div> 
```

如果我放置

```
<a href="mailto:#:email#" class="ios-button email" data-icon="email">Email</a> 
```

在 listview ul 之外的某个地方，我可以点击按钮，它会打开邮件应用程序，当我回到我的应用程序时，我可以毫无问题地导航。想知道是否有其他人遇到过这个问题，如果有，如何解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:21:41.483

为了防止您的链接被视为导航并使用散列 URL，请将 data-rel="external" 添加到列表项中的链接。

# c# - 如何在客户端计算机上使用 SQL 数据库应用程序运行 Crystal Reports

> ID：12535762
> 
> 赞同：0
> 
> 时间：2012-09-21T18:01:24.200
> 
> 标签：c#, winforms, visual-studio-2010, sql-server-2008, crystal-reports

我用**SQL Server DB开发了一个****桌面应用程序**。在开发机器中，SQL Server 使用 (local) 运行**。****我需要**在我的应用程序中添加 **Crystal Reports，它应该在客户端上运行。

 ****在这里，问题是**客户端机器上需要什么才能成功运行我的应用程序和数据库**。请记住，**在客户端没有安装 SQL Server。**

在这方面帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:11:38.620

如果水晶应该连接到数据库，您将需要在操作系统中建立与数据库的连接。您可以将 ODBC 或类似的与 sql server 2008 驱动程序一起使用。

此外，您必须设置报表以使用 SQL 驱动程序。****

# sql-server - 检索特定记录上方和下方的记录

> ID：12535764
> 
> 赞同：1
> 
> 时间：2012-09-21T18:01:37.667
> 
> 标签：sql-server, sql-server-2008

我经常在 SQLServer 中验证日志，我的查询通常如下所示（其中 Type = 0 表示错误）：

```
SELECT * 
FROM Logs 
WHERE Type = 0 
ORDER BY Timestamp 
```

但大多数时候，我不仅对错误本身感兴趣，而且对错误之前发生的事情感兴趣。

是否可以使用 SQLServer 查询匹配查询的 WHERE 子句的每一行上方/下方（相对于主键）的 n 行？

前任。通过我的查询，我只会得到第 125 和 130 行。我想要 [123、124、125] 和 [128、129、130]。

```
PrimaryKey  Timestamp             Type  Description
123         2012-09-17 03:41:46.240 1   Working.
124         2012-09-17 03:42:46.240 1   Database backup.
125         2012-09-17 03:43:46.240 0   Access violation.
126         2012-09-17 03:44:46.240 1   Working.
127         2012-09-17 03:45:46.240 1   Working.
128         2012-09-17 03:46:46.240 1   Working.
129         2012-09-17 03:47:46.240 1   Backup.
130         2012-09-17 03:48:46.240 0   Corrupted.
131         2012-09-17 03:49:46.240 1   Working. 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:10:57.623

我会这样做：

```
SELECT 
    L2.* 
FROM 
    Logs L1
    JOIN Logs L2
    ON 
        L1.PrimaryKey = L2.PrimaryKey OR 
        L1.PrimaryKey = L2.PrimaryKey - 1 OR
        L1.PrimaryKey = L2.PrimaryKey + 1
WHERE
    L1.Type = 0 
```

结果如下：

```
PrimaryKey  TS                      Type        Description
----------- ----------------------- ----------- -----------------
124         2012-09-17 03:42:46.240 1           Database backup.
125         2012-09-17 03:43:46.240 0           Access violation.
126         2012-09-17 03:44:46.240 1           Working.
129         2012-09-17 03:47:46.240 1           Backup.
130         2012-09-17 03:48:46.240 0           Corrupted.
131         2012-09-17 03:49:46.240 1           Working. 
```

您可以使用关系运算符修改连接条件以检索`n`匹配行上方和下方的行。

如果不保证 PrimaryKey 列是连续的，那么假设记录总是按`Timestamp`顺序`ASC`排序，以下查询将获取之前和之后的记录到选定的记录：

```
WITH LogsTable (PrimaryKey, TS, Type, Description, Rank) AS
(
    SELECT 
        PrimaryKey, 
        TS, 
        Type, 
        Description, 
        ROW_NUMBER() OVER (ORDER BY TS ASC) as 'Rank' 
    FROM 
        Logs
)
SELECT 
    L2.* 
FROM 
    LogsTable L1
    JOIN LogsTable L2
    ON 
        L1.Rank = L2.Rank OR 
        L1.Rank = L2.Rank - 1 OR
        L1.Rank = L2.Rank + 1
WHERE
    L1.Type = 0 
```

# postgresql - 将 PostgreSQL 查询结果存储到 Shell 或 PostgreSQL 变量

> ID：12535766
> 
> 赞同：8
> 
> 时间：2012-09-21T18:01:40.407
> 
> 标签：postgresql, shell

例如，我有一个表存储值：

```
select * from myvalue;

  val
-------
 12345
(1 row) 
```

如何将其保存`12345`到 postgresql 或 shell 脚本中的变量中？

这是我在我的 shell 脚本中尝试的：

```
var=$(psql -h host -U user -d db <<SQLSTMT
SELECT * FROM myvalue;
SQLSTMT) 
```

但`echo $var`给了我：

```
val ------- 12345 (1 row) 
```

我也试过

```
\set var (select * from myvalue) 
```

在 psql 中，当我键入`\set`它时列出：

```
var = '(select*frommyvalue)' 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-21T18:08:13.970

不不不！使用 psql 中的“原始数据”开关，例如“-t”或“\t”，并将查询通过管道传输到 psql，而不是解析 ascii-table，来吧:-)

```
echo 'select * from myvalue;' | psql -t -h host -U user -d db 
```

如果你真的需要解析 psql 输出，你也可以使用 -H 开关（打开 HTML 输出），并用一些 perl 模块来解析它来解析 html 表，我用过一次或两次。另外，你可能想要使用[pgpass 文件](http://www.postgresql.org/docs/current/static/libpq-pgpass.html)和[`~/.psqlrc`](http://www.postgresql.org/docs/current/static/app-psql.html#AEN85342)一些默认值，如默认连接的数据库，当未指定时。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-21T18:07:26.237

`psql`有一个`-c`/`--command=`选项来从命令行接受 SQL，和`-t`/`--tuples-only`选项来控制输出格式。

```
$ psql -c 'select 1+1'
 ?column? 
----------
        2
(1 row)
$ psql -t -c 'select 1+1'
        2

$ VALUE=`psql -t -c 'select 1+1'`
$ echo $VALUE
2 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-22T03:00:44.327

```
var=`psql -Atc "select 1;"`
echo $var
1 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-21T23:56:33.450

在[这个答案](https://stackoverflow.com/a/8305578/398670)中，我解释了一种方法，使用协同进程与`psql`. 如果您只需要运行一个查询并获得一个结果，那就太过分了，但如果您使用`psql`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-21T18:06:57.173

您可以过滤使用`psql`命令获得的结果：

```
var=$(psql -h host -U user -d db <<SQLSTMT
SELECT * FROM myvalue;
SQLSTMT)
var=$(cut -d' ' -f3 <<<$var) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-02T20:18:46.213

这些都不适合我，但这确实：

中值avm=`psql "host=${dps1000} port=#### dbname=@@@ user=${reduser} password=${redpass}" -c "SELECT AVG(column) FROM db.table;" -t`

使用定义了 ${dps1000}、${reduser}、${redpass} 的源文件并手动输入端口和数据库名

# java - 在 ServletContext 资源中定义名称为“jsonView”的 bean 创建时出错

> ID：12535767
> 
> 赞同：1
> 
> 时间：2012-09-21T18:01:40.677
> 
> 标签：java, json, spring, apache, tomcat6

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'xmlFileViewResolver' defined in ServletContext resource [/WEB-INF/gridmapping-servlet.xml]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jsonView' defined in ServletContext resource [/WEB-INF/views.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.dashboard.web.JsonView]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/apache/commons/collections/map/ListOrderedMap
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:480)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:429)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:728)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:380)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:402)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:316)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:282)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:126)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1206)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1026)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4421)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4734)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) 
```

# php - 在 Twitter Boostrap 类中使用“动作”

> ID：12535768
> 
> 赞同：0
> 
> 时间：2012-09-21T18:01:41.357
> 
> 标签：php, html, css, twitter-bootstrap

我是一名新手程序员，试图利用 Twitter Bootstrap 来构建一个概念。我正在使用 PHP 并将 HTML 标记中的操作分配给 POST 数据，并基本上引导用户完成导航。这在使用表单时非常简单：即这里是一个有效的片段。例如，对于这个 HTML 片段：

```
<form action="?viewnotes" method="post">
<input type="hidden" name="id" value="<?php htmlout($note['id']); ?>">
</form> 
```

它在我的 index.php 中成功触发了以下 if 语句：

```
if (isset($_GET['viewnotes'])) 
```

但是，我试图在我的注册页面中做同样的事情，使用 Twitter Bootstrap 类作为按钮。这是HTML：

```
<a class="btn btn-primary btn-large" action="?register">Sign Up Free!&raquo;</a></p> 
```

PHP代码是：

```
if (isset($_GET['register']))
{
include 'register.html.php';    
} 
```

单击“注册”按钮不会调用 PHP 代码。如果我硬编码它可以工作的 URL，但是我在 register.html.php 页面上遇到了类似的问题。注册页面上的 HTML 有：

```
<form class="form-horizontal" action="?storeuser" method="post">
  <fieldset>
        <legend>It's quick and easy...</legend>
        <div class="control-group">
            <label class="control-label">First Name</label>
            <div class="controls">
                <input type="text" name="fname" class="input-xlarge" id="fname">
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" name="lname">Last Name</label>
            <div class="controls">
                <input type="text" name="lname" class="input-xlarge" id="lname">
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" name="email">Email Address</label>
            <div class="controls">
                <input type="text" name="email" class="input-xlarge" id="email">
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" name="password">Password</label>
            <div class="controls">
                <input type="password" name="password" class="input-xlarge" id="password">
            </div>
        </div>
    </fieldset>
    <button type="submit" name="action" class="btn btn-primary btn-large">Complete Registration</button>
</form> 
```

但是，当单击按钮时，索引文件不会触发以下操作，这会将字段存储到数据库中。

```
if (isset($_GET['storeuser'])) 
```

如果我将 URL 硬编码为 register.html.php，则生成的 URL 看起来像 localhost/register.html.php?storeuser 而不是 localhost/?storeuser。我不确定这是否会影响这里的行为。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:14:58.930

我认为您以错误的方式处理此问题，这不是 Twitter Bootstrap 的错。

通常，您会使用**POST**而不是**GET**来处理用户注册。您的表单将如下所示：

```
<form action="register.php" method="post">
  <!-- your form -->
  <fieldset>
    <input type="submit" name="register" value="Register" class="btn btn-primary" />
  </fieldset>
</form> 
```

然后，您可以按如下方式构建**register.php ：**

```
<?php
if (isset($_POST['register'])) {
    // handle user registration
}

// display form
?> 
```

这将在用户访问**register.php**时显示表单，但如果表单已发布，将首先尝试处理用户注册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:04:23.780

尝试使用 GET 变量传递一个值

```
<form action="?viewnotes=1" method="post"> 
```

# version-control - 将制表符转换为空格：优点和缺点

> ID：12535773
> 
> 赞同：-1
> 
> 时间：2012-09-21T18:01:52.090
> 
> 标签：version-control, versioning

您对在团队开发环境中将制表符转换为空格有何看法？优点和缺点。

就个人而言，我喜欢将我的选项卡转换为空格，但我不愿意将现有的选项卡转换为从版本控制中签出，因为如果不是每个人都这样做，文件将显示为比我的更改多得多的行实际上是，这混淆了该版本和先前版本之间的更改差异。除非版本控制差异实用程序可以选择忽略选项卡。

每个人的想法是什么？在您的特定团队环境中的政策是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:14:23.410

*选项卡在各种 IDE 中看起来会有所不同。但空间不是。使用空格的主要原因是具有一致的缩进。如果我错过了什么，请添加。

# vb.net - Application.restart - VB.Net 中令人费解的行为

> ID：12535778
> 
> 赞同：8
> 
> 时间：2012-09-21T18:02:08.910
> 
> 标签：vb.net

好的，伙计们，这里发生了什么？在这个 VB 代码中：

```
Module Module1
Sub Main()

    If MsgBox("Restart?", MsgBoxStyle.OkCancel) = MsgBoxResult.Ok Then
        Application.Restart()

        MsgBox("restarting")

    Else
        MsgBox("Cancel")

    End If

End Sub
End Module 
```

如果此代码包含在模块中，Application.Restart 不会结束正在运行的应用程序，直到 End Sub 被命中。在此之前出现的任何代码都将被执行 - 例如，出现“重新启动”消息框。但是，如果在表单中运行等效代码，则 Application.Restart 会立即终止正在运行的应用程序。（两种情况都正确启动了一个新实例）。这种行为似乎没有在任何地方记录 - 文档中的含义是，就正在运行的实例的终止而言，它与“结束”同义。我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T10:50:26.160

回答这些问题的最佳方法是使用 Reflector（或 Microsoft 的免费调试代码，如果可用）查看代码本身。

使用 Reflector，您可以看到（在 .NET Framework 4.0 中）`System.Windows.Forms.Application.Restart`查找四种不同类型的应用程序：

*   初始检查`Assembly.GetEntryAssembly`是，如果是则`Nothing`抛出一个；`NotSupportedException`
*   与当前的 .NET Framework`Process.GetCurrentProcess.MainModule.FileName`位于`ieexec.exe`同一文件夹中（特别是模块定义所在的文件夹`Object`）；
*   `ApplicationDeployment.IsNetworkDeployed`是`True`；和
*   一般情况。

所有三种支持的情况都确定了再次启动流程的方法，再次调用`Application.ExitInternal`并启动流程。

`Application.ExitInternal``FormClosingEventArgs.Cancel`关闭打开的表单，包括通过设置为来检查试图中止关闭的表单`True`。如果没有表单尝试取消，则关闭表单并使用清理`ThreadContext.ExitApplication`所有表单（或调用它们）。`ThreadConnexts``Disposed``ApplicationContext.ExitThread`

NB No`Thread.Abort`被调用，因此线程*不会*以任何方式显式结束。此外，`Windows.Forms` `ModalApplicationContext`, 甚至不调用`ThreadExit`普通人所做的“事件” `ApplicationContext`。

[（请注意，所有三种受支持的情况都`Application.Restart` *忽略*了 的结果`Application.ExitInternal`，因此，如果一个表单确实尝试中止所有发生的事情，那么任何其他表单都没有机会关闭，并且 ThreadContexts 没有被清理！）]

对于您的问题，重要的是，它不会*尝试*实际退出当前线程或整个应用程序（除了关闭打开的表单和线程上下文）。

但是，当您`MsgBox("restarting")`执行时，新应用程序已经启动。

调用后需要手动退出应用`Application.Restart`。在“在表单中运行[ing]”的情况下（您没有显示测试的代码）表单已关闭，这就是您认为当前应用程序结束的内容，或者是额外的东西`Windows.Forms`（或 VB ) 设置意味着应用程序*由*在确实发生的清理运行时引发的“事件”之一退出。

换句话说，在测试它之前，我希望`MsgBox`即使此代码在`Click`表单事件中出现，表单首先消失，应用程序同时重新启动。

测试后，`MsgBox`尝试出现，因为我听到对应的哔哔声，如果我将其注释掉，哔哔声不会发生。因此，即使应用程序应该打开一个消息框，某些东西也会导致应用程序退出，甚至将 a`MsgBox`放在 a`Finally`之外`Application.Run`也不会出现在 a 上`Restart`。`MsgBox`（请注意，如果您在 之后调用，也会看到类似的效果`Application.Exit`。）

因此，由（或 VB）设置的`Windows.Forms`东西实际上确实调用了类似`Environment.Exit`调用 Win32Api`ExitProcess`并且不考虑`Finally`或调用`Dispose`or的东西`Finalize`。

请注意，`Application.Restart`文档暗示它不适用于控制台应用程序，尽管它目前工作正常（除了不立即退出，这不是由 暗示的`Application.Exit`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-27T16:33:27.930

我可以通过关闭和处理所有打开的表单来重新启动应用程序，除了正在调用的表单。

```
 For j As Integer = Application.OpenForms.Count - 1 To 0 Step -1
        Dim frm = Application.OpenForms(j)
        If frm.Text <> callingForm.Text Then
            frm.Close()
            frm.Dispose()
        End If
    Next

    Application.Restart() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T18:34:50.977

诚然，根据我对 Application.Restart() 所做的一些相当顶级的阅读，这将是一个猜测，但我认为这是由于 Restart 内部操作的方式而发生的。

我认为 Restart() 尝试对正在终止的进程进行尽可能多的“智能”清理，并且在可能被认为是相当简单的实现中，跟踪某些要“清理”的事物，可能调用Dispose() 对它们（如果适用），这通常是一个合理的步骤。在您的情况下，我将猜测后台线程或表单持有对某些东西的引用 - 不能说是什么 - 这会阻止代码关闭。它可能会意识到它正在一个方法内执行，并希望在杀死它之前给该方法一个完成的机会 - 等待该子/方法的完成。

我见过 Restart 的其他实例*在不涉及收集时实际上导致了一个**非常*奇怪的“Collection was Modified”错误。这可能是天真地向我暗示，Restart 试图实现的内部清理被放置在一个简单的列表中，但在某些情况下，清理以一种意想不到的方式修改了元素，一种修改集合的方式，导致异常被抛出，并中止退出/重新启动。

# c# - Winforms Designer 和 C#，如何以编程方式调用“默认”属性网格选择的功能

> ID：12535780
> 
> 赞同：2
> 
> 时间：2012-09-21T18:02:12.760
> 
> 标签：c#, winforms, reflection, windows-forms-designer

在 Visual Studio 设计器中，我可以将文本框的背景更改为蓝色。

要将其更改回其“默认”值，我可以右键单击该属性并单击“默认值”。

我的问题：我如何以编程方式做到这一点？我希望有机会将我的控件设置为自定义颜色以及从自定义颜色返回到它们的窗口默认值（不具体知道它们是什么）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T13:35:16.660

[Marc Gravell 的回答](https://stackoverflow.com/a/408870/719186)似乎符合您的要求：

```
PropertyDescriptor prop = TypeDescriptor.GetProperties(textBox1)["BackColor"];
if (prop.CanResetValue(textBox1)) {
  prop.ResetValue(textBox1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:14:25.550

是的，您可以更改任何控件的属性，或者您也可以通过设计器类查看它如何构建您的表单，检查`form1.designer.cs` 并阅读它，您可以在那里找到每个控件的初始化。

如果你想改变你的文本框背景颜色，这里是一个代码

```
 textBox1.BackColor = System.Drawing.SystemColors.HotTrack; 
```

# java - 在 Android 应用程序屏幕上将复选框中的选择显示为字符串

> ID：12535781
> 
> 赞同：0
> 
> 时间：2012-09-21T18:02:22.377
> 
> 标签：java, android, checkbox

我已经环顾四周，但未能找到答案 - 我对 Java/Android 比较陌生，所以如果这是一个基本问题，我深表歉意。我正在一个 Android 应用程序中创建一个“编辑配置文件”页面，对于其中一个字段，我创建了一个复选框对话框，在触摸该字段时打开。用户选中框并关闭对话框后，我希望选择以列表形式显示在“编辑配置文件”屏幕上。例如，如果用户在列表中选中“音乐”和“体育”，我希望它们在相关字段的屏幕上显示为“音乐，体育”。从网上环顾四周，似乎我可能需要制作一个已检查项目的数组列表，然后将它们转换为字符串......如果是这样，我该怎么做？一旦我有了琴弦，我将如何在页面上显示它们？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:14:13.557

您需要将 setOnCheckedChangeListener 设置为您的复选框；

```
 CheckBox box = (CheckBox) findViewById(R.id.chk_box);
box.setOnCheckedChangeListener(new OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
           // either you can save the selection list in array list andupdate your main display layout after the dialog is closed . or Update the display layout on  every time check state changes.
                if(isChecked) {
                   // save the selection list in array list
                    arrayList.add(buttonView.getText());
                   // or else update the display layout.
                   textview.setText(buttonView.getText());
                } else {
                    arrayList.remove(buttonView.getText());
                   // update layout
                   textview.setText(buttonView.getText());
                }
            }
        }); 
```

# mysql - 通过提供新模式来更改 MySQL 表

> ID：12535784
> 
> 赞同：0
> 
> 时间：2012-09-21T18:02:26.193
> 
> 标签：mysql

是否可以通过简单地提供新模式并让数据库弄清楚如何迁移来更改 mysql 表的模式？例如，假设我有一个包含两列的表：id、name。我想通过添加一个新列来修改这个表：标题。我知道我可以发出命令 ALTER TABLE tbl ADD COLUMN title。有没有办法我可以提供完整的架构并让 mysql 弄清楚它需要添加一个标题列？

我希望我的要求是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:13:32.117

MySQL 自己无法做到这一点，但我发现一个[博客](http://thenoyes.com/littlenoise/?p=98)说 MySQL Workbench 可以做到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:06:51.870

不——它不能仅仅给你的数据库一个新的模式。它必须四处走动，然后再猜测如何处理数据。（还有触发器，存储过程会发生什么......）

你有几个选择

1.  修改每个表并决定需要做什么
2.  导出数据，创建一个新数据库，然后弄清楚如何将其导入新机制。

# asp.net-mvc - 如何将 requireJS 文本插件指向 MVC 操作

> ID：12535790
> 
> 赞同：2
> 
> 时间：2012-09-21T18:02:46.463
> 
> 标签：asp.net-mvc, requirejs, requirejs-text

我想从 ASP.NET MVC 4 操作加载 HTML。所以完整的 URL 看起来像：

`http://localhost:7588/en/Dialogs/AclManager`

这是我声明依赖项的方式：

```
define(['jquery', 'text!AclManager'], function... 
```

这是我的`require.config`摘录：

```
require.config({ paths: { 'AclManager' : '/en/Dialog/AclManager' }}); 
```

使用此配置文本插件找不到扩展名并尝试加载：`/scripts/.AclManager`

如果我将依赖项声明为`AclManager.`（注意点），则需要转到“/en/Dialogs/AclManager”。这几乎是正确的，除了最后的那个点。

我可以声明依赖，`AclManager/.`因为我的服务器将忽略尾部`/`，但我宁愿没有尾部斜杠。

将文本指向我需要的 URL 的简单方法是什么？

# crystal-reports - 水晶报表字段浏览器不显示新添加的字段

> ID：12535794
> 
> 赞同：21
> 
> 时间：2012-09-21T18:03:00.093
> 
> 标签：crystal-reports, crystal-reports-2010

我用 datasets(xsd) 创建了一个水晶报表，它工作正常。然后我在 xsd 中添加了一个新字段，当我打开字段资源管理器时，它没有显示该字段，我通过数据库专家再次添加了源，但它仍然没有显示该字段。任何其他人遇到此类问题，请提供帮助。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-07-25T11:30:05.383

在等待了很多正确答案并在互联网上搜索后，我自己尝试了不同的选项，通过右键单击数据库字段然后单击验证数据库解决了问题。如果有人有更好的选择，请建议。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-22T16:01:34.543

我遇到了同样的问题，并通过添加参数输入并运行设计器的报告来解决它。水晶报表弹出并说它正在修复报表并刷新与最新字段的数据库的连接。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-07T14:18:14.587

我有一个类似的简单位置`Log on or Log off server`，`Verify Database`不会更新 Crystal Reports 中的数据库字段列表。唯一对我有用的是将键入的数据集物理移动到不同的位置。在内部创建新连接后，`Set Datasource Location`我更新了数据源，它就在那里......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-07T08:09:18.677

Sap Crystal 报表在将数据库更改刷新到 Crystal 报表时出现问题。我找到了这个解决方案，它就像一个魅力：

*   首先去刷新数据库选项，然后它会要求你输入参数值到存储过程
*   然后不传递任何值，只需按转义按钮，它会突然要求您确认对数据库所做的更改，当您第二次这样做时，它会说数据库是最新的

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-30T03:49:38.553

不要忘记在验证数据库之前重建您的解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-28T09:57:17.583

重新启动机器对我有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-20T09:44:40.547

1.  数据集中的某些数据类型无法在水晶报表中显示尝试更改数据类型（示例不要`System.DateTimeOffset`使用`datetime`仅使用）
2.  数据库字段中的 Verity 数据库

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-21T11:24:53.433

如果您的 DataSet (.xsd) 来自“添加现有文件”而不是创建一个，那么您将遇到像我这样的问题。解决这个问题：

- 查找 DatasetName.xsd 文件及其所有类似名称的文件。复制它，除了 DESIGNER (DatasetName.Designer.cs) 并将其粘贴到某个地方，稍后您将重新粘贴它

-在你的VS中。通过在解决方案资源管理器中右键单击它来删除项目中的 DataSet（xsd 文件）。这将删除任何文件痕迹。

- 将您复制的文件重新粘贴到同一位置。然后在VS中。并添加您重新粘贴的 xsd 文件。

-然后您现在可以添加列。它会更新数据集，水晶报表也会看到更新的列

原因：对于我不知道发生了什么，如果您包含设计器文件然后将其添加到您的项目中，然后向其中添加列，VS 将创建新的 Designer.cs 文件而不是覆盖现有文件。因此该列仅在原始中注册，但新创建的仅被识别为有效（这是没有新添加列的痕迹）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-01-23T04:30:24.240

您可以按 F5 预览，如果水晶报表发现新字段，它将验证数据库中的所有字段，并且您的新字段将出现。希望对你有帮助！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-06-10T16:08:54.580

从服务器注销，然后验证数据库，这对我有用！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-06-24T11:25:53.530

仅更新整个数据源位置对我不起作用。我必须扩展源位置，然后更新单个表。希望这可以帮助某人。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-07-17T11:56:37.073

[![在此处输入图像描述](../Images/35155b5a22f699bac819cf1f82abb3bc.png)](https://i.stack.imgur.com/2BTV2.png)

右键单击**REPORTDATASET**然后选择**Set Datasource Location**。

* * *

[![在此处输入图像描述](../Images/af38da52dc0cb37dc487fead696c829d.png)](https://i.stack.imgur.com/2TqTc.png)

单击 **数据库文件**并选择现有的***.xsd**。然后你会看到**REPORTDATASET**。选择它。

*   更新
*   关闭

现在您将在 *.rpt 中看到新字段 :)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-09-20T09:10:52.450

我使用以下技术：

1.  选择水晶报表中的datadese专家
2.  选择之前添加的数据表。
3.  按“<<”将其从报告中删除，其相关列将自动从报告中删除。
4.  然后选择`Project Data`>>>>`ADO .Net DataSets`*`your updated dataset`*
5.  按“>>”添加并单击`OK`按钮。
6.  新添加的字段也显示在数据库字段中，然后添加到报告中。

# java - 没有域关联的 java 包名称的约定是什么？

> ID：12535798
> 
> 赞同：47
> 
> 时间：2012-09-21T18:03:07.567
> 
> 标签：java, android, naming-conventions, package, conventions

我在 SO 上找不到回答我*确切*问题的 Q/A，所以我想我会发布它，看看会发生什么。

就 Java 包的命名约定而言，我知道它应该是反向域名：`com.whatever.stuff`并且我得到了关于禁止混合大小写、连字符、关键字等的规则。

我还阅读了 Java 语言规范的第 7.7 节（唯一包名称）。据我所知，Java 的规则是使用反向域来确保唯一性......如果你没有，那就去买一个：

`You form a unique package name by first having (or belonging to an organization that has) an Internet domainname, such as sun.com.`- 第 7.7 节

因此，如果我对花钱购买域名不感兴趣，我不属于我可以捎带名字的公司，我是否遗漏了应该遵循的命名约定的任何部分? 我想我可以随心所欲地为它命名，但我只是想知道我是否遗漏了任何东西。

**注意：**我想发布我的包供其他开发人员使用，所以我不想只做一些在我的系统上工作的东西，但如果可能的话，做一些更标准的东西。

我添加了android标签，因为我将要编写的java包将用于Android应用程序，不确定android开发人员是否有不同的意见。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-21T18:06:25.600

如果您要分发很多东西，我真的建议您获得一个域名。然而，另一种选择是使用您的电子邮件：例如`bob@gmail.com`将成为`com.gmail.bob`. 这比使用域名少见，但仍然由一些人完成，并且仍然确保唯一性。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-09-21T18:09:11.667

一种约定是使用托管服务提供商的域名，例如

```
com.github.myrepositoryname
net.sf.sourceforge.myproject
com.googlecode.myproject 
```

好处：

*   您的包命名空间将是唯一的，因为托管服务提供商不会有两个同名项目
*   它只和主机的成本一样昂贵，其中许多是免费的
*   [如果你想让你的项目进入 Maven Central](https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide#SonatypeOSSMavenRepositoryUsageGuide-3.CreateaJIRAticket)，这可能是满足 Sonatype 要求的一种简单方法

缺点：

*   如果您决定更改提供程序，则您的包结构已经过时，或者您引入了向后不兼容的更改以使源代码与您的新提供程序保持一致

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-21T18:09:40.307

域名可以免费获得。[例如 dyn.com 在http://free.domain.name/](http://free.domain.name/)上提供“whatever.dyndns.org”形式的免费域名

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-21T18:19:03.977

如果您是唯一的编码员，则可以使用您的姓名。我的名字是 Jannis Froese，所以我会使用

> jannisfroese.projectname.stuff

或者如果您想保留“有效”域名

> localhost.jannisfroese.projectname.stuff

（localhost 是保留的顶级域）

当然，这仅在您的名字足够独特的情况下才有效，因此不太可能发生冲突

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-21T18:08:31.527

在专业环境中，惯例是使用反向域。在与自己更相关的环境中，您可以使用`org.projectname.packagename.*`.

这是一个惯例，而不是硬性规定。您可以自由使用您喜欢的任何域命名样式。

# jquery - 在jQuery中向后循环滑块

> ID：12535799
> 
> 赞同：1
> 
> 时间：2012-09-21T18:03:09.297
> 
> 标签：jquery, loops

我正在构建一个带有“下一个/上一个”箭头的自定义循环滑块。

实际上，我的 NEXT (1->2->3..) 工作元素很好，但是当涉及到向后循环 PRV (1->3->2..) 动画运行但最后一个元素没有跟随直到它调用回调函数。

甚至回调也放置“下一个”。

例如，我按 PREV 并在幻灯片 #1 上，我希望幻灯片 #3 跟随..

```
function slide() 
        {
            $('.next').click(function slideNext()
            {
                // Animate left
                $this.animate({'left' : '-' + $this.parent().width()}, options.speed, function()
                {
                    // Return css left:0 and call the next slide
                    $this
                        .css('left', 0)
                        .children(':first')
                        .appendTo($this); 
                })
            });// End slideNext()

            $('.prev').click(function slidePrev()
            {   

                // Animate right
                $this.animate({'left' : '+' + $this.parent().width()}, options.speed, function()
                {
                    // Return css left:0
                    $this
                        .css('left', 0)
                        .children(':first')
                        .appendTo($this); 

                })
            });// End slidePrev()
        } 
```

# algorithm - O(n) - 按字典顺序排列的下一个排列

> ID：12535807
> 
> 赞同：1
> 
> 时间：2012-09-21T18:03:44.010
> 
> 标签：algorithm

我只是想知道[这个算法](http://en.wikipedia.org/wiki/Permutation)的效率（O（n））是多少：

1.  找到满足 a[k] < a[k + 1] 的最大索引 k。如果不存在这样的索引，则排列是最后一个排列。
2.  找到最大的索引 l 使得 a[k] < a[l]。由于 k + 1 是这样一个索引，所以 l 是很好定义的并且满足 k < l。
3.  将 a[k] 与 a[l] 交换。
4.  反转从 a[k + 1] 到最后一个元素 a[n] 的序列。

据我了解，最坏的情况 O(n) = n （当 k 是前一个排列的第一个元素时），最好的情况 O(n) = 1 （当 k 是前一个排列的最后一个元素时）。

我可以说 O(n) = n/2 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:20:40.330

`O(n) = n/2`没有意义。让`f(n) = n`成为您的算法的运行时间。那么正确的说法`f(n)`就是 in `O(n)`。 `O(n)`是一组至多在 中渐近线性的函数`n`。

您的优化使预期的运行时间`g(n) = n/2`。 `g(n)`也在`O(n)`。事实上`O(n) = O(n/2)`，你节省的一半时间不会改变渐近复杂度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T18:19:08.743

算法中的所有步骤都是`O(n)`渐进的。

您的平均值不正确。仅仅因为最好的情况是 O(1) 而最坏的情况是 O(n)，你不能说算法需要 O(n)=n/2。大 O 表示法仅用于算法的上限。

所以算法仍然`O(n)`与最佳情况无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T18:10:04.947

没有像 O(n) = n/2 这样的东西。

当您进行 O(n) 计算时，您只是想找到函数依赖关系，而不关心系数。所以没有 O(n)= n/2 就像没有 O(n) = 5n

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T18:11:39.653

渐近地，O(n) 与 O(n/2) 相同。在任何情况下，算法都是针对 n! 排列，因此顺序比您的估计要大得多（大约为 n！）。

# iphone - 参数和选择器

> ID：12535812
> 
> 赞同：1
> 
> 时间：2012-09-21T18:04:00.403
> 
> 标签：iphone, objective-c, ios

这是：

```
[self showInWindow:window]; 
```

`delay`这段代码调用了什么：

```
[self performSelector:@selector(showInWindow:)
           withObject:window
           afterDelay:delay]; 
```

还是我误解了方法？

**编辑**：我遇到的问题是该方法`showInWindow`在延迟后被调用，但行为类似于`[self showInWindow:nil]`. 有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:07:40.813

是的，这就是所谓的。（当然是在延迟之后。）

[该文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/performSelector:withObject:afterDelay:)并没有真正解释“执行选择器”的含义，但它的含义正是您所怀疑的。

使用类型方法和直接发送消息之间有一个小的区别`performSelector:withObject:`：它们只有在对象实际上是一个对象（即`id`，一个指向 Objective C 对象的指针）时才起作用。但`window`显然是一个对象。

（严格来说，这并不完全正确。如果您传递与 a 大小相同`id`或更小的东西，它通常会起作用。在某些情况下它不会。在某些情况下它会起作用，但是是非法的。在某些情况下情况下，它会起作用并且是合法的，但Apple强烈建议不要这样做。没有任何情况下这是一个好主意 - 所以不要学习特定规则，只是假设它永远不会起作用。提出这个问题的唯一原因是它使用了早在 NeXT 时代就成为 Objective C 中的常见做法，因此您可能偶尔仍会在今天的其他人中看到它。）

有关该`performSelector:`系列的更多信息，请参阅[NSObject Protocol Reference](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html)和 SO 问题[Using -performSelector: vs. just calling the method](https://stackoverflow.com/questions/1493125/using-performselector-vs-just-calling-the-method)。（有关`afterDelay:`变体的具体信息，请参阅上面链接的文档。）

从后来的编辑到问题：

> 我遇到的问题是该方法`showInWindow`在延迟后被调用，但行为类似于`[self showInWindow:nil]`. 有什么建议吗？

首先，它以什么方式“表现得像”参数为零？参数实际上是 nil 吗？（只需将其记录在`showInWindow:`实现中；如果您尚未覆盖基本实现，只需添加一个覆盖记录并调用基本实现。）

其次，如果它实际上是 nil，那么在你发送的时候它是 nil`performSelector:withObject:afterDelay:`吗？如果是这样，显然发送选择器时它仍然为零。另外，请确保`window`确实是一种`id`而不是其他类型。（请注意，如果您有成员、属性、全局变量和/或本地变量共享名称`window`，则可能会混淆您指的是哪一个。这是问题的常见来源。）

如果你安排它时它实际上不是 nil，但它到达时它是 nil，有几种方法可能发生，但它们都比这两种情况更不可能，而且调试起来更棘手，所以让我们先排除它们.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:08:20.983

是的，这就是它的作用......尽管请记住，执行时间可能比延迟时间长。该方法基本上在当前线程的运行循环中设置了一个`NSTimer`，因此如果您的线程忙于执行繁重的工作并且运行循环的返回时间比您延迟返回的时间长，那么您的方法将稍后执行。

# javascript - 无法在 href 标签中获取 img src

> ID：12535815
> 
> 赞同：-1
> 
> 时间：2012-09-21T18:04:14.400
> 
> 标签：javascript, jquery, ajax

我似乎无法使用以下代码从 href 标记内获取 img src 路径：

```
$(document).on('click', '.imagemodal', function() {

    var imgsrc = $('img', this).attr("src");

    alert("IMG: " + imgsrc);

}); 
```

我的 HTML 如下所示：

```
<a href="#" class="imagemodal"><img src="/images/psmith/5/image.jpg" /></a> 
```

知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:18:22.523

检查这个，它有效：http: [//jsfiddle.net/xhhqU/1/](http://jsfiddle.net/xhhqU/1/)

HTML：

```
<a href="#" class="imagemodal"><img src="http://www.gstatic.com/webp/gallery3/1.png" /> 
```

jQuery：

```
$(document).on('click', '.imagemodal', function() {
    var imgsrc = $('img', this).attr("src");
    alert("IMG: " + imgsrc);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:06:37.003

你似乎没有关闭你的锚标签..

```
<a href="#" class="imagemodal"><img src="/images/psmith/5/image.jpg" /></a> 
```

检查[小提琴](http://jsfiddle.net/sushanth009/s247w/)

您是否在浏览器的控制台部分的页面中收到任何错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-16T08:51:48.180

```
<a href="#" class="imagemodal"><img src="/images/psmith/5/image.jpg" /></a>

$(document).ready(function () {
$('.imagemodal').on('click', function () {           
        var opt_text = $(this).find("img").attr("src");
                    alert(opt_text);               
     })
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T18:21:18.473

你使用什么 jQuery 版本？如果它在 1.7 之前它不起作用。与后来的人一样。

请参阅从 jQuery 文档页面获取的信息：“.on() 方法将事件处理程序附加到 jQuery 对象中当前选定的元素集。从 jQuery 1.7 开始，.on() 方法提供了附加事件处理程序所需的所有功能。 "

# c++ - Nsight Eclipse 可以分析 C++ 代码吗？

> ID：12535818
> 
> 赞同：4
> 
> 时间：2012-09-21T18:04:23.557
> 
> 标签：c++, cuda, nsight

我们有 C++ 代码，我们想在向其添加 CUDA 代码之前使用 Nividia Nsight Eclipse（Linux 版本）对其进行分析。想法是先对 C++ 进行剖析，找到热点，将其转换为 CUDA，再次剖析，然后迭代此过程以逐步加快代码速度。但是，当我们仅对 C++ 进行分析时，分析器似乎需要一些现有的 CUDA 代码才能生成时间线和分析输出。有人遇到过这种情况么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:04:49.830

Nsight Eclipse Edition 只能分析 CUDA 代码。您可能需要安装第 3 方分析插件来分析主机代码。

您可以尝试从 Eclipse Foundation 站点安装 OProfile 集成（将[http://download.eclipse.org/releases/indigo/](http://download.eclipse.org/releases/indigo/)粘贴到 Help/Install New Software... 对话框中） - 我刚刚尝试过，但无法正确设置 oprofile命令行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T21:47:34.567

您可以使用 nvtx（NVIDIA 工具扩展）手动检测您的代码，并在 Nsight 中显示时间线，但对于自动分析和详细计数器，它只能分析 GPU 代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-05T11:24:58.253

是的，Nsight Eclipse 可以分析 C++ 代码。重新表述您的问题，它还可以分析主机 (CPU) C++ 代码。默认情况下，它只分析 GPU 代码。CPU 分析是一项更加手动的任务；它不会自动分析功能。

您需要使用 NVTX。像这样：

```
#include "nvToolsExt.h"
nvtxNameOsThread(0,"InputVideo");
nvtxRangePush(__FUNCTION__);
// .. do some CPU computing here
nvtxRangePop(); 
```

使用 -lnvToolsExt -L/usr/local/cuda/lib64 构建

每个人的 libnvToolsExt.so 路径都会有所不同。NVTX 附带 CUDA 工具包。

[CUDA 博客对此有一篇文章。](https://devblogs.nvidia.com/parallelforall/cuda-pro-tip-generate-custom-application-profile-timelines-nvtx/ "可选标题")

# ssl - 在服务器端检测不受信任的 SSL 访问？

> ID：12535823
> 
> 赞同：1
> 
> 时间：2012-09-21T18:04:45.380
> 
> 标签：ssl, server-side, trusted-vs-untrusted

# 问题

有没有办法检测访问者是否信任 SSL 连接/证书？我真的在网上或 stackoverflow 上找不到任何东西。我认为这是一个非常罕见的问题。

# 用例

我正在使用来自 StartSSL 的证书。它适用于大多数常见和现代浏览器。但是在使用 IE 的 Windows Phone 上，我收到了警告。这是因为默认情况下，Windows Phone 上的 IE 不知道根证书。

解决方案很简单：只需下载证书 - 两次点击/点击。我想为普通访问者提供一个关于如何做到这一点的小指南。但是，只有有问题的访客才能收到消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:40:39.190

通过 HTTPS 连接到您网站的访问者如果不信任您的证书，就根本无法访问您的网站。一旦添加了例外，您就无法确定它是普遍受信任的还是例外。

也许您可以尝试构建用户代理列表并猜测它们的默认 CA 应该是什么，以便在这种情况下能够显示附加消息。这不是一个完美的规则（因为您永远无法完全控制客户端信任的内容，这是用户/管理员的责任），并且具有用户代理特定内容的缺点；特别是，它不一定可靠，您不会拥有完整的数据库，并且已经添加异常或永久导入证书的用户会看到此附加消息（除非您使用类似 cookie 的东西来记住）。

如果您的初始页面是通过普通 HTTP 进行的，您也许可以尝试向您的 HTTPS 站点发出 XHR 请求并报告它是否有效。（您可能需要考虑同源策略。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T18:39:43.993

我不确定是否有一种万无一失的方法来自动检测这种情况。您可能不得不依赖一种解决方法。

通过检查标头中的用户代理来检测请求是否来自手机，检查他们是否是第一次访问您的网站（没有您网站的 cookie 等），如果他们是第一次用户，则将响应重定向到（HTTP ) 页面，其中包含安装证书的说明。您可以在该页面上为用户提供一个复选框，以在未来抑制该重定向行为。如果他们希望它被抑制，请设置一个 cookie，或将他们的偏好存储在服务器上（如果有身份验证）。

# php - 如果 wordpress 中存在，则不允许注册用户 url

> ID：12535827
> 
> 赞同：0
> 
> 时间：2012-09-21T18:04:49.877
> 
> 标签：php, wordpress, url, web, registration

我正在尝试在不允许用户网站注册更多次的 WordPress 上设置注册。简单地说——我不希望一个用户在同一个网站上多次注册。这适用于电子邮件和用户名。如果电子邮件已在使用中，则不允许注册。同样的事情，但对于用户的网址。您对如何设置有什么建议吗？谢谢！

我试图创建一个检查 url 的函数，如果发现它会产生错误。但我不确定是否有其他实例阻止我的设置，因为它不起作用。另外我正在使用 wp-members 插件进行注册。我试图编辑的代码在 wp-includes/users.php

```
function user_url_exists( $user_url ) {
if ( $user_url = get_user_by('url', $user_url) ) {
        return $user_url->ID;
} else {
        return null;
}}

if ( !$update && ! defined( 'WP_IMPORTING' ) && user_url_exists($user_url) ) return new WP_Error('existing_user_url', __('This website address is already registered.') ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T08:30:45.967

你可以试试[WangGuard](http://wordpress.org/extend/plugins/wangguard/)插件。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:54:45.280

很抱歉，但这必须在 WP 会员论坛中提出。以为您正在开发自定义代码... :(

[http://butlerblog.com/wp-members/](http://butlerblog.com/wp-members/)

最好的！ **R**

# android - 从数据库读取短信并将其存储到文本文件中的时间太多

> ID：12535828
> 
> 赞同：0
> 
> 时间：2012-09-21T18:05:11.010
> 
> 标签：android, sms

我正在从数据库中读取短信记录并将它们写入文本文件。但是读取 n 写入 3500 条记录需要 3 到 4 分钟的时间。如果记录远不止这些，则需要大量时间，这是不可估量的。我的代码是：

```
final Cursor cur1 = c.getContentResolver().query(Uri.parse("content://sms/"), null, null, null, "date ASC");
final int size = cur1.getCount();

final int sleeptimer = size;

final SMS [] sms = new SMS[size];

final String baseDir = Environment.getExternalStorageDirectory().getAbsolutePath()+ File.separator + "account.txt";

FileWriter fw = null;
try {
    fw = new FileWriter(baseDir);
} catch (IOException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
}
final BufferedWriter writer = new BufferedWriter(fw);

Thread  myThread = new Thread()
{
    public void run()
    {
        try
        {
            int currentwait = 0;
            int j=0;
            while(currentwait < sleeptimer)
            {
                sleep(200);
                currentwait+=200;
                for(int i = 0 ; i < 200 ; i++)
                {
                    if(!cur1.moveToNext())
                    {
                        break;
                    }
                    ContactInfo p = new ContactInfo();
                    String content = cur1.getString(cur1.getColumnIndex("body"));
                    String number = cur1.getString(cur1.getColumnIndex("address"));
                    long date = cur1.getLong(cur1.getColumnIndex("date"));
                    String protocol = cur1.getString(cur1.getColumnIndex("protocol"));
                    String name = p.getName(number, c);
                    String type = null;

                    Calendar cal=Calendar.getInstance();
                    cal.clear();
                    cal.setTimeInMillis(date);

                    String date_time=String.format("%1$te %1$tB %1$tY,%1$tI:%1$tM:%1$tS %1$Tp",cal);

                    if( protocol == null )
                    {
                        type = "Outbox";
                    }
                    else
                        type = "Inbox";

                    try{

                        writer.write("Type: " + type);
                        writer.newLine();

                        writer.write("Name: " + number+"<"+name+">");
                        writer.newLine();

                        writer.write("Date: " + date_time);
                        writer.newLine();

                        writer.write("Content: " + content);
                        writer.newLine();
                        writer.newLine();

                    } catch (IOException e) {
                        Log.i("INFO", e.getMessage().toString());
                    }

                    //Log.i("INFO", content+" "+j);

                    sms[j] = new SMS(type , name , number , date_time , content );
                    j++;
                }
            }
        }
        catch(Exception e)
        {

        }
        finally{
            try{
            writer.flush();
            writer.close();
            }
            catch (Exception e) {

            }

            uploadtoserver(baseDir);
        }
    }
};
myThread.start(); 
```

任何改进它的想法???谢谢:)））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:39:29.330

只需删除此行：

```
sleep(200); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:04:28.347

调用[setMaxSqlCacheSize](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#setMaxSqlCacheSize%28int%29)增加缓存大小。默认为10。先尝试设置20，看看时间是否减少到一半..

*或/和*

您可以在对 db 执行任何操作之前执行此 sqlite 查询，看看这是否会提高速度。将临时存储更改为`memory`应该可以提高读写速度..

```
PRAGMA temp_store = 2; /* 0 | DEFAULT | 1 | FILE | 2 | MEMORY; */ 
```

当 temp_store 为 MEMORY (2) 时，临时表和索引被保存在内存中，就好像它们是纯内存数据库内存一样

还

```
PRAGMA page_size = bytes; 
```

查询或设置数据库的页面大小。页面大小必须是 512 和 65536（含）之间的 2 的幂。

可能您可以将这些语句传递给`execSQL(String sql)`或传递给`query()`. 试着让我知道它是如何工作的。

查看 Sqlite 支持的其他 PRAGMA：[http ://www.sqlite.org/](http://www.sqlite.org/pragma.html#pragma_auto_vacuum)

* * *

## 更新：

从`query`API 文档：

为了获得最佳性能，调用者应遵循以下准则：

*   提供显式*投影*，以防止从存储中读取不会使用的数据。
*   使用问号参数标记*`'phone=?'`*代替*选择*参数中的显式值，以便仅将这些值不同的查询识别为相同的缓存目的。

# android - 在轮播中自动显示当前图像的位置

> ID：12535831
> 
> 赞同：1
> 
> 时间：2012-09-21T18:05:29.967
> 
> 标签：android, position, carousel

在我的应用程序中，我有一个带有图片的轮播。我想自动检测没有`clickListener`.

例如：当我滚动我的轮播时，我的位置为零，我想自动显示当前图像的位置。

我已经尝试了一切都没有成功。任何想法？

我的代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final Carousel carousel = (Carousel)findViewById(R.id.carousel);

    carousel.setOnItemSelectedListener(new OnItemSelectedListener(){ 

        public void onItemSelected(CarouselAdapter<?> parent, View view, 
               int position, long id) { 

            carousel.setCallbackDuringFling(false);   

            //final int[] ids = {R.drawable.bee, R.drawable.robot, R.drawable.adresse};      

            switch(position){ 
            case 0: 

                //view.setBackgroundResource(ids[0]); 

                Toast.makeText(MainActivity.this, "Position=" + position, Toast.LENGTH_LONG).show();                               
                break; 
            case 1: 
                 //view.setBackgroundResource(ids[1]); 

                Toast.makeText(MainActivity.this, "Position=" + position, Toast.LENGTH_LONG).show();
                break; 
            case 2: 

                Toast.makeText(MainActivity.this, "Position=" + position, Toast.LENGTH_SHORT).show();
                break; 
            case 3: 

                 Toast.makeText(MainActivity.this, "Position=" + position, Toast.LENGTH_SHORT).show();
                 break; 
            case 4: 

                 Toast.makeText(MainActivity.this, "Position=" + position, Toast.LENGTH_SHORT).show();
                 break; 
            case 5: 

                 Toast.makeText(MainActivity.this, "Position=" + position, Toast.LENGTH_SHORT).show();
                 break; 

            } 

        } 

       public void onNothingSelected(CarouselAdapter<?> parent) { 

       } 

    } 
    ); 

    carousel.setOnItemClickListener(new OnItemClickListener(){

        public void onItemClick(CarouselAdapter<?> parent, View view,
                int position, long id) {                

            switch(position){ 
            case 0: 
                Intent myIntent1 = new Intent(MainActivity.this, Onglet1.class); 
                MainActivity.this.startActivity(myIntent1);
                break;
            case 1: 
                Intent myIntent2 = new Intent(MainActivity.this, Onglet1.class); 
                MainActivity.this.startActivity(myIntent2);
                break;
            case 2: 
                Intent myIntent3 = new Intent(MainActivity.this, Onglet1.class); 
                MainActivity.this.startActivity(myIntent3);
                break;
            case 3: 
                Intent myIntent4 = new Intent(MainActivity.this, Onglet1.class); 
                MainActivity.this.startActivity(myIntent4);
                break;
            case 4: 
                Intent myIntent5 = new Intent(MainActivity.this, Onglet1.class); 
                MainActivity.this.startActivity(myIntent5);
                break;
            case 5: 
                Intent myIntent6 = new Intent(MainActivity.this, Onglet1.class); 
                MainActivity.this.startActivity(myIntent6);
                break;
            } 

        } 

    });  
}

} 
```

# java - 如何绘制简单的 GUI 直方图

> ID：12535832
> 
> 赞同：-3
> 
> 时间：2012-09-21T18:05:47.023
> 
> 标签：java, project, histogram

我需要为我正在处理的项目绘制一个简单的直方图，需要看这个......

![直方图](../Images/cbd75fef9ab2c3184f2f1bf71e31b93e.png)

我知道必须在我的 H[] 数组上运行一些简单的 for 循环，其中包含属于每个灰度值的像素数......所以在 H[] 中，我们可以说“灰度值中的 10 个像素1" 所以在 1 处会有一条长度为 10 的线在我的图像旁边垂直...

如果有人可以提供帮助，我将不胜感激！

谢谢。

写了这个，但它太大了，而且因为某种原因颠倒了，而且倾斜了。

```
 if (H != null) {
                    int width = getWidth();
                    int height = getHeight();           
                    int HhPos = (width - (width/2));
                    int HvPos = (height - (height));
                  for(int i = 0 ; i <255 ; i++){
                     g.drawRect(i+HhPos, i+HvPos, 1, H[i]);

                   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:33:49.330

您正在绘制具有 x 和 y 值的点。您正在绘制一个以像素为单位的宽度和高度的直方图。

例如，假设您的直方图宽度为 500 像素，高度为 300 像素。

您遍历数据点一次，寻找最小 x、最小 y、最大 x 和最大 y。

假设我们正在绘制 Y 点（X 轴是宽度），则从最大 x 中减去最小 x。将 500 像素（宽度）除以差值，即可得到每个 x 值的像素数。这个数字可以大于一，因此每个 x 值有多个像素。这个数字可以小于一，因此您拥有的数据值比像素多。

```
width pixels per value = width of histogram in pixels / difference in X points 
```

你对 Y 轴做同样的事情。计算每个 y 值的像素。

```
height pixels per value = height of histogram in pixels / difference in y points 
```

现在，您再次检查数据点。对于每个数据点，您可以根据数据点的 x 和 y 值计算宽度和高度（以像素为单位）。您使用宽度和高度的每个值的像素数进行转换。

```
width = x value * width pixels per value

height = y value * height pixels per value 
```

您使用 Java`Graphics` `drawLine`或`drawRect`方法在直方图中绘制线条或条形。请记住，Java 图形中的 Y 维度会下降，而不是像直方图中那样上升。绘图时必须考虑到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:51:06.970

正如吉尔伯特所说，您需要标准化您的值，以确定最大范围或上限。

然后，您可以从中确定给定值与最大值相比的百分比，然后根据可用高度将其绘制在图表上。

（取自[这个问题的上一个答案](https://stackoverflow.com/questions/12518496/drawing-a-graphical-histogram/12520104#12520104)）

```
// Determine the maximum vertical value...
int maxValue = 0;

for (Integer key : mapHistory.keySet()) {
    int value = mapHistory.get(key);
    maxValue = Math.max(maxValue, value);
}

int xPos = xOffset;

for (Integer key : mapHistory.keySet()) {
    int value = mapHistory.get(key);
    // Calculate the percentage that the given value uses compared to that of the
    // maximum value
    float percentage = (float)value / (float)maxValue;
    // Calculate the line height based on the available vertical space...
    int barHeight = Math.round(percentage * height);
    g2d.setColor(new Color(key, key, key));

    int yPos = height + yOffset - barHeight;
    Rectangle2D bar = new Rectangle2D.Float(xPos, yPos, barWidth, barHeight);

    g2d.fill(bar);
    g2d.setColor(Color.DARK_GRAY);
    g2d.draw(bar);

    xPos += barWidth;
} 
```

现在在前面的示例中，我使用`Map`to 来存储值，但是用您的数据数组替换它应该相对容易......

`for (Integer key : mapHistory.keySet())`会成为`for (int key : H)`

此外，`Graphics.drawLine`它是从一个点到另一个点画一条线，而不是从一个点到宽度/高度值（比如说`Graphics.drawRectangle`）

# javascript - 试图让 Chrome 使用 onbeforeunload 显示即将离开的页面

> ID：12535835
> 
> 赞同：1
> 
> 时间：2012-09-21T18:05:58.563
> 
> 标签：javascript, dom-events, onbeforeunload

我正在开发一个 Javascript，它假设对元素执行单击功能，并显示一个弹出窗口，询问您是否真的要离开该站点（关闭选项卡）。现在该代码在 IE 和 Firefox 上运行良好。但是 Chrome 虽然它在做这件事方面确实做了重要的事情，但`click();`它不会显示一个弹出窗口，询问我是否想离开。我不知道它是否需要在 Chrome 浏览器或其他东西中启用。这是我正在使用的代码。任何帮助将非常感激。

```
var validNavigation = false;

function wireUpEvents() {

  var dont_confirm_leave = 0; 
var leave_message = document.getElementById("kioskform:broswerCloseSubmit");
      function goodbye(e) {
        if (!validNavigation) {
          if (dont_confirm_leave!==1) {
            if(!e) e = window.event;
            //for IE
            e.cancelBubble = true;
            e.returnValue = leave_message.click();
            //e.stopPropagation works in Firefox.
            if (e.stopPropagation) {
              e.stopPropagation();
              e.preventDefault();
            }
            //return works for Chrome and Safari
            return leave_message.click();
            alert("Removing information.");
            //add the code to delete the kiosk information here.
            // this is what is to be done.
          }
        }
      }
      window.onbeforeunload=goodbye;

      // Attach the event keypress to exclude the F5 refresh
      jQuery('document').bind('keypress', function(e) {
        if (e.keyCode == 116){
          validNavigation = true;
        }
      });

      // Attach the event click for all links in the page
      jQuery("a").bind("click", function() {
        validNavigation = true;
      });

      // Attach the event submit for all forms in the page
     jQuery("form").bind("submit", function() {
        validNavigation = true;
      });

      // Attach the event click for all inputs in the page
     jQuery("input[type=submit]").bind("click", function() {
        validNavigation = true;
      });

    }

    // Wire up the events as soon as the DOM tree is ready
    jQuery(document).ready(function() {
      wireUpEvents();
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:25:35.207

您必须在 onbeforeunload 函数中返回一个字符串才能向用户显示消息，另请参阅[使用 jQuery 在 Chrome 和 IE 中的 body 元素上设置 onbeforeunload](https://stackoverflow.com/questions/1802930/setting-onbeforeunload-on-body-element-in-chrome-and-ie-using-jquery)

# http - 如何使用 http 和 https 的不同端口从命令行启动 Jetty

> ID：12535837
> 
> 赞同：3
> 
> 时间：2012-09-21T18:06:14.110
> 
> 标签：http, command-line, https, jetty, port

我已经使用`-Djetty.port=xxx`在命令行上设置 http 端口，但我还需要为 https 指定不同的端口。我在网上得到了一些提示，`jetty.ssl.port`并且已经尝试过`-Djetty.ssl.port=yyy`，但没有奏效。

至于为什么在命令行上提供端口而不是配置 xml 文件，这是因为根据某些条件，我需要在某些端口上启动 Jetty。

我正在使用 Jetty 6.1-SNAPSHOT。

最终我需要类似的东西： `java -Djetty.port=XXX -Djetty.ssl.port=YYY -jar start.jar`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:51:46.153

注意...这是真正的旧版码头，我们今天甚至发布了码头 9 的里程碑。

无论如何，查看 jetty.xml，您应该会看到在哪里为 jetty.port 定义了一个属性，只需为 jetty.ssl.port 等创建一个类似的属性，然后使用它。

jetty.xml 文件应该很容易阅读，但回想一下，您可能需要查看 jetty-ssl.xml 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-09T07:35:36.047

1.  首先做：

    mvn包

2.  使用默认端口启动服务器：8080 做

    mvn码头：运行

3.  指定备用端口：8090

    mvn 码头：运行 -Djetty.port=8090

4.  指定多个传输协议端口

    mvn 码头：运行 -Djetty.port=8090 -Djetty.ssl.port=8555

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-17T19:27:27.397

只需从项目目录中执行以下命令： `mvn -Djetty.port=8686 jetty:run`

# php - PHP 在对焦时显示实时倒计时（20 秒）

> ID：12535839
> 
> 赞同：0
> 
> 时间：2012-09-21T18:06:21.653
> 
> 标签：php, javascript, focus, countdown

> **可能重复：**
> [当窗口不在焦点时停止的Javascript倒数计时器](https://stackoverflow.com/questions/12536627/javascript-countdown-timer-that-stops-when-window-is-not-in-focus)

我一直在寻找解决这个问题的方法。

我想做的是：当访问者点击网站上的特定链接时，他会被重定向到另一个页面。

在另一个页面上，他必须停留 20 秒。但我想应用倒计时，所以他看到计时器从 20 秒减少到 0 秒。

当计时器达到 0 秒时，我将执行一个 php 脚本。（已经到位）

现在，我还想要的是，只要访问者在这个页面上，计时器就会一直滴答作响，（如果这个页面是焦点），否则计时器会停止，直到他回到页面上

我已经搜索了很多以找到解决方案，但我什至不知道它是否可以使用 php.ini 解决。

任何帮助至少让我知道在哪里搜索将不胜感激

非常感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:18:56.440

我认为[这](https://stackoverflow.com/questions/2064186/how-can-i-make-a-jquery-countdown)可以完成这项工作，您只需在此脚本之前包含 jQuery 库。用 jQuery 编写脚本比纯 javascript 容易得多。就我个人而言，我很少使用纯 JavaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:26:02.080

阴暗 - 为什么？网站不应该与人类互动吗？

您可能可以使用 Javascript 来做到这一点，但有人认为这会惹恼您的用户/客户/客户/雇员。

PS：PHP 只是在服务器上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T18:09:31.073

这在 PHP 中是不可行的。PHP 是一种服务器端语言，因此您请求一个页面，它会被编译和提供。

您将需要 JavaScript。您需要做的是将任务分解为多个步骤。所以你知道：

1.  应该有 20 秒的倒计时
2.  应该在倒计时结束时执行一个脚本

因此，您的第一步是查看`setTimeout()`JavaScript 中的函数。然后，您希望回调函数重定向或通过 XMLHttpRequest (AJAX) 调用另一个 URL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T18:54:43.843

在 PHP 中需要做的是确定计时器开始的时间，例如请求页面的时间。假设页面是`download.php`，代码看起来像这样：

```
session_start(); //this has to be before you echo any text out or send any headers
$_SESSION['minimum_time'] = time() + 20; 
```

然后在页面输出的 HTML 中，您可以显示 JavaScript 倒数计时器。您应该只搜索一个简单且适合您的应用程序的产品。

让 JS 计时器倒计时 20 秒。也许在这里多加一秒，或者从 PHP 端减去一秒以防万一，但由于网络时间和页面渲染，用户很可能在 JS 计时器结束时总是比开始时间晚至少 20 秒。

在 JS 倒计时重定向用户或向他们展示新页面的链接之后，我们称之为它`file.php`，它应该有这样的内容：

```
if (time() > $_SESSION['minimum_time']) {
  print "Thanks for waiting!";
} 
```

# oracle - 删除 Oracle VM 中的快照是否也会删除后续快照？

> ID：12535840
> 
> 赞同：1
> 
> 时间：2012-09-21T18:06:24.220
> 
> 标签：oracle, virtual-machine

每次我在 Oracle VM 中拍摄快照时，它都会分层地将其添加到上一个快照的下方。我想清理这个长长的列表并删除一些快照快照。但是文档不清楚这是否会影响后续快照。文档说快照是“差异”，这表明删除中间的一个很可能会导致我丢失以下快照。但很难相信这可能是真的，而且他们没有在文档中说明。我当然不想丢失所有后续快照。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:43:14.963

我认为如果您删除先前的快照，它应该不会影响后续快照，但是您为什么不现在通过连续拍摄两个快照来快速测试它，删除第一个快照然后尝试恢复到第二个快照，如果一切都仍然是“笨拙的多莉”，你会很高兴的。

# ruby-on-rails - 如何在 Rails 中只生成一个 Gemfile？

> ID：12535844
> 
> 赞同：1
> 
> 时间：2012-09-21T18:06:32.807
> 
> 标签：ruby-on-rails, ruby-on-rails-3, bundle, bundler, rbenv

使用 rbenv 所以创建一个新应用的过程有点复杂：

1.  创建目录
2.  光盘目录
3.  设置 ruby​​ 版本：（`rbenv local 1.9.3-p125`或其他版本）
4.  镶嵌宝石：`echo project-name > .rbenv-gemsets`
5.  `gem install rails -v 3.2.2 --no-rdoc --no-ri`（例如）
6.  `rbenv rehash`
7.  `echo "gem 'rails', '3.2.2'" > Gemfile`
8.  `bundle`
9.  `rails new .`（输入 y 覆盖）
10.  `bundle`

这以前有效，但这次我在`rails new .`命令上遇到错误：

```
...
...
create  vendor/assets/stylesheets
create  vendor/assets/stylesheets/.gitkeep
create  vendor/plugins
create  vendor/plugins/.gitkeep
run  bundle install
b/gems/bundler-1.2.1/lib/bundler/resolver.rb:287:in `resolve': Could not find gem 'jquery-rails (>= 0) ruby' in the gems available on this machine. (Bundler::GemNotFound) 
```

第二次跑`rails new .`会抛出

`Can't initialize a new Rails application within the directory of another, please change to a non-Rails directory first.`

如果不可能，初始化新的 Rails 应用程序的最佳方法是什么`rails new app-name`？

如何只创建 Gemfile？如果我有正确的 Rails Gemfile，那么`bundle`应该`rails new .`可以工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:18:28.243

在您运行`rails new`并且大部分成功后（最终`bundle`命令除外），无需再次生成 Rails 应用程序。

你似乎做对了一切。您唯一的问题是无法安装单个 gem。您应该尝试`bundle install`再次运行，如果仍然无法正常工作，请检查您是否`source 'https://rubygems.org'`在 Gemfile 中，并可能`rm -r .bundle`删除任何本地 Bundler 设置。

# gwt - GWT GUI 设计 - 布局面板

> ID：12535848
> 
> 赞同：0
> 
> 时间：2012-09-21T18:06:45.243
> 
> 标签：gwt

我计划用以下领域设计我的应用程序：

*   工具栏区域（固定大小）
*   工作区标题（对于某些信息或过滤条件，无固定大小）
*   工作区区域（应该使用所有可用的屏幕空间）
*   状态栏区域（固定大小）

另请参阅随附的屏幕截图。

![应用布局](../Images/02f914b76ef3a0e9e9ffdaa556287c2a.png)

要使用根据屏幕大小自动调整大小的数据网格，我已经读过最好的方法是使用 DockLayoutPanel。我还阅读了以下文章： [https ://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels)

在本文中，还建议使用布局面板（不仅是 LayoutPanel.class，而且是所有布局面板）以获得更好的标准模式支持。因此，我构建了一个非常简单的示例来测试布局面板。

这是我尝试设计应用程序的简单屏幕截图示例：

--- css 文件 --

```
.test {
    margin: 4px;
    padding: 20px;
    background-color: Lime;
} 
```

* * *

```
package com.test.client;

import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.dom.client.Style.Unit;
import com.google.gwt.user.cellview.client.DataGrid;
import com.google.gwt.user.cellview.client.SimplePager;
import com.google.gwt.user.cellview.client.TextColumn;
import com.google.gwt.user.client.ui.Button;
import com.google.gwt.user.client.ui.DisclosurePanel;
import com.google.gwt.user.client.ui.DockLayoutPanel;
import com.google.gwt.user.client.ui.FlowPanel;
import com.google.gwt.user.client.ui.Label;
import com.google.gwt.user.client.ui.LayoutPanel;
import com.google.gwt.user.client.ui.RootLayoutPanel;
import com.google.gwt.user.client.ui.SimpleLayoutPanel;
import com.google.gwt.user.client.ui.TextBox;
import com.google.gwt.view.client.ListDataProvider;

public class GwtTestDockFilled implements EntryPoint {
    private SimpleLayoutPanel slpToolbarPlaceholder;
    private SimpleLayoutPanel slpWorkspacePlaceholder;
    private SimpleLayoutPanel slpWorkspaceHeaderPlaceholder;
    private SimpleLayoutPanel slpStatusbarPlaceholder;
    private LayoutPanel layoutPanel;
    private FlowPanel flowPanel;
    private Button btnBack;
    private Button btnNew;
    private Label lblName;
    private TextBox txtName;
    private DisclosurePanel disclosurePanel;
    private LayoutPanel layoutPanel_1;
    private Label lblStreet;
    private TextBox txtStreet;
    private DataGrid<Person> dataGrid;
    private TextColumn<Person> colName;
    private TextColumn<Person> colStreet;
    private DockLayoutPanel dockLayoutPanel_1;
    private LayoutPanel layoutPanel_2;
    private SimplePager simplePager;
    private ListDataProvider<Person> dataProvider = new ListDataProvider<GwtTestDockFilled.Person>();

     private static final String[] NAMES = {
          "Mary", "Patricia", "Linda", "Barbara", "Elizabeth", "Jennifer", "Maria",
          "Susan", "Margaret", "Dorothy", "Lisa", "Nancy", "Karen", "Betty",
          "Helen", "Sandra", "Donna", "Carol", "Ruth", "Sharon", "Michelle",
          "Laura", "Sarah", "Kimberly", "Deborah", "Jessica", "Shirley", "Cynthia",
          "Angela", "Melissa", "Brenda", "Amy", "Anna", "Rebecca", "Virginia",
          "Kathleen", "Pamela", "Martha", "Debra", "Amanda", "Stephanie", "Carolyn",
          "Christine", "Marie", "Janet", "Catherine", "Frances", "Ann", "Joyce",
          "Diane", "Alice", "Julie", "Heather", "Teresa", "Doris", "Gloria",
          "Evelyn", "Jean", "Cheryl", "Mildred", "Katherine", "Joan", "Ashley",
          "Judith", "Rose", "Janice", "Kelly", "Nicole", "Judy", "Christina",
          "Kathy", "Theresa", "Beverly", "Denise", "Tammy", "Irene", "Jane", "Lori"};

    /**
     * This is the entry point method.
     */
    public void onModuleLoad() {

        RootLayoutPanel rootLayoutPanel = RootLayoutPanel.get();

        DockLayoutPanel dockLayoutPanel = new DockLayoutPanel(Unit.PX);
        rootLayoutPanel.add(dockLayoutPanel);
        dockLayoutPanel.addNorth(getSlpToolbarPlaceholder(), 60.0);
        dockLayoutPanel.addNorth(getSimpleLayoutPanel_2(), 60.0);
        dockLayoutPanel.addSouth(getSimpleLayoutPanel_3(), 60.0);
        dockLayoutPanel.add(getSlpWorkspacePlaceholder());

        fillDataGrid();
    }

    private void fillDataGrid(){        

        for(int i = 0; i < NAMES.length; i++){

            Person p = new Person();
            p.setName(NAMES[i]);
            p.setStreet("Spring Road");
            dataProvider.getList().add(p);
        }
    }

    private SimpleLayoutPanel getSlpToolbarPlaceholder() {
        if (slpToolbarPlaceholder == null) {
            slpToolbarPlaceholder = new SimpleLayoutPanel();
            slpToolbarPlaceholder.setWidget(getFlowPanel());
        }
        return slpToolbarPlaceholder;
    }
    private SimpleLayoutPanel getSlpWorkspacePlaceholder() {
        if (slpWorkspacePlaceholder == null) {
            slpWorkspacePlaceholder = new SimpleLayoutPanel();
            slpWorkspacePlaceholder.setWidget(getDockLayoutPanel_1());
        }
        return slpWorkspacePlaceholder;
    }
    private SimpleLayoutPanel getSimpleLayoutPanel_2() {
        if (slpWorkspaceHeaderPlaceholder == null) {
            slpWorkspaceHeaderPlaceholder = new SimpleLayoutPanel();
            slpWorkspaceHeaderPlaceholder.setStyleName("test");
            slpWorkspaceHeaderPlaceholder.setWidget(getLayoutPanel());
        }
        return slpWorkspaceHeaderPlaceholder;
    }
    private SimpleLayoutPanel getSimpleLayoutPanel_3() {
        if (slpStatusbarPlaceholder == null) {
            slpStatusbarPlaceholder = new SimpleLayoutPanel();
        }
        return slpStatusbarPlaceholder;
    }
    private LayoutPanel getLayoutPanel() {
        if (layoutPanel == null) {
            layoutPanel = new LayoutPanel();
            layoutPanel.add(getLblName());
            layoutPanel.setWidgetLeftWidth(getLblName(), 0.0, Unit.PX, 56.0, Unit.PX);
            layoutPanel.setWidgetTopHeight(getLblName(), 0.0, Unit.PX, 16.0, Unit.PX);
            layoutPanel.add(getTxtName());
            layoutPanel.setWidgetLeftWidth(getTxtName(), 62.0, Unit.PX, 165.0, Unit.PX);
            layoutPanel.setWidgetTopHeight(getTxtName(), 0.0, Unit.PX, 25.0, Unit.PX);
            layoutPanel.add(getDisclosurePanel());
            layoutPanel.setWidgetLeftWidth(getDisclosurePanel(), 0.0, Unit.PX, 250.0, Unit.PX);
            layoutPanel.setWidgetTopHeight(getDisclosurePanel(), 31.0, Unit.PX, 200.0, Unit.PX);
        }
        return layoutPanel;
    }
    private FlowPanel getFlowPanel() {
        if (flowPanel == null) {
            flowPanel = new FlowPanel();
            flowPanel.add(getBtnBack());
            flowPanel.add(getBtnNew());
        }
        return flowPanel;
    }
    private Button getBtnBack() {
        if (btnBack == null) {
            btnBack = new Button("New button");
            btnBack.setText("Back");
            btnBack.setSize("50px", "50px");
        }
        return btnBack;
    }
    private Button getBtnNew() {
        if (btnNew == null) {
            btnNew = new Button("New button");
            btnNew.setSize("50px", "50px");
            btnNew.setText("New");
        }
        return btnNew;
    }
    private Label getLblName() {
        if (lblName == null) {
            lblName = new Label("Name");
        }
        return lblName;
    }
    private TextBox getTxtName() {
        if (txtName == null) {
            txtName = new TextBox();
        }
        return txtName;
    }
    private DisclosurePanel getDisclosurePanel() {
        if (disclosurePanel == null) {
            disclosurePanel = new DisclosurePanel("Additional Details", false);
            disclosurePanel.setAnimationEnabled(true);
            disclosurePanel.setContent(getLayoutPanel_1());
        }
        return disclosurePanel;
    }
    private LayoutPanel getLayoutPanel_1() {
        if (layoutPanel_1 == null) {
            layoutPanel_1 = new LayoutPanel();
            layoutPanel_1.setSize("5cm", "60px");
            layoutPanel_1.add(getTxtStreet());
            layoutPanel_1.setWidgetLeftWidth(getTxtStreet(), 60.0, Unit.PX, 91.0, Unit.PX);
            layoutPanel_1.setWidgetTopHeight(getTxtStreet(), 0.0, Unit.PX, 32.0, Unit.PX);
            layoutPanel_1.add(getLblStreet());
            layoutPanel_1.setWidgetLeftWidth(getLblStreet(), 0.0, Unit.PX, 56.0, Unit.PX);
            layoutPanel_1.setWidgetTopHeight(getLblStreet(), 0.0, Unit.PX, 22.0, Unit.PX);
        }
        return layoutPanel_1;
    }
    private Label getLblStreet() {
        if (lblStreet == null) {
            lblStreet = new Label("Street");
        }
        return lblStreet;
    }
    private TextBox getTxtStreet() {
        if (txtStreet == null) {
            txtStreet = new TextBox();
        }
        return txtStreet;
    }

    private DataGrid<Person> getDataGrid() {
        if (dataGrid == null) {
            dataGrid = new DataGrid<Person>();
            dataProvider.addDataDisplay(dataGrid);
            dataGrid.addColumn(getColName(), "Name");
            dataGrid.addColumn(getColStreet(), "Street");
        }
        return dataGrid;
    }

    private TextColumn<Person> getColName() {
        if (colName == null) {
            colName = new TextColumn<Person>() {
                @Override
                public String getValue(Person object) {
                    return object.getName();
                }
            };
        }
        return colName;
    }

    private TextColumn<Person> getColStreet() {
        if (colStreet == null) {
            colStreet = new TextColumn<Person>() {
                @Override
                public String getValue(Person object) {
                    return object.getStreet();
                }
            };
        }
        return colStreet;
    }
    private DockLayoutPanel getDockLayoutPanel_1() {
        if (dockLayoutPanel_1 == null) {
            dockLayoutPanel_1 = new DockLayoutPanel(Unit.PX);
            dockLayoutPanel_1.addSouth(getLayoutPanel_2(), 40.0);
            dockLayoutPanel_1.add(getDataGrid());
        }
        return dockLayoutPanel_1;
    }
    private LayoutPanel getLayoutPanel_2() {
        if (layoutPanel_2 == null) {
            layoutPanel_2 = new LayoutPanel();
            layoutPanel_2.add(getSimplePager());
            layoutPanel_2.setWidgetLeftWidth(getSimplePager(), 50.0, Unit.PCT, 50.0, Unit.PCT);
        }
        return layoutPanel_2;
    }
    private SimplePager getSimplePager() {
        if (simplePager == null) {
            simplePager = new SimplePager();
            simplePager.setDisplay(getDataGrid());
        }
        return simplePager;
    }

    public class Person{

        private String name;
        private String street;

        public Person(){
        }

        public String getName() {
            return name;
        }
        public void setName(String name) {
            this.name = name;
        }
        public String getStreet() {
            return street;
        }
        public void setStreet(String street) {
            this.street = street;
        }
    }
} 
```

在这个例子中我有一些问题：

*   CSS 填充不适用于 SimpleLayoutPanel。我应该改用哪个类？我想在空骨架类中使用 css 填充，因为如果我替换此占位符的小部件，它应该自动使用父级 (slpWorkspaceHeaderPlaceholder) 的 css。我不想为 slpWorkspaceHeaderPlaceholder 的每个孩子设置填充。

*   “其他详细信息”的披露面板不起作用。原因是 DockLayoutPanel 对 North 有一个固定大小。我测试了一个解决方案，如果我打开 Disclosure Pane 但动画不起作用，我只需更改 North 大小。

*   这是设计我的应用程序的正确途径还是我应该使用不同的面板？

*   我应该尝试仅使用布局面板（更好的标准模式支持）还是其他面板有特殊情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:23:58.953

尝试使用尽可能少的小部件类型，以最小化编译代码大小、加快编译速度并提高性能。您的设计只需要 3 种类型的面板（除了 RootLayoutPanel）。您绝对不需要为您的工具栏或工作区标题使用 LayoutPanel。

像这样的东西：

```
FlowPanel toolbar = new FlowPanel();
FlowPanel center = new FlowPanel();

DisclosurePanel workspace = new DisclosurePanel();
workspace.addCloseHandler(new CloseHandler<DisclosurePanel>() {
    @Override
    public void onClose(CloseEvent<DisclosurePanel> event) {
        resize();
    }
});
workspace.addOpenHandler(new OpenHandler<DisclosurePanel>() {
    @Override
    public void onOpen(OpenEvent<DisclosurePanel> event) {
        resize();
    }
});
Window.addResizeHandler(new ResizeHandler() {
    @Override
    public void onResize(ResizeEvent event) {
        resize();
    }
});

DataGrid<Person> dataGrid = new DataGrid<Person>();
FlowPanel statusBar = new FlowPanel();

center.add(workspace);
center.add(dataGrid);

LayoutPanel myPage = new LayoutPanel();
myPage.add(toolbar);
myPage.add(center);
myPage.add(statusBar);

myPage.setWidgetTopHeight(toolbar, 0, Unit.PX, 60, Unit.PX);
myPage.setWidgetTopBottom(center, 60, Unit.PX, 60, Unit.PX);
myPage.setWidgetBottomHeight(statusBar, 0, Unit.PX, 60, Unit.PX);

// add myPage to RootLayoutPanel
resize(); 
```

创建 resize() 方法：

```
private void resize() {
    Scheduler.get().scheduleDeferred(new ScheduledCommand() {
        @Override
        public void execute() {
            dataGrid.setHeight(center.getOffsetHeight() - workspace.getOffsetHeight() + "px");
        }
    });
} 
```

使用以下样式将按钮直接添加到工具栏小部件：

```
.myToolbarButton {
    width: 50px;
    height: 50px;
    float: left;
    margin: 5px 10px 5px 0;
} 
```

如果您设置工具栏的样式（背景颜色），请将以下内容添加到其样式中：

```
overflow: hidden; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T18:40:26.597

HTML 对“让这个组件根据需要占用尽可能多的空间，然后让这个组件占用其余空间”的支持非常糟糕。据我所知，在 GWT 中执行所需操作的最佳方法是使用所有 LayoutPanel，覆盖 onResize，然后自己进行数学布局计算：

```
int heightOfEntireCenter = centerPanel.getClientHeight();
int heightOfToolbar = toolBar.getClientHeight();

workspace.setHeight(heightOfEntireCenter - heightOfToolbar); 
```

您将不得不做大量的工作，寻找神秘的布局错误，在尺寸变化时对延迟感到恼火，等等。HTML 在这方面很糟糕。

如果您可以修复工具栏的大小，您将拥有更轻松的时间。我什至不是说工具栏不能改变大小——我只是说你必须计算并设置它。然后工作空间可以更自然地填充空间的其余部分。LayoutPanels 也是正确的选择。

# jquery - 使用 jQuery 制作“科学图”

> ID：12535849
> 
> 赞同：0
> 
> 时间：2012-09-21T18:06:45.493
> 
> 标签：jquery, plugins, plot, image-science

我有个主意。我想做的是用jQuery绘制一个skew-t图（科学气象垂直测量图）。问题是所有可用的软件包或多或少都用于“统计图”，如条形图等。我尝试了其中的一些（最准确的是 flot - 但没有选择制作非线性背景线或“与之相等的东西”。

这是一个例子[http://www.ux1.eiu.edu/~cxtdm/met/snow/skewt_012205.gif](http://www.ux1.eiu.edu/~cxtdm/met/snow/skewt_012205.gif)

所以我的问题。有没有我没见过的插件可以做这样“复杂”的情节？或者是否有关于如何从头开始创建情节的“教程”？但这可能是一项非常麻烦的工作。

感谢您的提示！瑞士雷托

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:17:58.637

我是[flot](http://code.google.com/p/flot/) fun 它真的很强大，看例子：[Flot Examples](http://people.iola.dk/olau/flot/examples/)，但有时你需要编写额外的代码。

# objective-c - 我应该更喜欢使用文字语法还是构造函数来创建字典和数组？

> ID：12535855
> 
> 赞同：3
> 
> 时间：2012-09-21T18:07:11.513
> 
> 标签：objective-c, objective-c-literals

我正在阅读 iOS 开发人员指南以熟悉 Objective-C 语言，目前我对 Container Literals 和 Subscript Notation 的主题有些困惑，因为它与创建`NSDictionary`.

我知道有几种方法可以创建`NSDictionary`对象，包括键值编码（`dictionaryWithObjects:forKeys:`和`dictionaryWithObjectsAndKeys:`，或它们相应的初始化程序）。[源链接。](https://developer.apple.com/library/ios/#referencelibrary/GettingStarted/RoadMapiOS/chapters/AcquireBasicProgrammingSkills/AcquireBasicSkills/AcquireBasicSkills.html)

据我了解，有两种主要方法可以做到这一点，然后还有**另一种**方法是使用容器文字，如下所示：

```
NSDictionary *myDictionary = @{
   @"name" : NSUserName(),
   @"date" : [NSDate date],
   @"processInfo" : [NSProcessInfo processInfo]
}; 
```

哪个是最好的使用方法？与前两种技术相比，使用 Container Literal 技术有什么好处，还是只是对程序员来说方便？

我的印象是它也是编码数组之类的另一种更简单的方法。这是真的还是我在这里遗漏了什么？这些技术只是个人喜好问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-23T21:09:12.593

我不同意迄今为止发布的其他答案：几乎所有时候，使用新的容器文字语法比使用构造函数更好。它们有助于代码的正确性，而且对于兼容性并没有太多担心。

## 代码正确性

容器文字确实是语法糖，但特别是它们映射到“安全”构造函数方法[`+[NSArray arrayWithObjects:count:]`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/clm/NSArray/arrayWithObjects%3acount%3a)和[`+NSDictionary dictionaryWithObjects:forKeys:count:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/occ/clm/NSDictionary/dictionaryWithObjects%3aforKeys%3acount%3a). 直接使用其中一种方法构造数组或字典并不是那么方便，因此许多程序员发现使用`arrayWithObjects:`and更简单`dictionaryWithObjectsAndKeys:`。但是，后一种方法有一个令人讨厌的缺陷：由于参数列表必须以 终止`nil`，如果您通过`nil`您打算传递对象的位置，您会发现自己有意想不到的数组/字典内容。

例如，假设您正在设置一个映射您的模型对象之一的属性的字典（也许您要将其作为 JSON 发送？）：

```
NSDictionary *dictionary = [NSDictionary dictionaryWithObjectsAndKeys:
    person.name, @"name", person.title, @"title", person.address, @"address", 
    nil]; 
```

如果此代码遇到已设置`Person`no的对象`title`，则生成的字典将缺少`@"address"`键及其值。您可能会花费数小时来追踪为什么您的数据库中的一部分人丢失了地址（甚至看到上面的代码并撕下您的头发想知道为什么它不工作时*来吧，我就在那里设置它！*）。我们很多人都有。

相比之下，如果您使用这样的文字形式：

```
NSDictionary *dictionary = @{
    @"name": person.name, @"title": person.title, @"address": person.address }; 
```

它将被扩展为如下内容：

```
id objects[] = { person.name, person.title, person.address };
id keys[] = { @"name", @"title", @"address" };
NSUInteger count = sizeof(objects) / sizeof(keys);
NSDictionary *dictionary = [NSDictionary dictionaryWithObjects:objects
                                                       forKeys:keys
                                                         count:count]; 
```

如果`person.name`或`person.title`返回`nil`，此方法将抛出异常，而不是默默地创建您不想要的数据。（无论哪种方式，您都必须决定您希望代码如何处理`nil`标题，但这样您会更快地发现问题。）当然，您可以自己编写这种“更安全”的形式，而不是使用等效的语法糖，但是你确定你不会`dictionaryWithObjectsAndKeys:`因为写作更短而重新养成写作的习惯吗？

## 兼容性

由容器文字（以及[数字文字和盒装表达式](http://clang.llvm.org/docs/ObjectiveCLiterals.html)）生成的代码不使用新的 API，因此您可以使用 Xcode 4.4 或更高版本（或 Clang 3.1 或更高版本直接）编译它并部署到任何版本的 Foundation。但是，如果您的源代码也将与较旧的编译器或 GNUStep 一起使用，则您确实需要考虑兼容性。（虽然听起来 GNUStep 现在也适用于 Clang。）

这不是问题的一部分，但因为它是在一个相关的主题上：对于新的对象下标语法来说，“有点”也是如此。这确实使用了仅在 Mac OS X 10.6 和 iOS 6.0 上定义的新方法……但这些方法由`libarclite`. （你知道，当你尝试将 ARC 代码部署回 iOS 4.3 或 Mac OS X 10.6 时，链接的库——它不再只是用于 ARC！）所以你需要做的就是在标题中声明它们，链接如果您还没有 ARCLite，那么您就可以开始了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T18:26:50.297

没有“最好的方法”。使用最适合特定用例的那个。例如，如果您希望您的应用程序是可移植的（即只需要 Foundation 而不需要 UIKit 的逻辑也可以在其他平台上运行，例如 Mac OS X 或带有 GNUstep 的 Linux 等），那么请避免使用字面语法 - 它们'不是很便携。如果您只需要它在 iOS 上工作，请使用它们，因为它们很方便。

此外，这些符号只是**语法糖**——也就是说，它们映射到方法名称（据我所知，正是你在问题中提到的两种方法），所以它们对性能没有任何影响，算法等

是的，你猜对了：这同样适用于新的下标语法——对于 NSArray，它调用`- objectAtSubscriptedIndex:`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T16:50:01.787

您可以通过 GNUstep 和 clang 在 GNU/Linux 上使用它们。在我的大多数情况下，GNUstep 使用 clang 比所有版本的 gcc 都好得多。（对不起，我应该只编辑另一个答案，我是新手）

# python - mongoengine - 动态生成 Q()

> ID：12535858
> 
> 赞同：1
> 
> 时间：2012-09-21T18:07:30.330
> 
> 标签：python, mongodb, pymongo, mongoengine

除了使用 eval() 之外，有没有办法动态生成 Q()。

eval() 的当前方法：

q = eval("Q(" + q_arg + mode + "=args[arg])")

其中模式是“_ *in”或“* _nin”。

这行得通，只是想在没有 eval() 的情况下做到这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T18:27:56.550

`Q`对象，就像任何 python 类都可以接受`kwargs`- 它可以是一个字典，所以你可以构建字典并将其传递给例如：

```
kwargs = {}

# Build the key and add it to the kwargs dict
key = "%s%s" % (q_arg, mode)
kwargs[key] = args[arg]

# Pass kwargs to Q
q = Q(**kwargs) 
```

# ios - 如何从 NSString 获取课程？

> ID：12535860
> 
> 赞同：5
> 
> 时间：2012-09-21T18:07:34.350
> 
> 标签：ios, nsstring, nsobject

例如，我有

```
NSString *myClass = @"RootViewController" 
```

如何从 NSString 获取课程？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-21T18:09:52.820

试试这个

```
 id obj= [[NSClassFromString(@"RootViewController") alloc] init]; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-21T18:17:58.390

您可以使用

```
Class class = NSClassFromString(@"RootViewController"); 
```

> NSClassFromString
> 
> 按名称获取类。
> 
> 类 NSClassFromString ( NSString *aClassName );
> 
> 参数
> 
> 类名
> 
> ```
> The name of a class. 
> ```
> 
> 返回值
> 
> 由 aClassName 命名的类对象，如果当前没有加载该名称的类，则为 nil。如果 aClassName 为 nil，则返回 nil。可用性
> 
> ```
> Available in iOS 2.0 and later. 
> ```

基础框架中有很多这样的方法

```
NSGetSizeAndAlignment
NSClassFromString
NSStringFromClass
NSSelectorFromString
NSStringFromSelector
NSStringFromProtocol
NSProtocolFromString 
```

参考[基础函数参考](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Functions/Reference/reference.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-21T18:09:57.387

```
Class class = NSClassFromString(@"RootViewController"); 
```

# python - 从python到mysql的日期时间传递值

> ID：12535862
> 
> 赞同：1
> 
> 时间：2012-09-21T18:07:39.587
> 
> 标签：python, mysql, database, date

我一直有 sql 语法错误。为了每天提取数据，我在这里遗漏了什么。

这是我的python错误：

```
pyodbc.ProgrammingError: ('42000', "[42000] [MySQL][ODBC 5.1 Driver][mysqld-5.1.63rel13.4-log]You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '%s and date_created < %s ,(start, next)' at line 11 (1064) (SQLExecDirectW)")
File "d:\sasdev\datax\program\py\global.py", line 33, in <module>
  """) 
```

这是代码：

```
start = datetime.date(2012,01,01)
next = start + datetime.date.resolution

while next <= datetime.date.today():
     print start, next 

     cur_ca.execute("""
             select id,
         date_created,
         data
         from bureau_inquiry where date_created >= %s and date_created < %s %(start, next)
         """)
     start = next
     next = start + datetime.date.resolution 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T18:10:39.587

您使用格式化参数执行查询，但从不传递这些参数；该`% (start, next)`部分*超出*了 SQL 查询：

```
cur_ca.execute("""
         select id,
     date_created,
     data
     from bureau_inquiry where date_created >= %s and date_created < %s
     """ % (start, next)
   ) 
```

但是，最好使用 SQL 参数，这样数据库就可以准备查询并重用查询计划：

```
cur_ca.execute("""
         select id,
     date_created,
     data
     from bureau_inquiry where date_created >= ? and date_created < ?
     """, (start, next)
   ) 
```

PyODBC`?`用于 SQL 参数。

# c# - 如何拆分字符串并存储在不同的字符串数组中

> ID：12535866
> 
> 赞同：1
> 
> 时间：2012-09-21T18:07:45.600
> 
> 标签：c#

如果我有一个字符串

```
string hello="HelloworldHellofriendsHelloPeople"; 
```

我想把它存储在这样的字符串中

```
Helloworld
Hellofriends
HelloPeople 
```

它必须在找到字符串“hello”时更改行

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T18:10:36.943

```
string hello = "HelloworldHellofriendsHelloPeople";
var a = hello.Split(new string[] { "Hello"}, StringSplitOptions.RemoveEmptyEntries);
foreach (string s in a)
    Console.WriteLine("Hello" + s); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T18:12:05.507

```
 var result = hello.Split(new[] { "Hello" }, 
                    StringSplitOptions.RemoveEmptyEntries)
               .Select(s => "Hello" + s); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T18:15:26.200

你可以使用这个正则表达式

```
(?=Hello) 
```

然后使用正则表达式的`split`方法拆分字符串！

您的代码将是：

```
 String matchpattern = @"(?=Hello)";
      Regex re = new Regex(matchpattern); 
      String[] splitarray = re.Split(sourcestring); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T18:11:04.297

您可以使用`string.split`拆分单词“Hello”，然后将“Hello”附加到字符串上。

```
string[] helloArray = string.split("Hello");
foreach(string hello in helloArray)
{
    hello = "Hello" + hello;
} 
```

这将给出你想要的输出

```
Helloworld
Hellofriends
HelloPeople 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T18:09:39.897

您可以使用此代码 - 基于 string.Replace

```
var replace = hello.Replace( "Hello", "-Hello" );
var result = replace.Split("-"); 
```

# java - 在 Rest 服务中返回纯字符串不返回 json？

> ID：12535870
> 
> 赞同：4
> 
> 时间：2012-09-21T18:07:58.640
> 
> 标签：java, rest

我在基于休息的 Web 服务中创建了以下休息方法

```
@GET
@Produces("application/json")
@Path("plain")
public String getPlain()
{
    return "hello world";
}

@GET
@Produces("application/json")
@Path("wrapper")
public Response getWrapper()
{
    return Response.ok(new Object(){ public String data = "hello world";}).build();
} 
```

当我调用普通服务时，它返回一个原始字符串**hello world**而不是 json 格式的输出。但是，将字符串包装在对象中会返回 json **{"data":"hello world"}**

为什么它会表现出这样的行为？如何将纯字符串作为 json 发送？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:55:12.593

我尝试了上述选项，它不起作用。

```
String result="hello world";
return result; 
```

String 没有自动转换的原因似乎是由于缺少@XmlRootElement。基于 cxf [http://cxf.apache.org/docs/jax-rs-data-bindings.html#JAX-RSDataBindings-HandlingJAXBbeanswithoutXmlRootElementannotations](http://cxf.apache.org/docs/jax-rs-data-bindings.html#JAX-RSDataBindings-HandlingJAXBbeanswithoutXmlRootElementannotations)中的文档，我们需要使用一些 jaxbElementClassMap。但无法找到更多细节。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-24T09:11:08.693

尝试这个

```
@GET 
@Produces("application/json") 
@Path("plain") 
public String getPlain() 
{ 
String result= "hello world";
    return result;
} 
```

JSON 需要一个键值对。

# sql - 处理日期时更需要哪一个？sql DateTime 还是 nvarchar 字符串？

> ID：12535872
> 
> 赞同：-2
> 
> 时间：2012-09-21T18:08:06.003
> 
> 标签：sql, sql-server, datetime

SQLs 内置`DateTime`类型比类型有什么优点`nvarchar`吗？

如果是你，你会用哪一个？

我需要将日期存储在我的 SQLServer 数据库中，我很想知道哪个更好以及为什么更好。

我还想知道如果我将日期存储为字符串文字（我的意思是`nvarchar`）会发生什么？是否需要更长的时间进行搜索？或者它们在性能方面是一样的？

最后一个问题。如何将日期从我的 c# 应用程序发送到 tye 的 sql 字段`DateTime`？它与 c#s DateTime 有什么不同吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T18:09:44.650

给你一个`date`日期类型是有原因的，你为什么*不*使用它？

当您在文本字段中存储“3/2/2012”时会发生什么？是3月2日吗？是2月3日吗？

将日期存储在`date`or`datetime`字段中，并在事后对日期进行任何格式化。

**编辑**

如果您必须存储日期，如`1391/7/1`，您的选择是：

*   假设您使用的是 SQL Server 2008 或更高版本，请使用`datetime2`数据类型；它允许早于 1753/01/01 的日期（这是`datetime`停止的时间）。
*   假设您使用的是 SQL Server 2005 或更早版本，请将日期存储为罗马日历日期，然后在您的应用程序中，使用日期/时间函数将日期和时间转换为波斯日历。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T18:10:54.160

使用正确的数据类型（`date/datetime/datetime2`取决于版本和时间组件的要求）。

优点是存储比存储为字符串更紧凑（特别是`nvarchar`因为这是双字节）。内置针对无效日期（例如 2 月 30 日）的验证。正确排序。避免在使用日期函数时将其转换回正确的数据类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T18:11:50.997

如果我正在存储一个 DateTime 值，并且我希望基于它执行基于日期的计算，我将使用 DateTime。

将日期存储为字符串 (varchars) 会带来各种后勤问题，其中最重要的是以正确的格式呈现日期。再次，这有利于 DateTime。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T18:17:26.860

关于这个主题有很多讨论。SQLCentral 论坛上有关于这个特定主题 [DateTime 或 nvarchar](http://www.sqlservercentral.com/Forums/Topic1136418-1292-1.aspx)的好帖子。

简而言之，nvarchar 的时间是 datetime 的两倍，因此它需要更多的空间，而且从长远来看，任何影响它的操作都会变慢。您将遇到一些验证问题等等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-21T18:11:53.507

我会选择 DateTime，因为您可以直接在其上使用各种功能。字符串不会太麻烦，但每次你想用它做某事时都必须转换数据。

在搜索这两种类型的字段时没有真正的性能差异，因此在使用日期值时使用 DateTime 比使用字符串更好。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-21T18:16:25.487

您必须意识到像其他数据类型一样提供 datetime 数据类型是有原因的，并且您应该使用清楚地表示您的数据的数据类型。除此之外，您还可以获得 datetime 数据类型特有的所有功能/操作。

最大的收获之一是正确的数据排序，如果你使用 nvarchar 作为你的数据类型，这将是不可能的。即使你认为你现在不需要排序，将来会有一段时间这会很有用。

日期验证也是您将从中受益的东西。存储的日期格式没有混淆，即 dd/mm 或 mm/dd 等。

# objective-c - 检索 UIAlertView 上的点击按钮

> ID：12535884
> 
> 赞同：1
> 
> 时间：2012-09-21T18:08:57.847
> 
> 标签：objective-c, cocoa-touch, uialertview

我在我的应用程序上运行了这段代码，现在在 iOS 6 上它使我的应用程序崩溃：

```
// Another method
[NSThread detachNewThreadSelector:@selector(askServerForNFeID)
          toTarget:self withObject:nil];

- (void)askServerForNFeID {
    if ([response isEqualToString:@"XXXX"]) {
        NSString *responseMessage = [NSString stringWithFormat:
                                       NSLocalizedString(@"Autorizado o Uso da NFe\n para chave:\n%@", @""),
                                       [invoiceInfo NFeID]];

        UIAlertView *alert = [[UIAlertView alloc]
               initWithTitle:NSLocalizedString(@"Sefaz respondeu:", @"")
                     message:responseMessage
                    delegate:self
           cancelButtonTitle:NSLocalizedString(@"OK", @"")
           otherButtonTitles:nil];

        [alert show];
        [alert release];
    }
} 
```

我了解到从第二个线程调用警报会导致崩溃，因此我将代码更改为从主线程调用警报，如下所示：

```
if ([response isEqualToString:@"XXXX"]) {

    [self performSelectorOnMainThread:@selector(showAlertHelper:)
          withObject:[[NSArray alloc] initWithObjects:
            NSLocalizedString(@"Não posso seguir em frente", @""),
            NSLocalizedString(@"Você usou .....", @""), @"Fechar", @"Comprar", nil]
            waitUntilDone:YES]; 
```

注意我正在将标题、消息和按钮解析为 showAlertHelper 的列表...

```
-(void)showAlertHelper:(NSArray*)theArray{

    if ([[theArray objectAtIndex:3] isEqualToString:@""]) {
        UIAlertView *alertView = [[UIAlertView alloc]
              initWithTitle:[theArray objectAtIndex:0]
                    message:[theArray objectAtIndex:1]
                   delegate:nil
          cancelButtonTitle:[theArray objectAtIndex:2]
          otherButtonTitles:nil];
        [alertView show];
        [alertView release];
    }
    else {
        UIAlertView *alertView = [[UIAlertView alloc]
             initWithTitle:[theArray objectAtIndex:0]
                   message:[theArray objectAtIndex:1]
                  delegate:nil
         cancelButtonTitle:[theArray objectAtIndex:2]
         otherButtonTitles:[theArray objectAtIndex:3], nil];

        [alertView show];
        [alertView release];
    }
} 
```

我现在的问题是，我有这个处理程序来捕捉被点击的按钮，它不再起作用了。它只是不被称为：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];

    if ([title isEqualToString:NSLocalizedString(@"Comprar", @"")]) {
        // Do stuff to buy credits...
    } else if ([title isEqualToString:NSLocalizedString(@"Fechar", @"")]) {
        NSLog(@"Fechar was selected.");
    }
    else if ([title isEqualToString:NSLocalizedString(@"Criar conta", @"")]) {
         // Do stuff to create an account...
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T21:10:46.823

您从 UIAlertView 的创建方法中删除了委托

```
UIAlertView *alertView = [[UIAlertView alloc]
         initWithTitle:[theArray objectAtIndex:0]
               message:[theArray objectAtIndex:1]
              delegate:nil
     cancelButtonTitle:[theArray objectAtIndex:2]
     otherButtonTitles:[theArray objectAtIndex:3], nil]; 
```

应该

```
UIAlertView *alertView = [[UIAlertView alloc]
         initWithTitle:[theArray objectAtIndex:0]
               message:[theArray objectAtIndex:1]
              delegate:self
     cancelButtonTitle:[theArray objectAtIndex:2]
     otherButtonTitles:[theArray objectAtIndex:3], nil]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T21:10:55.147

问题是在您重写的方法中，您将委托设置为`nil`而不是`self`. 因此，`alertView:clickedButtonAtIndex:`不会调用委托方法。将您的代码更改为以下内容：通过`self`在`delegate:`参数中指定：

```
-(void)showAlertHelper:(NSArray*)theArray{

    if ([[theArray objectAtIndex:3] isEqualToString:@""]) {
        UIAlertView *alertView = [[UIAlertView alloc]
              initWithTitle:[theArray objectAtIndex:0]
                    message:[theArray objectAtIndex:1]
                   delegate:self
          cancelButtonTitle:[theArray objectAtIndex:2]
          otherButtonTitles:nil];
        [alertView show];
        [alertView release];
    } else {
        UIAlertView *alertView = [[UIAlertView alloc]
             initWithTitle:[theArray objectAtIndex:0]
                   message:[theArray objectAtIndex:1]
                  delegate:self
         cancelButtonTitle:[theArray objectAtIndex:2]
         otherButtonTitles:[theArray objectAtIndex:3], nil];

        [alertView show];
        [alertView release];
    }
} 
```

# android - 线程池中的 AsyncTask

> ID：12535887
> 
> 赞同：0
> 
> 时间：2012-09-21T18:09:17.327
> 
> 标签：android, android-asynctask, threadpool

如何在线程池中运行 AsyncTask？`executeOnExecutor(exec, params)`我不能使用的方法，因为它需要 API 级别 11。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:20:34.143

您不应在自定义线程池中运行 AsyncTask。AsyncTasks 已经通过 Android 由线程池管理。您可以通过调试您的应用程序并观察线程池在您创建 AsyncTask 时的增长来看到这一点。

# matlab - 将 .dylib 库加载到 matlab

> ID：12535888
> 
> 赞同：1
> 
> 时间：2012-09-21T18:09:24.267
> 
> 标签：matlab, gcc, loadlibrary

我正在尝试使用“loadlibrary”函数向 matlab 添加一个简单的库。我首先尝试使用 mex -setup 将 gcc 编译器链接到 matlab 并得到这个：

可用于 mex 的选项文件有：

1：/Applications/MATLAB_R2012a.app/bin/mexopts.sh：用于构建 gcc MEX 文件的模板选项文件

0：不做任何改动就退出

所以我只选择了 1 并继续。然后我收到了这条消息：

* * *

警告：MATLAB C 和 Fortran API 已更改为支持具有超过 2^32-1 个元素的 MATLAB 变量。在不久的将来，您将需要更新您的代码以使用新的 API。您可以在以下位置找到更多信息： [http](http://www.mathworks.com/help/techdoc/matlab_external/bsflnue-1.html) ://www.mathworks.com/help/techdoc/matlab_external/bsflnue-1.html 使用 -largeArrayDims 选项构建可启用新 API。

* * *

在此之后我输入： loadlibrary('Samplelib.dylib','Samplelib.h')

使用 loadlibrary 时出错（第 419 行）无法预处理输入文件。预处理器的输出是：/bin/bash: gcc-4.2: command not found

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:47:58.540

你在mac上使用matlab，对吗？您需要先安装 gcc，然后才能继续。试试 Xcode - 你需要**gcc-4.2**因为它是硬编码在提到的 mexopts.sh 如何安装它取决于你的 MacOS 版本，但是谷歌 xcode，你会发现很多链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:48:04.117

第一个“警告”只是告诉您 C API 现在比以往任何时候都更好，因为它支持大量元素，但需要在以后版本的 Matlab 中使用新选项启用。长话短说，你不在乎。关于 gcc-4.2 的下一个错误意味着 gcc 4.2 编译器不在您的路径上。如果您执行以下操作：

```
 [s1,r1] = system('which gcc')
    disp( r1 )
    disp( s1 )
    [s2,r2] = system('which gcc-4.2')
    disp( r2 )
    disp( s2 ) 
```

很可能，其中一个或两个都会返回错误。确保 gcc 编译器位于您的`PATH`环境变量中。

就像againor说的那样，您还需要安装编译器。:-)

# apache - 如何在 awk 中打印一系列数据？

> ID：12535897
> 
> 赞同：0
> 
> 时间：2012-09-21T18:09:46.053
> 
> 标签：apache, bash, awk, centos

我正在使用如下语句查看我的 access_logs：

```
cat access_log | grep 16/Sep/2012:17 | awk '{print $12 $13 $14 $15 $16}' | sort | uniq -c | sort -n | tail -40 
```

目的是查看过去一小时内访问我的服务器的任何人的用户代理，按点击次数排序。我的服务器有异常活动，我想阻止任何不需要的蜘蛛/等。

但是 part:`awk '{print $12 $13 $14 $15 $16}'`会更喜欢这样的东西：`awk '{print $12-through-end-of-line}'`这样我就可以看到整个用户代理，每个用户代理的长度都不同。

有没有办法用 awk 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:33:47.933

不是非常优雅，但这有效：

```
grep 16/Sep/2012:17 access_log | awk '{for (i=12;i<=NF;++i) printf "%s ",$i;print ""}' 
```

它的副作用是将字段之间的多个空格压缩为一个，并在行尾放置一个额外的空格，但这可能并不重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T18:34:12.857

我从来没有找到过；在这种情况下，我使用`cut`（假设我不需要`awk`灵活处理字段分离）：

```
# Assuming tab-separated fields, cut's default
grep 16/Sep/2012:17 access_log | cut -f12- | sort | uniq -c | sort -n | tail -40

# For space-separated fields (single spaces, not arbitrary amounts of whitespace)
grep 16/Sep/2012:17 access_log | cut -d' ' -f12- | sort | uniq -c | sort -n | tail -40 
```

（澄清：我从来没有找到一个*好*方法。我在必要时使用了@twalberg 的 for 循环，但`cut`如果可能的话更喜欢使用。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T18:50:24.547

```
$ echo somefields:; cat somefields ; echo from-to.awk: ; \
  cat from-to.awk ; echo ;awk -f from-to.awk  somefields 
somefields:
a b c d e f g h i j k l m n o p q r s t u v w x y z
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21
from-to.awk:
{ for (i=12; i<=NF; i++) { printf "%s ", $i }; print "" }

l m n o p q r s t u v w x y z 
12 13 14 15 16 17 18 19 20 21 
```

* * *

来自男人 awk：

NF 当前输入记录中的字段数。

* * *

所以你基本上循环遍历从 12 到最后一个的字段（用空格分隔）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T18:35:50.313

为什么不

```
 #!/bin/bash
  awk "/$1/"'{for (i=12;i<=NF;i++) printf("%s ", $i) ;printf "\n"}' log | sort | uniq -c | sort -n | tail -40 
```

在脚本文件中。

然后你可以这样称呼它

```
 myMonitor.sh 16/Sep/2012:17 
```

没有办法测试这个权利。对任何格式/语法错误的道歉。希望你明白这一点。

IHTH

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T10:30:47.673

```
awk '/16/Sep/2012:17/{for(i=1;i<12;i++){$i="";}print}' access_log| sort | uniq -c | sort -n | tail -40 
```

# java - 过滤惰性初始化集合

> ID：12535900
> 
> 赞同：3
> 
> 时间：2012-09-21T18:09:55.283
> 
> 标签：java, hibernate, filter, lazy-loading

我的对象：**用户**和**凭据**- 多对多关系，但是用户有一个参数

我想为循环中的每个凭据获取具有特定参数的所有用户

要求：用户必须批量加载。

*   简单吧？

所以我有3张桌子：

```
@Table(name = "CRED")
public class Credential {

    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE)
    @Column(name="CRED_ID")     
    Long credentialId;

    @OneToMany(fetch=FetchType.LAZY, cascade = CascadeType.ALL, mappedBy = "credential")
    @BatchSize(size = Search.DEFAULT_PAGE_SIZE)
    private Set<UserCredentialMapping> userCredentialMappingSet;  
}

@Table(name = "USER_CRED")
public class UserCredentialMapping {

    @JoinColumn(name = "user_id", referencedColumnName = "user_id")
    @ManyToOne
    @Filter(name="paramFilter", condition="param = :param")
    private User user;

    @JoinColumn(name = "cred_id", referencedColumnName = "cred_id")
    @ManyToOne
    private Credential credential;
}

@Table(name = "USER")
public class User  {

    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE)
    @Column(name="USER_ID")     
    Long userId;

    @Column(name = "PARAM")
    String param
} 
```

我在一个地方进行查询并返回结果：

```
 String hqlQuery =   "select c from UserCredentialMapping m " +
        " inner join m.credential c" +
        " inner join m.user u" +
        " where u.param = :param" +
        " and c.user_id in (:users)" ;

        Session session = getSession();
        //desparetly trying to set filter
        session.enableFilter("paramFilter").setParameter("param", param);

    Query query = session.createQuery(hqlQuery);
    query.setParameterList("users", USERLIST);
    query.setParameter("param", someparam);

    List<Credential> credentialList = (List<Credential>)query.list();
    return credentialList; 
```

同时对每个凭证进行一些处理，现在我需要获取具有给定参数的用户列表：

```
 for(Credential credential : credentialList){

        //following line makes hibernate query for users
        Iterator<CredentialMapping> mappingIterator = e.getUserCredentialMappingSet().iterator();

        while (mappingIterator.hasNext()){
            UserCredentialMapping userCred = mappingIterator.next();

            User user = userCred.getUser(); 
            DOEVILSTUFFTOINNOCENT(user);
    } 
```

我的问题是迭代器生成 SQL 查询，该查询获取所有用户的凭据，而不是所有**具有指定参数**的用户的凭据（换句话说，未应用过滤器）

任何建议如何使它工作？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T19:12:45.173

我通过将 ManyToMany 映射添加到 Credential 类来解决它：

```
@ManyToMany(fetch = FetchType.LAZY)
@NotFound(action = NotFoundAction.IGNORE)
@JoinTable(name = "USER_CRED", 
    joinColumns = { 
        @JoinColumn(name = "CRED_ID") }, 
    inverseJoinColumns = { 
        @JoinColumn(name = "USER_ID") })
@Filter(name="param", condition="PARAM = :param")
@BatchSize(size = Search.DEFAULT_PAGE_SIZE)
private Set<User> users; 
```

我无法通过 UserCredentialMapping 让它工作......

# symfony1 - 使用 symfony 向关系表中添加多条记录

> ID：12535904
> 
> 赞同：1
> 
> 时间：2012-09-21T18:10:05.163
> 
> 标签：symfony1, doctrine, symfony-1.4, symfony-forms

我在 symfony 中设置了 3 个表：

一个翻书表、一个技能表和一个关系表，用于将每个技能 ID 与每个翻书 ID 连接起来。

当我构建模型时，symfony 正确构建了所有内容，并且默认为技能提供了一个下拉菜单，其中包含技能表中的所有技能作为选项。您可以选择一个选项，它会创建适当的关系。

这是工作（有点）。当您提交表单时，它不会将 Skill_id 添加到记录中。它只是将自动增量 id 添加到技能关系表中，而不是 Flipbook_id 或 Skill_id。Aaaaaand，如果您单击多个复选框，您会收到以下好消息：

```
invalid parameter number number of bound variables does not match number of tokens 
```

这是什么意思？这一定是架构问题吧？

一些代码怎么样？是的，请。

**架构：**

```
Flipbook:
  tableName: flipbook
  inheritance:
    extends: SvaGeneric
    type: concrete
  columns:
    title: { type: string(255) }
    career_associations: { type: clob }
    skills: { type: string(255) }
    skills_associations: { type: clob }
    program: { type: string(255) }
    program_associations: { type: clob }
    draft_id: { type: integer(10) }

FlipbookSkills:
  tableName: flipbook_skills
  columns:
    title: { type: string(255) }
  relations:
    Flipbook:
      foreignAlias: flipbook_skills
      alias: skills
      local: title
      onDelete: SET NULL   

FlipbookSkillRelations:
  tableName: flipbook_skill_relations
  actAs:
    SoftDelete: ~
  options:
  columns:
    flipbook_id: { type: integer(10), notnull: false }
    skill_id: { type: integer(10), notnull: false }
  relations:
    Flipbook:
      foreignAlias: flipbook_skills_flipbook
      alias: flipbook
      local: flipbook_id
      onDelete: CASCADE
    FlipbookSkills:
      foreignAlias: flipbook_skills_skills
      alias: flipbookskills
      local: skill_id
      onDelete: CASCADE 
```

**FlipbookSkillsRelationsForm.class.php：**

```
$this->widgetSchema['flipbook_id'] = new sfWidgetFormInputText(array(), array('class' => 'text size-500'));

$this->widgetSchema['skill_id'] = new sfWidgetFormSelectCheckbox(array('choices' => "**WHAT GOES HERE??**"), array('class' => 'text size-500'));

$useFields = array(
  'flipbook_id',
  'skill_id',
);

$this->useFields($useFields); 
```

让我知道我是否应该提供进一步的代码或解释。

下面是模型中生成的 FlipbookSkillsTable.class：

```
<?php

/**
 * FlipbookSkillsTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class FlipbookSkillsTable extends Doctrine_Table
{
    /**
     * Returns an instance of this class.
     *
     * @return object FlipbookSkillsTable
     */
    public static function getInstance()
    {
        return Doctrine_Core::getTable('FlipbookSkills');
    }

    public function retrieveForFilter()
    {
      $res = $this->createQuery('s')
        ->select('s.id, s.name')
        ->orderBy('s.name ASC')
        ->execute(array(), Doctrine_Core::HYDRATE_NONE);

      // if you want an empty line
      $rets = array('' => '');
      foreach ($res as $ret)
      {
        $rets[$ret[0]] = $ret[1];
      }

      return $rets;
    }

    public function getAllFlipbookSkills() {
        $allSkills = Doctrine_Query::create()
            ->from('FlipbookSkills')
            ->orderBy('title ASC')
            ->execute();
    return $allSkills;
    }
} 
```

**更新**

我认为问题在于它试图在同一记录中绑定多个值。它应该为每个选择的技能创建一个新记录，如下所示：

```
id    flipbook_id    skill_id
1          2            1
2          2            2
3          2            3 
```

所以我仍然没有正确确定模式，否则 Doctrine 会知道如何正确处理数据？我应该明确提出一对多的关系吗？

此外，提交时，它只是将flipbook_id 值添加到记录中。Skill_id 记录为 0

**FlipbookRelationsForm：**

```
class FlipbookSkillRelationsForm extends BaseFlipbookSkillRelationsForm
{
  public function configure()
  {

    $this->widgetSchema['skill_id'] = 
       new sfWidgetFormDoctrineChoice(array('model' => 
           $this->getRelatedModelName('flipbookskills'), 
            'expanded' => true, 'multiple' => true, 'add_empty' => false));

    $useFields = array(
            'flipbook_id',
            'skill_id',
        );

    $this->useFields($useFields);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T15:13:27.347

多个问题（也许这篇文章可以帮助：[symfony 1.4 中的嵌入式表单没有正确保存](https://stackoverflow.com/questions/8673124/embedded-forms-in-symfony-1-4-not-saving-propperly/11146988#11146988)）

您的 nm 关系看起来定义不明确。您的实体应如下所示：

```
FlipbookSkill:
  tableName: flipbook_skill
  columns:
    title: { type: string(255) }
  relations:
    Flipbooks:
      class: Flipbook
      refClass: FlipbookSkillRelation
      local: skill_id
      foreign: flipbook_id
/* Not foreignAlias and onDelete behaviour defined */

Flipbook:
  tableName: flipbook
  inheritance:
    extends: SvaGeneric
    type: concrete
  columns:
    title: { type: string(255) }
    career_associations: { type: clob }
    skills: { type: string(255) } # why this????
    skills_associations: { type: clob }  # why this????
    program: { type: string(255) }
    program_associations: { type: clob }
    draft_id: { type: integer(10) }
  relations:
    Skills:
      class: FlipbookSkill
      refClass: FlipbookSkillRelation
      local: flipbook_id
      foreign: skill_id

FlipbookSkillRelation:
  tableName: flipbook_skill_relation
  actAs:
    SoftDelete: ~
  options:
  columns:
    flipbook_id: { type: integer(10), notnull: false }
    skill_id: { type: integer(10), notnull: false }
  relations:
    Flipbook:
      foreignAlias: FlipbookSkills
      local: flipbook_id
      foreign: id
      onDelete: CASCADE
    FlipbookSkill:
      foreignAlias: FlipbookSkills
      local: skill_id
      foreign: id
      onDelete: CASCADE 
```

然后，您允许的方法/加入是：

$flipbookObject->getSkills(); 因为翻书实体 nm 关系名称为“Skills”，所以它返回一个 FlipbookSkill DoctrineCollection。或在查询中 ('f.innerJoin Skills s')

$flipbookObject->getFlipbookSkills(); 因为flipbookSkillRelation 1-n foreignAlias name，但可能你永远不会使用这个（因为你并不真正关心关系本身，而是你关心相关技能）。... ETC

如果您有明确定义的 schema.yml，那么您的表单应该可以正常工作。

另外：为什么要为 id 字段（flipbook_id）使用文本输入小部件？？？？如果您正在使用学说实体，为什么要使用 sfWidgetFormSelectCheckbox？您应该像 BaseEntity 定义的那样使用 sfWidgetFormDoctrineChoice。

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:40:47.760

你的验证者在哪里？Symfony 表单在缺少验证器或不合适的验证器时无法正常工作。如果您的验证器接受 1-1 关系，并且您发送多个值，它将不起作用。

试试这个 ：

```
$this->validatorSchema->setOption('allow_extra_fields' , true);
$this->validatorSchema->setOption('filter_extra_fields' , false); 
```

如果你的错误消失了，那么你的验证器有问题。否则，您可以尝试使用 sfEmbedded 表单，渲染 sfForm，并多次添加您的 FlipbooSkillForm 和选择。如果我没记错的话，有一些教程展示了如何在 js 中添加它们。

[http://nacho-martin.com/dynamic-embedded-forms-in-symfony](http://nacho-martin.com/dynamic-embedded-forms-in-symfony)

# php - Doctrine 2 - 从课堂上获取实体管理器

> ID：12535906
> 
> 赞同：1
> 
> 时间：2012-09-21T18:10:07.937
> 
> 标签：php, doctrine, doctrine-orm

我不知道如何最好地从我的服务层和模板控制器中获取 Doctrine Entity Manager..

我想制作一个单身人士，这样我总能得到实体管理器，但这是正确的做法吗？

**更新：我举个例子**

```
class Auth
{
    const USER_ENTITY_NAME = 'Entities\User';

    private $isVerified = FALSE;

    public static function login($email, $password, $em, $rememberMe = false)
    {
        if(empty($email) OR empty($password))
        {
            // new login response

        }

        if($user = (self::getUser($email, $password, $em) !== null))
        {
            $sreg = SessionRegistry::instance();
            $sreg->set("user_id", $user->getId());
        }
        return $user;
    }

    public static function getUser($email, $password, $em)
    {
        return $em->getRepository(
            USER_ENTITY_NAME );
    } 
```

我不知道我应该从哪里获得用户？所以我不必将实体管理器作为参数发送。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:46:21.553

选择[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)而不是单例。

我不知道您在哪个环境中使用 Doctrine，但我假设它是 MVC - 那么任何控制器都应该有权访问实体管理器，或者通过将其作为构造函数参数传递，或者通过使用 setter 注入它。

通过这种方式，您可以*从*控制器中获取内容，并最终将其传递给`Auth`类。

无论如何，我认为授权不需要外部类 - 我只需`loginAction`在控制器中编写一个方法，从 HTTP 请求中获取用户名和密码并进行通常的考虑 [获取用户/检查密码是否正确]，然后存储在成功登录的情况下会话中的某些内容。

# jquery - 现在我实际上可以获得这个 JSON 数据，我该如何使用它/循环遍历它？

> ID：12535912
> 
> 赞同：0
> 
> 时间：2012-09-21T18:10:20.303
> 
> 标签：jquery, ajax, json

我正在处理我的第一个（EVER！）JSON 项目，我想知道如何从 JSON 对象获取特定数据。我已经将其导入，并且刚刚发现（感谢堆栈溢出！）如何引用该数据。我现在能够做到这一点，下面的代码就是我所得到的。我有一堆通过数据的警报。我现在需要做的实际上是循环遍历并评估下面显示的 JSON 的 value 字段。我不知道如何选择它，以及如何循环它。我已经尝试过 data.films.value.value 和 data.films.value.value[0] 之类的东西，我敢肯定它接近那个，但我不知道如何获取数据成一种形式，让我可以像使用常规字符串一样使用该特定元素。我最终想做的是比较每部电影。

```
{
    "

films": [{
        "label": "34",
        "value": "34",
        "currently_streaming": "1",
        "full_streaming_url": "http://www.url.com",
        "url": "http://www.url.com"},
    {
        "label": "A Different Color",
        "value": "A Different Color",
        "currently_streaming": "1",
        "full_streaming_url": "http://www.url.php",
        "url": "http://www.url.com"}]
}​ 
```

这是加载它的代码。它返回成功，但我无法从 JSON 对象中获取任何数据：

```
 $(document).ready(function(){
    $.ajax({
        dataType: 'json',
        beforeSend : function() {
           console.log('Before Ajax Request Starts !!');
        },
        success: function(data) {
            console.log(data);
            alert("Edddddddd");
            $.each(data.films, function(i, object) {
            $.each(object, function(property, value) {
            alert(property + "=" + value);
    });
});
        },
        error : function(jqXHR, textStatus, errorThrown) {
             alert("Error occurred: " + errorThrown);
        },
         beforeSend : function() {
           console.log('Ajax Request Complete  !!');
        },
        url: 'test.php'
    });  
}); 
```

非常感谢任何和所有帮助！

**更新** 我现在正在尝试使用我从这里的每个人那里得到的很好的建议来循环。这就是我现在所拥有的：

```
 var test="34x25x36";
 $(document).ready(function(){
    $.ajax({
        dataType: 'json',
        beforeSend : function() {
           console.log('Before Ajax Request Starts !!');
        },
        success: function(data) {
            console.log(data);
            alert("Edddddddd");
            $.each(data.films, function(i, object) {
            $.each(object, function(property, value) {
            //alert(property + "=" + value);
            for (i=0; i<data.films.length; i++){
            var theFilm = (data.films[i].value);
            if (theFilm === test){
            document.write("Your movie is hot");
            document.write(theFilm);
            }
            else {
            }
            }
    });
});
        },
        error : function(jqXHR, textStatus, errorThrown) {
             alert("Error occurred: " + errorThrown);
        },
         beforeSend : function() {
           console.log('Ajax Request Complete  !!');
        },
        url: 'test.php'
    });  
}); 
```

当我尝试从循环中打印出来时，它似乎可以工作，但我遇到了问题。我最终需要将此数据与一些用户输入进行比较，我在顶部将其定义为 var test 用于测试目的。我希望它比较每个要测试的变量，但由于某种原因，它似乎是在设置要测试的每个变量。我的循环有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:12:05.970

尝试

`films[0].label`会给你34

要迭代你需要使用

```
$.each(data.films, function(i, object) { 
// And Not 
$.each(json.films, function(i, object) { 
```

尝试这个

**更新代码：**

因为 eacy arrach 项目又是一个对象，所以您需要再编写一个循环来访问其中的内容..

```
$.each(data.films, function() {
    $.each(this, function(j, val) {
        console.log('Key - ' + j + ' :: Value - ' + val);
    });
});​ 
```

这应该适用于您的情况

```
function(data) {
    console.log(data);
    alert("Edddddddd");
    $.each(data.films, function(i, object) {
        $.each(object, function(property, value) {
            alert(property + "=" + value);
        });
    });
}​ 
```

// 使用 For 循环

```
var keys = ["label", "value", "currently_streaming", "full_streaming_url", "url"]
for (i = 0; i < data.films.length; i++) {
    for (j = 0; j < keys.length; j++) {
        alert( 'Key - ' + keys[j] + ' :: Value - ' + data.films[i][keys[j]] )  ;
    }
}​ 
```

检查[小提琴](http://jsfiddle.net/sushanth009/yHQtp/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:16:08.017

您试图循环**json.films**而不是**data.films** ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T18:13:08.547

尝试这个：

```
success: function(data) {
  for (var item in data.films) {
    alert(item.label);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T18:52:38.943

```
{
    "films": [{  // <-- to access this data.films
        "label": "34",  // to access this data.films[0].label - this is the first object in the array
        "value": "34",  // to access this data.films[0].value
        "currently_streaming": "1", //  // to access this data.films[0].currently_streaming
        "full_streaming_url": "http://www.url.com", // and so on
        "url": "http://www.url.com"} // and so on
    {
        "label": "A Different Color", // to access this data.films[1].label - this is the second object in the array
        // arrays are zero indexed
        "value": "A Different Color", // to access this data.films[1].value
        "currently_streaming": "1",
        "full_streaming_url": "http://www.url.php",
        "url": "http://www.url.com"}]
}​ 
```

因此，当您循环时-您想循环数组所在的位置..

```
$.each(data.films, function(k,v){
    console.log(v.value); // <-- this will give you the value for both
    // now that you're here you can get value for each property by 
    // v.label
    // v.value
    // v.currently_streaming
    // v.full_streaming_url
    // v.url
}); 
```

[http://jsfiddle.net/KPkWe/](http://jsfiddle.net/KPkWe/)

# jquery - 查询谷歌地图太快？

> ID：12535916
> 
> 赞同：0
> 
> 时间：2012-09-21T18:10:45.657
> 
> 标签：jquery, google-maps

我使用 JS API 在 Google 地图上绘制了大约 100 个地址。我发现只有前 20 个被加载，其余的我从谷歌的 API 中得到一个错误。经过一些调试后，我发现我正在向许多人快速查询。

所以我的问题是；我将如何使用 js/jQuery 一次加载 20 个，将超时设置为 1 或 2 秒，然后再加载 20 个，然后重复直到没有更多结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:24:45.527

也许 setTimeout 应该可以工作，如果我记得，Gmaps 限制为 20 个查询/分钟。

```
setTimeout('get20More', 60000); 
```

但是您应该始终将这些数据保存在数据库中以供进一步使用，因此您不会无缘无故地查询 Gmaps。

# sed - 我可以更改列之间输出多少个空格'column -t'？

> ID：12535918
> 
> 赞同：3
> 
> 时间：2012-09-21T18:10:49.743
> 
> 标签：sed, awk

`column -t`一个 nit 令人惊叹：如何更改列之间输出的空格数？我要一个。 `column -t`给了两个。例如，

```
echo -en '111 22 3\n4 555 66\n' | column -t 
```

输出

```
111  22   3
4    555  66 
```

但我希望它输出以下内容：

```
111 22  3
4   555 66 
```

我想我可以通过 sed 正则表达式运行输出，将两个空格后跟一个单词边界变成一个空格，但我想避免在混合中添加另一个工具，除非有必要。

建议？我可以使用简单的替换命令来代替`column -t`完成同样的事情吗？用 awk 玩 OFS 游戏似乎不是一个替代品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:24:23.983

您无法更改 的内置间距`column`。这使您可以切换到不同的工具或进行后处理。`sed`您可以通过在每个数字前删除一个空格来廉价地完成阶梯：

```
echo -en '111 22 3\n4 555 66\n' | column -t | sed 's/ \([0-9]\)/\1/g' 
```

输出：

```
111 22  3
4   555 66 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:22:01.893

从 切换`column`到`pr`可能是一个好主意。`pr`有更多用于控制输出格式的选项，并且还可以创建列...

例如：

```
echo -en '111 22 3\n4 555 66\n' | tr ' ' '\n' | pr -3aT -s' ' 
```

产生：

```
111 22 3
4 555 66 
```

不知道如何在减少空格的同时保持对齐，所以它并不完美。

之所以`tr`存在，是因为`pr`希望每个条目都在一行中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T04:23:15.753

我认为最简单的方法是使用`tabs`. 在您的输出中，您期望选项卡编号为 5。因此，在终端类型中：`tabs 5`。这会将制表符宽度更改为 5。

然后输入：

```
echo -en '111 22 3\n4 555 66\n' | tr ' ' '\t' 
```

或者：

```
echo -en '111\t22\t3\n4\t555\t66\n' 
```

结果：

```
111 22  3
4   555 66 
```

有关更多信息，请键入：`man tabs`

# c++ - 访问 cv::Mat 的元素

> ID：12535921
> 
> 赞同：1
> 
> 时间：2012-09-21T18:11:01.990
> 
> 标签：c++, opencv

一个比较简单的问题。我有一个矩阵`mask`

```
cv::Mat mask = cv::Mat::zeros(20, 25, CV_8UC1); 
```

和一点`pt`

```
cv::Point pt(5,7); 
```

如何访问`mask`该位置的元素`pt`（第 5 行和第 7 列）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:23:50.630

```
char value = mask.at<char>(pt); 
```

# javascript - 弹出感谢信息

> ID：12535930
> 
> 赞同：0
> 
> 时间：2012-09-21T18:11:53.930
> 
> 标签：javascript, forms, popup

我是一名平面设计师，对 HTML、CSS 和 Javascript 有一定的了解。我的编码知识有点生疏，因为我多年没有发展。

我需要为我正在开发的网站制作“谢谢”弹出消息。根据我以前的知识，我知道 JavaScript 可以做到这一点，但是没有 JavaScript 有没有办法做到这一点？我希望网站对那些没有启用 JavaScript 的人来说也能正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T18:14:02.043

在这个越来越多地使用动态网站的时代，如果人们想关闭 JavaScript，那么如果网站无法运行，那将是他们的损失和艰难的掘金。

但是，如果您要提交表单，则：

*   您正在将其提交到另一个页面。只需让此页面显示感谢信息作为其内容的一部分。
*   您正在使用 AJAX 提交它，在这种情况下，您已经需要 JavaScript，因此不必担心人们没有启用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:16:04.233

您可以使用 CSS 模态框。例如，通过使用`div`with之类的东西`position:fixed`，您可以在屏幕中间添加 a`div`在其他所有内容之上，从而呈现自定义框。问题是您可能需要通过 javascript 来控制 div 样式。您也可以使用 CSS 框重定向到另一个页面。

我认为在javascript中这样做很好。也许闪存会更有问题。HTML5 更糟糕，现在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-01T19:48:37.673

如上所述，您可以使用 CSS 来创建 Modal。使用覆盖类并将其可见性转换为在屏幕上显示或隐藏将起作用并将其背景颜色属性更改为所需的纯色并降低不透明度。

```
.overlay {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    background: #0000007a;
    transition: opacity 200ms;
    visibility: hidden;
    opacity: 0;
} 
```

# android - 操作栏中的 Spinner 主题在模拟器中正确显示，但在手机上显示错误

> ID：12535931
> 
> 赞同：1
> 
> 时间：2012-09-21T18:11:57.887
> 
> 标签：android, android-actionbar, android-spinner, android-theme

我有一个问题，我使用的微调器在模拟器中正确显示，但在手机上显示不正确。

这张手机屏幕截图可以很好地说明这一点（注意“App Priorities 1”后面的**浅灰色背景）：**

![手机上显示的微调器主题不正确](../Images/7347d68150a46760b792e2ded9c36a8d.png)

它应该看起来像这样（取自模拟器）。这里的文本是白色的，背景应该是黑色的。

![模拟器上显示的正确微调器主题](../Images/09d075dd238aaf3b8467d6a56e99669f.png)

我不确定代码的所有相关部分是什么，但我有一个名为的文件夹`values-v14`，其中包含一个名为`styles.xml`. 该文件的内容是：

```
<resources>
<style name="AppTheme" parent="android:Theme.Holo.Light.DarkActionBar" />
</resources> 
```

这是微调器 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout1"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:gravity="fill_horizontal"
android:orientation="vertical" >

<TextView  
    android:id="@android:id/text1"
    style="?android:attr/spinnerItemStyle"      
    android:singleLine="true"
    android:layout_width="150dip"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:textAppearance="?android:attr/textAppearanceMedium"
 />

</RelativeLayout> 
```

我不确定清单是否相关，但我有这个： `android:minSdkVersion="15"` `android:targetSdkVersion="15"`

我尝试将版本设置为 14，但这没有任何区别。

更新：添加`android:theme="@style/AppTheme"`到清单后，模拟器和手机都具有一致的行为。操作栏现在应该是黑暗的。但是所有列表都有白色背景！

![现在列表颜色不正确！](../Images/27540c3c9e4f8211e55bd957433ccdfc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:25:48.550

改变你`AppTheme`的`Theme.Holo`而不是，`Theme.Holo.Light.DarkActionBar`你会得到你的黑暗背景。

`Theme.Holo.Light.DarkActionBar`与`Theme.Holo.Light`（浅色一切）相同，您猜对了，更暗`ActionBar`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:15:30.473

我猜手机有 Android 2.x 版本的 Android，而模拟器使用的是 Android 3+。这意味着模拟器有 Holo 主题，而手机没有。您必须创建自己的主题来复制 Holo 主题，或者接受它在不同版本的 Android 上看起来会有所不同的事实。确保它在所有版本中仍然看起来不错肯定需要更多的工作，但它也会带来更无缝的体验。

# java - 32 位 Windows 7 上的 Java 7 - Java Webstart - 无法加载资源

> ID：12535937
> 
> 赞同：6
> 
> 时间：2012-09-21T18:12:15.307
> 
> 标签：java, windows-7, 32-bit, java-7, java-web-start

32 位 Windows 7 上的 Java 7 - Java Webstart - 无法加载资源

我无法在 32 位 Windows 7 系统上启动任何 java webstart 应用程序。例如 ArgoUML - [http://argouml-downloads.tigris.org/jws/argouml-latest-stable.jnlp](http://argouml-downloads.tigris.org/jws/argouml-latest-stable.jnlp) Java 6 一切正常，但 Java 7 出现这种错误：

> 无法加载资源：**java.io.IOException：写入服务器时出错**或**java.net.SocketException：连接重置**

```
Java version:
Java Web Start 10.7.2.11
Using JRE version 1.7.0_07-b11 Java HotSpot(TM) Client VM 
```

这是跟踪日志：

```
    日志开始时间：pe, 21 syys 2012 21:04:19 +0300
    基本：Java 部分开始
    基本：jnlpx.jvm：C:\Program Files\Java\jre7\bin\javaw.exe
    基本：jnlpx.splashport：52540
    基本：jnlpx.remove：真
    基本：jnlpx.heapsize：NULL,512m
    网络：正在加载用户定义的代理配置...
    网络：完成。
    网络：浏览器是 ChromeHTML
    网络：浏览器是IE
    网络：从 Internet Explorer 加载代理配置...
    网络：完成。
    网络：正在加载直接代理配置...
    网络：完成。
    网络：代理配置：无代理
    安全性：属性 package.access value sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.org.apache.xerces.internal .utils.,com.sun.org.apache.xalan.internal.utils。
    安全性：属性 package.access 新值 sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.org.apache.xerces。 internal.utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.javaws
    安全性：属性 package.access value sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.org.apache.xerces.internal .utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.javaws
    安全性：属性 package.access 新值 sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.org.apache.xerces。 internal.utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.javaws,com.sun.deploy
    安全性：属性 package.access value sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.org.apache.xerces.internal .utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.javaws,com.sun.deploy
    安全性：属性 package.access 新值 sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.org.apache.xerces。 internal.utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.javaws,com.sun.deploy,com.sun.jnlp
    安全性：属性 package.definition 值 sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.org.apache.xerces.internal .utils.,com.sun.org.apache.xalan.internal.utils。
    安全性：属性 package.definition 新值 sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.org.apache.xerces。 internal.utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.javaws
    安全性：属性 package.definition 值 sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.org.apache.xerces.internal .utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.javaws
    安全性：属性 package.definition 新值 sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.org.apache.xerces。 internal.utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.javaws,com.sun.deploy
    安全性：属性 package.definition 值 sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.org.apache.xerces.internal .utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.javaws,com.sun.deploy
    安全性：属性 package.definition 新值 sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.org.apache.xerces。 internal.utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.javaws,com.sun.deploy,com.sun.jnlp
    安全性：属性 package.access value sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.org.apache.xerces.internal .utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.javaws,com.sun.deploy,com.sun.jnlp
    安全性：属性 package.access 新值 sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.org.apache.xerces。 internal.utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.javaws,com.sun.deploy,com.sun.jnlp,org.mozilla.jss
    安全性：属性 package.definition 值 sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.org.apache.xerces.internal .utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.javaws,com.sun.deploy,com.sun.jnlp
    安全性：属性 package.definition 新值 sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.org.apache.xerces。 internal.utils.,com.sun.org.apache.xalan.internal.utils.,com.sun.javaws,com.sun.deploy,com.sun.jnlp,org.mozilla.jss
    基本：运行JVMParams：[JVMParameters：isSecure：true，args：-Xmx512m]
        -> [JVMParameters: isSecure: true, args: -Xmx512m]
    网络：创建版本 ID：1.7.0.07
    网络：创建版本 ID：1.7
    网络：创建版本 ID：2.2.1
    临时：新的 XMLParser 与源：
    临时：<?xml version="1.0" encoding="utf-8"?>
    <!-- 用于使用 WebStart 启动 ArgoUML 的 JNLP 文件 -->
    <jnlp
      规格="1.0+"
      codebase="http://argouml-downloads.tigris.org/maven2"
      href="http://argouml-downloads.tigris.org/jws/argouml-latest-stable.jnlp">
      <信息>
        <title>ArgoUML 最新稳定版 0.34</title>
        <vendor>Tigris.org（开源）</vendor>
        <主页 href="http://argouml.tigris.org/"/>
        <description>ArgoUML 应用程序。
                     这是最新的稳定版本。
        </描述>
        <description kind="short">ArgoUML 0.34</description>
        <icon href="http://argouml.tigris.org/images/argologo16x16.gif" width="16" height="16" />
        <icon href="http://argouml.tigris.org/images/argologo32x32.gif" width="32" height="32" />
        <icon href="http://argouml.tigris.org/images/argologo64x64.gif" width="64" height="64" />
        <允许离线/>
      </信息>
      <安全>
        <所有权限/>
      </安全>
      <资源>
        <j2se version="1.6+" max-heap-size="512m"/>

        <jar href="http://argouml-downloads.tigris.org/maven2/antlr/antlr/2.7.7-3/antlr-2.7.7-3.jar"/>
        ……
        <property name="argouml.modules"
          value=";org.argouml.state2.StateDiagramModule;org.argouml.sequence2.SequenceDiagramModule;org.argouml.activity2.ActivityDiagramModule;org.argouml.core.propertypanels.module.XmlPropertyPanelsModule;org.argouml.transformer.TransformerModule;org. argouml.language.cpp.generator.ModuleCpp；org.argouml.language.cpp.notation.NotationModuleCpp；org.argouml.language.cpp.profile.ProfileModule；org.argouml.language.cpp.reveng.CppImport；org.argouml。 language.cpp.ui.SettingsTabCpp；org.argouml.language.csharp.generator.GeneratorCSharp；org.argouml.language.java.cognitive.critics.InitJavaCritics；org.argouml.language.java.generator.GeneratorJava；org.argouml。 language.java.profile.ProfileJava；org.argouml.language.java.reveng.JavaImport；org.argouml.language.java.reveng.classfile.ClassfileImport；org.argouml.language.java.ui.JavaTools；org.argouml。语。java.ui.SettingsTabJava；org.argouml.language.php.generator.ModulePHP4；org.argouml.language.php.generator.ModulePHP5；org.argouml.language.sql.SqlInit；org.argouml.uml.reveng.classfile。 ClassfileImport;org.argouml.uml.reveng.idl.IDLFileImport" />
      </资源>
      <application-desc main-class="org.argouml.application.Main"/>
    </jnlp>

    温度：

    返回 ROOT 如下：

    <jnlp spec="1.0+" codebase="http://argouml-downloads.tigris.org/maven2" href="http://argouml-downloads.tigris.org/jws/argouml-latest-stable.jnlp" >
      <信息>
        <title>ArgoUML 最新稳定版 0.34</title>
        <vendor>Tigris.org（开源）</vendor>
        <主页 href="http://argouml.tigris.org/"/>
        <description>ArgoUML 应用程序。
                     这是最新的稳定版本。
        </描述>
        <description kind="short">ArgoUML 0.34</description>
        <icon href="http://argouml.tigris.org/images/argologo16x16.gif" width="16" height="16"/>
        <icon href="http://argouml.tigris.org/images/argologo32x32.gif" width="32" height="32"/>
        <icon href="http://argouml.tigris.org/images/argologo64x64.gif" width="64" height="64"/>
        <允许离线/>
      </信息>
      <安全>
        <所有权限/>
      </安全>
      <资源>
        <j2se version="1.6+" max-heap-size="512m"/>
        <jar href="http://argouml-downloads.tigris.org/maven2/antlr/antlr/2.7.7-3/antlr-2.7.7-3.jar"/>...
        <property name="argouml.modules" value=";org.argouml.state2.StateDiagramModule;org.argouml.sequence2.SequenceDiagramModule;org.argouml.activity2.ActivityDiagramModule;org.argouml.core.propertypanels.module.XmlPropertyPanelsModule;org .argouml.transformer.TransformerModule;org.argouml.language.cpp.generator.ModuleCpp;org.argouml.language.cpp.notation.NotationModuleCpp;org.argouml.language.cpp.profile.ProfileModule;org.argouml.language.cpp .reveng.CppImport;org.argouml.language.cpp.ui.SettingsTabCpp;org.argouml.language.csharp.generator.GeneratorCSharp;org.argouml.language.java.cognitive.critics.InitJavaCritics;org.argouml.language.java .generator.GeneratorJava；org.argouml.language.java.profile.ProfileJava；org.argouml.language.java.reveng.JavaImport；org.argouml.language.java.reveng.classfile.ClassfileImport；org.argouml。language.java.ui.JavaTools；org.argouml.language.java.ui.SettingsTabJava；org.argouml.language.php.generator.ModulePHP4；org.argouml.language.php.generator.ModulePHP5；org.argouml.language。 sql.SqlInit;org.argouml.uml.reveng.classfile.ClassfileImport;org.argouml.uml.reveng.idl.IDLFileImport"/>
      </资源>
      <application-desc main-class="org.argouml.application.Main"/>
    </jnlp>
    temp：从 XMLFormat.parse() 返回 LaunchDesc：

    <jnlp spec="1.0+" codebase="http://argouml-downloads.tigris.org/maven2/" href="http://argouml-downloads.tigris.org/jws/argouml-latest-stable.jnlp ">
      <信息>
        <title>ArgoUML 最新稳定版 0.34</title>
        <vendor>Tigris.org（开源）</vendor>
        <主页 href="http://argouml.tigris.org/"/>
        <description>ArgoUML 应用程序。
                     这是最新的稳定版本。
        </描述>
        <description kind="short">ArgoUML 0.34</description>
        <icon href="http://argouml.tigris.org/images/argologo16x16.gif" height="16" width="16" kind="default"/>
        <icon href="http://argouml.tigris.org/images/argologo32x32.gif" height="32" width="32" kind="default"/>
        <icon href="http://argouml.tigris.org/images/argologo64x64.gif" height="64" width="64" kind="default"/>
        <允许离线/>
      </信息>
      <安全>
        <所有权限/>
      </安全>
      <update check="timeout" policy="always"/>
      <资源>
        <java max-heap-size="536870912" version="1.6+"/>
        <jar href="http://argouml-downloads.tigris.org/maven2/antlr/antlr/2.7.7-3/antlr-2.7.7-3.jar" download="eager" main="false"/ >
        ...
        <property name="argouml.modules" value=";org.argouml.state2.StateDiagramModule;org.argouml.sequence2.SequenceDiagramModule;org.argouml.activity2.ActivityDiagramModule;org.argouml.core.propertypanels.module.XmlPropertyPanelsModule;org .argouml.transformer.TransformerModule;org.argouml.language.cpp.generator.ModuleCpp;org.argouml.language.cpp.notation.NotationModuleCpp;org.argouml.language.cpp.profile.ProfileModule;org.argouml.language.cpp .reveng.CppImport;org.argouml.language.cpp.ui.SettingsTabCpp;org.argouml.language.csharp.generator.GeneratorCSharp;org.argouml.language.java.cognitive.critics.InitJavaCritics;org.argouml.language.java .generator.GeneratorJava；org.argouml.language.java.profile.ProfileJava；org.argouml.language.java.reveng.JavaImport；org.argouml.language.java.reveng.classfile.ClassfileImport；org.argouml。language.java.ui.JavaTools；org.argouml.language.java.ui.SettingsTabJava；org.argouml.language.php.generator.ModulePHP4；org.argouml.language.php.generator.ModulePHP5；org.argouml.language。 sql.SqlInit;org.argouml.uml.reveng.classfile.ClassfileImport;org.argouml.uml.reveng.idl.IDLFileImport"/>
      </资源>
      <application-desc main-class="org.argouml.application.Main"/>
    </jnlp>
    基本：新启动器：
    <jnlp spec="1.0+" codebase="http://argouml-downloads.tigris.org/maven2/" href="http://argouml-downloads.tigris.org/jws/argouml-latest-stable.jnlp ">
      <信息>
        <title>ArgoUML 最新稳定版 0.34</title>
        <vendor>Tigris.org（开源）</vendor>
        <主页 href="http://argouml.tigris.org/"/>
        <description>ArgoUML 应用程序。
                     这是最新的稳定版本。
        </描述>
        <description kind="short">ArgoUML 0.34</description>
        <icon href="http://argouml.tigris.org/images/argologo16x16.gif" height="16" width="16" kind="default"/>
        <icon href="http://argouml.tigris.org/images/argologo32x32.gif" height="32" width="32" kind="default"/>
        <icon href="http://argouml.tigris.org/images/argologo64x64.gif" height="64" width="64" kind="default"/>
        <允许离线/>
      </信息>
      <安全>
        <所有权限/>
      </安全>
      <update check="timeout" policy="always"/>
      <资源>
        <java max-heap-size="536870912" version="1.6+"/>
        <jar href="http://argouml-downloads.tigris.org/maven2/antlr/antlr/2.7.7-3/antlr-2.7.7-3.jar" download="eager" main="false"/ >
        ……
        <property name="argouml.modules" value=";org.argouml.state2.StateDiagramModule;org.argouml.sequence2.SequenceDiagramModule;org.argouml.activity2.ActivityDiagramModule;org.argouml.core.propertypanels.module.XmlPropertyPanelsModule;org .argouml.transformer.TransformerModule;org.argouml.language.cpp.generator.ModuleCpp;org.argouml.language.cpp.notation.NotationModuleCpp;org.argouml.language.cpp.profile.ProfileModule;org.argouml.language.cpp .reveng.CppImport;org.argouml.language.cpp.ui.SettingsTabCpp;org.argouml.language.csharp.generator.GeneratorCSharp;org.argouml.language.java.cognitive.critics.InitJavaCritics;org.argouml.language.java .generator.GeneratorJava；org.argouml.language.java.profile.ProfileJava；org.argouml.language.java.reveng.JavaImport；org.argouml.language.java.reveng.classfile.ClassfileImport；org.argouml。language.java.ui.JavaTools；org.argouml.language.java.ui.SettingsTabJava；org.argouml.language.php.generator.ModulePHP4；org.argouml.language.php.generator.ModulePHP5；org.argouml.language。 sql.SqlInit;org.argouml.uml.reveng.classfile.ClassfileImport;org.argouml.uml.reveng.idl.IDLFileImport"/>
      </资源>
      <application-desc main-class="org.argouml.application.Main"/>
    </jnlp>
    网络：prepareToLaunch：offlineOnly=false
    网络：未找到缓存条目 [url：http://argouml-downloads.tigris.org/jws/argouml-latest-stable.jnlp，版本：null]
    网络：未找到缓存条目 [url：http://argouml-downloads.tigris.org/jws/argouml-latest-stable.jnlp，版本：null]
    网络：未找到缓存条目 [url：http://argouml-downloads.tigris.org/jws/argouml-latest-stable.jnlp，版本：null]
    网络：使用 proxy=DIRECT 连接 http://argouml-downloads.tigris.org/jws/argouml-latest-stable.jnlp
    网络：使用 proxy=DIRECT 连接 socket://argouml-downloads.tigris.org:80
    网络：使用 proxy=DIRECT 连接 socket://argouml-downloads.tigris.org:80
    java.io.IOException：写入服务器时出错
        在 sun.net.www.protocol.http.HttpURLConnection.writeRequests（未知来源）
        在 sun.net.www.protocol.http.HttpURLConnection.writeRequests（未知来源）
        在 sun.net.www.protocol.http.HttpURLConnection.getInputStream（未知来源）
        在 java.net.HttpURLConnection.getResponseCode（未知来源）
        在 com.sun.deploy.net.BasicHttpRequest.doRequest（未知来源）
        在 com.sun.deploy.net.BasicHttpRequest.doGetRequestEX（未知来源）
        在 com.sun.deploy.net.DownloadEngine.actionDownload（未知来源）
        在 com.sun.deploy.net.DownloadEngine._downloadCacheEntry（未知来源）
        在 com.sun.deploy.cache.ResourceProviderImpl.getResourceCacheEntry（未知来源）
        在 com.sun.deploy.cache.ResourceProviderImpl.getResourceCacheEntry（未知来源）
        在 com.sun.deploy.cache.ResourceProviderImpl.getResource（未知来源）
        在 com.sun.javaws.Launcher.updateFinalLaunchDesc（未知来源）
        在 com.sun.javaws.Launcher.prepareToLaunch（未知来源）
        在 com.sun.javaws.Launcher.prepareToLaunch（未知来源）
        在 com.sun.javaws.Launcher.launch（未知来源）
        在 com.sun.javaws.Main.launchApp（未知来源）
        在 com.sun.javaws.Main.continueInSecureThread（未知来源）
        在 com.sun.javaws.Main.access$000（未知来源）
        在 com.sun.javaws.Main$1.run（未知来源）
        在 java.lang.Thread.run（未知来源）
    网络：使用 proxy=DIRECT 连接 http://argouml-downloads.tigris.org/jws/argouml-latest-stable.jnlp
    网络：使用 proxy=DIRECT 连接 socket://argouml-downloads.tigris.org:80
    网络：使用 proxy=DIRECT 连接 socket://argouml-downloads.tigris.org:80
    java.net.SocketException：连接重置
        在 java.net.SocketInputStream.read（未知来源）
        在 java.net.SocketInputStream.read（未知来源）
        在 java.io.BufferedInputStream.fill（未知来源）
        在 java.io.BufferedInputStream.read1（未知来源）
        在 java.io.BufferedInputStream.read（未知来源）
        在 sun.net.www.http.HttpClient.parseHTTPHeader（未知来源）
        在 sun.net.www.http.HttpClient.parseHTTP（未知来源）
        在 sun.net.www.http.HttpClient.parseHTTP（未知来源）
        在 sun.net.www.protocol.http.HttpURLConnection.getInputStream（未知来源）
        在 java.net.HttpURLConnection.getResponseCode（未知来源）
        在 com.sun.deploy.net.BasicHttpRequest.doRequest（未知来源）
        在 com.sun.deploy.net.BasicHttpRequest.doRequest（未知来源）
        在 com.sun.deploy.net.BasicHttpRequest.doGetRequest（未知来源）
        在 com.sun.deploy.net.DownloadEngine.actionDownload（未知来源）
        在 com.sun.deploy.net.DownloadEngine._downloadCacheEntry（未知来源）
        在 com.sun.deploy.cache.ResourceProviderImpl.getResourceCacheEntry（未知来源）
        在 com.sun.deploy.cache.ResourceProviderImpl.getResourceCacheEntry（未知来源）
        在 com.sun.deploy.cache.ResourceProviderImpl.getResource（未知来源）
        在 com.sun.javaws.Launcher.updateFinalLaunchDesc（未知来源）
        在 com.sun.javaws.Launcher.prepareToLaunch（未知来源）
        在 com.sun.javaws.Launcher.prepareToLaunch（未知来源）
        在 com.sun.javaws.Launcher.launch（未知来源）
        在 com.sun.javaws.Main.launchApp（未知来源）
        在 com.sun.javaws.Main.continueInSecureThread（未知来源）
        在 com.sun.javaws.Main.access$000（未知来源）
        在 com.sun.javaws.Main$1.run（未知来源）
        在 java.lang.Thread.run（未知来源）
    preloader：构造预加载器委托
    网络：使用 proxy=DIRECT 连接 socket://127.0.0.1:52540
    #### Java Web 启动错误：
    #### 无法加载资源：http://argouml-downloads.tigris.org/jws/argouml-latest-stable.jnlp

```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T04:35:56.970

问题似乎出在 Windows 环境中的 Java 7 IPv6 中。解决方案是添加： `<j2se version="1.6.10+" href="http://java.sun.com/products/autodl/j2se" **java-vm-args="-Djava.net.preferIPv4Stack=true"**/>`

（我还手动将 java.exe 和 javaws.exe 添加到 Windows 防火墙和 F-Secure 的例外列表中。）

感谢理查德康威：[http ://grokkingis.blogspot.fi/2012/08/work-arounds-windows-firewall-blocking.html?showComment=1349808752760#c2225417445483685032](http://grokkingis.blogspot.fi/2012/08/work-arounds-windows-firewall-blocking.html?showComment=1349808752760#c2225417445483685032)

# php - 使用 SwiftMailer 的 Throttle 插件会导致服务器断开连接

> ID：12535939
> 
> 赞同：0
> 
> 时间：2012-09-21T18:12:29.610
> 
> 标签：php, apache, email, swiftmailer

假设我们有一个包含通讯订阅者的 2000 个电子邮件列表，我们需要向他们群发电子邮件。服务器在发送电子邮件以防止垃圾邮件时确实有每小时限制。

有些人每小时有 300 甚至 500 封电子邮件，这很公平。

例如，使用 swiftmailer 节流插件每分钟发送 8 封电子邮件（8 * 60 分钟 = 480 总邮件，低于 500 限制）服务器关闭连接并以“404 - 未找到页面”响应。

奇怪的是，它在脚本执行期间发送了 100 封或更少的电子邮件，但服务器仍将程序视为陷入无限循环并终止脚本执行。

如果我尝试在没有油门插件的情况下一次发送 500 封电子邮件，它就像一个魅力。但是，如果我需要发送更多的电子邮件，例如 1500 或 2000，该怎么办？

我已经阅读了油门插件使用 PHP 的本机函数`sleep()`，它应该在这种情况下正常工作。

我被告知，如果该过程是通过 Cron Job 而不是通过 HTTP 协议执行的，它可以工作。我尝试过使用 wget 和 curl 来设置 cron 作业，但仍然没有运气。

我从我进行的研究中了解到，当使用带有 Swiftmailer 的 SMTP 服务器时，3 秒的过程需要 28 秒（比它应该的要长得多）。所有查询都经过优化，所有数据都正确放置在内存中，而不会使服务器过载。

之后，我决定不使用 SMTP 试一试，但 Throttler 插件（再次）无法正常工作。

任何建议或建议将不胜感激。

**编辑：**我也读过这个：[SwiftMailer Batch email time my Server out](https://stackoverflow.com/questions/12178364/swiftmailer-batch-email-times-my-server-out?rq=1)

当然我用这个：

```
ignore_user_abort(true);
set_time_limit(0);
ini_set('max_execution_time', 0);
ini_set('memory_limit', '256M');
ini_set('mysql.connect_timeout', 500);
ini_set('default_socket_timeout', 500); 
```

PS：我现在被迫更改脚本的行为，以便它根据用户每分钟输入的电子邮件计算服务器的限制，如果活跃订阅者的总数小于或等于将要发送的电子邮件，它在没有油门插件的情况下发送它们。

最热烈的问候，乔治·吉尔索

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-13T18:00:21.840

我认为这与您的 SMTP 连接超时有关。

当您在循环中处理电子邮件并与 Throttle 插件结合使用时，Swiftmailer 没有机会关闭与 SMTP 服务器的连接，并且可能会限制单个连接中发送的电子邮件数量.

这就是为什么建议将**[AntiFlood](http://swiftmailer.org/docs/plugins.html#antiflood-plugin)**插件也加入组合中的原因，它会在发送 x 封邮件后关闭 SMTP 连接并等待 y 秒直到重新连接。

`$transport->start()`并且`$transport->stop()`是与插件正在使用的 SMTP 服务器连接和断开连接的手动方法。

对于 SMTP 传输，还有一个超时参数，您可能会感兴趣。

将您的代码放在 try{} catch{} 中也可以很好地处理错误。

希望这会有所帮助，即使对你来说有点晚了！

# iphone - Iphone 将 url 标记为不安全

> ID：12535941
> 
> 赞同：2
> 
> 时间：2012-09-21T18:12:51.373
> 
> 标签：iphone, ios, ssl, https, web

我正在使用带有 ios 6 的 iphone 调试一个站点。在访问我得到的站点时，在 mac 上使用 iphone 的检查器：

`Failed to load resource: The certificate for this server is invalid. You might be connecting to a server that is pretending to be “www.photorank.me” which could put your confidential information at risk.`

当我使用 ffox/chrome/safari 在 Mac 上访问同一站点时，该问题不存在。

有问题的 URL 是[https://www.photorank.me/static/js/olapic/widgets/ecommerce.js](https://www.photorank.me/static/js/olapic/widgets/ecommerce.js)

证书似乎由于某种原因无效，但唯一这样说的设备是 iphone 和 ipad ..

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T00:07:39.960

它不受信任，[请参阅 this](http://www.digicert.com/help/)或[this](http://www.sslshopper.com/ssl-checker.html)。OSX 可能具有比 iOs 设备或模拟器更广泛的根证书库。

# javascript - 在渲染大型本地文件时显示动画

> ID：12535946
> 
> 赞同：0
> 
> 时间：2012-09-21T18:13:07.203
> 
> 标签：javascript, html, loading, large-files

我有一个本地 HTML 文件，其中包含一个大型 SVG 节点。如果我打开这个文件，它会在浏览器中呈现 SVG 文件，这需要一些时间（由于过滤器）。由于浏览器的限制，我无法将 SVG 节点外包，例如通过从文件中加载它。有没有办法用一个动画覆盖整个页面，从我启动浏览器到渲染 SVG 内容都是可见的？

什么不起作用是：

```
...
<head>
  <style type="text/css">
    #content {
      display: none;
    }
  </style>
</head>
<body onload="$('#content').css('display','block');$('#loading').css('display','none');">
  <div id="content">
  ...
    <svg> .... </svg>
  ...
  </div>
  <div id="loading">&nbsp;</div>
</body> 
```

因为加载动画在加载网页时是不可见的，并且在加载 SVG 节点之前是不可见的。

帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:22:33.757

在加载 svg 之前触发body`onload`事件，这就是为什么页面加载时看不到动画的原因。您需要在 svg 的`onload`事件中添加 #content <-> #loading 切换：

```
<body>
  <div id="content">
  ...
    <svg onload="$('#content').css('display','block');$('#loading').css('display','none');"> .... </svg>
  ...
  </div>
  <div id="loading">&nbsp;</div>
</body> 
```

# python - 有没有可能在 django 中执行服务器的命令？那个地点？

> ID：12535952
> 
> 赞同：0
> 
> 时间：2012-09-21T18:13:18.923
> 
> 标签：python, django, command, subprocess, execute

我尝试通过在views.py中使用子进程来做到这一点

```
returnCode = subprocess.call('/Users/ivanlw/Projects/C/app') #use the absolute path
print 'returnCode', returnCode 
```

app文件只是打印一个句子，在终端执行时是正常的

但最后django的调试页面告诉我OSError，异常值显示：[Errno 2] No such file or directory

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:30:46.203

你可以试试这个：

a) 检查这个[问题](https://stackoverflow.com/questions/546017/how-do-i-run-another-script-in-python-without-waiting-for-it-to-finish)的答案。它显示了如何启动在后台运行的子进程。

> ```
> p = subprocess.Popen([sys.executable, '/path/to/script.py'], 
>                                     stdout=subprocess.PIPE, 
>                                     stderr=subprocess.STDOUT) 
> ```

b）由于错误代码表明该进程找不到您要调用的文件。如果路径正确，可能会更改应用程序文件的权限。

c) 尝试通过 shell 启动子进程，看看它是否也从那里失败：

> ```
> #start the python shell
> python
> #call the subprocess
> subprocess.call('/Users/ivanlw/Projects/C/app') 
> ```

# ada - 我需要帮助查找有关 Ada 2012（或 2005）的信息

> ID：12535960
> 
> 赞同：2
> 
> 时间：2012-09-21T18:14:09.090
> 
> 标签：ada

好的，所以我正在读 CS 学位的大四，我必须为我的编程语言课程写一篇关于 Ada 的 30 多页论文。我找到了大量信息......对于 1983 年的版本。但我无法找到更新的信息。有谁知道我在哪里可以介绍 Ada 2012（或至少 2005 年）的编程介绍，可以在论文中引用？

我应该能够比较和对比新旧版本，就像我说的，我有很多关于旧版本信息的书，我只是在新版本上找不到任何与任何东西都无关的东西非常具体（如并发）或来自不可引用的来源。即便如此，这也仅适用于 2005 版……

...我根本没有在 2012 版上找到任何东西。我想它可能太新了。

我搜索了 ACM 数据库、Books 24/7、我的大学图书馆和 Google Scholar。

我不是要你们为我或任何其他人做我的研究。我只需要朝着正确的方向前进。我觉得我有足够的能力，如果我能得到一两个更新的资源，我就可以开始了。

任何帮助都将不胜感激。它看起来像是一种有趣的语言（如果不是有点压倒性的话），我真的很担心这个项目。我还有 2 个月的时间来研究它，但是这位老师就像……嗯……就像这个女人： http://images.wikia.com/harrypotter/images/f/f9/Dolores_Umbridge_(Promo_still_from_HP5_movie) [_10- 15-2009.jpg](http://images.wikia.com/harrypotter/images/f/f9/Dolores_Umbridge_(Promo_still_from_HP5_movie)_10-15-2009.jpg)

提前感谢您的帮助。

tl;博士 - 我可以找到很多旧信息，但几乎没有关于 Ada 的最新信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T18:27:03.513

您是否尝试过其中一些页面？

[艾达信息交换所](http://www.adaic.org/ada-resources/)

[Ada2012.org](http://ada2012.org)

[Ada Core - Ada 答案](http://www.adacore.com/adaanswers)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-21T18:53:24.880

这是 Ada 2012 的基本原理： http: [//www.ada-auth.org/standards/12rat/html/Rat12-0-2.html](http://www.ada-auth.org/standards/12rat/html/Rat12-0-2.html) 您可能想查看以下条目：

*   塔夫脱修正型
*   量化表达
*   方面
*   谓词（动态和静态）
*   前置/后置条件
*   迭代器，容器

这是关于 Ada 的受保护对象的两页：

*   [http://www.iuma.ulpgc.es/users/jmiranda/gnat-rts/node25.htm](http://www.iuma.ulpgc.es/users/jmiranda/gnat-rts/node25.htm)
*   [http://jalada.co.uk/2010/02/04/adas-protected-objects.html](http://jalada.co.uk/2010/02/04/adas-protected-objects.html)

此外，Ada 2005 Rationale 关于 null 的条目不包括访问 [子] 类型： http: [//www.adaic.org/resources/add_content/standards/05rat/html/Rat-3-2.html](http://www.adaic.org/resources/add_content/standards/05rat/html/Rat-3-2.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T15:29:18.240

约翰·巴恩斯 (John Barnes) 在最新的 Ada 用户期刊号中就 Ada 2012 的新功能发表了一系列文章。它们很容易阅读并深入到问题的实质。我很确定它们可以在 Adacore 的网站上找到。让我谷歌它...

好的，这里是前四章（右侧链接）：

[http://www.adacore.com/adaanswers/about/ada-2012](http://www.adacore.com/adaanswers/about/ada-2012)

这张图表是一个很好的一目了然的术语来源：

[http://www.adacore.com/adaanswers/about/ada-comparison-chart/](http://www.adacore.com/adaanswers/about/ada-comparison-chart/)

# javascript - JavaScript & jQuery：更改变量并检查值

> ID：12535963
> 
> 赞同：0
> 
> 时间：2012-09-21T18:14:22.727
> 
> 标签：javascript, jquery, variables

我对 JavaScript/jQuery 有疑问。我试图在显示对话框后更改变量的值，并且如果检查了复选框，但是当我检查它的值时这不起作用。我能做些什么或者这个代码是错误的？

HTML：

```
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>JS/jQuery</title>
  <link rel="stylesheet" type="text/css" href="style.css">
  <script type="text/javascript" src="jquery-1.8.2.min.js"></script>
  <script type="text/javascript" src="myjs.js"></script>
</head>
<body>
  <div class="back"></div>
  <div class="start">   
    <label for="chex">Is this checkbox checked?</label>
    <input type="checkbox" id="checkexist" name="chex" />
    <button id="run">Run form</button>
  </div>
  <div class="window"></div>
</body>
</html> 
```

JavaScript：

```
$(document).ready(function() {

  var start = false;
  var check = false;

  if (start == false) {
    $("#checkexist").click(function(){
        if (this.checked) {
            check = true;
        }
    });
    $("#run").click(function(){
        start = true;
        $(".start").fadeOut('slow', function(){
            $(".start").css("display", "none");
        });
        $(".back").fadeOut('slow', function(){
            $(".back").css({'display' : 'none', 'opacity' : '0', 'filter' : 'alpha(opacity=0)'});
        });
    });
  } else {
    if (check == true) {
        $(".window").click(function(){
            $(".window").hide('fast');
        });
    } else {
        //do something
    }
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:34:03.907

好的，让我们尝试一点一点地解决这个问题。

你的代码在里面运行`$(document).ready(function() {});` ，正如其他人告诉你的那样，`if (start == false) {}`这部分永远不会运行：`else{}`，因为当页面加载时，下一个`start`总是设置为`false`( `var start = false;`)，

```
$("#checkexist").click(function(){
        if (this.checked) {
            check = true;
        }
    }); 
```

可以替换为：`$('#checkexist').is('checked')`将返回`true`或`false`基于复选标记。`true`已选中，`false`未选中。

现在，假设我们知道这一点，并且我们知道您想在单击按钮时运行它：

```
$('#run').on('click', function(){
    // close the start and back
    $(".start,.back").fadeOut('slow');
    if ($('#checkexist').is(':checked'))
    {
        // checkbox is checked, close the .window
        $(".window").hide('fast');
    }else{
        //checkbox was not checked, what to do?
    }
}); 
```

有一个小的语法错误。现在工作正常。你可以在这里看到它的工作：http: [//jsfiddle.net/fp7kV/8/](http://jsfiddle.net/fp7kV/8/)

抱歉，错过了`:`

# java - 在 accept() 调用上抛出 Socket Closed 异常

> ID：12535964
> 
> 赞同：1
> 
> 时间：2012-09-21T18:14:24.953
> 
> 标签：java, sockets, port

我一直在寻找解决方案，但我还没有找到。我正在尝试对套接字锁进行编程，以便一次只能运行我的程序的一个实例，但是我遇到了套接字关闭异常。这是我的 SocketCode 代码

```
package utilities;

import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.SocketAddress;

import utilities.enums.ClientType;

public class SocketLocker {
    private final int PORT;
    private ServerSocket serverSocket;
    private Socket clientSocket;

    public SocketLocker(ClientType cType) {
        serverSocket = null;
        clientSocket = null;
        switch (cType)
            {
            case PRODUCER:
                PORT = 7856;
                break;
            case CONSUMER:
                PORT = 7857;
                break;
            default:
                PORT = 7859;
            }
    }

    public boolean getLock() {
        try {
            serverSocket = new ServerSocket(PORT,1);
            clientSocket = serverSocket.accept();
            return true;
        } catch (IOException e) {
            // TODO: log event
            e.printStackTrace();
        }
        return false;
    }

    public void releaseLock() {
        try {
            if (clientSocket != null)
                clientSocket.close();
            if (serverSocket != null)
                serverSocket.close();
        } catch (IOException e) {
            // TODO: Log event

        }
    }
} 
```

这是我正在运行以获取异常的单元测试代码：

```
package utilities;

import static org.junit.Assert.assertFalse;
import static org.junit.Assert.assertTrue;

import org.junit.After;
import org.junit.Before;
import org.junit.Test;

import utilities.enums.ClientType;

public class SocketLockerTest {

    private SocketLocker producerLocker;
    private SocketLocker consumerLocker;

    @Before
    public void start() {
        producerLocker = new SocketLocker(ClientType.PRODUCER);
        consumerLocker = new SocketLocker(ClientType.CONSUMER);
    }

    @Test(timeout = 10000)
    public void lockProducer() {
        assertTrue(producerLocker.getLock());
    }

    @Test(timeout = 10000)
    public void lockConsumer() {
        assertTrue(consumerLocker.getLock());
    }

    @Test(timeout = 10000)
    public void lockProducerTwice() {
        producerLocker.getLock();
        assertFalse(producerLocker.getLock());
    }

    @Test(timeout = 10000)
    public void lockSeparately() {
        producerLocker.getLock();
        assertTrue(consumerLocker.getLock());
    }

    @Test(timeout = 10000)
    public void lockProdcuerSeparateObject(){
        producerLocker.getLock();
        assertFalse(new SocketLocker(ClientType.PRODUCER).getLock());
    }

    @After
    public void finish() {
        producerLocker.releaseLock();
        consumerLocker.releaseLock();
    }
} 
```

这是一个例外：

```
java.net.SocketException: socket closed
    at java.net.PlainSocketImpl.socketAccept(Native Method)
    at java.net.PlainSocketImpl.accept(Unknown Source)
    at java.net.ServerSocket.implAccept(Unknown Source)
    at java.net.ServerSocket.accept(Unknown Source)
    at utilities.SocketLocker.getLock(SocketLocker.java:34)
    at utilities.SocketLockerTest.lockProducer(SocketLockerTest.java:25)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.FailOnTimeout$1.run(FailOnTimeout.java:28) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:55:24.653

您的测试超时失败。你打电话时

```
 @Test(timeout = 10000)
    public void lockProducer() {
        assertTrue(producerLocker.getLock());
    } 
```

在指定端口上打开服务器套接字，然后等待连接进入会发生什么情况。

```
serverSocket = new ServerSocket(PORT,1);
clientSocket = serverSocket.accept(); 
```

因此，您的代码将等待接受直到超时，因为您没有发起连接尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T20:42:36.557

如果服务器套接字的目的只是防止两个实例同时运行，那么接受它上的连接是没有意义的。只需删除客户端套接字变量和 accept() 调用。您实现的不是锁，而是实际上是死锁。

# java - 使用对集合的接口引用

> ID：12535968
> 
> 赞同：2
> 
> 时间：2012-09-21T18:15:07.063
> 
> 标签：java, design-patterns, collections, interface

我们使用对集合的接口引用。它只是为了良好的编码实践还是背后有一些逻辑？谁能解释一下？

例如：

我们用

```
Map<String, Integer> map = new HashMap<String,Integer>(); 
```

代替

```
HashMap<String, Integer> map = new HashMap<String,Integer>(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T18:17:33.420

如果您使用`HashMap`您的实现变得特定于，`HashMap`但如果您使用`Map`，您可以在将来将其更改为任何`Map Implementation`。

您可以阅读**第 52 条：**从 Effective Java 中通过接口引用对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T18:16:11.993

拥有`interface`将允许您在未来透明地更改实现（在客户端没有很多更改）。

例如：

```
Map<String, Integer> map = new LinkedHashMap<String,Integer>(); 
```

即使您将实现更改为 LinkedHashMap，客户端也不需要对其进行任何更改。

如果你使用

```
HashMap<String, Integer> map = new HashMap<String,Integer>(); 
```

客户端与实现紧密耦合。如果您更改实现，那么您还需要更改客户端。

一个缺点是，如果您想使用任何特定于实现的方法，您需要转换为相应的类型并使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T18:18:08.903

这个想法是您对组件的合同进行编码，而不是对实现进行编码。java.util.Map 有许多实现，如果您的代码完全依赖于接口，可以在需要时无缝互换。

一般来说，松散耦合是一种很好的做法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T18:18:41.350

代码维护是一个优势，如果有人想使用其他具体的代码`Map`，您只需更改一行而不是数十行。在您的代码片段示例中似乎并非如此，只有当对象引用的使用在参数和返回类型中变得普遍时才会出现问题。我认为最好从一开始就开始“考虑接口”而不是对象，以避免编写带来这些问题的代码的趋势。在这里引用[Allen Hollub](http://www.holub.com/)

> 如果您编写的客户端代码只关注接口所保证的功能，而不是特定类的实际实现，那么您将来将有更多的自由来更改实现。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-21T18:19:16.050

如下所示 -

```
class MapTest {
    Map<String, Integer> map;

    public MapTest(Map<String, Integer> map) {
        this.map = map;
    }

    public void setMap(Map<String, Integer> map) {
        this.map = map;
    }

    //do stuffs with map
} 
```

你可以传入不同的实现`Map`。但是如果`map`是类型，`HashMap`那么它总是必须是一个`HashMap`（或者如果你将它子类化，它就是子类）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-21T11:55:15.557

第一种方法比第二种方法***灵活得多：***

```
Map<String, Integer> map = new HashMap<String,Integer>(); 
```

这样，如果您决定改用 a ，则只需更改一行`TreeMap`。

此外，对集合进行操作的方法应指定类型的参数`Map`：

```
public static void print(Map<String, Integer> s) 
```

然后该方法可用于所有地图实现。

理论上，我们应该对链表提出同样的建议，即将`LinkedList`引用保存在类型为 的变量中`List`。

# cuda - 标量变量和寄存器：CUDA

> ID：12535971
> 
> 赞同：0
> 
> 时间：2012-09-21T18:15:18.607
> 
> 标签：cuda, gpu

我认为 CUDA 会尝试在寄存器中分配标量变量，而在 Fermi 类 GPU 中，每个线程都有 63 个寄存器。我的代码是这样的：

```
__global__ void test20 (double a)
{
    double i1=1.0;
    double i2=2.0;
    double i3=3.0;
    double i4=4.0;
    double i5=5.0;
    double i6=6.0;
    double i7=7.0;
    double i8=8.0;
    double i9=9.0;
    double i10=10.0;
    ...

    a = i1+i2+i3 ... i20
 } 
```

但是当我看到使用 NVVP 的每个线程的寄存器数量时，我只看到每个线程分配了 2 个寄存器，而我预计会有更高的数量。即使我将变量减少到 10，分配的寄存器数量也保持不变。为什么会发生这种情况，我如何确保如果我有 n 变量，CUDA 使用 n 寄存器（考虑到每个变量都可以存储在单个寄存器中）？

编辑：

根据建议，我修改了如下代码：

```
 __global__ void test (double *a)
{
    double reg1;
    double reg2;
    double reg3;
    double reg4;
    double reg5;
    double reg6;
    double reg7;
    double reg8;
    ....till 40
    reg1 = log10f(a[0]);
    reg2 = log10f(a[1]);
    reg3 = log10f(a[2]);
    reg4 = log10f(a[3]);
    reg5 = log10f(a[4]);
    reg6 = log10f(a[5]);
    reg7 = log10f(a[6]);
    reg8 = log10f(a[7]);
    reg9 = log10f(a[8]);
    ....till 40
    a[0] = reg1;
    a[1] = reg2;
    a[2] = reg3;
    a[3] = reg4;
    a[4] = reg5;
    a[5] = reg6;
    a[6] = reg7;
    a[7] = reg8;
   } 
```

我正在`memcpy`将阵列`a`返回给主机。我现在看到每个线程都使用了所有 63 个寄存器：`ptxas info : Used 62 registers, 40 bytes cmem[0]`. 尽管我传递的变量多于寄存器无法容纳的变量，但我没有看到任何溢出到本地内存；我认为 NVCC 正在优化代码以仅使用寄存器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T00:11:43.787

如果您遵循@talonmies 的建议来使用无法在运行时评估的表达式，您可能仍然无法在每个声明中获得一个寄存器（或者在这种情况下 2 个寄存器来保存一个双精度）。您可能还必须在持续时间内使变量保持活动状态。

```
__global__ void test20 (double a)
{
    double i1=1.0 * a;
    double i2=2.0 * i1;
    double i3=3.0 * i2;
    double i4=4.0 * i3;
    double i5=5.0 * i4;

    a = i1+i2+i3+i4+i5;

    printf("a = %f = %f + %f + %f + %f + %f\n", a, i1, i2, i3, i4, i5);
} 
```

这是在浏览器中编写的示例代码。目标是将值保留在寄存器中。该示例没有实际应用，因为编译器的目标是使用最少的寄存器。唯一的价值是调试以使变量在其范围内保持活动状态。

如果您想了解寄存器的使用情况，您应该使用 cuobjump -sass 转储内核的汇编代码。

# javascript - 对话框窗口上的表单提交在 IE 中打开一个空白页面

> ID：12535973
> 
> 赞同：0
> 
> 时间：2012-09-21T18:15:22.633
> 
> 标签：javascript, html, internet-explorer, jsp

我已经搜索了所有类似的问题，但不幸的是，似乎没有一个对我有用。我有一个对话框表单，它在父文档中单击时打开。编辑完值后，表单被提交给 java servlet，关闭对话框并返回到父级。在 Chrome 或 Firefox 中一切正常，但是在 IE 中它会打开一个带有响应 URL 的空白页面。解决方案将非常有帮助，但任何指针都应该没问题。

父 JSP：

```
<body class="yui3-skin-sam">
    <center>
        <div id="ok">
        <h1>NBReports</h1>
        <p>New business on call reports</p><br/>        
        <input type="button" value="Add Row" align="right" onclick="javascript: showWindow(window, 1)" /><br/>      
        <div id="tblReportSchedule"></div><br/>
        <input type="button" value="Add Row" align="right" onclick="javascript: showWindow(window, 1)" />
        </div>
    </center>
</body>
<script type="text/javascript">

function showWindow(obj, bEdit)
{   
    if(bEdit == 1)
        {
            openModal("updateSchedule.jsp", 600, 450);
        }
    else if(bEdit == 2)
        {   
            var rowID = obj.parentNode.parentNode.parentNode.parentNode.id; 
            openModal("updateSchedule.jsp", 600, 450, getAllRowValuesbyID(rowID));
        }
    else 
        {
            var rowID = obj.parentNode.parentNode.parentNode.parentNode.id; 
            openModal("updateSchedule.jsp", 300, 200, getAllRowValuesbyID(rowID).split("/")[0]);            
        }
}

function getAllRowValuesbyID(rowID)
{
    var rowValues="";
    row = document.getElementById(rowID);

    for (var i = 0; i < row.childNodes.length; i++) {
        if((window.navigator.userAgent.toLowerCase().indexOf('windows') == -1) )
        {
            var node = row.childNodes[i];
            rowValues += node.textContent + "/";
        }
        else
        {
            var node = row.children[i];
            rowValues += node.outerText + "/";  
        }
    }
    return rowValues;
}

function openModal(url, width, height, rowValues)
{
    var features = "";
    if (width != "")
    {
    features = features + "dialogWidth:" + width + "px;";
    }
    if (height != "")
    {
        features = features + "dialogHeight:" + height + "px;";
    }

    var retVal = window.showModalDialog(url, rowValues, features);  

    if(retVal)
    {
        document.location.reload(true);
    }
}

</script>

</html> 
```

对话框形式：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Update Schedule Form</title>

<script type="text/javascript">
    function onSubmit()
    {
        window.returnValue = "";
        if((window.opType == 3) || window.dirtyFlag)
        {   
            window.dirtyFlag = 1;
            window.returnValue = getValue('cronTab') + '/' + 
                                 getValue('reportName') + '/' +
                                 getValue('subject') + '/' +
                                 getValue('recipient') + '/' +
                                 getValue('cc') + '/' +
                                 getValue('database') + '/' +
                                 getValue('script') + '/' +
                                 getValue('format');
        }
        window.close();
    }

    function getValue(varName)
    {
        if(document.getElementById(varName) == null)
            return "";
        if(document.getElementById(varName).value == null)
            return "";
        else
            return document.getElementById(varName).value;
    }

    function setdirtybit()
    {
        window.dirtyFlag = 1;
    } 

    function SubmitForm()
    {
        if(window.navigator.userAgent.toLowerCase().indexOf('chrome') == -1)
        {
            if(window.dirtyFlag || window.opType == 3)
            {
                document.forms["UpdateSchedule"].method="get";
                document.forms["UpdateSchedule"].action="/nbreports/updates";
                document.forms["UpdateSchedule"].target="_self";
                document.forms["UpdateSchedule"].submit();
            }
        }
    }

    function GenerateSubmit(valText)
    {
        var submitButton = "";
        if(window.navigator.userAgent.toLowerCase().indexOf('chrome') > -1)
            submitButton = "<center><input type ='submit' value='" + valText + "' onclick='onSubmit()' /></center>";            
        else
            submitButton = "<center><input type ='button' value='" + valText + "' onclick='onSubmit()' /></center>";

        return submitButton;
    }   

    window.onbeforeunload = SubmitForm;
    </script>
</head>
<body>  
    <form name="UpdateSchedule" id = "UpdateSchedule" action="/nbreports/updates" method="get">
        <script type="text/javascript">
        var valuesArray = new Array();
        if(typeof window.dialogArguments == "undefined")
        {
            var idArray=["cronTab","reportName","subject","recipient","cc","database","script","format"];
            var nameArray=["CronTab","Report Name","Message Subject","Recipient List","Cc","Database","Script","Format"];

            var str = "<table cellpadding = '2' border = '0'>";

            for(var i = 0; i < 8; i++){
                str += "<tr>";
                str += "<td><label for='" + nameArray[i]+"'>" + nameArray[i] + "</label></td>"; 
                if(i==3 || i==4){
                    str += "<td><input style='width:450px' type ='text' id='" + idArray[i] + "' name='" + nameArray[i] + "' onchange='setdirtybit()' /></td>";
                }
                else{str += "<td><input style='width:200px' type ='text' id='" + idArray[i] + "' name='" + nameArray[i] + "' onchange='setdirtybit()' /></td>";}
                str += "</tr>";
            }
            str += "<tr style='display: none;'><input type='hidden' name='opType' value='1' /></tr>";
            str += "</table>";

            document.write(str);        
            document.write(GenerateSubmit("Submit"));   
        }
        else 
        {
            valuesArray=window.dialogArguments.split("/");
            if(valuesArray.length == 1)
            {
                document.write("<center><label>Are you sure you want to delete the row?</label><br/><br/></center>");
                document.write("<input type='hidden' name='id' value='"+ valuesArray[0] +"' />");
                document.write("<input type='hidden' name='opType' value='3' />");
                document.write(GenerateSubmit("Ok"));
                window.opType = 3;
            }
            else
            {       
                var idArray=["cronTab","reportName","subject","recipient","cc","database","script","format","id"];
                var nameArray=["CronTab","Report Name","Message Subject","Recipient List","Cc","Database","Script","Format", "Id"];

                var str = "<table cellpadding = \"2\" border = \"0\">";

                for(var i = 0; i < 8; i++){
                    str += "<tr>";
                    str += "<td><label for='" + nameArray[i]+"'>" + nameArray[i] + "</label></td>"; 
                    if(i==3 || i==4){
                        str += "<td><input style='width:450px' type ='text' id='" + idArray[i] + "' name='" + nameArray[i] + "' onchange='setdirtybit()' /></td>";
                    }
                    else{str += "<td><input style='width:200px' type ='text' id='" + idArray[i] + "' name='" + nameArray[i] + "' onchange='setdirtybit()' /></td>";}
                    str += "</tr>";
                }
                str += "<tr style='display: none;'><input  type ='hidden' name='id' value='"+ valuesArray[0] +"'/></tr>";
                str += "<tr style='display: none;'><input  type ='hidden' name='opType' value='2' /></tr>";
                str += "</table>";

                document.write(str);
                for(var i = 0; i < 8; i++){
                    document.forms[0].elements[nameArray[i]].value = valuesArray[i+1];
                }
                document.write(GenerateSubmit("Submit"));
            }
        }               
        </script>
    </form>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:31:12.140

我认为是因为 document.write(); 你可以用使用 innerHTML 来代替它吗？！而不是 document.write(str); Document.write(GenerateSubmit("提交")); 试试，document.getElementById("submitNode").innerHTML = str+GenerateSubmit("Submit");

请记住在表单中添加一个 id 为“submitNode”的 div 元素。像这样：

# sql-server - T-SQL / SQL Server 2000 中的 DayOfYear 函数

> ID：12535982
> 
> 赞同：20
> 
> 时间：2012-09-21T18:15:51.287
> 
> 标签：sql-server, tsql, sql-server-2000

例如，2 FEB 是一年中的第 33 天。

是否有返回年份的内置 T-SQL 函数（在 SQL Server 2000 中）？或者您是否必须自己使用强制转换来获取提供日期的一年中的第一天，然后执行 DateDiff？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-21T18:17:22.337

```
SELECT datepart(dayofyear, getdate()) 
```

# css - CSS3比例不起作用

> ID：12535987
> 
> 赞同：-1
> 
> 时间：2012-09-21T18:16:06.910
> 
> 标签：css

我对 Web 开发非常陌生，我似乎无法扩展我的文本。我试图查找如何，但我的搜索总是空的。

```
#top-nav {
    background: #94b3c8;
    text-align: cemter;
}

#top-nav dt {
    display: inline-block;
    padding-left: 20px;
    font: 20px Tahoma;
    color: white;
    padding-bottom: 2px;
}

#top-nav a:active {
    color: white;
    text-decoration: underline;
}

#top-nav a:link {
    color: white;
    text-decoration: none;
}

#top-nav a:visited {
    color:white;
    text-decoration:none;
}

#top-nav a:hover {
    display: block;
    color: white;
    text-decoration: underline;
    transform: scale(1.5, 1.5)
    -ms-transform: scale(1.5, 1.5)
    -webkit-transform: scale (1.5, 1.5)
    -moz-transform: scale(1.5, 1.5)
    -o-transform: scale(1.5, 1.5)
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T18:18:38.130

您需要在定义后添加分号`transform`，否则浏览器会将其视为错误并忽略后续规则。

```
transform: scale(1.5, 1.5); /*you didn't have the semi-colons here*/
-ms-transform: scale(1.5, 1.5);
-webkit-transform: scale (1.5, 1.5);
-moz-transform: scale(1.5, 1.5);
-o-transform: scale(1.5, 1.5); 
```

# axapta - 如何捕捉内部异常？

> ID：12535992
> 
> 赞同：10
> 
> 时间：2012-09-21T18:16:39.123
> 
> 标签：axapta, x++

是否有可能捕获内部异常：

```
try 
{
    ttsbegin;    
    info("step one");        
    try 
    {
       info("step two");
       throw Error("error");
    }
    catch 
    {
       info("catch step two");
    }        
    ttscommit;
}
catch 
{
    info("catch step one");
    ttsabort;
} 
```

我知道我可以评论 ttsbegin；/ttscommit，但我需要有一个事务。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-23T13:13:42.410

不，这是*不可能*的（除非您的例外是`UpdateConflict`或`DuplicateKeyException`）。

[该文档](http://msdn.microsoft.com/EN-US/library/aa893385.aspx)指出：

> 如果在事务中抛出异常，事务将自动中止（发生 ttsAbort 操作）。这适用于手动抛出的异常和系统抛出的异常。
> 
> 当 ttsBegin - ttsCommit 事务块内引发异常时，该事务块内的任何 catch 语句都不能处理该异常。相反，事务块之外的最里面的 catch 语句是要测试的第一个 catch 语句。

逻辑是：1）您的事务被 throw 中止 2）然后您无法从事务内部恢复 3）因此在事务外部采取最里面的 catch。

这两个例外（双关语）是`UpdateConflict`并且`DuplicateKeyException`不会产生 a `ttsabort`，因此可能会在事务中被捕获。

另请参阅[此博客条目](http://www.artofcreation.be/2011/08/10/try-catch-and-transactions/)，它证明了这一点。

## 更新：潜在的陷阱

使用全部捕获（未指定异常类型）可能会导致问题。请参阅[此博客文章](https://blogs.msdn.microsoft.com/mfp/2016/11/24/x-the-catch/)。
从 D365O 更新 5 开始，如果 tts 级别大于 1，则 catch all 不会捕获这两个异常。请参阅[此博客文章](http://kashperuk.blogspot.dk/2017/03/development-tutorial-platform.html)。

# jquery - jquery - 动画？

> ID：12535993
> 
> 赞同：1
> 
> 时间：2012-09-21T18:16:43.910
> 
> 标签：jquery, jquery-animate, effect

目前我正在开发一个网店，我想做一个动画。当用户点击“添加到购物车”按钮时，我想将产品添加到购物车（图像直接进入购物车动画）。我尝试了一个 jquery 函数，但它太慢了。

```
<script>
var cCount = 0;
var cId = -1;

function add_to_cart(){
   cId = setInterval(function(){ animateCart(); }, 1);

}

function animateCart(){
   $("#cart-image").animate({
   "left" : "+=1px",
   "top" : "-=1px"
   }, 1);

if(cCount >= 400)
   clearInterval(cId);

   cCount++;
}
</script> 
```

$("#cart-image") 是 120x120 图像，绝对位置和不透明度 0.5。

该脚本正在运行，它会直接进入购物车，但它太慢了。时间太长了，4到5秒。我想要类似跳跃效果的东西。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T18:20:29.247

你这样做是错的。animate 方法本身用于动画，不需要额外的间隔。只需将#cart-image 项目移动到所需位置，在本例中为顶部 100 像素，左侧 100 像素

```
$("#cart-image").animate({
  "left" : "100px",
  "top" : "100px"
}, 500); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:18:37.647

一次移动超过一个像素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-13T11:22:07.697

试试这个。。太棒了。。

下载最小文件

最小文件（[http://1drv.ms/1klFi78](http://1drv.ms/1klFi78)）

购物车文件（[http://1drv.ms/1klFtiZ](http://1drv.ms/1klFtiZ)）

拉胡尔编辑

```
<script type="text/javascript" src="js/jquery-1.9.1.js"></script>

<script type="text/javascript" src="js/jquery.cart.min.js"></script>

<body>

<div id="cart" style="margin-left:80%;">Cart</div>

<div><img src="your image path" class="image" width="194" height="259" /></div>

<div><input type="submit" name="cart" value="Add To Cart" id="adcrt" /></div>

</body>

<script type="text/javascript">

$(document).ready(function(e) {

$('#adcrt').click(function()
{
    $('.image').imgMove('#cart',0.8,'150','200');
})
});
</script> 
```

# asp.net - Asp.Net - 在 LocalHost 上调试期间使用 Mailto

> ID：12535995
> 
> 赞同：1
> 
> 时间：2012-09-21T18:17:04.920
> 
> 标签：asp.net, anchor, mailto

我的 Asp.Net 应用程序中有如下一行代码：

```
<a href="mailto:email_address">Click To Email</a> 
```

我的公司已经使用这行代码（其中“email_address”是个人的电子邮件）来允许用户向人们发送电子邮件，并且它正在处理我们在 Web 服务器上部署的应用程序。但是，当我在调试（Visual Studio 2010，LocalHost）时单击发送电子邮件时，出现以下错误：

![在此处输入图像描述](../Images/1299797cb1948f4c96aa7bfaae9f1a87.png)

有谁知道是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:55:36.797

{不是答案，但评论太长了}

我不知道具体是什么导致了这个问题，但似乎是浏览器在由 VS 启动时以稍微修改的权限运行，因此没有启动 Outlook 所需的权限。

您可以通过使用诸如[SysInternals](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)（现在的 Microsoft）的 ProcMon 之类的工具来追踪问题。实际上，我建议您获得[整套](http://technet.microsoft.com/en-us/sysinternals/bb842062)工具，因为其中有一些非常方便的工具。

在任何情况下，启动 procmon 并添加一个过滤器，这样您就只能看到 Outlook 的活动。会有很多条目，但在某些时候，可能就在显示错误消息之前，您应该看到一些标记的条目`FAILED`和一些权限详细信息。这至少可以让您确定 Outlook 在遇到权限问题时尝试访问的具体内容，并且还可以让您确定正在使用的凭据是否是您期望的（您的）凭据。

# python - 使用python比较文件

> ID：12535996
> 
> 赞同：-1
> 
> 时间：2012-09-21T18:17:18.893
> 
> 标签：python

我有29个文本文件如下

文件 1

```
12313 : 23546

        12313

        23214

        32465 
```

文件 2

```
13132 : 23546

        12323

        32125

        32125

        32121

        .

        .

        . 
```

我想要计算这些文件之间的交集的python脚本

理想结果如下

```
12313 : 23546

13132 : 23546 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T18:31:48.043

假设您的意思是 Set 中使用的交集。

假设这些都是文件中的数字，将它们加载到一个集合中。

*   [http://docs.python.org/library/sets.html](http://docs.python.org/library/sets.html)

路口：

```
from sets import Set
x = Set([1, 3, 4,9])
y = Set([1,3])
print x & y
Set([1, 3]) 
```

# rfid - 使用 RFID 识别通过门口的人员

> ID：12535998
> 
> 赞同：2
> 
> 时间：2012-09-21T18:17:22.170
> 
> 标签：rfid

不确定这是不是问这个问题的正确地方 - 我还没有参与我项目的编程部分。

我想做的是在 RFID 标签穿过门口时感应它。我知道有不同的频率，这与感应距离有关。SparkFun 有这个模块，频率为 13.56MHz，但看起来它只能读取约 10 厘米。不够。（https://www.sparkfun.com/products/10126）用合适的天线能做到吗？

我将使用微控制器来解释数据。

任何资源都会有所帮助，如果这不是正确的提问地点，那么关于在哪里提出的建议也会很有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:30:02.507

我一直在使用 rfid 很长时间。您需要建立一个 rfid 生态系统，您使用的是哪种天线？近场还是远场？物理变量很多：天线、标签嵌体、功率、极化、相位角等。

你说标签会通过一个门口，那么，门户可能是你的解决方案。如果您将天线放置在门户上的正确位置，您可以以更少的功率更好地阅读。例如，18dBm 的 2 根天线优于 32dBm 的单根天线。

对于读者，我建议 Impinj。对于天线，我建议使用 Mobile Mark。

避免中间人！严肃！

继续研究。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:58:20.737

您看过这里的远程 RFID 标签吗？[http://iautomate.com/categories/rfid/](http://iautomate.com/categories/rfid/)

它们是 433 MHz 有源 RFID 标签

# php - 分配给会话数组而不是查询数据库

> ID：12535999
> 
> 赞同：1
> 
> 时间：2012-09-21T18:17:24.490
> 
> 标签：php, mysql

我想知道是否有任何一般规则来说明何时应该考虑将数据分配给会话数组而不是每次加载新页面时都查询数据库，因为知道结果集中的某些数据已经在前一页上检索过一次.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:20:13.970

不确定你的问题到底是什么，但如果你知道你会在很多页面中使用数据（比如用户信息/权限等），你应该把它保存在 Session 中，否则你可以查询数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:22:31.240

这没有真正的规则。它始终取决于情况和要求。在会话中拥有当前用户信息意味着会话中的数据可能会因为数据库中的编辑而过时。通常，一旦“完成”并加载每个页面请求，几乎所有内容都会写入数据库。在处理多页表单时，部分填充的表单信息通常只要尚未完成就存储在会话中，以防止未完成的数据填满数据库。

如前所述，这完全取决于要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T02:58:07.917

我的经验法则是只在会话中存储与用户会话严格相关的东西，例如他们的唯一 ID。在会话中获取有关正在进行的操作的信息可能会导致一些奇怪的行为。考虑一个具有两步表单的应用程序。打开第一个表单会在 session 中设置一个在第二个表单上读取的值（例如对最后访问的值的引用）。如果我只打开一个选项卡，这很好，但根据用例，打开两个选项卡可能对我有利。我可能会针对值 A 打开表单一个，在另一个选项卡中针对值 B 打开表单一个，然后针对值 A 提交第一个选项卡。根据逻辑，我可能会得到错误的结果，其中值 B 的数据会覆盖值 A 中的数据.