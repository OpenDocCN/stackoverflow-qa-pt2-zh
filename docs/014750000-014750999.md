# StackOverflow 问答 14750000-14750999

# haskell - Haskell - 垃圾收集无法回收足够的空间

> ID：14750003
> 
> 赞同：6
> 
> 时间：2013-02-07T11:27:28.377
> 
> 标签：haskell, stack, stack-overflow

我正在做一个程序来总结所有奇数到n：

```
oddSum' n result | n==0 = result
                 | otherwise = oddSum' (n-1) ((mod n 2)*(n)+result)

oddSum n = oddSum' n 0 
```

我的输入有两个错误（我把它们放在下面），我正在使用尾递归，为什么会发生堆栈溢出？（注意：我在 Ubuntu 上使用 Hugs）

oddSum 20000 错误 - 控制堆栈溢出

oddSum 100000 错误 - 垃圾收集无法回收足够的空间

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T11:37:08.327

```
 oddSum 3
 oddSum 2 ((2 mod 2)*2 + 3)
 oddSum 1 ((1 mod 2)*1 + ((2 mod 2)*2 + 3)) 
```

您正在`result`变量中构建一个巨大的 thunk。一旦你计算了这个，所有的计算都必须一次完成，然后堆栈溢出，因为，例如，要执行加法，你首先必须计算操作数，以及操作数中加法的操作数。

如果，otoh，thunk 变得太大，你会得到一个堆溢出。

尝试使用

```
result `seq` ((mod n 2) * n + result) 
```

在递归中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-07T11:41:12.953

首先，不要使用 Hugs，它不受支持。通过优化 GHC 机会，这样的事情将被编译成一个紧密有效的循环（仍然你的代码不会很好）。

非严格的累加器总是会带来建立巨大 thunk 的风险。一种解决方案是使其严格：

```
{-# LANGUAGE BangPatterns   #-}

oddSum' n !acc | n==0       = acc
               | otherwise  = oddSum' (n-1) $ (n`mod`2)*n + acc 
```

当然，这不是惯用的。显式编写尾递归函数很麻烦，并且在 Haskell 中有些不受欢迎。大多数这类事情都可以用库函数很好地完成，比如

```
oddSum n = sum [1, 3 .. n] 
```

...不幸的是，它也不能在恒定空间中可靠地工作。它确实适用于折叠的严格版本（这`sum`仅仅是一个专业化），

```
import Data.List
oddSum n = foldl' (+) 0 [1, 3 .. n] 
```

# sql - sql请求中的标识符无效

> ID：14750004
> 
> 赞同：2
> 
> 时间：2013-02-07T11:27:35.143
> 
> 标签：sql, oracle

我有这个 sql 请求：

```
select T1.ID, T2.ID 
from task t1, task t2
join workcase w on W.ID = T1.WORKCASE_ID
where W.ID = 1683964476
and T1.STATE < 501
and T2.STATE = 501 
```

但是当我运行它时，我有这个错误：

```
ORA-00904: "T1"."WORKCASE_ID": invalid identifier 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T11:35:34.327

问题是您正在混合`JOIN`语法。`T1`您在and之间使用隐式连接（逗号）`T2`，然后使用显式`JOIN`语法连接到`workcase`表。

该`JOIN`语法优先于逗号，因此当您尝试在连接条件中使用它时，别名不可用。

如果您需要同时使用两者，那么您需要使用：

```
select T1.ID, T2.ID 
from
(
  select T1.ID, T2.ID, T1.WORKCASE_ID
  from task T1, task T2
  where T1.STATE < 501
    and T2.STATE = 501
) t
inner join workcase w 
  on W.ID = T1.WORKCASE_ID
where W.ID = 1683964476 
```

这将允许在子查询中进行隐式连接，然后您将使用`workcase`表的显式连接。

或者正如@APC 在评论中所说，这也可以写成`CROSS JOIN`：

```
select T1.ID, T2.ID 
from task T1
cross join task T2
inner join workcase w 
  on W.ID = T1.WORKCASE_ID
where W.ID = 1683964476
  and T1.STATE < 501
  and T2.STATE = 501 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-07T11:30:30.550

标识符无效意味着您的表没有该列名（WORKCASE_ID）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-07T11:34:12.810

区分大小写呢？

表已使用“t1”作为别名，但之后引用为“T1”......

只是一个建议... :)

# perl - Perl WWW::Mechanize 比较不同url的响应头内容长度

> ID：14750005
> 
> 赞同：1
> 
> 时间：2013-02-07T11:27:44.477
> 
> 标签：perl, hash, www-mechanize

**我有一个问题希望你能帮忙？**

我有两个包含以下内容的文本文件：

**文件1.txt**

```
http://www.dog.com/
http://www.cat.com/
http://www.antelope.com/ 
```

**文件2.txt**

```
1
2
Barry 
```

**我正确实现的输出如下：**

```
http://www.dog.com/1
http://www.dog.com/2
http://www.dog.com/Barry 
http://www.cat.com/1
http://www.cat.com/2
http://www.cat.com/Barry
http://www.antelope.com/1 
http://www.antelope.com/2
http://www.antelope.com/Barry 
```

**执行上述操作的代码**

```
 open my $animalUrls, '<', 'FILE1.txt' or die "Can't open: $!";
    open my $directory, '<', 'FILE2.txt' or die "Can't open: $!";

    my @directory = <$directory>;   #each line of the file into an array
    close $directory or die "Can't close: $!";

    while (my $line = <$animalUrls>) {
    chomp $line;
    print $line.$_ foreach (@directory);
    push (@newListOfUrls, $line.$_) foreach (@directory);  #put each new url into array
    } 
```

**现在我遇到的问题：**

我需要获取原始 url (File1.txt) 的 Content Length 并将每个新 url 的 Content-Length 与**相应**的原始 url 进行比较，以查看它们是否相同或不同，例如：

*   我需要将[http://www.dog.com/1](http://www.dog.com/1)的 Content-Length 与原始 url [http://www.dog.com/](http://www.dog.com/)的 Content-Length 进行比较，看看是否有区别。
*   然后我需要将[http://www.dog.com/2](http://www.dog.com/2)的 Content-Length 与原始 url [http://www.dog.com/](http://www.dog.com/)的 Content-Length 进行比较，看看是否有差异。
*   然后我需要将[http://www.dog.com/Barry](http://www.dog.com/Barry)的 Content-Length 与原始 url [http://www.dog.com/](http://www.dog.com/)的 Content-Length 进行比较，看看是否有差异。
*   然后我需要将[http://www.cat.com/1](http://www.cat.com/1)的 Content-Length 与原始 url [http://www.cat.com/](http://www.cat.com/)的 Content-Length 进行比较，看看是否有差异。
*   然后我需要将[http://www.cat.com/2](http://www.cat.com/2)的 Content-Length 与原始 url [http://www.cat.com/](http://www.cat.com/)的 Content-Length 进行比较，看看是否有差异。
*   等等........

**获取内容长度的代码：**

```
print $mech->response->header('Content-Length');  #returns the content length 
```

我遇到的问题是如何将每个新网址与**正确的相应原始网址进行比较？（即不会意外地将 http://www.cat.com/Barry 的 Content-Length 与[http://www.dog.com/](http://www.dog.com/)[的](http://www.cat.com/Barry)Content-Length 进行比较）**我是否应该使用哈希，我将如何处理那？

非常感谢您的帮助，非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:47:19.747

您应该为此使用哈希。我会更改您的输入代码以制作更复杂的数据结构，因为这会使任务更容易。

```
open my $animalUrls, '<', 'FILE1.txt' or die "Can't open: $!";
open my $directory, '<', 'FILE2.txt' or die "Can't open: $!";

my @directory = <$directory>;   #each line of the file into an array
close $directory or die "Can't close: $!";
my $newURLs;

while ( my $baseURL = <$animalUrls> ) {
  chomp $baseURL;

  SUBDIR: foreach my $subdir (@directory) {
    chomp $subdir;
    next SUBDIR if $subdir eq "";
    # put each new url into arrayref
    push( @{ $newURLs->{$baseURL} }, $baseURL . $subdir );
  }
} 
```

我们现在可以利用它来发挥我们的优势。假设我们已经设置了 Mechanize：

```
foreach my $url ( keys %{$newURLs} ) {
  # first get the base URL and save its content length
  $mech->get($url);
  my $content_length = $mech->response->header('Content-Length');

  # now iterate all the 'child' URLs
  foreach my $child_url ( @{ $newURLs->{$url} } ) {
    # get the content
    $mech->get($child_url);

    # compare
    if ( $mech->response->header('Content-Length') != $content_length ) {
      print "$child_url: different content length: $content_length vs "
        . $mech->response->header('Content-Length') . "!\n";
    }
  }
} 
```

您甚至可以`foreach`通过将代码放置在您构建数据结构的位置而无需第二组循环来做到这一点。

如果您不熟悉这些参考资料，请查看[perlreftut](http://perldoc.perl.org/perlreftut.html)。我们在这里所做的是为每个基本 URL 创建一个带有键的哈希，并将所有生成的子 URL 的数组放入其中。如果您使用 Data::Dumper 输出 final `$newURLs`，它将如下所示：

```
$VAR1 = {
  'http://www.dog.com/' => [
    'http://www.dog.com/1',
    'http://www.dog.com/2',
   ],
  'http://www.cat.com/' => [
    'http://www.cat.com/1',
    'http://www.cat.com/2',
   ],
}; 
```

**编辑**：我更新了代码。我用这些文件来测试它：

网址：

```
http://www.stackoverflow.com/ 
http://www.superuser.com/ 
```

目录：

```
faq
questions
/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:50:03.683

这段代码似乎可以满足您的需要。它存储所有 URL，`@urls`并在获取每个 URL 时打印内容长度。我不知道您之后需要什么长度数据，但我已将每个响应的长度存储在哈希`%lengths`中以将它们与 URL 相关联。

```
use 5.010;
use warnings;

use LWP::UserAgent;

STDOUT->autoflush;

my @urls;

open my $fh, '<', 'FILE1.txt' or die $!;
while (my $base = <$fh>) {
  chomp $base;
  push @urls, $base;
  open my $fh, '<', 'FILE2.txt' or die $!;
  while (my $path = <$fh>) {
    chomp $path;
    push @urls, $base.$path;
  }
}

my $ua = LWP::UserAgent->new;

my %lengths;

for my $url (@urls) {
  my $resp = $ua->get($url);
  my $length = $resp->header('Content-Length');
  $lengths{$url} = $length;

  printf "%s  --  %s\n", $url, $length // 'undef';
} 
```

**输出**

```
http://www.dog.com/  --  undef
http://www.dog.com/1  --  56244
http://www.dog.com/2  --  56244
http://www.dog.com/Barry  --  56249
http://www.cat.com/  --  156
http://www.cat.com/1  --  11088
http://www.cat.com/2  --  11088
http://www.cat.com/Barry  --  11088
http://www.antelope.com/  --  undef
http://www.antelope.com/1  --  undef
http://www.antelope.com/2  --  undef
http://www.antelope.com/Barry  --  undef 
```

# android - 从自定义列表视图中删除项目

> ID：14750007
> 
> 赞同：1
> 
> 时间：2013-02-07T11:28:00.237
> 
> 标签：android, listview

我正在尝试在单击按钮时删除自定义列表视图的项目，删除功能正常工作，但问题是当我单击按钮时，当我重新加载时，项目不会当场删除

```
@Override
public View getView(final int paramInt, View paramView, ViewGroup paramViewGroup) {
    // TODO Auto-generated method stub

    LayoutInflater inflator = activity.getLayoutInflater();
    if (paramView == null) {
        view = new ViewHolder();
        paramView = inflator.inflate(R.layout.listview_row, null);

        view.header = (TextView) paramView.findViewById(R.id.tvHeader);
        view.from = (TextView) paramView.findViewById(R.id.tvfrom);
        view.to = (TextView) paramView.findViewById(R.id.tvto);
        view.value = (EditText) paramView.findViewById(R.id.etValue);
        view.imgViewFlag = (ImageView) paramView.findViewById(R.id.ibclose);
        view.result = (TextView) paramView.findViewById(R.id.tvResult);

        paramView.setTag(view);

    } else {
        view = (ViewHolder) paramView.getTag();
    }

    view.header.setText(Header.get(paramInt));
    view.from.setText(From.get(paramInt));
    view.to.setText(To.get(paramInt));
    view.value.setText(Value.get(paramInt));
    view.imgViewFlag.setImageResource(close.get(paramInt));
    view.value.setFocusableInTouchMode(false);
    view.value.setFocusable(false);
    view.imgViewFlag.setFocusableInTouchMode(false);
    view.imgViewFlag.setFocusable(false);
    view.imgViewFlag.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            int i=paramInt+1;
            File f1 = new File("/data/data/com.example.converter/shared_prefs/"+i+".xml");

            if(f1.exists()){
                f1.delete();
                 Header.remove(paramInt);
                 From.remove(paramInt);
                 close.remove(paramInt);
                 To.remove(paramInt);
                 Value.remove(paramInt);
            }
            else{
                for(int l = i;i<6;){
                    File f2 = new File("/data/data/com.example.converter/shared_prefs/"+l+".xml");
                    if(f2.exists()){
                        f2.delete();
                         Header.remove(paramInt);
                         From.remove(paramInt);
                         close.remove(paramInt);
                         To.remove(paramInt);
                         Value.remove(paramInt);
                        break;
                    }
                    else{
                        l++;
                    }
                }

            }

        }
    });

    return paramView; 
```

请帮助我，我很困惑我是如何做到的，我想在单击按钮时删除该项目，而当我单击当时不删除的按钮时它不会删除........

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T11:53:20.357

我正在发布用于从列表视图中删除项目的代码，该代码在我的代码中正常工作。

你忘了打电话 notifysetchanged 就是这样。

```
 @Override
public View getView(int position, View convertView, ViewGroup parent) 
{
    View row = null;
    LayoutInflater inflater = getLayoutInflater();

    row = inflater.inflate(R.layout.one_result_details_row, parent, false);

    // inflate other items here : 
    Button deleteButton = (Button) row.findViewById(R.id.Details_Button01);
     deleteButton.setTag(position);

    deleteButton.setOnClickListener(
        new Button.OnClickListener() {
            @Override
            public void onClick(View v) {
                Integer index = (Integer) view.getTag();
                items.remove(index.intValue());  
                notifyDataSetChanged();
            }
        }
    ); 
```

请看看以下答案

1)[移除 Android 中的 ListView 项](https://stackoverflow.com/questions/2558591/remove-listview-items-in-android)

2)[从 ListView 中删除所选项目](https://stackoverflow.com/questions/5856436/android-listview-remove-selected-item)

如果您仍然面临任何问题，请告诉我...

谢谢

# orientdb - orient DB 是否支持按操作分组？

> ID：14750013
> 
> 赞同：1
> 
> 时间：2013-02-07T11:28:17.813
> 
> 标签：orientdb

我认为答案是否定的，但我仍然想确认

我的用例如下：

1）获取源和目标之间的子图。
2）然后对于步骤1中获得的子图中的每个节点，做一些聚合类似的事情

```
select nodeId, sum(mycount) where prop ="value" and prop2 ="value2" and nodeId in [x,y,z ] group by nodeId 
```

您可以在 orinet DB 中执行此操作吗？如果可以，效率如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:10:27.420

支持分组，而且速度很快。你试过了吗？

# python - 自定义 matplotlib 图

> ID：14750015
> 
> 赞同：2
> 
> 时间：2013-02-07T11:28:23.113
> 
> 标签：python, matplotlib

我正在将 matplotlib.pyplot 用于我正在开发的一个小模块（附加代码）。但是，我不知道如何自定义图形（增加图形大小，更改背景画布颜色）。我该怎么做呢。我已经尝试过`fig = plt.figure(figsize=(16,8))`，`self.fig, self.ax = plt.subplots()`这确实增加了图形大小并添加了我的按钮，但在单独的图形上显示了我的情节。我的简单错误是什么？

![在此处输入图像描述](../Images/886c73a3b47a1b8ef583731d658def39.png)

```
 # Setup the axes.
    self.fig, self.ax = plt.subplots()
    self.slider_ax    = self.fig.add_axes([0.2, 0.03, 0.65, 0.03])
    self.delete_ax    = self.fig.add_axes([0.85, 0.84, 0.1, 0.04])
    self.register_ax  = self.fig.add_axes([0.85, 0.78, 0.1, 0.04])
    self.add_ax       = self.fig.add_axes([0.85, 0.72, 0.1, 0.04])
    self.save_ax      = self.fig.add_axes([0.85, 0.66, 0.1, 0.04])
    self.reset_ax     = self.fig.add_axes([0.85, 0.16, 0.1, 0.04])
    self.quit_ax      = self.fig.add_axes([0.85, 0.1,  0.1, 0.04])

    # Make the slider
   ! self.slider = Slider(self.slider_ax, 'Frame', 0, 1, 
                        valinit=0, valfmt='%1.2f', closedmin=True,
                        closedmax=False)
    self.slider.on_changed(self.update)

    #Make the buttons
    self.del_button = Button(self.delete_ax, 'Delete')
    self.del_button.on_clicked(self.delete)
    self.reg_button = Button(self.register_ax, 'Register')
    self.reg_button.on_clicked(self.register)
    self.add_button = Button(self.add_ax, "Add")
    self.add_button.on_clicked(self.add)
    self.save_button = Button(self.save_ax, "Save")
    self.save_button.on_clicked(self.save)
    self.quit_button = Button(self.quit_ax, "Quit")
    self.quit_button.on_clicked(self.quit)
    self.reset_button = Button(self.reset_ax, "Reset")
    self.reset_button.on_clicked(self.reset)

    # Plot the first slice of the image
    self.im = self.ax.imshow(np.array(raw_dicom_stack[0]), cmap = cm.gray) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T12:28:19.863

[plt.subplots](http://matplotlib.org/api/pyplot_api.html?highlight=subplots#matplotlib.pyplot.subplots)包含`**fig_kw`所有可以发送到图形的关键字参数（参见图文档）。其中之一是`figsize`。你可以做

```
self.fig, self.ax = plt.subplots(figsize=(16,8), ...) 
```

否则，您可以在创建图形后使用图形方法

```
self.fig.set_size_inches(16,8, forward=True) 
```

如果您正确调用`self.fig = plt.figure()`after `subplots`，则会出现第二个数字。当您将所有按钮添加到 时`self.fig`，它们都将转到最后定义的位置。

最后：使用 add_axes 创建 self.ax 可能会更好，与所有其他轴更加一致，并且可以更好地控制他的位置

**编辑** （详细说明最后一句话）

`self.ax`是一个`matplotlib.axes.AxesSubplot`对象（与您从例如`plt.subplot(111), while all the buttons are added to`matplotlib.axes.Axes `objects (created with`add_axes` 获得的相同）。

如果更改图形大小或调整窗口大小，将轴和子图放在一起可能会导致图相对于按钮和滑块的相对位置出现问题。

我认为图形画布中空间的一致划分，使用`axes`或`subplots`，会更好地避免此类可能出现的问题。所以我建议要么创建绘图轴，`self.ax = fig.add_axes(...)`要么使用类似[gridspec](http://matplotlib.org/users/gridspec.html)的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T12:26:58.267

每次调用`plt.figure`都会创建一个新的图形实例。您要做的是修改现有图形。您可以使用图形实例上可用的方法来执行此操作。与这个问题直接相关的两个是[set_figwidth](http://matplotlib.org/api/figure_api.html#matplotlib.figure.Figure.set_figwidth)、[set_figheight](http://matplotlib.org/api/figure_api.html#matplotlib.figure.Figure.set_figheight)和[set_facecolor](http://matplotlib.org/api/figure_api.html#matplotlib.figure.Figure.set_facecolor)。

高温高压

# zope - 在 Zope2 产品中处理遍历

> ID：14750016
> 
> 赞同：1
> 
> 时间：2013-02-07T11:28:24.067
> 
> 标签：zope

我想创建一个简单的 Zope2 产品，它实现了一个“虚拟”文件夹，其中部分路径由我的代码处理。表单的 URI

```
/members/$id/view 
```

例如

```
/members/isaacnewton/view 
```

应该由 /members 对象中的代码处理，即类似`members.view(id='isaacnewton')`.

Zope TTW Python 脚本有`traverse_subpath`，但我不知道如何在我的产品代码中执行此操作。

我已经查看了`IPublishTraverse`界面`publishTraverse()`，但它似乎非常通用。

有没有更简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:34:35.313

仍然最简单的方法是`__before_publishing_traverse__`在对象上使用钩子`members`：

```
from zExceptions import Redirect

def __before_publishing_traverse__(self, object, request):
    stack = request.TraversalRequestNameStack
    if len(stack) > 1 and stack[-2] == 'view':
        try:
            self.request.form['member_id'] = stack.pop(-1)
            if not validate(self.request['member_id']):
                raise ValueError
        except (IndexError, ValueError):
            # missing context or not an integer id; perhaps some URL hacking going on?
            raise Redirect(self.absolute_url())  # redirects to `/members`, adjust as needed 
```

该方法在进一步遍历之前由发布者调用；所以发布者已经找到了`members`对象，并且这个方法被自己传递（`object`）和请求。根据请求，您将找到遍历堆栈；在您的示例情况下，该方法将保留`['view', 'isaacnewton']`并且此方法移动`'isaacnewton'`到密钥下的请求`'member_id'`（在可选验证之后）。

当此方法返回时，发布者将使用*剩余*的堆栈继续遍历，因此它现在将遍历到`view`，它应该是一个浏览器视图，需要`member_id`请求中的键。然后它可以完成它的工作：

```
class MemberView(BrowserView):
    def __call__(self):
        if 'member_id' in self.request.form:  # Huzzah, the traversal worked! 
```

# sql - 使用 Hsqldb 脚本插入 SQL

> ID：14750017
> 
> 赞同：1
> 
> 时间：2013-02-07T11:28:41.207
> 
> 标签：sql, hsqldb

我正在尝试使用一些默认数据初始化我的 hsqldb，但似乎在标识和时间戳列方面存在问题。

**我刚刚意识到，当我说“脚本”时，我可能并不清楚我的意思。我的意思是您传递给 hsqldb 以在启动时生成数据库的命令行参数。我可以在 DbVisualiser 或其他一些数据库管理工具中成功运行查询。**

我有一个具有以下定义的表：

```
create table TableBob (
      ID int NOT NULL identity , 
      FieldA varchar(10) NULL, 
      FieldB varchar(50) NOT NULL, 
      INITIAL_DT timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL); 
```

我可以使用脚本成功创建此表，但尝试插入记录不起作用。下面是我认为插入的有效 sql，因为 ID 和 INITIAL_DT 字段是 Identity 和 Default 列）。奇怪的是，它会在每一列中插入 null，即使它们被定义为 NOT NULL....

例如
`INSERT INTO TableBob (FieldA, FieldB) VALUES ('testFieldA', 'testFieldB');`

![在此处输入图像描述](../Images/48dc422ebe2d6c21109e8a3e3c62abf9.png)

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T23:01:21.800

请尝试使用 HSQLDB 的 DatabaseManagerSwing（您可以双击 hsqldb.jar 来启动数据库管理器）。首先执行 CREATE TABLE 语句，然后执行 INSERT 语句，最后执行 SELECT 语句。

它应该显示正确的结果。

如果要使用脚本插入数据，请使用 HSQLDB 分发 zip 包中提供的 SqlTool.jar。请参阅指南： http: [//hsqldb.org/doc/2.0/util-guide/](http://hsqldb.org/doc/2.0/util-guide/)

# java - frame setVisible(false) 和 dispose() 不能杀死进程

> ID：14750018
> 
> 赞同：1
> 
> 时间：2013-02-07T11:28:41.677
> 
> 标签：java, swing, jframe

我有以下场景（2个班级）

Frame1(next button)
Frame2(prev button, close button)
Frame1 打开(instance 1)
to go Frame1 - Frame2 ( `frame1.setVisible(false)`and `frame2.setVisible(true)`) (instance 2)
to go Frame2 - Frame1 ( `frame2.setVisible(false)`and `frame1.setVisible(true)`) (instance 3)
Frame1 - Frame2 ( `frame1.setVisible(false)`and `frame2.setVisible(true)`) （实例 4）

在上述过程中的 4 个实例（如果程序打开然后记为实例）
现在在从 Frame2 关闭期间，我正在使用`frame1.dispose()`，`frame2.dispose()`
这里只处理了 2 次实例。
但问题是：仍然没有处理 2 个实例。
但只有一个进程是活着的。这怎么可能？
在上述情况下，我应该处理所有实例以终止进程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:33:17.603

如果你不想去，你考虑这样做`CardLayout`

使用如下所示`Frame1`的参数创建一个构造函数并在本地存储 frame2 对象。`Frame2`

```
public class Frame1{
    private Frame2 frame2Obj;
    public Frame1(Frame2 frame1Obj){
        this.frame2Obj = frame2Obj;
    }
    private openFrame1(){
         frame2Obj.setVisible(true);
         this.setVisible(false);
    }
} 
```

类似地在如下所示`Frame2`的参数中创建一个构造函数并在本地存储 frame1 对象。`Frame1`

```
public class Frame2{
    private Frame1 frame1Obj;
    public Frame2(Frame1 frame1Obj){
        this.frame1Obj = frame1Obj;
    }
    private openFrame1(){
         frame1Obj.setVisible(true);
         this.setVisible(false);
    }
} 
```

现在您将只有两个实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T11:34:21.113

*   的默认[值](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html#windowevents)[`DefaultCloseOperation`是`JFrame``HIDE_ON_CLOSE`](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html#windowevents)

*   必须设置`DefautlCloseOperation`适当`JFrame`的值`(EXIT_ON_CLOSE)`

*   不要创建第二个或更多[`JFrames`](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)，[`CardLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)而是使用

*   如果有真正的原因，请改用[`JDialog`](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)另一个[`JFrame`](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)

# wpf - 如何自定义默认上下文菜单

> ID：14750019
> 
> 赞同：3
> 
> 时间：2013-02-07T11:28:42.847
> 
> 标签：wpf, wpf-controls, contextmenu

在我的 WPF 应用程序中，我想限制所有文本框的剪切、复制和粘贴。一种方法是设置`ContextMenu ="{x:Null}"`

但是通过这样做，我会丢失我不想丢失的拼写检查建议。此外，在我的应用程序中，我有 1000 个文本框，所以我想以更优化的方式进行操作。

任何建议将被认真考虑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:05:28.893

如果您只需要与拼写检查相关的菜单项，您可以参考这篇 MSDN 文章：
[如何：使用上下文菜单进行拼写检查](http://msdn.microsoft.com/en-us/library/bb613557.aspx)。

如果要将自定义 ContextMenu 应用于**多个**（但不是全部）文本框：

```
 <Window.Resources>
    <ContextMenu x:Key="MyCustomContextMenu">
      <MenuItem Header="Ignore All" Command="EditingCommands.IgnoreSpellingError" />
    </ContextMenu>
  </Window.Resources>
  <Grid>
    <TextBox Height="23" Name="textBox1" Width="120" SpellCheck.IsEnabled="True"
      ContextMenu="{StaticResource MyCustomContextMenu}" />
  </Grid> 
```

如果要将自定义 ContextMenu 应用于**所有**文本框：

```
 <Window.Resources>
    <Style TargetType="{x:Type TextBox}">
      <Setter Property="ContextMenu">
        <Setter.Value>
          <ContextMenu>
            <MenuItem
              Header="Ignore All"
              Command="EditingCommands.IgnoreSpellingError" />
          </ContextMenu>
        </Setter.Value>
      </Setter>
    </Style>
  </Window.Resources>
  <Grid>
    <TextBox Height="23" Name="textBox1" Width="120" SpellCheck.IsEnabled="True"  />
  </Grid> 
```

笔记：

1.  您可以将上下文菜单资源移动到应用程序级别而不是窗口级别。
2.  MSDN 文章提到通过 C# 代码而不是通过 XAML 获取菜单项。我可以轻松地将“Ignore All”命令移植到 XAML（上面的代码片段），但对于拼写建议，您必须进行一些研发。

# java - 检查样式 80 字符规则今天仍然有意义吗？

> ID：14750020
> 
> 赞同：1
> 
> 时间：2013-02-07T11:28:43.333
> 
> 标签：java, checkstyle

我最近开始做一些 Java，其中一个 Maven checkstyle 插件让我很生气，特别是每行 80 个字符的规则！

```
"Line is longer than 80 characters!" 
```

我已经设法通过Eclipse checkstyle插件自动修复了Maven插件生成的大部分checkstyle“编译错误”，但是尽管我已经摆弄了格式化程序很长一段时间，但许多80个字符的错误仍然需要手动修复...... .

更糟糕的是它使代码看起来很难看，破坏函数减速，类减速，赋值为 2/3 行，

有些检查样式很好，可以帮助我们清理代码，但有些规则看起来很愚蠢，完全浪费时间！

这让我想知道 80 个字符的 checkstyle 在现代计算机时代仍然有意义吗？我只是不明白为什么 java 团队仍然使用它，它造成的麻烦比帮助我们获得干净的代码和良好的风格...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:34:29.900

是和否。

我当然有必要限制行的长度，因为长行很难阅读。并且监视器空间仍然有限。我经常在笔记本电脑或两台小型 19 英寸显示器上工作。打开多个编辑器后，右边的长行开始消失。

今天 80 个字符的具体限制（或更严格的 72 个）有点随意。一个团队应该决定什么对他们有用。

可能 120 个字符更有意义，因此它适合带有一些主题标签空间的推文；-)

# android - 在android中使用蓝牙进行消息和文件传输

> ID：14750028
> 
> 赞同：4
> 
> 时间：2013-02-07T11:29:33.533
> 
> 标签：android, bluetooth, file-transfer, data-transfer

我正在开发一个应用程序，首先我们必须搜索并连接可用的配对蓝牙设备。我已经完成了直到连接。但在那之后，我放了一个屏幕，要求在文本和文件传输之间进行选择。当我选择文本时，会再打开一个屏幕，其中有编辑文本和按钮。无论用户在 edittext 中键入什么并单击应传输到连接的 BT 设备（如 BT 聊天应用程序）的按钮。我已经使用了 BT 聊天应用程序，但理解起来很复杂。我想要一个单独的功能来完成传输任务。下面是我的连接代码。

主.java

```
public class Main extends Activity implements Runnable 
{
    protected static final String TAG = "TAG";
    private static final int REQUEST_CONNECT_DEVICE = 1;
    private static final int REQUEST_ENABLE_BT = 2;
    Button mScan;
    BluetoothAdapter mBluetoothAdapter;
    private UUID applicationUUID = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");
    private ProgressDialog mBluetoothConnectProgressDialog;
    private BluetoothSocket mBluetoothSocket;
    BluetoothDevice mBluetoothDevice;

    @Override
    public void onCreate(Bundle mSavedInstanceState) 
    {
        super.onCreate(mSavedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.main);
        mScan = (Button) findViewById(R.id.Scan);
        mScan.setOnClickListener(new View.OnClickListener() 
        {
            public void onClick(View mView) 
            {
                mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
                if (mBluetoothAdapter == null) 
                {
                    Toast.makeText(Main.this, "Message1", 2000).show();
                } 
                else 
                {
                    if (!mBluetoothAdapter.isEnabled()) 
                    {
                        Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
                        startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
                    } 
                    else 
                    {
                        ListPairedDevices();
                        Intent connectIntent = new Intent(Main.this, DeviceListActivity.class);
                        startActivityForResult(connectIntent, REQUEST_CONNECT_DEVICE);
                    }
                }
            }
        });

    }

    public void onActivityResult(int mRequestCode, int mResultCode, Intent mDataIntent) 
    {
        super.onActivityResult(mRequestCode, mResultCode, mDataIntent);

        switch (mRequestCode) 
        {
            case REQUEST_CONNECT_DEVICE:
                if (mResultCode == Activity.RESULT_OK) 
                {
                    Bundle mExtra = mDataIntent.getExtras();
                    String mDeviceAddress = mExtra.getString("DeviceAddress");
                    Log.v(TAG, "Coming incoming address " + mDeviceAddress);
                    mBluetoothDevice = mBluetoothAdapter.getRemoteDevice(mDeviceAddress);
                    mBluetoothConnectProgressDialog = ProgressDialog.show(this, "Connecting...", mBluetoothDevice.getName() + " : " + mBluetoothDevice.getAddress(), true, false);
                    Thread mBlutoothConnectThread = new Thread(this);
                    mBlutoothConnectThread.start();
                    //pairToDevice(mBluetoothDevice); This method is replaced by progress dialog with thread
                }
                break;

            case REQUEST_ENABLE_BT:
                if (mResultCode == Activity.RESULT_OK) 
                {
                    ListPairedDevices();
                    Intent connectIntent = new Intent(Main.this, DeviceListActivity.class);
                    startActivityForResult(connectIntent, REQUEST_CONNECT_DEVICE);
                } 
                else 
                {
                    Toast.makeText(Main.this, "Message", 2000).show();
                }
                break;
        }
    }

    private void ListPairedDevices() 
    {
        Set<BluetoothDevice> mPairedDevices = mBluetoothAdapter.getBondedDevices();
        if (mPairedDevices.size() > 0) 
        {
            for (BluetoothDevice mDevice : mPairedDevices) 
            {
                Log.v(TAG, "PairedDevices: " + mDevice.getName() + " " + mDevice.getAddress());
            }
        }
    }

    public void run() 
    {
        try 
        {
            mBluetoothSocket = mBluetoothDevice.createRfcommSocketToServiceRecord(applicationUUID);
            mBluetoothAdapter.cancelDiscovery();
            mBluetoothSocket.connect();
            mHandler.sendEmptyMessage(0);
        }
        catch (IOException eConnectException) 
        {
            Log.d(TAG, "CouldNotConnectToSocket", eConnectException);
             closeSocket(mBluetoothSocket);
             return;
        }
    }

    private void closeSocket(BluetoothSocket nOpenSocket) 
    {
        try 
        {
            nOpenSocket.close();
            Log.d(TAG, "SocketClosed");
        } 
        catch (IOException ex) 
        {
            Log.d(TAG, "CouldNotCloseSocket");
        }
    }

    private Handler mHandler = new Handler() 
    {
        @Override
        public void handleMessage(Message msg) 
        {
            mBluetoothConnectProgressDialog.dismiss();
            Toast.makeText(Main.this, "Device Connected", 5000).show();

            Intent in = new Intent(getBaseContext(), Option.class);
            startActivity(in);

        }
    };
} 
```

DeviceListActivity.java

```
public class DeviceListActivity extends Activity 
{
    protected static final String TAG = "TAG";
    private BluetoothAdapter mBluetoothAdapter;
    private ArrayAdapter<String> mPairedDevicesArrayAdapter;

    @Override
    protected void onCreate(Bundle mSavedInstanceState) 
    {
        super.onCreate(mSavedInstanceState);
        requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
        setContentView(R.layout.device_list);

        setResult(Activity.RESULT_CANCELED);
        mPairedDevicesArrayAdapter = new ArrayAdapter<String>(this, R.layout.device_name);

        ListView mPairedListView = (ListView) findViewById(R.id.paired_devices);
        mPairedListView.setAdapter(mPairedDevicesArrayAdapter);
        mPairedListView.setOnItemClickListener(mDeviceClickListener);

        mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
        Set<BluetoothDevice> mPairedDevices = mBluetoothAdapter.getBondedDevices();

        if (mPairedDevices.size() > 0) 
        {
            findViewById(R.id.title_paired_devices).setVisibility(View.VISIBLE);
            for (BluetoothDevice mDevice : mPairedDevices) 
            {
                mPairedDevicesArrayAdapter.add(mDevice.getName() + "\n" + mDevice.getAddress());
            }
        } 
        else 
        {
            String mNoDevices = getResources().getText(R.string.none_paired).toString();
            mPairedDevicesArrayAdapter.add(mNoDevices);
        }
    }

    @Override
    protected void onDestroy() 
    {
        super.onDestroy();
        if (mBluetoothAdapter != null) 
        {
            mBluetoothAdapter.cancelDiscovery();
        }
    }

    private OnItemClickListener mDeviceClickListener = new OnItemClickListener() 
    {
        public void onItemClick(AdapterView<?> mAdapterView, View mView, int mPosition, long mLong) 
        {
            mBluetoothAdapter.cancelDiscovery();
            String mDeviceInfo = ((TextView) mView).getText().toString();
            String mDeviceAddress = mDeviceInfo.substring(mDeviceInfo.length() - 17);
            Log.v(TAG, "Device_Address " + mDeviceAddress);

            Bundle mBundle = new Bundle();
            mBundle.putString("DeviceAddress", mDeviceAddress);
            Intent mBackIntent = new Intent();
            mBackIntent.putExtras(mBundle);
            setResult(Activity.RESULT_OK, mBackIntent);
            finish();
        }
    };

} 
```

选项.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/file" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/txt" />

</LinearLayout> 
```

消息.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10" 
        android:hint="@string/hint">

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/send" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T12:00:35.000

调用以下方法：

```
private void sendDataToPairedDevice(String message ,BluetoothDevice device){       
       byte[] toSend = message.getBytes();
        try {
            BluetoothSocket socket = device.createInsecureRfcommSocketToServiceRecord(applicationUUID);
            OutputStream mmOutStream = socket.getOutputStream();
            mmOutStream.write(toSend);
            // Your Data is sent to  BT connected paired device ENJOY.
        } catch (IOException e) {
            Log.e(TAG, "Exception during write", e);
        }
    } 
```

现在将以下内容放入您`Oncreate`的`Activity with EditText.`

```
EditText editText1 = (EditText) findViewById(R.id.editText1); 
```

并调用上述方法

```
sendDataToPairedDevice(editText1.getText() ,mBluetoothDevice); 
```

在`Onclick`你想要的`button`。

就是这样。 `just upvote if you use it, thanks, enjoy buddy.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T11:58:19.533

```
public void onClick(View v) {
                    // TODO Auto-generated method stub

                            mBluetoothAdapter1 = BluetoothAdapter.getDefaultAdapter();

                            byte[] toSend=message1.getBytes();

                            try
                            {

                                final UUID applicationUUID = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");
                                BluetoothDevice device=mBluetoothAdapter1.getRemoteDevice(MacAddress);
                                BluetoothSocket socket=device.createInsecureRfcommSocketToServiceRecord(applicationUUID);
                                OutputStream mmout=socket.getOutputStream();
                                mmout.write(toSend);
                                mmout.flush();
                                mmout.close();
                                socket.close();

                            }
                            catch (IOException e) 
                            {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }

                }
            }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T13:29:06.463

终于得到答案了...

```
 BluetoothAdapter mBluetoothAdapter = null;
    BluetoothDevice m1BluetoothDevice;
    public static BluetoothSocket socket;//Get this value from Main Activity
    Button btn;
    EditText et;

    public static String MacAddressesss; 

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.message);

        btn=(Button)findViewById(R.id.btn);
        et=(EditText)findViewById(R.id.et);

        btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                try
                {
                    String msg=et.getText().toString();
                    byte tosend= msg.getBytes();
                    OutputStream out= socket.getOutputStream();
                    out.write(tosend);

                }

                catch(IOException e)
                {
                    e.printStackTrace();
                }

            }
        });

    }

} 
```

# javascript - jQuery - 使用 target=_blank 捕获和覆盖链接

> ID：14750030
> 
> 赞同：3
> 
> 时间：2013-02-07T11:29:37.187
> 
> 标签：javascript, jquery, html

我们有旧页面，其中包含`target="_blank"`. 单击这些我想忽略它并运行一些用于打开窗口的 JavaScript。

jQuery 可以做到这一点，如果可以，我应该研究哪些方法/术语？

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T11:34:26.040

只需使用事件委托来防止与 target="_blank" 的链接工作，例如：

```
$(document).on('click', 'a[target="_blank"]', function(event) {
    event.preventDefault();
    alert('Prevented');
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T11:33:08.563

```
$('a[target=_blank]').click(function(e){
    e.preventDefault();
    //do what you want here
}); 
```

演示：http: [//jsfiddle.net/kkhNr/1/](http://jsfiddle.net/kkhNr/1/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T11:32:42.550

试试这个

```
 $('a[target=_blank]').click(function(event) {
        event.preventDefault();            
        // Now make a call to your own function
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-27T15:05:48.230

我只是想指出@Roger C 的监听器是一个更好的解决方案……如果您的页面上有任何动态加载的内容（即AJAX 或AngularJS 单页应用程序）。

此侦听器侦听文档的点击，并将拾取新添加的内容，而无需在内容更改后重新添加侦听器：

```
$(document).on('click', 'a[target="_blank"]', function(event) {
    event.preventDefault();
    alert('Prevented');
}); 
```

此侦听器侦听在调用它时找到的所有选择器（可能缺少任何新添加的内容）：

```
$('a[target=_blank]').click(function(e){
    e.preventDefault();
    alert('Prevented');
}); 
```

# mongodb - mongodb后台任务

> ID：14750035
> 
> 赞同：7
> 
> 时间：2013-02-07T11:29:50.883
> 
> 标签：mongodb, background

如果可能的话，我想对“背景”中的非索引列运行查找和删除查询，而不会干扰其他任务或耗尽内存而损害其他人。

对于索引，有一个背景标志。可以为查找/删除任务附加相同的内容吗？

感谢您的提示

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T16:57:09.340

这不是您可以使用“背景：真实”的东西。处理此问题的最佳方法可能是编写一个在后台执行此操作的脚本。该脚本应该以小批量运行您的操作，中间有一些延迟。在伪代码中，你会这样做：

*   找到需要更新的 10 个文档
*   更新这 10 个文档
*   睡觉
*   转到第一步。

您将不得不试验睡眠的哪个值有效。您确实需要意识到您正在更新的所有文档都需要被拉入内存，因此它至少会产生一些影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T16:07:03.943

不，此操作没有 background:true 标志。当页面错误发生并允许其他操作执行时，删除将产生。如果您需要对此进行限制，那么您可以分批删除或使用查找/删除模式，这将降低对其他操作的影响。

# c# - 加载表单设置时，互斥锁的行为不符合预期

> ID：14750036
> 
> 赞同：0
> 
> 时间：2013-02-07T11:29:50.753
> 
> 标签：c#, application-settings, multiple-instances

根据David Veeneman[关于 Windows 窗体用户设置的代码项目文章](http://www.codeproject.com/Articles/15013/Windows-Forms-User-Settings-in-C)，我一直在尝试保存应用程序的开始位置和开始大小。

它在单个实例中完美运行，但是当我将其扩展到多个实例时，我遇到了问题。

我已经包装了处理加载设置并将设置保存在互斥锁中的部分，以保护对设置文件的写入和写入。

我希望窗户从最后一个已知位置开始堆叠。这在大多数情况下似乎工作正常，但如果我快速连续打开四五个窗口，前三个将完美打开，然后会有一个间隙，然后其中一些开始在同一位置打开。

呈现表单/应用程序：

```
 private Mutex saveSetting;
 private const int START_LOCATION_OFFSET = 20;

 private void MainForm_Load(object sender, EventArgs e)
    {
        // Get the mutex before the reading of the location
        // so that you can't have a situation where a window drawn
        // in the incorrect position.

        this.saveSetting = new Mutex(false, "SaveSetting");
        this.saveSetting.WaitOne();

        this.LoadWindowStartSizeAndLocation();
        .
        .
        .
        .
        .

        this.saveSetting.ReleaseMutex();
    } 
```

加载设置：

```
private void LoadWindowStartSizeAndLocation()
        {
            // Set window location
            if (Settings.Default.WindowLocation != null)
            {
                System.Drawing.Point startLocation = 
                  new System.Drawing.Point
                     (Settings.Default.WindowLocation.X + START_LOCATION_OFFSET,
                      Settings.Default.WindowLocation.Y + START_LOCATION_OFFSET);

                this.Location = startLocation;
                Settings.Default.WindowLocation = startLocation;

                Settings.Default.Save();
            }

            // Set window size
            if (Settings.Default.WindowSize != null)
            {
                this.Size = Settings.Default.WindowSize;
            }
        } 
```

保存设置：

```
 private void MainForm_FormClosing(object sender, FormClosingEventArgs e)
    {
        try
        {
            this.SaveWindowSizeAndLocationForNextStart();                
        }
        catch (Exception ex)
        {
            System.Diagnostics.Debug.Assert(false, ex.Message);
        }
    }

    /// <summary>
    /// Save the Window Size And Location For the next Application Start up.
    /// </summary>
    private void SaveWindowSizeAndLocationForNextStart()
    {
        if (this.WindowState != FormWindowState.Minimized)
        {
            // Copy window location to app settings
            Settings.Default.WindowLocation = this.Location;
            Settings.Default.WindowSize = this.Size;
        }
        try
        {
            this.saveSetting = new Mutex(false, "SaveSetting");
            this.saveSetting.WaitOne();

           Settings.Default.Save();
        }
        catch
        {
            // Do nothing. It won't permanently disable the system if we
            // can't save the settings.
        }
        finally
        {
            this.saveSetting.ReleaseMutex();
        }
    } 
```

谁能告诉我我在做什么？或者如何根据上面的代码将两个实例渲染到同一个起始位置？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:57:33.030

问题是在获取互斥体之前加载了设置。`Settings.Default.Reload()`获取互斥量后调用。

# codeigniter - CodeIgniter 通过 session_time_to_update 保持会话活跃

> ID：14750037
> 
> 赞同：0
> 
> 时间：2013-02-07T11:29:51.893
> 
> 标签：codeigniter, session

我想为人们的购物车长时间保持会话，并且想知道通过将配置文件中的 session_time_to_update 变量设置为所需的时间（即 6 个月）是否是一个好主意。

我现在把它改成7200秒，可以看到5分钟后我仍然登录（默认是300秒）。

# javascript - kineticjs 在与另一个形状重叠时停止拖动到一个形状

> ID：14750048
> 
> 赞同：0
> 
> 时间：2013-02-07T11:30:28.560
> 
> 标签：javascript, html, kineticjs

我有两个形状而不是可拖动的组。

拖动蓝色组时，它不应与黄色组重叠。

这是小提琴[http://jsfiddle.net/bittu4u4ever/3Kprr/](http://jsfiddle.net/bittu4u4ever/3Kprr/)

我试着做一些`getIntersections`，但我真的是 kinetic.js 的菜鸟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:27:26.310

你可能认为 getIntersections() 会得到碰撞对象，我也这么认为，但事实并非如此。它只给出容器的相交 CHILDREN（不是所有）对象。

您可以在矩形和/或组上运行碰撞检测逻辑。以下链接是如何检测矩形碰撞。您可以在拖动矩形时将其应用到您的代码中。

[快速矩形到矩形相交](https://stackoverflow.com/questions/2752349/fast-rectangle-to-rectangle-intersection)

这是我如何使用 KineticJS 检测两个矩形上的碰撞的功能。

```
var isRectCollide = function(rect1, rect2) {
    if (rect1.x - rect1.width  >= rect2.x + rect2.width  &&
        rect1.y - rect1.height >= rect2.y + rect2.height &&
        rect1.x + rect1.width  <= rect2.x + rect2.width  &&
        rect1.x + rect1.height <= rect2.y - rect2.height )
        return false;
    else
        return true;
} 
```

您可能已经知道这一点，但以防万一；

1.  组没有宽度/高度，组中的形状有。
2.  组中的形状确实有 x/y 但相对于组。

希望能帮助到你

# php - PHP/HTTP 非非无状态

> ID：14750052
> 
> 赞同：0
> 
> 时间：2013-02-07T11:30:39.887
> 
> 标签：php, database, http, data-storage

**PHP**使用**cookie、会话或数据库（和 ORM）**来记住数据（因此在单个 HTTP 请求后它们不会丢失）。但是，在 Java 中（我的意思是 servlet 等）还有另一种解决方案：简而言之，您可以为一个对象选择不同的范围（它存在多长时间）。除了会话范围或简单的单个 HTTP 请求“生命”（范围）之外，它可以在整个 HTTP 服务器运行时“存活”，并且可以在 HTTP 服务器启动时进行初始化。

因此可以在不同的用户/会话之间共享数据，并且不需要数据库请求（导致整个 Web 应用程序的效率降低）。（我的意思是当 HTTP-Server 已经运行时不需要它们 - 对象及其状态是“记住的”）。

（而且我尽我所能减少 SQL 请求，甚至使用 PHP 数组进行频繁读取，但实际上从未修改过数据库数据）。

我在 PHP 中需要的是一种方法：

1.  **记住（存储在某处）**可以在许多用户之间更改和共享的数据，但不能存储到数据库中
2.  在不使用会话（或 cookie）的情况下，我希望**为许多请求提供多个数据信息**（等等。AJAX 不是单一的，而是对同一个 URL 的许多请求），当然这些请求必须存储在其他地方一段时间。例如，我想用一个 SQL 请求读取所有数据（行），在 PHP 中将它们记住一小段时间，然后，一行一行地发送响应，例如，将每一行单独响应到适当的 AJAX功能

任何人都可以给我一些提示，我怎样才能在 PHP 中实现这一点，最好是最简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:42:59.707

作为这个答案的序言（我相信你已经掌握了），PHP 的执行模型本质上是“重新启动”请求之间的过程，因此仅在 PHP 中存储任何交叉请求是无法实现的。

这给您留下了一些选择，它们都是数据库的真正“优势”：

1.  使用简单的键值对内存持久层，如 memcached 或 Redis
2.  使用具有更多结构的 noSQL 解决方案（如果需要这种一致性），但它仍然在内存中工作，并且比 RDB 更快
3.  使用 RDBMS，因为它会很好地工作，并且如果在中等硬件上推翻精心设计的模式所需的流量可能比您想象的要高得多

高温高压

# mercurial - 如何在 bitbucket 上使用 TortoiseHG“克隆”进行部分克隆？

> ID：14750055
> 
> 赞同：1
> 
> 时间：2013-02-07T11:30:41.033
> 
> 标签：mercurial, tortoisehg

我想将存储库的一部分克隆到非提示变更集，所以我使用 TortoiseHG -> Clone 命令，输入提交 URL 并克隆。出于某种原因，我得到了最后一个变更集的克隆，而不是我想要克隆的。

如何克隆到旧的变更集？

我读过我可以用 git 命令来做到这一点。我可以用 TortoiseHG 做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:52:13.820

1.  您克隆的不是“提交”，而是“存储库”
2.  如果你想有部分克隆，你必须阅读`hg help clone`
3.  过程和语法对所有和任何存储库都是通用的，与 BitBucket 无关

> 要仅提取变更集的子集，请使用 -r/--rev 指定一个或多个修订标识符，或使用 -b/--branch 指定分支。生成的克隆将仅包含指定的变更集及其祖先。

`hg clone -r <ID> SRC`

`hg help urls`建议第二种形式的命令

`hg clone SRC#ID`

**GUI方式**

如果 TortoiseHG“克隆”对话框中的纯 GUI，展开“选项”启用“克隆到修订版”并定义此修订版 ID

![克隆](../Images/623665a9fbe7813bbcef8b1b00c383ef.png)

# codeigniter-2 - Grocery CRUD 和 Codeigniter 中的日期操作

> ID：14750056
> 
> 赞同：1
> 
> 时间：2013-02-07T11:30:41.927
> 
> 标签：codeigniter-2

在员工表中，我有以下列：start_date(dd/mm/yyyy)、end_date(dd/mm/yyyy) 和 period(dd/mm/yyyy)。我想将计算放在列期间 = end_date - start_date。我现在不再需要从列 start_date 和 end_date 中获取数据并为列期间进行写入操作。请帮我解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T01:44:31.707

这是一个 SQL 问题 IMO。但是您将其标记为 codeigniter，所以我想您需要 CI 代码才能使用它。

无论如何，您可以在查询中使用 DATEDIFF。像这样。

```
$sql = "SELECT DATEDIFF(start_date,end_date) AS DiffDate"; 
```

然后使用 query() 在 CI 上启动它。

```
$qry = $this->db->query($sql);
return $qry->result(); 
```

# java - Android - 如何将其放入 for 循环

> ID：14750063
> 
> 赞同：0
> 
> 时间：2013-02-07T11:31:00.160
> 
> 标签：java, android, loops, for-loop

我正在制作一个应用程序，其中有 18 个按钮（bAnswer1 到 bAnswer18）和 6 个文本视图（tvAnswer1 到 6）。我的意思是将 6 个单词分成 2 个单词的 3 个单词（例如 button，bu - tt - on），我用 6 个单词做到了这一点，每个单词都将它们放在一个片段中（slice1 到 18），所以这段代码会在 case R 中重复。 id.bAnswer18：你们会注意到这将是休！我知道我可以通过添加一个 for 循环让它变得非常简单，但它不会工作而且我不能出去？！

有人可以帮我解决这个问题吗？

我的代码：

```
public void onClick(View arg0) {
    // TODO Auto-generated method stub

    switch (arg0.getId()) {
    case R.id.bAnswer1:

        if (testing1 != 6) {
            String old = tvAnswer1.getText().toString();
            tvAnswer1.setText(old + slice1);
            bAnswer1.setVisibility(View.GONE);
            break;

        }
        if (testing2 != 6) {
            String old = tvAnswer2.getText().toString();
            tvAnswer2.setText(old + slice1);
            bAnswer1.setVisibility(View.GONE);
            break;
        }
        if (testing3 != 6) {
            String old = tvAnswer3.getText().toString();
            tvAnswer3.setText(old + slice1);
            bAnswer1.setVisibility(View.GONE);
            break;
        }
        if (testing4 != 6) {
            String old = tvAnswer4.getText().toString();
            tvAnswer4.setText(old + slice1);
            bAnswer1.setVisibility(View.GONE);
            break;
        }
        if (testing5 != 6) {
            String old = tvAnswer5.getText().toString();
            tvAnswer5.setText(old + slice1);
            bAnswer1.setVisibility(View.GONE);
            break;
        }
        if (testing6 != 6) {
            String old = tvAnswer6.getText().toString();
            tvAnswer6.setText(old + slice1);
            bAnswer1.setVisibility(View.GONE);
            break;
        }

        break;
    case R.id.bAnswer2:
        if (testing1 != 6) {
            String old = tvAnswer1.getText().toString();
            tvAnswer1.setText(old + slice2);
            bAnswer2.setVisibility(View.GONE);
            break;

        }
        if (testing2 != 6) {
            String old = tvAnswer2.getText().toString();
            tvAnswer2.setText(old + slice2);
            bAnswer2.setVisibility(View.GONE);
            break;
        }
        if (testing3 != 6) {
            String old = tvAnswer3.getText().toString();
            tvAnswer3.setText(old + slice2);
            bAnswer2.setVisibility(View.GONE);
            break;
        }
        if (testing4 != 6) {
            String old = tvAnswer4.getText().toString();
            tvAnswer4.setText(old + slice2);
            bAnswer2.setVisibility(View.GONE);
            break;
        }
        if (testing5 != 6) {
            String old = tvAnswer5.getText().toString();
            tvAnswer5.setText(old + slice2);
            bAnswer2.setVisibility(View.GONE);
            break;
        }
        if (testing6 != 6) {
            String old = tvAnswer6.getText().toString();
            tvAnswer6.setText(old + slice2);
            bAnswer2.setVisibility(View.GONE);
            break;
        }
        break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:39:36.560

您正在寻找的真正答案并不是真正的 for 循环。

如果你这样做，for循环会有所帮助

```
 OnClickListener myOnClick = new OnClickListener() {
 //privately paste what you had
 public void onClick(View v) {
 if (testing1 != 6) {
        String old = tvAnswer1.getText().toString();
        tvAnswer1.setText(old + slice1);
        v.setVisibility(View.GONE);
        break;

    }
    if (testing2 != 6) {
        String old = tvAnswer2.getText().toString();
        tvAnswer2.setText(old + slice1);
        v.setVisibility(View.GONE);
        break;
    }
    if (testing3 != 6) {
        String old = tvAnswer3.getText().toString();
        tvAnswer3.setText(old + slice1);
        v.setVisibility(View.GONE);
        break;
    }
    if (testing4 != 6) {
        String old = tvAnswer4.getText().toString();
        tvAnswer4.setText(old + slice1);
        v.setVisibility(View.GONE);
        break;
    }
    if (testing5 != 6) {
        String old = tvAnswer5.getText().toString();
        tvAnswer5.setText(old + slice1);
        v.setVisibility(View.GONE);
        break;
    }
    if (testing6 != 6) {
        String old = tvAnswer6.getText().toString();
        tvAnswer6.setText(old + slice1);
        v.setVisibility(View.GONE);
        break;
    }});

 Button[] answerButtons = new Button[18];

 for(Button answer : answerButtons)
     answer.setOnClickListener(myOnClick); 
```

请记住，不要在您的 Activity 中实现 OnClickListener，让视图自己处理它，除非您真的需要自己处理/调度 onClicks。

# c++ - OpenGL 模型加载器问题

> ID：14750068
> 
> 赞同：1
> 
> 时间：2013-02-07T11:31:03.763
> 
> 标签：c++, opengl

终于让我的模型加载器工作了（基于上一个问题）。很好地存储所有值，很好地运行 glDrawElemts - 但它不运行 glDrawArrays。

是的，您首先要说的是'glDrawArrays 显然没有正确写出'。这就是问题所在——我有 99% 的把握。

代码如下：

```
bool modelLoader(string fileName,vector<GLfloat>& vertices, vector<GLushort>& indices)
{
fstream objFile;
vector<GLfloat> localVertices;
string dataLine;
stringstream mystream;
GLfloat x, y, z;
GLushort ind1, ind2, ind3;
char c, d; 
vertices.clear();
indices.clear();

for (int i = 0; i < 3; i++)
{
    vertices.push_back(0);
}

for (int i = 0; i < 3; i++)
{
    localVertices.push_back(0);
}

objFile.open(fileName);
if (!objFile.good())
{
    printf("Error with loader");
    return false; 
}

while (!objFile.eof())
{
    getline(objFile, dataLine);
    if (dataLine == "") 
    {                                                                  
        mystream.clear();                                              
        continue;                                                      
    }                                                                  
    mystream.clear();                                                  
    mystream.str(dataLine);                                            
    c = dataLine[0];                                                   
    d = dataLine[1];
    mystream.ignore(2);
    switch (c)
    {
    case 'v':
        {
            switch (d)
            {
            case 'n':
                { /* for normals */ break;}
            case ' ':
                mystream >> x >> y >> z;
                localVertices.push_back(x);
                localVertices.push_back(y);
                localVertices.push_back(z);
                printf("\nVertices: %f, %f, %f", x, y, z);
                break;
            default:
                {break;}
            }                                                                                                    
            break;                                                                                               
        }                                                                                                        
    case 'f':                                                                                                    
        {                                                                                                        
            //printf("F entered");                                                                               
            mystream >> ind1 >> ind2 >> ind3;                                                                    
            vertices.push_back(localVertices[ind1* 3 + 0]);                                                      
            vertices.push_back(localVertices[ind1* 3 + 1]);                                                      
            vertices.push_back(localVertices[ind1* 3 + 2]);                                                      
            vertices.push_back(localVertices[ind2* 3 + 0]);                                                      
            vertices.push_back(localVertices[ind2* 3 + 1]);                                                      
            vertices.push_back(localVertices[ind2* 3 + 2]);                                                      
            vertices.push_back(localVertices[ind3* 3 + 0]);                                                      
            vertices.push_back(localVertices[ind3* 3 + 1]);                                                     
            vertices.push_back(localVertices[ind3* 3 + 2]);
            indices.push_back(ind1);
            indices.push_back(ind2);
            indices.push_back(ind3);
            printf("\nIndices: %d, %d, %d", ind1, ind2, ind3);
            break;
        }
    case !'v' || !'f':
        {
            break;
        }
    default:
        {break;}
    }
    mystream.clear();
}
objFile.close(); 
return true;
 } 
```

从这里我继续在主函数中调用以下内容：

```
vector<GLfloat> vertices;

vector<GLushort> indices;

if (!modelLoader("triangles.obj", vertices, indices))
{
    cout << "FAILED TO RUN: MODEL LOADER";

    return 1;
} 
```

插入一堆关于设置模型视图矩阵的其他问题，运行一个循环来更新每次迭代......

```
int size = vertices.size()-3;

glDrawArrays(GL_TRIANGLES, 3, (GLsizei)size); 
```

哦，还有 triangles.obj 文件：

```
v -10.0 10.0 10.0
v -10.0 -10.0 10.0
v 10.0 -10.0 10.0
v 10.0 10.0 10.0
v 20.0 10.0 10.0
v 20.0 -10.0 10.0
f 1 2 3
f 4 5 6 
```

一点儿快乐都没有。正如我所说，使用 DrawElements 可以很好地做到这一点，但是当我尝试绘制任何其他 .obj 文件时会导致异常错误。

关于我哪里出错的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:04:24.963

你不打算画第一个三角形吗？绘制所有三角形的正确调用应该是在此之前，您还需要启用调用并通过和`glDrawArrays(GL_TRIANGLES, 0, (GLsizei)vertices.size());`设置数组。如果需要，其他属性（如颜色和法线）也是如此。顺便说一句，自 OpenGL 3.0 起，所有这些都已弃用，因此如果您刚刚开始，您可能想要学习核心 3.0 API。`glEnableClientState(GL_VERTEX_ARRAY)``glVertexPointer()`

# asp.net-mvc-3 - MVC - 将数据添加到链接器表中

> ID：14750069
> 
> 赞同：0
> 
> 时间：2013-02-07T11:31:05.093
> 
> 标签：asp.net-mvc-3

我有一个注册表格，允许学校注册。除了明显的登录名和一般详细信息外，学校还可以从他们拥有的设施和认证列表中进行选择。

我的数据显示可爱并正确绑定。

**问题**将数据输入链接器表不起作用，它会以我尝试过的两种不同方式引发错误：

**方法1：**

```
MembershipUser membershipUser = null;

if (schoolRegisterModel != null)
{
    if (null != DB)
    {
        school SchoolUser = new school();

        SchoolUser.username = schoolRegisterModel.UserName;
        SchoolUser.email = schoolRegisterModel.Email;

        string sPassowrdSalt = Security.Instance().CreateSalt();

        SchoolUser.password = Security.Instance().CreatePasswordHash(schoolRegisterModel.Password, sPassowrdSalt);

        SchoolUser.password_salt = sPassowrdSalt;

        ..More data etc..

        foreach (var item in schoolRegisterModel.Facilities)
        {
            if (item.@checked)
            {
                school_facility sf = new school_facility();
                sf.facility_id = item.facility_id;
                SchoolUser.school_facility.Add(sf);
            }
        }

        foreach (var item in schoolRegisterModel.Accreditations)
        {
            if (item.@checked)
            {
                school_accreditation sa = new school_accreditation();
                sa.accreditation_id = item.accreditation_id;
                SchoolUser.school_accreditation.Add(sa);
            }
        }

        DB.schools.Add(SchoolUser);
        DB.SaveChanges(); 
```

**错误：** {"INSERT 语句与 FOREIGN KEY 约束 \"FK_school_facility_facility\" 冲突。冲突发生在数据库 \"MYDB\"、表 \"dbo.facility\"、列 'facility_id' 中。\r\n该语句有已终止。"}

另外 - 我是否需要手动检索将基于此插入生成的即将成为学校的 ID。此方法避免仅使用主表（学校）将数据直接输入到链接器表中。

**方法2：**

除了尝试直接更新主表（学校）认证和设施集合之外，再次使用相同的代码，我使用上一个查询生成的最新主键分别手动更新链接器表，代码如下：

MembershipUsermembershipUser = null;

```
if (schoolRegisterModel != null)
{
    if (null != DB)
    {
        school SchoolUser = new school();

        SchoolUser.username = schoolRegisterModel.UserName;
        SchoolUser.email = schoolRegisterModel.Email;

        string sPassowrdSalt = Security.Instance().CreateSalt();

        SchoolUser.password = Security.Instance().CreatePasswordHash(schoolRegisterModel.Password, sPassowrdSalt);

        SchoolUser.password_salt = sPassowrdSalt;

        ..More data etc..

        // Linker data for facilities and accreditations.
        // Facilities
        foreach (var item in schoolRegisterModel.Facilities)
        {
            if (item.@checked)
            {
                school_facility sf = new school_facility();
                sf.facility_id = item.facility_id;
                sf.school_id = SchoolUser.school_id;
                DB.school_facility.Add(sf);
            }
        }

        // Accreditations
        foreach (var item in schoolRegisterModel.Accreditations)
        {
            if (item.@checked)
            {
                school_accreditation sa = new school_accreditation();
                sa.accreditation_id = item.accreditation_id;
                sa.school_id = SchoolUser.school_id;
                DB.school_accreditation.Add(sa);
            }
        }

        m_DB.SaveChanges(); 
```

**错误：** {"INSERT 语句与 FOREIGN KEY 约束 \"FK_school_facility_facility\" 冲突。冲突发生在数据库 \"MYDB\"、表 \"dbo.facility\"、列 'facility_id' 中。\r\n该语句有已终止。"}

如果你们知道我哪里出错了，请告诉我。似乎有更新链接器表日期的示例（无论如何我都会需要它）但找不到我的问题的示例......

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:58:27.847

看起来我找到了答案：

[MVC：INSERT 语句与 FOREIGN KEY 约束冲突](https://stackoverflow.com/questions/5283376/mvc-the-insert-statement-conflicted-with-the-foreign-key-constraint)

我的数据基本上不包含正确的外键值（0 - 不存在），而且我的数据库正确地抛出了错误。很抱歉浪费时间阅读并感谢您的时间。我希望这可以帮助别人。

乔

# c# - WPF - 如何访问在单独的 XAML 中定义的不同选项卡中的元素？

> ID：14750071
> 
> 赞同：0
> 
> 时间：2013-02-07T11:31:17.180
> 
> 标签：c#, wpf, user-controls, tabs

好吧，情况是这样的：我有一个 WPF 项目，其中包含一个带有 2 个 TabItem 的 TabControl。一个选项卡仅包含一个 TextBlock，另一个选项卡包含一个 TextBox 和一个按钮。我想要实现的是，当按下按钮时，第二个选项卡的 TextBox 内的文本出现在第一个选项卡的 TextBlock 中。

这应该是一项简单的任务，但我被困住了，因为我将每个选项卡都设计在一个单独的 XAML 中（并且我需要保持这种方式），并且我有这个 MainWindow.xaml：

```
<Window x:Class="TabsUserControl.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:TabsUserControl"
    x:Name="root"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <TabControl Name="tabCtrl" HorizontalAlignment="Left" Height="210" VerticalAlignment="Top" Width="366" Margin="89,47,0,0">
        <local:UserTabControl1 Name="tab1"/>
        <local:UserTabControl2 Name="tab2"/>
    </TabControl>
</Grid>
</Window> 
```

所有元素都有一个指定的名称，那么我如何访问它们以在第二个选项卡的 XAML 的 .cs 文件中编写方法？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:45:13.713

由于您最明确地希望这些用户控件彼此分离，因此我将为 DataExchange 使用单独的 Messaging 类。MVVM Light Toolkit 中已经提供了这样的类。一个 UC 可以发布另一个可以接收的信息。

否则，如果您的用户控件与文本框提供文本作为依赖属性，则可以让您的窗口通过绑定进行同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:42:33.583

您可以使用双向模式将绑定添加到每个文本框的文本属性。如果按下按钮：将第一个属性的值设置为第二个。

属性如下所示：

```
private string text1;
public string Text1
{
get{return this.text1;}
set{
this.text1 = value;
OnPropertyChanged("Text1");}
}

private string text2;
public string Text2
{
get{return this.text2;}
set{
this.text2 = value;
OnPropertyChanged("Text2");}
} 
```

在按钮的 Click-Event（或 ExecuteCommand）中，您只需执行以下操作：

```
Text1 = Text2; 
```

而已

# javascript - 访问json中的元素

> ID：14750075
> 
> 赞同：-1
> 
> 时间：2013-02-07T11:31:33.987
> 
> 标签：javascript, html, json

下面是我的 JSON 树。如果所有类型定义的条件，如何访问`Typedefinition`给定树和框架中的属性。我必须遍历树找到

```
if (typedefinition == "ciu'){//do something}
else if(typedef == Tank )
else if( hostport) 
else if( fieldport) 
```

并为每个 if 做一些事情。我必须遍历树并做出这样的条件。

```
{
    "Resp_Data":
    {
        "SiteElements":
        [
            {
                "SiteElementDef":
                [
                    {
                        "SiteElementName": "Gauge00",
                        "ID": "1"
                    },
                    {
                        "Parent": "",
                        "ID": ""
                    },
                    {
                        "TypeDefinition": "GAUGE",
                        "ID": "2"
                    }
                ],
                "Entities":
                [
                    {
                        "EntityId": "2003",
                        "Index": "1",
                        "Value": "00"
                    },
                    {
                        "EntityId": "2006",
                        "Index": "1",
                        "Value": "B"
                    },
                    {
                        "EntityId": "2004",
                        "Index": "1",
                        "Value": "B"
                    },
                    {
                        "EntityId": "5",
                        "Index": "1",
                        "Value": "54"
                    },
                    {
                        "EntityId": "9007",
                        "Index": "1",
                        "Value": "1"
                    },
                    {
                        "EntityId": "9703",
                        "Index": "1",
                        "Value": "0"
                    }
                ],
                "Connections":
                [
                    {
                        "SourceElementID": "2",
                        "DestinationElementID": "1"
                    }
                ]
            },
            {
                "SiteElementDef":
                [
                    {
                        "SiteElementName": "Tank1",
                        "ID": "2"
                    },
                    {
                        "Parent": "",
                        "ID": ""
                    },
                    {
                        "TypeDefinition": "TANK",
                        "ID": "3"
                    }
                ],
                "Entities": "",
                "Connections":
                [
                    {
                        "SourceElementID": "5",
                        "DestinationElementID": "2"
                    },
                    {
                        "SourceElementID": "2",
                        "DestinationElementID": "1"
                    }
                ]
            },
            {
                "SiteElementDef":
                [
                    {
                        "SiteElementName": "CIU1",
                        "ID": "3"

                    },
                    {
                        "Parent": "",
                        "ID": ""
                    },
                    {
                        "TypeDefinition": "CIU",
                        "ID": "4"
                    }
                ],
                "Entities":
                [
                    {
                        "EntityId": "7050",
                        "Index": "1",
                        "Value": "2"
                    },
                    {
                        "EntityId": "9006",
                        "Index": "1",
                        "Value": "1"
                    },
                    {
                        "EntityId": "7050",
                        "Index": "2",
                        "Value": "8"
                    },
                    {
                        "EntityId": "7050",
                        "Index": "3",
                        "Value": "7"
                    },
                    {
                        "EntityId": "3037",
                        "Index": "1",
                        "Value": "1"
                    }
                ],
                "Connections": ""
            },
            {
                "SiteElementDef":
                [
                    {
                        "SiteElementName": "\/dev\/ttyS1",
                        "ID": "4"
                    },
                    {
                        "Parent": "CIU1",
                        "ID": "3"
                    },
                    {
                        "TypeDefinition": "HOSTPORT",
                        "ID": "5"
                    }
                ],
                "Entities":
                [
                    {
                        "EntityId": "5022",
                        "Index": "1",
                        "Value": "9600"
                    },
                    {
                        "EntityId": "5027",
                        "Index": "1",
                        "Value": "3"
                    },
                    {
                        "EntityId": "5020",
                        "Index": "1",
                        "Value": "1"
                    },
                    {
                        "EntityId": "5024",
                        "Index": "1",
                        "Value": "0"
                    },
                    {
                        "EntityId": "5034",
                        "Index": "1",
                        "Value": "0"
                    },
                    {
                        "EntityId": "5025",
                        "Index": "1",
                        "Value": "2"
                    },
                    {
                        "EntityId": "5019",
                        "Index": "1",
                        "Value": "1"
                    },
                    {
                        "EntityId": "5006",
                        "Index": "1",
                        "Value": "0"
                    },
                    {
                        "EntityId": "5012",
                        "Index": "1",
                        "Value": "3302"
                    },
                    {
                        "EntityId": "5012",
                        "Index": "2",
                        "Value": "2801"
                    },
                    {
                        "EntityId": "5013",
                        "Index": "1",
                        "Value": "10000"
                    },
                    {
                        "EntityId": "5013",
                        "Index": "2",
                        "Value": "100"
                    },
                    {
                        "EntityId": "5014",
                        "Index": "1",
                        "Value": "0"
                    },
                    {
                        "EntityId": "5014",
                        "Index": "2",
                        "Value": "30000"
                    },
                    {
                        "EntityId": "5006",
                        "Index": "2",
                        "Value": "1"
                    },
                    {
                        "EntityId": "5006",
                        "Index": "3",
                        "Value": "2"
                    },
                    {
                        "EntityId": "5005",
                        "Index": "1",
                        "Value": "1"
                    },
                    {
                        "EntityId": "5007",
                        "Index": "1",
                        "Value": "0"
                    },
                    {
                        "EntityId": "5009",
                        "Index": "1",
                        "Value": "3"
                    },
                    {
                        "EntityId": "5008",
                        "Index": "1",
                        "Value": "4"
                    },
                    {
                        "EntityId": "5011",
                        "Index": "1",
                        "Value": "0"
                    },
                    {
                        "EntityId": "5011",
                        "Index": "2",
                        "Value": "2"
                    },
                    {
                        "EntityId": "9015",
                        "Index": "1",
                        "Value": "1"
                    },
                    {
                        "EntityId": "9016",
                        "Index": "1",
                        "Value": "1"
                    }
                ],
                "Connections": ""
            },
            {
                "SiteElementDef":
                [
                    {
                        "SiteElementName": "\/dev\/ttyS0",
                        "ID": "5"
                    },
                    {
                        "Parent": "CIU1",
                        "ID": "3"
                    },
                    {
                        "TypeDefinition": "FIELDPORT",
                        "ID": "6"
                    }
                ],
                "Entities":
                [
                    {
                        "EntityId": "3504",
                        "Index": "1",
                        "Value": "40"
                    },
                    {
                        "EntityId": "3507",
                        "Index": "1",
                        "Value": "9000"
                    },
                    {
                        "EntityId": "3510",
                        "Index": "1",
                        "Value": "2"
                    },
                    {
                        "EntityId": "9011",
                        "Index": "1",
                        "Value": "7"
                    },
                    {
                        "EntityId": "9012",
                        "Index": "1",
                        "Value": "CIU1"
                    },
                    {
                        "EntityId": "3501",
                        "Index": "1",
                        "Value": "4"
                    },
                    {
                        "EntityId": "3502",
                        "Index": "1",
                        "Value": "0"
                    },
                    {
                        "EntityId": "3503",
                        "Index": "1",
                        "Value": "2"
                    },
                    {
                        "EntityId": "3505",
                        "Index": "1",
                        "Value": "0"
                    },
                    {
                        "EntityId": "3500",
                        "Index": "1",
                        "Value": "BPM-GPU"
                    },
                    {
                        "EntityId": "9013",
                        "Index": "1",
                        "Value": "3"
                    }
                ],
                "Connections":
                [
                    {
                        "SourceElementID": "5",
                        "DestinationElementID": "2"
                    }
                ]
            },
            {
                "SiteElementDef":
                [
                    {
                        "SiteElementName": "CIU2",
                        "ID": "6"
                    },
                    {
                        "Parent": "",
                        "ID": ""
                    },
                    {
                        "TypeDefinition": "CIU",
                        "ID": "4"
                    }
                ],
                "Entities": "",
                "Connections": ""
            },
            {
                "SiteElementDef":
                [
                    {
                        "SiteElementName": "Tank2",
                        "ID": "7"
                    },
                    {
                        "Parent": "",
                        "ID": ""
                    },
                    {
                        "TypeDefinition": "TANK",
                        "ID": "3"
                    }
                ],
                "Entities": "",
                "Connections": ""
            },
            {
                "SiteElementDef":
                [
                    {
                        "SiteElementName": "Tank3",
                        "ID": "8"
                    },
                    {
                        "Parent": "",
                        "ID": ""
                    },
                    {
                        "TypeDefinition": "TANK",
                        "ID": "3"
                    }
                ],
                "Entities": "",
                "Connections": ""
            },
            {
                "SiteElementDef":
                [
                    {
                        "SiteElementName": "Gauge11",
                        "ID": "9"
                    },
                    {
                        "Parent": "",
                        "ID": ""
                    },
                    {
                        "TypeDefinition": "GAUGE",
                        "ID": "2"
                    }
                ],
                "Entities":
                [
                    {
                        "EntityId": "2011",
                        "Index": "1",
                        "Value": "11"
                    },
                    {
                        "EntityId": "2012",
                        "Index": "1",
                        "Value": "B"
                    },
                    {
                        "EntityId": "2013",
                        "Index": "1",
                        "Value": "C"
                    },
                    {
                        "EntityId": "9008",
                        "Index": "1",
                        "Value": "0"
                    },
                    {
                        "EntityId": "2016",
                        "Index": "1",
                        "Value": "1"
                    },
                    {
                        "EntityId": "5",
                        "Index": "1",
                        "Value": "54"
                    }
                ],
                "Connections": ""
            },
            {
                "SiteElementDef":
                [
                    {
                        "SiteElementName": "Gauge22",
                        "ID": "10"
                    },
                    {
                        "Parent": "",
                        "ID": ""
                    },
                    {
                        "TypeDefinition": "GAUGE",
                        "ID": "2"
                    }
                ],
                "Entities":
                [
                    {
                        "EntityId": "2003",
                        "Index": "1",
                        "Value": "22"
                    },
                    {
                        "EntityId": "2004",
                        "Index": "1",
                        "Value": "B"
                    },
                    {
                        "EntityId": "2006",
                        "Index": "1",
                        "Value": "B"
                    },
                    {
                        "EntityId": "9007",
                        "Index": "1",
                        "Value": "1"
                    },
                    {
                        "EntityId": "9703",
                        "Index": "1",
                        "Value": "1"
                    },
                    {
                        "EntityId": "5",
                        "Index": "1",
                        "Value": "54"
                    }
                ],
                "Connections": ""
            },
            {
                "SiteElementDef":
                [
                    {
                        "SiteElementName": "Gauge33",
                        "ID": "11"
                    },
                    {
                        "Parent": "",
                        "ID": ""
                    },
                    {
                        "TypeDefinition": "GAUGE",
                        "ID": "2"
                    }
                ],
                "Entities":
                [
                    {
                        "EntityId": "2011",
                        "Index": "1",
                        "Value": "33"
                    },
                    {
                        "EntityId": "2012",
                        "Index": "1",
                        "Value": "B"
                    },
                    {
                        "EntityId": "2013",
                        "Index": "1",
                        "Value": "C"
                    },
                    {
                        "EntityId": "9008",
                        "Index": "1",
                        "Value": "0"
                    },
                    {
                        "EntityId": "2016",
                        "Index": "1",
                        "Value": "0"
                    },
                    {
                        "EntityId": "5",
                        "Index": "1",
                        "Value": "54"
                    }
                ],
                "Connections": ""
            },
            {
                "SiteElementDef":
                [
                    {
                        "SiteElementName": "Gauge44",
                        "ID": "12"
                    },
                    {
                        "Parent": "",
                        "ID": ""
                    },
                    {
                        "TypeDefinition": "GAUGE",
                        "ID": "2"
                    }
                ],
                "Entities":
                [
                    {
                        "EntityId": "2011",
                        "Index": "1",
                        "Value": "44"
                    },
                    {
                        "EntityId": "2012",
                        "Index": "1",
                        "Value": "B"
                    },
                    {
                        "EntityId": "2013",
                        "Index": "1",
                        "Value": "C"
                    },
                    {
                        "EntityId": "9008",
                        "Index": "1",
                        "Value": "0"
                    },
                    {
                        "EntityId": "2016",
                        "Index": "1",
                        "Value": "1"
                    },
                    {
                        "EntityId": "2003",
                        "Index": "1",
                        "Value": "44"
                    },
                    {
                        "EntityId": "2004",
                        "Index": "1",
                        "Value": "B"
                    },
                    {
                        "EntityId": "2006",
                        "Index": "1",
                        "Value": "B"
                    },
                    {
                        "EntityId": "9007",
                        "Index": "1",
                        "Value": "1"
                    },
                    {
                        "EntityId": "9703",
                        "Index": "1",
                        "Value": "0"
                    },
                    {
                        "EntityId": "5",
                        "Index": "1",
                        "Value": "54"
                    }
                ],
                "Connections": ""
            },
            {
                "SiteElementDef":
                [
                    {
                        "SiteElementName": "Gauge55",
                        "ID": "13"
                    },
                    {
                        "Parent": "",
                        "ID": ""
                    },
                    {
                        "TypeDefinition": "GAUGE",
                        "ID": "2"
                    }
                ],
                "Entities":
                [
                    {
                        "EntityId": "2011",
                        "Index": "1",
                        "Value": "55"
                    },
                    {
                        "EntityId": "2012",
                        "Index": "1",
                        "Value": "B"
                    },
                    {
                        "EntityId": "2013",
                        "Index": "1",
                        "Value": "C"
                    },
                    {
                        "EntityId": "9008",
                        "Index": "1",
                        "Value": "0"
                    },
                    {
                        "EntityId": "2016",
                        "Index": "1",
                        "Value": "1"
                    },
                    {
                        "EntityId": "5",
                        "Index": "1",
                        "Value": "54"
                    }
                ],
                "Connections": ""
            },
            {
                "SiteElementDef":
                [
                    {
                        "SiteElementName": "\/dev\/ttyS1",
                        "ID": "14"
                    },
                    {
                        "Parent": "CIU1",
                        "ID": "3"
                    },
                    {
                        "TypeDefinition": "FIELDPORT",
                        "ID": "6"
                    }
                ],
                "Entities":
                [
                    {
                        "EntityId": "3501",
                        "Index": "1",
                        "Value": "4"
                    },
                    {
                        "EntityId": "9011",
                        "Index": "1",
                        "Value": "7"
                    },
                    {
                        "EntityId": "3503",
                        "Index": "1",
                        "Value": "2"
                    },
                    {
                        "EntityId": "3502",
                        "Index": "1",
                        "Value": "0"
                    },
                    {
                        "EntityId": "3505",
                        "Index": "1",
                        "Value": "0"
                    },
                    {
                        "EntityId": "9012",
                        "Index": "1",
                        "Value": "CIU1"
                    },
                    {
                        "EntityId": "9013",
                        "Index": "1",
                        "Value": "2"
                    },
                    {
                        "EntityId": "3504",
                        "Index": "1",
                        "Value": "40"
                    },
                    {
                        "EntityId": "3507",
                        "Index": "1",
                        "Value": "9000"
                    },
                    {
                        "EntityId": "3510",
                        "Index": "1",
                        "Value": "2"
                    }
                ],
                "Connections": ""
            }
        ]
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:24:03.243

简单的

```
if (!obj.TypeDefinition) {
  // ..
}
else if (obj.TypeDefinition == "GAUGE") { 
  // ..
} // ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:57:01.003

尝试这个 ：

```
var result=myJSONObject.Resp_Data.SiteElements[0].SiteElementDef[0].TypeDefinition 
```

将您的上述 json 分配给 myJSONObject 然后尝试此代码。

[也参考这个](https://stackoverflow.com/questions/10539797/complex-json-nesting-of-objects-and-arrays)

# javascript - 调整 iframe 的大小，在 Firefox 中不起作用

> ID：14750077
> 
> 赞同：0
> 
> 时间：2013-02-07T11:31:37.170
> 
> 标签：javascript, firefox, iframe, autoresize

我正在尝试调整 iframe 的大小。我的代码在 Chrome 和内部资源管理器中运行，但在 Firefox 中不运行。有人可以解释为什么。

这是我的javascript：

```
<script type="text/javascript" language="javascript"> 

function autoResize(id){
var newheight;

if(document.getElementById){
    newheight=document.getElementById(id).contentDocument .body.scrollHeight;

}

document.getElementById(id).height= newheight;

}
</script> 
```

这是我的 iframe：

```
<iframe id="myframe" src="http://www.somesite.com/content/index.php" frameborder="0" scrolling="no" width="900px" onLoad="autoResize('myframe');"></iframe> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:59:41.090

可能是因为您没有在 if 语句的函数调用中发送传递 id 作为参数。尝试这个：

```
<script type="text/javascript" language="javascript"> 

    function autoResize(id){

    if(document.getElementById(id)){
        document.getElementById(id).height = document.getElementById(id).contentDocument .body.scrollHeight;

    }
}
</script> 
```

# css - 带有 CSS 的样式禁用按钮

> ID：14750078
> 
> 赞同：328
> 
> 时间：2013-02-07T11:31:41.517
> 
> 标签：css

我正在尝试使用嵌入图像更改按钮的样式，如下面的小提琴所示：

[http://jsfiddle.net/krishnathota/xzBaZ/1/](http://jsfiddle.net/krishnathota/xzBaZ/1/)

恐怕在示例中没有图像。

我试着：

1.  `background-color`禁用时更改按钮的
2.  禁用时更改按钮中的图像
3.  禁用时禁用悬停效果
4.  当你点击按钮中的图像并拖动它时，可以单独看到图像；我想避免这种情况
5.  可以选择按钮上的文本。我也想避免这种情况。

我试着在`button[disabled]`. 但有些效果无法禁用。喜欢 `top: 1px; position: relative;`和形象。

* * *

## 回答 #1

> 赞同：490
> 
> 时间：2013-02-07T11:47:18.093

对于禁用的按钮，您可以使用`:disabled`伪类。它适用于所有具有`disabled`API 的元素（通常是表单元素）。

对于仅支持 CSS2 的浏览器/设备，您可以使用`[disabled]`选择器。

与图像一样，不要将图像放在按钮中。将 CSS`background-image`与`background-position`和一起使用`background-repeat`。这样，图像拖动就不会发生。

**选择问题：**这里是具体问题的链接：

*   [如何禁用文本选择突出显示](https://stackoverflow.com/questions/826782/css-rule-to-disable-text-selection-highlighting)

**禁用选择器的示例：**

```
button {
  border: 1px solid #0066cc;
  background-color: #0099cc;
  color: #ffffff;
  padding: 5px 10px;
}

button:hover {
  border: 1px solid #0099cc;
  background-color: #00aacc;
  color: #ffffff;
  padding: 5px 10px;
}

button:disabled,
button[disabled]{
  border: 1px solid #999999;
  background-color: #cccccc;
  color: #666666;
}

div {
  padding: 5px 10px;
}
```

```
<div>
  <button> This is a working button </button>
</div>

<div>
  <button disabled> This is a disabled button </button>
</div>
```

* * *

## 回答 #2

> 赞同：102
> 
> 时间：2013-02-07T11:41:57.757

我认为您应该能够使用以下方法选择禁用的按钮：

```
button[disabled=disabled], button:disabled {
    // your css rules
} 
```

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2014-12-23T14:20:45.317

在您的页面中添加以下代码。没有对按钮事件进行任何更改，禁用/启用按钮只需在 JavaScript 中添加/删除按钮类。

**方法一**

```
 <asp Button ID="btnSave" CssClass="disabledContent" runat="server" />

<style type="text/css">
    .disabledContent 
    {
        cursor: not-allowed;
        background-color: rgb(229, 229, 229) !important;
    }

    .disabledContent > * 
    {
        pointer-events:none;
    }
</style> 
```

**方法二**

```
<asp Button ID="btnSubmit" CssClass="btn-disable" runat="server" />

<style type="text/css">
    .btn-disable
        {
        cursor: not-allowed;
        pointer-events: none;

        /*Button disabled - CSS color class*/
        color: #c0c0c0;
        background-color: #ffffff;

        }
</style> 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-06-02T10:10:19.897

为禁用的按钮应用灰色按钮 CSS。

```
button[disabled]:active, button[disabled],
input[type="button"][disabled]:active,
input[type="button"][disabled],
input[type="submit"][disabled]:active,
input[type="submit"][disabled] ,
button[disabled]:hover,
input[type="button"][disabled]:hover,
input[type="submit"][disabled]:hover
{
  border: 2px outset ButtonFace;
  color: GrayText;
  cursor: inherit;
  background-color: #ddd;
  background: #ddd;
} 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2017-11-13T15:33:00.437

通过**CSS：**

```
.disable{
   cursor: not-allowed;
   pointer-events: none;
} 
```

他们可以为该按钮添加任何装饰。要更改状态，您可以使用**jquery**

```
$("#id").toggleClass('disable'); 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-09-24T11:50:19.980

对于我们所有使用引导程序的人，您可以通过添加“禁用”类并使用以下内容来更改样式：

**HTML**

```
<button type="button"class="btn disabled">Text</button> 
```

**CSS**

```
.btn:disabled,
.btn.disabled{
  color:#fff;
  border-color: #a0a0a0;
  background-color: #a0a0a0;
}
.btn:disabled:hover,
.btn:disabled:focus,
.btn.disabled:hover,
.btn.disabled:focus {
  color:#fff;
  border-color: #a0a0a0;
  background-color: #a0a0a0;
} 
```

请记住，添加“禁用”类并不一定会禁用按钮，例如在提交表单中。要禁用其行为，请使用 disabled 属性：

```
<button type="button"class="btn disabled" disabled="disabled">Text</button> 
```

[此处](https://jsfiddle.net/s0gw53zu/)提供了一些示例的工作小提琴。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2019-10-09T07:25:49.480

考虑以下解决方案

```
.disable-button{ 
  pointer-events: none; 
  background-color: #edf1f2;
} 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2017-05-30T04:44:46.950

当您的按钮被禁用时，它会直接设置不透明度。所以首先我们必须将它的不透明度设置为

```
.v-button{
    opacity:1;    
} 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2019-08-02T06:36:41.000

需要如下应用css：

```
button:disabled,button[disabled]{
    background-color: #cccccc;
    cursor:not-allowed !important;
  } 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-09-20T06:06:50.597

```
input[type="button"]:disabled,
input[type="submit"]:disabled,
input[type="reset"]:disabled,
{
  //  apply css here what u like it will definitely work...
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-04-03T12:23:09.913

如果您将样式 (.css) 文件更改为 SASS (.scss)，请使用：

```
button {
  background-color: #007700;
  &:disabled {
    background-color: #cccccc;
  }
} 
```

# backbone.js - 无法删除元素仍然数组被清除

> ID：14750079
> 
> 赞同：0
> 
> 时间：2013-02-07T11:31:41.517
> 
> 标签：backbone.js, backbone-views

我每 10 秒从服务器获取数据，在此，我得到 3 种类型的数据，

在超时调用之后，我正在删除现有数据，我可以看到控制台显示数组已清除，但元素仍保持附加。

我怎样才能清除 DOM 中的两个元素并取消绑定..

我的关闭函数被保持调用，但元素不会从 DOM 中删除。

我的单一观点：

```
singleton.view = Backbone.View.extend({
    tagName     :'article',
    template0   : function(value){
                    var label = value === 0 ? "projectName" : value === 1  ? "assignedTo" :"projectName";
                    return _.template("<a href='#'><%= "+label+" %></a>");
                },
    template1   : _.template($('#boardTemplate').html()),
    initialize  :function(prams){
        this.template = this['template'+0](prams.subTempNo);
    },
    close:function(){
        console.log('clean up') // i am getting consoled
        this.unbind();// i am unbinding
        this.remove();// i am removing
    },
    render:function(){
        var temp = this.template;
        this.$el.html(temp(this.model.toJSON()));
        return this;
    }
}); 
return singleton.view; 
```

在意见中：

```
listViewAppender:function(item,i){
            var listElement = new singleton.view({model:item,tempNo:0,subTempNo:i,tagName:'li'});
            listElement.close(); // whenever i call the new instance i am removing old stuff..
            this.$el.find('.'+this.classItems[i]).append(listElement.render().el);
        }, 
```

我该如何解决这个问题..任何正确的方法pelase..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:03:05.000

好的，只是一个快速的返工......你将不得不对其进行测试。评论发生了什么，我将更正下面的代码。

你能试一下吗

```
listViewSet:function(key,i){
    var l = this.listCatch.length;
    if(l > 0){
        for (var i = 0; i < l; i++) {
            console.log(this.listCatch[i]);
            this.listCatch[i].remove();
         }
    }

    this.listCatch = [];

    _.each(this.listCollection.models, function(model){
        that.listViewAppender(model,i); //setting agian.
    });
},

listViewAppender:function(item,i){
    var listElement = new singleton.view({model:item,tempNo:0,subTempNo:i,tagName:'li'});
    console.log(listElement);
    this.$el.find('.'+this.classItems[i]).append(listElement.render().el);
    this.listCatch[i] = listElement;
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:55:47.877

我浏览了我的函数，我在`this.listCatch[i] = listElement;`错误声明的行中发现了问题。

后来我手动声明了数组，它工作正常。在我的初始化中，我引入了 3 个数组，现在我需要它工作正常。

```
this.listCatch = [];

            for(var i=0;i<this.listItems.length; i+=1){
                this.listCatch[i] = [];
            } 
```

所以在将模型推送到数组之前，现在引入的数组解决了这个问题。

# android-edittext - 输入时数字不显示在editText字段中（Android 2.2）

> ID：14750080
> 
> 赞同：0
> 
> 时间：2013-02-07T11:31:44.500
> 
> 标签：android-edittext, textwatcher

我有两个 editText 字段，在他们自己的 addTextChangedListeners 中跟随 TextWatchers。输入已正确读取和处理，但我输入的数字根本没有显示在第二个字段 (editText2) 的显示屏上（即使我在 afterTextChanged() 中等待 (sleep()) 一段时间，然后继续设置两个字段的值到空结束设置焦点到第一个字段。

在第一个字段中输入数字时会发生什么：数字显示在字段中，焦点移到第二个字段。在第二个字段中输入数字会发生什么情况：光标（闪烁的垂直线）被冻结，两秒钟后不显示任何数字：光标移动到第一个字段并且两个字段都为空。所有这一切都是为了发生，除了应该*显示*在第二个字段中输入的数字，然后系统应该冻结*显示该数字*一段时间，然后设置为 null 并转到第一个字段。

出了什么问题以及如何解决？

```
public class Spel extends FragmentActivity  {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.spel);

    editText1 = (EditText) findViewById(R.id.editText1);
editText1.addTextChangedListener(new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence s, int start,
            int before, int count) {
        if (before==0) {  // alleen doen als editText1 leeg was
            String v = s.toString();
            if (v.equals("0") || v.equals("1") || v.equals("2") || v.equals("3") || v.equals("4") || v.equals("5") || v.equals("6") || v.equals("7") || v.equals("8") || v.equals("9")) {
                editText2.requestFocus();
                int baanWorpScore = Integer.parseInt(v);
                banenWorpScore[0] = baanWorpScore;
            } 
            else {
                // blijf wachten op goede invoer
                editText1.setText(null);
            }                       
        }

    }
});

    editText2 = (EditText) findViewById(R.id.editText2);
    editText2.addTextChangedListener(new TextWatcher() {

@Override
public void afterTextChanged(Editable s) {
    // TODO Auto-generated method stub
    try {
        Thread.sleep(2000);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

    @Override
    public void onTextChanged(CharSequence s, int start,
        int before, int count) {
    if (before==0) {
        String v = s.toString();
        if (v.equals("0") || v.equals("1") || v.equals("2") || v.equals("3") || v.equals("4") || v.equals("5") || v.equals("6") || v.equals("7") || v.equals("8") || v.equals("9")) {
            editText1.requestFocus();
            editText1.setText(null);
            editText2.setText(null);
            int baanWorpScore = Integer.parseInt(v);
            banenWorpScore[1] = baanWorpScore;
        } 
        else {
            // blijf wachten op goede invoer
            editText2.setText(null);
        }
    }
});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:49:42.537

找到以下解决方案，将延迟的操作放在可运行的中，并传递给（新）处理程序的方法 postDelayed。这正是我所希望的。请参阅[此处](https://stackoverflow.com/questions/14660636/how-to-make-textwatcher-wait-for-some-time-before-doing-some-action?rq=1)以获取帮助我找到在哪里寻找解决方案的帖子。

（我实际上不知道是否必须实际调用方法 removeCallbacks）

```
@Override
public void onTextChanged(CharSequence s, int start,
        int before, int count) {

    Runnable mFilterTask = new Runnable() {

         @Override
         public void run() {
                editText1.setText(null);
                editText2.setText(null);
                editText1.requestFocus();
         }       
    };

    Handler mHandler = new Handler();

    if (before==0) {
        String v = s.toString();
        if (v.equals("0") || v.equals("1") || v.equals("2") || v.equals("3") || v.equals("4") || v.equals("5") || v.equals("6") || v.equals("7") || v.equals("8") || v.equals("9")) {
            mHandler.removeCallbacks(mFilterTask); 
            mHandler.postDelayed(mFilterTask, 2000);

            int baanWorpScore = Integer.parseInt(v);
            banenWorpScore[1] = baanWorpScore;
        } 
    }
} 
```

# java - 在 J2ME 中从 RSAPrivateCrtKeyParameters / RSAKeyParameters 转换为 PEM

> ID：14750082
> 
> 赞同：17
> 
> 时间：2013-02-07T11:31:48.323
> 
> 标签：java, blackberry, java-me, base64, bouncycastle

我正在黑莓上开发一些密码学，我们正在使用证书。我们使用 BouncyCastle 轻量级 API 而不是 RIM api 来应用加密，但在轻量级 API 中 PEMWriter 不起作用（嗯，它不包括在内，因为它需要一些 JCE）。

```
public RSAPrivateCrtKeyParameters _RSAPrivateKey;
public RSAKeyParameters _RSAPublicKey; 
```

我从对象中得到这个键

```
AsymmetricCipherKeyPair theKeyPair 
```

所以，我需要一种方法来对这两个键进行 BASE64Encode，或者如何将此键转换为可以直接转换为 base64/PEM 格式的其他对象。我可以手动生成证书，但我需要密钥的编码。

我知道有一些方法可以做到这一点，但都需要 PEMWriter 或未使用 j2ME 和 bouncycastle 轻量级 API 启用的 API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-22T00:37:12.243

您可以查看充气城堡的 PEMWriter/PEMReader 代码并使用它们的实现作为参考：

[写手](http://grepcode.com/file/repo1.maven.org/maven2/org.bouncycastle/bcprov-jdk16/1.46/org/bouncycastle/openssl/PEMWriter.java#PEMWriter)

[阅读器](http://grepcode.com/file/repo1.maven.org/maven2/org.bouncycastle/bcprov-jdk16/1.46/org/bouncycastle/openssl/PEMReader.java#PEMReader)

# html - 在 Github HTML 预览中无法识别 CSS 中的 @import？

> ID：14750083
> 
> 赞同：1
> 
> 时间：2013-02-07T11:31:49.550
> 
> 标签：html, css, github

我是 github 新手，已经上传了许多 .html、.css 和 .js 文件。

我试过使用[http://htmlpreview.github.com/](http://htmlpreview.github.com/)吗？预览我的页面，因为它们会以样式显示，但在我的某些样式表中 @import 存在问题。

如果我删除 @import 并单独链接所有样式表，那么一切正常，这是导致问题的@import（我猜是因为 Github 预览 URL 查询我正在查看的页面，所以所有内容都必须与该页面相关？）。

我想知道是否有人知道我可以保留@import 的方法，因为删除它意味着数百页的更改？

index.html 中的示例代码：

```
<link rel="stylesheet" href="../../themes/base/jquery.ui.all.css"> 
```

然后 jquery.ui.all.css 包含几个使用以下代码导入的样式表：

```
@import url("jquery.ui.base.css"); 
```

然后 jquery.ui.base.css 包含更多 @import 规则如下：

```
@import url("jquery.ui.accordion.css");
@import url("jquery.ui.autocomplete.css");
@import url("jquery.ui.button.css"); 
```

干杯，

乔恩

# html - 当我使用浏览器的开发工具查看页面上的某些元素时会发生什么？

> ID：14750084
> 
> 赞同：0
> 
> 时间：2013-02-07T11:31:52.970
> 
> 标签：html, css, browser, opera

有几次我遇到了我们网页的奇怪行为：如果我只是打开页面，它看起来是一种方式，如果我使用浏览器提供的开发人员工具查看该页面的某些元素 - 元素的外观变化。如果我单击某个 div 并在开发工具中查看它，看起来确实会引发一些刷新事件。

有谁知道发生了什么？

例如，在我目前的情况下，我有一些具有半透明背景的 div，它应该在某些事件发生后移动。它在除歌剧之外的所有浏览器中移动。在 Opera 中根本没有显示。但是，如果我使用 Opera 开发工具检查该 div，则该 div 变得可见！当我切换到标准模式时 - 它再次隐藏。

当我使用开发工具跟踪某些 div 的数据时会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:37:23.170

这是所有可视化开发编辑器和调试器的常见行为。为了允许对项目进行编辑/调试，它们将组件的可见性属性覆盖为 TRUE。

在正常模式下返回，当然会将所有属性设置为其实际值。

# vba - 如何在vba excel中创建一种变量复选框

> ID：14750089
> 
> 赞同：1
> 
> 时间：2013-02-07T11:32:02.380
> 
> 标签：vba, checkbox

我有下一张带有许多复选框的 Excel 表格。

![在此处输入图像描述](../Images/0b652c662f3c35493c2dbc6d3b0f3f9e.png)

问题是当我编码时，我必须使用**Valor1**和**Valor2**执行一些功能，具体取决于**复选框**是否被激活。

好吧，我有代码。

```
Option Explicit

Sub Casilladeverificación1_Haga_clic_en()

    Range("c12").Activate

    Do

        If CheckBox1.Value Then
            Call fucntion1
        'Works for the first row, but for the second row int shoul be check CheckBox12 ,a next CheckBox23 ...

        If CheckBox2.Value Then
            Call fucntion1

        If CheckBox2.Value Then
            Call fucntion3

        ....

    ActiveCell.Offset(1, 0).Activate

    While Not IsEmpty(ActiveCell.Value2)

End Sub 
```

但是你可以注意到我不想用所有的**复选框来做**所有的情况，有一个解决这个问题的方法，比如**checkbox[i]**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:01:27.100

我会将您的所有功能放入一个大功能中，并且功能将由一个`Select Case`块分隔。

```
 Private Sub functionRouter(checkAction as integer)
 Select Case checkAction
      Case 1
         'Code for function one
      Case 2
         'Code for function two
      ''Etc.
 End Select
 End Sub 
```

您将要遍历所有复选框。这将取决于您使用的复选框。

```
 Sub test()

 Dim chkBox As CheckBox
 Dim chkBox2 As OLEObject

 'Regular
 For Each chkBox In Sheets("Sheet1").CheckBoxes
  Debug.Print chkBox.Caption
 Next chkBox

 'ActiveX
 For Each chkBox2 In Sheets("Sheet1").OLEObjects
  If TypeName(chkBox2.Object) = "CheckBox" Then
     Debug.Print chkBox2.Object.Value
  End If
 Next chkBox2 
```

您可以使用所有复选框做一些不同的事情。您可以使用该`tag`属性（您需要设置所有属性，但这允许重复）。然后调用`functionRouter(chkBox.tag)`或者你可以从名字中解析一些东西`functionRouter Right(chkBox.name, 1)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T11:42:02.650

您可以使用此循环迭代工作表上的复选框：

```
For Each chk In ActiveSheet.CheckBoxes
    MsgBox chk.Name
Next 
```

`ActiveX`但是，如果您使用控件，它将不起作用。

# android - 如何从android的广播接收器中接收到的意图获取应用程序名称

> ID：14750090
> 
> 赞同：3
> 
> 时间：2013-02-07T11:32:06.843
> 
> 标签：android

我的应用程序侦听`outgoing_call_broadcast`. 我需要在我的广播接收器中知道呼叫是来自拨号器应用程序还是来自已保存的联系人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:37:48.647

为什么你不匹配另一个接收器中的拨号器和联系人的意图，并且每当呼出呼叫广播从接收器读取数据集时，哪个应用程序被用于呼出呼叫。拨号器的 Intent.ACTION_DIAL 和联系人的 Intent.ACTION_PICK

# python - 使用 Pango 和 Cairo (Pycairo) 将线条与宽度相匹配

> ID：14750093
> 
> 赞同：5
> 
> 时间：2013-02-07T11:32:17.653
> 
> 标签：python, cairo, pango, pycairo

我有几行文本，我希望每行都适合 Context 的宽度（缩放字体大小）。有没有办法做到这一点？我为此使用 pangocairo 和 python。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-03T01:50:23.817

我希望有时间找到一个可行的解决方案，但您可以从以下内容开始：

```
import cairo
import pango
import pangocairo
import sys

W = 500
H = int(1.4 * W)

surf = cairo.ImageSurface(cairo.FORMAT_ARGB32, W, H)
context = cairo.Context(surf)

#draw a background rectangle:
context.rectangle(0, 0, W, H)
context.set_source_rgb(1, 1, 1)
context.fill()

#get font families:

font_map = pangocairo.cairo_font_map_get_default()
families = font_map.list_families()

# to see family names:
#print sorted([f.get_name() for f in   font_map.list_families()])

# context.set_antialias(cairo.ANTIALIAS_SUBPIXEL)

# Translates context so that desired text upperleft corner is at 0,0

text = """Fit line
to width with 
Pango 
and Cairo"""

fontname = "Arial"
context.set_source_rgb(0, 0, 0)

y = 0
for line in text.split("\n"):
    pangocairo_context = pangocairo.CairoContext(context)
    pangocairo_context.set_antialias(cairo.ANTIALIAS_SUBPIXEL)
    layout = pangocairo_context.create_layout()
    font = pango.FontDescription(fontname + " 25")
    layout.set_font_description(font)
    layout.set_text(line)
    pangocairo_context.update_layout(layout)
    w, h = layout.get_pixel_size()
    print w, h, y
    context.translate(0, y)
    pangocairo_context = pangocairo.CairoContext(context)
    pangocairo_context.set_antialias(cairo.ANTIALIAS_SUBPIXEL)
    layout = pangocairo_context.create_layout()
    font_descr = "{} {:0.1f}".format(fontname, float(W) / w * 25)
    font = pango.FontDescription(font_descr)
    layout.set_font_description(font)
    layout.set_text(line)
    _, y = layout.get_pixel_size()
    pangocairo_context.update_layout(layout)
    pangocairo_context.show_layout(layout)

with open("cairo_text.png", "wb") as image_file:
    surf.write_to_png(image_file) 
```

结果：

![结果](../Images/0b7283ccf5a7153463ba6bfb83732bc7.png)

我将把改进这个算法作为练习留给读者，你可以尝试：

*   缩放字体并调整后验证布局的宽度
*   以大字体大小和比例`pangocairo_context`渲染
*   `pycairo`我不知道，事实上，在我阅读您的问题并查看文档之前，我一无所知。

# css - 使用 box-shadow（插图）的 CSS3 文本字段效果？

> ID：14750097
> 
> 赞同：0
> 
> 时间：2013-02-07T11:32:23.487
> 
> 标签：css

我想像这样使用 CSS3 获得文本字段效果：-

![在此处输入图像描述](../Images/30e69958b774bd001b8ba03694f9e314.png)

我尝试使用 CSS3 做到这一点，但未能获得完全相同的外观，请在[**jsfiddle.net中找到我的代码**](http://jsfiddle.net/WXnE9/1/)

**CSS**

```
.field {
-webkit-box-shadow: inset 0px 1px 4px 1px #929292;
-moz-box-shadow: inset 0px 1px 4px 1px #929292;
box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3) inset;
width: 277px;
height: 18px;
border-top: #9f9e9e 1px solid;
border-right: #c9c9c9 1px solid;
border-bottom: #ececec 1px solid;
border-left: #c9c9c9 1px solid;
border-radius: 3px;
-moz-border-radius: 3px;
-webkit-border-radius: 3px;
outline: none;
padding: 6px 8px;
font-size: 13px;
line-height: 16px;
color: #333;
} 
```

**HTML**

```
<input type="text" name="name" value="" class="field"> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:22:47.673

很难定义“完全相同的外观”。无论如何，这是我的尝试：

[更新的演示](http://jsfiddle.net/vals/NPPbf/2/)

我改变了 box-shadow，并给了它第二个阴影

```
box-shadow: inset 0px 1px 2px 1px rgba(0, 0, 0, 0.3), 
            inset 0px -1px 1px 1px rgba(0, 0, 0, 0.2); 
```

这里的关键问题是您可以设置任意数量的阴影，即使是相同类型的（我的意思是两者都是“插入”）。这样，你几乎可以得到你想要的任何东西。更重要的是，如果您在颜色中使用 alpha。

顺便说一句，我认为你可以放弃 -webkit-border-radius。

# sql - 使用 like 语句的 SQL Azure 索引性能

> ID：14750098
> 
> 赞同：1
> 
> 时间：2013-02-07T11:32:25.717
> 
> 标签：sql, azure-sql-database

我有一个带有基于文本的列类型的表，`nvarchar(450)`并为该列创建了一个非聚集索引：

```
CREATE NONCLUSTERED INDEX [myindexname] ON [myschema].[mytable] 
(
    [mycolumn] ASC
) 
```

执行以下查询时会出现我的问题：

```
select 
    .... 
where
    .... 
    mycolumn like '%something%' 
```

如果我尝试在没有第一个 % 的情况下进行查询，则索引的工作速度非常快，但是使用初始 % 会花费大量时间。

我知道索引基础建议不要将初始 % 用于 where 子句，但我无法将其从查询中删除。我想知道是否有任何改进索引的选项（我现在无法更改查询）。

注意：解释计划显示了对索引的正确访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:36:23.483

索引按字母顺序按列`mycolumn`排序。因此，当您查找`%`前面的子字符串时，查询引擎必须扫描整个表/索引。

使这种查询更快的唯一方法是使用全文搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-01T17:41:43.180

全文搜索现在在 SQL DB v12 中处于预览状态。这完全适合您的场景。

# winforms - 鼠标点击地图的位置信息 GMap.net

> ID：14750099
> 
> 赞同：8
> 
> 时间：2013-02-07T11:32:26.090
> 
> 标签：winforms, c#-4.0, gmap.net

我正在与 GMap.net（一个使我们能够在 Win Forms 应用程序中使用 Google 地图的库）一起开发 Win Forms 应用程序。直截了当，我能够获得鼠标单击（左键单击）的坐标，即（纬度和经度）。

```
 private void gm1_MouseDoubleClick(object sender, MouseEventArgs e)
    {
        if (e.Button == System.Windows.Forms.MouseButtons.Left)
        {
            double lat = gm1.FromLocalToLatLng(e.X, e.Y).Lat;
            double lng = gm1.FromLocalToLatLng(e.X, e.Y).Lng;
        }
    } 
```

我没有找到一种方法来获取那个地方的位置，即国家名称、城市名称等。

我搜索了谷歌地图的论坛，但我没有找到这个问题的答案。

任何

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-03T02:13:33.780

这将为您提供您在地图上单击的位置上的命名地点列表。

```
 private void map_MouseClick(object sender, MouseEventArgs e)
    {
        if (e.Button == System.Windows.Forms.MouseButtons.Left)
        {
            double lat = map.FromLocalToLatLng(e.X, e.Y).Lat;
            double lng = map.FromLocalToLatLng(e.X, e.Y).Lng;
        }

        List<Placemark> plc = null;
        var st = GMapProviders.GoogleMap.GetPlacemarks(map.FromLocalToLatLng(e.X, e.Y), out plc);
        if (st == GeoCoderStatusCode.G_GEO_SUCCESS && plc != null)
        {
            foreach (var pl in plc)
            {
                if (!string.IsNullOrEmpty(pl.PostalCodeNumber))
                {
                    Debug.WriteLine("Accuracy: " + pl.Accuracy + ", " + pl.Address + ", PostalCodeNumber: " + pl.PostalCodeNumber);
                }
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-28T11:01:49.667

在使用 GMap.Net 库时，坐标用于使用纬度和经度的特定位置。作为问题，甚至可以使用地名来定位位置。

```
 GMapControl.MapProvider = MapProviders.GoogleTerrainMapProvider.Instance

            GMap.NET.GMaps.Instance.Mode = GMap.NET.AccessMode.ServerAndCache
            With Me.GMapControl
                .Position = New GMap.NET.PointLatLng(latitute, longitute)
                .SetPositionByKeywords("Nepal")
                .Zoom = mp_zomlvl
                .ShowCenter = False
            End With
            GMapControl.Refresh() 
```

删除代码：.Position = New GMap.NET.PointLatLng(latitute, longitute) 用于使用 .SetPositionByKeywords("Nepal")

# visual-studio - 无法在动态链接库 msvcrt.dll 中找到过程入口点 _except_handler4_common

> ID：14750110
> 
> 赞同：4
> 
> 时间：2013-02-07T11:32:53.377
> 
> 标签：visual-studio, mfc, windows-xp, installshield

我正在使用“Microsoft Visual Studio”来处理“MFC 应用程序”。

我正在使用“Installshield”为此应用程序创建安装文件。

我得到一个“setup.exe”文件。

如果我在“Windows XP 32 位”机器上运行此设置，安装将正确结束。

然而，当我尝试启动已安装的程序时，我收到以下消息：

```
"The procedure entry point _except_handler4_common could not be located in the dynamic link library msvcrt.dll." 
```

在调试模式下，我找不到错误发生的那一刻，因为无论我在代码中放置什么断点，消息都会在到达断点之前出现，我猜是在程序执行的一开始......

注意：它适用于 Vista 32 位和 7 个 64 位。

似乎很多人确实有同样的问题，但我无法为自己找到解决方案。

你能帮我吗？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T17:07:45.400

欢迎来到 DLL 地狱和应用程序依赖分析的世界。

我在我的 Win8 机器上的 SYSWOW64（32 位 System32 文件夹）中找到了版本 7.0.9200.16384 的 DLL。使用[Dependency Walker](http://www.dependencywalker.com/)查看它，我可以看到它实际上导出了您正在寻找的功能。

我还在我的 InstallShield 机器上看到了一个名为 MSVCRT.MSM 的合并模块，它重新分发了此文件的 6.00.8797.0 版本。但是，当我使用 Dependency Walker 查看它时，我发现它具有导出的函数 _except_handler2 和 _except_handler_3，但没有 _except_handler_4_common。

因此，您需要一个更新的 DLL，而该合并模块对您没有帮助。微软曾经有一个很酷的网站，叫做 DLL 帮助数据库，它告诉你一个文件的所有版本以及发布它们的内容，但遗憾的是他们杀死了它。

顺便说一句，我也可以看到这些天这个 DLL 是随 Windows 一起安装的。视窗XP？我不太确定，因为我必须启动虚拟机并查看。

几个可能的解决方案：

1.  找出 Windows 的 SP 或 Hotfix 解决了这个问题，并使其成为您的 MSI 的依赖项。

2.  从 Win 8 机器中获取 DLL 并将其添加到您的 INSTALLDIR 并私下部署它。

最后一点。这可能是由于 Windows XP 的版本带有旧版本的 DLL（相关的知识库文章说确实如此），或者是第三方应用程序破坏了导致问题的 DLL。这里需要更多的研究。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-02T09:50:02.333

我建议您首先尝试安装 MSVC Redist 2008 版。该版本确实包含缺失功能的实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-02T17:48:29.940

这篇文章很旧，但我想留下我的解决方案，因为这个问题对我来说是地狱。我的 python 应用程序适用于 Linux、Win7、8 和 10，但 WinXP 拒绝使用该消息。

我正在使用 py2exe 来获取可执行文件，它会将一些 DLL 与 exe 文件一起放置。

从 exe 的目录中删除一些 dll 是使该应用程序在 XP 中运行并继续在其他系统中运行的唯一方法：

[“POWRPROF.dll”、“IPHLPAPI.DLL”、“USP10.DLL”、“DNSAPI.DLL”]

还将“Microsoft.VC90.CRT”目录与 exe 文件一起分发，其中包含清单和 DLL 文件。

我希望这对某人有用，因为我花了几个星期才弄清楚。

（我知道 OP 没有使用 python，但错误是一样的）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T13:24:36.987

您的程序具有在 Windows XP 上无法满足的依赖项。您可以尝试使用 Dependency Walker 来识别它，或者您可以检查已知的限制。例如，Visual Studio 2012 不支持 Windows XP，直到更新 1 和构建选项更改 - 你正在使用什么？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-06T15:19:16.863

问题可能是因为您可能在 Win XP 上使用了损坏的 DirectX 版本。它也发生在我身上，因为我随机下载了一个损坏并导致这些的 DirectX 设置。我所做的解决方案是我从 C:Windows/System32 中删除了所有与 directX 有关的文件，从添加/删除程序中删除了 directX，并从 regedit 中完全删除了整个注册表项。`Local_machine/software/microsoft/DirectX...`然后我在网上找到了 DirectX 9 的原始值和键，并制作了一个新的注册表键。

DirectX 文件夹曾经完全并且最初回到 regedit，它在 dxdiag 中显示安装了 DirectX。

如果您在游戏中遇到崩溃，建议您下载.NET Framework 3.5 Service Pack 1，然后在您的PC上进行备份（如果您没有像我一样使用nVIDIA显卡，我使用ATI Radeon）并下载nVIDIA PhysX 系统软件驱动，看看能不能用。（只有在使用 Win XP 时，您才需要 nVIDIA phydX 驱动程序才能运行此游戏而不会崩溃，在 Win 7 上不应该遇到此问题）如果驱动程序搞砸了您的 PC（nVIDIA PhysX 之一），您将能够恢复您的旧 PC在这些驱动程序之前运行（如果您对 PC 进行了备份，我建议使用 Acronis Boot 进行备份），这意味着如果您无法在您的设备上安装 nVIDIA PhysX，例如打开 ATI 显卡，您将完全不走运Windows XP，因为没有 nvidia physx，在 Win XP 上，Metro 不会运行，而在 Win 7 / Vista / 8 上应该。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-04T20:18:53.727

我刚刚安装了最新的 VS 2017 并遇到了同样的问题。我用谷歌搜索了所有内容，但找不到任何解决方案，所以我自己定义了它：

```
extern "C" int _except_handler4_common() {
    return 0; // whatever, I don't know what this is
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-07-11T08:28:26.473

在过去的 8 个小时里，我用这个完全相同的错误将我的代码分开，结果证明这是我的应用程序中的一行代码，特别是检查操作系统中的 IPv6 支持：

```
conf.IPv6Disabled = !(Socket.OSSupportsIPv6); 
```

*   我评论了那条线，瞧，错误消失了。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-03-28T15:33:32.987

这个问题持续存在于每个需要 windows 7 或 8 或 vista 但运行到 windows xp 的软件或游戏中。因此，如果您想恢复或启动您的程序，您需要根据程序的系统要求将您的 windows 升级到 7 或 8 或 vista。希望对您有帮助 谢谢

# bash - 字符串拆分输出不存储到单独的变量中

> ID：14750118
> 
> 赞同：-1
> 
> 时间：2013-02-07T11:33:24.670
> 
> 标签：bash, shell, sh

```
#/bin/sh
INPUT_ETH="eth0,eth1,eth2,eth3"
i=0
for eth in $(echo $INPUT_ETH | tr "," "\n")
do

 eth_$i=$eth

 echo "$eth_$i"

i=`expr $i + 1`

if [ $eth_$i = $BLA_BLA]

  then;
       ..............
  fi
      done 
```

*****sh split.sh* *******

 **split.sh：eth_0：找不到命令

split.sh：eth_1：找不到命令

split.sh：eth_2：找不到命令

split.sh：eth_3：找不到命令

最终输出应为 .. 在变量“eth_0”中，字符串值应为“eth0”，与 eth_1....eth_2 等..等...之后我想在此变量 eth_0、eth_1 等上进行循环

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:33:56.517

这是 William Pursell 答案的扩展，如果您实际使用`bash`并且不限于`sh`：

```
#!/bin/bash

INPUT_ETH=(eth0 eth1 eth2 eth3)
for eth in ${INPUT_ETH[@]}
do
    echo "$eth"

    if [[ $eth = $BLA_BLA ]]
    then;
       ..............
    fi
done 
```

使用一个真实的数组，不要费心用动态变量名来模拟它们。

如果你真的必须，`bash`还提供`declare`命令，这比`eval`因为它不能执行任意代码更安全：它只是执行参数扩展并设置变量的值：

```
declare "eth_$i=$eth" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:42:08.193

赋值中不能有空格，也不能在名称中使用没有 的变量`eval`：

```
eth_$i = $eth 
```

必须写成：

```
eval eth_$i=$eth 
```

请参阅[Bash 脚本变量声明 - 找不到命令](https://stackoverflow.com/questions/2268104/basic-bash-script-variable-declaration-command-not-found/2268117#2268117)

至于第二个问题，你可以这样做：

```
if eval test $eth_$i = blah; then 
```

或者（你需要更多的空格）：

```
if eval [ $eth_$i = blah ]; then 
```

顺便说一句，chepner 和 glenn jackman 都对使用数组是正确的。我会更进一步说你可能根本不应该这样做。任何时候您想访问正在构建的这些变量，只需迭代原始字符串即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T13:55:58.750

假设 bash：

将字符串拆分为数组

```
INPUT_ETH="eth0,eth1,eth2,eth3"
IFS=, read -a eth <<< "$INPUT_ETH"
for (( i=0; i<${#eth[@]}; i++ )); do echo "$i - ${eth[$i]}"; done 
```

输出

```
0 - eth0
1 - eth1
2 - eth2
3 - eth3 
```

要创建动态变量名称，请使用`declare`

```
declare eth_$i=$eth 
```

但是使用动态变量名往往会让你的生活更加困难。使用数组，这是他们擅长的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T18:32:31.807

正如其他人所说，只需循环列表即可。

一种老式的方法是使用`IFS`.

```
#/bin/sh
INPUT_ETH="eth0,eth1,eth2,eth3"
OFS=$IFS IFS=,
set -- $INPUT_ETH
IFS=$OFS
BLA_BLA=eth2
for eth in $*; do
    if [ $eth = $BLA_BLA ] ; then
        echo "$eth OK - now work."
    else
        echo "$eth ignored"
    fi
done 
```

输出：

```
eth0 ignored
eth1 ignored
eth2 OK - now work.
eth3 ignored 
```**

# c# - 如何在运行时操作用户定义类的属性？

> ID：14750119
> 
> 赞同：0
> 
> 时间：2013-02-07T11:33:31.480
> 
> 标签：c#, reflection, properties, helpermethods

我有一个巨大的**用户定义**类，其中包含很多属性，其中一些必须设置为某个值。

更具体地说，该**用户定义类中所有****字符串**类型的**公共属性**必须在执行结束时*“清空” 。*

 *****因此，我一一访问了所有公共属性（例如 300 个属性），并为它们分配了我的 300 行代码。我做了什么来解决这个问题，做了我需要的，但当然没有让我满意。

所以我决定在 C# 中编写一个**Helper Method**（作为*Extension Method*），它遍历对象实例的属性并动态访问/操作它们。我在这里看到了一些关于迭代属性的类似问题，但到目前为止还没有看到任何关于**更改属性值的内容。**这是我尝试过的：

```
public static void SetDefaultStringValues(this Object myObject)
{
    PropertyInfo[] aryProperties = entityObject.GetType().GetProperties();

    foreach (object property in aryProperties)
    {
        if (property is String) 
        {
            //property = String.Empty;
        }
    }
} 
```

评论部分必须是我设置变量的那一行，但这并不是一个真正的成功案例：）我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:35:03.163

使用 PropertyInfo.SetValue 方法，更多内容在[这里](http://msdn.microsoft.com/pl-pl/library/system.reflection.propertyinfo.setvalue.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:35:22.557

您可以使用`PropertyDescriptor`of`System.ComponentModel`进行惰性编码。假设您要迭代*公共实例*方法（不是静态方法），您可以尝试以下示例：

**测试** *类*：

```
public class TestClass
{
    private int mIntMemeber = 0;                    // # to test int type   
    private string mStringMember = "abc";           // # to test string type (initialized)
    private string mNullStringMember = null;        // # to test string type (null)

    private static string mStaticNullStringMember;  // # to test string type (static)

    // # Defining properties for each member
    public int IntMember                            
    {
        get { return mIntMemeber; }
        set { mIntMemeber = value; }                
    }

    public string StringMember                      
    {
        get { return mStringMember; }
        set { mStringMember = value; }
    }

    public string NullStringMember
    {
        get { return mNullStringMember; }
        set { mNullStringMember = value; }
    }

    public static string StaticNullStringMember
    {
        get { return mStaticNullStringMember; }
        set { mStaticNullStringMember = value; }
    }
} 
```

**SetDefaultStringValues()** *扩展方法*：

```
public static string SetDefaultStringValues(this TestClass testClass)   
{
    StringBuilder returnLogBuilder = new StringBuilder();
    // # Get all properties of testClass instance
    PropertyDescriptorCollection propDescCollection = TypeDescriptor.GetProperties(testClass);
    // # Iterate over the property collection
    foreach (PropertyDescriptor property in propDescCollection)
    {
        string name = property.Name;
        Type t = property.PropertyType; // # Get property type
        object value = property.GetValue(testClass); // # Get value of the property (value that member variable holds)

        if (t == typeof(string)) // # If type of propery is string and value is null
        {
            property.SetValue(testClass, String.Empty); // # Set value of the property (set member variable)
            value = String.Empty; // # <-- To prevent NullReferenceException when printing out
        }

        returnLogBuilder.AppendLine("*****\nName:\t{0}\nType:\t{1}\nValue:\t{2}", name, t.ToString(), value.ToString());
    }

    returnLogBuilder.AppendLine("*****");
    return returnLogBuilder.toString();
} 
```

您还可以检查循环中的**值**是否为*空。*`SetDefaultStringValues`方法参数可以是任何*对象*实例。您可以将其更改为`SetDefaultStringValues(this object o)`并将其用作定义的类实例的*扩展方法*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T11:39:41.023

您需要不同的语法来检查属性类型；此外，您应该检查该属性是否具有公共设置器。

```
if (property.PropertyType == typeof(string) && property.GetSetMethod() != null)
    property.SetValue(entityObject, ""); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T11:48:13.137

```
 foreach (PropertyInfo property in aryProperties)
    {
        if (property.PropertyType == typeof(string) && property.CanWrite) 
        {
            property.SetValue(myObject, "", null);
        }
    } 
```*****

# php - 使用jquery删除表行

> ID：14750120
> 
> 赞同：-2
> 
> 时间：2013-02-07T11:33:36.543
> 
> 标签：php, jquery

我制作了这段代码来删除表格行：

```
jQuery('tr#rowAttend1').remove(); 
```

HTML：

三行具有相同的 id 。例如 ：

```
<tr  id="rowAttend1" ><td>ssss</td></tr>
<tr  id="rowAttend1" ><td>ddddd</td></tr>
<tr  id="rowAttend1" ><td>ccccc</td></tr> 
```

但我希望将这三个都删除它在除 ie7 之外的所有浏览器中都可以正常工作？有谁能够帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:37:17.990

```
<tr  id="rowAttend1" ><td>ssss</td></tr>
<tr  id="rowAttend2" ><td>ddddd</td></tr>
<tr  id="rowAttend3" ><td>ccccc</td></tr>

$('#rowAttend1,#rowAttend2,#rowAttend3').remove(); 
```

将ID更改为唯一ID，然后您可以删除表格行

类示例

```
<tr  class="rowAttend1" ><td>ssss</td></tr>
<tr  class="rowAttend1" ><td>ddddd</td></tr>
<tr  class="rowAttend1" ><td>ccccc</td></tr>

$('.rowAttend1').remove(); 
```

这将删除该类的所有元素`rowAttend`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T11:37:37.243

您的 ID 不是唯一的，请使用不同的 ID，

```
<tr  id="rowAttend1" ><td>ssss</td></tr>
<tr  id="rowAttend2" ><td>ddddd</td></tr>
<tr  id="rowAttend3" ><td>ccccc</td></tr> 
```

（或者）

将特定的 eventcatch(e) (ie) (this) 传递给该 javascript 函数并从中删除 this 之类的，

```
$(this).remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T12:15:53.650

如果你愿意，可以尝试一些不同的方法

```
<table>
    <tr><td>one</td> <td><button class="removeTR"> one</button></td> </tr>    
    <tr><td>two</td> <td><button class="removeTR"> two</button></td> </tr>    
    <tr><td>three</td> <td><button class="removeTR">three</button></td> </tr>    
    <tr><td>four</td> <td><button class="removeTR"> four</button></td> </tr>    
   <tr><td>five</td> <td><button class="removeTR"> five</button></td> </tr>    
</table>

$("tr .removeTR").live('click', function() {
    $(this).parent().parent().remove();
}); 
```

或者一些可以很好地平滑行删除的东西

```
$("tr .removeTR").live('click', function() {
    $(this).parent().parent().fadeOut(1000);
    setTimeout(function(){$(this).parent().parent().remove();}, 1000);
}); 
```

# jquery - jquery菜单项选择在移动设备上不起作用

> ID：14750121
> 
> 赞同：0
> 
> 时间：2013-02-07T11:33:40.410
> 
> 标签：jquery, mobile, jquery-selectors

当从下拉菜单中选择一个菜单项时，一个适当的图像被加载到一个 div 中。在桌面上工作，但在安卓手机上选择时却不行。实际上它在第二次尝试时确实有效。是否有适用于两种操作系统的选择器？

我用来检测菜单选择的 jQuery：

```
$("#template_select").mouseup(function(){
//change the image
}); 
```

再次感谢您抽出宝贵的时间，非常感谢，托德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:39:26.210

`mouseup`类似于悬停。

问题是移动智能手机没有`hover`事件。

最快的改变方法是`click`在移动设备上使用，如下所示：

```
if( isMobile == true ) {
  $("#template_select").click(function(){
    //change the image
  });
} else {
  $("#template_select").mouseup(function(){
    //change the image
  });
} 
```

**编辑**

检查您的浏览器是否是移动设备的最简单方法是使用这样的 javascript（[链接到问题和答案](https://stackoverflow.com/a/3540295/839049)）：

```
var isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T11:39:27.323

您在智能手机上，没有“点击”或“鼠标”，请尝试像 jquery-mobile（[http://jquerymobile.com/](http://jquerymobile.com/)）或我找到的（[http://touchpunch.furf.com ）这样的移动库/](http://touchpunch.furf.com/) )

# security - 注销后重定向取决于用户 symfony 2 和 FOSUserBundle

> ID：14750123
> 
> 赞同：1
> 
> 时间：2013-02-07T11:33:43.973
> 
> 标签：security, symfony-2.1, fosuserbundle

在用户会话过期（或注销）后，我想根据用户的权限将他重定向到一个页面。

我正在使用 Symfony 2.1.8-DEV 和 FOSUserBundle。

我认为必须有一个事件来附加一个监听器，但我没有找到一个合适的监听器，无论是在 symfonys 核心还是 FOSUserBundle 中。

您知道如何实现这一目标吗？甚至可能吗？

从理论上讲，必须有一个用户退出的语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:32:00.680

实际上这与 fosuserbundle 无关。您需要注册一个事件处理程序来侦听请求并检查会话是否已过期。

**如何注册事件监听器和订阅者** [http://symfony.com/doc/current/cookbook/doctrine/event_listeners_subscribers.html](http://symfony.com/doc/current/cookbook/doctrine/event_listeners_subscribers.html)

这个问题已经在这里问过：[Catch session timeout Symfony2](https://stackoverflow.com/questions/10846970/catch-session-timeout-symfony2)

# jqgrid - jqGrid:: 在编辑另一行后单击每一行，保存内容但不恢复已编辑的行

> ID：14750125
> 
> 赞同：0
> 
> 时间：2013-02-07T11:33:57.773
> 
> 标签：jqgrid, save, inline, edit, restore

目的是在一行中编辑文本区域并单击另一行后，应保存第一个并恢复该行。该代码在保存记录之前有效，但在保存后不能恢复编辑的行。请帮我纠正这个问题。

```
 <? 
if(isset($_GET)){
    $startDate = $_GET['start_date'];
    $endDate   = $_GET['end_date'];
    $type      = $_GET['type'];
}
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" media="screen" href="../js/jqgrid/css/ui-lightness/jquery-ui-1.9.2.custom.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="../js/jqgrid/css/ui.jqgrid.css" />
    <link rel="stylesheet" type="text/css" href="../js/powertip/jquery.powertip.css" />

    <script type="text/javascript" src="../js/jqgrid/js/jquery1.8.3.js"></script>
    <script type="text/javascript" src="../js/jqgrid/js/i18n/grid.locale-en.js"></script>
    <script type="text/javascript" src="../js/powertip/jquery.powertip-1.1.0.min.js"></script>
    <script type="text/javascript">
        jQuery.jgrid.no_legacy_api = true;
    </script>
    <script src="../js/jqgrid/js/jquery.jqGrid.min.js" type="text/javascript"></script>
    <style>
        .ratingDetails{
            font-family:Arial;font-size:12px;color:#FFF;padding-left:2px;
        }
    </style>
</head>
<body>
    <table id="rowed2"></table>
    <div id="prowed2"></div>
    <script>
        jQuery(document).ready(function(){ 
            var lastSel;
            jQuery("#rowed2").jqGrid({ 
                url:'feedbacks_bookings_rated_pagination.php?start_date=<?=$startDate?>&end_date=<?=$endDate?>&type=<?=$type?>',

                datatype: "json",
                height:"auto",
                colNames:['Booking<br>Id','City','Customer name','Trip dates','Local Office','Rating','Action Taken','Status','Action'],

                colModel:[
                    {name:'booking_id',index:'booking_id', width:45,align:"center",hidden:false,key: true},// key: true - to get the id value in POST
                    {name:'pick_city',index:'pick_city', width:90,align:"left"},
                    {name:'actual_name',index:'add_driver_number', width:130,align:"left",sortable:true},
                    {name:'tripdates',index:'tripdates', width:80,align:"center",sortable:false},
                    {name:'office_name',index:'office_name', width:150,align:"left",sortable:true},     
                    {name:'rating_status',index:'rating_status', width:70,align:"center",sortable:true,title: false},
                    {name:'action_taken',index:'action_taken', width:220,align:"left",sortable:false,editable:true,edittype:'textarea',editoptions:{rows:"3",cols:"35"}},
                    {name:'img_action_status',index:'img_action_status', width:40,align:"center",sortable:true},    
                    {name:'act',index:'act',width:100,align:'center',sortable:false}        
                ],
                rowNum:15, 
                rowList:[15,25,50], 
                pager: '#prowed2', 
                sortname: 'driver_name', 
                viewrecords: true, 
                sortorder: "asc", 
                subGrid : true, 
                subGridUrl: 'feedbacks_bookings_rated_pagination.php?booking=424519', 
                subGridModel: [{
                        name:['Booked on','Trip Type/ Amount','Driver Details','Local Office Phone','Essential Feedbacks','Other Feedbacks'],
                        width: [90,90,130,100,160,200]}
                ],

                onSelectRow: 
                    function(id){ 
                        //alert(lastSel+"-hi-"+id);
                        if(id && id!==lastSel){ 
                            if (typeof lastSel !== "undefined") {
                                jQuery("#rowed2").jqGrid('saveRow',lastSel);
                                jQuery("#rowed2").jqGrid('restoreRow',lastSel);
                                //jQuery("#rowed2").trigger("reloadGrid"); 
                            }
                            lastSel = id;
                         } 
                        jQuery(this).jqGrid('resetSelection'); 
                        jQuery(this).editRow(id, true); 
                    },      
                editurl: "feedbacks_bookings_rated_pagination.php", 
                caption:"Edit Feedback Details",
            }); 

            // icons in pagination frame bottom
            jQuery("#rowed2").jqGrid('navGrid','#prowed2',{ add: false, edit: true,save: true, del: false, reload: true});

            jQuery.fn.editRow = function(param) {
                var rowid      = param;
                var booking_id = jQuery("#rowed2").jqGrid ('getCell', param, 'booking_id');

                jQuery("#rowed2").jqGrid('editRow',rowid, { 
                        keys : true, 
                        oneditfunc: function() {
                        }
                    });
            };

            jQuery.fn.saveRow = function(param) {
                var rowid = param;
                jQuery("#rowed2").jqGrid('saveRow',rowid, { 
                        successfunc: function(response) {
                                        //obj = eval('(' + response.responseText + ')');
                                        //$.jgrid.info_dialog('Status','<div class="ui-state-successr"><br>'+obj.responseText +'<br></div>', $.jgrid.edit.bClose,{buttonalign:'center'}); 
                                        return true; 
                                      },
                        url : "feedbacks_bookings_rated_pagination.php",
                        mtype : "POST",
                    });
            };

            jQuery.fn.restoreRow = function(param) {
                var rowid = param;
                alert("rstore-"+rowid);
                jQuery("#rowed2").jqGrid('restoreRow',rowid, { 
                    afterrestorefunc : function( response ) {
                        alert("aaaa");
                        obj = eval('(' + response.responseText + ')');
                        $.jgrid.info_dialog('Status','<div class="ui-state-successr"><br>'+obj.responseText +'<br></div>', $.jgrid.edit.bClose,{buttonalign:'center'}); 
                        return true; 
                    }
                });
            };

        })

            function closeAction(bkId){
                if(confirm("Are you sure to close the action?")){
                    //Ok button pressed...
                    $.post('feedbacks_bookings_rated_pagination.php?action=close',{booking_id: bkId},
                        function(response){
                            alert(response.responseText); 
                            $("#rowed2").trigger("reloadGrid"); 
                            return true;
                        },
                        "json"
                    );
                }
            }
            // Function to display rating crieteria values as a tooltip on mouseover of Rating caption
            function showRatingDetailsToolTip(id) {
                $('#rating'+id).data('powertiptarget', 'tooltip'+id);
                $('#rating'+id).powerTip({placement: 'e',smartPlacement: true,mouseOnToPopup: true});

            }

    </script>

</body>
</html> 
```

再一次..在下面给出了一个更正的代码..这里也是，上一行在单击下一行时没有从编辑模式返回。你能告诉我问题吗？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" media="screen" href="../js/jqgrid/css/ui-lightness/jquery-ui-1.9.2.custom.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="../js/jqgrid/css/ui.jqgrid.css" />

    <script type="text/javascript" src="../js/jqgrid/js/jquery1.8.3.js"></script>
    <script type="text/javascript" src="../js/jqgrid/js/i18n/grid.locale-en.js"></script>
    <script type="text/javascript">
        jQuery.jgrid.no_legacy_api = true;
    </script>
    <script src="../js/jqgrid/js/jquery.jqGrid.min.js" type="text/javascript"></script>

</head>
<body>
    <table id="rowed2"></table>
    <div id="prowed2"></div>
    <script>
        jQuery(document).ready(function(){ 
            var lastSel;
            jQuery("#rowed2").jqGrid({ 
                url:'feedbacks_bookings_rated_pagination.php?start_date=<?=$startDate?>&end_date=<?=$endDate?>&type=<?=$type?>', 
                datatype: "json",
                height:"auto",
                colNames:['Booking<br>Id','City','Customer name','Trip dates','Local Office','Rating','Action Taken','Status','Action'],
                colModel:[
                    {name:'booking_id',index:'booking_id', width:45,align:"center",hidden:false,key: true},// key: true - to get the id value in POST
                    {name:'pick_city',index:'pick_city', width:90,align:"left"},
                    {name:'actual_name',index:'add_driver_number', width:130,align:"left",sortable:true,editable:true,edittype:'text'},
                    {name:'tripdates',index:'tripdates', width:80,align:"center",sortable:false},
                    {name:'office_name',index:'office_name', width:150,align:"left",sortable:true},     
                    {name:'rating_status',index:'rating_status', width:70,align:"center",sortable:true,title: false},
                    {name:'action_taken',index:'action_taken', width:220,align:"left",sortable:false,editable:true,edittype:'textarea',editoptions:{rows:"3",cols:"35"}},
                    {name:'img_action_status',index:'img_action_status', width:40,align:"center",sortable:true},    
                    {name:'act',index:'act',width:100,align:'center',sortable:false}        
                ],
                rowNum:15, 
                rowList:[15,25,50], 
                pager: '#prowed2', 
                sortname: 'booking_id', 
                viewrecords: true, 
                sortorder: "asc", 

                onSelectRow: 
                    function(id){ 
                        if(id && id!==lastSel){ 
                            if (typeof lastSel !== "undefined") {
                                jQuery("#rowed2").jqGrid('saveRow',lastSel,{url : "feedbacks_bookings_rated_pagination.php",mtype : "POST"});
                                jQuery(this).jqGrid('editRow',lastSel, false);
                            }
                            lastSel = id;
                         } 
                        jQuery(this).jqGrid('editRow',id, true);
                    }, 

                editurl: "feedbacks_bookings_rated_pagination.php", 
                caption:"Edit Feedback Details",
            }); 

            // icons in pagination frame bottom
            jQuery("#rowed2").jqGrid('navGrid','#prowed2',{ add: false, edit: false,save: false, del: false, reload: true});
        })
    </script>
</body>
</html> 
```

======================

我终于找到了真正的问题。

它不是“action_taken”字段的内容，而是前一个字段。我在实际内容下的隐藏 DIV 中放置了一个表格，用于工具提示内容。

发生的情况是，在编辑下一列中的 action_taken 字段并收到服务器响应后，将“action_taken”字段的编辑内容设置为上一列中该表的第一个 TD 的内容和标题。此外，已编辑的列不会从编辑模式返回。如果我从上一列中删除表格，一切正常。我尝试为表格使用不同的 id/style 类，但没有改变。可能是什么问题呢？上一列中导致问题的表结构如下所示。

```
<table id='ratingdata32380' width='189' border='0' cellpadding='0' cellspacing='0' bordercolor='#000000' bgcolor='#4f9de2'>
<tr><td align='left' valign='middle' class='ratingDetails'>Was On Time?</td><td align='center' valign='middle' class='ratingDetails'>aaaa</td></tr>
</table> 
```

“ratingDetails”类只是字体定义。.ratingDetails{font-family:Arial;font-size:12px;color:#FFF;padding-left:2px;}

任何想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:53:03.687

您应该决定哪种行为应该有您的网格。您想保存先前编辑行中的数据，那么您应该调用`saveRow`. 如果您想放弃当前的更改并恢复之前的更改，您应该调用`restoreRow`. 像你目前在回调内部那样调用`restoreRow` **after** 是没有意义的。`saveRow``onSelectRow`

因此，如果我正确理解您想要实现的内容，您*应该*`saveRow`在调用`restoreRow`.

# php - 修改php中数据的显示格式

> ID：14750141
> 
> 赞同：0
> 
> 时间：2013-02-07T11:34:43.470
> 
> 标签：php, csv

我有一个 csv 文件，其中包含 3 行和 3 列（列的名称是：名字、姓氏和地址

我开发了一个 php 脚本，它显示了这个文件中的所有数据

```
<?php
ini_set('display_errors',1);
 error_reporting(E_ALL);

//Fichier CSV à parser

$fichier = '/home/test.csv';
//On vérifie que le fichier existe bien :)

if (file_exists($fichier))
{
//On l'ouvre en mode "read only"
$fp = fopen($fichier, 'r');
//Tant que l'on n'a pas finit de lire le fichier
while (!feof($fp)){
//On lit les 4096 caractères de la ligne
$ligne = fgets($fp,4096);
/* On met dans un tableau toutes les données, séparées par des points virgules */
$liste = explode(';',$ligne);
/* On crée une colonne contenant les données pour chacune d'entre elles en parsant le tableau */
foreach($liste as $element)
{

   if (trim($element)!=null)
   {
echo $element;
echo "</br>";

   }

}

}

//On ferme le fichier

fclose($fp);
}
else
echo "Fichier introuvable !";

?> 
```

我的目标是以这种格式显示结果：

名字 : ... 姓氏 ... 地址 ...

名字 : ... 姓氏 ... 地址 ...

名字 : ... 姓氏 ... 地址 ...

我认为我应该在我的代码中修改这部分：

```
foreach($liste as $element)
    {

       if (trim($element)!=null)
       {
    echo $element;
    echo "</br>";

       }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:00:59.620

我尝试这样的事情。也许它会帮助你。

```
while (!feof($fp))
{
    $ligne = fgets($fp,4096);
    $liste = explode(';',$ligne);

    if($liste[0] != "firstname" && $liste[1] != "lastname" && $liste[2] != "address")
    {
        echo " <strong>firstname</strong> : " . $liste[0];
        echo " <strong>lastname</strong> : " .  $liste[1];
        echo " <strong>address</strong> : " .  $liste[2];
        echo "<br/>";
    }   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:41:43.307

尝试这个

```
 <?php
    ini_set('display_errors',1);
     error_reporting(E_ALL);

    //Fichier CSV à parser

    $fichier = '/home/test.csv';
    //On vérifie que le fichier existe bien :)

    if (file_exists($fichier))
    {
    //On l'ouvre en mode "read only"
    $fp = fopen($fichier, 'r');
    //Tant que l'on n'a pas finit de lire le fichier
    while (!feof($fp)){
    //On lit les 4096 caractères de la ligne
    $ligne = fgets($fp,4096);
    /* On met dans un tableau toutes les données, séparées par des points virgules */
    $liste = explode(';',$ligne);
    /* On crée une colonne contenant les données pour chacune d'entre elles en parsant le tableau */
    if(trim($liste[0])!=null)
    echo " firstname " . $liste[0];
    if(trim($liste[1])!=null)
    echo " lastname" .  $liste[1];
   if(trim($liste[2])!=null)
    echo " address" .  $liste[2];
    echo "<br/>";
       }

    } 
```

# iphone - iphone5的问题

> ID：14750143
> 
> 赞同：0
> 
> 时间：2013-02-07T11:34:47.640
> 
> 标签：iphone, ios6

新的 iPhone 5 显示屏具有新的纵横比和新的分辨率（1136 x 640 像素）。

开发新的应用程序或将现有的应用程序转换到新的屏幕尺寸需要什么？我已经添加了适用于 4 英寸视网膜显示器的启动画面。但是我的应用程序屏幕的顶部和底部仍然有 88 像素的间隙。

注意：我已启用自动布局。但是我的类中的一些组件是由 XIB 创建的，其中一些是通过在实现文件中编写代码来创建的。

**如果我启用自动布局，那么我应该如何调整以编程方式创建的对象的大小**请专注于粗线并为我提供解决方案。我的 UI 非常复杂，这就是为什么我不会为不同的屏幕尺寸选择两个 XIB 的概念。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:42:28.003

if ([UIScreen mainScreen].bounds.size.height >= 568) { // rotationView.frame = CGRectMake(0, 0, rotationViewWidth, rotationViewHeight+88); }

将此代码添加到您要匹配新iPhone5方面的代码中，然后需要修改rotationView。rotationViewHeight加88，和y修改类似

控制器：AViewController *aViewContrller = [[AViewController alloc] initWithNibName:(iPhone5?@"AViewController-5":@"AViewController") bundle:nil];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:45:13.823

如果您启用**Auto Layout**，那么对于您在代码中创建的视图 - 您可以将**NSLayoutConstraints**添加到它们（然后确保将*-translatesAutoresizingMaskIntoConstraints*设置为 NO）。

# php - 在 2 个子域之间使用 PHP 类

> ID：14750145
> 
> 赞同：0
> 
> 时间：2013-02-07T11:34:50.880
> 
> 标签：php, class, subdomain

我想在另一个子域中使用的子域上有一个 PHP 类。我可以将它包含在第二个子域中，但是当我调用该类时，出现“找不到类”错误。

在子域 A ( [http://a.mydomain.com](http://a.mydomain.com) ) 上，文件：MyClass.php：

```
class MyClass {
  public function getTest() {
    return 'Hello World !';
  }
} 
```

在子域 B ( [http://d.mydomain.com](http://d.mydomain.com) ) 上：

```
include 'http://a.mydomain.com/MyClass.php';

$class = new MyClass();
echo $class->getTest(); 
```

显示的错误：致命错误：*在第 3 行的 /var/www/subdomainb/index.php 中找不到类“myClass”*

任何人都有这样做的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:42:13.730

您必须使用它们的路径而不是 URL 来包含文件。我不确定您的文件结构，但大概是这样的：

```
include '/var/www/subdomaina/MyClass.php'; 
```

还可以考虑使用[命名空间](http://php.net/manual/en/language.namespaces.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:47:34.193

请参阅以下问题：

*   [远程PHP的安全方式包括？](https://stackoverflow.com/questions/5172637/secure-way-of-remote-php-include)
*   [在 PHP 中包含一个远程文件](https://stackoverflow.com/questions/1158348/including-a-remote-file-in-php)
*   [我应该包括本地还是远程？](https://stackoverflow.com/questions/2714397/should-i-include-locally-or-remotely)

您的问题在 StackOverflow 上有很多答案。

它归结为：*永远不要* `include`来自远程服务器的文件。

# visual-studio - 在团队成员之间分发自定义 StyleCop 规则

> ID：14750150
> 
> 赞同：9
> 
> 时间：2013-02-07T11:35:12.033
> 
> 标签：visual-studio, resharper, stylecop

我创建了许多自定义 StyleCop 规则，其中包含我们开发团队商定的一些特殊样式要求。

StyleCop SDK 文档 ( [http://stylecop.codeplex.com/downloads/get/324789](http://stylecop.codeplex.com/downloads/get/324789) ) 指出：

> 只需将包含规则的程序集复制到包含 StyleCop.dll 的目录或该目录下的任何子目录，即可安装自定义 StyleCop 规则。

为此，在使用 StyleCop for ReSharper 时需要关闭 Visual Studio。

我希望不断引入新规则和错误修正。除了给每个人写一封邮件，要求他们关闭 Visual Studio 并将其复制到现有文件之外，是否有一种在团队中分发包含自定义规则的新版本 DLL 文件的好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T14:01:31.680

将[Chocolatey](http://chocolatey.org/)与 NuGet 一起使用。在网络共享上创建本地 Chocolatey NuGet 存储库，然后可以通过包安装程序管理更新。

# authentication - 当一个用户想冒充另一个用户时如何使用 SAML

> ID：14750152
> 
> 赞同：1
> 
> 时间：2013-02-07T11:35:15.150
> 
> 标签：authentication, impersonation, single-sign-on, saml-2.0

我有以下情况：

UserA 有权访问 ApplicationA。

UserB 有权访问 ApplicationB。ApplicationA 和 ApplicationB 都使用 ApplicationI 作为身份提供者（自定义实现）。

在 ApplicationA 中登录时，UserA 想以 UserB 的身份单点登录到 ApplicationB（假设 UserB 已将此类权限授予 UserA）。

ApplicationB 应该知道 UserA 以 UserB 的身份登录。

在这种情况下如何使用 SAML 2.0？到目前为止，我在网上获得的有关 SAML 的任何示例都是针对单个用户在多个站点上以自己的身份尝试单点登录的，而不是针对在另一个站点上冒充另一个用户的用户。具体来说，我试图了解在这种情况下如何将 SAML Web SSO 配置文件与 HttpBinding 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:55:13.203

模拟并不是一个闻所未闻的要求。UserA 和 UserB 身份信息都可以在 SAML 响应中传递，但 AppA 和 AppB 可能有一个共同的 AuthZ 模型，这样您就不会遇到一些恶意活动。

因此，例如，AppA 将对 UserA 进行身份验证。当 UserA 想要 SSO 到 AppB 并模拟 UserB 时，AppA 将为 UserA 生成一个响应，其中 UserB 的身份在“ImpersonateUser=UserB”的属性中传递。UserA 将是响应的主题。当 AppB（充当 SP）验证响应时，它需要确保允许 UserA 通过内部授权映射模拟 UserB。或者，AppB 可以简单地相信 AppA 已经验证 UserA 可以模拟 UserB 并适当地创建会话。但是，这取决于 AppA 和 AppB 之间的信任关系。

HTH，伊恩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T12:32:50.373

在对 Ian 的回复中回答您的问题，使用 AuthnRequest 通知 IDP 您想要模拟另一个用户的一种方法是使用 AuthnRequest 的 Extensions 元素。

# objective-c - 从 TextView 到 NSDate 的时间

> ID：14750153
> 
> 赞同：0
> 
> 时间：2013-02-07T11:35:15.803
> 
> 标签：objective-c, datetime, nsdateformatter

我正在构建一个 iPhone 应用程序来花费时间：一辆车必须在给定的时间点到达，所以如果汽车迟早要获得积分。

我需要尽可能获得最精确的时间，所以我想使用毫秒，但结果令人失望。

时间是在 TextField 上输入的，比如说**12:17:22**，代码如下：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
[dateFormatter setTimeZone:[NSTimeZone localTimeZone]];
 [dateFormatter setDateFormat:@"HH:mm:ss"];

timeLegStart = [NSDate new];  
timeLegStart = [dateFormatter dateFromString:setStartTime.text];

NSLog(@"timeLegStart = %@",timeLegStart); 
```

输出是**1970-01-01 11:17:22 +0000**，我希望它是 12:17:22:000

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:10:35.110

像这样设置您的 NSDateFormatter 的属性（替换为您的时区信息）：

```
NSDateFormatter * dateFormatter = [[NSDateFormatter alloc] init];
NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:@"pt_BR"];
[dateFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"America/Sao_Paulo"]];
[dateFormatter setDateFormat:@"HH':'mm':'ss' 'z"];
[dateFormatter setLocale:locale]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:38:12.727

这里的问题是 NSDate 包含日期和时间，它们不是单独可用的。当您仅提供带有时间规范的输入日期时，它会使用您提供的时间加载日历开始日期值并创建一个日期。因此，这里将日期作为输出。实际上，使用它没有问题。

您可以使用相同的格式化程序来获取检索到的时间：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
[dateFormatter setTimeZone:[NSTimeZone localTimeZone]];
[dateFormatter setDateFormat:@"HH:mm:ss"];
NSDate* timeLegStart = [NSDate new];
timeLegStart = [dateFormatter dateFromString:@"12:12:12"];
NSLog(@"timeLegStart = %@",[dateFormatter stringFromDate:timeLegStart]); 
```

它会给你：

```
timeLegStart = 12:12:12 
```

编辑：在记录 NSDate 时，它​​将仅采用 GMT 格式。由于您将时区设置为本地，因此日期将始终像您得到的那样显示。

```
 NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
    [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
    [dateFormatter setDateFormat:@"HH:mm:ss"];
    NSDate* timeLegStart = [NSDate new];
    timeLegStart = [dateFormatter dateFromString:@"12:12:12"];
    NSLog(@"timeLegStart = %@",timeLegStart); 
```

会给你：

```
 2000-01-01 12:12:12 +0000 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T19:38:48.553

好吧，我是这样整理的：

```
- (void)fijaTiempoInicio
    {
    //getting current day
    NSDateComponents *dateComponents = [[NSCalendar currentCalendar] components:~ NSTimeZoneCalendarUnit fromDate:[NSDate date]];
     [dateComponents setTimeZone:[NSTimeZone timeZoneWithName:@"Europe/Spain"]];
    NSDate *currentDate = [[NSCalendar currentCalendar] dateFromComponents:dateComponents];

    //extracting year, month and day from current date
    NSDateFormatter *df = [[NSDateFormatter alloc]init];
    [df setDateFormat:@"dd"];
    NSString *currentDayString = [NSString stringWithFormat:@"%@",[df stringFromDate:currentDate]];

    [df setDateFormat:@"MM"];
    NSString *currentMonthString = [NSString stringWithFormat:@"%@",[df stringFromDate:currentDate]];

    [df setDateFormat:@"yyyy"];
    NSString *currentYearString = [NSString stringWithFormat:@"%@", [df stringFromDate:currentDate]];

    NSDateFormatter *ft = [[NSDateFormatter alloc]init];

    [ft setTimeZone:[NSTimeZone localTimeZone]];
    [ft setDateFormat:@"yyyy-MM-dd HH:mm:ss"];

    NSString *tempDate = [NSString stringWithFormat:@"%@-%@-%@ %@",currentYearString,currentMonthString,currentDayString,txtTiempoInicioTramo.text];
NSLog(@"tempDate= %@",tempDate);

    startTime = [ft dateFromString:tempDate];
    NSLog(@"startTime= %@",startTime); 
```

然后，另一种方法计算两个 NSDate 之间的差异，这是一个以毫秒为单位的数字 - 一个浮点数

```
- (IBAction)btnCapturarTiempo:(id)sender 
    {

    NSDateFormatter *formatCarTime = [[NSDateFormatter alloc]init];
    [formatCarTime setDateFormat:@"HH:mm:ss"];
    [formatCarTime setTimeZone:[NSTimeZone timeZoneWithName:@"Europe/Madrid"]];

    carTime =  [NSDate date];
    difference = [carTime timeIntervalSinceDate:startTime];
    labelTiempoCoche.text = [NSString stringWithFormat:@"%f",difference]; 
```

# xml - 如何在 XSLT 中使用节点两次？

> ID：14750154
> 
> 赞同：0
> 
> 时间：2013-02-07T11:35:20.470
> 
> 标签：xml, xslt

在我的 XML 中，我有带有标题的章节，我需要从中生成一个目录，以便：

```
<chapter id="1"><title>Chapter 1</title><p>text</p></chapter>
<chapter id="2"><title>Chapter 2</title><p>text</p></chapter> 
```

转换为

```
<!-- Table Of Contents -->
<div class="contents">
  <ul>
    <li><a href="#1">Chapter 1</a></li>
    <li><a href="#2">Chapter 2</a></li>
  </ul>
</div>

<!-- Actual Content -->
<div class="chapter" id="1"><p>text</p></div>
<div class="chapter" id="2"><p>text</p></div> 
```

不幸的是，当我尝试使用`xsl:for-each`来生成目录时，实际的章节似乎从输出中消失了。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T12:34:14.157

这个 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/*">
    <div>
      <div class="contents">
        <ul>
          <xsl:apply-templates select="chapter" mode="contents" />
        </ul>
      </div>

      <xsl:apply-templates select="chapter" />
    </div>
  </xsl:template>

  <xsl:template match="chapter" mode="contents">
    <li>
      <a href="#{@id}">
        <xsl:value-of select="title" />
      </a>
    </li>
  </xsl:template>

  <xsl:template match="chapter">
    <div class="chapter" id="{@id}">
      <xsl:apply-templates select="*" />
    </div>
  </xsl:template>

  <xsl:template match="chapter/title" />
</xsl:stylesheet> 
```

当应用于此输入时：

```
<chapters>
  <chapter id="1">
    <title>Chapter 1</title>
    <p>text</p>
  </chapter>
  <chapter id="2">
    <title>Chapter 2</title>
    <p>text</p>
  </chapter>
</chapters> 
```

将产生：

```
<div>
  <div class="contents">
    <ul>
      <li>
        <a href="#1">Chapter 1</a>
      </li>
      <li>
        <a href="#2">Chapter 2</a>
      </li>
    </ul>
  </div>
  <div class="chapter" id="1">
    <p>text</p>
  </div>
  <div class="chapter" id="2">
    <p>text</p>
  </div>
</div> 
```

如果您可以向我们展示您的 XSLT（我认为提供的 2,410 声望点对您来说是显而易见的），我们可以告诉您您做错了什么。

# c# - 为什么 Azure 表存储操作会静默失败？

> ID：14750158
> 
> 赞同：1
> 
> 时间：2013-02-07T11:35:34.877
> 
> 标签：c#, azure, azure-table-storage

我有一个使用`Microsoft.WindowsAzure.StorageClient`v1.7 构建的工作者角色。在我的开发机器和我的计算模拟器上，应用程序运行良好。但是，当我部署到 Azure 时，表存储操作会静默失败。代码如下 -`BackupResult`类继承自`TableServiceEntity`：

```
Trace.WriteLine("Entering cloud storage method");
CloudTableClient client = storageAccount.CreateCloudTableClient();
Trace.WriteLine("Got the client..."); // Last message received.
client.CreateTableIfNotExist("LastRun");
Trace.WriteLine("Created the table (maybe)...");
TableServiceContext context = client.GetDataServiceContext();
Trace.WriteLine("Got the context...");
BackupResult lastResult = context.CreateQuery<BackupResult>("LastRun").ToList().OrderByDescending(x => x.RunTime).FirstOrDefault();
Trace.WriteLine("Returning the last result. It ran at: " + lastResult.ToString());
return lastResult; 
```

根本没有抛出异常，但是我在标记的消息下方看不到任何跟踪日志，并且我的应用程序的逻辑不会在此方法之外进行。我的本地配置与我的云配置相同。什么可能导致这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:46:16.610

我的通灵调试能力告诉我它并没有失败——只是需要很长时间。该`.ToList()`调用将尝试检索表中的每个实体。您的开发存储表可能没有太多行（几千？），而生产有更多。所以它只需要更长的时间。我认为您还将尝试将所有这些实体保存在内存中，如果您开始使用页面文件，这也可能会导致速度变慢。

`Take(1000)`您可以通过在查询中添加 a 来检验这个假设。显然这不会给你正确的答案，你只是想看看它是否完成。我的 v1.7 技能有点生疏，但我认为应该是这样的：

```
BackupResult lastResult = context.CreateQuery<BackupResult>("LastRun")
.Take(1000) //BEFORE the .ToList() - very important!
.ToList() 
.OrderByDescending(x => x.RunTime) 
.FirstOrDefault(); 
```

如果有限查询确实成功完成，那么实际的解决方案是弄清楚如何快速执行该查询。您要么需要向查询添加一些条件，以减少从表存储返回的结果的大小，要么可能以不同的方式索引您的数据（例如，将 RunTime 合并到 RowKey 中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:18:32.747

您可能需要注意的一些事项：

1.  诊断连接字符串指向云配置文件中的云存储帐户。
2.  确保云存储中的表（LastRun）包含一些数据。

您可以做的一件事（或者您可能已经做过）是让应用程序在模拟器中运行实际上是使用云存储帐户而不是存储模拟器。

# python-3.x - 方法名称中的下划线 [愚蠢的错误]

> ID：14750159
> 
> 赞同：0
> 
> 时间：2013-02-07T11:35:46.477
> 
> 标签：python-3.x, python-3.2

编辑：我的错误 - 在另一个地方有另一个方法名称（带下划线），它的主体只有一个通道。愚蠢的我。请关闭。

我有一个有两个方法的类，每个方法都返回一个简单的字符串。这两种方法之间唯一的细微差别是，一种方法的名称带有下划线，而另一种则没有。但是，带有下划线的那个在调用时不返回字符串。在方法名称中使用下划线似乎遵循[PEP 8 关于方法名称的准则](http://www.python.org/dev/peps/pep-0008/#method-names-and-instance-variables)。

我一直在彻底阅读[有关类的 Python 教程，](http://docs.python.org/2/tutorial/classes.html)但它没有提到行为上的任何差异，具体取决于方法名称中下划线的使用。如果我删除下划线，将返回字符串。

这是什么原因造成的？

这是我的代码：

```
class Board:
    def f(self):
        return 'Hello'
    def print_board(self):
        return 'Hello' 
```

我正在使用 Python 3.2.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:44:27.123

它适用于我的 Python 3.2.1 和 3.3.0：

```
class Board:
    def f(self):
        return 'Hello'
    def print_board(self):
        return 'Hello'

b = Board()
print(b.f())
print(b.print_board()) 
```

在 Windows 上执行，它打印：

```
c:\tmp\_Python>c:/python32/python a.py
Hello
Hello

c:\tmp\_Python>c:/python33/python a.py
Hello
Hello 
```

可能你想写：

```
...
    def print_board(self):
        print('Hello') 
```

并称之为

```
...
b.print_board() 
```

# facebook - FQL查询以获取给定城市中的所有朋友事件

> ID：14750160
> 
> 赞同：0
> 
> 时间：2013-02-07T11:35:49.167
> 
> 标签：facebook, facebook-fql

我试图限制在纬度/经度范围内，但不知道该怎么做这是我尝试过的

```
SELECT name, venue, location, start_time, eid FROM event 
WHERE eid IN (
   SELECT eid FROM event_member 
   WHERE (uid IN (SELECT uid2 FROM friend WHERE uid1 = me())  OR uid = me())
   )
AND start_time > now()
AND venue.latitude  < '-22.821757'
AND venue.latitude  > '-23.056989' 
```

但是坐标比较不起作用，因为我正在与字符串进行比较

如果我拿走我得到的报价：

```
(#601) Parser error: unexpected '-' at position 233 
```

[https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)

谢谢

# java - JLabel setText() 方法据说是线程安全的，但它是否确保可见性

> ID：14750161
> 
> 赞同：0
> 
> 时间：2013-02-07T11:35:51.383
> 
> 标签：java, multithreading, swing, visibility, volatile

查看 JLabel 的源代码，我担心文本字段的可见性。我提取了设置文本字段和检索 oldValue 的基本部分。在我看来，如果 String 文本字段未声明为 volatile，则可见性处于危险之中，因为 firePropertyChange 可能看不到从之前由另一个线程保存的文本字段中检索到的 oldValue。我是对的，还是我错过了什么？请注意，这不是讨论 SwingUtility。

```
public class JLabel extends JComponent implements SwingConstants, Accessible {
    ...

    private String text = "";         // "" rather than null, for BeanBox

    ...

    public void setText(String text) {

        String oldAccessibleName = null;
        if (accessibleContext != null) {
            oldAccessibleName = accessibleContext.getAccessibleName();
        }

        String oldValue = this.text;
        this.text = text;
        firePropertyChange("text", oldValue, text);

    ... 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T13:06:28.157

根据您所写的内容，不，这不能确保可见性（尽管我看不出声明任何 volatile 会有什么帮助）。在[这个错误](http://bugs.sun.com/view_bug.do?bug_id=4765383)中指出，JDK 6 文档中的许多方法错误地声明它们是线程安全的（见页面底部），`JEditorPane.setText`是其中之一（因此该声明不在 JDK 7 文档中）。

# database - 从数据库生成多个 Visio 文件

> ID：14750169
> 
> 赞同：1
> 
> 时间：2013-02-07T11:36:18.720
> 
> 标签：database, ms-access, diagram, visio

我有一个 Access 数据库，其中包含有关多个客户端的信息。我可以将这些数据放入一个表中（1 行 = 1 个客户端）。我想从这个表中创建 vsd 文件。我想绘制一个模板并将表单与字段相关联。

我是 Visio 的新手，但我成功地将表格映射到绘图，但我不知道如何要求 Visio 每行生成一个文件。我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T09:10:17.060

我认为这是不可能的，所以我编写了一个 PowerShell 脚本来完成这项工作。对于每一行，它打开并编辑模板并将其保存在一个新名称下。

# extjs - ExtJS 3 多个状态网格（但具有不同的 stateIds）

> ID：14750172
> 
> 赞同：1
> 
> 时间：2013-02-07T11:36:23.660
> 
> 标签：extjs, grid, state, extjs3

我有我的网格，它覆盖了 Ext.grid.GridPanel

我在我的网站上的 2 个地方使用了这个网格。我为它们生成了 2 个**不同**的 stateId：

构造函数：

```
TasksGrid.superclass.constructor.call(this, {
    id: genId,
    cls: 'tasks-grid',
    border: false,
    loadMask: {msg: 'Loading...'},
    sm: sm,
    stateful: true,
    stateId: 'tasks-grid'+(config.booClientTab ? '-clients-tab' : ''), // depending on config.booClientTab I setup one or other stateId
... 
```

我在现场 2 个地方调用此代码以创建 2 个网格：

```
this.TasksGrid = new TasksGrid(this, {
    region: 'west',
    split: true,
    width: tasksGridWidth ? tasksGridWidth : defaultWidth,
    booShowToolbar: true,
    booClientTab: !empty(config.clientId) // if true, 1 stateId will be setup, false - other
}); 
```

但是，当我测试时，状态仅应用于 2 个生成的网格中的第一个！！我检查了 cookie：似乎一切正常：创建了 2 个具有 2 个不同名称的 cookie。但是...状态仅适用于“this.TasksGrid = new TasksGrid”的第一次调用！！！

ExtJS 版本：3.0

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T05:20:29.230

我有同样的问题。状态只能在初始化期间而不是在初始化之后应用于组件。因此它第一次起作用，但之后不起作用。幸运的是，您使用的是 EextJs 3，以下代码在 ExtJS 3 中为我工作，但在 4 中没有。基本上，当您将新/其他状态应用于网格时，只需调用

```
MyGrid = Ext.extend(Ext.grid.GridPanel,
{
    /* @private */
    constructor: function(config)
    {
        MyGrid.superclass.constructor.call(this, config);
    },
    initComponent: function()
    {
        var cfg =
        {
            border: true,
            bodyBorder: false,
            stateful: true,
            stateId: 'grid',
            tbar:
                [{
                    text: 'View name'
                },{
                    xtype: 'combo',
                    width: 80,
                    typeAhead: true,
                    triggerAction: 'all',
                    mode: 'local',
                    forceSelection: true,
                    hiddenName: 'stateId',
                    selectOnFocus:true,
                    displayField:'name',
                    ref: '../stateCombo',
                    valueField: 'id',
                    listeners:
                    {
                        scope: this,
                        change: function(combo, newValue, oldValue)
                        {
                            newValue = parseInt(newValue, 10); var grd = this;
                            grd.el.mask('Applying the view please wait');
                            var data = combo.store.data.items;
                            Ext.each(data, function(d)
                            {
                                d.data.id = parseInt(d.data.id, 10);
                                if(d.data.id === newValue)
                                {
                                    Ext.util.Cookies.set('reportStateName', d.data.machineName);
                                    grd.applyState(MyStateProvider.decodeState(d.data.value));
                                    var conf = grd.getColumnModel().config;
                                    grd.getColumnModel().setConfig(conf);
                                    grd.doLayout();
                                    grd.getView().updateAllColumnWidths();
                                    grd.getView().refresh(true);
                                    return;
                                }
                            });
                            grd.el.unmask();
                            grd = null;
                        }
                    },
                    store: new Ext.data.JsonStore
                        ({
                            fields:
                                [{
                                    name: 'id',
                                    type: 'int'
                                }],
                            proxy : new Ext.data.HttpProxy
                                ({
                                    method: 'GET',
                                    url: BASEURL + 'getsavedstate'
                                }),
                            idProperty: 'id'
                        })
                }]
        };
        //we use applyIf for configuration attributes that should be left configurable
        Ext.applyIf(this, cfg);
        //ensure that any extra configurations that are set in initComponent method are applied to initialConfig:
        Ext.applyIf(this.initialConfig, cfg);
        /*
         * Properties specified here are safe/protected from being overridden
         * by an instance, so any 'private' default properties might be specified here.
         */
        //some attributes we may want to keep unaltered, so we use Ext.apply non-alterable configurables
        cfg =
        {
            sm: new Ext.grid.RowSelectionModel({singleSelect:true}),
            stripeRows: true,
            loadMask: true
        };
        Ext.apply(this, cfg);
        //need this to work sometimes:
        Ext.apply(this.initialConfig, cfg);
        MyGrid.superclass.initComponent.apply(this, arguments);
        this.on
            ({
                afterrender: function(grid)
                {
                    var grd = this;
                    this.stateCombo.getStore().load
                        ({
                            callback: function(data, options, success)
                            {
                                grd.saveAsStateBtn.enable();
                                var applied = false;
                                var setStateValue = Ext.util.Cookies.get('reportStateName');
                                Ext.each(data, function(d)
                                {
                                    //meaning no cookie was set so first time.
                                    if(setStateValue === null)
                                    {
                                        if(d.data.machineName === 'default')
                                        {
                                            if(d.data.value !== '')
                                            {
                                                grd.applyState(MyStateProvider.decodeState(d.data.value));
                                                applied = true;
                                                grd.stateCombo.setValue(d.data.id);
                                                return;
                                            }
                                            applied = true;
                                            grd.stateCombo.setValue(d.data.id);//Here value should be fetched from cookie
                                            return;
                                        }
                                    }
                                    else//Cookie was set
                                    {
                                        if(d.data.machineName === setStateValue)
                                        {
                                            if(d.data.value !== '')
                                            {
                                                var s = MyStateProvider.decodeState(d.data.value);
                                                grd.applyState(s);
                                                applied = true;
                                                grd.stateCombo.setValue(d.data.id);//Here value should be fetched from cookie
                                                return;
                                            }
                                            else
                                            {
                                                return;
                                            }
                                        }
                                    }
                                });
                                //grd.doLayout();
                                if(data.length !== 0)
                                {
                                    grd.stateCombo.enable();
                                    grd.saveStateBtn.enable();
                                }
                                var conf = grd.getColumnModel().config;
                                grd.getColumnModel().setConfig(conf);
                                grd.doLayout();
                                grd.getView().updateAllColumnWidths();
                                grd.getView().refresh(true);
                                grd.doLayout();
                                grd.el.unmask();
                            }
                        });
                    this.el.mask('Applying the saved view please wait');
                },
                scope: this
            });
    },
    onRender: function (container, position)
    {
        MyGrid.superclass.onRender.apply(this, arguments);
        var el = this.el;
        var grd = this;
        this.saveStateWindow = new MySaveStateWindow
            ({
                grid: grd,
                renderTo: el
            });
    },
    // template method
    /* @private */
    initEvents: function()
    {
        MyGrid.superclass.initEvents.apply(this, arguments);
    },
    afterRender: function()
    {
        MyGrid.superclass.afterRender.apply(this, arguments);
    },
    // template method
    /* @private */
    beforeDestroy: function()
    {
        //Call parent
        MyGrid.superclass.beforeDestroy.apply(this, arguments);
    },
    onDestroy: function()
    {
        this.saveStateWindow.destroy();
        MyGrid.superclass.onDestroy.apply(this, arguments);
    }
}); 
```

# sql - 为行组提供唯一标识符 TSQL

> ID：14750178
> 
> 赞同：2
> 
> 时间：2013-02-07T11:36:39.100
> 
> 标签：sql, sql-server, tsql

快速提问，我有一个表，其中有一列是一组行的标识符。例如记录客户交易的一组行，其中每一行都有客户参考。

我想要实现的是给那组行一个新的唯一标识符，这样我就可以匿名报告它。

我试过的

```
 UPDATE dbo.[t_Health]
   set Code = 'ABC' + Cast(RAND() as varchar(50))
     where si.CustRef= si.CustRef 
```

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:38:24.503

要创建新的唯一标识符，请使用`NEWID()`函数

```
with    anonymousId as (
        select  distinct CustRef,
                newid() as newId
        from    t_health)
update  dbo.t_health
set     code = ai.newId
from    dbo.t_health h join anonymousId ai on h.custref = ai.custref 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T11:41:25.240

您可以使用任何一种可用的[散列](http://blogs.msdn.com/b/sqlsecurity/archive/2011/08/26/data-hashing.aspx)函数。

**例子**

```
UPDATE dbo.[t_Health]
SET Code = hashbytes('SH2_512', CAST(CustRef AS VARCHAR(16)) 
```

# css - 将 ttf 文件保存在 Arial 等服务器上需要许可证吗？

> ID：14750179
> 
> 赞同：0
> 
> 时间：2013-02-07T11:36:39.310
> 
> 标签：css, fonts, licensing, truetype

我只需要在我的服务器上保留 Arial、Comic Sans 等的 .ttf 文件。我**不会**安装它们。

这是 Imagick 所必需的。

这是否还需要购买这些字体的许可证？或者这不被认为是对字体的任何违反或分发，并且可以在没有许可证的情况下进行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:47:29.000

根据我在[http://corefonts.sourceforge.net/faq8.htm](http://corefonts.sourceforge.net/faq8.htm)上可以阅读的内容，您可以很好地保留 mscorefonts 发行版中的字体。（Arial 和 Comic Sans 是其中的一部分）

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:01:41.730

您只能在[Microsoft 设置的规则](http://www.microsoft.com/typography/faq/faq8.htm)允许的情况下使用字体。它们只允许“以其原始形式（.exe 或 .sit.hqx）并以其原始文件名”重新分发，因此这不包括`@font-face`使用。

如有疑问，请联系 Microsoft。

# vba - 在现有或新创建的文件夹中归档邮件的规则

> ID：14750181
> 
> 赞同：2
> 
> 时间：2013-02-07T11:36:44.143
> 
> 标签：vba, outlook, outlook-2010

我是 VBA 新手，需要您对搜索电子邮件主题的规则提供帮助移动到该命名的子文件夹或新创建的 LSC 子文件夹。

所以outlook文件夹结构如下

LSC

-LSC_IND_TATA

-LSC_IND_TATA_02

-LSC_xxx_xxx

```
Function CheckForFolder(strFolder As String) As Boolean

Dim olApp As Outlook.Application
Dim olNS As Outlook.NameSpace
Dim olInbox As Outlook.MAPIFolder
Dim FolderToCheck As Outlook.MAPIFolder

Set olApp = Outlook.Application
Set olNS = olApp.GetNamespace("MAPI")
Set olInbox = olNS.GetDefaultFolder(olFolderInbox)

On Error Resume Next
Set FolderToCheck = olInbox.Folders(strFolder)
On Error GoTo 0

If Not FolderToCheck Is Nothing Then
    CheckForFolder = True
End If

ExitProc:
Set FolderToCheck = Nothing
Set olInbox = Nothing
Set olNS = Nothing
Set olApp = Nothing
End Function

Function CreateSubFolder(strFolder As String) As Outlook.MAPIFolder

Dim olApp As Outlook.Application
Dim olNS As Outlook.NameSpace
Dim olInbox As Outlook.MAPIFolder

Set olApp = Outlook.Application
Set olNS = olApp.GetNamespace("MAPI")
Set olInbox = olNS.GetDefaultFolder(olFolderInbox)

Set CreateSubFolder = olInbox.Folders.Add(strFolder)

ExitProc:
Set olInbox = Nothing
Set olNS = Nothing
Set olApp = Nothing
End Function

Function SearchAndMove(lookFor As String)

Dim olApp As Outlook.Application
Dim olNS As Outlook.NameSpace
Dim olInbox As Outlook.MAPIFolder
Dim FolderToCheck As Outlook.MAPIFolder
Dim myItem As Object
Dim MyFolder As Outlook.MAPIFolder
Dim lookIn As String
Dim newName As String
Dim location As Integer

Set olApp = Outlook.Application
Set olNS = olApp.GetNamespace("MAPI")
Set olInbox = olNS.GetDefaultFolder(olFolderInbox)
 For Each myItem In olInbox.Items
 lookIn = myItem.Subject
 If InStr(lookIn, lookFor) Then
     location = InStr(lookIn, lookFor)
             newName = Mid(lookIn, location)
        If CheckForFolder(newName) = False Then
            Set MyFolder = CreateSubFolder(newName)
            myItem.Move MyFolder
                Else
            Set MyFolder = olInbox.Folders(newName)
            myItem.Move MyFolder
        End If
    End If
Next myItem
End Function

Sub myMacro()
Dim str As String
str = "LSC_"
SearchAndMove (str)
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T01:59:12.990

```
Function CheckForFolder(strFolder As String) As Boolean

Dim olApp As Outlook.Application
Dim olNS As Outlook.Namespace
Dim olInbox As Outlook.MAPIFolder

Dim olInbox_Target As Outlook.MAPIFolder ' <---

Dim FolderToCheck As Outlook.MAPIFolder

Set olApp = Outlook.Application
Set olNS = olApp.GetNamespace("MAPI")

Set olInbox_Target = olNS.GetDefaultFolder(olFolderInbox).Folders("LSC") ' <---

On Error Resume Next
Set FolderToCheck = olInbox_Target.Folders(strFolder) ' <---
On Error GoTo 0

If Not FolderToCheck Is Nothing Then
    CheckForFolder = True
End If

ExitProc:
Set FolderToCheck = Nothing
Set olInbox = Nothing
Set olNS = Nothing
Set olApp = Nothing
End Function

Function CreateSubFolder(strFolder As String) As Outlook.MAPIFolder

Dim olApp As Outlook.Application
Dim olNS As Outlook.Namespace
Dim olInbox As Outlook.MAPIFolder

Dim olInbox_Target As Outlook.MAPIFolder ' <---

Set olApp = Outlook.Application
Set olNS = olApp.GetNamespace("MAPI")

Set olInbox_Target = olNS.GetDefaultFolder(olFolderInbox).Folders("LSC") ' <---

Set CreateSubFolder = olInbox_Target.Folders.Add(strFolder)

ExitProc:
Set olInbox = Nothing
Set olNS = Nothing
Set olApp = Nothing
End Function

Function SearchAndMove(lookFor As String, myitem As mailItem)

Dim olApp As Outlook.Application
Dim olNS As Outlook.Namespace
'Dim olInbox As Outlook.MAPIFolder

Dim olInbox_Target As Outlook.MAPIFolder ' <---

Dim FolderToCheck As Outlook.MAPIFolder
'Dim myitem As Object
Dim MyFolder As Outlook.MAPIFolder
Dim lookIn As String
Dim newName As String
Dim location As Integer

Set olApp = Outlook.Application
Set olNS = olApp.GetNamespace("MAPI")

'Set olInbox = olNS.GetDefaultFolder(olFolderInbox)
Set olInbox_Target = olNS.GetDefaultFolder(olFolderInbox).Folders("LSC") ' <---

'For Each myItem In olInbox.Items

    lookIn = myitem.Subject

    If InStr(lookIn, lookFor) Then

        location = InStr(lookIn, lookFor)
        newName = Mid(lookIn, location)

        If Right(newName, 1) = "]" Then
            newName = Left(newName, Len(newName) - 1)
        End If

        If CheckForFolder(newName) = False Then
            Set MyFolder = CreateSubFolder(newName)
            myitem.Move MyFolder
        Else
            Set MyFolder = olInbox_Target.Folders(newName)
            myitem.Move MyFolder
        End If

    End If

'Next myItem

End Function

' Choose this in Run a Script
Sub myMacro(itm As mailItem)
Dim str As String
str = "LSC_"
SearchAndMove str, itm
End Sub

' To test
' Manually select an email with an appropriate subject
Sub myMacroTest()
Dim itm As mailItem
Set itm = ActiveExplorer.Selection(1)
myMacro itm
End Sub 
```

# javascript - JavaScript 中的 Math.abs

> ID：14750182
> 
> 赞同：4
> 
> 时间：2013-02-07T11:36:49.240
> 
> 标签：javascript, jquery, html, canvas

我对 math.abs() 感到困惑。我通过互联网进行了研究，但找不到与这个弹跳球动画的任何关系。我想知道这是如何工作的，以及在使用 math.abs() 函数后球如何顺利弹跳？

```
function bounce() {
    if (x + dx > 293 || x + dx < 0) {
        dx = -dx;
    }
    if (y >= 290) {
        y = 290;
    }
    if (y + dy > 290 || y + dy < 0) {
        dx *= 0.99;
        dy = -dy;
    }
    //if (Math.abs(dx) < 0.01) {
       // dx = 0;
    }
    dy++;
} 
```

我确实**评论**了令我感到困惑的行。任何人都请让我知道这个功能对于这个动画有多重要。

## [小提琴](http://jsfiddle.net/stackmanoz/B6XZC/6/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-07T11:38:44.050

`dx`是 x 上的位移。

`Math.abs(dx)`是 x 上的绝对速度，即没有符号的值，始终为正或空。

```
if (Math.abs(dx) < 0.01) { 
```

可以写成

```
if (dx>-0.01 && dx < 0.01) { 
```

`x`基本上，如果球已经很慢，这条线和下面的线会停止球。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T11:44:50.557

每次满足最后一个条件时，dx 减少 1% ( `if (y + dy > 290 || y + dy < 0) {`)

这个计算可以永远持续下去，但会产生锯齿状的结果，因为与 dx 相比，浮点精度误差会成为一个很大的因素，所以当球已经很慢时最好停止弹跳，这就是使用 Math-abs 的测试的目的。用英语你可以阅读

```
if (Math.abs(dx) < 0.01) 
```

作为`if the speed of the ball in the x direction is less than 0.01 then stop the ball`

# ajax - 用于 valueChangeListener 的 Ajax

> ID：14750185
> 
> 赞同：11
> 
> 时间：2013-02-07T11:36:52.987
> 
> 标签：ajax, jsf, jsf-2, primefaces, onchange

我正在使用`p:ajax`侦听器来处理值更改事件（因为`valueChangeListener`在表单提交时启动）：

```
<p:ajax event="change" listener="#{bean.onNameChanged}"/> 
```

处理方法：

```
public void onNameChanged(final AjaxBehaviorEvent event) 
```

问题是，我无法在`AjaxBehaviorEvent`其类层次结构中找到读取输入**旧值**的位置。我也无法在谷歌中找到提示，如何获得旧值......

如何访问`p:ajax onChange`事件中的旧值？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-08T11:20:58.967

> *问题是，我在 AjaxBehaviorEvent 及其类层次结构中都找不到读取输入旧值的位置。我也无法在谷歌中找到提示，如何获得旧值......*

使用`valueChangeListener`.

* * *

> *不幸的是，valueChangeListener 在 p:ajax 之前被调用，所以我没有来自该方法中表单的实际数据，所以理论上我可以使用 valueChangeListener 来记住旧值，然后等待 p:ajax 处理......*

将值更改事件排队到调用应用程序阶段。

```
public void valueChangeListenerMethod(ValueChangeEvent event) {
    if (event.getPhaseId() != PhaseId.INVOKE_APPLICATION) {
        event.setPhaseId(PhaseId.INVOKE_APPLICATION);
        event.queue();
        return;
    }

    // Do your original job here. 
    // It will only be invoked when current phase ID is INVOKE_APPLICATION.
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-08T10:59:21.473

ValueChangeListener 应该这样工作：

风景：

```
<h:form>
  <h:inputText value="#{sessionBean.hello}" 
               valueChangeListener="#{sessionBean.valueChangeListener}">
    <p:ajax/>
  </h:inputText>
</h:form> 
```

豆子：

```
public void valueChangeListener(ValueChangeEvent e) {
  System.out.println("valueChangeListener invoked:" 
                      + " OLD: " + e.getOldValue() 
                      + " NEW: " + e.getNewValue());
} 
```

如果我将文本字段从“hello”更改为“world”，上面的代码将打印出来：

> valueChangeListener 调用：旧：你好新：世界

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-08T05:18:13.070

您可以尝试以下方法：

1.  在您的 bean 中实现值更改事件

    ```
     public void processValueChange(ValueChangeEvent e){
     //foo the bar
     } 
    ```

2.  `valueChangeListener`在您的选择组件上定义 a

    ```
     <p:selectOneMenu value="#{yourBean.value}" onchange="submit()" valueChangeListener="{#yourBean.processValueChange}"> 
    ```

    关键部分是`submit()`在值变化时处理封装形式的位。`getNewValue()`然后，您可以`getOldValue()`根据需要。

编辑：现在我想起来了，我看不出为什么你不能保持原样并简单地定义`valueChangeListener`. 它仍然应该在`change`事件期间处理`<p:ajax/>`，实际上它会在 ajax 事件本身的侦听器之前处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-31T09:39:20.143

你可以使用这个：

```
public void onNameChanged(AjaxBehaviorEvent event)
 {
    String myVal = (String) ((UIOutput) event.getSource()).getValue();
    System.out.println("myVal: " + myVal);
 } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2022-01-24T10:50:34.640

解决方法是可能的（使用 Primefaces 10 测试）：

```
<p:inputText id="name" value="bean.name">
     <p:ajax event="valueChange" update="name"
             listener="#{bean.onNameChanged}"
             onstart="cfg.ext={params:[{name:'oldValue', value:'#{bean.name}'}]};"/>
</p:inputText> 
```

`update="name"`很重要，每次都将新值获取到 javascript 事件处理程序中。

豆方法：

```
public void onNameChanged(final AjaxBehaviorEvent event) {
    String oldValue = getFacesContext().getExternalContext().getRequestParameterMap()
                      .get("oldValue");
    //Do with oldValue, whatever you want
} 
```

# java - 从输入流中读取 Http Get 请求并将其发送到主机。使用套接字

> ID：14750199
> 
> 赞同：1
> 
> 时间：2013-02-07T11:37:51.757
> 
> 标签：java, http, sockets, io, network-programming

我有这个任务，我应该编写一个代理服务器，它使用 java 套接字来处理来自客户端的获取请求。我现在被困住了，一直在谷歌上寻找答案，但没有成功。

Christoffers 解决方案帮助我解决了我的第一个问题。现在我已经更新了代码，这就是我正在使用的。

问题是它在将数据包发送回客户端循环之前只下载了大多数网页的一部分。目前我无法解释为什么它的行为方式是这样的。

```
public class MyProxyServer {  
    //Set the portnumber to open socket on
    public static final int portNumber = 5555;  

    public static void main(String[] args){  
//create and start the proxy
MyProxyServer myProxyServer = new MyProxyServer();  
myProxyServer.start();  
}  
public void start(){  
System.out.println("Starting MyProxyServer ...");  
try {  
    //create the socket 
    ServerSocket serverSocket = new ServerSocket(MyProxyServer.portNumber);  

    while(true)
    {    
        //wait for a client to connect
        Socket clientSocket = serverSocket.accept();  

        //create a reader to read the instream
        BufferedReader inreader = new BufferedReader( new InputStreamReader(clientSocket.getInputStream(), "ISO-8859-1"));  

        //string builder for preformance when we loop over the inputstream and read lines
        StringBuilder builder = new StringBuilder();
        String host = "";

        for (String buffer; (buffer = inreader.readLine()) != null;) {
        if (buffer.isEmpty()) break;
        builder.append(buffer.replaceAll("keep-alive", "close"));
        if(buffer.contains("Host"))
            {
            //parse the host
            host = buffer.replaceAll("Host: ", "");
            }
        System.out.println(buffer);
        }

        String req = builder.toString();
        System.out.println("finshed reading \n" + req);
        System.out.println("host: " + host);

        //new socket to send the information over
        Socket s = new Socket(InetAddress.getByName(host), 80);

        //printwriter to send text over the output stream
        PrintWriter pw = new PrintWriter(s.getOutputStream()); 

        //send the request from the client
        pw.println(req+"\r\n");
        pw.flush();

        //create inputstream to receive the web page from the host
        BufferedInputStream in = new BufferedInputStream(s.getInputStream());

        //create outputstream to send the web page to the client
        BufferedOutputStream outbuffer = new BufferedOutputStream(clientSocket.getOutputStream());

        byte[] bytebuffer = new byte[1024];
        int bytesread;

        //send the response back to the client
        while((bytesread = in.read(bytebuffer)) != -1) {
        System.out.println(bytesread);
        outbuffer.write(bytebuffer,0, bytesread);
        outbuffer.flush();
        }
        System.out.println("done sending");

        //close the streams
        inreader.close();
        s.close();
        pw.close();
        outbuffer.close();
        in.close();
    }

} catch (IOException e) {  
    e.printStackTrace();
}  catch(RuntimeException e){
    e.printStackTrace();
}
} 
```

}

如果有人能向我解释为什么我不能让它正常工作以及如何解决它，我将非常感激！

提前致谢。

# push-notification - 钛云无法退订用户

> ID：14750200
> 
> 赞同：0
> 
> 时间：2013-02-07T11:37:56.883
> 
> 标签：push-notification, titanium, cloud, subscribe

我是 Titanium APP 开发的初学者，在推送通知方面需要您的帮助。我遇到的问题是：

我从 APP 在云上创建了一个“用户 A”，并为其订阅推送通知并成功获取通知。但是，当我在取消订阅“用户 A”并从同一设备注销“用户 A”并为“用户 B”订阅推送通知并成功接收“用户 B”的通知后尝试重新创建另一个“用户 B”时，但我仍然接收不正确的“用户 A”通知。但是，在云 APP 管理中的“已订阅设备”中，仅列出了一个带有设备令牌的用户，即“用户 B”。

任何帮助都将是非常可观的。

谢谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-20T20:29:13.857

ACS 出现错误。也许它已通过 SDK 3.0.2.GA 修复？[https://jira.appcelerator.org/browse/TIMOB-12356](https://jira.appcelerator.org/browse/TIMOB-12356)

# java - 如何将 17MB 的文本文件解析为 List 导致 OutOfMemory 具有 128MB 堆？

> ID：14750202
> 
> 赞同：0
> 
> 时间：2013-02-07T11:38:01.783
> 
> 标签：java, out-of-memory, heap-memory

在我的应用程序的某些部分，我将一个 17MB 的日志文件解析为一个列表结构——每行一个 LogEntry。大约有 100K 行/日志条目，这意味着大约。每行 170 个字节。令我惊讶的是，我用尽了堆空间，即使我指定 128MB（256MB 似乎足够了）。10MB 的文本如何变成一个对象列表导致空间增加十倍？

我知道 String 对象使用的空间量至少是 ANSI 文本（Unicode，一个字符 = 2 个字节）的两倍，但这至少消耗了四倍。

**我正在寻找的是 n LogEntries 的 ArrayList 将消耗多少的近似值，或者我的方法可能如何创建使情况恶化的无关对象** （请参阅下面的评论`String.trim()`）

这是我的 LogEntry 类的数据部分

```
public class LogEntry { 
    private Long   id; 
    private String system, version, environment, hostName, userId, clientIP, wsdlName, methodName;
    private Date                timestamp;
    private Long                milliSeconds;
    private Map<String, String> otherProperties; 
```

这是阅读的部分

```
public List<LogEntry> readLogEntriesFromFile(File f) throws LogImporterException {
    CSVReader reader;
    final String ISO_8601_DATE_PATTERN = "yyyy-MM-dd HH:mm:ss,SSS";

    List<LogEntry> logEntries = new ArrayList<LogEntry>();
    String[] tmp;
    try {
        int lineNumber = 0;
        final char DELIM = ';';
        reader = new CSVReader(new InputStreamReader(new FileInputStream(f)), DELIM);
        while ((tmp = reader.readNext()) != null) {
            lineNumber++;

            if (tmp.length < LogEntry.getRequiredNumberOfAttributes()) {

                String tmpString = concat(tmp);

                if (tmpString.trim().isEmpty()) {
                    logger.debug("Empty string");
                } else {
                    logger.error(String.format(
                            "Invalid log format in %s:L%s. Not enough attributes (%d/%d). Was %s . Continuing ...",
                            f.getAbsolutePath(), lineNumber, tmp.length, LogEntry.getRequiredNumberOfAttributes(), tmpString)
                    );
                }

                continue;
            }

            List<String> values = new ArrayList<String>(Arrays.asList(tmp));
            String system, version, environment, hostName, userId, wsdlName, methodName;
            Date timestamp;
            Long milliSeconds;
            Map<String, String> otherProperties;

            system = values.remove(0);
            version = values.remove(0);
            environment = values.remove(0);
            hostName = values.remove(0);
            userId = values.remove(0);
            String clientIP = values.remove(0);
            wsdlName = cleanLogString(values.remove(0));
            methodName = cleanLogString(stripNormalPrefixes(values.remove(0)));
            timestamp = new SimpleDateFormat(ISO_8601_DATE_PATTERN).parse(values.remove(0));
            milliSeconds = Long.parseLong(values.remove(0));

            /* remaining properties are the key-value pairs */
            otherProperties = parseOtherProperties(values);

            logEntries.add(new LogEntry(system, version, environment, hostName, userId, clientIP,
                    wsdlName, methodName, timestamp, milliSeconds, otherProperties));
        }
        reader.close();
    } catch (IOException e) {
        throw new LogImporterException("Error reading log file: " + e.getMessage());
    } catch (ParseException e) {
        throw new LogImporterException("Error parsing logfile: " + e.getMessage(), e);
    }

    return logEntries;
} 
```

用于填充地图的实用函数

```
private Map<String, String> parseOtherProperties(List<String> values) throws ParseException {
    HashMap<String, String> map = new HashMap<String, String>();

    String[] tmp;
    for (String s : values) {
        if (s.trim().isEmpty()) {
            continue;
        }

        tmp = s.split(":");
        if (tmp.length != 2) {
            throw new ParseException("Could not split string into key:value :\"" + s + "\"", s.length());
        }
        map.put(tmp[0], tmp[1]);
    }
    return map;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:47:49.693

您还在那里有一个地图，您可以在其中存储其他属性。您的代码没有显示此 Map 是如何填充的，但请记住，与条目本身所需的内存相比，Maps 可能具有大量内存开销。

支持 Map 的数组大小（至少 16 个条目 * 4 个字节）+ 每个条目一个键/值对 + 数据本身的大小。两个映射条目，每个使用 10 个字符作为键，10 个字符作为值，将消耗 16*4 + 2*2*4 + 2*10*2 + 2*10*2 + 2*2*8= 64+16+ 40+40+24 = 184 字节（1 char = 2 字节，String 对象占用最少 8 字节）。仅此一项就会使整个日志字符串的空间需求几乎翻倍。

此外，LogEntry 包含 12 个对象，即至少 96 个字节。因此，单独的日志对象将需要大约 100 个字节，给予或获取一些，没有 Map 和没有实际的字符串数据。加上引用的所有指针（每个 4B）。我用 Map 至少数了 18 个，这意味着 72 个字节。

添加数据（上一段中提到的-object 引用和对象“标题”）：
2 个 longs = 16B，1 个存储为 long = 8B 的日期，map = 184B。此外还有字符串内容，比如 90 个字符 = 180 个字节。当放入列表时，列表项的每一端可能有一两个字节，因此每个日志行总共大约 100+72+16+8+184+180=560 ~ 600 字节。

所以每个日志行大约 600 字节，这意味着 100K 行至少会消耗大约 60MB。这将使其至少处于与设置为大小的堆大小相同的数量级。此外，[循环中的 tmpString.trim() 可能会创建 string 的副本](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#trim%28%29)。同样 String.format() 也可能会创建副本。应用程序的其余部分也必须适合这个堆空间，并且可以解释其余内存的去向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:40:25.223

不要忘记每个`String`对象都会消耗实际定义的空间（24 字节？）`Object`，加上对 char 数组的引用、偏移量（用于`substring()`使用）等。因此，将一行表示为“n”个字符串将增加额外的存储要求. `LogEntry`你能在课堂上懒洋洋地评估这些吗？

（关于字符串偏移量的使用 - 在 Java 7b6 之前，它`String.substring()`充当现有 char 数组的窗口，因此您需要一个偏移量。这最近发生了变化，可能值得确定以后的 JDK 构建是否更节省内存）

# sql - 如何根据 SQL 中前一行的值增加列的值

> ID：14750211
> 
> 赞同：4
> 
> 时间：2013-02-07T11:38:21.097
> 
> 标签：sql, sql-server-2008

我正在使用 SQL Server 2008。

我有两个表：**User_master**和**Item_master**。

有一个**user_id** = 10 的用户。

```
|---------|
| user_id |
|---------|
|   10    |
|---------| 
```

有 5 个**item_id** = 20 到 24 的项目。

```
|---------|---------|------------|
| item_id | user_id | item_order |
|---------|---------|------------|
|   20    |    10   |     0      |
|---------|---------|------------|
|   21    |    10   |     0      |
|---------|---------|------------|
|   22    |    10   |     0      |
|---------|---------|------------|
|   23    |    10   |     0      |
|---------|---------|------------|
|   24    |    10   |     0      |
|---------|---------|------------| 
```

**Item_master**中还有一列**item_order(int)**。我想将**item_order** = 0 到 4 放在所有这些行中，只有一个查询。

是否可以？

**编辑 ：**

item_id 不应该是有序的。

例如，代替 20,21,22,23,24；可能是 20、25、31、47、58。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T11:49:44.600

您可以使用`row_number()`窗口函数为具有相同`user_id`. 子查询是必需的，因为您不能直接在`set`子句中使用窗口函数。

```
update  im
set     im.item_order = im.rn
from    (
        select  row_number() over (partition by user_id
                                   order by item_id) - 1 as rn
        ,       *
        from    item_master
        ) as im; 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!6/bfb09/3/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T11:48:14.287

稍微推断一下，因为 { `item_id`, `user_id`} 在表中是唯一的，所以这是一个通用的解决方案：

```
UPDATE m
SET item_order = x.new_item_order
FROM item_master m
INNER JOIN (
  SELECT [item_id], [user_id], 
      (ROW_NUMBER() OVER (PARTITION BY [user_id] 
                          ORDER BY [item_id]))-1 AS [new_item_order] 
  FROM item_master
) x ON m.item_id = x.item_id AND m.user_id = x.user_id 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!3/3d7d7/1)

这将为每个用户设置`item_order`列的顺序`item_id`，从 0 开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T11:53:42.993

我假设您希望按用户分组以生成数字，并且 item_order 列已经存在，只需要更新？

```
update IM
    set item_order = t.RowNumber
FROM Item_master IM
INNER JOIN
    (select item_id , user_id , ROW_NUMBER() over(PARTITION BY user_id order by item_id ) -1 as 'RowNumber' from Item_master) T
    ON T.item_id = IM.item_id 
```

# iphone - 无法检索同时触摸次数

> ID：14750216
> 
> 赞同：0
> 
> 时间：2013-02-07T11:38:42.530
> 
> 标签：iphone, ios, objective-c, ipad, uiview

在我的`UIView`子类中，我有这个：

```
- (void) touchesBegan: (NSSet*) touches withEvent: (UIEvent*) event
{
    UITouch* touch = [touches anyObject];
    CGPoint location  = [touch locationInView: self];
    NSLog(@"touches count: %i",[touches count]); //always shows 1
} 
```

无论我用多少根手指触摸屏幕，我都只会得到“1”作为输出。我还将上述内容添加到`touchesMoved`相同的结果中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:41:06.320

您是否启用了多点触控选项？

```
[(your uiview) setMultiTouchEnabled:YES]; 
```

默认情况下这是 false，这会将您视图上的所有触摸转换为所有其他触摸中间的一次触摸。

将其设置为`YES`将使您的视图为屏幕上的每个手指（或笔）接收一个触摸事件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T11:41:27.707

我认为界面构建器中有一个“启用多点触控”复选框......还有一个您可以设置的相应属性。

# ruby-on-rails - 在字段保存到 ROR 中的数据库之前使用条带

> ID：14750224
> 
> 赞同：1
> 
> 时间：2013-02-07T11:39:06.423
> 
> 标签：ruby-on-rails

我想在某些字段进入我的数据库之前删除它们中的所有空格。

我正在使用设计并向成员表中添加了其他字段（使用成员而不是用户）。

在我的注册表单上，我有一些字段，例如电话和地址，但是我想删除某些字段（例如`:telephone`,`:mobile`和`:emergency_number`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:43:53.980

听起来像是一份工作`before_save`！

```
class Member < ActiveRecord::Base
  before_save :strip_whitespace

private
  def strip_whitespace
    self.telephone.gsub!(/\s+/, '')
    # etc...
  end
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-07T11:51:49.630

@Chowlett 解决方案的简单方法

```
class Member < ActiveRecord::Base
  before_save :strip_whitespace

private:
  def strip_whitespace
    self.telephone.join('')
    # etc...
  end
end 
```

# c# - 双面打印pdf

> ID：14750227
> 
> 赞同：1
> 
> 时间：2013-02-07T11:39:12.663
> 
> 标签：c#, pdf, printing, pdfsharp

所以，我正在使用 PDFSharp 库，并且，我想在两面打印 pdf ......我的打印机是 hp2055dn 我已经尝试了所有的东西......顺便说一句......我的代码是：

```
using PdfSharp.Pdf.Printing;
using System;
using System.Collections.Generic;
using System.Drawing.Printing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace impressao
{
    class Program
    {
        static void Main(string[] args)
        {
            PdfFilePrinter.AdobeReaderPath = @"C:\Program Files (x86)\Adobe\Acrobat 8.0\Acrobat\Acrobat.exe";
            //PdfFilePrinter.AdobeReaderPath = @"C:\Program Files (x86)\Foxit Software\Foxit Reader\Foxit Reader.exe";

            PrinterSettings settings = new PrinterSettings();
            settings.Collate = false;
            settings.Duplex = Duplex.Vertical;

            PrintDialog printerDialog = new PrintDialog();
            printerDialog.AllowSomePages = false;
            printerDialog.ShowHelp = false;
            printerDialog.PrinterSettings = settings;
            printerDialog.AllowPrintToFile = true;
            printerDialog.PrinterSettings.PrintToFile = true;
            DialogResult result = printerDialog.ShowDialog();

            if (result == DialogResult.OK)
            {
                PdfFilePrinter printer = new PdfFilePrinter("0.pdf", settings.PrinterName);

                try
                {
                    printer.Print();
                }
                catch (Exception ex)
                {
                    Console.WriteLine("Error: " + ex.Message);
                }
            }
        }
    }
} 
```

如果有另一种方法来制作这个，另一个lib，或者另一个设置，或者另一个dll......请告诉我是否可以用C或C++制作另一个程序，我只是将参数传递给打印......我不知道...

我需要很多，而且很急:(

谢谢亚历山大

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:54:08.107

我找到了解决方案，我创建了一台新打印机并设置了默认值，双面打印...

# javascript - jquery 扩展栏小部件

> ID：14750233
> 
> 赞同：0
> 
> 时间：2013-02-07T11:39:32.680
> 
> 标签：javascript, jquery, html, css

我需要一个像这样的扩展栏小部件（jquery/js/html/css）： ![](../Images/0702378d828220eca332fdaee33a71de.png)

我找不到任何接近的东西。
谁知道类似的小部件？

PS 扩展栏不是手风琴。
在扩展栏中，您可以打开“扩展项目标题 1”和“扩展项目标题 2”。
在手风琴中，您只能打开“扩展项目标题 1”或“扩展项目标题 2”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:43:31.063

您可以使用 twitter bootstrap 中的 bootstrap-collapse 之类的东西，但您必须定义自己的 css 样式才能获得相同的外观和感觉。见这里：http: [//twitter.github.com/bootstrap/javascript.html#collapse](http://twitter.github.com/bootstrap/javascript.html#collapse)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:44:06.633

这个工具通常被称为**手风琴，在****jQuery**中的参考实现可以在以下位置找到：

[http://jqueryui.com/accordion/](http://jqueryui.com/accordion/)

# css - div 与外部相对 img 溢出

> ID：14750236
> 
> 赞同：0
> 
> 时间：2013-02-07T11:39:34.840
> 
> 标签：css, html

我只是在 html 中有一个 div 标签的愚蠢问题（我认为......）。

我想将背景相对图像定位在左上角，半图像在其容器之外。

问题是容器没有填满它的所有内容。我尝试使用“溢出：自动”属性，但左角图像变为隐藏。

我的html：

```
<div class="content">
    content of the page
</div>
<footer id="footer">
    <div class="column" id="footer-izda">
        <span id="logo-sup"> </span>
        <span>conecta con nosotros</span>
        <ul>
            <li class="twitter">outside of box </li>
            <li class="facebook">outside of box</li>
        </ul>
    </div>

    <div class="column" id="footer-dcha">
        <div class="module widget_nav_menu  deepest">Copyright © 2013</div>
    </div>
</footer> 
```

我的 CSS：

```
.content{
    margin-bottom: 2%;  
}

footer{
    background-color: #333333;
    color: #EDEDED;
    padding: 1%;
    display: block;
    /*overflow: auto;*/
    -webkit-border-radius: 6px;
    -moz-border-radius: 6px;
    border-radius: 6px;
}

.column #logo-sup{
    background: url('http://formate21.es/wp-content/themes/master/images/footer.png') left top no-repeat;
    width: 26px;
    height: 26px;
    top: -25px;
    left: 0;
    float: left;
    position: absolute;
}

#footer-izda {
    float: left;
    width: 50%;
    position: relative;
    text-align: left;
} 
```

我在 jsfiddle 上写了这个：http: [//jsfiddle.net/ecXba/10/](http://jsfiddle.net/ecXba/10/)

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:56:51.863

将下面的代码放在 </footer> 标记之前。

`<div style="clear:both;"></div>`

希望这可以帮助！

# .net - WCF 中的默认 InstanceContextMode

> ID：14750239
> 
> 赞同：1
> 
> 时间：2013-02-07T11:39:42.210
> 
> 标签：.net, wcf, c#-4.0, servicebehavior

在WCF中，如果我们不具体指定ServiceBehaviour的InstanceContextMode，那么下面的默认模式是什么？

1.  每次通话
2.  每会话
3.  单身的

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T12:23:49.997

它上面的[文档](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicebehaviorattribute.instancecontextmode.aspx)谈到默认值是`PerSession`. 但我相信它也取决于使用的绑定（是否绑定支持会话），如 basichttpbinding 使用`PerCall`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-19T06:27:27.007

简单的答案是默认的实例化模式是`PerSession`

假如：

*   您使用的会话类型支持会话
*   请参阅 [绑定类型会话支持] ( [https://docs.microsoft.com/en-us/dotnet/framework/wcf/system-provided-bindings](https://docs.microsoft.com/en-us/dotnet/framework/wcf/system-provided-bindings) )。
*   如果通道没有创建会话，则行为就像是一样`PerCall`。
*   服务合同允许会话 - 默认为“允许”

这是 Microsoft 提供的示例，在代码中强制配置了默认值。 [默认行为示例](https://docs.microsoft.com/en-us/dotnet/framework/wcf/samples/default-service-behavior)

```
[ServiceBehavior(  
AutomaticSessionShutdown=true,  
ConcurrencyMode=ConcurrencyMode.Single,  
InstanceContextMode=InstanceContextMode.PerSession,  
IncludeExceptionDetailInFaults=false,  
UseSynchronizationContext=true,  
ValidateMustUnderstand=true)]
public class CalculatorService : ICalculator { ... } 
```

我发现在这篇 Microsoft 文章（[Using Sessions](https://docs.microsoft.com/en-us/dotnet/framework/wcf/using-sessions)）中阅读了有关 session 的内容，这对于理解 Sessions 如何打开和关闭以及这与实例化和并发之间的关系特别有启发性。

默认情况下，WCF 客户端将创建一个新会话，该会话将创建一个服务器实例，会话期间的所有调用都称为会话，并由具有单个线程（并发）的服务器的单个实例（实例化）提供服务专用于该会话/客户/对话。

> 如果您使用 WCF 中的默认实例化行为，则 WCF 客户端对象之间的所有调用都由同一个服务实例处理。因此，在应用程序级别，您可以将会话视为启用类似于本地调用行为的应用程序行为。例如，当您创建本地对象时：
> 
> 调用构造函数。
> 
> 对 WCF 客户端对象引用进行的所有后续调用都由同一对象实例处理。
> 
> 当对象引用被销毁时，将调用析构函数。
> 
> 只要使用默认的服务实例行为，会话就会在客户端和服务之间启用类似的行为。

希望这对某人有所帮助，因为我花了一段时间才找到答案。

# .net - 从 SecurityToken 创建 FedAuth cookie

> ID：14750249
> 
> 赞同：4
> 
> 时间：2013-02-07T11:40:19.023
> 
> 标签：.net, sharepoint, adfs

我想要做的是使用 HttpWebRequest 登录到共享点站点（它使用 ADFS 服务器）。我是怎么做的：

1.  我已经使用 WSTrustChannelFactory 获得了 SecurityToken（请参阅[此处](http://leandrob.com/2012/04/requesting-a-token-from-adfs-2-0-using-ws-trust-with-username-and-password/)的这篇文章）
2.  将 SecurityToken 转换为 FedAuth cookie
3.  创建 HttpWebRequest 并附加 FedAuth cookie。
4.  发送 HttpWebRequest 请求并接收响应。

**PROBLEM** : in step 2 I need to convert SecurityToken (which is '_a9e1657d-9360-4578-9075-9a84617a6826') into FedAuth cookie, which should be something like '77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48U1A+MGUudHxsc3QgYWRmc3xldWdlbmlqdXNyQGxzdC5pbnRlcm5hbCwwZS50fGxzdCBhZGZzfGV1Z2VuaWp1c3JAbHN0LmludGVybmFsLDEzMDA0NzA4NzU4MTYzMDAwMCxUcnVlLEswN0FqZWdlTWZTMUpwZWhka3FlOGtQN0I4MUxxL3ZKOS8zM2NtRnk2KzNvQ3M5Sy9pM1dYZmU4SHlxWHdTOGhLRDdLWkgyaG9QcytZNEJBOHkrcnFRR3BVUFQxUGtOaTJqL0EvRHZKOWk0Z0V5Z2ZNT3oyUDlpRER6K2tST2FrQVpybG5xM0hxYTlCVWs4S1JuSGJEUXpyK3h1TDk1SEl4K3dibnJQMlY3cVdDSFBmRXhsc0Ftc2duWjl3c3E3ZVlnL1AxL2FaWFphWWtseFYyQ1ZEdGN3eENLRWpQWnF2TVlRNlo1M3NUZFVvQ3dwRlB6SzIzNnpGeHhZZnIvUXFn'

似乎 cookie 值已加密。如何从令牌字符串创建加密 cookie？有人知道吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-20T02:41:41.433

我找到了一个解析安全令牌并使用本地存储证书对其进行解密的示例。然后将生成 FedAuth Cookie 并尝试使用 CSOM 将您登录到共享点实例。[例子](http://blog.skadefro.dk/2011/09/claims-authentication-made-simple.html?showComment=1408438409787#c1996835031105089814)

但是，我在登录 Sharepoint 时仍然遇到错误，但这似乎与证书名称不匹配有关。

# image-processing - fitEllipse 如何在 OpenCV 中工作？

> ID：14750251
> 
> 赞同：8
> 
> 时间：2013-02-07T11:40:23.323
> 
> 标签：image-processing, opencv, shape, ellipse

我正在使用 opencv，我需要了解 fitEllipse 函数是如何工作的。我查看了（[https://github.com/Itseez/opencv/blob/master/modules/imgproc/src/shapeescr.cpp](https://github.com/Itseez/opencv/blob/master/modules/imgproc/src/shapedescr.cpp)）上的代码，我知道它使用最小二乘法来确定可能的椭圆。我还查看了文档中给出的论文（Andrew W. Fitzgibbon, RBFisher. A Buyer's Guide to Conic Fitting. Proc.5th British Machine Vision Conference, Birmingham, pp. 513-522, 1995。）

但我无法完全理解算法。例如，为什么需要求解 3 次最小二乘问题？为什么 bd 在第一个 svd 之前被初始化为 10000（我猜这只是初始化的随机值，但为什么这个值可以是随机的？）？为什么在第一个 svd 之前 Ad 中的值需要为负数？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T01:53:41.580

这是Matlab代码..它可能会有所帮助

```
function [Q,a]=fit_ellipse_fitzgibbon(data)
  % function [Q,a]=fit_ellipse_fitzgibbon(data)
  %
  % Ellipse specific fit, according to:
  %
  %  Direct Least Square Fitting of Ellipses,
  %  A. Fitzgibbon, M. Pilu and R. Fisher. PAMI 1996
  %
  %
  % See Also:
  %   FIT_ELLIPSE_LS
  %   FIT_ELLIPSE_HALIR

  [m,n] = size(data);
  assert((m==2||m==3)&&n>5);
  x = data(1,:)';
  y = data(2,:)';

  D = [x.^2 x.*y y.^2 x y ones(size(x))];   % design matrix
  S = D'*D;                                 % scatter matrix
  C(6,6)=0; C(1,3)=-2; C(2,2)=1; C(3,1)=-2; % constraints matrix
  % solve the generalized eigensystem
  [V,D] = eig(S, C);
  % find the only negative eigenvalue
  [n_r, n_c] = find(D<0 & ~isinf(D));
  if isempty(n_c),
    warning('Error getting the ellipse parameters, will do LS');
    [Q,a] = fit_ellipse_ls(data); %
    return;
  end
  % the parameters
  a = V(:, n_c);
  [A B C D E F] = deal(a(1),a(2),a(3),a(4),a(5),a(6)); % deal is slow!
  Q = [A B/2 D/2; B/2 C E/2; D/2 E/2 F];
end % fit_ellipse_fitzgibbon 
```

Fitzibbon 解虽然具有一定的数值​​稳定性。有关此问题的解决方案，请参阅 Halir 的工作。

它本质上是最小二乘解决方案，但经过专门设计，它会产生一个*有效*的椭圆，而不仅仅是任何圆锥。

# php - 在 symfony2 中为容器内的输入自定义树枝表单模板

> ID：14750257
> 
> 赞同：0
> 
> 时间：2013-02-07T11:40:44.533
> 
> 标签：php, symfony, twig

我有一个具有此日期时间输入的 FormType：

```
 $builder->add('data_inicio', 'datetime', array(
        'input' => 'datetime',
        'date_widget' => 'single_text',
        'time_widget' => 'choice',
        'attr' => array(
            'class' => 'datetime rangeDataInicio',
            'maxlength' => '10',
            'placeholder' => 'dd/mm/aaaa',
        ),
        'date_format' => 'dd/MM/yyyy',
        'required' => true,
        'disabled' => $isDisabled,
    )); 
```

出于某些原因，我必须在 single_text 日期输入处直接插入占位符和类，但它们都留在容器中并且不去输入。

我尝试了几种方法来做到这一点，但都失败了，在网上搜索了几个星期，没有发现任何可以解决我的问题的方法。我怎样才能把这两个属性放在输入端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:48:31.683

您可以为此使用[表单主题](http://symfony.com/doc/2.0/cookbook/form/form_customization.html#referencing-base-form-blocks-twig-specific)。

```
{% form_theme form _self %}

{% block datetime_widget %}
{% spaceless %}
    {% if widget == 'single_text' %}
        {{ block('field_widget') }}
    {% else %}
        <div {{ block('widget_container_attributes') }}>
            {{ form_errors(form.date) }}
            {{ form_errors(form.time) }}
            {{ form_widget(form.date) }}
            {{ form_widget(form.time, { 'attr': {'class': 'datetime rangeDataInicio', 'placeholder': 'dd/mm/aaaa'} })) }}
        </div>
    {% endif %}
{% endspaceless %}
{% endblock datetime_widget %} 
```

# c# - 在c#中用“替换”

> ID：14750260
> 
> 赞同：5
> 
> 时间：2013-02-07T11:40:57.257
> 
> 标签：c#, asp.net

在我的网站中，我正在使用 c# 中的 datagrid 项目准备一个数组，它工作正常，但是当我在网格中有一些文本时，它`"`的值代码会自动将其替换为`&quot;`

我试图替换`&quot;`为`"`如下，但是它失败并替换`&quot;`为`\"`

```
Array.Value += "|" + dgrFinal.Rows[i].Cells[1].Text.Replace
("amp;", "").Replace("&quot;","\"") 
```

有什么办法可以`&quot;`用“.

任何人都可以帮助我......来吧，你是专家。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-12-06T00:57:32.810

您可以使用`HttpUtility`. 这是一个例子。

```
using System.Web; 
```

...

```
string value1 = "&lt;html&gt;";
string value2 = HttpUtility.HtmlDecode(value1);
string value3 = HttpUtility.HtmlEncode(value2);
Debug.WriteLine(value1);
Debug.WriteLine(value2);
Debug.WriteLine(value3); 
```

这是输出：

```
&lt;html&gt;
<html>
&lt;html&gt; 
```

我从[这里](https://www.dotnetperls.com/httputility)举了一个例子。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-07T11:47:29.183

你有没有尝试过

```
.Replace("&quot;", @"""") 
```

编辑：在 GridView 之外（我使用的是 LinqPad）

```
string xxx = "sd&quot;fd";
Console.WriteLine(xxx.Replace("&quot;", @"""")); 
```

返回：

> sd"fd

如果它仍然显示为 \" 那么战斗是与 gridView - 我已经很久没有使用过，但我很想尝试在绑定到网格之前立即获取数据，而不是循环遍历行和单元格然后。

Edit2：我想说这可能是调试器转义了引号，但我在这个方面落后了几天。好地方@Rawling。至少现在解决了:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-01T10:30:14.447

Asp.net GridViewRow:

`row.Cells[3].Text.Trim().Replace("&quot;", @"""")`

**Before**: `&quot;Gasket 22&quot;&quot; rubber ventlation pipes&quot;`

**After**: "Gasket 22"" rubber ventlation pipes"

# facebook-like - Facebook喜欢按钮和墙上的奇怪图像

> ID：14750261
> 
> 赞同：0
> 
> 时间：2013-02-07T11:41:00.050
> 
> 标签：facebook-like

我在我的页面中包含了一个类似框插件：

```
<div class="fb-like" id="fb" data-href="http://www.lorem.com" data-send="false"
     data-layout="button_count" data-width="60" data-show-faces="true"></div>

<div id="fb-root"></div>
<script>    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
        fjs.parentNode.insertBefore(js, fjs);
    } (document, 'script', 'facebook-jssdk'));
</script> 
```

点击“Like”并发布到 Facebook 的墙上后，我看到图片很奇怪，我的意思是我看到它只是我网站徽标的一小部分。墙上的那个图像是这样的

![在此处输入图像描述](../Images/d5604a8de8614762945b2899b8304bd6.png)

我该怎么做才能使该图像看起来不错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:42:21.003

答案是，图像的最小尺寸应该是 200x200，我的是 330x40。此外，图片网址应放在`og:image`元标记中

# html - 将图像存储在 App_Data 中并解决它们绝对的错误

> ID：14750263
> 
> 赞同：0
> 
> 时间：2013-02-07T11:41:11.637
> 
> 标签：html, razor, asp.net-mvc-4, image

我已经生成了一个如下的图像标签：

```
<td>
    <img src='@item.SourceAddress' alt="@item.Description"/>
</td> 
```

结果是这样的：

```
<td>
    <img src='C:\Users\leo\Workspace\Team Foundation Server\Sources\HRS\HRS\App_Data\user\Photos\test.jpg' alt="desc"/>
</td> 
```

问题是我只看到空白，根本没有图像（在 Firefox 中我只看到 alt 文本）。路径是正确的。我将标签本身复制`img`到另一个 html 文件中，我看到图像非常清晰。
可能有帮助的事情：我用Firefox打开了源代码，当我单击图像源时，出现以下错误：

> Firefox 不知道如何打开这个地址，因为协议 (c) 没有与任何程序相关联。

顺便说一句，抱歉英语很糟糕。
编辑：我编辑了标题。现在更有意义了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:55:23.937

这可能是由于您提供了本地路径名（即 C: 中的目录）而不是通过 Razr 提供的相对路径。如果您在 Firefox 中开始调试，那么控制台输出有时会忽略这一点。

你可以尝试类似的东西：

```
<img src="@Url.Content(Item.SourceAddress)" alt="desc"/> 
```

并检查 SourceAddress 的格式是否为：

```
~/MyImages/Photos/test.jpg 
```

还值得检查所有明显的东西，例如双引号而不是单引号等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:59:10.767

终于知道是什么问题了！

*   首先，我使用 App_Data 文件夹来存储文件。此文件夹是特殊用途，用于存储一些特殊的数据库文件，IIS 不会直接访问此文件夹。我不得不创建另一个像 Image 这样的文件夹并将文件存储在那里。
*   第二个问题是我直接从 Root (C:\...) 给出了路径。Web 浏览器无法直接访问服务器文件系统（由于某些安全原因）。因此，我不得不给出路径相对地址。绝对路径应仅由服务器代码使用，而不应在 html 源代码中使用。我设法将绝对路径转换为相对路径，如下所示：
    `public static class HttpServerUtilityExtensions { public static string RelativePath( this HttpServerUtilityBase utility, string path, HttpRequestBase context ) { return path.Replace( context.ServerVariables[ "APPL_PHYSICAL_PATH" ], "/" ）。代替（ @”\”， ”/” ）; } }`
    和： ``

# php - 运行控制器方法的异步 PHP 调用

> ID：14750264
> 
> 赞同：3
> 
> 时间：2013-02-07T11:41:12.573
> 
> 标签：php, codeigniter, asynchronous

我想在按钮单击事件上执行：

```
localhost/codeigniter/controller/method 
```

该方法将从网页中提取关键字并将其存储在数据库中。**其中有多个子方法也应该在后台运行。**我不想让用户在此期间等待。我读[了这个](https://stackoverflow.com/questions/124462/asynchronous-php-calls)。这对我有用吗？任何其他拯救生命的建议都是最受欢迎的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:13:23.473

基于这个线程，我为我的 codeigniter 项目做了这个。它工作得很好。您可以在后台处理任何功能。

一个接受异步调用的控制器。

```
class Daemon extends CI_Controller
{
    // Remember to disable CI's csrf-checks for this controller

    function index( )
    {
        ignore_user_abort( 1 );
        try
        {
            if ( strcmp( $_SERVER['REMOTE_ADDR'], $_SERVER['SERVER_ADDR'] ) != 0 && !in_array( $_SERVER['REMOTE_ADDR'], $this->config->item( 'proxy_ips' ) ) )
            {
                log_message( "error", "Daemon called from untrusted IP-address: " . $_SERVER['REMOTE_ADDR'] );
                show_404( '/daemon' );
                return;
            }

            $this->load->library( 'encrypt' );
            $params = unserialize( urldecode( $this->encrypt->decode( $_POST['data'] ) ) );
            unset( $_POST );
            $model = array_shift( $params );
            $method = array_shift( $params );
            $this->load->model( $model );
            if ( call_user_func_array( array( $this->$model, $method ), $params ) === FALSE )
            {
                log_message( "error", "Daemon could not call: " . $model . "::" . $method . "()" );
            }
        }
        catch(Exception $e)
        {
            log_message( "error", "Daemon has error: " . $e->getMessage( ) . $e->getFile( ) . $e->getLine( ) );
        }
    }
} 
```

还有一个执行异步调用的库

```
class Daemon
{
    public function execute_background( /* model, method, params */ )
    {
        $ci = &get_instance( );
        // The callback URL (its ourselves)
        $parts = parse_url( $ci->config->item( 'base_url' ) . "/daemon" );
        if ( strcmp( $parts['scheme'], 'https' ) == 0 )
        {
            $port = 443;
            $host = "ssl://" . $parts['host'];
        }
        else 
        {
            $port = 80;
            $host = $parts['host'];
        }
        if ( ( $fp = fsockopen( $host, isset( $parts['port'] ) ? $parts['port'] : $port, $errno, $errstr, 30 ) ) === FALSE )
        {
            throw new Exception( "Internal server error: background process could not be started" );
        }
        $ci->load->library( 'encrypt' );
        $post_string = "data=" . urlencode( $ci->encrypt->encode( serialize( func_get_args( ) ) ) );
        $out = "POST " . $parts['path'] . " HTTP/1.1\r\n";
        $out .= "Host: " . $host . "\r\n";
        $out .= "Content-Type: application/x-www-form-urlencoded\r\n";
        $out .= "Content-Length: " . strlen( $post_string ) . "\r\n";
        $out .= "Connection: Close\r\n\r\n";
        $out .= $post_string;
        fwrite( $fp, $out );
        fclose( $fp );
    }
} 
```

可以调用此方法来处理“背景”中的任何 model::method()。它使用可变参数。

```
$this->load->library('daemon');
$this->daemon->execute_background( 'model', 'method', $arg1, $arg2, ... ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:12:13.163

您可以在套接字中编写：

```
$fp = fsockopen($_SERVER['HTTP_HOST'], 80, $errno, $errstr, 30);
$data = http_build_query($params, '', '&'); //$params - array with POST data
fwrite($fp, "POST " . ('/controller/action') . " HTTP/1.1\r\n");
fwrite($fp, "Host: ".$_SERVER['HTTP_HOST']."\r\n");
fwrite($fp, "Content-Type: application/x-www-form-urlencoded\r\n");
fwrite($fp, "Content-Length: " . strlen($data) . "\r\n");
fwrite($fp, "Connection: Close\r\n\r\n");
fwrite($fp, $data);
fclose($fp); 
```

# java - Hyper-V 删除 VM J-Interop

> ID：14750266
> 
> 赞同：0
> 
> 时间：2013-02-07T11:41:12.713
> 
> 标签：java, hyper-v

我想修改 Msvm_VirtualSystemManagementService 资源并想使用 Msvm_VirtualSystemManagementService 的 DestroySystem 方法。为此，我想获得对 CIM_ComputerSystem 实例的引用，该实例表示要销毁的虚拟机实例。但我不知道如何使用 j-interop ..请帮助我..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T16:22:12.833

使用[http://jwbem.sourceforge.net/](http://jwbem.sourceforge.net/)你应该能够得到一个 Msvm_ComputerSystem 参考

（来自 jwbem 文档的示例）

```
import com.hyper9.jwbem.SWbemObjectSet;
import com.hyper9.jwbem.msvm.MsvmComputerSystem;

...

// Define the WQL query that returns all of a Hyper-V's virtual machines.
String wql = "SELECT * FROM Msvm_ComputerSystem WHERE Caption='Virtual Machine'";

// Execute the query.
SWbemObjectSet<MsvmComputerSystem> compSysSet = svc.execQuery(wql, MsvmComputerSystem.class);

// Print the names of the virtual machines.
for (MsvmComputerSystem cs : compSysSet)
{
  System.out.println(cs.getElementName());
} 
```

# php - 带php的Haversine公式

> ID：14750275
> 
> 赞同：24
> 
> 时间：2013-02-07T11:41:28.303
> 
> 标签：php, google-maps, haversine

我想在 php 中使用这个公式。我有一个保存了一些纬度和经度值的数据库。

我想通过输入中的某个纬度和经度值来查找从该点到数据库中每个点的所有距离（以公里为单位）。为此，我使用了 googlemaps api 上的公式：

```
( 6371 * acos( cos( radians(37) ) * cos( radians( lat ) ) * cos( radians( lng ) - radians(-122) ) + sin( radians(37) ) * sin( radians( lat ) ) ) ) 
```

当然在 php 中使用它我用`deg2rad`.The 值替换了弧度。值 37,-122 是我的输入值，而 lat,lng 是我在数据库中的值。

下面是我的代码。问题是出了点问题，但我不明白是什么。距离的值当然是错误的。

```
//values of latitude and longitute in input (Rome - eur, IT)
$center_lat = "41.8350";
$center_lng =  "12.470";

//connection to database. it works
(..)

//to take each value in the database:
    $query = "SELECT * FROM Dati";
    $result = mysql_query($query);
    while ($row = @mysql_fetch_assoc($result)){
        $lat=$row['Lat']);
        $lng=$row['Lng']);
    $distance =( 6371 * acos((cos(deg2rad($center_lat)) ) * (cos(deg2rad($lat))) * (cos(deg2rad($lng) - deg2rad($center_lng)) )+ ((sin(deg2rad($center_lat))) * (sin(deg2rad($lat))))) );
    } 
```

例如值： $lat= 41.9133741000 $lng= 12.5203​​944000

我有 distance="4826.9341106926" 的输出

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-02-07T13:04:11.507

您使用的公式似乎是反*余弦*而不是半*正弦*公式。hasrsine 公式确实更适合计算球体上的距离，因为它不太容易出现舍入误差。

```
/**
 * Calculates the great-circle distance between two points, with
 * the Haversine formula.
 * @param float $latitudeFrom Latitude of start point in [deg decimal]
 * @param float $longitudeFrom Longitude of start point in [deg decimal]
 * @param float $latitudeTo Latitude of target point in [deg decimal]
 * @param float $longitudeTo Longitude of target point in [deg decimal]
 * @param float $earthRadius Mean earth radius in [m]
 * @return float Distance between points in [m] (same as earthRadius)
 */
function haversineGreatCircleDistance(
  $latitudeFrom, $longitudeFrom, $latitudeTo, $longitudeTo, $earthRadius = 6371000)
{
  // convert from degrees to radians
  $latFrom = deg2rad($latitudeFrom);
  $lonFrom = deg2rad($longitudeFrom);
  $latTo = deg2rad($latitudeTo);
  $lonTo = deg2rad($longitudeTo);

  $latDelta = $latTo - $latFrom;
  $lonDelta = $lonTo - $lonFrom;

  $angle = 2 * asin(sqrt(pow(sin($latDelta / 2), 2) +
    cos($latFrom) * cos($latTo) * pow(sin($lonDelta / 2), 2)));
  return $angle * $earthRadius;
} 
```

PS我在你的代码中找不到错误，所以这只是你写的错字`$lat= 41.9133741000 $lat= 12.5203944000`吗？也许你只是用 $lat=12.5203​​944000 和 $long=0 计算，因为你覆盖了你的 $lat 变量。

编辑：

测试了代码，它返回了正确的结果：

```
$center_lat = 41.8350;
$center_lng = 12.470;
$lat = 41.9133741000;
$lng = 12.5203944000;

// test with your arccosine formula
$distance =( 6371 * acos((cos(deg2rad($center_lat)) ) * (cos(deg2rad($lat))) * (cos(deg2rad($lng) - deg2rad($center_lng)) )+ ((sin(deg2rad($center_lat))) * (sin(deg2rad($lat))))) );
print($distance); // prints 9.662174538188

// test with my haversine formula
$distance = haversineGreatCircleDistance($center_lat, $center_lng, $lat, $lng, 6371);
print($distance); // prints 9.6621745381693 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-06-08T07:09:31.187

```
public function getDistanceBetweenTwoPoints($point1 , $point2){
    // array of lat-long i.e  $point1 = [lat,long]
    $earthRadius = 6371;  // earth radius in km
    $point1Lat = $point1[0];
    $point2Lat =$point2[0];
    $deltaLat = deg2rad($point2Lat - $point1Lat);
    $point1Long =$point1[1];
    $point2Long =$point2[1];
    $deltaLong = deg2rad($point2Long - $point1Long);
    $a = sin($deltaLat/2) * sin($deltaLat/2) + cos(deg2rad($point1Lat)) * cos(deg2rad($point2Lat)) * sin($deltaLong/2) * sin($deltaLong/2);
    $c = 2 * atan2(sqrt($a), sqrt(1-$a));

    $distance = $earthRadius * $c;
    return $distance;    // in km
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-07T11:48:52.870

从[这个链接](http://www.codecodex.com/wiki/Calculate_Distance_Between_Two_Points_on_a_Globe#PHP)：

```
function getDistance($latitude1, $longitude1, $latitude2, $longitude2) {
    $earth_radius = 6371;

    $dLat = deg2rad($latitude2 - $latitude1);
    $dLon = deg2rad($longitude2 - $longitude1);

    $a = sin($dLat/2) * sin($dLat/2) + cos(deg2rad($latitude1)) * cos(deg2rad($latitude2)) * sin($dLon/2) * sin($dLon/2);
    $c = 2 * asin(sqrt($a));
    $d = $earth_radius * $c;

    return $d;
} 
```

正如您所看到的，这与您的代码有很多不同。我不知道您是否对公式有不同的方法，或者转换为 PHP 时的某个步骤出错了，但是上面的公式应该可以工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T12:06:33.433

我使用以下存储过程直接在查询中计算距离：

```
CREATE FUNCTION GEODIST (lat1 DOUBLE, lon1 DOUBLE, lat2 DOUBLE, lon2 DOUBLE)
    RETURNS DOUBLE
    DETERMINISTIC
        BEGIN
            DECLARE dist DOUBLE;
            SET dist =  round(acos(cos(radians(lat1))*cos(radians(lon1))*cos(radians(lat2))*cos(radians(lon2)) + cos(radians(lat1))*sin(radians(lon1))*cos(radians(lat2))*sin(radians(lon2)) + sin(radians(lat1))*sin(radians(lat2))) * 6378.8, 1);
            RETURN dist;
        END| 
```

您只需从 phpMyAdmin 中将上述内容作为 SQl 语句执行以创建过程。请注意结尾 |，因此在您的 SQL 输入窗口中，选择 | 作为限制器签名。

然后在查询中，这样调用它：

```
$sql = "
SELECT `locations`.`name`, GEODIST(`locations`.`lat`, `locations`.`lon`, " . $lat_to_calculate . ", " . $lon_to_calculate . ") AS `distance`
FROM `locations` "; 
```

我发现这比运行查询后在 PHP 中计算要快得多。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-01T06:03:33.947

我制作了具有四个参数的静态函数 getDistance 的 hasrsine 类，它返回与机器人位置点的距离

```
class HaverSign {

     public static function getDistance($latitude1, $longitude1, $latitude2, $longitude2) {
        $earth_radius = 6371;

        $dLat = deg2rad($latitude2 - $latitude1);
        $dLon = deg2rad($longitude2 - $longitude1);

        $a = sin($dLat/2) * sin($dLat/2) + cos(deg2rad($latitude1)) * cos(deg2rad($latitude2)) * sin($dLon/2) * sin($dLon/2);
        $c = 2 * asin(sqrt($a));
        $d = $earth_radius * $c;

        return $d;
}
} 
```

上面的类存放在根目录，根目录包含classes文件夹在任何php页面中使用以下方式调用

```
include "../classes/HaverSign.php";
$haversign=new HaverSign();

$lat=18.5204;
$lon=73.8567;

$lat1=18.5404;
$lon1=73.8167;

$dist = $haversign->getDistance($lat,$lon,$lat1,$lon1);
echo $dist; 
```

输出如下

```
4.7676529976827 
```

# android - 如何在android中解析来自服务器的多个Json数据

> ID：14750279
> 
> 赞同：1
> 
> 时间：2013-02-07T11:41:38.560
> 
> 标签：android, http-post, json

****我有一个疑问，是否可以在 android 中解析来自服务器的多个 json 响应？现在我正在开发一个将 android 应用程序与 cakephp 网站连接起来的项目。我以 json 编码格式从服务器接收数据。并在 android 中解析该 json 数据并显示到视图部分。但现在我想从服务器传递多个 json 响应，这怎么可能？？？****

```
 function commuterJson()
  {
    $upid=$_POST['upid'];
    $ampm=$_POST['ampm'];
      $this->loadModel('Userprofile');
    $this->Userprofile->recursive = -1;
    $ups = $this->Userprofile->find('first', array('conditions' =>
    array('id' => $upid, 'status' => 'active')));
     $todaysdata = $this->Requestcard->getRequestcardDataampm($upid, $ampm, $today);

    $driverId=$todaysdata[0]['Requestcard']['driver_id'];
    $vacencyId=$todaysdata[0]['Requestcard']['vacancycard_id'];
    $driverDetails = $this->Userprofile->find('first', array('conditions' =>
    array('id'   => $driverId, 'status' => 'active')));
    $vacancyDetails = $this->Vacancycard->find('first', 
    array('conditions' => array('id' =>$vacencyId )));
    $vechicleId=$vacancyDetails['Vacancycard']['vehicledetail_id'];
    $vechicleDetails=$this->Vehicledetail->find('first',
    array('conditions' =>    array('id' => $vechicleId)));

    echo json_encode($driverDetails);
    echo json_encode($vechicleDetails);
    echo json_encode($todaysdata);
    exit();

           } 
```

我想把这三个jso编码的数据传给android

```
 echo json_encode($driverDetails);
    echo json_encode($vechicleDetails);
    echo json_encode($todaysdata); 
```

当我尝试只将一个 json 数据传递给 android 时，它正在正确我的 android 代码是

```
 public void getData(View v)
                  {
               HttpClient client = new DefaultHttpClient();
               HttpConnectionParams.setConnectionTimeout(client.getParams(), 10000); 
               HttpResponse response;

         try{
             HttpClient httpclient = new DefaultHttpClient();
               HttpPost httppost = 
                       new   HttpPost("http://10.0.2.2/Mebuddie/logins/login1");

               httppost.setEntity
                          (new UrlEncodedFormEntity(nameValuePairs, HTTP.UTF_8));
                response = httpclient.execute(httppost);
                StringBuilder builder = new StringBuilder();
             BufferedReader   reader = new BufferedReader
            (new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
                for (String line = null; (line = reader.readLine()) != null;) 
                      {
                    builder.append(line).append("\n");
                      }
             JSONTokener   tokener = new JSONTokener(builder.toString());
             JSONArray  finalResult = new JSONArray(tokener);
             Object type = new Object();
        if (finalResult.length() == 0 && type.equals("both")) 
            {
            System.out.println("null value in the json array");

                    }
      else {
              JSONObject   json_data = new JSONObject();
                        for (int i = 0; i < finalResult.length(); i++) 
                        {
                   json_data = finalResult.getJSONObject(i);
                   JSONObject menuObject = json_data.getJSONObject("Userprofile");

                            group_id= menuObject.getString("group_id");
                            id = menuObject.getString("id");

                    }
         catch (Exception e) {
                Toast.makeText(FirstMain.this,
                 "please enter a valid id or   pswd",Toast.LENGTH_LONG).show();
                 e.printStackTrace();
                    }

                  } 
```

**我需要在我的android代码中添加什么来接收多个json数据？？？有知道的请回复........**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:51:34.077

```
public void getData(View v)
{
    // TODO Auto-generated method stub
    try{
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://yourpagename");
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
        }catch(Exception e){
        Log.e("log_tag", "Error in http connection"+e.toString());
    }
    try{
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result=sb.toString();
        }catch(Exception e){
        Log.e("log_tag", "Error converting result"+e.toString());
    }
    return null;
}
protected void onPostExecute(Void v) {
    try{
        JSONArray jArray = new JSONArray(result);
        for(int i=0;i<jArray.length();i++)
        {
            JSONObject json_data = jArray.getJSONObject(i);
            String id=json_data.getString("id");
            String name=json_data.getString("name");
        }
    }
    catch(JSONException e){
        Log.e("log_tag", "Error parsing data "+e.toString());
    }
} 
```

在php方面，您在json中编码3个不同的数组。将它们全部放在一个数组中，然后对该单个数组进行编码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:12:15.673

```
while($row=mysql_fetch_assoc($sql))
{   
  $output[$i]['id'] = $row['$driverDetails'];
  $output[$i]['name'] = $row['$vechicleDetails'];

   $output[$i]['image']=$row['$todaysdata'];

  $i++;
} 
```

打印（json_encode（$输出））

# shell - 如何以正确的方式获得引用的论点？

> ID：14750282
> 
> 赞同：1
> 
> 时间：2013-02-07T11:41:48.373
> 
> 标签：shell, zsh

我有功能

```
calc() {echo "${1}"|bc -l;} 
```

它适用于 2+2 但当我想要类似的东西时 10^4

```
calc 10^4
zsh: no matches found: 10^4 
```

是的，我和 bc -l 一样

```
>>echo 10^4|bc -l
zsh: no matches found: 10^4 
```

但为了解决它，我添加了引号

```
>>echo "10^4"|bc -l
10000 
```

如何在功能中实现它？如果我这样做`"\"${1}\""`，它只会回显字符串...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:47:20.190

`^``EXTENDED_GLOB`在中启用选项时是一个特殊字符`zsh`。*它在你的函数被调用之前被扩展，所以在函数内部*没有可能的解决方法。

您可以完全禁用`EXTENDED_GLOB`：

```
setopt no_extended_glob 
```

或为交互式使用提供别名，该别名将扩展为`noglob calc`，防止文件名扩展：

```
alias calc='noglob calc' 
```

# json - JqG rid 不显示 JSON 数据

> ID：14750286
> 
> 赞同：0
> 
> 时间：2013-02-07T11:42:03.980
> 
> 标签：json, jsp, jqgrid

我在 JSP 中编写了代码，并使用 JSON 对象在 JqGrid 中显示数据。

我知道我的 JSON 对象有数据（我已经记录了它的内容），但它没有显示在 JqGrid 中。当我将 JSON 数据复制到 JSON 字符串中时，它会被加载并成功显示在 Jqgrid 中。

这是我的 JSP 代码：

```
JSONObject responcedata = new JSONObject();   
responcedata.put("total",totalrow);     
responcedata.put("page",cpage);     
responcedata.put("records",rcount);    
Report obj = new Report(); 
responcedata = obj.ReportGrid(responcedatal); 
System.out.println(responcedata); 
```

这是我的 JSON 对象的内容：

> {"total":"21″,"rows":[{"cell":["HS","H","10","5","G","9288"],"id":" 1″},{"cell":["",null,null,null,"G","2099"],"id":"2″},{"cell":["HS","F" ,"3","53","G","86578"],"id":"3″},{"cell":["HS","F","7","26"," G","8268"],"id":"4″},{"cell":["HS","F","8","54","G","221"],"id ":"5″},{"cell":["HS","F","5","77","G","1020"],"id":"6″},{"cell ":["HS","H","14","14","G","73334"],"id":"7″},{"cell":["HS","C","21","1 ","G&B","1512"],"id":"8″},{"cell":["HS","F","2","105","G","4960"] ,"id":"9″},{"cell":["HS","F","4","21","G","86889"],"id":"10″}] “记录”：11}G","4960"],"id":"9″},{"cell":["HS","F","4","21","G","86889"],"id ":"10″}],"记录":11}G","4960"],"id":"9″},{"cell":["HS","F","4","21","G","86889"],"id ":"10″}],"记录":11}

我使用了这个 JSON 字符串，而 JqGrid 正在显示数据。当我使用 JSON 对象时，变量`responcedata`（在上面的代码中）只显示加载，但从不显示数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:19:58.717

```
 function callMe() {
    $.ajax({
        type : "POST",
        url : "action name",
        data : {}
    }).done(function(data) {

                // dat has list there is 5 column (id,fname,lname,username,password)

        var len = data.length;

        var t="";
        for (var i=0; i<len; ++i) {
                var id =  data[i].id;
                var fname =  data[i].fname;
                var lname =  data[i].lname;
                var username =  data[i].username;
                var password =  data[i].password;                      
                t+="<tr><td>"+id+"</td><td>"+fname+"</td><td>"+lname+"</td><td>"+username+"</td><td>"+password+"</td></tr>"
         } 

         print(t,data);
    });
}

function print(t, data) {
    document.getElementById("welcometext").innerHTML = t;   
} 
```

在 html 中：

```
 <table id="welcometext" border="1">

    </table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:44:44.443

我在包含 json 数据的 Jsp 文件中包含了另一个 Jsp。我删除了包含行。现在它工作正常。

# javascript - javascript数据未定义

> ID：14750287
> 
> 赞同：0
> 
> 时间：2013-02-07T11:42:05.463
> 
> 标签：javascript

变量`CIMtrek_Attachement_1`变得未定义它没有检查它移动到这一行的 if 条件`var selecteditems = CIMtrek_Attachement_1.split("\\");`

```
var CIMtrek_Attachement_1= $("#CIMtrek_RegWhseCo_Attachement_1").val();

            alert("CIMtrek_Attachement_1=666666==>> "+CIMtrek_Attachement_1);
            if (CIMtrek_Attachement_1 !== null && CIMtrek_Attachement_1 !== "" && CIMtrek_Attachement_1 === undefined)
            {
                var selecteditems = CIMtrek_Attachement_1.split("\\");

                var filename = selecteditems[(selecteditems.length-1)];

                alert("selecteditems=666==>> "+selecteditems);
                alert("filename=66666==>> "+filename);

                nodeField = createNodeField(xmlDoc, new Array("FieldName"), "Record")
                nodeField.attributes[0].value = NewFormFields[i]

                nodeField.appendChild(xmlDoc.createTextNode(filename));

                rootElement.appendChild(nodeField);
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:44:28.080

试试`typeof(CIMtrek_Attachement_1) === undefined`:) 不应该是 !== 而不是 === 吗？

# jsf - 页面呈现期间异常的错误页面

> ID：14750288
> 
> 赞同：3
> 
> 时间：2013-02-07T11:42:07.630
> 
> 标签：jsf, omnifaces

在我的 JSF 应用程序的支持 bean 中，可能随时抛出某些异常，我想通过重定向到错误页面来对此做出反应。我已经包含了[omnifaces](http://omnifaces.org) FullAjaxExceptionHandler，我的`web.xml`包含

```
<error-page>
    <exception-type>my.own.ResourceNotFoundException</exception-type>
    <location>/error/error404.xhtml</location>
</error-page>
<error-page>
    <error-code>500</error-code>
    <location>/error/error500.xhtml</location>
</error-page> 
```

在大多数情况下，包括 Ajax 请求，这都能正常工作：`ResourceNotFoundException`将我带到错误页面。但是，当在带有 注释的方法中引发异常时`@PostConstruct`，我总是得到错误代码 500 的通用页面。

这是因为 JSF 将异常包装在其他东西中并且其中的机制`web.xml`无法识别它吗？如果是，我怎样才能让它按预期工作？

这是我在服务器日志中看到的异常跟踪：

```
 Feb 07, 2013 11:08:32 AM com.sun.faces.application.view.FaceletViewHandlingStrategy handleRenderException
SEVERE: Error Rendering View[/my/projects/details/details.xhtml]
javax.el.ELException: //P:/codebase/code/portal/jsf-impl/target/classes/META-INF/resources/common/title.xhtml: Bei der Ressourcen-Einspeisung auf dem verwalteten Bean projectDetailsController ist ein Fehler aufgetreten.
    at com.sun.faces.facelets.compiler.TextInstruction.write(TextInstruction.java:90)
    at com.sun.faces.facelets.compiler.UIInstructions.encodeBegin(UIInstructions.java:82)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:302)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:309)
    at com.sun.faces.renderkit.html_basic.GroupRenderer.encodeChildren(GroupRenderer.java:105)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    at com.sun.faces.renderkit.html_basic.CompositeRenderer.encodeChildren(CompositeRenderer.java:78)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:125)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at my.own.filters.SecurityFilter.doFilter(SecurityFilter.java:48)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.__invoke(StandardContextValve.java:185)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.__invoke(StandardHostValve.java:151)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at my.own.UTF8Valve.invoke(UTF8Valve.java:34)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:269)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: com.sun.faces.mgbean.ManagedBeanCreationException: Bei der Ressourcen-Einspeisung auf dem verwalteten Bean projectDetailsController ist ein Fehler aufgetreten.
    at com.sun.faces.mgbean.BeanBuilder.invokePostConstruct(BeanBuilder.java:229)
    at com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:105)
    at com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:409)
    at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:269)
    at com.sun.faces.el.ManagedBeanELResolver.resolveBean(ManagedBeanELResolver.java:244)
    at com.sun.faces.el.ManagedBeanELResolver.getValue(ManagedBeanELResolver.java:116)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at org.apache.el.parser.AstIdentifier.getValue(AstIdentifier.java:71)
    at org.apache.el.parser.AstValue.getValue(AstValue.java:147)
    at org.apache.el.parser.AstDeferredExpression.getValue(AstDeferredExpression.java:44)
    at org.apache.el.parser.AstCompositeExpression.getValue(AstCompositeExpression.java:50)
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    at javax.faces.component.UIComponentBase$AttributesMap.get(UIComponentBase.java:2362)
    at com.sun.faces.el.CompositeComponentAttributesELResolver$ExpressionEvalMap.get(CompositeComponentAttributesELResolver.java:345)
    at javax.el.MapELResolver.getValue(MapELResolver.java:52)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at org.apache.el.parser.AstValue.getValue(AstValue.java:169)
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
    at com.sun.faces.facelets.el.ELText$ELTextVariable.writeText(ELText.java:227)
    at com.sun.faces.facelets.el.ELText$ELTextComposite.writeText(ELText.java:150)
    at com.sun.faces.facelets.compiler.TextInstruction.write(TextInstruction.java:85)
    ... 43 more
Caused by: com.sun.faces.spi.InjectionProviderException
    at com.sun.faces.vendor.WebContainerInjectionProvider.invokeAnnotatedMethod(WebContainerInjectionProvider.java:119)
    at com.sun.faces.vendor.WebContainerInjectionProvider.invokePostConstruct(WebContainerInjectionProvider.java:99)
    at com.sun.faces.mgbean.BeanBuilder.invokePostConstruct(BeanBuilder.java:223)
    ... 66 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.faces.vendor.WebContainerInjectionProvider.invokeAnnotatedMethod(WebContainerInjectionProvider.java:117)
    ... 68 more
Caused by: my.own.ResourceNotFoundException: Did not find project
    at my.own.projects.details.ProjectDetailsController.createModel(ProjectDetailsController.java:198) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T15:22:48.533

正如您的日志所暗示的，`ResourceNotFoundException`它包含在其他四个异常中。

您可以开发自己的 CustomExceptionHandler ，就像[Duke's Forest 示例](http://docs.oracle.com/javaee/6/tutorial/doc/glnpw.html)中的那样，而不是使用omnifaces FullAjaxExceptionHandler 甚至扩展它并降低原因，直到您到达`ResourceNotFoundException`然后使用`NavigationHandler`重定向到所需的错误页面。

这是来自 Duke's Forest 示例的相关类和 faces-config.xml 的编辑版本。即使在`@PostConstruct`方法中发生异常，这也应该按您的预期工作：

CustomExceptionHandlerFactory.java

```
package com.forest.exception;

public class CustomExceptionHandlerFactory extends ExceptionHandlerFactory {
   private ExceptionHandlerFactory parent;

   // this injection handles jsf
   public CustomExceptionHandlerFactory(ExceptionHandlerFactory parent) {
       this.parent = parent;
   }

    @Override
    public ExceptionHandler getExceptionHandler() {

        ExceptionHandler handler = new CustomExceptionHandler(parent.getExceptionHandler());

        return handler;
    }

} 
```

CustomExceptionHandler.java

```
package com.forest.exception;

public class CustomExceptionHandler extends ExceptionHandlerWrapper {
    private static final Logger log = Logger.getLogger(CustomExceptionHandler.class.getCanonicalName());
    private ExceptionHandler wrapped;

    CustomExceptionHandler(ExceptionHandler exception) {
        this.wrapped = exception;
    }

    @Override
    public ExceptionHandler getWrapped() {
        return wrapped;
    }

    private boolean includesResourceNotFoundException(Throwable t) {
        if(t == null) {
            return false;
        else {
            return t instanceof ResourceNotFoundException || includesResourceNotFoundException(t.getCause());
        }
    }

    @Override
    public void handle() throws FacesException {

        final Iterator<ExceptionQueuedEvent> i = getUnhandledExceptionQueuedEvents().iterator();
        while (i.hasNext()) {
            ExceptionQueuedEvent event = i.next();
            ExceptionQueuedEventContext context =
                    (ExceptionQueuedEventContext) event.getSource();

            // get the exception from context
            Throwable t = context.getException();

            final FacesContext fc = FacesContext.getCurrentInstance();
            final Map<String, Object> requestMap = fc.getExternalContext().getRequestMap();
            final NavigationHandler nav = fc.getApplication().getNavigationHandler();

            //here you do what ever you want with exception
            if(hasResourceNotFoundException(t) {
                try {
                    //log error ?
                    log.log(Level.SEVERE, "Critical Exception!", t);

                    //redirect error page
                    requestMap.put("exceptionMessage", t.getMessage());
                    nav.handleNavigation(fc, null, "/error/error500?face-redirect=true");
                    fc.renderResponse();
                } finally {
                    //remove it from queue
                    i.remove();
                }
            }
        }
        //parent hanle
        getWrapped().handle();
    }
} 
```

faces-config.xml（部分）

```
<factory>
        <exception-handler-factory>
            com.forest.exception.CustomExceptionHandlerFactory
        </exception-handler-factory>
</factory> 
```

# c# - 如何在 C# 中反向显示事件输出？

> ID：14750290
> 
> 赞同：1
> 
> 时间：2013-02-07T11:42:09.030
> 
> 标签：c#, events

当我执行以下代码时，它执行 12 年 2 月 2 日的输出，我想显示今天的输出，然后是昨天，然后是前天。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace @event
{
    using System.Diagnostics;
    class MySample
    {
        public static void Main()
        {
            string eventLogName = "System";
            string sourceName = "BTHUSB";
            string machineName =".";
            EventLog eventLog;
            eventLog = new EventLog();
            eventLog.Log = eventLogName;
            eventLog.Source = sourceName;
            eventLog.MachineName = machineName;
            int i;
            i = 0;

            foreach (EventLogEntry log in eventLog.Entries)
            {
                i = i + 1;
                if(log.EntryType.ToString()=="Error")
                Console.WriteLine((i)+") Entry type: {0} , Category: {1},  Data: {2}, ID: {3}, Source: {4} \n",log.EntryType,log.TimeWritten.ToLocalTime(),log.Data,log.EventID,log.Source);
            }
        }
    }
} 
```

请帮我解决这个问题....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:44:53.243

一个简单的[Reverse](http://msdn.microsoft.com/en-gb/library/bb358497.aspx)调用就可以做到：

```
foreach (var log in eventLog.Entries.Cast<EventLogEntry>().Reverse()) {...} 
```

# ruby - Ruby TestUnit 中是否有类似于 RSpec 的 shared_examples_for 的功能

> ID：14750294
> 
> 赞同：1
> 
> 时间：2013-02-07T11:42:16.430
> 
> 标签：ruby, rspec, code-reuse, testunit

我在 Ruby 中有几个相同接口的实现。我想用相同的测试用例集来测试它们（只需用实现类或实例对它们进行参数化）。我怎样才能做到这一点？

# java - 在hibernate中设置自动增量字段的id没有正确保存

> ID：14750297
> 
> 赞同：1
> 
> 时间：2013-02-07T11:42:26.773
> 
> 标签：java, mysql, hibernate

账户类：

```
@Entity

@Table(name = "Account")

public class Account {

...

private String accountId;
...

@Id
@GeneratedValue
@Column(name = "accountId")
public String getAccountId() {
    return accountId;
}

public void setAccountId(String accountId) {
    this.accountId = accountId;
}

... 
```

* * *

如果我尝试这样做：

```
temp = new Account();

temp.setAccountId(tempId); //
session.save(temp);
System.out.println("accountid...." + temp.getAccountId()); 
```

它打印一个不等于 tempId 的 accountId，我认为它是因为它是表中的自动增量字段

另一方面，如果我这样做：

```
temp = new Account();

session.save(temp);
temp.setAccountId(tempId);
session.merge(temp); 
```

我得到例外：

```
org.hibernate.HibernateException: identifier of an instance 
of ... was altered from 1244 to 1221 
```

我怎样才能覆盖身份证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:20:26.573

首先，您不能将值分配给生成的字段。它将被生成的替换。它是一种预期的行为。

其次，你不能改变id。所有实体都通过其 id 映射到数据库。如果你改变一个 id，它就是一个新的实体。你不能更新它，你必须保存它。

我认为任何 JPA 实现都没有覆盖 id 机制。如果您想自己设置 id 就可以了，然后删除 GeneratedValue 注释并对您的持久性存储执行相同的操作。然后您可以将您的值保存为 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:07:23.390

如果您想使用特定 id 并且数据库中已经存在具有该 id 的实体，则必须首先从会话中获取实体：

```
Account a = session.get(Account.class, id); 
```

然后进行更改并合并。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T11:50:06.833

您不必设置 id，当您持久化实体时，hibernate 会自动分配 id（根据使用生成的值注释定义的策略）。

不确定，但是您正在为您的想法使用 String 值，如何增加它？你不想用 Long 代替吗？

# jquery - Jquery listview 未更新

> ID：14750305
> 
> 赞同：0
> 
> 时间：2013-02-07T11:43:00.300
> 
> 标签：jquery, listview

嗨，在我的 html 页面中的部分之间跳转时，我在更新列表时遇到了问题。我猜这只是一个格式问题，因为所有行都正确显示，因此 xml 读取是正确的。我认为这可能是列表的刷新问题。如果我在刷新时使用此行，则不会发生任何事情，并且 xml 将不会被解析为开头。：

```
 $('#lists' + nextPage).listview("refresh") 
```

如果我将此行与 trigger() 一起使用而没有 listview 刷新，则列表仍将无法正确格式化，但 xml 将被解析并放入页面中。

```
 $('#lists' + nextPage).append("<li>"+rows+"</li>").trigger('create') 
```

这是我的 javascript 中的一小段内容：

```
 $(xml).find('swedish').each(function() {
        $(this).find('site[id="' + pageNum + '"]').each(function() {
            $(this).find('quiz').each(function() {
                $('#lists' + nextPage).text(''),
                $(this).find('row').each(function() {
                    rows = $(this).text(),
                    $('#lists' + nextPage).append("<li>"+rows+"</li>").trigger('create')
                    //$('#lists' + nextPage).listview("refresh")
                }); //each
            }); //each
        }); //each
    }); //within success function
    $.mobile.changePage("#page" + nextPage, {
        transition: "slide",
        reverse: false
    }) 
```

这是我的html中的一小部分：

```
 <section id="page1" data-role="page">
        <header data-role="header" id="quiz">
            <table border="0" align="center">
                <tr align="center">
                    <td align="right"><h3>Quiz</h3></td>
                    <td align="left"><div id="pagecounter1">
                            <h3>0</h3>
                        </div></td></tr
                ></table>
        </header>

        <ul id="lists1" data-role="listview">
        </ul>
    </section> 
```

我希望它的格式类似于您使用以下命令创建列表视图：“data-role="listview" 您可以在代码中看到我正在这样做，但它看起来像这样的未格式化列表：

```
 item1
    item2
    item2
    ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:05:11.377

尝试这个：

```
var list = "<ul data-role=" + "'listview'" + "><li>"+rows+"</li></ul>";
$('your list container selector').append(list).listview().trigger('create'); 
```

# javascript - 部署 coffescript 的首选工作流程是什么？

> ID：14750306
> 
> 赞同：0
> 
> 时间：2013-02-07T11:43:01.843
> 
> 标签：javascript, deployment, coffeescript

我应该将`.coffee`文件存储在 git 中并使用一些 git 钩子在服务器端编译它们，还是应该将文件`.coffee`和`.js`文件都存储在 SCM 中而忽略服务器上的咖啡？

除了额外的 SCM 空间使用之外，存储已编译的 .js 文件是否有任何缺点？我宁愿不必在每台服务器上安装 node、npm 和 coffee。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:16:08.867

我见过的工作流是针对 Rails 和 Node.js 的。我目前的流程是基于它们的，看起来像：

1.  将 .coffee 文件保存在`/assets/src/coffee`
2.  保留已编译的 .js 文件`/assets/js`并将其引用为`/js/foo.js`
3.  将应用程序外部的 .js 文件（例如绘图实用程序）保存在`/assets/lib`
4.  `/assets/js`从源代码管理中排除
5.  设置您的中间件以即时编译咖啡脚本文件（如果尚未编译）。`connect-coffee-script`是我最喜欢的那个。

据我所知，Rails 中的过程非常相似。

> 除了额外的 SCM 空间使用之外，存储已编译的 .js 文件是否有任何缺点？我宁愿不必在每台服务器上安装 node、npm 和 coffee。

我认为没有充分的理由将已编译的 js 放入源代码中——您的中间件应该处理将咖啡转换为 js 的问题。我也认为在你的服务器上安装咖啡并没有什么坏处——你应该在构建过程中进行 npm 更新，这应该会处理好它。

这是设置它的代码：

```
var app = express();
  ...
srcFolder = path.join(__dirname, 'assets', 'src', 'coffee');
publicFolder = path.join(__dirname, 'assets');

app.configure(function () {
  ...
app.use(require('connect-coffee-script')({
    src:srcFolder, dest:path.join(publicFolder, 'js'), force:true
})); 
```

还需要注意的是，我在 Windows 7 上遇到了一些问题。节点的文件观察者似乎有一些问题。所以我在开发时必须有一个运行这个命令窗口：`coffee -o ./assets/js -wc ./assets/src/coffee`.

# java - 究竟什么是数据源？它有什么区别？

> ID：14750308
> 
> 赞同：0
> 
> 时间：2013-02-07T11:43:05.440
> 
> 标签：java, jdbc, jdbc-odbc

当我尝试与 Oracle 数据库建立连接时，我不得不写

```
Connection CON = DriverManager.getConnection("jdbc:odbc:Dan", "system", "noodles"); 
```

这里，`Dan`是数据源名称，不是吗？如果我创建了一个名为`cBC`when 数据源是的表`Dan`，如果我重命名数据源并在表中输入更多行怎么办？它有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:53:04.543

`Dan`是您机器上配置的 ODBC 连接的名称。名字本身无所谓，只要配置连接的数据库是一样的，你叫它`Dan`还是`MyDatabase`.都无所谓`foobar`。

请注意，这种访问外部配置的数据库的特定方式不是 JDBC 通常所做的事情，它是 JDBC-ODBC 桥的特定行为（它允许您通过 JDBC 访问 ODBC 连接）。

其他 JDBC 驱动程序（例如 MySQL）使用不同的语法，其中访问数据库的必要配置编码在 URL 中：`jdbc:mysql://myDbServer/myDbName`.

另请注意，[JDBC-ODBC 桥](http://docs.oracle.com/javase/7/docs/technotes/guides/jdbc/bridge.html)从未用于生产质量的数据库连接（它甚至会在 Java 8 中被删除！）。这只是使用现有设置的一种快速方法。

对于 Oracle DB 连接，您应该改用[来自 Oracle 的适当的 Type 4 驱动程序](http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html)。那些驱动程序使用表单中的 URL `jdbc:oracle:thin:@//<host>:<port>/ServiceName`（一般来说，后面的部分`jdbc:`标识要使用的 JDBC 驱动程序）。

# android - 如何停止在我的应用程序中拦截 Zxing 意图？

> ID：14750309
> 
> 赞同：1
> 
> 时间：2013-02-07T11:43:06.363
> 
> 标签：android, android-intent, zxing

我刚刚给开发者发了邮件，问他这件事。

基本上，我遵循了这个： [http ://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/](http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/)

我为之工作的人不允许我使用 Intent 机制（同样的老理由......不能让用户安装另一个应用程序），所以我必须在我的应用程序中集成扫描功能。

我想确保我的应用程序不会拦截 QR 码扫描仪应用程序的意图。现在，它正在这样做（在我的清单中..）

我是否需要重命名 ZXing 库项目（及其所有包）？如果我确实需要，我会怎么做？（重构？）

请记住，我确实需要他们的应用程序库中的 QR 扫描功能。

请帮忙。我是新来的 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:33:52.210

您删除`<intent-filter>`了您不使用的声明。理想情况下，不要在我们的命名空间中使用任何东西——任何人都不应该在第三方应用程序中。

# hadoop - 不能通过管道传输两个 hadoop 命令？

> ID：14750310
> 
> 赞同：1
> 
> 时间：2013-02-07T11:43:08.940
> 
> 标签：hadoop, ssh, elastic-map-reduce

我想运行以下命令：

```
hadoop fs -ls hdfs:///logs/ | grep -oh "/[^/]*.gz" | grep -oh "[^/]*.gz" | hadoop fs -put - hdfs:///unzip_input/input 
```

当我在 ssh 到主节点后从 shell 调用它时，它可以工作。但是如果我尝试通过 ssh 调用它，它将不起作用，如下所示：

```
ssh -i /home/USER/keypair.pem hadoop@ec2-XXXX.compute-1.amazonaws.com hadoop fs -ls hdfs:///logs/ | grep -oh "/[^/]*.gz" | grep -oh "[^/]*.gz" | hadoop fs -put - hdfs:///unzip_input/input 
```

它给出了错误：

```
zsh: command not found: hadoop 
```

但是，如果我取出最后一个管道，则命令成功：

```
ssh -i /home/USER/keypair.pem hadoop@ec2-XXXX.compute-1.amazonaws.com hadoop fs -ls hdfs:///logs/ | grep -oh "/[^/]*.gz" | grep -oh "[^/]*.gz" 
```

通过一些搜索，我发现这可能是由于未设置 JAVA_HOME 的错误，但它在主节点上的 ~/.bashrc 中设置正确

hadoop 集群是一个 Amazon Elastic Map Reduce 集群。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:54:54.847

只有管​​道命令链的第一个命令会在远程主机上执行。其余的在您的计算机上本地进行。所以，当然，如果你没有安装 hadoop，zsh 会打印出一条错误消息（否则，它只会把它放到你本地的 Hadoop 上，这可能不是你想要的。

要将所有命令传递给 ssh，您可以将它们放在引号 "" 或单引号 '' 中：

```
ssh -i /home/USER/keypair.pem hadoop@ec2-XXXX.compute-1.amazonaws.com 'hadoop fs -ls hdfs:///logs/ | grep -oh "/[^/]*.gz" | grep -oh "[^/]*.gz" | hadoop fs -put - hdfs:///unzip_input/input' 
```

# java - 将地图或对象从 jsp 传递到 servlet

> ID：14750313
> 
> 赞同：3
> 
> 时间：2013-02-07T11:43:16.640
> 
> 标签：java, jsp, servlet-3.0

我有一个将映射从 servlet 传递到 jsp 的应用程序。在 jsp 中，我显示地图并提供删除或编辑地图值的选项。但是，在更改值后，如何将地图发送回另一个 servlet，在那里它接收地图。

假设，我有一个servet“servletA”，它将映射传递给jsp，如下所示：

```
public int Id=11111;
Map<String,String> configParamsMap=new HashMap<String,String>(size);
    configParamsMap.put("1", "arg1");
    configParamsMap.put("2", "arg2");
    configParamsMap.put("3", "arg3");
    configParamsMap.put("4", "arg4");
    //
    System.out.println("parameters passing to the jsp:: appId"+appId+"::configId"+configId);
    request.setAttribute("configParamsMap", configParamsMap);
    request.setAttribute("Id", Id);

    RequestDispatcher rd = request.getRequestDispatcher("/JSP/display.jsp");
    rd.forward(request, response); 
```

在 jsp 中，我可以删除或编辑这些值。我正在按如下方式进行删除并传递参数

```
<c:forEach var="configParams" items="${configParamsMap}">
    <!--  KEY: ${configParams.key}  - VALUE: ${configParams.value} -->

    <tr>
        <td>
        <c:out value="${configParams.key}" />
        </td>
        <td><input type="text" name="" value="${configParams.value}" /></td>

    </tr>
</c:forEach>
</table>
<form action="sevletB?action=Delete" method="post"><input
type="submit" value="Delete"></input>
<input type="hidden" name="Id" value="${Id}"></input>   
</form> 
```

我的问题是如何将映射传递回另一个 servlet "servletB"，就像我对参数 "id" 所做的那样。该地图应该是用户编辑了一些值的地图，即在 jsp 中地图的当前状态。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T12:16:53.073

将所有代码写在表单标签内。

使用此代码：

```
<c:forEach var="configParams" items="${configParamsMap}" varStatus="itemsRow">
   <tr>
        <td>
        <c:out value="${configParams.key}" />
        </td>
        <td><input type="text" name="" value="${configParams.value}" /></td>
  </tr>
</c:forEach> 
```

使用将包含`${configParams.key}`值的隐藏字段。使用循环迭代器`${itemsRow.index}`来制作可区分的参数名称，例如

`<input type="text"name="configParam.${itemsRow.index}"value="${configParams.value}" />`

提交表单时，您可以通过在`getParameter('')`方法中提供名称来从请求中访问所有这些值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T13:30:32.250

好吧，您不能通过 HTTP 请求传递 Map。我想您想跟踪所有更改，尤其是从 JSP 到服务器端的删除

因此，与其将其存储在 request 中，不如将其存储在 session **中的 JSP中**

```
session.setAttribute("configParamsMap", configParamsMap); 
```

**并在您的 servlet 中获取要从请求中删除的 id**

```
 String idToDelete = request.parameter("id");

    //Now delete the id from the map
    Map<String,String> configParamsMap = (Map<String,String>)session.getAttribute("configParamsMap");

//Delete it from the map
configParamsMap.remove(idToDelete ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T11:56:44.123

*   你可以有一个隐藏`<input type=Select>`
*   填充地图的值

> ```
> <select name="mapname" type="hidden??">
>     <c:forEach items="${mapitem}" var="mapname">
>         <option value="${mapitem.key}">${mapitem.value}</option>
>     </c:forEach>
> </select> 
> ```

*   提交给 servletB（在 servletB 中读取）

# sql - 如何更改列的数据类型而不删除它

> ID：14750314
> 
> 赞同：0
> 
> 时间：2013-02-07T11:43:22.863
> 
> 标签：sql, sql-server, tsql

```
CREATE TABLE DEPARTMENT(
DEPARTMENT_NAME VARCHAR(25) NOT NULL PRIMARY KEY ,
BUDGET_CODE INT NOT NULL,
OFFICE_NUM INT NOT NULL, 
PHONE NUMERIC NOT NULL ,
); 
```

我有我正在创建的这张表，但我想在 varchar 而不是 int 中更改预算代码和办公室号码。有没有办法做到这一点。该表通过外键链接到其他表。所以我不能放弃它并创建一个新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:54:43.623

尝试这个

```
ALTER TABLE dbo.DEPARTMENT
ALTER COLUMN BUDGET_CODE VARCHAR(100)
ALTER COLUMN OFFICE_NUM VARCHAR(100) 
```

# c# - 尝试将数据集添加到 RDLC 报告时出现未记录的错误

> ID：14750315
> 
> 赞同：1
> 
> 时间：2013-02-07T11:43:30.077
> 
> 标签：c#, asp.net, report, rdlc, microsoft-reporting

![在此处输入图像描述](../Images/2fbfd271b88def0431c5f4765e9a249e.png)

当我尝试在现有项目的 rdlc 报告中添加数据集时，然后显示此错误。我已经重建了这个项目中的所有程序集，但它不起作用。

# sml - 查找是否存在重复 SML NJ 对面

> ID：14750319
> 
> 赞同：1
> 
> 时间：2013-02-07T11:43:50.763
> 
> 标签：sml, smlnj

关于一个较旧的问题[Find if Duplicates Exist SML NJ](https://stackoverflow.com/questions/10033165/find-if-duplicates-exist-sml-nj)，如果我想要相反的结果：

```
[1,2,2,3,4,5,6] should return false
[1,2,3,4,5,6,7] should return true
[1,2,3,4,5,6,1] should return false 
```

我怎样才能拥有它：

```
fun duplicated [] = false
| duplicated (x::xs) = (List.exists (fn y => x = y) xs) orelse (duplicated xs) 
```

例如，

```
fun non_duplicated ps =
case ps of
[] => false
| x::xs' => (List.exists (fn y => x<>y) xs') andalso (non_duplicated xs') 
```

不起作用。

为什么？？？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T11:53:13.287

如果您想获得相反的结果，只需将函数定义如下：

```
fun non_duplicated xs = not (duplicated xs) 
```

也就是说，您可以使用[De Morgan 定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)`not`向内推函数体：`duplicated`

```
not (a orelse b) <=> (not a) andalso (not b)
not exists equal <=> forall (not equal)
not false <=> true 
```

然后你到达相反的版本：

```
fun non_duplicated [] = true
  | non_duplicated (x::xs) = 
      (List.forall (fn y => x <> y) xs) andalso (non_duplicated xs) 
```

# wpf - 在视图模型中验证 DateTime 属性

> ID：14750324
> 
> 赞同：1
> 
> 时间：2013-02-07T11:43:58.220
> 
> 标签：wpf, validation, data-binding, mvvm, datepicker

我的 viewmodel 类中有一个 DateTime 属性（比如 DateVal），而 View 中有一个 DatePicker 控件。

```
 <DatePicker         Grid.Column="1"
                        Width="100"
                        Height="30"
                        SelectedDate="{Binding DateVal,ValidatesOnDataErrors=True}"/> 
```

问题是，如果用户删除 Datepicker 控件的文本框中显示的日期，DateVal 属性不会更改其值。如何跟踪用户已删除日期选择器文本框中显示的日期？问候， 阿尼尔班

日期选择器控件如下所示 ![编辑日期选择器文本框之前的日期选择器](../Images/d7d5008cbcb3a073b85862221e6056de.png) 现在如果用户只是删除日期选择器文本框中显示的日期，控件如下所示 ![编辑日期选择器文本框后的日期选择器](../Images/f28154d69f6e93d3d9e6e8439caecf4c.png) 此时 DateVal 的值与之前相同。仅当用户单击日历图标时 Date 才被分配一个 null 值。当用户使文本框为空时，如何同时跟踪更改？

视图模型代码

```
public DateTime? DateVal
    {
        get
        {
            return this.dateVal;
        }
        set
        {
            this.dateVal = value;
            this.OnPropertyChanged("DateVal");
        }
    } 
```

xml代码

```
<DatePicker Name="datePickerDateVal"
                        Grid.Column="1"
                        Width="100"
                        Height="30"
                        SelectedDate="{Binding DateVal,ValidatesOnDataErrors=True}"
                        Text="{Binding DateVal,ValidatesOnDataErrors=True,UpdateSourceTrigger=PropertyChanged}"                          /> 
```

我希望当用户清除 Date Picker 文本框时必须调用 DateVal 的 setter 属性

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T14:07:52.513

不幸的是，DatePicker 的文本框设置为*仅*在失去焦点时才更新其绑定源。好消息是您可以通过`DatePicker`'s连接到该过程`ControlTemplate`：

**XAML：**

```
<DatePicker SelectedDate="{Binding DateVal}" x:Name="__picker" /> 
```

**以及背后的代码：**

```
DateTime? _dateVal = DateTime.Today;

public Nullable<DateTime> DateVal
{
    get { return _dateVal; }
    set
    {
        if (_dateVal == value)
            return;

        _dateVal = value;
        OnPropertyChanged("DateVal");
    }
}

private void Window_Loaded(object sender, RoutedEventArgs e)
{
    DatePickerTextBox pickerTextBox = __picker.Template.FindName("PART_TextBox", __picker) as DatePickerTextBox;
    if (pickerTextBox == null)
        return;

    pickerTextBox.TextChanged += new TextChangedEventHandler(pickerTextBox_TextChanged);
}

void pickerTextBox_TextChanged(object sender, TextChangedEventArgs e)
{
    DatePickerTextBox tb = sender as DatePickerTextBox;

    if (tb == null)
        return;

    if (string.IsNullOrEmpty(tb.Text))
    {
        __picker.SelectedDate = null;
    }
} 
```

我只是摆弄它，我的猜测是你没有得到更频繁更新的原因是文本和选定日期属性之间的循环关系。不过，确保我们获得 null DateTimes 的更新应该没问题。

**编辑**

更新了事件处理程序以更新选择器`SelectedDate`属性，而不是视图模型中的属性。这样，您可以将 hack 完全保留在视图中，同时保持与视图模型无关。

# javascript - 当div被点击时，检查对应的radio input jquery

> ID：14750325
> 
> 赞同：0
> 
> 时间：2013-02-07T11:44:02.817
> 
> 标签：javascript, jquery, html, radio

这是我的问题，我希望整个 div 都可以单击，单击时我需要检查 div 中包含的单选按钮，因此 div 本身就充当收音机。这是我认为可以使用的；

`$('#content').click(function(e) { $('input:radio[name="id_"]').prop('checked', true); });`

但这不是选择 div 内的相对无线电。我想我可以使用`this`选择器，对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T11:52:48.883

你没有给出任何代码，所以我猜：

## 演示

[在 CodePen 上查看我的演示](http://codepen.io/ByScripts/pen/hmwEc)

## HTML

```
<div class="content">
  <input type="radio" name="foo">
</div>

<div class="content">
  <input type="radio" name="foo">
</div>

<div class="content">
  <input type="radio" name="foo">
</div> 
```

## CSS（例如）

```
.content {
  float: left;
  width: 100px;
  padding-top: 100px;
  background-color: #eee;
  margin-left: 10px;
} 
```

## JS (JQUERY)

```
$('.content').click(function(){
  $(this).find('input[type=radio]').prop('checked', true);
}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T11:48:34.897

是的，您可以使用`this`选择器。我制作了一个快速的[jsfiddle 来向您展示一个示例](http://jsfiddle.net/XSNLz/10/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T11:51:20.103

这应该这样做。

```
$('input:radio[name*="id_"]'), assuming the name starts with id_ 
```

是的，您可以使用`this`. 用它来过滤它的孩子，比如：

`$(this).children('input:radio[name*=id_]').prop("checked", true)`

关键是使用`name*=id_`

这意味着选择名称以 开头的元素`id_`。这不是你想要的吗？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-07T11:52:21.433

```
$('#content').click(function(){
$(this).children('radio').attr('checked','checked')
}) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T11:55:13.970

试试这个：

```
$('div').click(function(){
     if( $('div').find('input:checkbox').prop("checked") == true){
         $('div').find('input:checkbox').prop("checked", false);
     }
     else{
         $('div').find('input:checkbox').prop("checked", true);
     }
}); 
```

[现场演示](http://jsfiddle.net/sohelkhalifa/8mS2R/15/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-07T12:00:14.673

建立在 Deif 的解决方案上，这将在单击 div 时切换选中状态

[小提琴](http://jsfiddle.net/XSNLz/1/)

```
<div id="content">
    Some content
    <input type="radio" id="radio1" value="test" />
</div>

<script type="text/javascript">
$('#content').click(function () {    
   var val =  $(this).find('input:radio').prop('checked')?false:true;
   $(this).find('input:radio').prop('checked', val);
});
</script> 
```

# android - 隐藏一个 android ListView 直到输入搜索字符串

> ID：14750330
> 
> 赞同：1
> 
> 时间：2013-02-07T11:44:15.510
> 
> 标签：android, listview, search-box

我已经按照本教程[http://www.androidpeople.com/android-listview-searchbox-sort-items](http://www.androidpeople.com/android-listview-searchbox-sort-items)进行了搜索，并且在列表中进行了搜索。我想做的唯一更改是最初隐藏列表视图，并且结果仅在用户开始输入时出现。有没有办法做到这一点？

编辑：添加代码。

```
package com.example.testapp;

import java.util.ArrayList;

import android.app.Activity;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.Menu;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.EditText;
import android.widget.ListView;

public class MainActivity extends Activity {
/** Called when the activity is first created. */
private ListView lv1;
private EditText ed;
private String lv_arr[]=  {"Android","Cupcake","Donut","Eclairs","AndroidPeople","Froyo",};
private ArrayList<String> arr_sort= new ArrayList<String>();
int textlength=0;
@Override
public void onCreate(Bundle icicle)
{
super.onCreate(icicle);
setContentView(R.layout.activity_main);
lv1=(ListView)findViewById(R.id.ListView);
ed=(EditText)findViewById(R.id.EditText01);
// By using setAdpater method in listview we an add string array in list.
lv1.setAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1 ,   lv_arr));
ed.addTextChangedListener(new TextWatcher() {

public void afterTextChanged(Editable s) {
if(lv1.getVisibility() != View.VISIBLE)
    lv1.setVisibility(View.VISIBLE);
}

public void beforeTextChanged(CharSequence s, int start, int count,
int after) {
}

public void onTextChanged(CharSequence s, int start, int before,
int count) {

textlength=ed.getText().length();
arr_sort.clear();
for(int i=0;i<lv_arr.length;i++)
{
if(textlength<=lv_arr[i].length())
{
if(ed.getText().toString().equalsIgnoreCase((String) lv_arr[i].subSequence(0,    textlength)))
{
arr_sort.add(lv_arr[i]);
}
}
}

lv1.setAdapter(new ArrayAdapter<String>    (MainActivity.this,android.R.layout.simple_list_item_1 , arr_sort));

} 
});
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:48:58.960

我会这样做：

```
 EditText etSearch = (EditText) getView().findViewById(R.id.etSearch);
    etSearch.addTextChangedListener(new TextWatcher(){
            public void afterTextChanged(Editable s) {
                if(view.getVisibility() != View.Visible)
                       view.setVisiblity(View.Visible);
            }
            public void beforeTextChanged(CharSequence s, int start, int count, int after){}
            public void onTextChanged(CharSequence s, int start, int before, int count){}
        }); 
```

# highcharts - 堆积柱形图的显示

> ID：14750331
> 
> 赞同：0
> 
> 时间：2013-02-07T11:44:15.907
> 
> 标签：highcharts

我正在渲染一个堆积柱形图。我的“问题”是这些列似乎一个接一个地位于另一个之后，而不是一个在另一个之上，可以说为列添加了一个“深度”。

是否有设置让列以“平面”方式出现，一个在另一个之上？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:45:59.357

你应该设置堆叠参数[参考这个链接](http://api.highcharts.com/highcharts#plotOptions.column.stacking)

# c++ - 如果两个字母都大写或都小写不起作用，则返回true的函数，c ++

> ID：14750332
> 
> 赞同：-1
> 
> 时间：2013-02-07T11:44:17.937
> 
> 标签：c++, char, boolean, uppercase, lowercase

```
#include <iostream>
using namespace std;

char myChar_1 = 'a';
char myChar_2 = 'b';
char checkChar(char myChar_1,char myChar_2){
    if ((isupper(myChar_1) && isupper(myChar_2)) || (islower(myChar_1) && islower(myChar_2))) {
        return true;
    }
    else{
        return false;
    }

}

int main()
{
    cout << checkChar(myChar_1, myChar_2); 
```

}

输出是一个倒置的问号。如果有人能告诉我我做错了什么，那就太好了。尼可

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T11:45:12.680

您的返回类型应该是`bool`. 您将返回`true`and `false`as `char`s 然后输出该字符。当从转换`bool`为整数类型时，`true`转换为 1 并`false`转换为 0。因此，您打印出`char`值为 0 或 1 的 s。

# javascript - 实现 Sencha Touch ListPaging 插件

> ID：14750337
> 
> 赞同：2
> 
> 时间：2013-02-07T11:44:29.203
> 
> 标签：javascript, html, extjs, sencha-touch

我有一个简单的 Sencha Touch 联系人/用户应用程序，它显示一个列表，然后披露更多详细信息。

我使用我们的 API 通过 Ext.Ajax.request 到达我的服务器以获取用户并填充列表。但是，totalcount 通常在 500 以上，所以我需要实现 ListPaging 插件。出于安全原因，我很确定我不能使用“代理”方法（因为我必须使用“令牌”来验证请求）。也许我错了；文档很少，所以我需要一个提升。

我的服务器返回以下内容：

```
 data: [,…]
    hasnextpage: true
    haspreviouspage: false
    pageindex: 0
    pagesize: 9999
    success: true
    totalcount: 587
    totalpages: 14 
```

我的店铺：

```
 Ext.define('MyApp.store.StudentStore',{
        extend: 'Ext.data.Store',
        config:{
           storeId: 'Students', 
           model:'MyApp.model.people',
           autoLoad:false,
           remoteFilter:true,      //just trying stuff I've read about
           sortOnFilter:true,
           clearOnPageLoad: false,
           grouper: {
                 groupFn: function(record) {
                   return record.get('lastname')[0];
                 }
           },
           sorters: 'lastname'
        }
    }); 
```

我的列表视图：

```
Ext.define('MyApp.view.MainPanel', {
    extend: 'Ext.dataview.List',
    alias : 'widget.mainPanel',
    requires: [
        'MyApp.store.StudentStore',
        'Ext.plugin.ListPaging'
    ],

    config: {
        store : 'Students',
        model: 'people',
        grouped:true,
        sorters: 'lastname',
        itemTpl: new Ext.XTemplate(
                '<tpl for=".">'+                    
                    '<h1>{firstname:ellipsis(45)} {lastname:ellipsis(45)}</h1>' +
                    '<h4>{grade} grade</h4>' +
                '</tpl>'
        ),
        plugins: [{
            xclass: 'Ext.plugin.ListPaging',
            autoPaging: true,
            bottom: 0,
            loadMoreText: ''
        }]           
    }
}); 
```

当屏幕滚动到底部时，我想利用 ListPaging 插件自动加载接下来的 45 个用户。任何意见是极大的赞赏！

**编辑：已解决！**

@arthurakay - 你是对的，我的“令牌”肯定在某个时候被破坏了。由于我的 API 需要每个请求的令牌，我能够创建一个“beforeload”函数，在其中设置我的代理，使用我在登录时收到的令牌——在需要调用 ListPaging 之前。因此，当用户准备好滚动并激活 ListPaging 时，我的令牌与我从服务器收到的第一条记录一起存储，并且每次用户滚动到底部时神奇地增加了 50 条记录。

我真的希望这对某人有帮助！

```
Ext.define('MyApp.store.PersonStore',{
    extend: 'Ext.data.Store',
    config:{
        storeId: 'Persons',
        model:'MyApp.model.PersonModel',
        autoLoad:false,
        clearOnPageLoad: true,

        listeners: {
            beforeload: function(store){

                store.setProxy({
                    headers: {
                        Accept : 'application/json',
                        Authorization : 'Bearer:' + this.token
                    },
                    type: 'ajax',
                    pageParam: 'pageindex',
                    url: this.url,
                    extraParams: {
                        count: this.count
                    },
                    reader: {
                        type: 'json',
                        rootProperty:'data',
                        pageParam: 'pageindex',
                        totalProperty: 'totalcount'
                    }
                });
            }
        },

        grouper: {
            groupFn: function(record) {
                return record.data.lastname[0]
            }
        },
        sorters: 'lastname'
    },

    setParams: function(params){
        for (var prop in params){
            if (params.hasOwnProperty(prop)){
                this[prop] = params[prop];
            }
        }
    }
}); 
```

我在此处将商品添加到商店时添加了“setParams”：

```
 var feedStore = Ext.getStore('FeedStore');

        //call the setParams method that we defined in the store
        feedStore.setParams({
            token: TOKEN,
            count: 50,
            url: URL
        }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T15:09:30.230

Are you sure the API docs are "sparse"?

[http://docs.sencha.com/touch/2-1/#!/api/Ext.plugin.ListPaging](http://docs.sencha.com/touch/2-1/#!/api/Ext.plugin.ListPaging)

From the very top:

*"By specifying autoPaging: true, an 'infinite scroll' effect can be achieved, i.e., the next page of content will load automatically when the user scrolls to the bottom of the list."*

Also, what does security have to do with using the proxy? If you have to pass the token in each request, use the "extraParams" config on the store proxy:

[http://docs.sencha.com/touch/2-1/#!/api/Ext.data.proxy.Ajax-cfg-extraParams](http://docs.sencha.com/touch/2-1/#!/api/Ext.data.proxy.Ajax-cfg-extraParams)

# javascript - 在javascript中使我自己的函数需要

> ID：14750338
> 
> 赞同：0
> 
> 时间：2013-02-07T11:44:29.227
> 
> 标签：javascript, file, module, require

让我知道它在 JavaScript 中的内部 require () 函数是如何工作的。

我想做这样的东西：`define(["./path"], function(cart, inventory) { });`，但每次我在谷歌上寻找它，结果只是使用它的框架或教程，但我想知道它在这个函数中是如何工作的，让它只是为了更好地理解它。

有谁知道解释如何手动执行此功能的教程？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:15:54.790

请参阅[https://github.com/medikoo/modules-webmake](https://github.com/medikoo/modules-webmake)和 JavaScript 模块幻灯片：[http](http://www.slideshare.net/medikoo/javascript-modules-done-right) : //www.slideshare.net/medikoo/javascript-modules-done-right 那里都有解释。

"define" 是 AMD 要求，它与 CommonJS/NodeJS 要求完全不同，我建议坚持 CommonJS/Node.js 风格，它更简单、更强大，你的代码也会更干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:51:36.443

要求功能它只是[commonjs](http://www.commonjs.org/)标准的一部分。这个标准有许多在浏览器中工作的实现（[requirejs](http://requirejs.org/)、[stitch](https://github.com/sstephenson/stitch)）。

# android - 使用 viewPagerviewpager 时获取活动中的片段对象

> ID：14750339
> 
> 赞同：2
> 
> 时间：2013-02-07T11:44:34.647
> 
> 标签：android, android-fragments, android-viewpager, fragment

最近，我想知道**如何使用*ViewPager***浏览片段。我必须在活动中设置`TextView`文本`Fragement`。我发现可以通过以下方式获取`Fragment`对象`ViewPager`：

```
getSupportFragmentManager().findFragmentByTag("android:switcher:" + R.id.pager + ":0"); 
```

当我尝试在`onCreate()`活动方法中执行此操作时，它总是返回`null`. 我认为那是因为`Fragment`还没有开始。那么我应该在哪种方法中尝试访问片段对象，以便可以向片段方法发送参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-04T10:21:17.047

这**两个**答案**解决**了我的问题。

**答案 1：**

```
Fragment fragment = getSupportFragmentManager().getFragments().get(position); 
```

**或回答 2：**

```
Fragment fragment = (Fragment) viewPager.getAdapter().
          instantiateItem(viewPager, viewPager.getCurrentItem()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:33:34.467

如果您有 ViewPager 并且想要访问 ViewPager 中的片段，则可以使用以下代码：

```
Fragment currentFragment = (Fragment) viewPager.getAdapter().instantiateItem(viewPager, viewPager.getCurrentItem()); //gets current fragment
//now you have to cast it to your fragment, let's say it's name is SenapatiFragment

((SenapatiFragment)currentFragment).someMethod(...); // you have now access to public fields and methods that are inside your fragment 
```

# c# - 在 httphandler (.ashx) 中路由“动作”

> ID：14750340
> 
> 赞同：0
> 
> 时间：2013-02-07T11:44:35.947
> 
> 标签：c#, asp.net, ajax, webforms

我目前在一个 webforms 项目中工作，但是在对我的 generichandler.ashx 进行 ajax 调用时，我希望路由类似于 .net mvc 模式。目前，我的代码如下所示：

```
public class GenericHandler : BaseView, IHttpHandler, IRequiresSessionState
{
    public void ProcessRequest(HttpContext context)
    {
        HttpContext.Current.Response.ContentType = "application/json";
        HttpContext.Current.Response.ContentEncoding = Encoding.UTF8;

        if (HttpContext.Current.Request["Action"] != null)
        {
            switch (HttpContext.Current.Request["Action"])
            {
                case "Foo":
                    Foo();
                    break;
                    //etc... 
```

它有效，但我认为这是一个非常丑陋的解决方案。所以这就是我需要你帮助的地方。任何有关如何改进路由的建议表示赞赏。可能是随请求传入的动态函数名称？

# php - jQuery允许多字段检查功能

> ID：14750343
> 
> 赞同：0
> 
> 时间：2013-02-07T11:44:46.830
> 
> 标签：php, jquery

我有一个简单的选项供用户检查“标题”或“用户名”的可用性。该函数运行 ttck.php 并显示相应的警报。问题是 function() 不会重置以允许在不重新加载整个页面的情况下进行多次检查。

```
function checkTitle() { 
         $.post('ttck.php', $(".pubttl").serialize(), function(data) 
                { $('.tresult').html(data).delay(5000).fadeOut('slow'); });
                      }

<span class="udo" onclick="checkTitle()"> check title availability</span> 
```

我在这里没有看到什么来重新加载/重置此事件，以便用户可以根据需要多次检查？

编辑：这是 PHP

```
if(empty($TITLE)) { echo 'Please enter a Title';} 
else { $que=mysql_query("SELECT * FROM `pubs` WHERE TITLE='$TITLE'"); 
$result=mysql_num_rows($que); 
if($result>0) { echo 'Sorry, Title is already published. Try an alternate'; } 
else { echo 'Huzzah, your Title is Available!'; }} 
```

此语句中有一些扩展参数，但没有一个会影响函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:23:10.623

你试过这个吗

```
<span class="udo" onKeyUp="CheckTitle()"> check title availilibilty </span> 
```

在您之前的脚本中，您尝试使用 Onclick 函数运行该函数，而这个函数将在该人键入标题时运行。希望这是你想要的。

# matlab - 在 Matlab 中快速提取图像滑动窗口 HOG 的方法

> ID：14750346
> 
> 赞同：1
> 
> 时间：2013-02-07T11:44:52.133
> 
> 标签：matlab, image-processing, histogram

我想提取图像 I 的每个大小为 [wH,wW] 的滑动窗口的 HOG。

目前我拥有的是：

* * *

```
windows = im2col(I, [wH,wW]);

for i=1:step:size(windows,2)

    sub = reshape(windows(:,i), [wH,wW]);

    features(i,:) = featuresExtraction(sub);

end 
```

* * *

其中 featuresExtraction 脚本将提取 HOG 等。

我试着跑，看到它跑得非常非常慢。你有什么建议可以让它变得更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:59:50.397

首先，我建议您使用 Matlab 分析器分析您的代码。

完成此操作后，我认为您会看到函数`featuresExtraction`或`im2col`计算速度慢的原因。`im2col`是一个也调用其他 Matlab 函数的函数。您可以看到，当您标记函数名称并右键单击“打开选择”检查新打开的文件中是否有很多 Matlab 代码时。

循环似乎是正确的`for`，但当然，您的代码会遍历图像中的每个可能的窗口，这非常慢，尤其是在 Matlab 中循环非常慢。

当您真的想加快代码速度时，我建议您使用 MEX 接口在 C 中实现计算量大的方法。要获得一个好的教程，请查看：[A Short MEX Tutorial and Demo](http://www.shawnlankton.com/2008/03/getting-started-with-mex-a-short-tutorial/)

# tsql - 格式化 time(0) 数据类型

> ID：14750352
> 
> 赞同：0
> 
> 时间：2013-02-07T11:45:16.547
> 
> 标签：tsql

我有以下查询。

`select cast(dateadd(minute, datediff(minute, TimeIn, TimeOut), 0) as time(0) )`

在此，我以 hrs-min-seconds 格式从两列中获取结果。我只想要分钟的格式。所以 01:05:00 应该被检索为 65。我该如何重写查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:51:47.797

那这个呢？

```
SELECT datediff(minute, 0, TimeOut) - datediff(minute, 0, TimeIn) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:45:26.857

```
select datediff(minute, TimeIn, TimeOut) 
```

# iphone - 有没有办法让 App Delegate 运行条件然后选择故事板入口点？

> ID：14750354
> 
> 赞同：2
> 
> 时间：2013-02-07T11:45:25.177
> 
> 标签：iphone, ios, objective-c, storyboard

如果我使用的是故事板并且入口点是 viewController1。

有没有办法让 App Delegate 运行条件然后选择情节提要入口点 - viewController1 或 viewController2？

我想从 App Delegate 中选择是否打开位置服务，然后执行以下操作：

```
 (![CLLocationManager locationServicesEnabled]) 
   {

        self.viewController = [[viewController1 alloc] init];

        NSLog(@"vc is viewController2 from app del. loc svcs off");

    }
    else if ([CLLocationManager locationServicesEnabled])  
    {
        // alert location services denied

        self.viewController = [[viewController2 alloc] init];

        NSLog(@"vc is viewController2 from app del. loc svcs on");

        NSLog(@"core location is on");

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:54:00.253

是的，你可以这么做。

用以下方法写下你的条件：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

做这样的事情

```
if(Con1)
{
   window.rootViewController = [window.rootViewController.storyboard instantiateViewControllerWithIdentifier:@"rootViewController1"];
}
else
{
    window.rootViewController = [window.rootViewController.storyboard instantiateViewControllerWithIdentifier:@"rootViewController2"];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T11:53:15.050

您可以将 VC1 设置为初始视图控制器（通常），如果您想将 VC2 设置为初始控制器，请在 appDelegate 中执行此操作：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
[self.window setRootViewController:[storyboard instantiateViewControllerWithIdentifier:@"VC2"]];
[self.window makeKeyAndVisible]; 
```

如果您没有明确地执行 makeKeyAndVisible，iOS 会使用情节提要中的初始视图控制器自动执行此操作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T12:11:59.600

```
 NSString *identifier;

    (![CLLocationManager locationServicesEnabled]) {

          identifier = @"UNIQUE_ID_OF_VIEW_CONTROLLER1";
    }

    else if ([CLLocationManager locationServicesEnabled])

    {
          identifier = @"UNIQUE_ID_OF_VIEW_CONTROLLER2";

    }   

    UIViewController *firstView = [storyboard instantiateViewControllerWithIdentifier:identifier];

    // NOW SET IT ROOT VIEW CONTROLLER OF THE APP 
    [self.window setRootViewController:firstView];

    [self.window makeKeyAndVisible];

    return YES; 
```

# c# - 无法在 IIS 7.0 上使用 nettcpBinding 托管 WCF 服务

> ID：14750356
> 
> 赞同：1
> 
> 时间：2013-02-07T11:45:28.123
> 
> 标签：c#, wcf, iis-7, hosting

我有一个在 WCF 测试客户端上成功运行的 WCF ServiceLibrary。

现在我正在尝试建立一个网站来托管这个网络服务。我正在使用 nettcp 绑定。我的 web.config 文件看起来像这样

```
 <system.web>
    <compilation debug="false" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <bindings>
      <netTcpBinding>
        <binding name="tcp_Unsecured" portSharingEnabled="true">
          <security mode="None"/>
        </binding>
      </netTcpBinding>
    </bindings>
    <services>
      <service behaviorConfiguration="tcpServiceBehavior" name="MarketFeedServiceLibrary.Service1">
        <endpoint address="" binding="netTcpBinding" bindingConfiguration="tcp_Unsecured"
          name="data" contract="MarketFeedServiceLibrary.IService1" />
        <endpoint address="mextcp" binding="mexTcpBinding" name="metadata"
          contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="net.tcp://localhost:8080/MarketFeedSite/MarketFeedService.svc" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="tcpServiceBehavior">
          <serviceMetadata httpGetEnabled="false" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer> 
```

我尝试直接从解决方案资源管理器在浏览器中查看

![在此处输入图像描述](../Images/c5f4a1493466965c4ba89cdf31841730.png)

但我得到如下所示的错误

**找不到与具有绑定 NetTcpBinding 的端点的方案 net.tcp 匹配的基地址。注册的基地址方案是 [http]。**

我已经尝试了 SO、youtube 等提供的所有解决方案，但没有运气，

我试过了：

1.  在 IIS 下我启用了**http,net.tcp**协议
2.  我也经历过：[如何：安装和配置 WCF 激活组件](http://msdn.microsoft.com/en-us/library/ms731053.aspx)

注意我是 WPF 应用程序开发人员，因此 WCF 和 ASP.NET 网站对我来说是新的。

谢谢你。

**编辑：在 WCF 客户端下测试会出现以下错误**

***无法从 net.tcp://localhost:8080/MarketFeedSite/MarketFeedService.svc 获取元数据***如果这是您有权访问的 Windows (R) Communication Foundation 服务，请检查您是否已在指定地址启用元数据发布。WS 元数据交换错误 URI：net.tcp://localhost:8080/MarketFeedSite/MarketFeedService.svc 元数据包含无法解析的引用：“net.tcp://localhost:8080/MarketFeedSite/MarketFeedService.svc”。无法连接到 net.tcp://localhost:8080/MarketFeedSite/MarketFeedService.svc。连接尝试持续了 00:00:01.9968000 的时间跨度。***TCP错误代码10061：无法建立连接，因为目标机器主动拒绝它127.0.0.1:8080。无法建立连接，因为目标机器主动拒绝它 127.0.0.1:8080***

# android - 手机空闲时广播接收器唤醒服务

> ID：14750358
> 
> 赞同：0
> 
> 时间：2013-02-07T11:45:36.370
> 
> 标签：android, broadcastreceiver, android-service

我有一个长期运行的服务。当设备空闲并且 CPU 休眠时，服务会暂停。但是，当我声明一个静态（在清单中）时，即使在睡着时`BroadcastReceiver`手机也会执行该方法。`onReceive()`

我想知道如何唤醒我的服务并将一些信息从`BroadcastReceiver`. 我对 Android 开发完全陌生，所以对 Android 中的 IPC 一无所知。

我阅读了有关绑定服务的信息，但我认为这不是我的情况，因为我需要服务才能在后台运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:14:52.090

从您的 BroadcastReceiver 执行以下操作以启动 MyService：

```
public void onReceive(Context context, Intent intent) {
...
Intent svc = new Intent(context, MyService.class);
svc.setAction("some_action");
context.startService(svc); 
```

代替：

*   MyService：带有实际的服务类名称
*   “some_action”：将某些操作传递给服务（字符串）

# ruby - 同一页面上的 2 个表单，在 Sinatra 中使用 Pony 发送，相同的电子邮件地址

> ID：14750364
> 
> 赞同：1
> 
> 时间：2013-02-07T11:46:00.637
> 
> 标签：ruby, forms, sinatra, pony

我正在使用 Pony.mail 在 Sinatra 中发送邮件，我现在有两种表格，一种只发送一个用于订阅时事通讯的电子邮件地址，另一种是联系表格，两者都在执行相同的操作。

我想要实现的是，如果订阅字段已完成，则仅发送这些参数，或者如果联系表已完成并发送，则发送这些参数

继承人我想出到目前为止，但得到未定义的方法 nil

```
 post '/' do
  require 'pony'
 Pony.mail(
 :from => params[:name] || params[:subscribe],
 :to => 'myemailaddress',
 :subject => params[:name] + " has contacted you via the Website" ||  params[:subscribe] + " has subscribed to the newsletter",
 :body => params[:email] + params[:comment],
 :via => :smtp,
 :via_options => {
 :address              => 'smtp.gmail.com',
 :port                 => '587',
 :enable_starttls_auto => true,
 :user_name            => 'myemailaddress',
 :password             => 'mypassword',
 :authentication       => :plain, 
 :domain               => "localhost.localdomain" 
 })
  redirect '/success' 
 end 
```

这甚至可能吗，还是必须单独处理每种表格？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T14:03:54.840

我将经历几个阶段来重构这段代码。

### 1\. 提取正在变化的东西（并使它们更 Rubyish）

```
post '/' do
  require 'pony'

  from = params[:name] || params[:subscribe]
  subject = "#{params[:name]} has contacted you via the Website" ||
            "#{params[:subscribe]} has subscribed to the newsletter"
  body = "#{params[:email]}#{params[:comment]}"

  Pony.mail(
    :from => from,
    :to => 'myemailaddress',
    :subject => subject,
    :body => body,
    :via => :smtp,
    :via_options => {
    :address              => 'smtp.gmail.com',
    :port                 => '587',
    :enable_starttls_auto => true,
    :user_name            => 'myemailaddress',
    :password             => 'mypassword',
    :authentication       => :plain, 
    :domain               => "localhost.localdomain" 
  })
  redirect '/success' 
end 
```

### 2\. 明确你的意图

在这种情况下，代码中有两个分支。

```
post '/' do
  require 'pony'

  if params[:name] # contact form
    from = params[:name]
    subject = "#{params[:name]} has contacted you via the Website"
  else # subscription form
    from = params[:subscribe]
    subject = "#{params[:subscribe]} has subscribed to the newsletter"
  end

  body = "#{params[:email]}#{params[:comment]}"

  Pony.mail(
    :from => from,
    :to => 'myemailaddress',
    :subject => subject,
    :body => body,
    :via => :smtp,
    :via_options => {
    :address              => 'smtp.gmail.com',
    :port                 => '587',
    :enable_starttls_auto => true,
    :user_name            => 'myemailaddress',
    :password             => 'mypassword',
    :authentication       => :plain, 
    :domain               => "localhost.localdomain" 
  })
  redirect '/success' 
end 
```

（我不太喜欢在条件分支中设置本地变量，但为了清楚起见我们将忽略这一点。我可能会在条件之前创建一个散列，并使用已经完成的键，然后将其填充到分支中，但 YMMV .)

### 3\. 提取不变的内容。

Sinatra 有一个专门用于这种事情的[配置块。](http://www.sinatrarb.com/intro#Configuration)

```
require 'pony'

configure :development do
  set :email_options, {
    :via => :smtp,
    :via_options => {
    :address              => 'smtp.gmail.com',
    :port                 => '587',
    :enable_starttls_auto => true,
    :user_name            => 'myemailaddress',
    :password             => 'mypassword',
    :authentication       => :plain, 
    :domain               => "localhost.localdomain" 
  }
end

Pony.options = settings.email_options 
```

请注意，我已添加`:development`，因为您可能希望为生产设置不同的设置。

现在你的路线更干净，更容易调试：

```
post '/' do

  if params[:name] # contact form
    from = params[:name]
    subject = "#{params[:name]} has contacted you via the Website"
  else # subscription form
    from = params[:subscribe]
    subject = "#{params[:subscribe]} has subscribed to the newsletter"
  end

  body = "#{params[:email]}#{params[:comment]}"

  Pony.mail
    :from => from,
    :to => 'myemailaddress',
    :subject => subject,
    :body => body,

  redirect '/success' 
end 
```

我的最后一个提示是将尽可能多的 Pony 选项放入 ENV 变量中，这不仅可以使密码等内容不受源代码控制，还可以让您更轻松地更改设置。也许将它们放在 Rakefile 中并为不同的上下文加载不同的环境等。

* * *

要使用环境变量，我执行以下操作：

```
# Rakefile

# in this method set up some env vars
def basic_environment
  # I load them in from a YAML file that is *not* in source control
  # but you could just specify them here
  # e.g. ENV["EMAIL_A"] = "me@example.com"
end

namespace :app do

  desc "Set up the environment locally"
  task :environment do
    warn "Entering :app:environment"
    basic_environment()
  end

  desc "Run the app locally"
  task :run_local => "app:environment" do
    exec "bin/rackup config.ru -p 4630"
  end
end

# from the command line, I'd run
`bin/rake app:run_local`

# in the Sinatra app file
configure :production do
    # these are actual settings I use for a Heroku app using Sendgrid
    set "email_options", {      
      :from => ENV["EMAIL_FROM"],
      :via => :smtp,
      :via_options => {
        :address => 'smtp.sendgrid.net',
        :port => '587',
        :domain => 'heroku.com',
        :user_name => ENV['SENDGRID_USERNAME'],
        :password => ENV['SENDGRID_PASSWORD'],
        :authentication => :plain,
        :enable_starttls_auto => true
      },
    }
end

# then a block with slightly different settings for development
configure :development do
  # local settings…
    set "email_options", {
      :via => :smtp,
      :via_options => {
        :address              => 'smtp.gmail.com',
        :port                 => '587',
        :enable_starttls_auto => true,
        :user_name            => ENV["EMAIL_A"],
        :password             => ENV["EMAIL_P"], 
        :authentication       => :plain,
        :domain               => "localhost.localdomain"
      }
    }
end 
```

我通常将这些设置中的大部分保存在本地的 YAML 文件中以进行开发，但直接将它们添加到生产服务器。有很多方法可以处理这个问题，YMMV。

# java - 重新部署时的 NetBeans/Glassfish 和 PermGen 空间错误（是的，仍然发生）

> ID：14750368
> 
> 赞同：2
> 
> 时间：2013-02-07T11:46:10.477
> 
> 标签：java, netbeans, glassfish, permgen

我知道这可能已经被问过很多次了，但我仍然没有看到它的实际修复。

我的日常开发环境如下： 1\. NetBeans（最新），2\. Glassfish（与 NB 捆绑的最新），3\. JPA、JSF、JAXB、Jersey for JAX-RS

我的项目中有大约 600 个类，分布在两个 EJB 项目和一个 WAR 项目中，都在一个 EAR 中。

我使用的是最新的 JDK 7（在 OS X 上），并且每小时都会收到臭名昭著的“PermGen 空间”错误。假设我每分钟进行 3 次增量重新部署，我只能工作一小会儿：

*   Glassfish 用完了 PermGen 空间，所以我只需要终止该进程。
*   由于我增加了最大 permgen 空间，部署变得非常缓慢（建议从 SO 上的几十个答案中做一个）

通常唯一的解决方案是每 30 分钟左右杀死一次玻璃鱼。这绝对是由于某个地方的错误，它只是为每次新的增量重新部署加载新类，而不是摆脱旧的。我认为这应该在 JDK 7 中修复？

在这种开发环境中，这是一个*长期存在的*错误，在我进行 5 年以上的 Java 开发之后，它仍然存在，这让我感到相当震惊。这真是令人沮丧，而且令人难以置信的低效。

（**就在有人建议增加永久空间之前**，相信我，我已经尝试过了，它“解决”的唯一一件事就是延长不可避免的时间。我已经看到重新部署在最坏的情况下最多需要 400 秒。重新部署应该需要这种规模的项目需要 5-6 秒，仅此而已。）

**编辑**：在执行以下步骤后，我在 Glassfish 进程上运行了 jmap 和 jhat：

1.  开始玻璃鱼
2.  部署我的 EA
3.  取消部署我的 EA
4.  然后用jmap做了一个堆转储

事实证明，我所有的类（应该已经卸载）仍然加载！希望这对阅读本文的人有用...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:55:45.013

当然，这是一个错误，我不认为有一个简单的解决方案。（如果有，可能你已经拥有它了）。

你可以尝试什么：例如使用一些**热代码替换工具**`JRebel`，这样你就不必一直部署，而是这个工具监视`.class`文件的变化（甚至其他网络资源，如果你配置的话），并且*替换**正在运行的 JVM*中的类定义。听起来很酷，对吧？

它作为*Java 代理*工作，它在您的 JVM 启动时启动。

这个解决方案有 3 个缺点：部署有点慢，更难调试，而且它是一个专有软件（但成本不高）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-03T20:23:04.857

在使用 Netbeans + Glassfish 进行开发并使用“保存时部署”时，我们发现重新部署项目时不会卸载应用程序中打包的库；这会导致 GF 变慢并迅速耗尽内存。

尝试为所有编译时库取消选择“Package”，并将那些尚未放在 domainX/lib 目录的 Glassfish 类路径中。

不确定，但这可能与 GLASSFISH-17449 或 GLASSFISH-16283 有关。

# sql - 如何使用包含零的值避免派生列日期转换错误？

> ID：14750370
> 
> 赞同：1
> 
> 时间：2013-02-07T11:46:17.240
> 
> 标签：sql, ssis

我有一个逗号分隔的文本文件，我使用 SSIS 包将其导入 SQL Server 2008。作为包的一部分，我有一个派生列作为文本文件的一部分是结束日期。我遇到的问题是，如果文本文件没有结束日期，**`00000000`**而不是真实日期，例如**`20130207`**. 在我的派生列编辑器中，我有以下表达式，它适用于不全为零的日期。

```
(DT_DATE)(SUBSTRING([Column 20],1,4) + "-" + SUBSTRING([Column 20],5,2) + "-" + SUBSTRING([Column 20],7,2)) 
```

谁能提供有关如何最好地处理零的解决方案或帮助？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T13:40:04.510

### 原因：

派生列转换正在尝试将该值转换`00000000`为日期`00-00-0000`，这不被视为有效的日期值。

### 选项 1：数据库列允许 NULL

如果您的数据库列定义为**`NULL`**，这意味着它可以接受*NULL*值，请更改转换中的表达式，*`Derived Column`*如下所示：

```
[Column 20] == "00000000" ? NULL(DT_DATE) : (DT_DATE)(SUBSTRING([Column 20],1,4) + "-" + SUBSTRING([Column 20],5,2) + "-" + SUBSTRING([Column 20],7,2)) 
```

### 选项 2：数据库列不允许 NULL

如果您的数据库列定义为**`NOT NULL`**，这意味着它不能接受*NULL*值，请更改转换中的表达式，*`Derived Column`*如下所示：

```
[Column 20] == "00000000" ? (DT_DATE) "1900-01-01" : (DT_DATE)(SUBSTRING([Column 20],1,4) + "-" + SUBSTRING([Column 20],5,2) + "-" + SUBSTRING([Column 20],7,2)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:36:34.503

尝试

```
[Column 20] = "00000000" ? (DT_DATE("19000101") : (DT_DATE)(SUBSTRING([Column 20],1,4) + "-" + SUBSTRING([Column 20],5,2) + "-" + SUBSTRING([Column 20],7,2)) 
```

本质上，它试图做的是检查第 20 列是否是八个零，然后它关联一个日期 01-01-1900，否则它会转换它在第 20 列中找到的内容

# jsf-2 - 即使我在 WAR 中没有 JSTL JAR，JSTL 核心标签库也能正常工作

> ID：14750371
> 
> 赞同：1
> 
> 时间：2013-02-07T11:46:21.883
> 
> 标签：jsf-2, jstl

我使用 maven 创建了一个 JSF 2.0 项目并制作了一个 hello.xhtml 页面。我没有包含 jstl 依赖项，但在我的 hello.xhtml 页面上，我通过包含此命名空间 **"xmlns:c="http://java.sun.com/jsp/jstl/core"**来使用 jstl 核心标记。并使用以下标签工作正常。

```
<c:set var="test"  value="${2000*2}"/>
#{test} 
```

现在我想知道这是怎么发生的，即使我也检查了生成的**war**文件并且没有 jstl jar 。任何人都可以知道它是如何发生的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:59:42.613

JSTL（和 JSF！）已经由 Java EE Web 配置文件兼容容器（如 Glassfish、JBoss AS 等）提供开箱即用。只有准系统 JSP/Servlet 容器（如 Tomcat、Jetty 等）没有提供开箱即用。

显然，您的目标服务器是与 Java EE Web 配置文件兼容的容器。这样您就不需要自己提供 JSTL（也不是 JSF！）。请注意，您的 Maven 依赖项应设置为“[提供](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope)”（如目标容器已提供）。通常只要`javaee-api`依赖就足够了。它涵盖了 JSP、Servlet、EL、JSTL、JSF、CDI、EJB 等。

### 也可以看看：

*   [我们的 JSTL wiki 页面](https://stackoverflow.com/tags/jstl/info)- 解释何时安装 JSTL
*   [我们的 JSF wiki 页面](https://stackoverflow.com/tags/jsf/info)- 解释何时安装 JSF

# xaml - 取决于屏幕分辨率的图像源

> ID：14750372
> 
> 赞同：0
> 
> 时间：2013-02-07T11:46:27.633
> 
> 标签：xaml, windows-8, microsoft-metro, winrt-xaml

我正在开发一个 Windows 8 Metro（是的！）应用程序。如何提供依赖于屏幕分辨率的图像源？

根据[这些](http://msdn.microsoft.com/en-us/library/windows/apps/hh465362.aspx)指南，我们也可以使用图像命名约定来实现它。

我有一个图像控件，如下所示。

```
<Image Source="Assets/test.jpeg"/> 
```

我在资产文件夹中也有 test.scale-100.jpg、test.scale-140.jpg 和 test.scale-180.jpg 图像。每个图像具有不同的图标颜色，以识别加载的图像。

如果我在模拟器中运行应用程序并更改屏幕分辨率，我仍然会看到任何分辨率的 test.scale-100.jpg。为什么会这样？在哪种情况下操作系统会加载 test.scale-140.jpg 或 test.scale-180.jpg 图像？

**编辑：**我让它工作了。一旦您的应用程序在模拟器中启动，请按主页按钮将其关闭并卸载它。在 VS 中，右键单击项目，然后单击部署。应用程序现在应该部署到模拟器。更改分辨率并启动应用程序。您现在应该看到操作系统加载的正确图像。冲洗并重复以测试其他分辨率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:37:39.297

缩放是自动的。如果您的图像名称正确，并且您在模拟器中更改了分辨率，则**必须重新启动应用程序才能看到缩放后的图像**。它不会即时发生，IIRC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:24:56.363

1.  终于让它工作了。关闭应用程序并从模拟器中卸载它。

2.  在 VS 中，右键单击项目，然后单击部署。

3.  更改为所需的屏幕分辨率并启动应用程序。操作系统不应根据分辨率选择正确的图像。

4.  冲洗并重复相同的操作以测试各种分辨率的图像。

# sql - 如何 SQL 注入使用 JDBC 的 Java 语句？

> ID：14750373
> 
> 赞同：0
> 
> 时间：2013-02-07T11:46:34.050
> 
> 标签：sql, jdbc, sql-injection

以下代码行出现在我的 Java 程序中：

```
stmt.executeQuery("SELECT * FROM metropolises WHERE metropolis =\"" + metropolis + "\" AND continent=\"" + continent + "\" AND population>" + population); 
```

`a`我可以通过 GUI 为大都市、大陆和人口输入任何内容，但如果我输入大都会 = 、大陆 =`b`和人口，我似乎无法让它工作`2; DROP TABLE tablename;`

有什么建议么？我正在尝试删除一个名为 metropolises 的表，以便更好地理解 SQL 注入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:55:21.267

一些数据库库不允许每次调用执行多个查询（例如 PHP 的 mysql binder）。在那些情况下，这种注射是不可能的。不幸的是，我不知道这是否适用于 JDBC，但这可能是原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T23:27:19.490

您无需指定您使用的数据库品牌（除非“sql”标签暗示 Microsoft SQL Server）。所以这是我对 MySQL 的经验：

默认情况下，MySQL JDBC 驱动程序每次调用只执行一条 SQL 语句。这是防御某些类型的 SQL 注入的好主意。

JDBC 驱动程序有一个可选的连接属性`allowMultiQueries`，您必须将其设置为允许使用分号分隔的语句。请参阅[http://dev.mysql.com/doc/refman/5.5/en/connector-j-reference-configuration-properties.html](http://dev.mysql.com/doc/refman/5.5/en/connector-j-reference-configuration-properties.html)

# java - Java 中 TreeSet 部分视图的 size() 复杂度是多少

> ID：14750374
> 
> 赞同：10
> 
> 时间：2013-02-07T11:46:43.740
> 
> 标签：java, complexity-theory, treeset

我想知道`size()`TreeSet 的部分视图的时间复杂度是多少。

假设我正在添加随机数来设置（而且我不关心重复）：

```
 final TreeSet<Integer> tree = new TreeSet<Integer>();
    final Random r = new Random();
    final int N = 1000;
    for ( int i = 0; i < N; i++ ) {
        tree.add( r.nextInt() );
    } 
```

现在我想知道`size()`调用的复杂性是：

```
 final int M = 100;
    for ( int i = 0; i < M; i++ ) {
        final int f = r.nextInt();
        final int t = r.nextInt();
        System.out.println( tree.headSet( t ).size() );
        System.out.println( tree.tailSet( f ).size() );
        if ( f > t ) {
            System.out.println( tree.subSet( t, f ).size() );
        } else {
            System.out.println( tree.subSet( f, t ).size() );
        }
    } 
```

AFAIK 的复杂度`tree.headSet( t )`是O(lg N)，`tree.tailSet( f )`是O(1)，但是上面的方法呢？我有一种不好的感觉，它是 O(K)，其中 K 是所选子集的大小。`tree.subSet( f, t )``set.size()``size()`

也许如果有一些解决方法可以在 set 中找到某个元素的索引就足够了，因为如果我能得到`ti = indexOf(f)`，比如说 O(lg N) ，这正是我所需要的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-07T12:03:12.597

看起来 is 的复杂性`size ()`，`O(N)`因为它可能会调用`TreeMap.NavigableSubMap.EntrySetView.size ()`这样实现的（Oracle JDK 1.7.0_13）：

```
public int size() {
    if (fromStart && toEnd)
        return m.size();
    if (size == -1 || sizeModCount != m.modCount) {
        sizeModCount = m.modCount;
        size = 0;
        Iterator i = iterator();
        while (i.hasNext()) {
            size++;
            i.next();
        }
    }
    return size;
} 
```

# unit-testing - 如何在 Play 框架中针对非内存数据库（如 MySQL）创建单元测试，并重置为已知状态？

> ID：14750375
> 
> 赞同：23
> 
> 时间：2013-02-07T11:46:43.373
> 
> 标签：unit-testing, playframework, playframework-2.0, database-testing

我想创建单元测试，涵盖在 Play 框架 2.1.0 中使用关系数据库的代码。这有很多可能性，并且都会导致问题：

# 在内存 H2 数据库上进行测试

Play 框架文档建议在 H2 内存数据库上运行单元测试，即使用于开发和生产的主数据库使用其他软件（即 MySQL）：

```
app = Helpers.fakeApplication(Helpers.inMemoryDatabase()); 
```

我的应用程序不使用存储过程等复杂的 RDBMS 功能，并且大多数数据库访问案例都是 ebean 调用，因此它应该与 MySQL 和 H2 兼容。

但是，evolutions 中的表创建语句使用 MySQL 特定的功能，例如指定`ENGINE = InnoDB`，`DEFAULT CHARACTER SET = utf8`等。我担心如果我将删除这些专有部分`CREATE TABLE`，MySQL 将使用一些我无法控制且取决于版本的默认设置，所以要测试和开发应用程序，必须修改主 MySQL 配置。

有人使用过这种方法（使进化与 MySQL 和 H2 兼容）吗？

如何处理它的其他想法：

*   MySQL 和 H2 的单独演进（不是一个好主意）
*   使 H2 忽略其他 MySQL 内容的某种方法`create table`（MySQL 兼容模式不起作用，它仍然会抱怨`default character set`）。我不知道怎么做。

# 在与主数据库相同的数据库驱动程序上进行测试

H2 内存数据库的唯一优势是速度快，并且在相同的数据库驱动程序上进行测试可能比开发/生产数据库更好，因为它更接近真实环境。

如何在 Play 框架中正确完成？

试过：

```
Map<String, String> settings = new HashMap<String, String>();
settings.put("db.default.url", "jdbc:mysql://localhost/sometestdatabase");
settings.put("db.default.jndiName", "DefaultDS");
app = Helpers.fakeApplication(settings); 
```

看起来进化在这里起作用，但是在每次测试之前最好如何清理数据库？通过创建截断每个表的自定义代码？如果它会删除表，那么进化会在下一次测试之前再次运行，还是每个`play test`命令应用一次？还是每次`Helpers.fakeApplication()`调用一次？

这里有哪些最佳实践？听说过[dbunit](http://www.dbunit.org/)，是否可以在没有太多痛苦和怪癖的情况下集成它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T20:46:23.420

首先，我建议您使用相同的 RDBMS 进行测试和生产，因为它可以避免一些难以发现的错误。

关于在每次测试之间清理数据库的需要，您可以使用 Ebean`DdlGenerator`生成脚本来创建一个干净的数据库，并使用 JUnit 的`@Before`注释在每次测试之前自动执行这些脚本。

`DdlGenerator`可以这样使用：

```
 EbeanServer server = Ebean.getServer(serverName);
    ServerConfig config = new ServerConfig();
    DdlGenerator ddl = new DdlGenerator((SpiEbeanServer) server, new MySqlPlatform(), config); 
```

这段代码可以放在一个基类中，您可以继承您的测试（或在`Runner`您可以与`@RunWith`注释一起使用的自定义中）。

它还可以让您轻松地自动`FakeApplication`创建，避免一些样板代码。

一些可能有用的链接：

*   [http://blog.matthieuguillermin.fr/2012/03/unit-testing-tricks-for-play-2-0-and-ebean/](http://blog.matthieuguillermin.fr/2012/03/unit-testing-tricks-for-play-2-0-and-ebean/)
*   [https://gist.github.com/nboire/2819920](https://gist.github.com/nboire/2819920)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T13:50:16.483

[我使用与主数据库和dbunit](http://www.dbunit.org/)相同的数据库引擎在每次测试之前进行清理。

```
public class SomeTest {
    // ...

    @Before
    public void startApp() throws Exception {
        // Set up connection to test database, different from main database. Config better should be used instead of hard-coding.
        Map<String, String> settings = new HashMap<String, String>();
        settings.put("db.default.url", "jdbc:mysql://localhost/somedatabase?characterEncoding=UTF-8&useOldAliasMetadataBehavior=true");
        settings.put("db.default.user", "root");
        settings.put("db.default.password", "root");
        settings.put("db.default.jndiName", "DefaultDS"); // make connection available to dbunit through JNDI
        app = Helpers.fakeApplication(settings);
        Helpers.start(app);

        databaseTester = new JndiDatabaseTester("DefaultDS");

        IDataSet initialDataSet = new FlatXmlDataSetBuilder().build(play.Play.application()
                .resourceAsStream("/resources/dataset.xml"));
        databaseTester.setDataSet(initialDataSet);
        databaseTester.onSetup();
    }

    @After
    public void stopApp() throws Exception {
        databaseTester.onTearDown();
        Helpers.stop(app);
    }
} 
```

我`dataset.xml`只包含表名来告诉 dbunit 在每次测试之前清空这些表。它还可以包含固定装置。

```
<?xml version="1.0" encoding="UTF-8"?>
<dataset>
  <name_of_my_first_table />
  <name_of_my_second_table />
</dataset> 
```

使用这种方法时，Evolutions 会在测试数据库上自动运行，因此如果您从测试数据库中删除所有表，它们将被重新创建。

如果您只需要清理表，则使用 dbunit 是多余的，您可以通过直接发出查询或使用 ebean 来清理它们`DdlGenerator`。但我也使用 dbunit 来比较数据。

我不使用`Helpers.running`，因为它需要`Runnable`并且`Runnable`实现不能抛出异常 - 对测试非常不方便。但是，如果您查看 的代码`running()`，它只是调用`Helpers.start()`，所以我直接在and`Helpers.stop()`中调用这些方法。`@Before``@After`

决定不使用 H2 来运行测试：是的，它运行得更快，但是它和 MySQL 的区别太大了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T22:40:59.677

> 有人使用过这种方法（使进化与 MySQL 和 H2 兼容）吗？

我找到了 MySQL 特定功能的答案：[如何使用 Play 2.x 对 MySQL 数据库进行单元测试？](https://stackoverflow.com/questions/15146723/how-can-i-unit-test-for-mysql-database-with-play-2-x)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-27T16:18:09.243

当我为我的 postgres 数据库编写测试时，我只是创建了一个 HashMap 来连接到数据库，然后我编写了测试查询以确保存在正确数量的记录等等......这是我的代码。

```
 @Test
public void testDataBase() {
    final HashMap<String,String> postgres = new HashMap<String, String>();
    postgres.put("db.default.driver","org.postgresql.Driver");
    postgres.put("db.default.url","jdbc:postgresql://localhost/myDataBase");
    postgres.put("db.default.user", "postgres");
    postgres.put("db.default.password", "password");

    running(fakeApplication(postgres), new Runnable() {

        @Override
        public void run() {

            //Insert Assertions Here
        }
    });
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-08T11:15:27.240

如果目标是验证您的 Slick|JPA|Anorm 映射和基于的函数，您也可以使用 DB 模拟。

当它适合时，它具有比测试数据库更符合单元测试的优势，并且更易于管理（不设置/清除任务，不同步测试以避免访问相同的测试表）。

你可以看看我的框架 Acolyte ( [http://github.com/cchantep/acolyte](http://github.com/cchantep/acolyte) )，它在 Anorm 本身的规范中使用 (例如[https://github.com/playframework/playframework/blob/master/framework/ src/anorm/src/test/scala/anorm/SqlResultSpec.scala](https://github.com/playframework/playframework/blob/master/framework/src/anorm/src/test/scala/anorm/SqlResultSpec.scala)）。

# sql-server - 从 SSRS 中的数据集中获取指定值的文本框

> ID：14750376
> 
> 赞同：0
> 
> 时间：2013-02-07T11:46:43.980
> 
> 标签：sql-server, reporting-services, reportbuilder

`First`我想使用SSRS中的函数从特定数据集中获取特定行值。数据集返回如下值：

```
From  To   Value
1     30   10
30    60   20
60    100  30 
```

还：

*   我有一个从 1 到 100 的整数值的参数。
*   `From`如果参数介于和`To`和之间，我想获取数据集值
*   我想将此值放在 Textbox**而不是 Tablix**中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-11-07T01:29:13.460

你可以在你的文本框中试试这个 Expr：

```
=First(Fields!FieldName.Value, "YourDataset") 
```

例子：

```
=First(Fields!Name.Value, "GetName") 
```

它对我有用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-08T11:37:19.747

这应该有效：

将参数用作数据集**上**`>= From`的两个过滤器，并且`< To`.

然后是文本框中的表达式，例如`=First(Value.Value, "dataset")`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-14T12:00:55.523

您应该首先创建一个列表（以便与它相关 a `DataSet`）。

然后，在列表中，放置一个文本框并定义以下表达式：

`=First(Field!Value.Value)`

这将完成这项工作:)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-02-08T05:36:35.607

SSRS 是一种报告工具，而不是应用程序。您可以在生成报告之前编写查询或 SP 以接收值，否则我会推荐具有导出功能的应用程序（您甚至可以操纵它以使用 SSRS 导出最终报告）。Telerik 等第三方工具也可以提供帮助。

# c# - 通过 Windows 8 Store 应用程序将用户登录到我的网站

> ID：14750381
> 
> 赞同：2
> 
> 时间：2013-02-07T11:46:53.567
> 
> 标签：c#, asp.net, .net, windows-8, microsoft-metro

我有一个带有使用网页框架 (Webmatrix) 编写的身份验证系统的网站，并且托管在 Windows 共享托管服务器上。

现在我正在创建一个新应用程序，它将是一种目录，允许您浏览网站上列出的产品（以及一些未列出的产品）。

为了通过 Windows 8 应用程序下订单，他们需要登录。我想使用基于网站的现有代码将它们登录。我怎样才能做到这一点？是否有任何文档、文章/教程或示例代码可以证明这一点？我还没有找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:25:46.600

我不知道这是否可以回答您的问题，但在[这里回答了类似的问题](https://stackoverflow.com/questions/13508516/javascript-to-login-to-a-site-for-windows-store-app)

[您可以在此处](http://msdn.microsoft.com/en-us/library/ie/hh781489%28v=vs.85%29.aspx)找到有关连接网站和 Windows 商店应用程序的更多信息

这是一个链接[，](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh761504.aspx)可帮助将 Windows 应用商店应用程序与 Web 服务连接起来。

我真的希望这可以帮助你的发展

# sql - SQLAlchemy 中的 REGEXP_LIKE

> ID：14750382
> 
> 赞同：4
> 
> 时间：2013-02-07T11:46:58.437
> 
> 标签：sql, sqlalchemy

任何人都知道我如何在 SQLAlchemy 中使用 REGEXP_LIKE 的等价物？例如，我希望能够执行以下操作：

```
sa.Session.query(sa.Table).filter(sa.Table.field.like(regex-to match)) 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T12:01:32.547

它应该（我无法访问 Oracle）像这样工作：

```
sa.Session.query(sa.Table) \
          .filter(sa.func.REGEXP_LIKE(sa.Table.c.column, '[[:digit:]]')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T15:54:49.200

如果您需要执行 SQLAlchemy 不支持的数据库特定功能，您可以使用文字过滤器。所以你仍然可以使用 SQLAlchemy 为你构建查询 - 即注意连接等。

这是如何将文字过滤器与 PostgreSQL 正则表达式匹配运算符放在一起的示例`~`

```
session.query(sa.Table).filter("%s ~':regex_pattern'" % sa.Table.c.column.name).params(regex_pattern='stack') 
```

或者您可以手动将表和列指定为文字字符串的一部分，以避免出现模棱两可的列名大小写

```
session.query(sa.Table).filter("table.column ~':regex_pattern'"  ).params(regex_pattern='[123]') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-30T12:48:35.833

这不是完全可移植的，但这是一个使用 ~ 运算符的 Postgres 解决方案。因此，我们可以使用任意运算符：

`sa.Session.query(sa.Table).filter(sa.Table.field.op('~', is_comparison=True)(regex-to match))`

或者，假设默认优先级为 0，

`sa.Session.query(sa.Table).filter(sa.Table.field.op('~', 0, True)(regex-to match))`

这也适用于 ORM 构造：

`sa.Session.query(SomeClass).filter(SomeClass.field.op('~', 0, True)(regex-to match))`

# android - TF14097: 当分配了工作文件夹映射时，无法重命名（源控制中的我的项目目录）

> ID：14750391
> 
> 赞同：1
> 
> 时间：2013-02-07T11:47:18.373
> 
> 标签：android, eclipse, team-explorer-everywhere

我想在源代码管理和本地更改我的项目的文件夹名称，但出现以下错误

TF14097: 当分配了工作文件夹映射时，无法重命名（源控制中的我的项目目录）。

我尝试更改工作文件夹，但我也收到以下错误

(MY PROJECT DIR IN SOURCE CONTROL) 到 (NEW PROJECT DIR IN MY PC) 的新工作文件夹映射与 (MY PROJECT DIR IN SOURCE CONTROL) 到 (OLD PROJECT DIR IN MY PC) 的现有映射中的服务器路径冲突

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:35:01.253

尝试取消搁置更改时遇到此错误。为了解决它，我进入了源代码管理资源管理器，选择了它所烦恼的文件夹，右键单击并选择“删除映射”。

# macos - 可可中的兄弟 NSView z-ordering

> ID：14750393
> 
> 赞同：5
> 
> 时间：2013-02-07T11:47:19.850
> 
> 标签：macos, cocoa, core-graphics, quartz-graphics

z 排序如何与 Cocoa 中的兄弟 NSView 一起使用？我很困惑，因为我在 Apple 的文档和 API 中发现了相互矛盾的信息来源。（注意：子视图显然是在其父视图之上呈现的，我在这里明确谈论的是兄弟视图）。

**假设 A**：*“是的，您可以定义兄弟的 z 顺序`NSViews`”*

*   `IB`您可以将视图放在彼此之上，它们将始终以您期望的方式组合。
*   Xcode 中的`Editor`菜单下有名为“Send to Back”、“Send Forward”等的按钮。
*   `NSView`也有一个名为的方法，`- (void)addSubview:(NSView *)aView positioned:(NSWindowOrderingMode)place relativeTo:(NSView *)otherView;`它似乎暗示有一个明确定义的排序。

**假设 B**：*“不可能，兄弟的 z 顺序`NSViews`在运行时是未定义的。有时有效，有时无效。不要相信它！”*

*   Apple 的文档（[查看编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaViewsGuide/WorkingWithAViewHierarchy/WorkingWithAViewHierarchy.html#//apple_ref/doc/uid/TP40002978-CH4-SW1 "文档")）状态：`For performance reasons, Cocoa does not enforce clipping among sibling views or guarantee correct invalidation and drawing behavior when sibling views overlap. If you want a view to be drawn in front of another view, you should make the front view a subview (or descendant) of the rear view.`

那么是哪一个呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T12:07:56.120

是的，允许 NSView 兄弟姐妹重叠，Apple 文档已过时：**是否**[允许图层支持的 NSView 兄弟姐妹重叠？](https://stackoverflow.com/questions/10720062/are-layer-backed-nsview-siblings-allowed-to-overlap)

此外，z 顺序取决于父视图`subviews`数组中子视图的顺序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-25T09:27:16.313

我一直在解决同样的问题，发现至少在 Mavericks 上它只适用于支持层的视图。到目前为止，我还没有机会在其他 OS X 版本上对其进行测试，但是在 Mavericks 上，您必须将所有要重叠的视图设置为才能使其正常工作`wantsLayer`。`YES`

# android - 安装成功后打开和完成应用程序的不同行为

> ID：14750395
> 
> 赞同：1
> 
> 时间：2013-02-07T11:47:21.773
> 
> 标签：android, background-process, foreground

即使使用前台服务，我的 android 应用程序也会在后台被杀死。这是服务的清单条目：

```
 <service
            android:name=".MyService"
            android:icon="@drawable/icon"
            android:label="TritonHK"
            android:process=":my_process" >
        </service> 
```

这是服务代码

```
 MLog.w(getClass().getName(), "TritonHK started");

         Notification note=new Notification(R.drawable.icon,
                                             "TritonHK is running",
                                             System.currentTimeMillis());
         Intent i=new Intent(this, BGMessages.class);

         i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP|
                    Intent.FLAG_ACTIVITY_SINGLE_TOP);

         PendingIntent pi=PendingIntent.getActivity(this, 0,
                                                     i, 0);

         note.setLatestEventInfo(this, "TritonHK",
                                 "TritonHK",
                                 pi);
         note.flags|=Notification.FLAG_NO_CLEAR;

         startForeground(1337, note); 
```

这是我开始服务的方式：

```
Intent i=new Intent(this, MyService.class);

        startService(i); 
```

我正在我的第一个活动的 onCreate 中启动服务。

我通过 `android:process=":my_process"`从清单中的服务中删除来克服这个错误，现在它看起来像这样：

```
 <service
                android:name=".MyService"
                android:icon="@drawable/icon"
                android:label="TritonHK"
                 >
            </service> 
```

但现在我面临一个有趣的问题。

当我在我的设备上安装应用程序并安装成功后，我单击`done`并从图标启动我的应用程序，它运行良好。

但是安装成功后，如果我通过单击`open`按钮启动应用程序，它第一次在后台被杀死。然后，如果我强制关闭应用程序并再次从图标启动它，那么它运行良好。

我很困惑出了什么问题。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:57:15.000

服务会根据资源情况被杀死。如果安装程序仍在运行，它当然具有高优先级，因为它对用户可见。您是否在从安装程序中使用*open*启动服务时检查了内存消耗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:20:33.400

我已经用下面的代码解决了这个问题并发布了相同的代码，以便其他人也可以使用它。

我已将以下代码添加到我的启动器活动的创建中。

```
if (!isTaskRoot()) {
            final Intent intent = getIntent();
            final String intentAction = intent.getAction();
            if (intent.hasCategory(Intent.CATEGORY_LAUNCHER) &&
                    intentAction != null && intentAction.equals(Intent.ACTION_MAIN)) {
                finish();
            }
        } 
```

# sql - T-sql 根据子选择结果更新值

> ID：14750399
> 
> 赞同：2
> 
> 时间：2013-02-07T11:47:30.150
> 
> 标签：sql, sql-server-2008, tsql, select, sql-update

需要使用 MS SQL 2008 和存储过程。

因此，在我的表中，我有某些行 IsDouble 值为 2。现在，如果字符串计数（从 4 列连接）大于 1，并且如果字符串的计数是 1 到 0

到目前为止，我有这个，但它很可能是不正确的：

```
select * from TestInvoiceData where Isdouble='2';
update TestInvoiceData
set testinvoicedata.Isdouble=
case 
    when  
    (
        select COUNT (InvoiceDate+InvoiceNumber+VendorCode+Invoicetype) 
        from      TestInvoiceData
     ) >1 then 1
     else 0
end; 
```

编辑

这是示例数据（发票类型、发票编号、发票日期、供应商代码）：

```
INVO    322760-262  2012-05-10  0000081964  2
INVO    322760-262  2012-05-10  0000081964  0
INVO    322756-262  2012-05-10  0000081964  2
INVO    7011200072  2012-05-10  0000046172  0
INVO    7011200071  2012-05-10  0000046172  0
INVO    7011200070  2012-05-10  0000046172  0
INVO    7011200069  2012-05-10  0000046172  0
INVO    7011200068  2012-05-10  0000046172  0
INVO    12106563    2012-04-24  0000010171  0
INVO    06649       2012-04-24  0000067987  0 
```

根据这个例子，第一行应该在更新 1 之后，第三行应该是 0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:28:10.707

询问：

**[SQLFIDDLEEX示例](http://sqlfiddle.com/#!3/e1ced/2)**

```
UPDATE TestInvoiceData
SET Isdouble = (
SELECT   CASE WHEN count(*)>1 THEN 1
         ELSE 0 END AS cnt
FROM TestInvoiceData t1
  WHERE t1.invoicetype =TestInvoiceData.invoicetype 
  AND   t1.invoicenumber = TestInvoiceData.invoicenumber
  AND   t1.invoicedate = TestInvoiceData.invoicedate
  AND   t1.vendorcode = TestInvoiceData.vendorcode
GROUP BY t1.invoicetype,
         t1.invoicenumber,
         t1.invoicedate,
         t1.vendorcode)
WHERE Isdouble = '2' 
```

结果：

```
| INVOICETYPE | INVOICENUMBER |                  INVOICEDATE | VENDORCODE | ISDOUBLE |
--------------------------------------------------------------------------------------
|        INVO |    322760-262 |   May, 10 2012 00:00:00+0000 |      81964 |        1 |
|        INVO |    322760-262 |   May, 10 2012 00:00:00+0000 |      81964 |        0 |
|        INVO |    322756-262 |   May, 10 2012 00:00:00+0000 |      81964 |        0 |
|        INVO |    7011200072 |   May, 10 2012 00:00:00+0000 |      46172 |        0 |
|        INVO |    7011200071 |   May, 10 2012 00:00:00+0000 |      46172 |        0 |
|        INVO |    7011200070 |   May, 10 2012 00:00:00+0000 |      46172 |        0 |
|        INVO |    7011200069 |   May, 10 2012 00:00:00+0000 |      46172 |        0 |
|        INVO |    7011200068 |   May, 10 2012 00:00:00+0000 |      46172 |        0 |
|        INVO |      12106563 | April, 24 2012 00:00:00+0000 |      10171 |        0 |
|        INVO |         06649 | April, 24 2012 00:00:00+0000 |      67987 |        0 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:06:45.387

我猜你需要

```
update TestInvoiceData set

Isdouble=CASE 
            WHEN (select count(*) from TestInvoiceData as Tid
                  where 
                  tId.InvoiceDate=InvoiceDate
                  AND
                  tId.InvoiceNumber=InvoiceNumber
                  AND
                  tId.VendorCode=VendorCode
                  AND
                  tId.Invoicetype =Invoicetype 
                 ) > 1
                 THEN 1
                 ELSE 0
             END

where Isdouble=2 
```

# uicollectionview - iOS UICollectionViewController 不显示中心单元格。但可以点击它们

> ID：14750402
> 
> 赞同：1
> 
> 时间：2013-02-07T11:47:37.223
> 
> 标签：uicollectionview, uicollectionviewcell, uicollectionviewlayout

我创建了一个自定义`UICollectionViewController`.

我有 2 个要显示的专辑 - 每个专辑都有一些不同的功能，但视图基本相同（自定义单元格大小等）。从这个基础`ViewController`上，我继承了`UICollectionViewController`我正在寻找的特定行为定制的 2。

遗产是

*   *UICollectionViewController -> GalleyViewController（我的基类） -> CameraAlbumViewController*。

*   *UICollectionViewController -> GalleyViewController（我的基类） -> DifferentAlbumViewController*

出于某种原因，我没有看到屏幕上的中心单元格，但可以点击它们。我尝试更改单元格的大小，然后看到 3 个单元格，但单元格的边界已关闭（我可以在单元格之间进行选择并调用委托方法）

考虑到继承可能不正确（可能缺少基类中的某些内容），我创建了一个新项目，其中包含最基本的用法，`UICollectionViewController`并遵循了几个教程。

我仍然没有看到中心细胞

由此，我相信故事板中的某些内容可能是不正确的。

我的代码是这样的：

```
#import "MyCollectionViewController.h"
#import <AssetsLibrary/AssetsLibrary.h>

@interface CollectionViewCell : UICollectionViewCell
// customized cell
@property (nonatomic,strong) UIImageView *imageView;
@end

@implementation CollectionViewCell

@synthesize imageView;
-(id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self)
    {
        self.imageView = [[UIImageView alloc] initWithFrame:frame];
        [self.contentView addSubview:self.imageView];
    }
    return self;
}

@end

@interface MyCollectionViewController ()
// the collection view controller
@property (nonatomic,strong) NSMutableArray *photos;
@property (nonatomic,strong) ALAssetsLibrary *defaultLibrary;
@end

@implementation MyCollectionViewController

@synthesize photos,defaultLibrary;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Do any additional setup after loading the view.
    [self.collectionView registerClass:[CollectionViewCell class] forCellWithReuseIdentifier:@"cell"];
    [self initAssets];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(void)initAssets
{
    self.photos = [NSMutableArray new];
    [self.photos removeAllObjects];
    self.defaultLibrary = [[ALAssetsLibrary alloc] init];
    [self.defaultLibrary enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos
                                       usingBlock:^(ALAssetsGroup *group, BOOL *stop)
     {

         [group enumerateAssetsUsingBlock:^(ALAsset *asset, NSUInteger index, BOOL *stop)
          {
              if (asset) {
                  [self.photos addObject:asset];

              }
          }];
         if (group == nil)
         {
             [self.collectionView reloadData];
         }
     } failureBlock:^(NSError *error)
     {
         NSLog(@"Error");
     }];

}

#pragma mark -
#pragma mark CollectionViewDelegates
-(NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section
{
    return self.photos.count;
}

-(NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView
{
    return 1;
}

-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    CollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"cell" forIndexPath:indexPath];
    ALAsset *asset = [self.photos objectAtIndex:indexPath.row];
    UIImage *im = [UIImage imageWithCGImage:[asset thumbnail]];
    cell.imageView.image = im;
    return cell;
}

-(CGSize)collectionView:(UICollectionView *)collectionView
                 layout:(UICollectionViewLayout *)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath
{
    return CGSizeMake(100, 100);
}

@end 
```

一些故事板的截图，来自模拟器的相册

![故事板](../Images/5afc8c62bc935552e73a32e388c4d454.png) ![单元配置](../Images/e0f33deb5670d55f0a730c01521aba41.png) ![模拟器中的结果](../Images/593211ea65f4e7d6798c37247c35abe4.png) ![我期望从相册中获得的图像](../Images/f68af49c45000694bf13b5fba7af388f.png)

# scala - 创建所有参与者相互引用的 akka 系统

> ID：14750403
> 
> 赞同：3
> 
> 时间：2013-02-07T11:47:47.237
> 
> 标签：scala, mpi, akka, actor, message-passing

我想创建一个程序，在集群计算机上的同构环境中的多台机器上启动多个进程。

我想使用 Scala 2.10 附带的 Akka 2.1。

启动一个所有进程都有一个系统中所有参与者列表的参与者系统的最佳方式是什么？

它需要能够通过***mpirun***启动，因此进程和参与者之间应该存在 1 对 1 的对应关系。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T15:08:48.610

我不相信您将能够获得演员（实例）/流程的对应关系。Akka 设计的一个关键方面是actor 不绑定到任何特定线程。当他们需要一个线程并且有一个可用时，他们会被分配一个线程。

# javascript - 设置每个数据 id 并将其分配给 href

> ID：14750406
> 
> 赞同：0
> 
> 时间：2013-02-07T11:48:03.127
> 
> 标签：javascript, jquery, fotorama

我正在运行以下代码，因为我试图首先获取每个`.fotorama`id，然后将它们中的每一个分配为每个`.nav`链接 href。

```
$(".fotorama").each(function(){
     id = $(".fotorama", this).data("id");
     $(".nav li a").attr("href",  '#'+  id);
}); 
```

这给了我`#undefined`每个`.nav`链接

我应该如何设置与每个`.fotorama`id 相同的 href？

html，只是一个例子，ids和菜单项是在网站上动态生成的*

```
<ul class="nav">
  <li><a href=" "></a></li>
  <li><a href=" "></a></li>
  <li><a href=" "></a></li>
</ul>

<div class="fotorama" id="p1"></div>
<div class="fotorama" id="p2"></div>
<div class="fotorama" id="p2"></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:51:40.113

更新以考虑 HTML：

```
var links = $(".nav li a");

$(".fotorama").each(function(index){         
     links.eq(index).attr("href",  '#'+  this.id);
}); 
```

将遍历每个`.fotorama`元素并设置相应的`.nav li a`元素（基于索引）以使用该 ID。

[JSFiddle 示例](http://jsfiddle.net/LgXcn/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T11:49:13.037

```
var n = 0;   

$(".fotorama").each(function(){
   id = $(this).attr("id");
   $(".nav li a:eq(" + n + ")").attr("href",  '#'+  id);
   n++;
 }); 
```

[http://jsfiddle.net/Y3WVs/2/](http://jsfiddle.net/Y3WVs/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T11:55:29.630

那应该工作

```
var id, a, anchors = $(".nav li a");
$(".fotorama").each(function (i) {
  id = $(this).attr("id");
  a = $(anchors[i]);
  if (id && a && a.length)
    a.attr("href", '#' + id);
}); 
```

# php - Opencart 显示下拉错误

> ID：14750409
> 
> 赞同：0
> 
> 时间：2013-02-07T11:48:09.560
> 
> 标签：php, e-commerce, opencart

在查看类别中的产品时，我希望在 opencart 网站的“显示”下拉菜单中显示“全部”。我被告知要以正确的方式完成它需要大量的编码，所以我只是调整了代码如下：

```
$this->data['limits'][] = array(
    'text'  => "All",
    'value' => 5000,
    'href'  => $this->url->link('product/category', 'path=' . $this->request->get['path'] . $url . '&limit=5000')
); 
```

这似乎在我的错误日志中给出了一个错误，如下所示：

```
2013-02-07 11:22:12 - PHP Notice:  Use of undefined constant All - assumed 'All' in /home/a6997914/public_html/catalog/controller/product/search.php on line 373 
```

我需要定义这个“全部”还是我的语法不正确？据我所知，此方法可按要求工作，但仍会出现此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:30:00.843

您显示的行是 product/category.php 而不是 seacrh.php

打开您的**目录/控制器/产品/search.php**我确定您在那里使用 ALL，而不是将其放在“ALL”之类的引号中。使用**“ALL”**并且错误应该消失

# asp.net - 在 asp.net 中将值从网页传递到 Web 表单

> ID：14750417
> 
> 赞同：0
> 
> 时间：2013-02-07T11:48:33.537
> 
> 标签：asp.net

是否可以将值从 asp.net 网站传递到 asp.net 中的 Web 表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:50:20.190

您可以通过 System.Diagnostics.Process 启动该进程，将 webform 中的值作为命令参数传入，例如`Process.Start(@"c:\temp\myapp.exe -name=joe -color=green")`，但这显然只会在服务器上启动“myapp.exe”。我不熟悉您的业务流程，但您肯定最好将值保存到 Web 应用程序中的数据库中，然后在 Windows 窗体应用程序中从数据库中加载？

# angularjs - 用 Jasmine 测试 AngularJS 模块会导致 Jasmine 错误

> ID：14750425
> 
> 赞同：1
> 
> 时间：2013-02-07T11:48:49.747
> 
> 标签：angularjs, jasmine

我无法在我的 AngularJS 模块上进行简单的 Jasmine 测试。任何建议将不胜感激。

带控制器的模块：

```
(function(myApp) {
    myApp.App = angular.module("MyApp", []).
    config(["$routeProvider", function($routeProvider) {
    $routeProvider.
        when('/', { controller: "CoreAppController", templateUrl: 'App.html' }).
        otherwise({ redirectTo: '/' });
    }]);

    myApp.App.controller("CoreAppController", function($scope, $http, widgetService)     {
        /* controller definition */
    }
}(window.myApp = window.myApp || {})); 
```

单元测试：

```
(function(myApp) {
    describe("CoreAppController spec", function() {
        describe("Create the CoreApp", function() {
            beforeEach(angular.module("MyApp"));
            describe("CoreAppController", function() {
                it("Should create the core application",
                    expect(1).toBeGreaterThan(0)
                )
            });
        })
    });
}(window.myApp = window.myApp || {})); 
```

测试文件中包含的文件按以下顺序排列：

*   茉莉花.js
*   茉莉花html.js
*   angular.min.js
*   angular.mock.js
*   app.js（包含模块和控制器定义）
*   CoreAppControllerSpec.js（单元测试文件）。

运行此测试会导致以下错误：

TypeError: Object # has no method 'apply' at jasmine.Queue.next_ （文件：///C:/TeamFoundation/PRE/test/jasmine/jasmine.js:1064:17） ///C:/TeamFoundation/PRE/test/jasmine/jasmine.js:2096:31) 在 jasmine.Queue.start (file:///C:/TeamFoundation/PRE/test/jasmine/jasmine.js:2049 :8) 在 jasmine.Queue.next_ (file:///C:/TeamFoundation) 的 jasmine.Spec.execute (file:///C:/TeamFoundation/PRE/test/jasmine/jasmine.js:2376:14) /PRE/test/jasmine/jasmine.js:2096:31) at jasmine.Queue.start (file:///C:/TeamFoundation/PRE/test/jasmine/jasmine.js:2049:8) at jasmine.Suite .execute (file:///C:/TeamFoundation/PRE/test/jasmine/jasmine.js:2521:14) 在 jasmine.Queue.next_ (file:///C:/TeamFoundation/PRE/test/jasmine/ jasmine.js:2096:31) 在 jasmine.Queue.start (file:///C:/TeamFoundation/PRE/test/jasmine/jasmine.js:2049:8) 在 jasmine.Suite.execute (file:///C:/TeamFoundation/PRE/test/jasmine/jasmine.js:2521:14)

从测试中删除“模块”行会使其通过。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T16:26:02.413

[angular.module](http://docs.angularjs.org/api/angular.module)创建一个新模块。

[module](http://docs.angularjs.org/api/angular.mock.module)是 angular.mock.module 的别名 - 发布在 window 上以便于访问 - 它收集模块的配置。

这就是为什么将 angular.module 更改为 module 解决了您的问题的原因。

问候， 艾坦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:19:43.713

奇怪的是，将 'angular.module' 更改为 'module' 解决了这个问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-18T17:08:06.327

一个更好的解决方案是`angular-mocks.js`在脚本之后包含`angular.js`，以便 angular-mocks 将定义`window.module = angular.mock.module = ...`（以及`window.inject`，等等......）。

# file - 如何在 prolog 中读取文件并仅将几个单词放入列表中？

> ID：14750429
> 
> 赞同：1
> 
> 时间：2013-02-07T11:48:59.897
> 
> 标签：file, list, prolog

我必须阅读 results.txt ，其中包含一棵树，其中包括：

根 ( S( NP(..) NV(..) . . ) )

以及其他不适合我的事情，

如何在列表中仅插入“ROOT (...)”？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:24:00.857

尽管您的问题含糊不清，但这里有一段工作代码。您需要根据实际需求对其进行调整

```
tree(Tree) -->
    sym(Functor), "(", arguments(Args), ")",
    {Tree =.. [Functor|Args]}.

sym(S) -->
    [F], { sym_char(F) },
    sym_rest(Cs),
    !, { atom_codes(S, [F|Cs]) }.

sym_rest([C|Cs]) -->
    [C], { sym_char(C) },
    sym_rest(Cs).
sym_rest([]) --> [].

sym_char(F) :- F >= 0'A, F =< 0'Z .

arguments([A|Args]) --> argument(A), ",", arguments(Args).
arguments([A]) --> argument(A).
argument(A) --> tree(A) ; sym(A).

... --> [] ; [_], ... . 
```

在返回的术语列表中与[phrase_from_file](http://www.swi-prolog.org/pldoc/doc_for?object=section%283,%27A.19.1%27,swi%28%27/doc/Manual/pio.html%27%29%29) /2 和 cons 一起使用，这里我展示了一个使用 phrase/2 的测试。

```
?- phrase((..., tree(T), ...), " -- garbage -- A(X,Y,Z(A,B,C)) -- garbage --").
T = 'A'('X', 'Y', 'Z'('A', 'B', 'C')) . 
```

# magento - 在magento中获得Total后申请折扣

> ID：14750432
> 
> 赞同：0
> 
> 时间：2013-02-07T11:49:13.680
> 
> 标签：magento, discount

任何人都可以详细说明适用于整个购物车的折扣工作吗？我无法理解它背后的逻辑。实际上，我确实想编写我自己的适用于购物车的自定义折扣。

目前我正在覆盖 Mage/salesrules 并在 validator.php 中添加我的规则。它可以工作，但问题是折扣适用于每件商品。我试图理解固定购物车规则背后的逻辑，但我不能。还有其他方法吗？可以做到。

因为我是 magento 和 php 或整个电子商务的新手。请详细给我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:31:17.573

您可以根据订单的总金额设置折扣规则等。这可以在促销 -> 购物车价格规则中完成。为什么不使用它？

# netbeans - 从 Netbeans 项目中删除文件，但不从硬盘驱动器中删除文件

> ID：14750433
> 
> 赞同：5
> 
> 时间：2013-02-07T11:49:28.080
> 
> 标签：netbeans, netbeans-7

在我的项目文件夹中有很多文件，但我不想将它们全部放在我的 Netbeans 项目中。Netbeans 也会使用更多的内存和时间自动扫描它们。

有没有办法从 Netbeans 项目中排除文件/文件夹。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-07T05:07:52.977

使用 Netbeans 7.3 的解决方案：

*   在“项目”窗口中右键单击您的项目，
*   点击“属性”，
*   在名为“类别”的左侧面板中单击“忽略的文件夹”，
*   单击“添加文件夹”并选择要忽略的文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:59:09.690

您是指下拉菜单中不需要的项目还是一个项目中的不需要的文件？您具体指的是哪些文件？如果它在项目中没用，你可以删除该文件，但如果它是项目附带的，我会小心，因为大部分都是项目中需要的。如果您在项目下拉菜单中引用其他项目，您始终可以将已完成的项目放在另一个文件夹中。

# c# - 是否可以对属性和私有变量有一个评论

> ID：14750434
> 
> 赞同：3
> 
> 时间：2013-02-07T11:49:34.053
> 
> 标签：c#, properties, comments

大家好，我的问题很简单。

```
/// <summary>
/// a description here. for internal use
/// </summary>
private A _Owner;
/// <summary>
/// Same description also here. for outside use
/// </summary>
public A Owner
{
    get { return _Owner; }
    set { _Owner = value; }
} 
```

有没有办法避免两次写相同的评论？这只是一个麻烦。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T11:51:46.083

首先，请注意，您*不需要*私人成员的智能注释，包括字段。所以你可以*删除第一条评论*。如果该字段的含义从名称中不明显，则说明您没有正确命名它。

其次，对于大多数简单的属性，您可以完全删除显式字段声明......

```
/// <summary>a description here</summary>
public A Owner {get;set;} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-07T11:52:20.583

它不是。但是评论该属性就足够了，因为私有成员不会显示在您的班级之外。因此，只需评论您的财产。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-07T11:51:01.047

如果它只是一个支持字段的直观视图，只需使用 auto 属性来避免重复。

```
/// <summary>
/// just use an autoprop
/// </summary>
public A Owner
{
    get;set;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-07T11:52:13.383

使用**[自动实现的属性](http://msdn.microsoft.com/en-us/library/bb384054.aspx)**，然后您可以为该属性指定单个 XML 注释。

```
/// <summary>
/// Same description also here. for outside use
/// </summary>
public A Owner
{
get; set;
} 
```

但是，如果您在 get 或 set 中使用私有字段做某事，那么您必须指定 XML 注释两次。

还有一件事，**您可能必须为 property 指定 XML 注释**，因为它暴露在类之外，而不是您的公共字段。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T11:53:22.657

不，没有办法避免这种情况，因为 intelisense 将书面评论链接到找到的代码工件。在您的情况下，您有**2**个：

*   一个是一个`property`。
*   另一个是`field`.

因此*，在您的情况下*，您需要编写两次，或者，正如 spender 建议的那样，使用 auto 属性并定义一次。

# assembly - 学习 SSE/SSE2 和 asm 优化

> ID：14750440
> 
> 赞同：7
> 
> 时间：2013-02-07T11:49:56.453
> 
> 标签：assembly, graphics, x86, x86-64, sse

我熟悉 C/C++ 和汇编 x86/x64 语言，但现在我需要学习图形优化（一般是 SSE/SSE2 和 asm 优化），我可以使用哪些资源/书籍/链接来学习这些主题？我一直在网上搜索，但运气不佳

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-12T13:14:41.867

马可，

以下三点回应：

1.  如果您想学习一组快速技巧，可以在算法谜题的总标题下找到书籍。以下两个我已经使用并提供了出色的挑战集来磨练您的技能。[Book1](https://rads.stackoverflow.com/amzn/click/com/0321842685)是一些非常有趣的技巧的集合。我也很喜欢这本书[2](https://rads.stackoverflow.com/amzn/click/com/0199740445)。

我认为 Agner 教授的帖子是关于这个主题的最后一句话，它们是必读的。

2.  如果您正在寻找有关如何优化或使用 64 位指令集的细节 - 我的经验是让 Intel Manual Vol 2 方便使用。您可以在这个论坛中提出一个特定的问题并获得一些优秀的解决方案。如果您想从更基础的水平开始，WhatsACreel 提供了一组出色的 youtube 教程 - 覆盖范围和解释都很棒。他带您进入 AVX/AVX2 设置的 60 多个会话，从基础开始。

3.  我不是专业程序员 - 我是一名企业管理专业人士，但在我的业余时间为学术机构/博士被困或受苦的人/这类人/这类人编写 64 位汇编语言代码。我认为 x64 非常强大，非常紧凑，并且可以做任何语言都无法尝试和做的事情。因此，如果有人试图阻止您使用 x64 编写，引用复杂性或其他任何内容，请向他们展示他们自己选择的任何编译器生成的代码的反汇编:-)（应该足够吓到他们）或者，只是轻轻地忽略他们。

祝一切顺利，

# java - 如何在 AJAX 中检索弹簧控制器的对象？

> ID：14750442
> 
> 赞同：0
> 
> 时间：2013-02-07T11:50:07.180
> 
> 标签：java, javascript, ajax, spring, spring-mvc

我的 AJAX 调用：

```
var url = "UsersGroupReader.html?selectedCompanyName=" + selectedCompanyName + "&test="+Math.random();
req.onreadystatechange = processAccessGroupRequest;
req.open("GET", url, true); 
req.send(null);

function processAccessGroupRequest() {
    if (req.readyState == 4) {
        alert("req.status : " + req.status)
    if (req.status == 200) {
            var message = req.responseXML
            alert("message " + message);
            if (message == "No Database Connection") {
                alert("Please check the database connection");
            } else if (message == "DataDeleted") {
                //alert("Data has been deleted from Database. Please LOGOUT and try again");
                alert("Access Denied");
            } else {
                //setAccessGroups(message);
            }
        }
    }
} 
```

这是我的控制器

```
@RequestMapping(value = "Jsp/UsersGroupReader.html", method = RequestMethod.GET, produces = MediaType.APPLICATION_JSON_VALUE)
public @ResponseBody Vector<String> readUsersGroup(HttpServletRequest request,
        HttpSession httpSession) {
        .....
        .....
        return Vector; 
```

`req.responseXML`是_`null`

返回的`vector`对象是要读取的`javascript`但是不知道怎么办？谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:24:25.770

您需要更改处理此 ajax 请求的控制器方法的返回类型。返回类型应该是您想要在 jsp 中使用的对象类型的类。例如。`List<String>`或您拥有的任何其他自定义类。

而且您还必须`@ResponseBody`在处理此请求的控制器函数上声明注释。`jackson-core-asl`而且您还需要像`jackson-core-mapper`1.5 版这样的 JSON 库。这会将您的返回类型类对象转换为 JSON 对象，您将得到响应。你的`@RequestMapping`注释应该声明`produces=MediaType.APPLICATION_JSON_VALUE`.

产生属性的语法。

```
@RequestMapping(value = "/xxx/yyy", method = RequestMethod.POST, produces=MediaType.APPLICATION_JSON_VALUE) 
```

我希望这可以帮助你。

# iphone - 不调用 OpenEarsEventObserverDelegate 方法

> ID：14750443
> 
> 赞同：0
> 
> 时间：2013-02-07T11:50:07.750
> 
> 标签：iphone, objective-c, voice-recognition, openears

我正在制作一个语音识别应用程序，它可以在没有网络的情况下识别我的声音，为此我正在使用`OpenEars`sdk。我已经获取了它的示例代码，并且我制作了一个类似的示例代码应用程序，但是在我的代码中我的`openearsEventDelegate`方法没有被调用。我采用了协议`<openEarsEventObserverDelegate>` ，并在我的`viewDidLoad`方法中设置了`openEarseventObserver.delegate=self`.

如果我遗漏了什么，请指导我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-28T22:41:25.153

如果没有更多代码，很难确切地说出您的问题是什么，但这里有一些我会尝试的事情：

设置委托时确保您的 OpenEarsEventObserver 对象不为零：

```
 OpenEarsEventsObserver* openEarsEventsObserver = [[OpenEarsEventsObserver alloc] init];
        [openEarsEventsObserver setDelegate:self]; 
```

确保你的 pocketsphinxController 不是 nil 并且你已经正确开始监听，为此我使用惰性实例化：

```
 - (PocketsphinxController *)pocketsphinxController {
      if (_pocketsphinxController == nil) {
          _pocketsphinxController = [[PocketsphinxController alloc] init];
          }
     return _pocketsphinxController;
    } 
```

然后，当您想开始识别语音时：

```
 [self.pocketsphinxController startListeningWithLanguageModelAtPath:<#(NSString *)#> dictionaryAtPath:<#(NSString *)#> acousticModelAtPath:<#(NSString *)#> languageModelIsJSGF:<#(BOOL)#>];
     // Change "AcousticModelEnglish" to "AcousticModelSpanish" to perform Spanish recognition instead of English. 
```

所有这些信息都可以在以下位置找到：[OpenEars 教程](http://www.politepix.com/openears/tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T10:45:56.903

我有同样的问题。当我尝试在开始收听之前设置委托`self.openEarsEventsObserver`时`nil`，您可以在开始收听之前检查它是否为 nil，然后为您的属性设置一个新的 OpenEarsEventsObserver 实例。这对我来说是一个快速修复。

# sml - 如何在 SML 中将字符串解析为 (int * int) 元组？

> ID：14750444
> 
> 赞同：3
> 
> 时间：2013-02-07T11:50:09.717
> 
> 标签：sml, smlnj, ml

我有一个类似这样的字符串`"3,4\r\n"`，我想将它们转换成一个元组，即`(3,4)`。

我们如何在 SML 中实现这一点？

我得到一个字符串值的原因是因为我正在读取一个返回类似字符串的文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T13:32:12.510

您需要一个简单的解析器来实现这一点。库中已经提供了一个解析整数的适当函数[`Int.scan`](http://standardml.org/Basis/integer.html#SIG%3aINTEGER.scan%3aVAL)（以及其他类型的朋友），但您必须自己编写其余的函数。例如：

```
(* scanLine : (char, 's) StringCvt.reader -> (int * int, 's) StringCvt.reader *)
fun scanLine getc stream =
    case Int.scan StringCvt.DEC getc stream
      of NONE => NONE
       | SOME (x1, stream') =>
    case getc stream'
      of NONE => NONE
       | SOME (c1, stream'') =>
    if c1 <> #"," then NONE else
    case Int.scan StringCvt.DEC getc stream''
      of NONE => NONE
       | SOME (x2, stream''') => 
    case getc stream'''
      of NONE => NONE
       | SOME (c2, stream'''') =>
    if c2 <> #"\n" then NONE else
    SOME ((x1, x2), stream'''') 
```

然后，解析所有行：

```
(* scanList : ((char, 's) StringCvt.reader -> ('a, 's) StringCvt.reader) -> (char, 's)  StringCvt.reader -> ('a list, 's) StringCvt.reader *)
fun scanList scanElem getc stream =
    case scanElem getc stream
      of NONE => SOME ([], stream)
       | SOME (x, stream') =>
    case scanList scanElem getc stream'
      of NONE => NONE
       | SOME (xs, stream'') => SOME (x::xs, stream'') 
```

要使用它，例如：

```
val test = "4,5\n2,3\n"
val result = StringCvt.scanString (scanList scanLine) test
(* val result : (int * int) list = [(4, 5), (2, 3)] *) 
```

如您所见，代码有点重复。要摆脱选项类型的所有匹配，您可以编写一些基本的*解析器组合器*：

```
(* scanCharExpect : char -> (char, 's) StringCvt.reader -> (char, 's) StringCvt.reader *)
fun scanCharExpect expect getc stream =
    case getc stream
      of NONE => NONE
       | SOME (c, stream') =>
         if c = expect then SOME (c, stream') else NONE

(* scanSeq : ((char, 's) StringCvt.reader -> ('a, 's) StringCvt.reader) * ((char, 's) StringCvt.reader -> ('b, 's) StringCvt.reader) -> (char, 's) StringCvt.reader -> ('a * 'b, 's) StringCvt.reader *)
fun scanSeq (scan1, scan2) getc stream =
    case scan1 getc stream
      of NONE => NONE
       | SOME (x1, stream') =>
    case scan2 getc stream'
      of NONE => NONE
       | SOME (x2, stream'') => SOME ((x1, x2), stream'')

fun scanSeqL (scan1, scan2) getc stream =
    Option.map (fn ((x, _), stream) => (x, stream)) (scanSeq (scan1, scan2) getc stream)
fun scanSeqR (scan1, scan2) getc stream =
    Option.map (fn ((_, x), stream) => (x, stream)) (scanSeq (scan1, scan2) getc stream)

(* scanLine : (char, 's) StringCvt.reader -> (int * int, 's) StringCvt.reader *)
fun scanLine getc stream =
    scanSeq (
        scanSeqL (Int.scan StringCvt.DEC, scanCharExpect #","),
        scanSeqL (Int.scan StringCvt.DEC, scanCharExpect #"\n")
    ) getc stream 
```

您可以沿着这些思路构建更多很酷的抽象，尤其是在定义自己的中缀运算符时。但我会把它留在那里。

您可能还想处理标记之间的空白。阅读器在库[`StringCvt.skipWS`](http://standardml.org/Basis/string-cvt.html#SIG%3aSTRING_CVT)中很容易获得，只需将其插入正确的位置即可。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T13:33:56.537

以下是如何做到这一点的粗略示例

```
fun toPair s =
    let
      val s' = String.substring(s, 0, size s-2)
    in
      List.mapPartial Int.fromString (String.tokens (fn c => c = #",") s')
    end 
```

但是请注意， mapPartial 会丢弃任何无法转换为整数的内容（`Int.fromString`返回时`NONE`），并且假定字符串始终包含`\r\n`，因为通过获取子字符串删除了最后两个字符。

**更新**

显然，罗斯伯格的答案是正确的做法。然而，根据手头的任务，这仍然可以作为一个快速而愚蠢的方法的例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-01T18:19:17.347

这是从字符串中提取所有无符号整数并将它们返回到列表中的简单方法（将列表转换为元组留给读者练习）。

```
fun ints_from_str str =
  List.mapPartial
    Int.fromString
    (String.tokens (not o Char.isDigit) str);

ints_from_str " foo 1, bar:22? and 333___  ";

(* val it = [1,22,333] : int list *) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-07T12:09:13.950

以下应该实现这一点。

```
 exception MyError

 fun convert(s) = 
   case String.explode(s) of
        x::','::y::_ => (x,y)
       | _ => raise MyError 
```

PS - 在工作中无法使用 SML 解释器。所以可能需要稍作改动。

# ruby-on-rails - 如何比较应用程序与插件/宝石模型中的 Rails 模型？

> ID：14750445
> 
> 赞同：0
> 
> 时间：2013-02-07T11:50:10.173
> 
> 标签：ruby-on-rails, plugins

我有以下问题：我有一个正在运行的 rails 应用程序，我想安装一个插件，但是这个插件带有很多功能（和模型），这些功能（和模型）已经在我的 rails 应用程序中了。所以我的第一步是检查插件中的模型是否存在，如果它们存在，我想知道哪些是生成迁移文件的不同属性。

有一些我可以使用的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:00:22.623

在为应用程序提供额外的模型和 sql 表时，插件和 gems 应该始终使用命名空间以避免名称冲突。如果不是这种情况，建议业主尽快这样做。您不必完成比较两者的繁琐任务。

你能告诉我们你在说哪个插件吗？最好和最简单的方法是打开源代码。

# java - com.w3c.dom.Document 没有

> ID：14750446
> 
> 赞同：7
> 
> 时间：2013-02-07T11:50:10.627
> 
> 标签：java, xml

我正在使用以下代码创建`com.w3c.dom.Document`一个：`String`

```
DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
Document doc = docBuilder.parse(new InputSource(new StringReader("<a><b id="5"/></a>"))); 
```

当我`System.out.println(xmlToString(document))`，我得到这个：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?><a><b id="5"/></a> 
```

一切都很好，但我不希望 XML 有`<?xml version="1.0" encoding="UTF-8" standalone="no"?>`声明，因为我必须用私钥签名并嵌入到肥皂信封中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-07T12:02:48.427

您可以使用 a[`Transformer`](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/transform/Transformer.html)并将[`OutputKeys.OMIT_XML_DECLARATION`](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/transform/OutputKeys.html#OMIT_XML_DECLARATION)属性设置为`"yes"`：

```
Transformer t = TransformerFactory.newInstance().newTransformer();
t.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
StringWriter sw = new StringWriter();
t.transform(new DOMSource(doc), new StreamResult(sw)); 
```

请注意，您还可以：

*   如果您[`StreamSource`](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/transform/stream/StreamSource.html)真的`DOMSource`不需要.`String``Document`
*   如果您想输出 a ，请使用 a[`DOMResult`](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/transform/dom/DOMResult.html)而不是a 。`StreamResult``Document`

# php - opencart 凭证，额外的链接似乎会中断 onclick

> ID：14750447
> 
> 赞同：0
> 
> 时间：2013-02-07T11:50:11.903
> 
> 标签：php, javascript, html, opencart

在opencart的优惠券列表中，它会检查是否有优惠券然后显示出来，然后您可以点击“发送”正式发送优惠券。出于某种原因，这个过程似乎只有在我`<a>`在这个发送选项之后直接删除链接标签时才有效。我不知道为什么。这是清单...

```
 <?php foreach ($vouchers as $voucher) { ?>
        <tr>
          <td style="text-align: center;"><?php if ($voucher['selected']) { ?>
            <input type="checkbox" name="selected[]" value="<?php echo $voucher['voucher_id']; ?>" checked="checked" />
            <?php } else { ?>
            <input type="checkbox" name="selected[]" value="<?php echo $voucher['voucher_id']; ?>" />
            <?php } ?></td>
          <td class="left"><?php echo $voucher['code']; ?></td>
          <td class="left"><?php echo $voucher['from']; ?></td>
          <td class="left"><?php echo $voucher['to']; ?></td>
          <td class="right"><?php echo $voucher['amount']; ?></td>
          <td class="left"><?php echo $voucher['theme']; ?></td>
          <td class="left"><?php echo $voucher['status']; ?></td>
          <td class="left"><?php echo $voucher['date_added']; ?></td>
          <td class="right">[ <a onclick="sendVoucher('<?php echo $voucher['voucher_id']; ?>');"><?php echo $text_send; ?></a> ]
            <?php foreach ($voucher['action'] as $action) { ?>
            [ <a href="<?php echo $action['href']; ?>"><?php echo $action['text']; ?></a> ]
            <?php } ?></td>
        </tr>
        <?php } ?> 
```

在上面的代码中，当我删除第二个时`<a href="<?php echo $action['href']; ?>"><?php echo $action['text']; ?></a>`，`onclick`它应该可以正常工作，当我不删除它时，而不是发送凭证，它只是将我带到该凭证的编辑区域。

继承人的`sendVoucher`功能，但我什至不确定该功能是否与问题有关。

```
<script type="text/javascript"><!--
 function sendVoucher(voucher_id) {
$.ajax({
    url: 'index.php?route=sale/voucher/send&token=<?php echo $token;       ?>&voucher_id=' + voucher_id,
    type: 'post',
    dataType: 'json',
    beforeSend: function() {
        $('.success, .warning').remove();
        $('.box').before('<div class="attention"><img src="view/image       /loading.gif" alt="" /> <?php echo $text_wait; ?></div>');
    },
    complete: function() {
        $('.attention').remove();
    },
    success: function(json) {
        if (json['error']) {
            $('.box').before('<div class="warning">' + json['error'] + '</div>');
        }

        if (json['success']) {
            $('.box').before('<div class="success">' + json['success'] + '</div>');
        }       
    }
});
    return false;
  }
  //--></script> 
```

编辑：为了更清楚，继承人一行的输出 html...

```
 <tr>
          <td style="text-align: center;">                <input type="checkbox" name="selected[]" value="4" />
            </td>
          <td class="left">34123123</td>
          <td class="left">adrian</td>
          <td class="left">Adrian</td>
          <td class="right">€20.00</td>
          <td class="left">Birthday</td>
          <td class="left">Enabled</td>
          <td class="left">07/02/2013</td>
          <td class="right">[ <a onclick="sendVoucher('4');"  >Send</a> ]
                            [ <a href="http://mysite.com/admin/index.php?route=sale/voucher/update&amp;token=c9b6332af21513c0a3af8e4265fa62a1&amp;voucher_id=4">Edit</a> ] 
            </td>
        </tr> 
```

# android - 以编程方式更改android中tty端口的权限和所有权

> ID：14750459
> 
> 赞同：5
> 
> 时间：2013-02-07T11:51:18.787
> 
> 标签：android, adb

当我在该端口上写入数据时，我需要更改 /dev/tty* 文件的权限。我可以通过以 root 身份输入 adb shell 从 Windows 命令提示符更改权限。

但是当我重新启动设备时，权限不会保留。相反，它们被设置为默认值。

所以，每次我需要在重启后运行我的应用程序时，我都需要更改权限。

我尝试使用`Runtime.exec()`方法从应用程序运行 adb 命令，但这并没有改变任何东西，因为应用程序没有更改文件所有权权限的权限。

这就是我从应用程序执行命令的方式（在这种情况下是在模拟器中测试的）：

```
Process process =   Runtime.getRuntime().exec("su");
DataOutputStream os = new DataOutputStream(process.getOutputStream());
os.writeBytes("chown root:root /dev/ttyS0 \n");
os.writeBytes("chmod 777 /dev/ttyS0 \n");
os.writeBytes("exit\n");
os.flush();
os.close();
process.waitFor(); 
```

当“su”命令被执行时，它会给出错误`su: uid 10044 not allowed to su` 因此，在执行 chown 或 chmod 时会给出错误`Unable to chmod Operation Not permitted`

那么，如何更改该文件的权限和所有权？

任何帮助都非常感谢！

谢谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:18:39.297

默认（来自[Google AOSP 源](https://android.googlesource.com/platform/system/extras/+/master/su/su.cpp)）`su`二进制检查`UID`它正在运行。只有`root`和`shell`用户被允许运行`su`。`su`除非您安装不`su`检查`UID`.

命令所做`adb root`的就是在设备上执行以下命令：

```
setprop service.adb.root 1
stop adbd
start adbd 
```

但我很肯定你在这里问了一个错误的问题。没有理由`su`命令不能满足您的目的。

您应该执行以更改 tty 设备权限的命令是：

```
Runtime.getRuntime().exec("su 0 chmod 777 /dev/ttyS0"); 
```

同样在 android 中，`.`用作`chown`命令中用户和组字段之间的分隔符，而不是`:`. 正确的命令是：

```
su 0 chown root.root /dev/ttyS0 
```

另一个常见错误是尝试使用标准 Linux`su`选项，例如`-c`. AOSP 版本`su`要简单得多：

```
usage: su [UID[,GID[,GID2]...]] [COMMAND [ARG...]]

        Switch to WHO (default 'root') and run the given command (default sh).
        where WHO is a comma-separated list of user, group,
        and supplementary groups in that order. 
```

# .htaccess - 如何在 nginx 0.7.65 中编写干净的 url htaccess

> ID：14750463
> 
> 赞同：-1
> 
> 时间：2013-02-07T11:51:27.063
> 
> 标签：.htaccess, nginx

我收到 404 错误，将 apache 的 htaccess 转换为 nginx 后，下面是我的 htaccess 代码

```
RewriteEngine On
Options +FollowSymlinks
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?$1 [L] 
```

请帮助我，我是learnet

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:24:46.440

编辑您的 nginx.conf 并将此行添加到您的虚拟主机中

```
 location / 
    { 
    if (!-e $request_filename)
    { 
       rewrite ^(.*)$ /index.php?$1 break; 
    } 
    } 
```

# c++ - 闪烁的轮廓线

> ID：14750464
> 
> 赞同：0
> 
> 时间：2013-02-07T11:51:30.170
> 
> 标签：c++, image-processing, opencv, video-processing, contour

[我的程序的目标](https://stackoverflow.com/questions/14706163/problems-with-finding-contour-in-a-video-image-using-c-findcontours)是从摄像机中识别出最大的轮廓并用红线绘制它。

我发现当检测到最大的轮廓（又名`largest_contours`在我的程序中）时，轮廓的轮廓线会闪烁，~~有时~~会中断函数以在其周围绘制一条红线（因为轮廓的线不再连接，因此内部不再检测到轮廓图片）。

我的问题是：

1.  发生此问题的原因是什么？
2.  如何避免（或我们可以避免）这个问题的发生？
3.  有什么建议可以改进我的轮廓检测程序吗？

提前致谢。

PS：有关代码、图片和更多信息，请单击[此处](https://stackoverflow.com/questions/14706163/problems-with-finding-contour-in-a-video-image-using-c-findcontours)。[视频在这里！！！](http://www.youtube.com/watch?v=4GLabxxd228&feature=youtu.be)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:22:43.057

`findContours`OpenCV 的 API 修改了用于查找轮廓的图像。您可以尝试以下操作。

```
Mat displayContours = Mat::zeros(image.rows,image.cols,CV_8UC1);
for(int i = 1;i<(int)largest_contours[0].size();i++)
{
   line(displayContours,largest_contours[0][i-1],largest_contours[0][i],255,2,8,0);
   line(image,largest_contours[0][i-1],largest_contours[0][i],cv::Scalar(0,0,255),2,8,0);
} 
```

现在显示`displayContours`代替`foreground`

# javascript - Jquery Token-Input - 动态传递 propertyToSearch 属性值

> ID：14750465
> 
> 赞同：0
> 
> 时间：2013-02-07T11:51:31.393
> 
> 标签：javascript, jquery, jquery-tokeninput

我正在将 Jquery Token-Input 用于自动搜索字段。我需要动态发送 PropertyToSearch 字段值。

**HTML：**

```
 <input checked="checked" name="suggest" type="radio" />Month
   <input name="suggest" type="radio" />Day</label> 
```

如上面的 html 字段。

当我选择月时，列表应列为月，当我选择日时，列表应列为工作日。

现在我在默认情况下传递 propertyToSearch，如下所示，

**脚本：**

```
 $("#demo").tokenInput(../Management/getDaysAndMonths,
            {
                propertyToSearch: "Month",
                tokenLimit: 1
            }); 
```

我需要如何动态设置 propertyToSearch 字段值。以便它可以根据选定的单选按钮字段切换列出的值。

请通过建议澄清我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:56:41.337

使用 jquery selecot r 选择值...

```
$('input[name="suggest"]').val()
  -^^^^^^^^^^^^^^^^^^^^^^--selects input with name=suggest and .val() selects the selected radio value. 
```

试试这个

**HTML**

```
<input checked="checked" name="suggest" type="radio" value="Month"/>Month
<input name="suggest" type="radio" value="Day"/>Day</label> 
```

**查询**

```
 $("#demo").tokenInput(../Management/getDaysAndMonths,
  {
     propertyToSearch:$('input[name="suggest"]').val(),
     tokenLimit: 1
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:51:45.533

我有一个解决方案。

而不是更改 propertyToSearch。我只是更改了后面的代码以根据提供的输入列出值。

So, if **month** is selected. I pass a parameter **"searchProperty"** in url as *month* and if **day** has been selected I pass a parameter as *day* based on the searchProperty value. I list the values and pass it on the dropdown list.

```
 $("#demo").tokenInput("../Management/getDaysAndMonths?searchProperty="+$('input[name="suggest"]').val(),
       {
           //code
       }); 
```

# android - 如何根据其中的另一个列表视图填充行列表视图

> ID：14750469
> 
> 赞同：0
> 
> 时间：2013-02-07T11:51:39.633
> 
> 标签：android, listview, size, height

我有一个 ListView，每行都有一张照片，在照片下方有另一个 ListView，上面有关于照片的评论。问题是子 ListView 只显示第一行，因为父 ListView 的大小。

有什么方法可以根据子 ListView 大小使父 ListView 大小灵活吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:20:50.043

我的xml代码

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relLayoutMain"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@layout/background" 
    >

    <ListView
        android:id="@+id/photoList"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:cacheColorHint="#00000000"
        android:footerDividersEnabled="true"
        android:paddingTop="5sp" >

    </ListView>     
</RelativeLayout> 
```

photoList 的行布局为：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content" >

    <ImageView
       android:id="@+id/imgView"
       android:contentDescription="@string/app_name"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:paddingLeft="10dp"
       android:paddingRight="10dp"
       android:layout_below="@+id/llUserHeader"
       android:adjustViewBounds="true"
       />

    <ListView android:id="@+id/commentList"

        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:layout_below="@+id/imgView"   
        android:cacheColorHint="#00000000"
        android:footerDividersEnabled="true"
        >
    </ListView>

</RelativeLayout> 
```

commentList 的行布局是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content" 
   android:paddingLeft="10sp"
   android:paddingRight="10sp"
   android:paddingTop="5sp"
   android:orientation="horizontal"
   >
    <TextView
            android:id="@+id/usernamecomment"
            android:text="@string/share_title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="15sp"
             />
    <TextView 
        android:id="@+id/comment"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_marginLeft="3sp"
        />
</LinearLayout> 
```

# mysql - MySQL：在视图中使用过程给出已知错误，但没有任何已知症状

> ID：14750474
> 
> 赞同：0
> 
> 时间：2013-02-07T11:51:53.873
> 
> 标签：mysql, stored-procedures, view

我将这个过程'get_usage'定义为：

```
BEGIN
    SELECT 
        CONCAT(GROUP_CONCAT(CONCAT('(SELECT order_id,`usage`, created, expire FROM ',table_name,' )') SEPARATOR '\r\nUNION\r\n'),' ORDER BY created ASC')
    INTO 
        @resultQuery
    FROM 
        information_schema.`TABLES`
    WHERE
        table_name LIKE "usage_%";

    PREPARE stmt FROM @resultQuery;
    EXECUTE stmt;
    DEALLOCATE PREPARE stmt;
END 
```

哪个做它应该做的。

为了更灵活，我想在视图中捕获此过程的输出：

```
CREATE 
    VIEW `usage_view`AS 
    SELECT get_usage() as usage_table; 
```

之后我计划对'usage_table'位做一些事情..

但是..我不断收到 **[Err] 1305 - FUNCTION backup.get_usage 不存在**

在网上看有很多关于函数/过程名称和括号之间的空格的讨论，没有..或者有错误的过程，这个过程没有（即：我得到预期的结果）..我'我希望我错过了什么或其他东西，但几乎卡住了..

任何和所有的帮助都非常感谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:31:44.517

如果要在视图中使用存储例程的结果，则需要创建并填充附加表。在过程中创建和填充表。之后，调用此过程，它将创建表，然后从您的视图中选择数据。

如果您只想在应用程序中读取结果集，那么您可以在过程中执行 SELECT 查询（您的过程当前执行），并在代码中读取数据集（c#、带有 mysqli 扩展名的 php 等）

# android - 如何创建具有许多可拖动视图的可缩放和可平移视图？

> ID：14750476
> 
> 赞同：5
> 
> 时间：2013-02-07T11:52:04.420
> 
> 标签：android, pinchzoom

我正在尝试`board game`在 Android 中创建一个，其中包括一个上面有许多图块的板，可以在板上拖动，也可以从玩家的机架拖到机架上。`Wordfeud`这与游戏非常相似。

该板具有固定的尺寸。我希望用户能够通过捏合来缩放，并在板上平移，并在板上拖动图块。放大/缩小时，瓷砖必须与板一起缩放。

我正在努力寻找正确的设置方法。我想过并尝试了两种方法：

1.  小时候将 a与a`HorizontalScrollView`结合使用。然后，这包含所有图块。这工作正常，但我将如何实现捏缩放？`ScrollView``RelativeLayout``RelativeLayout`
2.  使用此示例缩放和平移视图：[http](http://android-developers.blogspot.nl/2010/06/making-sense-of-multitouch.html) ://android-developers.blogspot.nl/2010/06/making-sense-of-multitouch.html 。但是，我将如何在该视图顶部添加与该视图一起缩放和平移的图块？

这两种选择似乎都不是正确的解决方案。我有兴趣了解其他 Android 开发人员将如何设置它，并希望他们为我提供正确的方向。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T16:32:47.123

好的，首先，我建议忘记第一个解决方案，这不是很简单。第二个是一个好的开始。

这是我的解决方案：

**活动课**

```
import android.os.Bundle;
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Point;
import android.view.Window;
import android.view.WindowManager;
import android.widget.ImageView;
import android.widget.RelativeLayout;

public class MainActivity extends Activity {

    private RelativeLayout mMainLayout;
    private InteractiveView mInteractiveView;

    private int mScreenWidth;
    private int mScreenHeight;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);     

        // Set fullscreen mode
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.activity_main);  

        // Retrieve the device dimensions to adapt interface
        mScreenWidth = getApplicationContext().getResources()
                .getDisplayMetrics().widthPixels;
        mScreenHeight = getApplicationContext().getResources()
                .getDisplayMetrics().heightPixels;        

        mMainLayout = (RelativeLayout)findViewById(R.id.mainlayout);

        // Create the interactive view holding the elements
        mInteractiveView = new InteractiveView(this);
        mInteractiveView.setLayoutParams(new RelativeLayout.LayoutParams(-2,-2 ));
        mInteractiveView.setPosition(-mScreenWidth/2, -mScreenHeight/2);

        mMainLayout.addView(mInteractiveView);

        // Adding a background to this view
        ImageView lImageView = new ImageView(this);
        lImageView.setLayoutParams(new RelativeLayout.LayoutParams(-1,-1));
        lImageView.setImageResource(R.drawable.board);

        mInteractiveView.addView(lImageView);

        // Adding a tile we can move on the top of the board
        addElement(50, 50);     
    }

    // Creation of a smaller element
    private void addElement(int pPosX, int pPosY) {

        BoardTile lBoardTile = new BoardTile(this);
        Bitmap lSourceImage = BitmapFactory.decodeResource(getResources(), R.drawable.tile);
        Bitmap lImage = Bitmap.createScaledBitmap(lSourceImage, 100, 100, true);
        lBoardTile.setImage(lImage);        
        Point lPoint = new Point();
        lPoint.x = pPosX;
        lPoint.y = pPosY;
        lBoardTile.setPosition(lPoint);

        mInteractiveView.addView(lBoardTile);       
} 
```

InteractiveView 类只是一个简单的RelativeLayout，它会对捏和拖动做出反应，并将容纳更多元素：

**交互视图类**

```
import android.content.Context;
import android.graphics.Canvas;
import android.util.FloatMath;
import android.view.MotionEvent;
import android.view.View;
import android.widget.RelativeLayout;

public class InteractiveView extends RelativeLayout{

    private float mPositionX = 0;
    private float mPositionY = 0;
    private float mScale = 1.0f;

    public InteractiveView(Context context) {
        super(context);     
        this.setWillNotDraw(false);
        this.setOnTouchListener(mTouchListener);
    }   

    public void setPosition(float lPositionX, float lPositionY){
        mPositionX = lPositionX;
        mPositionY = lPositionY;
    }

    public void setMovingPosition(float lPositionX, float lPositionY){
        mPositionX += lPositionX;
        mPositionY += lPositionY;
    }

    public void setScale(float lScale){ 
        mScale = lScale;
    }

    @Override
    protected void dispatchDraw(Canvas canvas) {        
        canvas.save();      
        canvas.translate(getWidth() / 2, getHeight() / 2);  
        canvas.translate(mPositionX*mScale, mPositionY*mScale);     
        canvas.scale(mScale, mScale);
        super.dispatchDraw(canvas);
        canvas.restore();
    }   

    // touch events
    private final int NONE = 0;
    private final int DRAG = 1;
    private final int ZOOM = 2;
    private final int CLICK = 3;

    // pinch to zoom
    private float mOldDist;
    private float mNewDist;
    private float mScaleFactor = 0.01f;

    // position
    private float mPreviousX;
    private float mPreviousY;

    int mode = NONE;

    @SuppressWarnings("deprecation")
    public OnTouchListener mTouchListener = new  OnTouchListener(){
        public boolean onTouch(View v, MotionEvent e) {
            float x = e.getX();
            float y = e.getY();
            switch (e.getAction()) {
            case MotionEvent.ACTION_DOWN: // one touch: drag            
                mode = CLICK;
                break;
            case MotionEvent.ACTION_POINTER_2_DOWN: // two touches: zoom            
                mOldDist = spacing(e);          
                mode = ZOOM; // zoom
                break;
            case MotionEvent.ACTION_UP: // no mode          
                mode = NONE;
                break;
            case MotionEvent.ACTION_POINTER_2_UP: // no mode
                mode = NONE;            
                break;
            case MotionEvent.ACTION_MOVE: // rotation
                if (e.getPointerCount() > 1 && mode == ZOOM) {
                    mNewDist = spacing(e) - mOldDist;   

                    mScale += mNewDist*mScaleFactor;
                    invalidate();

                    mOldDist = spacing(e);  

                } else if (mode == CLICK || mode == DRAG) {
                    float dx = (x - mPreviousX)/mScale;
                    float dy = (y - mPreviousY)/mScale;

                    setMovingPosition(dx, dy);
                    invalidate();
                    mode = DRAG;                        
                }
                break;
            }
            mPreviousX = x;
            mPreviousY = y;
            return true;
        }
    };

    // finds spacing
    private float spacing(MotionEvent event) {
        float x = event.getX(0) - event.getX(1);
        float y = event.getY(0) - event.getY(1);
        return FloatMath.sqrt(x * x + y * y);
    }
} 
```

然后，我们有一个“元素”类（称为 BoardTile），它将在这个 InteractiveView 上创建图块。这个类更复杂，因为视图不会占据整个屏幕，我们必须测试触摸事件是否在对象的边界内。

```
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Point;
import android.graphics.Rect;
import android.graphics.Region;
import android.view.MotionEvent;
import android.view.View;

public class BoardTile extends View
{
    private Bitmap mCardImage;
    private final Paint mPaint = new Paint();
    private final Point mSize = new Point();
    private final Point mStartPosition = new Point();
    private Region mRegion;

    public BoardTile(Context context)
    {
        super(context);
        mRegion = new Region();
        this.setOnTouchListener(mTouchListener);
    }

    public final Bitmap getImage() { return mCardImage; }
    public final void setImage(Bitmap image)
    {
        mCardImage = image;
        setSize(mCardImage.getWidth(), mCardImage.getHeight());
    }

    @Override
    protected void onDraw(Canvas canvas)
    {
        Point position = getPosition();
        canvas.drawBitmap(mCardImage, position.x, position.y, mPaint);
    }

    public final void setPosition(final Point position)
    {
        mRegion.set(position.x, position.y, position.x + mSize.x, position.y + mSize.y);
    }

    public final Point getPosition()
    {
        Rect bounds = mRegion.getBounds();
        return new Point(bounds.left, bounds.top);
    }

    public final void setSize(int width, int height)
    {
        mSize.x = width;
        mSize.y = height;

        Rect bounds = mRegion.getBounds();
        mRegion.set(bounds.left, bounds.top, bounds.left + width, bounds.top + height);
    }

    public final Point getSize() { return mSize; }

    public OnTouchListener mTouchListener = new  OnTouchListener(){
        @Override
        public boolean onTouch(View v, MotionEvent event) {

            // Is the event inside of this view?
            if(!mRegion.contains((int)event.getX(), (int)event.getY()))
            {
                return false;
            }

            if(event.getAction() == MotionEvent.ACTION_DOWN)
            {
                mStartPosition.x = (int)event.getX();
                mStartPosition.y = (int)event.getY();
                bringToFront();
                return true;
            }
            else if(event.getAction() == MotionEvent.ACTION_MOVE)
            {
                int x = 0, y = 0;

                x = (int)event.getX() - mStartPosition.x;            
                y = (int)event.getY() - mStartPosition.y;            

                mRegion.translate(x, y);
                mStartPosition.x = (int)event.getX();
                mStartPosition.y = (int)event.getY();

                invalidate();

                return true;
            }
            else
            {   
                return false;
            }
        }
    };
} 
```

这不是一个完整的解决方案，您还必须在图块上调度触摸事件，以便它们考虑到 InteractiveView 的规模。

希望它会帮助你开始！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T12:20:43.333

感谢@PopGorn，他为我指明了正确的方向。我四处寻找一些例子，其中包括触摸事件的调度。我最终使用了这个不错的答案：[https ://stackoverflow.com/a/12497670/757073](https://stackoverflow.com/a/12497670/757073)

# .htaccess - htaccess ModRewrite 到根目录

> ID：14750482
> 
> 赞同：0
> 
> 时间：2013-02-07T11:52:27.190
> 
> 标签：.htaccess, mod-rewrite

我对 htacess 和 modrewrite 了解不多，所以我发现自己陷入了另一个困境，为自己接近这个新领域。

我将针对 2 个不同的问题分开我的查询，以使答案具有主题性，并更好地针对寻找自己问题的解决方案的用户。

让我首先从一个应该很容易但我可能忽略了的开始；

```
RewriteCond %{http_host} ^domain.com.au [nc]
RewriteRule ^(.*)$ https://www.domain.com.au/$1 [R=301,NC] 
```

如您所见，我想要 www。在 URL 中，我还使用 php 脚本强制使用 https，但认为最好简单地使用它来处理这两者，这样用户就不必等待 2 次转发发生。

上面的代码似乎工作正常，但它会将您带到域的根目录。

```
http://domain.com/index.php?page=hello
http://domain.com/dir/index.php?page=hello
http://domain.com/dir17/sub/index.php?page=hello 
```

上述所有 3 个 URL 将重定向到[https://www.domain.com/index.php?page=hello](https://www.domain.com/index.php?page=hello)

显然这与 modrewrite 的目录深度有关，但我不知道如何确保它在本地将其应用于每个目录，而不是简单地指向根目录。

我一如既往地感谢你的帮助，这个网站上一群了不起的人:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-30T12:54:42.773

这有点晚了，但意识到它从未发布过答案。但是，经过大量研究后，我确实解决了它；

```
RewriteCond %{HTTP_HOST} !^$
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteCond %{HTTPS}s ^on(s)|
RewriteRule ^ http%1://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

我当然希望这对其他人有所帮助。

# json - Window Phone 中的 JSON 服务

> ID：14750484
> 
> 赞同：0
> 
> 时间：2013-02-07T11:52:48.383
> 
> 标签：json, visual-studio-2010, windows-phone-7, json.net

我在 Android 中创建了一个使用 JSON 服务的应用程序。现在我在Window phone 工作。我是新来的，除了.net 编程之外什么都不知道。我还想使用 JSON 服务从 php 文件中检索数据。所以请任何人告诉我。我应该从哪里开始？你能给我提供任何示例或源代码吗？或任何基本的想法。所以我会很快学会它，并且能够在 WINDOW PHONE 中创建 JSON 服务。

另一个：- 我已经安装了 visual stdio 2010。我是否需要安装其他软件、sdk 等？

请窗口专家指导我。

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:11:23.123

查看我的博文[Parsing JSON in a Windows Phone Application](http://nkishorchandra.blogspot.in/2012/10/parsing-json-in-windows-phone.html)。您可以在那里找到所有详细信息。

我使用[json.net](http://james.newtonking.com/projects/json-net.aspx)来解析 json 数据。你可以从这个[Nuget 包](http://nuget.org/packages/newtonsoft.json)中得到它。如果您不知道如何安装和使用 Nuget 包，[请查看此处](http://docs.nuget.org/docs/start-here/installing-nuget)

# java - SimpleJdbcInsert 与 MySQL

> ID：14750485
> 
> 赞同：3
> 
> 时间：2013-02-07T11:52:49.013
> 
> 标签：java, mysql, spring, spring-jdbc

这是我写的相关代码：

```
new SimpleJdbcInsert(dataSource)
    .withSchemaName("test")
    .withTableName("tableName")
    .usingGeneratedKeyColumns("idColumn"); 
```

当我打电话给`executeAndReturnKey(parameters)`我时，我在控制台上读到了这个：

> WARN [org.springframework.jdbc.core.metadata.TableMetaDataProvider:locateTableAndProcessMetaData:336] (main:) 无法找到“tableName”的表元数据——必须提供列名

为什么会这样？我知道我可以手动指定列名，但我相信这不是使用 JdbcSimpleInsert 的重点。

*   MySQL 版本是 5.5.9
*   MySQL 连接器/J 5.1.23
*   春天 3.2.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:14:26.590

在不同的 MySQL 服务器上执行相同的查询时，我遇到了这个错误：`java.sql.SQLException: Parameter metadata not available for the given statement`.
所以我用石头杀死了鸟：）

因此，只需添加`generateSimpleParameterMetadata=true`到**JDBC 连接 URL**，一切都会按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-13T21:41:03.447

由于不同的原因，我得到了相同的错误。在我的 JDBC 连接字符串中，我列出了架构。因此，放置`withSchemaName`子句导致了这个错误。当我删除它时，插入工作。

# c++ - 在不输入整个容器定义的情况下引用迭代器的类型名称的有效方法？

> ID：14750487
> 
> 赞同：2
> 
> 时间：2013-02-07T11:52:55.347
> 
> 标签：c++, boost, containers, boost-iterators

有没有比键入更有效的方法来引用容器迭代器的类型名

```
std::unordered_map<keyclass, valueclass>::iterator 
```

每次我需要迭代器？

当然，还有

```
typedef boost::unordered_map<keyclass, valueclass>::iterator classitr 
```

但是为每个容器引入 typedef 并没有让我觉得它是非常易读的代码。作为 C++ 的新手，并假设一个人通常会引用他们想要使用的容器 - 是否有类似的东西

```
Container<KeyClass, ValueClass> x;

x::iterator_type i 
```

或者我缺少的任何其他明显的捷径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:54:02.407

`auto`这也是 C++11 引入关键字新含义的原因之一：

```
auto it = vec.begin(); 
```

编译器将以`it`类似于模板类型推导的方式从初始化程序中计算出类型。

在 C++11 之前，通常的方法是`typedef`按照您的建议使用 s 。它通常`typedef`对容器最有用，然后提供与之相关的所有内容：

```
typedef std::unordered_map<key, value> map;
map m;
map::iterator = m.begin(); 
```

你可以给你一个更有意义的名字来`typedef`准确描述`map`它的种类。例如，如果您有一个从姓名到电话号码的映射，您可以调用它`phone_map`，而迭代器将是`phone_map::iterator`.

^(`auto`也是完美转发的好工具)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T11:55:36.310

在 C++11 中，您可以使用`decltype`从变量中获取类型。

写：

```
std::unordered_map<keyclass, valueclass> m;
decltype(m)::iterator it = m.begin(); 
```

当然，如果你使用的是 C++1，那么你也可以只写：

```
std::unordered_map<keyclass, valueclass> m;
auto it = m.begin(); 
```

# matlab - 使用 Matlab 使用编码器跟踪旋转对象

> ID：14750488
> 
> 赞同：1
> 
> 时间：2013-02-07T11:52:57.243
> 
> 标签：matlab, rotation, encoder

我正在尝试使用 Matlab 使用编码器跟踪旋转物体。我有一个编码器，它可以给我物体的角位置，然后我将此信息传递给激光器，但是如何以与物体相同的速度移动激光器？因为现在激光比物体慢，而且跟不上！我写了这段代码，有人有什么建议吗？

```
Alpha=pi/2
Positions = [];

t0 = clock;                                

while etime(clock,t0)<20;

  position = data.Position;   %here I read the angular position from the encoder
  Positions = [Positions position];
  A = [floor(Positions/360)];
  angPos = position-(floor(position/360))*360;
  AngPos = [Positions - A*360];
  angRad = angPos*pi/180;
  AngRad = [AngPos*pi/180];

  Angle = angRad+Alpha;
  thetaX = atan(cos(Angle).*(r/d)); 
  thetaY = atan(sin(Angle).*(r/d));

  VoltX=-(5/20)*thetaX*180/pi; 
  VoltY=(5/20)*thetaY*180/pi;    

  VoltageLimit = 10;

  if (max(abs(VoltX))>VoltageLimit) || (max(abs(VoltY))>VoltageLimit)
error('Voltages too large');
  end           

 session.outputSingleScan([VoltX VoltY]);   %here I send the laser the angular position obtained before 

 data = motorA.ReadFromNXT();

end 
```

我知道我应该加上速度，所以我可以以与物体相同的速度移动激光，但我不知道如何给激光那个速度值！

```
sec = etime(clock,t0);
Sec = [Sec sec];

vel=(diff(Positions)/diff(Sec));
Vel = [Vel vel]; %(deg/s); 
```

也许这是一个愚蠢的问题，但我在 Matlab 中很新！谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:39:49.470

您如何跟踪在进入循环之前初始化为空`n = 3`的某个向量中的最后一个先前的角速度。`omega = []`您还应该记住`prev_t = []`前一次迭代的时间戳以及前一个角度`prev_a = []`，以便执行此操作。

`n`在每次迭代中，您可以通过管理先前观察到的速度的向量来更新您对当前角速度的猜测

```
current_t = clock();
if ~isempty(prev_t)
  if length(omega) == n
    omega(1) = [];
  end
  delta_omega = Angle - prev_a;
  if delta_omega < 0
    delta_omega = delta_omega + 2 * pi; 
  end
  omega = [omega, delta_omega / etime(current_t, prev_t)];
end
prev_t = current_t;
prev_a = Angle; 
```

对角速度的估计可能是这些`n`先前测量值的平均值，可能`est_omega = median(omega)`对异常值有些鲁棒。溢出校正`delta_omega`假设报告的角度在零和两个 pi 之间，并且角度随着旋转而增加。如果您的角度表现不同，您应该调整此校正。

然后，在计算`VoltX`和之前`VoltY`，您可以使用对当前角速度的估计来预测修正`Angle = Angle + est_omega * dt;`后的 ，`dt`您对反馈回路延迟的猜测在哪里。你可以凭经验选择。`est_omega`应该被计算，并且`Angle`只能被修正`if length(omega) == n`。您不想计算`median`空列表的。

另外，我看到您分别从 some`atan(sin(Angle))`或计算 x 和 y 电压。`atan(cos(Angle))`我不确定这是否正确。我相信这些电压应该与施加`sin(Angle)`或`cos(Angle)`不`atan`施加成正比。

我想这个解决方案会很好地工作，但是对于你在这里所做的事情，有大量的控制理论可以借鉴，可能会以更复杂的方式解决你的问题。

# c# - c# 颜色转换 CMYK 到 Cielab 或 RGB 到 Cielab 使用 ICC 配置文件

> ID：14750493
> 
> 赞同：0
> 
> 时间：2013-02-07T11:53:07.593
> 
> 标签：c#, colors, rgb, cmyk, color-profile

我想在 C# 中使用 .icc 配置文件“ISOnewspaper26v4.icc”！但我现在有一个问题.. 我不知道如何使用这个 ICC 配置文件将 CMYK 颜色转换为 Lab 值或将 RGB 转换为 Lab 值？？！！我如何分配配置文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-17T14:06:32.597

在实验室空间 ICC 配置文件的帮助下，应该可以“转换”到 CIE 实验室。AGFA曾经有一个。否则，必须编写一个例程，在 ICM 之外通过 A2B0 标签手动进行转换，以获得输出配置文件。请注意，ISOnewspaperv4 配置文件很古怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T09:21:51.473

据我所知，C# 和相关的库不包含任何将 CMYK 或 RGB 转换为 Lab 的函数。用于将 CMYK 转换为 RGB 的包含函数（请参阅此[答案](https://stackoverflow.com/a/4412368/413337)）。

Windows API 似乎具有在不同颜色系统之间进行转换的功能。它至少适用于将 RGB 转换为 CMYK（请参阅此[答案](https://stackoverflow.com/a/5251318/413337)）。

您可能需要以下扩展：

```
 [StructLayout(LayoutKind.Sequential)]
    public struct LabCOLOR
    {
        public ushort L;
        public ushort a;
        public ushort b;
        public ushort pad;
    };

    [DllImport("mscms.dll", SetLastError = true, CallingConvention = CallingConvention.Winapi)]
    static extern bool TranslateColors(
        IntPtr hColorTransform,
        [MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 2), In] RGBColor[] inputColors,
        uint nColors,
        ColorType ctInput,
        [MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 2), Out] LABColor[] outputColors,
        ColorType ctOutput); 
```

然后您应该能够将“cmyk”替换为“lab”以从 RGB 转换为 Lab 颜色。我还没有尝试过。

# magento - 我们可以在 Magento 社区版中集成 Apache solr 搜索吗

> ID：14750495
> 
> 赞同：9
> 
> 时间：2013-02-07T11:53:10.287
> 
> 标签：magento, solr

我想知道我们能否在 magento 社区版 1.7.0.2 中集成 apache solr 搜索 直到现在我尝试使用此链接[在 windows 上安装 solr solr apache 安装。](http://beckelman.net/2011/02/22/setup-apache-solr-on-windows-with-jetty-running-as-a-service-via-nssm)我能够使用本教程安装 solr。但是如何将 solr 搜索与马金托？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-07T12:27:43.323

只有 EE 从头开始​​支持 Solr 集成，但有一些社区第三方模块可用：

*   [http://code.google.com/p/magento-solr/](http://code.google.com/p/magento-solr/)
*   [http://solrgento.de/](http://solrgento.de/)
*   [http://www.magentocommerce.com/magento-connect/solr-bridge-search.html](http://www.magentocommerce.com/magento-connect/solr-bridge-search.html)

或者自己构建一个基于 PHP Solr 库之一的扩展：

*   [https://code.google.com/p/solr-php-client/](https://code.google.com/p/solr-php-client/)
*   [http://www.solarium-project.org/](http://www.solarium-project.org/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-23T16:31:40.927

magentix/Solr，见[https://github.com/magentix/Solr](https://github.com/magentix/Solr)，使用一个非常简单的策略来更新搜索索引。较大的数据集（或需要大量内存）会有限制。它只是将 catalogsearch_fulltext 表的内容写入 Solr 索引，将整个数据保存在内存中。这已在 1.1.0 版中观察到。

solrgento，参见 [http://solrgento.de/](http://solrgento.de/)，通过在 Magento 索引更新过程中的紧密集成，使用更复杂的 solr 索引更新方法。它甚至可以毫无问题地处理非常大的产品和属性集。对该模块的支持非常敏感。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-01T00:11:10.147

我刚刚发布了一个基于 Solarium 的全新免费 Magento 扩展。它的质量比 Magenix Solr 好得多。支持自动更正搜索词。

[Magento Connect 上的扩展](http://www.magentocommerce.com/magento-connect/catalog/product/view/id/22478/)

[GitHub 仓库](https://github.com/jeroenvermeulen/magento-solarium)

# c++ - 将整数作为小端发送到 fstream

> ID：14750496
> 
> 赞同：1
> 
> 时间：2013-02-07T11:53:10.777
> 
> 标签：c++, fstream

我正在编写用于创建和保存 WAV 文件的函数，但我不知道如何将数字发送到流：

```
ofstream file;
file.open("sound.wav");
file << "RIFF";
file << (int) 32;
file << "WAVE"; 
```

我正在尝试实现这个 WAVE 文件结构：[https ://ccrma.stanford.edu/courses/422/projects/WaveFormat/](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)

问题在这里输出是这样的：

```
RIFF32WAVE 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:59:09.353

流操作符`<<`进行*格式化*输出 - 它将值转换为文本。这不是您想要写入二进制文件格式的内容。

相反，您想使用*未格式化*的输出函数：`put`对于单字节和`write`多字节：

```
file.write("RIFF", 4);

// The length field is little-endian, so write the lowest byte first
file.put(length);
file.put(length >> 8);
file.put(length >> 16);
file.put(length >> 24);

file.write("WAVE", 4); 
```

更新：如评论中所述，您还应该以二进制模式打开文件并使用经典的“C”语言环境对其进行灌输，以防止任何东西弄乱您编写的字节：

```
file.open("sound.wav", std::ios_base::out | std::ios_base::binary);
file.imbue(std::locale::classic()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T11:55:18.050

您应该以二进制输出模式打开文件，然后打印到其中。

请参阅[此问题](https://stackoverflow.com/questions/8277485/writing-binary-to-stdfstream-using-the-operator)以了解如何执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T11:59:28.833

流运算符用于格式化 I/O（文本），而不是二进制。请看一下 write 方法。至于小端与大端的问题，您可以简单地使用操作系统提供的 htonl() 函数。

# delphi - 为什么 CreateFileMapping 返回“文件已存在”？

> ID：14750511
> 
> 赞同：8
> 
> 时间：2013-02-07T11:53:58.060
> 
> 标签：delphi, winapi, shared-memory

我有一个应用程序，它定义了一个共享内存区域`CreateFileMapping`，我正在尝试从另一个应用程序读取该内存。

我试过这个：

```
handle := CreateFileMapping($FFFFFFFF, nil, PAGE_READWRITE,
             0,$3200, pchar('FileMappingZone')); 
```

但我得到：

> 当该文件已存在时无法创建该文件

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-07T12:15:50.537

并非所有将`GetLastError()`价值设置为不成功的东西都是错误的。首先通过函数的返回值区分*错误*`GetLastError()`很重要，并检查以获取有关发生*的错误类型的*更多信息。

对于已经存在的映射，`CreateFileMapping`记录为返回有效句柄*并将*`GetLastError()`值设置为`ERROR_ALREADY_EXISTS`. 在这种情况下，错误值是*信息*性的：如果您对打开它之前是否存在映射感兴趣，检查它是有效的，但这不是错误。您可以通过测试返回值是否为 NULL 来检测*失败。*否则，您只需继续使用手柄。

PS如果您想在打开之前确保该部分存在，您可以[`OpenFileMapping`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366791(v=vs.85).aspx)对不存在的部分使用 which will fail 而不是创建一个新的部分。

# dynamics-crm-2011 - crm 2011- 资源存在时未找到 Web 资源异常

> ID：14750512
> 
> 赞同：3
> 
> 时间：2013-02-07T11:53:58.920
> 
> 标签：dynamics-crm-2011

在我们的解决方案中，我们有多个表单（帐户表单和一些自定义实体的表单）的自定义 .js 文件。

它们在我们的开发环境中运行良好。

将开发定制导入到我们的 QA 环境时，我们会收到帐户上的错误消息，以及一些（但不是全部）自定义实体的表单；

在 crm 服务器上查看跟踪日志时，我们看到以下异常：

> > MSCRM 错误报告：---------------------------------------------- -------------------------------------------------- -------- 错误：找不到名为 account.js 的 Web 资源。错误号：0x80040217 错误消息：找不到名为 account.js 的 Web 资源。错误详细信息：找不到名为 account.js 的 Web 资源。源文件：不可用 行号：不可用 请求 URL：https://server:444/Handlers/WebResource.ashx?name=account.js&ver=935169123 堆栈跟踪信息：[CrmException：找不到具有名称帐户的 Web 资源.js.] 在 Microsoft.Crm.Application.Components.Handlers.WebResource 的 Microsoft.Crm.Application.Components.Handlers.WebResource.RetrieveWebResource(String webResourceName, String preview)。

但是，自定义脚本本身已加载并正常工作。

移除/删除自定义脚本或重新导入自定义项并未解决此问题。

有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:35:06.220

看起来您正试图通过不存在的名称“account.js”调用网络资源。如果您尝试从 enableRule 中的某个 customRule 或类似内容的自定义文件中调用它，那么您需要通过其名称而不是其显示名称来调用它，例如，如果名称是“new_/scripts/account. js 那么你的调用应该是：

```
$webresource:new_/scripts/account.js 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T16:36:45.007

好的，好吧，我会将此作为评论发布......但我只是开始在网站上做出回应并且缺乏“声誉”。

我想问的是，您是在标准表单还是网络资源上使用此表单？

在您的解决方案中，您是否在调用页面上调用 JS 和解决方案中的其他内容？例如 new_\js\account.js 与 new_account.js ？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T12:26:20.740

您可以从堆栈跟踪浏览到 URL 吗？例如，我在 Activity Feeds 上遇到过类似的行为，当时的问题是我有一个组织提供瑞典语作为基本语言，但没有为该组织提供英语。您的开发环境设置是否与使用语言的生产环境相同？

问候

里卡德

# javascript - jquery 淡入和淡出在本地主机上工作正常，但在 Web 服务器上却不行

> ID：14750516
> 
> 赞同：1
> 
> 时间：2013-02-07T11:54:16.010
> 
> 标签：javascript, jquery, jquery-ui, fadein

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script> 
```

jquery 在标题部分。下面的脚本就在正文部分的末尾。

fadeIn 和 fadeOut 函数用于带有按钮的缩略图，以触发事件是缩略图 div 的一部分。这就是 fade 和 fade2 ids 的原因。

```
$('#fade').click(function() {
                  $('#t1').css('visibility','hidden').hide().fadeOut('slow', function(){
                  $('#t11').css('visibility','visible').hide().fadeIn();
                  });

                });
          $('#fade2').click(function() {
                  $('#t11').css('visibility','hidden').hide().fadeOut('slow', function() {
                  $('#t1').css('visibility','visible').hide().fadeIn();
                  });

                }); 
```

问题：这在 localhost 上完美运行，但是当我在 Dreamhost 上上传文件时，这个特定功能不起作用。我还有其他可以正常工作的 jQuery 函数。我使用 firebug 进行调试，没有看到加载错误或任何其他错误。

我在这里想念什么？

谢谢

D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-29T12:20:28.073

尝试这样的事情。

```
$('#fade').click(function() {
    $('#t1').fadeOut('slow', function(){ //First do the animation of FadeOut
        $('#t11').fadeIn(); // when done, fadeIn the other element
    });

});
$('#fade2').click(function() { //Backwards
    $('#t11').fadeOut('slow', function() {
        $('#t1').fadeIn();
    });

}); 
```

# jquery - AngularJS 即时搜索非常滞后

> ID：14750517
> 
> 赞同：0
> 
> 时间：2013-02-07T11:54:17.057
> 
> 标签：jquery, ajax, search, get, angularjs

我目前正在开发一个带有 Web 前端的数据库。在这个项目的以前版本中使用了 jQuery，我现在已经开始使用 AngularJS 来实现“即时搜索”功能，如下所示：

```
function SearchCtrl($scope, $http) {
    $scope.search = function() {  
    $scope.result = null;

    $http({method: 'GET', url: 'api/items/search/' + $scope.keywords }).
        success(function(data, status, headers, config) {
            $scope.result = data;
        }).
        error(function(data, status, headers, config) {
            $scope.status = status;
        });     
    };
}

...
<div id="searchControl" ng-controller="SearchCtrl">
    <form method="get" action="" class="searchForm">
        <input type="text" id="search" name="search" ng-model="keywords" ng-change="search()"/>
        <input type="submit" value="Search" />
    </form>
    <div ng-model="result">
        <a href="javascript:void(0)" ng-repeat="items in result.items" >
            <div class="card">
                <span ng-show="items.id"><b>Item ID: </b>{{items.id}}<br></span>
                <span ng-show="items.part_id"><b>Part ID: </b>{{items.part_id}}<br></span>
                <span ng-show="items.description"><b>Description: </b>{{items.description}}<br></span>
                <span ng-show="items.manufacturer"><b>Manufacturer: </b>{{items.manufacturer}}<br></span>
                <span ng-show="items.product_range"><b>Range: </b>{{items.product_range}}<br></span>
                <span ng-show="items.borrower"><b>Borrower: </b>{{items.borrower}}<br></span>
                <span ng-show="items.end_date"><b>End Date: </b>{{items.end_date}}<br></span>
            </div>
        </a>
    </div>
</div>
... 
```

这很好用，但有一个问题：因为我在“ng-change”上调用搜索功能，所以在输入搜索词时非常滞后，有时会导致浏览器崩溃。在旧版本（使用 jQuery）上，我使用标志来测试是否有一个 get 请求已经在运行，如果有然后我在开始新的请求之前中止了它。我已经查看了 AngularJS 文档以中止获取请求，但仍然不明智。如果有人对如何实现此或其他修复有任何建议，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:06:42.103

好吧，一旦发送了 get 请求，它就被发送了。AFAIK，目前还*没有*一种方法可以中止处理 Angular 原生的 http 请求的结果。这是当前标记为“OPEN”的功能请求：[https ://github.com/angular/angular.js/issues/1159](https://github.com/angular/angular.js/issues/1159)

也就是说，您可以像这样自己中止响应的处理：

```
var currentKey= 0;

$scope.test = function (){
   $http({ method: 'GET', url: 'test.json', key: ++currentKey })
      .success(function(data, status, headers, config) {
         if(config.key == currentKey) {
           //You're now inside your most recent call.
           $scope.foo = data;
         }
      });
}; 
```

另一方面，我建议在你的 on change 事件上实现某种超时，以防止它过于“健谈”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T13:18:00.390

angularjs 的去抖动/节流模型更新将对您的情况有所帮助：http: [//jsfiddle.net/lgersman/vPsGb/3/](http://jsfiddle.net/lgersman/vPsGb/3/)

示例中的指令将限制更改事件，以便执行较少的 ajax 请求。

没有什么比在 jsfiddle 代码中使用指令更重要的了，如下所示：

```
<input 
    type="text" 
    id="search" 
    name="search" 
    ng-model="keywords" 
    ng-change="search()"
    ng-ampere-debounce
/> 
```

它基本上是一小段代码，由一个名为“ng-ampere-debounce”的单个角度指令组成，该指令利用[http://benalman.com/projects/jquery-throttle-debounce-plugin/](http://benalman.com/projects/jquery-throttle-debounce-plugin/)可以附加到任何 dom 元素。该指令重新排序附加的事件处理程序，以便它可以控制何时限制事件。

您可以将它用于节流/去抖动 * 模型角度更新 * 角度事件处理程序 ng-[event] * jquery 事件处理程序

看看：http: [//jsfiddle.net/lgersman/vPsGb/3/](http://jsfiddle.net/lgersman/vPsGb/3/)

该指令将成为 Orangevolt Ampere 框架 ( [https://github.com/lgersman/jquery.orangevolt-ampere](https://github.com/lgersman/jquery.orangevolt-ampere) ) 的一部分。

# php - 如何从批处理文件运行php脚本

> ID：14750523
> 
> 赞同：-1
> 
> 时间：2013-02-07T11:54:44.970
> 
> 标签：php, mysql, batch-file, windows-services

我使用了这篇名为 upload_.php 的文章[php 脚本，并且我已经成功地在 C# 中开发了一个运行良好的 Windows 服务。](http://www.akchauhan.com/create-windows-service-to-schedule-php-script-execution/comment-page-1/#comment-972982)现在理论上该服务将每小时运行一次并执行一个批处理文件（task.bat）。如果我直接运行upload_php 文件，它现在工作正常我认为问题出在task.bat 文件中。这是我的代码

**Task.bat 代码**

```
@echo off
cd\
set path=C:\xampp\php;
cd "C:\xampp\htdocs"
php import.php
exit 
```

当服务运行它执行 task.bat 文件但 php 脚本不执行。我的代码有什么问题？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T12:06:48.490

这对我有用，虽然我不是 php 开发人员，但我的同事帮助了我

```
@echo OFF
"D:\xampp\php\php.exe" D:\xampp\htdocs\upload_.php %* 
```

# java - 创建 JComboBox 并稍后分配数据

> ID：14750525
> 
> 赞同：0
> 
> 时间：2013-02-07T11:54:49.433
> 
> 标签：java, swing, awt

您好我正在尝试使用 Java Swing 创建一个 JComboBox。

在创建 JCombobox 时，该框的内容尚未确定。因此我不能使用构造函数：

```
String[] selectionArray = {........};
JComboBox myComboBox = new JComboBox(selectionArray); 
```

我想在创建 JComboBox 之后分配数据（字符串数组）。

我环顾 API 并没有找到相应的方法来执行此操作。

有人可以指出我正确的方向吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:56:46.050

寻找[DefaultComboBoxModel](http://docs.oracle.com/javase/6/docs/api/javax/swing/DefaultComboBoxModel.html)和[JComboBox.setModel()](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComboBox.html#setModel%28javax.swing.ComboBoxModel%29)方法。

# c# - 根据数组过滤DataTable

> ID：14750527
> 
> 赞同：1
> 
> 时间：2013-02-07T11:54:56.187
> 
> 标签：c#, linq

我有一个**DataTable** `dtEmployee`，其中一列是`EmployeeId`.

我有一个整数数组。我必须找到 array 的所有值，这些值不在**DataTable**`EmployeeId`的列中。 **`dtEmployee`**

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T11:58:59.673

您可以使用[Enumerable.Except](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.except.aspx)

```
List<int> empIds = new List<int>(); //your employee Ids List

List<int> resultList = empIds.Except(dtEmployee .AsEnumerable()
                                       .Select(r => r.Field<int>("EmployeeID"))
                                       .ToList()).ToList(); 
```**

# javascript - Unable to download image every 5 seconds

> ID：14750530
> 
> 赞同：0
> 
> 时间：2013-02-07T11:55:04.283
> 
> 标签：javascript, image, download, setinterval

I'm using the below script to check for internet connection by downloading the image test.png. The issue I'm having is that it will only download the image once. This means, if there was internet connection when the page was first loaded it will display "Online" - however, if I disconnect the network cable, it won't say "Offline", as it should.

Basically, once downloaded, the `readyState` will always be '`complete`' - However, I would like to perform the test again and again.

```
<script type="text/javascript">
setInterval('checkimage()', 1000);

function checkimage() {
    var imgTmp = new Image();
    imgTmp.src = 'test.png';
    if (imgTmp.readyState == 'complete') {
        document.getElementById('div1').innerHTML = "<font size=15 face=ariel color=green>Online</font>";
    } else {
        document.getElementById('div1').innerHTML = "<font size=15 face=ariel color=red>Offline</font>";
    }
}
</script> 
```

Any help would be greatly appreciated!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:56:26.730

I'm doubtful about the whole solution but if you want to force a download, that is avoid the cache, you may replace

```
imgTmp.src = 'test.png'; 
```

with

```
imgTmp.src = 'test.png?t='+(new Date().getTime()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:12:31.620

The problem with your solution is, that you're checking the readyState immediately after setting the source. Use the `load` and `error` events instead.

```
function checkimage() {
    var imgTmp = new Image();
    imgTmp.onload = function() {
        printState("Online");
    };
    imgTmp.onerror = function() {
        printState("Offline");
    };
    imgTmp.src = "test.png?_=" + (+new Date());
}

function printState(state) {
    document.getElementById("div1").innerHTML = "<span style=\"font-size:15;font-face:'Arial'; color:green\">" + state + "</span>";
    setTimeout(checkimage, 5000);
} 
```

And don't use strings as first parameter for `setTimeout` and `setInterval`

# c# - 使用多个块的列表

> ID：14750540
> 
> 赞同：3
> 
> 时间：2013-02-07T11:55:30.613
> 
> 标签：c#, .net

List 是数组的包装器。当您将项目添加到列表中时，它会创建越来越大的隐藏数组（并且先前的数组被垃圾收集）。但是，如果您在某些时候处理大型列表，即使由于内存碎片而存在可用内存，您也会得到 OutOfMemoryException。我正在寻找一个 ICollection 实现，它可以与一组隐藏的数组一起使用，类似于[MemoryTributary](http://www.codeproject.com/Articles/348590/A-replacement-for-MemoryStream)所做的。

**更新。**

我在这里找到了 BigArray 的实现：

[http://blogs.msdn.com/b/joshwil/archive/2005/08/10/450202.aspx](http://blogs.msdn.com/b/joshwil/archive/2005/08/10/450202.aspx)。

虽然它试图解决其他问题（创建一个 >2GB 大小的数组），但它也解决了我的问题。但是这个实现并不完整，甚至无法编译。所以如果我没有找到更好的，我会改进这个并使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:29:37.783

如果您对最大大小有一个粗略的估计，则可以使用容量初始化列表。据我所知，这将避免发生大量垃圾收集（使用旧的较小数组），这也可能避免内存碎片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:16:00.180

我还没有找到任何好的实现。所以我写了我自己的 ChunkyList。通常 ChunkyList 是数组包装器列表。最初块的大小为 1，但每次需要扩展当前块时，它乘以 2（当它达到 MaxBlockSize 时，会创建下一个块）（行为类似于 List）。

这是一个通用的 ChunkyList：

```
public class ChunkyList<T> : IList<T>
{
    public ChunkyList()
    {
        MaxBlockSize = 65536;
    }

    public ChunkyList(int maxBlockSize)
    {
        MaxBlockSize = maxBlockSize;
    }

    private List<T[]> _blocks = new List<T[]>();

    public int Count { get; private set; }

    public int MaxBlockSize { get; private set; }

    public bool IsReadOnly
    {
        get { throw new NotImplementedException(); }
    }

    public IEnumerator<T> GetEnumerator()
    {
        var index = 0;
        foreach (var items in _blocks)
            foreach (var item in items)
            {
                yield return item;
                if (Count <= ++index)
                    break;
            }
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }

    public void Add(T item)
    {
        var indexInsideBlock = GetIndexInsideBlock(Count);
        if (indexInsideBlock == 0)
            _blocks.Add(new T[1]);
        else
        {
            var lastBlockIndex = _blocks.Count - 1;
            var lastBlock = _blocks[lastBlockIndex];
            if(indexInsideBlock >= lastBlock.Length)
            {
                var newBlockSize = lastBlock.Length*2;
                if (newBlockSize >= MaxBlockSize)
                    newBlockSize = MaxBlockSize;

                _blocks[lastBlockIndex] = new T[newBlockSize];
                Array.Copy(lastBlock, _blocks[lastBlockIndex], lastBlock.Length);
            }
        }

        _blocks[GetBlockIndex(Count)][indexInsideBlock] = item;

        Count++;
    }

    public void AddRange(IEnumerable<T> items)
    {
        foreach (var item in items)
            Add(item);
    }

    public void Clear()
    {
        throw new NotImplementedException();
    }

    public bool Contains(T item)
    {
        throw new NotImplementedException();
    }

    public void CopyTo(T[] array, int arrayIndex)
    {
        throw new NotImplementedException();
    }

    public bool Remove(T item)
    {
        throw new NotImplementedException();
    }

    public int IndexOf(T item)
    {
        throw new NotImplementedException();
    }

    public void Insert(int index, T item)
    {
        throw new NotImplementedException();
    }

    public void RemoveAt(int index)
    {
        throw new NotImplementedException();
    }

    public T this[int index]
    {
        get
        {
            if (index >= Count)
                throw new ArgumentOutOfRangeException("index");

            var blockIndex = GetBlockIndex(index);
            var block = _blocks[blockIndex];

            return block[GetIndexInsideBlock(index)];
        }
        set { throw new NotImplementedException(); }
    }

    private int GetBlockIndex(int index)
    {
        return index / MaxBlockSize;
    }

    private long GetIndexInsideBlock(int index)
    {
        return index % MaxBlockSize;
    }
} 
```

以下是证明此实现有效的测试：

```
 [TestClass]
    public class ChunkyListTests
    {
        [TestMethod]
         public void GetEnumerator_NoItems()
         {
             var chunkyList = new ChunkyList<float>();

             var wasInsideForeach = false;
             foreach (var item in chunkyList)
                 wasInsideForeach = true;

             Assert.IsFalse(wasInsideForeach);
         }

        [TestMethod]
        public void GetEnumerator_MaxBlockSizeOfThreeWithThreeItems()
        {
            var chunkyList = new ChunkyList<float> (3) { 1, 2, 3 };

            var wasInsideForeach = false;
            var iteratedItems = new List<float>();
            foreach (var item in chunkyList)
            {
                wasInsideForeach = true;
                iteratedItems.Add(item);
            }

            Assert.IsTrue(wasInsideForeach);
            CollectionAssert.AreEqual(new List<float> { 1, 2, 3 }, iteratedItems);
        }

        [TestMethod]
        public void GetEnumerator_MaxBlockSizeOfTwoWithThreeItems()
        {
            var chunkyList = new ChunkyList<float>(2) {1,2,3};
            var wasInsideForeach = false;
            var iteratedItems = new List<float>();

            foreach (var item in chunkyList)
            {
                wasInsideForeach = true;
                iteratedItems.Add(item);
            }

            Assert.IsTrue(wasInsideForeach);
            CollectionAssert.AreEqual(new List<float>() { 1, 2, 3 }, iteratedItems);
            Assert.AreEqual(chunkyList.MaxBlockSize, 2);
        }
    } 
```

PS 我只实现了我的代码中使用的那些 IList 方法。因此，欢迎您改进此实现。

# jquery - 如果 hasClass 然后点击 removeClass

> ID：14750544
> 
> 赞同：2
> 
> 时间：2013-02-07T11:55:46.357
> 
> 标签：jquery, onclick

我有一个图片库。当我点击它时，图像很突出，因为身体背景从白色变为黑色。

当我再次单击图像时，它会恢复正常。

这就是我现在所拥有的：

```
$('img').click(function () {
  $('body').toggleClass("darken");
}); 
```

我希望我的用户能够单击页面上的任意位置并删除“变暗”类。

我尝试了 hasClass 语句，但没有成功。

```
if ($('body').hasClass('darken')) {
        $('body').click(function () {
        $(this).toggleClass("darken");
    });
    } 
```

非常感谢，克莱门特。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:00:05.140

您可以将单击事件处理程序绑定到`<body>`. 但是，一定要停止点击事件的传播`img`。

```
var $body = $("body"), $img = $("img");

$img.click(function(evt) {
  $body.toggleClass("darken");
  evt.stopPropagation();
});

$(document).click(function(){
  $body.removeClass("darken");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-28T14:31:28.417

这是我使用的解决方案：

```
$(document).on('click', function(e) {
    var $body = $( 'body' ); 
    if(e.target.id && e.target.id === 'menu-btn') $body.toggleClass( 'navigation-opened' );
    else if(e.target.tagName.toLowerCase() !== 'nav') $body.removeClass( 'navigation-opened' );
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-07T11:59:35.490

这可能更简写，但会做同样的事情：

```
$('body.darker').live('click', function() { $(this).removeClass('darker'); } ) 
```

# typo3 - 如何渲染所有子菜单？

> ID：14750546
> 
> 赞同：1
> 
> 时间：2013-02-07T11:55:54.223
> 
> 标签：typo3, typoscript

我有一个包含 5 个项目的主菜单，其中 3 个有一个或多个子菜单页面。

我能够将子菜单呈现到一级菜单的 li-tags 中。

如果有帮助，我正在使用 EXT:fed：

```
<fed:page.menu pageUid="2" levels="2" expandAll="1" substElementUid="1" /> 
```

这将呈现以下标记：

```
<ul>
    <li id="elem_10">
        <a href="10">10</a>
    </li>
    <li class="active sub" id="elem_21">
        <a class="active sub" href="21">21</a>
        <ul class="lvl-1">
            <li class="current" id="elem_11">
                <a class="current" href="11">11</a>
            </li>
            <li id="elem_12">
                <a href="12">12</a>
            </li>
            <li id="elem_13">
                <a href="13">13</a>
            </li>
            <li id="elem_14">
                <a href="14">14</a>
            </li>
        </ul>
    </li>
    <li id="elem_15">
        <a href="15">15</a>
    </li>
    <li class="sub" id="elem_22">
        <a class="sub" href="22">22</a>
        <ul class="lvl-1">
            <li id="elem_16">
                <a href="16">16</a>
            </li>
            <li id="elem_17">
                <a href="17">17</a>
            </li>
            <li id="elem_18">
                <a href="18">18</a>
            </li>
        </ul>
    </li>
    <li class="sub" id="elem_19">
        <a class="sub" href="19">19</a>
        <ul class="lvl-1">
            <li id="elem_20">
                <a href="20">20</a>
            </li>
        </ul>
    </li>
</ul> 
```

但我无法按照自己的意愿设计这个样式，尤其是因为它必须具有响应性。

我想要的是这样的：

```
<div class="submenu">
    <ul id="parent-21">
        <li id=current" id="elem_11">
            <a id=current" href="11">11</a>
        </li>
        <li id="elem_12">
            <a href="12">12</a>
        </li>
        <li id="elem_13">
            <a href="13">13</a>
        </li>
        <li id="elem_14">
            <a href="14">14</a>
        </li>
    </ul>
    <ul id="parent-22">
        <li id="elem_16">
            <a href="16">16</a>
        </li>
        <li id="elem_17">
            <a href="17">17</a>
        </li>
        <li id="elem_18">
            <a href="18">18</a>
        </li>
    </ul>
    <ul id="parent-19">
        <li id="elem_20">
            <a href="20">20</a>
        </li>
    </ul>
</div> 
```

我还需要在父级（菜单）和子级（菜单）之间建立联系……但这不是最重要的任务，不过我可以使用 jQuery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T08:41:03.253

完成后，它看起来很容易。魔术是在第一级执行“doNotShowLink = 1”，但在有子菜单时使用所需的 elementUid 打开一个包装元素 - 并在第二级关闭它。

```
10 = HMENU
10 {
    special = directory
    special.value = 2

    1 = TMENU
    1 {
        expAll = 1
        NO {
            doNotShowLink = 1
        }

        CUR < NO
        ACT < NO
        ACTIFSUB < NO
        CURIFSUB < NO

        IFSUB = 1
        IFSUB {
            doNotShowLink = 1
            subst_elementUid = 1
            allWrap = <div class="menu" id="parent-{elementUid}"><ul>|
        }
    }

    2 = TMENU
    2 {
        noBlur = 1

        NO = 1
        NO {
            wrapItemAndSub = <li>|</li>
            ATagTitle.field = subtitle // title
        } 

        CUR < .NO
        CUR.wrapItemAndSub = <li class="active">|</li>

        ACT < .CUR

        ACTIFSUB < .NO
        ACTIFSUB.wrapItemAndSub = <li class="open">|</li>

        CURIFSUB < .ACTIFSUB

        SPC < .NO

        wrap = |</ul></div>
    }
    3 >
    wrap = <div id="submenu">|</div>
} 
```

# c# - 通用 WCF 包装器

> ID：14750548
> 
> 赞同：0
> 
> 时间：2013-02-07T11:55:59.220
> 
> 标签：c#, .net, wcf, entity-framework

我正在使用实体框架，我想通过 wcf 服务公开一些方法；

我有这个功能（在cs页面上）

```
 using (ICRMEntities oContext = RemClient.Create<ICRMEntities>())                
     oContext.FindByKey<DataLib.Models.CRM.ActivitySLA>("ActivitySLA", SLAID); 
```

这个函数的内容是

```
 public static T FindByKey<T>(this IQueryable<T> oQuery, int keyValue) where T : EntityObject, ISimpleBaseClassMD
        {
            return oQuery.FindByKey<T>(keyValue, null);
        } 
```

WCF服务中定义的接口为：

```
public interface ICRMEntities : IDisposable, IContextWithUser
    T FindByKey<T>(string sObjectTypeCode, int keyValue, bool bRequestValue) where T : EntityObject, ISimpleBaseClassMD; 
```

WCF 中的这个泛型方法存在问题；我如何包装这个方法来保存这个功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T12:01:04.737

你不能。

您不能通过 WCF 服务公开泛型方法。您需要定义将使用的类型。这是 SOAP 的限制。

但是，您可以创建一个基类作为返回类型并向服务添加`KnownType`属性以定义该服务可以返回哪些派生类。

类似的东西；

```
[KnownType(typeof(SomeClass))]
public interface ICRMEntities : IDisposable, IContextWithUser
    EntityObject FindByKey(string sObjectTypeCode, int keyValue, bool bRequestValue) 
```

# oracle - PL/SQL Developer 找不到带有俄语字母的记录

> ID：14750550
> 
> 赞同：5
> 
> 时间：2013-02-07T11:56:04.577
> 
> 标签：oracle, encoding

在本地机器上我做这个查询：

```
 select * from allObjects where status = 'Изменено' 
```

我得到空的结果。在服务器中，我执行相同的查询并获取所有记录。数据库和模式是相同的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T12:48:39.530

我猜这是因为客户端会话 NLS_LANG 与服务器语言不同。检查您的会话 NLS_LANG：

```
SELECT * FROM NLS_SESSION_PARAMETERS; 
```

尝试在连接之前从命令行在客户端计算机上设置环境变量：

```
set nls_lang=AMERICAN_CIS.CL8MSWIN1251 
```

以下是一些阅读链接：

*   [RUS：甲骨文 - 德尔福 - NLS_LANG](http://www.sql.ru/forum/actualthread.aspx?tid=218373)
*   [RUS: Параметры NLS уровня сеанса](http://all-oracle.ru/content/view/?part=2&id=112)
*   [确定Oracle会话客户端字符集？](https://dba.stackexchange.com/questions/7765/determine-oracle-session-client-character-set)
*   [Oracle：NLS_LANG 常见问题解答](http://www.oracle.com/technetwork/products/globalization/nls-lang-099431.html#_Toc110410545)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-05T10:05:41.193

如果在文字常量系统将使用 Unicode 之前添加“N”：

select * from allObjects where status = N'Изменено'

# json - 无法使用故障消息处理 WSO2 ESB 中的故障

> ID：14750553
> 
> 赞同：0
> 
> 时间：2013-02-07T11:56:15.217
> 
> 标签：json, proxy, wso2, wso2esb, wso2carbon

下面的配置我已经完成了。创建了发送 JSON 输入和预期 JSON O/P 的代理，但没有在错误序列中返回 JSON。

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="Get_Asset_Mobile" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence onError="fault">
         <property name="CONTENT_TYPE" value="application/json" scope="axis2" type="STRING"/>
         <payloadFactory>
            <format>
               <Select_Mobile_Asset_Op xmlns=""/>
            </format>
         </payloadFactory>
         <send receive="Asset_Mobile_seq">
            <endpoint>
               <address uri="http://localhost:9764/services/masset_DataService/" format="soap11"/>
            </endpoint>
         </send>
         <property xmlns:ns="http://org.apache.synapse/xsd" name="message" expression="get-property('ERROR_MESSAGE')"/>
         <property xmlns:ns="http://org.apache.synapse/xsd" name="code" expression="get-property('ERROR_CODE')"/>
         <log level="full"/>
      </inSequence>
      <outSequence onError="fault">
         <property name="CONTENT_TYPE" value="application/json" scope="axis2" type="STRING"/>
         <log level="full"/>
         <drop/>
      </outSequence>
   </target>
   <description></description>
</proxy> 
```

上面一个是代理，下面是 FAULT 序列。

```
<sequence xmlns="http://ws.apache.org/ns/synapse" name="fault">
   <property name="CONTENT_TYPE" value="application/json" scope="axis2" type="STRING"/>
   <property xmlns:ns="http://org.apache.synapse/xsd" name="message" expression="get-property('ERROR_MESSAGE')"/>
   <property xmlns:ns="http://org.apache.synapse/xsd" name="code" expression="get-property('ERROR_CODE')"/>
   <payloadFactory>
      <format>
         <Body xmlns="">
            <Exception>$1</Exception>
            <Status>$2</Status>
            <Total>0</Total>
         </Body>
      </format>
      <args>
         <arg xmlns:ns="http://org.apache.synapse/xsd" expression="get-property('message')"/>
         <arg xmlns:ns="http://org.apache.synapse/xsd" expression="get-property('code')"/>
      </args>
   </payloadFactory>
   <send/>
   <log level="full"/>
</sequence> 
```

但它没有从客户端反映在 WSO2 ESB 终端消息中显示正确的消息，如下所示：

```
[2013-02-07 17:13:49,603] ERROR - ClientUtils The system cannot infer the transport information from the /services/Get_Asset_Mobile URL.
[2013-02-07 17:13:49,604] ERROR - Axis2Sender Unexpected error during sending message out
org.apache.axis2.AxisFault: The system cannot infer the transport information from the /services/Get_Asset_Mobile URL.
    at org.apache.axis2.description.ClientUtils.inferOutTransport(ClientUtils.java:81)
    at org.apache.synapse.core.axis2.DynamicAxisOperation$DynamicOperationClient.executeImpl(DynamicAxisOperation.java:123)
    at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
    at org.apache.synapse.core.axis2.Axis2FlexibleMEPClient.send(Axis2FlexibleMEPClient.java:445)
    at org.apache.synapse.core.axis2.Axis2Sender.sendOn(Axis2Sender.java:57)
    at org.apache.synapse.core.axis2.Axis2SynapseEnvironment.send(Axis2SynapseEnvironment.java:286)
    at org.apache.synapse.mediators.builtin.SendMediator.mediate(SendMediator.java:92)
    at org.apache.synapse.mediators.AbstractListMediator.mediate(AbstractListMediator.java:60)
    at org.apache.synapse.mediators.base.SequenceMediator.mediate(SequenceMediator.java:114)
    at org.apache.synapse.mediators.MediatorFaultHandler.onFault(MediatorFaultHandler.java:81)
    at org.apache.synapse.FaultHandler.handleFault(FaultHandler.java:54)
    at org.apache.synapse.endpoints.AbstractEndpoint.invokeNextFaultHandler(AbstractEndpoint.java:564)
    at org.apache.synapse.endpoints.AbstractEndpoint.onFault(AbstractEndpoint.java:413)
    at org.apache.synapse.endpoints.AddressEndpoint.onFault(AddressEndpoint.java:43)
    at org.apache.synapse.FaultHandler.handleFault(FaultHandler.java:102)
    at org.apache.synapse.core.axis2.SynapseCallbackReceiver.handleMessage(SynapseCallbackReceiver.java:237)
    at org.apache.synapse.core.axis2.SynapseCallbackReceiver.receive(SynapseCallbackReceiver.java:160)
    at org.apache.synapse.transport.nhttp.ClientHandler$1.run(ClientHandler.java:494)
    at org.apache.axis2.transport.base.threads.NativeWorkerPool$1.run(NativeWorkerPool.java:172)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679)
[2013-02-07 17:13:49,604]  INFO - LogMediator To: /services/Get_Asset_Mobile, MessageID: urn:uuid:793b3646-8342-4d75-a9b3-d41dc0ab5a2d, Direction: request, Envelope: <?xml version='1.0' encoding='utf-8'?><soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope"><soapenv:Body><Body><Exception>Connection refused or failed for : localhost/127.0.0.1:9764, IO Exception occured : Connection refused</Exception><Status>101503</Status><Total>0</Total></Body></soapenv:Body></soapenv:Envelope> 
```

两者都工作正常，但它没有反映客户端。我关闭端点（wso2 DSS）并跟踪错误..请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:17:11.067

我认为你应该拥有的是：

<property name="messageType" value="application/json" scope="axis2"/>

而不是有 CONTENT_TYPE。似乎没有定义这个属性。如果您的客户端是 REST/JSON 客户端，那么在 inSequence 中包含它就足够了。

# c++ - 网络协议设计的异步单线程与同步多线程？

> ID：14750559
> 
> 赞同：2
> 
> 时间：2013-02-07T11:56:48.163
> 
> 标签：c++, multithreading, boost, asynchronous, network-programming

我们的团队正在实施一种安全的多层对等协议，该协议使用 Boost/C++ 在多个中间“跃点”上建立节点之间的连接。

我们目前陷入了关于如何实现协议设计的辩论，即作为异步单线程或同步多线程架构。

我不想通过列举利弊来偏向这个问题，但我对 StackOverFlow 社区在这些问题上的经验以及他们喜欢哪种方法非常感兴趣？

我意识到这是一个悬而未决的问题，因此理想情况下，答案不是基于轶事证据，而是来自一些经验或分析基础。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T12:07:47.527

我会推荐异步有两个原因：

*   您不需要处理线程交互，这始终是错误的雷区；
*   您可以使用[Boost.Asio](http://www.boost.org/doc/libs/release/doc/html/boost_asio.html)库来处理所有低级调度、连接管理等。如果您出于性能原因需要使用多个线程，这也很容易。

**如果**连接是独立的，则同步可能更直接，因此没有线程必须共享可变状态。如果你不能做出这样的保证，并且确保它将来不会改变，那么我会选择异步。

# canvas - 我们可以在没有标签的 paper.js 中为光栅构造函数提供路径吗

> ID：14750563
> 
> 赞同：0
> 
> 时间：2013-02-07T11:57:00.987
> 
> 标签：canvas, paperjs

是否可以在 paper.js 中为光栅构造函数提供图像路径（url 或本地）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:31:34.397

如下文原作者所述，从 URL 创建 Raster 是可行的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:56:46.613

Ya..Cool ，我们可以直接使用图片 URL ..

```
var imgUrl="http://www.myimgesource.com";
var raster=new Raster(imgUrl); 
```

谢谢，苏里巴布

# c# - C# 绑定不起作用

> ID：14750566
> 
> 赞同：5
> 
> 时间：2013-02-07T11:57:17.787
> 
> 标签：c#, wpf, data-binding

我在后面的代码中实现了一个基本的数据绑定，代码如下：

```
Binding bindingSlider = new Binding();
bindingSlider.Source = mediaElement.Position;
bindingSlider.Mode = BindingMode.TwoWay;            
bindingSlider.Converter = (IValueConverter)Application.Current.Resources["DoubleTimeSpan"];            
slider.SetBinding(Slider.ValueProperty, bindingSlider); 
```

这是转换器的代码，

```
class DoubleTimeSpan : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter,
string language)
    {
        return ((TimeSpan)value).TotalSeconds;
    }

    public object ConvertBack(object value, Type targetType, object parameter,
string language)
    {           
        return TimeSpan.FromSeconds((double)value);
    }
} 
```

即使我没有收到编译器的错误消息，但绑定代码不起作用。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:17:53.963

```
bindingSlider.Source = mediaElement.Position ; // boo! 
```

这是错误的。`Source`是包含您要绑定的属性的对象。你想要的是

```
bindingSlider.Source = mediaElement ;
bindingSlider.Path   = new PropertyPath ("Position") ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T06:08:00.440

您需要使用`Path`属性而不是`Source`数据绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T12:09:48.510

从您的代码中找出错误是非常困难的。正如 Fabian 所说 - 检查输出窗口。但之前增加绑定跟踪级别。检查下一步以了解如何操作。

[PresentationTraceSources.TraceLevel](http://msdn.microsoft.com/en-us/library/system.diagnostics.presentationtracesources.tracelevel.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T12:29:22.573

如果你绑定的 Source 是 a `UIElement`，试试这个：

```
Binding bindingSlider = new Binding("Position");
bindingSlider.ElementName = "mediaElement";
bindingSlider.Mode = BindingMode.TwoWay;            
bindingSlider.Converter = (IValueConverter)Application.Current.Resources["DoubleTimeSpan"];            
slider.SetBinding(Slider.ValueProperty, bindingSlider); 
```

# .net - 什么是仅为会话启用 Mini-profiler 的简单方法？

> ID：14750571
> 
> 赞同：4
> 
> 时间：2013-02-07T11:57:47.500
> 
> 标签：.net, session, mvc-mini-profiler

我有一个使用母版页的简单 Web 表单应用程序。

我按照有关如何使迷你分析器工作的说明进行操作。我得到了所有的统计数据。现在我真的不知道如何打开或关闭它。

我想过使用查询字符串并查找它`Application_BeginRequest`- 如果它在那里，只需在整个会话中使用探查器.... OK- 会话在那个阶段没有加载，如果使用`Application_AcquireRequestState`and 一个静态变量，它会加载它很多次探查器有时会工作，有时不工作，我不知道为什么？

我现在的简单方法是。

```
protected void Application_BeginRequest(object sender, EventArgs e)
        {
            MiniProfiler profiler = null;

            if (Request.QueryString["p"] != null)
            {

                profiler = MiniProfiler.Start();

                using (profiler.Step("Application_BeginRequest"))
                {
                }
            }

        } 
```

这样可以正常工作，但我必须在每个请求上添加一个查询参数。不好。我以前从未使用`global.asax`过，所以我不能 100% 确定它是如何工作的。

我可以在预定义的时间内设置变量的最佳方法是什么，以便在我以秘密方式打开它时始终加载分析器？

* * *

编辑和解决我的问题

```
 protected void Application_BeginRequest(object sender, EventArgs e)
        {
            MiniProfiler profiler = null;
            if (Request.Cookies["profiler"] != null)
            {
                profiler = MiniProfiler.Start();

                using (profiler.Step("Application_BeginRequest"))
                {
                }
            }

        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T12:14:06.150

如果您通过 MiniProfiler.MVC3 包添加了 MiniProfiler，那么它会添加一个 C# 文件以方便您对其进行配置：查看`App_Start\MiniProfiler.cs`，特别是查看`Init`哪些代码决定是否开始分析（`request.IsLocal`是默认设置）

在您的情况下，我建议在*开始条件中检查 cookie，并在**结束*条件中检查更完整的“我是开发人员，还是只是听说过特殊 cookie 的人” ；特别是，如果您调用`MiniProfiler.Stop(false)`，则所有数据都将被丢弃。然后，您的“以秘密方式打开它”和“预定义时间”都可以通过 cookie 廉价地实现，其中“我是开发人员”以确保仅通过设置 cookie 就不会被滥用。

# fortran - 将数组长度传递给函数

> ID：14750572
> 
> 赞同：2
> 
> 时间：2013-02-07T11:57:52.857
> 
> 标签：fortran, gfortran

如果这是一个微不足道的问题，我很抱歉。我的fortran-fu很差。

Fortran 有没有办法传递数组长度？使用`common`（从我收集到的内容等同于`global`）也是一种选择。我想要的是在主程序中调用带有数组的函数。例如（这是输入的，不是从任何地方复制粘贴的）

```
program prog
integer num
double precision x(num),v
double precision test

....
v=test(x,num)
....

function test(x,num)
double precision test
integer num
double precision x(num)
test=0.0d0
....
return
end 
```

这不会编译，因为`num`它不是一个常数。重要的是要知道我传递的数组大小是多少。

编辑：我正在使用 GNU Fortran 95 编译器。

Edit2：我没有运气就尝试了高性能标记的解决方案：

```
 program prog
  integer v
  parameter (v=10)
  double precision x(v),test,k
  k=test(x)
  write (*,*) size(x)
  stop
  end

  function test(x)
  double precision, dimension(:),intent(in) :: x
  double precision test
  write (*,*) size(x)
  test = 0.0d0
  return
  end 
```

输出应该是写入 10 的两行。相反，我得到了这个：

```
/scpc:niels: #$ f95 err.f
/scpc:niels: #$ ./a.out 
           0
          10
/scpc:niels: #$ 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-07T12:07:39.670

Fortran 数组“知道”它们有多长，您不需要将数组及其长度作为不同的参数传递。（除非，也就是说，你正在与旧的 Fortran 代码交互。）今天你会写这样的东西

```
function test(arr)
    real, dimension(:), intent(in) :: arr
    ...
    integer :: arrsize
    ...
    arrsize = size(arr)
    ... 
```

如果您必须与传递数组大小的旧代码接口，您可以进行这样的调用

```
 call old_fortran_subr(array, size(array, 1), other_arguments) 
```

`common`哦，当我在写作时，与你从头开始编写的任何代码无关，这是 70 年代及更早的（正确）弃用的功能。而是使用*模块变量*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T13:42:37.440

好的，这里发生了很多事情，尤其是您使用的 Fortran 风格有点过时。让我们一步一步来...

首先确保你总是使用隐式无

其次，如果您先验地知道数组的大小，则可以使用符号常量来表示其大小。您可以通过参数执行此操作：

```
Program prog

  Implicit None ! ALWAYS USE THIS

  Integer, Parameter :: num = 36

  Double Precision x( num )
  Double Precision test
  Double Precision v

  Call Random_number( x )

  v = test( x, num )

  Write( *, * ) v

End Program prog

Function test( x, num )

  Implicit None ! ALWAYS USE THIS

  Double Precision test

  Integer num
  Double Precision x( num )

  Integer i

  test = 0.0d0
  Do i = 1, num
     test = test + x( i ) * x( i )
  End Do

End Function test
[luser@cromer stackoverflow]$ gfortran -O -std=f95 -Wall -Wextra -pedantic func.f90
[luser@cromer stackoverflow]$ ./a.out
   12.129812171430215 
```

注意 num 是如何设置为 36 的，但是参数位意味着我不能改变它的值——它是一个常数，因此可以用来设置数组的大小。

这就是直到 1990 年的情况。然后，语言中出现了许多改变答案的东西。与您的问题最直接相关的是可分配数组，它允许您在运行时指定数组的大小，以及假定的形状数组，这使得将数组传递给子程序更简单。然而，还有很多其他的东西出现了，我建议你看一本书来了解它们——新语言比旧语言更具表现力和安全性。作为一个例子，我现在会把上面的内容写成类似

```
[luser@cromer stackoverflow]$ cat func.f90

Module numbers_module

  Integer, Parameter :: wp = Selected_real_kind( 12, 70 )

End Module numbers_module

    Module funcs_module

      Use numbers_module

      Implicit None

      Public :: test

      Private

    Contains

      Function test( x ) Result( sum_sq )

        Implicit None ! ALWAYS USE THIS

        Real( wp ) :: sum_sq

        Real( wp ), Dimension( : ), Intent( In ) :: x

        sum_sq = Sum( x * x )

      End Function test

    End Module funcs_module

    Program prog

      Use numbers_module
      Use funcs_module

      Implicit None ! ALWAYS USE THIS

      Real( wp ), Dimension( : ), Allocatable :: x 

      Real( wp ) :: v

      Integer :: num

      Write( *, * ) 'How many elements ?'
      Read ( *, * ) num
      Allocate( x( 1:num ) )

      Call Random_number( x )

      v = test( x )

      Write( *, * ) v

    End Program prog

    [luser@cromer stackoverflow]$ gfortran -O -std=f95 -Wall -Wextra -pedantic func.f90
    [luser@cromer stackoverflow]$ ./a.out
     How many elements ?
    39
       14.151818513394156 
```

如果您决定采用这种方式，请确保您了解为什么要使用此方法，测试的接口需要在调用点的范围内 - 并且要做到这一点，请阅读一本书。

哦。常见的。拒绝吧。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-09-14T16:00:35.460

Fortran 的早期版本中使用了隐式变量声明。通过这种方法，可以简单地使用变量而不显式声明它。诸如 IMPLICIT REAL(AH, OZ ) 之类的语句将声明所有以字母 AH 和 OZ 开头的实变量。这现在被认为过于松散，并且更强大的语言 C 所要求的显式类型声明是首选。我的第一语言是 FORTRAN IV，但我学的第二语言是 QBasic，它和 C 一样要求在使用前明确声明所有变量。

# c# - 将 tabitem 的子控件绑定到另一个对象

> ID：14750580
> 
> 赞同：0
> 
> 时间：2013-02-07T11:58:28.670
> 
> 标签：c#, wpf, mvvm, tabitem, collectionview

在我的 MVVM 应用程序中，我的`MainViewModel`被调用对象中有一个对象`Products`；我还创建了一个`CollectionView`以启用在那些`Products`. 我需要的是展示`CollectionView.CurrentPosition`.

`MainViewModel.cs`

```
 private CollectionView collectionView;

    public CollectionView CollectionView
    {
        get { return this.collectionView; }
        set
        {
            this.collectionView = value;
            OnPropertyChanged(() => CollectionView);
        }
    }

    public MainViewModel()
    {
        Products = fillProducts();
        CollectionView = (CollectionView) CollectionViewSource.GetDefaultView(Products.Items);
    } 
```

现在用于显示中的项目`Products`：

```
<TabItem x:Name="tabProductsView"
                     DataContext="{Binding Products.Items}"
                     Header="View Products">
    <textBlock Text="{Binding ProductID}" />
    <textBlock Text="{Binding ProductDesc}" />
    <textBlock Text="{Binding ProductName}" />
...
<TextBlock name="CurrentItemPosition" Text ="{Binding CollectionView.CurrentPosition}"/>

</tabItem> 
```

现在，绑定到`Products.Items`可能正在工作，我可以浏览我的产品并查看详细信息。但是查看`CollectionView.CurrentPosition`不起作用（不显示任何内容），因为我已经将`DataContext`孔设置`TabItem`为 Products.Items。也设置的`DataContext`不起作用`CurrentItemPosition TextBlock`。

关于如何`CollectionView.CurrentPosition`在此下显示的任何想法`TabItem`？

换句话说，我将如何`Object`从`MainViewModel`同一个“TabItem”中绑定到另一个？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:26:31.013

好的，我尝试直接绑定到 CollectionView 本身，现在一切正常......

# c# - 在 Dictionary.xaml 上声明的 ResourceReferenceKeyNotFoundException

> ID：14750583
> 
> 赞同：1
> 
> 时间：2013-02-07T11:58:39.923
> 
> 标签：c#, wpf, visual-studio-2010

我`ObjectDataProvider`在字典上有一个声明：

```
 <ObjectDataProvider x:Key="Resources"
        ObjectType="{x:Type const:CultureResources}" 
        MethodName="GetResourceInstance"/> 
```

我有一个班级想像这样找到它：

```
m_provider = (ObjectDataProvider) App.Current.FindResource("Resources"); 
```

但是当它试图找到资源时，它会启动错误

```
ResourceReferenceKeyNotFoundException 
```

并且找不到我的资源......这里有一张关于我的项目如何划分的图片：

![在此处输入图像描述](../Images/25a8976a04402666d11e13ab515f8ca8.png)

这`Default.xaml`是我的默认字典。

那么，为什么我找不到我`Resources`的字典中定义的元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:29:20.737

我需要回答我的问题，因为这是一件很奇怪的事情......

首先，我需要说我必须将 my 添加`Dictionary.xaml`到 my `App.xaml`：

```
 <Application.Resources>
     <ResourceDictionary>
         <ResourceDictionary.MergedDictionaries>
             <ResourceDictionary Source="../themes/Default.xaml" />
            </ResourceDictionary.MergedDictionaries>
     </ResourceDictionary>
</Application.Resources> 
```

出于某种原因，在我的`MainWindow.xaml`. 所以我从我的删除它`MainWindow.xaml`并将它添加到`App.xaml`，但我无法将它们插入两侧。那是我看不清楚的部分...

# javascript - 如果更多元素具有此类，.click 功能不适用于类

> ID：14750584
> 
> 赞同：0
> 
> 时间：2013-02-07T11:58:46.917
> 
> 标签：javascript, jquery, css

这工作正常：

```
$('.classname').click(function() {
  alert('');
});
<div class="classname">Click me!</div> 
```

但这不会：

```
$('.classname').click(function() {
  alert('');
});
<div class="classname">Click me!</div>
<div class="classname">Click me!</div> 
```

我怎样才能解决这个问题？谢谢你的帮助！（标签中的脚本，.click 位于文档就绪功能中）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:01:07.653

试试这个：

```
$('PARENTNODE').on('click', '.classname', function() {
  alert('');
});
<div class="classname">Click me!</div>
<div class="classname">Click me!</div> 
```

附加点击处理程序后添加元素。通过使用 .on() 您也可以为将来的元素启用它。

将 PARENTNODE 替换为您要委托给的父节点（例如 body）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:06:28.463

我假设除了第一个之外的所有 div 都是动态添加的。

使用事件委托方法：

```
$(function(){
    $(document).on('click', '.classname', function() {
        alert('');
    });
}), 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T12:00:47.300

尝试这个

```
$(document).ready(function(){
    $(document).on('click', '.classname', function() {
      alert('');
    });
}); 
```

参考[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T12:03:22.833

您正在尝试定位在调用 .click 时不存在的元素。

您可以在 $(function() { your code here }); 之间包装整个 jquery 代码。或者在两个 <div> 之后移动 javascript。

# jar - 当目标中不存在目录时如何解压jar？

> ID：14750589
> 
> 赞同：0
> 
> 时间：2013-02-07T11:59:12.137
> 
> 标签：jar

有一个 jar ： my.jar 包含

```
folder1/First.txt
folder2/Second.txt 
```

我需要将它解压缩到另一个没有 folder1 和 folder2 的位置。有没有办法在运行 jar -xvf... 的同时创建目录？或者有没有更好的方法来压缩和解压缩这些文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:29:19.707

有办法解决这个...

使用：tar 代替 jar

```
tar -cvf my.tar folder1/* folder2/*
tar -xvf my.tar 
```

# c# - 图片框填充了一些百分比

> ID：14750594
> 
> 赞同：1
> 
> 时间：2013-02-07T11:59:32.670
> 
> 标签：c#, picturebox

我对 C 语言编程非常陌生。我的设计如下图所示。

我的概念是我必须在“传输音量”文本框中设置一些音量（例如 100），然后按“设置”按钮。它会自动设置图片框的比例，它工作正常。

现在，当我单击“重新生成”按钮时，我想用颜色填充图片框。图片框要填充的颜色百分比应该是TextBox中关于颜色或液体的数字。

例如，如果我设置 GasPhase =5 ；烃类液体=5；水= 5；油基泥浆 =5；水基泥=5；未识别 = 75。

然后图片必须用“未识别”颜色填充 75%，用 5% 等填充 GasPhase 颜色

我已经编写了一些代码，如下所示。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

  namespace test
  {
    public partial class Form1 : Form
    {
    public Form1()
    {
        InitializeComponent();
    }

    private void txtTransferVolume_TextChanged(object sender, EventArgs e)
    {

    }

    private void txtTransferSet_Click(object sender, EventArgs e)
    {
        string value = txtTransferVolume.Text;
        double midvalue = Convert.ToDouble(value);
        lblTransferBottleMax.Text = value;
        lblTransferBottleMid.Text = (midvalue / 2).ToString();

    }

    private void chkTransferManual_CheckedChanged(object sender, EventArgs e)
    {

    }

    private void btnTransferBottleRegenerate_Click(object sender, EventArgs e)
    {

    }

   }
 } 
```

请帮助我如何填写我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:36:38.123

这可以通过直接在图片框控件上绘图或在内存中创建位图并显示在图片框中来轻松实现。

例子：

```
private void DrawPercentages(int[] percentages, Color[] colorsToUse)
{
   // Create a Graphics object to draw on the picturebox
   Graphics G = pictureBox1.CreateGraphics();

   // Calculate the number of pixels per 1 percent
   float pixelsPerPercent = pictureBox1.Height / 100f;

   // Keep track of the height at which to start drawing (starting from the bottom going up)
   int drawHeight = pictureBox1.Height;

   // Loop through all percentages and draw a rectangle for each
   for (int i = 0; i < percentages.Length; i++)
   {
       // Create a brush with the current color
       SolidBrush brush = new SolidBrush(colorsToUse[i]);
       // Update the height at which the next rectangle is drawn.
       drawHeight -= (int)(pixelsPerPercent * percentages[i]);
       // Draw a filled rectangle
       G.FillRectangle(brush, 0, drawHeight, pictureBox1.Width, pixelsPerPercent * percentages[i]);
    }    
} 
```

当然，你必须检查两个数组的长度是否相同，等等。我只是想给你一个如何做到这一点的基本概念。

这是一个关于如何在数组中获取数据并将它们传递给函数的概念。由于您为每个值使用不同的文本框，因此很难对它们进行迭代，所以现在我将向您展示如何使用您现在拥有的 6 个值来完成它。

```
private void btnTransferBottleRegenerate_Click(object sender, EventArgs e)
{
  int[] percentages = new int[6];
  percentages[0] = int.Parse(txtTransferNotIdentified.Text);
  percentages[1] = int.Parse(txtTransferWater.Text);
  // And so on for every textbox

  Color[] colors = new Color[6];
  colors[0] = Color.Red;
  colors[1] = Color.Yellow;
  // And so on for every color

  // Finally, call the method in my example above
  DrawPercentages(percentages, colors);
} 
```

如果您的百分比总和不总是 100，您可以使用第三个参数来指定总和并`100f`在方法中将值更改为此值`DrawPercentages`。

# ios - iOS 从另一个类访问 int

> ID：14750596
> 
> 赞同：0
> 
> 时间：2013-02-07T11:59:41.443
> 
> 标签：ios, xcode, class, cocos2d-iphone, int

我有两个名为 MainGame 和 YourScore 的类。在 MainGame 中，我有一个 Score int 来跟踪游戏中的分数。在 YourScore 中，我想在文本标签中显示分数。

我可以将标签中的“Hello world”文本更改为分数吗？

这是我用于文本标签的代码

```
 CCLabelTTF *label = [CCLabelTTF labelWithString:@"Hello World" fontName:@"Times New Roman" fontSize:32];
          label.position = ccp(screenWidth / 2 , screenHeight /1.5 );
          label.color = ccc3(255, 255, 255);
          [self addChild: label]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:03:49.610

你可以很容易地做到这一点。在声明分数的第一个视图控制器中。只需将其声明为如下属性

`@property (nonatomic,assign) int score;`

您可以在要更改 Hello world 文本标签的第二个类中访问该属性。

只需制作类的对象并使用 `label.text = classObject.score;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:48:14.233

我发现最好使用 KVO 进行这种类型的 UI 更新。基本上，UI 对象注册为另一个对象上特定属性的观察者。当该属性更改时，会向 UI 对象上的处理程序发送一条消息，该处理程序可以使用数据来更新 UI。这样模型对象甚至不必知道 UI 对象。

[http://iphonedevelopment.blogspot.com/2009/02/kvo-and-iphone-sdk.html](http://iphonedevelopment.blogspot.com/2009/02/kvo-and-iphone-sdk.html)

# jquery-mobile - 从 android 手机浏览器访问 PC 的本地主机 vai USB 不是 wifi？

> ID：14750598
> 
> 赞同：0
> 
> 时间：2013-02-07T11:59:45.370
> 
> 标签：jquery-mobile

我正在 PC 中使用 vs2010 开发 jQuery 移动应用程序，我想在手机浏览器上访问 localhost。但我不想使用 wifi，因为连接速度很慢。

我可以通过 USB 进行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:55:56.880

可能不是。

但是，如果您将设备带入网络，则可以通过 PC ip 访问。

# c# - 在 C# 中运行可执行文件的问题

> ID：14750599
> 
> 赞同：0
> 
> 时间：2013-02-07T11:59:47.090
> 
> 标签：c#, wpf

我正在尝试将命令行工具转换为 UI 工具，并且我正在使用 C# 和 WPF。但是我在命令行工具的一项功能上被阻止了。问题是，在命令行上运行 exe 以及参数后，它会要求进一步输入，如输入密码等。

例如：

> C:\工具>tool.exe \abc
> 
> 输入 Input1 ：
> 
> 输入输入 2：

我不知道如何提供这个输入（Input1，Input2 ...）。没有规定从命令提示符向 tool.exe 提供输入，例如

> C:\tool>tool.exe \abc <"输入参数 input1"> <"输入参数 input2">

您必须在键入后手动输入这些输入

> C:\工具>tool.exe \abc

并点击进入。

目前我正在使用**System.Diagonostics中的****Process**类来运行该进程，然后将输出直接读入 Streamreader 对象。

 **关于这个问题的任何建议都会有很大帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:03:54.637

您可以使用[Process.StandardInput](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standardinput.aspx)写入进程的标准输入。**

# android - 如何从 android 以 JSON 格式发布数据？

> ID：14750601
> 
> 赞同：0
> 
> 时间：2013-02-07T11:59:56.980
> 
> 标签：android, json

在Android中进行JSON解析，因为我想在http URL上发布以下格式的数据，

```
 webdata={"email":"test@test.com","password":"123456"} 
```

我如何在 http url 上使用 httppost 为这个 JSON 发布这些数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:16:59.500

首先，您可以准备您的 json 格式数据，然后根据您的要求将其作为您的请求发送 GET 或 POST 这需要使用 Asynctask 完成

```
JSONObject jObject = new JSONObject();
try{
jObject.put("email",urvalue);
jObject.put("password",urvalue);

List<NameValuePair> pairs = new ArrayList<NameValuePair>();
pairs.add(new BasicNameValuePair("webdata", jObject.toString()));

DefaultHttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost(url);
httpPost.setEntity(new UrlEncodedFormEntity(pairs, "UTF-8"));
HttpResponse httpResponse = httpClient.execute(httpPost);
HttpEntity httpEntity = httpResponse.getEntity();
is = httpEntity.getContent();

}catch(Exception e){} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-15T07:21:07.130

使用以下方法生成 json 对象

```
private JSONObject getConvertedinJson(String email, String password) {

    JSONObject object = new JSONObject();
    try {
        object.put("email", email);
        object.put("password", password);
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return object;
} 
```

之后使用以下方法在 url 上发布 json 对象

```
 public JSONObject getJSONFromUrl(String url, JSONObject jObj) {

    // Making HTTP request
    try {
        // Default Http Client
        DefaultHttpClient httpClient = new DefaultHttpClient();
        // Http Post Header
        HttpPost httpPost = new HttpPost(url);
        StringEntity se = new StringEntity(jObj.toString());
        httpPost.setEntity(se);
        httpPost.setHeader("Accept", "application/json");
        httpPost.setHeader("Content-type", "application/json");
        // Execute Http Post Request
        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    /*
     * To convert the InputStream to String we use the
     * BufferedReader.readLine() method. We iterate until the BufferedReader
     * return null which means there's no more data to read. Each line will
     * appended to a StringBuilder and returned as String.
     */
    try {
        // Getting Server Response
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        // Reading Server Response
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    Log.e("JSON Parser", jObj.toString());
    return jObj;

} 
```

现在使用以下语句获取 json 响应。

```
JSONObject jsonObject = getJSONFromUrl(
                "www.url.com/api",
                getConvertedinJson("test@test.com",
                        "123456")); 
```

现在您可以根据需要轻松反序列化 jsonObject。

**注意：您的帖子数据必须是 Json 对象。正如我所见 webdata={"email":"test@test.com","password":"123456"} 不是 jsonObject 这里 json Object 只是 {"email":"test@test.com","password ":"123456"}**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T12:02:59.103

使用`StringEntity`类。

```
StringEntity entity = new StringEntity("Your JSON String",HTTP.UTF_8); 
```

然后将其添加到您的`HttpPost`

```
httpPost.setEntity(entity); 
```

# linux - 将 awk 输出定向到变量

> ID：14750604
> 
> 赞同：0
> 
> 时间：2013-02-07T12:00:02.697
> 
> 标签：linux

新来的人有一个问题，希望有一个简单的解决方案，但我似乎无法管理。

因此，我有大量需要使用相同命令行程序处理的文件，并且我正在尝试编写一个小的 shell 脚本来自动执行此操作。我写了一些东西，它将从文本文件中读取输入文件名，并对每个文件重复该命令。到目前为止，一切都很好。我的问题是命名输出。每个文件都以通用格式“lane_number_bla_bla_bla”命名，并成对处理。因此，将有一个“lane_1_bla_bla_bla_001”和“lane_1_bla_bla_bla_002”需要组合成一个输出文件。为此，我尝试使用 awk 从输入文件的 .txt 列表中读取样本编号，并将其解析为输出文件编号。这是我想出的代码（请注意，命令之前的 echo 语句仅用于测试；它' s 在运行实际程序时被删除；这也不是更复杂的实际命令，但原理仍然适用）：

```
echo "Which input1 should I use?"
read text
input1=$text
echo "Which input2 should I use?"
read text
input2=$text
echo "How many lines?"
read text
n=$text
for i in $(seq 1 $n)
do
  awkinput1=$(awk NR==$i $input1)
  awkinput2=$(awk NR==$i $input2)
  num=$(awk 'NR==$i{print $2 }' FS="_" $input1)
  lane=$(awk 'NR==$i{print $1 }' FS="_" $input1)
  echo "command $awkinput1.in > $awkinput1.out && command $awkinput2.in > $awkinput2.out && command cat $awkinput1.out $awkinput2.in > $num-$lane-CAT.out &"
  if (( $i % 10 == 0 )); then wait; fi # Limit to 10 concurrent subshells.
done 
```

当我运行它时，命令行中的两个 $awkinput 字段都会被适当的文件名正确替换，但不会打印任何内容的 $num 和 $lane 字段。

那么，我做错了什么？我确信这很简单，但是我尝试了很多不同的方法来格式化相关的 awk 命令，但似乎没有任何效果。我正在使用 SSH 协议的远程 linux 服务器上执行此操作，如果它有所作为的话。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:24:27.310

1.  Shell 不解析`$i`单引号 ( `'`) 引用的内容。所以引用的字符串应该在`$i`.
2.  `FS`应该在解析行之前设置。

以下代码将起作用。

```
num=$(awk 'BEGIN{FS="_"} NR=='$i'{print $2 }' $input1)
lane=$(awk 'BEGIN{FS="_"} NR=='$i'{print $1 }' $input1) 
```

下面的代码会更高效：

```
while read in1 ; do
  read in2 <&3
  num=$(awk 'BEGIN{FS="_"} {print $2 }' <<<"$in1")
  lane=$(awk 'BEGIN{FS="_"} {print $1 }' <<<"$in1")
  ...
done <$input1 3<$input2 
```

# jquery - jquery在多线程上动画

> ID：14750609
> 
> 赞同：2
> 
> 时间：2013-02-07T12:00:15.560
> 
> 标签：jquery

jquery 动画函数在多线程上工作吗？

在我的代码中......假设我点击顶部按钮并调用函数工作正常......

现在单击任何剩余的一次....第二个功能也可以使用，但也可以使用第一个调用。

那么，我如何一次调用一个函数？

它是多线程吗？这是杀死它的方法吗？

```
<table width="1200px" height="600px" align="center">
        <tr>
            <td>
            </td>
            <td style="text-align: center">
                <button id="btntop">
                    top</button>
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td style="text-align: right">
                <button id="btnleft">
                    left</button>
            </td>
            <td style="text-align: center">

                <img id="book" src="Image/images.jpg" alt="" width="250" height="123" style="position: relative;
                    left: 10px;" />

            </td>
            <td>
                <button id="btnright">
                    right</button>
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td style="text-align: center">
                <button id="btnbottom">
                    bottom</button>
            </td>
            <td>
            </td>
        </tr>
    </table>
    <script type="text/javascript">

        function anim(direction) {

            if (direction == "top") {

                $('#book').animate({

                    top: '-=10'

                }, 200, function () {

                        anim("top");

                });

            }

            if (direction == "left") {
                $('#book').animate({

                    left: '-=10'
                }, 200, function () {

                        anim("left");

                });
            }

            if (direction == "right") {
                $('#book').animate({

                    left: '+=10'
                }, 200, function () {

                        anim("right");

                });
            }

            if (direction == "bottom") {
                $('#book').animate({

                    top: '+=10'
                }, 200, function () {

                        anim("bottom");

                });
            }
        }

        $('#btntop').hover(function () {

            anim("top");

        });

        $('#btnleft').hover(function () {

            anim("left");

        });

        $('#btnright').hover(function () {

            anim("right");

        });

        $('#btnbottom').hover(function () {

            anim("bottom");

        });

    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:04:04.480

您正在调用您的`anim()`函数，`hover()`这不是一个好主意。改为`click()`改为。

至于第二部分，`$('#book').stop(true);`在调用`anim()`每个 4 按钮单击处理程序之前添加：

```
$('#btntop').click(function () {
    $('#book').stop(true);
    anim("top");
});

$('#btnleft').click(function () {
    $('#book').stop(true);
    anim("left");
});

$('#btnright').click(function () {
    $('#book').stop(true);
    anim("right");
});

$('#btnbottom').click(function () {
    $('#book').stop(true);
    anim("bottom");
}); 
```

它将停止所有当前正在运行的动画并开始新的动画。

# overflow - 溢出：隐藏；关于过渡元素

> ID：14750612
> 
> 赞同：1
> 
> 时间：2013-02-07T12:00:17.980
> 
> 标签：overflow, css-transitions, css

正如您[在此处](http://jsfiddle.net/zu3BN/)看到的（小提琴），`a`是父级并设置为`overflow: hidden;`. `span`是孩子并已`box-shadow`设置。当什么都没有发生时，一切都很顺利，但是当用户将鼠标悬停时`a`，它的`overflow`属性似乎被覆盖了（即阴影显示为正方形，而不是应该的圆形）。知道如何解决这个问题吗？

代码： **HTML**

```
<a href="#" title="Hover me"><span>Hover me</span></a> 
```

**CSS**

```
a {
    overflow: hidden;
    width: 52px;
    height: 52px;
    top: 0;
    display: block;
    position: relative;
    margin: 50px;
    background: red;

    -webkit-transition: all 300ms linear;
    -moz-transition: all 300ms linear;
    -ms-transition: all 300ms linear;
    -o-transition: all 300ms linear;
    transition: all 300ms linear;

    border-radius: 200px;
    opacity: 0.6;
}

a:hover {
    opacity: 1;
    top: -8px;
}

a > span {
    width: 100%;
    height: 100%;
    display: block;
    box-shadow: inset 0 -35px 10px rgba(0,0,0,0.8);
}

a:hover > span {
    box-shadow: inset 0 -28px 10px rgba(0,0,0,0.8);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:09:22.267

你的问题不是不稳定的，但如果它可以帮助你，那么试试这个....

```
a {
    overflow: hidden;
    width: 52px;
    height: 52px;
    top: 0;
    display: block;
    position: relative;
    margin: 50px;
    background: red;

    -webkit-transition: all 300ms linear;
    -moz-transition: all 300ms linear;
    -ms-transition: all 300ms linear;
    -o-transition: all 300ms linear;
    transition: all 300ms linear;

    border-radius: 200px;
    opacity: 0.6;
}

a:hover {
    overflow: hidden;
    opacity: 1;
}

a > span {
    overflow: hidden;
    width: 100%;
    height: 100%;
    display: block;
    box-shadow: inset 0 -35px 10px rgba(0,0,0,0.8);
}

a:hover > span {
    overflow: hidden;
    box-shadow: inset 0 -28px 10px rgba(0,0,0,0.8);
} 
```

# .net - 异常：ComponentActivator：无法代理 AsFactoryImplementation。

> ID：14750615
> 
> 赞同：3
> 
> 时间：2013-02-07T12:00:21.630
> 
> 标签：.net, exception, castle-windsor, factory

我尝试使用此代码在温莎城堡中实现工厂，但它会抛出异常，如本期标题所示。我在[这里关注文档](http://docs.castleproject.org/Windsor.Typed-Factory-Facility-interface-based-factories.ashx)的示例。请指出我哪里出错了。

```
using System;
using System.Windows.Forms;
using Castle.Facilities.TypedFactory;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Castle.MicroKernel.Registration;
using Castle.Windsor;

namespace AsFactoryImplementation
{
interface IDummyComponnentFactory
{
    IDummyComponnent creat();
    void Relese(IDummyComponnent factory);
}

interface IDummyComponnent
{
    void show();
}

class DummyComponnent:IDummyComponnent
{
    public void show()
    {
        Console.WriteLine("just testing this for better performance");
    }
}

class Program:WindsorContainer
{
    static void Main(string[] args)
    {
        var container = new WindsorContainer();
        container.AddFacility<TypedFactoryFacility>();

        container.Register(Component.For<IDummyComponnent>().ImplementedBy<DummyComponnent>().Named("FirstConnection").LifeStyle.Transient
            ,Component.For<IDummyComponnentFactory>().AsFactory());

        var val = container.Resolve<IDummyComponnent>();
        val.show();

        var val2 = container.Resolve<IDummyComponnentFactory>();

    }
} 
```

}

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-09T00:55:52.207

内部异常解释得还不够好吗？

> 类型`AsFactoryImplementation.IDummyComponnentFactory`对 DynamicProxy 不可见。无法为不可访问的类型创建代理。将类型设为 public 或 internal 并用 `[assembly: InternalsVisibleTo(InternalsVisible.ToDynamicProxyGenAssembly2)]` 属性标记您的程序集。

# linux - ImageMagick - 引用数字作为转换标签参数导致命令失败

> ID：14750623
> 
> 赞同：0
> 
> 时间：2013-02-07T12:00:44.373
> 
> 标签：linux, command, imagemagick, label

我的外壳挂在这个命令上：

```
/usr/local/bin/convert -size 298x71 -background black -fill white -stroke none -gravity center -trim -interline-spacing 0 -font /home/amazingw/public_html/live/fonts/Phillies.ttf label:'150' png:- 
```

外壳只是坐在那里，直到我按 ctrl+c。如果我在 label: 参数中添加任何字母，命令运行正常并且我得到输出。字体在那里，但它缺少定义中的数字字符。这会导致我的命令失败吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:59:39.637

这似乎是与控制台输入相关的问题，我假设您使用的是 Bash。

如果是这种情况，Bash 会尝试解释引号并等待其他输入。

在查看了 imagemagick 网站的“标签：”之后

```
Label - Simple Text Label

Basic Labels

Creating a font image using a "label:" image, 
is the more typical way of drawing a font
quickly in ImageMagick... 
```

它继续并给出了许多例子......

```
convert -background lightblue -fill blue \
      -font Candice -pointsize 72 label:Anthony \
      label.gif 
```

没有一个例子显示单引号。

我假设在 Bash 和 ImageMagick 的转换程序之间，对来自控制台的输入的解释存在一些错误。

我建议尝试不带引号的相同命令

```
/usr/local/bin/convert -size 298x71 -background black -fill white -stroke none -gravity center -trim -interline-spacing 0 -font /home/amazingw/public_html/live/fonts/Phillies.ttf label:150 png:- 
```

我也会快速浏览一下[关于单引号的 Bash 手册](http://www.gnu.org/software/bash/manual/bashref.html#Single-Quotes)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T22:59:41.337

我能够使用包含数字的字体的修改版本进行测试。命令进行得很顺利，并返回了输出图像。这几乎将其缩小到处理标签的 ImageMagick 问题。看起来如果标签仅由字体中缺少的字符组成（生成的输出图像将为空） - 在这种情况下，ImageMagick 会挂起，直到按下 ctrl+c - 特别有问题，因为我从 php 的 proc_open 运行它.

# java - IllegalBlockSizeException 需要解决

> ID：14750629
> 
> 赞同：0
> 
> 时间：2013-02-07T12:01:02.633
> 
> 标签：java, jsp, jakarta-ee, security

[我已经按照本教程http://www.java2s.com/Code/Android/Security/AESEncryption.htm](http://www.java2s.com/Code/Android/Security/AESEncryption.htm)在 java 中编写了我的程序 但我得到一个异常，即“javax.crypto.IllegalBlockSizeException：输入长度必须是16 使用填充密码解密时"

有谁能够帮我？

```
public class utils {

public static String encrypt(String message,String secretPhrase){
    try{
        MessageDigest mdig=MessageDigest.getInstance("MD5");
        byte[] digestedBytes=mdig.digest(secretPhrase.getBytes("UTF-8"));
        SecretKeySpec keySpec=new SecretKeySpec(digestedBytes,"AES");

        Cipher cipher=Cipher.getInstance("AES/ECB/PKCS5Padding");
        cipher.init(Cipher.ENCRYPT_MODE, keySpec);
        byte[] encryptedBytes=cipher.doFinal(message.getBytes("UTF-8"));

        return new String(encryptedBytes,"UTF-8");
    }catch(Exception exc){
        return null;
    }
}

public static String decrypt(String message,String secretPhrase){
    try{
        MessageDigest mdig=MessageDigest.getInstance("MD5");
        byte[] digestedBytes=mdig.digest(secretPhrase.getBytes("UTF-8"));
        SecretKeySpec keySpec=new SecretKeySpec(digestedBytes,"AES");

        Cipher cipher=Cipher.getInstance("AES/ECB/PKCS5Padding");
        cipher.init(Cipher.DECRYPT_MODE, keySpec);
        byte[] encryptedBytes=cipher.doFinal(message.getBytes("UTF-8"));

        return new String(encryptedBytes,"UTF-8");
    }catch(Exception exc){
        return null;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:14:30.270

试试这个，

```
public String encrypt(String str) {
    try {
        // Encode the string into bytes using utf-8
        byte[] utf8 = str.getBytes("UTF8");

        // Encrypt
        byte[] enc = ecipher.doFinal(utf8);

        // Encode bytes to base64 to get a string
        return new sun.misc.BASE64Encoder().encode(enc);
    }  catch (Exception e) {
    }
    return null;
}

public String decrypt(String str) {
    try {
        // Decode base64 to get bytes
        byte[] dec = new sun.misc.BASE64Decoder().decodeBuffer(str);

        // Decrypt
        byte[] utf8 = dcipher.doFinal(dec);

        // Decode using utf-8
        return new String(utf8, "UTF8");
    }  catch (Exception e) {
    }
    return null;
} 
```

**使用它的例子**

```
try {
    // Generate a temporary key. In practice, you would save this key.
    // See also Encrypting with DES Using a Pass Phrase.
    SecretKey key = KeyGenerator.getInstance("DES").generateKey();

    // Create encrypter/decrypter class
    DesEncrypter encrypter = new DesEncrypter(key);

    // Encrypt
    String encrypted = encrypter.encrypt("Don't tell anybody!");

    // Decrypt
    String decrypted = encrypter.decrypt(encrypted);
} catch (Exception e) {
} 
```

# c# - C# LINQ 对象引用未设置

> ID：14750638
> 
> 赞同：1
> 
> 时间：2013-02-07T12:01:27.843
> 
> 标签：c#, linq

考虑以下代码

```
IEnumerable<String> query = null;    
query = from x in xml.Descendants(xmlMasterContainerName).Descendants(xmlElementName)
                    let guid = x.Attribute("guid") ?? new XAttribute("guid", "-1")
                    where x.Attribute(xmlAttributeIdName).Value == xmlAttributeIdValue
                    select guid.Value; 
```

尝试 query.ToList() 时出现“未设置对象引用”

当 'x.Attribute(xmlAttributeIdName).Value == xmlAttributeIdValue' 不存在时，这很可能是由 'select guid.Value' 引起的。

如何在选择之前检查现有值的 where 语句？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T12:05:13.680

在 Xlinq 中，您通常不`Attribute().Value`直接使用，因为您得到的确切错误。相反，你施放它。`null`如果返回 null，则强制转换将导致`Attribute()`，因此不会有异常。

因此，您可以将 where 子句更改为：

```
where ((string)x.Attribute(xmlAttributeIdName)) == xmlAttributeIdValue 
```

以及您对此的选择：

```
select (string)guid 
```

顺便说一句：我会这样写代码：

```
var query = xml.Descendants(xmlMasterContainerName)
               .Descendants(xmlElementName)
               .Where(x => ((string)x.Attribute(xmlAttributeIdName)) ==
                               xmlAttributeIdValue)
               .Select(x => (string)x.Attribute("guid") ?? "-1"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T12:07:03.650

如果没有属性`xmlAttributeIdName`，您将获得访问属性的异常`Value`。改用强制转换（它将返回默认值）。你也不需要创建属性 - 你可以简单地返回值：

```
IEnumerable<String> query = null;    
query = from x in xml.Descendants(xmlMasterContainerName)
                     .Descendants(xmlElementName)
        where (string)x.Attribute(xmlAttributeIdName) == xmlAttributeIdValue
        select (string)x.Attribute("guid") ?? "-1"; 
```

# ruby - 在Ruby中将大尺寸数组转换为哈希

> ID：14750639
> 
> 赞同：1
> 
> 时间：2013-02-07T12:01:30.757
> 
> 标签：ruby

我有一个大小为 35K 的数组，想将其转换为哈希。我能够使用以下方法转换大小为 12K 的数组。

```
a = []
12000.times { |i| a << i }
Hash[*a] 
```

但是，当我尝试大小超过 12K 的数组时，它会引发 SystemStackError: stack level too deep 错误。

任何人都可以建议吗？出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:29:09.363

你可以试试这个

```
a = [*1..1_000_000].to_a
b = {}
a.each_slice(2){|k,v| b[k] = v} 
```

# android - 在添加新对象之前删除 GridLayout 中的对象

> ID：14750643
> 
> 赞同：2
> 
> 时间：2013-02-07T12:01:44.707
> 
> 标签：android

每次我按下一个按钮时，我都会用几个按钮填充一个 GridLayout。这是执行此操作的代码，但我认为您没有必要理解我的问题

```
for(int i=0; i < numeroBottoni;i++){
        Spec row = GridLayout.spec(numeroRiga, 1); 
        Spec colspan = GridLayout.spec(numeroColonna, 1);
        GridLayout.LayoutParams gridLayoutParam = new GridLayout.LayoutParams(row,colspan);
        gridLayoutParam.width=larghezzaColonna;
        gridLayoutParam.height=larghezzaColonna;// l'altezza della colonna la faccio uguale alla larghezza
        gridLayout.addView(buttonName,gridLayoutParam); 
```

}

新按钮与旧按钮重叠，所以我想我应该在添加新按钮之前“删除”旧按钮。但我不知道我应该怎么做。我不知道我是否必须“删除”`button`或是否必须“清理” `GridLayout`.

我试图同时打电话， `invalidate()`但这不是解决方案`button``GridLayout`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T12:32:04.813

试试这个代码

```
gridLayout.removeAllViews(); 
```

在添加新视图之前。在代码中的 for 循环之前

# javascript - 将 JavaScript 对象转换为 JSON 并发布它

> ID：14750644
> 
> 赞同：0
> 
> 时间：2013-02-07T12:01:46.883
> 
> 标签：javascript, jquery, json

我必须解析我的 html 并将其发布到另一个脚本。当我使用`JSON.stringify`解析数据序列化对象时，接收脚本中的 $_POST 数组为空：

```
$("#addQueryForm").submit(function(event){
  event.preventDefault();
  result = {}     
  result['kindArr'];
  result['factor'];
  $("[rel=my-form]").each(function() {
    result[$(this).attr("name")] = $(this).attr("value");
  }); 
  var form = JSON.stringify(result);    
  $.post("add_kind.php", form , function(data) {
    alert(data);  
    //data shows me that $_POST array is empty
  }); 
}); 
```

但是，如果我手动将 json 字符串写入查询中，那将是正确的：

```
$.post("add_kind.php", {"kind":"Var1","kindArr":"Var12345","factor":"Var0","synonym1":"Var1","synonym2":"Var2","synonym3":"Var3"} , function(data) {
    alert(data);  
    //data shows me that $_POST contains posted data
}); 
```

我究竟做错了什么？

PS：`stringify`是多余的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:04:46.483

也许[序列化](http://api.jquery.com/serialize/)在您的情况下会更好：

```
var form = $(this).serialize();    
$.post("add_kind.php", form, function(data) {
    alert(data);
}); 
```

# java - 从 CCombo 中删除重复项

> ID：14750649
> 
> 赞同：1
> 
> 时间：2013-02-07T12:02:00.470
> 
> 标签：java, eclipse-plugin, ccombo

我有一个“CCombo”框和一个列表。当用户单击其下拉列表时，我希望将 List 的所有项目加载到其中。但问题是，如果用户多次单击下拉菜单，则项目会一次又一次地添加到其中。同时在 UI 上显示这些元素。用户找到重复的项目。

所以我只想知道，我们能否从 CCombo 中删除重复的项目。如果是，请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:03:31.550

使用`removeAll()`或。`remove(int start, int end)`_`CCombo`

参考：[http ://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Fcustom%2FCCombo.html](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Fcustom%2FCCombo.html)

# linux - 如何删除shell中最后10个命令的历史记录？

> ID：14750650
> 
> 赞同：168
> 
> 时间：2013-02-07T12:02:07.587
> 
> 标签：linux, bash, shell, terminal

命令如下

```
 511  clear
  512  history
  513  history -d 505
  514  history
  515  history -d 507 510 513
  516  history
  517  history -d 509
  518  history
  519  history -d 511
  520  history 
```

我可以删除单个`history -d 511`，但是如何在 shell 中使用单个命令删除最后 10 个命令和 10 个命令之间的历史记录？

我们可以编写一个 bash 脚本并执行以删除历史记录吗？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-02-07T12:07:37.050

您是否尝试过直接编辑历史文件：

```
~/.bash_history 
```

* * *

## 回答 #2

> 赞同：102
> 
> 时间：2016-04-25T17:26:06.400

我的答案基于以前的答案，但增加了颠倒顺序，以便从最近到最近删除历史项目。

获取您当前的历史记录（调整您想查看的行数）：

```
history | tail -n 10 
```

这给了我类似的东西

```
1003  25-04-2016 17:54:52 echo "Command 1"
1004  25-04-2016 17:54:54 echo "Command 2"
1005  25-04-2016 17:54:57 echo "Command 3"
1006  25-04-2016 17:54:59 echo "Command 4"
1007  25-04-2016 17:55:01 echo "Command 5"
1008  25-04-2016 17:55:03 echo "Command 6"
1009  25-04-2016 17:55:07 echo "Command 7"
1010  25-04-2016 17:55:09 echo "Command 8"
1011  25-04-2016 17:55:11 echo "Command 9"
1012  25-04-2016 17:55:14 echo "Command 10" 
```

选择要删除的项目的开始和结束位置。我将删除条目 1006 到 1008。

```
for h in $(seq 1006 1008); do history -d 1006; done 
```

这将为 1006 生成`history -d`命令，然后 1007 变为 1006 并删除 1006，然后 1008（变为 1007）现在是 1006 并被删除。

如果我还想删除历史记录删除命令，那么它会有点复杂，因为您需要知道当前最大历史记录条目。

你可以得到这个（可能有更好的方法）：

```
history 1 | awk '{print $1}' 
```

把它放在一起你可以用它来删除一个范围，也可以删除历史删除命令：

```
for h in $(seq 1006 1008); do history -d 1006; done; history -d $(history 1 | awk '{print $1}') 
```

将这一切包装在一个函数中以添加到您的`~/.bashrc`：

```
histdel(){
  for h in $(seq $1 $2); do
    history -d $1
  done
  history -d $(history 1 | awk '{print $1}')
  } 
```

删除命令 4、5 和 6 (1049-1051) 并隐藏证据的示例：

```
[18:21:02 jonathag@gb-slo-svb-0221 ~]$ history 11
 1046  25-04-2016 18:20:47 echo "Command 1"
 1047  25-04-2016 18:20:48 echo "Command 2"
 1048  25-04-2016 18:20:50 echo "Command 3"
 1049  25-04-2016 18:20:51 echo "Command 4"
 1050  25-04-2016 18:20:53 echo "Command 5"
 1051  25-04-2016 18:20:54 echo "Command 6"
 1052  25-04-2016 18:20:56 echo "Command 7"
 1053  25-04-2016 18:20:57 echo "Command 8"
 1054  25-04-2016 18:21:00 echo "Command 9"
 1055  25-04-2016 18:21:02 echo "Command 10"
 1056  25-04-2016 18:21:07 history 11
[18:21:07 jonathag@gb-slo-svb-0221 ~]$ histdel 1049 1051
[18:21:23 jonathag@gb-slo-svb-0221 ~]$ history 8
 1046  25-04-2016 18:20:47 echo "Command 1"
 1047  25-04-2016 18:20:48 echo "Command 2"
 1048  25-04-2016 18:20:50 echo "Command 3"
 1049  25-04-2016 18:20:56 echo "Command 7"
 1050  25-04-2016 18:20:57 echo "Command 8"
 1051  25-04-2016 18:21:00 echo "Command 9"
 1052  25-04-2016 18:21:02 echo "Command 10"
 1053  25-04-2016 18:21:07 history 11 
```

问题实际上是从历史记录中删除最后 10 个命令，因此如果您想节省一点精力，可以使用另一个函数来调用`histdel`为您进行计算的函数。

```
histdeln(){

  # Get the current history number
  n=$(history 1 | awk '{print $1}')

  # Call histdel with the appropriate range
  histdel $(( $n - $1 )) $(( $n - 1 ))
  } 
```

此函数接受 1 个参数，即要删除的先前历史记录项的数量。因此，要从历史记录中删除最后 10 个命令，只需使用`histdeln 10`.

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2019-01-16T19:38:26.143

使用 Bash 5，您现在可以做一个范围......万岁！：

```
history -d 511-520 
```

或倒数 10：

```
history -d -10--1 
```

摘自[Bash 5 手册页](https://www.gnu.org/software/bash/manual/bash.txt)：

> '历史'
> 
> 选项（如果提供）具有以下含义：
> 
> '-d OFFSET' 删除位置 OFFSET 的历史条目。如果 OFFSET 为正，则应指定为显示历史记录时出现的值。如果 OFFSET 是负数，它被解释为相对于比最后一个历史位置大一，因此负索引从历史记录的末尾开始计数，并且索引“-1”指的是当前的“历史 -d”命令。
> 
> '-d START-END' 删除位置 START 和 END 之间的历史条目，包括端点。START 和 END 的正值和负值按上述解释。

这是我对 Bash 4 的解决方案。它迭代地删除单个条目或从最低索引开始的一系列历史记录。

```
delHistory () {
    count=$(( ${2:-$1} - $1 ))
    while [[ $count -ge 0 ]]; do
        history -d "$1"
        ((count--))
    done
}

delHistory 511 520 
```

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2013-02-07T12:14:07.517

```
for x in `seq $1 $2`
do
  history -d $1
done 
```

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2016-02-26T10:50:49.723

首先，键入：`history`并写下您要删除的行号序列。

要清除从 1800 到 1815 行的行，请在终端中写入以下内容：

```
$ for line in $(seq 1800 1815) ; do history -d 1800; done 
```

如果要删除删除命令的历史记录，请为 1815 = 1816 添加 +1，该序列的历史记录 + 删除命令将被删除。

例如 ：

```
$ for line in $(seq 1800 1816) ; do history -d 1800; done 
```

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2017-09-21T03:57:31.633

结合上面的答案：

`history -w vi ~/.bash_history history -r`

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2013-02-07T12:10:25.430

# 编辑：

更改了支撑迭代器，很好的调用。此外，使用反向迭代器调用此函数。

您可能可以执行以下操作：

```
#!/bin/bash
HISTFILE=~/.bash_history   # if you are running it in a 
                           # non interactive shell history would not work else
set -o history
for i in `seq $1 $2`;
do
    history -d $i
done
history -w 
```

你会在哪里唤起这样的：

```
./nameOfYourScript 563 514 
```

请注意，我没有对边界进行任何错误检查。我将把它作为练习留给读者。

另见[这个问题](https://askubuntu.com/questions/572933/why-isnt-this-linux-script-from-so-working-on-my-computer/572996?noredirect=1#comment790149_572996)

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2017-10-27T12:17:17.920

也许对某人有用。
当您登录到当前会话的任何控制台/终端历史记录的任何用户时，仅存在于某些“缓冲区”中，该缓冲区在您注销时刷新到 ~/.bash_history。
因此，为了保密，您可以：
`history -r && exit`
您将被注销，所有会话的（并且唯一的）历史记录都会被清除；）

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2018-12-21T15:10:28.280

我使用了此线程中共享的解决方案组合来擦除命令历史记录中的跟踪。首先，我验证了保存命令历史的位置：

```
echo $HISTFILE 
```

我编辑了历史：

```
vi <pathToFile> 
```

之后，我使用以下命令刷新当前会话历史缓冲区：

```
history -r && exit 
```

下次您进入此会话时，您将在命令历史记录中看到的最后一个命令是您留在*pathToFile*上的最后一个命令。

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2020-12-12T08:29:34.303

不是直接要求的答案，而是问题的根本原因：

您还可以通过在命令前加上空格字符来阻止命令**进入历史记录：**

```
# This command will be in the history
echo Hello world

# This will not
 echo Hello world 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-06-03T14:34:19.793

简短但甜蜜：`for i in {1..10}; do history -d $(($HISTCMD-11)); done`

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-05-27T12:13:08.470

删除最后 10 个条目（根据您的示例）：

```
history -d 511 520 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2020-06-17T11:50:41.833

```
history -d 511;history -d 511;history -d 511;history -d 511;history -d 511;history -d 511;history -d 511;history -d 511;history -d 511;history -d 511; 
```

粗鲁但实用

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-02-28T12:27:23.627

我用这个（我有 bash 4）：

```
histrm() {
    local num=${1:- 1}
    builtin history -d $(builtin history | sed -rn '$s/^[^[:digit:]]+([[:digit:]]+)[^[:digit:]].*$/\1/p')
    (( num-- )) && $FUNCNAME $num
    builtin history -w
} 
```

`builtin history`部分和最后一部分是`-w`因为我有一个著名[技巧的变体来跨终端共享历史，](https://unix.stackexchange.com/questions/1288/preserve-bash-history-in-multiple-terminal-windows)如果没有这些部分，这个功能就会失效。他们确保调用真正的`history`内置 bash（而不是我自己的包装器），并在删除条目后立即将历史记录写入 HISTFILE。

但是，这将与“正常”历史配置一样工作。

您应该使用要删除的最后条目数来调用它，例如：

```
histrm 10 
```

将删除最后 10 个条目。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-05-02T09:20:42.220

history -c 将清除所有历史记录。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2018-09-11T14:35:10.277

我使用此脚本删除历史记录中的最后 10 个命令：

```
pos=$HISTCMD; start=$(( $pos-11 )); end=$(( $pos-1 )); for i in $(eval echo "{${start}..${end}}"); do history -d $start; done 
```

它使用`$HISTCMD`环境变量来获取历史索引，并使用它来删除最后 10 个条目`history`。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-01-15T07:55:23.940

尝试以下操作：

```
for i in {511..520}; do history -d $i; echo "history -d $i"; done 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-11-30T15:53:29.993

```
for h in $(seq $(history | tail -1 | awk '{print $1-N}')  $(history | tail -1 | awk '{print $1}') | tac); do history -d $h; done; history -d $(history | tail -1 | awk '{print $1}') 
```

如果要删除 10 行，只需将 N 的值更改为 10。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2022-02-16T23:07:15.407

`history -d`arg 取一个范围，`$HISTCMD`是历史记录中的最大数字。

此函数用于`n`从历史记录中删除最后的条目（只需传入要删除的历史命令的数量，例如`rmhist 5`）：

```
$ rmhist()  { history -d $(($HISTCMD - $1))-$HISTCMD ;} 
```

或者.. 使用这样的 arg 来从历史上的某个点（包括）或最后一个“n”命令中删除：

```
rmhist() { 
  case $1 in 
    --from|from) local start=$2; ;; 
    --last|last) local start=$(($HISTCMD - $2)) ;; 
    *) echo "Try rmhist --from # or rmhist --last n "; return ;; 
  esac; 
  history -d ${start}-${HISTCMD}
} 
```

结果如下所示：

```
 5778  ls /etc
 5779  ls /tmp
 5780  ls /dev
 5781  ll
 5782  cd /tmp
 5783  cd
 5784  history
(base) ~ $ rmhist --last 3
(base) ~ $ history 5
 5778  ls /etc
 5779  ls /tmp
 5780  ls /dev
 5781  ll
 5782  history 5
(base) ~ $ rmhist --from 5780
(base) ~ $ history 5
 5776  history 10
 5777  ls
 5778  ls /etc
 5779  ls /tmp
 5780  history 5 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-05-31T22:34:19.593

一个简单的函数可以按数字杀死所有人（尽管它会出错）

```
kill_hist() {
    for i in $(echo $@ | sed -e 's/ /\n/g;' | sort -rn | sed -e 's/\n/ /;')
    do
            history -d $i;
    done
}
kill_hist `seq 511 520`
# or kill a few ranges
kill_hist `seq 1001 1010` `seq 1200 1201` 
```

# java - R xlsx 错误：java.lang.NoClassDefFoundError：无法初始化类 sun.java2d.Disposer

> ID：14750653
> 
> 赞同：0
> 
> 时间：2013-02-07T12:02:12.130
> 
> 标签：java, r

我正在使用 xlsx 包在 R 中编写 Excel 文件：

```
library('xlsx')

df.test <- iris[1:5, ]

wb <- createWorkbook()

sheet1 <- createSheet(wb, 'Indirect Sales')

addPicture('trend_indirect.png' ,sheet1)

addDataFrame(df.test ,sheet1, startRow=22)

saveWorkbook(wb, file="stack_test.xlsx") 
```

当我到达 addPicture 时，我收到以下错误：

> addDataFrame(df.test ,sheet1, startRow=22) .jcall 中的错误("RJavaTools", "Z", "hasField", .jcast(x, "java/lang/Object"), : java.lang.NoClassDefFoundError:无法初始化类 sun.java2d.Disposer

R 版本 2.15.2，32 位。该图像只是保存在 png 中的简单 ggplot 图。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:34:22.567

看到这个：

[在 R 中写入 xlsx 时出错：无法初始化类 sun.java2d.Disposer](https://stackoverflow.com/questions/14144837/error-writing-xlsx-in-r-could-not-initialize-class-sun-java2d-disposer/16091526#16091526)

尝试安装 libxtst，如果不这样做，可能还安装 fontconfig 和 libcups。

# arm - 如何使用uvision（Keil）重新定位向量表并更改cortexm3中的起始地址？

> ID：14750655
> 
> 赞同：6
> 
> 时间：2013-02-07T12:02:25.670
> 
> 标签：arm, cortex-m3, keil

我正在使用 STM32F107 cortex m3 微控制器。我正在为该项目使用 Keil uvision IDE。我有一个在起始位置正常运行的应用程序，即`0x0800 0000`. 如果我将起始位置更改`0x0800 4000`为应用程序无法正常工作。我使用此函数对向量表位置进行了更改，如下所示：

```
NVIC_SetVectorTable(NVIC_VectTab_FLASH, 0x8004000) 
```

即更改`SCB->VTOR = 0x8004000`为这个位置。

但即使在做了这个中断之后也没有发生。我应该做更多的事情来使这个项目工作吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-01T05:04:45.943

你不应该使用`NVIC_SetVectorTable(NVIC_VectTab_FLASH, 0x8004000)`，使用`NVIC_SetVectorTable(NVIC_VectTab_FLASH, 0x4000)`。第二个参数是“偏移量”，而不是绝对地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-26T07:20:20.537

在 HAL_Init() 之后添加以下指令；

SCB->VTOR = (FLASH_BASE | 0x4000);

您还需要更新 STM32F1xc_flash.icf 文件中的中断向量地址，如下所示。

定义符号**ICFEDIT_intvec_start** = 0x08004000;

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-08-01T18:18:10.297

我为我的 STM32L496 做了这个，在调用 HAL_Init() 之前设置新的向量表很重要，因为它调用了 HAL_MspInit()，它可能在设置一些外设时使用 SysTick 来测量超时。

# javascript - JavaScript：为什么 onKeyDown 和 onKeyUp 在 onFocus 在此代码中工作时不起作用

> ID：14750657
> 
> 赞同：0
> 
> 时间：2013-02-07T12:02:44.433
> 
> 标签：javascript

```
function PrepareCounter() {
    var ct = 1;
    while(document.getElementById("id_answer"+ct)) {
        document.getElementById("id_answer"+ct).setAttribute("onFocus", "countChars('textbox','char_count',140)", "onKeyDown", "countChars('textbox','char_count',140)", "onKeyUp", "countChars('textbox','char_count',140)");
        ct += 1;
    }
} 
```

如果我专注于我的元素`countChars`被执行，但如果我写一些东西它不是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:07:45.397

`setAttribute`只需要 2 个参数，您必须分别调用每个参数。

您可以使用实函数，而不是使用字符串：

```
function PrepareCounter() {
    var ct = 1;
    var elem;
    while (elem = document.getElementById("id_answer" + ct)) {
        elem.onfocus = elem.onkeydown = elem.onkeyup = function() {
            countChars('textbox', 'char_count', 140);
        };
        ct += 1;
    }
} 
```

# html - html中标签项（类）的正则表达式

> ID：14750659
> 
> 赞同：0
> 
> 时间：2013-02-07T12:02:51.990
> 
> 标签：html, regex, python-2.7, web-scraping, beautifulsoup

我对python和编程很陌生；-)，我正在编写一个程序来从只有一页的6000多行的网站上抓取数据，而我将抓取大约2000万条数据. 我正在使用 python 2.7.4

我看过一些关于如何使用正则表达式的教程，但它对我不起作用。我正在使用 Beautiful Soup 来查找特定的标签，实际上我需要找到这样的标签：

```
<tr class="room_loop_counter1 maintr">
<tr class="room_loop_counter1 extendedRow">
<tr class="room_loop_counter2 maintr odd">
<tr class="room_loop_counter2 extendedRow odd">
<tr class="room_loop_counter3 maintr">
<tr data-occupancy="2" class="room_loop_counter1 ">
<tr data-occupancy="2" class="room_loop_counter2 odd">
<tr data-occupancy="3" class="room_loop_counter3 ">
<tr data-occupancy="3" class="room_loop_counter4 odd"> 
```

等等。我不确定 room_loop_counter1,3 之后引号前面的空格。

我试图编写一个适合下一行代码的表达式：

```
soup = BeautifulSoup(html_part)

av = soup.find_all('tr', class_=REGULAR_EXP)

REGULAR_EXP = re.compile('"room_loop_counter"\d\s.') 
```

但我显然为类写了错误的正则表达式

如何写一个有效的？我想它应该是一个表达式，它找到所有“room_loop_counter”后跟任意数量的字符（数字、空格、字母，但不是换行符）提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:15:22.447

最后使用 a 代替`.`表示一个字符的点（），`.*`这表示任意数量的字符。这应该够了吧。所以你的代码将变成：

```
REGULAR_EXP = re.compile('"room_loop_counter"\d\s.*') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:09:16.767

以下正则表达式**查找所有“room_loop_counter”后跟任意数量的字符（数字、空格、字母，但不是换行符）**：

```
room_loop_counter[A-Za-z\d\s]* 
```

您的正则表达式`"room_loop_counter"\d\s.`匹配`"room_loop_counter"`（注意括起来的引号）后跟一个数字，后跟一个空格，然后是任何字符。

所以它匹配`"room_loop_counter"1 x`但`"room_loop_counter"3 !`不匹配`"room_loop_counter1"`

# python - 从字符串中删除字母

> ID：14750675
> 
> 赞同：7
> 
> 时间：2013-02-07T12:03:45.823
> 
> 标签：python

我有像'12454v'，'346346z'这样的字符串。我想从字符串中删除所有字母。

重新工作正常：

```
import re
str='12454v'
re.sub('[^0-9]','', str)

#return '12454' 
```

有没有办法在不使用正则表达式的情况下做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T12:08:22.197

```
>>> ''.join(filter(str.isdigit, '12454v'))
'12454' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T12:07:17.257

在 python 2 中，该`translate`方法的第二个参数允许您指定要删除的字符

[http://docs.python.org/2/library/stdtypes.html#str.translate](http://docs.python.org/2/library/stdtypes.html#str.translate)

给出的示例表明您可以将`None`其用作翻译表来*仅*删除字符：

```
>>> 'read this short text'.translate(None, 'aeiou')
'rd ths shrt txt' 
```

（您可以从字符串模块中获取所有 ASCII 字母的列表`string.letters`。）

**更新**：Python 3 也有一个`translate`方法，尽管它需要稍微不同的设置：

```
from string import ascii_letters
tr_table = str.maketrans({c:None for c in ascii_letters})
'12345v'.transate(tr_table) 
```

作为记录，在 Python 2 中使用翻译表*比*join/filter 方法*快得多*：

 *```
>>> timeit("''.join(filter(lambda c:not c.isalpha(), '12454v'))")
2.698641061782837
>>> timeit("''.join(filter(str.isdigit, '12454v'))") 
1.9351119995117188
>>> timeit("'12454v'.translate(None, string.letters)", "import string")
0.38182711601257324 
```

在 Python 3 中也是如此：

```
>>> timeit("'12454v'.translate(tr_table)", "import string; tr_table=str.maketrans({c:None for c in string.ascii_letters})")
0.6507143080000333
>>> timeit("''.join(filter(lambda c:not c.isalpha(), '12454v'))")
2.436105844999929 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T12:09:43.687

我想你可以试试这个`.translate`方法。

```
>>> import string
>>> str='12454v'
>>> str.translate(None, string.letters)
'12454' 
```

`.translate`关于方法[here](https://stackoverflow.com/questions/1450897/python-removing-characters-except-digits-from-string)有一个很好的答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T13:28:02.510

这比其他的不太优雅，因为它没有使用特定的函数并且有点笨重：

```
newStr = ''
myStr='12454v'
for char in myStr:
    try:
        newStr += str(int(char))
    except ValueError:
        pass
print newStr 
```

同样，这不是最好的方法，但我只是把它扔在那里。我将它转换为`int`第一个，以便它可以检查是否是整数。然后，我将其转换为 a`str`以便可以将其添加到`newStr`.

另一方面，您不应该将`str`其用作变量名，因为它会影响内置函数`str()`。*

# android - “我在列表视图行中有按钮和文本视图”，我想在同一行中“单击按钮时更新文本视图值”？

> ID：14750686
> 
> 赞同：0
> 
> 时间：2013-02-07T12:04:06.213
> 
> 标签：android, listview, button, textview

`textview`单击列表视图行中的按钮时，如何添加获取该参考？

**------------------------------------

`TextView` `Button`

---------------------------------**

这是我的列表视图的示例。我已经使用 View Holder 概念来`listview`动态操作。如果我点击按钮，`textview`想要改变的值。

我曾尝试`texview`在单击按钮时更改值的值，但它会更新`textview`我单击的每个按钮的最后一行值。谢谢并恭祝安康。

最后我得到了以下答案：

```
public void onClick(View v) {
    // TODO Auto-generated method stub

    LinearLayout layout=(LinearLayout) v.getParent();
    TextView text=(TextView)layout.findViewById(R.id.qcountHD);
    if (view.inc.getId() == v.getId()) {
        int count = Integer.parseInt(text.getText().toString());
        text.setText("" + (++count));
    } else if (view.dec.getId() == v.getId()) {
        int count = Integer.parseInt(text.getText().toString());
        if (!(count == 0)) {
            text.setText("" + (--count));
        }
    }
} 
```

感谢您的支持.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T04:14:28.513

最后我得到了答案，我们可以使用父布局获取任何子引用。当您单击按钮时，它会指向当前父级和子级。

```
public void onClick(View v) {
        // TODO Auto-generated method stub

    RelativeLayout layout=(RelativeLayout) v.getParent();
    TextView text=(TextView)layout.findViewById(R.id.qcountHD);
    TextView product=(TextView)layout.findViewById(R.id.productHD);
    TextView price=(TextView)layout.findViewById(R.id.priceHD);

    Log.d("Current Product ",product.getText().toString());
    Log.d("Current Price ",price.getText().toString());
    Log.d("Current Quantity ",text.getText().toString());

    if (view.inc.getId() == v.getId()) {
        int count = Integer.parseInt(text.getText().toString());
        text.setText("" + (++count));
    } else if (view.dec.getId() == v.getId()) {
        int count = Integer.parseInt(text.getText().toString());
        if (!(count == 0)) {
            text.setText("" + (--count));
        }
    }

} 
```

谢谢....

# quartz.net - quartz.net 配置作业类型参数的第二个值是多少？

> ID：14750687
> 
> 赞同：2
> 
> 时间：2013-02-07T12:04:06.497
> 
> 标签：quartz.net, quartz.net-2.0

我正在尝试在我的网络项目中使用 Quartz.net。我这样配置我的应用程序：

```
<job>

  <name>CRMMoreThanOneJob</name>
  <group>jobGroup1</group>
  <job-type>ReportingPortalBLL.Jobs.CRMCalledMoreThanOneJob, ReportingPortalBLL.Jobs</job-type>

  <durable>true</durable>
  <recover>false</recover>
  <job-data-map>
    <entry>
      <key>MessageToLog</key>
      <value>Hello from MyJob</value>
    </entry>
  </job-data-map>
</job> 
```

但由于工作类型声明，它不起作用。我的 Job 类的定义如下，它的命名空间是 ReportingPortalBll.Jobs

```
namespace ReportingPortalBLL.Jobs
{
 public class CRMCalledMoreThanOneJob:IJob
 { .
   .
 }
} 
```

在我将其更改为 ReportingPortalBLL.Jobs.CRMCalledMoreThanOneJob 后，ReportingPortalBLL（没有 .Job）运行良好。

我查看了文档，但找不到 job-type 参数的第二个值表示的内容。我应该在第二个参数上写什么？下面表示的第二个值是什么意思？我将在我的其他项目中使用 Quartz，所以很高兴知道如何轻松配置它。

```
<job-type>Namespace.Job1, secondValue</job-type> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T16:58:44.183

secondValue 对应于程序集名称。

如果您浏览quartz.net 的源代码，您可以看到作业类型作为参数传递给Type.GetType，并且Type.GetType 接受程序集限定名称。类型的程序集限定名称由类型名称（包括其命名空间）、逗号和程序集的显示名称组成。

有关更多信息，请参阅这些链接 [http://msdn.microsoft.com/en-us/library/c5cf8k43.aspx](http://msdn.microsoft.com/en-us/library/c5cf8k43.aspx) [http://msdn.microsoft.com/en-us/library/system.type.assemblyqualifiedname.aspx](http://msdn.microsoft.com/en-us/library/system.type.assemblyqualifiedname.aspx)

# ios - 如何在控制器出现时初始化对象而不用 GCD 阻塞 UI

> ID：14750688
> 
> 赞同：3
> 
> 时间：2013-02-07T12:04:14.753
> 
> 标签：ios, grand-central-dispatch

在我的应用程序中，我需要在点击按钮时显示 UIImagePickerController。这是我在控制器上的按钮被按下时调用的方法中使用的代码：

```
- (IBAction)choosePressed:(id)sender {
    if (!self.pickerController) self.pickerController = [[UIImagePickerController alloc]init];
        self.pickerController.delegate = self;
        self.pickerController.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
        [self.navigationController presentViewController:self.pickerController animated:YES completion:nil];
} 
```

问题是 UIImagePickerControllers 加载速度很慢，所以我认为在`viewDidAppear:animated`方法中移动选取器的初始化，可能在另一个线程中，将是加快选取器创建/显示过程的好方法，所以我这样做了：

```
-(void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    dispatch_queue_t myQueue = dispatch_queue_create("Picker Queue", NULL);
    dispatch_async(myQueue, ^{
    self.pickerController = [[UIImagePickerController alloc]init];
    self.pickerController.delegate = self;
    });
}

- (IBAction)choosePressed:(id)sender {
    self.pickerController.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
    [self.navigationController presentViewController:self.pickerController animated:YES completion:nil];
} 
```

这样，当按下按钮时，pickerController 会立即显示，但是当加载主控制器时，UI 会冻结一点（可能是因为 pickerController 的初始化），但是由于我使用了 dispatch_async，所以应该在另一个线程中完成初始化机制不应该吗？我的代码有什么错误吗？

我对 GCD 很陌生，所以我一定遗漏了一些东西！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T18:07:12.497

从后台线程访问它是对 UIKit 的滥用。您或许可以短暂显示“正在加载...”屏幕。我认为最好的策略是不要担心它。

# image - 图像样式取决于视图上的分类术语drupal 7

> ID：14750690
> 
> 赞同：0
> 
> 时间：2013-02-07T12:04:24.047
> 
> 标签：image, drupal-7, views, user-profile

我有一个列出站点中所有用户的视图，我想根据用户的类别（这是一个分类术语）更改用户图片显示样式我尝试使用类别名称将 CSS 类添加到图片中（通过重写字段），但这将即时重新调整图像大小，这将首先增加加载时间，第二张图像可能会被像素化有关如何使其可用的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:12:34.450

我只能建议[创建一个 PHP 字段](http://eureka.ykyuen.info/2012/03/10/drupal-7-add-php-field-to-view/)并在那里设置一个条件。

# javascript - UIWebview 打开新窗口

> ID：14750691
> 
> 赞同：0
> 
> 时间：2013-02-07T12:04:28.013
> 
> 标签：javascript, iphone, uiwebview, popup

我有一个动态创建表单元素并提交到新窗口的第三方网页...

有什么方法可以让我知道网页打开新窗口？

这是示例代码。

```
function open_new_window(target){
      var postForm = document.createElement("form");
      postForm.setAttribute("name","printForm");
                  postForm.setAttribute("action","testpage?timeInMillis=" + new Date().getTime());
      postForm.setAttribute("target",target);
      postForm.setAttribute("method","post");

//other code....

      var parent = document.getElementById(parentId);
      parent.appendChild(postForm);
      postForm.submit();
      parent.removeChild(postForm);
    } 
```

我尝试了很多方法并进行了搜索-但没有得到任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:45:54.990

看看 UIWevViewDelegae，特别是在

```
webView:shouldStartLoadWithRequest:navigationType: 
```

在这里，您可以检测到哪个 URL webview 即将加载并采取相应措施。

# python - 为什么Python3.2不能deepcopy(globals())？

> ID：14750692
> 
> 赞同：0
> 
> 时间：2013-02-07T12:04:42.390
> 
> 标签：python, deep-copy

我在 python 3.2.2 IDLE 中运行了这些代码：

```
from copy import deepcopy
deepcopy(globals()) 
```

我收到错误消息：

```
Traceback (most recent call last):
  File "H:\　  　 　\python\copy deepcopy.py", line 27, in <module>
    deepcopy(globals())
  File "D:\Program Files\Python32\lib\copy.py", line 147, in deepcopy
    y = copier(x, memo)
  File "D:\Program Files\Python32\lib\copy.py", line 236, in _deepcopy_dict
    y[deepcopy(key, memo)] = deepcopy(value, memo)
  File "D:\Program Files\Python32\lib\copy.py", line 174, in deepcopy
    y = _reconstruct(x, rv, 1, memo)
  File "D:\Program Files\Python32\lib\copy.py", line 290, in _reconstruct
    state = deepcopy(state, memo)
  File "D:\Program Files\Python32\lib\copy.py", line 147, in deepcopy
    y = copier(x, memo)
  File "D:\Program Files\Python32\lib\copy.py", line 236, in _deepcopy_dict
    y[deepcopy(key, memo)] = deepcopy(value, memo)
  File "D:\Program Files\Python32\lib\copy.py", line 174, in deepcopy
    y = _reconstruct(x, rv, 1, memo)
  File "D:\Program Files\Python32\lib\copy.py", line 285, in _reconstruct
    y = callable(*args)
  File "D:\Program Files\Python32\lib\copyreg.py", line 88, in __newobj__
    return cls.__new__(cls, *args)
TypeError: object.__new__(NotImplementedType) is not safe, use NotImplementedType.__new__() 
```

所以我不知道为什么我们不能对 globals() 做 deepcopy()？

因为 deepcopy() 在执行时会更改全局字典？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:06:43.920

不，这不是因为`deepcopy`在执行时更改了 globals dict，而是正如异常所示，在它的过程中，它遇到了特殊的`NotImplemented` [内置常量](http://docs.python.org/3.2/library/constants.html)`NotImplementedType`，它无法实例化并因此复制的类型元素。

# android - 使用传感器数据的Android opengl旋转

> ID：14750698
> 
> 赞同：4
> 
> 时间：2013-02-07T12:05:03.500
> 
> 标签：android, opengl-es, matrix, augmented-reality, sensors

我尝试在相机预览顶部创建一个带有 opengl 视图的增强现实应用程序。我获得了相机预览和 opengl 视图，我从传感器管理器收集传感器数据，然后创建旋转矩阵以将其应用于我的 opengl 视图。到目前为止，一切都很好。我只使用横向手机方向。但这是我的问题：

我正在使用来自传感器的旋转矩阵，将其应用于 opengl，然后我想绘制我的模型，这些模型在 (0,0,0) 点周围不断移动。但是当我旋转我的手机时，我当然可以跟随我的对象移动，但是当我改变方向时（假设我向右旋转我的手机，然后将它改为相反 - 左。此时我的对象应该在他的路径上移动，但是他呆在原地，几乎没有后退。

我的代码和手机屏幕：

```
 private float[] rotationMatrix = new float[16];

onDrawFrame:
moveObjects(smoothedDeltaRealTime_ms);
gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
gl.glLoadIdentity();
gl.glMultMatrixf(rotationMatrix, 0);
gl.glRotatef(90.0f, 1f, 0f, 0f);
drawObjects(gl);

 @Override
public void onSurfaceChanged(GL10 gl, int width, int height) {

    ArOpenGlLogger.info("onSurfaceChanged " + width + "x" + height);

    this.screenWidth = width;
    this.screenHeight = height;

    gl.glClearColor(0.0f, 0.0f, 0.0f, 0.0f); // Set color's clear-value 
    gl.glClearDepthf(1.0f); // Set depth's clear-value to farthest
    gl.glEnable(GL10.GL_DEPTH_TEST);   // Enables depth-buffer for hidden surface removal
    gl.glDepthFunc(GL10.GL_LEQUAL);      // The type of depth testing to do

    gl.glViewport(0, 0, width, height);
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glLoadIdentity();

    GLU.gluPerspective(gl, 45.0f, (float) width / (float) height, 0.1f, 100.0f);

    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glLoadIdentity();

    gl.glShadeModel(GL10.GL_SMOOTH);    // Enable smooth shading of color
    gl.glDisable(GL10.GL_DITHER);   // Disable dithering for better performance
    gl.glEnable(GL10.GL_TEXTURE_2D);    // Enable texture
}

  protected void draw(GL10 gl) {

    //loading textures
    if(!isTextureLoaded) loadTexture(gl);

    gl.glTranslatef(translation.getX(), translation.getY(), translation.getZ());
    gl.glScalef(scale.getX(), scale.getY(), scale.getZ());

    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);  
    gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertexBuffer);
    gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, textureBuffer); 

    gl.glDrawArrays(GL10.GL_TRIANGLES, 0, vertices.length / 3);

    gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
    gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);

} 
```

传感器：

```
 rootMeanSquareBuffer(bufferedAccelerometrData, accelerometrData);
        rootMeanSquareBuffer(bufferedMagneticFieldData, magneticFieldData);
        SensorManager.getRotationMatrix(rotationMatrix, null, bufferedAccelerometrData, bufferedMagneticFieldData);

        if(deviceOrientation == ORIENTATION_LANDSCAPE) {

            float[] result = new float[16];
            SensorManager.remapCoordinateSystem(rotationMatrix, SensorManager.AXIS_Y, SensorManager.AXIS_MINUS_X, result);

            sensorCallback.onNewRotationMatrix(result);
        }
        else sensorCallback.onNewRotationMatrix(rotationMatrix);

  private void rootMeanSquareBuffer(float[] target, float[] values) {

      final float amplification = 200.0f;
      float buffer = 20.0f;

      target[0] += amplification;
      target[1] += amplification;
      target[2] += amplification;
      values[0] += amplification;
      values[1] += amplification;
      values[2] += amplification;

      target[0] = (float) (Math.sqrt((target[0] * target[0] * buffer + values[0] * values[0]) / (1 + buffer)));
      target[1] = (float) (Math.sqrt((target[1] * target[1] * buffer + values[1] * values[1]) / (1 + buffer)));
      target[2] = (float) (Math.sqrt((target[2] * target[2] * buffer + values[2] * values[2]) / (1 + buffer)));

      target[0] -= amplification;
      target[1] -= amplification;
      target[2] -= amplification;
      values[0] -= amplification;
      values[1] -= amplification;
      values[2] -= amplification;
} 
```

设备屏幕： ![http://i.imgur.com/JJIyohL.png](../Images/413acd7d8461e55439c971a8f472eff6.png)

# c++ - GLPK API 中“glpsol”的等价物

> ID：14750704
> 
> 赞同：1
> 
> 时间：2013-02-07T12:05:26.527
> 
> 标签：c++, linear-programming, glpk, mathprog

我想知道命令行函数“glpsol”的 GLPK Api 中是否有等效项。

因为我有一个模型，它写在 .mod 文件中，数据写在 .dat 文件中。在命令行中，我可以通过调用此行来解决它：

```
glpsol --model flow-glpk.mod --data your_data_set.dat 
```

我想在不执行“execv()”调用的情况下解决 C/C++ 程序中的相同问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:15:01.797

看看[源代码发行版](http://ftp.gnu.org/gnu/glpk/)的示例目录中的 mplsamp2.c ，我相信它可以满足您的需求，您只需将硬编码名称更改为适合您的应用程序。

GLPK 附带一个很好的手册，*3.2 Routines for processing MathProg 模型*详细介绍了如何使用 C API 处理 MathProg 模型。

# python - 如果从源目录导入，则捕获 python 'ImportError'

> ID：14750711
> 
> 赞同：32
> 
> 时间：2013-02-07T12:05:43.407
> 
> 标签：python, exception-handling, importerror

当尝试`foo`在源目录中导入模块时，会收到一条相当混乱的`ImportError`消息：`ImportError: No module named foo`.

我怎样才能轻松地捕捉到这种情况并返回更多信息性消息，例如“请不要从源目录加载模块 foo”？

有了`__init__.py`，我将从：

```
try:
    from _foo import *
except ImportError:
    ## check whether in the source directory... 
```

所以我想区分导致 an 的不同原因（例如，因为根本没有安装`ImportError`名为的模块），并检测位于当前目录中的情况。这样做的优雅方式是什么？`foo``setup.py`

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-07T12:18:43.730

`ImportError: No module named foo`实际上意味着在搜索路径（列表）中的任何目录中都找不到模块`foo.py`或包。`foo/__init__.py``sys.path`

由于`sys.path`通常包含`.`（当前目录），这可能就是您*在源目录中的*意思。您位于 package 的顶级目录`foo`（`__init__.py`文件所在的位置），所以显然您找不到`foo/__init__.py`.

最后，您或多或少地回答了您自己的问题：

```
try:
    from _foo import *
except ImportError:
    raise ImportError('<any message you want here>') 
```

或者，您可以检查`sys.path`当前目录的内容，如果已知，还可以检查预期的包目录，并生成更详细和上下文感知的消息。

或者添加`..`到`PYTHONPATH`环境变量（在 Unix 上）以允许您从源目录运行。甚至可以在 Windows 上工作，但我不知道。

# java - 仅从工作区选择文件的 SWT 组件

> ID：14750712
> 
> 赞同：3
> 
> 时间：2013-02-07T12:05:54.870
> 
> 标签：java, eclipse-plugin, swt

我使用 SWT 和 Eclipse 的插件。我只需要从工作区中选择文件。我在工作区创建了选择目录的组件，在文件系统中创建了选择文件的组件，但我还没有找到从工作区选择文件的组件。

现在我正在使用`org.eclipse.swt.widgets.FileDialog`并设置 filter `setFilterPath(Platform.getLocation().toOSString())`。但是用户可以选择不在工作区中的其他文件。他们应该只能在工作空间内设置文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T14:49:36.550

感谢您的回答。我创建自己的组件并使用它。我还为选择文件添加了过滤器。

```
import java.util.ArrayList;
import java.util.List;

import org.eclipse.core.resources.IContainer;
import org.eclipse.core.resources.IFile;
import org.eclipse.core.resources.IProject;
import org.eclipse.core.resources.IResource;
import org.eclipse.core.resources.ResourcesPlugin;
import org.eclipse.core.runtime.CoreException;
import org.eclipse.core.runtime.IStatus;
import org.eclipse.core.runtime.Status;
import org.eclipse.jface.viewers.ILabelProvider;
import org.eclipse.jface.viewers.ITreeContentProvider;
import org.eclipse.jface.viewers.Viewer;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.ui.dialogs.ElementTreeSelectionDialog;
import org.eclipse.ui.dialogs.ISelectionStatusValidator;
import org.eclipse.ui.model.WorkbenchLabelProvider;

/**
 * @author Alexey Prybytkouski
 */
public class ResourceFileSelectionDialog extends ElementTreeSelectionDialog {

    private String[] extensions;

    private static ITreeContentProvider contentProvider = new ITreeContentProvider() {
        public Object[] getChildren(Object element) {
            if (element instanceof IContainer) {
                try {
                    return ((IContainer) element).members();
                }
                catch (CoreException e) {
                }
            }
            return null;
        }

        public Object getParent(Object element) {
            return ((IResource) element).getParent();
        }

        public boolean hasChildren(Object element) {
            return element instanceof IContainer;
        }

        public Object[] getElements(Object input) {
            return (Object[]) input;
        }

        public void dispose() {
        }

        public void inputChanged(Viewer viewer, Object oldInput, Object newInput) {
        }
    };

    private static final IStatus OK = new Status(IStatus.OK, PLUGIN_ID, 0, "", null);
    private static final IStatus ERROR = new Status(IStatus.ERROR, PLUGIN_ID, 0, "", null);

    /*
     * Validator
     */
    private ISelectionStatusValidator validator = new ISelectionStatusValidator() {
        public IStatus validate(Object[] selection) {
            return selection.length == 1 && selection[0] instanceof IFile
                    && checkExtension(((IFile) selection[0]).getFileExtension()) ? OK : ERROR;
        }
    };

    public ResourceFileSelectionDialog(String title, String message, String[] type) {
        this(Display.getDefault().getActiveShell(), WorkbenchLabelProvider.getDecoratingWorkbenchLabelProvider(),
                contentProvider);
        this.extensions = type;

        setTitle(title);
        setMessage(message);

        setInput(computeInput());
        setValidator(validator);
    }

    public ResourceFileSelectionDialog(Shell parent, ILabelProvider labelProvider, ITreeContentProvider contentProvider) {
        super(parent, labelProvider, contentProvider);
    }

    /*
     * Show projects
     */
    private Object[] computeInput() {
        /*
         * Refresh projects tree.
         */
        IProject[] projects = ResourcesPlugin.getWorkspace().getRoot().getProjects();
        for (int i = 0; i < projects.length; i++) {
            try {
                projects[i].refreshLocal(IResource.DEPTH_INFINITE, null);
            } catch (CoreException e) {
                e.printStackTrace();
            }
        }

        try {
            ResourcesPlugin.getWorkspace().getRoot().refreshLocal(IResource.DEPTH_ONE, null);
        } catch (CoreException e) {
        }
        List<IProject> openProjects = new ArrayList<IProject>(projects.length);
        for (int i = 0; i < projects.length; i++) {
            if (projects[i].isOpen()) {
                openProjects.add(projects[i]);
            }
        }
        return openProjects.toArray();
    }

    /*
     * Check file extension
     */
    private boolean checkExtension(String name) {
        if (name.equals("*")) {
            return true;
        }

        for (int i = 0; i < extensions.length; i++) {
            if (extensions[i].equals(name)) {
                return true;
            }
        }
        return false;
    }
} 
```

并致电：

```
ResourceFileSelectionDialog dialog = new ResourceFileSelectionDialog("Title", "Message", new String[] { "properties" });
dialog.open(); 
```

![示例1](../Images/ade0850fc81c655ece2c4a1c654f6142.png)

![示例2](../Images/4f72f1e4b9a532f7f4a909fabf8682da.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T19:04:43.180

尝试这个。有了这个，您应该能够浏览工作区。

您需要添加`eclipse.ui` 和`resources`插件作为依赖项。

```
ElementTreeSelectionDialog dialog = new ElementTreeSelectionDialog(
    Display.getDefault().getActiveShell(), 
    new WorkbenchLabelProvider(), 
    new BaseWorkbenchContentProvider());

dialog.open(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T13:21:59.773

我不知道有任何 SWT 组件可以为您提供对用户交互的那种控制。

所以，我认为这里最好的解决方案是：

您可以开发一个读取文件夹内容的窗口，将其显示给用户，并且除了根文件夹的子文件夹（在您的情况下为工作区文件夹）之外，不给他任何导航可能性。

请参阅此示例： [http ://www.ibm.com/developerworks/opensource/library/os-ecgui1/](http://www.ibm.com/developerworks/opensource/library/os-ecgui1/) [http://www.ibm.com/developerworks/library/os-ecgui2/](http://www.ibm.com/developerworks/library/os-ecgui2/)

# php - Elgg 不断让用户重新登录

> ID：14750717
> 
> 赞同：1
> 
> 时间：2013-02-07T12:06:12.117
> 
> 标签：php, logout, elgg

我一直在 elgg 网站上工作，但发现每当我注销时，会话似乎都没有被清除，我会在几秒钟内重新登录。我必须删除浏览器历史记录才能保持退出状态。

我已经禁用了我正在使用的社交登录插件，但仍然出现同样的问题。

有没有其他人经历过这种情况，有没有人知道我可以如何强制 Elgg 在注销时完全清除用户会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:36:32.343

问题是由 ColdTrick 的“profile_manager”插件引起的。我通过禁用插件来缩小范围，然后一旦发现有问题的项目，我就尝试更改其加载位置。通过将其放在插件列表的最后，问题已解决。

谢谢。

# jquery - 如何知道 CSS 样式是否完全应用于动态添加的内容

> ID：14750718
> 
> 赞同：0
> 
> 时间：2013-02-07T12:06:12.063
> 
> 标签：jquery, html, css

案例：内容被动态添加到某个div（使用jquery）。内容包含大量元素（比如 1000 个 div）。

然后我需要计算元素的正确尺寸（实际上我需要以 px 为单位的顶部位置，所以我使用 jquery position() 函数）。首先，我在添加内容后立即开始计算。

问题是有时顶部位置计算不正确我相信（并且非常肯定）这是因为尚未正确应用于该内容的 css 样式。

我试图解决这个问题，在添加内容后一些超时（使用 setTimeout）后开始调用。我使用的超时时间越长（我测试了 20 到 500 毫秒），浏览器应用样式的时间就越多，计算错误的可能性就越小。

问题是这个超时解决方案不是 100% 可靠和安全的，我需要使用相当大的超时来确保进程的正确性，这可能会降低进程的整体性能。

所以我需要知道什么时候样式被完全应用，什么时候我可以开始位置计算。你有什么建议，有什么可靠的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T03:37:53.003

我弄清楚问题出在哪里，它是动态应用的页面样式（动态创建的样式标签），尽管在将此样式添加到页面后需要等待超时。如果超时时间不够，有时位置计算仍然可能失败。虽然不是最可靠的策略-(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:10:44.730

使用 Firebug 或 Google Chrome 开发工具？右键单击问题区域并选择“检查元素”将显示 jQuery 或任何其他 Javascript 完成其操作之后的代码。

为了查看jQuery 执行所需操作需要**多长时间（即在您的 CPU 上），您可以保持 Google Chrome 开发工具代码检查器打开，刷新页面并希望看到代码更改或不更改。**这是我会做的方式。

# c# - 基于参数选择 WebService 的最有效方法

> ID：14750719
> 
> 赞同：0
> 
> 时间：2013-02-07T12:06:18.700
> 
> 标签：c#, asp.net, web-services

我目前有一个 ASP.NET `WebService1.asmx`。

这用于`SqlConnection`与 Sql Server 通信。

我现在已经创建了`WebServiceDB2.asmx`哪些使用`OdbcConnection`.

我将从前端传入一个参数以确定我使用的服务。

因此，例如，在这背后的代码中，我将如何进行常规的 Web 服务调用-

```
protected void deleteButton_Click(object sender, EventArgs e)
    {
        WebService1 ws = new WebService1();
        ws.deleteTerm(term); 
    } 
```

我的问题是有没有`DB2`比这更有效的方法来实现调用选项 -

```
protected void deleteButton_Click(object sender, EventArgs e)
    {
        if(parameter == "SQL")
        { 
             WebService1 ws = new WebService1();
             ws.deleteTerm(term);
        }
        if(parameter == "DB2")
        { 
             WebServiceDB2 ws = new WebServiceDB2();
             ws.deleteTerm(term);
        } 
    } 
```

因为这会使我的代码翻倍，并且我会定期在网站的所有页面中调用 Web 服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:09:12.570

您可以在项目中的方法中提取此检查，该方法也接受服务器的参数。

```
public void DeleteTerm(string term, string Server)
{
   if(Server == "SQL")
    { 
         WebService1 ws = new WebService1();
         ws.deleteTerm(term);
    }
    if(Server == "DB2")
    { 
         WebServiceDB2 ws = new WebServiceDB2();
         ws.deleteTerm(term);
    } 
} 
```

然后以后你可以这样称呼它：

```
protected void deleteButton_Click(object sender, EventArgs e)
{
    DeleteTerm(term,paramter);//where parameter is your class level variable. 
} 
```

# paypal - 贝宝自动退款脚本？

> ID：14750720
> 
> 赞同：0
> 
> 时间：2013-02-07T12:06:21.253
> 
> 标签：paypal, paypal-ipn

我需要将交易清单退还给买家，但不是通过进入贝宝帐户手动执行此操作，而是需要从我的网站编写一个脚本，以便它会自动退还这些付款。我必须从表单或链接发送必要详细信息的 URL 是什么。请告诉我一个方法或给我一个正确的链接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T03:25:17.877

您将为此使用[RefundTransaction API](https://www.x.com/developers/paypal/documentation-tools/api/refundtransaction-api-operation-nvp)。如果您还没有订单，您可能还需要使用[TransactionSearch来查找需要退款的订单的交易 ID。](https://www.x.com/developers/paypal/documentation-tools/api/transactionsearch-api-operation-nvp)

# c# - 获取 List 的第一个元素 使用 LINQ 到字符串 []

> ID：14750722
> 
> 赞同：3
> 
> 时间：2013-02-07T12:06:27.850
> 
> 标签：c#, .net, arrays, linq, type-conversion

我有一个字符串数组列表：`List<string[]> myList;`

有什么方法可以获取包含所有元素 string[0] 的字符串数组？像 List myList to string[] 一样，其中元素是 myList[string[0]]

我想这类似于 var result = from x in myList .Take(0) select x

问题 2) 有没有办法在没有 for 循环的情况下将 string[] 转换为 string[1,] ？现在我这样做：

```
for (int i = 0; i < arr.Length; i++)
      range[0, i] = arr[i]; 
```

我需要“这种语法”，因为我正在将列导出到 Excel。我需要一个 object[,] 来做一个`range.set_Value(Type, object[,])`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T12:07:52.597

```
string[] result = myList.Select(arr => arr.FirstOrDefault()).ToArray(); 
```

那是你要找的吗？

`Take(n)`只返回一个最多`n`包含元素的可枚举，所以这显然是错误的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:17:11.230

根据我从您的问题中收集到的信息，这应该足够了：

```
string[] result = (from item in myList select item.FirstOrDefault()).ToArray()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T12:18:53.927

第一部分；

```
var temp = myList.Select(q => q.FirstOrDefault()); 
```

对于第二部分；我认为没有直接的`Linq`语句可以将单维数组转换为多维数组。

# windows-7 - 配置 MySQL 失败，服务未启动 (Windows 7)

> ID：14750724
> 
> 赞同：0
> 
> 时间：2013-02-07T12:06:28.863
> 
> 标签：windows-7, mysql

我正在尝试使用`Mysql5.5.30-win32`. 我安装了它并运行了配置向导，然后在最后一页看到我的向导在尝试启动 mysqld 服务时挂起。

我尝试手动启动mysqld，它说

`InnoDB: Error: log file .\ib_logfile0 is of different size 0 54525952 bytes InnoDB: than specified in the .cnf file 0 115343360 bytes!". Then i tried changing the innodb_log_file_size in my.ini to 52M (==54525952) and start manually again`.

现在它开始了，但如果我运行配置向导，同样的问题也会面临，因为配置向导会覆盖我的**my.ini**文件并更改**innodb_log_file_size**的值。

我该如何解决这个问题？我尝试卸载mysql并完全删除mysql文件夹，但问题仍然存在。

此外，我无法在**mysql5.5文件夹中的任何位置找到任何****ib_logfile0**。那么这个 54525952 值是从哪里得到的呢？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:09:59.480

找到了。实际上 ib_logfile0 在 C:\Progsql seramData\Mysql 文件夹中可用，而 C:\ProgramData 是一个隐藏文件夹。删除 ib_logfile* 文件并配置 mysql 服务工作正常。**

# intellij-idea - 如何判断使用的是哪个特定版本的 JUnit IntelliJ？

> ID：14750725
> 
> 赞同：13
> 
> 时间：2013-02-07T12:06:32.093
> 
> 标签：intellij-idea

我已经开始从事一个已经设置 IntelliJ 环境的大型项目。环境包括JUnit，我可以成功运行单元测试。我已经看到可以指定使用 JUnit 3 或 JUnit 4 的屏幕，但是如何确定使用哪个特定 JUnit 来运行我的测试，例如 JUnit 4.11？

我已经尝试过“打开模块设置”。当我查看“依赖项”选项卡时，我看不到任何与 JUnit 相关的内容，尽管我可以运行 JUnit 测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T13:34:07.627

如果您正在寻找 IntelliJ 附带的 JUnit 库，请查看 Intellij IDEA 安装的 lib/ 目录中的相应 jar。

有关这方面的更多信息，请查看在线文档：

*   [http://www.jetbrains.com/idea/webhelp/configuring-testing-libraries.html](http://www.jetbrains.com/idea/webhelp/configuring-testing-libraries.html)
*   [http://www.jetbrains.com/idea/webhelp/testing.html](http://www.jetbrains.com/idea/webhelp/testing.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-13T20:35:27.717

**使用哪个罐子？**

当您从 IntelliJ 运行 JUnit 时，控制台输出的第一行会显示您的类路径。您可以使用 Ctrl+F 查找任何“junit”引用。

junit-rt.jar 是 JetBrains 可能编写的帮助程序库。通过使用 7-zip 将 jar 作为存档打开，您会发现其中唯一的包在 com.intellij 下

根据[Java：类路径JVM上的多个资源中的哪一个？](https://stackoverflow.com/questions/6644440/java-which-of-multiple-resources-on-classpath-jvm-takes)对 junit.jar 的第一个引用是您将使用的那个。

* * *

**那个罐子是什么版本的？**

一旦您知道正在使用哪个 jar，就有多种方法可以找到版本。一种是使用取自[https://stackoverflow.com/a/16729507/1405720的代码](https://stackoverflow.com/a/16729507/1405720)

```
import junit.runner.Version;

System.out.println("JUnit version is: " + Version.id()); 
```

另一种方法可能是将 jar 作为存档打开，看看是否可以从那里找出它。

# ios - IOS 6.0.1 Safari在iframe中滚动pdf

> ID：14750728
> 
> 赞同：3
> 
> 时间：2013-02-07T12:06:41.767
> 
> 标签：ios, pdf, iframe, mobile-safari

我正在使用我的网页来显示来自 App_Data 的 pdf。

我使用这个html：

```
<iframe src=""  id="iframePDF" style="width:100%; height:93%;z-index:1;></iframe> 
```

和`javascript`

```
$('#iframePDF').attr("src", responseData.TempPath + "#zoom=100&page=1"); 
```

缩放没有缩放页面，我无法滚动。

是否有任何解决方法或解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:25:32.473

您可能可以使用两根手指进行滚动，这对用户来说并不直观。除非您知道内容的大小，否则您无法使该区域可滚动，这是您无法做到的，因为 iOS 不会告诉您。

抱歉，朋友，但是您必须研究像 Cordova (PhoneGap) 提供的解决方案那样的本机或混合应用程序。文件是在 .NET App_Data 中还是在线的其他任何地方都没有关系。

它在您的浏览器中工作的原因是因为它有一个内置的文件查看器，当您在新窗口中打开文件时会加载该查看器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T21:13:40.833

将 iframe 包裹在某种宽度受限的元素中，然后将此 CSS 应用于该元素：

```
-webkit-overflow-scrolling: touch 
```

# c# - 收到 WCF 服务的回复后无法更新客户端网页

> ID：14750741
> 
> 赞同：0
> 
> 时间：2013-02-07T12:07:21.737
> 
> 标签：c#, asp.net, wcf, asp.net-3.5

我正在开发一些在 ASP.Net 3.5 中的应用程序，我必须在其中嵌入一个名为 Instant Messaging/Push Notification 的新功能。为此，我使用 WCF 向客户端发送数据。但问题是，当 WCF 向客户端发送数据时，我无法在 asp 页面中的客户端使用它，就像我无法在网页中显示它或无法使用 WCF 发送的数据更新我的页面一样。

我试过了

```
Response.Write(sendData);  //sendData is the data which is send by WCF 
```

只是为了在页面上写入数据，但是，它也抛出了一个异常：

“在这种情况下没有响应。”

所以，请让我知道如何在我的应用程序中使用 sendData。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:14:31.563

您正在尝试在没有当前响应的代码中使用 HttpContext.Current.Response 。

如果在 HTTPHandler 中使用它，则需要使用通过 IHTTPHandler 接口中的 ProcessRequest 方法传递的 Context 对象。

此外，你可以[在这里看到](http://mvolo.com/iis7-integrated-mode-request-is-not-available-in-this-context-exception-in-applicationstart)

# android - 将枚举保存到 SharedPreference

> ID：14750743
> 
> 赞同：40
> 
> 时间：2013-02-07T12:07:34.897
> 
> 标签：android

`Enum`我想知道，保存到的常用方法是`SharedPrefereces`什么？目前，我正在使用`gson`将枚举转换为字符串，然后将其保存为`SharedPrefereces`.

```
 Gson gson = new Gson();
    // country is an enum.
    String json_country = gson.toJson(country);
    sharedPreferences.edit().putString(COUNTRY, json_country); 
```

我想知道，这是一个好方法吗？有没有更好的办法？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-08-14T13:09:05.587

您可以为它使用一个简单的字符串，然后使用 valueOf 方法提取该值。这是一个例子：

```
public enum MyEnum {
    ENUM1, ENUM2, ENUM3, ENUM4;

    public static MyEnum toMyEnum (String myEnumString) {
        try {
            return valueOf(myEnumString);
        } catch (Exception ex) {
                // For error cases
            return ENUM1;
        }
    }
}

public void setMyEnum(Context context, MyEnum myEnum) {
    SharedPreferences sp = context.getPreferences(this.MODE_PRIVATE);
    SharedPreferences.Editor editor = sp.edit();
    editor.putString("MyEnum", myEnum.toString());
    editor.commit();
}

public MyEnum getMyEnum(Context context) {
    SharedPreferences sp = context.getPreferences(this.MODE_PRIVATE);
    String myEnumString = sp.getString("MyEnum", MyEnum.ENUM1.toString());
    return MyEnum.toMyEnum(myEnumString);
} 
```

这是示例代码，您可以看到它是如何工作的。 [https://github.com/jiahaoliuliu/SavingEnumToSharedPreferences](https://github.com/jiahaoliuliu/SavingEnumToSharedPreferences)

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2014-04-09T02:06:02.033

这与企业 Java 开发人员在将枚举持久保存到数据库时面临的问题相同。现有答案的问题在于它们很脆弱并且不适合重构。这就是为什么（底部有替代方案。）

使用枚举`toString()`和`valueOf()`方法意味着不能重命名枚举值。假设我有一个带有值和的`VehicleType`枚举。如果我将字符串“TRUCK”存储为首选项值，然后在我的应用程序的下一个版本中重命名为，则存储的字符串不再有意义并且会抛出.`CAR``TRUCK``VehicleType.TRUCK``VehicleType.PICKUP_TRUCK``valueOf()``IllegalArgumentException`

使用值的序数意味着枚举值无法重新排序，或者您存储的值将不再匹配。这种情况可能会更糟，因为您的应用程序将继续运行，但可能会以意想不到的方式运行，一旦最终发现问题就很难追踪并且可能无法纠正。除了结尾之外的任何地方添加新值也是如此。如果我`MOTORCYCLE`在顶部添加一个新值，`CAR`在以前版本的应用程序中存储为它的序数 (0) 将`MOTORCYCLE`在更新后返回，并且 a `TRUCK`(序数 1) 将变为`CAR`.

我使用的替代方法是向`final`枚举添加一个字段并使用它的值，如下所示：

```
public enum VehicleType {
    CAR("C"),
    TRUCK("T");

    private final String code;
    private static final Map<String,VehicleType> valuesByCode;

    static {
        valuesByCode = new HashMap<>(values().length);
        for(VehicleType value : values()) {
            valuesByCode.put(value.code, value);
        }
    }

    VehicleType(String code) {
        this.code = code;
    }

    public static VehicleType lookupByCode(String code) { 
        return valuesByCode.get(code); 
    }

    public String getCode() {
        return code;
    }
} 
```

使用类似的东西存储一个值并使用类似的东西`preferences.putString("vehicle_type", vehicleType.getCode())`检索它`vehicleType = VehicleType.lookupByCode(preferences.getString("vehicle_type", null))`。

这种方法需要一些额外的代码，但在我看来，它是最强大的解决方案。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-02-07T12:12:05.710

您可以将枚举与整数相关联并存储简单的 int，如下所示：

[将 Int 转换为 Java 中的枚举](https://stackoverflow.com/questions/5878952/cast-int-to-enum-in-java)（第二个答案）- 也可以采用同样的方式`enumToInt`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-12-14T23:00:10.103

考虑到上述所有选项，我决定使用另一种解决方案来解决这个问题。

我只需要一组值，没有任何逻辑。在这种情况下，可以使用这样的工具，`@IntDef`而`@StringDef`不是使用`enum`.

该解决方案可以安全地根据变量名称和变量顺序进行重构。唯一不应该改变的 - 实际值。但是，默认重构工具不会在重命名时要求您更改它们，因此仅自动使其变得不那么容易（`@IntDef`从这个角度来看比 更好`@StringDef`）。

```
 @Retention(SOURCE)
  @IntDef({NOT_REQUESTED, GIVEN, PROHIBITED})
  public @interface CustomPermission {}

  public static final int NOT_REQUESTED = -1;
  public static final int PROHIBITED = 0;
  public static final int GIVEN = 1;

  @CustomPermission
  public int getPermission() {
    return getSharedPreferences(SHARED_PREFS_FILE)
          .getInt(STATISTICS_COLLECTION_PERMISSION, NOT_REQUESTED);
  }

  public void setPermission(@CustomPermission int flag) {
    getSharedPreferences(SHARED_PREFS_FILE)
      .edit()
      .putInt(STATISTICS_COLLECTION_PERMISSION, flag)
      .apply();
  } 
```

这是[官方文档](https://developer.android.com/reference/android/support/annotation/IntDef.html "官方文件")

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-04T13:53:52.303

这是我为此编写的一个不错的实用程序类。它非常通用，可以满足广泛的需求。

```
import android.content.Context;
import android.content.SharedPreferences;

public class PreferencesUtils
{
    enum StorageMode {
        /** Store enum by ordinal. */
        ORDINAL,

        /** Store enum by name. */
        NAME
    }

    private static final String PREFERENCES_NAME = "your_prefs_name";

    /**
     * Put an enum in SharedPreferences with the given key.
     * @param context The context
     * @param key The preference key
     * @param enumm The enum to store
     * @param mode The mode to store the enum - by name or ordinal
     */
    public static void putEnum(final Context context, final String key, final Enum enumm, final StorageMode mode)
    {
        final SharedPreferences sp = context.getSharedPreferences(PREFERENCES_NAME, Context.MODE_PRIVATE);
        final SharedPreferences.Editor editor = sp.edit();
        switch (mode)
        {
            default:
            case ORDINAL:
                editor.putInt(key, enumm.ordinal());
                break;
            case NAME:
                editor.putString(key, enumm.name());
                break;
        }
        editor.apply();
    }

    /**
     * Get the enum stored in SharedPreferences with the given key.
     * @param context The context
     * @param key The preference key
     * @param enumType The type of Enum stored
     * @param defaultEnumm Enum returned if a preference stored with key does not exist. Can be null.
     * @param mode The mode by which the enum was originally stored
     * @param <T> The type of Enum stored
     * @return The Enum stored as a preference with the given key
     */
    public static <T extends Enum<T>> Enum getEnum(final Context context, final String key, final Class<T> enumType,
                                                   final Enum defaultEnumm, final StorageMode mode)
    {
        final SharedPreferences sp = context.getSharedPreferences(PREFERENCES_NAME, Context.MODE_PRIVATE);
        final T[] values = enumType.getEnumConstants();

        switch (mode)
        {
            default:
            case ORDINAL:
                final int ord = sp.getInt(key, -1);
                return ord == -1 ? defaultEnumm : values[ord];
            case NAME:
                final String name = sp.getString(key, null);
                for (final T value : values)
                {
                    if (value.name().equals(name))
                    {
                        return value;
                    }
                }
        }
        return defaultEnumm;
    }
} 
```

# tfs - 有没有办法在合并过程中自动更新目标分支？

> ID：14750745
> 
> 赞同：1
> 
> 时间：2013-02-07T12:07:37.257
> 
> 标签：tfs

在合并操作中，目标分支不会自动更新。我们必须手动获取最新版本。VS 或 TFS 服务器的某个地方是否有配置在触发合并操作之前自动获取目标分支的最新版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:21:39.013

不幸的是，这个选项不存在。如果这是您热衷的事情，那么我建议您在我们的 UserVoice 网站上为它投票。我们在这里使用反馈来帮助确定我们的积压工作的优先级。

[http://visualstudio.uservoice.com/forums/121579-visual-studio/category/30925-team-foundation-server](http://visualstudio.uservoice.com/forums/121579-visual-studio/category/30925-team-foundation-server)

# java - org.apache.catalina.LifecycleException: 无法启动组件 [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/CollegeWebsite]]

> ID：14750747
> 
> 赞同：48
> 
> 时间：2013-02-07T12:07:43.413
> 
> 标签：java, jsp, tomcat, servlets, unsupported-class-version

```
org.apache.catalina.core.ContainerBase addChildInternal
SEVERE: ContainerBase.addChild: start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/CollegeWebsite]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:962)
    at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1603)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:469)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:332)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:597)
    at java.lang.Thread.run(Thread.java:637)
Caused by: java.lang.UnsupportedClassVersionError: com/Servlets/AddCourse : Unsupported major.minor version 51.0 (unable to load class com.Servlets.AddCourse)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2893)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1170)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1678)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    at org.apache.catalina.startup.WebAnnotationSet.loadClass(WebAnnotationSet.java:480)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationServletAnnotations(WebAnnotationSet.java:130)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationAnnotations(WebAnnotationSet.java:66)
    at org.apache.catalina.startup.ContextConfig.applicationAnnotationsConfig(ContextConfig.java:381)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:858)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:345)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5161)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 11 more
```

我该如何克服这个错误？我的项目很容易部署在 Eclipse 上，但是当我直接通过 Tomcat 服务器部署它时无法部署。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-07T12:14:52.340

有版本冲突，请确认编译后的版本和Tomcat版本的JVM是否一致。你可以通过检查 tomcat 启动 .bat ，寻找 JAVA_HOME

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-07T12:15:29.057

发生此错误是因为您的 Eclipse 和 Tomcat 的 Jre 版本不匹配..要么将 eclipse 一更改为 tomcat 一或 ViceVersa..

两者应该相同..`Java version`不匹配..检查它

# c# - 在 Windows Phone 7 中解析 Innerxml

> ID：14750754
> 
> 赞同：0
> 
> 时间：2013-02-07T12:07:56.493
> 
> 标签：c#, windows-phone-7, xml-parsing

我有以下xml。

```
<?xml version="1.0" encoding="utf-8" ?>
<catalog>
 <product description="Cardigan Sweater" product_image="cardigan.jpg">
<catalog_item gender="Men's">
  <item_number>QWZ5671</item_number>
  <price>39.95</price>
  <size description="Medium">
    <color_swatch image="red_cardigan.jpg">Red</color_swatch>
    <color_swatch image="burgundy_cardigan.jpg">Burgundy</color_swatch>
  </size>
  <size description="Large">
    <color_swatch image="red_cardigan.jpg">Red</color_swatch>
    <color_swatch image="burgundy_cardigan.jpg">Burgundy</color_swatch>
  </size>
</catalog_item>
<catalog_item gender="Women's">
  <item_number>RRX9856</item_number>
  <price>42.50</price>
  <size description="Small">
    <color_swatch image="red_cardigan.jpg">Red</color_swatch>
    <color_swatch image="navy_cardigan.jpg">Navy</color_swatch>
    <color_swatch image="burgundy_cardigan.jpg">Burgundy</color_swatch>
  </size>
  <size description="Medium">
    <color_swatch image="red_cardigan.jpg">Red</color_swatch>
    <color_swatch image="navy_cardigan.jpg">Navy</color_swatch>
    <color_swatch image="burgundy_cardigan.jpg">Burgundy</color_swatch>
    <color_swatch image="black_cardigan.jpg">Black</color_swatch>
  </size>
  <size description="Large">
    <color_swatch image="navy_cardigan.jpg">Navy</color_swatch>
    <color_swatch image="black_cardigan.jpg">Black</color_swatch>
  </size>
  <size description="Extra Large">
    <color_swatch image="burgundy_cardigan.jpg">Burgundy</color_swatch>
    <color_swatch image="black_cardigan.jpg">Black</color_swatch>
  </size>
</catalog_item> 
```

我能够解析 xml 以获取目录项（表示性别），但我无法解析内部元素。任何人都可以帮助我解析内部元素并根据性别将项目累积在字典中。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:58:44.297

您可以使用 LINQ 查询解析 xml。这有点棘手。

首先像这样为您的 XML 生成一些类

```
public class CatalogItem
    {
        public string item_num { get; set; }
        public double price { get; set; }
        public ObservableCollection<Size> sizes { get; set; }
    }

    public class Size
    {
        public string sizeDesc { get; set; }
        public ObservableCollection<ColorSwatch> colorswatches { get; set; }
    }

    public class ColorSwatch
    {
        public string color { get; set; }
        public string image { get; set; }
    } 
```

然后以下列方式解析您的 XML

```
XElement catalogElements = XElement.Parse(xmldata);
var result = from item in catalogElements.Elements("product").Elements("catalog_item")
                     select new CatalogItem()
                     {
                         item_num = item.Element("item_number").Value,
                         price = Double.Parse(item.Element("price").Value),
                         sizes = new ObservableCollection<Size>(from sz in item.Elements("size")
                                select new Size()
                                {
                                    sizeDesc = sz.Attribute("description").Value,
                                    colorswatches = new ObservableCollection<ColorSwatch>(from cs in sz.Elements("color_swatch")
                                                                                        select new ColorSwatch()
                                                                                        {
                                                                                             color = cs.Value,
                                                                                             image = cs.Attribute("image").Value
                                                                                        })
                                })
                     };

  List<CatalogItem> catalogItems = result.ToList();
  var items = catalogItems.First().sizes.First().sizeDesc; //Medium
  var sjdl  = catalogItems.First().sizes.First().colorswatches.First().color; //Red 
```

# asp.net - 错误：在 IIS7 上尝试从 ASP.NET 调用 wind32 dll 时，%1 不是有效的 Win32 应用程序

> ID：14750755
> 
> 赞同：0
> 
> 时间：2013-02-07T12:07:59.057
> 
> 标签：asp.net, winapi, iis-7

我正在尝试在 IIS 7、OS Windows Server 2008R2 上的 ASP.NET 应用程序中加载 win32 dll，但它会抛出“%1 不是有效的 Win32 应用程序”。该应用程序正在加载 dll 并在我的开发机器和 Visual Studio 2012 开发服务器 Winodws 8 64bit 上正常工作。

当我在应用程序池上设置“启用 32 位应用程序”=true 时，不会抛出错误但没有任何反应，应用程序没有响应并且超时。

关于如何让 win32 dll 工作的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:21:04.867

您是否尝试将工作进程作为 Wow64（32 位）运行？

在这种情况下，您的配置很有可能正在尝试加载一些 64 位 isapi 过滤器，例如 aspnet_filter.dll，对于 v2.0，在 64 位操作系统上，您的计算机上将有两个此 dll 实例在 \framework 和 \framework64 文件夹下。您要选择 \framework 下的那个。

# magento - Magento - 在 csv 中设置 url 键会导致 404 页面

> ID：14750763
> 
> 赞同：1
> 
> 时间：2013-02-07T12:08:35.140
> 
> 标签：magento, url, csv, url-rewriting, product

我有很多产品需要通过 Magento 中的 csv 上传。例如，我有两个带有值的属性：

url_key

```
mypage 
```

url_path

```
mypage.html 
```

我也尝试过相同的值，但是当我上传它们时，产品存在但在尝试查看其产品页面时总是导致 404 错误。

我在 csv 中遗漏了什么？

我正在使用 Magento 1.7

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:32:57.930

您是否尝试使用与产品名称不同的 URL？

EG Product ABC，Magento 默认将 URL 密钥 product-abc 和 URL 路径 product-abc.html。

如果这是您的目标，那么您可以在导入时将这两列留空，Magento 将应用此规则。还要确保在导入后重新索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-14T10:29:59.117

第 1 步：将两列（url_key 和 url_path）留空并上传 csv 文件

步骤 2 : 成功导入 csv 文件后，进入系统 -> 索引管理：点击全选，然后点击提交。这是非常简单的方法。我尝试并得到了结果。

# wpf - 带有 ComboBox 的 DataGridTemplateColumn 中的 SelectedItem 为空

> ID：14750765
> 
> 赞同：2
> 
> 时间：2013-02-07T12:08:59.847
> 
> 标签：wpf, datagrid, datagridtemplatecolumn

我有一个 Datagrid 和 DataGridTemplateColumn 这是 ComboBox

```
<DataTemplate x:Key="ComboBoxPackagingType">
  <ComboBox SelectedItem="{Binding   PackagingType.SelectedItem, Mode=TwoWay}" ItemsSource="{Binding PackagingType.ItemsSource}"/>
</DataTemplate> 
```

...

```
<DataGridTemplateColumn CellTemplate="{StaticResource ComboBoxPackagingType}"/> 
```

从列表中选择项目后，SelectedItem 永远不会更改值。我在 get 和 set 函数上都设置了断点，它在更改我的 DataGrid 的 ItemSource 后停止在 get 函数上，但在从列表中选择项目后从不在 set 函数上。

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:07:43.153

尝试将 UpdateSourceTrigger=PropertyChanged 添加到 ComboBox 所选项目的绑定中，如下所示：

```
<DataTemplate x:Key="ComboBoxPackagingType">
  <ComboBox SelectedItem="{Binding PackagingType.SelectedItem, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" ItemsSource="{Binding PackagingType.ItemsSource}"/>
</DataTemplate> 
```

这对我有用。

# objective-c - 在 Objective-C 中解析 JSON 后结果的随机顺序（再次）

> ID：14750766
> 
> 赞同：-3
> 
> 时间：2013-02-07T12:09:06.680
> 
> 标签：objective-c, json, parsing, for-loop, nsarray

我需要再次解析来自远程服务器上多个源的多个 JSON 字符串，并且我需要使用单个解析的每个值填充 UITableView：[感谢@He](https://stackoverflow.com/questions/14609836/random-results-after-parsing-json-in-objective-c)之前的答案。

**单个 JSON 源，例如 h** p://WWW.REMOTESERVERWITHJSONSOURCE.NET/A1:**

```
{
  "id": 0001,
  "main": {
    "mainA": 100,
  },
} 
```

**单个 JSON 源，例如 h** p://WWW.REMOTESERVERWITHJSONSOURCE.NET/A2:**

```
{
  "id": 0002,
  "main": {
    "mainA": 200,
  },
} 
```

**单个 JSON 源，例如 h** p://WWW.REMOTESERVERWITHJSONSOURCE.NET/A3:**

```
{
  "id": 0003,
  "main": {
    "mainA": 300,
  },
} 
```

**目标：**解析 mainA 的每个值并以正确的顺序获取它们 A1->A2->A3

**我们可以解析远程 JSON 字符串的单个 URL 数组：**

```
idURL = [[NSArray alloc] initwithObjects:@"A1", @A2", @A3", nil]; 
```

**解析，[感谢@Sulthan](https://stackoverflow.com/questions/14602556/detect-real-end-of-the-for-loop-in-objective-c)，我需要块，因为我必须等待 END 调用 theGreatMethod：**

```
- (void)parsingJSON { // starts with a UIButton pressed!

    mainA = [@[@"1",@"2",@"3"] mutableCopy]; // defined here to preserve right order of mainA objects after parsing

    int mainACount = 0;

    typedef void (^AFJSONSuccessBlock) (NSURLRequest *request, NSHTTPURLResponse *response, id JSON);
    typedef void (^AFJSONFailureBlock) (NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON);

    __block int numRequests = [idURL count];

    AFJSONSuccessBlock onSuccess = ^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {

        NSMutableDictionary *dictMain = [JSON objectForKey:@"main"];
        [mainA replaceObjectAtIndex:mainACount withObject:[dictMain objectForKey:@"mainA"]];

        mainACount ++; // EVERY AFJSONRequestOperation *operation int mainACount = mainACount + 1 
        numRequests --; // EVERY AFJSONRequestOperation *operation int numRequest = numRequest - 1

        if (numRequests == 0) {

            NSLog(@"END PARSING");
            NSLog(@"FINAL mainA ORDER: %@",mainA);

        [self theGreatMethod]; // a method to populate UITableView with mainA results

        }
    };

    AFJSONFailureBlock onFailure = ^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {

        NSLog(@"ERROR: %@", [error userInfo]);

        numRequests--;

        if (numRequests == 0) {

         NSLog(@"ERROR PARSING");
            [self theGreatMethod]; // a method to populate UITableView with mainA results

        }
    };

    for (NSString* jsonPath in idURL) {

        NSString* absolutePath = [NSString stringWithFormat:@"h**p://WWW.REMOTESERVERWITHJSONSOURCE.NET/%@", jsonPath];
        NSURL *url = [NSURL URLWithString:absolutePath];
        NSURLRequest *request = [NSURLRequest requestWithURL:url];

        AFJSONRequestOperation *operation;
        operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request
                                                                    success:onSuccess
                                                                    failure:onFailure];
        [operation start];

    }

        NSLog(@"START PARSING");

} 
```

我在这种情况下定义了一个**int mainACount**来计算每个 AFJSONRequestOperation *操作周期并逐个替换 mainA 对象，但我不确定这是正确的方法；我也尝试过 (int i=0; i < [mainA count]; i++) 和 [mainA replaceObjectAtIndex:i] 循环，但我有相同的错误结果。

**NSLog(@"FINAL mainA ORDER: %@",mainA); 的结果**

```
1st parsing -> NSLog result = random (100-200-300 or 100-300-200 or 200-300-100 or 200-100-300 or 300-200-100 or 300-100-200)
2nd parsing -> (after a few seconds) NSLog result = random (100-200-300 or 100-300-200 or 200-300-100 or 200-100-300 or 300-200-100 or 300-100-200)
3rd parsing -> (after other few seconds) NSLog result = random (100-200-300 or 100-300-200 or 200-300-100 or 200-100-300 or 300-200-100 or 300-100-200)
... 
```

**错误**：正如您所看到的，每次我按下 UIButton 并开始解析时，我再次得到 mainA 对象的不同序列（然后是表行中的不同值），例如：在第一次解析之后，我期望什么？100-200-300，而不是随机的......所以，你能再帮我一次吗，这里有什么问题？**或者，是否有更好的方法以正确的顺序进行解析？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:06:20.850

尝试像这样声明 URL 数组：

```
idURL = [[NSArray alloc] initwithObjects:@"A1", @"A2", @"A3", nil]; 
```

即使`for`循环按顺序解析对象，当您使用时，也不能保证`NSArray`调用返回结果的顺序，因为它是异步请求。`AFJSONRequestOperation`

您可能希望使用[@synchronized 指令](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/ThreadSafety/ThreadSafety.html)锁定线程：

```
- (void)parsingJSON:(id)anObj
{
    // ...
    AFJSONSuccessBlock onSuccess = ^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        // ...
        @synchronized(anObj)
        {
            // Everything between the braces is protected by the @synchronized directive.
            var2 ++; // EVERY AFJSONRequestOperation *operation int var2 = var2 + 1 
            numRequests --; // EVERY AFJSONRequestOperation *operation int numRequest = numRequest - 1
        }
        // ...
    }
    // ...
} 
```

# javascript - html5消息传递多个实例

> ID：14750767
> 
> 赞同：10
> 
> 时间：2013-02-07T12:09:07.057
> 
> 标签：javascript, html, iframe

我有一个这样的脚本

```
function resizeCrossDomainIframe(id, other_domain) {
    var iframe = document.getElementById(id);
    window.addEventListener('message', function (event) {
        if (event.origin !== other_domain) return; // only accept messages from the specified domain
        if (event.data === "reload") top.location.reload(); // If child page sends reload request - reload it without any questions asked 
        if (isNaN(event.data)) { //If this isn't integer than it is alert
            alert(event.data); // Show alert if not integer
        } else {
            var height = parseInt(event.data) + 5; // add some extra height to avoid scrollbar
            iframe.height = height + "px";
            alert(event.data);
        }
    }, false);
} 
```

它所做的是动态调整 iframe 的大小。现在在第一个 iframe 页面上，我只收到一个警报，但在 iframe 页面中，我有链接，当我转到第二页时，我看到 2 个警报，当我转到第三页时 - 我收到 3 个警报，第 4 个链接触发 4 个警报等...

在每个 iframed 页面中，我都调用 parent 来调整大小，例如：

```
<body class="settingspage" onload="parent.postMessage(document.body.scrollHeight, '<?php echo $_SESSION['SESS_ACCESSING_FROM']; ?>');"> 
```

我试图清除“事件”数组，但我仍然得到警报，但这次它们是空的，但警报的数量等于 iframe 内的链接点击次数？

为什么是这样 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:18:57.940

问题是，每次单击 iframe 中的链接时，都会触发 load 事件。

因此，每次单击链接时都绑定消息事件。第一次一切都正确，因为你绑定了一次，第二次你收到两个警报，因为你绑定了两次，依此类推......

所以解决方案是删除 iframe 卸载时的“消息”事件。

因此，您必须稍微清理一下代码：

```
var listener = function (event) {

    if (event.data === "reload") top.location.reload(); // If child page sends reload request - reload it without any questions asked 
    if (isNaN(event.data)) { //If this isn't integer than it is alert
        alert(event.data); // Show alert if not integer
    } else {
        var height = parseInt(event.data) + 5; // add some extra height to avoid scrollbar
        iframe.height = height + "px";
        alert(event.data);
    }
}; 
```

然后你有你调用 onLoad 和 onUnload 的函数。

```
function iframeOnLoad(id) {
    var iframe = document.getElementById(id);
    window.addEventListener('message', listener, false); 
}

function iframeOnUnload(id) {
    var iframe = document.getElementById(id);
    window.removeEventListener('message', listener, false); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:37:37.837

我通过将功能移动到“加载时的主页主体”并将其从 iframe 中删除来解决了这个问题......

# iphone - 如何关闭视图控制器

> ID：14750777
> 
> 赞同：0
> 
> 时间：2013-02-07T12:09:35.623
> 
> 标签：iphone, xcode, viewcontroller

我通过以下方式推动控制器：

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
self.viewController = [[ViewController alloc] initWithNibName:@"ViewController"     bundle:nil];
self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible]; 
```

到了那里，我不能再回去了

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

或者

```
[self.navigationController popViewControllerAnimated:YES]; 
```

我应该用什么来关闭最后一个视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:13:51.557

到你想解雇并去的地方？

这是根视图控制器吧？它不能被“解雇”。如果您有另一个视图控制器并且此 VC 是从第二个 VC 推送或模态呈现的，则可以将其关闭

窗口是基础画布，VC 被添加到它上面并显示出来。

好的，根据您的说明，您有一个带有联系人的初始 VC，并且您正尝试从该contactVC 转到下一页（DetailsVC），然后从那里解散。

您当前正在做的是获取窗口并将您的 detailVC 作为根 VC。这样您就不能关闭联系人 VC。`detail VC`在`didselectRowAtIndexpath`方法中创建一个实例`contactsVC`并使用导航控制器推送它。

然后你可以使用方法弹出`popViewControllerAnimated:`

这是一个很好的[教程](http://mobile.tutsplus.com/tutorials/iphone/navigation-controllers-and-view-controller-hierarchies/)让你开始

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:16:12.790

您的代码不是“推动控制器”。该代码本质上是您可以在应用程序委托中找到的用于设置一个初始窗口和视图的代码。

只有在您使用 pushViewController 将控制器推送到同一个导航控制器之后，调用 popViewController 才有效，但您还没有这样做。

调用dismissViewController 仅在您使用presentViewController 呈现视图控制器后才有效，而您还没有这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T20:28:02.783

我终于放弃了上面的技术，转而使用传统的：

```
ViewController *detailViewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
[self.navigationController pushViewController:detailViewController animated:YES]; 
```

# c++ - Directx 11 常量缓冲区错误

> ID：14750782
> 
> 赞同：-2
> 
> 时间：2013-02-07T12:10:01.533
> 
> 标签：c++, shader, hlsl, directx-11

编译我的dx11 hlsl着色器文件时，它失败了，经过一番调试，错误出在这个区域：

```
cbuffer ConstantPointBuffer
{
    float3 dir; 
    float pad;

    float3 pos; 
    float pad;

    float3 att; 
    float pad;

    float4 ambient;
    float4 diffuse;

    float range;
    float3 pad;
} 
```

但我想不出有什么问题...

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:16:09.063

您有多个具有相同名称的变量。不要那样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:17:45.900

您在右大括号后缺少一个分号。cbuffers 的声明方式与 c++ 中的结构或类声明相同。

# apache - WSO2 API 管理器 Synapse-HttpComponents-NIO 在 curl 获得 200 时获得 404

> ID：14750785
> 
> 赞同：2
> 
> 时间：2013-02-07T12:10:09.350
> 
> 标签：apache, wso2, synapse, wso2-am

我正在使用已发布的 API 调用位于 API 管理器同一主机上的 PHP API。客户端应用程序是 SoapUI 或 curl。

我发出调用，它被传递到返回的 httpd 服务器：

```
curl -H "Authorization: Bearer Q7Eb8k6oUBe6O4nP10sEgzZREMMa" --url "http://10.1.1.141:8280/accident/v1/v1/accident.json"

10.1.1.141 - - [07/Feb/2013:12:41:41 +0100] "GET http://apman2.cortile.cloudlabcsi.local/restTest.php/v1/accident.json HTTP/1.1" 404 514 "-" "Synapse-HttpComponents-NIO"

curl http://apman2.cortile.cloudlabcsi.local/restTest.php/v1/accident.json

10.1.1.157 - - [07/Feb/2013:12:41:36 +0100] "GET /restTest.php/v1/accident.json HTTP/1.1" 200 120 "-" "curl/7.19.7 (x86_64-redhat-linux-gnu) libcurl/7.19.7 NSS/3.13.1.0 zlib/1.2.3 libidn/1.18 libssh2/1.2.2" 
```

显然，第一个是对 WSO2 使用自己的发布 URL 发布的最终 API 的调用，因此结果调用由 Synapse-HttpComponents-NIO 进行：curl call API-Manager 并使用 Synapse-HttpComponents-NIO 调用 PHP API。
第二个是直接从 curl 发出到 PHP API 的相同调用。
日志来自 HTTPD。

很明显，httpd 收到了调用，我无法理解为什么 Synapse-HttpComponents-NIO 客户端得到 404 而 curl 得到正确的结果。
谢谢卢卡
_

# android - 在自动完成文本视图中在键盘上滚动下拉菜单

> ID：14750786
> 
> 赞同：18
> 
> 时间：2013-02-07T12:10:11.977
> 
> 标签：android, drop-down-menu, autocompletetextview

我有一个 Autocompletetextview 下拉建议列表，直到软键盘的边框。

然后，在滚动建议列表时： - （在姜饼手机中）下拉菜单会自动增加覆盖键盘的高度，这很好，因为它显示了更多项目。- （在 ICS 模拟器中）下拉菜单不会增加键盘的高度。

这与某些系统属性有关吗？有没有办法在 ICS 中强制第一个行为？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-23T10:27:13.413

只需添加`android:dropDownHeight="100dp"`到`AutoCompleteTextView`布局文件中的标签，它就可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-02T07:34:01.227

让我解释一下我的小技巧，以避免在键盘后面显示“下拉”。诀窍在于 dropDownAnchor 属性。解决方案是使用位于屏幕顶部的视图设置锚点，因此菜单将从该位置离开，因此不会被键盘覆盖。例如：

`android:dropDownAnchor="@+id/topview"`

我知道这是一个丑陋的解决方案，但这种控制太有限了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-18T18:33:54.530

您还可以使用`android:dropDownAnchor="@id/` 将下拉列表锚定到视图。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-17T16:59:20.253

一个适用于所有分辨率的简单解决方案是使用`android:dropDownAnchor`具有引用活动工具栏的资源 ID 的属性。

```
<my.app.ContactAutoCompleteTextView
                            android:id="@+id/autocomplete_textview"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:gravity="top"
                            android:dropDownAnchor="@id/appbar"
                            android:inputType="text|textMultiLine|textCapSentences|textAutoCorrect"
                            android:paddingBottom="12dp"
                            android:textColor="@color/text_primary"
                            android:textColorLink="@color/secondary"
                            android:textSize="@dimen/text_medium" /> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-02T18:54:40.083

只需添加`getActivity().getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE);`到您的片段或活动中

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-05T02:57:29.137

你需要做两件事。首先，在清单中调整该活动的软输入模式。

```
android:windowSoftInputMode="stateHidden|adjustResize" 
```

这样可以确保在显示键盘时再次布局视图。然后，在顶层视图的 oncreate 中设置一个全局布局侦听器，以便在布局更改时进行下拉高度计算。将下拉高度调整为键盘下方所有内容的高度，如果需要，减去一些填充。

```
v.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

        @Override
        public void onGlobalLayout() {
                autoCompleteView.setDropDownHeight(view2.getHeight());
} 
```

其中 view2 是包含自动完成视图下方所有内容的视图/布局。

# selenium - 操作和 htmlunitdriver - 速度问题

> ID：14750790
> 
> 赞同：0
> 
> 时间：2013-02-07T12:10:29.117
> 
> 标签：selenium, selenium-webdriver, htmlunit, xpath

我的 Web 应用程序具有在 MouseOver 上打开的菜单。我正在使用 htmlunitdriver 编写测试。

触发菜单的测试代码是

```
 Actions builder = new Actions(driver);
    WebElement menu = driver.findElement(By.xpath("//a[starts-with(@href,'/index.html')]"));
    Thread.sleep(2000);
    builder.moveToElement(menu).build().perform();
    Thread.sleep(2000);
    driver.findElement(By.xpath("//a[starts-with(@href,'/submenuitem')]")).click();
    driver.manage().timeouts().implicitlyWait(40, TimeUnit.SECONDS); 
```

当我运行一个测试时，它通过就好了。但是当我尝试一次运行所有 80 个测试时，我得到了

无法使用 //a[starts-with(@href,'/submenuitem' 定位节点

我猜子菜单还没有打开，htmlunitdriver速度太快了。有时会出现“您只能在单次运行时与可见的元素进行交互。有人可以帮我解决这个问题吗？使用 FirefoxDriver 左右对我来说不是一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:07:01.133

您`implicit wait`在找到该`submenu`项目后使用。我认为那里没有隐式等待。使用隐式等待最可取的地方是在初始化`Driver instance`.

您可以使用另一种解决方案`Explicit Wait`来等待页面中的元素。

有关 Selenium 等待的更多信息，请参阅这篇[文章。](https://stackoverflow.com/questions/14700123/selenium-webdriver-ruby-how-to-wait-for-images-to-be-fully-loaded-after-clic/14701534#14701534)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T05:08:55.897

使用手动 Thread.sleep(time) 等待硒操作是一种肮脏的解决方案，根本不应该使用。

相反，您可以在与元素交互之前检查元素是否可见。

```
public void waitUntilVisible(WebDriver driver, WebElement element){
    WebDriverWait waiting = new WebDriverWait(driver, 10);
    waiting.until(ExpectedConditions.visibilityOf(element));
}

public void waitUntilClickable(WebDriver driver, By locator){
    WebDriverWait waiting = new WebDriverWait(driver, 10);
    waiting.until(ExpectedConditions.elementToBeClickable(locator));
}

Actions builder = new Actions(driver);
WebElement menu = driver.findElement(By.xpath("//a[starts-with(@href,'/index.html')]"));

waitUntilVisible(driver, menu);
builder.moveToElement(menu).build().perform();

WebElement menuItem = driver.findElement(By.xpath("//a[starts-with(@href,'/submenuitem')]"));

waitUntilClickable(driver, By.xpath("//a[starts-with(@href,'/submenuitem')]"));
menuItem.click(); 
```

# html - 让 div 占据其余空间（高度）？

> ID：14750797
> 
> 赞同：6
> 
> 时间：2013-02-07T12:10:58.360
> 
> 标签：html, css

HTML

```
<div class="container">
    <div class="header">
        <span>
            <span>First</span>
        </span>
        <span>
            <span>Second</span>
        </span>
        <span class="active">
           <span>Thrid</span>
        </span>
    </div>
    <div class="body">
        <div class="Control1">
            Content!
        </div>
    </div>
</div> 
```

CSS

```
.container
{
    height: 300px;
    border: black 1px solid;
}

.container > .header
{
    background: grey;
}
.container > .header > span
{
    display: inline-block;
    padding: 10px;
}
.container > .header > .active
{
    background: black;
    color: white;
}

.container > .body
{
    height: 100%;
    overflow: auto;
    background: lightgrey;
} 
```

[http://jsfiddle.net/ytg8S/](http://jsfiddle.net/ytg8S/)

我的问题是我有高度为 300 px 的容器 div，然后我有高度未知的标题（取决于它上面的项目数量和屏幕大小，它可能不止一行。）我该怎么做让 .body 占据其余空间并显示滚动，如果它的内容比空间多？

我的第一个想法是摆弄绝对定位，但是当我有不止一行 .header 项目时，这不起作用。

我无法更改由第三方组件生成的 html（我可以，但工作量很大），如果可以的话，我宁愿避免使用 javascript..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:16:13.030

如果我正确理解了您的问题，那么我认为这将满足您的要求：

```
container > .body
{
    height: 100%;
    max-height:100%;
    overflow: auto;
    background: lightgrey;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:59:36.717

试试这个..希望这有帮助

```
 .container
{
    height: 300px;
    border: black 1px solid;
    background: #D3D3D3;
}

.container > .header
{
    height:auto;
    background: grey;
    max-height: 200px;
    overflow: auto; 
}
.container > .header > span
{
    display: inline-block;
    padding: 10px;
}
.container > .header > .active
{
    background: black;
    color: white;
}

.container > .body
{
    height: auto;
    max-height: 100px;
    overflow: auto;
    background: lightgrey;
} 
```

# jquery - 动态填充列表视图时如何保留jquery移动样式

> ID：14750798
> 
> 赞同：2
> 
> 时间：2013-02-07T12:11:09.857
> 
> 标签：jquery, jquery-mobile

我正在开发 jquery mobile。目前我正在使用 jquery.mobile.1.0.1 版本的 js 和 css。我有带有预填充数据的 jquery 移动列表视图，例如，

```
<ul id="ulstorelist" data-role="listview" data-theme="d" data-divider-theme="d">
<li>Items ToDay</li>
.
.
<li>Item Week</li>
.
.
<li>Item month</li>
.
.
<li>Item 4</li>
.
.
</ul> 
```

我需要使用不同的搜索条件过滤上述列表视图，例如用户可以按今天、本周、本月等过滤，因此我决定使用 jquery ajax 调用从我的操作（MVC）中获取数据并生成列表，然后附加到父 ul 列表视图，例如，

```
 $(document).ready(function () {
        $('#btnToday').click(function () {
            $.ajax({
                url: '/FieldVisit/GetTodaystores',
                data: {},
                type: 'get',
                success: function (data) {

                    $.each(data, function (k, v) {

                        var g = "<li <a href='#'>>" +
                                "<h3>" + v.CompanyName + "</h3>" +
                                "</a></li>";
                        $("#ulstorelist").append(g);
                        $("#ulstorelist").listview('refresh');
                        $("#ulstorelist").trigger('create');
                    });
                }
            });
        });
}); 
```

但是 jquery 移动样式都消失了。但是当我将内联样式编写为 li 时，它工作正常，但我需要 jquery 移动样式。动态生成列表视图项时如何保留 jquery 移动样式。请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T04:49:45.107

可能尝试调用 $("#ulstorelist").listview('refresh'); 在 $each 循环之后。我不确定在触发创建之前调用它是否可能是一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T02:44:01.400

这可能是你的问题：

```
var g = "<li <a href='#'>>" + 
```

...应该是：

```
var g = "<li><a href='#'>" + 
```

无效的 HTML 导致各种布局问题的情况并不少见。

# android - Android：将时间选择器片段数据发送到活动

> ID：14750803
> 
> 赞同：3
> 
> 时间：2013-02-07T12:11:25.337
> 
> 标签：android, fragment, timepicker

我使用此指南创建了一个带有时间选择器的片段：

[http://developer.android.com/guide/topics/ui/controls/pickers.html](http://developer.android.com/guide/topics/ui/controls/pickers.html)

现在我想将设置的时间发送回持有片段的活动。我搜索了如何做到这一点，我发现了这个：

[http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity](http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity)

我试图在我的 Fragment 中创建一个 onTimeSet 接口，但由于我正在实现 TimePickerDialog.OnTimeSetListener，它要求我重写 onTimeSet 方法。我发现我可以简单地调用 getActivity() 发送数据，但我不确定这是否是一个好的选择，因为 android 开发页面建议使用接口方法。

我应该怎么办？

这是一些代码：

```
public class TimePickerFragment extends DialogFragment
implements TimePickerDialog.OnTimeSetListener {

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    // Use the current time as the default values for the picker
    final Calendar c = Calendar.getInstance();
    int hour = c.get(Calendar.HOUR_OF_DAY);
    int minute = c.get(Calendar.MINUTE);

    // Create a new instance of TimePickerDialog and return it
    return new TimePickerDialog(getActivity(), this, hour, minute,
            DateFormat.is24HourFormat(getActivity()));
}

@Override
public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
    // WHAT TO DO??
}

} 
```

在我的活动中：

```
.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            DialogFragment newFragment = new TimePickerFragment();
            newFragment.show(CreateStopActivity.this.getSupportFragmentManager(), "timePicker");
        }

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:58:55.233

你可以用构造函数传递它。

```
 Button timeBtn;

    public TimePickerFragment(Button btn) {
        timeBtn = btn;
    }

    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
        timeBtn.setText(hourOfDay + ":" + minute);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:35:22.597

我认为你应该在你的活动中实现 TimePickerDialog.OnTimeSetListener 接口。在哪里创建 TimePickerFragment。像这样：

```
public class YourActivity extends FragmentActivity implements TimePickerDialog.OnTimeSetListener {
    @Override
    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
        // DO HERE ANYTHING WITH DATA
    }
} 
```

并且不要忘记在构造函数中将您的活动作为 OnTimeSetListener 传输。

```
dialog = new TimePickerDialog(yourContext, yourActivity, hourOfDay, minute, is24HourView); 
```

观看[TimePickerDialog](http://developer.android.com/reference/android/app/TimePickerDialog.html#TimePickerDialog%28android.content.Context,%20android.app.TimePickerDialog.OnTimeSetListener,%20int,%20int,%20boolean%29)了解更多信息

# php - 检测字段变化 - cakePHP

> ID：14750809
> 
> 赞同：0
> 
> 时间：2013-02-07T12:11:53.733
> 
> 标签：php, mysql, cakephp

**我想要的是**

我想查看表上的哪些字段已更改，并将该名称保存到编辑列下的数据库中。

**是）我有的**

目前，不多。只是标准的 cakePHP 烘焙编辑视图和控制器。我以前做过，但不是用 cakePHP。我所做的是检索记录，如果它与用户输入的不同，则将编辑的列的名称保存在`edit`与该行对应的列中。

**我的问题**

有人能告诉我如何将用户输入与数据库中的内容进行比较吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T12:25:12.533

诸如[“可记录”行为之类的行为](https://github.com/dereuromark/tools/blob/master/Model/Behavior/LogableBehavior.php)已经做到了这一点并单独存储信息。我建议你也这样做。“更改”不一定需要放在同一张表中。但是，如果您觉得他们这样做，您可以制作自己的“修改后的”可记录行为，该行为仅创建“差异”并将其存储到您在同一记录上选择的字段中。

PS：您可能还想看看[RevisionBehavior](https://github.com/dereuromark/tools/blob/master/Model/Behavior/LogableBehavior.php)。它还包含一些差异算法。然后是[WhoDidIt 行为](https://github.com/dereuromark/tools/blob/master/Model/Behavior/WhoDidItBehavior.php)，它存储最后修改记录的用户。不过，在同一张桌子上。因此，结合上述内容应该可以解决问题。

无论哪种方式：

*   在模型本身或（更清洁）上使用回调（beforeSave/afterSave）作为行为
*   计算差异
*   将差异存储在单独的表中，或者在您的情况下存储在额外的表字段中。

实际上，在这里写一些可以完成工作的东西非常简单。这里的自愿练习是把它写得更“通用”。也许您想在将来为其他模型再次重用相同的功能？那时复制和粘贴将是非常糟糕的风格。这里的目标是创建一些可以轻松重用的通用代码。如果您的初始代码有效，请尝试将其重写为通用的 ChangesBehavior，您可以将其附加到您喜欢的任意数量的模型上。您可以查看链接的示例或查看其他行为，以了解如何做到这一点。

您也可以在 github/plugins.cakephp 中发布您的行为，并再次回馈社区。也许其他人也觉得它有用。

# zend-framework2 - 如何在 Zend Framework 2 中查询复杂数据并返回正确对象中的数据？

> ID：14750815
> 
> 赞同：1
> 
> 时间：2013-02-07T12:12:08.787
> 
> 标签：zend-framework2

我刚开始使用 ZF2，遇到了一个绊脚石，我在互联网上找不到任何有用的建议。

设置从单个表中检索数据并将其直接注入特定模型很容易，例如，从“学校”表的单行中提取数据并注入“学校”模型。

但是，我有一些稍微复杂的数据，无法弄清楚如何以正确模型的形式返回数据。例如，从学校地址表中提取多个地址，并在学校表上进行连接。

我的 AddressTable 对象中有以下方法...

```
public function fetchAllSchoolAddresses($school_id)
{   
    $stmt = $this->adapter->createStatement();
    $stmt->prepare("CALL get_school_addresses(3)");
    $stmt->getResource()->bindParam(3, $school_id, \PDO::PARAM_INT, 3);
    $resultSet = $stmt->execute();

    $addresses = new \ArrayObject();

    if(!empty($resultSet)){
        foreach ($resultSet as $result) {
            $addresses->append($result);
        }
    }

    return $addresses;
} 
```

这很好地返回了一个地址数据数组，但我希望这些结果作为地址对象返回。我不知道该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:21:04.633

ZF2 带有一些标准的 Hydrator，如果您愿意，可以对其进行扩展/修改。

[http://framework.zend.com/manual/2.0/en/modules/zend.stdlib.hydrator.html](http://framework.zend.com/manual/2.0/en/modules/zend.stdlib.hydrator.html)

您可以为您的 School 对象创建一个 Hydrator，并为您的 Address 对象创建一个 Hydrator。例如，给定数据库中的数组数据，水合器将为您构建对象

例如，您要为您的 School Object 补水，然后找到所有地址（如上）并使用另一个补水器来补水。然后，您将这些添加到 School 对象以根据需要获取您的对象图

```
$school->addAddress($address); // etc 
```

在这里查看使用 Hydrators 和 Hydrating ResultSets 的示例：

[http://blog.evan.pro/zf2-tablegateway-hydration](http://blog.evan.pro/zf2-tablegateway-hydration) [http://framework.zend.com/manual/2.0/en/modules/zend.db.result-set.html](http://framework.zend.com/manual/2.0/en/modules/zend.db.result-set.html)

例如，您可以执行以下操作：

```
// How ever you want to get your database result do it here..
// this is where you get all addresses for your School
$stmt = $driver->createStatement($sql);
$stmt->prepare($parameters);
$result = $stmt->execute();

$resultSet = new HydratingResultSet(new ReflectionHydrator, new SchoolAddress);
$resultSet->initialize($result);
foreach ($resultSet as $address) {
    $school->addAddress($address);
    echo $address->getCity() . ' ' . $user->getPostcode() . PHP_EOL;
} 
```

您将有一个地址结果集（集合）添加到您的学校。那是代码只是从文档中的代码中窃取的一个非常粗略的示例，以了解您的工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:47:37.917

这个怎么样？

```
if(!empty($resultSet)){
    foreach ($resultSet as $result) {
        $address = new Address();
        $address->exchangeArray($result);
        $addresses->append($address);
    }
} 
```

# html - 如何为我的 django 应用程序编写注销功能？

> ID：14750821
> 
> 赞同：1
> 
> 时间：2013-02-07T12:12:20.043
> 
> 标签：html, python-2.7, django-templates, django-views

这里是`views.py`：

```
def authent(request):
    user = request.POST['username'] 
    passw = request.POST['password']
    featureDetail = []
    loginrole = People_Login.objects.get(User_Name = user, Password = passw)
    features = Role_FGroup_FSubGroup_FItems_Map.objects.filter(Role_Id = loginrole.id)
    for p in features:
        dic = {}
        dic['ID'] = p.id
        dic['Role_ID'] = p.Role_Id.id
        dic['FGID'] = p.Feature_Group_Id.id
        dic['FSGID'] = p.Feature_SubGroup_Id.id
        dic['FIID'] = p.Feature_Items_Id.id
        dic['SFGNAME'] = p.Feature_Group_Id.Name
        dic['SFSGNAME'] = p.Feature_SubGroup_Id.Name
        dic['SFINAME'] = p.Feature_Items_Id.Name
        featureDetail.append(dic)
    featuresgroups = Role_Feature_Group_Map.objects.filter(Role_Id = loginrole.Role_Id.id)
    request.session['feature_list'] = featureDetail
    request.session['featuresgroups'] = featuresgroups
    return render_to_response('UAM/index.html',{"contacts":featureDetail,'len':len(featureDetail)-1,'test1':"shiva",'test2':"shiva","featuresgroups":featuresgroups}) 
```

对于这个`authent`函数，如何编写我的注销函数（因为我是 Django 新手）？请放轻松，给我注销功能的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:27:39.077

我建议使用 Django 的[内置身份验证功能](https://docs.djangoproject.com/en/dev/topics/auth/default/)，而不是推出自己的身份验证功能。否则，您一定会犯很多错误（例如[存储纯文本密码](http://plaintextoffenders.com/about/)，我认为这是您正在做的事情）并重新发明许多轮子（例如会话处理、组和权限等）。如果你需要存储比 Django 支持的更多的用户信息，你可以在表单或[用户配置文件](http://www.turnkeylinux.org/blog/django-profile)中完成。

无论如何，如果“登录”是指“在会话中拥有这些值”，“注销”你只需要删除它们，不是吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T19:07:36.000

这真的很容易：

```
from django.contrib.auth import logout

def logout_page(request):
    logout(request)
    return HttpResponseRedirect('/') 
```

# android - 尝试读取文件时将android音频录制的文件作为电子邮件的附件发送错误（URI路径不是绝对的）

> ID：14750827
> 
> 赞同：0
> 
> 时间：2013-02-07T12:12:36.600
> 
> 标签：android, email, uri, attachment, recording

我正在使用媒体记录器和以下代码保存音频文件：

```
 public class AudioRecorder {

 final MediaRecorder recorder = new MediaRecorder();
 final String path;

  /**
   * Creates a new audio recording at the given path
   */
  public AudioRecorder(String path) {
  this.path = sanitizePath(path);
}

public static String sanitizePath(String path) {
   if (!path.startsWith("/")) {
      path = "/" + path;
   }
   if(path.endsWith("/")){
      path = path + "/";
  }
  return path;
 }

 /**
  * Starts a new recording.
  */
  public void start() throws IOException {
  // make sure the directory we plan to store the recording in exists
  File directory = new File(path).getParentFile();
  if (!directory.exists() && !directory.mkdirs()) {
  throw new IOException("Path to file could not be created.");
 }

   recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
   recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
   recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
   recorder.setOutputFile(path);
   recorder.prepare();
   recorder.start();
  }

 /**
  * Stops a recording that has been previously started.
  */
 public void stop() throws IOException {
 recorder.stop();
 recorder.release();
 }
} 
```

然后我使用以下代码调用这个类

```
 int timeOfRecroding = AppPrefs.getSettingsAdditionalTimeOfRecording() * 60 * 1000;
        ContextWrapper cw = new ContextWrapper(getApplicationContext());
    File directory = cw.getDir("media", Context.MODE_PRIVATE);

    final String pathAndName = AudioRecorder.sanitizePath(directory.getAbsolutePath() + "/LocRec.3gp");
    final AudioRecorder audioRecorder = new AudioRecorder(pathAndName);

    if(Constants.isTest){
        showToast("Starting recording for [" + AppPrefs.getSettingsAdditionalTimeOfRecording() + "] minutes");
        showToast("Recording to path: [" + pathAndName + "]");

    } 
```

然后当然使用 audioRecorder.start(); 和 audioRecorder.stop(); 做实际录音

录制完成后，我使用相同的 pathAndName 获取文件并将其作为电子邮件附件发送，使用以下代码获取文件

```
new File(new URI(AppPrefs.getInfoToSend(Constants.SERVICE_CODE_SEND_RECORDING, Constants.MESSAGE_TYPE_EMAIL))) 
```

但这是抛出异常

```
URI is not absolute: /data/data/com.testrecoding.record/app_media/LocRec.3gp 
```

感谢您的帮助，谢谢， Wassim

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T23:58:19.990

听起来可能很愚蠢，但我找到了一个转机，而不是真正的转机，不知道我一开始是怎么错过的，直接从路径获取文件而不使用 URI

```
 new File("PathOfFIle") 
```

# .htaccess - htaccess 工作，但布局坏了？

> ID：14750829
> 
> 赞同：0
> 
> 时间：2013-02-07T12:12:45.263
> 
> 标签：.htaccess, mod-rewrite

我对 htacess 和 modrewrite 了解不多，所以我发现自己陷入了另一个困境，为自己接近这个新领域。

我将针对 2 个不同的问题分开我的查询，以使答案具有主题性，并更好地针对寻找自己问题的解决方案的用户。

这是这两个查询中的第二个；

我的 htaccess 文件中有以下内容；

```
RewriteRule ^install/([a-zA-Z0-9]+)/$ index.php?module=faq&page=howto&program=$1 
```

这个概念是**install/abcd/**会调用**index.php?module=faq&page=howto&program=abcd**

这样可行。它提取内容，匹配它并显示它的含义。我已经使用服务器变量向我展示了正在模拟的内容并且它匹配。

然而，页面上的 CSS 和图像被剥离，因为它们是相对于文档的，而不是静态分配的。

我只使用 htaccess（我猜是现在？）作为一种解决方案，目的是很快就会很快实现另一种解决方案。目的是为我们的客户提供易于阅读的 URL 以用于支持目的，而不是重写整个站点。搜索引擎优化不是一个主要问题，因为我们的网站仅供其目标用户使用，而不是广泛的受众。

除了静态分配 css、JS 和图像文件之外，有没有办法解决这个问题，以便页面显示样式并使用 javascript 机智？

感谢您的帮助，我希望这个问题是可以理解的，并且一如既往地感谢你们花时间帮助我们所有人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:02:52.337

我们需要使 css 链接成为绝对链接（以 / 开头）或通过向标头添加额外属性来为所有相对链接添加基础：

```
<base href="/"> 
```

这意味着我们从 /test/ 的子目录开始。所以而不是css；

```
http://domain.com/install/abcd/style.css 
```

它会改为

```
http://domain.com/style.css 
```

这是我遇到的问题，因为我的所有 CSS 和 JS 都相对包含（允许我更改脚本所在的目录）。

上述调整实际上已经解决了我最初的问题，但是不使用 PHP 可能会给一些希望能够部署脚本并允许它们完全动态而无需编辑基础的人带来问题。祝你好运！

# c++ - 使用 DrawEllipse (GDI+) 绘制手写笔画点

> ID：14750832
> 
> 赞同：3
> 
> 时间：2013-02-07T12:12:49.433
> 
> 标签：c++, drawing, gdi+, point, drawellipse

我正在开发一个绘制手写笔画的应用程序。笔划在内部存储为点向量，它们可以转换为`std::vector<Gdiplus::Point>`. 点彼此如此接近，每个点的简单绘制应该会产生连续笔划的图像。

我正在使用[`Graphics.DrawEllipse`](http://msdn.microsoft.com/en-us/library/ms536067%28v=vs.85%29.aspx)(GDI+) 方法来绘制这些点。这是代码：

```
// prepare bitmap:
Bitmap *bitmap = new Gdiplus::Bitmap(w, h, PixelFormat32bppRGB);
Graphics graphics(bitmap);

// draw the white background:
SolidBrush myBrush(Color::White);
graphics.FillRectangle(&myBrush, 0, 0, w, h);

Pen blackPen(Color::Black);
blackPen.SetWidth(1.4f);

// draw stroke:
std::vector<Gdiplus::Point> stroke = getStroke();
for (UINT i = 0; i < stroke.size(); ++i)
{
    // draw point:
    graphics.DrawEllipse(&blackPen, stroke[i].X, stroke[i].Y, 2, 2);
} 
```

最后我只是将它保存`bitmap`为PNG图像，有时会出现以下问题：

![问题](../Images/1a0c4c8b09ff895de2826f5ee722faf1.png)

当我在 stroke 中看到这个***“洞”时***，我决定再次绘制我的点，但这一次，使用宽度和高度设置为`1`的椭圆，使用`redPen`宽度设置为`0.1f`。因此，在上面的代码之后，我添加了以下代码：

```
Pen redPen(Color::Red);
redPen.SetWidth(0.1f);

for (UINT i = 0; i < stroke.size(); ++i)
{
    // draw point:
    graphics.DrawEllipse(&redPen, stroke[i].X, stroke[i].Y, 1, 1);
} 
```

我得到的新斯托克看起来像这样： ![问题2](../Images/b8b81f9a5ccc35a588a6a6c17cf1e179.png)

当我使用[`Graphics.DrawRectangle`](http://msdn.microsoft.com/en-us/library/ms536003%28v=vs.85%29.aspx)而不是`DrawEllipse`在绘制这个新的红色笔划时，它永远不会发生这种笔划（通过绘制矩形绘制）会有不同的宽度或孔：

![矩形](../Images/76678c9fb862dd21167ed055a75aaf5a.png)

我想不出任何可能的原因，为什么画圈会导致这种奇怪的行为。为什么当我使用时，中风总是连续的并且从未以任何方式变形[`Graphics.DrawRectangle`](http://msdn.microsoft.com/en-us/library/ms536003%28v=vs.85%29.aspx)？谁能解释一下，这是怎么回事？我错过了什么吗？

顺便说一句，我使用的是 Windows XP（例如，如果它是一个已知的错误）。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T16:17:27.093

我做了错误的假设，如果我用[`Graphics.DrawEllipse`](http://msdn.microsoft.com/en-us/library/ms536067%28v=vs.85%29.aspx)宽度约 2px 的笔绘制半径等于 2px 的圆，它将导致绘制直径约 4-5 px 的实心圆。
但是我发现我实际上不能在用这种方式画圆时依赖笔的宽度。此方法仅用于绘制这种形状的边框，因此绘制填充椭圆最好使用[`Graphics.FillEllipse`](http://msdn.microsoft.com/en-us/library/ms536067%28v=vs.85%29.aspx).

另一个需要考虑的非常重要的事实是，这两个函数都将指定***“指定椭圆边界的矩形的左上角”的***坐标作为参数，因此我应该从两个坐标中减去一半的半径以确保原始坐标指定这个圆的中间。

这是新代码：

```
// draw the white background:
SolidBrush whiteBrush(Color::White);
graphics.FillRectangle(&whiteBrush, 0, 0, w, h);

// draw stroke:
Pen blackBrush(Color::Black);
std::vector<Gdiplus::Point> stroke = getStroke();
for (UINT i = 0; i < stroke.size(); ++i)
    graphics.FillEllipse(&blackBrush, stroke[i].X - 2, stroke[i].Y - 2, 4, 4);

// draw original points:
Pen redBrush(Color::Red);
std::vector<Gdiplus::Point> origStroke = getOriginalStroke();
for (UINT i = 0; i < origStroke.size(); ++i)
    graphics.FillRectangle(&redBrush, origStroke[i].X, origStroke[i].Y, 1, 1); 
```

产生以下结果：

![正确的笔画](../Images/beb91ac82e984b2e13f410c6cda634f1.png)

因此，如果有人会遇到和我一样的问题，解决方案是：

![在此处输入图像描述](../Images/c2089ed5bf77e515cc4df6411aebad85.png)

# xml - jquery读取子xml数据

> ID：14750834
> 
> 赞同：0
> 
> 时间：2013-02-07T12:12:52.780
> 
> 标签：xml, ajax, jquery, xml-parsing

我想知道如何修复我的脚本，我希望在您单击按钮时发出警报，但它会跟上同一页面上 xml 发生的变化。当然，当我单击按钮时，我认为这个脚本会起作用，但什么也没有发生。我想我会看看我是否可以从更有经验的人那里得到任何意见。

```
$(document).ready(function(){

function get_info() {
    $.ajax({
        type: "GET",
        url: "xmldata/product.xml",
        dataType: "xml",
        cache: false,
        complete: function(doc) {
            var product = $(doc.responseText).find("product").text() == 1;
            var name = product.next().children("name").text();
            var cost = product.next().children("cost").text();
            $("#xmlalert").click(function(){
                                alert(cost);
            })
        }
    });

}
setInterval(function() {
    get_info();
}, 5000);
}); 
```

xml数据如图：

```
<?xml version="1.0" encoding="utf-8"?>
<store>
   <product>1</product>
    <info>
        <name>Toy</name>
        <cost>1196</cost>
    </info>
</store> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:19:29.040

html代码

```
<button class="button" id="1">One</button>
<button class="button" id="2">Two</button> 
```

更改您的 javascript 代码，例如：

```
$(document).ready(function(){
      function get_info() {
        $.ajax({
            type: "GET",
            url: "xmldata/product.xml",
            dataType: "xml",
            cache: false,
            complete: function(doc) {
            $(".button").click(function(event){
                console.log($(this).attr('id'));
                var product = $(doc.responseText).find("product").eq($(this).attr('id')-1);
                var currentIndex=0;
                product.each(function(index){
                    var name = $(this).next().children("name").text();
                    var cost = $(this).next().children("cost").text();
                    alert(cost);    
                });
            });
        }
        });

        }
        setInterval(function() {
            get_info();
        }, 2000);
}); 
```

XML 是

```
<?xml version="1.0" encoding="utf-8"?>
<store>
   <product>1</product>
    <info>
        <name>Toy</name>
        <cost>1196</cost>
    </info>
    <product>2</product>
    <info>
        <name>Toy 2</name>
        <cost>11962</cost>
    </info>

</store> 
```

# xcode - 如何更新 MasterViewController 中的表

> ID：14750835
> 
> 赞同：0
> 
> 时间：2013-02-07T12:12:54.030
> 
> 标签：xcode, ipad

我正在使用主从模板。我在详细视图中有一个分段控件，并且我已将 MasterViewController 设置为委托。这使我能够给用户选择。我知道分段控件正在工作并将选择传递给 MVC。

我希望每个选择都能触发一组新数据，然后可以将其加载到 MasterViewController 中的表视图中。我的问题是我找不到更新表格视图中数据的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:23:04.203

您可以使用声明的实例变量在更改`MasterViewController`时进行更新`UISegmentedControl`。基于此，当你回到`MasterViewController`; 用它`viewWillAppear`来`[tableView reloadData]`

告诉我我是否把你的问题*弄错了*。

编辑：

取个名字`integer`吧`segmentIndex`；在 Segment 更改时更新。根据需要显示的`segmentIndex`负载值`dataSource``UITableView``MasterViewController`

编辑2：

当`UISegmentedControl`' 值改变时，放`mvc.segmentIndex = (currentValueOfYourSegmentedControl)`; 然后在`MasterViewController`'s`viewWillAppear`

```
switch (self.segmentIndex)
{
    case 0:
           // Set Datasource for First Choice.
           break;
    case 0:
           // Set Datasource for Second Choice.
           break;
    case 0:
           // Set Datasource for Third Choice.... and so on...
           break;
    default:
           // Default Behavior
           break;
} 
```

希望你明白我的意思。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:07:53.513

如果是我，我会使用通知而不是代表。即使用detailViewController 中的valueChanged 检测segmentedControl 值的变化，然后从masterViewController 接收的detailViewcontroller 中发布一个NSNotification。

最简单的方法是：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"segmentOneChosen" object:nil userInfo:nil]; 
```

你有 masterViewController 注册这个通知：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(segmentOneChosen) name:@"segmentOneChosen" object:nil]; 
```

最好将所选值与通知一起传递，这样您就不需要为每个段单独通知。

！！未经测试的代码：

```
NSArray *keys = [NSArray arrayWithObjects:@"segmentChosen", nil];
NSArray *objects = [NSArray arrayWithObjects:[NSNumber numberWithInt:self.topicsChoiceSegControl.selectedSegmentIndex], nil];
NSDictionary * dict = [NSDictionary dictionaryWithObjects:objects forKeys:keys];
[[NSNotificationCenter defaultCenter] postNotificationName:@"segmentChosen" object:nil userInfo:dict];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(segmentChosen:) name:@"segmentChosen" object:nil];

-(void) segmentChosen:(NSNotification *)notification {
    NSNumber *segmentChosenNum = [[notification userInfo] valueForKey:@"segmentChosen"];
} 
```

我知道这本身并不能回答您的问题，但它确实为您试图克服的问题提供了另一种解决方案。

# android - 通过软键盘执行单击 enter

> ID：14750836
> 
> 赞同：0
> 
> 时间：2013-02-07T12:12:54.293
> 
> 标签：android, interface, android-softkeyboard, enter

嗯..也许是一个有点愚蠢的问题，但我自己不明白......

```
 package com.example.wettkampftimerbt;
    import android.content.Intent;
    import android.inputmethodservice.Keyboard.Key;
    import android.os.Bundle;
    import android.util.Log;
    import android.view.KeyEvent;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.EditText;

    public class ServMPW extends Activity_ActivityGroup implements OnClickListener{

        Button enter, cancel;
        EditText eingabe, eingabe2, masterpw;
        String pwx, eingabex, pass, adminacchint1x, adminacchint2x;
    private final String PREFS_NAME = "prefs";  
    private final String PREFS_PW = "pw";
    private final String PREFS_lang = "lang";
    private final String TITLE5 = "title5";
    private final String ADMINACCHINT1 = "adminacchint1";
    private final String ADMINACCHINT2 = "adminacchint2";
        @Override
        public void onCreate(Bundle savedInstanceState) {
             super.onCreate(savedInstanceState);
     setContentView(R.layout.servmpw);   
     //((TextView)((FrameLayout)((LinearLayout)((ViewGroup) getWindow().getDecorView()).getChildAt(0)).getChildAt(0)).getChildAt(0)).setGravity(Gravity.CENTER);
     String title5x=(getSharedPreferences(PREFS_lang, MODE_PRIVATE).getString(TITLE5, "Administrationszugang"));
    this.setTitle(title5x);
     adminacchint1x=(getSharedPreferences(PREFS_lang, MODE_PRIVATE).getString(ADMINACCHINT1, "Passwort"));
     adminacchint2x=(getSharedPreferences(PREFS_lang, MODE_PRIVATE).getString(ADMINACCHINT2, "falsches Passwort"));

            enter=(Button)findViewById(R.id.enter);
            cancel=(Button)findViewById(R.id.cancel);
            eingabe=(EditText)findViewById(R.id.eingabe);
            masterpw=(EditText)findViewById(R.id.masterpw);
            eingabe.setHint(adminacchint1x);
            eingabe2=(EditText)findViewById(R.id.eingabe2);
            enter.setOnClickListener(this);
            cancel.setOnClickListener(this);

    }
            public void onClick (View v){

             if (v==cancel){
                    finish();}
            else if (v == enter){
                entermeth();
            }   

                    else {
                eingabe.setText("");
                eingabe.setHint(adminacchint2x);}}

public void OnKey (View v, int keyCode, KeyEvent event) 
{
    if (keyCode==66)
        entermeth();
}
public void entermeth(){

    eingabe2.setText(getSharedPreferences(PREFS_NAME, MODE_PRIVATE).getString(PREFS_PW, "bbb"));  
    pwx = eingabe2.getText().toString();
    Log.e("pw", PREFS_PW + "." + pwx);
    eingabex = eingabe.getText().toString(); 
    masterpw.setText("aaa");
    String masterpwx = masterpw.getText().toString();
    Log.e("pw:", masterpwx);
    if (eingabex.equals(pwx)||(eingabex.equals(masterpwx))){
        Intent admin = new Intent (ServMPW.this, Admin.class);
        ServMPW.this.finish();
        startActivity(admin);}

}
} 
```

如果按下软键盘上的回车按钮，我想点击我自己的回车按钮。但它不起作用......我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:24:00.293

在你的`EditText`你可以绑定`OnEditorActionListener`. 像这样的东西

```
editText.setOnEditorActionListener(new TextView.OnEditorActionListener() {
   @Override
   public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
       if (actionId == EditorInfo.IME_ACTION_DONE) {
           //do here your stuff here
           return true;
       }
       return false;
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:17:07.103

什么都没有调用该`OnKey`方法。这就是你错过的。此外，强制点击也不是一个好的编程习惯。相反，您应该创建一个方法`private doEnterActions(){ }`，并在输入键和输入按钮上调用该方法。

编辑：

就像你 setClickListener 到你的按钮（由活动实现）你必须使活动实现，并设置为关键事件的侦听器。这是使用完成的`enter.setOnKeyListener()`

# iphone - RSS 解析错误 iPhone

> ID：14750839
> 
> 赞同：1
> 
> 时间：2013-02-07T12:13:24.043
> 
> 标签：iphone, xml, rss, tableview, rss-reader

我正在构建包含 RSS 阅读器的东西。一切似乎都运行良好，除了每个描述（使用下面的代码从 RSS 提要中获取），在描述之前，有一个“

“我如何删除它？

```
#import "RSSItem.h"
#import "GTMNSString+HTML.h"

@implementation RSSItem
-(NSAttributedString*)cellMessage
{
    if (_cellMessage!=nil) return _cellMessage;

    NSDictionary* boldStyle = @{NSFontAttributeName: [UIFont fontWithName:@"Helvetica-Bold" size:16.0]};
    NSDictionary* normalStyle = @{NSFontAttributeName: [UIFont fontWithName:@"Helvetica" size:16.0]};

    NSMutableAttributedString* articleAbstract = [[NSMutableAttributedString alloc] initWithString:self.title];

    [articleAbstract setAttributes:boldStyle
                             range:NSMakeRange(0, self.title.length)];

    [articleAbstract appendAttributedString:
     [[NSAttributedString alloc] initWithString:@"\n\n"]
     ];
    int startIndex = [articleAbstract length];

    NSString* description = [NSString stringWithFormat:@"%@<p><p><em>...", [self.description substringToIndex:200]];
    description = [description gtm_stringByUnescapingFromHTML];
    [articleAbstract appendAttributedString:
     [[NSAttributedString alloc] initWithString: description]
     ];

    [articleAbstract setAttributes:normalStyle
                             range:NSMakeRange(startIndex, articleAbstract.length - startIndex)];

    _cellMessage = articleAbstract;
    return _cellMessage;
}

@end 
```

这是显示 RSS 提要的 MasterViewController.m 文件的代码：

```
#import "MasterViewController.h"
#import "DetailViewController.h"
#import "TableHeaderView.h"
#import "RSSLoader.h"
#import "RSSItem.h"
@interface MasterViewController () {
    NSArray *_objects;
    NSURL* feedURL;
    UIRefreshControl* refreshControl;
}
@end
@implementation MasterViewController
-(void)refreshFeed
{
    RSSLoader* rss = [[RSSLoader alloc] init];
    [rss fetchRssWithURL:feedURL
                complete:^(NSString *title, NSArray *results) {
                    dispatch_async(dispatch_get_main_queue(), ^{
                        [(TableHeaderView*)self.tableView.tableHeaderView setText:title];
                        _objects = results;
                        [self.tableView reloadData];
                        [refreshControl endRefreshing];

                    });
                }];
}

-(void)viewDidLoad
{
    [super viewDidLoad];
    feedURL = [NSURL URLWithString:@"http://pipes.yahoo.com/pipes/pipe.run?_id=c47dcdc375e72c5ad08f3470eea6afa0&_render=rss"];
    refreshControl = [[UIRefreshControl alloc] init];
    [refreshControl addTarget:self
                       action:@selector(refreshInvoked:forState:)
             forControlEvents:UIControlEventValueChanged];
    [self.tableView addSubview: refreshControl];
    [self refreshFeed];
}
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    RSSItem *item = [_objects objectAtIndex:indexPath.row];
    CGRect cellMessageRect = [item.cellMessage boundingRectWithSize:CGSizeMake(200,10000)
                                                            options:NSStringDrawingUsesLineFragmentOrigin
                                                            context:nil];
    return cellMessageRect.size.height;
}
-(void) refreshInvoked:(id)sender forState:(UIControlState)state {
    [self refreshFeed];
}
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return _objects.count;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];
    RSSItem *object = _objects[indexPath.row];
    cell.textLabel.attributedText = object.cellMessage;
    cell.textLabel.numberOfLines = 5;
    return cell;
}
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    return YES;
}
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
        RSSItem *object = _objects[indexPath.row];
        self.detailViewController.detailItem = object;
    }
}
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"showDetail"]) {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        NSDate *object = _objects[indexPath.row];
        [[segue destinationViewController] setDetailItem:object];
    }
}

-(IBAction)btn_regPressed:(id)sender
{
    NSLog(@"start to dissmis modal");
    [self dismissViewControllerAnimated:YES completion:nil];
}

@end 
```

任何想法发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:41:26.577

替换以下代码：

```
NSString* description = [NSString stringWithFormat:@"%@<p><p><em>...", [self.description substringToIndex:200]]; 
```

和：

```
NSString* description = [[NSString stringWithFormat:@"%@<p><p><em>...", [self.description substringToIndex:200]] stringByReplacingOccurrencesOfString:@"\"" withString:@""]; 
```

# c# - 我想在不同级别执行两个元素的乘积之和

> ID：14750840
> 
> 赞同：-1
> 
> 时间：2013-02-07T12:13:29.933
> 
> 标签：c#, xml, xslt, xpath, xslt-1.0

我尝试了以下代码，但它不起作用。我取了一个字符串并在其中写入 XSLT 并加载它 XslCompiledTransform 对象。

```
 <xsl:sequence select=
        "sum(//Item/(cost * related_id/Item/quantity))"/> 
```

源 XML：

```
<AML>
  <Item>
    <cost>
      40
    </cost>
    <related_id>
      <Item>
        <quantity>2</quantity>
      </Item>
    </related_id>
  </Item>
  <Item>
    <cost>
      50
    </cost>
    <related_id>
      <Item>
        <quantity>10</quantity>
      </Item>
    </related_id>
  </Item>
</AML> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:10:05.190

正如我在评论中所说，`xsl:sequence`您尝试使用的 XPath 语法在 XSLT 1.0（XslCompiledTransform 使用）中不可用，但您可以通过使用递归模板来获得公式的总和：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text" indent="yes"/>

  <xsl:template match="/">
    <xsl:call-template name="SumSet">
      <xsl:with-param name="items" select="/*/Item" />
    </xsl:call-template>
  </xsl:template>

  <xsl:template name="SumSet">
    <xsl:param name="items" />

    <xsl:if test="$items">
      <xsl:variable name="currentValue">
        <xsl:apply-templates select="$items[1]" />
      </xsl:variable>
      <xsl:variable name="remainderSum">
        <xsl:call-template name="SumSet">
          <xsl:with-param name="items" select="$items[position() > 1]" />
        </xsl:call-template>
      </xsl:variable>

      <xsl:value-of select="$currentValue + $remainderSum"/>
    </xsl:if>
    <xsl:if test="not($items)">0</xsl:if>
  </xsl:template>

  <xsl:template match="Item">
    <xsl:value-of select="cost * related_id/Item/quantity"/>
  </xsl:template>
</xsl:stylesheet> 
```

当它在您的输入 XML 上运行时，结果是：

```
580 
```

那将是通用方法，但由于您提到您正在使用 XslCompiledTransform，您可以使用`msxsl:node-set()`来简化此任务：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:msxsl="urn:schemas-microsoft-com:xslt">
  <xsl:output method="text" indent="yes"/>

  <xsl:template match="/">
    <xsl:variable name="values">
      <xsl:apply-templates select="/*/Item" />
    </xsl:variable>

    <xsl:value-of select="sum(msxsl:node-set($values)/*)"/>
  </xsl:template>

  <xsl:template match="Item">
    <itemValue>
      <xsl:value-of select="cost * related_id/Item/quantity"/>
    </itemValue>
  </xsl:template>
</xsl:stylesheet> 
```

`580`当在您的输入 XML 上运行时，这也会产生值。

# glsl - 使用 WebGL 重新采样图像

> ID：14750842
> 
> 赞同：2
> 
> 时间：2013-02-07T12:13:33.510
> 
> 标签：glsl, webgl

用户可以通过拖放或在对话框窗口中选择来上传图像。这些文件可能很大（尺寸和大小），所以在上传之前我想用 WebGL 调整大小。

着色器代码取自[这个问题](https://stackoverflow.com/questions/14366672/how-can-i-improve-this-webgl-glsl-image-downsampling-shader)，但我看到黑色像素而不是调整大小的图片

[示例代码](http://jsfiddle.net/YbQx7/2/)- 运行并将 pict 拖到结果框架。

```
(function(){

    'use strict';

    var gl,
        resizeToWidth = 1024;

function init(){

    function cancel(e) {
        e.preventDefault();
        e.dataTransfer.dropEffect = 'copy';
    }

    document.addEventListener('dragenter', cancel, false);
    document.addEventListener('dragover', cancel, false);

    document.addEventListener('drop', function(e){

        e.preventDefault();
        e.stopPropagation();

        var reader = new FileReader();
        reader.onload = function(e){

            var textureImage = new Image();
            textureImage.onload = function(){

                var ratio = textureImage.width/textureImage.height;

                gl.viewportWidth = wrap.canvas.width = resizeToWidth;
                gl.viewportHeight = wrap.canvas.height = resizeToWidth/ratio;

                wrap.createTexture(textureImage);
                wrap.initScene();
                wrap.drawScene();

                //var domImage = document.createElement("img");
                //domImage.src = wrap.canvas.toDataURL('image/jpeg');
                //document.body.appendChild(domImage);

                //wrap.clear();
            }
            textureImage.src = e.currentTarget.result;

        }
        reader.readAsDataURL(e.dataTransfer.files[0]);

    }, false);

    var wrap = new WebGLWrap();

}

var WebGLWrap = function(){

    gl = this.createContext();

    this.shaders = new DOMShaders();
    this.compileShaders();

    this.shaderProgram = this.createShaderProgram();

    this.createBuffers();
}

WebGLWrap.prototype = {

    constructor: WebGLWrap,

    clear: function(){
        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
        gl.clearColor(1.0, 1.0, 1.0, 1.0);
    },

    createContext: function(){
        if(gl)
            return gl;

        var canvas = document.createElement('canvas'),
            gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');

        if(!gl)
        {
            console.log("WebGL doesn't supported or disabled. Install latest version of Chrome, Firefox or Opera");
        }

        gl.viewportWidth = canvas.width = 50;
        gl.viewportHeight = canvas.height = 50;

        this.canvas = canvas;

        document.body.appendChild(canvas);

        return gl;
    },

    compileShaders: function(){
        var shader,
            self = this;

        [].forEach.call(['vertex', 'fragment'], function(type){
            shader = (type == 'vertex') ? gl.createShader(gl.VERTEX_SHADER) : gl.createShader(gl.FRAGMENT_SHADER);

            gl.shaderSource(shader, self.shaders[type].code);
            gl.compileShader(shader);

            if(gl.getShaderParameter(shader, gl.COMPILE_STATUS))
            {
                self.shaders[type].compiled = shader;
            }else{ console.log( gl.getShaderInfoLog(shader) ) }
        });

    },

    createTexture: function(oImage){
        this.texture = gl.createTexture();
        this.texture.width = oImage.width;
        this.texture.height = oImage.height;

        gl.bindTexture(gl.TEXTURE_2D, this.texture);

        gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);

        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);

        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);

        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, oImage);

        gl.bindTexture(gl.TEXTURE_2D, null);
    },

    createShaderProgram: function(){
        var program = gl.createProgram();

        gl.attachShader(program, this.shaders['vertex'].compiled);
        gl.attachShader(program, this.shaders['fragment'].compiled);

        gl.linkProgram(program);

        gl.useProgram(program);

        program.vertexPositionAttribute = gl.getAttribLocation(program, "position");
        gl.enableVertexAttribArray(program.vertexPositionAttribute);

        program.vertexTexPositionAttribute = gl.getAttribLocation(program, "inputTextureCoordinate");
        gl.enableVertexAttribArray(program.vertexTexPositionAttribute);

        program.samplerUniformLocation = gl.getUniformLocation(program, "inputImageTexture");
        program.texelWidthOffset = gl.getUniformLocation(program, "texelWidthOffset");
        program.texelHeightOffset = gl.getUniformLocation(program, "texelHeightOffset");

        return program;
    },

    createBuffers: function(){
        this.buffers = {};

        this.buffers["vertexPosition"] = gl.createBuffer();

        gl.bindBuffer(gl.ARRAY_BUFFER, this.buffers["vertexPosition"])

        var vertices = [
            -1, -1,
             -1, 1,
            1,  -1,
            1,  1
        ];

        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);
        gl.bindBuffer(gl.ARRAY_BUFFER, null);

        this.buffers["vertexTexPosition"] = gl.createBuffer();

        gl.bindBuffer(gl.ARRAY_BUFFER, this.buffers["vertexTexPosition"])

        var vertices = [
            0, 0,
             0, 1,
            1,  0,
            1,  1
        ];

        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);
        gl.bindBuffer(gl.ARRAY_BUFFER, null);
    },

    initScene: function(){
        gl.bindBuffer(gl.ARRAY_BUFFER, this.buffers["vertexPosition"]);
        gl.vertexAttribPointer(this.shaderProgram["vertexPositionAttribute"], 2, gl.FLOAT, false, 0, 0);

        gl.bindBuffer(gl.ARRAY_BUFFER, this.buffers["vertexTexPosition"]);
        gl.vertexAttribPointer(this.shaderProgram["vertexTexPositionAttribute"], 2, gl.FLOAT, false, 0, 0);

        gl.activeTexture(gl.TEXTURE0);
        gl.bindTexture(gl.TEXTURE_2D, this.texture);
        gl.uniform1i(this.shaderProgram["samplerUniformLocation"], 0);

        gl.uniform1f(this.shaderProgram["texelWidthOffset"], 1.0/this.texture.width );
        gl.uniform1f(this.shaderProgram["texelHeightOffset"], 0 );
    },

    drawScene: function(){
        gl.viewport(0, 0, gl.viewportWidth, gl.viewportHeight);
        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
    }
};

var DOMShaders = function (){
    this.loadShaders()
}

DOMShaders.prototype.updateShaders = function(elm)
{
    switch(elm.type)
    {
        case "x-shader/x-vertex":
            this.vertex = {code: elm.textContent};
            break;
        case "x-shader/x-fragment":
            this.fragment = {code: elm.textContent};
            break;
        default:
            void(0);
    }
}

DOMShaders.prototype.loadShaders = function()
{
    var shaderElms = document.querySelectorAll('.shader');

    for(var i = 0; i < shaderElms.length; i++)
    {
        this.updateShaders(shaderElms[i]);
    }
}

window.addEventListener('load', init, false);

})(); 
```

我做错了什么？

# php - 尝试传递数组时 SQL 不更新

> ID：14750848
> 
> 赞同：0
> 
> 时间：2013-02-07T12:13:58.720
> 
> 标签：php, mysql, sql, arrays, session

我正在尝试输入一些值`event.php`并将它们存储在数组（`$mem`）中。然后我将这个数组传递到另一个`eventregister.php`文件中，我将它插入到 MySQL 表中。

我的 event.php 文件中的起始行：

```
<?php
session_start();
$slug = $_GET['slug'];
$sess_uid = $_SESSION['id'];
$sess_email = $_SESSION['email'];
$sess_name = $_SESSION['name'];
if(isset($_POST['submit'])&&$_POST['submit']=='register1')
    require_once('13/functions/eventregister.php');    
?> 
```

在`<body>`：

```
 ...
    ...
    $result = mysql_query("SELECT * FROM event WHERE slug = '".$slug."'");
    if ($result == true){
        $row=mysql_fetch_assoc($result);
        $id=$row['id']; 
        }
    $_SESSION['eventid']=$id;
    $_SESSION['eventname']=$row['name'];
    $_SESSION['max_members']=$row['members'];

    php $mem=array_fill(0,$row['members'],'');?>
    <form action="" method="post">
    <?php for ($i=0;$i<$row['members']-1;$i++){
        echo '<label>TRYST ID of Member '.($i+1).' :</label>';
        echo '<input type="text" size="20" name="'.$mem[$i].'"><br>';
    }
    echo '<button type="submit" id="submit" value="Register" name="register1">Register</button>';?>
    </form> 
```

我的 eventregister.php 文件：

```
<?php
session_start();
    foreach($_POST['mem'] as $key=>$value){
        $value=mysql_real_escape_string($value);
        if(strlen($value)==0)
            $value="Null";
    }

    $sess_uid = $_SESSION['id'];
    $sess_email = $_SESSION['email'];
    $sess_name = $_SESSION['name'];
    $e_id=$_SESSION['eventid'];
    $e_name=$_SESSION['eventname'];
    $e_max_mem=$_SESSION['max_members'];

    mysql_query("INSERT INTO eventregister(event_id,event_name,max_number) VALUES('".$e_id."','".$e_name."','".$e_max_mem."')");
    $url="events.php?slug=".$slug;
    header('Location: ' . $url);
    exit;
?> 
```

该页面没有显示任何错误，重定向工作正常，只是没有行在 SQL 中受到影响。我仍在学习过程中，因此使用 PHP 的旧符号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:17:27.317

如果您仔细查看该`INSERT`语句，您会发现末尾有一个逗号。删除：

```
mysql_query("INSERT INTO eventregister(event_id,event_name,max_number) 
      VALUES('".$e_id."','".$e_name."','".$e_max_mem."')"); 
```

您还可以在服务器日志中看到 MySQL 错误。或者[`mysql_error`](http://php.net/manual/en/function.mysql-error.php)，如果查询失败，请致电了解更多信息。

我也没有看到`mysql_connect`任何地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:18:19.230

你的逗号和括号没有组织

```
mysql_query("INSERT INTO eventregister(event_id,event_name,max_number) VALUES('".$e_id."','".$e_name."','".$e_max_mem."')"); 
```

# javascript - 如果打开了多个选项卡，如何在没有多个更新的情况下向用户推送更新？

> ID：14750855
> 
> 赞同：0
> 
> 时间：2013-02-07T12:14:09.703
> 
> 标签：javascript, node.js, sockets, websocket, socket.io

运行函数时，会向用户推送更新，但如果用户打开了 2 个或更多选项卡，它将更新等于打开的选项卡数。

我希望更新仅适用于每个用户一次，无论有多少连接到服务器。

关于如何停止/解决此问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:27:21.220

我认为这与在浏览器端共享连接有关。有了这种支持，无论选项卡的数量如何，每个设备都将建立一次物理连接，并且来自服务器的通知将被广播到选项卡。因此，服务器不需要考虑这一点。

事实上，我将这种支持添加到了我的库（[门户](https://github.com/flowersinthesand/portal)）中，但存在[一些争论](https://groups.google.com/d/msg/socket_io/7lwKJqyNrvk/indTVDqmqyIJ)。如果您想从头开始实施或增强连接共享，请参阅[我](https://stackoverflow.com/questions/9554896/sharing-websocket-across-browser-tabs/11458341#11458341)对类似问题的回答。但是，这有些过时了。

# c# - LINQ：如何获得一组与相关表排序的表？

> ID：14750856
> 
> 赞同：0
> 
> 时间：2013-02-07T12:14:14.183
> 
> 标签：c#, .net, linq, sql-to-linq-conversion

我对我使用“分组依据”句子的 linq 产生的对象 IGrouping 有疑问。

我在数据库中有两个表，Products 和 Responses，它们的关系是 1 到 *。在 Responses 表中，我们有一个名为 FinalRate 的列，它是产品的费率。产品可以有 n 个响应或速率。

我想通过 FinalRate 的总和除以完成的费率数来获得 Products 订单。也就是说，按照平均分数从高到低的顺序排列。

因为它可以在代码中读取（在问题的末尾），所以我尝试首先获得响应。总结所有的最终比率并将它们除以我使用一个组的计数。

代码有两个问题，即使当前代码有效：

1.-我尝试在单个查询中获取产品，但这是不可能的，因为我不能使用组中的产品表，然后使用“orderby”中的响应表。另外一件事 LINQ 只让您可以对一张表进行分组，不可能有“组刺激，响应”。我无法在 LINQ 中得到这个 sql 语句：

```
select prod.ProductID,prod.Commercial_Product_Name,prod.Manufacturer_Name,
prod.ProductImageUrl  
from rev_product prod  
inner join rev_response res on res.AtProductid=prod.ProductID 
group by prod.ProductID,prod.Commercial_Product_Name,prod.Manufacturer_Name
,prod.ProductImageUrl  
order by (sum(res.FinalRate)/count(res.AtProductid)) 
```

我试过这个：

```
var gruposproductos = (from prod in ctx.Products 
                       join res in ctx.Responses on prod.ProductID equals res.AtProductId  
                       group  prod by prod.ProductID into g    
                       orderby (g.Sum(ra =>ra.FinalRate)/g.Count())
                       descending select g).Take(2); 
```

但正如我所说，“orderby (g.Sum...”) 给出了一个错误，因为“into g”对产品表进行分组，而不是对响应表进行分组。

所以这就是为什么在我的最终代码中我没有在同一个 LINQ 语句中得到产品。

2.-一旦接受了这个事实，问题是我得到了一个 IGrouping，但是我没有得到一个响应列表，我可以在不执行代码中的两个 foreach 的情况下进行迭代。我只想要一个循环，就像你有一个“列表”对象一样。

这不是一个很酷的方法，但它确实有效。此外，我必须控制在第二个循环中只添加了 1 次。

有更好的代码吗？

```
var groupproducts = (from res in ctx.Responses    
                     group  res by res.AtProductId into g                                                 
                     orderby (g.Sum(ra =>ra.FinalRate)/g.Count()) 
                     descending select g).Take(2).ToList();

 List<Product> theproducts = new List<Product>();

 foreach (var groupresponse in groupproducts)
 {

    foreach (var response in groupresponse)
    {

          var producttemp= (from prod in ctx.Products
                            where prod.ProductID == response.AtProductId
                            select prod).First();

          theproducts.Add(producttemp);

        }
     }
  } 
```

**最终解决方案（非常感谢@Daniel）**

```
 var productsanonymtype = ctx.Products.Select(x => new
                {
                    Product = x,                   
                    AverageRating = x.Responses.Count() == 0 ? 0 : x.Responses.Select(r => (double)r.FinalRate).Sum() / x.Responses.Count()
                }).OrderByDescending(x => x.AverageRating);

                List<Product> products = new List<Product>();

                foreach (var prod in productsanonymtype)
                {
                    products.Add(prod.Product);
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:20:23.850

试试这个：

```
products.Select(x => new
                     {
                         Product = x,
                         AverageRating = x.Responses.Sum(x => x.FinalRate) / 
                                         x.Responses.Count()
                     }); 
```

`Sum`我使用的重载并未在所有提供程序中实现。如果这对您来说是个问题，您可以使用这个替代版本：

```
products.Select(x => new
                     {
                         Product = x,
                         AverageRating = x.Responses.Select(x => x.FinalRate)
                                                    .Sum() / 
                                         x.Responses.Count()
                     }); 
```

如果没有从产品到其响应的导航属性，您应该首先尝试修复它。如果你不能，你可以使用这个版本：

```
products.Join(responses, x => x.Id, x => x.ProductId,
              (p, r) => new { Product = p, Response = r })
        .GroupBy(x => x.Product)
        .Select(g => new { Product = g.Key,
                           AverageRating = g.Select(x => x.Response.FinalRate)
                                            .Sum() / 
                                           g.Count()
                         }); 
```

假设`FinalRate`是`int`，这两种方法都将使用 int 计算平均评分，即不会有 4.5 评分。并且不会进行四舍五入，即 4.9 的实际平均评分将导致 4。您可以通过将除法的操作数之一转换为 来解决此问题`double`。

另一个问题是到目前为止没有评级的情况。在这种情况下，上面的代码将导致异常。如果这对您来说是个问题，您可以将计算更改为：

```
AverageRating = g.Count() == 0
                ? 0
                : g.Select(x => (double)x.Response.FinalRate).Sum() / g.Count() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:32:21.977

```
ctx.Products.GroupBy(x => new {
                                ProductId = x.ProductId, 
                                FinalRate = x.Responses.Sum(y => y.FinalRate),                  
                                CountProductId = x.Responses.Count
                              })
            .OrderBy(x => x.Key.FinalRate / x.Key.CountProductId); 
```

而这里的投影......

```
ctx.Products.Select(x => new {  
                                ProductID = x.ProductID, 
                                Commercial_Product_Name = x.Commercial_Product_Name, 
                                Manufacturer_Name = x.Manufacturer_Name,
                                ProductImageUrl = x.ProductImageUrl,
                                FinalRate = x.Responses.Sum(y => y.FinalRate), 
                                CountProductId = x.Responses.Count
                             })
            .GroupBy(x => new {
                               ProductId = x.ProductId, 
                               FinalRate = x.FinalRate,                  
                               CountProductId = x.CountProductId
                              })
            .OrderBy(x => x.Key.FinalRate / x.Key.CountProductId); 
```

# java - 弹簧加载时出现 ClassFormatError

> ID：14750862
> 
> 赞同：0
> 
> 时间：2013-02-07T12:14:37.887
> 
> 标签：java, spring, hibernate

我不知道这个堆栈跟踪是什么意思：

```
 SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
    org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [spring/data-rest.xml]: Invocation of init method failed; nested exception is java.lang.ClassFormatError: Invalid code attribute name index 9 in class file org/hibernate/cfg/CopyIdentifierComponentSecondPass
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
        at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:734)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:457)
        at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:962)
        at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1603)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [spring/data-rest.xml]: Invocation of init method failed; nested exception is java.lang.ClassFormatError: Invalid code attribute name index 9 in class file org/hibernate/cfg/CopyIdentifierComponentSecondPass
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:420)
        at org.springframework.beans.factory.BeanFactoryUtils.beansOfTypeIncludingAncestors(BeanFactoryUtils.java:277)
        at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.detectPersistenceExceptionTranslators(PersistenceExceptionTranslationInterceptor.java:139)
        at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.<init>(PersistenceExceptionTranslationInterceptor.java:79)
        at org.springframework.dao.annotation.PersistenceExceptionTranslationAdvisor.<init>(PersistenceExceptionTranslationAdvisor.java:70)
        at org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor.setBeanFactory(PersistenceExceptionTranslationPostProcessor.java:103)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeAwareMethods(AbstractAutowireCapableBeanFactory.java:1475)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1443)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
        ... 24 more
    Caused by: java.lang.ClassFormatError: Invalid code attribute name index 9 in class file org/hibernate/cfg/CopyIdentifierComponentSecondPass
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
        at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2889)
        at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1170)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1678)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
        at org.hibernate.cfg.Configuration.secondPassCompile(Configuration.java:1350)
        at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1737)
        at org.hibernate.ejb.EntityManagerFactoryImpl.<init>(EntityManagerFactoryImpl.java:94)
        at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:905)
        at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:890)
        at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:74)
        at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:268)
        at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:310)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
        ... 39 more 
```

它可能是由损坏的库引起的吗？昨天使用相同的弹簧配置运行良好:(

# php - 将php cli转换为cgi后的肥皂

> ID：14750863
> 
> 赞同：1
> 
> 时间：2013-02-07T12:14:39.687
> 
> 标签：php, soap, wsdl, nusoap

我编写了一个 Web 服务，它在我以前的服务器上正常工作，但是在更改我的服务器后，我遇到了 php cli 的问题，我将 cli 转换为 cgi，之后当连接到我的 Web 服务的客户端向他显示此错误：

我没有改变我的代码只改变我的服务器

第 2 行解析 SOAP 有效负载的 XML 错误：标签不匹配

我应该怎么办 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:16:52.870

我发现了问题

问题是 php 标记之前的 utf-8 字符并为解析 xml 带来问题：

```
ï»¿ 
```

所以不要以utf-8格式保存你的文件

# python - 如何将自己的表单字段从模型表单添加到实例？

> ID：14750866
> 
> 赞同：0
> 
> 时间：2013-02-07T12:14:52.153
> 
> 标签：python, django

```
if request.method == 'POST':
    try:
        form = ExampleForm(request.POST,
                               instance=Example.objects.get(user=request.user))
    except:
        form = ExampleForm(request.POST)
    if form.is_valid():
        m = form.save(commit=False)
        is_ok = request.POST.get('is_ok')
        m.is_ok = is_ok
        m.user = request.user
        m.save() 
```

如何添加`is_ok`字段`instance=Example.objects.get(user=request.user)`

注意：我不能将此字段添加到模型表单中。

如果我更改现有数据，我的`is_ok`值将更改为默认值

编辑：

```
<input type="checkbox" disabled="disabled" checked="checked" name="is_ok" id="id_is_ok"/> 
```

如果禁用此输入，则 my `is_ok = request.POST.get('is_ok')`= None

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:17:15.540

你真的应该在你的 ExampleForm 类的声明中这样做。我假设这个类看起来像这样

```
from your_app.models import ExampleModel
from django.forms import ModelForm

class ExampleForm(ModelForm):
    class Meta:
        model = ExampleModel 
```

您只需要在表单上声明该字段。就像是 -

```
class ExampleForm(ModelForm)
    is_ok = forms.BooleanField()
    class Meta:
        model = ExampleModel 
```

表单类现在将处理字段`input`元素的创建`is_ok`，就像它为所有其他字段所做的那样，但它将覆盖模型上的设置 - 它不会再被禁用（有关更多信息，请参阅[文档](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#overriding-the-default-field-types-or-widgets)）。

# mysql - Mysql - 微调 HAVING

> ID：14750870
> 
> 赞同：1
> 
> 时间：2013-02-07T12:15:05.677
> 
> 标签：mysql

有人对如何解决此查询有任何想法吗？

有一张有客户的桌子和一张有许可证的桌子。每个客户可以拥有多个在不同时间到期的许可证，有些已经过期，有些还没有。如果我想选择至少拥有一个有效许可证的所有客户，我会：

```
SELECT * FROM License
LEFT JOIN Customer USING (customer_id)
GROUP BY Customer.customer_id
HAVING License.expiry > NOW() 
```

但是我如何获得只有过期许可证的客户呢？如果我执行“HAVING License.expiry < NOW()”，它会找到许可证过期的客户，但不会排除同时拥有有效许可证的客户。我需要选择只有过期许可证的客户。

“没有”可以解决问题，但没有这样的事情......

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:20:39.687

试试这个查询 -

```
SELECT * FROM License
  LEFT JOIN Customer USING (customer_id)
GROUP BY
  Customer.customer_id
HAVING
  COUNT(*) > 0 AND COUNT(*) = COUNT(IF(License.expiry > NOW(), 1, NULL)) 
```

# asp.net - ASP.NET MVC 4 包在 mono v3 下不起作用

> ID：14750871
> 
> 赞同：12
> 
> 时间：2013-02-07T12:15:07.647
> 
> 标签：asp.net, asp.net-mvc-4, mono

WebOptimization framewooks 在发布模式下的单声道下似乎无法正常工作

![WebOptimization framewooks 在发布模式下的单声道下似乎无法正常工作](../Images/d55b5d3e2af963cac2b5c4f8bea29edc.png)

但是，如果我在 web.xml 中设置 debug="true" 选项，它工作正常。配置

我尝试了通过互联网找到的不同方法来解决 IIS 上的这个问题，比如设置模块：

```
 <modules runAllManagedModulesForAllRequests="true">
  <remove name="BundleModule" />
  <add name="BundleModule" type="System.Web.Optimization.BundleModule" />
</modules> 
```

似乎路线没有正确注册。请指教。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-07T19:11:15.617

自己找到解决方案：

> 还要确保删除 Microsoft.Web.Infrastructure.dll，因为 Mono 有自己的此程序集实现（Microsoft 的实现依赖于 IIS）。

在我从 BIN 目录中删除该文件后 - 一切正常。感谢 MONO 开发团队。在这里找到了答案[单邮件存档](http://www.mail-archive.com/mono-list@lists.ximian.com/msg36327.html)

希望这会对某人有所帮助！

# c# - 在一个线程上创建的 C# 控件不能作为另一个线程上的控件的父级

> ID：14750872
> 
> 赞同：8
> 
> 时间：2013-02-07T12:15:08.363
> 
> 标签：c#, multithreading, user-interface, controls

我正在运行一个线程，该线程获取信息并创建标签并显示它，这是我的代码

```
 private void RUN()
    {
        Label l = new Label();
        l.Location = new Point(12, 10);
        l.Text = "Some Text";
        this.Controls.Add(l);
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Thread t = new Thread(new ThreadStart(RUN));
        t.Start();
    } 
```

有趣的是，我以前有一个应用程序，它有一个面板，我曾经使用线程向它添加控件而没有任何问题，但是这个不会让我这样做。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-07T12:25:09.433

您不能从另一个线程更新 UI 线程：

```
 private void RUN()
        {
            if (this.InvokeRequired)
            {
                this.BeginInvoke((MethodInvoker)delegate()
                {
                    Label l = new Label(); l.Location = new Point(12, 10);
                    l.Text = "Some Text";
                    this.Controls.Add(l);
                });
            }
            else
            {
                Label l = new Label();
                l.Location = new Point(12, 10);
                l.Text = "Some Text";
                this.Controls.Add(l);
            }
        } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-07T12:21:12.947

您需要使用 BeginInvoke 从另一个线程安全地访问 UI 线程：

```
 Label l = new Label();
    l.Location = new Point(12, 10);
    l.Text = "Some Text";
    this.BeginInvoke((Action)(() =>
    {
        //perform on the UI thread
        this.Controls.Add(l);
    })); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T12:17:46.640

### 您正在尝试从不同的线程将控件添加到父控件，控件只能从创建的线程父控件添加到父控件！

使用 Invoke 从另一个线程安全地访问 UI 线程：

```
 Label l = new Label();
    l.Location = new Point(12, 10);
    l.Text = "Some Text";
    this.Invoke((MethodInvoker)delegate
    {
        //perform on the UI thread
        this.Controls.Add(l);
    }); 
```

# php - 地理位置如何从随机字符串中获取地址

> ID：14750873
> 
> 赞同：0
> 
> 时间：2013-02-07T12:15:07.850
> 
> 标签：php, google-maps, google-maps-api-2

基本上我使用谷歌地图中的地理定位功能将地址转换为坐标。

我知道如何做到这一点，我让它正常工作，但这是基于用户输入，所以如果用户输入随机信息，如“NW1 hello blabla”，是否有可能让谷歌地图读取字符串并注意哪些词是一个实际的地址。

***地理位置代码***

```
var place =  "New York Hello"; // I want to enter any kind of string and have gmaps to understand it

geocoder = new GClientGeocoder();

geocoder.getLatLng(place, function(point) {  (!point) {

alert(place + " not found");
} else {

var info = "<h3>"+place+"</h3>Latitude: "+point.y+"  Longitude:"+point.x;

var marker = new GMarker(point);

map.addOverlay(marker);

marker.openInfoWindowHtml(info);
} }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:06:56.487

这就是地理编码器的设计目的（获取一个看起来像地址的字符串并返回一个位置，但不是“随机”字符串）。但是如果用户输入垃圾，你就会得到垃圾。如果字符串看起来像一个地址（并且有一个匹配的条目），则地理编码器会执行合理的工作。

# ruby-on-rails - RoR rake 捆绑包依赖项

> ID：14750879
> 
> 赞同：0
> 
> 时间：2013-02-07T12:15:20.343
> 
> 标签：ruby-on-rails, gem, rake, bundle

平台：windows 7，在 JRuby 1.6.8 上运行。

```
C:\project> rake db:migrate
rake aborted!
You have already activated rake 10.0.3, but your Gemfile requires rake 0.9.2.2.
Using bundle exec may solve this. 
```

好的。我已经添加了

```
gem "rake", "= 0.9.2.2" 
```

到 Gemfile 并运行：

```
C:\project> bundle exec rake db:migrate
bundler: command not found: rake
Install missing gem executables with `bundle install` 
```

<礼貌>WTF？</礼貌>

我也做过

```
bundle install --deployment 
```

无济于事。

我安装了不同版本的 rake：

```
C:\project>gem list

LOCAL GEMS
...
rake (10.0.3, 0.9.2.2, 0.8.7) 
```

如何解决这个问题？我需要 rake db:migrate 与我的特定（继承的）RoR 项目一起使用往往有点过时的 gem，但它们都在 Gemfile 中指定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:36:01.693

1.  `bundle --deployment`在您清楚地了解它的用途之前，请不要运行。（这很混乱，我们通常使用`bundle install --path vendor/bundle`）

2.  第一个错误意味着您应该使用 执行命令`bundle exec`，例如 `bundle exec rake db:migrate`

3.  在版本更改后，`Gemfile`您应该只运行`bundle install`没有`--deployment`.

此时我建议删除`.bundle`项目主页中的文件夹，这会反转`--deployment`调用。之后打电话`bundle install`再试一次。如果它不起作用，请告诉我们。

不要沮丧，一旦你掌握了它的窍门，捆绑就很酷。

# ruby-on-rails - 在 Ruby 中将多维数组的元素推入另一个数组

> ID：14750881
> 
> 赞同：1
> 
> 时间：2013-02-07T12:15:27.143
> 
> 标签：ruby-on-rails, ruby

我有这些数组：

```
array0 = [["1"], ["2"], ["3"],…]

array1 = [["a"], ["b"], ["c"],…]

array2 = [["pap"], ["pop"], ["pip"],…] 
```

我想将每个数组中的每个元素推送到第一个数组，所以输出应该是：

```
output = [["1", "a", "pap"], ["2", "b", "pop"], ["3", "c" ,"pip"]] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T12:21:39.413

首先`flatten`对每个数组执行以获得一维数组。然后用于`zip`获取每个具有 3 个元素的二维数组

```
array0.flatten.zip(array1.flatten, array2.flatten) 
```

做同样事情的更短的方法：（@Ivaylo Strandjev 给出的解决方案）

```
array0.zip(array1, array2).map(&:flatten) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T12:16:25.060

试试这个：

```
 array0.zip(array1).zip(array2).map(&:flatten) 
```

你也可以用一个`zip`：

```
 array0.zip(array1, array2).map(&:flatten) 
```

# php - 如何在 Socialengine 4 中为自定义小部件添加管理页面

> ID：14750884
> 
> 赞同：0
> 
> 时间：2013-02-07T12:15:32.167
> 
> 标签：php, zend-framework, socialengine

我们如何在社交引擎 4 中为自定义小部件创建管理面板页面？我没有在互联网上找到任何有关此的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:02:31.237

您应该在 application/modules/Yourmodule/controllers/ 中创建一个控制器，例如“AdminSettingsController.php”

在这个控制器中：

```
class User_AdminManageController extends Core_Controller_Action_Admin 
```

然后`public function indexAction()`在里面创建。它将包含与您的自定义小部件相关的所有代码。

之后，您应该在 application/modules/Yourmodule/views/scripts/admin-settings/ 中创建一个名为“index.tpl”的视图。

现在您可以通过链接 yoursite.com/admin/yourmodule/settings 访问您的管理面板页面

希望这可以帮助。

# c++ - 在可执行文件之间传输数据

> ID：14750886
> 
> 赞同：5
> 
> 时间：2013-02-07T12:15:34.863
> 
> 标签：c++, windows, process, data-sharing

我在 Windows 上有两个用 C++ 编写的可执行文件。我在一个中生成了一些数据，并想调用另一个可执行文件来处理这些数据。我可以将数据写入一个文件，然后在另一个可执行文件中读取它，但这在磁盘 I/O 方面似乎相当昂贵。有什么更好的方法来做到这一点？这似乎是一个足够简单的问题，但谷歌只是没有帮助！

假设数据大约为 100MB，并且在需要发送之前完整生成（即不需要流式传输）。

混合 32 位和 64 位进程时有效的答案会获得加分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T14:26:31.390

如果您的进程可以轻松地写入和读取文件，请继续。创建文件`CreateFile`并将其标记为临时和可共享。Windows 使用此提示来延迟物理写入，但仍遵守所有文件语义。由于您的文件只有 100 MB 并且正在使用中，Windows 几乎可以肯定能够将其内容完全保存在 RAM 中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T12:25:58.567

您可以使用[Boost.MPI](http://www.boost.org/doc/libs/1_53_0/doc/html/mpi.html)。它来自具有高质量标准的 Boost，代码示例看起来非常明确：

[http://www.boost.org/doc/libs/1_53_0/doc/html/mpi/tutorial.html#mpi.point_to_point](http://www.boost.org/doc/libs/1_53_0/doc/html/mpi/tutorial.html#mpi.point_to_point)

```
// The following program uses two MPI processes to write "Hello, world!"
// to the screen (hello_world.cpp):

int main(int argc, char* argv[])
{
  mpi::environment env(argc, argv);
  mpi::communicator world;

  if (world.rank() == 0) {
    world.send(1, 0, std::string("Hello"));
    std::string msg;
    world.recv(1, 1, msg);
    std::cout << msg << "!" << std::endl;
  } else {
    std::string msg;
    world.recv(0, 0, msg);
    std::cout << msg << ", ";
    std::cout.flush();
    world.send(0, 1, std::string("world"));
  }
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T12:28:15.957

假设您只想走“一个方向”（也就是说，您不需要从子进程获取数据），您可以使用[`_popen()`](http://msdn.microsoft.com/en-us/library/96ayss4b%28v=vs.71%29.aspx). 您将数据写入管道，子进程从中读取数据`stdin`。

如果您需要双向数据流，那么您将需要使用两个管道，一个作为输入，一个作为输出，并且您需要设置子进程如何连接到这些管道的方案 [您仍然可以设置stdin/stdout 作为数据路径，但您也可以使用一对命名管道]。

第三种选择是[共享内存](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa366551%28v=vs.85%29.aspx)区域。我从未在 Windows 中这样做过，但原理与我在 Linux [以及多年前在 OS/2 中使用的原理几乎相同]： 1\. 在父进程中创建一个具有给定名称的内存区域. 2.子进程打开同一个内存区域。3\. 数据由父进程存储，由子进程读取。4\. 如有必要，可以使用信号量或类似信号来表示完成/结果就绪/等。

# iphone - 禁止以除 Portrait AVFoundation 以外的任何方向拍摄图像

> ID：14750887
> 
> 赞同：12
> 
> 时间：2013-02-07T12:15:41.353
> 
> 标签：iphone, objective-c, xcode, avfoundation, uideviceorientation

我`AVFoundation`用来展示相机。

我想防止相机本身旋转，以便观看者只能以纵向看到相机，并且只能以纵向模式拍摄图像。

我定义`Supported Interface Orientation`为仅支持纵向，并且视图本身仅在纵向模式下显示，而不是相机 - 正在随设备方向旋转

如何强制`AVFoundation`显示相机并仅像 UIViewController 那样以纵向方式捕获图像？

我设置相机的代码：

```
AVCaptureVideoPreviewLayer* lay = [[AVCaptureVideoPreviewLayer alloc] initWithSession:self.sess];
UIView *view = [self videoPreviewView];
CALayer *viewLayer = [view layer];
[viewLayer setMasksToBounds:YES];
CGRect bounds = [view bounds];
[lay setFrame:bounds];
if ([lay respondsToSelector:@selector(connection)])
 {
   if ([lay.connection isVideoOrientationSupported])
   {
      [lay.connection setVideoOrientation:AVCaptureVideoOrientationPortrait];
    }
 }
 [lay setVideoGravity:AVLayerVideoGravityResizeAspectFill];
 [viewLayer insertSublayer:lay below:[[viewLayer sublayers] objectAtIndex:0]];
 self.previewLayer = lay; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T03:39:14.560

这是基于我对您的问题的理解的部分答案（与您的其他答案不同）。

您已将应用程序锁定为纵向。因此，无论手机的方向如何，状态栏始终位于手机的纵向顶部。这成功地锁定了您的界面，包括您的 AVCapture 界面。但是您还想锁定来自相机的原始图像馈送，以便图像水平始终与状态栏平行。

理想情况下，这需要*连续*进行- 如果您的相机处于 45 度角，则图像将反向旋转 45 度。否则，大多数情况下，图像将无法正确对齐（另一种方法是在您的 90 度方向开关更新之前它总是不对齐，这会将图像旋转 90 度）。

为此，您需要使用 Core Motion 和加速度计。您希望将手机 Y 轴的角度设为真正垂直并相应地旋转图像。有关几何细节，请参见此处：

[iPhone 方向 - 我如何确定哪个方向是向上的？](https://stackoverflow.com/questions/12994219/iphone-orientation-how-do-i-figure-out-which-way-is-up?rq=1)

使用 Core Motion，从 viewDidLoad 触发此方法

```
- (void)startAccelerometerUpdates {
    self.coreMotionManager = [[CMMotionManager alloc] init];
    if ([self.coreMotionManager isAccelerometerAvailable] == YES) {
        CGFloat updateInterval = 0.1;
            // Assign the update interval to the motion manager
        [self.coreMotionManager setAccelerometerUpdateInterval:updateInterval];
        [self.coreMotionManager startAccelerometerUpdatesToQueue:[NSOperationQueue mainQueue] 
           withHandler: ^(CMAccelerometerData *accelerometerData, NSError *error) {
             CGFloat angle =  -atan2( accelerometerData.acceleration.x, 
                                      accelerometerData.acceleration.y) 
                               + M_PI ;
             CATransform3D rotate = CATransform3DMakeRotation(angle, 0, 0, 1);
             self.previewLayer.transform = rotate;

         }];
    }
} 
```

> ^a ![直立](../Images/dc29bc3d65b538f65423bb7c20a91d31.png) ^(b ) ![45度](../Images/13a3654660e636d696a7aa8252544327.png) ^c ![90度](../Images/bbf6cd1e9798db8ff608ed74e912f234.png)
> 
> ^(电话持有 (a) 肖像；(b) 旋转约 30 度；(c) 风景)
> 。

您可能会发现这有点跳动，并且设备移动和视图之间有一点延迟。您可以使用 updateInterval，并更深入地使用其他 Core Motion 技巧来抑制运动。（~~我没有处理手机完全倒置的情况，如果您将相机面朝下或面朝上，结果是不确定~~ *的，已更新代码/使用`atan2`*）。

现在方向相当正确，但您的图像不适合您的视图。您对此无能为力，因为原始相机馈送的格式由其传感器阵列的物理尺寸固定。解决方法是缩放图像，以便您在各个角度都有足够的多余图像数据，以便您可以裁剪图像以适合您想要的纵向格式。

*在界面*生成器中：

*   将您的 previewLayer 的视图设置为以它的超级视图为中心的正方形，宽度和高度等于可见图像区域的对角线（sqrt (width ² +height ² )

*或*在代码中：

```
- (void)resizeCameraView
{
    CGSize size = self. videoPreviewView.bounds.size;
    CGFloat diagonal = sqrt(pow(size.width,2)+pow(size.height,2));
    diagonal = 2*ceil(diagonal/2);  //rounding
    self.videoPreviewView.bounds = (CGRect){0,0,diagonal,diagonal};
} 
```

如果您在代码中执行此操作，`resizeCameraView`那么如果您从`viewDidLoad`. 确保这`self.videoPreviewView`是您对正确视图的 IBOutlet 引用。

现在，当您拍照时，您将从相机阵列中捕获整个“原始”图像数据，这些数据将以横向格式显示。它将与显示旋转的方向标志一起保存。但您可能想要的是保存屏幕上看到的照片。这意味着您必须在保存照片之前旋转和裁剪照片以匹配您的屏幕视图，并删除它的方向元数据。那是你要解决的问题（“部分答案”的另一部分）：我怀疑你可能会认为整个方法不能让你得到你想要的（我认为你真正想要的是一个摄像头传感器- 逆着设备的旋转旋转以保持地平线稳定）。

*更新*
更改为从而不是`startAccelerometerUpdates`获取角度，更平滑并考虑所有方向而无需摆弄`atan2``acos`

*更新 2*
从您的评论来看，您的旋转预览层似乎卡住了？我无法复制您的错误，它必须在您的代码或设置中的其他位置。

为了让您可以使用干净的代码进行检查，我已将我的解决方案添加到[Apple 的 AVCam 项目](http://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html)中，因此您可以对其进行检查。这是做什么：

*   将 Core Motion 框架添加到 AVCam。

在 AVCamViewController.m

*   `#import <CoreMotion/CoreMotion.h>`
*   添加我的`startAccelerometerUpdates`方法
*   添加我的`resizeCameraView`方法（将这两个方法都放在类文件的顶部附近，否则您可能会感到困惑，该文件中有多个`@implementation`s）
*   添加行：`[self resizeCameraView];`to `viewDidLoad`（可以是方法的第一行）
*   将属性添加
    `@property (strong, nonatomic) CMMotionManager* coreMotionManager`
    到@interface（它不需要是属性，但我的方法假定它存在，所以如果你不添加它，你将不得不修改我的方法）。

在`startAccelerometerUpdates`更改此行：

```
 self.previewLayer.transform = rotate; 
```

到：

```
 self.captureVideoPreviewLayer.transform = rotate; 
```

此外，在 中的 Objects 列表中`AVCamViewController.xib`，将 videoPreview 视图移到 ToolBar 上方（否则，当您放大它时，您会覆盖控件）

请务必禁用旋转 - 对于 iOS<6.0，这已经是正确的，但对于 6.0+，您需要在目标摘要中仅选择支持方向的纵向。

我认为这是我对 AVCam 所做更改的*完整*列表，并且旋转/方向都运行良好。我建议你尝试做同样的事情。如果你能让它顺利工作，你就知道代码中的某个地方还有其他故障。如果你仍然发现你的旋转棒，我很想知道更多关于你的硬件和软件环境的信息，比如你正在测试哪些设备。

我正在 XCode 4.6/OSX10.8.2 上编译，并测试：

```
- iPhone4S  /  iOS5.1  
- iPhone3G  /  iOS6.1  
- iPad mini /  iOS6.1 
```

所有结果都是平滑和准确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T05:29:35.847

我想您需要使用此方法来限制相机旋转。

```
AVCaptureConnection *videoConnection = [CameraVC connectionWithMediaType:AVMediaTypeVideo fromConnections:[imageCaptureOutput connections]];
if ([videoConnection isVideoOrientationSupported])
{
    [videoConnection setVideoOrientation:[UIDevice currentDevice].orientation];
} 
```

假设您的预览层被定义为属性，可以使用

```
[self.previewLayer setOrientation:[[UIDevice currentDevice] orientation]]; 
```

在您的情况下，您可以将 [[UIDevice currentDevice]orientation] 替换为 UIInterfaceOrientationPortrait

已编辑

实际需要时尝试添加预览层。例子

```
preview = [[self videoPreviewWithFrame:CGRectMake(0, 0, 320, 480)] retain];
[self.view addSubview:preview]; 
```

videoPreviewWithFrame 函数。

```
- (UIView *) videoPreviewWithFrame:(CGRect) frame 
{
  AVCaptureVideoPreviewLayer *tempPreviewLayer = [[AVCaptureVideoPreviewLayer alloc]initWithSession:[self captureSession]];
  [tempPreviewLayer setVideoGravity:AVLayerVideoGravityResizeAspectFill];
  tempPreviewLayer.frame = frame;

  UIView* tempView = [[UIView alloc] init];
  [tempView.layer addSublayer:tempPreviewLayer];
  tempView.frame = frame;

  [tempPreviewLayer autorelease];
  [tempView autorelease];
  return tempView;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T10:10:00.757

假设您的 previewlayer 被添加到 viewcontroller 视图中。这样做`viewDidLoad`：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(orientationChanged:) name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

并将选择器定义为：

```
- (void)orientationChanged:(NSNotification*)notification {
    UIInterfaceOrientation interfaceOrientation = [UIApplication sharedApplication].statusBarOrientation;
    if ([self.previewlayer respondsToSelector:@selector(orientation)]) {
        //for iOS5
        if (interfaceOrientation != UIInterfaceOrientationPortrait) {
            self.previewlayer.orientation = (AVCaptureVideoOrientation)UIInterfaceOrientationPortrait;
        }
    } else {
        //for iOS6
        if (interfaceOrientation != UIInterfaceOrientationPortrait) {
            self.previewlayer.connection.videoOrientation = (AVCaptureVideoOrientation)UIInterfaceOrientationPortrait;
        }
    }
} 
```

**注意：**放入`tempPreviewLayer`属性`self.previewlayer`。

当设备方向改变时，这将强制预览层到纵向位置。

**编辑**

您也可以在 viewController 的“shouldAutoRotate”方法中添加它

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
    {
        // Return YES for supported orientations
        if ([self.previewlayer respondsToSelector:@selector(orientation)]) {
            if (interfaceOrientation != UIInterfaceOrientationPortrait) {
                self.previewlayer.orientation = (AVCaptureVideoOrientation)UIInterfaceOrientationPortrait;
            }
        } else {
            if (interfaceOrientation != UIInterfaceOrientationPortrait) {
                self.previewlayer.connection.videoOrientation = (AVCaptureVideoOrientation)UIInterfaceOrientationPortrait;
            }
        }

        return (interfaceOrientation == UIInterfaceOrientationPortrait);
    } 
```

对于 ios6 骑这两个并检查。

```
-(NSUInteger)supportedInterfaceOrientations {
    //UIInterfaceOrientation interfaceOrientation = [UIApplication sharedApplication].statusBarOrientation;
    //return (
    //interfaceOrientation == UIInterfaceOrientationLandscapeLeft |
    //interfaceOrientation == UIInterfaceOrientationLandscapeRight);
    return UIInterfaceOrientationMaskLandscape;//(UIInterfaceOrientationLandscapeLeft | UIInterfaceOrientationLandscapeRight);
}

- (BOOL)shouldAutorotate {
    return YES;
} 
```

在`return`这两种方法之前附加代码..并在我给出的通知中，看看它是否在您旋转设备时被调用。

# java - 如何验证 JSF 中的唯一性并向用户发送消息？

> ID：14750895
> 
> 赞同：0
> 
> 时间：2013-02-07T12:15:55.903
> 
> 标签：java, jsf, validation, unique-constraint

我需要检查我的应用程序中某个字段的唯一性。

我尝试使用 Hibernate`@Unique`约束，但它显示堆栈跟踪，但用户表单中没有错误消息。

我的下一个解决方案是编写一个自定义验证器，但我认为有更好的解决方案。

在 JSF 中有没有更简单的方法来做到这一点？

（JSF 2.1 + RichFaces）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-29T04:02:30.333

我为我的基本实体的 JSF 2.1 唯一密钥验证破解了一个快速而肮脏的工作解决方案：

用法：

```
<p:inputText id="name" value="#{employeesController.currentEmployee.name}">
    <f:validator validatorId="uniqueColumnValidator" />
    <f:attribute name="currentEntity" value="#{employeesController.currentEmployee}" />
    <f:attribute name="uniqueColumn" value="name" />
</p:inputText> 
```

验证器：

```
@RequestScoped
@FacesValidator("uniqueColumnValidator")
public class UniqueColumnValidator implements Validator, Serializable {

    @PersistenceContext
    protected EntityManager em;

    /**
     * generic unique constraint validator for AbstractBaseEntity entities<br />
     * requires the following additional attributes on the form element ("<f:attribute>"):<br />
     * - "currentEntity" the entity instance (used for getting the class and guid)<br />
     * - "uniqueColumn" the column where the new value will be checked for uniqueness
     */
    @Override
    public void validate(final FacesContext context, final UIComponent comp, final Object newValue) throws ValidatorException {

    AbstractBaseEntity currentEntity = (AbstractBaseEntity) comp.getAttributes().get("currentEntity");
    String uniqueColumn = (String) comp.getAttributes().get("uniqueColumn");

    boolean isValid = false;
    try {
        em.createQuery(
                "FROM " + currentEntity.getClass().getSimpleName()
                + " WHERE " + uniqueColumn + " = :value"
                + " AND guid <> :guid", currentEntity.getClass())
                .setParameter("value", value)
                .setParameter("guid", currentEntity.getGuid())
                .getSingleResult();
    } catch (NoResultException ex) {
        isValid = true; // good! no result means unique validation was OK!
    }

    if (!isValid) {
        FacesMessage msg = Messages.createError("must be unique", uniqueColumn);
        context.addMessage(comp.getClientId(context), msg);
        throw new ValidatorException(msg);
    }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:33:02.177

您可以在支持 bean 上使用`<f:ajax />`or`onblur`事件`textfield`并在您的支持 bean 中验证所有`model`不是的值`null`。

```
<h:message id="errorMessageTag" for="fieldId"/>
<h:inputText id="fieldId" value="#{beanName.modelName.variableName}">
    <f:ajax event="blur" listener="#{beanName.property}" render="errorMessageTag" />
</h:inputText> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T12:25:04.747

您可以手动验证您的 bean 一个 ajax 请求。下面给出了手动验证的示例。

```
ClassValidator<TestClass> classValidator = new ClassValidator<TestClass>(
              TestClass.class );

InvalidValue[] invalidValues = classValidator
        .getInvalidValues(testObject);

for (InvalidValue invalidValue : invalidValues) {
       System. out .println( "Property Name: "
               + invalidValue.getPropertyName() + " Message: "
               + invalidValue.getMessage());
} 
```

`<a4j:support />`您可以使用标记捕获 ajax 请求

# java - 我如何将java脚本变量传递给jsp页面中的java代码片段

> ID：14750896
> 
> 赞同：0
> 
> 时间：2013-02-07T12:15:58.827
> 
> 标签：java, javascript, jsp

我想在会话到期后将用户重定向到最后访问的页面，并提示用户再次登录。我将最后一页 url 传递给一个参数并调用 seesioerror 操作来验证用户。

我有这个代码片段：

```
 <script type="text/javascript">
        var currentURL = window.location.href;

    </script>
     <%

        String url= "<script>document.writeln(currentURL);</script>";

        Object obj = session.getAttribute("user");
        if (obj == null) {
            response.sendRedirect(request.getContextPath() + "/SessionError?backurl=" + url);
        }

     %> 
```

`<% out.print("URL" + url);%>`现在我的问题是，每当我使用它正确打印页面 URL打印 Java String 可变 URL 时。

但是如果在代码段内的这一行上传递它`response.sendRedirect(request.getContextPath() + "/SessionError?backurl=" + url);`。它只传递`<script>document.writeln(currentURL);</script>`不像**[http://www.mysite.com/home](http://www.mysite.com/home)**这样的当前页面 url 。请帮助我摆脱这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:23:35.193

JSP 是服务器端语言，它将在 http 响应返回客户端之前执行。通过这样说，您可以在 javascript 中使用 JSP 变量，但不能反过来。您可以使用 javascript : **document.referrer**获取以前的网址

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:26:34.087

你应该使用

```
request.getAttribute("javax.servlet.forward.request_uri") 
```

看到这个[问题](https://stackoverflow.com/questions/2989888/get-request-url-from-jsp)

并且请不要混合 sciplets 和 Javascript 代码。一团糟。

# ios - UITableViewCell 上的 UILabel 显示不正确

> ID：14750897
> 
> 赞同：2
> 
> 时间：2013-02-07T12:16:00.623
> 
> 标签：ios, objective-c, interface-builder

我在界面生成器中使用约束配置了一个界面。它的设置如下所示：http: [//imgur.com/a/xqa7D](http://imgur.com/a/xqa7D)。

渲染单元格时，不会出现右侧标签（但仍保留一个空格）：http: [//imgur.com/xwBSSMD](http://imgur.com/xwBSSMD)。

有问题的单元格是自定义 UITableViewCell 子类：

```
#import <UIKit/UIKit.h>

@interface ProgressCell : UITableViewCell

@property (weak, nonatomic) IBOutlet UILabel *textLabel;
@property (weak, nonatomic) IBOutlet UIProgressView *progressView;
@property (weak, nonatomic) IBOutlet UILabel *detailTextLabel;

@end 
```

类没有进一步的逻辑。

表格视图单元格是从我在情节提要上设置的标识符实例化的：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"ProgressCell";
    ProgressCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier
                                                         forIndexPath:indexPath];

    Object *room = [self.rooms objectAtIndex:indexPath.row];
    cell.textLabel.text = room.name;
    cell.progressView.progress = 1.0f - ((float)room.avail)/room.total;
    cell.detailTextLabel.text = [NSString stringWithFormat:@"%d/%d", room.avail, room.total];

    return cell;
} 
```

如果我在函数末尾设置断点并执行`po [[cell detailTextLabel] text]`，则文本设置正确。标签没有隐藏。

我完全不知道可能的原因。什么可能触发这种行为？

我尝试过的其他事情：

*   将属性重命名为 detailTextLabel 以外的其他名称（如果可能发生冲突）不起作用
*   如果我添加第三个标签，默认文本，正确显示
*   如果我添加第三个标签并将 IB 中的出口连接到未出现的出口，则出现问题标签的默认文本，但隐藏第三个标签

编辑：

如果我记录相关框架的最终位置，它位于`{{0, 44}, {0, 0}}`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:20:43.617

您可以尝试找出正在发生的事情：

*   在标签上放一个红色背景。

*   使用`NSLog`标签的框架和单元格的 contentView 框架。

*   在上面放一个硬编码的文本。`cell.detailTextLabel.text = @"Hi";`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:23:36.487

问题可能是情节提要自动布局的约束。检查标签约束，以便在表格视图中调整单元格大小时可见

# jquery-ui - 在带有隐藏选项卡的 jQuery UI 1.9+ 上按 id 选择选项卡

> ID：14750899
> 
> 赞同：0
> 
> 时间：2013-02-07T12:16:02.460
> 
> 标签：jquery-ui, jquery-ui-tabs, hidden

如何在最新版本的 jQuery UI 中按 id 选择选项卡？我曾经这样做：

```
$(mytabs).tabs("select", "#tab_contents"); 
```

即使隐藏了一些选项卡，它也能正常工作。现在我升级了 jQuery UI，上面的代码不再工作了。我尝试在此站点上遵循[其他一些建议](https://stackoverflow.com/a/7916955/520779)，并最终得到以下结果：

```
$(mytabs).tabs("option", "active", $(mytabs).find("li").index("#tab_header")); 
```

它不仅更冗长，而且没有选择正确的选项卡，因为其中一些是隐藏的。如何做呢？

PS为了隐藏一些标签，我使用了`$("#tab_header").hide()`. 这在最近的版本中仍然正确，还是有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:51:47.900

找到了解决方案：

```
$(mytabs).tabs("option", "active", $("#tab_header").index()); 
```

这会选择正确的选项卡，无论哪些选项卡可见（甚至可以选择当前不可见的选项卡 - 显示内容，但不显示标题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:29:54.290

```
<div id="tabs">
    <ul>
       <li id="ha"><a href="#a">A</a></li>
       <li id="hb"><a href="#b">B</a></li>
       <li id="hc"><a href="#c">C</a></li>
       <li id="hd"><a href="#d">D</a></li>
       <li id="he"><a href="#e">E</a></li>
   </ul>
  <div id="a">AAA</div>
  <div id="b">BBB</div>
  <div id="c">CCC</div>
  <div id="d">DDD</div>
  <div id="e">EEE</div>
</div> 
```

`.index`从 开始`0`，

```
$(mytabs).tabs("option", "active", $("#ha").index()); 
```

但是如果你使用`#a`而不是`#ha`像这样使用

```
$(mytabs).tabs("option", "active", $("#a").index()-1); 
```

# html - 如何使用动态缓存清单处理浏览器刷新

> ID：14750900
> 
> 赞同：1
> 
> 时间：2013-02-07T12:16:03.500
> 
> 标签：html, offline-caching, cache-manifest, offlineapps

这是我的场景：

一个网站有一个索引页面和许多内容页面（为了论证，这些页面被称为 page1 到 page100）都指向同一个缓存清单 URL。

索引页面列出了所有内容页面，并让用户选择他想离线查看的内容（为了方便，假设他选择了第 1、2 和 3 页）。然后，他单击“下载”按钮，该按钮反过来回发相同的索引页面，但这次缓存清单是动态生成的，并将所选页面作为显式包含在内，因此它们都被下载到离线缓存中。然后他可以离线并查看所有页面，到目前为止一切顺利！

现在让我们说，在他下线之前，他进入 page2 并点击了浏览器刷新按钮。这将导致重新获取缓存清单。此时缓存清单没有上下文，因此它无法包含第 1 页或第 3 页的任何显式条目。因此，他现在将 page2 作为主条目（也可能是显式条目），但已从离线缓存。

谁能想到一个明智的方法来解决这个问题？我想知道每个页面都有一个单独的缓存清单 URL，但这感觉不对。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:21:14.353

不要在其他页面上包含清单属性？也许甚至不要将它包含在第一页上，除非用户刚刚提交它以便您知道它必须包含什么？

将用户的选择存储在会话变量中，以便始终生成正确的清单？

# android - 两个传感器可用于 Android 中的相同类型

> ID：14750902
> 
> 赞同：4
> 
> 时间：2013-02-07T12:16:07.267
> 
> 标签：android, android-sensors

我正在使用三星 Galaxy S3。当我检索到可用的传感器时：

我得到如下结果：

```
 LSM330DLC 3-axis Accelerometer                    TYPE_ACCELEROMETER        
 AK8975C 3-axis Magnetic field sensor              TYPE_MAGNETIC_FIELD        
 iNemoEngine Orientation sensor                    TYPE_ORIENTATION          
 CM36651 Light sensor                              TYPE_LIGHT            
 CM36651 Proximity sensor                          TYPE_PROXIMITY            
 LSM330DLC Gyroscope sensor                        TYPE_GYROSCOPE             
 iNemoEngine Gravity sensor                        TYPE_GRAVITY               
 iNemoEngine Linear Acceleration sensor-S/W        TYPE_LINEAR_ACCELERATION   
 iNemoEngine Rotation_Vector sensor                TYPE_ROTATION_VECTOR     
 LPS331AP Pressure Sensor                          TYPE_PRESSURE            
 Rotation Vector Sensor                            TYPE_ROTATION_VECTOR        
 Gravity Sensor - software sensor                  TYPE_GRAVITY              
 Linear Acceleration Sensor                        TYPE_LINEAR_ACCELERATION   
 Orientation Sensor                                TYPE_ORIENTATION           
 Corrected Gyroscope Sensor                        TYPE_GYROSCOPE 
```

STMicroelectronics 似乎是默认传感器，谷歌公司和三星公司提供的传感器可能是辅助传感器。当我使用 getVendor() 方法时，它返回 STMicroelectronics（作为硬件默认传感器）和三星。但是当我注册两个传感器时，调用了 onSensorChanged()，它返回的方向值（俯仰、滚动和方位角）差别很大。

例如，我在相同的时间戳（相差几秒钟）获得了以下值。

```
 pitch:       roll:                   azimuth:
Samsung                 0.5917465    -4.212                   84.583
STMicroelectronics      0.0865345    -3.88854                 356.825 
```

知道为什么两者之间存在差异，或者我们应该始终监控硬件和软件传感器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:34:54.780

加速度计、磁性、光、接近、陀螺仪、压力、重力，这些都是硬件传感器。

“iNemoEngine xxx”应该是一种“虚拟传感器”，由 Google 在 ICS 中实现。

线性加速度计、旋转矢量、方向，这些是使用传感器融合算法实现的软件传感器。

[http://electronicdesign.com/ios/understanding-virtual-sensors-sensor-fusion-context-aware-applications](http://electronicdesign.com/ios/understanding-virtual-sensors-sensor-fusion-context-aware-applications) [http://www.sensorplatforms.com/which-sensors-in-android-gets-direct-input-what -are-virtual-sensors/](http://www.sensorplatforms.com/which-sensors-in-android-gets-direct-input-what-are-virtual-sensors/) [http://www.thousand-thoughts.com/2012/03/android-sensor-fusion-tutorial/](http://www.thousand-thoughts.com/2012/03/android-sensor-fusion-tutorial/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T12:57:44.733

传感器对象将是设备上所有可用传感器的列表。

要检查特定传感器，请使用其他传感器常量之一，例如 TYPE_TEMPERATURE、TYPE_RELATIVE_HUMIDITY 或 TYPE_PRESSURE。

还有 getDefaultSensor() 方法。将特定的传感器常量传递给它还将确定传感器是否在设备上可用。

如果设备具有多个给定类型的传感器，则其中一个传感器将被设置为默认传感器。如果没有设置默认传感器，getDefaultSensor() 将返回 null，从而表明传感器不存在。

例如，使用 getDefaultSensor() 方法检查陀螺仪传感器的代码可能如下所示。

```
if (mSensorMgr.getDefaultSensor(Sensor.TYPE_GYROSCOPE) != null) 
{
   // Yesssss...gyroscope  sensor available
} 
else 
{
   // There's no gyroscope on this device :(
} 
```

希望能帮助到你..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T13:48:19.390

如 madhus 所述，这 2 个传感器由 2 个供应商提供。可以使用以下代码获取：

```
List<Sensor> gyro =mSensorManager.getSensorList(Sensor.TYPE_GYROSCOPE); 
for(int i=0;i<gyro.size();i++) { 
Log.d(TAG,"The vendor is: " +gyro.get(i).getVendor() + " **" +gyro.get(i).getVersion());
} 
```

除了方向（Samsung Inc 和 STMicroElectronics），我得到了所有传感器的供应商 STMicroElectronics 和 google Inc。但是，由于默认和硬件传感器是 STMicroElectronics，我正在使用它。

# ios - 如何防止我的设置（文件、NSUserdefaults）被 iExplorer 等外部应用程序修改

> ID：14750911
> 
> 赞同：2
> 
> 时间：2013-02-07T12:16:45.820
> 
> 标签：ios, objective-c, nsuserdefaults

我想在App第一次启动时做一些操作。我已经按照此处的建议编写了代码：[如何检测首次应用启动，iphone](https://stackoverflow.com/questions/9964371/how-to-detect-first-time-app-launch-iphone)。它运作良好。

我可以使用 iExplorer 删除和修改 UserDefault plist 中的内容。所以我的应用程序没有按预期运行。有没有办法限制外部应用程序（iExplorer）修改的应用程序文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T12:26:20.727

如果您使用 iExplorer 更改系统文件，您可能会使任何应用程序无法正常运行。使其具有***一定程度的***防篡改功能（尽管效率不高）的一种方法是在服务器上而不是本地文件上管理信息。例如，您的应用可能会调用 Web 服务来检索和存储设置。这并不是说他们不能篡改您的应用程序包，使其无用。

简而言之，你不能让你的应用完全防篡改

**编辑**

正如 Zaph 所建议的，您可以使用钥匙串。只需将其`[[NSBundle mainBundle] bundlePath]`作为钥匙存储在钥匙串中。 `bundlePath`每个安装都是唯一的。因此，当您的应用程序加载时，请检查`bundlePath`钥匙串，如果不存在，则它是全新安装/首次加载。应用程序加载后，将 保存`bundlePath`到钥匙串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:30:09.983

创建要保护的项目的值的哈希，加密该哈希并将其保存在`NSUserDefaults`. 当`NSUserDefaults`读取解密散列时，重新计算字段的散列并检查散列是否匹配。

如果是少量数据，比如单个值，则将其保存在钥匙串中。

# javascript - 扩展 RegExp 以获取文件扩展名

> ID：14750913
> 
> 赞同：2
> 
> 时间：2013-02-07T12:16:53.450
> 
> 标签：javascript, regex, url, filepath

我知道，已经有很多基于 RegExp 的解决方案，但是我找不到适合我需要的解决方案。

我有以下函数来获取 URL 的各个部分，但我还需要文件扩展名。

```
var getPathParts = function(url) {
    var m = url.match(/(.*)[\/\\]([^\/\\]+)\.\w+$/);
    return {
        path: m[1],
        file: m[2]
    };
};

var url = 'path/to/myfile.ext';
getPathParts(url); // Object {path: "path/to", file: "myfile"} 
```

我对正则表达式不是很熟悉，也许你可以扩展这个给定的正则表达式，以获得文件扩展名？

最好的方法是，如果文件扩展名包含第三（4）个值。例如：

```
return {
    path: m[1],
    file: m[2],
    ext: m[3]
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:20:07.727

只需添加一个捕获组即可获得最后一个`\w+`：

```
var getPathParts = function(url) {
    var m = url.match(/(.*)[\/\\]([^\/\\]+)\.(\w+)$/);
    return {
        path: m[1],
        file: m[2],
        ext: m[3]
    };
}; 
```

# silverlight - 多个对象的 Silverlight 验证

> ID：14750914
> 
> 赞同：-1
> 
> 时间：2013-02-07T12:16:55.943
> 
> 标签：silverlight, entity-framework, validation, ria

我在业务应用程序中使用 Silverlight + EntityFramework + RIA 服务。基础数据库表包括 Humans 表和 HumanAddresses 表。每个人都可以有一个或多个不同类型的地址（例如家庭、工作、出生地等）。必须始终存在至少一个“家庭”类型的地址。

UI 允许在提交之前编辑、删除和添加给定人员的新地址。我需要执行验证以查明这些更改是否违反了命名规则。做这个的最好方式是什么？

我尝试使用 CustomValidationAttribute，但它只允许（AFAIK）实体级验证，而不是跨多个实体的验证，其中一些要删除，而另一些要添加或修改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T17:38:32.683

如果您需要访问其他实体，则需要在数据库上下文中覆盖 ValidateEntity。当您调用 SaveChanges() 时，会为每个已更改的实体调用此方法。

```
protected override DbEntityValidationResult ValidateEntity(DbEntityEntry entityEntry, IDictionary<object, object> items)
{
    DbEntityValidationResult result = new DbEntityValidationResult(entityEntry, new List<DbValidationError>());
    result = base.ValidateEntity(entityEntry, items);
    //Do your validation
    if(invalid)
    {
        result.ValidationErrors.Add(new DbValidationError("Property", "Error Message"));
    }
    return result;
} 
```

以下是 EF [http://msdn.microsoft.com/en-us/data/gg193959.aspx中的验证选项](http://msdn.microsoft.com/en-us/data/gg193959.aspx)

# r - 从不同的列表中创建变量名

> ID：14750917
> 
> 赞同：1
> 
> 时间：2013-02-07T12:16:59.563
> 
> 标签：r

我正在尝试从 R 中的列表创建变量名，但我很挣扎！

我最终想做的是使用以前创建的列表来创建多元线性回归的公式，由此列表中的每个值将标识回归公式的解释变量之一。

我从 x 个可变长度列表（GoodModels_LMi，其中 i 从 1 到 x）开始，并使用每个列表创建一个单独的公式。

```
for (i in 1:x){
    lm(formula created from appropriate list)
    i<-i+1
    } 
```

这些列表对应于要从数据矩阵 (AllData) 中选择的变量编号。例如，如果：

```
GoodModels_LM1<-c(2,4,8) 
```

我希望我的回归公式是：

```
AllData[,1]~AllData[,2]+AllData[,4]+AllData[,8] 
```

我一直在尝试使用 as.formula() 和 paste() 来实现这一点，但是，我不确定如何创建公式的第二部分。

```
as.formula(paste("AllData[,",i,"]~",paste(?????????))) 
```

我知道下面的内容是不正确的，但与我来的一样接近：

```
paste("AllData[,",paste("GoodModels_LM",i,sep=""),"]",collapse="+") 
```

我也研究了 assign()，但没有成功，因为 value 参数与 x 参数相同。

非常感谢您对此的任何帮助！

奥利维亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:27:29.640

您的公式应该包含 column `names`，而不是实际数据。这是一个使用`iris`.

想象一下，您想使用来自`iris`. 首先，使用 构造一个公式`paste()`：

```
vars <- c(2, 4, 5)
frm <- paste("Sepal.Length ~ ", paste(names(iris)[vars], collapse=" + "))
frm

"Sepal.Length ~  Sepal.Width + Petal.Width + Species" 
```

因此，该对象`frm`是一个字符串，其中包含您可以传递给的公式`lm()`：

```
lm(frm, iris)
Call:
lm(formula = frm, data = iris)

Coefficients:
      (Intercept)        Sepal.Width        Petal.Width  
           2.5211             0.6982             0.3716  
Speciesversicolor   Speciesvirginica  
           0.9881             1.2376 
```

# terminal-emulator - 如果我有 ptty，是否需要实现终端仿真？

> ID：14750922
> 
> 赞同：0
> 
> 时间：2013-02-07T12:17:21.340
> 
> 标签：terminal-emulator, pty

如果我有一个给我的伪终端（比如一个 pty-req（[http://www.ietf.org/rfc/rfc4254.txt](http://www.ietf.org/rfc/rfc4254.txt)）），我需要模拟返回的数据，还是已经模拟的数据?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:42:24.330

这取决于您正在谈论的仿真级别。pty 使用远程服务器的终端驱动程序，因此由`stty`（和类似的系统调用）控制的选项将在那里模拟。

但是您正在运行一个发送终端控制转义序列的应用程序，您需要在本地处理它。

# c# - 如何以编程方式在 Windows 手机的后台拾取麦克风？

> ID：14750928
> 
> 赞同：0
> 
> 时间：2013-02-07T12:17:40.767
> 
> 标签：c#, windows-phone

是否有任何代码示例（C#）如何在 Win Phone 7+ 下拾取和处理麦克风声音？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T16:38:07.773

你不能，windows phone 作为许多不能在后台代理上使用的[API ，麦克风就是其中之一。](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202962%28v=vs.105%29.aspx)

# java - 如何将 Java EE 项目从 MyEclipse 迁移到 Eclipse？

> ID：14750934
> 
> 赞同：2
> 
> 时间：2013-02-07T12:17:50.483
> 
> 标签：java, eclipse, jakarta-ee, myeclipse

在我的公司，我们在 MyEclipse 中开发 Java EE 产品，但现在我必须将所有项目传输到 Eclipse 的最新版本（Eclipse Java EE Juno sr1 x64）。

我不知道需要发生什么。如何继续并将所有项目从 MyEclipse 迁移到普通 Eclipse？

# javascript - jQuery 不会在 page.evaluate 内加载

> ID：14750937
> 
> 赞同：0
> 
> 时间：2013-02-07T12:17:53.910
> 
> 标签：javascript, jquery, phantomjs

我正在编写一个涉及 jQuery 的 phantomjs 自动化脚本。

我会尽量简短。

**首先 - 页面加载**

版本 1：

```
page.includeJs("http://............../1.9.0/jquery.min.js", function() {
  page.open(urlDecoded, function (status) {
    page.evaluate(fChecker, params);
  });
}); 
```

版本 2

```
page.open(urlDecoded, function (status) {
  page.includeJs("http://............../1.9.0/jquery.min.js", function() {
    page.evaluate(fChecker, params);
  });
}); 
```

版本 3

```
page.open(urlDecoded, function (status) {
  page.evaluate(fChecker, params);
}); 
```

**第二——评价**

对于版本 1 和 2：

```
function fChecker(params) {
  ...
  ...
  $('.blabla').val('yes');
} 
```

对于版本 3：

```
function fChecker(params) {
  var jq = document.createElement('script');
  jq.src = "//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js";
  document.getElementsByTagName('head')[0].appendChild(jq);
  ...
  ...
  $('.blabla').val('yes');
} 
```

**最后 - 结果**

$ 无法识别。无法识别 jQuery。

我在评估后保存 HTML 内容，并在自动页面中显示我的脚本 - 所以它确实正确添加了文件。

同样的方法（第 2 版）已经适用于其他两个站点，一切都很好。

稍后使用另一个评估功能（仅用于提交评估和分析的页面）工作正常。

有任何想法吗？

谢谢你。

PS。我已经搜索了网站上的每一个项目。题目不重复。

# hadoop - Apache Pig 与 Hive

> ID：14750941
> 
> 赞同：-1
> 
> 时间：2013-02-07T12:18:08.400
> 
> 标签：hadoop, hbase, hive, apache-pig, bigdata

我是大数据新手，我的公司是一个大数据仓库我想对大数据进行一些 BI 和分析我使用 hbase 和 hadoop

哪个最适合进行分析和在线报告，Hive 还是 Pig？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T12:24:27.870

看看这个讨论： [猪和蜂巢之间的区别？为什么两者都有？](https://stackoverflow.com/questions/3356259/difference-between-pig-and-hive-why-have-both/6924095#6924095)

简而言之 - Hive 是声明式的 - 你实际上编写 SQL，而 Pig 是命令式的 - 你编写执行计划。我认为 Hive 很容易上手，特别是如果你熟悉 SQL，而 Pig 会给你更多的灵活性。

# python - 替换字符串中的句点 (".")

> ID：14750942
> 
> 赞同：3
> 
> 时间：2013-02-07T12:18:09.027
> 
> 标签：python

我有一个类型的字符串，`../sometext/someothertext`我试图用`..`网站的名称替换字符串中的`http://www.website.com`。

在 Python 中，我所做的是这样的：

```
strName = "../sometext/someothertext"
strName.replace("..", "http://www.website.com")
print strName 
```

但我得到的唯一输出是

```
../sometext/someothertext 
```

我也尝试过逃避这些时期，比如

```
strName = ../sometext/someothertext
strName.replace("\.\.", "http://www.website.com") 
```

但输出不会改变。我该怎么做呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-07T12:19:16.683

你没有分配结果...

```
strName = strName.replace("..", "http://www.website.com") 
```

`.replace`不修改原始字符串，但返回一个带有修改的新字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:51:37.583

指定一个替换的好主意，以防有其他 .. 在那里

```
strName = strName.replace("..", "http://www.website.com", 1) 
```

# c# - MVC4 将模型部分绑定到 ICollection 或 List

> ID：14750946
> 
> 赞同：4
> 
> 时间：2013-02-07T12:18:22.320
> 
> 标签：c#, asp.net, razor, asp.net-mvc-4, model-binding

给定一个模型

```
public class Task
{
public int TaskId { get; set; }
public string Title { get; set; }
public ICollection<SomeData> Information { get; set; }
} 
```

在哪里

```
public class SomeData
{
    public int SomeDataId { get; set; }
    public string Description { get; set; }
} 
```

我有一个看法

```
@model myProject.Models.Task

<div>
    @Html.LabelFor(model => model.Title)
</div>

<table>
@Html.Partial("_InformationEdit", Model.Information.ToList(), new ViewDataDictionary(Html.ViewDataContainer.ViewData) {
                TemplateInfo = new System.Web.Mvc.TemplateInfo { HtmlFieldPrefix = "Information" }})
</table> 
```

我的部分是

```
@model IList<myProject.Models.SomeData>

@for (int i = 0; i < Model.Count(); i++)
{
    <tr>
        <td>
            @Html.EditorFor(modelItem => Model[i].Description)
        </td>
    </tr>
 } 
```

**然而**

我的 Html 字段被渲染为

```
<input class="text-box single-line" id="Information__0__Description" name="Information.[0].Description" type="text"> 
```

名字应该在哪里`Information[0].Description`。它在那里有一个额外的点，因此在发布时没有正确绑定回模型。我怎样才能解决这个问题？

根据**[模型绑定到列表](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)**，我可以看到我的 Id 应该是什么，但我就是想不出正确的语法。

此外，有没有更优雅的方法来实现这一点`IEnumerable`using a `@foreach`？

*有关的：*

[ASP.Net MVC4 将“创建视图”绑定到包含列表的模型](https://stackoverflow.com/questions/12974957/asp-net-mvc4-bind-a-create-view-to-a-model-that-contains-list)

[ASP.NET MVC 模型绑定 IList<> 参数](https://stackoverflow.com/questions/653514/asp-net-mvc-model-binding-an-ilist-parameter)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:46:48.210

您可以`<input...`像这样直接使用：

**页：**

```
<table>
    @Html.Partial("_InformationEdit", Model.Information)
</table> 
```

**部分页面：**

```
@for (int i = 0; i < Model.Count(); i++)
{
    <tr>
        <td>
            <input class="text-box single-line" id="Information[@i]Description" name="Information[@i].Description" type="text" value="@Model[i].Description" />
        </td>
    </tr>
} 
```

或者，为了能够像您的示例中那样传递前缀，您可以保持页面代码相同并更改您的部分代码，例如：

**页：**

```
<table>        
    @Html.Partial("_InformationEdit", Model.Information, 
        new ViewDataDictionary(Html.ViewDataContainer.ViewData) 
        {
            TemplateInfo = new System.Web.Mvc.TemplateInfo { HtmlFieldPrefix = "Information" }
        })
</table> 
```

**部分页面：**

```
@for (int i = 0; i < Model.Count(); i++)
{
    <tr>
        <td>
            @{
                string fieldName = string.Format("{0}[{1}].Description", ViewData.TemplateInfo.HtmlFieldPrefix, i);
                <input class="text-box single-line" id="@fieldName" name="@fieldName" type="text" value="@Model[i].Description" />
            }
        </td>
    </tr>
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T16:23:30.877

改变我的偏爱

```
@model IList<myProject.Models.SomeData>

@{
    var Information = Model;
}

@for (int i = 0; i < Information.Count(); i++)
{
    <tr>
        <td>
            @Html.EditorFor(modelItem => Information[i].Description)
        </td>
    </tr>
 } 
```

有效，但这似乎有点奇怪！

我想确保被绑定的对象与它需要绑定的属性同名会做一些魔法......欢迎其他建议或解释！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-31T11:27:22.883

你的部分应该是：

```
@model IList<myProject.Models.SomeData>

@for (int i = 0; i < Model.Count(); i++)
{
  <tr>
    <td>
      @Html.EditorFor(model => model[i].Description)
    </td>
  </tr>
} 
```

如果将 i 替换为项目名称，也更易于阅读

# javascript - jQuery height() 函数不适用于元素

> ID：14750949
> 
> 赞同：3
> 
> 时间：2013-02-07T12:18:34.000
> 
> 标签：javascript, jquery

我目前正在组装一个 jQuery 触摸轮播。但是，在设置元素的高度（或宽度）时，我似乎遇到了一个小问题。

以下是该函数的相关代码：

```
carousel = function( container, options )
{
    this.settings = $.extend({

        // General settings:
        width: 600,
        height: 400,
        slides: 'div',
        snapTo: true,
        mouseSupport: true,
        trackMovement: true,
        slideWidth: 600,
        slideHeight: 400,

        // CSS classes:
        wrapperCls: 'carousel_wrapper',
        innerCls: 'carousel_scroll_inner'

    }, options);

    this.container = container;
    this.scroller = null;
    this.slides = this.container.children(this.settings.slides);
    this.numSlides = this.slides.length;
    this.scrollWidth = this.settings.width * this.numSlides;

    this.container.addClass(this.settings.wrapperCls);
    this.scroller = $('<div />').addClass(this.settings.innerCls);
    this.container.wrapInner(this.scroller);

    this.scroller.width(1500)

    this.scroller.css('width', this.scrollWidth);
    this.container.css({ width: this.settings.width, height: this.settings.height });
}; 
```

这又是通过执行以下操作来调用的：

```
$(function() {
    var carousel1 = new carousel($('#myElement'));
}); 
```

`#myElement`肯定存在，不会报错。`this.scroller`还包含正确的 jQuery 对象，该对象已包装到`this.container`. 问题是我无法`this.scroller`使用或函数设置 CSS`width()`的宽度或高度。`height()``css()`

我错过了什么？我整理了一个[**jsFiddle**](http://jsfiddle.net/KfUdT/)来演示这个问题。如果您检查元素检查器，您可以看到元素的尺寸永远不会更新`div.carousel_scroll_inner`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T12:42:29.930

问题是，这里：

```
this.container.wrapInner(this.scroller); 
```

jQuery 将使用副本。所以`this.scroller`不是同一个元素包裹在下面的任何东西上`this.container`。尝试：

```
this.container.addClass(this.settings.wrapperCls);
this.scroller = $('<div />').addClass(this.settings.innerCls);
this.scroller.append(this.container.contents());
this.container.append(this.scroller); 
```

# ruby - 无法使用 selenium webdriver 的 xpath 单击嵌套的锚元素

> ID：14750952
> 
> 赞同：0
> 
> 时间：2013-02-07T12:18:49.730
> 
> 标签：ruby, xpath, selenium-webdriver

***请在下面找到 Html：***

```
<table class="data" id="filteredTable" cellpadding="0" cellspacing="1">
<tbody>

<tr class="rowLight">
  <td class="lt4"><input name="ids" value="att1" type="checkbox"></td>
  <td><a hfref= " link1" > foo </a>
  </td>
  <td>item1</td>
  <td>item2</td>
  <td>item3</td>
</tr>

<tr class="rowDark">
  <td class="lt4"><input name="ids" value="att2" type="checkbox"></td>
  <td><a hfref= " link2" > boo </a>
  </td>
  <td>item1</td>
  <td>item2</td>
  <td>item3</td>
</tr>

<tr class="rowLight">
  <td class="lt4"><input name="ids" value="att3" type="checkbox"></td>
  <td><a hfref= " link3" > bar </a>
  </td>
  <td>item1</td>
  <td>item2</td>
  <td>item3</td>
</tr> 
```

现在我需要点击 的链接`bar`。但是我的下面`Xpath`也没有帮助我进入酒吧。所以任何帮助如何做同样的事情。

我没有给出`html`这个部分`//form[contains(@name,'filterset_FilterSetListForm')]/table[contains(@class,'contentBody')]/tbody/tr/td/table[contains(@class,'content')]/tbody/tr/td/`。<~~直到这我是正确的。混乱***`<tr>`***从这里开始`/table[contains(@id,'filteredTable')]/tbody/tr`

***第二部分：***

什么时候会有匹配说`bar`，他们的关联`check box (s)`可以点击吗？

在这方面有什么帮助吗？

我正在***`selenium -web driver`***使用`Ruby 1.9.3`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:37:51.107

您可以通过`a`这种方式获取元素

`/table[contains(@id,'filteredTable')]/tbody/tr/td/a[contains(text(),'bar')]`

或者如果您想要与链接文本完全匹配

`/table[contains(@id,'filteredTable')]/tbody/tr/td/a[text()=' bar ']`

# facebook - 如何在 Facebook 状态更新的文本中插入嵌入式链接

> ID：14750953
> 
> 赞同：0
> 
> 时间：2013-02-07T12:18:49.793
> 
> 标签：facebook, hyperlink, status

假设我想发布一些东西并给出一个 Facebook 页面的链接（假设它是“你好”）。我只想要一个包含链接（文本链接，类似于其他链接）的状态更新，单击该链接将重定向到我的 Facebook 页面。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T02:48:58.413

您可以使用此代码发布状态：

```
http://www.facebook.com/connect/uiserver.php?app_id=2915120374&display=touch&method=stream_publish&redirect_uri=http://www.facebook.com&async&action_links=[{"text":"máy đo đường huyết","href":"your url"}]&attachment={'media':[{'type':'image','src':'#','href':'http://www.maydoduonghuyet.com.vn/'}],'description':'','properties':{'Click+':{'text':'máy đo đường huyết','href':'your url'}}} 
```

# powershell - 将日期而不是日期添加到文件名的脚本

> ID：14750954
> 
> 赞同：1
> 
> 时间：2013-02-07T12:18:50.117
> 
> 标签：powershell, batch-file, vbscript, dayofweek

我需要创建一个脚本批处理、PowerShell 或 VB 来将星期几添加到文件名中。

例如，有 4 个文件，并且都需要在星期一将 MON 附加到前面，在星期二附加 TUE，在星期三附加 WED，等等。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T12:42:00.187

```
$dow = (Get-Date -f ddd).ToUpper()
$fileName = "${dow}_your_file_name.txt "

THU_your_file_name.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T14:02:49.410

好吧，powershell 有一个答案，VBScript 有一个答案。这是 Windows cmd 批处理的一个。

```
@echo off
setlocal
for /f "tokens=5" %%I in ('find "" "%date:~0,3%" 2^>^&1') do set day=%%I
ren "oldfile.txt" "%day%_oldfile.txt" 
```

**解释**

```
:: DIRECTIVE          RESULT
:: --------------------------------------------------------
:: %date%             Thu 02/07/2013
:: %date:~0,3%        Thu
:: find "" "Thu"      error stating "File not found - THU"
:: -------------------------------------------------------- 
```

然后剩下的就是将错误从 stderr 重定向到 stdout 并刮掉第五个令牌。

（用于转换为大写[的想法来源）](http://www.robvanderwoude.com/battech_convertcase.php)`find`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T12:29:22.443

使用 VBScript Docs 或 Google 来了解关于`Weekday()`和`WeekdayName()`函数的详细信息：

```
Today = Date()
DayNum = Weekday(Today)
DayName = WeekdayName(DayNum, True)
WScript.Echo UCase(DayName) & "_" &  "somefile.txt"

THU_somefile.txt 
```

**PS：** 从这里开始：[函数（VBScript）](http://msdn.microsoft.com/en-us/library/3ca8tfek%28v=vs.84%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T01:53:22.030

如果您选择 VBScript，请注意与`WeekDayName`区域语言设置相关的功能。例如，`Friday`is `Петък`（保加利亚语），所以在我的系统`WeekDayName`中设置为 abbreviate`True`将返回`Пт`， not `Fri`。

```
WScript.Echo WeekDayAbbrENG()

Function WeekDayAbbrENG()
    Dim WDs
    WDs = Split("SUN MON TUE WED THU FRI SAT")
    WeekDayAbbrENG = WDs(Weekday(Now) - 1)
End Function 
```

[编辑] 实际上，同样的问题出现`Get-Date`在 PowerShell 中。

# html - 停止使用 CSS 破坏 BR 标签

> ID：14750955
> 
> 赞同：33
> 
> 时间：2013-02-07T12:18:51.957
> 
> 标签：html, css

有没有办法`<br>`只使用 CSS 来阻止标签破坏？

我尝试`br{display:none}`了 whick 作品，但它也摆脱了两个词之间的空格，我需要保留。

这仅适用于 webkit (iPhone)，因此任何 CSS3 盛会都可以。

我无法编辑 CMS 中的内容，因此很遗憾，简单地删除标签对我来说不是一个选择。

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-10-10T16:04:23.567

按照此处的答案，这可以防止`<br>`标签在 Chrome 和 IE 中中断：

```
br {
    content: " ";
    display: none;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-11-06T16:32:34.500

这对我有用：

```
br {content: ""}
br:after {content: "\00a0"} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-07T15:01:04.360

好的，经过一番玩耍后，我找到了一个解决方案，我将与您分享。似乎可以`<br>`使用 CSS 完全控制标签

`button br{content:" ";border:1px solid #fff;background:red;padding:50px;}/* whatever you like */`

`button br:after{content:" ";}`

Html -

`<button>the annoying<br/>tag is gone leaving a controlable space</button>`

不知道这是如何跨浏览器，但它在 Webkit 和 iPhone 中工作，这就是我现在所需要的。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-11-06T15:02:09.403

为什么不使用：

```
br {
    content: " "; /* Remove break */
    margin-right: 6px; /* Set space between text blocks */
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-07T12:46:45.287

正如boz在对OP的评论中提到的那样，这是不可能的。要么`<br/>`是可见的（在这种情况下，它是一个回车），要么在这种情况下你无法通过 CSS 控制它。

这里的根本问题是你使用了错误的工具来完成这项工作——你想改变 DOM 的结构，它是 Javascript 的域（至少在客户端中）。

不需要 Javascript 或更改 CMS 的替代方法是设置服务器来代理请求并在`<br/>`标签通过文档时剥离标签，但这似乎有点矫枉过正

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-14T14:08:50.093

```
content: " ";
padding-right: 5px; // ok, same as margin-right 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-12-01T10:21:39.777

请参阅[使用 CSS 忽略 <br>？](https://stackoverflow.com/questions/7596647/ignore-br-with-css). 解决方案之一是这个（这是我认为最好的一个）

```
br  {
    content: ' '
}
br:after {
    content: ' '
} 
```

# ruby-on-rails - 如何在没有 Rails 的情况下测试 ActiveRecord？

> ID：14750959
> 
> 赞同：1
> 
> 时间：2013-02-07T12:19:03.250
> 
> 标签：ruby-on-rails, ruby, unit-testing, rails-activerecord

我有一个项目，我在其中使用 ActiveRecord 将信息存储在 sqlite db 文件中。我没有使用 Rails，AR 似乎完美地完成了这项工作。我的问题是如何在不访问数据库的情况下测试我的课程？我发现了一些可以解决问题的宝石（FactoryGirl、UnitRecord），但它们是用来与 Rails 一起工作的。

```
class News < ActiveRecord::Base
belongs_to :feed

def delete_old_news_if_necessary
  # time_limit = Settings::time_limit
  return if time_limit.zero?

  News.destroy_all("date < #{time_limit}")
end

def delete_news_for_feed(feed_id)
  News.destroy_all(:id => feed_id)
end

def news_for_feed(feed_id)
  News.find(feed_id)
end
end 
```

我读到我可以做一个列存根：

```
Column = ActiveRecord::ConnectionAdapters::Column
News.stubs(:columns).returns([Column.new(),...]) 
```

这是进行这些测试的正确方法吗？另外，什么时候最好有一个单独的数据库来测试并创建它，运行测试，然后删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:25:53.273

如果你想避免在测试中碰到数据库，我可以推荐[mocha](http://gofreerange.com/mocha/docs/) gem。它不仅可以存根，还可以让您定义期望。

**编辑：**关于您关于何时最好使用测试数据库的问题：我想说，只要没有理由反对它。:)

**编辑：**例如，您可以`News.find`在测试中像这样模拟：

```
def news_for_feed_test
  # define your expectations:
  news = News.new
  News.expects(:find).with(1).returns(news)
  # call the method to be tested:
  News.new.news_for_feed(1)
end 
```

同时，这确保`find`只被调用一次。Mocha 可以为您做更多的事情。看看文档。顺便说一句，看起来你的这些方法应该是类方法，不是吗？

# c# - Metro 应用程序中的键盘快捷键

> ID：14750963
> 
> 赞同：5
> 
> 时间：2013-02-07T12:19:18.563
> 
> 标签：c#, .net, xaml, windows-8, microsoft-metro

无论哪个控件具有焦点，如何捕获键盘快捷键？我不想为用户可以关注的每个可能的控件编写相同的内容。那么如何查看页面范围/独立于控件的快捷方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T13:46:40.143

将此代码添加到构造函数中，它将处理全局键 down 和 key

```
Window.Current.CoreWindow.KeyDown += CoreWindow_KeyDown;
        Window.Current.CoreWindow.KeyUp += CoreWindow_KeyUp; 
```

这是他们的活动

```
void CoreWindow_KeyUp(Windows.UI.Core.CoreWindow sender, Windows.UI.Core.KeyEventArgs args)
    {
        //this.Frame.Navigate(typeof(MainPage));
        var key = args.VirtualKey;
        string aa = args.ToString();
    }

    void CoreWindow_KeyDown(Windows.UI.Core.CoreWindow sender, Windows.UI.Core.KeyEventArgs args)
    {
        //this.Frame.Navigate(typeof(MainPage));
        var key = args.VirtualKey;
        string aa = args.ToString();
    } 
```

您可以在此事件中使用自己的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:47:16.887

在根元素上设置事件处理程序怎么样？我认为事件最终会到达父控件，如果它没有在其他任何地方处理。这是我为一个简单的 KeyDown 事件所做的事情。

```
<common:LayoutAwarePage
x:Name="pageRoot"
//elided
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d" KeyDown="MyEventHandler"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-06T03:01:41.310

最好的解决方案是使用前面建议的根元素，因为全局快捷方式使用应用于每个页面的一个类的功能，这意味着必须在每个页面上单独处理每个快捷方式，否则可能会出错。

我的 XAML 设置如下：

```
<Page
   Name="root"
    ...>

    ...

</Page> 
```

我的 C# 操作该页面是这样的：

```
... 
namespace DenisQuiz.UWP
{
   public sealed partial class StudyADeck : Page
   {
      ...
      public StudyADeck()
      {
         ...
         // Keyboard shortcuts
         root.KeyDown += Root_KeyDown;
      }

      private void Root_KeyDown(object sender, KeyRoutedEventArgs e)
      {
         switch (e.Key)
         {
            case Windows.System.VirtualKey.F:
               FlipCard();
               break;
            case Windows.System.VirtualKey.Right:
               NextCard();
               break;
            case Windows.System.VirtualKey.Left:
               PreviousCard();
               break;
            case Windows.System.VirtualKey.S:
               Frame.GoBack(); // Stop Studying
               break;
            case Windows.System.VirtualKey.E:
               Frame.Navigate(typeof(EditANotecard)); // Edit this card
               break;
            case Windows.System.VirtualKey.D:
               DeleteNotecardAsync();
               break;
            default:
               break;
         }
      }
... 
```

该名称`root`可通过该窗口打开时的任何按键访问，通过表达式`root.KeyDown += Root_KeyDown`. 这会调用该`Root_KeyDown()`方法，然后该方法可以根据 keypress 参数发送的键实现任何功能`KeyRoutedEventArgs e`。

我的代码实现了一个`switch`语句来确定关键功能。

# python - 第一步 Django 错误

> ID：14750964
> 
> 赞同：0
> 
> 时间：2013-02-07T12:19:20.950
> 
> 标签：python, django, eclipse, pydev

我需要问一下，因为我是从 Django 开始的，我不可能继续我正在学习的教程。我刚刚完成了 Python 课程，我知道 Python 的基础知识。情况是我已经在我的 mac 中安装了 Django，这没关系，因为当我在 IDLE 中执行

```
import django
print django.VERSION 
```

它是一个很好的答案，在 IDLE 中没有错误（是我用来编写 python 代码的软件）。但是当我在终端中执行命令时：

```
python manage.py runserver 
```

它引发了这个错误：

```
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/Current/bin/django-admin.py", line 5, in <module>
    management.execute_from_command_line()
  File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/django/core/management/__init__.py", line 261, in fetch_command
    klass = load_command_class(app_name, subcommand)
  File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/django/core/management/__init__.py", line 69, in load_command_class
    module = import_module('%s.management.commands.%s' % (app_name, name))
  File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/django/core/management/commands/runserver.py", line 8, in <module>
    from django.core.servers.basehttp import AdminMediaHandler, run, WSGIServerException, get_internal_wsgi_application
  File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/django/core/servers/basehttp.py", line 26, in <module>
    from django.views import static
  File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/django/views/static.py", line 95, in <module>
    template_translatable = ugettext_noop(u"Index of %(directory)s")
  File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/django/utils/translation/__init__.py", line 75, in gettext_noop
    return _trans.gettext_noop(message)
  File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/django/utils/translation/__init__.py", line 48, in __getattr__
    if settings.USE_I18N:
  File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/django/utils/functional.py", line 184, in inner
    self._setup()
  File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/django/conf/__init__.py", line 40, in _setup
    raise ImportError("Settings cannot be imported, because environment variable %s is undefined." % ENVIRONMENT_VARIABLE)
ImportError: Settings cannot be imported, because environment variable DJANGO_SETTINGS_MODULE is undefined. 
```

我还想问你几个问题：

*   我可以使用 XAMPP 代替 Django 吗？如何？
*   Django 到底是做什么用的？
*   我已经在 Eclipse 中安装了 PyDev。如何设置 Django 以正确执行代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:29:34.817

`django-admin startproject xxx`在目标目录下调用命令。您可以获得三个 .py 文件：**setting.py**、**urls.py**和**manage.py**。你可以执行`python manage.py runserver`命令

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:47:31.330

我认为它现在有点过时了，但我强烈建议您阅读[Djangobook](http://www.djangobook.com/en/2.0/index.html)示例。它将解释如何正确设置 Django，并为如何使用它提供一个很好的基础。

# c# - VS2010如何在每个方法中设置断点

> ID：14750967
> 
> 赞同：19
> 
> 时间：2013-02-07T12:19:33.417
> 
> 标签：c#, visual-studio-2010, debugging

我有一个更大的 (c#) WPF 应用程序`n-classes`和`m-methods`. 我想在每个方法中放置一个断点，所以每次我在应用程序中按下按钮或调用任何方法时，我都希望 VS2010 中的应用程序能够命中该断点。我想了解应用程序的流程/进度。

而且由于我有很多方法，我宁愿不手动在每个方法中放置一个断点。

是否有任何命令或工具可以在我的 VS2010 解决方案中随处放置断点？

**编辑**：可能类似于以下插件：[http ://weblogs.asp.net/uruit/archive/2011/08/04/visual-studio-2010-addin-setting-a-class-breakpoint.aspx](http://weblogs.asp.net/uruit/archive/2011/08/04/visual-studio-2010-addin-setting-a-class-breakpoint.aspx)

**edit2**：有一些答案，但没有一个似乎是直接简单的解决方案。还要别的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-28T06:38:24.900

**EDIT: tested only with C++**

I came across [this article](http://blogs.msdn.com/b/zainnab/archive/2011/03/15/setting-a-breakpoint-on-a-class.aspx) that shows how to set a breakpoint at the beginning of every method in a class. I've tested it with VS 2010\. The basic process (when using Visual C++) is:

1.  Go to *Debug > New Breakpoint > Breakpoint at Function* (Ctrl + B).
2.  In the *Function* field, insert `MyClass::*`
3.  This will show up as a single breakpoint in the *Breakpoints* window, but as soon as one of `MyClass`'s methods is hit, you'll see a breakpoint at the beginning of every function in `MyClass`, and all of these will be "children" of the original breakpoint in the *Breakpoints* window.

~~I imagine this works with C# as well.~~

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-09T19:42:49.473

[这个答案](https://stackoverflow.com/a/357807/292555)建议了一个宏，可以按照您的要求执行，但我个人的建议是改用分析器 - 一个可以让您暂停和恢复动态分析（几乎所有商业分析器都这样做），然后点击“在您单击按钮之前开始分析”按钮。在分析器中查看调用树通常是深入了解应用程序正在做什么的一种非常方便的方式，这比在调试器中单步执行要多得多。

**更新：**此功能存在于我正在开发的名为[OzCode](http://www.oz-code.com)的 Visual Studio 扩展中。使用 OzCode，当您单击类定义旁边的图标时，您将看到 QuickAction：

![为班级中的每个成员添加断点](../Images/7a88e6e1d728519ef6871b6733ab4c4d.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-25T15:12:00.560

这是一种使用简单文本替换的快速而肮脏的方法：

1.  格式化 C# 文件，使所有缩进对齐。您可以在`Edit`> `Advanced`>中执行此操作`Format Document`
2.  打开文本替换为`Ctrl+H`
3.  设置“要查找的文本”字段`"^ {"`。
4.  将“替换”字段设置为此`" {System.Diagnostics.Debugger.Break();"`
5.  单击窗口中的“使用正则表达式”小按钮
6.  点击“全部替换”或点击`Alt+A`
7.  如果您的文件包含任何具有嵌套枚举、类或结构的类，您将遇到一些编译器错误。从它们中删除 Debug 调用，直到您的代码编译。如果您的嵌套类有自己的方法，则必须在替换字符串中使用更多选项卡再次运行此过程。

工作原理：它使用 Visual Studio 文档格式化程序，并假定文件中的所有方法都以两个选项卡开头，然后是一个“{”。因此，任何以两个选项卡和一个“{”开头的行都将替换为相同的两个选项卡、相同的“{”和对调试器的调用。

如果你的文件有嵌套枚举等，你会得到编译器错误，因为文本替换不区分方法和枚举。例如，您会看到：

```
enum MyColors
{ System.Diagnostics.Debugger.Break(); //error here
    Red,
    Green,
    Blue,
} 
```

* * *

如果您希望能够禁用这些断点，我能想到的最好方法是一个简单的布尔值。在您的代码中的某处，插入以下内容：

```
#if DEBUG
        private static bool _ignoreDebug = false;
#endif 
```

（我把这个代码放在`#if DEBUG`那里作为一个标志，这个代码仅用于调试。没有必要）然后在上面的步骤#4中，使用这个替换字符串：

```
"        {if(!_ignoreDebug){System.Diagnostics.Debugger.Break();}" 
```

然后，当您遇到断点并且不想再点击时，在监视窗口中键入 this 并按 enter `_ignoreDebug = true`。要重新打开它，您需要在可以访问`_ignoreDebug`布尔值的地方插入一个手动断点。

* * *

要从您的代码中删除所有这些，请进行另一个文本替换，或者只是编辑撤消所有内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T09:06:53.183

我认为您使用以下工具为它创建一个“方面”：[postsharp](http://www.sharpcrafters.com/)

面向方面的编程允许您将代码添加到每个方法的开头或结尾（通过后处理步骤）。所以添加这一行很简单：

```
 System.Diagnostics.Debugger.Break() 
```

到每种方法（无需实际编辑所有源代码）。更典型地，它用于将日志语句添加到每个方法的开头，例如：“输入方法 DrawLine(x=30,y=80,z=12)”和方法的末尾：“离开方法 DrawLine(x, y,z)”。这使您的程序流程变得容易

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-05T16:37:01.257

您可以使用我的[运行时流程](https://vlasovstudio.com/runtime-flow/)扩展来查看按下按钮后调用的所有方法，而无需设置断点。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-07T12:46:50.217

您可以`System.Diagnostics.Debugger.Break()`在进入您的方法时使用。

像这样的东西可能带有您在范围内设置的布尔值？

```
#if DEBUG
  if (BreakPointEveryMethod)
    System.Diagnostics.Debugger.Break();
#endif 
```

肯定会有一种快速的方法来添加它，`notepad++`但我不确定是否有一种快速简便的方法可以让您通过简单的命令行来实现这一点。

# nhibernate - 是否可以使用返回自定义对象而不是域对象的 NHibernate 调用存储过程？

> ID：14750969
> 
> 赞同：1
> 
> 时间：2013-02-07T12:19:37.267
> 
> 标签：nhibernate, stored-procedures, nhibernate-mapping

我有几个不返回域对象的存储过程（即；在 hbm 文件中具有相应 sql 表映射的对象）；但改为返回自定义对象。

我想使用 NHibernate 调用这些存储过程并用输出自动填充我的自定义对象，而不是像使用 SqlDataReader 那样手动填充它们。

一个例子将受到高度赞赏。

顺便说一句：我通过代码使用 nhibernate 3.2 新功能映射。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T12:55:11.293

也许您可以尝试以下方法（取自[https://stackoverflow.com/a/10513319/1236044](https://stackoverflow.com/a/10513319/1236044)）

它使用 CreateSQLQuery。您可以尝试`select...`用`Exec MyStoredProc`

关键是让您的选择或存储过程返回与您尝试填充的 DTO 的属性同名的列。

```
public class YourDto
{
    public int YourDtoId { get; set; }
    public string YourDtoTitle { get; set; }
}

then

var result = yourNhSession
    .CreateSQLQuery("select yourColumn1 as YourDtoId, yourColumn2 as YourDtoTitle from YOUR_TABLE")
    .SetResultTransformer(Transformers.AliasToBean<YourDto>())
    .List<YourDto>(); 
```

# java - 使用一个对象从集合中删除元素的优点

> ID：14750972
> 
> 赞同：4
> 
> 时间：2013-02-07T12:19:54.340
> 
> 标签：java, collections

[我在官方 java 文档](http://docs.oracle.com/javase/tutorial/collections/interfaces/collection.html)中找到了下一个代码：

```
collection.removeAll(Collections.singleton(element)); 
```

我无法弄清楚这种方法的优点。为什么不删除通常的元素？

```
collection.remove(element); 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T12:24:06.580

前者删除集合中所有出现的元素，后者仅删除第一次出现的元素。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-07T12:24:40.153

会计。到文档：

> 考虑以下习惯用法以从集合 c 中删除指定元素 e 的所有实例

```
collection.removeAll(Collections.singleton(element)); 
```

while`collection.remove(element);`从此集合中删除指定元素的单个实例

因此，要删除所有实例，您必须使用后一种方法的循环构造。而第一个它只是一个线工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T12:26:58.707

从[API](http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html)

> remove(Object o)
> 从此集合中移除指定元素的单个实例（如果存在）

和：

> removeAll(Collection c)
> 删除该集合的所有元素，这些元素也包含在指定集合中

因此，如果您的集合中多次出现您要删除的元素，则必须执行 collection.remove(element) 多次，但 removeAll 只执行一次。由于 removeAll 将集合作为参数，Collection.singleton 可以为您提供一种方便的方法来创建只有一个参数的集合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T12:27:31.847

测试时（单元测试）。`Collections.singleton`是一种将您的主题变成集合的单行方式。另一种方法是两条线，并不繁琐。

# ruby-on-rails - 如何使用 Adhearsion 从 Rails 应用程序拨打电话？

> ID：14750973
> 
> 赞同：2
> 
> 时间：2013-02-07T12:20:01.517
> 
> 标签：ruby-on-rails, voip, worker, adhearsion

我正在使用 Ruby on Rails 和 Adhearsion。我已经按照 Adhearsion 网站上提供的文档中的说明创建了这两个应用程序。我有工作人员在后台运行，我想从中拨打电话，我应该如何实现？

我在用 ：

`Adhearsion::OutboundCall.originate 'SIP/channel_name/0018008001300', from: "<sip:1111@xxx.xxx.xxx.xxx>"`

在`ahn`控制台中运行良好，我应该如何在我的工作人员中使用它？

我搜索并找到了旧版本 Adhearsion 的结果和解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T07:07:30.990

DRb 完成了这项工作，在[github](https://github.com/adhearsion/adhearsion-drb)`adhearsion-drb`上的 Adhearsion 应用程序中使用 gem 。

# outlook - 如何从单一事件中掌握 Outlook 约会系列

> ID：14750975
> 
> 赞同：2
> 
> 时间：2013-02-07T12:20:18.920
> 
> 标签：outlook, vsto, outlook-object-model

打开约会实例时，我需要获取会议系列的主约会。

我已经尝试了以下（currentAppointment 变量是 AppointmentItem 类型）

```
DateTime sd = currentAppointment.GetRecurrencePattern().PatternStartDate;
DateTime st = currentAppointment.GetRecurrencePattern().StartTime;

AppointmentItem ai = currentAppointment.GetRecurrencePattern().GetOccurrence(sd+st.TimeOfDay); 
```

然而，虽然这让我获得了该系列中的第一个约会，但它的 RecurrenceState 为 olApptOccurrence。

如何获得对 olApptMaster 的参考 - 即会议系列？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T13:41:24.553

AppointmentItem.Parent 将返回重复实例和异常的父 AppointmentItem。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-07T12:29:02.463

我有一种方法可以创建具有重复性的约会项目，但这与修改一个几乎相同，请告诉我这是否对您有帮助以及您是否需要更多信息。

这是C#中的代码

```
private void CreateNewRecurringAppointment(Outlook._Application OutlookApp) 
{ 
    Outlook.AppointmentItem appItem = null; 
    Outlook.RecurrencePattern pattern = null; 
    try 
    { 
        appItem = OutlookApp.CreateItem(Outlook.OlItemType.olAppointmentItem) 
           as Outlook.AppointmentItem; 
        // create a recurrence 
        pattern = appItem.GetRecurrencePattern(); 
        pattern.RecurrenceType = Outlook.OlRecurrenceType.olRecursWeekly; 
        pattern.StartTime = DateTime.Parse("9:00:00 AM"); 
        pattern.EndTime = DateTime.Parse("10:00:00 AM"); 
        // we can specify the duration instead of using the EndTime property 
        // pattern.Duration = 60; 
        pattern.PatternStartDate = DateTime.Parse("11/11/2011"); 
        pattern.PatternEndDate = DateTime.Parse("12/25/2011"); 
        appItem.Subject = "Meeting with the Boss"; 
        appItem.Save(); 
        appItem.Display(true); 
    } 
    catch (Exception ex) 
    { 
        System.Windows.Forms.MessageBox.Show(ex.Message); 
    } 
    finally 
    { 
        if (pattern != null) 
           System.Runtime.InteropServices.Marshal.ReleaseComObject(pattern); 
        if (appItem != null) 
           System.Runtime.InteropServices.Marshal.ReleaseComObject(appItem); 
    } 
} 
```

来源： http: [//www.add-in-express.com/creating-addins-blog/2011/11/07/outlook-recurring-appointment/](http://www.add-in-express.com/creating-addins-blog/2011/11/07/outlook-recurring-appointment/)

# jquery - 同位素不适用于 ajax 加载的内容

> ID：14750976
> 
> 赞同：7
> 
> 时间：2013-02-07T12:20:18.957
> 
> 标签：jquery, jquery-isotope

我有一个包含 4 个选项的选择框，选择每个选项将导致删除所有当前的`.item`div 并加载新的`.items`，然后使用同位素重新对齐它们。

```
$('.menu-select').change(function(){
    var selected=$('.menu-select-option:selected').html().toLowerCase();
        if(selected=='all')
            {
                loadContent('mixed_home_all.html');
            }
        if(selected=='recommended')
            {
                loadContent('mixed_home_reco.html');
            }
        if(selected=='popular')
            {
                loadContent('mixed_home_pop.html');
            }
}); 
```

loadContent 函数如下所示：

```
 function loadContent(filename){
        var $item=$('.item');
        $container.isotope('remove', $item);
        $container.load(filename, function(){
            $container.imagesLoaded(function(){
                $container.isotope('reLayout');
            });
        });
    } 
```

由于某种原因，`reLayout`无法正常工作。该类`isotope-item`也没有添加到单个项目中。控制台日志中没有错误。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-10T12:15:16.957

我通过破坏以前的同位素并为选择框中的每个值触发一个新的同位素来解决这个问题。我的`loadContent`功能现在看起来像这样：

```
 function loadContent(filename){
        var $item=$('.item');
        $container.isotope('destroy'); //destroying isotope
        $container.load(filename, function(){
            $container.imagesLoaded(function(){
                $container.isotope({ //triggering isotope
                    itemSelector: '.item'
                });
            });
        });
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-05T08:13:00.310

如果您使用带有 Axios 的 Vue JS 将数据加载到同位素中，那么这里的问题是在构建 DOM 时数据不可用，这就是为什么在没有任何数据的情况下渲染同位素的原因。经过一番尝试，我找到了解决方法。

1.  确保在 jquery 之后加载 jquery-isotope，否则会抛出“$ 未定义”。
2.  确保仅在 ajax 调用成功后才调用 $('element').isotope({...})。

在下面的屏幕截图中，如果您检查 ajax 调用成功后正在加载的 custom.js，其中包含调用 $('element').isotope({...}) 的 initIsotope 方法。只有这一次数据在渲染同位素时可用，所以它工作正常！

无论如何，我希望这个答案对您有所帮助。

[![初始化产品（）](../Images/22c1b4483122449dbedacb7a57f9e95d.png)](https://i.stack.imgur.com/ZTGuc.png)

[![初始化同位素（）](../Images/0ede85b81e991d2ad5ff6e1f4366b910.png)](https://i.stack.imgur.com/xs3Vv.png)

# css - Selenium IDE - 如何检查元素是否（CSS）可见？

> ID：14750978
> 
> 赞同：7
> 
> 时间：2013-02-07T12:20:23.497
> 
> 标签：css, selenium, selenium-ide

示例 1：检查 Twitter Bootstrap 模式是否已打开。

模态框已经存在于页面上，但在打开模态框之前被 CSS 隐藏。那么如何验证模态是否实际打开？

示例 2：检查是否显示了用户错误消息 div。

错误消息 div 始终存在，但在需要时被 CSS 隐藏。如何验证消息是否可见？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T20:25:14.177

您可以尝试使用 verifyVisible 命令。这会查看 css 以查看是否设置了可见性或显示。如果其中任何一个可见，它将返回 true，否则返回 false。您将需要传递一个定位器。使用由 css 控制的模态元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T04:53:11.047

答案1：

您可以通过检查模态中的 Web 元素的`Presence`或来检查模态状态。`Visibility`

答案 2：

您可以检查`Visibility`错误消息的参数。

**要检查元素存在：**

```
if(driver.findElements(By.xpath("value")).size() != 0){
System.out.println("Element is Present");
}else{
System.out.println("Element is Absent");
} 
```

或者

```
if(driver.findElement(By.xpath("value"))!= null){
 System.out.println("Element is Present");
}else{
System.out.println("Element is Absent");
} 
```

**要检查可见：**

```
if( driver.findElement(By.cssSelector("a > font")).isDisplayed()){
System.out.println("Element is Visible");
}else{
System.out.println("Element is InVisible");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T13:22:33.060

下面可能对你有用。

只需将您的元素传递给此方法，如果该元素在 dom 中可见，它将返回 true，否则将返回 false。

```
isElementPresent(WebDriver driver,By by)  
 {  
    driver.manage().timeouts().implicitlyWait(0, TimeUnit.SECONDS);  
    try  
    {  
       driver.findElement(by);  
       return true;  
    }  
    catch(Exception e)  
    {  
       return false;  
    }  
    finally  
    {  
       driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);  
     }  
 } 
```

有关更多信息，请参阅[此](http://santoshsarmajv.blogspot.in/2012/07/iselementpresent.html)博客文章

# web-services - MessageSecurityException：EncryptedKey 子句未使用所需的加密令牌“System.IdentityModel.Tokens.X509SecurityToken”包装

> ID：14750983
> 
> 赞同：0
> 
> 时间：2013-02-07T12:20:37.087
> 
> 标签：web-services, wcf, certificate, wcf-binding, saml

我创建了一个带有 SAML 实现的 Wcf 服务。我正在使用联邦绑定。当我在同一台机器上同时运行客户端和主机服务时，我可以从我的客户端应用程序轻松访问托管在我的 WCF Web 服务上的服务。我已使用证书进行身份验证（SAML 实施）。

*为了您的信息，我在客户端有自定义模块，它充当身份提供者。主机服务只有一些使用* **wsfederationbinding**公开的功能。

现在的问题是，当我在不同系统上运行 WCF 服务主机和在不同系统上运行客户端应用程序（具有身份提供者的消费者）时，我收到以下错误消息

```
 MessageSecurityException: The EncryptedKey clause was not wrapped with the required encryption token 'System.IdentityModel.Tokens.X509SecurityToken'. 
```

*注意：我觉得客户端和主机服务之间的证书不匹配*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:30:48.733

我已经解决了上述问题，实际上上述错误的根本原因是证书不匹配。我在 SAML 论坛之一上阅读了有关**SAML 证书身份验证**程序的内容，其中说

1.  令牌使用客户端的公共证书加密。
2.  在服务器端（在我的例子中是 Web 服务主机）接收到的令牌是使用证书的私钥解密的。

因此，在我的情况下，客户端的证书与服务器端的证书不同。

**解析度 ：**

只需从服务器端（在我的情况下为 Web 服务主机）导出证书并在客户端导入相同的证书。

*注意：存在2个证书，客户端证书和服务器证书在双方（客户端和服务器端）。所以实际上，当客户端想要（动态）访问主机 Web 服务时，就像下载应用程序一样，我们需要在服务端创建两个证书，并在激活客户端应用程序时将这些证书部署到客户端。这样证书将是同步中。*

# azure - 是否有任何用于访问 Azure 服务总线的用户界面？

> ID：14750988
> 
> 赞同：1
> 
> 时间：2013-02-07T12:20:55.197
> 
> 标签：azure, azureservicebus

我的应用程序使用 Azure 服务总线交换消息，并且大部分时间一切正常。正在生成的奇怪消息未正确处理，并且根据设计，这些消息将进入 DeadLetterQueue。

但是，为了调试这些消息失败的原因，我需要在我的开发机器上查看/接收这些消息，我认为我还需要调整这些消息并将它们放回队列中。

我发现的唯一可以帮助完成这项工作的工具是[Service Bus Explorer](http://code.msdn.microsoft.com/windowsazure/Service-Bus-Explorer-f2abca5a)，这是一个好的开始，但并不能满足我的所有需求。

是否有任何其他好的应用程序可以调试/管理 Azure 服务总线？

### 更新

此后，Service Bus Explorer 有一个重大更新，我没有正确调查过 - 遇到这个问题的任何人都应该先检查一下！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:29:04.660

Visual Studio 2012 具有服务总线管理功能。不确定它是否具有您正在寻找的所有功能，但您可以尝试一下。

![在此处输入图像描述](../Images/497f182e67df828d7cd21a60227d70e9.png)

# ruby-on-rails - 带有缩进的递归打印父母和孩子（haml）

> ID：14750994
> 
> 赞同：0
> 
> 时间：2013-02-07T12:21:19.170
> 
> 标签：ruby-on-rails, recursion

我正在尝试用缩进打印父母和孩子的名字。但我不确定如何在视图中做到这一点。（haml）

我有一个带有自连接的模型：（只是为了给你结构，我还有其他属性等，但我认为它们无关紧要）

```
class Post < ActiveRecord::Base
  has_many :children,  :class_name => "Post"
  belongs_to :parent, :class_name => "Post", :foreign_key => "post_id"
end 
```

所以它有一个层次结构，我想要这样的东西（让我们假设属性'name'）：

```
Post 1
      Post 1.1
      Post 1.2
Post 2
      Post 2.1
              Post 2.2 
```

我是 Ruby-on-rails 的新手。所以请多多包涵。如果我能得到一个非常解释性的答案，我将非常感激。

非常感谢你，J

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T12:24:18.237

你可以使用递归。创建一个调用自身的部分。

```
# app/views/posts/_post.html.haml
= post.title
= post.content
= render partial: 'post', collection: post.children 
```

我假设您有一个帖子控制器，它带有一个文件夹，用于在`app/views/posts`. 您需要在那里创建一个`_post.html.haml`调用自身的部分。该`render`行告诉您为每个帖子的孩子渲染相同的部分。

缩进可以通过css处理。

# python - 从 Python 中的资源加载 txt 文件

> ID：14750997
> 
> 赞同：2
> 
> 时间：2013-02-07T12:21:25.757
> 
> 标签：python, file-io, resources, text-files

我有 .qrc 文件：

```
<RCC>
  <qresource prefix="/files">
    <file alias='icon'>../icons/Delta.jpg</file>
    <file alias='eng'>../Languages/English.txt</file>
  </qresource>
</RCC> 
```

我用 pyrcc4 编译成 Python python_rc.py 文件。在我的代码中，我有：

```
import QtGui, python_rc
...
icon = QtGui.QIcon()
icon.addPixmap(QtGui.QPixmap(':/files/icon'), QtGui.QIcon.Normal, QtGui.QIcon.Off)
self.setWindowIcon(icon)
...
text = codecs.open(':/files/eng', 'r', "utf-8") 
```

...图标加载没有问题，但对于 txt 文件，我得到：

```
IOError: [Errno 22] invalid mode ('rb') or filename: ':/files/eng' 
```

所以我的问题是：我应该如何从 python_rc 加载 eng？是否可以用于文本文件或仅用于图片？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T12:30:24.773

你可以试试这个：

```
fd = QtCore.QFile(":/files/eng")
if fd.open(QtCore.QIODevice.ReadOnly | QtCore.QFile.Text):
    text = QtCore.QTextStream(fd).readAll()
    fd.close() 
```

因为 txt 文件在 Qt 资源文件中所以你不能使用这个：

```
text = codecs.open(':/files/eng', 'r', "utf-8") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-09T09:58:43.953

出于某种原因，此代码有效，并且没有我在 zoumi 的回答中的评论中提到的问题：

```
path = ":/languages/eng"
f = QtCore.QFile(path)
if f.open(QtCore.QIODevice.ReadOnly | QtCore.QFile.Text):
    text = QtCore.QTextStream(f)
while not text.atEnd():
    line = unicode(QtCore.QString(text.readLine()))
    #do something with "line" here
f.close() 
```