# StackOverflow 问答 14927000-14927999

# javascript - 使用 jquery 更改锚文本和图标

> ID：14927002
> 
> 赞同：2
> 
> 时间：2013-02-17T22:47:38.443
> 
> 标签：javascript, jquery, twitter-bootstrap, anchor, toggleclass

我有一个隐藏或显示 div 的锚标记，但我无法更改它的文本和图标。

如何更改文本和图标标签，因为目前它将图标标签解析为常规文本。

锚标记：

```
<a class="collapse-info btn"><i class="icon-arrow-up icon-white"></i> Hide Info</a> 
```

我需要班级从“icon-arrow-up icon-white”到“icon-arrow-down icon-white”，然后在切换期间返回。

Javascript (jquery)

```
$('.collapse-info').toggle(function() {
$('.server-info').slideUp();
$(this).text('Show Info');
}, function () {
$('.server-info').slideDown();
$(this).text('Hide Info');
}); 
```

正在尝试类似 $("#collapse-icon").toggleClass('icon-arrow-down'); 但这不起作用，因为锚文本在初始切换后被覆盖。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T23:10:50.387

试试这个 -[**演示**](http://jsfiddle.net/QCDz9/)

```
$('.collapse-info').toggle(function() {
    //$('.server-info').slideUp();
    $(this).find("i").removeClass("icon-arrow-up").addClass("icon-arrow-down");
    this.childNodes[1].nodeValue = "Show Info";
}, function () {
    //$('.server-info').slideDown();
    $(this).find("i").removeClass("icon-arrow-down").addClass("icon-arrow-up");
    this.childNodes[1].nodeValue = "Hide Info";
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T22:59:27.930

首先，`<i>`标签用于斜体文本而不是图标。
现在回答您的问题，我假设您有某种背景图像分配给您`<i>`想要更改的标签。
为什么不将类分配给`<a>`标签本身，而不是 a 标签内的元素。那么更改 a 标签的 html 不会给您带来问题。
您的 js 将如下所示：

```
$('.collapse-info').toggle(function() {
  $('.server-info').slideUp();
  $(this).text('Show Info');
  $(this).addClass('icon-arrow-down').removeClass('icon-arrow-up');
}, function () {
  $('.server-info').slideDown();
  $(this).text('Hide Info');
  $(this).addClass('icon-arrow-up').removeClass('icon-arrow-down');
}); 
```

# c# - 关于正确使用 TryParse() 的新手询问

> ID：14927003
> 
> 赞同：1
> 
> 时间：2013-02-17T22:47:42.143
> 
> 标签：c#

我刚刚尝试过`TryParse`，并且是 C# 的新手，只是想了解所有内容，然后希望获得最佳实践......

从语法上讲，这有效：

```
double number = Double.Parse(C.ReadLine()); 
```

如果解析成功，TryParse 是否仅返回布尔值 true？

当我这样做时：

```
double number;
bool b = Double.TryParse(C.ReadLine(), out number); 
```

`number`是解析后的输入，来自`C.ReadLine()`，正如预期的那样，一切正常。这就是 TryParse 通常的使用方式吗？努力提高效率，感谢这样的[建议](http://www.c-sharpcorner.com/Blogs/228/)。

欢迎任何有关方法的建议，以及有关 Try(things) 的在线资源的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T22:52:03.537

你`TryParse`在它可能失败时使用，并且你不希望你的代码抛出异常。

例如

```
if (!Double.TryParse(someinput, out number))
{
    Console.WriteLine("Please input a valid number");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T22:51:22.657

`Parse`如果成功则返回双精度值，否则抛出异常。TryParse 将返回一个表示操作成功的布尔值，如果成功，它将在`out`您传递给它的参数中填充解析值。它永远不会抛出异常。

通常，`TryParse`当您期望输入字符串不是有效数字并且您有处理它的逻辑（例如并显示错误消息）时，您应该使用。

如果您不希望输入字符串是有效的 double 之外的任何内容，则应使用`Parse`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T22:56:20.177

唯一的区别是，如果 TryParse 无法解析双精度，则不会抛出异常。

当您要分配默认值或忽略代码中的值时，这很方便

例子：

```
double number;
if (Double.TryParse(C.ReadLine(), out number))
{
    // this is a double so all good
}
else
{
  // not a valid double.
} 
```

例子：

```
double number;
progressBar.Value = Double.TryParse(C.ReadLine(), out number) ? number : 4.0;
// If number is a valid double, set progressbar, esle set default value of 4.0 
```

你也问过一个男孩`TyrParse`，`Enum`可以这样做

```
DayOfWeek fav;
if (Enum.TryParse<DayOfWeek>(Console.ReadLine(), out fav))
{
    // parsed
} 
```

# r - 添加拟合二次曲线

> ID：14927004
> 
> 赞同：11
> 
> 时间：2013-02-17T22:47:46.607
> 
> 标签：r, lm

我正在尝试将拟合的二次曲线添加到绘图中。

```
abline(lm(data~factor+I(factor^2))) 
```

显示的回归是线性的而不是二次的，我收到以下消息：

> 消息 d'avis : In abline(lm(data ~ factor + I(factor^2)), col = palette[iteration]) : 使用 des deux Premiers des 3 coefficients de régression

意思是：

> 使用 3 个回归系数中的前 2 个

仅运行该`lm()`功能时，我没有收到任何消息。

这是一个示例数据：

```
factor <- 1:7
data <- c(0.1375000,0.2500000,0.3416667,0.4583333,0.7250000,0.9166667,1.0000000) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-17T22:52:28.070

而不是 using [`abline`](http://stat.ethz.ch/R-manual/R-devel/library/graphics/html/abline.html)， use [`fitted`](http://stat.ethz.ch/R-manual/R-patched/library/stats/html/fitted.values.html)，它为您提供一个与您的预测输入长度相同的向量：

```
fitted(lm(data~factor+I(factor^2)))
#         1         2         3         4         5         6         7 
# 0.1248016 0.2395833 0.3699405 0.5158730 0.6773810 0.8544643 1.0471230 
```

因此，类似：

```
plot(factor, fitted(lm(data~factor+I(factor^2))), type="l") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-18T20:47:08.150

到目前为止，我无法得到答案，因为我使用的数据集的 x 值没有增加（如上面大卫罗宾逊所述）。这是我解决它的方法...

```
require(ISLR)
plot(mpg~horsepower, data=Auto)

# fit the model
glm.fit = glm(mpg~poly(horsepower,2), data=Auto)

# create 100 x-values based on min/max of plotted values
minMax = range(Auto$horsepower)
xVals = seq(minMax[1], minMax[2], len = 100) 

# Use predict based on a dataframe containing 'horsepower'
yVals = predict(glm.fit, newdata = data.frame(horsepower = xVals))

lines(xVals, yVals) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-12T10:09:09.497

感谢所有这些宝贵的答案。小心点：

采用

# 基于包含“马力”的数据框使用预测

```
yVals = predict(glm.fit, newdata = data.frame(horsepower=xVals) 
```

# 基于包含“马力”的数据框使用预测

```
yVals = predict(lm.fit, newdata = data.frame(horsepower=xVals) 
```

`lm.fit`是一个函数

# php - PDO 准备好的语句导致 SIGABRT

> ID：14927013
> 
> 赞同：1
> 
> 时间：2013-02-17T22:48:30.600
> 
> 标签：php, mysql, pdo, malloc

我正在使用 PDO 绑定参数对 MySQL 数据库进行直接更新。更新成功并且在 ->execute(); 之后放置了一个打印语句。工作正常，但是当 php 尝试退出时，我得到一个 malloc 错误，并且 php 进程被其父进程中止。

代码如下：

```
<?php 
$edit_type = 'Edit';
$employeeID = 1;
$surname = 'Green';
$givenname = 'Frodo';
$degree = 'PhD';
$title = 'Some_Title';
$division = 'Some_Division';
$office_phone = 'number';
$email = 'adress@someplace.foo';
$room = 'abc-123';
$PI_ID = 1;
$confirmDeactivate = 'Do Not Deactivate';

    //  Establish a MySQL Connection

try {
    $cvbrdbh_update = new PDO("mysql:host={$_SERVER['MYSQL_SERVER']};dbname={$_SERVER['MYSQL_DB']}",$_SERVER['MYSQL_USER'],$_SERVER['MYSQL_PASSWORD'], array(PDO::ATTR_PERSISTENT => true));
    $cvbrdbh_update->exec("SET CHARACTER SET utf8");
} catch (PDOException $e) {
    print "Error!: " . $e->getMessage() . "\n" ;
    die();
}
$cvbrdbh_update->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
$cvbrdbh_update->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
if ($employeeID && $edit_type == "Edit") { 
    if (empty($surname)) { 
        print "Warning! The Surname field was empty. Please restart the editing process and be sure to fill in a surname.";
     } else { 
        $person_update_stmt = $cvbrdbh_update->prepare("UPDATE employees, med_division, titles, pi_emp SET Surname=:surname, GivenName=:givenname, Degree=:degree, Office_Phone=:office_phone, Email=:email, Room=:room, Division=:division, Title=:title, med_division.PI_ID=:pi_id1, pi_emp.PI_ID=:pi_id2 WHERE employees.EmployeeID = '$employeeID' AND med_division.EmployeeID = '$employeeID' AND titles.EmployeeID = '$employeeID' AND pi_emp.EmployeeID = '$employeeID'");
        $person_update_stmt->bindValue(':surname',$surname,PDO::PARAM_STR);
        $person_update_stmt->bindValue(':givenname',$givenname,PDO::PARAM_STR);
        $person_update_stmt->bindValue(':degree',$degree,PDO::PARAM_STR);
        $person_update_stmt->bindValue(':office_phone',$office_phone,PDO::PARAM_STR);
        $person_update_stmt->bindValue(':email',$email,PDO::PARAM_STR);
        $person_update_stmt->bindValue(':room',$room,PDO::PARAM_STR);
        $person_update_stmt->bindValue(':division',$division,PDO::PARAM_STR);
        $person_update_stmt->bindValue(':title',$title,PDO::PARAM_STR);
        $person_update_stmt->bindValue(':pi_id1',$PI_ID,PDO::PARAM_STR);
        $person_update_stmt->bindValue(':pi_id2',$PI_ID,PDO::PARAM_STR);
        $person_update_stmt->execute();
        print "Finished" .  "\n";
    }
}
?> 
```

由此，我得到一个成功的数据库更新，它打印“完成”，然后是以下错误消息：

> php(12652) malloc: *** 对象 0x116f07438 的错误：未分配被释放的指针 ***在 malloc_error_break 中设置断点以进行调试
> 
> 鱼：作业 1，“php database_write_probe.php”由信号 SIGABRT（中止）终止

鱼是我的壳。我的 PHP 版本是：

> 带有 Suhosin-Patch (cli) 的 PHP 5.3.15（构建时间：2012 年 8 月 24 日 17:45:44） 版权所有 (c) 1997-2012 The PHP Group Zend Engine v2.3.0，版权所有 (c) 1998-2012 Zend Technologies

我的 MySQL 版本是：

> Ver 14.14 Distrib 5.5.27，用于 osx10.6 (i386) 使用 readline 5.1

任何帮助将不胜感激。

编辑：正如进一步的数据点，看来精确的触发是我使用“bindValue”。将它们取出并简单地将适当的变量插入“准备”语句可以防止崩溃。所以我想这是一种可能的解决方案，尽管它存在严重的安全问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:41:47.443

您的 PHP 安装是否可能已过期或某些临时（非发布）版本？这似乎是 v 类似于一个[已知的 bug](https://bugs.php.net/bug.php?id=51870)。看看您是否可以更新或卸载/重新安装 PHP。

# python - 无法将 Field.choices 整数参数传递给 view.py (Django) 中的函数

> ID：14927015
> 
> 赞同：0
> 
> 时间：2013-02-17T22:48:47.737
> 
> 标签：python, html, django, django-templates, django-views

我正在尝试将[Field.choices](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.Field.choices)整数参数传递给 view.py 中的函数。但是，我似乎无法完成这项工作。

具体来说，就我而言，我想使用 Field.choices 整数参数来决定用户希望特定对象切换到哪个状态。目前，我对每种类型的状态变化都有一个视图函数，它们都是相同的。因此，这样做的目标是倾向于更 DRY 的代码。

**示例情况**

这是一些 HTML 代码（可以访问诊断和诊断过滤器对象）：

```
 <a href="{% 
              url reports.views.mark
              diagnostic.id,
              diagnostic_filter.FALSE %}" 
              class="btn"> 
              False Positive 
            </a> 
```

最初，用户点击这种类型的按钮/链接。

我想将整数 diagnostic_filter.FALSE（它是 diagnostic_filter 的三种可能状态之一）传递给一个广义的“标记”函数：

```
def mark(request, diagnostic_id, state):
   #Code to change state... 
```

如图所示，这个“标记”功能应该通过并将诊断过滤器对象（与诊断对象相关）的状态更改为 FALSE。

这是我在 urlconf.py 中相应行的尝试：

```
url(r'^diagnostic/(?P<diagnostic_id>\d+)/(?P<state>\d+)/$', 'mark'), 
```

这是我在 models.py 中的 diagnostic_filter 类的模型：

```
class DiagnosticFilter(models.Model):
FALSE = 1
LOW = 2
HIGH = 3
STATES = (
    (FALSE, 'False Positive'),
    (LOW, 'Low Priority'),
    (HIGH, 'High Priority'),
)
state = models.IntegerField(choices=STATES) 
```

我正在使用以下方法将诊断和诊断过滤器传递给我的模板：

```
return render_to_response(
    'reports/diagnostic.html',
    {diagnostic,
     diagnostic_filter},
    context_instance=RequestContext(request)
) 
```

这是解决这个问题的最好方法吗？我做错什么了吗？似乎当我使用按钮加载页面时，我在**“[FILE URL HERE].mark”的“[FILE URL HERE].mark”行中出现错误，参数“（108383，未定义）”和关键字参数“{}”未找到。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T07:35:57.520

可能是您实际上*无权*访问该`diagnostic_filter`对象，或者它不是 class `DiagnosticFilter`。您收到的错误表明模板将值`diagnostic_filter.FALSE`视为“未定义”，这很奇怪，因为您没有在模型中显示该值，而 Django 的通常行为是将未知属性显示为`None`. 你能展示你是如何传递`diagnostic_filter`给模板的吗？

# c - 使用 C 的字符串分隔符

> ID：14927017
> 
> 赞同：2
> 
> 时间：2013-02-17T22:48:51.480
> 
> 标签：c

我已经开始学习如何使用字符串，但我对整个概念有点困惑。我正在尝试从包含字符串的文件中逐字读取。

这是文件：

```
Row, row, row your boat,
Gently down the stream.
Merrily, merrily, merrily, merrily,
Life is but a dream. 
```

我的方法是使用

```
char hold[25];

//  Statement
while(fscanf(fpRow, "%s", hold) != EOF)
    printf("%s %d\n", hold, strlen(hold)); 
```

所以我的任务是读取每个字符串并排除所有 , 和 . 在文件中。这样做的方法是使用 %[^,.] 而不是 %s 对吗？但是当我尝试这种方法时，我的字符串只想读取文件的第一个单词并且循环永远不会退出。有人可以向我解释我做错了什么吗？另外，如果不问太多 fscanf 和 fgets 之间的意义是什么？谢谢

```
 while(fscanf(fpRow, "%24[^,.\n ]", hold) != EOF)
{
    fscanf(fpRow, "%*c", hold);
    printf("%s %d\n", hold, strlen(hold));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T22:51:56.733

是的，`%[^,. ]`应该可以工作——但请记住，当你这样做时，它会在遇到任何这些字符时停止阅读。然后，您需要从输入缓冲区中读取该字符，然后再尝试读取另一个单词。

另请注意，当您使用`%s`or时`%[...]`，您想要指定缓冲区的长度，或者您最终会得到类似的内容`gets`，其中用户的错误输入可能/将导致缓冲区溢出。

# java - Java：setText() 和线程

> ID：14927022
> 
> 赞同：0
> 
> 时间：2013-02-17T22:48:57.300
> 
> 标签：java, multithreading, swing, jlabel, settext

我是java的初学者，不幸的是我被困在这个问题上。在代码中：

新JFrame.java：

> ```
> public class NewJFrame extends JFrame {
> 
>     public void showText() {
>         SwingUtilities.invokeLater(new Runnable() {
>             public void run() {
>                 jLabel1.setText("in show()"); //it does not work
>                 System.out.println("in show()"); //it works
>             }
>         });
>     }
> 
>     public NewJFrame() {
>         initComponents();
>         jLabel1.setText("start"); //it works
>     }
> 
>     public static void main(String args[]) {
>         Timer timer = new Timer();
>         timer.schedule(new NewClass(), 1000, 2000);
> 
>         SwingUtilities.invokeLater(new Runnable() {
>             public void run() {
>                 new NewJFrame().setVisible(true);
>             }
>         });
>     }
>     private javax.swing.JLabel jLabel1;
> } 
> ```

新类.java：

```
package newpackage;

import java.util.TimerTask;

class NewClass extends TimerTask {

    public void run() {
        System.out.println("in NewClass.run()"); //it works
        new NewJFrame().showText();
    }
} 
```

我有一个问题，即当从计时器线程调用 setText 时没有设置 jLabel1。我尝试使用 invokeLater() 解决问题，但仍然无法正常工作。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T22:54:55.937

您正在创建一个永远不会显示`NewJFrame`的新实例：`NewClass`

```
new NewJFrame().showText(); 
```

您需要将可见实例传递`NewClass`给它才能更新。

但是，最好使用`javax.swing.Timer`而不是`java.util.Timer`与 Swing 组件交互。从[如何使用摆动计时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)：

> 一般来说，我们建议使用 Swing 计时器而不是通用计时器来处理与 GUI 相关的任务，因为 Swing 计时器都共享相同的、预先存在的计时器线程，并且与 GUI 相关的任务会自动在事件调度线程上执行。

另请参阅：[Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T23:03:06.147

`JLabel`永远不会添加到任何容器中。为什么会出现？

作为一般建议，不要扩展框架，只需保留参考，如@Reimeus 所述，使用 Swing `Timer`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T22:52:54.370

`repaint()`设置文本后立即尝试添加。

更改屏幕上某些内容的外观后，您必须始终重新绘制框架。

```
jLabel1.setText("in show()");    //it does not work
repaint();                       //now it works
System.out.println("in show()"); //it works 
```

# javascript - 在 svg-canvas 中定位转换后的 SVG 元素

> ID：14927031
> 
> 赞同：0
> 
> 时间：2013-02-17T22:50:16.587
> 
> 标签：javascript, jquery, svg, jquery-svg, svg-edit

我编写了一个函数，可以调整 SVG 路径或任何形状的大小。但是，当我使用它时，路径确实会调整大小，但不幸的是它也会改变我的 svg-canvas 中的位置。

这是我的功能

```
 function output() 
    {
       var transformw=prompt("Enter your new width");
       var transformh=prompt("Enter your new height");
       var lastw = svg_1.getBoundingClientRect().width;
       var lasth = svg_1.getBoundingClientRect().height;

       newW=transformw/lastw;
       newH=transformh/lasth;
       alert(newH);
       alert(newW);

       svgCanvas.changeSelectedAttribute("transform", 
            "matrix(" + newW + ", 0, 0, " + newH + ", 0, 0)");

       svgCanvas.recalculateAllSelectedDimensions();
    } 
```

我只希望形状在变形后定位在画布的顶角。理想情况下，我希望它们具有与转换之前相同的 x,y 位置，但是如果原始 x,y 位置难以实现，我不介意有一个固定点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T08:04:10.190

我正在回答我自己的问题。

当我们使用 transform 调整 SVG 元素的大小时，元素会相对于我们所做的转换在 x,y 轴上移动。

为了抵消这种影响，我们只需要对具有相同“转换”参数的元素应用负转换，尽管是负转换（它将其移动到与转换相反的方向。

通过这种方式，我们抵消了转换的定位效果，我们只得到了调整大小的效果。

# boost - BOOST 强化指南（预处理器宏）

> ID：14927033
> 
> 赞同：1
> 
> 时间：2013-02-17T22:50:19.950
> 
> 标签：boost, boost-preprocessor

我很难确定应该将哪些预处理器宏与 Boost 一起用于 (1) 调试工具（例如检查的迭代器）和 (2) 与安全相关的项目。

我似乎只能找到[预处理器元编程](http://www.boostpro.com/mplbook/preprocessor.html)（链接自 www.boost.org/libs/preprocessor/）。

更新（2013 年 2 月 18 日）：我找到了[Boost Macro Reference](http://www.boost.org/doc/libs/1_53_0/libs/config/doc/html/boost_config/boost_macro_reference.html)，但它缺少与调试或安全相关的任何内容。

有谁知道用于调试和安全的可用预处理器宏列表或强化指南？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:52:57.497

在任何 boost 库中，我都不知道有任何等价物。他们中的一些人尊重`NDEBUG`并基于此进行优化（并且还有一些断言`NDEBUG`会禁用），因此`NDEBUG`似乎可以预期为发布而不是调试设置（是否将`NDEBUG`未定义的发布计数为“硬化”我不知道）。但当然，没有一个库具有超出给它们任何额外装甲或可调试性的选项。

boost 库应如何与 Microsoft 交互，`_HAS_ITERATOR_DEBUGGING`尤其`_SECURE_SCL`是反复出现的辩论，请参见[此处](http://boost.2283326.n4.nabble.com/boost-build-should-we-not-define-SECURE-SCL-0-by-default-for-all-msvc-toolsets-td2654710.html)、[此处](http://article.gmane.org/gmane.comp.lib.boost.build/17824/match=high+cost)和[此处](http://lists.boost.org/boost-build/2008/09/20072.php)（对于“仅标头”库，它没有太大区别；确保提供的 DLL 与集成商期望什么，并且对于是否应该使用这些选项的 MS 默认值没有普遍的协议，因为许多人对性能开销持怀疑态度）。

# haskell - 为什么 attoparsec 使用的内存是我的输入文件的 100 倍？

> ID：14927038
> 
> 赞同：4
> 
> 时间：2013-02-17T22:50:51.750
> 
> 标签：haskell, attoparsec

我有一个 2.5 MB 的文件，其中包含由空格分隔的浮点数（下面的代码可以为您生成它），并希望将其解析为带有`attoparsec`.

它出奇的慢，花了将近一秒钟，并分配了大量内存：

```
time ./Attoparsec-problem +RTS -sstderr < floats.txt
299999.0
   956,647,344 bytes allocated in the heap
   752,875,520 bytes copied during GC
   166,485,416 bytes maximum residency (7 sample(s))
     8,874,168 bytes maximum slop
           337 MB total memory in use (0 MB lost due to fragmentation)

                                  Tot time (elapsed)  Avg pause  Max pause
Gen  0      1604 colls,     0 par    0.21s    0.27s     0.0002s    0.0092s
Gen  1         7 colls,     0 par    0.24s    0.36s     0.0520s    0.1783s

...

%GC     time      65.5%  (75.1% elapsed)

Alloc rate    3,985,781,488 bytes per MUT second

Productivity  34.5% of total user, 28.6% of total elapsed 
```

我的解析器非常简单：本质上是`double <* skipSpace`.

这是代码：

```
import           Control.Applicative
import           Data.Attoparsec.ByteString.Char8 as A
import qualified Data.ByteString as BS
import qualified Data.Vector.Unboxed as U

-- Compile with:
-- ghc --make -O2 -prof -auto-all -caf-all -rtsopts -fforce-recomp Attoparsec-problem.hs

-- Run:
-- time ./Attoparsec-problem +RTS -sstderr < floats.txt

main :: IO ()
main = do

  -- For creating the test file (2.5 MB)
  -- writeFile "floats.txt" (Prelude.unwords $ Prelude.map show [1.0,2.0..300000.0])

  r <- parse parser <$> BS.getContents
  case r of
    Done _ arr -> print $ U.last arr
    x          -> print x

  where
    parser = do
      U.replicateM (300000-1) (double <* skipSpace)

-- This gives surprisingly bad productivity (70% GC time) and 180 MB max residency
-- for a 2.5 MB file! 
```

你能解释一下发生了什么吗？

# scala - Play2 Scala 中的 Web 服务调用

> ID：14927039
> 
> 赞同：1
> 
> 时间：2013-02-17T22:50:54.963
> 
> 标签：scala, playframework, playframework-2.0, akka, playframework-2.1

我想做一些看似简单的事情：调用 Web 服务并将结果保存在数据库中。

我在 Akka Actor 代码中，我所做的是调用对象方法：

```
object Service {
  def run {
    val response = WS.url("http://api.server.com/rest/")
    .withAuth("test", "test", com.ning.http.client.Realm.AuthScheme.BASIC)
    .get.value.get.get.body
  }
} 
```

我如何解析身体？我试图在控制台上打印它，但我得到了 NotSuchElement 异常。

有什么想法，想过吗？如何解析 XML 的数组、属性、元素？

我在play版本2.1.0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T00:20:46.680

与上一个版本相比，情况发生了一些变化。Play 2.1.0 依赖`scala.concurrent`包而不是自己的类：

*   Play`Promise`现在是 Scala`Future`
*   Play`Redeemable`现在是 Scala`Promise`

我没有时间测试它，但从我收集的文档来看，它应该是这样的：

```
import play.api.libs.ws.WS
import play.api.libs.concurrent.Execution.Implicits._
import scala.concurrent.Await
import scala.concurrent.duration._
import scala.language.postfixOps

object WebserviceCallParseXML {

  val responseFuture = WS.url("http://api.server.com/rest/")
    .withAuth("test", "test", com.ning.http.client.Realm.AuthScheme.BASIC)
    .get()

  val resultFuture = responseFuture map { response =>
    response.status match {
      case 200 => Some(response.xml)
      case _ => None
    }
  }

  val result = Await.result(resultFuture, 5 seconds)

  println(if (result.isDefined) result.get else "No result found" )

} 
```

关于的文档`Future.value`：

> 如果未来未完成，则返回值为 None。如果 future 完成，如果它包含有效结果，则值为 Some(Success(t))，如果它包含异常，则值为 Some(Failure(error))。

# android - 由于 InstallException，Android 弹出窗口未显示

> ID：14927041
> 
> 赞同：0
> 
> 时间：2013-02-17T22:51:10.887
> 
> 标签：android, popup

我的问题是以下一个：我有这个Java代码......

```
 Button boton = (Button) this.findViewById(R.id.button1);
    boton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            AlertDialog.Builder builderDlg = new AlertDialog.Builder(MainActivity.this);
              builderDlg.setTitle("Exit");
              builderDlg.setMessage("¿Usted quiere retirarse?");
              builderDlg.setCancelable(false);
              builderDlg.setPositiveButton("Si",new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    MainActivity.this.finish();

                }
            });

              builderDlg.setNegativeButton("No",new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    dialog.cancel();

                }
            });
        }
    }); 
```

当我启动 Android Emulator 时，弹出窗口不显示，日志中出现以下行...

```
[2013-02-17 19:35:33 - DialogPopUp] Failed to install DialogPopUp.apk on device 'emulator-5554': device not found
[2013-02-17 19:35:33 - DialogPopUp] com.android.ddmlib.InstallException: device not found
[2013-02-17 19:35:33 - DialogPopUp] Launch canceled! 
```

很遗憾，因为我想检查这个愚蠢的东西，但我有点卡住了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T23:05:50.650

您的模拟器没有运行，或者您与 ADB 的连接已断开或已过时。要解决这个问题：

1.  关闭 Eclipse 和所有正在运行的模拟器
2.  重启你的电脑
3.  启动 Eclipse 并启动您的模拟器
4.  立即尝试运行您的应用程序。

如果它仍然不起作用，请检查您的运行和调试配置以确保它们指向正确的模拟器。

# html - 保持扩展内容不会将页脚向下推

> ID：14927045
> 
> 赞同：0
> 
> 时间：2013-02-17T22:51:35.270
> 
> 标签：html, css

在以下页面上：[http ://www.mkleinwebdesign.com/optimarestore/faq/](http://www.mkleinwebdesign.com/optimarestore/faq/)

当多个问题被切换打开/展开时，它会将页脚向下推。有没有办法修复它，使白色内容部分在顶部展开并且不会将页脚内容向下推？

HTML

```
div class="content left" style-"margin-right: 30px; min-height: 500px"> 
```

CSS

```
 .content {
    background: white;
    padding: 35px;
    margin-top: 30px;
    color: #767676;
    line-height: 22px;
    }

.left {
    float: left;
    width: 57%;
} 
```

先感谢您！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T00:35:24.730

确保正确清除浮动以防止内容从容器中逸出。具有类**内容**和**左侧**的 div 向左浮动，但在页脚之前不清除浮动。这允许“转义”容器 div 的内容将页脚内容向下推。

问题，直观地解释：[http ://css-tricks.com/the-how-and-why-of-clearing-floats/](http://css-tricks.com/the-how-and-why-of-clearing-floats/)

我注意到您已经有了 CSS，可以使用带有类**clearfix**的 div 来清除浮动。

`<div class="clearfix"></div>`

只需在页脚 div 之前添加它，它就会解决这个问题。

还有其他清除浮点数的方法——有些甚至可以让您避免添加诸如空 div 之类的非语义 HTML 标记，但看起来这就是本网站已经在使用的方法，所以我建议坚持使用已经到位。

# node.js - NodeJS 管理员后台认证策略

> ID：14927049
> 
> 赞同：1
> 
> 时间：2013-02-17T22:51:48.380
> 
> 标签：node.js, express

我为一个客户建立了一个简单的电子商务网站，`NodeJS/Express3/MongoDB`我对为网站后端实施什么样的身份验证策略有些疑问。

我对此知之甚少，`authentication/authorization`而且我有点迷茫，所以如果你能帮我清除一下迷雾，我将不胜感激。

只有一个人，所有者将访问它。我过去实现了**HTTP 简单身份验证**，但据我所知，凭据是以纯文本形式发送的。我需要实现 HTTPS，但我试图避免这种情况。

我虽然`OAuth2`差不多，但单次登录似乎有点过头了。

也许文摘适合我的需要。只要我知道，它就不会以纯文本形式发送凭据。

我还发现这个库看起来非常好：

```
http://passportjs.org/ 
```

对于这种情况，您有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:25:48.617

我认为带有本地策略的护照就足够了。
使用[HTTPS](http://nodejs.org/api/https.html)总是好的，在 Node.js 中并不难。

如果您想深入了解，请 阅读[Web 应用程序黑客手册。](https://rads.stackoverflow.com/amzn/click/com/1118026470)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-22T10:37:59.153

我建议使用带有 HTTPS 的 HTTP Basic 或 Digest 身份验证，您可以使用[http-auth](https://github.com/http-auth/http-auth)模块来做到这一点。

```
// HTTPS module
var https = require('https');

// File system module.
var fs = require('fs');

// Authentication module.
var auth = require('http-auth');
var basic = auth.basic({
    realm: "Simon Area.",
    file: __dirname + "/../data/users.htpasswd" // gevorg:gpass, Sarah:testpass ...
});

// HTTPS server options.
var options = {
    key: fs.readFileSync(__dirname + "/../data/server.key"),
    cert: fs.readFileSync(__dirname + "/../data/server.crt")
};

// Starting server.
https.createServer(basic, options, function (req, res) {
    res.end("Welcome to private area - " + req.user + "!");
}).listen(1337); 
```

# c# - ClickOnce 应用程序用户设置位置

> ID：14927062
> 
> 赞同：2
> 
> 时间：2013-02-17T22:52:58.260
> 
> 标签：c#, clickonce

我目前正在开发一个 ClickOnce 应用程序，它可以转换 CSV 文件以进行数据库更新。该程序要求用户能够更改数据库更改的配置文件，并更改填充应用程序下拉列表的 XML 文件。

现在我知道文件保存在 user/appdata 文件夹中以确保具有正确的权限，但是我对这些文件夹的名称或保存位置有任何影响吗？

默认情况下，文件保存在`AppData\Local\Apps\2.0\LD7ZEJK0.7AE\NJ42PEPW.1QX\csvt...exe_169e1a4011fbe7ec_0001.0000_none_04507fe9e077ae84`

我可以把它改成说`Documents\CSV_Files`或类似的东西吗？如果我这样做了，我将如何在配置文件中引用 XML 文件，以便程序知道它在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T23:47:54.900

Normally, you shouldn't have to care about the location yourself. Just mark your XML file as data in the ClickOnce manifest and access it using the well-known:

```
ApplicationDeployment.CurrentDeployment.DataDirectory 
```

Here's an MSDN article describing it: [Accessing Local and Remote Data in ClickOnce Applications](http://msdn.microsoft.com/en-us/library/d8saf4wy.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:06:37.123

我永远不会在实际 ClickOnce 部署目录中存储更新时保留的任何重要数据——这太危险了。您应该将这些文件复制到 ApplicationData 并在那里访问它们。[本文](http://robindotnet.wordpress.com/2009/08/19/where-do-i-put-my-data-to-keep-it-safe-from-clickonce-updates/)将向您展示如何做到这一点。

# php - Web 开发 - 从 Windows 将文件保存/上传到 Linux 服务器

> ID：14927063
> 
> 赞同：0
> 
> 时间：2013-02-17T22:53:03.530
> 
> 标签：php, linux, project-management, text-editor, web-deployment

我将在 PHP 中开发一个新项目。这些脚本需要在 Linux 上进行测试，我将在 Windows 上进行编码。该脚本无法在 Windows 上测试，因为我将在 Linux 上运行 Asterisk 服务器。我将编写的脚本将与 Asterisk 服务器通信。它将在 Linux 上上传文件特定目录以进行测试。我将处理三个目录：

*   `/var/www/`
*   `/var/www/admin`
*   `/user/local/bin/`- 守护程序（进程）脚本将用 PHP 编写。

我必须通过 FTP 客户端继续将文件上传到特定目录，这会很烦人。那么，在 Windows 上进行即时编码时，有什么替代好的解决方案可以轻松地将文件上传到 Linux 服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-22T11:00:40.097

我知道这是一个旧帖子，但以防万一其他人遇到它....使用[Netbeans](https://netbeans.org)之类的东西，这样当您保存代码时，您的文件将自动保存到服务器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T22:56:26.027

研究在 Linux 机器上设置 SMB 共享，您可以将其映射为 Windows 机器上的网络驱动器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T22:56:39.787

您可以安装`samba`服务器并将相关目录作为驱动器安装在 Windows 客户端上。

作为替代方案，您可以使用 IDE 的部署功能

*   [Eclipse PDT](http://projects.eclipse.org/projects/tools.pdt)
    另请参阅此答案[How do I add FTP support to Eclipse?](https://stackoverflow.com/a/6944100/1741542)
*   [网豆](http://netbeans.org/kb/docs/php/remote-hosting-and-ftp-account.html)

# jquery - 从 DOM 数据元素动态构建 select 语句

> ID：14927064
> 
> 赞同：11
> 
> 时间：2013-02-17T22:53:07.137
> 
> 标签：jquery, jquery-mobile

我需要根据提供 ajax 查询的表单数据动态构建选择下拉列表。我的 DOM 包含一个带有 4 个孩子的元素“组织”。具有组织 ID 和组织名称的孩子

```
Organizations = {
    { id="2", name="Systems"}
    { id="4", name="Network"}
    { id="5", name="Operations"}
    { id= "7", name="Security"}
} 
```

我需要构建以下选择子句

```
<select name='organization'>
    <option value="2">Systems</option>
    <option value="4">Network</option>
    <option value="5">Operations</option>
</select> 
```

如何动态构建 select 语句？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T23:01:26.490

```
Organizations = {
     { id="2", name="Systems"}
     { id="4", name="Network"}
     { id="5", name="Operations"}
     { id= "7", name="Security"}
} 
```

鉴于上述对象：

```
var $el = $('<select></select>');  //create a new DOM Element with jQuery syntax
for (i in Organizations) { //iterate through the object and append options
  $el.append('<option value="' + Organizations[i]['id'] + '">' + Organizations[i]['name'] + '</option>');
} 
```

然后将创建的元素附加到某处......

```
$('body').append($el);  //should work 
```

# binary - 二进制数有什么解决办法？

> ID：14927067
> 
> 赞同：0
> 
> 时间：2013-02-17T22:53:46.140
> 
> 标签：binary, binary-data, equation

有谁知道我该如何解决这个问题？任何帮助都会很棒......我似乎无法理解它。

如您所知，二进制数字只能是 1 或 0。

假设您有一个 8 位二进制数，例如字节 >>>>>> 0001 1000。

我试图找出一个方程式，用于计算您可以从 8 位二进制数中获得的组合数。

例如，如果您有一个两位二进制数，那么您可能拥有的二进制组合是：

00

01

10

11

因此，2 位二进制数的总组合为 4。

示例 2

如果您有一个 3 位数字，则组合将是：

000

001

010

100

101

111

110

011

因此，3位数字的二进制组合数为8。

示例 3

如果它是一个 4 位数字，那么您可以拥有的最大二进制组合是

0000

0001

0010

0100

1000

0111

0110

1111

1110

1101

1011

1001 总最大组合 = 12

**简而言之，我猜我要问的是....如果我有任何数字 6,7,15,8 或任何数字...我怎么能计算出最大二进制组合的总数**是否有一个等式...我想不通..我已经尝试了好几天了；（

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T22:56:32.843

以 b 为底的 d 位数字组成的数是

```
b^d 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T22:58:55.137

n - 位数
b - 底数
^ - 幂

b^n

所以你的基数是2（二进制），你想检查8位数字的组合

2^8 = 256

# ajax - 我可以让我的 ajax 网站“可抓取”吗？

> ID：14927069
> 
> 赞同：1
> 
> 时间：2013-02-17T22:53:55.993
> 
> 标签：ajax, seo, search-engine, google-search, googlebot

我目前正在构建一个基于音乐的网站，我想构建类似[这个模板的东西。](http://radykal.de/themeforest/stylico/)它使用 ajax 和深度链接。（它利用了 History.js 库——请注意 URL 中没有“#”。）

我想使用这些“ajaxy”方法（或者可能完全使用模板）的原因是，当音乐播放时，它在用户浏览网站时不会中断。

我担心我的网站无法被 Google 抓取，但我认为我可以修改页面源代码中的代码来解决这个问题。如果我查看模板的源代码，我会在头部看到

```
<meta name="description" content="">
<meta name="author" content="">
<meta name="keywords" content=""> 
```

现在，如果我将其添加到头部：

```
<meta name="fragment" content="!"> 
```

这会使网站可抓取吗？我还需要在此之上添加其他代码吗？还是这个模板不可能？

我正在按照本指南[https://developers.google.com/webmasters/ajax-crawling/docs/getting-started](https://developers.google.com/webmasters/ajax-crawling/docs/getting-started)进行操作，并且正在进行第 3 步。我当然必须完成其他步骤，但我没有不知道我正朝着正确的方向前进，还是走向死胡同！

任何帮助将不胜感激。提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:02:03.667

从您所说的情况来看，您的网站在您通过 ajax 导航时会使用干净的 url 更新地址栏。那挺好的。接下来要做的是确保这些 url 有效。如果您直接访问一个 url，您是否会看到它所代表的具体内容。并且爬虫是否也会在不运行 javascript 的情况下看到正确的内容。渐进式增强对此非常有效。最后一件事是您要做的是确保机器人可以获取这些网址。我没有玩过元标记！但是看起来它只适用于主页，您仍然需要实现转义片段页面。也许它确实支持其他页面，但本文并未涵盖这一点。

# javascript - 即使在 AngularJS 中使用 ng-cloak，页脚模板也会闪烁

> ID：14927073
> 
> 赞同：10
> 
> 时间：2013-02-17T22:54:21.670
> 
> 标签：javascript, twitter-bootstrap, angularjs

我成功地创建和显示模板，其中使用 AngularJS 从 REST 服务检索到一些数据，但是，当 JSON 响应仍在加载时，浏览器在顶部显示页脚模板，当响应返回 JSON 数据时，页脚转到底部.

这发生得非常快，但页脚模板会在页面顶部闪烁，然后才到底部。

我试过使用 ng-cloak 方法，不幸的是，问题仍然存在。[我按照API 参考](http://docs.angularjs.org/api/ng.directive:ngCloak)的建议将 CSS 放到 ng-cloak 中。

这是我的应用程序代码：

```
<body>
  <div data-ng-controller="HeaderCtrl" data-ng-include="'app/partials/header.html'"></div>
  <div data-ng-controller="MenuCtrl" data-ng-include="'app/partials/lista-menu.html'"></div>
  <div ng-view="main" ></div>
  <footer class="nav" data-ng-include="'app/partials/footer.html'" ></footer> 
```

我尝试将 ng-cloak 放在 body 标记、ng-view、页脚以及 ng-view html 模板中。此代码代表所有尝试（注意：我尝试单独和一起使用，与 ng-cloak 类而不是）

```
<body ng-cloak class="ng-cloak">
  <div data-ng-controller="HeaderCtrl" data-ng-include="'app/partials/header.html'"></div>
  <div data-ng-controller="MenuCtrl" data-ng-include="'app/partials/lista-menu.html'"></div>
  <div ng-view="main" ng-cloak class="ng-cloak"></div>
  <footer class="nav" data-ng-include="'app/partials/footer.html'" ng-cloak class="ng-cloak"></footer> 
```

不幸的是，在所有这些更改之后，页脚模板在加载完成之前仍然在顶部闪烁。

任何人都可以帮我解决这个问题吗？

是否有任何将页脚放在底部的引导技巧，即使主 div 没有高度？我试过使用 nav-fixed-bottom 标记，但是当页面的高度值较高时，我不想将底部固定在屏幕上。

谢谢！！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T03:13:32.803

您是否仔细检查过是否有任何可能与 ng-cloak 规则冲突的 CSS 规则？这可能发生在其他样式、库等中。

如果您有任何冲突的规则，仅添加`display:none;`可能还不够。

请参阅[Angularjs - ng-cloak/ng-show 元素闪烁](https://stackoverflow.com/questions/11249768/angularjs-ng-cloak-ng-show-elements-blink/13276214#13276214)

如果是这种情况，解决方案是使用 !important 来克服这个问题：

```
[ng\:cloak], [ng-cloak], .ng-cloak {
    display: none !important;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T15:44:27.877

ng-cloak 和/或[ng-bind](http://docs.angularjs.org/api/ng.directive%3angBind)无法帮助解决这个问题，因为这不是“未编译内容的闪现”问题。这些指令旨在隐藏内容，直到 Angular 有机会编译 HTML。

您要解决的问题更像是：“我正在向页面动态添加内容并且内容正在移动”。如果您只想在加载主要内容后显示页脚，我喜欢@Alex 在他的评论中提出的解决方案。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-03-24T14:46:03.030

正如 Alex 和 Mark 所说，ng-cloak 在这种情况下没有任何好处。但是，我使用了一些对我有用的东西，也可以帮助其他人。

最初，我不显示页脚。

```
.footer {
  display: none;
} 
```

然后在 Angular 完成加载内容后，会出现页脚。

```
var app = angular.module('app', [...])
.run(function($rootScope) {
    $rootScope.$on('$viewContentLoaded', function(event){
      $('.footer').fadeIn(500);
    });
 }); 
```

# sql - Razor / Webmatrix / SQL：更新 Textarea

> ID：14927075
> 
> 赞同：2
> 
> 时间：2013-02-17T22:54:25.400
> 
> 标签：sql, razor, textarea, webmatrix

我正在尝试实现一个简短的生物表单，每个用户都可以编辑和更新其生物。基于这样一个事实，即如果用户之前填写过表单，之前的文本或什么都没有，将作为初始文本返回到 Textarea 中。

这是我从键盘获取用户名、在 dbase 中搜索一个值并*尝试*在用户提交表单之前将其输出到 textarea 的块。

如果您愿意，可以使用一种个人资料记忆。

```
@{
Validation.RequireField("currentuser");
Validation.Add("bioprint", Validator.StringLength(3000, 0, "Your bio should not exceed 3000 characters"));

var init = "";
var currentuser = Request["currentuser"];
var db = Database.Open("ResearchA");
var cbio = db.QuerySingle("SELECT bios FROM usernamesb WHERE username = @0",currentuser); //get current bio string

if (cbio == null) {init = cbio;}        //check if string is NULL
else {init = "Tell us about you...";}

if(IsPost && Validation.IsValid())  {

    var userbio = @Request["Bio"];

    var insertbio = "UPDATE usernamesb SET bios = @0 WHERE username = @1";
    db.Execute(insertbio, userbio, currentuser);  //Update database with a new entry.

 } 
```

}

这是我在 HTML 块中设置控件的方式：

```
<input type="text" name="currentuser" id="currentuser" value="@Request.Form["currentuser"]"/>

<textarea name="Bio" rows="10" cols="50" placeholder ="@cbio"></textarea> 
```

但是我没有得到已经存在的字符串输出。

非常感谢小伙伴们的关注！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:09:15.890

您的 cbio 变量当前正在加载数据库中的单行。您需要从该行中获取其中一个字段。有两种方法可以将数据库查询更改为：

```
var cbio = db.QueryValue("SELECT bios FROM usernamesb ... 
```

这将只返回字符串。或者让您的数据库查询保持不变，并通过更改 html 部分来更改从行访问字段的方式：

```
<textarea name="Bio" rows="10" cols="50">@cbio.bios</textarea> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T07:47:36.297

如果要在 a 中设置文本，`<textarea>`请将要显示的值放在开始标签和结束标签之间：

```
<textarea name="Bio" rows="10" cols="50">@cbio</textarea> 
```

# java - Java代码没有捕捉到错误？（初学者）

> ID：14927085
> 
> 赞同：0
> 
> 时间：2013-02-17T22:55:47.137
> 
> 标签：java

这就是我所拥有的：

```
public class A1tester {
    static String dna = "GCTTTA";
    static String dna1 = "GCTAAAAAD";

    public static void main(String[] args) {
        validChars(dna);
        validChars(dna1);
    }

    private static boolean validChars(String dna) {
        try {
            for (char c: dna.toCharArray()) {
                assert ((c == 'C') || (c == 'G') || (c == 'T') || (c == 'A'));
            }
        } catch (Exception e) {
            System.out.println("Exception caught!");
            return false;
        }

        System.out.println("DNA has only the permitted letters");
        return true;
    }

} 
```

我错过了什么阻止我的 validChars() 方法将 dna1 识别为包含四个允许的字符以外的字符？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T22:59:54.210

1.  `assert`子句抛出一个[`AssertionError`](http://docs.oracle.com/javase/7/docs/api/java/lang/AssertionError.html)扩展`Throwable`但不是`Exception`。所以你的`catch (Exception e)`被跳过了。但是，不要试图抓住`AssertionError`或`Throwable`代替。

2.  断言必须用 . 显式启用`-ea`。不要依赖它们的存在，否则您的程序将根据您无法控制的 JVM 参数表现出不同的行为。

3.  最后，不要在您期望发生某些事情的地方使用异常（以控制程序流）。

而是试试这个：

```
private static boolean validChars(String dna) {
    for (char c: dna.toCharArray()) {
        if((c != 'C') && (c != 'G') && (c != 'T') && (c != 'A')) {
            return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T23:00:23.330

`assert`throws[`AssertionError`](http://docs.oracle.com/javase/7/docs/api/java/lang/AssertionError.html)不是 的子类[`Exception`](http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html)，而是 的子类[`Error`](http://docs.oracle.com/javase/7/docs/api/java/lang/Error.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T23:00:14.307

断言抛出一个错误，这不是异常！

试试这个：

```
...
catch (Throwable e) 
```

或仅捕获断言失败：

```
catch (AssertionError e) 
```

# jquery - 当焦点位于文本输入或文本区域时，如何禁用 jQuery 键盘导航？

> ID：14927086
> 
> 赞同：0
> 
> 时间：2013-02-17T22:55:50.207
> 
> 标签：jquery, html, keyboard-events

我正在使用以下代码以及 jQuery，以在网站的各个页面之间使用左右箭头键启用键盘导航。但是，我还需要在某些页面上有一个表格。因此，每当访问者使用其中一个表单字段时，我需要禁用键盘导航，然后在不再使用表单字段时重新启用。我可以在这段代码中添加什么来实现这一点？

```
$(function() {
      $(document).keyup(function(e) {
        switch(e.keyCode) {
          case 37 : window.location = $('.prev').attr('href'); break;
          case 39 : window.location = $('.next').attr('href'); break;
        }
      });
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T23:18:48.370

您可以将事件附加到打开和关闭标志以禁用它的字段：

```
$(function() {
    var navEnabled = true;

    $(document).keyup(function(e) {
        if (navEnabled) {
            switch(e.keyCode) {
                case 37 : window.location = $('.prev').attr('href'); break;
                case 39 : window.location = $('.next').attr('href'); break;
            }
        }
    });

    $('.disableNav').bind('focus', function (event) {
        navEnabled = false;
    }).bind('blur', function (event) {
        navEnabled = true;
    });
}); 
```

您也可以考虑使用[:focus](http://api.jquery.com/focus-selector/)选择器，但可能比仅使用事件来跟踪它的性能更差。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T23:12:38.493

如何在输入焦点上取消绑定处理程序并在模糊上再次绑定它：

```
$(function () {
    var arrowNav = function (e) {
        switch (e.keyCode) {
        case 37:
            window.location = $('.prev').attr('href');
            break;
        case 39:
            window.location = $('.next').attr('href');
            break;
        }

    };

    $(document).on('keyup', arrowNav);

    $('#myInput').focus(function () {
        $(document).off('keyup', arrowNav);
    });
    $('#myInput').blur(function () {
        $(document).on('keyup', arrowNav);
    });
}); 
```

这是一个要演示的[jsfiddle](http://jsfiddle.net/VgErG/)（请务必单击“结果”区域以使其关注文档绑定工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-01-21T09:36:04.103

聚会有点晚了，但有类似的问题。
我发现这个相关问题[的答案](https://stackoverflow.com/a/11112169/188082)更直接，更容易维护和更新以满足未来的需求。

**[编辑]**

应 Kongi 的要求申请：

```
$(document).on("keydown", function (e) {
    if (e.which === 8 && !$(e.target).is("input, textarea")) {
        e.preventDefault();
    }
}); 
```

# android - 将变量的值从手机应用程序实时发送到另一部手机

> ID：14927089
> 
> 赞同：1
> 
> 时间：2013-02-17T22:55:55.030
> 
> 标签：android

我对android开发有点陌生，我相信我已经掌握了基础知识，但我想知道在运行相同应用程序的两部手机之间进行通信的最佳方式。我正在寻找接近即时的东西。例如，如果您发送消息或某种变量或字符串，它将出现在其他手机应用程序上，前提是该应用程序在两部手机上都打开。如果我能在这里指出正确的方向，那就太好了，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T22:59:29.923

假设您可以访问两个设备都可以连接的服务器，处理此问题的最佳方法是设置一个套接字并让两个设备都连接到它。这样，消息可以来回发送并立即推送（而不是设备轮询任何新事物间歇性地做）。

您可以在此处了解有关在 android 上使用套接字的更多信息：http: [//developer.android.com/reference/java/net/Socket.html](http://developer.android.com/reference/java/net/Socket.html)

如果您不熟悉如何编写服务器套接字，您可以编写一些与系统类似的东西，该系统只是让每个设备留下消息并让另一个设备来寻找它，但正如我所说，这太多了从那以后，“实时”减少了，您必须让设备不断地纠缠服务器以查看是否有新的事情要做。

还有一些笨拙的方法可以创建一个虚假的套接字行为，即 http 连接永远不会关闭，您只需继续通过管道发送数据，但如果您可以避免它并只使用套接字，您应该这样做。

# django - django add() 只需要 2 个参数（给定 3 个）

> ID：14927096
> 
> 赞同：0
> 
> 时间：2013-02-17T22:56:28.780
> 
> 标签：django

模型.py

```
#!/usr/bin/env python
from django.db import models
from BaseHTTPServer import BaseHTTPRequestHandler, HTTPServer
import os
import json
import sys
import tempfile
import traceback
import re
import psycopg2

SUCCESS               =   1 
ERR_BAD_CREDENTIALS   =  -1  
ERR_USER_EXISTS       =  -2  
ERR_BAD_USERNAME      =  -3  
ERR_BAD_PASSWORD      =  -4

class UsersModel(models.Model):
    user = models.CharField(primary_key=True, max_length=128)
    password = models.CharField(max_length=128)
    count = models.IntegerField()       

    def login(user1, password1):
        try:
            con = psycopg2.connect(database='test', user='jeffrey') 
            cur = con.cursor()
            cur.execute('SELECT user FROM UsersModel WHERE user1=user AND password1=password;')
            rows = cur.fetchall()
            print rows
            if len(rows) == 1:
                #on success update the count and return the count
                cur.execute('UPDATE UsersModel SET count=count+1 WHERE user1=user AND password1=password;')
                cur.execute('SELECT count FROM UsersModel WHERE user1=user AND password1=password;')
                return cur.fetchone()[0]
            else:
                return ERR_BAD_CREDENTIALS

        except psycopg2.DatabaseError, e:
            print 'Error %s' % e    
        sys.exit(1)

    def add(user1, password1):
        try:
            if user1=='' or len(user1)>128:
                return ERR_BAD_USERNAME
            elif len(password1)>128:
                return ERR_BAD_PASSWORD 

            con = psycopg2.connect(database='test', user='jeffrey') 
            cur = con.cursor()
            cur.execute('SELECT user FROM login_UsersModel WHERE user1=user;')
            rows = cur.fetchall()
            if len(row) == 1:
                return ERR_USER_EXIST
            else:
                cur.execute('INSERT INTO login_UsersModel VALUES (user1, password1, 1);')
                cur.execute('SELECT count FROM login_UsersModel WHERE user1=user AND password1=password;')
                return cur.fetchone()[0]

        except psycopg2.DatabaseError, e:
            print 'Error %s' % e    
        sys.exit(1)

def TESTAPI_resetFixture(request):
        con = psycopg2.connect(database='test', user='jeffrey') 
        cur = con.cursor()
        cur.execute('DELETE FROM login_UsersModel')
        return SUCCESS 
```

视图.py

```
from django.shortcuts import render
from django.http import HttpResponse
from login.models import UsersModel
from django.utils import simplejson
import os
from django.views.decorators.csrf import csrf_exempt

@csrf_exempt
def loginx(request):
    data = simplejson.loads(request.body)
    name = data['user']
    pw = data['password']
    x = UsersModel()
    code = x.login(name, pw)
    if code > 0:
        response_data = {'errCode':1, 'count':code}
        return HttpResponse(simplejson.dumps(response_data), content_type="application/json")
    else:
        response_data = {'errCode':code}
        return HttpResponse(simplejson.dumps(response_data), content_type="application/json")

@csrf_exempt
def addx(request):
    data = simplejson.loads(request.body)
    name = data['user']
    pw = data['password']
    x = UsersModel()
    code = x.add(name, pw)
    if code > 0:
        response_data = {'errCode':1, 'count':code}
        return HttpResponse(simplejson.dumps(response_data), content_type="application/json")
    else:
        response_data = {'errCode':code}
        return HttpResponse(simplejson.dumps(response_data), content_type="application/json")

@csrf_exempt
def TESTAPI_resetFixturex(request):
    x = UsersModel()
    code = x.TESTAPI_resetFixture()
    response_data = {'errCode': code}
    return HttpResponse(simplejson.dumps(response_data), content_type="application/json")

@csrf_exempt    
def unitTests(request):
os.system("make func_tests TEST_SERVER=localhost:8000")
return 
```

网址.py

```
from django.conf.urls import patterns, include, url
from django.contrib import admin
from login.views import loginx
from login.views import addx
from login.views import TESTAPI_resetFixturex

admin.autodiscover()

urlpatterns = patterns('',
    # Examples:
    # url(r'^$', 'mysite.views.home', name='home'),
    # url(r'^blog/', include('blog.urls')),

    #url(r'^admin/', include(admin.site.urls)),rs
    url(r'^users/login', loginx),
    url(r'^users/add', addx),
    url(r'^TESTAPI/resetFixture', TESTAPI_resetFixturex)
    #url(r'^TESTAPI/unitTests', unitTests) 
) 
```

我之前在 stackoverflow 上看到过类似的问题，但他们的解决方案无法帮助我并导致我出现其他错误。所以是的，当我只将用户和密码作为我的参数时，我不明白如何添加 3 个参数。有人能帮我吗。顺便说一句，我现在只在视图中测试添加功能：

curl -H "Content-Type: application/json" -H "Accept: application/json" -X POST -d '{"user":"test", "password":"test"}' localhost:8000/users /添加-o test.html

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T22:57:16.917

实例（通常由 引用`self`）被传递给类的每个实例方法。[这个问题](https://stackoverflow.com/a/625098/594589)更多地解释了自我是什么以及代表什么。此外，还有大量高质量的 oop python 教程。

我假设`add`是方法`UsersModel`（如果是，请更正缩进，因为它非常重要）

在这种情况下，您的函数定义应如下所示：

`def add(self, user1, password1):`

另外，我认为做 django 教程会有很大帮助。Django 创建了一个[ORM](https://docs.djangoproject.com/en/dev/topics/db/queries/)，让您无需编写任何 sql 即可与数据库进行交互！:) 它非常易于使用。django 还有一个内置[`User`](https://docs.djangoproject.com/en/dev/topics/auth/default/#user-objects)模型，提供开箱即用的身份验证和用户创建

# python - 在 python 终端中使用 lynx +显示西班牙语字符不起作用

> ID：14927100
> 
> 赞同：0
> 
> 时间：2013-02-17T22:56:42.547
> 
> 标签：python, macos, unicode, lynx

我正在使用 URL 查询 lynx 浏览器并从终端获取输出，但问题是输出来自秘鲁网站，并且西班牙语字符未在终端上正确显示。我将 -assume_charset 和 -assume_unrec_charset 标志与我对 url 的调用一起传递，因此如果网站未指定字符集，它应该将字符集替换为我指定的字符集。对于这两个参数，我尝试了拉丁语 1、拉丁语 3 和拉丁语 4，但它们似乎都不起作用。我想知道如何解决这个问题。我正在使用 python subprocess 模块并将 lynx 查询作为参数传递给 subprocess.Popen(...) ，然后从 STDOUT 读取输出。我的代码如下：

```
 import subprocess
def get_urlData(url):
    cmd = "lynx -dump -nolist -notitle -assume_charset =\"ISO-8859-1\" -assume_unrec_charset=\"ISO-8859-1\" "+url
    lynx = subprocess.Popen(cmd, shell=True, stdout=subprocess.PIPE)
    file_data = lynx.stdout.read()
    #file_data = file_data.decode('ISO-8859-1','replace')
    return file_data 
```

当我将返回的 file_data 存储在一个对象中并尝试在 python 终端上打印它时，以下是我得到的输出的一部分，我将其包括在内以澄清问题：

Per\xedodo: Periodo de Gobierno 2006-2011\. 立法会: Primera\n Legislatura Ordinaria 2010\n N\xfamero: 04903/2010-CR Fecha Presentaci\u0137n: 07/13/2011\n
支持者: Congreso\n
Grupo Parlamentario: Multipartidario\n
T\xedtulo: LEY QUE EXTINGUE LA DEUDA TRIBUTARIA PROVENIENTE DE LA\n IMPORTACI\u0136N Y/O VENTA DE COMBUSTIBLE TURBO A1\n

显然字符 \u0137 需要是其他一些西班牙字符，但我不知道如何让它显示在我的终端上。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T18:39:41.800

\u0136 和 \u0137 是 UTF 字符，你在 cmd 中的字符集是 ISO-8859-1...你必须有相同的字符编码。

# php - 如何将其包含在 Jquery 灯箱或对话框中？

> ID：14927101
> 
> 赞同：0
> 
> 时间：2013-02-17T22:56:45.920
> 
> 标签：php, javascript, jquery, jquery-ui, jquery-plugins

在 Jquery 中这在技术上是否可行。基本上我想在用户单击图像超链接或链接时调用内部的 php 页面或灯箱或 Jquery 对话框弹出

例如，我有这行代码..一旦用户单击此图像链接，应该会出现一个对话框或灯箱，其中包含`profiles.php`页面内容..我如何在 Jquery 中实现它..我太新了到 Jquery .. 但我该怎么做呢？我真的很感激..我需要有关如何将profiles.php信息加载到对话框或灯箱中的指导..这两个选项中的任何一个都适合它。

```
echo "<a href='profiles.php'><img src='boy.jpg'width='100' height='100' class='image' /></a>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T23:10:11.927

你可以使用 jQuery.load(url) 方法阅读更多：[http ://api.jquery.com/load/](http://api.jquery.com/load/)

```
jQuery('a.linkclass').click(function(event){
    event.preventDefault();// prevent link default action
    jQuery('selection of where you need to load content').load('profiles.php');
}); 
```

不确定它是否 100% 没有测试过

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T23:29:00.823

1.  在您的页面上加载[Colorbox](http://www.jacklmoore.com/colorbox)
2.  将类添加`colorbox-html`到超链接
3.  添加`<script>$('a.colorbox-html').colorbox();</script>`到页面底部
4.  点击链接

免责声明：这尚未经过测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T23:33:18.627

试试花式盒！它是一个 jquery 插件！

有关使用说明，请访问：http: [//fancybox.net/howto](http://fancybox.net/howto)

# intellij-idea - 单击 IntelliJ 中的空行

> ID：14927102
> 
> 赞同：4
> 
> 时间：2013-02-17T22:56:49.600
> 
> 标签：intellij-idea

我刚刚从 Eclipse 切换到 IntelliJ，到目前为止我很喜欢它。我遇到的唯一问题是，如果我在空行的中间单击并开始输入，文本实际上会出现在行的中间，而不是正确的缩进。有什么办法可以解决这个问题，这样就可以像 Eclipse 一样工作。无论我在哪里点击一个空行，我都想在我“应该”的地方开始输入。

我正在使用 IntelliJ IDEA 12，如果我没记错的话，我在尝试 11 时没有遇到这个问题（这可能是错误的）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T23:03:05.207

单击文件 -> 设置 -> 编辑器 -> 虚拟空间并取消选中“允许在行尾放置插入符号”。这应该会有所帮助。

# php - 在magento中将数据导入cms/page

> ID：14927105
> 
> 赞同：0
> 
> 时间：2013-02-17T22:57:12.863
> 
> 标签：php, magento, magento-1.7

我正在尝试使用我自己的自定义 php 代码将数据导入 cms/page，当我尝试导入单个静态数据时，代码可以工作，但是当我尝试通过查询数据库来导入数据时，代码不起作用。代码：

```
require_once 'app/Mage.php';
umask(0);

Mage::app('default');

$coreResource = Mage::getSingleton('core/resource') ; 

$read = $coreResource->getConnection('core_read');
    $query = "select *  from `".$coreResource->getTableName('sur_arts')."`,`".$coreResource->getTableName('sur_arts_store')."` where sur_arts.post_id=sur_arts_store.post_id ";

$result=$read->query($query);
foreach($result as $res)
{
$cmsPageData1 = array(
'title' => $res['title'],
'root_template' => 'three_columns',
'meta_keywords' => $res['meta_keywords'],
'meta_description' => $res['meta_description'],
'identifier' => $identifier,
'content_heading' => $res['title'],
'stores' => array(21),
'is_active'=>$res['status'],
'content' => $res['post_content']
 );

 Mage::getModel('cms/page')->setData($cmsPageData1)->save();
} 
```

这不起作用，但如果我尝试使用相同的代码导入单个数据，它可以工作

任何人都可以帮助我，请，任何帮助将不胜感激，在此先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T08:43:08.360

Magento 只允许您从“管理员”后端修改某些数据。

在尝试使用 Magento 对象模型保存到数据库之前，您需要通过添加它来模拟这一点：

```
Mage::app('default');
// Add just below this should be fine.
Mage::app()->setCurrentStore(Mage_Core_Model_App::ADMIN_STORE_ID); 
```

在你的保存周围添加一个 try / catch 块也是一个好习惯，然后对错误做一些事情，记录它们等。

# c# - 如何删除 datagridview 上的选定行并反映到数据库？

> ID：14927107
> 
> 赞同：0
> 
> 时间：2013-02-17T22:57:37.770
> 
> 标签：c#, mysql, datagridview

我正在使用 C# Window 窗体，我创建了一个连接到 mySQL 数据库的窗体，它显示数据库列表、每个数据库上的表列表以及每个表的表内容。

我在这里的问题：

1.  在表中选择一个随机单元格（datagridview）并单击删除按钮后，我希望在数据库中删除该行（对应于所选单元格）。

2.  我还需要刷新和更新 datagridview 表内容（该行已被删除）。（如果我知道如何做第 1 部分，我想我可以做这部分）

所以我需要关于问题 1 的帮助，其中一件我想不通的事情是如何编写 SQL 语句以放入 SQLadapter 或 SQLcommandbuilder 或其他任何内容。我知道 SQL 语句应该是这样的：

从（选定的表）删除哪里（**这是我卡在哪里的部分**）=>我不知道在这种情况下要放什么，如何得到它？

非常感谢任何帮助和建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T23:28:49.033

删除语句应考虑所有选定的表主键列和 datagridview 中的选定行。

如何获取主键列：

```
SELECT `COLUMN_NAME`
 FROM `information_schema`.`COLUMNS`
WHERE (`TABLE_SCHEMA` = 'dbName')
  AND (`TABLE_NAME` = 'tableName')
  AND (`COLUMN_KEY` = 'PRI'); 
```

资料来源：[获取主键列的更好方法](http://mysql-0v34c10ck.blogspot.com.br/2011/05/better-way-to-get-primary-key-columns.html)

您的删除语句应如下所示：

```
DELETE FROM <TABLE> 
  WHERE <PRIMARY_KEY_COLUMN_1> = <ROW_VALUE_1>
    AND <PRIMARY_KEY_COLUMN_2> = <ROW_VALUE_2> 
```

您会看到，该表可能有多个列来唯一标识一行。也有可能在另一个表上存在对该行的引用，这将阻止您删除它。

它看起来像这样：

```
List<string> primaryKeyColumns = GetPrimaryKeyColumns(SelectedDB, SelectedTable);
string deleteWhereClause = string.Empty;
foreach (string column in primaryKeyColumns)
{
    DataGridViewRow row = datagridview.CurrentCell.OwningRow;
    string value = row.Cells[column].Value.ToString();

    if (string.IsNullOrEmpty(deleteWhereClause))
    {
        deleteWhereClause = string.Concat(column, "=", value);
    }
    else 
    {

        deleteWhereClause += string.Concat(" AND ", column, "=", value);
    }
}
string deleteStatement = string.Format("DELETE FROM {0} WHERE {1}", SelectedTable, deleteWhereClause); 
```

该方法`GetPrimaryKeyColumns`使用我发布的选择语句返回所选表的所有主键列的名称。您还必须处理其他类型的列，例如日期和字符串，但这基本上就是您将拥有的。

# python - 是否可以在python中创建一个字母范围？

> ID：14927114
> 
> 赞同：6
> 
> 时间：2013-02-17T22:58:19.787
> 
> 标签：python, python-3.x

有没有办法像这样在python中做一个字母范围：

```
for x in range(a,h,) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-17T23:01:49.033

就像是：

```
[chr(i) for i in range(ord('a'),ord('h'))] 
```

将给出一个字母字符列表进行迭代，然后您可以在循环中使用它

```
for x in [chr(i) for i in range(ord('a'),ord('h'))]:
    print(x) 
```

或者这将做同样的事情：

```
for x in map(chr, range(*map(ord,['a', 'h']))):
    print(x) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-17T23:01:26.950

您可以使用`ord()`将字母转换为字符序数并返回：

```
def char_range(start, end, step=1):
    for char in range(ord(start), ord(end), step):
        yield chr(char) 
```

它似乎工作得很好：

```
>>> ''.join(char_range('a', 'z'))
    'abcdefghijklmnopqrstuvwxy' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-09-21T18:13:57.120

只要一个人只要求一系列单个字符，Emanuele 的解决方案就很棒，我承认这是最初的提问者提出的。还有一些解决方案可以生成所有多字符组合：[如何生成从 aa... 到 zz 的一系列字符串](https://stackoverflow.com/questions/16189505/how-to-generate-a-range-of-strings-from-aa-to-zz)。但是我怀疑想要像范围函数这样的字符的人可能希望能够处理生成从“y”到“af”的任意范围（从“z”翻转到“aa”）。因此，这是一个更通用的解决方案，包括指定范围的最后一个成员或其长度的能力。

```
def strange(start, end_or_len, sequence='ABCDEFGHIJKLMNOPQRSTUVWXYZ'):
    """Create a generator of a range of 'sequential' strings from
    start to end_or_len if end_or_len is a string or containing
    end_or_len entries if end_or_len is an integer.

    >>> list(strange('D', 'F'))
    ['D', 'E', 'F']
    >>> list(strange('Y', 'AB'))
    ['Y', 'Z', 'AA', 'AB']
    >>> list(strange('Y', 4))
    ['Y', 'Z', 'AA', 'AB']
    >>> list(strange('A', 'BAA', sequence='AB'))
    ['A', 'B', 'AA', 'AB', 'BA', 'BB', 'AAA', 'AAB', 'ABA', 'ABB', 'BAA']
    >>> list(strange('A', 11, sequence='AB'))
    ['A', 'B', 'AA', 'AB', 'BA', 'BB', 'AAA', 'AAB', 'ABA', 'ABB', 'BAA']
    """
    seq_len = len(sequence)
    start_int_list = [sequence.find(c) for c in start]
    if isinstance(end_or_len, int):
        inclusive = True
        end_int_list = list(start_int_list)
        i = len(end_int_list) - 1
        end_int_list[i] += end_or_len - 1
        while end_int_list[i] >= seq_len:
            j = end_int_list[i] // seq_len
            end_int_list[i] = end_int_list[i] % seq_len
            if i == 0:
                end_int_list.insert(0, j-1)
            else:
                i -= 1
                end_int_list[i] += j
    else:
        end_int_list = [sequence.find(c) for c in end_or_len]
    while len(start_int_list) < len(end_int_list) or start_int_list <= end_int_list:
        yield ''.join([sequence[i] for i in start_int_list])
        i = len(start_int_list)-1
        start_int_list[i] += 1
        while start_int_list[i] >= seq_len:
            start_int_list[i] = 0
            if i == 0:
                start_int_list.insert(0,0)
            else:
                i -= 1
                start_int_list[i] += 1

if __name__ =='__main__':
    import doctest
    doctest.testmod() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-17T23:20:10.133

```
import string

def letter_range(f,l,al = string.ascii_lowercase):
    for x in al[al.index(f):al.index(l)]:
        yield x

print ' '.join(letter_range('a','h')) 
```

结果

```
a b c d e f g 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-17T23:01:45.327

没有内置的字母范围，但你可以写一个：

```
def letter_range(start, stop):
    for c in xrange(ord(start), ord(stop)):
        yield chr(c)

for x in letter_range('a', 'h'):
    print x, 
```

印刷：

```
a b c d e f g 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-18T01:49:53.213

这至少对我来说更容易阅读/理解（并且您可以轻松自定义包含哪些字母，以及以什么顺序）：

```
letters = 'abcdefghijklmnopqrstuvwxyz'
for each in letters:
    print each

result:
a
b
c
...
z 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-14T17:25:55.533

有时人们可能会过度设计一个简单的解决方案。如果你知道你想要的字母范围，为什么不直接使用：

```
for letter in "ABCDEFGHIJKLMNOPQRSTUVWXYZ":
    print(letter) 
```

甚至：

```
start = 4
end = 9
alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ"
for letter in alphabet[start:end]:
    print(letter) 
```

在第二个示例中，我说明了一种从固定列表中选择所需字母数量的简单方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-17T21:49:58.383

切片一个已经预先安排好的列表怎么样？

```
import string

s = string.ascii_lowercase
print( s[ s.index('b'):s.index('o')+1 ] ) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-17T07:52:15.857

Malcom 的示例效果很好，但是由于 Python 列表比较的工作方式存在一个小问题。如果 'A' 到 "Z" 或某些字符到 "ZZ" 或 "ZZZ" 将导致不正确的迭代。

这里 "AA" < "Z" 或 "AAA" < "ZZ" 将变为假。

在 Python 中，与“<”或“>”运算符相比，[0,0,0] 小于 [1,1]。

所以下线

```
while len(start_int_list) < len(end_int_list) or start_int_list <= end_int_list: 
```

应该改写如下

```
while len(start_int_list) < len(end_int_list) or\
        ( len(start_int_list) == len(end_int_list) and start_int_list <= end_int_list): 
```

在这里很好地解释了 [https://docs.python.org/3/tutorial/datastructures.html#comparing-sequences-and-other-types](https://docs.python.org/3/tutorial/datastructures.html#comparing-sequences-and-other-types)

我重写了下面的代码示例。

```
def strange(start, end_or_len, sequence='ABCDEFGHIJKLMNOPQRSTUVWXYZ'):

    seq_len = len(sequence)
    start_int_list = [sequence.find(c) for c in start]
    if isinstance(end_or_len, int):
        inclusive = True
        end_int_list = list(start_int_list)
        i = len(end_int_list) - 1
        end_int_list[i] += end_or_len - 1
        while end_int_list[i] >= seq_len:
            j = end_int_list[i] // seq_len
            end_int_list[i] = end_int_list[i] % seq_len
            if i == 0:
                end_int_list.insert(0, j-1)
            else:
                i -= 1
                end_int_list[i] += j
    else:
        end_int_list = [sequence.find(c) for c in end_or_len]

    while len(start_int_list) < len(end_int_list) or\
         (len(start_int_list) == len(end_int_list) and start_int_list <= end_int_list):**
        yield ''.join([sequence[i] for i in start_int_list])
        i = len(start_int_list)-1
        start_int_list[i] += 1
        while start_int_list[i] >= seq_len:
            start_int_list[i] = 0
            if i == 0:
                start_int_list.insert(0,0)
            else:
               i -= 1
                start_int_list[i] += 1 
```

无论如何，Malcom 的代码示例很好地说明了 Python 中的迭代器是如何工作的。

# ruby-on-rails - 通过键/值的哈希映射

> ID：14927117
> 
> 赞同：0
> 
> 时间：2013-02-17T22:58:34.017
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我提交了一个保存多条记录的表单，参数如下所示：

```
{
  "utf8"=>"✓",
  "_method"=>"put",
  "products"=> {
    "321" => {
        "sale_price"=>"10"
    },
    "104" => {
        "sale_price"=>"10"
    }
  }
} 
```

然后在我的控制器中，我有这个：

```
@updated_products = Product.update(params[:products].keys, params[:products].values) 
```

这期望键 (321, 104) 是 ID。
但是，我`to_param`在我的模型中使用 将我的 url 从 ID 更改为另一个列值。

有没有办法将`params[:products].keys`它们换成适当的 ID，以便我可以在`.update()`语句中使用 ID。`Product.find_by_column_name(321).id`尽管我不知道该怎么做，但我可以用来获取 id。对 Rails 还是很陌生。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:50:57.797

[查看这里](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-update) 的源代码`#update`会遍历每个键并运行`update_attributes`，因此它会通过所有验证。您可以将方法更改为

```
@updated_products = params[:products].inject([]) do |array, (column_id, attributes)|
  product = Product.find_by_column_id column_id
  if product.update_attributes(attributes)
    array << product
  else
    array
  end
end 
```

这可能看起来有点复杂，但它等于下面这个更容易理解和代码阅读

```
@updated_products = []

params[:products].each do |column_id, attributes|
  product = Product.find_by_column_id column_id
  if product.update_attributes(attributes)
    @updated_products << product
  end
end 
```

# ios - 按下第 4 个按钮时更改 3 个不同的按钮名称 - Objective C

> ID：14927119
> 
> 赞同：-2
> 
> 时间：2013-02-17T22:58:44.233
> 
> 标签：ios, objective-c, uibutton, ibaction

好的，我已经编辑了我的原始帖子。

问题是：我有一个按钮，一旦单击 3 个其他按钮名称就会改变。

```
from sin to sin-1
from cos to cos-1
from tan to tan-1 
```

正如你所知道的，我正在做一个科学计算器。到目前为止，我已经在 .h 中声明了一个 IBAtion，现在我正在 .m 中实现它

**代码已更正。供其他人将来参考。**

控制器.h

```
IBOutlet UIButton *btn1;
IBOutlet UIButton *btn2;
IBOutlet UIButton *btn3; 
```

控制器.m

```
-(IBAction)buttonChangeText:(UIButton *)sender
{
    [btn1 setTitle:@"sin-1" forState:UIControlStateNormal];
    [btn2 setTitle:@"cos-1" forState:UIControlStateNormal];
    [btn3 setTitle:@"tan-1" forState:UIControlStateNormal];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T23:19:31.397

这将帮助您理解，请与发件人一起使用，并使用按钮标签。我会对你有意义。谢谢。

```
- (IBAction)changeTheOtherButton:(id)sender {

    if ([sender tag] == 1) {
        [btn1 setTitle:@"Btn 2" forState:UIControlStateNormal];
    }
    else if ([sender tag] == 2) {
        [btn2 setTitle:@"Btn 1" forState:UIControlStateNormal];
    }

} 
```

享受编码......

# php - 如何将俄语字符保存在 UTF-8 编码文件中

> ID：14927122
> 
> 赞同：1
> 
> 时间：2013-02-17T22:58:47.343
> 
> 标签：php, utf-8, translate

好的，所以我有一个 PHP 文件，其中包含多个不同语言的文本字符串。对于大多数语言，如法语或西班牙语，我只需输入字符即可。

我遇到的问题是俄语字符。PHP 文件以 UTF-8 编码，我如何确保正确保存俄语字符并在输出网页上正确显示...只是将文本粘贴到 PHP 文件中的情况，还是有一种方法可以保证字符将正确保存到文件中 - 例如可能将其转换为类似 HTML 的符号？

显然我假设最终用户将在他们的网络浏览器中设置正确的编码，我只是想确保我从头到尾都涵盖了所有内容。

我在 Windows 上使用 Notepad++ 来编辑我的 PHP 文件。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T23:01:16.373

如果你想告诉浏览器你的编码，把它放在你的`<header>`标签中：

```
<meta http-equiv='Content-Type' content='text/html; charset=utf-8'> 
```

或短版

```
<meta charset='utf-8'> 
```

这应该足以让俄语字符正确显示在网页上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T23:44:49.160

if your doctype is html declare `<meta http-equiv='Content-Type' content='text/html; charset=UTF-8'>` but if your doctype is xhtml then declare `<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />`.

Never assume that end-user will act correctly during your designs

If you already have some document, edit your document's meta tag for charset declaration and use notepad++ encoding>*convert to UTF-8 without BOM*, save your document, safely go on with your multilingual structure from now on.

php tag is irrelevant for your question since you don't mention about any database char setting.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T23:47:54.883

There is no difference between Latin and Cyrillic characters in UTF-8\. Both are just byte sequences. Configure your server or PHP script to send `Content-Type: text/html;charset=utf`, and you are rather safe.

Your editor might have problems when the font you are using does not contain Russian characters. Choose another font then.

And please ignore the `<meta>` element recommendations. You don't need that: it is useless when your HTTP headers are correct, and maybe harmful if they aren’t.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T23:04:53.353

## 那么你必须检查两件事

*   为了确保 *.php 是一个 UTF-8 文件，我使用[PSPad](http://www.pspad.com/en/)。如果文件不是 UTF-8 格式，我会这样保存：[http ://stepolabs.com/upload/utf-8.png](http://stepolabs.com/upload/utf-8.png)
*   `<meta>`那么你的网站标签中必须有 UTF-8 编码；

    > `<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />`

    ...更多关于[元标记](http://www.w3.org/International/questions/qa-html-encoding-declarations#quicklookup)。

最后，如果一切都做得很好 - （格式和元声明）都应该正确显示！

# jquery - C ++模型服务器返回JSON不起作用

> ID：14927129
> 
> 赞同：0
> 
> 时间：2013-02-17T22:59:16.450
> 
> 标签：jquery, ajax, json

我非常想创建一个模型服务器，它（现在）为我提供 JSON 查询的硬编码结果。现在我只是从服务器返回格式正确的 JSON 文本。

但是，在下面的代码中，我从错误函数中得到以下信息：

LoadingPage 状态错误：错误响应文本=未定义错误未定义

我想知道这是因为我的服务器还是客户端的代码有问题。你怎么看？

非常感谢！麦克风

这是代码：

```
$(document).ready( function () {
    LoadingPage();
} );

//-----------------------------------------------------------------------------------------------------------------------------------------------------------

function LoadingPage()
{
    alert("In LoadingPage");

    $.ajax({
            type: "GET",
            url: "localhost",
            success: function(result)
                {                       
                  alert('poopoo');
                },
            error: function(xhr, status, error)
                {
                  alert("Error in LoadingPage status: " + status + "   Response text= "+xhr.responseText + "   Error was " + error.statusText);
                },

            async:true
            });    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T23:22:02.293

请求看起来不错，请确保响应格式正确。根据[http://www.w3.org/Protocols/rfc2616/rfc2616-sec6.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec6.html) ，正确的响应至少如下所示：

```
HTTP/1.0 200 OK\r\n
\r\n
<content goes here> 
```

# macos - Applescript for Outlook - 将邮件标记为已读

> ID：14927132
> 
> 赞同：5
> 
> 时间：2013-02-17T22:59:31.930
> 
> 标签：macos, outlook, applescript

我正在寻找一个 Applescript 以在 Outlook 2011 for Mac 中将邮件标记为已读。

我无法确定要设置的正确属性。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T05:03:27.127

尝试：

```
tell application "Microsoft Outlook"
    set myMessages to selection
    repeat with aMessage in myMessages
        set aMessage's is read to true
    end repeat
end tell 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-17T16:37:40.207

如果您想选择要标记为已读的消息，上述答案很棒。但是使用 Mac 上的 Outlook 将日历邀请放入已删除的“未读”中......此版本将为您运行，并且可以设置为根据需要经常从 cron 执行此操作。

```
tell application "Microsoft Outlook"
    repeat with afolder in deleted items
        set aMsg to (every message of afolder where its is read is not true)
        repeat with aMessage in aMsg
            set aMessage's is read to true
        end repeat
    end repeat
end tell 
```

# python - python if 语句的 DRY 版本

> ID：14927136
> 
> 赞同：1
> 
> 时间：2013-02-17T22:59:41.357
> 
> 标签：python, django

我正在尝试使用大约二十行的表进行数据库插入。插入看起来像这样：

```
if not title.name:
    title.name = data['title']
if not title.synopsis:
    title.synopsis = data['synopsis']
... 
```

基本上，如果每个 db 列不存在行，我将更新这些行。

什么是更清洁、更有效的方法呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T23:03:49.147

```
for column in ('name', 'synopsis', 'something', 'other'):
    if not getattr(title, column):
        setattr(title, column, data[column]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T23:04:44.297

您可以使用`or`：

```
title.name = title.name or data['title']
title.synopsis = title.synopsis or data['synopsis'] 
```

或者，您可以动态执行此操作：

```
for attr in data:
    if not getattr(title, attr):
        setattr(title, attr, data[attr]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T23:04:57.887

用途`getattr`及`setattr`功能：

```
for attribute in ['title', 'synopsis']:
   if not getattr(title, attribute):
       setattr(title, attribute, data[atribute]) 
```

[你可以在这里](http://www.rafekettler.com/magicmethods.html#access)阅读更多关于它们的信息。

# r - R中的移动标准差

> ID：14927137
> 
> 赞同：0
> 
> 时间：2013-02-17T22:59:44.133
> 
> 标签：r

我想计算 R 中时间序列的任何类型的“移动统计”，超出移动平均线。例如，我将如何计算长度为 3 的时间窗口上的移动标准差？

我尝试了以下方法：

```
#example data
x <- c(3,9,2,8,4,6,5,8)
#moving standard deviation over a time window of length 3
msd3 <- (cumsum(x^2)-cumsum(Lag(x^2,3)))/((1:length(x))-(Lag(1:length(x),3)))-((cumsum(x)-cumsum(Lag(x,3)))/((1:length(x))-(Lag(1:length(x),3))))^2 
```

但它不仅不起作用（因为滞后向量的 cumsum 给出了所有 NA 的向量），而且我停止尝试解决最后一个问题，因为它看起来不必要地复杂。这个问题有什么优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T23:26:55.350

我会编写一个单独的函数来处理这个问题，只是为了让它变得简单。例如：

```
lag_apply <- function(x, n, callback){
    k = length(x);
    result = rep(0, k);
    for(i in 1 : (k - n + 1)){
        result[i] <- callback(x[i :  (i + n -1)]);
    }    
    return(result);
}

> x 
   [1] 2 3 4 5 6 2 2 3 3 4 4
> lag_apply(x, 2, function(x){mean(x)})
   [1] 2.5 3.5 4.5 5.5 4.0 2.0 2.5 3.0 3.5 4.0
> lag_apply(x, 2, function(x){sd(x)})
   [1] 0.7071068 0.7071068 0.7071068 0.7071068 2.8284271 0.0000000 0.7071068 0.0000000 0.7071068 [10] 0.0000000 
```

现在，您可以将此函数与您能想到的任何“滞后”回调一起使用。它通过 x 的部分作为长度为 n 的向量。

# python - Tor 与 Python：主动拒绝连接

> ID：14927141
> 
> 赞同：2
> 
> 时间：2013-02-17T23:00:02.990
> 
> 标签：python, tor

我正在尝试使用 Python 与 Tor 交互，但它一直拒绝我的连接。这是我的代码：

```
from TorCtl import TorCtl
conn = TorCtl.connect(controlAddr="127.0.0.1", controlPort=9051, passphrase="123") 
```

我也试过：

```
from TorCtl import TorCtl
conn = TorCtl.connect() 
```

两者都产生以下错误：

```
Failed to establish socket: [Errno 10061] No connection could be made because the target machine actively refused it. 
```

任何想法为什么会发生这种情况/我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-16T04:18:40.643

嗯，首先我看到了那个特定的错误。我的第一个猜测是本地防火墙，尝试运行“telnet localhost 9051”进行故障排除。

附带说明[TorCtl 已被弃用](https://blog.torproject.org/blog/torctl-deprecation-and-stem-plans)，取而代之的是[stem](https://stem.torproject.org/)。

# android - 原因：第二个活动中的 java.lang.NullPointerException onPageChangeListener

> ID：14927143
> 
> 赞同：1
> 
> 时间：2013-02-17T23:00:10.557
> 
> 标签：android, android-activity, nullpointerexception

我有这个问题，在第二个活动中 findviewbyId 不能正常工作，我有这个日志：

```
02-17 23:36:42.321: E/AndroidRuntime(616): FATAL EXCEPTION: main
02-17 23:36:42.321: E/AndroidRuntime(616): java.lang.RuntimeException: Unable to resume activity {it.polito.elite.make_rules/it.polito.elite.make_rules.SlideActivity}: java.lang.NullPointerException
02-17 23:36:42.321: E/AndroidRuntime(616):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2575)
02-17 23:36:42.321: E/AndroidRuntime(616):  at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2603)
02-17 23:36:42.321: E/AndroidRuntime(616):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2089)
02-17 23:36:42.321: E/AndroidRuntime(616):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
02-17 23:36:42.321: E/AndroidRuntime(616):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
02-17 23:36:42.321: E/AndroidRuntime(616):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-17 23:36:42.321: E/AndroidRuntime(616):  at android.os.Looper.loop(Looper.java:137)
02-17 23:36:42.321: E/AndroidRuntime(616):  at android.app.ActivityThread.main(ActivityThread.java:4745)
02-17 23:36:42.321: E/AndroidRuntime(616):  at java.lang.reflect.Method.invokeNative(Native Method)
02-17 23:36:42.321: E/AndroidRuntime(616):  at java.lang.reflect.Method.invoke(Method.java:511)
02-17 23:36:42.321: E/AndroidRuntime(616):  at     com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
02-17 23:36:42.321: E/AndroidRuntime(616):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
02-17 23:36:42.321: E/AndroidRuntime(616):  at dalvik.system.NativeStart.main(Native Method)
02-17 23:36:42.321: E/AndroidRuntime(616): Caused by: java.lang.NullPointerException
02-17 23:36:42.321: E/AndroidRuntime(616):  at it.polito.elite.make_rules.adapter.ViewPagerChangeListener.exisistingRuleManagement(ViewPagerChangeListener.java:134)
02-17 23:36:42.321: E/AndroidRuntime(616):  at it.polito.elite.make_rules.adapter.ViewPagerChangeListener.onPageSelected(ViewPagerChangeListener.java:62)
02-17 23:36:42.321: E/AndroidRuntime(616):  at android.support.v4.view.ViewPager.scrollToItem(ViewPager.java:546)
02-17 23:36:42.321: E/AndroidRuntime(616):  at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:524)
02-17 23:36:42.321: E/AndroidRuntime(616):  at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:495)
02-17 23:36:42.321: E/AndroidRuntime(616):  at android.support.v4.view.ViewPager.setCurrentItem(ViewPager.java:476)
02-17 23:36:42.321: E/AndroidRuntime(616):  at it.polito.elite.make_rules.SlideActivity.onResume(SlideActivity.java:203)
02-17 23:36:42.321: E/AndroidRuntime(616):  at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1184)
02-17 23:36:42.321: E/AndroidRuntime(616):  at android.app.Activity.performResume(Activity.java:5082)
02-17 23:36:42.321: E/AndroidRuntime(616):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2565)
02-17 23:36:42.321: E/AndroidRuntime(616):  ... 12 more
02-17 23:36:42.510: D/dalvikvm(616): GC_CONCURRENT freed 207K, 5% free 6266K/6535K, paused 24ms+35ms, total 239ms 
```

在 ViewPagerChangeListener.java:134 行有

```
LinearLayout fragmentMakeRule =(LinearLayout)fragmentExistingRule.findViewById(R.id.containerLayoutExistingRule); 
```

我主要有：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_swipe); 
```

你有想法吗？

# html - Div 留下很少的空格并且没有填充宽度 100%

> ID：14927147
> 
> 赞同：0
> 
> 时间：2013-02-17T23:00:34.440
> 
> 标签：html, css

我想要一条充满整个屏幕中间的灰色直线。我有点喜欢`<hr>`但我不想用`<hr>`。但是，当我尝试使用它时，我的 div 右侧总是有一些我无法摆脱的空白区域。

这是我的 HTML 代码：

```
<div id = "rule">

</div> 
```

这是我的CSS：

```
@charset "utf-8";
/* CSS Document */
*{
    padding-left:0;
    padding-right:0;
    margin-left:0;
    mergin-right:0;
}

#rule{
    background-color:#fff;

    margin-left:auto;
    margin-right:auto;

    height:40px;
    width:100%; 
    webkit-box-shadow: inset 2px 3px 10px 3px rgba(0, 0, 0, 0.5);

    box-shadow: inset 2px 3px 10px 3px rgba(0, 0, 0, 0.5);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T00:22:41.407

好吧，我通常在所有 CSS 文件的开头所做的就是通过将所有内容设置为 0 来消除所有默认边距、填充和边框。

然后，您可以准确地知道您站在哪里，并可以在以后根据您的需要添加填充、边距和边框。

将所有内容设置为零，如下所示：

```
*{margin: 0;padding: 0px;border:0;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T23:03:14.580

我认为这是因为您的代码中有错字。在`*`选择器中， `mergin-right:0`应该是`margin-right:0`.

```
* {
    padding-left:0;
    padding-right:0;
    margin-left:0;
    margin-right:0;
} 
```

[请参阅此 JS Fiddle 示例](http://jsfiddle.net/bn3CW/)。

# php - 在 PHP 中编写 PHP 路径 +url 扩展 if / include

> ID：14927155
> 
> 赞同：0
> 
> 时间：2013-02-17T23:01:01.400
> 
> 标签：php, html, wordpress

使用 Wordpress 并希望在此代码中使用 PHP 函数

```
<?php if ( is_page(19074) ) { 
include("/home/something/public_html/wp-content/themes/mytheme/folder/page1.html");
} 
elseif ( is_page(18956) ) { 
include("home/something/public_html/wp-content/themes/mytheme/folder/page2.html");
}  
elseif ( is_page(19082) ) { 
include("home/something/public_html/wp-content/themes/mytheme/folder/page3.html");
} 
else {
include("home/something/public_html/wp-content/themes/mytheme/folder/page4.html"); }?> 
```

我不想在其中使用 Wordpress PHP 函数 get_template_directory() 就像我这样做

```
<?php get_template_directory(); ?>/folder/page1.html 
```

一直在尝试一些不同的解决方案，但 PHP 不是我最擅长的领域，所以一点帮助会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T23:06:44.170

```
include(get_template_directory() . "/folder/page1.html"); 
```

或者

最好将它存储在一个变量中，以免导致多次调用函数的开销。

```
$temp_dir = get_template_directory() ;
include($temp_dir . "/folder/page1.html");
include($temp_dir . "/folder/page2.html");
include($temp_dir . "/folder/page3.html");
include($temp_dir . "/folder/page4.html"); 
```

希望能帮助到你。

# git - git依赖地狱？-- 子模块拉取失败

> ID：14927157
> 
> 赞同：0
> 
> 时间：2013-02-17T23:01:21.943
> 
> 标签：git

我在这里做错了什么？

```
$ git submodule foreach git pull # fails
$ cd Submodules/MBProgressHUD/
$ git diff
$ git checkout master
$ git pull
$ cd ..
$ cd ..
$ git submodule foreach git pull # fails
$ cd Submodules/ShareKit/
$ ls
$ git pull master
$ git checkout master
$ git diff
$ git submodule foreach git pull # fails
$ git status
$ git fetch
$ git pull
$ git submodule foreach git pull # fails 
```

显示了最后一个，但基本上它们都看起来像这样：

```
Entering 'Submodules/JSONKit'
You are not currently on a branch. Please specify which
branch you want to merge with. See git-pull(1) for details.

    git pull <remote> <branch>

Stopping at 'Submodules/JSONKit'; script returned non-zero status. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T23:08:43.310

`git submodule init`子模块是使用and命令下载的`git submodule update`，而不是使用 git pull。有关更多信息，请参阅[http://git-scm.com/book/en/Git-Tools-Submodules#Cloning-a-Project-with-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules#Cloning-a-Project-with-Submodules)。

# vb.net - 如何使用 Active Directory 中的用户信息填充 SQL Server 表？

> ID：14927161
> 
> 赞同：0
> 
> 时间：2013-02-17T23:01:28.980
> 
> 标签：vb.net, ssis, active-directory

在 SSIS 包中使用 VB.NET，如何使用多个 Active Directory 域（在同一个林中）中的用户填充 SQL Server 表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T02:35:31.963

我使用了类似于 Siva 方法的查询，除了链接服务器查询，我使用 ADSI 提供程序。[Active Directory SSIS 数据源](http://billfellows.blogspot.com/2011/04/active-directory-ssis-data-source.html)

```
SELECT
    distinguishedName
,   mail
,   samaccountname
,   Name
,   employeeNumber
,   objectSid
,   userAccountControl
,   givenName
,   middleName
,   sn
FROM
    'LDAP://DC=domain,DC=net'
WHERE
    sAMAccountType = 805306368
ORDER BY
    sAMAccountName ASC 
```

引用帖子中的代码将从给定域中提取所有用户。在从 NTEXT 转换为 TEXT 到 String 之后，我使用专有名称和 DirectoryServices 程序集通过其专有名称枚举用户的所有一阶组。它不涉及嵌套组。方便的是，该帖子涵盖了 2005 SSIS 实现，因此逻辑在 VB 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T23:30:47.330

## 链接服务器方法：

### 设置链接服务器以连接到 Active Directory：

*这是在 SQL Server 上使用Linked Server*的一个可能选项，它实际上并不需要`VB.NET`，如果您可以选择的话。下面给出的查询仅用于语法参考。请阅读链接以正确使用这些 SQL Server 对象。

您可以在 SQL Server 上设置链接服务器*以*使用`OLE DB Provider for Microsoft Directory Services`. 下面是一个示例脚本，它将设置链接服务器并将其映射到可以访问 Active Directory 的登录名。

[*sp_addlinkedserver (Transact-SQL) 的*](http://msdn.microsoft.com/en-us/library/ms190479.aspx)使用[](http://msdn.microsoft.com/en-us/library/ms190479.aspx)

 *[*sp_addlinkedsrvlogin (Transact-SQL) 的*](http://msdn.microsoft.com/en-us/library/ms189811.aspx)使用[](http://msdn.microsoft.com/en-us/library/ms189811.aspx)

 *### 设置链接服务器的示例脚本：

```
USE [master];
GO

EXEC    master.dbo.sp_addlinkedserver 
        @server     = N'ADSI'
    ,   @srvproduct = N'ADSI'
    ,   @provider   = N'ADsDSOObject'
    ,   @datasrc    = N'adsdatasource'
    ,   @provstr    = N'ADSDSOObject';
GO

EXEC    master.dbo.sp_addlinkedsrvlogin 
        @rmtsrvname     = N'ADSI'
    ,   @useself        = N'False'
    ,   @locallogin     = NULL
    ,   @rmtuser        = N'<User account goes here...>'
    ,   @rmtpassword    = '<Password goes here...>';
GO 
```

### 使用 OpenQuery 查询 Active Directory：

然后，您可以使用 OpenQuery 查询 Active Directory 以获取用户信息。有关如何制定查询的更多信息，请阅读 MSDN 上的以下链接。

[*搜索 Active Directory - 分布式查询*](http://msdn.microsoft.com/en-us/library/aa772380%28v=vs.85%29.aspx)

### 查询 Active Directory 的示例脚本：

```
SELECT  *
FROM    OPENQUERY
        (           ADSI
            ,   '   SELECT  *
                    FROM    ''LDAP://<OU path goes here...>''
                    WHERE   objectClass = ''user'''
        ); 
```

### 如何在 SSIS 包中使用这些数据：

您可以将此查询设置为 SQL Server 视图，然后从SSIS 包中*数据流任务*上可用的*OLE DB 源*调用视图，然后将输出重定向到*OLE DB 目标*以填充数据库表。

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T02:45:42.097

## 带有 System.DirectoryServices 的脚本组件 (VB.NET)

这是一个示例逻辑，它在配置为*Source的**Script Component*中借助 VB.NET 将 Active Directory 用户信息从一个域导入数据库表。此示例在 SSIS 2012 中进行了测试，但应该可以在 SSIS 2008 及更高版本中使用。此逻辑在 SSIS 2005 中不起作用，因为命名空间仅在 .NET Framework 3.5 中引入，而 SSIS 2005 使用 .NET Framework 2.0**`System.DirectoryServices.AccountManagement`**

 **   创建一个 SSIS 包。此示例使用 SSIS 2012。

*   创建一个*`OLEDB Connection Manager`*将连接到 SQL Server 数据库的。如果您创建了数据源，请将数据源添加到包的连接管理器选项卡。

*   将 a 拖放*`Data Flow Task`*到“*控制流*”选项卡上。

*   双击*`Data Flow Task`*切换到*数据流*选项卡。

*   将 a 拖放*`Script Component`*到“*数据流*”选项卡上。

*   检查*Select Script Component Type***`Source`**对话框并单击OK。

**   双击脚本组件以打开*脚本转换编辑器*。点击*`Inputs and Outputs`*标签页。

    *   将输出重命名为 ActiveDirectory 以提供有意义的名称。

    *   选择输出列并单击添加列以添加下面提到的每个列。这只是为了说明这个例子。您可能需要添加您喜欢的列。* 

 *### 脚本组件中的列定义

```
Name              Data Type                Length
----------------- ------------------------ ------
FirstName         Unicode string [DT_WSTR]    255
LastName          Unicode string [DT_WSTR]    255
SAMAccountName    Unicode string [DT_WSTR]    255
UserPrincipalName Unicode string [DT_WSTR]    255 
```

*   定义列后，点击*`Script`*标签页

*   将 ScriptLanguage 更改为*`Microsoft Visual Basic 2010`*

*   在解决方案资源管理器中，右键单击脚本组件项目并单击*`Add Reference...`*。添加对以下命名空间的引用。

### 脚本组件中要引用的命名空间

```
System.DirectoryServices
System.DirectoryServices.AccountManagement 
```

*   将下面的 VB.NET 代码粘贴到脚本组件中。将该部分替换为**`<Your domain name goes here>`**您的适当域名。代码在方法中初始化*PrincipalContext*和*PrincipalSearcher*对象，*`PreExecute`*然后在*`PostExecute`*方法中释放它们。CreateNewOutputRows 方法循环遍历 AD 中找到的每一行以获取用户属性信息。

### 脚本组件代码 (VB.NET)

```
#Region "Imports"
Imports System
Imports System.Data
Imports System.Math
Imports Microsoft.SqlServer.Dts.Pipeline.Wrapper
Imports Microsoft.SqlServer.Dts.Runtime.Wrapper
Imports System.DirectoryServices.AccountManagement
Imports System.DirectoryServices

#End Region

<Microsoft.SqlServer.Dts.Pipeline.SSISScriptComponentEntryPointAttribute()> _
<CLSCompliant(False)> _
Public Class ScriptMain
    Inherits UserComponent

    Dim principalContext As PrincipalContext = Nothing
    Dim principalSearcher As PrincipalSearcher = Nothing

    Public Overrides Sub PreExecute()
        principalContext = New PrincipalContext(ContextType.Domain, "<Your domain name goes here>")
        principalSearcher = New PrincipalSearcher(New UserPrincipal(principalContext))
        MyBase.PreExecute()
    End Sub

    Public Overrides Sub PostExecute()
        principalContext = Nothing
        principalSearcher = Nothing
        MyBase.PostExecute()
    End Sub

    Public Overrides Sub CreateNewOutputRows()

        For Each principal As Principal In principalSearcher.FindAll()

            Dim entry As DirectoryEntry = TryCast(principal.GetUnderlyingObject(), DirectoryEntry)

            With ActiveDirectoryBuffer
                .AddRow()

                If entry.Properties("givenName").Value IsNot Nothing Then
                    .FirstName = entry.Properties("givenName").Value.ToString()
                Else
                    .FirstName = "Unknown"
                End If

                If entry.Properties("sn").Value IsNot Nothing Then
                    .LastName = entry.Properties("sn").Value.ToString()
                Else
                    .LastName = "Unknown"
                End If

                If entry.Properties("samAccountName").Value IsNot Nothing Then
                    .SAMAccountName = entry.Properties("samAccountName").Value.ToString()
                Else
                    .SAMAccountName = "Unknown"
                End If

                If entry.Properties("userPrincipalName").Value IsNot Nothing Then
                    .UserPrincipalName = entry.Properties("userPrincipalName").Value.ToString()
                Else
                    .UserPrincipalName = "Unknown"
                End If

            End With

        Next
    End Sub

End Class 
```

*   关闭脚本转换编辑器。

*   将 OLE DB 目标拖放到“数据流”选项卡上。将脚本组件连接到 OLE DB 目标以重定向源输出。选择适当的 OLE DB 连接管理器和应插入数据的表。

### 改进这种方法的方法：

此示例仅提供来自一个域的加载信息。如果您有多个域，则可以将它们存储在一个表中。获取所有域列表的信息并使用*`Foreach Loop Container`*控制流上可用的信息来循环遍历每个域并使用上述方法获取用户信息。可能还有更好的方法在 VB.NET 中执行此操作。

### Active Directory 用户属性

您可以在下面的 MSDN 链接中找到 Active Directory 用户属性的完整列表。您需要单击链接以找到 LDAP-Display-Name。

[*所有属性 (Windows)*](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675090%28v=vs.85%29.aspx)

这是另一个可能有助于获取用户对象属性的链接

[*用户对象属性 (Windows)*](http://msdn.microsoft.com/en-us/library/windows/desktop/ms677979%28v=vs.85%29.aspx)******

# c++ - Eclipse CDT 索引和代码完成/分析不佳

> ID：14927162
> 
> 赞同：1
> 
> 时间：2013-02-17T23:01:36.993
> 
> 标签：c++, eclipse, intellisense, code-analysis, eclipse-cdt

我在尝试在 Eclipse 中进行 C++ 开发时遇到了一些麻烦。

IDE 会在“问题”窗格中持续显示错误和警告，即使它们已解决 - 似乎只有右键单击 ->“删除”才能清除它们。即使这样，编译后也会弹出一些，这可能与第二个问题有关......

我的代码库相当小（两个项目，一个用于单元测试，一个用于我正在开发的小型库），尽管我确实使用了基本的 C++ 模板。但是，Eclipse 在很大程度上无法对包含的库、我自己的工作空间中的文件、但单独的项目，甚至有时是同一项目中的文件进行完整的编码。

我尝试在我的项目上重建索引并摆弄了一些设置，但无济于事。过去我使用过 Visual C++，它具有出色的 Intellisense，但我目前正在运行 Linux，并且想要一个能够（最终）处理多种语言和工具链的 IDE——Eclipse 擅长这些。

我试过谷歌搜索，但没有找到真正的帮助。有没有人有任何调整 Eclipse CDT 以获得更好的代码完成/分析的提示？或者这只是非 Visual Studio 开发的本质？

# string - 压缩的 trie 实现？

> ID：14927167
> 
> 赞同：1
> 
> 时间：2013-02-17T23:01:49.473
> 
> 标签：string, algorithm, data-structures, bit-manipulation, trie

我正在学习 Udacity 课程，并且在其中一堂课（[https://www.youtube.com/watch?v=gPQ-g8xkIAQ&feature=player_embedded](https://www.youtube.com/watch?v=gPQ-g8xkIAQ&feature=player_embedded)）中，教授给出的功能`high_common_bits`（从讲座中逐字提取）看起来像这在伪代码中：

```
function high_common_bits(a,b):
   return:
     - high order bits that a+b in common
     - highest differing bit set
     - all remaining bits clear 
```

举个例子：

```
a = 10101
b = 10011
high_common_bits(a,b) => 10100 
```

然后他说这个函数用于高度优化的尝试实现。有谁碰巧知道他指的是哪个确切的实现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T23:56:00.570

如果您正在寻找高度优化的按位压缩树（又名基数树）。[BSD 路由表](http://www.opensource.apple.com/source/xnu/xnu-1456.1.26/bsd/net/radix.c)在其实现中使用一个。虽然代码*不*容易阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-10T22:27:41.320

他说的是简洁尝试，[每个](https://en.wikipedia.org/wiki/Trie)节点只需要存储两个位*（理论上的最小值）的*尝试。

Steve Hanov 在[这里](http://stevehanov.ca/blog/index.php?id=120)写了一篇关于简洁尝试的非常平易近人的博客文章。您还可以阅读 Guy Jacobson 的原始论文*（写于 1989 年） ，*[这里](http://www.cs.cmu.edu/afs/cs/project/aladdin/wwwlocal/compression/00063533.pdf)介绍了它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T23:31:42.553

压缩的 trie 将前缀存储在一个节点中，然后从该节点分支到已看到的以该前缀开头的每个可能项。

在这种情况下，他显然是在进行逐位尝试，因此它存储了位前缀——即，项目共同的开头位进入一个节点，然后从该节点有两个分支，一个到下一位的节点为 0，下一位的节点为 1。据推测，这些节点也会被压缩，因此它们不会只存储下一位，而是存储一些位到目前为止，在插入到 trie 中的项目中都匹配。

事实上，给定节点之后的下一位可能根本不会存储在后续节点中。该位可以隐含在后面的链接中，因此下一个节点仅存储之后的位。

# git - 使用来自 Git 提交的电子邮件地址发送 Jenkins 通知

> ID：14927173
> 
> 赞同：5
> 
> 时间：2013-02-17T23:02:25.410
> 
> 标签：git, email, notifications, jenkins

我已经使用 Git 插件设置了 Jenkins 作业，现在想使用[email-ext](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin)插件将失败通知发送到中断提交中指定的电子邮件地址。但后来我总是得到

`"An attempt to send an e-mail to empty list of recipients, ignored"`

所以似乎没有提取电子邮件地址。如果可能的话，我不想为每个人创建单独的用户帐户，即使我这样做了，如何将它们与 Git 提交相关联？（“根据作者/提交者的电子邮件创建新帐户”选项可能会扫描*所有*以前的提交，这可能会创建错误的用户，因为有些人没有正确设置电子邮件地址——因此我只希望它用于新提交）

有没有人有任何电子邮件插件的工作设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:54:28.477

GIT Plugin 和 Email-ext 现在应该支持它。我试过了，它有效。资料来自这个论坛：

[http://permalink.gmane.org/gmane.comp.java.jenkins.user/17553](http://permalink.gmane.org/gmane.comp.java.jenkins.user/17553)

所以更新你的插件，然后再试一次。

# php - 按钮单击文本区域上的焦点文本

> ID：14927180
> 
> 赞同：0
> 
> 时间：2013-02-17T23:03:13.050
> 
> 标签：php, javascript

![在此处输入图像描述](../Images/6af70487fc578e92c39c383007c407e2.png)我正在做这个项目，我按下一个按钮，将在 textarea 中查找特定单词（可能将光标移动到该特定单词）。我尝试了很多东西，但到目前为止没有运气。这是我想要做的。

```
$line ="<html>
<head>
<title>Drum studio home</title>
<body>
<img src="/images/fo.png" alt=""/>
</body>
</html> "; 
```

textArea 在 php 页面 test.php

```
<textarea name="tvalue" id="tvalue">
                              <?php                                  
                                  echo $line . "\r\n";                                                                 
                              ?>
</textarea>
<input type="submit" value="find next" name="submit"/> 
```

当我运行 test.php 时，我会在 textarea 中看到以下内容。

```
<html>
<head>
<title>Drum studio home</title>
<body>
<img src="/images/fo.png" alt=""/>
<img src="/images/fo.png" alt="fo image"/>
</body>
</html> 

**find next**  --- this is the button 
```

查找下一个按钮将查找没有替代文本的任何图像。我知道我需要 js 或 jquery。我是新来的。所以真的不知道从哪里开始。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T23:42:41.313

## 解决方案 1：查找下一个空`alt`属性

**JavaScript**

```
function setSelectionRange(input, selectionStart, selectionEnd) {
  if (input.setSelectionRange) {
    input.focus();
    input.setSelectionRange(selectionStart, selectionEnd);
  }
  else if (input.createTextRange) {
    var range = input.createTextRange();
    range.collapse(true);
    range.moveEnd('character', selectionEnd);
    range.moveStart('character', selectionStart);
    range.select();
  }
}

function setCaretToPos (input, pos) {
  setSelectionRange(input, pos, pos);
}

function nextAlt(input) {
    pos = input.val().indexOf('alt=""');
    if (-1 == pos) {
        alert("None found");
    } else {
        setCaretToPos(input.get(0), pos);
    }
} 
```

**HTML**

```
<textarea id="textarea">
    Some sample text.
    <img src="" alt="">
    More text
    <img src="" alt="">
</textarea>
<br>
<a onclick="nextAlt($('#textarea'));">Next</a> 
```

**演示**

[http://jsfiddle.net/rMqbW/](http://jsfiddle.net/rMqbW/)

我已经根据这个问题的公认答案构建了这个：

[jQuery在文本区域中设置光标位置](https://stackoverflow.com/q/499126/1456376)

## 解决方案 2：遍历所有 HTML 标记

这是更新的 JavaScript 以跳过所有 HTML 开始标记。我只发布了更新/新的部分。

**脚本**

```
// new
(function ($, undefined) {
    $.fn.getCursorPosition = function() {
        var el = $(this).get(0);
        var pos = 0;
        if('selectionStart' in el) {
            pos = el.selectionStart;
        } else if('selection' in document) {
            el.focus();
            var Sel = document.selection.createRange();
            var SelLength = document.selection.createRange().text.length;
            Sel.moveStart('character', -el.value.length);
            pos = Sel.text.length - SelLength;
        }
        return pos;
    }
})(jQuery);

// updated
function nextAlt(input) {
    var current = input.getCursorPosition();
    var search = input.val().substr( ( 0 == current ? 0 : current + 1 ) );
    var pos = current + search.search(/<[a-zA-Z]+(>|.*?[^?]>)/) + 1;
    if (-1 == pos) {
        alert("No elements found");
    } else {
        setCaretToPos(input.get(0), pos);
    }
} 
```

**演示**

[http://jsfiddle.net/TmeV3/](http://jsfiddle.net/TmeV3/)

这个使用了[如何在文本区域中获取光标位置的解决方案？](https://stackoverflow.com/q/1891444/1456376)以及来自[Create a Javascript RegExp 的正则表达式，用于在 HTML/php 模板中查找开始标签](https://stackoverflow.com/q/8038235/1456376)。

# java - “Effective Java”难题：为什么在这个并发代码中需要 volatile？

> ID：14927183
> 
> 赞同：15
> 
> 时间：2013-02-17T23:03:22.493
> 
> 标签：java, concurrency, volatile

我正在研究 Effective Java（第二版）的第 71 项“明智地使用延迟初始化”。它建议使用以下代码（第 283 页）对实例字段的延迟初始化使用双重检查习惯用法：

```
private volatile FieldType field;
FieldType getField() {
    FieldType result = field;
    if (result == null) {  //First check (no locking)
        synchronized(this) {
            result = field;
            if (result == null)  //Second check (with locking)
                 field = result = computeFieldValue();
        }
     }
     return result;
} 
```

所以，我实际上有几个问题：

1.  `field`鉴于初始化发生在同步块中，为什么需要 volatile 修饰符？这本书提供了以下支持文本：“因为如果字段已经初始化，则没有锁定，因此将字段声明为 volatile*至关重要”。*因此，是不是一旦字段被初始化，`field`在没有其他同步的情况下，volatile 是多线程一致视图的唯一保证？如果是这样，为什么不同步 getField() 或者上面的代码提供了更好的性能？

2.  文本建议使用不需要的局部变量 ，`result`以“确保`field`在已初始化的常见情况下仅读取一次”，从而提高性能。如果`result`被删除，在已经初始化的常见情况下如何`field`多次读取？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-17T23:07:04.997

> 鉴于初始化发生在同步块中，为什么字段上需要 volatile 修饰符？

这`volatile`是必要的，因为围绕对象构造的指令可能会重新排序。Java 内存模型指出实时编译器可以选择重新排序指令以将字段初始化移到对象构造函数之外。

这意味着线程 1 可以初始化`field`a 的内部，`synchronized`但线程 2 可能会看到对象未完全初始化。在将对象分配给`field`. 该`volatile`关键字确保`field`在访问之前已完全初始化。

这是著名的[“双重检查锁定”错误](http://www.cs.umd.edu/~pugh/java/memoryModel/DoubleCheckedLocking.html)的一个例子。

> 如果结果被删除，在已经初始化的常见情况下，如何多次读取字段？

每当您访问一个`volatile`字段时，都会导致跨越内存障碍。与访问普通字段相比，这可能会很昂贵。`volatile`如果要在同一方法中以任何方式多次访问字段，则将字段复制到局部变量中是一种常见模式。

有关在线程之间共享没有内存屏障的对象的风险的更多示例，请参见我的答案：

> [关于在对象的构造函数完成之前对对象的引用](https://stackoverflow.com/questions/14653739/about-reference-to-object-before-objects-constructor-is-finished/14653863#14653863)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-17T23:09:44.897

这是一个相当复杂的问题，但它与现在编译器可以重新排列事物有关。
基本上该`Double Checked Locking`模式在 Java 中不起作用，除非变量是`volatile`.

这是因为，在某些情况下，编译器可以分配变量，因此除了 null 之外的其他值，然后对变量进行初始化并重新分配它。另一个线程会看到变量不为空并尝试读取它 - 这可能会导致各种非常特殊的结果。

看看[这个](https://stackoverflow.com/questions/7855700/java-why-is-volatile-used-in-this-example-of-double-checked-locking)关于这个话题的另一个 SO question。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-17T23:27:25.010

好问题。

> 鉴于初始化发生在同步块中，为什么字段上需要 volatile 修饰符？

如果您没有同步，并且您分配给该共享全局字段，则无法保证在构造该对象时发生的所有写入都会被看到。例如想象 FieldType 的样子。

```
public class FieldType{
   Object obj = new Object();
   Object obj2 = new Object();
   public Object getObject(){return obj;}
   public Object getObject2(){return obj2;}
} 
```

有可能`getField()`返回一个非空实例，但该实例`getObj()`和`getObj2()`方法可以返回空值。这是因为如果没有同步，对这些字段的写入可能会与对象的构造竞争。

这是如何用 volatile 解决的？在易失性写入发生之后，发生在易失性写入之前的所有写入都是可见的。

> 如果结果被删除，在已经初始化的常见情况下，如何多次读取字段？

本地存储一次并在整个方法中读取可确保一个线程/进程本地存储和所有线程本地读取。你可以在这些方面争论过早的优化，但我喜欢这种风格，因为如果你不这样做，你就不会遇到奇怪的重新排序问题。

# apache - 将 .htaccess 转换为 nginx (mod_rewrite)

> ID：14927184
> 
> 赞同：10
> 
> 时间：2013-02-17T23:03:27.687
> 
> 标签：apache, .htaccess, mod-rewrite, nginx

我的 apache 有以下 .htaccess 文件：

```
<IfModule mod_rewrite.c>
  Options +FollowSymlinks    
# Options +SymLinksIfOwnerMatch
  RewriteEngine On
  RewriteBase /
  RewriteRule ^$          index.php       [L]
  RewriteCond %{REQUEST_FILENAME}         !-f
  RewriteCond %{REQUEST_FILENAME}         !-d
  RewriteRule (.*)        index.php?page=$1  [QSA,L]
</IfModule> 
```

突然我不得不将我的网络服务器更改为 nginx，我不知道为什么，但是 mod 重写不起作用。

我使用在线“转换器”来转换它，所以我有以下内容：

```
location / {
  rewrite ^/$ /         index.php       break;
  if ($request_filename ~         !-f){
    rewrite ^(.*)$ /       index.php?page=$1   break;
  }
} 
```

你能帮我看看有什么问题吗？

在此先感谢，马塞尔

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-19T21:14:48.537

[http://web.archive.org/web/20180812021847/https://blog.martinfjordvald.com/2011/02/nginx-primer-2-from-apache-to-nginx/](http://web.archive.org/web/20180812021847/https://blog.martinfjordvald.com/2011/02/nginx-primer-2-from-apache-to-nginx/)

一切都在里面。没有更多的 .htaccess，没有更复杂的规则使用 try_files。

**编辑**：如果不是很明显，不要相信在线转换器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-25T10:02:05.483

$ sudo vim /etc/nginx/sites-available/default

```
 location / {
        try_files $uri $uri/ =404;
    } 
```

到

```
location / {
    try_files $uri $uri/ /index.php?$args;
} 
```

# ruby-on-rails-3 - 在 Mailer 视图中请求带有子域的路由的 URL 时，Rails 3 路由类型不匹配错误

> ID：14927187
> 
> 赞同：0
> 
> 时间：2013-02-17T23:04:09.087
> 
> 标签：ruby-on-rails-3, routing, actionmailer, mailer

请求此路线时出现此错误：`direct_appointment_url(@appointment.uuid, :subdomain => @user.name)`

```
direct_appointment_url(@appointment.uuid, :subdomain => @user.name)
TypeError: can't convert Array to String
from ...rvm/gems/ruby-1.9.3-p362@example/gems/actionpack-3.2.12/lib/action_dispatch/http/url.rb:55:in `match' 
```

路线定义为：`get "/appointment/:uuid" => "schedule#appointment", as: "direct_appointment"`

传入路由匹配器的两个变量的值是：

`appointment.uuid => "a52aff80-5b83-0130-987f-0026080ebf68"`

和

`@user.name => "example"`

更多背景：

```
ActionView::Template::Error (can't convert Array to String):
    13: Message: <%= @appointment.client_message %>
    14: <% end %>
    15:
    16: View online: <%= direct_appointment_url(@appointment.uuid, :subdomain => @user.name) %>
    17:
    18: To see your latest appointments, login at: <%= @login_url %>
    19: Your username is: <%= @user.email %>
  app/views/user_mailer/new_appointment_email.text.erb:16:in `_app_views_user_mailer_new_appointment_email_text_erb__686277782469675039_70200502266100'
  app/mailers/user_mailer.rb:13:in `block in new_appointment_email'
  app/mailers/user_mailer.rb:12:in `new_appointment_email'
  app/controllers/appointments_controller.rb:43:in `block in create'
  app/controllers/appointments_controller.rb:42:in `create' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T00:32:13.440

啊，有用的错误信息就这么多！

查看`https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/http/url.rb`第 55 行的源代码（虽然为空白），前几行显示了应该引发的错误：

```
if options[:host].blank? && options[:only_path].blank?
  raise ArgumentError, 'Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true'
end 
```

一旦我指定了主机，它就起作用了：

> direct_appointment_url(@appointment.uuid, :subdomain => "hello", :host => "blah") => " [http://hello.blah/appointment/6a5cc9a0-5b8f-0130-9883-0026080ebf68](http://hello.blah/appointment/6a5cc9a0-5b8f-0130-9883-0026080ebf68) "

### 专家提示

不要为您的配置文件提供一系列可能的主机： `config.action_mailer.default_url_options = { :host => ['lvh.me:3000', 'blah.dev'] }`

# delphi - 从 TIdHTTPProxyServer 获取 POST 数据

> ID：14927189
> 
> 赞同：1
> 
> 时间：2013-02-17T23:04:19.650
> 
> 标签：delphi, indy, indy10

我正在尝试使用 OnHTTPBeforeCommand 或 OnHTTPDocument 事件从 TIdHTTPProxyServer 获取发布数据，但一切都没用。我怎样才能做到这一点？

顺便说一句，我使用的是 Indy 10，但其他解决方案（例如突触）会很酷。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:14:38.913

`POST`事件中的数据不可用`OnHTTPBeforeCommand`，因为尚未从套接字中读取它。在该事件中只有 HTTP 标头可用。

`POST`事件中的数据可用`OnHTTPDocument`，但仅在以下条件下可用：

1.  该`POST`请求使用非零`Content-Length`标头（因为`TIdHTTPProxyServer`尚不支持`Transfer-Encoding`标头来处理压缩/分块的 HTTP 消息）。

2.  该`TIdHTTPProxyServerContext.TransferMode`属性是`tmFullDocument`事件`OnHTTPBeforeCommand`退出的时间。默认情况下，设置为与属性`TransferMode`相同的值，这是默认情况下。`TIdHTTPProxyServer.DefaultTransferMode``tmFullDocument`

3.  客户端将`POST`请求直接发送到`TIdHTTPProxyServer`，指定一个完整的 URL 作为目标。如果客户端直接发送`CONNECT`请求`TIdHTTPProxyServer`以建立到目标服务器的隧道，然后`POST`通过隧道将请求发送到目标服务器（例如，在为 HTTPS 请求建立 SSL 会话时），`TIdHTTPProxyServer`则不会公开对该数据的访问。它是从一个插座到另一个插座的直接通路。

# javascript - Javascript 事件以不希望的顺序触发

> ID：14927191
> 
> 赞同：0
> 
> 时间：2013-02-17T23:04:39.883
> 
> 标签：javascript, ajax, google-maps, google-maps-api-3, google-places-api

# 问题：

`mouseout`当用户将鼠标拖过标记过快时，事件触发得太早并导致信息框保持打开状态。换句话说......如果用户快速移入和移出标记......`mouseover`事件触发，然后`mouseout`事件触发......但是，placesService回调被执行并被`ib.open()`调用。

# 编码：

```
map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);

var request = {
    key: 'for_my_eyes_only',
    location: new google.maps.LatLng(some_lat, some_lng);,
    radius: '500',
    types: ["restaurant"]
};

var service = new google.maps.places.PlacesService(map);
service.search(request, placesCallback);

function placesCallback(results, status) {
    if (status == google.maps.places.PlacesServiceStatus.OK) {
        for (var i = 0; i < results.length; i++) {

            var place = results[i];
            var marker = new google.maps.Marker({
                map: map,
                position: place.geometry.location,
            });

            //Infobox settings
                var ib = new InfoBox({
                    //a bunch of irrelevant properties.
                });

            google.maps.event.addListener(marker, 'mouseover', markerMouseOverFactory(place, marker, ib));
            google.maps.event.addListener(marker, 'mouseout', markerMouseOutFactory(ib));
        }
    }
}

function markerMouseOverFactory(place, marker, ib){
    return function(){
        var detailService = new google.maps.places.PlacesService(map);
        detailService.getDetails({reference: place.reference}, function(details, status){
            if (status == google.maps.places.PlacesServiceStatus.OK) {
                ib.setContent(/*set some content using details*/);
                ib.open(map, marker);
            }
        });
    }

}

function markerMouseOutFactory(ib){
    return function(){
        ib.close();
    }
} 
```

# 问题：

有没有办法放弃谷歌地图 AJAX 请求？如果我可以在侦听器中放弃 AJAX 请求`mouseout`，一切都会好起来的。或者，你将如何解决这个问题？我尝试在 mouseout 中使用一个简单的标志，但无法使其正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T03:03:10.927

据我所知，没有方法可以取消 API 中的请求。但我要做的是延迟`mouseover`事件内部执行的回调。这样如果用户握住鼠标的时间超过了指定的时间；这意味着他/她想要`infobox`显示。

### 解决方法：

```
var delayTimer, delay = 800; //less than 1 sec. delay
google.maps.event.addListener(marker, 'mouseover', function() {
    delayTimer = setTimeout(function() { 
        markerMouseOverFactory(place, marker, ib); 
    }, delay);
});

google.maps.event.addListener(marker, 'mouseout', markerMouseOutFactory(ib));
function markerMouseOutFactory(ib){
    clearTimeout(delayTimer); //clear timeout here
    return function(){
        ib.close();
    }
} 
```

# lapack - lapack - 完全打包的矩形格式的寻址

> ID：14927195
> 
> 赞同：1
> 
> 时间：2013-02-17T23:05:02.153
> 
> 标签：lapack

我想使用 LAPACK 例程使用完全压缩的矩​​形格式对矩阵进行因式分解和求逆，因为这只需要为对称的 nxn 矩阵存储 n(n+1)/2 个元素。到目前为止，我正在以“打包”格式设置矩阵并将其转换为调用例程 DTPTTF。但是，这需要第二个数组。我想**直接**以完全打包的矩形格式构建我的矩阵（以节省空间） - 是否有一个“寻址”函数可以为我提供第 i,j 个元素的位置？或者有人可以指出我的相关公式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T22:20:20.953

部分回答我自己的问题：检查 DTPTTF 的源代码和其中给出的示例，我已经计算出四个可能星座之一的地址（我唯一需要的一个），即 uplo ='L' 和 trans = 'N'。下面是我的fortran函数：

```
! ====================================     ! returns address for RFP format
  integer function ijfprf( ii, jj, n )     ! for row jj and column ii
! ====================================     ! for UPLO = 'L' and TRANSR = 'N' only!

  implicit none
  integer, intent(in) :: ii, jj, n
  integer             :: i, j, k, n1, k1

  if( ii <= jj ) then
      i = ii; j = jj
  else
      i = jj; j = ii
  end if
  k = n/2
  if( mod(n,2) == 0 ) then                     ! n even
      n1 = n + 1
      if( i <= k ) then
          ijfprf = 1 + (i - 1) * n1 + j
      else
          ijfprf = ( j - k - 1 ) * n1 + i - k
      end if
  else                                         ! n odd
      k1 = k + 1
      if( i > k1 ) then
          ijfprf = ( j - k1 ) * n + i - k1
      else
          ijfprf = ( i - 1 ) * n + j
      end if
  end if

  return
  end function ijfprf 
```

# css - CSS 过渡不太正常

> ID：14927199
> 
> 赞同：0
> 
> 时间：2013-02-17T23:05:49.647
> 
> 标签：css, css-transitions

我有一些我正在使用 css 转换的导航链接。

这是CSS...

```
 ul.yui-nav { list-style-type: none; }
        ul.yui-nav li { 
            display: inline-block; 
            text-align: center; 
            height: 110px; 
            width: 110px; 
            border: none; 
            background: none; 
        }
        ul.yui-nav li:hover { 
            background: none; 
            border: 1px solid #ccc; 
            border-radius: 50%; 
            height: 110px; 
            width: 110px; 
            transition: all 275ms;
            -moz-transition: all 275ms; /* Firefox 4 */
            -webkit-transition: all 275ms; /* Safari and Chrome */
            -o-transition: all 275ms; /* Opera */
        }
        ul.yui-nav li a  { 
            font-style: normal;
            border-radius: 50%; 
            height: 100px; 
            width: 100px; 
            background: #ccc; 
            float: left;
            color: #fff;
            text-decoration: none;
            font-size: 50px;
            font-family: 'Oswald', sans-serif;
            margin: 0 11px;
            font-weight: 700;
            margin: 5px 5px;
        }
        ul.yui-nav li a span { font-size: 16px; font-weight: 400; } 
```

这是HTML...

```
 <ul class="yui-nav">
                            <li><a href="#preface">Preface</a></li>
                            <li><a href="#step1">1<br/><span>Step</span></a></li>
                            <li><a href="#step2">2<br/><span>Step</span></a></li>
                            <li><a href="#step3">3<br/><span>Step</span></a></li>
                            <li><a href="#step4">4<br/><span>Step</span></a></li>
                            <li><a href="#step5">5<br/><span>Step</span></a></li>
                            <li><a href="#submit">Submit</a></li>
                        </ul> 
```

这是一个 JS Fiddle，这一切都可以正常工作（不要介意文本看起来不正确）...... [JS Fiddle](http://jsfiddle.net/7xB9E/)

我遇到的问题是，当您将鼠标悬停在圆圈上时，在过渡期间，边框从黑色正方形变为灰色圆形边框。我只想要一个灰色边框从圆圈中出来，我不明白为什么它没有正确发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T23:13:37.113

我不确定我是否理解你的问题。问题是从动画开始的黑色？您可以在下一行修复它：

```
...

ul.yui-nav li { 
    ...
    border-color:#ccc;
}

... 
```

它是否正确？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T23:15:28.907

添加`border-radius: 50%;`到您的`ul.yui-nav li`选择器。这表明它是圆形的，即使它没有边界。

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/58Ggh/)]]]

```
ul.yui-nav li { 
    border-radius: 50%; 
    display: inline-block; 
    text-align: center; 
    height: 110px; 
    width: 110px; 
    border: none; 
    background: none; 
} 
```

# matlab - 在循环的第 i 次迭代中调用矩阵 Ai

> ID：14927203
> 
> 赞同：0
> 
> 时间：2013-02-17T23:06:34.153
> 
> 标签：matlab

今天的最后一个初学者问题......在matlab中工作。假设有矩阵 A1,...,An。一个调用如何在循环的第 i 次迭代中对 Ai 矩阵做某事？实际上，我想连接除 Ai-th 之外的所有矩阵，但我可能可以弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T23:42:32.597

我的解决方案是执行以下操作：

我将创建一个矩阵数组，而不是像上面那样创建矩阵。

> 对于 i=1:n
> 
> A{i}= 具有 nrows:ncolumns 的矩阵；
> 
> 结尾

然后你以显而易见的方式调用矩阵。

# c++ - is-a 和 has-a 实现错误

> ID：14927210
> 
> 赞同：-3
> 
> 时间：2013-02-17T23:07:15.490
> 
> 标签：c++

所以，我得到了这样的代码：

```
class Fruit
{//some constructor method and instance in here}

class Banana: public Fruit
{//some constructor method and instance in here}

class plant
{
public:
    plant(){
      thisFruit->Banana();//everytime a new plant is created, its thisFruit will point to a new Banana Object
    }
private:
    Fruit *thisFruit;//this plant has a pointer to a fruit
} 
```

但是，我在“this-Fruit->banana();”中遇到错误 该状态“不允许指向不完整的类类型。我的代码有问题吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T23:10:20.090

如果要`thisFruit`指向 Banana 对象，则需要`thisFruit`使用`Banana`对象进行初始化

```
plant::plant()
: thisFruit(new Banana())
{
} 
```

当您将本机指针作为成员时，请确保遵循[三规则。](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)由于 C++11 即将到来，因此读取[规则为零。](http://flamingdangerzone.com/cxx11/2012/08/15/rule-of-zero.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T23:20:03.477

您必须使用`std::unique_ptr`或另一个智能指针并使用 new 对其进行初始化`Banana`：

```
#include <memory>

class Fruit {
    //some constructor method and instance in here
}

class Banana : public Fruit {
    //some constructor method and instance in here
}

class Plant {
public:
    Plant() : thisFruit{new Banana} {

    }

private:
    std::unique_ptr<Fruit> thisFruit; //this plant has a pointer to a fruit
} 
```

请参阅[零规则](http://flamingdangerzone.com/cxx11/2012/08/15/rule-of-zero.html)和[权威 C++ 书籍指南和列表](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T23:10:08.810

这个

```
thisFruit->Banana(); 
```

没有任何意义。你大概是说

```
thisFruit = new Banana(); 
```

确保`delete thisFruit`在您的析构函数中并提供合适的分配运算符。或者让自己的生活更轻松，并使用智能指针，例如`boost::scoped_ptr<Fruit>`or `std::unique_ptr<Fruit>`。

# node.js - 使用 Node.js 发送电子邮件时使用 SMTP 服务器的含义

> ID：14927212
> 
> 赞同：0
> 
> 时间：2013-02-17T23:07:32.710
> 
> 标签：node.js, email, smtp

我想用我的节点服务器发送电子邮件。这些是无回复类型的电子邮件，只是作为提醒。服务器将不需要处理传入的电子邮件。我知道有 Postmark、Mailchimp 等服务会为我发送电子邮件，但我**真的不想为服务付费**。

使用[Nodemailer](https://github.com/andris9/Nodemailer)我必须指定一个 SMTP 服务器。我可以捎带 GMail 或其他东西，但这是不可取的，因为邮件不会来自我的域（对吗？）。

但也有[node-sendmail](https://github.com/guileen/node-sendmail)可以在没有 SMTP 服务器的情况下发送电子邮件。有人可以描述在没有 SMTP 服务器的情况下发送电子邮件的影响吗？断开连接？没有指示消息是否无法送达？

运行我自己的 SMTP 服务器有什么影响？它会打开额外的安全漏洞吗？你能推荐一个需要最少设置和维护的开源 SMTP 服务器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T08:50:23.673

看看[哈拉卡](http://haraka.github.com/)。这是一个易于使用的 SMTP 服务器，应该完全符合您的要求。Craigslist 目前正在使用它，所以你知道它是可靠的。

文档中有一节介绍如何设置它以发送邮件 - 最后一节 6.1。

# c++ - 如何确定两个 3d 边缘是否相同？

> ID：14927214
> 
> 赞同：1
> 
> 时间：2013-02-17T23:08:03.257
> 
> 标签：c++, edge-detection

我正在尝试检测 3d 对象的轮廓边缘。我知道您必须首先确定一张脸正在看一个位置的天气，然后找到正面和背面之间共享的边缘。

我已经能够弄清楚正面和背面的事物，但我无法弄清楚如何在没有大量 if 语句的情况下找到边缘是否被共享。我的顶点数据从每个多边形的 x1,z1,y1,x2,z2,y2,x3,z3,y3 存储。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T23:18:53.667

如果您询问如何确定两条线段是否在同一条线上，您可以使用一点欧几里得几何。让我们介绍几个定义：

*点*A是实数的 n 元组`(a1, a2, ..., an)`。在 3D 情况下，`n=3`.

*点 A 和实数的*标量乘法*`t`定义为*

 *```
tA = (t*a1, t*a2, ..., t*an) 
```

有了这两个想法，我们可以很容易地表示一条线。对于两点`A`和`B`，`P`满足方程的点

```
P = tA + (1-t)B 
```

是在实数`AB`所在的线上。`t`

何时`0 <= t <= 1`，`P`介于何时`A`和何时之间。`B`_`P=A``t=1``P=B``t=0`

现在把它放到编程的角度来看，你可以创建两个类：`Point`和`Line`. 使用上面给出的等式，很容易确定 a 是否`Point`位于给定的 上`Line`。要确定两条线段是否在同一条线上，只需使用`Point`定义一条线的两条线`Line`并检查它们是否位于另一条线上`Line`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T01:46:29.157

> 如果 2 条线段是同一条线

如果两条线段使用相同的点坐标或相同的点索引，则它们是相同的。测试它们是否在同一条线上是完全不同的问题，您无需解决即可找到轮廓。

1.  使用索引原语。
2.  在加载模型时预先计算边列表和所需的拓扑表。
3.  **如果您要绘制阴影，请改用阴影贴图**- 它们更容易理解。

索引基元意味着
1\. 您将所有点存储在数组中（`std::vector<vector3> points;`或类似的东西`vector3`，存储 xyz 坐标的数据类型在哪里），并且每个点都是唯一的。
2\. 面和边指的是使用整数点索引的点。

IE

```
struct Vec3{
    float x, y, z;
};

typedef unsigned int Index;

struct Face{
    enum{vertsPerFace=3};
    Index verts[vertsPerFace];
};

struct Edge{
    enum{vertsPerEdge=2};
    Index verts[vertsPerEdge];
}; 
```

当您加载模型时，您构建点列表并将所有面转换为使用`std::set` `std::map`或类似结构的索引图元。一旦你索引了基元，你就可以建立关联表（使用 std::map），它将边缘映射到 faces 列表，`std::multimap<std::pair<Index, Index>, FaceIndex>`将边缘映射到使用这些边缘的 faces 索引`std::map<std::pair<VertexIndex, VertexIndex>, FaceIndex>`等等。*

# nuget - NuGet 源代码管理集成

> ID：14927217
> 
> 赞同：0
> 
> 时间：2013-02-17T23:08:20.197
> 
> 标签：nuget

我使用 git 检查了我的项目，发现我用 NuGet 安装的程序集丢失了。我尝试构建并得到一个缺少的程序集错误，因此我尝试使用 NuGet 重新添加它，但 NuGet 说我已将该 dll/引用添加到我的项目中（它有一个绿色复选标记）。

我进入选项并检查了构建期间丢失的引用并进行了重建，但我仍然缺少 asm 错误。

如何将 NuGet 与源代码管理一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:09:28.767

右键单击解决方案（和项目）-> 启用 NuGet 包还原

或者...

将包文件夹检查到源代码管理中。

YMMV，NuGet 在与源代码控制集成方面很糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T08:03:36.070

您在包还原时看到了什么确切的错误？ [http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages) - 有关启用包还原的更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-28T03:38:59.973

[为了那些通过网络搜索登陆这里的人的利益] 从 NuGet 2.0 开始，“恢复包”是在尝试构建解决方案之前可以由构建执行的步骤：

从官方 NuGet 文档[中](https://docs.nuget.org/consume/package-restore/msbuild-integrated)查看

可以通过 Visual Studio GUI 为解决方案启用包还原，对项目所做的更改类似于 @Precipitous 在他的评论中建议的内容。本质上，您这样做：右键单击 Visual Studio 中的解决方案，然后单击“启用 NuGet 包还原”。

# vb.net - VB.NET 在引号或其他符号之间获取文本

> ID：14927218
> 
> 赞同：2
> 
> 时间：2013-02-17T23:08:28.873
> 
> 标签：vb.net, string

我希望能够将引号或括号等之间的字符串提取到变量中。例如，我的文本可能是“Hello there “Bob””。我想从两个引号之间提取文本“Bob”并将其放在字符串“name”中以供以后使用。“Hello there (Bob)”也是如此。我该怎么办？谢谢。

=======编辑======

对不起，我措辞不好。好的，可以说我有一个文本框（Textbox1）和一个按钮。如果用户输入文本： MsgBox "THIS IS MY MESSAGE" 我希望当按下按钮时，只显示文本 THIS IS MY MESSAGE。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T23:35:07.103

基本上有三种方法——正则表达式、string.indexof 和 substring，最后一个一个地循环遍历字符。我会避免后者，因为它只是在重新发明轮子。是否使用正则表达式或 indexof 取决于您的需求和数据的复杂性。Indexof 有点罗嗦，但相当简单，在这种情况下可能正是您想要的。

```
Dim str as String = "Hello there ""Bob"""
Dim startName as Integer 
Dim endName as Integer
Dim name as String = ""

startName = str.IndexOf("""")
endName = str.Indexof("""", If(startName > 0, startName,0))
If (endName>startName) Then
    name = str.SubString(startName, endName)
End If 
```

如果您需要对任意符号执行此操作，那么您需要正则表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T09:12:31.083

这是一个非常简单的解决方案：

```
Dim sAux() As String = TextBox1.Text.Split(""""c)
Dim sResult As String = ""

If sAux.Length = 3 Then
    sResult = sAux(1)
Else
    ' Error or something (number of quotes <> 2)
End If 
```

# javascript - 了解 Javascript .sort 参数

> ID：14927225
> 
> 赞同：5
> 
> 时间：2013-02-17T23:09:35.877
> 
> 标签：javascript, arrays, function, sorting

我无法理解为什么以下函数对字符串进行数字排序（在代码的第三部分）。

```
var myArray = [10, 44, 32, 100, 0, 44, 3, 4];
console.log(myArray.toString()); // 10, 44, 32, 100, 0, 44, 3, 4 --> unsorted

myArray.sort();
console.log(myArray.toString()); // 0,10,100,3,32,4,44,44 --> sorted like strings

// this is what confuses me:
myArray.sort(function (a, b) {
return a - b;
});
console.log(myArray.toString()); // 0,3,4,10,32,44,44,100 --> sorted numerically 
```

**具体来说**：

1.  如何`a`获得`b`人口？

2.  为什么减法`a - b`按数字顺序对数字进行排序？

3.  如果函数一次只检查 2 个数字，如何将所有数字按正确的顺序排序？（即`a`和`b`）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-17T23:13:51.497

`.sort`接受一个可选参数，它应该是一个函数。

`.sort`然后重复调用该函数，将数组中的一对值（`a`和`b`参数）传递给它。然后该函数返回一个值，其解释如下：

*   如果返回值小于 0，则`a < b`
*   如果返回值大于 0，则`a > b`
*   如果返回值正好是 0，那么`a == b`

使用它，`.sort`使用浏览器编程使用的任何排序算法来计算项目的顺序。

在没有排序功能的情况下，`.sort`会将项目排序为字符串——这只是设计的任意点。理想情况下，您应该传递一个要在任何时候使用的函数`.sort`，就像这里函数强制将值作为数字进行比较的情况一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T23:16:44.490

无论出于何种原因（我应该找到文档），默认行为`Array.prototype.sort`是按字符串排序，而不是按数字排序。这意味着您必须*定义*数字排序行为。

1.  *如何做`a`和`b`得到填充*- 欢迎来到函数式编程的世界。数组在内部进行迭代，并使用 a（第一个元素）和 b（第二个元素）调用回调函数，直到元素耗尽。你不必太担心这一点，只要知道这就是发生的事情。

2.  幸运的是，这方面的[文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)非常清楚。如果回调的返回值小于 0，`a`则索引低于`b`. 如果`0`返回，则将它们保持在相对于其他元素的相同索引处。如果返回正值，`b`则索引低于`a`。这意味着`a - b`保证可以正常工作以进行数字排序。 ***但是***，如果有任何非数字元素，您将遇到此回调函数的问题。仅当您知道数组仅包含数字元素时才使用它。

3.  这是一个简单的插入排序，实际上不会一次进行两个，但如果`b`恰好小于`a`. `console.log(a,b)`您可以通过将 a 添加到排序回调方法来检查此行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T23:11:35.597

默认情况下， JavaScript`.sort()`函数总是对数组进行排序，就好像它们的内容是字符串一样。这就是它的作用。基本上，默认排序函数`.toString()`对每个值执行 a 。

[这是规范的链接。](http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.4)这很令人困惑，但关键是在排序比较过程描述的末尾。

# ios - 如何从 MPMoviePlayerViewController 中删除“正在加载...”标签？

> ID：14927229
> 
> 赞同：1
> 
> 时间：2013-02-17T23:09:45.330
> 
> 标签：ios, ios5, ios6

我有一个 MPMoviePlayerViewController，我不想用内容 url 初始化它，我只想有一个空的电影播放器​​ GUI。每当我想让它加载电影时，它就会开始加载。但我不能

```
self.playerViewController = [[MPMoviePlayerViewController alloc] init];

MPMoviePlayerController *player = [self.playerViewController moviePlayer];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayerPlaybackStateChanged:) name:MPMoviePlayerPlaybackStateDidChangeNotification object:nil];

player.shouldAutoplay = FALSE;
player.initialPlaybackTime = 0;
[player setFullscreen:FALSE];

[player.view setFrame:CGRectMake(0, -20, self.view.bounds.size.width, self.view.bounds.size.height/2)];
[self.view addSubview:player.view]; 
```

如您所见，我在没有内容 url 的情况下初始化 MPMoviePlayerViewController，并将自动播放设置为 false，但是当我运行应用程序时。即使没有给出视频网址，我仍然可以在“完成”按钮附近看到一个标签“正在加载...”，为什么？？？？如何去除装载标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T23:34:00.460

只需使用 MPMoviePlayerController 代替 MPMoviePlayerViewController。如果你想以模态方式显示它，你需要围绕它构建一个视图控制器。

您也可以遍历`[MPMoviePlayerViewController view].subviews`直到找到 UILabel，但这种方法可能会在未来的 iOS 版本中中断。

# selenium-ide - 在 Selenium IDE 中访问测试用例的路径

> ID：14927231
> 
> 赞同：2
> 
> 时间：2013-02-17T23:09:46.107
> 
> 标签：selenium-ide

是否可以在 Selenium IDE 中评估当前测试用例的路径？文件上传需要完整的路径，而硬编码会破坏可移植性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-27T13:34:08.343

一个好的解决方法是将测试文件添加到项目的资源目录中。团队的每个成员都可以访问该文件。

```
WebElement fileInput = driver.findElement(By.locator("yourButton"));
String filePath = YourClass.class.getResource("/" + fileName).getPath();
fileInput.sendKeys(filePath); 
```

我发现将上述代码块放在所有测试类都可以访问的辅助方法中效果最好。

# c# - 远程确定 Windows 7 机器上的交互/活动用户

> ID：14927232
> 
> 赞同：0
> 
> 时间：2013-02-17T23:09:57.900
> 
> 标签：c#, windows-7, cmd, wmi

其他人必须在 Windows 7 环境中远程确定当前登录的用户是谁？我正在使用 .NET 4.0 和 C#。环境是XP和7的混合。

*   涉及会话的 WMI 查询会导致所有活动会话，但不是交互式会话。
*   如果用户通过远程桌面连接，则来自 ComputerSystem (WMI) 的 UserName 返回 null 异常，这很常见，无法使用此方法。
*   `PsLoggedOn`对我的目的来说太长了（是的，300 毫秒太长了）并且令人惊讶地不是 100% 的时间准确
*   使用 p/invoke for `WTSGetActiveConsoleSessionID`or`LsaEnumerateLogonSessions`太复杂并且容易出现内存泄漏（根据我的阅读）
*   `tasklist /S <computername>`将返回 XP 系统的信息，但由于那个可爱的 UAC，Windows 7 不会令人愉快。
*   由于权限限制，无法远程访问 HKCU（win 注册表），可以访问 HKCU，但 Volatile Environment 似乎没有“活动”标签

到目前为止，最可靠的方法是使用从命令行`PsExec`远程执行并远程遍历输出到文本。`qwinsta`这很烦人并且需要时间（超过`PsLoggedOn`），但我在这里没有足够的想法来确保可靠性。可靠性先于速度，但就成本效益而言，速度非常重要。

第三方工具不是一个选项，必须是脚本，最好是 WMI 和 C#。我深入研究了使用 Principal 对象击中 DC，但恐怕我可能会更加困惑自己。此外，所有用户帐户都是管理员。

我对谷歌做了很多研究，但我想也许我找错地方了。

有接盘侠吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T07:08:32.683

您可以通过浏览[Win32_ComputerSystem](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394102%28v=vs.85%29.aspx)类的`UserName`Propperty 来实现：

```
 ConnectionOptions con = new ConnectionOptions();
   con.Username = "Administrator";
   con.Password = "********";
   ManagementScope scope = new ManagementScope(@"\\" + strIPAddress + @"\root\cimv2", con);
   scope.Connect();

//check for scope.IsConnected, then process

   ManagementObjectSearcher searcher =new ManagementObjectSearcher(@"\\" + strIPAddress + @"\root\cimv2", "SELECT * FROM Win32_ComputerSystem"); 

   foreach (ManagementObject queryObj in searcher.Get())
    {
      Console.WriteLine("-----------------------------------");
      Console.WriteLine("Win32_ComputerSystem instance");
      Console.WriteLine("-----------------------------------");
      Console.WriteLine("UserName: {0}", queryObj["UserName"]);
    } 
```

# listener - 以编程方式删除使用 FXML 添加的侦听器？

> ID：14927233
> 
> 赞同：2
> 
> 时间：2013-02-17T23:10:05.607
> 
> 标签：listener, javafx-2, actionlistener, fxml

我正在使用 FXML 添加一个侦听器：

```
<RadioButton onAction="#onSelectionChanged" /> 
```

现在我需要以编程方式暂时禁用这个监听器。

现在我可以设置一些布尔变量“listenerDisabled”并在监听器中检查这个变量，但我想要一种方法来禁用监听器而不改变它——所以我想删除它。

这里的问题是：如何在我的代码中引用侦听器，以便可以使用以下内容？

```
RadioButton.selectedProperty().removeListener(<what to place here?>) 
```

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T20:49:36.973

将 fx:id 规范添加到您的 fxml：

```
<RadioButton fx:id="myRadio" onAction="#onSelectionChanged" /> 
```

在 fxml 的相应控制器中，使用`@FXML`符号`FXMLLoader`将单选按钮的引用注入到您的控制器中：

```
@FXML RadioButton myRadio; 
```

要获取对侦听器的引用，请调用`getOnAction`：

```
EventHandler<ActionEvent> myRadioActionEvent = myRadio.getOnAction(); 
```

要删除侦听器，请使用`setOnAction`：

```
myRadio.setOnAction(null); 
```

要再次添加侦听器，请再次使用`setOnAction`：

```
myRadio.setOnAction(myRadioActionEvent); 
```

我没有尝试上述任何方法，但我不明白为什么它不起作用。

# java - 将项目从 Ant 移动到 Maven 并将其分解

> ID：14927236
> 
> 赞同：2
> 
> 时间：2013-02-17T23:10:11.430
> 
> 标签：java, maven, ant

我有一个当前使用 Ant 的现有 Web 项目。我有以下任务：

*   仅基于某些包为使用此项目作为依赖项的其他应用程序创建 jar
*   为应用程序创建战争文件

和很多其他人。

另外，我有一个 webservice 项目，它使用由前一个应用程序构建的 jar。本项目使用 Maven。

现在我想要实现的是将第一个项目移动到 Maven 中，将其分解为`core`and `web`，然后将 webservice 项目移动到第一个中。所以结果将是一个多模块项目：

*   核
*   用户界面
*   网络服务

是否可以将处理 web 交付机制的源移动到 ui 模块中（这将是 Maven 中的一场战争），或者我需要将源保留在核心中？

最好的方法是什么？

我应该查看 Maven 配置文件吗？

我是 Maven 的新手，所以我不确定如何处理这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T23:43:56.767

Yes you can achieve what you want with Maven. I would break the modules like this:

**Core**:

```
<groupId>com.myapp</groupId>
<artifactId>core</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>jar</packaging> 
```

**UI**:

```
<groupId>com.myapp</groupId>
<artifactId>ui</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>war</packaging>

<!-- Dependends on core -->
<dependency>
    <groupId>com.myapp</groupId>
    <artifactId>core</artifactId>
    <version>1.0-SNAPSHOT</version>
</dependency> 
```

**Web service:**

```
<groupId>com.myapp</groupId>
<artifactId>ws</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>war</packaging>

<!-- Also Dependends on core -->
<dependency>
    <groupId>com.myapp</groupId>
    <artifactId>core</artifactId>
    <version>1.0-SNAPSHOT</version>
</dependency> 
```

**Main Project**:

```
<groupId>com.myapp</groupId>
<artifactId>myapp</artifactId>
<packaging>pom</packaging>
<version>1.0-SNAPSHOT</version>

<modules>
    <module>core</module>
    <module>ui</module>
    <module>ws</module>
</modules> 
```

Then, in Core / UI and Web service you declare myapp as the parent:

```
<parent>
    <groupId>com.myapp</groupId>
    <artifactId>myapp</artifactId>
    <version>1.0-SNAPSHOT</version>
</parent> 
```

For further info refer to:

*   [Introduction to the POM](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html): Particularly: Inheritance and Project Aggregation
*   [Maven by Example: Chapter 6\. A Multi-module Project](http://www.sonatype.com/books/mvnex-book/reference/multimodule.html): For a sample project
*   [Multi-modules projects](http://docs.codehaus.org/display/MAVENUSER/Multi-modules+projects): For the folder structure

# c# - INotifyPropertyChanged.PropertyChanged 已触发，但表单加载后 UI 未更新

> ID：14927240
> 
> 赞同：5
> 
> 时间：2013-02-17T23:10:31.010
> 
> 标签：c#, wpf, xaml

下面是我的模型`ViewModel`和 xaml 绑定的示例。视图模型实现`INotifyPropertChanged`. 我遇到的问题是...当 wpf 表单第一次加载我设置时`ActiveStock`，我看到 setter 和 getter 都被调用并且 ui 被更新以正确反映数据。
但是，当我稍后设置`StockViewModel.ActiveStoc`k 时，`FirePropertyChanged`会调用但我没有看到 getter 被调用，因此 UI 不会更新以反映新数据。有什么想法可能在这里发生吗？

我的第二个问题是我是否还需要在更改时为模型`PropertyChanged`的子属性（`PriceData`和`CompanyData`）提出`ViewModel.ActiveStock`？

```
public class Stock
{
    public string Ticker { get; set; }
    public StockData PriceData { get; set; }
    public StockData CompanyData { get; set; }
}
public class StockData
{
    ...
}
public class StockViewModel:INotifyPropertyChanged
{
    private Stock _activeStock;
    public Stock ActiveStock
    {
        get{ return _activeStock;}
        set{ _activeStock = value; FirePropertyChanged("ActiveStock");}
    }
    ...
} 
```

XAML：

```
<UserControl Template="{StaticResource StockTemplate}" DataContext="{Binding ActiveStock}" Tag="{Binding PriceData}" />
<UserControl Template="{StaticResource StockTemplate}" DataContext="{Binding ActiveStock}" Tag="{Binding CompanyData}" /> 
```

编辑：如果我删除 UserControl 的 DataContext 绑定，而是在 ActiveStock 更改时在代码中为这两个控件设置 DataContext，它工作正常。为什么？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T23:27:43.200

您可能想尝试在数据上下文绑定上指定模式属性。

```
DataContext="{Binding ActiveStock, Mode=OneWay}" 
```

我不确定 OneTime 是 DataContext 的默认绑定，但如果以上有帮助，它会解释。

sa_ddam213 已经回答了第二个问题。

高温高压

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T23:21:35.333

没有调用getter，因为据我所知，没有什么是“获取”值，唯一使用的属性是`PriceData`并且`CompanyData`这些不使用`INotifyPropertyChanged`

您必须`INotifyPropertyChanged`在您的`Stock`班级上实施`UI`以反映更改。

```
public class Stock : INotifyPropertyChanged
{
    private string _ticker;
    private StockData _priceData;
    private StockData _companyData;

    public string Ticker
    {
        get { return _ticker; }
        set { _ticker = value; NotifyPropertyChanged("Ticker"); }
    }

    public StockData PriceData
    {
        get { return _priceData; }
        set { _priceData = value; NotifyPropertyChanged("PriceData"); }
    }

    public StockData CompanyData
    {
        get { return _companyData; }
        set { _companyData = value; NotifyPropertyChanged("CompanyData"); }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
} 
```

# c++ - c++如何释放内存*char？

> ID：14927243
> 
> 赞同：-2
> 
> 时间：2013-02-17T23:11:02.717
> 
> 标签：c++, memory, char, free

如何使用这样的东西释放内存（Visual Studio 2008 - Win32/console）：

我只能包括：iostream

```
#include <iostream>

void data_t(char *test[])
{
    test[0] = new char[];
    test[1] = new char[];
    test[0] = "Test1";
    test[1] = "Test2";
}

int main()
{
    char *test[2];
    data_t(test);
    cout<<test[0]<<"\n";
    cout<<test[1]<<"\n";
    delete[] test[0];//Debug assertion failed! - The program '[7884] Zadanie_4_sortowanie.exe: Native' has exited with code 3 (0x3).
    delete[] test[1];
} 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T23:12:22.010

`char[]`是不完整的类型，不能在`new`表达式中使用。您需要实际决定数组大小，例如：

```
char * p = new char[200]; 
```

然后你可以说`delete[] p;`你什么时候完成。

您将需要`strcpy`将数据复制*到*`char`数组中之类的东西。您编写的分配仅覆盖指针，从而丢失动态分配的跟踪（即泄漏）。（事实上​​，如果你只想要固定的字符串，你可能根本不需要动态分配，所以只需删除其中带有`new`和的行`delete`。）

* * *

但是，您真正想要的是 a `std::array<std::string, 2>`，但是：

```
#include <array>
#include <string>
#include <iostream>

std::array<std::string, 2> test =  { "Test1", "Test2" };
std::cout << test[0] << "\n" << test[1] << "\n"; 
```

或者通过引用传递它：

```
void populate(std::array<std::string, 2> & a)
{
    a[0] = "Test1";
    a[1] = "Test2";
}

int main()
{
    std::array<std::string, 2> test;
    populate(test);
    // print ...
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-17T23:13:31.040

test[0] 包含一个指向静态字符串“Test1”的指针，它不能被释放。使用 strcpy 复制 C 字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T23:33:03.070

由于您的程序在运行时使用“Test1”和“Test2”（它们由 cout 打印），编译器必须将它们保存在某处。它通过将它们都放入您的可执行文件来做到这一点。

由于它们都已经在您的可执行文件中，因此没有理由分配任何新内存。因此，您可以删除 data_t 中的前两行。

如果你这样做，你会得到一个编译器错误，虽然这个错误应该已经存在，它会抱怨你试图将一个字符串文字（“Test1”，“Test2”）分配给一个非常量数组。

这里的问题是编译器保存到可执行文件中的字符串不能被修改。您只是在打印它们，但 data_t 不知道。要解决问题，您应该使用`const char *`而不是`char *`

如果您打算修改这些字符串，则需要分配新内存并将字符串复制到其中。

# css - 自定义 CSS，无法对齐图像滚动条

> ID：14927244
> 
> 赞同：1
> 
> 时间：2013-02-17T23:11:20.967
> 
> 标签：css, image, wordpress, scroll

[http://www.shaunhillphotography.co.uk/](http://www.shaunhillphotography.co.uk/)

我的首页上有一个图像滚动条，我希望它跨越空白区域的宽度。我早些时候让它工作，但在调整客户 CSS 时意外删除了代码。

它看起来与以下内容有关：#riva-slider{ }

我不知道我需要放入什么才能使定位正确。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T23:23:50.037

尝试在您的 CSS 文件中添加：

```
#riva-slider-1-shell {
    overflow: hidden; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T00:15:33.367

您可以尝试增加外壳的宽度并使用 margin-left 将其推到空白的边缘。

```
#riva-slider-1-shell {
    width: 1000px;
    margin-left: -25px;
} 
```

# ruby - 如何使用正则表达式在 Ruby 中检测具有特殊字符的文本？

> ID：14927251
> 
> 赞同：0
> 
> 时间：2013-02-17T23:12:04.880
> 
> 标签：ruby, regex

在 Ruby 中，我想检测诸如“feed”或“f”之类的关键字，后跟空格或特殊字符。

我做了类似的事情：

```
if m = (/\A(feedback|feed|f)\s*([A-Za-z0-9_#;\s\?@&'"()]*)\z/i.match(command))
  puts m[2]
end 
```

但是，这并没有按预期工作。匹配这些关键字的最佳正则表达式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T23:45:50.230

我的建议

```
/\Af(eed(back)?)?\W+\z/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T23:35:53.013

这应该可以匹配关键字之后的任何内容：

```
/\A(feedback|feed|f)(.*)\z/ 
```

# javascript - JavaScript 样式注释必须在脚本标签之间进行吗？

> ID：14927252
> 
> 赞同：0
> 
> 时间：2013-02-17T23:12:06.123
> 
> 标签：javascript

我是 JavaScript 新手，可以对在 html 文件中放置 JavaScript 注释的适当方式进行一些说明。我花了一些时间在网上查找这个，但我只能找到关于如何在 JavaScript 中评论的说明，而不是在哪里评论。我知道脚本标签中的注释很好（只要它们不过分）。我的问题是是否可以将 JavaScript 注释放在脚本元素之前。我想知道它在语法上是否可以，以及它是否可以接受的专业实践。

例子：

```
 // Added link to external js for TUT 1 Case 3
 <script type="text/javascript" src="../Data Files for Text/Tutorial.01/case3/functions.js"></script> 
```

这是可以接受的，还是我应该在脚本之外使用 html 注释，因为这是在 html 文件中？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T23:13:49.257

*   如果您使用标记语言（例如 HTML），请使用标记注释。
*   如果您在`<script>`标签中，请使用脚本注释。
*   如果您在`<style>`标签中，请使用样式注释。

例子：

```
<!--
  HTML comment
  (multi-line)
-->

<script type="text/javascript">
// script comment

/*
  script comment
  (multi-line)
*/
</script>

<style type="text/css">
/*
  style comment
  (multi-line)
*/
</style> 
```

# php - jquery fadeOut 表现不佳

> ID：14927255
> 
> 赞同：1
> 
> 时间：2013-02-17T23:12:23.800
> 
> 标签：php, fadein, fadeout, attr

虽然有很多线程处理 FadeIn/FadeOut，但我相信我在使用这些有些独特的功能时遇到了问题。我很难相信它可能是带宽，但如果它在@localhost 上完美运行并且在网上不太好（10mbs 帐户@Comcast），那么我不太确定该怎么做。

好的。简而言之，数据库通过 PHP gd_library 提供了一堆缩略图。有一个带有 id="placeholder" 的 450px 占位符图像的 div

```
<p class="placeholderContainer"><img id="placeholder" 
src="product_getimage.php?path='.$path.'&amp;size='.$size.'" border="0" alt="" /></p> 
```

大拇指以这种形式被循环吐出

```
<a href="../images/products/'.$catNAME.'/'.$imgLOC.'/'.$imgName.'" 
title="'.$imgTitle.'"><img src="product_getimage.php?path='.$pathT.'&
amp;size='.$sizeT.'" border="1" id="'.$imgName.'" alt="" /></a> 
```

所有非常简单的东西。你可以在@transparentcable.com 看到它。单击产品按钮，然后单击音频电缆。左侧边栏是链接列表。单击其中任何一个，产品将加载到上述配置中。

现在这里是用于在拇指上运行简单点击事件的 jquery（在源代码中就可以了）

```
$(document).ready(function() {
 $('#prod-thumbs a img').click(function() {
  var selImg = $(this).attr('id');
  var imagePath = "../images/products/<?php echo strtolower($catNAME);?>/<?php echo 
  $imgLOC; ?>/";
  var finalImg = imagePath + '/' + selImg;
  $('img#placeholder').fadeOut(500, function() {
   $('#placeholder').fadeIn(300).attr({src:finalImg});
   });
 return false;
 });
}); 
```

从本质上讲，它只是多年前更改图像 src 的旧 javascript 图像交换的一种变体。这里也一样。

除了，在这种情况下，fadeOut 做了它的事情，但占位符图像仍然存在，然后当 fadeIn 函数运行时它很快被替换。就像我说的，在 WAMP 系统上的办公室里工作完美，但在网上有那个讨厌的小绊脚石。

源代码中的所有内容都非常可见，欢迎提出任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T23:35:42.217

我认为 Marc B 在这里是正确的。你有没有尝试过：

```
$('#placeholder').attr({src:finalImg});
$('#placeholder').fadeIn(300); 
```

?

# python - 中国邮递员的算法，其中一些边缘是可选的

> ID：14927256
> 
> 赞同：2
> 
> 时间：2013-02-17T23:12:26.000
> 
> 标签：python, python-3.x, algorithm, graph-algorithm, chinese-postman

我有一个图，其中包含必须访问的边，以及可选的边。边缘具有不同的重量，可以在任一方向上移动，并且可以根据需要多次移动。我正在尝试确定最小化总重量的路线。

据我了解，中国邮递员问题处理的图必须至少访问一次图的每条边。谁能告诉我上面描述的变体是否有一个“名称”或指出我可能处理解决这种类型图的算法的方向？

我正在尝试用 Python 编写一个解决方案，所以任何使用它的解决方案都会很棒，否则我相信我将能够完成一个解决方案。

# javascript - 使用Json 向谷歌地图添加标记| API

> ID：14927258
> 
> 赞同：6
> 
> 时间：2013-02-17T23:12:49.420
> 
> 标签：javascript, json, google-maps, google-maps-api-3, getjson

我正在尝试使用来自 Json 响应的数据在谷歌地图上绘制标记。我整天都在 Stack Overflow 上寻找答案，但没有找到适合我的解决方案。

我猜这与我提取 Lat & Lng 的方式有关，但我无法理解它。下面是我的代码和 Json，Json 来自 API。

我的代码中的错误在哪里？

## 脚本

```
<script>   
  function initialize() {
              var myOptions = {
                  zoom: 4,
                  center: new google.maps.LatLng(34.397, 150.644),
                  mapTypeId: google.maps.MapTypeId.ROADMAP
              };

              map = new google.maps.Map(document.getElementById("map"), myOptions);
              };

  function getLocations() {

      $.getJSON("URL", function (json) {

          $.each(json["resultsPage"]["results"]["event"], function(i, entry){
              addMarker(entry.location.lat,entry.location.lng);
          });
      });
  }

  function addMarker(lat,lng) {
          marker = new google.maps.Marker({
          position: new google.maps.LatLng(lat,lng),
          map: map,
          });
          markersArray.push(marker);
  }
  </script> 
```

## json响应

被告知使用以下代码请求 Json 数据。如果我在最后留下问号，当我通过[http://jsonlint.com](http://jsonlint.com)运行它时会收到一条无效消息，因为 Json 的开头有一个问号。把它拿出来似乎可以解决问题，但我不是 100% 确定这样可以吗？

```
 $.getJSON("http://api.songkick.com/api/3.0/events.json?location=clientip&apikey={your_api_key}&jsoncallback=?",
    function(data){
    // data is JSON response object
    }); 
```

如果我在最后留下问号，当我通过[http://jsonlint.com](http://jsonlint.com)运行它时会收到一条无效消息，因为 Json 的开头有一个问号。把它拿出来似乎可以解决问题，但我不是 100% 确定这样可以吗？

当我在调试器中查看代码时，我得到“SyntaxError: Unexpected token ':'”，但这个响应来自 API，所以我不确定我能做些什么？

```
 {
    "resultsPage": {
    "status": "ok",
    "results": {
        "event": [
            {
                "type": "Concert",
                "status": "ok",
                "performance": [
                    {
                        "artist": {
                            "displayName": "Arcade Fire",
                            "uri": "http://www.songkick.com/artists/66758-arcade-fire?utm_source=16289&utm_medium=partner",
                            "identifier": [
                                {
                                    "mbid": "52074ba6-e495-4ef3-9bb4-0703888a9f68",
                                    "href": "http://api.songkick.com/api/3.0/artists/mbid:52074ba6-e495-4ef3-9bb4-0703888a9f68.json"
                                }
                            ],
                            "id": 66758
                        },
                        "billingIndex": 1,
                        "billing": "headline",
                        "displayName": "Arcade Fire",
                        "id": 29913729
                    },
                    {
                        "artist": {
                            "displayName": "Doody and Kami",
                            "uri": "http://www.songkick.com/artists/6334389-doody-and-kami?utm_source=16289&utm_medium=partner",
                            "identifier": [],
                            "id": 6334389
                        },
                        "billingIndex": 2,
                        "billing": "support",
                        "displayName": "Doody and Kami",
                        "id": 29913734
                    },
                    {
                        "artist": {
                            "displayName": "Leah Gordon",
                            "uri": "http://www.songkick.com/artists/6334394-leah-gordon?utm_source=16289&utm_medium=partner",
                            "identifier": [],
                            "id": 6334394
                        },
                        "billingIndex": 3,
                        "billing": "support",
                        "displayName": "Leah Gordon",
                        "id": 29913739
                    }
                ],
                "venue": {
                    "metroArea": {
                        "country": {
                            "displayName": "Canada"
                        },
                        "state": {
                            "displayName": "QC"
                        },
                        "displayName": "Montreal",
                        "uri": "http://www.songkick.com/metro_areas/27377-canada-montreal?utm_source=16289&utm_medium=partner",
                        "id": 27377
                    },
                    "lat": 45.5014288,
                    "displayName": "Phi Center",
                    "lng": -73.5564459,
                    "uri": "http://www.songkick.com/venues/1973969-phi-center?utm_source=16289&utm_medium=partner",
                    "id": 1973969
                },
                "popularity": 0,
                "location": {
                    "lat": 45.5014288,
                    "lng": -73.5564459,
                    "city": "Montreal, QC, Canada"
                },
                "start": {
                    "time": null,
                    "date": "2013-02-23",
                    "datetime": null
                },
                "displayName": "Arcade Fire with Doody and Kami and Leah Gordon at Phi Center (February 23, 2013)",
                "uri": "http://www.songkick.com/concerts/15215934-arcade-fire-at-phi-center?utm_source=16289&utm_medium=partner",
                "id": 15215934
            }
        ]
    },
    "perPage": 50,
    "page": 1,
    "totalEntries": 1
    }
    } 
```

任何帮助将不胜感激。谢谢

## 更新

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T10:56:42.937

能够重现您的错误。

您正在使用的 API 不支持回调。您需要创建一个代理，并且必须从您的代码中访问代理，您的代理将依次调用 api。

这是代码

索引.html

```
 function getLocations() {
            $.ajax({
                type: "GET",
                url: "http://172.20.6.114/ontrack/data.php?callback=?",
                dataType: "jsonp",
                success: function(json){
                    $.each(json["resultsPage"]["results"]["event"], function(i, entry){
                        PlotMarker(entry.location.lat, entry.location.lng);
                    });
                },
                error: function(err){
                    console.log(err);
                }
            });
        }

        function PlotMarker(lat, lon){
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lon),
                map: gmap,
                draggable: false,
                animation: google.maps.Animation.DROP
            });
            markerLocations.push(marker);
        } 
```

data.php 的代码

```
<?
$ch = curl_init();

curl_setopt($ch, CURLOPT_URL,"http://api.songkick.com/api/3.0/events.json?location=clientip&apikey={your_api_key}");

// receive server response ...
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$server_output = curl_exec($ch);

curl_close($ch);

echo $_GET['callback'] . '(' . $server_output . ');';
?> 
```

然后它就会出现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T23:42:27.930

您`json`的无效，`"resultsPage:" {`应该是`"resultsPage" : {`，冒号在双引号内，您可以`json`使用[jsonlint.com](http://jsonlint.com/)验证您的。这是一个使用在控制台中打印的有效（已编辑）的[示例。](http://jsfiddle.net/5m7Kw/)`json``lat, lng`

来自的无效 json 错误`jsonlint.com`

![在此处输入图像描述](../Images/b9dd0c2f7beb2c1655998524d761de4e.png)

**更新：**你也可以试试这个（检查）

```
function myCallBack(data){
    console.log(data);
}
<script type="text/javascript" src="http://api.songkick.com/api/3.0/events.json?location=clientip&apikey={your_api_key}&jsoncallback=myCallBack"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T08:52:10.800

可以`&jsoncallback=?` **安全删除**

以下是我对此的看法：

如果您使用以下代码：

```
$.getJSON("http://api.songkick.com/api/3.0/events.json?location=clientip&apikey={your_api_key}&jsoncallback=?",
    function(data){
    // data is JSON response object
    }); 
```

然后，您不需要（可能）json 回调，因为您已经在逗号之后使用了一个回调（`getJSON`函数的第二个参数）。

因此，您可以简单地从您的 URL**中删除**`&jsoncallback=?`并使其`http://api.songkick.com/api/3.0/events.json?location=clientip&apikey={your_api_key}`

这是发生了什么 -

-- 为了方便 JSONP（和跨域 AJAX 请求），您正在向`callback`URL 发送一个函数

-- 服务器然后读取`jsoncallback=XYZ`并返回**包装在** `XYZ`函数调用中的数据

-- 这样您就可以`XYZ`在 JavaScript 中定义函数，如下所示：

```
function XYZ(jsonDATA) {
    // ... And do things Here. JSONP is cool !    
} 
```

-- 但是由于你已经有一个函数回调`getJSON`函数，你不需要`&jsoncallback=something`它，因此可以删除它

**PS**：作为上述证明，尝试`http://api.songkick.com/api/3.0/events.json?location=clientip&apikey={your_api_key}&jsoncallback=MyFunction`在浏览器中点击 URL，您将在一行中收到以下响应：

```
MyFunction({
    "resultsPage": {
        "status": "error",
        "error": {
            "message": "Invalid or missing apikey"
        }
    }
}) 
```

更新：
为了解决您在评论中的 JavaScript 错误——
即使响应是有效的`JSON`，您也将响应用作`JavaScript`代码，这是**无效的**

`JavaScript`如果你这样做， 这将是一个有效的代码：

```
var myData = {
    "resultsPage": {
        "status": "error",
        "error": {
            "message": "Invalid or missing apikey"
        }
    }
} 
```

但我的意思是，你为什么要用这个 JSON 数据检查控制台错误？控制台适用于`JavaScript`

# cordova - Phonegap和Phonegap Build之间的区别？

> ID：14927259
> 
> 赞同：5
> 
> 时间：2013-02-17T23:12:55.240
> 
> 标签：cordova, mobile, phonegap-build

如果有的话有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T23:17:32.020

Phonegap Build 是“在云中”，可以轻松地一次构建所有目标。您只需将 html/css/js 上传到一个 zip 文件中，他们就会在所有支持的平台上构建它。然后，您可以将生成的二进制文件上传到相应的应用商店。

Phonegap 在您的桌面上运行，您需要拥有您要编译的环境的开发工具。因此，对于 iOS，您需要安装 XCode。这允许以更高的复杂性为代价进行更多的配置控制和对插件的更多访问。

# ruby-on-rails - 具有数百万数据行的表的 Rails 应用程序中的分段错误

> ID：14927260
> 
> 赞同：-1
> 
> 时间：2013-02-17T23:13:03.290
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, segmentation-fault

我正在开发一个 Rails 应用程序，在该应用程序中填充了一个包含 400 万数据行的表。当我尝试在我的视图中显示页面时，显示没有数据！从服务器日志我可以看到错误：

```
/Users/Rakib/.rvm/gems/ruby-1.9.3-p286@rails328/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:607: [BUG] Segmentation fault 
```

它在末尾显示以下消息：

```
[NOTE]
You may have encountered a bug in the Ruby interpreter or extension libraries.
Bug reports are welcome.
For details: http://www.ruby-lang.org/bugreport.html

Abort trap: 6 
```

我用更少的数据尝试了同一张表，然后它工作得很好。这是因为单个表中有大量数据吗？我怎么解决这个问题？任何形式的帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T23:34:23.830

您很可能内存不足。

与其一次加载所有数百万行，不如以块的形式加载它们并将它们复制到目的地，丢弃该块，加载下一个块，然后重复。

您可以使用 PostgreSQL[游标](http://www.postgresql.org/docs/current/static/sql-declare.html)和[命令](http://www.postgresql.org/docs/current/static/sql-fetch.html)[来`FETCH`](http://www.postgresql.org/docs/current/static/sql-fetch.html)执行此操作。一些客户端库在遍历结果集时可以使用协议级游标；不知道Ruby的`Pg`gem能不能。

如果您使用 ActiveRecord，请重新考虑。在批量事务中管理数百万行并不是一种明智的方式。如果可能，请使用较低级别的 SQL 操作。

# list - 在Scala中反转List [String]中的每个元素

> ID：14927268
> 
> 赞同：1
> 
> 时间：2013-02-17T23:14:09.437
> 
> 标签：list, scala, foreach

我还在学习基础知识，我有一个问题。

我有一个功能

```
def reverse(s: String): String = {
  s.reverse
} 
```

现在我有一个 List[String] 并且我想反转每个 String 元素。我试过foreach，但它似乎返回Unit，而不是String。所以，我想要一个具有相同元素的 List[String]，但字符串颠倒了。

List(abcd, efgh) 变为 List(dcba, hgfe)。

我现在拥有的：

```
def reverse(ls : List[String]):List[String] = {
  List(ls.foreach (reverse))
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T23:16:21.517

使用地图方法：

```
List("abcd", "efgh").map(s => reverse(s)) 
```

或者简单地说：

```
List("abcd", "efgh").map(reverse) 
```

不像 foreach 在这里是为了副作用（比如打印出来），map*确实*返回结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:49:41.213

尝试这个，

```
List("abcd", "efgh").reverse 
```

# java - 基于搜索字段将条目从 MySQL 加载到 Java 表中

> ID：14927269
> 
> 赞同：0
> 
> 时间：2013-02-17T23:14:10.997
> 
> 标签：java, mysql, search

我有一个 MySQL 表，其中已经包含条目，并且我将它连接到我的 Java 程序，因此它在程序运行时显示表值。我基本上是在尝试实现一个搜索字段，用户可以在其中键入任何属性的值，并且与该值匹配的所有条目都将加载到表中。然后用户将能够选择匹配的正确条目，并且他们可以编辑或更新该条目的信息。这对我很有用，特别是当您有具有相同值的条目时，例如名字、姓氏或邮政编码。

```
try {
        String sql = "SELECT * FROM donors WHERE donor_id = ?";
        ps = conn.prepareStatement(sql);
        ps.setString(1, txtSearch1.getText());
        rs = ps.executeQuery();
        tblDonors.setModel(DbUtils.resultSetToTableModel(rs));
    } catch (Exception e) {
        JOptionPane.showMessageDialog(null, e);
    } 

    try {
        String sql = "SELECT * FROM donors WHERE first_name = ?";
        ps = conn.prepareStatement(sql);
        ps.setString(1, txtSearch1.getText());
        rs = ps.executeQuery();
        tblDonors.setModel(DbUtils.resultSetToTableModel(rs));
    } catch (Exception e) {
        JOptionPane.showMessageDialog(null, e);
    } 
```

搜索字段只搜索第二个查询，而不是第一个，所以我可以输入一个名称，匹配的名称将加载到表中，但是当我尝试输入一个 ID 号时，什么也没有发生。我对此很陌生，但我认为这与我的结果集对象有关？虽然不完全确定。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T23:20:27.387

这里发生的是第二个结果覆盖了第一个结果。我认为最简单的解决方案是`or`在 where 子句中使用，如下所示：

```
String sql = "SELECT * FROM donors WHERE (donor_id = ?) or (first_name = ?)";
ps.setString(1, txtSearch1.getText());
// but of course there are 2 ?'s now, we have to give the value to the second one
// as well
ps.setString(2, txtSearch1.getText()); 
```

由于占位符在 JDBC 中的工作方式，您必须为每个`?`.

# ruby-on-rails - 茉莉花电话是如何工作的？

> ID：14927271
> 
> 赞同：1
> 
> 时间：2013-02-17T23:14:22.677
> 
> 标签：ruby-on-rails, jasmine

在`261 Testing JavaScript with Jasmine` [railscasts.com](http://railscasts.com/episodes/261-testing-javascript-with-jasmine-revised) Rayan 调用`jasmine`这样的测试

> 本地主机：3000/茉莉花

我不明白茉莉花行动在哪里出现。我检查了`routes.rb`其他文件，但找不到`jasmine`定义操作的位置

动作如何`jasmine`调用 javascript 测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:17:07.317

您提到的 railscast 剧集使用[jasminerice gem](https://github.com/bradphelan/jasminerice/)，这是一个提供“/jasmine”路由和控制器的rails引擎。

如果您查看 jasminerice 源，则[此文件](https://github.com/bradphelan/jasminerice/blob/master/lib/jasminerice.rb#L8)是 rails 引擎安装在“/jasmine”的位置。[这个文件](https://github.com/bradphelan/jasminerice/blob/master/config/routes.rb)提供了 rails 引擎的路由，[这个](https://github.com/bradphelan/jasminerice/blob/master/app/controllers/jasminerice/spec_controller.rb)是主路由调用的控制器。

# html - 删除行/列之间的空格/边框

> ID：14927276
> 
> 赞同：0
> 
> 时间：2013-02-17T23:15:40.357
> 
> 标签：html, css, html-table

附件是我制作的 HTML 表格的屏幕截图。我使用一些简单的 css 将表格单元格着色为那种颜色......页面背景是蓝色，看起来像是它们之间的某种边界。如何删除单元格之间的边框/空间？

![在此处输入图像描述](../Images/38668f9a3c283405407530ebae634ebd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T23:17:36.143

选项1

```
<table cellspacing="0"> 
```

选项 2

```
/* CSS */
table {
     border-collapse: collapse;
} 
```

# nasm - 什么是标签地址？

> ID：14927277
> 
> 赞同：0
> 
> 时间：2013-02-17T23:15:58.827
> 
> 标签：nasm

我在文档中找不到标签的确切实现（不在现代程序集中）它指向哪里？我想到的是第一条指令的地址，例如：

```
global _start
section .text
_start:
    call exit
exit:
    mov eax,1
    mov ebx,20
    int 0x80

section .data
list:
    dd exit 
```

不`list`应该与`exit`标签第一次看到的地址相同吗？我想做这样的事情：

```
mov eax,list
call eax 
```

这是一种尝试在汇编中制作类似函数指针的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:31:53.027

标签只是一个助记符，指的是标签后第一条指令的地址。eg`exit:`指向`mov eax,1`物理存在于 ram 中的任何位置。

# prolog - 当它是单词final时删除'e'

> ID：14927283
> 
> 赞同：1
> 
> 时间：2013-02-17T23:17:19.880
> 
> 标签：prolog

谁能帮我删除列表的最后一个“e”？我有一个数据集：

```
lemma([c,h,a,s,e],[vb,t]).
lemma([e,a,t],[vb,t]).
lemma([l,i,k,e],[vb,t]).
lemma([d,i,e],[vb,i]).
lemma([s,n,e,e,z,e],[vb,i]). 
```

我的代码是：

```
q0(Token,[vb,_]) :-
   lemma(Lemma,[vb,_]),
   delete_last(Lemma,New_Lemma),
   suffix(Sff),
   append(New_Lemma,Sff,Token).

delete_last(Lemma,New_Lemma) :-
   append(New_Lemma,[_],Lemma).

suffix([e,r]). 
```

到目前为止，我的代码删除了列表的最后一个元素，这对于数据库中的任何引理都很好，除了引理 [e,a,t]。我如何让 Prolog 理解在它的单词 final 时只删除'e'？

任何帮助我解决这个问题的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T06:43:20.107

您可以使用条件，*省略*引理' last 和 suffix' first

```
q0(Token,[vb,_]) :-
   lemma(Lemma,[vb,_]),
   suffix([X|Xs]),
   (  last(Lemma, X)
   -> append(Lemma, Xs, Token)
   ;  append(Lemma, [X|Xs], Token)
   ). 
```

测试

```
?- q0(T, [vb,_]).
T = [c, h, a, s, e, r] ;
T = [e, a, t, e, r] ;
T = [l, i, k, e, r] ;
T = [d, i, e, r] ;
T = [s, n, e, e, z, e, r]. 
```

# sqlite - 在sqlite中加入选择减法的奇数/偶数结果？

> ID：14927284
> 
> 赞同：0
> 
> 时间：2013-02-17T23:17:23.107
> 
> 标签：sqlite

我有一个包含开始/停止时间戳的 sqlite 表。我想创建一个从那里返回总经过时间的查询。

现在我有一个 SELECT （例如`SELECT t,type FROM event WHERE t>0 AND (name='start' or name='stop) and eventId=xxx ORDER BY t`），它返回一个看起来像这样的表：

```
+---+-----+
|t  |type |
+---+-----+
|  1|start|
| 20|stop |
|100|start|
|150|stop |
+---+-----+ 
```

在上述示例中生成总经过时间将通过以下方式完成`(20-1)+(150-100) = 69`

我的一个想法是：我可以运行两个单独的查询，一个用于“开始”字段，一个用于“停止”字段，假设它们总是像这样排列：

```
+---+---+
|(1)|(2)|
+---+---+
|  1| 20|
|100|150|
+---+---+

(1) SELECT t FROM EVENT where name='start' ORDER BY t
(2) SELECT t FROM EVENT where name='stop' ORDER BY t 
```

然后将差异相加很简单（我认为！）。唯一的问题是，我不知道我是否可以像这样连接两个单独的查询：我熟悉将每一行与其他行结合起来的连接，然后消除那些不符合某些条件的连接。在这种情况下，标准是行索引相同，但这不是数据库字段，它是两个单独选择的输出中结果行的顺序 - 我没有任何数据库字段可以用来确定这一点。

或者也许还有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:06:29.703

我不使用 SQLite，但这可能有效。让我知道。

```
SELECT SUM(CASE WHEN type = 'stop' THEN t ELSE -t END) FROM event 
```

这假设 type 中的唯一值是 start/stop。

# asp.net-mvc - 从 MVC 项目中的控制器访问服务层

> ID：14927285
> 
> 赞同：1
> 
> 时间：2013-02-17T23:17:25.877
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我以前有一个控制器，它的代码如下：

```
public ActionResult Method(int Id)
        {
            var foo = doThis(Id)
            return View("Error");
        } 
```

doThis() 是一个存在于控制器中的方法，它执行一些逻辑。我现在正试图将所有业务逻辑重新定位到包含一堆类的服务项目。

首先，我添加了一个类库 Project.Services，然后添加了一个 FooServices 类，其中包含以下内容：

```
namespace Project.Services
{
    class FooServices
    {
        public List<Bar> doThis(int Id)
        {
            //Do stuff
            return parentSets;
        }
    }
} 
```

我已经从我的 MVC 项目中添加了对这个项目的引用，并从这个 Services 项目中添加了对我的数据模型项目的引用，但我现在不知道如何继续。如何从控制器访问这些方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T23:20:34.547

> 如何从控制器访问这些方法？

为了访问实例方法，您需要一个对象实例：

```
public ActionResult Method(int Id)
{
    var foo = new FooServices().doThis(Id)
    return View("Error");
} 
```

当然，通过这样做，您现在将您的控制器逻辑与您的服务的特定实现强耦合，这使得孤立地对您的控制器进行单元测试非常困难。

因此，要削弱耦合，首先要引入一个抽象：

```
public interface IFooServices
{
    List<Bar> DoThis(int id)
} 
```

然后让你的服务层实现这个接口：

```
public class FooServices: IFooServices
{
    public List<Bar> DoThis(int id)
    {
        //Do stuff
        return parentSets;
    }
} 
```

好的，现在你的控制器可以使用这个抽象了：

```
public class HomeController: Controller
{
    private readonly IFooServices service;
    public HomeController(IFooServices service)
    {
        this.sevrice = service;
    }

    public ActionResult Method(int id)
    {
        var foo = this.service.DoThis(id)
        return View("Error");
    }
} 
```

太好了，在这个阶段，我们的控制器和服务层之间的耦合确实很弱。现在剩下的就是配置您最喜欢的依赖注入框架，以将特定服务注入您的控制器。

# java - Liquibase导致java堆空间致命错误

> ID：14927288
> 
> 赞同：1
> 
> 时间：2013-02-17T23:17:35.477
> 
> 标签：java, maven, memory, runtime-error, liquibase

我运行的命令：

```
mvn liquibase:updateSQL -P MyProject -Dusername=MyUser -Dpassword=password 
-Ddb_name=$(DB_NAME) -Duser_password=$(USERPASSWORD) -Dvarchar=nvarchar 
-Dnumber=numeric -Dchar=nchar -Ddate=datetime -Dtimestamp=datetime 
-Dclob=nvarchar(max) -Dlong=nvarchar(max) -Dblob=varbinary(max) -Draw=varbinary 
-Dsysdate=GETDATE() -Dsubstring_function=substring -Dfrom_dual_clause= 
-Dconcat=+ -Disnull=isnull 
```

这是我第一次处理 liquibase 问题。这是堆栈跟踪，我应该如何调试呢？ ![在此处输入图像描述](../Images/b0117934353030be4f88858495aa8810.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T04:41:58.543

尝试将 -Xmx 标志设置为更高的值。默认情况下，Java 使用固定数量的内存 (64MB) 运行，这对于您正在运行的程序来说太小了（因此出现 OutOfMemoryError）。

# jquery - .get 试图捕捉长度并附加到元素

> ID：14927290
> 
> 赞同：0
> 
> 时间：2013-02-17T23:17:38.467
> 
> 标签：jquery, get

```
$('.statused tr .tcr').after('<td class="tc2"><span class="views">0</span> Users  Viewing</td>');
  var href = $('.statused .hierarchy a.forumtitle').attr('href');
    $.get(href , function(data) { 
         var elem = $(data);
         var count = $('.listeduser a').length;
       $('.views').html(elem.find());
     }, 'html'); 
```

好的，如您所见，我正在尝试获取`length`每个 href 上的 a href。我只是不知道如何写最后一点`$('.views').html(elem.find());`我想这一点真的让我感到困惑。我有一个简单的标记

[http://jsbin.com/ijidob/1/](http://jsbin.com/ijidob/1/)

那里更容易看到。我只需要计算每个 tr 的每个 href。

有人知道如何修复最后一行以正确运行代码吗？

# google-maps-api-3 - Google Maps Styled (API) - 使用 javascript

> ID：14927294
> 
> 赞同：0
> 
> 时间：2013-02-17T23:18:44.580
> 
> 标签：google-maps-api-3, google-fusion-tables

我正在尝试应用此向导中的代码[http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html)

例如：

```
[
  {
    "elementType": "geometry",
    "stylers": [
      { "hue": "#00ccff" },
      { "visibility": "simplified" }
    ]
  }
] 
```

在[这段](http://jsbin.com/amodur/7/edit)代码中

有人愿意帮忙吗？我真的不知道继续进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T00:27:01.330

将问题中的示例数组传递给`styles`map 的 -option ：

```
       地图 = 新 google.maps.Map(document.getElementById('map-canvas'), {
          中心：新 google.maps.LatLng(48.70727541512677,
                                         20.578157256250062),
          缩放：7，
          风格：[
  {
    "elementType": "几何",
    “造型师”：[
      {“色调”：“#00ccff”}，
      {“可见性”：“简化”}
    ]
  }
],
          泛控制：假，
    缩放控制：真，
    缩放控制选项：{
      风格：google.maps.ZoomControlStyle.SMALL
    },
        街景控制：假，
        地图类型控制：真，
    地图类型控制选项：{
      样式：google.maps.MapTypeControlStyle.DROPDOWN_MENU，

```
},

      mapTypeId: google.maps.MapTypeId.ROADMAP 
```

});

[http://jsbin.com/owaxas/1/edit](http://jsbin.com/owaxas/1/edit)
```

# java - 通过单击位置从 JList 中获取组件

> ID：14927298
> 
> 赞同：6
> 
> 时间：2013-02-17T23:18:58.747
> 
> 标签：java, swing, location, selection, jlist

如何`JList`使用单击位置从 a 中获取组件？

我有自己的列表单元格渲染器，可以在其中插入一些面板和标签。现在我想获取例如用户点击的标签。

我尝试了该方法`list.getComponentAt(evt.getPoint());`，但它只返回整个`JList`.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-17T23:31:15.477

我没有测试过这个，但基础知识是......

1.  用于`JList#locationToIndex(Point)`获取给定点的元素索引。
2.  获取指定索引处的“元素”（使用 `JList#getModel#getElementAt(int)`）。
3.  获取`ListCellRenderer`使用`JList#getCellRenderer`.
4.  渲染元素并获取它的`Component`表示
5.  将渲染器的边界设置为所需的单元格边界
6.  将原始转换`Point`为`Component`s 上下文
7.  `getComponentAt`在渲染器上使用...

可能，诸如...

```
int index = list.locationToIndex(p);
Object value = list.getModel().getElementAt(int);
Component comp = listCellRenderer.getListCellRendererComponent(list, value, index, true, true);
comp.setBounds(list.getCellBounds(index, index));
Point contextPoint = SwingUtilities.convertPoint(list, p, comp);
Component child = comp.getComponentAt(contextPoint); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-21T12:18:12.157

只要用户不在单元格外部单击，MadProgrammer 就可以正常工作。如果他这样做，则 locationToIndex() 返回的索引将是最后一个索引的单元格，因此转换后的点将位于渲染组件的“下方”

要检查用户是否真的点击了一个单元格，你必须这样做：

```
int index = list.locationToIndex(p);
if (index > -1 && list.getCellBounds(index, index).contains(p)){
    // rest of MadProgrammer solution
    ...
} 
```

# android - 带有自定义图像的Android自定义地图

> ID：14927299
> 
> 赞同：1
> 
> 时间：2013-02-17T23:19:20.093
> 
> 标签：android, android-mapview, android-maps

我想在 Android(MinSDK=2.1) 中编写地图应用程序。

*   但此地图不会使用任何在线功能。它将完全离线。
*   这张地图还显示了我绘制的高清图像。我必须指定点（如建筑物、停车场、咖啡馆......等）并在这些点上放置少量 Imageview。
*   需要时，屏幕必须移动任何请求的点。

那么有没有 sdk,library...etc 可以做到这一点，你知道吗？或者我应该实施自己。请带路。谢谢您的帮助...

# algorithm - K-means - 如何计算最小距离

> ID：14927301
> 
> 赞同：0
> 
> 时间：2013-02-17T23:19:25.587
> 
> 标签：algorithm, math, k-means

我正在阅读[这篇](http://people.revoledu.com/kardi/tutorial/kMean/NumericalExample.htm)关于 K-Means 的文章，但在将对象分配给集群时我迷路了。在计算到每个对象的质心距离后，如何计算其他对象的最小距离以将对象分配给最近的集群？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T23:39:24.133

再次浏览文章，我发现除了质心和其他向量之间的距离之外，不需要找到最小距离。如果一个向量与两个质心 A 和 B 之间的距离分别为 2.45 和 3.6，则由于它们之间的距离较小，因此将对象分配给质心 A。

# javascript - 向菜单项添加内容

> ID：14927314
> 
> 赞同：0
> 
> 时间：2013-02-17T23:20:57.813
> 
> 标签：javascript, google-apps-script

我已经制作了一些菜单，但无法弄清楚单击后如何为这些菜单项设置实际页面内容。干杯。

```
function doGet() {
  var app = UiApp.createApplication();
  var menu = app.createMenuBar();
  var handler = app.createServerHandler();

  var menuUsers = menu.addItem('Users', handler).addSeparator().setId('users');
  var menuPending = menu.addItem('Pending Submissions', handler).addSeparator().setId('pending');

  app.add(menu);
  return app;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T23:40:56.033

通常，您会有一些主面板作为您的主显示器。让我们称之为`main-display"`。

每个菜单项的处理程序在单击菜单项时执行一个函数。这个函数可以做任何事情（比如，突出显示一些文本，或者拉出工具栏，或者保存文件）。它不一定要改变整个显示。菜单栏就像`File`菜单或`Edit`您想要的任何东西。

您必须定义一个 ServerHandler 来处理每个被单击的不同菜单项。

```
function doGet() {
  var app = UiApp.createApplication();
  var menu = app.createMenuBar();
  var handlerUsers = app.createServerHandler("showUsers");
  var handlerPending = app.createServerHandler("showPending");

  var menuUsers = menu.addItem('Users', handlerUsers).addSeparator().setId('users');
  var menuPending = menu.addItem('Pending Submissions', handlerPending).addSeparator().setId('pending');

  app.add(app.createVerticalPanel().add(menu).add(app.createSimplePanel().setId("main-display")));
  return app;
} 
```

然后有一些功能

```
function showUsers() {
  var app = UiApp.getActiveApplication();
  var main = app.getElementById("main-display");
  //do whatever you need to display your main panel
  return app;
} 
```

*showPending 的类似功能*。

Instead, if you'd like a bunch of different content panels, look into using TabPanel. I feel like this is more of what you're looking for.

# c++ - 如何使用 luabind 在脚本中正确加载文件？

> ID：14927316
> 
> 赞同：2
> 
> 时间：2013-02-17T23:21:35.037
> 
> 标签：c++, lua, luabind

我正在尝试将 Lua 嵌入到游戏中。我想要做的是创建一个加载函数，它将加载文件夹中的所有文件，然后根据将存储在 C++ 端的文件创建对象。但是，如果我使用 dofile 之类的东西，它会用该文件中的变量污染所有内容。如何将此导入更改为本地导入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T00:04:56.307

您可以使用`loadfile`根据文件内容获取函数，然后`setfenv(fn,{})`设置环境，然后调用该函数（可能包含在 中`pcall`）：

```
local fn, err = loadfile("myfile")
if fn then
  setfenv(fn,{})
  local ok, err = pcall(fn)
  if not ok then error(err) end
else
  error(err)
end 
```

您还可以`setfenv`使用脚本访问或提供对全局环境的访问所需的值填充传递给的表，例如：

```
local env = {}
setmetatable(env,{__index = _G})
setfenv(fn,env) 
```

这就是 Lua 5.1 的全部内容。

# php - 如何从主页中删除面包屑

> ID：14927318
> 
> 赞同：0
> 
> 时间：2013-02-17T23:21:40.990
> 
> 标签：php, magento

当全页缓存在主页上显示面包屑时，

我尝试将行更改`<?php if($crumbs && is_array($crumbs)): ?>`为`<?php if($crumbs && is_array($crumbs) && !$this->getIsHomePage()): ?>`in \app\design\frontend\enterprise\[THEME]\template\page\html\breadcrumbs.phtml 但它仍然显示

我尝试添加`<remove name="breadcrumbs" />`到作为主页的 CMS 页面的“布局更新 XML”，但它仍然显示

我已经尝试在 if 语句之前放入`Mage::log()`or `<p>`，但是它适用于除主页之外的所有其他页面

谷歌搜索没有给我任何我不知道的东西（我从一个站点获得的布局更新 XML 的东西），并且大多数结果都询问当我搜索“如何从主页中删除面包屑”时如何添加面包屑

我想知道是否有任何其他方法可以从我可能尚未尝试过的主页中删除面包屑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T01:24:37.810

您可以通过使用第二段中的代码来实现这一点，但更改`!$this->getIsHomePage()`为

```
!Mage::getBlockSingleton('page/html_header')->getIsHomePage() 
```

如果这不起作用（取决于您的 Magento 版本：您应该找到`getIsHomePage`./code/core/Mage/Page/Block/Html/Header.php 中定义的函数），那么您可以使用以下代码。

```
$this->getUrl('') !== $this->getUrl('*/*/*', array('_current'=>true, '_use_rewrite'=>true)) 
```

# eclipse - 在 Eclipse 中创建和发布静态 Web 项目

> ID：14927324
> 
> 赞同：1
> 
> 时间：2013-02-17T23:22:43.313
> 
> 标签：eclipse

当我尝试在 Eclipse 中创建和发布静态 Web 项目时，我得到：“复制文件 index.html 时出错：没有这样的文件或目录”

我的环境：SuSE 12.2、Eclipse Indigo Release 2、Apache2 2.2.22、

这是我为创建项目所做的：

1) 创建新服务器

*   基本，HTTP 服务器
*   发布目录：/srv/www/htdocs
*   启用发布到此服务器：true

2) 创建项目

*   新建 -> 静态 Web 项目
*   项目名称：Simplepage
*   目标运行时：HTTP 服务器（从 1 开始）
*   默认配置
*   内容根：Simplepage
*   Web 内容文件夹名称：WebContent

3）创建非常简单的页面

*   创建新的 HTML 文件
*   父文件夹：Simplepage/WebContent
*   名称：index.html
*   内容：`<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=${encoding}"> <title>Insert title here</title> </head> <body> Test </body> </html>`

4) 启动项目

*   右键单击项目名称 -> 运行方式 -> 在服务器上运行

在这里，我收到了上面提到的错误消息。此时`/srv/www/htdocs/Simplepage`创建了一个新文件夹，但没有内容。

后来我用下面的配置做了一个测试：

*   将发布目录更改为：“/srv/www/htdocs/XY”

启动项目给出错误：“禁止访问！您无权访问请求的目录...”

此时创建了一个新目录：`/srv/www/htdocs/XY/Simplepage`包含文件`index.html`.

eclipse 中的窗口显示路径`http://localhost/Simplepage/`。当我手动将`http://localhost/XY/Simplepage/`其更改为新创建的页面时，会显示。

我不明白这种行为。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-14T09:54:16.140

您已经在您的家庭计算机上安装了 Apache2 服务器，发布目录为 /srv/www

请注意，Apache2 在它自己的用户上运行（在我的 Ubuntu 上它是 www-data）。Apache 的发布目录 /srv/www 通常归 Apache 的用户所有。

您还将 Eclipse 的 HTTP 服务器定向到同一目录。请注意，此服务器与 Apache 不同；它由 Eclipse 在其腹部运行，并且通常在 Apache 的不同端口上运行，以避免端口冲突。我认为该服务器运行在 Eclipse 运行的同一用户上，即您的家庭计算机上的常规用户。

我认为您收到的错误消息是权限不匹配：Eclipse 无法在 Apache 用户拥有的目录中发布。

解决方案不是尝试使用 Apache 的目录，而是使用 Eclipse 的默认目录。

我在这里更详细地解释了这一点：[Eclipse Web (http) servers: Debugging and publishing http files in Eclipse](http://baruchyoussin.com/eclipse-web-http-servers-debugging-publishing-http-files-in-eclipse.html)。

我确实使用了 Eclipse 的 HTTP 预览服务器和 Apache2：

*   Eclipse 的 HTTP 预览服务器，用于我在 Eclipse 中处理的文件，以及
*   Apache2 运行我的 Wordpress 站点的本地主机副本。

当我在 Eclipse 中处理的文件成熟时，我会手动将它们作为帖子或页面传输到 Wordpress。

# linux - AwesomeWM 时间不更新？

> ID：14927325
> 
> 赞同：1
> 
> 时间：2013-02-17T23:22:51.513
> 
> 标签：linux, unix, lua, x11, awesome-wm

我正在使用 AwesomeWM，我正在尝试使用此代码在我的 wibox 中显示时间

```
vicious.register(datewidget, vicious.widgets.date, os.date("%b ")..(os.date("%d")+0).. ', ' ..(os.date("%I")+0)..os.date(":%M")..string.lower( os.date(" %p ")), 1) 
```

*我打开AwesomeWM*的时间是正确的，但它没有更新。不管什么原因`, 1)`都行不通。

这是我完整[的 rc.lua](http://pastebin.com/Heg8YyPB)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:03:42.120

我想问题出在 register 函数的期望上。它需要一个可以自己计算日期的格式字符串。在这里，您传递的是文字字符串而不是格式化参数。

从您较早的[问题](https://stackoverflow.com/a/14919094/1190388 "如何在 AwesomeWM rc.lua 中输出小写字符串？")中，我找到了不同的方法。现在，你`vicious`需要像：

```
vicious.register(datewidget, vicious.widgets.date, "<span font-family='terminus' color='#999999'>%b %d, %l:%M %P</span>", 1) 
```

它应该工作。

**PS**感谢[sa1](https://stackoverflow.com/users/1325211/sa1)

# android - 错误！在 strings.xml 资源 Android 中使用 CDATA

> ID：14927326
> 
> 赞同：13
> 
> 时间：2013-02-17T23:22:57.450
> 
> 标签：android, cdata

我的 Android 项目中有一个字符串资源，我正在使用 CDATA 部分将我的字符串嵌入 XML：

```
<string name="ackng"><![CDATA[
    <html>
<body>
    <h1>Acknowledgements</h1> 
    <p>
        Senator  Paul  Wellstone's  book,  the  Conscience  of  a  Liberal:  Reclaiming  the
        compassionate agenda was an inspiration and an affirmation that you can be truthful
        and  honest  as  a  politician,  and  compassionate  and  people-centred  as  a  representative.
        And  as  President  Bill  Clinton  affirmed  as  he  addressed  the  joint  session  of  the
        National  Assembly  on  26th  August,  2000,  thus:
        “Every  nation  that  has  struggled  to  build  democracy  has  found  that  success
        depends on leaders  who believe government exists to  serve people, not the
        other  way  around.”
    </p>
    <p>
        Paul  Wellstone's  book  was  my  inspiration  for  the  launching  of  the  compassionate
        agenda  in  February  2002\.  Clinton's  speech  affirmed  my  convictions  regarding  the
        sanctity of the democratic mandate to serve the people. I acknowledge the clarity of
        their  focus  and  the  inspiration  their  works  continue  to  provide.
    </p>
</body></html>]]></string> 
```

但 eclispe 正在返回此错误：

```
[2013-02-18 00:11:05 - MyPA] C:\Users\Daniel\workspace\MyPA\res\values\strings.xml:191: error: Apostrophe not preceded by \ (in  <html> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-17T23:24:52.603

撇号 ( `'`) 必须使用 进行转义`\`。尝试使用`\'`而不是`'`整个字符串的内容。

此外，您需要`"`在以下部分中使用以下命令进行转义`\"`：

```
“Every  nation  that  has  struggled  to  build  democracy  has  found  that  success
depends on leaders  who believe government exists to  serve people, not the
other  way  around.” 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-17T23:48:21.177

[String Formatting and Styling](http://developer.android.com/guide/topics/resources/string-resource.html#FormattingAndStyling) says

> # Escaping apostrophes and quotes
> 
> If you have an apostrophe or a quote in your string, you must either escape it or enclose the whole string in the other type of enclosing quotes. For example, here are some stings that do and don't work:
> 
> ```
> <string name="good_example">"This'll work"</string>
> <string name="good_example_2">This\'ll also work</string>
> <string name="bad_example">This doesn't work</string>
> <string name="bad_example_2">XML encodings don&apos;t work</string> 
> ```

It looks like `bad_example_2` describes your problem. Your best bet is to mimic `good_example_2` by replacing both `'` and `"` with `\'` and `\"` respectively as suggested by Raghav Sood.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-17T23:27:17.107

使用`&#39;`而不是撇号。字符的效果是**在 HTML 输出的情况下**（我猜是 html）相等。所以`&#39;`会显示为`'`。

# c++ - 为什么 Alexandrescu 不能使用 std::uncaught_exception() 在 ScopeGuard11 中实现 SCOPE_FAIL？

> ID：14927328
> 
> 赞同：17
> 
> 时间：2013-02-17T23:23:14.697
> 
> 标签：c++, c++11, raii, loki, scopeguard

毫无疑问，很多人都熟悉 Alexandrescus 先生的 ScopeGuard 模板（现在是 Loki 的一部分）以及此处介绍的新版本 ScopeGuard11：http: [//channel9.msdn.com/Shows/Going+Deep/C-and-Beyond-2012- Andrei-Alexandrescu-Systematic-Error-Handling-in-C](http://channel9.msdn.com/Shows/Going+Deep/C-and-Beyond-2012-Andrei-Alexandrescu-Systematic-Error-Handling-in-C)

来源： [https ://gist.github.com/KindDragon/4650442](https://gist.github.com/KindDragon/4650442)

在他在 c++ 和 2012 年以后的演讲中，他提到他找不到正确检测范围是否因异常而退出的方法。因此，当且仅当范围因异常而退出时，他无法实现 SCOPE_FAIL 宏，该宏将执行提供的 lambda（通常用于回滚代码）。这将使dismiss() 成员函数变得不需要，并使代码更具可读性。

由于我绝不像 Alexandrescu 先生那样天才或经验丰富，我希望实现 SCOPE_FAIL 并不像这样容易：

```
~ScopeGuard11(){                      //destructor
    if(std::uncaught_exception()){    //if we are exiting because of an exception
        f_();                         //execute the functor
    }
    //otherwise do nothing
} 
```

我的问题是为什么不呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-18T00:29:39.827

对于`ScopeGuard11`具有您的析构函数的类，`f_`可能会调用该成员，即使它不是由于异常而退出的当前范围（应该由守卫保护）。在异常清理期间可能使用的代码中使用此防护是不安全的。

试试这个例子：

```
#include <exception>
#include <iostream>
#include <string>

// simplified ScopeGuard11
template <class Fun>
struct ScopeGuard11 {
     Fun f_;
     ScopeGuard11(Fun f) : f_(f) {}
     ~ScopeGuard11(){                      //destructor
        if(std::uncaught_exception()){    //if we are exiting because of an exception
            f_();                         //execute the functor
         }
         //otherwise do nothing
      }
};

void rollback() {
  std::cout << "Rolling back everything\n";
}
void could_throw(bool doit) {
  if (doit) throw std::string("Too bad");
}

void foo() {
   ScopeGuard11<void (*)()> rollback_on_exception(rollback);
   could_throw(false);
   // should never see a rollback here
   // as could throw won't throw with this argument
   // in reality there might sometimes be exceptions
   // but here we care about the case where there is none 
}

struct Bar {
   ~Bar() {
      // to cleanup is to foo
      // and never throw from d'tor
      try { foo(); } catch (...) {}
   }
};

void baz() {
   Bar bar;
   ScopeGuard11<void (*)()> more_rollback_on_exception(rollback);
   could_throw(true);
}

int main() try {
   baz();
} catch (std::string & e) {
   std::cout << "caught: " << e << std::endl;
} 
```

`rollback`离开时你想看到一个`baz`，但你会看到两个——包括离开时的一个虚假的`foo`。

# java - 在另一个类中使用自定义类？如何在 Circle 类中使用 Point 类？

> ID：14927333
> 
> 赞同：-1
> 
> 时间：2013-02-17T23:24:05.670
> 
> 标签：java, geometry, point

所以我相信我已经完成了我的 Point 类，但现在我必须用所述 Point 类创建一个 Circle 类。

Circle类的变量是x、y和r（x，y是中心点的坐标，r是半径）。我想“创建”一个点来存储 x 和 y，这是什么意思？我可以使用 Point 定义一个私有变量吗？

如何在 2 个类之间创建这种连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T23:27:29.690

你可以在你的圈子类中有一个点

```
public class Circle()
{
    private Point center;
    private int radius;

    public Circle(Point center, int radius)
    {
        this.center = center;
        this.radius = radius;
    }

    Public Circle(int x, int y, int radius)
    {
        this(new Point(x, y), radius);
    }

    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T23:28:15.807

> 如何在 2 个类之间创建这种连接？

一个人可能会保留对另一个人的引用，或者在相关时间（例如，在绘图时）传递给另一个人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T23:28:22.030

与此类似的东西

```
class Circle
{
    Point point;
    Double radius;
    Circle(double x, double y, double radius)
    {
       point = new Point(x,y);
       this.radius = radius;
    }
 } 
```

这样，您的 Circle 类包含一个 Point，它处理坐标，但具有附加信息（半径）

# ios - 表格单元格未连接到 iOS 故事板中的插座

> ID：14927338
> 
> 赞同：0
> 
> 时间：2013-02-17T23:24:58.833
> 
> 标签：ios, uitableview, uistoryboard

我在情节提要中遵循[了 Cell Prototype 的 Connect 插座](https://stackoverflow.com/questions/10176312/connect-outlet-of-a-cell-prototype-in-a-storyboard)

所以我的插座是连接的。我有这个方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    HomeCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    if (cell == nil) {
        cell = [[HomeCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"] ;
    }

    // Configure the cell.
    Group * group = [self.groups objectAtIndex: [indexPath section]];
    Friend  * friend = [[group friends ]objectAtIndex: [indexPath row]];
    NSLog(@"%@", friend.name);

    [[cell nameLabel] setText:friend.name];
    [[cell statusLabel] setText:friend.status];
    [[cell picImageView] setImage:[UIImage imageNamed:@"similey.jpg"]];
    return cell;
} 
```

它编译得很好，但单元格显示为空白，其中没有任何内容。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:31:04.613

您是否将情节提要中单元格的标识符设置为“Cell”以匹配您的 dequeueReusableCellWithIdentifier 调用？

Interface Builder 创建对象，然后允许您复制它们。它不会改变类的定义。因此，如果您在 Interface Builder 中设计一个类的实例，那么您只是在设计该单个实例。加载 Storyboard 和 NIB 是您可以用来复制该实例的机制。

在 IB 中设计一个类的实例，然后再去执行该类的直接 alloc+init 将导致一个实例完全独立于 Interface Builder 中的实例。

以下代码行向我表明，您希望情节提要中的实例对直接分配 + 初始化您的类时发生的情况产生影响：

```
[[HomeCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"] 
```

如果你曾经触及那条线，那可能是你的问题。如果您在情节提要中创建了单元格，则该行不应该存在。对于在故事板中创建的单元格，-dequeueReusableCellWithIdentifier: 将始终返回单元格的实例，前提是您匹配了标识符。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-18T00:42:12.050

由于 HomeCell 是一个自定义 UITableViewCell 它不会在重用队列中，因此您的表格视图将需要通过 registerClass 方法了解它，如下所示：

```
- (void)viewWillAppear:(BOOL)animated
{
   ...
   [self.tableView registerClass:[HomeCell class] forCellReuseIdentifier:@"Cell"];

} 
```

# android-sqlite - greendao 和 sqlite 触发器

> ID：14927343
> 
> 赞同：0
> 
> 时间：2013-02-17T23:25:47.427
> 
> 标签：android-sqlite, greendao

我尝试使用下面的代码来确保我的数据库中的引用完整性，但似乎不适用于 GreenDao。我仍然可以删除所有记录。另一方面，当我尝试在 Sqlitemanager 中删除时，会引发触发器并且删除操作失败。

```
DevOpenHelper helper = new DaoMaster.DevOpenHelper(this, Common.DBNAME, null)
{

    @Override
    public void onCreate(SQLiteDatabase db) {

    super.onCreate(db);

    db.execSQL("CREATE TRIGGER grupe_artikli BEFORE DELETE ON groups "+
        "FOR EACH ROW BEGIN "+
        "SELECT CASE " +
        "WHEN ((SELECT id_group FROM products WHERE id_group = OLD._id) IS NOT NULL) "+
        "THEN RAISE(ABORT, 'error') "+
        "END; END;");

    DaoSession session = new DaoMaster(db).newSession();
} 
```

GreenDao 是否支持触发器，或者是否有其他方法来维护数据库引用完整性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:34:13.000

greenDAO 没有内置的触发器支持。但是，我想不出您的方法不起作用的任何原因。greenDAO 不会劫持数据库或其他东西，因此您应该能够直接使用数据库，就像您根本不会使用 greenDAO 一样。

# image - 通过上传进行 Google 图片搜索

> ID：14927344
> 
> 赞同：3
> 
> 时间：2013-02-17T23:25:48.023
> 
> 标签：image, search

Google 的图片搜索 API 已被贬值： [https ://developers.google.com/image-search/](https://developers.google.com/image-search/)

我的问题是我们现在在哪里可以获得相同的数据？它说它已移至新的自定义搜索 API ( [https://developers.google.com/custom-search/v1/overview](https://developers.google.com/custom-search/v1/overview) )，但我找不到现在在哪里提交上传的图像数据以进行搜索。有人可以解释或链接我的信息。

我们的网络应用程序需要能够将图像上传到谷歌，并通过 API 检查找到图像的位置。

此外，如果 Google 不允许这样做，是否有任何替代品？

先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T11:57:59.480

您可以使用上传图片的直接链接获取搜索结果。

让直接链接为[http://i47.tinypic.com/ekepuq.png](http://i47.tinypic.com/ekepuq.png)（以流式传输图像数据进行搜索）然后将 url 设为

“http://images.google.com/searchbyimage?image_url=[diretlink]”

即“ [http://images.google.com/searchbyimage?image_url=http://i47.tinypic.com/ekepuq.png](http://images.google.com/searchbyimage?image_url=http://i47.tinypic.com/ekepuq.png) ”，可以得到同一张图片的搜索结果。

# django - ImportError：没有名为 django.core.wsgi 的模块 Apache + VirtualEnv + AWS + WSGI

> ID：14927345
> 
> 赞同：58
> 
> 时间：2013-02-17T23:25:47.663
> 
> 标签：django, apache, amazon-ec2, wsgi, django-wsgi

我正在尝试在 Amazon 的 EC2 实例上发布我的网站，但我不断收到 500 错误。我真的不知道为什么。

//日志文件

```
 [Sun Feb 17 23:12:48.066802 2013] mod_wsgi (pid=2102): Target WSGI script '/srv/www/app/poka/apache/wsgi.py' cannot be loaded as Python module.
    [Sun Feb 17 23:12:48.066840 2013] mod_wsgi (pid=2102): Exception occurred processing WSGI script '/srv/www/app/poka/apache/wsgi.py'.
    [Sun Feb 17 23:12:48.066864 2013] Traceback (most recent call last):
    [Sun Feb 17 23:12:48.066889 2013] File "/srv/www/mysite/poka/apache/wsgi.py", line 26, in <module>
    [Sun Feb 17 23:12:48.066920 2013] from django.core.wsgi import get_wsgi_application
    [Sun Feb 17 23:12:48.066945 2013] ImportError: No module named django.core.wsgi 
```

//Apache 配置文件

```
 WSGIScriptAlias / /srv/www/app/mysite/apache/wsgi.py

    WSGIDaemonProcess mysite python-path=/srv/www/app/mysite:/home/ec2-user/.virtualenvs/mysite-main/lib/python2.7/site-packages
    WSGIProcessGroup mysite

    <Directory /srv/www/app/mysite/apache/>
    <Files wsgi.py>
    Order deny,allow
    Allow from all
    </Files>
    </Directory>

    <Directory /srv/www/app/mysite/apache/>
    Order deny,allow
    Allow from all
    </Directory>

    <Directory /home/ec2-user/app/mysite/static>
    Order deny,allow
    Allow from all
    </Directory>

    <Directory /home/ec2-user/app/mysite/media>
    Order deny,allow
    Allow from all
    </Directory> 
```

//wsgi.py

```
 import os
    import sys
    import site

    site.addsitedir('/home/ec2-user/.virtualenvs/mysite-main/lib/python2.7/site-packages')
    os.environ.setdefault("DJANGO_SETTINGS_MODULE", "mysite.settings")

    from django.core.wsgi import get_wsgi_application
    application = get_wsgi_application()

    path = '/srv/www/app/mysite'

    if path not in sys.path:
        sys.path.append(path) 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2014-03-18T11:24:34.647

我知道这是一个旧线程，但我刚刚遇到了同样的问题，我不认为这是由于缺少包引起的。由于 Django 核心发行版已经包含正确的 wsgi 处理程序。

这里的问题是，当 wsgi.py 被执行时，它会从你的 virtualenv 中丢失站点包的包。（如果你已经激活了你的 virtualenv，并完成了 pip install django 那么一切都很好。你有必要的 django 包）。

就我而言，我修复了在我的 Path/to/Project/Project/wsgi.py 文件中修改 sys.path 的问题。

您必须将项目目录和 virtualenv 站点包附加到 sys.path 列表中。这是我的项目中包含的 wsgi.py 文件（谈论使用 django-admin.py start-project 创建的 wsgi.py）...我必须对其进行修改才能使其与 Apache 一起使用

```
# =====================
# wsgi.py file begin 

import os, sys
# add the hellodjango project path into the sys.path
sys.path.append('<PATH_TO_MY_DJANGO_PROJECT>/hellodjango')

# add the virtualenv site-packages path to the sys.path
sys.path.append('<PATH_TO_VIRTUALENV>/Lib/site-packages')

# poiting to the project settings
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "hellodjango.settings")

from django.core.wsgi import get_wsgi_application
application = get_wsgi_application()

# wsgi.py file end
# =================== 
```

确保：

1.  您将 mod_wsgi 添加到 Apache 模块目录 mod_wsgi 必须针对您拥有的操作系​​统、Apache 和 Python 版本进行编译

2.  将加载模块命令添加到您的 httpd.conf 以加载 mod_wsgi 模块 LoadModule wsgi_module modules/mod_wsgi.so

3.  在 httpd.conf 或包含在 httpd.conf 中的任何 conf 中配置 Django 细节

基于文档[How to use Django with Apache 和 mod_wsgi](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/modwsgi/)

```
WSGIScriptAlias / <PATH_TO_PROJECT>/hellodjango/hellodjango/wsgi.py
WSGIPythonPath <PATH_TO_PROJECT>:<PATH_TO_VIRTUALENV>/Lib/site-packages

<Directory <PATH_TO_PROJECT>/hellodjango/hellodjango> 
  <Files wsgi.py>
    Order deny,allow
    Require all granted
  </Files>
</Directory> 
```

希望这可以帮助。它对我有用。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2019-11-14T14:14:07.950

我遇到过同样的问题。我的 libapache2-mod-wsgi 是 python 2.x 而不是 python 3.x

在这里找到了解决方案：[https ://stackoverflow.com/a/28118284/2489042](https://stackoverflow.com/a/28118284/2489042)

归功于@nima

```
$ sudo apt-get remove libapache2-mod-python libapache2-mod-wsgi
$ sudo apt-get install libapache2-mod-wsgi-py3 
```

在复制/粘贴这些命令之前来自@alxs 的警告：如果服务器上正在运行使用 wsgi 和 apache 的 python 2 项目，则上述命令将有效地关闭它们。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-17T23:41:38.323

将此添加到 Apache 配置文件中：

```
WSGIPythonHome /home/ec2-user/.virtualenvs/mysite-main 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-10-10T21:56:05.030

我刚才有一个类似的错误。事实证明，我们的 Django 代码是在 python 3.5 上开发的，但由于某些原因，部署我们服务器的人使用 python 2.7 设置了 virtualEnv。我们重新部署了 python 3.5，一切都为我们工作

以下是我收到的错误消息：

```
$ python serviceStartup.py 
Traceback (most recent call last):
  File "serviceStartup.py", line 10, in <module>
    from django.core.wsgi import get_wsgi_application
ImportError: No module named django.core.wsgi 
```

希望这对任何看到类似错误消息的人有所帮助！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-11-18T20:05:58.997

对我来说，这表明服务器上没有安装 Django。通过固定

```
pip install Django 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-26T02:01:39.227

我的朋友，你已经很好地配置了一切，只需要授予 apache 用户访问项目和 virtualenv 目录的权限。

例子：

```
sudo chown -R www-data:www-data /home/ubuntu/projects
sudo chown -R www-data:www-data /home/ubuntu/virtualenv 
```

这解决了我的`ImportError: No module named django.core.wsgi`（virtualenvs 文件夹）和`ImportError: No module named <project-name>.settings`（项目文件夹）的问题

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-11T18:39:58.580

乍一看，我很抱歉我的英语。我也遇到了这个问题，我已经通过将“wsgi.py”文件更改为：

```
导入操作系统
导入 django
从 django.core.handlers.wsgi 导入 WSGIHandler

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "eisentask.settings.production")
django.setup(set_prefix=False)

应用程序 = WSGIHandler()

```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-24T11:11:36.820

万一有人使用 AWS Lightsail bitnami 来到这里。

问题是'python 将包安装在 apache 看不到的目录中'。

所以：软件包安装在“/home/bitnami/.local/lib/python3.8/site-packages/”中，Apache 在“/opt/bitnami/python/lib/python3.8/site-packages/”中查找。

我遵循的临时解决方案是使用此命令将包复制到 Apache 眼睛文件夹 'cp -r /home/bitnami/.local/lib/python3.8/site-packages/* /opt/bitnami/python/lib/python3.8 /站点包/'

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-09T07:12:41.133

嗨，我在 Ubuntu 20.04 服务器中遇到了同样的问题。我通过安装修复了它`apache2-dev`

```
sudo apt-get install apache2-dev 
```

在[mod_wsgi 文档](https://modwsgi.readthedocs.io/en/master/user-guides/quick-installation-guide.html)中，拥有`apache2`并`apache2-dev`安装两者很重要。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-06-15T05:20:30.497

我正在为我的项目使用 Centos 以及 nginx 和 gunicorn...我遇到了这个问题...无法访问 wsgi 文件可能是您当前目录的 bcz 我更改了当前目录并且它有效...我的项目名称是尾声，所以我输入了

```
cd coda 
```

接着

```
gunicorn --bind  0.0.0.0:8001 coda.wsgi 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2017-05-26T10:12:40.477

对我来说，需要设置一些变量（对于 Windows）：

```
set PYTHONHOME=F:\path\to\python
set PYTHONPATH=F:\path\to\python 
```

# optimization - 添加监听器的快捷方式？

> ID：14927347
> 
> 赞同：1
> 
> 时间：2013-02-17T23:25:59.003
> 
> 标签：optimization, listener, javafx-2

在 JavaFX 中，如果我希望在属性更改时调用非匿名方法并且我不需要旧值和新值等所有这些信息，是否有比这更短的方法

```
rb.selectedProperty().addListener(new ChangeListener<Boolean>() {
    @Override
    public void changed(ObservableValue<? extends Boolean> observable, Boolean oldValue, Boolean newValue) {
        onSomethingChanged();
    }           
}); 
```

我认为在 C# 中它类似于

```
rb.selectedProperty()+=onSomethingChanged(); 
```

JavaFX / Java中有类似的东西吗？比第一个代码示例短的东西？或者是否可以为此编写某种辅助函数？

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:52:13.260

在 7 以内的 JDK 中没有更短的表示法。

当带有 Lambda 项目的 JDK8 发布时，接下来可以编写：

```
rb.selectedProperty().addListener((obs, oldV, newV) -> onSomethingChanged()); 
```

# json - Play2 和 Scala (Jerkson) - JsObjects 列表 - 如何转换为 Json 对象

> ID：14927349
> 
> 赞同：1
> 
> 时间：2013-02-17T23:26:24.637
> 
> 标签：json, scala, playframework-2.0

我看不到这个问题的答案 - 有没有简单的方法可以做到这一点？我想获取一些对象 x 的列表并将其变成一个没有任何 hacky 代码的 json 对象？我正在做一些丑陋的事情，但想将此列表放入一个名为“数据”的对象中。我可以以某种方式将其映射到对象“数据”吗？

```
 private def renderArticleJson(articles: Iterable[GraphedArticle]): String = {

    val listToConvert = for (article <- articles) yield {
      JsObject(
        "articleId" -> Json.toJson(article.getArticleId)
        :: "articleUrl" -> Json.toJson(article.getArticleUrl)
        :: "graphId" -> Json.toJson(article.asVertex().getId.toString)
        :: "fullName" -> Json.toJson(article.getTitle)
        :: "imageUrl" -> Json.toJson(article.getImageUrl)
        :: Nil
      )
    }
  } 
```

按要求编辑：添加了我想退出的内容（由于第一个答案的帮助，现在解决了）

```
{
  "data": [
    {
      "articleId": null,
      "articleUrl": null,
      "graphId": "#8:24",
      "fullName": "hey",
      "imageUrl": "hey"
    },
    {
      "articleId": null,
      "articleUrl": null,
      "graphId": "#8:25",
      "fullName": "hey",
      "imageUrl": "hey"
    },
    {
      "articleId": "b23c162d-b0af-4ce3-aebf-f33943492f95",
      "articleUrl": null,
      "graphId": "#8:26",
      "fullName": "hey",
      "imageUrl": "hey"
    },
    {
      "articleId": "8afe310c-8337-4a8a-8406-5670249ba0a7",
      "articleUrl": "hey",
      "graphId": "#8:27",
      "fullName": "hey",
      "imageUrl": "hey"
    }
  ]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:23:21.507

你是这个意思吗？

```
private def renderArticleJson(articles: Iterable[GraphedArticle]): String = {

  val listToConvert = for (article <- articles) yield {
    JsObject(
      "articleId" -> Json.toJson(article.getArticleId)
        :: "articleUrl" -> Json.toJson(article.getArticleUrl)
        :: "graphId" -> Json.toJson(article.asVertex().getId.toString)
        :: "fullName" -> Json.toJson(article.getTitle)
        :: "imageUrl" -> Json.toJson(article.getImageUrl)
        :: Nil)
  }

  val jsonList = Json.toJson(listToConvert)
  Json.stringify(jsonList)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:15:43.430

感谢 EEColor，我确实得到了我想要的。我给了他答案，但我使用的最终代码如下：

```
 private def renderArticleJson(articles: Iterable[GraphedArticle]): String = {

    val listToConvert = for (article <- articles) yield {
      JsObject(
        "articleId" -> Json.toJson(article.getArticleId)
          :: "articleUrl" -> Json.toJson(article.getArticleUrl)
          :: "graphId" -> Json.toJson(article.asVertex().getId.toString)
          :: "fullName" -> Json.toJson(article.getTitle)
          :: "imageUrl" -> Json.toJson(article.getImageUrl)
          :: Nil)
    }

    val jsonList = Json.toJson(listToConvert.toSeq)
    val result = JsObject("data" -> jsonList :: Nil)
    Json.stringify(result)
} 
```

# html - 创建一个垂直的 HTML/CSS 菜单，我想删除 顶部填充（在 FF 和 IE 中都显示）

> ID：14927351
> 
> 赞同：0
> 
> 时间：2013-02-17T23:26:34.890
> 
> 标签：html, css, xhtml

我正在为库 OPAC 创建一个使用 HTML 和 CSS 的导航菜单。每个 li 项目中似乎都有不需要的顶部填充，这导致菜单中的项目之间存在持续的间隙。这在最新的 Firefox 和 IE 9 中都可见。

我的 HTML 是：

```
<div class="menu_div">
<ul>
<li id="mainnav">Find Information</li>
<li><a href="#">Catalogue</a></li>
<li><a href="#">Databases</a></li>
<li><a href="#">Guides</a></li?
</ul>
</div> 
```

我的 CSS 内容如下：

```
.menu_div ul
{
padding:0px;
margin:0px;
padding-top: 0px;
margin-top: 0px;
font-family:Arial, Helvetica, sans-serif;
font-size:13px;
color:#FFF;
list-style:none;
text-indent:10px;
color:#000000;
}

.menu_div ul li
{
padding:0px;
margin:0px;
padding-top: 0px;
margin-top: 0px;
list-style:none;
background:#CCC;
line-height:20px;
border-bottom:1px solid #333;
color:#000000;
}

.menu_div ul li a
{
padding:0px;
margin:0px;
padding-top: 0px;
margin-top: 0px;
text-decoration:none;
color:#FFF;
display:block;
color:#000000;
}

.menu_div ul li a:hover
{
background: #293895;
color:#FFFFFF;
}

.menu_div ul li#mainnav
{
background:#293895;
font-weight:bold;
color:#FFFFFF;
} 
```

屏幕截图显示了我正在谈论的两个项目之间的“差距”（光标悬停在第二个项目上）：

[http://postimage.org/image/5dxn7j56z/](http://postimage.org/image/5dxn7j56z/)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T00:08:19.000

这很可能是由设置的行高引起的，这通常是从列表周围的代码中继承的。尝试附加`line-height: 1em;`到每个元素的 CSS 以删除额外的间距。

编辑：如果您查看位于此处的 JSfiddle：http: [//jsfiddle.net/pCAfk/](http://jsfiddle.net/pCAfk/)没有间距，因为没有继承的行高。

# actionscript-3 - 未设置断点

> ID：14927352
> 
> 赞同：0
> 
> 时间：2013-02-17T23:26:40.063
> 
> 标签：actionscript-3

超级有用的论坛在这里！我最近开始备份 as3 并创建了一个基于小块的游戏。它远未完成，但我最近遇到了一个障碍，我不知道如何解决它！我有一个功能，当我单击图块时，它会检查难以处理的属性是否为真，如果是，我会做任何事情。当我使用 ctrl-enter 测试 fla 时，我没有收到任何错误，我可以单击图块，一切正常。但是，每当我使用 Ctrl-Shift-Enter 对其进行测试时，我都会得到以下信息：

```
Breakpoint not set; No executable code at line 124 of Scene 1, Layer 'Layer 1', Frame 1 
```

如果我单击一个难以处理的图块，播放器将停止响应并崩溃。--> 第 124 行是注释.....？我很困惑，因为我找不到错误，所以很难发布我的代码的有用部分。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T23:29:26.617

好像您已经在注释行上放置了一个断点，并且在运行它的调试模式时，它会崩溃，因为它不能在注释上中断。

在您使用的任何 IDE 中，您可能不小心单击了第 124 行的边距。看看你是否可以在该行禁用断点。

# scala - Scala中的多键映射

> ID：14927357
> 
> 赞同：6
> 
> 时间：2013-02-17T23:27:19.627
> 
> 标签：scala, map, hashmap, key, scala-collections

如何在 Scala 中创建一个不仅将单个参数作为键，而且将两个或三个参数作为键的 Map。

```
val map = //..?
map("abc", 1) = 1
println(map("abc", 2)) // => null
println(map("abc", 1)) // => 1 
```

我尝试使用元组作为键，但是我必须像这样分配值

```
map(("abc", 1)) = 1 
```

我可以以某种方式摆脱内括号吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-18T02:01:40.583

你也可以使用

```
map += ("abc", 1) -> 1 
```

如果映射键代表某些东西（例如用户信息），并且如果您想增加代码的清晰度（特别是如果键中有 3 个元素），我会选择案例类作为键。Case 类实现了 equals 和 hashcode，因此您可以安全地将它们用作映射中的键。代码会更冗长：

```
case class MapKey(s: String, i: Int, d: Double)

val map = Map[MapKey, X](MapKey("a", 1, 1.1) -> "value1", MapKey("b", 2, 2.2) -> "value2")

val map2 = map + (MapKey("c", 3, 3.3) -> "value3")

//or for mutable map
map(MapKey("d", 4, 4.4)) = "value4"
//or
map += MapKey("e", 5, 5.5) -> "value5" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-18T02:06:22.727

您可以添加自己的增强功能来`Map`解决问题：

```
import collection.mutable.Map

implicit class EnhancedMap[A,B,C](m: Map[(A,B),C]) {
  def update(a: A, b: B, c: C) { m((a,b)) = c }
} 
```

然后

```
val map = Map(("abc", 1) -> 0)
map("abc", 1) = 1 
```

工作得很好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-17T23:30:24.977

您可以对元组使用 -> 语法：

```
map("abc" -> 1) = 1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-29T15:55:36.767

我使用 Luigi Plinge 的方法编译错误。以下方法对我有用，更简单。

```
scala> var b = Map[(Int, Int), Int]()
b: scala.collection.mutable.Map[(Int, Int),Int] = Map()

scala> b = b + ((1,1)->2)
b: scala.collection.mutable.Map[(Int, Int),Int] = Map((1,1) -> 2)

scala> b
res15: scala.collection.mutable.Map[(Int, Int),Int] = Map((1,1) -> 2)

scala> b = b + ((1,2)->2)
b: scala.collection.mutable.Map[(Int, Int),Int] = Map((1,1) -> 2, (1,2) -> 2)

scala> b(1,1)
res16: Int = 2

scala> b(1,2)
res17: Int = 2 
```

# delphi - 制作适合笔记本桌面的表格

> ID：14927362
> 
> 赞同：0
> 
> 时间：2013-02-17T23:27:39.923
> 
> 标签：delphi, delphi-7

我使用具有 15 英寸屏幕笔记本电脑的笔记本电脑制作了一个表格，但是当我将应用程序传输到笔记本电脑时，一些按钮组件是不可见的，尤其是那些在笔记本电脑中可见的表格下方的按钮组件。那么是否有可能使表单调整自身以适应笔记本屏幕的代码，或者如何使用属性来完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:47:43.273

您所要求的也称为`resolution independence`设计表单，以使其可在非常小和非常大的屏幕（屏幕分辨率）上使用。

传统上，这是使用`Anchors`和`Align`属性完成的，因此控件可以根据特定布局调整大小和位置。

较新的 Delphi 版本也有`Margins`，`AlignWithMargins`因此自动对齐可以在控件之间保留一些空间。

许多其他工具包使用的另一种方法是使用显式布局概念。这可以在 Delphi 中完成`TGridPanel`，`TFlowPanel`但根据我的经验，效果不是很好。那里有更好的布局管理系统（例如[DevExpress Layout Control](http://www.devexpress.com/products/VCL/ExLayoutControl/)）。

您还可以考虑使用`TScrollBox`es、`TSplitter`s 并`docking`允许用户自定义他们的 UI 体验。

您还可以考虑将一些功能放在由按钮调用的额外对话框中，或者在`TPageControl`选项卡表上隐藏一些控件。

缩放也是可能的（参见 Steves 的回答），但它会使表单看起来很奇怪，并且会大大降低用户体验，因为控件变得太小或者用户很难点击正确的控件或者字体太小等。

如果工作量很大，或者如果您拥有完全不同的设备（如智能手机与工作站），甚至可能需要拥有完全不同的表单或不同的应用程序，这些应用程序可能使用客户端/服务器或多层架构来共享相同的业务逻辑，但这实际上超出了这个问题的范围......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:14:59.843

您可以阅读 Zarko Gajic 在[http://delphi.about.com/od/standards/a/aa030700a.htm](http://delphi.about.com/od/standards/a/aa030700a.htm)上的文章， 以了解缩放中的一些陷阱。

这是一个可能有帮助的功能：

```
 procedure ScaleForm(theF: TForm; ScreenWidth, ScreenHeight: LongInt) ;
    begin
      theF.Scaled := True;
      theF.AutoScroll := False;
      if (Screen.Width <> ScreenWidth) then 
        begin
          theF.Height :=LongInt(theF.Height) * LongInt(Screen.Height) div ScreenHeight;
          theF.Width := LongInt(theF.Width) * LongInt(Screen.Width) div ScreenWidth;
          theF.ScaleBy(Round(Screen.Width,ScreenWidth)) ;
        end;

{the following lines work on an Xp PC but seem to have no effect on Win 7
  theF.Position := poScreenCenter;  //poDefault, poDesigned,poDesktopCenter,poOwnerFromCenter,poMainFormcenter
  theF.Font.Name := 'Arial';  //to scale properly, you have to use a scalable font.
}

end; 
```

在应用程序的 OnCreate 处理程序 ScaleForm(Form1,screen.width,screen.height); 中调用该函数 Form1 是表单的句柄。如果需要，将函数调用放在表单上的 MENU 项或按钮中以手动调用它。

此外，这是一个使用 ScaleBy 函数的简单过程。ScaleBy 可用于逐步向下（或向上）调整表单的大小，直到整个表单适合上网本。该示例使用 10% 的增量。根据您在应用程序中使用的控件，这可能就是您所需要的。许多控件将自动缩放。还有更优雅和复杂的解决方案。在 XE2 中有一个名为 ChangeScale 的函数，它可能很有用，但在 Delphi 7 中可能不可用。请记住，并非所有控件都可以优雅地缩放。你可能还有更多工作要做。

```
procedure TPktForm1.ScaleDown1Click(Sender: TObject);
begin
  ScaleBy(90,100);   //changes this form  where ScaleBy(percentage reduction of reduced form, percentage original form);
  Form_A.ScaleBy(90,100);  //changes other forms in the application
  Form_B.ScaleBy(90,100);

  Application.ProcessMessages;
end; 
```

或者您可以在表单的 OnCreate 中添加 Scaleby(659, Screen.Height ) ，其中“659”是编程的原始表单高度以填充屏幕或 Scaleby(Screen.Height, 659); 使表格更小。是的，就缩小比例而言，这种技术可以做的事情是有限度的。从台式机到上网本在这里工作得很好。

网上有很多例子。你在使用 DBGrid 吗？您会遇到问题，但是您可以围绕它们进行编码以实现该控件。

# types - C# 类型转换或转换

> ID：14927365
> 
> 赞同：0
> 
> 时间：2013-02-17T23:27:43.760
> 
> 标签：types, casting

```
public class ExpiringDictionary<TKey, TValue> : IDictionary<TKey, TValue> {
    private class ExpiringValueHolder<T>
    {
        public T Value { get; set; }
        .
        .
        .
    }
    private IDictionary<TKey, ExpiringValueHolder<TValue>> innerDictionary;

    public IEnumerator<KeyValuePair<TKey, TValue>> GetEnumerator()
    {
        //throw new NotImplementedException();
        return (IEnumerator<KeyValuePair<TKey, TValue>>)innerDictionary.GetEnumerator();
    } 
} 
```

这是代码给了我投射错误。是否可以为函数 GetEnumerator() 转换返回值？

谢谢你的帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T23:52:01.027

您`innerDictionary`包含 的集合`KeyValuePair<TKey, ExpiringValueholder<TValue>>`，所以不是您当前尝试的方式是不可能的。

最简单的解决方案可能是执行以下操作：

```
return innerDictionary.Select(kvp => new KeyValuePair<TKey, TValue>(kvp.Key, kvp.Value.Value))
    .GetEnumerator() 
```

这`Value`将从您的`ExpiringValueHolder<T>`.

# c# - 不包含自定义 UrlHelper 方法

> ID：14927372
> 
> 赞同：1
> 
> 时间：2013-02-17T23:28:33.683
> 
> 标签：c#, asp.net-mvc-3, extension-methods

我制作了一个自定义助手，我试图将其包含在所有页面中。

帮手：

```
namespace project.CacheBreaker
{
 public static class CacheBreaker
 {
    public static void CacheBreak(
        this UrlHelper url, string contentPath)
    {
        url.Content(contentPath);
    }
 }
} 
```

我试图从以下方面公开它`web.config`：

```
<system.web>
 <pages>
  <namespaces>
    <add namespace="project.CacheBreaker"/>
  </namespaces>
 </pages>
</system.web> 
```

尝试在视图中访问它时出现错误：

```
<script src="@Url.CacheBreak("~/Scripts/link.js")" type="text/javascript"></script> 
```

其中指出：

```
"说明：编译所需资源时出错
来服务这个请求。请查看以下特定错误详细信息
并适当地修改您的源代码。”
```

```
“编译器错误消息：CS1061：‘System.Web.Mvc.UrlHelper’不包含
'CacheBreak' 的定义并且没有扩展方法 'CacheBreak' 接受
可以找到“System.Web.Mvc.UrlHelper”类型的第一个参数
（您是否缺少 using 指令或程序集引用？）”
```

我以为我已经采取了所有必要的步骤，为什么这个自定义方法不可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T23:29:57.397

但是您的 UrlHelper 不返回任何内容。它是无效的。你不可能用: 来调用它`@Url.CacheBreak(...)`。如果您希望以这种方式使用您的助手，它应该返回 an`IHtmlString`或 a `string`：

```
public static string CacheBreak(this UrlHelper url, string contentPath)
{
    return url.Content(contentPath);
} 
```

哦，顺便说一下，有一个只是环绕的助手`Url.Content`似乎有点没用，因为你可以直接写：

```
<script src="@Url.Content("~/Scripts/link.js")" type="text/javascript"></script> 
```

此外，您在问题中谈论的 wbe.config 似乎是错误的 wbe.config。你知道，有一个`~/web.config`，还有一个`~/Views/web.config`是两个完全不同的文件。如果你使用的是 Razor 视图引擎，你应该在`~/Views/web.config`文件中定义你的命名空间：

```
<system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization"/>
        <add namespace="System.Web.Routing" />

        <add namespace="project.CacheBreaker"/>
      </namespaces>
    </pages>
</system.web.webPages.razor> 
```

# c# - 陷入我的想法中

> ID：14927374
> 
> 赞同：0
> 
> 时间：2013-02-17T23:28:42.357
> 
> 标签：c#

首先，很抱歉我无法给出正确的标题。在搜索、搜索和搜索之后，我几乎整天都被一个想法困扰着，直到我决定在 Stackoverflow 上问它！

所以这就是我卡住的地方：

（我正在制作一个当前用 C# 编码的自动安装程序，它是荷兰语。它真的很棒，但我只需要一件事来完成我的基础。例如：

*   您在复选框中选择了“多个”对象，这些对象是从复选框本身读取的，它们被修剪并在此之后启动。

现在一切正常，我想添加一个等待方法，例如我们得到：

*   Malwarebytes 和 CCleaner 作为安装“示例”。

现在，当两者都被选中时，我单击开始，它会启动这两个程序。我想做的是：告诉程序启动一个程序，做你的事情，一旦它完成（关闭）它应该去下一个。

但是...有一个问题，我的程序是在一个数组中启动的，所以如果检查了多个对象，它基本上可以工作，而不是启动所有检查的对象。而且我真的不知道如何达到同样的目的，基本上是：

*   如果选择了多个对象，请启动对象，执行您的操作（自动单击等），一旦关闭并确认已关闭，则继续执行下一个对象并执行相同的操作，直到完成。我想让它与进度条一起工作，但从来没有真正研究过进度条，因为它们看起来很混乱。

我有一段代码可以找到进程 ID，所以也许我可以用它做点什么，但是进程 ID 在我启动的应用程序上永远不会相同，所以当它们以数组启动时，我遇到了一个问题。

有人可以帮我弄清楚什么以及如何编码/执行此操作吗？

这是我用来完成这项工作的代码：

```
 string pad = Application.StartupPath;

            foreach (string checkedItem in checkedListBox1.CheckedItems)
            {
                if (checkedItem.Contains("."))
                {
                    string str = checkedItem;
                    if (str.Contains("."))
                    {
                        int index = str.IndexOf('.');
                        string folder = str.Substring(0, index);
                        try
                        {
                            bool started = false;
                            var process = new Process();
                            process.StartInfo.FileName = pad + "/data/" + folder + "/" + checkedItem;
                            started = process.Start();
                            var processID = process.Id;
                            var processNAAM = process.ProcessName;
                            textBox1.Text += "Gevonden - ID: " + processID + "     NAAM: " + processNAAM + Environment.NewLine;
                            textBox1.Text += DateTime.Now.ToString("HH:mm:ss", System.Globalization.DateTimeFormatInfo.InvariantInfo) + "  -  " + "Installatie Keuze wordt opgestart." + Environment.NewLine;
                            process.WaitForExit();

                        }
                        catch (Exception)
                        {
                        }
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:04:10.937

首先，您可以使用 CheckedListBox 的[CheckedItems](http://msdn.microsoft.com/en-us/library/system.windows.forms.checkedlistbox.checkeditems.aspx)属性使代码更简单、更短。其次，将字符串从一个复制到另一个是没有意义的。字符串在 .NET 中是不可变的——它们永远不会改变。您可以只保留一份副本并从那里剪切。

接下来，您可以使用中的方法[`System.IO.Path`](http://msdn.microsoft.com/en-us/library/system.io.path.aspx)来剪切没有扩展名的文件名，或者构建完整路径而不必担心“/”的太多或太少。

第三，对于您最初的问题 - 只需调用`WaitForExit`您的`Process`对象使其等待，然后再继续处理进程列表。

第三

```
foreach (string checkedItem in checkedListBox1.CheckedItems)
{
   if (checkedItem.Contains("."))
   {
       string baseName = Path.GetFileNameWithoutExtension(checkedItem);
       string processPath = Path.Combine(pad, "data", baseName, checkedItem); 
       Process process = Process.Start(processPath);
       process.WaitForExit();
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T23:59:39.233

在您开始进程 ( `process.Start()`) 的行之后，只需添加以下内容：

```
process.WaitForExit() 
```

这将暂停包含线程，直到目标进程退出。

# java - 所有警告都是 Eclipse Java 编译器 (3.6.2) 的错误

> ID：14927376
> 
> 赞同：0
> 
> 时间：2013-02-17T23:28:51.937
> 
> 标签：java, eclipse, compiler-errors, compiler-warnings

***从命令行运行时，***^(如何使用 Eclipse Java 编译器 (ECJ) 3.6.2 *) 将警告视为错误？

 *较新的版本（至少 3.8.2）有这个`-err:all`标志，但是这在 3.6.2 中不可用。我还有其他选择吗？

我发现了这个问题（*[Javac：Treat warnings as errors](https://stackoverflow.com/questions/1040074/javac-treat-warnings-as-errors)*），它推荐了未记录的`-Werror`标志，但这似乎只适用于 javac。

**注意：**由于各种完全无法控制的原因，我必须使用 ECJ 3.6.2。所以切换到较新的版本或 javac 不是一种选择（至少，不是在不久的将来）！

* * *

[* 似乎也被称为[“JDT Core Batch Compiler”](http://download.eclipse.org/eclipse/downloads/drops4/R-4.2.1-201209141800/details.php#JDTCORE)。]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T00:17:35.793

我认为没有办法指定 err:all，但有一个不错的解决方法：

1.  创建一个日食项目。
2.  项目 > 属性 > Java 编译器 > 错误/警告。
3.  启用项目特定设置。
4.  手动将所有内容设置为错误级别（烦人，但一次性操作）。
5.  这会生成一个 org.eclipse.jdt.core.prefs 文件。
6.  在编译过程中使用 project/.settings/org.eclipse.jdt.core.prefs 文件。

下面是一个使用 ant 的例子：

```
<javac srcdir="${test-unit.dir}" destdir="${target-test-classes.dir}" 
        classpathref="test.classpath" source="1.6" target="1.6" debug="true" 
        includeAntRuntime="false" compiler="org.eclipse.jdt.core.JDTCompilerAdapter">
    <compilerclasspath location="./libs/ecj-3.7.2.jar" />
    <compilerarg line="-time -properties .settings/org.eclipse.jdt.core.prefs" />
</javac> 
```*

# ruby-on-rails - 设计登录验证：在验证中包含当前 URL

> ID：14927382
> 
> 赞同：0
> 
> 时间：2013-02-17T23:29:47.800
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise, mongoid

我想知道是否有一种方法可以在使用 devise 登录期间检查当前 URL。

假设我有一个带有字段 :url 的用户模型，并且连同 :email 和 :password 一起，您还检查当前 url 是否与用户的 :url 字段匹配。

我在想我应该在设计的 self.find_for_database_authentication 方法中这样做，我目前有这个：

```
def self.find_for_database_authentication(warden_conditions)
    conditions = warden_conditions.dup
    if login = conditions.delete(:login).downcase
      where(conditions).where('$or' => [{:username => /^#{Regexp.escape(login)}$/i}, {:email => /^#{Regexp.escape(login)}$/i}]).first
    else
      where(conditions).first
    end
  end 
```

但是我应该添加什么以便它检查当前的 URL？

注意：我正在使用 mongoid

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T07:02:55.637

您只需将 url 添加到查询中，如下所示：

```
def self.find_for_database_authentication(warden_conditions)
  conditions = warden_conditions.dup
  login = conditions.delete(:login).downcase
  url   = conditions.delete(:url  ).downcase

  if login && url
    where(conditions).where(
      :url => {"$eq" => url},
      '$or' => [
        {:username => /^#{Regexp.escape(login)}$/i},
        {:email    => /^#{Regexp.escape(login)}$/i}
      ]
    ).first
  else
    where(conditions).first
  end
end 
```

哈希在哪里是一种隐含的“和”

# c# - 将数据添加到数据网格

> ID：14927383
> 
> 赞同：0
> 
> 时间：2013-02-17T23:29:51.670
> 
> 标签：c#, wpf, datagrid

我正在处理 ac# 项目，但遇到了一个非常奇怪的问题。

我正在读取文件并处理该行并将结果存储在列表数组中的单独变量中。然后我将遍历列表数组并将其填充到数据网格中。

它成功加载了文件，并为文件中的行创建了一个新行，但每一行都是空白的，并且没有显示任何列。下面是它的外观截图。

![加载文件后查看数据网格](../Images/6b077f16dbc89c7f5b60513e28a9bc38.png)

当我调试它时，我可以查看变量的内容，并且所有文本都按预期存在。下面是我正在使用的代码

```
private void loadNonVerbose(List<LogCatDetails> logCatDetailsList)
        {
            DataSet ds = new DataSet();
            DataTable table = new DataTable();
            DataColumn logLevel = new DataColumn("Log Level", typeof(string));
            DataColumn tag = new DataColumn("Tag", typeof(string));
            DataColumn processID = new DataColumn("Process ID", typeof(int));
            DataColumn message = new DataColumn("Message", typeof(string));

            table.Columns.Add(logLevel);
            table.Columns.Add(tag);
            table.Columns.Add(processID);
            table.Columns.Add(message);

            ds.Tables.Add(table);

            int i = 0;
            foreach (LogCatDetails logCatDetails in logCatDetailsList)
            {
                DataRow row = table.NewRow();
                row[logLevel] = logCatDetails.LogLevel.ToString();
                row[tag] = logCatDetails.Tag;
                row[processID] = logCatDetails.ProcessID;
                row[message] = logCatDetails.Message;
                table.Rows.Add(row);
                if (i == 10)
                {
                    break;
                }
                i++;
            }

            logCatDataGrid.ItemsSource = ds.Tables[0].DefaultView;
        } 
```

感谢您的任何帮助，您可以提供

**更新** 以下是在 XML 中定义数据网格的方式

```
<DataGrid ColumnWidth="*" AutoGenerateColumns="False" Margin="12,51,12,12" Name="logCatDataGrid" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T23:59:28.713

将`AutoGenerateColumns`属性设置`DataGrid`为`True`：

```
<DataGrid ColumnWidth="*" AutoGenerateColumns="True" Margin="12,51,12,12" Name="logCatDataGrid" /> 
```

HighCore 是正确的，我建议您遵循他的指导。`DataSet/DataTable`s 是不需要的。`code-behind`您可以通过简单地将其修改为以下内容来简化这一点：

```
private void loadNonVerbose(List<LogCatDetails> logCatDetailsList)
{
    logCatDataGrid.ItemsSource = logCatDetailsList;
} 
```

# hibernate - Criteria API 加入一个惰性集合

> ID：14927388
> 
> 赞同：0
> 
> 时间：2013-02-17T23:30:04.630
> 
> 标签：hibernate, collections, lazy-loading, criteria-api

我有以下设置

```
@Entity
@Table(name = "Product")
public class Product implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private int id;

    private String name;

    @OneToMany(cascade = CascadeType.MERGE, fetch = FetchType.LAZY)
    private final List<Item> itemlist = new ArrayList<Item>();

    //some other attributes, getter/setter
}

@Entity
@Table(name = "Item")
public class Item implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private int id;

    private Date startDate;

    //some other attributes, getter/setter
} 
```

这些类之间的连接只是单向的。如果双向连接更好（例如在性能方面）？

如何查询在某个日期 (startDate) 之后启动并分配给特定产品的所有项目？

我尝试使用标准 api 来实现这一点：

```
CriteriaBuilder criteriaBuilder = em.getCriteriaBuilder();
CriteriaQuery<Item> criteriaQuery = criteriaBuilder.createQuery(Item.class);
criteriaQuery = criteriaQuery.distinct(true);

Metamodel m = em.getMetamodel();
EntityType<Product> Product_ = m.entity(Product.class);
Root<Product> root = criteriaQuery.from(Product_);
Join join = root.join("itemlist");

Predicate condition = criteriaBuilder.equal(join.get("product"), selectedProduct);
criteriaQuery.where(condition);

criteriaQuery.select(join);

TypedQuery<Item> tq = em.createQuery(criteriaQuery);
System.out.println("result " + tq.getResultList()); 
```

我得到了例外：

org.hibernate.LazyInitializationException：未能延迟初始化角色集合：com.test.Product.itemlist，没有会话或会话已关闭

我的查询或惰性项目列表有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T07:58:22.723

这可能是陈旧的，但我手头有代码。这就是我解决这个问题的方法：

```
 CriteriaBuilder criteriaBuilder = em.getCriteriaBuilder();
    CriteriaQuery<Product> criteriaQuery = criteriaBuilder.createQuery(Product.class);
    Root<Product> queryRoot = criteriaQuery.from(Product.class);

    Predicate idPredicate = criteriaBuilder.equal(queryRoot.get(Product_.id), id);
    criteriaQuery.where(idPredicate);

    TypedQuery<Product> typedQuery = em.createQuery(criteriaQuery);

    Product theProduct = typedQuery.getSingleResult();

    //this triggers the lazy relationship
    theProduct.getItemsList(); 
```

呼！！！！

费德里科

# c# - CLR 类型到 EDM 类型的映射与 EF 6 和 5 不明确？

> ID：14927391
> 
> 赞同：80
> 
> 时间：2013-02-17T23:30:30.563
> 
> 标签：c#, entity-framework, entity-framework-4

请问有人可以帮我解决这个错误吗？

> 指定的架构无效。错误：
> 
> CLR 类型到 EDM 类型的映射不明确，因为多个 CLR 类型与 EDM 类型“City_DAL”匹配。之前发现的CLR类型'CeossDAL.City_DAL'，新发现的CLR类型'CeossBLL.City_DAL'。

我有 DAL 的主要问题，它包含 EF 和 BLL，它包含相同的 DAL 类，但名称空间不同，这就是导致问题的原因

我不知道如何摆脱这些问题，你能帮帮我吗？

如果有人给我示例以使用带有 EF 的 n 层架构，我也将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-02-18T19:37:09.187

不要使用具有相同*非限定*名称的类 - EF 仅使用类名称来标识 EDMX 中映射的类型（忽略命名空间） - 这是允许将不同命名空间中的类映射到单个模型的约定。您的问题的解决方案是在 BLL 中以不同的方式命名您的类。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2015-10-16T16:27:44.780

**解决方法：更改两个相同类之一的属性。**

EF 匹配类名和类属性。所以我只是更改了其中一个 EF 对象的属性名称，错误就消失了。

正如@Entrodus 对其他答案之一的评论：

> 仅当两个类具有相同的名称和相同的参数集时，才会发生 EF 冲突。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-06T08:47:56.650

[这个](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/5a8ea003-c6bc-4fc6-ad2a-634f09447c49/)MSDN 论坛问题可能会有所帮助。它建议将 BLL 和 DAL 类放在单独的程序集中。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-02-08T09:29:40.497

在某些情况下，这更像是一个症状而不是实际问题。对我来说，当我尝试在 Linq 查询中调用函数而不首先调用 .ToList() 时，它通常会弹出。

例如，将我带到这里的错误是因为我这样做了：

```
var vehicles = DB.Vehicles.Select(x => new QuickSearchResult()
{
    BodyText = x.Make + " " + x.Model + "<br/>"
    + "VIN: " + x.VIN + "<br/>"
    + "Reg: " + x.RegistrationNumber +"<br/>"
    + x.AdditionalInfo
    type = QuickSearchResultType.Vehicle,//HERE. Can't use an enum in an IQueryable.
    UniqueId = x.VehicleID
}); 
```

我必须调用 .ToList()，然后遍历每个项目并为其分配类型。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-07-05T16:16:31.603

对于 EF 6.x，我在[https://github.com/aspnet/EntityFramework/issues/941](https://github.com/aspnet/EntityFramework/issues/941)找到了一些注释，并通过向 EDM 类型添加注释在我的解决方案中解决了这个问题。

**我手动编辑了 EDMX 文件**并更改了如下一行：

```
<EntityType Name="CartItem"> 
```

对此：

```
<EntityType Name="CartItem" customannotation:ClrType="EntityModel.CartItem"> 
```

**或者**如果您在其他地方有现有类型，则使用它：

```
<EntityType Name="CartItem" customannotation:ClrType="MyApp.CartItem, MyApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"> 
```

其中*EntityModel*是用于我的 EF 模型的命名空间，而*MyApp*是业务对象的命名空间

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-02-02T04:46:55.630

I got the error above because for both connection strings, I had the same value for metadata specified in my main project's config file, like below:

```
<add name="EntitiesA" connectionString="metadata=res://*/EntitiesA.csdl|res://*/EntitiesA.ssdl|res://*/EntitiesA.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=localhost;initial catalog=MyDatabase;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />

<add name="EntitiesB" connectionString="metadata=res://*/EntitiesA.csdl|res://*/EntitiesA.ssdl|res://*/EntitiesA.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=localhost;initial catalog=MyDatabase;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

I ended up copying the correct connection string from the EntitiesB's project's config file.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-01-31T23:04:39.937

提出问题时这可能不可用，但另一种解决方案是删除 EDMX 并将其重新创建为代码优先实体数据模型。在 EF6 中，通过代码优先，您可以从不同的模型命名空间映射两个具有相同名称的类，而不会产生冲突。

要在 Visual Studio (2013) 中创建实体数据模型，请转到“添加”>“新项目...”>“ADO.NET 实体数据模型”。请务必选择“数据库中的代码优先”选项。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-12-21T21:02:10.763

您可能会收到此错误的另一个原因是：如果您使用具有 edmx 文件的 Assembly.LoadFile 加载自定义程序集，这些文件已经加载到内存中。这会创建实体框架不喜欢的重复类。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-02-01T12:53:29.747

我认为你在实体模型中有一个名为“MyClass”的类 X，在同一个 WorkFolder 或第一个类的扩展中有另一个名为“MyClass”的类。那是我的问题，我解决了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-12-13T09:54:40.440

如果您在 Web 配置中有 2 个连接字符串，但您想使用一个连接字符串您使用动态创建连接字符串其他实体。我的解决方案中有 edmx(db first) 和 code first Entities。我在 Code first 实体中使用这个类。

```
using System;
using System.Collections.Generic;
using System.Configuration;
using System.Data.Entity.Core.EntityClient;
using System.Data.SqlClient;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
namespace Data
{
    public class SingleConnection
    {
        private SingleConnection() { }
        private static SingleConnection _ConsString = null;
        private String _String = null;

        public static string ConString
        {
            get
            {
                if (_ConsString == null)
                {
                    _ConsString = new SingleConnection { _String = SingleConnection.Connect() };
                    return _ConsString._String;
                }
                else
                    return _ConsString._String;
            }
        }

        public static string Connect()
        {
            string conString = ConfigurationManager.ConnectionStrings["YourConnectionStringsName"].ConnectionString;

            if (conString.ToLower().StartsWith("metadata="))
            {
                System.Data.Entity.Core.EntityClient.EntityConnectionStringBuilder efBuilder = new System.Data.Entity.Core.EntityClient.EntityConnectionStringBuilder(conString);
                conString = efBuilder.ProviderConnectionString;
            }

            SqlConnectionStringBuilder cns = new SqlConnectionStringBuilder(conString);
            string dataSource = cns.DataSource;
            SqlConnectionStringBuilder sqlString = new SqlConnectionStringBuilder()
            {
                DataSource = cns.DataSource, // Server name
                InitialCatalog = cns.InitialCatalog,  //Database
                UserID = cns.UserID,         //Username
                Password = cns.Password,  //Password,
                MultipleActiveResultSets = true,
                ApplicationName = "EntityFramework",

            };
            //Build an Entity Framework connection string
            EntityConnectionStringBuilder entityString = new EntityConnectionStringBuilder()
            {
                Provider = "System.Data.SqlClient",
                Metadata = "res://*",
                ProviderConnectionString = sqlString.ToString()
            };
            return entityString.ConnectionString;
        }
    }
} 
```

当我调用实体时

```
private static DBEntities context
{
get
{
    if (_context == null)
        _context = new DBEntities(SingleConnection.ConString);

    return _context;

}
set { _context = value; }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-05-13T17:19:46.903

对我来说，这是因为我试图在错误的上下文实例上访问具有相同名称的类型。

两者`ContextA`兼有。`ContextB`_ `SomeType`我试图`ContextA.SomeType`访问`ContextB`.

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-08-10T15:58:09.987

我发现使用自定义注释解决方案适用于 EF 6.2.0。只需确保在 ConceptualModels 节点中进行更改并为该类型使用完整的命名空间。

```
<edmx:ConceptualModels>
  <Schema Namespace="Sample.Access.Data.Ef" Alias="Self" annotation:UseStrongSpatialTypes="false" xmlns:annotation="http://schemas.microsoft.com/ado/2009/02/edm/annotation" xmlns:customannotation="http://schemas.microsoft.com/ado/2013/11/edm/customannotation" xmlns="http://schemas.microsoft.com/ado/2009/11/edm">
    <EntityType Name="DbTableName" customannotation:ClrType="Sample.Access.Data.Ef.DbTableName, Sample.Access.Data, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null">
      <Key>
        <PropertyRef Name="DbTableNameId" />
      </Key>
      <Property Name="DbTableNameId" Type="Int32" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
      <Property Name="OptionName" Type="String" MaxLength="100" FixedLength="false" Unicode="false" Nullable="false" />
      <Property Name="Value" Type="String" MaxLength="500" FixedLength="false" Unicode="false" Nullable="false" />
      <Property Name="UpdatedDate" Type="DateTime" Nullable="false" Precision="3" />
    </EntityType>
    <EntityContainer Name="MyEntities" annotation:LazyLoadingEnabled="true" customannotation:UseClrTypes="true">
      <EntitySet Name="DbTableNames" EntityType="Self.DbTableName" />
    </EntityContainer>
  </Schema>
</edmx:ConceptualModels> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-08-13T16:53:37.407

只需将 EntityFramework 添加为“数据库中的代码优先”而不是“数据库中的 EF 设计器”。这解决了我的问题，但它有一个黑暗的一面，如果您更改数据库，则必须删除所有类并再次添加它，或者只是编辑类，我在更改列的属性时使用最后一个，例如“允许null" 或字符串的大小。但是，如果您添加列，我建议您删除并再次添加这些类。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-10-02T17:29:47.807

我能够在不重命名类、属性或元数据的情况下解决此问题。

我的项目设置是在 DAL 项目中创建实体对象的 T4 转换，以及在域项目中创建域对象的 T4 转换，两者都引用 EDMX 以生成相同的对象，然后我将 DAL 对象映射到域对象.

仅当我在查询中从域程序集中引用其他类（在我的情况下为枚举）时才会发生错误。当我删除它们时，错误就消失了。看起来 EF 正因此加载我的域程序集，看到其他同名的类，然后炸毁了。

为了解决这个问题，我制作了一个单独的程序集，其中仅包含我的 T4 转换后的域类。由于我从不需要在查询中使用这些（仅在要映射到的查询之后），我不再有这个问题。这似乎比下面的答案更干净、更容易。

* * *

## 回答 #15

> 赞同：-9
> 
> 时间：2015-02-09T12:07:58.007

您可以下载一个名为 AutoMapper 的库。它可以帮助您定义从一种类型到另一种类型的类映射。

```
Mapper.CreateMap<Model.FileHistoryEFModel, DataTypes.FileHistory>();
Mapper.CreateMap<DataTypes.FileHistory, Model.FileHistoryEFModel>(); 
```

# c++ - 从函数返回动态分配的数组会导致内存泄漏吗？

> ID：14927394
> 
> 赞同：5
> 
> 时间：2013-02-17T23:30:35.867
> 
> 标签：c++

我问这个问题是为了让自己摆脱对以下程序的困惑。我知道在某些上下文中使用数组会使数组衰减为指向其第一个元素的单个指针。我有一个通过指针返回这个数组的函数（这个函数是使用创建的`new[]`）。数组会衰减，导致指针仅指向第一个元素吗？这是一个例子：

```
int *foo() {
    int *t = new int[10];

    return t;
}

int main() {
    int *p = foo();
} 
```

这就是混乱的地方。我不知道是`p`指向第一个元素还是指向整个数组。所以我有以下问题：

*   通过指针返回数组是否会导致它的衰减（并因此导致内存泄漏）？
*   是否`p`指向数组的第一个元素？
*   如果上述两个为真，使用`delete[]`on会导致未定义的行为吗？`p`

我希望可以回答这些问题，以便我可以完全理解这个程序。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T23:34:35.680

> 通过指针返回数组是否会导致它的衰减（并因此导致内存泄漏）？

您实际上正在返回 的副本`t`，它是一个指针。它已经指向动态分配数组的第一个元素。如果你没有调用它，只会有内存泄漏`delete []`。

> p 是否指向数组的第一个元素？

是的

> 如果以上两个为真，在 p 上使用 delete[] 会导致未定义的行为吗？

不，这样做很好。只要函数返回指向动态分配数组的指针。

您已经发现了这个习惯用法的一个严重问题：您不知道您是否正在获取指向元素的指针、指向动态分配数组的第一个元素的指针、指向全局的指针。您无法通过查看函数的返回类型来知道您是否需要调用`delete`,`delete []`或根本不调用 delete。解决方案：不要返回指针！返回一个更好地表达正在发生的事情的类型，并且负责管理自己的资源（`std::vector`, `std::array`, `std::unique_ptr`, `std::shared_ptr`...）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-17T23:35:30.127

您的函数**分配内存并返回指向**它的指针，或者从技术上讲，返回您正确知道的第一个元素。

之后内存会发生什么**取决于调用者**。这意味着当返回的数组不再使用时，调用者应该使用**`delete[]`**. 如果调用者不遵守此规则，则程序会泄漏内存。如果你写这样的代码，你应该在你的方法的文档中强烈强调这一点！

更现代的解决方案是使用**智能指针**。智能指针本身就是保护底层指针的对象（不是指向对象的指针）。根据我们在这里讨论的智能指针的类型，它会在调用者超出范围时自动删除（它唯一地持有分配内存的所有权），或者当它不再被其他人使用（共享所有权）时.

有关详细信息，请参阅此问题：[智能指针和数组](https://stackoverflow.com/questions/6713484/smart-pointers-and-arrays)

现在，如果该函数像您的问题中那样编写，因此它返回一个原始指针而不是一个智能指针，您仍然可以通过在之后包装数组来利用调用者中智能指针的功能。

关于元素个数/要删除的内存量，完全取决于 的实现`delete[]`，所以不用担心调用者的元素个数。但是，您也无法查询要使用它们的元素的数量。如果您需要元素的数量，您也必须返回它们，也许通过“输出参数”。

在现代 C++ 中，我**强烈建议使用**不同于原始数组的数据结构，`std::vector`例如，或者`std::map`如果您需要*关联*容器，以及诸如“谁删除了这个分配的内存？”之类的问题。消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T23:37:14.863

> 如果以上两个为真，在 p 上使用 delete[] 会导致未定义的行为吗？

不，不是 delete[] p 会导致内存泄漏！

但是，delete[]*神奇地*知道数组有多长，sizeof(p) 不知道，因为分配器会跟踪分配的空间。然而 sizeof 是在编译时生成的固定值

# scala - 如何在 Scala 中使用优先级队列？

> ID：14927395
> 
> 赞同：17
> 
> 时间：2013-02-17T23:30:39.887
> 
> 标签：scala, tuples, priority-queue, scala-collections

我正在尝试在 Scala（2.10 版）中实现 A* 搜索，但我遇到了障碍——我不知道如何使用 Scala 的优先级队列。这似乎是一项简单的任务，但在 Google 上搜索并没有发现任何结果（除了在 2.8 版中停止工作的单个代码示例）

我有一组正方形，用`(Int, Int)`s 表示，我需要用`Int`s 表示的优先级插入它们。在 Python 中，这非常简单，因为您只有一个键、值对列表并使用 heapq 函数对其进行排序。但似乎 Scala 的元组甚至没有可比性。

那么你是怎么做到的呢？考虑到它应该是多么简单，我对完全缺乏在线信息感到惊讶。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-17T23:48:17.160

There is actually [pre-defined lexicographical order for tuples](https://github.com/scala/scala/blob/v2.10.0/src/library/scala/math/Ordering.scala#L358) -- [but you need to import it](https://stackoverflow.com/questions/11102393/how-to-lexicographically-compare-scala-tuples):

```
import scala.math.Ordering.Implicits._ 
```

Moreover, you can define your own ordering. Suppose I want to arrange tuples, based on the difference between first and second members of the tuple:

```
scala> import scala.collection.mutable.PriorityQueue
//  import scala.collection.mutable.PriorityQueue

scala> def diff(t2: (Int,Int)) = math.abs(t2._1 - t2._2)
// diff: (t2: (Int, Int))Int

scala> val x = new PriorityQueue[(Int, Int)]()(Ordering.by(diff))
// x: scala.collection.mutable.PriorityQueue[(Int, Int)] = PriorityQueue()

scala> x.enqueue(1 -> 1)

scala> x.enqueue(1 -> 2)

scala> x.enqueue(1 -> 3)

scala> x.enqueue(1 -> 4)

scala> x.enqueue(1 -> 0)

scala> x
// res5: scala.collection.mutable.PriorityQueue[(Int, Int)] = PriorityQueue((1,4), (1,3), (1,2), (1,1), (1,0)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T23:45:49.220

Indeed, there is no implicit ordering on pairs of integers (a, b). What would it be? Perhaps they are both positive and you can use (a - 1.0/b)? Or they are not, and you can use, what, (a + atan(b/pi))? If you have an ordering in mind, you can consider wrapping your pairs in a type that has your ordering.

# r - 多种测试方法

> ID：14927404
> 
> 赞同：1
> 
> 时间：2013-02-17T23:32:08.097
> 
> 标签：r, statistics

我想模拟不同种类的多重测试校正的效果，例如`Bonferroni`, `Fisher's LSD`, `DUncan`, `Dunn-Sidak Newman-Keuls`,`Tukey`等`Anova`...

我想我应该简单地运行一个常规的`Anova`. 然后接受`p.value`我通过使用计算的显着 s `p.adjust`。但我不明白这个`p.adjust`功能是如何工作的。能给我一些见解`p.adjust()`吗？

运行时：

```
> p.adjust(c(0.05,0.05,0.1),"bonferroni")
# [1] 0.15 0.15 0.30 
```

有人可以解释这是什么意思吗？

谢谢您的回答。我对这一切都略知一二。但是我还是不明白 p.adjust 的输出。我希望...

> P.adjust(0.08,'bonferroni',n=10)

... 将返回 0.008 而不是 0.8。n=10 并不意味着我要进行 10 次比较。并且不是 0.08 的“原始 alpha”（我的意思是如果我有一个简单的比较，我会用来拒绝 NULL 假设的阈值）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T23:48:20.100

You'll have to read about each multiple testing correction technique, whether it be `False Discovery Rate (FDR)` or `Family-Wise Error Rate (FWER`). (Thanks to @thelatemail for pointing out to expand the abbreviations).

Bonferroni correction controls the `FWER` by setting the significance level `alpha` to `alpha/n` where `n` is the number of hypotheses tested in a typical multiple comparison (here `n=3`).

Let's say you are testing at 5% alpha. Meaning if your p-value is < 0.05, then you reject your NULL. For `n=3`, then, for Bonferroni correction, you could then divide `alpha` by 3 = 0.05/3 ~ 0.0167 and then check if your p-values are < 0.0167\.

Equivalently (which is directly evident), instead of checking `pval < alpha/n`, you could take the `n` to the other side `pval * n < alpha`. So that the `alpha` remains the same value. So, your p-values get multiplied by `3` and then would be checked if they are < alpha = 0.05 for example.

Therefore, the output you obtain is the `FWER controlled p-value` and if this is < alpha (5% say), then you would reject the NULL, else you'd accept the NULL hypothesis.

For each tests, there are different procedures to control the false-positives due to multiple testing. Wikipedia might be a good start point to learn about other tests as to how they correct for controlling false-positives.

However, your output of `p.adjust`, gives in general `multiple-testing corrected p-value`. In case of Bonferroni, it is FWER controlled p-value. In case of BH method, it is FDR corrected p-value (or also otherwise called q-value).

Hope this helps a bit.

# mysql - 我们如何通过表中的字段来控制动态排序？

> ID：14927407
> 
> 赞同：1
> 
> 时间：2013-02-17T23:33:15.930
> 
> 标签：mysql, sql, delphi

我不知道我想要的问题是否正确，但是：

我在表格中有一组问题，这些问题将按特定顺序向客户提出，有时我们需要插入新问题，还需要将问题向下或向上移动。

我创建了一个名为 position 的字段，以及一些用于增加和减少它的位置的按钮，因此我可以使用 a`SELECT ... ORDER BY`但它不是很好，因为有时两个或多个问题得到相同的位置编号并且 MySQL 选择它们的顺序。

那么让这个完美工作的正确方法是什么？

*注意：我不能使用索引来做到这一点。这对某些人来说是显而易见的，但对其他人来说，不是......*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T03:14:11.133

`position`如果我理解正确，那么当您插入新问题、更改现有问题的位置或删除问题时，您需要一种方法来正确管理列中的值序列。

假设您有以下问题表的 DDL：

```
CREATE TABLE `questions` (
    `id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT,
    `question` VARCHAR(256) DEFAULT NULL,
    `position` INT(11) DEFAULT NULL,
    PRIMARY KEY (`id`)
); 
```

和这样的初始数据集

```
+----+------------+----------+
| id | question   | position |
+----+------------+----------+
|  1 | Question 1 |        1 |
|  2 | Question 2 |        2 |
|  3 | Question 3 |        3 |
+----+------------+----------+ 
```

**要获得您做**的问题的有序列表****

 **```
SELECT * 
  FROM questions 
 ORDER BY position; 
```

**要将新问题插入问题列表的末尾，**请执行

```
INSERT INTO questions (question, position) 
SELECT 'New Question', COALESCE(MAX(position), 0) + 1
  FROM questions; 
```

结果将是：

```
+----+--------------+----------+
| id | question     | position |
+----+--------------+----------+
|  1 | Question 1   |        1 |
|  2 | Question 2   |        2 |
|  3 | Question 3   |        3 |
|  4 | New Question |        4 |
+----+--------------+----------+ 
```

**要将新问题插入列表中的特定位置**（假设位置 3），您可以使用两个查询：

```
UPDATE questions
   SET position = position + 1
 WHERE position >= 3;

INSERT INTO questions (question, position) 
VALUES ('Another Question', 3); 
```

现在你有

```
+----+------------------+----------+
| id | question         | position |
+----+------------------+----------+
|  1 | Question 1       |        1 |
|  2 | Question 2       |        2 |
|  5 | Another Question |        3 |
|  3 | Question 3       |        4 |
|  4 | New Question     |        5 |
+----+------------------+----------+ 
```

**要交换两个问题的位置**（例如，ID 为 2 和 5 的问题），您可以

```
UPDATE questions AS q1 INNER JOIN 
       questions AS q2 ON q1.id = 2 AND q2.id = 5
   SET q1.position = q2.position,
       q2.position = q1.position 
```

让我们看看我们有什么

```
+----+------------------+----------+
| id | question         | position |
+----+------------------+----------+
|  1 | Question 1       |        1 |
|  5 | Another Question |        2 |
|  2 | Question 2       |        3 |
|  3 | Question 3       |        4 |
|  4 | New Question     |        5 |
+----+------------------+----------+ 
```

这正是当用户单击您的向上和向下按钮时您所做的，提供正确的问题 ID。

现在，如果您想在删除问题时保持位置顺序没有间隙，您可以这样做。

**要从列表末尾删除，**请使用简单删除

```
DELETE FROM questions WHERE id=4; 
```

结果

```
+----+------------------+----------+
| id | question         | position |
+----+------------------+----------+
|  1 | Question 1       |        1 |
|  5 | Another Question |        2 |
|  2 | Question 2       |        3 |
|  3 | Question 3       |        4 |
+----+------------------+----------+ 
```

**删除列表中间（或开头）的问题**需要更多的工作。假设我们要删除 id=5 的问题

```
-- Get the current position of question with id=5
SELECT position FROM questions WHERE id=5;
-- Position is 2
-- Now delete the question
DELETE FROM questions WHERE id=5;
-- And update position values
UPDATE questions
   SET position = position - 1
 WHERE position > 2; 
```

最后我们有

```
+----+--------------+----------+
| id | question     | position |
+----+--------------+----------+
|  1 | Question 1   |        1 |
|  2 | Question 2   |        2 |
|  3 | Question 3   |        3 |
+----+--------------+----------+ 
```

**更新**：为了让我们的生活更轻松，我们可以将它全部包装在存储过程中

```
DELIMITER $$
CREATE PROCEDURE add_question (q VARCHAR(256), p INT)
BEGIN

IF p IS NULL OR p = 0 THEN
    INSERT INTO questions (question, position) 
    SELECT q, COALESCE(MAX(position), 0) + 1
      FROM questions;
ELSE
    UPDATE questions
       SET position = position + 1
     WHERE position >= p;

    INSERT INTO questions (question, position) 
    VALUES (q, p);
END IF;
END$$
DELIMITER ;

DELIMITER $$
CREATE PROCEDURE swap_questions (q1 INT, q2 INT)
BEGIN
    UPDATE questions AS qs1 INNER JOIN 
           questions AS qs2 ON qs1.id = q1 AND qs2.id = q2
       SET qs1.position = qs2.position,
           qs2.position = qs1.position;
END$$
DELIMITER ;

DELIMITER $$
CREATE PROCEDURE delete_question (q INT)
BEGIN
    SELECT position INTO @cur_pos FROM questions WHERE id=q;
    SELECT MAX(position) INTO @max FROM questions;

    DELETE FROM questions WHERE id=q;

IF @cur_pos <> @max THEN 
    UPDATE questions
       SET position = position - 1
     WHERE position > @cur_pos;
END IF;
END$$
DELIMITER ; 
```

并像这样使用它们：

```
-- Add a question to the end of the list
CALL add_question('How are you today?', 0);
CALL add_question('How are you today?', NULL);

-- Add a question at a specific position
CALL add_question('How do you do today?', 3);

-- Swap questions' positions
CALL swap_questions(1, 7);

-- Delete a question
CALL delete_question(2); 
```**

# javascript - 使用 Javascript for Firefox 插件捕获浏览器屏幕（完整且可见）

> ID：14927411
> 
> 赞同：1
> 
> 时间：2013-02-17T23:34:12.303
> 
> 标签：javascript, html, firefox, upload, firefox-addon

标题非常不言自明，但我将在这里进行更深入的解释。我的图像托管网站（目前已关闭）有一个 Firefox 扩展。

它目前有两个特点：

*   右击图片远程上传
*   右键单击图像，弹出 Javascript 窗口以输入新宽度并上传

扩展仍然需要一个（或两个）功能，允许用户上传浏览器上当前可见的内容或浏览器的完整捕获（包括滚动条下的内容）。

# 我试过的：

我尝试从其他扩展中复制各种代码，并将它们与我自己的结合起来。它们包括一些`canvas`我不太了解的东西。我能够以某种方式获得**base64**图像字符串（我不完全记得如何）。使用该字符串，我认为实现目标的最佳方法是将其发送到我的图像主机，`XMLHttpRequest`并在我的主机中创建图像。这`ResponseText`将是图像的链接。

正如你所看到的，我在这里做的太多了——我显然不需要在我的服务器端为这个问题做额外的处理。我认为有一些方法可以仅处理扩展中的所有内容，而无需在我的服务器端进行额外编码（如果我错了，请纠正我）。

# 实际问题

这是附加组件：[https](https://addons.mozilla.org/en-US/firefox/addon/imgit/)
://addons.mozilla.org/en-US/firefox/addon/imgit/ 正如您可以看到扩展添加的两个上下文菜单，我需要第三个上下文菜单，它向右有一个箭头，可以打开另一个菜单，其中包含我需要的两个新选项：

*   捕获可见屏幕并上传
*   捕获全屏并上传

第一个选项应该捕获并上传浏览器中可见的内容，不包括滚动条下的内容。第二个选项应该捕获所有内容并将其上传到我的网站，包括滚动条下的内容。

添加上下文菜单并不是什么大问题，但让它们按照我想要的方式运行是我遇到的问题。我不知道如何开始，我对网络的研究无法让我走得更远。通过 Javascript 以某种方式创建图像（`canvas`我不知道如何使用）并将 base64 编码的字符串发送到我的网站实际上可以工作，但是拍摄快照并将其设为 base64 编码是问题所在。我也不确定 Firefox 扩展是否真的让我使用 Ajax 来发送/接收数据。

# 我需要你什么

我需要一个合乎逻辑的方法来解决这个问题。如果您有想法，请回答并显示代码片段将不胜感激。我不是 Javascript 专家，但是有了一些关于如何开始的信息，我可以让自己摆脱这种混乱。

实现我想要的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:29:41.053

查看 devtools 的 screenshot 命令的[grabScreen](http://mxr.mozilla.org/mozilla-release/source/browser/devtools/commandline/CmdScreenshot.jsm#96)功能。

# c# - 使类将数据附加到表单上的文本框

> ID：14927416
> 
> 赞同：0
> 
> 时间：2013-02-17T23:34:44.207
> 
> 标签：c#, class

基本上我有一个处理一些 websocket 事情的类，当收到一条消息时，你在下面看到的类代码被触发。消息框可以正常触发并显示数据，但文本没有输入到文本框中，它似乎只是崩溃而没有错误。

表格代码：

```
CreateSocket cs = new CreateSocket();
cs.Form = this;

public void AddMessage(string Msg)
{
    TxtMessageList.Text += Msg + Environment.NewLine;
} 
```

班级代码：

```
public FrmMain Form;
Form.AddMessage(Json.Message.Sender.Username + ": " + Json.Message.Message); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T23:43:04.430

我将做一个假设，即您没有将表单的现有实例传递给您的类。

你需要这样做：

```
class YourAppenderClass {
    private FrmMain _form;

    public YourAppenderClass(FrmMain form) {
        _form = form;
    }

    public void AddMessage(string msg) {
        _form.TxtMessageList.Text += msg + Environment.NewLine;
    }
} 
```

您将现有实例 ( `this`) 传递给您的类。您使用该实例来做您需要的事情。

..并这样称呼它：

```
YourAppenderClass appender = new YourAppenderClass(this); // "this" is your main form
appender.AddMessage("Blah"); 
```

或者，您可以改为使用现有实例来调用您提供的非静态方法：

```
// somewhere in the class..
_form.AddMessage("Blah"); // _form works because it is the instance you passed in 
```

# php - 带有 Wikipedia API 的 PHP 脚本突然变慢了，可能是什么问题？

> ID：14927417
> 
> 赞同：0
> 
> 时间：2013-02-17T23:34:45.330
> 
> 标签：php, performance, apache, file-get-contents, wikipedia-api

我运行一个 php 脚本，该脚本使用 wikipedia api 根据包含标题和发行年份的长列表来定位有关某些电影的 wikipedia 页面。每个查询平均需要 1-2 秒，我每分钟大约执行 5 次查询。这多年来一直运作良好。但是从 2 月 11 日开始，它突然变得非常慢：现在每个查询 30 秒似乎是常态。

这是我列表中随机电影的示例，我的脚本加载的链接带有 file_get_contents();

[http://en.wikipedia.org/w/api.php?action=query&prop=revisions&rvprop=content&format=yaml&rvsection=0&titles=Deceiver_(电影)](http://en.wikipedia.org/w/api.php?action=query&prop=revisions&rvprop=content&format=yaml&rvsection=0&titles=Deceiver_%28film%29)

我可以直接把这个链接放在我的浏览器中，加载和打开它不超过几秒钟。所以我不认为维基百科的 api 服务器突然变慢了。当我在浏览器中从我的网络服务器加载指向我的 php 脚本的链接时，需要 20 到 40 秒才能加载页面并显示一个查询的结果。当我从我的网络服务器的命令行运行 php 脚本时，我的加载时间也很慢。我的脚本仍然不时将一些结果保存到数据库中，所以我可能也没有被阻止。

我的 php 脚本的其他部分并没有变慢。使用维基百科 api 的结果完成了一大堆计算，所有这些仍然以正常速度运行。所以我的网络服务器仍然健康。负载总是很低，我什至没有将此服务器用于其他用途。我重新启动了 apache，但发现加载时间没有差异。

我的问题：

*   wikipedia api 系统最近有什么变化吗？也许我使用它的方式已经过时了，我需要使用新的东西？

*   我在哪里可以找到这种缓慢加载的原因？我已经挖掘了错误文件并测试了我可以测试的内容，但我什至不知道哪里出了问题。如果我知道要寻找什么，我可能会很容易地解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-27T22:43:57.647

`git log --until=2013-02-11 --merges`在 operations/puppet.git 中显示当天没有变化。听起来像是您的 DNS 问题或类似问题。

# ruby-on-rails - 使用 Ruby 标准 Logger 每天只创建一个日志

> ID：14927418
> 
> 赞同：5
> 
> 时间：2013-02-17T23:35:07.117
> 
> 标签：ruby-on-rails, ruby, logging

我正在使用 ruby​​ 标准记录器，我想要每天轮换一次，所以在我的代码中我有：

```
Logger.new("#{$ROOT_PATH}/log/errors.log", 'daily') 
```

它运行良好，但它创建了两个文件`errors.log.20130217`和`errors.log.20130217.1`.

我怎样才能强制它每天只创建一个文件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T08:58:52.053

您的代码对于长时间运行的应用程序是正确的。

发生的事情是您在某一天不止一次运行代码。

第一次运行它时，Ruby 会创建一个日志文件“errors.log”。

当日期改变时，Ruby 将文件重命名为“errors.log.20130217”。

但不知何故，您再次运行代码，也许您正在运行两个使用相似代码的应用程序（或进程、或工作程序或线程），并且您的记录器看到文件名“errors.log.20130217”已经存在。

您的记录器不想破坏该文件，但仍需要将“errors.log”重命名为日期，因此记录器创建了一个不同的文件名“errors.log.20130217.1”

要解决这个问题，只需运行一次代码。

如果您正在运行多个名为“foo”和“bar”的应用程序，则使用“foo-errors.log”和“bar-errors.log”等日志文件名。或者，如果您使用多个工作人员，请为每个工作人员提供自己的日志文件名（例如，通过使用工作人员的进程 ID 或工作人员池数组索引，或者您正在跟踪您的工作人员）。

如果您真的想使用 Ruby 记录器解决此问题，则需要覆盖记录器 #shift_log_period 以便它不会选择“.1”后缀。您可以将 Logger 子类化并编写已磨损的 #shift_log_period 以检测该日期是否存在现有日志文件，如果有，请使用它而不是重命名文件。

这是从记录器导致它的代码：

```
def shift_log_period(period_end)
  postfix = period_end.strftime("%Y%m%d") # YYYYMMDD
  age_file = "#{@filename}.#{postfix}"
  if FileTest.exist?(age_file)
    # try to avoid filename crash caused by Timestamp change.
    idx = 0
    # .99 can be overridden; avoid too much file search with 'loop do'
    while idx < 100
      idx += 1
      age_file = "#{@filename}.#{postfix}.#{idx}"
      break unless FileTest.exist?(age_file)
    end
  end
  @dev.close rescue nil
  File.rename("#{@filename}", age_file)
  @dev = create_logfile(@filename)
  return true 
```

没有解决方案 (AFAIK) 使用 Ruby 记录器及其内置的旋转器来同时管理由多个应用程序（又名工作人员、进程、线程）写入的日志。这是因为每个应用程序都有自己的日志文件句柄。

或者，使用任何好的日志旋转器工具，例如 Tin Man 用户在问题评论中建议的 logrotate：http: [//linuxcommand.org/man_pages/logrotate8.html](http://linuxcommand.org/man_pages/logrotate8.html)

一般来说，logrotate 将是您最好的选择恕我直言。

# ruby-on-rails - Rails：种子，关系

> ID：14927426
> 
> 赞同：-1
> 
> 时间：2013-02-17T23:36:00.257
> 
> 标签：ruby-on-rails, seed

我想在我的数据库中推送虚拟内容。我的模型中有一个 1:n 的关系。

`seeds.rb`：

```
city= City.create([{:ort_name=>"Hagen"}])
person= Person.create([{:name = "root"}]) 
```

我试试这个

```
city << person 
```

和

```
person.city_id = city.id 
```

你会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:59:20.657

你的问题有点含糊。看起来你有一个城市有很多人的关系。如果是这样，那么您可以像这样分配关系：

```
city.people << person 
```

或这个

```
person.city_id = city.id
person.save 
```

此方法需要`save`，因为分配`city_id`给`person`不会将更改写入数据库。

你可以在你的`rails console`

# ruby-on-rails - 在 Rails 动态菜单中将 grouped_collection_select 转换为简单表单？

> ID：14927430
> 
> 赞同：0
> 
> 时间：2013-02-17T23:36:48.677
> 
> 标签：ruby-on-rails, drop-down-menu, associations, simple-form, bootstrap-sass

我有以下（和工作的）动态菜单/下拉菜单，它允许您选择一个属性类型，然后选择一个具有常规 rails 表单的属性子类型：

properties.js.coffee

```
jQuery ->
  prop_sub_types = $('#property_prop_sub_type_id').html()
  $('#property_prop_type_id').change ->
    prop_type = $('#property_prop_type_id :selected').text()
    escaped_prop_type = prop_type.replace(/([ #;&,.+*~\':"!^$[\]()=>|\/@])/g, '\\$1')
    options = $(prop_sub_types).filter("optgroup[label='#{escaped_prop_type}']").html()
    if options
      $('#property_prop_sub_type_id').html(options)
    else
      $('#property_prop_sub_type_id').empty() 
```

_form.html.erb

```
<%= form_for(@property) do |f| %>

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :prop_type_id, 'Property Type' %><br />
    <%= f.collection_select :prop_type_id, PropType.order(:name), :id, :name, :prompt => "-- Select Property Type --" %>
  </div>
  <div class="field">
    <%= f.label :prop_sub_type_id, 'Property Subtype' %><br />
    <%= f.grouped_collection_select :prop_sub_type_id, PropType.order(:name), :prop_sub_types, :name, :id, :name, :prompt => "-- Select Property Subtype --"  %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

这工作正常。但是，我想将它集成到一个已经使用[简单表单](https://github.com/plataformatec/simple_form)gem 设置的更大的应用程序中。我还通过[bootstrap-sass](https://github.com/thomas-mcdonald/bootstrap-sass)使用 twitter 引导程序。

我能得到的最接近的表格是：

```
<div class="field">
        <%= f.association :prop_type, :input_html => { :id => "prop_type_id", :class => "span5" }, :prompt => "-- Select Property Type --" %>
        <%= f.association :prop_sub_type, :input_html => { :id => "prop_sub_type_id", :class => "span5" }, :prompt => "-- Select Property Subtype --" %>
</div> 
```

*注意*：我必须将 :prop_type_id 更改为 :prop_type 以防止应用程序抛出错误。

但这不起作用 - 第二个下拉菜单不会映射到第一个。我在我的 java/coffeescript 中做错了什么？对于第二个下拉菜单，是否有“grouped_association”之类的东西或类似的东西？

这甚至可行吗，还是我应该将整个表单转换回标准 rails 格式？

**更新**

我能够让它工作，但将 erb 粘贴到 div 中，如下所示：

```
 <div class="field">
   <%= f.collection_select :prop_type_id, PropType.order(:name), :id, :name, :prompt => "-- Select Property Type --" %>
</div>
<div class="field">
   <%= f.grouped_collection_select :prop_sub_type_id, PropType.order(:name), :prop_sub_types, :name, :id, :name, :prompt => "-- Select Property Subtype --"  %>
</div> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-17T23:48:45.240

您应该查看`simple_form_for`github 页面中的 Group 部分。我正在做与您正在做的事情类似的事情，并找到了这个部分。它给了我需要去的方向。我没有做`f.association`我在其他部分使用的操作，而是最终使用`f.input`了`:group_select`and`:group_method`

`f.input :country_id, collection: @continents, as: :grouped_select, group_method: :countries`

从

[simple_form_for github 页面](https://github.com/plataformatec/simple_form)

# email - 如何设置phpmailer？

> ID：14927431
> 
> 赞同：0
> 
> 时间：2013-02-17T23:37:07.570
> 
> 标签：email, phpmailer

我想使用 phpmailer 发送电子邮件，但据我所知，它需要我指出 SMTP 服务器。既然我不知道，有没有办法只使用它而不进行配置，或者可能有其他插件可以完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:11:45.190

确保您没有发送垃圾邮件。

如果邮件进入垃圾文件夹，这并不意味着您的 mail() 函数不起作用。它与邮件接收者域完成的垃圾邮件控制活动有关。

如果您出于有效目的这样做，请尝试使用 dk/dkim 签名对您的邮件进行签名，并向您的域提供 SPF 记录。

# android - 通过蓝牙将数据从 Android 发送到 C++ 服务器

> ID：14927433
> 
> 赞同：1
> 
> 时间：2013-02-17T23:37:18.543
> 
> 标签：android, c++, c, sockets, bluetooth

所以我目前正在尝试将基本字符从我的 android 设备发送到 C++/C 服务器。我知道有很多记录在案的方法可以向 Java 服务器发送和接收，但我一直不知道如何通过蓝牙使用完全不同的语言来做到这一点。

通过以下方式使用蓝牙插座的常用方法

```
 createInsecureRfcommSocketToServiceRecord(applicationUUID) 
```

似乎不是正确的方法，因为它适用于使用监听功能的并行服务器。

在 C++ 方面，这是我能找到的最佳实现：

[http://people.csail.mit.edu/albert/bluez-intro/c404.html](http://people.csail.mit.edu/albert/bluez-intro/c404.html)

但是我一直无法找到一种方法来让我的 java android 代码与这个 c 服务器代码对话。

有人对如何做到这一点有任何建议吗？

# scheme - 倒转球拍

> ID：14927435
> 
> 赞同：1
> 
> 时间：2013-02-17T23:37:28.520
> 
> 标签：scheme, racket

我把字母倒过来了。`p`我似乎`d`做不到的是让一串单词颠倒过来。像`house`倒过来一样`ǝsnoɥ`。任何帮助，将不胜感激。我快完成了。我正在使用带有列表缩写的初学者。

```
#;(first (first l2))
#;(first (rest l2))
#;(first (rest (first l2)))

(define (helper character list)
  (cond [(string=? character (first (first list))) (first (rest (first list)))]
        [else (helper character (rest list))]))

(check-expect (helper "p" table-1) "d")
(check-expect (helper "t" table-1) "ʇ")

;;_______________________________________________________________________________

(define (upside-down string)

(upside-down "cat") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:48:46.020

关于您的`helper`程序的一些评论：

*   `character`您应该为不在列表中的情况添加一个额外的条件- 如果发生这种情况，只需返回相同的`character`. 否则会出现错误
*   参数不应命名`list`，这是一个内置过程，覆盖它是一种不好的做法
*   在继续之前对其进行彻底测试。

整理好之后，下面是你如何实现`upside-down`，填空：

```
(define (upside-down str)
  (<???>                       ; finally, do the opposite of explode on the list
   (map (lambda (c)            ; map over each of the characters
          (<???> <???> <???>)) ; call helper on the character
        (<???> (<???> str))))) ; reverse the exploded string 
```

如果您不允许使用`map`or `lambda`，则实现一个`convert`过程，该过程遍历字符串中的每个字符并应用于`helper`每个字符，返回一个带有应用结果的列表 - 基本上，实现您自己[`map`](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket%2Fprivate%2Fmap..rkt%29._map%29%29)的始终适用`helper`于每个字符输入列表中的元素：

```
(define (convert lst)
  <???>)

(convert '("c" "a" "t"))
=> '("ɔ" "ɐ" "ʇ") 
```

现在我们可以`upside-down`使用`convert`：

```
(define (upside-down str)
  (<???>                   ; finally, do the opposite of explode on the list
   (convert                ; use our shiny new procedure
    (<???> (<???> str))))) ; reverse the exploded string 
```

# html - HTML :blur 将固定项目打错位置

> ID：14927436
> 
> 赞同：1
> 
> 时间：2013-02-17T23:38:10.747
> 
> 标签：html, ios, css

我有一个固定的元素，它应该在屏幕中居中。我里面也有输入元素。正如它应该的那样，当输入被关注时，带有固定元素的整个页面会移动。

但是，如果用户点击“Go”键或我创建的隐藏整个固定元素并模糊输入的按钮，下次我尝试显示固定元素时，它仍然不合适（页面返回正常）。它显示从屏幕底部滑出一半（即使没有输入焦点并且键盘已按下）。

任何帮助，将不胜感激。我一直在为此烦恼。这出现在 PhoneGap 项目中，但我已经使用通过 Mobile Safari 查看的标准网站复制了该问题。

这是我的一些代码：

```
<!--(HTML)-->

<div class="smooth-button" onclick="show()">Show</div>

<div id="popin">
<input type="text" placeholder="Example!" />
<div class="smooth-button" onclick="save()">Save</div>
</div>

... 

/* (CSS) */

#popin {
    position: fixed;
    left: 50%;
    top: 50%;
    height: 400px;
    width: 300px;
    margin-top: -200px;  /*keeps it perfectly centered*/
    margin-left: -150px; /*keeps it perfectly centered*/
} 

#smooth-button {
    /* make the div look like a cool button */
}

...

// (JavaScript)

function show() {
    $("#popin").css('display', 'block');
}

function save() {
    //code to save text
    $("#popin").css('display', 'none');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T23:49:17.083

右侧边栏中的“相关”链接之一将我带到此页面：

[iOS 5 固定定位和虚拟键盘](https://stackoverflow.com/questions/7970389/ios-5-fixed-positioning-and-virtual-keyboard)

我只是稍微更改了答案，并且效果很好。现在，调整主体的大小，然后在输入模糊后立即将其移回，从而更新固定元素的位置。

```
$("input, textarea").live("blur", function(e) {
    setTimeout(function() {
        $("body").css("height", "+=1").css("height", "-=1");
    }, 0);
}); 
```

# javascript - HTML5/Javascript 游戏开发 - 如果我有多个边界，则只有最近的一个有效

> ID：14927437
> 
> 赞同：1
> 
> 时间：2013-02-17T23:38:13.307
> 
> 标签：javascript, html, collision-detection

所以基本上我拥有的是一个名为 的函数`createBoxBoundary`，当玩家位置在一定范围内时，它将边界变量设置为 true。很简单。但是，当我在主游戏循环中多次调用此函数时，只有最近调用的函数有效。下面是我的代码示例

```
//It should be noted the player deminsions are 40x80
function createBoxBoundary(x,y,width,height){
    //right boundaries
    if(playerXPos + 40 == x && playerYPos + 80 >= y && playerYPos < y + height){
        boundaryRight = true;
    } else{boundaryRight = false;}

    //bottom boundaries
    if(playerYPos == y + height && playerXPos + 40 >= x && playerXPos <= x + width){
        boundaryTop = true;
    } else{boundaryTop = false;}

    //left boundaries
    if(playerXPos == x + width && playerYPos + 80 >= y && playerYPos <= y + height){
        boundaryLeft = true;
    } else{boundaryLeft = false;}

    //bottom boundaries
    if(playerYPos + 80 == y && playerXPos + 40 >= x && playerXPos < x + width){
        boundaryBottom = true;
    } else{boundaryBottom = false;}
} 
```

我还用完整的游戏代码设置了一个**[小提琴。](http://jsfiddle.net/QdCMG/6/)**如果有人对在 javascript 中进行碰撞/边界的更好方法有建议，我也对此持开放态度。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:27:36.903

`boundaryRight`问题是在检查第二个边界的值是什么之前，您没有检查是否已经设置为 true。

像这样的东西应该工作：

```
boundaryRight = ( boundaryRight || ( playerXPos + 40 == x && playerYPos + 80 >= y && playerYPos < y + height ); 
```

我还在这个 jsFiddle 中做了一些其他的调整，增加了定义边界和其他事情的灵活性。还增加了向多个方向移动的能力。

[http://jsfiddle.net/petersendidit/QdCMG/7/](http://jsfiddle.net/petersendidit/QdCMG/7/)

# excel - 如何对包含公式的单元格求和

> ID：14927439
> 
> 赞同：1
> 
> 时间：2013-02-17T23:38:41.073
> 
> 标签：excel, excel-formula

那么，我需要显示`SUMPRODUCT`两个单元格范围吗？这两个单元格区域，即每个单元格都包含公式。从这个公式中，我得到了单元格中的一些数字。这就是我现在正在做的方式：

```
=SUMPRODUCT((S7:S1000)*(T7:T1000)) 
```

由于公式我得到错误`A value used in the formula if of the wrong data type`

我该如何解决这个问题？有没有办法只读取单元格中的数字而不是公式？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T23:41:32.657

将“*”替换为逗号 (",")。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:08:38.747

我对此有很多问题，最后是我需要使用分号（“;”）而不是逗号（“，”）。也许它的Excel版本，我用的是2010？！所以，解决方案是：

```
=SUMPRODUCT(S7:S1000;T7:T1000) 
```

# jquery - jQuery如何触发选择的某个选项

> ID：14927443
> 
> 赞同：0
> 
> 时间：2013-02-17T23:39:32.470
> 
> 标签：jquery, events, select, option

我想在选择某些选项时做一些事情，我如何定义它？这是一个例子：

```
<select id="mySelect">
   <option>...</option>
   ...
   <option>...</option>
   <option id="myOption">I need exactly this option</option>
</select> 
```

我该怎么做？我做了这样的：

```
$('#city').change(function(){
 if($("#another_city", this).is(":selected")){
        alert('ok');
     }
}); 
```

我想看看我怎样才能以另一种方式做到这一点，如果没有，当然如果可能的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T23:50:06.360

似乎唯一可能的方法是使用该`if`语句。`<option>`标签没有任何真正的事件处理程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T00:00:21.203

有几种方法可以工作，但它不会跨浏览器兼容。

```
$('#myOption').on('click', function(event) {
   //write code here
   alert('clicked');
}); 
```

仅适用**于 Firefox (** [jsFiddle](http://jsfiddle.net/crislivinitup/ckr9p/) )

 **1.  Firefox 是**唯一**允许在下拉列表中触发“onclick”、“onmousedown”和“onmousemove”事件的浏览器。

2.  如果下拉是列表框的形式，那么上面提到的事件在大多数浏览器上都支持，**除了 IE**

3.  使用插件或创建一个弹出 div 作为弹出菜单。通过这样做，您可以拥有任何您想要的功能，而不是局限于原生 DOM 元素。

4.  否则使用 if 语句

[该](http://help.dottoro.com/ljwrsipm.php)站点上的文档非常广泛

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T23:59:38.910

只需检查更改事件后的值：

```
$('#city').change(function (){
    if (this.value === "One City") {
        // do stuff
    } else if (this.value === "Another City") {
        // do other stuff
    }
}); 
```

不这样做是没有`if`意义的。`select`在元素下方发生了一定程度的依赖于实现的行为，[浏览器对此不](https://stackoverflow.com/questions/10119793/why-does-firefox-react-differently-from-webkit-and-ie-to-click-event-on-selec) [同意](https://stackoverflow.com/questions/9972280/onclick-on-option-tag-not-working-on-ie-and-chrome)。例如，Firefox 会触发选项的点击事件，而 Chrome 则不会。**

# jquery - Jquery在不同的tr中提取JSON数据

> ID：14927445
> 
> 赞同：0
> 
> 时间：2013-02-17T23:39:45.147
> 
> 标签：jquery, json, html-table, each

我的例子：http: [//jsfiddle.net/C7jTg/](http://jsfiddle.net/C7jTg)

```
var data = [{
  "id": "1",
  "libelle": "1",
  "ordre": "1"
}, {
  "id": "2",
  "libelle": "2",
  "ordre": "2"
}, {
  "id": "3",
  "libelle": "3",
  "ordre": "3"
}, {
  "id": "4",
  "libelle": "4",
  "ordre": "4"
}, {
  "id": "5",
  "libelle": "5",
  "ordre": "5"
}, {
  "id": "6",
  "libelle": "6",
  "ordre": "6"
}, {
  "id": "7",
  "libelle": "7",
  "ordre": "7"
}, {
  "id": "8",
  "libelle": "8",
  "ordre": "8"
}, {
  "id": "9",
  "libelle": "9",
  "ordre": "9"
}, {
  "id": "10",
  "libelle": "10",
  "ordre": "10"
}, {
  "id": "11",
  "libelle": "11",
  "ordre": "11"
}, {
  "id": "12",
  "libelle": "12",
  "ordre": "12"
}, {
  "id": "13",
  "libelle": "13",
  "ordre": "13"
}, {
  "id": "14",
  "libelle": "14",
  "ordre": "14"
}, {
  "id": "15",
  "libelle": "15",
  "ordre": "15"
}, {
  "id": "16",
  "libelle": "16",
  "ordre": "16"
}, {
  "id": "17",
  "libelle": "17",
  "ordre": "17"
}, {
  "id": "18",
  "libelle": "18",
  "ordre": "18"
}, {
  "id": "19",
  "libelle": "19",
  "ordre": "19"
}, {
  "id": "20",
  "libelle": "20",
  "ordre": "20"
}, {
  "id": "21",
  "libelle": "21",
  "ordre": "21"
}, {
  "id": "22",
  "libelle": "22",
  "ordre": "22"
}, {
  "id": "23",
  "libelle": "23",
  "ordre": "23"
}, {
  "id": "24",
  "libelle": "24",
  "ordre": "24"
}];

$('.activiteTable').append("<tr><td align='center' colspan='4'>&nbsp;</td></tr>" +
  "<tr>" +
  "<td align='left' colspan='4'><b>Title:</b></td>" +
  "</tr>");
var rowActivities = '';

$.each(data, function(i, obj) {
  if (i % 4 == 0) {
    rowActivities += "<tr>";
  }

  rowActivities += "<td align='left'>" +
    "<input type='checkbox' id='todo" + i + "' value='" + obj.id + "' class='chBox'/> " + obj.libelle +
    "</td>";

  if ((i % 4 == 0) || (i == 23) && i != 0) {
    rowActivities += "</tr>";
  }

});
$('.activiteTable').append($(rowActivities));
```

```
<table cellspacing="3" cellpadding="3" align="left" class="activiteTable" style="clear:both"></table>
```

当我生成 html tr 时，我无法理解每个函数的工作方式。

我想像这个模型一样在 html 表中提取 JSON 数据：

1 2 3 4

5 6 7 8

9 10 11 12

13 14 15 16

17 18 19 20

21 22 23 24

我不知道最佳做法。我希望你能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T23:47:32.653

您对小提琴所要做的就是更改这一行（我进行了适当的编辑）。

```
if ((i % 4 == 3) || (i == 23) && i !=0) { 
```

您想`</tr>`在它位于行尾时添加。这是索引为`3`, `7`, `11`,`15`等的时候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T23:54:46.497

您可以通过执行以下操作来简化它：

```
var rowActivities = "<tr><td align='center' colspan='4'>&nbsp;</td></tr>"
+ "<tr>"
+ "<td align='left' colspan='4'><b>Title:</b></td>"
+ "</tr>"
+ "<tr>";
$.each(data, function (i, obj) {
    if (i > 0 && i % 4 == 0) {
        rowActivities += "</tr><tr>";
    }
    rowActivities += "<td align='left'>" +
        "<input type='checkbox' id='todo" + i + "' value='" + obj.id + "' class='chBox'/> " + obj.libelle +
        "</td>";
});
rowActivities += "</tr>";
$('.activiteTable').append(rowActivities); 
```

使它只附加`.activeTables`一次。在将jQuery 对象传递给方法之前，
无需对其进行转换。`rowActivities``append()`

[http://jsfiddle.net/petersendidit/C7jTg/1/](http://jsfiddle.net/petersendidit/C7jTg/1/)

# iphone - UITextfield 的 DatePicker，我应该使用 NSDatePicker 吗？

> ID：14927447
> 
> 赞同：0
> 
> 时间：2013-02-17T23:40:17.397
> 
> 标签：iphone, datepicker, uitextfield

我有一个 UITextfield“生日”，现在点击文本字段后我有一个键盘，我想将其更改为日期选择器。

有没有人可以逐步帮助解决这个问题？我应该在我的代码中添加什么以及我需要进行哪些更改。

这是我的 UITextField“Birthady”的内容：

```
field = [[UITextField alloc] initWithFrame:frame];
[self.appDel.styleManager decorateTextField:field];
field.placeholder = @"Birthday";
[container addSubview:field];
self.registrationFormBirthday = field;
self.registrationFormBirthday.delegate = self; 
```

根据乔纳森的回答，这就是我现在所拥有的：

```
-(void)textFieldDidBeginEditing:(UITextField *)textField
    {
    if textField == XtextLabel
    {
    UIDatePicker *datePicker = [[UIDatePicker alloc] init];
    NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar] ;
    NSDate *currentDate = [NSDate date];
    NSDateComponents *comps = [[NSDateComponents alloc] init] ;
    [comps setYear:-0];
    NSDate *maximumDate = [calendar dateByAddingComponents:comps toDate:currentDate options:0];
    [comps setYear:-90];
    NSDate *minimumDate = [calendar dateByAddingComponents:comps toDate:currentDate options:0];
    [datePicker setMaximumDate:maximumDate];
    [datePicker setMinimumDate:minimumDate];
    datePicker.datePickerMode = UIDatePickerModeDate;
    textField.inputView = datePicker;
    }
    } 
```

如何在 XtextLabel 中显示所选日期并退出 datePicker？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T23:51:06.137

就像是...

```
UIDatePicker *datePicker = [[[UIDatePicker alloc] init]];
datePicker.datePickerMode = UIDatePickerModeDate;
[datePicker addTarget:self action:@selector(datePickerValueChanged:)      forControlEvents:UIControlEventValueChanged];
textField.inputView = datePicker;    

- (IBAction)datePickerValueChanged:(id)sender {

   NSDate *pickerDate = [sender date]; //Do something with the date
} 
```

# redirect - 301重定向到新域

> ID：14927450
> 
> 赞同：0
> 
> 时间：2013-02-17T23:41:04.153
> 
> 标签：redirect, seo

我需要 301 代码将旧域重定向到包含所有页面和文件夹的新域。

好像哪里都找不到

此外，如果我使用 301 重定向，我会因此失去关键词排名或排名吗？

（我的意思是从**3 年前的域名**转移到*2 天前的域名*）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T23:42:27.493

将其放在您的根 Web 目录中的 .htaccess 文件中：

```
 RewriteEngine On
  RewriteCond %{HTTP_HOST} ^olddomain.com$ [OR]
  RewriteCond %{HTTP_HOST} ^www.olddomain.com$
  RewriteRule (.*)$ http://www.newdomain.com/$1 [R=301,L] 
```

你的排名会先波动，因为过渡从来都不是一帆风顺的。但最终你的排名*应该*恢复正常。

# java - 面向对象设计：哪个更好？

> ID：14927452
> 
> 赞同：1
> 
> 时间：2013-02-17T23:41:12.447
> 
> 标签：java, oop, class, interface

我在 java 文档和其他编程书籍中看到的创建对象的不同方式感到困惑。例如

假设有一个`base class`和一个`derived class`

1-我有一个类型的变量，`Base`它指的是类型的对象`Derived`

```
List<String> list = new ArrayList<String>(); 
```

2-我有一个类型的变量，`Derived`它指的是类型的对象`Derived`

```
ArrayList<String> arrList = new ArrayList<String>(); 
```

我的问题是在选择 1 和 2 时我应该怎么想？是否可以利用`Polymorphism`一般的 Base-Derived 场景？

是否有一段`better practice`时间在我不知道的 1 和 2 之间进行选择，或者只是一个`personal decision`？

**编辑：**

对不起，List 是一个接口。 **另一个问题**：如果我使用 Type 参数，我的决定会改变吗？

```
ArrayList<T> list = new ArrayList<T>(); 
```

**更新答案：**这实际上称为`"Programming to the interface"`. 感谢代码大师。在这个问题的答案之一中用非常简单的术语解释了我正在寻找的东西 - [“编程到接口”是什么意思？](https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T23:44:41.110

1.  `List` is not a base class it is an `interface` and therefore **should** be used wherever possible.

    Using the interface that a class implements allows you to work with all classes that implement the interface, not just the specific class.

2.  `String` is a concrete class so it is much clearer to use it directly.

    Sometimes, however, even though `String` implements the `CharSequence` interface it is unnecessary to use `CharSequence` because it would just be confusing. However, take a look at `StringBuilder`, it uses `CharSequence` almost exclusively.

In summary - there is no **better** there is just **appropriate**.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T23:45:25.917

Choosing the base type allows you to at some point in the future change between using an ArrayList to say a LinkedList, without changing the rest of the code. This gives you more flexibility to refactor later on. Likewise, your public methods should return a List instead of the specific type of List implementation for the same reason -- so that you may change your internal implementation to optimize performance without breaking the contract to your callers.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T17:09:30.377

在 List 是一个类的情况下（只是为了回答你的问题而假设 - **“我们应该使用表示子类的父类的对象还是使用派生类类型的对象（actula 类）？”**

1）你是对的，它只是为了多态性。

2）主要用于在不同的类方法中传递对象。其他类的方法可能正在接受父类的输入。你必须在那些地方使用铸件。

# clojure - Clojure 中奇怪的布尔行为与表单数据中的复选框

> ID：14927455
> 
> 赞同：1
> 
> 时间：2013-02-17T23:42:05.060
> 
> 标签：clojure, boolean, compojure

我正在使用 AngularJS 资源来基本上 $.ajax() 一些表单数据。

```
Post.put({user:$scope.getLoggedInUser(), action:"new"},{body:$scope.postBody, "public":$scope.postPublic}, function(post) { 
```

表单上有一个名为“public”的复选框。

我正在使用此函数将表单数据与 URL 中的参数合并：

```
(defn get-params [request]
  (merge (:params request) (parse-string (slurp (request :body)) true))) 
```

`true`当我从我的路由处理程序中 println时，当复选框被选中时，我会得到一个很好的结果：

```
(println (:public (get-params request))) 
```

但是，当我将参数（即不是 println）传递给控制器​​中与数据库通信的另一个函数时，我在该函数的开头执行另一个 println 并`nil`改为获取。

我试过把它作为

```
(read-string x)
(boolean (Boolean/valueOf x))
(Boolean/valueOf x) 
```

无济于事。

可能导致它的一件事（但我不知道为什么）是我通过如下身份验证包装请求：

```
(auth? request #(create x y z)) 
```

该`(create)`函数在数据库中创建一条记录。

`true`无论我尝试了什么，我都无法做到。

***编辑：更完整的代码***

**控制器**

```
(defn auth? [request callback-true & [callback-false]]
  (println (callback-true))
  (let [login-response (auth/login request)]
    (if (and (not (string? login-response))
             login-response)
      (callback-true)
      (if callback-false 
        (callback-false)
        (json-response (str "{\"auth\":" login-response "}"), 401)))))

(defn create [user logged-in-user body public?]
  (if (= logged-in-user user)
    (json-response (post-view/single-post (post/create user body public?)))
    (json-response "{\"auth\":\"can't create post under different logged in user\"}" 401)))

(defroutes routes
  ....
  (PUT "/api/:user/new" request
       (println request)
       (auth? request
              #(create (:user (request :params))
                       (:user (request :session))
                       (:body (get-params request))
                       (:public (get-params request)))))
  ....
) 
```

**模型**

```
(defn create [username body public?]
  (println public?)
  (when-not (and 
              (str/blank? body)
              (str/blank? username))
  (let [user-id (:id (get-id-from-username username))
        new-post-id
        (:id 
            (sql/with-connection db
                (sql/insert-values :post
              [:usr_id :body :public] [user-id body (Boolean/valueOf public?)])))]
    (by-id new-post-id)))) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T00:52:16.077

不要打`get-params`两次电话。(request :body) 返回一个无法读取两次的流。

# php - mysqli查询问题

> ID：14927456
> 
> 赞同：0
> 
> 时间：2013-02-17T23:42:12.683
> 
> 标签：php, mysql, mysqli

朋友们，我被困住了，需要你的帮助！

当使用 MySql 制作动态菜单时，我使用查询**SELECT * FROM pages WHERE ParentID = 0**和子菜单**WHERE ParentID = '$PageID'** ...但是这种方法在使用 MySqli 时似乎不起作用.. 主要之一我看到的原因是 Query 应该写在函数之外，因为在函数内部它简单不起作用..不知道为什么。无论如何，这是我的代码，我希望你们的朋友能帮助我解决这个问题

```
function Get_menu() {
    $menuQuery = $mysql->query("SELECT PageTitle, PageID, ParentID FROM pages WHERE ParentID = 0");
    while (($row = $menuQuery->fetch_assoc()) !== null) {
        echo '<li class="menu-item"><a href="page.php?pageID=' . $row["PageID"] . '">' . $row["PageTitle"] . '</a>';
        $PageID = $row["PageID"];
        $SubmenuQuery = $mysql->query("SELECT PageTitle, PageID, ParentID FROM pages WHERE ParentID = '$PageID'");
        if($SubmenuQuery->num_rows > 0) {
            echo '<ul class="sub-menu">';
            while (($rowx = $SubmenuQuery->fetch_assoc()) !== null) {
                echo '<li class="menu-item"><a href="page.php?pageID=' . $rowx["PageID"] . '">' . $rowx["PageTitle"] . '</a></li>';
            }
            echo '</ul>';
        }
        echo '</li>';
    }
} 
```

我曾尝试在函数之外编写查询，但子菜单的查询不起作用，因为它假定 $PageID 为 0。亲爱的朋友，如果你能帮助我，那将是一个很大的帮助，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T23:46:09.710

`$mysql`未在您的函数范围内定义。您应该将其作为参数传递：

```
function Get_menu($mysql) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T00:01:12.343

试着分析一下：

```
$query = 
"SELECT PageTitle, PageID, ParentID 
FROM 
  pages subs 
INNER JOIN 
  pages cats 
ON 
  subs.ParentID = cats.PageId 
GROUP BY PageID" ; 
```

或者，如果您要逐个获取类别，您的数据库将是 pwn3d 并且压力很大。

# java - Apache POI JDK 版本

> ID：14927463
> 
> 赞同：2
> 
> 时间：2013-02-17T23:43:11.720
> 
> 标签：java, ant, apache-poi

我正在寻找有关如何使用 Apache POI 库在 ANT for Java 项目中创建 XML 文件的示例。我遇到了这样的说法：

> POI 3.5 及更高版本需要 JDK 1.5 或更高版本。[3.5 之前的版本在此处](http://poi.apache.org/howtobuild.html)需要 JDK 1.4+

我正在使用 Apache 3.9 并将我的项目的 JDK 设置为 Java 1.4，并且在尝试通过 Eclipse 运行我的程序时没有遇到任何错误。但我的问题是我是否在 ANT 中制作 build.xml 并部署 JAR 文件。我的项目还会运行^((3))吗？

## 额外信息

1.  我在 Eclipse 中使用 ANT 插件创建了一个 build.xml，然后运行为 --> Ant Build。我没有遇到任何错误。
2.  还将JRE设置为JDK1.4
3.  我还没有测试它是否运行，因为我仍然不知道如何在 build.xml 中添加 JAR 配置......我仍在学习如何使用 ANT。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-23T07:03:43.667

如果项目声明需要 JDK 1.5 或更高版本，则意味着通常不会对较低版本进行测试。正如您发现的那样（在某种程度上）它可能仍然有效，但可能会停止使用较新版本的 Apache POI。

# python - python制作迭代地图

> ID：14927465
> 
> 赞同：0
> 
> 时间：2013-02-17T23:43:44.537
> 
> 标签：python

我正在尝试制作迭代地图并绘制它。我刚开始学习python。这是我的代码：我觉得我在语法上犯了一个天马行空的错误，我的代码只给出了一条直线。

```
N = 10000
aa = linspace(2, 4, N)
xx = zeros(N)
for jj in range(N):a = aa[jj]
x0 = rand()
for ii in range(1, 100): x0 = a *x0 *(1 -x0)
xx[jj] = x0
plot(aa, xx, '.') 
```

我究竟做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T23:55:59.900

使用 python，缩进比其他语言更重要。

只需重新排列您的代码（并放入名称空间等，因此很明显函数来自哪里），我得到了这个：

![在此处输入图像描述](../Images/5f6b184dbf798925f26e0ec7cbf3194e.png)

这是代码：

```
import numpy
from matplotlib import pyplot
import random

N = 10000
aa = numpy.linspace(2, 4, N)
xx = numpy.zeros(N)
for jj in range(N):
    a = aa[jj]
    x0 = random.random()
    for ii in range(1, 100):
        xx[jj] = a *x0 *(1 -x0)

pyplot.plot(aa, xx, '.')
pyplot.show() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T04:14:54.787

这是我尝试过的代码：

```
import numpy as np
import matplotlib.pyplot as plt
import random

N = 10000
aa = np.linspace(2, 4, N)
xx = np.zeros(N)
for jj in range(N):
    a = aa[jj]
    x0 = random.random()
    for ii in range(1, 100):
        x0 = a *x0 *(1 -x0)
    xx[jj] = x0
plt.plot(aa,xx,'.')
plt.show() 
```

这会生成附加的![阴谋](../Images/bdd5e4edd887d3fcf448354e47cca89c.png)

# sql - SQL Server 2008 R2 - 孤岛和差距

> ID：14927466
> 
> 赞同：2
> 
> 时间：2013-02-17T23:43:50.407
> 
> 标签：sql, sql-server, sql-server-2008, gaps-and-islands

我有一个简单的 2 列表。PctGain 包含每周百分比的股市收益。WSeqkey 包含一个连续的整数值，每个新的一周递增。上表中大约有 3300 行。这是一个示例。

```
PctGain WSeqKey
0.12%   4407
0.31%   4406
0.68%   4405
1.14%   4404
0.95%   4403
0.38%   4402
4.57%   4401
-1.94%  4400
1.17%   4399
-0.32%  4398 
```

想要帮助解决并学习如何做的是......编写/运行一个查询，它将告诉我正负序列何时开始和结束。就像是

```
Negative Beg 4398
Negative End 4398
Positive Beg 4399
Positive End 4399
Negative Beg 4400
Negative End 4400
Positive Beg 4401
Positive End 4407 
```

提前感谢您解决此问题并帮助我一路学习。

坦率

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T23:59:05.847

像这样的东西应该可以完成[SQL Fiddle的工作](http://www.sqlfiddle.com/#!3/64876/3)

`SIGN`它使用 Itzik Ben Gan 的行号技术找到具有相同值的顺序数据岛，并为它们分配相同的分组值，然后对它们进行分组和聚合。`CROSS APPLY ... VALUES`unpivots`MIN`和_`MAX`

```
;WITH T1
     AS (SELECT *,
                ROW_NUMBER() OVER (PARTITION BY SIGN(PctGain) 
                                       ORDER BY WSeqKey) - WSeqKey AS Grp
         FROM   YourTable),
     T2
     AS (SELECT MIN(WSeqKey)  AS BeginSeq,
                MAX(WSeqKey)  AS EndSeq,
                SIGN(PctGain) AS Sign
         FROM   T1
         GROUP  BY Grp,
                   SIGN(PctGain))
SELECT CASE Sign
         WHEN -1 THEN 'Negative'
         WHEN 0 THEN 'Equal'
         WHEN 1 THEN 'Positive'
       END AS [Sign],
       Descriptor,
       SeqKey
FROM   T2
       CROSS APPLY (VALUES('Begin', BeginSeq),
                          ('End',   EndSeq)) V(Descriptor, SeqKey)
ORDER  BY SeqKey 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T02:57:09.837

谢谢大家，我查看了 MSDN 上的 gaps/islands URL 并弄清楚了。

我在过滤 pctgain > 0 时只将 WSEQKEY 转储到临时表 (#gaps) 中，然后使用以下 sql：

```
SELECT t1.gapID as startOfGroup, MIN(t2.gapID) 
as endOfGroup FROM (SELECT gapID FROM #gaps tbl1 
  WHERE NOT EXISTS(SELECT * FROM #gaps tbl2 
    WHERE tbl1.gapID - tbl2.gapID = 1)) t1
  INNER JOIN (SELECT gapID FROM #gaps tbl1 
  WHERE NOT EXISTS(SELECT * FROM #gaps tbl2 
    WHERE tbl2.gapID - tbl1.gapID = 1)) t2
  ON t1.gapID <= t2.gapID   GROUP BY t1.gapID
  order by t1.gapID desc 
```

# jquery - 动画背景从图像填充

> ID：14927469
> 
> 赞同：0
> 
> 时间：2013-02-17T23:44:40.650
> 
> 标签：jquery, css

我有一个黑色到透明渐变的菜单。当我悬停菜单时，我想把它变成一个完全黑色的填充。为什么以下不起作用？

```
$('#topmenu').hide().animate({
    'height': 'toggle'
    }, "slow").hover(function() {$(this).animate({ 'opacity' : 1 }).css( 'background' , 'rgb(0,0,0)', 'box-shadow' , "0px 5px 15px 0px rgba(0, 0, 0, 0.5)" );}, function() {$(this).animate({ 'opacity' : 0.6  }).css( 'background' , "url('<?php bloginfo('template_url'); ?>/images/topmenu_bg.png') repeat-x" );}); 
```

菜单的背景图像是通过具有“背景”属性的样式表设置的。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:13:55.633

为什么不是这个简单的 CSS？

```
#topmenu {
    background-image:linear-gradient(to bottom,black,transparent);
    background-color:transparent;
    transition:background-color 1s ease;
    /* vendor-specific alternatives follow */
    background-image:-webkit-linear-gradient(top,black,transparent);
    -webkit-transition:background-color 1s ease;
}
#topmenu:hover {
    background-color:black;
} 
```

简单的 CSS 比 jQuery 快得多，无论是形象上还是字面上，因为我不知道如何衡量 CSS“速度”XD

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:24:39.673

要设置多个 css 属性，您必须传递具有属性的对象

```
$('#topmenu').hide().animate({
    'height': 'toggle'
    }, "slow").hover(function() {$(this).animate({ 'opacity' : 1 }).css({'background': 'rgb(0,0,0)', 'box-shadow': "0px 5px 15px 0px rgba(0, 0, 0, 0.5)"});}, function() {$(this).animate({ 'opacity' : 0.6  }).css('background', "url('<?php bloginfo('template_url'); ?>/images/topmenu_bg.png') repeat-x");}); 
```

# c# - 如何从验证中排除方法调用？

> ID：14927473
> 
> 赞同：1
> 
> 时间：2013-02-17T23:45:32.460
> 
> 标签：c#, .net, unit-testing, moq, moq-3

我正在使用 Moq 并在 TestInitialize 方法中设置一些期望，如下所示：

```
[TestInitialize]
public void init()
{
    mockRepo.Setup(x => x.EventDefinitions).Returns(ListsOfEvents.EventDefinitions);
    mockRepo.Setup(x => x.EventTypes).Returns(ListsOfEvents.EventTypes);
} 
```

我不在乎这些是否被调用，所以我不希望`VerifyAll()`为这些抛出异常。

我需要输入的字母的神奇组合是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T00:13:52.940

那就不要用了`VerfiyAll()`。只需`Verify()`在您关心的电话上使用。

# templates - 如何同时指定 __device__ 和 __forceinline 选项？

> ID：14927478
> 
> 赞同：0
> 
> 时间：2013-02-17T23:46:03.340
> 
> 标签：templates, methods, cuda, inline

我尝试使用模板化方法以及**设备**选项，我希望使用 __forceinline 选项来确保方法实际上是内联的。然而，结果我得到了错误——不管这些选项的顺序是什么。我的代码：

```
template<int Begin, int End>
struct Unroller {
    __device__ 
    __forceinline
    static void step(...) {
        ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T08:05:05.573

[forceinline](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#noinline-and-forceinline)关键字前后都需要双下划线

像这样：`__forceinline__`

# php - Fixture generator code

> ID：14927480
> 
> 赞同：1
> 
> 时间：2013-02-17T23:46:20.000
> 
> 标签：php

Here's my code:

```
$totalRounds = 1;
$teams = array('Team 1', 'Team 2', 'Team 3', 'Team 4', 'Team 5');
echo 'Total Teams: ' , $totalTeams = count($teams) , '<br/>';
$turns = $totalTeams;

for($round=1; $round<$totalRounds+1; $round++){
    echo 'Round: ' , $round , '<br/>';

    for($homeTeam=0; $homeTeam<$totalTeams-1; $homeTeam++){
        for($awayTeam=0; $awayTeam<$totalTeams; $awayTeam++){
            if($teams[$homeTeam] != $teams[$awayTeam]){
                echo $teams[$homeTeam] , ' v/s ' , $teams[$awayTeam] , '<br/>';
            }                        
        }
        unset($teams[$homeTeam]);
    }
    echo '<br/>';
} 
```

My expected output is:

```
Team 1 v/s Team 2 <br/>
Team 1 v/s Team 3 <br/>
Team 1 v/s Team 4 <br/>
Team 1 v/s Team 5 <br/>
Team 2 v/s Team 3 <br/>
Team 2 v/s Team 4 <br/>
Team 2 v/s Team 5 <br/>
Team 3 v/s Team 4 <br/>
Team 3 v/s Team 5 <br/>
Team 4 v/s Team 5 <br/> 
```

My actual output is giving me undefined index errors

Once this is fixed I don't know how to assign home and away teams. Eg. Team 1 should have only 2 home games, instead it has 4\. Each team will play 2 home games and 2 away games.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T23:49:48.660

您的代码正在破坏数组，例如：

```
first iteration: $home = 0; $away = 0
end of iteration: delete teams[0]

second iteration, $home = 1; $away = 0 - OOPS, teams[0] no longer exists 
```

而不是在你去时取消设置数组，你应该将内循环基于外循环，例如：

```
for($home = 0; ...) {
   for($away = $home + 1; ...) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T23:50:42.277

您可以使用以下方法修复您的代码

```
$totalRounds = 1;
$teams = array('Team 1', 'Team 2', 'Team 3', 'Team 4', 'Team 5');
echo 'Total Teams: ' , $totalTeams = count($teams) , '<br/>';
$turns = $totalTeams;

for($round=1; $round<$totalRounds+1; $round++){
    echo 'Round: ' , $round , '<br/>';

    for($homeTeam = 0; $homeTeam < $totalTeams - 1; $homeTeam++) {
        for($awayTeam=$homeTeam + 1; $awayTeam < $totalTeams; $awayTeam++) {
            echo $teams[$homeTeam] , ' v/s ' , $teams[$awayTeam] , '<br/>';
        }
    }
    echo '<br/>';
} 
```

# java - 用于 Java Web 应用程序的 Java PaaS（平台即服务）（wicket - spring - hibernate/jpa - scala - jetty）

> ID：14927482
> 
> 赞同：3
> 
> 时间：2013-02-17T23:46:36.710
> 
> 标签：java, web-applications, wicket, paas

我可以考虑使用哪个 PaaS 提供商在云中部署我的应用程序而不会有太大的痛苦，即不需要更改结构或源代码，并且提供对 ide 或命令行的良好支持的提供商？

*   杰拉克
*   云蜜蜂
*   开班
*   Heroku

评估上面列表中的哪一个的一些恶臭和缺点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T01:00:49.607

我为 OpenShift 工作，但我也认为它非常适合各种 Java 支持。我们有 Jenkins 支持、Tomcat 6、Tomcat 7、Jboss EAP 6 和 Jboss AS 7.1。我们在 MySQL、Postgresql 和 MongoDB 中有本地数据存储。您可以将 Eclipse 与 JBoss 开发工具一起使用以获得出色的体验，但我们也有命令行实用程序和 REST API。我们所有的构建都是使用 Maven 完成的，因此无需更改您的源结构。如果需要，您还可以部署战争文件。您正在查看的所有 PaaS 都很棒，因此我鼓励您尝试一些。

这是面向 Java开发人员的[openshift 页面。](https://openshift.redhat.com/community/developers/java)看看，并希望得到一些反馈

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T06:23:48.220

看起来[Jelastic](http://jelastic.com/why)最适合您的需求 - 易于启动，根本不需要更改代码，与 Eclipse 和 JetBrains 集成，部署应用程序的不同方式，非常好的性能和自动可扩展性。

CloudBees 和 Heroku 有很多限制 - 没有公共 IP 地址，不支持使用 A 记录将外部域指向应用程序；他们不允许使用自定义端口——这意味着应用只能监听 80 和 443 端口；对文件系统的访问受限——许多重新设计问题都与此限制有关；不支持多播；没有垂直缩放 - 您应该为虚拟盒子的限制付费，而不是为实际使用付费。垂直扩展带来的好处的更详细描述在这里[http://cloud.dzone.com/articles/truth-about-paas-vertical](http://cloud.dzone.com/articles/truth-about-paas-vertical)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T23:53:26.310

Heroku 已经很成熟，甚至有幸与 Facebook 合作。所以这是很好证明的。您可以为您的应用程序使用许多附加组件，并且非常容易实现。但是，如果需要，它没有 PHP 功能

我相信你已经看过这个：[链接](http://cloud-computing.findthebest.com/saved_search/Best-PaaS-Cloud-Computing-Providers)

# jquery - Modifying the animation in FlexSlider

> ID：14927483
> 
> 赞同：0
> 
> 时间：2013-02-17T23:46:43.253
> 
> 标签：jquery, flexslider

Using FlexSlider for a client's site. They request that when one of "dots" at the bottom is clicked, it does not animate through all the images but only to the one that was selected.

I'm not sure what part of the code is controlling this and I have tried numerous hacks but without results!

Appreciate anyone's input.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:40:15.970

你可以使用**淡入淡出**效果而不是第一张**幻灯片**吗？在这个可以你可以在 FlexSlider 设置中添加*动画参数：*

```
$('.flexslider').flexslider({
      animation: "slide",
      // other settings
}); 
```

这样，当您单击一个“点”时，它只会显示相关图像。

# php - How to create pagination links when combining data from two different queries

> ID：14927485
> 
> 赞同：0
> 
> 时间：2013-02-17T23:47:15.693
> 
> 标签：php, codeigniter

I have a controller with a method that looks something like this:

```
 public function browsecategory($category_id)
    {               

        //find any subcategories for this category
        $this->load->model('category/category_model');
                    $this->load->model('category/product_category_model');  
        $records['categories'] = $this->category_model->find_all_by('parent_id', $category_id);

                    //add some product data too. 
                    $records['products'] = $this->product_category_model->find_all_by('category_id', $category_id); 
        Template::set('records', $records);
        Template::render();
    }//end browsecategory 
```

All the examples I've seen for the codeigniter pagination "stuff" is using one query. I need to combine two data sets and serve on one view.

Any suggestions?

**EDIT 1**

I've tried to follow MDeSilva's suggestion below. And although the pagination object is correctly calculating the number of links to create, all items appear on all pages.

Here's the code in the model that gets the data:

```
public function get_categories_and_products($limit=12, $offset=0, $category_id=null)
{
    print '<BR>the function got the following offeset:'.$offset;
    $query = "(SELECT cat.category_id, cat.title, cat.image_thumb, cat.deleted, cat.display_weight ";
    $query = $query."FROM bf_categories cat ";
    $query = $query."WHERE cat.parent_id=".$category_id;
    $query = $query." AND cat.category_id <>".$category_id;
    $query = $query.") UNION (";
    $query = $query."SELECT p.product_id, p.name, p.image_thumb, p.deleted , p.display_weight";
    $query = $query." FROM bf_product p ";
    $query = $query."Inner join bf_product_category cp ";
    $query = $query."on p.product_id=cp.product_id ";
    $query = $query."Where cp.category_id=".$category_id.")";

    $this->db->limit($limit, $offset);
    $catsandprods= $this->db->query($query);
    return $catsandprods->result() ;
} 
```

And here's the code in the controller:

```
public function browsecategory($category_id, $offset=0)
    {
            $this->load->library('pagination');

            $total = $this->product_model->get_cats_prods_count($category_id);

            $config['base_url'] = site_url('/product/browsecategory/'.$category_id);
            $config['uri_segment'] = 4;
            $config['total_rows'] = $total;
            $config['per_page'] = 5;
            $config['num_links'] = 10;

            $this->pagination->initialize($config);
            $offset = ($this->uri->segment($config['uri_segment'])) ? $this->uri->segment($config['uri_segment']) : 0;
                        print $offset;
            //Call the model function here to get the result, 
            $records= $this->product_model->get_categories_and_products(5,$offset,$category_id);
            //add to breadcrumb trail
            $this->build_bread_crumb_trail($category_id);
            $breadcrumbs = $this->breadcrumbs->expand_to_hyperlinks();

            Template::set('currentcategory',$category_id);
            Template::set('breadcrumbs', $breadcrumbs);
            Template::set('records', $records);
            Template::render();     
    } 
```

I've debugged and I can see that the line of code "$this->db->limit($limit, $offset);" in the model is not working. It always returns the full record set... Can you tell me what I'm missing? Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T06:19:16.713

这是在 CI 中生成分页链接的方法，因为您的要求有一个带有连接的查询，

```
public function index($offset = 0) {
   $language_id = 1;

    $artwork_id = null;

    if ($_SERVER['REQUEST_METHOD'] == 'POST')
    {
        $artwork_id = $this->input->post('serach_artwork_id', TRUE) ? $this->input->post('serach_artwork_id', TRUE) : null;
        $data['artwork_id'] = $artwork_id;

    }

    $this->load->library('pagination');
    $limit = 10;

    $total = $this->Artwork_model->get_artwork_count($language_id, $artwork_id);

    $config['base_url'] = base_url().'artwork/index/';
    $config['total_rows'] = $total;
    $config['per_page'] = $limit;
    $config['uri_segment'] = 3;

    $config['first_link'] = '<< First';
    $config['last_link'] = 'Last >>';
    $config['next_link'] = 'Next ' . '&gt;';
    $config['prev_link'] = '&lt;' . ' Previous';
    $config['num_tag_open'] = '<span class="number">';
    $config['num_tag_close'] = '</span>';

    $config['cur_tag_open'] = '<span class="current"><a href="#">';
    $config['cur_tag_close'] = '</a></span>';

    $this->pagination->initialize($config);

    //Call the model function here to get the result, 
    $data['artworks'] = $this->Artwork_model->get_artworks($language_id, $limit, $offset, $artwork_id);

    $this->template->write('title', 'Artwork : Manage Artwork');
    $this->template->write_view('content', 'artwork/index', $data);
    $this->template->render();
} 
```

这是模型中具有多个连接的查询示例

```
public function get_artworks($language_id = 1, $limit = 10, $offset = 0, $arwork_id = null)
    {        
        $this->db->select('a.id, a.price, a.is_shop, at.title,at.status,at.date_added,ats.name as artist_name');
        $this->db->from('artworks a');
        $this->db->join('artwork_translations at', 'a.id = at.artwork_id');
        $this->db->join('artists ats', 'a.artist_id = ats.id');
        $this->db->where('at.language_id', $language_id);
        if(!is_null($arwork_id) && !empty($arwork_id) && $arwork_id != 'all')
        {
            $this->db->where('a.id =', $arwork_id);
        }
        $this->db->order_by('a.id DESC');
        $this->db->limit($limit, $offset);

        $artworks = $this->db->get();

        return $artworks->result();
    } 
```

在视图中

```
<?= $this->pagination->create_links(); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T05:57:08.497

只需使用 PHP 函数 array_merge

```
<?php $beginning = 'foo'; $end = array(1 => 'bar');
$result = array_merge((array)$beginning, (array)$end);
$this->load->view('view.php', $result);
?> 
```

并根据使用的数组的键进行提取。这真的很简单&工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T00:37:10.287

分页类不关心数据源是如何构造的，只要你把它想要的数据结果对象交给它。因此，您只需将限制和偏移量传递到数据查询中，或者提取所有数据并在之后对其进行切片。

但是，我真的不明白您是如何考虑将这些不同的数据位组合成一个结果来显示的——您是要显示所有类别，然后对产品进行分页吗？如果是这样，您设置不正确

# jpa - Griffon integration tests with jpa

> ID：14927486
> 
> 赞同：0
> 
> 时间：2013-02-17T23:47:21.337
> 
> 标签：jpa, integration-testing, griffon

I'm writing a griffon application with JavaFX and the JPA plugin. I have a service I'd like to test - this service makes use of the JPA plugin (withJpa {...}) and it's this database access that I want to test.

So, I want to write this test so it inserts some data, then check that the service produces the right answer thus verifying the sql query is correct.

I've written a simple test:

```
class ReportServiceTests extends GriffonUnitTestCase {
    GriffonApplication app

    public void testStats() {
        println app.getServices()
        println app.getControllers()
    }
} 
```

but I cannot get hold of a valid service - both the println statements above produce "[:]".

How do I get hold of the 'ReportService' instance and exercise it against the database? I don't want to mock the database interaction.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T08:53:18.717

无需模拟数据库。如[http://griffon.codehaus.org/guide/latest/guide/testing.html#integrationTesting](http://griffon.codehaus.org/guide/latest/guide/testing.html#integrationTesting)中所述，应用程序在集成测试期间进入初始化阶段。插件在此阶段被初始化。另一方面，服务被延迟初始化，因为它们在实例化时被 MVC 成员拉入：如果你调用`app.getServices()`. 但是，您可以指示应用程序急切地实例化所有服务，这将使您的代码按预期工作；只需将以下标志添加到 Config.groovy

```
griffon.services.eager.instantiation = true 
```

有关服务的更多信息，请访问[http://griffon.codehaus.org/guide/latest/guide/controllersAndServices.html#services](http://griffon.codehaus.org/guide/latest/guide/controllersAndServices.html#services)

# cassandra - Cassandra Internal Error

> ID：14927493
> 
> 赞同：1
> 
> 时间：2013-02-17T23:47:56.833
> 
> 标签：cassandra, internal, reddit

I'm trying to install reddit manually on my computer; using [this](https://github.com/reddit/reddit/wiki/Install-guide) guide. I'm running into an error trying to get Cassandra set up.

The install guide says to:

```
 $ cassandra-cli -h localhost
    [default@unknown] create keyspace reddit with strategy_options = [{replication_factor:1}];
    [default@unknown] use reddit;
    [default@unknown] create column family permacache with column_type = 'Standard' and comparator = 'BytesType'; 
```

When I `create keyspace reddit with strategy_options = [{replication_factor:1}];`, it returns `org.apache.thrift.TApplicationException: Internal error processing system_add_keyspace`.

What should I do to fix this? I'm running Linux Mint 13 MATE 32bit.

# javascript - How to create a calculus derivative solver using Javascript?

> ID：14927494
> 
> 赞同：1
> 
> 时间：2013-02-17T23:47:57.957
> 
> 标签：javascript, calculus

I've been trying to create my own JavaScript program for solving problems in Calculus such as taking the derivative of an equation, but as of yet have not succeeded. I would be greatly appreciative if someone could help me with this.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T00:03:43.803

这样的事情应该这样做

```
function poly(variable, degree){
 return degree*((variable)^(degree-1));
} 
```

您应该将 n 次多项式存储在 (n+1) 'array' 中并使用 Jquery 每种方法

```
var result = 0;
$.each(array, function(index, value) {
  result = result + poly(value,index);
}); 
```

编辑：如果您不了解 jquery，您可以使用纯 javascript for 循环，`for (var i = 0; i < myArray.length; i++) {...}`

# c++ - 孩子的祖父母重载功能

> ID：14927499
> 
> 赞同：9
> 
> 时间：2013-02-17T23:48:24.950
> 
> 标签：c++, overloading, overriding

如果在 Parent 中声明了任何重载函数，我需要了解为什么 C++ 不允许在 Child 中访问 Grandparent 重载函数。考虑以下示例：

```
class grandparent{
public:
    void foo();
    void foo(int);
    void test();
};

class parent : public grandparent{
public:
    void foo();
};

class child : public parent{
public:
    child(){
        //foo(1); //not accessible
        test();   //accessible
    }
}; 
```

这里，两个函数 foo() 和 foo(int) 是 Grandparent 中的重载函数。但是 foo(int) 是不可访问的，因为 foo() 是在 Parent 中声明的（不管它声明的是公共的、私有的还是受保护的）。但是， test() 是可访问的，这根据 OOP 是正确的。

我需要知道这种行为的原因。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-17T23:49:47.123

原因是**方法隐藏**。

当您在派生类中声明具有相同名称的方法时，具有该名称的基类方法将被隐藏。完整的签名无关紧要（即 cv 限定符或参数列表）。

如果您明确希望允许呼叫，您可以使用

```
using grandparent::foo; 
```

里面`parent`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T15:14:21.117

想象一下图书馆有这个类：

```
struct Base {
}; 
```

在您的代码中，您使用该类作为基类：

```
struct Derived : Base {
    void f(int);
}; 
```

现在你写：

```
Derived d;
d.f('a'); 
```

现在您获得了该库的闪亮新版本 2.0，并且基类发生了一些变化：

```
struct Base {
    void f(char);
} 
```

如果在此处应用重载，您的代码将中断。

# jquery - Jqgrid 列名高度

> ID：14927503
> 
> 赞同：0
> 
> 时间：2013-02-17T23:49:10.890
> 
> 标签：jquery, css, jqgrid

我有一个这样的 Jqgrid：

![在此处输入图像描述](../Images/ca1f0f5f5d0ce5279f8cd1f82e529bda.png)

所以，我希望 150px 区域有 500px 而不是 150。我用萤火虫检查：

![在此处输入图像描述](../Images/a827b9b249b6a1890fb5b95d29fad291.png)

然后在css中：我看这一行：

```
 .ui-jqgrid .ui-jqgrid-bdiv{position:relative;margin:0;padding:0;overflow:auto;text-align:left;} 
```

我试图在这条线上给出一个高度（无论我做什么），这个值就像萤火虫说的：150px。所以我不知道该怎么办。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T17:11:25.997

令我惊讶的是，解决方案位于与 css 文件不同的另一个地方。

您必须在**jquery.jqGrid.js上搜索此行**

```
 var p = $.extend(true,{
        url: "",
        height: 150,
        page: 1,
        rowNum: 20,
                    ... 
```

并更改其高度（默认高度为 150 像素）。

```
 var p = $.extend(true,{
        url: "",
        height: 500,
        page: 1,
        rowNum: 20,
                    ... 
```

就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T05:25:22.467

如果要更改所有行的高度，请尝试以下代码

```
 afterInsertRow: function(rowid, rowData, rowelem) {

$(this).jqGrid('setRowData', rowid, false, { height: '500px' });  
}, 
```

如果您想根据某些条件更改高度，可以在 afterInsertRow 事件函数中检查它

请注意：不确定这是一个好的/正确的方法

# dia - 如何用 DIA 绘制矩阵？

> ID：14927504
> 
> 赞同：3
> 
> 时间：2013-02-17T23:49:13.590
> 
> 标签：dia

我需要使用 DIA 来绘制矩阵。我想要一个 16x16 矩阵，我可以在其中编辑每个框的文本。我怎样才能做到这一点？有我可以使用的预定义工具吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-10T05:24:39.153

您是否尝试过“杂项”表中的“可调整大小的网格”对象？将其添加到画布后，打开其属性对话框（例如双击它）以配置行数和列数。默认情况下，网格不提供文本框，但每个单元格都有一个连接点，您可以在其中连接文本对象。

# r - 将向量复制到矩阵 r

> ID：14927507
> 
> 赞同：22
> 
> 时间：2013-02-17T23:49:18.410
> 
> 标签：r, vector, matrix

想知道如何将向量复制到 R 中的矩阵中。例如

```
v = 1:10
dup = duplicate(V,2) 
```

`dup`看起来像哪里`rbind(1:10,1:10)`。谢谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-17T23:50:36.230

我想你正在寻找`replicate`.

```
t(replicate(2, v)) 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-02-18T00:03:01.423

或者：

```
matrix(v, nrow=2, ncol=length(v), byrow=TRUE) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-14T19:14:47.563

就我个人而言，我只是将它乘以一个向量..

例如，如果 v 是列向量： v [1 1] -> [vv]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-08T21:32:22.463

类似于 Moud 的答案，但更清晰一些。

```
n <- 10
v <- c(1,4,3,6,4,7,8,1) # random
t(t(rep(1, n))) %*% v 
```

应该很快，但不像其他一些答案那么优雅。

# mysql - VARCHAR 字段上的 MySQL Errno 150

> ID：14927510
> 
> 赞同：1
> 
> 时间：2013-02-17T23:49:40.313
> 
> 标签：mysql, foreign-keys, create-table

创建下表时出现 errno 150。前两个工作正常，但第三个抛出此错误：

```
ERROR 1005 (HY000): Can't create table 'test2.exercise_type_exercise_groups' (errno: 150) 
```

有任何想法吗？我检查了所有键列的类型、长度、字符集和排序规则是否相同......还有什么问题？

在此先感谢您的帮助！

```
CREATE TABLE `exercise_groups` (
    `id` VARCHAR(255) NOT NULL,
    PRIMARY KEY `pk_exercise_groups` (`id`)
) ENGINE=InnoDB CHARSET=utf8 COLLATE=utf8_general_ci;

CREATE TABLE `exercise_types` (
    `id` VARCHAR(255) NOT NULL,
    PRIMARY KEY `pk_exercise_types` (`id`)
) ENGINE=InnoDB CHARSET=utf8 COLLATE=utf8_general_ci;

CREATE TABLE `exercise_type_exercise_groups` (
    `exercise_type` VARCHAR(255) NOT NULL,
    `exercise_group` VARCHAR(255) NOT NULL,
    `link_type` ENUM('primary', 'ancillary'),
    PRIMARY KEY `pk_exercise_type_exercise_groups` (`exercise_type`, `exercise_group`),
    CONSTRAINT `fk_exercise_type_exercise_groups_exercise_type` 
        FOREIGN KEY (`exercise_type`) 
        REFERENCES `exercise_type` (`id`),
    CONSTRAINT `fk_exercise_type_exercise_groups_exercise_group` 
        FOREIGN KEY (`exercise_group`) 
        REFERENCES `exercise_group` (`id`)
) ENGINE=InnoDB CHARSET=utf8 COLLATE=utf8_general_ci; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T00:58:10.603

`errno 150`是一个通用的外键错误，很少有帮助。出现这种情况至少有四个原因：

1.  列类型不匹配
2.  该列不是引用表上的键，或者引用的列/表不存在（这是您的问题；您拼错了其他表）
3.  任何表都不是`InnoDB`。
4.  您正在尝试删除不存在的外键。

# objective-c - NSDocument 使用 WebKit 显示页面的名称

> ID：14927515
> 
> 赞同：0
> 
> 时间：2013-02-17T23:50:00.203
> 
> 标签：objective-c, macos, cocoa, nsdocument

我试图让 WebKit 显示当前打开的文档窗口的页面标题，其中包括一个 WebView。运行应用程序后，该文档不会显示。

我正在使用 Document.m 和 windowNibName 来实现这一点，但我确定我在做什么是错误的。我认为这可能与我不能拥有的两个 NSString 一起使用。虽然如果我没有它们，我将无法返回文档标题...（已导入 WebKit/WebKit.h）

```
 - (NSString)windowNibName:(WebView *)sender didReceiveTitle:(NSString *)title forFrame:(WebFrame *)frame
{
    // Report feedback only for the main frame.
    if (frame == [sender mainFrame]){
        [[sender window] setTitle:title];
    }
    return @"Document";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:39:25.337

您已经实现了一个名为 的方法`windowNibName:didReceiveTitle:forFrame:`，但没有发送这样的消息（除非*您*是，但如果您是，则您忽略了该代码）。

正确的方法名称是[`webView:didReceiveTitle:forFrame:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/WebKit/Protocols/WebFrameLoadDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/instm/NSObject/webView%3adidReceiveTitle%3aforFrame%3a). 假设您在窗口中只有一个 Web 视图并且在文档中只有一个窗口，并且假设文档是 Web 视图的委托，您可以从那里简单地[设置文档的显示名称](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSDocument_Class/Reference/Reference.html#//apple_ref/doc/uid/20000008-SW54)。

如果您有更复杂的事情，每个窗口有多个 Web 视图和/或每个文档有多个窗口，那么您需要询问 Web 视图[的 window](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/window)、 window 的[window controller](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWindow/windowController)和 window controller[的document](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindowController_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWindowController/document)，然后如上设置文档的显示名称。

此外，`windowNibName`与将文档的标题设置为网页的标题无关。Web 视图可能还没有开始加载页面，如果它甚至有一个要加载的 URL。这就是为什么您需要成为 Web 视图的代理并响应该代理消息的原因。

# google-app-engine - Google Channel API 使用令牌发送消息

> ID：14927517
> 
> 赞同：1
> 
> 时间：2013-02-17T23:50:07.907
> 
> 标签：google-app-engine, token, channel-api

在文档中它说“client_id”部分实际上可以是令牌，但是它不起作用。有谁知道为什么？

[https://developers.google.com/appengine/docs/python/channel/functions](https://developers.google.com/appengine/docs/python/channel/functions)

> 如果 client_id 参数实际上是 create_channel 调用返回的令牌，则 send_message 可用于不同版本的应用程序。例如，您可以在前端创建通道，然后从应用程序的后端发送消息。

我想使用它的原因是因为我也想向匿名用户发送消息，而不需要他们登录。如果令牌不起作用，我不知道是否可以为他们分配一个“client_id”。

这就是我创建令牌的方式

```
 user = users.get_current_user()

    if user:
        token = channel.create_channel(user.user_id())
    else:
        token = channel.create_channel(str(uuid.uuid4())) 
```

然后注入客户端

```
template_values = {
        'token' : token,
    } 
```

在客户端打开通道

```
 openChannel = function() {
    var token = '{{ token }}';
    var channel = new goog.appengine.Channel(token);
    var handler = {
      'onopen': onOpened,
      'onmessage': onMessage,
      'onerror': function() {},
      'onclose': function() {}
    };
    var socket = channel.open(handler);
    socket.onopen = onOpened;
    socket.onmessage = onMessage;
  } 
```

现在发送消息

```
var xhr = new XMLHttpRequest();
xhr.open('POST', path, true);
xhr.send(); 
```

在服务器中，当收到消息时，使用令牌发回消息

```
channel.send_message(token, someMessage) 
```

回客户端

```
onMessage = function(m) {
alert("you have some message");     
} 
```

如果在调用 send_message 时使用 client_id() 而不是 token，则此序列可以正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T07:03:04.883

回答 btevfik 最初的问题：在 send_message 中允许令牌或 client_id 是 1.7.5（最近）发布的一项功能。有些人可能还不熟悉它，因此他们建议使用 client_id。两者都应该工作！

我在您的代码中唯一可以看到的是，您不应该依赖令牌变量在两个请求之间保持正确。他们甚至可能不会登陆应用程序的同一个实例。如果您与更多详细信息分享您的代码，我可能会发现一些东西。正确的方法是将令牌存储在数据存储中，或者在您发送将触发返回消息的消息时将其作为参数从客户端传递。

此功能的目的是允许人们从后端（或其他版本）发送消息。以前是不可能的，而现在如果你直接使用令牌而不是 client_id 就可以做到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-12T14:19:38.087

这篇文章已经发布了很长时间，但只是对您对令牌全局变量的使用感到好奇？

我没有看到这段代码：

```
global token 
```

在设置令牌之前

```
user = users.get_current_user()

if user:
    token = channel.create_channel(user.user_id())
else:
    token = channel.create_channel(str(uuid.uuid4())) 
```

如果缺少该代码，`token`则将设置在上述函数的本地范围内，而不是全局范围内。因此，稍后使用的令牌值将是`None`（或初始化令牌的任何值。）

只是一个想法，如果它仍然相关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T06:48:21.047

您不应将特定于请求的值存储在全局变量中。将它们存储在 cookie 中或将它们作为请求参数传递。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T10:35:00.453

我不认为你在这里真的有问题。

您可以向已登录或未登录的用户发送消息。

我认为您遇到的问题是知道有多种方法可以使用通道 API re: tokens。

[https://developers.google.com/appengine/docs/python/channel/overview#Life_of_a_Typical_Channel_Message](https://developers.google.com/appengine/docs/python/channel/overview#Life_of_a_Typical_Channel_Message)

> 在此示例中，它显示 JavaScript 客户端显式请求令牌并将其客户端 ID 发送到服务器。相反，您可以选择将应用程序设计为在页面加载到浏览器之前将令牌注入客户端，或者如果愿意，可以选择其他一些实现。

![选项1](../Images/1e35ee03e284a6ba093be45eb4330929.png)

> 此图显示了在服务器上创建通道。**在此示例中，它显示 JavaScript 客户端显式请求令牌并将其客户端 ID 发送到服务器。**相反，您可以选择将应用程序设计为在页面加载到浏览器之前将令牌注入客户端，或者如果愿意，可以选择其他一些实现。

这是我的演示实现，希望对您有所帮助：[https ://github.com/Paul1234321/channelapidemo.git](https://github.com/Paul1234321/channelapidemo.git)

以下是在 GAE 上创建频道的代码：

```
 client_id = str(uuid.uuid4()).replace("-",'')
  channel_token = channel.create_channel(client_id) 
```

在 JS 中：

```
channel = new goog.appengine.Channel('{{ token }}'); 
```

看看它的实际效果： http: [//pppredictor.appspot.com/](http://pppredictor.appspot.com/)

# java - 为什么 DataOutputStream.writeChars(str) 和 String(byte[]) 不使用相同的编码？

> ID：14927521
> 
> 赞同：1
> 
> 时间：2013-02-17T23:50:33.313
> 
> 标签：java, string, character-encoding, marshalling, unmarshalling

我正在为一个类项目编写一些编组/解组例程，并且在这种情况下对 Java 的默认行为有点困惑。这是我的“天真”子程序，用于在字节流中写入和读取字符串：

```
protected static void write(DataOutputStream dout, String str)
        throws IOException{
    dout.writeInt(str.length());
    dout.writeChars(str);
}

protected static String readString(DataInputStream din)
        throws IOException{
    int strLength = 2*din.readInt(); // b/c there are two bytes per char
    byte[] stringHolder = new byte[strLength];
    din.read(stringHolder);
    return new String(stringHolder);
} 
```

不幸的是，这根本行不通。字符默认以 UTF-16 格式编写，但`String(byte[])`似乎假设每个字节都包含一个字符，并且由于 ASCII 字符在 UTF-16 中都以 0 字节开头，因此构造函数似乎只是放弃并返回一个空细绳。解决方案是更改`readString`为指定必须使用 UTF-16 编码：

```
protected static String readString(DataInputStream din)
        throws IOException{
    int strLength = 2*din.readInt();
    byte[] stringHolder = new byte[strLength];
    din.read(stringHolder);
    return new String(stringHolder, "UTF-16");
} 
```

我的问题是，为什么这是必要的？由于Java默认使用UTF-16作为字符串，为什么在从字节读取字符时不假设使用UTF-16？或者，为什么不默认将字符编码为字节？简而言之，为什么`writeChars()`方法和`String(byte[])`构造函数的默认行为不相互平行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T00:11:29.523

问题是您正在使用底层编写`char[]`，它本质上是 a`byte[]`表示字符串的 UTF-16 表示，请参阅[javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html)。
然后，您正在使用`String(byte[] bytes)`构造函数进行读取，该构造函数旨在读取使用系统默认编码编码的数据，在您的情况下，大概是 UTF-8。
您需要保持一致，实际上`DataOutputStream.writeUTF()`和`DataInputStream.readUTF()`功能是专门为此设计的。
如果您出于某种原因想要使用底层`byte[]`，您可以获得 UTF-8 表示的`String`easy using `String.getBytes("UTF-8")`，再次，请参阅[javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)。
为了简化问题，您可以使用 an`ObjectOutputStream`和 an`ObjectInputStream`来序列化实际的`String`流，而不仅仅是它的`char[]`表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T02:25:05.933

最好认为 Java 不使用其字符的任何编码。它的字符串只是原始的 16 位字符值，与 UTF16 相同。“其他”方法默认使用系统编码的原因是因为不同的平台使用不同的默认编码。例如，将包含部分 ascii 字符的 UTF8 写入使用 EBDCDIC (sp) 的大型机是没有意义的。

# cuda - 读取设备代码中的 cudaArray

> ID：14927524
> 
> 赞同：1
> 
> 时间：2013-02-17T23:50:42.537
> 
> 标签：cuda, textures, device, cuda-arrays

有没有办法`cudaArray`从设备中读取 a 中的值而不将其包装在纹理参考/对象中？我看过的所有示例都`cudaArray`专门用于创建纹理。这是他们可以使用的唯一方法，还是我可以做类似的事情：

```
__global__ kernel(cudaArray *arr, ...) {
    float x = tex1D<float>(arr, ...);
    ...
}

cudaArray *arr;
cudaMallocArray(&arr, ...);
cudaMemcpyToArray(arr, ...);
kernel<<<...>>>(arr, ...); 
```

所以基本上，应该用什么代替`tex1D`那里？此外，如果这是可能的，我会很好奇是否有人认为这样做会对性能有任何好处，但我也会运行我自己的测试来看看。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T00:23:06.757

cudaArray 是为纹理或表面内存目的而定义的。[如此处](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#cubemap-surfaces)所示：

> CUDA 数组是针对纹理获取优化的不透明内存布局。它们是一维、二维或三维，由元素组成，每个元素有 1、2 或 4 个分量，可以是有符号或无符号 8、16 或 32 位整数、16 位浮点数或 32 位浮点数。CUDA 数组只能由内核通过纹理内存中描述的纹理获取或表面内存中描述的表面读取和写入来访问。

所以实际上你必须在内核中使用[纹理函数或表面函数](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#texture-and-surface-memory)来访问 cudaArray 中的数据。

使用纹理有多种性能优势可能性。纹理可以暗示插值（即使用浮点坐标从纹理中读取）。任何需要这种数据插值的应用程序都可以从 GPU 上纹理单元内的硬件插值引擎中受益。

另一个好处，也许是在任意 GPU 代码中使用纹理最重要的好处，是用于备份存储在全局内存中的纹理的纹理缓存。纹理是一种只读操作，但如果您有一组只读数据，则纹理缓存可能会提高或扩展您快速访问数据的能力。这通常意味着在访问存储在纹理机制中的数据的函数中必须存在数据局部性/数据重用。检索到的纹理数据不会破坏 L1 缓存中的任何内容，因此通常这种数据分段/优化将是围绕数据缓存的更大策略的一部分。如果对 L1 缓存没有其他要求，则纹理机制/缓存不会比已经在 L1 中提供更快的数据访问。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-08T17:17:25.220

Robert Crovella 已经回答了您的问题。我相信为下一个用户提供两个解决方案的工作示例可能会很有用：纹理和表面。

```
#include <stdio.h>
#include <thrust\device_vector.h>

// --- 2D float texture
texture<float, cudaTextureType2D, cudaReadModeElementType> texRef;

// --- 2D surface memory
surface<void, 2> surf2D;

/********************/
/* CUDA ERROR CHECK */
/********************/
#define gpuErrchk(ans) { gpuAssert((ans), __FILE__, __LINE__); }
inline void gpuAssert(cudaError_t code, char *file, int line, bool abort=true)
{
    if (code != cudaSuccess) 
    {
        fprintf(stderr,"GPUassert: %s %s %d\n", cudaGetErrorString(code), file, line);
        if (abort) exit(code);
    }
}

/*************************************/
/* cudaArray PRINTOUT TEXTURE KERNEL */
/*************************************/
__global__ void cudaArrayPrintoutTexture(int width, int height)
{
    unsigned int x = blockIdx.x * blockDim.x + threadIdx.x;
    unsigned int y = blockIdx.y * blockDim.y + threadIdx.y;

    printf("Thread index: (%i, %i); cudaArray = %f\n", x, y, tex2D(texRef, x / (float)width + 0.5f, y / (float)height + 0.5f));
}

/*************************************/
/* cudaArray PRINTOUT TEXTURE KERNEL */
/*************************************/
__global__ void cudaArrayPrintoutSurface(int width, int height)
{
    unsigned int x = blockIdx.x * blockDim.x + threadIdx.x;
    unsigned int y = blockIdx.y * blockDim.y + threadIdx.y;

    float temp;

    surf2Dread(&temp, surf2D, x * 4, y);

    printf("Thread index: (%i, %i); cudaArray = %f\n", x, y, temp);
}

/********/
/* MAIN */
/********/
void main()
{
    int width = 3, height = 3;

    thrust::host_vector<float> h_data(width*height, 3.f);

    // --- Allocate CUDA array in device memory
    cudaChannelFormatDesc channelDesc = cudaCreateChannelDesc(32, 0, 0, 0, cudaChannelFormatKindFloat);

    cudaArray* cuArray;

    /*******************/
    /* TEXTURE BINDING */
    /*******************/
    gpuErrchk(cudaMallocArray(&cuArray, &channelDesc, width, height));

    // --- Copy to host data to device memory
    gpuErrchk(cudaMemcpyToArray(cuArray, 0, 0, thrust::raw_pointer_cast(h_data.data()), width*height*sizeof(float), cudaMemcpyHostToDevice));

    // --- Set texture parameters
    texRef.addressMode[0] = cudaAddressModeWrap;
    texRef.addressMode[1] = cudaAddressModeWrap;
    texRef.filterMode = cudaFilterModeLinear;
    texRef.normalized = true;

    // --- Bind the array to the texture reference
    gpuErrchk(cudaBindTextureToArray(texRef, cuArray, channelDesc));

    // --- Invoking printout kernel
    dim3 dimBlock(3, 3);
    dim3 dimGrid(1, 1);
    cudaArrayPrintoutTexture<<<dimGrid, dimBlock>>>(width, height);

    gpuErrchk(cudaUnbindTexture(texRef));

    gpuErrchk(cudaFreeArray(cuArray));

    /******************/
    /* SURFACE MEMORY */
    /******************/
    gpuErrchk(cudaMallocArray(&cuArray, &channelDesc, width, height, cudaArraySurfaceLoadStore));

    // --- Copy to host data to device memory
    gpuErrchk(cudaMemcpyToArray(cuArray, 0, 0, thrust::raw_pointer_cast(h_data.data()), width*height*sizeof(float), cudaMemcpyHostToDevice));

    gpuErrchk(cudaBindSurfaceToArray(surf2D, cuArray));

    cudaArrayPrintoutSurface<<<dimGrid, dimBlock>>>(width, height);
    gpuErrchk(cudaPeekAtLastError());
    gpuErrchk(cudaDeviceSynchronize());

    gpuErrchk(cudaFreeArray(cuArray));
} 
```

# meteor - 在 mac os x 10.8.2 上安装 Meteorite

> ID：14927525
> 
> 赞同：3
> 
> 时间：2013-02-17T23:50:46.537
> 
> 标签：meteor

我正在尝试安装陨石

```
MacBook-Air-Voldemar:packages voldemar$ sudo npm install -g meteorite
Password: 
```

我收到错误

```
sudo: npm: command not found 
```

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T07:00:25.550

Node 已经有一个适用于 OS X 的 node js 包。

转到[http://nodejs.org](http://nodejs.org)并按 install 下载 nodejs 包，安装时 npm 应该安装它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T01:50:37.127

该消息说您尚未安装节点包管理器`npm`。

在安装 npm 之前，请确保您已记下 node.js 的路径。它最有可能在`/usr/local/lib/node`.

然后做，

```
git clone http://github.com/isaacs/npm.git
cd npm
sudo make install 
```

现在添加到节点的路径，通过添加以下内容`.bashrc`

```
export NODE_PATH = "/path/to/node" 
```

您还需要`npm`可执行文件，因此将路径添加到 npm bin，

```
export PATH="/usr/local/bin:/usr/local/sbin:/usr/local/share/npm/bin:$PATH" 
```

然后保存并退出`.bashrc`并执行

```
source ~/.bashrc 
```

这会评估编辑，并且更改会反映在 shell 中。现在你可以继续`sudo npm install -g meteorite`

# jquery - 来自 jQuery 选择器的 jQuery 对象

> ID：14927526
> 
> 赞同：1
> 
> 时间：2013-02-17T23:50:52.183
> 
> 标签：jquery, dom, jquery-selectors

我是 jQuery 的新手，所以如果我走错了方向，请告诉我。

我有一个将“jQuery对象”作为参数的函数，如下所示：

```
function protectImageFromRightClick(image_object) {
 // yeah ok i know this is only a dumb protection!!

    image_object.bind('contextmenu', function(e) {
        return false;
    }); 

    image_object.mousedown(function(){
        return false; // for prevent drag
    });
} 
```

我想在选择时调用它。我试图用以下方式调用它`each()`：

```
$( ".photo" ).each(function (i) {
    protect(this);
}); 
```

但`this`似乎指的是一个没有任何`.bind()`方法的 DOM 对象。我不太明白如何解决这个问题。有什么想法吗？

面对的是我在代码的其他地方使用了该功能，因此解决方案如下：

```
$('some selection').bind() 
```

不是一个好的解决方案，因为这样我只会编写代码重复..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T23:52:35.720

使用 JQuery，您必须使用`$(this)`而不是`this`关键字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T23:59:08.040

当您使用选择器调用 jQuery 函数时，它会执行几个任务。首先，它构造 jQuery 对象。然后，它将 jQuery API 附加到新构造的对象上。然后，它构造一个匹配选择器的 DOM 元素数组。

当您`each`在 jQuery 对象上使用时，或者当您在回调闭包中时，`this`关键字将引用 jQuery 正在处理的当前 DOM 元素。

简而言之，

```
$( ".photo" ).each(function (i) {
    //this == the current element with class="photo"
    //$(this) == a jquery object instanced with an 
    //           array of elements containing only the 
    //           current element with class="photo" that 
    //           each is working with
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T23:56:14.597

如果您每次迭代，那么每次迭代都会调用回调，参数 (i) 是您的元素。

像

爪哇：

```
Vector<Integer> photo = new Vector<>();
photo.add(2); //ok very constructed..
for(int v:photo){
 // here v is your iteration variable
} 
```

JS：

```
$( ".photo" ).each(function (k,v) {
    protect(v);
}); 
```

但是， v 现在是纯 js，而不是 jQuery，因此您可以使用：

```
$( ".photo" ).each(function (k,v) {
    protect($(v));
}); 
```

如果你想知道这里的 k 是什么：k 代表 key，v 代表 value。在一个数组中，这可能很简单，k 是 0,1,2,... 但这也适用于像这样的对象`{"k1":"v1","k2":"v2"}`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T23:55:33.007

您可以随时检查函数中的 jQuery 对象并在必要时进行转换，例如

```
if (!image_object instanceof $) {
    image_object = $(image_object);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T23:57:22.923

该[`.each`](http://api.jquery.com/each/)方法设置`this`为实际的 DOM 对象，您可以将该 DOM 对象包装成另一个 jQuery 对象`$()`

```
$(".photo").each(function () {
    protect($(this));
}); 
```

# asp.net-mvc - 如何让参考资料回到原来的状态

> ID：14927527
> 
> 赞同：0
> 
> 时间：2013-02-17T23:50:53.417
> 
> 标签：asp.net-mvc, razor, nuget, gac

我安装了几个 NuGet 包来测试它们

[http://nuget.org/packages/Microsoft.AspNet.WebApi.HelpPage](http://nuget.org/packages/Microsoft.AspNet.WebApi.HelpPage)

[http://nuget.org/packages/SDammann.WebApi.Versioning](http://nuget.org/packages/SDammann.WebApi.Versioning)

现在每次我运行我的任何 asp.net razor 项目时，我都会收到 500 - 内部服务器错误。我卸载了软件包，但问题仍然存在。显然他们炸毁了一些参考资料。请帮忙，因为在解决此问题之前我无法完成任何工作。我什至重新安装了 VS2010 无济于事。从外观上看，GAC 中的 razor 版本之间出现了一些不匹配。我不太清楚错误的含义以及如何修复它，您不会认为在使用 NuGet 时必须处理此类事情，它不应该让事情恢复到卸载时的状态吗?

```
Log Name:      Application
Source:        ASP.NET 4.0.30319.0
Date:          2/17/2013 5:29:41 PM
Event ID:      1309
Task Category: Web Event
Level:         Warning
Keywords:      Classic
User:          N/A
Computer:      
Description:
Event code: 3005 
Event message: An unhandled exception has occurred. 
Event time: 2/17/2013 5:29:41 PM 
Event time (UTC): 2/17/2013 11:29:41 PM 
Event ID: 6eec3f634ae54462ba101be097587c9b 
Event sequence: 3 
Event occurrence: 1 
Event detail code: 0 

Application information: 
Application domain: /LM/W3SVC/1/ROOT/2-130056173740865604 
Trust level: Full 
Application Virtual Path: / 
Application Path: G:\home\Main\Web\ 
Machine name:  

Process information: 
Process ID: 4908 
Process name: w3wp.exe 
Account name: IIS APPPOOL\ASP.NET v4.0 

Exception information: 
Exception type: InvalidCastException 
Exception message: [A]System.Web.WebPages.Razor.Configuration.HostSection cannot be
cast to [B]System.Web.WebPages.Razor.Configuration.HostSection. Type A originates from
'System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral,
PublicKeyToken=31bf3856ad364e35' in the context 'Default' at location 'C:\Windows
\Microsoft.Net\assembly\GAC_MSIL\System.Web.WebPages.Razor
\v4.0_1.0.0.0__31bf3856ad364e35\System.Web.WebPages.Razor.dll'. Type B originates from 
'System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' in the context 'Default' at location 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Web.WebPages.Razor\v4.0_2.0.0.0__31bf3856ad364e35\System.Web.WebPages.Razor.dll'.
at System.Web.WebPages.Razor.WebRazorHostFactory.CreateHostFromConfig(String virtualPath, String physicalPath)
at System.Web.WebPages.Razor.RazorBuildProvider.GetHostFromConfig()
at System.Web.WebPages.Razor.RazorBuildProvider.CreateHost()
at System.Web.WebPages.Razor.RazorBuildProvider.get_Host()
at System.Web.WebPages.Razor.RazorBuildProvider.EnsureGeneratedCode()
at System.Web.WebPages.Razor.RazorBuildProvider.get_CodeCompilerType()
at System.Web.Compilation.BuildProvider.GetCompilerTypeFromBuildProvider(BuildProvider buildProvider)
at System.Web.Compilation.BuildProvidersCompiler.ProcessBuildProviders()
at System.Web.Compilation.BuildProvidersCompiler.PerformBuild()
at System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath)
at System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
at System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
at System.Web.Compilation.BuildManager.GetObjectFactory(String virtualPath, Boolean throwIfNotFound)
at System.Web.Mvc.BuildManagerWrapper.System.Web.Mvc.IBuildManager.FileExists(String virtualPath)
at System.Web.Mvc.VirtualPathProviderViewEngine.GetPathFromGeneralName(ControllerContext controllerContext, List`1 locations, String name, String controllerName, String areaName, String cacheKey, String[]& searchedLocations)
at System.Web.Mvc.VirtualPathProviderViewEngine.GetPath(ControllerContext controllerContext, String[] locations, String[] areaLocations, String locationsPropertyName, String name, String controllerName, String cacheKeyPrefix, Boolean useCache, String[]& searchedLocations)
at System.Web.Mvc.VirtualPathProviderViewEngine.FindView(ControllerContext controllerContext, String viewName, String masterName, Boolean useCache)
at System.Web.Mvc.ViewEngineCollection.<>c__DisplayClassc.<FindView>b__b(IViewEngine e)
at System.Web.Mvc.ViewEngineCollection.Find(Func`2 lookup, Boolean trackSearchedPaths)
at System.Web.Mvc.ViewResult.FindView(ControllerContext context)
at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)
at System.Web.Mvc.Controller.ExecuteCore()
at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)
at System.Web.Mvc.MvcHandler.<>c__DisplayClass6.<>c__DisplayClassb.<BeginProcessRequest>b__5()
at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass1.<MakeVoidDelegate>b__0()
at System.Web.Mvc.MvcHandler.<>c__DisplayClasse.<EndProcessRequest>b__d()
at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)

Request information: 
Request URL: http://localhost/Base/LogOn?ReturnUrl=/TiPS/ 
Request path: /Base/LogOn 
User host address: ::1 
User:  
Is authenticated: False 
Authentication Type:  
Thread account name: IIS APPPOOL\ASP.NET v4.0 

Thread information: 
Thread ID: 9 
Thread account name: IIS APPPOOL\ASP.NET v4.0 
Is impersonating: False 
Stack trace:    at System.Web.WebPages.Razor.WebRazorHostFactory.CreateHostFromConfig(String virtualPath, String physicalPath)
at System.Web.WebPages.Razor.RazorBuildProvider.GetHostFromConfig()
at System.Web.WebPages.Razor.RazorBuildProvider.CreateHost()
at System.Web.WebPages.Razor.RazorBuildProvider.get_Host()
at System.Web.WebPages.Razor.RazorBuildProvider.EnsureGeneratedCode()
at System.Web.WebPages.Razor.RazorBuildProvider.get_CodeCompilerType()
at System.Web.Compilation.BuildProvider.GetCompilerTypeFromBuildProvider(BuildProvider buildProvider)
at System.Web.Compilation.BuildProvidersCompiler.ProcessBuildProviders()
at System.Web.Compilation.BuildProvidersCompiler.PerformBuild()
at System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath)
at System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
at System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
at System.Web.Compilation.BuildManager.GetObjectFactory(String virtualPath, Boolean throwIfNotFound)
at System.Web.Mvc.BuildManagerWrapper.System.Web.Mvc.IBuildManager.FileExists(String virtualPath)
at System.Web.Mvc.VirtualPathProviderViewEngine.GetPathFromGeneralName(ControllerContext controllerContext, List`1 locations, String name, String controllerName, String areaName, String cacheKey, String[]& searchedLocations)
at System.Web.Mvc.VirtualPathProviderViewEngine.GetPath(ControllerContext controllerContext, String[] locations, String[] areaLocations, String locationsPropertyName, String name, String controllerName, String cacheKeyPrefix, Boolean useCache, String[]& searchedLocations)
at System.Web.Mvc.VirtualPathProviderViewEngine.FindView(ControllerContext controllerContext, String viewName, String masterName, Boolean useCache)
at System.Web.Mvc.ViewEngineCollection.<>c__DisplayClassc.<FindView>b__b(IViewEngine e)
at System.Web.Mvc.ViewEngineCollection.Find(Func`2 lookup, Boolean trackSearchedPaths)
at System.Web.Mvc.ViewResult.FindView(ControllerContext context)
at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)
at System.Web.Mvc.Controller.ExecuteCore()
at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)
at System.Web.Mvc.MvcHandler.<>c__DisplayClass6.<>c__DisplayClassb.<BeginProcessRequest>b__5()
at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass1.<MakeVoidDelegate>b__0()
at System.Web.Mvc.MvcHandler.<>c__DisplayClasse.<EndProcessRequest>b__d()
at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)

Custom event details: 

Event Xml:
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
<System>
<Provider Name="ASP.NET 4.0.30319.0" />
<EventID Qualifiers="32768">1309</EventID>
<Level>3</Level>
<Task>3</Task>
<Keywords>0x80000000000000</Keywords>
<TimeCreated SystemTime="2013-02-17T23:29:41.000000000Z" />
<EventRecordID>506239</EventRecordID>
<Channel>Application</Channel>
<Computer></Computer>
<Security />
</System>
<EventData>
<Data>3005</Data>
<Data>An unhandled exception has occurred.</Data>
<Data>2/17/2013 5:29:41 PM</Data>
<Data>2/17/2013 11:29:41 PM</Data>
<Data>6eec3f634ae54462ba101be097587c9b</Data>
<Data>3</Data>
<Data>1</Data>
<Data>0</Data>
<Data>/LM/W3SVC/1/ROOT/2-130056173740865604</Data>
<Data>Full</Data>
<Data>/TiPS</Data>
<Data>G:\home\Main\Web\</Data>
<Data></Data>
<Data>
</Data>
<Data>4908</Data>
<Data>w3wp.exe</Data>
<Data>IIS APPPOOL\ASP.NET v4.0</Data>
<Data>InvalidCastException</Data>
<Data>[A]System.Web.WebPages.Razor.Configuration.HostSection cannot be cast to [B]System.Web.WebPages.Razor.Configuration.HostSection. Type A originates from 'System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' in the context 'Default' at location 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Web.WebPages.Razor\v4.0_1.0.0.0__31bf3856ad364e35\System.Web.WebPages.Razor.dll'. Type B originates from 'System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' in the context 'Default' at location 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Web.WebPages.Razor\v4.0_2.0.0.0__31bf3856ad364e35\System.Web.WebPages.Razor.dll'.
at System.Web.WebPages.Razor.WebRazorHostFactory.CreateHostFromConfig(String virtualPath, String physicalPath)
at System.Web.WebPages.Razor.RazorBuildProvider.GetHostFromConfig()
at System.Web.WebPages.Razor.RazorBuildProvider.CreateHost()
at System.Web.WebPages.Razor.RazorBuildProvider.get_Host()
at System.Web.WebPages.Razor.RazorBuildProvider.EnsureGeneratedCode()
at System.Web.WebPages.Razor.RazorBuildProvider.get_CodeCompilerType()
at System.Web.Compilation.BuildProvider.GetCompilerTypeFromBuildProvider(BuildProvider buildProvider)
at System.Web.Compilation.BuildProvidersCompiler.ProcessBuildProviders()
at System.Web.Compilation.BuildProvidersCompiler.PerformBuild()
at System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath)
at System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
at System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
at System.Web.Compilation.BuildManager.GetObjectFactory(String virtualPath, Boolean throwIfNotFound)
at System.Web.Mvc.BuildManagerWrapper.System.Web.Mvc.IBuildManager.FileExists(String virtualPath)
at System.Web.Mvc.VirtualPathProviderViewEngine.GetPathFromGeneralName(ControllerContext controllerContext, List`1 locations, String name, String controllerName, String areaName, String cacheKey, String[]&amp; searchedLocations)
at System.Web.Mvc.VirtualPathProviderViewEngine.GetPath(ControllerContext controllerContext, String[] locations, String[] areaLocations, String locationsPropertyName, String name, String controllerName, String cacheKeyPrefix, Boolean useCache, String[]&amp; searchedLocations)
at System.Web.Mvc.VirtualPathProviderViewEngine.FindView(ControllerContext controllerContext, String viewName, String masterName, Boolean useCache)
at System.Web.Mvc.ViewEngineCollection.&lt;&gt;c__DisplayClassc.&lt;FindView&gt;b__b(IViewEngine e)
at System.Web.Mvc.ViewEngineCollection.Find(Func`2 lookup, Boolean trackSearchedPaths)
at System.Web.Mvc.ViewResult.FindView(ControllerContext context)
at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
at System.Web.Mvc.ControllerActionInvoker.&lt;&gt;c__DisplayClass1c.&lt;InvokeActionResultWithFilters&gt;b__19()
at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)
at System.Web.Mvc.Controller.ExecuteCore()
at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)
at System.Web.Mvc.MvcHandler.&lt;&gt;c__DisplayClass6.&lt;&gt;c__DisplayClassb.&lt;BeginProcessRequest&gt;b__5()
at System.Web.Mvc.Async.AsyncResultWrapper.&lt;&gt;c__DisplayClass1.&lt;MakeVoidDelegate&gt;b__0()
at System.Web.Mvc.MvcHandler.&lt;&gt;c__DisplayClasse.&lt;EndProcessRequest&gt;b__d()
at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously)

</Data>
<Data>http://localhost/Base/LogOn?ReturnUrl=/</Data>
<Data>/Base/LogOn</Data>
<Data>::1</Data>
<Data>
</Data>
<Data>False</Data>
<Data>
</Data>
<Data>IIS APPPOOL\ASP.NET v4.0</Data>
<Data>9</Data>
<Data>IIS APPPOOL\ASP.NET v4.0</Data>
<Data>False</Data>
<Data>   at System.Web.WebPages.Razor.WebRazorHostFactory.CreateHostFromConfig(String virtualPath, String physicalPath)
at System.Web.WebPages.Razor.RazorBuildProvider.GetHostFromConfig()
at System.Web.WebPages.Razor.RazorBuildProvider.CreateHost()
at System.Web.WebPages.Razor.RazorBuildProvider.get_Host()
at System.Web.WebPages.Razor.RazorBuildProvider.EnsureGeneratedCode()
at System.Web.WebPages.Razor.RazorBuildProvider.get_CodeCompilerType()
at System.Web.Compilation.BuildProvider.GetCompilerTypeFromBuildProvider(BuildProvider buildProvider)
at System.Web.Compilation.BuildProvidersCompiler.ProcessBuildProviders()
at System.Web.Compilation.BuildProvidersCompiler.PerformBuild()
at System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath)
at System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
at System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
at System.Web.Compilation.BuildManager.GetObjectFactory(String virtualPath, Boolean throwIfNotFound)
at System.Web.Mvc.BuildManagerWrapper.System.Web.Mvc.IBuildManager.FileExists(String virtualPath)
at System.Web.Mvc.VirtualPathProviderViewEngine.GetPathFromGeneralName(ControllerContext controllerContext, List`1 locations, String name, String controllerName, String areaName, String cacheKey, String[]&amp; searchedLocations)
at System.Web.Mvc.VirtualPathProviderViewEngine.GetPath(ControllerContext controllerContext, String[] locations, String[] areaLocations, String locationsPropertyName, String name, String controllerName, String cacheKeyPrefix, Boolean useCache, String[]&amp; searchedLocations)
at System.Web.Mvc.VirtualPathProviderViewEngine.FindView(ControllerContext controllerContext, String viewName, String masterName, Boolean useCache)
at System.Web.Mvc.ViewEngineCollection.&lt;&gt;c__DisplayClassc.&lt;FindView&gt;b__b(IViewEngine e)
at System.Web.Mvc.ViewEngineCollection.Find(Func`2 lookup, Boolean trackSearchedPaths)
at System.Web.Mvc.ViewResult.FindView(ControllerContext context)
at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
at System.Web.Mvc.ControllerActionInvoker.&lt;&gt;c__DisplayClass1c.&lt;InvokeActionResultWithFilters&gt;b__19()
at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)
at System.Web.Mvc.Controller.ExecuteCore()
at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)
at System.Web.Mvc.MvcHandler.&lt;&gt;c__DisplayClass6.&lt;&gt;c__DisplayClassb.&lt;BeginProcessRequest&gt;b__5()
at System.Web.Mvc.Async.AsyncResultWrapper.&lt;&gt;c__DisplayClass1.&lt;MakeVoidDelegate&gt;b__0()
at System.Web.Mvc.MvcHandler.&lt;&gt;c__DisplayClasse.&lt;EndProcessRequest&gt;b__d()
at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously)
</Data>
</EventData>
</Event> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T23:58:58.337

没关系，我删除了对 System.Web.Razor 和 System.Web.Webpages.Razor 的引用，然后重新添加了它们的第 2 版。这似乎解决了问题。

# java - 在另一个线程中加载位图而不获取新的内存地址

> ID：14927530
> 
> 赞同：2
> 
> 时间：2013-02-17T23:51:17.093
> 
> 标签：java, android, multithreading, bitmap

我试图在另一个线程中从磁盘加载图像，以免减慢我的绘制线程，但问题是当保存位图的对象被传输到新线程时，它们有不同的指针。我不完全确定Java如何跨可乘线程处理指针，但我正在寻找一种解决方案，使两个线程都使用同一个对象（浅拷贝）而不是线程之间对象的深度拷贝。

这是我的代码

```
new LoadImageTask().execute(ThisTimeDrawBitmaps.indexOf(bitmapWrapper), gameEngine);

private class LoadImageTask extends AsyncTask {
    protected BitmapWrapper LoadImage(BitmapWrapper bitmapWrapper, GameEngine gameEngine) {
        //loading the image in a temp object to avoid  fatal error 11
        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inScaled = true;
        Bitmap tempImage = BitmapFactory.decodeResource(Sceptrum.GetResources, bitmapWrapper.getID(), options);
        tempImage = Bitmap.createScaledBitmap(bitmapWrapper.getBitmap(), (int) (bitmapWrapper.getBitmap().getWidth() * gameEngine.getScale()), (int) (bitmapWrapper.getBitmap().getHeight() * gameEngine.getScale()), false);
        //so that the image can be gc.
        Bitmap RemovePointer = bitmapWrapper.getBitmap();
        //to avoid fatal error 11
        bitmapWrapper.setBitmap(tempImage);
        //removing the old image.
        RemovePointer.recycle();
        return bitmapWrapper;
     }
    @Override
    /**
     * add the bitmapwrapper you want to load and make sure to add the GameEngine as the last parameter.
     */
    protected Object doInBackground(Object... params) {
        for (int i = 0; i < params.length - 1; i++) {
            return LoadImage(ThisTimeDrawBitmaps.get((Integer) params[i]), (GameEngine) params[params.length - 1]);
        }
        return null;
    }
 }

public class BitmapWrapper{
private Bitmap bitmap;
/**
 * Use only to send the bitmap as a parameter. To modify or read data to/from the bitmap use the methods provided by BitmapWrapper.
 * @return
 */
public Bitmap getBitmap() {
    return bitmap;
}
public void setBitmap(Bitmap bitmap) {
    this.bitmap = bitmap;
}
private int id;
public int getID()
{
    return id;
}
private Point originalSize;
public Point getOriginalSize() {
    return originalSize;
}
public BitmapWrapper(Bitmap bitmap, int ID) {
    this.setBitmap(bitmap);
    id = ID;
    originalSize = new Point(bitmap.getWidth(), bitmap.getHeight());
}
public int getWidth()
{
    return bitmap.getWidth();
}
public int getHeight()
{
    return bitmap.getHeight();
}
public void createScaledBitmap(GameEngine gameEngine)
{
    bitmap = Bitmap.createScaledBitmap(bitmap, (int) (originalSize.x * gameEngine.getScale()), (int) (originalSize.y * gameEngine.getScale()), false);
}
public void CreateBitmap()
{
    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inScaled = false;
    bitmap = BitmapFactory.decodeResource(Sceptrum.GetResources, id, options);
}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T09:33:48.133

这不是指针问题（Java 中确实存在这样的问题:)）。如果您想在后台线程中加载图像，您应该创建一个（静态）AsyncTask，它持有对布局中视图的弱引用，您实际上希望在其中放置位图。在 doInBackground 中，您应该加载图像并返回它们。在 postExecute（在 UI 线程上调用）中，您将收到 doInBackground（位图）的结果。检查引用的视图是否仍然存在（活动仍然存在）后，您可以使用位图（将它们放在视图中）。

您不能从任何其他线程修改 UI 元素，除了 UI 线程（这适用于任何 UI 框架）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:44:30.397

您可以尝试使用`volatile`. 我是说：

```
private volatile Bitmap bitmap; 
```

“声明为 volatile 的变量必须在所有线程中同步其数据”来自：[http ://www.javaperformancetuning.com/news/qotm030.shtml](http://www.javaperformancetuning.com/news/qotm030.shtml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:11:56.163

尝试引入一个`Container`对象。

```
public class Container<T> {
    private volatile boolean ready = false;
    private T object;

    public boolean isReady() { 
        return ready; 
    }

    public void setReady(boolean ready) {
        this.ready = ready;
    }

    public T get() {
        return (ready) ? object : null;
    }

    public void set(T object) {
        this.object = object;
    }
} 
```

你可以用任何类型实例化这个容器：

```
Container<Bitmap> logoContainer = new Container<Bitmap>();
Bitmap logo = logoContainer.get(); // returns null if not yet ready 
```

在后台线程中，您可以初始化：

```
Container<Bitmap> logoContainer = ... // 
Bitmap b = ... // load
logoContainer.set(b);
logoContainer.setReady(true); 
```

# winapi - “some.exe”中 0x00FF1230 处未处理的异常：0xC0000005：访问冲突执行位置 0x00FF1230

> ID：14927531
> 
> 赞同：0
> 
> 时间：2013-02-17T23:51:33.690
> 
> 标签：winapi, visual-c++, error-handling, compiler-errors, 32bit-64bit

我开始在 32 平台上编写代码并且代码工作得很好，但是在 64 位甚至无法启动，我正在寻找的是**问题开始的地方，为什么认为在 64 下不起作用？**

错误是：

**“MyApp.exe”中 0x00FF1230 处未处理的异常：0xC0000005：访问冲突执行位置 0x00FF1230**

实际代码是：

```
 // win.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"

/* Keymapper v1.1
 *
 * This program is free software. It comes without any warranty, to
 * the extent permitted by applicable law. You can redistribute it
 * and/or modify it under the terms of the Do What The Fuck You Want
 * To Public License, Version 2, as published by Sam Hocevar. See
 * http://sam.zoy.org/wtfpl/COPYING for more details. */

// Make a really small executable
#pragma comment(linker,"/ENTRY:main") // Set entry point

// Merge all default sections into the .text (code) section.
#pragma comment(linker,"/MERGE:.rdata=.data")
#pragma comment(linker,"/MERGE:.text=.data")

#pragma comment(lib, "msvcrt.lib")

#if (_MSC_VER < 1300)
    #pragma comment(linker,"/IGNORE:4078")
    #pragma comment(linker,"/OPT:NOWIN98")
#endif

#pragma comment(linker, "/FILEALIGN:0x200")

#define WIN32_LEAN_AND_MEAN
#define VC_EXTRALEAN
#define WH_KEYBOARD_LL 13

#include <windows.h>

LRESULT CALLBACK LowLevelKeyboardProc(int nCode, WPARAM wParam, LPARAM lParam);
BOOL WINAPI ConsoleEventHandler(DWORD dwCtrlType); // for graceful exit
DWORD dwMainThread = 0; // because apparently the console event handler thread for Ctrl+C is different from the main thread

int main(int args, char* argv[])
{
    const char message[] =
        "Caps Lock Remapper\n"
        "Remaps Caps Lock to Backspace on the fly without rebooting.\n"
        "Written by Petrus Theron http://freshcode.co/\n"
        "Fork this on GitHub: http://github.com/pate/keymapper\n"
        "\nPress Ctrl+C or close window to exit.\n";

    DWORD count = 0;
    HANDLE hStdOut = GetStdHandle(STD_OUTPUT_HANDLE);
    WriteConsoleA(hStdOut, message, sizeof(message)-2, &count, NULL);

    if (!SetConsoleCtrlHandler(ConsoleEventHandler, TRUE))
        return -1;

    dwMainThread = GetCurrentThreadId();

    // Retrieve the applications instance
    HINSTANCE appInstance = GetModuleHandle(NULL);

    // Attach global keyboard hook to capture keystrokes
    HHOOK hHook = SetWindowsHookEx(WH_KEYBOARD_LL, LowLevelKeyboardProc, appInstance, 0);
    if (!hHook)
        return -2;

    MSG msg;

    while(GetMessage(&msg, NULL, 0, 0) > 0)
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }

    // Clean up
    UnhookWindowsHookEx(hHook);
    SetConsoleCtrlHandler(ConsoleEventHandler, FALSE);

    return 0;
}

LRESULT CALLBACK LowLevelKeyboardProc(int nCode, WPARAM wParam, LPARAM lParam)
{
    KBDLLHOOKSTRUCT *pKeyBoard = (KBDLLHOOKSTRUCT *)lParam;

    switch( pKeyBoard->vkCode )
    {
    case VK_CAPITAL:
        {
            switch (wParam)
            {
            case WM_KEYDOWN:
                keybd_event(VK_BACK, 0x8e, 0, 0);
                return 1;
            case WM_KEYUP:
                keybd_event(VK_BACK, 0x8e, KEYEVENTF_KEYUP, 0);
                return 1;
            }
        }

        default:
            return CallNextHookEx( NULL, nCode, wParam, lParam );
    }

    return 0;
}

BOOL WINAPI ConsoleEventHandler(DWORD dwCtrlType)
{
    switch(dwCtrlType)
    {
        case CTRL_C_EVENT:
        case CTRL_CLOSE_EVENT:
            PostThreadMessage(dwMainThread, WM_QUIT, NULL, NULL);
            return TRUE;

        default:
            return FALSE;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T07:46:26.577

文本和数据部分被合并。

`#pragma comment(linker,"/MERGE:.text=.data")`

```
Attempt to execute non-executable address 0000000000111ee6
(1078.1080): Access violation - code c0000005 (first chance)
First chance exceptions are reported before any exception handling.
This exception may be expected and handled.
*** WARNING: Unable to verify checksum for test.exe
test!ILT+225(_main):
00111ee6 e955010000      jmp     test!main (00112040) 
```

00111ee6 地址属于 .data 段，具有[PAGE_WRITECOPY](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366786%28v=vs.85%29.aspx)内存保护，不允许执行代码。

```
0:000:x86> !address 00111ee6 
Usage:                  Image
Allocation Base:        00100000
Base Address:           00111000
End Address:            00114000
Region Size:            00003000
Type:                   01000000    MEM_IMAGE
State:                  00001000    MEM_COMMIT
Protect:                00000008    PAGE_WRITECOPY

0:000:x86> !dh test
[...]
     ----- new -----
0000000000100000 image base
[...]
SECTION HEADER #2
   .data name
    2E3A virtual size
   11000 virtual address
    2C00 size of raw data
[..] 
```

# ios - 如何使用自动布局使视图浮动在滚动视图上

> ID：14927532
> 
> 赞同：3
> 
> 时间：2013-02-17T23:51:34.773
> 
> 标签：ios, ios6

在[iOS 6.0 发行说明](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/index.html)中有以下声明：

> 请注意，您可以通过在视图和滚动视图的子树之外的视图（例如滚动视图的超级视图）之间创建约束，使滚动视图的子视图看起来浮动（不滚动）在其他滚动内容之上。

有人有想法么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T23:57:37.387

我做了一些游戏，我有一个工作示例。

视图不滚动，它被放在顶部，高度是滚动视图高度和任意值之间的差异。

```
// in viewDidLoad

UIIView *myView = [[UIView alloc] init];
[self.scrollView addSubview:myView];
myView.translatesAutoresizingMaskIntoConstraints = NO;

NSLayoutConstraint *constraint = [NSLayoutConstraint constraintWithItem:self.mapView 
    attribute:NSLayoutAttributeTop 
    relatedBy:(NSLayoutRelationEqual) 
       toItem:self.containerView 
    attribute:(NSLayoutAttributeTop) 
   multiplier:1.0 
     constant:0];
[self.view addConstraint:constraint];

// Give my view some intrinsic size
NSDictionary *dict = NSDictionaryOfVariableBindings(myView);
NSArray *constraints = [NSLayoutConstraint constraintsWithVisualFormat:@"|[myView]|" 
                                                               options:(NSLayoutFormatAlignAllBaseline) 
                                                               metrics:nil 
                                                                 views:dict];
[self.view addConstraints:constraints];

// In view did appear

// calc height from height of scroll view - this is needs work
float height = -self.scrollView.frame.size.height + 250;

NSLayoutConstraint *constraint = [NSLayoutConstraint constraintWithItem:self.mapView                attribute:NSLayoutAttributeHeight 
    relatedBy:(NSLayoutRelationEqual) 
       toItem:self.containerView 
    attribute:(NSLayoutAttributeHeight) 
       multiplier:1.0 
     constant:offset];
[self.view addConstraint:constraint]; 
```

# django - 自定义表单的 Django get_FOO_display 不起作用

> ID：14927533
> 
> 赞同：0
> 
> 时间：2013-02-17T23:51:38.170
> 
> 标签：django, django-forms

所以这是我的表格：

```
class QuestionForm(forms.ModelForm):
    answer = forms.ChoiceField(required=True, widget=forms.RadioSelect())

    def __init__(self, question=None, *args, **kwargs):
        super(QuestionForm, self).__init__(*args, **kwargs)
        self.fields['answer'].choices = [(a.answer, a.answer) for a in Answer.objects.filter(question=question)]

    class Meta:
        model = Questions
        fields = ('answer', 'importance' ) 
```

当用户选择`answer`它时，它会显示所有`Answer`对象。以下是我的看法：

```
def questions(request):
    new_forms = []
    q = Questions.objects.all()[0]
    if request.method =='POST':
        #form = QuestionForm(request.POST or None)
        for forms in new_forms:
            if forms.is_valid():
                new = forms.save(commit=False)
                #get the user's inputs to the QuestionForm and save them
                UserAnswer(user=request.user, answer=new.cleaned_data['answer'], question=new.question)
                UserAnswer.save()

    else:
        instance=Questions.objects.all().filter(owner=request.user)[0]
        #form = QuestionForm(question=q, instance=q)

    for a in Questions.objects.all():
        new_forms.append(QuestionForm(question=a, instance=a))
    return render_to_response("questions/base.html", locals(), context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:45:45.627

我对你在做什么感到很困惑。

```
 print new.fields['id_answer_2'].value
            print get_id_answer_2_display() 
```

你`save(commit=False)`是一个返回模型*实例*的 ModelForm 。它甚至不应该有 fields 属性（你会在这里得到一个 AttributeError ）。

2：你下一个`get_id_answer_2_display()`看起来甚至不是正确的领域的电话（不要介意你把它作为一个独立的函数来调用）。

您的 ModelForm 建议您有一个`answer`字段，因此要使用`get_FOO_display`，您需要调用`new.get_answer_display()`

# r - 基于多列隔离数据区域

> ID：14927538
> 
> 赞同：3
> 
> 时间：2013-02-17T23:52:18.183
> 
> 标签：r, intervals, subset

我有一个数据集，在这里缩写：

```
SNP chr       BP log10   PPA
rs10068  17 56555 1.16303 0.030
rs10032  17 56561 26.364 0.975
rs10354  17 34951 4.3212 0.626
rs10043  17 20491 0.00097 0.006
rs10457  17 69572 -0.38403 0.014
rs10465  17 69872 8.19547 0.927 
```

其中 PPA 是关联的后验概率。由于我有一些高 log10 值 (>6)，我想确定这些区域周围的可信区间，以确定它们的大小。

为此，我首先想识别 log10 > 6 的 SNP，这很简单，使用子集。

```
newdata <- subset(data, log10 > 6) 
```

但是，我还想在这个子集中包括物理上靠近这些先导 SNP 的 SNP，使用 BP 500 +/- 先导 SNP 的 BP（log10>6）。在这里，我不确定最好的方法。这是我可以研究的，`subset`还是我应该首先在我的原始数据中识别这些主要 SNP，然后从那里子集？

一旦我隔离了这些区域，我就可以继续前进。

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T00:00:16.383

```
s <- read.table(header=T, text="SNP chr       BP log10   PPA
rs10068  17 56555 1.16303 0.030
rs10032  17 56561 26.364 0.975
rs10354  17 34951 4.3212 0.626
rs10043  17 20491 0.00097 0.006
rs10457  17 69572 -0.38403 0.014
rs10465  17 69872 8.19547 0.927") 
```

到 s$log10 > 6 的任何行的距离：

```
outer(s$BP[s$log10 > 6], s$BP, '-')
##       [,1]  [,2]  [,3]  [,4]   [,5]   [,6]
## [1,]     6     0 21610 36070 -13011 -13311
## [2,] 13317 13311 34921 49381    300      0 
```

上面任何绝对值 < 500 的列都是您要保留的列：

```
s[apply(outer(s$BP[s$log10 > 6], s$BP, '-'), 2, function(x) any(abs(x) < 500)),]
##       SNP chr    BP    log10   PPA
## 1 rs10068  17 56555  1.16303 0.030
## 2 rs10032  17 56561 26.36400 0.975
## 5 rs10457  17 69572 -0.38403 0.014
## 6 rs10465  17 69872  8.19547 0.927 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T08:51:48.390

对于它的价值，这是一个使用`GenomicRanges`包的解决方案。这个包建立在`IRanges`并使用非常有效地处理区间数据`interval trees`。这也应该能够处理所有不同的染色体。

*   首先加载数据：

    ```
    # load data
    df <- read.table(header=T, text="SNP chr       BP log10   PPA
    rs10068  17 56555 1.16303 0.030
    rs10032  17 56561 26.364 0.975
    rs10354  17 34951 4.3212 0.626
    rs10043  17 20491 0.00097 0.006
    rs10457  17 69572 -0.38403 0.014
    rs10465  17 69872 8.19547 0.927") 
    ```

*   获取 log10 > 6 的子集

    ```
    df.f <- df[df$log10 > 6, ] 
    ```

*   在初始数据和子集上加载和创建范围

    ```
    require(GenomicRanges)
    df.gr <- GRanges(Rle(df$chr), IRanges(df$BP, df$BP))
    df.f.gr <- GRanges(Rle(df.f$chr), IRanges(df.f$BP, df.f$BP)) 
    ```

*   查找 log10 > 6 的所有数据与所有其他 SNP 的重叠，间隙 = +/- 500

    ```
    olaps <- findOverlaps(df.f.gr, df.gr, maxgap=500) 
    ```

*   获取输出

    ```
    # if you just want a whole data.frame with ALL SNPs that have 
    # log > 6 or within 500 bases of one with log > 6, then,        
    out <- df[subjectHits(olaps), ] 

    #       SNP chr    BP    log10   PPA
    # 1 rs10068  17 56555  1.16303 0.030
    # 2 rs10032  17 56561 26.36400 0.975
    # 5 rs10457  17 69572 -0.38403 0.014
    # 6 rs10465  17 69872  8.19547 0.927

    # In case you want for each SNP that has log > 6, all of the 
    # snps that are within 500 bases (either side) apart for 
    # this SNP, separately, then,
    out.list <- split(out, df$BP[queryHits(olaps)])
    # $`56555`
    #       SNP chr    BP    log10   PPA
    # 1 rs10068  17 56555  1.16303 0.030
    # 2 rs10032  17 56561 26.36400 0.975
    #     
    # $`56561`
    #       SNP chr    BP    log10   PPA
    # 5 rs10457  17 69572 -0.38403 0.014
    # 6 rs10465  17 69872  8.19547 0.927 
    ```

# c# - 对通用列表进行降序排序，删除值并按不同属性升序排序会导致意外列表

> ID：14927541
> 
> 赞同：-3
> 
> 时间：2013-02-17T23:52:31.660
> 
> 标签：c#, linq, list, sorting

我有一个特殊类型的列表：

```
List<Spitzen_Frequenz_und_Wert> spitzenliste = new List<Spitzen_Frequenz_und_Wert>();

//... 

public class Spitzen_Frequenz_und_Wert
{
    public double Frequenz;
    public double Wert;
} 
```

我正在为*spitzenliste*添加值。它看起来像这样（示例）：

```
Frequenz;Wert
1;0.1
2;0.8
3;0.2
4;0.9
5;0.2
6;0.8 
```

我想按*Wert*降序过滤这个列表，所以在我们的例子中

```
Frequenz;Wert
4;0.9
2;0.8
6;0.8
5;0.2
3;0.2
1;0.1 
```

然后我只想保留前 5 个条目

```
Frequenz;Wert
4;0.9
2;0.8
6;0.8
5;0.2
3;0.2 
```

*然后我想按频率*升序排序

 *```
Frequenz;Wert
2;0.8
3;0.2
4;0.9
5;0.2
6;0.8 
```

我的方法

```
var NachGrößeSortiert = spitzenliste.OrderByDescending(Spitzen_Frequenz_und_Wert => Spitzen_Frequenz_und_Wert.Wert).ToList();
NachGrößeSortiert.RemoveRange(5, NachGrößeSortiert.Count - 5);
var NachFrequenzSortiert = NachGrößeSortiert.OrderBy(Spitzen_Frequenz_und_Wert => Spitzen_Frequenz_und_Wert.Frequenz);
foreach (var kklm in NachFrequenzSortiert)
{
    db(kklm.Frequenz + ";" + kklm.Wert);
} 
```

结果类似于

```
Frequenz;Wert
1;0.1
1;0.8
1;0.2
... 
```

怎么了？

编辑：公式有效，但 spitzenliste 的值错误。我纠正了它，它起作用了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T23:57:22.203

我认为您混淆了升序和降序这两个词。尝试扭转它。

看起来你在两个排序中都按升序排序。升序是“最小的优先，值按顺序增加”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T00:01:42.753

降序 - 从较大的值排序到较小的值。虽然您的示例显示，您需要将列表从小到大排序。

此外，只要您不需要修改原始列表，您就可以`Take`用于相同的任务：

```
var result = spitzenliste.OrderBy(s=>s.Wert)
                         .Take(5)
                         .OrderBy(s=>s.Frequenz) 
```

上面的示例将产生输出（`Wert`此处省略 = 0.9）：

```
1:  0,1
2:  0,8
3:  0,2
5:  0,2
6:  0,8 
```

而如果你使用`OrderByDescending(s=>s.Wert)`，你会得到

```
2:  0,8
3:  0,2
4:  0,9
5:  0,2
6:  0,8 
```

`Wert`= 0.1 此处省略*

# ruby-on-rails - Rspec - 您必须激活 Authlogic::Session::Base.controller - 我已经尝试过常见的建议

> ID：14927543
> 
> 赞同：2
> 
> 时间：2013-02-17T23:52:38.730
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing, rspec, authlogic

我知道这个问题已被多次回答，但现有的答案并不能解决我的问题。

我想为控制器运行我的 rspec 测试。我需要通过 Authlogic 对用户进行身份验证。

正如你们中的许多人所说（在其他类似问题中），我添加到**spec_helper.rb**文件中：

```
require "authlogic/test_case"
include Authlogic::TestCase 
```

和**我的 events_controller_spec.rb**之前的**activate_authlogic**：

 **```
...
  before :each do
    activate_authlogic
    user = FactoryGirl.create(:user)
    UserSession.create(user)
  end
... 
```

但是运行 rspec，我总是收到臭名昭著的错误消息：

```
Failure/Error: UserSession.create(user)
     Authlogic::Session::Activation::NotActivatedError:
       You must activate the Authlogic::Session::Base.controller with a controller object before creating objects 
```

你能看出它有什么问题吗？

任何建议都非常受欢迎。

谢谢！

附言。

使用的版本： - rails 3.2 - rspec (2.11.0) - rspec-core (2.11.1)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T15:16:16.357

尝试使用`setup :activate_authlogic`or`Authlogic::Session::Base.controller = Authlogic::ControllerAdapters::RailsAdapter.new(self)`代替`activate_authlogic`，也许它会有所帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T13:42:00.317

我不明白您是否找到了解决方案，但这是我用于 Rspec 控制器的代码。您可以在会话创建之前捕获无效用户的错误！

规范/spec_helper.rb

```
def log_in(user)
  user.should_not be_nil
  session = UserSession.create!(user, false)
  session.should be_valid
  session.save
end 
```

规格/控制器/...

```
require 'spec_helper'
require 'authlogic/test_case'

describe xxxController do
  setup :activate_authlogic

  context "user logged" do
    before(:each) do
      @user = Factory(:user)
      log_in(@user)
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T19:44:54.960

经过多次尝试，我发现了不止一个问题：

*   FactoryGirl 创建的用户不是有效用户
*   而不是“之前：每个”，有时我尝试“之前：所有”，这给我的错误修复增加了噪音

对不起“没那么有用”的问题:)**

# c# - 受保护的内部和受保护的内部有区别吗？

> ID：14927545
> 
> 赞同：6
> 
> 时间：2013-02-17T23:52:46.840
> 
> 标签：c#, .net, internal, protected, access-modifiers

```
public class TestClass
{
    protected internal int FieldA;
    internal protected int FieldB;    
} 
```

受保护的内部成员和内部受保护的成员之间有区别吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T23:56:31.647

> `protected internal`和`internal protected` 会员有区别吗？

它们之间没有区别。

`protected internal`表示`protected`OR `internal`。

`internal protected`表示`internal`OR `protected`。

> 类型或成员可以被声明它的程序集中的任何代码访问，也可以**从**另一个程序集中的派生类中访问。来自另一个程序集的访问必须在派生自声明受保护内部元素的类的类声明中进行，并且必须通过派生类类型的实例进行。

两者中，`protected internal`常用。**[MSDN 页面上没有关于 Access Modifiers](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/access-modifiers)**`internal protected`的参考。

另请查看 Phil Haack 的博客文章**[`What Does Protected Internal Mean?`](http://haacked.com/archive/2007/10/29/what-does-protected-internal-mean.aspx)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T23:55:16.160

不，没有区别。您可以按照您想要的任何顺序声明它们。就像您可以`static`在访问修饰符之前或之后声明一样。

唯一真正的区别应该是您和您的团队做出的决定。通常，您会希望坚持*一种*风格以避免混淆或假设，或者至少在阅读时使事情保持一致。

编辑：虽然，现在我想起来了，我不记得`"internal protected"`经常看到。在[访问修饰符的 MSDN 页面上](http://msdn.microsoft.com/en-us/library/ms173121.aspx)，它确实将其列为`"protected internal"`，因此请坚持使用它，因为它可能被认为是“更标准”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T23:56:29.490

不，那里没有。

两种变体都定义了一个可以从同一个程序集和后代类访问的成员。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T00:51:52.820

这是一个逻辑“OR”=> Internal 的按位运算：来自同一个程序集。protected ：来自派生类。“受保护和内部”是没有意义的:-)

# mysql - 在 VB 中从 MySQL 数据库中检索多个条目

> ID：14927549
> 
> 赞同：0
> 
> 时间：2013-02-17T23:53:50.293
> 
> 标签：mysql, database, arrays, vb.net

我正在为我的学校计算课程建立一个房间预订服务，我不完全确定如何从数据库中检索以前进行的预订。我知道如何连接到数据库并读取一个条目而不是多个条目。

到目前为止，我有：

```
 strBookingQuery = "SELECT * FROM bookings WHERE Date = '" & ConvertedBookingDate & "'"

    Dim Cmd As New MySqlCommand(strBookingQuery, Newconnection)
    Newconnection.ConnectionString = strServerString
    Newconnection.Open()
    reader = Cmd.ExecuteReader()
    reader.Read() 
```

这会从数据库中提取 5 个变量，日期、预订期间、预订时长、用户 ID 和房间 ID，我希望将它们写入整数，最后四个变量写入整数数组，数组大小为 7，因为一天中的最大预订数量为 7。任何帮助将不胜感激 :)

我也为任何糟糕的编码道歉，我是一名 A 级学生，所以我已经很长时间没有真正编码。

类似的东西？

```
Function GetBookingData()

    strBookingQuery = "SELECT * FROM bookings WHERE Date = '" & ConvertedBookingDate & "'"

    Dim Cmd As New MySqlCommand(strBookingQuery, Newconnection)
    Newconnection.ConnectionString = strServerString
    Newconnection.Open()
    reader = Cmd.ExecuteReader()
    reader.Read()
    For SP = 1 To intBookingCount
        Do While reader.Read()
            StartPeriod(SP) = reader.GetInt16(1)
        Loop
        MsgBox(StartPeriod(SP))
    Next

    Newconnection.Close()

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:47:06.617

目前尚不完全清楚你正在尝试做什么，但我怀疑你真正想要的是这样的：

```
Function GetBookingData()
    strBookingQuery = "SELECT * FROM bookings WHERE Date = '" & ConvertedBookingDate & "'"
    Dim Cmd As New MySqlCommand(strBookingQuery, Newconnection)
    Newconnection.ConnectionString = strServerString
    Newconnection.Open()
    reader = Cmd.ExecuteReader()
    For SP = 1 To intBookingCount
        If Not reader.Read() Then
            Exit For
        End If
        StartPeriod(SP) = reader.GetInt16(1)
        MsgBox(StartPeriod(SP))
    Next
    Newconnection.Close()    
End Function 
```

但是，我会提出一些进一步的建议。首先，您应该`Using`尽可能为您使用的每个`IDisposable`对象添加一个块（例如 Newconnection、Cmd）。该`Using`块更安全，因为如果执行因任何原因离开该块（例如异常），它仍然会为您正确处理该对象。

其次，您应该在命令中使用参数，而不是将日期值直接附加到`strBookingQuery`字符串中。当您像这样自己将值附加到 SQL 字符串中时，您的数据库就会受到 SQL 注入攻击。此外，特别是日期，您也可能会遇到文化差异（例如 MM-dd-yyyy 与 dd-MM-yyyy）。

第三，使用某种集合会更容易，例如`List(Of Integer)`存储从数据库读取的值，而不是存储到数组中。假设行数总是相同的固定大小并不是很好，并且在处理可变长度的列表时使用数组很不方便。收藏品正是为这种东西而制作的。无需跟踪数组中的固定长度和当前索引，使用集合，您可以`Add`在需要添加新项目时简单地调用该方法。

所以，我的建议是更像这样：

```
Public Function GetBookingData(bookingDate As Date) As List(Of Integer)
    Dim data As New List(Of Integer)()
    Using connection As New MySqlConnection()
        connection.ConnectionString = connectionString
        connection.Open()
        Dim query As String = "SELECT * FROM bookings WHERE Date = @BookingDate"
        Using command As New MySqlCommand(query, connection)
            Dim parameter As IDbDataParameter = command.CreateParameter()
            parameter.ParameterName = "@BookingDate"
            parameter.Value = bookingDate
            command.Parameters.Add(parameter)                
            Using reader As DbDataReader = cmd.ExecuteReader()
                Do While reader.Read()
                    data.Add(reader.GetInt16(1))
                Loop
            End Using
        End Using
    End Using
    Return data
End Function 
```

# c - 无法接收UDP数据包？

> ID：14927557
> 
> 赞同：1
> 
> 时间：2013-02-17T23:54:59.223
> 
> 标签：c, udp

我从 main 调用 setup_udp_socket 方法，该方法在 udppport 上设置了一个 UDP 套接字，然后我在这个套接字上使用 select。当我在这个方法上有一些东西要读时，我调用 udp_communication () 但我收到奇怪的输出

[没有收到消息，即 0 字节，但 char 数组的 strlen 给出 1]。UDP 数据包是由我无权访问的另一个 Java 程序发送的。我使用 nc 并测试它工作正常。但我的代码中似乎存在一些我无法弄清楚的问题。

我在等待

侦听器：从 127.0.0.1 和端口号：48555 获取数据包

收到的消息：字节数：0 len：1

退出 udp_communication

```
int setup_udp_socket(char* udpport)
{
        struct addrinfo hints, *servinfo, *p;
        int ret_value;

        memset(&hints, 0, sizeof hints);
        hints.ai_family = AF_INET;
        hints.ai_socktype = SOCK_DGRAM;
        hints.ai_flags = AI_PASSIVE;

        if ((ret_value = getaddrinfo("127.0.0.1", udpport, &hints, &servinfo)) != 0) {
                fprintf(stderr, "getaddrinfo: %s\n", gai_strerror(ret_value));
                exit(FAILED);
        }

        for(p = servinfo; p != NULL; p = p->ai_next) {
                if ((udp_sock = socket(p->ai_family, p->ai_socktype,
                                     p->ai_protocol)) == -1) {
                        perror("udp: socket creation failed");
                        continue;
                }

                if (bind(udp_sock, p->ai_addr, p->ai_addrlen) == -1) {
                        close(udp_sock);
                        perror("udp: bind");
                        continue;
                }
                //listen(udp_sock, 20);

                break;
        }

        if (p == NULL) {
                if (servinfo != NULL)
                    freeaddrinfo(servinfo);
                exit(FAILED);
        }

        freeaddrinfo(servinfo);
        printf("udp: waiting to recvfrom and udpport :%s\n", udpport);

} 
```

//udp_recvbuf 是 1024 字节的 char 数组。

```
void udp_communication() {

        struct sockaddr_storage addr;
        socklen_t addr_len;
        char s[INET6_ADDRSTRLEN];
        int n;
        addr_len = sizeof(addr);
        //udp_sock_flag = fcntl(udp_sock, F_GETFL, 0);
        //fcntl(udp_sock, F_SETFL, udp_sock_flag | O_NONBLOCK);

//       while(1) {

        memset(udp_recvbuf, '\0', BUFFERSIZE);
        printf("I am waiting\n");
        if (n = recvfrom(udp_sock, udp_recvbuf, 1023 , 0, (struct sockaddr *)&addr, &addr_len) == -1) {
                perror("recvfrom");
                exit(1);
        }
         printf("listener: got packet from %s and port number :%d\n ",
        inet_ntop(addr.ss_family,
            get_in_addr((struct sockaddr *)&addr),
            s, sizeof s), ((struct sockaddr_in *)&addr)->sin_port);
          printf("Message received:%s number of bytes : %d len: %d\n", udp_recvbuf, n, strlen(udp_recvbuf));

//      } 

        printf("Exiting udp_communication\n");

        //pthread_exit(NULL);

} 
```

# ruby-on-rails - 为什么此请求规范会间歇性地失败，或者我该如何调试它？

> ID：14927558
> 
> 赞同：3
> 
> 时间：2013-02-17T23:55:00.757
> 
> 标签：ruby-on-rails, capybara, factory-bot, rspec-rails

这是间歇性失败的测试：

```
 context "as a regular_user" do
    before :each do
      @user = FactoryGirl.create(:user, :role => 'regular_user')
      visit new_user_session_path unless current_path == new_user_session_path
      fill_in "Email", :with => @user.email
      fill_in "Password", :with => @user.password
      click_button "Sign In"
    end

    it "removes thing from favorites while on thing index page" do
      @things = FactoryGirl.create_list(:thing, 5)
      @user.set_mark :favorite, @things.first
      @user.reload.favorite_things
      visit things_path unless current_path == things_path
      expect{
        first(:link, "Remove from favorites").click # Sometimes this fails
        @user.reload.favorite_things
      }.to change { @user.favorite_things.count }.by(-1)
      page.should have_content("Sort by")
    end
  end 
```

我正在使用 gem [markable](https://rubygems.org/gems/markable)来提供收藏夹功能。

当我运行规范时，成功/失败似乎没有任何模式`rspec`（它不像一旦失败它总是失败，反之亦然）。当规范运行`guard`（`spork`也正在使用）时可能存在一种模式，如果我开始`guard`并且测试通过，那么它总是会在该实例`guard`运行时通过......同样适用于失败 - 如果我开始`guard`并且它失败，则该实例中的所有后续运行`guard`也将失败。

刚才我跑去`rspec spec/requests/users_spec.rb:148`运行那个规范，但它失败了：

```
1) Users as a regular_user removes thing from favorites while on thing index page
     Failure/Error: click_link "Remove from favorites" # Sometimes this fails
     Capybara::ElementNotFound:
       Unable to find link "Remove from favorites"
     # ./spec/requests/users_spec.rb:155:in `block (4 levels) in <top (required)>'
     # ./spec/requests/users_spec.rb:153:in `block (3 levels) in <top (required)>' 
```

在那之后我又跑了`rspec spec/requests/users_spec.rb:148`一次，它成功了：

```
Finished in 0.83754 seconds
1 example, 0 failures 
```

我尝试`<% @things.each do |thing| %>`在视图文件的部分中添加“asdfasdf” `index.html.erb`，并检查它，`page.should have_content("asdfasdf")`但有时会失败。我尝试`page.should have_selector('.favoritesblock', visible: true)`在块之前添加`expect`（`favoritesblock`存在于`@things`视图中的同一块中），但有时会失败。`<% @things.each do |thing| %>`但是，它永远不会在循环之外找到文本。

我`save_and_open_page`在该行之前添加`first(:link, "Remove from favorites").click # Sometimes this fails`，并且能够生成规范失败的实例。该页面仅包含两件事（我的`FactoryGirl`电话应该是创建 5 个），并且它们都没有“从收藏夹中删除”链接（取决于该事物是否被收藏，它显示“添加到收藏夹”或“从收藏夹中删除” ）。

基于此，我尝试稍微修改规范的前两行，但没有帮助（有时仍然失败）：

```
5.times { FactoryGirl.create(:thing) }
@user.set_mark :favorite, Thing.first 
```

我注意到的是，当它成功时，它确实会首先显示“从收藏夹中删除”链接，但并不总是显示所有 5 件事。

所以，我需要知道为什么这个规范会间歇性地失败，或者我还能做些什么来找出导致问题的原因。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T01:16:59.833

我设置工厂的方式是间歇性 rspec 失败的原因。

该项目有一个布尔字段 ，`active`它要么在站点上显示该事物（如果它是`true`），要么不在站点上显示该事物（如果它是`false`）。

我的工厂很聪明，并将该字段设置为`f.active { [true, false].sample }`. 所以，工厂有时会创造活动的东西，有时会创造不活动的东西。我故意创建我的工厂以这种方式运行，因为我希望默认工厂创建尽可能广泛的现实世界事物选择。我只需要记住，有时需要手动设置某些方面——比如在这种情况下，我只需要创建活动的东西。

解决方法是将我的规范更改为仅创建活动的东西：

```
@things = FactoryGirl.create_list(:thing, 5, :active => true) 
```

# git - 执行 git reset --hard 后本地开发环境上的 Git 推送错误

> ID：14927560
> 
> 赞同：-1
> 
> 时间：2013-02-17T23:55:10.413
> 
> 标签：git, github

今天早些时候，我执行了`git reset --hard 12345abc`将本地副本恢复为特定提交的操作。现在，当我尝试将新更改推送到原始主机时，我收到以下错误：

*注意：上面的“12345abc”是一个示例提交号*

```
error: failed to push some refs to 'git@github.com:example/example.git'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Merge the remote changes (e.g. 'git pull')
hint: before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details. 
```

我怎样才能继续提交我的新更改并将它们推送到原始主机？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T00:19:45.503

```
$ git push -f 
```

将解决您的问题。

注意：除非被其他提交、分支或标签引用，`12345abc`并且其所有子提交都将被垃圾收集（因为不再引用它们，Git 假定它们是无用的）

# php - 让 PHP 的 XMLReader 不会在无效文档中抛出 php 错误

> ID：14927565
> 
> 赞同：6
> 
> 时间：2013-02-17T23:55:28.263
> 
> 标签：php, xml, xml-parsing, xmlreader

我正在编写解析器，并尝试对异常进行良好的错误处理。

以下示例代码：

```
<?php
$xml = <<<XML
<?xml version="1.0"?>
<rootElem>
XML;

$reader = new XMLReader();
$reader->xml($xml, null, LIBXML_NOERROR | LIBXML_NOWARNING);

$reader->read(); 
```

发射：

```
PHP Warning:  XMLReader::read(): An Error Occured while reading in /Users/evert/code/xml/errortest.php on line 11
PHP Stack trace:
PHP   1\. {main}() /Users/evert/code/xml/errortest.php:0
PHP   2\. XMLReader->read() /Users/evert/code/xml/errortest.php:11 
```

增加：

```
libxml_use_internal_errors(true); 
```

没有效果。

我的目标是稍后检查错误（使用`libxml_get_errors()`），然后抛出异常。我觉得唯一的解决方案是使用静音（`@`）运算符，但这似乎是个坏主意。

请注意，当我不传递`LIBXML`常量也不使用`libxml_use_internal_errors`时，我会得到一个不同的错误，例如：

```
PHP Warning:  XMLReader::read(): /Users/evert/code/xml/:2: parser error : Extra content at the end of the document in /Users/evert/code/xml/errortest.php on line 11 
```

这表明底层 libxml 库确实在抑制错误，但在 XMLReader 中无论如何都会引发错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T01:02:38.700

看起来除了使用之外没有其他方法可以抑制警告`@`，因为 php source for`read()`具有以下几行：

```
retval = xmlTextReaderRead(intern->ptr);
if (retval == -1) {
    php_error_docref(NULL TSRMLS_CC, E_WARNING, "An Error Occured while reading");
    RETURN_FALSE;
} else {
    RETURN_BOOL(retval);
} 
```

因此，只有内部的实际解析错误`xmlTextReaderRead()`被`libxml_use_internal_errors(true);`传递给 的 或 选项抑制`XMLReader::xml()`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-14T23:16:52.213

根据我对 XMLReader 的理解，要验证文档，必须对所有文档进行一次完整的遍历。

我正在做的是：

```
// Enable internal libxml errors
libxml_use_internal_errors(true);
$xml = new \XMLReader();
$xsd='myfile.xsd';
$xml->open('myfile.xml');
$xml->setSchema ($xsd);

// Conduct full pass through document. The only reason is to force validation.
while (@$xml->read()) { }; // empty loop

if (count(libxml_get_errors ())==0) {
    echo "provided xml is well formed and xsd-valid";
    // Now you can start processing without @ as document was validated against xsd and is xml-wellformed
}
else 
    echo "provided xml is wrong and/or not xsd-valid. stopping"; 
```

当然，您可以检查空循环内的错误，然后在第一个错误后立即中断。我注意到 XMLReader 在第一次错误之后并没有完全失败——它会继续并带来一系列有用的问题。有时打印发现的所有问题而不是在第一个问题后中断处理可能很有用。

我最关心的是 XMLReader 中存在 isValid 函数的原因：) 我认为这实际上是一种解决方法，但它工作得很好，并且在处理之前验证匹配 95% 的 XMLReader 用例，因为它用于大型 xml 集合处理。

# javascript - 带有 Zen 编码的 CodeMirror 不起作用

> ID：14927569
> 
> 赞同：1
> 
> 时间：2013-02-17T23:55:43.580
> 
> 标签：javascript, codemirror, emmet

我正在尝试让 Zen Coding 为 CodeMirror 工作（对于已经成功使用 CodeMirror 的项目）。在[演示](http://zen-coding.ru/codemirror/)之后，我正在初始化 CodeMirror 实例，如下所示：

```
var myCodeMirror = CodeMirror.fromTextArea(document.getElementById("editarea"), {
    theme: "blackboard",
    lineNumbers : true,
    syntax: 'html',
    onLoad: function (editor) {
        zen_editor.bind(editor);
    }
}); 
```

但是 Zen Coding 功能似乎根本不起作用（点击选项卡似乎没有效果），并且 JavaScript 控制台上没有错误。有没有人有经验，或者可以指点我相关的材料？

文件按以下顺序加载：

```
<script src="codemirror/lib/codemirror.js"></script>
<script src="codemirror/mode/xml/xml.js"></script>
<script src="codemirror/mode/javascript/javascript.js"></script>
<script src="codemirror/mode/css/css.js"></script>
<script src="codemirror/mode/htmlmixed/htmlmixed.js"></script>
<script src="js/zen_codemirror.min.js"></script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T11:40:01.690

尝试使用 Emmet（一个重新命名的 Zen Coding 项目）：[https ://github.com/emmetio/codemirror](https://github.com/emmetio/codemirror)

看起来您正在使用 Zen Coding 插件不支持的较新版本的 CodeMirror。

# google-maps - 使用路径和彩色标记创建静态图像

> ID：14927575
> 
> 赞同：0
> 
> 时间：2013-02-17T23:56:45.187
> 
> 标签：google-maps, google-static-maps

我正在尝试根据 GPS 数据生成事件地图，将路线两侧的两分钟显示为路径，以及三个标记：开始、事件、结束。我得到的只是错误 400，格式错误的 URL。我已经尝试使用 URL 的较小组件进行切割和更改，但它不起作用。

对我的 URL 结构有什么建议吗？我没有正确编码吗？无论如何要获得有关其窒息的部分的反馈？我不应该使用静态地图 API 吗？

> https://maps.googleapis.com/maps/api/staticmap?format=jpg&sensor=false&path=color:green%7Cweight:5%7C-21.3322,148.9388%7C-21.3330,148.9402%7C-21.3302,148.9397%7C- 21.3287,148.9394％7c-21.3273,148.9393％7c-21.3261,148.9392％7c-21.3247,148.9391％7c-21.3239,148.9390％7c-21.36,148.9389％7c-21.3236,148.9389％7c-21.3198,148.9371％7c-21.3186， 148.9364％7C-21.3175,148.9357％7C-21.3162,148.9350％7C-21.3153,148.9347％7C-21.3141,148.9344％7C-21.3128,148.9342％7C-21.3116,148.9341％7C-21.3,148.9341％7C-21.3090,148.9341％ 7C-21.3077,148.9340％7c-21.3064,148.9340％7c-21.3051,148.9339％7c-21.3039,148.9339％7c-21.3026,148.9339％7c-21.3013,148.9340％7c-21.3013,148.9340＆markers =颜色：红色％7clabel：速度%20violation%7C-21.3302,148.9397&markers=color:blue%7Clabel:Support%20Pack%20End%7C-21.3013,148.9340&key=[snip]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T01:11:53.593

`size`URL 中缺少必需的参数

[https://maps.googleapis.com/maps/api/staticmap? **尺寸=400x400** &format=jpg&sensor=false&path=color:green%7Cweight:5%7C-21.3322,148.9388%7C-21.3330,148.9402%7C-21.3302,148.9397%7C-21.3287,148.9394%7C-21.3273,11.326-21.3273,148.93 ，148.9392％7c-21.3247,148.9391％7c-21.3239,148.9390％7c-21.3236,148.9389％7c-21.36,148.9389％7c-21.3198,148.9371％7c-21.3186,148.9364％7c-21.148.9364％7c-21.3175,148.9357％7c-21.3162,148.9350 ％7c-21.3153,148.9347％7c-21.3141,148.9344％7c-21.3128,148.9342％7c-21.3116,148.9341％7c-21.3103,148.9341％7c-21.300,148.9341％7c-21.3077,148.9340％7c-21.3064,148.9340％7c -21.3051,148.9339%7C-21.3039,148.9339%7C-21.3026,148.9339%7C-21.3013,148.9340%7C-21.3013,148.9340&markers=color:red%7Clabel:Speed%20violation%48.97C-21.3302, %7C标签：支持%20Pack%20End%7C-21.3013,148.9340](https://maps.googleapis.com/maps/api/staticmap?size=400x400&format=jpg&sensor=false&path=color%3agreen%7Cweight:5%7C-21.3322,148.9388%7C-21.3330,148.9402%7C-21.3302,148.9397%7C-21.3287,148.9394%7C-21.3273,148.9393%7C-21.3261,148.9392%7C-21.3247,148.9391%7C-21.3239,148.9390%7C-21.3236,148.9389%7C-21.3236,148.9389%7C-21.3198,148.9371%7C-21.3186,148.9364%7C-21.3175,148.9357%7C-21.3162,148.9350%7C-21.3153,148.9347%7C-21.3141,148.9344%7C-21.3128,148.9342%7C-21.3116,148.9341%7C-21.3103,148.9341%7C-21.3090,148.9341%7C-21.3077,148.9340%7C-21.3064,148.9340%7C-21.3051,148.9339%7C-21.3039,148.9339%7C-21.3026,148.9339%7C-21.3013,148.9340%7C-21.3013,148.9340&markers=color%3ared%7Clabel%3aSpeed%20violation%7C-21.3302,148.9397&markers=color%3ablue%7Clabel%3aSupport%20Pack%20End%7C-21.3013,148.9340)

# asp.net-mvc - 控制器动作不会绑定 JSON ViewModel

> ID：14927576
> 
> 赞同：0
> 
> 时间：2013-02-17T23:57:09.810
> 
> 标签：asp.net-mvc, json, asp.net-mvc-3, knockout.js, knockout-2.0

每次我发布到我的 Action 时，my`ViewModel`不为空，但里面的所有值始终为空。

在我拥有的地方`console.log`，我可以看到完美的 JSON 输出到控制台。

有任何想法吗？

行动：

```
public ActionResult Add(MyViewModel model)
{
//stuff
} 
```

JS：

```
<script type="text/javascript">
var model = @Html.Raw(Viewbag.MyJSON);

var viewModelDetails = ko.mapping.fromJS(model);

this.addData = function() {
var data = ko.toJSON(viewModelDetails);
console.log(data);
$.post("/user/add", data, function(result){
//stuff
});
}
</script> 
```

模型

```
public  MyViewModel()
{
Game Game{get;set;}
} 
```

编辑：

哇，我觉得很愚蠢，我有`private set`，所以这就是它没有被束缚的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T06:36:20.830

我以前遇到过这样的问题。我与您分享我所做的解决方案。

**进行如下更改**

```
var data = ko.toJS(viewModelDetails); 
```

**注意：要在没有原生 JSON 序列化程序的旧浏览器（例如 IE 7 或更早版本）上运行，您还必须引用 json2.js 库**

我知道这会很**完美**。如果它**解决了您的问题**，请将其标记为**答案**

如果**对您有用，请**点击**uplink**

**代码中的问题是什么：-**

```
var data = ko.toJSON(viewModelDetails); 
```

您需要再次将**数据**解析为 json ，然后才能使用它，否则会出错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T00:23:07.320

试试这个：

```
$.post("/user/add", data, function(result){
//stuff
}, dataType: json); 
```

我过去发生的事情是默认数据类型不是 Json，所以它没有正确传递它。可能不是这里发生的事情......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T00:32:06.307

您必须将数据转换为 json`JSON.stringify(result)`

```
<script type="text/javascript">
var model = @Html.Raw(Viewbag.MyJSON);

var viewModelDetails = ko.mapping.fromJS(model);

this.addData = function() {
var data = ko.toJSON(viewModelDetails);
console.log(data);
$.post("/user/add", JSON.stringify(data), function(result){
//stuff
}, 
dataType: json,
traditional: true

);
}
</script> 
```

# java - 操作后屏幕拒绝刷新

> ID：14927579
> 
> 赞同：0
> 
> 时间：2013-02-17T23:57:32.330
> 
> 标签：java, android, eclipse, bluetooth

我是java新手，目前正在做一个项目。我正在尝试熟悉蓝牙。到目前为止，我已经能够从应用程序中打开和关闭蓝牙。我遇到的问题是执行操作后屏幕不会刷新。例如，当我打开蓝牙时，它会亮起，但文本视图中的文本不会更新，直到我将手机翻过来。当我断开连接时也是如此。这是我的代码

```
package com.example.bluetooth;

 import android.os.Bundle;
 import android.app.Activity;
 import android.bluetooth.BluetoothAdapter;
 import android.view.Menu;
 import android.view.View;
 import android.widget.Button;
 import android.widget.TextView;

 public class MainActivity extends Activity {

BluetoothAdapter btAdapter = BluetoothAdapter.getDefaultAdapter();
Button button;
TextView update;
CharSequence enabled = "Bluetooth Enabled";
CharSequence disabled = "Bluetooth disabled";
CharSequence connect = "Connect";
CharSequence disconnect = "Disconnect";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    setUp();
    action();
    }

private void action() {
    if (button.getText() == connect) {
        button.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                btAdapter.enable();

            }
        });
    }

    if (button.getText() == disconnect) {
        button.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                btAdapter.disable();

            }
        });
    }

}

private void setUp() {
    button = (Button) findViewById(R.id.button1);
    update = (TextView) findViewById(R.id.textView1);

    button = (Button) findViewById(R.id.button1);
    if (btAdapter.isEnabled()) {

        update.setText("Bluetooth is enabled");
        button.setText(disconnect);

    }

    else {

        update.setText("Bluetooth is disabled");
        button.setText(connect);

    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:06:22.963

我看错了两件事：

1.  您只调用一次负责更新 TextView ( `setIp()`) 的方法，因为`onCreate()`每次创建 Activity 时只调用一次。由于打开[/关闭适配器是在 UI Thread 之外完成的](http://developer.android.com/reference/android/bluetooth/BluetoothAdapter.html#enable%28%29)，因此您必须制作`BroadcastReceiver`并监听`BluetoothAdapter.ACTION_STATE_CHANGED`然后相应地更新。
2.  您正在将 CharSequences 与`==`. 您应该改为使用字符串，然后使用`.equals()`，因为这将确保进行深度比较。唯一需要更改的是类型声明是`.toString()`在`getText()`. 例如`button.getText().toString()`

编辑：一个简单（但混乱）的解决方案可以动态地制作接收器并注册它。现在，请记住，您只需要调用`setUp()`一次，就像以前一样。类似下面的代码可能会起作用。

```
public class MainActivity extends Activity {

  BluetoothAdapter btAdapter;
  Button button;
  TextView update;
  String enabled = "Bluetooth Enabled";
  String disabled = "Bluetooth disabled";
  String connect = "Connect";
  String disconnect = "Disconnect";
  BroadcastReceiver receiver;

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    btAdapter = BluetoothAdapter.getDefaultAdapter();
    setUp();
    action();
  }

  @Override
  public void onPause()
  {
    try{
      unregisterReceiver (receiver);
    }
    catch (NullPointerException e)
    {
      e.printStackTrace();
    }
    catch (IllegalStateException ie)
    {
      ie.printStackTrace();
    }
    super.onPause();
  }

  private void action() {
  button.setOnClickListener(new View.OnClickListener (){

    @Override
    public void onClick(View v) {
        if (btAdapter.isEnabled())
            btAdapter.disable();
        else
            btAdapter.enable();

    }

  });

 }

  private void setButtonText ()
  {
    if (btAdapter.isEnabled()) {       
      update.setText("Bluetooth is enabled");
      button.setText(disconnect);
    }

    else {

      update.setText("Bluetooth is disabled");
      button.setText(connect);
    }
  }
  private void setUp() {
    button = (Button) findViewById(R.id.button1);
    update = (TextView) findViewById(R.id.textView1);
    setButtonText();

    receiver = new BroadcastReceiver(){

      @Override
      public void onReceive(Context context, Intent intent) {
        setButtonText();

      }

    };

    IntentFilter filter = new IntentFilter (BluetoothAdapter.ACTION_STATE_CHANGED);
    registerReceiver (receiver, filter);

  }
} 
```

# ruby-on-rails - RVM，未安装 Rails？

> ID：14927580
> 
> 赞同：1
> 
> 时间：2013-02-17T23:57:35.797
> 
> 标签：ruby-on-rails, rvm

这类似于[RVM 查找系统 gem 的可执行文件](https://stackoverflow.com/questions/6380373/rvm-finding-system-gems-executables)。

每次我尝试做 rails 时，我都会返回 Rails 当前未安装 bla bla。如果我随后指定 rvm --default 1.9.3，它就会起作用。但是，如果我离开该应用程序并重新使用它，同样的问题。这是我的PATH文件..

```
# export PATH="/usr/local/bin:/usr/local/sbin:~/bin:$PATH"

  PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting

  [[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" # Load RVM into a shell session *as a function* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T01:26:52.443

您需要使用登录 shell，这里是 Ubunutu 的示例：[https ://rvm.io/integration/gnome-terminal/](https://rvm.io/integration/gnome-terminal/)

# python - 使用 wx.TextCtrl 并在 wxpython 中单击按钮后显示数据的简单示例 - wx 的新手

> ID：14927584
> 
> 赞同：12
> 
> 时间：2013-02-17T23:58:04.593
> 
> 标签：python, wxpython

我正在学习 python 并尝试使用 wxpython 进行 UI 开发（也没有 UI exp）。我已经能够创建一个带有面板、按钮和文本输入框的框架。我希望能够在文本框中输入文本，并在单击按钮后让程序对输入框中的文本进行处理。我可以得到一些关于如何做到这一点的指导吗？例如，假设我想在面板上显示输入到 wx.TextCtrl 控件中的文本。我该怎么做？

```
import wx
class ExamplePanel(wx.Panel):
    def __init__(self, parent):
        wx.Panel.__init__(self, parent)
        self.quote = wx.StaticText(self, label="Your quote :", pos=(20, 30))

        # A button
        self.button =wx.Button(self, label="Save", pos=(200, 325))

    self.lblname = wx.StaticText(self, label="Your name :", pos=(20,60))
    self.editname = wx.TextCtrl(self, value="Enter here your name", pos=(150, 60), size=(140,-1))

app = wx.App(False)
frame = wx.Frame(None)
panel = ExamplePanel(frame)
frame.Show()
app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-18T09:21:34.063

要进行任何 GUI 交互，您必须将事件绑定到小部件。您基本上告诉 wxPython 应用程序在发生某些事件（按下按钮）时应该调用哪个方法（事件处理程序）。

我也会考虑学习 sizer 并将它们用于您的布局。我稍微改变了你的例子。

```
import wx
class ExampleFrame(wx.Frame):
    def __init__(self, parent):
        wx.Frame.__init__(self, parent)

        self.panel = wx.Panel(self)     
        self.quote = wx.StaticText(self.panel, label="Your quote:")
        self.result = wx.StaticText(self.panel, label="")
        self.result.SetForegroundColour(wx.RED)
        self.button = wx.Button(self.panel, label="Save")
        self.lblname = wx.StaticText(self.panel, label="Your name:")
        self.editname = wx.TextCtrl(self.panel, size=(140, -1))

        # Set sizer for the frame, so we can change frame size to match widgets
        self.windowSizer = wx.BoxSizer()
        self.windowSizer.Add(self.panel, 1, wx.ALL | wx.EXPAND)        

        # Set sizer for the panel content
        self.sizer = wx.GridBagSizer(5, 5)
        self.sizer.Add(self.quote, (0, 0))
        self.sizer.Add(self.result, (0, 1))
        self.sizer.Add(self.lblname, (1, 0))
        self.sizer.Add(self.editname, (1, 1))
        self.sizer.Add(self.button, (2, 0), (1, 2), flag=wx.EXPAND)

        # Set simple sizer for a nice border
        self.border = wx.BoxSizer()
        self.border.Add(self.sizer, 1, wx.ALL | wx.EXPAND, 5)

        # Use the sizers
        self.panel.SetSizerAndFit(self.border)  
        self.SetSizerAndFit(self.windowSizer)  

        # Set event handlers
        self.button.Bind(wx.EVT_BUTTON, self.OnButton)

    def OnButton(self, e):
        self.result.SetLabel(self.editname.GetValue())

app = wx.App(False)
frame = ExampleFrame(None)
frame.Show()
app.MainLoop() 
```

# c# - Math.Atan2 产生奇怪的结果？

> ID：14927585
> 
> 赞同：5
> 
> 时间：2013-02-17T23:58:32.243
> 
> 标签：c#, math, .net-4.0

首先，我的数学不强！但我正在计算一个点从原点 (0, 0) 到 (-1, -1) 的角度。

这个角度是 225° 或 5π/4。

*   5π/4 = 3.9269908169872415480783042290994
*   Math.Atan2(-1, -1) = -2.3561944901923448

也许我的理解`Math.Atan2`是不正确的，但我认为它是为了返回给定圆上两个点的角度度数，其原点为 (0, 0)。我假设这里发生的是结果`Atan2`是“翻转”的，因为它位于 X 轴的负侧……有人可以确认并提供正确的方法吗？

这是我的测试，失败了：

```
Assert.AreEqual((5 * Math.PI) / 4, Math.Atan2(-1, -1)); 
```

这是我的`PointD`班级，其中包含 X 点和 Y 点：

```
public double ToRadians()
{
    double radians = Math.Atan2(this.Y, this.X);

    return radians;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-18T00:01:16.813

你的假设是正确的。 `Atan2`给出 -pi 到 +pi 范围内的结果. ^* 如果您想要一个 0 到 2pi 范围内的数字，如果结果小于 0，只需添加 2pi。

* * *

**注意：**断言这样的浮点值相等通常不是一个好主意......

* * *

[* 为了将来参考，此类细节通常在文档中明确给出。例如：http: [//msdn.microsoft.com/en-us/library/system.math.atan2.aspx](http://msdn.microsoft.com/en-us/library/system.math.atan2.aspx)。]

# c - 如何停止从c中的二进制文件读取

> ID：14927590
> 
> 赞同：1
> 
> 时间：2013-02-17T23:59:08.827
> 
> 标签：c

我正在尝试使用原始 I/O 函数从文件中读取数据并将数据输出到另一个文件，但是，我的代码似乎无法工作，我发现 read() 无法终止。但是，我不知道在这种情况下如何终止循环，我的代码是这样的：

```
int main(){
   int infile; //input file
   int outfile; //output file

   infile = open("1.txt", O_RDONLY, S_IRUSR);
   if(infile == -1){
      return 1; //error
   }
   outfile = open("2.txt", O_CREAT | ORDWR, S_IRUSR | S_IWUSR);
   if(outfile == -1){
      return 1; //error
   }

   int intch; //character raed from input file
   unsigned char ch; //char to a byte

   while(intch != EOF){ //it seems that the loop cannot terminate, my opinion
      read(infile, &intch, sizeof(unsigned char));
      ch = (unsigned char) intch; //Convert
      write(outfile, &ch, sizeof(unsigned char));
  }
   close(infile);
   close(outfile);

   return 0; //success
} 
```

有人可以帮我解决这个问题吗？十分感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:04:13.077

`read``0`如果遇到文件结尾将返回：

```
while(read(infile, &intch, sizeof(unsigned char) > 0){ 
    ch = (unsigned char) intch; //Convert
    write(outfile, &ch, sizeof(unsigned char));
} 
```

请注意，负值表示错误，因此您可能希望保存`read`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T00:09:00.637

intch 是未初始化的 4（或有时 8）字节。您仅将 1 个字节加载到 intch 中，而其余字节未初始化。然后将 EOF 与尚未完全初始化的所有 intch 进行比较。

尝试将 intch 声明为 char。

# git - git 1.8 客户端和旧版 git 服务器之间的兼容性问题

> ID：14927591
> 
> 赞同：17
> 
> 时间：2013-02-17T23:59:24.660
> 
> 标签：git, version-control, backwards-compatibility

我正在使用远程 git 托管服务 (Svnrepository.com)。在使用 git 1.7.x 作为客户端时，我能够成功访问 git 存储库，但是一旦我将客户端升级到 git 1.8.x，我就不再能够推送：[推送挂起](https://stackoverflow.com/q/14488077/781723)。托管服务的支持声称这是因为他们使用的是不支持 1.8 版的旧 git 服务器。

1.  如何使用 git 1.8 作为客户端，使用较旧的 git 服务器？
2.  有解决方法吗？
3.  有谁知道确切的不兼容是什么？
4.  支持人员的声明听起来是否合理？出于某种原因，我认为 git 具有出色的向后/向前兼容性，没有理由担心升级会破坏 git
5.  在 1.7->1.8 转换中引入了一些已知的不兼容性会导致这种情况吗？

根据要求，这里有一个带有`GIT_TRACE=1`. 看起来它在运行时挂起`git-http-push`：

```
$ GIT_TRACE=1 git push -v
trace: built-in: git 'push' '-v'
Pushing to https://secure2.svnrepository.com/redacted/redacted/
trace: run_command: 'git-remote-https' 'origin' 'https://secure2.svnrepository.com/redacted/redacted/'
trace: run_command: 'http-push' '--helper-status' '--verbose' 'https://secure2.svnrepository.com/redacted/redacted/' 'refs/heads/master:refs/heads/master'
trace: exec: 'git' 'http-push' '--helper-status' '--verbose' 'https://secure2.svnrepository.com/redacted/redacted/' 'refs/heads/master:refs/heads/master'
trace: exec: 'git-http-push' '--helper-status' '--verbose' 'https://secure2.svnrepository.com/redacted/redacted/' 'refs/heads/master:refs/heads/master'
trace: run_command: 'git-http-push' '--helper-status' '--verbose' 'https://secure2.svnrepository.com/redacted/redacted/' 'refs/heads/master:refs/heads/master' 
```

它在最后一行输出之后挂起。（如果您愿意，您还可以[查看](https://gist.github.com/anonymous/5783653)我设置了`GIT_TRACE=1`和的跟踪`GIT_CURL_VERBOSE=1`。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T15:59:29.800

想要使用更新版本的 git 运行是可以理解的，但是如果您选择的主机没有运行当前版本，为什么不切换主机呢？仅从名称来看，Svnrepository.com 听起来并不像他们专注于 Git 托管。如果托管服务不是您可以更改的，那么在您的路径之外的某个地方安装 git1.7 和通常的 1.8 怎么样。然后您可以将 1.7 版本链接到类似的东西`oldgit`，当您需要使用 Svnrepostiory.com 时，您的命令将类似于`oldgit add`, `oldgit commit`, `oldgit push`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T07:03:57.707

Svnrepository.com 页面显示“标准功能：Git over SSH”，您似乎正在通过 http: 进行访问，这可能适合只读访问。如果你查看文本文件 .git/config 你应该看到一个部分 [remote "origin"] 并且'url'值可以设置为格式 host:/path/on/remote/machine 这意味着 SSH 连接吉特

# php - empty() 将值视为空

> ID：14927598
> 
> 赞同：0
> 
> 时间：2013-02-18T00:00:13.053
> 
> 标签：php, mysqli

我正在尝试遵循对答案的参考，但不确定应该如何编写：

> empty() 将 '0' 视为空，因此在 $p_student = empty($_POST["student"])?'':$_POST["student"]; 当 $_POST["student"] 为 '0' 时，$p_student 为真...因此，以下情况始终为 'default'，因此如果为 empty() 并且您应该将 $p_student 设置为 '0'应该没问题...我认为...（当然，这适用于 $p_student 和 $p_question...）

我已经设置了一个案例语句来匹配上面的例子，但我的问题是应该如何根据上面的例子编写 $p_student ？

我的尝试：

```
// Check whether a specific student was selected
    $p_student = empty($_POST["student"])?'0':$_POST["student"];

    switch($p_student){
    case -1:
        //dont' add where filters
        break;
    default:
        $where[] = 'sa.StudentId = ?';
        $parameters[] .= $_POST["student"];
        $parameterTypes .= 'i';
    } 
```

更新：

我试图做的是如果`All`选项，然后执行案例-1，否则执行默认值。我做错了什么吗，因为这就是为什么我在下拉值上提出这个问题：

**学生：**

```
<select name="student" id="studentsDrop">
<option value="-1">All</option>
<option value="39">Luke Mcfadzen</option>
<option value="40">Chris Tucker</option>
</select> 
```

**问题：**

```
<select name="question" id="questionsDrop">
<option value="-1">All</option>
<option value="72">1</option>
<option value="73">2</option>
</select> 
```

**动态 where 子句是我正在尝试的，这取决于用户是选择所有学生还是单个学生以及所有问题或单个问题。如果个人则使用 where 子句查找学生，并且问题相同，如果所有学生则不需要 where 条件学生，因为我们不是在寻找特定的学生，所以这对问题的工作方式相同。该查询具有强制性的 WHERE 条件检查`q.SessionId = ?`**

我收到错误说明：

```
$selectedstudentanswerqry = "
    SELECT
    sa.StudentId, StudentAlias, StudentForename, ...
    FROM Student st
    ...
    ";

    // Initially empty
    $where[] = "q.SessionId = ?";
    $parameters[] = $_POST["session"];
    $parameterTypes = 'i';

    //check if POST is empty

    // Check whether a specific student was selected
//LINE 345 ERROR
$student_id = (isset($_POST['student'])) ? $mysqli->real_escape_string(trim($_POST['student'])) : null ;

if (is_numeric($student_id)){ //If student ID is a numeric value
  $where[] = "sa.StudentId = ?" ;
  $parameters[] = ((int)$student_id == -1) ? "sa.StudentId" : $student_id  ;
  $parameterTypes .= "i" ;
}

    // Check whether a specific question was selected

$question_id = (isset($_POST['question'])) ? $mysqli->real_escape_string(trim($_POST['question'])) : null ;

if (is_numeric($question_id)){ //If student ID is a numeric value
  $where[] = "q.QuestionId = ?" ;
  $parameters[] = ((int)$question_id == -1) ? "q.QuestionId" : $question_id  ;
  $parameterTypes .= "i" ;
}

    // If we added to $where in any of the conditionals, we need a WHERE clause in
    // our query
    if(!empty($where)) {
        $selectedstudentanswerqry .= ' WHERE ' . implode(' AND ', $where);
        global $mysqli;
        $selectedstudentanswerstmt=$mysqli->prepare($selectedstudentanswerqry);
        // You only need to call bind_param once

        if (count($where) == 1) {
        $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0]);
    }
    else if (count($where) == 2) {
        $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0], $parameters[1]);
    }
    else if (count($where) == 3) {
        $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0], $parameters[1], $parameters[2]);
    }

    }

    $selectedstudentanswerqry .= "
      GROUP BY sa.StudentId, q.QuestionId
      ORDER BY StudentAlias, q.SessionId, QuestionNo
    ";

// get result and assign variables (prefix with db)
$selectedstudentanswerstmt->execute(); 
$selectedstudentanswerstmt->bind_result(...);   

$selectedstudentanswerstmt->store_result();
$selectedstudentanswernum = $selectedstudentanswerstmt->num_rows(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:06:06.330

```
$p_student = -1;
if(isset($_POST["student"]) && filter_var($_POST["student"], FILTER_VALIDATE_INT) !== FALSE && trim($_POST["student"]) >= 0 ) {
    $p_student = $_POST["student"];
}

.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T00:10:15.270

如果您认为 $_POST['student'] 有时可能是：

*   0 作为整数
*   "" 或 "0" 作为字符串
*   一个空数组

不使用`empty() ;`

检查这个`(Updated)`：

```
$student_id = (isset($_POST['student'])) ? mysqli_real_escape_string($mysqli, trim($_POST['student'])) : null ;

if (is_numeric($student_id)){ //If student ID is a numeric value
  $where[] = "sa.StudentId = ?" ;
  $parameters[] = ((int)$student_id == -1) ? "sa.Student_id" : $student_id  ;
  $parameterTypes .= "i" ;
} 
```

# matlab - Matlab mex 文件编译错误——“SSE2 指令集未启用”

> ID：14927601
> 
> 赞同：0
> 
> 时间：2013-02-18T00:00:19.847
> 
> 标签：matlab, gcc, mex

在 Matlab 中编译 mex 文件的工具箱时，我收到以下错误：

```
In file included from /home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:9:0,
                 from /home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:9:
/usr/lib/gcc/i686-linux-gnu/4.6/include/emmintrin.h:32:3: error: #error "SSE2 instruction set not enabled"
In file included from /home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:9:0:
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:15:1: error: ‘__m128’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:16:1: error: ‘__m128’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:17:1: error: ‘__m128i’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:18:1: error: ‘__m128’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:19:1: error: ‘__m128’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:20:1: error: ‘__m128’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:21:1: error: ‘__m128’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:22:1: error: ‘__m128’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:23:1: error: ‘__m128’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:26:1: error: ‘__m128i’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:27:1: error: ‘__m128’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:28:1: error: ‘__m128’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:30:1: error: ‘__m128’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:32:1: error: ‘__m128’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:33:1: error: ‘__m128’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:34:1: error: ‘__m128’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:35:1: error: ‘__m128’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:36:1: error: ‘__m128’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:37:1: error: ‘__m128’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:38:1: error: ‘__m128’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:39:1: error: ‘__m128’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:40:1: error: ‘__m128’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:41:1: error: ‘__m128’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:42:1: error: ‘__m128’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:45:1: error: ‘__m128’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:46:1: error: ‘__m128i’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:47:1: error: ‘__m128’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:48:1: error: ‘__m128’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:49:1: error: ‘__m128’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:52:1: error: ‘__m128’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:53:1: error: ‘__m128i’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:56:1: error: ‘__m128’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/sse.hpp:57:1: error: ‘__m128i’ does not name a type
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp: In function ‘void convBox(float*, float*, int, int, int, int, int)’:
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:35:67: error: ‘LDu’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:35:68: error: ‘INC’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:36:60: error: ‘LD’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:36:61: error: ‘MUL’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:36:75: error: ‘LDu’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:36:76: error: ‘SUB’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:36:77: error: ‘MUL’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:36:77: error: declaration of ‘&lt;typeprefixerror>MUL’
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:36:61: error: conflicts with previous declaration ‘&lt;typeprefixerror>MUL’
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:36:78: error: ‘STR’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:45:64: error: ‘LDu’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:45:76: error: ‘SUB’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:45:77: error: ‘MUL’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:45:78: error: ‘DEC’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp: In function ‘void conv11Y(float*, float*, int, int, int)’:
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:61:51: error: ‘LDu’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:61:51: error: ‘ADD’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:61:74: error: ‘_mm_shuffle_ps’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:61:75: error: ‘STR’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:67:37: error: ‘LDu’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:67:37: error: ‘ADD’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:67:45: error: ‘STR’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp: In function ‘void conv11(float*, float*, int, int, int, int, int)’:
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:80:61: error: ‘LDu’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:80:73: error: ‘ADD’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:80:74: error: ‘MUL’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:80:76: error: ‘STR’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp: In function ‘void convTri(float*, float*, int, int, int, int, int)’:
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:112:54: error: ‘LDu’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:112:55: error: ‘STR’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:112:56: error: ‘STR’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:112:56: error: declaration of ‘&lt;typeprefixerror>STR’
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:112:55: error: conflicts with previous declaration ‘&lt;typeprefixerror>STR’
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:113:75: error: ‘LDu’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:113:76: error: ‘INC’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:113:77: error: ‘INC’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:113:77: error: declaration of ‘&lt;typeprefixerror>INC’
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:113:76: error: conflicts with previous declaration ‘&lt;typeprefixerror>INC’
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:114:61: error: ‘LD’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:114:62: error: ‘MUL’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:114:72: error: ‘SUB’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:114:74: error: ‘MUL’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:114:74: error: declaration of ‘&lt;typeprefixerror>MUL’
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:114:62: error: conflicts with previous declaration ‘&lt;typeprefixerror>MUL’
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:114:75: error: ‘STR’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:115:36: error: ‘STR’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:126:9: error: ‘__m128’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:126:16: error: expected ‘;’ before ‘del’
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:127:37: error: ‘del’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:127:40: error: ‘INC’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:127:42: error: ‘MUL’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:127:43: error: ‘INC’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:127:43: error: declaration of ‘&lt;typeprefixerror>INC’
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:127:40: error: conflicts with previous declaration ‘&lt;typeprefixerror>INC’
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp: In function ‘void convTri1Y(float*, float*, int, float, int)’:
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:143:51: error: ‘LDu’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:143:51: error: ‘MUL’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:143:51: error: ‘ADD’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:143:51: error: ‘ADD’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:143:51: error: declaration of ‘&lt;typeprefixerror>ADD’
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:143:51: error: conflicts with previous declaration ‘&lt;typeprefixerror>ADD’
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:143:70: error: ‘_mm_shuffle_ps’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:143:71: error: ‘STR’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:149:35: error: ‘LDu’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:149:35: error: ‘MUL’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:149:35: error: ‘ADD’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:149:35: error: ‘ADD’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:149:35: error: declaration of ‘&lt;typeprefixerror>ADD’
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:149:35: error: conflicts with previous declaration ‘&lt;typeprefixerror>ADD’
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:149:42: error: ‘STR’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp: In function ‘void convTri1(float*, float*, int, int, int, float, int)’:
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:163:41: error: ‘LDu’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:163:59: error: ‘MUL’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:163:60: error: ‘ADD’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:163:72: error: ‘ADD’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:163:72: error: declaration of ‘&lt;typeprefixerror>ADD’
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:163:60: error: conflicts with previous declaration ‘&lt;typeprefixerror>ADD’
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:163:73: error: ‘MUL’ was not declared in this scope
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:163:73: error: declaration of ‘&lt;typeprefixerror>MUL’
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:163:59: error: conflicts with previous declaration ‘&lt;typeprefixerror>MUL’
/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp:163:74: error: ‘STR’ was not declared in this scope

    mex: compile of ' "/home/josh/Desktop/Project/code/toolbox/channels/private/convConst.cpp"' failed. 
```

是什么导致了这个错误，我该如何解决？

我正在使用 Matlab 7.10.0 R2010a 和 gcc 版本 4.6.3-1ubuntu5 运行 Ubuntu 12.04

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-11T12:07:58.837

Cabaf 的回答没有按预期工作。但是让我的工作很有帮助。

这对我有用：

> mex 'CXXFLAGS=-msse2 -msse' 文件名.cpp

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T04:38:16.550

尝试这个：

```
 edit toolboxCompile.m file and replace "opts = {'-output'}" with
   opts = {'CXXFLAGS=-msse2 -msse' '-output'}; 
```

# java - Play Framework 2 / 冗余对象验证

> ID：14927603
> 
> 赞同：1
> 
> 时间：2013-02-18T00:00:23.453
> 
> 标签：java, scala, validation, playframework-2.0

假设一个`Car`模型对象（as `case class`），是不可变的并使用构建器模式创建。（Joshua Bloch 的建造者模式）。

它的`build`方法调用一个`CarValidator`对象以允许创建或不创建有关的`Car`. 否则，它会抛出一个精确的`IllegalStateException`意外字段。

因此，没有人可以在运行时随时创建陈旧或无效`Car`的文件，太棒了！

假设现在要创建一个 Web 表单`Car`。Play 的控制器将包含此表单映射：

```
val carForm = Form(               //this is a conceptual sample
    mapping(
      "brand" -> nonEmptyText,
      "description" -> nonEmptyText,
      "maxSpeed" -> number
      "complexElement" -> number.verifying(........) //redundant validation here
    )(Car.apply)(Car.unapply)
  ) 
```

在此示例中，有一些基本字段，但想象更复杂的字段需要像`complexeElement`这里这样的复杂业务验证。

我真的有一种感觉，我很容易打破 DRY（不要重复自己）。

事实上，无论表单验证会带来什么，这将由我`Car`的构建器的验证器提供，因为模型验证是最重要的验证位置，不应该依赖于其他任何东西。

我想象一个解决方案，其中一个`Helper`类靠近我`Controller`处理我的构建器使用的相同验证器对象。但是，它迫使我获取所有验证方法`public`，以便在我的 Web 表单的任何验证步骤中独立调用（如上面的代码片段）。

在避免破坏 DRY 的同时保持此构建器原则的好做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T00:35:48.463

如果要保留构建器模式，则不应`Form`创建实例。该表格应确保输入的信息类型正确。表单无法创建最终`Car`结果，因为它不知道生成规则`Car`，而构建器知道。

所以我会说你让表单将东西放入中间对象（元组或`PossibleCar`案例类）并`Car`使用该对象构建你的（使用构建器）。

还有另一条路线可用，但这意味着您必须创建（可能很复杂）结构，让您适应不同类型的验证。然后，构建器和表单都可以使用这些验证（在适配器的帮助下）来创建有效的汽车。我对您所处的情况了解得不够多，无法就采取哪条路线向您提供建议。

# java - 在集群环境中生成范围（0-100k）内的随机数

> ID：14927608
> 
> 赞同：2
> 
> 时间：2013-02-18T00:01:12.630
> 
> 标签：java, mongodb, random, parallel-processing, cluster-computing

我必须在集群环境（许多基于 Java 的无状态应用服务器 + Mongodb）中生成范围（0-100.000）内的随机数 - 所以每个用户请求都会获得一些唯一的数字，并将在接下来的几个请求中维护它。

据我了解，我有两个选择： 1\. 在 mongo 中保留一些数字并 incrementAndGet 它 - 但它不是原子的 - 不好的选择。2\. 使用 Redis - 它是原子的并且支持计数器。3\. 有什么想法吗？使用 UUID 并为其设置范围是否安全？4\. 榛树？

还有别的吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T04:16:15.447

我将利用现有的 MongoDB 基础设施并使用 MongoDB findAndModify 命令来执行原子增量和获取操作。

对于 shell，命令看起来像。

```
var result = db.ids.findAndModify( {
                           query: { _id: "counter" },
                           sort: { rating: 1 },
                           new : true,
                           update: { $inc: { counter: 1 } },
                           upsert : true
                         } ); 
```

'new : true' 在更新后返回文档。如果文档丢失，Upsert 会创建该文档。

[10gen 支持的驱动程序](http://api.mongodb.org/java/current/com/mongodb/DBCollection.html#findAndModify%28com.mongodb.DBObject,%20com.mongodb.DBObject,%20com.mongodb.DBObject,%20boolean,%20com.mongodb.DBObject,%20boolean,%20boolean%29)和异步[驱动程序](http://www.allanbank.com/mongodb-async-driver/apidocs/?com/allanbank/mongodb/builder/FindAndModify.html)都包含用于查找和修改命令的辅助方法/构建器。

# java - 使用 Wicket 表单时，我应该如何更好地处理 Wicket 模型的加载？

> ID：14927612
> 
> 赞同：0
> 
> 时间：2013-02-18T00:01:30.080
> 
> 标签：java, wicket, wicket-1.6

我正在使用 Apache Wicket 编写表单。相同的页面/类用于向数据库添加新项目并编辑数据库中的现有记录。当然，由于页面构造函数只被调用一次，所以模型总是设置为页面上最初加载的任何记录，或者如果我们不编辑现有记录，则为新记录。

我找到了许多动态加载数据的方法，但它们看起来很冗长而且有点笨拙。我怀疑有处理这种情况的最佳实践。

作为参考，这里是一些编辑过的代码：

```
public class JobManagement extends WebPage {

private static final long serialVersionUID = 1L;
private long jobId = 0;

protected void setJobId(long id) {
    this.jobId = id;
}

protected long getJobId() {
    return jobId;
}

public JobManagement() {
    LoadableDetachableModel<Job> jobModel = new LoadableDetachableModel<Job>() {

        private static final long serialVersionUID = 1L;

        @Override
        protected Job load() {
            Job job = (Job) EntityFactory.getInstance().getBean("job");

            // if we're editing an existing job, load the object
            if (jobId >= 1) {
                job.load(jobId);
            }

            return job;
        }

    };

    add(new FeedbackPanel("feedbackPanel"));

    Form<Job> jobForm = new Form<Job>("jobForm") {

        private static final long serialVersionUID = 1L;

        @Override
        public void onSubmit() {
            // Handles the form submit...

        }

    };

    add(jobForm);

    jobForm.setModel(new CompoundPropertyModel<Job>(jobModel));
    // SNIP ... All my form fields go here!
    jobForm.add(new Button("submit"));

} 
```

}

我正在使用 LoadableDetachableModel，但我并不完全清楚如何最好地处理在呈现页面时动态加载它。我试图加载一个模型的新实例，覆盖返回我的 LoadableDetachableModel 的 getObject() 类，但是对此感觉非常错误。任何输入将不胜感激。我一直试图通过专门的在线文档来了解这个框架，所以请原谅我明显缺乏熟悉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:47:14.817

为了回答我自己的问题，我遇到的问题是绑定到表单的模型似乎在我每次返回页面时都会持续存在。这让我相信问题在于我如何管理模型，但问题实际上与我如何链接到页面有关。

上面的页面被链接到如下：

```
Link<String> link = new BookmarkablePageLink<String>("addLink", MyAddClass.class); 
```

虽然在某些情况下这是一种可接受的方法，但在这种特殊情况下它不是正确的方法。应该发生的是这样的：

```
Link<String> link = new Link<String>("addLink") {
    public void onClick() {
        setResponsePage(new MyAddClass());
    }
} 
```

当以这种方式动态处理链接时，我的应用程序将按预期运行。感谢所有参与帮助我发现链接的基本问题的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T19:28:23.767

虽然链接方法（以前的答案）可能会带来问题，并且通常取决于您实现链接的方式，但在这种情况下，实际问题是用于加载域对象实例的“EntityFactory”。在这种情况下，它提供缓存数据而不是实例化新实例。

总而言之，当您再次浏览表单时，表单的模型对象似乎没有重置的情况下要评估的事情：

1 - 您用于访问页面的链接策略

2 - 您用于加载域对象并将其绑定到表单上的模型的方法

# batch-file - 使用 Dos 命令复制文件并在文件名中保留日期

> ID：14927614
> 
> 赞同：0
> 
> 时间：2013-02-18T00:01:48.900
> 
> 标签：batch-file, copy, cmd

我在尝试仅使用 dos 命令复制和重命名文件时遇到问题。我有一个格式的文件，`myfile20130218`想复制并重命名为`some_other_file_20130218`.

我知道我可以使用`copy source dest`，但我在如何隔离和保存日期方面遇到了麻烦。我不能保证他的日期是今天的日期，所以排除了，源文件将始终是同名的。

我可以运行一系列命令或批处理脚本，但我目前遇到的问题是在我找到需要复制的匹配项之后，使用`myfile????????`，我现在如何获取这些文件名来提取日期离开他们？

编辑：为澄清起见，我将查看已知目录中的文件，如上所述，我将知道文件名的格式，并且只会检查它的特定目录。检查目录的过程是一个 ConnectDirect 文件观察程序，因此当找到匹配的文件时，`myfile20130218`我可以触发一些命令，但不知道如何检查目录并获取当前文件的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T00:18:38.350

像这样的东西应该工作：

`%oldname:~-8%`提取最后 8 个字符`%oldname%`，然后将其附加到新文件名。

**更新：**如果您可以使用外部程序识别文件，然后使用文件名调用批处理脚本

```
copyfile.cmd C:\path\to\myfile20130218 
```

你可以这样做：

```
set oldname=%~nx1
set newname=%~dp1some_other_file_%oldname:~-8%
copy "%~f1" "%newname%" 
```

**更新 2：**如果您知道文件夹和格式，您可以使用文件夹调用脚本

```
copyfile.cmd C:\folder 
```

并做这样的事情：

```
@echo off

setlocal EnableDelayedExpansion

for /f %%f in (
  'dir /b "%~f1" ^| findstr /r "myfile[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]$"'
) do (
  set oldname=%~f1\%%f
  set newname=%~f1\my_other_name_!oldname:~-8!
  copy "!oldname!" "!newname!"
)

endlocal 
```

**编辑：**脚本分解。

*   `setlocal EnableDelayedExpansion`启用循环和条件内的变量扩展。
*   `for /f %%f in ('...')`执行单引号之间的命令，然后循环该命令的输出。
*   `dir /b "%~f1"`以简单模式（无标题，无摘要）列出给定目录的内容（`%~f1`扩展为传递给脚本的第一个参数的完整路径）。
*   `findstr /r "myfile[0-9]...[0-9]$"`过滤以子字符串“myfile”后跟 8 位数字结尾的字符串的输入。管道 ( `^|`) 之前的抑扬符转义管道，因为否则它将优先于`for`命令，这将有效地将`for`命令分成两半，导致命令行无效。
*   `set oldname=%~f1\%%f`将匹配文件的完整路径分配给变量`oldname`。
*   `set newname=%~f1\my_other_name_!oldname:~-8!`将新文件名的完整路径（“my_other_name_”后跟 8 位数字`oldname`）分配给变量`newname`。
*   `copy "!oldname!" "!newname!"`这个不用我解释了吧？

# pyqt - “中止 aboutToFinish 处理。” PySide Phonon 模块发出警告

> ID：14927615
> 
> 赞同：1
> 
> 时间：2013-02-18T00:01:59.713
> 
> 标签：pyqt, pyside

我允许我的锻炼时钟程序通过使用声子模块来播放声音。对于我程序中的每个音频文件，我都会创建一个设备 ( `createPlayer`)，然后`play()`在其上使用该方法。

除了反复播放声音会以某种方式破坏播放器之外，这绝对可以正常工作。有时该应用程序在整个程序中都能正常运行，但有时时钟的“tic”声音会被禁用。

每次我运行该应用程序时，第二次播放任何声音时，我都会收到警告`Aborting aboutToFinish handling`。我认为这是相关的。

有什么建议么？

# facebook - 无法在 Facebook 提要对话框中添加带有 url 参数的图片（直接 URL）

> ID：14927619
> 
> 赞同：3
> 
> 时间：2013-02-18T00:02:38.440
> 
> 标签：facebook, url, parameters, dialog, feed

我想知道如何在此示例中向我的图片 URl 添加参数：

[https://www.facebook.com/dialog/feed?app_id=...&link=...&picture=www.blablabladotcom?parameter1=1¶meter2=2&name=...&caption=...&description=...&redirect_uri =](https://www.facebook.com/dialog/feed?app_id=...&link=...&picture=www.blablabladotcom?parameter1=1&parameter2=2&name=...&caption=...&description=...&redirect_uri=) ...

我尝试使用 %26 编码，但图片不显示。奇怪的是，当我在 redirect_uri 参数上尝试 %26 时，它工作正常。关于这个有什么建议吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T07:01:47.090

您需要正确编码所有部分（下面的示例 Java 脚本代码）：

```
var _FBAPPID = "xxxxxxxxxx", // your app ID (mandatory)
    _name = "name",
    _text = "text",
    _link = "link",
    _picture = "http://cdn2.insidermonkey.com/blog/wp-content/uploads/2012/10/facebook4-e1349213205149.jpg", // some google image - replace it
    _caption = "caption",
    _redirect_uri = "http://google.com" // this URL must be from within the domain you specified in your app's settings

var _params = "&name=" + encodeURIComponent(_name)
    + "&description=" + encodeURIComponent(_text)
    + "&link=" + encodeURIComponent(_link)
    + "&picture=" + encodeURIComponent(_picture)
    + "&caption=" + encodeURIComponent(_caption)
    + "&redirect_uri=" + encodeURIComponent(_redirect_uri);

var _href = "http://www.facebook.com/dialog/feed?app_id=" + _FBAPPID + _params + "&display=touch"; 
```

我还添加了`display=touch`，因为我只对移动设备使用直接 URL。

来源在[这里](https://developers.facebook.com/docs/reference/dialogs/feed/)。

# matlab - Matlab中的动画3D散点图

> ID：14927621
> 
> 赞同：1
> 
> 时间：2013-02-18T00:02:59.923
> 
> 标签：matlab, animation, plot, scatter-plot

我有一组总共有 4 个自变量的数据，我认为表示 4 个自变量和一个因变量的唯一方法是动画 3D 散点图。

假设我有以下一组数据：

```
W X Y Z Val
0 0 0 0 5.5
0 0 0 1 2.3
0 0 1 0 1.6
0 0 1 1 8.8
0 1 0 0 2.6
0 1 0 1 4.8
0 1 1 0 0.1
0 1 1 1 1.1
1 0 0 0 1.0
1 0 0 1 0.0
1 0 1 0 0.4
1 0 1 1 4.4
1 1 0 0 4.4
1 1 0 1 7.9
1 1 1 0 9.1
1 1 1 1 2.3 
```

并且这些值被读入并转换为以下数组：

```
W = {0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1}
x = {0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1}
X = {0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1}
Z = {0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1}
Val = {5.5,2.3,1.6,8.8,2.6,4.8,0.1,1.1,1.0,0.0,0.4,4.4,4.4,7.9,9.1,2.3} 
```

我想知道如何创建一个 3D 散点图 (scatter3)，其中 X、Y 和 Z 作为自变量，Val 由点的颜色表示，并以变量 W 作为时间进行动画处理？

基本上，当 W=0 和 W=1 时的不同 Val 值相对于 X、Y 和 Z 在不同时间绘制时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T01:53:52.967

根据您的编辑，我稍微完善了我的建议：

```
mat=cell2mat([W;x;X;Z;Val])'; %Convert cells into a matrix

colors=prism(numel(mat(:,1)));
scatter3(mat(1,2),mat(1,3),mat(1,4),100,colors(1,:),'filled');
axis tight;

for jj=1:8:numel(mat(:,1))
    scatter3(mat(jj:jj+7,2),mat(jj:jj+7,3),...
        mat(jj:jj+7,4),100,colors(jj:jj+7,:),'filled');
    drawnow
    pause(1)
end 
```

在上面的示例中，颜色是按顺序分配的，但是如果您希望颜色在 VAL 相同的情况下相同，则可以执行以下操作：

```
mat=cell2mat([W;x;X;Z;Val])';
val_new=mat(:,5)/max(mat(:,5)); %0<VAL<1
scatter3(mat(1,2),mat(1,3),mat(1,4),100,[0 val_new(1) 0],'filled');
axis tight;

for jj=1:8:numel(mat(:,1))
    scatter3(mat(jj:jj+7,2),mat(jj:jj+7,3),...
        mat(jj:jj+7,4),100,[zeros(8,1) val_new(jj:jj+7,:) zeros(8,1)],'filled');
    drawnow
    pause(1)
end 
```

当然，这两个示例都假设您每次都将始终有 8 个条目。在第二种情况下，有时颜色的差异很小。如果您想实际保存视频或动画 gif，只需查看`getframe`和`imwrite`。

# javascript - 停止传播

> ID：14927627
> 
> 赞同：1
> 
> 时间：2013-02-18T00:03:31.540
> 
> 标签：javascript, jquery, click, stoppropagation

我有一个面板，通过单击带有 class 的元素来打开和关闭以显示菜单`.open`。当我第一次单击它时，很好，面板打开了。面板打开后，我单击一个菜单项，然后面板关闭。

我面临的问题是，单击菜单项后关闭面板后，我需要点击两次`.open`才能再次打开面板。

我首先运行这个：

```
$(".open").toggle(function(){
   $(".header").animate({height:"100%"},200);
   },function(){
        $(".header").animate({height:50},200);
}); 
```

这会打开一个带有菜单的面板，然后当我单击一个菜单项时，我会这样做：

```
$(".navMore li a").on("click", function(e) {
   e.preventDefault();
    ... 
```

是传播的问题吗？添加：

```
$(".navMore li a").on("click", function(e) {
   e.preventDefault();
   e.stopPropagation(); 
```

仍然给我留下同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:21:29.507

该`click`事件在 JQuery 中冒泡。为了防止这种情况发生，您需要停止传播在较低元素上冒泡*并*阻止较高元素的处理程序触发。

在`$('.open')`函数中，您需要输入以下内容：

```
$(".open").toggle( function( event ) {
    if( !$( event.target ).is("a") )
        {
            $(".header").animate({height:"100%"},200);
        }
},....); 
```

# sublimetext2 - 崇高文本中使用 emmet 的嵌套缩写扩展

> ID：14927628
> 
> 赞同：1
> 
> 时间：2013-02-18T00:03:36.117
> 
> 标签：sublimetext2, sublimetext, emmet

在带有 emmet 插件的崇高文本中，我可以写
![在此处输入图像描述](../Images/0e1192223c75c677052e692258090ad6.png)
得到
![在此处输入图像描述](../Images/254a66f188c1b382fb2ee4e7a18d3f17.png)
但是如果我想
![在此处输入图像描述](../Images/358c34555ff33012da4b0d09fc49cdb1.png)
在按下选项卡后生成一些 lorem 或其他标签，我会转到下一个列表项
![在此处输入图像描述](../Images/d83884cfb479767c12a1688510547de7.png)
，我该如何避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:16:40.357

您可以使用`CTRL`+`E`来展开`lorem3`，而不是`TAB`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T19:16:44.677

当您展开缩写词（尤其是类似`ul>li*3`）时，Emmet 会在一些重要的地方生成制表位（根据 Sublime Text 的*字段*），假设您可能想要在其中填写数据（属性值、标签内容等）。因此，在您展开缩写之后，您实际上是在使用 Tab/Shift-Tab 在制表位之间移动。遗憾的是 ST 不显示制表符的装饰。

您可以简单地按 Esc 键退出制表位模式并使用 Tab 扩展缩写。

# java - Java：String concat vs StringBuilder - 优化了，我该怎么办？

> ID：14927630
> 
> 赞同：50
> 
> 时间：2013-02-18T00:03:44.307
> 
> 标签：java, string, append, concatenation, stringbuilder

在[这个答案](https://stackoverflow.com/a/1532499/1154376)中，它说（暗示）字符串连接无论如何都被优化为 StringBuilder 操作，所以当我编写代码时，是否有任何理由在源代码中编写 StringBuilder 代码？请注意，我的用例与 OP 的问题不同，因为我正在连接/附加数十万行。

为了让自己更清楚：我很清楚每个人的差异，只是我不知道是否值得实际编写 StringBuilder 代码，因为它的可读性较低，而且当它的所谓较慢的表亲 String 类自动转换为无论如何编译过程。

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2013-02-18T00:37:13.560

我认为`StringBuilder`vs的使用`+`实际上取决于您使用它的上下文。

一般使用 JDK 1.6 及以上版本的编译器会自动使用`StringBuilder`.

```
String one = "abc";
String two = "xyz";
String three = one + two; 
```

这将编译`String three`为：

```
String three = new StringBuilder().append(one).append(two).toString(); 
```

这非常有帮助，并为我们节省了一些运行时间。然而，这个过程并不总是最优的。举个例子：

```
String out = "";
for( int i = 0; i < 10000 ; i++ ) {
    out = out + i;
}
return out; 
```

如果我们编译成字节码，然后反编译生成的字节码，我们会得到类似的结果：

```
String out = "";
for( int i = 0; i < 10000; i++ ) {
    out = new StringBuilder().append(out).append(i).toString();
}
return out; 
```

编译器已经优化了内部循环，但肯定没有做出最好的优化。为了改进我们的代码，我们可以使用：

```
StringBuilder out = new StringBuilder();
for( int i = 0 ; i < 10000; i++ ) {
    out.append(i);
}
return out.toString(); 
```

现在这比编译器生成的代码更优化，所以在需要高效代码的情况下，肯定需要使用`StringBuilder`/类编写代码。`StringBuffer`当前的编译器不擅长处理循环中的连接字符串，但是这在未来可能会改变。

您需要仔细查看需要手动应用`StringBuilder`的位置，并尝试在不会降低代码可读性的地方使用它。

注意：我使用 JDK 1.6 编译代码，并使用该`javap`程序反编译代码，该程序会输出字节码。它相当容易解释，并且在尝试优化代码时通常是一个有用的参考。编译器确实会在幕后更改您的代码，所以看看它做了什么总是很有趣！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T00:20:34.123

您问题中的关键短语是“据说较慢”。您需要确定这是否确实是一个瓶颈，然后看看哪个更快。

如果你要写这段代码，但还没有写，那就写你更清楚的东西，如果有必要，看看它是否是一个瓶颈。

虽然使用您认为更可能更快的代码是有意义的，但如果两者都具有相同的可读性，那么实际上花时间找出在您不需要时哪个更快是浪费时间。在性能不可接受之前，可读性高于性能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T00:09:38.373

这取决于具体情况，但 StringBuilder 被认为要快一些。如果您在循环内进行连接，那么我建议您使用 StringBuilder。

无论如何，我建议您对您的代码进行分析和基准测试（如果您正在执行如此大规模的附加操作）。

不过要小心：StringBuilder 的实例是可变的，不能在线程之间共享（除非你真的知道自己在做什么。）而不是不可变的 String。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T00:07:34.257

我可能误解了你的问题，但 StringBuilder 附加字符串时更快。所以，是的，如果您要附加“数十万行”，那么您绝对应该使用 StringBuilder （如果您正在运行多线程应用程序，则使用 StringBuffer ）。

（评论中更详尽的答案）

# android - Android - 当我尝试创建动态布局宽度时，2 列布局看起来很乱

> ID：14927632
> 
> 赞同：1
> 
> 时间：2013-02-18T00:03:45.307
> 
> 标签：android, android-layout

我有这个布局：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:orientation="horizontal"
     android:weightSum="1.0">

     <TextView android:id="@+id/TRAIN_CELL"
         android:layout_weight=".8"
         android:layout_height="wrap_content"
         android:layout_width="0dip"        
         android:textSize="16sp"/>

     <TextView android:id="@+id/TO_CELL"
         android:textSize="20sp"
         android:textStyle="bold" 
         android:gravity="center"
         android:textColor="@color/light_best_blue"
         android:layout_height="wrap_content"
         android:layout_width="0dip"  
         android:layout_weight=".2"/>

</LinearLayout> 
```

这是在父屏幕中引用它的片段

```
<ListView
android:id="@android:id/list"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dp"
    android:text="@+id/label"
    android:textSize="17sp"> 
</ListView> 
```

![在此处输入图像描述](../Images/15cb72edd118353f7e47f4756493f1ae.png)

我试图在左侧有一些文本，在右侧有一个 > 字符，以便用户知道选择它。

这是我填充列表的方式：

```
private List<HashMap<String, String>> fillMaps;
private SimpleAdapter adapter;

ListView list = null;       

    list = (ListView) findViewById(android.R.id.list);

    // My data
    fillMaps = new ArrayList<HashMap<String, String>>();

    adapter = new SimpleAdapter(this, fillMaps, R.layout.my_problems,
            new String[] {"train", "to"}, 
            new int[] {R.id.TRAIN_CELL,  R.id.TO_CELL});        

                    for ( int i = 0; i < obj.length(); i++ )
                    {
                        HashMap<String, String> map = new HashMap<String, String>();
                        JSONObject o = obj.getJSONObject(i);                                

                        problem_title = o.getString("problem_title");
                        problem_id = o.getString("problem_id");
                        String has_new_comments = o.getString("has_new_comments");
                        String is_private = o.getString("is_private");

                        Problem p = new Problem ( );
                        p.setProblemId(problem_id);                         
                        p.setProblemName(problem_title);
                        p.setIsPrivate(is_private);
                        p.setHasNewComments(has_new_comments);

                        map.put("train", p.toString() );
                        map.put("to", ">");

                        fillMaps.add(map);
                        problems.add( p );                                                          
                    }

                    adapter.notifyDataSetChanged(); 
```

但是屏幕看起来很乱，左边的列出现在右边的列旁边，没有空格，“>”字符没有排列在同一列上，而是随机间隔，具体取决于左列结束的位置。

关于可能出了什么问题的任何想法？

谢谢！

# java - while 循环条件在它应该停止时没有停止

> ID：14927635
> 
> 赞同：-1
> 
> 时间：2013-02-18T00:04:01.730
> 
> 标签：java, loops, while-loop, conditional-statements

我正在处理一项将 2 个用户输入之间的所有偶数相加的作业。例子; userNum1 = 3, userNum2 = 12。这两个数字也包含在加法中（仅当偶数时）。我已经检查了我的 while 循环条件一个小时，似乎无法弄清楚为什么当添加的数字是用户的第二个数字（在本例中为 12）时它没有停止。

这是我的代码。

```
int evenCount = 0;
int evenSum = 0;
int oddNumberFixer = 0;
int evenAddNumber = 0;

while (evenAddNumber <= num2 || evenCount < num2)
    {   
        oddNumberFixer = num1 + 1;

        if ((num1 % 2) != 0)
        {

            evenAddNumber = oddNumberFixer + evenCount;

            evenSum = evenAddNumber + evenSum;
            evenCount = evenCount + 2;

        }
        else 
        {
            evenAddNumber = num1 + evenCount;
            evenSum = evenAddNumber + evenSum;
            evenCount = evenCount + 2;

        }

    }
    System.out.println("The sum of the included evens is " + evenSum); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:30:41.363

我不确定你为什么使用 while 循环，这似乎是一个 for 循环类型的应用程序。如果您进行了一些初始化，确保第一个数字是您要添加的第一个偶数，您可以一次通过 2 个，即：

```
int first = num1;

if(first % 2 == 1)
    first++;

for(int i = first; i <= num2; i += 2)
{
    //summing code
} 
```

至于你的while循环，我怀疑这是因为你的条件中的OR语句允许循环继续直到evencount> = num2。这保证了循环将继续进行 1/2 * num2 次迭代。在您的示例 (3,12) 中，您希望循环迭代 5 次 (4+6+8+12)，但是您的 while 循环的第二部分是有条件的，它将迭代 6 次（evencount = 0,2, 4,6,8,10)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T00:16:23.527

你需要考虑你的算法需要做什么。请注意，无论您的数字是否为偶数，您都在增加 evenSum。此外，您只需要检查一个数字是否为偶数一次。这似乎很明显，但是一旦你知道一个数字是偶数，加 2 总是会给你另一个偶数。如果您在开始编码之前花更多时间考虑它，那么该算法可能会简单得多。

您可以尝试确保数字甚至在开始循环之前。那你可以试试

```
for(int i = yourEvenNumber; i <= num2; i+=2) {
    //add them up here    
} 
```

# ruby - ruby 内部的 SSH 调用，使用 %x

> ID：14927640
> 
> 赞同：0
> 
> 时间：2013-02-18T00:04:45.267
> 
> 标签：ruby, string, bash, ssh, awk

我正在尝试从 ruby​​ 脚本进行单行 ssh 调用。我的脚本采用主机名，然后开始返回主机名的机器信息。

```
return_value = %x{ ssh #{hostname} "#{number_of_users}; #{number_of_processes}; 
              #{number_of_processes_running}; #{number_of_processes_sleeping}; "} 
```

变量的格式是这样的。

```
number_of_users = %Q(users | wc -w | cat | awk '{print "Number of Users: "\$1}')

number_of_processes = %Q(ps -el | awk '{print $2}' | wc -l  | awk '{print "Number of Processes: "$1}') 
```

我已经尝试了 %q、%Q 和普通的 ""，但我无法让 awk 在输出之前打印任何内容。我要么得到这个错误（如果我包括冒号）

`awk: line 1: syntax error at or near :`

或者如果我没有在 $1 前面包含斜杠，我只会得到该行的空输出。有什么解决办法吗？我认为这可能是因为我使用了 %q，但它甚至只使用双引号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:13:54.983

使用反引号捕获命令的输出并将输出作为字符串返回：

```
number_of_users = `users | wc -w | cat | awk '{print "Number of Users:", $1}'`

puts number_of_users 
```

我的系统上的结果：

```
48 
```

但是你可以改进你的管道：

```
users | awk '{ print "Number of Users:", NF }'

ps -e | awk 'END { print "Number of Processes:", NR }' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T00:49:43.113

所以这个问题的解决方法是：

```
%q(users | wc -w | awk '{print \"Number of Users: \"\$1}') 
```

必须在哪里使用`%q`，not `%`，not `%Q`，and not`""` 您必须在任何 awk 变量前使用反斜杠双引号和美元符号

如果有人可以通过解释原因来改进这个答案，那将不胜感激

尽管正如史蒂夫指出的那样，我可以使用`users | awk '{ print \"Number of Users:\", NF }'` 在这种情况下不需要反斜杠 NF 来改进我的代码。

# php - 如何在我的网络应用程序上使用 CAS 注册？

> ID：14927642
> 
> 赞同：0
> 
> 时间：2013-02-18T00:05:01.733
> 
> 标签：php, cas

我的学校有一个处理所有大学生登录活动的 CAS 系统。我正在构建一个 Web 应用程序，该应用程序将转到具有所有作业截止日期信息的学校网站，并为我下载这些截止日期。但是，为了做到这一点，我需要先用 CAS 登录，然后去网站拿东西。我想知道如何将我学校的 cas 登录用于我自己的 webapp？

到目前为止，这是我的想法：

我的网站 --> 重定向到我学校的 CAS 页面 ----> CAS 页面会以某种方式将一些凭据返回到我的网站 ----> 使用该凭据，我的网站可以转到另一所学校的网站并下载内容。

我不确定我的想法是否正确，我也不知道如何从 cas 页面获取凭证。我真的很感激任何帮助！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:20:22.820

首先，您需要在 CAS 服务管理中声明您的 Web 应用程序（您需要一些管理员角色）。因此，您将受益于常规的 CAS 身份验证过程。然后，如果您想从另一个 Web 应用程序获取“东西”并将您的第一个 Web 应用程序用作 CAS 代理，则需要设置适当的配置。看看：[https](https://wiki.jasig.org/display/CAS/Proxy+CAS+Walkthrough) ://wiki.jasig.org/display/CAS/Proxy+CAS+Walkthrough看看它是否符合您的需要。

# unix - 显示搜索模式及其计数的 Unix 命令

> ID：14927644
> 
> 赞同：-1
> 
> 时间：2013-02-18T00:05:37.023
> 
> 标签：unix

我正在运行测试，服务器是 Unix 机器。任何人都可以共享一个简单的命令来显示应该如下所示的输出：

```
"ORA-1234" - 100 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:10:13.037

使用 grep 命令

```
grep -i ORA-1234 your_output_file_name | wc -l 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T00:11:17.527

```
echo "ORA-1234 $(grep -c ORA-1234 $input_file)" 
```

这用于`grep -c`计算`ORA-1234`在输入文件中出现的频率。

概括：

```
for pattern in ORA-1234 ORA-2345 ORA-3456
do
    echo "$pattern $(grep -c $pattern $input_file)"
done 
```

如果文件名中的空格是一个问题，您可以稍微不同地处理它：

```
echo $pattern $(grep -c $pattern "$input_file") 
```

等等。

如果您坚持想要双引号和破折号，那么：

```
echo '"'$pattern'" -' $(grep -c "$pattern" "$input_file) 
```

如果您绝对不需要输出中回显的模式，则可以不使用`echo`and`$(...)`命令替换：

```
grep -c "$pattern" "$input_file" 
```

# perl - 使用 $c->visit 将 Args 传递到 Catalyst Chain

> ID：14927650
> 
> 赞同：2
> 
> 时间：2013-02-18T00:06:33.997
> 
> 标签：perl, catalyst

在我的一个 Catalyst 操作中，我试图在不同的控制器中获取另一个操作的主体响应 (HTML)。（为了将一页“嵌入”到另一页中）

我想办法做到这一点是一个`$c->visit`. （如果我误解了 $c->visit，那么我剩下的问题就不需要回答了。）

有问题的操作需要一个 arg，但直到更进一步的链条，它看起来像这样：

```
/equipment/*/assets/widget

/assets/captureID (1)
-> /assets/base (0)
-> /assets/pageData (0)
=> /assets/widget 
```

如您所见，只有链中的最后一个操作在寻找 arg。

如果我尝试：

```
$c->visit('/assets/widget',[$arg]); 
```

我希望它沿着链条传播并给 /assets/captureID 我的 $arg。但实际上，它似乎根本没有通过链条传递。

我误入歧途到哪里去了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T00:56:04.783

结果只有捕获，而不是参数传递到链中。

根据文档：

> $c->visit($action [, \@captures, \@arguments ])

所以我能够通过执行以下操作取得成功：

```
$c->visit('/assets/widget',[$arg],[$arg]) 
```

第一个 args 数组命中第一个动作并停止，但第二个数组像我想要的那样一直沿链向下移动。

我希望`$c->visit('/assets/widget',[],[$arg])`工作，但事实并非如此。

然而，毕竟我意识到我不能那样抓住身体的反应，这是最终目标。无论哪种方式，希望我的鹅追逐对某人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T04:10:53.897

正如你所发现的，那时身体并不存在。你必须打电话来渲染你的视图，或者安排 /assets/widget`$c->res->body($foo)`直接设置。委婉地说，我发现捕获子请求的主体的想法非常规。我无法想象你会用它做什么而不违背良好的 MVC 设计原则。

在我看来，/assets/widget 中的逻辑需要位于模型而不是控制器中，以便它可以被任何需要它的功能使用。

和/或您需要将模板分解为（可重用）组件，以便您计划嵌入的任何内容都可以作为单个渲染过程的一部分完成。

```
[%- IF foo;
        PROCESS widget.tt;
    END; -%] 
```

# css - *zoom:1 在引导程序中做了什么？

> ID：14927651
> 
> 赞同：10
> 
> 时间：2013-02-18T00:06:51.230
> 
> 标签：css, twitter-bootstrap, responsive-design

我注意到在引导响应 CSS 中，有这个类：

```
.row{margin-left:-30px;*zoom:1} 
```

我从来没有在`*`CSS 属性中遇到过内联。谁能澄清这是做什么的？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-18T00:09:49.173

这就像 IE5.5 - IE7 的内联条件语句。只有 IE 5.5、IE6 和 IE7 会`zoom: 1`因为内联`*`（称为“星属性破解”）而显示。类似于带有下划线的 IE6 hack `_`。

请参阅：[http ://snook.ca/archives/html_and_css/targetting_ie7](http://snook.ca/archives/html_and_css/targetting_ie7)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T00:14:41.220

它被称为**[星属性 hack](http://kid666.com/2006/07/05/33/)** *（又名 Holly Hack）*，类似于[下划线 hack](http://wellstyled.com/css-underscore-hack.html)。

它仅用于为 IE (v5-v7) 系列设置属性。

# android - SSID 为空，但某些 Android 手机的 WifiInfo 中提供了 ip

> ID：14927652
> 
> 赞同：1
> 
> 时间：2013-02-18T00:07:27.317
> 
> 标签：android

我的应用程序的一些用户抱怨无法建立计算机和设备之间的连接。我的应用程序建立了从计算机到安卓手机的 tcp 连接。

因此，从用户那里获取有关他们手机的日志时，WifiInfo 对象的 to String 方法会返回信息，但缺少 SSID。但是分配了 IP（在某些用户的电话上） - 在 supplicat state 之前的以下字符串中，应该提到 SSID，它在大多数情况下会这样做，但在某些情况下不会。

```
 WifiInfio : , Supplicant state: COMPLETED, RSSI: -73, Link speed: 52, Net ID: 1, Metered hint: false, mFrequency: 2412 - IP:192.168.165.244 
```

我使用下面的代码获取 WifiInfo，然后在其上调用 toString()

```
 WifiManager wifiManager = (WifiManager) c.getSystemService(Context.WIFI_SERVICE);
    return wifiManager.getConnectionInfo(); 
```

任何想法为什么 SSID 可以为空并且在 wifi 信息中仍然有 IP 地址？

# python - 不能让我的星表在他的游戏上工作

> ID：14927662
> 
> 赞同：0
> 
> 时间：2013-02-18T00:08:38.730
> 
> 标签：python, pygame

任何人都可以帮助我我正在尝试让我的空间背景在游戏中工作，但我似乎无法做到，任何人都可以发现我看不到的东西或看到我哪里出错了。我已经合并了我的两个代码，所以我不确定我哪里出错了，但我尝试修复它，但只是模糊了。

```
import pygame, random, time
import os,sys,random
import pygame
from pygame.locals import *
pygame.init()

#set up the graphics window
size = [800, 595]
screen = pygame.display.set_mode(size, 0)
screenrect = screen.get_rect()
pygame.display.set_caption("Mathsvaders")
clock = pygame.time.Clock()

# set some variables
done = False
life = 3

aliens = pygame.sprite.Group()
allsprites = pygame.sprite.Group()
bombs = pygame.sprite.Group()
green = [0, 255, 0]
white = [255, 255, 255]

def disp(phrase, loc, screen, color): # func to display text
    s = font.render(phrase, True, color)
    screen.blit(s, loc)

def draw_star(star): # drawing a star
    # you only need to change a pixel, so use set_at, not draw.line
    screen.set_at((star[0], star[1]), (255, 255, 255))
    star[0] -= 1
    if star[0] < 0:
        star[0] = screen.get_width()
        star[1] = random.randint(0, screen.get_height())
# creating list of stars, used multi-line for loop for readability
stars = []
for i in range(200):
    x = random.randint(0, screen.get_width())
    y = random.randint(0, screen.get_height())
    stars.append([x,y])

    # drawing stars
    for star in stars:
        draw_star(star)

    screen.fill((0,0,0))

    pygame.display.flip()
   clock.tick(22)

# create a timer to control how often the screen updates
clock = pygame.time.Clock()
fps = 100

# loads images to use in the game which link in with my classes(further down)
cannon = pygame.image.load("spaceship.png").convert()
cannon.set_colorkey(white)
blast = pygame.image.load("blast.png").convert_alpha()
boom = pygame.image.load("expl.png").convert_alpha()
bomb = pygame.image.load("missile_player.png").convert_alpha()
back = pygame.image.load("rsz_space.png").convert()
enemy = pygame.image.load("sii.png").convert_alpha()
lives2 = pygame.image.load("alien2.png").convert()
lives2.set_colorkey(white)
lives3 = pygame.image.load("alien3.png").convert()
lives3.set_colorkey(white)
lives1 = pygame.image.load("alien1.png").convert()
lives1.set_colorkey(white)

# (Classes)
# the explosion class
class Explosion(pygame.sprite.Sprite):
    def __init__(self, x, y):
        pygame.sprite.Sprite.__init__(self)
        self.image = boom
        self.rect = self.image.get_rect()
        self.rect.centerx = x
        self.rect.centery = y
        self.count = 6

    def update(self):
        self.count -= 1
        if self.count < 1:
        self.kill()

class scoreClass:
    def __init__(self):
        self.value = 0
        # set a font, default font size 28
        self.font = pygame.font.Font(None, 28)

    def update(self):
        text = self.font.render("Score: %s" % self.value, True, (green))
        textRect = text.get_rect()
        textRect.centerx = screenrect.centerx
        screen.blit(text, textRect)

class Msg:
        def __init__(self, words):
        # set a font, default font size 28
        self.font = pygame.font.Font(None, 28)
        self.text = self.font.render(words, True, (green))
        self.textRect = self.text.get_rect()

        def update(self):
            self.textRect.centerx = screenrect.centerx
        self.textRect.centery = screenrect.centery
        screen.blit(self.text, self.textRect)

# the invader class
class Pi(pygame.sprite.Sprite):
    def __init__(self, x, y):
        pygame.sprite.Sprite.__init__(self)
        aliens.add(self)
        self.image = enemy
        self.rect = self.image.get_rect()
        self.rect.left = x
        self.rect.top = y
        self.speed = 1

    def update(self):
            self.rect.right += self.speed
            if self.rect.right >= (screenrect.right -5):
                self.speed = -1
            self.rect.top += self.rect.height
        if self.rect.left <= (screenrect.left +5):
            self.speed = 1
            self.rect.top += self.rect.height
        if self.rect.top > screenrect.bottom:
            self.kill()
        i = random.randrange(200)
        j = self.rect.centerx
        if i == 1:
            laser_bomb = Bomb(j, self.rect.bottom)
            allsprites.add(laser_bomb)
            aliens.add(laser_bomb)

class Gun(pygame.sprite.Sprite):
    def __init__(self):
        pygame.sprite.Sprite.__init__(self)
        self.image = cannon
        self.rect = self.image.get_rect()
        self.rect.bottom = screenrect.bottom
        self.rect.centerx = screenrect.centerx
        self.speed=0

    def update(self):
        self.rect.centerx += self.speed
        if self.rect.right >= screenrect.right:
            self.rect.centerx = 0
        if self.rect.right <= 0:
            self.rect.right = screenrect.right

# bomb class
class Bomb(pygame.sprite.Sprite):
    def __init__(self, x, y):
        pygame.sprite.Sprite.__init__(self)
        self.image = bomb
        self.rect = self.image.get_rect()
        self.rect.centerx = x
        self.rect.centery = y
        bombs.add(self)

    def update(self):
        self.rect.centery +=1

# the laser blast class
class Blast(pygame.sprite.Sprite):
    def __init__(self):
        pygame.sprite.Sprite.__init__(self)
        self.image = blast
        self.image.set_colorkey(white)
        self.rect = self.image.get_rect()
        self.rect.top = (player.rect.top + 5)
        self.rect.centerx = player.rect.centerx
        self.speed = 0

    def update(self):
        if self.speed == 0:
            self.rect.centerx = player.rect.centerx
        self.rect.top -= self.speed

# function to make a sheet of invaders
def invade():
    for j in range(10, 240, 120):
       for i in range(5):
            aliens.add(Pi((i*70)+10, j))

def gameover():
    message = Msg("Game Over")
    message.update()
    player.kill()
    shot.kill() 
```

# 赛前窗口

```
invade()

message = Msg("Press a key to play.")
allsprites.add(aliens)
key = True

while key:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            pygame.quit()
        if event.type == pygame.KEYDOWN:
            for item in (aliens):
                item.kill()
            key = False

    allsprites.update()
    allsprites.draw(screen)
    message.update()

        # set the loop to 40 cycles per second
    clock.tick(fps)

        #  update the display
    pygame.display.flip()

# Main Game Starts Here

score = scoreClass()
player = Gun()
shot = Blast()
invade()
allsprites.add(player, aliens, shot)

while done==False:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            done=True

    if life <= 0:
        gameover()

    else:
        # shoots laser missile
        if event.type == pygame.KEYDOWN:
            if event.key == pygame.K_UP:
                if shot.speed == 0:
                    shot.speed = 5
                    #laser.play()

            if event.key == pygame.K_LEFT:
                player.speed = -3
            if event.key == pygame.K_RIGHT:
                player.speed = 3

        if event.type == pygame.KEYUP:
            if event.key == pygame.K_LEFT:
                player.speed = 0
            if event.key == pygame.K_RIGHT:
                player.speed = 0

        hit = pygame.sprite.spritecollide(shot, aliens, 1)
        if len(hit) > 0:
            explosion1 = Explosion(shot.rect.centerx, shot.rect.top)
            score.value += 100
            shot.kill()
            #explode.play()
            shot = Blast()
            allsprites.add(shot, explosion1)

        hit2 = pygame.sprite.spritecollide(player, aliens, 1)
        if len(hit2) > 0:
            life -= 1
            #explode.play()
            explosion2 = Explosion(player.rect.centerx, player.rect.centery)
            allsprites.add(explosion2)
            player.kill()
            shot.kill()
            if life > 0:
                ready = Msg("Push Harder !!.")
                ready.update()
                allsprites.update()
                allsprites.draw(screen)
                score.update()
                pygame.display.flip()
                for item in bombs:
                    item.kill()
                while 1:
                    event = pygame.event.wait()
                    if event.type == pygame.KEYDOWN:
                        break
                player = Gun()
                shot = Blast()
                allsprites.add(player, shot)

        if shot.rect.top <= screenrect.top:
            shot.kill()
            shot = Blast()
            allsprites.add(shot)

    if life == 2:
        men = lives2
    if life == 1:
        men = lives1
    if life == 3:
        men = lives3

    if life > 0:
        screen.blit(men, (0,0))

    allsprites.update()
    allsprites.draw(screen)
    score.update()

    # set the loop to "fps" cycles per second
    clock.tick(fps)
    #  update the display
    pygame.display.flip()

# close pygame
pygame.quit() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T01:08:47.600

您在绘制星星后正在擦除屏幕。改变：

```
# drawing stars
for star in stars:
    draw_star(star)

screen.fill((0,0,0))

pygame.display.flip() 
```

到：

```
screen.fill((0,0,0))

# drawing stars
for star in stars:
    draw_star(star)

pygame.display.flip() 
```

# ios - iOS Storyboard App-Wide Elements（持久侧边栏）

> ID：14927676
> 
> 赞同：1
> 
> 时间：2013-02-18T00:10:17.450
> 
> 标签：ios, ios6, storyboard

我正在学习 iOS 6 开发，我想构建的第一个 iPad 应用程序看起来像这样。

![iOS 应用](../Images/69c704596bf1c744eaf5cce7648f24e3.png)

我想知道如何使用 Storyboard 来布局我的场景，侧边栏（TableView）总是在那里。只有地图所在的区域应该改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:25:58.137

将容器视图从对象资源管理器拖到情节提要中的视图中。我将使用视图控制器自动添加新场景。将其更改为您的 tableview 控制器，您应该很高兴。它不会在ios5中工作

# ios - 视图控制器在发布后收到发送给它的消息，导致崩溃

> ID：14927677
> 
> 赞同：1
> 
> 时间：2013-02-18T00:10:19.867
> 
> 标签：ios, uiviewcontroller, uitabbarcontroller, release, nszombie

我有一个设置，我正在呈现一个 UIPickerViewController（模态），然后将更多的控制器推送到堆栈上以进行图像编辑。如果我点击后退按钮并进入根视图控制器，然后点击另一个选项卡，应用程序就会崩溃。

这是崩溃消息：

```
-[PostPhotoViewController respondsToSelector:]: message sent to deallocated instance 0x19b16a60 
```

我运行了 Zombies 工具，看起来堆栈上的最后一个视图控制器 (PostPhotoViewController) 正在接收发送给它的消息，即使它已被释放。这在 iOS5 和 6 上都发生了，所以我没有做任何手动释放/保留。

我已将所有出口设置为 nil PostPhotoVC 并取消订阅所有通知。该消息似乎来自标签栏控制器。

不知道如何阻止它，有什么想法吗？

这是僵尸读数：

```
#   Address Category    Event Type  RefCt   Timestamp   Size    Responsible Library Responsible Caller
0   0x1b730790  PostPhotoViewController Malloc  1   00:19.248.903   256 UIKit   -[UIClassSwapper initWithCoder:]
1   0x1b730790  PostPhotoViewController Retain  2   00:19.248.948   0   UIKit   UINibDecoderDecodeObjectForValue
2   0x1b730790  PostPhotoViewController Retain  3   00:19.248.998   0   UIKit   -[UIRuntimeConnection initWithCoder:]
3   0x1b730790  PostPhotoViewController Retain  4   00:19.249.004   0   UIKit   -[UIRuntimeConnection initWithCoder:]
4   0x1b730790  PostPhotoViewController Retain  5   00:19.249.025   0   UIKit   -[UIRuntimeConnection initWithCoder:]
5   0x1b730790  PostPhotoViewController Retain  6   00:19.249.030   0   UIKit   -[UIRuntimeConnection initWithCoder:]
6   0x1b730790  PostPhotoViewController Retain  7   00:19.249.067   0   UIKit   UINibDecoderDecodeObjectForValue
7   0x1b730790  PostPhotoViewController Retain  8   00:19.249.080   0   UIKit   UINibDecoderDecodeObjectForValue
8   0x1b730790  PostPhotoViewController Retain  9   00:19.249.648   0   UIKit   -[UIStoryboardScene setSceneViewController:]
9   0x1b730790  PostPhotoViewController Retain  10  00:19.249.759   0   UIKit   -[UINib instantiateWithOwner:options:]
10  0x1b730790  PostPhotoViewController Release 9   00:19.249.849   0   UIKit   -[UINibDecoder finishDecoding]
11  0x1b730790  PostPhotoViewController Release 8   00:19.249.884   0   UIKit   -[UINibDecoder finishDecoding]
12  0x1b730790  PostPhotoViewController Release 7   00:19.249.897   0   UIKit   -[UINibDecoder finishDecoding]
13  0x1b730790  PostPhotoViewController Release 6   00:19.249.900   0   UIKit   -[UINibDecoder finishDecoding]
14  0x1b730790  PostPhotoViewController Release 5   00:19.249.921   0   UIKit   -[UIRuntimeConnection dealloc]
15  0x1b730790  PostPhotoViewController Release 4   00:19.249.930   0   UIKit   -[UIRuntimeConnection dealloc]
16  0x1b730790  PostPhotoViewController Release 3   00:19.249.936   0   UIKit   -[UIRuntimeConnection dealloc]
17  0x1b730790  PostPhotoViewController Release 2   00:19.249.946   0   UIKit   -[UIRuntimeConnection dealloc]
18  0x1b730790  PostPhotoViewController Retain  3   00:19.249.998   0   UIKit   -[UIStoryboardSegue initWithIdentifier:source:destination:]
19  0x1b730790  PostPhotoViewController Retain  4   00:19.250.010   0   V Nation    -[ImageEditViewController prepareForSegue:sender:]
20  0x1b730790  PostPhotoViewController Release 3   00:19.250.018   0   V Nation    -[ImageEditViewController prepareForSegue:sender:]
21  0x1b730790  PostPhotoViewController Retain  4   00:19.250.045   0   UIKit   -[UIViewController _addChildViewController:performHierarchyCheck:notifyWillMove:]
22  0x1b730790  PostPhotoViewController Release 3   00:19.254.033   0   UIKit   -[UIStoryboardSegue dealloc]
23  0x1b730790  PostPhotoViewController Release 2   00:19.254.037   0   UIKit   _UIApplicationHandleEvent
24  0x1b730790  PostPhotoViewController Release 1   00:19.254.047   0   UIKit   -[UIStoryboardScene dealloc]
25  0x1b730790  PostPhotoViewController Retain  2   00:19.254.119   0   UIKit   -[UINavigationController topViewController]
26  0x1b730790  PostPhotoViewController Autorelease     00:19.254.124   0   UIKit   -[UINavigationController topViewController]
27  0x1b730790  PostPhotoViewController Retain  3   00:19.254.935   0   UIKit   -[UINib instantiateWithOwner:options:]
28  0x1b730790  PostPhotoViewController Retain  4   00:19.254.944   0   UIKit   +[UIProxyObject addMappingFromIdentifier:toObject:forCoder:]
29  0x1b730790  PostPhotoViewController Retain  5   00:19.254.950   0   UIKit   -[UINib instantiateWithOwner:options:]
30  0x1b730790  PostPhotoViewController Retain  6   00:19.254.957   0   UIKit   +[UIProxyObject addMappingFromIdentifier:toObject:forCoder:]
31  0x1b730790  PostPhotoViewController Retain  7   00:19.254.993   0   UIKit   -[UIProxyObject initWithCoder:]
32  0x1b730790  PostPhotoViewController Retain  8   00:19.254.994   0   UIKit   -[UIRuntimeConnection initWithCoder:]
33  0x1b730790  PostPhotoViewController Retain  9   00:19.255.282   0   UIKit   -[UIRuntimeConnection initWithCoder:]
34  0x1b730790  PostPhotoViewController Retain  10  00:19.255.312   0   UIKit   -[UIRuntimeConnection initWithCoder:]
35  0x1b730790  PostPhotoViewController Retain  11  00:19.263.971   0   UIKit   -[UIProxyObject initWithCoder:]
36  0x1b730790  PostPhotoViewController Retain  12  00:19.263.971   0   UIKit   -[UIRuntimeConnection initWithCoder:]
37  0x1b730790  PostPhotoViewController Retain  13  00:19.264.922   0   UIKit   UINibDecoderDecodeObjectForValue
38  0x1b730790  PostPhotoViewController Retain  14  00:19.264.924   0   UIKit   UINibDecoderDecodeObjectForValue
39  0x1b730790  PostPhotoViewController Retain  15  00:19.264.939   0   UIKit   UINibDecoderDecodeObjectForValue
40  0x1b730790  PostPhotoViewController Retain  16  00:19.264.941   0   UIKit   UINibDecoderDecodeObjectForValue
41  0x1b730790  PostPhotoViewController Release 15  00:19.265.032   0   UIKit   -[UINib instantiateWithOwner:options:]
42  0x1b730790  PostPhotoViewController Release 14  00:19.265.046   0   UIKit   +[UIProxyObject removeMappingsForCoder:]
43  0x1b730790  PostPhotoViewController Release 13  00:19.265.049   0   UIKit   +[UIProxyObject removeMappingsForCoder:]
44  0x1b730790  PostPhotoViewController Release 12  00:19.265.060   0   UIKit   -[UINibDecoder finishDecoding]
45  0x1b730790  PostPhotoViewController Release 11  00:19.265.061   0   UIKit   -[UINibDecoder finishDecoding]
46  0x1b730790  PostPhotoViewController Release 10  00:19.265.076   0   UIKit   -[UINibDecoder finishDecoding]
47  0x1b730790  PostPhotoViewController Release 9   00:19.265.077   0   UIKit   -[UINibDecoder finishDecoding]
48  0x1b730790  PostPhotoViewController Release 8   00:19.265.095   0   UIKit   -[UINibDecoder finishDecoding]
49  0x1b730790  PostPhotoViewController Release 7   00:19.265.103   0   UIKit   -[UIRuntimeConnection dealloc]
50  0x1b730790  PostPhotoViewController Release 6   00:19.265.109   0   UIKit   -[UINibDecoder finishDecoding]
51  0x1b730790  PostPhotoViewController Release 5   00:19.265.118   0   UIKit   -[UIRuntimeConnection dealloc]
52  0x1b730790  PostPhotoViewController Release 4   00:19.265.126   0   UIKit   -[UIRuntimeConnection dealloc]
53  0x1b730790  PostPhotoViewController Release 3   00:19.265.133   0   UIKit   -[UIRuntimeConnection dealloc]
54  0x1b730790  PostPhotoViewController Release 2   00:19.265.548   0   Foundation  -[NSAutoreleasePool drain]
55  0x1b730790  PostPhotoViewController Retain  3   00:19.292.511   0   UIKit   -[UINavigationController topViewController]
56  0x1b730790  PostPhotoViewController Autorelease     00:19.292.517   0   UIKit   -[UINavigationController topViewController]
57  0x1b730790  PostPhotoViewController Retain  4   00:19.297.581   0   UIKit   -[UINavigationController topViewController]
58  0x1b730790  PostPhotoViewController Autorelease     00:19.297.585   0   UIKit   -[UINavigationController topViewController]
59  0x1b730790  PostPhotoViewController Retain  5   00:19.297.598   0   UIKit   -[UINavigationController _startTransition:fromViewController:toViewController:]
60  0x1b730790  PostPhotoViewController Release 4   00:19.297.619   0   UIKit   -[UINavigationController _startTransition:fromViewController:toViewController:]
61  0x1b730790  PostPhotoViewController Retain  5   00:19.297.957   0   UIKit   -[UINavigationController topViewController]
62  0x1b730790  PostPhotoViewController Autorelease     00:19.297.958   0   UIKit   -[UINavigationController topViewController]
63  0x1b730790  PostPhotoViewController Retain  6   00:19.298.000   0   UIKit   -[UIResponder becomeFirstResponder]
64  0x1b730790  PostPhotoViewController Release 5   00:19.298.015   0   UIKit   -[UIResponder becomeFirstResponder]
65  0x1b730790  PostPhotoViewController Release 4   00:19.302.098   0   QuartzCore  CA::AutoreleasePool::~AutoreleasePool()
66  0x1b730790  PostPhotoViewController Release 3   00:19.302.117   0   QuartzCore  CA::AutoreleasePool::~AutoreleasePool()
67  0x1b730790  PostPhotoViewController Release 2   00:19.302.696   0   QuartzCore  CA::AutoreleasePool::~AutoreleasePool()
68  0x1b730790  PostPhotoViewController Release 1   00:19.303.120   0   QuartzCore  CA::AutoreleasePool::~AutoreleasePool()
69  0x1b730790  PostPhotoViewController Retain  2   00:19.651.789   0   UIKit   -[UINavigationController topViewController]
70  0x1b730790  PostPhotoViewController Autorelease     00:19.651.789   0   UIKit   -[UINavigationController topViewController]
71  0x1b730790  PostPhotoViewController Retain  3   00:19.651.808   0   UIKit   -[UINavigationController topViewController]
72  0x1b730790  PostPhotoViewController Autorelease     00:19.651.809   0   UIKit   -[UINavigationController topViewController]
73  0x1b730790  PostPhotoViewController Retain  4   00:19.651.854   0   UIKit   -[UINavigationController navigationTransitionView:didEndTransition:fromView:toView:]
74  0x1b730790  PostPhotoViewController Release 3   00:19.651.862   0   UIKit   -[UINavigationController navigationTransitionView:didEndTransition:fromView:toView:]
75  0x1b730790  PostPhotoViewController Release 2   00:19.651.904   0   GraphicsServices    GSEventRunModal
76  0x1b730790  PostPhotoViewController Release 1   00:19.651.905   0   GraphicsServices    GSEventRunModal
77  0x1b730790  PostPhotoViewController Retain  2   00:20.841.683   0   UIKit   -[UINavigationController topViewController]
78  0x1b730790  PostPhotoViewController Autorelease     00:20.841.684   0   UIKit   -[UINavigationController topViewController]
79  0x1b730790  PostPhotoViewController Retain  3   00:20.841.704   0   UIKit   -[UINavigationController topViewController]
80  0x1b730790  PostPhotoViewController Autorelease     00:20.841.705   0   UIKit   -[UINavigationController topViewController]
81  0x1b730790  PostPhotoViewController Retain  4   00:20.841.706   0   UIKit   -[UINavigationController _popViewControllerWithTransition:allowPoppingLast:]
82  0x1b730790  PostPhotoViewController Autorelease     00:20.841.707   0   UIKit   -[UINavigationController _popViewControllerWithTransition:allowPoppingLast:]
83  0x1b730790  PostPhotoViewController Retain  5   00:20.841.716   0   UIKit   -[UINavigationController setDisappearingViewController:]
84  0x1b730790  PostPhotoViewController Release 4   00:20.841.720   0   UIKit   _popViewControllerNormal
85  0x1b730790  PostPhotoViewController Retain  5   00:20.841.732   0   UIKit   -[UIViewController removeChildViewController:notifyDidMove:]
86  0x1b730790  PostPhotoViewController Release 4   00:20.841.733   0   UIKit   -[UIViewController removeChildViewController:notifyDidMove:]
87  0x1b730790  PostPhotoViewController Release 3   00:20.843.840   0   UIKit   _UIApplicationHandleEvent
88  0x1b730790  PostPhotoViewController Release 2   00:20.843.841   0   UIKit   _UIApplicationHandleEvent
89  0x1b730790  PostPhotoViewController Release 1   00:20.843.842   0   UIKit   _UIApplicationHandleEvent
90  0x1b730790  PostPhotoViewController Retain  2   00:20.844.155   0   UIKit   -[UINavigationController _startTransition:fromViewController:toViewController:]
91  0x1b730790  PostPhotoViewController Release 1   00:20.844.178   0   UIKit   -[UINavigationController _startTransition:fromViewController:toViewController:]
92  0x1b730790  PostPhotoViewController Retain  2   00:20.845.394   0   UIKit   -[UINavigationController navigationTransitionView:didEndTransition:fromView:toView:]
93  0x1b730790  PostPhotoViewController Release 1   00:20.845.396   0   UIKit   -[UINavigationController setDisappearingViewController:]
94  0x1b730790  PostPhotoViewController Retain  2   00:20.845.410   0   UIKit   -[UINavigationController navigationTransitionView:didEndTransition:fromView:toView:]
95  0x1b730790  PostPhotoViewController Release 1   00:20.845.429   0   UIKit   -[UINavigationController navigationTransitionView:didEndTransition:fromView:toView:]
96  0x1b730790  PostPhotoViewController Release 0   00:20.845.437   0   UIKit   -[UINavigationController navigationTransitionView:didEndTransition:fromView:toView:]
97  0x1b730790  PostPhotoViewController Zombie  -1  00:23.145.572   0   UIKit   -[UITabBarController _tabBarItemClicked:] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T00:55:40.300

由于某种原因，PostPhotoViewController 被设置为 UITabBarController 委托。删除固定的东西。

# macos - 如何在终端的 groovy 脚本上导入我的 intellij 项目设置

> ID：14927679
> 
> 赞同：0
> 
> 时间：2013-02-18T00:10:57.873
> 
> 标签：macos, groovy, intellij-idea, terminal

我在 intellij 的一个项目中有一个脚本，我想在我的 mac 终端中运行。我可以运行该脚本，但出现错误，它找不到我作为模块添加的 JAR 文件。有很多依赖项，所以我想知道如何将我的 intellij 项目设置添加到调用我的 groovy 脚本。现在我只有这个：

```
groovy CreateReport.groovy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:46:18.123

事实证明，您需要做的就是将您的库转储到 GROOVY_HOME/lib 目录中，其中 GROOVY_HOME 是您定义 groovy 环境变量的位置。

[http://dustinwhitney.blogspot.com/2008/03/groovy-classpath.html](http://dustinwhitney.blogspot.com/2008/03/groovy-classpath.html)

# c# - MySQL 实体框架 Group 和 Select By Date

> ID：14927680
> 
> 赞同：4
> 
> 时间：2013-02-18T00:10:57.563
> 
> 标签：c#, mysql, linq, entity-framework, mysql-connector

我有一个带有“Clicks”表的 MySQL 数据库。有一个“已创建”列（日期时间），我想对其进行分组并选择年、月和日部分。我想计算特定日期范围（startDate 和 endDate）内每天的记录。

```
var query = from c in scope.Entities.Clicks  
                where c.Created >= startDate && c.Created <= endDate  
                group c by new {c.Created.Year, c.Created.Month, c.Created.Day}  
                into grouped     
                select new  {  
                                Year = grouped.Key.Year,  
                                Month = grouped.Key.Month,  
                                Day = grouped.Key.Day,  
                                Clicks = grouped.Count()  
                            }; 
```

这会产生一个错误的查询：

```
SELECT
`GroupBy1`.`K1` AS `C1`,  
`GroupBy1`.`K2` AS `C2`,  
`GroupBy1`.`K3` AS `C3`,  
`GroupBy1`.`K4` AS `C4`,  
`GroupBy1`.`A1` AS `C5` 
FROM (SELECT  
COUNT(1) AS `A1`  
FROM `Click` AS `Extent1`  
 WHERE (`Extent1`.`Created` >= @p__linq__0) AND (`Extent1`.`Created` <= @p__linq__1)  
 GROUP BY   
1,   
YEAR(`Extent1`.`Created`),   
MONTH(`Extent1`.`Created`),   
DAY(`Extent1`.`Created`)) AS `GroupBy1` 
```

出现错误：MySql.Data.MySqlClient.MySqlException: Can't group on 'A1'

我做错了什么？或者这是一个 MySql 连接器错误？我尝试了 MySQL 连接器 6.5.4 和 6.6.5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T00:01:29.020

DJ KRAZE 我尝试了你的方法，结果证明必须使用双重“选择”才能通过 EF 生成正确的查询。谢谢！如果有人需要，我会在此处发布完整答案。

我测试了两种方式并且都有效：

```
 var subQuery = from c in scope.Entities.Clicks
                   where c.Created >= startDate && c.Created <= endDate
                   select new { c.Created.Year, c.Created.Month, c.Created.Day };

    var query = from c in subQuery
                group c by new {c.Year, c.Month, c.Day}
                into grouped
                select new {
                             Year = grouped.Key.Year,
                             Month = grouped.Key.Month,
                             Day = grouped.Key.Day,
                             Clicks = grouped.Count()
                           }; 
```

和

```
var query = scope.Entities.Clicks.Where(c => c.Created >= startDate && c.Created <= endDate)
      .Select(c => new { c.Created.Year, c.Created.Month, c.Created.Day})
      .GroupBy(c => new {c.Year, c.Month, c.Day})
      .Select(grouped => new { Clicks = grouped.Count(), grouped.Key.Year, grouped.Key.Month, grouped.Key.Day}); 
```

这些给出了正确的mysql查询：

```
SELECT
1 AS `C1`, 
`GroupBy1`.`K1` AS `C2`, 
`GroupBy1`.`K2` AS `C3`, 
`GroupBy1`.`K3` AS `C4`, 
`GroupBy1`.`A1` AS `C5`
FROM (SELECT
`Project1`.`C1` AS `K1`, 
`Project1`.`C2` AS `K2`, 
`Project1`.`C3` AS `K3`, 
COUNT(1) AS `A1`
FROM (SELECT
YEAR(`Extent1`.`Created`) AS `C1`, 
MONTH(`Extent1`.`Created`) AS `C2`, 
DAY(`Extent1`.`Created`) AS `C3`
FROM `Click` AS `Extent1`
 WHERE (`Extent1`.`Created` >= @p__linq__0) AND (`Extent1`.`Created` <= @p__linq__1)) AS `Project1`
 GROUP BY 
 `Project1`.`C1`, 
 `Project1`.`C2`, 
 `Project1`.`C3`) AS `GroupBy1` 
```

（我仍然认为这是一个错误，我的第一个查询应该也可以正常工作）

# javascript - 如何排列 HTML 元素，如 NCAA 括号

> ID：14927681
> 
> 赞同：-1
> 
> 时间：2013-02-18T00:11:11.043
> 
> 标签：javascript, html, css

我正在尝试编写一个 NCAA 括号提交应用程序，但我无法弄清楚如何将 HTML 元素排列成这样的括号[形状](https://encrypted-tbn1.gstatic.com/images?q=tbn%3aANd9GcTob4rvfQnonqlh29fOmvGRJ67Pwd5v31an35JCVzbpH5i2YjXk)。我想使用 Bootstrap 来保持 UI 看起来干净，但我并不依赖它。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:25:48.067

[在这里](http://www.jimyi.com/blog/2009/04/09/html-tournament-brackets/)可以找到使用 div 的很棒的 HTML/CSS 括号示例。[或者，可以在此处找到](http://www.nbaplayoffsbracket.com/2013/)使用无序列表的两侧 HTML/CSS 括号的一个很好的示例。查看源代码并找出最适合您的方法。

我认为更好的方法是为每个单元格使用`table`带有特定 CSS的 HTML。`border`我在下面创建了一个粗略的示例。但是您可能想自己尝试一下，查看链接，看看什么最适合您的应用程序。祝你好运！

HTML：

```
<table>
    <tr>
        <td><p>1\. Team Name</p></td>
        <td rowspan="2"><p>Team Name</p></td>
        <td rowspan="4"><p>Team Name</p></td>
    </tr>
    <tr>
        <td style="border-right:1px solid black"><p>4\. Team Name</p></td>
    </tr>
    <tr>
        <td ><p>2\. Team Name</p></td>
        <td rowspan="2"><p>Team Name</p></td>
    </tr>
    <tr>
        <td style="border-right:1px solid black"><p>3\. Team Name</p></td>
    </tr>
</table> 
```

CSS：

```
table {
  border-collapse: collapse;
  border: none;
}

td {
  vertical-align: middle;
  width: 10em;
  margin: 0;
  padding: 0;
}

td p {
  border-bottom: solid 1px black;
  margin: 0;
  padding: 5px 5px 2px 5px;
} 
```

[JS 小提琴示例](http://jsfiddle.net/3xCjb/)

# jquery - 覆盖属性 CSS3 Jquery Mobile

> ID：14927684
> 
> 赞同：0
> 
> 时间：2013-02-18T00:11:21.273
> 
> 标签：jquery, css, jquery-mobile, responsive-design

您好，我正在尝试覆盖输入中的属性，因为我正在创建一个 Web 站点，并且我需要普通 pc 的设计（Web 响应式）。例如 nex 登录表单：

```
<!DOCTYPE html> 
<html> 
<head> 
<title>Example </title> 
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"> 

<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<link rel="stylesheet" href="resouce/css/loggin.css" />

</head> 
<body> 

<div data-role="page">

<div data-role="header">
    <h1>Loggin</h1>
</div><!-- /header -->

<div id="formulario">
    <form method="POST" action="" data-ajax="false">
        <label for="usuarioLogin">Username:</label><br>
        <input type="text" name="usuarioLogin" id="usuarioLogin" /><br>
        <label for="passwordLogin">Password:</label><br>
        <input type="password" name="passwordLogin" id="passwordLogin" /><br>
        <button id="ingresarLogin" type="submit" data-theme="a">Ingresar</button>
    </form>
</div>

</div><!-- /page -->

</body>
</html> 
```

loggin.css*包含*覆盖 css 代码，它是代码：

```
@media all and (max-width: 1280px)
{
.ui-input-text ui-body-c ui-corner-all ui-shadow-inset
    {
       width:300px;
    }
} 
```

如何覆盖输入文本的宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T00:12:47.253

`!important`您可以使用标志覆盖 CSS 属性一次：

```
.ui-input-text
{
    width: 200px !important;
} 
```

# linux - 意外标记“}”附近的语法错误

> ID：14927688
> 
> 赞同：0
> 
> 时间：2013-02-18T00:11:31.260
> 
> 标签：linux, bash

我如何确定我的 bash 到底有什么问题？我不时运行脚本并收到以下错误：

```
download.sh: line 254: syntax error near unexpected token `}'
download.sh: line 254: `}' 
```

但第 254 行没有“}”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:13:00.683

您可以将 set -x 放在 bash 的第二行并再次运行它。

```
#!/bin/bash
set -x

......
......
...... 
```

# c# - 关于 C# 闭包的另一个问题

> ID：14927689
> 
> 赞同：0
> 
> 时间：2013-02-18T00:11:51.513
> 
> 标签：c#, closures

我知道很多关于 C# 闭包的问题已经提出、回答或讨论过。但是请在我的小实验上花点时间......

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Timers;

namespace ConsoleApplication1
{
  class Program
  {
    static void Main(string[] args)
    {
      using (var timer = new Timer(500))
      {
        timer.AutoReset = false;

        GetFunc2(timer, 0);
        // GetFunc3(timer, 0);

        timer.Start();

        Console.ReadLine();
      }
    }

    static void GetFunc2(Timer timer, int i)
    {
      for (; i < 5; ++i)
      {
        timer.Elapsed += (obj, e) =>
          {
            Console.WriteLine(i);
          };
      }
    }

    static void GetFunc3(Timer timer, int i)
    {
      timer.Elapsed += (obj, e) =>
      {
        Console.WriteLine(i++);
      };

      timer.Elapsed += (obj, e) =>
      {
        Console.WriteLine(i++);
      };

      timer.Elapsed += (obj, e) =>
      {
        Console.WriteLine(i++);
      };

      timer.Elapsed += (obj, e) =>
      {
        Console.WriteLine(i++);
      };

      timer.Elapsed += (obj, e) =>
      {
        Console.WriteLine(i++);
      };
    }
  }
} 
```

通过单独调用`GetFunc2`和`GetFunc3`，`Main`我们可以看到输出是不同的，虽然`GetFun3`看起来只是 . 的简单扩展`GetFunc2`。有谁知道为什么？我认为 ildasm 可以揭示不同的生成代码，但我确实想知道为什么。在 VS2012 Pro、.net 4.5 上测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T00:17:01.327

这被覆盖的次数是压倒性的。

我将不再讨论讨论，但请看 Eric Lippert 的回答和其他人：

[https://stackoverflow.com/a/8899347/1517578](https://stackoverflow.com/a/8899347/1517578)

对这些答案的评论也很有趣。

此外，Eric 的博客文章的链接在这里：http: [//blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)

基本上，您需要将关闭的变量复制到局部变量中：

```
static void GetFunc2(Timer timer, int i)
{
  for (; i < 5; ++i)
  {
    int i2 = i; // STORE IT
    timer.Elapsed += (obj, e) =>
      {
        Console.WriteLine(i2); // USE THE NEWLY STORED VERSION
      };
  }
} 
```

这导致：

```
0
1
2
3
4 
```

..正如预期的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T00:29:16.860

如果`GetFunc2`你在调用（执行）匿名方法之前递增`i`，因此当你调用你看到的方法时，它`i`已经递增了。

如果`GetFunc3`您在调用每个匿名方法之前不递增`i`，因此它从零开始并随着每次调用而不断递增。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T00:23:50.457

AFAIK 闭包始终包含对“父”方法的局部变量的**引用。**所以不同之处在于您在实际调用 GetFunc2 中的这些函数之前增加了值。所以在调用的时候，已经有 5 的值了。在 GetFunc3 中，您在引发事件时递增该值，因此它会计数。

# php - 这个 PHP 错误是什么意思？调用未定义的函数 addSlashesIfNeeded()

> ID：14927692
> 
> 赞同：0
> 
> 时间：2013-02-18T00:12:05.407
> 
> 标签：php

收到此错误：

致命错误：在第 0 行调用** * 中未定义的函数 addSlashesIfNeeded()*

有人能告诉我这个错误是什么意思吗？并可能是一个解决方案？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T00:13:28.093

看起来您的代码调用了一个名为的自定义函数`addSlashesIfNeeded()`，而您的代码由于某种原因不包括在内。您需要找到定义该函数的文件并将其包含在尝试调用它的页面中。

# java - 可变输出 Mockito 模拟

> ID：14927702
> 
> 赞同：3
> 
> 时间：2013-02-18T00:13:59.883
> 
> 标签：java, unit-testing, mocking, mockito

我有`WidgetProcessor`一个依赖于另一个类的类，`FizzChecker`：

```
public class FizzChecker {
    public boolean hasMoreBuzz() {
        // Sometimes returns true, sometimes returns false.
    }
} 
```

这个`hasMoreBuzz()`方法是从内部调用的，`WidgetProcessor`如下所示：

```
public class WidgetProcessor {
    public int process() {
        while(fizzChecker.hasMoreBuzz()) {
            // ... process stuff in here
        }
    }
} 
```

我想为以下情况编写测试用例：

*   `fizzChecker.hasMoreBuzz()`第一次调用它时返回 false （因此循环永远不会执行）
*   `fizzChecker.hasMoreBuzz()`第 5 次调用时返回 false

我正在尝试弄清楚如何使用 Mockito 来实现这一点。到目前为止，我最好的（可怕的）尝试：

```
WidgetProcessor fixture = new WidgetProcessor();
FizzChecker mockFizzChecker = Mockito.mock(FizzChecker.class);

// This works great for the first test case, but what about the 2nd
// where I need it to return: true, true, true, true, false?
Mockito.when(mockFizzChecker).hasMoreBuzz().thenReturn(false);

fixture.setFizzChecker(mockFizzCheck);

fixture.process();

// Assert omitted for brevity 
```

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T02:24:29.657

您可以[将多个值传递给`thenReturn`，或继续链接](http://javadoc.io/page/org.mockito/mockito-core/latest/org/mockito/Mockito.html#10)。对存根方法的连续调用将按顺序返回操作，对所有调用重复最终操作。例子：

```
// will return true four times, and then false for all calls afterwards
when(mockFizzChecker.hasMoreBuzz()).thenReturn(true, true, true, true, false);
when(mockFizzChecker.hasMoreBuzz())
    .thenReturn(true)
    .thenReturn(true)
    .thenReturn(true)
    .thenReturn(true)
    .thenReturn(false);
// you can also switch actions like this:
when(someOtherMock.someMethodCall())
    .thenReturn(1, 2)
    .thenThrow(new RuntimeException()); 
```

您可能需要单独设置它们：

```
public class WidgetProcessorTest {
  private WidgetProcessor processor;
  private FizzChecker mockFizzChecker;

  @Before public void setUp() {
    processor = new WidgetProcessor();
    mockFizzChecker = Mockito.mock(FizzChecker.class);
    processor.setFizzChecker(mockFizzChecker);
  }

  @Test public void neverHasBuzz() {
    when(mockFizzChecker.hasMoreBuzz()).thenReturn(false);
    processor.process();
    // asserts
  }

  @Test public void hasFiveBuzzes() {
    when(mockFizzChecker.hasMoreBuzz())
        .thenReturn(true, true, true, true, false);
    processor.process();
    // asserts
  }
} 
```

最后一点：实际上，您可能会发现您需要协调多个调用（例如`hasMoreBuzz`and `getNextBuzz`）。如果它开始变得复杂，并且您预见到要在很多测试中编写它，请考虑跳过 Mockito 而只是[实现一个`FakeFizzChecker`](http://martinfowler.com/articles/mocksArentStubs.html#TheDifferenceBetweenMocksAndStubs).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T00:27:25.567

尝试使用[Answers](http://mockito.googlecode.com/svn/branches/1.7/javadoc/org/mockito/stubbing/Answer.html)。这将允许您在调用 hasMoreBuzz() 方法时执行代码。

查看上面提供的链接中的示例。如果您创建一个 Answer 对象，并实现 answer() 方法来保留一个计数器，您可以根据该计数器的值采取行动。

编辑：我写了一个快速测试程序来验证这一点。这里是：

```
package com.ejk;
import org.junit.Test;
import org.mockito.invocation.InvocationOnMock;
import org.mockito.stubbing.Answer;
import static org.mockito.Mockito.when;
import static org.mockito.Mockito.mock;

public class SO {
    @Test
    public void testIt() {          
        IFoo mock = mock(IFoo.class);
        MyAnswer myAnswer = new MyAnswer();
        when(mock.doFoo()).then(myAnswer);
        for (int i=1; i<10; i++) {
            System.out.println(i+ ") " + mock.doFoo());
        }
    }
    class MyAnswer implements Answer<Boolean> {
        int counter = 1;
        @Override
        public Boolean answer(InvocationOnMock invocation) throws Throwable {
            return (counter++ == 5) ? Boolean.FALSE : Boolean.TRUE;
        }

    }
    interface IFoo {
        boolean doFoo();
    }
} 
```

# javascript - 如何以一种好的方式修改大量元素的属性？

> ID：14927706
> 
> 赞同：1
> 
> 时间：2013-02-18T00:14:41.100
> 
> 标签：javascript, jquery, html

我有一个大表，目前由 95x120=11400 个 TD 组成，并且想动态编辑来自某个行或列，甚至是一堆行/列的所有单元格的高度和背景颜色等属性。我想这样做是为了让用户能够调整行/列的大小等。什么是完成这项工作的好方法？

顺便说一句，我表中的所有 TD 都具有唯一的行/列类，例如在通过 Javascript 构建表时动态添加的 row1、row2、row3、col1、col2、col3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T06:28:33.867

这可以通过动态修改 css-rules 来非常有效地完成。在规则中存储常用属性（即一行单元格的高度）而不是将其全部存储在每个元素中也更有意义。而且它占用的内存也更少。

使用如下表格布局：

```
<table>
    <tr>
        <td class="row1 col1">data</td>
        <td class="row2 col2">data</td>
        <td class="row3 col3">data</td>
    </tr>
    <tr>
        <td class="row1 col1">data</td>
        <td class="row2 col2">data</td>
        <td class="row3 col3">data</td>
    </tr>
    <tr>
        <td class="row1 col1">data</td>
        <td class="row2 col2">data</td>
        <td class="row3 col3">data</td>
    </tr>
</table> 
```

我们可以这样做：

```
var numRows=3, numCols=3;
document.getElementsByTagName('head')[0].appendChild(document.createElement('style'));
var sheet=document.styleSheets[1];
//Or instead of creating a new sheet we could just get the first exisiting one like this:
//var sheet=document.styleSheets[0]; 
var selector, rule, i, rowStyles=[], colStyles=[];
//Create rules dynamically
for (i=0; i<numRows; i++) {
        selector=".row"+i;
        rule="{height:20px}";
        if (sheet.insertRule)
            sheet.insertRule(selector+rule, 0);//This puts the rule at index 0
        else
            sheet.addRule(selector2, rule2, 0);//IE does things differently
        rowStyles[i]=(sheet.rules||sheet.cssRules)[0].style;//Remember you have to fetch the rules-array from the sheet and not hold on to the old rules-array, since a new one is created during each insertion. Oh, and IE does things differently again; cssRules instead of rules
}
for (i=0; i<numCols; i++) {
        selector=".col"+i;
        rule="{background-color:white}";
        if (sheet.insertRule)
            sheet.insertRule(selector+rule, 0);
        else
            sheet.addRule(selector2, rule2, 0);
        colStyles[i]=(sheet.rules||sheet.cssRules)[0].style;
}

//Now they can be changed real easy and efficiently like this:
//This line changes the height for the second row, simply by modifying their css-rule, not setting a style-height on each element
rowStyles[1].height="50px";
//It is also really easy to adjust properties of rules added from css-file, just iterate through the rules/cssRules-array checking the selectorText-property of each object until the right one is found. 
```

我做了一些基准测试，除非我在某个地方出错，否则差异是非常巨大的。但是，是的，除了基准测试之外，它在实际用例中确实有巨大的显着差异。

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title></title>

        <style>
      td {
      border: 1px solid black;
      width: 10px;
      height: 10px;
      }
    </style>
        <script src="http://code.jquery.com/jquery-latest.min.js " charset="UTF-8"></script>
    </head>
    <body>
        <table id="table">
            <tr id="row">
            </tr>
        </table>
            <script type="text/javascript">
            var tr=document.getElementById("row");
            for (var i=0; i<300; i++) {
                var cell=tr.insertCell(0);
                cell.className="cell";
            }

            var sheet=document.styleSheets[0];
            var c2=(sheet.rules||sheet.cssRules)[0].style;
            var table=document.getElementById("table");
            var startTime;

        //First loop
        startTime=new Date().getTime();
        var c1=$(".cell");
        for (var i=0; i<1000; i++) {
            c1.height(i);
        }
        var time1=new Date().getTime()-startTime;
        //Second loop
        startTime=new Date().getTime();
        c1=$(".cell");
        for (var i=0; i<1000; i++) {
            c1.css("height",i);
        }
        time2=new Date().getTime()-startTime;
        //Third loop
        startTime=new Date().getTime();
        c1=$(".cell");
        document.body.removeChild(table);
        for (var i=0; i<1000; i++) {
            c1.css("height",i);
        }
        document.body.appendChild(table);
        time3=new Date().getTime()-startTime;
        //Fourth loop
        startTime=new Date().getTime();
        for (var i=0; i<1000; i++) {
            c2.height=i+"px";
        }
        var time4=new Date().getTime()-startTime;

        alert ("First:"+time1+" ms\nSecond:"+time2+" ms\nThird:"+time3+" ms\nForth:"+time4+" ms");
        </script>    
    </body>
</html> 
```

由于某种原因，由此产生的结果会产生误导吗？在那种情况下，我不太清楚我哪里出错了，所以我很感激反馈。这些是我得到的结果。

**完成时间：**

循环 1：这个使用一个简单的 jquery 类选择器 $(".cell").height(h);

*   铬 - 2335 毫秒
*   歌剧 - 4151 毫秒
*   IE 9 - 3965 毫秒
*   火狐 - 6252 毫秒
*   Safari - 2987 毫秒

循环 2：这与上面的相同，但使用 $(".cell").css("height",h) 代替。它更快

*   铬 - 1276 毫秒
*   歌剧 - 3183 毫秒
*   IE 9 - 2174 毫秒
*   火狐 - 3685 毫秒
*   Safari - 2240 毫秒

循环 3：与上面相同，但它在修改之前从 DOM 中删除表，然后重新附加它。至少在 Firefox 中看起来更快

*   铬 - 1259 毫秒
*   歌剧 - 3079 毫秒
*   IE 9 - 2221 毫秒
*   火狐 - 2872 毫秒
*   Safari - 2250 毫秒

循环 4：这个动态修改 css 规则：

*   铬 - 1 毫秒
*   歌剧 - 10 毫秒
*   IE 9 - 7 毫秒
*   火狐 - 2 毫秒
*   Safari - 13 毫秒

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T00:21:31.357

在对如此庞大的结构进行更改时，最好先将其从文档中删除，以便在您重新插入时才重新处理它。

因此，假设您的表位于名为 的变量中`table`，您可以这样做：

```
var prnt = table.parentNode, nxtsbl = table.nextSibling;
prnt.removeChild(table);
// now do all your modifications, such as looping through rows etc.
prnt.insertBefore(table,nxtsbl); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T07:07:56.300

您还可以执行 table.rows[0] ，它给出该行中所有 TD 的数组。然后遍历它并根据需要进行更改

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T00:23:25.747

如果您的所有单元格都标有适当的类，则非常简单。

假设您要更改某列的宽度。

```
$(".col3").width(newWidth); 
```

或者，如果您想更改一堆列的宽度。

```
$(".col3,.col5").width(newWidth); 
```

同样与

```
$(".row3,.row5,.row9,.row12").height(newHeight); 
```

或者如果你想改变背景颜色

```
$(".col3").css("background-color","#ff0000"); 
```

# active-directory - 如何在 CMD 中查找没有用户名的用户全名？

> ID：14927707
> 
> 赞同：3
> 
> 时间：2013-02-18T00:14:41.413
> 
> 标签：active-directory, command, cmd

我试过这个，`net user /domain | find "user1"`它只找到用户名。

如何按属性全名进行搜索？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T10:50:31.703

如果您想按全名搜索，请使用`dsquery`而不是。不适合这种查询：`net user``net user`

```
dsquery user -name "joe average" 
```

该命令是[远程服务器管理工​​具](http://www.microsoft.com/en-us/download/details.aspx?id=7887)(RSAT) 的一部分。

如果您已经拥有用户名并想获取有关该用户的更多信息，您可以直接使用该用户名`net user`：

```
net user user1 /domain 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-06T23:35:40.977

网络用户“%USERNAME%”/域 | FIND /I "全名"

# java - 从单独的类访问内部类

> ID：14927709
> 
> 赞同：-1
> 
> 时间：2013-02-18T00:14:49.467
> 
> 标签：java

我正在研究双端队列的实现。我有一个 Deque 类，它有一个内部类 Node 来表示列表中的项目。我在 Deque 中声明该类（本身是一个公共类），如下所示：

```
public class Node(){
//
} 
```

现在，在 Deque 类本身中使用基本对象创建语法创建新节点很简单：

```
Node newNode = newNode(arg1); 
```

但是，我希望能够从一个单独的类（提供单元测试的 DequeTest 类）声明新节点。当我尝试使用上述语法创建一个新节点时，我收到一条错误消息，指出节点类不可见。我正在开发一个预定义的 API，所以我无法创建任何新的公共方法。返回一个新节点的私有 createNode() 方法会是最优的吗？即使这样似乎也行不通，因为当我使用 Node 关键字时编译器会抛出错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T00:21:03.200

不可能。这就是创建内部类的全部意义：它只适用于父类。你为什么想要？如果您在`Node`其他地方使用它，它首先不应该是内部类，因为它不属于任何一个类。您可能会考虑创建一个公共 Node 类，然后从`Node`.
请参阅：[此处](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)获取 API 文档。

# c++ - 包含目录旁边的锁是什么意思？

> ID：14927711
> 
> 赞同：1
> 
> 时间：2013-02-18T00:14:59.470
> 
> 标签：c++, netbeans

我正在使用 Netbeans 7.2.1 for Ubuntu Quantal Quetzal 来编程 C++。不幸的是，即使在我将 C++ 版本指定为 C++11 然后重新解析我的代码之后，它的代码帮助也无法识别 C++11 的功能。

我的代码依赖于 C++11 功能，例如`unordered_map`编译和运行都很好。

因此，我假设我可能不会告诉代码帮助为各种标题寻找正确的目录。因此，我转到工具 -> 选项 -> c/C++ 并在“包含目录”部分添加了更多目录（对于 4.7.2）：

![在此处输入图像描述](../Images/f6fc1e1fb4729f5de7c997167b0eed5f.png)

奇怪的是，我刚刚添加的目录旁边是小键。这些小钥匙是什么意思？

仅供参考，代码帮助仍然无法识别 C++11 功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:29:50.367

它们几乎肯定是编译器内置的包含路径。代码助手需要了解它们，否则它将错过理解其他标头和完成所需的重要信息，但由于它们内置于编译器中，用户无法更改它们，因此它们旁边有一个键以显示它们无法更改

然而，这是一个有根据的猜测，基于我在*其他*C++ IDE 中的工作以及编译器如何处理这些东西的知识

假设您使用的是 gcc，您可以找到内置包含目录的列表`echo | g++ -Wp,-v -x c++ - -fsyntax-only`并检查它们是否匹配。

# sql - 根据其他表中的外观限制结果的 SQL 查询

> ID：14927715
> 
> 赞同：0
> 
> 时间：2013-02-18T00:15:58.320
> 
> 标签：sql

我是 SQL 新手，但需要为必须与数据库交互的 Java 程序编写一些 SQL 语句。我们的 Java 教科书只涵盖了非常基本的 SQL 命令，而且我很难获得更高级（按照我的标准）的命令来工作。

情况如下：

数据库有 5 个表。

```
Teacher: TeacherID (PK), LastName
Class: ClassID (PK), Description
Room: Building, Room Number, PK is the combo of those two
TeachingAssignments: TeacherID(FK), ClassID(FK)
ClassRoomAssignments: ClassID(FK), Building, Room Number(combo is FK) 
```

我只需要提供`LastName, ClassID, and Building`那些完全分配的教师、班级和房间。即，如果一个班级同时有老师和房间分配，那么我需要提供该班级的 ID、分配的老师的姓氏和分配的建筑物。

我不知道如何进行。

我一直在玩弄以下语句，但它们对我不起作用：

```
SELECT Teacher.LastName, Class.ClassID, Room.Building 
FROM Teacher, Class, Room, TeachingAssignments, ClassRoomAssignments 
WHERE Teacher.TeacherID = TeachingAssignments.TeacherID 
    AND Room.Building = ClassRoomAssignments.Building
    AND Class.ClassID = TeachingAssignments.ClassID
    AND Class.ClassID = ClassRoomAssignments.ClassID 
```

任何人都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:52:36.547

您的问题是您需要为您的表添加相应的连接。

而不是这样做：

```
SELECT Teacher.LastName, Class.ClassID, Room.Building 
FROM Teacher, Class, Room, TeachingAssignments, ClassRoomAssignments 
WHERE Teacher.TeacherID = TeachingAssignments.TeacherID 
AND Room.Building = ClassRoomAssignments.Building 
AND Class.ClassID = TeachingAssignments.ClassID 
AND Class.ClassID = ClassRoomAssignments.ClassID 
```

你需要这样的东西

```
SELECT Teacher.LastName, Class.ClassID, Room.Building 
FROM 
Teacher INNER JOIN TeachingAssignments
  ON Teacher.TeacherID = TeachingAssignments.TeacherID 
INNER JOIN Class
  ON Class.ClassID = TeachingAssignments.ClassID
INNER JOIN ClassRoomAssignments
  ON Class.ClassID = ClassRoomAssignments.ClassID
INNER JOIN Room
  ON Room.Building = ClassRoomAssignments.Building 
```

正如您所看到的，每个 INNER Join 后面都跟着相应的 ON 子句，该子句负责设计要连接的元素。

# matlab - 如何在matlab图中获得垂直渐变填充

> ID：14927716
> 
> 赞同：0
> 
> 时间：2013-02-18T00:16:01.743
> 
> 标签：matlab, gradient, patch

我有一个要绘制的函数 y=x^2 ，我想用沿 y 方向从黑色到红色的渐变色填充这条曲线所界定的区域。我在网上找到了颜色

```
x = linspace(-3, 3, 20)';
f = x.^2;
M = f.^2;

N = length(x);
verts = [x(:), f(:)-max(f); x(:) zeros(N,1)];

q = (1:N-1)';
faces = [q, q+1, q+N+1, q+N];
p = patch('Faces', faces, 'Vertices', verts, 'FaceVertexCData', [M(:); M(:)], 'FaceColor', 'interp', 'EdgeColor', 'none') 
```

这段代码向我展示了与曲线绑定到 xaxis 的区域，例如

![在此处输入图像描述](../Images/63a0c40e60904db78f6057a11503b759.png)

但我要填充的是白色区域。所以我修改代码如下

```
x = linspace(-3, 3, 20)';
f = x.^2;
M = f.^2;

N = length(x);
verts = [x(:), f(:)-max(f); x(:) zeros(N,1)];

q = (1:N-1)';
faces = [q, q+1, q+N+1, q+N];
p = patch('Faces', faces, 'Vertices', verts, 'FaceVertexCData', [M(:); M(:)], 'FaceColor', 'interp', 'EdgeColor', 'none') 
```

这给了我类似以下的东西 ![在此处输入图像描述](../Images/f613180e086277bd4b0e5e9f7614f081.png)

它填补了正确的区域，但有两个问题：

1.  整个图像向负 y 轴移动 9 个单位
2.  渐变颜色从左到右填充，但我希望它从下到上（垂直）填充
3.  颜色图未定义为黑色到红色（我可以手动更改）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T03:54:23.093

垂直移动是因为这条线而发生的

```
verts = [x(:), f(:)-max(f); x(:) zeros(N,1)]; 
```

哪里`f(:) - max(f)`总是 <=0 。我认为你只需要使用`f(:)`来解决这个问题。

至于阴影的方向，由于您将补丁定义为垂直条，它们将被着色为垂直条。如果你想要水平着色，你需要定义水平面片。你能弄清楚吗，或者你需要帮助吗？

编辑-此代码可以满足您的要求：

```
figure;
x=linspace(-3, 3, 200);
f = x.^2;
plot(x, f, 'r'); hold on % you could leave this line out... then there is no curve
N = numel(x);
for ii = ceil(N/2):N-1
    ix = [ii ii+1 N-ii N-ii+1];
    disp(ix)
    patch(x(ix), f(ix), f(ii)*256/max(f(:)),'edgecolor', 'none');
end 
```

这是输出： ![着色示例](../Images/b41d15c7202bee5fabe69c2dbd86af38.png)

还有一个问题 - 您将颜色 M 定义为 f.^2 - 这不是一轮平方太多吗？我认为您的意思是 x.^2 （或只是 F）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T04:05:11.930

有一种可能更简单的方法来实现*几乎*相同的事情......如下绘制图片：

```
cplot = repmat(1:256, [256 1])';    % create a 256 square horizontal gradient
xv = linspace(-3, 3, 256);          % range of x values
yv = linspace(0, 9, 256);           % range of y values
cplot(repmat(xv.^2, [256 1])>repmat(yv', [1 256]))=255; % set area below the curve to white
figure
imagesc(xv, yv, cplot); 
```

现在您所要做的就是修复色标...您希望颜色`255`为白色...

# c++ - 未定义对 `typeinfo 和 'vtable 的引用

> ID：14927717
> 
> 赞同：2
> 
> 时间：2013-02-18T00:16:09.523
> 
> 标签：c++, g++, undefined, vtable, typeinfo

我目前正在开发一个使用虚拟功能用户的程序。我只使用一个虚拟功能，并且遇到了一个常见的问题，我尝试了一个常见的解决方案，但不幸的是没有成功。

我最初有 virtual void calcArea(); 在 BasicShape.h 中没有任何定义或指定为纯虚函数。我更改了它并在最后添加了 {} （正如在另一个有类似问题的线程上所建议的那样），但我仍然收到以下错误：

我输入：

```
g++ BasicShape.h BasicShape.cpp circle.h circle.cpp Rectangle.h Rectangle.cpp driver.cpp -o Lab4 
```

然后我得到：

```
/tmp/ccf1Y4Br.o: In function `BasicShape::BasicShape()': circle.cpp:(.text._ZN10BasicShapeC2Ev[_ZN10BasicShapeC5Ev]+0xf): undefined reference to `vtable for BasicShape'
/tmp/ccf1Y4Br.o:(.rodata._ZTI6circle[_ZTI6circle]+0x10): undefined reference to `typeinfo for BasicShape'
/tmp/ccc7gjtH.o:(.rodata._ZTI9Rectangle[_ZTI9Rectangle]+0x10): undefined reference to `typeinfo for BasicShape'
collect2: error: ld returned 1 exit status 
```

有任何想法吗？

这是实现文件 BasicShape.h：

```
#ifndef BASICSHAPE_H
#define BASICSHAPE_H

class BasicShape 
{
  protected: 
    double area;

  public:
    double getArea() const;
     virtual void calcArea();
};

#endif 
```

随附的 BasicShape.cpp 文件：

```
#include "BasicShape.h"

double BasicShape::getArea() const
{
  return area;
}

void BasicShape::calcArea()
{
} 
```

圈子.h：

```
#include "BasicShape.h"

#ifndef CIRCLE_H
#define CIRCLE_H

class circle : public BasicShape
{
  private:
    long centerX;
    long centerY;
    double radius;

  public:
    circle(long, long, double);
    long getCenterX() const;
    long getCenterY() const;
    virtual void calcArea();
};

#endif 
```

圈子.cpp：

```
#include "circle.h"

// constructor
circle::circle(long userIn, long userIn2, double userIn3)
{
  centerX = userIn;
  centerY = userIn2;
  radius = userIn3;
  calcArea();
}

// accesors
long circle::getCenterX() const
{
  return centerX;
}

long circle::getCenterY() const
{
  return centerY;
}

// virtual function
void circle::calcArea()
{
  area = (3.14159 * radius * radius);
} 
```

矩形.h

```
#include "BasicShape.h"

#ifndef RECTANGLE_H
#define RECTANGLE_H

class Rectangle : public BasicShape
{
  private:
    long width;
    long length;

  public:
    Rectangle(long, long);
    long getWidth() const;
    long getLength() const;
    virtual void calcArea();
};

#endif 
```

矩形.cpp：

```
#include "Rectangle.h"

// constructor
Rectangle::Rectangle(long userIn, long userIn2)
{
  width = userIn;
  length = userIn2;
  calcArea();
}

// accessors
long Rectangle::getWidth() const
{
  return width;
}

long Rectangle::getLength() const
{
  return length;
}

void Rectangle::calcArea()
{
  area = (length * width);
} 
```

驱动程序不完整，但无论如何与我的问题无关（至少我是这么认为的）。

```
#include <cassert>
#include <iostream>
#include "BasicShape.h"
#include "Rectangle.h"
#include "circle.h"
using namespace std;

int main()
{

  cout << "Testing the functionality and efficiency of the circle class...\n";
  // declare circle object and test accessors and area computation
  circle objCircle(8,8,4);
  assert(objCircle.getCenterX() == 8);
  assert(objCircle.getCenterY() == 8);
  assert(objCircle.getArea() == 50.26544);
  cout << "Circle object testing completed successfully\n";

  cout << "Testing the functionality and efficiency of the Rectangle class...\n";
  // declare rectangle object and test accessors and area computation  
  //Rectangle objRec();

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T00:35:21.927

实际上，正如它所指出的，您不必编译标头。（虽然可以，但这无关紧要 --- gcc 将生成预编译的头文件）。

更有趣的是：您的示例在这里完美运行，GCC 4.6.3。

另外，旁注： calcArea 不应该是公开的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T00:20:27.013

您不应该尝试编译标头：

> g++ BasicShape.cpp circle.cpp Rectangle.cpp driver.cpp -o Lab4

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T00:45:44.103

您的编译器至少需要一个翻译单元，其中在每个多态类的类定义之外定义了一个虚拟成员。只有存在这样的翻译单元，它才会实例化类的一些内部数据（虚函数表、多态类型信息）。

（免责声明：至少在很久以前我上次使用它时就是这种情况）

您可以为函数使用类外定义，`BasicShape::calcArea`也可以添加一个虚拟（甚至是纯虚拟）析构函数`BasicShape`并将其定义为类外。最好的地方可能是`BasicShape.cpp`文件。

顺便说一句：正如其他人所指出的，您通常不应将头文件作为单独的翻译单元传递给编译器。这不会有害（除了增加编译时间），但也没有好处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T02:51:47.337

好的，显然这一切似乎都是编译器问题。我一直使用 gedit 作为文本编辑器和 g++ 作为编译器，但是当我切换到代码块时，它工作得很好。

# macos - Mac GameCenter for mac 不支持沙盒

> ID：14927719
> 
> 赞同：1
> 
> 时间：2013-02-18T00:16:27.727
> 
> 标签：macos, xcode4, game-center, review, sandbox

苹果电脑

Mac OS X 10.8.2 / XCode 4.5.2 / Mac Pro

我有 3 次被苹果审查拒绝。请帮帮我~

问题描述

我的 Mac 版 GameCenter 有问题。

```
Xcode -> sandboxing enable .   GameCenter don't work

Xcode -> sandboxing disable.   GameCenter work 
```

该怎么办？如何使用沙盒处理 GameCenter？

下面的错误信息。

```
"CONNECTION INVALID"
"Error Domain=NSCocoaErrorDomain Code=4099" 
```

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T06:09:03.917

您可以添加权利来解决此问题：

```
<key>com.apple.developer.game-center</key>
<true/> 
```

奇怪的是，Xcode 没有将此作为权利选项提供，但如果您不包含此选项，您的应用将在审核过程中被拒绝。

# jsf - 滚动数据表primefaces

> ID：14927723
> 
> 赞同：3
> 
> 时间：2013-02-18T00:17:00.717
> 
> 标签：jsf, primefaces, facelets

设置滚动选项 scrolling = true 时，数据表列与单元格数据未对齐。这个问题的任何解决方案还是primefaces错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:24:49.903

您必须设置每个 <p:column/> 的宽度属性，一旦您这样做，它们每次都会完美对齐。

# javascript - AWS - CORS 无法将文件直接上传到 S3

> ID：14927729
> 
> 赞同：2
> 
> 时间：2013-02-18T00:18:37.660
> 
> 标签：javascript, jquery, amazon-web-services, amazon-s3, cors

我正在尝试使用 jquery 将文件直接上传到 S3。

我按照以下步骤配置 CORS 设置文件，如下所示进行测试：

```
<?xml version="1.0" encoding="UTF-8"?>
<CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
    <CORSRule>
        <AllowedOrigin>*</AllowedOrigin>
        <AllowedMethod>GET</AllowedMethod>
        <AllowedMethod>POST</AllowedMethod>
        <AllowedMethod>PUT</AllowedMethod>
        <AllowedHeader>*</AllowedHeader>
    </CORSRule>
</CORSConfiguration> 
```

然后我的jQuery代码：

```
$.ajax({
url: this.action,
type: 'POST',
dataType: 'xml',
data: $('form').serialize(),
crossDomain: true,
cache: false,
success: function(data) {
    window.alert('test');
    }
}); 
```

如果我直接发布表单，没有 ajax，它可以正常工作......但是因为我想在上传完成后调用一个方法，所以我使用 jquery 来完成这项工作。但即使在设置了 CORS 设置后，我仍然会收到错误消息：Access-Control-Allow-Origin 不允许 Origin xxxx。

请求头：

```
Accept:application/xml, text/xml, */*; q=0.01
Cache-Control:no-cache
Content-Type:application/x-www-form-urlencoded; charset=UTF-8
Origin:http://localhost:8000
Pragma:no-cache
Referer:http://localhost:8000/upload
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.57 Safari/537.17 
```

请求状态为 CANCELED，类型为 PENDING。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T13:09:51.573

您缺少 POLICY_JSON 和相应的签名，以证明原始表单确实是由存储桶所有者构建的。检查此链接以获取详细信息：

[http://aws.amazon.com/articles/1434/](http://aws.amazon.com/articles/1434/)

# php - 转换 MySQL 表和行

> ID：14927731
> 
> 赞同：2
> 
> 时间：2013-02-18T00:18:46.567
> 
> 标签：php, mysql, database, pivot

我这里有一个问题，我什至不知道谷歌是什么以及如何解决这个问题。我正在制作 PHP 应用程序以将数据从一个 MySQL 表导出和导入到另一个表中。我对这些表有疑问。

在源表中它看起来像这样：

## ![源表](../Images/b16b801ebca585b2fe230454b28cbeec.png)

我的目标表有 ID，并且 pr0、pr1、pr2 作为行。所以它看起来像这样： ![在此处输入图像描述](../Images/d215cf382328460709bbb9fbb5c73625.png)

现在问题如下：如果我只是复制（将第一个表的每个值插入第二个新行）它将有 20.000 行，而不是 1000 行。

即使我将每条记录复制为第二个数据库中的新行，有什么方法可以融合行吗？基本上我需要检查具有该 ID_ 的最后一行中是否存在值，如果它存在于该行和列（例如 pr2）中，则插入新行，但如果具有相同 ID_ 的最后一行在 pr2 列中没有值，只需使用 pr2 列中的值更新该行。

我需要知道如何在 PHP 或 MySQL 中做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T02:13:53.477

所以你遇到了一些问题： 1) 将表从 SQL 复制到 PHP，注意内存使用情况，使用 PHP 命令 Memory_usage() 运行你的脚本。它会告诉你导入 SQL 数据可能很昂贵。看看这个。另一件事是 PHP 在将新值设置为数组时不会释放内存。以后会有用的。

2）我不明白这些值在源表中是唯一的还是在目标表中应该是唯一的。所以我会假设所有源都需要按原样在目标上。我还将假设 pr = pr0 和 quant=pr1。

3）你有不匹配的名字..这也可能是一个问题。会照顾的..也。

4) 将使用 My_sql，因为 SQL 连接器..和 $db 已连接.. 脚本：

```
 <?PHP
   $select_sql = "SELECT * FROM Table_source";
   $data_source = array();
   while($array_data= mysql_fetch_array($select_sql)) {
        $data_source[] = $array_data;   
         $insert_data=array();
   }
   $bulk =2000;
   foreach($data_source as $data){
     if(isset($start_query) == false)
      {
          $start_query = 'REPLACE INTO DEST_TABLE ('ID_','pr0','pr1','pr2')';
      }
     $insert_data[]=implode(',',$data).',0)';// will set 0 to the
     if(count($insert_data) >=$bulk){
        $values = implode('),(',$insert_data);
        $values = substr(1,2,$values);
        $values = ' VALUES '.$values;
        $insert_query = $start_query.' '.$values;
        $mysqli->query($insert_query);
        $insert_data = array(); 
     } //CHECK THE SYNTAX IM NOT SURE OF ALL OF IT MOSTLY THE SQL PART>> SEE THAT THE QUERY IS OK 
   }
   if(count($insert_data) >=$bulk) // IF THERE ARE ANY EXTRA PIECES..
      { 
        $values = implode('),(',$insert_data);
        $values = substr(1,2,$values);
        $values = ' VALUES '.$values;
        $insert_query = $start_query.' '.$values;
        $mysqli->query($insert_query);
        $insert_data = null; 
     }  
  ?> 
```

它离开了我的头，但检查这个想法并告诉我这是否有效，错误之夜是我忘记了 QUERY 结构的小东西，打印这个并粘贴到 PHPmyADMIN 或你的数据库查询，看看它都很好，但是这个概念会解决很多问题..

# json - 如何在 WebMatrix 中的 jquery 帖子后接收 json 字符串？

> ID：14927732
> 
> 赞同：1
> 
> 时间：2013-02-18T00:19:04.037
> 
> 标签：json, jquery-post, asp.net-webpages

如果我有以下邮政电话：

```
 $('#json_form').submit(function (event) {

            event.preventDefault();
            var url = $(this).attr('action');
            var datos = {
                "uno": "lalala",
                "dos": "jojojo"
            }
            var data = JSON.stringify(datos);

            $.post(url, data, function (resultado) {
                $('#posted_values').html(resultado);
            });
        }); 
```

如何接收和处理 cshtml 文件中的 json 对象？我的意思是我在解码调用中放入的内容：

```
if (IsPost)
    {
        var json_object = Json.Decode(Request???);
} 
```

* * *

**编辑完成@MikeBrind 的答案**，以帮助其他有同样问题的人。将 decode 用于更复杂的 json 对象的示例。

```
 $('#json_form').submit(function (event) {

            event.preventDefault();
            var url = $(this).attr('action');
            var datos = {
                "firstName": "John",
                "lastName": "Smith",
                "age": 25,
                "address": {
                    "streetAddress": "21 2nd Street",
                    "city": "New York",
                    "state": "NY",
                    "postalCode": 10021
                },
                "phoneNumber": [
                    {
                        "type": "home",
                        "number": "212 555-1234"
                    },
                    {
                        "type": "fax",
                        "number": "646 555-4567"
                    }
                ]
            }

            var data = JSON.stringify(datos);

            $.post(url, {"person": data}, function (resultado) {
                $('#posted_values').html(resultado);
            });
        }); 
```

接收和使用：

```
@{
    dynamic json_object;    
    if (IsPost)
    {
        json_object = Json.Decode(Request["person"]);
        @json_object.firstName<br/>
        @json_object.lastName<br/>        
        @json_object.address.city<br/>
        @json_object.address.postalCode<br/>
        foreach (dynamic phone in json_object.phoneNumber)
        {
            @phone.type<br/>
            @phone.number
        }

    }    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T07:38:27.007

`JSON.stringify`如果它只是像这样的键/值对，不要数据。做一个表格帖子：

```
$('#json_form').submit(function (event) {
    event.preventDefault();
    var url = $(this).attr('action');
    var datos = {
        "uno": "lalala",
        "dos": "jojojo"
    }
    //var data = JSON.stringify(datos); no need for this

    $.post(url, datos, function (resultado) {
        $('#posted_values').html(resultado);
    });
}); 
```

然后这些值可从`Request["uno"]`和`Request["dos"]`

如果您确实需要使用`JSON.stringify`（您会使用更复杂的数据结构），JSON 将在请求正文中传输，因此您需要从以下内容中提取它`Request.InputStream`：

```
var reader = new StreamReader(Request.InputStream);
var json = reader.ReadToEnd(); 
```

# variables - 如何初始化一个变量两次？

> ID：14927735
> 
> 赞同：-2
> 
> 时间：2013-02-18T00:19:28.433
> 
> 标签：variables, initialization, processing

我试图在 2 个不同的函数中初始化一个变量两次，而第二次初始化对第一次没有影响。

```
float X;

void setup()
{
  size(400, 400);
  background(255);
}
void draw() 
{
  Rect1();
  Rect2();
}

void Rect1()
{
  fill(255,0, 0);
  rect(X, 20, 40, 40);
  X=20;
}

void Rect2()
{ 
  fill(0, 255, 0);
  rect(X, 200, 40, 40);
  X=50;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T03:44:02.123

您的代码似乎是“演示”代码，但它实际上并没有做任何重要的事情，除了表明您可能需要先坐下来了解一下处理，然后再继续 - 点击 processing.org 并运行一些教程。这很值得。

您提供的代码可以写得更明智，但我会回答这个问题；处理使用 Java 范围规则的变体：局部变量胜过对象实例变量，对象实例变量胜过全局变量：

```
int x = 0;
int y = 50;

class Thing {
  int y = 10;    
  Thing() {
    // x is global, y is global and object instance
    println("x (in Thing): "+x);
    println("y (in Thing): "+y);
    declareAndCheck();
  }
  void declareAndCheck() {
    // now we make some local variables: they win.
    int x = 40;
    int y = 100;
    println("x (local declared): "+x);
    println("y (local declared): "+y);
  }
}

void setup() {
  println("x (global): "+x);
  println("y (global): "+y);
  Thing t = new Thing();
  // and global is still global
  println("x (global, again): "+x);
  println("y (global, again): "+y);
} 
```

这将生成以下输出：

```
x (global): 0
y (global): 50
x (in Thing): 0
y (in Thing): 10
x (local declared): 40
y (local declared): 100
x (global, again): 0
y (global, again): 50 
```

为什么？首先我们看到这个：

```
x (global): 0
y (global): 50 
```

因为 x 和 y 是值为 0 和 50 的全局变量。很简单。然后我们看到：

```
x (in Thing): 0
y (in Thing): 10 
```

因为在“Thing”对象中，我们有一个对象实例变量'y'，它赢得了它与全局变量之间的命名冲突。

然后我们进入declareAndCheck，我们看到：

```
x (local declared): 40
y (local declared): 100 
```

因为我们现在有一个全局 x 和一个局部 x，并且局部总是获胜，并且我们有一个实例 y 和一个局部 y，并且本地总是获胜。

最后我们再次在全局上下文中打印 x 和 y，因为没有冲突，我们看到：

```
x (global, again): 0
y (global, again): 50 
```

如果这对您没有意义，请浏览这些教程，他们会教您使用 Processing =)

# c++ - Cocos2d：如何从二维数组生成纹理、精灵或图像？

> ID：14927737
> 
> 赞同：2
> 
> 时间：2013-02-18T00:19:52.070
> 
> 标签：c++, ios, cocos2d-iphone, cocos2d-x

我有一个 256x256 的双精度数组，表示我用于随机地形生成的高度图。目前，我通过为数组中的每个元素创建一个像素精灵并相应地对其进行着色，以一种非常低效的方式显示地形。这给我留下了 256x256 的精灵，我当然想找到一种方法来渲染纹理或从这个数组创建精灵或图像，而不必处理这么多微小的精灵。有没有办法在 Cocos2d（特别是 Cocos2d-x）中实现这一点？我自己也找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T00:44:08.147

在 cocos2d-iphone 中，您可以使用它`[CCTexture2D initWithData:pixelFormat:pixelsWide:pixelsHigh:contentSize:]`来创建纹理。然后使用`[CCSprite spriteWithTexture:]`创建一个精灵。cocos2d-x中应该有对应的方法

像这样为 pixelFormat 创建数据缓冲区`kCCTexture2DPixelFormat_RGBA8888`：

```
int width = 256;
int height = 256;
GLubyte *buffer = malloc(sizeof(GLubyte)*4*256);
for (int x=0; x<width; x++) {
    for (int y=0; y<height; y++) {
    // convert your doubles to pixels, here I just create a white pixel value
        for (int i=0;i<4;i++) {
            buffer[x*width*4+y*4+i]=255;
        }
    }
} 
```

然后使用上述方法创建您的精灵。

# css - 将容器 div 的宽度与浮动 div 的总和对齐

> ID：14927743
> 
> 赞同：9
> 
> 时间：2013-02-18T00:20:56.423
> 
> 标签：css, list, html, width

我有以下html：

```
<div class="main_container">
    <div class="sub_container">
        <div class="floating">wookie1</div>
        ...
        <div class="floating">wookie5</div>
    </div>
</div> 
```

认为它就像一个图片库。

main_container 的大小不固定，设置为用户分辨率的百分比。我希望 sub_container 具有浮动 div 总和的确切宽度。

如果我使用“显示：表；” 对于 sub_container 和“显示：内联块；” 对于浮动 div，它工作正常：

![在此处输入图像描述](../Images/c8f7e6b0ed9d1623bf5f22c5efdbd599.png)

直到我在列表中有足够的 div，以便宽度的总和大于 main_container 并且它们在下一行中断：

![在此处输入图像描述](../Images/f494a9c7bafddf5d8d00a4f9a817dfc5.png)

但是，我仍然希望子容器（黄色背景）始终是 div 总和的确切宽度，即使它们分成几行，如下所示：

![在此处输入图像描述](../Images/68fbb33047757b637901ea6b913a52dd.png)

我已经用谷歌搜索了几个小时，但无法找到一个优雅的解决方案（如果可能，仅限 css。）

这是[jsfiddle](http://jsfiddle.net/NQDAn/1/)，可以玩这个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T18:08:30.137

## 纯 CSS 解决方案

问题是要“知道”到下一行的项目，容器必须“填充”其可用的水平空间，即您的`.main_container`宽度。然而，您希望背景不超出实际元素本身所需的范围。所以我使用元素本身在拼凑的伪元素的帮助下创建背景。

[**这是小提琴**](http://jsfiddle.net/NQDAn/73/)（在 Win 7 机器上的 IE9、Firefox 18、Chrome 24 中测试）

我正在做的是将背景与每个单独`.floating`的元素拼凑在一起，这使得最右边的元素成为背景大小的正确边框控制（注意小提琴中的两个不同宽度的示例）。

每个部分的解释在下面的评论中给出。有两个关键限制需要注意：

1.  `.floating`不能有一个集合，因此这`position`是基于特定应用程序的潜在限制。
2.  需要是纯色或纯垂直方向的`background`“运动”（即从上到下渐变的渐变，或水平线都可以）。

**KEY CSS**（带有解释性注释）

```
.sub_container {
    border-left: 1px solid #333; /* forms its own left border */
    overflow: hidden; /* needed for background and border to work */ 
    position: relative; /* positioning background off this */
    z-index: 1; /* needs a stacking context */
}

.floating {
    font-size:20px;
    line-height:30px;
    padding:0 5px 0 5px;
    border: 1px solid black;
    margin: 3px;
    display: inline-block;
    /* NOTE: CANNOT be given positioning  */
}

.floating:after {
    content: '';
    position: absolute; /* will position off subcontainer */
    border-top: 1px solid black; /* makes the top/bottom border itself */
    border-bottom: 1px solid black;
    z-index: -1; /* push it to the background */
    top: 0; /* set it to top of sub_subcontainer */
    bottom: 0; /* set it to bottom of sub_container */
    margin-left: -100%; /* shove it past the far left edge of sub_container */
    /* next, use padding to bring it back to its position at the end
       of the text string of .floating */
    padding-left: 100%;
    /* next, add enough padding on the right to compensate for the right
       padding, right margin, and right border of .floating */
    padding-right: 9px; 
    background-color: yellow; /* set your background color */
    /* NOTE: this will not work with a background image that
       has any horizonal differences to it (top to bottom 
       gradient would probably be okay) */
}

.floating:before { /* make right border */
    content: '';
    padding-top: 10000px; /* give it some obscene height that will not be exceeded */
    margin: -5000px 0; /* counter the padding height by half size margins top/bottom */
     /* next, push this behind the background with an even lower z-index
        to hide it if it is not the right most element beign used to 
        form the right border */
    z-index: -2;
    border-right: 1px solid black; /* make the right border */
    float: right; /* get the before element to the right */
    position: relative; /* needs to be adjusted in position */
    right: -9px; /* move it same as padding-right of the after element */
    display: block; /* give it a display */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T20:43:26.790

重读你的问题......因为你不会承诺任何事情（最大宽度：80%、500px 等）我打破了第四个孩子的一切 - 根据你的例子。

CSS

```
.main_container, .sub_container, .floating { outline:1px solid black }
.sub_container { background-color:yellow; display:table; padding-left:5px }
.floating {
    float:left;
    padding:5px;
    margin:5px 5px 5px 0;
}
.floating:nth-child(4n+5) {
    clear:left;
    float:left;
} 
```

HTML

```
<div class="main_container">
    <div class="sub_container">
        <div class="floating">wookie1</div>
        <div class="floating">wookie2</div>
        <div class="floating">wookie3</div>
        <div class="floating">wookie4</div>
        <div class="floating">wookie5</div>
        <div class="floating">wookie6</div>
        <div class="floating">wookie7</div>
        <div class="floating">wookie8</div>
        <div class="floating">wookie9</div>
    </div>
</div> 
```

![在此处输入图像描述](../Images/44549adae5d92c5ca36d1f9ad93f6584.png)

**编辑（选项 2）**
我不相信您尝试做的事情可以仅通过 HTML/CSS 来完成。我提供了另一种基于预感的解决方案......以及您的图片库评论。

CSS

```
.main_container, .sub_container, .floating { outline:1px solid black }
.main_container {
    text-align:center
}
.sub_container { background-color:yellow; display:inline-block; max-width:80%; }
.floating {
    display:inline-block;
    padding:5px;
    margin:5px;
} 
```

HTML

```
<div class="main_container">
    <div class="sub_container">
        <div class="floating">wookie1wookie1wookie1</div>
        <div class="floating">wookie2</div>
        <div class="floating">wookie3</div>
        <div class="floating">wookie4</div>
        <div class="floating">wookie5</div>
        <div class="floating">wookie6wookie6</div>
        <div class="floating">wookie7wookie7wookie7</div>
        <div class="floating">wookie8</div>
        <div class="floating">wookie9</div>
    </div>
</div> 
```

它不会使 .subcontainer 捕捉到内容；但是，（使用`max-width`）它确实允许您从主容器中给它一些喘息的空间，并且它的子容器可以有各种大小。

![在此处输入图像描述](../Images/119c5f8feaf7e22f465cb05bcd49d06a.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T01:21:26.977

我对此感到无聊，并创建了一个基于 jQuery 的 JS 脚本来解决它。

```
var t = $(".sub_container").width()/$(".floating").outerWidth();
$(".sub_container").width(parseInt(t) * $(".floating").outerWidth()); 
```

[演示](http://jsfiddle.net/Starx/37uru/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T00:31:37.990

删除主容器宽度和 .sub_container 绝对位置，你应该很高兴。

```
.main_container {
    #width:380px;
}

.sub_container {
    #position: absolute;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T10:33:17.627

对“sub_container”使用 span 元素而不是 div

```
.sub_container{background-color:yellow;} 
```

# javascript - Capybara比赛的健全性检查

> ID：14927745
> 
> 赞同：0
> 
> 时间：2013-02-18T00:21:10.860
> 
> 标签：javascript, ruby-on-rails-3, capybara

我正在尝试编写 Capybara 测试用例。HTML 看起来像这样，通过将“page.body”写入文件获得：

```
<div class="diet_form"><div class="wrapper_no_arrow">
  <div class="header">

    <form name="diet" id="new-diet">

      <label for="name"> New Diet's Name</label>
      <input type="text" value="" id="name" name="name" />
      <a id="submit_button" class="button-green">Create Diet</a> 
```

我正在尝试找出正确的水豚匹配：

```
 fill_in "name", :with => "test diet"
     page.should have_link("submit_button") 
```

这两个语句找不到输入框和提交按钮。有人可以帮我为此编写正确的匹配器吗？

这是第二条语句的错误：

```
Failure/Error: page.should have_link("submit_button")
   expected link "submit_button" to return something 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:00:50.157

测试失败，因为您在页面上没有正确的链接。我会改变失败的路线

```
page.should have_selector('a#submit_button') 
```

# sockets - java.net.SocketException：参数无效

> ID：14927749
> 
> 赞同：1
> 
> 时间：2013-02-18T00:21:40.617
> 
> 标签：sockets, exception, stream, arguments

> 接收连接时出错：java.net.SocketException：线程“Thread-698”中的无效参数异常 java.lang.RuntimeException：未在 java.lang 的 Handin2.ConnectionHandlerImpl.run(ConnectionHandlerImpl.java:124) 处建立输入/输出。线程运行（线程.java：722）

我一直在寻找这个例外。似乎到处都可以得出结论，如果您使用 JVM 选项进行编译，`-Djava.net.preferIPv4Stack=true`它将解决问题。但它不适合我。我正在运行 IntelliJ 并尝试使用套接字和线程实现 Chord 系统。这是捕获并抛出上述异常的地方：

```
if(this.remote == null || this.node == null) {
    throw new RuntimeException("Connection handler has not been properly "
                + "initalialized");
}
try{
    if(this.out == null) {
      this.out = new ObjectOutputStream(remote.getOutputStream());
    }
    if(this.in == null) {
      this.in = new ObjectInputStream(remote.getInputStream());
    }
} catch(IOException e) {
      System.out.println("Trying to make input/output for remote " + remote);
      System.err.println(node.getKey()/Constants.NORMALIZE_KEY+": Error receiving connection: " + e.toString());
      return false;
} 
```

我不知道是否需要更多代码片段来提供帮助，但我只是迷失在这个异常上，因为搜索时的解决方案根本没有帮助。

关于触发此错误的任何提示？套接字异常被给定的 try-catch 块捕获为 IO 异常的特例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T01:34:49.927

> 如果您使用 JVM 选项 -Djava.net.preferIPv4Stack=true 进行编译，它将解决问题。

否。如果您使用该 JVM 选项*执行。*与编译器无关。

# mysql - SQL查询不返回任何内容

> ID：14927750
> 
> 赞同：-1
> 
> 时间：2013-02-18T00:21:51.223
> 
> 标签：mysql

如何链接并获取三个表的变量，我想获取每个房间的链接设施，但目前我的记录似乎没有返回任何内容。

我也想为设施返回一个新的列标题：[http ://sqlfiddle.com/#!2/8d6ca/25](http://sqlfiddle.com/#!2/8d6ca/25)

小提琴可以在这里找到

```
SELECT *
FROM ts_room rm
WHERE 
NOT EXISTS (
SELECT 1
FROM ts_roompref rp
JOIN ts_request rq ON rp.request_id = rq.id AND day_id = 1 AND period_id = 1
WHERE rm.id = rp.room_id)
AND NOT EXISTS (
SELECT 1
FROM ts_roompref rp
JOIN ts_allocation a ON rp.request_id = a.request_id AND a.status = "Allocated" 
WHERE rm.id = rp.room_id)
AND EXISTS (
SELECT 1
FROM ts_roomfacilities f
JOIN ts_room b ON f.room_id = b.id 
WHERE rm.id = f.room_id AND 
f.facilities_id=2);
AND EXISTS (
SELECT 1
FROM ts_facilities f1
JOIN ts_roomfacilities c ON f2.id = c.id 
WHERE rm.id = f.room_id); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T00:31:52.630

有个 ; 在您应该删除的查询中间

# javascript - 如何使向上和向下箭头键导航表的行，并以编程方式将 sudo :hover 应用于这些行？

> ID：14927751
> 
> 赞同：3
> 
> 时间：2013-02-18T00:21:53.013
> 
> 标签：javascript, jquery, html, event-handling

我有一个文本类型的输入，用于使用 jquery 执行异步表行搜索。我有一个附加到搜索输入的 .on 函数，在按下键时，我正在调用一个名为 hoverDown() 的函数。当按下向下箭头键时，我希望将鼠标悬停在表格行上。当用箭头键悬停在表格行上时，用户按回车键，我希望触发 href 并将用户带到该相关页面。我能够检测到 e.keyCode ，但这就是我所能得到的，我真的不知道从哪里得到它。相关代码：

//HTML

```
<div id="main">
<input type="text" class="table-search" id="search" autocomplete="off"   placeholder="Search Clients…">
<table class="table" id="tblData">
<thead><tr><th>Name</th> <th>Title</th></tr></thead>
<tbody>
<tr><td><a href="http://lar.loc/cases">Scott</a></td> <td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">Billy</a></td><td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">George</a></td><td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">Sara</a></td><td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">John</a></td><td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">Megan</a></td><td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">Ben</a></td><td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">Jully</a></td><td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">Bethany</a></td><td>Client</td></tr><tr><td><a href="http://lar.loc/cases">Alen</a></td><td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">Jane</a></td><td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">Alice</a></td><td>Client</td></tr></tbody></table>
</div> 
```

//javascript

```
$(document).ready(function(){
    $("#main").on("keydown", "#search", function(e){
    hoverDown();
    });
});

function hoverDown()
{
    if ($(document).keydown()) {
        $(document).keydown(function(e){

            if (e.keyCode == 40) { 
                alert("down");
                e.keyCode = null;
            }
            if (e.keyCode == 38) { 
                alert("up");
                e.keyCode = null;
            }

        });
    };
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T00:52:59.393

我扔了一个小提琴让你玩[http://jsfiddle.net/7BcZA/2/](http://jsfiddle.net/7BcZA/2/)

概括：

当您“悬停”一行时，为其添加一个类。我的叫`selected`. 这表明它已被选中，并添加了 CSS 样式。`selected`从先前`tr`选择的类中删除该类。

根据按下的按钮获取下一个或上一个标签。

作为奖励，我添加了您正在寻找的“按 Enter”功能`=)`。

# ios - ObjectAtIndex 崩溃

> ID：14927753
> 
> 赞同：0
> 
> 时间：2013-02-18T00:21:55.297
> 
> 标签：ios, objective-c

程序在下面的注释行崩溃。不知道出了什么问题。给第一次程序员的任何提示？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MainCell"];

    if(cell == nil){
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"MainCell"];
    }

    cell.textLabel.text = [[users objectAtIndex:indexPath.row] objectForKey:[[NSString alloc] initWithFormat:@"%d", indexPath.row]];
    //My program runs but then crashes at this line, I have no idea what's wrong with it though "reason: '-[__NSCFDictionary objectAtIndex:]: unrecognized selector sent to instance"

    return cell;
} 
```

*一些更多的代码（虽然不是全部）根据要求*

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

    users = [NSJSONSerialization JSONObjectWithData:data options:nil error:nil];
    [self.tableView reloadData];
}

- (int)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [users count];
} 
```

**在 .h 文件中**

> @interface GIFUsersListViewController : UITableViewController {
> 
> ```
> NSArray *users;
> NSMutableData *data; 
> ```
> 
> } @结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:25:26.147

截至此消息：`'-[__NSCFDictionary objectAtIndex:]: unrecognized selector sent to instance`看起来用户不是`NSArray`，而是`NSDictionary`。

* * *

如果您不确定 JSON 中的内容，请在分配给用户之前检查它：

```
id usersFromJSON = [NSJSONSerialization JSONObjectWithData:data options:nil error:nil];
if ([usersFromJSON isKindOfClass:[NSArray class]]) {
    users = usersFromJSON;
} else {
    NSLog(@"Something wrong with my JSON: %@", usersFromJSON);
} 
```

# css - Primefaces TreeTable css 样式

> ID：14927754
> 
> 赞同：2
> 
> 时间：2013-02-18T00:22:05.103
> 
> 标签：css, jsf, jsf-2, primefaces, treetable

在我的 JSF Web 应用程序中，我插入了一个简单的[TreeTable](http://www.primefaces.org/showcase/ui/treeTable.jsf)。

我在哪里可以设置左边框和展开的子图标之间的距离？当新级别扩展时，我希望这个距离更大。

编辑：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <title>Facelet Title</title>
        <link rel="stylesheet" type="text/css" href="css/treetable.css" />
        <style type="text/css">
            .ui-treetable .ui-treetable-indent {
                float: right;
                height: 0px;
                width: 0px;
            }
        </style>
    </h:head>
    <h:body>        
        <h:form id="form">  

            <p:treeTable value="#{newJSFManagedBean.docCon.root}" var="document"  
                         selection="#{newJSFManagedBean.docCon.selectedNode}" selectionMode="single">  

                <f:facet name="header">  
                    Single Selection  
                </f:facet>  

                <p:column style="width:150px">  
                    <f:facet name="header">  
                        Name  
                    </f:facet>  
                    <h:outputText value="#{document.name}" />  
                </p:column>  

                <p:column style="width:100px">  
                    <f:facet name="header">  
                        Size  
                    </f:facet>  
                    <h:outputText value="#{document.size}" />  
                </p:column>  

                <p:column style="width:100px">  
                    <f:facet name="header">  
                        Type  
                    </f:facet>  
                    <h:outputText value="#{document.type}" />  
                </p:column>  

                <f:facet name="footer">  
                    <p:commandButton id="singleBtn" value="View" icon="ui-icon-search"  
                            update=":form:documentPanel" oncomplete="documentDialog.show()"/>  
                </f:facet>  
            </p:treeTable>  

            <p:dialog id="dialog" header="Document Detail" showEffect="fade" widgetVar="documentDialog" modal="true">  
                <p:outputPanel id="documentPanel">  
                    <h:panelGrid  columns="2" cellpadding="5" rendered="#{not empty newJSFManagedBean.docCon.selectedNode}">  
                        <h:outputLabel for="name" value="Name: " />  
                        <h:outputText id="name" value="#{newJSFManagedBean.docCon.selectedNode.data.name}" style="font-weight:bold" />  

                        <h:outputLabel for="size" value="Size: " />  
                        <h:outputText id="size" value="#{newJSFManagedBean.docCon.selectedNode.data.size}" style="font-weight:bold" />  

                        <h:outputLabel for="type" value="Type " />  
                        <h:outputText id="type" value="#{newJSFManagedBean.docCon.selectedNode.data.type}" style="font-weight:bold" />  
                    </h:panelGrid>  
                </p:outputPanel>  
            </p:dialog>  

        </h:form>          
        <br /><br />
    </h:body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:26:50.080

您需要创建自己的 css 并覆盖`ui-treetable-indent`最初定义为的 css 属性：

```
.ui-treetable .ui-treetable-indent {
    float: left;
    height: 16px;
    width: 16px;
} 
```

简单的方法是使用`h:outputStylesheet`or包含您自己的样式表`<link rel="stylesheet">`。

# sql - SQL 语句的所有可能的第一个单词是什么？

> ID：14927761
> 
> 赞同：3
> 
> 时间：2013-02-18T00:23:25.463
> 
> 标签：sql, sql-server, delphi, sql-server-2008-r2, ado

我正在构建一个用户界面，以便能够在 SQL Server 数据库上执行 SQL 语句，兼容 SQL Server 2008 R2。我需要能够确定每个语句是否可能返回一个数据集，或者它是否只需要执行。在 Delphi 中，`TADOQuery`由`Open`/组成`Close`数据集，或`ExecSQL`仅用于执行。我需要根据 SQL 语句的第一个单词自动确定要使用哪个。

如何根据语句中的第一个单词确定应该调用哪种方法？我需要知道每个可能的单词，以及基于每个单词的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T01:11:10.233

这在一般意义上是不可能的。例如，EXEC 存储过程名称可以返回结果集或不返回结果集，具体取决于 proc 的编写方式。仅从调用的语法中无法知道它是一个还是另一个。

# javascript - 带有 nowrap 和溢出隐藏的内联 div

> ID：14927763
> 
> 赞同：0
> 
> 时间：2013-02-18T00:23:28.073
> 
> 标签：javascript, jquery, html, css, stylesheet

我有一个顶部酒吧，`div`里面有多个。它在 Chrome 中按预期工作，但在 Firefox 中，`.third`div 被包裹在第二行。如何让`.third`Firefox 中的 div`nowrap`像 Chrome 一样？

[http://jsfiddle.net/qhoc/C6f4c/](http://jsfiddle.net/qhoc/C6f4c/)

以下是条件：

1.  `.top`总是有`width:100%`，所以它覆盖了整个浏览器窗口
2.  每个内部`divs`（第一，第二，第三......）都有自己预定义的固定宽度
3.  他们必须**排成一排**。如果浏览宽度不够，右边的会溢出隐藏（不换行到第二行）。
4.  更喜欢用 css 处理这个问题。jQuery 应该是最后的手段。

帮助是感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T00:49:57.297

从您的内部 div 中删除 float:left 并添加 display:inline-block。这些 div 将充当内联元素，但具有相同的块属性。

[http://jsfiddle.net/C6f4c/2/](http://jsfiddle.net/C6f4c/2/)

```
.top {
  width: 100%; /* this is optional to accomplish your first condition, either you don't need to have inline-block on this element */

}
.top div {
    position: relative;
    /*float: left;*/
    height: 100%;
    display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T00:42:21.690

您是否尝试过使用媒体查询？一旦浏览器达到某个最大宽度等，您可以隐藏 div。

更多在这里：

[http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

# vb.net - 在 FolderBrowserDialog 中显示文本框

> ID：14927766
> 
> 赞同：5
> 
> 时间：2013-02-18T00:23:55.267
> 
> 标签：vb.net, folderbrowserdialog

我如何在 FolderBrowserDialog 中显示文本框，如下图所示， ![在此处输入图像描述](../Images/b088058ddc83919558f421a24c8cfb72.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T01:36:59.270

这不是直接可能的，您必须回退到使用 shell 函数。项目 + 添加引用，浏览选项卡，选择 c:\windows\system32\shell32.dll。如何在 Winforms 应用程序中使用它的示例：

```
Private Sub Button1_Click(ByVal sender As Object, ByVal e As EventArgs) Handles Button1.Click
    Dim options As Integer = &H40 + &H200 + &H20
    options += &H10   '' Adds edit box
    Dim shell = New Shell32.ShellClass
    Dim root = Environment.GetFolderPath(Environment.SpecialFolder.Desktop)
    Dim folder = CType(shell.BrowseForFolder(CInt(Me.Handle), _
        "Select folder", options, root), Shell32.Folder2)
    If folder IsNot Nothing Then
        MsgBox("You selected " + folder.Self.Path)
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T01:42:11.537

看看这个：[FolderBrowserDialogEx：FolderBrowserDialog 的 AC# 自定义](http://www.codeproject.com/Articles/159352/FolderBrowserDialogEx-A-C-customization-of-FolderB)

![自定义文件夹浏览对话框](../Images/6b5ade60a83a49f95a5b571a92c2f0b4.png)

代码在 C# 中，这是 VB 转换

```
Imports System
Imports System.Collections.Generic
Imports System.Linq
Imports System.Text
Imports System.Drawing
Imports System.Runtime.InteropServices
Imports System.Windows.Forms
Imports System.Diagnostics

Namespace DaveChambers.FolderBrowserDialogEx
    Public Class FolderBrowserDialogEx
        #Region "Fields that mimic the same-named fields in FolderBrowserDialog"
        Public Property RootFolder() As Environment.SpecialFolder
            Get
                Return m_RootFolder
            End Get
            Set
                m_RootFolder = Value
            End Set
        End Property
        Private m_RootFolder As Environment.SpecialFolder
        Public Property SelectedPath() As String
            Get
                Return m_SelectedPath
            End Get
            Set
                m_SelectedPath = Value
            End Set
        End Property
        Private m_SelectedPath As String
        Public Property ShowNewFolderButton() As Boolean
            Get
                Return m_ShowNewFolderButton
            End Get
            Set
                m_ShowNewFolderButton = Value
            End Set
        End Property
        Private m_ShowNewFolderButton As Boolean
        Public Property StartPosition() As FormStartPosition
            Get
                Return m_StartPosition
            End Get
            Set
                m_StartPosition = Value
            End Set
        End Property
        Private m_StartPosition As FormStartPosition
        #End Region

        ' Fields specific to CustomFolderBrowserDialog
        Public Property Title() As String
            Get
                Return m_Title
            End Get
            Set
                m_Title = Value
            End Set
        End Property
        Private m_Title As String
        Public Property ShowEditbox() As Boolean
            Get
                Return m_ShowEditbox
            End Get
            Set
                m_ShowEditbox = Value
            End Set
        End Property
        Private m_ShowEditbox As Boolean

        ' These are the control IDs used in the dialog
        Private Structure CtlIds
            Public Const PATH_EDIT As Integer = &H3744
            'public const int PATH_EDIT_LABEL = 0x3748; // Only when BIF_NEWDIALOGSTYLE
            Public Const TITLE As Integer = &H3742
            Public Const TREEVIEW As Integer = &H3741
            Public Const NEW_FOLDER_BUTTON As Integer = &H3746
            Public Const IDOK As Integer = 1
            Public Const IDCANCEL As Integer = 2
        End Structure

        <StructLayout(LayoutKind.Sequential, CharSet := CharSet.Unicode)> _
        Public Structure InitData
            ' Titles shouldn't too long, should they?
            <MarshalAs(UnmanagedType.ByValTStr, SizeConst := 128)> _
            Public Title As String

            <MarshalAs(UnmanagedType.ByValTStr, SizeConst := Win32.MAX_PATH)> _
            Public InitialPath As String

            Public ShowEditbox As Boolean
            Public ShowNewFolderButton As Boolean
            Public StartPosition As FormStartPosition
            Public hParent As IntPtr

            Public Sub New(dlg As FolderBrowserDialogEx, hParent As IntPtr)
                ' We need to make copies of these values from the dialog.
                ' I tried passing the dlg obj itself in this struct, but Windows will barf after repeated invocations.
                Me.Title = dlg.Title
                Me.InitialPath = dlg.SelectedPath
                Me.ShowNewFolderButton = dlg.ShowNewFolderButton
                Me.ShowEditbox = dlg.ShowEditbox
                Me.StartPosition = dlg.StartPosition
                Me.hParent = hParent
            End Sub
        End Structure

        Public Sub New()
            Title = "Browse For Folder"
            ' Default to same caption as std dialog
            RootFolder = Environment.SpecialFolder.Desktop
            SelectedPath = "c:\"
            ShowEditbox = False
            ShowNewFolderButton = False
            StartPosition = FormStartPosition.WindowsDefaultLocation
        End Sub

        Public Function ShowDialog(owner As IWin32Window) As DialogResult
            Dim initdata As New InitData(Me, owner.Handle)

            Dim bi As New Win32.BROWSEINFO()
            bi.iImage = 0
            bi.hwndOwner = owner.Handle
            If 0 <> Win32.SHGetSpecialFolderLocation(owner.Handle, CInt(Me.RootFolder), bi.pidlRoot) Then
                bi.pidlRoot = IntPtr.Zero
            End If
            bi.lpszTitle = ""
            bi.ulFlags = Win32.BIF_RETURNONLYFSDIRS
            ' do NOT use BIF_NEWDIALOGSTYLE or BIF_STATUSTEXT
            If Me.ShowEditbox Then
                bi.ulFlags = bi.ulFlags Or Win32.BIF_EDITBOX
            End If
            If Not Me.ShowNewFolderButton Then
                bi.ulFlags = bi.ulFlags Or Win32.BIF_NONEWFOLDERBUTTON
            End If
            bi.lpfn = New Win32.BrowseCallbackProc(_browseCallbackHandler)
            ' Initialization data, used in _browseCallbackHandler
            Dim hInit As IntPtr = Marshal.AllocHGlobal(Marshal.SizeOf(initdata))
            Marshal.StructureToPtr(initdata, hInit, True)
            bi.lParam = hInit

            Dim pidlSelectedPath As IntPtr = IntPtr.Zero
            Try
                pidlSelectedPath = Win32.SHBrowseForFolder(bi)
                Dim sb As New StringBuilder(256)
                If Win32.SHGetPathFromIDList(pidlSelectedPath, sb) Then
                    SelectedPath = sb.ToString()
                    Return DialogResult.OK
                End If
            Finally
                ' Caller is responsible for freeing this memory.
                Marshal.FreeCoTaskMem(pidlSelectedPath)
            End Try

            Return DialogResult.Cancel
        End Function

        Private Function _browseCallbackHandler(hDlg As IntPtr, msg As Integer, lParam As IntPtr, lpData As IntPtr) As Integer
            Select Case msg
                Case Win32.BFFM_INITIALIZED
                    ' remove context help button from dialog caption
                    Dim lStyle As Integer = Win32.GetWindowLong(hDlg, Win32.GWL_STYLE)
                    lStyle = lStyle And Not Win32.DS_CONTEXTHELP
                    Win32.SetWindowLong(hDlg, Win32.GWL_STYLE, lStyle)
                    lStyle = Win32.GetWindowLong(hDlg, Win32.GWL_EXSTYLE)
                    lStyle = lStyle And Not Win32.WS_EX_CONTEXTHELP
                    Win32.SetWindowLong(hDlg, Win32.GWL_EXSTYLE, lStyle)

                    _adjustUi(hDlg, lpData)
                    Exit Select
                Case Win32.BFFM_SELCHANGED
                    If True Then
                        Dim ok As Boolean = False
                        Dim sb As New StringBuilder(Win32.MAX_PATH)
                        If Win32.SHGetPathFromIDList(lParam, sb) Then
                            ok = True
                            Dim dir As String = sb.ToString()
                            Dim hEdit As IntPtr = Win32.GetDlgItem(hDlg, CtlIds.PATH_EDIT)
                            Win32.SetWindowText(hEdit, dir)
                            #If UsingStatusText Then
                            ' We're not using status text, but if we were, this is how you'd set it
                            Win32.SendMessage(hDlg, Win32.BFFM_SETSTATUSTEXTW, 0, dir)
                            #End If

                            #If SHBrowseForFolder_lists_links Then
                            ' This check doesn't seem to be necessary - the SHBrowseForFolder dirtree doesn't seem to list links
                            Dim sfi As New Win32.SHFILEINFO()
                            Win32.SHGetFileInfo(lParam, 0, sfi, Marshal.SizeOf(sfi), Win32.SHGFI_PIDL Or Win32.SHGFI_ATTRIBUTES)

                            ' fail if pidl is a link
                            If (sfi.dwAttributes And Win32.SFGAO_LINK) = Win32.SFGAO_LINK Then
                                ok = False
                                #End If
                            End If
                        End If

                        ' if invalid selection, disable the OK button
                        If Not ok Then
                            Win32.EnableWindow(Win32.GetDlgItem(hDlg, CtlIds.IDOK), False)
                        End If

                        Exit Select
                    End If
            End Select

            Return 0
        End Function

        Private Sub _adjustUi(hDlg As IntPtr, lpData As IntPtr)
            ' Only do the adjustments if InitData was supplied
            If lpData = IntPtr.Zero Then
                Return
            End If
            Dim obj As Object = Marshal.PtrToStructure(lpData, GetType(InitData))
            If obj Is Nothing Then
                Return
            End If
            Dim initdata As InitData = DirectCast(obj, InitData)

            ' Only do the adjustments if we can find the dirtree control
            Dim hTree As IntPtr = Win32.GetDlgItem(hDlg, CtlIds.TREEVIEW)
            If hTree = IntPtr.Zero Then
                hTree = Win32.FindWindowEx(IntPtr.Zero, IntPtr.Zero, "SysTreeView32", IntPtr.Zero)
                If hTree = IntPtr.Zero Then
                    ' This usually means that BIF_NEWDIALOGSTYLE is enabled.
                    hTree = Win32.FindWindowEx(hDlg, IntPtr.Zero, "SHBrowseForFolder ShellNameSpace Control", IntPtr.Zero)
                End If
            End If
            If hTree = IntPtr.Zero Then
                Return
            End If

            ' Prep the basic UI
            Win32.SendMessage(hDlg, Win32.BFFM_SETSELECTIONW, 1, initdata.InitialPath)
            Win32.SetWindowText(hDlg, initdata.Title)

            If initdata.StartPosition = FormStartPosition.CenterParent Then
                _centerTo(hDlg, initdata.hParent)
            ElseIf initdata.StartPosition = FormStartPosition.CenterScreen Then
                _centerTo(hDlg, Win32.GetDesktopWindow())
            End If
            ' else we do nothing

            ' Prep the edit box
            Dim rcEdit As New Win32.RECT()
            Dim hEdit As IntPtr = Win32.GetDlgItem(hDlg, CtlIds.PATH_EDIT)
            If hEdit <> IntPtr.Zero Then
                If initdata.ShowEditbox Then
                    Win32.GetWindowRect(hEdit, rcEdit)
                    Win32.ScreenToClient(hEdit, rcEdit)
                Else
                    Win32.ShowWindow(hEdit, Win32.SW_HIDE)
                End If
            End If

            ' make the dialog larger
            Dim rcDlg As Win32.RECT
            Win32.GetWindowRect(hDlg, rcDlg)
            rcDlg.Right += 40
            rcDlg.Bottom += 30
            If hEdit <> IntPtr.Zero Then
                rcDlg.Bottom += (rcEdit.Height + 5)
            End If
            Win32.MoveWindow(hDlg, rcDlg, True)
            Win32.GetClientRect(hDlg, rcDlg)

            Dim vMargin As Integer = 10
            ' Accomodate the resizing handle's width
            Dim hMargin As Integer = 10
            ' SystemInformation.VerticalScrollBarWidth;
            ' Move the Cancel button
            Dim rcCancel As New Win32.RECT()
            Dim hCancel As IntPtr = Win32.GetDlgItem(hDlg, CtlIds.IDCANCEL)
            If hCancel <> IntPtr.Zero Then
                Win32.GetWindowRect(hCancel, rcCancel)
                Win32.ScreenToClient(hDlg, rcCancel)

                rcCancel = New Win32.RECT(rcDlg.Right - (rcCancel.Width + hMargin), rcDlg.Bottom - (rcCancel.Height + vMargin), rcCancel.Width, rcCancel.Height)

                Win32.MoveWindow(hCancel, rcCancel, False)
            End If

            ' Move the OK button
            Dim rcOK As New Win32.RECT()
            Dim hOK As IntPtr = Win32.GetDlgItem(hDlg, CtlIds.IDOK)
            If hOK <> IntPtr.Zero Then
                Win32.GetWindowRect(hOK, rcOK)
                Win32.ScreenToClient(hDlg, rcOK)

                rcOK = New Win32.RECT(rcCancel.Left - (rcCancel.Width + hMargin), rcCancel.Top, rcOK.Width, rcOK.Height)

                Win32.MoveWindow(hOK, rcOK, False)
            End If

            ' Manage the "Make New Folder" button
            Dim hBtn As IntPtr = Win32.GetDlgItem(hDlg, CtlIds.NEW_FOLDER_BUTTON)
            If Not initdata.ShowNewFolderButton Then
                ' Make sure this button is not visible
                Win32.ShowWindow(hBtn, Win32.SW_HIDE)
            ElseIf hBtn = IntPtr.Zero Then
                ' Create a button - button is only auto-created under BIF_NEWDIALOGSTYLE
                ' This is failing, and I don't know why!
                hBtn = Win32.CreateWindowEx(&H50010000, "button", "&Make New Folder", &H4, hMargin, rcOK.Top, _
                    105, rcOK.Height, hDlg, New IntPtr(CtlIds.NEW_FOLDER_BUTTON), Process.GetCurrentProcess().Handle, IntPtr.Zero)
            End If

            ' Position the path editbox and it's label
            ' We'll repurpose the Title (static) control as the editbox label
            Dim treeTop As Integer = vMargin
            If hEdit <> IntPtr.Zero Then
                Dim xEdit As Integer = hMargin
                Dim cxEdit As Integer = rcDlg.Width - (2 * hMargin)
                Dim hLabel As IntPtr = Win32.GetDlgItem(hDlg, CtlIds.TITLE)
                If hLabel <> IntPtr.Zero Then
                    Dim labelText As String = "Folder: "
                    Win32.SetWindowText(hLabel, labelText)

                    ' This code obtains the required size of the static control that serves as the label for the editbox.
                    ' All this GDI code is a bit excessive, but I figured "what the hell".
                    Dim hdc As IntPtr = Win32.GetDC(hLabel)
                    Dim hFont As IntPtr = Win32.SendMessage(hLabel, Win32.WM_GETFONT, IntPtr.Zero, IntPtr.Zero)
                    Dim oldfnt As IntPtr = Win32.SelectObject(hdc, hFont)
                    Dim szLabel As Size = Size.Empty
                    Win32.GetTextExtentPoint32(hdc, labelText, labelText.Length, szLabel)
                    Win32.SelectObject(hdc, oldfnt)
                    Win32.ReleaseDC(hLabel, hdc)

                    Dim rcLabel As New Win32.RECT(hMargin, vMargin + ((rcEdit.Height - szLabel.Height) / 2), szLabel.Width, szLabel.Height)
                    Win32.MoveWindow(hLabel, rcLabel, False)

                    xEdit += rcLabel.Width
                    cxEdit -= rcLabel.Width
                End If

                ' Expand the folder tree to fill the dialog
                rcEdit = New Win32.RECT(xEdit, vMargin, cxEdit, rcEdit.Height)

                Win32.MoveWindow(hEdit, rcEdit, False)
                treeTop = rcEdit.Bottom + 5
            End If

            Dim rcTree As New Win32.RECT(hMargin, treeTop, rcDlg.Width - (2 * hMargin), rcDlg.Bottom - (treeTop + (2 * vMargin) + rcOK.Height))

            Win32.MoveWindow(hTree, rcTree, False)
        End Sub

        Private Sub _centerTo(hDlg As IntPtr, hRef As IntPtr)
            Dim rcDlg As Win32.RECT
            Win32.GetWindowRect(hDlg, rcDlg)

            Dim rcRef As Win32.RECT
            Win32.GetWindowRect(hRef, rcRef)

            Dim cx As Integer = (rcRef.Width - rcDlg.Width) / 2
            Dim cy As Integer = (rcRef.Height - rcDlg.Height) / 2
            Dim rcNew As New Win32.RECT(rcRef.Left + cx, rcRef.Top + cy, rcDlg.Width, rcDlg.Height)
            Win32.MoveWindow(hDlg, rcNew, True)
        End Sub

    End Class

End Namespace

'=======================================================
'Service provided by Telerik (www.telerik.com)
'Conversion powered by NRefactory.
'Twitter: @telerik, @toddanglin
'Facebook: facebook.com/telerik
'======================================================= 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-24T07:22:14.407

我看到上述对话框（以及我见过的任何其他对话框）存在两个问题：

1：您不能指定在对话框打开时将预先选择的自定义启动文件夹，比如说“c:\temp”

2：当您在文本框中键入路径并按 TAB 或 ENTER 时，这不应被视为最终选定的文件夹，而是树视图应移动并展开到该路径（就像您在 Windows 资源管理器中所做的一样）。

（很抱歉将此作为答案，无法发表评论）

# c - 数组，指针地址值混淆

> ID：14927768
> 
> 赞同：-1
> 
> 时间：2013-02-18T00:24:19.613
> 
> 标签：c, pointers

在运行下面的代码时，我得到了这个输出

```
num= 2359120, addr of num=2359120, *num=10,addr of num[0]=2359120 
```

我无法理解 num 和 &num 如何具有相同的值。有什么帮助吗？我知道数组的名称本身就是一个指针

```
#include <math.h>
#include<stdio.h>
main()
{
int num[]={10,20,30,40,50};
printf("num= %d, addr of num=%d, *num=%d,addr of num[0]=%d\n",num,&num,*num,&num[0]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T00:30:46.590

数组的名称与数组`num`的地址相同，数组`&num`的地址与第一个元素的地址相同`&num[0]`，因此也是您的输出。

# extjs - extjs4 mvc 中基于角色的视图

> ID：14927769
> 
> 赞同：3
> 
> 时间：2013-02-18T00:24:28.190
> 
> 标签：extjs, extjs4, extjs4.1, extjs4.2, extjs-mvc

我的应用程序对不同的角色（如管理员或标准用户）有不同的视图。我不知道如何使用 extjs4 MVC 实现它。extjs4 文档的示例认为应用程序只有一个角色，如标准用户，因此他们创建了一个 app.js 文件来管理应用程序，但如果应用程序有很多角色，我不知道如何为不同的用户实现不同的视图。
一个问题是我在应用程序中有两个 app.js 文件，在我获得服务器中的用户角色后，我加载适当的 app.js 文件以使用适当的视图、控制器、模型、商店等。
这件事是真的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:37:11.330

这是一个相当标准的问题，出现了很多次，答案总是一样的：

*   访问控制属于服务器，任何用户都无法对其进行操作
*   根本不向他无权访问的用户提供视图/模型/控制器

考虑到这一点，您拥有一个应用程序还是十个应用程序并不重要。

而且因为访问控制不属于前端，所以在 ExtJS 中没有实现。

**更新 -> 隐藏 UI 元素**

一种准备就绪的方法是使用`Ext.direct`. 这为应用程序提供了一个 API，该 API 可以根据当前用户的自定义访问权限进行修改，然后可以由前端进行检查。

如何：

根据用户会话创建 API 并检查客户端，如

```
if(Booking) {
   if (Booking.Create) {
       // has access
   }
} 
```

或作为一条线

```
{
    xtype: 'button',
    hidden: !(Booking && Booking.Create)
} 
```

这只是一个简单的例子，这很容易做到！

**更新** 此[链接](http://www.ibm.com/developerworks/web/library/wa-aj-streamline/index.html)帮助操作

# mysql - 更新或其他插入，多行

> ID：14927770
> 
> 赞同：0
> 
> 时间：2013-02-18T00:24:37.483
> 
> 标签：mysql, sql

我有一个有五列的表：`uid, lead_id, form_id, field_number, value`.

我想更新`value` `WHERE` `lead_id, form_id, and field_number`存在。在我的脚本中，我不知道 id（不执行查询），但是`lead_id, form_id, field_number`TOGETHER 也是`unique`. 有时，该行将`NOT exist`必须插入而不是更新。

它变得更加复杂，因为我有大约 30 行、`value`列，我想更新/插入并且宁愿在一个查询中执行此操作。

**更新** 这基本上是我今天使用的，但它没有更新（显然）不存在的行。因此，如果最初未填充数据，而是添加到更新中，则此数据不会添加到数据库中。

这是我目前拥有的：

UPDATE someTableName SET value = field_number WHEN field_number_value_1 THEN 'newValue1' WHEN field_number_value_2 THEN 'newValue2' WHEN field_number_value_3 THEN 'newValue3' END WHERE form_id = 3 AND lead_id = 37 AND field_number IN field_number_value_1, field_number_value_2, field_number_value_3";

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:26:57.640

```
INSERT INTO table (uid, lead_id, form_id, field_number, value) 
VALUES (1, 1, 1, 1, 0) 
ON DUPLICATE KEY UPDATE value = value + 1 ; 
```

更多信息：[关于重复密钥更新](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

# javascript - javascript 的字符串替换方法没有按预期工作

> ID：14927775
> 
> 赞同：0
> 
> 时间：2013-02-18T00:25:44.907
> 
> 标签：javascript, replace

我有以下句子：

`One Flew Over the Cuckoo's Nest`

我想从句子中删除任何实例，`"the"`因此`"'"`输出如下：

**预期输出：**

`one flew over cuckoos nest`

我使用以下代码：

```
var guess = "One Flew Over the Cuckoo's Nest";
guess = guess.toLowerCase().replace("'", "").replace("the", ""); 
```

**实际输出：**

`one flew over  cuckoos nest`

问题是后面出现了一个空格，`"over"`因为我只是`"the"`从那个特定的句子中删除，而不是之后的空格。

我知道我可以通过使用来解决这个问题，`replace("the ", "");`但我想要一种更好的方法来实现结果。

我可以使用正则表达式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T00:32:47.350

您将面临的一个问题是`replace`仅替换第*一个*匹配项。为了替换所有这些，您需要使用带有`g`lobal 修饰符的正则表达式。

```
guess = guess.toLowerCase().replace(/the|'/g,'').replace(/  +/g,' '); 
```

第二个`replace`包含两个空格，后跟一个`+`. 这将修复由被删除的单词引起的任何“损坏”空格。此外，在第一个镜头中，使用交替来同时获得`the`单词和撇号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T00:30:11.647

我个人会做

```
var guess = "One Flew Over the Cuckoo's Nest";
guess = guess.toLowerCase().replace("'", "").replace(" the", "").replace("the ", ""); 
```

我敢肯定有一些正则表达式，但似乎有点矫枉过正

我不是正则表达式专家，所以我无法为您提供正则表达式的解决方案

# c# - 模拟测试时找不到合约名称。

> ID：14927780
> 
> 赞同：0
> 
> 时间：2013-02-18T00:26:23.713
> 
> 标签：c#, wcf, testing, moq

我正在兜圈子试图找出这个错误。我正在使用 moq 框架执行模拟测试。测试代码是

```
[TestFixture]
[ServiceContract]
public class UnitTest1
{

    private ServiceHost host;
    [Test]
    public void TestMethod()
    {
        Mock mk = new Mock<ChatInterfaces.IChatService>();
        host = new ServiceHost(mk);
        host.AddServiceEndpoint(typeof(IChatService), new NetTcpBinding()
            , "net.tcp://localhost:8080/ChatService");
        host.Open();
        Console.WriteLine("Testing"); 
```

App.Config 文件具有以下绑定

```
<system.serviceModel>
    <services>
      <service name="ChatInterfaces.IChatService">
        <endpoint address="net.tcp://localhost:8080/ChatService" binding="netTcpBinding" bindingConfiguration="BindingConfiguration" name="ChatServiceEndPoint" contract="ChatInterfaces.IChatService">
        </endpoint>
      </service>
    </services>

    <bindings>
      <netTcpBinding>
        <binding name="BindingConfiguration" transferMode="Buffered"/>
      </netTcpBinding>
    </bindings>
  </system.serviceModel> 
```

当我运行它时，我得到以下错误。

```
Result Message: System.InvalidOperationException : The contract name     'ChatInterfaces.IChatService' could not be found in the list of contracts implemented by the service 'Moq.Mock`1[[ChatInterfaces.IChatService, ChatInterfaces, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'. 
```

我在这里做错了什么以及如何解决？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:29:47.977

尝试使用`mk.Object`实际获取`IChatService`实现，而不是`Mock<T>`对象。

```
Mock<ChatInterfaces.IChatService> mk = new Mock<ChatInterfaces.IChatService>();
host = new ServiceHost(mk.Object); 
```

# php - 将撇号添加到提交的变量到数据库中

> ID：14927786
> 
> 赞同：0
> 
> 时间：2013-02-18T00:27:23.643
> 
> 标签：php, mysql

我一直在努力处理这段代码。我无法添加像 O'Brian 这样的名字。使用撇号时，我收到错误“更新团队详细信息时出错：您的 SQL 语法有错误；” 当我从表格中取出撇号时，它运行正常。我哪里失败了？

```
if (isset($_POST['submit'])): 
$TeamName = mysql_real_escape_string($_POST['TeamName']); 

$sql = "UPDATE Team SET TeamName = 'TeamName'  WHERE id ='$id'";

else:

$id = $_GET['id']; 

$EditTeam=@mysql_query("SELECT *
                      FROM Team 
                      WHERE ID='$id'"); 
if (!$EditTeam) { 
die('<p>Error fetching Team details: ' . 
    mysql_error() . '</p>'); 
} 

$Team = mysql_fetch_array($EditTeam); 

$TeamName =  stripslashes($Team['TeamName']); 
```

* * *

这是整个代码！

```
<head>
<title>Update Contact Info</title>
<script type="text/javascript"> 
var newWindow = null; 

function closeWin(){ 
if (newWindow != null){ 
if(!newWindow.closed) 
newWindow.close(); 
} 
} 

function popUpWin(url, type, strWidth, strHeight){ 

closeWin(); 

if (type == "fullScreen"){ 

strWidth = screen.availWidth - 10; 
strHeight = screen.availHeight - 160; 
} 

var tools=""; 
if (type == "standard" || type == "fullScreen") tools = "resizable,toolbar=yes,location=yes,scrollbars=yes,menubar=yes,width="+strWidth+",height="+str    Height+",top=0,left=0"; 
if (type == "console") tools = "resizable,toolbar=no,location=no,scrollbars=yes,width="+strWidth+",height="+strHeight+",left=    0,top=0"; 
newWindow = window.open(url, 'newWin', tools); 
newWindow.focus(); 
} 
</script> 
</head>
<body alink="#0033FF"  link="#0033FF" vlink="#0033FF">
<center>
<?php include 'memberheader_b_ball.php';?>
</center>

<?php
$ID = mysql_real_escape_string($_GET['id']); 

if (isset($_POST['submit'])): 
// The team's details have 
// been updated. 

$TeamName = mysql_real_escape_string($_POST['TeamName']); 
$ID = $_POST['id'];
$teamage = $_POST['teamage'];
$teamcity = $_POST['teamcity'];
$teamstate = $_POST['teamstate'];
$division = $_POST['division'];
$contactname = $_POST['contactname'];
$contactlname = $_POST['contactlname'];
$contactaddressmore = $_POST['contactaddressmore'];
$contactaddress = $_POST['contactaddress'];
$contactcity = $_POST['contactcity'];
$contactstate = $_POST['contactstate'];
$contactcountry = $_POST['contactcountry'];
$contactzip = $_POST['contactzip'];
$contactphone = $_POST['contactphone'];
$contactcphone = $_POST['contactcphone'];
$contactfax = $_POST['contactfax'];
$contactemail = $_POST['contactemail'];
$coachname = $_POST['coachname'];
$coachlname = $_POST['coachlname'];
$coachaddress = $_POST['coachaddress'];
$coachcity = $_POST['coachcity'];
$coachstate = $_POST['coachstate'];
$coachzip = $_POST['coachzip'];
$coachsphone = $_POST['coachphone'];
$coachfax = $_POST['coachfax'];
$coachemail = $_POST['coachemail'];

$sql = "UPDATE Team SET 

      TeamName = 'TeamName',
              teamage='$teamage',
      teamcity='$teamcity',
      teamstate='$teamstate',
      division='$division',
      contactname='$contactname',
      contactlname='$contactlname',
      contactaddress='$contactaddress',
      contactaddressmore='$contactaddressmore',
      contactcity='$contactcity',
      contactcountry='$contactcountry',
      contactstate='$contactstate',
      contactzip='$contactzip',
      contactphone='$contactphone',
      contactcphone='$contactcphone',
      contactfax='$contactfax',
      coachname='$coachname',         
      coachlname='$coachlname',
      coachaddress='$coachaddress',
      coachcity='$coachcity',
      coachstate='$coachstate',
      coachzip='$coachzip',
      coachphone='$coachphone',
      coachfax='$coachfax',
      coachemail='$coachemail'
      WHERE id ='$ID'"; 

if (mysql_query($sql)) { 
echo("<div align='center'>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

<p><font size='6' face='Arial, Helvetica, sans-serif'><ul><strong>Processing your request, one moment.</strong></font><br>
<img src=\"images/animated_timer_bar.gif\" width=\"220\" height=\"18\"></p></div> 
<meta http-equiv=\"refresh\" content=\"1;URL=editcontact.php?id=$id\">");      

} else { 
die('<p>Error updating Team details: ' . mysql_error() . '</p>'); 
}

?>
<p> 
<?php
else: // Allow the user to edit the Team 
  // with ID=$id 

//$ID = mysql_real_escape_string($_GET['id']); 

$EditTeam=@mysql_query("SELECT *
                      FROM Team 
                      WHERE ID='$id'"); 
if (!$EditTeam) { 
die('<p>Error fetching Team details: ' . 
    mysql_error() . '</p>'); 
} 

$Team = mysql_fetch_array($EditTeam); 

$TeamName =  stripslashes($Team['TeamName']); 
$id = $Team['ID'];
$teamage = $Team['teamage'];
$teamcity = $Team['teamcity'];
$teamstate = $Team['teamstate'];
$division = $Team['division'];
$contactname = $Team['contactname'];
$contactlname = $Team['contactlname'];
$contactaddress = $Team['contactaddress'];
$contactaddressmore = $Team['contactaddressmore'];
$contactcountry = $Team['contactcountry'];
$contactcity = $Team['contactcity'];
$contactstate = $Team['contactstate'];
$contactzip = $Team['contactzip'];
$contactphone = $Team['contactphone'];
$contactcphone = $Team['contactcphone'];
$contactfax = $Team['contactfax'];
$contactemail = $Team['contactemail'];
$coachname = $Team['coachname'];
$coachlname = $Team['coachlname'];  
$coachaddress = $Team['coachaddress'];
$coachcity = $Team['coachcity'];
$coachstate = $Team['coachstate'];
$coachzip = $Team['coachzip'];
$coachphone = $Team['coachphone'];
$coachfax = $Team['coachfax'];
$coachemail = $Team['coachemail'];
$notes = $Team['notes'];
$wait1 = $Team['wait1'];
$wait2 = $Team['wait2'];
$wait3 = $Team['wait3'];
$wait4 = $Team['wait4'];
$wait5 = $Team['wait5'];

// Convert HTML special characters 
// in database value for use in 
// an HTML document. 
$contactemail = htmlspecialchars($contactemail);
$coachemail = htmlspecialchars($coachemail);

$EditGames=@mysql_query("SELECT *
                      FROM Games 
                      WHERE GID='1'"); //GID = Games ID
if (!$EditGames) { 
die('<p>Error fetching Team details: ' . 
    mysql_error() . '</p>'); 
} 

$Games = mysql_fetch_array($EditGames); 

$tourney1date = $Games['tourney1date']; 
$tourney2date = $Games['tourney2date']; 
$tourney3date = $Games['tourney3date']; 
$tourney4date = $Games['tourney4date']; 
$tourney5date = $Games['tourney5date']; 
$tourney1name = $Games['tourney1name']; 
$tourney2name = $Games['tourney2name']; 
$tourney3name = $Games['tourney3name']; 
$tourney4name = $Games['tourney4name']; 
$tourney5name = $Games['tourney5name']; 
$tourney1city = $Games['tourney1city']; 
$tourney2city = $Games['tourney2city']; 
$tourney3city = $Games['tourney3city']; 
$tourney4city = $Games['tourney4city']; 
$tourney5city = $Games['tourney5city'];   

if ($notes == '') {
$message = '';
} else {
$message = 'You have a message! Click to read it';
}
if ($wait1 == 'yes') {
$pay1 = 'Print a personal <a href="paymentform1.php?id=';        
$id1 = $Team['ID'];
$end1 = '">'. $tourney1name .'</a> payment form.<br>';}

if ($wait2 == 'yes') {
$pay2 = 'Print a personal <a href="paymentform2.php?id=';        
$id2 = $Team['ID'];
$end2 = '">'. $tourney2name .'</a> payment form.<br>';}

if ($wait3 == 'yes') {
$pay3 = 'Print a personal <a href="paymentform3.php?id=';        
$id3 = $Team['ID'];
$end3 = '">'. $tourney3name .'</a> payment form.<br>';}

if ($wait4 == 'yes') {
$pay4 = 'Print a personal <a href="paymentform4.php?id=';        
$id4 = $Team['ID'];
$end4 = '">'. $tourney4name .'</a> payment form.<br>';}

if ($wait5 == 'yes') {
$pay5 = 'Print a personal <a href="paymentform5.php?id=';        
$id5 = $Team['ID'];
$end5 = '">'. $tourney5name .'</a> payment form.<br>';}

?>
<font face="Arial, Helvetica, sans-serif">
<?
$var =  mysql_real_escape_string("O'Brian");
echo $var;

$var = stripslashes($var);
echo $var;
?> </font>
<form action= "editcontact.php?id=<?=$ID?>" method="post">
<font face="Arial, Helvetica, sans-serif">
<input type="hidden" name="id" value="<?=$ID?>" />
<div align="center">
<table width="80%" border="0" cellspacing="0" cellpadding="5">
  <tr> 
    <td width="15%"><div align="left"><font face="Arial, Helvetica, sans-serif"> 
        <input type="submit" name="submit" value="Save Changes" />
        </font> </div></td>
   <td width="85%"><div align="right">
        <table width="387">
          <tr> 
            <td width="379">&nbsp;</td>
          </tr>
        </table>

      </div>
   </td>
  </tr>
</table>

</div>
</font> <font face="Arial, Helvetica, sans-serif">
<hr align="center" width="80%" />
</font> 
<center>
<table width="80%" border="0" cellspacing="0" cellpadding="5">
  <tr> 
    <td><font face="Arial, Helvetica, sans-serif"><strong>Select division 
      for team.</strong> <br />
      </font> <table width="98%" border="0" cellspacing="0" cellpadding="5">
        <tr> 
          <td width="11%"><div align="center"><font face="Arial, Helvetica, sans-serif"><strong>8U</strong> 
              <input type="radio" name="division" value="8U"<?php if ($division == "8U") echo ("checked");?> />
              </font></div></td>
          <td width="11%"><div align="center"><font face="Arial, Helvetica, sans-serif"><strong>10U</strong> 
              <input type="radio" name="division" value="10U"<?php if ($division == "10U") echo ("checked");?> />
              </font></div></td>
          <td width="11%"><div align="center"><font face="Arial, Helvetica, sans-serif"><strong>12U</strong> 
              <input type="radio" name="division" value="12U"<?php if ($division == "12U") echo ("checked");?> />
              </font></div></td>
          <td width="12%"><div align="center"><font face="Arial, Helvetica, sans-serif"><strong>14U</strong><br />
              <input type="radio" name="division" value="14U"<?php if ($division == "14U") echo ("checked");?> />
              </font></div></td>
          <td width="12%"><div align="center"><font face="Arial, Helvetica, sans-serif"><strong>16U<br />
              </strong> 
              <input type="radio" name="division" value="16U"<?php if ($division == "16U") echo ("checked");?> />
              </font></div></td>
          <td width="17%"><div align="center"><font face="Arial, Helvetica, sans-serif"><strong>18U<br />
              </strong> 
              <input type="radio" name="division" value="18U"<?php if ($division == "18U") echo ("checked");?> />
              </font></div></td>
        </tr>
      </table>
      <center>
      </center></td>
    <td width="33%"><div align="center"><font face="Arial, Helvetica, sans-serif"><strong>      <a href="notes.php?id=<?=$ID?>" onclick="popUpWin(this.href,'console',400,350);return false;" onkeypress="popUpWin(this.href,'console',400,350);return false;" title="Link open's in a new window"> 
        <?php if ($notes == '') {  $message = '';} else { $message = 'You have a message! 
    <br /> Click to read it';} 
     print $message ?>
        </a></strong></font></div></td>
  </tr>
</table>
<font face="Arial, Helvetica, sans-serif">
<hr align="center" width="80%">
</font> 
<table width="91%" border="0">
  <tr> 
    <td height="27" colspan="3"><font face="Arial, Helvetica, sans-serif"><strong>Team 
      Name, Contact and Head Coach info</strong></font> </td>
    <td> <div align="right"><font size="-1" face="Arial, Helvetica, sans-serif">Team 
        Age </font> </div>
    <td colspan="2"><font face="Arial, Helvetica, sans-serif"> 
      <select name="teamage" size="1">
        <option value= "">Pick Age</option>
        <option value='10U'<?php if ($teamage == "10U") echo ("selected");?>>10U</option>
        <option value='12U'<?php if ($teamage == "12U") echo ("selected");?>>12U</option>
        <option value='14U'<?php if ($teamage == "14U") echo ("selected");?>>14U</option>
        <option value='16U'<?php if ($teamage == "16U") echo ("selected");?>>16U</option>
        <option value='18U'<?php if ($teamage == "18U") echo ("selected");?>>18U</option>
        <option value='18Gold'<?php if ($teamage == "18Gold") echo ("selected");?>>18Gold</option>
      </select>
      </font></td>
  </tr>
  <tr> 
    <td width="12%" height="29"><div align="right"><font size="-1" face="Arial, Helvetica, sans-serif">Team 
        Name</font></div></td>
    <td colspan="2"><font face="Arial, Helvetica, sans-serif"> 
      <input name="TeamName" type="text" value="<?=$TeamName?>" size="30">
      </font></td>
    <td width="10%"> <div align="right"><font size="-1" face="Arial, Helvetica, sans-serif">Team 
        Location </font> </div>
    <td colspan="2"> <font face="Arial, Helvetica, sans-serif"> 
      <input name="teamcity" type="text"  value="<?=$teamcity?>" size="15" />
      <font size="-1">State</font> 
      <input name="teamstate" type="text"  value="<?=$teamstate?>" size="2" />
      </font></td>
  </tr>
  <tr> 
    <td><div align="right"><font size="-1"><font size="-1"></font></font></div></td>
    <td width="18%"><div align="left"><font size="-2" face="Arial, Helvetica, sans-serif">First 
        Name </font></div></td>
    <td width="22%"><font size="-2" face="Arial, Helvetica, sans-serif">Last 
      Name </font></td>
    <td><div align="right"><font size="-1"><font size="-1"></font></font></div></td>
    <td width="17%"><div align="left"><font size="-2" face="Arial, Helvetica, sans-serif">First 
        Name </font></div></td>
    <td width="25%"><font size="-2" face="Arial, Helvetica, sans-serif">Last 
      Name </font></td>
  </tr>
  <tr> 
    <td><div align="right"><font size="-1" face="Arial, Helvetica, sans-serif">Contact 
        </font></div></td>
    <td colspan="2"><input name="contactname" type="text" value="<?=$contactname?>" size="20" /> 
      <input name="contactlname" type="text" id="contactlname" value="<?=$contactlname?>" size="20" /></td>
    <td><div align="right"><font size="-1" face="Arial, Helvetica, sans-serif">Head 
        Coach</font></div></td>
    <td colspan="2"><input name="coachname" type="text" value="<?=$coachname?>" size="20" /> 
      <input name="coachlname" type="text" id="coachlname" value="<?=$coachlname?>" size="20" /> 
    </td>
  </tr>
  <tr> 
    <td><div align="right"><font size="-1" face="Arial, Helvetica, sans-serif">Address 
        </font></div></td>
    <td colspan="2"><font face="Arial, Helvetica, sans-serif"> 
      <input name="contactaddress" type="text" value="<?=$contactaddress?>" size="30">
      </font></td>
    <td><div align="right"><font size="-1" face="Arial, Helvetica, sans-serif">Address</font></div></td>
    <td colspan="2"><font face="Arial, Helvetica, sans-serif"> 
      <input name="coachaddress" type="text" value="<?=$coachaddress?>" size="30">
      </font></td>
    </tr>
    <tr> 
    <td><div align="right"><font size="-1" face="Arial, Helvetica, sans-serif">More 
        add. </font></div></td>
    <td colspan="2"><font face="Arial, Helvetica, sans-serif"> 
      <input name="contactaddressmore" type="text" value="<?=$contactaddressmore?>" size="15" />
      </font></td>
    <td><div align="right"><font size="-1" face="Arial, Helvetica, sans-serif">City</font></div></td>
    <td colspan="2"><font face="Arial, Helvetica, sans-serif"> 
      <input name="coachcity" type="text" value="<?=$coachcity?>" size="15">
      <font size="-1">State</font> 
      <input name="coachstate" type="text" value="<?=$coachstate?>" size="2">
      <font size="-1">Zip</font> 
      <input name="coachzip" type="text" value="<?=$coachzip?>" size="4">
      </font></td>
  </tr>
  <tr> 
    <td><div align="right"><font size="-1" face="Arial, Helvetica, sans-serif">Country</font></div></td>
    <td colspan="2"><font face="Arial, Helvetica, sans-serif"> 
      <input name="contactcountry" type="text" id="contactcountry" value="<?=$contactcountry?>" size="15" />
      </font></td>
    <td><div align="right"><font size="-1" face="Arial, Helvetica, sans-serif">Phone</font></div></td>
    <td colspan="2"><font face="Arial, Helvetica, sans-serif"> 
      <input name="coachphone" type="text" value="<?=$coachphone?>" size="12" />
      <font size="-1">Fax</font> 
      <input name="coachfax" type="text" value="<?=$coachfax?>" size="12" />
      </font></td>
  </tr>
  <tr> 
    <td><div align="right"><font size="-1" face="Arial, Helvetica, sans-serif">City</font></div></td>
    <td colspan="2"><font face="Arial, Helvetica, sans-serif"> 
      <input name="contactcity" type="text" value="<?=$contactcity?>" size="15">
      <font size="-1">State</font> 
      <input name="contactstate" type="text" value="<?=$contactstate?>" size="2">
      <font size="-1">Zip</font> 
      <input name="contactzip" type="text" value="<?=$contactzip?>" size="4">
      </font></td>
    <td><div align="right"><font size="-1" face="Arial, Helvetica, sans-serif">Email</font></div></td>
    <td colspan="2"><font face="Arial, Helvetica, sans-serif"> 
      <input name="coachemail" type="text" value="<?=$coachemail?>" size="30" />
      </font></td>
  </tr>
  <tr> 
    <td><div align="right"><font size="-1" face="Arial, Helvetica, sans-serif">Phone</font></div></td>
    <td colspan="2"><font face="Arial, Helvetica, sans-serif"> 
      <input name="contactphone" type="text" value="<?=$contactphone?>" size="12">
      <font size="-1">Fax</font> 
      <input name="contactfax" type="text" value="<?=$contactfax?>" size="12">
      </font></td>
    <td>&nbsp;</td>
    <td colspan="2">&nbsp;</td>
  </tr>
  <tr> 
    <td><div align="right"><font size="-1" face="Arial, Helvetica, sans-serif">Cell 
        Phone</font></div></td>
    <td colspan="2"><font face="Arial, Helvetica, sans-serif"> 
      <input name="contactcphone" type="text" value="<?=$contactcphone?>" size="12">
      </font></td>
    <td><font size="-1">&nbsp;</font></td>
    <td colspan="2">&nbsp;</td>
  </tr>
  <tr> 
    <td><div align="right"><font size="-1" face="Arial, Helvetica, sans-serif">Email</font></div></td>
    <td colspan="2"><div align="center"><font size="-2" face="Arial, Helvetica, sans-serif">This 
        is your registered email address.</font><br />
        <font face="Arial, Helvetica, sans-serif"><? echo $contactemail; ?> 
        </font><font size="-2" face="Arial, Helvetica, sans-serif"><br />
        If this is no longer a valid email, contact system admin.</font></div></td>
    <td>&nbsp;</td>
    <td colspan="2">&nbsp;</td>
  </tr>
</table>
</center>
<hr align="center" width="80%">
<font face="Arial, Helvetica, sans-serif"><br>
</font>
<p></p>
</form>

<?php endif;?>
</font> 
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:35:14.403

`mysql_real_escape_string`在查询中使用`$id`值之前使用它。

更好的是，停止使用`ext/mysql`并切换到`PDO`/`mysqli`并使用参数化查询，这也将正确地转义您的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T01:53:17.057

代替

```
 $sql = "UPDATE Team SET TeamName = '$TeamName'  WHERE id ='$id'"; 
```

尝试

```
 $sql = "UPDATE Team SET TeamName = \"$TeamName\"  WHERE id ='$id'"; 
```

# php - php多张图片上传器

> ID：14927790
> 
> 赞同：0
> 
> 时间：2013-02-18T00:27:35.223
> 
> 标签：php, file-upload

看在上帝的份上，有人可以帮我制作下面的脚本来上传多张图片（5）。我被困在这几天没有运气。我不知道如何让它上传五张图片。请帮帮我。我尝试放置五个输入文件字段并给它们起一个名称，`name="file[]"`但这似乎不起作用。当我上传照片时，我看到一个错误提示，即使有文件，也请选择一张照片。

```
<?php

function uploadFile ($file_field = null,  $check_image = false, $random_name = false) {

//Config Section    
//Set file upload path
$path = 'Productpic/'; //with trailing slash
//Set max file size in bytes
$max_size = 2097152;
//Set default file extension whitelist
$whitelist_ext = array('jpg','png','gif', 'JPG');
//Set default file type whitelist
$whitelist_type = array('image/jpeg', 'image/png','image/gif','image/JPG');

//The Validation
// Create an array to hold any output
$out = array('error'=>null);

if (!$file_field) {
$out['error'][] = "Please specify a valid form field name";           
}

if (!$path) {
$out['error'][] = "Please specify a valid upload path";               
}

if (count($out['error'])>0) {
return $out;
}

//Make sure that there is a file
if((!empty($_FILES[$file_field])) && ($_FILES[$file_field]['error'] == 0)) {

// Get filename
$file_info = pathinfo($_FILES[$file_field]['name']);
$name = $file_info['filename'];
$ext = $file_info['extension'];

//Check file has the right extension           
if (!in_array($ext, $whitelist_ext)) {
  $out['error'][] = "<span class='isa_error2'>Invalid file Extension</span>";
}

//Check that the file is of the right type
if (!in_array($_FILES[$file_field]["type"], $whitelist_type)) {
  $out['error'][] = "<span class='isa_error2'>Invalid file Type</span>";
}

//Check that the file is not too big
if ($_FILES[$file_field]["size"] > $max_size) {
    $out['error'][] = "<span class='isa_error2'>File is too big</span>";
}

//If $check image is set as true
if ($check_image) {
  if (!getimagesize($_FILES[$file_field]['tmp_name'])) {
    $out['error'][] = "<span class='isa_error2'>The file you trying to upload is not an Image, we only accept Images</span>";
}
}

//Create full filename including path
if ($random_name) {

// Generate random filename
  $tmp = str_replace(array('.',' '), array('',''), microtime());

if (!$tmp || $tmp == '') {
$out['error'][] = "File must have a name";
}     
$newname = $tmp.'.'.$ext;                                
} else {
    $newname = $name.'.'.$ext;
}

//Check if file already exists on server
if (file_exists($path.$newname)) {
  $out['error'][] = "<span class='isa_error2'>The image you trying to upload already exists, please upload only once</span>";
}

if (count($out['error'])>0) {
  //The file has not correctly validated
  return $out;
} 

if (move_uploaded_file($_FILES[$file_field]['tmp_name'], $path.$newname)) {
  //Success

  $out['filepath'] = $path;
  $out['filename'] = $newname;
  return $out;
} else {
  $out['error'][] = "Server Error!";
}

} else {
$out['error'][] = "<span class='isa_error2'>Please select a photo</span>";
return $out;
}      
}
?>

<?php

if (isset($_POST['submit'])) {

$file = uploadFile('file', true, false);
if (!is_array($file['error'])) {
$message = '';
$sub=1;
$message = "<span class='isa_success'>File uploaded successfully</span>";

echo $message;
} 

}
?>

<html>
<head>
<style type="text/css" media="screen">
.isa_error2 {
border: 1px solid;

width:15%;
margin: 0px 0px;
padding:3px 20px 2px 50px;
background-repeat: no-repeat;
background-position: 10px center;-moz-border-radius:.5em;
-webkit-border-radius:.5em;
border-radius:.5em;

}

.isa_error2 {
color: #D8000C;
background-color: #FFBABA;
background-image: url('models/languages/error.png');
background-size: 28px 28px;
}
</style>
<meta name="viewport" content="width=device-width" />   
<link rel="stylesheet" href="horizontalmenu.css" type="text/css" media="screen" /><!-- Menu -->
</head>
<body id="wide">
<form action="" method="post" enctype="multipart/form-data" name="form1" id="form1">
<?php
ini_set( "display_errors", 0);
if($sub==0)
{
?><br><br>
<input name="file[]" type="file" size="20" multiple="true" />//this was what did
    <input name="file[]" type="file" size="20" multiple="true" />
    <input name="file[]" type="file" size="20" multiple="true" />
    <input name="file[]" type="file" size="20" multiple="true" />
    <input name="file[]" type="file" size="20" multiple="true" />
<span><?php

if (isset($_POST['submit'])) {
ini_set( "display_errors", 0);
$file = uploadFile('file', true, false);
if (is_array($file['error'])) {
$message = '';
foreach ($file['error'] as $msg) {
  $message = $msg;    
}
} 
echo $message;
}
?></span> <br><br><br>
<input name="submit" type="submit" value="Upload" />
<?php
}
?>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T17:32:47.280

其他人可能会阅读此内容，因此我将解释如何将输入的名称设置为`name="file[]"`.

这意味着您正在创建一个包含所选文件名的数组。为了稍后上传它们或将信息保存到数据库中，您必须遍历数组：

`foreach(file[] as $key){}`

在我看来，另一种解决方案，即更混乱的代码，是给每个文件输入一个不同的名称，就像提出问题的人解决了他的问题一样。

如果我错了，请纠正我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T01:22:40.370

嗯，我自己解决了这个问题.....我给输入字段起了不同的名称，如下所示，这很简单。这不应该花我几天的时间！

```
<input name="file" type="file" size="20" multiple="true" />
<input name="file2" type="file" size="20" multiple="true" />
<span><?php

if (isset($_POST['submit'])) {
ini_set( "display_errors", 0);
$file = uploadFile('file', true, false);
$file = uploadFile('file2', true, false);//added this line. 
if (is_array($file['error'])) {
$message = '';
foreach ($file['error'] as $msg) {
  $message = $msg;    
}
} 
echo $message;
}

?> 
```

最后是成功消息部分

```
<?php

if (isset($_POST['submit'])) {

$file = uploadFile('file', true, false);
$file = uploadFile('file2', true, false);
if (!is_array($file['error'])) {
$message = '';
$sub=1;
$message = "<span class='isa_success'>File uploaded successfully</span>";

echo $message;
} 

}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-18T11:16:27.120

我已经为使用 php 中的单个文本框上传的多个图像创建了一个解决方案。

```
<form method="post" action="" enctype="multipart/form-data" id="frmImgUpload">
  <input name="fileImage[]" type="file" multiple="true" />
  <input name="btnSubmit" type="submit" value="Upload" />
</form>

<?php
  $i=1;
  if ($_POST)
  {
    foreach($_FILES['fileImage']['name'] as $key => $i)
    {
      $file_name = $_FILES['fileImage']['name'][$key];
      $file_size =$_FILES['fileImage']['size'][$key];
      $file_tmp =$_FILES['fileImage']['tmp_name'][$key];
      $file_type=$_FILES['fileImage']['type'][$key];
      move_uploaded_file($file_tmp,"uploaded_img/".$file_name);
      $i++;
    }
  }
?> 
```

# ruby-on-rails - Active Record 语法问题和哈希循环

> ID：14927794
> 
> 赞同：1
> 
> 时间：2013-02-18T00:28:53.053
> 
> 标签：ruby-on-rails, ruby

我有一个这样的哈希：

```
POPULATION_SUMMARIES = {
    'ACO' => [   # year , member_count
        [2013, 523031],
        [2012, 492349],
        [2011, 432573]
    ]
} 
```

例如，“ACO”是组织表中组织的名称。我想将该哈希的结构插入到 PopulationSummary 表中，例如上面的哈希在 PopulationSummary 表中看起来像这样：

```
 ACO, 2013, 523031
    ACO, 2012, 492349
    ACO, 2011, 432573
Org_Name, year, member_count 
```

我是 ActiveRecord 方法的新手，也是处理散列、数组等的 Ruby 方法的新手。这就是我已经走了多远，但看起来我有一些语法错误，甚至我不确定代码是否看起来不错并且它是否有效。因此，如果您可以看一下以下代码中的错误：

```
 POPULATION_SUMMARIES.each do |org_name, summaries|
    org_id = Organization.find_or_create_by_name(org_name).id

    summaries.each do |year, member_count|
      PopulationSummary.create (
        :organization_id => org_id,
        :year         => year,
        :member_count => member_count
      )
    end
  end 
```

编辑：使用此代码我有很多错误，其中一些例如是：

> 语法错误，意外的 tASSOC，期待 ')' :organization_id => org_id,
> 
> 语法错误，意外 tASSOC，需要 tCOLON2 或 '[' 或 '.' ：年 => 年，
> 
> 语法错误，意外 tASSOC，需要 tCOLON2 或 '[' 或 '.' :member_count => member_count ^

# c++ - 在 C++ 中将整数列表表示为单个整数

> ID：14927795
> 
> 赞同：0
> 
> 时间：2013-02-18T00:28:59.817
> 
> 标签：c++, hash, key

我想将大约 100 个非负 32 位整数的列表压缩成一个整数。理想情况下，生成的整数始终是唯一的，但可以接受一些相对罕见的冲突。**我怎样才能做到这一点？**

我正在写一个解谜者。我的搜索算法的一部分是避免重新探索已经看到的谜题状态。我将使用从列表中生成的整数作为`statesAlreadySeen`表中的键。目前我使用字符串作为键。但是，从字符串键到整数键时，我已经看到了明显的性能改进，`map<,>`因此我想切换。

**编辑：**感谢无序的地图建议！但是我仍然对实际的散列函数感到好奇。IIRC 有一个简单的功能，涉及基本的位操作和异或运算。很高兴看到这一点并对碰撞概率有一些大致的了解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T00:52:17.140

正如评论中所建议的，您需要使用哈希函数。最容易完成`boost::hash_range`：

```
#include <boost/functional/hash.hpp>
std::size_t vectorhash(std::vector<int> f){
    size_t hash = std::size_t hash = boost::hash_range(f.begin(), f.end());
} 
```

话虽如此，如果你没有真正需要保持状态有序（我不明白你为什么会这样做），我会选择 us2012 的解决方案，即保留`string`密钥并切换到`unordered_map`- 从而让容器照顾散列。

# visual-studio-2010 - Orca 和设置项目：有条件地显示复选框

> ID：14927796
> 
> 赞同：1
> 
> 时间：2013-02-18T00:29:05.383
> 
> 标签：visual-studio-2010, installation, windows-installer, setup-project, orca

我正在为我的应用程序创建一个安装程序，使用`Setup Project`. `VS 10`安装程序中有一个`Checkboxes (A)`表格。我的问题是，我想基于一个注册表项有条件地显示该表单。我怎样才能做到这一点？我正在`Orca`编辑我的安装程序文件，但我应该更改什么以有条件地显示此表单？当我编辑`InstallUISequence`>`CustomCheckA_SetProperty_CHECKBOX1`时，复选框的值发生了变化。我看不到任何其他属性，我可以编辑来实现这一点:(。请帮忙，非常感谢！问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T10:10:08.670

您需要定义[注册表搜索](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367579%28v=vs.85%29.aspx)以查看您的条目是否存在。搜索名称实际上是安装程序的公共属性，因此您可以使用它来设置条件。

要在 MSI 对话框中隐藏/显示启用/禁用控件，您需要[在 Control Condition table 中](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368035%28v=vs.85%29.aspx)添加一个控制条件。确保为同一个控件定义了两个控件条件，一个在条件不满足时隐藏它，一个在条件为真时显示它。

# javascript - jQuery：神秘的 Json 解析错误

> ID：14927800
> 
> 赞同：1
> 
> 时间：2013-02-18T00:29:44.357
> 
> 标签：javascript, jquery, json, parsing

我在一个页面上遇到一个错误，其代码在另一个页面上可以完美运行......这里是：

```
$.each(json,function(index,element){
var tr = $("<tr>").appendTo($tabbody);
$(tr).append('<td><a target="_blank" href="forum.php?t='+element.topic_id+'">'+element.topic_nom+"</a></td>"+'<td>'+element.date_heure+"</td>");
}); 
```

json 是 php 页面上的 GET 请求的结果：

```
$data = $query->fetchAll(PDO::FETCH_ASSOC);
echo json_encode($data); 
```

结果示例：

```
[
    {
    "topic_nom": "Deuxième question de linterro manip 5",
    "topic_id": "1",
    "user_nick": "Symael",
    "user_id": "1",
    "msg_id": "10",
    "date_heure": "2013-02-17 18:28:04"
    },
    {
    "topic_nom": "Quel est le sens de la vie ?",
    "topic_id": "2",
    "user_nick": "Symael",
    "user_id": "1",
    "msg_id": "10",
    "date_heure": "2013-02-17 18:28:04"
    }
] 
```

哪个是有效的 Json ......我得到的错误是：

```
TypeError: invalid 'in' operand e
...ute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r... 
```

如果我尝试 $.parseJSON(json); ：

```
SyntaxError: JSON.parse: unexpected character
...ute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r... 
```

[当我在http://jsonlint.com/](http://jsonlint.com/)上验证我的 Json 时，结果是：

```
Parse error on line 1:
[    {        "to
^
Expecting '{', '[' 
```

如果手动重写第一个 [ 它突然变得有效。我想我是这里一个非常奇怪的故障的受害者，有人可以帮助我吗？哦

* * *

这是解决方案，请参阅 Stoive 的答案以获取解释。

```
 obj = $.parseJSON(json.trim());
    $.each(obj,function(index,element){
      var tr = $("<tr>").appendTo($tabbody);
      $(tr).append('<td><a target="_blank" href="forum.php?t='+element.topic_id+'">'+element.topic_nom+"</a></td>"+'<td>'+element.date_heure+"</td>");
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T00:52:05.830

很多时候，[字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark)可以潜入保存在记事本等编辑器中的文件中。

尝试获取`json`位置 0 的字符代码和`console.log`结果：

```
console.log(json.charCodeAt(0).toString(16)); 
```

You should be getting `5b` as the result, and not something like `feff`. If that's the case, then `JSON.parse(json.trim())` could help by removing the invisible whitespace characters.

# javascript - 处理数组中的 observables

> ID：14927802
> 
> 赞同：0
> 
> 时间：2013-02-18T00:30:02.307
> 
> 标签：javascript, knockout.js, knockout-2.0

*注意：这* ***不是*** *关于 ObservableArrays 的问题。*

假设我有以下视图模型：

```
var viewmodel = {
    arrayOfBooleans: [
        ko.observable(false),
        ko.observable(false),
        ko.observable(false)
    ]
} 
```

像这样的视图：

```
<div data-bind="foreach: arrayOfBooleans">
    <button data-bind="click: ????">Set to true</button>
</div> 
```

我可以在里面做什么`foreach`来让`<button>`点击时将 observable 设置为 true？使用`data-bind="click: someFunction"`，第一个参数`someFunction`获取的是数组中可观察对象的展开值（不是可观察对象本身），并且似乎无法返回可观察对象或传递自定义参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:44:26.107

希望它会给一些想法。

```
var viewmodel = {
  var self = this;
 self.arrayOfBooleans = ko.observableArray([]);

 self.arrayOfBooleans.push(new _newBoolean());
 self.arrayOfBooleans.push(new _newBoolean());
 self.arrayOfBooleans.push(new _newBoolean());

 function _newBoolean() { 
   self.one = ko.observable(false);
 }

self.setToTrue = function(index){
   self.arrayOfBooleans()[index].one(true);
 };
 } 
```

**如果你想要它作为按钮**

```
<div data-bind="foreach: arrayOfBooleans">
  <button data-bind="click: $root.setToTrue($parent.arrayOfBooleans.indexOf($data))"> 
   Set to true
  </button>
  <input type=hidden data-bind="value:one" />
</div> 
```

**如果你想要它作为单选按钮，它比它简单得多**

```
<div data-bind="foreach: arrayOfBooleans">
  <span>Set To True</span><input type=radio data-bind="value:one" />
</div> 
```

**如果你喜欢这个..请点击uplink** **或** **如果它解决了你的问题..标记为答案**

# javascript - 使用 javascript 创建链接

> ID：14927809
> 
> 赞同：0
> 
> 时间：2013-02-18T00:31:36.653
> 
> 标签：javascript

我正在尝试在 JS 中创建一个链接，该链接将人从他来自的页面移动。这是代码。

```
<script  language="javascript">
function Jump()
{
document.href=document.referrer;
}
</script> 
```

这是html，

```
<a href="#" onclick="Jump();">Skip and Continue</a> 
```

现在，当用户单击链接时，什么也没有发生。请指导我哪里做错了。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:34:25.020

如何使用下面的代码向后移动

```
 history.back(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T00:35:15.693

`document.referrer`许多浏览器出于隐私原因不会使用，特别是如果推荐人来自另一个域。

相反，请尝试`onclick="history.go(-1)"`代替您的`Jump()`功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T00:35:29.477

**绑定点击监听器比使用更好`onclick`。**

尝试将其更改为：

```
<a id="myLink" href="#">Skip and Continue</a> 
```

和 Javascript：

```
<script type="text/javascript">
document.getElementById('myLink').addEventListener('click', function(e) {
    e.preventDefault();
    document.location.href=document.referrer; //actually better as "history.back()"
}
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T00:46:59.703

它不是 document.href 而是 window.location.href ......

```
<script>
function Jump(){
    if(document.referrer)location.href=document.referrer;
    else history.back();
}
</script> 
```

（如果您使用跳转到达当前页面，则没有引荐来源网址。）

# ios - 在底部为 UITableView 添加页脚

> ID：14927813
> 
> 赞同：6
> 
> 时间：2013-02-18T00:31:44.403
> 
> 标签：ios, objective-c, uitableview

我正在使用 a 制作幻灯片菜单，菜单`UITableView`上有 2 个选项，我想在底部放置一个按钮，如下图所示：

![在此处输入图像描述](../Images/276108c2d21c3dbd6a9a8cf83df31c6e.png)

我尝试这样做添加一个`tableFooterView`这样的。

```
UIView *footerView  = [[UIView alloc] initWithFrame:CGRectMake(0, 500, 320, 70)];
footerView.backgroundColor = [UIColor blackColor];
self.tableView.tableFooterView = footerView; 
```

但是，视图出现在第二个单元格之后，但我希望它位于底部。

感谢帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-23T14:15:14.553

不，你不应该添加任何空单元格，这只是 hacky。如果你真的需要按钮在底部，你应该使用 layoutSubviews 来控制 tableView 和 footerView 的框架。

```
- (void)layoutSubviews
{
   [super layoutSubviews];
   self.tableView.frame = // top 80% of the screen
   self.footerView.frame = // bottom 20% of the screen
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T00:58:45.470

你应该知道每个`UITableViewCell`都有它的高度，而页脚是 a 的一部分，`UITableView`并将出现在 a 的底部`UITableView`。如果你想让你`UITableView`看起来像那个图像显示的那样，你应该确保你的单元格足够高，以确保你的单元格足够`UITableView`高，这样页脚就会出现在底部`UITableView`

我的建议是添加额外的“空”单元格（我的意思是一个没有内容但有高度的单元格）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-31T12:03:30.577

从情节提要中添加带有视图控制器的容器视图。您可以使用自动调整大小将按钮设置在正确的位置。

# java - AffineTransform() 太快地旋转矩形

> ID：14927817
> 
> 赞同：0
> 
> 时间：2013-02-18T00:32:12.473
> 
> 标签：java, swing, awt, java-2d, affinetransform

我正在尝试使用 java awt 绘制一个矩形，并通过鼠标拖动使其随鼠标光标旋转。

当我测试它时，矩形旋转得非常快。

我的矩形（）：

```
private Rectangle2D rec = new Rectangle2D.Float(x0,y0,w,h);
AffineTransform recTrans = new AffineTransform();
int pivotX = x0+w/2, pivotY = y0+h;
// (0,0) is at the top-left corner 
```

我的油漆组件（）：

```
 public void paintComponent(Graphics g) {
    Graphics2D graph = (Graphics2D) g;
            graph.translate(x,y);
            graph.transform(recTrans);
            graph.fill(rec);
            graph.setColor(Color.blue);
            graph.draw(rec);
} 
```

我的鼠标拖动事件：

```
 addMouseListener(new MouseAdapter() {
    public void mousePressed(MouseEvent e) {
            previousX = e.getX();
            previousY = e.getY();
        }
    });
 addMouseMotionListener(new MouseMotionAdapter() {
    public void mouseDragged(MouseEvent e) {
        currentX = e.getX();
        currentY = e.getY();

        double angle1 = Math.atan2(currentY-pivotY, currentX-pivotX);
        double angle2 = Math.atan2(previousY-pivotY, previousX-pivotX);
        double theta = angle2 - angle1;
        recTrans.rotate(theta, pivotX, pivotY);
        }
    }); 
```

所以据说场景看起来像：

![在此处输入图像描述](../Images/fd1caa080e2db897970e412a76296865.png)

但是，当我将矩形稍微拖动（θ 小于 10 度）到右侧时，矩形甚至会旋转到枢轴点的底部。

另请注意，矩形旋转但矩形的四个角的坐标尚未更改。

用java做这些转换任务时我很迷茫。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T01:54:10.887

我认为问题在于您正在为获得的每个鼠标运动事件累积旋转：当您将鼠标移动 10 度时，您不会在移动结束时仅获得一个事件，而是会一直收到一堆事件道路。并且看起来你在同一个变换中累积了所有它们的旋转，所以当你达到 10 度时，你实际上已经`1 + 2 + 3 + 4...`明白了。

解决方案很简单：在应用旋转之前重置转换：

```
recTrans.setToIdentity();
recTrans.rotate(theta, pivotX, pivotY); 
```

或者等效但更好的是，使用这个不累积转换的函数。

```
recTrans.setToRotation(theta, pivotX, pivotY); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-27T19:30:06.207

```
recTrans.rotate(Math.toRadians(theta), pivotX, pivotY); 
```

这会有所帮助。

# php - 使用 json_encode 传递 PHP 数组以使用 JavaScript 读取

> ID：14927819
> 
> 赞同：-2
> 
> 时间：2013-02-18T00:32:13.840
> 
> 标签：php, javascript, jquery, arrays, json

在 query.php 文件中执行 mySQL 查询后，我最终使用 json_encode() 函数得到了这种格式的数组。

```
["A","B", "C"]. 
```

但是，我不太确定如何在单独的 HTML 文件中将此数组与 JavaScript 一起使用。在做了一些研究之后，这是我能够收集到的脚本。

```
$(document).ready(function() {
    $.getJSON('query.php', function(data) {        
        if(data)
        {
            document.write(data);   
            alert('success');    
        }
        else
        {
            alert('error');
        }
    });
}); 
```

我的问题是，如何将该 PHP 数组（如上所示）复制到另一个可以与 JavaScript 一起使用的数组中？或者标签之间显示的脚本的最佳替代方案是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T00:50:24.320

在`query.php`回声中，结果像

```
echo json_encode($result_array); // Assume $result_array as array("A","B", "C") 
```

在`success`函数中，您可以像这样使用它

```
 if(data)
    {
        alert(data[0]); // will alert A    
    } 
```

或者你可以使用

```
$.each(data, function(k, v){
    console.log(k + ' = ' + v ); // k is key/index and v is value
}); 
```

这将输出（在控制台中）

```
0 = A
1 = B
2 = C 
```

[你可以检查这个例子](http://jsfiddle.net/U6MjQ/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T00:34:22.710

它只是一个简单的函数调用：`json_encode`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T00:39:37.607

您必须在您的 PHP 页面上回显 json 编码数组，否则它将不起作用。然后你使用你找到的函数，成功后你使用 $.each 循环来实际显示内容。

见[http://jquerybyexample.blogspot.be/2012/05/how-to-read-and-parse-json-using-jquery.html](http://jquerybyexample.blogspot.be/2012/05/how-to-read-and-parse-json-using-jquery.html)

# sql - 通过 SAS 在 DB2 中将 CYYMMDD 转换为 SAS 日期

> ID：14927823
> 
> 赞同：1
> 
> 时间：2013-02-18T00:32:38.217
> 
> 标签：sql, db2, sas

我正在寻找将 CYYMMDD 格式的日期（其中 C 是 0 代表 20 世纪或 1 代表 21 世纪）为标准 SAS 日期。此代码将使用“proc sql”放置在 SAS 查询中，以便它可以将 SAS 日期与存储在 DB2 中的日期进行比较。

示例：输入数据=1130101，输出='1Jan2013'd

我试过的例子是：

```
(substr(t1.'EffectDate'n,4,2)|| '/' || substr(t1.'EffectDate'n,6,2) || '/' || cast(substr(t1.'EffectDate'n,1,3) AS INTEGER) + 1900) 
```

这对 cast() 函数失败（似乎它不存在？）

也试过：

```
convert(varchar(10), convert(datetime, right(t1.'EffectDate'n, 6), 12), 101) 
```

但是 varchar(10) 不存在。

我的查询如下所示：

```
proc sql;
create table CLAIMS as select
          t1.CID, 
          t1.MID, 
          t1.DOS 
          OTHER_TABLE.ChangeDate AS EffectDate
      FROM
        SOURCE.REJECTED t1
      INNER JOIN
        EGTASK.OTHER_TABLE
      ON
        t1.DOS >= *Converted_Date*
      [... goes on a couple more lines...] 
```

其中 *Converted_Date* 是我需要的。

（但是，我应该澄清一下，这个特定的查询/连接不一定需要是 SQL）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T01:00:47.060

要将变量从当前编码格式转换为正确的 SAS 日期变量，您需要将其转换为字符串，然后使用该`INPUT`函数读取结果。例如：

```
data _null_;
  do EffectDate = 1130101,0130101;

     cEffectDate = put(EffectDate,z7.);
     if substr(cEffectDate,1,1) = '0'
         then SASEffectDate = input('19' || substr(cEffectDate,2),yymmdd8.);
         else SASEffectDate = input('20' || substr(cEffectDate,2),yymmdd8.);
     put EffectDate=
       / SASEffectDate=
       / ;
     end;
  format SASEffectDate yymmdd10.;
run; 
```

这只是一个插图，有点啰嗦；它创建一个名为 SASEffectDate 的新 SAS 变量以保留原始变量。将其作为 SAS 变量后，您无需执行任何其他操作；SAS Access 产品将知道如何引用外部数据库。

下面是一个使用 做类似事情的例子`PROC SQL`：

```
data have; /* Just a dummy data set for illustration */
  do EffectDate = 1130101,0130101;
     i+1;
     output;
     end;
run;
proc sql;
   create table want as
   select t2.*
        , case when t2.EffectDate < 999999 /* starts with 0 */
             then input('19' || substr(put(EffectDate,z7.),2),yymmdd8.)
             else input('20' || substr(put(EffectDate,z7.),2),yymmdd8.)
             end as SASEffectDate format=yymmdd10.
    from have t2
    ;
quit; 
```

# actionscript-3 - 为什么我的自定义 FlxSprite 没有出现在舞台上？

> ID：14927826
> 
> 赞同：1
> 
> 时间：2013-02-18T00:32:51.880
> 
> 标签：actionscript-3, flixel

我通过创建一个新类（Fireball.as）并在类名后键入“extends FlxSprite”，为火球创建了一个自定义 FlxSprite。在构造函数中，它调用了一个名为“shoot()”的函数，该函数将其指向目标并播放声音：

```
private function shoot():void {
    dx = target.x - x;
    dy = target.y - y;
    var norm:int = Math.sqrt(dx * dx + dy * dy);
    if (norm != 0) {
        dx *= (10 / norm);
        dy *= (10 / norm);
    }
    FlxG.play(soundShoot);
} 
```

然后，我创建了一个数组来保存游戏状态（PlayState.as）中的所有火球：

```
public var fire:Array = new Array(); 
```

然后在我的 input() 函数中，当有人按下鼠标按钮时，它会在数组中推送一个新的火球：

```
if (FlxG.mouse.justPressed()) {
    fire.push(new Fireball(x, y, FlxG.mouse.x, FlxG.mouse.y));
} 
```

但是当我测试它时，它只播放声音，但没有出现火球。我猜火球在舞台外的某个地方，但我该如何解决呢？

如果有帮助，这里是 Fireball.as 的构造函数：

```
public function Fireball(x:Number, y:Number, tar_x:Number, tar_y:Number) {
    dx = 0;
    dy = 0;
    target = new FlxPoint(tar_x, tar_y);
    super(x, y, artFireball);
    shoot();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:39:18.037

我认为您必须将它们添加到舞台上。

```
if (FlxG.mouse.justPressed()) {
    var fireball:Fireball = new Fireball(x, y, FlxG.mouse.x, FlxG.mouse.y);
    fire.push(fireball);

    // This line needs to be changed if you add the fireball to a group, 
    //  or if you add it to the stage from somewhere else
    add(fireball);
} 
```

让我知道它是否对您有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T16:36:07.550

如前所述，问题是由于未将 FlxSprite 添加到 Flixel 显示树。但我也建议您使用[FlxObject 组](http://flixel.org/docs/org/flixel/FlxGroup.html "Flx 集团")而不是简单的数组。

FlxGroups 是比数组更好的数据结构**。**例如，它们从 FlxObject 继承所有方法，因此您可以直接针对组检查冲突，它们也具有处理对象集合的特定方法，例如`countDead`and `countAlive`（如果您使用`alive`属性）`recycle`，`getFirstDead`等等在。

看看吧，你不会失望的。:)

# git - 远程回退到先前的提交

> ID：14927827
> 
> 赞同：21
> 
> 时间：2013-02-18T00:32:53.013
> 
> 标签：git

作为一名初级 git 用户，我对艰难的合并感到不知所措，一定是做错了什么。我最终用源文件中的一大堆垃圾来解决冲突。提交显示了许多看起来像`<<<<<<< HEAD`和的行的添加`>>>>>>> a7b4de79431c2e73d28621c72c8d14820df1a24b`。提交已经被推送到远程源，所以很遗憾我不能只修改提交。

我想将远程存储库倒回到最后一次良好的提交，`4a3ba7b0e56cf0be80274c1f879029220a889bde`并（如果可能）销毁错误的提交`d004651972cbc35f70ee5a2145b6e03169c77279`。

我试过了：

```
git checkout 4a3ba7
git push -f 
```

并得到：`fatal: You are not currently on a branch.`

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-18T00:34:43.780

`checkout`将您当前的工作目录移动到以前的提交，但它不会修改分支内容。您需要将分支重置回旧提交，然后推送。

```
git checkout ...
git reset --hard 4a3ba7
git push -f 
```

也就是说，如果您已经`push -f`打算只更改最近的提交，您应该能够使用`--amend`.

```
git checkout ...
// Fix the file
git commit --amend
git push -f 
```

如果至少有一些您希望在之后提交的更改，`4a3ba7`那么您也可以这样做：

```
git checkout ...
git reset 4a3ba7
git add -p
// Use the interactive prompt to choose the parts you want
git commit
git push -f 
```

### 更新

您的错误`remote: error: denying non-fast-forward refs/heads/master`是因为您使用的 git 服务器 Assembla 默认不允许重写历史记录。请参阅此答案以修复该部分：[Undo git push to Assembla](https://stackoverflow.com/questions/13344483/undo-git-push-to-assembla)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-18T00:51:42.303

您无需在本地结帐即可回退远程分支；你可以使用

```
git push -f origin 4a3ba7b0:master 
```

当然，在做任何事情之前仔细检查你的日志，因为这个推送**会**覆盖远程数据。

如果收到权限错误，`receive.denyNonFastForwards`可能`true`在远程存储库中设置为；在任何情况下，您都必须更改它才能使倒带正常工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-18T00:35:39.757

你可以做一个

```
git reset --hard *commithash* 
```

但请注意：这可能会导致修改后的数据丢失！（你被警告了 ：））

# ruby-on-rails - 这个rails代码有什么作用？:on => :成员

> ID：14927828
> 
> 赞同：4
> 
> 时间：2013-02-18T00:33:15.230
> 
> 标签：ruby-on-rails

请你能解释一下这段代码是做什么的吗？

```
resources :products do
 get :who_bought, :on => :member
end 
```

完整的代码来自实用程序编程一书，但它没有解释为什么我们使用该代码，“：on =>：member”

```
Depot::Application.routes.draw do
  resources :orders

resources :line_items
 post 'line_items/decrease'

resources :carts

get "store/index"

resources :products do
   get :who_bought, :on => :member
end

root :to => 'store#index', :as => 'store' 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T00:37:33.627

通过`:on => :member`意味着您正在处理数据库中的特定记录，在本例中为产品。所以路由生成的url是

`/products/:id/who_bought`

这意味着您想要获取 id 为 :id 的产品并处理 who_bought 操作。对方 ,`:on => :collection`期望该操作适用于产品列表，因此 url 看起来像

`/products/who_bought`

如果您将成员更改为集合。您可以看到该路线不需要 :id 传递，因为它不希望您处理单个记录。

# git - Git 不提交目录内容

> ID：14927831
> 
> 赞同：2
> 
> 时间：2013-02-18T00:33:24.907
> 
> 标签：git, git-commit, git-add

我正在尝试通过 git 添加我在目录中的每一件事。但是，对于一个特定目录，它会加载文件夹，但不会加载任何内容。我试着用

```
git add -A 
```

但被退回

```
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#   (commit or discard the untracked or modified content in submodules)
#
#   modified:   sendgrid-php (untracked content)
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

在尝试提交我的更改时。这里可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:39:02.500

一种可能的方法是

```
git add directory/* 
```

或者如果您已经从该目录提交了文件，然后您就可以制作一个

```
git commit -a 
```

这将添加并提交所有修改过的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T00:47:23.430

目录`sendgrid-php`是 git 子模块，因此 git 不会跟踪其中的内容，除非您将 CD 放入其中并提交它们。

# objective-c - 二进制数的解法是什么 V2

> ID：14927833
> 
> 赞同：-5
> 
> 时间：2013-02-18T00:33:31.743
> 
> 标签：objective-c, binary, binary-data, equation

有谁知道我该如何解决这个问题？任何帮助都会很棒......我似乎无法理解它。

如您所知，二进制只能是 1 或 0

假设您有一个 8 位二进制数，例如字节 >>>>>> 0001 1000

我试图找出一个方程式，或者你可以从一个 8 位数字中获得的最大组合数量是多少

我的意思是....假设您有一个两位二进制数，您可以拥有的最大二进制数组合是

00

01

10

11
因此，2 位二进制数的最大组合总数 = 4

示例 2

如果您有 3 位数字，则最大二进制组合为

000

001

010

100

101

111

110

011
因此，来自 3 位数字的总最大二进制组合 = 8

示例 3

如果它是一个 4 位数字，那么您可以拥有的最大二进制组合是

0000

0001

0010

0100

1000

0111

0110

1111

1110

1101

1011

1001 总最大组合 = 12

我最近问了这个问题，并得到了回答，谢谢 manu-fatto 和 zgnilec，他们很友好地让我知道这是一个简单的方程式，答案/方程式是 2 ^ 数字大小。

我想我的下一个问题是如何编写一个可以在 Xcode 或 NSLog 中显示这些组合的小程序。我对目标 C 很好，我可以像 NSLog 一样查看的输出会很棒。

我所知道的是它看起来像：

```
int DigitSize=8
int CombinationTotal = 2^8
CombinationSize = NSMutableArray  ArraywithCapacity 8; 
```

输出

```
NSString  Combination1 =@"0000 0000";
NSString  Combination2 =@"0000 0001";
NSString  Combination3 =@"0000 0010";

Nslog @"combination 1 = %@  ,Combination1";
Nslog @"combination 2 = %@  ,Combination2";
Nslog @"combination 3 = %@  ,Combination3";

……

Nslog @"combination 256 = ???? ???? "; 
```

对不起，我在 3 个月前才开始学习编程，语言模糊，我还有很多教程要学习。

**我正在尝试构建数据压缩算法...

基本上数据压缩是关于减少位数......位数越少文件越小

IE

700bits 文件比 900bits 文件小

8 位 = 1 个字节

1024 字节 = 1kb

1024kb = 1 mb

我不知道它是否可能，但我只是想如果你有一个可以一次读取 1024 位的算法...用方程 thats = 2^1024 = 数学错误:( == 可能的位组合总数

获得组合总数后，您可以将每个组合设置为一个符号，例如 000101010010101011001011011010101010140010101101000000001110100101100001010100000......0011010 = 符号#

所以从现在开始，只要计算机看到符号#，它就识别它等于二进制数0001010100101010110010110110101010101400101011010000000001110100101100001010100000......0011010

为了更好地理解它……想想汽车/车辆上的车牌，它们只是几个字符，但是当你将它们打入警察数据库或任何汽车数据库时，更多信息就会出现其相同的原理……

基本上这些符号是获取更多数据的关键

我不知道这是否有意义，但......理论上你是否可以一次读取 8388608 位

8388608 位 = 1 兆字节......

十个符号可能意味着 10mb...您可以创建数字媒体二维条码，这只是我在观看 starGate 时的一个想法，哈哈 :)**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T00:35:03.693

2 的 8 次方，其中 8 是位数。

编辑-只阅读第一个问题:)

创建将整数显示为二进制的函数

```
for (i = 0; i < pow(2,n), i++)
{
    displayBits(i);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T02:07:50.473

快速实施

```
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{

    @autoreleasepool {
        NSUInteger length = 8;  // number of digits
        NSUInteger n = pow(2, length); // number of possible values
        for (int i = 0; i < n; i++) {
            NSString *repr = @"" ;
            for (int j = 0; j < length; ++j) {
                if([repr length] % 5 == 0)
                    repr = [@" " stringByAppendingString:repr]; // add a blank after evey 4th digit
                int x =( i >> j) &1;
                repr = [[NSString stringWithFormat:@"%u",x] stringByAppendingString:repr];
            }
            NSLog(@"%@", repr);                
        }
    }
    return 0;
} 
```

输出

```
0000 0000 
0000 0001 
0000 0010 
0000 0011 
0000 0100 
0000 0101 
0000 0110 
0000 0111 
0000 1000 
0000 1001 
0000 1010 
0000 1011 
0000 1100 
0000 1101 
0000 1110 
0000 1111 
0001 0000 
…
1110 1100 
1110 1101 
1110 1110 
1110 1111 
1111 0000 
1111 0001 
1111 0010 
1111 0011 
1111 0100 
1111 0101 
1111 0110 
1111 0111 
1111 1000 
1111 1001 
1111 1010 
1111 1011 
1111 1100 
1111 1101 
1111 1110 
1111 1111 
```

这个程序的核心是这样的：

```
for (int i = 0; i < n; i++) {
    //…
    for (int j = 0; j < length; ++j) {
        int x =( i >> j) &1;
        //…
    }
} 
```

这将运行 i =0 bis (2^n)-1 并在内部 for 循环中对 n 位中的每个 j 运行，以检查最小位是否为 1，并将其附加到表示字符串。

作为初学者，您可能不知道这意味着什么：`int x =( i >> j) & 1;`

[`>>`将](http://en.wikipedia.org/wiki/Bitwise_operation#Shifts_in_C.2C_C.2B.2B.2C_C.23)左侧整数的位移动与右侧定义的一样多的小数位。并[`& 1`执行一些明智的加法](http://en.wikipedia.org/wiki/Bitwise_operation#AND)

所以对于 i == 3 和 n == 8

```
 3 as binary                         string representation
j = 0: 00000011 >> 0 ->  0000 0011 
                        &0000 0001
                        -----------
                        00000 0001 -> 1     repr = 1

j = 1: 00000011 >> 1 ->   000 0001 
                        &0000 0001
                        -----------
                        00000 0001 -> 1     repr = 11

j = 2: 00000011 >> 2 ->    00 0000
                        &0000 0001
                        -----------
                        00000 0000 -> 0     repr = 011

j = 3: 00000011 >> 3 ->     0 0000 
                        &0000 0001
                        -----------
                        00000 0000 -> 0     repr = 0011

  (the same till j = 7)                     repr = 0000 0011 
```

# image-processing - 我如何在 pycairo 中读取 svg 数据中风？

> ID：14927840
> 
> 赞同：5
> 
> 时间：2013-02-18T00:34:24.853
> 
> 标签：image-processing, svg, pycairo

我有JPG图像和inputsvgdraw，一个用于图像注释的Flash工具（[http://www.mainada.net/inputdraw](http://www.mainada.net/inputdraw)），我可以在其上跟踪生成svg数据的线条。

svg 数据样本：

```
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 488 325"><g fill="none"   stroke-miterlimit="6" stroke-linecap="round" stroke-linejoin="round"><path d="M 307 97 l 0 -1 l -2 -1 l -10 -2 l -20 -1 l -25 5 l -22 9 l -10 9 l 0 9 l 2 12 l 16 18 l 25 11 l 25 5 l 17 -1 l 6 -4 l 3 -7 l -1 -12 l -6 -16 l -7 -13 l -11 -12 l -11 -14 l -9 -5" opacity="1" stroke="rgb(170,37,34)" stroke-width="5"/></g></svg>. 
```

什么功能可以管理这些数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T02:49:52.480

您可以通过使用读取 SVG 输入`librsvg`，然后使用`cairo`. 如果您想在 SVG 中在初始图像上绘制注释，您可能需要使用`PIL`with，`numpy`因为`cairo`它本身不会加载许多不同的图像格式。

以下是实现这一目标的示例（唯一的区别是实际上我使用临时`ctypes`包装器对其进行了测试`rsvg`）：

```
import sys
import rsvg
import cairo
import numpy
from PIL import Image

# Load an image that supposedly has the same width and height as the svg one.
img_rgba = numpy.array(Image.open(sys.argv[1]).convert('RGBA'))
data = numpy.array(img_rgba.tostring('raw', 'BGRA'))
width, height = img_rgba.size

surface = cairo.ImageSurface.create_for_data(data,
        cairo.FORMAT_ARGB32, width, height)
ctx = cairo.Context(surface)

# "Paste" the svg into the image.
svg = rsvg.Handle(file=sys.argv[2])
svg.render_cairo(ctx)

surface.write_to_png(sys.argv[3]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-08T21:44:34.783

[cairosvg](https://cairosvg.org/)可以将 SVG 文件加载到 pycairo ImageSurface：

```
from cairocffi import ImageSurface
from cairosvg.parser import Tree
from cairosvg.surface import PNGSurface

def load_svg(svg: bytes) -> ImageSurface:
    return PNGSurface(Tree(bytestring=svg), None, 1).cairo 
```

我使用 PNGSurface，因为它将数据渲染到 ImageSurface。此处不使用 PNG 功能。

不幸的是 cairosvg 使用[cairocffi](https://cairocffi.readthedocs.io/en/stable/)而不是 pycairo。这就是为什么我将整个项目改为 cairocffi。这只需要采用进口和一个小的改变。

# r - R：基于列值创建 3D 矩阵

> ID：14927842
> 
> 赞同：2
> 
> 时间：2013-02-18T00:34:28.100
> 
> 标签：r, multidimensional-array

我有一个具有以下前两列的矩阵：位置，年份。接下来是 50 列，每个日历日一列。如果该位置未被访问，则天数列具有“NA”，如果该位置被访问，则为 1。

例子：

```
Location Year 1  2  3  4  5  6  7 8  9  10 .... 50
Site1    2005 NA NA NA 1  NA NA 1 NA NA 1  .... NA
Site2    2006 NA NA 1  NA NA NA 1 NA NA 1  .... NA 
```

我之前使用过 reshape 包来创建 4 维矩阵，数据框中的每一列都用作变量来融化然后转换数组。但是在这里，我有多个列，它似乎也不起作用。

我想创建以下内容：

```
dim Y: locations
dim X: days 1-50
dim Z: Years 
```

这几乎就像从每年中提取数据，并按天数组一个接一个地堆叠每个位置。有谁知道以这种方式创建三维数组的最佳方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T00:56:33.957

目前尚不清楚您想要什么（您给出最终结果的一些值，而不仅仅是结构，以及一些要处理的数据）

首先我复制你的数据

```
dat <- data.frame(Location =c('Site1','Site2'),
           Year=c(2005,2006))
dat <- cbind(dat,matrix(sample(c(1,NA),100,rep=T),ncol=50)) 
```

然后使用`reshape2`我得到这个：

```
library(reshape2)
melt(dat,id.vars=c('Location','Year'))
    Location Year variable value
1      Site1 2005        1    NA
2      Site2 2006        1    NA
3      Site1 2005        2     1
4      Site2 2006        2    NA
5      Site1 2005        3    NA
6      Site2 2006        3     1
7      Site1 2005        4     1
8      Site2 2006        4    NA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T00:57:41.477

我猜你想删除NA。

```
library(reshape2)

test <- read.table(text="Location Year 1  2  3  4  5  6  7 8  9  10
Site1    2005 NA NA NA 1  NA NA 1 NA NA 1
Site2    2006 NA NA 1  NA NA NA 1 NA NA 1", h=T)

melt(test, id = c("Location", "Year"), na.rm = TRUE, variable.name = "day")[, -4]

#    Location Year  day
# 6     Site2 2006   X3
# 7     Site1 2005   X4
# 13    Site1 2005   X7
# 14    Site2 2006   X7
# 19    Site1 2005  X10
# 20    Site2 2006  X10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T00:50:49.337

图书馆可能有更清洁的方法`reshape2`，但使用 lapply 会给你干净的列表。如果您需要它们作为数组，只需转换为

```
arr <- lapply(unique(dat$Location), function(L) dat[dat$Location==L, -1])

# add names, to keep it neat
names(arr) <- unique(dat$Location)

# Convert to array if needed
arr <- as.array(arr) 
```

# google-api - 在同一个网站中使用多个谷歌搜索 API 密钥？

> ID：14927843
> 
> 赞同：2
> 
> 时间：2013-02-18T00:34:29.220
> 
> 标签：google-api, api-key

我使用 Google 搜索 API 制作了一个自定义搜索引擎。搜索引擎有 2 个独立的引擎（类别），我想为它们使用单​​独的 API 密钥。这是否违反了谷歌的服务条款？

# ruby-on-rails - Rails nested_attributes_for 无法进行更新

> ID：14927844
> 
> 赞同：1
> 
> 时间：2013-02-18T00:34:36.063
> 
> 标签：ruby-on-rails, nested-forms, nested-attributes

这是我在这里的第一个问题，所以希望它能解决。我已经四处寻找类似问题的人，但到目前为止还没有找到任何东西。我确定这很简单，但我现在看不到它！

我正在尝试在 rails 3.2.11 中保存模型的嵌套属性，但该操作仅在*创建*嵌套对象时有效，但在*更新*它时无效。

这是我使用的 2 个模型的代码

```
class Property < ActiveRecord::Base

  has_many :opening_times
  accepts_nested_attributes_for :opening_times, :allow_destroy => true
  attr_accessible :opening_times_attributes

...

class OpeningTime < ActiveRecord::Base
  belongs_to :property
  attr_accessible :start_date, :end_date

  attr_accessible :day, :start_time, :end_time
  attr_writer :day, :start_time, :end_time

  before_save :set_dates

...

  def set_dates
    day = Date.parse(@day)
    start_time = Time.parse(@start_time)
    end_time = Time.parse(@end_time)

    start_date = "#{day.day}/#{day.month}/#{day.year} #{start_time.hour}:#{start_time.min}"
    self.start_date = DateTime.parse(start_date)

    end_date = "#{day.day}/#{day.month}/#{day.year} #{end_time.hour}:#{end_time.min}"
    self.end_date = DateTime.parse(end_date)
  end 
```

因此，当我尝试使用 rails 控制台通过属性创建开放时间时，它可以工作：

```
1.9.3p125 :006 > p = Property.find(9)
1.9.3p125 :006 > p.opening_times_attributes = [{"day"=>"27/02/2013", "start_time"=>"11:30",     "end_time"=>"12:30", "_destroy"=>"false"}]
 => [{"day"=>"27/02/2013", "start_time"=>"11:30", "end_time"=>"12:30", "_destroy"=>"false"}] 
1.9.3p125 :007 > p.save!
 (0.1ms)  begin transaction
 Suburb Load (0.2ms)  SELECT "suburbs".* FROM "suburbs" WHERE "suburbs"."name" = 'BARREN GROUNDS' LIMIT 1
 SQL (0.6ms)  INSERT INTO "opening_times" ("end_date", "property_id", "start_date") VALUES (?, ?, ?)  [["end_date", Wed, 27 Feb 2013 12:30:00 UTC +00:00], ["property_id", 9], ["start_date", Wed, 27 Feb 2013 11:30:00 UTC +00:00]]
 (2.8ms)  commit transaction
 => true 
```

但是当我尝试更新现有的嵌套对象（在哈希中传递 id）时，它什么也没做

```
1.9.3p125 :037 > p.opening_times
 => [#<OpeningTime id: 12, property_id: 9, start_date: "2013-02-27 11:00:00", end_date: "2013-02-27 13:00:00">] 
1.9.3p125 :038 > p.opening_times_attributes = [{"day"=>"27/02/2013", "start_time"=>"11:30", "end_time"=>"12:30", "_destroy"=>"false", "id"=>12}]
 => [{"day"=>"27/02/2013", "start_time"=>"11:30", "end_time"=>"12:30", "_destroy"=>"false", "id"=>12}] 
1.9.3p125 :039 > p.save!
(0.1ms)  begin transaction
Suburb Load (0.2ms)  SELECT "suburbs".* FROM "suburbs" WHERE "suburbs"."name" = 'BARREN GROUNDS' LIMIT 1
(0.1ms)  commit transaction
 => true 
1.9.3p125 :040 > exit 
```

根据我到目前为止所阅读的内容（即[http://archives.ryandaigle.com/articles/2009/2/1/what-s-new-in-edge-rails-nested-attributes](http://archives.ryandaigle.com/articles/2009/2/1/what-s-new-in-edge-rails-nested-attributes)），这应该适用于两种操作。

知道我做错了什么吗？

谢谢！

[编辑]

根据@jvnill 的建议，更新时似乎没有调用 before_save 回调。我添加了一种解决方法，以在更新任何字段然后它起作用时显式调用 set_dates。

```
def day=(day)
  @day = day
  set_dates unless (@day.blank? || @start_time.blank? || @end_time.blank?)
end

def start_time=(start_time)
  @start_time = start_time
  set_dates unless (@day.blank? || @start_time.blank? || @end_time.blank?)
end

def end_time=(end_time)
  @end_time = end_time
  set_dates unless (@day.blank? || @start_time.blank? || @end_time.blank?)
end 
```

它并没有完全解决问题，因为现在验证不能无缝地工作，而且似乎我不得不手动完成 AR 应该做的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:58:30.227

我会检查您是否可以在不首先使用嵌套属性的情况下更新您的子模型。您的验证或回调代码可能正在停止更新，并且您的`nested_attributes`调用没有任何问题。

那么，这行得通吗？

```
> o = p.opening_times.first
> o.update_attributes({"day"=>"27/02/2013", "start_time"=>"11:30", "end_time"=>"12:30"}) 
```

如果没有，请禁用您的验证和回调并查看nested_attributes 是否正确通过。

**编辑：**

好的，所以看起来问题出在嵌套属性调用上。如果你尝试这个会发生什么？

```
> p.update_attributes(opening_times_attributes: [{"day"=>"27/02/2013", "start_time"=>"11:30", "end_time"=>"12:30", "_destroy"=>"false", "id"=>12} ]) 
```

请注意，我正在打电话`update_attributes`而不是设置`opening_times_attributes`

**编辑2：**

如果您可以通过嵌套属性销毁记录，我怀疑某些东西正在拒绝您对子模型的更改。你检查过验证错误吗？您是否尝试过仅更新 1 个属性？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:53:42.487

受上述答案的启发，我意识到您必须明确告诉 AR 在设置某些虚拟属性时字段正在更改，否则永远不会调用 before_save 回调。

这不是很好，但我发现解决这个问题的方法是调用 {attr}_will_change！每当设置虚拟属性时：

```
def day=(val)
  unless val == self.day
    start_date_will_change!
    end_date_will_change!
  end
  @day = val
end

def start_time=(val)
  start_date_will_change! unless val == self.start_time
  @start_time = val
end

def end_time=(val)
  end_date_will_change! unless val == self.end_time
  @end_time = val
end 
```

感谢大家的回复！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T01:05:12.080

我想我现在知道你的问题了。当`_save`记录中没有任何更改时，不会触发回调。由于您在`before_save`没有真正更改父模型上的任何内容的情况下调用，因此不会触发回调。尝试使用`before_validation`而不是`before_save`.

# gwt - 尝试在 MBP 上使用 Sublime Text 2 编译 GWT 代码

> ID：14927846
> 
> 赞同：1
> 
> 时间：2013-02-18T00:34:46.847
> 
> 标签：gwt, sublimetext2

我正在开发一个基于 GWT 的小型 Web 应用程序，并使用 Sublime Text 2 作为 GWT 代码的编辑器。我在我的 PATH 中添加了以下 jar：

gwt-2.5.0/gwt-user.jar

仍然当我构建入口点 java 文件时，Sublime Text 抱怨它看不到任何 GWT 包。

我在路径中使用 gwt-user.jar，因为我看到 Eclipse 需要它来构建文件。是否可以使用 ST 编译 GWT 代码，还是应该默认使用 Eclipse？

# html - CSS 使 Anchor 标签在 IE 中不起作用

> ID：14927861
> 
> 赞同：0
> 
> 时间：2013-02-18T00:37:00.180
> 
> 标签：html, internet-explorer, internet-explorer-9, css-float

我正在使用一个示例网站，标题菜单 html 看起来像这样

```
<div id="header">
    <h1>
        ASP.NET MVC MUSIC STORE</h1>
    <ul id="navlist">
        <li class="first"><a href="/">Home</a></li>
        <li><a href="/Store">Store</a></li>
    </ul>
</div> 
```

现在在 Chrome 中，链接可以工作，它们在悬停时会改变颜色，并在单击时转到正确的页面。在 IE 9（仅兼容模式）中，它们根本无法工作或响应点击。

我将其追溯到#header 上的 CSS 样式

```
#header
{
    float: left;
    width: 100%;
    border-bottom: 1px dotted #5D5A53;
    z-index:999;
    margin-bottom: 10px;
} 
```

如果我取出浮子：左；链接工作正常。我的问题是为什么会这样？

如果我删除此行，页面上的其他任何内容都不会改变。

# ios - 在Objective-C中查找数组中元素子数组的最有效方法是什么？

> ID：14927862
> 
> 赞同：2
> 
> 时间：2013-02-18T00:37:07.493
> 
> 标签：ios, objective-c

我有一个数组（`NSArray`或`NSMutableArray`无关紧要）：`SpecID`特定文件`ID`s（`109234`等）。而且我有一大堆所有文件`ID`: `FilesID`。
我需要检查是否`FilesID`包含`SpecID`.

所以问题是什么是最快和最有效的方法，除了在循环中简单地比较所有元素。可能有一些标准方法或有效算法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-18T00:41:11.763

你可以使用集合：

```
NSSet *specIDs = [NSSet setWithArray:specIDarray];
NSSet *fileIDs = [NSSet setWithArray:fileIDarray];

if ([specIDs isSubsetOfSet:fileIDs])
{
    // Your file IDs contains every ID found in specIDarray
} 
```

为了有效地工作，理想情况下，对象应该是`NSNumber`对象，或者如果它们是自定义对象，它们应该同时覆盖`hash`和`isEqual:`。集合的效率主要取决于拥有一个好的`hash`. 基础类，例如`NSNumber`，`NSString`等具有良好的哈希值。

此外，如果可以的话，将您的 ID 直接加载到集合中，而不是从数组中转换它们，因为这会稍微更有效率，但除此之外，上面的方法可能就很简单了。可能有专门的算法会表现得更好，但只有在上述方法太慢时才探索这些选项。

# terminal - Debian下如何在GNU screen中获得40多个窗口

> ID：14927865
> 
> 赞同：4
> 
> 时间：2013-02-18T00:37:15.027
> 
> 标签：terminal, debian, gnu-screen

我正在使用名为 screen 的终端程序，它可以在单个“真实”终端中创建多个“虚拟终端”（这里的“虚拟”和“真实”这两个词是相对的，“真实”终端可以是一个 konsole 选项卡好吧，不一定是 tty1-tty6）。问题是我不能在一个屏幕内创建超过 40 个窗口。当我尝试创建更多时，屏幕显示“不再有窗口”。经过一番谷歌搜索，我发现这是由一个叫做 MAXWIN 的东西控制的，但我没有找到任何信息如何修改这个 MAXWIN。如何增加单个屏幕内的最大窗口数？

我使用 Debian 6“挤压”。

PS我知道我可以在几个“真实”（在上述意义上）终端中运行多个屏幕，但这使得使用多个显示模式（screen -x）变得更加困难。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T21:40:58.357

这是一个编译时选项。严格使用来自上游的软件包，这是无法完成的。如果你想自己编译屏幕，你可以做到这一点。在`config.h.in`文件中查找。将在顶部附近`# define MAXWIN 40`。将其更改为您的新限制。

（[更多信息](http://lists.debian.org/debian-user/2012/01/msg01003.html)）

# android - AS3 + AIR 3.5/3.6 中的 Error.getStackTrace() 在 Android 上不返回堆栈跟踪

> ID：14927867
> 
> 赞同：0
> 
> 时间：2013-02-18T00:37:29.400
> 
> 标签：android, actionscript-3, stack-trace

我使用 AIR 3.4 在 Flashdevelop 中开发了一个项目。我已将（外部）Flex SDK 文件夹升级到 AIR 3.6，并且还在 application.xml 文件中以这种方式引用 3.6：

<application xmlns="http://ns.adobe.com/air/application/3.6">

但是，在部署 APK 之后，我仍然没有从捕获的错误事件中获得任何堆栈跟踪。知道我忽略了什么吗？我知道 AIR 3.5 在发布模式下也启用了堆栈跟踪，但我得到的只是“null”。哦，我正在使用强制运行时进行编译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:57:13.967

我现在已经下载了最新最好的 flashdevelop 版本，确保 flash develop 自己的 flex 版本也是 AIR 3.6，现在它似乎正在工作 - 我得到了有效的堆栈跟踪，正如 AIR 3.5 的更新日志中所宣传的那样

# android - 以编程方式清除短信通知

> ID：14927871
> 
> 赞同：1
> 
> 时间：2013-02-18T00:37:50.243
> 
> 标签：android, text, notifications, sms

我制作了一个可以代替股票消息应用程序的应用程序。它基本上是一个弹出窗口，当它进入时显示文本消息。

当有短信进来时，手机显然会在通知托盘中放置一条通知。用户查看我的弹出窗口后，如何清除此通知？当他查看我的弹出窗口时，该消息在收件箱中被标记为“已读”，但通知并未清除。我该怎么做呢？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T01:08:02.120

在通知生成器中使用 setAutoCancel() 方法：

```
NotificationCompat.Builder builder = new NotificationCompat.Builder(
                context);
builder.setAutoCancel(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-05T08:56:31.747

您可以[`NotificationListenerService`](http://developer.android.com/reference/android/service/notification/NotificationListenerService.html)在您的项目中包含它，它允许您收听手机上发布的所有通知。

之后，您可以使用`cancelNotification()`方法清除要关闭的通知。

请注意，用户需要明确授予您的应用程序[通知访问权限](http://developer.android.com/reference/android/Manifest.permission.html#BIND_NOTIFICATION_LISTENER_SERVICE)，以便您的应用程序访问通知。

# google-app-engine - Google App Engine - 终端脚本

> ID：14927873
> 
> 赞同：1
> 
> 时间：2013-02-18T00:37:59.790
> 
> 标签：google-app-engine, import, terminal

我正在尝试从终端（Mac OS）运行我的一些 python 脚本，但我遇到了导入错误。例如，如果我尝试导入 main，我会得到以下信息：

```
ImportError: No module named webapp2 
```

如果我尝试导入模型脚本，我会得到以下信息：

```
ImportError: No module named yaml 
```

我的 .bash_profile 有这个 PYTHONPATH 设置 -

```
export GAE="/usr/local/google_appengine"
export PYTHONPATH="$PYTHONPATH:$GAE:$GAE/lib/django_1_4:$GAE/lib/:$GAE/lib/yaml" 
```

我也尝试过这种方法：

```
import os
import sys

DIR_PATH = os.path.abspath(os.path.dirname(os.path.realpath(__file__)))
# ...

EXTRA_PATHS = [
          DIR_PATH,
          os.path.join(DIR_PATH, 'lib', 'antlr3'),
          os.path.join(DIR_PATH, 'lib', 'django'),
          os.path.join(DIR_PATH, 'lib', 'fancy_urllib'),
          os.path.join(DIR_PATH, 'lib', 'ipaddr'),
          os.path.join(DIR_PATH, 'lib', 'webob'),
          os.path.join(DIR_PATH, 'lib', 'yaml', 'lib'),
]
# ...
sys.path = EXTRA_PATHS + sys.path 
```

然后我在尝试导入其他 GAE 脚本之前导入该脚本，但它仍然无法正常工作。任何人都设置了终端来运行他们的 GAE 脚本？如果是这样，你是怎么做到的/我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T00:43:00.237

常见问题，第一次让我很沮丧。如果您开始自己追逐所有各种进口，您最终会走上一条似乎没有逻辑的科学怪人之路。然后我终于读到了 GAE SDK 是如何自己做的。将 GAE 添加到以下文件后，在文件顶部尝试此操作`PYTHONPATH`：

```
import dev_appserver
dev_appserver.fix_sys_path() 
```

祝你好运！

# security - 什么是内联脚本？

> ID：14927874
> 
> 赞同：-3
> 
> 时间：2013-02-18T00:38:03.343
> 
> 标签：security, inline, policy

这是一个简单的问题，但我浏览了互联网和 Stack Overflow，但找不到任何人直接说出答案。

什么是内联脚本？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T00:53:49.903

通常这是指 sql 脚本。因此，您可以选择在代码中内联 sql，而不是使用存储过程，如下所示：

string sql = "SELECT * FROM MyTable";

但是，您可以将其应用于其他事物。任何时候你硬编码这种性质的东西，如果你可以在外部定义它，它就会被认为是内联的。例如 Javascript。您可以添加一个脚本块并添加 javascript 'inline'，或者您可以将您的脚本合并到一个外部 .js 文件中。

IMO，内联只是意味着您硬编码了可以在外部定义的内容，例如在配置文件中可能更容易修改。或者不是把你的脚本块放在最后，而是把它插入到你的 html 中间，内联。

# javascript - JavaScript 立即函数调用 - 为什么函数周围需要括号？

> ID：14927876
> 
> 赞同：0
> 
> 时间：2013-02-18T00:38:25.957
> 
> 标签：javascript

为什么函数声明需要用括号括起来才能立即调用？我很好奇解释器如何在括号中读取立即调用的函数。

IE

为什么我必须这样做...

```
(function() { 
   // Logic 
 })(); 
```

而不是这个...

```
function() { 
   // Logic 
 }(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T00:39:53.703

当一个函数被括在括号中时，它被解析为一个表达式——一个函数表达式。否则，如果没有它们，它将被解析为函数*声明*。函数声明需要一个它认为您没有给它的名称，这反过来会导致语法错误。此外，您不能将`()`内联应用于函数声明以调用它。空括号是语法错误，但非空括号是一个表达式，它将与函数分开计算。

# yii - 一次处理多条记录，使用相同的表格

> ID：14927877
> 
> 赞同：0
> 
> 时间：2013-02-18T00:38:42.760
> 
> 标签：yii, multiple-records

我有一个表，其中包含同一用户的多条记录（每条记录略有不同 - 出于某种原因）。我需要能够使用标准的 Yii 表单一次编辑每条记录。

我已经尝试了以下代码，但我需要它等待每个表单提交，然后循环继续显示下一条记录的表单。目前，它在一个页面上同时显示每条记录的表单。

我确信我在很多很多项目之前就想出了如何做到这一点，但我不记得我做了什么让它正常工作:(

```
public function actionProcess()
{
    $system = get some data;

    foreach ($system as $item):
        $this->getExperience($item);
    endforeach;
}

protected function getExperience($item)
{
    $model = get data for the form

    if(isset($_POST['the_form'])):
        $model->attributes=$_POST['the_form'];
        if($model->save())
            return true;
    endif;

    $this->render('the_form', array('model'=>$model,));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:18:29.307

谢谢你的建议。我想出了自己的解决方案，为了他人的利益，我将分享：

```
$_stack = array(); // defined in the Class global space

public function actionProcess()
{
    $system = get some data

    foreach ($system as $item):
        $this->_stack[] = $item->id;
    endforeach;

    if(!empty($this->_stack))
        $this->getExperience();
}

protected function getExperience()
{
    if(empty($this->_stack))
        $this->redirect(array('somewhere else'));

    $model = get data for the form using $_stack[0] as the reference for what to obtain

    if(isset($_POST['the_form'])):
        $model->attributes=$_POST['the_form'];

        if($model->save()):
            array_shift($this->_stack);
            $this->getExperience();
        endif;
    endif;

$this->render('the_form', array('model'=>$model,));
} 
```

# php - 日期时间选择器表单验证

> ID：14927882
> 
> 赞同：1
> 
> 时间：2013-02-18T00:39:29.370
> 
> 标签：php, javascript, jquery, user-interface

我一直在尝试为我的表单创建验证。我一直在寻找如何在日期时间选择器和假期中禁用周末。我正在使用来自 Trentrichardson [http://trentrichardson.com/examples/timepicker/的这个 Jquery 脚本](http://trentrichardson.com/examples/timepicker/)

我是 JS 的新手，因为我找不到让这段代码工作的方法，所以我要拔掉头发了：

```
$(document).ready(function(){
    $('.timepicker').datetimepicker({ beforeShowDay: $.datepicker.noWeekends });

    var natDays = [
    [2, 26, 'ph'], [2, 6, 'ph'], [2, 17, 'ph']
    ];

    function noWeekendsOrHolidays(date) {
        var noWeekend = $.datepicker.noWeekends(date);
        if (noWeekend[0]) {
            return nationalDays(date);
        } else {
            return noWeekend;
        }
    }

    function nationalDays(date) {
        for (i = 0; i < natDays.length; i++) {
            if (date.getMonth() == natDays[i][0] - 1
            && date.getDate() == natDays[i][1]) {
                return [false, natDays[i][2] + '_day'];
            }
        }
        return [true, ''];
    }

}); 
```

我昨天找到了这段代码，这是正确的答案（[可以让 jQuery UI Datepicker 禁用周六和周日（和节假日）吗？](https://stackoverflow.com/questions/501943/can-the-jquery-ui-datepicker-be-made-to-disable-saturdays-and-sundays-and-holid)），但我无法让它工作。它不显示假期，但周末已被禁用（工作）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T03:30:59.647

检查日期是周六还是周日不需要单独的函数：

```
if (date.getDay() % 6) {
  // date is not a weekend
} else {
  // date is a weekend
} 
```

检查公共假期（由于日期每年和地点都在变化，这可能会更加困难）也很容易。以设定的格式创建日期列表（ISO8601 很方便），然后您可以针对当前日期进行测试：

```
// You may have a function like this already
// d is a javascript Date object
function dateToISO(d) {
  function z(n){return (n<10? '0':'')+n}
  return d.getFullYear() + '-' +
         z(d.getMonth() + 1) + '-' + 
         z(d.getDate());
}

// s is a date string in ISO8601 format
function isPublicHoliday(s) {
  var holidays = '2012-12-25 2012-12-26'; // list holidays
  var m = holidays.match(s);
  return !!(m && m.length);
}

isPublicHoliday(dateToISO(date));  // true for 2012-12-25 
```

当然，您会希望以不同的方式实现上述内容，但它为您提供了要点。大概日期选择器返回一个日期对象，或者您可以测试的格式化字符串。对字符串进行测试非常快，并且可以节省大量使用数组和函数的麻烦。也很容易维护，因为日期非常易于阅读。

# sqlite - flashbuilder 4.6 - 如何包含一个 sqlite 数据库并复制到 storageDirectory

> ID：14927884
> 
> 赞同：0
> 
> 时间：2013-02-18T00:39:47.043
> 
> 标签：sqlite, actionscript-3, apache-flex, flash-builder, flex4.5

我在 flashbuilder 4.6 中完成了一个应用程序，最初是在应用程序首次运行时在其中创建一个新的 sqlite 数据库和表......但我现在想在 /src/views/assets 中包含一个数据库文件/ 文件夹，当应用程序运行时，将该文件复制到 application.StorageDirectory - 我找不到任何关于如何完成此操作的示例。任何人都可以阐明它的流程/动作脚本的外观吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T04:02:45.380

您可以使用 File.copyTo：

```
var sourceFile:File = File.applicationDirectory.resolvePath("/views/assets/database.file");
var destination:File = File.applicationStorageDirectory.resolvePath("database.file");
sourceFile.copyTo(destination, true); 
```

其中 database.file 是您的 sqlite 文件。您可能需要调整 sourceFile 的路径以匹配您的资产所在的位置。

copyTo 的第二个参数指定是否覆盖任何现有文件。

# java - IntelliJ IDEA 12 - 不兼容的 Android 版本错误

> ID：14927887
> 
> 赞同：2
> 
> 时间：2013-02-18T00:39:57.717
> 
> 标签：java, android, configuration, sdk, intellij-idea

我正在使用 IntelliJ IDEA 12.0 开始 Android 开发。我已经安装并配置了 JDK 和 Android SDK。我想以 Android SDK 2.3.3 为目标，因此 SDK 的配置如屏幕截图所示。

但是，当我尝试运行该项目时，出现以下错误：

```
android-validator: [untitled] Incompatible version of Android SDK Platform-tools package. Min version is 11\. Please, update it though SDK manager 
```

其次是

```
android-validator: [untitled] Incompatible version of Android SDK Tools package. Min version is 19\. Please, update it though SDK manager 
```

我无法找到有关此的任何信息，并且不确定这意味着什么。任何指针表示赞赏。

--新建项目配置-- ![新项目配置](../Images/9965a8c1669108a54e2ef929bc94e564.png)

--安装安卓包-- ![在此处输入图像描述](../Images/a8295239631d7bda249fe7bc48db6f9d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T10:12:10.763

> android-validator: [untitled] Android SDK Platform-tools 包的不兼容版本。最低版本是 11。请通过 SDK 管理器更新它

因为您有修订版 10，而 IntelliJ IDEA 工具需要修订版 11

> android-validator: [untitled] Android SDK 工具包的不兼容版本。最低版本为 19。请通过 SDK 管理器更新它

因为您有修订版 16，而 IntelliJ IDEA 工具需要修订版 19

提到的最小修订是 IntelliJ IDEA 提供 Android 工具和编译应用程序的要求。您应该再次启动 Android SDK 管理器并检查工具文件夹，如屏幕截图所示，然后单击“安装 2 个软件包”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T08:47:24.410

我遇到过同样的问题。我更新了“Android SDK 平台工具”，但没有用。
之后我意识到过去我将**c:\Android\android-sdk**设置为 SDK 文件夹。但是 SDK 管理器正在更新名为**c:\Documents and Settings\my.user\Local Settings\Application Data\Android\android-sdk**的文件夹，因此 IntelliJ 正在检查旧文件夹。

更改到正确的文件夹后问题解决。因此，如果您遇到此类问题，请确保设置新文件夹。查看帮助文档以设置 SDK 文件夹： http: [//www.jetbrains.com/idea/webhelp/configuring-global-project-and-module-sdks.html](http://www.jetbrains.com/idea/webhelp/configuring-global-project-and-module-sdks.html)

# html - 如何使内部 div 的顶部边框与外部 div 的顶部边框重叠？

> ID：14927888
> 
> 赞同：1
> 
> 时间：2013-02-18T00:39:58.987
> 
> 标签：html, css

我在一个 div 中有一个 div，它们都有边界。如何使内部 div 的顶部边框与外部 div 的边框重叠？

HTML：

```
<body>
    <div id = "outerdiv">
        <div id = "innerdiv">
            content
        </div>
    </div>
</body> 
```

CSS：

```
#outerdiv{
    border: 1px solid black;
}

#innerdiv{
    border-top: 1px solid white;
} 
```

我希望边框彼此重叠，以便内部 div 会抵消底部边框，并且该部分看起来就像顶部缺少边框的一部分。

这适用于底部边框，但不适用于顶部。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T00:43:47.457

给你`#innerdiv`一个`position:relative; top:-1px`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T00:43:40.153

这很 hacky，但您可以通过以下方式将元素向上移动`1px`：

```
#innerdiv {
    position: relative;
    top: -1px;

    border-top: 1px solid white;
} 
```

**演示：http: [//jsfiddle.net/4A8LF/](http://jsfiddle.net/4A8LF/)**

为什么不直接添加`border-top: 1px solid transparent;`到父级？

# c# - 对象管理器的分配？用于大型多人在线角色扮演游戏

> ID：14927889
> 
> 赞同：0
> 
> 时间：2013-02-18T00:40:00.987
> 
> 标签：c#, oop, object

任何人都可以提出一个干净的方法来做到这一点。我想要一个包含游戏中所有实例化对象的世界。但我不确定如何正确投射。

这些对象都应该在 1 个伞形对象和 1 个字典中，以便于保存/搜索。

```
//all connected players
private Dictionary<IOClient, string> IOClients = new Dictionary<IOClient, string>();

player = new MObject(new object[]{result.Remove(0,1)}, 1);

public class MObject
{
    private Serial m_Serial;
    public Serial Serial { get { return m_Serial; } }

    public Player player = null;
    public Item item = null;

    public MObject(object[] obj, int type)
    {
      //  m_Serial = Serial.NewMobile;
        if (obj.GetType() == typeof(Player) || type == 1)
        {
            player = new Player((string)obj[0]);
        }
        if (obj.GetType() == typeof(Item) || type == 2)
        {
         //   item = new Item();
        }
    }
}

//Also a World
public static class World
{
    private static bool m_Loading;
    private static bool m_Loaded;

    private static Dictionary<Serial, MObject> m_MObjects;

    public static Dictionary<Serial, MObject> MObjects
    { get { return m_MObjects; } }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T01:23:39.250

听起来这里的核心问题是弱类型与强类型之一。

一种可能的解决方案是为您的对象引入接口，并具有一个或多个特定于每个接口的字典。

例如

您有所有 IDrawable 对象的字典，所有 ICanShoot 对象的字典，所有 ICanBeShot 对象的字典等等。

这样，每次您使用其中一个字典时，您都不需要强制转换......并且您可以获得松散耦合等额外的好处。

如果您想进一步扩展这个想法，可以将字典包装到 IOC 容器中......但这本身就是一个完整的主题。

# windows-phone-7 - 给出一个文本内容为 100% 宽度的网格列

> ID：14927893
> 
> 赞同：0
> 
> 时间：2013-02-18T00:40:35.977
> 
> 标签：windows-phone-7, xaml, windows-phone-8

我有一个使用以下模板的 ListBox：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="64" />
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="100" />
    </Grid.ColumnDefinitions>

    <Image Source="{Binding Property3}" Grid.Column="0" HorizontalAlignment="Left" Height="64" Width="64"/> 
    <TextBlock Grid.Column="1" Text="{Binding Property1}"/>
    <TextBlock Grid.Column="2" Text="{Binding Property2}" HorizontalAlignment="Right"/>
</Grid> 
```

我遇到的问题是中间栏。中间列中文本的长度决定了网格的宽度。在不使用确切的宽度值的情况下使网格扩展到页面宽度的 100% 的最佳方法是什么？或者这是不可能的？我从这里尝试了很多建议（例如，在 ListBox 上设置 Horizo​​ntalContentAlignment）无济于事。

编辑：这是整页，突出问题的最少代码：

```
<phone:PhoneApplicationPage
x:Class="FoursquareDemo.SandboxPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
SupportedOrientations="Portrait" Orientation="Portrait"
mc:Ignorable="d"
shell:SystemTray.IsVisible="True">
<phone:PhoneApplicationPage.Resources>
    <DataTemplate x:Key="ItemTemplate">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="64" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="100" />
                </Grid.ColumnDefinitions>

                <Image Source="{Binding Property3}" Grid.Column="0" HorizontalAlignment="Left" Height="64" Width="64"/>
                <TextBlock Grid.Column="1" Text="{Binding Property1}"/>
                <TextBlock Grid.Column="2" Text="{Binding Property2}" HorizontalAlignment="Right"/>
            </Grid>
    </DataTemplate>
</phone:PhoneApplicationPage.Resources>

<ListBox x:Name="LayoutRoot" DataContext="{Binding Source={StaticResource SampleDataSource}}" ItemTemplate="{StaticResource ItemTemplate}" ItemsSource="{Binding Collection}" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:06:35.893

找到了解决方案：

ListBoxItems 不会扩展到 ListBox 的整个宽度。在这种情况下，最好使用 LongListSelector。这似乎有点矫枉过正，但它完成了工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T23:38:59.697

有两种方法可以解决问题。

1) 将网格的边距设置为 Margin = "0,0,0,0"

这基本上将 Grid 的偏移量设置为 0，表示“左、上、右、下”

2）如果上述方法不起作用，请检查父网格。并将父网格的边距设置为与上述相同。如果根据您的设计更改 Top 和 Bottom 的值是可以的。但是，如果您希望 Grid 的长度占据整个 Width，请确保将左右边距值设置为 0。

# bash - 埃拉托色尼筛法 UNIX 脚本

> ID：14927895
> 
> 赞同：0
> 
> 时间：2013-02-18T00:40:52.607
> 
> 标签：bash, unix

我正在编写一个 UNIX 脚本来使用筛子生成素数。我一直在第 19 行得到一个糟糕的模除法，我似乎无法弄清楚为什么。

我尝试了各种不同的格式，不知道正确的方法是什么。

```
#!bin/bash
read -p "Upper limit? :" answer
theMultiple=2

#populate the array
for ((i=2;i<$answer;i++)); do
   sieveArray[$i]=$i
done
#Use Sieve
for ((i=0;i<=${#sieveArray[*]}; i++)); do
   if [ $[$(($[${sieveArray[$i]}] % $theMultiple))] -eq 0 ]; then
         theMultiple=${sieveArray[$i]}
         echo $theMultiple
         for ((j=$i;j<${#sieveArray[*]};j++)); do
            if [ $[$(($[${sieveArray[$j]}] % $theMultiple))] -eq 0 ]; then
               sieveArray[$j]=0
            fi
         done
   fi
done
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:55:02.587

您开始在索引 2 处填充 sieveArray，但在主循环中，您开始在索引 0 处使用它。默认情况下，前两个元素可能设置为零，这会导致除以零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:05:46.227

你可以用更少的 bash 算法和更多的命令来写不同的代码：

```
#!/bin/bash
limit=$1
sieve="$(seq 2 $limit|sort)"

for n in 2 $(seq 3 2 $limit)
do
  sieve="$(comm -23 <(echo "$sieve") <(seq $(($n * $n)) $n $limit|sort))"
done

echo "$sieve"|sort -n 
```

`seq`用于生成数字和倍数的列表。 `comm`用于从`sieve`变量中删除倍数。正如`comm`预期的按字母顺序排序的数据（10 在 9 之前），每次都必须对数字列表进行排序。

该`for`循环经过轻微优化，不包括偶数，除了 2。

# java - 修改 DataSet 以接受 Comparable 对象

> ID：14927899
> 
> 赞同：1
> 
> 时间：2013-02-18T00:42:05.653
> 
> 标签：java, comparable

我需要修改 DataSet 以接受 Comparable Objects。测试器不会编译，我不知道如何打印 compareTo 方法。我应该为测试仪使用 ArrayList 吗？提前谢谢！

```
public interface Comparable
{
/**
 Compares this object with another.
  @param other the object to be compared
  @return a negative integer, zero, or a positive integer if this object
  is less than, equal to, or greater than, other
*/
int compareTo(Object other);
} 
```

* * *

```
public class DataSetComparable
{
private double sum;
private Object maximum;
private Object minimum;
private int count;
private Comparable comparer;

/**
  Constructs an empty data set with a given measurer.
  @param aMeasurer the measurer that is used to measure data values
*/
public DataSetComparable(Comparable acomparer)
{
  sum = 0;
  count = 0;
  maximum = null;
  minimum = null;
  comparer= acomparer;
}

/**
  Adds a data value to the data set.
  @param x a data value
*/
public void add(Object x)
{ 
sum = sum + comparer.compareTo(x);
  if (count == 0 || comparer.compareTo(maximum) < comparer.compareTo(x))

     maximum = x;

    if (count == 0 || comparer.compareTo(minimum) > comparer.compareTo(x))

    minimum=x;
    count++;

}

/**
  Gets the largest of the added data.
  @return the maximum or 0 if no data has been added
*/
public Object getMaximum()
{
  return maximum;
}

/**Gets the smallest of the added data.
*@return the minimum or 0 if no data has been added
**/

 public Object getMinimum()
{
  return minimum;
}
} 
```

* * *

```
 public class String implements Comparable {

private String input;
private int holder;

public String(String aninput){
    input= aninput;
    holder=0;
}

public String getComparer(){
    return input;
}

public String getString(){
    return input;
}

public int compareTo(Object other){
    String temp= (String) other;
    if(input.compareTo(temp)<0){
        holder=-1;  
    }
    else if (input.compareTo(temp)== 0) {
        holder= 0;
    }
    else{
        holder= 1;
    }
    return holder;
}
 } 
```

* * *

```
 public class StringTester{
public static void main (String [] args){

  Comparable c = new String();
  DataSetComparable data = new DataSetComparable(c);

  data.add(new String("Jimmy"));
  data.add(new String("Amy"));
  data.add(new String("Melissa"));
  data.add(new String("Melissa"));

  String max = (String) data.getMaximum();
  String min = (String) data.getMinimum();

  System.out.println("Maximum String = " + max);
  System.out.println("Minimum String = " + min);
}
 } 
```

更具体地说，错误说：

> 类 String 中的构造函数 String 不能应用于给定类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T00:50:51.570

您的代码包括：

```
 public class String implements Comparable {
      ...
 } 
```

您是否意识到有一个标准的 Java 库类`String`被默认导入到每个类中？如果实现你自己的类调用`String`你会得到一些非常混乱的编译错误消息。

我强烈建议您将班级名称更改为其他名称；例如`StringHolder`。

* * *

请注意，从技术上讲，您*可以*定义一个名为`String`. 然而，Java 用来消除类名称歧义的规则并不是为这个用例设计的……而且无论你在哪里使用它，你最终都必须`java.lang.String`通过它的完全限定名称来引用它。其他阅读/修改您的代码的人会发现这真的很尴尬/烦人。

最好将`java.lang`包中类的名称视为“保留”，并且不要定义具有相同（非限定）名称的类。

# mysql - 如何使用 '？' 在 SQL 查询中

> ID：14927910
> 
> 赞同：0
> 
> 时间：2013-02-18T00:43:49.940
> 
> 标签：mysql, sql, postgresql

假设我有这个查询：

```
SELECT * FROM 'users' WHERE ( username = 'foo' OR email = 'bar' ) 
```

我将如何做到这一点，该查询使用？标记而不是直接传递值。例如。

```
SELECT * FROM 'users' WHERE ( username = ? OR email = ? ... 
```

如果可能，请在 WHERE () 子句中指定输入。

编辑：我不久前在某处读过使用 ? 查询中的标记可提高性能并有助于 sql 注入。这就是我在这里要做的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T00:46:08.953

在`MySQL`中，您可以在查询中找到的问号符号称为参数占位符。它通常在您创建`Prepare`语句（*动态 sql*）时使用。前任，

```
SET @s = 'SELECT SQRT(POW(?,2) + POW(?,2)) AS hypotenuse';
PREPARE stmt2 FROM @s;
SET @a = 6;
SET @b = 8;
EXECUTE stmt2 USING @a, @b; 
```

*   [准备好的语句的 SQL 语法](http://dev.mysql.com/doc/refman/5.1/en/sql-syntax-prepared-statements.html)
*   [PostgreSQL 准备](http://www.postgresql.org/docs/current/static/sql-prepare.html)

**更新 1**

这是根据您上面的数据进行选择的示例，

```
SET @s = 'SELECT * FROM tableName WHERE username = ? and email = ?';
PREPARE stmt2 FROM @s;
SET @a = 'foo';
SET @b = 'bar';
EXECUTE stmt2 USING @a, @b; 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/b3a80/1)

# objective-c - 让所有不同的视图类在 Objective-C 中实现相同方法的最佳方法是什么

> ID：14927913
> 
> 赞同：0
> 
> 时间：2013-02-18T00:44:21.867
> 
> 标签：objective-c

我正在创建我的第一个 Objective-C 应用程序之一。我有一堆 UIViews 和其他视图，例如 MapView 等等。

在我的模型中，我有一个名为 register 的方法，所有视图都可以注册。它们都放在模型中的 NSMutableArray 中。每当模型更新数据时，我都会在“视图”数组上运行一个 for 循环，并且我希望所有视图（无论类型如何）都可以实现一个名为“更新”的方法，该方法可以从每个视图的模型中调用。

由于视图可能是 UIView 或任何其他类型，我不太确定 Objective-c 的做法是什么。

我真的很希望能够执行以下操作，但我知道这是不正确的。

```
for(NSInteger i=0; i<[_views count]; i++)
{
    NSObject *view = [_views objectAtIndex:i];
    [view update:data];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T00:51:07.627

您正在尝试做与 Cocoa 代表相同的事情。使用该方法定义正式协议`update`，并使您的所有`UIView`类（或您希望在模型中注册的任何其他类）都采用该协议。

定义协议：

```
@protocol Updateable <NSObject>
@required
- (void) update: (id)data;
@end 
```

采用协议：

```
@interface MyView : UIView <Updateable>
- (void) update: (id)data;
...
@end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T00:58:29.883

定义一个协议：

```
@protocol IUpdateable <NSObject>
@required
-(void)update:(id)data;
@end 
```

然后在您的视图类中实现协议...

```
@interface SomeView : UIView <IUpdateable>
@end;

@implementation SomeView
-(void)update:(id)data
{
    //Do something with data
}
@end; 
```

`_views`然后，假设您的数组包含一组`IUpdateable`视图，您可以一举调用您的方法......

```
[_views makeObjectsPerformSelector:@selector(update:) withObject:someData]; 
```

参考：[NSArray](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)，[使用协议](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/WorkingwithProtocols/WorkingwithProtocols.html)

# binary - 8 位 2 的补码 11010110 的十进制值是多少？

> ID：14927914
> 
> 赞同：0
> 
> 时间：2013-02-18T00:44:29.323
> 
> 标签：binary, decimal, complement

这更像是一个硬件问题，但我无法弄清楚这个问题。我以为是 214，但由于左边的第一位，我不太确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T00:50:56.797

因为它是一个 2 的补码，所以第一位是一个意味着它是一个负数。

该值为 214 - 256 = -42。

它也可以计算为 -(~214 + 1) = -(41 + 1) = -42。

二进制是 -(~11010110 + 1) = -(00101001 + 1) = -00101010。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T00:59:19.510

翻译很简单：

1：从 x 中减去 1

11010110-00000001=11010101

2：反转它

00101010

3：计算二进制到十进制（但忽略第一位）

2+8+32 = 42

4：记住原始值的第一位（== 1）如果1 =>反转它=> -42

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T00:59:45.847

你可以说它是一个负数，因为`1`在最左边的位位置有一个。获得幅度的一种方法是反转所有位，然后添加`1`.

```
11010110
00101001 <= inverted
00101010 <= +1 
```

这个结果是十进制`42`的，所以原来的值是代表`-42`。

# ios - 在 NSUserDefaults 中将 MKPolyline 保存为 NSData

> ID：14927915
> 
> 赞同：3
> 
> 时间：2013-02-18T00:44:30.903
> 
> 标签：nsuserdefaults, ios, objective-c, mkmapview, nsuserdefaults, nsdata

我的 iOS 应用程序需要`MKPolyline`在`NSUserDefault`. 我一直在做很多研究，现在我知道了：

*   NSUserDefaults 是 NSCoder 的子类
*   MKPolyline 不是 NSCoder 的子类

因此，将折线保存到[nsuserdefaults](/questions/tagged/nsuserdefaults "显示标记为“nsuserdefaults”的问题")是相当困难的。我试图将 MKPolyline 转换为 NSData：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSData *data = [NSKeyedArchiver archivedDataWithRootObject:routeLine]; // routeLine is an MKPolyline
[defaults dataForKey:@"key"];
[defaults synchronize]; 
```

当我尝试将折线转换为 NSData 时，我收到以下错误消息：

> 由于未捕获的异常'NSInvalidArgumentException'而终止应用程序，原因：'-[MKPolyline encodeWithCoder:]：无法识别的选择器发送到实例 0xba1fd70

**使用MKPolylineView**时，我可以成功执行上述代码，但是在将 MKPolyline 从视图中移出时遇到问题。我[在 SO 上找到了这个 Q/A，](https://stackoverflow.com/questions/7698103/mkpolyline-nskeyedarchiver-nsdata-sigabrt)但它并没有解决我的问题，因为它会改变我的应用程序的运行方式。

**如何保存 MKPolyline？**我可以对它进行子类化吗，如果可以，那会带来什么？或者有没有办法用 MKPolylineView 做到这一点？我错过了 NSCoder 的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T00:54:51.247

虽然您可以`NSCoding`自己实现 for `MKPolyline`，然后构造一个`NSData`表示并将其存储在 中，但表示using 数组和字典`NSUserDefaults`可能会更好，它们可以直接处理。`MKPolyline``NSUserDefaults`

构造一个字典数组，其中封装了每个点的 x 和 y 值，并将其存储*在*而`NSUserDefaults`不是`MKPolyline`.

加载默认值时，获取数组，遍历重建点的字典，然后重新创建`MKPolyline`.

# asp.net-mvc - 来自序列化模型状态的 asp.net mvc 检查复选框

> ID：14927917
> 
> 赞同：0
> 
> 时间：2013-02-18T00:44:41.727
> 
> 标签：asp.net-mvc, checkbox

我正在构建一个表单向导。到目前为止它的工作，我通过将对象序列化到一个隐藏字段来做到这一点。在向导的第 2 步中，**我根据我的数据库中的列表生成复选框**。

我的观点是这样的。

```
@{
List<MvcApplication2.Models.DB.t_previous_exp> prevExpt = ViewBag.prevexp;
}

@foreach (var checkbox1 in prevExpt)
{    
   input type="checkbox" name="Step2.PrevExp" value="checkbox.ID" />checkbox.name 
} 
```

它们都以 ID 作为值添加到模型中。但是，当移动到向导中的第一步时（所有数据都已保存，并显示出来）并**返回**到第 2 步时，没有选中任何复选框。

我知道我需要以某种方式检查模型状态的值并循环它。
但我不明白如何......他们的模型值存储在一个字符串[]中，我知道我正在循环访问数据库值。
我可以以某种方式使用复选框吗？

# android - TextView 未在自定义视图中更新

> ID：14927918
> 
> 赞同：1
> 
> 时间：2013-02-18T00:44:43.570
> 
> 标签：android, android-fragments, textview

我有一个获取 GPS 信号并将结果发送到自定义视图的片段。

我可以显示从片段中获取的信号的输出，并看到它更新得很好。这是片段1的代码：

```
 @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {

            RelativeLayout view = (RelativeLayout) inflater.inflate(R.layout.gps_stamp_fragment, container,false);
            RelativeLayout rl1 = new RelativeLayout(view.getContext());
            TextView tView1 = new TextView(view.getContext());
            tView1.setText("waiting...");  //this is the only thing custom view gets!
            rl1.addView(tView1);
            rl1.setId(1);
            tView1.setId(2);
            view.addView (rl1);

            lm =(LocationManager) getActivity().getSystemService(Context.LOCATION_SERVICE);
            lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 500, 1, this);

            return view;
        }

//And here's where I get the GPS signal from and use setText again to update to the GPS signal.

   @Override
    public void onLocationChanged(Location arg0) {
        String lat = String.valueOf(arg0.getLatitude());

        RelativeLayout rl1 = (RelativeLayout) getView().findViewById(1);
        TextView tView1 = (TextView) rl1.findViewById(2);
        tView1.setText(lat);

    } 
```

然后，在自定义视图中，我有以下代码，它找到相对布局和关联的文本视图并获取文本。

```
RelativeLayout rl1 = (RelativeLayout) getRootView().findViewById(1);
TextView tView1 = (TextView) rl1.findViewById(2);  
tView1.getText();
getRootView().invalidate(); 
```

问题是这个自定义视图中出现的唯一文本是“等待...”。GPS 测量结果从未出现。

我读过类似的问题，我需要 .invalidate() 视图，这就是我添加最后一行的原因，但这似乎对我不起作用。

为什么从 Fragment1 调用时 TextView 正确更新，但从自定义视图调用时却没有？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:15:28.160

`invalidate`应该在里面`onLocationChanged`

# c++ - 动态分配对象数组失败

> ID：14927919
> 
> 赞同：-1
> 
> 时间：2013-02-18T00:44:57.870
> 
> 标签：c++, arrays, dynamic-memory-allocation, default-constructor

我能够创建一个动态大小的整数数组，如下所示：

```
int *cacheL2 = new int[L2/B2]; 
```

而且我还能够创建这样的类型的对象`Data`：

```
Data one(12,12); 
```

现在我想要一个动态大小的数组`Data`：

```
Data * vlaObj = new Data[L2/B2]; 
```

但它不起作用......

另外，如果你能告诉我如何让哈希值适用于 c++，那就太好了。我正在寻找示例，但所有内容都只是说#include“hash_map”但是当我尝试使用该库时，它似乎无法找到其中任何一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T00:51:07.667

```
#include <vector>

// ...
std::vector<Data> v;
v.emplace_back( 12, 12 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T00:50:38.700

这里没有理由不使用 STL 容器。建议使用`std::vector`而不是原始指针：

```
#include <vector>

//...
std::vector<Data> vlaObj(L2/B2);
vlaObj.push_back(one) 
```

编辑：顺便说一句，L2 甚至 B2 值是否有可能`0`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T01:36:51.100

`Data* arr = new Data[len];`不起作用的最可能原因之一是因为 type`Data`没有默认构造函数，即`Data::Data()`.

但是不管`Data`有没有默认的构造函数，无论如何尝试创建这样的数组都不是一个好主意。一旦你动态地分配它，`new[]`你就承诺自己负责处理丑陋的内存管理。最好使用 STL 容器之一，例如`std::vector`（`#include <vector>`必需的），它将为您处理内存管理。

然后你有几个选择：

```
std::vector<Data> v;                    // option 1
v.reserve(len);
// in loop:
    v.push_back(Data(x, y));            // there could be different values

std::vector<Data> v2(len);              // option 2

std::vector<Data> v3(len, Data(12,12)); // option 3 
```

第一个选项几乎适合任何情况。它准备了足够大的内存块来保存`len`元素，然后你可以`v`方便地填充但仍然非常有效的方式。选项 2 需要`Data`具有默认构造函数，这由选项 3 解决，该选项使用您的自定义构造函数来构造元素。

所有提到的选项都会导致`std::vector`创建具有自动存储持续时间的对象。请注意，所有元素都存储在连续的内存块中，因此您可以使用`&v[0]`它来初始化指向其第一个元素的指针，并以与使用动态分配数组相同的方式使用它。

# xcode - 在 UIImagePickerController 之前添加一个 UIViewController

> ID：14927920
> 
> 赞同：1
> 
> 时间：2013-02-18T00:44:58.567
> 
> 标签：xcode, cocoa-touch, ios4, uiviewcontroller

我有以下代码来加载工作正常的 UIImagePickerController。

```
 UIImagePickerController *mediaUI = [[UIImagePickerController alloc] init];
    mediaUI.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
    mediaUI.mediaTypes = [[NSArray alloc] initWithObjects: (NSString *) kUTTypeMovie, nil];
    mediaUI.delegate = self;
    [controller presentModalViewController: mediaUI animated: YES];
    return YES; 
```

我想加载一个模态视图，其中包含有关如何使用 UIImagePickerController 的一些帮助信息：

```
UIStoryboard *storyboard = self.storyboard;
HelpViewController *svc = [storyboard instantiateViewControllerWithIdentifier:@"HelpViewController"];
[self presentViewController:svc animated:YES completion:nil]; 
```

用户关闭 HelpViewController 视图后如何显示 UIImagePickerController？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T02:35:56.727

不要试图直接从 HelpViewController 移动到 UIImagePickerController，你需要通过你的 mainViewController 到达那里。

让我们将您的代码放入一个方法中......

```
- (void) presentImagePicker {
    UIImagePickerController *mediaUI = [[UIImagePickerController alloc] init];
    mediaUI.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
    mediaUI.mediaTypes = [[NSArray alloc] initWithObjects: (NSString *) kUTTypeMovie, nil];
    mediaUI.delegate = self;
    [controller presentModalViewController: mediaUI animated: YES];
    return YES;
} 
```

（请注意，`presentModalViewController:animated`自~iOS5 以来已弃用，您应该将其替换为 `[controller presentViewController:mediaUI animated:YES completion:nil];`）

让我们称您的viewControllers`mainVC`和. 有两种方法可以实现这一点。`helpVC``imageVC`

**方法 1 - performSelector**

快速且稍微有点脏的解决方案是在 helpVC 的关闭按钮方法中执行此操作：

```
- (IBAction)dismissHelpAndPresentImagePicker:(id)sender 
{
    UIViewController* mainVC = self.presentingViewController;
    [mainVC dismissViewControllerAnimated:NO completion:
     ^{
         if ([mainVC respondsToSelector:@selector(presentImagePicker)])
         [mainVC performSelector:@selector(presentImagePicker)];
     }];
} 
```

它有点脏，因为您需要确保`presentImagePicker`实现它`mainVC`- 如果不是，编译器不会给您任何警告。此外，在对象被解除后，您正在运行一个完成块，因此不确定它是否会起作用（实际上，确实如此，但仍然......）

请注意，您*必须*将指针 self.presentingViewController's 分配给局部变量 ( `mainVC`)。那是因为当`helpVC`被解雇时，它的`presentingViewController`属性被重置为零，所以当你运行完成块时，你不能使用它。但是局部变量`mainVC`仍然有效。

**方法 2 - 协议/委托**

干净的方法是使用 helpVC 中的协议来声明委托方法，并使 mainVC 成为委托。这样，编译器将跟踪所有内容并在未正确实现时警告您。

以下是执行此操作的步骤：

在 helpVC.h 中，在 @interface 部分上方添加此协议：

```
@protocol helpVCDelegate
    - (void) dismissHelpAndPresentImagePicker;
@end 
```

在 helpVC.h 接口部分为其委托声明一个属性：

```
@property (nonatomic, weak) id <helpVCDelegate> delegate; 
```

（ `<helpVCDelegate>`告诉编译器委托应该符合协议，所以它必须实现`dismissHelpAndPresentImagePicker`）

在 helpVC.m 中，您的方法现在可以如下所示：

```
- (IBAction)dismissHelpAndPresentImagePicker:(id)sender 
{
    [self.delegate dismissHelpAndPresentImagePicker];
} 
```

在 MainVC 中，当您创建 HelpVC（*代码中的 =svc*）时，将 MainVC 设置为它的委托：

```
HelpViewController *svc = [storyboard instantiateViewControllerWithIdentifier:@"HelpViewController"];
svc.delegate = self;
[self presentViewController:svc animated:YES completion:nil]; 
```

并且一定要实现委托方法`dismissHelpAndPresentImagePicker`

```
- (void) dismissHelpAndPresentImagePicker
{
    [self dismissViewControllerAnimated:NO completion:^{
           [self presentImagePicker];
         }];

} 
```

就我个人而言，我总是使用方法 2。但是我今天早些时候为[类似的问题](https://stackoverflow.com/questions/14907518/modal-view-controllers-how-to-display-and-dismiss/14910469#14910469)提供了一个解决方案，而提问者似乎认为协议/委托过于复杂。也许我的回答看起来如此，我试图在这里简化它。

# javascript - Firefox 中的 Jquery 选择器

> ID：14927929
> 
> 赞同：1
> 
> 时间：2013-02-18T00:46:31.467
> 
> 标签：javascript, jquery, firefox

我正在学习 javascript 揭示原型模式。我有两个脚本 1 定义一个对话框和另一个使用它。除了这个 javascript 抛出 $(dialogDiv) 没有在 Firefox 中定义之外，一切似乎都正常工作？但是，该脚本在 IE 和 Chrome 中运行良好。

揭示原型：

```
var Sandbox = Sandbox || { };
Sandbox.UI = Sandbox.UI || { };

Sandbox.UI.AjaxContentModalDialog = function(elementId, dialogOptions) {
    this.dialogDiv = elementId;
    this.options = dialogOptions;    
};

Sandbox.UI.AjaxContentModalDialog.prototype = function () {

    var open = function (methodName, url) {
        $(dialogDiv).css("overflow", "hidden");
        $(dialogDiv).dialog({
            width: this.options.width,
            height: this.options.height,
            autoOpen: false,
            resizable: false,
            modal: true,
            title: this.options.title,

            buttons: {
                Save: function () {
                    var form = $(options.formToPost);
                    $.ajax({
                        type: "POST",
                        url: form.attr('action'),
                        data: form.serialize(),
                        success: function (data, status, xhr) {
                            if (data.IsValid) {
                                $(dialogDiv).dialog('close');
                                $(dialogDiv).empty();
                                $(options.divToUpdate).empty();
                                $(options.divToUpdate).html(data.View);
                            } else {
                                $("#errorDiv").html(data.Message + "<br/>");
                            }
                        }
                    });
                },

                Cancel: function () {
                    $(dialogDiv).dialog('close');
                    $(dialogDiv).empty();
                }
            }
        });
        $.ajax(
            {
                Type: methodName,
                url: url,
                success: function (data, status, xhr) {
                    openDialog(data);
                }
            });

        function openDialog(data) {
            $(dialogDiv).html(data);
            $(dialogDiv).dialog('open');
        }
    };

    return {
        open: open
    };

} (); 
```

消费者：

```
"use strict";

var options = { title: 'Edit User Profile Setting Value',
    height: 180,
    width: 375,
    formToPost: '#userProfileSettingForm',
    divToUpdate: '#userProfileDetail',    
    buttons: [{ text: "Ok" }, { text: "Cancel"}]
};

var dialog;
dialog = new Sandbox.UI.AjaxContentModalDialog('#dialogDiv', options);

$(document).ready(function () {    
    disableInheritLinks();
    $('.Sandbox-udsActionLink').live("click", function (e) {

        e.preventDefault();
        dialog.open('get', this.href);
        return false;
    });

    function disableInheritLinks() {
        $('.Sandbox-disabled').each(function (item) {
            this.href = '';
        });

        $('.Sandbox-disabled').live("click", function (e) {
            e.preventDefault();
            this.href = '';
            console.log("disalbed: " + this.href);
            return false;
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:53:58.570

我想你的意思是`$(this.dialogDiv)`。此外，它在不同浏览器中的行为不同这一事实可能意味着您在`this`上下文中存在不一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T00:55:19.760

由于您有一个带有 id 的元素，IE（和 Chrome 以尝试与 IE 兼容）`window`为每个 id 创建属性：

```
window.dialogDiv //points to the element with id=dialogDiv 
```

Firefox 不这样做，这就是它在该浏览器中失败的原因。无论如何，您都应该使用`this.dialogDiv`它，因为它适合您的模型。此外，window.elementId 属性是非标准的，不应依赖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T00:53:41.633

它必须是`$(this.dialogDiv)`。没有`this`，它的世界指的是一个局部变量，而不是一个对象属性。不确定哦，它是否可以在其他浏览器中运行，但......

# java - 用于通用对象的 ArrayAdapter

> ID：14927930
> 
> 赞同：1
> 
> 时间：2013-02-18T00:46:33.767
> 
> 标签：java, android, generics, android-listview, android-arrayadapter

有没有办法得到一个`ArrayAdapter`可以接收任何类型的对象？或者也许创建多个构造函数？

# python - 在 Raspberry Pi 上运行 kinect - Python

> ID：14927933
> 
> 赞同：1
> 
> 时间：2013-02-18T00:46:56.177
> 
> 标签：python, computer-vision, kinect, raspberry-pi

我正在尝试通过带有 Microsoft Kinect 相机的 Raspberry Pi 运行视觉处理 python 代码。我在 Ubuntu 上运行了完美的工作代码，但它无法在 RPi 上执行相同的操作。我想我已经安装了所有的库......

我什至尝试了以下简单代码：

```
 import freenect
    ir, data = freenect.sync_get_video(format=freenect.VIDEO_IR_8BIT)
    print ir 
```

它不起作用，它会卡住。可能是什么原因？也许 kinect 和树莓派不能一起工作？

注意：当我尝试“freenect-glview”时，我得到：“找到的设备数量：1”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T00:32:55.130

您是否尝试过使用 OpenNI SDK。我试过了，它可以与[OpenNI](http://www.openni.org/openni-sdk/)一起使用你还有一个供电的 USB 集线器，因为 PI 无法产生足够的能量来为 Kinect 供电。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T11:44:51.497

由于 USB 驱动程序错误，Kinect 无法在 RPI 上工作：

> Linux 驱动程序问题
> 
> 在 Raspberry Pi 发布后不久，就确认 SMSC95xx 芯片的 Linux USB 驱动程序存在许多问题。其中包括使用拆分事务的 USB 1.x 外设问题、固定数量的通道（导致 Kinect 出现问题）以及 ARM 处理器处理 SMSC95xx 中断的方式。[2] [3] 2012-08-19-Wheezy-raspbian Linux 映像中包含大量修复。

来源[http://elinux.org/RPi_VerifiedPeripherals](http://elinux.org/RPi_VerifiedPeripherals)

# python - 将字符串从文件转换为整数

> ID：14927937
> 
> 赞同：-1
> 
> 时间：2013-02-18T00:47:23.927
> 
> 标签：python

我被要求从一个文件中读取行并将该文件中的每一行打印到另一个文件。这就是我到目前为止所拥有的。

```
my_file = open("thisFile.txt", "r")
out_file = open("thatFile.txt", "w")

for line in my_file:
    line = int(line)
    if line%2 !=0:
        print(line,file=out_file)     

my_file.close()
out_file.close() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T00:54:41.977

```
from itertools import islice

with open('input') as fin, open('output', 'w') as fout:
    fout.writelines(islice(fin, None, None, 2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T00:54:01.773

这是一个相对简单的任务 - 你的主要问题是使用`int()`- 你试图将整行转换为一个数字，然后失败。您要做的是跟踪您所在的行号。最简单的方法是使用[内置`enumerate()`的](http://docs.python.org/3.3/library/functions.html#enumerate).

```
with open("thisFile.txt") as in_file, open("thatFile.txt") as out_file:
    for line_no, line in enumerate(in_file, start=1):
        if line_no % 2:
            out_file.write(line) 
```

还要注意`with`这里语句的使用 - 这会自动关闭文件，并且即使发生异常也会这样做，使用它是一个好习惯。它的可读性也显着提高。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T01:12:54.227

对您的程序进行*最小的*更改以使其执行您想要的操作，不引入任何新概念，如下所示：

```
my_file = open("thisFile.txt", "r")
out_file = open("thatFile.txt", "w")

i = 1
for line in my_file:
    if i % 2 != 0:
        print(line, file=out_file)
    i += 1

my_file.close()
out_file.close() 
```

您的错误只是您认为`int(line)`会给您行号。实际所做的是尝试将*每行的文本*解释为整数，这不是您想要的。

现在，Python 的许多优点在于其庞大的有用函数库。上述方法有效，但没有充分利用该语言所提供的功能。我要更改的第一件事是使用[`enumerate`](http://docs.python.org/2/library/functions.html#enumerate)而不是显式计数器，我要更改的第二件事是使用`write`files 的方法而不是`print`，我要更改的第三件事是利用“非零为真”规则：

```
my_file = open("thisFile.txt", "r")
out_file = open("thatFile.txt", "w")

for i, line in enumerate(my_file, start=1):
    if i % 2:
        out_file.write(line)

my_file.close()
out_file.close() 
```

我说这行得通，但实际上它只有在出现问题时才有效。如果有任何东西引发异常（例如，如果发生 I/O 错误），则文件对象不会关闭。¹该`with`语句告诉 Python 确保文件被关闭，无论是否发生异常；这也方便地减少打字。

```
with open("thisFile.txt", "r") as my_file,
     open("thatFile.txt", "w") as out_file:
    for i, line in enumerate(my_file, start=1):
        if i % 2:
            out_file.write(line) 
```

您可能会注意到这与 Lattyware 的回答相同。（乔恩克莱门特的回答可能有点*太*聪明了；他似乎在[打高尔夫球](http://en.wikipedia.org/wiki/Code_golf)。）

¹在这段简单的代码中，如果发生异常，CPython 的垃圾收集器*会*注意到文件对象不再可访问，并将为您关闭它们，但随着您的程序变得更加复杂，这不是可以依赖的东西。

# android - 在对话框模式下覆盖 Spinner 的下拉列表样式

> ID：14927938
> 
> 赞同：6
> 
> 时间：2013-02-18T00:47:26.810
> 
> 标签：android, android-widget

当 Spinner id 处于对话模式 (android:spinnerMode="dialog") 时，我需要覆盖下拉微调器项目列表。我需要这个来定义我自己的列表分隔符。

我在应用程序主题中找到了 dropDownListViewStyle 项，其中包含分隔项。它有效，但仅适用于 android:spinnerMode="dropdown"。

我可以对“对话”模式产生相同的效果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-12T04:40:40.977

* * *

尝试这个：

```
<Spinner
    android:id="@+id/spinnerAddToList"
    android:layout_width="0dp"
    android:layout_height="0dp"
    android:layout_marginTop="10dp"
    android:theme="@style/ThemeOverlay.AppCompat.Light"
    android:spinnerMode="dialog"/> 
```

下拉布局 spinner_item_line_drop.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:paddingLeft="3dp"
    android:paddingRight="3dp">

    <TextView
        android:id="@+id/text_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical"
        android:textSize="18sp" />

    <LinearLayout
        android:id="@+id/separator"
        android:layout_height="1dp"
        android:layout_width="match_parent"
        android:background="@color/colorPrimary"
        android:orientation="vertical"
        android:layout_marginTop="10dp"
        android:layout_marginBottom="10dp"/>

</LinearLayout> 
```

主视图布局：spinner_item_line_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:paddingBottom="10dp"
    android:paddingLeft="3dp"
    android:paddingRight="3dp"
    android:paddingTop="10dp">

    <TextView
        android:id="@+id/text_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical"
        android:textSize="18sp" />

</LinearLayout> 
```

微调适配器：

```
public class SpinnerLineAdapter extends BaseAdapter {

    private List<MyListEntity> values;

    public SpinnerLineAdapter(List<MyListEntity> values)
    {
        this.values = values;
    }

    public void setValue(List<MyListEntity> list)
    {
        this.values = list;
    }

    @Override
    public int getCount() {
        return values.size();
    }

    @Override
    public MyListEntity getItem(int position) {
        return values.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View itemView = convertView;
        ViewHolder viewHolder;

        Context context = parent.getContext();

        if (convertView == null) {
            itemView = LayoutInflater.from(context).inflate(R.layout.spinner_item_line_main, parent, false);

            viewHolder = new ViewHolder();
            viewHolder.textView = itemView.findViewById(R.id.text_view);

            itemView.setTag(viewHolder);

        } else {
            viewHolder = (ViewHolder) itemView.getTag();
        }

        viewHolder.textView.setText(values.get(position).getName());

        return itemView;
    }

    public View getDropDownView(int position, View convertView,ViewGroup parent) {
        View itemView = convertView;
        ViewHolder viewHolder;

        Context context = parent.getContext();

        if (convertView == null) {
            itemView = LayoutInflater.from(context).inflate(R.layout.spinner_item_line_drop, parent, false);
            viewHolder = new ViewHolder();
            viewHolder.textView = itemView.findViewById(R.id.text_view);
            itemView.setTag(viewHolder);
        } else {
            viewHolder = (ViewHolder) itemView.getTag();
        }

        viewHolder.textView.setText(values.get(position).getName());

        return itemView;
    }

    private static class ViewHolder {
        TextView textView;
    }
} 
```

活动：

```
SpinnerLineAdapter spinnerAddToListAdapter = new SpinnerLineAdapter(list);
                spinnerAddToList.setAdapter(spinnerAddToListAdapter);
                spinnerAddToList.setSelection(0, false);
                spinnerAddToList.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
                    @Override
                    public void onItemSelected(AdapterView<?> adapterView, View view,
                                               int position, long id) {

                        MyListEntity list = spinnerAddToListAdapter.getItem(position);
                        viewModel.addList(list.id);
                        viewModel.update(myEntity);
                    }

                    @Override
                    public void onNothingSelected(AdapterView<?> adapter) {
                    }
                }); 
```

按钮单击以显示对话框：

```
 mButtonAdd.setOnClickListener(view -> {
        spinnerAddToList.performClick();
    }); 
```

# asp.net - 在同一域的两个网站之间共享 cookie

> ID：14927941
> 
> 赞同：22
> 
> 时间：2013-02-18T00:48:29.777
> 
> 标签：asp.net, asp.net-mvc, cookies, cross-platform, forms-authentication

情况如下：

*   网站 A，ASP.NET MVC 4 Web 应用程序。域名：[http ://a.example.com](http://a.example.com)
*   网站 B，ASP.NET MVC 4 Web 应用程序。域名：[http ://b.example.com](http://b.example.com)

我正在尝试在网站之间共享一个 cookie（表单身份验证）。

我本身没有使用表单身份验证。我正在使用内置方法（加密、解密等），但我正在设置自己的自定义 cookie。

当我在其中一个网站上设置 cookie 时，其他网站会看到 cookie，但无法解密。该错误是通用的“密码操作期间发生错误”。

我所保证的：

1.  cookie 将域设置为“example.com”（这意味着子域可以访问。证明是其他网站可以“看到”cookie）。
2.  两个网站共享相同的机器密钥。两者的 web.config 具有相同的解密密钥和验证密钥值。
3.  两个网站的表单身份验证票证版本和 cookie 名称相同。
4.  路径设置为“/”。

我以前做过这个，它工作正常，但在那种情况下，两个应用程序共享相同的代码库。

在这种情况下，它们是单独的应用程序。这是因为我正在设计一个解决方案原型，其中同一顶级域上的两个独立于平台的应用程序可以共享一个身份验证 cookie。

谁能告诉我我缺少什么，或提供替代解决方案。

我已经阅读了所有相关问题，但答案通常是上面的 2)。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-18T01:00:58.177

当您创建一个新的 ASP.NET 4.5（例如 ASP.NET MVC 4）应用程序时，将以下行添加到 web.config：

```
<httpRuntime targetFramework="4.5" /> 
```

这在我的其他应用程序中不存在，可能是因为我的其他应用程序是升级到 4.5 的 ASP.NET 3.5 应用程序。

在新的 ASP.NET Web 应用程序中删除该行解决了该问题。

我认为这是由于兼容性模式值：http: [//msdn.microsoft.com/en-us/library/system.web.configuration.machinekeysection.compatibilitymode.aspx](http://msdn.microsoft.com/en-us/library/system.web.configuration.machinekeysection.compatibilitymode.aspx)

> 框架 45。ASP.NET 4.5 的加密增强功能已生效。如果应用程序 Web.config 文件将 httpRuntime 元素的 targetFramework 属性设置为“4.5”，则这是默认值。

不知道我知道删除那条线是如何解决问题的。我假设应用程序一具有不同的兼容性模式，因为它没有那个`httpRuntime`元素。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-01-13T09:40:44.007

处理此问题的最佳方法是使机器密钥解密回退到 Framework20SP2

从这篇文章：http: [//msdn.microsoft.com/en-us/library/system.web.configuration.machinekeysection.compatibilitymode.aspx](http://msdn.microsoft.com/en-us/library/system.web.configuration.machinekeysection.compatibilitymode.aspx)

只需将该属性添加到您的 .net 4.5 应用程序中的 machinekey

```
<machineKey validationKey="" decryptionKey="" validation="SHA1" compatibilityMode="Framework20SP2" /> 
```

您现在不需要从 httpruntime 中删除 targetFramework="4.5" 。

# c++ - 使用 C++ 将域名从 DNS 转换为 NetBIOS 格式

> ID：14927943
> 
> 赞同：2
> 
> 时间：2013-02-18T00:48:57.590
> 
> 标签：c++, windows, winapi, networking, active-directory

我不确定我是否在这里使用了正确的术语。我正在为 Windows 编写 C++ 代码。比如说，如果我的域名为“mysite.local”，是否有 API 可以将其转换为 NetBIOS 域名，例如：“MYSITE”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T08:57:40.033

你想要这个[`DsGetDcName`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675983%28v=vs.85%29.aspx)功能。除了返回指定域的域控制器的名称外，它还返回域的名称。

您需要同时传递`DS_IS_DNS_NAME`标志（以指定输入域名为 DNS 名称）和`DS_RETURN_FLAT_NAME`标志（以指定输出域名应为平面名称）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T02:05:59.710

类型为 AF_NETBIOS 的 gethostbyaddr 可能会成功（未经测试）

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms738521%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738521%28v=vs.85%29.aspx)

# maven - 通过 maven 原型在文件生成期间操作 __artifactId__

> ID：14927944
> 
> 赞同：0
> 
> 时间：2013-02-18T00:48:59.197
> 
> 标签：maven, maven-3, maven-archetype

构建使用**_ *artifactId* _**生成文件的 Maven 原型。archetype.xml 看起来像：

```
<sources>
    <source>src/main/java/__artifactId__.java</source>
    <source>src/main/java/__artifactId__CommandExecutor.java</source>
    <source>src/main/java/__artifactId__EventListener.java</source>
</sources> 
```

使用此原型生成项目可能会导致 Java 文件名不遵循命名约定，例如 sample-plugin.java 和 sample-pluginCommandExecutor.java。

如何确保将**_artifactId_***转换为适当的Java 文件名，例如SamplePlugin.java 和***SamplePluginCommandExecutor.java*****。***

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:40:13.167

我不是原型专家，事实上我只做过一次，但遇到了一个非常相似的问题。

我无法找到以任何方式自定义文件或目录名称的方法，我的意思是使用其中一个原型参数并对其进行转换。

所以我使用了两种解决方案

*   添加一个新的原型参数，您可以在其中指定类名
*   使用标准名称（如 ArtifactClass.java），然后使用更改名称的 ant 脚本创建 maven 配置文件（如果存在此文件，则启用）（请记住在文件中您可以使用速度来自定义它）

希望对托尼奥有帮助*

# java - 使用按位比较与权限模型忽略第一位

> ID：14927950
> 
> 赞同：2
> 
> 时间：2013-02-18T00:49:37.403
> 
> 标签：java, algorithm, bitmap, bit-manipulation

我有位 101 和 110。我想使用一些位运算符进行比较，忽略第一位，如 01 和 10。

例子：

```
I have:
101
110
===
01 & 10 <- How I want to consider
x00 <- The result I want 
```

或者

```
10110
11011
=====
0110 & 1011 <- How I want to consider
x0010 <- The result I want 
```

我如何在java中使用按位运算符来实现这一点？

细节：

*   第一位将始终为 1。
*   其他位是可变的。比较的双方将具有相同的位数。
*   我想检测如何在考虑其他位并忽略第一个位的情况下进行比较。

用例：

*   我有 2 个权限值。第一个是 5/101（需要的权限），第二个是 6/110（用户拥有的权限）。
*   排除第一个块，它总是 1，我想比较代表系统中某个权限规则的第三个块（使用按位）。
*   “所需的权限”位掩码表示：
    *   `1`- 我用来考虑左侧填充零的始终固定值（除非有其他方法可以实现）；
    *   `0`- 另一个对此比较无用的权限规则（我们称之为权限 1）；
    *   `1`- 当前权限规则所需的权限（我们称之为权限 2）。
*   “用户拥有的权限”是指：
    *   `1`- 要删除的固定值；
    *   `1`- 代表用户对权限1的值；
    *   `0`- 代表权限 2 的用户值。权限 2 的值为 1，但用户的值为 0，则不允许他执行所需的操作。相反，将允许执行该操作。

对于这种情况，任何更好的解决方案也将被视为正确答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T00:54:13.547

只需“和”带有第一位关闭的掩码的参数，例如`011 & arg`在比较它们之前。

编辑：在重述问题之后。

另一种方法是使用基于角色的权限，这些权限比布尔权限字符串更灵活且更易于理解。他们也是自我记录的。很少使用基于位串的权限，除非内存或磁盘空间非常宝贵，例如 Unix 早在 80 年代早期或在嵌入式系统中开发时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T01:38:23.347

如果您知道有用位数（例如`numofbits = 5`），则表达式的位掩码为：

```
bitmask = (1 << numofbits) - 1 
```

如果您不知道`numofbits`，只需使用 循环`num = num >> 1`，并计算迭代，直到您得到`num == 0`。

对于用例：

```
result = (req_roles & user_roles) & (bitmask >> 1) 
```

这只是`and`s 角色位，ans 削减了高位（始终为 1）

* * *

上一个问题的上一个答案:)：

如果您知道最高数字的位掩码（例如`bitmask = 0x1f` （`11111`以位为单位）），那么您需要以下表达式的结果：

```
result = (a ^ b) ^ (bitmask >> 1) 
```

它有什么作用？

*   比较所有位，相等的位将为 0
*   还原所有低位，因此相等的位将为 1（将高位排除在外，因此它将保持为 0）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T01:50:07.100

试试这个：

```
// tester 1
int x, y, z, mask;
x = 0x05; // 101
y = 0x06; // 110
mask = getMask(x, y);
z = (mask & (x & y));
System.out.println(String.format("mask: %x result: %x", mask, z));

// tester 2    
int x, y, z, mask;
x = 0x16; // 10110
y = 0x1B; // 11011
mask = getMask(x, y);
z = (mask & (x & y));
System.out.println(String.format("mask: %x result: %x", mask, z));

private int getMask(final int x, final int y) {
    int mask = findHighOrderOnBit(x, 0);
    mask = findHighOrderOnBit(y, mask) - 1;
    return mask;
}

private int findHighOrderOnBit(final int target, final int otherMask) {
    int result = 0x8000;
    for (int x = 0; x != 16; x++) {
        if ((result & target) > 0)
            break;
        result >>= 1;
    }
    if (otherMask > result)
        result = otherMask;
    return result;
} 
```

# ruby-on-rails - 为什么我不想在任何地方都使用 inverse_of？

> ID：14927952
> 
> 赞同：14
> 
> 时间：2013-02-18T00:49:41.260
> 
> 标签：ruby-on-rails, ruby, associations, rails-activerecord

如此处所述：

[http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

inverse_of 似乎告诉 Rails 缓存内存中的关联并最小化数据库查询。他们的例子是：

```
 class Dungeon < ActiveRecord::Base
   has_many :traps, :inverse_of => :dungeon
   has_one :evil_wizard, :inverse_of => :dungeon
 end

 class Trap < ActiveRecord::Base
   belongs_to :dungeon, :inverse_of => :traps
 end 
```

他们立即跟进：

```
 for `belongs_to` associations `has_many` inverse associations are ignored. 
```

所以我有几个问题。

1.  `has_many`对于 a是否忽略逆关联`belongs_to`？如果是这样，他们的例子有什么意义？它不应该什么都不做吗？
2.  据我所知（假设它做任何事情）所有这些允许做的事情是：

    ```
    dungeon.traps.first.dungeon 
    ```

    最后调用`.dungeon`不生成一个全新的查询，而只是达到内存中的关联。假设这是正确的，我为什么不想要这种行为？为什么我不坚持`inverse_of:`每一个协会？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T01:35:28.037

我开始写有关 rails 变形器的文章，以及当关联不是模型的直接变形时，您如何使用 inverse_of 来指示它是什么。但后来我滚动到你提到的部分，这就是我的看法。假设你有类似的东西：

```
# let's pick a dungeon
d = Dungeon.first

# say you find also find a trap that belongs to this particular d
t = Trap.find(...)

# then t.dungeon is the exact same object as d
d == t.dungeon 
```

当然`dungeon.traps.first.dungeon`没有真正的意义，我怀疑这就是为什么存在。就我个人而言，我不知道我会在哪里以及如何使用它，但他们给出的例子似乎填补了一个用例。它是这样的：

```
# you have an attribute level on dungeon
d.level # => 5

# now say you have a comparison after a modification to level
d.level = 10

# now without inverse_of the following thing occurs
d.level         # => 10
t.dungeon.level # => 5

# d was updated and since t.dungeon is a whole different object 
# it doesn't pick up the change and is out of sync but using invers_of you get
d.level         # => 10
t.dungeon.level # => 10

# because d and t.dungeon are the very same object 
```

希望能澄清事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-11T18:48:14.160

好消息！在 Rails 4.1 中，基本关联* 将**自动**设置`inverse_of`.

*更多的便利意味着更多的边缘情况......自动 inverse_of*仅*适用于***未***指定以下任何选项的关联：

*   `:through`
*   `:foreign_key`
*   `:conditions`
*   `:polymorphic`

资源：

[http://edgeguides.rubyonrails.org/4_1_release_notes.html](http://edgeguides.rubyonrails.org/4_1_release_notes.html) [http://wangjohn.github.io/activerecord/rails/associations/2013/08/14/automatic-inverse-of.html](http://wangjohn.github.io/activerecord/rails/associations/2013/08/14/automatic-inverse-of.html)

# c++ - 如何在构造函数中将数组作为参数传递？C++

> ID：14927956
> 
> 赞同：4
> 
> 时间：2013-02-18T00:50:23.943
> 
> 标签：c++, arrays, pointers, parameters, constructor

我正在尝试为类调用创建一个构造函数，其中 4 个数组作为参数传递。我试过使用`*,&`, 和数组本身；但是，当我将参数中的值分配给类中的变量时，出现此错误：

```
 call.cpp: In constructor ‘call::call(int*, int*, char*, char*)’:
 call.cpp:4:15: error: incompatible types in assignment of ‘int*’ to ‘int [8]’
 call.cpp:5:16: error: incompatible types in assignment of ‘int*’ to ‘int [8]’
 call.cpp:6:16: error: incompatible types in assignment of ‘char*’ to ‘char [14]’
 call.cpp:7:16: error: incompatible types in assignment of ‘char*’ to ‘char [14]’ 
```

感谢您帮助我找出我的错误并帮助我纠正它。这是我的代码：

## .h 文件

```
#ifndef call_h
#define call_h
class call{
private:
    int FROMNU[8]; 
    int DESTNUM[8];
    char INITIME[14]; 
    char ENDTIME[14];

public:
    call(int *,int *,char *,char *);
};
#endif 
```

## .cpp 文件

```
call:: call(int FROMNU[8],int DESTNUM[8],char INITIME[14],char ENDTIME[14]){
    this->FROMNU=FROMNU;
    this->DESTNUM=DESTNUM;
    this->INITIME=INITIME;
    this->ENDTIME=ENDTIME;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T00:58:22.640

原始数组是不可分配的，通​​常难以处理。但是您可以在 a 中放置一个数组`struct`，然后对其进行分配或初始化。本质上就是这样`std::array`。

例如你可以做

```
typedef std::array<int, 8>   num_t;
typedef std::array<char, 14> time_t;

class call_t
{
private:
    num_t    from_;
    num_t    dest_;
    time_t   init_;
    time_t   end_;

public:
    call_t(
        num_t const&     from,
        num_t const&     dest,
        time_t const&    init,
        time_t const&    end
        )
        : from_t( from ), dest_( dest ), init_( init ), end_( end )
    {}
}; 
```

但这仍然缺乏一些必要的抽象，因此它只是一种*技术*解决方案。

为了改进事情，考虑一下例如`num_t`真的是什么。也许是电话号码？然后这样建模。

还可以考虑使用标准库容器，并且对于,`std::vector`的数组。`char``std::string`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T01:06:30.730

**在 C++ 中可以将原始数组作为参数传递。**

考虑以下代码：

```
template<size_t array_size>
void f(char (&a)[array_size])
{
    size_t size_of_a = sizeof(a); // size_of_a is 8
}

int main()
{
    char a[8];
    f(a);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T00:58:47.793

在 C/C++ 中，您不能通过这样做来分配数组，`this->FROMNU=FROMNU;`因此您的方法将不起作用，并且是您错误的一半。

另一半是您尝试将指针分配给数组。即使您将数组传递给函数，它们也会衰减为指向第一个元素的指针，尽管您在定义中说了什么。

# events - 激活/停用未在导航视图中触发的配置侦听器以隐藏 sencha touch 2 中的导航栏按钮

> ID：14927959
> 
> 赞同：0
> 
> 时间：2013-02-18T00:50:49.353
> 
> 标签：events, event-handling, sencha-touch-2, hidden, navigationcontroller

我正在尝试做一些（至少我相信）在 ST2 中应该非常简单但它不起作用的事情。我有一个主视图 ( `xtype: navigationview`) 和一个辅助视图 ( `xtype: container`)。主视图的导航栏中有一个按钮，当导航到辅助视图时应该隐藏，返回主视图时显示。我已添加代码以`setHidden(true)`在主视图配置侦听器中标记 ，但两个事件均未触发。

有没有更好的方法来做到这一点？

主视图：

```
Ext.define('MyApp.view.Main', {
    extend: 'Ext.navigation.View',
    xtype: 'main',

    requires: [
        'Ext.dataview.List'
    ],

    config: {
        navigationBar: {
            items: [
                {
                    xtype: 'button',
                    iconCls: 'refresh',
                    iconMask: true,
                    itemId: 'refreshBtn',
                    align: 'left'
                }
            ]
        },
        items: [
            {
                xtype: 'button',
                itemId: 'next-page-button',
                text: 'Next Page'
            }
        ],

        listeners: {
            activate: function() {
                this.query('[itemId=refrehBtn]')[0].setHidden(false);
            },
            deactivate: function() {
                this.query('[itemId=refrehBtn]')[0].setHidden(true);
            }
        }
    },

    initialize: function() {
        this.callParent();
    }
}); 
```

次要观点：

```
Ext.define('MyApp.view.Main2', {
    extend: 'Ext.Container',
    xtype: 'main2',

    config: {
        items: [
            {
                xtype: 'panel',
                items: [
                    {
                        xtype: 'panel',
                        html: 'second view'
                    },
                ]
            }
        ]
    }
}); 
```

控制器：

```
Ext.define('MyApp.controller.TestController', {
    extend: 'Ext.app.Controller',

    config: {
        refs: {
            nextPgBtn: '[itemId=next-page-button]'
        },

        control: {
            nextPgBtn: {
                tap: 'showNextPg'
            }
        }
    },

    showNextPg: function(btn, e, opts) {
        btn.up('navigationview').push({
            xtype: 'main2'
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:04:13.160

首先，您需要更改查询以正确检索您的按钮。改变这个：

```
this.query('[itemId=refrehBtn]')[0].setHidden(false); 
```

对此：

```
Ext.ComponentQuery.query('#refreshBtn')[0].setHidden(false); 
```

其次，不要使用`activate`and `deactivate`event，而应该使用[back](http://docs.sencha.com/touch/2-1/#!/api/Ext.navigation.View-event-back)

事件`fires when the back button in the navigation view was tapped.`和[推送](http://docs.sencha.com/touch/2-1/#!/api/Ext.navigation.View-event-push)事件，`fires when a view is pushed into this navigation view`以便相应地显示和隐藏您的按钮：

```
back: function() {
    Ext.ComponentQuery.query('#refreshBtn')[0].setHidden(false);
},

push: function() {
    Ext.ComponentQuery.query('#refreshBtn')[0].setHidden(true);
} 
```

这是一个演示：[http ://www.senchafiddle.com/#GSt6x](http://www.senchafiddle.com/#GSt6x)

# r - RJSONIO 连接问题

> ID：14927966
> 
> 赞同：1
> 
> 时间：2013-02-18T00:51:34.517
> 
> 标签：r, file, rjsonio

这个问题可能很难回答，但也许您可以指导我调试此类问题。

我写了很少的脚本，很多功能，一个在另一个之上。我在最新版本的 RStudio 中开发（安装了最新的 R）。我完成了我的第一个脚本测试版并想“尝试一下”。当我在 RStudio 中运行它时（即使在重新启动 RStudio 之后，在加载任何库之前）一切正常。所以我用 `"C:\Program Files\R\R-2.15.2\bin\x64\Rscript.exe" "path to script\script.R" > "log_out.log" 2> "log_err.log"`.

它失败了。

`log_exec_out.log`没有产生任何输出，

`log_exec_err.log`包含错误消息：

> 文件中的错误（con，“r”）：无法打开连接调用：exec ... get_info.json -> fromJSON -> fromJSON -> I -> structure -> unique 执行停止

所以，我检查了干净的 R：

> 文件中的错误（con，“r”）：无法打开连接

它看起来像同样的错误，至少在某种程度上，traceback() 给了我以下信息：

> 13：文件（con，“r”）
> 
> 12：读行（内容）
> 
> 11：粘贴（读取行（内容），折叠=“\n”）
> 
> 10：withCallingHandlers（expr，警告=函数（w）invokeRestart（“muffleWarning”））
> 
> 9: suppressWarnings(paste(readLines(content), collapse = "\n"))
> 
> 8: 独特的(c("AsIs", oldClass(x)))
> 
> 7：结构（x，类=唯一（c（“AsIs”，oldClass（x））））
> 
> 6: I(suppressWarnings(paste(readLines(content), collapse = "\n")))
> 
> 5：来自JSON（网址）
> 
> 4：来自 my_script2.R#58 处的 JSON(url)
> 
> 3: get_info.json(symbol, day = "all") at my_script1.R#116
> 
> 2：actualize_df(symbol, df) 在#13
> 
> 1: exec("symbol_name", csv_dump = FALSE)

json url 指向以下数据结构：[https://pln.bitcurex.com/data/trades.json](https://pln.bitcurex.com/data/trades.json) 我认为是正确的，应该不会造成任何问题。与网站的其他连接，如 read.csv(url...) 在干净的 R 中工作正常。问题可能与 RJSONIO 有关，但它在 RStudio 中工作很奇怪。

你能告诉我可能是什么问题吗？我的下一步调试应该是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T01:18:27.357

我怀疑问题在于 URL 是 https，而不是 http，即安全 HTTP。

**注意：** `readLines()`无法处理。

你会想要使用`wget`，或者，我的偏好，使用`getURLContent()`RCurl**包**。所以

```
get_info.json() 
```

应该读取 URL 的内容并将其`fromJSON()`作为字符串传递给，最好使用`asText = TRUE`.

# ruby - 区分笔记本电脑规格

> ID：14927972
> 
> 赞同：0
> 
> 时间：2013-02-18T00:52:07.890
> 
> 标签：ruby, sorting

如果我有成千上万的字符串

> Toshiba - Satellite C855D-S5100 笔记本电脑、AMD E 系列处理器 (1.3 GHZ)、4GB DDR3、320GB 硬盘、15.6 英寸显示屏、AMD Radeon HD 6310、双层 DVD±RW/CD-RW、802.11 b/g/n , Windows 8 » 百思买售价 279.99 美元

并有一个具有不同属性的笔记本电脑对象，例如：

*   处理器
*   内存
*   硬盘
*   操作系统
*   ETC

我想为每个字符串创建一个笔记本电脑对象，并使用字符串中的格式化数据设置属性。

我想知道是否有一种简单的方法可以做到这一点，而不是通过执行 s.split(",") 将字符串拆分为一个数组，循环遍历它并将其与关键字进行比较：

即如果字符串包含“DDR3”，则将该字符串设置为RAM属性

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T02:01:33.647

Can you tell if for the thousands of strings you have some semblance of regularity, structure. The difficulty of what you ask is dependant of the variability between 2 different entries.

> Toshiba - Satellite C855D-S5100 Laptop, AMD E-Series Processor (1.3 GHZ), 4GB DDR3, 320GB HDD, 15.6" Display, AMD Radeon HD 6310, Double-layer DVD±RW/CD-RW, 802.11 b/g/n, Windows 8 » for $279.99 at Best Buy

Is pretty disimilar from

> Apple MacBook Pro - Core i5 2.5 GHz - 500 GB HDD / 5400 rpm - 13.3″ 1280 x 800 - 4 GB RAM - English

In one you have RAM in the other DDR3\. In one you have 4GB with no space and in the other there is a space. But it's not hopeless if your list contains strings which are all very similar in structure. Then I'd say figure out a regex for what you want to extract.

# java - 如何制作透明的 JFrame 但保持其他一切不变？

> ID：14927980
> 
> 赞同：14
> 
> 时间：2013-02-18T00:53:12.070
> 
> 标签：java, swing, jframe, transparency, translucency

我想让`JFrame`透明的，但它上面的图像是不透明的。这就是我现在所拥有的：

![在此处输入图像描述](../Images/7bfee4f00ec239853ba62c49a152668f.png)

有谁知道一种只使`JFrame`透明的方法？

这是我的代码：

```
import javax.swing.*;
import java.awt.*;
import com.sun.awt.AWTUtilities;
import static java.awt.GraphicsDevice.WindowTranslucency.*;

public class SplashDemo extends JFrame
{
    public SplashDemo()
    {
        setUndecorated(true);
        setSize(200, 200);

        add(new JLabel(new ImageIcon("puppy2.png"))); 
        setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        setVisible(true);

        setOpacity(0.85f);      
    }

     public static void main(String[] args) 
     {
        new SplashDemo();
     }
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-18T01:27:56.937

基本上，您需要制作一个透明的窗口和一个半透明的内容窗格。这将意味着添加到内容窗格的任何内容都将继续呈现，而无需额外的 alphering...

![在此处输入图像描述](../Images/359deaf63efa0457f95e893cca0d6480.png)

```
public class TranscluentWindow {

    public static void main(String[] args) {
        new TranscluentWindow();
    }

    public TranscluentWindow() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    try {
                        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                    } catch (Exception ex) {
                    }

                    JWindow frame = new JWindow();
                    frame.setAlwaysOnTop(true);
                    frame.addMouseListener(new MouseAdapter() {
                        @Override
                        public void mouseClicked(MouseEvent e) {
                            if (e.getClickCount() == 2) {
                                SwingUtilities.getWindowAncestor(e.getComponent()).dispose();
                            }
                        }
                    });
                    frame.setBackground(new Color(0,0,0,0));
                    frame.setContentPane(new TranslucentPane());
                    frame.add(new JLabel(new ImageIcon(ImageIO.read(getClass().getResource("/Puppy.png")))));
                    frame.pack();
                    frame.setLocationRelativeTo(null);
                    frame.setVisible(true);
                } catch (IOException ex) {
                    ex.printStackTrace();
                }

            }
        });
    }

    public class TranslucentPane extends JPanel {

        public TranslucentPane() {
            setOpaque(false);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g); 

            Graphics2D g2d = (Graphics2D) g.create();
            g2d.setComposite(AlphaComposite.SrcOver.derive(0.85f));
            g2d.setColor(getBackground());
            g2d.fillRect(0, 0, getWidth(), getHeight());

        }

    }

} 
```

# file-io - xtend 代码生成文件输出（将文件排序到包中）

> ID：14927994
> 
> 赞同：1
> 
> 时间：2013-02-18T00:54:50.387
> 
> 标签：file-io, code-generation, xtend

这是我的一些 xtend 代码的示例：

```
for(e: resource.allContents.toIterable.filter(typeof(Entity))) {
                    fsa.generateFile(e.name.toFirstUpper + ".java",
                    e.compileEntity)
                    }

def compileEntity(Entity e) '''
    package blahblah

    public class «e.name.toFirstUpper» {
        [My code]
    }
    ''' 
```

这会在不同的文件中输出多个 java 类。是否可以将它们输出到包或文件夹中？这将允许我指定源代码文件结构，而不是将大量类输出到“src-gen”文件夹的根目录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T07:47:48.370

`fsa.generateFile`接受您只需传递纯文件名的路径。那会成功的。

# java - 为什么以下 java 代码不会产生错误？（访问修饰符）

> ID：14927997
> 
> 赞同：1
> 
> 时间：2013-02-18T00:55:00.030
> 
> 标签：java

```
class SomeClass1 {
  void method1() { }
  public void method2() { }
  private void method3() { }
  protected void method4() { }
}
class DemoClass{
  public static void main(String[] parameters) {
    SomeClass1 sc = new SomeClass1();
    sc.method1();
    sc.method2();
    sc.method4();
  }
} 
```

受保护的方法只能由继承超类的类访问。正如我们在这里看到的那样，DemoClass 没有扩展 SomeClass。但是，它能够访问受保护的方法。这怎么可能？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T00:56:50.117

那是因为它们在同一个包中：

> 修饰符指定该`protected`成员只能在其自己的包中访问（与 package-private 一样），此外，它的类在另一个包中的子类也可以访问。

（[链接到文档](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T00:58:23.413

请参阅[在 Java 中，default、public、protected 和 private 之间的区别](https://stackoverflow.com/questions/215497/in-java-whats-the-difference-between-public-default-protected-and-private)

基本上，protected 可以从类、子类和包中访问。这两个类在同一个包中，因此没有错误。